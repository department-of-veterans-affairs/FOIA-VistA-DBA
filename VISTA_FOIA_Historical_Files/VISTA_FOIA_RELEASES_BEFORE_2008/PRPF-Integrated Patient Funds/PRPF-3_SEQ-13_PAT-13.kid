Released PRPF*3*13 SEQ #13
Extracted from mail message
**KIDS**:PRPF*3.0*13^

**INSTALL NAME**
PRPF*3.0*13
"BLD",4052,0)
PRPF*3.0*13^INTEGRATED PATIENT FUNDS^0^3020808^y
"BLD",4052,1,0)
^^1^1^3020529^^
"BLD",4052,1,1,0)
PERSONAL FUNDS MULTIDIV
"BLD",4052,4,0)
^9.64PA^470^1
"BLD",4052,4,470,0)
470
"BLD",4052,4,470,222)
y^n^f^^^^n
"BLD",4052,4,"B",470,470)

"BLD",4052,"KRN",0)
^9.67PA^8989.52^19
"BLD",4052,"KRN",.4,0)
.4
"BLD",4052,"KRN",.4,"NM",0)
^9.68A^15^15
"BLD",4052,"KRN",.4,"NM",1,0)
PRPF DORMANT ACCOUNT LIST    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",2,0)
PRPF MIN/MAX2    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",3,0)
PRPF OVERDUE PRINT    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",4,0)
PRPF OUT OF BALANCE    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",5,0)
PRPF NEGATIVE BALANCES    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",6,0)
PRPF BALANCE IN ACCOUNTS    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",7,0)
PRPF PATIENT LIST    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",8,0)
PRPF PATIENT SUMMARY    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",9,0)
PRPF INDIGENT LIST    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",10,0)
PRPF DAILY TRANSACTION SUMMARY    FILE #470.1^470.1^0
"BLD",4052,"KRN",.4,"NM",11,0)
PRPF DAILY ACTIVITY    FILE #470.1^470.1^0
"BLD",4052,"KRN",.4,"NM",12,0)
PRPF FISCAL ACTIVITY REPORT    FILE #470.1^470.1^0
"BLD",4052,"KRN",.4,"NM",13,0)
PRPF FISCAL TRANS SUMMARY    FILE #470.1^470.1^0
"BLD",4052,"KRN",.4,"NM",14,0)
PRPF UNASSIGNED STATION LIST    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM",15,0)
PRPF MIN/MAX1    FILE #470^470^0
"BLD",4052,"KRN",.4,"NM","B","PRPF BALANCE IN ACCOUNTS    FILE #470",6)

"BLD",4052,"KRN",.4,"NM","B","PRPF DAILY ACTIVITY    FILE #470.1",11)

"BLD",4052,"KRN",.4,"NM","B","PRPF DAILY TRANSACTION SUMMARY    FILE #470.1",10)

"BLD",4052,"KRN",.4,"NM","B","PRPF DORMANT ACCOUNT LIST    FILE #470",1)

"BLD",4052,"KRN",.4,"NM","B","PRPF FISCAL ACTIVITY REPORT    FILE #470.1",12)

"BLD",4052,"KRN",.4,"NM","B","PRPF FISCAL TRANS SUMMARY    FILE #470.1",13)

"BLD",4052,"KRN",.4,"NM","B","PRPF INDIGENT LIST    FILE #470",9)

"BLD",4052,"KRN",.4,"NM","B","PRPF MIN/MAX1    FILE #470",15)

"BLD",4052,"KRN",.4,"NM","B","PRPF MIN/MAX2    FILE #470",2)

"BLD",4052,"KRN",.4,"NM","B","PRPF NEGATIVE BALANCES    FILE #470",5)

"BLD",4052,"KRN",.4,"NM","B","PRPF OUT OF BALANCE    FILE #470",4)

"BLD",4052,"KRN",.4,"NM","B","PRPF OVERDUE PRINT    FILE #470",3)

"BLD",4052,"KRN",.4,"NM","B","PRPF PATIENT LIST    FILE #470",7)

"BLD",4052,"KRN",.4,"NM","B","PRPF PATIENT SUMMARY    FILE #470",8)

"BLD",4052,"KRN",.4,"NM","B","PRPF UNASSIGNED STATION LIST    FILE #470",14)

"BLD",4052,"KRN",.401,0)
.401
"BLD",4052,"KRN",.401,"NM",0)
^9.68A^1^1
"BLD",4052,"KRN",.401,"NM",1,0)
PRPF UNASSIGNED STATION LIST    FILE #470^470^0
"BLD",4052,"KRN",.401,"NM","B","PRPF UNASSIGNED STATION LIST    FILE #470",1)

"BLD",4052,"KRN",.402,0)
.402
"BLD",4052,"KRN",.402,"NM",0)
^9.68A^3^3
"BLD",4052,"KRN",.402,"NM",1,0)
PRPF LONG REGISTRATION    FILE #470^470^0
"BLD",4052,"KRN",.402,"NM",2,0)
PRPF SHORT REGISTRATION    FILE #470^470^0
"BLD",4052,"KRN",.402,"NM",3,0)
PRPF INACTIVE/ACTIVE    FILE #470^470^0
"BLD",4052,"KRN",.402,"NM","B","PRPF INACTIVE/ACTIVE    FILE #470",3)

"BLD",4052,"KRN",.402,"NM","B","PRPF LONG REGISTRATION    FILE #470",1)

"BLD",4052,"KRN",.402,"NM","B","PRPF SHORT REGISTRATION    FILE #470",2)

"BLD",4052,"KRN",.403,0)
.403
"BLD",4052,"KRN",.5,0)
.5
"BLD",4052,"KRN",.84,0)
.84
"BLD",4052,"KRN",3.6,0)
3.6
"BLD",4052,"KRN",3.8,0)
3.8
"BLD",4052,"KRN",9.2,0)
9.2
"BLD",4052,"KRN",9.8,0)
9.8
"BLD",4052,"KRN",9.8,"NM",0)
^9.68A^8^8
"BLD",4052,"KRN",9.8,"NM",1,0)
PRPFPNT^^0^B14890211
"BLD",4052,"KRN",9.8,"NM",2,0)
PRPFRES^^0^B17517773
"BLD",4052,"KRN",9.8,"NM",3,0)
PRPFRPT^^0^B7876934
"BLD",4052,"KRN",9.8,"NM",4,0)
PRPFMIN^^0^B8933422
"BLD",4052,"KRN",9.8,"NM",5,0)
PRPFNQ^^0^B23697855
"BLD",4052,"KRN",9.8,"NM",6,0)
PRPFQ^^0^B18960252
"BLD",4052,"KRN",9.8,"NM",7,0)
PRPFOBR^^0^B16308608
"BLD",4052,"KRN",9.8,"NM",8,0)
PRPFBAL^^0^B16147537
"BLD",4052,"KRN",9.8,"NM","B","PRPFBAL",8)

"BLD",4052,"KRN",9.8,"NM","B","PRPFMIN",4)

"BLD",4052,"KRN",9.8,"NM","B","PRPFNQ",5)

"BLD",4052,"KRN",9.8,"NM","B","PRPFOBR",7)

"BLD",4052,"KRN",9.8,"NM","B","PRPFPNT",1)

"BLD",4052,"KRN",9.8,"NM","B","PRPFQ",6)

"BLD",4052,"KRN",9.8,"NM","B","PRPFRES",2)

"BLD",4052,"KRN",9.8,"NM","B","PRPFRPT",3)

"BLD",4052,"KRN",19,0)
19
"BLD",4052,"KRN",19,"NM",0)
^9.68A^4^4
"BLD",4052,"KRN",19,"NM",1,0)
PRPF OUTPUT (REPORTS)^^2
"BLD",4052,"KRN",19,"NM",2,0)
PRPF UNASSIGNED STATION LIST^^0
"BLD",4052,"KRN",19,"NM",3,0)
PRPF TASKMAN NEGATIVE BAL^^0
"BLD",4052,"KRN",19,"NM",4,0)
PRPF TASKMAN OUT OF BALANCE^^0
"BLD",4052,"KRN",19,"NM","B","PRPF OUTPUT (REPORTS)",1)

"BLD",4052,"KRN",19,"NM","B","PRPF TASKMAN NEGATIVE BAL",3)

"BLD",4052,"KRN",19,"NM","B","PRPF TASKMAN OUT OF BALANCE",4)

"BLD",4052,"KRN",19,"NM","B","PRPF UNASSIGNED STATION LIST",2)

"BLD",4052,"KRN",19.1,0)
19.1
"BLD",4052,"KRN",101,0)
101
"BLD",4052,"KRN",409.61,0)
409.61
"BLD",4052,"KRN",771,0)
771
"BLD",4052,"KRN",870,0)
870
"BLD",4052,"KRN",8989.51,0)
8989.51
"BLD",4052,"KRN",8989.52,0)
8989.52
"BLD",4052,"KRN",8994,0)
8994
"BLD",4052,"KRN","B",.4,.4)

"BLD",4052,"KRN","B",.401,.401)

"BLD",4052,"KRN","B",.402,.402)

"BLD",4052,"KRN","B",.403,.403)

"BLD",4052,"KRN","B",.5,.5)

"BLD",4052,"KRN","B",.84,.84)

"BLD",4052,"KRN","B",3.6,3.6)

"BLD",4052,"KRN","B",3.8,3.8)

"BLD",4052,"KRN","B",9.2,9.2)

"BLD",4052,"KRN","B",9.8,9.8)

"BLD",4052,"KRN","B",19,19)

"BLD",4052,"KRN","B",19.1,19.1)

"BLD",4052,"KRN","B",101,101)

"BLD",4052,"KRN","B",409.61,409.61)

"BLD",4052,"KRN","B",771,771)

"BLD",4052,"KRN","B",870,870)

"BLD",4052,"KRN","B",8989.51,8989.51)

"BLD",4052,"KRN","B",8989.52,8989.52)

"BLD",4052,"KRN","B",8994,8994)

"BLD",4052,"QUES",0)
^9.62^^
"BLD",4052,"REQB",0)
^9.611^6^6
"BLD",4052,"REQB",1,0)
PRPF*3.0*10^1
"BLD",4052,"REQB",2,0)
PRPF*3.0*8^1
"BLD",4052,"REQB",3,0)
PRPF*3.0*9^1
"BLD",4052,"REQB",4,0)
PRPF*3.0*12^1
"BLD",4052,"REQB",5,0)
PRPF*3.0*7^1
"BLD",4052,"REQB",6,0)
PRPF*3.0*6^1
"BLD",4052,"REQB","B","PRPF*3.0*10",1)

"BLD",4052,"REQB","B","PRPF*3.0*12",4)

"BLD",4052,"REQB","B","PRPF*3.0*6",6)

"BLD",4052,"REQB","B","PRPF*3.0*7",5)

"BLD",4052,"REQB","B","PRPF*3.0*8",2)

"BLD",4052,"REQB","B","PRPF*3.0*9",3)

"FIA",470)
PATIENT FUNDS
"FIA",470,0)
^PRPF(470,
"FIA",470,0,0)
470PI
"FIA",470,0,1)
y^n^f^^^^n
"FIA",470,0,10)

"FIA",470,0,11)

"FIA",470,0,"RLRO")

"FIA",470,0,"VR")
3.0^PRPF
"FIA",470,470)
0
"FIA",470,470.01)
0
"FIA",470,470.02)
0
"FIA",470,470.03)
0
"FIA",470,470.035)
0
"FIA",470,470.04)
0
"FIA",470,470.05)
0
"FIA",470,470.06)
0
"FIA",470,470.07)
0
"FIA",470,470.071)
0
"FIA",470,470.072)
0
"KRN",.4,1833,-1)
0^11
"KRN",.4,1833,0)
PRPF DAILY ACTIVITY^3020504.1439^^470.1^^^3020731^
"KRN",.4,1833,"DCL","470.1^3")
&
"KRN",.4,1833,"DXS")
2
"KRN",.4,1833,"DXS",1,9.2)
S I(0,0)=$G(D0),DIP(1)=$S($D(^PRPF(470.1,D0,0)):^(0),1:""),D0=$P(DIP(1),U,2) S:'D0!'$D(^PRPF(470,+D0,0)) D0=-1 S DIP(101)=$S($D(^PRPF(470,D0,12)):^(12),1:"")
"KRN",.4,1833,"F",1)
X DXS(1,9.2) S X=$S('$D(^DIC(4,+$P(DIP(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) W X K DIP;C1;L18;"STATION";Z;"PATIENT NAME:STATION NAME"~1~4~6~3~
"KRN",.4,1833,"F",2)
15~
"KRN",.4,1833,"H")
PATIENT FUNDS DAILY ACTIVITY (AUDIT) LISTING
"KRN",.4,1834,-1)
0^10
"KRN",.4,1834,0)
PRPF DAILY TRANSACTION SUMMARY^3020429.172^^470.1^^^3020731
"KRN",.4,1834,"DXS")
3
"KRN",.4,1834,"DXS",1,9.2)
S I(0,0)=$G(D0),DIP(1)=$S($D(^PRPF(470.1,D0,0)):^(0),1:""),D0=$P(DIP(1),U,2) S:'D0!'$D(^PRPF(470,+D0,0)) D0=-1 S DIP(101)=$S($D(^PRPF(470,D0,12)):^(12),1:"")
"KRN",.4,1834,"DXS",2,9.2)
S I(0,0)=$G(D0),DIP(1)=$S($D(^PRPF(470.1,D0,0)):^(0),1:""),D0=$P(DIP(1),U,14) S:'D0!'$D(^VA(200,+D0,0)) D0=-1 S DIP(101)=$S($D(^VA(200,D0,0)):^(0),1:"")
"KRN",.4,1834,"F",1)
X DXS(1,9.2) S X=$S('$D(^DIC(4,+$P(DIP(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) W X K DIP;"STATION";C1;L12;Z;"PATIENT NAME:STATION NAME"~.01;L8~
"KRN",.4,1834,"F",2)
1;L20~6~4~3~7;"DEP/WITH"~X DXS(2,9.2) S X=$P(DIP(101),U,2) S D0=I(0,0) W X K DIP;"CLERK INITIALS";Z;"PATIENT FUNDS CLERK:INITIAL"~
"KRN",.4,1834,"H")
PATIENT FUNDS DAILY TRANSACTION LISTING
"KRN",.4,1837,-1)
0^9
"KRN",.4,1837,0)
PRPF INDIGENT LIST^3020513.1811^^470^^^3020731^
"KRN",.4,1837,"F",1)
73;C1;L13;"STATION"~.01;L18~50;L10~52;L12~4;"INDGNT"L5~14;"BALANCE";R10~
"KRN",.4,1837,"H")
PATIENT FUNDS INDIGENT LIST
"KRN",.4,1838,-1)
0^8
"KRN",.4,1838,0)
PRPF PATIENT SUMMARY^3020425.194^^470^^^3020803^
"KRN",.4,1838,"DCL","470^14")
&
"KRN",.4,1838,"DXS")
2
"KRN",.4,1838,"DXS",1,9.2)
X "N I,Y "_$P(^DD(470,50,0),U,5,99) S DIP(1)=X S X=DIP(1),DIP(2)=X S X=1,DIP(3)=X S X=3,X=$E(DIP(2),DIP(3),X)_"-",DIP(4)=X S X=DIP(1),DIP(5)=X S X=4
"KRN",.4,1838,"DXS",1,9.3)
X DXS(1,9.2) S DIP(6)=X S X=5,X=$E(DIP(5),DIP(6),X) S Y=X,X=DIP(4),X=X_Y_"-",DIP(7)=X S X=DIP(1),DIP(8)=X S X=6,DIP(9)=X S X=9
"KRN",.4,1838,"F",1)
S DFN=D0 D ^PRPFDEF;"";Z;"S DFN=D0 D ^PRPFDEF"~73;C1;L15~.01;L25~
"KRN",.4,1838,"F",2)
X DXS(1,9.3) S X=$E(DIP(8),DIP(9),X) S Y=X,X=DIP(7),X=X_Y W X K DIP;L12;"SSN";Z;"$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)"~52~1;L8~14;"BALANCE"~
"KRN",.4,1838,"F",3)
30.5~2;L15~
"KRN",.4,1838,"H")
PATIENT FUNDS DAILY SUMMARY
"KRN",.4,1839,-1)
0^6
"KRN",.4,1839,0)
PRPF BALANCE IN ACCOUNTS^3020805.1057^^470^^^3020806^
"KRN",.4,1839,"DCL","470^.01")
!
"KRN",.4,1839,"DCL","470^14")
&
"KRN",.4,1839,"DNP")
1
"KRN",.4,1839,"F",1)
.01;"STATION";C1;L15~14;C22~
"KRN",.4,1839,"H")
PATIENT FUNDS BALANCE IN ALL ACCOUNTS
"KRN",.4,1840,-1)
0^7
"KRN",.4,1840,0)
PRPF PATIENT LIST^3020513.1721^^470^^^3020731^
"KRN",.4,1840,"F",1)
73;C1;L10;"STATION"~.01;L16~50;L9~53~52;L8~1;L8~2;L9~10.5;L11~51;L11~10;L11~14;BALANCE;R10~
"KRN",.4,1840,"H")
PATIENT FUNDS LIST
"KRN",.4,1841,-1)
0^3
"KRN",.4,1841,0)
PRPF OVERDUE PRINT^3020515.1309^^470^^^3020731^
"KRN",.4,1841,"F",1)
73;C1;L15;STATION"~.01~50~52~10.5~10.7;L20;"PROVIDER AUTHORIZING RESTRICTION"~
"KRN",.4,1841,"H")
PATIENT FUNDS LISTING OF OUT OF DATE RESTRICTIONS
"KRN",.4,1842,-1)
0^15
"KRN",.4,1842,0)
PRPF MIN/MAX1^3020510.1656^^470^^^3020731^
"KRN",.4,1842,"F",1)
73;C1;L10~.01;L17~50;L9~52;L7~14;"BALANCE";R9~23;R6;D0~24;R6;D0~
"KRN",.4,1842,"H")
PATIENT FUNDS MIN/MAX #1 REPORT
"KRN",.4,1843,-1)
0^2
"KRN",.4,1843,0)
PRPF MIN/MAX2^3020510.1657^^470^^^3020731^
"KRN",.4,1843,"F",1)
73;C1;L10~.01;L17~50;L9~52;L7~14;"BALANCE";R9~25;R6;D0~26;R6;D0~
"KRN",.4,1843,"H")
PATIENT FUNDS MIN/MAX #2 REPORT
"KRN",.4,1844,-1)
0^4
"KRN",.4,1844,0)
PRPF OUT OF BALANCE^3020510.1717^^470^^^3020803^
"KRN",.4,1844,"F",1)
73;C1;L15;"STATION"~.01;L20~50;L10~14;R10~15;R10~16;R10~14.5;R10~15.5;R10~16.5;R10~
"KRN",.4,1844,"H")
PATIENT FUNDS OUT OF BALANCE REPORT
"KRN",.4,1846,-1)
0^1
"KRN",.4,1846,0)
PRPF DORMANT ACCOUNT LIST^3020510.1644^^470^^^3020731
"KRN",.4,1846,"F",1)
73;C1;L12~.01;L17~50;L9~10;L11~52;L10~14;&;"BALANCE";R10~
"KRN",.4,1846,"H")
PATIENT FUNDS DORMANT ACCOUNT LISTING
"KRN",.4,1848,-1)
0^12
"KRN",.4,1848,0)
PRPF FISCAL ACTIVITY REPORT^3020514.0048^^470.1^^^3020808
"KRN",.4,1848,"DCL","470.1^3")
&
"KRN",.4,1848,"DXS")
2
"KRN",.4,1848,"DXS",1,9.2)
S I(0,0)=$G(D0),DIP(1)=$S($D(^PRPF(470.1,D0,0)):^(0),1:""),D0=$P(DIP(1),U,2) S:'D0!'$D(^PRPF(470,+D0,0)) D0=-1 S DIP(101)=$S($D(^PRPF(470,D0,12)):^(12),1:"")
"KRN",.4,1848,"F",1)
X DXS(1,9.2) S X=$S('$D(^DIC(4,+$P(DIP(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) W X K DIP;"STATION";C1;L18;Z;"PATIENT NAME:STATION NAME"~1;L20~5~6~
"KRN",.4,1848,"F",2)
8~3~15;L25~
"KRN",.4,1848,"H")
PATIENT FUNDS END OF MONTH REPORT FOR FISCAL SERVICE
"KRN",.4,1849,-1)
0^13
"KRN",.4,1849,0)
PRPF FISCAL TRANS SUMMARY^3020429.1413^^470.1^^^3020808
"KRN",.4,1849,"DXS")
3
"KRN",.4,1849,"DXS",1,9.2)
S I(0,0)=$G(D0),DIP(1)=$S($D(^PRPF(470.1,D0,0)):^(0),1:""),D0=$P(DIP(1),U,2) S:'D0!'$D(^PRPF(470,+D0,0)) D0=-1 S DIP(101)=$S($D(^PRPF(470,D0,12)):^(12),1:"")
"KRN",.4,1849,"DXS",2,9.2)
S I(0,0)=$G(D0),DIP(1)=$S($D(^PRPF(470.1,D0,0)):^(0),1:""),D0=$P(DIP(1),U,14) S:'D0!'$D(^VA(200,+D0,0)) D0=-1 S DIP(101)=$S($D(^VA(200,D0,0)):^(0),1:"")
"KRN",.4,1849,"F",1)
X DXS(1,9.2) S X=$S('$D(^DIC(4,+$P(DIP(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) W X K DIP;"STATION";C1;L12;Z;"PATIENT NAME:STATION NAME"~.01;L8~
"KRN",.4,1849,"F",2)
1;L20~6~5~3~7;"DEP/WITH"~X DXS(2,9.2) S X=$P(DIP(101),U,2) S D0=I(0,0) W X K DIP;"CLERK INITIALS";Z;"PATIENT FUNDS CLERK:INITIAL"~
"KRN",.4,1849,"H")
PATIENT FUNDS - FISCAL TRANSACTION SUMMARY
"KRN",.4,1853,-1)
0^5
"KRN",.4,1853,0)
PRPF NEGATIVE BALANCES^3020510.1719^^470^^^3020803^
"KRN",.4,1853,"F",1)
73;C1;L12;"STATION"~.01;L18~50;L9~14;R9~21;R9~22;R9~
"KRN",.4,1853,"H")
PATIENT FUNDS NEGATIVE BALANCE LIST
"KRN",.4,2571,-1)
0^14
"KRN",.4,2571,0)
PRPF UNASSIGNED STATION LIST^3020802.0949^@^470^^@^3020803
"KRN",.4,2571,"F",1)
.01;C1;L25;"PATIENT NAME"~50;L18~52~1~
"KRN",.4,2571,"H")
UNASSIGNED STATION NAME LISTING
"KRN",.401,1891,-1)
0^1
"KRN",.401,1891,0)
PRPF UNASSIGNED STATION LIST^3020515.1744^@^470^^@^3020802
"KRN",.401,1891,2,0)
^.4014^2^2
"KRN",.401,1891,2,1,0)
470^^STATION NAME^@"73^^^^^^4
"KRN",.401,1891,2,1,"CM")
S Y(1)=$S($D(^PRPF(470,D0,12)):^(12),1:"") S X=$S('$D(^DIC(4,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,1891,2,1,"F")
?z^@
"KRN",.401,1891,2,1,"GET")
S Y(1)=$S($D(^PRPF(470,D0,12)):^(12),1:"") S X=$S('$D(^DIC(4,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,1891,2,1,"QCON")
I DISX(1)=""
"KRN",.401,1891,2,1,"T")
@^@
"KRN",.401,1891,2,1,"TXT")
STATION NAME is null
"KRN",.401,1891,2,2,0)
470^^NAME^".01^^^^^^4
"KRN",.401,1891,2,2,"CM")
S Y(1)=$S($D(^PRPF(470,D0,0)):^(0),1:"") S X=$S('$D(^DPT(+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,1891,2,2,"GET")
S Y(1)=$S($D(^PRPF(470,D0,0)):^(0),1:"") S X=$S('$D(^DPT(+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,1891,2,2,"IX")
^PRPF(470,"B",^PRPF(470,^2
"KRN",.401,1891,2,2,"PTRIX")
^DPT("B",
"KRN",.401,1891,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1891,2,2,"SER")
0.0000^0.0000
"KRN",.401,1891,2,2,"TXT")
NAME not null
"KRN",.401,1891,2,"B",470,1)

"KRN",.401,1891,2,"B",470,2)

"KRN",.401,1891,"%D",0)
^.4012^1^1^3020515^^^^
"KRN",.401,1891,"%D",1,0)
THIS TEMPLATE WILL SEARCH FOR PATIENTS WITH OUT A STATION ASSIGNED TO THEM
"KRN",.402,2095,-1)
0^1
"KRN",.402,2095,0)
PRPF LONG REGISTRATION^3020514.113^^470^^^3020802^
"KRN",.402,2095,"DIAB",1,1,470.05,0)
ALL
"KRN",.402,2095,"DR",1,470)
73;1////A;2//UNRESTRICTED;I "UX"[X S Y="@1";10.5;10.7;17;18;S Y="@2";@1;S $P(^PRPF(470,DA,1),"^",7,8)="^";S $P(^PRPF(470,DA,0),"^",12,13)="^";@2;3//UNKNOWN;4//NO;5;6;7;8;9;23;24;25;26;33;34;35;
"KRN",.402,2095,"DR",2,470.05)
.01:3
"KRN",.402,2098,-1)
0^2
"KRN",.402,2098,0)
PRPF SHORT REGISTRATION^3020514.113^^470^^^3020802^
"KRN",.402,2098,"DR",1,470)
73;1//ACTIVE;2;I "XU"[X S Y="@1",$P(^PRPF(470,DA,1),"^",7,8)="^",$P(^(0),"^",12,13)="^";10.5;10.7;17;18;@1;34;35;
"KRN",.402,2099,-1)
0^3
"KRN",.402,2099,0)
PRPF INACTIVE/ACTIVE^3020509.0906^^470^^^3020717^
"KRN",.402,2099,"DR",1,470)
1//INACTIVE;73;
"KRN",19,7241,-1)
2^1
"KRN",19,7241,0)
PRPF OUTPUT (REPORTS)^Output (Reports) Menu^^M^.5^^^^^^^466
"KRN",19,7241,10,0)
^19.01IP^13^13
"KRN",19,7241,10,13,0)
11434^13^
"KRN",19,7241,10,13,"^")
PRPF UNASSIGNED STATION LIST
"KRN",19,7241,"U")
OUTPUT (REPORTS) MENU
"KRN",19,7243,-1)
0^4
"KRN",19,7243,0)
PRPF TASKMAN OUT OF BALANCE^Out of Balance Report (TASKMAN)^^R^^^^^^^^INTEGRATED PATIENT FUNDS
"KRN",19,7243,1,0)
^19.06^3^3^3020805^^^^
"KRN",19,7243,1,1,0)
This option is designed to be a scheduled option running on a recurring
"KRN",19,7243,1,2,0)
basis by TASKMAN.  IT SHOULD NOT BE ASSIGNED TO A MENU.  This option
"KRN",19,7243,1,3,0)
produces the same report as the PRPF OUT OF BALANCE option.
"KRN",19,7243,25)
TM^PRPFOBR
"KRN",19,7243,200.9)
y
"KRN",19,7243,"U")
OUT OF BALANCE REPORT (TASKMAN
"KRN",19,7265,-1)
0^3
"KRN",19,7265,0)
PRPF TASKMAN NEGATIVE BAL^Negative Balance Report (TASKMAN)^^R^^^^^^^^INTEGRATED PATIENT FUNDS
"KRN",19,7265,1,0)
^19.06^3^3^3020805^^^^
"KRN",19,7265,1,1,0)
This option, specifically designed to be scheduled through TaskMan, prints
"KRN",19,7265,1,2,0)
a list of all accounts with negative balances in either total balance, or
"KRN",19,7265,1,3,0)
restrictions balance.
"KRN",19,7265,25)
TM^PRPFRES
"KRN",19,7265,200.9)
y
"KRN",19,7265,"U")
NEGATIVE BALANCE REPORT (TASKM
"KRN",19,11434,-1)
0^2
"KRN",19,11434,0)
PRPF UNASSIGNED STATION LIST^Unassigned Station-ID List^^R^^^^^^^^INTEGRATED PATIENT FUNDS
"KRN",19,11434,25)
UNSTA^PRPFPNT
"KRN",19,11434,"U")
UNASSIGNED STATION-ID LIST
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",466,-1)
1^1
"PKG",466,0)
INTEGRATED PATIENT FUNDS^PRPF^PATIENT FUNDS.  INTEGRATED WITH PATIENT FILE
"PKG",466,20,0)
^9.402P^^
"PKG",466,22,0)
^9.49I^1^1
"PKG",466,22,1,0)
3.0^2970224
"PKG",466,22,1,"PAH",1,0)
13^3020808
"PKG",466,22,1,"PAH",1,1,0)
^^1^1^3020808
"PKG",466,22,1,"PAH",1,1,1,0)
PERSONAL FUNDS MULTIDIV
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
8
"RTN","PRPFBAL")
0^8^B16147537
"RTN","PRPFBAL",1,0)
PRPFBAL ;ALTOONA/CTB-PATIENT LOOKUP AND COMPUTE BALANCE ;04/20/02
"RTN","PRPFBAL",2,0)
V ;;3.0;PATIENT FUNDS;**6,8,13**;JUNE 1, 1989
"RTN","PRPFBAL",3,0)
EN S DIC(0)="ZAEQM",DIC=470 D ^DIC I +Y>0 S DFN=+Y,DFN(0)=Y(0),DFN(0,0)=Y(0,0),DFN(1)=$S($D(^PRPF(470,DFN,1)):^(1),1:"") D EN1 G EN
"RTN","PRPFBAL",4,0)
 W:$D(IOF) @IOF K %,%W,%X,%Y,C,DFN,DIC,DIYS,POP,Y
"RTN","PRPFBAL",5,0)
OUT K %H,%I,%TG,D,D1,DG1,DGT,DGX,DIW,DIWT,DN,I,N,PFHI,PFLO,PFNORM,PRBAL,Q3,RES,TMP,TYPE,X,X2,Y,Z Q
"RTN","PRPFBAL",6,0)
EN1 D HILO S PRBAL("DEF")=$P(^DD(470,30.5,0),"^",5,99) S DFN(0)=^PRPF(470,DFN,0),DFN(1)=$S($D(^(1)):^(1),1:""),DFN(0,0)=$P(^DPT(DFN,0),"^") D EN^PRPFRES S PRBAL("SB")=$P(DFN(1),"^",4),PRBAL("PB")=$P(DFN(1),"^",5),PRBAL("GB")=$P(DFN(1),"^",6)
"RTN","PRPFBAL",7,0)
 S RES=$P(DFN(0),U,3) S TYPE=$S(RES="R":"RESTRICTED",RES="L":"LIMITED UNRESTRICTED",RES="U":"UNRESTRICTED",1:"UNKNOWN")
"RTN","PRPFBAL",8,0)
A D ^PRPFDEF S D0=DFN X PRBAL("DEF") K D0 S PRBAL("DEF")=X
"RTN","PRPFBAL",9,0)
 W:$D(IOF) @IOF W !,@PFHI,$P(DFN(0,0),"^"),@PFLO,?40 W "SSN: ",@PFHI S SSN=$P(^DPT(+DFN(0),0),"^",9)
"RTN","PRPFBAL",10,0)
 W $E(SSN,1,3),@PFLO,"-",@PFHI,$E(SSN,4,5),@PFLO,"-",@PFHI,$E(SSN,6,9),?60,@PFLO,"CLAIM #: ",@PFHI,$S($D(^DPT(+DFN(0),.31)):$P(^(.31),"^",3),1:""),@PFLO K SSN
"RTN","PRPFBAL",11,0)
 D DGINPW^PRPFU1 W @PFHI D DEAD^PRPFED W @PFLO,!
"RTN","PRPFBAL",12,0)
 W ?18,"* * * ACCOUNT TYPE IS ",@PFHI,TYPE,@PFLO," * * *",!,"WARD: ",@PFHI,DFN(.1),@PFLO
"RTN","PRPFBAL",13,0)
 W:$D(^PRPF(470,DFN,12)) !,"STATION NAME: ",@PFHI,$$GET1^DIQ(4,(^PRPF(470,DFN,12)),.01),@PFLO
"RTN","PRPFBAL",14,0)
 W:'$D(^PRPF(470,DFN,12)) !,"STATION NAME:"
"RTN","PRPFBAL",15,0)
 I "UX"[RES G B
"RTN","PRPFBAL",16,0)
 W !,"AUTH WD/MONTH: ",@PFHI S X=$P(DFN(1),U,7) D C W X,@PFLO,?39,"AUTH WD/WEEK: ",@PFHI S X=$P(DFN(1),U,8) D C W X,@PFLO,!,?7,"ACTUAL: ",@PFHI S X=$P(DFN(1),"^",11) D C W X,@PFLO,?45,"ACTUAL: ",@PFHI S X=$P(DFN(1),"^",12) D C W X
"RTN","PRPFBAL",17,0)
B W @PFLO S XI="",$P(XI,"*",80)="" W !,XI
"RTN","PRPFBAL",18,0)
 W !,?10," TOTAL BALANCE:  ",@PFHI S X=PRBAL("SB") D C W X,@PFLO,?45,"PRIVATE SOURCE: ",@PFHI S X=PRBAL("PB") D C W X,@PFLO,!,?16,"DEFERRED:  ",@PFHI S X=PRBAL("DEF") D C W X,@PFLO,?49
"RTN","PRPFBAL",19,0)
 W "GRATUITOUS: ",@PFHI S X=PRBAL("GB") D C W X,@PFLO,!!,"AVAILABLE FOR WITHDRAWAL:  " S (PRBAL("PB"),X)=PRBAL("SB")-PRBAL("DEF") W @PFHI D C W X,@PFLO,!
"RTN","PRPFBAL",20,0)
 W XI K XI
"RTN","PRPFBAL",21,0)
 I +PRBAL("DEF")>0 W !,"DEFERRAL INFORMATION:",?30,"TRANSACTION",?50,"DEF DATE",?69,"AMOUNT" D DEF
"RTN","PRPFBAL",22,0)
GI ;PRINT GENERAL INFORMATION REMARKS
"RTN","PRPFBAL",23,0)
T2 W !,"GENERAL REMARKS/INFORMATION:"
"RTN","PRPFBAL",24,0)
 K ^UTILITY($J,"W") ; <<<  Added by REW in patch 8 since Eng. doesn't kill -- see NOIS CLE-1097-42161
"RTN","PRPFBAL",25,0)
 W @PFHI S N=0,DIWF="W",DIWL=5,DIWR=IOM-10 F I=1:1 S N=$O(^PRPF(470,DFN,7,N)) Q:N=""  S X=^(N,0) D ^DIWP
"RTN","PRPFBAL",26,0)
 D ^DIWW K DIWF,DIWL,DIWR,X
"RTN","PRPFBAL",27,0)
 W @PFNORM
"RTN","PRPFBAL",28,0)
T3 G:'$D(^XUSEC("PRPF CLERK",DUZ)) OUT W !,"SPECIAL REMARKS:"
"RTN","PRPFBAL",29,0)
 W @PFHI S N=0,DIWF="W",DIWL=5,DIWR=IOM-10 F I=1:1 S N=$O(^PRPF(470,DFN,8,N)) Q:N=""  S X=^(N,0) D ^DIWP
"RTN","PRPFBAL",30,0)
 D ^DIWW
"RTN","PRPFBAL",31,0)
 W !,"The information contained in this report is protected by the Privacy Act of 1974"
"RTN","PRPFBAL",32,0)
 K DIWF,DIWL,DIWR,X W @PFNORM G OUT
"RTN","PRPFBAL",33,0)
DEF ;WRITES DEFERRAL INFORMATION
"RTN","PRPFBAL",34,0)
 F I=0:0 S I=$O(^PRPF(470,DFN,4,I)) Q:I'=+I  I $D(^(I,0)) S PRPF(1)=^PRPF(470,DFN,4,I,0) W !,?35,@PFHI,$P(PRPF(1),"^"),?49 S Y=$P(PRPF(1),"^",2) X ^DD("DD") W Y,?64 S X=$P(PRPF(1),"^",3) D C W X,@PFLO
"RTN","PRPFBAL",35,0)
 K PRPF(1) Q
"RTN","PRPFBAL",36,0)
HILO S IOP=0 D ^%ZIS S (PFHI,PFLO,PFNORM)="*0" I ^%ZOSF("OS")'["M/11" Q
"RTN","PRPFBAL",37,0)
 ;HI/LO INTENSITY DISABLED FOR DSM DUE TO INAPPROPRIATE HANDLING OF COLUMN POSITIONING
"RTN","PRPFBAL",38,0)
 S:$D(^%ZIS(2,IOST(0),7)) TMP=^(7),PFHI=$P(TMP,"^",1),PFLO=$P(TMP,"^",2),PFNORM=$P(TMP,"^",3) I PFHI=""!(PFLO="")!(PFNORM="") S (PFLO,PFHI,PFNORM)="*0"
"RTN","PRPFBAL",39,0)
 Q
"RTN","PRPFBAL",40,0)
 ;
"RTN","PRPFBAL",41,0)
C S X2="2$"
"RTN","PRPFBAL",42,0)
 S %D=X<0 S:%D X=-X S %=$S($D(X2):+X2,1:2),X=$J(X,1,%),%=$L(X)-3-$E(23456789,%)
"RTN","PRPFBAL",43,0)
 F %=%:-3 Q:$E(X,%)=""  S X=$E(X,1,%)_","_$E(X,%+1,99)
"RTN","PRPFBAL",44,0)
 S:$D(X2) X=$E("$",X2["$")_X S X=$J($E("(",%D)_X_$E(" )",%D+1),12) K %,%D Q
"RTN","PRPFMIN")
0^4^B8933422
"RTN","PRPFMIN",1,0)
PRPFMIN ;ALTOONA/CTB-CREATE MIN/MAS SEARCH LISTS ;4/15/02
"RTN","PRPFMIN",2,0)
V ;;3.0;PATIENT FUNDS;**6,8,13**;JUNE 1, 1989
"RTN","PRPFMIN",3,0)
 D SELRNG^PRPFQ
"RTN","PRPFMIN",4,0)
 I PRPFRNG="" D OUT QUIT
"RTN","PRPFMIN",5,0)
 I PRPFRNG="@" S PRPFRNG2=""
"RTN","PRPFMIN",6,0)
 E  S PRPFRNG2=PRPFRNG
"RTN","PRPFMIN",7,0)
 S ZTSAVE("PRPFRNG")=PRPFRNG,ZTSAVE("PRPFRNG2")=PRPFRNG2
"RTN","PRPFMIN",8,0)
 S ZTRTN="DQ^PRPFMIN",ZTDESC=$P($T(DQ),";",3) D ^PRPFQ
"RTN","PRPFMIN",9,0)
 K %X,DFN,DG1,DGT,DGX Q
"RTN","PRPFMIN",10,0)
DQ ;MIN/MAX PATIENT FUNDS REPORT
"RTN","PRPFMIN",11,0)
 S PRIOP=ION
"RTN","PRPFMIN",12,0)
 K ^TMP("PRPFAF",$J)
"RTN","PRPFMIN",13,0)
 K ^TMP("PRPFAG",$J)
"RTN","PRPFMIN",14,0)
 S DA=0 S X="I'm now beginning to search the file." D MSG^PRPFQ
"RTN","PRPFMIN",15,0)
 F I=1:1 S DA=$O(^PRPF(470,DA)) Q:'DA  D CK I I#25=0,'$D(ZTQUEUED) W "."
"RTN","PRPFMIN",16,0)
 I '$D(^TMP("PRPFAF",$J)),'$D(^TMP("PRPFAG",$J)) D NONE QUIT
"RTN","PRPFMIN",17,0)
 S IOP=PRIOP,DIC="^PRPF(470,",L=0,L(0)=1,BY="@73:99;S1,.01",BY(0)="^TMP(""PRPFAF"",$J,",FLDS="[PRPF MIN/MAX1]",FR=""_PRPFRNG_"",TO=""_PRPFRNG2_""
"RTN","PRPFMIN",18,0)
 S DIOEND="K ^TMP(""PRPFAF"") W !,""The information contained in this report is protected by the Privacy Act of 1974""" D:'$D(ZTQUEUED) WAIT^PRPFYN
"RTN","PRPFMIN",19,0)
 S:PRPFRNG="@" BY="@73,@73:99;S1,.01",FR="@,@",TO=","
"RTN","PRPFMIN",20,0)
 W !,"" D EN1^DIP I '$D(ZTQUEUED) D ENCON^PRPFQ
"RTN","PRPFMIN",21,0)
 S IOP=PRIOP,DIC="^PRPF(470,",L=0,L(0)=1,BY="@73:99;S1,.01",BY(0)="^TMP(""PRPFAG"",$J,",FLDS="[PRPF MIN/MAX2]",FR=""_PRPFRNG_"",TO=""_PRPFRNG2_""
"RTN","PRPFMIN",22,0)
 S DIOEND="K ^TMP(""PRPFAG"") W !,""The information contained in this report is protected by the Privacy Act of 1974""" D:'$D(ZTQUEUED) WAIT^PRPFYN
"RTN","PRPFMIN",23,0)
 S:PRPFRNG="@" BY="@73,@73:99;S1,.01",FR="@,@",TO=","
"RTN","PRPFMIN",24,0)
 W !,"" D EN1^DIP I '$D(ZTQUEUED) D ENCON^PRPFQ
"RTN","PRPFMIN",25,0)
OUT K DIJ,DP,DQTIME,IOX,IOY,MAX1,MAX2,MIN1,MIN2,PRPFQ,PRPFRNG,PRPFRNG2,PRIOP,SBAL,PRIOP,DIOEND
"RTN","PRPFMIN",26,0)
 S ZTREQ="@"
"RTN","PRPFMIN",27,0)
 QUIT
"RTN","PRPFMIN",28,0)
NONE S IOP=ION W @IOF D NOW^PRPFQ W "PATIENT FUNDS MIN/MAX REPORT",?50,%X,!!,"No matches were found while running this report." W:$E($G(IOST))="P" @IOF
"RTN","PRPFMIN",29,0)
 Q
"RTN","PRPFMIN",30,0)
CK ;CHECKS BALANCES
"RTN","PRPFMIN",31,0)
 Q:'+$D(^PRPF(470,DA,2))  S A=^(2),MIN1=+$P(A,U),MAX1=+$P(A,U,2),MIN2=+$P(A,U,3),MAX2=+$P(A,U,4),SBAL=$S($D(^(1)):$P(^(1),U,4),1:0)
"RTN","PRPFMIN",32,0)
 Q:$P(^PRPF(470,DA,0),U,2)="I"  ; <<<< by REW in patch 8 to suppress inactives
"RTN","PRPFMIN",33,0)
 I MIN1=0!(MAX1=0) G CK1
"RTN","PRPFMIN",34,0)
 I MIN1<MAX1 I SBAL>MAX1!(SBAL<MIN1) S ^TMP("PRPFAF",$J,DA)=""
"RTN","PRPFMIN",35,0)
CK1 I MIN2=0!(MAX2=0) Q
"RTN","PRPFMIN",36,0)
 I MIN2<MAX2,SBAL>MAX2!(SBAL<MIN2) S ^TMP("PRPFAG",$J,DA)=""
"RTN","PRPFMIN",37,0)
 Q
"RTN","PRPFNQ")
0^5^B23697855
"RTN","PRPFNQ",1,0)
PRPFNQ ;ALTOONA/CTB-PATIENT FUNDS MULTIPLE CARD DRIVER ;15 APR 02
"RTN","PRPFNQ",2,0)
V ;;3.0;PATIENT FUNDS;**3,5,6,7,13**;JUNE 1, 1989
"RTN","PRPFNQ",3,0)
 N BDATE W *7,!,"REMEMBER, this option requires a printer with a line length of at least",!,"132 characters and a page length of at least 62 lines.",!
"RTN","PRPFNQ",4,0)
 W !!,"Enter the names(s) of cards required, one at a time.  "
"RTN","PRPFNQ",5,0)
 S LIST=1
"RTN","PRPFNQ",6,0)
 S DIC("A")="Select PATIENT NAME: "
"RTN","PRPFNQ",7,0)
A S DIC=470,DIC(0)="AEQM" D ^DIC K DIC("A") I +Y>0  D ADD S DIC("A")="Select Next PATIENT NAME: " G A
"RTN","PRPFNQ",8,0)
 K DIC
"RTN","PRPFNQ",9,0)
 I $D(LIST)'=11 W !,*7,"No cards selected, Option is Terminated! " R X:3 K IOP D OUT Q
"RTN","PRPFNQ",10,0)
 D DATE IF $D(DTOUT)!($D(DUOUT))!($D(DIROUT)) K BDATE,DTOUT,DUOUT,DIROUT D OUT Q
"RTN","PRPFNQ",11,0)
 S ZTDESC="PRINT SELECTED PATIENT FUND CARDS",ZTSAVE("DIC")="^PRPF(470," S:$D(BDATE) ZTSAVE("BDATE*")="",ZTRTN="DQ^PRPFNQ",ZTSAVE("LIST*")="" D ^PRPFQ
"RTN","PRPFNQ",12,0)
 K LIST,%Y,Y
"RTN","PRPFNQ",13,0)
 QUIT
"RTN","PRPFNQ",14,0)
ADD NEW X
"RTN","PRPFNQ",15,0)
 I $L($G(LIST(LIST))_+Y)>240 S LIST=LIST+1
"RTN","PRPFNQ",16,0)
 S LIST(LIST)=$G(LIST(LIST))_+Y_"^"
"RTN","PRPFNQ",17,0)
 QUIT
"RTN","PRPFNQ",18,0)
DQ K ^TMP("PRPFAD",$J)
"RTN","PRPFNQ",19,0)
 F I=1:1:LIST F J=1:1 S N=$P(LIST(I),"^",J) Q:'N  S ^TMP("PRPFAD",$J,N)=""
"RTN","PRPFNQ",20,0)
 S DIC="^PRPF(470,"
"RTN","PRPFNQ",21,0)
 S IOP=PRIOP
"RTN","PRPFNQ",22,0)
 S BY=".01",(FR,TO)="",BY(0)="^TMP(""PRPFAD"",$J,",FLDS="[PRPF CARD]",L=0,L(0)=1,DIOEND="K ^TMP(""PRPFAD"",$J)"
"RTN","PRPFNQ",23,0)
 D EN1^DIP D OUT
"RTN","PRPFNQ",24,0)
 Q
"RTN","PRPFNQ",25,0)
DATE ;IF PARTIAL LIST IS REQUESTED, ASK EARLIEST DATE  ELSE S DATE=01/01/1900
"RTN","PRPFNQ",26,0)
 S DIR(0)="SA^A:ALL;P:PARTIAL",DIR("A")="Partial List or All Tranactions: ",DIR("B")="ALL"
"RTN","PRPFNQ",27,0)
 S DIR("?")="You may enter (A)LL or (P)ARTIAL",DIR("?",1)="Selecting PARTIAL will allow you to print only those transactions",DIR("?",2)="starting with the date you select."
"RTN","PRPFNQ",28,0)
 D ^DIR K DIR IF $D(DTOUT)!($D(DUOUT))!($D(DIROUT)) Q
"RTN","PRPFNQ",29,0)
 S BDATE=2000101,X=BDATE D CNVD^PRPFQ S BDATE1=X I Y="A" QUIT
"RTN","PRPFNQ",30,0)
 S DIR(0)="DOA^:DT:EX",DIR("A")="Select Earliest Date to Print on Cards: ",DIR("?")="^D HELP^PRPFNQ" D ^DIR K DIR
"RTN","PRPFNQ",31,0)
 IF $D(DTOUT)!($D(DUOUT))!($D(DIROUT)) Q
"RTN","PRPFNQ",32,0)
 IF Y>0 S BDATE=+Y-1,X=+Y D CNVD^PRPFQ S BDATE1=X
"RTN","PRPFNQ",33,0)
 QUIT
"RTN","PRPFNQ",34,0)
DOIT S DIC="^PRPF(470,",L=0,(FLDS,BY)="[PRPF RANGE OF CARDS]" D EN1^DIP
"RTN","PRPFNQ",35,0)
 Q
"RTN","PRPFNQ",36,0)
ALL ;PRINT ALL CARDS
"RTN","PRPFNQ",37,0)
 S %A="This option will print a card for each ACTIVE patient, or for ALL patients,",%A(1)="   regardless of status, within the range selected."
"RTN","PRPFNQ",38,0)
 S %A(2)="Are you sure that you want to run this option now"
"RTN","PRPFNQ",39,0)
 S %B="A 'Yes' will begin the job, after you select a device.  Remember,"
"RTN","PRPFNQ",40,0)
 S %B(1)="this job will take a while to run.  Enter an '^' to terminate the option." D ^PRPFYN Q:%'=1
"RTN","PRPFNQ",41,0)
 D DATE IF $D(DTOUT)!($D(DUOUT))!($D(DIROUT)) K BDATE,BDATE1,DTOUT,DUOUT,DIROUT D OUT Q
"RTN","PRPFNQ",42,0)
 S %A="Do you wish to print only the ACTIVE cards",%B="",%=1 D ^PRPFYN Q:%<0  W !!,"I will now print a card for ",$S(%=1:"ALL ACTIVE ",1:"ALL")," cards."
"RTN","PRPFNQ",43,0)
 K DIS(0) I %=1 S DIS(0)="I $P(^PRPF(470,D0,0),U,2)=""A"""
"RTN","PRPFNQ",44,0)
 S M="PATIENT" D RNG^PRPFQ I '$D(FR)!('$D(TO)) D OUT Q
"RTN","PRPFNQ",45,0)
 S BY="[PRPF RANGE OF CARDS]",%=1,%A="OK TO CONTINUE",%B="" D ^PRPFYN Q:%'=1
"RTN","PRPFNQ",46,0)
 S DIC="^PRPF(470,",L=0,FLDS="[PRPF CARD]" D EN1^DIP
"RTN","PRPFNQ",47,0)
OUT K %,%DT,%H,%I,%W,%X,BDATE,BDATE1,DCC,DFN,DGA1,DG1,DGT,DGX,DIJ,DIOEND,DIOP,DIPT,DIR,DISH,DIYS,DP,F,FLDS,IOX,IOY,L,O,POP,MTR,PAGE,PRPFKEY,PRPFRNG,PRPFRNG2,PTR,W,X,ZTSK
"RTN","PRPFNQ",48,0)
 QUIT
"RTN","PRPFNQ",49,0)
RESEARCH ;;SEARCH OF PATIENT FUNDS FOR DATES OF RESTRICTION OVER 6 MONTHS OLD
"RTN","PRPFNQ",50,0)
 ;HITS ARE STORED IN THE AK CROSSREFERENCE
"RTN","PRPFNQ",51,0)
 D SELRNG^PRPFQ
"RTN","PRPFNQ",52,0)
 I PRPFRNG="" D OUT QUIT
"RTN","PRPFNQ",53,0)
 I PRPFRNG="@" S PRPFRNG2=""
"RTN","PRPFNQ",54,0)
 E  S PRPFRNG2=PRPFRNG
"RTN","PRPFNQ",55,0)
 S ZTSAVE("PRPFRNG")=PRPFRNG,ZTSAVE("PRPFRNG2")=PRPFRNG2
"RTN","PRPFNQ",56,0)
 S ZTRTN="DQRES^PRPFNQ",ZTDESC=$P($T(RESEARCH),";",3) D ^PRPFQ,OUT Q
"RTN","PRPFNQ",57,0)
DQRES ;DQ POINT FOR RESTRICTION SEARCH
"RTN","PRPFNQ",58,0)
 I $D(ZTQUEUED) S IOP=PRIOP,ZTREQ="@"
"RTN","PRPFNQ",59,0)
 K ^TMP("PRPFAK",$J)
"RTN","PRPFNQ",60,0)
 S X="T-181",%DT="" D ^%DT
"RTN","PRPFNQ",61,0)
 S X="Please hold on, I'm searching the file now.*" D MSG^PRPFQ
"RTN","PRPFNQ",62,0)
 S DA=0 F  S DA=$O(^PRPF(470,DA)) Q:'DA  S X=$P($G(^PRPF(470,DA,0)),"^",12) I X]"",X<Y S ^TMP("PRPFAK",$J,DA)=""
"RTN","PRPFNQ",63,0)
 I $D(^TMP("PRPFAK",$J))<9 S X="No matches found today.*" D MSG^PRPFQ G OUTR
"RTN","PRPFNQ",64,0)
 S:$D(PRIOP) IOP=PRIOP S DIC="^PRPF(470,",L=0,L(0)=1,BY="@73:99;S,.01",BY(0)="^TMP(""PRPFAK"",$J,",FLDS="[PRPF OVERDUE PRINT",FR=""_PRPFRNG_"",TO=""_PRPFRNG2_""
"RTN","PRPFNQ",65,0)
 S DIOEND="K ^TMP(""PRPFAK"") W !,""The information contained in this report is protected by the Privacy Act of 1974"""
"RTN","PRPFNQ",66,0)
 S:PRPFRNG="@" BY="@73,@73:99,.01",FR="@,@",TO=","
"RTN","PRPFNQ",67,0)
 D EN1^DIP
"RTN","PRPFNQ",68,0)
OUTR ;
"RTN","PRPFNQ",69,0)
 K IOP,PRIOP,PFM,T5,^TMP("PRPFAK",$J) D DIKILL^PRPFQ G ZTKILL^PRPFQ
"RTN","PRPFNQ",70,0)
 Q
"RTN","PRPFNQ",71,0)
HELP W !,"If you enter a date, ALL entries on the card, before that date",!,"  will be consolidated.",! D HELP^%DTC Q
"RTN","PRPFOBR")
0^7^B16308608
"RTN","PRPFOBR",1,0)
PRPFOBR ;ALTOONA/CTB-OPTION TO RECALCULATE PATIENT BALANCES ;04/15/02
"RTN","PRPFOBR",2,0)
V ;;3.0;PATIENT FUNDS;**6,13**;JUNE 1, 1989
"RTN","PRPFOBR",3,0)
SE S %A="This option will recalculate the balances of a patient account",%A(1)="It should only be used after the account has be audited and it",%A(2)="has been determined that all transactions are valid."
"RTN","PRPFOBR",4,0)
 S %=2,U="^" W !,*7 S %A(3)="Do you really want to run this option",%B="" D ^PRPFYN G:%'=1 NA
"RTN","PRPFOBR",5,0)
SE1 W !! S DIC="^PRPF(470,",DIC(0)="AEQMNZ" D ^DIC G:Y<0 OUT S (PF("PBAL"),PF("GBAL"),PF("BAL"))=0,DFN=+Y D CALC
"RTN","PRPFOBR",6,0)
 W !,?10,"BALANCE IN ACCOUNT",?50,"CORRECTED BALANCE" S X=$S($D(^PRPF(470,DFN,1)):^(1),1:"")
"RTN","PRPFOBR",7,0)
 W !,"TOTAL",?15,$J($P(X,U,4),8,2),?55,$J(PF("BAL"),8,2),!,"P/S",?15,$J($P(X,U,5),8,2),?55,$J(PF("PBAL"),8,2),!,"GRAT",?15,$J($P(X,U,6),8,2),?55,$J(PF("GBAL"),8,2)
"RTN","PRPFOBR",8,0)
 S %=2 W ! S %A="Are you ready to Post the corrected balances to the account",%B="" D ^PRPFYN G:%<0 NA I %'=1 D NA S DIC("A")="Select Next Patient: " G SE1
"RTN","PRPFOBR",9,0)
 S %A="ARE YOU SURE",%B="",%=2 D ^PRPFYN G:%<0 NA I %'=1 D NA S DIC("A")="Select Next Patient: " G SE1
"RTN","PRPFOBR",10,0)
 S $P(^PRPF(470,DFN,1),U,4,6)=PF("BAL")_U_PF("PBAL")_U_PF("GBAL") W "  ---Done---" R X:2 D OUT
"RTN","PRPFOBR",11,0)
 W !! S DIC("A")="Select Next Patient: " G SE1
"RTN","PRPFOBR",12,0)
CALC S (DA,PF("BAL"),PF("PBAL"),PF("GBAL"))=0 F N=0:0 S DA=$O(^PRPF(470,DFN,3,DA)) Q:'DA  D CALC1
"RTN","PRPFOBR",13,0)
 Q
"RTN","PRPFOBR",14,0)
CALC1 S X=^PRPF(470,DFN,3,DA,0) S PF("PBAL")=PF("PBAL")+$P(X,U,4),PF("GBAL")=PF("GBAL")+$P(X,U,5),PF("BAL")=PF("BAL")+$P(X,U,3),$P(^(0),U,6)=PF("BAL") Q
"RTN","PRPFOBR",15,0)
TM S PRPFRNG="@",PRPFRNG2=""
"RTN","PRPFOBR",16,0)
ALL ;;SCREEN ALL PATIENT FUND ACCOUNTS AND PRINT LIST OF OUT OF BALANCES
"RTN","PRPFOBR",17,0)
 K ^TMP("PRPFAH",$J)
"RTN","PRPFOBR",18,0)
 S X="  Hold on while I search the file . . .*" D MSG^PRPFQ
"RTN","PRPFOBR",19,0)
 S DFN=0,U="^" F I=1:1 S DFN=$O(^PRPF(470,DFN)) Q:DFN'=+DFN  D CHECK
"RTN","PRPFOBR",20,0)
 I '$D(^TMP("PRPFAH",$J)) D NONE G OUT
"RTN","PRPFOBR",21,0)
 S DIC="^PRPF(470,",L=0,L(0)=1,BY="@73:99;S1,.01",BY(0)="^TMP(""PRPFAH"",$J,",FLDS="[PRPF OUT OF BALANCE]",FR=""_PRPFRNG_"",TO=""_PRPFRNG2_"" S IOP=$S($D(PRIOP):PRIOP,1:ION)
"RTN","PRPFOBR",22,0)
 S DIOEND="K ^TMP(""PRPFAH"") W !,""The information contained in this report is protected by the Privacy Act of 1974"""
"RTN","PRPFOBR",23,0)
 S:PRPFRNG="@" BY="@73,@73:99;S1,.01",FR="@,@",TO=","
"RTN","PRPFOBR",24,0)
 D EN1^DIP
"RTN","PRPFOBR",25,0)
 S ZTREQ="@"
"RTN","PRPFOBR",26,0)
OUT K %,%W,C,DA,DFN,DIC,DIYS,K,N,PF,POP,PRPFRNG,PRPFRNG2,S,X,XBAL,XPBAL,XGBAL,X1,Y D DIKILL^PRPFQ,ZTKILL^PRPFQ
"RTN","PRPFOBR",27,0)
 Q
"RTN","PRPFOBR",28,0)
NONE S IOP=ION W @IOF D NOW^PRPFQ W "PATIENT FUNDS OUT OF BALANCE REPORT",?50,%X,!!,"No Out of Balance Accounts Were Found While Running This Report" W:$E($G(IOST))="P" @IOF
"RTN","PRPFOBR",29,0)
 Q
"RTN","PRPFOBR",30,0)
CHECK D CALC S X=PF("BAL")+PF("PBAL")+PF("GBAL"),X2=$S($D(^PRPF(470,DFN,1)):^(1),1:""),XBAL=$P(X2,U,4),XPBAL=$P(X2,U,5),XGBAL=$P(X2,U,6)
"RTN","PRPFOBR",31,0)
 S X1=XBAL+XPBAL+XGBAL
"RTN","PRPFOBR",32,0)
 I +X'=+X1 G SET
"RTN","PRPFOBR",33,0)
 I +PF("BAL")'=+XBAL G SET
"RTN","PRPFOBR",34,0)
 I +PF("PBAL")'=+XPBAL G SET
"RTN","PRPFOBR",35,0)
 I +PF("GBAL")'=+XGBAL G SET
"RTN","PRPFOBR",36,0)
 Q
"RTN","PRPFOBR",37,0)
SET S ^TMP("PRPFAH",$J,DFN)=""
"RTN","PRPFOBR",38,0)
 Q
"RTN","PRPFOBR",39,0)
NA W:(IOM-$X)<25 ! W "  <No action taken>",*7 R X:3 W !! G OUT
"RTN","PRPFOBR",40,0)
QUE ;QUEUE ALL^PRPFOBR TO RUN AS TASKMAN JOB
"RTN","PRPFOBR",41,0)
 W !,"This program will review all Patient Funds Accounts and print a",!,"report of all accounts which are out of balance in any way. ",!!
"RTN","PRPFOBR",42,0)
 W "Due to the length of time that this report may take, it is suggested that it,",!," be queued.",!!
"RTN","PRPFOBR",43,0)
 D SELRNG^PRPFQ
"RTN","PRPFOBR",44,0)
 I PRPFRNG="" D OUT QUIT
"RTN","PRPFOBR",45,0)
 I PRPFRNG="@" S PRPFRNG2=""
"RTN","PRPFOBR",46,0)
 E  S PRPFRNG2=PRPFRNG
"RTN","PRPFOBR",47,0)
 S ZTSAVE("PRPFRNG")=PRPFRNG,ZTSAVE("PRPFRNG2")=PRPFRNG2
"RTN","PRPFOBR",48,0)
 S ZTRTN="ALL^PRPFOBR",ZTDESC=$P($T(ALL),";",3) D ^PRPFQ G OUT
"RTN","PRPFPNT")
0^1^B14890211
"RTN","PRPFPNT",1,0)
PRPFPNT ;ALTOONA/CTB-OUTPUT DRIVER FOR "PRPF" (PATIENT FUNDS) ;20 APR 02
"RTN","PRPFPNT",2,0)
V ;;3.0;PATIENT FUNDS;**6,7,13**;JUNE 1, 1989
"RTN","PRPFPNT",3,0)
CLERK ;CLERK STATISTICS
"RTN","PRPFPNT",4,0)
 D DRNG^PRPFQ G:'% OUT D WAIT^PRPFYN S PRPFFR=FR,PRPFTO=TO,DIC="^PRPF(470.1,",L=0,BY="+PATIENT FUNDS CLERK,'DATE TRANSACTION ENTERED",FR=","_FR,TO=","_TO,FLDS="!REFERENCE,",DHD="[PRPF CLERK STAT HDR]"
"RTN","PRPFPNT",5,0)
DIP S L=0,DIOEND="W !,""The information contained in this report is protected by the Privacy Act of 1974""" D WAIT^PRPFYN,EN1^DIP D:'$D(XQY) ENCON^PRPFQ
"RTN","PRPFPNT",6,0)
OUT K %H,%I,DATE,DG1,DGA1,DGT,DGX,DINS,DFN,DIYS,DTOUT,DIOEND,DIOP,DNP,M,PRPFD,PRPFFR,PRPFTO,Q3,X,Y D DIKILL^PRPFQ G ZTKILL^PRPFQ QUIT
"RTN","PRPFPNT",7,0)
FISTRANS ;FISCAL TRANSACTION SUMMARY
"RTN","PRPFPNT",8,0)
 D SEL Q:PRPFRNG=""
"RTN","PRPFPNT",9,0)
 W ! D DRNG^PRPFQ G:'% OUT
"RTN","PRPFPNT",10,0)
 S DIC="^PRPF(470.1,",BY="@1:73:99,]+4;S",FLDS="[PRPF FISCAL TRANS SUMMARY]",FR=""_PRPFRNG_","_FR_"",TO=""_PRPFRNG2_","_TO_""
"RTN","PRPFPNT",11,0)
 S:PRPFRNG="@" BY="@1:73,@1:73:99;S1,]+4;S",FR="@,"_FR,TO=","_TO
"RTN","PRPFPNT",12,0)
 G DIP
"RTN","PRPFPNT",13,0)
FISACTIV ;FISCAL ACTIVITY REPORT
"RTN","PRPFPNT",14,0)
 D SEL Q:PRPFRNG=""
"RTN","PRPFPNT",15,0)
 W ! D DRNG^PRPFQ G:'% OUT
"RTN","PRPFPNT",16,0)
 S DIC="^PRPF(470.1,",BY="@1:73:99,]+4;S2,+7;S,+10;S,@6",FLDS="[PRPF FISCAL ACTIVITY REPORT]",FR=""_PRPFRNG_","_FR_"",TO=""_PRPFRNG2_","_TO_""
"RTN","PRPFPNT",17,0)
 S:PRPFRNG="@" BY="@1:73,@1:73:99;S1,]+4;S2,+7;S,+10;S,@6",FR="@,"_FR,TO=","_TO
"RTN","PRPFPNT",18,0)
 G DIP
"RTN","PRPFPNT",19,0)
AUDIT ;DAILY ACTIVITY (AUDIT) LISTING
"RTN","PRPFPNT",20,0)
 D SEL Q:PRPFRNG=""
"RTN","PRPFPNT",21,0)
 W ! D DRNG^PRPFQ G:'% OUT
"RTN","PRPFPNT",22,0)
 S DIC="^PRPF(470.1,",BY="@1:73:99,+5,+7,+8,+10,@6",FLDS="[PRPF DAILY ACTIVITY]",FR=""_PRPFRNG_","_FR_"",TO=""_PRPFRNG2_","_TO_""
"RTN","PRPFPNT",23,0)
 S:PRPFRNG="@" BY="@1:73,@1:73:99;S1,+5,+7,+8,+10,@6",FR="@,"_FR_",,,,",TO=","_TO_",,,,"
"RTN","PRPFPNT",24,0)
 G DIP
"RTN","PRPFPNT",25,0)
TRANS ;LISTING OF TRANSACTIONS
"RTN","PRPFPNT",26,0)
 D SEL Q:PRPFRNG=""
"RTN","PRPFPNT",27,0)
 W ! D DRNG^PRPFQ G:'% OUT
"RTN","PRPFPNT",28,0)
 S DIC="^PRPF(470.1,",BY="@1:73:99;S1,5",FLDS="[PRPF DAILY TRANSACTION SUMMARY]",FR=""_PRPFRNG_","_FR_"",TO=""_PRPFRNG2_","_TO_""
"RTN","PRPFPNT",29,0)
 S:PRPFRNG="@" BY="@1:73,@1:73:99;S1,5",FR="@,"_FR,TO=","_TO
"RTN","PRPFPNT",30,0)
 G DIP
"RTN","PRPFPNT",31,0)
INACTIVE ;INACTIVE ACCOUNT LIST
"RTN","PRPFPNT",32,0)
 S DIC="^PRPF(470,",(BY,FLDS)="[PRPF INACTIVE ACCOUNTS]" G DIP
"RTN","PRPFPNT",33,0)
INDIGENT ;INDIGENT PATIENT LIST
"RTN","PRPFPNT",34,0)
 D SEL Q:PRPFRNG=""
"RTN","PRPFPNT",35,0)
 S DIC="^PRPF(470,",BY="@+73:99;S1,]4,@1,.01",FLDS="[PRPF INDIGENT LIST]",FR=""_PRPFRNG_""_",YES",TO=""_PRPFRNG2_""_",YES"
"RTN","PRPFPNT",36,0)
 S:PRPFRNG="@" BY="@+73,@73:99;S1,]4,@1,.01",FR="@,@,YES",TO=",,YES"
"RTN","PRPFPNT",37,0)
 G DIP
"RTN","PRPFPNT",38,0)
BALANCE ;BALANCE IN ALL ACCOUNTS
"RTN","PRPFPNT",39,0)
 D SEL Q:PRPFRNG=""
"RTN","PRPFPNT",40,0)
 S DIC="^PRPF(470,",FLDS="[PRPF BALANCE IN ACCOUNTS]",FR=PRPFRNG,TO=PRPFRNG2
"RTN","PRPFPNT",41,0)
 S:PRPFRNG'="@" BY="+73:99;"_"""STATION NAME: "_$G(Y(0,0))_"    STATION NUMBER: "_""""_";C1"
"RTN","PRPFPNT",42,0)
 S:PRPFRNG="@" BY="73;C1;S1,+73:99;""STATION NUMBER: "";C1",FR="@,@",TO=","
"RTN","PRPFPNT",43,0)
 G DIP
"RTN","PRPFPNT",44,0)
PATLIST ;PATIENT LIST
"RTN","PRPFPNT",45,0)
 D SEL Q:PRPFRNG=""
"RTN","PRPFPNT",46,0)
 S DIC="^PRPF(470,",BY="@+73:99;S1,].01",FLDS="[PRPF PATIENT LIST]",FR=""_PRPFRNG_"",TO=""_PRPFRNG2_""
"RTN","PRPFPNT",47,0)
 S:PRPFRNG="@" BY="@+73,@73:99;S1,].01",FR="@,@",TO=","
"RTN","PRPFPNT",48,0)
 G DIP
"RTN","PRPFPNT",49,0)
SUMMARY ;;PATIENT SUMMARY REPORT
"RTN","PRPFPNT",50,0)
 D SEL Q:PRPFRNG=""
"RTN","PRPFPNT",51,0)
 S DIC="^PRPF(470,",BY="@+73:99;S1,@1,.01",FLDS="[PRPF PATIENT SUMMARY]",FR=""_PRPFRNG_",A"_"",TO=""_PRPFRNG2_",A"_""
"RTN","PRPFPNT",52,0)
 S:PRPFRNG="@" BY="@+73,@73:99;S1,@1,.01",FR="@,@,A,",TO=",,A,"
"RTN","PRPFPNT",53,0)
 G DIP
"RTN","PRPFPNT",54,0)
SEL D SELRNG^PRPFQ
"RTN","PRPFPNT",55,0)
 I PRPFRNG="" D OUT QUIT
"RTN","PRPFPNT",56,0)
 I PRPFRNG="@" S PRPFRNG2=""
"RTN","PRPFPNT",57,0)
 E  S PRPFRNG2=PRPFRNG
"RTN","PRPFPNT",58,0)
 Q
"RTN","PRPFPNT",59,0)
UNSTA ;;UNNASIGNED STATION NAME LIST
"RTN","PRPFPNT",60,0)
 S DIC="^PRPF(470,",BY="1;S,@73,.01",FLDS="[PRPF UNASSIGNED STATION LIST]",FR="A,@",TO="A,@"
"RTN","PRPFPNT",61,0)
 S DIR(0)="Y",DIR("A")="Would you like to include INACTIVE patients in this report",DIR("B")="NO"
"RTN","PRPFPNT",62,0)
 W !,"" D ^DIR K DIR S:Y FR=",@",TO=",@"
"RTN","PRPFPNT",63,0)
 I $D(DTOUT)!($D(DUOUT))!($D(DIROUT)) K X,Y Q
"RTN","PRPFPNT",64,0)
 G DIP
"RTN","PRPFQ")
0^6^B18960252
"RTN","PRPFQ",1,0)
PRPFQ ;ALTOONA/CTB-RSD/ID TKW/BOISE QUE PRINTOUTS ;5/10/02
"RTN","PRPFQ",2,0)
V ;;3.0;PATIENT FUNDS;**6,10,13**;JUNE 1, 1989
"RTN","PRPFQ",3,0)
 ;INPUT REQUIRED STANDARD ZT VARIABLES
"RTN","PRPFQ",4,0)
 ;IF PRPFQ("FORCEQ") IS DEFINED ROUTINE WILL FORCE %ZTLOAD TO BE INVOKED
"RTN","PRPFQ",5,0)
 S XION=ION K IOP,ZTSK W:$D(PRPFQ("FORCEQ")) !,"QUEUE TO PRINT ON:" S %ZIS("B")="",%ZIS="NQ" D ^%ZIS I POP W "  <No Device Selected>",*7,! S IOP=XION D ^%ZIS K XION R X:2 G EXIT
"RTN","PRPFQ",6,0)
 K XION S (PRIOP,IOP)=ION_";"_IOST_";"_IOM_";"_IOSL I IO=IO(0),'$D(PRPFQ("FORCEQ")) D ^%ZIS D @ZTRTN D CLOSE G EXIT
"RTN","PRPFQ",7,0)
 D DQTIME I '% W "  <Nothing Queued>",*7 D CLOSE G EXIT
"RTN","PRPFQ",8,0)
 S (ZTSAVE("DUZ"),ZTSAVE("PRIOP"))="" D ^%ZTLOAD W "  <Request Queued>",*7,!
"RTN","PRPFQ",9,0)
EXIT K %ZIS,I,IOP,K,N,PRIOP,PRPFL,PRPFQ G ZTKILL
"RTN","PRPFQ",10,0)
CLOSE X ^%ZIS("C") Q
"RTN","PRPFQ",11,0)
MSG ;;PRINTS MESSAGE CONTAINED IN X.  IF IT DOESNT FIT ON ONE LINE, X IS PRINTED ON THE NEXT LINE.
"RTN","PRPFQ",12,0)
 Q:$D(ZTQUEUED)
"RTN","PRPFQ",13,0)
 N X1,X2,ZX Q:'$D(X)  I $S('$D(IOM):1,IOM="":1,1:0) W $P(X,"*") W:X["*" *7 R X:2 K X Q
"RTN","PRPFQ",14,0)
 I ($L($P(X,"*"))+4+$X)>IOM W !,?(IOM-($L($P(X,"*"))+4))
"RTN","PRPFQ",15,0)
 W:X["*" *7 F ZX=1:1 D BRK:($L(X)+6)>IOM W "  ",$P(X,"*"),! Q:'$D(X1)  S X=X1 K X1
"RTN","PRPFQ",16,0)
 Q
"RTN","PRPFQ",17,0)
BRK N I
"RTN","PRPFQ",18,0)
 S X1=X F I=1:1 Q:$L($P(X," ",1,I))>(IOM-6)!($L(X)<(IOM-6))  S X1=$P(X," ",1,I)
"RTN","PRPFQ",19,0)
 S X2=$P(X," ",I,999),X=X1,X1=X2 K X2 Q
"RTN","PRPFQ",20,0)
DQTIME S U="^",%=1 K ZTDTH R !,"Enter DATE & TIME to print: NOW// ",X:$S($D(DTIME):DTIME,1:30) I X[U!('$T) S %=0 K X Q
"RTN","PRPFQ",21,0)
 S:X="" X="NOW" S %DT="ER" D ^%DT S %=0 I Y<0 G DQTIME
"RTN","PRPFQ",22,0)
 S X=Y D H^%DTC S Y=Y_"000",ZTDTH=%H_","_($E(Y,9,10)*60+$E(Y,11,12)*60),%=1
"RTN","PRPFQ",23,0)
 K %DT,%H,%Y,X,Y Q
"RTN","PRPFQ",24,0)
DRNG ;SELECT RANGE OF DATES
"RTN","PRPFQ",25,0)
 K %DT W ! S %DT="EAT",%DT("A")="Enter Beginning Date: " D ^%DT I Y<0 K %H,%I,%DT,TO,FR,X,Y S %=0 Q
"RTN","PRPFQ",26,0)
 S FR=+Y S %DT("A")="   Enter Ending Date: " D ^%DT I X["^" K %DT,%H,%I,FR,Y S %=0 Q
"RTN","PRPFQ",27,0)
 I Y<0 W "??",!,*7 K %DT,FR G DRNG
"RTN","PRPFQ",28,0)
 S TO=+Y I TO<FR W !,*7,"Illogical range of dates. Try again.",! G DRNG
"RTN","PRPFQ",29,0)
 S %=1 K %DT,%H,%I Q
"RTN","PRPFQ",30,0)
RNG ; ALLOW ENTRY OF BEGINNING AND ENDING RANGE
"RTN","PRPFQ",31,0)
 S %=0,FR="",TO="z" S:'$D(DTIME) DTIME=120 W !!,"Start with "_M_": FIRST// " R FR:DTIME S:$T=0 FR="^" G:FR["^" RQ I FR["?",'$D(PRPFD) G RQ
"RTN","PRPFQ",32,0)
 S:FR="" FR="@" I FR'["@" I $D(PRPFD) S %DT="ET",X=FR D ^%DT G:Y<0 RNG S FR=Y
"RTN","PRPFQ",33,0)
TO W !,"Go to "_M_": LAST// " R TO:DTIME S:$T=0 TO="^" G:TO["^" RQ G:TO["?"&('$D(PRPFD)) RNG S:TO="" TO="z" I TO="z" G RQ1
"RTN","PRPFQ",34,0)
 I TO'["@" I $D(PRPFD) S X=TO D ^%DT G:Y<0 TO S TO=Y
"RTN","PRPFQ",35,0)
 I (FR["@")!(TO["@") S %=1 Q
"RTN","PRPFQ",36,0)
 I (+FR=FR)&(+TO=TO) I FR>TO W *7,!,"INVALID RANGE" G RNG
"RTN","PRPFQ",37,0)
 I (+FR'=FR)!(+TO'=TO) I FR]TO W *7,!,"INVALID RANGE" G RNG
"RTN","PRPFQ",38,0)
 Q
"RTN","PRPFQ",39,0)
RQ S %=0 K FR,TO,%DT,X,Y Q
"RTN","PRPFQ",40,0)
RQ1 S %=1 K %DT,M,PRPFD,X,Y Q
"RTN","PRPFQ",41,0)
PAUSE ; MAKES TERMINAL PAUSE WHEN DISPLAYING DATA ONLINE
"RTN","PRPFQ",42,0)
 Q:$E($G(IOST),1,2)'="C-"
"RTN","PRPFQ",43,0)
 W !!,"   ^ TO QUIT" R X:DTIME S:$T=0 X="^" S J=0
"RTN","PRPFQ",44,0)
 Q
"RTN","PRPFQ",45,0)
ENCON I $E($G(IOST),1,2)="C-" W !,"  ** Press RETURN to Continue **" R X:DTIME K X
"RTN","PRPFQ",46,0)
 QUIT
"RTN","PRPFQ",47,0)
DIKILL ; KILL STANDARD FILE MANAGER VARIABLES
"RTN","PRPFQ",48,0)
 K %,%DT,%X,%Y,BY,D,DA,DCC,DIC,DIE,DIJ,DIOEND,DIPT,DP,DR,D0,D1,D2,DQ,DHD,DLAYGO,F,FLDS,FR,I,IOX,IOY,J,K,L,O,P,POP,W,X,Y,Z,ZTSK Q
"RTN","PRPFQ",49,0)
DIWKILL ; KILL FILE MANAGER WORD PROCESSING VARIABLES
"RTN","PRPFQ",50,0)
 K DIW,DIWF,DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,DWLW,X1 Q
"RTN","PRPFQ",51,0)
ZTKILL ; KILL VARIABLES USED BY UNIVERSAL TASK MANAGER
"RTN","PRPFQ",52,0)
 K %ZIS,POP,ZTRTN,ZTUCI,ZTDTH,ZTSAVE,ZTDESC,ZTIO,ZTSK,ZTSKT,ZTDHD,ZTREQ Q
"RTN","PRPFQ",53,0)
LOCK ;LOCK GLOBAL THAT IS BEING ACCESSED BY ANOTHER USER
"RTN","PRPFQ",54,0)
 L @(DIC_DA_"):30") S PRPFL=$T Q:PRPFL  W !!,$C(7),"THIS ENTRY IS BEING EDITED BY ANOTHER USER.  TRY LATER." Q
"RTN","PRPFQ",55,0)
D ;CONVERTS FILEMAN INTERNAL DATE TO EXTERNAL FORMAT
"RTN","PRPFQ",56,0)
 S:Y Y=$S($E(Y,4,5):$P("JAN^FEB^MAR^APR^MAY^JUN^JUL^AUG^SEP^OCT^NOV^DEC","^",+$E(Y,4,5))_" ",1:"")_$S($E(Y,6,7):+$E(Y,6,7)_",",1:"")_($E(Y,1,3)+1700)_$P("@"_$E(Y_0,9,10)_":"_$E(Y_"000",11,12),"^",Y[".")
"RTN","PRPFQ",57,0)
 Q
"RTN","PRPFQ",58,0)
CNVD ; CONVERTS DATE FROM INTERNAL (YYYMMDD) STORAGE FORMAT TO MM/DD/YY
"RTN","PRPFQ",59,0)
 S X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) Q
"RTN","PRPFQ",60,0)
NOW S %H=$H
"RTN","PRPFQ",61,0)
 ; PRPF*3*10 - Changed (Y2K issue) to call %DTC
"RTN","PRPFQ",62,0)
 D YX^%DTC S %X=Y
"RTN","PRPFQ",63,0)
 Q
"RTN","PRPFQ",64,0)
SELRNG S PRPFRNG=""
"RTN","PRPFQ",65,0)
 S DIR(0)="SA^A:ALL;S:SINGLE",DIR("A")="Single Station List or All Station List: ",DIR("B")="ALL"
"RTN","PRPFQ",66,0)
 S DIR("?")="You may enter (A)LL or (S)ingle",DIR("?",1)="Selecting SINGLE will run this report for one Station only."
"RTN","PRPFQ",67,0)
 D ^DIR K DIR I $D(DTOUT)!($D(DUOUT))!($D(DIROUT)) Q
"RTN","PRPFQ",68,0)
A S PRPFRNG=""
"RTN","PRPFQ",69,0)
 S:Y="A" PRPFRNG="@"
"RTN","PRPFQ",70,0)
 I Y="S" S DIC(0)="AEQMZ",DIC=4 W !! D ^DIC K DIC I $D(DTOUT)!($D(DUOUT))!($D(DIROUT)) Q
"RTN","PRPFQ",71,0)
 I PRPFRNG="" I $$GET1^DIQ(4,$P(Y,U),99)="" W !!,"You cannot select a STATION that does not have a STATION NUMBER assigned to it!" S Y="S" D A Q
"RTN","PRPFQ",72,0)
 S:PRPFRNG'="@" PRPFRNG=$$GET1^DIQ(4,$P(Y,U),99)
"RTN","PRPFQ",73,0)
 Q
"RTN","PRPFRES")
0^2^B17517773
"RTN","PRPFRES",1,0)
PRPFRES ;ALTOONA/CTB-POST RESTRICTION INFO TO PATIENT FILE ;4/20/02
"RTN","PRPFRES",2,0)
V ;;3.0;PATIENT FUNDS;**6,13**;JUNE 1, 1989
"RTN","PRPFRES",3,0)
 ;REQUIRES FOLLOWING VARIABLES
"RTN","PRPFRES",4,0)
 ;  PRPFDATE=TRANSACTION DATE
"RTN","PRPFRES",5,0)
 ;  DFN(0)=ZEROTH NODE OF PATIENT FUNDS PATIENT
"RTN","PRPFRES",6,0)
 ;  DFN(1)="1" NODE OF PATIENT FUNDS PATIENT
"RTN","PRPFRES",7,0)
 ;  AMT=AMOUNT TO BE POSTED TO RESTRICTIONS
"RTN","PRPFRES",8,0)
 ;UPDATES ^PRPF(470) AND RESETS DFN(0) AND (1)
"RTN","PRPFRES",9,0)
WK ;DETERMINE WEEK NUMBER SINCE 4 JAN 87
"RTN","PRPFRES",10,0)
 D CURWK
"RTN","PRPFRES",11,0)
 S X2=2870104,X1=PRPFDATE D ^%DTC S POSTWK=X\7+1
"RTN","PRPFRES",12,0)
 I POSTWK<CURWK G MO
"RTN","PRPFRES",13,0)
 I POSTWK>CURWK S:'$D(^PRPF(470,DFN,11,0)) ^(0)="^470.072A^^" S X=^(0),$P(X,"^",3)=POSTWK,$P(X,"^",4)=$P(X,"^",4)+1,^(0)=X S:'$D(^(POSTWK,0)) ^(0)=POSTWK_"^0" S $P(^(0),"^",2)=$P(^(0),"^",2)-AMT G MO
"RTN","PRPFRES",14,0)
 S $P(DFN(1),"^",12)=$P(DFN(1),"^",12)-AMT
"RTN","PRPFRES",15,0)
MO ;POST TO CURRENT MONTH
"RTN","PRPFRES",16,0)
 S POSTMO=$E(PRPFDATE,1,5)_"00" Q:POSTMO<CURMO
"RTN","PRPFRES",17,0)
 I POSTMO>CURMO S:'$D(^PRPF(470,DFN,10,0)) ^(0)="^470.071DA^^" S X=^(0),$P(X,"^",3)=POSTMO,$P(X,"^",4)=$P(X,"^",4)+1,^(0)=X S:'$D(^(POSTMO,0)) ^(0)=POSTMO_"^0" S $P(^(0),"^",2)=$P(^(0),"^",2)-AMT Q
"RTN","PRPFRES",18,0)
 S $P(DFN(1),"^",11)=$P(DFN(1),"^",11)-AMT
"RTN","PRPFRES",19,0)
 G OUT
"RTN","PRPFRES",20,0)
CURWK ;GET CURRENT WEEK NUMBER  CLEAR FIELDS
"RTN","PRPFRES",21,0)
 I '$D(DT) D NOW^PRPFQ S DT=X
"RTN","PRPFRES",22,0)
 S X2=2870104,X1=DT D ^%DTC S CURWK=X\7+1
"RTN","PRPFRES",23,0)
 I $P(DFN(1),"^",10)'=CURWK S $P(DFN(1),"^",10)=CURWK,$P(DFN(1),"^",12)=0
"RTN","PRPFRES",24,0)
 F I=0:0 S I=$O(^PRPF(470,DFN,11,I)) Q:I=""  Q:I>CURWK  I I<CURWK K ^PRPF(470,DFN,11,I) S X=^PRPF(470,DFN,11,0),$P(X,"^",3)=$O(^(0)),$P(X,"^",4)=$P(X,"^",4)-1,^(0)=X
"RTN","PRPFRES",25,0)
 I $D(^PRPF(470,DFN,11,CURWK,0)) S $P(DFN(1),"^",12)=$P(^(0),"^",2) K ^PRPF(470,DFN,11,CURWK) S X=^PRPF(470,DFN,11,0),$P(X,"^",3)=$O(^(0)),$P(X,"^",4)=$P(X,"^",4)-1,^(0)=X
"RTN","PRPFRES",26,0)
CURMO ;GET CURRENT MONTH  CLEAR FIELDS
"RTN","PRPFRES",27,0)
 S CURMO=$E(DT,1,5)_"00" I $P(DFN(1),"^",9)'=CURMO S $P(DFN(1),"^",9)=CURMO,$P(DFN(1),"^",11)=0
"RTN","PRPFRES",28,0)
 F I=0:0 S I=$O(^PRPF(470,DFN,10,I)) Q:I=""  Q:I>CURWK  I I<CURWK K ^PRPF(470,DFN,10,I) S X=^PRPF(470,DFN,10,0),$P(X,"^",3)=$O(^(0)),$P(X,"^",4)=$P(X,"^",4)-1,^(0)=X
"RTN","PRPFRES",29,0)
 I $D(^PRPF(470,DFN,10,CURMO,0)) S $P(DFN(1),"^",11)=$P(^(0),"^",2) K ^PRPF(470,DFN,10,CURMO) S X=^PRPF(470,DFN,10,0),$P(X,"^",3)=$O(^(0)),$P(X,"^",4)=$P(X,"^",4)-1,^(0)=X
"RTN","PRPFRES",30,0)
 Q
"RTN","PRPFRES",31,0)
EN ;ENTRY POINT TO UPDATE CURRENT WEEK AND MONTH
"RTN","PRPFRES",32,0)
 D CURWK,OUT Q
"RTN","PRPFRES",33,0)
 ;
"RTN","PRPFRES",34,0)
OUT ;RESET PATIENT NODES
"RTN","PRPFRES",35,0)
 F I=0,1 S ^PRPF(470,DFN,I)=DFN(I)
"RTN","PRPFRES",36,0)
 K CURMO,CURWK,POSTMO,POSTWK,X1,X2,PRPFDATE Q
"RTN","PRPFRES",37,0)
 QUIT
"RTN","PRPFRES",38,0)
IG ;REPORT OF NEGATIVE BALANCE AND RESTRICTIONS FOR IG
"RTN","PRPFRES",39,0)
 D SELRNG^PRPFQ
"RTN","PRPFRES",40,0)
 I PRPFRNG="" K PRPFRNG QUIT
"RTN","PRPFRES",41,0)
 I PRPFRNG="@" S PRPFRNG2=""
"RTN","PRPFRES",42,0)
 E  S PRPFRNG2=PRPFRNG
"RTN","PRPFRES",43,0)
 S ZTSAVE("PRPFRNG")=PRPFRNG,ZTSAVE("PRPFRNG2")=PRPFRNG2
"RTN","PRPFRES",44,0)
 S ZTRTN="DQ^PRPFRES",ZTDESC=$P($T(DQ),";",3) D ^PRPFQ
"RTN","PRPFRES",45,0)
 K %X,DFN,DG1,DGT,DGX,PRPFRNG,PRPFRNG2 Q
"RTN","PRPFRES",46,0)
TM S PRPFRNG="@",PRPFRNG2=""
"RTN","PRPFRES",47,0)
DQ ;MISC NEGATIVE BALANCES
"RTN","PRPFRES",48,0)
 N PRIOP,DA
"RTN","PRPFRES",49,0)
 S PRIOP=ION
"RTN","PRPFRES",50,0)
 K ^TMP("PRPFRES",$J)
"RTN","PRPFRES",51,0)
 S DA=0 S X="I'm now beginning to search the file." D MSG^PRPFQ
"RTN","PRPFRES",52,0)
 F  D  Q:'DA  W:'$D(ZTQUEUED) "."
"RTN","PRPFRES",53,0)
 . F XX=1:1:25 S DA=$O(^PRPF(470,DA)) Q:'DA  D CK(DA)
"RTN","PRPFRES",54,0)
 . QUIT
"RTN","PRPFRES",55,0)
 I '$D(^TMP("PRPFRES",$J)) K ^TMP("PRPFRES",$J) D NONE QUIT
"RTN","PRPFRES",56,0)
 S IOP=PRIOP,DIC="^PRPF(470,",L=0,L(0)=1,BY="@73:99;S1,.01",BY(0)="^TMP(""PRPFRES"",$J,",FLDS="[PRPF NEGATIVE BALANCES]",FR=""_PRPFRNG_"",TO=""_PRPFRNG2_""
"RTN","PRPFRES",57,0)
 S DIOEND="K ^TMP(""PRPFRES"")  W !,""The information contained in this report is protected by the Privacy Act of 1974""" D:'$D(ZTQUEUED) WAIT^PRPFYN
"RTN","PRPFRES",58,0)
 S:PRPFRNG="@" BY="@73,@73:99;S1,.01",FR="@,@",TO=","
"RTN","PRPFRES",59,0)
 W !,"" D EN1^DIP I '$D(ZTQUEUED) D ENCON^PRPFQ
"RTN","PRPFRES",60,0)
 QUIT
"RTN","PRPFRES",61,0)
NONE S IOP=ION W @IOF D NOW^PRPFQ W "PATIENT FUNDS NEGATIVE BALANCE REPORT",?50,%X,!!,"No accounts with negative balances were found while running this report." W:$E($G(IOST))="P" @IOF
"RTN","PRPFRES",62,0)
 Q
"RTN","PRPFRES",63,0)
CK(DFN) ;
"RTN","PRPFRES",64,0)
 S DFN(0)=$G(^PRPF(470,DFN,0))
"RTN","PRPFRES",65,0)
 S DFN(1)=$G(^PRPF(470,DFN,1))
"RTN","PRPFRES",66,0)
 D EN
"RTN","PRPFRES",67,0)
 I $P(DFN(1),"^",4)<0 D ADD QUIT
"RTN","PRPFRES",68,0)
 I $P(DFN(1),"^",11)<0 D ADD QUIT
"RTN","PRPFRES",69,0)
 I $P(DFN(1),"^",12)<0 D ADD QUIT
"RTN","PRPFRES",70,0)
 QUIT
"RTN","PRPFRES",71,0)
ADD S ^TMP("PRPFRES",$J,DFN)="" QUIT
"RTN","PRPFRPT")
0^3^B7876934
"RTN","PRPFRPT",1,0)
PRPFRPT ;ALTOONA/CTB-PATIENT FUNDS MISC REPORT GENERATOR ;4/22/02
"RTN","PRPFRPT",2,0)
V ;;3.0;PATIENT FUNDS;**6,13**;JUNE 1, 1989
"RTN","PRPFRPT",3,0)
DORMANT ;;REPORT OF DORMANT PATIENT ACCOUNTS
"RTN","PRPFRPT",4,0)
 W !!,"Enter number of days since last transaction for account to be included",!,"on this report. 180// " R X:$S($D(DTIME):DTIME,1:60) G:'$T!(X["^") OUT I X="" S X=180
"RTN","PRPFRPT",5,0)
 I +X'=X!(X<1)!(X[".") W *7,?$X+5,"RESPONSE MUST BE AN INTEGER GREATER THAN ZER0",! G DORMANT Q
"RTN","PRPFRPT",6,0)
 S X="T-"_X,%DT="EX" D ^%DT G:Y<0 OUT S PRPF("SDAT")=Y
"RTN","PRPFRPT",7,0)
 S %A="Do you wish to include accounts with zero (0) balances",%B="",%=2 D ^PRPFYN G:%<0 OUT S PRPF("ZERO")=$S(%=1:"XXX",1:0)
"RTN","PRPFRPT",8,0)
 D SELRNG^PRPFQ
"RTN","PRPFRPT",9,0)
 I PRPFRNG="" D OUT QUIT
"RTN","PRPFRPT",10,0)
 I PRPFRNG="@" S PRPFRNG2=""
"RTN","PRPFRPT",11,0)
 E  S PRPFRNG2=PRPFRNG
"RTN","PRPFRPT",12,0)
 S ZTRTN="DQ^PRPFRPT",ZTDESC=$P($T(DORMANT),";",3),ZTSAVE("PRPF*")="" D ^PRPFQ D:'$D(XQY) ENCON^PRPFQ G OUT
"RTN","PRPFRPT",13,0)
CK S PRPF("DATE")=$P(^PRPF(470,DA,0),"^",11),PRPF("BAL")=$P(^(1),"^",4)
"RTN","PRPFRPT",14,0)
 I +PRPF("BAL")'=PRPF("ZERO"),+PRPF("DATE")'>PRPF("SDAT") S ^TMP("PRPFAE",$J,DA)="" I '$D(ZTQUEUED),I#25=0 W "."
"RTN","PRPFRPT",15,0)
 Q
"RTN","PRPFRPT",16,0)
DQ ;ENTRY POINT FOR QUEUED OUTPUT
"RTN","PRPFRPT",17,0)
 S IOP=PRIOP
"RTN","PRPFRPT",18,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","PRPFRPT",19,0)
 E  D WAIT^PRPFYN
"RTN","PRPFRPT",20,0)
 K ^TMP("PRPFAE",$J)
"RTN","PRPFRPT",21,0)
 S DA=0 F I=1:1 S DA=$O(^PRPF(470,DA)) Q:'DA  D CK
"RTN","PRPFRPT",22,0)
 S Y=PRPF("SDAT") D D^PRPFU1 S DHD="LISTING OF PATIENT FUNDS ACCOUNTS INACTIVE SINCE "_Y
"RTN","PRPFRPT",23,0)
 I '$D(^TMP("PRPFAE",$J)) W !!,DHD D NOW^PRPFQ S X="DATE: "_%X D MSG^PRPFU1 W !!,"THERE ARE NO ACCOUNTS IN THE FILE MEETING THE ABOVE CRITERION AT THIS TIME.",!! G OUT
"RTN","PRPFRPT",24,0)
 S DIC="^PRPF(470,",L=0,L(0)=1,BY="@73:99;S1,.01",BY(0)="^TMP(""PRPFAE"",$J,",FLDS="[PRPF DORMANT ACCOUNT LIST]",FR=""_PRPFRNG_"",TO=""_PRPFRNG2_""
"RTN","PRPFRPT",25,0)
 S DIOEND="K ^TMP(""PRPFAE"",$J) W !,""The information contained in this report is protected by the Privacy Act of 1974"""
"RTN","PRPFRPT",26,0)
 S:PRPFRNG="@" BY="@73,@73:99;S1,.01",FR="@,@",TO=","
"RTN","PRPFRPT",27,0)
 W !,"" D EN1^DIP
"RTN","PRPFRPT",28,0)
OUT K %,%DT,%X,%Y,DFN,DG1,DGA1,DGT,DGX,DIJ,DP,PRIOP,PRPF,PRPFRNG,PRPFRNG2,IOY,X,Y,DIOEND Q
"RTN","PRPFRPT",29,0)
DISPLAY ;DISPLAY INDIVIDUAL TRANSACTION
"RTN","PRPFRPT",30,0)
 S DIC=470.1,DIC(0)="AEQ" D ^DIC I +Y>0 S DA=+Y,DR=0 D EN^DIQ G DISPLAY
"VER")
8.0^22
"^DD",470,470,0)
FIELD^^73^64
"^DD",470,470,0,"DT")
3020416
"^DD",470,470,0,"ID",73)
S %I=Y,Y=$S('$D(^(12)):"",$D(^DIC(4,+$P(^(12),U,1),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(4,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",470,470,0,"ID","DEAD")
I $D(^DPT(+Y,.35)),$P(^(.35),U)]"" W "   PATIENT HAS EXPIRED",*7
"^DD",470,470,0,"IX","AC",470,1)

"^DD",470,470,0,"IX","AD",470,60)

"^DD",470,470,0,"IX","AE",470,61)

"^DD",470,470,0,"IX","AF",470,62)

"^DD",470,470,0,"IX","AG",470,63)

"^DD",470,470,0,"IX","AH",470,64)

"^DD",470,470,0,"IX","AI",470,65)

"^DD",470,470,0,"IX","AJ",470,66)

"^DD",470,470,0,"IX","AK",470,67)

"^DD",470,470,0,"IX","B",470,.01)

"^DD",470,470,0,"IX","C",470.03,.01)

"^DD",470,470,0,"NM","PATIENT FUNDS")

"^DD",470,470,0,"PT",470.1,1)

"^DD",470,470,0,"PT",470.5,1)

"^DD",470,470,0,"VRPK")
PRPF
"^DD",470,470,.01,0)
NAME^IRP2'X^DPT(^0;1^S DINUM=X
"^DD",470,470,.01,1,0)
^.1
"^DD",470,470,.01,1,1,0)
470^B
"^DD",470,470,.01,1,1,1)
S ^PRPF(470,"B",$E(X,1,30),DA)=""
"^DD",470,470,.01,1,1,2)
K ^PRPF(470,"B",$E(X,1,30),DA)
"^DD",470,470,.01,1,2,0)
^^TRIGGER^470^10.9
"^DD",470,470,.01,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^PRPF(470,D0,0)):^(0),1:"") S X=$P(Y(1),U,14),X=X S DIU=X K Y S X=DIV S X="YES" X ^DD(470,.01,1,2,1.4)
"^DD",470,470,.01,1,2,1.4)
S DIH=$S($D(^PRPF(470,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,14)=DIV,DIH=470,DIG=10.9 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",470,470,.01,1,2,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^PRPF(470,D0,0)):^(0),1:"") S X=$P(Y(1),U,14),X=X S DIU=X K Y S X=DIV S X="YES" X ^DD(470,.01,1,2,2.4)
"^DD",470,470,.01,1,2,2.4)
S DIH=$S($D(^PRPF(470,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,14)=DIV,DIH=470,DIG=10.9 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",470,470,.01,1,2,"%D",0)
^^2^2^2970612^
"^DD",470,470,.01,1,2,"%D",1,0)
This trigger will assure that if a provider conversion is accidentally
"^DD",470,470,.01,1,2,"%D",2,0)
run, that the provider field will not be changed.
"^DD",470,470,.01,1,2,"CREATE VALUE")
"YES"
"^DD",470,470,.01,1,2,"DELETE VALUE")
"YES"
"^DD",470,470,.01,1,2,"DT")
2970612
"^DD",470,470,.01,1,2,"FIELD")
#10.9
"^DD",470,470,.01,3)
 
"^DD",470,470,.01,"DT")
2970612
"^DD",470,470,1,0)
ACCOUNT STATUS^SX^A:ACTIVE;I:INACTIVE;^0;2^D CKINACT^PRPFED
"^DD",470,470,1,1,0)
^.1
"^DD",470,470,1,1,1,0)
470^AC
"^DD",470,470,1,1,1,1)
S ^PRPF(470,"AC",$E(X,1,30),DA)=""
"^DD",470,470,1,1,1,2)
K ^PRPF(470,"AC",$E(X,1,30),DA)
"^DD",470,470,1,"DT")
2870713
"^DD",470,470,2,0)
PATIENT TYPE^S^L:LIMITED UNRESTRICTED;R:RESTRICTED;U:UNRESTRICTED;X:UNKNOWN;^0;3^Q
"^DD",470,470,2,"DT")
2870309
"^DD",470,470,3,0)
PATIENT STATUS^S^A:ADJUDGED INCOMPETENT;R:RATED INCOMPETENT;C:COMPETENT;N:NOT RATED;X:UNKNOWN;^0;4^Q
"^DD",470,470,3,"DT")
2870309
"^DD",470,470,4,0)
INDIGENT^S^Y:YES;N:NO;^0;5^Q
"^DD",470,470,4,"DT")
2870309
"^DD",470,470,5,0)
APPORTIONEE $^NJ9,2^^0;6^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>999999)!(X<0) X
"^DD",470,470,5,3)
TYPE A NUMBER BETWEEN 0 AND 999999
"^DD",470,470,5,"DT")
2870309
"^DD",470,470,6,0)
GUARDIAN $^NJ9,2^^0;7^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>999999)!(X<0) X
"^DD",470,470,6,3)
TYPE A NUMBER BETWEEN 0 AND 999999
"^DD",470,470,7,0)
INSTITUTIONAL AWARD^NJ9,2^^0;8^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>999999)!(X<0) X
"^DD",470,470,7,3)
TYPE A NUMBER BETWEEN 0 AND 999999
"^DD",470,470,8,0)
REGIONAL OFFICE^P4'^DIC(4,^0;9^Q
"^DD",470,470,8,"DT")
2870309
"^DD",470,470,9,0)
OTHER ASSETS^NJ6,0^^0;10^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",470,470,9,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 999999
"^DD",470,470,9,"DT")
2870309
"^DD",470,470,10,0)
DATE OF LAST TRANSACTION^D^^0;11^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",470,470,10,"DT")
2870309
"^DD",470,470,10.5,0)
DATE OF CURRENT RESTRICTION^D^^0;12^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",470,470,10.5,"DT")
2870309
"^DD",470,470,10.7,0)
PROVIDER AUTH RESTRICT^*P200'^VA(200,^0;13^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U,1)))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",470,470,10.7,12)
Allows user only to select active providers.
"^DD",470,470,10.7,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U,1)))"
"^DD",470,470,10.7,"DT")
2950428
"^DD",470,470,10.9,0)
PROVIDER CONVERTED^S^1:YES;^0;14^Q
"^DD",470,470,10.9,5,1,0)
470^.01^2
"^DD",470,470,10.9,21,0)
^^3^3^2970612^
"^DD",470,470,10.9,21,1,0)
This field contains a flag indicating that the Provider Authorizing
"^DD",470,470,10.9,21,2,0)
Restriction field has been converted from pointing to file 6 to pointing
"^DD",470,470,10.9,21,3,0)
to file 200.
"^DD",470,470,10.9,"DT")
2970612
"^DD",470,470,11,0)
BALANCE CARRIED FORWARD^NJ10,2^^1;1^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>9999999)!(X<0) X
"^DD",470,470,11,3)
TYPE A NUMBER BETWEEN 0 AND 9999999
"^DD",470,470,11,"DT")
2870309
"^DD",470,470,12,0)
PVT SOURCE CARRIED FORWARD^NJ10,2^^1;2^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>9999999)!(X<0) X
"^DD",470,470,12,3)
TYPE A NUMBER BETWEEN 0 AND 9999999
"^DD",470,470,12,"DT")
2870309
"^DD",470,470,13,0)
GRATUITOUS CARRIED FORWARD^NJ10,2^^1;3^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>9999999)!(X<0) X
"^DD",470,470,13,3)
TYPE A NUMBER BETWEEN 0 AND 9999999
"^DD",470,470,14,0)
STORED BALANCE^NJ10,2^^1;4^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?."-".N1"."2N)!(X>9999999)!(X<-9999999) X
"^DD",470,470,14,3)
TYPE A NUMBER BETWEEN -9999999 AND 9999999
"^DD",470,470,14,"DT")
2870309
"^DD",470,470,14.5,0)
COMPUTED BALANCE^CJ10,2^^ ; ^X ^DD(470,14.5,9.2) X "F D1=0:0 S D1=$O(^PRPF(470,D0,3,D1)) Q:D1'>0  S Y(470,14.5,102)=Y(470,14.5,102)+$S($D(^(D1,0)):$P(^(0),U,3),1:"""")" S D(1)=D1 S X=Y(470,14.5,102) S D0=Y(470,14.5,80) S D1=Y(470,14.5,81)
"^DD",470,470,14.5,9)
^
"^DD",470,470,14.5,9.01)
470.01^2
"^DD",470,470,14.5,9.1)
TOTAL(PATIENT TRANSACTION:TRANSACTION AMOUNT)
"^DD",470,470,14.5,9.2)
S Y(470,14.5,80)=$S($D(D0):D0,1:""),Y(470,14.5,81)=$S($D(D1):D1,1:""),Y(470,14.5,102)=""
"^DD",470,470,14.5,"DT")
2970224
"^DD",470,470,15,0)
STORED PRIVATE SOURCE^NJ10,2^^1;5^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?."-".N1"."2N)!(X>9999999)!(X<-9999999) X
"^DD",470,470,15,3)
TYPE A NUMBER BETWEEN -9999999 AND 9999999
"^DD",470,470,15.5,0)
COMPUTED PRIVATE SOURCE^CJ10,2^^ ; ^X ^DD(470,15.5,9.2) X "F D1=0:0 S D1=$O(^PRPF(470,D0,3,D1)) Q:D1'>0  S Y(470,15.5,102)=Y(470,15.5,102)+$S($D(^(D1,0)):$P(^(0),U,4),1:"""")" S D(1)=D1 S X=Y(470,15.5,102) S D0=Y(470,15.5,80) S D1=Y(470,15.5,81)
"^DD",470,470,15.5,9)
^
"^DD",470,470,15.5,9.01)
470.01^3
"^DD",470,470,15.5,9.1)
TOTAL(PATIENT TRANSACTION:PRIVATE SOURCE AMOUNT)
"^DD",470,470,15.5,9.2)
S Y(470,15.5,80)=$S($D(D0):D0,1:""),Y(470,15.5,81)=$S($D(D1):D1,1:""),Y(470,15.5,102)=""
"^DD",470,470,15.5,"DT")
2970224
"^DD",470,470,16,0)
STORED GRATUITOUS^NJ10,2^^1;6^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?."-".N1"."2N)!(X>9999999)!(X<-9999999) X
"^DD",470,470,16,3)
TYPE A NUMBER BETWEEN -9999999 AND 9999999
"^DD",470,470,16.5,0)
COMPUTED GRATUITOUS^CJ10,2^^ ; ^X ^DD(470,16.5,9.2) X "F D1=0:0 S D1=$O(^PRPF(470,D0,3,D1)) Q:D1'>0  S Y(470,16.5,102)=Y(470,16.5,102)+$S($D(^(D1,0)):$P(^(0),U,5),1:"""")" S D(1)=D1 S X=Y(470,16.5,102) S D0=Y(470,16.5,80) S D1=Y(470,16.5,81)
"^DD",470,470,16.5,9)
^
"^DD",470,470,16.5,9.01)
470.01^4
"^DD",470,470,16.5,9.1)
TOTAL(PATIENT TRANSACTION:GRATUITOUS AMOUNT)
"^DD",470,470,16.5,9.2)
S Y(470,16.5,80)=$S($D(D0):D0,1:""),Y(470,16.5,81)=$S($D(D1):D1,1:""),Y(470,16.5,102)=""
"^DD",470,470,16.5,"DT")
2970224
"^DD",470,470,17,0)
AMOUNT RESTRICTED PER MONTH^NJ8,2^^1;7^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>99999)!(X<0) X
"^DD",470,470,17,3)
TYPE A NUMBER BETWEEN 0 AND 99999
"^DD",470,470,17,"DT")
2870309
"^DD",470,470,18,0)
AMOUNT RESTRICTED PER WEEK^NJ8,2^^1;8^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>99999)!(X<0) X
"^DD",470,470,18,3)
TYPE A NUMBER BETWEEN 0 AND 99999
"^DD",470,470,19,0)
RESTRICTION MONTH^D^^1;9^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",470,470,19,"DT")
2870309
"^DD",470,470,20,0)
RESTRICTION WEEK #^NJ4,0^^1;10^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",470,470,20,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 9999
"^DD",470,470,20,"DT")
2870309
"^DD",470,470,21,0)
MONTHLY RESTRICTION BALANCE^NJ8,2^^1;11^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?."-".N1"."2N)!(X>99999)!(X<-99999) X
"^DD",470,470,21,3)
TYPE A NUMBER BETWEEN -99999 AND 99999
"^DD",470,470,21,"DT")
2870309
"^DD",470,470,22,0)
WEEKLY RESTRICTION BALANCE^NJ8,2^^1;12^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?."-".N1"."2N)!(X>99999)!(X<-99999) X
"^DD",470,470,22,3)
TYPE A NUMBER BETWEEN -99999 AND 99999
"^DD",470,470,23,0)
MINIMUM BALANCE #1^NJ9,2^^2;1^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>999999)!(X<0) X
"^DD",470,470,23,3)
TYPE A NUMBER BETWEEN 0 AND 999999
"^DD",470,470,23,"DT")
2870309
"^DD",470,470,24,0)
MAXIMUM BALANCE #1^NJ9,2^^2;2^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>999999)!(X<0) X
"^DD",470,470,24,3)
TYPE A NUMBER BETWEEN 0 AND 999999
"^DD",470,470,25,0)
MINIMUM BALANCE #2^NJ9,2^^2;3^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>999999)!(X<0) X
"^DD",470,470,25,3)
TYPE A NUMBER BETWEEN 0 AND 999999
"^DD",470,470,26,0)
MAXIMUM BALANCE #2^NJ9,2^^2;4^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>999999)!(X<0) X
"^DD",470,470,26,3)
TYPE A NUMBER BETWEEN 0 AND 999999
"^DD",470,470,30,0)
PATIENT TRANSACTION^470.01P^^3;0
"^DD",470,470,30,21,0)
^^2^2^2880302^
"^DD",470,470,30,21,1,0)
This field stores the current master transactions affecting a patient account.  As archiving becomes available, the data contained in this field will
"^DD",470,470,30,21,2,0)
only be a subset of all the master transactions affecting a specific veteran.
"^DD",470,470,30.5,0)
DEFERRED BALANCE^CJ10,2^^ ; ^X ^DD(470,30.5,9.2) X "F D1=0:0 S D1=$O(^PRPF(470,D0,4,D1)) Q:D1'>0  S Y(470,30.5,102)=Y(470,30.5,102)+$S($D(^(D1,0)):$P(^(0),U,3),1:"""")" S D(1)=D1 S X=Y(470,30.5,102) S D0=Y(470,30.5,80) S D1=Y(470,30.5,81)
"^DD",470,470,30.5,9)
^
"^DD",470,470,30.5,9.01)
470.02^2
"^DD",470,470,30.5,9.1)
TOTAL(#31:#2)
"^DD",470,470,30.5,9.2)
S Y(470,30.5,80)=$S($D(D0):D0,1:""),Y(470,30.5,81)=$S($D(D1):D1,1:""),Y(470,30.5,102)=""
"^DD",470,470,30.5,"DT")
2970224
"^DD",470,470,31,0)
DEFERRED CREDIT REF #^470.02A^^4;0
"^DD",470,470,32,0)
SUSPENSE DATE^470.03D^^5;0
"^DD",470,470,33,0)
INCOME SOURCE^470.05^^6;0
"^DD",470,470,34,0)
GENERAL INFORMATION/REMARKS^470.06^^7;0
"^DD",470,470,35,0)
SPECIAL REMARKS^470.035^^8;0
"^DD",470,470,35,21,0)
^^2^2^2871013^
"^DD",470,470,35,21,1,0)
This field is designed to store those remarks which are to be viewed by
"^DD",470,470,35,21,2,0)
Patient Funds Personnel ONLY.
"^DD",470,470,50,0)
SSN^CJ11^^ ; ^X ^DD(470,50,9.2) S X=$P(Y(470,50,101),U,9) S D0=Y(470,50,80)
"^DD",470,470,50,9)
^
"^DD",470,470,50,9.01)
2^.09;470^.01
"^DD",470,470,50,9.1)
NAME:SSN
"^DD",470,470,50,9.2)
S Y(470,50,80)=$S($D(D0):D0,1:""),Y(470,50,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,50,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,50,101)=$S($D(^DPT(D0,0)):^(0),1:"")
"^DD",470,470,51,0)
DOB^DC^^ ; ^X ^DD(470,51,9.2) S X=$P(Y(470,51,101),U,3) S D0=Y(470,51,80)
"^DD",470,470,51,9)
^
"^DD",470,470,51,9.01)
2^.03;470^.01
"^DD",470,470,51,9.1)
NAME:DOB
"^DD",470,470,51,9.2)
S Y(470,51,80)=$S($D(D0):D0,1:""),Y(470,51,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,51,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,51,101)=$S($D(^DPT(D0,0)):^(0),1:"")
"^DD",470,470,52,0)
WARD^CJ15X^^ ; ^S X="",DFN=$S($D(DA):DA,$D(D0):D0,1:"") I DFN["" D DGINPW^PRPFU1 S X=DFN(.1) K DFN(.1)
"^DD",470,470,52,9)
^
"^DD",470,470,52,9.01)
 
"^DD",470,470,52,9.1)
S X="",DFN=$S($D(DA):DA,$D(D0):D0,1:"") I DFN["" D DGINPW^PRPFU1 S X=DFN(.1) K DFN(.1)
"^DD",470,470,52,9.2)
S Y(470,52,80)=$S($D(D0):D0,1:""),Y(470,52,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,52,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,52,101)=$S($D(^DPT(D0,.1)):^(.1),1:"")
"^DD",470,470,52,"DT")
2920219
"^DD",470,470,53,0)
CLAIM NUMBER^CJ9^^ ; ^X ^DD(470,53,9.2) S X=$P(Y(470,53,101),U,3) S D0=Y(470,53,80)
"^DD",470,470,53,9)
^
"^DD",470,470,53,9.01)
2^.313;470^.01
"^DD",470,470,53,9.1)
NAME:CLAIM NUMBER
"^DD",470,470,53,9.2)
S Y(470,53,80)=$S($D(D0):D0,1:""),Y(470,53,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,53,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,53,101)=$S($D(^DPT(D0,.31)):^(.31),1:"")
"^DD",470,470,54,0)
STREET ADDRESS^CJ35^^ ; ^X ^DD(470,54,9.2) S X=$P(Y(470,54,101),U,1) S D0=Y(470,54,80)
"^DD",470,470,54,9)
^
"^DD",470,470,54,9.01)
2^.111;470^.01
"^DD",470,470,54,9.1)
NAME:STREET ADDRESS
"^DD",470,470,54,9.2)
S Y(470,54,80)=$S($D(D0):D0,1:""),Y(470,54,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,54,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,54,101)=$S($D(^DPT(D0,.11)):^(.11),1:"")
"^DD",470,470,55,0)
STREET ADDRESS 2^CJ30^^ ; ^X ^DD(470,55,9.2) S X=$P(Y(470,55,101),U,2) S D0=Y(470,55,80)
"^DD",470,470,55,9)
^
"^DD",470,470,55,9.01)
2^.112;470^.01
"^DD",470,470,55,9.1)
NAME:STREET ADDRESS 2
"^DD",470,470,55,9.2)
S Y(470,55,80)=$S($D(D0):D0,1:""),Y(470,55,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,55,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,55,101)=$S($D(^DPT(D0,.11)):^(.11),1:"")
"^DD",470,470,56,0)
STREET ADDRESS 3^CJ30^^ ; ^X ^DD(470,56,9.2) S X=$P(Y(470,56,101),U,3) S D0=Y(470,56,80)
"^DD",470,470,56,9)
^
"^DD",470,470,56,9.01)
2^.113;470^.01
"^DD",470,470,56,9.1)
NAME:STREET ADDRESS 3
"^DD",470,470,56,9.2)
S Y(470,56,80)=$S($D(D0):D0,1:""),Y(470,56,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,56,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,56,101)=$S($D(^DPT(D0,.11)):^(.11),1:"")
"^DD",470,470,57,0)
CITY^CJ15^^ ; ^X ^DD(470,57,9.2) S X=$P(Y(470,57,101),U,4) S D0=Y(470,57,80)
"^DD",470,470,57,9)
^
"^DD",470,470,57,9.01)
2^.114;470^.01
"^DD",470,470,57,9.1)
NAME:CITY
"^DD",470,470,57,9.2)
S Y(470,57,80)=$S($D(D0):D0,1:""),Y(470,57,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,57,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,57,101)=$S($D(^DPT(D0,.11)):^(.11),1:"")
"^DD",470,470,58,0)
STATE^CJ30^^ ; ^X ^DD(470,58,9.2) S X=$S('$D(^DIC(5,+$P(Y(470,58,101),U,5),0)):"",1:$P(^(0),U,1)) S D0=Y(470,58,80)
"^DD",470,470,58,9)
^
"^DD",470,470,58,9.01)
2^.115;470^.01
"^DD",470,470,58,9.1)
NAME:STATE
"^DD",470,470,58,9.2)
S Y(470,58,80)=$S($D(D0):D0,1:""),Y(470,58,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,58,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,58,101)=$S($D(^DPT(D0,.11)):^(.11),1:"")
"^DD",470,470,58,"DT")
2870311
"^DD",470,470,59,0)
ZIP CODE^CJ10^^ ; ^X ^DD(470,59,9.2) S X=$P(Y(470,59,101),U,6) S D0=Y(470,59,80)
"^DD",470,470,59,9)
^
"^DD",470,470,59,9.01)
2^.116;470^.01
"^DD",470,470,59,9.1)
NAME:ZIP CODE
"^DD",470,470,59,9.2)
S Y(470,59,80)=$S($D(D0):D0,1:""),Y(470,59,1)=$S($D(^PRPF(470,D0,0)):^(0),1:""),D0=$P(Y(470,59,1),U,1) S:'$D(^DPT(+D0,0)) D0=-1 S Y(470,59,101)=$S($D(^DPT(D0,.11)):^(.11),1:"")
"^DD",470,470,60,0)
CARD TO BE PRINTED?^RSI^Y:YES;^1;13^Q
"^DD",470,470,60,1,0)
^.1
"^DD",470,470,60,1,1,0)
470^AD
"^DD",470,470,60,1,1,1)
S ^PRPF(470,"AD",$E(X,1,30),DA)=""
"^DD",470,470,60,1,1,2)
K ^PRPF(470,"AD",$E(X,1,30),DA)
"^DD",470,470,60,"DT")
2890127
"^DD",470,470,61,0)
ON DORMANT ACCOUNT LIST^RSI^Y:YES;^1;14^Q
"^DD",470,470,61,1,0)
^.1
"^DD",470,470,61,1,1,0)
470^AE
"^DD",470,470,61,1,1,1)
S ^PRPF(470,"AE",$E(X,1,30),DA)=""
"^DD",470,470,61,1,1,2)
K ^PRPF(470,"AE",$E(X,1,30),DA)
"^DD",470,470,61,"DT")
2890127
"^DD",470,470,62,0)
ON MIN/MAX1 LIST^RSI^Y:YES;^1;15^Q
"^DD",470,470,62,1,0)
^.1
"^DD",470,470,62,1,1,0)
470^AF
"^DD",470,470,62,1,1,1)
S ^PRPF(470,"AF",$E(X,1,30),DA)=""
"^DD",470,470,62,1,1,2)
K ^PRPF(470,"AF",$E(X,1,30),DA)
"^DD",470,470,62,"DT")
2890127
"^DD",470,470,63,0)
ON MIN/MAX2 LIST^RSI^Y:YES;^1;16^Q
"^DD",470,470,63,1,0)
^.1
"^DD",470,470,63,1,1,0)
470^AG
"^DD",470,470,63,1,1,1)
S ^PRPF(470,"AG",$E(X,1,30),DA)=""
"^DD",470,470,63,1,1,2)
K ^PRPF(470,"AG",$E(X,1,30),DA)
"^DD",470,470,63,"DT")
2890127
"^DD",470,470,64,0)
ACCOUNT OUT OF BALANCE^RSI^Y:YES;^1;17^Q
"^DD",470,470,64,1,0)
^.1
"^DD",470,470,64,1,1,0)
470^AH
"^DD",470,470,64,1,1,1)
S ^PRPF(470,"AH",$E(X,1,30),DA)=""
"^DD",470,470,64,1,1,2)
K ^PRPF(470,"AH",$E(X,1,30),DA)
"^DD",470,470,64,"DT")
2890127
"^DD",470,470,65,0)
ON SUSPENSE DISPLAY LIST^RSI^Y:YES;^1;18^Q
"^DD",470,470,65,1,0)
^.1
"^DD",470,470,65,1,1,0)
470^AI
"^DD",470,470,65,1,1,1)
S ^PRPF(470,"AI",$E(X,1,30),DA)=""
"^DD",470,470,65,1,1,2)
K ^PRPF(470,"AI",$E(X,1,30),DA)
"^DD",470,470,65,3)
 
"^DD",470,470,65,"DT")
2890127
"^DD",470,470,66,0)
ON ACTIVE ACCOUNT LIST^RSI^Y:YES;^1;19^Q
"^DD",470,470,66,1,0)
^.1
"^DD",470,470,66,1,1,0)
470^AJ
"^DD",470,470,66,1,1,1)
S ^PRPF(470,"AJ",$E(X,1,30),DA)=""
"^DD",470,470,66,1,1,2)
K ^PRPF(470,"AJ",$E(X,1,30),DA)
"^DD",470,470,66,3)
 
"^DD",470,470,66,"DT")
2890127
"^DD",470,470,67,0)
PRINT ON OVERDUE LIST?^RSI^Y:YES;^1;20^Q
"^DD",470,470,67,1,0)
^.1
"^DD",470,470,67,1,1,0)
470^AK
"^DD",470,470,67,1,1,1)
S ^PRPF(470,"AK",$E(X,1,30),DA)=""
"^DD",470,470,67,1,1,2)
K ^PRPF(470,"AK",$E(X,1,30),DA)
"^DD",470,470,67,3)
 
"^DD",470,470,67,"DT")
2890127
"^DD",470,470,68,0)
RECORD LOCKED^S^1:YES;0:NO;^9;1^Q
"^DD",470,470,68,1,0)
^.1^^0
"^DD",470,470,68,"DT")
2880302
"^DD",470,470,69,0)
RECORD LOCKED BY^P200'^VA(200,^9;2^Q
"^DD",470,470,69,"DT")
2950919
"^DD",470,470,70,0)
RECORD LOCKED TERMINAL^F^^9;3^K:$L(X)>15!($L(X)<1) X
"^DD",470,470,70,3)
ANSWER MUST BE 1-15 CHARACTERS IN LENGTH
"^DD",470,470,70,"DT")
2880301
"^DD",470,470,71,0)
FUTURE MONTH^470.071DA^^10;0
"^DD",470,470,72,0)
FUTURE WEEK^470.072A^^11;0
"^DD",470,470,73,0)
STATION NAME^P4'^DIC(4,^12;1^Q
"^DD",470,470,73,3)
Answer must be 3-5 characters in length
"^DD",470,470,73,21,0)
^.001^1^1^3020606^^
"^DD",470,470,73,21,1,0)
This field will be used to store the primary Station Name that a patient is officially assigned to.
"^DD",470,470,73,"DT")
3020606
"^DD",470,470.01,0)
PATIENT TRANSACTION SUB-FIELD^^16^16
"^DD",470,470.01,0,"IX","AC",470.01,1)

"^DD",470,470.01,0,"IX","B",470.01,.01)

"^DD",470,470.01,0,"NM","PATIENT TRANSACTION")
 
"^DD",470,470.01,0,"UP")
470
"^DD",470,470.01,.01,0)
PATIENT TRANSACTION^RP470.1'^PRPF(470.1,^0;1^Q
"^DD",470,470.01,.01,.1)
TRANS #
"^DD",470,470.01,.01,1,0)
^.1^^-1
"^DD",470,470.01,.01,1,1,0)
470.01^B
"^DD",470,470.01,.01,1,1,1)
S ^PRPF(470,DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",470,470.01,.01,1,1,2)
K ^PRPF(470,DA(1),3,"B",$E(X,1,30),DA)
"^DD",470,470.01,.01,3)
 
"^DD",470,470.01,.01,"DT")
2870901
"^DD",470,470.01,1,0)
TRANSACTION DATE^RD^^0;2^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",470,470.01,1,1,0)
^.1
"^DD",470,470.01,1,1,1,0)
470.01^AC
"^DD",470,470.01,1,1,1,1)
S ^PRPF(470,DA(1),3,"AC",$E(X,1,30),DA)=""
"^DD",470,470.01,1,1,1,2)
K ^PRPF(470,DA(1),3,"AC",$E(X,1,30),DA)
"^DD",470,470.01,1,"DT")
2870901
"^DD",470,470.01,2,0)
TRANSACTION AMOUNT^NJ10,2^^0;3^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?."-".N1"."2N)!(X>9999999)!(X<-9999999) X
"^DD",470,470.01,2,.1)
AMOUNT
"^DD",470,470.01,2,3)
TYPE A NUMBER BETWEEN -9999999 AND 9999999
"^DD",470,470.01,2,"DT")
2870309
"^DD",470,470.01,3,0)
PRIVATE SOURCE AMOUNT^NJ10,2^^0;4^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?."-".N1"."2N)!(X>9999999)!(X<-9999999) X
"^DD",470,470.01,3,3)
TYPE A NUMBER BETWEEN -9999999 AND 9999999
"^DD",470,470.01,4,0)
GRATUITOUS AMOUNT^NJ10,2^^0;5^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?."-".N1"."2N)!(X>9999999)!(X<-9999999) X
"^DD",470,470.01,4,3)
TYPE A NUMBER BETWEEN -9999999 AND 9999999
"^DD",470,470.01,4,"DT")
2870309
"^DD",470,470.01,5,0)
BALANCE^NJ10,2^^0;6^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?."-".N1"."2N)!(X>9999999)!(X<-9999999) X
"^DD",470,470.01,5,3)
TYPE A NUMBER BETWEEN -9999999 AND 9999999
"^DD",470,470.01,5,"DT")
2870309
"^DD",470,470.01,7,0)
VERIFY AMOUNT^CJ10,2^^ ; ^X ^DD(470.01,7,9.2) S D0=$P(Y(470.01,7,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,7,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"") S X=$P(Y(470.01,7,101),U,4) S D0=Y(470.01,7,80) S D1=Y(470.01,7,81)
"^DD",470,470.01,7,9)
^
"^DD",470,470.01,7,9.01)
470.1^3;470.01^.01
"^DD",470,470.01,7,9.1)
PATIENT TRANSACTION:AMOUNT
"^DD",470,470.01,7,9.2)
S Y(470.01,7,81)=$S($D(D1):D1,1:""),Y(470.01,7,80)=$S($D(D0):D0,1:""),Y(470.01,7,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.01,8,0)
TRANSACTION DATE^DC^^ ; ^X ^DD(470.01,8,9.2) S D0=$P(Y(470.01,8,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,8,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"") S X=$P(Y(470.01,8,101),U,5) S D0=Y(470.01,8,80) S D1=Y(470.01,8,81)
"^DD",470,470.01,8,9)
^
"^DD",470,470.01,8,9.01)
470.1^4;470.01^.01
"^DD",470,470.01,8,9.1)
PATIENT TRANSACTION:TRANSACTION DATE
"^DD",470,470.01,8,9.2)
S Y(470.01,8,81)=$S($D(D1):D1,1:""),Y(470.01,8,80)=$S($D(D0):D0,1:""),Y(470.01,8,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.01,9,0)
DATE ENTERED^CJ10^^ ; ^X ^DD(470.01,9,9.3) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_(1700+$E(X,1,3)) S X=X S D0=Y(470.01,9,80) S D1=Y(470.01,9,81)
"^DD",470,470.01,9,.1)
DATE
"^DD",470,470.01,9,9)
^
"^DD",470,470.01,9,9.01)
470.1^5;470.01^.01
"^DD",470,470.01,9,9.1)
NUMDATE4(PATIENT TRANSACTION:DATE TRANSACTION ENTERED)
"^DD",470,470.01,9,9.2)
S Y(470.01,9,81)=$S($D(D1):D1,1:""),Y(470.01,9,80)=$S($D(D0):D0,1:""),Y(470.01,9,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.01,9,9.3)
X ^DD(470.01,9,9.2) S D0=$P(Y(470.01,9,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,9,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"") S X=$P(Y(470.01,9,101),U,6)
"^DD",470,470.01,9,"DT")
2980225
"^DD",470,470.01,10,0)
REFERENCE^CJ10^^ ; ^X ^DD(470.01,10,9.2) S D0=$P(Y(470.01,10,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,10,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"") S X=$P(Y(470.01,10,101),U,7) S D0=Y(470.01,10,80) S D1=Y(470.01,10,81)
"^DD",470,470.01,10,9)
^
"^DD",470,470.01,10,9.01)
470.1^6;470.01^.01
"^DD",470,470.01,10,9.1)
PATIENT TRANSACTION:REFERENCE
"^DD",470,470.01,10,9.2)
S Y(470.01,10,81)=$S($D(D1):D1,1:""),Y(470.01,10,80)=$S($D(D0):D0,1:""),Y(470.01,10,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.01,11,0)
DEP/WIT^CJ1^^ ; ^X ^DD(470.01,11,9.3) S X=X S X=X S D0=Y(470.01,11,80) S D1=Y(470.01,11,81)
"^DD",470,470.01,11,.1)
D/W
"^DD",470,470.01,11,9)
^
"^DD",470,470.01,11,9.01)
470.1^7;470.01^.01
"^DD",470,470.01,11,9.1)
INTERNAL(PATIENT TRANSACTION:DEPOSIT/WITHDRAWAL)
"^DD",470,470.01,11,9.2)
S Y(470.01,11,81)=$S($D(D1):D1,1:""),Y(470.01,11,80)=$S($D(D0):D0,1:""),Y(470.01,11,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.01,11,9.3)
X ^DD(470.01,11,9.2) S D0=$P(Y(470.01,11,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,11,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"") S X=$P(Y(470.01,11,101),U,8)
"^DD",470,470.01,11,"DT")
2870706
"^DD",470,470.01,12,0)
CA/CK/OTH^CJ5^^ ; ^X ^DD(470.01,12,9.3) S Y(470.01,12,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"") S X=$P($P(Y(470.01,12,102),$C(59)_$P(Y(470.01,12,101),U,9)_":",2),$C(59),1) S D0=Y(470.01,12,80) S D1=Y(470.01,12,81)
"^DD",470,470.01,12,9)
^
"^DD",470,470.01,12,9.01)
470.1^8;470.01^.01
"^DD",470,470.01,12,9.1)
PATIENT TRANSACTION:CASH/CHECK/OTHER
"^DD",470,470.01,12,9.2)
S Y(470.01,12,81)=$S($D(D1):D1,1:""),Y(470.01,12,80)=$S($D(D0):D0,1:""),Y(470.01,12,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.01,12,9.3)
X ^DD(470.01,12,9.2) S D0=$P(Y(470.01,12,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,12,102)=$C(59)_$S($D(^DD(470.1,8,0)):$P(^(0),U,3),1:"")
"^DD",470,470.01,13,0)
P/G^CJ1^^ ; ^X ^DD(470.01,13,9.3) S X=X S X=X S D0=Y(470.01,13,80) S D1=Y(470.01,13,81)
"^DD",470,470.01,13,9)
^
"^DD",470,470.01,13,9.01)
470.1^9;470.01^.01
"^DD",470,470.01,13,9.1)
INTERNAL(PATIENT TRANSACTION:SOURCE)
"^DD",470,470.01,13,9.2)
S Y(470.01,13,81)=$S($D(D1):D1,1:""),Y(470.01,13,80)=$S($D(D0):D0,1:""),Y(470.01,13,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.01,13,9.3)
X ^DD(470.01,13,9.2) S D0=$P(Y(470.01,13,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,13,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"") S X=$P(Y(470.01,13,101),U,10)
"^DD",470,470.01,13,"DT")
2870706
"^DD",470,470.01,14,0)
FORM^CJ20^^ ; ^X ^DD(470.01,14,9.3) S X=$S('$D(^PRPF(470.2,+$P(Y(470.01,14,101),U,11),0)):"",1:$P(^(0),U,1)) S D0=Y(470.01,14,80) S D1=Y(470.01,14,81)
"^DD",470,470.01,14,9)
^
"^DD",470,470.01,14,9.01)
470.1^10;470.01^.01
"^DD",470,470.01,14,9.1)
PATIENT TRANSACTION:FORM
"^DD",470,470.01,14,9.2)
S Y(470.01,14,81)=$S($D(D1):D1,1:""),Y(470.01,14,80)=$S($D(D0):D0,1:""),Y(470.01,14,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.01,14,9.3)
X ^DD(470.01,14,9.2) S D0=$P(Y(470.01,14,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,14,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"")
"^DD",470,470.01,15,0)
CLERK^CJ30^^ ; ^X ^DD(470.01,15,9.3) S X=$S('$D(^VA(200,+$P(Y(470.01,15,101),U,14),0)):"",1:$P(^(0),U,1)) S D0=Y(470.01,15,80) S D1=Y(470.01,15,81)
"^DD",470,470.01,15,9)
^
"^DD",470,470.01,15,9.01)
470.1^13;470.01^.01
"^DD",470,470.01,15,9.1)
PATIENT TRANSACTION:PATIENT FUNDS CLERK
"^DD",470,470.01,15,9.2)
S Y(470.01,15,81)=$S($D(D1):D1,1:""),Y(470.01,15,80)=$S($D(D0):D0,1:""),Y(470.01,15,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.01,15,9.3)
X ^DD(470.01,15,9.2) S D0=$P(Y(470.01,15,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,15,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"")
"^DD",470,470.01,15,"DT")
2970213
"^DD",470,470.01,16,0)
REMARKS^CJ35^^ ; ^X ^DD(470.01,16,9.2) S D0=$P(Y(470.01,16,1),U,1) S:'$D(^PRPF(470.1,+D0,0)) D0=-1 S Y(470.01,16,101)=$S($D(^PRPF(470.1,D0,0)):^(0),1:"") S X=$P(Y(470.01,16,101),U,16) S D0=Y(470.01,16,80) S D1=Y(470.01,16,81)
"^DD",470,470.01,16,9)
^
"^DD",470,470.01,16,9.01)
470.1^15;470.01^.01
"^DD",470,470.01,16,9.1)
PATIENT TRANSACTION:REMARKS
"^DD",470,470.01,16,9.2)
S Y(470.01,16,81)=$S($D(D1):D1,1:""),Y(470.01,16,80)=$S($D(D0):D0,1:""),Y(470.01,16,1)=$S($D(^PRPF(470,D0,3,D1,0)):^(0),1:"")
"^DD",470,470.02,0)
DEFERRED CREDIT REF # SUB-FIELD^^3^4
"^DD",470,470.02,0,"NM","DEFERRED CREDIT REF #")
 
"^DD",470,470.02,0,"UP")
470
"^DD",470,470.02,.01,0)
DEFERRED CREDIT REF #^F^^0;1^K:$L(X)>15!($L(X)<1) X
"^DD",470,470.02,.01,1,0)
^.1^^0
"^DD",470,470.02,.01,3)
ANSWER MUST BE 1-15 CHARACTERS IN LENGTH
"^DD",470,470.02,.01,"DT")
2870515
"^DD",470,470.02,1,0)
DEFERRED DATE^D^^0;2^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",470,470.02,1,"DT")
2870309
"^DD",470,470.02,2,0)
AMOUNT^NJ10,2^^0;3^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>9999999)!(X<0) X
"^DD",470,470.02,2,3)
TYPE A NUMBER BETWEEN 0 AND 9999999
"^DD",470,470.02,2,"DT")
2870309
"^DD",470,470.02,3,0)
PATIENT TRANSACTION #^NJ5,0^^0;4^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1N.N) X
"^DD",470,470.02,3,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99999
"^DD",470,470.02,3,"DT")
2870309
"^DD",470,470.03,0)
SUSPENSE DATE SUB-FIELD^^1^2
"^DD",470,470.03,0,"IX","C",470.03,.01)
 
"^DD",470,470.03,0,"NM","SUSPENSE DATE")
 
"^DD",470,470.03,0,"UP")
470
"^DD",470,470.03,.01,0)
SUSPENSE DATE^MD^^0;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",470,470.03,.01,1,0)
^.1
"^DD",470,470.03,.01,1,1,0)
470^C
"^DD",470,470.03,.01,1,1,1)
S ^PRPF(470,"C",$E(X,1,30),DA(1),DA)=""
"^DD",470,470.03,.01,1,1,2)
K ^PRPF(470,"C",$E(X,1,30),DA(1),DA)
"^DD",470,470.03,.01,3)
 
"^DD",470,470.03,.01,"DT")
2870821
"^DD",470,470.03,1,0)
ID^470.04A^^1;0
"^DD",470,470.035,0)
SPECIAL REMARKS SUB-FIELD^^.01^1
"^DD",470,470.035,0,"NM","SPECIAL REMARKS")
 
"^DD",470,470.035,0,"UP")
470
"^DD",470,470.035,.01,0)
SPECIAL^W^^0;1^Q
"^DD",470,470.035,.01,"DT")
2871013
"^DD",470,470.04,0)
ID SUB-FIELD^^1^2
"^DD",470,470.04,0,"IX","B",470.04,.01)

"^DD",470,470.04,0,"NM","ID")
 
"^DD",470,470.04,0,"UP")
470.03
"^DD",470,470.04,.01,0)
ITEM ID^MF^^0;1^K:$L(X)>40!($L(X)<1) X
"^DD",470,470.04,.01,1,0)
^.1
"^DD",470,470.04,.01,1,1,0)
470.04^B
"^DD",470,470.04,.01,1,1,1)
S ^PRPF(470,DA(2),5,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",470,470.04,.01,1,1,2)
K ^PRPF(470,DA(2),5,DA(1),1,"B",$E(X,1,30),DA)
"^DD",470,470.04,.01,3)
ENTER A SHORT DESCRIPTION OF THIS SUSPENSE ITEM  DO NOT EXCEED 40 CHARACTERS
"^DD",470,470.04,.01,"DT")
2870902
"^DD",470,470.04,1,0)
FULL DESCRIPTION^470.07^^1;0
"^DD",470,470.05,0)
INCOME SOURCE SUB-FIELD^^3^4
"^DD",470,470.05,0,"IX","B",470.05,.01)

"^DD",470,470.05,0,"NM","INCOME SOURCE")
 
"^DD",470,470.05,0,"UP")
470
"^DD",470,470.05,.01,0)
INCOME SOURCE^MF^^0;1^K:$L(X)>25!($L(X)<1) X
"^DD",470,470.05,.01,1,0)
^.1
"^DD",470,470.05,.01,1,1,0)
470.05^B
"^DD",470,470.05,.01,1,1,1)
S ^PRPF(470,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",470,470.05,.01,1,1,2)
K ^PRPF(470,DA(1),6,"B",$E(X,1,30),DA)
"^DD",470,470.05,.01,3)
Enter a person/type of income for this patient.  Do not exceed 25 characters.
"^DD",470,470.05,.01,"DT")
2871211
"^DD",470,470.05,1,0)
PAYEE^RF^^0;2^K:$L(X)>20!($L(X)<1) X
"^DD",470,470.05,1,3)
Enter the name of the individual to whom the check is made payable.
"^DD",470,470.05,1,"DT")
2871211
"^DD",470,470.05,2,0)
AMOUNT^RNJ8,2^^0;3^S:X["$" X=$P(X,"$",2) K:+X'=X&(X'?.N1"."2N)!(X>99999)!(X<1) X
"^DD",470,470.05,2,3)
TYPE A NUMBER BETWEEN 1 AND 99999
"^DD",470,470.05,2,"DT")
2870309
"^DD",470,470.05,3,0)
FREQUENCY^S^D:DAILY;W:WEEKLY;M:MONTHLY;Y:YEARLY;X:UNKNOWN;V:VARIABLE;O:OTHER;^0;4^Q
"^DD",470,470.05,3,"DT")
2870706
"^DD",470,470.06,0)
GENERAL INFORMATION/REMARKS SUB-FIELD^^.01^1
"^DD",470,470.06,0,"NM","GENERAL INFORMATION/REMARKS")
 
"^DD",470,470.06,0,"UP")
470
"^DD",470,470.06,.01,0)
GENERAL INFORMATION/REMARKS^W^^0;1^Q
"^DD",470,470.06,.01,"DT")
2871109
"^DD",470,470.07,0)
FULL DESCRIPTION SUB-FIELD^^.01^1
"^DD",470,470.07,0,"NM","FULL DESCRIPTION")
 
"^DD",470,470.07,0,"UP")
470.04
"^DD",470,470.07,.01,0)
FULL DESCRIPTION^W^^0;1^Q
"^DD",470,470.07,.01,"DT")
2870824
"^DD",470,470.071,0)
FUTURE MONTH SUB-FIELD^^1^2
"^DD",470,470.071,0,"NM","FUTURE MONTH")
 
"^DD",470,470.071,0,"UP")
470
"^DD",470,470.071,.01,0)
FUTURE MONTH^DX^^0;1^S %DT="E" D ^%DT S (X,DINUM)=Y K:Y<1 X,DINUM
"^DD",470,470.071,.01,"DT")
2890127
"^DD",470,470.071,1,0)
PENDING AMOUNT^NJ12,2^^0;2^S:X["$" X=$P(X,"$",2) K:X'?."-".N.1".".2N!(X>999999999)!(X<-999999999) X
"^DD",470,470.071,1,3)
Type a Dollar Amount between -999999999 and 999999999, 2 Decimal Digits
"^DD",470,470.071,1,"DT")
2890127
"^DD",470,470.072,0)
FUTURE WEEK SUB-FIELD^^1^2
"^DD",470,470.072,0,"NM","FUTURE WEEK")
 
"^DD",470,470.072,0,"UP")
470
"^DD",470,470.072,.01,0)
FUTURE WEEK^NJ9,0X^^0;1^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",470,470.072,.01,3)
Type a Number between 1 and 999999999, 0 Decimal Digits
"^DD",470,470.072,.01,"DT")
2890127
"^DD",470,470.072,1,0)
PENDING AMOUNT^NJ12,2^^0;2^S:X["$" X=$P(X,"$",2) K:X'?."-".N.1".".2N!(X>999999999)!(X<-999999999) X
"^DD",470,470.072,1,3)
Type a Dollar Amount between -999999999 and 999999999, 2 Decimal Digits
"^DD",470,470.072,1,"DT")
2890127
"^DIC",470,470,0)
PATIENT FUNDS^470PI
"^DIC",470,470,0,"GL")
^PRPF(470,
"^DIC",470,470,"%D",0)
2^^2^2^2890103^^
"^DIC",470,470,"%D",1,0)
Primary file used for the storage of patient specific information from the
"^DIC",470,470,"%D",2,0)
Patient Funds package.
"^DIC",470,"B","PATIENT FUNDS",470)

**END**
**END**

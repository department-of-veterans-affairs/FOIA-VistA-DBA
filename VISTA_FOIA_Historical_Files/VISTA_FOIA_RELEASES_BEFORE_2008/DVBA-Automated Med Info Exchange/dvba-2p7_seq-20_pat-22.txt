$TXT Created by PAJERSKI,JAN at MNTVBB.ISC-ALBANY.VA.GOV  (KIDS) on FRIDAY, 05/22/98 at 12:41
=============================================================================
Run Date: JUL 16, 1998                     Designation: DVBA*2.7*22
Package : DVBA - AUTOMATED MED INFO Priority: Mandatory
Version : 2.7        SEQ #20                    Status: Released
=============================================================================


Subject: MAINTAIN INTEGRITY OF FILE #396.4

Category: 
  - Routine

Description: 
============

   The routine modification included in this patch has been made to address
   issues raised in NOIS SBY-0598-30063.
     
   A call is made to routine DVBCEEXM whenever using any of the following
   options:
     
      Enter a C&P Exam Request           [DVBA C ENTER C&P REQUEST]
      Add an Exam to an Existing Request [DVBA C ADD ADDITIONAL EXAM]
      Inquiry for C&P Requests           [DVBA C INQUIRY]
       
   In routine DVBCEEXM, the "APE" index on the 2507 EXAM file (#396.4) is
   used to find all exams requested for the selected patient.  If a "bad"
   cross-reference is encountered (i.e., a reference to a file #396.4 
   record that does not exist), then an error will occur and the user will
   not be able to proceed with the option.  Likewise, if the file #396.4
   record (i.e., the exam record) exists, but its associated record in the
   2507 REQUEST file (#396.3) no longer exists, then a similar error will
   occur.
    
   To prevent such errors and to maintain the integrity of the 2507 EXAM
   file, logic has been added to subroutine BLD^DVBCEEXM which will
      
      (1) delete an "APE" cross-reference if its file #396.4 record
          no longer exists, or
      
      (2) delete the file #396.4 record and all of its cross-references
          if the associated file #396.3 record no longer exists.
   
   
   ROUTINE SUMMARY:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
   
       <tab>;;2.7;AMIE;[patch list];Apr 10, 1995
   
                              CHECK^XTSUMBLD results
   
   Routine name        Before Patch     After Patch        Patch List
   ============        ============     ===========        ==========
   DVBCEEXM               6444590           8039895            22
     
    
   INSTALLATION INSTRUCTIONS:
   ==========================
   
   This patch can be loaded with users on the system. 
   
   Installation will take less than 2 minutes.  
    
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
     
   2.  Review your mapped set.  If any of the routines listed in the
       ROUTINE SUMMARY section are mapped, they should be removed
       from the mapped set at this time.
   
   3.  From the Kernel Installation and Distribution System Menu, select 
       the Installation menu.  
    
   4.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter DVBA*2.7*22):
   
       a. Backup a Transport Global - This option will create a backup 
          message of any routines exported with this patch. It will not 
          backup any other changes such as DD's or templates.  
       b. Compare Transport Global to Current System - This option will 
          allow you to view all changes that will be made when this patch 
          is installed. It compares all components of this patch 
          (routines, DD's, templates, etc.).  
       c. Verify Checksums in Transport Global - This option will allow 
          you to ensure the integrity of the routines that are in the 
          transport global.  
    
   5.  Use the Install Package(s) option and select the package DVBA*2.7*22.
   
   6.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//', respond YES.  When prompted to select the options
       you would like to place out of order, enter the following:
      
          Enter a C&P Exam Request           [DVBA C ENTER C&P REQUEST]
          Add an Exam to an Existing Request [DVBA C ADD ADDITIONAL EXAM]
          Inquiry for C&P Requests           [DVBA C INQUIRY]
      
   7.  If routines were unmapped as part of step 2, they should be returned
       to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - DVBCEEXM


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : PAJERSKI,JAN                   Date Entered : MAY 22, 1998
Completed By: RUBIN,ALICE                   Date Completed: JUL 16, 1998
Released By : NELSON,VICKI M               Date Released : JUL 16, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

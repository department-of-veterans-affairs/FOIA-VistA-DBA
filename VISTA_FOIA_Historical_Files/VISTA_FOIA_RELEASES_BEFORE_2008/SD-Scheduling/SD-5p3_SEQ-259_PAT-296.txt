
=============================================================================
Run Date: MAY 29, 2003                     Designation: SD*5.3*296
Package : SD - SCHEDULING                      Priority: Mandatory
Version : 5.3       SEQ #259                     Status: Released
                  Compliance Date: JUN 29, 2003
=============================================================================

Associated patches: (v)SD*5.3*254  <<= must be installed BEFORE `SD*5.3*296'
                    (v)SD*5.3*258  <<= must be installed BEFORE `SD*5.3*296'

Subject: DISABLING APPOINTMENT BLOCKING FUNCTIONS

Category: 
  - Routine

Description: 
============

 This patch addresses two of the changes requested in an Executive 
 Decision Memo sponsored by the VHA Chief Business Office (CBO) regarding 
 Veteran Financial Assessments. In response to Policy Board (NLB) comment 
 on the VHA Veterans Equitable Resource Allocation (VERA) process, the CBO 
 requests the removal of:
  
 (1) the current restriction that blocks transmission of outpatient 
 encounters (ACRP) and inpatient episodes of care (PTF) to the National 
 Patient Care Database (NPCD) if a veteran's updated financial assessment 
 (Means Test) information is not complete, and (2) the restriction that 
 blocks the ability to schedule future appointments for veterans whose 
 financial assessments need updating.
  
 Current policy establishes a requirement to block transmission of 
 outpatient encounters (ACRP) and inpatient episodes of care (PTF) to the 
 National Patient Care Database if the patient's current Means Test status 
 equals "Required."  This leads to under-reported workload and inaccurate 
 information in national databases.  Although this change will remove the 
 restriction, site personnel are encouraged to have the patient complete 
 Means and Copay Tests when applicable.
  
 Software has been implemented which blocks the ability to schedule future 
 appointments for veterans whose financial assessment needs updating.  VHA 
 Directive 2002-019, dated April 4, 2002, provided guidance to facilities 
 on the implementation of the appointment blocking software.  If a 
 veteran's financial assessment needs updating, the software prevents the 
 ability to make future appointments for the veteran.  This restriction 
 shall also be removed at the request of the CBO.  
  
 The provision of veterans' clinical care should be separated from the 
 administrative requirement placed on staff to obtain updated financial 
 data from the veteran.  Changing the policies and implementing these 
 software changes will lead to rapid improvements in correcting the 
 under-reporting of workload to Austin, decrease the risk of veterans not 
 receiving clinically-required future appointments, maximize revenue 
 collection and improve the accuracy of corporate-level data.
  
 This patch modifies Appointment Management to remove the Means Test 
 blocking functionality introduced in SD*5.3*250 as a result of the IG 
 Deficiency identified in the Rossio Report.  Making and checking out 
 appointments will no longer be dependent on the patient's means test 
 status.  All MT Blocking messages will be removed.
  
 Currently, clinics can be set to perform a validation on each checked out 
 encounter.  This validation is to help ensure that the workload data is 
 acceptable to the Austin National Patient Care Database.  If a means test 
 is required for a patient at checkout, an 8100 - Invalid Means Test 
 Indicator error is generated and the workload data is not sent to the 
 NPCD until such time as the means test is updated.  This patch modifies 
 the validation checks to allow a means test indicator of "U" (Means 
 Test Required).  This will allow workload to be sent to the NPCD in those 
 cases where the patient has a means test required meeting the business 
 requirements identified above. 
  
  
 This patch addresses the following E3R(s):
 ------------------------------------------
 There are no E3Rs associated with this patch
  
  
 This patch addresses the following NOIS message(s):
 ---------------------------------------------------
 There are no NOIS messages associated with this patch
  
  
 Test Sites:
 -----------
 Boston VAMC
 El Paso VAMC
 Madison VAMC
  
  
 Files Required for Installation and Implementation
 ==================================================
 The software for this patch is available on the following OI Field 
 Offices' Anonymous.Software Directories.  Use appropriate FTP capability 
 to retrieve the files.  The host file will contain four (4) KIDS builds.  
 The first build is for patch SD*5.3*296.  The second build is for 
 PX*1.0*122. The third build is for patch DG*5.3*512.  The fourth build is
 for patch EAS*1.0*32.
  
    Host file name: SD_53_P296.KID
  
            Builds: SD*5.3*296
                    PX*1.0*122
                    DG*5.3*512
                    EAS*1.0*32
  
           Albany:  ftp.fo-albany.med.va.gov
            Hines:  ftp.fo-hines.med.va.gov
   Salt Lake City:  ftp.fo-slc.med.va.gov
  
  
 File Names          Description
 ----------          -----------
 SD_53_P296.KID      Software Patch
  
 Note:  Use ASCII mode when transferring the .KID file.  
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If installed during the normal workday, it is recommended that the 
 following menu options (File #19) and all of their descendants be 
 disabled to prevent possible conflicts while running the KIDS Install. 
 Other VISTA users will not be affected.
  
   SDM                             Make Appointment
   SDI                             Check-in/Unsched. Visit
   SDMULTIBOOK                     Multiple Appointment Booking
   SDAM APPT MGT                   Appointment Management
   SDAM APPT CHECK IN/OUT          Appointment Check-in/Check-out
   SDMULTICLINIC                   Multiple Clinic Display/Book
   SDNEXT                          Find Next Available Appointment
   DG MEANS TEST COMPLETE          Complete a Required Means Test
   DG MEANS TEST ADD               Add a New Means Test
   PXCE ENCOUNTER ENTRY SUPER      PCE Encounter Data Entry - Supervisor
   PXCE ENCOUNTER ENTRY & DELETE   PCE Encounter Data Entry and Delete
   PXCE ENCOUNTER ENTRY NO DELETE  PCE Encounter Data Entry without Delete
   PXCE ENCOUNTER DATA ENTRY       PCE Encounter Data Entry
   PXCE ENCOUNTER VIEWER           PCE Encounter Viewer 
   EAS MT 0 DAY LETTER PRINT       Zero Day Letters Print
   EAS MT 30 DAY LETTER PRINT      Thirty Day Letters Print
   EAS MT 60 DAY LETTER PRINT      Sixty Day Letters Print
   EAS MT LETTERS BG PRINT         Background print job for EAS MT Letters
   EAS MT REPRINT LETTERS          Reprint Letters by Processing Date
   EAS MT REPRINT SINGLE LETTER    Reprint Single Letter
  
 Install Time - Under 10 minutes including post-install
  
  
   1.   HFS TRANSPORT GLOBAL 
        --------------------
        This file is being exported via an HFS file on the OI Field 
        Offices' Anonymous.Software Directories.  Get SD_53_P296.KID.
              
   2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only) 
        -----------------------
        Disable routine mapping on all systems for the routines listed in 
        step 3 below.  
       
        NOTE: If the routines included in this patch are not currently in
        your mapped routine set, please skip this step.
   
   3.   COMPONENTS SENT WITH PATCH 
        ------------------------
  
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
     <tab>;;5.3;Scheduling;**[patch list]**;Aug 13, 1993
  
                            CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List
 ============      ============          ===========         ==========
 SCMSVUT1               3001780              3009811     66,143,180,239,247
                                                               258,296
 SDAM2                  8261636              7920545           250,296
 SDAMWI                 7015686              6484783      63,94,241,250,296
 SDCO1                  7981563              7516464     27,132,149,193,250
                                                                 296
 SDM                   15212475             14970799       15,32,38,41,44
                                                          79,94,167,168,218
                                                           223,250,254,296 
  
         Total number of routines - 5 ****
   
  
   4.   START UP KIDS 
        -------------
        Start up the Kernel Installation and Distribution System Menu 
        [XPD MAIN]: 
    
           Edits and Distribution ...
           Utilities ...
           Installation ...
  
    Select Kernel Installation & Distribution System Option: Installation
                                                             ---
  
          Load a Distribution
          Verify Checksums in Transport Global
          Print Transport Global
          Compare Transport Global to Current System
          Backup a Transport Global
          Install Package(s)
          Restart Install of Package(s)
          Unload a Distribution
  
   5. Select Installation Option: load a Distribution
                                 ---
  
      At the "Enter a Host File:" prompt, enter SD_53_P296.KID
  
      KIDS Distribution saved on May 02, 2003@14:19:38
      Comment: PATCH SD*5.3*296 MT APPT. BLOCKING REMOVAL
  
     This Distribution contains Transport Globals for the following 
     Package(s):
        SD*5.3*296
        PX*1.0*122
        DG*5.3*512
        EAS*1.0*32
     Distribution OK!
  
     Want to Continue with Load? YES// Press ENTER
  
  
   6.   Select Installation Option: 
        --------------------------
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter SD*5.3*296):
       
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
      
   7.   Select Installation Option: Install Package(s) 
                                    ----------------
        **This is the step to start the installation of this KIDS patch: 
    
        a. Choose the Install Package(s) option to start the patch
           install and enter SD*5.3*296.
        b. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
           YES//' answer NO
        c. When prompted 'Want to DISABLE Scheduled Options, Menu 
           Options, and Protocols? YES//' answer YES 
        d. When prompted "Enter options you wish to mark as 'Out Of
           Order':"  Enter the following options:
            Make Appointment                 [SDM]
            Check-in/Unsched. Visit          [SDI]
            Multiple Appointment Booking     [SDMULTIBOOK]
            Appointment Management           [SDAM APPT MGT]
            Appointment Check-in/Check-out   [SDAM APPT CHECK IN/OUT]
            Multiple Clinic Display/Book     [SDMULTICLINIC]
            Find Next Available Appointment  [SDNEXT]
            Complete a Required Means Test   [DG MEANS TEST COMPLETE]
            Add a New Means Test             [DG MEANS TEST ADD]
            PCE Encounter Data Entry - Supervisor [PXCE ENCOUNTER ENTRY
                                                  SUPER]       
            PCE Encounter Data Entry and Delete [PXCE ENCOUNTER ENTRY &
                                                DELETE]   
            PCE Encounter Data Entry without Delete [PXCE ENCOUNTER ENTRY
                                                    NO DELETE]
            PCE Encounter Data Entry         [PXCE ENCOUNTER DATA ENTRY]
            PCE Encounter Viewer             [PXCE ENCOUNTER VIEWER]
            Zero Day Letters Print          [EAS MT 0 DAY LETTER PRINT]
            Thirty Day Letters Print        [EAS MT 30 DAY LETTER PRINT]
            Sixty Day Letters Print         [EAS MT 60 DAY LETTER PRINT]
            Background print job for EAS MT Letters  [EAS MT LETTERS BG
                                                     PRINT]
            Reprint Letters by Processing Date [EAS MT REPRINT LETTERS]
            Reprint Single Letter           [EAS MT REPRINT SINGLE LETTER]
        e. When prompted "Enter protocols you wish to mark as 'Out Of 
            Order':" press <return>.
        f. When prompted 'Delay Install (Minutes):  (0-60): 0//' press 
           <return>.
  
   8.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
        -------------------------
        Optional - Include the routines distributed with this patch
        in the mapped routine set.
      
        NOTE: This step is only necessary if you performed step 2 or 
              if you wish to include the routines in your mapped set.
  
   9.  The post-install routine for the EAS*1.0*32 patch distribution,
       EAS132PT, may be deleted once the patches are complete and this
       routine has run, updating the EAS MT LETTERS File, #713.3.

Routine Information:
====================

Routine Name:
  - SDAM2

 Before
 ======
    D BEFORE^SDAMEVT(.SDATA,DFN,SDT,SDCL,SDDA,SDCIHDL)
    I '$D(^SD(409.63,"ACI",1,+SDATA("BEFORE","STATUS"))) W !!,*7,"You 
 cannot check in this appointment." D PAUSE^VALM1 G ONEQ
    ; *** mt blocking
    S X="EASMTCHK" X ^%ZOSF("TEST") I 
 $T,$G(EASACT)'="W",$$MT^EASMTCHK(DFN," ","C",SDT) D PAUSE^VALM1 G ONEQ
    ; ***
    I $P(SDT,".")>DT W !!,*7,"It is too soon to check in this appointment."
    D PAUSE^VALM1 G ONEQ
  
  
 After
 =====
    D BEFORE^SDAMEVT(.SDATA,DFN,SDT,SDCL,SDDA,SDCIHDL)
    I '$D(^SD(409.63,"ACI",1,+SDATA("BEFORE","STATUS"))) W !!,*7,"You 
 cannot check in this appointment." D PAUSE^VALM1 G ONEQ 
    ; *** mt blocking removed
    ;S X="EASMTCHK" X ^%ZOSF("TEST") I
 $T,$G(EASACT)'="W",$$MT^EASMTCHK(DFN, "","C",SDT) D PAUSE^VALM1 G ONEQ 
    I $P(SDT,".")>DT W !!,*7,"It is too soon to check in this appointment."
    D PAUSE^VALM1 G ONEQ

Routine Checksum:

Routine Name:
  - SDAMWI

 Before
 ======
    I '$$TIME(.DFN,.SC,.SDT) S SDY=0 G ENQ
    S Y=SDT D ^SDM4 I X="^" S SDY=0 G ENQ
    ; ** SD*5.3*250 MT Blocking check
    S X="EASMTCHK" X ^%ZOSF("TEST") I $T N EASACT S EASACT="W" I 
 $$MT^EASMTCHK(DFN,+$G(SDAPTYP),EASACT) D PAUSE^VALM1 S SDY=0 G ENQ
    ;-- get sub-category for appointment type
    S SDXSCAT=$$SUB^DGSAUTL(SDAPTYP,2,"")
  
  
  
 After
 =====
    I '$$TIME(.DFN,.SC,.SDT) S SDY=0 G ENQ
    S Y=SDT D ^SDM4 I X="^" S SDY=0 G ENQ
    ; ** SD*5.3*250 MT Blocking check removed
    ;S X="EASMTCHK" X ^%ZOSF("TEST") I $T N EASACT S EASACT="W" I 
 $$MT^EASMTCHK(DFN,+$G(SDAPTYP),EASACT) D PAUSE^VALM1 S SDY=0 G ENQ
    ;-- get sub-category for appointment type
    S SDXSCAT=$$SUB^DGSAUTL(SDAPTYP,2,"")

Routine Checksum:

Routine Name:
  - SDCO1

 Before
 ======
     S:'SDDA SDDA=$$FIND^SDAM2(DFN,SDT,SDCL)
     I 'SDDA W !!,*7,">>> You cannot check out this appointment." D 
 PAUSE^VAL M1 G COQ
     S SDATA=$G(^DPT(DFN,"S",SDT,0))
     ; ** MT Blocking
     S X="EASMTCHK" X ^%ZOSF("TEST") I 
 $T,$G(EASACT)'="W",$$MT^EASMTCHK(DFN,$ P($G(SDATA),U,16),"C",$G(SDT)) D
 PAUSE^VALM1 G COQ
     ; **
     ;
     ;-- if new encounter, pass to PCE
  
  
 After
 =====
     S:'SDDA SDDA=$$FIND^SDAM2(DFN,SDT,SDCL)
     I 'SDDA W !!,*7,">>> You cannot check out this appointment." D 
 PAUSE^VAL M1 G COQ
     S SDATA=$G(^DPT(DFN,"S",SDT,0))
     ; ** MT Blocking removed
     ;S X="EASMTCHK" X ^%ZOSF("TEST") I 
 $T,$G(EASACT)'="W",$$MT^EASMTCHK(DFN, $P($G(SDATA),U,16),"C",$G(SDT)) D
 PAUSE^VALM1 G COQ
     ;
     ;-- if new encounter, pass to PCE

Routine Checksum:

Routine Name:
  - SDM

 Before:
 =======
 EN      K SDMLT1 W:$P(VAEL(9),U,2)]"" !!,?15,"MEANS TEST STATUS: 
 ",$P(VAEL(9),U, 2),!
         ; *** sck, mt blocking
         S X="EASMTCHK" X ^%ZOSF("TEST") I 
 $T,$$MT^EASMTCHK(DFN,+$G(SDAPTYP),"M") S SDAMERR="" Q
         S Y=DFN,Y(0)=^DPT(DFN,0) I VADM(7)]"" W !?3,*7,VADM(7)
  
  
 After:
 ======
 EN      K SDMLT1 W:$P(VAEL(9),U,2)]"" !!,?15,"MEANS TEST STATUS: 
 ",$P(VAEL(9),U, 2),!
         ; *** sck, mt blocking removed
         ;S X="EASMTCHK" X ^%ZOSF("TEST") I 
 $T,$$MT^EASMTCHK(DFN,+$G(SDAPTYP),"M" ) S SDAMERR="" Q
         S Y=DFN,Y(0)=^DPT(DFN,0) I VADM(7)]"" W !?3,*7,VADM(7)

Routine Checksum:

Routine Name:
  - SCMSVUT1

 Before
 ------
 ;;5.3;Scheduling;**66,143,180,239,247,258**;AUG 13,1993
 ;06/19/99 ACS - Added CPT Modifier API calls to PROCCOD(DATA)
  
 MEANSTST(DATA)  ;
     ;INPUT DATA - The means test indicator
     ;
     I '$D(DATA) Q 0
     S DATA=","_DATA_","
     I ",AS,AN,N,X,C,G,"'[DATA Q 0
     Q 1
         ;
 DEPMEANS(DATA)  ;
     ;INPUT DATA - This variable contains the number of dependents in the
     ;         first peice and the means test indicator in the second.
     ;
     N MT,DEP
     I '$D(DATA) Q 0
     S DEP=$P(DATA,U,1)
     S MT=","_$P(DATA,U,2)_","
     I DEP="XX",(",AS,N,X,"'[MT) Q 0
     Q 1
  
  
 After
 -----
 ;;5.3;Scheduling;**66,143,180,239,247,258,296**;AUG 13,1993
 ;06/19/99 ACS - Added CPT Modifier API calls to PROCCOD(DATA)
 ;04/24/03 SCK - Added allowable MT Indicator of 'U' to MEANSTST and
 DEPMEANS
  
 MEANSTST(DATA)  ;
      ;INPUT DATA - The means test indicator
      ;
      I '$D(DATA) Q 0
      S DATA=","_DATA_","
      ; ** SD*296, added 'U' means test indicator to allowed list.
      I ",AS,AN,N,X,C,G,U,"'[DATA Q 0
      Q 1
         ;
 DEPMEANS(DATA)  ;
      ;INPUT DATA - This variable contains the number of dependents in the
      ;         first peice and the means test indicator in the second.
      ;
      N MT,DEP
      I '$D(DATA) Q 0
      S DEP=$P(DATA,U,1)
      S MT=","_$P(DATA,U,2)_","
      I DEP="XX",(",AS,N,X,U,"'[MT) Q 0
      Q 1

Routine Checksum:

=============================================================================
User Information:                               
Entered By  : KOPECKY,STEPHEN C             Date Entered : APR 15, 2003
Completed By: RUDINGER,NANCY L             Date Completed: MAY 29, 2003
Released By : KOVACH,STUART                 Date Released : MAY 29, 2003
=============================================================================


Packman Mail Message:
=====================

No routines included

Released IBD*3*44 SEQ #37
Extracted from mail message
**KIDS**:IBD*3.0*44^

**INSTALL NAME**
IBD*3.0*44
"BLD",3468,0)
IBD*3.0*44^AUTOMATED INFO COLLECTION SYS^0^3010614^y
"BLD",3468,1,0)
^^5^5^3010605^
"BLD",3468,1,1,0)
When AICS is used for checkout on patients who are being treated for an SC
"BLD",3468,1,2,0)
condition and have reported MST, the encounter STATUS results in ACTION        
"BLD",3468,1,3,0)
REQUIRED.  Both the SC/MST Classification and Hidden Classification (V3.0
"BLD",3468,1,4,0)
MST) blocks ask the appropriate SC question but if answered YES, the MST
"BLD",3468,1,5,0)
question is not presented.
"BLD",3468,4,0)
^9.64PA^^
"BLD",3468,"KRN",0)
^9.67PA^19^17
"BLD",3468,"KRN",.4,0)
.4
"BLD",3468,"KRN",.401,0)
.401
"BLD",3468,"KRN",.402,0)
.402
"BLD",3468,"KRN",.403,0)
.403
"BLD",3468,"KRN",.5,0)
.5
"BLD",3468,"KRN",.84,0)
.84
"BLD",3468,"KRN",3.6,0)
3.6
"BLD",3468,"KRN",3.8,0)
3.8
"BLD",3468,"KRN",9.2,0)
9.2
"BLD",3468,"KRN",9.8,0)
9.8
"BLD",3468,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3468,"KRN",9.8,"NM",1,0)
IBDFDE0^^0^B35786828
"BLD",3468,"KRN",9.8,"NM","B","IBDFDE0",1)

"BLD",3468,"KRN",19,0)
19
"BLD",3468,"KRN",19.1,0)
19.1
"BLD",3468,"KRN",101,0)
101
"BLD",3468,"KRN",409.61,0)
409.61
"BLD",3468,"KRN",771,0)
771
"BLD",3468,"KRN",870,0)
870
"BLD",3468,"KRN",8994,0)
8994
"BLD",3468,"KRN","B",.4,.4)

"BLD",3468,"KRN","B",.401,.401)

"BLD",3468,"KRN","B",.402,.402)

"BLD",3468,"KRN","B",.403,.403)

"BLD",3468,"KRN","B",.5,.5)

"BLD",3468,"KRN","B",.84,.84)

"BLD",3468,"KRN","B",3.6,3.6)

"BLD",3468,"KRN","B",3.8,3.8)

"BLD",3468,"KRN","B",9.2,9.2)

"BLD",3468,"KRN","B",9.8,9.8)

"BLD",3468,"KRN","B",19,19)

"BLD",3468,"KRN","B",19.1,19.1)

"BLD",3468,"KRN","B",101,101)

"BLD",3468,"KRN","B",409.61,409.61)

"BLD",3468,"KRN","B",771,771)

"BLD",3468,"KRN","B",870,870)

"BLD",3468,"KRN","B",8994,8994)

"BLD",3468,"QUES",0)
^9.62^^
"BLD",3468,"REQB",0)
^9.611^2^1
"BLD",3468,"REQB",2,0)
IBD*3.0*36^1
"BLD",3468,"REQB","B","IBD*3.0*36",2)

"MBREQ")
0
"PKG",421,-1)
1^1
"PKG",421,0)
AUTOMATED INFO COLLECTION SYS^IBD^The utilities for generating a paper encounter form.
"PKG",421,20,0)
^9.402P^^
"PKG",421,22,0)
^9.49I^1^1
"PKG",421,22,1,0)
3.0^2970212^2970424^1258
"PKG",421,22,1,"PAH",1,0)
44^3010614
"PKG",421,22,1,"PAH",1,1,0)
^^5^5^3010614
"PKG",421,22,1,"PAH",1,1,1,0)
When AICS is used for checkout on patients who are being treated for an SC
"PKG",421,22,1,"PAH",1,1,2,0)
condition and have reported MST, the encounter STATUS results in ACTION        
"PKG",421,22,1,"PAH",1,1,3,0)
REQUIRED.  Both the SC/MST Classification and Hidden Classification (V3.0
"PKG",421,22,1,"PAH",1,1,4,0)
MST) blocks ask the appropriate SC question but if answered YES, the MST
"PKG",421,22,1,"PAH",1,1,5,0)
question is not presented.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IBDFDE0")
0^1^B35786828
"RTN","IBDFDE0",1,0)
IBDFDE0 ;ALB/AAS - AICS Data Entry, Check out interview; 24-FEB-96
"RTN","IBDFDE0",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**29,36,44**;APR 24, 1997
"RTN","IBDFDE0",3,0)
 ;
"RTN","IBDFDE0",4,0)
% G ^IBDFDE
"RTN","IBDFDE0",5,0)
 ;
"RTN","IBDFDE0",6,0)
CHKOUT(SDOE) ; -- ask check out questions
"RTN","IBDFDE0",7,0)
 ; -- assumes forms are always for an appointment
"RTN","IBDFDE0",8,0)
 ;    does not require provider, cpt, or diag. to input data
"RTN","IBDFDE0",9,0)
 ;    acts same as input from scanned form.
"RTN","IBDFDE0",10,0)
 ;
"RTN","IBDFDE0",11,0)
 S IBQUIT=0
"RTN","IBDFDE0",12,0)
 W !!,">>> Check out interview..."
"RTN","IBDFDE0",13,0)
 ;
"RTN","IBDFDE0",14,0)
 ; -- can't check out future appointments
"RTN","IBDFDE0",15,0)
 I $E(IBDF("APPT"),1,7)>DT W "not available at this time." G CHKOUTQ
"RTN","IBDFDE0",16,0)
 ;
"RTN","IBDFDE0",17,0)
 ; -- get encounter if not already there (won't work unless appt exists)
"RTN","IBDFDE0",18,0)
 ;I 'SDOE S SDOE=$$GETAPT(DFN,IBDF("APPT"),IBDF("CLINIC"))
"RTN","IBDFDE0",19,0)
 ;
"RTN","IBDFDE0",20,0)
 ; -- see if already done, or needs to be done first
"RTN","IBDFDE0",21,0)
 S X=$$REQ(DFN,IBDF("APPT"),IBDF("CLINIC"),SDOE,$G(IBDCKOUT))
"RTN","IBDFDE0",22,0)
 I X<1 W $S(X=0:"no questions.",X=-2:"not required",X=-3:"already completed today",1:"already complete.") G CHKOUTQ
"RTN","IBDFDE0",23,0)
 W "required."
"RTN","IBDFDE0",24,0)
 ;
"RTN","IBDFDE0",25,0)
 ; -- ask eligibility/appt type ;not unless asked for
"RTN","IBDFDE0",26,0)
 ;S ELIG=$$ELAP^SDPCE(DFN,IBDF("APPT"))
"RTN","IBDFDE0",27,0)
 ;
"RTN","IBDFDE0",28,0)
 ; -- ask checkout Date
"RTN","IBDFDE0",29,0)
 S IBDPRE=$G(IBDCO("CO"))
"RTN","IBDFDE0",30,0)
 S X=$S($G(IBDCO("CO"))="":"NOW",1:$$FMTE^XLFDT(IBDCO("CO")))
"RTN","IBDFDE0",31,0)
 S IBDCO("CO")=$E($$ASKDT("Checkout Date: ",X,"",IBDF("APPT"),$$FMADD^XLFDT(DT,1)),1,12)
"RTN","IBDFDE0",32,0)
 I $G(IBDCO("CO"))="" K IBDCO W "   Checkout Deleted!" G CHKOUTQ
"RTN","IBDFDE0",33,0)
 I $G(IBDCO("CO"))<0 K:IBDPRE="" IBDCO("CO") W:IBDPRE="" "   Checkout Deleted!" S:IBDPRE IBDCO("CO")=IBDPRE S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",34,0)
 ;
"RTN","IBDFDE0",35,0)
 ; -- ask classifications
"RTN","IBDFDE0",36,0)
 I $$SC^SDCO22(DFN,+SDOE)!($D(IBDF("SC"))) S IBDCO("SC")=$$ASKYN("Was treatment for SC Condition",$G(IBDCO("SC")),"D SCCOND^IBDFN4") D
"RTN","IBDFDE0",37,0)
 .I $G(IBDCO("SC"))="" K IBDCO("SC") W "   Deleted!"
"RTN","IBDFDE0",38,0)
 I $G(IBDCO("SC"))<0 K IBDCO("SC") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",39,0)
 ;
"RTN","IBDFDE0",40,0)
 I $G(IBDCO("SC")) G MST ; if service connected others don't apply
"RTN","IBDFDE0",41,0)
 ;
"RTN","IBDFDE0",42,0)
 I $$AO^SDCO22(DFN,+SDOE)!($D(IBDF("AO"))) S IBDCO("AO")=$$ASKYN("Was treatment related to Agent Orange Exposure",$G(IBDCO("AO"))) D
"RTN","IBDFDE0",43,0)
 .I $G(IBDCO("AO"))="" K IBDCO("AO") W "   Deleted!"
"RTN","IBDFDE0",44,0)
 I $G(IBDCO("AO"))<0 K IBDCO("AO") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",45,0)
 ;
"RTN","IBDFDE0",46,0)
 I $$IR^SDCO22(DFN,+SDOE)!($D(IBDF("IR"))) S IBDCO("IR")=$$ASKYN("Was treatment related to  Ionizing Radiation Exposure",$G(IBDCO("IR"))) D
"RTN","IBDFDE0",47,0)
 .I $G(IBDCO("IR"))="" K IBDCO("IR") W "   Deleted!"
"RTN","IBDFDE0",48,0)
 I $G(IBDCO("IR"))<0 K IBDCO("IR") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",49,0)
 ;
"RTN","IBDFDE0",50,0)
 I $$EC^SDCO22(DFN,+SDOE)!($D(IBDF("EC"))) S IBDCO("EC")=$$ASKYN("Was treatment related to Environmental Contaminant Exposure",$G(IBDCO("EC"))) D
"RTN","IBDFDE0",51,0)
 .I $G(IBDCO("EC"))="" K IBDCO("EC") W "   Deleted!"
"RTN","IBDFDE0",52,0)
 I $G(IBDCO("EC"))<0 K IBDCO("EC") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",53,0)
 ;
"RTN","IBDFDE0",54,0)
MST ;- Ask Military Sexual Trauma question (patch IBD*3*36)
"RTN","IBDFDE0",55,0)
 I $$MST^SDCO22(DFN,+SDOE)!($D(IBDF("MST"))) S IBDCO("MST")=$$ASKYN("Was treatment related to MST (Note: ask provider only)",$G(IBDCO("MST"))) D
"RTN","IBDFDE0",56,0)
 .I $G(IBDCO("MST"))="" K IBDCO("MST") W "   Deleted!"
"RTN","IBDFDE0",57,0)
 I $G(IBDCO("MST"))<0 K IBDCO("MST") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",58,0)
 ;
"RTN","IBDFDE0",59,0)
 I '$D(IBDCO) W "no questions."
"RTN","IBDFDE0",60,0)
CHKOUTQ I IBQUIT W !!,"Required information missing."
"RTN","IBDFDE0",61,0)
 K IBDPRE,SDFN
"RTN","IBDFDE0",62,0)
 Q
"RTN","IBDFDE0",63,0)
 ;
"RTN","IBDFDE0",64,0)
ASKYN(QUES,DEFLT,EXHELP) ; -- ask yes/no question
"RTN","IBDFDE0",65,0)
 N DIR,DIRUT,DUOUT,DTOUT
"RTN","IBDFDE0",66,0)
 I $G(EXHELP)'="" S DIR("??")="^"_EXHELP
"RTN","IBDFDE0",67,0)
 S DIR("A")=QUES,DIR(0)="YO",DIR("B")=$S($G(DEFLT):"Yes",1:"No") D ^DIR
"RTN","IBDFDE0",68,0)
 I $D(DIRUT),Y'="" S Y=-1 ;i y="" user typed "@"
"RTN","IBDFDE0",69,0)
 I $D(DTOUT)!($D(DUOUT)) S IBQUIT=1,Y=-1
"RTN","IBDFDE0",70,0)
 Q Y
"RTN","IBDFDE0",71,0)
 ;
"RTN","IBDFDE0",72,0)
ASKDT(QUES,DEFLT,PARAM,EARLY,LATEST,EXHELP) ; -- ask date questions
"RTN","IBDFDE0",73,0)
 N X,Y,DIR,DIRUT,DTOUT,DUOUT
"RTN","IBDFDE0",74,0)
 S DIR(0)="DOA^"_$E($G(EARLY),1,7)_":"_$G(LATEST)_":"_$S($G(PARAM)'="":PARAM,1:"AERX")
"RTN","IBDFDE0",75,0)
 I $G(QUES)'="" S DIR("A")=QUES
"RTN","IBDFDE0",76,0)
 I $G(DEFLT)'="" S DIR("B")=DEFLT
"RTN","IBDFDE0",77,0)
 I $L($G(EXHELP)) S DIR("??")="^"_EXHELP
"RTN","IBDFDE0",78,0)
 S DIR("?")="This response requires an appointment Date and Time"
"RTN","IBDFDE0",79,0)
 D ^DIR
"RTN","IBDFDE0",80,0)
 I $D(DIRUT),Y'="" S Y=-1 ;i y="" user typed "@"
"RTN","IBDFDE0",81,0)
 I $D(DTOUT)!($D(DUOUT)) S IBQUIT=1,Y=-1
"RTN","IBDFDE0",82,0)
 Q Y
"RTN","IBDFDE0",83,0)
 ;
"RTN","IBDFDE0",84,0)
REQ(DFN,APPT,CLINIC,SDOE,IBDC) ; is checkout interview required for this appt.
"RTN","IBDFDE0",85,0)
 N IBDY S IBDY=0
"RTN","IBDFDE0",86,0)
 I $$INP^SDAM2(DFN,APPT)="I" G REQQ ; inpatient appointment
"RTN","IBDFDE0",87,0)
 I '$$CLINIC^SDAMU(CLINIC) G REQQ ; not a clinic or non-count
"RTN","IBDFDE0",88,0)
 I $$REQ^SDM1A(APPT)'="CO" G REQQ ; checkout not required
"RTN","IBDFDE0",89,0)
 I $$EXCL(CLINIC,APPT) S IBDY=-2 G REQQ ; clinic stop codes are exempt
"RTN","IBDFDE0",90,0)
 I $$COMDT^SDCOU(+SDOE) S IBDY=-1 G REQQ ;process completed
"RTN","IBDFDE0",91,0)
 I $P($G(IBDC),".")=DT S IBDY=-3 G REQQ ;already checked out today
"RTN","IBDFDE0",92,0)
 S IBDY=1
"RTN","IBDFDE0",93,0)
REQQ K SDFN
"RTN","IBDFDE0",94,0)
 Q IBDY
"RTN","IBDFDE0",95,0)
 ;
"RTN","IBDFDE0",96,0)
EXCL(CL,DAT) ; -- are clinic stop codes exempt from classifications
"RTN","IBDFDE0",97,0)
 ; -- 1=yes, 0=no
"RTN","IBDFDE0",98,0)
 ;    original logic from exoe^sdcou2 except uses clinic stops rather
"RTN","IBDFDE0",99,0)
 ;    than outpatient encounter stops
"RTN","IBDFDE0",100,0)
 ;
"RTN","IBDFDE0",101,0)
 N SC1,SC2,EXMPT
"RTN","IBDFDE0",102,0)
 S SC1=$P($G(^SC(CL,0)),"^",7),SC2=$P($G(^SC(CL,0)),"^",18)
"RTN","IBDFDE0",103,0)
 I $$EX^SDCOU2(SC1,$G(DAT)) D
"RTN","IBDFDE0",104,0)
 .S EXMPT=1
"RTN","IBDFDE0",105,0)
 .I SC2,'$$EX^SDCOU2(SC2,$G(DAT)) S EXMPT=0
"RTN","IBDFDE0",106,0)
EXCLQ Q +$G(EXMPT)
"RTN","IBDFDE0",107,0)
 ;
"RTN","IBDFDE0",108,0)
WRITE(SDOE,CNT) ; -- print checkout interview
"RTN","IBDFDE0",109,0)
 W !?3,"Check out interview..."
"RTN","IBDFDE0",110,0)
 S X=$$REQ(DFN,IBDF("APPT"),IBDF("CLINIC"),SDOE)
"RTN","IBDFDE0",111,0)
 I X<1 W $S(X=0:"no questions.",1:"already complete.") G WRITEQ
"RTN","IBDFDE0",112,0)
 W "required."
"RTN","IBDFDE0",113,0)
 G:$D(IBDCO)'>1 WRITEQ
"RTN","IBDFDE0",114,0)
 ;D:$G(CNT)="" DISP
"RTN","IBDFDE0",115,0)
 D:$G(CNT)'="" LIST
"RTN","IBDFDE0",116,0)
 ;
"RTN","IBDFDE0",117,0)
WRITEQ Q
"RTN","IBDFDE0",118,0)
 ;
"RTN","IBDFDE0",119,0)
DISP ; -- display the old way
"RTN","IBDFDE0",120,0)
 I $D(IBDCO("CO")) W !,"                 Checkout Date: ",$$FMTE^XLFDT(IBDCO("CO"))
"RTN","IBDFDE0",121,0)
 I $D(IBDCO("SC")) W !,"    Treatment for SC Condition: ",$S(IBDCO("SC")=1:"YES",1:"NO")
"RTN","IBDFDE0",122,0)
 I $D(IBDCO("AO")) W !,"         Agent Orange Exposure: ",$S(IBDCO("AO")=1:"YES",1:"NO")
"RTN","IBDFDE0",123,0)
 I $D(IBDCO("IR")) W !,"   Ionizing Radiation Exposure: ",$S(IBDCO("IR")=1:"YES",1:"NO")
"RTN","IBDFDE0",124,0)
 I $D(IBDCO("EC")) W !,"    Environmental Contaminants: ",$S(IBDCO("EC")=1:"YES",1:"NO")
"RTN","IBDFDE0",125,0)
 I $D(IBDCO("MST")) W !,"                          MST: ",$S(IBDCO("MST")=1:"YES",1:"NO")
"RTN","IBDFDE0",126,0)
 Q
"RTN","IBDFDE0",127,0)
 ;
"RTN","IBDFDE0",128,0)
LIST ; -- display with a list
"RTN","IBDFDE0",129,0)
 I $D(IBDCO("CO")) S CNT=CNT+1 W !?3,CNT,?7,"Checkout Date ",?31,$$FMTE^XLFDT(IBDCO("CO"))
"RTN","IBDFDE0",130,0)
 I $D(IBDCO("SC")) S CNT=CNT+1 W !?3,CNT,?7,"SC Condition ",?31,$S(IBDCO("SC")=1:"YES",1:"NO")
"RTN","IBDFDE0",131,0)
 I $D(IBDCO("AO")) S CNT=CNT+1 W !?3,CNT,?7,"Agent Orange ",?31,$S(IBDCO("AO")=1:"YES",1:"NO")
"RTN","IBDFDE0",132,0)
 I $D(IBDCO("IR")) S CNT=CNT+1 W !?3,CNT,?7,"Ionizing Radiation ",?31,$S(IBDCO("IR")=1:"YES",1:"NO")
"RTN","IBDFDE0",133,0)
 I $D(IBDCO("EC")) S CNT=CNT+1 W !?3,CNT,?7,"Env. Contaminants ",?31,$S(IBDCO("EC")=1:"YES",1:"NO")
"RTN","IBDFDE0",134,0)
 I $D(IBDCO("MST")) S CNT=CNT+1 W !?3,CNT,?7,"MST ",?31,$S(IBDCO("MST")=1:"YES",1:"NO")
"RTN","IBDFDE0",135,0)
 Q
"VER")
8.0^22
**END**
**END**

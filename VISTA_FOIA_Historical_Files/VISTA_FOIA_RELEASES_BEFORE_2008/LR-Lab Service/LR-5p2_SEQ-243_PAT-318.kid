Released LR*5.2*318 SEQ #243
Extracted from mail message
**KIDS**:LR*5.2*318^

**INSTALL NAME**
LR*5.2*318
"BLD",5446,0)
LR*5.2*318^LAB SERVICE^0^3041025^y
"BLD",5446,1,0)
^^4^4^3040727^
"BLD",5446,1,1,0)
This patch addresses 2 NOIS calls:
"BLD",5446,1,2,0)
 
"BLD",5446,1,3,0)
1) BRK-1095-12897  PROBLEMS WITH SUMMARY LIST (SUPERVISORS')
"BLD",5446,1,4,0)
2) ECH-0404-50682  ERROR AT P1+10^LRLISTE
"BLD",5446,4,0)
^9.64PA^^
"BLD",5446,"ABPKG")
n
"BLD",5446,"KRN",0)
^9.67PA^8989.52^19
"BLD",5446,"KRN",.4,0)
.4
"BLD",5446,"KRN",.401,0)
.401
"BLD",5446,"KRN",.402,0)
.402
"BLD",5446,"KRN",.403,0)
.403
"BLD",5446,"KRN",.5,0)
.5
"BLD",5446,"KRN",.84,0)
.84
"BLD",5446,"KRN",3.6,0)
3.6
"BLD",5446,"KRN",3.8,0)
3.8
"BLD",5446,"KRN",9.2,0)
9.2
"BLD",5446,"KRN",9.8,0)
9.8
"BLD",5446,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",5446,"KRN",9.8,"NM",1,0)
LRMIBUG^^0^B7076525
"BLD",5446,"KRN",9.8,"NM",2,0)
LRLISTE^^0^B24926511
"BLD",5446,"KRN",9.8,"NM","B","LRLISTE",2)

"BLD",5446,"KRN",9.8,"NM","B","LRMIBUG",1)

"BLD",5446,"KRN",19,0)
19
"BLD",5446,"KRN",19.1,0)
19.1
"BLD",5446,"KRN",101,0)
101
"BLD",5446,"KRN",409.61,0)
409.61
"BLD",5446,"KRN",771,0)
771
"BLD",5446,"KRN",870,0)
870
"BLD",5446,"KRN",8989.51,0)
8989.51
"BLD",5446,"KRN",8989.52,0)
8989.52
"BLD",5446,"KRN",8994,0)
8994
"BLD",5446,"KRN","B",.4,.4)

"BLD",5446,"KRN","B",.401,.401)

"BLD",5446,"KRN","B",.402,.402)

"BLD",5446,"KRN","B",.403,.403)

"BLD",5446,"KRN","B",.5,.5)

"BLD",5446,"KRN","B",.84,.84)

"BLD",5446,"KRN","B",3.6,3.6)

"BLD",5446,"KRN","B",3.8,3.8)

"BLD",5446,"KRN","B",9.2,9.2)

"BLD",5446,"KRN","B",9.8,9.8)

"BLD",5446,"KRN","B",19,19)

"BLD",5446,"KRN","B",19.1,19.1)

"BLD",5446,"KRN","B",101,101)

"BLD",5446,"KRN","B",409.61,409.61)

"BLD",5446,"KRN","B",771,771)

"BLD",5446,"KRN","B",870,870)

"BLD",5446,"KRN","B",8989.51,8989.51)

"BLD",5446,"KRN","B",8989.52,8989.52)

"BLD",5446,"KRN","B",8994,8994)

"BLD",5446,"QUES",0)
^9.62^^
"BLD",5446,"REQB",0)
^9.611^1^1
"BLD",5446,"REQB",1,0)
LR*5.2*201^1
"BLD",5446,"REQB","B","LR*5.2*201",1)
 
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950611
"PKG",26,22,1,"PAH",1,0)
318^3041025^520637416
"PKG",26,22,1,"PAH",1,1,0)
^^4^4^3041025
"PKG",26,22,1,"PAH",1,1,1,0)
This patch addresses 2 NOIS calls:
"PKG",26,22,1,"PAH",1,1,2,0)
 
"PKG",26,22,1,"PAH",1,1,3,0)
1) BRK-1095-12897  PROBLEMS WITH SUMMARY LIST (SUPERVISORS')
"PKG",26,22,1,"PAH",1,1,4,0)
2) ECH-0404-50682  ERROR AT P1+10^LRLISTE
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","LRLISTE")
0^2^B24926511
"RTN","LRLISTE",1,0)
LRLISTE ;SLC/RWF/CJS/DALISC/FHS/JBM/DRH - LAB RESULTS LIST, EXTENDED ;2/19/91  10:39
"RTN","LRLISTE",2,0)
 ;;5.2;LAB SERVICE;**201,318**;Sep 27, 1994
"RTN","LRLISTE",3,0)
EN ;
"RTN","LRLISTE",4,0)
 W !,"Summary List (Supervisers')  >>> NOT FOR WARD USE <<<",! K ^TMP($J) D DATE^LRWU G END:Y<1
"RTN","LRLISTE",5,0)
 S LRAD=Y,LRRDT=$$FMTE^XLFDT(LRAD,"5Z")
"RTN","LRLISTE",6,0)
 S DIC="^LRO(68,",DIC(0)="AEQZ",LRNL=0,$P(LRDASH,"-",IOM)="",$P(LRDASH(2),"=",IOM)=""
"RTN","LRLISTE",7,0)
 F J=0:0 D ^DIC Q:Y<1  D CHKDAT^LRLSTWRL Q:Y<1  S DIC("A")="ANOTHER ONE: ",LRNL=LRNL+1,LRAA(LRNL)=+Y,LRAA(LRNL,1)=$P(Y,U,2),LRSS(LRNL)=$P(Y(0),U,2)
"RTN","LRLISTE",8,0)
 K DIC G EN:LRNL<1
"RTN","LRLISTE",9,0)
C R !,"1 ACCESSION NUMBER",!,"2 PATIENT",!,"LIST BY: ",LRX:DTIME G END:LRX["^"!(LRX=""),C:"12"'[LRX!(LRX>2)
"RTN","LRLISTE",10,0)
 D RANGE
"RTN","LRLISTE",11,0)
ALL W !!?5,"Do you wish to see all tests including Common Accessions " S %=1 D YN^DICN G:%=0 ALL G:%=-1 END S:%=1 LRALL=""
"RTN","LRLISTE",12,0)
 S %ZIS="MQ" D ^%ZIS G END:POP
"RTN","LRLISTE",13,0)
 I $D(IO("Q")) S ZTRTN="DQ^LRLISTE",ZTIO=ION,ZTDESC="Summary List (Supervisors')",ZTSAVE("LR*")="" D ^%ZTLOAD G END
"RTN","LRLISTE",14,0)
C2 ;
"RTN","LRLISTE",15,0)
 U IO S $P(LRDASH(2),"=",IOM)="" D HDR G L10:LRX=1,L20:LRX=2,END
"RTN","LRLISTE",16,0)
L10 I $D(LRALL) F LRAA=1:1:LRNL S L=LRFAN-1 F  S L=$O(^LRO(68,LRAA(LRAA),1,LRAD,1,L)) Q:(L>LRLAN)!(L<LRFAN)  S ^TMP($J,L,LRAA)=""
"RTN","LRLISTE",17,0)
 I '$D(LRALL) F LRAA=1:1:LRNL S L=LRFAN-1 F  S L=$O(^LRO(68,LRAA(LRAA),1,LRAD,1,L)) Q:(L>LRLAN)!(L<LRFAN)  I $O(^(L,4,0)) S ^TMP($J,L,LRAA)=""
"RTN","LRLISTE",18,0)
 S LRAN=0 F  S LRAN=$O(^TMP($J,LRAN)) Q:LRAN<1  S LRAA=0 F  S LRAA=$O(^TMP($J,LRAN,LRAA)) Q:LRAA<1  D PR G:$D(DTOUT)!($D(DUOUT)) END
"RTN","LRLISTE",19,0)
 W !!,"END OF REPORT",! G END
"RTN","LRLISTE",20,0)
L20 F LRAA=1:1:LRNL D L22
"RTN","LRLISTE",21,0)
 S LRPNM=""
"RTN","LRLISTE",22,0)
 F  S LRPNM=$O(^TMP($J,LRPNM)) Q:LRPNM=""  S PNM=$P(LRPNM,U),SSN=$P(LRPNM,U,2) D L26 Q:$D(DTOUT)!($D(DUOUT))
"RTN","LRLISTE",23,0)
 G END
"RTN","LRLISTE",24,0)
L22 S LRAN=LRFAN-1 F  S LRAN=$O(^LRO(68,LRAA(LRAA),1,LRAD,1,LRAN)) Q:LRAN<1!(LRAN>LRLAN)  D L23
"RTN","LRLISTE",25,0)
 Q
"RTN","LRLISTE",26,0)
L23 I '$D(LRALL),'$O(^LRO(68,LRAA(LRAA),1,LRAD,1,LRAN,4,0)) Q
"RTN","LRLISTE",27,0)
 Q:'$D(^LRO(68,LRAA(LRAA),1,LRAD,1,LRAN,0))  Q:'$D(^(3))  S LRDFN=+^(0),LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3) D DEM^LRX S:$L(PNM) ^TMP($J,PNM_U_SSN,LRAA,LRAN)=DOB Q
"RTN","LRLISTE",28,0)
L26 S LRAA=0 F  S LRAA=$O(^TMP($J,LRPNM,LRAA)) Q:LRAA<1  D L28 Q:$D(DTOUT)!($D(DUOUT))
"RTN","LRLISTE",29,0)
 Q
"RTN","LRLISTE",30,0)
L28 S LRAN=0 F  S LRAN=$O(^TMP($J,LRPNM,LRAA,LRAN)) Q:LRAN<1  D PR Q:$D(DTOUT)!($D(DUOUT))
"RTN","LRLISTE",31,0)
 Q
"RTN","LRLISTE",32,0)
PR Q:'$D(^LRO(68,LRAA(LRAA),1,LRAD,1,LRAN,3))  S LRIDT=9999999-^(3),LRDFN=+^(0),LRINT=$P(^(0),U,5),LRODT=$P(^(0),U,4) G PR1:LRAD<1
"RTN","LRLISTE",33,0)
PR1 Q:$G(LREND)  S LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3) D:$G(LRX)=1 DEM^LRX
"RTN","LRLISTE",34,0)
 I IOST?1"P".E&($Y>(IOSL-16)) D HDR ;ONLY FOR USE ON A PRINTER
"RTN","LRLISTE",35,0)
 D LINECHK Q:$G(LREND)=1
"RTN","LRLISTE",36,0)
 W !,LRDASH,!!,PNM,?40,SSN,"  ",LRAA(LRAA,1)," ACC:  ",$S($D(^LRO(68,LRAA(LRAA),1,LRAD,1,LRAN,.2)):^(.2),1:"no acc") S:IOSL<66 S=S+3 D LINECHK Q:$G(LREND)=1
"RTN","LRLISTE",37,0)
 I LRINT S LRINT=$S($D(^LRO(69,LRODT,1,LRINT,0)):$P(^(0),U,2),1:"") I LRINT S LRINT=$P(^VA(200,LRINT,0),U,1) W !,"Person placing order: ",LRINT D LINECHK Q:$G(LREND)=1  S:IOSL<66 S=S+1
"RTN","LRLISTE",38,0)
 I LRLONG,$O(^LRO(68,LRAA(LRAA),1,LRAD,1,LRAN,4,0)) D
"RTN","LRLISTE",39,0)
 . K DR,DA S DA(3)=LRAA(LRAA),DA(2)=LRAD,DA(1)=LRAN,DIC="^LRO(68,"_DA(3)_",1,"_DA(2)_",1,"_DA(1)_",4,",(DR,DA)=0 F  S DA=$O(@(DIC_"DA)")) Q:'DA!($D(DTOUT))!($D(DUOUT))  D EN^LRDIQ D LINECHK Q:$G(LREND)=1
"RTN","LRLISTE",40,0)
 D LINECHK Q:$G(LREND)=1
"RTN","LRLISTE",41,0)
 W !,?40,$S($D(^LRO(68,LRAA(LRAA),1,LRAD,1,LRAN,.1)):"  ORD: "_^(.1),1:"") S:IOSL<66 S=S+1
"RTN","LRLISTE",42,0)
 IF '$D(^LR(LRDFN,LRSS(LRAA),LRIDT,0)) W !," ACCESSION #: ",LRAN,"  >>>>ERROR PLEASE NOTIFY SYSTEM MANAGER<<<<<",! Q
"RTN","LRLISTE",43,0)
 S LRCP=$P(^LR(LRDFN,LRSS(LRAA),LRIDT,0),"^",5)
"RTN","LRLISTE",44,0)
 I LRCP="" S LRCP="UNKNOWN"
"RTN","LRLISTE",45,0)
 S LRSP=$P($G(^LAB(61,LRCP,0)),U) D LINECHK Q:$G(LREND)=1  W:$L(LRSP) ?65,LRSP S:IOSL<66 S=S+1
"RTN","LRLISTE",46,0)
 D LINECHK Q:$G(LREND)=1  W ! S DIC="^LR("_LRDFN_","""_LRSS(LRAA)_""",",DR="0"_$S(LRLONG:":99999999",1:""),DA=LRIDT S:IOSL<66 S=S+1 D EN^LRDIQ
"RTN","LRLISTE",47,0)
 Q
"RTN","LRLISTE",48,0)
END D ^%ZISC K ^TMP($J),LRPNM,LRDATE,LRLONG,ZTRTN,ZTIO,ZTDESC,ZTSAVE,ZTSK,%H,C1,D0,DA,DICS,DL,DSC,DX,L,LAST,LRAA,LRAD,LRALL,LRDASH,LRDX,LREDT,LREND,LRFAN,LRIN,LRINT,LRLAN,LRLINE,LRNL,LRSET,LRSS,LRWDTL,LRRDT,LRRPG,LRX,POP,IO("Q"),LRSP
"RTN","LRLISTE",49,0)
 K DTOUT,DUOUT,DIC,LRCP Q
"RTN","LRLISTE",50,0)
HDR I '$D(LRRPG) S LRRPG=1 G HD1
"RTN","LRLISTE",51,0)
HD1 W @IOF,!,"SUMMARY LIST (SUPERVISORS') FOR DATE: ",LRRDT,?(IOM-12),"PAGE: ",LRRPG,!
"RTN","LRLISTE",52,0)
 W "     >> NOT FOR WARD USE <<" W:$L(LRRDT)=4 ?40,"Report for date: ",$$FMTE^XLFDT(LRAD,1) W !
"RTN","LRLISTE",53,0)
 W !,"ACCESSION AREA(S) :" F ZZ=1:1:LRNL W LRAA(ZZ,1),"   "
"RTN","LRLISTE",54,0)
 W !,LRDASH(2)
"RTN","LRLISTE",55,0)
 S LRRPG=LRRPG+1
"RTN","LRLISTE",56,0)
 S:IOSL<66 S=2
"RTN","LRLISTE",57,0)
 Q
"RTN","LRLISTE",58,0)
LINECHK ;
"RTN","LRLISTE",59,0)
 I IOST?1"P".E D PAGECHK Q
"RTN","LRLISTE",60,0)
 I $D(DX(0)) X DX(0)
"RTN","LRLISTE",61,0)
 I $D(DUOUT) S LREND=1
"RTN","LRLISTE",62,0)
 ;I S>IOSL-2 S S=0
"RTN","LRLISTE",63,0)
 Q
"RTN","LRLISTE",64,0)
PAGECHK ;
"RTN","LRLISTE",65,0)
 I IOST?1"P".E&($Y>(IOSL-16)) D HDR ;ONLY FOR USE ON A PRINTER
"RTN","LRLISTE",66,0)
 Q
"RTN","LRLISTE",67,0)
RANGE R !,"(L)ONG OR (S)HORT LISTING: S//",X:DTIME S LRLONG=(X["L") I X["?" W !?5,"Long listing shows verified results where short list does not",! G RANGE
"RTN","LRLISTE",68,0)
 D LRAN^LRWU3 Q
"RTN","LRLISTE",69,0)
 ;
"RTN","LRLISTE",70,0)
DQ U IO S:$D(ZTQUEUED) ZTREQ="@" G C2
"RTN","LRMIBUG")
0^1^B7076525
"RTN","LRMIBUG",1,0)
LRMIBUG ;AVAMC/REG,SLC/CJS,BA- DISPLAY ORGANISMS ;6/5/89  09:21 ;
"RTN","LRMIBUG",2,0)
 ;;5.2;LAB SERVICE;**318**;Sep 27, 1994
"RTN","LRMIBUG",3,0)
BUGS Q:$G(LREND)  D KVAR^VADPT S LR1PASS=1 F I=0:0 D BUGIN Q:Y<1  S LRBG1=Y(0) D:$P(Y,U,3)&($P(LRPARAM,U,14))&($P($G(^LRO(68,LRAA,0)),U,16)) ETIO^LRCAPV1 D BUGGER,BUGOUT
"RTN","LRMIBUG",4,0)
 D BUGOUT K LR1PASS,LRBG,LRBI,LRBG1
"RTN","LRMIBUG",5,0)
 Q
"RTN","LRMIBUG",6,0)
BUGIN S DIC=DIC_DA_",3,",LRODA=DA,LRODIE=DIE,DA(1)=DA,DA(2)=LRDFN,DIC(0)="AEFLMOQZ",DIC("S")="I 1 Q:$D(^LR(DA(2),""MI"",DA(1),3,+X))  Q:'$D(^LAB(61.2,+X,0))  I $L($P(^(0),U,5)),""PVRBFM""[$P(^(0),U,5)"
"RTN","LRMIBUG",7,0)
 S:'$D(@(DIC_"0)")) ^(0)="^63.3PA" S LRSPEC=$P(^LR(LRDFN,"MI",LRIDT,0),U,5)
"RTN","LRMIBUG",8,0)
 W ! S LRBG=0 F I=0:0 S LRBG=$O(^LR(LRDFN,"MI",DA,3,LRBG)) Q:LRBG<1  S LRBUG=+^(LRBG,0) K DIC("B") S:LRBG=1&LR1PASS DIC("B")=$P(^LAB(61.2,+^LR(LRDFN,"MI",DA,3,1,0),0),U) W !?2,LRBG,?5,$P(^LAB(61.2,LRBUG,0),U)
"RTN","LRMIBUG",9,0)
 S DLAYGO=63 D ^DIC K DIC("B"),DIC("S"),DLAYGO S LR1PASS=0
"RTN","LRMIBUG",10,0)
 Q
"RTN","LRMIBUG",11,0)
BUGGER S LRNB=$S($L($P(^LAB(61.2,+LRBG1,0),U,4)):$P(^(0),U,4),1:LRMIDEF),LRBI=$P(^(0),U,5)
"RTN","LRMIBUG",12,0)
 S DIE=DIC,DA=+Y D TEMP,^DIE,DELINT I '$D(Y) Q
"RTN","LRMIBUG",13,0)
 W !,"Any other antibiotics" S %=2 D YN^DICN I %'=1 Q
"RTN","LRMIBUG",14,0)
 I '$L(LRMIOTH) S DR="S Y=200;2.0000001:200",DR(2,63.32)=.01 D ^DIE Q
"RTN","LRMIBUG",15,0)
 K DR S LRNB=LRMIOTH D TEMP F J=1:1 S K=$P(DR,";",J) Q:+K'=K!(K>2)!'$L(K)
"RTN","LRMIBUG",16,0)
 S (DR,DR(1,63.3))=$P(DR,";",J,245) D ^DIE
"RTN","LRMIBUG",17,0)
 Q
"RTN","LRMIBUG",18,0)
TEMP S LRNB=+$O(^DIE("B",$S($L(LRNB):LRNB,1:0),0))
"RTN","LRMIBUG",19,0)
 I LRNB,$D(^DIE(LRNB,"DR",3,63.3)) S (DR,DR(1,63.3))=^(63.3),J=0 F I=0:0 S J=$O(^DIE(LRNB,"DR",3,63.3,J)) Q:J<1  S DR(1,63.3,J)=^(J)
"RTN","LRMIBUG",20,0)
 I 'LRNB!('$D(^DIE(LRNB,"DR",3,63.3))) S DR=$S(($L(LRBI)&("MFBVRP"[LRBI)):".01;1;2",1:".01;1;2:195")
"RTN","LRMIBUG",21,0)
 Q
"RTN","LRMIBUG",22,0)
BUGOUT S (DIE,DIC)=LRODIE,DA=LRODA,DA(1)=LRDFN K DR(1,63.3)
"RTN","LRMIBUG",23,0)
 Q
"RTN","LRMIBUG",24,0)
DELINT ; If a result is (1st piece) deleted in ^LR(LRDFN,"MI",LRIDT,3
"RTN","LRMIBUG",25,0)
 ; the associated interpretation should be deleted
"RTN","LRMIBUG",26,0)
 ; as well. If S^S^ exists, and the result is deleted, ^S^ remains.
"RTN","LRMIBUG",27,0)
 N LRXX,LRYY
"RTN","LRMIBUG",28,0)
 S LRXX=2 ;this is the starting point for ^LR(LRDFN,"MI",LRIDT,3,1,
"RTN","LRMIBUG",29,0)
 F  S LRXX=$O(@(DIC_1_","_LRXX_")")) Q:'LRXX  D
"RTN","LRMIBUG",30,0)
 . S LRYY=@(DIC_1_","_LRXX_")")
"RTN","LRMIBUG",31,0)
 . I $P(LRYY,U)="" S $P(LRYY,U,2)="" S @(DIC_1_","_LRXX_")")=LRYY
"RTN","LRMIBUG",32,0)
 Q
"VER")
8.0^22.0
**END**
**END**

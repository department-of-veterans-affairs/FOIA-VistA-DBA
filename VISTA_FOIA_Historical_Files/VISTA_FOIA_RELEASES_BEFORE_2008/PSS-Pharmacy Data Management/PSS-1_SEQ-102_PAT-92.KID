Released PSS*1*92 SEQ #102
Extracted from mail message
**KIDS**:PSS*1.0*92^

**INSTALL NAME**
PSS*1.0*92
"BLD",6038,0)
PSS*1.0*92^PHARMACY DATA MANAGEMENT^0^3060310^y
"BLD",6038,1,0)
^^57^57^3050812^
"BLD",6038,1,1,0)
This Pharmacy Data Management (PDM) patch is part of the Patient Financial
"BLD",6038,1,2,0)
Services System (PFSS) project. PFSS patches are being released on various
"BLD",6038,1,3,0)
schedules. Some patch functionality will not be active until a new PFSS
"BLD",6038,1,4,0)
switch is activated during final implementation. PFSS will initially be
"BLD",6038,1,5,0)
implemented at select pilot sites ONLY.
"BLD",6038,1,6,0)
 
"BLD",6038,1,7,0)
The purpose of the PFSS project is to prepare the Veterans Health
"BLD",6038,1,8,0)
Information Systems and Technology Architecture (VistA) environment for
"BLD",6038,1,9,0)
the implementation of a commercial off-the-shelf (COTS) billing
"BLD",6038,1,10,0)
replacement system. The project consists of the implementation of the
"BLD",6038,1,11,0)
billing replacement system, business process improvements, and
"BLD",6038,1,12,0)
enhancements to VistA to support integration with the COTS billing
"BLD",6038,1,13,0)
replacement system. Significant changes to VistA legacy systems and
"BLD",6038,1,14,0)
ancillary packages are necessary.
"BLD",6038,1,15,0)
 
"BLD",6038,1,16,0)
Some of the PFSS software components are not operational until the PFSS
"BLD",6038,1,17,0)
On/Off Switch, distributed with patch IB*2*260, is set to "ON". The
"BLD",6038,1,18,0)
ability for the local site to set the switch to "ON  will be provided at
"BLD",6038,1,19,0)
the appropriate time with the release of a subsequent Integrated Billing
"BLD",6038,1,20,0)
patch.
"BLD",6038,1,21,0)
 
"BLD",6038,1,22,0)
For more information about the PFSS project, review the documentation
"BLD",6038,1,23,0)
accompanying this patch and refer to the following website:
"BLD",6038,1,24,0)
http://vista.med.va.gov/billreplace/.
"BLD",6038,1,25,0)
 
"BLD",6038,1,26,0)
 
"BLD",6038,1,27,0)
Functional Description:
"BLD",6038,1,28,0)
=======================
"BLD",6038,1,29,0)
The Charge Description Master (CDM) is an industry standard financial tool
"BLD",6038,1,30,0)
common to all commercial billing systems and used in virtually every
"BLD",6038,1,31,0)
private hospital. The CDM is a comprehensive listing of all services
"BLD",6038,1,32,0)
performed, drugs supplied, or supplies provided in a particular hospital
"BLD",6038,1,33,0)
along with the value of those services/drugs/items, or charge amounts.
"BLD",6038,1,34,0)
Each of these entries are represented by a Charge Code, and the Charge
"BLD",6038,1,35,0)
Code is made up of a Department Code and Service Code. The Charge Code for
"BLD",6038,1,36,0)
Pharmacy will be the department code 160 concatenated with the assigned
"BLD",6038,1,37,0)
Service Code for the drug. The Department Code 160 will not be stored in
"BLD",6038,1,38,0)
any files and the Service Code will be established/approved by a central
"BLD",6038,1,39,0)
CDM Change Control Board (CCB). The implementation of the COTS billing
"BLD",6038,1,40,0)
system requires the VA PRODUCT file (#50.68)/DRUG file (#50) to link the
"BLD",6038,1,41,0)
service master Service Code to every Pharmacy prescription fill or refill.
"BLD",6038,1,42,0)
For drugs that are not associated with an entry in the VA PRODUCT file
"BLD",6038,1,43,0)
(#50.68), the approved Service Code must be populated by the user.
"BLD",6038,1,44,0)
 
"BLD",6038,1,45,0)
 
"BLD",6038,1,46,0)
Technical Description:
"BLD",6038,1,47,0)
======================
"BLD",6038,1,48,0)
This PDM patch PSS*1*92 provides the following functionality needed to
"BLD",6038,1,49,0)
support the PFSS project:
"BLD",6038,1,50,0)
 
"BLD",6038,1,51,0)
1. A new SERVICE CODE field (#400) was added to the DRUG file (#50).
"BLD",6038,1,52,0)
2. The PSSCOMMON Input template was modified to accommodate the new
"BLD",6038,1,53,0)
   SERVICE CODE field (#400) to be used with the DRUG ENTER/EDIT [PSS DRUG
"BLD",6038,1,54,0)
   ENTER/EDIT] option for drugs that are not associated with an entry in
"BLD",6038,1,55,0)
   the VA PRODUCT file (#50.68).
"BLD",6038,1,56,0)
3. The Integration Agreement (IA) #4483 was modified to include the new
"BLD",6038,1,57,0)
   SERVICE CODE field (#400).
"BLD",6038,4,0)
^9.64PA^50^1
"BLD",6038,4,50,0)
50
"BLD",6038,4,50,2,0)
^9.641^50^1
"BLD",6038,4,50,2,50,0)
DRUG  (File-top level)
"BLD",6038,4,50,2,50,1,0)
^9.6411^400^1
"BLD",6038,4,50,2,50,1,400,0)
SERVICE CODE
"BLD",6038,4,50,222)
y^n^p^^^^n^^n
"BLD",6038,4,50,224)

"BLD",6038,4,"APDD",50,50)

"BLD",6038,4,"APDD",50,50,400)

"BLD",6038,4,"B",50,50)

"BLD",6038,6)
1^
"BLD",6038,"INID")
^
"BLD",6038,"INIT")

"BLD",6038,"KRN",0)
^9.67PA^8989.52^19
"BLD",6038,"KRN",.4,0)
.4
"BLD",6038,"KRN",.401,0)
.401
"BLD",6038,"KRN",.402,0)
.402
"BLD",6038,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",6038,"KRN",.402,"NM",1,0)
PSSCOMMON    FILE #50^50^0
"BLD",6038,"KRN",.402,"NM","B","PSSCOMMON    FILE #50",1)

"BLD",6038,"KRN",.403,0)
.403
"BLD",6038,"KRN",.5,0)
.5
"BLD",6038,"KRN",.84,0)
.84
"BLD",6038,"KRN",3.6,0)
3.6
"BLD",6038,"KRN",3.8,0)
3.8
"BLD",6038,"KRN",9.2,0)
9.2
"BLD",6038,"KRN",9.8,0)
9.8
"BLD",6038,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",6038,"KRN",9.8,"NM",1,0)
PSS50A^^0^B30585085
"BLD",6038,"KRN",9.8,"NM",2,0)
PSS50DAT^^0^B33215766
"BLD",6038,"KRN",9.8,"NM","B","PSS50A",1)

"BLD",6038,"KRN",9.8,"NM","B","PSS50DAT",2)

"BLD",6038,"KRN",19,0)
19
"BLD",6038,"KRN",19,"NM",0)
^9.68A^^0
"BLD",6038,"KRN",19.1,0)
19.1
"BLD",6038,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",6038,"KRN",101,0)
101
"BLD",6038,"KRN",101,"NM",0)
^9.68A^^
"BLD",6038,"KRN",409.61,0)
409.61
"BLD",6038,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",6038,"KRN",771,0)
771
"BLD",6038,"KRN",870,0)
870
"BLD",6038,"KRN",8989.51,0)
8989.51
"BLD",6038,"KRN",8989.52,0)
8989.52
"BLD",6038,"KRN",8994,0)
8994
"BLD",6038,"KRN","B",.4,.4)

"BLD",6038,"KRN","B",.401,.401)

"BLD",6038,"KRN","B",.402,.402)

"BLD",6038,"KRN","B",.403,.403)

"BLD",6038,"KRN","B",.5,.5)

"BLD",6038,"KRN","B",.84,.84)

"BLD",6038,"KRN","B",3.6,3.6)

"BLD",6038,"KRN","B",3.8,3.8)

"BLD",6038,"KRN","B",9.2,9.2)

"BLD",6038,"KRN","B",9.8,9.8)

"BLD",6038,"KRN","B",19,19)

"BLD",6038,"KRN","B",19.1,19.1)

"BLD",6038,"KRN","B",101,101)

"BLD",6038,"KRN","B",409.61,409.61)

"BLD",6038,"KRN","B",771,771)

"BLD",6038,"KRN","B",870,870)

"BLD",6038,"KRN","B",8989.51,8989.51)

"BLD",6038,"KRN","B",8989.52,8989.52)

"BLD",6038,"KRN","B",8994,8994)

"BLD",6038,"QUES",0)
^9.62^^
"BLD",6038,"REQB",0)
^9.611^2^2
"BLD",6038,"REQB",1,0)
PSS*1.0*91^2
"BLD",6038,"REQB",2,0)
IB*2.0*260^2
"BLD",6038,"REQB","B","IB*2.0*260",2)

"BLD",6038,"REQB","B","PSS*1.0*91",1)

"FIA",50)
DRUG
"FIA",50,0)
^PSDRUG(
"FIA",50,0,0)
50I
"FIA",50,0,1)
y^n^p^^^^n^^n
"FIA",50,0,10)

"FIA",50,0,11)

"FIA",50,0,"RLRO")

"FIA",50,0,"VR")
1.0^PSS
"FIA",50,50)
1
"FIA",50,50,400)

"KRN",.402,2196,-1)
0^1
"KRN",.402,2196,0)
PSSCOMMON^3050518.1137^@^50^^@^3060309
"KRN",.402,2196,"DIAB",1,1,50.037,0)
ALL
"KRN",.402,2196,"DIAB",1,1,50.065,0)
ALL
"KRN",.402,2196,"DR",1,50)
.01;2;D PKIND^PSSDDUT2;3;D PKIND^PSSDDUT2;W !!,"NATIONAL FORMULARY INDICATOR: " W:$P($G(^PSDRUG(DA,"ND")),"^",11)=1 "YES" W:$P($G(^PSDRUG(DA,"ND")),"^",11)="" "Not Matched To NDF" W:$P($G(^PSDRUG(DA,"ND")),"^",11)=0 "NO";51;52;37;
"KRN",.402,2196,"DR",1,50,1)
65;9;101;102;6;31;100;N ND S ND=$G(^PSDRUG(DA,"ND")) I +ND,+$P(ND,"^",3),+$P($G(^PSNDF(50.68,+$P(ND,"^",3),"PFS")),"^") S Y="@4";W !!,"If you are planning to match to a NDF entry later or have no plan of using";
"KRN",.402,2196,"DR",1,50,2)
W !,"the external billing function, you may skip the Service Code entry.";400;@4;S PSONEWW=$S($P($G(^PS(59.7,1,10)),"^",9)="N":1,1:0) W !!,"WARNING LABEL SOURCE is "_$S(PSONEWW:"'NEW'.",1:"not 'NEW'.");
"KRN",.402,2196,"DR",1,50,3)
I PSONEWW W !,"The following WARNING LABEL may continue to be used for a limited time for some external interfaces.";I 'PSONEWW W !,"WARNING LABEL will be used until the WARNING LABEL SOURCE is set to 'NEW'.";8;@5;
"KRN",.402,2196,"DR",1,50,4)
D WARN^PSSWRNB S:$G(WARNEDIT) Y="@10" I '$G(WARNEDIT) S Y="@15";@10;8.1;S Y="@5";@15;D GENDER2^PSSWRNA I GENDER="" S Y="@20";8.2;@20;12;13;14.5;15;
"KRN",.402,2196,"DR",2,50.037)
.01
"KRN",.402,2196,"DR",2,50.065)
.01
"KRN",.402,2196,"DR",2,50.1)
.01;1;2;
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"PKG",488,-1)
1^1
"PKG",488,0)
PHARMACY DATA MANAGEMENT^PSS^Maintenance of Pharmacy files.
"PKG",488,20,0)
^9.402P^^
"PKG",488,22,0)
^9.49I^1^1
"PKG",488,22,1,0)
1.0^2970930^3000316^66481
"PKG",488,22,1,"PAH",1,0)
92^3060310^123456821
"PKG",488,22,1,"PAH",1,1,0)
^^57^57^3060310
"PKG",488,22,1,"PAH",1,1,1,0)
This Pharmacy Data Management (PDM) patch is part of the Patient Financial
"PKG",488,22,1,"PAH",1,1,2,0)
Services System (PFSS) project. PFSS patches are being released on various
"PKG",488,22,1,"PAH",1,1,3,0)
schedules. Some patch functionality will not be active until a new PFSS
"PKG",488,22,1,"PAH",1,1,4,0)
switch is activated during final implementation. PFSS will initially be
"PKG",488,22,1,"PAH",1,1,5,0)
implemented at select pilot sites ONLY.
"PKG",488,22,1,"PAH",1,1,6,0)
 
"PKG",488,22,1,"PAH",1,1,7,0)
The purpose of the PFSS project is to prepare the Veterans Health
"PKG",488,22,1,"PAH",1,1,8,0)
Information Systems and Technology Architecture (VistA) environment for
"PKG",488,22,1,"PAH",1,1,9,0)
the implementation of a commercial off-the-shelf (COTS) billing
"PKG",488,22,1,"PAH",1,1,10,0)
replacement system. The project consists of the implementation of the
"PKG",488,22,1,"PAH",1,1,11,0)
billing replacement system, business process improvements, and
"PKG",488,22,1,"PAH",1,1,12,0)
enhancements to VistA to support integration with the COTS billing
"PKG",488,22,1,"PAH",1,1,13,0)
replacement system. Significant changes to VistA legacy systems and
"PKG",488,22,1,"PAH",1,1,14,0)
ancillary packages are necessary.
"PKG",488,22,1,"PAH",1,1,15,0)
 
"PKG",488,22,1,"PAH",1,1,16,0)
Some of the PFSS software components are not operational until the PFSS
"PKG",488,22,1,"PAH",1,1,17,0)
On/Off Switch, distributed with patch IB*2*260, is set to "ON". The
"PKG",488,22,1,"PAH",1,1,18,0)
ability for the local site to set the switch to "ON  will be provided at
"PKG",488,22,1,"PAH",1,1,19,0)
the appropriate time with the release of a subsequent Integrated Billing
"PKG",488,22,1,"PAH",1,1,20,0)
patch.
"PKG",488,22,1,"PAH",1,1,21,0)
 
"PKG",488,22,1,"PAH",1,1,22,0)
For more information about the PFSS project, review the documentation
"PKG",488,22,1,"PAH",1,1,23,0)
accompanying this patch and refer to the following website:
"PKG",488,22,1,"PAH",1,1,24,0)
http://vista.med.va.gov/billreplace/.
"PKG",488,22,1,"PAH",1,1,25,0)
 
"PKG",488,22,1,"PAH",1,1,26,0)
 
"PKG",488,22,1,"PAH",1,1,27,0)
Functional Description:
"PKG",488,22,1,"PAH",1,1,28,0)
=======================
"PKG",488,22,1,"PAH",1,1,29,0)
The Charge Description Master (CDM) is an industry standard financial tool
"PKG",488,22,1,"PAH",1,1,30,0)
common to all commercial billing systems and used in virtually every
"PKG",488,22,1,"PAH",1,1,31,0)
private hospital. The CDM is a comprehensive listing of all services
"PKG",488,22,1,"PAH",1,1,32,0)
performed, drugs supplied, or supplies provided in a particular hospital
"PKG",488,22,1,"PAH",1,1,33,0)
along with the value of those services/drugs/items, or charge amounts.
"PKG",488,22,1,"PAH",1,1,34,0)
Each of these entries are represented by a Charge Code, and the Charge
"PKG",488,22,1,"PAH",1,1,35,0)
Code is made up of a Department Code and Service Code. The Charge Code for
"PKG",488,22,1,"PAH",1,1,36,0)
Pharmacy will be the department code 160 concatenated with the assigned
"PKG",488,22,1,"PAH",1,1,37,0)
Service Code for the drug. The Department Code 160 will not be stored in
"PKG",488,22,1,"PAH",1,1,38,0)
any files and the Service Code will be established/approved by a central
"PKG",488,22,1,"PAH",1,1,39,0)
CDM Change Control Board (CCB). The implementation of the COTS billing
"PKG",488,22,1,"PAH",1,1,40,0)
system requires the VA PRODUCT file (#50.68)/DRUG file (#50) to link the
"PKG",488,22,1,"PAH",1,1,41,0)
service master Service Code to every Pharmacy prescription fill or refill.
"PKG",488,22,1,"PAH",1,1,42,0)
For drugs that are not associated with an entry in the VA PRODUCT file
"PKG",488,22,1,"PAH",1,1,43,0)
(#50.68), the approved Service Code must be populated by the user.
"PKG",488,22,1,"PAH",1,1,44,0)
 
"PKG",488,22,1,"PAH",1,1,45,0)
 
"PKG",488,22,1,"PAH",1,1,46,0)
Technical Description:
"PKG",488,22,1,"PAH",1,1,47,0)
======================
"PKG",488,22,1,"PAH",1,1,48,0)
This PDM patch PSS*1*92 provides the following functionality needed to
"PKG",488,22,1,"PAH",1,1,49,0)
support the PFSS project:
"PKG",488,22,1,"PAH",1,1,50,0)
 
"PKG",488,22,1,"PAH",1,1,51,0)
1. A new SERVICE CODE field (#400) was added to the DRUG file (#50).
"PKG",488,22,1,"PAH",1,1,52,0)
2. The PSSCOMMON Input template was modified to accommodate the new
"PKG",488,22,1,"PAH",1,1,53,0)
   SERVICE CODE field (#400) to be used with the DRUG ENTER/EDIT [PSS DRUG
"PKG",488,22,1,"PAH",1,1,54,0)
   ENTER/EDIT] option for drugs that are not associated with an entry in
"PKG",488,22,1,"PAH",1,1,55,0)
   the VA PRODUCT file (#50.68).
"PKG",488,22,1,"PAH",1,1,56,0)
3. The Integration Agreement (IA) #4483 was modified to include the new
"PKG",488,22,1,"PAH",1,1,57,0)
   SERVICE CODE field (#400).
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PSS50A")
0^1^B30585085^B28870400
"RTN","PSS50A",1,0)
PSS50A ;BIR/LDT - CONTINUATION OF API FOR INFORMATION FROM FILE 50 ;5 Sep 03
"RTN","PSS50A",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**85,91,92**;9/30/97
"RTN","PSS50A",3,0)
 ;External reference to PS(50.605 supported by DBIA 2138
"RTN","PSS50A",4,0)
 ;
"RTN","PSS50A",5,0)
SETSCRN ;Set Screen for inactive Drugs
"RTN","PSS50A",6,0)
 ;Naked reference below refers to ^PSDRUG(+Y,"I")
"RTN","PSS50A",7,0)
 I +$G(PSSFL)>0 S SCR("S")="S PSS5ND=$P($G(^(""I"")),""^"") I PSS5ND=""""!(PSS5ND>PSSFL)"
"RTN","PSS50A",8,0)
 I $G(PSSRTOI)=1 D
"RTN","PSS50A",9,0)
 .;Naked reference below refers to ^PSDRUG(+Y,2)
"RTN","PSS50A",10,0)
 .I SCR("S")]"" S SCR("S")=SCR("S")_" I $P($G(^(2)),""^"")" Q
"RTN","PSS50A",11,0)
 .;Naked reference below refers to ^PSDRUG(+Y,2)
"RTN","PSS50A",12,0)
 .S SCR("S")="I $P($G(^(2)),""^"")"
"RTN","PSS50A",13,0)
 I $G(PSSPK)]"" D
"RTN","PSS50A",14,0)
 .;Naked reference below refers to ^PSDRUG(+Y,2)
"RTN","PSS50A",15,0)
 .I SCR("S")]"" S SCR("S")=SCR("S")_" S PSSZ3=0 F PSSZ4=1:1:$L(PSSPK) Q:PSSZ3  I $P($G(^(2)),""^"",3)[$E(PSSPK,PSSZ4) S PSSZ3=1" Q
"RTN","PSS50A",16,0)
 .;Naked reference below refers to ^PSDRUG(+Y,2)
"RTN","PSS50A",17,0)
 .S SCR("S")="S PSSZ3=0 F PSSZ4=1:1:$L(PSSPK) Q:PSSZ3  I $P($G(^(2)),""^"",3)[$E(PSSPK,PSSZ4) S PSSZ3=1"
"RTN","PSS50A",18,0)
 ;I $G(PSSPK)]"" S SCR("S")=$S(SCR("S")]"":SCR("S")_" I $G(^PSDRUG(+Y,2)),$P($G(^PSDRUG(+Y,2)),""^"",3)[PSSPK",1:"I $G(^PSDRUG(+Y,2)),$P($G(^PSDRUG(+Y,2)),""^"",3)[PSSPK")
"RTN","PSS50A",19,0)
 Q
"RTN","PSS50A",20,0)
 ;
"RTN","PSS50A",21,0)
SETALL ;
"RTN","PSS50A",22,0)
 S ^TMP($J,LIST,+PSS(1),.01)=$G(^TMP("PSSP50",$J,50,PSS(1),.01,"I"))
"RTN","PSS50A",23,0)
 S ^TMP($J,LIST,"B",$G(^TMP("PSSP50",$J,50,PSS(1),.01,"I")),+PSS(1))=""
"RTN","PSS50A",24,0)
 S ^TMP($J,LIST,+PSS(1),2)=$G(^TMP("PSSP50",$J,50,PSS(1),2,"I"))
"RTN","PSS50A",25,0)
 S ^TMP($J,LIST,+PSS(1),2.1)=$S($G(^TMP("PSSP50",$J,50,PSS(1),2.1,"I"))="":"",1:$G(^TMP("PSSP50",$J,50,PSS(1),2.1,"I"))_"^"_$G(^TMP("PSSP50",$J,50,PSS(1),2.1,"E")))
"RTN","PSS50A",26,0)
 I $P($G(^TMP($J,LIST,+PSS(1),2.1)),"^") D
"RTN","PSS50A",27,0)
 .N PSSADDF S PSSADDF=$$SETDF^PSS50AQM($P(^TMP($J,LIST,+PSS(1),2.1),"^")) S ^TMP($J,LIST,+PSS(1),2.1)=^TMP($J,LIST,+PSS(1),2.1)_$S($P($G(PSSADDF),"^")>0:"^"_$P($G(PSSADDF),"^",3)_"^"_$P($G(PSSADDF),"^",4),1:"")
"RTN","PSS50A",28,0)
 S ^TMP($J,LIST,+PSS(1),3)=$G(^TMP("PSSP50",$J,50,PSS(1),3,"I"))
"RTN","PSS50A",29,0)
 S ^TMP($J,LIST,+PSS(1),4)=$G(^TMP("PSSP50",$J,50,PSS(1),4,"I"))
"RTN","PSS50A",30,0)
 S ^TMP($J,LIST,+PSS(1),5)=$G(^TMP("PSSP50",$J,50,PSS(1),5,"I"))
"RTN","PSS50A",31,0)
 S ^TMP($J,LIST,+PSS(1),6)=$G(^TMP("PSSP50",$J,50,PSS(1),6,"I"))
"RTN","PSS50A",32,0)
 S ^TMP($J,LIST,+PSS(1),8)=$G(^TMP("PSSP50",$J,50,PSS(1),8,"I"))
"RTN","PSS50A",33,0)
 N PSSUTN S PSSUTN=$G(^TMP("PSSP50",$J,50,PSS(1),12,"I"))
"RTN","PSS50A",34,0)
 S ^TMP($J,LIST,+PSS(1),12)=$S($G(PSSUTN)="":"",1:$G(^TMP("PSSP50",$J,50,PSS(1),12,"I"))_"^"_$G(^TMP("PSSP50",$J,50,PSS(1),12,"E")))
"RTN","PSS50A",35,0)
 I PSSUTN'="" S ^TMP($J,LIST,+PSS(1),12)=^TMP($J,LIST,+PSS(1),12)_"^"_$P($G(^DIC(51.5,PSSUTN,0)),"^",2)
"RTN","PSS50A",36,0)
 S ^TMP($J,LIST,+PSS(1),13)=$G(^TMP("PSSP50",$J,50,PSS(1),13,"I"))
"RTN","PSS50A",37,0)
 S ^TMP($J,LIST,+PSS(1),14.5)=$G(^TMP("PSSP50",$J,50,PSS(1),14.5,"I"))
"RTN","PSS50A",38,0)
 S ^TMP($J,LIST,+PSS(1),15)=$G(^TMP("PSSP50",$J,50,PSS(1),15,"I"))
"RTN","PSS50A",39,0)
 S ^TMP($J,LIST,+PSS(1),16)=$G(^TMP("PSSP50",$J,50,PSS(1),16,"I"))
"RTN","PSS50A",40,0)
 S ^TMP($J,LIST,+PSS(1),20)=$S($G(^TMP("PSSP50",$J,50,PSS(1),20,"I"))="":"",1:$G(^TMP("PSSP50",$J,50,PSS(1),20,"I"))_"^"_$G(^TMP("PSSP50",$J,50,PSS(1),20,"E")))
"RTN","PSS50A",41,0)
 S ^TMP($J,LIST,+PSS(1),21)=$G(^TMP("PSSP50",$J,50,PSS(1),21,"I"))
"RTN","PSS50A",42,0)
 S ^TMP($J,LIST,+PSS(1),22)=$S($G(^TMP("PSSP50",$J,50,PSS(1),22,"I"))="":"",1:$G(^TMP("PSSP50",$J,50,PSS(1),22,"I"))_"^"_$G(^TMP("PSSP50",$J,50,PSS(1),22,"E")))
"RTN","PSS50A",43,0)
 S ^TMP($J,LIST,+PSS(1),25)=$S($G(^TMP("PSSP50",$J,50,PSS(1),25,"I"))="":"",1:$G(^TMP("PSSP50",$J,50,PSS(1),25,"I"))_"^"_$G(^TMP("PSSP50",$J,50,PSS(1),25,"E"))_"^"_$P($G(^PS(50.605,+^TMP("PSSP50",$J,50,PSS(1),25,"I"),0)),"^",2))
"RTN","PSS50A",44,0)
 S ^TMP($J,LIST,+PSS(1),27)=$G(^TMP("PSSP50",$J,50,PSS(1),27,"I"))
"RTN","PSS50A",45,0)
 S ^TMP($J,LIST,+PSS(1),31)=$G(^TMP("PSSP50",$J,50,PSS(1),31,"I"))
"RTN","PSS50A",46,0)
 S ^TMP($J,LIST,+PSS(1),40)=$G(^TMP("PSSP50",$J,50,PSS(1),40,"I"))
"RTN","PSS50A",47,0)
 S ^TMP($J,LIST,+PSS(1),51)=$S($G(^TMP("PSSP50",$J,50,PSS(1),51,"I"))="":"",1:$G(^TMP("PSSP50",$J,50,PSS(1),51,"I"))_"^"_$G(^TMP("PSSP50",$J,50,PSS(1),51,"E")))
"RTN","PSS50A",48,0)
 S ^TMP($J,LIST,+PSS(1),52)=$S($G(^TMP("PSSP50",$J,50,PSS(1),52,"I"))="":"",1:$G(^TMP("PSSP50",$J,50,PSS(1),52,"I"))_"^"_$G(^TMP("PSSP50",$J,50,PSS(1),52,"E")))
"RTN","PSS50A",49,0)
 S ^TMP($J,LIST,+PSS(1),63)=$G(^TMP("PSSP50",$J,50,PSS(1),63,"I"))
"RTN","PSS50A",50,0)
 S ^TMP($J,LIST,+PSS(1),64)=$S('$P($G(^TMP("PSSP50",$J,50,PSS(1),64,"I")),"^"):"",1:$P($G(^TMP("PSSP50",$J,50,PSS(1),64,"I")),"^")_"^"_$P($G(^TMP("PSSP50",$J,50,PSS(1),64,"E")),"^"))
"RTN","PSS50A",51,0)
 S ^TMP($J,LIST,+PSS(1),100)=$S($G(^TMP("PSSP50",$J,50,PSS(1),100,"I"))="":"",1:$G(^TMP("PSSP50",$J,50,PSS(1),100,"I"))_"^"_$G(^TMP("PSSP50",$J,50,PSS(1),100,"E")))
"RTN","PSS50A",52,0)
 S ^TMP($J,LIST,+PSS(1),101)=$G(^TMP("PSSP50",$J,50,PSS(1),101,"I"))
"RTN","PSS50A",53,0)
 S ^TMP($J,LIST,+PSS(1),102)=$G(^TMP("PSSP50",$J,50,PSS(1),102,"I"))
"RTN","PSS50A",54,0)
 S ^TMP($J,LIST,+PSS(1),301)=$S($G(^TMP("PSSP50",$J,50,PSS(1),301,"I"))="":"",1:$G(^TMP("PSSP50",$J,50,PSS(1),301,"I"))_"^"_$G(^TMP("PSSP50",$J,50,PSS(1),301,"E")))
"RTN","PSS50A",55,0)
 S ^TMP($J,LIST,+PSS(1),302)=$G(^TMP("PSSP50",$J,50,PSS(1),302,"I"))
"RTN","PSS50A",56,0)
 D SRVCODE
"RTN","PSS50A",57,0)
 Q
"RTN","PSS50A",58,0)
 ;
"RTN","PSS50A",59,0)
SETSYN ;
"RTN","PSS50A",60,0)
 S ^TMP($J,LIST,+PSS(1),"SYN",+PSS(2),.01)=$G(^TMP("PSSP50",$J,50.1,PSS(2),.01,"I"))
"RTN","PSS50A",61,0)
 S ^TMP($J,LIST,+PSS(1),"SYN",+PSS(2),1)=$S($G(^TMP("PSSP50",$J,50.1,PSS(2),1,"I"))="":"",1:^TMP("PSSP50",$J,50.1,PSS(2),1,"I")_"^"_^TMP("PSSP50",$J,50.1,PSS(2),1,"E"))
"RTN","PSS50A",62,0)
 S ^TMP($J,LIST,+PSS(1),"SYN",+PSS(2),2)=$G(^TMP("PSSP50",$J,50.1,PSS(2),2,"I"))
"RTN","PSS50A",63,0)
 S ^TMP($J,LIST,+PSS(1),"SYN",+PSS(2),403)=$G(^TMP("PSSP50",$J,50.1,PSS(2),403,"I"))
"RTN","PSS50A",64,0)
 Q
"RTN","PSS50A",65,0)
 ;
"RTN","PSS50A",66,0)
SETFMA ;
"RTN","PSS50A",67,0)
 S ^TMP($J,LIST,+PSS(1),"FRM",+PSS(2),.01)=$S($G(^TMP("PSSP50",$J,50.065,PSS(2),.01,"I"))="":"",1:^TMP("PSSP50",$J,50.065,PSS(2),.01,"I")_"^"_^TMP("PSSP50",$J,50.065,PSS(2),.01,"E"))
"RTN","PSS50A",68,0)
 Q
"RTN","PSS50A",69,0)
 ;
"RTN","PSS50A",70,0)
SETOLD ;
"RTN","PSS50A",71,0)
 S ^TMP($J,LIST,+PSS(1),"OLD",+PSS(2),.01)=$G(^TMP("PSSP50",$J,50.01,PSS(2),.01,"I"))
"RTN","PSS50A",72,0)
 S ^TMP($J,LIST,+PSS(1),"OLD",+PSS(2),.02)=$S($G(^TMP("PSSP50",$J,50.01,PSS(2),.02,"I"))="":"",1:^TMP("PSSP50",$J,50.01,PSS(2),.02,"I")_"^"_^TMP("PSSP50",$J,50.01,PSS(2),.02,"E"))
"RTN","PSS50A",73,0)
 Q
"RTN","PSS50A",74,0)
 ;
"RTN","PSS50A",75,0)
SRVCODE ;
"RTN","PSS50A",76,0)
 ;PFSS retrieve correct service code from file #50.68/#50 or set to 600000
"RTN","PSS50A",77,0)
 S ^TMP($J,LIST,+PSS(1),400)=$G(^TMP("PSSP50",$J,50,PSS(1),400,"I"))
"RTN","PSS50A",78,0)
 N PSSNDSC S PSSNDSC=$$GET1^DIQ(50,PSSIEN_",","22:2000","I")
"RTN","PSS50A",79,0)
 S:PSSNDSC ^TMP($J,LIST,+PSS(1),400)=PSSNDSC
"RTN","PSS50A",80,0)
 I '+$G(^TMP($J,LIST,+PSS(1),400)) S ^TMP($J,LIST,+PSS(1),400)=600000
"RTN","PSS50A",81,0)
 Q
"RTN","PSS50DAT")
0^2^B33215766^B33121603
"RTN","PSS50DAT",1,0)
PSS50DAT ;BIR/LDT - API FOR INFORMATION FROM FILE 50 ;5 Sep 03
"RTN","PSS50DAT",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**85,92**;9/30/97
"RTN","PSS50DAT",3,0)
 ;
"RTN","PSS50DAT",4,0)
DATA ;
"RTN","PSS50DAT",5,0)
 ;PSSIEN - IEN of entry in 50
"RTN","PSS50DAT",6,0)
 ;PSSFT - Free Text name in 50
"RTN","PSS50DAT",7,0)
 ;PSSFL - Inactive flag - "" - All entries
"RTN","PSS50DAT",8,0)
 ;                        FileMan Date - Only entries with no Inactive Date or an Inactive Date greater than this date.
"RTN","PSS50DAT",9,0)
 ;PSSPK - Application Package's Use - "" - All entries
"RTN","PSS50DAT",10,0)
 ;                                         Alphabetic codes that represent the DHCP packages that consider this drug to be
"RTN","PSS50DAT",11,0)
 ;                                         part of their formulary.
"RTN","PSS50DAT",12,0)
 ;PSSRTOI - Orderable Item - return only entries matched to a Pharmacy Orderable Item                                         
"RTN","PSS50DAT",13,0)
 ;LIST - Subscript of ^TMP array in the form ^TMP($J,LIST,Field Number where Field Number is the Field Number of the data
"RTN","PSS50DAT",14,0)
 ;       piece being returned.
"RTN","PSS50DAT",15,0)
 N DIERR,ZZERR,SCR,PSS,PSSMLCT,PSSP50
"RTN","PSS50DAT",16,0)
 I $G(LIST)']"" Q
"RTN","PSS50DAT",17,0)
 K ^TMP($J,LIST)
"RTN","PSS50DAT",18,0)
 I +$G(PSSIEN)'>0,($G(PSSFT)']"") S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50DAT",19,0)
 S SCR("S")=""
"RTN","PSS50DAT",20,0)
 I +$G(PSSFL)>0!($G(PSSPK)]"")!($G(PSSRTOI)=1) N PSS5ND,PSSZ3,PSSZ4 D SETSCRN^PSS50A
"RTN","PSS50DAT",21,0)
 I +$G(PSSIEN)>0 N PSSIEN2 S PSSIEN2=$$FIND1^DIC(50,"","A","`"_PSSIEN,,SCR("S"),"") D  K ^TMP("PSSP50",$J) Q
"RTN","PSS50DAT",22,0)
 .K ^TMP("DIERR",$J)
"RTN","PSS50DAT",23,0)
 .I +PSSIEN2'>0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50DAT",24,0)
 .S ^TMP($J,LIST,0)=1
"RTN","PSS50DAT",25,0)
 .D SETSUB1^PSS50AQM(+PSSIEN2),SETSUB2^PSS50AQM(+PSSIEN2),SETSUB3^PSS50AQM(+PSSIEN2)
"RTN","PSS50DAT",26,0)
 .K ^TMP("PSSP50",$J) D GETS^DIQ(50,+PSSIEN2,".01:8;9*;12:16;20:40;51;101;52;100;102;63;31;64;65*;301;302;400;900*","IE","^TMP(""PSSP50"",$J)") S PSS(1)=0
"RTN","PSS50DAT",27,0)
 .F  S PSS(1)=$O(^TMP("PSSP50",$J,50,PSS(1))) Q:'PSS(1)  D SETALL^PSS50A D
"RTN","PSS50DAT",28,0)
 ..S (PSS(2),PSSMLCT)=0 F  S PSS(2)=$O(^TMP("PSSP50",$J,50.01,PSS(2))) Q:'PSS(2)  S PSSMLCT=PSSMLCT+1 D SETOLD^PSS50A
"RTN","PSS50DAT",29,0)
 ..S ^TMP($J,LIST,+PSS(1),"OLD",0)=$S($G(PSSMLCT):PSSMLCT,1:"-1^NO DATA FOUND")
"RTN","PSS50DAT",30,0)
 ..S (PSS(2),PSSMLCT)=0 F  S PSS(2)=$O(^TMP("PSSP50",$J,50.1,PSS(2))) Q:'PSS(2)  S PSSMLCT=PSSMLCT+1 D SETSYN^PSS50A
"RTN","PSS50DAT",31,0)
 ..S ^TMP($J,LIST,+PSS(1),"SYN",0)=$S($G(PSSMLCT):PSSMLCT,1:"-1^NO DATA FOUND")
"RTN","PSS50DAT",32,0)
 ..S (PSS(2),PSSMLCT)=0 F  S PSS(2)=$O(^TMP("PSSP50",$J,50.065,PSS(2))) Q:'PSS(2)  S PSSMLCT=PSSMLCT+1 D SETFMA^PSS50A
"RTN","PSS50DAT",33,0)
 ..S ^TMP($J,LIST,+PSS(1),"FRM",0)=$S($G(PSSMLCT):PSSMLCT,1:"-1^NO DATA FOUND")
"RTN","PSS50DAT",34,0)
 I $G(PSSIEN)'="" S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50DAT",35,0)
 I $G(PSSFT)]"" D
"RTN","PSS50DAT",36,0)
 .I PSSFT["??" D LOOP Q
"RTN","PSS50DAT",37,0)
 .K ^TMP("DILIST",$J)
"RTN","PSS50DAT",38,0)
 .D FIND^DIC(50,,"@;.01","QP",PSSFT,,"B",SCR("S"),,"")
"RTN","PSS50DAT",39,0)
 .I +$G(^TMP("DILIST",$J,0))=0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50DAT",40,0)
 .I +^TMP("DILIST",$J,0)>0 S ^TMP($J,LIST,0)=+^TMP("DILIST",$J,0) N PSSXX S PSSXX=0 F  S PSSXX=$O(^TMP("DILIST",$J,PSSXX)) Q:'PSSXX  D
"RTN","PSS50DAT",41,0)
 ..S PSSIEN=+^TMP("DILIST",$J,PSSXX,0)
"RTN","PSS50DAT",42,0)
 ..D SETSUB1^PSS50AQM(PSSIEN),SETSUB2^PSS50AQM(PSSIEN),SETSUB3^PSS50AQM(PSSIEN) K ^TMP("PSSP50",$J) D GETS^DIQ(50,+PSSIEN,".01:8;9*;12:16;20:40;51;101;52;100;102;63;31;64;65*;301;302;400;900*","IE","^TMP(""PSSP50"",$J)") S PSS(1)=0
"RTN","PSS50DAT",43,0)
 ..F  S PSS(1)=$O(^TMP("PSSP50",$J,50,PSS(1))) Q:'PSS(1)  D SETALL^PSS50A D
"RTN","PSS50DAT",44,0)
 ...S (PSS(2),PSSMLCT)=0 F  S PSS(2)=$O(^TMP("PSSP50",$J,50.01,PSS(2))) Q:'PSS(2)  S PSSMLCT=PSSMLCT+1 D SETOLD^PSS50A
"RTN","PSS50DAT",45,0)
 ...S ^TMP($J,LIST,+PSS(1),"OLD",0)=$S($G(PSSMLCT):PSSMLCT,1:"-1^NO DATA FOUND")
"RTN","PSS50DAT",46,0)
 ...S (PSS(2),PSSMLCT)=0 F  S PSS(2)=$O(^TMP("PSSP50",$J,50.1,PSS(2))) Q:'PSS(2)  S PSSMLCT=PSSMLCT+1 D SETSYN^PSS50A
"RTN","PSS50DAT",47,0)
 ...S ^TMP($J,LIST,+PSS(1),"SYN",0)=$S($G(PSSMLCT):PSSMLCT,1:"-1^NO DATA FOUND")
"RTN","PSS50DAT",48,0)
 ...S (PSS(2),PSSMLCT)=0 F  S PSS(2)=$O(^TMP("PSSP50",$J,50.065,PSS(2))) Q:'PSS(2)  S PSSMLCT=PSSMLCT+1 D SETFMA^PSS50A
"RTN","PSS50DAT",49,0)
 ...S ^TMP($J,LIST,+PSS(1),"FRM",0)=$S($G(PSSMLCT):PSSMLCT,1:"-1^NO DATA FOUND")
"RTN","PSS50DAT",50,0)
 K ^TMP("DILIST",$J),^TMP("PSSP50",$J)
"RTN","PSS50DAT",51,0)
 Q
"RTN","PSS50DAT",52,0)
 ;
"RTN","PSS50DAT",53,0)
DRG ;
"RTN","PSS50DAT",54,0)
 ;PSSIEN - IEN of entry in 50
"RTN","PSS50DAT",55,0)
 ;PSSFT - Free Text name in 50
"RTN","PSS50DAT",56,0)
 ;PSSFL - Inactive flag - "" - All entries
"RTN","PSS50DAT",57,0)
 ;                        FileMan Date - Only entries with no Inactive Date or an Inactive Date greater than this date.
"RTN","PSS50DAT",58,0)
 ;PSSPK - Application Package's Use - "" - All entries
"RTN","PSS50DAT",59,0)
 ;                                         Alphabetic codes that represent the DHCP packages that consider this drug to be
"RTN","PSS50DAT",60,0)
 ;                                         part of their formulary.
"RTN","PSS50DAT",61,0)
 ;PSSRTOI - Orderable Item - return only entries matched to a Pharmacy Orderable Item
"RTN","PSS50DAT",62,0)
 ;LIST - Subscript of ^TMP array in the form ^TMP($J,LIST,Field Number where Field Number is the Field Number of the data
"RTN","PSS50DAT",63,0)
 ;       piece being returned.
"RTN","PSS50DAT",64,0)
 N DIERR,ZZERR,PSSP50,SCR,PSS,PSSMLCT
"RTN","PSS50DAT",65,0)
 I $G(LIST)']"" Q
"RTN","PSS50DAT",66,0)
 K ^TMP($J,LIST)
"RTN","PSS50DAT",67,0)
 I +$G(PSSIEN)'>0,($G(PSSFT)']"") S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50DAT",68,0)
 S SCR("S")=""
"RTN","PSS50DAT",69,0)
 I +$G(PSSFL)>0!($G(PSSPK)]"")!($G(PSSRTOI)=1) N PSS5ND,PSSZ3,PSSZ4 D SETSCRN^PSS50A
"RTN","PSS50DAT",70,0)
 I +$G(PSSIEN)>0 N PSSIEN2 S PSSIEN2=$$FIND1^DIC(50,"","A","`"_PSSIEN,,SCR("S"),"") D  K ^TMP("PSSP50",$J) Q
"RTN","PSS50DAT",71,0)
 .K ^TMP("DIERR",$J)
"RTN","PSS50DAT",72,0)
 .I +PSSIEN2'>0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50DAT",73,0)
 .S ^TMP($J,LIST,0)=1
"RTN","PSS50DAT",74,0)
 .K ^TMP("PSSP50",$J) D GETS^DIQ(50,+PSSIEN2,".01;62.01:62.05;905","IE","^TMP(""PSSP50"",$J)") S PSS(1)=0
"RTN","PSS50DAT",75,0)
 .F  S PSS(1)=$O(^TMP("PSSP50",$J,50,PSS(1))) Q:'PSS(1)  D SETDRG^PSS50A1
"RTN","PSS50DAT",76,0)
 I $G(PSSIEN)'="" S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50DAT",77,0)
 I $G(PSSFT)]"" D
"RTN","PSS50DAT",78,0)
 .I PSSFT["??" D LOOP^PSS50A1 Q
"RTN","PSS50DAT",79,0)
 .K ^TMP("DILIST",$J)
"RTN","PSS50DAT",80,0)
 .D FIND^DIC(50,,"@;.01","QP",PSSFT,,"B",SCR("S"),,"")
"RTN","PSS50DAT",81,0)
 .I +$G(^TMP("DILIST",$J,0))=0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50DAT",82,0)
 .I +^TMP("DILIST",$J,0)>0 S ^TMP($J,LIST,0)=+^TMP("DILIST",$J,0) N PSSXX S PSSXX=0 F  S PSSXX=$O(^TMP("DILIST",$J,PSSXX)) Q:'PSSXX  D
"RTN","PSS50DAT",83,0)
 ..S PSSIEN=+^TMP("DILIST",$J,PSSXX,0)
"RTN","PSS50DAT",84,0)
 ..K ^TMP("PSSP50",$J) D GETS^DIQ(50,+PSSIEN,".01;62.01:62.05;905","IE","^TMP(""PSSP50"",$J)") S PSS(1)=0
"RTN","PSS50DAT",85,0)
 ..F  S PSS(1)=$O(^TMP("PSSP50",$J,50,PSS(1))) Q:'PSS(1)  D SETDRG^PSS50A1
"RTN","PSS50DAT",86,0)
 K ^TMP("DILIST",$J),^TMP("PSSP50",$J)
"RTN","PSS50DAT",87,0)
 Q
"RTN","PSS50DAT",88,0)
 ;
"RTN","PSS50DAT",89,0)
LOOP ;
"RTN","PSS50DAT",90,0)
 N PSS50DD1,PSS50DD2,PSS50DD3,PSS50DD4,PSS50ER1,PSS50ER2,PSS50ER3,PSS50ER4,PSS51NFD,PSS52NFD,PSSG2N,PSS501NX
"RTN","PSS50DAT",91,0)
 D FIELD^DID(50,51,"Z","POINTER","PSS50DD1","PSS50ER1") S PSS51NFD=$G(PSS50DD1("POINTER"))
"RTN","PSS50DAT",92,0)
 D FIELD^DID(50,52,"Z","POINTER","PSS50DD2","PSS50ER2") S PSS52NFD=$G(PSS50DD2("POINTER"))
"RTN","PSS50DAT",93,0)
 D FIELD^DID(50,301,"Z","POINTER","PSS50DD3","PSS50ER3") S PSSG2N=$G(PSS50DD3("POINTER"))
"RTN","PSS50DAT",94,0)
 D FIELD^DID(50.1,1,"Z","POINTER","PSS50DD4","PSS50ER4") S PSS501NX=$G(PSS50DD4("POINTER"))
"RTN","PSS50DAT",95,0)
 N PSSENCT
"RTN","PSS50DAT",96,0)
 S PSSENCT=0
"RTN","PSS50DAT",97,0)
 S PSS(1)=0 F  S PSS(1)=$O(^PSDRUG(PSS(1))) Q:'PSS(1)  D
"RTN","PSS50DAT",98,0)
 .I $P($G(^PSDRUG(PSS(1),0)),"^")="" Q
"RTN","PSS50DAT",99,0)
 .I $G(PSSFL),$P($G(^PSDRUG(PSS(1),"I")),"^"),$P($G(^("I")),"^")'>PSSFL Q
"RTN","PSS50DAT",100,0)
 .I $G(PSSRTOI)=1,'$P($G(^PSDRUG(PSS(1),2)),"^") Q
"RTN","PSS50DAT",101,0)
 .;Naked reference below refers to ^PSDRUG(PSS(1),2)
"RTN","PSS50DAT",102,0)
 .I $G(PSSPK)]"" N PSSZ5,PSSZ6 S PSSZ5=0 F PSSZ6=1:1:$L(PSSPK) Q:PSSZ5  I $P($G(^(2)),"^",3)[$E(PSSPK,PSSZ6) S PSSZ5=1
"RTN","PSS50DAT",103,0)
 .I $G(PSSPK)]"",'PSSZ5 Q
"RTN","PSS50DAT",104,0)
 .D SETSUB1^PSS50AQM(PSS(1)),SETSUB2^PSS50AQM(PSS(1)),SETSUB3^PSS50AQM(PSS(1))
"RTN","PSS50DAT",105,0)
 .D SETALL^PSS50AQM,SETOLD^PSS50AQM,SETSYN^PSS50AQM,SETFMA^PSS50AQM
"RTN","PSS50DAT",106,0)
 .S PSSENCT=PSSENCT+1
"RTN","PSS50DAT",107,0)
 S ^TMP($J,LIST,0)=$S($G(PSSENCT):$G(PSSENCT),1:"-1^NO DATA FOUND")
"RTN","PSS50DAT",108,0)
 Q
"VER")
8.0^22.0
"^DD",50,50,400,0)
SERVICE CODE^NJ6,0^^PFS;1^K:+X'=X!(X>699999)!(X<600001)!(X?.E1"."1N.N) X
"^DD",50,50,400,3)
This is required for external billing purposes only. Answer must be between 600001-699999.
"^DD",50,50,400,21,0)
^^2^2^3060309^
"^DD",50,50,400,21,1,0)
The Charge Description Master (CDM) Change Control board assigns value
"^DD",50,50,400,21,2,0)
for this field. The value should be a number between 600001-699999. 
"^DD",50,50,400,23,0)
^.001^9^9^3060309^^^
"^DD",50,50,400,23,1,0)
This field was introduced as part of the Patient Financial Services System
"^DD",50,50,400,23,2,0)
(PFSS) project, to implement a new COTS billing system. Pharmacy 
"^DD",50,50,400,23,3,0)
application will maintain a CDM/Service Code for every dispensed item. It
"^DD",50,50,400,23,4,0)
requires that every prescription charge transaction passed to the external
"^DD",50,50,400,23,5,0)
billing system to pass a service code. If the drug is not matched to NDF
"^DD",50,50,400,23,6,0)
or the Service Code field in the VA PRODUCT file #50.68 is undefined, this
"^DD",50,50,400,23,7,0)
field will be prompted during DRUG ENTER/EDIT [PSS DRUG ENTER/EDIT]
"^DD",50,50,400,23,8,0)
option. In the event the drug is matched later to a NDF entry, previously
"^DD",50,50,400,23,9,0)
defined Service Code will be retained.
"^DD",50,50,400,"DT")
3050518
"BLD",6038,6)
^102
**END**
**END**

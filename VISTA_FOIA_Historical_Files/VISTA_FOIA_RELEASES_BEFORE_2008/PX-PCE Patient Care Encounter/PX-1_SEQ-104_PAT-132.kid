Released PX*1*132 SEQ #104
Extracted from mail message
**KIDS**:PX*1.0*132^

**INSTALL NAME**
PX*1.0*132
"BLD",5287,0)
PX*1.0*132^PCE PATIENT CARE ENCOUNTER^0^3040513^y
"BLD",5287,1,0)
^^7^7^3031217^
"BLD",5287,1,1,0)
Currently if a CPT code is part of a subset of E & M codes the user is 
"BLD",5287,1,2,0)
allowed to enter that CPT code only once per encounter and with a 
"BLD",5287,1,3,0)
quantity of only 1. There are 2 problems being addressed with this logic.
"BLD",5287,1,4,0)
1) If a CPT code begins with a letter it is being identified as an E & M 
"BLD",5287,1,5,0)
code whether or not it truly is. 
"BLD",5287,1,6,0)
2) Certain E & M codes need to allow a quantity of more than 1 to be 
"BLD",5287,1,7,0)
ordered.
"BLD",5287,4,0)
^9.64PA^^
"BLD",5287,"ABPKG")
n
"BLD",5287,"KRN",0)
^9.67PA^8989.52^19
"BLD",5287,"KRN",.4,0)
.4
"BLD",5287,"KRN",.401,0)
.401
"BLD",5287,"KRN",.402,0)
.402
"BLD",5287,"KRN",.403,0)
.403
"BLD",5287,"KRN",.5,0)
.5
"BLD",5287,"KRN",.84,0)
.84
"BLD",5287,"KRN",3.6,0)
3.6
"BLD",5287,"KRN",3.8,0)
3.8
"BLD",5287,"KRN",9.2,0)
9.2
"BLD",5287,"KRN",9.8,0)
9.8
"BLD",5287,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",5287,"KRN",9.8,"NM",1,0)
PXBPCPT^^0^B42046612
"BLD",5287,"KRN",9.8,"NM",2,0)
PXBPQUA^^0^B3449481
"BLD",5287,"KRN",9.8,"NM","B","PXBPCPT",1)

"BLD",5287,"KRN",9.8,"NM","B","PXBPQUA",2)

"BLD",5287,"KRN",19,0)
19
"BLD",5287,"KRN",19.1,0)
19.1
"BLD",5287,"KRN",101,0)
101
"BLD",5287,"KRN",409.61,0)
409.61
"BLD",5287,"KRN",771,0)
771
"BLD",5287,"KRN",870,0)
870
"BLD",5287,"KRN",8989.51,0)
8989.51
"BLD",5287,"KRN",8989.52,0)
8989.52
"BLD",5287,"KRN",8994,0)
8994
"BLD",5287,"KRN","B",.4,.4)

"BLD",5287,"KRN","B",.401,.401)

"BLD",5287,"KRN","B",.402,.402)

"BLD",5287,"KRN","B",.403,.403)

"BLD",5287,"KRN","B",.5,.5)

"BLD",5287,"KRN","B",.84,.84)

"BLD",5287,"KRN","B",3.6,3.6)

"BLD",5287,"KRN","B",3.8,3.8)

"BLD",5287,"KRN","B",9.2,9.2)

"BLD",5287,"KRN","B",9.8,9.8)

"BLD",5287,"KRN","B",19,19)

"BLD",5287,"KRN","B",19.1,19.1)

"BLD",5287,"KRN","B",101,101)

"BLD",5287,"KRN","B",409.61,409.61)

"BLD",5287,"KRN","B",771,771)

"BLD",5287,"KRN","B",870,870)

"BLD",5287,"KRN","B",8989.51,8989.51)

"BLD",5287,"KRN","B",8989.52,8989.52)

"BLD",5287,"KRN","B",8994,8994)

"BLD",5287,"QUES",0)
^9.62^^
"BLD",5287,"REQB",0)
^9.611^6^3
"BLD",5287,"REQB",3,0)
PX*1.0*121^2
"BLD",5287,"REQB",5,0)
PX*1.0*112^2
"BLD",5287,"REQB",6,0)
IB*2.0*257^2
"BLD",5287,"REQB","B","IB*2.0*257",6)

"BLD",5287,"REQB","B","PX*1.0*112",5)

"BLD",5287,"REQB","B","PX*1.0*121",3)

"MBREQ")
0
"PKG",413,-1)
1^1
"PKG",413,0)
PCE PATIENT CARE ENCOUNTER^PX^Patient Care Encounter (VA Parent package)^
"PKG",413,20,0)
^9.402P^^
"PKG",413,22,0)
^9.49I^1^1
"PKG",413,22,1,0)
1.0^2960812^2960913^12537
"PKG",413,22,1,"PAH",1,0)
132^3040513
"PKG",413,22,1,"PAH",1,1,0)
^^7^7^3040513
"PKG",413,22,1,"PAH",1,1,1,0)
Currently if a CPT code is part of a subset of E & M codes the user is 
"PKG",413,22,1,"PAH",1,1,2,0)
allowed to enter that CPT code only once per encounter and with a 
"PKG",413,22,1,"PAH",1,1,3,0)
quantity of only 1. There are 2 problems being addressed with this logic.
"PKG",413,22,1,"PAH",1,1,4,0)
1) If a CPT code begins with a letter it is being identified as an E & M 
"PKG",413,22,1,"PAH",1,1,5,0)
code whether or not it truly is. 
"PKG",413,22,1,"PAH",1,1,6,0)
2) Certain E & M codes need to allow a quantity of more than 1 to be 
"PKG",413,22,1,"PAH",1,1,7,0)
ordered.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PXBPCPT")
0^1^B42046612
"RTN","PXBPCPT",1,0)
PXBPCPT ;ISL/JVS,ESW - PROMPT CPT ; 8/25/03 1:13pm
"RTN","PXBPCPT",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**11,73,89,112,121,132**;Aug 12, 1996
"RTN","PXBPCPT",3,0)
 ;
"RTN","PXBPCPT",4,0)
 ;
"RTN","PXBPCPT",5,0)
 ;
"RTN","PXBPCPT",6,0)
CPT ;--CPT CODE
"RTN","PXBPCPT",7,0)
 ;SELINE=LINE NUMBER OF SELECTED ITEM
"RTN","PXBPCPT",8,0)
 N TIMED,PXBUT,EDATA,DIC,LINE,XFLAG,SELINE
"RTN","PXBPCPT",9,0)
 N I,X,Y,Q,DOUBLEQQ,NF,BAD,OK,CPT,PXEDIT
"RTN","PXBPCPT",10,0)
 I '$D(^DISV(DUZ,"PXBCPT-1")) S ^DISV(DUZ,"PXBCPT-1")=" "
"RTN","PXBPCPT",11,0)
 I '$D(IOSC) D TERM^PXBCC
"RTN","PXBPCPT",12,0)
 S DOUBLEQQ=0,PXEDIT=""
"RTN","PXBPCPT",13,0)
 S TIMED="I '$T!(DATA[""^"")!(DATA="""")"
"RTN","PXBPCPT",14,0)
 S DIC("S")="I $$CPTSCREN^PXBUTL(Y,IDATE)"
"RTN","PXBPCPT",15,0)
C ;--SECOND ENTRY POINT
"RTN","PXBPCPT",16,0)
 W IOSC
"RTN","PXBPCPT",17,0)
 ;---DYNAMIC  HEADER-----------------
"RTN","PXBPCPT",18,0)
 I '$D(CYCL) D
"RTN","PXBPCPT",19,0)
 .I PXBCNT=0,DOUBLEQQ=0 D LOC^PXBCC(2,10) W IOUON,"...There are "_$G(PXBCNT)_" PROCEDURES associated with this encounter.",IOUOFF,IOELEOL
"RTN","PXBPCPT",20,0)
 .I PXBCNT=1,DOUBLEQQ=0 D LOC^PXBCC(2,10) W IOUON,"...There is "_$G(PXBCNT)_" PROCEDURE associated with this encounter.",IOUOFF,IOELEOL
"RTN","PXBPCPT",21,0)
 .I PXBCNT>1,DOUBLEQQ=0 D LOC^PXBCC(2,10) W IOUON,"...There are "_$G(PXBCNT)_" PROCEDURES associated with this encounter.",IOUOFF,IOELEOL
"RTN","PXBPCPT",22,0)
 ;
"RTN","PXBPCPT",23,0)
 D LOC^PXBCC(15,0)
"RTN","PXBPCPT",24,0)
 ;I PXBCNT>30 
"RTN","PXBPCPT",25,0)
 ;W IOCUU,IOELEOL,
"RTN","PXBPCPT",26,0)
 W:PXTLNS>10 !,"Enter '+' for next page, '-' for last page." ;,IORC
"RTN","PXBPCPT",27,0)
 D WIN17^PXBCC(PXBCNT)
"RTN","PXBPCPT",28,0)
 I '$D(^TMP("PXK",$J,"CPT")) W !,"Enter PROCEDURE (CPT CODE): "
"RTN","PXBPCPT",29,0)
 I $D(^TMP("PXK",$J,"CPT")) W !,"Enter ",IOINHI,"NEXT",IOINLOW," PROCEDURE (CPT CODE): "
"RTN","PXBPCPT",30,0)
 W IOELEOL R DATA:DTIME S EDATA=DATA
"RTN","PXBPCPT",31,0)
C1 ;----Third entry point
"RTN","PXBPCPT",32,0)
 X TIMED I  S PXBUT=1 S:DATA="^^" PXBEXIT=0 S:DATA="^^^" PXBRRR="" G CPTX
"RTN","PXBPCPT",33,0)
 I DATA?1.N1"E".NAP S DATA=" "_DATA
"RTN","PXBPCPT",34,0)
 I $L(DATA)>200 S (DATA,EDATA)=$E(DATA,1,199)
"RTN","PXBPCPT",35,0)
 I DATA?24.N S (DATA,EDATA)=$E(DATA,1,24)
"RTN","PXBPCPT",36,0)
 D CASE^PXBUTL
"RTN","PXBPCPT",37,0)
 ;----SPACE BAR---
"RTN","PXBPCPT",38,0)
 I DATA=" ",$D(^DISV(DUZ,"PXBCPT-1")) S DATA=^DISV(DUZ,"PXBCPT-1") W DATA
"RTN","PXBPCPT",39,0)
 ;---------------
"RTN","PXBPCPT",40,0)
 I DATA["^P" G CPTX
"RTN","PXBPCPT",41,0)
 I DATA["^C" G CPTX
"RTN","PXBPCPT",42,0)
 ;
"RTN","PXBPCPT",43,0)
 I ((DATA="+")!(DATA="-")) D DISCPT4^PXBDCPT(DATA) G C
"RTN","PXBPCPT",44,0)
 ;
"RTN","PXBPCPT",45,0)
M ;--------If Multiple entries have been entered
"RTN","PXBPCPT",46,0)
 D ADDM^PXBPCPT1
"RTN","PXBPCPT",47,0)
 I $G(NF) G C1
"RTN","PXBPCPT",48,0)
 ;
"RTN","PXBPCPT",49,0)
DEL ;--------If Multiple deleting
"RTN","PXBPCPT",50,0)
 D DELM^PXBPCPT1
"RTN","PXBPCPT",51,0)
 I DATA["^C" G CPTX
"RTN","PXBPCPT",52,0)
 I $G(NF) G C1
"RTN","PXBPCPT",53,0)
 ;
"RTN","PXBPCPT",54,0)
 D MOD
"RTN","PXBPCPT",55,0)
 ;
"RTN","PXBPCPT",56,0)
LI ;--------If picked a line number display 
"RTN","PXBPCPT",57,0)
 ;
"RTN","PXBPCPT",58,0)
 I (DATA>0)&(DATA<(PXBCNT+1))&($L(DATA)'>$L(PXBCNT)) D
"RTN","PXBPCPT",59,0)
 .S XFLAG=1
"RTN","PXBPCPT",60,0)
 .D DISCPT4^PXBDCPT(PXBSAM(DATA,"LINE"))
"RTN","PXBPCPT",61,0)
 .D REVCPT^PXBCC(DATA,1)
"RTN","PXBPCPT",62,0)
 .S SELINE=DATA
"RTN","PXBPCPT",63,0)
 .F I=1:1:$L(DATA) W IOCUB,IOECH
"RTN","PXBPCPT",64,0)
 .S CPTQUA=$P($G(PXBSAM(DATA)),"^",2)
"RTN","PXBPCPT",65,0)
 .S DATA=$P($G(PXBSAM(DATA)),"^",1)
"RTN","PXBPCPT",66,0)
 .;I $G(Q)'>1 W DATA
"RTN","PXBPCPT",67,0)
 I $D(XFLAG),XFLAG=1 S Y=DATA G FIN
"RTN","PXBPCPT",68,0)
 ;
"RTN","PXBPCPT",69,0)
 ;
"RTN","PXBPCPT",70,0)
 ;--------If CPT is already in the file
"RTN","PXBPCPT",71,0)
 I $D(PXBKY(DATA)) D  I +PXEDIT<0 S DATA="^C" G C1
"RTN","PXBPCPT",72,0)
 .D DISCPT4^PXBDCPT(PXBSAM($O(PXBKY(DATA,0)),"LINE"))
"RTN","PXBPCPT",73,0)
 .K Q
"RTN","PXBPCPT",74,0)
 .D TIMES^PXBUTL(DATA)
"RTN","PXBPCPT",75,0)
 .S PXEDIT=$$MULTI(DATA) Q:+PXEDIT<0
"RTN","PXBPCPT",76,0)
 .I Q=1 D
"RTN","PXBPCPT",77,0)
 ..S LINE=$O(PXBKY(DATA,0))
"RTN","PXBPCPT",78,0)
 ..S XFLAG=1
"RTN","PXBPCPT",79,0)
 ..Q:PXEDIT="A"
"RTN","PXBPCPT",80,0)
 ..D REVCPT^PXBCC(LINE,1)
"RTN","PXBPCPT",81,0)
 ..S CPTQUA=$P($G(PXBSAM(LINE)),"^",2)
"RTN","PXBPCPT",82,0)
 ..S SELINE=$O(Q(0))
"RTN","PXBPCPT",83,0)
 .I Q>1,PXEDIT="E" D
"RTN","PXBPCPT",84,0)
 ..N PXPG
"RTN","PXBPCPT",85,0)
 ..S NLINE=0
"RTN","PXBPCPT",86,0)
 ..S PXPG=+$G(^TMP("PXBDCPT",$J,"START"))+10
"RTN","PXBPCPT",87,0)
 ..F  S NLINE=$O(Q(NLINE)) Q:NLINE=""  Q:PXBSAM(NLINE,"LINE")>PXPG  D
"RTN","PXBPCPT",88,0)
 ...D REVCPT^PXBCC(NLINE,1)
"RTN","PXBPCPT",89,0)
 I '$G(Q) K SELINE
"RTN","PXBPCPT",90,0)
 I PXEDIT="E",$D(Q),Q>1 D  G:DATA="^C" C1 G LI
"RTN","PXBPCPT",91,0)
 .D WHICH^PXBPWCH S:DATA["^" DATA="^C"
"RTN","PXBPCPT",92,0)
 I $D(XFLAG),XFLAG=1 S Y=DATA G FIN
"RTN","PXBPCPT",93,0)
 ;
"RTN","PXBPCPT",94,0)
 ;--------Need to do a DIC lookup on data
"RTN","PXBPCPT",95,0)
 I DATA'="??" D  G:DATA="^C" C I DATA="?" G C
"RTN","PXBPCPT",96,0)
 .D:DATA="?" EN1^PXBHLP0("PXB","CPT",1,"",1)
"RTN","PXBPCPT",97,0)
 I DATA="??" D  G:UDATA="^C" C1 G FIN
"RTN","PXBPCPT",98,0)
 .S DOUBLEQQ=1
"RTN","PXBPCPT",99,0)
 .D EN1^PXBHLP0("PXB","CPT","",1,2)
"RTN","PXBPCPT",100,0)
 .I $L(DATA,"^")>1 D
"RTN","PXBPCPT",101,0)
 ..S DATA=+$P(DATA,"^",2)_$S($P(DATA,U,3)]"":"-"_$P(DATA,U,3),1:"")
"RTN","PXBPCPT",102,0)
 ..D MOD
"RTN","PXBPCPT",103,0)
 ..S Y=DATA
"RTN","PXBPCPT",104,0)
 .S:$G(UDATA)="" UDATA="^C"
"RTN","PXBPCPT",105,0)
 .S:UDATA="^C" (DATA,EDATA,Y)=UDATA
"RTN","PXBPCPT",106,0)
 ;
"RTN","PXBPCPT",107,0)
 ;--If a "?" is NOT entered during lookup
"RTN","PXBPCPT",108,0)
 S FROM="CPT",(VAL,Y)=$P($P($$DOUBLE1^PXBGCPT2(FROM),"^",2),"--",1)
"RTN","PXBPCPT",109,0)
 S (X,DATA,EDATA)=VAL,DIC=81,DIC(0)="MZ",DIC("S")="I $P($$CPT^ICPTCOD(Y,IDATE),U,7)" D ^DIC
"RTN","PXBPCPT",110,0)
 I Y<1 S DATA="^C" G C1
"RTN","PXBPCPT",111,0)
 ;
"RTN","PXBPCPT",112,0)
 ;--If Y is good and already in file...
"RTN","PXBPCPT",113,0)
 I $D(Y),$D(PXBKY(Y)) W IORC,IOCUU,IOEDEOP,! D
"RTN","PXBPCPT",114,0)
 .D DISCPT4^PXBDCPT($O(PXBKY($P(Y,"^",2),0)))
"RTN","PXBPCPT",115,0)
 .S LINE=$O(PXBKY($P(Y,"^",2),0)) D REVCPT^PXBCC(LINE,1)
"RTN","PXBPCPT",116,0)
 .S CPTQUA=$P($G(PXBSAM(LINE)),"^",2)
"RTN","PXBPCPT",117,0)
 ;
"RTN","PXBPCPT",118,0)
 ;
"RTN","PXBPCPT",119,0)
FIN ;--FINISH CPT
"RTN","PXBPCPT",120,0)
 I $G(SELINE) S $P(REQE,"^",1)=$P($G(PXBSAM(SELINE)),"^",3)
"RTN","PXBPCPT",121,0)
 I $P(REQE,"^",1)="" S $P(REQE,"^",1)="...No Provider Selected..."
"RTN","PXBPCPT",122,0)
 I $L(Y,"^")'>1 S X=Y,DIC=81,DIC(0)="ZM",DIC("S")="I $P($$CPT^ICPTCOD(Y,IDATE),U,7)" D ^DIC
"RTN","PXBPCPT",123,0)
 I Y<0 D HELP^PXBUTL0("CPTM") G C
"RTN","PXBPCPT",124,0)
 S OK=$$CPTOK^PXBUTL(+Y,IDATE) D  G:+OK=0 C
"RTN","PXBPCPT",125,0)
 .I +OK=0 W IOCUF,IOCUF,IORVON,"INACTIVE!--",IORVOFF D HELP1^PXBUTL1("CPTI") ;--HELP
"RTN","PXBPCPT",126,0)
 S CPT=Y(0)
"RTN","PXBPCPT",127,0)
 S ^DISV(DUZ,"PXBCPT-1")=$P(CPT,"^",1)
"RTN","PXBPCPT",128,0)
 I $D(PXBNCPT) S PXBNCPTF=1
"RTN","PXBPCPT",129,0)
 I $D(PXBKY(Y(0,0))),$G(SELINE) D
"RTN","PXBPCPT",130,0)
 .S $P(REQI,"^",8)=$O(PXBSKY(SELINE,0))
"RTN","PXBPCPT",131,0)
 .S PREDOC=$P(PXBSAM(SELINE),"^",3)
"RTN","PXBPCPT",132,0)
 .I $D(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1))) D
"RTN","PXBPCPT",133,0)
 ..Q:$P(REQI,"^",8)]""
"RTN","PXBPCPT",134,0)
 ..S $P(REQI,"^",8)=$O(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1),0))
"RTN","PXBPCPT",135,0)
 .I $D(PXBPRV($P(REQE,"^",1))) D
"RTN","PXBPCPT",136,0)
 ..S CPTQUA=$P(PXBSAM($O(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1),$O(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1),0)),0))),"^",2)
"RTN","PXBPCPT",137,0)
 I $D(PXBKY(Y(0,0))),'$G(SELINE) D
"RTN","PXBPCPT",138,0)
 .;S $P(REQI,"^",8)=$O(PXBSKY($O(PXBKY(Y(0,0),0)),0))
"RTN","PXBPCPT",139,0)
 .S PREDOC=$P(PXBSAM($O(PXBKY(Y(0,0),0))),"^",3)
"RTN","PXBPCPT",140,0)
 .I $D(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1))) D
"RTN","PXBPCPT",141,0)
 ..S $P(REQI,"^",8)=$O(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1),0))
"RTN","PXBPCPT",142,0)
 .I $D(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1))) D
"RTN","PXBPCPT",143,0)
 ..S CPTQUA=$P(PXBSAM($O(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1),$O(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1),0)),0))),"^",2)
"RTN","PXBPCPT",144,0)
 S $P(REQI,"^",3)=+Y
"RTN","PXBPCPT",145,0)
 S $P(REQE,"^",3)=$P(CPT,"^",1)_"-- "_$P(CPT,"^",2)
"RTN","PXBPCPT",146,0)
 S PXBNCPT($P(CPT,"^",1))=$P(REQI,"^",8)
"RTN","PXBPCPT",147,0)
 S:$P(REQI,"^",8)]"" PXBNCPT($P(CPT,"^",1),$P(REQI,"^",8))=""
"RTN","PXBPCPT",148,0)
 ;
"RTN","PXBPCPT",149,0)
CPTX ;--CPT Exit and cleanup
"RTN","PXBPCPT",150,0)
 I $P(REQE,"^",1)="" S $P(REQE,"^",1)="...No Provider Selected..."
"RTN","PXBPCPT",151,0)
 I $G(WHAT)="INTV",DATA="^" S PXBEXIT="^^"
"RTN","PXBPCPT",152,0)
 I $D(PXBRRR) S DATA="^"
"RTN","PXBPCPT",153,0)
 I $D(PREDOC) D
"RTN","PXBPCPT",154,0)
 .I PREDOC]""&($P(REQE,"^",1)'[PREDOC) W !,IOINHI,"--WARNING!",IOINLOW," Currently stored Provider of service:-",IOINHI,PREDOC,IOINLOW D
"RTN","PXBPCPT",155,0)
 ..I '$D(PXBPRV($P(REQE,"^",1),$P(CPT,"^",1))) S $P(REQI,"^",8)=""
"RTN","PXBPCPT",156,0)
 K PXBDPRV,PREDOC
"RTN","PXBPCPT",157,0)
 W IOEDEOP
"RTN","PXBPCPT",158,0)
 Q
"RTN","PXBPCPT",159,0)
MOD ;---Separate CPT modifiers from CPT codes in entry string, if entered
"RTN","PXBPCPT",160,0)
 I DATA?1.N1"-".NE D
"RTN","PXBPCPT",161,0)
 .S PXMODSTR=$P(DATA,"-",2)
"RTN","PXBPCPT",162,0)
 .S (DATA,EDATA)=$P(DATA,"-",1)
"RTN","PXBPCPT",163,0)
 Q
"RTN","PXBPCPT",164,0)
 ;
"RTN","PXBPCPT",165,0)
MULTI(CPTCD) ;--Prompt user to Edit existing CPT code or Add as new entry
"RTN","PXBPCPT",166,0)
 ;
"RTN","PXBPCPT",167,0)
 N DIR,DA,X,Y
"RTN","PXBPCPT",168,0)
 S DIR(0)="SB^E:EDIT;A:ADD"
"RTN","PXBPCPT",169,0)
 S DIR("A")="Do you wish to (E)dit or (A)dd"
"RTN","PXBPCPT",170,0)
 ;PX*2.0*132
"RTN","PXBPCPT",171,0)
 I (($E(CPTCD)?1N)&($D(^IBE(357.69,+CPTCD))))!(($E(CPTCD)?1A)&($D(^IBE(357.69,CPTCD)))) D
"RTN","PXBPCPT",172,0)
 .S DIR(0)="SB^E:EDIT",DIR("A")="You may only (E)dit this code, no duplicate E&M codes allowed."
"RTN","PXBPCPT",173,0)
 S DIR("A",1)="CPT "_CPTCD_" already on file for this Encounter"
"RTN","PXBPCPT",174,0)
 D ^DIR
"RTN","PXBPCPT",175,0)
 I Y']""!(Y="^") Q -1
"RTN","PXBPCPT",176,0)
 Q Y
"RTN","PXBPQUA")
0^2^B3449481
"RTN","PXBPQUA",1,0)
PXBPQUA ;ISL/JVS,ESW - PROMPT QUANTITY ; 6/18/03 6:34pm
"RTN","PXBPQUA",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**11,112,132**;Aug 12, 1996
"RTN","PXBPQUA",3,0)
 ;
"RTN","PXBPQUA",4,0)
 ;
"RTN","PXBPQUA",5,0)
 ;
"RTN","PXBPQUA",6,0)
 ;
"RTN","PXBPQUA",7,0)
QUA ;--Quantity
"RTN","PXBPQUA",8,0)
 N TIMED,DATA,DIC,X
"RTN","PXBPQUA",9,0)
 K PXBUT,EDATA
"RTN","PXBPQUA",10,0)
 I '$D(IOEDEOP) D TERM^PXBCC
"RTN","PXBPQUA",11,0)
 S TIMED="I '$T!(DATA[""^"")"
"RTN","PXBPQUA",12,0)
Q ;--SECOND ENTRY POINT
"RTN","PXBPQUA",13,0)
 W !!,"How many times was this procedure performed: "_$S($G(CPTQUA):CPTQUA,1:1)_"//",IOELEOL R DATA:DTIME S EDATA=DATA
"RTN","PXBPQUA",14,0)
Q1 ;---
"RTN","PXBPQUA",15,0)
 X TIMED I  S PXBUT=1 D RSET^PXBDREQ("CPT") G QUAX
"RTN","PXBPQUA",16,0)
 I DATA?.N1"E".NAP S DATA=" "_DATA
"RTN","PXBPQUA",17,0)
 I DATA?24.N S DATA=$E(DATA,1,24)
"RTN","PXBPQUA",18,0)
 ;----SPACE BAR---
"RTN","PXBPQUA",19,0)
 I DATA'=" ",DATA'["^",DATA'="" S ^DISV(DUZ,"PXBQUA-5")=DATA
"RTN","PXBPQUA",20,0)
 I DATA=" ",$D(^DISV(DUZ,"PXBQUA-5")) S DATA=^DISV(DUZ,"PXBQUA-5") W DATA
"RTN","PXBPQUA",21,0)
 ;-----------------
"RTN","PXBPQUA",22,0)
 I DATA]"",DATA'?.2N D:DATA="?" HELP^PXBUTL0("QU1") D:DATA="??" HELP^PXBUTL0("QU2") G Q
"RTN","PXBPQUA",23,0)
 I DATA'="",DATA<1!(DATA>100) G Q
"RTN","PXBPQUA",24,0)
 I DATA="",$G(CPTQUA) S DATA=CPTQUA
"RTN","PXBPQUA",25,0)
 I DATA="",'$G(CPTQUA) S DATA=1
"RTN","PXBPQUA",26,0)
 I DATA="?" D HELP^PXBUTL0("QU1") G QUA
"RTN","PXBPQUA",27,0)
 I DATA="??" D HELP^PXBUTL0("QU2") G QUA
"RTN","PXBPQUA",28,0)
QFIN ;--FINISH UP VARIABLES
"RTN","PXBPQUA",29,0)
 S QUA=DATA
"RTN","PXBPQUA",30,0)
 N VALP S VALP=+$P($G(REQI),U,3)
"RTN","PXBPQUA",31,0)
 I +QUA>1,VALP>0,$D(^IBE(357.69,VALP)) D
"RTN","PXBPQUA",32,0)
 .;PX*1.0*132,IB*2*257
"RTN","PXBPQUA",33,0)
 .I $$GET1^DIQ(357.69,VALP,.06,"I")'="Y" W !,"Only one E&M code allowed, quantity changed to 1." S QUA=1
"RTN","PXBPQUA",34,0)
 S $P(REQI,"^",4)=$P(QUA,"^",1)
"RTN","PXBPQUA",35,0)
 S $P(REQE,"^",4)=$P(QUA,"^",1)
"RTN","PXBPQUA",36,0)
QUAX ;--EXIT AND CLEANUP
"RTN","PXBPQUA",37,0)
 K X,CPTQUA
"RTN","PXBPQUA",38,0)
 Q
"VER")
8.0^22
**END**
**END**

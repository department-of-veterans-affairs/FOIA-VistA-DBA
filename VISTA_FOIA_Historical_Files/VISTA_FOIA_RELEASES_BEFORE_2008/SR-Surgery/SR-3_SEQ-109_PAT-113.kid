Released SR*3*113 SEQ #109
Extracted from mail message
**KIDS**:SR*3.0*113^

**INSTALL NAME**
SR*3.0*113
"BLD",3981,0)
SR*3.0*113^SURGERY^0^3030321^y
"BLD",3981,1,0)
^^4^4^3030113^
"BLD",3981,1,1,0)
This patch provides the ability to display a new confidential 
"BLD",3981,1,2,0)
communication address when using the Print 30 Day Follow-up Letters [SROA 
"BLD",3981,1,3,0)
REPRINT LETTERS] option within VISTA Surgery if the Confidential 
"BLD",3981,1,4,0)
Communication Types contain "All Others".
"BLD",3981,4,0)
^9.64PA^^
"BLD",3981,"ABPKG")
n
"BLD",3981,"KRN",0)
^9.67PA^8989.52^19
"BLD",3981,"KRN",.4,0)
.4
"BLD",3981,"KRN",.4,"NM",0)
^9.68A^^
"BLD",3981,"KRN",.401,0)
.401
"BLD",3981,"KRN",.402,0)
.402
"BLD",3981,"KRN",.403,0)
.403
"BLD",3981,"KRN",.5,0)
.5
"BLD",3981,"KRN",.84,0)
.84
"BLD",3981,"KRN",3.6,0)
3.6
"BLD",3981,"KRN",3.8,0)
3.8
"BLD",3981,"KRN",9.2,0)
9.2
"BLD",3981,"KRN",9.8,0)
9.8
"BLD",3981,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3981,"KRN",9.8,"NM",1,0)
SROALET^^0^B20305580
"BLD",3981,"KRN",9.8,"NM","B","SROALET",1)

"BLD",3981,"KRN",19,0)
19
"BLD",3981,"KRN",19.1,0)
19.1
"BLD",3981,"KRN",101,0)
101
"BLD",3981,"KRN",409.61,0)
409.61
"BLD",3981,"KRN",771,0)
771
"BLD",3981,"KRN",870,0)
870
"BLD",3981,"KRN",8989.51,0)
8989.51
"BLD",3981,"KRN",8989.52,0)
8989.52
"BLD",3981,"KRN",8994,0)
8994
"BLD",3981,"KRN","B",.4,.4)

"BLD",3981,"KRN","B",.401,.401)

"BLD",3981,"KRN","B",.402,.402)

"BLD",3981,"KRN","B",.403,.403)

"BLD",3981,"KRN","B",.5,.5)

"BLD",3981,"KRN","B",.84,.84)

"BLD",3981,"KRN","B",3.6,3.6)

"BLD",3981,"KRN","B",3.8,3.8)

"BLD",3981,"KRN","B",9.2,9.2)

"BLD",3981,"KRN","B",9.8,9.8)

"BLD",3981,"KRN","B",19,19)

"BLD",3981,"KRN","B",19.1,19.1)

"BLD",3981,"KRN","B",101,101)

"BLD",3981,"KRN","B",409.61,409.61)

"BLD",3981,"KRN","B",771,771)

"BLD",3981,"KRN","B",870,870)

"BLD",3981,"KRN","B",8989.51,8989.51)

"BLD",3981,"KRN","B",8989.52,8989.52)

"BLD",3981,"KRN","B",8994,8994)

"BLD",3981,"QUES",0)
^9.62^^
"BLD",3981,"REQB",0)
^9.611^1^1
"BLD",3981,"REQB",1,0)
SR*3.0*98^1
"BLD",3981,"REQB","B","SR*3.0*98",1)

"MBREQ")
0
"PKG",167,-1)
1^1
"PKG",167,0)
SURGERY^SR^SURGICAL DATA COLLECTION AND OPERATIONS SCHEDULING
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
3.0^2930624^2930811
"PKG",167,22,1,"PAH",1,0)
113^3030321
"PKG",167,22,1,"PAH",1,1,0)
^^4^4^3030321
"PKG",167,22,1,"PAH",1,1,1,0)
This patch provides the ability to display a new confidential 
"PKG",167,22,1,"PAH",1,1,2,0)
communication address when using the Print 30 Day Follow-up Letters [SROA 
"PKG",167,22,1,"PAH",1,1,3,0)
REPRINT LETTERS] option within VISTA Surgery if the Confidential 
"PKG",167,22,1,"PAH",1,1,4,0)
Communication Types contain "All Others".
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SROALET")
0^1^B20305580
"RTN","SROALET",1,0)
SROALET ;B'HAM ISC/MAM - PRINT 30 DAY LETTER ; [ 11/20/00  8:16 AM ]
"RTN","SROALET",2,0)
 ;;3.0; Surgery ;**38,63,95,98,113**;24 Jun 93
"RTN","SROALET",3,0)
 K VADM,VAPA I $P($G(^SRF(SRTN,30)),"^")!'$P($G(^SRF(SRTN,.2)),"^",12) Q
"RTN","SROALET",4,0)
 S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^",6)["N" Q
"RTN","SROALET",5,0)
 I $P(SR("RA"),"^")="" Q
"RTN","SROALET",6,0)
 S DFN=$P(^SRF(SRTN,0),"^") S X=$G(^DPT(DFN,.35)) Q:$P(X,"^")'=""  D DEM^VADPT,ADD^VADPT
"RTN","SROALET",7,0)
 S SRANAME=$P(VADM(1),"^"),X=$P(SRANAME,",") D
"RTN","SROALET",8,0)
 .I X["-" N SRNM,J,Z D  Q
"RTN","SROALET",9,0)
 ..F J=1:1 S Z=$P(X,"-",J) Q:Z=""  S SRNM(J)=$E(Z)_$TR($E(Z,2,$L(Z)),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")
"RTN","SROALET",10,0)
 ..S Y=SRNM(1) F J=2:1 Q:'$D(SRNM(J))  S Y=Y_"-"_SRNM(J)
"RTN","SROALET",11,0)
 .S Y=$E(X)_$TR($E(X,2,$L(X)),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")
"RTN","SROALET",12,0)
 S TITLE=$S($P(VADM(5),"^")="F":"Ms. ",1:"Mr. "),SRANAME=TITLE_Y
"RTN","SROALET",13,0)
 S SRADATE=$E(SRSDATE,4,5)_"/"_$E(SRSDATE,6,7)_"/"_$E(SRSDATE,2,3)
"RTN","SROALET",14,0)
 S Y=DT D D^DIQ S SRDT=Y
"RTN","SROALET",15,0)
 S SEX=$P(VADM(5),"^")
"RTN","SROALET",16,0)
 S SRNM=$P(VADM(1),",",2)_" "_$P(VADM(1),",")
"RTN","SROALET",17,0)
 W:$Y @IOF W !!!!!!!!!!,?4,SRNM,?60,SRDT
"RTN","SROALET",18,0)
 N SRCCADD S SRCCADD=0 D CCADD
"RTN","SROALET",19,0)
 I 'SRCCADD S STATE="" I VAPA(5) S STATE=$P(^DIC(5,$P(VAPA(5),"^"),0),"^",2)
"RTN","SROALET",20,0)
 I 'SRCCADD W !,?4,VAPA(1) W:$G(VAPA(2))'="" !,?4,VAPA(2) W:$G(VAPA(3))'="" !,?4,VAPA(3) W:VAPA(4)'="" !,?4,VAPA(4)_", "_STATE_" "_VAPA(6)
"RTN","SROALET",21,0)
 W !!!,?4,"Dear "_SRANAME_","
"RTN","SROALET",22,0)
MM ;
"RTN","SROALET",23,0)
 N SRDIV S SRDIV=$$SITE^SROUTL0(SRTN) I 'SRDIV D DFLT Q
"RTN","SROALET",24,0)
 I '$O(^SRO(133,SRDIV,5,0)) D DFLT Q
"RTN","SROALET",25,0)
 W ! S SRLINE=0 F  S SRLINE=$O(^SRO(133,SRDIV,5,SRLINE)) Q:'SRLINE  W !,?4,^SRO(133,SRDIV,5,SRLINE,0)
"RTN","SROALET",26,0)
 Q
"RTN","SROALET",27,0)
DFLT W !!,?4,"One month ago, you had an operation at the VA Medical Center.  We are",!,?4,"interested in how you feel.  Have you had any health problems since your",!,?4,"operation ?  We would like to hear from you.  Please take a few minutes"
"RTN","SROALET",28,0)
 W !,?4,"to answer these questions and return this letter in the self-addressed",!,?4,"stamped envelope."
"RTN","SROALET",29,0)
 W !!,?4,"Have you been to a hospital or seen a doctor for any reason since your",!,?4,"operation ?   ___ Yes  ___ No"
"RTN","SROALET",30,0)
 W !!,?4,"If you answered NO, you do not need to answer any more questions.  Please",!,?4,"return this sheet in the self-addressed stamped envelope."
"RTN","SROALET",31,0)
 W !!,?4,"If you have answered YES, please answer the following questions.",!!,?7,"1) Have you been seen in an outpatient clinic or doctor's office ? "
"RTN","SROALET",32,0)
 W !,?10,"___ Yes  ___ No",!!,?10,"Why did you go to the clinic or doctor's office ? ________________"
"RTN","SROALET",33,0)
 W !!,?10,"Where ? (name and location) _____________________  Date ? ________"
"RTN","SROALET",34,0)
 W !!,?10,"Who was your doctor ? ____________________________________________"
"RTN","SROALET",35,0)
 W !!!,?7,"2) Were you admitted to a hospital ?  ___ Yes  ___ No",!!,?10,"Why did you go to the hospital ? _________________________________"
"RTN","SROALET",36,0)
 W !!,?10,"Where ? (name and location) _____________________  Date ? ________"
"RTN","SROALET",37,0)
 W !!,?10,"Who was your doctor ? ____________________________________________"
"RTN","SROALET",38,0)
 W !!!,?4,"Please return this letter whether or not you have had any medical problems.",!,?4,"Your health and opinion are important to us.  Thank You.",!!,?4,"Sincerely,",!!!,?4,"Surgical Clinical Nurse Reviewer"
"RTN","SROALET",39,0)
 Q
"RTN","SROALET",40,0)
 ;
"RTN","SROALET",41,0)
CCADD ; Get Confidential Correspondence Address if one is active
"RTN","SROALET",42,0)
 ; and has the category "all other".
"RTN","SROALET",43,0)
 ;
"RTN","SROALET",44,0)
 N NSTATE S NSTATE=""
"RTN","SROALET",45,0)
 ; See if CC address exists
"RTN","SROALET",46,0)
 I '$G(VAPA(12)) Q
"RTN","SROALET",47,0)
 ; code to check the CC category in the variable array VAPA(22)
"RTN","SROALET",48,0)
 I $P($G(VAPA(22,5)),"^",3)'="Y" Q
"RTN","SROALET",49,0)
 ; if the category "All Other" is active, set SRCCADD=1 and print the CC address
"RTN","SROALET",50,0)
 S SRCCADD=1
"RTN","SROALET",51,0)
 S:$G(VAPA(17)) NSTATE=$P(^DIC(5,$P(VAPA(17),"^"),0),"^",2)
"RTN","SROALET",52,0)
 W:$G(VAPA(13))'="" !,?4,VAPA(13) W:$G(VAPA(14))'="" !,?4,VAPA(14) W:$G(VAPA(15))'="" !,?4,VAPA(15) W:$G(VAPA(16))'="" !,?4,VAPA(16)_", "_NSTATE_" "_$P(VAPA(18),"^",2)
"RTN","SROALET",53,0)
 Q
"VER")
8.0^22.0
**END**
**END**

$TXT Created by CHESNEY,CHRISTINE M at VAB-RAD.ISC-SF.VA.GOV  (KIDS) on TUESDAY, 08/14/01 at 04:34
=============================================================================
Run Date: AUG 21, 2001                     Designation: MPIF*1*18
Package : MPIF - MASTER PATIENT INDEX VISTA Priority: Mandatory
Version : 1        SEQ #16                      Status: Released
=============================================================================

Associated patches: (v)MPIF*1*1    <<= must be installed BEFORE `MPIF*1*18'
                    (v)MPIF*1*3    <<= must be installed BEFORE `MPIF*1*18'
                    (v)MPIF*1*9    <<= must be installed BEFORE `MPIF*1*18'
                    (v)MPIF*1*16   <<= must be installed BEFORE `MPIF*1*18'

Subject: Locks on MPI node during Change of CMOR

Category: 
  - Routine
  - PATCH FOR A PATCH

Description: 
============

  NOTE:  MPIF and RG patches should NOT be installed on Legacy systems to
  avoid issues with the legacy systems ending up as CMORs, Treating
  Facilities or Subscribers.  
  
  
  ISSUE 1:  When updating the CMOR via the $$CHANGE^MPIF001 API it is
  possible to end up locking the MPI node instead of unlocking the MPI
  node.  The locking of the MPI node prior to changing the CMOR may not
  happen before the actual update.  This is corrected in MPIF001 with this
  patch.  NOISes: REN-0601-62083, ANN-0701-41807
  
  ISSUE 2:  The following changes were a result of the IV&V review:
  (1) Added checks for input variables in APIs ICNLC, CMOR2, and IFVCCI.
  (2) Removed check for $D of ICN in API ICNLC since it had been New'd.
  (3) Change in LOCK entry point to use For loop instead of Go command
  to avoid stack overflow issues.
  (4) In API ICNLC use the LOCK and UNLOCK entry points instead of using
  new code to accomplish the save tasks.
  
  TEST SITES:
  ==========
  
  Ann Arbor
  Muskogee
  Reno
   
  
   Routine Summary:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
    
   <TAB>;;1.0; MASTER PATIENT INDEX VISTA ;**[Patch List]**;30 Apr 99
   CHECK^XTSUMBLD results:
    
   Routine       Before Patch       After Patch       Patch List
   --------      ------------       ------------      ----------
   MPIF001       8909247              9009403         1,3,9,16,18
  
   INSTALLATION INSTRUCTIONS:
   ==========================
  
    This patch should be loaded during non-peak hours to minimize
    disruption to the users.
   
    This patch will take less than 5 minutes to install.
  
    1.  Users are allowed on the system during patch installation.
   
    2.  Stop Inbound HL7 filer(s) via the "Monitor, Start, Stop Filers"
        option on the "Filer and Link Management" menu which can be found
        on the "HL7 Main Menu".  
   
    3.  TaskMan does not need to be stopped or placed in a wait state. 
   
    4.  These routines are not usually mapped, so you will probably not
        have to disable mapping. 
  
    5.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. [Note:
        TEXT PRINT/DISPLAY option in the PackMan menu will display the
        patch text only.
  
    6.  From the Kernel Installation and Distribution System Menu, select
        the Installation menu.  
   
    7.  From this menu, you may elect to use the following options:
        a.  Backup a Transport Global - this option will create a backup
            message of any routines exported with the patch.  It will NOT
            backup any other changes such as DDs or templates.
        b.  Compare Transport Global to Current System  - this option will
            allow you to view all changes that will be made when the patch
            is installed.  It compares all components of the patch
            (routines, DDs, templates, etc.).
        c.  Verify Checksums in Transport Global - this option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
        d.  Print Transport Global - this option will allow you to view the
            components of the KIDS build.
   
    8.  Use the Install Package(s) option and select the package
        MPIF*1.0*18.
   
    9.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
        Install? YES//' answer NO
   
    10. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
        YES//' answer NO.
       
    11. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
        Protocols? YES//', respond Yes.  Please put the following options
        out of order:
   
         [MPIF PAT INACT]          Inactivate Patient from MPI
         [MPIF IND MPI LOAD]       Single Patient Initialization to MPI
         [MPIF DISPLAY ONLY QUERY TO MPI]       Display Only Query
  
         [DGRPT 10-10T REGISTRATION]     10-10T Registration
         [DG REGISTER PATIENT]           Register a Patient
         [DG LOAD PATIENT DATA]          Load/Edit Patient Data
        
    12.  Restart the HL7 Inbound filer(s) via the same options in step #2.

Routine Information:
====================

Routine Name:
  - MPIF001


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : CHESNEY,CHRISTINE M           Date Entered : JUN 26, 2001
Completed By: SINGH,GURBIR                  Date Completed: AUG 21, 2001
Released By : BURTS,WANDA                   Date Released : AUG 21, 2001
=============================================================================


Packman Mail Message:
=====================

$END TXT


=============================================================================
Run Date: SEP 17, 2003                     Designation: XU*8*292
Package : XU - KERNEL                         Priority: Mandatory
Version : 8       SEQ #265                      Status: Released
                  Compliance Date: OCT 18, 2003
=============================================================================

Associated patches: (v)XU*8*246    <<= must be installed BEFORE `XU*8*292'

Subject: POSTAL CODE CITY/STATE FIX

Category: 
  - Data Dictionary
  - Routine
  - Enhancement (Mandatory)
  - Other

Description:
============

  
   * * * * * * * * * * * >>> W A R N I N G <<< * * * * * * * * * * * * *
   *                                                                   *
   *  Installation of this patch will replace the data and data        *
   *  dictionaries of the POSTAL CODE (#5.12) and COUNTY CODE (#5.13)  *
   *  files.  If local modifications have been made, they should be    *
   *  backed-up prior to installation or they will be deleted.  The    *
   *  pre-install process will completely remove the data and data     *
   *  dictionaries, replacing them with an updated version which has   *
   *  been included with this release.                                 *
   *                                                                   *
   * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  
   This patch will correct the following issues that have been identified
   with the POSTAL CODE (#5.12) and COUNTY CODE (#5.13) files:
  
   1) The Postal Code file was missing cities for approximately 4515 entries,
      and approximately 13771 city names were incorrect based on a recent
      review of the file. This patch will add the missing cities and update
      the identified incorrect city names.
  
   2) The Postal Code (#5.12) and County Code (#5.13) files contained some
      bad pointers to the State (#5) file.  This patch will ensure that the
      necessary State file entries exist, and that the pointers from 5.12 and
      #5.13 are pointing to the correct state file entry.
  
 Copyright Notice
 ================ 
 The following section is from the "National ZIP+4 Address Database
 End-User License Agreement":
  
 Section: DISTRIBUTION
 "Permission to distribute National ZIP+4 Address Database, in whole or in
 part, or as part of a derivative work, outside of Licensee's organization,
 is not granted by this Agreement, and is specifically prohibited."
  
 The data that is contained in the POSTAL CODE(#5.12) file and COUNTY
 CODE(#5.13) is Copyright protected.
  
 The full text of VA's license agreement can be obtained at the
 ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
               Albany:  ftp.fo-albany.med.va.gov
                Hines:  ftp.fo-hines.med.va.gov 
       Salt Lake City:  ftp.fo-slc.med.va.gov
  
  File name: XU_8_P292_LICENSE.TXT
  Format: ASCII mode
  
 Data Dictionary Modifications
 =============================
 DBA Clearance Jun 30, 2003
  
 Data Dictionary Fields for POSTAL CODE(#5.12) File:
 ===================================================
 5.12,.01      MAIL CODE              0;1 FREE TEXT (Required)
  
               INPUT TRANSFORM:  K:$L(X)>12!($L(X)<3) X
               LAST EDITED:      JUN 10, 2003 
               HELP-PROMPT:      Please enter the Postal Code 
               DESCRIPTION:      This field holds recognized postal codes. 
                                 Although this file will only start with US
                                 postal codes, it may be expanded in the future
                                 to also contain postal codes from other
                                 countries.  
  
               TECHNICAL DESCR:  This value is currently obtained from the USPS
                                 AIS City-State file.  The data in the file is
                                 located at: 
                                                                  
                                   Field Reference Number: 2 
                                   Field Description: ZIP code 
                                   Logical Length: 5 
                                   Relative Position From/Thru: 02-06 
  
               CROSS-REFERENCE:  5.12^B 
                                 1)= S ^XIP(5.12,"B",$E(X,1,30),DA)=""
                                 2)= K ^XIP(5.12,"B",$E(X,1,30),DA)
  
               RECORD INDEXES:   AD (#39)
  
 5.12,1        CITY                   0;2 FREE TEXT
  
               INPUT TRANSFORM:  K:$L(X)>28!($L(X)<3) X
               LAST EDITED:      JUN 10, 2003 
               HELP-PROMPT:      Please enter the City associated with this 
                                 Postal Code. 
               DESCRIPTION:      This field holds the city represented by this
                                 Postal Code.  
  
               TECHNICAL DESCR:  This value is currently obtained from the USPS
                                 AIS City-State file.  The data in the file is
                                 located at: 
                                  
                                   Field Reference Number: 5 
                                   Field Description: City State Name 
                                   Logical Length: 28 
                                   Relative Position From/Thru: 14-41 
  
               CROSS-REFERENCE:  5.12^C 
                                 1)= S ^XIP(5.12,"C",$E(X,1,30),DA)=""
                                 2)= K ^XIP(5.12,"C",$E(X,1,30),DA)
  
               RECORD INDEXES:   AD (#39)
  
 5.12,2        COUNTY                 0;3 POINTER TO COUNTY CODE FILE (#5.13)
  
               LAST EDITED:      JUN 26, 2003 
               HELP-PROMPT:      Please enter the county associated with this 
                                 Postal Code. 
               DESCRIPTION:      This field contains a pointer to the County
                                 that this Postal Code is within.  
  
               CROSS-REFERENCE:  5.12^AC 
                                 1)= S ^XIP(5.12,"AC",$E(X,1,30),DA)=""
                                 2)= K ^XIP(5.12,"AC",$E(X,1,30),DA)
  
               RECORD INDEXES:   AD (#39)
  
 5.12,3        STATE                  0;4 POINTER TO STATE FILE (#5)
  
               LAST EDITED:      JUN 10, 2003 
               HELP-PROMPT:      Please enter the State associated with this 
                                 Postal Code. 
               DESCRIPTION:      This field contains a pointer to the State
                                 File to represent the state associated
                                 with this Postal Code.
  
               RECORD INDEXES:   AD (#39)
  
 5.12,4        INACTIVE DATE          0;5 DATE
  
               INPUT TRANSFORM:  S %DT="EX" D ^%DT S X=Y K:X<1 X
               LAST EDITED:      JUN 10, 2003 
               HELP-PROMPT:      Please enter the Inactive Date for this Postal 
                                 Code. 
               DESCRIPTION:      This is the date that the Postal Code became
                                 Inactive.  
  
               RECORD INDEXES:   AD (#39)
  
 5.12,5        CITY KEY               0;6 FREE TEXT (Required)
  
               INPUT TRANSFORM:  K:$L(X)>6!($L(X)<6) X
               LAST EDITED:      JUN 10, 2003 
               HELP-PROMPT:      Answer must be 6 characters in length. 
               DESCRIPTION:      This is the unique City State Key that has
                                 been assigned by the USPS.
  
               TECHNICAL DESCR:  This value is currently obtained from the USPS
                                 AIS City-State file.  The data in the file is
                                 located at: 
                                  
                                   Field Reference Number: 3 
                                   Field Description: City State Key 
                                   Logical Length: 6 
                                   Relative Position From/Thru: 07-12 
  
               CROSS-REFERENCE:  5.12^D 
                                 1)= S ^XIP(5.12,"D",$E(X,1,30),DA)=""
                                 2)= K ^XIP(5.12,"D",$E(X,1,30),DA)
  
               CROSS-REFERENCE: ^^TRIGGER^5.12^8 
                                1)= K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(
                                ^XIP(5.12,D0,0)):^(0),1:"") S X=$P(Y(1),U,9),X=
                                X S DIU=X K Y X ^DD(5.12,5,1,2,1.1) S DIH=$G(^X
                                IP(5.12,DIV(0),0)),DIV=X S $P(^(0),U,9)=DIV,DIH
                                =5.12,DIG=8 D ^DICR
  
                                1.1)= S X=DIV S Y(1)=$S($D(^XIP(5.12,D0,0)):^(0
                                ),1:"") S X=$P(Y(1),U,1),Y(2)=$G(X) S X=DIV,Y=X
                                ,X=Y(2),X=X_Y
  
                                 2)= Q
  
                                 CREATE VALUE)= ((#.01)_(#5))
                                 DELETE VALUE)= NO EFFECT
                                 FIELD)= UNI
                                 The field value is created by the 
                                 concatenation of the MAIL CODE(#.01) field
                                 and the CITY KEY(#5) that creates a unique
                                 key for lookups. The value is stuffed into
                                 the UNIQUE KEY(#8).  
  
               RECORD INDEXES:   AD (#39)
  
 5.12,6        PREFERRED CITY KEY     0;7 FREE TEXT (Required)
  
               INPUT TRANSFORM:  K:$L(X)>6!($L(X)<6) X
               LAST EDITED:      JUL 10, 2003 
               HELP-PROMPT:      Answer must be 6 characters in length. 
               DESCRIPTION:      This key is assigned by USPS.
  
               TECHNICAL DESCR:  This value is currently obtained from the USPS
                                 AIS City-State file.  The data in the file is
                                 located at: 
                                  
                                   Field Reference Number: 9 
                                   Field Description: Preferred Last Line City
                                   State Key 
                                   Logical Length: 6 
                                   Relative Position From/Thru: 57-62 
                                  
                                 If this field equals 'UNIQUE CITY KEY' then
                                 this city is considered the DEFAULT city.  On
                                 the other hand, if this is not equal to 
                                 'UNIQUE CITY KEY' then the city is
                                 considered an ACCEPTABLE city.
  
               RECORD INDEXES:   AD (#39)
  
 5.12,7        CITY ABBREVIATION      0;8 FREE TEXT
  
               INPUT TRANSFORM:  K:$L(X)>13!($L(X)<1) X
               LAST EDITED:      JUN 10, 2003 
               HELP-PROMPT:      Answer must be 1-13 characters in length. 
               DESCRIPTION:      This field contains the USPS's city
                                 abbreviation.  
  
               TECHNICAL DESCR:  This value is currently obtained from the USPS
                                 AIS City-State file.  The data in the file is
                                 located at: 
                                   
                                   Field Reference Number: 6 
                                   Field Description: City State Name
                                 Abbreviation 
                                   Logical Length: 13 
                                   Relative Position From/Thru: 42-54 
  
               RECORD INDEXES:   AD (#39)
  
 5.12,8        UNIQUE KEY (VA)        0;9 FREE TEXT (Required)
  
               INPUT TRANSFORM:  K:$L(X)>18!($L(X)<9) X
               LAST EDITED:      JUN 19, 2003 
               HELP-PROMPT:      Answer must be 9-18 characters in length. 
               DESCRIPTION:      This field is the value when the MAIL
                                 CODE(#.01) and the CITY KEY(#6) are 
                                 concatenated.  The purpose of this field is to
                                 create a unique lookup value using the "E"
                                 cross-reference.  
  
               TECHNICAL DESCR:  A single Zip code can represent multiple City
                                 names or an individual City name can represent
                                 multiple Zip Code.  But each object in and of 
                                 themselves are unique, a combination of these
                                 two unique properties will create a unique
                                 lookup value.  For example: 
                                  
                                  Case A: 
                                  Zip code: 26452 
                                  City Name: VALLEY CHAPEL, City Key: X2A444,
                                 Unique Key: 26452X2A444 
                                  City Name: WESTON, City Key: X29362, Unique
                                 Key: 26452X29362 
                                  
                                  Case B: 
                                  City: HAGERSTOWN, City Key: V23622, Zip code:
                                 21740 UKey: 21740V23622 
                                  City: HAGERSTOWN, City Key: V23622, Zip code:
                                 21741, UKey: 21741V23622 
                                  City: HAGERSTOWN, City Key: V23622, Zip code:
                                 21742, UKey: 21742V23622 
                                  City: HAGERSTOWN, City Key: V23622, Zip code:
                                 21746, UKey: 21746V23622 
                                  City: HAGERSTOWN, City Key: V23622, Zip code:
                                 21747, UKey: 21747V23622 
                                  <and so on> 
  
               NOTES:            TRIGGERED by the CITY KEY field of the POSTAL 
                                 CODE File 
  
               CROSS-REFERENCE:  5.12^E 
                                 1)= S ^XIP(5.12,"E",$E(X,1,30),DA)=""
                                 2)= K ^XIP(5.12,"E",$E(X,1,30),DA)
  
               RECORD INDEXES:   AD (#39)
  
  
 Data Dictionary Fields for COUNTY CODE(#5.13) File:
 ===================================================
 5.13,.01      FIPS CODE              0;1 FREE TEXT (Required)
  
               INPUT TRANSFORM:  K:$L(X)>5!($L(X)<3)!'(X'?1P.E) X
               LAST EDITED:      JUN 21, 2003 
               HELP-PROMPT:      Please enter the 5-digit FIPS code for
                                 this county.
               DESCRIPTION:      This field contains a 5-digit number
                                 representing the Federal Information 
                                 Processing Standard for a state and
                                 county.  The first 2 digits represent the
                                 state, and the last 3 digits represent the
                                 county.  
  
               CROSS-REFERENCE:  5.13^B 
                                 1)= S ^XIP(5.13,"B",$E(X,1,30),DA)=""
                                 2)= K ^XIP(5.13,"B",$E(X,1,30),DA)
  
               RECORD INDEXES:   AC (#40), D (#35)
  
 5.13,1        COUNTY NAME            0;2 FREE TEXT
  
               INPUT TRANSFORM:  K:$L(X)>25!($L(X)<3) X
               LAST EDITED:      JUN 21, 2003 
               HELP-PROMPT:      Answer must be 3-25 characters in length 
               DESCRIPTION:      This field holds the name associated with this
                                 county.  
  
               CROSS-REFERENCE:  5.13^C 
                                 1)= S ^XIP(5.13,"C",$E(X,1,30),DA)=""
                                 2)= K ^XIP(5.13,"C",$E(X,1,30),DA)
  
               RECORD INDEXES:   AC (#40), D (#35)
  
 5.13,2        STATE                  0;3 POINTER TO STATE FILE (#5)
  
               LAST EDITED:      JUN 21, 2003 
               DESCRIPTION:      This field holds the state that this county is
                                 within.  
  
               RECORD INDEXES:   AC (#40), D (#35)
  
 5.13,3        INACTIVE DATE          0;4 DATE
  
               INPUT TRANSFORM:  S %DT="EX" D ^%DT S X=Y K:X<1 X
               LAST EDITED:      JUN 21, 2003 
               HELP-PROMPT:      Please enter an Inactive Date for this County 
                                 FIPS. 
               DESCRIPTION:      This is the date that the 5-digit FIPS became
                                 inactive.  
  
               RECORD INDEXES:   AC (#40)
  
 5.13,4        LATITUDE (EST)         0;5 FREE TEXT
  
               INPUT TRANSFORM:  K:$L(X)>6!($L(X)<6) X
               LAST EDITED:      JUN 19, 2003 
               HELP-PROMPT:      Answer must be 6 characters in length. 
               DESCRIPTION:      This field the estimated Latitude in
                                 <degrees>:<minutes>N or <degrees>:<minutes>S
                                 of the County as given by the United
                                 States Geological Survey (USGS).
                                  
                                  N is North of the Equator.  
                                  S is South of the Equator.  
  
  
 5.13,5        LONGITUDE (EST)        0;6 FREE TEXT
  
               INPUT TRANSFORM:  K:$L(X)>7!($L(X)<7) X
               LAST EDITED:      JUN 19, 2003 
               HELP-PROMPT:      Answer must be 7 characters in length. 
               DESCRIPTION:      This field is the estimated Longitude in
                                 <degrees:<minutes>E or <degrees>:<minutes>W of
                                 the County as given by the United States 
                                 Geological Survey (USGS).  
                                  
                                  E is East of the Prime Meridian.  
                                  W is West of the Prime Meridian.  
  
 API Documentation:
 ==================
  
 POSTAL^XIPUTIL(PCODE,.XIP)
 ==========================
 This API will return the following data for the Preferred (DEFAULT) ZIP
 code:
  
 Input: PCODE - Postal Code for which to return the data.
  
 Output: .XIP - an array containing the following:
  
 XIP("CITY ABBREVIATION") - USPS's assigned abbreviation
 XIP("CITY KEY") - USPS's assigned city key
 XIP("CITY") - The city that the USPS assigned to this PCODE
 XIP("COUNTY POINTER") - Pointer to the county in file #5.13
 XIP("COUNTY") - The county associated with this PCODE
 XIP("FIPS CODE") - 5 digit FIPS code associated with the county
 XIP("POSTAL CODE") - The value used to lookup postal data
 XIP("PREFERRED CITY KEY") - USPS's preferred (DEFAULT) city key
 XIP("STATE POINTER") - Pointer to the state in file #5
 XIP("STATE") - The state associated with this PCODE
 XIP("UNIQUE KEY") - A unique look up value
  
 XIP("ERROR") Returns errors encountered during look up
  
 Example Of Usage:
 =================
  
 NXT,KDE>S ZCODE=26452
 NXT,KDE>S ZTMP=""
 NXT,KDE>D POSTAL^XIPUTIL(ZCODE,.ZTMP)
  
 ZCODE=26452
 ZTMP=
 ZTMP("CITY")=WESTON
 ZTMP("CITY ABBREVIATION")=
 ZTMP("CITY KEY")=X29362
 ZTMP("COUNTY")=LEWIS
 ZTMP("COUNTY POINTER")=335
 ZTMP("FIPS CODE")=54041
 ZTMP("INACTIVE DATE")=
 ZTMP("POSTAL CODE")=26452
 ZTMP("PREFERRED CITY KEY")=X29362
 ZTMP("STATE")=WEST VIRGINIA
 ZTMP("STATE POINTER")=54
 ZTMP("UNIQUE KEY")=26452X29362
  
 POSTALB^XIPUTIL(PCODE,.XIP)
 ===========================
 This API returns all of the active ZIP codes for a single ZIP code.
  
 Input: PCODE - Is the Postal Code for which the data is being requested.
 Output:
 XIP(n) - the number of primary subscripts
 XIP(n"CITY KEY") - USPS's assigned city key
 XIP(n,"CITY ABBREVIATION") - USPS's assigned abbreviation
 XIP(n,"CITY") - the city that the USPS assigned to this PCODE.  An 
                 asterisk '*' indicates which City is the 
                 PREFERRED (DEFAULT)
 XIP(n,"COUNTY POINTER") - pointer to the county in file #5.13
 XIP(n,"COUNTY") - The county associated with this PCODE
 XIP(n,"FIPS CODE") - 5 digit FIPS code associated with the county
 XIP(n,"POSTAL CODE") - the value used to lookup postal data
 XIP(n,"PREFERRED CITY KEY") - USPS's preferred (DEFAULT) city key
 XIP(n,"STATE POINTER") - pointer to the state in file #5
 XIP(n,"STATE") - The state associated with this PCODE
 XIP(n,"UNIQUE KEY") - a unique look-up value
  
 XIP("ERROR") - returns errors encountered during look-up
  
 Example Of Usage
 ================
 NXT,KDE>S ZCODE=26452
 NXT,KDE>S ZTMP=""
 NXT,KDE>D POSTALB^XIPUTIL(ZCODE,.ZTMP)
  
 ZCODE=26452
 ZTMP=2
 ZTMP(1,"CITY")=WESTON*
 ZTMP(1,"CITY ABBREVIATION")=
 ZTMP(1,"CITY KEY")=X29362
 ZTMP(1,"COUNTY")=LEWIS
 ZTMP(1,"COUNTY POINTER")=335
 ZTMP(1,"FIPS CODE")=54041
 ZTMP(1,"POSTAL CODE")=26452
 ZTMP(1,"PREFERRED CITY KEY")=X29362
 ZTMP(1,"STATE")=WEST VIRGINIA
 ZTMP(1,"STATE POINTER")=54
 ZTMP(1,"UNIQUE KEY")=26452X29362
 ZTMP(2,"CITY")=VALLEY CHAPEL
 ZTMP(2,"CITY ABBREVIATION")=
 ZTMP(2,"CITY KEY")=X2A444
 ZTMP(2,"COUNTY")=LEWIS
 ZTMP(2,"COUNTY POINTER")=335
 ZTMP(2,"FIPS CODE")=54041
 ZTMP(2,"POSTAL CODE")=26452
 ZTMP(2,"PREFERRED CITY KEY")=X29362
 ZTMP(2,"STATE")=WEST VIRGINIA
 ZTMP(2,"STATE POINTER")=54
 ZTMP(2,"UNIQUE KEY")=26452X2A444
  
  
 $$FIPS^XIPUTIL
 ==============
 Returns the FIPS code associated with the Postal Code.
  
 Example Of Usage
 ================
 NXT,KDE>W $$FIPS^XIPUTIL("26452")
 54041
  
 CCODE^XIPUTIL(FIPS,.XIPC)
 =========================
 Returns all the data associated for a FIPS code.
  
 Input: FIPS -The 5 digit FIPS Code for which to return the data.
 Output:
 XIPC("COUNTY") - The county associated with this FIPS code
 XIPC("FIPS CODE") - 5 digit FIPS county code
 XIPC("INACTIVE DATE") - The date the FIPS code was inactivated
 XIPC("LATITUDE") - The estimated Latitude of the county
 XIPC("LONGITUDE") - The estimated Longitude of the county
 XIPC("STATE POINTER") - Pointer to the state in file #5
 XIPC("STATE") - The state associated with this FIPS code
  
 XIPC("ERROR") - Returns errors encountered during look up
  
 Example Of Usage
 ================
 NXT,KDE>S ZFIPS=54041
 NXT,KDE>S ZTMP=""
 NXT,KDE>D CCODE^XIPUTIL(ZFIPS,.ZTMP)
  
 ZFIPS=54041
 ZTMP=
 ZTMP("COUNTY")=LEWIS
 ZTMP("FIPS CODE")=54041
 ZTMP("INACTIVE DATE")=
 ZTMP("LATITUDE")=39:00N
 ZTMP("LONGITUDE")=80:28W
 ZTMP("STATE")=WEST VIRGINIA
 ZTMP("STATE POINTER")=54
  
 $$FIPSCHK^XIPUTIL(FIPS)
 =======================
 This API answers the question as to whether or not a FIPS code exists.  
 If the FIPS codes exists then the IEN is returned, otherwise zero(0).
  
 Example Of Usage
 ================
 NXT,KDE>W $$FIPSCHK^XIPUTIL("54041") 
 335
 NXT,KDE>W $$FIPSCHK^XIPUTIL("54999")
 0
  
 NOISs
 =====
  MAC-1202-61754; SBY-0403-30884; BIG-1202-70806; STC-0403-41771;
  BHH-0503-40342; NJH-0503-20642; CHY-0603-50105; SAJ-0603-70572;
  BAC-0603-40732;
  
 Thanks To Test Sites
 =====================
  BAY PINES, FL
  CLARKSBURG, WV
  NORTHERN CALIFORNIA HCS
  SALISBURY, NC
  
 BLOOD BANK TEAM COORDINATION:
 =============================
  Blood Bank Clearance - Jun 30, 2003
  
   ROUTINE SUMMARY:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
  
              <tab>;;8.0;KERNEL;**[patch list]**;Jul 10, 1995
  
                          CHECK^XTSUMBLD results
   Routine name      Before Patch          After Patch         Patch List
   ============      ============          ===========         ==========
   XIPENV            N/A                   6997982             292
   XIPPOST           N/A                   3082958             292
   XIPUTIL           3728069               6576736             246,292
   XIPUTIL1          *NEW*                 1898688             292
   XIPXREF           *NEW*                 140383              292
   XU8P292           N/A                   154545              292
  
   SOFTWARE RETRIEVAL
   ==================  
   Due to the amount of data being distributed with this patch, the software
   is being distributed in a host file.  
     
       Host file name: XU_8_P292.KID
     
   Sites may FTP the software directly from the ANONYMOUS.SOFTWARE
   directory at the following OI Field Offices:
    
               Albany:  ftp.fo-albany.med.va.gov
                Hines:  ftp.fo-hines.med.va.gov 
       Salt Lake City:  ftp.fo-slc.med.va.gov
         
      * Note: Use ASCII mode when transferring the .KID file.
  
   ENVIRONMENT CHECK PROCESS
   =========================
   The environment check routine being distributed with the patch will validate
   the existence of the necessary state file entries to allow for the
   correct state file linkage to occur during the post-install portion of
   this installation.
  
   If any of the state file entries are missing or inaccurate, then the
   following message will be displayed to the user:
  
        ******************************************************************
          The following State file (#5) entries are missing or corrupt!
  
          Please log a NOIS for assistance in resolving this issue.
  
        ******************************************************************
        Your site shows the following:
  
            ABBREVIATION    VA STATE CODE    STATE NAME
            ------------    -------------    ----------
                 NY              63          NEW YORK
               
        The below entries should be added and/or corrected as follows:    
  
            ABBREVIATION    VA STATE CODE    STATE NAME
            ------------    -------------    ----------
                 NY              36          NEW YORK
        
   
        XU*8.0*292 Build will not be installed
                        Apr 10, 2003@13:26:35
  
  
   The distribution global will not be unloaded, but the installation
   will not proceed until the necessary State file entries are corrected.
  
   If this message appears during patch installation, please log a NOIS for
   NVS assistance with resolving the issue and then follow the patch
   installation steps starting with step #4 after the state file issues have
   been resolved.
  
  
   INSTALLATION INSTRUCTIONS
   =========================
   
      * * * * * * * * *  A  T  T  E  N  T  I  O  N  * * * * * * * * * * * *
     
   It is recommended this patch be installed outside of normal business 
 hours to avoid any complications.  This patch will take between 
 1 and 1.5 hours depending on the speed of your particular system.  TASKMAN
 does not need to be stopped or placed in a wait state. However the
 following background jobs should NOT be running or scheduled to run during
 the installation of this patch:
  
      IVM Background Job        [IVM BACKGROUND JOB]
      PTF Background Job        [DG PTF BACKGROUND JOB]
      PTF Transmission          [DG PTF TRANSMISSION VADATS]
      Ambulatory Care Nightly   [SCDX AMBCAR NIGHTLY XMIT]
        Transmission to NPCDB 
  
   If a patient is being registered during the installation of this patch,
 an M error could occur.
  
      * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
   
   1. Download the KIDS file XU_8_P292.KID from the ANONYMOUS.SOFTWARE
      directory of either Albany, Hines, or the Salt Lake CIOFO to the
      appropriate directory on your system.
     
   2. Use the 'LOAD A DISTRIBUTION' option on the KIDS INSTALLATION 
      menu, and enter:  XU_8_P292.KID
  
   3. When prompted 'Build XU*8.0*292 has an Environmental Check Routine
      Want to RUN the Environment Check Routine? YES//' answer YES.   
  
      **NOTE:  The environment check routine will validate needed data in the
               State (#5) file.  If the necessary entries are missing or
               corrupt, then you will see the warning message listed in the 
               Environment Check portion of this patch description.
  
               If this occurs, please log a NOIS for NVS assistance as the
               installation process will be terminated automatically. Once the
               missing or corrupt entries are resolved, please continue with
               the remainder of the installation as noted beginning with
               Step #4.
   
               If the environment check did not find any missing or corrupt
               entries, please continue on with the remainder of the
               installation as noted below.
  
    4.  Via TaskMan, un-schedule the following options if they are 
        scheduled to run during the installation of this patch:
      IVM Background Job        [IVM BACKGROUND JOB]
      PTF Background Job        [DG PTF BACKGROUND JOB]
      PTF Transmission          [DG PTF TRANSMISSION VADATS]
      Ambulatory Care Nightly   [SCDX AMBCAR NIGHTLY XMIT]
        Transmission to NPCDB 
  
   5. From the 'Kernel Installation & Distribution System' menu, select 
      the Installation menu.
     
   6. From this menu, you may elect to use the following options (when
      prompted for INSTALL NAME, enter XU*8.0*292).
     
        a. Backup a Transport Global - This option will create a backup
           message of any routines exported with the patch.  It will NOT 
           backup any other changes such as DDs or templates.
  
        b. Compare Transport Global to Current System - This option will 
           allow you to view all changes that will be made when the patch 
           is installed.  It compares all components of the patch 
           (routines, DDs, templates, etc.).
     
        c. Verify Checksums in Transport Global - This option will allow
           you to ensure the integrity of the routines that are in the 
           transport global.
     
        d. Print Transport Global - This option will allow you to view the
           components of the KIDS build.
           
   7. Use the Install Package(s) option and select XU*8.0*292.
      (See sample installation below)
   
   8. When prompted 'Want KIDS to INHIBIT Logon's during the install? 
      YES//', it is recommended you answer NO.
     
   9. When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
      and Protocols? YES//', respond YES.
  
 And disable the following options:
 DG CONSISTENCY PATIENT         Edit Inconsistent Data for a Patient
 DG LOAD PATIENT DATA           Load/Edit Patient Data
 DG REGISTER PATIENT            Register a Patient
 DG REGISTRATION VIEW           View Registration Data
 DGPRE PRE-REGISTER OPTION      Preregister a Patient
 DGRPT 10-10T REGISTRATION      10-10T Registration
 DVB HUPLOAD                    Update HINQs to the Patient file
 DVBA C EDIT C&P REQUEST INFO   Edit C&P Request Information
 DVBA C EDIT PAT ADDRESS        Edit Patient Address Information
 DVBA C ENTER C&P REQUEST       Enter a C&P Exam Request
 DVBA CAPRI GUI                 Capri GUI (Broker)
 VAQ PDX LOAD/EDIT              Load/Edit PDX Data
 DG PTF BACKGROUND JOB          PTF Background Job
 DG PTF SCREEN                  Load/Edit PTF Data
 DG PTF TRANSMISSION VADATS     PTF Transmission
 IVM BACKGROUND JOB             IVM Background Job
 SDAM APPT CHECK IN/OUT         Appointment Check-in/Check-out
 SDAM APPT MGT                  Appointment Management
 SCDX AMBCAR RETRANS SEL REJ    Selective Retransmission of NPCDB Rejection
 SCDX AMBCAR NIGHTLY XMIT       Ambulatory Care Nightly Transmission to 
                                NPCDB
 SCDX AMBCAR REPORTING          Ambulatory Care Reporting Menu
 SCDX AMBCAR RETRANS BY DATE    Retransmit Ambulatory Care Data by Date 
                                Range
 SCDX AMBCAR RETRANS ERROR      Retransmit Selected Error Code
 SCRPW DVM MEANS TEST SUMMARY   Means Test Visits & Uniques (OP3, OP4, OP5)
 SCRPW MT/ELIG/ENROLLMENT RPT   Means Test/Eligibility/Enrollment Report
  
 <Note: a special thanks goes to the NVS PIMS team for providing this list>
  
   10. When the installation has completed, reschedule, via TaskMan the 
      options listed in step 4 if they were un-scheduled.
  
 ** Sample Installation **
 Select Installation Option: INstall Package(s)
 Select INSTALL NAME:    XU*8.0*292     Loaded from Distribution  
 8/14/03@09:46:17
      => POSTAL CODE CITY/STATE FIX - XU*8*292  ;Created on Aug 14, 
 2003@08:50:46
  
 This Distribution was loaded on Aug 14, 2003@09:46:17 with header of 
    POSTAL CODE CITY/STATE FIX - XU*8*292  ;Created on Aug 14, 
 2003@08:50:46
    It consisted of the following Install(s):
      XU*8.0*292
 Checking Install for Package XU*8.0*292
 Will first run the Environment Check Routine, XIPENV
  
   Your STATE(#5) file is fine.
  
 Install Questions for XU*8.0*292
  
 Incoming Files:
  
  
    5.12      POSTAL CODE  (including data)
 Note:  You already have the 'POSTAL CODE' File.
 I will OVERWRITE your data with mine.
  
  
    5.13      COUNTY CODE  (including data)
 Note:  You already have the 'COUNTY CODE' File.
 I will OVERWRITE your data with mine.
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// 
  
 Enter options you wish to mark as 'Out Of Order': <enter options from the 
                                                    above list here>
  
 Enter options you wish to mark as 'Out Of Order': <rtn>
  
 Enter protocols you wish to mark as 'Out Of Order': <rtn>
  
 Delay Install (Minutes):  (0-60): 0// 
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME// 0;P-OTHER;80;99999  SYSTEM
  
  
  Install Started for XU*8.0*292 : 
                Aug 14, 2003@09:47:46
  
 Build Distribution Date: Aug 14, 2003
  
  Installing Routines:.......
                Aug 14, 2003@09:47:46
  
  Running Pre-Install Routine: ^XU8P292.
  
  Installing Data Dictionaries: ...
                Aug 14, 2003@09:47:49
  
  Installing Data: 
                Aug 14, 2003@11:13:39
  
  Running Post-Install Routine: ^XIPPOST.
  
    Updating State File pointers in file #5.12
  
   Finished repointing file #5.12
  
    Updating State File pointers in file #5.13
  
  Finished repointing file #5.13
  
  Updating Routine file......
  
  Updating KIDS files.......
  
  XU*8.0*292 Installed. 
                Aug 14, 2003@11:43:09

Routine Information:
====================

Routine Name:
  - XIPENV


Routine Checksum:

Routine Name:
  - XIPPOST


Routine Checksum:

Routine Name:
  - XIPUTIL


Routine Checksum:

Routine Name:
  - XIPUTIL1


Routine Checksum:

Routine Name:
  - XIPXREF


Routine Checksum:

Routine Name:
  - XU8P292


Routine Checksum:

=============================================================================
User Information:
Entered By  : MORGAN,BRIAN                  Date Entered  : MAR 27, 2003
Completed By: SINGH,GURBIR                  Date Completed: AUG 27, 2003
Released By : TILLIS,LEWIS                  Date Released : SEP 17, 2003
=============================================================================


Packman Mail Message:
=====================

No routines included


=============================================================================
Run Date: JAN 26, 2005                     Designation: DG*5.3*563
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #554                    Status: Released
                  Compliance Date: FEB 26, 2005
=============================================================================

Associated patches: (v)DG*5.3*568  <<= must be installed BEFORE `DG*5.3*563'
                    (v)DG*5.3*574  <<= must be installed BEFORE `DG*5.3*563'

Subject: DOD Enhancements

Category: 
  - Routine
  - Enhancement (Mandatory)

Description:
============

  
 PURPOSE OF THE PATCH
 ====================
  
 This Date of Death (DOD) Enhancements Project is implementing software
 modifications for the Health Eligibility Center (HEC) and VistA
 applications.  The implementation is made to provide a higher
 confidence level for death dates received by the Veterans Benefits
 Administration (VBA), the HEC, and VA sites.
  
 These software modifications will allow for the synchronization of the
 Date of Death information between the HEC and VistA Systems as well as
 reduce the user (manual) workload for handling Date of Death
 information.
  
  
 OVERVIEW
 ========
  
 The Date of Death Enhancement Project contains modifications to both 
 VistA and HEC Legacy applications.  This patch (DG*5.3*563) addresses the 
 following issues:
  
 Issue I    Update OPTION: Death Entry [DG DEATH ENTRY]
       II   Update OPTION: Register a Patient [DG REGISTER PATIENT]
       III  Update Bulletin: PATIENT HAS EXPIRED
       IV   Correct INPATIENT STATUS Check on PATIENT HAS EXPIRED Bulletin
  
  
 Issue I - Update OPTION: Death Entry [DG DEATH ENTRY]
 =====================================================
  
 When it is determined that a Date of Death was entered in error, a user 
 is able to remove the death information using the Death Entry  [DG DEATH 
 ENTRY] option.  The Death related fields in the PATIENT record will be 
 updated as follows:
  
     o  The DATE OF DEATH field (#.351) will be deleted.
  
     o  The DEATH ENTERED BY field (#.352) will be deleted.
  
     o  The SOURCE OF NOTIFICATION field (#.353) will be deleted.
  
     o  The DATE OF DEATH LAST UPDATED field (#.354) will be updated with 
        the date and time the Date of Death was deleted.. 
  
     o  The LAST EDITED BY field (#.355) will be updated with the USER ID
        of the user who removed the Date of Death.
  
  
 Issue II - Update OPTION: Register a Patient [DG REGISTER PATIENT]
 ==================================================================
  
 In the Register a Patient [DG REGISTER PATIENT] option, users need to 
 know if a veteran's record contains a Date of Death before proceeding 
 with the registration.   The display will be modified to inform the user 
 that the patient has 
 expired, and require a response before they are allowed to continue.  
 The prompt displays the following message, and has a default response 
 value of NO.  This is the same prompt that is displayed in the Admit a 
 Patient [DG ADMIT PATIENT] option.
  
 Example:
        PATIENT EXPIRED 'NOV 10,2004'...WANT TO CONTINUE? No//
  
  
 Issue III - Update Bulletin: PATIENT HAS EXPIRED
 ================================================
  
 The Death Entry [DG DEATH ENTRY] menu option automatically generates the 
 "PATIENT HAS EXPIRED" bulletin when a user accesses a record that 
 contains a Date of Death.  The option will be modified to only send the 
 bulletin when the user has made a change to either of the following 
 fields:
  
     o  PATIENT file (#2), DATE OF DEATH field (#.351)
  
     o  PATIENT file (#2), SOURCE OF NOTIFICATION field (#.353)
  
  
 Issue IV - Correct INPATIENT STATUS Check on PATIENT HAS EXPIRED Bulletin
 =========================================================================
  
 The Inpatient status check on the "PATIENT HAS EXPIRED" bulletin needs to 
 be modified.  When the Date of Death is the same as the discharge date,  
 the message '(While an inpatient)' is displayed after the Date of Death 
 in the bulletin.  Use the PATIENT MOVEMENT file (#405), and check for a 
 discharge on the same date as the Date of Death.  When the dates are the 
 same only include the "(While an inpatient)" text on the bulletin if the 
 TYPE OF MOVEMENT field #.04 is DEATH (code #27) or DEATH WITH AUTOPSY 
 (code #32) substantiating that the patient died while an inpatient.
  
  
 NOTE: The Date of Death Modifications to ZPD segment patch DG*5.3*545 was 
 released on March 4, 2004.  It added the following fields to the PATIENT 
 File (#2):
            SOURCE OF NOTIFICATION     field #.353
            DATE OF DEATH LAST UPDATED field #.354
  
 The PATIENT file (#2) records containing a Date of Death that was entered 
 before this patch was released will not contain field data for the two 
 fields.  If the record is edited after installing patch DG*5.3*545, the 
 software will populate the fields.
  
  
 SOFTWARE RETRIEVAL
 ==================
  
 The software for this patch is not being distributed through the National
 Patch Module. This patch is being distributed as a host file. The host
 file will contain the following two KIDS builds:
  
             Host file name:    DG_53_P563.KID
  
                     Builds: DG*5.3*563
                             IVM*2.0*102
   
 Sites may retrieve the software directly using FTP from the
 ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
                     Albany   : ftp.fo-albany.med.va.gov
                     Hines    : ftp.fo-hines.med.va.gov
               Salt Lake City : ftp.fo-slc.med.va.gov
       First Available Server : download.vista.med.va.gov
  
 The following file will be available:
  
     File Name           Description
     ---------           -----------
     DG_53_P563.KID      Host File containing KIDS software distribution
  
 Note:  Use ASCII mode when transferring the .KID file.
  
  
 DOCUMENTATION RETRIEVAL
 =======================
  
 The following documentation file is being released with the Date of Death 
 Enhancement Project:
  
 Patch Number File Name              Description
 ------------ ---------------------- --------------------------------------
 DG*5.3*563   DG_5_3_P563_REG_UM.PDF Updates to PIMS V. 5.3 Registration
                                     User Manual
  
 IVM*2*102    IVM_2_P102_TM.PDF      Updates to IVM V. 2.0 Technical Manual
  
 IVM*2*102    IVM_2_P102_UM.PDF      Updates to IVM V. 2.0 User Manual
  
 Sites may retrieve the documentation directly using FTP from the
 ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
                     Albany   : ftp.fo-albany.med.va.gov
                     Hines    : ftp.fo-hines.med.va.gov
               Salt Lake City : ftp.fo-slc.med.va.gov
       First Available Server : download.vista.med.va.gov
  
 NOTE: The document is in binary format so it must be transferred in
       binary, not ASCII, mode.
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
  
 This patch addresses the following NOIS/Remedy Ticket(s):
 ---------------------------------------------------------
 IVM-0699-32683 - Transmission to delete the DOD in VistA
 AMA-0604-70931 - Death Bulletins
 MEM-0704-71884 - Death Entry Software
 PUG-0803-51387 - Date of Death shows death while inpt but really died 
                  at home
  
  
 Overview of NOIS/Remedy Ticket(s):
 ----------------------------------
  
  
       NOIS: IVM-0699-32683 (Transmission to delete the DOD in VistA)
  
    Problem: When HEC sends a Z05 transmission to VistA to delete the Date 
             of Death for a veteran it is never uploaded into VistA, and 
             gets the following Application Error (AE): INVALID DATE OF 
             DEATH
  
 Resolution: Fix the date conversion code to correctly recognize all 
             accepted Date of Death formats
  
  
       NOIS: AMA-0604-70931 (Death Bulletins) 
  
    Problem: The Death Entry [DG DEATH ENTRY] option generates a bulletin 
             even if no changes are made to the veteran.
  
 Resolution: Only generate the PATIENT HAS EXPIRED Bulletin when either 
             the Date of Death or Source of Notification has changed.
  
  
       NOIS: MEM-0704-71884 (Death Entry Software)
  
    Problem: The Register a Patient [DG REGISTER PATIENT] option does not 
             notify the user when the patient has a date of death on file.
  
 Resolution: Modify the prompt to notify the user with the same message as 
             used in the Admit a Patient Option.
  
  
       NOIS: PUG-0803-51387 (Date of Death shows death while inpt but
                             really died at home)
  
    Problem: When a veteran is discharged from the hospital and expires 
             later that same day, the PATIENT HAS EXPIRED Bulletin contains
             (While an inpatient) text after the Date of Death.
  
 Resolution: Fix the bulletin to display the text when the TYPE OF
             MOVEMENT field #.04 is either DEATH or DEATH WITH AUTOPSY.
  
  
  
 Test Sites:
 -----------
  
 Madison
 Milwaukee
 Manchester
 West LA
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If these patches (DG*5.3*563, and IVM*2.0*102) are installed during the 
 normal workday, it is recommended that the following menu options (File 
 #19) and all of their descendants should be disabled to prevent possible 
 conflicts while running the KIDS Install. Other VistA users will not be 
 affected.
  
               Death Entry              [DG DEATH ENTRY]
               Register a Patient       [DG REGISTER PATIENT]
               Load/Edit Patient Data   [DG LOAD PATIENT DATA]          
               IVM BACKGROUND JOB       [IVM BACKGROUND JOB]            
               Demographics Upload      [IVM UPLOAD DEM]                
  
  
 The patch should be installed during non-peak hours.
  
  
 Install Time - 45 minutes
  
  
        ************** PRE-INSTALLATION INSTRUCTIONS **********************
  
        You may wish to stop the HL7 filers prior to the install to prevent
        possible 'No Source Errors' from occurring. No transmissions will 
        be lost if the filers are not stopped first, they will be picked up
        once the filers are restarted.
  
        ********************************************************************
        
  
   1.   DOWNLOAD HOST KIDS FILE
        -----------------------
        Download the KIDS file DG_53_P563.KID from the
        ANONYMOUS.SOFTWARE directory of either Albany, Hines, or the Salt
        Lake CIOFO to the appropriate directory on your system.
  
   2.   LOAD DISTRIBUTION
        -----------------
        Use the 'LOAD A DISTRIBUTION' option on the KIDS INSTALLATION
        menu, and enter:  DG_53_P563.KID. 
  
   3.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only)
        -----------------------
        Disable routine mapping on all systems for the routines listed in
        step 4 below.
            
        NOTE:  If the routines included in this patch are not currently in 
               your mapped routine set, please skip this step.
   
   4.   COMPONENTS SENT WITH PATCH 
        --------------------------
        The following is a list of the routines included in this patch.  
        The second line of each of these routines now looks like: 
   
            ;;5.3;Registration;**[patch list]**; Aug 13,1993 
   
                            CHECK^XTSUMBLD results
  
        Routine      Before Patch     After Patch    Patch List 
        -------      ------------     -----------    ----------
        DG53B563     N/A              4740234        563
        DGDEATH      12546405         13498173       45,84,101,149,392
                                                     545,595,568,563
        DGREG        20435360         20832867       1,32,108,147,149
                                                     182,245,250,513,425
                                                     533,574,563
  
  
             Total number of routines - 3
   
             Total number of routines modified: 2
             Total number of new routines:      1
             Total number of deleted routines:  0
  
  
   5.   START UP KIDS 
        -------------
        Start up the Kernel Installation and Distribution System Menu 
        [XPD MAIN]: 
    
             Edits and Distribution ...  
             Utilities ...  
             Installation ...  
    
   Select Kernel Installation & Distribution System Option: INStallation 
                                                            ---
             Load a Distribution 
             Print Transport Global 
             Compare Transport Global to Current System 
             Verify Checksums in Transport Global 
             Install Package(s) 
             Restart Install of Package(s) 
             Unload a Distribution 
             Backup a Transport Global 
    
   Select Installation Option: 
    
   6.   Select Installation Option: 
        ---------------------------
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter DG*5.3*563):
       
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
      
   7.   Select Installation Option: Install Package(s) 
                                    ----------------
        **This is the step to start the installation of this KIDS patch: 
    
       a.  Choose the Install Package(s) option to start the patch install.
       b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
           YES//' answer NO (unless otherwise indicated)
       c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
           Options, and Protocols? YES//' answer YES (unless otherwise
           indicated)
       d.  When prompted 'Enter options you wish to mark as 'Out Of
           Order':'  Enter the following options:
   
               Death Entry              [DG DEATH ENTRY]
               Register a Patient       [DG REGISTER PATIENT]
               Load/Edit Patient Data   [DG LOAD PATIENT DATA]          
               IVM BACKGROUND JOB       [IVM BACKGROUND JOB]            
               Demographics Upload      [IVM UPLOAD DEM]                
  
       e.  When prompted 'Enter protocols you wish to mark as 'Out Of 
           Order':' press <return>.
  
   8.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
       -------------------------
       Optional - Include the routines distributed with this patch
       in the mapped routine set.
      
       NOTE: This step is only necessary if you performed step 2 or 
             if you wish to include the routines in your mapped set.
  
  
       ************** POST-INSTALLATION INSTRUCTIONS **************
  
       When the installation is complete, be sure to re-start the 
       filers if you chose to stop them.
  
       ***********************************************************

Routine Information:
====================

Routine Name:
  - DGDEATH


Routine Checksum:

Routine Name:
  - DGREG


Routine Checksum:

Routine Name:
  - DG53B563


Routine Checksum:

=============================================================================
User Information:
Entered By  : HUA,PATRICK                   Date Entered  : OCT 22, 2003
Completed By: MULLER,RICHARD                Date Completed: JAN 20, 2005
Released By : CANNEDY,JOELLEN               Date Released : JAN 26, 2005
=============================================================================


Packman Mail Message:
=====================

No routines included

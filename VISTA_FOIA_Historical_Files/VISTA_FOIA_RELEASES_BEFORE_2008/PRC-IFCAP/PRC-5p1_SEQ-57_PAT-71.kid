EMERGENCY Released PRC*5.1*71 SEQ #57
Extracted from mail message
**KIDS**:PRC*5.1*71^

**INSTALL NAME**
PRC*5.1*71
"BLD",3457,0)
PRC*5.1*71^IFCAP^0^3030821^y
"BLD",3457,1,0)
^^3^3^3030625^
"BLD",3457,1,1,0)
This patch will change the way the transmission date gets assigned on the 
"BLD",3457,1,2,0)
SV code sheet generated by the Accrual (Monthly) [PRCB MONTHLY ACCRUAL] 
"BLD",3457,1,3,0)
option.
"BLD",3457,4,0)
^9.64PA^^
"BLD",3457,"ABPKG")
n
"BLD",3457,"KRN",0)
^9.67PA^8989.52^19
"BLD",3457,"KRN",.4,0)
.4
"BLD",3457,"KRN",.4,"NM",0)
^9.68A^^
"BLD",3457,"KRN",.401,0)
.401
"BLD",3457,"KRN",.402,0)
.402
"BLD",3457,"KRN",.403,0)
.403
"BLD",3457,"KRN",.5,0)
.5
"BLD",3457,"KRN",.84,0)
.84
"BLD",3457,"KRN",3.6,0)
3.6
"BLD",3457,"KRN",3.8,0)
3.8
"BLD",3457,"KRN",9.2,0)
9.2
"BLD",3457,"KRN",9.8,0)
9.8
"BLD",3457,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3457,"KRN",9.8,"NM",1,0)
PRCB8B^^0^B13077965
"BLD",3457,"KRN",9.8,"NM","B","PRCB8B",1)

"BLD",3457,"KRN",19,0)
19
"BLD",3457,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",3457,"KRN",19,"NM",1,0)
PRCB MONTHLY ACCRUAL^^0
"BLD",3457,"KRN",19,"NM","B","PRCB MONTHLY ACCRUAL",1)

"BLD",3457,"KRN",19.1,0)
19.1
"BLD",3457,"KRN",101,0)
101
"BLD",3457,"KRN",409.61,0)
409.61
"BLD",3457,"KRN",771,0)
771
"BLD",3457,"KRN",870,0)
870
"BLD",3457,"KRN",8989.51,0)
8989.51
"BLD",3457,"KRN",8989.52,0)
8989.52
"BLD",3457,"KRN",8994,0)
8994
"BLD",3457,"KRN","B",.4,.4)

"BLD",3457,"KRN","B",.401,.401)

"BLD",3457,"KRN","B",.402,.402)

"BLD",3457,"KRN","B",.403,.403)

"BLD",3457,"KRN","B",.5,.5)

"BLD",3457,"KRN","B",.84,.84)

"BLD",3457,"KRN","B",3.6,3.6)

"BLD",3457,"KRN","B",3.8,3.8)

"BLD",3457,"KRN","B",9.2,9.2)

"BLD",3457,"KRN","B",9.8,9.8)

"BLD",3457,"KRN","B",19,19)

"BLD",3457,"KRN","B",19.1,19.1)

"BLD",3457,"KRN","B",101,101)

"BLD",3457,"KRN","B",409.61,409.61)

"BLD",3457,"KRN","B",771,771)

"BLD",3457,"KRN","B",870,870)

"BLD",3457,"KRN","B",8989.51,8989.51)

"BLD",3457,"KRN","B",8989.52,8989.52)

"BLD",3457,"KRN","B",8994,8994)

"BLD",3457,"QUES",0)
^9.62^^
"BLD",3457,"REQB",0)
^9.611^^
"KRN",19,10791,-1)
0^1
"KRN",19,10791,0)
PRCB MONTHLY ACCRUAL^Accrual (Monthly)^^R^^^^^^^^IFCAP
"KRN",19,10791,1,0)
^19.06^10^10^3030625^^^^
"KRN",19,10791,1,1,0)
This option will collect IFCAP purchase card orders accrual data.
"KRN",19,10791,1,2,0)
 
"KRN",19,10791,1,3,0)
As part of the End of Accounting Month Schedule Change project the
"KRN",19,10791,1,4,0)
scheduling of this option through TaskMan was removed in IFCAP patch
"KRN",19,10791,1,5,0)
PRC*5.1*67.
"KRN",19,10791,1,6,0)
 
"KRN",19,10791,1,7,0)
The option must now be run manually and the data transmitted to FMS
"KRN",19,10791,1,8,0)
by 8 PM Central Time on the last workday of the month.  Please allow
"KRN",19,10791,1,9,0)
enough time for the running of the option in order to assure timely
"KRN",19,10791,1,10,0)
submittal of data.
"KRN",19,10791,25)
EN^PRCB1F
"KRN",19,10791,"U")
ACCRUAL (MONTHLY)
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",455,-1)
1^1
"PKG",455,0)
IFCAP^PRC^IFCAP System Files
"PKG",455,20,0)
^9.402P^^
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
5.1^3001012^3001019^68
"PKG",455,22,1,"PAH",1,0)
71^3030821
"PKG",455,22,1,"PAH",1,1,0)
^^3^3^3030821
"PKG",455,22,1,"PAH",1,1,1,0)
This patch will change the way the transmission date gets assigned on the 
"PKG",455,22,1,"PAH",1,1,2,0)
SV code sheet generated by the Accrual (Monthly) [PRCB MONTHLY ACCRUAL] 
"PKG",455,22,1,"PAH",1,1,3,0)
option.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRCB8B")
0^1^B13077965
"RTN","PRCB8B",1,0)
PRCB8B ;WISC/PLT-AUTO GENERATE FMS VT-DOCUMENTS ;11/12/96  15:42
"RTN","PRCB8B",2,0)
V ;;5.1;IFCAP;**71**;Oct 20, 2000
"RTN","PRCB8B",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","PRCB8B",4,0)
 QUIT  ;invalid entry
"RTN","PRCB8B",5,0)
 ;
"RTN","PRCB8B",6,0)
 ;.X = record id of file 2100.1 if generated, "" if fail
"RTN","PRCB8B",7,0)
 ;PRCFC data: ^1=ri of 440.7, ^2-...=date infor of prca from prcb1f
"RTN","PRCB8B",8,0)
 ;PRCID data ^1=file 2100.1 ri, ^2= document id (if regenerated)
"RTN","PRCB8B",9,0)
SV(X,PRCFC,PRCID) ;SV auto document
"RTN","PRCB8B",10,0)
 N PRCA,PRCB,PRCC,PRCDDT,PRCF,PRCQ,PRCRI,PRCSITE,PRCY,GECSFMS,PRCLACT,PRCAP,PRCDD,PRCDATA,PRCAMT
"RTN","PRCB8B",11,0)
 N PRCDI,PRCBOC,PRCEM,PRCIDL
"RTN","PRCB8B",12,0)
 N A,B,Z
"RTN","PRCB8B",13,0)
S S PRCRI(440.7)=$P(PRCFC,"^"),A=$P(PRCFC,"^",12),PRCSITE=$P(A,"-",2)
"RTN","PRCB8B",14,0)
 S PRCEM="E" I $G(PRCID)]"" S PRCRI(2100.1)=+PRCID,PRCID=$P(PRCID,"^",2)
"RTN","PRCB8B",15,0)
 I $G(PRCID)="" S A=$P(PRCFC,"^",12),PRCID=PRCSITE_$E(A,2,7),PRCID=$E(PRCID,1,3)_$TR($E(PRCID,4,7),"1234567890","ABCDEFGHIJ")_$E(PRCID,8,999)
"RTN","PRCB8B",16,0)
 I $G(PRCRI(2100.1)) D REBUILD^GECSUFM1(PRCRI(2100.1),"I",$$SEC1^PRC0C(PRCSITE),"","Edited Rejected Auto SV Document")
"RTN","PRCB8B",17,0)
 ;add entry in file 2100.1 if not rejected process
"RTN","PRCB8B",18,0)
 D:$G(PRCRI(2100.1))=""  G EXIT:PRCRI(2100.1)<1
"RTN","PRCB8B",19,0)
 . D CONTROL^GECSUFMS("I",PRCSITE,PRCID,"SV",$$SEC1^PRC0C(PRCSITE),$S(PRCEM="M":1,1:0),"","Auto SV Document")
"RTN","PRCB8B",20,0)
 . S PRCRI(2100.1)=GECSFMS("DA")
"RTN","PRCB8B",21,0)
 . QUIT
"RTN","PRCB8B",22,0)
 D SETPARAM^GECSSDCT(PRCRI(2100.1),$P(PRCFC,"^")_"/"_$P(PRCFC,"^",12))
"RTN","PRCB8B",23,0)
 ;set sv2 segment
"RTN","PRCB8B",24,0)
 S (PRCRI(440.701),PRCAMT)=0
"RTN","PRCB8B",25,0)
 F  S PRCRI(440.701)=$O(^PRCH(440.7,PRCRI(440.7),50,PRCRI(440.701))) QUIT:'PRCRI(440.701)  S PRCA=^(PRCRI(440.701),0) I $P(PRCA,"^",5)=""&($P(PRCA,"^",2)-$P(PRCA,"^",3))!$P(PRCA,"^",5) D
"RTN","PRCB8B",26,0)
 . S PRCAMT=$S($P(PRCA,"^",5)="":$P(PRCA,"^",2)-$P(PRCA,"^",3),1:$P(PRCA,"^",5))+PRCAMT
"RTN","PRCB8B",27,0)
 . QUIT
"RTN","PRCB8B",28,0)
 S PRCB=$$SV2 D SETCS^GECSSTAA(PRCRI(2100.1),PRCB)
"RTN","PRCB8B",29,0)
 ;set line segemnt
"RTN","PRCB8B",30,0)
 S PRCRI(440.701)=0 F  S PRCRI(440.701)=$O(^PRCH(440.7,PRCRI(440.7),50,PRCRI(440.701))) QUIT:'PRCRI(440.701)  S PRCA=^(PRCRI(440.701),0),PRCAMT=$S($P(PRCA,"^",5)="":$P(PRCA,"^",2)-$P(PRCA,"^",3),1:$P(PRCA,"^",5)) D:PRCAMT
"RTN","PRCB8B",31,0)
 . S PRCB=$$LINE(PRCA) D SETCS^GECSSTAA(PRCRI(2100.1),PRCB)
"RTN","PRCB8B",32,0)
 . QUIT
"RTN","PRCB8B",33,0)
 D SETSTAT^GECSSTAA(PRCRI(2100.1),"Q")
"RTN","PRCB8B",34,0)
EXIT S X=$G(PRCRI(2100.1))_"/"_PRCID
"RTN","PRCB8B",35,0)
 QUIT
"RTN","PRCB8B",36,0)
 ;
"RTN","PRCB8B",37,0)
SV2() ;create sv2
"RTN","PRCB8B",38,0)
 N PRCDATA,A,B
"RTN","PRCB8B",39,0)
 S A=$$DATE^PRC0C($P(PRCFC,"^",10)+40,"H")
"RTN","PRCB8B",40,0)
 S A=$$DATE^PRC0C($P(A,"^",4)_"/1/"_$P(A,"^",3),"E")
"RTN","PRCB8B",41,0)
 D PIECE($P(A,"^",9),13,2),PIECE($E($P(A,"^"),3,4),12,2)
"RTN","PRCB8B",42,0)
 S A=$$DATE^PRC0C(DT,"I")
"RTN","PRCB8B",43,0)
 D PIECE("SV2",1,3),PIECE($E($P(A,"^",3),3,4),2,2),PIECE($P(A,"^",4),3,2),PIECE($P(A,"^",5),4,2)
"RTN","PRCB8B",44,0)
 D PIECE($P(A,"^",9),5,2),PIECE($E($P(A,"^"),3,4),6,2)
"RTN","PRCB8B",45,0)
 S B=$S(PRCAMT<0:-PRCAMT,1:PRCAMT)
"RTN","PRCB8B",46,0)
 D PIECE(PRCEM,7,1),PIECE($J(B,0,2),16,15)
"RTN","PRCB8B",47,0)
 QUIT PRCDATA_"^~"
"RTN","PRCB8B",48,0)
 ;
"RTN","PRCB8B",49,0)
LINE(PRCA) ;assemble line
"RTN","PRCB8B",50,0)
 N PRCDATA,PRCLIN,PRCSVA,PRCSVB,PRCREQ
"RTN","PRCB8B",51,0)
 N A,B,C
"RTN","PRCB8B",52,0)
 S PRCLIN="LIN"
"RTN","PRCB8B",53,0)
 S PRCDATA="SVA"
"RTN","PRCB8B",54,0)
 S A=$$FUND^PRC0C($P(PRCA,"/"),$P(PRCA,"/",2))
"RTN","PRCB8B",55,0)
 D DOCREQ^PRC0C(+A,"SPE","PRCREQ")
"RTN","PRCB8B",56,0)
 D PIECE($E(1000+PRCRI(440.701),2,4),2,3),PIECE("CC",3,2)
"RTN","PRCB8B",57,0)
 S A=$O(^PRCD(420.14,"UNQ",$P(PRCA,"/"),$P(PRCA,"/",2),1))
"RTN","PRCB8B",58,0)
 D PIECE($E($P(PRCA,"/",2),3,4),4,2) D:$P(PRCA,"/",2)'=A PIECE($E(A,3,4),5,2)
"RTN","PRCB8B",59,0)
 D PIECE($P(PRCA,"/"),6,6),PIECE(PRCSITE,8,7)
"RTN","PRCB8B",60,0)
 I $G(PRCREQ("CC"))'="N" D PIECE($P(PRCA,"/",5),10,7),PIECE($E($P(PRCA,"/",5),5,6),11,2)
"RTN","PRCB8B",61,0)
 D PIECE($P(PRCA,"/",4),12,9),PIECE($P(PRCA,"/",6),13,4)
"RTN","PRCB8B",62,0)
 D PIECE(220,23,4)
"RTN","PRCB8B",63,0)
 S PRCSVA=PRCDATA
"RTN","PRCB8B",64,0)
 S PRCDATA="SVB"
"RTN","PRCB8B",65,0)
 S A=$S(PRCAMT<0:-PRCAMT,1:PRCAMT)
"RTN","PRCB8B",66,0)
 D PIECE($J(A,0,2),2,15),PIECE($S(PRCAMT<0:"D",1:"I"),3,1),PIECE("E",5,1)
"RTN","PRCB8B",67,0)
 S PRCSVB=PRCDATA
"RTN","PRCB8B",68,0)
 QUIT PRCLIN_"^~"_PRCSVA_"^~"_PRCSVB_"^~"
"RTN","PRCB8B",69,0)
 ;
"RTN","PRCB8B",70,0)
PIECE(A,B,C) ;set piece in variable PRCDATA, A-VALUE, B-PPECE #, C-LENGTH
"RTN","PRCB8B",71,0)
 S $P(PRCDATA,"^",B)=$E(A,1,C)
"RTN","PRCB8B",72,0)
 QUIT
"VER")
8.0^22.0
**END**
**END**

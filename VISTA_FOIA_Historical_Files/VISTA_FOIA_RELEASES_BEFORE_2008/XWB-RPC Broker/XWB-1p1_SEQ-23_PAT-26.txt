$TXT Created by IVEY,JOEL at PAT-XWB.FO-OAKLAND.MED.VA.GOV  (KIDS) on WEDNESDAY, 05/08/02 at 14:22
=============================================================================
Run Date: MAY 19, 2002                     Designation: XWB*1.1*26
Package : XWB - RPC BROKER                    Priority: Mandatory
Version : 1.1        SEQ #23                    Status: Released
=============================================================================


Subject: SharedRPCBroker

Category: 
  - Other
  - Enhancement (Mandatory)
  - Informational
  - Routine

Description: 
============

 With the increasing use of client-side applications, many may be used 
 intermittently yet each requires a separate server partition and job and 
 login process.  To reduce this overhead, patch XWB*1.1*26 provides a 
 TSharedRPCBroker component for use in client-side applications.  This 
 patch includes a Server-side build which installs three routines, and 
 a client side installation for developers which includes the Delphi 
 components for building an application using the SharedRPCBroker.  
 Patch XWB*1.1*29 must be installed on workstations prior to running 
 applications containing the SharedRPCBroker.
  
 The TSharedRPCBroker uses a Common Object Model (COM) interface to 
 RPCSharedBrokerSessionMgr.exe which handles the functions of connections 
 and data transfer.  The RPCSharedBrokerSessionMgr.exe must be present on 
 Client systems that run an application useing TSharedRPCBroker and it 
 must be registered either by running it once, or from an installation 
 script running it with the command line argument "register" which will 
 cause it to start up to register itself, then immediately shut down.  If 
 multiple applications request a Broker connection to the same server and 
 ListenerPort with the AllowShared property set to True, the same 
 connection will be used for those applications, resulting in a single job 
 running on the server for them, and only connection associated with the 
 first application will have to log in.
  
  
 The TSharedRPCBroker component can be used in place of the TRPCBroker 
 component for connections with a server.  There are two new properties 
 added to those present for TRPCBroker - AllowShared a boolean property 
 which defaults to True, and OnLogout which is a TNotify property which 
 can take a procedure to be called if the SharedRPCBroker receives a logout
 request from the RPCSharedBrokerSessionMgr.
  
 If you have an application which will frequently require lengthy data 
 transfers, then it is recommended that either the standard TRPCBroker 
 component be used or, if the the TSharedRPCBroker is used, that the 
 AllowShared property be set to False.
  
 Remote Procedure Calls should, in principle, be totally stand-alone and 
 not dependent upon specific variables left in the partition from a 
 previous RPC call.  This becomes imperative if the TSharedRPCBroker 
 component is used with the AllowShared property set to True (the 
 default), since other applications may be in the partition between RPC
 calls from a specific application and those applications may modify or
 remove any application modifiable variables.  *** THE PARTITION ON THE
 VISTA SERVER WILL BE CLEANED BETWEEN RPC CALLS. ***
  
 A second component, TSharedBroker, is also placed on the component 
 palette.  This component has a large red-X across it.  It is not the 
 component to be used for the TSharedRPCBroker, but is included since it 
 is the component used to build the RPCSharedBrokerSessionMgr1.exe.
  
 This patch provides functionality requested by BCMA and CPRS projects and 
 has been tested by developers in those projects and at test sites for 
 BCMA version 2 as well as test sites for Enterprise Single Sign-On (ESSO).
  
 IMPORTANT NOTES:
  
 This patch consists of 2 parts:
  
 1.  Packman message containing the XWB*1.1*26 KIDS build.  This build 
 installs three routines on the server (XWBBRK, XWBLIB, and XWBTCPC).
  
 2.  Updated BDK (programmer client workstation software). This version of
 the BDK supports Delphi 4, Delphi 5, and Delphi 6.  
  
 DO NOT INSTALL THIS PROGRAMMER CLIENT WORKSTATION SOFTWARE ON END-USER
 CLIENT WORKSTATIONS.  If you are not using the BDK in any local or
 national development, you do not need to retrieve the Broker's programmer
 client workstation software. The software does not update the Broker
 software that is running at end-user client workstations. Further, since
 no new functionality is added to the BDK by this patch, you do not have to
 retrieve and install it on programmer workstations unless you either want
 to see the BDK source code or need to use separate run- and design-time
 packages.
  
  
 List of Test Sites
 ==================
 INDIANAPOLIS, IN (C)                                       
 LOMA LINDA, CA                                       
 MANCHESTER, NH                                       
 OIFO-SAN FRANCISCO                                       
 WASHINGTON, DC                                       
  
  
 Routine Summary:
 ================
 The following routines are included in this patch.  The second
 line of each of these routines now looks like:
  
      <tab>;;1.1;RPC BROKER;**[patch list]**;Mar 28, 1997
  
 Checksums:
 ==========
 Checksums obtained using CHECK^XTSUMBLD
  
  Rtn Nm    Chksum Before   Chksum After    Patch List
  ------    -------------   ------------    ----------
  XWBBRK          5552318        5758866    **2,4,10,16,26**
  XWBLIB          3253016        3479070    **6,10,26**
  XWBTCPC         7379419        7570128    **2,5,4,6,9,16,26**
  
 List of preceding patches: 10,16
   
  
 Blood Bank Team Coordination:
 =============================
 Clearance - 5/10/2002
  
  
  
  
 The client-side software distribution includes:
  
  FILE NAMES       DESCRIPTION                         Bytes 
  XWB1_1P26PG.EXE  BDK Self-Installing Executable   1,909,514
  XWB1_1P26IG.PDF  Installation Guide                 485,328
  XWB1_1P26RM.TXT  Readme text file                    25,661
  XWB1_1P26SM.PDF  System Manual                      709,549
  XWB1_1P26TM.PDF  Technical Manual                   350,945
  XWB1_1P26DG.PDF  Developer's Guide                  500,245
  
 Note:  Use Binary mode for .PDF, and .EXE files.  
        Use ASCII mode for .TXT file.
  
 To obtain the updated BDK, use FTP to retrieve the software from one of
 the following CIO Field Offices' ANONYMOUS.SOFTWARE directories:
  
   CIO FIELD OFFICE                FTP Address         
   Hines                           152.129.1.110 (isc-chicago.va.gov)
   Albany                          152.127.1.5 (isc-albany.va.gov)
   Salt Lake City                  152.131.2.1 (isc-slc.va.gov)
  
  
 BROKER-DEPENDENT COMPONENTS:
  
 Warning: Some components, such as the FileMan Delphi Components, reference
 the TRPCBroker component.  If you use such components for development, be
 aware that installing a new version of the TRPCBroker component (i.e. a
 new BDK) may cause incompatibilities in Delphi, resulting in a compile
 failure of the unit containing the Broker-dependent component and the
 following compilation error:
  
        Unit <unit1> was compiled with a different version of <unit2>.
  
 Check with the creators of the Broker-dependent component to make sure
 that, with regards to the version of the BDK you are about to install:
  
 a) Your current component is compatible, or
  
 b) You can obtain a new version of the component that is compatible.
  
 c) You have the source (.pas, .dfm, .dpk, etc.) files available so that
 the component can be recompiled successfully.    If you're using the
 FileMan Delphi Components (FMDC), please note that the FMDC source code
 includes references to RPC Broker Development Kit (BDK) code. When you
 install a new version of the BDK, you will need to recompile the FMDC.
    As of patch FMDC*1.0*1, source code for FMDC is provided, allowing you
 to recompile FMDC if necessary. For instructions on how to recompile FMDC,
 please refer to FMDC*1.0*2.
  
 INSTALLATION:
  
 Server Side: 
 ============
  
 Use the following instructions in installing this server-side RPC Broker
 patch.  Do NOT follow the M Server Installation Instructions in the RPC
 Broker Installation Guide to install the server portion of this patch.
  
 Three routines are modified on the server by this patch.
  
      1.   Installation of this patch should take less than three (3) 
           minutes
  
      2.   Users ARE allowed to be on the system during the 
      installation, but you should select a time when minimal
      number of users are on.  Installation might interrupt users using 
      GUI Applications such as CPRS.
  
      3.   DSM sites - Some of these routines are usually mapped,
      so you will need to disable mapping for the affected routines.
  
      4.   Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. 
      This option will load the KIDS (Kernel Installation and Distribution 
      System) package onto your system.
     
      5.   You DO NOT need to stop TaskMan or the background filers.
  
      6.   The patch has now been loaded into a transport global on your 
      system.  On the KIDS menu, select the 'Installation' menu and use
      the following options: 
            Verify Checksums in Transport Global
            Print Transport Global 
            Compare Transport Global to Current System
            Backup a Transport Global
  
            Return to Programmers Prompt and use "D ^XPDKRN":
            Select KIDS OPTION: Install
                                =======
             Install Package(s) 
             Select INSTALL NAME: XWB*1.1*26
                                  ==========
  
         Logons do not need to be inhibited.
         No Options or Protocols need to be placed out-of-order.
         Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO
                                                                         ==
  
      7.  AXP Sites - Answer 'NO' to the question 'Want to MOVE 
      routines to other CPUs?'.
  
      8.  If routines were unmapped as part of step 2, they should be 
      returned to the mapped set once the installation has run to 
      completion.
  
  
  
  Client Side: 
 ============
  
 Please follow the instructions in the Broker 1.1 Patch 26 Installation
 Guide. 
  
  
 The following lists the files that will be installed during the 
 installation if Delphi 4 and Delphi 5 and Delphi 6 installations 
 are selected.  It is assumed that the installation was performed 
 into the default directory (C:\Program Files\Vista\BDK32).
  
 Also, the files, XWB_R40.bpl and XWB_R50.bpl, if present in the 
 %WIN%\System32 directory (where %WIN% is the location of the Windows 
 directory, usually WINNT or WINDOWS), will be deleted.
  
    Date      Time   Attrib    Bytes     CRC-32  Filename
 ---------- -------- ------ ----------- -------- --------
  
 C:\Program Files\vista\BDK32\D4
 05/03/2002 11:45:08 A-----       9,604 1FE805DA 
 RPCSharedBrokerSessionMgr1_TLB_SRB.dcu
 05/08/2002 15:27:36 A-----      20,311 4C2D6BAF SharedRPCBroker.dcu
 05/08/2002 15:28:10 A-----         608 3C9D06FD SharedRPCBrokerReg.dcu
 05/08/2002 15:27:36 A-----       3,726 1B9E765E SharedRPCBrokerSink.dcu
 05/08/2002 15:28:10 A-----       4,211 DAEA57F5 SharedRPCBroker_D40.dcu
 05/08/2002 15:28:10 A-----       3,780 43C50F0A SharedRPCBroker_R40.dcu
  
 C:\Program Files\vista\BDK32\D5
 05/03/2002 11:34:28 A-----      27,825 BB8A0FA5 
 RPCSharedBrokerSessionMgr1_TLB.dcu
 05/03/2002 11:34:26 A-----       9,607 6A672BF0 
 RPCSharedBrokerSessionMgr1_TLB_SRB.dcu
 05/08/2002 15:29:52 A-----      20,414 FBB12EBC SharedRPCBroker.dcu
 05/08/2002 15:30:08 A-----         698 80905ACD SharedRPCBrokerReg.dcu
 05/08/2002 15:29:52 A-----       3,742 425967F0 SharedRPCBrokerSink.dcu
 05/08/2002 15:30:08 A-----       4,615 1471981F SharedRPCBroker_D50.dcu
 05/08/2002 15:29:52 A-----       4,208 BA772D4B SharedRPCBroker_R50.dcu
  
 C:\Program Files\vista\BDK32\D6
 05/03/2002 11:49:40 A-----      27,853 4128CBEE 
 RPCSharedBrokerSessionMgr1_TLB.dcu
 05/03/2002 11:49:40 A-----       9,616 D5CB1C77 
 RPCSharedBrokerSessionMgr1_TLB_SRB.dcu
 05/08/2002 15:31:38 A-----      20,437 D49EBE8E SharedRPCBroker.dcu
 05/08/2002 15:31:48 A-----         738 CCC26D94 SharedRPCBrokerReg.dcu
 05/08/2002 15:31:38 A-----       3,760 95E0238A SharedRPCBrokerSink.dcu
 05/08/2002 15:31:48 A-----       5,322 B3DEEEC0 SharedRPCBroker_D60.dcu
 05/08/2002 15:31:48 A-----       4,699 B9C63B21 SharedRPCBroker_R60.dcu
  
 C:\Program Files\vista\BDK32\Help
 05/08/2002 16:01:26 A-----       5,808 F986C3D4 Broker.als
 03/29/2002 15:16:32 A-----         175 6FD0E64D Broker.cnt
 05/08/2002 13:12:46 A-----   1,384,950 628F6F2B Broker.hlp
 05/07/2002 14:37:16 A-----       5,952 EFA66A5C broker.toc
  
 C:\Program Files\vista\BDK32\Samples\BrokerEx (p26)
 03/11/2002 17:27:04 A-----       1,367 83B402A8 BrokerExample.dof
 10/01/2001 10:05:04 A-----         667 AD3997C1 BrokerExample.dpr
 04/05/2002 14:00:44 A-----     872,448 E2CB6BF4 BrokerExample.exe
 10/01/2001 09:52:06 A-----         876 483416C3 BrokerExample.res
 09/17/1997 18:54:00 A-----       2,212 5602350D BrokerExampleAboutFrm.dfm
 09/17/1997 18:54:00 A-----         883 A61F16F0 BrokerExampleAboutFrm.PAS
 04/05/2002 14:00:38 A-----       7,534 CF807C98 BrokerExampleFrm.dfm
 03/21/2002 16:27:38 A-----       9,439 C23A37BA BrokerExampleFrm.PAS
  
 C:\Program Files\vista\BDK32\SharedBrokerDebugger
 12/26/2001 09:52:12 A-----       4,385 A995D207 fClientInfo.pas
 01/07/2002 15:38:04 A-----       5,710 315C839B fClientRPCLogger.dfm
 01/07/2002 13:35:34 A-----       5,920 49855F37 fClientRPCLogger.pas
 01/07/2002 14:19:26 A-----       4,062 D6C5CF5B fSharedBrokerDebugger.dfm
 03/04/2002 15:10:24 A-----      23,035 6F359C3A fSharedBrokerDebugger.pas
 01/25/2002 14:13:52 A-----      42,487 B543B8A9 
 RPCSharedBrokerSessionMgr1_TLB.pas
 01/25/2002 12:59:18 A-----       1,641 6C54799C SharedBrokerDebugger.dof
 01/03/2002 09:57:00 A-----         487 86C4D60E SharedBrokerDebugger.dpr
 03/11/2002 16:51:02 A-----     633,344 649B5C8A SharedBrokerDebugger.exe
 01/25/2002 12:47:32 A-----       1,724 F82E6DA6 SharedBrokerDebugger.res
 01/03/2002 11:10:26 A-----       4,697 5AB63D8B uBrokerConnectionInfo.pas
 01/07/2002 13:32:22 A-----       4,264 72569BA5 uClientInfo.pas
 01/02/2002 13:23:04 A-----      11,403 38504A78 uParam.pas
 01/04/2002 14:58:26 A-----      11,500 AC36FFE0 uRpcLogEntry.pas
  
 C:\Program Files\vista\BDK32\Source
 01/16/2002 14:10:36 A-----         328 765160C8 
 fRPCSharedBrokerSessionMgr1.dfm
 01/16/2002 14:11:22 A-----         319 85D9BFD1 
 fRPCSharedBrokerSessionMgr1.pas
 04/05/2002 14:22:06 A-----         687 E667631A fVistaBar.dfm
 01/17/2002 13:50:24 A-----       4,500 7AFBB6E5 fVistaBar.pas
 01/07/2002 16:16:32 A-----       3,440 C5D17D36 fVistaBar.res
 11/05/2001 10:37:48 A-----       2,701 81304061 IISBase.inc
 01/17/2002 13:44:36 A-----      61,780 7FC2C015 RPCMgr1.pas
 05/03/2002 11:31:32 A-----       1,427 5A02EFAC 
 RPCSharedBrokerSessionMgr1.dof
 03/11/2002 16:46:10 A-----         374 34068598 
 RPCSharedBrokerSessionMgr1.dpr
 05/08/2002 15:29:32 A-----     680,960 B176EEF1 
 RPCSharedBrokerSessionMgr1.exe
 01/16/2002 14:10:34 A-----         876 483416C3 
 RPCSharedBrokerSessionMgr1.res
 01/24/2002 13:39:18 A-----       9,008 ADA18850 
 RPCSharedBrokerSessionMgr1.tlb
 01/18/2002 15:29:20 A-----         480 DD1CBF20 
 RPCSharedBrokerSessionMgr1_TLB.dcr
 01/28/2002 17:08:08 A-----      42,487 B543B8A9 
 RPCSharedBrokerSessionMgr1_TLB.pas
 03/11/2002 16:35:28 A-----      17,081 FBC1A428 
 RPCSharedBrokerSessionMgr1_TLB_SRB.pas
 03/29/2002 14:58:30 A-----         936 AB8C0CA1 SharedRPCBroker.dcr
 05/07/2002 13:38:56 A-----      25,685 7391AA38 SharedRPCBroker.pas
 01/28/2002 17:05:46 A-----         585 3DE11B1B SharedRPCBrokerReg.pas
 05/08/2002 15:27:22 A-----       3,981 C4757DA4 SharedRPCBrokerSink.pas
 04/11/2002 09:53:22 A-----       1,806 4BCC5BB6 SharedRPCBroker_D40.dof
 12/27/2001 12:15:56 A-----         695 D840EE0B SharedRPCBroker_D40.dpk
 12/27/2001 11:46:42 A-----       1,572 2F27552A SharedRPCBroker_D40.res
 05/03/2002 11:37:04 A-----       1,833 0C3213AB SharedRPCBroker_D50.dof
 05/03/2002 11:36:44 A-----         699 DA6796B2 SharedRPCBroker_D50.dpk
 05/03/2002 11:36:42 A-----       1,600 5C492928 SharedRPCBroker_D50.res
 04/11/2002 09:57:16 A-----       1,677 3FFD6C9D SharedRPCBroker_D60.dof
 01/30/2002 08:52:44 A-----         706 3FC673C3 SharedRPCBroker_D60.dpk
 01/30/2002 08:52:42 A-----       1,536 D862B20A SharedRPCBroker_D60.res
 03/11/2002 17:28:44 A-----       1,862 A7B8BE4C SharedRPCBroker_R40.dof
 03/11/2002 17:28:26 A-----         772 27DD76B3 SharedRPCBroker_R40.dpk
 01/29/2002 12:06:30 A-----       1,572 2F27552A SharedRPCBroker_R40.res
 05/03/2002 11:35:54 A-----       1,935 DCD390A9 SharedRPCBroker_R50.dof
 05/03/2002 11:34:22 A-----         877 7197500E SharedRPCBroker_R50.dpk
 05/03/2002 11:34:20 A-----       1,608 14CF74FE SharedRPCBroker_R50.res
 03/11/2002 16:41:22 A-----       1,710 5F9CF4B9 SharedRPCBroker_R60.dof
 03/11/2002 16:39:10 A-----         870 6409C1CD SharedRPCBroker_R60.dpk
 01/30/2002 08:52:02 A-----       1,536 D862B20A SharedRPCBroker_R60.res
 05/03/2002 11:31:02 A-----      67,854 52C456FE uSharedBroker1.pas
 01/16/2002 13:19:40 A-----       1,536 D862B20A uSharedBroker1.res
  
  
 The following files are stored in directories under the Delphi 
 directory.  
 These are noted as $(DELPHI4) and $(DELPHI5) for the base directories for 
 Delphi 4 and 5, respectively.
  
 $(DELPHI4)\Bin
 05/08/2002 15:28:10 A-----      17,920 B16EFEBC SharedRPCBroker_D40.bpl
 05/08/2002 15:27:54 A-----      36,352 604381F9 SharedRPCBroker_R40.bpl
  
 $(DELPHI4)\Lib
 05/08/2002 15:28:10 A-----       4,421 93BCE6A1 SharedRPCBroker_D40.dcp
 05/08/2002 15:27:54 A-----      33,771 0CA22687 SharedRPCBroker_R40.dcp
  
 $(DELPHI5)\Projects\Bpl
 05/08/2002 15:30:08 ------      18,944 96A7DA37 SharedRPCBroker_D50.bpl
 05/08/2002 15:30:08 A-----       4,772 16D0BE0A SharedRPCBroker_D50.dcp
 05/08/2002 15:29:52 ------      52,224 3BDB0BAA SharedRPCBroker_R50.bpl
 05/08/2002 15:29:52 A-----      65,032 DF4E854F SharedRPCBroker_R50.dcp
  
 $(DELPHI6)\Projects\Bpl
 05/08/2002 15:31:48 A-----      20,992 917EF937 SharedRPCBroker_D60.bpl
 05/08/2002 15:31:48 A-----       5,353 DFFB1AAC SharedRPCBroker_D60.dcp
 05/08/2002 15:31:38 A-----      51,200 395E9B3A SharedRPCBroker_R60.bpl
 05/08/2002 15:31:38 A-----      65,666 784DE533 SharedRPCBroker_R60.dcp
  
  
 The following files are installed by the installation program for 
 uninstalling the patch.  These sizes, dates, etc. may vary based on 
 selections made on your system.
  
 C:\Program Files\vista\BDK32
 05/08/2002 16:25:42 A-----      13,178 25E1352D INSTALL.LOG
 06/25/1999 11:55:30 A-----     149,504 30FDD633 UNWISE.EXE
  
 <end of listing>

Routine Information:
====================

Routine Name:
  - XWBBRK


Routine Checksum:

Routine Name:
  - XWBLIB


Routine Checksum:

Routine Name:
  - XWBTCPC


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : IVEY,JOEL                      Date Entered : OCT 09, 2001
Completed By: SINGH,GURBIR                  Date Completed: MAY 13, 2002
Released By : PALMER,MICHAEL                Date Released : MAY 19, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT

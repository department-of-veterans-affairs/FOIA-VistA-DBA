KIDS Distribution saved on Sep 22, 2003@07:56:31
Restricting Stop Codes Combine build SD*5.3*317 & ECX*3.0*57
**KIDS**:SD RSC 1.0^SD*5.3*317^ECX*3.0*57^

**INSTALL NAME**
SD RSC 1.0
"BLD",4875,0)
SD RSC 1.0^^1^3030922^y
"BLD",4875,1,0)
^^9^9^3030922^^^^
"BLD",4875,1,1,0)
The Health Administration Center (HAC) Decision Support System (DSS)
"BLD",4875,1,2,0)
office, requested an enhancement to the Veterans Health Information Systems
"BLD",4875,1,3,0)
and Technology Architecture (VISTA) to implement an electronic means of
"BLD",4875,1,4,0)
restricting medical centers from entering secondary DSS stop codes, also
"BLD",4875,1,5,0)
known as DSS Identifiers, in the primary DSS stop code position.  Also to
"BLD",4875,1,6,0)
prevent stations from putting stop codes in the secondary position that
"BLD",4875,1,7,0)
should be primary only.
"BLD",4875,1,8,0)

"BLD",4875,1,9,0)
This is a combine build consisting of two packages SD*5.3*317 and ECX*3.0*57.
"BLD",4875,10,0)
^9.63^2^2
"BLD",4875,10,1,0)
SD*5.3*317^1
"BLD",4875,10,2,0)
ECX*3.0*57^1
"BLD",4875,10,"B","ECX*3.0*57",2)

"BLD",4875,10,"B","SD*5.3*317",1)

"BLD",4875,"KRN",0)
^9.67PA^8989.52^19
"BLD",4875,"KRN",.4,0)
.4
"BLD",4875,"KRN",.401,0)
.401
"BLD",4875,"KRN",.402,0)
.402
"BLD",4875,"KRN",.403,0)
.403
"BLD",4875,"KRN",.5,0)
.5
"BLD",4875,"KRN",.84,0)
.84
"BLD",4875,"KRN",3.6,0)
3.6
"BLD",4875,"KRN",3.8,0)
3.8
"BLD",4875,"KRN",9.2,0)
9.2
"BLD",4875,"KRN",9.8,0)
9.8
"BLD",4875,"KRN",19,0)
19
"BLD",4875,"KRN",19.1,0)
19.1
"BLD",4875,"KRN",101,0)
101
"BLD",4875,"KRN",409.61,0)
409.61
"BLD",4875,"KRN",771,0)
771
"BLD",4875,"KRN",870,0)
870
"BLD",4875,"KRN",8989.51,0)
8989.51
"BLD",4875,"KRN",8989.52,0)
8989.52
"BLD",4875,"KRN",8994,0)
8994
"BLD",4875,"KRN","B",.4,.4)

"BLD",4875,"KRN","B",.401,.401)

"BLD",4875,"KRN","B",.402,.402)

"BLD",4875,"KRN","B",.403,.403)

"BLD",4875,"KRN","B",.5,.5)

"BLD",4875,"KRN","B",.84,.84)

"BLD",4875,"KRN","B",3.6,3.6)

"BLD",4875,"KRN","B",3.8,3.8)

"BLD",4875,"KRN","B",9.2,9.2)

"BLD",4875,"KRN","B",9.8,9.8)

"BLD",4875,"KRN","B",19,19)

"BLD",4875,"KRN","B",19.1,19.1)

"BLD",4875,"KRN","B",101,101)

"BLD",4875,"KRN","B",409.61,409.61)

"BLD",4875,"KRN","B",771,771)

"BLD",4875,"KRN","B",870,870)

"BLD",4875,"KRN","B",8989.51,8989.51)

"BLD",4875,"KRN","B",8989.52,8989.52)

"BLD",4875,"KRN","B",8994,8994)

"MBREQ")
0
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"VER")
8.0^22.0
**INSTALL NAME**
SD*5.3*317
"BLD",4877,0)
SD*5.3*317^SCHEDULING^0^3030922^y
"BLD",4877,4,0)
^9.64PA^40.7^1
"BLD",4877,4,40.7,0)
40.7
"BLD",4877,4,40.7,2,0)
^9.641^40.7^1
"BLD",4877,4,40.7,2,40.7,0)
CLINIC STOP  (File-top level)
"BLD",4877,4,40.7,2,40.7,1,0)
^9.6411^6^2
"BLD",4877,4,40.7,2,40.7,1,5,0)
RESTRICTION TYPE
"BLD",4877,4,40.7,2,40.7,1,6,0)
RESTRICTION DATE
"BLD",4877,4,40.7,222)
y^n^p^^^^n^^n
"BLD",4877,4,40.7,224)

"BLD",4877,4,"APDD",40.7,40.7)

"BLD",4877,4,"APDD",40.7,40.7,5)

"BLD",4877,4,"APDD",40.7,40.7,6)

"BLD",4877,4,"B",40.7,40.7)

"BLD",4877,"ABPKG")
n
"BLD",4877,"INI")

"BLD",4877,"INIT")
SD53P317
"BLD",4877,"KRN",0)
^9.67PA^8989.52^19
"BLD",4877,"KRN",.4,0)
.4
"BLD",4877,"KRN",.401,0)
.401
"BLD",4877,"KRN",.402,0)
.402
"BLD",4877,"KRN",.403,0)
.403
"BLD",4877,"KRN",.5,0)
.5
"BLD",4877,"KRN",.84,0)
.84
"BLD",4877,"KRN",3.6,0)
3.6
"BLD",4877,"KRN",3.8,0)
3.8
"BLD",4877,"KRN",9.2,0)
9.2
"BLD",4877,"KRN",9.8,0)
9.8
"BLD",4877,"KRN",9.8,"NM",0)
^9.68A^5^4
"BLD",4877,"KRN",9.8,"NM",2,0)
SDSTPD1^^0^B85830897
"BLD",4877,"KRN",9.8,"NM",3,0)
SDSTPD2^^0^B63069932
"BLD",4877,"KRN",9.8,"NM",4,0)
SDSCRP^^0^B11792085
"BLD",4877,"KRN",9.8,"NM",5,0)
SD53P317^^0^B39623769
"BLD",4877,"KRN",9.8,"NM","B","SD53P317",5)

"BLD",4877,"KRN",9.8,"NM","B","SDSCRP",4)

"BLD",4877,"KRN",9.8,"NM","B","SDSTPD1",2)

"BLD",4877,"KRN",9.8,"NM","B","SDSTPD2",3)

"BLD",4877,"KRN",19,0)
19
"BLD",4877,"KRN",19,"NM",0)
^9.68A^2^2
"BLD",4877,"KRN",19,"NM",1,0)
SDSUP^^2
"BLD",4877,"KRN",19,"NM",2,0)
SD CLN STOP CODE REP^^0
"BLD",4877,"KRN",19,"NM","B","SD CLN STOP CODE REP",2)

"BLD",4877,"KRN",19,"NM","B","SDSUP",1)

"BLD",4877,"KRN",19.1,0)
19.1
"BLD",4877,"KRN",101,0)
101
"BLD",4877,"KRN",409.61,0)
409.61
"BLD",4877,"KRN",771,0)
771
"BLD",4877,"KRN",870,0)
870
"BLD",4877,"KRN",8989.51,0)
8989.51
"BLD",4877,"KRN",8989.52,0)
8989.52
"BLD",4877,"KRN",8994,0)
8994
"BLD",4877,"KRN","B",.4,.4)

"BLD",4877,"KRN","B",.401,.401)

"BLD",4877,"KRN","B",.402,.402)

"BLD",4877,"KRN","B",.403,.403)

"BLD",4877,"KRN","B",.5,.5)

"BLD",4877,"KRN","B",.84,.84)

"BLD",4877,"KRN","B",3.6,3.6)

"BLD",4877,"KRN","B",3.8,3.8)

"BLD",4877,"KRN","B",9.2,9.2)

"BLD",4877,"KRN","B",9.8,9.8)

"BLD",4877,"KRN","B",19,19)

"BLD",4877,"KRN","B",19.1,19.1)

"BLD",4877,"KRN","B",101,101)

"BLD",4877,"KRN","B",409.61,409.61)

"BLD",4877,"KRN","B",771,771)

"BLD",4877,"KRN","B",870,870)

"BLD",4877,"KRN","B",8989.51,8989.51)

"BLD",4877,"KRN","B",8989.52,8989.52)

"BLD",4877,"KRN","B",8994,8994)

"BLD",4877,"PRET")

"BLD",4877,"QUES",0)
^9.62^^
"BLD",4877,"REQB",0)
^9.611^1^1
"BLD",4877,"REQB",1,0)
SD*5.3*307^2
"BLD",4877,"REQB","B","SD*5.3*307",1)

"FIA",40.7)
CLINIC STOP
"FIA",40.7,0)
^DIC(40.7,
"FIA",40.7,0,0)
40.7I
"FIA",40.7,0,1)
y^n^p^^^^n^^n
"FIA",40.7,0,10)

"FIA",40.7,0,11)

"FIA",40.7,0,"RLRO")

"FIA",40.7,0,"VR")
5.3^SD
"FIA",40.7,40.7)
1
"FIA",40.7,40.7,5)

"FIA",40.7,40.7,6)

"INIT")
SD53P317
"KRN",19,627,-1)
2^1
"KRN",19,627,0)
SDSUP^Supervisor Menu^^M^.5^^^^^^^16
"KRN",19,627,10,0)
^19.01IP^21^19
"KRN",19,627,10,21,0)
12460
"KRN",19,627,10,21,"^")
SD CLN STOP CODE REP
"KRN",19,627,"U")
SUPERVISOR MENU
"KRN",19,12460,-1)
0^2
"KRN",19,12460,0)
SD CLN STOP CODE REP^Non-Conforming Clinics Stop Code Report^^R^^^^^^^y^SCHEDULING
"KRN",19,12460,1,0)
^19.06^6^6^3030811^^^^
"KRN",19,12460,1,1,0)
This option lists all the clinic entries in the HOSPITAL LOCATION 
"KRN",19,12460,1,2,0)
file (#44) that have invalid primary or secondary stop codes.  The 
"KRN",19,12460,1,3,0)
report will list the clinic name, primary stop code, secondary stop 
"KRN",19,12460,1,4,0)
code and the reason for non conformance.  If the clinics have all 
"KRN",19,12460,1,5,0)
conforming primary and secondary clinic stop codes then NO PROBLEM 
"KRN",19,12460,1,6,0)
CLINICS FOUND will be listed on the report.
"KRN",19,12460,10.1)
Cln Non-Conform Stop Code Rep
"KRN",19,12460,25)
SDSCRP
"KRN",19,12460,"U")
NON-CONFORMING CLINICS STOP CO
"MBREQ")
1
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813^2930824
"PKG",16,22,1,"PAH",1,0)
317^3030922
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","SD53P317")
0^5^B39623769
"RTN","SD53P317",1,0)
SD53P317 ;ALB/JAM - Restricting Stop Code Post-Init Rtn ; 0707/03
"RTN","SD53P317",2,0)
 ;;5.3;Scheduling;**317**;AUG 13, 1993
"RTN","SD53P317",3,0)
 ;
"RTN","SD53P317",4,0)
POST ; entry point
"RTN","SD53P317",5,0)
 ;* Appropriating Stop Code fl #40.7 entries with restriction type & date
"RTN","SD53P317",6,0)
 N SDJ,ZTRTN,ZTDESC,ZTIO,ZTDTH,ZTREQ,ZTSAVE
"RTN","SD53P317",7,0)
 I $D(^UTL("STPCODE")) K ^UTL("STPCODE")
"RTN","SD53P317",8,0)
 S SDJ=$J
"RTN","SD53P317",9,0)
 D MES^XPDUTL(" ")
"RTN","SD53P317",10,0)
 D BMES^XPDUTL("This post install process does the following:-")
"RTN","SD53P317",11,0)
 D BMES^XPDUTL("  1. Appropriates Stop Code entries in CLINIC STOP file (#40.7) with a ")
"RTN","SD53P317",12,0)
 D MES^XPDUTL("     Restriction Type and Date.")
"RTN","SD53P317",13,0)
 D BMES^XPDUTL("  2. Check clinics in file #44 for nonconforming Stop Codes and produces")
"RTN","SD53P317",14,0)
 D MES^XPDUTL("     a MailMan message.")
"RTN","SD53P317",15,0)
 D MES^XPDUTL(" ")
"RTN","SD53P317",16,0)
 ;read and store stop codes in ^UTILITY("STPCODE",SDJ,
"RTN","SD53P317",17,0)
 D ^SDSTPD1
"RTN","SD53P317",18,0)
 ;assign stop code restriction type and restriction date
"RTN","SD53P317",19,0)
 D STPMOD
"RTN","SD53P317",20,0)
 ;check file #44 for non-conforming restriction type
"RTN","SD53P317",21,0)
 S ZTRTN="PROCESS^SD53P317"
"RTN","SD53P317",22,0)
 S ZTDESC="Non-Conforming Clinics Restricted Stop Code Report"
"RTN","SD53P317",23,0)
 S ZTIO="",ZTDTH=$H,ZTREQ="@" D ^%ZTLOAD
"RTN","SD53P317",24,0)
 D MES^XPDUTL(" ")
"RTN","SD53P317",25,0)
 D BMES^XPDUTL("completed...")
"RTN","SD53P317",26,0)
 D MES^XPDUTL(" ")
"RTN","SD53P317",27,0)
 K ^UTILITY("STPCODE")
"RTN","SD53P317",28,0)
 Q
"RTN","SD53P317",29,0)
STPMOD ;* designate stop codes in file 40.7 as primary, secondary or either
"RTN","SD53P317",30,0)
 ;
"RTN","SD53P317",31,0)
 ;  SDXX is in format:
"RTN","SD53P317",32,0)
 ;   STOP CODE^NAME^RESTRICTION TYPE^RESTRICTION DATE^INACTIVE DATE
"RTN","SD53P317",33,0)
 ;
"RTN","SD53P317",34,0)
 N SDX,SDXX,NAME,CODE,RESTY,RESDT,X,Y,DIC,DIE,DA,DR,IEN,INACT
"RTN","SD53P317",35,0)
 D BMES^XPDUTL("Adding Restricted Type and Restricted Date to CLINIC STOP File (#40.7)...")
"RTN","SD53P317",36,0)
 D MES^XPDUTL(" ")
"RTN","SD53P317",37,0)
 S SDX=0 F  S SDX=$O(^UTILITY("STPCODE",SDJ,SDX)) Q:'SDX  S SDXX=^(SDX) D
"RTN","SD53P317",38,0)
 .S CODE=$P(SDXX,U),NAME=$P(SDXX,U,2),RESTY=$P(SDXX,U,3)
"RTN","SD53P317",39,0)
 .S RESDT=$P(SDXX,U,4),INACT=$P(SDXX,U,5)
"RTN","SD53P317",40,0)
 .I '$D(^DIC(40.7,"C",CODE)) S ^TMP("STPCD",$J,CODE)=SDXX Q
"RTN","SD53P317",41,0)
 .S IEN=$O(^DIC(40.7,"C",CODE,0)) I 'IEN Q
"RTN","SD53P317",42,0)
 .I '$D(^DIC(40.7,IEN,0)) S ^TMP("STPCD",$J,CODE)=SDXX Q
"RTN","SD53P317",43,0)
 .S IEN=0 F  S IEN=$O(^DIC(40.7,"C",CODE,IEN)) Q:'IEN  D FILSC
"RTN","SD53P317",44,0)
 .W !,?2,CODE,?7,NAME,?40,"National Code Updated...."
"RTN","SD53P317",45,0)
 D MES^XPDUTL(" ")
"RTN","SD53P317",46,0)
 S RESTY="S" F SDX=450:1:485 D
"RTN","SD53P317",47,0)
 .Q:'$D(^DIC(40.7,"C",SDX))  S IEN=$O(^DIC(40.7,"C",SDX,0)) I 'IEN Q
"RTN","SD53P317",48,0)
 .Q:'$D(^DIC(40.7,IEN,0))  S SDXX=^(0) S RESDT="10/1/2003"
"RTN","SD53P317",49,0)
 .S IEN=0 F  S IEN=$O(^DIC(40.7,"C",SDX,IEN)) Q:'IEN  D FILSC
"RTN","SD53P317",50,0)
 .W !,?2,SDX,?7,$P(SDXX,U),?40,"Local Code Updated...."
"RTN","SD53P317",51,0)
 D MES^XPDUTL(" ")
"RTN","SD53P317",52,0)
 S CODE="" F  S CODE=$O(^TMP("STPCD",$J,CODE)) Q:CODE=""  D
"RTN","SD53P317",53,0)
 .S SDX=^TMP("STPCD",$J,CODE),NAME=$P(SDX,U,2)
"RTN","SD53P317",54,0)
 .S RESTY=$P(SDXX,U,3),RESDT=$P(SDXX,U,4),INACT=$P(SDXX,U,5)
"RTN","SD53P317",55,0)
 .W !,?2,CODE,?7,NAME,?40,"Problematic....code not in file 40.7"
"RTN","SD53P317",56,0)
 D MES^XPDUTL(" ")
"RTN","SD53P317",57,0)
 S IEN=0 F  S IEN=$O(^DIC(40.7,IEN)) Q:'IEN  D
"RTN","SD53P317",58,0)
 .S SDXX=$G(^DIC(40.7,IEN,0)) Q:SDXX=""  Q:$P(SDXX,U,6)'=""
"RTN","SD53P317",59,0)
 .W !,?2,$P(SDXX,U,2),?7,$E($P(SDXX,U),1,30),?40,"Missing Restriction Type."
"RTN","SD53P317",60,0)
 Q
"RTN","SD53P317",61,0)
 ;
"RTN","SD53P317",62,0)
FILSC ;Update stop code in file 40.7
"RTN","SD53P317",63,0)
 S DIE="^DIC(40.7,"
"RTN","SD53P317",64,0)
 S DA=IEN,DR="5////"_RESTY_";6///"_RESDT D ^DIE
"RTN","SD53P317",65,0)
 Q
"RTN","SD53P317",66,0)
 ;
"RTN","SD53P317",67,0)
PROCESS ;background entry point
"RTN","SD53P317",68,0)
 ; Locate invalid Stop Code in file 44 & 728.44 and put in a mail message
"RTN","SD53P317",69,0)
 N SDX,IEN,BLN,COUNT,TXTVAR,I,LNS,CNT,STR,SDJ,PSC,SSC,DPC,DSC,CNTX,NAM
"RTN","SD53P317",70,0)
 N SCN,PSCN,SSCN,DPCN,DSCN,IDT
"RTN","SD53P317",71,0)
 S COUNT=0,$P(BLN," ",60)="",$P(LNS,"-",80)=""
"RTN","SD53P317",72,0)
 S SDJ=$J K ^TMP(SDJ,"SD53P309")
"RTN","SD53P317",73,0)
 F I=1:1 S TXTVAR=$P($T(MSGTXT+I),";;",2) Q:TXTVAR="QUIT"  D LINE(TXTVAR)
"RTN","SD53P317",74,0)
 D CK44
"RTN","SD53P317",75,0)
 D MAIL
"RTN","SD53P317",76,0)
 K ^TMP(SDJ,"SD53P309"),TEXT,TYP
"RTN","SD53P317",77,0)
 Q
"RTN","SD53P317",78,0)
 ;
"RTN","SD53P317",79,0)
CK44 ;Check file 44 for invalid stop codes.
"RTN","SD53P317",80,0)
 N RDT,IDAT
"RTN","SD53P317",81,0)
 S (CNTX,IEN)=0
"RTN","SD53P317",82,0)
 D HDR
"RTN","SD53P317",83,0)
 ;search file #44 for invalid entries
"RTN","SD53P317",84,0)
 F  S IEN=$O(^SC(IEN)) Q:'IEN  D
"RTN","SD53P317",85,0)
 .K STR S SDX=$G(^SC(IEN,0)),PSC=$P(SDX,U,7),SSC=$P(SDX,U,18),CNT=1
"RTN","SD53P317",86,0)
 .I $P(SDX,U,3)'="C" Q
"RTN","SD53P317",87,0)
 .S NAM=$P(SDX,U),IDAT=$G(^SC(IEN,"I")) I IDAT'="" D
"RTN","SD53P317",88,0)
 ..S IDT=$P(IDAT,U),RDT=$P(IDAT,U,2) Q:IDT=""  I RDT="" S NAM="*"_NAM Q
"RTN","SD53P317",89,0)
 ..I RDT>IDT S NAM="*"_NAM
"RTN","SD53P317",90,0)
 .S (PSCN,SSCN)="" D
"RTN","SD53P317",91,0)
 ..I PSC="" S STR(CNT)="Missing primary code",CNT=CNT+1 Q
"RTN","SD53P317",92,0)
 ..S PSCN=$$SCNUM(PSC)
"RTN","SD53P317",93,0)
 ..I PSCN="" S STR(CNT)=PSC_" has Inv pri ptr",CNT=CNT+1 Q
"RTN","SD53P317",94,0)
 ..D SCCHK(PSC,"P")
"RTN","SD53P317",95,0)
 .I SSC'="" D
"RTN","SD53P317",96,0)
 ..S SSCN=$$SCNUM(SSC)
"RTN","SD53P317",97,0)
 ..I SSCN="" S STR(CNT)=SSC_" has Inv 2nd ptr",CNT=CNT+1 Q
"RTN","SD53P317",98,0)
 ..D SCCHK(SSC,"S")
"RTN","SD53P317",99,0)
 .I $O(STR(0))'="" D LINE(.STR,"P") S CNTX=CNTX+1
"RTN","SD53P317",100,0)
 D LINE(" ")
"RTN","SD53P317",101,0)
 S STR=$E(BLN,1,25)_$S(CNTX:CNTX,1:"NO")_" PROBLEM CLINICS FOUND."
"RTN","SD53P317",102,0)
 D LINE(STR)
"RTN","SD53P317",103,0)
 D LINE(" ")
"RTN","SD53P317",104,0)
 Q
"RTN","SD53P317",105,0)
 ;
"RTN","SD53P317",106,0)
SCNUM(SCIEN) ;Get stop code Number
"RTN","SD53P317",107,0)
 I SCIEN="" Q ""
"RTN","SD53P317",108,0)
 S SCN=$P($G(^DIC(40.7,SCIEN,0)),U,2)
"RTN","SD53P317",109,0)
 Q SCN
"RTN","SD53P317",110,0)
 ;
"RTN","SD53P317",111,0)
SCIEN(SCN) ;Get stop code IEN
"RTN","SD53P317",112,0)
 I SCN="" Q ""
"RTN","SD53P317",113,0)
 S SCIEN=$O(^DIC(40.7,"C",SCN,0))
"RTN","SD53P317",114,0)
 Q SCIEN
"RTN","SD53P317",115,0)
 ;
"RTN","SD53P317",116,0)
SCCHK(SCIEN,TYP) ;check stop code against file 40.7
"RTN","SD53P317",117,0)
 N SCN,RTY,CTY
"RTN","SD53P317",118,0)
 S CTY=$S(TYP="P":"^P^E^",1:"^S^E^")
"RTN","SD53P317",119,0)
 S SCN=$G(^DIC(40.7,SCIEN,0)),RTY=$P(SCN,U,6),SCN=$P(SCN,U,2)
"RTN","SD53P317",120,0)
 I SCN="" D  D CNTR Q
"RTN","SD53P317",121,0)
 .S STR(CNT)=SCIEN_" Invalid pointer."
"RTN","SD53P317",122,0)
 I RTY="" S STR(CNT)=SCN_" No restriction type" D CNTR Q
"RTN","SD53P317",123,0)
 I CTY'[("^"_RTY_"^") D
"RTN","SD53P317",124,0)
 .S STR(CNT)=SCN_" cannot be "_$S(TYP="P":"prim",1:"second")_"ary"
"RTN","SD53P317",125,0)
CNTR ;counter
"RTN","SD53P317",126,0)
 S CNT=CNT+1
"RTN","SD53P317",127,0)
 Q
"RTN","SD53P317",128,0)
 ;
"RTN","SD53P317",129,0)
HDR ;Header for data from file #44
"RTN","SD53P317",130,0)
 D LINE(" ")
"RTN","SD53P317",131,0)
 S STR="HOSPITAL LOCATION FILE (#44) - (Use Set up a Clinic [SDBUILD]"
"RTN","SD53P317",132,0)
 S STR=STR_" menu option to"
"RTN","SD53P317",133,0)
 D LINE(STR)
"RTN","SD53P317",134,0)
 S STR=$E(BLN,1,32)_"make corrections)"
"RTN","SD53P317",135,0)
 D LINE(STR)
"RTN","SD53P317",136,0)
 D LINE(" ")
"RTN","SD53P317",137,0)
 S STR=$E(BLN,1,35)_$E("PRIMARY"_BLN,1,10)
"RTN","SD53P317",138,0)
 S STR=STR_$E("SECONDARY/"_BLN,1,11)_"REASON FOR"
"RTN","SD53P317",139,0)
 D LINE(STR)
"RTN","SD53P317",140,0)
 S STR=$E("CLINIC NAME"_BLN,1,35)_$E("STOP"_BLN,1,10)
"RTN","SD53P317",141,0)
 S STR=STR_$E("CREDIT"_BLN,1,11)_"NON"
"RTN","SD53P317",142,0)
 D LINE(STR)
"RTN","SD53P317",143,0)
 S STR=$E("(* - currently inactive)"_BLN,1,35)_$E("CODE"_BLN,1,10)
"RTN","SD53P317",144,0)
 S STR=STR_$E("STOP CODE"_BLN,1,11)_"CONFORMANCE"
"RTN","SD53P317",145,0)
 D LINE(STR)
"RTN","SD53P317",146,0)
 S STR=$E(LNS,1,80)
"RTN","SD53P317",147,0)
 D LINE(STR)
"RTN","SD53P317",148,0)
 Q
"RTN","SD53P317",149,0)
 ;
"RTN","SD53P317",150,0)
MSGTXT ; Message intro
"RTN","SD53P317",151,0)
 ;; Please forward this message to your local MAS ADPAC.
"RTN","SD53P317",152,0)
 ;;
"RTN","SD53P317",153,0)
 ;; A review of the Primary and Secondary Stop Codes in the HOSPITAL 
"RTN","SD53P317",154,0)
 ;; LOCATION file (#44) was completed against the Restriction Type
"RTN","SD53P317",155,0)
 ;; field (#5) of the CLINIC STOP file (#40.7) for nonconforming clinics.
"RTN","SD53P317",156,0)
 ;;
"RTN","SD53P317",157,0)
 ;;    
"RTN","SD53P317",158,0)
 ;;QUIT
"RTN","SD53P317",159,0)
 ;
"RTN","SD53P317",160,0)
 ;
"RTN","SD53P317",161,0)
LINE(TEXT,TYP) ; Add line to message global
"RTN","SD53P317",162,0)
 N FLN,STR,XI
"RTN","SD53P317",163,0)
 ;build 1st line with name, codes, etc.
"RTN","SD53P317",164,0)
 I $O(TEXT(0))'="" D  Q
"RTN","SD53P317",165,0)
 .S STR=$E(NAM_BLN,1,$S(TYP="P":35,1:21))
"RTN","SD53P317",166,0)
 .S STR=STR_$E($$SCNUM(PSC)_BLN,1,$S(TYP="P":10,1:9))
"RTN","SD53P317",167,0)
 .S STR=STR_$E($$SCNUM(SSC)_BLN,1,$S(TYP="P":11,1:9))
"RTN","SD53P317",168,0)
 .I TYP="S" S STR=STR_$E($$SCNUM(DPC)_BLN,1,9)_$E($$SCNUM(DSC)_BLN,1,9)
"RTN","SD53P317",169,0)
 .;set line in ^tmp global
"RTN","SD53P317",170,0)
 .S XI=0 F  S XI=$O(TEXT(XI)) Q:'XI  D
"RTN","SD53P317",171,0)
 ..;I XI'=FLN S TEXT(XI)=$E(BLN,1,57)_TEXT(XI)
"RTN","SD53P317",172,0)
 ..S TEXT(XI)=STR_TEXT(XI)
"RTN","SD53P317",173,0)
 ..S COUNT=COUNT+1,^TMP(SDJ,"SD53P309",COUNT)=TEXT(XI)
"RTN","SD53P317",174,0)
 S COUNT=COUNT+1,^TMP(SDJ,"SD53P309",COUNT)=TEXT
"RTN","SD53P317",175,0)
 Q
"RTN","SD53P317",176,0)
 ;
"RTN","SD53P317",177,0)
MAIL ; Send message
"RTN","SD53P317",178,0)
 N XMDUZ,XMY,XMTEXT,XMSUB
"RTN","SD53P317",179,0)
 S XMY(DUZ)="",XMDUZ=.5
"RTN","SD53P317",180,0)
 S XMSUB="Non-Conforming Clinics Restricted Stop Codes"
"RTN","SD53P317",181,0)
 S XMTEXT="^TMP(SDJ,""SD53P309"","
"RTN","SD53P317",182,0)
 D ^XMD
"RTN","SD53P317",183,0)
 Q
"RTN","SDSCRP")
0^4^B11792085
"RTN","SDSCRP",1,0)
SDSCRP ;ALB/JAM - Restricted Stop Code Nonconforming Clinic Report; 07/24/03
"RTN","SDSCRP",2,0)
 ;;5.3;Scheduling;**317**;Aug 13, 1993
"RTN","SDSCRP",3,0)
 ;
"RTN","SDSCRP",4,0)
EN ;foreground entry point
"RTN","SDSCRP",5,0)
 N ZTRTN,ZTDESC,ZTIO,ZTQUEUED,SDPCF,DIR,DIRUT,X,Y
"RTN","SDSCRP",6,0)
 W @IOF
"RTN","SDSCRP",7,0)
 S DIR(0)="SO^A:Active Clinics;I:Inactive Clinics;B:Both"
"RTN","SDSCRP",8,0)
 S DIR("A")="Select Report"
"RTN","SDSCRP",9,0)
 S DIR("?",1)="Enter an A for Active Clinics, I for Inactive Clinics,"
"RTN","SDSCRP",10,0)
 S DIR("?")="B for Both Active and Inactive Clinics"
"RTN","SDSCRP",11,0)
 D ^DIR K DIR I $D(DIRUT) G END
"RTN","SDSCRP",12,0)
 S SDPCF=Y
"RTN","SDSCRP",13,0)
 ;device selection
"RTN","SDSCRP",14,0)
 K IOP,%ZIS,POP,IO("Q")
"RTN","SDSCRP",15,0)
 S %ZIS("A")="Select Device: ",%ZIS="QM" D ^%ZIS I POP G END
"RTN","SDSCRP",16,0)
 I $D(IO("Q")) K IO("Q") D  G END
"RTN","SDSCRP",17,0)
 .S ZTDESC="Non-Conforming Clinics Stop Code Report",ZTSAVE("SDPCF")=""
"RTN","SDSCRP",18,0)
 .S ZTRTN="PROCESS^SDSCRP",ZTIO=ION D ^%ZTLOAD,HOME^%ZIS K ZTSK
"RTN","SDSCRP",19,0)
 U IO
"RTN","SDSCRP",20,0)
 D PROCESS
"RTN","SDSCRP",21,0)
END D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDSCRP",22,0)
 Q
"RTN","SDSCRP",23,0)
 ;
"RTN","SDSCRP",24,0)
PROCESS ;background entry point
"RTN","SDSCRP",25,0)
 ;locate invalid Stop Code in HOSPITAL LOCATION file #44
"RTN","SDSCRP",26,0)
 N NAM,IDT,RDT,IDAT,STR,ECX,IEN,PSC,SSC,PSCN,SSCN,CNTX,SDPG,SDOUT,SDF,LNS
"RTN","SDSCRP",27,0)
 N ACF,SDRDT
"RTN","SDSCRP",28,0)
 S %H=$H D YX^%DTC S SDRDT=Y
"RTN","SDSCRP",29,0)
 S $P(LNS,"-",80)="",(CNTX,IEN,SDOUT,SDF)=0,SDPG=1
"RTN","SDSCRP",30,0)
 D HDR
"RTN","SDSCRP",31,0)
 ;search file #44 for invalid entries
"RTN","SDSCRP",32,0)
 F  S IEN=$O(^SC(IEN)) Q:'IEN  D  Q:SDOUT  S:SDF CNTX=CNTX+1
"RTN","SDSCRP",33,0)
 .S ECX=$G(^SC(IEN,0)),PSC=$P(ECX,U,7),SSC=$P(ECX,U,18),SDF=0
"RTN","SDSCRP",34,0)
 .I $P(ECX,U,3)'="C" Q
"RTN","SDSCRP",35,0)
 .S NAM=$P(ECX,U),IDAT=$G(^SC(IEN,"I")) I IDAT'="" D
"RTN","SDSCRP",36,0)
 ..S IDT=$P(IDAT,U),RDT=$P(IDAT,U,2) Q:IDT=""  I RDT="" S NAM="*"_NAM Q
"RTN","SDSCRP",37,0)
 ..I RDT>IDT S NAM="*"_NAM
"RTN","SDSCRP",38,0)
 .S ACF=$S($E(NAM)="*":0,1:1)
"RTN","SDSCRP",39,0)
 .I $S((SDPCF="A")&('ACF):1,(SDPCF="I")&(ACF):1,1:0) Q
"RTN","SDSCRP",40,0)
 .S PSCN=$S(PSC:$P($G(^DIC(40.7,PSC,0)),U,2),1:"")
"RTN","SDSCRP",41,0)
 .S SSCN=$S(SSC:$P($G(^DIC(40.7,SSC,0)),U,2),1:"")
"RTN","SDSCRP",42,0)
 .D  I SDOUT Q
"RTN","SDSCRP",43,0)
 ..I PSC="" S STR="Missing primary code" D PRN Q
"RTN","SDSCRP",44,0)
 ..D SCCHK(PSC,"P") I $D(STR) D PRN
"RTN","SDSCRP",45,0)
 .I SSC'="" D SCCHK(SSC,"S") I $D(STR) D PRN
"RTN","SDSCRP",46,0)
 W !!,?25,$S(CNTX:CNTX,1:"NO")_" PROBLEM CLINICS FOUND."
"RTN","SDSCRP",47,0)
 K SCIEN,TYP
"RTN","SDSCRP",48,0)
 Q
"RTN","SDSCRP",49,0)
 ;
"RTN","SDSCRP",50,0)
PRN ;print line
"RTN","SDSCRP",51,0)
 I ($Y+3)>IOSL D PAGE,HDR I SDOUT Q
"RTN","SDSCRP",52,0)
 W !,IEN,?8,$E(NAM,1,28),?37,PSCN,?46,SSCN,?57,STR
"RTN","SDSCRP",53,0)
 S SDF=1
"RTN","SDSCRP",54,0)
 Q
"RTN","SDSCRP",55,0)
 ;
"RTN","SDSCRP",56,0)
SCCHK(SCIEN,TYP) ;check stop code against file 40.7
"RTN","SDSCRP",57,0)
 N SCN,RTY,CTY
"RTN","SDSCRP",58,0)
 K STR
"RTN","SDSCRP",59,0)
 S CTY=$S(TYP="P":"^P^E^",1:"^S^E^")
"RTN","SDSCRP",60,0)
 S SCN=$G(^DIC(40.7,SCIEN,0)),RTY=$P(SCN,U,6),SCN=$P(SCN,U,2)
"RTN","SDSCRP",61,0)
 I SCN="" D  Q
"RTN","SDSCRP",62,0)
 .S STR=SCIEN_" Inv "_$S(TYP="P":"prim",1:"2nd")_" pointr"
"RTN","SDSCRP",63,0)
 I RTY="" S STR=SCN_" No restriction type" Q
"RTN","SDSCRP",64,0)
 I CTY'[("^"_RTY_"^") D
"RTN","SDSCRP",65,0)
 .S STR=SCN_" cannot be "_$S(TYP="P":"prim",1:"second")_"ary"
"RTN","SDSCRP",66,0)
 Q
"RTN","SDSCRP",67,0)
 ;
"RTN","SDSCRP",68,0)
HDR ;Header for data from file #44
"RTN","SDSCRP",69,0)
 W @IOF
"RTN","SDSCRP",70,0)
 W SDRDT,?73,"Page: ",SDPG,!
"RTN","SDSCRP",71,0)
 W !,?18,"NON-CONFORMING CLINICS STOP CODE REPORT",!,?32
"RTN","SDSCRP",72,0)
 W $S(SDPCF="A":"Active",SDPCF="I":"Inactive",1:"All")_" Clinics",!
"RTN","SDSCRP",73,0)
 W !,"HOSPITAL LOCATION FILE (#44) - (Use Set up a Clinic [SDBUILD]"
"RTN","SDSCRP",74,0)
 W " menu option to",!,?32,"make corrections)"
"RTN","SDSCRP",75,0)
 W !!,?37,"PRIMARY",?46,"SECONDARY",?57,"REASON FOR"
"RTN","SDSCRP",76,0)
 W !?8,$S(SDPCF="B":"CLINIC NAME",1:""),?37,"STOP",?46,"CREDIT",?57,"NON"
"RTN","SDSCRP",77,0)
 W !,"IEN",?8,$S(SDPCF="B":"(*currently inactive)",1:"CLINIC NAME")
"RTN","SDSCRP",78,0)
 W ?37,"CODE",?46,"STOP CODE",?57,"CONFORMANCE",!,$E(LNS,1,80)
"RTN","SDSCRP",79,0)
 S SDPG=SDPG+1
"RTN","SDSCRP",80,0)
 Q
"RTN","SDSCRP",81,0)
 ;
"RTN","SDSCRP",82,0)
PAGE ;
"RTN","SDSCRP",83,0)
 N SS,JJ,DIR,X,Y
"RTN","SDSCRP",84,0)
 I $E(IOST,1,2)="C-" D
"RTN","SDSCRP",85,0)
 . S SS=22-$Y F JJ=1:1:SS W !
"RTN","SDSCRP",86,0)
 . S DIR(0)="E" W ! D ^DIR K DIR I 'Y S SDOUT=1
"RTN","SDSCRP",87,0)
 Q
"RTN","SDSTPD1")
0^2^B85830897
"RTN","SDSTPD1",1,0)
SDSTPD1 ;ALB/JAM - Clinic Stop Code file Update; 07/07/03
"RTN","SDSTPD1",2,0)
 ;;5.3;Scheduling;**317**;AUG 13, 1993
"RTN","SDSTPD1",3,0)
 ;
"RTN","SDSTPD1",4,0)
 ;this routine is used as a post-init in a KIDS build 
"RTN","SDSTPD1",5,0)
 ;to store stop codes in a ^UTILITY global that will be used to modify 
"RTN","SDSTPD1",6,0)
 ;the CLINIC STOP file #40.7
"RTN","SDSTPD1",7,0)
 ;
"RTN","SDSTPD1",8,0)
MODSC ;read and store data in ^UTILITY
"RTN","SDSTPD1",9,0)
 ;
"RTN","SDSTPD1",10,0)
 N ECX,ECXX,CNT
"RTN","SDSTPD1",11,0)
 S CNT=1
"RTN","SDSTPD1",12,0)
 F ECX=1:1 S ECXX=$P($T(STPCD+ECX),";;",2) Q:ECXX="QUIT"  D
"RTN","SDSTPD1",13,0)
 .S ^UTILITY("STPCODE",SDJ,CNT)=ECXX,CNT=CNT+1
"RTN","SDSTPD1",14,0)
 F ECX=1:1 S ECXX=$P($T(STPCD+ECX^SDSTPD2),";;",2) Q:ECXX="QUIT"  D
"RTN","SDSTPD1",15,0)
 .S ^UTILITY("STPCODE",SDJ,CNT)=ECXX,CNT=CNT+1
"RTN","SDSTPD1",16,0)
 Q
"RTN","SDSTPD1",17,0)
 ;
"RTN","SDSTPD1",18,0)
STPCD ;stop code format::Stop Code^description^Restriction Type^Restrict Date
"RTN","SDSTPD1",19,0)
 ;;1^EMERGENCY UNIT^E^^10/1/87
"RTN","SDSTPD1",20,0)
 ;;2^ADMITTING/SCREENING^E^^10/1/87
"RTN","SDSTPD1",21,0)
 ;;4^PULMONARY FUNCTION^E^^10/1/87
"RTN","SDSTPD1",22,0)
 ;;5^X-RAY^E^^10/1/87
"RTN","SDSTPD1",23,0)
 ;;6^EEG^E^^10/1/87
"RTN","SDSTPD1",24,0)
 ;;7^EKG^E^^10/1/87
"RTN","SDSTPD1",25,0)
 ;;8^LABORATORY^E^^10/1/87
"RTN","SDSTPD1",26,0)
 ;;9^NUCLEAR MEDICINE^E^^10/1/87
"RTN","SDSTPD1",27,0)
 ;;10^ULTRASOUND^E^^10/1/87
"RTN","SDSTPD1",28,0)
 ;;12^NURSING^E^^10/1/87
"RTN","SDSTPD1",29,0)
 ;;13^PUB. HEALTH NURSING^E^^10/1/87
"RTN","SDSTPD1",30,0)
 ;;14^NUTRITION/DIETETICS-INDIVIDUAL^E^^10/1/87
"RTN","SDSTPD1",31,0)
 ;;14^NUTRITION/DIETETICS^E^^10/1/87
"RTN","SDSTPD1",32,0)
 ;;15^SOCIAL WORK SVC.^E^^10/1/87
"RTN","SDSTPD1",33,0)
 ;;17^REHAB. MEDICINE^E^^10/1/87
"RTN","SDSTPD1",34,0)
 ;;18^AUDIOLOGY^E^^10/1/87
"RTN","SDSTPD1",35,0)
 ;;19^SPEECH PATHOLOGY^E^^10/1/87
"RTN","SDSTPD1",36,0)
 ;;20^PHYSICAL THERAPY^E^^10/1/87
"RTN","SDSTPD1",37,0)
 ;;21^OCCUPATIONAL THERAPY^E^^10/1/87
"RTN","SDSTPD1",38,0)
 ;;22^KINESIOTHERAPY^E^^10/1/87
"RTN","SDSTPD1",39,0)
 ;;23^COMP. WORK THERAPY^E^^10/1/87
"RTN","SDSTPD1",40,0)
 ;;24^VISUALLY IMPAIRED^E^^10/1/87
"RTN","SDSTPD1",41,0)
 ;;25^SPINAL CORD INJURY^E^^10/1/87
"RTN","SDSTPD1",42,0)
 ;;27^GENERAL MEDICAL^E^^10/1/87
"RTN","SDSTPD1",43,0)
 ;;28^ALLERGY IMMUNOLOGY^E^^10/1/87
"RTN","SDSTPD1",44,0)
 ;;29^CARDIOLOGY^E^^10/1/87
"RTN","SDSTPD1",45,0)
 ;;30^DERMATOLOGY^E^^10/1/87
"RTN","SDSTPD1",46,0)
 ;;31^ENDO/METAB(EXCEPT DIAB.)^E^^10/1/87
"RTN","SDSTPD1",47,0)
 ;;32^DIABETES^E^^10/1/87
"RTN","SDSTPD1",48,0)
 ;;33^GASTROENTEROLOGY^E^^10/1/87
"RTN","SDSTPD1",49,0)
 ;;34^HEMATOLOGY^E^^10/1/87
"RTN","SDSTPD1",50,0)
 ;;35^HYPERTENSION^E^^10/1/87
"RTN","SDSTPD1",51,0)
 ;;36^INFECTIOUS DISEASE^E^^10/1/87
"RTN","SDSTPD1",52,0)
 ;;37^PACEMAKER^E^^10/1/87
"RTN","SDSTPD1",53,0)
 ;;38^PUL./CHEST(TB)^E^^10/1/87
"RTN","SDSTPD1",54,0)
 ;;38^PUL./CHEST(NON-TB)^E^^10/1/87
"RTN","SDSTPD1",55,0)
 ;;39^RENAL/NEPHROL.(EXCEPT DIAL.)^E^^10/1/87
"RTN","SDSTPD1",56,0)
 ;;40^RHEUMATOLOGY/ARTHRITIS^E^^10/1/87
"RTN","SDSTPD1",57,0)
 ;;41^NEUROLOGY^E^^10/1/87
"RTN","SDSTPD1",58,0)
 ;;42^ONCOLOGY/TUMOR^E^^10/1/87
"RTN","SDSTPD1",59,0)
 ;;43^HBHC^E^^10/1/87
"RTN","SDSTPD1",60,0)
 ;;46^DENTAL^E^^10/1/87
"RTN","SDSTPD1",61,0)
 ;;48^ADULT DAY HEALTH CARE^E^^10/1/87
"RTN","SDSTPD1",62,0)
 ;;52^GENERAL SURGERY^E^^10/1/87
"RTN","SDSTPD1",63,0)
 ;;53^CARDIAC SURGERY^E^^10/1/87
"RTN","SDSTPD1",64,0)
 ;;54^ENT^E^^10/1/87
"RTN","SDSTPD1",65,0)
 ;;55^GYNECOLOGY^E^^10/1/87
"RTN","SDSTPD1",66,0)
 ;;56^HAND SURGERY^E^^10/1/87
"RTN","SDSTPD1",67,0)
 ;;57^NEUROSURGERY^E^^10/1/87
"RTN","SDSTPD1",68,0)
 ;;58^OPTHALMOLOGY^E^^10/1/87
"RTN","SDSTPD1",69,0)
 ;;58^OPHTHALMOLOGY^E^^10/1/87
"RTN","SDSTPD1",70,0)
 ;;59^OPTOMETRY^E^^10/1/87
"RTN","SDSTPD1",71,0)
 ;;60^ORTHOPEDICS^E^^10/1/87
"RTN","SDSTPD1",72,0)
 ;;61^PLASTIC SURGERY^E^^10/1/87
"RTN","SDSTPD1",73,0)
 ;;62^PODIATRY^E^^10/1/87
"RTN","SDSTPD1",74,0)
 ;;63^PROCTOLOGY^E^^10/1/87
"RTN","SDSTPD1",75,0)
 ;;64^THORACIC SURGERY^E^^10/1/87
"RTN","SDSTPD1",76,0)
 ;;65^UROLOGY^E^^10/1/87
"RTN","SDSTPD1",77,0)
 ;;66^VASCULAR SURGERY^E^^10/1/87
"RTN","SDSTPD1",78,0)
 ;;67^AMBULATORY SURGERY^E^^10/1/87
"RTN","SDSTPD1",79,0)
 ;;69^PROSTHETICS/ORTHOTICS^E^^10/1/87
"RTN","SDSTPD1",80,0)
 ;;74^AMBULATORY CARE^E^^10/1/87
"RTN","SDSTPD1",81,0)
 ;;76^HCMI^E^^10/1/87
"RTN","SDSTPD1",82,0)
 ;;76^HOMELESS MENTALLY ILL OUTREACH^E^^10/1/87
"RTN","SDSTPD1",83,0)
 ;;77^MENTAL HYGIENE(GROUP)^E^^10/1/87
"RTN","SDSTPD1",84,0)
 ;;78^DAY TREATMENT CENTER^E^^10/1/87
"RTN","SDSTPD1",85,0)
 ;;79^DAY HOSPITAL^E^^10/1/87
"RTN","SDSTPD1",86,0)
 ;;80^DRUG DEPENDENCE^E^^10/1/87
"RTN","SDSTPD1",87,0)
 ;;81^ALCOHOL TREATMENT-INDIVIDUAL^E^^10/1/87
"RTN","SDSTPD1",88,0)
 ;;81^ALCOHOL TREATMENT^E^^10/1/87
"RTN","SDSTPD1",89,0)
 ;;83^MENTAL HYGIENE(INDIV.)^E^^10/1/87
"RTN","SDSTPD1",90,0)
 ;;84^PSYCHIATRY^E^^10/1/87
"RTN","SDSTPD1",91,0)
 ;;85^PSYCHOLOGY^E^^10/1/87
"RTN","SDSTPD1",92,0)
 ;;86^NEUROBEHAVIORAL^E^^10/1/87
"RTN","SDSTPD1",93,0)
 ;;88^RE-ADJUSTMENT COUNSELING^E^^10/1/87
"RTN","SDSTPD1",94,0)
 ;;91^PHARMACY^E^^10/1/87
"RTN","SDSTPD1",95,0)
 ;;92^COMPUTED TOMOGRAPHY SCANS^E^^10/1/87
"RTN","SDSTPD1",96,0)
 ;;93^RADIATION THERAPY^E^^10/1/87
"RTN","SDSTPD1",97,0)
 ;;94^CHEMOTHERAPY^E^^10/1/87
"RTN","SDSTPD1",98,0)
 ;;95^AMBULATORY SURGERY SERVICES^E^^10/1/87
"RTN","SDSTPD1",99,0)
 ;;96^BLOOD/BLOOD PRODUCTS TRANS.^E^^10/1/87
"RTN","SDSTPD1",100,0)
 ;;97^NUCLEAR MAGNETIC RESONANCE^E^^10/1/87
"RTN","SDSTPD1",101,0)
 ;;98^RESEARCH^E^^10/1/87
"RTN","SDSTPD1",102,0)
 ;;99^EMPLOYEE HEALTH^E^^10/1/87
"RTN","SDSTPD1",103,0)
 ;;101^EMERGENCY UNIT^S^10/1/2003^
"RTN","SDSTPD1",104,0)
 ;;102^ADMITTING/SCREENING^E^^^^
"RTN","SDSTPD1",105,0)
 ;;103^TELEPHONE TRIAGE^P^10/1/2003^
"RTN","SDSTPD1",106,0)
 ;;104^PULMONARY FUNCTION^E^^^^
"RTN","SDSTPD1",107,0)
 ;;105^X-RAY^E^^^^
"RTN","SDSTPD1",108,0)
 ;;106^EEG^E^^^^
"RTN","SDSTPD1",109,0)
 ;;107^EKG^P^10/1/2003^
"RTN","SDSTPD1",110,0)
 ;;108^LABORATORY^E^^^^
"RTN","SDSTPD1",111,0)
 ;;109^NUCLEAR MEDICINE^E^^^^
"RTN","SDSTPD1",112,0)
 ;;110^CARDIOVASCULAR NUCLEAR MED^E^^10/1/98
"RTN","SDSTPD1",113,0)
 ;;111^ONCOLOGICAL NUCLEAR MED^E^^10/1/98
"RTN","SDSTPD1",114,0)
 ;;112^INFECTIOUS DISEASE NUCLEAR MED^E^^10/1/98
"RTN","SDSTPD1",115,0)
 ;;113^RADIONUCLIDE TREATMENT^E^^10/1/98
"RTN","SDSTPD1",116,0)
 ;;114^SING PHOTON EMISS TOMOGRAPHY^E^^10/1/98
"RTN","SDSTPD1",117,0)
 ;;115^ULTRASOUND^E^^^^
"RTN","SDSTPD1",118,0)
 ;;116^RESPIRATORY THERAPY^E^^^^
"RTN","SDSTPD1",119,0)
 ;;117^NURSING (2ND ONLY)^S^10/1/2003^
"RTN","SDSTPD1",120,0)
 ;;118^HOME TREATMENT SERVICES^P^10/1/2003^
"RTN","SDSTPD1",121,0)
 ;;119^COMM NURSING HOME FOLLOW-UP^E^^^^
"RTN","SDSTPD1",122,0)
 ;;120^HEALTH SCREENING^E^^^^
"RTN","SDSTPD1",123,0)
 ;;121^RESIDENTIAL CARE (NON-MH)^E^^^^
"RTN","SDSTPD1",124,0)
 ;;122^PUBLIC HEALTH NURSING^E^^^^
"RTN","SDSTPD1",125,0)
 ;;123^NUTRITION/DIETETICS-INDIVIDUAL^E^^^^
"RTN","SDSTPD1",126,0)
 ;;124^NUTRITION/DIETETICS-GROUP^E^^^^
"RTN","SDSTPD1",127,0)
 ;;125^SOCIAL WORK SERVICE^E^^^^
"RTN","SDSTPD1",128,0)
 ;;126^EVOKED POTENTIAL^E^^^^
"RTN","SDSTPD1",129,0)
 ;;127^TOPOGRAPHICAL BRAIN MAPPING^E^^^^
"RTN","SDSTPD1",130,0)
 ;;128^PROLONGED VIDEO-EEG MONITORING^E^^^^
"RTN","SDSTPD1",131,0)
 ;;129^HYPERTENSION SCREENING^E^^10/1/91
"RTN","SDSTPD1",132,0)
 ;;130^CHOLESTEROL SCREENING^E^^10/1/91
"RTN","SDSTPD1",133,0)
 ;;131^BREAST CANCER SCREENING^E^^10/1/91
"RTN","SDSTPD1",134,0)
 ;;132^MAMMOGRAM^E^^10/1/91
"RTN","SDSTPD1",135,0)
 ;;133^CERVICAL CANCER SCREENING^E^^10/1/91
"RTN","SDSTPD1",136,0)
 ;;134^PAP TEST^E^^10/1/91
"RTN","SDSTPD1",137,0)
 ;;135^COLORECTAL CANCER SCREENING^E^^10/1/91
"RTN","SDSTPD1",138,0)
 ;;136^FOBT - GUIAC SCREENING^E^^10/1/91
"RTN","SDSTPD1",139,0)
 ;;137^ALCOHOL COUNSELING - MED CARE^E^^10/1/91
"RTN","SDSTPD1",140,0)
 ;;138^SMOKING CESSATION^E^^10/1/91
"RTN","SDSTPD1",141,0)
 ;;139^WEIGHT CONTROL^E^^10/1/91
"RTN","SDSTPD1",142,0)
 ;;140^PHYS FITNESS/EXERCISE COUNSEL^E^^10/1/91
"RTN","SDSTPD1",143,0)
 ;;141^VET IMMUNIZATION^E^^10/1/91
"RTN","SDSTPD1",144,0)
 ;;142^COLORECTAL CA SCREEN DIG EXAM^E^^10/1/91
"RTN","SDSTPD1",145,0)
 ;;143^PERSIAN GULF READJUST COUNSEL^E^^1/1/88
"RTN","SDSTPD1",146,0)
 ;;144^RADIONUCLIDE THERAPY^E^^^^
"RTN","SDSTPD1",147,0)
 ;;145^PHARM/PHYSIO NMP STUDIES^E^^^^
"RTN","SDSTPD1",148,0)
 ;;146^PET^E^^^^
"RTN","SDSTPD1",149,0)
 ;;147^TELEPHONE/ANCILLARY^P^10/1/2003^
"RTN","SDSTPD1",150,0)
 ;;148^TELEPHONE/DIAGNOSTIC^P^10/1/2003^
"RTN","SDSTPD1",151,0)
 ;;149^RADIATION THERAPY TREATMENT^E^^^^
"RTN","SDSTPD1",152,0)
 ;;150^COMPUTERIZED TOMOGRAPHY (CT)^E^^^^
"RTN","SDSTPD1",153,0)
 ;;151^MAGNETIC RESONANCE IMAGING/MRI^E^^^^
"RTN","SDSTPD1",154,0)
 ;;152^ANGIOGRAM CATHETERIZATION^E^^^^
"RTN","SDSTPD1",155,0)
 ;;153^INTERVENTIONAL RADIOGRAPHY^E^^^^
"RTN","SDSTPD1",156,0)
 ;;154^MEG (MAGNETOENCEPHALOGRAPHY)^E^^^^
"RTN","SDSTPD1",157,0)
 ;;155^INFO ASSISTS TECHNOLOGY^E^^^^
"RTN","SDSTPD1",158,0)
 ;;160^CLINICAL PHARMACY^S^10/1/2003^
"RTN","SDSTPD1",159,0)
 ;;161^TRANSITIONAL PHARMACY BENEFIT CLINIC^P^10/1/2003^
"RTN","SDSTPD1",160,0)
 ;;163^CHAPLAIN-CLINICAL SVCS-INDIV^E^^^^10/1/02
"RTN","SDSTPD1",161,0)
 ;;164^CHAPLAIN-CLINICAL SVCS-GROUP^E^^^^10/1/02
"RTN","SDSTPD1",162,0)
 ;;165^BEREAVEMENT COUNSELING^E^^^^
"RTN","SDSTPD1",163,0)
 ;;166^CHAPLAIN SERVICE - INDIVIDUAL^E^^^^
"RTN","SDSTPD1",164,0)
 ;;167^CHAPLAIN SERVICE - GROUP^E^^^^
"RTN","SDSTPD1",165,0)
 ;;168^CHAPLAIN SERVICE - COLLATERAL^E^^^^
"RTN","SDSTPD1",166,0)
 ;;169^TELEPHONE/CHAPLAIN^P^10/1/2003^
"RTN","SDSTPD1",167,0)
 ;;170^HBPC - PHYSICIAN^P^10/1/2003^
"RTN","SDSTPD1",168,0)
 ;;171^HBPC - RN/RNP/PA^P^10/1/2003^
"RTN","SDSTPD1",169,0)
 ;;172^HBPC - NURSE EXTENDER^P^10/1/2003^
"RTN","SDSTPD1",170,0)
 ;;173^HBPC - SOCIAL WORKER^P^10/1/2003^
"RTN","SDSTPD1",171,0)
 ;;174^HBPC - THERAPIST^P^10/1/2003^
"RTN","SDSTPD1",172,0)
 ;;175^HBPC - DIETITIAN^P^10/1/2003^
"RTN","SDSTPD1",173,0)
 ;;176^HBPC - CLINICAL PHARMACIST^P^10/1/2003^
"RTN","SDSTPD1",174,0)
 ;;177^HBPC - OTHER^P^10/1/2003^
"RTN","SDSTPD1",175,0)
 ;;178^HBPC/TELEPHONE^P^10/1/2003^
"RTN","SDSTPD1",176,0)
 ;;179^HOME TELEVIDEO CARE^S^10/1/2003^
"RTN","SDSTPD1",177,0)
 ;;180^DENTAL^E^^^^
"RTN","SDSTPD1",178,0)
 ;;181^TELEPHONE/DENTAL^P^10/1/2003^
"RTN","SDSTPD1",179,0)
 ;;185^PHYS EXTND NP (NRS PRCNR) 2ND^S^10/1/2003^
"RTN","SDSTPD1",180,0)
 ;;186^PHYS EXTND PA (PHYS ASST) 2ND^S^10/1/2003^
"RTN","SDSTPD1",181,0)
 ;;187^PHYS EXTND CNS (CLN RN SPC)2ND^S^10/1/2003^
"RTN","SDSTPD1",182,0)
 ;;190^ADULT DAY HEALTH CARE^E^^^^
"RTN","SDSTPD1",183,0)
 ;;201^PHYSICAL MED & REHAB SVC^E^^^^
"RTN","SDSTPD1",184,0)
 ;;202^RECREATION THERAPY SERVICE^E^^^^
"RTN","SDSTPD1",185,0)
 ;;203^AUDIOLOGY^E^^^^
"RTN","SDSTPD1",186,0)
 ;;204^SPEECH PATHOLOGY^E^^^^
"RTN","SDSTPD1",187,0)
 ;;205^PHYSICAL THERAPY^E^^^^
"RTN","SDSTPD1",188,0)
 ;;206^OCCUPATIONAL THERAPY^E^^^^
"RTN","SDSTPD1",189,0)
 ;;207^PM&RS INCENTIVE THERAPY^E^^^^
"RTN","SDSTPD1",190,0)
 ;;208^PM&RS COMPENSATED WORK THERAPY^E^^^^
"RTN","SDSTPD1",191,0)
 ;;209^VIST COORDINATOR^E^^^^
"RTN","SDSTPD1",192,0)
 ;;210^SPINAL CORD INJURY^E^^^^
"RTN","SDSTPD1",193,0)
 ;;211^AMPUTATION FOLLOW-UP CLINIC^E^^^^
"RTN","SDSTPD1",194,0)
 ;;212^EMG - ELECTROMYOGRAM^E^^^^
"RTN","SDSTPD1",195,0)
 ;;213^PM&RS VOCATIONAL ASSISTANCE^E^^^^
"RTN","SDSTPD1",196,0)
 ;;214^KINESIOTHERAPY^E^^^^
"RTN","SDSTPD1",197,0)
 ;;215^SCI HOME CARE PROGRAM^E^^^^
"RTN","SDSTPD1",198,0)
 ;;216^TELEPHONE/REHAB AND SUPPORT^P^10/1/2003^
"RTN","SDSTPD1",199,0)
 ;;217^BROS (BLIND REHAB O/P SPEC)^E^^^^
"RTN","SDSTPD1",200,0)
 ;;218^CAT BLIND REHAB^E^^^^
"RTN","SDSTPD1",201,0)
 ;;219^TBI (TRAUMATIC BRAIN INJURY)^E^^^^
"RTN","SDSTPD1",202,0)
 ;;220^VISOR (VISUAL IMPAIRMENT OUTPA^E^^^^
"RTN","SDSTPD1",203,0)
 ;;290^OBSERVATION MEDICINE^P^10/1/2003^
"RTN","SDSTPD1",204,0)
 ;;291^OBSERVATION SURGERY^P^10/1/2003^
"RTN","SDSTPD1",205,0)
 ;;292^OBSERVATION PSYCHIATRY^P^10/1/2003^
"RTN","SDSTPD1",206,0)
 ;;293^OBSERVATION NEUROLOGY^P^10/1/2003^
"RTN","SDSTPD1",207,0)
 ;;294^OBSERVATION BLIND REHAB^P^10/1/2003^
"RTN","SDSTPD1",208,0)
 ;;295^OBSERVATION SPINAL CORD^P^10/1/2003^
"RTN","SDSTPD1",209,0)
 ;;296^OBSERVATION REHABILITATION^P^10/1/2003^
"RTN","SDSTPD1",210,0)
 ;;301^GENERAL INTERNAL MEDICINE^E^^^^
"RTN","SDSTPD1",211,0)
 ;;302^ALLERGY IMMUNOLOGY^E^^^^
"RTN","SDSTPD1",212,0)
 ;;303^CARDIOLOGY^E^^^^
"RTN","SDSTPD1",213,0)
 ;;304^DERMATOLOGY^E^^^^
"RTN","SDSTPD1",214,0)
 ;;305^ENDO./METAB (EXCEPT DIABETES)^E^^^^
"RTN","SDSTPD1",215,0)
 ;;306^DIABETES^E^^^^
"RTN","SDSTPD1",216,0)
 ;;307^GASTROENTEROLOGY^E^^^^
"RTN","SDSTPD1",217,0)
 ;;308^HEMATOLOGY^E^^^^
"RTN","SDSTPD1",218,0)
 ;;309^HYPERTENSION^E^^^^
"RTN","SDSTPD1",219,0)
 ;;310^INFECTIOUS DISEASE^E^^^^
"RTN","SDSTPD1",220,0)
 ;;311^PACEMAKER^E^^^^
"RTN","SDSTPD1",221,0)
 ;;312^PULMONARY/CHEST^E^^^^
"RTN","SDSTPD1",222,0)
 ;;313^RENAL/NEPHROL(EXCEPT DIALYSIS)^E^^^^
"RTN","SDSTPD1",223,0)
 ;;314^RHEUMATOLOGY/ARTHRITIS^E^^^^
"RTN","SDSTPD1",224,0)
 ;;315^NEUROLOGY^E^^^^
"RTN","SDSTPD1",225,0)
 ;;316^ONCOLOGY/TUMOR^E^^^^
"RTN","SDSTPD1",226,0)
 ;;317^COUMADIN CLINIC^E^^^^
"RTN","SDSTPD1",227,0)
 ;;318^GERIATRIC CLINIC^E^^^^
"RTN","SDSTPD1",228,0)
 ;;319^GERIATRIC EVAL. & MGMT. (GEM)^E^^^^
"RTN","SDSTPD1",229,0)
 ;;320^ALZHEIMER'S/DEMENTIA CLINIC^E^^^^
"RTN","SDSTPD1",230,0)
 ;;321^GI ENDOSCOPY^E^^^^
"RTN","SDSTPD1",231,0)
 ;;322^WOMEN'S CLINIC^E^^^^
"RTN","SDSTPD1",232,0)
 ;;323^PRIMARY CARE/MEDICINE^E^^^^
"RTN","SDSTPD1",233,0)
 ;;324^TELEPHONE/MEDICINE^P^10/1/2003^
"RTN","SDSTPD1",234,0)
 ;;325^TELEPHONE/NEUROLOGY^P^10/1/2003^
"RTN","SDSTPD1",235,0)
 ;;326^TELEPHONE/GERIATRICS^P^10/1/2003^
"RTN","SDSTPD1",236,0)
 ;;327^MED MD PERFORM INVASVE OR PROC^P^10/1/2003^
"RTN","SDSTPD1",237,0)
 ;;328^MEDICAL/SURGICAL DAY UNIT MSDU^E^^^^
"RTN","SDSTPD1",238,0)
 ;;329^MEDICAL PROCEDURE UNIT^E^^^^
"RTN","SDSTPD1",239,0)
 ;;330^CHEMOTHERAPY PROC. UNIT-MED.^E^^^^
"RTN","SDSTPD1",240,0)
 ;;331^PRE-BED CARE MD (MEDICINE)^E^^^^
"RTN","SDSTPD1",241,0)
 ;;332^PRE-BED CARE RN (MEDICINE)^E^^^^
"RTN","SDSTPD1",242,0)
 ;;333^CARDIAC CATHETERIZATION^E^^^^
"RTN","SDSTPD1",243,0)
 ;;334^CARDIAC STRESS TEST/ETT^E^^^^
"RTN","SDSTPD1",244,0)
 ;;335^PADRECC PARKINSON'SDISEASERECC^E^^^^
"RTN","SDSTPD1",245,0)
 ;;350^GERIATRIC PRIMARY CARE^E^^^^
"RTN","SDSTPD1",246,0)
 ;;351^ADVNCD ILLNESS COOR CARE(AICC)^E^^^^
"RTN","SDSTPD1",247,0)
 ;;370^LTC SCREENING (2ND ONLY)^S^10/1/2003^
"RTN","SDSTPD1",248,0)
 ;;QUIT
"RTN","SDSTPD2")
0^3^B63069932
"RTN","SDSTPD2",1,0)
SDSTPD2 ;ALB/JAM - Clinic Stop Code file Update; 07/07/03
"RTN","SDSTPD2",2,0)
 ;;5.3;Scheduling;**317**;Aug 13, 1993
"RTN","SDSTPD2",3,0)
 ;
"RTN","SDSTPD2",4,0)
 ;this routine is used as a post-init in a KIDS build 
"RTN","SDSTPD2",5,0)
 ;to store stop codes in a ^UTILITY global that will be used to modify 
"RTN","SDSTPD2",6,0)
 ;the CLINIC STOP file #40.7
"RTN","SDSTPD2",7,0)
 ;
"RTN","SDSTPD2",8,0)
STPCD ;stop code format::Stop Code^description^Restriction Type^Restrict Date
"RTN","SDSTPD2",9,0)
 ;;401^GENERAL SURGERY^E^^^^
"RTN","SDSTPD2",10,0)
 ;;402^CARDIAC SURGERY^E^^^^
"RTN","SDSTPD2",11,0)
 ;;403^ENT^E^^^^
"RTN","SDSTPD2",12,0)
 ;;404^GYNECOLOGY^E^^^^
"RTN","SDSTPD2",13,0)
 ;;405^HAND SURGERY^E^^^^
"RTN","SDSTPD2",14,0)
 ;;406^NEUROSURGERY^E^^^^
"RTN","SDSTPD2",15,0)
 ;;407^OPHTHALMOLOGY^E^^^^
"RTN","SDSTPD2",16,0)
 ;;408^OPTOMETRY^E^^^^
"RTN","SDSTPD2",17,0)
 ;;409^ORTHOPEDICS^E^^^^
"RTN","SDSTPD2",18,0)
 ;;410^PLASTIC SURGERY^E^^^^
"RTN","SDSTPD2",19,0)
 ;;411^PODIATRY^E^^^^
"RTN","SDSTPD2",20,0)
 ;;412^PROCTOLOGY^E^^^^
"RTN","SDSTPD2",21,0)
 ;;413^THORACIC SURGERY^E^^^^
"RTN","SDSTPD2",22,0)
 ;;414^UROLOGY^E^^^^
"RTN","SDSTPD2",23,0)
 ;;415^VASCULAR SURGERY^E^^^^
"RTN","SDSTPD2",24,0)
 ;;416^AMB SURGERY EVAL BY NON-MD^E^^^^
"RTN","SDSTPD2",25,0)
 ;;417^PROSTHETICS/ORTHOTICS^E^^^^
"RTN","SDSTPD2",26,0)
 ;;418^AMPUTATION CLINIC^E^^^^
"RTN","SDSTPD2",27,0)
 ;;419^ANESTHESIA PRE/POST-OP CONSULT^E^^^^
"RTN","SDSTPD2",28,0)
 ;;420^PAIN CLINIC^E^^^^
"RTN","SDSTPD2",29,0)
 ;;421^VASCULAR LABORATORY^E^^
"RTN","SDSTPD2",30,0)
 ;;422^CAST CLINIC^E^^^^
"RTN","SDSTPD2",31,0)
 ;;423^PROSTHETIC SUPPLY DISPENSED^E^^^^
"RTN","SDSTPD2",32,0)
 ;;424^TELEPHONE/SURGERY^P^10/1/2003^
"RTN","SDSTPD2",33,0)
 ;;425^TELEPHONE/PROSTHETICS/ORTHOTIC^P^10/1/2003^
"RTN","SDSTPD2",34,0)
 ;;426^WOMEN SURGERY^E^^^^
"RTN","SDSTPD2",35,0)
 ;;427^PRIMARY CARE/SURGERY^E^^10/1/97
"RTN","SDSTPD2",36,0)
 ;;428^TELEPHONE/OPTOMETRY^P^10/1/2003^
"RTN","SDSTPD2",37,0)
 ;;429^OUTPATIENT CARE IN OR^P^10/1/2003^
"RTN","SDSTPD2",38,0)
 ;;430^CYSTO ROOM UNIT FOR OUTPATIENT^E^^^^
"RTN","SDSTPD2",39,0)
 ;;431^CHEMOTHERAPY PROC. UNIT-SURG.^E^^^^
"RTN","SDSTPD2",40,0)
 ;;432^PRE-BED CARE MD (SURGERY)^E^^^^
"RTN","SDSTPD2",41,0)
 ;;433^PRE-BED CARE RN (SURGERY)^E^^^^
"RTN","SDSTPD2",42,0)
 ;;435^SURGICAL PROCEDURE UNIT^E^^^^
"RTN","SDSTPD2",43,0)
 ;;436^CHIROPRACTIC CARE IN MED CTR^E^^^^
"RTN","SDSTPD2",44,0)
 ;;449^FITTING & ADJSTMNTS 2ND ONLY^S^10/1/2003^
"RTN","SDSTPD2",45,0)
 ;;450^COMPENSATION & PENSION^S^10/1/2003^
"RTN","SDSTPD2",46,0)
 ;;457^TRANSPLANT^S^10/1/2003^
"RTN","SDSTPD2",47,0)
 ;;474^RESEARCH^S^10/1/2003^ 
"RTN","SDSTPD2",48,0)
 ;;480^COMPREHENSIVE FUNDOSCOPY^S^10/1/2003^
"RTN","SDSTPD2",49,0)
 ;;481^BRONCHOSCOPY^S^10/1/2003^
"RTN","SDSTPD2",50,0)
 ;;501^HOMELESS MENTALLY ILL OUTREACH^E^^10/1/94
"RTN","SDSTPD2",51,0)
 ;;502^MENTAL HEALTH CLINIC - IND^E^^^^
"RTN","SDSTPD2",52,0)
 ;;503^MH RESIDENTIAL CARE IND^E^^^^
"RTN","SDSTPD2",53,0)
 ;;504^IPCC MEDICAL CENTER VISIT^E^^4/1/97
"RTN","SDSTPD2",54,0)
 ;;505^DAY TREATMENT-INDIVIDUAL^E^^^^
"RTN","SDSTPD2",55,0)
 ;;506^DAY HOSPITAL-INDIVIDUAL^E^^^^
"RTN","SDSTPD2",56,0)
 ;;507^DRUG DEPENDENCE-INDIVIDUAL^E^^4/1/97
"RTN","SDSTPD2",57,0)
 ;;508^ALCOHOL TREATMENT-INDIVIDUAL^E^^4/1/97
"RTN","SDSTPD2",58,0)
 ;;509^PSYCHIATRY-MD INDIVIDUAL^E^^^^
"RTN","SDSTPD2",59,0)
 ;;510^PSYCHOLOGY-INDIVIDUAL^E^^^^
"RTN","SDSTPD2",60,0)
 ;;511^NEUROBEHAVIORAL-INDIVIDUAL^E^^10/1/93
"RTN","SDSTPD2",61,0)
 ;;512^PSYCHIATRY CONSULTATION^E^^
"RTN","SDSTPD2",62,0)
 ;;513^SUBSTANCE ABUSE - INDIVIDUAL^E^^^^
"RTN","SDSTPD2",63,0)
 ;;514^SUBSTANCE ABUSE - HOME VISIT^E^^^^
"RTN","SDSTPD2",64,0)
 ;;515^CWT/TR-HCMI^E^^4/1/97
"RTN","SDSTPD2",65,0)
 ;;516^PTSD - GROUP^E^^^^
"RTN","SDSTPD2",66,0)
 ;;516^PTSD - GROUP^E^^^^
"RTN","SDSTPD2",67,0)
 ;;517^CWT SUBSTANCE ABUSE^E^^4/1/97
"RTN","SDSTPD2",68,0)
 ;;518^CWT/TR-SUBSTANCE ABUSE^E^^4/1/97
"RTN","SDSTPD2",69,0)
 ;;519^SUBST USE DISORDER/PTSD TEAMS^E^^^^
"RTN","SDSTPD2",70,0)
 ;;520^LONG-TERM ENHANCEMENT, INDIVID^E^^^^
"RTN","SDSTPD2",71,0)
 ;;521^LONG-TERM ENHANCEMENT, GROUP^E^^^^
"RTN","SDSTPD2",72,0)
 ;;522^HUD/VASH^E^^^^
"RTN","SDSTPD2",73,0)
 ;;523^OPIOID SUBSTITUTION^E^^^^
"RTN","SDSTPD2",74,0)
 ;;524^ACTIVE DUTY SEX TRAUMA^E^^^^
"RTN","SDSTPD2",75,0)
 ;;525^WOMEN'S STRESS DISORDER TEAMS^E^^^^
"RTN","SDSTPD2",76,0)
 ;;526^TELEPHONE/SPECIAL PSYCHIATRY^E^^4/1/97
"RTN","SDSTPD2",77,0)
 ;;527^TELEPHONE/GENERAL PSYCHIATRY^P^10/1/2003^
"RTN","SDSTPD2",78,0)
 ;;528^TELE/HOMELESS MENTALLY ILL^P^10/1/2003^
"RTN","SDSTPD2",79,0)
 ;;529^HCHV/HMI^P^10/1/2003^
"RTN","SDSTPD2",80,0)
 ;;530^TELEPHONE/HUD-VASH^P^10/1/2003^
"RTN","SDSTPD2",81,0)
 ;;531^MH PRIMARY CARE TEAM - IND^E^^^^
"RTN","SDSTPD2",82,0)
 ;;532^PSYCHOSOCIAL REHAB - IND^E^^^^
"RTN","SDSTPD2",83,0)
 ;;533^MH INTERVNTION BIOMED CARE IND^E^^^^
"RTN","SDSTPD2",84,0)
 ;;535^MH VOCATIONAL ASSISTANCE - IND^E^^^^
"RTN","SDSTPD2",85,0)
 ;;536^TELEPHONE/MH VOC ASSISTANCE^P^10/1/2003^
"RTN","SDSTPD2",86,0)
 ;;537^TELEPHONE/PSYCHOSOCIAL REHAB^P^10/1/2003^
"RTN","SDSTPD2",87,0)
 ;;538^PSYCHOLOGICAL TESTING^E^^^^
"RTN","SDSTPD2",88,0)
 ;;540^PCT POST-TRAUMATIC STRESS-IND^P^10/1/2003^
"RTN","SDSTPD2",89,0)
 ;;541^PTSD POST-TRAUMATIC STRESS^E^^1/1/91
"RTN","SDSTPD2",90,0)
 ;;542^TELEPHONE/PTSD^P^10/1/2003^
"RTN","SDSTPD2",91,0)
 ;;543^TELEPHONE/ALCOHOL DEPENDENCE^E^^4/1/97
"RTN","SDSTPD2",92,0)
 ;;544^TELEPHONE/DRUG DEPENDENCE^E^^4/1/97
"RTN","SDSTPD2",93,0)
 ;;545^TELEPHONE/SUBSTANCE ABUSE^P^10/1/2003^
"RTN","SDSTPD2",94,0)
 ;;546^TELEPHONE/MHICM^P^10/1/2003^
"RTN","SDSTPD2",95,0)
 ;;547^INTENSIVE SUBSTANCE ABUSE TRMT^E^^^^
"RTN","SDSTPD2",96,0)
 ;;550^MENTAL HEALTH CLINIC-GROUP^E^^^^
"RTN","SDSTPD2",97,0)
 ;;551^IPCC COMM CLN/DAY PROGRAM VST^E^^4/1/97
"RTN","SDSTPD2",98,0)
 ;;552^MENTAL HLT INT CASE MGT(MHICM)^P^10/1/2003^
"RTN","SDSTPD2",99,0)
 ;;553^DAY TREATMENT-GROUP^E^^^^
"RTN","SDSTPD2",100,0)
 ;;554^DAY HOSPITAL-GROUP^E^^^^
"RTN","SDSTPD2",101,0)
 ;;555^DRUG DEPENDENCE-GROUP^E^^4/1/97
"RTN","SDSTPD2",102,0)
 ;;555^DRUG DEPENDENCE-GROUP^E^^4/1/97
"RTN","SDSTPD2",103,0)
 ;;556^ALCOHOL TREATMENT-GROUP^E^^4/1/97
"RTN","SDSTPD2",104,0)
 ;;557^PSYCHIATRY - MD GROUP^E^^^^
"RTN","SDSTPD2",105,0)
 ;;558^PSYCHOLOGY-GROUP^E^^^^
"RTN","SDSTPD2",106,0)
 ;;559^PSYCHOSOCIAL REHAB - GROUP^E^^^^
"RTN","SDSTPD2",107,0)
 ;;560^SUBSTANCE ABUSE - GROUP^E^^^^
"RTN","SDSTPD2",108,0)
 ;;561^PCT-POST TRAUMATIC STRESS-GRP^P^10/1/2003^
"RTN","SDSTPD2",109,0)
 ;;562^PTSD - INDIVIDUAL^E^^^^
"RTN","SDSTPD2",110,0)
 ;;562^PTSD - INDIVIDUAL^E^^^^
"RTN","SDSTPD2",111,0)
 ;;563^MH PRIMARY CARE TEAM - GROUP^E^^^^
"RTN","SDSTPD2",112,0)
 ;;564^MH TEAM CASE MANAGEMENT^E^^^^
"RTN","SDSTPD2",113,0)
 ;;565^MH MEDICAL CARE ONLY-GROUP^E^^^^
"RTN","SDSTPD2",114,0)
 ;;566^MH RISK-FACTOR-REDUCTION ED GR^E^^^^
"RTN","SDSTPD2",115,0)
 ;;567^MHICM GRP MTLHLTH INTSV CS MGT^P^10/1/2003^
"RTN","SDSTPD2",116,0)
 ;;571^READJUSTMENT COUNSELING-INDIV^E^^JAN 31,1994
"RTN","SDSTPD2",117,0)
 ;;572^READJUSTMENT COUNSELING-GROUP^E^^JAN 31,1994
"RTN","SDSTPD2",118,0)
 ;;573^MH INCENTIVE THERAPY - GROUP^E^^^^
"RTN","SDSTPD2",119,0)
 ;;574^MH COMP WORK THERAPY (CWT) GRP^E^^^^
"RTN","SDSTPD2",120,0)
 ;;575^MH VOCATIONAL ASSISTANCE-GRP^E^^^^
"RTN","SDSTPD2",121,0)
 ;;576^PSYCHOGERIATRIC - INDIVIDUAL^E^^^^
"RTN","SDSTPD2",122,0)
 ;;577^PSYCHOGERIATRIC CLINIC - GROUP^E^^^^
"RTN","SDSTPD2",123,0)
 ;;578^PSYCHOGERIATRIC DAY PROGRAM^E^^^^
"RTN","SDSTPD2",124,0)
 ;;579^TELEPHONE/PSYCHOGERIATRICS^P^10/1/2003^
"RTN","SDSTPD2",125,0)
 ;;580^PTSD DAY HOSPITAL^E^^^^
"RTN","SDSTPD2",126,0)
 ;;581^PTSD DAY TREATMENT^E^^^^
"RTN","SDSTPD2",127,0)
 ;;589^NON-ACTIVE DUTY SEX TRAUMA^E^^^^
"RTN","SDSTPD2",128,0)
 ;;590^COMM OUTREACH HOMELESS VETS^E^^^^
"RTN","SDSTPD2",129,0)
 ;;601^ACUTE HEMODIAL TREATMENT^E^^10/1/90
"RTN","SDSTPD2",130,0)
 ;;602^CHRON ASSISTED HEMODIAL TREAT^P^10/1/2003^
"RTN","SDSTPD2",131,0)
 ;;603^LIM SELF CARE HEMODIAL TREAT^P^10/1/2003^
"RTN","SDSTPD2",132,0)
 ;;604^HOME/SELF HEMODIAL TRAIN TREAT^P^10/1/2003^
"RTN","SDSTPD2",133,0)
 ;;605^ACUTE PERITONEAL DIAL TREAT^P^10/1/2003^10/1/90
"RTN","SDSTPD2",134,0)
 ;;606^CHRON ASSISTED PERIT DIALYSIS^P^10/1/2003^
"RTN","SDSTPD2",135,0)
 ;;607^LIM SELF CARE PERIT DIALYSIS^P^10/1/2003^
"RTN","SDSTPD2",136,0)
 ;;608^HOME/SELF PERIT DIALYSIS TRAIN^P^10/1/2003^
"RTN","SDSTPD2",137,0)
 ;;610^CONTRACT DIALYSIS^P^10/1/2003^
"RTN","SDSTPD2",138,0)
 ;;611^TELEPHONE/DIALYSIS^P^10/1/2003^
"RTN","SDSTPD2",139,0)
 ;;640^SEND-OUT PROCS NOT FEE^P^10/1/2003^
"RTN","SDSTPD2",140,0)
 ;;641^SEND-OUT PROCS-DOD NOT FEE^P^10/1/2003^
"RTN","SDSTPD2",141,0)
 ;;642^SEND-OUT PROCS FEE^P^10/1/2003^
"RTN","SDSTPD2",142,0)
 ;;650^CONTRACT NURSING HOME DAYS^P^10/1/2003^
"RTN","SDSTPD2",143,0)
 ;;651^STATE NURSING HOME DAYS^P^10/1/2003^
"RTN","SDSTPD2",144,0)
 ;;652^STATE DOMICILIARY HOME DAYS^P^10/1/2003^
"RTN","SDSTPD2",145,0)
 ;;653^STATE HOSPITAL CARE^P^10/1/2003^
"RTN","SDSTPD2",146,0)
 ;;654^NON VA RESIDENTIAL CARE DAYS^P^10/1/2003^
"RTN","SDSTPD2",147,0)
 ;;655^COMMUNITY NON-VA CARE^P^10/1/2003^
"RTN","SDSTPD2",148,0)
 ;;656^DOD NON-VA CARE^P^10/1/2003^
"RTN","SDSTPD2",149,0)
 ;;657^ASSIST LIVING VENDOR WORK^P^10/1/2003^
"RTN","SDSTPD2",150,0)
 ;;660^CHIROPRACTIC CARE OUTSIDE VA^P^10/1/2003^
"RTN","SDSTPD2",151,0)
 ;;670^ASSIST LIVING, VHA-PAID STAFF^P^10/1/2003^
"RTN","SDSTPD2",152,0)
 ;;680^HOME/COMMUN HEALTHCARE ASSESS^E^^^^
"RTN","SDSTPD2",153,0)
 ;;681^VA-PAID HOME/COMMUN HEALTHCARE^P^10/1/2003^
"RTN","SDSTPD2",154,0)
 ;;682^VA-REFER HOME/COMMUN CARE PROV^P^10/1/2003^
"RTN","SDSTPD2",155,0)
 ;;683^NONVIDEO HOME TELEHEALTH MONIT^P^10/1/2003^
"RTN","SDSTPD2",156,0)
 ;;684^NONVIDEO HOME TELEHEALTH INTER^S^10/1/2003^
"RTN","SDSTPD2",157,0)
 ;;690^TELEMEDICINE^S^10/1/2003^
"RTN","SDSTPD2",158,0)
 ;;691^PRE-EMP PHYS MILITRY PERSONNEL^E^^^^
"RTN","SDSTPD2",159,0)
 ;;692^TELMD CNSLT SM STA 2ND ONLY^S^10/1/2003^
"RTN","SDSTPD2",160,0)
 ;;693^TELMD CNSLT NOT SM STA 2NDONLY^S^10/1/2003^
"RTN","SDSTPD2",161,0)
 ;;701^BLOOD PRESSURE CHECK^S^10/1/2003^
"RTN","SDSTPD2",162,0)
 ;;702^CHOLESTEROL SCREENING^S^10/1/2003^10/1/02
"RTN","SDSTPD2",163,0)
 ;;703^MAMMOGRAM (CAN BE PRIMARY)^E^^^^
"RTN","SDSTPD2",164,0)
 ;;704^PAP TEST^S^10/1/2003^
"RTN","SDSTPD2",165,0)
 ;;705^FOBT - GUIAC SCREENING^S^10/1/2003^10/1/02
"RTN","SDSTPD2",166,0)
 ;;706^ALCOHOL SCREENING^S^10/1/2003^
"RTN","SDSTPD2",167,0)
 ;;707^SMOKING CESSATION^S^10/1/2003^
"RTN","SDSTPD2",168,0)
 ;;708^NUTRITION^S^10/1/2003^10/1/02
"RTN","SDSTPD2",169,0)
 ;;709^PHY FIT/EXERCISE COUNSELING^S^10/1/2003^10/1/02
"RTN","SDSTPD2",170,0)
 ;;710^INFLUENZA IMMUNIZATION^S^10/1/2003^
"RTN","SDSTPD2",171,0)
 ;;711^INJURY COUNSEL/SEAT BELT USAGE^S^10/1/2003^10/1/02
"RTN","SDSTPD2",172,0)
 ;;712^HEP C REGISTRY PATIENT^S^10/1/2003^
"RTN","SDSTPD2",173,0)
 ;;713^GAMBLING ADDICTION (2ND ONLY)^S^10/1/2003^
"RTN","SDSTPD2",174,0)
 ;;714^OTHER EDUCATION 2ND ONLY^S^10/1/2003^
"RTN","SDSTPD2",175,0)
 ;;715^ONGOING TRTMT (NON-MH) 2ND^S^10/1/2003^
"RTN","SDSTPD2",176,0)
 ;;716^POST SURG RTINE AFTRCARE 2ND^S^10/1/2003^
"RTN","SDSTPD2",177,0)
 ;;725^DOMICILIARY OUTREACH SERVICES^E^^^^
"RTN","SDSTPD2",178,0)
 ;;726^DOM AFTERCARE - COMMUNITY^E^^^^
"RTN","SDSTPD2",179,0)
 ;;727^DOMICILIARY AFTERCARE - VA^E^^^^
"RTN","SDSTPD2",180,0)
 ;;728^DOMICILIARY ADM SCREENING SVCS^E^^^^
"RTN","SDSTPD2",181,0)
 ;;729^TELEPHONE/DOMICILIARY^P^10/1/2003^
"RTN","SDSTPD2",182,0)
 ;;730^DOM GENERAL CARE^E^^^^
"RTN","SDSTPD2",183,0)
 ;;731^PRRTP GENERAL CARE^E^^^^
"RTN","SDSTPD2",184,0)
 ;;801^IN-VISN, OTHER VAMC 2ND ONLY^S^10/1/2003^
"RTN","SDSTPD2",185,0)
 ;;802^OUT OF VISN, VA 2NDARY ONLY^S^10/1/2003^
"RTN","SDSTPD2",186,0)
 ;;803^COMMERCIAL 2NDARY ONLY^S^10/1/2003^
"RTN","SDSTPD2",187,0)
 ;;900^SPECIAL SERVICES^E^^10/1/98
"RTN","SDSTPD2",188,0)
 ;;902^COMPUTED TOMOGRAPHY SCANS^E^^4/1/89
"RTN","SDSTPD2",189,0)
 ;;903^RADIATION THERAPY^E^^4/1/89
"RTN","SDSTPD2",190,0)
 ;;904^CHEMOTHERAPY^E^^3/1/89
"RTN","SDSTPD2",191,0)
 ;;905^AMBULATORY SURGERY SERVICES^E^^4/1/89
"RTN","SDSTPD2",192,0)
 ;;906^BLOOD/BLOOD PRODUCTS TRANS.^E^^4/1/89
"RTN","SDSTPD2",193,0)
 ;;907^NUCLEAR MAGNETIC RESONANCE^E^^4/1/89
"RTN","SDSTPD2",194,0)
 ;;999^EMPLOYEE HEALTH^P^10/1/2003^
"RTN","SDSTPD2",195,0)
 ;;QUIT
"VER")
8.0^22.0
"^DD",40.7,40.7,5,0)
RESTRICTION TYPE^S^P:Primary;S:Secondary;E:Either;^0;6^Q
"^DD",40.7,40.7,5,.1)
Restriction Type
"^DD",40.7,40.7,5,3)
Enter a P, S or E.
"^DD",40.7,40.7,5,21,0)
^.001^2^2^3030811^^^
"^DD",40.7,40.7,5,21,1,0)
This field describes a Stop Code restriction type.  Valid entries are:-
"^DD",40.7,40.7,5,21,2,0)
     P - Primary    S - Secondary    E - Either
"^DD",40.7,40.7,5,"DT")
3030707
"^DD",40.7,40.7,6,0)
RESTRICTION DATE^D^^0;7^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",40.7,40.7,6,.1)
Restriction Date
"^DD",40.7,40.7,6,3)
Enter date the Stop Code became restricted.
"^DD",40.7,40.7,6,21,0)
^.001^3^3^3030811^^^
"^DD",40.7,40.7,6,21,1,0)
This field contains the date the Stop Code became restricted.  When the 
"^DD",40.7,40.7,6,21,2,0)
'Restriction Type' field has a value of 'P' or 'S' then a 'Restriction Date'
"^DD",40.7,40.7,6,21,3,0)
should be associated with it.
"^DD",40.7,40.7,6,"DT")
3030707
**INSTALL NAME**
ECX*3.0*57
"BLD",4878,0)
ECX*3.0*57^DSS EXTRACTS^0^3030922^y
"BLD",4878,4,0)
^9.64PA^^
"BLD",4878,"INIT")
ECX357PT
"BLD",4878,"KRN",0)
^9.67PA^8989.52^19
"BLD",4878,"KRN",.4,0)
.4
"BLD",4878,"KRN",.401,0)
.401
"BLD",4878,"KRN",.402,0)
.402
"BLD",4878,"KRN",.403,0)
.403
"BLD",4878,"KRN",.5,0)
.5
"BLD",4878,"KRN",.84,0)
.84
"BLD",4878,"KRN",3.6,0)
3.6
"BLD",4878,"KRN",3.8,0)
3.8
"BLD",4878,"KRN",9.2,0)
9.2
"BLD",4878,"KRN",9.8,0)
9.8
"BLD",4878,"KRN",9.8,"NM",0)
^9.68A^3^2
"BLD",4878,"KRN",9.8,"NM",2,0)
ECXSCRP^^0^B20108075
"BLD",4878,"KRN",9.8,"NM",3,0)
ECX357PT^^0^B28140377
"BLD",4878,"KRN",9.8,"NM","B","ECX357PT",3)

"BLD",4878,"KRN",9.8,"NM","B","ECXSCRP",2)

"BLD",4878,"KRN",19,0)
19
"BLD",4878,"KRN",19,"NM",0)
^9.68A^2^2
"BLD",4878,"KRN",19,"NM",1,0)
ECX CLN STOP REP^^0
"BLD",4878,"KRN",19,"NM",2,0)
ECX SETUP CLINIC^^2
"BLD",4878,"KRN",19,"NM","B","ECX CLN STOP REP",1)

"BLD",4878,"KRN",19,"NM","B","ECX SETUP CLINIC",2)

"BLD",4878,"KRN",19.1,0)
19.1
"BLD",4878,"KRN",101,0)
101
"BLD",4878,"KRN",409.61,0)
409.61
"BLD",4878,"KRN",771,0)
771
"BLD",4878,"KRN",870,0)
870
"BLD",4878,"KRN",8989.51,0)
8989.51
"BLD",4878,"KRN",8989.52,0)
8989.52
"BLD",4878,"KRN",8994,0)
8994
"BLD",4878,"KRN","B",.4,.4)

"BLD",4878,"KRN","B",.401,.401)

"BLD",4878,"KRN","B",.402,.402)

"BLD",4878,"KRN","B",.403,.403)

"BLD",4878,"KRN","B",.5,.5)

"BLD",4878,"KRN","B",.84,.84)

"BLD",4878,"KRN","B",3.6,3.6)

"BLD",4878,"KRN","B",3.8,3.8)

"BLD",4878,"KRN","B",9.2,9.2)

"BLD",4878,"KRN","B",9.8,9.8)

"BLD",4878,"KRN","B",19,19)

"BLD",4878,"KRN","B",19.1,19.1)

"BLD",4878,"KRN","B",101,101)

"BLD",4878,"KRN","B",409.61,409.61)

"BLD",4878,"KRN","B",771,771)

"BLD",4878,"KRN","B",870,870)

"BLD",4878,"KRN","B",8989.51,8989.51)

"BLD",4878,"KRN","B",8989.52,8989.52)

"BLD",4878,"KRN","B",8994,8994)

"BLD",4878,"PRET")

"BLD",4878,"QUES",0)
^9.62^^
"BLD",4878,"REQB",0)
^9.611^1^1
"BLD",4878,"REQB",1,0)
SD*5.3*317^2
"BLD",4878,"REQB","B","SD*5.3*317",1)

"INIT")
ECX357PT
"KRN",19,10173,-1)
2^2
"KRN",19,10173,0)
ECX SETUP CLINIC^Setup for DSS Clinic Information^^M^11714^^^^^^^513
"KRN",19,10173,10,0)
^19.01IP^6^6
"KRN",19,10173,10,6,0)
12461^6^30
"KRN",19,10173,10,6,"^")
ECX CLN STOP REP
"KRN",19,10173,"U")
SETUP FOR DSS CLINIC INFORMATI
"KRN",19,12461,-1)
0^1
"KRN",19,12461,0)
ECX CLN STOP REP^DSS Identifier Non-Conforming Clinics Report^^R^^^^^^^y^DSS EXTRACTS
"KRN",19,12461,1,0)
^19.06^5^5^3030811^^^^
"KRN",19,12461,1,1,0)
This option synchronizes the Primary and Secondary Stop Codes found 
"KRN",19,12461,1,2,0)
in the Clinics and Stop Codes File #728.44 with the Primary and 
"KRN",19,12461,1,3,0)
Secondary Stop codes found in the Hospital Location File #44.  It 
"KRN",19,12461,1,4,0)
produces a report of the Clinics that are non-conforming to the stop 
"KRN",19,12461,1,5,0)
code restriction types.
"KRN",19,12461,10.1)
DSS Id. Non-Conform Cln Rep
"KRN",19,12461,25)
ECXSCRP
"KRN",19,12461,"U")
DSS IDENTIFIER NON-CONFORMING 
"MBREQ")
1
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",513,-1)
1^1
"PKG",513,0)
DSS EXTRACTS^ECX^Decision Support System. (DSS)
"PKG",513,20,0)
^9.402P^^
"PKG",513,22,0)
^9.49I^1^1
"PKG",513,22,1,0)
3.0^3010618^2980112^11714
"PKG",513,22,1,"PAH",1,0)
57^3030922
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","ECX357PT")
0^3^B28140377
"RTN","ECX357PT",1,0)
ECX357PT ;ALB/JAM - Restricting Stop Code Post-Init Rtn; 0707/03
"RTN","ECX357PT",2,0)
 ;;3.0;DSS EXTRACTS;**57**;Dec 22,1997
"RTN","ECX357PT",3,0)
 ;
"RTN","ECX357PT",4,0)
POST ; entry point
"RTN","ECX357PT",5,0)
 ;* Check #728.44 for appropriate Stop Code type
"RTN","ECX357PT",6,0)
 N ZTRTN,ZTDESC,ZTIO,ZTDTH,ZTREQ,ZTSAVE
"RTN","ECX357PT",7,0)
 D MES^XPDUTL(" ")
"RTN","ECX357PT",8,0)
 D BMES^XPDUTL("This post install process does the following:-")
"RTN","ECX357PT",9,0)
 D BMES^XPDUTL("  1. Checks clinics in file #728.44 for invalid Stop Codes and produces")
"RTN","ECX357PT",10,0)
 D MES^XPDUTL("     a MailMan message.")
"RTN","ECX357PT",11,0)
 D MES^XPDUTL(" ")
"RTN","ECX357PT",12,0)
 ;check file #44 and #728.44 for non-conforming restriction type
"RTN","ECX357PT",13,0)
 S ZTRTN="PROCESS^ECX357PT"
"RTN","ECX357PT",14,0)
 S ZTDESC="DSS Identifier Non-conforming Clinics Report"
"RTN","ECX357PT",15,0)
 S ZTIO="",ZTDTH=$H,ZTREQ="@" D ^%ZTLOAD
"RTN","ECX357PT",16,0)
 D MES^XPDUTL(" ")
"RTN","ECX357PT",17,0)
 D BMES^XPDUTL("completed...")
"RTN","ECX357PT",18,0)
 D MES^XPDUTL(" ")
"RTN","ECX357PT",19,0)
 Q
"RTN","ECX357PT",20,0)
 ;
"RTN","ECX357PT",21,0)
PROCESS ;background entry point
"RTN","ECX357PT",22,0)
 ; Locate invalid Stop Code in file #728.44 and put in a mail message
"RTN","ECX357PT",23,0)
 N ECX,IEN,BLN,COUNT,TXTVAR,I,LNS,CNT,STR,ECXJ,PSC,SSC,DPC,DSC,CNTX,NAM
"RTN","ECX357PT",24,0)
 N SCN,PSCN,SSCN,DPCN,DSCN,IDT,HTYP
"RTN","ECX357PT",25,0)
 S COUNT=0,$P(BLN," ",60)="",$P(LNS,"-",80)=""
"RTN","ECX357PT",26,0)
 S ECXJ=$J K ^TMP($J,"ECX353PT")
"RTN","ECX357PT",27,0)
 F I=1:1 S TXTVAR=$P($T(MSGTXT+I),";;",2) Q:TXTVAR="QUIT"  D LINE(TXTVAR)
"RTN","ECX357PT",28,0)
 D CK72844
"RTN","ECX357PT",29,0)
 D MAIL
"RTN","ECX357PT",30,0)
 K ^TMP(ECXJ,"ECX353PT"),TEXT,TYP
"RTN","ECX357PT",31,0)
 Q
"RTN","ECX357PT",32,0)
 ;
"RTN","ECX357PT",33,0)
CK72844 ;Check file 728.44 for invalid stop codes.
"RTN","ECX357PT",34,0)
 S CNTX=0
"RTN","ECX357PT",35,0)
 D HDR1
"RTN","ECX357PT",36,0)
 ;search file #728.44 for invalid entries
"RTN","ECX357PT",37,0)
 S IEN=0 F  S IEN=$O(^ECX(728.44,IEN)) Q:'IEN  K STR D
"RTN","ECX357PT",38,0)
 .S ECX=$G(^ECX(728.44,IEN,0)),PSC=$P(ECX,U,2),SSC=$P(ECX,U,3)
"RTN","ECX357PT",39,0)
 .S DPC=$P(ECX,U,4),DSC=$P(ECX,U,5),NAM=$$GET1^DIQ(44,$P(ECX,U),.01)
"RTN","ECX357PT",40,0)
 .S IDT=$P(ECX,U,10),CNT=1,HTYP=$$GET1^DIQ(44,$P(ECX,U),2,"I")
"RTN","ECX357PT",41,0)
 .I IDT'="" S NAM="*"_NAM
"RTN","ECX357PT",42,0)
 .S (PSCN,SSCN,DPCN,DSCN)="" D
"RTN","ECX357PT",43,0)
 ..I PSC="" S STR(CNT)="Missing primary code",CNT=CNT+1 Q
"RTN","ECX357PT",44,0)
 ..S PSCN=$$SCIEN(PSC)
"RTN","ECX357PT",45,0)
 ..I PSCN="" S STR(CNT)=PSC_" Invalid Code",CNT=CNT+1 Q
"RTN","ECX357PT",46,0)
 ..D SCCHK(PSCN,"P")
"RTN","ECX357PT",47,0)
 .I SSC'="" S SSCN=$$SCIEN(SSC) D 
"RTN","ECX357PT",48,0)
 ..I SSCN="" D  Q
"RTN","ECX357PT",49,0)
 ...Q:PSC=SSC  S STR(CNT)=SSC_" Invalid Code",CNT=CNT+1
"RTN","ECX357PT",50,0)
 ..D SCCHK(SSCN,"S")
"RTN","ECX357PT",51,0)
 .D
"RTN","ECX357PT",52,0)
 ..I DPC="" S STR(CNT)="No DSS primary code",CNT=CNT+1 Q
"RTN","ECX357PT",53,0)
 ..S DPCN=$$SCIEN(DPC) Q:DPC=PSC
"RTN","ECX357PT",54,0)
 ..I DPCN="" D  Q
"RTN","ECX357PT",55,0)
 ...S STR(CNT)=DPC_" Invalid Code",CNT=CNT+1
"RTN","ECX357PT",56,0)
 ..D SCCHK(DPCN,"P")
"RTN","ECX357PT",57,0)
 .I DSC'="",DSC'=SSC S DSCN=$$SCIEN(DSC) D
"RTN","ECX357PT",58,0)
 ..I DSCN="" D  Q
"RTN","ECX357PT",59,0)
 ...Q:DSC=DPC  Q:DSC=SSC  Q:DSC=DPC
"RTN","ECX357PT",60,0)
 ...S STR(CNT)=DSC_" Invalid Code",CNT=CNT+1
"RTN","ECX357PT",61,0)
 ..D SCCHK(DSCN,"S")
"RTN","ECX357PT",62,0)
 .I $O(STR(0))'="" D
"RTN","ECX357PT",63,0)
 ..I HTYP'="C" K STR S STR(1)="Not a Clinic"
"RTN","ECX357PT",64,0)
 ..D LINE(.STR,"S") S CNTX=CNTX+1
"RTN","ECX357PT",65,0)
 D LINE(" ")
"RTN","ECX357PT",66,0)
 S STR=$E(BLN,1,25)_$S(CNTX:CNTX,1:"NO")_" PROBLEM CLINICS FOUND."
"RTN","ECX357PT",67,0)
 D LINE(STR)
"RTN","ECX357PT",68,0)
 Q
"RTN","ECX357PT",69,0)
 ;
"RTN","ECX357PT",70,0)
SCNUM(SCIEN) ;Get stop code Number
"RTN","ECX357PT",71,0)
 I SCIEN="" Q ""
"RTN","ECX357PT",72,0)
 S SCN=$P($G(^DIC(40.7,SCIEN,0)),U,2)
"RTN","ECX357PT",73,0)
 Q SCN
"RTN","ECX357PT",74,0)
 ;
"RTN","ECX357PT",75,0)
SCIEN(SCN) ;Get stop code IEN
"RTN","ECX357PT",76,0)
 I SCN="" Q ""
"RTN","ECX357PT",77,0)
 S SCIEN=$O(^DIC(40.7,"C",SCN,0))
"RTN","ECX357PT",78,0)
 Q SCIEN
"RTN","ECX357PT",79,0)
 ;
"RTN","ECX357PT",80,0)
SCCHK(SCIEN,TYP) ;check stop code against file 40.7
"RTN","ECX357PT",81,0)
 N SCN,RTY,CTY
"RTN","ECX357PT",82,0)
 S CTY=$S(TYP="P":"^P^E^",1:"^S^E^")
"RTN","ECX357PT",83,0)
 S SCN=$G(^DIC(40.7,SCIEN,0)),RTY=$P(SCN,U,6),SCN=$P(SCN,U,2)
"RTN","ECX357PT",84,0)
 I SCN="" D  Q
"RTN","ECX357PT",85,0)
 .I TYP="S" Q:SSC=PSC  Q:DSC=DPC
"RTN","ECX357PT",86,0)
 .S STR(CNT)=SCIEN_" Invalid pointer."
"RTN","ECX357PT",87,0)
 .D CNTR
"RTN","ECX357PT",88,0)
 I RTY="" S STR(CNT)=SCN_" No restriction type" D CNTR Q
"RTN","ECX357PT",89,0)
 I CTY'[("^"_RTY_"^") D
"RTN","ECX357PT",90,0)
 .S STR(CNT)=SCN_" cannot be "_$S(TYP="P":"prim",1:"second")_"ary"
"RTN","ECX357PT",91,0)
CNTR ;counter
"RTN","ECX357PT",92,0)
 S CNT=CNT+1
"RTN","ECX357PT",93,0)
 Q
"RTN","ECX357PT",94,0)
 ;
"RTN","ECX357PT",95,0)
HDR1 ;header for data from file #728.44
"RTN","ECX357PT",96,0)
 D LINE(" ")
"RTN","ECX357PT",97,0)
 D LINE(" ")
"RTN","ECX357PT",98,0)
 S STR="CLINICS AND STOP CODES File (#728.44) - (Use 'Enter/Edit DSS "
"RTN","ECX357PT",99,0)
 S STR=STR_"Stop Codes for"
"RTN","ECX357PT",100,0)
 D LINE(STR)
"RTN","ECX357PT",101,0)
 S STR=$E(BLN,1,25)_"Clinics' [ECXSCEDIT] menu option to "
"RTN","ECX357PT",102,0)
 S STR=STR_"make corrections)"
"RTN","ECX357PT",103,0)
 D LINE(STR)
"RTN","ECX357PT",104,0)
 D LINE(" ")
"RTN","ECX357PT",105,0)
 S STR=$E(BLN,1,39)_$E("DSS"_BLN,1,9)_$E("DSS"_BLN,1,9)
"RTN","ECX357PT",106,0)
 D LINE(STR)
"RTN","ECX357PT",107,0)
 S STR=$E(BLN,1,21)_$E("PRIMARY"_BLN,1,9)_$E("2NDARY/"_BLN,1,9)
"RTN","ECX357PT",108,0)
 S STR=STR_$E("PRIMARY"_BLN,1,9)_$E("2NDARY/"_BLN,1,9)
"RTN","ECX357PT",109,0)
 D LINE(STR)
"RTN","ECX357PT",110,0)
 S STR=$E("CLINIC NAME"_BLN,1,21)_$E("STOP"_BLN,1,9)_$E("CREDIT"_BLN,1,9)
"RTN","ECX357PT",111,0)
 S STR=STR_$E("STOP"_BLN,1,9)_$E("CREDIT"_BLN,1,8)_"REASON FOR NON-"
"RTN","ECX357PT",112,0)
 D LINE(STR)
"RTN","ECX357PT",113,0)
 S STR=$E("*currently inactive"_BLN,1,21)_$E("CODE"_BLN,1,9)
"RTN","ECX357PT",114,0)
 S STR=STR_$E("CODE"_BLN,1,9)_$E("CODE"_BLN,1,9)_$E("CODE"_BLN,1,8)
"RTN","ECX357PT",115,0)
 S STR=STR_"CONFORMANCE"
"RTN","ECX357PT",116,0)
 D LINE(STR)
"RTN","ECX357PT",117,0)
 S STR=$E(LNS,1,80)
"RTN","ECX357PT",118,0)
 D LINE(STR)
"RTN","ECX357PT",119,0)
 Q
"RTN","ECX357PT",120,0)
MSGTXT ; Message intro
"RTN","ECX357PT",121,0)
 ;; Please forward this message to your local DSS Site Manager/ADPAC.
"RTN","ECX357PT",122,0)
 ;;
"RTN","ECX357PT",123,0)
 ;; A review of the Primary and Secondary Stop Codes in the CLINICS AND
"RTN","ECX357PT",124,0)
 ;; STOP CODES file (#728.44) was completed against the Restriction Type
"RTN","ECX357PT",125,0)
 ;; field (#5) of the CLINIC STOP file (#40.7) for nonconforming clinics.
"RTN","ECX357PT",126,0)
 ;;
"RTN","ECX357PT",127,0)
 ;;    
"RTN","ECX357PT",128,0)
 ;;QUIT
"RTN","ECX357PT",129,0)
 ;
"RTN","ECX357PT",130,0)
 ;
"RTN","ECX357PT",131,0)
LINE(TEXT,TYP) ; Add line to message global
"RTN","ECX357PT",132,0)
 N FLN,STR,XI
"RTN","ECX357PT",133,0)
 ;build 1st line with name, codes, etc.
"RTN","ECX357PT",134,0)
 I $O(TEXT(0))'="" D  Q
"RTN","ECX357PT",135,0)
 .S STR=$E(NAM_BLN,1,$S(TYP="P":35,1:21))
"RTN","ECX357PT",136,0)
 .S STR=STR_$E(PSC_BLN,1,$S(TYP="P":10,1:9))
"RTN","ECX357PT",137,0)
 .S STR=STR_$E(SSC_BLN,1,$S(TYP="P":12,1:9))
"RTN","ECX357PT",138,0)
 .I TYP="S" S STR=STR_$E(DPC_BLN,1,9)_$E(DSC_BLN,1,8)
"RTN","ECX357PT",139,0)
 .;set line in ^tmp global
"RTN","ECX357PT",140,0)
 .S XI=0 F  S XI=$O(TEXT(XI)) Q:'XI  D
"RTN","ECX357PT",141,0)
 ..S TEXT(XI)=STR_TEXT(XI)
"RTN","ECX357PT",142,0)
 ..S COUNT=COUNT+1,^TMP(ECXJ,"ECX353PT",COUNT)=TEXT(XI)
"RTN","ECX357PT",143,0)
 S COUNT=COUNT+1,^TMP(ECXJ,"ECX353PT",COUNT)=TEXT
"RTN","ECX357PT",144,0)
 Q
"RTN","ECX357PT",145,0)
 ;
"RTN","ECX357PT",146,0)
MAIL ; Send message
"RTN","ECX357PT",147,0)
 N XMDUZ,XMY,XMTEXT,XMSUB
"RTN","ECX357PT",148,0)
 S XMY(DUZ)="",XMDUZ=.5
"RTN","ECX357PT",149,0)
 S XMSUB="DSS Identifier Non-Conforming Clinics"
"RTN","ECX357PT",150,0)
 S XMTEXT="^TMP(ECXJ,""ECX353PT"","
"RTN","ECX357PT",151,0)
 D ^XMD
"RTN","ECX357PT",152,0)
 Q
"RTN","ECXSCRP")
0^2^B20108075
"RTN","ECXSCRP",1,0)
ECXSCRP ;ALB/JAM - Restricted Stop Code Nonconforming Clinic Report; 07/24/03
"RTN","ECXSCRP",2,0)
 ;;3.0;DSS EXTRACTS;**57**;Dec 22, 1997
"RTN","ECXSCRP",3,0)
 ;
"RTN","ECXSCRP",4,0)
EN ;foreground entry point
"RTN","ECXSCRP",5,0)
 N ZTRTN,ZTDESC,ZTIO,ZTQUEUED,DIR,DIRUT,X,Y,ECX,ECXSD,PSC,SSC,ECXPCF
"RTN","ECXSCRP",6,0)
 W @IOF
"RTN","ECXSCRP",7,0)
 W "This option synchronizes the Primary and Secondary Stop Codes in the Clinics"
"RTN","ECXSCRP",8,0)
 W !,"and Stop Codes File #728.44 with those in the Hospital Location File #44."
"RTN","ECXSCRP",9,0)
 W !,"It produces a report highlighting any non conformance reasons that pertain"
"RTN","ECXSCRP",10,0)
 W !,"to the Primary and Secondary Codes. Please contact the responsible party "
"RTN","ECXSCRP",11,0)
 W !,"for corrective action."
"RTN","ECXSCRP",12,0)
 S DIR(0)="SO^A:Active Clinics;I:Inactive Clinics;B:Both"
"RTN","ECXSCRP",13,0)
 S DIR("A")="Select Report"
"RTN","ECXSCRP",14,0)
 S DIR("?",1)="Enter an A for Active Clinics, I for Inactive Clinics,"
"RTN","ECXSCRP",15,0)
 S DIR("?")="B for Both Active and Inactive Clinics"
"RTN","ECXSCRP",16,0)
 D ^DIR K DIR I $D(DIRUT) G END
"RTN","ECXSCRP",17,0)
 S ECXPCF=Y
"RTN","ECXSCRP",18,0)
 W ".  Please be patient, this may take a few moments..."
"RTN","ECXSCRP",19,0)
 ;Synch primary & secondary stop codes from file #44 with #728.44
"RTN","ECXSCRP",20,0)
 S ECX=0 F  S ECX=$O(^ECX(728.44,ECX)) Q:'ECX  D
"RTN","ECXSCRP",21,0)
 .I '$D(^SC(ECX,0)) Q
"RTN","ECXSCRP",22,0)
 .S ECXSD=$G(^SC(ECX,0)) I ECXSD="" Q
"RTN","ECXSCRP",23,0)
 .S PSC=$S($P(ECXSD,U,7):$P($G(^DIC(40.7,$P(ECXSD,U,7),0)),U,2),1:"")
"RTN","ECXSCRP",24,0)
 .S SSC=$S($P(ECXSD,U,18):$P($G(^DIC(40.7,$P(ECXSD,U,18),0)),U,2),1:"")
"RTN","ECXSCRP",25,0)
 .I PSC S $P(^ECX(728.44,ECX,0),U,2)=PSC
"RTN","ECXSCRP",26,0)
 .I SSC S $P(^ECX(728.44,ECX,0),U,3)=SSC
"RTN","ECXSCRP",27,0)
 ;device selection
"RTN","ECXSCRP",28,0)
 K IOP,%ZIS,POP,IO("Q")
"RTN","ECXSCRP",29,0)
 S %ZIS("A")="Select Device: ",%ZIS="QM" D ^%ZIS I POP G END
"RTN","ECXSCRP",30,0)
 I $D(IO("Q")) K IO("Q") D  G END
"RTN","ECXSCRP",31,0)
 .S ZTDESC="Restricted Stop Code/DSS Identifier Report",ZTSAVE("ECSPCF")=""
"RTN","ECXSCRP",32,0)
 .S ZTRTN="PROCESS^ECXSCRP",ZTIO=ION D ^%ZTLOAD,HOME^%ZIS K ZTSK
"RTN","ECXSCRP",33,0)
 U IO
"RTN","ECXSCRP",34,0)
 D PROCESS
"RTN","ECXSCRP",35,0)
END D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","ECXSCRP",36,0)
 Q
"RTN","ECXSCRP",37,0)
 ;
"RTN","ECXSCRP",38,0)
PROCESS ;background entry point
"RTN","ECXSCRP",39,0)
 ;locate invalid Stop Code in HOSPITAL LOCATION file #44 & CLINICS
"RTN","ECXSCRP",40,0)
 ;AND STOP CODES file #728.44
"RTN","ECXSCRP",41,0)
 N ECX,NAM,STR,IEN,PSC,SSC,CNTX,ECXPG,ECXOUT,LNS,DPC,DSC,SCIEN,ECXF
"RTN","ECXSCRP",42,0)
 N INDT,TYP,ACF,HTYP,CLNF,ECXRDT
"RTN","ECXSCRP",43,0)
 S %H=$H D YX^%DTC S ECXRDT=Y
"RTN","ECXSCRP",44,0)
 S $P(LNS,"-",80)="",(CNTX,IEN,ECXOUT,ECXF)=0,ECXPG=1,CLNF=0
"RTN","ECXSCRP",45,0)
 ;search file #728.44 for invalid stop code entries
"RTN","ECXSCRP",46,0)
 D HDR S IEN=0
"RTN","ECXSCRP",47,0)
 F  S IEN=$O(^ECX(728.44,IEN)) Q:'IEN  D  Q:ECXOUT  S:ECXF CNTX=CNTX+1
"RTN","ECXSCRP",48,0)
 .S ECX=$G(^ECX(728.44,IEN,0)),PSC=$P(ECX,U,2),SSC=$P(ECX,U,3),CLNF=0
"RTN","ECXSCRP",49,0)
 .S DPC=$P(ECX,U,4),DSC=$P(ECX,U,5),NAM=$$GET1^DIQ(44,$P(ECX,U),.01)
"RTN","ECXSCRP",50,0)
 .S INDT=$P(ECX,U,10),ECXF=0 I INDT'="" S NAM="*"_NAM
"RTN","ECXSCRP",51,0)
 .S ACF=$S($E(NAM)="*":0,1:1),HTYP=$$GET1^DIQ(44,$P(ECX,U),2,"I")
"RTN","ECXSCRP",52,0)
 .I $S((ECXPCF="A")&('ACF):1,(ECXPCF="I")&(ACF):1,1:0) Q
"RTN","ECXSCRP",53,0)
 .D  I ECXOUT Q
"RTN","ECXSCRP",54,0)
 ..I PSC="" S STR="Missing primary code" D PRN Q
"RTN","ECXSCRP",55,0)
 ..D SCCHK(PSC,"P") I $D(STR) D PRN
"RTN","ECXSCRP",56,0)
 .I SSC'="" D SCCHK(SSC,"S") I $D(STR) D PRN
"RTN","ECXSCRP",57,0)
 .D  I ECXOUT Q 
"RTN","ECXSCRP",58,0)
 ..I DPC="" S STR="No DSS primary code" D PRN Q
"RTN","ECXSCRP",59,0)
 ..I DPC'=PSC D SCCHK(DPC,"P") I $D(STR) D PRN
"RTN","ECXSCRP",60,0)
 .I DSC'="",DSC'=SSC D SCCHK(DSC,"S") I $D(STR) D PRN
"RTN","ECXSCRP",61,0)
 W !!,?25,$S(CNTX:CNTX,1:"NO")_" PROBLEM CLINICS FOUND."
"RTN","ECXSCRP",62,0)
 Q
"RTN","ECXSCRP",63,0)
PRN ;print line
"RTN","ECXSCRP",64,0)
 Q:CLNF  I HTYP'="C" S STR="Not a Clinic" S CLNF=1
"RTN","ECXSCRP",65,0)
 I ($Y+3)>IOSL D PAGE,HDR I ECXOUT Q
"RTN","ECXSCRP",66,0)
 W !,IEN,?8,$E(NAM,1,24),?33,PSC,?38,SSC,?45,DPC,?50,DSC,?57,STR
"RTN","ECXSCRP",67,0)
 S ECXF=1
"RTN","ECXSCRP",68,0)
 Q
"RTN","ECXSCRP",69,0)
 ;
"RTN","ECXSCRP",70,0)
SCCHK(SCIEN,TYP) ;check stop code against file 40.7
"RTN","ECXSCRP",71,0)
 N SCN,RTY,CTY,SCI
"RTN","ECXSCRP",72,0)
 K STR
"RTN","ECXSCRP",73,0)
 S CTY=$S(TYP="P":"^P^E^",1:"^S^E^")
"RTN","ECXSCRP",74,0)
 S SCI=$$SCIEN(SCIEN) I SCI="" D  Q
"RTN","ECXSCRP",75,0)
 .I TYP="S" Q:SSC=PSC  Q:DSC=DPC
"RTN","ECXSCRP",76,0)
 .S STR=SCIEN_" Invalid Stop Code"
"RTN","ECXSCRP",77,0)
 S SCN=$G(^DIC(40.7,SCI,0)),RTY=$P(SCN,U,6)
"RTN","ECXSCRP",78,0)
 I $P(SCN,U,2)="" S STR="No pointer in file #40.7" Q
"RTN","ECXSCRP",79,0)
 I RTY="" S STR=SCIEN_" No restriction type" Q
"RTN","ECXSCRP",80,0)
 I CTY'[("^"_RTY_"^") D
"RTN","ECXSCRP",81,0)
 .S STR=SCIEN_" cannot be "_$S(TYP="P":"prim",1:"second")_"ary"
"RTN","ECXSCRP",82,0)
 Q
"RTN","ECXSCRP",83,0)
PAGE ;
"RTN","ECXSCRP",84,0)
 N SS,JJ,DIR,X,Y
"RTN","ECXSCRP",85,0)
 I $E(IOST,1,2)="C-" D
"RTN","ECXSCRP",86,0)
 . S SS=22-$Y F JJ=1:1:SS W !
"RTN","ECXSCRP",87,0)
 . S DIR(0)="E" W ! D ^DIR K DIR I 'Y S ECXOUT=1
"RTN","ECXSCRP",88,0)
 Q
"RTN","ECXSCRP",89,0)
 ;
"RTN","ECXSCRP",90,0)
SCIEN(SCIEN) ;Get stop code IEN
"RTN","ECXSCRP",91,0)
 I SCIEN="" Q ""
"RTN","ECXSCRP",92,0)
 S SCIEN=$O(^DIC(40.7,"C",SCIEN,0))
"RTN","ECXSCRP",93,0)
 Q SCIEN
"RTN","ECXSCRP",94,0)
 ;
"RTN","ECXSCRP",95,0)
HDR ;header for data from file #728.44
"RTN","ECXSCRP",96,0)
 W @IOF
"RTN","ECXSCRP",97,0)
 W ECXRDT,?73,"Page: ",ECXPG,!
"RTN","ECXSCRP",98,0)
 W !,?18,"DSS IDENTIFIER NON-CONFORMING CLINICS REPORT",!,?32
"RTN","ECXSCRP",99,0)
 W $S(ECXPCF="A":"Active",ECXPCF="I":"Inactive",1:"All")_" Clinics",!
"RTN","ECXSCRP",100,0)
 W !,"CLINICS AND STOP CODES File (#728.44) - (Use 'Enter/Edit DSS "
"RTN","ECXSCRP",101,0)
 W "Stop Codes for",!,?25,"Clinics' [ECXSCEDIT] menu option to "
"RTN","ECXSCRP",102,0)
 W "make corrections)",!!,?45,"DSS",?50,"DSS"
"RTN","ECXSCRP",103,0)
 W !,?33,"PRIM",?38,"2NDARY",?45,"PRIM",?50,"2NDARY"
"RTN","ECXSCRP",104,0)
 W !,?8,$S(ECXPCF="B":"CLINIC NAME",1:""),?33,"STOP",?38,"CREDIT"
"RTN","ECXSCRP",105,0)
 W ?45,"STOP",?50,"CREDIT",?57,"REASON FOR NON-",!
"RTN","ECXSCRP",106,0)
 W "IEN #",?8,$S(ECXPCF="B":"(*currently inactive)",1:"CLINIC NAME")
"RTN","ECXSCRP",107,0)
 W ?33,"CODE",?38,"CODE",?45,"CODE",?50,"CODE",?57,"CONFORMANCE"
"RTN","ECXSCRP",108,0)
 W !,$E(LNS,1,80)
"RTN","ECXSCRP",109,0)
 S ECXPG=ECXPG+1
"RTN","ECXSCRP",110,0)
 Q
"VER")
8.0^22.0
**END**
**END**

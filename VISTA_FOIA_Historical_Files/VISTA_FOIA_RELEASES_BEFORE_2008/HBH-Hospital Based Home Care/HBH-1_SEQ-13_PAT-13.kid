Released HBH*1*13 SEQ #13
Extracted from mail message
**KIDS**:HBH*1.0*13^

**INSTALL NAME**
HBH*1.0*13
"BLD",2112,0)
HBH*1.0*13^HOSPITAL BASED HOME CARE^0^2990712^y
"BLD",2112,1,0)
^^1^1^2990712^^^^
"BLD",2112,1,1,0)
This is the beta version of patch 13, vT1.
"BLD",2112,4,0)
^9.64PA^631.4^2
"BLD",2112,4,631.4,0)
631.4
"BLD",2112,4,631.4,2,0)
^9.641^631.4^1
"BLD",2112,4,631.4,2,631.4,0)
HBHC PROVIDER  (File-top level)
"BLD",2112,4,631.4,2,631.4,1,0)
^9.6411^.01^1
"BLD",2112,4,631.4,2,631.4,1,.01,0)
NUMBER
"BLD",2112,4,631.4,222)
y^y^p^^^^n
"BLD",2112,4,633.1,0)
633.1
"BLD",2112,4,633.1,222)
n^y^f^^n^^y^o^n
"BLD",2112,4,"APDD",631.4,631.4)

"BLD",2112,4,"APDD",631.4,631.4,.01)

"BLD",2112,4,"B",631.4,631.4)

"BLD",2112,4,"B",633.1,633.1)

"BLD",2112,"ABPKG")
n
"BLD",2112,"KRN",0)
^9.67PA^19^18
"BLD",2112,"KRN",.4,0)
.4
"BLD",2112,"KRN",.4,"NM",0)
^9.68A^^
"BLD",2112,"KRN",.401,0)
.401
"BLD",2112,"KRN",.401,"NM",0)
^9.68A^^
"BLD",2112,"KRN",.402,0)
.402
"BLD",2112,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",2112,"KRN",.403,0)
.403
"BLD",2112,"KRN",.403,"NM",0)
^9.68A^^
"BLD",2112,"KRN",.5,0)
.5
"BLD",2112,"KRN",.84,0)
.84
"BLD",2112,"KRN",3.6,0)
3.6
"BLD",2112,"KRN",3.8,0)
3.8
"BLD",2112,"KRN",3.8,"NM",0)
^9.68A^^0
"BLD",2112,"KRN",9.2,0)
9.2
"BLD",2112,"KRN",9.8,0)
9.8
"BLD",2112,"KRN",9.8,"NM",0)
^9.68A^44^7
"BLD",2112,"KRN",9.8,"NM",2,0)
HBHCAPPT^^0^B27732256
"BLD",2112,"KRN",9.8,"NM",32,0)
HBHCXMT^^0^B16834536
"BLD",2112,"KRN",9.8,"NM",35,0)
HBHCRP1A^^0^B15827577
"BLD",2112,"KRN",9.8,"NM",37,0)
HBHCR15A^^0^B16134175
"BLD",2112,"KRN",9.8,"NM",38,0)
HBHCR15B^^0^B27146557
"BLD",2112,"KRN",9.8,"NM",43,0)
HBHCXMD^^0^B22377559
"BLD",2112,"KRN",9.8,"NM",44,0)
HBHCRP21^^0^B50623061
"BLD",2112,"KRN",9.8,"NM","B","HBHCAPPT",2)

"BLD",2112,"KRN",9.8,"NM","B","HBHCR15A",37)

"BLD",2112,"KRN",9.8,"NM","B","HBHCR15B",38)

"BLD",2112,"KRN",9.8,"NM","B","HBHCRP1A",35)

"BLD",2112,"KRN",9.8,"NM","B","HBHCRP21",44)

"BLD",2112,"KRN",9.8,"NM","B","HBHCXMD",43)

"BLD",2112,"KRN",9.8,"NM","B","HBHCXMT",32)

"BLD",2112,"KRN",19,0)
19
"BLD",2112,"KRN",19,"NM",0)
^9.68A^^0
"BLD",2112,"KRN",19.1,0)
19.1
"BLD",2112,"KRN",19.1,"NM",0)
^9.68A^^0
"BLD",2112,"KRN",101,0)
101
"BLD",2112,"KRN",409.61,0)
409.61
"BLD",2112,"KRN",771,0)
771
"BLD",2112,"KRN",869.2,0)
869.2
"BLD",2112,"KRN",870,0)
870
"BLD",2112,"KRN",8994,0)
8994
"BLD",2112,"KRN","B",.4,.4)

"BLD",2112,"KRN","B",.401,.401)

"BLD",2112,"KRN","B",.402,.402)

"BLD",2112,"KRN","B",.403,.403)

"BLD",2112,"KRN","B",.5,.5)

"BLD",2112,"KRN","B",.84,.84)

"BLD",2112,"KRN","B",3.6,3.6)

"BLD",2112,"KRN","B",3.8,3.8)

"BLD",2112,"KRN","B",9.2,9.2)

"BLD",2112,"KRN","B",9.8,9.8)

"BLD",2112,"KRN","B",19,19)

"BLD",2112,"KRN","B",19.1,19.1)

"BLD",2112,"KRN","B",101,101)

"BLD",2112,"KRN","B",409.61,409.61)

"BLD",2112,"KRN","B",771,771)

"BLD",2112,"KRN","B",869.2,869.2)

"BLD",2112,"KRN","B",870,870)

"BLD",2112,"KRN","B",8994,8994)

"BLD",2112,"QUES",0)
^9.62^^
"BLD",2112,"REQB",0)
^9.611^^
"DATA",633.1,1,0)
Appointment Check-Out Missing
"DATA",633.1,2,0)
Provider Missing
"DATA",633.1,3,0)
Diagnosis Missing
"DATA",633.1,4,0)
CPT Code Missing
"DATA",633.1,5,0)
Provider Ambiguous
"DATA",633.1,6,0)
Diagnoses > 5
"DATA",633.1,7,0)
CPT Codes > 10
"DATA",633.1,8,0)
Outpatient Encounter Pointer Missing
"DATA",633.1,9,0)
Visit File Pointer Missing
"DATA",633.1,10,0)
Provider > 10
"DATA",633.1,11,0)
HBHC Provider Number Missing
"DATA",633.1,12,0)
Multiple HBHC Provider Numbers
"DATA",633.1,13,0)
Provider Mismatch
"FIA",631.4)
HBHC PROVIDER
"FIA",631.4,0)
^HBHC(631.4,
"FIA",631.4,0,0)
631.4OI
"FIA",631.4,0,1)
y^y^p^^^^n
"FIA",631.4,0,10)

"FIA",631.4,0,11)

"FIA",631.4,0,"RLRO")

"FIA",631.4,0,"VR")
1.0^HBH
"FIA",631.4,631.4)
1
"FIA",631.4,631.4,.01)

"FIA",633.1)
HBHC ERROR MESSAGES FOR VISITS
"FIA",633.1,0)
^HBHC(633.1,
"FIA",633.1,0,0)
633.1
"FIA",633.1,0,1)
n^y^f^^n^^y^o^n
"FIA",633.1,0,10)

"FIA",633.1,0,11)

"FIA",633.1,0,"RLRO")

"FIA",633.1,0,"VR")
1.0^HBH
"FIA",633.1,633.1)
0
"MBREQ")
0
"PKG",455,-1)
1^1
"PKG",455,0)
HOSPITAL BASED HOME CARE^HBH^Hospital Based Home Care
"PKG",455,20,0)
^9.402P^^
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
1.0^2931101
"PKG",455,22,1,"PAH",1,0)
13^2990712^3779
"PKG",455,22,1,"PAH",1,1,0)
^^1^1^2990712
"PKG",455,22,1,"PAH",1,1,1,0)
This is the beta version of patch 13, vT1.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","HBHCAPPT")
0^2^B27732256
"RTN","HBHCAPPT",1,0)
HBHCAPPT ; LR VAMC(IRMS)/MJT-HBHC batch job to create ^HBHC(632) (visit) nodes from PCE module info => patient, appointment date/time, hospital location (clinic), provider, diagnosis code(s), & CPT code(s), calls ^HBHCCAN ;9803
"RTN","HBHCAPPT",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,10,12,13**;NOV 01, 1993
"RTN","HBHCAPPT",3,0)
 ; Daily auto-queued option, also called from ^HBHCFILE, HBHCLSDT, last date to include in transmit set up in ^HBHCFILE
"RTN","HBHCAPPT",4,0)
 D START^HBHCAPP1
"RTN","HBHCAPPT",5,0)
SCAN ; Scan
"RTN","HBHCAPPT",6,0)
 N HBHCQRY
"RTN","HBHCAPPT",7,0)
 D OPEN^SDQ(.HBHCQRY)
"RTN","HBHCAPPT",8,0)
 D INDEX^SDQ(.HBHCQRY,"DATE/TIME","SET")
"RTN","HBHCAPPT",9,0)
 D DATE^SDQ(.HBHCQRY,HBHCBGDT,HBHCLSDT,"SET")
"RTN","HBHCAPPT",10,0)
 D SCANCB^SDQ(.HBHCQRY,"D CB^HBHCAPPT(Y,Y0,.SDSTOP)","SET")
"RTN","HBHCAPPT",11,0)
 D ACTIVE^SDQ(.HBHCQRY,"TRUE","SET")
"RTN","HBHCAPPT",12,0)
 D SCAN^SDQ(.HBHCQRY,"FORWARD")
"RTN","HBHCAPPT",13,0)
 D CLOSE^SDQ(.HBHCQRY)
"RTN","HBHCAPPT",14,0)
 I ($D(^HBHC(634.1,"B")))!($D(^HBHC(634.2,"B")))!($D(^HBHC(634.3,"B")))!($D(^HBHC(634.5,"B"))) D MAIL^HBHCAPP1
"RTN","HBHCAPPT",15,0)
 ; Delete File Update in Progress Flag
"RTN","HBHCAPPT",16,0)
 S $P(^HBHC(631.9,1,0),U,8)=""
"RTN","HBHCAPPT",17,0)
EXIT ; Exit module
"RTN","HBHCAPPT",18,0)
 D EXIT^HBHCAPP1
"RTN","HBHCAPPT",19,0)
 Q
"RTN","HBHCAPPT",20,0)
CB(HBHCOEP,HBHCSCE0,HBHCSTOP) ;
"RTN","HBHCAPPT",21,0)
 ; Omit Child encounter, (child if Parent Encounter field contains data)
"RTN","HBHCAPPT",22,0)
 Q:$P(HBHCSCE0,U,6)]""
"RTN","HBHCAPPT",23,0)
 ; Quit if invalid status for HBHC purposes
"RTN","HBHCAPPT",24,0)
 Q:($P(HBHCSCE0,U,12)=4)!($P(HBHCSCE0,U,12)=5)!($P(HBHCSCE0,U,12)=6)!($P(HBHCSCE0,U,12)=7)!($P(HBHCSCE0,U,12)=9)!($P(HBHCSCE0,U,12)=10)!($P(HBHCSCE0,U,12)=11)!($P(HBHCSCE0,U,12)=13)
"RTN","HBHCAPPT",25,0)
 ; Clinic missing
"RTN","HBHCAPPT",26,0)
 Q:$P(HBHCSCE0,U,4)=""
"RTN","HBHCAPPT",27,0)
 ; Include only HBHC clinics
"RTN","HBHCAPPT",28,0)
 Q:'$D(^HBHC(631.6,"B",$P(HBHCSCE0,U,4)))
"RTN","HBHCAPPT",29,0)
 S HBHCCLN=$P(HBHCSCE0,U,4)
"RTN","HBHCAPPT",30,0)
 D VERIFY I 'HBHCFLG D PROCESS D:$D(HBHCMSG) ERROR^HBHCAPP1
"RTN","HBHCAPPT",31,0)
 Q
"RTN","HBHCAPPT",32,0)
VERIFY ; Verify node doesn't already exist in ^HBHC(632) file
"RTN","HBHCAPPT",33,0)
 S HBHCFLG=0,HBHCDPT=$P(HBHCSCE0,U,2),HBHCAPDT=$P(HBHCSCE0,U)
"RTN","HBHCAPPT",34,0)
 I HBHCDPT="" S HBHCFLG=1 Q
"RTN","HBHCAPPT",35,0)
 S HBHCBXRF=0 F  S HBHCBXRF=$O(^HBHC(632,"B",HBHCDPT,HBHCBXRF)) Q:(HBHCBXRF'>0)!(HBHCFLG)  S:(HBHCAPDT=$P(^HBHC(632,HBHCBXRF,0),U,2))&('$D(^HBHC(632,"AC","C",HBHCBXRF))) HBHCFLG=1
"RTN","HBHCAPPT",36,0)
 Q
"RTN","HBHCAPPT",37,0)
PROCESS ; Process provider, diagnosis (Dx) (limit: 5), & CPT code (limit: 10) data
"RTN","HBHCAPPT",38,0)
 ; Dx
"RTN","HBHCAPPT",39,0)
 K HBHCDXL
"RTN","HBHCAPPT",40,0)
 F HBHCI=1:1:5 S HBHCDX(HBHCI)="",HBHCCNT=1
"RTN","HBHCAPPT",41,0)
 D GETDX^SDOE(HBHCOEP,"HBHCDXL")
"RTN","HBHCAPPT",42,0)
 S HBHCDFN=0 F  S HBHCDFN=$O(HBHCDXL(HBHCDFN)) Q:(HBHCDFN'>0)!(HBHCCNT>5)  S:$P(HBHCDXL(HBHCDFN),U,12)="P" HBHCDX(1)=$P(HBHCDXL(HBHCDFN),U) S:$P(HBHCDXL(HBHCDFN),U,12)="S" HBHCCNT=HBHCCNT+1,HBHCDX(HBHCCNT)=$P(HBHCDXL(HBHCDFN),U)
"RTN","HBHCAPPT",43,0)
 ; Dx missing
"RTN","HBHCAPPT",44,0)
 I (+$G(HBHCDXL)'>0) S HBHCMSG=3 Q
"RTN","HBHCAPPT",45,0)
 ; Dx > 5
"RTN","HBHCAPPT",46,0)
 I (+$G(HBHCDXL)>5) S HBHCMSG=6 Q
"RTN","HBHCAPPT",47,0)
 ; provider, use Encounter Provider (field 1204, file 9000010.18) or V Provider (9000010.06) (if encounter provider doesn't exist), each provider within encounter will become a separate HBHC Visit record
"RTN","HBHCAPPT",48,0)
 K HBHCPRV1,HBHCPRVL
"RTN","HBHCAPPT",49,0)
 D GETPRV^SDOE(HBHCOEP,"HBHCPRVL")
"RTN","HBHCAPPT",50,0)
 S (HBHCPCNT,HBHCDFN,HBHCONE)=0 F  S HBHCDFN=$O(HBHCPRVL(HBHCDFN)) Q:HBHCDFN'>0  S HBHCPRV=$P(HBHCPRVL(HBHCDFN),U) D CHECK S:HBHCONE=1 HBHCPCNT=HBHCPCNT+1,HBHCPRV1(HBHCPRV)=""
"RTN","HBHCAPPT",51,0)
 ; Provider missing
"RTN","HBHCAPPT",52,0)
 I (+$G(HBHCPRVL)'>0) S HBHCMSG=2 Q
"RTN","HBHCAPPT",53,0)
 ; HBHC provider missing
"RTN","HBHCAPPT",54,0)
 I HBHCONE=0 S HBHCMSG=11 Q
"RTN","HBHCAPPT",55,0)
 ; Provider > 10
"RTN","HBHCAPPT",56,0)
 I (+$G(HBHCPRVL)>10) S HBHCMSG=10 Q
"RTN","HBHCAPPT",57,0)
 ; Multiple HBHC provider numbers
"RTN","HBHCAPPT",58,0)
 I HBHCONE>1 S HBHCMSG=12 Q
"RTN","HBHCAPPT",59,0)
 ; CPT Code 
"RTN","HBHCAPPT",60,0)
 K HBHCCPTL,HBHCPRV
"RTN","HBHCAPPT",61,0)
 D GETCPT^SDOE(HBHCOEP,"HBHCCPTL")
"RTN","HBHCAPPT",62,0)
 S (HBHCTOT,HBHCDFN,HBHCONE)=0
"RTN","HBHCAPPT",63,0)
 F  S HBHCDFN=$O(HBHCCPTL(HBHCDFN)) Q:(HBHCDFN'>0)!(HBHCTOT>10)!($D(HBHCMSG))  S HBHCPRV=$P($G(^AUPNVCPT(HBHCDFN,12)),U,4) D:HBHCPRV]"" CHECK S HBHCNBR=$P(HBHCCPTL(HBHCDFN),U,16),HBHCTOT=HBHCTOT+HBHCNBR D:HBHCTOT<11 PROV
"RTN","HBHCAPPT",64,0)
 ; Provider mismatch
"RTN","HBHCAPPT",65,0)
 Q:$D(HBHCMSG)
"RTN","HBHCAPPT",66,0)
 ; Provider ambiguous
"RTN","HBHCAPPT",67,0)
 I $D(HBHCPRV("ZZ")) S HBHCMSG=5 Q
"RTN","HBHCAPPT",68,0)
 ; CPT Code missing
"RTN","HBHCAPPT",69,0)
 I HBHCTOT=0 S HBHCMSG=4 Q
"RTN","HBHCAPPT",70,0)
 ; CPT Code > 10
"RTN","HBHCAPPT",71,0)
 I HBHCTOT>10 S HBHCMSG=7 Q
"RTN","HBHCAPPT",72,0)
 ; outpatient encounter must have 'checked-out' status (2) to ensure provider, Dx, & CPT data exist, or inpatient status (8)
"RTN","HBHCAPPT",73,0)
 I ($P(HBHCSCE0,U,12)'=2)&($P(HBHCSCE0,U,12)'=8) S HBHCMSG=1 Q
"RTN","HBHCAPPT",74,0)
SET ; Set node, call ^DIK to set cross-refs in ^HBHC(632) (visit) file
"RTN","HBHCAPPT",75,0)
 S HBHCPRV="" F  S HBHCPRV=$O(HBHCPRV(HBHCPRV)) Q:HBHCPRV=""  D SETLOOP
"RTN","HBHCAPPT",76,0)
 Q
"RTN","HBHCAPPT",77,0)
SETLOOP ; Set loop
"RTN","HBHCAPPT",78,0)
 S (HBHCINFO,HBHCCPT)="" F  S HBHCCPT=$O(HBHCPRV(HBHCPRV,HBHCCPT)) Q:HBHCCPT=""  S HBHCNBR="" F  S HBHCNBR=$O(HBHCPRV(HBHCPRV,HBHCCPT,HBHCNBR)) Q:HBHCNBR=""  S:HBHCINFO]"" HBHCINFO=HBHCINFO_U_HBHCCPT S:HBHCINFO="" HBHCINFO=HBHCCPT
"RTN","HBHCAPPT",79,0)
 S HBHC="" F  S HBHC=$O(^HBHC(631.4,"C",HBHCPRV,HBHC)) Q:(HBHC="")!('$D(^HBHC(631.4,"AC",1,HBHC)))
"RTN","HBHCAPPT",80,0)
 L +^HBHC(632,0) F  S HBHCDFN=$P(^HBHC(632,0),U,3)+1,$P(^HBHC(632,0),U,3)=HBHCDFN Q:'$D(^HBHC(632,HBHCDFN,0))
"RTN","HBHCAPPT",81,0)
 S $P(^HBHC(632,0),U,4)=$P(^HBHC(632,0),U,4)+1 L -^HBHC(632,0)
"RTN","HBHCAPPT",82,0)
 L +^HBHC(632,HBHCDFN,1) S ^HBHC(632,HBHCDFN,1)=HBHCINFO L -^HBHC(632,HBHCDFN,1)
"RTN","HBHCAPPT",83,0)
 L +^HBHC(632,HBHCDFN,0) S ^HBHC(632,HBHCDFN,0)=HBHCDPT_U_HBHCAPDT_U_HBHCCLN_U_HBHC_U_U_U_U_"N"_U_U_U_U_U_U_U_U_U_HBHCDX(1)_U_HBHCDX(2)_U_HBHCDX(3)_U_HBHCDX(4)_U_HBHCDX(5)_U_HBHCOEP L -^HBHC(632,HBHCDFN,0)
"RTN","HBHCAPPT",84,0)
 K DIK S DIK="^HBHC(632,",DA=HBHCDFN D IX^DIK K DIK
"RTN","HBHCAPPT",85,0)
 Q
"RTN","HBHCAPPT",86,0)
PROV ; encounter provider & CPT code processing
"RTN","HBHCAPPT",87,0)
 S:HBHCPCNT=1 HBHCTXT="",HBHCTXT=$O(HBHCPRV1(HBHCTXT))
"RTN","HBHCAPPT",88,0)
 F HBHCJ=1:1:HBHCNBR S:HBHCPRV="" HBHCPRV($S(HBHCPCNT=1:HBHCTXT,1:"ZZ"),$P(HBHCCPTL(HBHCDFN),U),HBHCJ)="" I HBHCPRV]"" S:(HBHCONE=1)&($D(HBHCPRV1(HBHCPRV))) HBHCPRV(HBHCPRV,$P(HBHCCPTL(HBHCDFN),U),HBHCJ)="" S:'$D(HBHCPRV1(HBHCPRV)) HBHCMSG=13
"RTN","HBHCAPPT",89,0)
 Q
"RTN","HBHCAPPT",90,0)
CHECK ; Check to ensure provider only has 1 HBHC Provider Number (631.4) or if > 1, has others flagged as Inactive Provider Numbers
"RTN","HBHCAPPT",91,0)
 S (HBHCONE,HBHCIEN)=0 F  S HBHCIEN=$O(^HBHC(631.4,"C",HBHCPRV,HBHCIEN)) Q:(HBHCIEN'>0)!(HBHCONE>1)  S:'$D(^HBHC(631.4,"AC",1,HBHCIEN)) HBHCONE=HBHCONE+1
"RTN","HBHCAPPT",92,0)
 Q
"RTN","HBHCR15A")
0^37^B16134175
"RTN","HBHCR15A",1,0)
HBHCR15A ;LR VAMC(IRMS)/MJT-HBHC rpt using file 634.6, user selects date/forms from last 12 transmit batchs, fields: form#, pat name, last 4, form date, + action on form 3, prov #, & prov name on visits, & Adm or D/C on form 6 ;2/5/98  15:23
"RTN","HBHCR15A",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,9,13**;NOV 01, 1993
"RTN","HBHCR15A",3,0)
 ; Calls HBHCR15B
"RTN","HBHCR15A",4,0)
 ; Report can also be generated by Transmit File option [HBHCXMT] if default printer is defined in sys param (631.9).  If no printer defined, no report.  User selects forms to include, date is transmit date
"RTN","HBHCR15A",5,0)
 ; HBHCXMT calls entry points:  PROMPT2^HBHCR15B & DQ^HBHCR15A
"RTN","HBHCR15A",6,0)
 I '$D(^HBHC(634.6,"C")) W *7,!,"No transmit history data on file." H 3 Q
"RTN","HBHCR15A",7,0)
 I $P(^HBHC(631.9,1,0),U,6)]"" W *7,!,"Transmission in progress; history data being updated.  Please try again later." H 3 Q
"RTN","HBHCR15A",8,0)
 D PROMPT1^HBHCR15B
"RTN","HBHCR15A",9,0)
 G:$D(DIRUT) EXIT
"RTN","HBHCR15A",10,0)
 S %ZIS="Q" D ^%ZIS G:POP EXIT
"RTN","HBHCR15A",11,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCR15A",ZTDESC="HBPC Transmit Report",ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCR15A",12,0)
DQ ; De-queue
"RTN","HBHCR15A",13,0)
 U IO
"RTN","HBHCR15A",14,0)
 S (HBHCPAGE,HBHCCNTA,HBHCCNTR,HBHCCNT4,HBHCCNT5,HBHCCNT6)=0,$P(HBHCY,"-",81)="",HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCR15A",15,0)
 S HBHCHDR=$S(HBHCDIR="S":"W ?36,""Summary""",1:"W ?33,""Last"",!?4,""#"",?9,""Patient Name"",?33,""Four"",?41,""Date""")
"RTN","HBHCR15A",16,0)
LOOP ; Loop thru HBHC(634.6,"C" (transmit date) cross-ref to build report
"RTN","HBHCR15A",17,0)
 S HBHCIEN=0 F  S HBHCIEN=$O(^HBHC(634.6,"C",HBHCXMDT,HBHCIEN)) Q:HBHCIEN'>0  S HBHCINFO=$P(^HBHC(634.6,HBHCIEN,0),U) D PROCESS
"RTN","HBHCR15A",18,0)
 D END^HBHCR15B
"RTN","HBHCR15A",19,0)
EXIT ; Exit module
"RTN","HBHCR15A",20,0)
 D ^%ZISC
"RTN","HBHCR15A",21,0)
 K DIR,DIRUT,HBHC,HBHCACTN,HBHCCC,HBHCCNTA,HBHCCNTR,HBHCCNT4,HBHCCNT5,HBHCCNT6,HBHCCOLM,HBHCDATE,HBHCDFN,HBHCDIR,HBHCDSDT,HBHCFLG,HBHCFORM,HBHCHEAD,HBHCHDR,HBHCI,HBHCIEN,HBHCINFO,HBHCIOP,HBHCLST4,HBHCNAME,HBHCPAGE,HBHCPIEN
"RTN","HBHCR15A",22,0)
 K HBHCPRV,HBHCPRVN,HBHCTDY,HBHCTYPE,HBHCXMDT,HBHCY,HBHCY0,HBHCZ,X,Y,TMP,^TMP("HBHC",$J)
"RTN","HBHCR15A",23,0)
 Q
"RTN","HBHCR15A",24,0)
PROCESS ; Process records
"RTN","HBHCR15A",25,0)
 S (HBHCACTN,HBHCPRV)="Z",(HBHCPRVN,HBHCTYPE)=""
"RTN","HBHCR15A",26,0)
 D:($E(HBHCINFO)=3)&((HBHCDIR=3)!(HBHCDIR="A")!(HBHCDIR="S")) FORM3
"RTN","HBHCR15A",27,0)
 D:($E(HBHCINFO)=4)&((HBHCDIR=4)!(HBHCDIR="A")!(HBHCDIR="S")) FORM4
"RTN","HBHCR15A",28,0)
 D:($E(HBHCINFO)=5)&((HBHCDIR=5)!(HBHCDIR="A")!(HBHCDIR="S")) FORM5
"RTN","HBHCR15A",29,0)
 D:($E(HBHCINFO)=6)&((HBHCDIR=6)!(HBHCDIR="A")!(HBHCDIR="S")) FORM6
"RTN","HBHCR15A",30,0)
 Q
"RTN","HBHCR15A",31,0)
FORM3 ; Process Form 3 (Admission) records
"RTN","HBHCR15A",32,0)
 S HBHCDATE=$E(HBHCINFO,18,25)
"RTN","HBHCR15A",33,0)
 S:$E(HBHCINFO,55)=1 HBHCCNTA=HBHCCNTA+1,HBHCACTN="Admit"
"RTN","HBHCR15A",34,0)
 S:$E(HBHCINFO,55)=2 HBHCCNTR=HBHCCNTR+1,HBHCACTN="Reject"
"RTN","HBHCR15A",35,0)
 Q:HBHCDIR="S"
"RTN","HBHCR15A",36,0)
 S HBHCFORM="A"
"RTN","HBHCR15A",37,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^DPT("SSN",$E(HBHCINFO,9,17),HBHCDFN)) Q:HBHCDFN=""  S HBHCNAME=$E($P(^DPT(HBHCDFN,0),U),1,20)
"RTN","HBHCR15A",38,0)
 S HBHCLST4=$E(HBHCINFO,14,17)
"RTN","HBHCR15A",39,0)
 D SET
"RTN","HBHCR15A",40,0)
 Q
"RTN","HBHCR15A",41,0)
FORM4 ; Process Form 4 (Visit) records
"RTN","HBHCR15A",42,0)
 S HBHCCNT4=HBHCCNT4+1
"RTN","HBHCR15A",43,0)
 Q:HBHCDIR="S"
"RTN","HBHCR15A",44,0)
 S HBHCFORM="V"
"RTN","HBHCR15A",45,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^DPT("SSN",$E(HBHCINFO,9,17),HBHCDFN)) Q:HBHCDFN=""  S HBHCNAME=$E($P(^DPT(HBHCDFN,0),U),1,20)
"RTN","HBHCR15A",46,0)
 S HBHCLST4=$E(HBHCINFO,14,17)
"RTN","HBHCR15A",47,0)
 S HBHCDATE=$E(HBHCINFO,18,25)
"RTN","HBHCR15A",48,0)
 S HBHCPRVN=+$E(HBHCINFO,30,33)
"RTN","HBHCR15A",49,0)
 S (HBHCFLG,HBHCPIEN)=0 F  S HBHCPIEN=$O(^HBHC(631.4,"B",HBHCPRVN,HBHCPIEN)) Q:HBHCPIEN'>0  D NAME
"RTN","HBHCR15A",50,0)
 D SET
"RTN","HBHCR15A",51,0)
 Q
"RTN","HBHCR15A",52,0)
NAME ; Form 4 Name
"RTN","HBHCR15A",53,0)
 I HBHCFLG=1 S HBHCPRV="**  Duplicate Prov #" Q
"RTN","HBHCR15A",54,0)
 S HBHCFLG=1,HBHCPRV=$E($P(^VA(200,$P(^HBHC(631.4,HBHCPIEN,0),U,2),0),U),1,20)
"RTN","HBHCR15A",55,0)
 Q
"RTN","HBHCR15A",56,0)
FORM5 ; Process Form 5 (Discharge) records
"RTN","HBHCR15A",57,0)
 S HBHCCNT5=HBHCCNT5+1
"RTN","HBHCR15A",58,0)
 Q:HBHCDIR="S"
"RTN","HBHCR15A",59,0)
 S HBHCFORM="D"
"RTN","HBHCR15A",60,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^DPT("SSN",$E(HBHCINFO,9,17),HBHCDFN)) Q:HBHCDFN=""  S HBHCNAME=$E($P(^DPT(HBHCDFN,0),U),1,20)
"RTN","HBHCR15A",61,0)
 S HBHCLST4=$E(HBHCINFO,14,17)
"RTN","HBHCR15A",62,0)
 S HBHCDATE=$E(HBHCINFO,18,25)
"RTN","HBHCR15A",63,0)
 D SET
"RTN","HBHCR15A",64,0)
 Q
"RTN","HBHCR15A",65,0)
FORM6 ; Process Form 6 (Correction) records
"RTN","HBHCR15A",66,0)
 S HBHCCNT6=HBHCCNT6+1
"RTN","HBHCR15A",67,0)
 Q:HBHCDIR="S"
"RTN","HBHCR15A",68,0)
 S HBHCFORM=6
"RTN","HBHCR15A",69,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^DPT("SSN",$E(HBHCINFO,9,17),HBHCDFN)) Q:HBHCDFN=""  S HBHCNAME=$E($P(^DPT(HBHCDFN,0),U),1,20)
"RTN","HBHCR15A",70,0)
 S HBHCLST4=$E(HBHCINFO,14,17)
"RTN","HBHCR15A",71,0)
 S HBHCDSDT=$TR($E(HBHCINFO,56,63)," ","")
"RTN","HBHCR15A",72,0)
 ; Use Discharge date if exists, otherwise use Admission date
"RTN","HBHCR15A",73,0)
 S HBHCDATE=$S(HBHCDSDT]"":HBHCDSDT,1:$E(HBHCINFO,18,25))
"RTN","HBHCR15A",74,0)
 S HBHCTYPE=$S(HBHCDSDT]"":"Discharge",1:"Evaluation/Admission")
"RTN","HBHCR15A",75,0)
 D SET
"RTN","HBHCR15A",76,0)
 Q
"RTN","HBHCR15A",77,0)
SET ; Set TMP node
"RTN","HBHCR15A",78,0)
 ; By design, records are processed/printed in the following order by form number:  6, 3 (A), 5 (D), 4 (V)
"RTN","HBHCR15A",79,0)
 S ^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4,HBHCDATE,HBHCPRV,HBHCIEN)=HBHCPRVN_U_HBHCTYPE
"RTN","HBHCR15A",80,0)
 Q
"RTN","HBHCR15B")
0^38^B27146557
"RTN","HBHCR15B",1,0)
HBHCR15B ;LR VAMC(IRMS)/MJT-HBHC rpt using file 634.6, called from HBHCR15A, entry points: PROMPT1 & END, & from HBHCXMT, entry point: PROMPT2 ;9804
"RTN","HBHCR15B",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,9,10,13**;NOV 01, 1993
"RTN","HBHCR15B",3,0)
PROMPT1 ; Prompt user for which transmit date from last 12 batchs to include, default is Most Recent; uses transmit date cross-ref to obtain batch dates 
"RTN","HBHCR15B",4,0)
 S HBHCDATE="" F  S HBHCDATE=$O(^HBHC(634.6,"C",HBHCDATE)) Q:HBHCDATE=""  S HBHC(-HBHCDATE)=""
"RTN","HBHCR15B",5,0)
 S HBHCDATE="" F HBHCI=1:1 S HBHCDATE=$O(HBHC(HBHCDATE)) Q:(HBHCDATE="")!(HBHCI>12)  S Y=$E(HBHCDATE,2,9) D DD^%DT S TMP(HBHCI)=$E(HBHCDATE,2,9) W !,$J(HBHCI,2),".",?6,Y
"RTN","HBHCR15B",6,0)
 W !
"RTN","HBHCR15B",7,0)
 K DIR,DIRUT
"RTN","HBHCR15B",8,0)
 S DIR(0)="N^",DIR("A")="Select Transmit Date",DIR("B")=1,DIR("?")="Select transmit date by number.  Press return for 'Most Recent' transmit date"
"RTN","HBHCR15B",9,0)
 D ^DIR Q:$D(DIRUT)
"RTN","HBHCR15B",10,0)
 I '$D(TMP(Y)) W *7,!!,"Please select number from list.",! H 1 G PROMPT1
"RTN","HBHCR15B",11,0)
 S HBHCXMDT=TMP(Y)
"RTN","HBHCR15B",12,0)
PROMPT2 ; Prompt user for which forms to include, default is Summary
"RTN","HBHCR15B",13,0)
 S HBHCCC=0
"RTN","HBHCR15B",14,0)
 D TODAY^HBHCUTL
"RTN","HBHCR15B",15,0)
 S:'$D(HBHCXMDT) HBHCXMDT=DT
"RTN","HBHCR15B",16,0)
 S:$P(^HBHC(631.9,1,0),U,7)]"" HBHCIOP=$P(^%ZIS(1,$P(^HBHC(631.9,1,0),U,7),0),U)
"RTN","HBHCR15B",17,0)
 K DIR,DIRUT
"RTN","HBHCR15B",18,0)
 S DIR(0)="S^3:Admission;4:Visit;5:Discharge;6:Correction;A:All;S:Summary;",DIR("A")="Select Forms to Include",DIR("B")="Summary",DIR("?")="Select form type to be included in report.  Press return for 'Summary'."
"RTN","HBHCR15B",19,0)
 D ^DIR Q:$D(DIRUT)
"RTN","HBHCR15B",20,0)
 S HBHCDIR=Y,HBHCY0=Y(0)
"RTN","HBHCR15B",21,0)
 S Y=HBHCXMDT D DD^%DT S HBHCHEAD=$S(HBHCDIR="S":Y_" Transmit, "_HBHCY0,1:Y_" Transmit, "_HBHCY0_" Forms,")
"RTN","HBHCR15B",22,0)
 Q
"RTN","HBHCR15B",23,0)
END ; End of report processing
"RTN","HBHCR15B",24,0)
 D:IO'=IO(0)!($D(IO("S"))) HDRPAGE^HBHCUTL
"RTN","HBHCR15B",25,0)
 I '$D(IO("S")),IO=IO(0) S HBHCCC=HBHCCC+1 W @IOF D HDRPAGE^HBHCUTL
"RTN","HBHCR15B",26,0)
 D:HBHCDIR'="S" PRTLOOP
"RTN","HBHCR15B",27,0)
 I HBHCDIR="A" S HBHCHDR="W ?36,""Summary""" W @IOF D HDRPAGE^HBHCUTL
"RTN","HBHCR15B",28,0)
 W:(HBHCDIR'="A")&(HBHCDIR'="S") !
"RTN","HBHCR15B",29,0)
 W:(HBHCDIR=3)!(HBHCDIR="A")!(HBHCDIR="S") !,"Admit Eval/Adm Form 3 Total:",?32,$J(HBHCCNTA,5),!,"Reject Eval/Adm Form 3 Total:",?32,$J(HBHCCNTR,5)
"RTN","HBHCR15B",30,0)
 W:HBHCDIR=3 !?32,"-----",!,"All Eval/Adm Forms Total:",?31,$J(HBHCCNTA+HBHCCNTR,6),!
"RTN","HBHCR15B",31,0)
 W:(HBHCDIR=4)!(HBHCDIR="A")!(HBHCDIR="S") !,"Visit Form 4 Total:",?32,$J(HBHCCNT4,5)
"RTN","HBHCR15B",32,0)
 W:(HBHCDIR=5)!(HBHCDIR="A")!(HBHCDIR="S") !,"Discharge Form 5 Total:",?32,$J(HBHCCNT5,5)
"RTN","HBHCR15B",33,0)
 W:(HBHCDIR=6)!(HBHCDIR="A")!(HBHCDIR="S") !,"Correction Form 6 Total:",?32,$J(HBHCCNT6,5)
"RTN","HBHCR15B",34,0)
 W:(HBHCDIR="A")!(HBHCDIR="S") !?32,"-----",!,"All Forms Total:",?31,$J(HBHCCNTA+HBHCCNTR+HBHCCNT4+HBHCCNT5+HBHCCNT6,6),!
"RTN","HBHCR15B",35,0)
 D ENDRPT^HBHCUTL1
"RTN","HBHCR15B",36,0)
 Q
"RTN","HBHCR15B",37,0)
PRTLOOP ; Print loop
"RTN","HBHCR15B",38,0)
 S HBHCFORM="" F  S HBHCFORM=$O(^TMP("HBHC",$J,HBHCFORM)) Q:HBHCFORM=""  D HEADER,PRTLOOP2,SUB
"RTN","HBHCR15B",39,0)
 Q
"RTN","HBHCR15B",40,0)
PRTLOOP2 ; Print loop continued
"RTN","HBHCR15B",41,0)
 S HBHCACTN="" F  S HBHCACTN=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN)) Q:HBHCACTN=""  S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME)) Q:HBHCNAME=""  D PRTLOOP3
"RTN","HBHCR15B",42,0)
 Q
"RTN","HBHCR15B",43,0)
PRTLOOP3 ; Print loop continued (again)
"RTN","HBHCR15B",44,0)
 S HBHCLST4=0 F  S HBHCLST4=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4)) Q:HBHCLST4'>0  S HBHCDATE="" F  S HBHCDATE=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4,HBHCDATE)) Q:HBHCDATE=""  D PRTLOOP4
"RTN","HBHCR15B",45,0)
 Q
"RTN","HBHCR15B",46,0)
PRTLOOP4 ; Print loop continued (again & again)
"RTN","HBHCR15B",47,0)
 S HBHCPRV="" F  S HBHCPRV=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4,HBHCDATE,HBHCPRV)) Q:HBHCPRV=""  S HBHCIEN="" F  S HBHCIEN=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4,HBHCDATE,HBHCPRV,HBHCIEN)) Q:HBHCIEN=""  D PRINT
"RTN","HBHCR15B",48,0)
 Q
"RTN","HBHCR15B",49,0)
PRINT ; Print report
"RTN","HBHCR15B",50,0)
 S HBHCINFO=^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4,HBHCDATE,HBHCPRV,HBHCIEN)
"RTN","HBHCR15B",51,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<10) W:HBHCPAGE>0 @IOF D HDRPAGE^HBHCUTL,HEADER
"RTN","HBHCR15B",52,0)
 W !?4,$S(HBHCFORM="A":3,HBHCFORM="V":4,HBHCFORM="D":5,1:6),?9,HBHCNAME,?33,HBHCLST4,?41,$E(HBHCDATE,1,2),"-",$E(HBHCDATE,3,4),"-",$E(HBHCDATE,7,8)
"RTN","HBHCR15B",53,0)
 W ?53,$S(HBHCFORM=6:$P(HBHCINFO,U,2),HBHCFORM="A":HBHCACTN,HBHCFORM="V":$P(HBHCINFO,U),1:"") W:HBHCFORM="V" ?60,HBHCPRV
"RTN","HBHCR15B",54,0)
 Q
"RTN","HBHCR15B",55,0)
SUB ; Sub-total module
"RTN","HBHCR15B",56,0)
 W:(HBHCDIR="A")&(HBHCFORM=6) !!?4,"Correction Form 6 Total:",?37,$J(HBHCCNT6,5),!,HBHCY
"RTN","HBHCR15B",57,0)
 W:(HBHCDIR="A")&(HBHCFORM="A") !!?4,"Admit Eval/Adm Form 3 Total:",?37,$J(HBHCCNTA,5),!?4,"Reject Eval/Adm Form 3 Total:",?37,$J(HBHCCNTR,5),!?37,"-----",!?4,"All Eval/Adm Forms Total:",?36,$J(HBHCCNTA+HBHCCNTR,6),!,HBHCY
"RTN","HBHCR15B",58,0)
 W:(HBHCDIR="A")&(HBHCFORM="D") !!?4,"Discharge Form 5 Total:",?37,$J(HBHCCNT5,5),!,HBHCY
"RTN","HBHCR15B",59,0)
 W:(HBHCDIR="A")&(HBHCFORM="V") !!?4,"Visit Form 4 Total:",?32,$J(HBHCCNT4,5),!,HBHCY
"RTN","HBHCR15B",60,0)
 Q
"RTN","HBHCR15B",61,0)
HEADER ; Sub-header module
"RTN","HBHCR15B",62,0)
 W !,$S(HBHCFORM=6:"Correction Form 6",HBHCFORM="A":"Evaluation/Admission Form 3",HBHCFORM="D":"Discharge Form 5",1:"Visit Form 4")_" Records",?53,$S(HBHCFORM=6:"Type",HBHCFORM="A":"Action",HBHCFORM="V":"Provider",1:""),!
"RTN","HBHCR15B",63,0)
 Q
"RTN","HBHCRP1A")
0^35^B15827577
"RTN","HBHCRP1A",1,0)
HBHCRP1A ; LR VAMC(IRMS)/MJT-HBHC report on files 634.1, 634.2, & 634.3, (Form 3/4/5 (A/V/D respectively) Error(s)), sorted by form, then by: clinic, date, patient & includes:  pt name, last 4, form, & corresponding date ;9803
"RTN","HBHCRP1A",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,10,13**;NOV 01, 1993
"RTN","HBHCRP1A",3,0)
 ; visits display current outpatient encounter file data, allowing easier re-entry when cleaning up PCE errors, includes:  Pt file IEN, error, provider, Dx, CPT code & clinic name, calls HBHCRP1B
"RTN","HBHCRP1A",4,0)
 I $P(^HBHC(631.9,1,0),U,8)]"" W *7,!,"File Update in progress.  Please try again later." H 3 Q
"RTN","HBHCRP1A",5,0)
 S %ZIS="Q",HBHCCC=0 K IOP,ZTIO,ZTSAVE D ^%ZIS Q:POP
"RTN","HBHCRP1A",6,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP1A",ZTSAVE("HBHC*")="",ZTDESC="HBPC Form Errors Report" D ^%ZTLOAD G EXIT
"RTN","HBHCRP1A",7,0)
DQ ; De-queue
"RTN","HBHCRP1A",8,0)
 U IO
"RTN","HBHCRP1A",9,0)
 D START^HBHCRP1B
"RTN","HBHCRP1A",10,0)
LOOP ; Loop thru files 634.1, 634.2 & 634.3 "B" cross-ref
"RTN","HBHCRP1A",11,0)
 F HBHCFILE=634.1,634.2,634.3 S HBHCDPT="" F  S HBHCDPT=$O(^HBHC(HBHCFILE,"B",HBHCDPT)) Q:HBHCDPT=""  D SETUP^HBHCRP1B S HBHCIEN="" F  S HBHCIEN=$O(^HBHC(HBHCFILE,"B",HBHCDPT,HBHCIEN)) Q:HBHCIEN=""  D PROCESS
"RTN","HBHCRP1A",12,0)
 D PRTLOOP^HBHCRP1B D:$D(^HBHC(634.5,"B")) PSEUDO^HBHCUTL3
"RTN","HBHCRP1A",13,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<12) W @IOF D HDRPAGE^HBHCUTL
"RTN","HBHCRP1A",14,0)
 D:$D(^HBHC(634.2,"B")) PCEMSG^HBHCUTL3 D ENDRPT^HBHCUTL1
"RTN","HBHCRP1A",15,0)
EXIT ; Exit module
"RTN","HBHCRP1A",16,0)
 D EXIT^HBHCRP1B
"RTN","HBHCRP1A",17,0)
 Q
"RTN","HBHCRP1A",18,0)
PROCESS ; Process report data
"RTN","HBHCRP1A",19,0)
 S HBHCDPT0=^DPT(HBHCDPT,0),HBHCNOD0=$S(HBHCFORM="V":$G(^HBHC(HBHCFL,HBHCIEN,0)),1:$G(^HBHC(HBHCFL,$P(^HBHC(HBHCFILE,HBHCIEN,0),U,2),0)))
"RTN","HBHCRP1A",20,0)
 ; Form 3: use Evaluation Date (field 1) if Date (field 17) null, 'reject' episodes prior to PCE patch will only have eval date
"RTN","HBHCRP1A",21,0)
 S (HBHCDAT,Y)=$P(HBHCNOD0,U,HBHCPC) S:(HBHCFORM="A")&(Y="") (HBHCDAT,Y)=$P(HBHCNOD0,U,2) D DD^%DT S HBHCDATE=$E(Y,1,18) S:HBHCDAT="" (HBHCDAT,HBHCDATE)="Missing"
"RTN","HBHCRP1A",22,0)
 S HBHCNAME=$E($P(HBHCDPT0,U),1,14),HBHCSSN=$E($P(HBHCDPT0,U,9),6,9)
"RTN","HBHCRP1A",23,0)
 S HBHCCLN="n/a" S:HBHCFORM="V" HBHCCLN=$S($P(HBHCNOD0,U,6)]"":$E($P(^SC($P(HBHCNOD0,U,6),0),U),1,18),1:"Unknown")
"RTN","HBHCRP1A",24,0)
 S HBHCMSG="" S:HBHCFORM="V" HBHCMSG=$S($P(HBHCNOD0,U,3)]"":$P(^HBHC(633.1,$P(HBHCNOD0,U,3),0),U),1:"")
"RTN","HBHCRP1A",25,0)
 I HBHCFORM="V" S HBHCOEP=$P(HBHCNOD0,U,4) D:HBHCOEP]"" OE
"RTN","HBHCRP1A",26,0)
 S ^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,1)="`"_HBHCDPT_U_HBHCDATE_U_HBHCMSG
"RTN","HBHCRP1A",27,0)
 Q
"RTN","HBHCRP1A",28,0)
OE ; Process Outpatient Encounter data
"RTN","HBHCRP1A",29,0)
 ; Provider, 2 pieces of info delimited by $ (Provider name & V PROVIDER  ^AUPNVPRV(9000010.06) DFN)
"RTN","HBHCRP1A",30,0)
 K HBHCPRV1,HBHCPRVL
"RTN","HBHCRP1A",31,0)
 D GETPRV^SDOE(HBHCOEP,"HBHCPRVL")
"RTN","HBHCRP1A",32,0)
 S HBHCDFN=0 F HBHCI=1:1 S HBHCDFN=$O(HBHCPRVL(HBHCDFN)) Q:HBHCDFN'>0  S HBHCPRVP=$P(HBHCPRVL(HBHCDFN),U),^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,2,HBHCI)=$S(HBHCPRVP]"":$P(^VA(200,HBHCPRVP,0),U)_"$"_HBHCPRVP,1:"")
"RTN","HBHCRP1A",33,0)
 ; Dx
"RTN","HBHCRP1A",34,0)
 K HBHCDXL
"RTN","HBHCRP1A",35,0)
 D GETDX^SDOE(HBHCOEP,"HBHCDXL")
"RTN","HBHCRP1A",36,0)
 S HBHCDFN=0 F HBHCI=1:1 S HBHCDFN=$O(HBHCDXL(HBHCDFN)) Q:HBHCDFN'>0  S HBHCINFO=HBHCDXL(HBHCDFN),HBHCICDP=$P(HBHCINFO,U),HBHCDX1=$S($P(HBHCINFO,U,12)="P":"* ",1:HBHCSP2) D ICD
"RTN","HBHCRP1A",37,0)
 ; CPT Code, 3 pieces of info delimited by $ (CPT Code w/Text, Quantity of CPT code & New Person file (200) DFN), must match V PROVIDER ^AUPNVPRV(9000010.06) DFN to ensure same provider
"RTN","HBHCRP1A",38,0)
 K HBHCCPTL,HBHCPRV
"RTN","HBHCRP1A",39,0)
 D GETCPT^SDOE(HBHCOEP,"HBHCCPTL")
"RTN","HBHCRP1A",40,0)
 S HBHCDFN=0 F HBHCI=1:1 S HBHCDFN=$O(HBHCCPTL(HBHCDFN)) Q:HBHCDFN'>0  S HBHCINFO=HBHCCPTL(HBHCDFN),HBHCCPT=$P(HBHCINFO,U) D CPT
"RTN","HBHCRP1A",41,0)
 Q
"RTN","HBHCRP1A",42,0)
ICD ; Dx info
"RTN","HBHCRP1A",43,0)
 S ^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,3,HBHCI)=HBHCDX1_$S(HBHCICDP]"":$P(^ICD9(HBHCICDP,0),U)_"  "_$P(^ICD9(HBHCICDP,0),U,3),1:"")_$S(HBHCDX1["*":"  *  Primary Dx",1:"")
"RTN","HBHCRP1A",44,0)
 Q
"RTN","HBHCRP1A",45,0)
CPT ; CPT info
"RTN","HBHCRP1A",46,0)
 S ^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,4,HBHCI)=$S(HBHCCPT]"":$P(^ICPT(HBHCCPT,0),U)_"  "_$P(^ICPT(HBHCCPT,0),U,2)_"$"_$P(HBHCINFO,U,16)_"$"_$S($P($G(^AUPNVCPT(HBHCDFN,12)),U,4)]"":$P(^AUPNVCPT(HBHCDFN,12),U,4),1:""),1:"")
"RTN","HBHCRP1A",47,0)
 Q
"RTN","HBHCRP21")
0^44^B50623061
"RTN","HBHCRP21",1,0)
HBHCRP21 ; LR VAMC(IRMS)/MJT-HBHC report on file 632, number of patient visits by date range, with total patients & total visits, user selectable alphabetical sort or by number of visits, number of visits has subtotals & summary ;9906
"RTN","HBHCRP21",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**13**;NOV 01, 1993
"RTN","HBHCRP21",3,0)
 D START^HBHCUTL
"RTN","HBHCRP21",4,0)
 G:(HBHCBEG1=-1)!(HBHCEND1=-1) EXIT
"RTN","HBHCRP21",5,0)
 W !,"Visits containing any of the following CPT Codes are omitted from report:"
"RTN","HBHCRP21",6,0)
 W !!?2,"99358  PROLONGED SERV, W/O CONTACT"
"RTN","HBHCRP21",7,0)
 W !?2,"99359  PROLONGED SERV, W/O CONTACT"
"RTN","HBHCRP21",8,0)
 W !?2,"99361  PHYSICIAN/TEAM CONFERENCE"
"RTN","HBHCRP21",9,0)
 W !?2,"99362  PHYSICIAN/TEAM CONFERENCE"
"RTN","HBHCRP21",10,0)
 W !?2,"99371  PHYSICIAN PHONE CONSULTATION"
"RTN","HBHCRP21",11,0)
 W !?2,"99372  PHYSICIAN PHONE CONSULTATION"
"RTN","HBHCRP21",12,0)
 W !?2,"99373  PHYSICIAN PHONE CONSULTATION"
"RTN","HBHCRP21",13,0)
 W !?2,"99374  HOME HEALTH CARE SUPERVISION"
"RTN","HBHCRP21",14,0)
 W !?2,"99375  HOME HEALTH CARE SUPERVISION"
"RTN","HBHCRP21",15,0)
 W !?2,"99376  CARE PLAN OVERSIGHT/OVER 60",!
"RTN","HBHCRP21",16,0)
PROMPT ; Prompt user for CPT code
"RTN","HBHCRP21",17,0)
 K DIR S DIR(0)="PO^81",DIR("A")="Enter any other CPT code you wish to omit",DIR("?")="Enter 5 digit CPT code you wish to omit from report." D ^DIR
"RTN","HBHCRP21",18,0)
 G:$D(DTOUT) EXIT I '$D(DUOUT) I X'="" S HBHCCPTL(X)="" G PROMPT
"RTN","HBHCRP21",19,0)
 W !
"RTN","HBHCRP21",20,0)
 ; Prompt user for sort preference
"RTN","HBHCRP21",21,0)
 K DIR S DIR(0)="SM^A:Alphabetical;V:Number of Visits",DIR("A")="Sort Preference",DIR("B")="V",DIR("?")="Sort report alphabetically by patient (A), or by number of visits (V).  Visit sort includes subtotals & summary." D ^DIR
"RTN","HBHCRP21",22,0)
 G:$D(DIRUT) EXIT
"RTN","HBHCRP21",23,0)
 ; HBHCFLG exists if visit sort selected
"RTN","HBHCRP21",24,0)
 S:X="V" HBHCFLG=1
"RTN","HBHCRP21",25,0)
 S %ZIS="Q",HBHCCC=0 K IOP,ZTIO,ZTSAVE D ^%ZIS G:POP EXIT
"RTN","HBHCRP21",26,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP21",ZTDESC=$S($D(HBHCFLG):"HBPC Total Visits by Date Range Report,Visit Sort",1:"HBPC Total Visits by Date Range Report"),ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCRP21",27,0)
DQ ; De-queue
"RTN","HBHCRP21",28,0)
 ; CPT codes omitted from inclusion on report
"RTN","HBHCRP21",29,0)
 S HBHCCPTL(99358)="",HBHCCPTL(99359)="",HBHCCPTL(99361)="",HBHCCPTL(99362)="",HBHCCPTL(99371)="",HBHCCPTL(99372)="",HBHCCPTL(99373)="",HBHCCPTL(99374)="",HBHCCPTL(99375)="",HBHCCPTL(99376)=""
"RTN","HBHCRP21",30,0)
 U IO
"RTN","HBHCRP21",31,0)
 K ^TMP("HBHC",$J)
"RTN","HBHCRP21",32,0)
 S $P(HBHCY,"-",81)="",$P(HBHCZ,"=",81)="",(HBHCCNT,HBHCCNT1,HBHCTOT)=0
"RTN","HBHCRP21",33,0)
 S HBHCHEAD=$S($D(HBHCFLG):"Total Visits by Date Range, Visit Sort",1:"Total Visits by Date Range")
"RTN","HBHCRP21",34,0)
 S HBHCHDR="W !?31,""Last"",?40,""Visit"",?68,""Discharge"",!,""Patient Name"",?31,""Four"",?40,""Total"",?50,""Date"",?68,""Date""",HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCRP21",35,0)
LOOP ; Loop thru ^HBHC(632) "C" (appointment date) cross-ref to build report
"RTN","HBHCRP21",36,0)
 S X1=HBHCBEG1,X2=-1 D C^%DTC S HBHCAPDT=X_.9999,HBHCEND1=HBHCEND1_.9999
"RTN","HBHCRP21",37,0)
 F  S HBHCAPDT=$O(^HBHC(632,"C",HBHCAPDT)) Q:(HBHCAPDT="")!(HBHCAPDT>HBHCEND1)  S HBHCIEN="" F  S HBHCIEN=$O(^HBHC(632,"C",HBHCAPDT,HBHCIEN)) Q:HBHCIEN=""  S HBHCNOD0=^HBHC(632,HBHCIEN,0) D:$P(HBHCNOD0,U,7)="" PROCESS
"RTN","HBHCRP21",38,0)
 D TODAY^HBHCUTL D:IO'=IO(0)!($D(IO("S"))) HDRRANGE^HBHCUTL
"RTN","HBHCRP21",39,0)
 I '$D(IO("S")),(IO=IO(0)) S HBHCCC=HBHCCC+1 D HDRRANGE^HBHCUTL
"RTN","HBHCRP21",40,0)
 W:'$D(^TMP("HBHC",$J)) !!,"No Visits found for Date Range selected."
"RTN","HBHCRP21",41,0)
 I $D(^TMP("HBHC",$J)) W !!,"Visits containing any of the following CPT Codes are omitted from report:",! S HBHCCPT="" F  S HBHCCPT=$O(HBHCCPTL(HBHCCPT)) Q:HBHCCPT=""  S HBHC=^ICPT(HBHCCPT,0) W !?2,$P(HBHC,U)_"  "_$P(HBHC,U,2)
"RTN","HBHCRP21",42,0)
 I $D(^TMP("HBHC",$J)) W !!,HBHCY D:$D(HBHCFLG) SORT,PRTLOOP,SUMMARY I '$D(HBHCFLG) D APRTLOOP W !!,"Total Patients:  ",$J(HBHCCNT,4),!!,"Total Visits:  ",$J(HBHCTOT,6)
"RTN","HBHCRP21",43,0)
 D ENDRPT^HBHCUTL1
"RTN","HBHCRP21",44,0)
EXIT ; Exit module
"RTN","HBHCRP21",45,0)
 D ^%ZISC
"RTN","HBHCRP21",46,0)
 K DIR,HBHC,HBHCADDT,HBHCAPDT,HBHCBEG1,HBHCBEG2,HBHCCC,HBHCCNT,HBHCCNT1,HBHCCOLM,HBHCCPT,HBHCCPTL,HBHCDFN,HBHCDPT0,HBHCDSDT,HBHCEND1,HBHCEND2,HBHCFLAG,HBHCFLG,HBHCHEAD,HBHCHDR,HBHCI,HBHCIEN,HBHCINFO,HBHCNAME,HBHCNBR,HBHCNOD0
"RTN","HBHCRP21",47,0)
 K HBHCNOD1,HBHCPAGE,HBHCLST4,HBHCTDY,HBHCTOT,HBHCY,HBHCZ,X,X1,X2,Y,^TMP("HBHC",$J)
"RTN","HBHCRP21",48,0)
 Q
"RTN","HBHCRP21",49,0)
PROCESS ; Process record & build ^TMP("HBHC",$J) global
"RTN","HBHCRP21",50,0)
 ; Quit if no CPT codes
"RTN","HBHCRP21",51,0)
 S HBHCNOD1=$G(^HBHC(632,HBHCIEN,1)) Q:HBHCNOD1=""
"RTN","HBHCRP21",52,0)
 ; Quit if contains CPT code to be omitted
"RTN","HBHCRP21",53,0)
 K HBHCFLAG
"RTN","HBHCRP21",54,0)
 S HBHCCPT="" F HBHCI=1:1  S HBHCCPT=$P(HBHCNOD1,U,HBHCI) Q:HBHCCPT=""  S:$D(HBHCCPTL(HBHCCPT)) HBHCFLAG=1
"RTN","HBHCRP21",55,0)
 Q:$D(HBHCFLAG)
"RTN","HBHCRP21",56,0)
 S HBHCDPT0=^DPT($P(HBHCNOD0,U),0),HBHCNAME=$P(HBHCDPT0,U),HBHCLST4=$E($P(HBHCDPT0,U,9),1,3)_"-"_$E($P(HBHCDPT0,U,9),4,5)_"-"_$E($P(HBHCDPT0,U,9),6,9)
"RTN","HBHCRP21",57,0)
 S (HBHCADDT,HBHCDSDT)=""
"RTN","HBHCRP21",58,0)
 S HBHCDFN=0 F  S HBHCDFN=$O(^HBHC(631,"B",$P(HBHCNOD0,U),HBHCDFN)) Q:HBHCDFN'>0  S HBHCINFO=^HBHC(631,HBHCDFN,0),HBHCADDT=$P(HBHCINFO,U,18),HBHCDSDT=$P(HBHCINFO,U,40)
"RTN","HBHCRP21",59,0)
 ; patient not in HBHC(631
"RTN","HBHCRP21",60,0)
 S:HBHCADDT="" HBHCADDT="n/a"
"RTN","HBHCRP21",61,0)
 S:HBHCDSDT="" HBHCDSDT="n/a"
"RTN","HBHCRP21",62,0)
 I $D(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) S ^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)=^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)+1
"RTN","HBHCRP21",63,0)
 S:'$D(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) ^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)=1
"RTN","HBHCRP21",64,0)
 Q
"RTN","HBHCRP21",65,0)
SORT ; Sort TMP according to number of visits
"RTN","HBHCRP21",66,0)
 S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCNAME)) Q:HBHCNAME=""  S HBHCLST4="" F  S HBHCLST4=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4)) Q:HBHCLST4=""  D SORTLOOP
"RTN","HBHCRP21",67,0)
 Q
"RTN","HBHCRP21",68,0)
SORTLOOP ; Sort loop
"RTN","HBHCRP21",69,0)
 S HBHCADDT="" F  S HBHCADDT=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT)) Q:HBHCADDT=""  S HBHCDSDT="" F  S HBHCDSDT=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) Q:HBHCDSDT=""  D SET
"RTN","HBHCRP21",70,0)
 Q
"RTN","HBHCRP21",71,0)
SET ; Set TMP in re-sorted order by number of visits, kill old TMP node
"RTN","HBHCRP21",72,0)
 S HBHCNBR=^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)
"RTN","HBHCRP21",73,0)
 S ^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)=HBHCNBR
"RTN","HBHCRP21",74,0)
 K ^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)
"RTN","HBHCRP21",75,0)
 Q
"RTN","HBHCRP21",76,0)
PRTLOOP ; Print loop
"RTN","HBHCRP21",77,0)
 S HBHCNBR="" F  S HBHCNBR=$O(^TMP("HBHC",$J,HBHCNBR)) Q:HBHCNBR=""  D PRTLOOP2 W:HBHCCNT1>0 !!?5,"Total Patients with ",HBHCNBR," Visit(s):  ",HBHCCNT1,!!,HBHCY S HBHC(HBHCNBR)=HBHCCNT1,HBHCCNT1=0
"RTN","HBHCRP21",78,0)
 Q
"RTN","HBHCRP21",79,0)
PRTLOOP2 ; Print loop continued
"RTN","HBHCRP21",80,0)
 S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCNBR,HBHCNAME)) Q:HBHCNAME=""  S HBHCLST4="" F  S HBHCLST4=$O(^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4)) Q:HBHCLST4=""  D PRTLOOP3
"RTN","HBHCRP21",81,0)
 Q
"RTN","HBHCRP21",82,0)
PRTLOOP3 ; Print loop continued again
"RTN","HBHCRP21",83,0)
 S HBHCADDT="" F  S HBHCADDT=$O(^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4,HBHCADDT)) Q:HBHCADDT=""  S HBHCDSDT="" F  S HBHCDSDT=$O(^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) Q:HBHCDSDT=""  D PRINT
"RTN","HBHCRP21",84,0)
 Q
"RTN","HBHCRP21",85,0)
APRTLOOP ; Print loop for alphabetic sort
"RTN","HBHCRP21",86,0)
 S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCNAME)) Q:HBHCNAME=""  S HBHCLST4="" F  S HBHCLST4=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4)) Q:HBHCLST4=""  D APRTLP2
"RTN","HBHCRP21",87,0)
 Q
"RTN","HBHCRP21",88,0)
APRTLP2 ; Print loop for alphabetic sort continued
"RTN","HBHCRP21",89,0)
 S HBHCADDT="" F  S HBHCADDT=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT)) Q:HBHCADDT=""  S HBHCDSDT="" F  S HBHCDSDT=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) Q:HBHCDSDT=""  D PRINT
"RTN","HBHCRP21",90,0)
 Q
"RTN","HBHCRP21",91,0)
PRINT ; Print report
"RTN","HBHCRP21",92,0)
 S HBHCCNT=HBHCCNT+1
"RTN","HBHCRP21",93,0)
 S:$D(HBHCFLG) HBHCINFO=^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT),HBHCCNT1=HBHCCNT1+1
"RTN","HBHCRP21",94,0)
 S:'$D(HBHCFLG) HBHCINFO=^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)
"RTN","HBHCRP21",95,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<7) W @IOF D HDRRANGE^HBHCUTL
"RTN","HBHCRP21",96,0)
 S HBHCTOT=HBHCTOT+($P(HBHCINFO,U))
"RTN","HBHCRP21",97,0)
 W !,$E(HBHCNAME,1,25),?31,$E(HBHCLST4,8,11),?41,$J($P(HBHCINFO,U),3)
"RTN","HBHCRP21",98,0)
 S Y=HBHCADDT D DD^%DT W ?50,Y
"RTN","HBHCRP21",99,0)
 S Y=HBHCDSDT D DD^%DT W ?68,$S(Y'="n/a":Y,1:"")
"RTN","HBHCRP21",100,0)
 W !,HBHCY
"RTN","HBHCRP21",101,0)
 Q
"RTN","HBHCRP21",102,0)
SUMMARY ; Print report summary
"RTN","HBHCRP21",103,0)
 W @IOF,HBHCZ,!?22,"******  Total Visits Summary  ******",!,HBHCZ,!
"RTN","HBHCRP21",104,0)
 S HBHCNBR=0 F  S HBHCNBR=$O(HBHC(HBHCNBR)) Q:HBHCNBR'>0  W !,"Total Patients with ",$J(HBHCNBR,3)," Visit(s):  ",$J(HBHC(HBHCNBR),4)
"RTN","HBHCRP21",105,0)
 W !?34,"------",!,"Total Patients:  ",?35,$J(HBHCCNT,4),!!,"Total Visits:  ",?33,$J(HBHCTOT,6)
"RTN","HBHCRP21",106,0)
 Q
"RTN","HBHCXMD")
0^43^B22377559
"RTN","HBHCXMD",1,0)
HBHCXMD ; LR VAMC(IRMS)/MJT-HBHC populate ^HBHC(634) with Discharge Data or ^HBHC(634.3), file of records in ^HBHC(631) containing missing/erroneous data, called by ^HBHCFILE, calls ^HBHCXMD1 ;9804
"RTN","HBHCXMD",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**4,6,9,10,13**;NOV 01, 1993
"RTN","HBHCXMD",3,0)
 D START^HBHCXMD1
"RTN","HBHCXMD",4,0)
LOOP ; Loop thru ^HBHC(631) "AF","N" cross-ref to create nodes in ^HBHC(634) => transmit or ^HBHC(634.3) => Discharge Error(s) file
"RTN","HBHCXMD",5,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(631,"AF","N",HBHCDFN)) Q:HBHCDFN=""  S HBHCFLG=1,HBHCCONT=0 D SETNODE I HBHCFLG D:HBHCCONT TRANS D:'HBHCCONT ERROR
"RTN","HBHCXMD",6,0)
EXIT ; Exit module
"RTN","HBHCXMD",7,0)
 D EXIT^HBHCXMD1
"RTN","HBHCXMD",8,0)
 Q
"RTN","HBHCXMD",9,0)
SETNODE ; Set node in ^HBHC(634) (Transmit) or ^HBHC(634.3) (Discharge Error(s))
"RTN","HBHCXMD",10,0)
 S HBHCNOD0=^HBHC(631,HBHCDFN,0),HBHCNOD1=$G(^HBHC(631,HBHCDFN,1)),HBHCXMT5=$P(HBHCNOD1,U,18)
"RTN","HBHCXMD",11,0)
 ; Quit if discharge date is greater than HBHCLSDT (last date to include in transmit set up in ^HBHCFILE)
"RTN","HBHCXMD",12,0)
 I $P(HBHCNOD0,U,40)>HBHCLSDT S HBHCFLG=0 Q
"RTN","HBHCXMD",13,0)
 S (HBHCDR1,HBHCDR2,HBHCDR3,HBHCDR4,HBHCDR5)=""
"RTN","HBHCXMD",14,0)
 S HBHCTFLG=0 S:($P(HBHCNOD0,U,45)]"")!($P(HBHCNOD0,U,46)]"") HBHCTFLG=1
"RTN","HBHCXMD",15,0)
 S HBHCDFLG=0 F HBHCL=47:1:55 Q:HBHCDFLG  S:$P(HBHCNOD0,U,HBHCL)]"" HBHCDFLG=1
"RTN","HBHCXMD",16,0)
 I HBHCNOD1]"" F HBHCM=1:1:10 Q:HBHCDFLG  S:$P(HBHCNOD1,U,HBHCM)]"" HBHCDFLG=1
"RTN","HBHCXMD",17,0)
 S HBHCADDT=$S($P(HBHCNOD0,U,18)]"":$E($P(HBHCNOD0,U,18),4,5)_$E($P(HBHCNOD0,U,18),6,7)_(1700+$E($P(HBHCNOD0,U,18),1,3)),$P(HBHCNOD0,U,2)]"":$E($P(HBHCNOD0,U,2),4,5)_$E($P(HBHCNOD0,U,2),6,7)_(1700+$E($P(HBHCNOD0,U,2),1,3)),1:"")
"RTN","HBHCXMD",18,0)
 S HBHCDSDT=$S($P(HBHCNOD0,U,40)]"":$E($P(HBHCNOD0,U,40),4,5)_$E($P(HBHCNOD0,U,40),6,7)_(1700+$E($P(HBHCNOD0,U,40),1,3)),1:"")
"RTN","HBHCXMD",19,0)
 K HBHCDDTA F HBHCI=1:1:4 S HBHCFLD=$P(HBHCFLD1,U,HBHCI) S:HBHCFLD]"" HBHCDDTA=1 S @HBHCFLD=$S($P(HBHCNOD0,U,HBHCI+40)]"":$P(HBHCNOD0,U,HBHCI+40),1:"") D:@HBHCFLD="" DFLT1^HBHCXMD1
"RTN","HBHCXMD",20,0)
 S:((HBHCDSDT="")&((HBHCDFLG=1)!(HBHCTFLG=1)!($D(HBHCDDTA)))) HBHCDR1="39;"_HBHCDR1
"RTN","HBHCXMD",21,0)
 Q:HBHCSTAT=""
"RTN","HBHCXMD",22,0)
 I HBHCSTAT=4 I (HBHCDFLG)!(HBHCTFLG) S HBHCDR1=HBHCDR1_"43;" Q
"RTN","HBHCXMD",23,0)
 I (HBHC359[(U_HBHCSTAT_U))&(HBHCTFLG) S HBHCDR1=HBHCDR1_"43;" Q
"RTN","HBHCXMD",24,0)
 I HBHCNOD1]"" I ($P(HBHCNOD1,U,15)]"")&(HBHCSTAT'=4) S HBHCDR1=HBHCDR1_"43;" Q
"RTN","HBHCXMD",25,0)
 S HBHCDEST=$S($P(HBHCNOD0,U,45)]"":$P(HBHCNOD0,U,45),1:HBHCSP1) S:(HBHC12[(U_HBHCSTAT_U))&(HBHCDEST=HBHCSP1) HBHCDR1=HBHCDR1_"44;"
"RTN","HBHCXMD",26,0)
 S HBHCAGCY=$S($P(HBHCNOD0,U,46)]"":$P(HBHCNOD0,U,46),1:HBHCSP1) S:(HBHC12[(U_HBHCSTAT_U))&(HBHCAGCY=HBHCSP1) HBHCDR1=HBHCDR1_"45;"
"RTN","HBHCXMD",27,0)
 S HBHCICDD=$S($P(HBHCNOD0,U,47)]"":$P($P(^ICD9($P(HBHCNOD0,U,47),0),U),".")_$P($P(^ICD9($P(HBHCNOD0,U,47),0),U),".",2),1:HBHCSP6) S:$L(HBHCICDD)<6 HBHCICDD=HBHCICDD_$J("",6-$L(HBHCICDD)) D:(HBHCSTAT'=4)&(HBHCICDD=HBHCSP6) ICDDFLT^HBHCXMD1
"RTN","HBHCXMD",28,0)
 F HBHCJ=1:1:8 S HBHCFLD=$P(HBHCFLD2,U,HBHCJ) S @HBHCFLD=$S($P(HBHCNOD0,U,HBHCJ+47)]"":$P(HBHCNOD0,U,HBHCJ+47),1:HBHCSP1) D:(HBHCSTAT'=4)&(@HBHCFLD=HBHCSP1) DFLT2^HBHCXMD1
"RTN","HBHCXMD",29,0)
 F HBHCK=1:1:10 S HBHCFLD=$P(HBHCFLD3,U,HBHCK) S @HBHCFLD=$S($P(HBHCNOD1,U,HBHCK)]"":$P(HBHCNOD1,U,HBHCK),1:HBHCSP1) D:(HBHCSTAT'=4)&(@HBHCFLD=HBHCSP1) DFLT3^HBHCXMD1
"RTN","HBHCXMD",30,0)
 Q:(HBHCADDT="")!(HBHCDR1]"")!(HBHCDR2]"")!(HBHCDR3]"")!(HBHCDR4]"")!(HBHCDR5]"")
"RTN","HBHCXMD",31,0)
 S HBHCCONT=1
"RTN","HBHCXMD",32,0)
 S HBHCNAME=$E($P(^DPT($P(HBHCNOD0,U),0),U),1,5) S:$L(HBHCNAME)<HBHCLNTH HBHCNAME=HBHCNAME_$J("",HBHCLNTH-$L(HBHCNAME))
"RTN","HBHCXMD",33,0)
 S HBHCSSN=$P(^DPT($P(HBHCNOD0,U),0),U,9)
"RTN","HBHCXMD",34,0)
 S HBHCREC=HBHCFORM_HBHCHOSP_HBHCSSN_HBHCDSDT_HBHCELGD_HBHCMARD_HBHCLIVD_HBHCSTAT_HBHCDEST_HBHCAGCY_HBHCADDT_HBHCNAME_HBHCICDD_HBHCVISD_HBHCHERD_HBHCEXCD_HBHCRECD_HBHCBTHD_HBHCDRSD_HBHCTLTD_HBHCTRND_HBHCEATD_HBHCWLKD_HBHCBWLD_HBHCBLDD
"RTN","HBHCXMD",35,0)
 S HBHCREC=HBHCREC_HBHCMOBD_HBHCADTD_HBHCBHVD_HBHCDSOD_HBHCMODD_HBHCLMTD_HBHCSP61
"RTN","HBHCXMD",36,0)
 Q
"RTN","HBHCXMD",37,0)
TRANS ; Set node in ^HBHC(634) transmit file & flag record as 'F" (filed for transmit) in ^HBHC(631)
"RTN","HBHCXMD",38,0)
 L +^HBHC(634,0) S HBHCNDX1=$P(^HBHC(634,0),U,3)+1,$P(^HBHC(634,0),U,3)=HBHCNDX1,$P(^HBHC(634,0),U,4)=$P(^HBHC(634,0),U,4)+1 L -^HBHC(634,0)
"RTN","HBHCXMD",39,0)
 S $P(^HBHC(634,HBHCNDX1,0),U)=HBHCREC,^HBHC(634,"B",$E(HBHCREC,1,30),HBHCNDX1)=""
"RTN","HBHCXMD",40,0)
 L +^HBHC(631,HBHCDFN,1) K:HBHCXMT5]"" ^HBHC(631,"AF",HBHCXMT5,HBHCDFN) S $P(^HBHC(631,HBHCDFN,1),U,18)="F",^HBHC(631,"AF","F",HBHCDFN)="",$P(^HBHC(631,HBHCDFN,1),U,22)=HBHCTDY L -^HBHC(631,HBHCDFN,1)
"RTN","HBHCXMD",41,0)
 Q
"RTN","HBHCXMD",42,0)
ERROR ; Set node in ^HBHC(634.3) if data is incomplete or proper fields invalid for 'Discharge Status'
"RTN","HBHCXMD",43,0)
 L +^HBHC(634.3,0) S HBHCNDX2=$P(^HBHC(634.3,0),U,3)+1,$P(^HBHC(634.3,0),U,3)=HBHCNDX2,$P(^HBHC(634.3,0),U,4)=$P(^HBHC(634.3,0),U,4)+1 L -^HBHC(634.3,0)
"RTN","HBHCXMD",44,0)
 S ^HBHC(634.3,HBHCNDX2,0)=$P(HBHCNOD0,U)_U_HBHCDFN
"RTN","HBHCXMD",45,0)
 S:HBHCDR1]"" ^HBHC(634.3,HBHCNDX2,1)=HBHCDR1
"RTN","HBHCXMD",46,0)
 S:HBHCDR2]"" ^HBHC(634.3,HBHCNDX2,2)=HBHCDR2
"RTN","HBHCXMD",47,0)
 S:HBHCDR3]"" ^HBHC(634.3,HBHCNDX2,3)=HBHCDR3
"RTN","HBHCXMD",48,0)
 S:HBHCDR4]"" ^HBHC(634.3,HBHCNDX2,4)=HBHCDR4
"RTN","HBHCXMD",49,0)
 S:HBHCDR5]"" ^HBHC(634.3,HBHCNDX2,5)=HBHCDR5
"RTN","HBHCXMD",50,0)
 S ^HBHC(634.3,"B",$P(HBHCNOD0,U),HBHCNDX2)=""
"RTN","HBHCXMD",51,0)
 Q
"RTN","HBHCXMT")
0^32^B16834536
"RTN","HBHCXMT",1,0)
HBHCXMT ; LR VAMC(IRMS)/MJT-HBHC create mail msgs (100 recs/125 char ea, max) from HBHC(634 file, transmit/Austin, set batch initial MM msg # & MM msg date in HBHC(631/632, set Last MM Date in HBHC(631.9, optionally prt rpt ;9803
"RTN","HBHCXMT",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**2,3,6,8,10,13**;NOV 01, 1993
"RTN","HBHCXMT",3,0)
 I $P(^HBHC(631.9,1,0),U,8)]"" W *7,!,"File Update in progress.  Please try again later." H 3 Q 
"RTN","HBHCXMT",4,0)
 I ($D(^HBHC(634.1,"B")))!($D(^HBHC(634.2,"B")))!($D(^HBHC(634.3,"B")))!($D(^HBHC(634.5,"B"))) W *7,!!,"Records containing errors exist and must be corrected before file can",!,"be transmitted.",!! H 3 Q
"RTN","HBHCXMT",5,0)
 I '$D(^HBHC(634,"B")) W *7,!!,"No data on file to transmit." H 3 Q
"RTN","HBHCXMT",6,0)
 I ('$D(^HBHC(631,"AE","F")))&('$D(^HBHC(631,"AF","F")))&('$D(^HBHC(632,"AC","F")))!($P(^HBHC(631.9,1,0),U,6)]"") W *7,!!,"Data on file has been transmitted to Austin; duplicate transmission not allowed." H 3 Q
"RTN","HBHCXMT",7,0)
 I $P(^HBHC(631.9,1,0),U,7)]"" S HBHCPRTR=$P($G(^%ZIS(1,$P(^HBHC(631.9,1,0),U,7),0)),U) I HBHCPRTR]"" W "Transmit Report will be printed on device:  ",HBHCPRTR W "." D PROMPT2^HBHCR15B
"RTN","HBHCXMT",8,0)
 S ZTRTN="DQ^HBHCXMT",ZTIO="",ZTDTH=$H,ZTDESC="HBPC Transmission",ZTSAVE("HBHC*")="" D ^%ZTLOAD,^%ZISC
"RTN","HBHCXMT",9,0)
 W *7,!!,"Transmission request has been queued.  Task number:  ",ZTSK,!! H 3
"RTN","HBHCXMT",10,0)
 G EXIT
"RTN","HBHCXMT",11,0)
DQ ; De-queue
"RTN","HBHCXMT",12,0)
 ; Kill task node to prevent possibility of duplicate transmission
"RTN","HBHCXMT",13,0)
 K ^%ZTSK(ZTSK)
"RTN","HBHCXMT",14,0)
 ; Set Transmission in Progress Flag
"RTN","HBHCXMT",15,0)
 S $P(^HBHC(631.9,1,0),U,6)=1
"RTN","HBHCXMT",16,0)
 K XMZ,%DT,^TMP("HBHC",$J)
"RTN","HBHCXMT",17,0)
 S X="T" D ^%DT S HBHCDT=Y,HBHCDATE=$E(HBHCDT,4,5)_"/"_$E(HBHCDT,6,7)_"/"_$E(HBHCDT,2,3)
"RTN","HBHCXMT",18,0)
 S (HBHCCNT,HBHCFLG,HBHCNODE)=0,HBHCMSG=1
"RTN","HBHCXMT",19,0)
 F  S HBHCNODE=$O(^HBHC(634,HBHCNODE)) D:(HBHCCNT>99)!(HBHCNODE'>0) MAIL Q:HBHCNODE'>0  S HBHCCNT=HBHCCNT+1,HBHCINFO=^HBHC(634,HBHCNODE,0),^TMP("HBHC",$J,HBHCMSG,HBHCNODE,0)=HBHCINFO D HISTORY
"RTN","HBHCXMT",20,0)
CLEANUP ; Cleanup Transmit History (HBHC(634.6)) to maintain maximum of last 12 transmit batches
"RTN","HBHCXMT",21,0)
 S (HBHCTOT,HBHCDATE)=0 F  S HBHCDATE=$O(^HBHC(634.6,"C",HBHCDATE)) Q:HBHCDATE'>0  S HBHCTOT=HBHCTOT+1 S:HBHCTOT=1 HBHCDAT=HBHCDATE
"RTN","HBHCXMT",22,0)
 I HBHCTOT>12 S DIK="^HBHC(634.6,",DA="" F  S DA=$O(^HBHC(634.6,"C",HBHCDAT,DA)) Q:DA'>0  D ^DIK
"RTN","HBHCXMT",23,0)
 ; Turn Off Transmission in Progress Flag
"RTN","HBHCXMT",24,0)
 S $P(^HBHC(631.9,1,0),U,6)=""
"RTN","HBHCXMT",25,0)
PRINT ; Print Transmit Report if default printer exists in 631.9
"RTN","HBHCXMT",26,0)
 ; HBHCIOP set in PROMPT2^HBHCR15B
"RTN","HBHCXMT",27,0)
 I ($D(HBHCIOP))&($D(HBHCHEAD)) N IOP,ZTIO,ZTSAVE,ZTRTN,ZTDESC,ZTASK,%ZIS,ZTDTH,ZTQUEUED S ZTRTN="DQ^HBHCR15A",ZTIO=HBHCIOP,ZTDESC="HBPC Transmit Report",ZTSAVE("HBHC*")="",ZTDTH=$H D ^%ZTLOAD,^%ZISC
"RTN","HBHCXMT",28,0)
EXIT ; Exit module
"RTN","HBHCXMT",29,0)
 K DA,DIC,DIE,DIK,DR,HBHCCNT,HBHCDAT,HBHCDATE,HBHCDT,HBHCFLG,HBHCINFO,HBHCMSG,HBHCNODE,HBHCPRTR,HBHCTOT,HBHCZ,XMSUB,XMTEXT,XMY,XMZ,X,Y,%,%DT,^TMP("HBHC",$J)
"RTN","HBHCXMT",30,0)
 Q
"RTN","HBHCXMT",31,0)
MAIL ; Send mail message
"RTN","HBHCXMT",32,0)
 S XMSUB="HBHC Site: "_$S($P(^HBHC(631.9,1,0),U,5)]"":$E($P($G(^DIC(4,$P(^HBHC(631.9,1,0),U,5),99)),U),1,3),1:"")_"  Message: "_HBHCMSG_"  "_HBHCDATE_" Transmission",XMTEXT="^TMP(""HBHC"",$J,HBHCMSG,",XMY("XXX@Q-HBH.VA.GOV")=""
"RTN","HBHCXMT",33,0)
 D ^XMD
"RTN","HBHCXMT",34,0)
 S HBHCMSG=HBHCMSG+1,HBHCCNT=0
"RTN","HBHCXMT",35,0)
LOOP ; Loop thru ^HBHC(631,"AE") (Form 3 Transmit Flag), ^HBHC(631,"AF") (Form 5 Transmit Flag), & ^HBHC(632,"AC") (Form 4 Transmit Flag) cross-refs to set batch initial MM message number & mailman message date fields in ^HBHC(631/632)
"RTN","HBHCXMT",36,0)
 Q:HBHCFLG
"RTN","HBHCXMT",37,0)
 S DIE="^HBHC(631,"
"RTN","HBHCXMT",38,0)
 S DR="71///T;74///^S X=XMZ;75///^S X=HBHCDT",DA="" F  S DA=$O(^HBHC(631,"AE","F",DA)) Q:DA=""  D ^DIE
"RTN","HBHCXMT",39,0)
 S DR="72///T;77///^S X=XMZ;78///^S X=HBHCDT",DA="" F  S DA=$O(^HBHC(631,"AF","F",DA)) Q:DA=""  D ^DIE
"RTN","HBHCXMT",40,0)
 S DIE="^HBHC(632,",DR="7///T;9///^S X=XMZ;10///^S X=HBHCDT",DA="" F  S DA=$O(^HBHC(632,"AC","F",DA)) Q:DA=""  D ^DIE
"RTN","HBHCXMT",41,0)
 ; Set Last Mail Message Date in System Parameters file
"RTN","HBHCXMT",42,0)
 S $P(^HBHC(631.9,1,0),U,2)=HBHCDT
"RTN","HBHCXMT",43,0)
 S HBHCFLG=1
"RTN","HBHCXMT",44,0)
 Q
"RTN","HBHCXMT",45,0)
HISTORY ; Update HBHC(634.6 Transmit History file
"RTN","HBHCXMT",46,0)
 K DD,DO S DIC="^HBHC(634.6,",DIC(0)="L",DIC("DR")="1///^S X=HBHCDT",X=HBHCINFO D FILE^DICN
"RTN","HBHCXMT",47,0)
 Q
"VER")
8.0^21.0
"^DD",631.4,631.4,.01,0)
NUMBER^RNJ4,0X^^0;1^K:(X'?3.4N)!($E(X)>2)!(($L(X)=3)&(X>299))!(($L(X)=4)&((X<1010)!(X>2999))) X
"^DD",631.4,631.4,.01,1,0)
^.1
"^DD",631.4,631.4,.01,1,1,0)
631.4^B
"^DD",631.4,631.4,.01,1,1,1)
S ^HBHC(631.4,"B",$E(X,1,30),DA)=""
"^DD",631.4,631.4,.01,1,1,2)
K ^HBHC(631.4,"B",$E(X,1,30),DA)
"^DD",631.4,631.4,.01,1,1,"%D",0)
^^2^2^2970220^^^
"^DD",631.4,631.4,.01,1,1,"%D",1,0)
This cross-reference represents regular 'B' file index of HBHC Provider
"^DD",631.4,631.4,.01,1,1,"%D",2,0)
(631.4) file, Number (.01) field.
"^DD",631.4,631.4,.01,3)
Answer with a Number between 100 and 299, or 1010 and 2999, 0 Decimal Digits.  This number represents the unique HBPC Provider number assigned to each provider.
"^DD",631.4,631.4,.01,21,0)
^^22^22^2990304^^^^
"^DD",631.4,631.4,.01,21,1,0)
This field represents unique 4 numeric digit HBPC provider number assigned to
"^DD",631.4,631.4,.01,21,2,0)
each person who has any FTEE charged to HBPC.  4 digit number should be
"^DD",631.4,631.4,.01,21,3,0)
structured as follows: 
"^DD",631.4,631.4,.01,21,4,0)
  - first digit contains 1 for nonstudents, 2 for students
"^DD",631.4,631.4,.01,21,5,0)
  - second digit contains 0 thru 8 indicating discipline as follows:
"^DD",631.4,631.4,.01,21,6,0)
      0  RN
"^DD",631.4,631.4,.01,21,7,0)
      1  LPN, LVN, Home Health Aide or Tech, Nursing Assistant
"^DD",631.4,631.4,.01,21,8,0)
      2  Social Worker
"^DD",631.4,631.4,.01,21,9,0)
      3  OT, PT, CT, Rehabilitation Therapist   
"^DD",631.4,631.4,.01,21,10,0)
      4  Dietitian, Nutritionist
"^DD",631.4,631.4,.01,21,11,0)
      5  Physician   
"^DD",631.4,631.4,.01,21,12,0)
      6  Nurse Practitioner
"^DD",631.4,631.4,.01,21,13,0)
      7  Clinical Pharmacist   
"^DD",631.4,631.4,.01,21,14,0)
      8  Other
"^DD",631.4,631.4,.01,21,15,0)
  - third & fourth digits contain 0 thru 99 indicating individual provider as follows: 
"^DD",631.4,631.4,.01,21,16,0)
      0  first staff member in discipline
"^DD",631.4,631.4,.01,21,17,0)
      1  second staff member in discipline
"^DD",631.4,631.4,.01,21,18,0)
      2  third staff member in discipline, etc.
"^DD",631.4,631.4,.01,21,19,0)
All students in a particular discipline should share the same HBPC provider
"^DD",631.4,631.4,.01,21,20,0)
number (e.g.  all RN students would be 200).  New provider numbers are issued
"^DD",631.4,631.4,.01,21,21,0)
only when FTEE is increased.  Provider number '190' can be used as a
"^DD",631.4,631.4,.01,21,22,0)
'catch-all' category if the need arises. 
"^DD",631.4,631.4,.01,"DT")
2990712
"^DD",633.1,633.1,0)
FIELD^^.01^1
"^DD",633.1,633.1,0,"DT")
2970314
"^DD",633.1,633.1,0,"IX","B",633.1,.01)

"^DD",633.1,633.1,0,"NM","HBHC ERROR MESSAGES FOR VISITS")

"^DD",633.1,633.1,0,"PT",634.2,3)

"^DD",633.1,633.1,.01,0)
ERROR MESSAGE TEXT^RF^^0;1^K:$L(X)>40!($L(X)<3) X
"^DD",633.1,633.1,.01,1,0)
^.1
"^DD",633.1,633.1,.01,1,1,0)
633.1^B
"^DD",633.1,633.1,.01,1,1,1)
S ^HBHC(633.1,"B",$E(X,1,30),DA)=""
"^DD",633.1,633.1,.01,1,1,2)
K ^HBHC(633.1,"B",$E(X,1,30),DA)
"^DD",633.1,633.1,.01,3)
Answer must be 3-40 characters in length.
"^DD",633.1,633.1,.01,21,0)
^^4^4^2970314^^^
"^DD",633.1,633.1,.01,21,1,0)
This field represents error message text giving reason why Patient Care
"^DD",633.1,633.1,.01,21,2,0)
Encounter (PCE) visit did not pass validity check for completeness/accuracy to
"^DD",633.1,633.1,.01,21,3,0)
be added to HBHC Visit (632) & HBHC Transmit (634) files.  Entries in this file
"^DD",633.1,633.1,.01,21,4,0)
should NOT be added or edited. 
"^DD",633.1,633.1,.01,"DT")
2970314
"^DIC",633.1,633.1,0)
HBHC ERROR MESSAGES FOR VISITS^633.1
"^DIC",633.1,633.1,0,"GL")
^HBHC(633.1,
"^DIC",633.1,633.1,"%D",0)
^^3^3^2970314^
"^DIC",633.1,633.1,"%D",1,0)
This file contains HBHC Error Messages for Visits data, is exported with data,
"^DIC",633.1,633.1,"%D",2,0)
and is referenced by HBHC Visit Error(s) (634.2) file.  This file should not be
"^DIC",633.1,633.1,"%D",3,0)
edited or have entries added. 
"^DIC",633.1,"B","HBHC ERROR MESSAGES FOR VISITS",633.1)

**END**
**END**

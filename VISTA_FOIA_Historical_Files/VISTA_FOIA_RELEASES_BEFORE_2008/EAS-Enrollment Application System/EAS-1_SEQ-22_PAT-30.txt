
=============================================================================
Run Date: APR 15, 2003                     Designation: EAS*1*30
Package : EAS - ENROLLMENT APPLICATION Priority: EMERGENCY
Version : 1        SEQ #22                      Status: Released
                  Compliance Date: APR 16, 2003
=============================================================================

Associated patches: (v)EAS*1*23    <<= must be installed BEFORE `EAS*1*30'
                    (v)IVM*2*77    <<= must be installed BEFORE `EAS*1*30'

Subject: IVM MEANS TEST EDB-VISTA DATA EXCHANGE ENHANCEMENTS - EAS

Category: 
  - Routine

Description: 
============

     **********************************************************************
     Note: This patch has been assigned a compliance date of April 16, 2003
     **********************************************************************
    
   
  
 Overview and Background:
 ====================
  
 The release of IVM*2.0*69 and EAS*1*23, on March 11, 2003, provided the
 framework for medical centers to receive an IVM Verified Means Test
 Transmission (ORU~Z06) from the Enrollment Database (EDB) and to transmit
 an IVM Billing/Collection Transmission (ORU~Z09) to the EDB.  These two
 messages support the Income Verification Matching (IVM) program that
 matches a veteran's self-reported income (that is below the Means Test
 Threshold) with information obtained from the Internal Revenue Service
 (IRS) and Social Security Administration (SSA).  The IVM program has been
 implemented in the EDB and not in the Health Eligibility Center (HEC)
 Legacy system.
  
  
 Functional Description
 ===============
  
 The software for these patches, IVM*2*77 and EAS*1*30, are not being 
 distributed through the National Patch Module.   These patches are being 
 distributed as a single KIDS software distribution (host file).  This 
 patch contains the informational portion of EAS*1*30 and provides field 
 personnel with instructions on how to acquire, install and implement the 
 patch software.  The transmission of IVM Converted means tests is expected
 to begin on April 17,2003, therefore the Business Office is requiring that
 all sites install IVM*2*77 and EAS*1*30 by April 16, 2003
  
  
 Functionality released with this patch includes the following:
  
   When a current MT for a given year is closed/converted by the EDB, an
   ORU~Z06 message will be sent to the medical center.  Upon successful
   uploading of the message, a new MT will be created in the ANNUAL MEANS 
   TEST file (#408.31).  The STATUS field (#.03) in file #408.31 is set to
   either MT COPAY REQUIRED or GMT COPAY REQUIRED and the COMMENT field
   (#50) is updated with "Z06 MT via EDB".  Also the PATIENT ENROLLMENT
   file (#27.11) will be updated.  Specifically, the ENROLLMENT PRIORITY
   (#.07) and ENROLLMENT STATUS (#.04) will be updated.  A Z07 message
   will  be sent to HEC legacy which will update the veterans records.  HEC
   legacy will transmit (z10 and Z11) back to the medical center.  Upon
   receipt of the messages the veterans ENROLLMENT STATUS (file 
   #27.11/field #.04) will be updated to 'Verified'.
  
   When an expired MT for a given year is closed/converted by the EDB, an
   ORU~Z06 message will be sent to the medical center.  Upon successful
   uploading of the message, a new MT will be created in the ANNUAL MEANS 
   TEST file (#408.31).  The STATUS field (#.03) in file #408.31 is set to
   either MT COPAY REQUIRED or GMT COPAY REQUIRED and the COMMENT field 
   (#50) is updated with "Z06 MT via EDB". The veterans ENROLLMENT PRIORITY
   (#.07) and ENROLLMENT STATUS (#.04) will NOT be updated. No update will
   be sent to HEC legacy since this MT has expired.
  
   If it is determined that a veteran should not have been converted to a
   MT COPAY REQUIRED or GMT COPAY REQUIRED status for a current MT, HEC
   staff will initiate a process to revert the veteran back to the prior
   status.  The receipt at the medical center of a "Cancel Z06" for a valid
   MT will delete the "Z06 MT via EDB" means test.   The prior test then
   becomes primary for the income year.  A Z07 message will be sent to HEC
   legacy which will update the veterans records.  HEC legacy will transmit
   the enrollment message back to the medical center.  Upon receipt of the
   messages the veterans ENROLLMENT STATUS will be updated to 'Verified'.
  
   If it is determined that a veteran should not have been converted to a
   MT COPAY REQUIRED or GMT COPAY REQUIRED status for an expired MT, HEC
   staff will initiate a process to revert the veteran back to the prior
   status.  The receipt at the medical center of a "Cancel Z06" for a valid
   MT will delete the "Z06 MT via EDB" means test.   The prior test then
   becomes primary for the income year. Notification of the deletion of the
   "Z06 MT via EDB" will not be transmitted to HEC Legacy since this is an
   expired MT.
  
  
 Associated NOIS: 
 =======================
 N/A 
  
  
 Associated E3R:
 =======================
 N/A 
  
  
 Test Sites:
 =======================
 Altoona
 Northampton
  
  
 DATA DICTIONARY CHANGES
 =======================
  N/A
  
  
 TECHNICAL DESCRIPTION
 =====================
  
 IVMPTRN1 (Close IVM case record for a patient) has been cloned into 
 EASPTRN1.  Closing a "Z06 MT via EDB" will now be performed by EASPTRN1.  
 Two API's (one checks incoming HL7 message while the other checks file 
 #408.31 data) to check to see if a "Z06 MT via EDB" exists has been added 
 to this program.  Based upon the outcome when these API's are invoked 
 will indicate whether a "Z06 MT via EDB" has been found.
  
 The existing Z09 HL7 process EASPREC7 has been modified to call EASPTRN1 
 to close IVM cases instead of IVMPTRN1 when a case is cancelled and when 
 an existing "Z06 MT via EDB" case is updated. 
  
 SOFTWARE RETRIEVAL
 ==================
 The software for this patch is being distributed in host file 
 IVM_2_P77.KID.  The host file will contain the two KIDS builds.  The 
 first build will be the Income Verification Match patch, IVM*2*77, the 
 second build will be the Enrollment Application System patch, EAS*1*30.
  
 Please refer to the 'Software Retrieval' section of the IVM*2*77 patch
 description for instructions on how to acquire the patch software and
 documentation.
  
  
 ROUTINE SUMMARY
 ===============
 The following is a list of the routine(s) included in this patch. The 
 second line of each of these routine(s) will look like:
  
 <tab>;;1.0;ENROLLMENT APPLICATION SYSTEM;**[patch list]**;Mar 15, 2001
  
  
                             CHECK^XTSUMBLD results
    Routine        Before Patch     After Patch     Patch List
    -------        ------------     -----------     ----------
    EASPREC7          12910423      14333988         23,30
    EASPTRN1             N/A         3484712         30
    EASUM1             5525155       6433303         23,30
  
    Total Number of Routines - 3 
      
  
 INSTALLATION INSTRUCTIONS
  
 Please refer to the 'Installation Instructions' section of the IVM*2*77
 patch description for instructions on how to install the patch software

Routine Information:
====================

Routine Name:
  - EASPTRN1

 This program is a clone of IVMPTRN1 (Close IVM case record for a 
 patient).  Several API's have been added to this program to return the 
 status of the existence of an EDB Z06 MT in file #408.31.  This program 
 will also prevent the veteran's enrollment record from being updated if
 the Means Test being closed/converted has expired.

Routine Checksum:

Routine Name:
  - EASPREC7

 Several calls to IVMPTRN1 have been changed to use EASPTRN1 instead of 
 IVMPTRN1.  By calling EASPTRN1 additional messages not desired will be 
 omitted. 
  
 PROCESS+32
   Before: 
     . . . D CLOSE^EASPTRN1(IVMIY,DFN,1,7)       ;Close Case/Not Converted
  
   After:
     . . . D CLOSE^EASPTRN1(IVMIY,DFN,1,7)       ;Close Case/Not Converted
  
 PROCESS+39
   Before:
     . . D CLOSE^EASPTRN1(IVMIY,DFN,1,6)            ;Close Case/Converted
  
   After:
     . . D CLOSE^EASPTRN1(IVMIY,DFN,1,6)            ;Close Case/Converted

Routine Checksum:

Routine Name:
  - EASUM1

 Added logic to set Enrollment/Eligibility variable to not allow 
 enrollment record to be updated when an expired MT has been converted. 
  
 ADD+12  - Added following logic
    I $$EXPIRED^EASPTRN1(DFN,$G(DGMTDT)) S DGENUPLD="ENROLLMENT/
     ELIGIBILITY   UPLOAD IN PROGRESS"    ;If MT expired then do not update
     Enrollment record

Routine Checksum:

=============================================================================
User Information:                               
Entered By  : GUSTIN,ERIC                    Date Entered : MAR 10, 2003
Completed By: DRESS,KEN                     Date Completed: APR 14, 2003
Released By : KOVACH,STUART                 Date Released : APR 15, 2003
=============================================================================


Packman Mail Message:
=====================

No routines included

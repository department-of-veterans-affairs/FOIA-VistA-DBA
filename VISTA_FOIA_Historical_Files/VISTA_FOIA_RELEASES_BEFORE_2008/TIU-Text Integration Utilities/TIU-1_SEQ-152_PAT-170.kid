EMERGENCY Released TIU*1*170 SEQ #152
Extracted from mail message
**KIDS**:TIU*1.0*170^

**INSTALL NAME**
TIU*1.0*170
"BLD",4546,0)
TIU*1.0*170^TEXT INTEGRATION UTILITIES^0^3030912^y
"BLD",4546,1,0)
^^2^2^3030912^^^
"BLD",4546,1,1,0)
The description for this patch may be found in the National Patch Module 
"BLD",4546,1,2,0)
under TIU*1.0*170.
"BLD",4546,4,0)
^9.64PA^^0
"BLD",4546,"INI")

"BLD",4546,"INIT")
EN^TIUTPBN
"BLD",4546,"KRN",0)
^9.67PA^8989.52^19
"BLD",4546,"KRN",.4,0)
.4
"BLD",4546,"KRN",.401,0)
.401
"BLD",4546,"KRN",.402,0)
.402
"BLD",4546,"KRN",.403,0)
.403
"BLD",4546,"KRN",.5,0)
.5
"BLD",4546,"KRN",.84,0)
.84
"BLD",4546,"KRN",3.6,0)
3.6
"BLD",4546,"KRN",3.8,0)
3.8
"BLD",4546,"KRN",9.2,0)
9.2
"BLD",4546,"KRN",9.8,0)
9.8
"BLD",4546,"KRN",9.8,"NM",0)
^9.68A^3^1
"BLD",4546,"KRN",9.8,"NM",3,0)
TIUTPBN^^0^B61695510
"BLD",4546,"KRN",9.8,"NM","B","TIUTPBN",3)

"BLD",4546,"KRN",19,0)
19
"BLD",4546,"KRN",19.1,0)
19.1
"BLD",4546,"KRN",101,0)
101
"BLD",4546,"KRN",409.61,0)
409.61
"BLD",4546,"KRN",771,0)
771
"BLD",4546,"KRN",870,0)
870
"BLD",4546,"KRN",8989.51,0)
8989.51
"BLD",4546,"KRN",8989.52,0)
8989.52
"BLD",4546,"KRN",8994,0)
8994
"BLD",4546,"KRN","B",.4,.4)

"BLD",4546,"KRN","B",.401,.401)

"BLD",4546,"KRN","B",.402,.402)

"BLD",4546,"KRN","B",.403,.403)

"BLD",4546,"KRN","B",.5,.5)

"BLD",4546,"KRN","B",.84,.84)

"BLD",4546,"KRN","B",3.6,3.6)

"BLD",4546,"KRN","B",3.8,3.8)

"BLD",4546,"KRN","B",9.2,9.2)

"BLD",4546,"KRN","B",9.8,9.8)

"BLD",4546,"KRN","B",19,19)

"BLD",4546,"KRN","B",19.1,19.1)

"BLD",4546,"KRN","B",101,101)

"BLD",4546,"KRN","B",409.61,409.61)

"BLD",4546,"KRN","B",771,771)

"BLD",4546,"KRN","B",870,870)

"BLD",4546,"KRN","B",8989.51,8989.51)

"BLD",4546,"KRN","B",8989.52,8989.52)

"BLD",4546,"KRN","B",8994,8994)

"BLD",4546,"QUES",0)
^9.62^^
"BLD",4546,"REQB",0)
^9.611^2^2
"BLD",4546,"REQB",1,0)
TIU*1.0*135^2
"BLD",4546,"REQB",2,0)
GMTS*2.7*68^2
"BLD",4546,"REQB","B","GMTS*2.7*68",2)

"BLD",4546,"REQB","B","TIU*1.0*135",1)

"INIT")
EN^TIUTPBN
"MBREQ")
0
"PKG",193,-1)
1^1
"PKG",193,0)
TEXT INTEGRATION UTILITIES^TIU^Text Integration Utilities 
"PKG",193,20,0)
^9.402P^^
"PKG",193,22,0)
^9.49I^1^1
"PKG",193,22,1,0)
1.0^3010321^3010321^11
"PKG",193,22,1,"PAH",1,0)
170^3030912^123456789078
"PKG",193,22,1,"PAH",1,1,0)
^^2^2^3030912
"PKG",193,22,1,"PAH",1,1,1,0)
The description for this patch may be found in the National Patch Module 
"PKG",193,22,1,"PAH",1,1,2,0)
under TIU*1.0*170.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","TIUTPBN")
0^3^B61695510
"RTN","TIUTPBN",1,0)
TIUTPBN ; SLC/AJB - Trans Pharm Care Note ; July 29, 2003
"RTN","TIUTPBN",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**170**;Jun 20, 1997
"RTN","TIUTPBN",3,0)
 ;
"RTN","TIUTPBN",4,0)
 Q
"RTN","TIUTPBN",5,0)
EN ;
"RTN","TIUTPBN",6,0)
 X ^%ZOSF("EON") W IOCUON,@IOF
"RTN","TIUTPBN",7,0)
 N FDA,FDAIEN,MSG,POP,TIUDA,TIUFPRIV,TIUIEN,TIUPRNT,TIUTMP
"RTN","TIUTPBN",8,0)
 D PRE
"RTN","TIUTPBN",9,0)
 I $$CHKTITLE(142.5,"TIU TPBN FUTURE APPTS")<0 D  G EXIT
"RTN","TIUTPBN",10,0)
 . W !!,"The Health Summary Object did not install correctly."
"RTN","TIUTPBN",11,0)
 . W !,"Installation cannot continue."
"RTN","TIUTPBN",12,0)
 S TIUFPRIV=1
"RTN","TIUTPBN",13,0)
 S TIUIEN=$$CHKTITLE(8925.1,"TRANSITIONAL PHARMACY BENEFIT NOTE")
"RTN","TIUTPBN",14,0)
 S TIUIEN=$S(TIUIEN>0:TIUIEN,1:"+1")
"RTN","TIUTPBN",15,0)
 I $$CHKTITLE(8930,"CLINICAL COORDINATOR")<0 W !!,"Installation Error:  Class owner cannot be defined.",! G EXIT
"RTN","TIUTPBN",16,0)
 I TIUIEN="+1" F  D  Q:TIUPRNT>0!($D(DUOUT))
"RTN","TIUTPBN",17,0)
 . D GETCLASS
"RTN","TIUTPBN",18,0)
 . I $D(DUOUT) W !!,"Installation Aborted by User." S XPDABORT=1 Q
"RTN","TIUTPBN",19,0)
 . I +TIUPRNT<0 W !!,"Installation Error:  Invalid Selection.",!
"RTN","TIUTPBN",20,0)
 . I  W !,"A DOCUMENT CLASS must be entered or '^' to abort."
"RTN","TIUTPBN",21,0)
 I +$G(TIUPRNT)<0 G EXIT
"RTN","TIUTPBN",22,0)
 I $$MKOBJS<0 Q
"RTN","TIUTPBN",23,0)
 S FDA(8925.1,TIUIEN_",",.01)="TRANSITIONAL PHARMACY BENEFIT NOTE"
"RTN","TIUTPBN",24,0)
 S FDA(8925.1,TIUIEN_",",.02)=""
"RTN","TIUTPBN",25,0)
 S FDA(8925.1,TIUIEN_",",.03)="TRANSITIONAL PHARMACY BENEFIT NOTE"
"RTN","TIUTPBN",26,0)
 S FDA(8925.1,TIUIEN_",",.04)="DOC"
"RTN","TIUTPBN",27,0)
 S FDA(8925.1,TIUIEN_",",.05)=""
"RTN","TIUTPBN",28,0)
 S FDA(8925.1,TIUIEN_",",.06)=$$CHKTITLE(8930,"CLINICAL COORDINATOR")
"RTN","TIUTPBN",29,0)
 S FDA(8925.1,TIUIEN_",",.07)=13
"RTN","TIUTPBN",30,0)
 S FDA(8925.1,TIUIEN_",",3.02)=1
"RTN","TIUTPBN",31,0)
 S FDA(8925.1,TIUIEN_",",99)=$H
"RTN","TIUTPBN",32,0)
 D UPDATE^DIE("","FDA","FDAIEN","MSG")
"RTN","TIUTPBN",33,0)
 I $D(MSG) D  Q
"RTN","TIUTPBN",34,0)
 . W !!,"The following error message was returned:",!!
"RTN","TIUTPBN",35,0)
 . S MSG="" F  S MSG=$O(MSG("DIERR",1,"TEXT",MSG)) Q:MSG=""  W MSG("DIERR",1,"TEXT",MSG),!
"RTN","TIUTPBN",36,0)
 W !!,"Creation of TRANSITIONAL PHARMACY BENEFIT NOTE title successful...",! H 1
"RTN","TIUTPBN",37,0)
 I TIUIEN="+1" D
"RTN","TIUTPBN",38,0)
 . S TIUDA=FDAIEN(1)
"RTN","TIUTPBN",39,0)
 . S FDA(8925.14,"+2,"_TIUPRNT_",",.01)=FDAIEN(1)
"RTN","TIUTPBN",40,0)
 . S FDA(8925.14,"+2,"_TIUPRNT_",",4)="Transitional Pharmacy Benefit Note"
"RTN","TIUTPBN",41,0)
 . D UPDATE^DIE("","FDA","FDAIEN","MSG")
"RTN","TIUTPBN",42,0)
 . I $D(MSG) D  S XPDABORT=1 Q
"RTN","TIUTPBN",43,0)
 .. W !!,"The following error message was returned:",!!
"RTN","TIUTPBN",44,0)
 .. S MSG="" F  S MSG=$O(MSG("DIERR",1,"TEXT",MSG)) Q:MSG=""  W MSG("DIERR",1,"TEXT",MSG),!
"RTN","TIUTPBN",45,0)
 . W !,"Addition of "_$P(^TIU(8925.1,TIUPRNT,0),U)_" as parent successful...",! H 1
"RTN","TIUTPBN",46,0)
 I $G(TIUDA)="" S TIUDA=TIUIEN
"RTN","TIUTPBN",47,0)
 D GETBOIL
"RTN","TIUTPBN",48,0)
 K FDAIEN
"RTN","TIUTPBN",49,0)
 S FDAIEN(TIUDA)=TIUDA
"RTN","TIUTPBN",50,0)
 S FDA(8925.1,TIUDA_",",3)="TIUTMP"
"RTN","TIUTPBN",51,0)
 D UPDATE^DIE("","FDA","FDAIEN","MSG")
"RTN","TIUTPBN",52,0)
 I $D(MSG) D  Q
"RTN","TIUTPBN",53,0)
 . W !!,"The following error message was returned:",!!
"RTN","TIUTPBN",54,0)
 . S MSG="" F  S MSG=$O(MSG("DIERR",1,"TEXT",MSG)) Q:MSG=""  W MSG("DIERR",1,"TEXT",MSG),!
"RTN","TIUTPBN",55,0)
 W !,"Boilerplate text and objects added successfully.",!
"RTN","TIUTPBN",56,0)
 W !,"Update finished.",!
"RTN","TIUTPBN",57,0)
 W !,"*** The TRANSITIONAL PHARMACY BENEFIT NOTE title must be"
"RTN","TIUTPBN",58,0)
 W !,"*** activated before use.",!
"RTN","TIUTPBN",59,0)
EXIT D
"RTN","TIUTPBN",60,0)
 .N DIR,X,Y
"RTN","TIUTPBN",61,0)
 .S DIR(0)="E"
"RTN","TIUTPBN",62,0)
 .W ! D ^DIR
"RTN","TIUTPBN",63,0)
 Q
"RTN","TIUTPBN",64,0)
ADD(TXT) ;
"RTN","TIUTPBN",65,0)
 S NEXTLINE=NEXTLINE+1
"RTN","TIUTPBN",66,0)
 S @TARGET@(NEXTLINE,0)=TXT
"RTN","TIUTPBN",67,0)
 Q
"RTN","TIUTPBN",68,0)
ADDSTR(STR1,STR2,MAX) ;
"RTN","TIUTPBN",69,0)
 N CNT,DONE,TMP
"RTN","TIUTPBN",70,0)
 S CNT=0,(DONE,TMP)=""
"RTN","TIUTPBN",71,0)
 I '$D(STR2) D ADD(STR1) Q
"RTN","TIUTPBN",72,0)
 I $L(STR1)<MAX S $P(TMP," ",MAX-$L(STR1))=" ",STR1=STR1_TMP D ADD(STR1_STR2) Q
"RTN","TIUTPBN",73,0)
 E  F  D  Q:DONE=1
"RTN","TIUTPBN",74,0)
 .N TMPSTR S TMPSTR=""
"RTN","TIUTPBN",75,0)
 .I $L(STR1)=MAX,$E(STR1,MAX)=" " S DONE=1 D ADD(STR1_STR2) Q
"RTN","TIUTPBN",76,0)
 .F  D  Q:DONE=1
"RTN","TIUTPBN",77,0)
 ..S CNT=CNT+1
"RTN","TIUTPBN",78,0)
 ..I $L(TMPSTR_$P(STR1," ",CNT)_" ")<60 S TMPSTR=TMPSTR_$P(STR1," ",CNT)_" "
"RTN","TIUTPBN",79,0)
 ..E  S DONE=1,TMP="",$P(TMP," ",MAX-$L(TMPSTR))=" ",TMPSTR=TMPSTR_TMP D ADD(TMPSTR_STR2),ADD($P(STR1," ",CNT,999))
"RTN","TIUTPBN",80,0)
 Q
"RTN","TIUTPBN",81,0)
AOPMEDS(DFN,TARGET) ;
"RTN","TIUTPBN",82,0)
 N DRUG,EMPTY,INDEX,NEXTLINE,NODE,TIUSTAT,TIUSTATS,TMP
"RTN","TIUTPBN",83,0)
 S EMPTY=1,NEXTLINE=0
"RTN","TIUTPBN",84,0)
 D OCL^PSOORRL(DFN,"","")
"RTN","TIUTPBN",85,0)
 S TIUSTATS="^ACTIVE^REFILL^HOLD^PROVIDER HOLD^ON CALL^ACTIVE (S)^NON-VERIFIED^DRUG INTERACTIONS^INCOMPLETE^PENDING^"
"RTN","TIUTPBN",86,0)
 S INDEX=0
"RTN","TIUTPBN",87,0)
 F  S INDEX=$O(^TMP("PS",$J,INDEX))  Q:INDEX'>0  D
"RTN","TIUTPBN",88,0)
 .S NODE=$G(^TMP("PS",$J,INDEX,0))
"RTN","TIUTPBN",89,0)
 .I '($L($P(NODE,U,2))>0) Q
"RTN","TIUTPBN",90,0)
 .I $P(NODE,U)'["O" Q
"RTN","TIUTPBN",91,0)
 .S TIUSTAT=$P(NODE,U,9) I TIUSTAT="SUSPENDED" S TIUSTAT="ACTIVE (S)",$P(NODE,U,9)=TIUSTAT
"RTN","TIUTPBN",92,0)
 .I $F(TIUSTATS,"^"_TIUSTAT_"^")=0 Q
"RTN","TIUTPBN",93,0)
 .S EMPTY=0
"RTN","TIUTPBN",94,0)
 .S TMP($P(NODE,U,2),INDEX)=NODE
"RTN","TIUTPBN",95,0)
 .S TMP($P(NODE,U,2),INDEX,"P")=$P($G(^TMP("PS",$J,INDEX,"P",0)),U,2)
"RTN","TIUTPBN",96,0)
 .I ^TMP("PS",$J,INDEX,"SIG",0)>0 D
"RTN","TIUTPBN",97,0)
 ..N TIUSIG S TIUSIG=0
"RTN","TIUTPBN",98,0)
 ..F  S TIUSIG=$O(^TMP("PS",$J,INDEX,"SIG",TIUSIG)) Q:TIUSIG=""  S TMP($P(NODE,U,2),INDEX,"SIG",TIUSIG)=^TMP("PS",$J,INDEX,"SIG",TIUSIG,0)
"RTN","TIUTPBN",99,0)
 ;
"RTN","TIUTPBN",100,0)
 S (DRUG,INDEX)=0
"RTN","TIUTPBN",101,0)
 F  S DRUG=$O(TMP(DRUG)) Q:DRUG=""  F  S INDEX=$O(TMP(DRUG,INDEX)) Q:INDEX=""  D
"RTN","TIUTPBN",102,0)
 . S NODE=TMP(DRUG,INDEX)
"RTN","TIUTPBN",103,0)
 . D ADDSTR("")
"RTN","TIUTPBN",104,0)
 . N SIG S SIG=0
"RTN","TIUTPBN",105,0)
 . F  S SIG=$O(TMP(DRUG,INDEX,"SIG",SIG)) Q:SIG=""  D
"RTN","TIUTPBN",106,0)
 ..I SIG=1 D ADDSTR(DRUG_" "_TMP(DRUG,INDEX,"SIG",SIG),$P(NODE,U,9),60)
"RTN","TIUTPBN",107,0)
 ..I SIG'=1 D ADDSTR(TMP(DRUG,INDEX,"SIG",SIG))
"RTN","TIUTPBN",108,0)
 . D ADDSTR(" # Refills: "_$P(NODE,U,5)," Quantity: "_$P(NODE,U,12),30)
"RTN","TIUTPBN",109,0)
 . D ADDSTR("Issue Date: "_$$FMTE^XLFDT($P(NODE,U,15))," Provider: "_TMP(DRUG,INDEX,"P"),30)
"RTN","TIUTPBN",110,0)
 ;
"RTN","TIUTPBN",111,0)
 I EMPTY D
"RTN","TIUTPBN",112,0)
 .D ADDSTR(""),ADDSTR("No Medications Found"),ADDSTR("")
"RTN","TIUTPBN",113,0)
 K ^TMP("PS",$J)
"RTN","TIUTPBN",114,0)
 Q "~@"_$NA(@TARGET)
"RTN","TIUTPBN",115,0)
GETBOIL ;
"RTN","TIUTPBN",116,0)
 N LINE,LINETXT
"RTN","TIUTPBN",117,0)
 F LINE=1:1 S LINETXT=$P($T(BOILTXT+LINE),";;",2) Q:LINETXT="EOM"  S TIUTMP(LINE)=LINETXT
"RTN","TIUTPBN",118,0)
 Q
"RTN","TIUTPBN",119,0)
BOILTXT ;
"RTN","TIUTPBN",120,0)
 ;;This patient has been identified as a new patient waiting for care from
"RTN","TIUTPBN",121,0)
 ;;the VA and is eligible for the transitional pharmacy program.
"RTN","TIUTPBN",122,0)
 ;;
"RTN","TIUTPBN",123,0)
 ;;Patient Name:  |PATIENT NAME|
"RTN","TIUTPBN",124,0)
 ;;SSN:           |PATIENT SSN|
"RTN","TIUTPBN",125,0)
 ;;Age:           |PATIENT AGE|
"RTN","TIUTPBN",126,0)
 ;;
"RTN","TIUTPBN",127,0)
 ;;Primary Care Provider:  |TIU TPBN PCP|
"RTN","TIUTPBN",128,0)
 ;;
"RTN","TIUTPBN",129,0)
 ;;Allergies/Adverse Reactions:
"RTN","TIUTPBN",130,0)
 ;;|ALLERGIES/ADR|
"RTN","TIUTPBN",131,0)
 ;;
"RTN","TIUTPBN",132,0)
 ;;Rx(s):
"RTN","TIUTPBN",133,0)
 ;;|TIU TPBN ACT OUT MEDS|
"RTN","TIUTPBN",134,0)
 ;;
"RTN","TIUTPBN",135,0)
 ;;Over-the-counter drugs or drugs not issued by VA but currently taking 
"RTN","TIUTPBN",136,0)
 ;;(Please List):
"RTN","TIUTPBN",137,0)
 ;;
"RTN","TIUTPBN",138,0)
 ;;
"RTN","TIUTPBN",139,0)
 ;;
"RTN","TIUTPBN",140,0)
 ;;Non-formulary Rx requested, not filled:
"RTN","TIUTPBN",141,0)
 ;;
"RTN","TIUTPBN",142,0)
 ;;
"RTN","TIUTPBN",143,0)
 ;;
"RTN","TIUTPBN",144,0)
 ;;Formulary Alternatives Recommended:
"RTN","TIUTPBN",145,0)
 ;;
"RTN","TIUTPBN",146,0)
 ;;
"RTN","TIUTPBN",147,0)
 ;;
"RTN","TIUTPBN",148,0)
 ;;Next appointment(s):
"RTN","TIUTPBN",149,0)
 ;;|TIU TPBN FUTURE APPTS|
"RTN","TIUTPBN",150,0)
 ;;
"RTN","TIUTPBN",151,0)
 ;;
"RTN","TIUTPBN",152,0)
 ;;Counseling:
"RTN","TIUTPBN",153,0)
 ;;
"RTN","TIUTPBN",154,0)
 ;;The patient and/or the patient's caregiver was offered counseling on
"RTN","TIUTPBN",155,0)
 ;;drug, dosage, schedule, route of administration, storage, potential 
"RTN","TIUTPBN",156,0)
 ;;side effects, significant drug interactions, and the procedure for 
"RTN","TIUTPBN",157,0)
 ;;obtaining refill prescriptions.
"RTN","TIUTPBN",158,0)
 ;;
"RTN","TIUTPBN",159,0)
 ;;Counseling was [] Provided     [] Refused
"RTN","TIUTPBN",160,0)
 ;;EOM
"RTN","TIUTPBN",161,0)
 Q
"RTN","TIUTPBN",162,0)
CHKTITLE(FILE,NAME) ;
"RTN","TIUTPBN",163,0)
 N DIC,X,Y
"RTN","TIUTPBN",164,0)
 S DIC=FILE,DIC(0)="X"
"RTN","TIUTPBN",165,0)
 S X=NAME
"RTN","TIUTPBN",166,0)
 D ^DIC
"RTN","TIUTPBN",167,0)
 Q +Y
"RTN","TIUTPBN",168,0)
GETCLASS ;
"RTN","TIUTPBN",169,0)
 N DIC,X,Y
"RTN","TIUTPBN",170,0)
 S DIC("A")="Select the DOCUMENT CLASS where the new title will be installed:  "
"RTN","TIUTPBN",171,0)
 S DIC(0)="AEQ",DIC="^TIU(8925.1,",DIC("S")="I $P(^(0),U,4)=""DC"""
"RTN","TIUTPBN",172,0)
 W ! D ^DIC
"RTN","TIUTPBN",173,0)
 S TIUPRNT=+Y
"RTN","TIUTPBN",174,0)
 Q
"RTN","TIUTPBN",175,0)
MKOBJS() ;
"RTN","TIUTPBN",176,0)
 N TIUHSO
"RTN","TIUTPBN",177,0)
 S TIUHSO=$$CHKTITLE(142.5,"TIU TPBN FUTURE APPTS")
"RTN","TIUTPBN",178,0)
 I $$MKOBJ("TIU TPBN ACT OUT MEDS","S X=$$AOPMEDS^TIUTPBN(DFN,""^TMP(""""TIUMED"""",$J)"")")<0 D  Q -1
"RTN","TIUTPBN",179,0)
 . W !!,"Installation Error:  TIU Object creation failed.",!
"RTN","TIUTPBN",180,0)
 I $$MKOBJ("TIU TPBN FUTURE APPTS","S X=$$TIU^GMTSOBJ(DFN,"_TIUHSO_")")<0 D  Q -1
"RTN","TIUTPBN",181,0)
 . W !!,"Installation Error:  TIU Object creation failed.",!
"RTN","TIUTPBN",182,0)
 I $$MKOBJ("TIU TPBN PCP","S X=$P($$OUTPTPR^SDUTL3(DFN,DT),U,2)")<0 D  Q -1
"RTN","TIUTPBN",183,0)
 . W !!,"Installation Error:  TIU Object creation failed.",!
"RTN","TIUTPBN",184,0)
 Q 1
"RTN","TIUTPBN",185,0)
MKOBJ(NAME,METHOD) ;
"RTN","TIUTPBN",186,0)
 N FDA,FDAIEN,MSG
"RTN","TIUTPBN",187,0)
 S FDA(8925.1,"+1,",.01)=NAME
"RTN","TIUTPBN",188,0)
 S FDA(8925.1,"+1,",.03)=NAME
"RTN","TIUTPBN",189,0)
 S FDA(8925.1,"+1,",.04)="O"
"RTN","TIUTPBN",190,0)
 S FDA(8925.1,"+1,",.06)=$$CHKTITLE(8930,"CLINICAL COORDINATOR")
"RTN","TIUTPBN",191,0)
 S FDA(8925.1,"+1,",.07)=11
"RTN","TIUTPBN",192,0)
 S FDA(8925.1,"+1,",9)=METHOD
"RTN","TIUTPBN",193,0)
 S FDA(8925.1,"+1,",99)=$H
"RTN","TIUTPBN",194,0)
 D UPDATE^DIE("","FDA","FDAIEN","MSG")
"RTN","TIUTPBN",195,0)
 I $D(MSG) D  Q -1
"RTN","TIUTPBN",196,0)
 . W !!,"TIU Object "_NAME_" creation failed.  The following error message was returned:",!!
"RTN","TIUTPBN",197,0)
 . S MSG="" F  S MSG=$O(MSG("DIERR",1,"TEXT",MSG)) Q:MSG=""  W MSG("DIERR",1,"TEXT",MSG),!
"RTN","TIUTPBN",198,0)
 W !!,"Creation of TIU Object "_NAME_" successful..." H 1
"RTN","TIUTPBN",199,0)
 Q 1
"RTN","TIUTPBN",200,0)
PRE ;
"RTN","TIUTPBN",201,0)
 N DA,DIK,NAME,X,Y
"RTN","TIUTPBN",202,0)
 F NAME="TIU TPBN ACT OUT MEDS","TIU TPBN FUTURE APPTS","TIU TPBN PCP" D
"RTN","TIUTPBN",203,0)
 .S DA=0,DA=$O(^TIU(8925.1,"B",NAME,DA))
"RTN","TIUTPBN",204,0)
 .S DIK="^TIU(8925.1,"
"RTN","TIUTPBN",205,0)
 .I DA>0 D ^DIK
"RTN","TIUTPBN",206,0)
 S NAME="INS^GMTSOBJ"
"RTN","TIUTPBN",207,0)
 D @NAME
"RTN","TIUTPBN",208,0)
 Q
"VER")
8.0^22.0
**END**
**END**

$TXT Created by NAPOLIELLO,GREG at CHEY20.FO-BAYPINES.MED.VA.GOV  (KIDS) on Thursday, 03/30/06 at 22:58
=============================================================================
Run Date: MAY 04, 2006                     Designation: PSO*7*242
Package : PSO - OUTPATIENT PHARMACY           Priority: EMERGENCY
Version : 7       SEQ #209                      Status: Released
                  Compliance Date: MAY 06, 2006
=============================================================================

Associated patches: (v)PSO*7*185   <<= must be installed BEFORE `PSO*7*242'
                    (v)PSO*7*204   <<= must be installed BEFORE `PSO*7*242'

Subject: CORRECT HL7 MULTIPLE RX PER PID ISSUE

Category: 
  - Routine

Description:
============

 PSI-06-031
  
 This patch will correct the menu option PSO INTERNET REFILLS from seeing 
 multiple prescriptions for various patients under one patient's name to 
 the External Dispense machines via HL7 messaging.
  
 This patch will also change a default response in three menu options that 
 use the same prompt routine, PSO INTERNET REFILLS, PSO BATCH BARCODE,
 and A3A PHONE REFILLS.  Since a majority of sites use the "S" (Suspense)
 option, when processing, then it was determined that the default response
 should be changed from the current value of "Q" (Queue) to "S" (Suspense).
  
  
 Remedy/Nois Overview:
 =====================
 1. HD133710  Outpatient Pharmacy Transmission Error - Optifill
  
 Problem:
 --------
 When filling Internet prescriptions from the PRESCRIPTION REFILL REQUEST 
 file #52.43 and the user selects the Queue option instead of the Suspense 
 option, then it is possible for multiple prescription numbers, which 
 belong to various patients, to be placed in the variable PPL.  This 
 variable is used when the label print process is called and also for the 
 HL7 process that sends messages to the external dispense machines.  The 
 HL7 process expects only prescription numbers for one patient at a time.  
 When the HL7 process receives multiple prescription numbers via the PPL 
 variable, it associates them all with the first patient of the first 
 prescription.  The result is that the bottle labels created by the 
 external dispense machines all have the same patient name for these 
 groupings of prescription numbers.   Therefore, one patient can get 
 several prescriptions, the first one belongs to them, the remainder do 
 not.  The other patients of the incorrectly associated prescriptions, do 
 not get their prescriptions at all.  
  
  
 Resolution:
 -----------
 It was determined that the routine PSOPRI, as it reads through the 
 PRESCRIPTION REFILL REQUEST file #52.43 during the Queue option, 
 incorrectly saves the patient DFN and never sees a change in that DFN 
 number.  So the routine PSOPRI will not initialize or set the patients 
 DFN number and defer that to the Label print process as does the Phone 
 Refill system.  
  
  
 Associated Remedy/NOIS:
 =======================
 1. HD133710  Outpatient Pharmacy Transmission Error - Optifill
    Duplicates: HD121940
                HD122995
                HD132662
                HD134330
                HD140955
  
 Associated E3R(s):
 ==================
 N/A
  
  
 Test Sites:
 ===========
 Miami,FL
 Mountain Home,TN
 Oklahoma City,OK
 Palo Alto HCS
  
 Routine Summary:
 ===============
 The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;7.0;OUTPATIENT PHARMACY;**[patch list]**;DEC 1997
  
   Using new logic for Integrity Checking tools:
                             CHECK1^XTSUMBLD results
  
 Routine name    Before Patch     After Patch        Patch List
 ============    ============     ===========    ======================
 PSOBBC              86773109        87363308    11,22,27,34,46,130,146
                                                 185,242
 PSOPRI              22681827        22700966    116,204,242
                                                 
           Total number of routines - 2
  
  
  
                          CHECK^XTSUMBLD results
 Routine name    Before Patch     After Patch        Patch List
 ============    ============     ===========    ======================
 PSOBBC              22283408        22296036    11,22,27,34,46,130,146
                                                 185,242
 PSOPRI              14407273        14019357    116,204,242
  
           Total number of routines - 2
  
  
  
 Installation Instructions:
 ==========================
 It is recommended that this patch be installed AFTER normal business 
 hours while NO Outpatient Pharmacy USERS ARE PROCESSING ORDERS.
  
 Installation will take less than 2 minutes.
  
 1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2. From the Kernel Installation & Distribution System menu, select the 
    Installation menu.
  
 3. From this menu, you may select to use the following options: when     
    prompted for INSTALL NAME, enter PSO*7.0*242.
  
      a.  Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
      
      b.  Print Transport Global - This option will allow you to view
          the components of the KIDS build.
      
      c.  Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this 
          patch is installed.  It compares all components of this patch
          (routines, DD's, templates, etc.).
      
      d.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as DD's or templates.
  
  
 4. Use the Install Package(s) option and select the package      
    PSO*7.0*242. 
  
 5. When Prompted "Want KIDS to INHIBIT LOGONs during the install? 
    YES//" respond NO. 
  
 6. When Prompted "Want to DISABLE Scheduled Options, Menu Options, and 
    Protocols? YES//" respond NO.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSOBBC
    Before: B86773109  After: B87363308  **11,22,27,34,46,130,146,185,242**
Routine Name: PSOPRI
    Before: B22681827  After: B22700966  **116,204,242**

=============================================================================
User Information:
Entered By  : NAPOLIELLO,GREG               Date Entered  : MAR 23, 2006
Completed By: ILUSTRISIMO,LUCY              Date Completed: MAY 04, 2006
Released By : WASHINGTON,JANET P            Date Released : MAY 04, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

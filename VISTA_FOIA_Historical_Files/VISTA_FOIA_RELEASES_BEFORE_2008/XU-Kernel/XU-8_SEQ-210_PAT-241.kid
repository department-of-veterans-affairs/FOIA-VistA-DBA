Released XU*8*241 SEQ #210
Extracted from mail message
**KIDS**:XU*8.0*241^

**INSTALL NAME**
XU*8.0*241
"BLD",582,0)
XU*8.0*241^KERNEL^0^3020820^y
"BLD",582,1,0)
^^1^1^3020723^^
"BLD",582,1,1,0)
Please refer to the Description in FORUM Patch Module for details.
"BLD",582,4,0)
^9.64PA^14.7^2
"BLD",582,4,14.7,0)
14.7
"BLD",582,4,14.7,2,0)
^9.641^14.7^1
"BLD",582,4,14.7,2,14.7,0)
TASKMAN SITE PARAMETERS  (File-top level)
"BLD",582,4,14.7,2,14.7,1,0)
^9.6411^6^1
"BLD",582,4,14.7,2,14.7,1,6,0)
TASKMAN JOB LIMIT
"BLD",582,4,14.7,222)
y^y^p^^^^n
"BLD",582,4,8989.3,0)
8989.3
"BLD",582,4,8989.3,2,0)
^9.641^8989.304^1
"BLD",582,4,8989.3,2,8989.304,0)
VOLUME SET  (sub-file)
"BLD",582,4,8989.3,2,8989.304,1,0)
^9.6411^2^1
"BLD",582,4,8989.3,2,8989.304,1,2,0)
MAX SIGNON ALLOWED
"BLD",582,4,8989.3,222)
y^y^p^^^^n
"BLD",582,4,"APDD",14.7,14.7)

"BLD",582,4,"APDD",14.7,14.7,6)

"BLD",582,4,"APDD",8989.3,8989.304)

"BLD",582,4,"APDD",8989.3,8989.304,2)

"BLD",582,4,"B",14.7,14.7)

"BLD",582,4,"B",8989.3,8989.3)

"BLD",582,"KRN",0)
^9.67PA^8989.52^20
"BLD",582,"KRN",.4,0)
.4
"BLD",582,"KRN",.401,0)
.401
"BLD",582,"KRN",.402,0)
.402
"BLD",582,"KRN",.403,0)
.403
"BLD",582,"KRN",.5,0)
.5
"BLD",582,"KRN",.84,0)
.84
"BLD",582,"KRN",3.6,0)
3.6
"BLD",582,"KRN",3.8,0)
3.8
"BLD",582,"KRN",9.2,0)
9.2
"BLD",582,"KRN",9.8,0)
9.8
"BLD",582,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",582,"KRN",9.8,"NM",1,0)
ZIS2^^0^B19355855
"BLD",582,"KRN",9.8,"NM","B","ZIS2",1)

"BLD",582,"KRN",19,0)
19
"BLD",582,"KRN",19.1,0)
19.1
"BLD",582,"KRN",101,0)
101
"BLD",582,"KRN",409.61,0)
409.61
"BLD",582,"KRN",771,0)
771
"BLD",582,"KRN",870,0)
870
"BLD",582,"KRN",8989.51,0)
8989.51
"BLD",582,"KRN",8989.52,0)
8989.52
"BLD",582,"KRN",8994,0)
8994
"BLD",582,"KRN",8994.2,0)
8994.2
"BLD",582,"KRN","B",.4,.4)

"BLD",582,"KRN","B",.401,.401)

"BLD",582,"KRN","B",.402,.402)

"BLD",582,"KRN","B",.403,.403)

"BLD",582,"KRN","B",.5,.5)

"BLD",582,"KRN","B",.84,.84)

"BLD",582,"KRN","B",3.6,3.6)

"BLD",582,"KRN","B",3.8,3.8)

"BLD",582,"KRN","B",9.2,9.2)

"BLD",582,"KRN","B",9.8,9.8)

"BLD",582,"KRN","B",19,19)

"BLD",582,"KRN","B",19.1,19.1)

"BLD",582,"KRN","B",101,101)

"BLD",582,"KRN","B",409.61,409.61)

"BLD",582,"KRN","B",771,771)

"BLD",582,"KRN","B",870,870)

"BLD",582,"KRN","B",8989.51,8989.51)

"BLD",582,"KRN","B",8989.52,8989.52)

"BLD",582,"KRN","B",8994,8994)

"BLD",582,"KRN","B",8994.2,8994.2)

"BLD",582,"QUES",0)
^9.62^^
"BLD",582,"REQB",0)
^9.611^1^1
"BLD",582,"REQB",1,0)
XU*8.0*136^2
"BLD",582,"REQB","B","XU*8.0*136",1)

"FIA",14.7)
TASKMAN SITE PARAMETERS
"FIA",14.7,0)
^%ZIS(14.7,
"FIA",14.7,0,0)
14.7
"FIA",14.7,0,1)
y^y^p^^^^n
"FIA",14.7,0,10)

"FIA",14.7,0,11)

"FIA",14.7,0,"RLRO")

"FIA",14.7,0,"VR")
8.0^XU
"FIA",14.7,14.7)
1
"FIA",14.7,14.7,6)

"FIA",8989.3)
KERNEL SYSTEM PARAMETERS
"FIA",8989.3,0)
^XTV(8989.3,
"FIA",8989.3,0,0)
8989.3P
"FIA",8989.3,0,1)
y^y^p^^^^n
"FIA",8989.3,0,10)

"FIA",8989.3,0,11)

"FIA",8989.3,0,"RLRO")

"FIA",8989.3,0,"VR")
8.0^XU
"FIA",8989.3,8989.3)
1
"FIA",8989.3,8989.304)
1
"FIA",8989.3,8989.304,2)

"MBREQ")
0
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^^0
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^2950703^2970507^.5
"PKG",3,22,1,"PAH",1,0)
241^3020820^2
"PKG",3,22,1,"PAH",1,1,0)
^^1^1^3020820
"PKG",3,22,1,"PAH",1,1,1,0)
Please refer to the Description in FORUM Patch Module for details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ZIS2")
0^1^B19355855
"RTN","ZIS2",1,0)
%ZIS2 ;SFISC/AC,RWF -- DEVICE HANDLER (CHECKS) ;06/12/2002  15:41
"RTN","ZIS2",2,0)
 ;;8.0;KERNEL;**69,104,112,118,136,241**;JUL 10, 1995
"RTN","ZIS2",3,0)
HUNT S:'$D(%ZISHP) %ZISHP=%E,%ZISHGL=0 S %E=0
"RTN","ZIS2",4,0)
 F  S %ZISHGL=$O(^%ZIS(1,%ZISHG(0),"HG",%ZISHGL)) Q:%ZISHGL'>0  D  Q:%E
"RTN","ZIS2",5,0)
 . N %1,%2 S %1=$G(^%ZIS(1,%ZISHG(0),"HG",+%ZISHGL,0)),%2=$G(^%ZIS(1,+%1,0))
"RTN","ZIS2",6,0)
 . ;Check that HG device is on same VOL.
"RTN","ZIS2",7,0)
 . I $P(%2,"^",9)=%ZISV!($P(%2,"^",9)="") S %E=+$P(^%ZIS(1,%ZISHG(0),"HG",+%ZISHGL,0),"^")
"RTN","ZIS2",8,0)
 . Q
"RTN","ZIS2",9,0)
 G L2:%ZISHGL>0 S %ZISHPOP=1,%E=%ZISHP
"RTN","ZIS2",10,0)
 ;
"RTN","ZIS2",11,0)
L2 ;Entry point from %ZIS1
"RTN","ZIS2",12,0)
 I $D(DTOUT)!$D(DUOUT) K %ZISHP,%ZISHPOP Q
"RTN","ZIS2",13,0)
CHECK K %ZISCPU S POP=0,%Z=^%ZIS(1,%E,0),IO=$P(%Z,"^",2)
"RTN","ZIS2",14,0)
 S:%IS["Q"&'$D(ZTQUEUED)&($P(%Z,"^",12)=1!$D(XQNOGO)) %ZISB=0,IO("Q")=1 ;Forced Queueing 
"RTN","ZIS2",15,0)
 I $P(%Z,"^",12)=2 S %IS=$TR(%IS,"Q") I $D(IO("Q")) D  Q
"RTN","ZIS2",16,0)
 . I '$D(IOP) W !,"Queuing NOT ALLOWED on this device"
"RTN","ZIS2",17,0)
 . S POP=1 K:$D(IOP) IO("Q") Q
"RTN","ZIS2",18,0)
 S %Z90=$G(^(90)),%Z95=$G(^(95)),%ZTIME=$G(^("TIME")),%ZTYPE=$G(^("TYPE")),%ZISHG=$O(^%ZIS(1,"AHG",%E,0))
"RTN","ZIS2",19,0)
 I %ZISHG,$D(^%ZIS(1,+%ZISHG,0)) S:'$D(%ZISHG(0)) %ZISHG(0)=+%ZISHG S %ZISHG=$P(^(0),"^",1)
"RTN","ZIS2",20,0)
 E  S %ZISHG=""
"RTN","ZIS2",21,0)
 I %ZTYPE="HG" D OTHCPU("HUNT GROUP") G T:$D(%ZISHG(0))!POP
"RTN","ZIS2",22,0)
 I %ZTYPE="RES" S %ZISRL=+$P(%Z1,"^",10) G T
"RTN","ZIS2",23,0)
VTRM I %ZTYPE="VTRM",'('$D(IO("Q"))&(%A=%H)) W:'$D(IOP)&'$D(%ZISHP) *7,"  [YOU CAN NOT SELECT A VIRTUAL TERMINAL]" S POP=1 ;Virtual Terminal Check
"RTN","ZIS2",24,0)
 S:%ZTYPE="VTRM"&'$D(IO("Q"))&(%A=%H) IO=$I
"RTN","ZIS2",25,0)
 ;
"RTN","ZIS2",26,0)
SLAVE I $D(IO("Q")),$P(%Z,"^",2)=0,$P(%Z,"^",8)']"" W:'$D(IOP) *7,!?10,"  [SLAVE device NOT set up for queuing]" S POP=1 G T
"RTN","ZIS2",27,0)
OCPU D OTHCPU("DEVICE")
"RTN","ZIS2",28,0)
 ;
"RTN","ZIS2",29,0)
OOS G T:POP I %Z90,$D(DT)#2,%Z90'>DT S POP=1 ;Out Of Service Check
"RTN","ZIS2",30,0)
 I $T,'$D(IOP),'$D(%ZISHP) W *7,"  [Out of Service]" ;I 'POP W " ..OK" S %=2,U="^" D YN^%ZIS1 G:%=0 OOS S:%'=1 POP=1
"RTN","ZIS2",31,0)
 ;
"RTN","ZIS2",32,0)
PTIME G T:POP!(IO=$I)!(IO=0)
"RTN","ZIS2",33,0)
 ;Prohibitted Time Check
"RTN","ZIS2",34,0)
 S %A=$P(%ZTIME,"^") I %ZISB,$L(%A) D  I POP,'$D(IOP),'$D(%ZISHP) W *7,"  [ACCESS PROHIBITED "_%A_"]" ;AT THIS TIME]"
"RTN","ZIS2",35,0)
 . N %C,%L,%H ;%C is current time, %L is lower limit, %H is upper limit
"RTN","ZIS2",36,0)
 . S %C=$P($H,",",2),%C=%C\60#60+(%C\3600*100),%H=$P(%A,"-",2),%L=+%A
"RTN","ZIS2",37,0)
 . I $S(%H'<%L:(%C'>%H&(%C'<%L)),1:(%C'<%L!(%C'>%H))) S POP=1
"RTN","ZIS2",38,0)
 . Q
"RTN","ZIS2",39,0)
DUZ I 'POP D SEC ;Security Check
"RTN","ZIS2",40,0)
 ;
"RTN","ZIS2",41,0)
T I POP,$D(%ZISHG(0)),%IS'["D",'$D(%ZISHPOP),%ZISB G HUNT
"RTN","ZIS2",42,0)
 I POP D HGBSY:$D(%ZISHPOP) ;G T2:%IS["T"
"RTN","ZIS2",43,0)
 ;
"RTN","ZIS2",44,0)
TMPVAR K IO("S") S %ZISIOS=%E S:IO=0 IO=$I,IO("S")=%H
"RTN","ZIS2",45,0)
 S %ZISOPAR=$$IOPAR(%E,"IOPAR")
"RTN","ZIS2",46,0)
 S %ZISUPAR=$$IOPAR(%E,"IOUPAR"),%ZISTO=+$P(%ZTIME,"^",2)
"RTN","ZIS2",47,0)
 I $D(IO("S")) D  I POP Q
"RTN","ZIS2",48,0)
 . S IO=$S(%IS["S":$P($G(^%ZIS(1,+$P(%Z,"^",8),0)),"^",2),1:IO)
"RTN","ZIS2",49,0)
 . I %IS["S",IO]"" S %H=+$P(%Z,"^",8),IO("S")=%H,IO(0)=IO
"RTN","ZIS2",50,0)
 . S IO("S")=$S($G(^XUTL("XQ",$J,"IOST(0)")):^("IOST(0)"),1:$G(^%ZIS(1,%H,"SUBTYPE")))
"RTN","ZIS2",51,0)
 . S:IO="" POP=1
"RTN","ZIS2",52,0)
 . Q
"RTN","ZIS2",53,0)
 S %A=+$G(^%ZIS(1,%E,"SUBTYPE")),%ZISTP=0 ;%A is pointer to subtype
"RTN","ZIS2",54,0)
 I %E=%H,%ZTYPE["TRM" D  I 1
"RTN","ZIS2",55,0)
 . I $D(^XUTL("XQ",$J,"IOST(0)")) D  ;Use home
"RTN","ZIS2",56,0)
 . . S %A=+^XUTL("XQ",$J,"IOST(0)"),%Z91="",%ZISTP=1
"RTN","ZIS2",57,0)
 . . F %ZISI="IOM","IOF","IOSL","IOBS","IOXY" S %Z91=%Z91_$G(^XUTL("XQ",$J,%ZISI))_"^"
"RTN","ZIS2",58,0)
 . E  S %=$$LNPRTSUB^%ZISUTL I %>0 S %A=%,%Z91=""
"RTN","ZIS2",59,0)
 E  S %Z91=$P($G(^%ZIS(2,%A,1)),"^",1,4),$P(%Z91,"^",5)=$G(^("XY"))
"RTN","ZIS2",60,0)
 ;I $D(%Z91),%Z91'?1.4"^" ;$P(%Z91,"^")]"",$P(%Z91,"^",2)]"",$P(%Z91,"^",3),$P(%Z91,"^",4)]""
"RTN","ZIS2",61,0)
 D ST^%ZIS3(%ZISTP) S:%IS["U" USIO=$P(%Z91,"^",1,4)
"RTN","ZIS2",62,0)
T2 I POP S:%IS'["T" IO="" Q
"RTN","ZIS2",63,0)
 G ^%ZIS3:"^MTRM^VTRM^TRM^SPL^MT^SDP^HFS^RES^OTH^BAR^HG^IMPC^CHAN^"[("^"_%ZTYPE_"^") ;Jump to next part
"RTN","ZIS2",64,0)
 S POP=1 Q
"RTN","ZIS2",65,0)
 ;
"RTN","ZIS2",66,0)
HGBSY S POP=1 S:%IS'["T" IO="" K %ZISHP,%ZISHPOP Q:$D(IOP)
"RTN","ZIS2",67,0)
 W:$X>38 !,?5 W *7," All devices in hunt group "_%ZISHG_" are busy!" Q
"RTN","ZIS2",68,0)
 ;
"RTN","ZIS2",69,0)
OTHCPU(%1) ;%1 should be either DEVICE or HUNT GROUP
"RTN","ZIS2",70,0)
 N %2,X,Y,%ZISMSG S %ZISMSG=0
"RTN","ZIS2",71,0)
 F %2="CPU","VOLUME SET" D
"RTN","ZIS2",72,0)
 .I %2="VOLUME SET" S X=$P($P(%Z,"^",9),":"),Y=%ZISV
"RTN","ZIS2",73,0)
 .E  D GETENV^%ZOSV S X=$P($P(%Z,"^",9),":",2),Y=$P($P(Y,"^",4),":",2)
"RTN","ZIS2",74,0)
 .I X=Y!(X="") Q:%1="DEVICE"  D  Q  ;Other Vol Set/Cpu Check
"RTN","ZIS2",75,0)
 ..S %ZISHG(0)=%E,%ZISHG=$P(%Z,"^")
"RTN","ZIS2",76,0)
 ..I %ZISB S POP=1
"RTN","ZIS2",77,0)
 ..E  S IO=" "
"RTN","ZIS2",78,0)
 .I %2="VOLUME SET" S $P(%ZISCPU,":")=X
"RTN","ZIS2",79,0)
 .E  S $P(%ZISCPU,":",2)=X
"RTN","ZIS2",80,0)
 .I %1="HUNT GROUP" K %ZISHG(0)
"RTN","ZIS2",81,0)
 .I %IS["Q" S IO("Q")=1,%ZISB=0 S:%1="HUNT GROUP" IO=" "
"RTN","ZIS2",82,0)
 .E  I %ZISB&(%ZTYPE="TRM"&($D(%ZISHG(0))&(%IS'["D"))) S POP=1
"RTN","ZIS2",83,0)
 .E  W:'$D(IOP)&'%ZISMSG *7,"  ["_%1_" is on another "_%2_" ('"_X_"')]",! S POP=1,%ZISMSG=1
"RTN","ZIS2",84,0)
 Q
"RTN","ZIS2",85,0)
IOPAR(%DA,%N) ;Return I/O parameters
"RTN","ZIS2",86,0)
 Q $S($G(%ZIS(%N))]"":%ZIS(%N),1:$G(^%ZIS(1,%DA,%N)))
"RTN","ZIS2",87,0)
 ;
"RTN","ZIS2",88,0)
SEC I %Z95]"" S %X=$G(DUZ(0)) I %X'="@" S POP=1 F %A=1:1:$L(%X) I %Z95[$E(%X,%A) S POP=0 Q
"RTN","ZIS2",89,0)
 I POP,'$D(IOP),'$D(%ZISHP) W *7,"  [Access Prohibited]"
"RTN","ZIS2",90,0)
 Q
"UP",8989.3,8989.304,-1)
8989.3^4
"UP",8989.3,8989.304,0)
8989.304
"VER")
8.0^22.0
"^DD",14.7,14.7,6,0)
TASKMAN JOB LIMIT^RNJ4,0^^0;7^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1.N) X
"^DD",14.7,14.7,6,1,0)
^.1
"^DD",14.7,14.7,6,1,1,0)
14.7^AD^MUMPS
"^DD",14.7,14.7,6,1,1,1)
I X]"" D ^XUTMG14P
"^DD",14.7,14.7,6,1,1,2)
Q
"^DD",14.7,14.7,6,1,1,"%D",0)
^^1^1^2910213^
"^DD",14.7,14.7,6,1,1,"%D",1,0)
This cross-reference notifies TaskMan of changes to the field.
"^DD",14.7,14.7,6,1,1,"DT")
2910213
"^DD",14.7,14.7,6,3)
Type a number between 1 and 9999, 0 Decimal Digits
"^DD",14.7,14.7,6,10)
System manager.
"^DD",14.7,14.7,6,11,0)
^.2LAP^1^1
"^DD",14.7,14.7,6,11,1,0)
1
"^DD",14.7,14.7,6,21,0)
^^8^8^3020717^
"^DD",14.7,14.7,6,21,1,0)
If there are more active processes on the system than this number, TaskMan
"^DD",14.7,14.7,6,21,2,0)
will not create new submanagers to handle tasks.  Task processing will
"^DD",14.7,14.7,6,21,3,0)
be left to existing submanagers until the number of processes falls back
"^DD",14.7,14.7,6,21,4,0)
below this number.
"^DD",14.7,14.7,6,21,5,0)
 
"^DD",14.7,14.7,6,21,6,0)
This number should be slightly lower than the Max Signons field of the
"^DD",14.7,14.7,6,21,7,0)
Kernel Site Parameters file, so that the system manager still has room
"^DD",14.7,14.7,6,21,8,0)
to sign on when TaskMan is using its greatest number of partitions.
"^DD",14.7,14.7,6,"AUDIT")
n
"^DD",14.7,14.7,6,"DT")
3020717
"^DD",8989.3,8989.304,2,0)
MAX SIGNON ALLOWED^NJ5,0^^0;3^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1.N) X
"^DD",8989.3,8989.304,2,1,0)
^.1^^0
"^DD",8989.3,8989.304,2,1,1,0)
8989.3^AZTM^MUMPS
"^DD",8989.3,8989.304,2,1,1,1)
Q
"^DD",8989.3,8989.304,2,1,1,2)
Q
"^DD",8989.3,8989.304,2,1,1,"DT")
2910225
"^DD",8989.3,8989.304,2,3)
Type a number between 0 and 10000, 0 Decimal Digits
"^DD",8989.3,8989.304,2,20,0)
^.3LA^^0
"^DD",8989.3,8989.304,2,21,0)
^^2^2^3020717^
"^DD",8989.3,8989.304,2,21,1,0)
This field defines the maximum number of jobs that XUS or RPC Broker will
"^DD",8989.3,8989.304,2,21,2,0)
allow to sign-on to this VOLUME SET or CPU.
"^DD",8989.3,8989.304,2,"DT")
3020717
**END**
**END**

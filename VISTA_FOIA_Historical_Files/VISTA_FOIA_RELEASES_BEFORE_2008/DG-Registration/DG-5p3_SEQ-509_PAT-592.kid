Released DG*5.3*592 SEQ #509
Extracted from mail message
**KIDS**:DG*5.3*592^

**INSTALL NAME**
DG*5.3*592
"BLD",5455,0)
DG*5.3*592^REGISTRATION^0^3040331^y
"BLD",5455,1,0)
^^2^2^3040331^
"BLD",5455,1,1,0)
Fix for blank level 2 and higher totals for Cum ADC on the Bed Status 
"BLD",5455,1,2,0)
Report caused by DG*5.3*529.
"BLD",5455,4,0)
^9.64PA^^
"BLD",5455,"KRN",0)
^9.67PA^8989.52^19
"BLD",5455,"KRN",.4,0)
.4
"BLD",5455,"KRN",.401,0)
.401
"BLD",5455,"KRN",.402,0)
.402
"BLD",5455,"KRN",.403,0)
.403
"BLD",5455,"KRN",.5,0)
.5
"BLD",5455,"KRN",.84,0)
.84
"BLD",5455,"KRN",3.6,0)
3.6
"BLD",5455,"KRN",3.8,0)
3.8
"BLD",5455,"KRN",9.2,0)
9.2
"BLD",5455,"KRN",9.8,0)
9.8
"BLD",5455,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",5455,"KRN",9.8,"NM",1,0)
DGPMBSP3^^0^B14019003
"BLD",5455,"KRN",9.8,"NM",2,0)
DGPMBSP2^^0^B20107984
"BLD",5455,"KRN",9.8,"NM",3,0)
DGPMBSP4^^0^B6227947
"BLD",5455,"KRN",9.8,"NM","B","DGPMBSP2",2)

"BLD",5455,"KRN",9.8,"NM","B","DGPMBSP3",1)

"BLD",5455,"KRN",9.8,"NM","B","DGPMBSP4",3)

"BLD",5455,"KRN",19,0)
19
"BLD",5455,"KRN",19.1,0)
19.1
"BLD",5455,"KRN",101,0)
101
"BLD",5455,"KRN",409.61,0)
409.61
"BLD",5455,"KRN",771,0)
771
"BLD",5455,"KRN",870,0)
870
"BLD",5455,"KRN",8989.51,0)
8989.51
"BLD",5455,"KRN",8989.52,0)
8989.52
"BLD",5455,"KRN",8994,0)
8994
"BLD",5455,"KRN","B",.4,.4)

"BLD",5455,"KRN","B",.401,.401)

"BLD",5455,"KRN","B",.402,.402)

"BLD",5455,"KRN","B",.403,.403)

"BLD",5455,"KRN","B",.5,.5)

"BLD",5455,"KRN","B",.84,.84)

"BLD",5455,"KRN","B",3.6,3.6)

"BLD",5455,"KRN","B",3.8,3.8)

"BLD",5455,"KRN","B",9.2,9.2)

"BLD",5455,"KRN","B",9.8,9.8)

"BLD",5455,"KRN","B",19,19)

"BLD",5455,"KRN","B",19.1,19.1)

"BLD",5455,"KRN","B",101,101)

"BLD",5455,"KRN","B",409.61,409.61)

"BLD",5455,"KRN","B",771,771)

"BLD",5455,"KRN","B",870,870)

"BLD",5455,"KRN","B",8989.51,8989.51)

"BLD",5455,"KRN","B",8989.52,8989.52)

"BLD",5455,"KRN","B",8994,8994)

"BLD",5455,"QUES",0)
^9.62^^
"BLD",5455,"REQB",0)
^9.611^1^1
"BLD",5455,"REQB",1,0)
DG*5.3*529^2
"BLD",5455,"REQB","B","DG*5.3*529",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
592^3040331^100850
"PKG",5,22,1,"PAH",1,1,0)
^^2^2^3040331
"PKG",5,22,1,"PAH",1,1,1,0)
Fix for blank level 2 and higher totals for Cum ADC on the Bed Status 
"PKG",5,22,1,"PAH",1,1,2,0)
Report caused by DG*5.3*529.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","DGPMBSP2")
0^2^B20107984
"RTN","DGPMBSP2",1,0)
DGPMBSP2 ;ALB/LM - BSR PRINT, CONT.; 17 OCT 90 ; 3/29/04 8:24pm
"RTN","DGPMBSP2",2,0)
 ;;5.3;Registration;**59,592**;Aug 13, 1993
"RTN","DGPMBSP2",3,0)
 ;
"RTN","DGPMBSP2",4,0)
A S BD=1 S BD("DY")=BD("OSD") ;(BD*BD("M")) ;  Total Elapsed Fiscal Days * Bed Days Multipler
"RTN","DGPMBSP2",5,0)
 S ^UTILITY("DGWBD",$J,+ORDER)=BD("DY")_"^"_BD("S")_"^"_BD("D")_"^"_BD("CB") ;  Total Elapsed Fiscal Days * Bed Days Multipler_^_Include Stat's_^_Display on BSR_^_Cum Beds
"RTN","DGPMBSP2",6,0)
 Q:'BD("S")  ; Include Stat's
"RTN","DGPMBSP2",7,0)
 ;
"RTN","DGPMBSP2",8,0)
CENSUS S X=$S($D(^DG(41.9,W,"C",RD,0)):^(0),1:"") ;  Census File 0 Node (Report Date) NEW NODE
"RTN","DGPMBSP2",9,0)
 S ^UTILITY("DGWNN",$J,ORDER)=X ;  Census File 0 Node (Report Date) NEW NODE
"RTN","DGPMBSP2",10,0)
 S ^UTILITY("DGWON",$J,ORDER)=$S($D(^DG(41.9,W,"C",FY("L"),0)):^(0),1:"") ;  Census File 0 Node (last fiscal year) OLD NODE
"RTN","DGPMBSP2",11,0)
 S X(1)=$S($D(^DG(41.9,W,"C",RD,1)):^(1),1:"") ;  Census File 1 Node (Report Date)
"RTN","DGPMBSP2",12,0)
 S X1=$S($D(^DG(41.9,W,"C",PD,0)):^(0),1:"") ;  Census File 0 Node (Previous Date)
"RTN","DGPMBSP2",13,0)
 S:$E(PD,4,7)="0930" X1="^"_$P(X1,"^",2) ; Pats Remaining
"RTN","DGPMBSP2",14,0)
 ;
"RTN","DGPMBSP2",15,0)
PM S BD("PM")=$S($D(^DG(41.9,W,"C",FY("EOM"),0)):+$P(^(0),"^",3),1:0) ;  Cum Pat Days of Care
"RTN","DGPMBSP2",16,0)
 S:$E(FY("EOM"),4,7)="0930" BD("PM")=0
"RTN","DGPMBSP2",17,0)
 ;
"RTN","DGPMBSP2",18,0)
N ;  BD("N") = BSR Display Stat's Node  ;  $P(1,2)=Name of Ward^Bed Section
"RTN","DGPMBSP2",19,0)
 S $P(BD("N"),"^",3)=+$P(X1,"^",2) ;  Pats Remaining (Previous Date)
"RTN","DGPMBSP2",20,0)
 S $P(BD("N"),"^",4)=$P(X,"^",28)-$P(X1,"^",28) ;  Gains Total Cum (new) - Gains Total Cum (previous)
"RTN","DGPMBSP2",21,0)
 S $P(BD("N"),"^",5)=$P(X,"^",24)-$P(X1,"^",24) ; losses (new) - losses (previous)
"RTN","DGPMBSP2",22,0)
 S $P(BD("N"),"^",6)=+$P(X,"^",2) ;  Pats Remaining
"RTN","DGPMBSP2",23,0)
 S $P(BD("N"),"^",7)=+$P(X(1),"^",5) ;  AA<96
"RTN","DGPMBSP2",24,0)
 S $P(BD("N"),"^",8)=+$P(X(1),"^",6) ;  AA
"RTN","DGPMBSP2",25,0)
 S $P(BD("N"),"^",9)=+$P(X(1),"^",7) ;  UA
"RTN","DGPMBSP2",26,0)
 S $P(BD("N"),"^",10)=+$P(X(1),"^",8) ;  ASIH
"RTN","DGPMBSP2",27,0)
 ;
"RTN","DGPMBSP2",28,0)
BEDS S BD("DOS")=+$P(X(1),"^",9) ;  Beds OOS
"RTN","DGPMBSP2",29,0)
 S BD("AB")=+$P(X(1),"^",10) ;  Auth Beds
"RTN","DGPMBSP2",30,0)
 S X(2)=(BD("AB")-BD("DOS")) ;  Auth Beds - Bed OOS
"RTN","DGPMBSP2",31,0)
 S $P(BD("N"),"^",11)=$S(BD("AB")&($P(X,"^",2)'>X(2)):(BD("AB")-($P(X,"^",2)+BD("DOS"))),1:0) ;  AB=Auth Bed - Pat Remaining + Beds OOS = Vacant Beds
"RTN","DGPMBSP2",32,0)
 S $P(BD("N"),"^",12)=+BD("DOS") ;  Beds OOS
"RTN","DGPMBSP2",33,0)
 S $P(BD("N"),"^",13)=$P(X(1),"^",2) ; Operation Beds
"RTN","DGPMBSP2",34,0)
 S $P(BD("N"),"^",14)=$S($P(X,"^",2)'>X(2):0,1:$P(X,"^",2)-X(2)) ; Pats Remaining greater than Auth Bed - Bed OOS = Over Cap Beds
"RTN","DGPMBSP2",35,0)
 S $P(BD("N"),"^",15)=BD("AB") ; AB=Auth Bed
"RTN","DGPMBSP2",36,0)
 ;
"RTN","DGPMBSP2",37,0)
ADC S BD("P")=+$P(X,"^",3) ;  Cum Pat Days of Care (new)
"RTN","DGPMBSP2",38,0)
 ;S X(2)=(BD("P")/FY("D")) ;  Cum Pat Days of Care/Days into Fiscal Year (Cum Ave Daily Census)
"RTN","DGPMBSP2",39,0)
 S X(2)=$S(FY("D")-BD("OSD"):BD("P")/(FY("D")-BD("OSD")),1:0) ;  Pat Days/Total Elapsed Fiscal Days - days OOS (Cum ADC*)
"RTN","DGPMBSP2",40,0)
 S X(3)=(BD("P")*100) ;  Cum Pat Days of Care * 100
"RTN","DGPMBSP2",41,0)
 ;
"RTN","DGPMBSP2",42,0)
 S BD("OR")=$S(BD("CB")>0:(X(3)/BD("CB")),1:0) ;  Cum Beds >0 then Pat Days of Care * 100 divided by Cum Beds (Cum Occ. Rate)
"RTN","DGPMBSP2",43,0)
 S $P(BD("N"),"^",16)=$J(X(2),0,1) ;  Cum ADC
"RTN","DGPMBSP2",44,0)
 S $P(BD("N"),"^",17)=$J(BD("OR"),0,1)_"%" ;  Cum Occ. Rate
"RTN","DGPMBSP2",45,0)
 S $P(BD("N"),"^",18)=BD("P") ;  Cum Pat Days of Care (new) ADC
"RTN","DGPMBSP2",46,0)
 ;
"RTN","DGPMBSP2",47,0)
OOS ; OOS stats
"RTN","DGPMBSP2",48,0)
 S X(2)=$S(FY("D")-BD("OSD"):BD("P")/(FY("D")-BD("OSD")),1:0) ;  Pat Days/Total Elapsed Fiscal Days - days OOS (Cum ADC*)
"RTN","DGPMBSP2",49,0)
 S X(3)=(BD("P")*100) ;  Pat Days * 100
"RTN","DGPMBSP2",50,0)
 ; *Occ Rate is *ADC multiplied by 100 divided by FYTD-OOS days
"RTN","DGPMBSP2",51,0)
 S BD("OOR")=$S(BD("CB")>0:(X(3)/BD("CB")),1:0) ;  Cum Beds >0 then Pat Days of Care * 100 divided by Cum Beds (Cum Occ. Rate*)
"RTN","DGPMBSP2",52,0)
 ;
"RTN","DGPMBSP2",53,0)
NODE S ^UTILITY("DGWOR",$J,ORDER)=BD("N") ;  BSR Display Stat's Node
"RTN","DGPMBSP2",54,0)
 S ADC=+BD("P")_"^"_(+BD("P")-(BD("PM"))) ; Cum Pat Days of Care new ADC _^_ Cum Pat Days of Care new ADC _^_ Cum Pt Day of Care FY
"RTN","DGPMBSP2",55,0)
 F X=1:1:2 S $P(ADC(BD("DV"),BD("ADC")),"^",X)=$P(ADC(BD("DV"),BD("ADC")),"^",X)+$P(ADC,"^",X) ;  BD("DV") = Division  BD("ADC") = Service Type
"RTN","DGPMBSP2",56,0)
 S X=^UTILITY("DGWPL",$J,BD("PL")) ;  BD("PL") = Primary Location
"RTN","DGPMBSP2",57,0)
 ;F I=3:1:15,18 S $P(X,"^",I)=$P(X,"^",I)+$P(BD("N"),"^",I)
"RTN","DGPMBSP2",58,0)
 F I=3:1:16,18 S $P(X,"^",I)=$P(X,"^",I)+$P(BD("N"),"^",I) ;DG*5.3*592
"RTN","DGPMBSP2",59,0)
 ;
"RTN","DGPMBSP2",60,0)
SET S ^UTILITY("DGWPL",$J,BD("PL"))=X ;  Ward totals
"RTN","DGPMBSP2",61,0)
 S X=^UTILITY("DGWPLT",$J,BD("PL"))
"RTN","DGPMBSP2",62,0)
 S $P(X,"^")=$P(X,"^")+1
"RTN","DGPMBSP2",63,0)
 S $P(X,"^",2)=$P(X,"^",2)+BD("DY") ;  Total elasped fiscal days * bed day multipler
"RTN","DGPMBSP2",64,0)
 S $P(X,"^",3)=$P(X,"^",3)+BD("CB") ; Cum beds
"RTN","DGPMBSP2",65,0)
 S ^UTILITY("DGWPLT",$J,BD("PL"))=X ;  Total of wards _^_ Total elapsed fiscal days * bed days multipler _^_ Cum bed
"RTN","DGPMBSP2",66,0)
Q Q
"RTN","DGPMBSP3")
0^1^B14019003
"RTN","DGPMBSP3",1,0)
DGPMBSP3 ;ALB/LM - BSR PRINT, CONT.; 13 JUNE 90 ; 3/31/04 10:43am
"RTN","DGPMBSP3",2,0)
 ;;5.3;Registration;**59,85,529,592**;Aug 13, 1993
"RTN","DGPMBSP3",3,0)
 ;
"RTN","DGPMBSP3",4,0)
A S NTOTAL="",(ORDER,CW,CB,CUM,BD,CT)=0
"RTN","DGPMBSP3",5,0)
 ;  ^UTILITY("DGWOR",$J,ORDER)=19 PIECE PRINT/STATS LINE
"RTN","DGPMBSP3",6,0)
 F O1=0:0 S ORDER=$O(^UTILITY("DGWOR",$J,ORDER)) Q:ORDER'>0  S DGWOR=^(ORDER),BDAY=$S($D(^UTILITY("DGWBD",$J,ORDER)):^(ORDER),1:0) D WR
"RTN","DGPMBSP3",7,0)
 K BD,BDAY,C,CB,CW,I,I1,L,N,N1,ORDER,O1,TL,W,X,X1,Y,T,T1,T2,T3,TN,TX,TY,DGWOR,DGWON,DGWNN,DGWTOR
"RTN","DGPMBSP3",8,0)
Q Q
"RTN","DGPMBSP3",9,0)
 ;
"RTN","DGPMBSP3",10,0)
 ;  $P(BDAY,"^",3) = Display on BSR
"RTN","DGPMBSP3",11,0)
WR I $P(BDAY,"^",3) W ! F W=1:1:18 W ?+$P(TAB,"^",W),$J($P(DGWOR,"^",W),$P(JUS,"^",W))
"RTN","DGPMBSP3",12,0)
 ;  $P(BDAY,"^",2) = Include Stats
"RTN","DGPMBSP3",13,0)
 I $P(BDAY,"^",2) D CUM F N1=3:1:16,18 S $P(NTOTAL,"^",N1)=$P(NTOTAL,"^",N1)+$P(DGWOR,"^",N1)
"RTN","DGPMBSP3",14,0)
 Q:$O(^UTILITY("DGWTOR",$J,ORDER,0))'>0
"RTN","DGPMBSP3",15,0)
 S TL=0
"RTN","DGPMBSP3",16,0)
 ;  ^UTILITY("DGWTOR",$J,ORDER,TOTAL LEVEL)=TOTAL NAME ^ PRINT IN CUM TOTALS (ORDER TOTAL)
"RTN","DGPMBSP3",17,0)
 F TL1=0:0 S TL=$O(^UTILITY("DGWTOR",$J,ORDER,TL)) Q:TL'>0  S DGWTOR=^(TL) D TL
"RTN","DGPMBSP3",18,0)
 Q
"RTN","DGPMBSP3",19,0)
 ;
"RTN","DGPMBSP3",20,0)
CUM S CW=CW+1 ; Count Ward
"RTN","DGPMBSP3",21,0)
 S CB=CB+$P(BDAY,"^",4) ;  Cum Beds
"RTN","DGPMBSP3",22,0)
 S BD=BD+BDAY ; Total Elapsed Fiscal Days
"RTN","DGPMBSP3",23,0)
 S DGWON=$S($D(^UTILITY("DGWON",$J,ORDER)):^(ORDER),1:0) ; Last year 0 Node for ward (Old Node)
"RTN","DGPMBSP3",24,0)
 S DGWNN=$S($D(^UTILITY("DGWNN",$J,ORDER)):^(ORDER),1:0) ;  RD's 0 Node for Ward (New Node)
"RTN","DGPMBSP3",25,0)
 S C=0
"RTN","DGPMBSP3",26,0)
 F I=17,29,23,5,6,8,3 F I1=DGWON,DGWNN S C=C+1,$P(CUM,"^",C)=$P(CUM,"^",C)+$P(I1,"^",I)
"RTN","DGPMBSP3",27,0)
 ; CUM=old cum adm^new cum adm^old IWT^new IWT^old cum inter svc xfrs in^new cum inter svc xfers in^old cum disch^new cum disch^old cum inter xfers^new cum inter xfers^old inter svc xfers^new inter svc xfers^old cum bed^new cum bed
"RTN","DGPMBSP3",28,0)
 Q
"RTN","DGPMBSP3",29,0)
 ;
"RTN","DGPMBSP3",30,0)
TL S TC(TL,ORDER)=CUM
"RTN","DGPMBSP3",31,0)
 S TL(TL,ORDER)=NTOTAL
"RTN","DGPMBSP3",32,0)
 S TB(TL,ORDER)=BD_"^"_CW_"^"_CB ;  TOTAL ELAPSED FISCAL DAYS ^ COUNT WARD ^ CUM BED
"RTN","DGPMBSP3",33,0)
 I TL=1 S W=NTOTAL,T2=ORDER D TWR Q
"RTN","DGPMBSP3",34,0)
 S NTOTAL="",T=0
"RTN","DGPMBSP3",35,0)
 F T1=0:0 S T=$O(TL(TL-1,T)) Q:T'>0!(T>ORDER)  S T2=T,TN=TL(TL-1,T),TX=TB(TL-1,T),TY=TC(TL-1,T) D MTL
"RTN","DGPMBSP3",36,0)
 S:$P(DGWTOR,"^",2) CUM(T2,TL)=$P(DGWTOR,"^")_"^"_TC(TL,T2),CT=CT+1 ; CT=CUM TOTAL
"RTN","DGPMBSP3",37,0)
 S CUM="",(W,TL(TL,T2))=NTOTAL D TWR
"RTN","DGPMBSP3",38,0)
 Q
"RTN","DGPMBSP3",39,0)
 ;
"RTN","DGPMBSP3",40,0)
TWR N DGDNTD
"RTN","DGPMBSP3",41,0)
 S DGDNTD=$S($P(DGWTOR,"^")["DON'T DISPLAY":1,1:0)
"RTN","DGPMBSP3",42,0)
 I DGDNTD,TL=1 W:UL["-" ! F L=1:1:131 W UL
"RTN","DGPMBSP3",43,0)
 I 'DGDNTD D
"RTN","DGPMBSP3",44,0)
 .W:$Y<131 ?131,"" W $C(13) W:UL["-" ! F L=1:1:131 W UL
"RTN","DGPMBSP3",45,0)
 .W !
"RTN","DGPMBSP3",46,0)
 .D PTOT ; print line on BSR
"RTN","DGPMBSP3",47,0)
 ; code below updates cums
"RTN","DGPMBSP3",48,0)
 S (CB,BD,CW,NTOTAL)=""
"RTN","DGPMBSP3",49,0)
 I $S('$P(DGWTOR,"^",2):1,TL'=1:1,1:0) S CUM="" Q
"RTN","DGPMBSP3",50,0)
 S CUM(ORDER,TL)=$P(DGWTOR,"^")_"^"_CUM
"RTN","DGPMBSP3",51,0)
 S CUM=""
"RTN","DGPMBSP3",52,0)
 S CT=CT+1 ;  CUM TOTAL
"RTN","DGPMBSP3",53,0)
 Q
"RTN","DGPMBSP3",54,0)
 ;
"RTN","DGPMBSP3",55,0)
PTOT ; Calc Vacant, Overcapacity Beds for Totals
"RTN","DGPMBSP3",56,0)
 S $P(W,"^",11)=$S(+$P(W,"^",13)>+$P(W,"^",6):($P(W,"^",13)-$P(W,"^",6)),1:0) ; Vacant Beds = Operating Beds - Patients Remaining
"RTN","DGPMBSP3",57,0)
 S $P(W,"^",14)=$S(+$P(W,"^",6)>+$P(W,"^",13):($P(W,"^",6)-$P(W,"^",13)),1:0) ; Overcapacity = Patients Remaining - Operating Beds
"RTN","DGPMBSP3",58,0)
 W $P(DGWTOR,"^") ;  Total (level name)
"RTN","DGPMBSP3",59,0)
 ;F I=3:1:16 W ?+$P(TAB,"^",I),$J($P(W,"^",I),$P(JUS,"^",I))
"RTN","DGPMBSP3",60,0)
 F I=3:1:15 W ?+$P(TAB,"^",I),$J($P(W,"^",I),$P(JUS,"^",I)) ;DG*5.3*592
"RTN","DGPMBSP3",61,0)
 S X(16)=$J($P(W,"^",16),0,1) ;DG*5.3*592
"RTN","DGPMBSP3",62,0)
 S X(17)=$S($P(TB(TL,T2),"^",3)'>0:0,1:$P(W,"^",18)*100/($P(TB(TL,T2),"^",3))) ;  Cum Patient Days*100/Cum Beds
"RTN","DGPMBSP3",63,0)
 S X(17)=$J(X(17),0,1)_"%" ; Cum Occ Rate
"RTN","DGPMBSP3",64,0)
 S X(18)=$P(W,"^",18) ; Cum Pat Days
"RTN","DGPMBSP3",65,0)
 ;F I=17:1:18 W ?+$P(TAB,"^",I),$J(X(I),$P(JUS,"^",I))
"RTN","DGPMBSP3",66,0)
 F I=16:1:18 W ?+$P(TAB,"^",I),$J(X(I),$P(JUS,"^",I)) ;DG*5.3*592
"RTN","DGPMBSP3",67,0)
 W:$Y<131 ?131,"" W $C(13) W:UL["-" ! F L=1:1:131 W UL
"RTN","DGPMBSP3",68,0)
 I $Y>$S($D(IOSL):(IOSL-5),1:61) D HEAD^DGPMBSP,HEAD2^DGPMBSP
"RTN","DGPMBSP3",69,0)
 Q
"RTN","DGPMBSP3",70,0)
 ;
"RTN","DGPMBSP3",71,0)
MTL ;F N1=3:1:15,18 S $P(NTOTAL,"^",N1)=$P(NTOTAL,"^",N1)+$P(TN,"^",N1)
"RTN","DGPMBSP3",72,0)
 F N1=3:1:16,18 S $P(NTOTAL,"^",N1)=$P(NTOTAL,"^",N1)+$P(TN,"^",N1) ;DG*5.3*592
"RTN","DGPMBSP3",73,0)
 S T3=$O(TB(TL,T))
"RTN","DGPMBSP3",74,0)
 I T'>T3 S T2=T3
"RTN","DGPMBSP3",75,0)
 F N1=1:1:3 S $P(TB(TL,T2),"^",N1)=$P(TB(TL,T2),"^",N1)+$P(TX,"^",N1)
"RTN","DGPMBSP3",76,0)
 I $P(DGWTOR,"^",2) F N1=1:1:15 S $P(TC(TL,T2),"^",N1)=$P(TC(TL,T2),"^",N1)+$P(TY,"^",N1)
"RTN","DGPMBSP3",77,0)
 K TC(TL-1,T),TL(TL-1,T),TB(TL-1,T),N1,T3
"RTN","DGPMBSP3",78,0)
 Q
"RTN","DGPMBSP4")
0^3^B6227947
"RTN","DGPMBSP4",1,0)
DGPMBSP4 ;ALB/LM - BSR PRINT, CONT.; 13 JUNE 90 ; 3/29/04 9:02pm
"RTN","DGPMBSP4",2,0)
 ;;5.3;Registration;**592**;Aug 13, 1993
"RTN","DGPMBSP4",3,0)
 ;
"RTN","DGPMBSP4",4,0)
A Q:'PL
"RTN","DGPMBSP4",5,0)
 ;
"RTN","DGPMBSP4",6,0)
 S X="T O T A L S   B Y   P R I M A R Y   W A R D   L O C A T I O N"
"RTN","DGPMBSP4",7,0)
 ;
"RTN","DGPMBSP4",8,0)
 W ! W:$Y<131 ?131,"" W $C(13) W:UL["-" ! F L=1:1:131 W UL
"RTN","DGPMBSP4",9,0)
 W !?0,"|",?(RM-$L(X)\2),X,?130,"|"
"RTN","DGPMBSP4",10,0)
 W:$Y<131 ?131,"" W $C(13) W:UL["-" ! F L=1:1:131 W UL
"RTN","DGPMBSP4",11,0)
 ;
"RTN","DGPMBSP4",12,0)
HEAD2 W !?0,"|",?71,"Va-",?92,"Over",?116,"Cum",?127,"Cum|"
"RTN","DGPMBSP4",13,0)
 W !?0,"|",?2,"Primary",?21,"Prev",?39,"Pt's",?71,"cant",?78,"Beds",?85,"Oper",?92,"Cap.",?100,"Auth",?108,"Cum",?116,"Occ.",?123,"Patient|"
"RTN","DGPMBSP4",14,0)
 W !?0,"|",?2,"Location",?21,"Rem.",?27,"Gain",?33,"Loss",?39,"Rem.",?45,"Pass",?53,"AA",?59,"UA",?64,"ASIH",?71,"Beds",?79,"OOS",?85,"Beds",?92,"Beds",?100,"Beds",?108,"ADC",?116,"Rate",?126,"Days|"
"RTN","DGPMBSP4",15,0)
 W:$Y<131 ?131,"" W $C(13) W:UL["-" ! F L=1:1:131 W UL
"RTN","DGPMBSP4",16,0)
 ;
"RTN","DGPMBSP4",17,0)
 S I=0 F I1=0:0 S I=$O(^UTILITY("DGWPL",$J,I)) Q:I=""  S X=^(I),X1=$S($D(^UTILITY("DGWPLT",$J,I)):^(I),1:0) D WR
"RTN","DGPMBSP4",18,0)
 W:$Y<131 ?131,"" W $C(13) W:UL["-" ! F L=1:1:131 W UL
"RTN","DGPMBSP4",19,0)
 K I,I1,X1,L
"RTN","DGPMBSP4",20,0)
HEAD2Q Q
"RTN","DGPMBSP4",21,0)
 ;
"RTN","DGPMBSP4",22,0)
WR W !?0,"|",I
"RTN","DGPMBSP4",23,0)
 S $P(X,"^",11)=$S(+$P(X,"^",13)>+$P(X,"^",6):($P(X,"^",13)-$P(X,"^",6)),1:0) ; Vacant Beds = Operating Beds - Patients Remaining
"RTN","DGPMBSP4",24,0)
 S $P(X,"^",14)=$S(+$P(X,"^",6)>+$P(X,"^",13):($P(X,"^",6)-$P(X,"^",13)),1:0) ; Overcapacity = Patients Remaining - Operating Beds
"RTN","DGPMBSP4",25,0)
 F N=3:1:15 W ?+$P(TAB,"^",N),$J($P(X,"^",N),+$P(JUS,"^",N))
"RTN","DGPMBSP4",26,0)
 ;S X(16)=($P(X,"^",18)/FY("D"))
"RTN","DGPMBSP4",27,0)
 S X(16)=$P(X,"^",16) ;DG*5.3*592
"RTN","DGPMBSP4",28,0)
 ;S X2=$P(X1,"^",3)/FY("D")
"RTN","DGPMBSP4",29,0)
 S X2=$P(X1,"^",3) ;DG*5.3*592
"RTN","DGPMBSP4",30,0)
 ;S X(17)=$S(X2'>0:0,1:((X(16)*100)/X2))
"RTN","DGPMBSP4",31,0)
 S X(17)=$S(X2'>0:0,1:(($P(X,"^",18)*100)/X2)) ; DG*5.3*592
"RTN","DGPMBSP4",32,0)
 S X(16)=$J(X(16),0,1)
"RTN","DGPMBSP4",33,0)
 S X(17)=$J(X(17),0,1)_"%"
"RTN","DGPMBSP4",34,0)
 S X(18)=+$P(X,"^",18)
"RTN","DGPMBSP4",35,0)
 S X2=$P(X1,"^",2)/$P(X1,"^")
"RTN","DGPMBSP4",36,0)
 F N=16:1:18 W ?+$P(TAB,"^",N),$J(X(N),$P(JUS,"^",N))
"RTN","DGPMBSP4",37,0)
 W ?30,"|"
"RTN","DGPMBSP4",38,0)
WRQ Q
"VER")
8.0^22
**END**
**END**

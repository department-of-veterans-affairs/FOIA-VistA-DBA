$TXT Created by MONGER,GARY P at TEST.HEVET.MED.VA.GOV  (KIDS) on Tuesday, 07/18/06 at 15:53
=============================================================================
Run Date: JUL 26, 2006                     Designation: MHV*1*1
Package : MHV - My HealtheVet                 Priority: Mandatory
Version : 1         SEQ #1                      Status: Released
                  Compliance Date: AUG 26, 2006
=============================================================================


Subject: MHV LOGGING

Category: 
  - Routine
  - Other

Description:
============

  
 The MHV 1.0 release for MHV Rx Refill went to the field with logging to a
 TMP global left on.  The non-standard use of TMP by the MHV log causes
 the TMP entries to not be cleaned up automatically.
 This patch will turn off logging in the HL7 receiver routines allowing it
 to be switched on and off externally as designed.  An XTMP global will be
 used instead of TMP.  Options will be added to control logging and to
 facilitate automatically purging the log.  A post-init will run to clean
 up any existing TMP("MHV7LOG") entries.
  
 A new menu, MHV LOG MENU, has been added.  The log provides information 
 of use to MHV developers, and should only be used by IRM staff in the 
 event troubleshooting an MHV interface becomes necessary.  The MHV User 
 Manual provides information on how to use these options.
 Included options are:
         MHV LOG CONFIG     Configure Logging Parameters
         MHV LOG INFO       Display Log Information
         MHV LOG OFF        Turn Off Logging
         MHV LOG ON         Turn On Logging
         MHV LOG PURGE      Purge Log
         MHV LOG SIZE       Display Log Size
         MHV LOG VIEW       View Log Entries
  
 A new option has been added, MHV CLIENT, as a broker context for a future 
 MHV GUI client.  The following remote procedures are also included:
         MHV LOG INFO
         MHV LOG OFF
         MHV LOG ON
         MHV LOG PURGE
         MHV LOG SIZE
         MHV LOG CONFIG
         MHV LOG SUMMARY
         MHV LOG DETAIL
  
 The MHV 1.0 release went to the field with two HL7 protocols having the
 "debug" flag set.  These event driver protocols will be released with the 
 flag turned off.  The following protocols are being shipped:
         MHV OMP-O09 Event Driver
         MHV OMP-O09 Subscriber
         MHV QBP-Q13 Event Driver
         MHV QBP-Q13 Subscriber
  
  
 Associated Remedy Ticket
 ====================
 HD 131029
  
 Test Sites
 ==========
 Tampa VAMC
 Bay Pines VAMC
 Baltimore VAMC
 Upstate New York HCS 
  
  
 SOFTWARE AND DOCUMENTATION RETRIEVAL
 ====================================
 The software for this patch is distributed as KIDS build MHV*1.0*1.
 Upon release of this patch to the field, the My HealtheVet User
 Manual and the updated My HealtheVet Technical Manual will be available
 through the VistA Documentation Library (VDL) at the following address:
   
    http://www.va.gov/vdl/HealtheVet.asp?appID=153
  
  
  
  
 INSTALLATION INSTRUCTIONS
 ==========================
 The patch is distributed in KIDS format in a PackMan message.
  
 This patch requires MHV 1.0
  
  
                        **WARNING**
  
 Inbound HL7 messages for MHV should not be processed during installation
 of this patch. All incoming filers should be stopped before installation.
   
 Before you install this patch in production, please identify all the
 production node(s) that have the TMP("MHV7LOG") global.  This should be
 the same node(s) running the HL7 Listener.  You will need to log on to
 each of these node(s) and run the post-init routine CLEANLOG^MHV1P1 to
 delete the global entries since TMP is not translated.  The
 TMP("MHV7LOG") global should have many entries.
  
                            ****
  
  
                        **Notice**
 This patch includes new options.
 When an option is included in the patch build, the question REBUILD MENUS
 is asked as a PRE-INSTALL question. If you choose to have KIDs rebuild
 the menus it will happen at the end of the build installation and may
 take several hours.
  
 Note: Most sites have a nightly batch job that rebuilds the menus so if
 you queued the installations ensure that it will complete prior to the
 batch job.  Or, if you are installing several builds, wait until the
 last one to use the KIDs rebuild functionality.
  
                           ****
  
 The install time for this patch is less than 5 minutes. This patch can be
 installed with users on the system.
  
  
  
  1.  These routines should not be mapped.
  
  2.  Unload the distribution
      Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
      the KIDS distribution included with this message.
  
  3.  Stop all incoming filers.
      On the 'Filer and Link Management Options' menu, select the
      'Monitor, Start, Stop Filers' option.  At that menu level, choose
      the action 'Stop incoming filer' to stop each incoming filer.
  
  4.  Install the transport global.
      From the Kernel Installation and Distribution System Menu,
      select the Installation menu.
  
  5.  From this menu, you may elect to use the following options
      (when prompted for INSTALL NAME, enter MHV*1.0*1):
      a.  Backup a Transport Global - this option will create a backup
          message of any routines exported with the patch.  It will NOT
          backup any other changes such as DDs or templates.
      b.  Compare Transport Global to Current System  - this option will
          allow you to view all changes that will be made when the patch
          is installed.  It compares all components of the patch
          (routines, DDs, templates, etc.).
      c.  Verify Checksums in Transport Global - this option will
          allow you to ensure the integrity of the routines that are in
          the transport global.
      d.  Print Transport Global - this option will allow you to view the
          components of the KIDS build.
  
  6.  Use the 'Install Package(s)' option under the 'Installation' menu
      and select the package 'MHV*1.0*1'.
  
  7.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
      Install? YES//',  Respond as fits your situation, see note above.
  
  8.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
      YES//',  respond NO.
  
  9.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//', choose 'NO'.
  
 10.  At the DEVICE prompt, you can send your output to any printer or
      HFS file, display it on the terminal screen, or queue it to run
      at a scheduled time.
  
 11.  After the install, restart the incoming filers.
      On the 'Filer and Link Management Options' menu, select the
      'Monitor, Start, Stop Filers' option.  At that menu level, choose
      the action 'Start incoming filer' to start the default number of
      incoming filers.
  
 12.  Log on to each node running the HL7 listener and run the post init
      Routine CLEANLOG^MHV1P1.
  
  
   
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab> ;;1.0;My HealtheVet;**1**;Aug 23, 2005
  
                             CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List
 ============      ============          ===========         ==========
 MHV1P1            N/A                   674288                1
 MHV7R1            7907937               7704915               1
 MHV7R2            8857636               8693511               1
 MHV7U             6547453               7067072               1
 MHVUL1            N/A                   5527922               1
 MHVUL2            N/A                   5279644               1
 MHVUL3            N/A                   10342175              1

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MHV1P1
    Before:       n/a  After:  B1114062  **1**
Routine Name: MHV7R1
    Before: B39959689  After: B39557430  **1**
Routine Name: MHV7R2
    Before: B44015238  After: B43834803  **1**
Routine Name: MHV7U
    Before: B62743685  After: B80060951  **1**
Routine Name: MHVUL1
    Before:       n/a  After: B38158397  **1**
Routine Name: MHVUL2
    Before:       n/a  After: B24353171  **1**
Routine Name: MHVUL3
    Before:       n/a  After: B77590189  **1**

=============================================================================
User Information:
Entered By  : MONGER,GARY                   Date Entered  : NOV 18, 2005
Completed By: BUCIUMAN-COMAN,LIANA          Date Completed: JUL 24, 2006
Released By : SCRUGGS,CARNETTA              Date Released : JUL 26, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

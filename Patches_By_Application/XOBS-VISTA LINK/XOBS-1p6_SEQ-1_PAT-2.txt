$TXT Created by                  at MNTVBB.DOMAIN.EXT  (KIDS) on Thursday, 11/09/17 at 13:37
=============================================================================
Run Date: MAR 12, 2018                     Designation: XOBS*1.6*2
Package : XOBS - VISTALINK SECURITY           Priority: Mandatory
Version : 1.6         SEQ #1                    Status: Released
                  Compliance Date: APR 12, 2018
=============================================================================

Associated patches: (v)XOBS*1.6*0  <<= must be installed BEFORE `XOBS*1.6*2'

Subject: SYMBOL TABLE NOT CLEANED/CONTEXT VARIABLE NOT DEFINED

Category: 
  - Routine

Description:
============

 This patch corrects 2 issues within the VISTALINK SECURITY package:
  
 Application variables not cleaned up between RPC requests.
 VistALink's context variables are not updated properly.
  
 Patch Components:
 ----------------- 
  
 Files & Fields Associated:
  
 File Name (Number)      Field Name (Number)     New/Modified/Deleted
 ------------------      -------------------     --------------------
 N/A
  
 Forms Associated:
  
 Form Name               File #                  New/Modified/Deleted
 ---------               ------                  --------------------
 N/A
  
  
 Mail Groups Associated:
  
 Mail Group Name         New/Modified/Deleted
 ---------------         --------------------
 N/A
  
  
 Options Associated:
  
 Option Name             Type                    New/Modified/Deleted
 -----------             ----                    --------------------
 N/A
  
  
 Protocols Associated:
  
 Protocol Name           New/Modified/Deleted
 -------------           --------------------
 N/A
  
  
 Security Keys Associated:
  
 Security Key Name
 -----------------
 N/A
  
  
 Templates Associated:
  
 Template Name   Type    File Name (Number)      New/Modified/Deleted
 -------------   ----    ------------------      --------------------
 N/A
  
 Additional Information:
 N/A
  
  
 New Service Requests (NSRs):
 ----------------------------
 N/A
  
  
 Patient Safety Issues (PSIs):
 -----------------------------
 N/A
  
  
 Defect Tracking System Ticket(s) & Overview:
 --------------------------------------------
  
 1.  I10829557FY16 - VistA/M symbol table not cleaned between RPC requests
  
  Problem:
  --------
  If an RPC request is made within a certain period of time (perhaps 1
  hour) after a previous RPC request, it is possible that the same M
  partition is reused and not cleaned of local variables that were set in
  the previous request. The existence of variables in the symbol table may
  cause unexpected results for the current RPC request.
  
  Solution:
  ---------
  The routine XOBSRA has been modified to fully erase the previous request 
  variables.
  
  Technical:
  ----------
  Routine XOBSRA has been modified to do a screened partition cleanup 
  before exiting.
  
  
  
 2.  I10829475FY16 - Need XQY defined during VistALink J2EE RPC execution
  
  Problem:
  --------
  The "context" is only partially erased at the end of a VistALink RPC 
  call. The context variables, XQY and XQY0, contain an OPTION file IEN and
  Name respectively and are used to identify the calling RPC Broker
  context. A routine can use these variables to identify if it is being
  called by a VistALink application and, in some cases, what action the
  user is attempting. When a new call is made this results in certain cases
  where the context is only partially updated. (Currently, there is no
  known nationally released software that is called by a VistALink
  application and checks for these variables.)
  
  Solution:
  ---------
  The routine XOBSRA has been modified to fully erase the context 
  variables.
  
  Technical:
  ----------
  The XQY0 variable is not being killed at the end of an RPC call through 
  VistALink. This is due to a typographical error in FINAL^XOBSRA where the
  code tries to kill XQYQ - which is not variable name used by VistALink. 
  This means that the XQY variable is killed but not XQY0. When a new call 
  is made the code that sets the context, CRCONTXT^XOBSCAV, notices that 
  XQY0 is still set and exits out leaving XQY blank. 
  
  
 Test Sites:
 -----------
 Minneapolis VA Medical Center
 VA North Texas Health Care System 
  
  
 Software and Documentation Retrieval Instructions:
 --------------------------------------------------
 N/A
  
  
 Patch Installation:
  
 Pre/Post Installation Overview:
 -------------------------------
 This patch can be loaded with users in the system. This patch should take
 less than 2 minutes to install.
  
  
 Pre-Installation Instructions:
 ------------------------------
 N/A
  
 Installation Instructions:
 --------------------------
  
  1.  Choose the PackMan message containing this patch.
  
  2.  Choose the INSTALL/CHECK MESSAGE PackMan option. 
  
  3.  From the Kernel Installation and Distribution System Menu, select
      the Installation Menu. From this menu, you may elect to use the 
      following options. When prompted for the INSTALL NAME enter
      XOBS*1.6*2:
  
      a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will
          not backup any other changes such as DD's or templates.
      b.  Compare Transport Global to Current System - This option
          will allow you to view all changes that will be made when
          this patch is installed. It compares all components of this
          patch (routines, DD's, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will
          allow you to ensure the integrity of the routines that are
          in the transport global.
  
 4.  From the Installation Menu, select the Install Package(s) option
     and choose the patch to install.
  
 5.  When Prompted "Want KIDS to INHIBIT LOGONs during the install? NO//",
     respond NO.  
     
 6.  When Prompted "Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? NO//", respond NO.
  
  
 Post-Installation Instructions:
 -------------------------------
 N/A
  
  
 Back-Out Plan:
 --------------
 This patch can be backed out by installing the routines/packman message 
 created from the installation instruction, Step 3.a. Backup a Transport 
 Global.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;1.6;VistALink Security;**[Patch List]**;May 08, 2009;Build 3

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: XOBSRA
    Before: B61930744   After: B61888471  **2**

=============================================================================
User Information:
Entered By  :                               Date Entered  : AUG 29, 2017
Completed By:                               Date Completed: MAR 08, 2018
Released By :                               Date Released : MAR 12, 2018
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released SD*5.3*415 SEQ #361
Extracted from mail message
**KIDS**:SD*5.3*415^

**INSTALL NAME**
SD*5.3*415
"BLD",4645,0)
SD*5.3*415^SCHEDULING^0^3051026^y
"BLD",4645,1,0)
^^2^2^3050408^^
"BLD",4645,1,1,0)
This patch permits inter-facility transfer of Electronic Wait List 
"BLD",4645,1,2,0)
Veterans.
"BLD",4645,4,0)
^9.64PA^409.3^3
"BLD",4645,4,409.3,0)
409.3
"BLD",4645,4,409.3,2,0)
^9.641^409.3^1
"BLD",4645,4,409.3,2,409.3,0)
SD WAIT LIST  (File-top level)
"BLD",4645,4,409.3,2,409.3,1,0)
^9.6411^21^1
"BLD",4645,4,409.3,2,409.3,1,21,0)
DISPOSITION
"BLD",4645,4,409.3,222)
y^y^p^^^^n^^n
"BLD",4645,4,409.3,224)

"BLD",4645,4,409.35,0)
409.35
"BLD",4645,4,409.35,222)
y^y^f^^^^n
"BLD",4645,4,409.36,0)
409.36
"BLD",4645,4,409.36,222)
y^y^f^^^^n
"BLD",4645,4,"APDD",409.3,409.3)

"BLD",4645,4,"APDD",409.3,409.3,21)

"BLD",4645,4,"B",409.3,409.3)

"BLD",4645,4,"B",409.35,409.35)

"BLD",4645,4,"B",409.36,409.36)

"BLD",4645,"ABPKG")
n
"BLD",4645,"KRN",0)
^9.67PA^8989.52^19
"BLD",4645,"KRN",.4,0)
.4
"BLD",4645,"KRN",.401,0)
.401
"BLD",4645,"KRN",.402,0)
.402
"BLD",4645,"KRN",.403,0)
.403
"BLD",4645,"KRN",.5,0)
.5
"BLD",4645,"KRN",.84,0)
.84
"BLD",4645,"KRN",3.6,0)
3.6
"BLD",4645,"KRN",3.8,0)
3.8
"BLD",4645,"KRN",3.8,"NM",0)
^9.68A^1^1
"BLD",4645,"KRN",3.8,"NM",1,0)
SDWL-TRANSFER-ADMIN^^0
"BLD",4645,"KRN",3.8,"NM","B","SDWL-TRANSFER-ADMIN",1)

"BLD",4645,"KRN",9.2,0)
9.2
"BLD",4645,"KRN",9.8,0)
9.8
"BLD",4645,"KRN",9.8,"NM",0)
^9.68A^15^14
"BLD",4645,"KRN",9.8,"NM",1,0)
SDWLIFT^^0^B39472292
"BLD",4645,"KRN",9.8,"NM",2,0)
SDWLIFT1^^0^B11341369
"BLD",4645,"KRN",9.8,"NM",3,0)
SDWLIFT2^^0^B7114075
"BLD",4645,"KRN",9.8,"NM",4,0)
SDWLIFT3^^0^B36385612
"BLD",4645,"KRN",9.8,"NM",5,0)
SDWLIFT5^^0^B15806000
"BLD",4645,"KRN",9.8,"NM",6,0)
SDWLIFT6^^0^B38500505
"BLD",4645,"KRN",9.8,"NM",7,0)
SDWLIFT7^^0^B7912820
"BLD",4645,"KRN",9.8,"NM",8,0)
SDWLIFT4^^0^B2713587
"BLD",4645,"KRN",9.8,"NM",10,0)
SDWLE^^0^B27132811
"BLD",4645,"KRN",9.8,"NM",11,0)
SDWLIFT0^^0^B23628296
"BLD",4645,"KRN",9.8,"NM",12,0)
SDWLROI^^0^B34011534
"BLD",4645,"KRN",9.8,"NM",13,0)
SDWLRSR^^0^B34050609
"BLD",4645,"KRN",9.8,"NM",14,0)
SDWLRSRS^^0^B31011915
"BLD",4645,"KRN",9.8,"NM",15,0)
SDWLROIS^^0^B30608896
"BLD",4645,"KRN",9.8,"NM","B","SDWLE",10)

"BLD",4645,"KRN",9.8,"NM","B","SDWLIFT",1)

"BLD",4645,"KRN",9.8,"NM","B","SDWLIFT0",11)

"BLD",4645,"KRN",9.8,"NM","B","SDWLIFT1",2)

"BLD",4645,"KRN",9.8,"NM","B","SDWLIFT2",3)

"BLD",4645,"KRN",9.8,"NM","B","SDWLIFT3",4)

"BLD",4645,"KRN",9.8,"NM","B","SDWLIFT4",8)

"BLD",4645,"KRN",9.8,"NM","B","SDWLIFT5",5)

"BLD",4645,"KRN",9.8,"NM","B","SDWLIFT6",6)

"BLD",4645,"KRN",9.8,"NM","B","SDWLIFT7",7)

"BLD",4645,"KRN",9.8,"NM","B","SDWLROI",12)

"BLD",4645,"KRN",9.8,"NM","B","SDWLROIS",15)

"BLD",4645,"KRN",9.8,"NM","B","SDWLRSR",13)

"BLD",4645,"KRN",9.8,"NM","B","SDWLRSRS",14)

"BLD",4645,"KRN",19,0)
19
"BLD",4645,"KRN",19,"NM",0)
^9.68A^8^7
"BLD",4645,"KRN",19,"NM",1,0)
SDWL TRANSFER ACCEPT^^0
"BLD",4645,"KRN",19,"NM",2,0)
SDWL TRANSFER REQUEST^^0
"BLD",4645,"KRN",19,"NM",3,0)
SDWL-XFER-SERVER^^0
"BLD",4645,"KRN",19,"NM",4,0)
SDWL TRANSFER PRINT REQUESTS^^0
"BLD",4645,"KRN",19,"NM",6,0)
SD WAIT LIST REPORTS MENU^^3
"BLD",4645,"KRN",19,"NM",7,0)
SDSUP^^3
"BLD",4645,"KRN",19,"NM",8,0)
SD WAIT LIST UTILITIES^^0
"BLD",4645,"KRN",19,"NM","B","SD WAIT LIST REPORTS MENU",6)

"BLD",4645,"KRN",19,"NM","B","SD WAIT LIST UTILITIES",8)

"BLD",4645,"KRN",19,"NM","B","SDSUP",7)

"BLD",4645,"KRN",19,"NM","B","SDWL TRANSFER ACCEPT",1)

"BLD",4645,"KRN",19,"NM","B","SDWL TRANSFER PRINT REQUESTS",4)

"BLD",4645,"KRN",19,"NM","B","SDWL TRANSFER REQUEST",2)

"BLD",4645,"KRN",19,"NM","B","SDWL-XFER-SERVER",3)

"BLD",4645,"KRN",19.1,0)
19.1
"BLD",4645,"KRN",101,0)
101
"BLD",4645,"KRN",101,"NM",0)
^9.68A^16^15
"BLD",4645,"KRN",101,"NM",2,0)
SDWL XFER ACC MNU MAIN^^0
"BLD",4645,"KRN",101,"NM",3,0)
SDWL XFER ACC MNU VIEW^^0
"BLD",4645,"KRN",101,"NM",4,0)
SDWL XFER ACC VIEW^^0
"BLD",4645,"KRN",101,"NM",5,0)
SDWL XFER REQ MNU MAIN^^0
"BLD",4645,"KRN",101,"NM",6,0)
SDWL XFER REQ MNU REMV^^0
"BLD",4645,"KRN",101,"NM",7,0)
SDWL XFER REQ MNU VIEW^^0
"BLD",4645,"KRN",101,"NM",8,0)
SDWL XFER REQ NEW^^0
"BLD",4645,"KRN",101,"NM",9,0)
SDWL XFER REQ REMV^^0
"BLD",4645,"KRN",101,"NM",10,0)
SDWL XFER REQ REMV CONF^^0
"BLD",4645,"KRN",101,"NM",11,0)
SDWL XFER REQ VIEW^^0
"BLD",4645,"KRN",101,"NM",12,0)
SDWL XFER ACC ACCEPT^^0
"BLD",4645,"KRN",101,"NM",13,0)
SDWL XFER ACC REJECT^^0
"BLD",4645,"KRN",101,"NM",14,0)
SDWL XFER ACC PRINT C/S^^0
"BLD",4645,"KRN",101,"NM",15,0)
SDWL XFER REQ INAC^^0
"BLD",4645,"KRN",101,"NM",16,0)
SDWL XFER REQ MNU INAC^^0
"BLD",4645,"KRN",101,"NM","B","SDWL XFER ACC ACCEPT",12)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER ACC MNU MAIN",2)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER ACC MNU VIEW",3)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER ACC PRINT C/S",14)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER ACC REJECT",13)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER ACC VIEW",4)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER REQ INAC",15)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER REQ MNU INAC",16)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER REQ MNU MAIN",5)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER REQ MNU REMV",6)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER REQ MNU VIEW",7)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER REQ NEW",8)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER REQ REMV",9)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER REQ REMV CONF",10)

"BLD",4645,"KRN",101,"NM","B","SDWL XFER REQ VIEW",11)

"BLD",4645,"KRN",409.61,0)
409.61
"BLD",4645,"KRN",409.61,"NM",0)
^9.68A^6^6
"BLD",4645,"KRN",409.61,"NM",1,0)
SDWL TRANSFER ACC MAIN^^0
"BLD",4645,"KRN",409.61,"NM",2,0)
SDWL TRANSFER ACC VIEW^^0
"BLD",4645,"KRN",409.61,"NM",3,0)
SDWL TRANSFER REQ MAIN^^0
"BLD",4645,"KRN",409.61,"NM",4,0)
SDWL TRANSFER REQ REMV^^0
"BLD",4645,"KRN",409.61,"NM",5,0)
SDWL TRANSFER REQ VIEW^^0
"BLD",4645,"KRN",409.61,"NM",6,0)
SDWL TRANSFER REQ INAC^^0
"BLD",4645,"KRN",409.61,"NM","B","SDWL TRANSFER ACC MAIN",1)

"BLD",4645,"KRN",409.61,"NM","B","SDWL TRANSFER ACC VIEW",2)

"BLD",4645,"KRN",409.61,"NM","B","SDWL TRANSFER REQ INAC",6)

"BLD",4645,"KRN",409.61,"NM","B","SDWL TRANSFER REQ MAIN",3)

"BLD",4645,"KRN",409.61,"NM","B","SDWL TRANSFER REQ REMV",4)

"BLD",4645,"KRN",409.61,"NM","B","SDWL TRANSFER REQ VIEW",5)

"BLD",4645,"KRN",771,0)
771
"BLD",4645,"KRN",870,0)
870
"BLD",4645,"KRN",8989.51,0)
8989.51
"BLD",4645,"KRN",8989.52,0)
8989.52
"BLD",4645,"KRN",8994,0)
8994
"BLD",4645,"KRN","B",.4,.4)

"BLD",4645,"KRN","B",.401,.401)

"BLD",4645,"KRN","B",.402,.402)

"BLD",4645,"KRN","B",.403,.403)

"BLD",4645,"KRN","B",.5,.5)

"BLD",4645,"KRN","B",.84,.84)

"BLD",4645,"KRN","B",3.6,3.6)

"BLD",4645,"KRN","B",3.8,3.8)

"BLD",4645,"KRN","B",9.2,9.2)

"BLD",4645,"KRN","B",9.8,9.8)

"BLD",4645,"KRN","B",19,19)

"BLD",4645,"KRN","B",19.1,19.1)

"BLD",4645,"KRN","B",101,101)

"BLD",4645,"KRN","B",409.61,409.61)

"BLD",4645,"KRN","B",771,771)

"BLD",4645,"KRN","B",870,870)

"BLD",4645,"KRN","B",8989.51,8989.51)

"BLD",4645,"KRN","B",8989.52,8989.52)

"BLD",4645,"KRN","B",8994,8994)

"BLD",4645,"QUES",0)
^9.62^^
"BLD",4645,"REQB",0)
^9.611^1^1
"BLD",4645,"REQB",1,0)
SD*5.3*327^2
"BLD",4645,"REQB","B","SD*5.3*327",1)

"FIA",409.3)
SD WAIT LIST
"FIA",409.3,0)
^SDWL(409.3,
"FIA",409.3,0,0)
409.3IP
"FIA",409.3,0,1)
y^y^p^^^^n^^n
"FIA",409.3,0,10)

"FIA",409.3,0,11)

"FIA",409.3,0,"RLRO")

"FIA",409.3,0,"VR")
5.3^SD
"FIA",409.3,409.3)
1
"FIA",409.3,409.3,21)

"FIA",409.35)
SDWL TRANSFER REQUEST
"FIA",409.35,0)
^SDWL(409.35,
"FIA",409.35,0,0)
409.35P
"FIA",409.35,0,1)
y^y^f^^^^n
"FIA",409.35,0,10)

"FIA",409.35,0,11)

"FIA",409.35,0,"RLRO")

"FIA",409.35,0,"VR")
5.3^SD
"FIA",409.35,409.35)
0
"FIA",409.35,409.355)
0
"FIA",409.36)
SDWL TRANSFER ACCEPT
"FIA",409.36,0)
^SDWL(409.36,
"FIA",409.36,0,0)
409.36P
"FIA",409.36,0,1)
y^y^f^^^^n
"FIA",409.36,0,10)

"FIA",409.36,0,11)

"FIA",409.36,0,"RLRO")

"FIA",409.36,0,"VR")
5.3^SD
"FIA",409.36,409.36)
0
"FIA",409.36,409.364)
0
"IX",409.35,409.35,"C",0)
409.35^C^ift^R^^F^IR^I^409.35^^^^^LS
"IX",409.35,409.35,"C",.1,0)
^^1^1^3050307^
"IX",409.35,409.35,"C",.1,1,0)
ift
"IX",409.35,409.35,"C",1)
Q
"IX",409.35,409.35,"C",2)
Q
"IX",409.35,409.35,"C",11.1,0)
^.114IA^^
"KRN",3.8,316,-1)
0^1
"KRN",3.8,316,0)
SDWL-TRANSFER-ADMIN^PU^y^^^^
"KRN",3.8,316,2,0)
^3.801^6^6^3050506^^^
"KRN",3.8,316,2,1,0)
This mail group is for the administration of the SD Wait List 
"KRN",3.8,316,2,2,0)
Inter-Facility Transfer function.
"KRN",3.8,316,2,3,0)
 
"KRN",3.8,316,2,4,0)
When an appropriate action has occurred, such as the receipt of a request 
"KRN",3.8,316,2,5,0)
to transfer a patient from a Wait List to this facility, the members 
"KRN",3.8,316,2,6,0)
of this mail group are notified that the action has occurred.
"KRN",3.8,316,3)

"KRN",19,627,-1)
3^7
"KRN",19,627,0)
SDSUP^Supervisor Menu^^M^^^^^^^^SCHEDULING
"KRN",19,627,1,0)
^19.06^2^2^3051026^^^^
"KRN",19,627,1,1,0)
This is the primary menu option which allows the user access to all
"KRN",19,627,1,2,0)
supervisor functions of the scheduling module.
"KRN",19,627,10,0)
^19.01IP^22^21
"KRN",19,627,10,22,0)
12607
"KRN",19,627,10,22,"^")
SD WAIT LIST UTILITIES
"KRN",19,627,99)
60199,41757
"KRN",19,627,99.1)
55542,52893
"KRN",19,627,"U")
SUPERVISOR MENU
"KRN",19,12077,-1)
3^6
"KRN",19,12077,0)
SD WAIT LIST REPORTS MENU^Wait List (Sch/PCMM) Reports^^M^^^^^^^^^^1^1
"KRN",19,12077,10,0)
^19.01IP^9^9
"KRN",19,12077,10,9,0)
12546^8
"KRN",19,12077,10,9,"^")
SDWL TRANSFER PRINT REQUESTS
"KRN",19,12077,15)
D EN^SDWLKIL
"KRN",19,12077,20)
D EN^SDWLKIL
"KRN",19,12077,99)
60172,53034
"KRN",19,12077,"U")
WAIT LIST (SCH/PCMM) REPORTS
"KRN",19,12230,-1)
0^1
"KRN",19,12230,0)
SDWL TRANSFER ACCEPT^Inter-Facility Transfer Accept^^A^^^^^^^^^^1^1
"KRN",19,12230,15)
D EXIT^SDWLIFT5
"KRN",19,12230,20)
D EN^SDWLIFT5
"KRN",19,12230,99)
59962,57194
"KRN",19,12230,"U")
INTER-FACILITY TRANSFER ACCEPT
"KRN",19,12231,-1)
0^2
"KRN",19,12231,0)
SDWL TRANSFER REQUEST^Inter-Facility Transfer Request^^A^^^^^^^^^^1^1
"KRN",19,12231,15)
D EXIT^SDWLIFT1
"KRN",19,12231,20)
D EN^SDWLIFT1
"KRN",19,12231,"U")
INTER-FACILITY TRANSFER REQUES
"KRN",19,12243,-1)
0^3
"KRN",19,12243,0)
SDWL-XFER-SERVER^SDWL Transfer Message Server^^S^^^^^^^^
"KRN",19,12243,1,0)
^19.06^2^2^3050414^^^^
"KRN",19,12243,1,1,0)
This option handles incoming transfer request messages placing data in a 
"KRN",19,12243,1,2,0)
holding file and alerting anyone required.
"KRN",19,12243,25)
SDWLIFT
"KRN",19,12243,220)
^R^^^^N
"KRN",19,12243,"U")
SDWL TRANSFER MESSAGE SERVER
"KRN",19,12546,-1)
0^4
"KRN",19,12546,0)
SDWL TRANSFER PRINT REQUESTS^Print Transfer Requests^^A^^^^^^^^^^1
"KRN",19,12546,20)
D REQS^SDWLIFT7
"KRN",19,12546,"U")
PRINT TRANSFER REQUESTS
"KRN",19,12607,-1)
0^8
"KRN",19,12607,0)
SD WAIT LIST UTILITIES^Wait List (Sch/PCMM) Utilities^^M^^SDWL MENU^^^^^^SCHEDULING^^1^1
"KRN",19,12607,10,0)
^19.01IP^2^2
"KRN",19,12607,10,1,0)
12231^1^1
"KRN",19,12607,10,1,"^")
SDWL TRANSFER REQUEST
"KRN",19,12607,10,2,0)
12230^2^2
"KRN",19,12607,10,2,"^")
SDWL TRANSFER ACCEPT
"KRN",19,12607,15)
D EXMNU^SDWLIFT
"KRN",19,12607,20)
D ENMNU^SDWLIFT
"KRN",19,12607,99)
60024,50630
"KRN",19,12607,"U")
WAIT LIST (SCH/PCMM) UTILITIES
"KRN",101,4913,-1)
0^8
"KRN",101,4913,0)
SDWL XFER REQ NEW^New Transfer^^A^^^^^^^^SCHEDULING
"KRN",101,4913,2,0)
^101.02A^^0
"KRN",101,4913,4)
^^^NE
"KRN",101,4913,15)

"KRN",101,4913,20)
D EN^SDWLIFT3
"KRN",101,4913,99)
59955,54542
"KRN",101,4914,-1)
0^5
"KRN",101,4914,0)
SDWL XFER REQ MNU MAIN^SDWL Transfer Request Menu^^M^^^^^^^^SCHEDULING
"KRN",101,4914,4)
40^4
"KRN",101,4914,10,0)
^101.01PA^5^4
"KRN",101,4914,10,1,0)
4913^N^1^
"KRN",101,4914,10,1,"^")
SDWL XFER REQ NEW
"KRN",101,4914,10,3,0)
4916^V^^
"KRN",101,4914,10,3,"^")
SDWL XFER REQ VIEW
"KRN",101,4914,10,4,0)
4919^R^^
"KRN",101,4914,10,4,"^")
SDWL XFER REQ REMV
"KRN",101,4914,10,5,0)
5051^D^^
"KRN",101,4914,10,5,"^")
SDWL XFER REQ INAC
"KRN",101,4914,26)
D SHOW^VALM
"KRN",101,4914,28)
Select Action: 
"KRN",101,4914,29)

"KRN",101,4914,99)
60011,37807
"KRN",101,4916,-1)
0^11
"KRN",101,4916,0)
SDWL XFER REQ VIEW^View Request Details^^A^^^^^^^^SCHEDULING
"KRN",101,4916,2,0)
^101.02A^^0
"KRN",101,4916,10,0)
^101.01PA
"KRN",101,4916,15)
D EXIT^SDWLIFT2
"KRN",101,4916,20)
D EN^SDWLIFT2
"KRN",101,4916,99)
59982,42222
"KRN",101,4919,-1)
0^9
"KRN",101,4919,0)
SDWL XFER REQ REMV^Remove Transfer Request^^A^^^^^^^^SCHEDULING
"KRN",101,4919,2,0)
^101.02A^1^1
"KRN",101,4919,2,1,0)
RE
"KRN",101,4919,2,"B","RE",1)

"KRN",101,4919,15)
D EXIT^SDWLIFT2
"KRN",101,4919,20)
D EN^SDWLIFT4
"KRN",101,4919,99)
59967,54583
"KRN",101,4920,-1)
0^10
"KRN",101,4920,0)
SDWL XFER REQ REMV CONF^Remove^^A^^^^^^^^SCHEDULING
"KRN",101,4920,2,0)
^101.02A^^0
"KRN",101,4920,10,0)
^101.01PA^^0
"KRN",101,4920,20)
D REMOVE^SDWLIFT4
"KRN",101,4920,99)
60003,45280
"KRN",101,4921,-1)
0^6
"KRN",101,4921,0)
SDWL XFER REQ MNU REMV^SDWL Transfer Request Remove Menu^^M^^^^^^^^SCHEDULING
"KRN",101,4921,10,0)
^101.01PA^1^1
"KRN",101,4921,10,1,0)
4920^R^^
"KRN",101,4921,10,1,"^")
SDWL XFER REQ REMV CONF
"KRN",101,4921,20)

"KRN",101,4921,26)
D SHOW^VALM
"KRN",101,4921,28)

"KRN",101,4921,29)
R
"KRN",101,4921,99)
60004,43675
"KRN",101,4923,-1)
0^4
"KRN",101,4923,0)
SDWL XFER ACC VIEW^View Details^^A^^^^^^^^SCHEDULING
"KRN",101,4923,2,0)
^101.02A^2^2
"KRN",101,4923,2,1,0)
VE
"KRN",101,4923,2,2,0)
VI
"KRN",101,4923,2,"B","VE",1)

"KRN",101,4923,2,"B","VI",2)

"KRN",101,4923,15)
D EXIT^SDWLIFT6
"KRN",101,4923,20)
D EN^SDWLIFT6
"KRN",101,4923,99)
59982,53831
"KRN",101,4924,-1)
0^2
"KRN",101,4924,0)
SDWL XFER ACC MNU MAIN^SDWL Transfer Accept Menu^^M^^^^^^^^SCHEDULING
"KRN",101,4924,10,0)
^101.01PA^1^1
"KRN",101,4924,10,1,0)
4923^V^^
"KRN",101,4924,10,1,"^")
SDWL XFER ACC VIEW
"KRN",101,4924,26)
D SHOW^VALM
"KRN",101,4924,28)
Select Action: 
"KRN",101,4924,99)
60004,40567
"KRN",101,4925,-1)
0^7
"KRN",101,4925,0)
SDWL XFER REQ MNU VIEW^SDWL Transfer Request Details^^M^^^^^^^^SCHEDULING
"KRN",101,4925,10,0)
^101.01PA^^0
"KRN",101,4925,15)

"KRN",101,4925,20)

"KRN",101,4925,26)
D SHOW^VALM
"KRN",101,4925,99)
60004,40410
"KRN",101,4940,-1)
0^3
"KRN",101,4940,0)
SDWL XFER ACC MNU VIEW^SDWL Transfer Accept Details^^M^^^^^^^^SCHEDULING
"KRN",101,4940,4)
25
"KRN",101,4940,10,0)
^101.01PA^5^3
"KRN",101,4940,10,2,0)
5015^P^^
"KRN",101,4940,10,2,"^")
SDWL XFER ACC PRINT C/S
"KRN",101,4940,10,4,0)
5017^R^^
"KRN",101,4940,10,4,"^")
SDWL XFER ACC REJECT
"KRN",101,4940,10,5,0)
5018^A^^
"KRN",101,4940,10,5,"^")
SDWL XFER ACC ACCEPT
"KRN",101,4940,26)
D SHOW^VALM
"KRN",101,4940,99)
60011,36047
"KRN",101,5015,-1)
0^14
"KRN",101,5015,0)
SDWL XFER ACC PRINT C/S^Print Coversheet^^A^^^^^^^^SCHEDULING
"KRN",101,5015,2,0)
^101.02A^1^1
"KRN",101,5015,2,1,0)
PC
"KRN",101,5015,2,"B","PC",1)

"KRN",101,5015,20)
D ^SDWLIFT7
"KRN",101,5015,99)
60000,37550
"KRN",101,5017,-1)
0^13
"KRN",101,5017,0)
SDWL XFER ACC REJECT^Reject^^A^^^^^^^^SCHEDULING
"KRN",101,5017,2,0)
^101.02A^1^1
"KRN",101,5017,2,1,0)
RJ
"KRN",101,5017,2,"B","RJ",1)

"KRN",101,5017,20)
D REJECT^SDWLIFT6
"KRN",101,5017,99)
60000,37684
"KRN",101,5018,-1)
0^12
"KRN",101,5018,0)
SDWL XFER ACC ACCEPT^Accept^^A^^^^^^^^
"KRN",101,5018,2,0)
^101.02A^^0
"KRN",101,5018,20)
D ACCEPT^SDWLIFT6
"KRN",101,5018,99)
60001,39684
"KRN",101,5051,-1)
0^15
"KRN",101,5051,0)
SDWL XFER REQ INAC^Display Inactive Entries^^A^^^^^^^^SCHEDULING
"KRN",101,5051,2,0)
^101.02A^^0
"KRN",101,5051,20)
D ENI^SDWLIFT1
"KRN",101,5051,99)
60003,49916
"KRN",101,5060,-1)
0^16
"KRN",101,5060,0)
SDWL XFER REQ MNU INAC^SDWL Transfer Inactive Entries^^M^^^^^^^^
"KRN",101,5060,10,0)
^101.01PA^1^1
"KRN",101,5060,10,1,0)
4916^V^^
"KRN",101,5060,10,1,"^")
SDWL XFER REQ VIEW
"KRN",101,5060,26)
D SHOW^VALM
"KRN",101,5060,99)
60018,42807
"KRN",409.61,606,-1)
0^3
"KRN",409.61,606,0)
SDWL TRANSFER REQ MAIN^1^^^4^20^1^1^Entry^SDWL XFER REQ MNU MAIN^INTER-FACILITY TRANSFR REQUEST^1
"KRN",409.61,606,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,606,"ARRAY")
 ^TMP("SDWLIFT",$J,"EP")
"KRN",409.61,606,"COL",0)
^409.621^4^4
"KRN",409.61,606,"COL",1,0)
NAME^4^27^Name
"KRN",409.61,606,"COL",2,0)
SSN^33^11^SSN
"KRN",409.61,606,"COL",3,0)
STATUS^69^12^Status
"KRN",409.61,606,"COL",4,0)
INSTITUTION^47^20^Transfer to
"KRN",409.61,606,"COL","B","INSTITUTION",4)

"KRN",409.61,606,"COL","B","NAME",1)

"KRN",409.61,606,"COL","B","SSN",2)

"KRN",409.61,606,"COL","B","STATUS",3)

"KRN",409.61,606,"FNL")

"KRN",409.61,606,"HDR")
D HD^SDWLIFT1
"KRN",409.61,606,"INIT")
D INIT^SDWLIFT1(0)
"KRN",409.61,607,-1)
0^1
"KRN",409.61,607,0)
SDWL TRANSFER ACC MAIN^1^^^3^21^1^1^Name^SDWL XFER ACC MNU MAIN^INTER-FACILITY TRANSFER ACCEPT^1
"KRN",409.61,607,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,607,"ARRAY")
 ^TMP("SDWLIFT",$J,"EP")
"KRN",409.61,607,"COL",0)
^409.621^4^3
"KRN",409.61,607,"COL",1,0)
NAME^4^26^Name
"KRN",409.61,607,"COL",2,0)
TRANSMISSION D/T^31^21^Transmission date
"KRN",409.61,607,"COL",4,0)
INSTITUTION^53^26^Sending Institution
"KRN",409.61,607,"COL","B","INSTITUTION",4)

"KRN",409.61,607,"COL","B","NAME",1)

"KRN",409.61,607,"COL","B","TRANSMISSION D/T",2)

"KRN",409.61,607,"FNL")
D EXIT^SDWLIFT5
"KRN",409.61,607,"HDR")
D HD^SDWLIFT5
"KRN",409.61,607,"INIT")
D INIT^SDWLIFT5
"KRN",409.61,608,-1)
0^5
"KRN",409.61,608,0)
SDWL TRANSFER REQ VIEW^1^^^4^22^^^^SDWL XFER REQ MNU VIEW^INTER-FACILITY XFER DETAILS^1
"KRN",409.61,608,"FNL")
D EXIT^SDWLIFT2
"KRN",409.61,608,"HDR")
D HD^SDWLIFT2
"KRN",409.61,608,"INIT")
D INIT^SDWLIFT2
"KRN",409.61,610,-1)
0^2
"KRN",409.61,610,0)
SDWL TRANSFER ACC VIEW^1^^^3^21^1^1^^SDWL XFER ACC MNU VIEW^INTER-FACILITY XFER DETAILS
"KRN",409.61,610,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,610,"FNL")
D EXIT^SDWLIFT6
"KRN",409.61,610,"HDR")
D HD^SDWLIFT6
"KRN",409.61,610,"INIT")
D INIT^SDWLIFT6
"KRN",409.61,628,-1)
0^4
"KRN",409.61,628,0)
SDWL TRANSFER REQ REMV^1^^^4^22^^^^SDWL XFER REQ MNU REMV^INTER-FACILITY XFER REMOVE^1
"KRN",409.61,628,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,628,"FNL")
D EXIT^SDWLIFT2
"KRN",409.61,628,"HDR")
D HD^SDWLIFT2
"KRN",409.61,628,"INIT")
D INIT^SDWLIFT2
"KRN",409.61,629,-1)
0^6
"KRN",409.61,629,0)
SDWL TRANSFER REQ INAC^1^^^4^22^^^^SDWL XFER REQ MNU INAC^INTER-FACILITY XFER INACTIVE^1
"KRN",409.61,629,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,629,"ARRAY")
 ^TMP("SDWLIFT",$J,"EP")
"KRN",409.61,629,"COL",0)
^409.621^4^4
"KRN",409.61,629,"COL",1,0)
NAME^4^27^Name
"KRN",409.61,629,"COL",2,0)
SSN^33^11^SSN
"KRN",409.61,629,"COL",3,0)
INSTITUTION^47^20^Transfer to
"KRN",409.61,629,"COL",4,0)
STATUS^69^12^Status
"KRN",409.61,629,"COL","B","INSTITUTION",3)

"KRN",409.61,629,"COL","B","NAME",1)

"KRN",409.61,629,"COL","B","SSN",2)

"KRN",409.61,629,"COL","B","STATUS",4)

"KRN",409.61,629,"FNL")
D EXIT^SDWLIFT1
"KRN",409.61,629,"HDR")
D HD^SDWLIFT1
"KRN",409.61,629,"INIT")
D INIT^SDWLIFT1(2)
"MBREQ")
0
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1;;MAILGDEL^XPDIA1(%)
"ORD",11,3.8,0)
MAIL GROUP
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"ORD",17,409.61)
409.61;17;1;;;;;;;LMDEL^XPDIA1
"ORD",17,409.61,0)
LIST TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813^2930824^10000000057
"PKG",16,22,1,"PAH",1,0)
415^3051026
"PKG",16,22,1,"PAH",1,1,0)
^^2^2^3051026
"PKG",16,22,1,"PAH",1,1,1,0)
This patch permits inter-facility transfer of Electronic Wait List 
"PKG",16,22,1,"PAH",1,1,2,0)
Veterans.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
14
"RTN","SDWLE")
0^10^B27132811
"RTN","SDWLE",1,0)
SDWLE ;;IOFO BAY PINES/TEH - WAITING LIST-ENTER/EDIT;06/12/2002 ; 20 Aug 2002  2:10 PM
"RTN","SDWLE",2,0)
 ;;5.3;scheduling;**263,415**;AUG 13 1993
"RTN","SDWLE",3,0)
 ;
"RTN","SDWLE",4,0)
 ;
"RTN","SDWLE",5,0)
 ;******************************************************************
"RTN","SDWLE",6,0)
 ;                             CHANGE LOG
"RTN","SDWLE",7,0)
 ;                                               
"RTN","SDWLE",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLE",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLE",10,0)
 ;   09JUN2005                   415                     Disallow editing if an EWL entry is currently the subject of an Inter-Facility Transfer.
"RTN","SDWLE",11,0)
 ;   
"RTN","SDWLE",12,0)
 ;   
"RTN","SDWLE",13,0)
EN ;ENTRY POINT - INTIALIZE VARIABLES
"RTN","SDWLE",14,0)
 N DTOUT,%
"RTN","SDWLE",15,0)
 I $D(SDWLOPT),SDWLOPT G OPT
"RTN","SDWLE",16,0)
 I $D(SDWLLIST),SDWLLIST,$D(DFN),DFN<0 K SDWLLIST
"RTN","SDWLE",17,0)
 I $D(SDWLLIST),SDWLLIST,$D(DFN),DFN'="" S SDWLDFN=DFN D 1^VADPT S (SDWLTEM,SDWLPOS)=0 D HD,SB1 G EN1:'$D(DUOUT) W !,"PATIENT: ",VADM(1),?40,VA("PID") W !,*7,"PATIENT'S DATE OF DEATH HAS BEEN RECORDED" S DIR(0)="E" D ^DIR G END
"RTN","SDWLE",18,0)
 K ^TMP("SDWLD",$J) D HD
"RTN","SDWLE",19,0)
 D PAT G END:DFN<0
"RTN","SDWLE",20,0)
OPT S SDWLPCMM=0,SDWLERR=0 I $D(SDWLOPT),SDWLOPT D
"RTN","SDWLE",21,0)
 .S %=2 W !,"DO YOU WISH TO PLACE THIS PATIENT ON A WAITING LIST " D YN^DICN
"RTN","SDWLE",22,0)
 .I %=-1!(%=2) S SDWLERR=1 Q
"RTN","SDWLE",23,0)
 I $D(SDWLOPT),SDWLOPT,SDWLERR Q
"RTN","SDWLE",24,0)
 S SDWLDFN=DFN
"RTN","SDWLE",25,0)
 D 1^VADPT
"RTN","SDWLE",26,0)
 S (SDWLTEM,SDWLPOS)=0
"RTN","SDWLE",27,0)
EN1 S SDWLNEW=0,SDWLERR=0,SDWLCN=0,SDWLWTE=0
"RTN","SDWLE",28,0)
 D DIS
"RTN","SDWLE",29,0)
 I $D(^SDWL(409.3,"B",DFN)),'SDWLCN W !!,"PATIENT: ",VADM(1),?40,VA("PID")
"RTN","SDWLE",30,0)
 S SDWLPS=$S(SDWLCN>1:1,SDWLCN=1:2,1:3)
"RTN","SDWLE",31,0)
 I $D(SDWLOPT),SDWLOPT,SDWLPS=3 S X="Y" G ENO
"RTN","SDWLE",32,0)
 I SDWLPS=1 S DIR(0)="FOA^^" S DIR("A")="Select Wait List (1-"_SDWLCN_") or Enter 'N' for New or '^' to Quit ? ",DIR("?")="Enter a Valid Number or 'N' for New."
"RTN","SDWLE",33,0)
 I SDWLPS=2 S DIR(0)="FOA^^" S DIR("A")="Select Wait List (1) or Enter 'N' for New or '^' to Quit ? ",DIR("?")="Enter a '1' or 'N' for New."
"RTN","SDWLE",34,0)
 I SDWLPS=3 S DIR(0)="YAO^^S X=""Y""" S DIR("A")="Patient is not on Waiting List. Do you wish to Add Patient? Yes// "
"RTN","SDWLE",35,0)
 W ! D ^DIR W ! K DIR
"RTN","SDWLE",36,0)
 G END:$D(DUOUT),END:$D(DTOUT)
"RTN","SDWLE",37,0)
 I SDWLPS=1 D  G EN3:SDWLERR=1 I SDWLERR=2 W *7," ??" G EN1
"RTN","SDWLE",38,0)
 .S SDWLERR=$S(X?1"N".E:0,X?1"n".E:0,X="":2,$D(DUOUT):1,X["^":1,$D(^TMP("SDWLD",$J,DFN,+X)):0,1:2) Q
"RTN","SDWLE",39,0)
 I SDWLPS=2 D  G EN3:SDWLERR=1 I SDWLERR=2 W *7," ??" G EN1
"RTN","SDWLE",40,0)
 .S SDWLERR=$S(X?1"N".E:0,X?1"n".E:0,X="":2,$D(DUOUT):1,X["^":1,$D(^TMP("SDWLD",$J,DFN,+X)):0,1:2) Q
"RTN","SDWLE",41,0)
ENO I SDWLPS=3 D  G EN3:SDWLERR=1 I SDWLERR=2 W *7," ??" G EN1
"RTN","SDWLE",42,0)
 .S SDWLERR=$S(X?1"N".E:1,X?1"n".E:1,X="":0,X?1"Y".E:0,X?1"y".E:0,$D(DUOUT):1,X["^":1,1:2) Q
"RTN","SDWLE",43,0)
 I SDWLPS=1!(SDWLPS=2),X?1N.N D
"RTN","SDWLE",44,0)
 .S (DA,SDWLDA)=$P($G(^TMP("SDWLD",$J,DFN,+X)),"~",2),SDWLEDIT=""
"RTN","SDWLE",45,0)
 .;
"RTN","SDWLE",46,0)
 .;LOCK DATA FILE
"RTN","SDWLE",47,0)
 .;
"RTN","SDWLE",48,0)
 .L ^SDWL(409.3,DA):5 I '$T W !,"ANOTHER TERMINAL IS EDITING THIS ENTRY. TRY LATER." S DUOUT=1
"RTN","SDWLE",49,0)
 .I $D(DUOUT) Q
"RTN","SDWLE",50,0)
 .N SDWLINNM,SDWLSTN  ; OG ; This and the following six lines added for patch 415
"RTN","SDWLE",51,0)
 .I $$GETTRN^SDWLIFT1(SDWLDA,.SDWLINNM,.SDWLSTN) D  S DUOUT=1 Q
"RTN","SDWLE",52,0)
 ..N SDWLMSG,SDWLI
"RTN","SDWLE",53,0)
 ..S SDWLMSG(0)=1,SDWLMSG(SDWLMSG(0),0)="This entry is the subject of a transfer to "_SDWLINNM_" ("_SDWLSTN_"). Editing inhibited."
"RTN","SDWLE",54,0)
 ..I $L(SDWLMSG(SDWLMSG(0),0))>80 D COL80^SDWLIFT(.SDWLMSG)
"RTN","SDWLE",55,0)
 ..F SDWLI=1:1:SDWLMSG(0) W !,SDWLMSG(SDWLI,0)
"RTN","SDWLE",56,0)
 ..Q
"RTN","SDWLE",57,0)
 .D EN^SDWLE10
"RTN","SDWLE",58,0)
 .D EDIT W !!,"Editing is Completed" S SDWLERR=1 K SDWLEDIT
"RTN","SDWLE",59,0)
 G END:SDWLERR
"RTN","SDWLE",60,0)
 I SDWLPS=1!(SDWLPS=2),X?1"N".E!(X?1"n".E) D NEW,EDIT S SDWLNEW="" G EN2
"RTN","SDWLE",61,0)
 I SDWLPS=3 D NEW,EDIT S SDWLNEW=""
"RTN","SDWLE",62,0)
EN2 I $D(SDWLNEW),'$D(DUOUT),'SDWLERR W !!,?15,"*** Patient has been added to Wait List ***",!
"RTN","SDWLE",63,0)
 K SDWLNEW,DUOUT
"RTN","SDWLE",64,0)
 ;
"RTN","SDWLE",65,0)
 ;UNLOCK FILE AND KILL LOCAL VARIABLES
"RTN","SDWLE",66,0)
 ;
"RTN","SDWLE",67,0)
 I $D(SDWLDA) L -^SDWL(409.3,SDWLDA)
"RTN","SDWLE",68,0)
 ;-exit logic
"RTN","SDWLE",69,0)
EN3 D END^SDWLE113
"RTN","SDWLE",70,0)
 Q
"RTN","SDWLE",71,0)
END D END^SDWLE113
"RTN","SDWLE",72,0)
 D EN^SDWLKIL
"RTN","SDWLE",73,0)
 Q 
"RTN","SDWLE",74,0)
 ;
"RTN","SDWLE",75,0)
 ;
"RTN","SDWLE",76,0)
PAT ;SELECT PATIENT
"RTN","SDWLE",77,0)
 ;
"RTN","SDWLE",78,0)
 S DIC(0)="EMNZAQ",DIC=2 D ^DIC S (SDWLDFN,DFN)=$P(Y,U,1) G PAT1:DFN<0
"RTN","SDWLE",79,0)
 S X=$$GET1^DIQ(2,DFN_",",".351") I X'="" W !,*7,"PATIENT'S DATE OF DEATH HAS BEEN RECORDED" G PAT
"RTN","SDWLE",80,0)
 S SDWLSSN=$G(VA("PID")),SDWLNAM=$G(VA(1))
"RTN","SDWLE",81,0)
PAT1 K VADM,VAIN,VAERR,VA Q
"RTN","SDWLE",82,0)
 ;
"RTN","SDWLE",83,0)
DIS ;DISPLAY DATA FOR PATIENT
"RTN","SDWLE",84,0)
 ;
"RTN","SDWLE",85,0)
 S SDWLHDR="Wait List Enter/Edit"
"RTN","SDWLE",86,0)
 D EN^SDWLD(DFN,VA("PID"),VADM(1))
"RTN","SDWLE",87,0)
 D PCM^SDWLE1,PCMD^SDWLE1
"RTN","SDWLE",88,0)
 Q
"RTN","SDWLE",89,0)
 ;
"RTN","SDWLE",90,0)
NEW ;
"RTN","SDWLE",91,0)
 D NEW^SDWLE11
"RTN","SDWLE",92,0)
 Q
"RTN","SDWLE",93,0)
 ;
"RTN","SDWLE",94,0)
EDIT ;
"RTN","SDWLE",95,0)
 D EN^SDWLE111 I $D(DUOUT) D END^SDWLE113:'$D(SDWLEDIT) Q
"RTN","SDWLE",96,0)
 I SDWLTYE=4 D ED4 K DIR,DIE,DIC,DR Q
"RTN","SDWLE",97,0)
 I SDWLTYE=3 D ED3 K DIR,DIE,DIC,DR Q
"RTN","SDWLE",98,0)
 I SDWLTYE=2 D ED2 K DIR,DIE,DIC,DR Q
"RTN","SDWLE",99,0)
 I SDWLTYE=1 D ED1 K DIR,DIE,DIC,DR Q
"RTN","SDWLE",100,0)
 Q
"RTN","SDWLE",101,0)
ED1 ;-team       
"RTN","SDWLE",102,0)
 I $D(DUOUT) D END^SDWLE113:'$D(SDWLEDIT) Q
"RTN","SDWLE",103,0)
 D EN^SDWLE3 I '$D(DUOUT) D EN^SDWLE113 Q
"RTN","SDWLE",104,0)
 Q
"RTN","SDWLE",105,0)
ED2 ;-position
"RTN","SDWLE",106,0)
 I $D(DUOUT) D END^SDWLE113:'$D(SDWLEDIT) Q
"RTN","SDWLE",107,0)
 D EN^SDWLE5 I '$D(DUOUT) D EN^SDWLE113 Q
"RTN","SDWLE",108,0)
 Q
"RTN","SDWLE",109,0)
ED3 ;-specialty  
"RTN","SDWLE",110,0)
 D EN^SDWLE2 I $D(DUOUT) D END^SDWLE113:'$D(SDWLEDIT) Q
"RTN","SDWLE",111,0)
 D EN^SDWLE110 I $D(DUOUT) D END^SDWLE113:'$D(SDWLEDIT) Q
"RTN","SDWLE",112,0)
 I '$D(DUOUT) D EN^SDWLE113
"RTN","SDWLE",113,0)
 D END^SDWLE113
"RTN","SDWLE",114,0)
 Q
"RTN","SDWLE",115,0)
ED4 ;-clinic
"RTN","SDWLE",116,0)
 D EN^SDWLE4 I $D(DUOUT) D END^SDWLE113:'$D(SDWLEDIT) Q
"RTN","SDWLE",117,0)
 D EN^SDWLE110 I $D(DUOUT) D END^SDWLE113:'$D(SDWLEDIT) Q
"RTN","SDWLE",118,0)
 I '$D(DUOUT) D EN^SDWLE113
"RTN","SDWLE",119,0)
 D END^SDWLE113
"RTN","SDWLE",120,0)
 Q
"RTN","SDWLE",121,0)
 ;
"RTN","SDWLE",122,0)
ED5 D END^SDWLE113
"RTN","SDWLE",123,0)
 Q
"RTN","SDWLE",124,0)
SB1 S X=$$GET1^DIQ(2,DFN_",",".351") I X'="" S DUOUT=""
"RTN","SDWLE",125,0)
 Q
"RTN","SDWLE",126,0)
HD W:$D(IOF) @IOF W !,?80-$L("Scheduling/PCMM Enter/Edit Wait List")\2,"Scheduling/PCMM Enter/Edit Wait List",!!
"RTN","SDWLE",127,0)
 I $D(DFN),DFN'="",'$D(^SDWL(409.3,"B",DFN)),$D(SDWLLIST),SDWLLIST D
"RTN","SDWLE",128,0)
 .W !!,"PATIENT: ",VADM(1),?40,VA("PID")
"RTN","SDWLE",129,0)
 Q
"RTN","SDWLIFT")
0^1^B39472292
"RTN","SDWLIFT",1,0)
SDWLIFT ;IOFO BAY PINES/OG - INTER-FACILITY TRANSFER: CONTROL RESPONSES;Compiled March 29, 2005 15:36:25
"RTN","SDWLIFT",2,0)
 ;;5.3;Scheduling;**415**;AUG 13 1993
"RTN","SDWLIFT",3,0)
 ;
"RTN","SDWLIFT",4,0)
 ;******************************************************************
"RTN","SDWLIFT",5,0)
 ;                             CHANGE LOG
"RTN","SDWLIFT",6,0)
 ;
"RTN","SDWLIFT",7,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLIFT",8,0)
 ;   ----                        -----                   -----------
"RTN","SDWLIFT",9,0)
 ;
"RTN","SDWLIFT",10,0)
MSGSVR ;xfer message server
"RTN","SDWLIFT",11,0)
 ;variables provided by server XQ*
"RTN","SDWLIFT",12,0)
 ;XQSOP : server option name
"RTN","SDWLIFT",13,0)
 ;XQMSG : server request message number
"RTN","SDWLIFT",14,0)
 ;XQSND : DUZ of sender
"RTN","SDWLIFT",15,0)
 ;XQSUB : subject
"RTN","SDWLIFT",16,0)
 ;SDMSG : local array of message lines
"RTN","SDWLIFT",17,0)
 N SDWLMSG
"RTN","SDWLIFT",18,0)
 I $E(XQSUB,1,3)="RE:" Q  ;quit for messages that are replies to original
"RTN","SDWLIFT",19,0)
 I XQSUB="SDWL TRANSFER REQUEST" D MSGSVRRQ^SDWLIFT0 Q  ;transfer request
"RTN","SDWLIFT",20,0)
 I XQSUB="SDWL TRANSFER ACKNOWLEDGEMENT" D MSGSVRAR Q  ;acknowledge request from receiving facility
"RTN","SDWLIFT",21,0)
 I XQSUB="SDWL TRANSFER REMOVAL REQUEST" D MSGSVRRM^SDWLIFT0 Q  ;remove request
"RTN","SDWLIFT",22,0)
 I XQSUB="SDWL TRANSFER REMOVAL REQUEST ACKNOWLEDGEMENT" D MSGSVRRA Q  ;remove request acknowledgement
"RTN","SDWLIFT",23,0)
 I XQSUB="SDWL TRANSFER ACCEPTANCE" D MSGSVRAC Q  ;transaction accepted.
"RTN","SDWLIFT",24,0)
 I XQSUB="SDWL TRANSFER REJECTION" D MSGSVRRJ Q  ;transaction rejected.
"RTN","SDWLIFT",25,0)
 S SDWLMSG(1,0)="Message received by S.SDWL-XFER-SERVER option has an unrecognized message subject"
"RTN","SDWLIFT",26,0)
 D ERR(.SDWLMSG)
"RTN","SDWLIFT",27,0)
 Q
"RTN","SDWLIFT",28,0)
MSGSVRAR ;Acknowledge request
"RTN","SDWLIFT",29,0)
 N DIE,DA,DR,DIC,D,X,SDWLX,SDWLI,SDWLMSG,TMP
"RTN","SDWLIFT",30,0)
 D RMSG
"RTN","SDWLIFT",31,0)
 S SDWLI=$O(SDWLMSG(1),-1)  ;There's stuff between 0 and 1
"RTN","SDWLIFT",32,0)
 F  S SDWLI=$O(SDWLMSG(SDWLI)) Q:'SDWLI  S SDWLX($P(SDWLMSG(SDWLI,0),U))=$P(SDWLMSG(SDWLI,0),U,3)
"RTN","SDWLIFT",33,0)
 S DIC(0)="",DIC="^SDWL(409.35,",X="`"_SDWLX(.5) D ^DIC
"RTN","SDWLIFT",34,0)
 ;If the transfer entry still exists (and still belongs to this request), set to RECEIVED and quit
"RTN","SDWLIFT",35,0)
 I Y'=-1 I SDWLX(2)=$$GET1^DIQ(409.35,SDWLX(.5),2,"I") S DIE=DIC,DA=SDWLX(.5),DR="3///R;6///"_SDWLX(6) D ^DIE Q
"RTN","SDWLIFT",36,0)
 ;otherwise, send a removal request back
"RTN","SDWLIFT",37,0)
 D SEND^SDWLIFT4(SDWLX(6),$$GET1^DIQ(4,$$FIND1^DIC(4,"","X",SDWLX(1),"D"),60)) Q
"RTN","SDWLIFT",38,0)
 Q
"RTN","SDWLIFT",39,0)
MSGSVRRA ;Removal acknowledgement
"RTN","SDWLIFT",40,0)
 N SDWLX,SDWLNM,SDWLIFTN,SDWLSTN,SDWLINST,DIE,DA,DR,XMY,XMSUB,XMTEXT,XMDUZ,XMMG
"RTN","SDWLIFT",41,0)
 D RMSG
"RTN","SDWLIFT",42,0)
 S DIE=409.35,DA=$P(SDWLMSG(1,0),U,3)
"RTN","SDWLIFT",43,0)
 D GETS^DIQ(DIE,DA_",",".01;6",,"TMP")
"RTN","SDWLIFT",44,0)
 Q:'$D(TMP(DIE,DA_",",.01))  ;Already removed
"RTN","SDWLIFT",45,0)
 S SDWLNM=TMP(DIE,DA_",",.01)  ;Patient name
"RTN","SDWLIFT",46,0)
 S SDWLIFTN=TMP(DIE,DA_",",6)  ;Receiving facility's request id
"RTN","SDWLIFT",47,0)
 S SDWLSTN=$$GET1^DIQ(DIE,DA,1)
"RTN","SDWLIFT",48,0)
 S SDWLINST=$$FIND1^DIC(4,"","X",SDWLSTN,"D")
"RTN","SDWLIFT",49,0)
 S DA=$P(SDWLMSG(1,0),U,3),DIK="^SDWL(409.35," D ^DIK
"RTN","SDWLIFT",50,0)
 S XMY("G.SDWL-TRANSFER-ADMIN")="",XMSUB="INTER-FACILITY XFER: Removal of cancelled request",XMTEXT="SDWLX(",XMDUZ="POSTMASTER"
"RTN","SDWLIFT",51,0)
 S SDWLX(0)=1,SDWLX(SDWLX(0),0)="The request to transfer "_SDWLNM_" to "_$$GET1^DIQ(4,SDWLINST,.01)_" ("_SDWLSTN_") has been recalled."
"RTN","SDWLIFT",52,0)
 D:$L(SDWLX(SDWLX(0),0))>80 COL80(.SDWLX)
"RTN","SDWLIFT",53,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="",SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="The details have been removed from the system."
"RTN","SDWLIFT",54,0)
 D ^XMD
"RTN","SDWLIFT",55,0)
 I $G(XMMG)["Error" S SDWLMSG(0)=1,SDWLMSG(1,0)="Message aborted with the following error: "_XMMG D ERR(.SDWLMSG)
"RTN","SDWLIFT",56,0)
 Q
"RTN","SDWLIFT",57,0)
MSGSVRAC ;Acceptance notification.
"RTN","SDWLIFT",58,0)
 N TMP,DIE,DA,DR,XMY,XMSUB,XMTEXT,XMDUZ,XMMG,SDWLDUZ,SDWLINST,SDWLNM,SDWLX,SDWLTXT,SDWLMSG
"RTN","SDWLIFT",59,0)
 D RMSG
"RTN","SDWLIFT",60,0)
 S DIE=409.35,DA=$P(SDWLMSG(1,0),U,3),DR="3///A;7///"_$P(SDWLMSG(2,0),U,3) D ^DIE
"RTN","SDWLIFT",61,0)
 S SDWLSTN=$$GET1^DIQ(409.35,DA,1),SDWLINST=$$FIND1^DIC(4,"","X",SDWLSTN,"D"),SDWLNM=$$GET1^DIQ(409.35,DA,.01)
"RTN","SDWLIFT",62,0)
 D GETS^DIQ(409.35,DA,".01;4","I","TMP")
"RTN","SDWLIFT",63,0)
 S SDWLDUZ=TMP(409.35,DA_",",4,"I"),DIE("NO^")="NO EDITING"  ;Disposition the EWL entry.
"RTN","SDWLIFT",64,0)
 S DIE="^SDWL(409.3,",DA=TMP(409.35,DA_",",.01,"I"),DR="19////^S X=DT;20////^S X=SDWLDUZ;21////^S X=""TR"";23////^S X=""C""" D ^DIE
"RTN","SDWLIFT",65,0)
 S XMY("G.SDWL-TRANSFER-ADMIN")="",XMSUB="INTER-FACILITY XFER: Request accepted",XMTEXT="SDWLX(",XMDUZ="POSTMASTER"
"RTN","SDWLIFT",66,0)
 S SDWLX(0)=1,SDWLX(SDWLX(0),0)="The request to transfer "_SDWLNM_" to "_$$GET1^DIQ(4,SDWLINST,.01)_" ("_SDWLSTN_") has been accepted by the receiving facility."
"RTN","SDWLIFT",67,0)
 D:$L(SDWLX(SDWLX(0),0))>80 COL80(.SDWLX)
"RTN","SDWLIFT",68,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="",SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="The status has been updated and can be viewed in SDWL TRANSFER REQUEST"
"RTN","SDWLIFT",69,0)
 D ^XMD
"RTN","SDWLIFT",70,0)
 I $G(XMMG)["Error" S SDWLMSG(0)=1,SDWLMSG(1,0)="Message aborted with the following error: "_XMMG D ERR(.SDWLMSG)
"RTN","SDWLIFT",71,0)
 Q
"RTN","SDWLIFT",72,0)
MSGSVRRJ ;Rejection notification.
"RTN","SDWLIFT",73,0)
 N DIE,DA,DR,SDWLX,SDWLINST,SDWLNM,SDWLTXT,SDWLMSG,XMY,XMSUB,XMTEXT,XMDUZ,XMMG
"RTN","SDWLIFT",74,0)
 D RMSG
"RTN","SDWLIFT",75,0)
 S DIE=409.35,DA=$P(SDWLMSG(1,0),U,3),SDWLSTN=$$GET1^DIQ(DIE,DA,1),SDWLINST=$$FIND1^DIC(4,"","X",SDWLSTN,"D"),SDWLNM=$$GET1^DIQ(DIE,DA,.01)
"RTN","SDWLIFT",76,0)
 S DR="3///X" D ^DIE
"RTN","SDWLIFT",77,0)
 S XMY("G.SDWL-TRANSFER-ADMIN")=""
"RTN","SDWLIFT",78,0)
 S XMSUB="INTER-FACILITY XFER: Request declined",XMTEXT="SDWLX(",XMDUZ="POSTMASTER"
"RTN","SDWLIFT",79,0)
 S SDWLX(0)=1,SDWLX(SDWLX(0),0)="The request to transfer "_SDWLNM_" to "_$$GET1^DIQ(4,SDWLINST,.01)_" ("_SDWLSTN_") has been rejected by the receiving facility."
"RTN","SDWLIFT",80,0)
 D:$L(SDWLX(SDWLX(0),0))>80 COL80(.SDWLX)
"RTN","SDWLIFT",81,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="",SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="The status has been updated and can be viewed in, SDWL TRANSFER REQUEST"
"RTN","SDWLIFT",82,0)
 D ^XMD
"RTN","SDWLIFT",83,0)
 I $G(XMMG)["Error" S SDWLMSG(0)=1,SDWLMSG(1,0)="Message aborted with the following error: "_XMMG D ERR(.SDWLMSG)
"RTN","SDWLIFT",84,0)
 Q
"RTN","SDWLIFT",85,0)
COL80(SDWLX) ;Stop lines going over 80 columns.
"RTN","SDWLIFT",86,0)
 N SDWLF
"RTN","SDWLIFT",87,0)
 S SDWLF(1)=0
"RTN","SDWLIFT",88,0)
 F  S SDWLF(1)=$F(SDWLX(SDWLX(0),0)," ",SDWLF(1)) Q:SDWLF(1)>81!'SDWLF(1)  S SDWLF(0)=SDWLF(1)
"RTN","SDWLIFT",89,0)
 S SDWLX(SDWLX(0)+1,0)=$E(SDWLX(SDWLX(0),0),SDWLF(0),$L(SDWLX(SDWLX(0),0)))
"RTN","SDWLIFT",90,0)
 S SDWLX(SDWLX(0),0)=$E(SDWLX(SDWLX(0),0),1,SDWLF(0)-2),SDWLX(0)=SDWLX(0)+1
"RTN","SDWLIFT",91,0)
 Q
"RTN","SDWLIFT",92,0)
RMSG ;load message into local array
"RTN","SDWLIFT",93,0)
 M SDWLMSG=^XMB(3.9,XQMSG,2)
"RTN","SDWLIFT",94,0)
 Q
"RTN","SDWLIFT",95,0)
ERR(SDWLX) ;send error message to developer
"RTN","SDWLIFT",96,0)
 N XMSUB,XMY,XMTEXT,XMDUZ,SDWLMSG,SDWLI
"RTN","SDWLIFT",97,0)
 S XMY("G.SDWL-TRANSFER-ADMIN")="",XMSUB="Error from S.SDWL-XFER Server",XMTEXT="SDWLMSG(",XMDUZ="POSTMASTER"
"RTN","SDWLIFT",98,0)
 S SDWLMSG(1,0)="      Forum Message #: "_XQMSG
"RTN","SDWLIFT",99,0)
 S SDWLMSG(2,0)="Sender's Mail Address: "_XQSND
"RTN","SDWLIFT",100,0)
 S SDWLMSG(3,0)="              Subject: "_XQSUB
"RTN","SDWLIFT",101,0)
 S SDWLMSG(4,0)="",SDWLMSG(0)=4
"RTN","SDWLIFT",102,0)
 F SDWLI=1:1:SDWLX(0) S SDWLMSG(0)=SDWLMSG(0)+1,SDWLMSG(SDWLMSG(0),0)=SDWLX(SDWLI,0)
"RTN","SDWLIFT",103,0)
 D ^XMD
"RTN","SDWLIFT",104,0)
 Q
"RTN","SDWLIFT",105,0)
GETTN(SDWLINFO) ;Get transfer id.
"RTN","SDWLIFT",106,0)
 N LAST,DIR,Y
"RTN","SDWLIFT",107,0)
 S LAST=$O(SDWLINFO(":"),-1)
"RTN","SDWLIFT",108,0)
 I 'LAST S DIR(0)="Y",DIR("A")="No entries. OK",DIR("B")="YES" D ^DIR Q 0
"RTN","SDWLIFT",109,0)
 I LAST=1 S Y=1  ;If there is only one, don't ask.
"RTN","SDWLIFT",110,0)
 E  S DIR(0)="L^1:"_LAST,DIR("A")="Which entry?" D ^DIR
"RTN","SDWLIFT",111,0)
 Q $G(SDWLINFO(+Y,1),0)
"RTN","SDWLIFT",112,0)
EXMNU Q
"RTN","SDWLIFT",113,0)
ENMNU Q
"RTN","SDWLIFT0")
0^11^B23628296
"RTN","SDWLIFT0",1,0)
SDWLIFT0 ;IOFO BAY PINES/OG - INTER-FACILITY TRANSFER: CONTROL REQUESTS;
"RTN","SDWLIFT0",2,0)
 ;;5.3;Scheduling;**415**;AUG 13 1993
"RTN","SDWLIFT0",3,0)
 ;
"RTN","SDWLIFT0",4,0)
 ;******************************************************************
"RTN","SDWLIFT0",5,0)
 ;                             CHANGE LOG
"RTN","SDWLIFT0",6,0)
 ;
"RTN","SDWLIFT0",7,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLIFT0",8,0)
 ;   ----                        -----                   -----------
"RTN","SDWLIFT0",9,0)
 ;
"RTN","SDWLIFT0",10,0)
MSGSVRRQ ;handle transfer request
"RTN","SDWLIFT0",11,0)
 N DIC,DIE,DA,DR,DO,X,Y,%,XMY,XMSUB,XMTEXT,XMDUZ,XMMG,SDWLI,SDWLCI,SDWLI0,SDWLCOMM,SDWLMSG,SDWLRIN,SDWLIFTN,SDWLNM,SDWLDTM
"RTN","SDWLIFT0",12,0)
 D RMSG^SDWLIFT
"RTN","SDWLIFT0",13,0)
 S SDWLI=1,DIC="^SDWL(409.36,",DIC(0)="",(SDWLNM,X)=$P(SDWLMSG(SDWLI,0),U,3)
"RTN","SDWLIFT0",14,0)
 D FILE^DICN
"RTN","SDWLIFT0",15,0)
 I Y<0 S SDWLMSG(1,0)="Error creating new request: "_SDWLMSG(1,0) D ERR^SDWLIFT(.SDWLMSG) Q
"RTN","SDWLIFT0",16,0)
 S DA=+Y,DR="",(SDWLCI,SDWLI0)=0
"RTN","SDWLIFT0",17,0)
 F  S SDWLI=$O(SDWLMSG(SDWLI)) Q:'SDWLI  D
"RTN","SDWLIFT0",18,0)
 .I $P(SDWLMSG(SDWLI,0),U)=.4 S SDWLCI=SDWLCI+1,SDWLCOMM(SDWLCI)=$P(SDWLMSG(SDWLI,0),U,3) Q
"RTN","SDWLIFT0",19,0)
 .I $P(SDWLMSG(SDWLI,0),U)=2 S SDWLDTM=$P(SDWLMSG(SDWLI,0),U,3) Q  ;Transmission Date/Time: not written to #409.36, just returned for verification
"RTN","SDWLIFT0",20,0)
 .S SDWLI0=SDWLI0+1,$P(DR,";",SDWLI0)=$P(SDWLMSG(SDWLI,0),U)_"///"_$P(SDWLMSG(SDWLI,0),U,3)
"RTN","SDWLIFT0",21,0)
 .I $P(SDWLMSG(SDWLI,0),U)=.1 S SDWLSTN=$P(SDWLMSG(SDWLI,0),U,3),SDWLRIN=$$FIND1^DIC(4,"","X",SDWLSTN,"D")  ;Requesting facility
"RTN","SDWLIFT0",22,0)
 .I $P(SDWLMSG(SDWLI,0),U)=.5 S SDWLIFTN=$P(SDWLMSG(SDWLI,0),U,3)  ;Requesting facility's transfer ID
"RTN","SDWLIFT0",23,0)
 .Q
"RTN","SDWLIFT0",24,0)
 D NOW^%DTC
"RTN","SDWLIFT0",25,0)
 S DR=DR_";.2///"_%,DIE=DIC D ^DIE
"RTN","SDWLIFT0",26,0)
 S DA(1)=DA,DIC=DIC_DA(1)_",""COMM"",",SDWLI=0
"RTN","SDWLIFT0",27,0)
 F  S SDWLI=$O(SDWLCOMM(SDWLI)) Q:'SDWLI  S X=SDWLCOMM(SDWLI) K DO D FILE^DICN
"RTN","SDWLIFT0",28,0)
 ;send acknowledgement message back reporting success or failure
"RTN","SDWLIFT0",29,0)
 S XMY("S.SDWL-XFER-SERVER@"_$$GET1^DIQ(4,SDWLRIN,60))="",XMSUB="SDWL TRANSFER ACKNOWLEDGEMENT",XMTEXT="SDWLX(",XMDUZ="POSTMASTER"
"RTN","SDWLIFT0",30,0)
 S SDWLI=1,SDWLX(SDWLI)=".5"_U_"SENDING FACILITY TRANSFER ID"_U_SDWLIFTN
"RTN","SDWLIFT0",31,0)
 S SDWLI=SDWLI+1,SDWLX(SDWLI)=".01"_U_"NAME"_U_SDWLNM
"RTN","SDWLIFT0",32,0)
 S SDWLI=SDWLI+1,SDWLX(SDWLI)="1"_U_"STATION NUMBER"_U_$P($$SITE^VASITE(),U,3)
"RTN","SDWLIFT0",33,0)
 S SDWLI=SDWLI+1,SDWLX(SDWLI)="2"_U_"TRANSMISSION DATE/TIME"_U_SDWLDTM
"RTN","SDWLIFT0",34,0)
 S SDWLI=SDWLI+1,SDWLX(SDWLI)="6"_U_"RECEIVING FACILITY TRANSFER ID"_U_DA
"RTN","SDWLIFT0",35,0)
 D ^XMD
"RTN","SDWLIFT0",36,0)
 K XMY,SDWLX,SDWLMSG
"RTN","SDWLIFT0",37,0)
 I $G(XMMG)["Error" S SDWLMSG(0)=1,SDWLMSG(1,0)="Message aborted with the following error: "_XMMG D ERR^SDWLIFT(.SDWLMSG) Q
"RTN","SDWLIFT0",38,0)
 S XMY("G.SDWL-TRANSFER-ADMIN")="",XMSUB="INTER-FACILITY XFER: New request",XMTEXT="SDWLX(",XMDUZ="POSTMASTER"
"RTN","SDWLIFT0",39,0)
 S SDWLX(0)=1,SDWLX(SDWLX(0),0)="A request has arrived to transfer "_SDWLNM_" from "_$$GET1^DIQ(4,SDWLRIN,.01)_" ("_SDWLSTN_")."
"RTN","SDWLIFT0",40,0)
 D:$L(SDWLX(SDWLX(0),0))>80 COL80^SDWLIFT(.SDWLX)
"RTN","SDWLIFT0",41,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="",SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="Details available at menu option, SDWL TRANSFER ACCEPT"
"RTN","SDWLIFT0",42,0)
 D ^XMD
"RTN","SDWLIFT0",43,0)
 I $G(XMMG)["Error" S SDWLMSG(0)=1,SDWLMSG(1,0)="Message aborted with the following error: "_XMMG D ERR^SDWLIFT(.SDWLMSG)
"RTN","SDWLIFT0",44,0)
 Q
"RTN","SDWLIFT0",45,0)
MSGSVRRM ;remove request
"RTN","SDWLIFT0",46,0)
 N DIE,DA,DR,DIK,DIC,D,X,XMY,XMSUB,XMTEXT,XMDUZ,XMMG,TMP,SDWLNM,SDWLIFTN,SDWLINST,SDWLSTN,SDWLDMN,SDWLX,SDWLMSG
"RTN","SDWLIFT0",47,0)
 D RMSG^SDWLIFT
"RTN","SDWLIFT0",48,0)
 S DIE=409.36,DA=$P(SDWLMSG(1,0),U,3)
"RTN","SDWLIFT0",49,0)
 D GETS^DIQ(DIE,DA_",",".01;.5",,"TMP")
"RTN","SDWLIFT0",50,0)
 S SDWLNM=TMP(DIE,DA_",",.01)  ;Patient name
"RTN","SDWLIFT0",51,0)
 S SDWLIFTN=TMP(DIE,DA_",",.5)  ;Sending facility's request id
"RTN","SDWLIFT0",52,0)
 S SDWLSTN=$$GET1^DIQ(DIE,DA,.1)  ;Requesting station number
"RTN","SDWLIFT0",53,0)
 S SDWLINST=$$FIND1^DIC(4,"","X",SDWLSTN,"D"),SDWLDMN=$$GET1^DIQ(4,SDWLINST,60)
"RTN","SDWLIFT0",54,0)
 S DIK="^SDWL(409.36," D ^DIK
"RTN","SDWLIFT0",55,0)
 S XMY("S.SDWL-XFER-SERVER@"_SDWLDMN)="",XMSUB="SDWL TRANSFER REMOVAL REQUEST ACKNOWLEDGEMENT",XMTEXT="SDWLX(",XMDUZ="POSTMASTER"
"RTN","SDWLIFT0",56,0)
 S SDWLX(1,0)=".5"_U_"SENDING FACILITY TRANSFER ID"_U_SDWLIFTN
"RTN","SDWLIFT0",57,0)
 S SDWLX(0)=1
"RTN","SDWLIFT0",58,0)
 D ^XMD
"RTN","SDWLIFT0",59,0)
 I $G(XMMG)["Error" S SDWLMSG(0)=1,SDWLMSG(1,0)="Message aborted with the following error: "_XMMG D ERR^SDWLIFT(.SDWLMSG)
"RTN","SDWLIFT0",60,0)
 K XMY,SDWLMSG,SDWLX
"RTN","SDWLIFT0",61,0)
 S XMY("G.SDWL-TRANSFER-ADMIN")="",XMSUB="INTER-FACILITY XFER: Removal of request",XMTEXT="SDWLX(",XMDUZ="POSTMASTER"
"RTN","SDWLIFT0",62,0)
 S SDWLX(0)=1,SDWLX(SDWLX(0),0)="The request to transfer "_SDWLNM_" from "_$$GET1^DIQ(4,SDWLINST,.01)_" ("_SDWLSTN_") has been recalled."
"RTN","SDWLIFT0",63,0)
 D:$L(SDWLX(SDWLX(0),0))>80 COL80^SDWLIFT(.SDWLX)
"RTN","SDWLIFT0",64,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="",SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0),0)="The details have been removed from the system."
"RTN","SDWLIFT0",65,0)
 D ^XMD
"RTN","SDWLIFT0",66,0)
 I $G(XMMG)["Error" S SDWLMSG(0)=1,SDWLMSG(1,0)="Message aborted with the following error: "_XMMG D ERR^SDWLIFT(.SDWLMSG)
"RTN","SDWLIFT0",67,0)
 Q
"RTN","SDWLIFT1")
0^2^B11341369
"RTN","SDWLIFT1",1,0)
SDWLIFT1 ;IOFO BAY PINES/OG - INTER-FACILITY TRANSFER: REQUEST SUMMARY  ; Compiled March 29, 2005 15:36:25
"RTN","SDWLIFT1",2,0)
 ;;5.3;Scheduling;**415**;AUG 13 1993
"RTN","SDWLIFT1",3,0)
 ;
"RTN","SDWLIFT1",4,0)
 ;
"RTN","SDWLIFT1",5,0)
 ;******************************************************************
"RTN","SDWLIFT1",6,0)
 ;                             CHANGE LOG
"RTN","SDWLIFT1",7,0)
 ;                                               
"RTN","SDWLIFT1",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLIFT1",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLIFT1",10,0)
 ;
"RTN","SDWLIFT1",11,0)
 ;
"RTN","SDWLIFT1",12,0)
 Q
"RTN","SDWLIFT1",13,0)
EN ; INITIALIZE VARIABLES
"RTN","SDWLIFT1",14,0)
 K ^TMP("SDWLIFT",$J)
"RTN","SDWLIFT1",15,0)
 K DIR,DIC,DR,DIE,VADM
"RTN","SDWLIFT1",16,0)
 S SDWLFMT=0
"RTN","SDWLIFT1",17,0)
 D EN^VALM("SDWL TRANSFER REQ MAIN")
"RTN","SDWLIFT1",18,0)
 Q
"RTN","SDWLIFT1",19,0)
ENI ; INITIALIZE VARIABLES - Inactive entries
"RTN","SDWLIFT1",20,0)
 N SDWLFMT
"RTN","SDWLIFT1",21,0)
 K ^TMP("SDWLIFT",$J,"EP")
"RTN","SDWLIFT1",22,0)
 K DIR,DIC,DR,DIE,VADM
"RTN","SDWLIFT1",23,0)
 S SDWLFMT=2
"RTN","SDWLIFT1",24,0)
 D EN^VALM("SDWL TRANSFER REQ INAC"),INIT(0)
"RTN","SDWLIFT1",25,0)
 S VALMBCK="R"
"RTN","SDWLIFT1",26,0)
 Q
"RTN","SDWLIFT1",27,0)
INIT(SDWLOPT) ; Default initialization options.
"RTN","SDWLIFT1",28,0)
 K ^TMP("DILIST",$J),^TMP("SDWLIFT",$J)
"RTN","SDWLIFT1",29,0)
 N SDWLINFO,SDWLI,DISPCNT
"RTN","SDWLIFT1",30,0)
 I '$D(DUZ) W !,"DUZ required for this option" D PAUSE^VALM1 Q
"RTN","SDWLIFT1",31,0)
 S SDWLDZN=$P(^VA(200,DUZ,0),U)
"RTN","SDWLIFT1",32,0)
 S SDWLSPS=$J("",30)
"RTN","SDWLIFT1",33,0)
 D GETDATA^SDWLIFT5(.SDWLINFO,SDWLOPT)
"RTN","SDWLIFT1",34,0)
 S VALMCNT=0
"RTN","SDWLIFT1",35,0)
 F DISPCNT=1:1:SDWLINFO(0) D
"RTN","SDWLIFT1",36,0)
 .N SDWLOUT
"RTN","SDWLIFT1",37,0)
 .S VALMCNT=VALMCNT+1
"RTN","SDWLIFT1",38,0)
 .; Display count
"RTN","SDWLIFT1",39,0)
 .S SDWLOUT=$E(DISPCNT_SDWLSPS,1,3)
"RTN","SDWLIFT1",40,0)
 .; Name
"RTN","SDWLIFT1",41,0)
 .S SDWLOUT=SDWLOUT_$E($P(SDWLINFO(DISPCNT,0),U)_SDWLSPS,1,27)_"  "
"RTN","SDWLIFT1",42,0)
 .; SSN
"RTN","SDWLIFT1",43,0)
 .S SDWLOUT=SDWLOUT_$E($P(SDWLINFO(DISPCNT,0),U,2)_SDWLSPS,1,12)_"  "
"RTN","SDWLIFT1",44,0)
 .; Destination Institution
"RTN","SDWLIFT1",45,0)
 .S SDWLOUT=SDWLOUT_$E($P(SDWLINFO(DISPCNT,0),U,3)_SDWLSPS,1,20)_"  "
"RTN","SDWLIFT1",46,0)
 .; Transfer Status
"RTN","SDWLIFT1",47,0)
 .S SDWLOUT=SDWLOUT_$P(SDWLINFO(DISPCNT,0),U,4)
"RTN","SDWLIFT1",48,0)
 .D SET^VALM10(VALMCNT,SDWLOUT)
"RTN","SDWLIFT1",49,0)
 .; Line 2
"RTN","SDWLIFT1",50,0)
 .S VALMCNT=VALMCNT+1
"RTN","SDWLIFT1",51,0)
 .; Current Wait List Institution
"RTN","SDWLIFT1",52,0)
 .S SDWLOUT=$E($P(SDWLINFO(DISPCNT,0),U,5)_SDWLSPS,1,30)_"  "
"RTN","SDWLIFT1",53,0)
 .; Current Wait List Type
"RTN","SDWLIFT1",54,0)
 .S SDWLOUT=SDWLOUT_$P(SDWLINFO(DISPCNT,0),U,6)_" : "
"RTN","SDWLIFT1",55,0)
 .; Current Wait List Type Extension
"RTN","SDWLIFT1",56,0)
 .S SDWLOUT=SDWLOUT_$P(SDWLINFO(DISPCNT,0),U,7)
"RTN","SDWLIFT1",57,0)
 .D SET^VALM10(VALMCNT,SDWLOUT)
"RTN","SDWLIFT1",58,0)
 .Q
"RTN","SDWLIFT1",59,0)
 I 'VALMCNT S VALMCNT=1 D SET^VALM10(VALMCNT," ** No "_$S(SDWLOPT=2:"in",1:"")_"active transfer details to display... ")
"RTN","SDWLIFT1",60,0)
 Q
"RTN","SDWLIFT1",61,0)
HD ; -- Make header line for list processor
"RTN","SDWLIFT1",62,0)
 N X
"RTN","SDWLIFT1",63,0)
 S X=$$SETSTR^VALM1("User: "_SDWLDZN,"",1,79)
"RTN","SDWLIFT1",64,0)
 S VALMHDR(1)=X,VALMHDR(2)=""
"RTN","SDWLIFT1",65,0)
 Q
"RTN","SDWLIFT1",66,0)
EXIT ; Tidy up
"RTN","SDWLIFT1",67,0)
 K VALMBCK,VALMHDR,VALMCNT
"RTN","SDWLIFT1",68,0)
 K SDWLDZN,SDWLSPS,SDWLINFO,SDWLOPT,SDWLFMT
"RTN","SDWLIFT1",69,0)
 K ^TMP("DILIST",$J),^TMP("SDWLIFT",$J)
"RTN","SDWLIFT1",70,0)
 Q
"RTN","SDWLIFT1",71,0)
GETTRN(SDWLDA,SDWLINNM,SDWLSTN) ; Get transfer details for Electronic Wait List internal entry number
"RTN","SDWLIFT1",72,0)
 ; Extrinsic boolean: 0: no active transfer, 1: active transfer.
"RTN","SDWLIFT1",73,0)
 ; Input:  SDWLDA:   EWL IEN
"RTN","SDWLIFT1",74,0)
 ; Output: SDWLINNM: Institution name
"RTN","SDWLIFT1",75,0)
 ;         SDWLSTN:  Station Number
"RTN","SDWLIFT1",76,0)
 S (SDWLINNM,SDWLSTN)=""
"RTN","SDWLIFT1",77,0)
 Q:'$D(^SDWL(409.35,"B",SDWLDA)) 0
"RTN","SDWLIFT1",78,0)
 N SDWLIFTN,SDWLSTA,SDWLINST
"RTN","SDWLIFT1",79,0)
 S SDWLIFTN=$O(^SDWL(409.35,"B",SDWLDA,":"),-1),SDWLSTA=$$GET1^DIQ(409.35,SDWLIFTN,3,"I")  ; Get the last transfer: a status of P, T or R can not have entries after.
"RTN","SDWLIFT1",80,0)
 Q:"^P^T^R^"'[("^"_SDWLSTA_"^") 0
"RTN","SDWLIFT1",81,0)
 S SDWLSTN=$$GET1^DIQ(409.35,SDWLIFTN,1),SDWLINST=$$FIND1^DIC(4,"","X",SDWLSTN,"D"),SDWLINNM=$$GET1^DIQ(4,SDWLINST,60)
"RTN","SDWLIFT1",82,0)
 Q 1
"RTN","SDWLIFT2")
0^3^B7114075
"RTN","SDWLIFT2",1,0)
SDWLIFT2 ;IOFO BAY PINES/OG - INTER-FACILITY TRANSFER: DISPLAY TRANSFER DETAILS  ; Compiled March 23, 2005 12:38:06
"RTN","SDWLIFT2",2,0)
 ;;5.3;Scheduling;**415**;AUG 13 1993
"RTN","SDWLIFT2",3,0)
 ;
"RTN","SDWLIFT2",4,0)
 ;
"RTN","SDWLIFT2",5,0)
 ;******************************************************************
"RTN","SDWLIFT2",6,0)
 ;                             CHANGE LOG
"RTN","SDWLIFT2",7,0)
 ;                                               
"RTN","SDWLIFT2",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLIFT2",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLIFT2",10,0)
 ;
"RTN","SDWLIFT2",11,0)
 ;
"RTN","SDWLIFT2",12,0)
 Q
"RTN","SDWLIFT2",13,0)
EN ; INITIALIZE VARIABLES FOR DISPLAY
"RTN","SDWLIFT2",14,0)
 ; SDWLFMT: which set of data?
"RTN","SDWLIFT2",15,0)
 ; 0 - Active
"RTN","SDWLIFT2",16,0)
 ; 2 - Inactive
"RTN","SDWLIFT2",17,0)
 N SDWLOK,SDWLI
"RTN","SDWLIFT2",18,0)
 K SDWLINFO
"RTN","SDWLIFT2",19,0)
 D GETDATA^SDWLIFT5(.SDWLINFO,SDWLFMT)
"RTN","SDWLIFT2",20,0)
 S SDWLIFTN=$$GETTN^SDWLIFT(.SDWLINFO)
"RTN","SDWLIFT2",21,0)
 I 'SDWLIFTN S VALMBCK="R" Q
"RTN","SDWLIFT2",22,0)
 K SDWLINFO D GETDATA^SDWLIFT5(.SDWLINFO,SDWLFMT)
"RTN","SDWLIFT2",23,0)
 S (SDWLOK,SDWLI)=0 F  S SDWLI=$O(SDWLINFO(SDWLI)) Q:'SDWLI  I SDWLINFO(SDWLI,1)=SDWLIFTN S SDWLOK=1 Q
"RTN","SDWLIFT2",24,0)
 D:SDWLOK EN^VALM("SDWL TRANSFER REQ VIEW")
"RTN","SDWLIFT2",25,0)
 D INIT^SDWLIFT1(0)
"RTN","SDWLIFT2",26,0)
 S VALMBCK="R"
"RTN","SDWLIFT2",27,0)
 Q
"RTN","SDWLIFT2",28,0)
 ;
"RTN","SDWLIFT2",29,0)
INIT ; Default initialization options.
"RTN","SDWLIFT2",30,0)
 N DIC,D,X,WP,SDWLI,DFN,TMP,SDWLTY,SDWLDA,VADM
"RTN","SDWLIFT2",31,0)
 S SDWLDA=$$GET1^DIQ(409.35,SDWLIFTN,.01,"I")
"RTN","SDWLIFT2",32,0)
 D GETS^DIQ(409.35,SDWLIFTN,"1;3;7",,"TMP")
"RTN","SDWLIFT2",33,0)
 S DFN=$$GET1^DIQ(409.3,SDWLDA,.01,"I")
"RTN","SDWLIFT2",34,0)
 D DEM^VADPT
"RTN","SDWLIFT2",35,0)
 S VALMCNT=1
"RTN","SDWLIFT2",36,0)
 D SET^VALM10(VALMCNT,"Name: "_$E(VADM(1)_SDWLSPS,1,31)_"Status:        "_TMP(409.35,SDWLIFTN_",",3))
"RTN","SDWLIFT2",37,0)
 I TMP(409.35,SDWLIFTN_",",7)'="" S VALMCNT=VALMCNT+1 D SET^VALM10(VALMCNT,"Transfer accepted by: "_TMP(409.35,SDWLIFTN_",",7))
"RTN","SDWLIFT2",38,0)
 S VALMCNT=VALMCNT+1
"RTN","SDWLIFT2",39,0)
 D SET^VALM10(VALMCNT,"SSN:  "_$E($P(VADM(2),U,2)_SDWLSPS,1,31)_"Date of birth: "_$P(VADM(3),U,2))
"RTN","SDWLIFT2",40,0)
 S VALMCNT=VALMCNT+1
"RTN","SDWLIFT2",41,0)
 D SET^VALM10(VALMCNT,"Wait List Type:  "_$$GET1^DIQ(409.3,SDWLDA,4)_" : "_$$GET1^DIQ(409.3,SDWLDA,4+$$GET1^DIQ(409.3,SDWLDA,4,"I")))
"RTN","SDWLIFT2",42,0)
 S VALMCNT=VALMCNT+1
"RTN","SDWLIFT2",43,0)
 D SET^VALM10(VALMCNT,"Transfer to: "_$$GET1^DIQ(4,$$FIND1^DIC(4,"","X",TMP(409.35,SDWLIFTN_",",1),"D"),.01))
"RTN","SDWLIFT2",44,0)
 S VALMCNT=VALMCNT+1
"RTN","SDWLIFT2",45,0)
 D SET^VALM10(VALMCNT,"Comments: ")
"RTN","SDWLIFT2",46,0)
 S X=$$GET1^DIQ(409.35,SDWLIFTN_",",5,"Z","WP")
"RTN","SDWLIFT2",47,0)
 S SDWLI=0 F  S SDWLI=$O(WP(SDWLI)) Q:'SDWLI  S VALMCNT=VALMCNT+1 D SET^VALM10(VALMCNT,WP(SDWLI,0))
"RTN","SDWLIFT2",48,0)
 Q
"RTN","SDWLIFT2",49,0)
 ;
"RTN","SDWLIFT2",50,0)
HD ; -- Make header line for list processor
"RTN","SDWLIFT2",51,0)
 S X=$$SETSTR^VALM1("User: "_SDWLDZN,"",1,79)
"RTN","SDWLIFT2",52,0)
 S VALMHDR(1)=X,VALMHDR(2)=""
"RTN","SDWLIFT2",53,0)
 Q
"RTN","SDWLIFT2",54,0)
EXIT ; Tidy up
"RTN","SDWLIFT2",55,0)
 K SDWLIFTN
"RTN","SDWLIFT2",56,0)
 K VALMHDR
"RTN","SDWLIFT2",57,0)
 Q
"RTN","SDWLIFT3")
0^4^B36385612
"RTN","SDWLIFT3",1,0)
SDWLIFT3 ;IOFO BAY PINES/OG - INTER-FACILITY TRANSFER: NEW TRANSFER  ; Compiled March 23, 2005 11:15:27
"RTN","SDWLIFT3",2,0)
 ;;5.3;Scheduling;**415**;AUG 13 1993
"RTN","SDWLIFT3",3,0)
 ;
"RTN","SDWLIFT3",4,0)
 ;
"RTN","SDWLIFT3",5,0)
 ;******************************************************************
"RTN","SDWLIFT3",6,0)
 ;                             CHANGE LOG
"RTN","SDWLIFT3",7,0)
 ;                                               
"RTN","SDWLIFT3",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLIFT3",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLIFT3",10,0)
 ;
"RTN","SDWLIFT3",11,0)
 ;
"RTN","SDWLIFT3",12,0)
 Q
"RTN","SDWLIFT3",13,0)
EN ; INITIALIZE VARIABLES
"RTN","SDWLIFT3",14,0)
 N DIR,DIC,DR,DIE,VADM,X,Y
"RTN","SDWLIFT3",15,0)
 D FULL^VALM1
"RTN","SDWLIFT3",16,0)
 D EN2()
"RTN","SDWLIFT3",17,0)
 D INIT^SDWLIFT1(0)
"RTN","SDWLIFT3",18,0)
 S VALMBCK="R"
"RTN","SDWLIFT3",19,0)
 Q
"RTN","SDWLIFT3",20,0)
EN2(SDWLDA) ; Entry point if Wait List has been selected elsewhere.
"RTN","SDWLIFT3",21,0)
 ; SDWLOPT is the option to be queried.
"RTN","SDWLIFT3",22,0)
 ; 1: Patient & Wait list entry
"RTN","SDWLIFT3",23,0)
 ; 2: Institution
"RTN","SDWLIFT3",24,0)
 ; 3: Comments
"RTN","SDWLIFT3",25,0)
 ; 4: Processing
"RTN","SDWLIFT3",26,0)
 ; 5: Confirmation
"RTN","SDWLIFT3",27,0)
 N SDWLOPT,SDWLOPT0
"RTN","SDWLIFT3",28,0)
 S SDWLOPT=2
"RTN","SDWLIFT3",29,0)
 I '$D(SDWLDA) S SDWLDA="",SDWLOPT=1
"RTN","SDWLIFT3",30,0)
 S SDWLOPT0=SDWLOPT
"RTN","SDWLIFT3",31,0)
 F  D  Q:'SDWLOPT
"RTN","SDWLIFT3",32,0)
 .N SDWLDFN,SDWLDMN,SDWLIFTN,SDWLINST,DIC,DIE,DA,DO,I,Y,%,DIWETXT
"RTN","SDWLIFT3",33,0)
 .I SDWLOPT=1 D
"RTN","SDWLIFT3",34,0)
 ..N SDWLOUT,SDWLC,SDWLI,SDWLNM
"RTN","SDWLIFT3",35,0)
 ..K Y,X
"RTN","SDWLIFT3",36,0)
 ..S DIC=409.3
"RTN","SDWLIFT3",37,0)
 ..S DIC(0)="ENQA"
"RTN","SDWLIFT3",38,0)
 ..S DIC("S")="I $P(^SDWL(409.3,+Y,0),U,17)'=""C""&'$$GETTRN^SDWLIFT1(Y)"
"RTN","SDWLIFT3",39,0)
 ..S DIC("W")="N SDWLSTA W $$GET1^DIQ(409.3,Y,2),""  "",$$GET1^DIQ(409.3,Y,4) S SDWLSTA=$$GET1^DIQ(409.3,Y,4,""I"") W:SDWLSTA'="""" "": ""_$$GET1^DIQ(409.3,Y,SDWLSTA+4)"
"RTN","SDWLIFT3",40,0)
 ..D ^DIC
"RTN","SDWLIFT3",41,0)
 ..I Y=-1 S SDWLOPT=0 Q
"RTN","SDWLIFT3",42,0)
 ..S SDWLDA=+Y,SDWLOPT=2
"RTN","SDWLIFT3",43,0)
 ..Q
"RTN","SDWLIFT3",44,0)
 .D:SDWLOPT=2
"RTN","SDWLIFT3",45,0)
 ..N SDWLY
"RTN","SDWLIFT3",46,0)
 ..S SDWLDFN=$$GET1^DIQ(409.3,SDWLDA,.01,"I")
"RTN","SDWLIFT3",47,0)
 ..S DIC=4
"RTN","SDWLIFT3",48,0)
 ..S DIC(0)="EMNQA"
"RTN","SDWLIFT3",49,0)
 ..S DIC("A")="Select Institution to transfer to: "
"RTN","SDWLIFT3",50,0)
 ..S DIC("S")="I $P(^DIC(4,+Y,0),U,11)=""N"",'+$P($G(^DIC(4,+Y,99)),U,4),$L($P($G(^DIC(4,+Y,99)),U))'>3,$$GET1^DIQ(4,Y,13)=""VAMC"""
"RTN","SDWLIFT3",51,0)
 ..D ^DIC
"RTN","SDWLIFT3",52,0)
 ..I Y=-1 S SDWLOPT=$S(SDWLOPT0=2:0,1:1) Q  ; If the call was made to go straight to Institution, quit out if no institution is selected.
"RTN","SDWLIFT3",53,0)
 ..S SDWLY=+Y,SDWLDMN=$$GET1^DIQ(4,SDWLY,60)
"RTN","SDWLIFT3",54,0)
 ..I SDWLDMN=""  W !,"This Institution does not have a Domain to which the request can be sent." Q
"RTN","SDWLIFT3",55,0)
 ..S SDWLINST=SDWLY,SDWLOPT=3
"RTN","SDWLIFT3",56,0)
 ..Q
"RTN","SDWLIFT3",57,0)
 .D:SDWLOPT=3
"RTN","SDWLIFT3",58,0)
 ..S DIC="^TMP(""SDWLIFT"",$J,""COMMENT""",DIWETXT="Transfer comments"
"RTN","SDWLIFT3",59,0)
 ..W !,DIWETXT
"RTN","SDWLIFT3",60,0)
 ..K @(DIC_")") S DIC=DIC_","
"RTN","SDWLIFT3",61,0)
 ..D EN^DIWE
"RTN","SDWLIFT3",62,0)
 ..S SDWLOPT=4
"RTN","SDWLIFT3",63,0)
 ..Q
"RTN","SDWLIFT3",64,0)
 .D:SDWLOPT=4
"RTN","SDWLIFT3",65,0)
 ..N SDWLDTM
"RTN","SDWLIFT3",66,0)
 ..K DIC
"RTN","SDWLIFT3",67,0)
 ..S DIR(0)="Y",DIR("A")="OK to send",DIR("B")="YES" D ^DIR
"RTN","SDWLIFT3",68,0)
 ..I 'Y S SDWLOPT=0 Q
"RTN","SDWLIFT3",69,0)
 ..S DIC=409.35,DIC(0)="Z",X=SDWLDA
"RTN","SDWLIFT3",70,0)
 ..D FILE^DICN
"RTN","SDWLIFT3",71,0)
 ..S SDWLIFTN=+Y
"RTN","SDWLIFT3",72,0)
 ..S DA(1)=+Y,DIC=DIC_DA(1)_",1,",SDWLI=0
"RTN","SDWLIFT3",73,0)
 ..F  S SDWLI=$O(^TMP("SDWLIFT",$J,"COMMENT",SDWLI)) Q:'SDWLI  S X=^TMP("SDWLIFT",$J,"COMMENT",SDWLI,0) K DO D FILE^DICN
"RTN","SDWLIFT3",74,0)
 ..D NOW^%DTC S SDWLDTM=%
"RTN","SDWLIFT3",75,0)
 ..S DIE=409.35,DR="1///"_$$GET1^DIQ(4,SDWLINST,99)_";2///"_SDWLDTM_";3///P;4///`"_DUZ
"RTN","SDWLIFT3",76,0)
 ..D ^DIE
"RTN","SDWLIFT3",77,0)
 ..D MSG
"RTN","SDWLIFT3",78,0)
 ..S SDWLOPT=0
"RTN","SDWLIFT3",79,0)
 ..Q
"RTN","SDWLIFT3",80,0)
 .Q
"RTN","SDWLIFT3",81,0)
 Q
"RTN","SDWLIFT3",82,0)
MSG ;acknowledgement notification to destination
"RTN","SDWLIFT3",83,0)
 N SDWLDA,DFN,TMP,SDWLTY,SDWLX,SDWLI,DIE,DA,DR,VAPA,WP
"RTN","SDWLIFT3",84,0)
 N XMSUB,XMY,XMTEXT,XMDUZ,SDWLX,SDWLI
"RTN","SDWLIFT3",85,0)
 S XMSUB="SDWL TRANSFER REQUEST"
"RTN","SDWLIFT3",86,0)
 S XMY("S.SDWL-XFER-SERVER@"_SDWLDMN)=""
"RTN","SDWLIFT3",87,0)
 S XMTEXT="SDWLX("
"RTN","SDWLIFT3",88,0)
 S XMDUZ="POSTMASTER"
"RTN","SDWLIFT3",89,0)
 S SDWLDA=$$GET1^DIQ(409.35,SDWLIFTN,.01,"I")
"RTN","SDWLIFT3",90,0)
 D GETS^DIQ(409.3,SDWLDA,".01;4;22","I","TMP")
"RTN","SDWLIFT3",91,0)
 S DFN=TMP(409.3,SDWLDA_",",.01,"I")
"RTN","SDWLIFT3",92,0)
 S SDWLTY=TMP(409.3,SDWLDA_",",4,"I")
"RTN","SDWLIFT3",93,0)
 D DEM^VADPT,ADD^VADPT
"RTN","SDWLIFT3",94,0)
 D GETS^DIQ(2,DFN,".301;.302;991.01","I","TMP")
"RTN","SDWLIFT3",95,0)
 S SDWLX(0)=0
"RTN","SDWLIFT3",96,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".01"_U_"NAME"_U_VADM(1)
"RTN","SDWLIFT3",97,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".02"_U_"SEX"_U_$P(VADM(5),U)
"RTN","SDWLIFT3",98,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".03"_U_"DATE OF BIRTH"_U_$P(VADM(3),U)
"RTN","SDWLIFT3",99,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".09"_U_"SOCIAL SECURITY NUMBER"_U_$P(VADM(2),U)
"RTN","SDWLIFT3",100,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".1"_U_"REQUESTING STATION NUMBER"_U_$P($$SITE^VASITE(),U,3)
"RTN","SDWLIFT3",101,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".111"_U_"STREET ADDRESS [LINE 1]"_U_VAPA(1)
"RTN","SDWLIFT3",102,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".112"_U_"STREET ADDRESS [LINE 2]"_U_VAPA(2)
"RTN","SDWLIFT3",103,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".113"_U_"STREET ADDRESS [LINE 3]"_U_VAPA(3)
"RTN","SDWLIFT3",104,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".114"_U_"CITY"_U_VAPA(4)
"RTN","SDWLIFT3",105,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".115"_U_"STATE"_U_VAPA(5)
"RTN","SDWLIFT3",106,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".116"_U_"ZIP CODE"_U_VAPA(6)
"RTN","SDWLIFT3",107,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".117"_U_"COUNTY"_U_$P(VAPA(7),U)
"RTN","SDWLIFT3",108,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".1217"_U_"TEMPORARY ADDRESS START DATE"_U_$P(VAPA(9),U)
"RTN","SDWLIFT3",109,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".1218"_U_"TEMPORARY ADDRESS END DATE"_U_$P(VAPA(10),U)
"RTN","SDWLIFT3",110,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".131"_U_"PHONE NUMBER [RESIDENCE]"_U_VAPA(8)
"RTN","SDWLIFT3",111,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".301"_U_"SERVICE CONNECTED?"_U_TMP(2,DFN_",",.301,"I")
"RTN","SDWLIFT3",112,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".302"_U_"SERVICE CONNECTED PERCENTAGE"_U_TMP(2,DFN_",",.302,"I")
"RTN","SDWLIFT3",113,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".361"_U_"PRIMARY ELIGIBILITY CODE"_U_$$GET1^DIQ(2,DFN,.361)
"RTN","SDWLIFT3",114,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))="991.01"_U_"INTEGRATION CONTROL NUMBER"_U_TMP(2,DFN_",",991.01,"I")
"RTN","SDWLIFT3",115,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".5"_U_"SENDING FACILITY TRANSFER ID"_U_SDWLIFTN
"RTN","SDWLIFT3",116,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))="2"_U_"SENDING FACILITY TRANSFER ID"_U_SDWLDTM
"RTN","SDWLIFT3",117,0)
 S X=$$GET1^DIQ(409.35,SDWLIFTN_",",5,"Z","WP")
"RTN","SDWLIFT3",118,0)
 S SDWLI=0 F  S SDWLI=$O(WP(SDWLI)) Q:'SDWLI  S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=".4"_U_"COMMENTS"_U_WP(SDWLI,0)
"RTN","SDWLIFT3",119,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=4_U_"WAIT LIST TYPE"_U_SDWLTY
"RTN","SDWLIFT3",120,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=5_U_"WAIT LIST TYPE EXTENSION"_U_$$GET1^DIQ(409.3,SDWLDA,4+SDWLTY)
"RTN","SDWLIFT3",121,0)
 S SDWLX(0)=SDWLX(0)+1,SDWLX(SDWLX(0))=22_U_"DESIRED DATE OF APPOINTMENT"_U_TMP(409.3,SDWLDA_",",22,"I")
"RTN","SDWLIFT3",122,0)
 D ^XMD
"RTN","SDWLIFT3",123,0)
 ; Change status to TRANSMITTED
"RTN","SDWLIFT3",124,0)
 S DIE=409.35,DA=SDWLIFTN,DR="3///T" D ^DIE
"RTN","SDWLIFT3",125,0)
 Q
"RTN","SDWLIFT4")
0^8^B2713587
"RTN","SDWLIFT4",1,0)
SDWLIFT4 ;IOFO BAY PINES/OG - INTER-FACILITY TRANSFER: REMOVE TRANSFER DETAILS  ; Compiled March 23, 2005 11:22:00
"RTN","SDWLIFT4",2,0)
 ;;5.3;Scheduling;**415**;AUG 13 1993
"RTN","SDWLIFT4",3,0)
 ;
"RTN","SDWLIFT4",4,0)
 ;
"RTN","SDWLIFT4",5,0)
 ;******************************************************************
"RTN","SDWLIFT4",6,0)
 ;                             CHANGE LOG
"RTN","SDWLIFT4",7,0)
 ;                                               
"RTN","SDWLIFT4",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLIFT4",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLIFT4",10,0)
 ;
"RTN","SDWLIFT4",11,0)
 ;
"RTN","SDWLIFT4",12,0)
 Q
"RTN","SDWLIFT4",13,0)
EN ; INITIALIZE VARIABLES FOR REMOVE
"RTN","SDWLIFT4",14,0)
 N SDWLINFO
"RTN","SDWLIFT4",15,0)
 D GETDATA^SDWLIFT5(.SDWLINFO,0)
"RTN","SDWLIFT4",16,0)
 S SDWLIFTN=$$GETTN^SDWLIFT(.SDWLINFO)
"RTN","SDWLIFT4",17,0)
 S VALMBCK="R"
"RTN","SDWLIFT4",18,0)
 Q:'SDWLIFTN
"RTN","SDWLIFT4",19,0)
 D EN^VALM("SDWL TRANSFER REQ REMV")
"RTN","SDWLIFT4",20,0)
 D INIT^SDWLIFT1(0)
"RTN","SDWLIFT4",21,0)
 S VALMBCK="R"
"RTN","SDWLIFT4",22,0)
 Q
"RTN","SDWLIFT4",23,0)
REMOVE ;
"RTN","SDWLIFT4",24,0)
 N X,DIC,DIK,DA,DR,Y
"RTN","SDWLIFT4",25,0)
 S X="`"_SDWLIFTN,DIC=409.35,DIC(0)="Z" D ^DIC
"RTN","SDWLIFT4",26,0)
 I $P(Y(0),U,4)="R" D REMREQ
"RTN","SDWLIFT4",27,0)
 E  S DA=SDWLIFTN,DIK="^SDWL(409.35," D ^DIK
"RTN","SDWLIFT4",28,0)
 K ^TMP("SDWLIFT",$J,"EP")
"RTN","SDWLIFT4",29,0)
 Q
"RTN","SDWLIFT4",30,0)
REMREQ ; send removal request to SDWL-XFER-SERVER
"RTN","SDWLIFT4",31,0)
 N SDWLRIN,DIE,DA,DR
"RTN","SDWLIFT4",32,0)
 S SDWLRIN=$$GET1^DIQ(409.35,SDWLIFTN,6)
"RTN","SDWLIFT4",33,0)
 D SEND(SDWLRIN,$$GET1^DIQ(4,$$FIND1^DIC(4,"","X",$$GET1^DIQ(409.35,SDWLIFTN,1,"I"),"D"),60))
"RTN","SDWLIFT4",34,0)
 S DIE=409.35,DA=SDWLIFTN,DR="3///C" D ^DIE
"RTN","SDWLIFT4",35,0)
 Q
"RTN","SDWLIFT4",36,0)
SEND(SDWLRIN,SDWLDMN) ;
"RTN","SDWLIFT4",37,0)
 N XMSUB,XMY,XMTEXT,XMDUZ,SDWLX
"RTN","SDWLIFT4",38,0)
 S XMSUB="SDWL TRANSFER REMOVAL REQUEST"
"RTN","SDWLIFT4",39,0)
 S XMY("S.SDWL-XFER-SERVER@"_SDWLDMN)=""
"RTN","SDWLIFT4",40,0)
 S XMTEXT="SDWLX("
"RTN","SDWLIFT4",41,0)
 S XMDUZ="POSTMASTER"
"RTN","SDWLIFT4",42,0)
 S SDWLX(1,0)="6"_U_"RECEIVING FACILITY TRANSFER ID"_U_SDWLRIN
"RTN","SDWLIFT4",43,0)
 S SDWLX(0)=1
"RTN","SDWLIFT4",44,0)
 D ^XMD
"RTN","SDWLIFT4",45,0)
 Q
"RTN","SDWLIFT4",46,0)
EXIT ; Tidy up
"RTN","SDWLIFT4",47,0)
 K SDWLIFTN
"RTN","SDWLIFT5")
0^5^B15806000
"RTN","SDWLIFT5",1,0)
SDWLIFT5 ;IOFO BAY PINES/OG - INTER-FACILITY TRANSFER: ACCEPT DATA - MAIN SCREEN  ; Compiled March 29, 2005 15:26:24
"RTN","SDWLIFT5",2,0)
 ;;5.3;Scheduling;**415**;AUG 13 1993
"RTN","SDWLIFT5",3,0)
 ;
"RTN","SDWLIFT5",4,0)
 ;
"RTN","SDWLIFT5",5,0)
 ;******************************************************************
"RTN","SDWLIFT5",6,0)
 ;                             CHANGE LOG
"RTN","SDWLIFT5",7,0)
 ;                                               
"RTN","SDWLIFT5",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLIFT5",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLIFT5",10,0)
 ;
"RTN","SDWLIFT5",11,0)
 ;
"RTN","SDWLIFT5",12,0)
 Q
"RTN","SDWLIFT5",13,0)
EN ; INITIALIZE VARIABLES
"RTN","SDWLIFT5",14,0)
 K DIR,DIC,DR,DIE,VADM,SDWLLIST,VALMHDR,VALMCNT,VALMBCK
"RTN","SDWLIFT5",15,0)
 D EN^VALM("SDWL TRANSFER ACC MAIN")
"RTN","SDWLIFT5",16,0)
 Q
"RTN","SDWLIFT5",17,0)
INIT ; Default initialization options.
"RTN","SDWLIFT5",18,0)
 K ^TMP("DILIST",$J),^TMP("SDWLIFT",$J,"EP")
"RTN","SDWLIFT5",19,0)
 N SDWLI,DIC
"RTN","SDWLIFT5",20,0)
 S SDWLSPS=$J("",80)
"RTN","SDWLIFT5",21,0)
 S VALMCNT=0
"RTN","SDWLIFT5",22,0)
 D GETLIST F SDWLI=1:1:SDWLLIST(0) D
"RTN","SDWLIFT5",23,0)
 .N SDWLOUT
"RTN","SDWLIFT5",24,0)
 .S VALMCNT=VALMCNT+1
"RTN","SDWLIFT5",25,0)
 .S SDWLOUT=$E(VALMCNT_SDWLSPS,1,3)
"RTN","SDWLIFT5",26,0)
 .S SDWLOUT=SDWLOUT_$E($P(SDWLLIST(SDWLI,0),U)_SDWLSPS,1,26)_" "
"RTN","SDWLIFT5",27,0)
 .S SDWLOUT=SDWLOUT_$P(SDWLLIST(SDWLI,0),U,2)_" "
"RTN","SDWLIFT5",28,0)
 .S SDWLOUT=SDWLOUT_$P(SDWLLIST(SDWLI,0),U,3)
"RTN","SDWLIFT5",29,0)
 .D SET^VALM10(VALMCNT,SDWLOUT)
"RTN","SDWLIFT5",30,0)
 .Q
"RTN","SDWLIFT5",31,0)
 I 'VALMCNT S VALMCNT=1 D SET^VALM10(VALMCNT," ** No transfer details... ")
"RTN","SDWLIFT5",32,0)
 Q
"RTN","SDWLIFT5",33,0)
HD ; -- Make header line for list processor
"RTN","SDWLIFT5",34,0)
 S (VALMHDR(1),VALMHDR(2))=""
"RTN","SDWLIFT5",35,0)
 Q
"RTN","SDWLIFT5",36,0)
EXIT ; Tidy up
"RTN","SDWLIFT5",37,0)
 K ^TMP("DILIST",$J),^TMP("SDWLIFT",$J,"EP")
"RTN","SDWLIFT5",38,0)
 K SDWLLIST,SDWLSPS,SDWLIFTN
"RTN","SDWLIFT5",39,0)
 Q
"RTN","SDWLIFT5",40,0)
GETLIST ;
"RTN","SDWLIFT5",41,0)
 N SDWLI
"RTN","SDWLIFT5",42,0)
 S DIC=409.36
"RTN","SDWLIFT5",43,0)
 D LIST^DIC(DIC)
"RTN","SDWLIFT5",44,0)
 S (SDWLI,SDWLLIST(0))=0,DIC(0)="Z"
"RTN","SDWLIFT5",45,0)
 F  S SDWLI=$O(^TMP("DILIST",$J,2,SDWLI)) Q:'SDWLI  D
"RTN","SDWLIFT5",46,0)
 .N TMP,SDWLIFTN,DIC,D,X
"RTN","SDWLIFT5",47,0)
 .S SDWLIFTN=^TMP("DILIST",$J,2,SDWLI)
"RTN","SDWLIFT5",48,0)
 .D GETS^DIQ(409.36,SDWLIFTN,".01;.02;.03;.09;.1;.2",,"TMP")
"RTN","SDWLIFT5",49,0)
 .S SDWLLIST(0)=SDWLLIST(0)+1
"RTN","SDWLIFT5",50,0)
 .S SDWLLIST(SDWLLIST(0),0)=TMP(409.36,SDWLIFTN_",",.01)
"RTN","SDWLIFT5",51,0)
 .S $P(SDWLLIST(SDWLLIST(0),0),U,2)=TMP(409.36,SDWLIFTN_",",.2)
"RTN","SDWLIFT5",52,0)
 .S $P(SDWLLIST(SDWLLIST(0),0),U,3)=$$GET1^DIQ(4,$$FIND1^DIC(4,"","X",TMP(409.36,SDWLIFTN_",",.1),"D"),.01)
"RTN","SDWLIFT5",53,0)
 .S SDWLLIST(SDWLLIST(0),1)=SDWLIFTN
"RTN","SDWLIFT5",54,0)
 .Q
"RTN","SDWLIFT5",55,0)
 Q
"RTN","SDWLIFT5",56,0)
GETDATA(SDWLOUT,SDWLFMT) ; Get request data for display.
"RTN","SDWLIFT5",57,0)
 ; SDWLFMT - output format: 0: filtered, only active transmissions
"RTN","SDWLIFT5",58,0)
 ;                          1: all transmissions
"RTN","SDWLIFT5",59,0)
 ;                          2: filtered, only inactive transmissions
"RTN","SDWLIFT5",60,0)
 N SDWLI,DIC,X,Y
"RTN","SDWLIFT5",61,0)
 S DIC=409.35
"RTN","SDWLIFT5",62,0)
 D LIST^DIC(DIC)
"RTN","SDWLIFT5",63,0)
 S (SDWLI,SDWLOUT(0))=0,DIC(0)="Z"
"RTN","SDWLIFT5",64,0)
 F  S SDWLI=$O(^TMP("DILIST",$J,2,SDWLI)) Q:'SDWLI  S X="`"_^TMP("DILIST",$J,2,SDWLI) D ^DIC I $D(Y(0)) D
"RTN","SDWLIFT5",65,0)
 .N REC,SDWLNAM,DFN,SDWLDA,SDWLSTA,TMP,SDWLIFTN,SDWLTY,VADM,DIC,D,X
"RTN","SDWLIFT5",66,0)
 .S REC=Y(0),SDWLNAM=Y(0,0),DFN=+Y(0),SDWLDA=$P(Y(0),U),SDWLIFTN=+Y
"RTN","SDWLIFT5",67,0)
 .D GETS^DIQ(409.35,SDWLIFTN,"1;2;3;4",,"TMP")
"RTN","SDWLIFT5",68,0)
 .S SDWLSTA=TMP(409.35,SDWLIFTN_",",3)
"RTN","SDWLIFT5",69,0)
 .I 'SDWLFMT Q:SDWLSTA="ACCEPTED"!(SDWLSTA="REFUSED")  ; Only show 'active' transmissions.
"RTN","SDWLIFT5",70,0)
 .I SDWLFMT=2 Q:SDWLSTA'="ACCEPTED"&(SDWLSTA'="REFUSED")  ; Only show 'inactive' transmissions.
"RTN","SDWLIFT5",71,0)
 .D DEM^VADPT
"RTN","SDWLIFT5",72,0)
 .D GETS^DIQ(409.3,SDWLDA,"2;4",,"TMP")
"RTN","SDWLIFT5",73,0)
 .S SDWLOUT(0)=SDWLOUT(0)+1
"RTN","SDWLIFT5",74,0)
 .S SDWLOUT(SDWLOUT(0),1)=SDWLIFTN
"RTN","SDWLIFT5",75,0)
 .; Name
"RTN","SDWLIFT5",76,0)
 .S SDWLOUT(SDWLOUT(0),0)=SDWLNAM
"RTN","SDWLIFT5",77,0)
 .; SSN
"RTN","SDWLIFT5",78,0)
 .S $P(SDWLOUT(SDWLOUT(0),0),U,2)=$P(VADM(2),U,2)
"RTN","SDWLIFT5",79,0)
 .; Destination Institution
"RTN","SDWLIFT5",80,0)
 .S $P(SDWLOUT(SDWLOUT(0),0),U,3)=$$GET1^DIQ(4,$$FIND1^DIC(4,"","X",TMP(409.35,SDWLIFTN_",",1),"D"),.01)
"RTN","SDWLIFT5",81,0)
 .; Transfer Status
"RTN","SDWLIFT5",82,0)
 .S $P(SDWLOUT(SDWLOUT(0),0),U,4)=SDWLSTA
"RTN","SDWLIFT5",83,0)
 .; Current Wait List Institution
"RTN","SDWLIFT5",84,0)
 .S $P(SDWLOUT(SDWLOUT(0),0),U,5)=TMP(409.3,SDWLDA_",",2)
"RTN","SDWLIFT5",85,0)
 .; Current Wait List Type
"RTN","SDWLIFT5",86,0)
 .S $P(SDWLOUT(SDWLOUT(0),0),U,6)=TMP(409.3,SDWLDA_",",4)
"RTN","SDWLIFT5",87,0)
 .; Current Wait List Type Extension
"RTN","SDWLIFT5",88,0)
 .S SDWLTY=$$GET1^DIQ(409.3,SDWLDA,4,"I")
"RTN","SDWLIFT5",89,0)
 .S $P(SDWLOUT(SDWLOUT(0),0),U,7)=$$GET1^DIQ(409.3,SDWLDA,SDWLTY+4)
"RTN","SDWLIFT5",90,0)
 .; Sex
"RTN","SDWLIFT5",91,0)
 .S $P(SDWLOUT(SDWLOUT(0),0),U,8)=$P(VADM(5),U,2)
"RTN","SDWLIFT5",92,0)
 .; Transmission date/time
"RTN","SDWLIFT5",93,0)
 .S $P(SDWLOUT(SDWLOUT(0),0),U,9)=TMP(409.35,SDWLIFTN_",",2)
"RTN","SDWLIFT5",94,0)
 .; Requestor
"RTN","SDWLIFT5",95,0)
 .S $P(SDWLOUT(SDWLOUT(0),0),U,10)=TMP(409.35,SDWLIFTN_",",4)
"RTN","SDWLIFT5",96,0)
 .Q
"RTN","SDWLIFT5",97,0)
 Q
"RTN","SDWLIFT6")
0^6^B38500505
"RTN","SDWLIFT6",1,0)
SDWLIFT6 ;IOFO BAY PINES/OG - INTER-FACILITY TRANSFER: DISPLAY ACCEPT DETAILS  ; Compiled March 23, 2005 12:38:06
"RTN","SDWLIFT6",2,0)
 ;;5.3;Scheduling;**415**;AUG 13 1993
"RTN","SDWLIFT6",3,0)
 ;
"RTN","SDWLIFT6",4,0)
 ;
"RTN","SDWLIFT6",5,0)
 ;******************************************************************
"RTN","SDWLIFT6",6,0)
 ;                             CHANGE LOG
"RTN","SDWLIFT6",7,0)
 ;                                               
"RTN","SDWLIFT6",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLIFT6",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLIFT6",10,0)
 ;
"RTN","SDWLIFT6",11,0)
 ;
"RTN","SDWLIFT6",12,0)
 Q
"RTN","SDWLIFT6",13,0)
EN ; INITIALIZE VARIABLES FOR DISPLAY
"RTN","SDWLIFT6",14,0)
 N SDWLI,SDWLOK
"RTN","SDWLIFT6",15,0)
 K SDWLLIST
"RTN","SDWLIFT6",16,0)
 D GETLIST^SDWLIFT5
"RTN","SDWLIFT6",17,0)
 S SDWLIFTN=$$GETTN^SDWLIFT(.SDWLLIST)
"RTN","SDWLIFT6",18,0)
 I 'SDWLIFTN S VALMBCK="R" Q
"RTN","SDWLIFT6",19,0)
 ; Refresh list and loop to ensure that the selection hasn't been removed while the choice was being made.
"RTN","SDWLIFT6",20,0)
 K SDWLLIST D GETLIST^SDWLIFT5
"RTN","SDWLIFT6",21,0)
 S (SDWLOK,SDWLI)=0 F  S SDWLI=$O(SDWLLIST(SDWLI)) Q:'SDWLI  I SDWLLIST(SDWLI,1)=SDWLIFTN S SDWLOK=1 Q
"RTN","SDWLIFT6",22,0)
 D:SDWLOK EN^VALM("SDWL TRANSFER ACC VIEW")
"RTN","SDWLIFT6",23,0)
 D INIT^SDWLIFT5
"RTN","SDWLIFT6",24,0)
 S VALMBCK="R"
"RTN","SDWLIFT6",25,0)
 Q
"RTN","SDWLIFT6",26,0)
INIT ; Default initialization options.
"RTN","SDWLIFT6",27,0)
 N SDWLINFO
"RTN","SDWLIFT6",28,0)
 D GETINFO(.SDWLINFO)
"RTN","SDWLIFT6",29,0)
 F VALMCNT=1:1:SDWLINFO(0) D SET^VALM10(VALMCNT,SDWLINFO(VALMCNT,0))
"RTN","SDWLIFT6",30,0)
 Q
"RTN","SDWLIFT6",31,0)
GETINFO(SDWLOUT) ; The Coversheet function calls here too.
"RTN","SDWLIFT6",32,0)
 N DIC,D,X,WP,TMP,SDWLADD,SDWLFID,SDWLI
"RTN","SDWLIFT6",33,0)
 D GETS^DIQ(409.36,SDWLIFTN,"*",,"TMP")
"RTN","SDWLIFT6",34,0)
 S SDWLOUT(0)=1
"RTN","SDWLIFT6",35,0)
 S SDWLOUT(SDWLOUT(0),0)="Transmg. Inst: "_$E($$GET1^DIQ(4,$$FIND1^DIC(4,"","X",TMP(409.36,SDWLIFTN_",",.1),"D"),.01)_SDWLSPS,1,28)_" "
"RTN","SDWLIFT6",36,0)
 S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_"Transmn. Date: "_TMP(409.36,SDWLIFTN_",",.2)
"RTN","SDWLIFT6",37,0)
 S SDWLOUT(0)=SDWLOUT(0)+1
"RTN","SDWLIFT6",38,0)
 S SDWLOUT(SDWLOUT(0),0)="Name: "_$E(TMP(409.36,SDWLIFTN_",",.01)_SDWLSPS,1,27)_" "
"RTN","SDWLIFT6",39,0)
 S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_"Sex: "_$E(TMP(409.36,SDWLIFTN_",",.02)_SDWLSPS,1,7)
"RTN","SDWLIFT6",40,0)
 S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_"DoB: "_$E(TMP(409.36,SDWLIFTN_",",.03)_SDWLSPS,1,13)
"RTN","SDWLIFT6",41,0)
 S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_"SSN: "_TMP(409.36,SDWLIFTN_",",.09)
"RTN","SDWLIFT6",42,0)
 ;
"RTN","SDWLIFT6",43,0)
 S SDWLOUT(0)=SDWLOUT(0)+1,SDWLADD=SDWLOUT(0)
"RTN","SDWLIFT6",44,0)
 S SDWLOUT(SDWLOUT(0),0)="Address: "_TMP(409.36,SDWLIFTN_",",.111)
"RTN","SDWLIFT6",45,0)
 F SDWLFID=.112:.001:.114,.117 I TMP(409.36,SDWLIFTN_",",SDWLFID)'=""  S SDWLOUT(0)=SDWLOUT(0)+1,SDWLOUT(SDWLOUT(0),0)=$E(SDWLSPS,1,9)_TMP(409.36,SDWLIFTN_",",SDWLFID)
"RTN","SDWLIFT6",46,0)
 I TMP(409.36,SDWLIFTN_",",.115)_TMP(409.36,SDWLIFTN_",",.116)'="" D
"RTN","SDWLIFT6",47,0)
 .S SDWLOUT(0)=SDWLOUT(0)+1
"RTN","SDWLIFT6",48,0)
 .S SDWLOUT(SDWLOUT(0),0)=$E(SDWLSPS,1,9)
"RTN","SDWLIFT6",49,0)
 .I TMP(409.36,SDWLIFTN_",",.115)'="" S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_TMP(409.36,SDWLIFTN_",",.115)
"RTN","SDWLIFT6",50,0)
 .S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_" "_TMP(409.36,SDWLIFTN_",",.116)
"RTN","SDWLIFT6",51,0)
 .Q
"RTN","SDWLIFT6",52,0)
 I TMP(409.36,SDWLIFTN_",",.131)'="" S SDWLOUT(0)=SDWLOUT(0)+1,SDWLOUT(SDWLOUT(0),0)="Phone no "_TMP(409.36,SDWLIFTN_",",.131)
"RTN","SDWLIFT6",53,0)
 D:TMP(409.36,SDWLIFTN_",",.1217)'=""  ; Temporary address details. Displayed to the right of the address in up to 3 lines starting column 62
"RTN","SDWLIFT6",54,0)
 .S SDWLOUT(SDWLADD,0)=$E(SDWLOUT(SDWLADD,0)_SDWLSPS,1,61)_"Temporary address"  ; There should be at least three lines if it is also indicated as temporary.
"RTN","SDWLIFT6",55,0)
 .S SDWLOUT(SDWLADD+1,0)=$E(SDWLOUT(SDWLADD+1,0)_SDWLSPS,1,61)_"From: "_TMP(409.36,SDWLIFTN_",",.1217)
"RTN","SDWLIFT6",56,0)
 .S SDWLOUT(SDWLADD+2,0)=$E(SDWLOUT(SDWLADD+2,0)_SDWLSPS,1,61)_"To  : "_TMP(409.36,SDWLIFTN_",",.1218)
"RTN","SDWLIFT6",57,0)
 .Q
"RTN","SDWLIFT6",58,0)
 S SDWLOUT(0)=SDWLOUT(0)+1,SDWLOUT(SDWLOUT(0),0)="Service connected: "_TMP(409.36,SDWLIFTN_",",.301)
"RTN","SDWLIFT6",59,0)
 I TMP(409.36,SDWLIFTN_",",.301)="YES" S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_"  Percentage: "_TMP(409.36,SDWLIFTN_",",.302)
"RTN","SDWLIFT6",60,0)
 S SDWLOUT(0)=SDWLOUT(0)+1,SDWLOUT(SDWLOUT(0),0)="Primary Eligibility: "_TMP(409.36,SDWLIFTN_",",.361)
"RTN","SDWLIFT6",61,0)
 S SDWLOUT(0)=SDWLOUT(0)+1,SDWLOUT(SDWLOUT(0),0)="Wait List Type: "
"RTN","SDWLIFT6",62,0)
 S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_TMP(409.36,SDWLIFTN_",",4)_" : "_TMP(409.36,SDWLIFTN_",",5)
"RTN","SDWLIFT6",63,0)
 S SDWLOUT(0)=SDWLOUT(0)+1,SDWLOUT(SDWLOUT(0),0)="Desired Date of Appt: "
"RTN","SDWLIFT6",64,0)
 S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_TMP(409.36,SDWLIFTN_",",22)
"RTN","SDWLIFT6",65,0)
 S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_"  Integration Control Number: "
"RTN","SDWLIFT6",66,0)
 S SDWLOUT(SDWLOUT(0),0)=SDWLOUT(SDWLOUT(0),0)_TMP(409.36,SDWLIFTN_",",991.01)
"RTN","SDWLIFT6",67,0)
 S SDWLOUT(0)=SDWLOUT(0)+1,SDWLOUT(SDWLOUT(0),0)="Comments: "
"RTN","SDWLIFT6",68,0)
 S X=$$GET1^DIQ(409.36,SDWLIFTN_",",.4,"Z","WP")
"RTN","SDWLIFT6",69,0)
 S SDWLI=0 F  S SDWLI=$O(WP(SDWLI)) Q:'SDWLI  S SDWLOUT(0)=SDWLOUT(0)+1,SDWLOUT(SDWLOUT(0),0)=WP(SDWLI,0)
"RTN","SDWLIFT6",70,0)
 Q
"RTN","SDWLIFT6",71,0)
GETTN(SDWLLIST) ; Get transfer id.
"RTN","SDWLIFT6",72,0)
 N DIR,Y
"RTN","SDWLIFT6",73,0)
 I 'SDWLLIST(0) S DIR(0)="Y",DIR("A")="No entries. OK",DIR("B")="YES" D ^DIR Q 0
"RTN","SDWLIFT6",74,0)
 I SDWLLIST(0)=1 S Y=1  ; If there is only one, don't ask.
"RTN","SDWLIFT6",75,0)
 E  S DIR(0)="L^1:"_SDWLLIST(0),DIR("A")="Which entry?" D ^DIR
"RTN","SDWLIFT6",76,0)
 Q $G(SDWLLIST(+Y,1),0)
"RTN","SDWLIFT6",77,0)
HD ; -- Make header line for list processor
"RTN","SDWLIFT6",78,0)
 S (VALMHDR(1),VALMHDR(2))=""
"RTN","SDWLIFT6",79,0)
 Q
"RTN","SDWLIFT6",80,0)
ACCEPT ; Sign the transaction off as accepted. Remove the temporary file and send a message to transmitting facility
"RTN","SDWLIFT6",81,0)
 N DIR
"RTN","SDWLIFT6",82,0)
 I $$GET1^DIQ(409.36,SDWLIFTN,.3)'="YES" D  Q
"RTN","SDWLIFT6",83,0)
 .S DIR("A")="A coversheet does not appear to have been requested."_$C(13,10)_"This is required before acceptance. Enter RETURN to continue or '^' to exit"
"RTN","SDWLIFT6",84,0)
 .S DIR(0)="E"
"RTN","SDWLIFT6",85,0)
 .D ^DIR
"RTN","SDWLIFT6",86,0)
 .S VALMBCK=$S(Y:"R",1:"Q")
"RTN","SDWLIFT6",87,0)
 .Q
"RTN","SDWLIFT6",88,0)
 D FULL^VALM1
"RTN","SDWLIFT6",89,0)
 S DIR(0)="Y"
"RTN","SDWLIFT6",90,0)
 S DIR("A")="Do you confirm that the appropriate action was taken to schedule this patient"_$C(13,10)_"for an appointment or she/he has EWL entry and the cover sheet has been printed"
"RTN","SDWLIFT6",91,0)
 S DIR("B")="N"
"RTN","SDWLIFT6",92,0)
 D ^DIR
"RTN","SDWLIFT6",93,0)
 D:Y
"RTN","SDWLIFT6",94,0)
 .N SDWLSTN,SDWLINST,XMY,XMSUB,XMTEXT,XMDUZ,SDWLX,DA,DIK
"RTN","SDWLIFT6",95,0)
 .S SDWLSTN=$$GET1^DIQ(409.36,SDWLIFTN,.1)
"RTN","SDWLIFT6",96,0)
 .S SDWLINST=$$FIND1^DIC(4,"","X",SDWLSTN,"D")
"RTN","SDWLIFT6",97,0)
 .S XMY("S.SDWL-XFER-SERVER@"_$$GET1^DIQ(4,SDWLINST,60))=""
"RTN","SDWLIFT6",98,0)
 .S XMSUB="SDWL TRANSFER ACCEPTANCE"
"RTN","SDWLIFT6",99,0)
 .S XMTEXT="SDWLX("
"RTN","SDWLIFT6",100,0)
 .S XMDUZ="POSTMASTER"
"RTN","SDWLIFT6",101,0)
 .S SDWLX(1,0)=".5"_U_"SENDING FACILITY TRANSFER ID"_U_$$GET1^DIQ(409.36,SDWLIFTN,.5)
"RTN","SDWLIFT6",102,0)
 .S SDWLX(2,0)="7"_U_"ACCEPTING PERSON"_U_$$GET1^DIQ(200,DUZ,.01)
"RTN","SDWLIFT6",103,0)
 .S SDWLX(0)=2
"RTN","SDWLIFT6",104,0)
 .D ^XMD
"RTN","SDWLIFT6",105,0)
 .S DA=SDWLIFTN,DIK="^SDWL(409.36," D ^DIK
"RTN","SDWLIFT6",106,0)
 .Q
"RTN","SDWLIFT6",107,0)
 S VALMBCK="Q"
"RTN","SDWLIFT6",108,0)
 Q
"RTN","SDWLIFT6",109,0)
REJECT ; Sign the transaction off as rejected. Remove the temporary file and send a message to transmitting facility
"RTN","SDWLIFT6",110,0)
 N SDWLSTN,SDWLINST,XMSUB,XMY,XMTEXT,XMDUZ,SDWLX
"RTN","SDWLIFT6",111,0)
 S SDWLSTN=$$GET1^DIQ(409.36,SDWLIFTN,.1)
"RTN","SDWLIFT6",112,0)
 S SDWLINST=$$FIND1^DIC(4,"","X",SDWLSTN,"D")
"RTN","SDWLIFT6",113,0)
 S XMY("S.SDWL-XFER-SERVER@"_$$GET1^DIQ(4,SDWLINST,60))=""
"RTN","SDWLIFT6",114,0)
 S XMSUB="SDWL TRANSFER REJECTION"
"RTN","SDWLIFT6",115,0)
 S XMTEXT="SDWLX("
"RTN","SDWLIFT6",116,0)
 S XMDUZ="POSTMASTER"
"RTN","SDWLIFT6",117,0)
 S SDWLX(1,0)=".5"_U_"SENDING FACILITY TRANSFER ID"_U_$$GET1^DIQ(409.36,SDWLIFTN,.5)
"RTN","SDWLIFT6",118,0)
 S SDWLX(0)=1
"RTN","SDWLIFT6",119,0)
 D ^XMD
"RTN","SDWLIFT6",120,0)
 S DA=SDWLIFTN,DIK="^SDWL(409.36," D ^DIK
"RTN","SDWLIFT6",121,0)
 ;teh/05/20/2005 cleans the SDWLLIST array and reset count.
"RTN","SDWLIFT6",122,0)
 K SDWLLIST(SDWLIFTN)
"RTN","SDWLIFT6",123,0)
 S SDWLLIST(0)=SDWLLIST(0)-1
"RTN","SDWLIFT6",124,0)
 S VALMBCK="Q"
"RTN","SDWLIFT6",125,0)
EXIT ; Tidy up
"RTN","SDWLIFT6",126,0)
 K SDWLIFTN
"RTN","SDWLIFT6",127,0)
 Q
"RTN","SDWLIFT7")
0^7^B7912820
"RTN","SDWLIFT7",1,0)
SDWLIFT7 ; bp-oifo/og ; Print reports  ; Compiled April 11, 2005 16:10:09
"RTN","SDWLIFT7",2,0)
 ;;5.3;Scheduling;**415**;AUG 13 1993
"RTN","SDWLIFT7",3,0)
 ;
"RTN","SDWLIFT7",4,0)
 ;
"RTN","SDWLIFT7",5,0)
 ;******************************************************************
"RTN","SDWLIFT7",6,0)
 ;                             CHANGE LOG
"RTN","SDWLIFT7",7,0)
 ;                                               
"RTN","SDWLIFT7",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLIFT7",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLIFT7",10,0)
 ;
"RTN","SDWLIFT7",11,0)
 ;
"RTN","SDWLIFT7",12,0)
 ; Print coversheet, dialog.
"RTN","SDWLIFT7",13,0)
 D DIALOG("EN1^"_$T(+0),"SDWL TRANSFER COVERSHEET")
"RTN","SDWLIFT7",14,0)
 S VALMBCK="R"
"RTN","SDWLIFT7",15,0)
 Q
"RTN","SDWLIFT7",16,0)
REQS ; All transfer requests
"RTN","SDWLIFT7",17,0)
 N SDWLSPS  ; Required as this is called from a menu option.
"RTN","SDWLIFT7",18,0)
 S SDWLSPS=$J("",80)
"RTN","SDWLIFT7",19,0)
 D DIALOG("EN2^"_$T(+0),"SDWL TRANSFER PRINT REQUESTS")
"RTN","SDWLIFT7",20,0)
 Q
"RTN","SDWLIFT7",21,0)
HEAD ; Write header.
"RTN","SDWLIFT7",22,0)
 S SDWLLINE=3,SDWLPAGE=SDWLPAGE+1
"RTN","SDWLIFT7",23,0)
 W !?80-$L(SDWLTTL)\2,SDWLTTL,?75-$L(SDWLPAGE),"PAGE ",SDWLPAGE,!
"RTN","SDWLIFT7",24,0)
 Q
"RTN","SDWLIFT7",25,0)
EN1 ; Print coversheet.
"RTN","SDWLIFT7",26,0)
 N SDWLTTL,SDWLINFO,SDWLPAGE,SDWLLINE,SDWLI
"RTN","SDWLIFT7",27,0)
 D GETINFO^SDWLIFT6(.SDWLINFO)
"RTN","SDWLIFT7",28,0)
 S SDWLTTL="SDWL TRANSFER - COVERSHEET",SDWLPAGE=0
"RTN","SDWLIFT7",29,0)
 D HEAD
"RTN","SDWLIFT7",30,0)
 F SDWLI=1:1:SDWLINFO(0) D
"RTN","SDWLIFT7",31,0)
 .S SDWLLINE=SDWLLINE+1
"RTN","SDWLIFT7",32,0)
 .I SDWLLINE+3>IOSL D HEAD
"RTN","SDWLIFT7",33,0)
 .W !,SDWLINFO(SDWLI,0)
"RTN","SDWLIFT7",34,0)
 .Q
"RTN","SDWLIFT7",35,0)
 Q
"RTN","SDWLIFT7",36,0)
EN2 ; Print requests
"RTN","SDWLIFT7",37,0)
 N SDWLINFO,SDWLTTL,SDWLPAGE,SDWLLINE,SDWLI
"RTN","SDWLIFT7",38,0)
 D GETDATA^SDWLIFT5(.SDWLINFO,1)
"RTN","SDWLIFT7",39,0)
 S SDWLTTL="SDWL TRANSFER - TRANSFER REQUESTS",SDWLPAGE=0
"RTN","SDWLIFT7",40,0)
 D HEAD
"RTN","SDWLIFT7",41,0)
 F SDWLI=1:1:SDWLINFO(0) D
"RTN","SDWLIFT7",42,0)
 .I SDWLLINE+8>IOSL D HEAD
"RTN","SDWLIFT7",43,0)
 .W !,"Name: ",$E($P(SDWLINFO(SDWLI,0),U)_SDWLSPS,1,32)
"RTN","SDWLIFT7",44,0)
 .W "Sex: ",$P(SDWLINFO(SDWLI,0),U,8)
"RTN","SDWLIFT7",45,0)
 .W "  SSN: ",$E($P(SDWLINFO(SDWLI,0),U,2)_SDWLSPS,1,14)
"RTN","SDWLIFT7",46,0)
 .W !,"Wait List Type: ",$P(SDWLINFO(SDWLI,0),U,6)
"RTN","SDWLIFT7",47,0)
 .W " : ",$P(SDWLINFO(SDWLI,0),U,7)
"RTN","SDWLIFT7",48,0)
 .W !,"Status: ",$E($P(SDWLINFO(SDWLI,0),U,4)_SDWLSPS,1,14)
"RTN","SDWLIFT7",49,0)
 .W "Transmission time: ",$P(SDWLINFO(SDWLI,0),U,9)
"RTN","SDWLIFT7",50,0)
 .W !,"Requestor: ",$P(SDWLINFO(SDWLI,0),U,10),!
"RTN","SDWLIFT7",51,0)
 .S SDWLLINE=SDWLLINE+5
"RTN","SDWLIFT7",52,0)
 .Q
"RTN","SDWLIFT7",53,0)
 Q
"RTN","SDWLIFT7",54,0)
DIALOG(ZTRTN,SDWLDESC) ; Required variable - SDWLIFTN: SDWL Transfer id.
"RTN","SDWLIFT7",55,0)
 N DIE,DA,DR
"RTN","SDWLIFT7",56,0)
 K %ZIS,IOP,POP,ZTSK,SDWLIO
"RTN","SDWLIFT7",57,0)
 S ZTDESC=SDWLDESC
"RTN","SDWLIFT7",58,0)
 D FULL^VALM1
"RTN","SDWLIFT7",59,0)
 S SDWLIO=ION,%ZIS="Q"
"RTN","SDWLIFT7",60,0)
 D ^%ZIS
"RTN","SDWLIFT7",61,0)
 K %ZIS
"RTN","SDWLIFT7",62,0)
 S IOM=80
"RTN","SDWLIFT7",63,0)
 I POP D  ; Do-dots preserve $T
"RTN","SDWLIFT7",64,0)
 .S IOP=SDWLIO
"RTN","SDWLIFT7",65,0)
 .D ^%ZIS
"RTN","SDWLIFT7",66,0)
 .K IOP,SDWLIO
"RTN","SDWLIFT7",67,0)
 .W !,"Please try later!"
"RTN","SDWLIFT7",68,0)
 .Q
"RTN","SDWLIFT7",69,0)
 E  D  I $G(SDWLDESC)="SDWL TRANSFER COVERSHEET" S DIE="^SDWL(409.36,",DA=SDWLIFTN,DR=".3///Y" D ^DIE
"RTN","SDWLIFT7",70,0)
 .K SDDIO
"RTN","SDWLIFT7",71,0)
 .I '$D(IO("Q")) D @ZTRTN Q
"RTN","SDWLIFT7",72,0)
 .K IO("Q"),ZTIO,ZTSAVE,ZTDTH,ZTSK
"RTN","SDWLIFT7",73,0)
 .S ZTDTH=$H S:$D(SDWLIFTN) ZTSAVE("SDWLIFTN")=SDWLIFTN,ZTSAVE("SDWLSPS")=SDWLSPS
"RTN","SDWLIFT7",74,0)
 .D ^%ZTLOAD W:$D(ZTSK) !,"Report is queued to print !!" K ZTSK
"RTN","SDWLIFT7",75,0)
 .Q
"RTN","SDWLIFT7",76,0)
END ; Tidy up.
"RTN","SDWLIFT7",77,0)
 W ! D ^%ZISC
"RTN","SDWLIFT7",78,0)
 Q
"RTN","SDWLROI")
0^12^B34011534
"RTN","SDWLROI",1,0)
SDWLROI ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT - ENROLLEE ; 01 Oct 2002  4:42 PM
"RTN","SDWLROI",2,0)
 ;;5.3;scheduling;**263,412,415**;AUG 13 1993
"RTN","SDWLROI",3,0)
 ;
"RTN","SDWLROI",4,0)
 ; Removed Sort logic as routine exceeded SACC maximum size of 10000
"RTN","SDWLROI",5,0)
 ; New routine SDWLROIS was created to perform the Sort functionality
"RTN","SDWLROI",6,0)
 ;
"RTN","SDWLROI",7,0)
 ;
"RTN","SDWLROI",8,0)
EN ;
"RTN","SDWLROI",9,0)
 N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSK
"RTN","SDWLROI",10,0)
 D INIT G END:$D(DUOUT)
"RTN","SDWLROI",11,0)
 D SORT^SDWLROIS(SDWLBD,SDWLED,SDWLINS,.SDWL)  ; SD*5.3*412 new routine to perform sort
"RTN","SDWLROI",12,0)
 I $$S^ZTLOAD G END
"RTN","SDWLROI",13,0)
 D PRT
"RTN","SDWLROI",14,0)
 G END
"RTN","SDWLROI",15,0)
INIT ;
"RTN","SDWLROI",16,0)
 I $D(CT) S SDWLCT=CT
"RTN","SDWLROI",17,0)
 I $D(DATE) S SDWLDATE=DATE
"RTN","SDWLROI",18,0)
 I $D(INS) S SDWLINS=INS
"RTN","SDWLROI",19,0)
 I $D(ZTSAVE) D
"RTN","SDWLROI",20,0)
 .S SDWLCT=$G(ZTSAVE("CT")),SDWLDATE=$G(ZTSAVE("DATE")),SDWLINS=$G(ZTSAVE("INS"))
"RTN","SDWLROI",21,0)
 I SDWLINS'="ALL" F I=1:1 S SDWL=$P(SDWLINS,";",I) Q:SDWL=""  S SDWL("INS",+SDWL)=""
"RTN","SDWLROI",22,0)
 S SDWLBD=$P(SDWLDATE,U,1),SDWLED=$P(SDWLDATE,U,2),SDWLPG=0
"RTN","SDWLROI",23,0)
 D NOW^%DTC S Y=% D DD^%DT S SDWLDTP=$P(Y,":",1,2)
"RTN","SDWLROI",24,0)
 K ZTSAVE
"RTN","SDWLROI",25,0)
 N POP S POP=0  ;SD*5.3*412
"RTN","SDWLROI",26,0)
 Q
"RTN","SDWLROI",27,0)
 ;
"RTN","SDWLROI",28,0)
PRT ;PRINT REPORT  SD*5.3*412 Q:POP added where needed to allow early exit
"RTN","SDWLROI",29,0)
 G END:$$S^ZTLOAD
"RTN","SDWLROI",30,0)
 S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12)=0  ;SD*5.3*415
"RTN","SDWLROI",31,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,TT12,SDWLPG)=0 D HD,HD1  ;SD*5.3*415
"RTN","SDWLROI",32,0)
 I '$D(^TMP("SDWLROI1",$J)) W !!,"No Wait List Data to Report" Q
"RTN","SDWLROI",33,0)
 S SDWLINS="" F  S SDWLINS=$O(^TMP("SDWLROI1",$J,SDWLINS)) Q:SDWLINS=""  D  Q:POP  D T2 Q:POP  W !,"________________"  I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLROI",34,0)
 .W !!,"INSTITUTION: ",SDWLINS
"RTN","SDWLROI",35,0)
 .S W1="" F  S W1=$O(^TMP("SDWLROI1",$J,SDWLINS,W1)) Q:W1=""  D  Q:POP  D T1 Q:POP  I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",36,0)
 ..W !,"ENROLLMENT PRIORITY: ",$S(W1="P":"PRIOR",W1="N":"NEW",W1="E":"ESTABLISHED",1:"UNDETERMINED")
"RTN","SDWLROI",37,0)
 ..S SDWLTY="" F  S SDWLTY=$O(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY)) Q:SDWLTY=""  D  Q:POP
"RTN","SDWLROI",38,0)
 ...S SDWLTNM=$$EXTERNAL^DILFD(409.3,4,,SDWLTY) W !,$E(SDWLTNM,1,15) I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",39,0)
 ...S SDWLSCN="" F  S SDWLSCN=$O(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN)) Q:SDWLSCN=""  D  Q:POP
"RTN","SDWLROI",40,0)
 ....S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLROI",41,0)
 ....S SDWLSCNM="" F  S SDWLSCNM=$O(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM)) Q:SDWLSCNM=""  D  Q:POP
"RTN","SDWLROI",42,0)
 .....S SDWLPRI="" F  S SDWLPRI=$O(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI)) Q:SDWLPRI=""  D  Q:POP
"RTN","SDWLROI",43,0)
 ......W !,?2,$E(SDWLSCNM,1,10)," ",$S(SDWLPRI="A":"ASAP",SDWLPRI="F":"FUTURE",1:"")
"RTN","SDWLROI",44,0)
 ......S SDWLPR=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"PR")) W ?20,SDWLPR
"RTN","SDWLROI",45,0)
 ......S SDWLCL=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"CL")) W ?25,SDWLCL  ;SD*5.3*415
"RTN","SDWLROI",46,0)
 ......S SDWLD=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLD")) W ?30,SDWLD  ;SD*5.3*415
"RTN","SDWLROI",47,0)
 ......S SDWLNC=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNC")) W ?35,SDWLNC  ;SD*5.3*415
"RTN","SDWLROI",48,0)
 ......S SDWLSA=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLSA")) W ?40,SDWLSA  ;SD*5.3*415
"RTN","SDWLROI",49,0)
 ......S SDWLCC=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLCC")) W ?45,SDWLCC  ;SD*5.3*415
"RTN","SDWLROI",50,0)
 ......S SDWLNN=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNN")) W ?50,SDWLNN  ;SD*5.3*415
"RTN","SDWLROI",51,0)
 ......S SDWLER=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLER")) W ?55,SDWLER  ;SD*5.3*415
"RTN","SDWLROI",52,0)
 ......S SDWLTR=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLTR")) W ?60,SDWLTR  ;SD*5.3*415
"RTN","SDWLROI",53,0)
 ......S SDWLAD=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"AD")) W ?65,SDWLAD  ;SD*5.3*415
"RTN","SDWLROI",54,0)
 ......S SDWLRR=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"RR")) W ?70,SDWLRR  ;SD*5.3*415
"RTN","SDWLROI",55,0)
 ......S SDWLNR=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"NR")) W ?75,SDWLNR
"RTN","SDWLROI",56,0)
 ......S T1=T1+SDWLPR,TT1=TT1+SDWLPR
"RTN","SDWLROI",57,0)
 ......S T2=T2+SDWLCL,TT2=TT2+SDWLCL
"RTN","SDWLROI",58,0)
 ......S T3=T3+SDWLD,TT3=TT3+SDWLD
"RTN","SDWLROI",59,0)
 ......S T4=T4+SDWLNC,TT4=TT4+SDWLNC
"RTN","SDWLROI",60,0)
 ......S T5=T5+SDWLSA,TT4=TT4+SDWLSA
"RTN","SDWLROI",61,0)
 ......S T6=T6+SDWLCC,TT6=TT6+SDWLCC
"RTN","SDWLROI",62,0)
 ......S T7=T7+SDWLNN,TT7=TT7+SDWLNN
"RTN","SDWLROI",63,0)
 ......S T8=T8+SDWLER,TT8=TT8+SDWLER
"RTN","SDWLROI",64,0)
 ......S T9=T9+SDWLTR,TT9=TT9+SDWLTR  ;SD*5.3*415
"RTN","SDWLROI",65,0)
 ......S T10=T10+SDWLAD,TT10=TT10+SDWLAD  ;SD*5.3*415
"RTN","SDWLROI",66,0)
 ......S T11=T11+SDWLRR,TT11=TT11+SDWLRR  ;SD*5.3*415
"RTN","SDWLROI",67,0)
 ......S T12=T12+SDWLNR,TT12=TT12+SDWLNR  ;SD*5.3*415
"RTN","SDWLROI",68,0)
 ......I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",69,0)
 Q
"RTN","SDWLROI",70,0)
T1 ;
"RTN","SDWLROI",71,0)
 W !?20,"---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----"  ;SD*5.3*415
"RTN","SDWLROI",72,0)
 W !,"Sub-Totals:"
"RTN","SDWLROI",73,0)
 ;write sub-totals
"RTN","SDWLROI",74,0)
 W ?20,T1,?25,T2,?30,T3,?35,T4,?40,T5,?45,T6,?50,T7,?55,T8,?60,T9,?65,T10,?70,T11,?75,T12,!  ;SD*5.3*415
"RTN","SDWLROI",75,0)
 S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12)=0  ;SD*5.3*415
"RTN","SDWLROI",76,0)
 I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",77,0)
 Q
"RTN","SDWLROI",78,0)
T2 W !,"Institution Totals:"
"RTN","SDWLROI",79,0)
 W ?20,TT1,?25,TT2,?30,TT3,?35,TT4,?40,TT5,?45,TT6,?50,TT7,?55,TT8,?60,TT9,?65,TT10,?70,TT11,?75,TT11,!  ;SD*5.3*415
"RTN","SDWLROI",80,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,TT12)=0  ;SD*5.3*415
"RTN","SDWLROI",81,0)
 I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",82,0)
 Q
"RTN","SDWLROI",83,0)
HD W:$D(IOF) @IOF S SDWLPG=SDWLPG+1 W !!,SDWLDTP,?80-$L("Wait List (Sch/PCMM) Enroll Status Report")\2,"Wait List (Sch/PCMM) Enroll Status Report",?65,"Page: ",SDWLPG
"RTN","SDWLROI",84,0)
 W !,?80-$L("STARTED Date: ")\2,"STARTED Date: " S Y=$P(SDWLDATE,U,1) D DD^%DT W Y
"RTN","SDWLROI",85,0)
 W !,?80-$L("FINISHED Date: ")\2,"FINISHED Date: " S Y=$P(SDWLDATE,U,2) D DD^%DT W Y
"RTN","SDWLROI",86,0)
 Q
"RTN","SDWLROI",87,0)
HD1 ;
"RTN","SDWLROI",88,0)
 W !,?20,"PREV",?65,"#",?70,"#",?75,"# NOT"  ;SD*5.3*415
"RTN","SDWLROI",89,0)
 W !,"WAIT LIST TYPE",?20,"REMN",?25,"CLSD",?30,"DTH",?35,"NC",?40,"SA",?45,"CC",?50,"NN",?55,"ER",?60,"TR",?65,"ADD",?70,"REMN",?75,"REMVD",!  ;SD*5.3*415
"RTN","SDWLROI",90,0)
 Q
"RTN","SDWLROI",91,0)
SCR S DIR(0)="E" D ^DIR S:X="^" POP=1
"RTN","SDWLROI",92,0)
 Q
"RTN","SDWLROI",93,0)
END D EN^SDWLKIL
"RTN","SDWLROI",94,0)
 K ^TMP("SDWLROI1",$J),^TMP("SDWLROI2",$J),CT,DATE,I,INS
"RTN","SDWLROI",95,0)
 K T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,X1,X2,X3,X0,Y1,W1,X4,X1,X2  ;SD*5.3*415
"RTN","SDWLROI",96,0)
 K TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,TT12,SDWLXEN,SDWLRDT,SDWLIOSR  ;SD*5.3*415
"RTN","SDWLROI",97,0)
 Q
"RTN","SDWLROIS")
0^15^B30608896
"RTN","SDWLROIS",1,0)
SDWLROIS ;;IOFO BAY PINES/RLC/WAIT LIST STAT REPORT - ENROLLEE - SORT ; 011 Jan 2005  9:15 AM
"RTN","SDWLROIS",2,0)
 ;;5.3;scheduling;**412,415**;AUG 13 1993
"RTN","SDWLROIS",3,0)
 ;
"RTN","SDWLROIS",4,0)
 ; Original routine SDWLROI was exceeding SACC maximum size of 10000.
"RTN","SDWLROIS",5,0)
 ; This new routine added to do the Sort portion of the report.
"RTN","SDWLROIS",6,0)
 ;
"RTN","SDWLROIS",7,0)
 ;
"RTN","SDWLROIS",8,0)
SORT(SDWLBD,SDWLED,SDWLINS,SDWL) ;SORT AND CALCULATE STAT REPORT ;SD*5.3*415
"RTN","SDWLROIS",9,0)
 K ^TMP("SDWLROI1",$J),^TMP("SDWLROI2",$J) S (SDWLERR,SDWLPR,SDWLC,SDWLD,SDWLNC,SDWLSA,SDWLCC,SDWLNN,SDWLER,SDWLTR,SDWLAD,SDWLRE,SDWLNR)=0  ;SD*5.3*415
"RTN","SDWLROIS",10,0)
 S SDWLDA=0 F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA=""  D
"RTN","SDWLROIS",11,0)
 .S SDWLX=$G(^SDWL(409.3,SDWLDA,0)) Q:SDWLX=""  S SDWLINSN=+$P(SDWLX,U,3) I 'SDWLINSN Q
"RTN","SDWLROIS",12,0)
 .S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="U"
"RTN","SDWLROIS",13,0)
 .S SDWLDFN=+SDWLX I 'SDWLDFN Q
"RTN","SDWLROIS",14,0)
 .S SDWLTYP=$P(SDWLX,U,5) D:'SDWLTYP S1A S SDWLTYPN=$S(SDWLTYP=1:$P(SDWLX,U,6),SDWLTYP=2:$P(SDWLX,U,7),SDWLTYP=3:$P(SDWLX,U,8),SDWLTYP=4:$P(SDWLX,U,9),1:"")
"RTN","SDWLROIS",15,0)
 .I SDWLTYPN="" Q
"RTN","SDWLROIS",16,0)
 .S SDWLFLD=$S(SDWLTYP=1:5,SDWLTYP=2:6,SDWLTYP=3:7,SDWLTYP=4:8)
"RTN","SDWLROIS",17,0)
 .S SDWLTYNM=$$EXTERNAL^DILFD(409.3,SDWLFLD,,SDWLTYPN) I SDWLTYNM="" S SDWLTYNM="UNKNOWN"
"RTN","SDWLROIS",18,0)
 .I 'SDWLINSN Q
"RTN","SDWLROIS",19,0)
 .I $D(SDWL("INS")) D
"RTN","SDWLROIS",20,0)
 ..;CHECK FOR SPECIFIC INSTITUTIONAL SORT
"RTN","SDWLROIS",21,0)
 ..S SDWLINS=$P(SDWLX,U,3),SDWLERR=0 I SDWLINS'="ALL",'$D(SDWL("INS",SDWLINS)) S SDWLERR=1 Q
"RTN","SDWLROIS",22,0)
 ..S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="N"
"RTN","SDWLROIS",23,0)
 .I SDWLERR Q
"RTN","SDWLROIS",24,0)
 .;CHECK DATE RANGE
"RTN","SDWLROIS",25,0)
 .S SDWLOFDT=$P(SDWLX,U,2),SDWLOK1=1 I SDWLOFDT>SDWLBD!(SDWLOFDT=SDWLBD) D
"RTN","SDWLROIS",26,0)
 ..I SDWLOFDT<SDWLED!(SDWLOFDT=SDWLED) S SDWLOK1=0
"RTN","SDWLROIS",27,0)
 .S X1=$P(^DIC(4,+$P(SDWLX,U,3),0),U,1),Y1=SDWLTYP
"RTN","SDWLROIS",28,0)
 .S SDWLXEN=$P(SDWLX,U,20) I SDWLXEN="" S SDWLXEN="U"
"RTN","SDWLROIS",29,0)
 .S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")) ^("AD")=0
"RTN","SDWLROIS",30,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")) ^("AD")=0
"RTN","SDWLROIS",31,0)
 .I 'SDWLOK1 D S1
"RTN","SDWLROIS",32,0)
 .S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLROIS",33,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLROIS",34,0)
 .S SDWLDFDT=0,SDWLOK3=1 I $D(^SDWL(409.3,SDWLDA,"DIS")) S SDWLDFDT=$P(^("DIS"),U,1),SDWLOK3=0 I SDWLDFDT<SDWLBD!(SDWLDFDT>SDWLED) S SDWLOK3=1
"RTN","SDWLROIS",35,0)
 .S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")) ^("CL")=0
"RTN","SDWLROIS",36,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")) ^("CL")=0
"RTN","SDWLROIS",37,0)
 .I 'SDWLOK3 D S3
"RTN","SDWLROIS",38,0)
 .S SDWLTYP=$P(SDWLX,U,5)
"RTN","SDWLROIS",39,0)
 .S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")) ^("PR")=0
"RTN","SDWLROIS",40,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")) ^("PR")=0
"RTN","SDWLROIS",41,0)
 .S SDWLFLG=0
"RTN","SDWLROIS",42,0)
 .I SDWLOFDT'>SDWLBD D
"RTN","SDWLROIS",43,0)
 ..I SDWLOFDT=SDWLBD Q
"RTN","SDWLROIS",44,0)
 ..I $P(SDWLX,U,17)["O" S SDWLFLG=1
"RTN","SDWLROIS",45,0)
 ..I $D(^SDWL(409.3,SDWLDA,"DIS")) D
"RTN","SDWLROIS",46,0)
 ...I 'SDWLFLG,($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)>SDWLBD)!($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)=SDWLBD) S SDWLFLG=1
"RTN","SDWLROIS",47,0)
 ..I SDWLFLG D
"RTN","SDWLROIS",48,0)
 ...S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")+1
"RTN","SDWLROIS",49,0)
 ...S ^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")=^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")+1
"RTN","SDWLROIS",50,0)
 .I $P(SDWLX,U,14) D
"RTN","SDWLROIS",51,0)
 ..S SDWLRDT=$P(SDWLX,U,14)
"RTN","SDWLROIS",52,0)
 ..I SDWLRDT>SDWLBD!(SDWLRDT=SDWLBD)!(SDWLRDT<SDWLED)!(SDWLRDT=SDWLED) D
"RTN","SDWLROIS",53,0)
 ...S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLROIS",54,0)
 ...S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")=^("NR")+1
"RTN","SDWLROIS",55,0)
 ...S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLROIS",56,0)
 ...S ^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLROIS",57,0)
 .D S2
"RTN","SDWLROIS",58,0)
 Q
"RTN","SDWLROIS",59,0)
S1A ; SET WAIL LIST TYPE IF NOT IN FILE - SD*5.3*412
"RTN","SDWLROIS",60,0)
 S N=0
"RTN","SDWLROIS",61,0)
 F I=6:1:9 S N=N+1 I $P(SDWLX,U,I) S SDWLTYP=N D SET Q
"RTN","SDWLROIS",62,0)
 Q
"RTN","SDWLROIS",63,0)
 ;
"RTN","SDWLROIS",64,0)
SET ;SD*5.3*412
"RTN","SDWLROIS",65,0)
 S DA=SDWLDA
"RTN","SDWLROIS",66,0)
 S DIE="^SDWL(409.3,",DR="4////^S X=SDWLTYP" D ^DIE
"RTN","SDWLROIS",67,0)
 K DA,DIE,DR,I,N
"RTN","SDWLROIS",68,0)
 Q
"RTN","SDWLROIS",69,0)
 ;
"RTN","SDWLROIS",70,0)
S1 ;ORIGINATING DATE MEETS CRITERIA
"RTN","SDWLROIS",71,0)
 ;
"RTN","SDWLROIS",72,0)
 S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")+1
"RTN","SDWLROIS",73,0)
 S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")=^("AD")+1
"RTN","SDWLROIS",74,0)
 Q
"RTN","SDWLROIS",75,0)
S2 ;DO NOT REMOVE DATE MEETS CRITERIA
"RTN","SDWLROIS",76,0)
 ;
"RTN","SDWLROIS",77,0)
 S X0=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR"),X2=$G(^("AD")),X3=$G(^("CL")) S X4=X0+X2-X3
"RTN","SDWLROIS",78,0)
 S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"RR")=($G(^("PR"))+($G(^("AD"))))-$G(^("CL"))
"RTN","SDWLROIS",79,0)
 S ^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLROIS",80,0)
 Q
"RTN","SDWLROIS",81,0)
S3 S SDWLDIS=^SDWL(409.3,SDWLDA,"DIS")  D
"RTN","SDWLROIS",82,0)
 .S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")+1
"RTN","SDWLROIS",83,0)
 .S ^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")=^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")+1
"RTN","SDWLROIS",84,0)
 .S SDWLDP=$P(SDWLDIS,U,3),X="SDWL"_SDWLDP,@X=@X+1 S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)) ^(X)=0
"RTN","SDWLROIS",85,0)
 .S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)+1
"RTN","SDWLROIS",86,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)) ^(X)=0
"RTN","SDWLROIS",87,0)
 .S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)=^(X)+1
"RTN","SDWLROIS",88,0)
 Q
"RTN","SDWLRSR")
0^13^B34050609
"RTN","SDWLRSR",1,0)
SDWLRSR ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT ; 01 Oct 2002  4:42 PM
"RTN","SDWLRSR",2,0)
 ;;5.3;scheduling;**263,273,399,412,425,415**;AUG 13 1993
"RTN","SDWLRSR",3,0)
 ;
"RTN","SDWLRSR",4,0)
 ; Removed Sort logic as routine exceeded SACC maximum size of 10000
"RTN","SDWLRSR",5,0)
 ; New routine SDWLRSRS was created to perform the Sort functionality
"RTN","SDWLRSR",6,0)
 ;
"RTN","SDWLRSR",7,0)
 ;
"RTN","SDWLRSR",8,0)
EN ;
"RTN","SDWLRSR",9,0)
 D INIT G END:$D(DUOUT)  ;SD*5.3*415
"RTN","SDWLRSR",10,0)
 D SORT^SDWLRSRS(SDWLBD,SDWLED,SDWLINS,.SDWL)  ; SD*5.3*415 new routine to perform sort
"RTN","SDWLRSR",11,0)
 D:'$$S^%ZTLOAD PRT  ;SD*5.3*415
"RTN","SDWLRSR",12,0)
 G END
"RTN","SDWLRSR",13,0)
INIT ;
"RTN","SDWLRSR",14,0)
 I $D(CT) S SDWLCT2=CT
"RTN","SDWLRSR",15,0)
 I $D(DATE) S SDWLDATE=DATE
"RTN","SDWLRSR",16,0)
 I $D(INS) S SDWLINS=INS
"RTN","SDWLRSR",17,0)
 I $D(ZTSAVE) D
"RTN","SDWLRSR",18,0)
 .S SDWLCT=$G(ZTSAVE("CT")),SDWLDATE=$G(ZTSAVE("DATE")),SDWLINS=$G(ZTSAVE("INS"))
"RTN","SDWLRSR",19,0)
 I SDWLINS'="ALL" F I=1:1 S SDWL=$P(SDWLINS,";",I) Q:SDWL=""  S SDWL("INS",+SDWL)=""
"RTN","SDWLRSR",20,0)
 S SDWLBD=$P(SDWLDATE,U,1),SDWLED=$P(SDWLDATE,U,2),SDWLPG=0
"RTN","SDWLRSR",21,0)
 D NOW^%DTC S Y=% D DD^%DT S SDWLDTP=Y
"RTN","SDWLRSR",22,0)
 N POP S POP=0  ;SD*5.3*412
"RTN","SDWLRSR",23,0)
 Q
"RTN","SDWLRSR",24,0)
PRT ;PRINT REPORT
"RTN","SDWLRSR",25,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,TT12,SDWLPG)=0 D HD,HD1  ;SD*5.3*415
"RTN","SDWLRSR",26,0)
 I '$D(^TMP("SDWLRSR1")) W !!,"No Wait List Data to Report" Q
"RTN","SDWLRSR",27,0)
 S SDWLINS="" F  S SDWLINS=$O(^TMP("SDWLRSR1",$J,SDWLINS)) Q:SDWLINS=""  D  Q:POP  D T2  Q:POP  W !,"________________" I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRSR",28,0)
 .I $$S^%ZTLOAD S DUOUT="" Q 
"RTN","SDWLRSR",29,0)
 .W !!,"INSTITUTION: ",SDWLINS,!
"RTN","SDWLRSR",30,0)
 .S SDWLTY="" F  S SDWLTY=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY)) Q:SDWLTY=""  D  Q:POP  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRSR",31,0)
 ..S SDWLTNM=$$EXTERNAL^DILFD(409.3,4,,SDWLTY) W !,$E(SDWLTNM,1,15)
"RTN","SDWLRSR",32,0)
 ..S SDWLSCN="" F  S SDWLSCN=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN)) Q:SDWLSCN=""  D  Q:POP  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRSR",33,0)
 ...S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12)=0  ;SD*5.3*415
"RTN","SDWLRSR",34,0)
 ...S SDWLSCNM="" F  S SDWLSCNM=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM)) Q:SDWLSCNM=""  D  Q:POP  D T1  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRSR",35,0)
 ....S SDWLPRI="" F  S SDWLPRI=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI)) Q:SDWLPRI=""  D  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRSR",36,0)
 .....W !,?2,$E(SDWLSCNM,1,10)," ",$S(SDWLPRI="A":"ASAP",SDWLPRI="F":"FUTURE",1:"")
"RTN","SDWLRSR",37,0)
 .....S SDWLPR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"PR")) W ?20,SDWLPR
"RTN","SDWLRSR",38,0)
 .....S SDWLCL=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"CL")) W ?25,SDWLCL
"RTN","SDWLRSR",39,0)
 .....S SDWLD=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLD")) W ?30,SDWLD  ;SD*5.3*415
"RTN","SDWLRSR",40,0)
 .....S SDWLNC=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNC")) W ?35,SDWLNC  ;SD*5.3*415
"RTN","SDWLRSR",41,0)
 .....S SDWLSA=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLSA")) W ?40,SDWLSA  ;SD*5.3*415
"RTN","SDWLRSR",42,0)
 .....S SDWLCC=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLCC")) W ?45,SDWLCC  ;SD*5.3*415
"RTN","SDWLRSR",43,0)
 .....S SDWLNN=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNN")) W ?50,SDWLNN  ;SD*5.3*415
"RTN","SDWLRSR",44,0)
 .....S SDWLER=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLER")) W ?55,SDWLER  ;SD*5.3*415
"RTN","SDWLRSR",45,0)
 .....S SDWLTR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLTR")) W ?60,SDWLTR  ;SD*5.3*415
"RTN","SDWLRSR",46,0)
 .....S SDWLAD=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"AD")) W ?65,SDWLAD  ;SD*5.3*415
"RTN","SDWLRSR",47,0)
 .....S SDWLRR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"RR")) W ?70,SDWLRR  ;SD*5.3*415
"RTN","SDWLRSR",48,0)
 .....S SDWLNR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"NR")) W ?75,SDWLNR
"RTN","SDWLRSR",49,0)
 .....S T1=T1+SDWLPR,TT1=TT1+SDWLPR
"RTN","SDWLRSR",50,0)
 .....S T2=T2+SDWLCL,TT2=TT2+SDWLCL
"RTN","SDWLRSR",51,0)
 .....S T3=T3+SDWLD,TT3=TT3+SDWLD
"RTN","SDWLRSR",52,0)
 .....S T4=T4+SDWLNC,TT4=TT4+SDWLNC
"RTN","SDWLRSR",53,0)
 .....S T5=T5+SDWLSA,TT5=TT5+SDWLSA
"RTN","SDWLRSR",54,0)
 .....S T6=T6+SDWLCC,TT6=TT6+SDWLCC
"RTN","SDWLRSR",55,0)
 .....S T7=T7+SDWLNN,TT7=TT7+SDWLNN
"RTN","SDWLRSR",56,0)
 .....S T8=T8+SDWLER,TT8=TT8+SDWLER
"RTN","SDWLRSR",57,0)
 .....S T9=T9+SDWLTR,TT9=TT9+SDWLTR  ;SD*5.3*415
"RTN","SDWLRSR",58,0)
 .....S T10=T10+SDWLAD,TT10=TT10+SDWLAD  ;SD*5.3*415
"RTN","SDWLRSR",59,0)
 .....S T11=T11+SDWLRR,TT11=TT11+SDWLRR  ;SD*5.3*415
"RTN","SDWLRSR",60,0)
 .....S T12=T12+SDWLNR,TT12=TT12+SDWLNR  ;SD*5.3*415
"RTN","SDWLRSR",61,0)
 .....I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412
"RTN","SDWLRSR",62,0)
 Q
"RTN","SDWLRSR",63,0)
SCR S DIR(0)="E" D ^DIR S:X="^" POP=1  ;SD*5.3*412
"RTN","SDWLRSR",64,0)
 Q
"RTN","SDWLRSR",65,0)
T1 ;
"RTN","SDWLRSR",66,0)
 W !?20,"---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----"  ;SD*5.3*415
"RTN","SDWLRSR",67,0)
 W !,"Sub-Totals:"
"RTN","SDWLRSR",68,0)
 ;write sub-totals
"RTN","SDWLRSR",69,0)
 W ?20,T1,?25,T2,?30,T3,?35,T4,?40,T5,?45,T6,?50,T7,?55,T8,?60,T9,?65,T10,?70,T11,?75,T12,!  ;SD*5.3*415
"RTN","SDWLRSR",70,0)
 S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12)=0  ;SD*5.3*415
"RTN","SDWLRSR",71,0)
 I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412
"RTN","SDWLRSR",72,0)
 Q
"RTN","SDWLRSR",73,0)
T2 W !,"Institution Totals:"
"RTN","SDWLRSR",74,0)
 W ?20,TT1,?25,TT2,?30,TT3,?35,TT4,?40,TT5,?45,TT6,?50,TT7,?55,TT8,?60,TT9,?65,TT10,?70,TT11,?75,TT12,!  ;SD*5.3*415
"RTN","SDWLRSR",75,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,TT12)=0  ;SD*5.3*415
"RTN","SDWLRSR",76,0)
 I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412
"RTN","SDWLRSR",77,0)
 Q
"RTN","SDWLRSR",78,0)
HD W:$D(IOF) @IOF S SDWLPG=SDWLPG+1 W !!,SDWLDTP,?80-$L("Wait List (Sch/PCMM) Stat Report")\2,"Wait List (Sch/PCMM) Stat Report",?65,"Page: ",SDWLPG
"RTN","SDWLRSR",79,0)
 W !,?80-$L("STARTED Date: ")\2,"STARTED Date: " S Y=$P(SDWLDATE,U,1) D DD^%DT W Y
"RTN","SDWLRSR",80,0)
 W !,?80-$L("FINISHED Date: ")\2,"FINISHED Date: " S Y=$P(SDWLDATE,U,2) D DD^%DT W Y
"RTN","SDWLRSR",81,0)
 Q
"RTN","SDWLRSR",82,0)
HD1 ;
"RTN","SDWLRSR",83,0)
 W !,?20,"PREV",?65,"#",?70,"#",?75,"# NOT"
"RTN","SDWLRSR",84,0)
 W !,"WAIT LIST TYPE",?20,"REMN",?25,"CLSD",?30,"DTH",?35,"NC",?40,"SA",?45,"CC",?50,"NN",?55,"ER",?60,"TR",?65,"ADD",?70,"REMN",?75,"REMVD",!  ;SD*5.3*415
"RTN","SDWLRSR",85,0)
 Q
"RTN","SDWLRSR",86,0)
END D EN^SDWLKIL
"RTN","SDWLRSR",87,0)
 K ^TMP("SDWLRSR1",$J),^TMP("SDWLRSR2",$J),SDWLY1,SDWLX1,SDWLRDT,CT,I
"RTN","SDWLRSR",88,0)
 K T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,SDWLAD,SDWLBD,SDWLCC,SDWLCT,SDWLDFDT,SDWLDP,SDWLED,SDWLER,SDWLERR,SDWLFLD,X1,X2,DATE  ;SD*5.3*415
"RTN","SDWLRSR",89,0)
 K TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,TT12,SDWLINSN,SDWLINST,SDWLNC,SDWLNN,SDWLNR,SDWLOFDT,SDWLOK1,SDWLOK2,SDWLTYPN  ;SD*5.3*415
"RTN","SDWLRSR",90,0)
 K SDWLOK3,SDWLPR,SDWLPR,SDWLPROM,SDWLRE,SDWLRFDT,SDWLRR,SDWLSA,SDWLSCN,SDWLSCNM,SDWLTASK,SDWLTK,SDWLTNM,SDWLTYNM,SDWLTYP,X4,SDWLTR  ;SD*5.3*415
"RTN","SDWLRSR",91,0)
 Q
"RTN","SDWLRSRS")
0^14^B31011915
"RTN","SDWLRSRS",1,0)
SDWLRSRS ;;IOFO BAY PINES/OG/WAIT LIST STAT REPORT - SORT  ; Compiled September 22, 2005 10:32:25
"RTN","SDWLRSRS",2,0)
 ;;5.3;scheduling;**415**;AUG 13 1993
"RTN","SDWLRSRS",3,0)
 ;
"RTN","SDWLRSRS",4,0)
 ; Original routine SDWLRSR exceeded SACC maximum size of 10000.
"RTN","SDWLRSRS",5,0)
 ; This new routine added to do the Sort portion of the report.
"RTN","SDWLRSRS",6,0)
 ;
"RTN","SDWLRSRS",7,0)
 ;
"RTN","SDWLRSRS",8,0)
SORT(SDWLBD,SDWLED,SDWLINS,SDWL) ;SORT AND CALCULATE STAT REPORT ;SD*5.3*415
"RTN","SDWLRSRS",9,0)
 N SDWLAD,SDWLC,SDWLCC,SDWLD,SDWLDA,SDWLDFDT,SDWLDFN,SDWLDIS,SDWLDP,SDWLER,SDWLERR,SDWLFLD,SDWLFLG,SDWLINSN,SDWLNC,SDWLNN,SDWLNR,SDWLOFDT
"RTN","SDWLRSRS",10,0)
 N SDWLOK1,SDWLOK3,SDWLPR,SDWLPRI,SDWLRDT,SDWLRE,SDWLSA,SDWLTR,SDWLTYNM,SDWLTYP,SDWLTYPN,SDWLX,SDWLX1,SDWLY1
"RTN","SDWLRSRS",11,0)
 K ^TMP("SDWLRSR1",$J),^TMP("SDWLRSR2",$J) S (SDWLERR,SDWLPR,SDWLC,SDWLD,SDWLNC,SDWLSA,SDWLCC,SDWLNN,SDWLER,SDWLTR,SDWLAD,SDWLRE,SDWLNR)=0
"RTN","SDWLRSRS",12,0)
 S SDWLDA=0 F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA=""  D
"RTN","SDWLRSRS",13,0)
 .I $D(DUOUT) Q
"RTN","SDWLRSRS",14,0)
 .S SDWLX=$G(^SDWL(409.3,SDWLDA,0)) Q:SDWLX=""  S SDWLINSN=+$P(SDWLX,U,3) I 'SDWLINSN Q
"RTN","SDWLRSRS",15,0)
 .S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="U"
"RTN","SDWLRSRS",16,0)
 .S SDWLDFN=+SDWLX I 'SDWLDFN Q
"RTN","SDWLRSRS",17,0)
 .S SDWLTYP=$P(SDWLX,U,5),SDWLTYPN=$S(SDWLTYP=1:$P(SDWLX,U,6),SDWLTYP=2:$P(SDWLX,U,7),SDWLTYP=3:$P(SDWLX,U,8),SDWLTYP=4:$P(SDWLX,U,9),1:"")
"RTN","SDWLRSRS",18,0)
 .I SDWLTYPN="" Q
"RTN","SDWLRSRS",19,0)
 .S SDWLFLD=$S(SDWLTYP=1:5,SDWLTYP=2:6,SDWLTYP=3:7,SDWLTYP=4:8)
"RTN","SDWLRSRS",20,0)
 .S SDWLTYNM=$$EXTERNAL^DILFD(409.3,SDWLFLD,,SDWLTYPN) I SDWLTYNM="" S SDWLTYNM="UNKNOWN"
"RTN","SDWLRSRS",21,0)
 .I 'SDWLINSN Q
"RTN","SDWLRSRS",22,0)
 .I $D(SDWL("INS")) D
"RTN","SDWLRSRS",23,0)
 ..;CHECK FOR SPECIFIC INSTITUTIONAL SORT
"RTN","SDWLRSRS",24,0)
 ..S SDWLINS=$P(SDWLX,U,3),SDWLERR=0 I SDWLINS'="ALL",'$D(SDWL("INS",SDWLINS)) S SDWLERR=1 Q
"RTN","SDWLRSRS",25,0)
 ..S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="N"
"RTN","SDWLRSRS",26,0)
 .I SDWLERR Q
"RTN","SDWLRSRS",27,0)
 .;CHECK DATE RANGE
"RTN","SDWLRSRS",28,0)
 .S SDWLOFDT=$P(SDWLX,U,2),SDWLOK1=1 I SDWLOFDT>SDWLBD!(SDWLOFDT=SDWLBD) D
"RTN","SDWLRSRS",29,0)
 ..I SDWLOFDT<SDWLED!(SDWLOFDT=SDWLED) S SDWLOK1=0
"RTN","SDWLRSRS",30,0)
 .S SDWLX1=$P(^DIC(4,+$P(SDWLX,U,3),0),U,1),SDWLY1=SDWLTYP
"RTN","SDWLRSRS",31,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")) ^("AD")=0
"RTN","SDWLRSRS",32,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")) ^("AD")=0
"RTN","SDWLRSRS",33,0)
 .I 'SDWLOK1 D S1
"RTN","SDWLRSRS",34,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLRSRS",35,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLRSRS",36,0)
 .S SDWLDFDT=0,SDWLOK3=1 I $D(^SDWL(409.3,SDWLDA,"DIS")) S SDWLDFDT=$P(^("DIS"),U,1),SDWLOK3=0 I SDWLDFDT<SDWLBD!(SDWLDFDT>SDWLED) S SDWLOK3=1
"RTN","SDWLRSRS",37,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")) ^("CL")=0
"RTN","SDWLRSRS",38,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")) ^("CL")=0
"RTN","SDWLRSRS",39,0)
 .I 'SDWLOK3 D S3
"RTN","SDWLRSRS",40,0)
 .S SDWLTYP=$P(SDWLX,U,5)
"RTN","SDWLRSRS",41,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")) ^("PR")=0
"RTN","SDWLRSRS",42,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")) ^("PR")=0
"RTN","SDWLRSRS",43,0)
 .S SDWLFLG=0
"RTN","SDWLRSRS",44,0)
 .I SDWLOFDT'>SDWLBD D
"RTN","SDWLRSRS",45,0)
 ..I SDWLOFDT=SDWLBD Q
"RTN","SDWLRSRS",46,0)
 ..I $P(SDWLX,U,17)["O" S SDWLFLG=1
"RTN","SDWLRSRS",47,0)
 ..I $D(^SDWL(409.3,SDWLDA,"DIS")) D
"RTN","SDWLRSRS",48,0)
 ...I 'SDWLFLG,($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)>SDWLBD)!($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)=SDWLBD) S SDWLFLG=1
"RTN","SDWLRSRS",49,0)
 ..I SDWLFLG D
"RTN","SDWLRSRS",50,0)
 ...S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")+1
"RTN","SDWLRSRS",51,0)
 ...S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")+1
"RTN","SDWLRSRS",52,0)
 .I $P(SDWLX,U,14) D
"RTN","SDWLRSRS",53,0)
 ..S SDWLRDT=$P(SDWLX,U,14)
"RTN","SDWLRSRS",54,0)
 ..I SDWLRDT>SDWLBD!(SDWLRDT=SDWLBD)!(SDWLRDT<SDWLED)!(SDWLRDT=SDWLED) D
"RTN","SDWLRSRS",55,0)
 ...S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLRSRS",56,0)
 ...S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")=^("NR")+1
"RTN","SDWLRSRS",57,0)
 ...S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLRSRS",58,0)
 ...S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLRSRS",59,0)
 .D S2
"RTN","SDWLRSRS",60,0)
 .I $$S^%ZTLOAD S DUOUT=""
"RTN","SDWLRSRS",61,0)
 Q
"RTN","SDWLRSRS",62,0)
S1 ;ORIGINATING DATE MEETS CRITERIA
"RTN","SDWLRSRS",63,0)
 ;
"RTN","SDWLRSRS",64,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")+1
"RTN","SDWLRSRS",65,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")=^("AD")+1
"RTN","SDWLRSRS",66,0)
 Q
"RTN","SDWLRSRS",67,0)
S2 ;DO NOT REMOVE DATE MEETS CRITERIA
"RTN","SDWLRSRS",68,0)
 ;
"RTN","SDWLRSRS",69,0)
 N X1,X2,X3,X4
"RTN","SDWLRSRS",70,0)
 S X1=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR"),X2=$G(^("AD")),X3=$G(^("CL")) S X4=X1+X2-X3
"RTN","SDWLRSRS",71,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"RR")=($G(^("PR"))+($G(^("AD"))))-$G(^("CL"))
"RTN","SDWLRSRS",72,0)
 S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLRSRS",73,0)
 Q
"RTN","SDWLRSRS",74,0)
S3 S SDWLDIS=^SDWL(409.3,SDWLDA,"DIS")  D
"RTN","SDWLRSRS",75,0)
 .N X
"RTN","SDWLRSRS",76,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")+1
"RTN","SDWLRSRS",77,0)
 .S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")+1
"RTN","SDWLRSRS",78,0)
 .S SDWLDP=$P(SDWLDIS,U,3),X="SDWL"_SDWLDP,@X=@X+1 S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)) ^(X)=0
"RTN","SDWLRSRS",79,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)+1
"RTN","SDWLRSRS",80,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)) ^(X)=0
"RTN","SDWLRSRS",81,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)=^(X)+1
"RTN","SDWLRSRS",82,0)
 Q
"SEC","^DD",409.36,409.36,.01,8.5)
#
"SEC","^DD",409.36,409.36,.02,8.5)
#
"SEC","^DD",409.36,409.36,.03,8.5)
#
"SEC","^DD",409.36,409.36,.09,8.5)
#
"SEC","^DD",409.36,409.36,.1,8.5)
#
"SEC","^DD",409.36,409.36,.111,8.5)
#
"SEC","^DD",409.36,409.36,.112,8.5)
#
"SEC","^DD",409.36,409.36,.113,8.5)
#
"SEC","^DD",409.36,409.36,.114,8.5)
#
"SEC","^DD",409.36,409.36,.115,8.5)
#
"SEC","^DD",409.36,409.36,.116,8.5)
#
"SEC","^DD",409.36,409.36,.117,8.5)
#
"SEC","^DD",409.36,409.36,.1217,8.5)
#
"SEC","^DD",409.36,409.36,.1218,8.5)
#
"SEC","^DD",409.36,409.36,.131,8.5)
#
"SEC","^DD",409.36,409.36,.2,8.5)
#
"SEC","^DD",409.36,409.36,.301,8.5)
#
"SEC","^DD",409.36,409.36,.302,8.5)
#
"SEC","^DD",409.36,409.36,.361,8.5)
#
"SEC","^DD",409.36,409.36,.5,8.5)
#
"SEC","^DD",409.36,409.36,4,8.5)
#
"SEC","^DD",409.36,409.36,5,8.5)
#
"SEC","^DD",409.36,409.36,22,8.5)
#
"SEC","^DD",409.36,409.36,991.01,8.5)
#
"SEC","^DIC",409.35,409.35,0,"AUDIT")
@
"SEC","^DIC",409.35,409.35,0,"DD")
@
"SEC","^DIC",409.35,409.35,0,"DEL")
@
"SEC","^DIC",409.35,409.35,0,"LAYGO")
@
"SEC","^DIC",409.35,409.35,0,"RD")
@
"SEC","^DIC",409.35,409.35,0,"WR")
@
"SEC","^DIC",409.36,409.36,0,"AUDIT")
@
"SEC","^DIC",409.36,409.36,0,"DD")
@
"SEC","^DIC",409.36,409.36,0,"DEL")
@
"SEC","^DIC",409.36,409.36,0,"LAYGO")
@
"SEC","^DIC",409.36,409.36,0,"RD")
@
"SEC","^DIC",409.36,409.36,0,"WR")
@
"VER")
8.0^22.0
"^DD",409.3,409.3,21,0)
DISPOSITION^S^D:DEATH;NC:REMOVED/NON-VA CARE;SA:REMOVED/SCHEDULED-ASSIGNED;CC:REMOVED/VA CONTRACT CARE;NN:REMOVED/NO LONGER NECESSARY;ER:ENTERED IN ERROR;TR:TRANSFERRED;^DIS;3^Q
"^DD",409.3,409.3,21,3)
Select a reason for removing the patient the wait list.
"^DD",409.3,409.3,21,21,0)
^.001^1^1^3050414^^^^
"^DD",409.3,409.3,21,21,1,0)
Reason patient has been dispositioned from Wait List(Sch/PCMM)
"^DD",409.3,409.3,21,"DT")
3050318
"^DD",409.35,409.35,0)
FIELD^^7^8
"^DD",409.35,409.35,0,"DT")
3050614
"^DD",409.35,409.35,0,"IX","B",409.35,.01)

"^DD",409.35,409.35,0,"NM","SDWL TRANSFER REQUEST")

"^DD",409.35,409.35,.01,0)
WAIT LIST ENTRY^RP409.3^SDWL(409.3,^0;1^Q
"^DD",409.35,409.35,.01,1,0)
^.1
"^DD",409.35,409.35,.01,1,1,0)
409.35^B
"^DD",409.35,409.35,.01,1,1,1)
S ^SDWL(409.35,"B",$E(X,1,30),DA)=""
"^DD",409.35,409.35,.01,1,1,2)
K ^SDWL(409.35,"B",$E(X,1,30),DA)
"^DD",409.35,409.35,.01,3)

"^DD",409.35,409.35,.01,21,0)
^^1^1^3050506^
"^DD",409.35,409.35,.01,21,1,0)
The patient that is to be on the Sch/PCMM Wait List.
"^DD",409.35,409.35,.01,"DT")
3050506
"^DD",409.35,409.35,1,0)
STATION NUMBER^RNJ5,0^^0;2^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X
"^DD",409.35,409.35,1,3)
Type a Number between 0 and 99999, 0 Decimal Digits
"^DD",409.35,409.35,1,21,0)
^^2^2^3050614^
"^DD",409.35,409.35,1,21,1,0)
The Station Number of the Institution the request for transfer is to be
"^DD",409.35,409.35,1,21,2,0)
made to.
"^DD",409.35,409.35,1,"DT")
3050614
"^DD",409.35,409.35,2,0)
TRANSMISSION DATE/TIME^RD^^0;3^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",409.35,409.35,2,21,0)
^^1^1^3050506^
"^DD",409.35,409.35,2,21,1,0)
Exact date and time (including seconds) of the moment of transmission.
"^DD",409.35,409.35,2,"DT")
3050506
"^DD",409.35,409.35,3,0)
STATUS^RS^P:PENDING XMIT;T:TRANSMITTED;R:RECEIVED;X:REFUSED;A:ACCEPTED;C:CANCELLED;^0;4^Q
"^DD",409.35,409.35,3,21,0)
^^11^11^3050506^
"^DD",409.35,409.35,3,21,1,0)
PENDING XMIT : The details have been entered and are about to be  
"^DD",409.35,409.35,3,21,2,0)
               transmitted to their destination
"^DD",409.35,409.35,3,21,3,0)
TRANSMITTED  : The details have been transmitted to their destination
"^DD",409.35,409.35,3,21,4,0)
RECEIVED     : The details have arrived at the destination facility and 
"^DD",409.35,409.35,3,21,5,0)
               are held on a pending file (#409.36)
"^DD",409.35,409.35,3,21,6,0)
REFUSED      : The details were not accepted by the users at the 
"^DD",409.35,409.35,3,21,7,0)
               desination facility
"^DD",409.35,409.35,3,21,8,0)
ACCEPTED     : The details were accepted by the users at the desination 
"^DD",409.35,409.35,3,21,9,0)
               facility
"^DD",409.35,409.35,3,21,10,0)
CANCELLED    : A cancellation request has been made. Awaiting 
"^DD",409.35,409.35,3,21,11,0)
               acknowlegement from the receiving facility.
"^DD",409.35,409.35,3,"DT")
3050506
"^DD",409.35,409.35,4,0)
REQUESTOR^RP200'^VA(200,^0;5^Q
"^DD",409.35,409.35,4,21,0)
^.001^1^1^3050506^^
"^DD",409.35,409.35,4,21,1,0)
The person making the request for transfer.
"^DD",409.35,409.35,4,"DT")
3050506
"^DD",409.35,409.35,5,0)
COMMENT^409.355^^1;0
"^DD",409.35,409.35,6,0)
RECEIVING FACILITY TRANSFER ID^F^^0;6^K:$L(X)>10!($L(X)<1) X
"^DD",409.35,409.35,6,3)
Answer must be 1-10 characters in length.
"^DD",409.35,409.35,6,"DT")
3050506
"^DD",409.35,409.35,7,0)
ACCEPTING PERSON^F^^0;7^K:$L(X)>35!($L(X)<3) X
"^DD",409.35,409.35,7,3)
Answer must be 3-35 characters in length.
"^DD",409.35,409.35,7,21,0)
^^3^3^3050613^
"^DD",409.35,409.35,7,21,1,0)
This is the name of the person who accepted the transfer at the 
"^DD",409.35,409.35,7,21,2,0)
destination facility. It is a free text name from the NEW PERSON file 
"^DD",409.35,409.35,7,21,3,0)
(#200).
"^DD",409.35,409.35,7,"DT")
3050613
"^DD",409.35,409.355,0)
COMMENT SUB-FIELD^^.01^1
"^DD",409.35,409.355,0,"DT")
3050506
"^DD",409.35,409.355,0,"NM","COMMENT")

"^DD",409.35,409.355,0,"UP")
409.35
"^DD",409.35,409.355,.01,0)
COMMENT^W^^0;1^Q
"^DD",409.35,409.355,.01,21,0)
^.001^2^2^3050506^^
"^DD",409.35,409.355,.01,21,1,0)
This is a word processing field to allow free text comments to accompany
"^DD",409.35,409.355,.01,21,2,0)
the transmission to better describe the treatment that was being awaited.
"^DD",409.35,409.355,.01,"DT")
3050506
"^DD",409.36,409.36,0)
FIELD^^.3^26
"^DD",409.36,409.36,0,"DT")
3050613
"^DD",409.36,409.36,0,"IX","B",409.36,.01)

"^DD",409.36,409.36,0,"NM","SDWL TRANSFER ACCEPT")

"^DD",409.36,409.36,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",409.36,409.36,.01,1,0)
^.1
"^DD",409.36,409.36,.01,1,1,0)
409.36^B
"^DD",409.36,409.36,.01,1,1,1)
S ^SDWL(409.36,"B",$E(X,1,30),DA)=""
"^DD",409.36,409.36,.01,1,1,2)
K ^SDWL(409.36,"B",$E(X,1,30),DA)
"^DD",409.36,409.36,.01,3)
Answer must be 3-30 characters in length.
"^DD",409.36,409.36,.01,21,0)
^^4^4^3050414^
"^DD",409.36,409.36,.01,21,1,0)
Enter the patient's name in 'LAST,FIRST MIDDLE SUFFIX' format.
"^DD",409.36,409.36,.01,21,2,0)
This value must be 3-30 characters in length and may contain only
"^DD",409.36,409.36,.01,21,3,0)
uppercase alpha characters, spaces, apostrophes, hyphens and one comma.  
"^DD",409.36,409.36,.01,21,4,0)
All other characters and parenthetical text will be removed.
"^DD",409.36,409.36,.01,"DT")
3050325
"^DD",409.36,409.36,.02,0)
SEX^S^M:MALE;F:FEMALE;^1;1^Q
"^DD",409.36,409.36,.02,21,0)
^^1^1^3050414^
"^DD",409.36,409.36,.02,21,1,0)
Enter 'M' if this applicant is a male, or 'F' if female.
"^DD",409.36,409.36,.02,"DT")
3050331
"^DD",409.36,409.36,.03,0)
DATE OF BIRTH^D^^1;2^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",409.36,409.36,.03,21,0)
^^2^2^3050414^
"^DD",409.36,409.36,.03,21,1,0)
Enter the applicant's date of birth between December 31, 1870 and today's 
"^DD",409.36,409.36,.03,21,2,0)
date.
"^DD",409.36,409.36,.03,"DT")
3050331
"^DD",409.36,409.36,.09,0)
SOCIAL SECURITY NUMBER^F^^1;3^K:$L(X)>11!($L(X)<9) X
"^DD",409.36,409.36,.09,3)
Answer must be 9-11 characters in length.
"^DD",409.36,409.36,.09,21,0)
^^34^34^3050414^
"^DD",409.36,409.36,.09,21,1,0)
Enter the applicants social security number as nine digits, i.e., 
"^DD",409.36,409.36,.09,21,2,0)
123456789.  If the social security number is unknown and you need to 
"^DD",409.36,409.36,.09,21,3,0)
assign a pseudo SSN follow it with a 'P', i.e., 123456789P.  Simply enter 
"^DD",409.36,409.36,.09,21,4,0)
a 'P' if you wish the system to determine the proper pseudo SSN. Pseudo 
"^DD",409.36,409.36,.09,21,5,0)
SSN's are determined as follows:
"^DD",409.36,409.36,.09,21,6,0)
   
"^DD",409.36,409.36,.09,21,7,0)
   1.  Based on the following table assign the first three numbers
"^DD",409.36,409.36,.09,21,8,0)
       of the pseudo SSN based on the patient's three initials in
"^DD",409.36,409.36,.09,21,9,0)
       first-middle-last initial order.  For example, if the name
"^DD",409.36,409.36,.09,21,10,0)
       is 'SMITH,JOHN P' the table would be used to convert JPS
"^DD",409.36,409.36,.09,21,11,0)
       (the initials for JOHN P SMITH) into 467.
"^DD",409.36,409.36,.09,21,12,0)
    
"^DD",409.36,409.36,.09,21,13,0)
       ALPHA     NUMBER              ALPHA      NUMBER
"^DD",409.36,409.36,.09,21,14,0)
       -----     ------              -----      ------
"^DD",409.36,409.36,.09,21,15,0)
       A,B,C       1                 D,E,F        2
"^DD",409.36,409.36,.09,21,16,0)
       G,H,I       3                 J,K,L        4
"^DD",409.36,409.36,.09,21,17,0)
       M,N,O       5                 P,Q,R        6
"^DD",409.36,409.36,.09,21,18,0)
       S,T,U       7                 V,W,X        8
"^DD",409.36,409.36,.09,21,19,0)
       Y,Z         9                 NO INITIAL   0
"^DD",409.36,409.36,.09,21,20,0)
   
"^DD",409.36,409.36,.09,21,21,0)
   2.  Using the patient's date of birth convert it to six numerics
"^DD",409.36,409.36,.09,21,22,0)
       in month-day-year order.  Where a month, day or year consists of
"^DD",409.36,409.36,.09,21,23,0)
       less than one numeric, i.e., JUNE=6, preceed it by a zero, i.e.,
"^DD",409.36,409.36,.09,21,24,0)
       JUNE=06.  If the month and/or year of birth are unknown indicate
"^DD",409.36,409.36,.09,21,25,0)
       them as '00'.
"^DD",409.36,409.36,.09,21,26,0)
    
"^DD",409.36,409.36,.09,21,27,0)
 EXAMPLES
"^DD",409.36,409.36,.09,21,28,0)
 --------
"^DD",409.36,409.36,.09,21,29,0)
 Patient Name             DOB                 Pseudo SSN
"^DD",409.36,409.36,.09,21,30,0)
 ------------             ---                 ----------
"^DD",409.36,409.36,.09,21,31,0)
 SMITH,JOHN P             Jan 3, 1917         467010317P
"^DD",409.36,409.36,.09,21,32,0)
 SMITH,JOHN P             Jan 1917            467010017P
"^DD",409.36,409.36,.09,21,33,0)
 SMITH,JOHN P             1917                467000017P
"^DD",409.36,409.36,.09,21,34,0)
 SMITH,JOHN               Dec 15, 1945        407121545P
"^DD",409.36,409.36,.09,"DT")
3050331
"^DD",409.36,409.36,.1,0)
REQUESTING STATION NUMBER^RNJ5,0^^.1;1^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X
"^DD",409.36,409.36,.1,3)
Type a Number between 0 and 99999, 0 Decimal Digits
"^DD",409.36,409.36,.1,21,0)
^^3^3^3050613^
"^DD",409.36,409.36,.1,21,1,0)
This is the Station Number of the requesting facility. When 
"^DD",409.36,409.36,.1,21,2,0)
acknowledgement messages are returned, the domain to which they are to be 
"^DD",409.36,409.36,.1,21,3,0)
sent can be derived from this value.
"^DD",409.36,409.36,.1,"DT")
3050613
"^DD",409.36,409.36,.111,0)
STREET ADDRESS [LINE 1]^F^^ADDR;1^K:$L(X)>45!($L(X)<3) X
"^DD",409.36,409.36,.111,3)
Answer must be 3-45 characters in length.
"^DD",409.36,409.36,.111,21,0)
^^2^2^3050414^
"^DD",409.36,409.36,.111,21,1,0)
Enter the first line of this applicant's residence street address [3-35 
"^DD",409.36,409.36,.111,21,2,0)
characters].
"^DD",409.36,409.36,.111,"DT")
3050331
"^DD",409.36,409.36,.112,0)
STREET ADDRESS [LINE 2]^F^^ADDR;2^K:$L(X)>30!($L(X)<3) X
"^DD",409.36,409.36,.112,3)
Answer must be 3-30 characters in length.
"^DD",409.36,409.36,.112,21,0)
^^2^2^3050414^
"^DD",409.36,409.36,.112,21,1,0)
Enter the second line of this applicant's residence street address [3-30 
"^DD",409.36,409.36,.112,21,2,0)
characters] if the space provided in 'street address' was not sufficient.
"^DD",409.36,409.36,.112,"DT")
3050331
"^DD",409.36,409.36,.113,0)
STREET ADDRESS [LINE 3]^F^^ADDR;3^K:$L(X)>30!($L(X)<3) X
"^DD",409.36,409.36,.113,3)
Answer must be 3-30 characters in length.
"^DD",409.36,409.36,.113,21,0)
^^3^3^3050414^
"^DD",409.36,409.36,.113,21,1,0)
Enter the third line of this applicant's residence street address [3-30 
"^DD",409.36,409.36,.113,21,2,0)
characters] if the space provided in 'street address' and 'street address 
"^DD",409.36,409.36,.113,21,3,0)
2' was not sufficient.
"^DD",409.36,409.36,.113,"DT")
3050331
"^DD",409.36,409.36,.114,0)
CITY^F^^ADDR;4^K:$L(X)>15!($L(X)<3) X
"^DD",409.36,409.36,.114,3)
Answer must be 3-15 characters in length.
"^DD",409.36,409.36,.114,21,0)
^^3^3^3050414^
"^DD",409.36,409.36,.114,21,1,0)
Enter the city in which this applicant resides [2-15 characters]. If the 
"^DD",409.36,409.36,.114,21,2,0)
space provided is not sufficient please abbreviate the city to the best 
"^DD",409.36,409.36,.114,21,3,0)
of your ability.
"^DD",409.36,409.36,.114,"DT")
3050331
"^DD",409.36,409.36,.115,0)
STATE^P5'^DIC(5,^ADDR;5^Q
"^DD",409.36,409.36,.115,21,0)
^^2^2^3050414^
"^DD",409.36,409.36,.115,21,1,0)
From the available listing choose the state in which this applicant 
"^DD",409.36,409.36,.115,21,2,0)
resides.
"^DD",409.36,409.36,.115,"DT")
3050331
"^DD",409.36,409.36,.116,0)
ZIP CODE^NJ5,0^^ADDR;6^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X
"^DD",409.36,409.36,.116,3)
Type a Number between 0 and 99999, 0 Decimal Digits
"^DD",409.36,409.36,.116,21,0)
^^2^2^3050414^
"^DD",409.36,409.36,.116,21,1,0)
Enter the zip code [5 numerics] for the city in which this applicant 
"^DD",409.36,409.36,.116,21,2,0)
resides.
"^DD",409.36,409.36,.116,"DT")
3050331
"^DD",409.36,409.36,.117,0)
COUNTY^P5.1'^VIC(5.1,^ADDR;7^Q
"^DD",409.36,409.36,.117,21,0)
^^3^3^3050414^
"^DD",409.36,409.36,.117,21,1,0)
If a state of residence is entered select from the available listing the 
"^DD",409.36,409.36,.117,21,2,0)
county in which this applicant resides.  If no state (or a non-state) is 
"^DD",409.36,409.36,.117,21,3,0)
entered no selection is possible.
"^DD",409.36,409.36,.117,"DT")
3050407
"^DD",409.36,409.36,.1217,0)
TEMPORARY ADDRESS START DATE^D^^ADDR;9^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",409.36,409.36,.1217,21,0)
^^5^5^3050414^
"^DD",409.36,409.36,.1217,21,1,0)
If the WANT TO ENTER A TEMPORARY ADDRESS prompt is answered YES enter the 
"^DD",409.36,409.36,.1217,21,2,0)
date on which the applicant will commence being contacted at the 
"^DD",409.36,409.36,.1217,21,3,0)
temporary address indicated, otherwise nothing may be entered.  This 
"^DD",409.36,409.36,.1217,21,4,0)
field may not be deleted as long as the need for a temporary address is 
"^DD",409.36,409.36,.1217,21,5,0)
indicated.
"^DD",409.36,409.36,.1217,"DT")
3050407
"^DD",409.36,409.36,.1218,0)
TEMPORARY ADDRESS END DATE^D^^ADDR;10^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",409.36,409.36,.1218,21,0)
^^4^4^3050414^
"^DD",409.36,409.36,.1218,21,1,0)
If the WANT TO ENTER A TEMPORARY ADDRESS prompt is answered YES enter the 
"^DD",409.36,409.36,.1218,21,2,0)
date as of which the applicant will no longer be contacted at that 
"^DD",409.36,409.36,.1218,21,3,0)
temporary address, otherwise nothing may be entered.  This field may not 
"^DD",409.36,409.36,.1218,21,4,0)
be deleted as long as the need for a temporary address is indicated.
"^DD",409.36,409.36,.1218,"DT")
3050407
"^DD",409.36,409.36,.131,0)
PHONE NUMBER^F^^ADDR;8^K:$L(X)>20!($L(X)<1) X
"^DD",409.36,409.36,.131,3)
Answer must be 1-20 characters in length.
"^DD",409.36,409.36,.131,21,0)
^^2^2^3050414^
"^DD",409.36,409.36,.131,21,1,0)
Enter the telephone number [4-20 characters] to this applicant's place of 
"^DD",409.36,409.36,.131,21,2,0)
residence.
"^DD",409.36,409.36,.131,"DT")
3050407
"^DD",409.36,409.36,.2,0)
TRANSMISSION DATE/TIME^D^^.1;2^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",409.36,409.36,.2,21,0)
^^1^1^3050408^
"^DD",409.36,409.36,.2,21,1,0)
The date and time (including seconds) of the moment of transmission.
"^DD",409.36,409.36,.2,"DT")
3050331
"^DD",409.36,409.36,.3,0)
COVERSHEET REQUESTED^S^Y:YES;^.1;3^Q
"^DD",409.36,409.36,.3,21,0)
^^3^3^3050613^
"^DD",409.36,409.36,.3,21,1,0)
This is a flag to indicate if a request has been made to print a 
"^DD",409.36,409.36,.3,21,2,0)
coversheet with the transmitted details of the patient to be transferred. 
"^DD",409.36,409.36,.3,21,3,0)
If the flag has been set to YES, the request can be notified as Accepted.
"^DD",409.36,409.36,.3,"DT")
3050613
"^DD",409.36,409.36,.301,0)
SERVICE CONNECTED?^S^Y:YES;N:NO;^2;1^Q
"^DD",409.36,409.36,.301,21,0)
^^4^4^3050414^
"^DD",409.36,409.36,.301,21,1,0)
Enter 'Y' if this applicant is service connected, 'N' if not. Applicants 
"^DD",409.36,409.36,.301,21,2,0)
identified as being non-veterans cannot be entered as service connected.  
"^DD",409.36,409.36,.301,21,3,0)
Once eligibility has been verified only users holding the designated 
"^DD",409.36,409.36,.301,21,4,0)
security key may enter/edit this field.
"^DD",409.36,409.36,.301,"DT")
3050331
"^DD",409.36,409.36,.302,0)
SERVICE CONNECTED PERCENTAGE^NJ3,0^^2;2^K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X
"^DD",409.36,409.36,.302,3)
Type a Number between 0 and 100, 0 Decimal Digits
"^DD",409.36,409.36,.302,21,0)
^^5^5^3050414^
"^DD",409.36,409.36,.302,21,1,0)
If this applicant is service connected (SERVICE CONNECTED prompt must be 
"^DD",409.36,409.36,.302,21,2,0)
answered YES) enter the service connected percentage [a number between 
"^DD",409.36,409.36,.302,21,3,0)
0-100].  Once eligibility has been verified only users who hold the 
"^DD",409.36,409.36,.302,21,4,0)
designated security key may enter/edit this field.  Field may not be 
"^DD",409.36,409.36,.302,21,5,0)
deleted as long as service connection is indicated.
"^DD",409.36,409.36,.302,"DT")
3050331
"^DD",409.36,409.36,.361,0)
PRIMARY ELIGIBILITY CODE^F^^2;3^K:$L(X)>75!($L(X)<3) X
"^DD",409.36,409.36,.361,3)
Answer must be 3-75 characters in length.
"^DD",409.36,409.36,.361,21,0)
^.001^41^41^3050429^^
"^DD",409.36,409.36,.361,21,1,0)
Select from the available listing the appropriate eligibility code for 
"^DD",409.36,409.36,.361,21,2,0)
this applicant.  For non-veteran applicants a wide variety of choices are 
"^DD",409.36,409.36,.361,21,3,0)
available.  For veteran applicants the choices are screened [in the 
"^DD",409.36,409.36,.361,21,4,0)
following order] dependent on the responses to other prompts:
"^DD",409.36,409.36,.361,21,5,0)
   
"^DD",409.36,409.36,.361,21,6,0)
1.  If the SERVICE CONNECTED prompt (field .301) is answered YES
"^DD",409.36,409.36,.361,21,7,0)
    only the following two choices are available:
"^DD",409.36,409.36,.361,21,8,0)
    
"^DD",409.36,409.36,.361,21,9,0)
    a.  If the SERVICE CONNECTED PERCENTAGE prompt (field .302) entered
"^DD",409.36,409.36,.361,21,10,0)
        is 50% or greater 'SERVICE CONNECTED 50% TO 100%' can be
"^DD",409.36,409.36,.361,21,11,0)
        selected.
"^DD",409.36,409.36,.361,21,12,0)
   
"^DD",409.36,409.36,.361,21,13,0)
    b.  Otherwise, the percentage is assumed to be less than 50% and
"^DD",409.36,409.36,.361,21,14,0)
        only 'SC, LESS THAN 50%' may be entered.
"^DD",409.36,409.36,.361,21,15,0)
   
"^DD",409.36,409.36,.361,21,16,0)
2.  If the response to the WERE YOU A PRISONER OF WAR field (# .525)
"^DD",409.36,409.36,.361,21,17,0)
    is YES and the veteran is not service connected, you must select 
"^DD",409.36,409.36,.361,21,18,0)
    PRISONER OF WAR as the eligibility code.
"^DD",409.36,409.36,.361,21,19,0)
   
"^DD",409.36,409.36,.361,21,20,0)
3.  If the veteran is receiving VA benefits, but does not meet the
"^DD",409.36,409.36,.361,21,21,0)
    criteria in items 1 and 2 above, then the following choices may
"^DD",409.36,409.36,.361,21,22,0)
    be presented for selection:
"^DD",409.36,409.36,.361,21,23,0)
 
"^DD",409.36,409.36,.361,21,24,0)
    If RECEIVING A&A BENEFITS is answered YES, the eligibility code
"^DD",409.36,409.36,.361,21,25,0)
    AID & ATTENDANCE may be selected.
"^DD",409.36,409.36,.361,21,26,0)
 
"^DD",409.36,409.36,.361,21,27,0)
    If the RECEIVING HOUSEBOUND BENEFITS is answered YES ,the eligibility
"^DD",409.36,409.36,.361,21,28,0)
    code HOUSEBOUND may be selected.
"^DD",409.36,409.36,.361,21,29,0)
 
"^DD",409.36,409.36,.361,21,30,0)
    If the above two prompts were answered NO, but the RECEIVING A VA
"^DD",409.36,409.36,.361,21,31,0)
    PENSION prompt was answered YES, only the NSC, VA PENSION prompt
"^DD",409.36,409.36,.361,21,32,0)
    may be selected.
"^DD",409.36,409.36,.361,21,33,0)
 
"^DD",409.36,409.36,.361,21,34,0)
4.  If none of the above pertain to this veteran, then the NSC eligibility
"^DD",409.36,409.36,.361,21,35,0)
    will be available for selection.
"^DD",409.36,409.36,.361,21,36,0)
 
"^DD",409.36,409.36,.361,21,37,0)
**  Dependent on the birthdate of the applicant, the following two
"^DD",409.36,409.36,.361,21,38,0)
    eligibility codes may be displayed along with those shown in items
"^DD",409.36,409.36,.361,21,39,0)
    3 through 5 above:  WORLD WAR I and MEXICAN BORDER WAR.  These would
"^DD",409.36,409.36,.361,21,40,0)
    display for veterans not meeting the criteria in items 1 and 2, but
"^DD",409.36,409.36,.361,21,41,0)
    whose date of birth is prior to 1920.
"^DD",409.36,409.36,.361,"DT")
3050429
"^DD",409.36,409.36,.4,0)
COMMENTS^409.364^^COMM;0
"^DD",409.36,409.36,.5,0)
SENDING FACILITY TRANSFER ID^F^^0;2^K:$L(X)>10!($L(X)<1) X
"^DD",409.36,409.36,.5,3)
Answer must be 1-10 characters in length.
"^DD",409.36,409.36,.5,21,0)
^.001^2^2^3050408^^
"^DD",409.36,409.36,.5,21,1,0)
Identifying reference to the transfer file on the transmitting facility 
"^DD",409.36,409.36,.5,21,2,0)
(#409.35).
"^DD",409.36,409.36,.5,"DT")
3050407
"^DD",409.36,409.36,4,0)
WAIT LIST TYPE^S^1:PCMM TEAM ASSIGNMENT;2:PCMM POSITION ASSIGNMENT;3:SERVICE/SPECIALTY;4:SPECIFIC CLINIC;^WL;1^Q
"^DD",409.36,409.36,4,21,0)
^^1^1^3050408^
"^DD",409.36,409.36,4,21,1,0)
Set of codes as on the WAIT LIST ENTRY file (#409.3)
"^DD",409.36,409.36,4,"DT")
3050407
"^DD",409.36,409.36,5,0)
WAIT LIST TYPE EXTENSION^F^^WL;2^K:$L(X)>40!($L(X)<1) X
"^DD",409.36,409.36,5,3)
Answer must be 1-40 characters in length.
"^DD",409.36,409.36,5,21,0)
^^3^3^3050408^
"^DD",409.36,409.36,5,21,1,0)
A free text expansion of the attribute associated with the WAIT LIST 
"^DD",409.36,409.36,5,21,2,0)
TYPE. E.g. A Wait List Type of 3: SERVICE/SPECIALTY would typically hold 
"^DD",409.36,409.36,5,21,3,0)
the relevant Specialty.
"^DD",409.36,409.36,5,"DT")
3050407
"^DD",409.36,409.36,22,0)
DESIRED DATE OF APPOINTMENT^D^^WL;3^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",409.36,409.36,22,21,0)
^^2^2^3050408^
"^DD",409.36,409.36,22,21,1,0)
Desired Date of Appointment taken from the Wait List Entry file from the 
"^DD",409.36,409.36,22,21,2,0)
transmitting facility.
"^DD",409.36,409.36,22,"DT")
3050407
"^DD",409.36,409.36,991.01,0)
INTEGRATION CONTROL NUMBER^NJ12,0^^1;4^K:+X'=X!(X>999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",409.36,409.36,991.01,3)
Type a Number between 0 and 999999999999, 0 Decimal Digits
"^DD",409.36,409.36,991.01,21,0)
^^3^3^3050414^
"^DD",409.36,409.36,991.01,21,1,0)
Machine to machine identifier for a patient.
"^DD",409.36,409.36,991.01,21,2,0)
Included in the hope of making a match with the same patient on the
"^DD",409.36,409.36,991.01,21,3,0)
receiving system.
"^DD",409.36,409.36,991.01,"DT")
3050331
"^DD",409.36,409.364,0)
COMMENTS SUB-FIELD^^.01^1
"^DD",409.36,409.364,0,"DT")
3050401
"^DD",409.36,409.364,0,"NM","COMMENTS")

"^DD",409.36,409.364,0,"UP")
409.36
"^DD",409.36,409.364,.01,0)
COMMENTS^W^^0;1^Q
"^DD",409.36,409.364,.01,"DT")
3050401
"^DIC",409.35,409.35,0)
SDWL TRANSFER REQUEST^409.35
"^DIC",409.35,409.35,0,"GL")
^SDWL(409.35,
"^DIC",409.35,"B","SDWL TRANSFER REQUEST",409.35)

"^DIC",409.36,409.36,0)
SDWL TRANSFER ACCEPT^409.36
"^DIC",409.36,409.36,0,"GL")
^SDWL(409.36,
"^DIC",409.36,"B","SDWL TRANSFER ACCEPT",409.36)

**END**
**END**

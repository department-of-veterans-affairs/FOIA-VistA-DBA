Released DI*22*136 SEQ #121
Extracted from mail message
**KIDS**:DI*22.0*136^

**INSTALL NAME**
DI*22.0*136
"BLD",531,0)
DI*22.0*136^VA FILEMAN^0^3031230^y
"BLD",531,1,0)
^^2^2^3031218^
"BLD",531,1,1,0)
See patch DI*22*136 in the National Patch Module on FORUM for complete
"BLD",531,1,2,0)
information on this patch.
"BLD",531,4,0)
^9.64PA^^
"BLD",531,"KRN",0)
^9.67PA^8989.52^19
"BLD",531,"KRN",.4,0)
.4
"BLD",531,"KRN",.401,0)
.401
"BLD",531,"KRN",.402,0)
.402
"BLD",531,"KRN",.403,0)
.403
"BLD",531,"KRN",.5,0)
.5
"BLD",531,"KRN",.84,0)
.84
"BLD",531,"KRN",3.6,0)
3.6
"BLD",531,"KRN",3.8,0)
3.8
"BLD",531,"KRN",9.2,0)
9.2
"BLD",531,"KRN",9.8,0)
9.8
"BLD",531,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",531,"KRN",9.8,"NM",1,0)
DIO4^^0^B9747835
"BLD",531,"KRN",9.8,"NM","B","DIO4",1)

"BLD",531,"KRN",19,0)
19
"BLD",531,"KRN",19.1,0)
19.1
"BLD",531,"KRN",101,0)
101
"BLD",531,"KRN",409.61,0)
409.61
"BLD",531,"KRN",771,0)
771
"BLD",531,"KRN",870,0)
870
"BLD",531,"KRN",8989.51,0)
8989.51
"BLD",531,"KRN",8989.52,0)
8989.52
"BLD",531,"KRN",8994,0)
8994
"BLD",531,"KRN","B",.4,.4)

"BLD",531,"KRN","B",.401,.401)

"BLD",531,"KRN","B",.402,.402)

"BLD",531,"KRN","B",.403,.403)

"BLD",531,"KRN","B",.5,.5)

"BLD",531,"KRN","B",.84,.84)

"BLD",531,"KRN","B",3.6,3.6)

"BLD",531,"KRN","B",3.8,3.8)

"BLD",531,"KRN","B",9.2,9.2)

"BLD",531,"KRN","B",9.8,9.8)

"BLD",531,"KRN","B",19,19)

"BLD",531,"KRN","B",19.1,19.1)

"BLD",531,"KRN","B",101,101)

"BLD",531,"KRN","B",409.61,409.61)

"BLD",531,"KRN","B",771,771)

"BLD",531,"KRN","B",870,870)

"BLD",531,"KRN","B",8989.51,8989.51)

"BLD",531,"KRN","B",8989.52,8989.52)

"BLD",531,"KRN","B",8994,8994)

"BLD",531,"QUES",0)
^9.62^^
"BLD",531,"REQB",0)
^9.611^1^1
"BLD",531,"REQB",1,0)
DI*22.0*45^2
"BLD",531,"REQB","B","DI*22.0*45",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
VA FILEMAN^DI^FM INIT
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
22.0^2990330^3030110^41
"PKG",5,22,1,"PAH",1,0)
136^3031230
"PKG",5,22,1,"PAH",1,1,0)
^^2^2^3031230
"PKG",5,22,1,"PAH",1,1,1,0)
See patch DI*22*136 in the National Patch Module on FORUM for complete
"PKG",5,22,1,"PAH",1,1,2,0)
information on this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DIO4")
0^1^B9747835
"RTN","DIO4",1,0)
DIO4 ;SFISC/GFT,XAK,TKW-FINISH OUTPUT, CLOSE DEVICE ;9:57 AM  30 Dec 2003
"RTN","DIO4",2,0)
 ;;22.0;VA FileMan;**2,32,45,136**;Mar 30, 1999
"RTN","DIO4",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","DIO4",4,0)
 K DIXX,DIWT,DIW,DIP,DSC,DRK,DIO("SCR") D:'$D(DISYS) OS^DII
"RTN","DIO4",5,0)
 G:$G(DIFIXPT)=1 K1
"RTN","DIO4",6,0)
 I $G(DIBTPGM)]"" D
"RTN","DIO4",7,0)
 .N % S %=+$P(DIBTPGM,"^DISZ",2) D:% ENRLS^DIOZ(%) K DIBTPGM Q
"RTN","DIO4",8,0)
 I ($G(ZTSTOP)=1!($G(DIFMSTOP))!($G(DIERR)))&'$D(DIAR) K:$G(ZTQUEUED) DIERR,^TMP("DIERR",$J) D FF G STOP
"RTN","DIO4",9,0)
 I $G(DISTP)'<1,$D(^UTILITY($J,"T")) S A=0 D ^DIO3
"RTN","DIO4",10,0)
 I L!($D(DISTEMP)),DISEARCH,'DISUPNO D:'DJ&('DC)&($D(^UTILITY($J,2))) HDR W !!!?25,DJ," MATCH",$P("ES",U,DJ'=1)," FOUND." W:IOST?1"C".E $C(7)
"RTN","DIO4",11,0)
 I DISEARCH,$G(DISV),$D(^DIBT(DISV)) D NOW^%DTC S ^DIBT(DISV,"QR")=%_U_+DJ
"RTN","DIO4",12,0)
 I $G(DISTP)<1,'DIO,'DISUPNO,'DC D:$D(^UTILITY($J,2)) HDR W !!!!,?10,"*** NO RECORDS TO PRINT ***"
"RTN","DIO4",13,0)
 I $D(DIAR) D UPDATE^DIARU
"RTN","DIO4",14,0)
 I $D(CP) S X=-1,^DOSV(0,IO(0),"CP")=CP F  S X=$O(CP(X)),Z=-1 Q:X=""  F  S Z=$O(CP(X,Z)) Q:Z=""  S ^DOSV(0,IO(0),"CP",X,Z)=CP(X,Z) Q:X=Z
"RTN","DIO4",15,0)
 I $D(DIOT),$D(Y),Y'=U S DY(1)="X DIOT S DN=0",DN=1 D ^DIO2
"RTN","DIO4",16,0)
 D FF
"RTN","DIO4",17,0)
 I $D(DCOPIES),$D(DOUT),$D(^DD("OS",DISYS,"SDPEND")) D SDP
"RTN","DIO4",18,0)
 G:$G(DIOEND)="G M^DIAU" M^DIAU G:$G(DIOEND)="G L^DIDC" L^DIDC
"RTN","DIO4",19,0)
 X:$D(DIOEND) DIOEND K DIOEND
"RTN","DIO4",20,0)
STOP I $G(ZTSTOP)=1,$G(DISTOP("C"))]"" X DISTOP("C")
"RTN","DIO4",21,0)
 D CLOSE I DUZ(0)'="@" S X=0 X ^DD("FUNC",18,1)
"RTN","DIO4",22,0)
K ;S:$D(ZTSK) ZTREQ="@"
"RTN","DIO4",23,0)
 I $D(ZTQUEUED) D
"RTN","DIO4",24,0)
 . S ZTREQ="@"
"RTN","DIO4",25,0)
 . I $G(DDXPTMDL),$D(DDXPXTNO) N DA,DIK S DIK="^DIPT(",DA=DDXPXTNO D ^DIK
"RTN","DIO4",26,0)
K1 K ^UTILITY($J),^(U,$J),^UTILITY("DIP2",$J),FLDS,DIOT,DQI,A,B,C,D,E,H,I,J,M,N,L,P,Q,S,V,W,X,Y,Z,DITTO,DIP,DIPA,BY
"RTN","DIO4",27,0)
 K %,%H,%I,%A,%B,%DT,%Q,%X,%Y,%Z,FR,CP,DA,DD,DIO,DL,DM,DN,DI,DE,D9,D5,D4,D3,D2,D1,DCOPIES,DIFF,DIASKHD,DISTOP,DISTP,DILCT,DISV,DISX,DIAC,DIFILE
"RTN","DIO4",28,0)
 K DIS,SF,DIPDT,DIPR,DICMX,DHT,DIWL,DIWR,DIPASS,DICSS
"RTN","DIO4",29,0)
 K DIRUT,DIROUT,DUOUT,DTOUT,DIHELP,DIMSG,^TMP("DIHELP",$J),^TMP("DIMSG",$J)
"RTN","DIO4",30,0)
 I '$G(DIQUIET) K ^TMP("DIERR",$J),DIERR
"RTN","DIO4",31,0)
 K DIBT,DIBT1,DIBT2,DX,DY,DNP,DC,DXS,DINS,DIPT,IOP,DCC,DQ,DJ,DJK,DIOP,DIOSL,DLP,DILIOSL,DHIT,DIJ,DPR,DP,DISUPNO,DIPCRIT,DIBTOLD,DITYP,DISTXT,DISEARCH Q
"RTN","DIO4",32,0)
 ;
"RTN","DIO4",33,0)
FF W:IOST?1"P".E&$Y&L @IOF
"RTN","DIO4",34,0)
 Q
"RTN","DIO4",35,0)
 ;
"RTN","DIO4",36,0)
SDP Q:'DCOPIES  W ! X ^DD("OS",DISYS,"SDPEND")
"RTN","DIO4",37,0)
 S DIO=IO,DLP=IOPAR,IOP=DOUT,A=IO(0) D ^%ZIS S IO(0)=A Q:POP
"RTN","DIO4",38,0)
 F A=1:1:DCOPIES W:IOST?1"P".E&$Y @IOF X ^DD("OS",DISYS,"SDP") U IO
"RTN","DIO4",39,0)
 I IO'=IO(0) S X=IO X ^DD("FUNC",7,1) K IO(1,IO)
"RTN","DIO4",40,0)
 S IO=DIO Q
"RTN","DIO4",41,0)
 ;
"RTN","DIO4",42,0)
CLOSE ;
"RTN","DIO4",43,0)
 S DIOP=IO
"RTN","DIO4",44,0)
 ;VistA Close Logic 22*136
"RTN","DIO4",45,0)
 I $G(^%ZIS("C"))="G ^%ZISC" X ^%ZIS("C") K DIOP Q
"RTN","DIO4",46,0)
 ;Stand Alone Close Logic
"RTN","DIO4",47,0)
 I $P(IO(0),DIOP)]"" S IOP="HOME" D ^%ZIS H:POP  S X=DIOP X ^DD("FUNC",7,1) K IO(1,IO) U IO(0)
"RTN","DIO4",48,0)
 K DIOP Q
"RTN","DIO4",49,0)
HDR N DN S DN=1 X ^UTILITY($J,1) Q
"RTN","DIO4",50,0)
N G N^DIO2
"RTN","DIO4",51,0)
T G T^DIO2
"RTN","DIO4",52,0)
CSTP G CSTP^DIO2
"RTN","DIO4",53,0)
DT G DT^DIO2 Q
"RTN","DIO4",54,0)
C G C^DIO2
"RTN","DIO4",55,0)
S G S^DIO2
"RTN","DIO4",56,0)
P G P^DIO2
"RTN","DIO4",57,0)
A G A^DIO2
"RTN","DIO4",58,0)
D G D^DIO2
"RTN","DIO4",59,0)
CP G CP^DIO2
"RTN","DIO4",60,0)
H G H^DIO2
"RTN","DIO4",61,0)
M G M^DIO2
"VER")
8^22.0
**END**
**END**

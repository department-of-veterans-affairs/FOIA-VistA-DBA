EMERGENCY Released IB*2*255 SEQ #224
Extracted from mail message
**KIDS**:IB*2.0*255^

**INSTALL NAME**
IB*2.0*255
"BLD",5236,0)
IB*2.0*255^INTEGRATED BILLING^0^3031208^y
"BLD",5236,1,0)
^^3^3^3031208^
"BLD",5236,1,1,0)
FIX RX COPAY EXEMPTION FOR IVM - The upload of an IVM Converted Means 
"BLD",5236,1,2,0)
Test (ORU~Z06) will be modified to no longer re-calculate the COPAY 
"BLD",5236,1,3,0)
INCOME EXEMPTION STATUS (#.04) field in the BILLING PATIENT (#354) File.
"BLD",5236,4,0)
^9.64PA^^
"BLD",5236,"INID")
n^n^n
"BLD",5236,"KRN",0)
^9.67PA^8989.52^19
"BLD",5236,"KRN",.4,0)
.4
"BLD",5236,"KRN",.4,"NM",0)
^9.68A^^
"BLD",5236,"KRN",.401,0)
.401
"BLD",5236,"KRN",.401,"NM",0)
^9.68A^^
"BLD",5236,"KRN",.402,0)
.402
"BLD",5236,"KRN",.403,0)
.403
"BLD",5236,"KRN",.5,0)
.5
"BLD",5236,"KRN",.84,0)
.84
"BLD",5236,"KRN",3.6,0)
3.6
"BLD",5236,"KRN",3.8,0)
3.8
"BLD",5236,"KRN",9.2,0)
9.2
"BLD",5236,"KRN",9.8,0)
9.8
"BLD",5236,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5236,"KRN",9.8,"NM",1,0)
IBAMTED^^0^B7169007
"BLD",5236,"KRN",9.8,"NM","B","IBAMTED",1)

"BLD",5236,"KRN",19,0)
19
"BLD",5236,"KRN",19.1,0)
19.1
"BLD",5236,"KRN",101,0)
101
"BLD",5236,"KRN",409.61,0)
409.61
"BLD",5236,"KRN",771,0)
771
"BLD",5236,"KRN",870,0)
870
"BLD",5236,"KRN",8989.51,0)
8989.51
"BLD",5236,"KRN",8989.52,0)
8989.52
"BLD",5236,"KRN",8994,0)
8994
"BLD",5236,"KRN","B",.4,.4)

"BLD",5236,"KRN","B",.401,.401)

"BLD",5236,"KRN","B",.402,.402)

"BLD",5236,"KRN","B",.403,.403)

"BLD",5236,"KRN","B",.5,.5)

"BLD",5236,"KRN","B",.84,.84)

"BLD",5236,"KRN","B",3.6,3.6)

"BLD",5236,"KRN","B",3.8,3.8)

"BLD",5236,"KRN","B",9.2,9.2)

"BLD",5236,"KRN","B",9.8,9.8)

"BLD",5236,"KRN","B",19,19)

"BLD",5236,"KRN","B",19.1,19.1)

"BLD",5236,"KRN","B",101,101)

"BLD",5236,"KRN","B",409.61,409.61)

"BLD",5236,"KRN","B",771,771)

"BLD",5236,"KRN","B",870,870)

"BLD",5236,"KRN","B",8989.51,8989.51)

"BLD",5236,"KRN","B",8989.52,8989.52)

"BLD",5236,"KRN","B",8994,8994)

"BLD",5236,"QUES",0)
^9.62^^
"BLD",5236,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
255^3031208
"PKG",200,22,1,"PAH",1,1,0)
^^3^3^3031208
"PKG",200,22,1,"PAH",1,1,1,0)
FIX RX COPAY EXEMPTION FOR IVM - The upload of an IVM Converted Means 
"PKG",200,22,1,"PAH",1,1,2,0)
Test (ORU~Z06) will be modified to no longer re-calculate the COPAY 
"PKG",200,22,1,"PAH",1,1,3,0)
INCOME EXEMPTION STATUS (#.04) field in the BILLING PATIENT (#354) File.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IBAMTED")
0^1^B7169007
"RTN","IBAMTED",1,0)
IBAMTED ;ALB/CPM - MEANS TEST EVENT DRIVER INTERFACE ; 21-FEB-92
"RTN","IBAMTED",2,0)
 ;;2.0;INTEGRATED BILLING;**15,255**;21-MAR-94
"RTN","IBAMTED",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","IBAMTED",4,0)
 ;
"RTN","IBAMTED",5,0)
 ; -- do medication copayment exemption processing
"RTN","IBAMTED",6,0)
 D:'$D(EASZ06) ^IBAMTED1
"RTN","IBAMTED",7,0)
 ;
"RTN","IBAMTED",8,0)
 ; Quit if supported variables are unavailable.
"RTN","IBAMTED",9,0)
 Q:'$D(DFN)!('$D(DGMTA))!('$D(DGMTP))!('$D(DUZ))!('$D(DGMTINF))!('$D(DGMTACT))
"RTN","IBAMTED",10,0)
 ;
"RTN","IBAMTED",11,0)
 ;***
"RTN","IBAMTED",12,0)
 ;S XRTL=$ZU(0),XRTN="IBAMTED-1" D T0^%ZOSV ;start rt clock
"RTN","IBAMTED",13,0)
 ;
"RTN","IBAMTED",14,0)
 ; -- quit if copay exemption test
"RTN","IBAMTED",15,0)
 I $P(DGMTA,"^",19)=2!($P(DGMTP,"^",19)=2) G END
"RTN","IBAMTED",16,0)
 ;
"RTN","IBAMTED",17,0)
 ; Quit if test is a Category change resulting from a deleted test.
"RTN","IBAMTED",18,0)
 I DGMTA]"",DGMTP]"",+DGMTA'=+DGMTP G END ; on-line deletion
"RTN","IBAMTED",19,0)
 I DGMTA]"",DGMTP]"",DGMTACT="DEL" G END ; IVM 'delete' transmission
"RTN","IBAMTED",20,0)
 ;
"RTN","IBAMTED",21,0)
 ; Process Means Tests uploaded by IVM.
"RTN","IBAMTED",22,0)
 I DGMTACT="UPL"!(DGMTACT="DUP") D  G END
"RTN","IBAMTED",23,0)
 .;
"RTN","IBAMTED",24,0)
 .; - if IVM is uploading a verified test, create new MT charges
"RTN","IBAMTED",25,0)
 .I $P(DGMTP,"^",23)<2,$P(DGMTA,"^",23)>1,'$$CK^DGMTUB(DGMTP),$$CK^DGMTUB(DGMTA) D ^IBAMTV Q
"RTN","IBAMTED",26,0)
 .;
"RTN","IBAMTED",27,0)
 .; - if IVM is sending a 'Delete' transmission, cancel previous charges
"RTN","IBAMTED",28,0)
 .I $P(DGMTP,"^",23)>1,$P(DGMTA,"^",23)<2,$$CK^DGMTUB(DGMTP),'$$CK^DGMTUB(DGMTA) D CANC^IBAMTV
"RTN","IBAMTED",29,0)
 ;
"RTN","IBAMTED",30,0)
 ; Quit if the most current Means Test was not altered.
"RTN","IBAMTED",31,0)
 S IBMT=$S(DGMTA="":DGMTP,1:DGMTA)
"RTN","IBAMTED",32,0)
 S X=$$LST^DGMTU(DFN) I X,$P(X,"^",2)>+IBMT G END
"RTN","IBAMTED",33,0)
 ;
"RTN","IBAMTED",34,0)
 ; Quit if an added or deleted test is a Required test.
"RTN","IBAMTED",35,0)
 I (DGMTA=""!(DGMTP="")),$P(IBMT,"^",3)=1 G END
"RTN","IBAMTED",36,0)
 ;
"RTN","IBAMTED",37,0)
 ; Determine the billable status before and after the transaction.
"RTN","IBAMTED",38,0)
 D NOW^%DTC S IBCATCA=$$BIL^DGMTUB(DFN,%)
"RTN","IBAMTED",39,0)
 S IBCATCP=$S(DGMTP="":$$ADD,DGMTA="":$$CK^DGMTUB(DGMTP),1:$$EDIT)
"RTN","IBAMTED",40,0)
 ;
"RTN","IBAMTED",41,0)
 ; Generate a bulletin if the patient's billing status has changed.
"RTN","IBAMTED",42,0)
 I (IBCATCP&('IBCATCA))!('IBCATCP&(IBCATCA)) D
"RTN","IBAMTED",43,0)
 .S IBEFDT=$S($P(IBMT,"^",7):+$P(IBMT,"^",7),1:+IBMT)
"RTN","IBAMTED",44,0)
 .I IBCATCP,'IBCATCA,'$$CHG^IBAMTEDU(IBEFDT) Q  ; hasn't been billed since going c->a
"RTN","IBAMTED",45,0)
 .I 'IBCATCP,IBCATCA,'$$EP^IBAMTEDU(IBEFDT) Q  ; hasn't been treated since going a->c
"RTN","IBAMTED",46,0)
 .D MT^IBAMTBU2 ; create bulletin
"RTN","IBAMTED",47,0)
 ;
"RTN","IBAMTED",48,0)
END K IBARR,IBCANCEL,IBCATCA,IBCATCP,IBDIQ,IBDUZ,IBEFDT,IBMT,IBI,IBC,IBPT,IBT
"RTN","IBAMTED",49,0)
 K DIC,DIQ,DR,DA,VA,VAERR,VAEL,X,X1,X2,XMDUZ,XMTEXT,XMY,XMSUB
"RTN","IBAMTED",50,0)
 ;***
"RTN","IBAMTED",51,0)
 ;I $D(XRT0) S:'$D(XRTN) XRTN="IBAMTED" D T1^%ZOSV ;stop rt clock
"RTN","IBAMTED",52,0)
 Q
"RTN","IBAMTED",53,0)
 ;
"RTN","IBAMTED",54,0)
 ;
"RTN","IBAMTED",55,0)
ADD() ; Determine the billable status before adding a Means Test.
"RTN","IBAMTED",56,0)
 S X1=$S($P(DGMTA,"^",3)=3:+DGMTA,1:+$P(DGMTA,"^",7)\1),X2=-1 D C^%DTC
"RTN","IBAMTED",57,0)
 Q $$BIL^DGMTUB(DFN,X)
"RTN","IBAMTED",58,0)
 ;
"RTN","IBAMTED",59,0)
 ;
"RTN","IBAMTED",60,0)
EDIT() ; Determine the billable status before editing a Means Test.
"RTN","IBAMTED",61,0)
 I $P(DGMTP,"^",3)'=1 Q $$CK^DGMTUB(DGMTP)
"RTN","IBAMTED",62,0)
 S X1=+DGMTP,X2=-1 D C^%DTC Q $$BIL^DGMTUB(DFN,X)
"VER")
8.0^22
**END**
**END**

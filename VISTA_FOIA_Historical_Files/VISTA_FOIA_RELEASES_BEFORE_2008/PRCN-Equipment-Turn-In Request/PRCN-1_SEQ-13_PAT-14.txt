$TXT Created by WANG,CHI at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 04/14/04 at 15:41
=============================================================================
Run Date: APR 19, 2004                     Designation: PRCN*1*14
Package : PRCN - EQUIPMENT/TURN-IN REQUEST    Priority: Mandatory
Version : 1        SEQ #13                      Status: Released
                  Compliance Date: MAY 20, 2004
=============================================================================

Associated patches: (v)PRCN*1*12   <<= must be installed BEFORE `PRCN*1*14'

Subject: STRING TOO LONG ERROR IN EQUIPMENT TURN-IN OPTION

Category: 
  - Routine

Description:
============

 Description:
 ===========
 ***********************************************************************
 * IT IS RECOMMENDED THAT PATCH PRCN*1.0*14 AND PRCN*1.0*15            *
 * BE INSTALLED TOGETHER                                               *
 ***************************** NOTE ************************************
 * Sites that are already using CoreFLS, rather than Equipment/Turn-In *
 * Request, should not install this patch as Equipment/Turn-In Request *
 * has been retired at your site and edits are not appropriate.        *
 ***********************************************************************
  
 This patch addresses one problem with a string too long error at
 the routine line CMR+2^PRCNCMR:4 when the user was running the
 Approve Equipment Turn-In Request (CMR) [PRCN TURN CMR APP] option.
  
 ASSOCIATED E3R(s):
 ------------------ 
 N/A
  
 ASSOCIATED NOIS:
 ----------------
 ANN-1003-41863     STRING TOO LONG error in Equipment Turn-In Option
  
 PARTICIPATING TEST SITES:
 -------------------------
 Roseburg,OR
 Lexington,KY
 Iron Mountain,MI
 Big Spring,TX
 Beckley,WV
  
 NOIS/PROBLEM OVERVIEW
 ---------------------
  
 1. ANN-1003-41863     STRING TOO LONG error in Equipment Turn-In Option
  
    Problem:
    --------
    While the Approve Equipment Turn-In Request (CMR) [PRCN TURN CMR APP] 
    option is running, if site has a large number of CMRs assigning to
    the same person as the responsible official for, the variable which
    stores these CMRs runs out of space and a "%DSM-E-STRLEN, String too
    long" error occurs at line CMR+2^PRCNCMR:4.
  
    Resolution:
    -----------
    Modified routines to use a local array to store the list of CMRs,
    thus avoiding the problem.
    
    An environment check routine will be used to check if site has the
    CoreFLS software of IFCAP/Engineering (AMES/MERS)/Equipment Turn-In
    Request and will stop the installation of this patch.
  
 ROUTINE SUMMARY 
 ---------------
  
 The following is a list of the routines included in this patch.  
 The second line of each of these routines now looks like:
  
   <tab>;;1.0;Equipment/Turn-In Request;**[patch list]**;Sep 13, 1996
  
                      CHECK^XTSUMBLD results
   Routine Name     Before Patch     After Patch     Patch List 
   ------------     ------------     -----------     ----------
   PRCNP14E         n/a              682609          14
   PRCNCMR          3441670          3206095         3,14
   PRCNDISP         607537           469690          14
   PRCNREQE         4688107          4541932         3,11,12,14
   PRCNTICM         2134133          1996286         2,3,14
  
   Total number of routines = 5
   
 INSTALLATION INSTRUCTIONS
 =========================
 This patch can be loaded with users in the system.  Installation time
 will be less than 5 minutes.
     
  1.   Choose the PackMan message containing this patch and invoke the 
       INSTALL/CHECK MESSAGE PackMan option.  
              
  2.   (DSM for Open VMS sites only) Disable routine mapping on all systems
       for the routines listed in the Routine Summary. 
       NOTE:  If the routines included in this patch are not currently in 
       your mapped routine set, please skip this step.
   
  3.   Start up the Kernel Installation and Distribution System Menu 
       [XPD MAIN]: 
     
            Edits and Distribution ...  
            Utilities ...  
            Installation ...  
     
    Select Kernel Installation & Distribution System Option: INStallation 
                                                             ---
            1      Load a Distribution
            2      Verify Checksums in Transport Global
            3      Print Transport Global
            4      Compare Transport Global to Current System
            5      Backup a Transport Global
            6      Install Package(s)
                   Restart Install of Package(s)
                   Unload a Distribution
      
    Select Installation Option: 
     
  4.   From this menu, you may elect to use the following options
       (When prompted for the INSTALL NAME, enter PRCN*1.0*14):
  
       a.  Backup a Transport Global - This option will create a backup
           message of any routines exported with this patch. It will not
           backup any other changes such as DD's or templates.
       b.  Compare Transport Global to Current System - This option will
           allow you to view all changes that will be made when this patch
           is installed. It compares all components of this patch
           (routines, DD's, templates, etc.).
       c.  Verify Checksums in Transport Global - This option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
  
  5.   Use the Install Package(s) option and select the package
       PRCN*1.0*14.
  
       NOTE: If you are a CoreFLS test site you will receive the message:
       Equipment/Turn-In Request (PRCN) has been shut down, so no
       further PRCN patches should be installed.
  
       a. When prompted 'Want KIDS to INHIBIT LOGONs during the
          install? YES//', answer NO.
       b. When prompted 'Want to DISABLE Scheduled Options and Menu 
          Options and Protocols? YES//', answer YES.
       c. When prompted 'Enter options you wish to mark as 'Out Of Order':',
          enter the following options:
    
          Approve Equipment Turn-In Request (CMR)  [PRCN TURN CMR APP]
          Display/Print Equipment Requests (PPM)   [PRCN NX PPM DISPLAY]
          Edit Equipment Request                   [PRCN NX EDIT]
  
       d. When prompted 'Enter protocols you wish to mark as 'Out Of Order':
          ,press <return>.
   
  6.   (DSM for Open VMS sites only) Optional - Include the routines
       distributed with this patch in the mapped routine set.
  
       NOTE: This step is only necessary if you performed step 2 or if
       you wish to include the routines in your mapped set.
  
  7.   DELETE ENVIRONMENT CHECK ROUTINE
       -----------------------
       Delete the environmental check routine PRCNP14E from your system
       after successful installation of this patch.

Routine Information:
====================

Routine Name:
  - PRCNCMR

 * OLD *   ;;1.0;PRCN;**3**;Sep 13, 1996
 * NEW *   ;;1.0;PRCN;**3,14**;Sep 13, 1996
 * DEL *   F JJ=1:1 S PRCNC=$P(PRCNCMR,U,JJ) Q:PRCNC=""  S 
 PRCNCMR(PRCNC)=""
 * OLD *   F  S PRCN=$O(^ENG(6914.1,"C",PRCNC,PRCN)) Q:PRCN=""  S 
 PRCNCMR=PRCNCMR
 _PRCN_U
 * NEW *   F  S PRCN=$O(^ENG(6914.1,"C",PRCNC,PRCN)) Q:PRCN=""  S 
 PRCNCMR(PRCN)="
 "
 * OLD *   F  S PRCN=$O(^ENG(6914.1,"D",PRCNC,PRCN)) Q:PRCN=""  S 
 PRCNCMR=PRCNCMR
 _PRCN_U
 * NEW *   F  S PRCN=$O(^ENG(6914.1,"D",PRCNC,PRCN)) Q:PRCN=""  S 
 PRCNCMR(PRCN)="
 "

Routine Checksum:
3206095

Routine Name:
  - PRCNDISP

 * OLD *   ;;1.0;Equipment/Turn-In Request;;Sep 13, 1996
 * NEW *   ;;1.0;Equipment/Turn-In Request;**14**;Sep 13, 1996
 * DEL *   F JJ=1:1 S PRCNC=$P(PRCNCMR,U,JJ) Q:PRCNC=""  S
 PRCNCMR(PRCNC)=""

Routine Checksum:
469690

Routine Name:
  - PRCNREQE

 * OLD *   ;;1.0;Equipment/Turn-In Request;**3,11,12**;Sep 13, 1996
 * NEW *   ;;1.0;Equipment/Turn-In Request;**3,11,12,14**;Sep 13, 1996
 * DEL *   . F JJ=1:1 S PRCNC=$P(PRCNCMR,U,JJ) Q:PRCNC=""  S 
 PRCNCMR(PRCNC)=""

Routine Checksum:
4541932

Routine Name:
  - PRCNTICM

 * OLD *   ;;1.0;PRCN;**2,3**;Sep 13, 1996
 * NEW *   ;;1.0;PRCN;**2,3,14**;Sep 13, 1996
 * DEL *   F JJ=1:1 S PRCNC=$P(PRCNCMR,U,JJ) Q:PRCNC=""  S 
 PRCNCMR(PRCNC)=""

Routine Checksum:
1996286

Routine Name:
  - PRCNP14E

 Environmental check routine added. To be deleted after patch install

Routine Checksum:

=============================================================================
User Information:
Entered By  : WANG,CHI                      Date Entered  : OCT 27, 2003
Completed By: BOWEN,MARY JANE               Date Completed: APR 19, 2004
Released By : HUTCHINSON,PATRICIA ANN       Date Released : APR 19, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released XU*8*19 SEQ #18
Extracted from mail message
**KIDS**:XU*8.0*19^

**INSTALL NAME**
XU*8.0*19
"BLD",83,0)
XU*8.0*19^KERNEL^0^^y
"BLD",83,1,0)
^^2^2^2960123^
"BLD",83,1,1,0)
This build fixes an <UNDEF> error that sometimes occurred when
"BLD",83,1,2,0)
transferring a users' keys.
"BLD",83,4,0)
^9.64PA^^
"BLD",83,"ABPKG")
n
"BLD",83,"KRN",0)
^9.67PA^8994^15
"BLD",83,"KRN",.4,0)
.4
"BLD",83,"KRN",.401,0)
.401
"BLD",83,"KRN",.402,0)
.402
"BLD",83,"KRN",.403,0)
.403
"BLD",83,"KRN",.5,0)
.5
"BLD",83,"KRN",.84,0)
.84
"BLD",83,"KRN",3.6,0)
3.6
"BLD",83,"KRN",9.2,0)
9.2
"BLD",83,"KRN",9.8,0)
9.8
"BLD",83,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",83,"KRN",9.8,"NM",1,0)
XQSMDCPY^^0^B12531388
"BLD",83,"KRN",9.8,"NM","B","XQSMDCPY",1)

"BLD",83,"KRN",19,0)
19
"BLD",83,"KRN",19.1,0)
19.1
"BLD",83,"KRN",101,0)
101
"BLD",83,"KRN",409.61,0)
409.61
"BLD",83,"KRN",8994,0)
8994
"BLD",83,"KRN",8995,0)
8995
"BLD",83,"KRN","B",.4,.4)

"BLD",83,"KRN","B",.401,.401)

"BLD",83,"KRN","B",.402,.402)

"BLD",83,"KRN","B",.403,.403)

"BLD",83,"KRN","B",.5,.5)

"BLD",83,"KRN","B",.84,.84)

"BLD",83,"KRN","B",3.6,3.6)

"BLD",83,"KRN","B",9.2,9.2)

"BLD",83,"KRN","B",9.8,9.8)

"BLD",83,"KRN","B",19,19)

"BLD",83,"KRN","B",19.1,19.1)

"BLD",83,"KRN","B",101,101)

"BLD",83,"KRN","B",409.61,409.61)

"BLD",83,"KRN","B",8994,8994)

"BLD",83,"KRN","B",8995,8995)

"BLD",83,"QUES",0)
^9.62^^
"PKG",283,-1)
1^1
"PKG",283,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",283,22,0)
^9.49I^1^1
"PKG",283,22,1,0)
8.0^2950729^2950729^6
"PKG",283,22,1,"PAH",1,0)
19
"PKG",283,22,1,"PAH",1,1,0)
^^2^2^2960123
"PKG",283,22,1,"PAH",1,1,1,0)
This build fixes an <UNDEF> error that sometimes occurred when
"PKG",283,22,1,"PAH",1,1,2,0)
transferring a users' keys.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options and Menu Options
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XQSMDCPY")
0^1^B12531388
"RTN","XQSMDCPY",1,0)
XQSMDCPY ;ISC-SF/JLI - COPY ONE USER (PRIM & SEC MENUS, KEYS, FILES) TO ANOTHER USER ;01/23/96  11:18
"RTN","XQSMDCPY",2,0)
 ;;8.0;KERNEL;**19**;Jul 10, 1995
"RTN","XQSMDCPY",3,0)
 S XQBOSS=0 I $D(^XUSEC("XUMGR",DUZ)) S XQBOSS=1
"RTN","XQSMDCPY",4,0)
 I 'XQBOSS W !!,?5,"Note: You must have been delegated these options and",!,?11,"keys to transfer them from user to user.",!
"RTN","XQSMDCPY",5,0)
 ;I 'XQBOSS,$O(^VA(200,DUZ,19.5,0))'>0 W !!,$C(7),"No Menus have been delegated to you to use this option",!,"If there are questions see your site manager's staff." Q
"RTN","XQSMDCPY",6,0)
 W !! S DIC("A")="Select the user to be COPIED FROM: ",DIC=200,DIC(0)="AQEM" D ^DIC Q:Y'>0  S XQUSR1=+Y
"RTN","XQSMDCPY",7,0)
 S XQUSRPM=+$G(^VA(200,XQUSR1,201)) I XQUSRPM="" S XQUSRPM=0 W !,"The doner user has no primary meny."
"RTN","XQSMDCPY",8,0)
 I 'XQBOSS,XQUSRPM>0,'$D(^VA(200,DUZ,19.5,"B",XQUSRPM)) W !,$C(7),"You are not able to give out this user's primary menu ",$P(^DIC(19,XQUSRPM,0),U) S XQUSRPM=0
"RTN","XQSMDCPY",9,0)
 S XQUSEC(0)="" F I=0:0 S I=$O(^VA(200,XQUSR1,203,I)) Q:I'>0  S X=^(I,0),XQUSEC(+X)=$P(X,U,2) I 'XQBOSS,'$D(^VA(200,DUZ,19.5,"B",+X)) W !,$C(7),"Skipping secondary menu ",$P(^DIC(19,+X,0),U) K XQUSEC(+X)
"RTN","XQSMDCPY",10,0)
 ;I XQUSRPM'>0,$O(XQUSEC(0))'>0 W !!,$C(7),"No Primary or Secondary Menus to copy -- quitting.",!! G EXIT
"RTN","XQSMDCPY",11,0)
 S XQUSEK(0)="" F I=0:0 S I=$O(^VA(200,XQUSR1,51,I)) Q:I'>0  S X=+^(I,0) I $D(^DIC(19,+X,0)) S XQUSEK(X)=X I 'XQBOSS,'$D(^VA(200,DUZ,52,"B",X)) W !,$C(7),"Not authorized to give ",$P(^DIC(19.1,X,0),U)," key -- skipping" K XQUSEK(X)
"RTN","XQSMDCPY",12,0)
 ;
"RTN","XQSMDCPY",13,0)
 ;Get recipient user
"RTN","XQSMDCPY",14,0)
 ;
"RTN","XQSMDCPY",15,0)
 S DIC("A")="Select a USER to be COPIED TO: ",DIC="^VA(200,",DIC(0)="AEMQ"
"RTN","XQSMDCPY",16,0)
 F XQI=0:0 D ^DIC Q:Y'>0  S XUSR(+Y)="",DIC("A")="Select ANOTHER USER: "
"RTN","XQSMDCPY",17,0)
 K DIC
"RTN","XQSMDCPY",18,0)
 ;
"RTN","XQSMDCPY",19,0)
 G:$O(XUSR(0))'>0 EXIT
"RTN","XQSMDCPY",20,0)
 R !!,"Do you want to QUEUE this job ?  Y// ",X:DTIME Q:'$T!(X[U)  S:X="" X="Y" I "Yy"[$E(X) D TSK G EXIT
"RTN","XQSMDCPY",21,0)
 ;
"RTN","XQSMDCPY",22,0)
DQ ;
"RTN","XQSMDCPY",23,0)
 F XQI=0:0 S XQI=$O(XUSR(XQI)) Q:XQI'>0  D COPY1
"RTN","XQSMDCPY",24,0)
EXIT ;
"RTN","XQSMDCPY",25,0)
 K %,D,D0,DA,DI,DISYS,DIC,DIE,DR,X,XQBOSS,XQI,XQJ,XQUSEK,XQUSR1,XUSR,XQUSEC,XQUSRPM,Y
"RTN","XQSMDCPY",26,0)
 Q
"RTN","XQSMDCPY",27,0)
 ;
"RTN","XQSMDCPY",28,0)
COPY1 I XQUSRPM>0 S DIE=200,DA=XQI,DR="201///"_$P(^DIC(19,XQUSRPM,0),U) D ^DIE
"RTN","XQSMDCPY",29,0)
 S:'$D(^VA(200,XQI,203,0)) ^(0)="^200.03P" S DLAYGO=200
"RTN","XQSMDCPY",30,0)
 F XQJ=0:0 S XQJ=$O(XQUSEC(XQJ)) Q:XQJ'>0  S DIC="^VA(200,"_XQI_",203,",DA(1)=XQI,DIC("P")=200.03,X=$P(^DIC(19,XQJ,0),U),DIC(0)="ML" D ^DIC I Y>0,'$P(Y,U,3),XQUSEC(XQJ)'="" S DIE=DIC,DIE("P")=200.03,DA=+Y,DR="2///"_XQUSEC(XQJ)_";" D ^DIE
"RTN","XQSMDCPY",31,0)
 S:'$D(^VA(200,XQI,51,0)) ^(0)="^200.051P^"
"RTN","XQSMDCPY",32,0)
 S (DA,DA(1))=XQI F XQJ=0:0 S XQJ=$O(XQUSEK(XQJ)) Q:XQJ'>0  S DIC="^VA(200,"_XQI_",51,",DIC("P")=200.051,DIC(0)="ML",X=$P(^DIC(19.1,XQUSEK(XQJ),0),U) D ^DIC
"RTN","XQSMDCPY",33,0)
 K DLAYGO
"RTN","XQSMDCPY",34,0)
 Q
"RTN","XQSMDCPY",35,0)
 ;
"RTN","XQSMDCPY",36,0)
TSK S ZTRTN="DQ^XQSMDCPY",ZTIO="",ZTSAVE("XUSR(")="",ZTDESC="XQSMD Copy User",ZTSAVE("XQUSRPM")="",ZTSAVE("XQUSEC(")="",ZTSAVE("XQUSEK(")="" D ^%ZTLOAD
"RTN","XQSMDCPY",37,0)
 Q
"VER")
8.0^21.0
**END**
**END**

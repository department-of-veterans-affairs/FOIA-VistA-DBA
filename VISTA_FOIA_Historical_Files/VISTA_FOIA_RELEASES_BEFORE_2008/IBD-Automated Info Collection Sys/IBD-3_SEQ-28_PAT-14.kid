Released IBD*3*14 SEQ #28
Extracted from mail message
**KIDS**:IBD*3.0*14^

**INSTALL NAME**
IBD*3.0*14
"BLD",1514,0)
IBD*3.0*14^AUTOMATED INFO COLLECTION SYS^0^3000411^y
"BLD",1514,1,0)
^^2^2^2981119^
"BLD",1514,1,1,0)
This patch cleans up AICS DATA QUALIFIERS that may be causing problems with
"BLD",1514,1,2,0)
scanning.
"BLD",1514,4,0)
^9.64PA^^
"BLD",1514,"ABPKG")
n
"BLD",1514,"INIT")
IBDY314
"BLD",1514,"KRN",0)
^9.67PA^19^18
"BLD",1514,"KRN",.4,0)
.4
"BLD",1514,"KRN",.401,0)
.401
"BLD",1514,"KRN",.402,0)
.402
"BLD",1514,"KRN",.403,0)
.403
"BLD",1514,"KRN",.5,0)
.5
"BLD",1514,"KRN",.84,0)
.84
"BLD",1514,"KRN",3.6,0)
3.6
"BLD",1514,"KRN",3.8,0)
3.8
"BLD",1514,"KRN",9.2,0)
9.2
"BLD",1514,"KRN",9.8,0)
9.8
"BLD",1514,"KRN",9.8,"NM",0)
^9.68A^6^6
"BLD",1514,"KRN",9.8,"NM",1,0)
IBDE1^^0^B21125974
"BLD",1514,"KRN",9.8,"NM",2,0)
IBDE3^^0^B23062749
"BLD",1514,"KRN",9.8,"NM",3,0)
IBDECLN^^0^B89740362
"BLD",1514,"KRN",9.8,"NM",4,0)
IBDECLN1^^0^B17426688
"BLD",1514,"KRN",9.8,"NM",5,0)
IBDECLN2^^0^B23293633
"BLD",1514,"KRN",9.8,"NM",6,0)
IBDEPT^^0^B295130
"BLD",1514,"KRN",9.8,"NM","B","IBDE1",1)

"BLD",1514,"KRN",9.8,"NM","B","IBDE3",2)

"BLD",1514,"KRN",9.8,"NM","B","IBDECLN",3)

"BLD",1514,"KRN",9.8,"NM","B","IBDECLN1",4)

"BLD",1514,"KRN",9.8,"NM","B","IBDECLN2",5)

"BLD",1514,"KRN",9.8,"NM","B","IBDEPT",6)

"BLD",1514,"KRN",19,0)
19
"BLD",1514,"KRN",19.1,0)
19.1
"BLD",1514,"KRN",101,0)
101
"BLD",1514,"KRN",409.61,0)
409.61
"BLD",1514,"KRN",771,0)
771
"BLD",1514,"KRN",869.2,0)
869.2
"BLD",1514,"KRN",870,0)
870
"BLD",1514,"KRN",8994,0)
8994
"BLD",1514,"KRN","B",.4,.4)

"BLD",1514,"KRN","B",.401,.401)

"BLD",1514,"KRN","B",.402,.402)

"BLD",1514,"KRN","B",.403,.403)

"BLD",1514,"KRN","B",.5,.5)

"BLD",1514,"KRN","B",.84,.84)

"BLD",1514,"KRN","B",3.6,3.6)

"BLD",1514,"KRN","B",3.8,3.8)

"BLD",1514,"KRN","B",9.2,9.2)

"BLD",1514,"KRN","B",9.8,9.8)

"BLD",1514,"KRN","B",19,19)

"BLD",1514,"KRN","B",19.1,19.1)

"BLD",1514,"KRN","B",101,101)

"BLD",1514,"KRN","B",409.61,409.61)

"BLD",1514,"KRN","B",771,771)

"BLD",1514,"KRN","B",869.2,869.2)

"BLD",1514,"KRN","B",870,870)

"BLD",1514,"KRN","B",8994,8994)

"BLD",1514,"QUES",0)
^9.62^^
"BLD",1514,"REQB",0)
^9.611^2^2
"BLD",1514,"REQB",1,0)
AUTOMATED INFO COLLECTION SYS 3.0^1
"BLD",1514,"REQB",2,0)
IBD*3.0*38^1
"BLD",1514,"REQB","B","AUTOMATED INFO COLLECTION SYS 3.0",1)

"BLD",1514,"REQB","B","IBD*3.0*38",2)

"INIT")
IBDY314
"MBREQ")
0
"PKG",421,-1)
1^1
"PKG",421,0)
AUTOMATED INFO COLLECTION SYS^IBD^The utilities for generating a paper encounter form.
"PKG",421,20,0)
^9.402P^^
"PKG",421,22,0)
^9.49I^1^1
"PKG",421,22,1,0)
3.0^2970212^2970424^1258
"PKG",421,22,1,"PAH",1,0)
14^3000411
"PKG",421,22,1,"PAH",1,1,0)
^^2^2^3000411
"PKG",421,22,1,"PAH",1,1,1,0)
This patch cleans up AICS DATA QUALIFIERS that may be causing problems with
"PKG",421,22,1,"PAH",1,1,2,0)
scanning.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","IBDE1")
0^1^B21125974
"RTN","IBDE1",1,0)
IBDE1 ;ALB/CJM - ENCOUNTER FORM - (IMP/EXP UTILITY ACTIONS) ;AUG 12,1993
"RTN","IBDE1",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**14**;APR 24, 1997
"RTN","IBDE1",3,0)
 ;
"RTN","IBDE1",4,0)
ADD ;adds a form to the work space
"RTN","IBDE1",5,0)
 N OLDFORM,NEWFORM
"RTN","IBDE1",6,0)
 D FULL^VALM1
"RTN","IBDE1",7,0)
 S VALMBCK="R"
"RTN","IBDE1",8,0)
 S OLDFORM=$$SLCTFORM^IBDFU4("") Q:'OLDFORM
"RTN","IBDE1",9,0)
 S NEWFORM=$$COPYFORM^IBDFU2C(OLDFORM,357,358,"",1)
"RTN","IBDE1",10,0)
 I NEWFORM K DIE,DR,DA S DIE="^IBE(358,",DA=NEWFORM,DR="1;" D ^DIE K DIE,DR,DA
"RTN","IBDE1",11,0)
 D IDXFORMS^IBDE
"RTN","IBDE1",12,0)
 Q
"RTN","IBDE1",13,0)
 ;
"RTN","IBDE1",14,0)
DELETE ;deletes a form from the work space
"RTN","IBDE1",15,0)
 N PICK,FORM
"RTN","IBDE1",16,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","IBDE1",17,0)
 S PICK="" F  S PICK=$O(VALMY(PICK)) Q:'PICK  S FORM=+$G(@VALMAR@("IDX",PICK,PICK)) D:FORM DELETE^IBDFU2C(FORM,358,1)
"RTN","IBDE1",18,0)
 S VALMBCK="R"
"RTN","IBDE1",19,0)
 D IDXFORMS^IBDE
"RTN","IBDE1",20,0)
 Q
"RTN","IBDE1",21,0)
EDIT ;allows the export notes of a form to be edited
"RTN","IBDE1",22,0)
 N PICK,FORM
"RTN","IBDE1",23,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","IBDE1",24,0)
 D FULL^VALM1
"RTN","IBDE1",25,0)
 S PICK="" F  S PICK=$O(VALMY(PICK)) Q:'PICK  S FORM=+$G(@VALMAR@("IDX",PICK,PICK)) D:FORM
"RTN","IBDE1",26,0)
 .K DIE,DR,DA S DIE="^IBE(358,",DR="1;",DA=FORM D ^DIE K DIE,DA,DR
"RTN","IBDE1",27,0)
 S VALMBCK="R"
"RTN","IBDE1",28,0)
 D IDXFORMS^IBDE
"RTN","IBDE1",29,0)
 Q
"RTN","IBDE1",30,0)
IMPORT ;allows the user to pick a form, then import it
"RTN","IBDE1",31,0)
 N PICK,FORM,NAME,NEWFORM,IBDVR,FORMVR
"RTN","IBDE1",32,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","IBDE1",33,0)
 D FULL^VALM1
"RTN","IBDE1",34,0)
 S PICK="" F  S PICK=$O(VALMY(PICK)) Q:'PICK  S FORM=+$G(@VALMAR@("IDX",PICK,PICK)) D:FORM
"RTN","IBDE1",35,0)
 .S IBDVR=+$G(^DD(357,0,"VR")) S:IBDVR<2.1 IBDVR=3.0
"RTN","IBDE1",36,0)
 .S FORMVR=+$P($G(^IBE(358,FORM,0)),"^",17) S:FORMVR<2.1 FORMVR=2.0
"RTN","IBDE1",37,0)
 .I FORMVR<IBDVR W !!,"This form was created with version "_FORMVR_"." D
"RTN","IBDE1",38,0)
 ..; -- ask if want to continue, if not quit
"RTN","IBDE1",39,0)
 ..;
"RTN","IBDE1",40,0)
 .S NAME=$$NEWNAME^IBDFU2C($P($G(^IBE(358,FORM,0)),"^"))
"RTN","IBDE1",41,0)
 .Q:NAME=""
"RTN","IBDE1",42,0)
 .S NEWFORM=$$COPYFORM^IBDFU2C(FORM,358,357,NAME)
"RTN","IBDE1",43,0)
 .K DIE,DR,DA S DIE="^IBE(357,",DR=".07T;.04////1;",DA=NEWFORM D ^DIE K DIE,DA,DR
"RTN","IBDE1",44,0)
 .D:$G(NEWFORM) DELETE^IBDFU2C(FORM,358,0)
"RTN","IBDE1",45,0)
 S VALMBCK="R"
"RTN","IBDE1",46,0)
 D IDXFORMS^IBDE
"RTN","IBDE1",47,0)
 D UPDATE^IBDECLN(1) ;make sure everything is okay (with messages)
"RTN","IBDE1",48,0)
 Q
"RTN","IBDE1",49,0)
VIEW ;allows the export notes of a form to be edited
"RTN","IBDE1",50,0)
 N PICK,FORM,IBARY,IBHDRRTN
"RTN","IBDE1",51,0)
 D EN^VALM2($G(XQORNOD(0)),"S")
"RTN","IBDE1",52,0)
 S PICK="" F  S PICK=$O(VALMY(PICK)) Q:'PICK  S FORM=+$G(@VALMAR@("IDX",PICK,PICK)) D
"RTN","IBDE1",53,0)
 .S IBHDRRTN="D VIEWHDR^IBDE1"
"RTN","IBDE1",54,0)
 .S IBARY="^IBE(358,"_FORM_",1)"
"RTN","IBDE1",55,0)
 .D EN^VALM("IBDE TEXT DISPLAY")
"RTN","IBDE1",56,0)
 S VALMBCK="R"
"RTN","IBDE1",57,0)
 Q
"RTN","IBDE1",58,0)
VIEWHDR ;
"RTN","IBDE1",59,0)
 S VALMHDR(1)="Export Notes For "_$P($G(^IBE(358,FORM,0)),"^")_" Form"
"RTN","IBDE1",60,0)
 Q
"RTN","IBDE1",61,0)
TEXT ;entry code for the IBDF TEXT DISPLAY list template
"RTN","IBDE1",62,0)
 N NODE S NODE=""
"RTN","IBDE1",63,0)
 S:$D(IBARY) VALMAR=IBARY
"RTN","IBDE1",64,0)
 X:$D(IBHDRRTN) IBHDRRTN
"RTN","IBDE1",65,0)
 I $G(IBARY)'="" S NODE=$G(@IBARY@(0))
"RTN","IBDE1",66,0)
 S VALMCNT=$S($P(NODE,"^",4)>$P(NODE,"^",3):$P(NODE,"^",4),1:$P(NODE,"^",3))
"RTN","IBDE1",67,0)
 I '$G(VALMCNT) S VALMCNT=10
"RTN","IBDE1",68,0)
 Q
"RTN","IBDE1",69,0)
 ;
"RTN","IBDE1",70,0)
INITS ;executes inits to bring stuff into the imp/exp files
"RTN","IBDE1",71,0)
 N QUIT,RTN
"RTN","IBDE1",72,0)
 S QUIT=0
"RTN","IBDE1",73,0)
 S VALMBCK="R"
"RTN","IBDE1",74,0)
 I $G(DUZ(0))'["@" W !,"This action requires PROGRAMMER ACCESS!" D PAUSE^IBDFU5 Q
"RTN","IBDE1",75,0)
 D FULL^VALM1
"RTN","IBDE1",76,0)
 I BLKCNT!FORMCNT D
"RTN","IBDE1",77,0)
 .K DIR S DIR(0)="Y"
"RTN","IBDE1",78,0)
 .W !,"The work space must be cleared before the INITS are run. Is that okay?"
"RTN","IBDE1",79,0)
 .D ^DIR K DIR
"RTN","IBDE1",80,0)
 .I $D(DIRUT)!(Y=0) S QUIT=1
"RTN","IBDE1",81,0)
 D:'QUIT DLTALL^IBDE2
"RTN","IBDE1",82,0)
 ;
"RTN","IBDE1",83,0)
 ;ask for the init rtn
"RTN","IBDE1",84,0)
 F  Q:QUIT  D
"RTN","IBDE1",85,0)
 .S DIR(0)="FA^5:8",DIR("B")=$S($L($T(^IBDEINIT)):"IBDEINIT",1:"")
"RTN","IBDE1",86,0)
 .S DIR("?",1)="In order for you to import forms from another site the other site must have",DIR("?")="prepared and sent you inits created using the import/export facility."
"RTN","IBDE1",87,0)
 .S DIR("A",1)="What is the name of the init routine that contains the forms that you want to",DIR("A")="import? "
"RTN","IBDE1",88,0)
 .D ^DIR K DIR
"RTN","IBDE1",89,0)
 .I $D(DIRUT) S QUIT=1 Q
"RTN","IBDE1",90,0)
 .I '$L($T(^@Y)) W !!,"That routine does not exist!",! Q
"RTN","IBDE1",91,0)
 .S RTN=Y
"RTN","IBDE1",92,0)
 .S QUIT=$$MSG^IBDE1B
"RTN","IBDE1",93,0)
 .I 'QUIT D @("^"_RTN),IDXFORMS^IBDE,IDXBLKS^IBDE3 S VALMCNT=$S(SCREEN="F":FORMCNT,1:BLKCNT)
"RTN","IBDE1",94,0)
 .S QUIT=1
"RTN","IBDE1",95,0)
 I SCREEN="F" D HDR^IBDE
"RTN","IBDE1",96,0)
 I SCREEN="B" D HDR^IBDE3
"RTN","IBDE1",97,0)
 Q
"RTN","IBDE1",98,0)
DIFROM ;
"RTN","IBDE1",99,0)
 N QUIT S QUIT=0
"RTN","IBDE1",100,0)
 S VALMBCK=""
"RTN","IBDE1",101,0)
 I $G(DUZ(0))'["@" W !!,"Using the DIFROM action requires PROGRAMMER ACCESS!",! D PAUSE^IBDFU5 Q
"RTN","IBDE1",102,0)
 I 'BLKCNT,'FORMCNT D  Q
"RTN","IBDE1",103,0)
 .W !!,"There is nothing in the work space to export!"
"RTN","IBDE1",104,0)
 .D PAUSE^IBDFU5
"RTN","IBDE1",105,0)
 D FULL^VALM1
"RTN","IBDE1",106,0)
 S QUIT=$$MSG^IBDE1A
"RTN","IBDE1",107,0)
 I 'QUIT D ^DIFROM W !,"DONE",!,"************************"
"RTN","IBDE1",108,0)
 S VALMBCK="R"
"RTN","IBDE1",109,0)
 Q
"RTN","IBDE1",110,0)
BLOCKS ;
"RTN","IBDE1",111,0)
 S SCREEN="B"
"RTN","IBDE1",112,0)
 D EN^VALM("IBDE IMP/EXP TK BLOCKS")
"RTN","IBDE1",113,0)
 S VALMBCK="R",VALMCNT=FORMCNT,SCREEN="F"
"RTN","IBDE1",114,0)
 Q
"RTN","IBDE3")
0^2^B23062749
"RTN","IBDE3",1,0)
IBDE3 ;ALB/CJM - ENCOUNTER FORM - IMP/EXP UTILITY -DISPLAYS TOOLKIT BLOCKS ;AUG 12,1993
"RTN","IBDE3",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**14**;APR 24, 1997
"RTN","IBDE3",3,0)
 ;
"RTN","IBDE3",4,0)
HDR ;
"RTN","IBDE3",5,0)
 S VALMHDR(1)="LIST OF TOOLKIT BLOCKS READY FOR IMPORT OR EXPORT"
"RTN","IBDE3",6,0)
 S VALMHDR(3)="(** there are "_$S($O(^IBE(358,0)):"also",1:"no")_" forms in the work space **)"
"RTN","IBDE3",7,0)
 Q
"RTN","IBDE3",8,0)
ONENTRY ;
"RTN","IBDE3",9,0)
 N LINE
"RTN","IBDE3",10,0)
 S VALMCNT=$G(BLKCNT)
"RTN","IBDE3",11,0)
 I $D(BLKLIST) S LINE=0 F  S LINE=$O(@BLKLIST@(LINE)) Q:'LINE  D FLDCTRL^VALM10(LINE)
"RTN","IBDE3",12,0)
 Q
"RTN","IBDE3",13,0)
ONEXIT ;
"RTN","IBDE3",14,0)
 Q
"RTN","IBDE3",15,0)
 ;
"RTN","IBDE3",16,0)
IDXBLKS ;build an array of forms used by IBCLINIC for the list processor
"RTN","IBDE3",17,0)
 N BLOCK,NODE,ORDER
"RTN","IBDE3",18,0)
 K @BLKLIST
"RTN","IBDE3",19,0)
 S (VALMCNT,ORDER)=0 F  S ORDER=$O(^IBE(358.1,"D",ORDER)) Q:'ORDER  S BLOCK=0 F  S BLOCK=$O(^IBE(358.1,"D",ORDER,BLOCK)) Q:'BLOCK  D
"RTN","IBDE3",20,0)
 .I $D(^IBE(358.1,BLOCK,0)) D
"RTN","IBDE3",21,0)
 ..S VALMCNT=VALMCNT+1,@BLKLIST@(VALMCNT,0)=$$DISPLAY(BLOCK,VALMCNT),@BLKLIST@("IDX",VALMCNT,VALMCNT)=BLOCK D FLDCTRL^VALM10(VALMCNT) ;set video for ID column
"RTN","IBDE3",22,0)
 S BLKCNT=VALMCNT
"RTN","IBDE3",23,0)
 Q
"RTN","IBDE3",24,0)
 ;
"RTN","IBDE3",25,0)
DISPLAY(BLOCK,ID) ;
"RTN","IBDE3",26,0)
 N NODE,RET
"RTN","IBDE3",27,0)
 S RET=$J(ID,3)_"  "
"RTN","IBDE3",28,0)
 S NODE=$G(^IBE(358.1,BLOCK,0))
"RTN","IBDE3",29,0)
 S RET=RET_$$PADRIGHT^IBDFU($P(NODE,"^",1),30)_"  "_$P(NODE,"^",13)
"RTN","IBDE3",30,0)
 Q RET
"RTN","IBDE3",31,0)
 ;
"RTN","IBDE3",32,0)
ADD ;adds a block to the work space
"RTN","IBDE3",33,0)
 N OLDBLOCK,NEWBLOCK
"RTN","IBDE3",34,0)
 D FULL^VALM1
"RTN","IBDE3",35,0)
 S VALMBCK="R"
"RTN","IBDE3",36,0)
 S OLDBLOCK=$$SELECT Q:'OLDBLOCK
"RTN","IBDE3",37,0)
 S NEWBLOCK=$$COPYBLK^IBDFU2(OLDBLOCK,"",357.1,358.1,"","",1)
"RTN","IBDE3",38,0)
 I NEWBLOCK K DIE,DR,DA S DIE="^IBE(358.1,",DA=NEWBLOCK,DR="1;" D ^DIE K DIE,DR,DA
"RTN","IBDE3",39,0)
 D IDXBLKS
"RTN","IBDE3",40,0)
 Q
"RTN","IBDE3",41,0)
 ;
"RTN","IBDE3",42,0)
DELETE ;deletes a block from the work space
"RTN","IBDE3",43,0)
 N PICK,FORM,IBTKBLK
"RTN","IBDE3",44,0)
 S IBTKBLK=1 ;can't delete tk blocks unless IBTKBLK
"RTN","IBDE3",45,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","IBDE3",46,0)
 S PICK="" F  S PICK=$O(VALMY(PICK)) Q:'PICK  S BLOCK=+$G(@VALMAR@("IDX",PICK,PICK)) I BLOCK,$$RUSURE^IBDFU5($P($G(^IBE(358.1,BLOCK,0)),"^")) D DLTBLK^IBDFU3(BLOCK,"",358.1)
"RTN","IBDE3",47,0)
 S VALMBCK="R"
"RTN","IBDE3",48,0)
 D IDXBLKS
"RTN","IBDE3",49,0)
 Q
"RTN","IBDE3",50,0)
EDIT ;allows the export notes of a block to be edited
"RTN","IBDE3",51,0)
 N PICK,BLOCK
"RTN","IBDE3",52,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","IBDE3",53,0)
 D FULL^VALM1
"RTN","IBDE3",54,0)
 S PICK="" F  S PICK=$O(VALMY(PICK)) Q:'PICK  S BLOCK=+$G(@VALMAR@("IDX",PICK,PICK)) D:BLOCK
"RTN","IBDE3",55,0)
 .K DIE,DR,DA S DIE="^IBE(358.1,",DR="1;",DA=BLOCK D ^DIE K DIE,DA,DR
"RTN","IBDE3",56,0)
 S VALMBCK="R"
"RTN","IBDE3",57,0)
 D IDXBLKS
"RTN","IBDE3",58,0)
 Q
"RTN","IBDE3",59,0)
IMPORT ;allows the user to pick a block from the imp/exp files, then import it
"RTN","IBDE3",60,0)
 N PICK,BLOCK,NEWBLOCK,IBTKBLK,NAME
"RTN","IBDE3",61,0)
 S IBTKBLK=1
"RTN","IBDE3",62,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","IBDE3",63,0)
 D FULL^VALM1
"RTN","IBDE3",64,0)
 S PICK="" F  S PICK=$O(VALMY(PICK)) Q:'PICK  S BLOCK=+$G(@VALMAR@("IDX",PICK,PICK)) D:BLOCK
"RTN","IBDE3",65,0)
 .S NAME=$$NEWNAME($P($G(^IBE(358.1,BLOCK,0)),"^"))
"RTN","IBDE3",66,0)
 .Q:NAME=""
"RTN","IBDE3",67,0)
 .S NEWBLOCK=$$COPYBLK^IBDFU2(BLOCK,$$TKFORM^IBDFU2C,358.1,357.1,"","",$$TKORDER^IBDF13,NAME)
"RTN","IBDE3",68,0)
 .D:$G(NEWBLOCK) DLTBLK^IBDFU3(BLOCK,"",358.1)
"RTN","IBDE3",69,0)
 S VALMBCK="R"
"RTN","IBDE3",70,0)
 D IDXBLKS
"RTN","IBDE3",71,0)
 D UPDATE^IBDECLN(1) ;clean up qualifiers (with messages)
"RTN","IBDE3",72,0)
 Q
"RTN","IBDE3",73,0)
VIEW ;allows the export notes of a form to be edited
"RTN","IBDE3",74,0)
 N PICK,BLOCK,IBARY,IBHDRRTN
"RTN","IBDE3",75,0)
 D EN^VALM2($G(XQORNOD(0)),"S")
"RTN","IBDE3",76,0)
 S PICK="" F  S PICK=$O(VALMY(PICK)) Q:'PICK  S BLOCK=+$G(@VALMAR@("IDX",PICK,PICK)) D
"RTN","IBDE3",77,0)
 .S IBHDRRTN="D VIEWHDR^IBDE3"
"RTN","IBDE3",78,0)
 .S IBARY="^IBE(358.1,"_BLOCK_",1)"
"RTN","IBDE3",79,0)
 .D EN^VALM("IBDE TEXT DISPLAY")
"RTN","IBDE3",80,0)
 S VALMBCK="R"
"RTN","IBDE3",81,0)
 Q
"RTN","IBDE3",82,0)
VIEWHDR ;
"RTN","IBDE3",83,0)
 S VALMHDR(1)="Export Notes For "_$P($G(^IBE(358.1,BLOCK,0)),"^")_" Block"
"RTN","IBDE3",84,0)
 Q
"RTN","IBDE3",85,0)
SELECT() ;allows the user to select a form, then a block from it
"RTN","IBDE3",86,0)
 N IBFORM,IBBLK
"RTN","IBDE3",87,0)
 S (IBFORM,IBBLK)=""
"RTN","IBDE3",88,0)
 K DIR S DIR(0)="S^1:TOOLKIT BLOCK;2:BLOCK FROM A TOOLKIT FORM;3:BLOCK FROM A FORM NOT IN THE TOOLKIT"
"RTN","IBDE3",89,0)
 S DIR("A")="What type of block do you want to export?"
"RTN","IBDE3",90,0)
 D ^DIR K DIR
"RTN","IBDE3",91,0)
 Q:(Y=-1)!($D(DIRUT)) ""
"RTN","IBDE3",92,0)
 I Y=1 D
"RTN","IBDE3",93,0)
 .S IBFORM=$$TKFORM^IBDFU2C
"RTN","IBDE3",94,0)
 E  S IBFORM=$$SLCTFORM^IBDFU4($S(Y=2:1,1:0))
"RTN","IBDE3",95,0)
 I IBFORM D
"RTN","IBDE3",96,0)
 .W !!,"NOW CHOOSE THE BLOCK TO COPY!",!
"RTN","IBDE3",97,0)
 .S IBBLK=$$SLCTBLK^IBDFU8(IBFORM)
"RTN","IBDE3",98,0)
 Q IBBLK
"RTN","IBDE3",99,0)
 ;
"RTN","IBDE3",100,0)
NEWNAME(OLDNAME) ;asks the user to select uniqued toolkit block name
"RTN","IBDE3",101,0)
 ;returns "" if unsuccessfull, else the blk name
"RTN","IBDE3",102,0)
 ;shows OLDNAME as the default if defined
"RTN","IBDE3",103,0)
 ;
"RTN","IBDE3",104,0)
 N NAME,FOUND,TKBLK,ORDER S NAME=""
"RTN","IBDE3",105,0)
 K DIR S DIR(0)="357.1,.01A",DIR("A")="New Toolkit Block Name: ",DIR("?")="Enter a unique name for the toolkit block up to 30 characters"
"RTN","IBDE3",106,0)
 S DIR("B")="" I $G(OLDNAME)'="" S DIR("B")=OLDNAME
"RTN","IBDE3",107,0)
 F  D  Q:'FOUND
"RTN","IBDE3",108,0)
 .S FOUND=0
"RTN","IBDE3",109,0)
 .D ^DIR I $D(DIRUT) S Y="" Q
"RTN","IBDE3",110,0)
 .S ORDER=0 F  S ORDER=$O(^IBE(357.1,"D",ORDER)) Q:ORDER=""  S TKBLK=$O(^IBE(357.1,"D",ORDER,0)) Q:'TKBLK   I $P($G(^IBE(357.1,TKBLK,0)),"^")=Y W !,"There is already a toolkit block with that name! The name should be unique." S FOUND=1 Q
"RTN","IBDE3",111,0)
 S:'FOUND NAME=Y
"RTN","IBDE3",112,0)
 K DIR
"RTN","IBDE3",113,0)
 Q NAME
"RTN","IBDECLN")
0^3^B89740362
"RTN","IBDECLN",1,0)
IBDECLN ;ALB/AAS - Clean up Data Qualifiers and Package interfaces ; 23-JUN-97
"RTN","IBDECLN",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**14**;APR 24, 1997
"RTN","IBDECLN",3,0)
 ;
"RTN","IBDECLN",4,0)
UPDATE(TALK) ; -- update both qualifiers and package interface file
"RTN","IBDECLN",5,0)
 ; -- do the qualifiers first to rename bad ones
"RTN","IBDECLN",6,0)
 ;
"RTN","IBDECLN",7,0)
 ; -- input Talk, 1=send messages through mes^xpdutl (default is 1)
"RTN","IBDECLN",8,0)
 ;                0=no messages
"RTN","IBDECLN",9,0)
 ;
"RTN","IBDECLN",10,0)
 S:$G(TALK)="" TALK=1
"RTN","IBDECLN",11,0)
 S TALK=$TR(TALK,"yesnomaybe","YESNOMAYBE")
"RTN","IBDECLN",12,0)
 S:$G(TALK)="YES" TALK=1
"RTN","IBDECLN",13,0)
 S TALK=+$G(TALK)
"RTN","IBDECLN",14,0)
 D CLNQLF(TALK),CLNPI(TALK)
"RTN","IBDECLN",15,0)
 D CLNSEL^IBDECLN1(TALK)
"RTN","IBDECLN",16,0)
 Q
"RTN","IBDECLN",17,0)
 ;
"RTN","IBDECLN",18,0)
CLNPI(TALK) ;
"RTN","IBDECLN",19,0)
 ; -- update/delete Allowable Qualifiers in Package Interface file
"RTN","IBDECLN",20,0)
 N I,J,K,L,X,Y,CNT,CNT1,CNT2,CNT3,CNT4,ENTRY,PI,QLF,NODE,FILE
"RTN","IBDECLN",21,0)
 N IEN,PROBLEM,QLFNODE,DATA,QLFNUM,NNODE,ONODE,NLEN,TOT
"RTN","IBDECLN",22,0)
 K ^TMP($J,"IBDE CLN")
"RTN","IBDECLN",23,0)
 S (CNT,CNT1,CNT2,CNT3,CNT4)=0
"RTN","IBDECLN",24,0)
 ;
"RTN","IBDECLN",25,0)
 S (X(1),X(3))="  "
"RTN","IBDECLN",26,0)
 S X(2)=">>> Now checking the PACKAGE INTERFACE file for inappropriate data qualifiers."
"RTN","IBDECLN",27,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",28,0)
 ;
"RTN","IBDECLN",29,0)
 ; -- build array of input package interfaces and qualifiers
"RTN","IBDECLN",30,0)
 ;    sent out with version 3.0
"RTN","IBDECLN",31,0)
 S I=0
"RTN","IBDECLN",32,0)
 F I=1:1 S ENTRY=$P($T(OUTPUT+I^IBDECLN2),";;",2) Q:ENTRY=""  D
"RTN","IBDECLN",33,0)
 . I $E(ENTRY)="~" Q
"RTN","IBDECLN",34,0)
 . I $E(ENTRY)'="+" D  Q
"RTN","IBDECLN",35,0)
 .. S PI=$E($P(ENTRY,":",1),1,30)
"RTN","IBDECLN",36,0)
 .. S DATA=$P(ENTRY,":",2)
"RTN","IBDECLN",37,0)
 .. S ^TMP($J,"IBDE CLN",PI,12)=DATA
"RTN","IBDECLN",38,0)
 . I $E(ENTRY)="+" D  Q
"RTN","IBDECLN",39,0)
 .. S QLF=$E($P(ENTRY,":",1),2,99)
"RTN","IBDECLN",40,0)
 .. S QLFNUM=+$O(^IBD(357.98,"B",$E(QLF,1,30),0))
"RTN","IBDECLN",41,0)
 .. Q:QLFNUM=0
"RTN","IBDECLN",42,0)
 .. S DATA=QLFNUM_$P(ENTRY,":",2)
"RTN","IBDECLN",43,0)
 .. S ^TMP($J,"IBDE CLN",PI,"QLF",QLF)=DATA
"RTN","IBDECLN",44,0)
 ;
"RTN","IBDECLN",45,0)
 ; -- now go through the supported list of Package Interface entries
"RTN","IBDECLN",46,0)
 ;    and make sure that the main PCE DIM data is correct (node 12)
"RTN","IBDECLN",47,0)
 ;
"RTN","IBDECLN",48,0)
 S PI=""
"RTN","IBDECLN",49,0)
 F  S PI=$O(^TMP($J,"IBDE CLN",PI)) Q:PI=""  D
"RTN","IBDECLN",50,0)
 . S (J,K)=0
"RTN","IBDECLN",51,0)
 . F  S J=$O(^IBE(357.6,"B",PI,J)) Q:'J  D
"RTN","IBDECLN",52,0)
 .. S NNODE=$G(^TMP($J,"IBDE CLN",PI,12))
"RTN","IBDECLN",53,0)
 .. Q:NNODE=""
"RTN","IBDECLN",54,0)
 .. S ONODE=$G(^IBE(357.6,J,12))
"RTN","IBDECLN",55,0)
 .. S NLEN=$L(NNODE)
"RTN","IBDECLN",56,0)
 .. I $E(ONODE,1,NLEN)'=NNODE D DEL(TALK,PI,J,K,20,NNODE,ONODE)
"RTN","IBDECLN",57,0)
 ;
"RTN","IBDECLN",58,0)
 ; -- now go through the qualifiers for the package interface
"RTN","IBDECLN",59,0)
 ;    and make sure that only supported qualifiers are listed, 
"RTN","IBDECLN",60,0)
 ;    no duplicates, and that the data is correct.
"RTN","IBDECLN",61,0)
 ;
"RTN","IBDECLN",62,0)
 S PI=""
"RTN","IBDECLN",63,0)
 S (CNT1,CNT3)=0
"RTN","IBDECLN",64,0)
 F  S PI=$O(^TMP($J,"IBDE CLN",PI)) Q:PI=""  D
"RTN","IBDECLN",65,0)
 . S (J,K)=0
"RTN","IBDECLN",66,0)
 . F  S J=$O(^IBE(357.6,"B",PI,J)) Q:'J  D
"RTN","IBDECLN",67,0)
 .. N CNT1,ONODE,NNODE,PIQLF
"RTN","IBDECLN",68,0)
 .. S K=0
"RTN","IBDECLN",69,0)
 .. F  S K=$O(^IBE(357.6,J,13,K)) Q:K=""  D
"RTN","IBDECLN",70,0)
 ... ;
"RTN","IBDECLN",71,0)
 ... S ONODE=$G(^IBE(357.6,J,13,K,0)) Q:ONODE=""
"RTN","IBDECLN",72,0)
 ... S FILE=$P($P(ONODE,"^",1),";",2)
"RTN","IBDECLN",73,0)
 ... Q:FILE'="IBD(357.98,"
"RTN","IBDECLN",74,0)
 ... S IEN=+ONODE
"RTN","IBDECLN",75,0)
 ... S QLF=$P($G(^IBD(357.98,IEN,0),"UNKNOWN"),"^",1)
"RTN","IBDECLN",76,0)
 ... S PIQLF(QLF)=""
"RTN","IBDECLN",77,0)
 ... ;
"RTN","IBDECLN",78,0)
 ... ; -- now if there is a duplicate, delete the duplicate
"RTN","IBDECLN",79,0)
 ... S NNODE=$G(^TMP($J,"IBDE CLN",PI,"QLF",QLF))
"RTN","IBDECLN",80,0)
 ... I NNODE="" D DEL(TALK,PI,J,K,1) Q
"RTN","IBDECLN",81,0)
 ... S CNT1(PI,QLF)=$G(CNT1(PI,QLF))+1
"RTN","IBDECLN",82,0)
 ... I CNT1(PI,QLF)>1 D DEL(TALK,PI,J,K,2) Q
"RTN","IBDECLN",83,0)
 ... ;
"RTN","IBDECLN",84,0)
 ... S NLEN=$L(NNODE)
"RTN","IBDECLN",85,0)
 ... I $E(ONODE,1,NLEN)'=NNODE D DEL(TALK,PI,J,K,21,NNODE,ONODE)
"RTN","IBDECLN",86,0)
 .. ; --check to see if all allowable qualifiers exist if not, add
"RTN","IBDECLN",87,0)
 .. S QLF="" F  S QLF=$O(^TMP($J,"IBDE CLN",PI,"QLF",QLF)) Q:QLF']""  D
"RTN","IBDECLN",88,0)
 ... N FILE,DATA,IBDFDA,QLFNODE,NIEN,ERROR
"RTN","IBDECLN",89,0)
 ... Q:$D(PIQLF(QLF))
"RTN","IBDECLN",90,0)
 ... S FILE=357.613,IBDFDA(1)=J
"RTN","IBDECLN",91,0)
 ... S QLFNODE=$G(^TMP($J,"IBDE CLN",PI,"QLF",QLF))
"RTN","IBDECLN",92,0)
 ... S DATA(.01)=$P(QLFNODE,"^")
"RTN","IBDECLN",93,0)
 ... Q:DATA(.01)=""
"RTN","IBDECLN",94,0)
 ... S NIEN=$$ADD^IBDFDBS(FILE,.IBDFDA,.DATA,.ERROR)
"RTN","IBDECLN",95,0)
 ... D:+NIEN>0 DEL(TALK,PI,J,NIEN,22,QLFNODE)
"RTN","IBDECLN",96,0)
 ;
"RTN","IBDECLN",97,0)
 G:'TALK END
"RTN","IBDECLN",98,0)
 ;
"RTN","IBDECLN",99,0)
 ; -- Find out if Problem is in PCE DIM NODE in 357.6
"RTN","IBDECLN",100,0)
 ;    if so, then user is warned to contact customer service
"RTN","IBDECLN",101,0)
 ;    to be manually corrected
"RTN","IBDECLN",102,0)
 D PROBLEM^IBDECLN1(.PROBLEM)
"RTN","IBDECLN",103,0)
 I PROBLEM>0 D
"RTN","IBDECLN",104,0)
 . S X(1)="  ",X(2)=" >> WARNING: The following interfaces use the PROBLEM node to transmit data"
"RTN","IBDECLN",105,0)
 . D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",106,0)
 . S I=0 ;skip the zero node, contains PI stuff
"RTN","IBDECLN",107,0)
 . F  S I=$O(PROBLEM(I)) Q:I=""  D:TALK MES^XPDUTL("    Package Interface "_PROBLEM(I))
"RTN","IBDECLN",108,0)
 . D:TALK MES^XPDUTL("    Contact Customer Support for assistance updating the package interface file.")
"RTN","IBDECLN",109,0)
 ;
"RTN","IBDECLN",110,0)
 ;
"RTN","IBDECLN",111,0)
SUM ; -- summary of package interface file check
"RTN","IBDECLN",112,0)
 K X
"RTN","IBDECLN",113,0)
 S TOT=2
"RTN","IBDECLN",114,0)
 S X(1)=" "
"RTN","IBDECLN",115,0)
 S X(2)=" >> Summary of the Package Interface Check:"
"RTN","IBDECLN",116,0)
 ;
"RTN","IBDECLN",117,0)
 I CNT<1,CNT2<1,CNT3<1,CNT4<1 D
"RTN","IBDECLN",118,0)
 . S TOT=TOT+1,X(TOT)="    No required changes were found."
"RTN","IBDECLN",119,0)
 ;
"RTN","IBDECLN",120,0)
 I CNT>0 D
"RTN","IBDECLN",121,0)
 . S TOT=TOT+1
"RTN","IBDECLN",122,0)
 . S X(TOT)="    A total of "_CNT_" qualifier"_$S(CNT=1:" was",1:"s were")_" removed from Package Interface Entries."
"RTN","IBDECLN",123,0)
 ;
"RTN","IBDECLN",124,0)
 ;
"RTN","IBDECLN",125,0)
 I CNT2>0 D
"RTN","IBDECLN",126,0)
 . S TOT=TOT+1
"RTN","IBDECLN",127,0)
 . S X(TOT)="    The PCE DIM data fields for "_CNT2_" Package Interface"_$S(CNT2=1:" was",1:"s were")_" updated."
"RTN","IBDECLN",128,0)
 ;
"RTN","IBDECLN",129,0)
 I CNT3>0 D
"RTN","IBDECLN",130,0)
 . S TOT=TOT+1
"RTN","IBDECLN",131,0)
 . S X(TOT)="    The PCE DIM data fields for "_CNT3_" Allowable Qualifier"_$S(CNT3=1:" was",1:"s were")_" updated."
"RTN","IBDECLN",132,0)
 ;
"RTN","IBDECLN",133,0)
 I CNT4>0 D
"RTN","IBDECLN",134,0)
 . S TOT=TOT+1
"RTN","IBDECLN",135,0)
 . S X(TOT)="    A total of "_CNT4_" Allowable Qualifier"_$S(CNT4=1:" was",1:"s were")_" added."
"RTN","IBDECLN",136,0)
 I PROBLEM>0 D
"RTN","IBDECLN",137,0)
 . S TOT=TOT+1,X(TOT)="    Contact Customer Support for assistance updating the package interface file."
"RTN","IBDECLN",138,0)
 ;
"RTN","IBDECLN",139,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",140,0)
 ;
"RTN","IBDECLN",141,0)
END K ^TMP($J,"IBDE CLN")
"RTN","IBDECLN",142,0)
 Q
"RTN","IBDECLN",143,0)
 ;
"RTN","IBDECLN",144,0)
DEL(TALK,PI,J,K,REASON,NNODE,ONODE) ; -- delete inappropriate entries
"RTN","IBDECLN",145,0)
 ;
"RTN","IBDECLN",146,0)
 ;  reasons for deletion or warnings
"RTN","IBDECLN",147,0)
 ;  1- invalid qualifier
"RTN","IBDECLN",148,0)
 ;  2- duplicate qualifier
"RTN","IBDECLN",149,0)
 ;  9- bad qualifier, not deleted, user warned
"RTN","IBDECLN",150,0)
 ;  20-node ^IBE(357.6,IEN,12) not correct
"RTN","IBDECLN",151,0)
 ;  21-node ^IBE(357.6,IEN,13,allow qual,0) not correct
"RTN","IBDECLN",152,0)
 ;
"RTN","IBDECLN",153,0)
 N I,X,Y,DA,DIC,DIK
"RTN","IBDECLN",154,0)
 I (REASON=1!(REASON=2)) S CNT=CNT+1
"RTN","IBDECLN",155,0)
 S CNT(PI)=+$G(CNT(PI))+1
"RTN","IBDECLN",156,0)
 I CNT(PI)=1 D
"RTN","IBDECLN",157,0)
 . S X(1)=" ",X(2)="    The Package Interface "_PI_" had: "
"RTN","IBDECLN",158,0)
 . D:TALK MES^XPDUTL(.X) N X
"RTN","IBDECLN",159,0)
 D:(TALK&(REASON=1)) MES^XPDUTL("       an invalid qualifier of "_QLF_" deleted.")
"RTN","IBDECLN",160,0)
 D:(TALK&(REASON=2)) MES^XPDUTL("       a duplicate qualifier of "_QLF_" deleted.")
"RTN","IBDECLN",161,0)
 I TALK&(REASON=9) D MES^XPDUTL("       a bad qualifier of "_QLF_" not deleted, PCE DIM NODE='PROBLEM'") Q  ;don't delete, save for manual update
"RTN","IBDECLN",162,0)
 ;
"RTN","IBDECLN",163,0)
 I REASON<10 S DA=K,DA(1)=J,DIK="^IBE(357.6,"_DA(1)_",13," D ^DIK Q
"RTN","IBDECLN",164,0)
 ;
"RTN","IBDECLN",165,0)
 I TALK&(REASON=20) D
"RTN","IBDECLN",166,0)
 . N X
"RTN","IBDECLN",167,0)
 . S X(1)="       The PCE Device Interface Data Updated."
"RTN","IBDECLN",168,0)
 . S X(2)="          Old Data: "_ONODE
"RTN","IBDECLN",169,0)
 . S X(3)="          New Data: "_NNODE
"RTN","IBDECLN",170,0)
 . D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",171,0)
 . S CNT2=CNT2+1
"RTN","IBDECLN",172,0)
 . S ^IBE(357.6,J,12)=NNODE
"RTN","IBDECLN",173,0)
 ;
"RTN","IBDECLN",174,0)
 I TALK&(REASON=21) D
"RTN","IBDECLN",175,0)
 . N X
"RTN","IBDECLN",176,0)
 . S X(1)="       The PCE Device Interface Data for the Data Qualifier "_QLF_" was updated."
"RTN","IBDECLN",177,0)
 . S X(2)="          Old Data: "_ONODE
"RTN","IBDECLN",178,0)
 . S X(3)="          New Data: "_NNODE
"RTN","IBDECLN",179,0)
 . D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",180,0)
 . S CNT3=CNT3+1
"RTN","IBDECLN",181,0)
 . S ^IBE(357.6,J,13,K,0)=NNODE
"RTN","IBDECLN",182,0)
 ;
"RTN","IBDECLN",183,0)
 I TALK&(REASON=22) D
"RTN","IBDECLN",184,0)
 . S CNT4=CNT4+1
"RTN","IBDECLN",185,0)
 . D MES^XPDUTL("       "_QLF_" was added.")
"RTN","IBDECLN",186,0)
 . S ^IBE(357.6,J,13,K,0)=NNODE
"RTN","IBDECLN",187,0)
 Q
"RTN","IBDECLN",188,0)
 ;
"RTN","IBDECLN",189,0)
CLNQLF(TALK) ;
"RTN","IBDECLN",190,0)
 ; -- update codes in AICS DATA QUALIFIERS file (357.98)
"RTN","IBDECLN",191,0)
 ;    according to version 3.0
"RTN","IBDECLN",192,0)
 N I,J,K,L,X,Y,CNT,CNT1,CNT2,CNT3,ENTRY,NAME,CODE,NEWNAME,IBQUIT,DIC,DIE,DIK,DA,DR
"RTN","IBDECLN",193,0)
 S (CNT,CNT1)=0,CNT2=1
"RTN","IBDECLN",194,0)
 ;
"RTN","IBDECLN",195,0)
 S (X(1),X(3))="  "
"RTN","IBDECLN",196,0)
 S X(2)=">>> Now checking the AICS DATA QUALIFIERS file for inappropriate entries."
"RTN","IBDECLN",197,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",198,0)
 ;
"RTN","IBDECLN",199,0)
 ; -- Go through AICS Data Qualifiers and set up correctly
"RTN","IBDECLN",200,0)
 F I=1:1:28 S ENTRY=$P($T(DATA+I),";;",2) Q:ENTRY=""  D
"RTN","IBDECLN",201,0)
 . S CNT=CNT+1
"RTN","IBDECLN",202,0)
 . S NAME=$P(ENTRY,"^",1)
"RTN","IBDECLN",203,0)
 . S CODE=$P(ENTRY,"^",2)
"RTN","IBDECLN",204,0)
 . S J=""
"RTN","IBDECLN",205,0)
 . F  S J=$O(^IBD(357.98,"B",NAME,J)) Q:J=""  D
"RTN","IBDECLN",206,0)
 .. I $P($G(^IBD(357.98,J,0)),"^",2)=CODE Q
"RTN","IBDECLN",207,0)
 .. ;
"RTN","IBDECLN",208,0)
 .. ; -- don't change Active=1 and Inactive=0 if Problem
"RTN","IBDECLN",209,0)
 .. I $P($G(^IBE(357.6,J,12)),"^",1)="PROBLEM",NAME="ACTIVE"!(NAME="INACTIVE") D  Q:IBQUIT
"RTN","IBDECLN",210,0)
 ... S IBQUIT=0
"RTN","IBDECLN",211,0)
 ... I NAME="ACTIVE",($P($G(^IBD(357.98,J,0)),"^",2)=1) D
"RTN","IBDECLN",212,0)
 ....S IBQUIT=1
"RTN","IBDECLN",213,0)
 ....D MES^XPDUTL("    The qualifier ACTIVE with a code of 1 needs to be changed but is used.")
"RTN","IBDECLN",214,0)
 ... I NAME="INACTIVE",($P($G(^IBD(357.98,J,0)),"^",2)=0) D
"RTN","IBDECLN",215,0)
 ....S IBQUIT=1
"RTN","IBDECLN",216,0)
 ....D MES^XPDUTL("    The qualifier of INACTIVE with a code of 0 needs to be changed but is used.")
"RTN","IBDECLN",217,0)
 ..
"RTN","IBDECLN",218,0)
 .. ; -- keep track of what was changed
"RTN","IBDECLN",219,0)
 .. S CNT(NAME)=$G(CNT(NAME))+1
"RTN","IBDECLN",220,0)
 .. S CNT1=CNT1+1,CNT2=CNT2+1
"RTN","IBDECLN",221,0)
 .. S CNT3(CNT2)="    The Entry "_$G(^IBD(357.98,J,0))_" changed to ZZBAD-"_ENTRY
"RTN","IBDECLN",222,0)
 .. ;
"RTN","IBDECLN",223,0)
 .. ; -- see if it's used
"RTN","IBDECLN",224,0)
 .. S K=0 F  S K=$O(^IBE(357.6,K)) Q:'K  I $D(^IBE(357.6,K,13)) D
"RTN","IBDECLN",225,0)
 ... S L=0 F  S L=$O(^IBE(357.6,K,13,L)) Q:'L  I $P($G(^IBE(357.6,K,13,L,0)),"^",1)=(J_";IBD(357.98,") D
"RTN","IBDECLN",226,0)
 .... S CNT2=CNT2+1
"RTN","IBDECLN",227,0)
 .... S CNT3(CNT2)="       and was used by Package File entry "_$P($G(^IBE(357.6,K,0)),"^",1)
"RTN","IBDECLN",228,0)
 .. ;
"RTN","IBDECLN",229,0)
 .. ; -- finally, make the change
"RTN","IBDECLN",230,0)
 .. S NEWNAME=$E("ZZBAD-"_$P(^IBD(357.98,J,0),"^",1),1,30)
"RTN","IBDECLN",231,0)
 .. S DIE="^IBD(357.98,",DA=J,DR=".01////^S X=NEWNAME;.02////^S X=CODE"
"RTN","IBDECLN",232,0)
 .. N I,J,K,L,X,Y D ^DIE K DIE,DA,DR
"RTN","IBDECLN",233,0)
 ;
"RTN","IBDECLN",234,0)
 ;
"RTN","IBDECLN",235,0)
 ; -- reindex the file
"RTN","IBDECLN",236,0)
 S DIK="^IBD(357.98,"
"RTN","IBDECLN",237,0)
 D IXALL^DIK
"RTN","IBDECLN",238,0)
 ;
"RTN","IBDECLN",239,0)
 ; summary of the aics data qualifiers check
"RTN","IBDECLN",240,0)
 ;
"RTN","IBDECLN",241,0)
 K X
"RTN","IBDECLN",242,0)
 S X(1)=" ",X(2)=" >> Summary of the AICS Data Qualifiers Check:"
"RTN","IBDECLN",243,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",244,0)
 K X
"RTN","IBDECLN",245,0)
 I $G(CNT1)>0 M X=CNT3 S X(1)="    The number of changes made was "_CNT1
"RTN","IBDECLN",246,0)
 I CNT1=0 S X(1)="    No required changes were found.",X(2)=" "
"RTN","IBDECLN",247,0)
 I CNT1>1 S (X(CNT2+1),X(CNT2+3))=" ",X(CNT2+2)=" >> Done updating the AICS DATA QUALIFIERS file"
"RTN","IBDECLN",248,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",249,0)
 Q
"RTN","IBDECLN",250,0)
 ;
"RTN","IBDECLN",251,0)
DATA ;;
"RTN","IBDECLN",252,0)
 ;;NONE APPLICABLE^ 
"RTN","IBDECLN",253,0)
 ;;PRIMARY^P^P
"RTN","IBDECLN",254,0)
 ;;SECONDARY^S^S
"RTN","IBDECLN",255,0)
 ;;ACTIVE^A^A
"RTN","IBDECLN",256,0)
 ;;INACTIVE^I^I
"RTN","IBDECLN",257,0)
 ;;HISTORICAL^H
"RTN","IBDECLN",258,0)
 ;;ADD TO PROBLEM LIST^1^ADD
"RTN","IBDECLN",259,0)
 ;;SERVICE CONNECTED^1^SC
"RTN","IBDECLN",260,0)
 ;;AGENT ORANGE RELATED^1^AO
"RTN","IBDECLN",261,0)
 ;;IONIZING RADIATION RELATED^1^IR
"RTN","IBDECLN",262,0)
 ;;ENVIRONMENTAL CONTAMINANTS RELATED^1^E
"RTN","IBDECLN",263,0)
 ;;ABNORMAL RESULT^A^ABNORM
"RTN","IBDECLN",264,0)
 ;;NORMAL RESULT^N^NORM
"RTN","IBDECLN",265,0)
 ;;POOR UNDERSTANDING^1^POOR
"RTN","IBDECLN",266,0)
 ;;FAIR UNDERSTANDING^2^FAIR
"RTN","IBDECLN",267,0)
 ;;GOOD UNDERSTANDING^3^GOOD
"RTN","IBDECLN",268,0)
 ;;UNDERSTANDING NOT ASSESSED^4^N/A
"RTN","IBDECLN",269,0)
 ;;PATIENT ED REFUSED^5^REFUSED
"RTN","IBDECLN",270,0)
 ;;MINIMAL SEVERITY^M^MINIMAL
"RTN","IBDECLN",271,0)
 ;;MODERATE SEVERITY^MO^MODERATE
"RTN","IBDECLN",272,0)
 ;;HEAVY SEVERITY^H^SEVERE
"RTN","IBDECLN",273,0)
 ;;YES^1^YES
"RTN","IBDECLN",274,0)
 ;;NO^0^NO
"RTN","IBDECLN",275,0)
 ;;CONTRAINDICATED^1^CONTRA.
"RTN","IBDECLN",276,0)
 ;;GIVEN^0^GIV
"RTN","IBDECLN",277,0)
 ;;REFUSED^1^REFUSED
"RTN","IBDECLN",278,0)
 ;;NON-SERVICE CONNECTED^0^NSC
"RTN","IBDECLN",279,0)
 ;;
"RTN","IBDECLN1")
0^4^B17426688
"RTN","IBDECLN1",1,0)
IBDECLN1 ;ALB/AAS - Clean up Data Qualifiers and Package interfaces ; 23-JUN-97
"RTN","IBDECLN1",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**14**;APR 24, 1997
"RTN","IBDECLN1",3,0)
 ;
"RTN","IBDECLN1",4,0)
PROBLEM(PROBLEM) ; -- Find out if Problem is in PCE DIM NODE in 357.6
"RTN","IBDECLN1",5,0)
 ;
"RTN","IBDECLN1",6,0)
 ;   pce dim node should not equal problem
"RTN","IBDECLN1",7,0)
 N I,J
"RTN","IBDECLN1",8,0)
 S I=0,PROBLEM=0
"RTN","IBDECLN1",9,0)
 F  S I=$O(^IBE(357.6,I)) Q:'I  D
"RTN","IBDECLN1",10,0)
 . I $P($G(^IBE(357.6,I,12)),"^",1)="PROBLEM" D
"RTN","IBDECLN1",11,0)
 .. S PROBLEM=PROBLEM+1
"RTN","IBDECLN1",12,0)
 .. S PROBLEM(0,I)=""
"RTN","IBDECLN1",13,0)
 .. S PROBLEM(PROBLEM)=$P($G(^IBE(357.6,I,0)),"^",1)_" uses PROBLEM as the PCE DIM NODE"
"RTN","IBDECLN1",14,0)
 . S J=0
"RTN","IBDECLN1",15,0)
 . F  S J=$O(^IBE(357.6,I,13,J)) Q:'J  D
"RTN","IBDECLN1",16,0)
 .. I $P($G(^IBE(357.6,I,13,J,0)),"^",4)="PROBLEM" D
"RTN","IBDECLN1",17,0)
 ... S PROBLEM=PROBLEM+1
"RTN","IBDECLN1",18,0)
 ... S PROBLEM(0,I)=""
"RTN","IBDECLN1",19,0)
 ... S PROBLEM(PROBLEM)=$P($G(^IBE(357.6,I,0)),"^",1)_" uses PROBLEM as the PCE DIM NODE in the Allow. Qual. Multiple."
"RTN","IBDECLN1",20,0)
 ;
"RTN","IBDECLN1",21,0)
 Q
"RTN","IBDECLN1",22,0)
 ;
"RTN","IBDECLN1",23,0)
CLNSEL(TALK) ; -- Clean up selection list entries
"RTN","IBDECLN1",24,0)
 ; -- should be run after running clnqlf, will update the zzbad pointers
"RTN","IBDECLN1",25,0)
 ;
"RTN","IBDECLN1",26,0)
 N I,J,K,L,X,Y,CNT,CNT1,CNT2,NAME,QLF,QLFNAM,PI,PINAM,PINPUT,REALQLF,REALNAM,PROBLEM,SELNAM,BLKNAM,IBQUIT,DIC,DIE,DIK,DA,DR,FRM,FRMNAM,FRMTYPE
"RTN","IBDECLN1",27,0)
 S (CNT,CNT1,CNT2)=0
"RTN","IBDECLN1",28,0)
 ;
"RTN","IBDECLN1",29,0)
 D:TALK MES^XPDUTL("  ")
"RTN","IBDECLN1",30,0)
 D:TALK MES^XPDUTL(">>> Now checking the SELECTION LIST file for inappropriate Data Qualifiers.")
"RTN","IBDECLN1",31,0)
 ;
"RTN","IBDECLN1",32,0)
 ; -- Find out if Problem is in PCE DIM NODE in 357.6
"RTN","IBDECLN1",33,0)
 D PROBLEM(.PROBLEM)
"RTN","IBDECLN1",34,0)
 ;
"RTN","IBDECLN1",35,0)
 ; -- go through selection list file look at data qualifiers in
"RTN","IBDECLN1",36,0)
 ;    subcolumn multiple fields
"RTN","IBDECLN1",37,0)
 S I=0
"RTN","IBDECLN1",38,0)
 F  S I=$O(^IBE(357.2,I)) Q:'I  D
"RTN","IBDECLN1",39,0)
 . S CNT=CNT+1
"RTN","IBDECLN1",40,0)
 . S SELNAM=$P($G(^IBE(357.2,I,0)),"^",1)
"RTN","IBDECLN1",41,0)
 . S BLKNAM=$P($G(^IBE(357.1,+$P($G(^IBE(357.2,I,0)),"^",2),0)),"^",1)
"RTN","IBDECLN1",42,0)
 . S FRM=+$P($G(^IBE(357.1,+$P($G(^IBE(357.2,I,0)),"^",2),0)),"^",2)
"RTN","IBDECLN1",43,0)
 . S FRMNAM=$P($G(^IBE(357,+FRM,0)),"^",1)
"RTN","IBDECLN1",44,0)
 . S FRMTYPE=$P($G(^IBE(357,+FRM,0)),"^",13)
"RTN","IBDECLN1",45,0)
 . S PI=+$P($G(^IBE(357.2,I,0)),"^",11)
"RTN","IBDECLN1",46,0)
 . S PINPUT=+$P($G(^IBE(357.6,PI,0)),"^",13)
"RTN","IBDECLN1",47,0)
 . S PINAM=$P($G(^IBE(357.6,+$P($G(^IBE(357.2,I,0)),"^",11),0)),"^",1)
"RTN","IBDECLN1",48,0)
 . ;
"RTN","IBDECLN1",49,0)
 . S J=0
"RTN","IBDECLN1",50,0)
 . F  S J=$O(^IBE(357.2,I,2,J)) Q:'J  D
"RTN","IBDECLN1",51,0)
 .. S QLF=+$P($G(^IBE(357.2,I,2,J,0)),"^",9)
"RTN","IBDECLN1",52,0)
 .. Q:'QLF
"RTN","IBDECLN1",53,0)
 .. S QLFNAM=$P($G(^IBD(357.98,QLF,0)),"^",1)
"RTN","IBDECLN1",54,0)
 .. ;
"RTN","IBDECLN1",55,0)
 .. Q:$E(QLFNAM,1,6)'="ZZBAD-"
"RTN","IBDECLN1",56,0)
 .. S CNT1=CNT1+1
"RTN","IBDECLN1",57,0)
 .. S REALNAM=$P(QLFNAM,"ZZBAD-",2)
"RTN","IBDECLN1",58,0)
 .. Q:REALNAM=""
"RTN","IBDECLN1",59,0)
 .. S REALQLF=+$O(^IBD(357.98,"B",REALNAM,0))
"RTN","IBDECLN1",60,0)
 .. Q:'REALQLF
"RTN","IBDECLN1",61,0)
 ..;
"RTN","IBDECLN1",62,0)
 ..; -- don't change if uses Problem node
"RTN","IBDECLN1",63,0)
 .. I PROBLEM>0 I $D(PROBLEM(0,PI))!($D(PROBLEM(0,PINPUT))) D  Q
"RTN","IBDECLN1",64,0)
 ... D MES^XPDUTL("  ")
"RTN","IBDECLN1",65,0)
 ... D MES^XPDUTL(" >> The selection list "_SELNAM_" not updated, PCE DIM node set to PROBLEM")
"RTN","IBDECLN1",66,0)
 ..
"RTN","IBDECLN1",67,0)
 ..; -- now update the selection list to the real qualifier
"RTN","IBDECLN1",68,0)
 .. S CNT2=CNT2+1
"RTN","IBDECLN1",69,0)
 .. S $P(^IBE(357.2,I,2,J,0),"^",9)=REALQLF
"RTN","IBDECLN1",70,0)
 ..;
"RTN","IBDECLN1",71,0)
 ..D:TALK MESSAGE
"RTN","IBDECLN1",72,0)
 ;
"RTN","IBDECLN1",73,0)
 ; -- write out summary
"RTN","IBDECLN1",74,0)
 K X
"RTN","IBDECLN1",75,0)
 S X(1)=" ",X(2)=" >> Summary of Selection List Check:"
"RTN","IBDECLN1",76,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN1",77,0)
 K X
"RTN","IBDECLN1",78,0)
 S X(1)=" "
"RTN","IBDECLN1",79,0)
 S X(2)=" >> A total of "_CNT_" selection list"_$S(CNT=1:" was",1:"s were")_" checked."
"RTN","IBDECLN1",80,0)
 I CNT1=0 S X(3)="    No problems were found."
"RTN","IBDECLN1",81,0)
 I CNT1>0 S X(3)="    A total of "_CNT1_" problem"_$S(CNT1=1:" was",1:"s were")_" found and "_CNT2_" were corrected."
"RTN","IBDECLN1",82,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN1",83,0)
 Q
"RTN","IBDECLN1",84,0)
 ;
"RTN","IBDECLN1",85,0)
MESSAGE ; -- write out what happened
"RTN","IBDECLN1",86,0)
 N K,X,CLIN,CLNLST
"RTN","IBDECLN1",87,0)
 S CLNLST=""
"RTN","IBDECLN1",88,0)
 S CLIN="^TMP(""CLST"",$J)"
"RTN","IBDECLN1",89,0)
 D CLINICS^IBDFU4(FRM,CLIN)
"RTN","IBDECLN1",90,0)
 S X(1)="  "
"RTN","IBDECLN1",91,0)
 S X(2)=">>> Qualifier problem in Encounter form "_FRMNAM
"RTN","IBDECLN1",92,0)
 I FRMTYPE S X(2)=X(2)_" Number "_FRMTYPE
"RTN","IBDECLN1",93,0)
 I @CLIN@(0)=0 S X(3)="    This form was not used by clinics"
"RTN","IBDECLN1",94,0)
 I @CLIN@(0)>0 D
"RTN","IBDECLN1",95,0)
 . S X(3)="    This form is used in the following clinics:"
"RTN","IBDECLN1",96,0)
 . S K=0,J=3 F  S K=$O(@CLIN@(K)) Q:K=""  S CLNLST=CLNLST_", "_K D
"RTN","IBDECLN1",97,0)
 . . Q:$L(CLNLST)>55
"RTN","IBDECLN1",98,0)
 . . S J=J+1,X(J)="        "_CLNLST
"RTN","IBDECLN1",99,0)
 . . S CLNLST=""
"RTN","IBDECLN1",100,0)
 S X(J+1)="       In the "_BLKNAM_" Block"
"RTN","IBDECLN1",101,0)
 S X(J+2)="       In the "_SELNAM_" Selection List"
"RTN","IBDECLN1",102,0)
 S X(J+3)="       the qualifier of "_QLFNAM_" Changed to "_REALNAM
"RTN","IBDECLN1",103,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN1",104,0)
 Q
"RTN","IBDECLN2")
0^5^B23293633
"RTN","IBDECLN2",1,0)
IBDECLN2 ;ALB/AAS - Clean up Data Qualifiers and Package interfaces ; 23-JUN-97
"RTN","IBDECLN2",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**14**;APR 24, 1997
"RTN","IBDECLN2",3,0)
 ;
"RTN","IBDECLN2",4,0)
 ; -- This routine contains critical data for Package Interface File
"RTN","IBDECLN2",5,0)
 ;    that is used in formatting the data for transmission to scanning
"RTN","IBDECLN2",6,0)
 ;    
"RTN","IBDECLN2",7,0)
 ;    Format
"RTN","IBDECLN2",8,0)
 ;       Line 1, Package Interface Node:  File 357.6   (node,piece)
"RTN","IBDECLN2",9,0)
 ;               p1: Package Interface Name            (0;1)
"RTN","IBDECLN2",10,0)
 ;               p2: PCE Interface Node                (12;1)
"RTN","IBDECLN2",11,0)
 ;               p3: Value Piece                       (12;2)
"RTN","IBDECLN2",12,0)
 ;               p4: Narrative Piece                   (12;3)
"RTN","IBDECLN2",13,0)
 ;               p5: Header Piece                      (12;4)
"RTN","IBDECLN2",14,0)
 ;               p6: Qualifier Piece                   (12;5)
"RTN","IBDECLN2",15,0)
 ;               p7: Quantity Piece                    (12;6)
"RTN","IBDECLN2",16,0)
 ;       Subsequent Lines, for data qualifiers (357.631)
"RTN","IBDECLN2",17,0)
 ;               p1: Allowable Qualifier Name          (0;1)
"RTN","IBDECLN2",18,0)
 ;               p3: Independent Mapping               (0;3)
"RTN","IBDECLN2",19,0)
 ;               p4: PCE Interface Node                (0;4)
"RTN","IBDECLN2",20,0)
 ;               p5: Value Piece                       (0;5)
"RTN","IBDECLN2",21,0)
 ;               p7: Header Piece                      (0;7)
"RTN","IBDECLN2",22,0)
 ;               p8: Qualifier Piece                   (0;8)
"RTN","IBDECLN2",23,0)
 ;               
"RTN","IBDECLN2",24,0)
OUTPUT ;;
"RTN","IBDECLN2",25,0)
PROC ;;INPUT PROCEDURE CODE (CPT4):PROCEDURE^1^6^7^3^2
"RTN","IBDECLN2",26,0)
 ;;+PRIMARY:;IBD(357.98,^^0
"RTN","IBDECLN2",27,0)
 ;;+SECONDARY:;IBD(357.98,^^0
"RTN","IBDECLN2",28,0)
 ;;~~~
"RTN","IBDECLN2",29,0)
PROV ;;INPUT PROVIDER:ENCOUNTER^4^^^15
"RTN","IBDECLN2",30,0)
 ;;+PRIMARY:;IBD(357.98,^^0
"RTN","IBDECLN2",31,0)
 ;;+SECONDARY:;IBD(357.98,^^0
"RTN","IBDECLN2",32,0)
 ;;~~~
"RTN","IBDECLN2",33,0)
PROB ;;GMP INPUT CLINIC COMMON PROBLEMS:DIAGNOSIS/PROBLEM^3^13^14^2
"RTN","IBDECLN2",34,0)
 ;;+PRIMARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",35,0)
 ;;+SECONDARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",36,0)
 ;;+SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",37,0)
 ;;+AGENT ORANGE RELATED:;IBD(357.98,^^1^^^^^10
"RTN","IBDECLN2",38,0)
 ;;+IONIZING RADIATION RELATED:;IBD(357.98,^^1^^^^^11
"RTN","IBDECLN2",39,0)
 ;;+ENVIRONMENTAL CONTAMINANTS RELATED:;IBD(357.98,^^1^^^^^12
"RTN","IBDECLN2",40,0)
 ;;+ADD TO PROBLEM LIST:;IBD(357.98,^^1^^^^^5
"RTN","IBDECLN2",41,0)
 ;;+ACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",42,0)
 ;;+INACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",43,0)
 ;;+NON-SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",44,0)
 ;;~~~
"RTN","IBDECLN2",45,0)
DIAG ;;INPUT DIAGNOSIS CODE (ICD9):DIAGNOSIS/PROBLEM^1^13^14^2
"RTN","IBDECLN2",46,0)
 ;;+PRIMARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",47,0)
 ;;+SECONDARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",48,0)
 ;;+SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",49,0)
 ;;+ICD-9 DIAGNOSIS CODE:;IBD(359.1,^^0
"RTN","IBDECLN2",50,0)
 ;;+AGENT ORANGE RELATED:;IBD(357.98,^^1^^^^^10
"RTN","IBDECLN2",51,0)
 ;;+IONIZING RADIATION RELATED:;IBD(357.98,^^1^^^^^11
"RTN","IBDECLN2",52,0)
 ;;+ENVIRONMENTAL CONTAMINANTS RELATED:;IBD(357.98,^^1^^^^^12
"RTN","IBDECLN2",53,0)
 ;;+ADD TO PROBLEM LIST:;IBD(357.98,^^1^^^^^5
"RTN","IBDECLN2",54,0)
 ;;+ACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",55,0)
 ;;+INACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",56,0)
 ;;~~~
"RTN","IBDECLN2",57,0)
 ;;PX INPUT CHECKOUT TIME:ENCOUNTER^14
"RTN","IBDECLN2",58,0)
 ;;+CHECKOUT DATE@TIME:;IBD(359.1,^^0
"RTN","IBDECLN2",59,0)
 ;;+CHECKOUT TIME - DATE ASSUMED;IBD(359.1,^^0
"RTN","IBDECLN2",60,0)
 ;;~~~
"RTN","IBDECLN2",61,0)
 ;;PX INPUT EDUCATION TOPICS:PATIENT ED^1^^^2
"RTN","IBDECLN2",62,0)
 ;;+POOR UNDERSTANDING:;IBD(357.98,^^0
"RTN","IBDECLN2",63,0)
 ;;+FAIR UNDERSTANDING:;IBD(357.98,^^0
"RTN","IBDECLN2",64,0)
 ;;+GOOD UNDERSTANDING:;IBD(357.98,^^0
"RTN","IBDECLN2",65,0)
 ;;+UNDERSTANDING NOT ASSESSED:;IBD(357.98,^^0
"RTN","IBDECLN2",66,0)
 ;;+PATIENT ED REFUSED:;IBD(357.98,^^0
"RTN","IBDECLN2",67,0)
 ;;~~~
"RTN","IBDECLN2",68,0)
 ;;PX INPUT EXAMS:EXAM^1^^^2
"RTN","IBDECLN2",69,0)
 ;;+ABNORMAL RESULT:;IBD(357.98,^^0
"RTN","IBDECLN2",70,0)
 ;;+NORMAL RESULT:;IBD(357.98,^^0
"RTN","IBDECLN2",71,0)
 ;;~~~
"RTN","IBDECLN2",72,0)
 ;;PX INPUT HEALTH FACTORS:HEALTH FACTORS^1^^^2
"RTN","IBDECLN2",73,0)
 ;;+MINIMAL SEVERITY:;IBD(357.98,^^0
"RTN","IBDECLN2",74,0)
 ;;+MODERATE SEVERITY:;IBD(357.98,^^0
"RTN","IBDECLN2",75,0)
 ;;+HEAVY SEVERITY:;IBD(357.98,^^0
"RTN","IBDECLN2",76,0)
 ;;~~~
"RTN","IBDECLN2",77,0)
 ;;PX INPUT IMMUNIZATION:IMMUNIZATION^1^7
"RTN","IBDECLN2",78,0)
 ;;+CONTRAINDICATED:;IBD(357.98,^^1^IMMUNIZATION^1^^^5
"RTN","IBDECLN2",79,0)
 ;;+GIVEN:;IBD(357.98,^^1^IMMUNIZATION^1
"RTN","IBDECLN2",80,0)
 ;;+REFUSED:;IBD(357.98,^^1^IMMUNIZATION^1^^^8
"RTN","IBDECLN2",81,0)
 ;;~~~
"RTN","IBDECLN2",82,0)
 ;;PX INPUT PATIENT ACTIVE PROBLEM:DIAGNOSIS/PROBLEM^4^13^14^2
"RTN","IBDECLN2",83,0)
 ;;+PRIMARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",84,0)
 ;;+SECONDARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",85,0)
 ;;+SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",86,0)
 ;;+AGENT ORANGE RELATED:;IBD(357.98,^^1^^^^^10
"RTN","IBDECLN2",87,0)
 ;;+IONIZING RADIATION RELATED:;IBD(357.98,^^1^^^^^11
"RTN","IBDECLN2",88,0)
 ;;+ENVIRONMENTAL CONTAMINANTS RELATED:;IBD(357.98,^^1^^^^^12
"RTN","IBDECLN2",89,0)
 ;;+ACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",90,0)
 ;;+INACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",91,0)
 ;;+NON-SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",92,0)
 ;;~~~
"RTN","IBDECLN2",93,0)
 ;;PX INPUT SC TREATMENT QUESTIONS:ENCOUNTER
"RTN","IBDECLN2",94,0)
 ;;+YES:;IBD(357.98,^^0
"RTN","IBDECLN2",95,0)
 ;;+NO:;IBD(357.98,^^0
"RTN","IBDECLN2",96,0)
 ;;~~~
"RTN","IBDECLN2",97,0)
 ;;PX INPUT VISIT CLASSIFICATION:ENCOUNTER
"RTN","IBDECLN2",98,0)
 ;;+ENVIRONMENTAL CONTAMINANTS RELATED:;IBD(357.98,^^0
"RTN","IBDECLN2",99,0)
 ;;+SERVICE CONNECTED:;IBD(357.98,^^0
"RTN","IBDECLN2",100,0)
 ;;+AGENT ORANGE RELATED:;IBD(357.98,^^0
"RTN","IBDECLN2",101,0)
 ;;+IONIZING RADIATION RELATED:;IBD(357.98,^^0
"RTN","IBDECLN2",102,0)
 ;;~~~
"RTN","IBDECLN2",103,0)
 ;;PX INPUT SC TREATMENT QUESTION:ENCOUNTER
"RTN","IBDECLN2",104,0)
 ;;+YES:;IBD(357.98,^^0
"RTN","IBDECLN2",105,0)
 ;;+NO:;IBD(357.98,^^0
"RTN","IBDECLN2",106,0)
 ;;~~~
"RTN","IBDECLN2",107,0)
 ;;IBD INPUT CANCEL/NOSHOW^IBD-ABORT^1^2^3^4^5
"RTN","IBDECLN2",108,0)
 ;;~~~
"RTN","IBDECLN2",109,0)
 ;;INPUT VISIT TYPE:ENCOUNTER^5
"RTN","IBDECLN2",110,0)
 ;;~~~
"RTN","IBDECLN2",111,0)
 ;;INPUT SC RELATED?:ENCOUNTER^6^^^6
"RTN","IBDECLN2",112,0)
 ;;~~~
"RTN","IBDECLN2",113,0)
 ;;INPUT AO RELATED?:ENCOUNTER^7
"RTN","IBDECLN2",114,0)
 ;;~~~
"RTN","IBDECLN2",115,0)
 ;;INPUT IR RELATED?:ENCOUNTER^8^^^9
"RTN","IBDECLN2",116,0)
 ;;~~~
"RTN","IBDECLN2",117,0)
 ;;INPUT EC RELATED?:ENCOUNTER^^^^9
"RTN","IBDECLN2",118,0)
 ;;~~~
"RTN","IBDECLN2",119,0)
 ;;INPUT PROVIDER INDICATOR:ENCOUNTER^15
"RTN","IBDECLN2",120,0)
 ;;~~~
"RTN","IBDECLN2",121,0)
 ;;PX INPUT ATTENDING PHYSICIAN:ENCOUNTER^16
"RTN","IBDECLN2",122,0)
 ;;~~~
"RTN","IBDECLN2",123,0)
 ;;PX INPUT SKIN TESTS:SKIN TEST^1
"RTN","IBDECLN2",124,0)
 ;;~~~
"RTN","IBDECLN2",125,0)
 ;;PX INPUT VISIT TYPE:ENCOUNTER^5
"RTN","IBDECLN2",126,0)
 ;;~~~
"RTN","IBDECLN2",127,0)
 ;;
"RTN","IBDECLN2",128,0)
 ;;GMP SELECT PATIENT ACTIVE PROBLEMS^PRIMARY^SECONDARY
"RTN","IBDECLN2",129,0)
 ;;DG SELECT ICD-9 DIAGNOSIS CODES^PRIMARY^SECONDARY
"RTN","IBDECLN2",130,0)
 ;;DPT SC HIDDEN TREATMENT QUESTIONS^YES^NO
"RTN","IBDECLN2",131,0)
 ;;SD SELECT PROVIDER^PRIMARY^SECONDARY
"RTN","IBDEPT")
0^6^B295130
"RTN","IBDEPT",1,0)
IBDEPT ;ALB/CJM - ENCOUNTER FORM - installation routine for AICS 2.1 ;OCT 5, 1995
"RTN","IBDEPT",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**14**;APR 24, 1997
"RTN","IBDEPT",3,0)
 ;
"RTN","IBDEPT",4,0)
 Q
"RTN","IBDEPT",5,0)
 D AUTOINS^IBDE4 ; auto install tool kit forms and tool kit blocks
"RTN","IBDEPT",6,0)
 D DONE
"RTN","IBDEPT",7,0)
 Q
"RTN","IBDEPT",8,0)
DONE ; Installation has completed - display final messages
"RTN","IBDEPT",9,0)
 ;
"RTN","IBDEPT",10,0)
 D NOW^%DTC S IBDEDT("IBEP")=$H
"RTN","IBDEPT",11,0)
 ;S IBDINIT="IBDE" D ALLDONE^IBD21PT
"RTN","IBDEPT",12,0)
 ;D MSGE^IBD21PT
"RTN","IBDEPT",13,0)
 Q
"RTN","IBDY314")
0^^B587806
"RTN","IBDY314",1,0)
IBDY314 ;ALB/AAS - POST INSTALL FOR PATCH IBD*3*14 ; 23-JUN-97
"RTN","IBDY314",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**14**;APR 24, 1997
"RTN","IBDY314",3,0)
 ;
"RTN","IBDY314",4,0)
 D UPDATE^IBDECLN(1)
"RTN","IBDY314",5,0)
 D UNCOMP
"RTN","IBDY314",6,0)
 Q
"RTN","IBDY314",7,0)
 ;
"RTN","IBDY314",8,0)
UNCOMP ; -- uncompile all forms --
"RTN","IBDY314",9,0)
 N ZTQUEUED
"RTN","IBDY314",10,0)
 D MES^XPDUTL(">>> Now uncompiling all Encounter Forms.")
"RTN","IBDY314",11,0)
 S ZTQUEUED=1
"RTN","IBDY314",12,0)
 D RECMPALL^IBDF19
"RTN","IBDY314",13,0)
 D MES^XPDUTL("    Okay, forms will be recompiled as they are printed.")
"RTN","IBDY314",14,0)
 Q
"VER")
8.0^22
**END**
**END**

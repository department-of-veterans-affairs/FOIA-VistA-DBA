Released XU*8*344 SEQ #311
Extracted from mail message
**KIDS**:XU*8.0*344^

**INSTALL NAME**
XU*8.0*344
"BLD",823,0)
XU*8.0*344^KERNEL^0^3050802^y
"BLD",823,1,0)
^^2^2^3040512^
"BLD",823,1,1,0)
See patch XU*8*344 in the National Patch Module on FORUM for complete
"BLD",823,1,2,0)
information on this patch.
"BLD",823,4,0)
^9.64PA^200^1
"BLD",823,4,200,0)
200
"BLD",823,4,200,2,0)
^9.641^200^1
"BLD",823,4,200,2,200,0)
NEW PERSON  (File-top level)
"BLD",823,4,200,2,200,1,0)
^9.6411^12.8^6
"BLD",823,4,200,2,200,1,12.3,0)
LAST TRAINING MONTH & YEAR
"BLD",823,4,200,2,200,1,12.4,0)
VHA TRAINING FACILITY
"BLD",823,4,200,2,200,1,12.5,0)
DATE TRANSMITTED TO OAA
"BLD",823,4,200,2,200,1,12.6,0)
CLINICAL CORE TRAINEE
"BLD",823,4,200,2,200,1,12.7,0)
DATE NO LONGER TRAINEE
"BLD",823,4,200,2,200,1,12.8,0)
START OF TRAINING
"BLD",823,4,200,222)
y^n^p^^^^n^^n
"BLD",823,4,200,224)

"BLD",823,4,"APDD",200,200)

"BLD",823,4,"APDD",200,200,12.3)

"BLD",823,4,"APDD",200,200,12.4)

"BLD",823,4,"APDD",200,200,12.5)

"BLD",823,4,"APDD",200,200,12.6)

"BLD",823,4,"APDD",200,200,12.7)

"BLD",823,4,"APDD",200,200,12.8)

"BLD",823,4,"B",200,200)

"BLD",823,"INI")

"BLD",823,"INIT")
XU8P344
"BLD",823,"KRN",0)
^9.67PA^8989.52^19
"BLD",823,"KRN",.4,0)
.4
"BLD",823,"KRN",.4,"NM",0)
^9.68A^8^8
"BLD",823,"KRN",.4,"NM",1,0)
XU-CLINICAL TRAINEE TRANSA    FILE #200^200^0
"BLD",823,"KRN",.4,"NM",2,0)
XU-CLINICAL TRAINEE TRANSB    FILE #200^200^0
"BLD",823,"KRN",.4,"NM",3,0)
XU-CLINICAL TRAINEE TRANSC    FILE #200^200^0
"BLD",823,"KRN",.4,"NM",4,0)
XU-CLINICAL TRAINEE INQUIRY    FILE #200^200^0
"BLD",823,"KRN",.4,"NM",5,0)
XU-CLINICAL ACTIVE TRAINEE    FILE #200^200^0
"BLD",823,"KRN",.4,"NM",6,0)
XU-CLINICAL INACTIVE TRAINEE    FILE #200^200^0
"BLD",823,"KRN",.4,"NM",7,0)
XU-CLINICAL TRAINEE DB COUNT    FILE #200^200^0
"BLD",823,"KRN",.4,"NM",8,0)
XU-CLINICAL TRAINEE LIST    FILE #200^200^0
"BLD",823,"KRN",.4,"NM","B","XU-CLINICAL ACTIVE TRAINEE    FILE #200",5)

"BLD",823,"KRN",.4,"NM","B","XU-CLINICAL INACTIVE TRAINEE    FILE #200",6)

"BLD",823,"KRN",.4,"NM","B","XU-CLINICAL TRAINEE DB COUNT    FILE #200",7)

"BLD",823,"KRN",.4,"NM","B","XU-CLINICAL TRAINEE INQUIRY    FILE #200",4)

"BLD",823,"KRN",.4,"NM","B","XU-CLINICAL TRAINEE LIST    FILE #200",8)

"BLD",823,"KRN",.4,"NM","B","XU-CLINICAL TRAINEE TRANSA    FILE #200",1)

"BLD",823,"KRN",.4,"NM","B","XU-CLINICAL TRAINEE TRANSB    FILE #200",2)

"BLD",823,"KRN",.4,"NM","B","XU-CLINICAL TRAINEE TRANSC    FILE #200",3)

"BLD",823,"KRN",.401,0)
.401
"BLD",823,"KRN",.401,"NM",0)
^9.68A^7^7
"BLD",823,"KRN",.401,"NM",1,0)
XU-CLINICAL TRAINEE TRANSA    FILE #200^200^0
"BLD",823,"KRN",.401,"NM",2,0)
XU-CLINICAL TRAINEE TRANSB    FILE #200^200^0
"BLD",823,"KRN",.401,"NM",3,0)
XU-CLINICAL TRAINEE TRANSC    FILE #200^200^0
"BLD",823,"KRN",.401,"NM",4,0)
XU-CLINICAL ACTIVE TRAINEE    FILE #200^200^0
"BLD",823,"KRN",.401,"NM",5,0)
XU-CLINICAL INACTIVE TRAINEE    FILE #200^200^0
"BLD",823,"KRN",.401,"NM",6,0)
XU-CLINICAL TRAINEE DB COUNT    FILE #200^200^0
"BLD",823,"KRN",.401,"NM",7,0)
XU-CLINICAL TRAINEE LIST    FILE #200^200^0
"BLD",823,"KRN",.401,"NM","B","XU-CLINICAL ACTIVE TRAINEE    FILE #200",4)

"BLD",823,"KRN",.401,"NM","B","XU-CLINICAL INACTIVE TRAINEE    FILE #200",5)

"BLD",823,"KRN",.401,"NM","B","XU-CLINICAL TRAINEE DB COUNT    FILE #200",6)

"BLD",823,"KRN",.401,"NM","B","XU-CLINICAL TRAINEE LIST    FILE #200",7)

"BLD",823,"KRN",.401,"NM","B","XU-CLINICAL TRAINEE TRANSA    FILE #200",1)

"BLD",823,"KRN",.401,"NM","B","XU-CLINICAL TRAINEE TRANSB    FILE #200",2)

"BLD",823,"KRN",.401,"NM","B","XU-CLINICAL TRAINEE TRANSC    FILE #200",3)

"BLD",823,"KRN",.402,0)
.402
"BLD",823,"KRN",.402,"NM",0)
^9.68A^3^3
"BLD",823,"KRN",.402,"NM",1,0)
XUEXISTING USER    FILE #200^200^0
"BLD",823,"KRN",.402,"NM",2,0)
XUNEW USER    FILE #200^200^0
"BLD",823,"KRN",.402,"NM",3,0)
XUREACT USER    FILE #200^200^0
"BLD",823,"KRN",.402,"NM","B","XUEXISTING USER    FILE #200",1)

"BLD",823,"KRN",.402,"NM","B","XUNEW USER    FILE #200",2)

"BLD",823,"KRN",.402,"NM","B","XUREACT USER    FILE #200",3)

"BLD",823,"KRN",.403,0)
.403
"BLD",823,"KRN",.403,"NM",0)
^9.68A^4^4
"BLD",823,"KRN",.403,"NM",1,0)
XU-CLINICAL TRAINEE    FILE #200^200^0
"BLD",823,"KRN",.403,"NM",2,0)
XUEXISTING USER    FILE #200^200^0
"BLD",823,"KRN",.403,"NM",3,0)
XUNEW USER    FILE #200^200^0
"BLD",823,"KRN",.403,"NM",4,0)
XUREACT USER    FILE #200^200^0
"BLD",823,"KRN",.403,"NM","B","XU-CLINICAL TRAINEE    FILE #200",1)

"BLD",823,"KRN",.403,"NM","B","XUEXISTING USER    FILE #200",2)

"BLD",823,"KRN",.403,"NM","B","XUNEW USER    FILE #200",3)

"BLD",823,"KRN",.403,"NM","B","XUREACT USER    FILE #200",4)

"BLD",823,"KRN",.5,0)
.5
"BLD",823,"KRN",.84,0)
.84
"BLD",823,"KRN",3.6,0)
3.6
"BLD",823,"KRN",3.8,0)
3.8
"BLD",823,"KRN",9.2,0)
9.2
"BLD",823,"KRN",9.8,0)
9.8
"BLD",823,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",823,"KRN",9.8,"NM",1,0)
XUOAAHL7^^0^38731493
"BLD",823,"KRN",9.8,"NM",2,0)
XUSER2^^0^11587344
"BLD",823,"KRN",9.8,"NM",3,0)
XUOAAUTL^^0^1683533
"BLD",823,"KRN",9.8,"NM","B","XUOAAHL7",1)

"BLD",823,"KRN",9.8,"NM","B","XUOAAUTL",3)

"BLD",823,"KRN",9.8,"NM","B","XUSER2",2)

"BLD",823,"KRN",19,0)
19
"BLD",823,"KRN",19,"NM",0)
^9.68A^16^14
"BLD",823,"KRN",19,"NM",2,0)
XU-CLINICAL TRAINEE TRANSA^^0
"BLD",823,"KRN",19,"NM",3,0)
XU-CLINICAL TRAINEE TRANSB^^0
"BLD",823,"KRN",19,"NM",5,0)
XU-CLINICAL TRAINEE TRANSC^^0
"BLD",823,"KRN",19,"NM",6,0)
XU-CLINICAL TRAINEE REPORTS^^0
"BLD",823,"KRN",19,"NM",7,0)
XU-CLINICAL TRAINEE DB COUNT^^0
"BLD",823,"KRN",19,"NM",8,0)
XU-CLINICAL TRAINEE LIST^^0
"BLD",823,"KRN",19,"NM",9,0)
XU-CLINICAL ACTIVE TRAINEE^^0
"BLD",823,"KRN",19,"NM",10,0)
XU-CLINICAL INACTIVE TRAINEE^^0
"BLD",823,"KRN",19,"NM",11,0)
XUSER^^2
"BLD",823,"KRN",19,"NM",12,0)
XU-CLINICAL LOCAL REPORTS^^0
"BLD",823,"KRN",19,"NM",13,0)
XU-CLINICAL TRANS REPORTS^^0
"BLD",823,"KRN",19,"NM",14,0)
XU-CLINICAL TRAINEE MENU^^0
"BLD",823,"KRN",19,"NM",15,0)
XU-CLINICAL TRAINEE EDIT^^0
"BLD",823,"KRN",19,"NM",16,0)
XU-CLINICAL TRAINEE INQUIRY^^0
"BLD",823,"KRN",19,"NM","B","XU-CLINICAL ACTIVE TRAINEE",9)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL INACTIVE TRAINEE",10)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL LOCAL REPORTS",12)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRAINEE DB COUNT",7)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRAINEE EDIT",15)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRAINEE INQUIRY",16)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRAINEE LIST",8)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRAINEE MENU",14)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRAINEE REPORTS",6)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRAINEE TRANSA",2)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRAINEE TRANSB",3)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRAINEE TRANSC",5)

"BLD",823,"KRN",19,"NM","B","XU-CLINICAL TRANS REPORTS",13)

"BLD",823,"KRN",19,"NM","B","XUSER",11)

"BLD",823,"KRN",19.1,0)
19.1
"BLD",823,"KRN",101,0)
101
"BLD",823,"KRN",409.61,0)
409.61
"BLD",823,"KRN",771,0)
771
"BLD",823,"KRN",870,0)
870
"BLD",823,"KRN",8989.51,0)
8989.51
"BLD",823,"KRN",8989.52,0)
8989.52
"BLD",823,"KRN",8994,0)
8994
"BLD",823,"KRN","B",.4,.4)

"BLD",823,"KRN","B",.401,.401)

"BLD",823,"KRN","B",.402,.402)

"BLD",823,"KRN","B",.403,.403)

"BLD",823,"KRN","B",.5,.5)

"BLD",823,"KRN","B",.84,.84)

"BLD",823,"KRN","B",3.6,3.6)

"BLD",823,"KRN","B",3.8,3.8)

"BLD",823,"KRN","B",9.2,9.2)

"BLD",823,"KRN","B",9.8,9.8)

"BLD",823,"KRN","B",19,19)

"BLD",823,"KRN","B",19.1,19.1)

"BLD",823,"KRN","B",101,101)

"BLD",823,"KRN","B",409.61,409.61)

"BLD",823,"KRN","B",771,771)

"BLD",823,"KRN","B",870,870)

"BLD",823,"KRN","B",8989.51,8989.51)

"BLD",823,"KRN","B",8989.52,8989.52)

"BLD",823,"KRN","B",8994,8994)

"BLD",823,"QUES",0)
^9.62^1^1
"BLD",823,"QUES",1,0)
POS1
"BLD",823,"QUES",1,1)
SB^L:LEGACY;P:PRODUCTION;T:TEST
"BLD",823,"QUES",1,"A")
In which account is this install taking place?
"BLD",823,"QUES",1,"Q")
Answer in which account so I know whether or not to transmit.
"BLD",823,"QUES","B","POS1",1)

"BLD",823,"REQB",0)
^9.611^3^3
"BLD",823,"REQB",1,0)
XU*8.0*324^2
"BLD",823,"REQB",2,0)
XU*8.0*251^2
"BLD",823,"REQB",3,0)
XU*8.0*343^2
"BLD",823,"REQB","B","XU*8.0*251",2)

"BLD",823,"REQB","B","XU*8.0*324",1)

"BLD",823,"REQB","B","XU*8.0*343",3)

"FIA",200)
NEW PERSON
"FIA",200,0)
^VA(200,
"FIA",200,0,0)
200I
"FIA",200,0,1)
y^n^p^^^^n^^n
"FIA",200,0,10)

"FIA",200,0,11)

"FIA",200,0,"RLRO")

"FIA",200,0,"VR")
8.0^XU
"FIA",200,200)
1
"FIA",200,200,12.3)

"FIA",200,200,12.4)

"FIA",200,200,12.5)

"FIA",200,200,12.6)

"FIA",200,200,12.7)

"FIA",200,200,12.8)

"INIT")
XU8P344
"IX",200,200,"ATR",0)
200^ATR^This index keeps track of records for which clinical trainee data is edited.^MU^^R^IR^I^200^^^^^S
"IX",200,200,"ATR",.1,0)
^^20^20^3040927^
"IX",200,200,"ATR",.1,1,0)
This new-style cross-reference has as cross-reference values all the 
"IX",200,200,"ATR",.1,2,0)
fields in the NEW PERSON file that are being tracked by the Office of 
"IX",200,200,"ATR",.1,3,0)
Academic Affiliations for rollup into a centralized database. When any of
"IX",200,200,"ATR",.1,4,0)
the fields are edited, the cross-reference logic will set an index entry
"IX",200,200,"ATR",.1,5,0)
that corresponds to the edited record. The index entries will look like
"IX",200,200,"ATR",.1,6,0)
this:
"IX",200,200,"ATR",.1,7,0)
 
"IX",200,200,"ATR",.1,8,0)
  ^VA(200,"ATR",ien) = FM internal date
"IX",200,200,"ATR",.1,9,0)
 
"IX",200,200,"ATR",.1,10,0)
"ATR" stands for "ATRainee." 
"IX",200,200,"ATR",.1,11,0)
 
"IX",200,200,"ATR",.1,12,0)
None of the field-type cross-reference values are used as subscripts in
"IX",200,200,"ATR",.1,13,0)
the index, since we are only interested in recording the IENs of the
"IX",200,200,"ATR",.1,14,0)
records that are edited and the date the index entry is set. A separate
"IX",200,200,"ATR",.1,15,0)
queuable option will loop through the entries in this index, and send via
"IX",200,200,"ATR",.1,16,0)
HL7 messages the clinical trainee data of each record to the Office of
"IX",200,200,"ATR",.1,17,0)
Academic Affiliations.
"IX",200,200,"ATR",.1,18,0)
 
"IX",200,200,"ATR",.1,19,0)
Note that the index will only be set if the person is a Clinical Trainee,
"IX",200,200,"ATR",.1,20,0)
that is, if the PROGRAM OF STUDY (#12.2) field is filled in.
"IX",200,200,"ATR",1)
S ^VA(200,"ATR",DA)=$G(DT)
"IX",200,200,"ATR",1.4)
S X=X1(11)!X2(11)
"IX",200,200,"ATR",2)
K ^VA(200,"ATR",DA)
"IX",200,200,"ATR",2.4)

"IX",200,200,"ATR",2.5)
K ^VA(200,"ATR")
"IX",200,200,"ATR",11.1,0)
^.114IA^21^19
"IX",200,200,"ATR",11.1,2,0)
1^F^200^.01^^^
"IX",200,200,"ATR",11.1,3,0)
2^F^200^.111^^^
"IX",200,200,"ATR",11.1,4,0)
3^F^200^.112^^^
"IX",200,200,"ATR",11.1,5,0)
4^F^200^.113^^^
"IX",200,200,"ATR",11.1,6,0)
5^F^200^.114^^^
"IX",200,200,"ATR",11.1,7,0)
6^F^200^.115^^^^
"IX",200,200,"ATR",11.1,8,0)
7^F^200^.116^^^
"IX",200,200,"ATR",11.1,9,0)
8^F^200^9^^^
"IX",200,200,"ATR",11.1,10,0)
9^F^200^.151^^^
"IX",200,200,"ATR",11.1,11,0)
10^F^200^12.1^^^
"IX",200,200,"ATR",11.1,12,0)
11^F^200^12.2^^^
"IX",200,200,"ATR",11.1,13,0)
12^F^200^12.3^^^^
"IX",200,200,"ATR",11.1,14,0)
13^F^200^29^^^
"IX",200,200,"ATR",11.1,15,0)
14^F^200^8^^^
"IX",200,200,"ATR",11.1,17,0)
16^F^200^5^^^
"IX",200,200,"ATR",11.1,18,0)
17^F^200^12.4^^^
"IX",200,200,"ATR",11.1,19,0)
18^F^200^12.6^^^F
"IX",200,200,"ATR",11.1,20,0)
19^F^200^12.7^^^F
"IX",200,200,"ATR",11.1,21,0)
20^F^200^12.8^^^F
"KRN",.4,91,-1)
0^4
"KRN",.4,91,0)
XU-CLINICAL TRAINEE INQUIRY^3050407.0635^^200^^@^3050801
"KRN",.4,91,"DXS",1,9.2)
S X=200,DIP(1)=$G(X) S X=.01,DIP(2)=$G(X) S X=$S('$D(D0):"",D0<0:"",1:D0),DIP(3)=$G(X) S X="G",DIP(4)=$G(X) S X="Dc"
"KRN",.4,91,"DXS",1,9.3)
X DXS(1,9.2) S X1=DIP(4) S X2=DIP(3) S X3=DIP(2) S X4=DIP(1) N XUNAME S XUNAME("FILE")=X4,XUNAME("IENS")=X2_$E(",",($E(X2,$L(X2))'=",")),XUNAME("FIELD")=X3 S X=$$NAMEFMT^XLFNAME(.XUNAME,X1,X) S X=X
"KRN",.4,91,"DXS",2,9.2)
S DIP(1)=$S($D(^VA(200,D0,1)):^(1),1:"") S X=$P(DIP(1),U,9),DIP(2)=$G(X) S X="SSN"
"KRN",.4,91,"DXS",3,9.2)
S DIP(2)=$C(59)_$P($G(^DD(200,7,0)),U,3),DIP(1)=$S($D(^VA(200,D0,0)):^(0),1:"") S X=$P($P(DIP(2),$C(59)_$P(DIP(1),U,7)_":",2),$C(59)),DIP(3)=$G(X) S X="DIS"
"KRN",.4,91,"DXS",4,9.2)
S DIP(1)=$S($D(^VA(200,D0,0)):^(0),1:"") S X=$P(DIP(1),U,11),DIP(2)=$G(X) S X="D",X1=DIP(2) S X=$$FMTE^XLFDT(X1,X) S X=X,DIP(3)=$G(X) S X="TD"
"KRN",.4,91,"DXS",5,9.2)
S X="TD",X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S X=X,X=$L(X),DIP(1)=$G(X) S X="**** Date Terminated: ",DIP(2)=$G(X) S X="TD"
"KRN",.4,91,"DXS",5,9.3)
X DXS(5,9.2) S X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S Y=X,X=DIP(2),X=X S X=X_Y,DIP(3)=$G(X) S X=1,DIP(4)=$G(X) S X=""
"KRN",.4,91,"DXS",6,9.2)
S X="DIS",X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S X=X["Y",DIP(1)=$G(X) S X="****    Disuser: ",DIP(2)=$G(X) S X="DIS"
"KRN",.4,91,"DXS",6,9.3)
X DXS(6,9.2) S X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S Y=X,X=DIP(2),X=X S X=X_Y,DIP(3)=$G(X) S X=1,DIP(4)=$G(X) S X=""
"KRN",.4,91,"DXS",7,9.2)
S DIP(1)=$S($D(^VA(200,D0,.11)):^(.11),1:"") S X=$P(DIP(1),U,4),DIP(2)=$G(X) S X="CITY"
"KRN",.4,91,"DXS",8,9.2)
S I(0,0)=$G(D0),DIP(1)=$S($D(^VA(200,D0,.11)):^(.11),1:"") S X=$P(DIP(1),U,4),DIP(2)=$G(X),DIP(3)=$G(X) S X="CITY"
"KRN",.4,91,"DXS",8,9.3)
X DXS(8,9.2) S X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S X=X]"",DIP(4)=$G(X) S X=", ",DIP(5)=$G(X) S X=1,DIP(6)=$G(X) S X=""
"KRN",.4,91,"DXS",8,9.4)
X DXS(8,9.3) S X=$S(DIP(4):DIP(5),DIP(6):X) S Y=X,X=DIP(2),X=X_Y,DIP(7)=$G(X),D0=$P(DIP(1),U,5) S:'D0!'$D(^DIC(5,+D0,0)) D0=-1 S DIP(101)=$S($D(^DIC(5,D0,0)):^(0),1:"")
"KRN",.4,91,"DXS",9,9.2)
S DIP(2)=$C(59)_$P($G(^DD(200,12.6,0)),U,3),DIP(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($P(DIP(2),$C(59)_$P(DIP(1),U,6)_":",2),$C(59)),DIP(3)=$G(X) S X="YN"
"KRN",.4,91,"DXS",10,9.2)
S X="YN",X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S X=X="",DIP(1)=$G(X) S X="YES",DIP(2)=$G(X) S X=1,DIP(3)=$G(X),DIP(4)=$G(X) S X="YN"
"KRN",.4,91,"F",1)
I (($G(IOF)]"")&($E(IOST,1,2)="C-")) W @IOF;Z;"I (($G(IOF)]"")&($E(IOST,1,2)="C-")) W @IOF"~
"KRN",.4,91,"F",2)
S X="Registered Trainee Inquiry",X=$J("",$S($D(DIWR)+$D(DIWL)=2:DIWR-DIWL+1,$D(IOM):IOM,1:80)-$L(X)\2-$X)_X W X K DIP;X;Z;"CENTER("Registered Trainee Inquiry")"~
"KRN",.4,91,"F",3)
X DXS(1,9.3) S X=X_"  (#"_$S('$D(D0):"",D0<0:"",1:D0)_")" W X K DIP;C1;S1;Z;"XLFMTNAME(200,.01,NUMBER,"G","Dc")_"  (#"_NUMBER_")""~
"KRN",.4,91,"F",4)
"Last Sign-on: ";C54~
"KRN",.4,91,"F",5)
S DIP(1)=$S($D(^VA(200,D0,1.1)):^(1.1),1:"") S X=$P(DIP(1),U,1),DIP(2)=$G(X) S X="D",X1=DIP(2) S X=$$FMTE^XLFDT(X1,X) W X K DIP;X;Z;"XUFMTOEX(LAST SIGN-ON DATE/TIME,"D")"~
"KRN",.4,91,"F",6)
"Office Phone: ";C4~.132;X~"E-Mail Address: ";C2~.151;X~"SSN: ";C63~
"KRN",.4,91,"F",7)
X DXS(2,9.2) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;"";X;Z;"SETPARAM(SSN,"SSN")"~
"KRN",.4,91,"F",8)
W "*****",$E(DIPA("SSN"),6,9);X;Z;"W "*****",$E(DIPA("SSN"),6,9)"~
"KRN",.4,91,"F",9)
X DXS(3,9.2) S X1=DIP(3) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;"";X;Z;"SETPARAM(DISUSER,"DIS")"~
"KRN",.4,91,"F",10)
X DXS(4,9.2) S X1=DIP(3) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;"";X;Z;"SETPARAM(XUFMTOEX(TERMINATION DATE,"D"),"TD")"~
"KRN",.4,91,"F",11)
I DIPA("DIS")["Y"!$L(DIPA("TD")) W !,$C(7);X;Z;"I DIPA("DIS")["Y"!$L(DIPA("TD")) W !,$C(7)"~
"KRN",.4,91,"F",12)
X DXS(5,9.3) S X=$S(DIP(1):DIP(3),DIP(4):X) W X K DIP;X;C1;Z;"$S($L(PARAM("TD")):"**** Date Terminated: "_PARAM("TD"),1:"")"~
"KRN",.4,91,"F",13)
X DXS(6,9.3) S X=$S(DIP(1):DIP(3),DIP(4):X) W X K DIP;X;C1;Z;"$S(PARAM("DIS")["Y":"****    Disuser: "_PARAM("DIS"),1:"")"~"Title: ";C11;S1~8;X~
"KRN",.4,91,"F",14)
"Service/Section: ";C1~29;X~"Address:";C1;S1~.111;C3~.112;C3~.113;C3~
"KRN",.4,91,"F",15)
X DXS(7,9.2) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;X;Z;"SETPARAM(CITY,"CITY")"~
"KRN",.4,91,"F",16)
X DXS(8,9.4) S X=$P(DIP(101),U,2)_"   "_$P(DIP(1),U,6),Y=X,X=DIP(7),X=X_Y S D0=I(0,0) W X K DIP;C3;Z;"CITY_$S(PARAM("CITY")]"":", ",1:"")_STATE:ABBREVIATION_"   "_ZIP CODE"~
"KRN",.4,91,"F",17)
X DXS(9,9.2) S X1=DIP(3) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;X;Z;"SETPARAM((#12.6),"YN")"~
"KRN",.4,91,"F",18)
"Currently a Registered Trainee?: ";C1;S1~
"KRN",.4,91,"F",19)
X DXS(10,9.2) S X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S X=X,X=$S(DIP(1):DIP(2),DIP(3):X) W X K DIP;X;Z;"$S(PARAM("YN")="":"YES",1:PARAM("YN"))"~
"KRN",.4,91,"F",20)
"Date HL7 Record Built: ";C40~12.5;X~"Date no longer a trainee: ";C1~12.7;X~"Date started training: ";C1~12.8;X~"Current Degree Lvl: ";C1~12.1;X~
"KRN",.4,91,"F",21)
"Program of Study: ";C3~12.2;X~"Last Training Month & Year: ";C1~12.3;X~"VHA Training Facility: ";X;C1~12.4;X~
"KRN",.4,91,"H")
@
"KRN",.4,91,"SUB")
1
"KRN",.4,97,-1)
0^7
"KRN",.4,97,0)
XU-CLINICAL TRAINEE DB COUNT^3030902.1404^@^200^^@^3050801
"KRN",.4,97,"DCL","200^.01")
!
"KRN",.4,97,"DNP")
1
"KRN",.4,97,"F",2)
.01;X~
"KRN",.4,97,"H")
OAA Registered Trainee Database Count
"KRN",.4,108,-1)
0^1
"KRN",.4,108,0)
XU-CLINICAL TRAINEE TRANSA^3040513.1139^@^200^^@^3050801
"KRN",.4,108,"DCL","200^.01")
!
"KRN",.4,108,"DXS",1,9.2)
S DIP(2)=$S($D(^VA(200,D0,1)):^(1),1:"") S X="*****",DIP(1)=$G(X) S X=$P(DIP(2),U,9),DIP(3)=$G(X) S X=6,DIP(4)=$G(X) S X=9
"KRN",.4,108,"F",2)
.01~X DXS(1,9.2) S X=$E(DIP(3),DIP(4),X) S Y=X,X=DIP(1),X=X_Y W X K DIP;"SSN";Z;""*****"_$E(SSN,6,9)"~
"KRN",.4,108,"H")
Registered Trainee Transmission Report
"KRN",.4,109,-1)
0^2
"KRN",.4,109,0)
XU-CLINICAL TRAINEE TRANSB^3040513.1141^@^200^^@^3050801
"KRN",.4,109,"DCL","200^.01")
!
"KRN",.4,109,"DXS",1,9.2)
S DIP(2)=$S($D(^VA(200,D0,1)):^(1),1:"") S X="*****",DIP(1)=$G(X) S X=$P(DIP(2),U,9),DIP(3)=$G(X) S X=6,DIP(4)=$G(X) S X=9
"KRN",.4,109,"F",2)
.01~X DXS(1,9.2) S X=$E(DIP(3),DIP(4),X) S Y=X,X=DIP(1),X=X_Y W X K DIP;"SSN";Z;""*****"_$E(SSN,6,9)"~
"KRN",.4,109,"H")
Selectable Registered Trainee Transmission Report
"KRN",.4,110,-1)
0^3
"KRN",.4,110,0)
XU-CLINICAL TRAINEE TRANSC^3040513.1025^@^200^^@^3050801
"KRN",.4,110,"DCL","200^.01")
!
"KRN",.4,110,"DNP")
1
"KRN",.4,110,"F",2)
.01;L0;X~
"KRN",.4,110,"H")
Summary Registered Trainee Transmission Report
"KRN",.4,122,-1)
0^8
"KRN",.4,122,0)
XU-CLINICAL TRAINEE LIST^3050321.0815^@^200^^@^3050801
"KRN",.4,122,"DXS",1,9.2)
S DIP(2)=$S($D(^VA(200,D0,1)):^(1),1:"") S X="(",DIP(1)=$G(X) S X=$P(DIP(2),U,9),DIP(3)=$G(X) S X=6,DIP(4)=$G(X) S X=9
"KRN",.4,122,"DXS",2,9.2)
S DIP(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P(DIP(1),U,7)'="",DIP(2)=$G(X),DIP(3)=$G(X) S X=$P(DIP(1),U,7) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) S X=X
"KRN",.4,122,"F",1)
.01;L30;"NAME/LAST4"~X DXS(1,9.2) S X=$E(DIP(3),DIP(4),X) S Y=X,X=DIP(1),X=X_Y_")" W X K DIP;X;Z;""("_$E(SSN,6,9)_")""~29;"SERVICE";C38~
"KRN",.4,122,"F",2)
X DXS(2,9.2) S DIP(4)=$G(X) S X=1,DIP(5)=$G(X) S X="",X=$S(DIP(2):DIP(4),DIP(5):X) W X K DIP;"DATE";Z;"$S((#12.7)'="":NUMDATE(#12.7),1:"")"~
"KRN",.4,122,"H")
Registered Trainee List
"KRN",.4,123,-1)
0^6
"KRN",.4,123,0)
XU-CLINICAL INACTIVE TRAINEE^3050321.0739^@^200^^@^3050801
"KRN",.4,123,"DXS",1,9.2)
S DIP(2)=$S($D(^VA(200,D0,1)):^(1),1:"") S X="(",DIP(1)=$G(X) S X=$P(DIP(2),U,9),DIP(3)=$G(X) S X=6,DIP(4)=$G(X) S X=9
"KRN",.4,123,"F",1)
.01;L30;"NAME/LAST4"~X DXS(1,9.2) S X=$E(DIP(3),DIP(4),X) S Y=X,X=DIP(1),X=X_Y_")" W X K DIP;X;Z;""("_$E(SSN,6,9)_")""~29;"SERVICE";C38~
"KRN",.4,123,"F",2)
S DIP(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P(DIP(1),U,7) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) W X K DIP;"DATE";Z;"NUMDATE(#12.7)"~
"KRN",.4,123,"H")
Non-Active Registered Trainees
"KRN",.4,124,-1)
0^5
"KRN",.4,124,0)
XU-CLINICAL ACTIVE TRAINEE^3050321.081^@^200^^@^3050801
"KRN",.4,124,"DXS",1,9.2)
S DIP(2)=$S($D(^VA(200,D0,1)):^(1),1:"") S X="(",DIP(1)=$G(X) S X=$P(DIP(2),U,9),DIP(3)=$G(X) S X=6,DIP(4)=$G(X) S X=9
"KRN",.4,124,"F",2)
.01;"NAME/LAST4"~X DXS(1,9.2) S X=$E(DIP(3),DIP(4),X) S Y=X,X=DIP(1),X=X_Y_")" W X K DIP;X;Z;""("_$E(SSN,6,9)_")""~29;"SERVICE"~
"KRN",.4,124,"H")
Active Registered Trainee List
"KRN",.401,56,-1)
0^6
"KRN",.401,56,0)
XU-CLINICAL TRAINEE DB COUNT^3030820.1313^@^200^^@^3050801
"KRN",.401,56,2,0)
^.4014^1^1
"KRN",.401,56,2,1,0)
200^^(#12.2)'=""^@"B^;L1^^^^^4
"KRN",.401,56,2,1,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^USC(8932.2,+$P(Y(1),U,2),0)),U)'="" I D0>0 S DISX(1)=X
"KRN",.401,56,2,1,"F")
0
"KRN",.401,56,2,1,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^USC(8932.2,+$P(Y(1),U,2),0)),U)'="" I D0>0 S DISX(1)=X
"KRN",.401,56,2,1,"QCON")
I (DISX(1)]]0)&(DISX(1)']]1)
"KRN",.401,56,2,1,"T")
1
"KRN",.401,56,2,1,"TXT")
(#12.2)'=""""
"KRN",.401,56,2,"B",200,1)

"KRN",.401,56,"%D",0)
^^2^2^3030820^
"KRN",.401,56,"%D",1,0)
This is the sort that counts the number of entries where field PROGRAM OF 
"KRN",.401,56,"%D",2,0)
STUDY(12.2) is not null.
"KRN",.401,62,-1)
0^1
"KRN",.401,62,0)
XU-CLINICAL TRAINEE TRANSA^3040901.0613^@^200^^@^3050801
"KRN",.401,62,2,0)
^.4014^3^3
"KRN",.401,62,2,1,0)
200^12.5^DATE TRANSMITTED TO OAA^+^;S1^^^^^1
"KRN",.401,62,2,1,"ASK")
1
"KRN",.401,62,2,1,"F")
3040805.999999^T-360^Aug 6,2004
"KRN",.401,62,2,1,"GET")
S DISX(1)=$P($G(^VA(200,D0,12)),U,5)
"KRN",.401,62,2,1,"IX")
^VA(200,"AOAA",^VA(200,^2
"KRN",.401,62,2,1,"QCON")
I (DISX(1)]]3040805.999999)&(DISX(1)']]3050801.24)
"KRN",.401,62,2,1,"SER")
24.2500^0.9604
"KRN",.401,62,2,1,"T")
3050801.24^Aug 1,2005@2400^Aug 1,2005@24:00
"KRN",.401,62,2,1,"TXT")
DATE TRANSMITTED TO OAA from Aug 6,2004 to Aug 1,2005@24:00
"KRN",.401,62,2,2,0)
200^^VHA TRAINING FACILITY^+"12.4^;S1^^^^^4
"KRN",.401,62,2,2,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,62,2,2,"F")
?z^@
"KRN",.401,62,2,2,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,62,2,2,"QCON")
I 1
"KRN",.401,62,2,2,"T")
z^
"KRN",.401,62,2,2,"TXT")
All VHA TRAINING FACILITY (includes nulls)
"KRN",.401,62,2,3,0)
200^.01^NAME^^^^^^^4
"KRN",.401,62,2,3,"GET")
S DISX(3)=$P($G(^VA(200,D0,0)),U)
"KRN",.401,62,2,3,"IX")
^VA(200,"B",^VA(200,^2
"KRN",.401,62,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,62,2,3,"SER")
0^0
"KRN",.401,62,2,3,"TXT")
NAME not null
"KRN",.401,62,2,"B",200,1)

"KRN",.401,62,2,"B",200,2)

"KRN",.401,62,2,"B",200,3)

"KRN",.401,63,-1)
0^2
"KRN",.401,63,0)
XU-CLINICAL TRAINEE TRANSB^3040901.0615^@^200^^@^3050801
"KRN",.401,63,2,0)
^.4014^3^3
"KRN",.401,63,2,1,0)
200^12.5^DATE TRANSMITTED TO OAA^+^;S1^^^^^1
"KRN",.401,63,2,1,"ASK")
1
"KRN",.401,63,2,1,"F")
3040805.999999^T-360^Aug 6,2004
"KRN",.401,63,2,1,"GET")
S DISX(1)=$P($G(^VA(200,D0,12)),U,5)
"KRN",.401,63,2,1,"IX")
^VA(200,"AOAA",^VA(200,^2
"KRN",.401,63,2,1,"QCON")
I (DISX(1)]]3040805.999999)&(DISX(1)']]3050707.24)
"KRN",.401,63,2,1,"SER")
24.2500^0.9604
"KRN",.401,63,2,1,"T")
3050707.24^Jul 7,2005@2400^Jul 7,2005@24:00
"KRN",.401,63,2,1,"TXT")
DATE TRANSMITTED TO OAA from Aug 6,2004 to Jul 7,2005@24:00
"KRN",.401,63,2,2,0)
200^^VHA TRAINING FACILITY^+"12.4^;S1^^^^^4
"KRN",.401,63,2,2,"ASK")
1
"KRN",.401,63,2,2,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,63,2,2,"F")
SAN FRANCISCNz^SAN FRANCISCO
"KRN",.401,63,2,2,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,63,2,2,"QCON")
I DISX(2)="SAN FRANCISCO"
"KRN",.401,63,2,2,"T")
SAN FRANCISCO^SAN FRANCISCO
"KRN",.401,63,2,2,"TXT")
VHA TRAINING FACILITY equals SAN FRANCISCO
"KRN",.401,63,2,3,0)
200^.01^NAME^^^^^^^4
"KRN",.401,63,2,3,"GET")
S DISX(3)=$P($G(^VA(200,D0,0)),U)
"KRN",.401,63,2,3,"IX")
^VA(200,"B",^VA(200,^2
"KRN",.401,63,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,63,2,3,"SER")
0^0
"KRN",.401,63,2,3,"TXT")
NAME not null
"KRN",.401,63,2,"B",200,1)

"KRN",.401,63,2,"B",200,2)

"KRN",.401,63,2,"B",200,3)

"KRN",.401,64,-1)
0^3
"KRN",.401,64,0)
XU-CLINICAL TRAINEE TRANSC^3040901.0615^@^200^^@^3050801
"KRN",.401,64,2,0)
^.4014^3^3
"KRN",.401,64,2,1,0)
200^12.5^DATE TRANSMITTED TO OAA^+^^^^^^1
"KRN",.401,64,2,1,"ASK")
1
"KRN",.401,64,2,1,"F")
3040805.999999^T-360^Aug 6,2004
"KRN",.401,64,2,1,"GET")
S DISX(1)=$P($G(^VA(200,D0,12)),U,5)
"KRN",.401,64,2,1,"IX")
^VA(200,"AOAA",^VA(200,^2
"KRN",.401,64,2,1,"QCON")
I (DISX(1)]]3040805.999999)&(DISX(1)']]3050707.24)
"KRN",.401,64,2,1,"SER")
24.2500^0.9604
"KRN",.401,64,2,1,"T")
3050707.24^Jul 7,2005@2400^Jul 7,2005@24:00
"KRN",.401,64,2,1,"TXT")
DATE TRANSMITTED TO OAA from Aug 6,2004 to Jul 7,2005@24:00
"KRN",.401,64,2,2,0)
200^^VHA TRAINING FACILITY^+"12.4^;S1^^^^^4
"KRN",.401,64,2,2,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,64,2,2,"F")
?z^@
"KRN",.401,64,2,2,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,64,2,2,"QCON")
I 1
"KRN",.401,64,2,2,"T")
z^
"KRN",.401,64,2,2,"TXT")
All VHA TRAINING FACILITY (includes nulls)
"KRN",.401,64,2,3,0)
200^.01^NAME^^^^^^^4
"KRN",.401,64,2,3,"GET")
S DISX(3)=$P($G(^VA(200,D0,0)),U)
"KRN",.401,64,2,3,"IX")
^VA(200,"B",^VA(200,^2
"KRN",.401,64,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,64,2,3,"SER")
0^0
"KRN",.401,64,2,3,"TXT")
NAME not null
"KRN",.401,64,2,"B",200,1)

"KRN",.401,64,2,"B",200,2)

"KRN",.401,64,2,"B",200,3)

"KRN",.401,76,-1)
0^7
"KRN",.401,76,0)
XU-CLINICAL TRAINEE LIST^3050321.0816^@^200^^@^3050801
"KRN",.401,76,2,0)
^.4014^3^3
"KRN",.401,76,2,1,0)
200^^(#12.2)'=""^@"B^;L1^^^^^4
"KRN",.401,76,2,1,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^USC(8932.2,+$P(Y(1),U,2),0)),U)'="" I D0>0 S DISX(1)=X
"KRN",.401,76,2,1,"F")
0
"KRN",.401,76,2,1,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^USC(8932.2,+$P(Y(1),U,2),0)),U)'="" I D0>0 S DISX(1)=X
"KRN",.401,76,2,1,"QCON")
I (DISX(1)]]0)&(DISX(1)']]1)
"KRN",.401,76,2,1,"T")
1
"KRN",.401,76,2,1,"TXT")
(#12.2)'=""""
"KRN",.401,76,2,2,0)
200^^$S((#12.6)="YES":"YES",(#12.6)="NO":"NO",1:"YES")^"^;"TRAINEE?: ";S1^^^^^4
"KRN",.401,76,2,2,3,0)
^.401419^2^2
"KRN",.401,76,2,2,3,1,0)
OVF0^9.2
"KRN",.401,76,2,2,3,1,"OVF0")
S Y(2)=$C(59)_$P($G(^DD(200,12.6,0)),U,3),Y(6)=$C(59)_$P($G(^DD(200,12.6,0)),U,3),Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"")
"KRN",.401,76,2,2,3,2,0)
OVF0^9.3
"KRN",.401,76,2,2,3,2,"OVF0")
X DPP(2,"OVF0",9.2) S X=$P($P(Y(2),$C(59)_$P(Y(1),U,6)_":",2),$C(59))="YES",Y(3)=$G(X) S X="YES",Y(4)=$G(X),Y(5)=$G(X) S X=$P($P(Y(6),$C(59)_$P(Y(1),U,6)_":",2),$C(59))
"KRN",.401,76,2,2,3,"B","OVF0",1)

"KRN",.401,76,2,2,3,"B","OVF0",2)

"KRN",.401,76,2,2,"CM")
X DPP(2,"OVF0",9.3) S X=X="NO",Y(7)=$G(X) S X="NO",Y(8)=$G(X) S X=1,Y(9)=$G(X) S X="YES",X=$S(Y(3):Y(4),Y(7):Y(8),Y(9):X) I D0>0 S DISX(2)=X
"KRN",.401,76,2,2,"GET")
X DPP(2,"OVF0",9.3) S X=X="NO",Y(7)=$G(X) S X="NO",Y(8)=$G(X) S X=1,Y(9)=$G(X) S X="YES",X=$S(Y(3):Y(4),Y(7):Y(8),Y(9):X) I D0>0 S DISX(2)=X
"KRN",.401,76,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,76,2,2,"TXT")
$S((#12.6)=""YES"":""YES"",(#12.6)=""NO"":""NO"",1:""YES"") not null
"KRN",.401,76,2,3,0)
200^^VHA TRAINING FACILITY^"12.4^;"TRAINING FACILITY: "^^^^^4
"KRN",.401,76,2,3,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,76,2,3,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,76,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,76,2,3,"TXT")
VHA TRAINING FACILITY not null
"KRN",.401,76,2,"B",200,1)

"KRN",.401,76,2,"B",200,2)

"KRN",.401,76,2,"B",200,3)

"KRN",.401,77,-1)
0^5
"KRN",.401,77,0)
XU-CLINICAL INACTIVE TRAINEE^3050321.0808^@^200^^@^3050801
"KRN",.401,77,2,0)
^.4014^3^3
"KRN",.401,77,2,1,0)
200^^(#12.2)'=""^@"B^;L1^^^^^4
"KRN",.401,77,2,1,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^USC(8932.2,+$P(Y(1),U,2),0)),U)'="" I D0>0 S DISX(1)=X
"KRN",.401,77,2,1,"F")
0
"KRN",.401,77,2,1,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^USC(8932.2,+$P(Y(1),U,2),0)),U)'="" I D0>0 S DISX(1)=X
"KRN",.401,77,2,1,"QCON")
I (DISX(1)]]0)&(DISX(1)']]1)
"KRN",.401,77,2,1,"T")
1
"KRN",.401,77,2,1,"TXT")
(#12.2)'=""""
"KRN",.401,77,2,2,0)
200^12.6^CLINICAL CORE TRAINEE^^;"ACTIVE TRAINEE?: "^^^^^3
"KRN",.401,77,2,2,"F")
Mz^NO^N (NO)
"KRN",.401,77,2,2,"GET")
S DISX(2)=$P($G(^VA(200,D0,12)),U,6)
"KRN",.401,77,2,2,"QCON")
I DISX(2)="N"
"KRN",.401,77,2,2,"SER")
0.9703^0.9703
"KRN",.401,77,2,2,"T")
N^NO^N (NO)
"KRN",.401,77,2,2,"TXT")
CLINICAL CORE TRAINEE equals N (NO)
"KRN",.401,77,2,3,0)
200^^VHA TRAINING FACILITY^"12.4^;"TRAINING FACILITY: "^^^^^4
"KRN",.401,77,2,3,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,77,2,3,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,77,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,77,2,3,"TXT")
VHA TRAINING FACILITY not null
"KRN",.401,77,2,"B",200,1)

"KRN",.401,77,2,"B",200,2)

"KRN",.401,77,2,"B",200,3)

"KRN",.401,78,-1)
0^4
"KRN",.401,78,0)
XU-CLINICAL ACTIVE TRAINEE^3041220.1245^@^200^^@^3050801
"KRN",.401,78,2,0)
^.4014^3^3
"KRN",.401,78,2,1,0)
200^^(#12.2)'=""^@"B^;L1^^^^^4
"KRN",.401,78,2,1,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^USC(8932.2,+$P(Y(1),U,2),0)),U)'="" I D0>0 S DISX(1)=X
"KRN",.401,78,2,1,"F")
0
"KRN",.401,78,2,1,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^USC(8932.2,+$P(Y(1),U,2),0)),U)'="" I D0>0 S DISX(1)=X
"KRN",.401,78,2,1,"QCON")
I (DISX(1)]]0)&(DISX(1)']]1)
"KRN",.401,78,2,1,"T")
1
"KRN",.401,78,2,1,"TXT")
(#12.2)'=""""
"KRN",.401,78,2,2,0)
200^^$S((#12.6)="YES":"YES",(#12.6)="":"YES",1:"")^"^;"ACTIVE TRAINEE?: "^^^^^4
"KRN",.401,78,2,2,3,0)
^.401419^2^2
"KRN",.401,78,2,2,3,1,0)
OVF0^9.2
"KRN",.401,78,2,2,3,1,"OVF0")
S Y(2)=$C(59)_$P($G(^DD(200,12.6,0)),U,3),Y(6)=$C(59)_$P($G(^DD(200,12.6,0)),U,3),Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"")
"KRN",.401,78,2,2,3,2,0)
OVF0^9.3
"KRN",.401,78,2,2,3,2,"OVF0")
X DPP(2,"OVF0",9.2) S X=$P($P(Y(2),$C(59)_$P(Y(1),U,6)_":",2),$C(59))="YES",Y(3)=$G(X) S X="YES",Y(4)=$G(X),Y(5)=$G(X) S X=$P($P(Y(6),$C(59)_$P(Y(1),U,6)_":",2),$C(59))
"KRN",.401,78,2,2,3,"B","OVF0",1)

"KRN",.401,78,2,2,3,"B","OVF0",2)

"KRN",.401,78,2,2,"CM")
X DPP(2,"OVF0",9.3) S X=X="",Y(7)=$G(X) S X="YES",Y(8)=$G(X) S X=1,Y(9)=$G(X) S X="",X=$S(Y(3):Y(4),Y(7):Y(8),Y(9):X) I D0>0 S DISX(2)=X
"KRN",.401,78,2,2,"GET")
X DPP(2,"OVF0",9.3) S X=X="",Y(7)=$G(X) S X="YES",Y(8)=$G(X) S X=1,Y(9)=$G(X) S X="",X=$S(Y(3):Y(4),Y(7):Y(8),Y(9):X) I D0>0 S DISX(2)=X
"KRN",.401,78,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,78,2,2,"TXT")
$S((#12.6)=""YES"":""YES"",(#12.6)="""":""YES"",1:"""") not null
"KRN",.401,78,2,3,0)
200^^VHA TRAINING FACILITY^"12.4^;"TRAINING FACILITY: "^^^^^4
"KRN",.401,78,2,3,"CM")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,78,2,3,"GET")
S Y(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(Y(1),U,4),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,78,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,78,2,3,"TXT")
VHA TRAINING FACILITY not null
"KRN",.401,78,2,"B",200,1)

"KRN",.401,78,2,"B",200,2)

"KRN",.401,78,2,"B",200,3)

"KRN",.402,7,-1)
0^2
"KRN",.402,7,0)
XUNEW USER^3050103.0709^^200^^#^3050103
"KRN",.402,7,"DIAB",1,1,200.010113,0)
ALL
"KRN",.402,7,"DIAB",1,1,200.02,0)
ALL
"KRN",.402,7,"DIAB",2,0,200,0)
NAME COMPONENTS:
"KRN",.402,7,"DR",1,200)
D CHKPTR^XLFNAME2;^20^VA(20,^^S I(0,0)=D0 S Y(1)=$S($D(^VA(200,D0,3.1)):^(3.1),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X S X=$S(D(0)>0:D(0),1:"");1;13;7;9.2;9.4;8;5;.111;.112;.113;.114;.115;.116;.151;9;16;29;28;2.1;11.1;3;201;203;31.3;
"KRN",.402,7,"DR",1,200,1)
14;31.1;200.04;200.05;200.06;200.09;200.1;200.11;15;41;41.2;.131;.132;.135;.136;.137;.138;200.07;101.01;101.02;101.13;8932.1;
"KRN",.402,7,"DR",2,20)
1;2;3;4;5;6;
"KRN",.402,7,"DR",2,200.010113)
.01:.03
"KRN",.402,7,"DR",2,200.02)
.01:1
"KRN",.402,7,"DR",2,200.03)
.01:2;
"KRN",.402,7,"DR",2,200.05)
.01:3;
"KRN",.402,8,-1)
0^1
"KRN",.402,8,0)
XUEXISTING USER^3050103.0705^^200^^#^3050103
"KRN",.402,8,"DIAB",1,1,200.010113,0)
ALL
"KRN",.402,8,"DIAB",1,1,200.02,0)
ALL
"KRN",.402,8,"DIAB",1,1,200.05,0)
ALL
"KRN",.402,8,"DIAB",6,0,200,0)
NAME COMPONENTS:
"KRN",.402,8,"DR",1,200)
S XUITNAME=1;.01;K XUITNAME;S D0=DA;D CHKPTR^XLFNAME2;^20^VA(20,^^S I(0,0)=D0 S Y(1)=$S($D(^VA(200,D0,3.1)):^(3.1),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X S X=$S(D(0)>0:D(0),1:"");1;13;7;9.2;9.4;8;5;.111;.112;.113;.114;.115;.116;.151;
"KRN",.402,8,"DR",1,200,1)
9;16;29;28;2.1;11.1;3;201;203;31.3;14;31.1;200.04;200.05;200.06;200.09;200.1;200.11;200.18;15;41;41.2;.131;.132;.135;.136;.137;.138;200.07;101.01;101.02;101.13;8932.1;
"KRN",.402,8,"DR",2,20)
1;2;3;4;5;6;S DIEFIRE="RM";
"KRN",.402,8,"DR",2,200.010113)
.01:.03
"KRN",.402,8,"DR",2,200.02)
.01:1
"KRN",.402,8,"DR",2,200.03)
.01:2;
"KRN",.402,8,"DR",2,200.05)
.01:3
"KRN",.402,20,-1)
0^3
"KRN",.402,20,0)
XUREACT USER^3050103.0736^^200^^^3050103
"KRN",.402,20,"DIAB",1,1,200.010113,0)
ALL
"KRN",.402,20,"DIAB",1,1,200.02,0)
ALL
"KRN",.402,20,"DIAB",7,0,200,0)
NAME COMPONENTS:
"KRN",.402,20,"DR",1,200)
9.2///@;S XUITNAME=1;.01;K XUITNAME;S D0=DA;D CHKPTR^XLFNAME2;^20^VA(20,^^S I(0,0)=D0 S Y(1)=$S($D(^VA(200,D0,3.1)):^(3.1),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X S X=$S(D(0)>0:D(0),1:"");1;13;7;9.2;9.4;8;5;.111;.112;.113;.114;.115;
"KRN",.402,20,"DR",1,200,1)
.116;.151;9;16;29;28;2.1;11.1;3;201;203;31.3;14;31.1;200.04;200.05;200.06;200.09;200.1;200.11;15;41;41.2;.131;.132;.135;.136;.137;.138;200.07;101.01;101.02;101.13;8932.1;
"KRN",.402,20,"DR",2,20)
1;2;3;4;5;6;S DIEFIRE="RM";
"KRN",.402,20,"DR",2,200.010113)
.01:.03
"KRN",.402,20,"DR",2,200.02)
.01:1
"KRN",.402,20,"DR",2,200.03)
.01:2;
"KRN",.402,20,"DR",2,200.05)
.01:3;
"KRN",.403,3,-1)
0^2
"KRN",.403,3,0)
XUEXISTING USER^^^^2920804^^^200^0^0^1
"KRN",.403,3,2)
1;33
"KRN",.403,3,11)
S XUNOTRIG=1 D CHKPTR^XLFNAME2,REQ^XUSER2()
"KRN",.403,3,12)
K XUNOTRIG,XUITNAME
"KRN",.403,3,40,0)
^.4031I^11^9
"KRN",.403,3,40,1,0)
1^^1,1^2^5
"KRN",.403,3,40,1,1)
Page 1
"KRN",.403,3,40,1,40,0)
^.4032PI^47^2
"KRN",.403,3,40,1,40,28,0)
XUEXISTING USER 1^2^2,1^e
"KRN",.403,3,40,1,40,47,0)
XUEXISTING USER 0^1^1,1^d
"KRN",.403,3,40,2,0)
2^^1,1^3^1
"KRN",.403,3,40,2,1)
Page 2
"KRN",.403,3,40,2,15,0)
^^1^1^2941114^
"KRN",.403,3,40,2,15,1,0)
This is Page 2 of the edit existing user.
"KRN",.403,3,40,2,40,0)
^.4032PI^47^2
"KRN",.403,3,40,2,40,29,0)
XUEXISTING USER 2^2^2,1^e
"KRN",.403,3,40,2,40,47,0)
XUEXISTING USER 0^1^1,1^d
"KRN",.403,3,40,3,0)
1.1^^11,9^^^1^17,66^^
"KRN",.403,3,40,3,1)
SECONDARY MENU OPTIONS Subpage
"KRN",.403,3,40,3,40,0)
^.4032PI^30^1
"KRN",.403,3,40,3,40,30,0)
XUEXISTING USER 3^1^2,3^e
"KRN",.403,3,40,4,0)
1.2^^8,16^^^1^13,59^^
"KRN",.403,3,40,4,1)
DIVISION Subpage
"KRN",.403,3,40,4,40,0)
^.4032PI^31^1
"KRN",.403,3,40,4,40,31,0)
XUEXISTING USER 4^1^2,3^e
"KRN",.403,3,40,5,0)
3^^1,1^4^2
"KRN",.403,3,40,5,1)
Page 3
"KRN",.403,3,40,5,40,0)
^.4032PI^63^3
"KRN",.403,3,40,5,40,47,0)
XUEXISTING USER 0^1^1,1^d
"KRN",.403,3,40,5,40,50,0)
XUEXISTING USER 5^2^2,1^e
"KRN",.403,3,40,5,40,63,0)
XU-PERSON CLASS 2^3^12,1^e
"KRN",.403,3,40,5,40,63,2)
6^!IEN^n
"KRN",.403,3,40,8,0)
1.3^^8,12^^^1^17,65
"KRN",.403,3,40,8,1)
Page 1.3^
"KRN",.403,3,40,8,11)

"KRN",.403,3,40,8,12)
D:XLFNEW'=XLFNAME PUT^DDSVAL(200,XLFNDA,.01,XLFNEW,"","I") K XLFNDA,XLFNAME,XLFNEW
"KRN",.403,3,40,8,40,0)
^.4032IP^157^1
"KRN",.403,3,40,8,40,157,0)
XUEXISTING USER NAME COMPONENT^1^1,1^e
"KRN",.403,3,40,8,40,157,1)
10.1
"KRN",.403,3,40,9,0)
4^^1,1^5^3
"KRN",.403,3,40,9,1)
Page 4
"KRN",.403,3,40,9,40,0)
^.4032IP^172^3
"KRN",.403,3,40,9,40,47,0)
XUEXISTING USER 0^1^1,1^e
"KRN",.403,3,40,9,40,171,0)
XUEXISTING USER CPRS^2^2,1^e
"KRN",.403,3,40,9,40,172,0)
XUEXISTING USER CPRS TAB^3^8,1^e
"KRN",.403,3,40,9,40,172,2)
10^!IEN^n^^^
"KRN",.403,3,40,10,0)
5^^1,1^1^4
"KRN",.403,3,40,10,1)
Page 5
"KRN",.403,3,40,10,40,0)
^.4032IP^185^2
"KRN",.403,3,40,10,40,47,0)
XUEXISTING USER 0^1^1,1^d
"KRN",.403,3,40,10,40,185,0)
XUEXISTING USER TRAINEE^2^2,1^e
"KRN",.403,3,40,11,0)
6^^9,45^^^1^13,80
"KRN",.403,3,40,11,1)
Termination^11,2,1
"KRN",.403,3,40,11,40,0)
^.4032IP^190^1
"KRN",.403,3,40,11,40,190,0)
Termination^1^1,1^e
"KRN",.403,14,-1)
0^4
"KRN",.403,14,0)
XUREACT USER^^@^^2950327.1641^^^200^0^0^1
"KRN",.403,14,11)
S XUNOTRIG=1 D CHKPTR^XLFNAME2,REQ^XUSER2()
"KRN",.403,14,12)
K XUNOTRIG,XUITNAME
"KRN",.403,14,40,0)
^.4031I^8^8
"KRN",.403,14,40,1,0)
1^^1,1^2^5
"KRN",.403,14,40,1,1)
Page 1
"KRN",.403,14,40,1,11)
N % S %=$$GET^DDSVAL(200,XUN,2) D:%="" HLP^DDSUTL("USER has no ACCESS CODE")
"KRN",.403,14,40,1,40,0)
^.4032IP^47^2
"KRN",.403,14,40,1,40,28,0)
XUEXISTING USER 1^2^2,1^e
"KRN",.403,14,40,1,40,28,11)
D PUT^DDSVAL(DIE,.DA,9.2,"@"),PUT^DDSVAL(DIE,.DA,7,"@")
"KRN",.403,14,40,1,40,47,0)
XUEXISTING USER 0^1^1,1^e
"KRN",.403,14,40,2,0)
2^^1,1^3^1
"KRN",.403,14,40,2,1)
Page 2
"KRN",.403,14,40,2,40,0)
^.4032IP^47^2
"KRN",.403,14,40,2,40,29,0)
XUEXISTING USER 2^2^2,1^e
"KRN",.403,14,40,2,40,47,0)
XUEXISTING USER 0^1^1,1^e
"KRN",.403,14,40,3,0)
3^^1,1^4^2
"KRN",.403,14,40,3,1)
Page 3
"KRN",.403,14,40,3,40,0)
^.4032IP^63^3
"KRN",.403,14,40,3,40,47,0)
XUEXISTING USER 0^1^1,1^e
"KRN",.403,14,40,3,40,50,0)
XUEXISTING USER 5^2^2,1^e
"KRN",.403,14,40,3,40,63,0)
XU-PERSON CLASS 2^3^13,1^e
"KRN",.403,14,40,3,40,63,2)
4^!IEN^n
"KRN",.403,14,40,4,0)
1.1^^11,9^^^1^17,66
"KRN",.403,14,40,4,1)
Page 1.1
"KRN",.403,14,40,4,40,0)
^.4032IP^30^1
"KRN",.403,14,40,4,40,30,0)
XUEXISTING USER 3^1^2,3^e
"KRN",.403,14,40,5,0)
1.2^^8,16^^^1^13,59
"KRN",.403,14,40,5,1)
Page 1.2
"KRN",.403,14,40,5,40,0)
^.4032IP^31^1
"KRN",.403,14,40,5,40,31,0)
XUEXISTING USER 4^1^2,2^e
"KRN",.403,14,40,6,0)
1.3^^8,12^^^1^17,65
"KRN",.403,14,40,6,1)
Page 1.3
"KRN",.403,14,40,6,12)
D:XLFNEW'=XLFNAME PUT^DDSVAL(200,XLFNDA,.01,XLFNEW,"","I") K XLFNDA,XLFNAME,XLFNEW
"KRN",.403,14,40,6,40,0)
^.4032IP^157^1
"KRN",.403,14,40,6,40,157,0)
XUEXISTING USER NAME COMPONENT^1^1,1^e
"KRN",.403,14,40,6,40,157,1)
10.1
"KRN",.403,14,40,7,0)
4^^1,1^5^3
"KRN",.403,14,40,7,1)
Page 4
"KRN",.403,14,40,7,40,0)
^.4032IP^172^3
"KRN",.403,14,40,7,40,47,0)
XUEXISTING USER 0^1^1,1^d
"KRN",.403,14,40,7,40,171,0)
XUEXISTING USER CPRS^2^2,1^e
"KRN",.403,14,40,7,40,172,0)
XUEXISTING USER CPRS TAB^3^8,1^e
"KRN",.403,14,40,7,40,172,2)
10^!IEN^n
"KRN",.403,14,40,8,0)
5^^1,1^1^4
"KRN",.403,14,40,8,1)
Page 5
"KRN",.403,14,40,8,40,0)
^.4032IP^185^2
"KRN",.403,14,40,8,40,47,0)
XUEXISTING USER 0^1^1,1^e
"KRN",.403,14,40,8,40,185,0)
XUEXISTING USER TRAINEE^2^2,1^e
"KRN",.403,16,-1)
0^3
"KRN",.403,16,0)
XUNEW USER^ ^@^^2960729.0925^^^200^0^0^1
"KRN",.403,16,11)
S (XUNOTRIG,XLFCOMP,XUITNAME)=1 D REQ^XUSER2()
"KRN",.403,16,12)
K XUNOTRIG,XUITNAME
"KRN",.403,16,40,0)
^.4031I^8^8
"KRN",.403,16,40,1,0)
1^^1,1^2^5
"KRN",.403,16,40,1,1)
Page 1
"KRN",.403,16,40,1,40,0)
^.4032IP^47^2
"KRN",.403,16,40,1,40,28,0)
XUEXISTING USER 1^2^2,1^e
"KRN",.403,16,40,1,40,47,0)
XUEXISTING USER 0^1^1,1^e
"KRN",.403,16,40,2,0)
2^^1,1^3^1
"KRN",.403,16,40,2,1)
Page 2
"KRN",.403,16,40,2,40,0)
^.4032IP^47^2
"KRN",.403,16,40,2,40,29,0)
XUEXISTING USER 2^2^2,1^e
"KRN",.403,16,40,2,40,47,0)
XUEXISTING USER 0^1^1,1^e
"KRN",.403,16,40,3,0)
3^^1,1^4^2
"KRN",.403,16,40,3,1)
Page 3
"KRN",.403,16,40,3,40,0)
^.4032IP^64^4
"KRN",.403,16,40,3,40,47,0)
XUEXISTING USER 0^2^1,1^e
"KRN",.403,16,40,3,40,50,0)
XUEXISTING USER 5^3^2,1^e
"KRN",.403,16,40,3,40,63,0)
XU-PERSON CLASS 2^4^13,1^e
"KRN",.403,16,40,3,40,63,2)
4^!IEN^n
"KRN",.403,16,40,3,40,64,0)
XUNEW USER^1^1,1^e
"KRN",.403,16,40,4,0)
1.1^^11,9^^^1^17,66
"KRN",.403,16,40,4,1)
Page 1.1
"KRN",.403,16,40,4,40,0)
^.4032IP^30^1
"KRN",.403,16,40,4,40,30,0)
XUEXISTING USER 3^1^2,3^e
"KRN",.403,16,40,5,0)
1.2^^8,16^^^1^13,59
"KRN",.403,16,40,5,1)
Page 1.2
"KRN",.403,16,40,5,40,0)
^.4032IP^31^1
"KRN",.403,16,40,5,40,31,0)
XUEXISTING USER 4^1^2,3^e
"KRN",.403,16,40,6,0)
1.3^^8,12^^^1^17,65
"KRN",.403,16,40,6,1)
Page 1.3
"KRN",.403,16,40,6,12)
D:XLFNEW'=XLFNAME PUT^DDSVAL(200,XLFNDA,.01,XLFNEW,"","I") K XLFNDA,XLFNAME,XLFNEW
"KRN",.403,16,40,6,40,0)
^.4032IP^157^1
"KRN",.403,16,40,6,40,157,0)
XUEXISTING USER NAME COMPONENT^1^1,1^e
"KRN",.403,16,40,6,40,157,1)
10.1
"KRN",.403,16,40,7,0)
4^^1,1^5^3
"KRN",.403,16,40,7,1)
Page 4
"KRN",.403,16,40,7,40,0)
^.4032IP^172^3
"KRN",.403,16,40,7,40,47,0)
XUEXISTING USER 0^1^1,1^d
"KRN",.403,16,40,7,40,171,0)
XUEXISTING USER CPRS^2^2,1^e
"KRN",.403,16,40,7,40,172,0)
XUEXISTING USER CPRS TAB^3^8,1^e
"KRN",.403,16,40,7,40,172,2)
10^!IEN^n^^^
"KRN",.403,16,40,8,0)
5^^1,1^1^4
"KRN",.403,16,40,8,1)
Page 5
"KRN",.403,16,40,8,40,0)
^.4032IP^185^2
"KRN",.403,16,40,8,40,47,0)
XUEXISTING USER 0^1^1,1^e
"KRN",.403,16,40,8,40,185,0)
XUEXISTING USER TRAINEE^2^2,1^e
"KRN",.403,29,-1)
0^1
"KRN",.403,29,0)
XU-CLINICAL TRAINEE^@^@^^3021002.0807^^^200^0^0^1
"KRN",.403,29,11)
D REQ^XUSER2("",1)
"KRN",.403,29,40,0)
^.4031I^1^1
"KRN",.403,29,40,1,0)
1^^1,1
"KRN",.403,29,40,1,1)
Page 1
"KRN",.403,29,40,1,40,0)
^.4032IP^175^2
"KRN",.403,29,40,1,40,174,0)
XU-CLINICAL TRAINEE HDR^1^1,1^d
"KRN",.403,29,40,1,40,175,0)
XU-CLINICAL TRAINEE 1^2^2,1^e
"KRN",.404,28,0)
XUEXISTING USER 1^200^^^
"KRN",.404,28,40,0)
^.4044I^21^19
"KRN",.404,28,40,1,0)
2^NAME...^3
"KRN",.404,28,40,1,1)
.01
"KRN",.404,28,40,1,2)
3,12^35^3,4^1
"KRN",.404,28,40,1,10)
S XLFNDA=DA,XLFNAME=X,DDSBR="GIVEN^^1.3"
"KRN",.404,28,40,1,11)
S XUITNAME=1 D:'$D(XLFCOMP) HLP^DDSUTL(" *** Press <RET> to edit the component parts of this name. ***") I $D(XLFCOMP) S XLFNDA=DA,XLFNAME=X,DDSBR="GIVEN^^1.3" K XLFCOMP
"KRN",.404,28,40,1,13)
S XLFNDA=DA,XLFNAME=X,DDSBR="GIVEN^^1.3",XLFNCHG=1
"KRN",.404,28,40,2,0)
4^TITLE^3^^F4
"KRN",.404,28,40,2,1)
8
"KRN",.404,28,40,2,2)
4,12^30^4,5
"KRN",.404,28,40,3,0)
3^INITIAL^3
"KRN",.404,28,40,3,1)
1
"KRN",.404,28,40,3,2)
3,65^5^3,56
"KRN",.404,28,40,4,0)
5^NICK NAME^3
"KRN",.404,28,40,4,1)
13
"KRN",.404,28,40,4,2)
4,65^10^4,54
"KRN",.404,28,40,5,0)
13^PRIMARY MENU OPTION^3^
"KRN",.404,28,40,5,1)
201
"KRN",.404,28,40,5,2)
10,33^30^10,12
"KRN",.404,28,40,6,0)
14^Select SECONDARY MENU OPTIONS^3
"KRN",.404,28,40,6,1)
203
"KRN",.404,28,40,6,2)
11,33^30^11,2
"KRN",.404,28,40,6,7)
^1.1
"KRN",.404,28,40,7,0)
15^Want to edit ACCESS CODE (Y/N)^3
"KRN",.404,28,40,7,1)
2.1
"KRN",.404,28,40,7,2)
12,33^3^12,1
"KRN",.404,28,40,8,0)
17^Want to edit VERIFY CODE (Y/N)^3
"KRN",.404,28,40,8,1)
11.1
"KRN",.404,28,40,8,2)
13,33^3^13,1
"KRN",.404,28,40,9,0)
16^FILE MANAGER ACCESS CODE^3
"KRN",.404,28,40,9,1)
3
"KRN",.404,28,40,9,2)
12,65^15^12,39
"KRN",.404,28,40,12,0)
18^Select DIVISION^3
"KRN",.404,28,40,12,1)
16
"KRN",.404,28,40,12,2)
15,33^30^15,16
"KRN",.404,28,40,12,7)
^1.2
"KRN",.404,28,40,13,0)
19^SERVICE/SECTION^3^^
"KRN",.404,28,40,13,1)
29
"KRN",.404,28,40,13,2)
16,33^30^16,16
"KRN",.404,28,40,14,0)
9^MAIL CODE^3
"KRN",.404,28,40,14,1)
28
"KRN",.404,28,40,14,2)
6,65^10^6,54
"KRN",.404,28,40,15,0)
1^1^1^
"KRN",.404,28,40,15,2)
^^1,74
"KRN",.404,28,40,16,0)
6^SSN^3^^F1
"KRN",.404,28,40,16,1)
9
"KRN",.404,28,40,16,2)
5,12^9^5,7
"KRN",.404,28,40,17,0)
8^DEGREE^3^^F8
"KRN",.404,28,40,17,1)
10.6
"KRN",.404,28,40,17,2)
6,12^10^6,4
"KRN",.404,28,40,18,0)
10^DISUSER^3
"KRN",.404,28,40,18,1)
7
"KRN",.404,28,40,18,2)
7,12^3^7,3
"KRN",.404,28,40,19,0)
11^TERMINATION DATE^3
"KRN",.404,28,40,19,1)
9.2
"KRN",.404,28,40,19,2)
7,66^11^7,48
"KRN",.404,28,40,20,0)
12^Termination Reason^3
"KRN",.404,28,40,20,1)
9.4
"KRN",.404,28,40,20,2)
8,23^45^8,3
"KRN",.404,28,40,21,0)
7^DOB^3^^F2
"KRN",.404,28,40,21,1)
5
"KRN",.404,28,40,21,2)
5,65^11^5,60
"KRN",.404,29,0)
XUEXISTING USER 2^200^^^
"KRN",.404,29,40,0)
^.4044I^18^15
"KRN",.404,29,40,1,0)
2^TIMED READ (# OF SECONDS)^3
"KRN",.404,29,40,1,1)
200.1
"KRN",.404,29,40,1,2)
4,31^5^4,4
"KRN",.404,29,40,2,0)
3^MULTIPLE SIGN-ON^3
"KRN",.404,29,40,2,1)
200.04
"KRN",.404,29,40,2,2)
6,31^11^6,13
"KRN",.404,29,40,2,11)
D EN^DDIOL("If you select 'Only one IP' be sure to put a value into the MULTIPLE SIGN-ON LIMIT field so users can sign-on at least once.")
"KRN",.404,29,40,3,0)
5.2^AUTO MENU^3
"KRN",.404,29,40,3,1)
200.06
"KRN",.404,29,40,3,2)
7,60^20^7,49
"KRN",.404,29,40,4,0)
5^ASK DEVICE TYPE AT SIGN-ON^3
"KRN",.404,29,40,4,1)
200.05
"KRN",.404,29,40,4,2)
7,31^9^7,3
"KRN",.404,29,40,5,0)
6^TYPE-AHEAD^3
"KRN",.404,29,40,5,1)
200.09
"KRN",.404,29,40,5,2)
8,60^11^8,48
"KRN",.404,29,40,6,0)
7^PROHIBITED TIMES FOR SIGN-ON^3
"KRN",.404,29,40,6,1)
15
"KRN",.404,29,40,6,2)
8,31^9^8,1
"KRN",.404,29,40,7,0)
10^ALLOWED TO USE SPOOLER^3
"KRN",.404,29,40,7,1)
41
"KRN",.404,29,40,7,2)
12,31^3^12,7
"KRN",.404,29,40,8,0)
12^CAN MAKE INTO A MAIL MESSAGE^3
"KRN",.404,29,40,8,1)
41.2
"KRN",.404,29,40,8,2)
13,31^3^13,1
"KRN",.404,29,40,10,0)
13^FILE RANGE^3
"KRN",.404,29,40,10,1)
31.1
"KRN",.404,29,40,10,2)
15,31^30^15,19
"KRN",.404,29,40,12,0)
14^ALWAYS SHOW SECONDARIES^3
"KRN",.404,29,40,12,1)
200.11
"KRN",.404,29,40,12,2)
16,31^3^16,6
"KRN",.404,29,40,13,0)
1^2^1^
"KRN",.404,29,40,13,2)
^^1,74^1
"KRN",.404,29,40,14,0)
11^PAC^3
"KRN",.404,29,40,14,1)
14
"KRN",.404,29,40,14,2)
12,63^8^12,58
"KRN",.404,29,40,16,0)
8^AUTO SIGN-ON^3
"KRN",.404,29,40,16,1)
200.18
"KRN",.404,29,40,16,2)
9,60^3^9,46
"KRN",.404,29,40,17,0)
9^Preferred Editor^3
"KRN",.404,29,40,17,1)
31.3
"KRN",.404,29,40,17,2)
10,31^30^10,13
"KRN",.404,29,40,17,3)
SCREEN EDITOR
"KRN",.404,29,40,18,0)
3.2^MULTIPLE SIGN-ON LIMIT^3
"KRN",.404,29,40,18,1)
200.19
"KRN",.404,29,40,18,2)
6,70^3^6,46
"KRN",.404,30,0)
XUEXISTING USER 3^200.03
"KRN",.404,30,40,0)
^.4044I^3^3
"KRN",.404,30,40,1,0)
1^SECONDARY MENU OPTIONS^1^
"KRN",.404,30,40,1,2)
^^1,33^
"KRN",.404,30,40,2,0)
2^SECONDARY MENU OPTIONS^3
"KRN",.404,30,40,2,1)
.01
"KRN",.404,30,40,2,2)
3,25^30^3,1
"KRN",.404,30,40,3,0)
3^SYNONYM^3
"KRN",.404,30,40,3,1)
2
"KRN",.404,30,40,3,2)
4,25^4^4,16
"KRN",.404,31,0)
XUEXISTING USER 4^200.02
"KRN",.404,31,40,0)
^.4044I^3^3
"KRN",.404,31,40,1,0)
1^DIVISION^1^
"KRN",.404,31,40,1,2)
^^1,33^
"KRN",.404,31,40,2,0)
2^DIVISION^3
"KRN",.404,31,40,2,1)
.01
"KRN",.404,31,40,2,2)
3,11^30^3,1
"KRN",.404,31,40,3,0)
3^DEFAULT^3
"KRN",.404,31,40,3,1)
1
"KRN",.404,31,40,3,2)
4,11^3^4,2
"KRN",.404,47,0)
XUEXISTING USER 0^200^
"KRN",.404,47,40,0)
^.4044I^6^5
"KRN",.404,47,40,1,0)
2^NAME^3
"KRN",.404,47,40,1,1)
.01
"KRN",.404,47,40,1,2)
2,7^30^2,1
"KRN",.404,47,40,1,4)
^^^1
"KRN",.404,47,40,2,0)
1^Edit an Existing User^1^
"KRN",.404,47,40,2,2)
^^1,30^1
"KRN",.404,47,40,3,0)
3^Page^1^
"KRN",.404,47,40,3,2)
^^2,69
"KRN",.404,47,40,5,0)
4^of 5^1^
"KRN",.404,47,40,5,2)
^^2,76
"KRN",.404,47,40,6,0)
5^_______________________________________________________________________________^1
"KRN",.404,47,40,6,2)
^^3,1
"KRN",.404,50,0)
XUEXISTING USER 5^200
"KRN",.404,50,40,0)
^.4044I^10^10
"KRN",.404,50,40,1,0)
1^3^1^
"KRN",.404,50,40,1,2)
^^1,74^
"KRN",.404,50,40,2,0)
2^PROHIBITED TIMES FOR SIGN-ON^3
"KRN",.404,50,40,2,1)
15
"KRN",.404,50,40,2,2)
3,31^21^3,1
"KRN",.404,50,40,3,0)
3^PHONE^3
"KRN",.404,50,40,3,1)
.131
"KRN",.404,50,40,3,2)
5,19^20^5,12
"KRN",.404,50,40,4,0)
4^OFFICE PHONE^3
"KRN",.404,50,40,4,1)
.132
"KRN",.404,50,40,4,2)
5,56^20^5,42
"KRN",.404,50,40,5,0)
7^VOICE PAGER^3
"KRN",.404,50,40,5,1)
.137
"KRN",.404,50,40,5,2)
7,19^20^7,6
"KRN",.404,50,40,6,0)
6^FAX NUMBER^3
"KRN",.404,50,40,6,1)
.136
"KRN",.404,50,40,6,2)
6,56^20^6,44
"KRN",.404,50,40,7,0)
5^COMMERCIAL PHONE^3
"KRN",.404,50,40,7,1)
.135
"KRN",.404,50,40,7,2)
6,19^20^6,1
"KRN",.404,50,40,8,0)
8^DIGITAL PAGER^3
"KRN",.404,50,40,8,1)
.138
"KRN",.404,50,40,8,2)
7,56^20^7,41
"KRN",.404,50,40,9,0)
9^LANGUAGE^3
"KRN",.404,50,40,9,1)
200.07
"KRN",.404,50,40,9,2)
8,19^10^8,9
"KRN",.404,50,40,10,0)
10^Person Class                                         Effective     Expired^1
"KRN",.404,50,40,10,2)
^^10,2
"KRN",.404,63,0)
XU-PERSON CLASS 2^200.05
"KRN",.404,63,40,0)
^.4044I^3^3
"KRN",.404,63,40,1,0)
1^^3
"KRN",.404,63,40,1,1)
.01
"KRN",.404,63,40,1,2)
1,2^40
"KRN",.404,63,40,1,11)
D DDS1^XUA4A72
"KRN",.404,63,40,1,14)
S:$L(DDSOLD)&(X'=DDSOLD) DDSERROR=1
"KRN",.404,63,40,2,0)
2^^3
"KRN",.404,63,40,2,1)
2
"KRN",.404,63,40,2,2)
1,52^12
"KRN",.404,63,40,2,4)
^^^0
"KRN",.404,63,40,2,12)
D DDS2^XUA4A72
"KRN",.404,63,40,2,14)
D DDS3^XUA4A72(2)
"KRN",.404,63,40,3,0)
3^^3
"KRN",.404,63,40,3,1)
3
"KRN",.404,63,40,3,2)
1,67^12
"KRN",.404,63,40,3,14)
D DDS3^XUA4A72(3)
"KRN",.404,64,0)
XUNEW USER^200
"KRN",.404,157,0)
XUEXISTING USER NAME COMPONENT^20
"KRN",.404,157,11)
I $G(XLFNCHG),$D(XLFNC) N FLD,NC,SUB M NC=XLFNC K XLFNC S (XLFNAME,XLFNEW)=NC K XLFNCHG S FLD=0 F SUB="FAMILY","GIVEN","MIDDLE","","SUFFIX" S FLD=FLD+1 D:SUB]"" PUT^DDSVAL(DIE,DA,FLD,$G(NC(SUB)),"","I")
"KRN",.404,157,40,0)
^.4044I^8^7
"KRN",.404,157,40,1,0)
1^NAME COMPONENTS^1
"KRN",.404,157,40,1,2)
^^2,38
"KRN",.404,157,40,2,0)
5^Family (Last)^3
"KRN",.404,157,40,2,1)
1
"KRN",.404,157,40,2,2)
6,18^35^6,3
"KRN",.404,157,40,3,0)
3^Given (First)^3^^GIVEN
"KRN",.404,157,40,3,1)
2
"KRN",.404,157,40,3,2)
4,18^25^4,3
"KRN",.404,157,40,4,0)
4^Middle^3
"KRN",.404,157,40,4,1)
3
"KRN",.404,157,40,4,2)
5,18^25^5,10
"KRN",.404,157,40,5,0)
2^Prefix^3
"KRN",.404,157,40,5,1)
4
"KRN",.404,157,40,5,2)
3,18^10^3,10
"KRN",.404,157,40,6,0)
6^Suffix^3
"KRN",.404,157,40,6,1)
5
"KRN",.404,157,40,6,2)
7,18^10^7,10
"KRN",.404,157,40,8,0)
8^^4
"KRN",.404,157,40,8,2)
9,3^35
"KRN",.404,157,40,8,30)
N NC S NC("FAMILY")={1},NC("GIVEN")={2},NC("MIDDLE")={3},NC("SUFFIX")={5},(XLFNEW,Y)=$$BLDNAME^XLFNAME8(.NC,35)
"KRN",.404,171,0)
XUEXISTING USER CPRS^200
"KRN",.404,171,40,0)
^.4044I^8^8
"KRN",.404,171,40,1,0)
1^4^1
"KRN",.404,171,40,1,2)
^^1,74
"KRN",.404,171,40,2,0)
2^RESTRICT PATIENT SELECTION^3
"KRN",.404,171,40,2,1)
101.01
"KRN",.404,171,40,2,2)
3,29^3^3,1
"KRN",.404,171,40,3,0)
3^OE/RR LIST^3
"KRN",.404,171,40,3,1)
101.02
"KRN",.404,171,40,3,2)
3,48^30^3,36
"KRN",.404,171,40,4,0)
4^CPRS TAB ACCESS:^1
"KRN",.404,171,40,4,2)
^^5,1
"KRN",.404,171,40,5,0)
5^Effective Date^1
"KRN",.404,171,40,5,2)
^^6,46
"KRN",.404,171,40,6,0)
6^Expiration Date^1
"KRN",.404,171,40,6,2)
^^6,62
"KRN",.404,171,40,7,0)
7^Name^1
"KRN",.404,171,40,7,2)
^^6,3
"KRN",.404,171,40,8,0)
8^Description^1
"KRN",.404,171,40,8,2)
^^6,9
"KRN",.404,172,0)
XUEXISTING USER CPRS TAB^200.010113
"KRN",.404,172,40,0)
^.4044I^4^4
"KRN",.404,172,40,1,0)
1^^3
"KRN",.404,172,40,1,1)
.01
"KRN",.404,172,40,1,2)
1,3^3
"KRN",.404,172,40,2,0)
2^^3
"KRN",.404,172,40,2,1)
.02
"KRN",.404,172,40,2,2)
1,47^11
"KRN",.404,172,40,3,0)
3^^3
"KRN",.404,172,40,3,1)
.03
"KRN",.404,172,40,3,2)
1,64^11
"KRN",.404,172,40,3,14)
I X]"" N XUD,XUM S XUD=$$GET^DDSVAL(DIE,.DA,.02,"","I") S XUM=$S(XUD="":"You must first enter an EFFECTIVE DATE.",X<XUD:"The EXPIRATION DATE must not precede the EFFECTIVE DATE.",1:"") I $G(XUM)]"" S DDSERROR=1 D HLP^DDSUTL(XUM)
"KRN",.404,172,40,4,0)
4^^4
"KRN",.404,172,40,4,2)
1,9^35
"KRN",.404,172,40,4,30)
=$S($D(^DD(101.13,1,0))#2:$$GET^DDSVAL(101.13,{.01;I},1),1:"")
"KRN",.404,174,0)
XU-CLINICAL TRAINEE HDR^200^
"KRN",.404,174,40,0)
^.4044I^4^4
"KRN",.404,174,40,1,0)
1^Edit Trainee Registration Data^1
"KRN",.404,174,40,1,2)
^^1,26
"KRN",.404,174,40,2,0)
2^NAME^3
"KRN",.404,174,40,2,1)
.01
"KRN",.404,174,40,2,2)
2,7^35^2,1
"KRN",.404,174,40,2,4)
^^^1
"KRN",.404,174,40,3,0)
3^Page 1 of^1
"KRN",.404,174,40,3,2)
^^2,69
"KRN",.404,174,40,4,0)
4^_______________________________________________________________________________^1
"KRN",.404,174,40,4,2)
^^3,1
"KRN",.404,175,0)
XU-CLINICAL TRAINEE 1^200
"KRN",.404,175,40,0)
^.4044I^22^20
"KRN",.404,175,40,1,0)
11^Title^3
"KRN",.404,175,40,1,1)
8
"KRN",.404,175,40,1,2)
9,28^30^9,21
"KRN",.404,175,40,2,0)
10^Degree^3
"KRN",.404,175,40,2,1)
10.6
"KRN",.404,175,40,2,2)
9,9^10^9,1
"KRN",.404,175,40,3,0)
12^Service/Section^3
"KRN",.404,175,40,3,1)
29
"KRN",.404,175,40,3,2)
10,18^30^10,1
"KRN",.404,175,40,4,0)
1^SSN^3^^F1
"KRN",.404,175,40,4,1)
9
"KRN",.404,175,40,4,2)
1,49^9^1,44
"KRN",.404,175,40,4,4)
^^^1
"KRN",.404,175,40,5,0)
14^Permanent Street 1^3^^F3
"KRN",.404,175,40,5,1)
.111
"KRN",.404,175,40,5,2)
11,21^50^11,1
"KRN",.404,175,40,6,0)
15^Permanent Street 2^3^^F4
"KRN",.404,175,40,6,1)
.112
"KRN",.404,175,40,6,2)
12,21^50^12,1
"KRN",.404,175,40,7,0)
16^Permanent Street 3^3^^F5
"KRN",.404,175,40,7,1)
.113
"KRN",.404,175,40,7,2)
13,21^50^13,1
"KRN",.404,175,40,8,0)
17^City^3^^F6
"KRN",.404,175,40,8,1)
.114
"KRN",.404,175,40,8,2)
14,7^30^14,1
"KRN",.404,175,40,9,0)
18^State^3^^F7
"KRN",.404,175,40,9,1)
.115
"KRN",.404,175,40,9,2)
15,8^30^15,1
"KRN",.404,175,40,10,0)
19^Zip Code^3^^F8
"KRN",.404,175,40,10,1)
.116
"KRN",.404,175,40,10,2)
15,50^10^15,40
"KRN",.404,175,40,11,0)
20^E-Mail Address^3^^F9
"KRN",.404,175,40,11,1)
.151
"KRN",.404,175,40,11,2)
16,17^50^16,1
"KRN",.404,175,40,12,0)
2^1^1
"KRN",.404,175,40,12,2)
^^1,79
"KRN",.404,175,40,15,0)
9^Current Degree Lvl^3^^12.1F
"KRN",.404,175,40,15,1)
12.1
"KRN",.404,175,40,15,2)
8,21^59^8,1
"KRN",.404,175,40,16,0)
8^Program of Study^3^^12.2F
"KRN",.404,175,40,16,1)
12.2
"KRN",.404,175,40,16,2)
7,19^59^7,1
"KRN",.404,175,40,17,0)
6^Last Training Month & Year^3^^12.3F
"KRN",.404,175,40,17,1)
12.3
"KRN",.404,175,40,17,2)
5,66^8^5,38
"KRN",.404,175,40,18,0)
13^Date of Birth^3^^F2
"KRN",.404,175,40,18,1)
5
"KRN",.404,175,40,18,2)
10,65^11^10,50
"KRN",.404,175,40,19,0)
4^VHA Training Fac.^3^^12.4F
"KRN",.404,175,40,19,1)
12.4
"KRN",.404,175,40,19,2)
4,20^27^4,1
"KRN",.404,175,40,19,4)
0
"KRN",.404,175,40,20,0)
3^Is this person a Registered Trainee?^3^^12.6F
"KRN",.404,175,40,20,1)
12.6
"KRN",.404,175,40,20,2)
3,39^3^3,1
"KRN",.404,175,40,20,12)
D REQ^XUSER2("",1)
"KRN",.404,175,40,21,0)
7^Trainee Inactive (Date)^3^^12.7F
"KRN",.404,175,40,21,1)
12.7
"KRN",.404,175,40,21,2)
6,63^11^6,38
"KRN",.404,175,40,22,0)
5^Start Date of Training^3^^12.8F
"KRN",.404,175,40,22,1)
12.8
"KRN",.404,175,40,22,2)
5,25^11^5,1
"KRN",.404,185,0)
XUEXISTING USER TRAINEE^200
"KRN",.404,185,40,0)
^.4044I^17^16
"KRN",.404,185,40,1,0)
1^5^1
"KRN",.404,185,40,1,2)
^^1,74
"KRN",.404,185,40,2,0)
2^PERMANENT ADDRESS:^1
"KRN",.404,185,40,2,2)
^^3,1
"KRN",.404,185,40,3,0)
3^Street 1^3^^F3
"KRN",.404,185,40,3,1)
.111
"KRN",.404,185,40,3,2)
4,21^50^4,11
"KRN",.404,185,40,4,0)
4^Street 2^3^^F4
"KRN",.404,185,40,4,1)
.112
"KRN",.404,185,40,4,2)
5,21^50^5,11
"KRN",.404,185,40,5,0)
5^Street 3^3^^F5
"KRN",.404,185,40,5,1)
.113
"KRN",.404,185,40,5,2)
6,21^50^6,11
"KRN",.404,185,40,6,0)
6^City^3^^F6
"KRN",.404,185,40,6,1)
.114
"KRN",.404,185,40,6,2)
7,21^30^7,15
"KRN",.404,185,40,7,0)
7^State^3^^F7
"KRN",.404,185,40,7,1)
.115
"KRN",.404,185,40,7,2)
8,21^30^8,14
"KRN",.404,185,40,8,0)
8^Zip Code^3^^F8
"KRN",.404,185,40,8,1)
.116
"KRN",.404,185,40,8,2)
9,21^10^9,11
"KRN",.404,185,40,9,0)
9^E-Mail Address^3^^F9
"KRN",.404,185,40,9,1)
.151
"KRN",.404,185,40,9,2)
10,21^50^10,5
"KRN",.404,185,40,11,0)
16^Current Degree Lvl^3^^12.1F
"KRN",.404,185,40,11,1)
12.1
"KRN",.404,185,40,11,2)
16,21^59^16,1
"KRN",.404,185,40,12,0)
15^Program of Study^3^^12.2F
"KRN",.404,185,40,12,1)
12.2
"KRN",.404,185,40,12,2)
15,19^59^15,1
"KRN",.404,185,40,12,11)
D:X]"" HLP^DDSUTL($P($G(^USC(8932.2,+$G(X),0)),U))
"KRN",.404,185,40,13,0)
13^Last Training Month & Year^3^^12.3F
"KRN",.404,185,40,13,1)
12.3
"KRN",.404,185,40,13,2)
13,66^8^13,38
"KRN",.404,185,40,14,0)
11^VHA Training Fac.^3^^12.4F
"KRN",.404,185,40,14,1)
12.4
"KRN",.404,185,40,14,2)
12,20^27^12,1
"KRN",.404,185,40,15,0)
10^Is this person a Registered Trainee?^3^^12.6F
"KRN",.404,185,40,15,1)
12.6
"KRN",.404,185,40,15,2)
11,39^3^11,1
"KRN",.404,185,40,15,12)
D REQ^XUSER2("")
"KRN",.404,185,40,16,0)
14^Trainee Inactive (Date)^3^^12.7F
"KRN",.404,185,40,16,1)
12.7
"KRN",.404,185,40,16,2)
14,63^11^14,38
"KRN",.404,185,40,17,0)
12^Start Date of Training^3^^12.8F
"KRN",.404,185,40,17,1)
12.8
"KRN",.404,185,40,17,2)
13,25^11^13,1
"KRN",.404,190,0)
Termination^200
"KRN",.404,190,40,0)
^.4044I^2^2
"KRN",.404,190,40,1,0)
1^DELETE ALL MAIL ACCESS^3
"KRN",.404,190,40,1,1)
9.21
"KRN",.404,190,40,1,2)
2,27^3^2,3
"KRN",.404,190,40,1,3)
YES
"KRN",.404,190,40,2,0)
2^DELETE KEYS AT TERMINATION^3
"KRN",.404,190,40,2,1)
9.22
"KRN",.404,190,40,2,2)
4,31^3^4,3
"KRN",.404,190,40,2,3)
YES
"KRN",19,18,-1)
2^11
"KRN",19,18,0)
XUSER^User Management^^M^.5^^50^^^^^3^n^^
"KRN",19,18,10,0)
^19.01IP^26^19
"KRN",19,18,10,26,0)
1064^OAA
"KRN",19,18,10,26,"^")
XU-CLINICAL TRAINEE MENU
"KRN",19,18,"U")
USER MANAGEMENT
"KRN",19,878,-1)
0^15
"KRN",19,878,0)
XU-CLINICAL TRAINEE EDIT^Edit Trainee Registration Data^^A^^^^^^^^^y^1
"KRN",19,878,1,0)
^^1^1^3050328^
"KRN",19,878,1,1,0)
This option is used to edit the Registered Trainee data.
"KRN",19,878,20)
S DIC="^VA(200,",DIC(0)="AEMQ",DIC("S")="I $S($P(^(0),U,11):$P(^(0),U,11)'<$$FMADD^XLFDT(DT,""-1096""),1:1)" D ^DIC K DIC Q:Y=-1  S DA=+Y,DR="[XU-CLINICAL TRAINEE]",DIE="^VA(200," D XUDIE^XUS5 K D0,DA,DIE,DR
"KRN",19,878,99.1)
59087,33087
"KRN",19,878,"U")
EDIT TRAINEE REGISTRATION DATA
"KRN",19,912,-1)
0^16
"KRN",19,912,0)
XU-CLINICAL TRAINEE INQUIRY^Trainee Registration Inquiry^^I^^^^^^^^KERNEL
"KRN",19,912,1,0)
^^1^1^3050328^
"KRN",19,912,1,1,0)
This option displays various attributes of Registered Trainees.
"KRN",19,912,30)
VA(200,
"KRN",19,912,31)
AEMQ
"KRN",19,912,34)
I +$G(Y)'<1,$D(^VA(200,+Y,12)),$P(^(12),U,2)'=""
"KRN",19,912,63)
[XU-CLINICAL TRAINEE INQUIRY]
"KRN",19,912,80)
VA(200,
"KRN",19,912,"U")
TRAINEE REGISTRATION INQUIRY
"KRN",19,949,-1)
0^7
"KRN",19,949,0)
XU-CLINICAL TRAINEE DB COUNT^Total Count of Registered Trainees^^P^^^^^^^^KERNEL
"KRN",19,949,1,0)
^19.06^2^2^3041222^^^
"KRN",19,949,1,1,0)
This option reports the total number of Clinical Trainee's that have been 
"KRN",19,949,1,2,0)
entered into the New Person(#200) file.
"KRN",19,949,60)
VA(200,
"KRN",19,949,62)
0
"KRN",19,949,63)
[XU-CLINICAL TRAINEE DB COUNT]
"KRN",19,949,64)
[XU-CLINICAL TRAINEE DB COUNT]
"KRN",19,949,65)

"KRN",19,949,66)

"KRN",19,949,"U")
TOTAL COUNT OF REGISTERED TRAI
"KRN",19,983,-1)
0^2
"KRN",19,983,0)
XU-CLINICAL TRAINEE TRANSA^Trainee Transmission Report by Date^^P^^^^^^^^KERNEL
"KRN",19,983,1,0)
^19.06^2^2^3040513^^^
"KRN",19,983,1,1,0)
This option produces a report of transmitted trainees by Date Transmitted 
"KRN",19,983,1,2,0)
to the OAA.
"KRN",19,983,60)
VA(200,
"KRN",19,983,62)
0
"KRN",19,983,63)
[XU-CLINICAL TRAINEE TRANSA]
"KRN",19,983,64)
[XU-CLINICAL TRAINEE TRANSA]
"KRN",19,983,65)

"KRN",19,983,66)

"KRN",19,983,"U")
TRAINEE TRANSMISSION REPORT BY
"KRN",19,984,-1)
0^3
"KRN",19,984,0)
XU-CLINICAL TRAINEE TRANSB^Trainee Transmission Report Selectable Items^^P^^^^^^^^KERNEL
"KRN",19,984,1,0)
^^2^2^3040513^
"KRN",19,984,1,1,0)
This option allows the user to select a range for date transmitted and a 
"KRN",19,984,1,2,0)
range for the VHA Training Facility.
"KRN",19,984,60)
VA(200,
"KRN",19,984,62)
0
"KRN",19,984,63)
[XU-CLINICAL TRAINEE TRANSB]
"KRN",19,984,64)
[XU-CLINICAL TRAINEE TRANSB]
"KRN",19,984,65)

"KRN",19,984,66)

"KRN",19,984,"U")
TRAINEE TRANSMISSION REPORT SE
"KRN",19,985,-1)
0^5
"KRN",19,985,0)
XU-CLINICAL TRAINEE TRANSC^Trainee Transmission Report by Range^^P^^^^^^^^KERNEL
"KRN",19,985,1,0)
^^2^2^3050328^
"KRN",19,985,1,1,0)
This report displays/prints the Registered Trainee transmission counts for
"KRN",19,985,1,2,0)
a selected peroid of time.
"KRN",19,985,60)
VA(200,
"KRN",19,985,62)
0
"KRN",19,985,63)
[XU-CLINICAL TRAINEE TRANSC]
"KRN",19,985,64)
[XU-CLINICAL TRAINEE TRANSC]
"KRN",19,985,65)

"KRN",19,985,66)

"KRN",19,985,"U")
TRAINEE TRANSMISSION REPORT BY
"KRN",19,1053,-1)
0^8
"KRN",19,1053,0)
XU-CLINICAL TRAINEE LIST^List of All Registered Trainees^^P^^^^^^^^KERNEL
"KRN",19,1053,1,0)
^^5^5^3050328^
"KRN",19,1053,1,1,0)
This option will report both active and inactive Registered Trainees.  The
"KRN",19,1053,1,2,0)
SCHEDULING RECOMMENDED(#209) field has been set to "YES" in case the site
"KRN",19,1053,1,3,0)
should decide they would like to schedule this report at regular
"KRN",19,1053,1,4,0)
intervals.  When manually launching this report, it is recommended that it
"KRN",19,1053,1,5,0)
be QUEUED.
"KRN",19,1053,60)
VA(200,
"KRN",19,1053,62)
0
"KRN",19,1053,63)
[XU-CLINICAL TRAINEE LIST]
"KRN",19,1053,64)
[XU-CLINICAL TRAINEE LIST]
"KRN",19,1053,65)

"KRN",19,1053,66)

"KRN",19,1053,200.9)
y
"KRN",19,1053,"U")
LIST OF ALL REGISTERED TRAINEE
"KRN",19,1054,-1)
0^9
"KRN",19,1054,0)
XU-CLINICAL ACTIVE TRAINEE^List of Active Registered Trainees^^P^^^^^^^^KERNEL
"KRN",19,1054,1,0)
^^4^4^3050328^
"KRN",19,1054,1,1,0)
A report of active Registered Trainees.  The SCHEDULING RECOMMENDED(#209)
"KRN",19,1054,1,2,0)
field has been set to "YES" in case the site should decide they would like
"KRN",19,1054,1,3,0)
to schedule this report at regular intervals.  When manually launching
"KRN",19,1054,1,4,0)
this report, it is recommended that it be QUEUED.
"KRN",19,1054,60)
VA(200,
"KRN",19,1054,62)
0
"KRN",19,1054,63)
[XU-CLINICAL ACTIVE TRAINEE]
"KRN",19,1054,64)
[XU-CLINICAL ACTIVE TRAINEE]
"KRN",19,1054,65)

"KRN",19,1054,66)

"KRN",19,1054,200.9)
y
"KRN",19,1054,"U")
LIST OF ACTIVE REGISTERED TRAI
"KRN",19,1055,-1)
0^10
"KRN",19,1055,0)
XU-CLINICAL INACTIVE TRAINEE^List of Inactive Registered Trainees^^P^^^^^^^^KERNEL
"KRN",19,1055,1,0)
^^4^4^3050328^
"KRN",19,1055,1,1,0)
A report of inactive Registered Trainees.  The SCHEDULING
"KRN",19,1055,1,2,0)
RECOMMENDED(#209) field has been set to "YES" in case the site should
"KRN",19,1055,1,3,0)
decide they would like to schedule this report at regular intervals.  When
"KRN",19,1055,1,4,0)
manually launching this report, it is recommended that it be QUEUED.
"KRN",19,1055,60)
VA(200,
"KRN",19,1055,62)
0
"KRN",19,1055,63)
[XU-CLINICAL INACTIVE TRAINEE]
"KRN",19,1055,64)
[XU-CLINICAL INACTIVE TRAINEE]
"KRN",19,1055,65)

"KRN",19,1055,66)

"KRN",19,1055,200.9)
y
"KRN",19,1055,"U")
LIST OF INACTIVE REGISTERED TR
"KRN",19,1064,-1)
0^14
"KRN",19,1064,0)
XU-CLINICAL TRAINEE MENU^OAA Trainee Registration Menu^^M^^^^^^^^KERNEL
"KRN",19,1064,1,0)
^^1^1^3050327^
"KRN",19,1064,1,1,0)
This is the primary menu for managing Trainee Registration.
"KRN",19,1064,10,0)
^19.01IP^3^3
"KRN",19,1064,10,1,0)
878^E
"KRN",19,1064,10,1,"^")
XU-CLINICAL TRAINEE EDIT
"KRN",19,1064,10,2,0)
912^I
"KRN",19,1064,10,2,"^")
XU-CLINICAL TRAINEE INQUIRY
"KRN",19,1064,10,3,0)
1065^R
"KRN",19,1064,10,3,"^")
XU-CLINICAL TRAINEE REPORTS
"KRN",19,1064,99)
59986,41212
"KRN",19,1064,"U")
OAA TRAINEE REGISTRATION MENU
"KRN",19,1065,-1)
0^6
"KRN",19,1065,0)
XU-CLINICAL TRAINEE REPORTS^Trainee Reports Menu^^M^^^^^^^^KERNEL
"KRN",19,1065,1,0)
^^1^1^3050327^
"KRN",19,1065,1,1,0)
This is the main reports menu for Trainee Registration.
"KRN",19,1065,10,0)
^19.01IP^2^2
"KRN",19,1065,10,1,0)
1066
"KRN",19,1065,10,1,"^")
XU-CLINICAL LOCAL REPORTS
"KRN",19,1065,10,2,0)
1067
"KRN",19,1065,10,2,"^")
XU-CLINICAL TRANS REPORTS
"KRN",19,1065,99)
59986,41067
"KRN",19,1065,"U")
TRAINEE REPORTS MENU
"KRN",19,1066,-1)
0^12
"KRN",19,1066,0)
XU-CLINICAL LOCAL REPORTS^Local Trainee Registration Reports^^M^^^^^^^^KERNEL
"KRN",19,1066,1,0)
^^1^1^3050327^
"KRN",19,1066,1,1,0)
Various Trainee Registration reports, that look at the local data base.
"KRN",19,1066,10,0)
^19.01IP^4^4
"KRN",19,1066,10,1,0)
949
"KRN",19,1066,10,1,"^")
XU-CLINICAL TRAINEE DB COUNT
"KRN",19,1066,10,2,0)
1054
"KRN",19,1066,10,2,"^")
XU-CLINICAL ACTIVE TRAINEE
"KRN",19,1066,10,3,0)
1055
"KRN",19,1066,10,3,"^")
XU-CLINICAL INACTIVE TRAINEE
"KRN",19,1066,10,4,0)
1053
"KRN",19,1066,10,4,"^")
XU-CLINICAL TRAINEE LIST
"KRN",19,1066,99)
60114,21108
"KRN",19,1066,"U")
LOCAL TRAINEE REGISTRATION REP
"KRN",19,1067,-1)
0^13
"KRN",19,1067,0)
XU-CLINICAL TRANS REPORTS^Trainee Transmission Reports to OAA^^M^^^^^^^^KERNEL
"KRN",19,1067,1,0)
^^1^1^3050327^
"KRN",19,1067,1,1,0)
Various Trainee Registration trainsmission reports to the OAA.
"KRN",19,1067,10,0)
^19.01IP^3^3
"KRN",19,1067,10,1,0)
983
"KRN",19,1067,10,1,"^")
XU-CLINICAL TRAINEE TRANSA
"KRN",19,1067,10,2,0)
984
"KRN",19,1067,10,2,"^")
XU-CLINICAL TRAINEE TRANSB
"KRN",19,1067,10,3,0)
985
"KRN",19,1067,10,3,"^")
XU-CLINICAL TRAINEE TRANSC
"KRN",19,1067,99)
59986,41400
"KRN",19,1067,"U")
TRAINEE TRANSMISSION REPORTS T
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",8,.403)
.403;8;;;EDEOUT^DIFROMSO(.403,DA,"",XPDA);FPRE^DIFROMSI(.403,"",XPDA);EPRE^DIFROMSI(.403,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.403,DA,"",XPDA);DEL^DIFROMSK(.403,"",%)
"ORD",8,.403,0)
FORM
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^^0
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^2950703^2970507^.5
"PKG",3,22,1,"PAH",1,0)
344^3050802^70
"PKG",3,22,1,"PAH",1,1,0)
^^2^2^3050802
"PKG",3,22,1,"PAH",1,1,1,0)
See patch XU*8*344 in the National Patch Module on FORUM for complete
"PKG",3,22,1,"PAH",1,1,2,0)
information on this patch.
"QUES","POS1",0)
SB^L:LEGACY;P:PRODUCTION;T:TEST
"QUES","POS1","?")
Answer in which account so I know whether or not to transmit.
"QUES","POS1","A")
In which account is this install taking place?
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","XU8P344")
0^^B15286667
"RTN","XU8P344",1,0)
XU8P344 ;SFISC/SO- POST INSTALL ;7:01 AM  8 Jun 2005
"RTN","XU8P344",2,0)
 ;;8.0;KERNEL;**344**;Jul 10, 1995
"RTN","XU8P344",3,0)
 D P1
"RTN","XU8P344",4,0)
 D P2
"RTN","XU8P344",5,0)
 D P3
"RTN","XU8P344",6,0)
 Q
"RTN","XU8P344",7,0)
 ;
"RTN","XU8P344",8,0)
P1 ; Loop thru New Person file and change field #12.3 to 6/_year
"RTN","XU8P344",9,0)
 ; Then try and determine Training Facility
"RTN","XU8P344",10,0)
 D MES^XPDUTL("Begin Updating...")
"RTN","XU8P344",11,0)
 N IEN S IEN=0
"RTN","XU8P344",12,0)
 F  S IEN=$O(^VA(200,IEN)) Q:'IEN  I +$$GET1^DIQ(200,IEN_",",12.2,"I","","ZERR") D  ; Update record If And Only If 'Program Of Study'
"RTN","XU8P344",13,0)
 . N LASTYR S LASTYR=""
"RTN","XU8P344",14,0)
 . N DIVISION S DIVISION=0
"RTN","XU8P344",15,0)
 . N DNLT S DNLT=""
"RTN","XU8P344",16,0)
 . N YN S YN=""
"RTN","XU8P344",17,0)
 . ;
"RTN","XU8P344",18,0)
 . D  ; Last Training Month & Year
"RTN","XU8P344",19,0)
 .. N DIERR,Z,ZERR
"RTN","XU8P344",20,0)
 .. S LASTYR=$$GET1^DIQ(200,IEN_",",12.3,"I","Z","ZERR")
"RTN","XU8P344",21,0)
 .. I LASTYR'="",LASTYR'["/" D
"RTN","XU8P344",22,0)
 ... I $L(LASTYR)=5 S LASTYR=$E(LASTYR)_"/"_$E(LASTYR,2,5)
"RTN","XU8P344",23,0)
 ... I $L(LASTYR)=6 S LASTYR=$E(LASTYR,1,2)_"/"_$E(LASTYR,3,6)
"RTN","XU8P344",24,0)
 .. I LASTYR'="",LASTYR["/" D
"RTN","XU8P344",25,0)
 ... I $L(LASTYR,"/")=1 S LASTYR="6/"_LASTYR Q
"RTN","XU8P344",26,0)
 ... S LASTYR=$P(LASTYR,"/")_"/"_$P(LASTYR,"/",$L(LASTYR,"/")) Q
"RTN","XU8P344",27,0)
 ... Q
"RTN","XU8P344",28,0)
 .. Q
"RTN","XU8P344",29,0)
 . ;
"RTN","XU8P344",30,0)
 . D  ; VHA Training Facility
"RTN","XU8P344",31,0)
 .. N DIERR,Z,ZERR
"RTN","XU8P344",32,0)
 .. S DIVISION=+$$GET1^DIQ(200,IEN,12.4,"I","Z","ZERR")
"RTN","XU8P344",33,0)
 .. I DIVISION,$$SCRN4^XUOAAUTL(DIVISION) Q  ;VHA TRAINING FACILITY DEFINED
"RTN","XU8P344",34,0)
 .. I DIVISION S DIVISION=0 ;FAILED ABOVE CHECK
"RTN","XU8P344",35,0)
 .. D GETS^DIQ(200,IEN,"16*","I","Z","ZERR") ;Get Division multiple
"RTN","XU8P344",36,0)
 .. N DIEN S DIEN=""
"RTN","XU8P344",37,0)
 .. F  S DIEN=$O(Z(200.02,DIEN)) Q:DIEN=""  D
"RTN","XU8P344",38,0)
 ... I $G(Z(200.02,DIEN,1,"I")) S DIVISION=$G(Z(200.02,DIEN,.01,"I")) S DIVISION=$S($$SCRN4^XUOAAUTL(DIVISION):DIVISION,1:0) Q
"RTN","XU8P344",39,0)
 ... Q
"RTN","XU8P344",40,0)
 .. I 'DIVISION S DIVISION=$P($$NS^XUAF4($$KSP^XUPARAM("INST")),U,2),DIVISION=$$LKUP^XUAF4(DIVISION)
"RTN","XU8P344",41,0)
 .. Q
"RTN","XU8P344",42,0)
 . ;
"RTN","XU8P344",43,0)
 . D  ; Use Termination Date if necessary
"RTN","XU8P344",44,0)
 .. N DIERR,Z,ZERR
"RTN","XU8P344",45,0)
 .. S DNLT=$$GET1^DIQ(200,IEN_",",12.7,"I","Z","ZERR")
"RTN","XU8P344",46,0)
 .. I DNLT'="" S:DNLT'<DT DNLT="" Q  ;Date established and Not in the future
"RTN","XU8P344",47,0)
 .. S DNLT=$$GET1^DIQ(200,IEN_",",9.2,"I","Z","ZERR")
"RTN","XU8P344",48,0)
 .. S:DNLT'<DT DNLT="" ;Reset if a Future termination date
"RTN","XU8P344",49,0)
 .. Q
"RTN","XU8P344",50,0)
 . ;
"RTN","XU8P344",51,0)
 . D  ; Update Record
"RTN","XU8P344",52,0)
 .. N DIERR,FDA,ZERR
"RTN","XU8P344",53,0)
 .. S FDA(200,IEN_",",12.3)=LASTYR
"RTN","XU8P344",54,0)
 .. S FDA(200,IEN_",",12.4)=DIVISION
"RTN","XU8P344",55,0)
 .. S FDA(200,IEN_",",12.6)=$S(DNLT'="":"N",1:"Y")
"RTN","XU8P344",56,0)
 .. S FDA(200,IEN_",",12.7)=DNLT
"RTN","XU8P344",57,0)
 .. D FILE^DIE("I","FDA","ZERR")
"RTN","XU8P344",58,0)
 .. Q
"RTN","XU8P344",59,0)
 . Q
"RTN","XU8P344",60,0)
 D MES^XPDUTL("Finished updates.")
"RTN","XU8P344",61,0)
 Q
"RTN","XU8P344",62,0)
 ;
"RTN","XU8P344",63,0)
P2 ; Transmitt Data to OAA database
"RTN","XU8P344",64,0)
 I $E($G(XPDQUES("POS1")))="P" D  Q
"RTN","XU8P344",65,0)
 . ;Let's be sure eveone is accounted for
"RTN","XU8P344",66,0)
 . D MES^XPDUTL("Reindexing ""ATR"" cross reference...")
"RTN","XU8P344",67,0)
 . N DIK
"RTN","XU8P344",68,0)
 . S DIK="^VA(200,"
"RTN","XU8P344",69,0)
 . S DIK(1)="12.2^ATR"
"RTN","XU8P344",70,0)
 . D ENALL^DIK
"RTN","XU8P344",71,0)
 . D MES^XPDUTL("Done reindexing ""ATR"" cross reference.")
"RTN","XU8P344",72,0)
 . ;
"RTN","XU8P344",73,0)
 . D MES^XPDUTL("Begin transmission of OAA data...")
"RTN","XU8P344",74,0)
 . D OAA^XUOAAHL7
"RTN","XU8P344",75,0)
 . D MES^XPDUTL("Done with transmission of OAA data.")
"RTN","XU8P344",76,0)
 . Q
"RTN","XU8P344",77,0)
 D MES^XPDUTL("Non-production account.  No transmission of OAA data will take place.") K ^VA(200,"ATR") Q
"RTN","XU8P344",78,0)
 Q
"RTN","XU8P344",79,0)
 ;
"RTN","XU8P344",80,0)
P3 ; Change Rescheduling Frequency for XUOAA SEND HL7 MESSAGE to '1D'
"RTN","XU8P344",81,0)
 I $E($G(XPDQUES("POS1")))="P" D  Q
"RTN","XU8P344",82,0)
 . N DIERR,Z,ZERR
"RTN","XU8P344",83,0)
 . D FIND^DIC(19.2,"","@;.01","P","XUOAA SEND HL7 MESSAGE","","","","","Z","ZERR")
"RTN","XU8P344",84,0)
 . I $D(DIERR) D MES^XPDUTL("Can not find option ""XUOAA SEND HL7 MESSAGE"" in OPTION SCHEDULING(#19.2) file.") Q
"RTN","XU8P344",85,0)
 . I +Z("DILIST",0)>1 D MES^XPDUTL("More than one ""XUOAA SEND HL7 MESSAGE"" scheduled.  Can not reschedule.") Q
"RTN","XU8P344",86,0)
 . N IEN,FDA
"RTN","XU8P344",87,0)
 . S IEN=+Z("DILIST",1,0)_","
"RTN","XU8P344",88,0)
 . S FDA(19.2,IEN,6)="1D"
"RTN","XU8P344",89,0)
 . D FILE^DIE("E","FDA","ZERR")
"RTN","XU8P344",90,0)
 Q
"RTN","XUOAAHL7")
0^1^B38731493
"RTN","XUOAAHL7",1,0)
XUOAAHL7 ;OAKCIOFO/JLG - Clinical Trainee HL7 Msg Routine;8:06 AM  22 Mar 2005
"RTN","XUOAAHL7",2,0)
 ;;8.0;KERNEL;**251,324,344**;Jul 10, 1995
"RTN","XUOAAHL7",3,0)
 ;
"RTN","XUOAAHL7",4,0)
OAA ; entry point for the scheduled option [XUOAA SEND HL7 MESSAGE]
"RTN","XUOAAHL7",5,0)
 ; This routine generates an HL7 PMU message, Update Personnel Record,
"RTN","XUOAAHL7",6,0)
 ; based on data pointed by the ^VA(200,"ATR",ien) cross-reference.
"RTN","XUOAAHL7",7,0)
 ; The type of message is PMU~B02 with the following structure:
"RTN","XUOAAHL7",8,0)
 ;      MSH,EVN,STF,PRA,ORG,EDU
"RTN","XUOAAHL7",9,0)
 ; The data generated for the STF,PRA,ORG, and EDU are not repeating.
"RTN","XUOAAHL7",10,0)
 ;
"RTN","XUOAAHL7",11,0)
 ; Input:
"RTN","XUOAAHL7",12,0)
 ;   MSGID       (required) Pass by reference
"RTN","XUOAAHL7",13,0)
 ;   ERROR       (required) Pass by reference
"RTN","XUOAAHL7",14,0)
 ;
"RTN","XUOAAHL7",15,0)
 ; Output:
"RTN","XUOAAHL7",16,0)
 ;   MSGID       The message id assigned to the message when the call
"RTN","XUOAAHL7",17,0)
 ;               succeeds; null when call does not succeed.
"RTN","XUOAAHL7",18,0)
 ;   ERROR       0 if call succeeds.
"RTN","XUOAAHL7",19,0)
 ;               "1^description of error" if call fails
"RTN","XUOAAHL7",20,0)
 ;
"RTN","XUOAAHL7",21,0)
 ; Pre-conditions:
"RTN","XUOAAHL7",22,0)
 ;    - ^VA(200,"ATR") exists
"RTN","XUOAAHL7",23,0)
 ;    - XUOAA PMU event protocol and XUOAA ACK subscriber protocols are
"RTN","XUOAAHL7",24,0)
 ;      active.
"RTN","XUOAAHL7",25,0)
 ; Postcondition:
"RTN","XUOAAHL7",26,0)
 ;    - An HL7 PMU-B02 message is queued for transmission.
"RTN","XUOAAHL7",27,0)
 ;    - the ^VA(200,"ATR") x-reference is killed when queueing is
"RTN","XUOAAHL7",28,0)
 ;      successful; otherwise, it is left intact for next attempt.
"RTN","XUOAAHL7",29,0)
 ;
"RTN","XUOAAHL7",30,0)
 N CNT,CS,ERROR,FS,INDX,RESULT,SS,TOTAL,XUCNT,XUHLDT,XUHLDT1,XUHLMID
"RTN","XUOAAHL7",31,0)
 N XUMTIEN,XUOAA,XUOAAHL
"RTN","XUOAAHL7",32,0)
 S TOTAL=0
"RTN","XUOAAHL7",33,0)
LOOP1 ; Generate batch messages of 100 messages long
"RTN","XUOAAHL7",34,0)
 I '$D(^VA(200,"ATR")) D MAIL Q  ;No "ATR" xref
"RTN","XUOAAHL7",35,0)
 K ^TMP("HLS",$J),XUOAA
"RTN","XUOAAHL7",36,0)
 S (INDX,XUOAA,CNT,ERROR)=0
"RTN","XUOAAHL7",37,0)
 D INIT Q:ERROR
"RTN","XUOAAHL7",38,0)
 D STUB Q:ERROR  ; create msg stub (batch)
"RTN","XUOAAHL7",39,0)
 ; iterate over list of entries (100 max) and build batch message
"RTN","XUOAAHL7",40,0)
 F  S INDX=$O(^VA(200,"ATR",INDX)) Q:'INDX!(XUOAA>99)  D
"RTN","XUOAAHL7",41,0)
 . L +^VA(200,INDX):30 Q:'$T
"RTN","XUOAAHL7",42,0)
 . S XUOAA=XUOAA+1 ; message count in batch
"RTN","XUOAAHL7",43,0)
 . ; temporary array to keep track of entries
"RTN","XUOAAHL7",44,0)
 . S XUOAA(INDX)=$G(^VA(200,"ATR",INDX)) ; date/time recorded
"RTN","XUOAAHL7",45,0)
 . D BLDMSG(INDX) ; build message for this entry
"RTN","XUOAAHL7",46,0)
 . K ^VA(200,"ATR",INDX)
"RTN","XUOAAHL7",47,0)
 . S TOTAL=TOTAL+1
"RTN","XUOAAHL7",48,0)
 . L -^VA(200,INDX)
"RTN","XUOAAHL7",49,0)
 D SEND
"RTN","XUOAAHL7",50,0)
 I ERROR D RESTORE,STORENV Q
"RTN","XUOAAHL7",51,0)
 I XUOAA>99 G LOOP1 ; more than 100 entries, create another batch
"RTN","XUOAAHL7",52,0)
 K ^TMP("HLS",$J),XUOAA
"RTN","XUOAAHL7",53,0)
 D MAIL
"RTN","XUOAAHL7",54,0)
 Q
"RTN","XUOAAHL7",55,0)
 ;
"RTN","XUOAAHL7",56,0)
INIT ; initialize HL variables
"RTN","XUOAAHL7",57,0)
 ; "XUOAA PMU"=event protocol, XUOAAHL=hl variables
"RTN","XUOAAHL7",58,0)
 ; checks for valid event protocol
"RTN","XUOAAHL7",59,0)
 D INIT^HLFNC2("XUOAA PMU",.XUOAAHL)
"RTN","XUOAAHL7",60,0)
 I $G(XUOAAHL) S ERROR="1^"_$P(XUOAAHL,U,2) Q
"RTN","XUOAAHL7",61,0)
 S FS=$G(XUOAAHL("FS")) ;field separator
"RTN","XUOAAHL7",62,0)
 S CS=$E(XUOAAHL("ECH"),1) ;component separator
"RTN","XUOAAHL7",63,0)
 S SS=$E(XUOAAHL("ECH"),4) ;sub-component separator
"RTN","XUOAAHL7",64,0)
 Q
"RTN","XUOAAHL7",65,0)
 ;
"RTN","XUOAAHL7",66,0)
STUB ; create msg stub for batch msg
"RTN","XUOAAHL7",67,0)
 ; XUHLMID=batch msg id, XUMTIEN=file 772 ien
"RTN","XUOAAHL7",68,0)
 ; XUHLDT=FM date/time, XUHLDT1=HL7 date/time
"RTN","XUOAAHL7",69,0)
 D CREATE^HLTF(.XUHLMID,.XUMTIEN,.XUHLDT,.XUHLDT1)
"RTN","XUOAAHL7",70,0)
 I 'XUHLMID S ERROR="1^could not create msg stub" Q
"RTN","XUOAAHL7",71,0)
 Q
"RTN","XUOAAHL7",72,0)
 ;
"RTN","XUOAAHL7",73,0)
BLDMSG(IEN) ;
"RTN","XUOAAHL7",74,0)
 N ADDR,CITY,DEGLEV,DOB,EMAIL,ENTERDT,FACILITY,GEOLOC,IFN
"RTN","XUOAAHL7",75,0)
 N LASTYR,MSGHDR,NAME,PROGSTD,RECORDT,SERVICE,SSN,STATE,STREET,TERMDT
"RTN","XUOAAHL7",76,0)
 N TITLE,ZIP,XUNAME,VHATF,X,Y
"RTN","XUOAAHL7",77,0)
 Q:'IEN
"RTN","XUOAAHL7",78,0)
 ; extract data from Fileman and transform to HL7 datatype
"RTN","XUOAAHL7",79,0)
 S XUNAME("FILE")=200,XUNAME("FIELD")=.01,XUNAME("IENS")=IEN
"RTN","XUOAAHL7",80,0)
 S NAME=$$HLNAME^XLFNAME(.XUNAME,"S",CS)
"RTN","XUOAAHL7",81,0)
 S STREET=$$GET1^DIQ(200,IEN,"STREET ADDRESS 1")
"RTN","XUOAAHL7",82,0)
 S STREET=STREET_U_$$GET1^DIQ(200,IEN,"STREET ADDRESS 2")
"RTN","XUOAAHL7",83,0)
 S STREET=STREET_U_$$GET1^DIQ(200,IEN,"STREET ADDRESS 3")
"RTN","XUOAAHL7",84,0)
 S CITY=$$GET1^DIQ(200,IEN,"CITY")
"RTN","XUOAAHL7",85,0)
 S STATE=$$GET1^DIQ(200,IEN,"STATE","I")
"RTN","XUOAAHL7",86,0)
 S ZIP=$$GET1^DIQ(200,IEN,"ZIP CODE")
"RTN","XUOAAHL7",87,0)
 S GEOLOC=CITY_U_STATE_U_ZIP_U_"USA"
"RTN","XUOAAHL7",88,0)
 S ADDR=$$HLADDR^HLFNC(STREET,GEOLOC)
"RTN","XUOAAHL7",89,0)
 S SSN=$$GET1^DIQ(200,IEN,"SSN")
"RTN","XUOAAHL7",90,0)
 S SSN=SSN_CS_CS_CS_"USSSA"_CS_"SS"
"RTN","XUOAAHL7",91,0)
 S EMAIL=$$GET1^DIQ(200,IEN,"EMAIL ADDRESS")
"RTN","XUOAAHL7",92,0)
 S DEGLEV=$$GET1^DIQ(200,IEN,"CURRENT DEGREE LEVEL:ABBREVIATION")
"RTN","XUOAAHL7",93,0)
 S PROGSTD=$$GET1^DIQ(200,IEN,"PROGRAM OF STUDY")
"RTN","XUOAAHL7",94,0)
 S LASTYR=$$GET1^DIQ(200,IEN,"LAST TRAINING MONTH & YEAR")
"RTN","XUOAAHL7",95,0)
 D
"RTN","XUOAAHL7",96,0)
 . N %DT
"RTN","XUOAAHL7",97,0)
 . S X=LASTYR,%DT="M"
"RTN","XUOAAHL7",98,0)
 . D ^%DT
"RTN","XUOAAHL7",99,0)
 . Q
"RTN","XUOAAHL7",100,0)
 S LASTYR=$$FMTHL7^XLFDT(Y)
"RTN","XUOAAHL7",101,0)
 S SERVICE=$$GET1^DIQ(200,IEN,"SERVICE/SECTION")
"RTN","XUOAAHL7",102,0)
 S SERVICE=SERVICE_CS_CS_"SERVICE/SECTION"
"RTN","XUOAAHL7",103,0)
 S TERMDT=$$GET1^DIQ(200,IEN,"DATE NO LONGER TRAINEE","I")
"RTN","XUOAAHL7",104,0)
 S TERMDT=$$FMTHL7^XLFDT(TERMDT)
"RTN","XUOAAHL7",105,0)
 S:'TERMDT TERMDT=""
"RTN","XUOAAHL7",106,0)
 S TITLE=$$GET1^DIQ(200,IEN,"TITLE")
"RTN","XUOAAHL7",107,0)
 S ENTERDT=$$GET1^DIQ(200,IEN,"START OF TRAINING","I")
"RTN","XUOAAHL7",108,0)
 S ENTERDT=$$FMTHL7^XLFDT(ENTERDT)
"RTN","XUOAAHL7",109,0)
 S:'ENTERDT ENTERDT=""
"RTN","XUOAAHL7",110,0)
 ; date recorded
"RTN","XUOAAHL7",111,0)
 S RECORDT=$$FMTHL7^XLFDT($G(XUOAA(IEN)))
"RTN","XUOAAHL7",112,0)
 S FACILITY=$$NS^XUAF4($$KSP^XUPARAM("INST"))
"RTN","XUOAAHL7",113,0)
 S FACILITY=$P(FACILITY,U,2)_CS_$P(FACILITY,U)
"RTN","XUOAAHL7",114,0)
 D
"RTN","XUOAAHL7",115,0)
 . S VHATF=+$$GET1^DIQ(200,IEN,"VHA TRAINING FACILITY","I")
"RTN","XUOAAHL7",116,0)
 . I VHATF<1 S VHATF="^" Q  ;Both pieces Null
"RTN","XUOAAHL7",117,0)
 . I VHATF>0 S VHATF=$$NS^XUAF4(VHATF)
"RTN","XUOAAHL7",118,0)
 . Q
"RTN","XUOAAHL7",119,0)
 S VHATF=$P(VHATF,U,2)_CS_$P(VHATF,U)
"RTN","XUOAAHL7",120,0)
 ; IFN= internal file number
"RTN","XUOAAHL7",121,0)
 S IFN=IEN_CS_"IEN"_CS_"NEW PERSON"
"RTN","XUOAAHL7",122,0)
 S DOB=$$GET1^DIQ(200,IEN,"DOB","I")
"RTN","XUOAAHL7",123,0)
 S DOB=$$FMTHL7^XLFDT(DOB)
"RTN","XUOAAHL7",124,0)
 ; create msg header per entry
"RTN","XUOAAHL7",125,0)
 ; XUOAAHL=hl array from INIT, XUHLMID=batch msg id from STUB
"RTN","XUOAAHL7",126,0)
 ; XUOAA=message count, MSGHDR=message header
"RTN","XUOAAHL7",127,0)
 D MSH^HLFNC2(.XUOAAHL,XUHLMID_"-"_XUOAA,.MSGHDR)
"RTN","XUOAAHL7",128,0)
 ; build temporary MSG TEXT array
"RTN","XUOAAHL7",129,0)
 S CNT=CNT+1
"RTN","XUOAAHL7",130,0)
 S ^TMP("HLS",$J,CNT)=MSGHDR
"RTN","XUOAAHL7",131,0)
 S CNT=CNT+1
"RTN","XUOAAHL7",132,0)
 S ^TMP("HLS",$J,CNT)="EVN"_FS_XUOAAHL("ETN")_FS_RECORDT_FS_FS_FS_FS_FS_FACILITY
"RTN","XUOAAHL7",133,0)
 S CNT=CNT+1
"RTN","XUOAAHL7",134,0)
 S ^TMP("HLS",$J,CNT)="STF"_FS_IFN_FS_SSN_FS_NAME_FS_FS_FS_DOB_FS_FS_FS_SERVICE_FS_FS_ADDR_FS_FS_FS_FS_EMAIL_FS_FS_FS_TITLE
"RTN","XUOAAHL7",135,0)
 S CNT=CNT+1
"RTN","XUOAAHL7",136,0)
 S ^TMP("HLS",$J,CNT)="PRA"_FS_FS_FS_"OAA"_FS_FS_PROGSTD_CS_CS_CS_CS_LASTYR
"RTN","XUOAAHL7",137,0)
 S CNT=CNT+1
"RTN","XUOAAHL7",138,0)
 S ^TMP("HLS",$J,CNT)="ORG"_FS_1_FS_VHATF_FS_SERVICE_FS_FS_FS_FS_FS_CS_PROGSTD_CS_"PROGRAM OF STUDY"_FS_ENTERDT_CS_TERMDT
"RTN","XUOAAHL7",139,0)
 S CNT=CNT+1
"RTN","XUOAAHL7",140,0)
 S ^TMP("HLS",$J,CNT)="EDU"_FS_"1"_FS_DEGLEV
"RTN","XUOAAHL7",141,0)
 D
"RTN","XUOAAHL7",142,0)
 . ; Update Trainee's Date Transmitted to OAA
"RTN","XUOAAHL7",143,0)
 . N DIERR,ZERR,FDA
"RTN","XUOAAHL7",144,0)
 . S FDA(200,$S(IEN[",":IEN,1:IEN_","),12.5)=DT
"RTN","XUOAAHL7",145,0)
 . D FILE^DIE("I","FDA","ZERR")
"RTN","XUOAAHL7",146,0)
 Q
"RTN","XUOAAHL7",147,0)
 ;
"RTN","XUOAAHL7",148,0)
SEND ; send complete batch message
"RTN","XUOAAHL7",149,0)
 ; "XUOAA PMU"=event protocol, LB=batch array type
"RTN","XUOAAHL7",150,0)
 ; RESULT="msgid^error code^error msg" , XUMTIEN=file 772 ien from STUB
"RTN","XUOAAHL7",151,0)
 D GENERATE^HLMA("XUOAA PMU","GB",1,.RESULT,XUMTIEN)
"RTN","XUOAAHL7",152,0)
 I +$P(RESULT,U,2) D  Q
"RTN","XUOAAHL7",153,0)
 . S ERROR="1^"_$P(RESULT,U,3)
"RTN","XUOAAHL7",154,0)
 S MSGID=+RESULT
"RTN","XUOAAHL7",155,0)
 Q
"RTN","XUOAAHL7",156,0)
 ;
"RTN","XUOAAHL7",157,0)
RESTORE ; message could not be sent, restore x-ref
"RTN","XUOAAHL7",158,0)
 S INDX=0 F  S INDX=$O(XUOAA(INDX)) Q:'INDX  D
"RTN","XUOAAHL7",159,0)
 . S ^VA(200,"ATR",INDX)=$G(XUOAA(INDX))
"RTN","XUOAAHL7",160,0)
 Q
"RTN","XUOAAHL7",161,0)
 ;
"RTN","XUOAAHL7",162,0)
RECACK ; receive application acknoledgement from HL7
"RTN","XUOAAHL7",163,0)
 I $G(HL("ACKCD"))'="AA" D
"RTN","XUOAAHL7",164,0)
 . D STORENV("RECACK")
"RTN","XUOAAHL7",165,0)
 Q
"RTN","XUOAAHL7",166,0)
 ;
"RTN","XUOAAHL7",167,0)
STORENV ; store environmental variables for logging purposes
"RTN","XUOAAHL7",168,0)
 N APP,XTMP,X
"RTN","XUOAAHL7",169,0)
 S APP="Clinical Trainee Core Dataset",XTMP="XUOAA"_DT
"RTN","XUOAAHL7",170,0)
 S ^XTMP(XTMP,0)=$$FMADD^XLFDT(DT,14)_U_$$NOW^XLFDT_U_APP
"RTN","XUOAAHL7",171,0)
 S X="^XTMP("""_XTMP_""","
"RTN","XUOAAHL7",172,0)
 D DOLRO^%ZOSV
"RTN","XUOAAHL7",173,0)
 Q
"RTN","XUOAAHL7",174,0)
 ;
"RTN","XUOAAHL7",175,0)
MAIL ;Send mail message to G.XUOAA CLIN TRAINEE TRANS
"RTN","XUOAAHL7",176,0)
 N LN,MSGTXT,MSGSBJ
"RTN","XUOAAHL7",177,0)
 S LN=1
"RTN","XUOAAHL7",178,0)
 S MSGSBJ="Clinical Trainee Transmission Count"
"RTN","XUOAAHL7",179,0)
 S MSGTXT=""
"RTN","XUOAAHL7",180,0)
 S MSGTXT(LN)=" ",LN=LN+1
"RTN","XUOAAHL7",181,0)
 S MSGTXT(LN)="Number of trainees transmitted to OAA: "_TOTAL
"RTN","XUOAAHL7",182,0)
 ;Check to see if Mail Group has members
"RTN","XUOAAHL7",183,0)
 I '$$GOTLOCAL^XMXAPIG("XUOAA CLIN TRAINEE TRANS") D SENDMSG^XMXAPI(DUZ,MSGSBJ,"MTEXT",DUZ) Q
"RTN","XUOAAHL7",184,0)
 ; Mail Group Has Memebers so send the message
"RTN","XUOAAHL7",185,0)
 D SENDMSG^XMXAPI(DUZ,MSGSBJ,"MSGTXT","G.XUOAA CLIN TRAINEE TRANS")
"RTN","XUOAAHL7",186,0)
 Q
"RTN","XUOAAUTL")
0^3^B1683533
"RTN","XUOAAUTL",1,0)
XUOAAUTL ;SFISC/SO- UTILITIES FOR OAA ;7:13 AM  8 Jun 2005
"RTN","XUOAAUTL",2,0)
 ;;8.0;KERNEL;**344**;Jul 10, 1995
"RTN","XUOAAUTL",3,0)
 ;
"RTN","XUOAAUTL",4,0)
SCRN4(IEN) ; Screen for INSITUTION(#4) file
"RTN","XUOAAUTL",5,0)
 N DIERR,IENS,FIELDS,Z,ZERR
"RTN","XUOAAUTL",6,0)
 S IENS=+IEN_","
"RTN","XUOAAUTL",7,0)
 S FIELDS="11;13;101"
"RTN","XUOAAUTL",8,0)
 D GETS^DIQ(4,IENS,FIELDS,"IE","Z","ZERR")
"RTN","XUOAAUTL",9,0)
 I $D(DIERR) Q 0
"RTN","XUOAAUTL",10,0)
 ;Check to see if National
"RTN","XUOAAUTL",11,0)
 I Z(4,IENS,11,"I")'="N" Q 0
"RTN","XUOAAUTL",12,0)
 ;Check to see if Inactive
"RTN","XUOAAUTL",13,0)
 I Z(4,IENS,101,"I") Q 0
"RTN","XUOAAUTL",14,0)
 ;Check to see if VAMC or M&ROC
"RTN","XUOAAUTL",15,0)
 I Z(4,IENS,13,"E")'="VAMC",Z(4,IENS,13,"E")'="M&ROC" Q 0
"RTN","XUOAAUTL",16,0)
 Q 1
"RTN","XUOAAUTL",17,0)
 ;
"RTN","XUOAAUTL",18,0)
HLP1 ; VHA TRAINING FACILITY HELP
"RTN","XUOAAUTL",19,0)
 W !,"Please choose the AFFILIATED VA facility responsible for administering"
"RTN","XUOAAUTL",20,0)
 W !,"this Registered trainee's clinical training program, even though the trainee's"
"RTN","XUOAAUTL",21,0)
 W !,"rotation may physically occur a secondary VA site (i.e., OPC, CBOC, etc.)."
"RTN","XUOAAUTL",22,0)
 Q
"RTN","XUSER2")
0^2^B11587344
"RTN","XUSER2",1,0)
XUSER2 ;ISF/RWF - New Person File Utilities ;9:17 AM  9 Mar 2005
"RTN","XUSER2",2,0)
 ;;8.0;KERNEL;**267,251,344**;Jul 10, 1995
"RTN","XUSER2",3,0)
 Q
"RTN","XUSER2",4,0)
VALDEA(X,F) ;Check for a valid DEA#
"RTN","XUSER2",5,0)
 ;Returns 0 for NOT Valid, 1 for Valid
"RTN","XUSER2",6,0)
 ;F = 1 for Facility DEA check.
"RTN","XUSER2",7,0)
 I $D(X) K:$L(X)>9!($L(X)<9)!'(X?2U7N) X
"RTN","XUSER2",8,0)
 S F=$G(F)
"RTN","XUSER2",9,0)
 I $D(X),'F,$D(^VA(200,"PS1",X)),$O(^(X,0))'=DA D EN^DDIOL($C(7)_"CAN'T FILE: DUPLICATE DEA NUMBER") K X
"RTN","XUSER2",10,0)
 I $D(X),'F,$D(DA),$E(X,2)'=$E($P(^VA(200,DA,0),"^")) D EN^DDIOL($C(7)_"WARNING: DEA# FORMAT MISMATCH -- CHECK SECOND LETTER")
"RTN","XUSER2",11,0)
 I $D(X),'$$DEANUM(X) D EN^DDIOL($C(7)_"CAN'T FILE: DEA# FORMAT MISMATCH -- NUMERIC ALGORITHM FAILED") K X
"RTN","XUSER2",12,0)
 Q $D(X)
"RTN","XUSER2",13,0)
 ;
"RTN","XUSER2",14,0)
DEANUM(X) ;Check DEA # part
"RTN","XUSER2",15,0)
 N VA1,VA2
"RTN","XUSER2",16,0)
 S VA1=$E(X,3)+$E(X,5)+$E(X,7)+(2*($E(X,4)+$E(X,6)+$E(X,8)))
"RTN","XUSER2",17,0)
 S VA1=VA1#10,VA2=$E(X,9)
"RTN","XUSER2",18,0)
 Q VA1=VA2
"RTN","XUSER2",19,0)
 ;
"RTN","XUSER2",20,0)
REQ(XUV,XUFLAG) ;Called from forms:
"RTN","XUSER2",21,0)
 ; XUEXISTING USER, XUNEW USER, XUREACT USER, XU-CLINICAL TRAINEE
"RTN","XUSER2",22,0)
 ;from the:
"RTN","XUSER2",23,0)
 ; - Form-level pre-action
"RTN","XUSER2",24,0)
 ; - Post action on change for "Is this person a Clinical Trainee?"
"RTN","XUSER2",25,0)
 ;In:
"RTN","XUSER2",26,0)
 ; XUV = 1 if user is a clinical trainee; 0 otherwise
"RTN","XUSER2",27,0)
 ;          If XUV is not passed, its value is obtained from the
"RTN","XUSER2",28,0)
 ;          CLINICAL CORE TRAINEE(#12.6).
"RTN","XUSER2",29,0)
 ; XUFLAG = 1 if called from the XU-CLINICAL TRAINEE form;
"RTN","XUSER2",30,0)
 ;          otherwise, called from the other forms
"RTN","XUSER2",31,0)
 ;
"RTN","XUSER2",32,0)
 N BLOCK,PAGE,FIELD,F126
"RTN","XUSER2",33,0)
 ; BLOCK = Block
"RTN","XUSER2",34,0)
 ; PAGE = Page number
"RTN","XUSER2",35,0)
 ; FIELD = Field number
"RTN","XUSER2",36,0)
 I $G(XUFLAG) S BLOCK="XU-CLINICAL TRAINEE 1",PAGE=1
"RTN","XUSER2",37,0)
 E  D
"RTN","XUSER2",38,0)
 . S BLOCK="XUEXISTING USER TRAINEE"
"RTN","XUSER2",39,0)
 . S PAGE=5
"RTN","XUSER2",40,0)
 ;
"RTN","XUSER2",41,0)
 I $G(XUV)="" D  ;Value not Passed get current value
"RTN","XUSER2",42,0)
 . N ZERR
"RTN","XUSER2",43,0)
 . S XUV=$$GET^DDSVAL(200,DA,"CLINICAL CORE TRAINEE",.ZERR,"I")
"RTN","XUSER2",44,0)
 . S XUV=$S(XUV="N":0,XUV="":0,1:1)
"RTN","XUSER2",45,0)
 S F126=XUV
"RTN","XUSER2",46,0)
 ;
"RTN","XUSER2",47,0)
 ;CURRENT DEGREE LEVEL 12.1
"RTN","XUSER2",48,0)
 ;PROGRAM OF STUDY 12.2
"RTN","XUSER2",49,0)
 ;LAST TRAINING MONTH & YEAR 12.3
"RTN","XUSER2",50,0)
 ;VHA TRAINING FACILITY 12.4
"RTN","XUSER2",51,0)
 ;DATE HL7 TRAINEE RECORD BUILT 12.5
"RTN","XUSER2",52,0)
 ;CLINICAL CORE TRAINEE 12.6
"RTN","XUSER2",53,0)
 ;DATE NO LONGER TRAINEE 12.7
"RTN","XUSER2",54,0)
 ;START OF TRAINING 12.8
"RTN","XUSER2",55,0)
 ;
"RTN","XUSER2",56,0)
 I F126 D  Q  ;Logic for when field 12.6 equals YES or Null
"RTN","XUSER2",57,0)
 . N FIELD
"RTN","XUSER2",58,0)
 . ;Make fields required
"RTN","XUSER2",59,0)
 . F FIELD="12.2F","12.4F" D REQ^DDSUTL(FIELD,BLOCK,PAGE,1)
"RTN","XUSER2",60,0)
 . ;Delete value in field 12.7 & make it uneditable
"RTN","XUSER2",61,0)
 . S FIELD=12.7 D PUT^DDSVAL(200,DA,FIELD,"@","","I")
"RTN","XUSER2",62,0)
 . S FIELD="12.7F" D UNED^DDSUTL(FIELD,BLOCK,PAGE,1)
"RTN","XUSER2",63,0)
 . D REQ^DDSUTL(FIELD,BLOCK,PAGE,0)
"RTN","XUSER2",64,0)
 . ;Make the following fields editable
"RTN","XUSER2",65,0)
 . F FIELD="12.1F","12.2F","12.3F","12.4F","12.8F" D UNED^DDSUTL(FIELD,BLOCK,PAGE,0)
"RTN","XUSER2",66,0)
 . Q
"RTN","XUSER2",67,0)
 I 'F126 D  Q  ;Logic for when field 12.6 equals NO
"RTN","XUSER2",68,0)
 . N FIELD,ZERR,F122,F127
"RTN","XUSER2",69,0)
 . S F122=$$GET^DDSVAL(200,DA,12.2,.ZERR,"I")
"RTN","XUSER2",70,0)
 . S F127=$$GET^DDSVAL(200,DA,12.7,.ZERR,"I")
"RTN","XUSER2",71,0)
 . I F122="" D  Q  ;Not a trainee, probably a mistake
"RTN","XUSER2",72,0)
 .. ;Make fields not required
"RTN","XUSER2",73,0)
 .. F FIELD="12.2F","12.4F" D REQ^DDSUTL(FIELD,BLOCK,PAGE,0)
"RTN","XUSER2",74,0)
 .. ;Make field uneditable
"RTN","XUSER2",75,0)
 .. F FIELD="12.1F","12.2F","12.3F","12.4F","12.7F","12.8F" D UNED^DDSUTL(FIELD,BLOCK,PAGE,1)
"RTN","XUSER2",76,0)
 .. Q
"RTN","XUSER2",77,0)
 . I F122]"",F127]"" Q
"RTN","XUSER2",78,0)
 . ;Make fields not required
"RTN","XUSER2",79,0)
 . F FIELD="12.2F","12.4F" D REQ^DDSUTL(FIELD,BLOCK,PAGE,0)
"RTN","XUSER2",80,0)
 . ;Make the following field required & editable
"RTN","XUSER2",81,0)
 . S FIELD="12.7F" D REQ^DDSUTL(FIELD,BLOCK,PAGE,1)
"RTN","XUSER2",82,0)
 . S FIELD="12.7F" D UNED^DDSUTL(FIELD,BLOCK,PAGE,0)
"RTN","XUSER2",83,0)
 . ;Don't allow editing of the following fields
"RTN","XUSER2",84,0)
 . F FIELD="12.1F","12.2F","12.3F","12.4F","12.8F" D UNED^DDSUTL(FIELD,BLOCK,PAGE,1)
"RTN","XUSER2",85,0)
 . Q
"RTN","XUSER2",86,0)
 Q
"VER")
8.0^22.0
"^DD",200,200,12.3,0)
LAST TRAINING MONTH & YEAR^FXO^^12;3^S %DT="EM" D ^%DT S X=Y K:Y<1 X K:((($E(Y)*100)+1700)+$E(Y,2,3))<2000 X I $D(X) S X=$S($E(Y,4,4)=0:$E(Y,5,5),1:$E(Y,4,5))_"/"_((($E(Y)*100)+1700)+$E(Y,2,3)) K:+$E(X)=0 X
"^DD",200,200,12.3,2)
S Y(0)=Y D DT^DILF("",Y,.Y) S Y=$$FMTE^XLFDT(Y,"D")
"^DD",200,200,12.3,2.1)
D DT^DILF("",Y,.Y) S Y=$$FMTE^XLFDT(Y,"D")
"^DD",200,200,12.3,3)
Answer with MONTH & YEAR.  YEAR can NOT be less than 2000.
"^DD",200,200,12.3,4)
N %DT S %DT="M" D HELP^%DTC
"^DD",200,200,12.3,21,0)
^.001^2^2^3040818^^^^
"^DD",200,200,12.3,21,1,0)
This is the MONTH and LAST year the trainee anticipates being in a
"^DD",200,200,12.3,21,2,0)
training program at this VA medical facility.
"^DD",200,200,12.3,"DT")
3050105
"^DD",200,200,12.4,0)
VHA TRAINING FACILITY^*P4'^DIC(4,^12;4^S DIC("S")="I $$SCRN4^XUOAAUTL(Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",200,200,12.4,3)

"^DD",200,200,12.4,4)
D HLP1^XUOAAUTL
"^DD",200,200,12.4,12)
VAMCs and M&ROCs only
"^DD",200,200,12.4,12.1)
S DIC("S")="I $$SCRN4^XUOAAUTL(Y)"
"^DD",200,200,12.4,"DT")
3050608
"^DD",200,200,12.5,0)
DATE HL7 TRAINEE RECORD BUILT^D^^12;5^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",200,200,12.5,1,0)
^.1
"^DD",200,200,12.5,1,1,0)
200^AOAA
"^DD",200,200,12.5,1,1,1)
S ^VA(200,"AOAA",$E(X,1,30),DA)=""
"^DD",200,200,12.5,1,1,2)
K ^VA(200,"AOAA",$E(X,1,30),DA)
"^DD",200,200,12.5,1,1,"%D",0)
^^2^2^3040513^
"^DD",200,200,12.5,1,1,"%D",1,0)
This index is index reflects when the transmission of the trainee record 
"^DD",200,200,12.5,1,1,"%D",2,0)
last took place.
"^DD",200,200,12.5,1,1,"DT")
3040513
"^DD",200,200,12.5,21,0)
^^2^2^3040513^
"^DD",200,200,12.5,21,1,0)
This is the date that the trainee information was built and sent to the
"^DD",200,200,12.5,21,2,0)
OAA server.
"^DD",200,200,12.5,"DT")
3050110
"^DD",200,200,12.6,0)
CLINICAL CORE TRAINEE^S^Y:YES;N:NO;^12;6^Q
"^DD",200,200,12.6,3)
Is this person a Clinical Core Trainee?
"^DD",200,200,12.6,21,0)
^^2^2^3040927^
"^DD",200,200,12.6,21,1,0)
This field designates whether or not the person is a Clinical Core 
"^DD",200,200,12.6,21,2,0)
Trainee.
"^DD",200,200,12.6,"DT")
3050105
"^DD",200,200,12.7,0)
DATE NO LONGER TRAINEE^D^^12;7^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",200,200,12.7,3)
Answer with the Date the person will no longer be a Clinical Core Trainee.
"^DD",200,200,12.7,21,0)
^.001^2^2^3050303^^
"^DD",200,200,12.7,21,1,0)
This is the date when a Clinical Core Trainee is no longer to be 
"^DD",200,200,12.7,21,2,0)
considered a trainee.
"^DD",200,200,12.7,"DT")
3050105
"^DD",200,200,12.8,0)
START OF TRAINING^D^^12;8^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",200,200,12.8,"DT")
3050105
"BLD",823,6)
^SEQ #311
**END**
**END**

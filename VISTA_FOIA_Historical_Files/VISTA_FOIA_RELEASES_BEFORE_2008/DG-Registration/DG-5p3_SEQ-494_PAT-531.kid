Released DG*5.3*531 SEQ #494
Extracted from mail message
**KIDS**:DG*5.3*531^

**INSTALL NAME**
DG*5.3*531
"BLD",5054,0)
DG*5.3*531^REGISTRATION^0^3040202^y
"BLD",5054,4,0)
^9.64PA^^
"BLD",5054,"INID")
n^n^n
"BLD",5054,"KRN",0)
^9.67PA^8989.52^19
"BLD",5054,"KRN",.4,0)
.4
"BLD",5054,"KRN",.401,0)
.401
"BLD",5054,"KRN",.402,0)
.402
"BLD",5054,"KRN",.403,0)
.403
"BLD",5054,"KRN",.5,0)
.5
"BLD",5054,"KRN",.84,0)
.84
"BLD",5054,"KRN",3.6,0)
3.6
"BLD",5054,"KRN",3.8,0)
3.8
"BLD",5054,"KRN",9.2,0)
9.2
"BLD",5054,"KRN",9.8,0)
9.8
"BLD",5054,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5054,"KRN",9.8,"NM",1,0)
DGMTDEL1^^0^B16886173
"BLD",5054,"KRN",9.8,"NM","B","DGMTDEL1",1)

"BLD",5054,"KRN",19,0)
19
"BLD",5054,"KRN",19.1,0)
19.1
"BLD",5054,"KRN",101,0)
101
"BLD",5054,"KRN",409.61,0)
409.61
"BLD",5054,"KRN",771,0)
771
"BLD",5054,"KRN",870,0)
870
"BLD",5054,"KRN",8989.51,0)
8989.51
"BLD",5054,"KRN",8989.52,0)
8989.52
"BLD",5054,"KRN",8994,0)
8994
"BLD",5054,"KRN","B",.4,.4)

"BLD",5054,"KRN","B",.401,.401)

"BLD",5054,"KRN","B",.402,.402)

"BLD",5054,"KRN","B",.403,.403)

"BLD",5054,"KRN","B",.5,.5)

"BLD",5054,"KRN","B",.84,.84)

"BLD",5054,"KRN","B",3.6,3.6)

"BLD",5054,"KRN","B",3.8,3.8)

"BLD",5054,"KRN","B",9.2,9.2)

"BLD",5054,"KRN","B",9.8,9.8)

"BLD",5054,"KRN","B",19,19)

"BLD",5054,"KRN","B",19.1,19.1)

"BLD",5054,"KRN","B",101,101)

"BLD",5054,"KRN","B",409.61,409.61)

"BLD",5054,"KRN","B",771,771)

"BLD",5054,"KRN","B",870,870)

"BLD",5054,"KRN","B",8989.51,8989.51)

"BLD",5054,"KRN","B",8989.52,8989.52)

"BLD",5054,"KRN","B",8994,8994)

"BLD",5054,"QUES",0)
^9.62^^
"BLD",5054,"REQB",0)
^9.611^1^1
"BLD",5054,"REQB",1,0)
DG*5.3*518^2
"BLD",5054,"REQB","B","DG*5.3*518",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
531^3040202^123456813
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DGMTDEL1")
0^1^B16886173
"RTN","DGMTDEL1",1,0)
DGMTDEL1 ;ALB/CAW,LBD,PHH - Delete MT for a Patient (con't) ;12/6/94
"RTN","DGMTDEL1",2,0)
 ;;5.3;Registration;**45,166,182,433,518,531**;Aug 13, 1993
"RTN","DGMTDEL1",3,0)
 ;
"RTN","DGMTDEL1",4,0)
ID ;write identifiers
"RTN","DGMTDEL1",5,0)
 S DGI=Y,DGN=$G(^DGMT(408.31,DGI,0))
"RTN","DGMTDEL1",6,0)
 W ?21,$S(DGMTYPT=1:"MEANS",DGMTYPT=2:"COPAY",DGMTYPT=4:"LTC Copay Exemption",1:"")_" TEST DATE"
"RTN","DGMTDEL1",7,0)
 S DGMTSRC=$$SR^DGMTAUD1(DGN)
"RTN","DGMTDEL1",8,0)
 I DGMTSRC="" S DGMTSRC="UNKNOWN"
"RTN","DGMTDEL1",9,0)
 W ?40,"SOURCE: ",$S($L(DGMTSRC)>10:$E(DGMTSRC,1,10),1:DGMTSRC),?60,"PRIMARY TEST: ",$S($G(^DGMT(408.31,DGI,"PRIM"))=1:"YES",1:"NO")
"RTN","DGMTDEL1",10,0)
 W !?14,"STATUS: ",$$S^DGMTAUD1($P(^(0),U,3)),?45,"COMPLETED: ",$S($P(^DGMT(408.31,DGI,0),U,7)']"":"-----",1:$$DATE($P(^(0),U,7)))
"RTN","DGMTDEL1",11,0)
 Q
"RTN","DGMTDEL1",12,0)
 ;
"RTN","DGMTDEL1",13,0)
DEL ;delete
"RTN","DGMTDEL1",14,0)
 ;
"RTN","DGMTDEL1",15,0)
 ;add entry in IVM PATIENT file used to notify HEC that a Means Test
"RTN","DGMTDEL1",16,0)
 ;or Copay, or LTC Copay Exemption Test has been deleted.
"RTN","DGMTDEL1",17,0)
 ;
"RTN","DGMTDEL1",18,0)
 D DELETE^IVMPLOG(DFN,DGMTD,$S(DGMTYPT=1:1,1:""),$S(DGMTYPT=2:2,1:""),,$S(DGMTYPT=4:4,1:""))
"RTN","DGMTDEL1",19,0)
 ;
"RTN","DGMTDEL1",20,0)
 D DELLNK  ;Deletion of Linked Tests
"RTN","DGMTDEL1",21,0)
 S DGMTACT="DEL",DIK="^DGMT(408.31," D ^DIK
"RTN","DGMTDEL1",22,0)
 S DGMTY=0 F  S DGMTY=$O(^DGMT(408.22,"AMT",DGMTI,DFN,DGMTY)) Q:'DGMTY  S DGMTX=0 F  S DGMTX=$O(^DGMT(408.22,"AMT",DGMTI,DFN,DGMTY,DGMTX)) Q:'DGMTX  D
"RTN","DGMTDEL1",23,0)
 .S DA=DGMTX
"RTN","DGMTDEL1",24,0)
 .I DA S DR="31///@",DIE="^DGMT(408.22," D ^DIE
"RTN","DGMTDEL1",25,0)
 .K DE,DQ,DR,DIK
"RTN","DGMTDEL1",26,0)
 .;
"RTN","DGMTDEL1",27,0)
 .; Delete the $0.00 values out of the net worth fields if total income
"RTN","DGMTDEL1",28,0)
 .; is not greater than zero dollars.
"RTN","DGMTDEL1",29,0)
 .N DA,NODE0,AMTFLG,CNT,DIE,DR
"RTN","DGMTDEL1",30,0)
 .S DA=$P($G(^DGMT(408.22,DGMTX,0)),"^",2)
"RTN","DGMTDEL1",31,0)
 .I DA D
"RTN","DGMTDEL1",32,0)
 ..Q:'$D(^DGMT(408.21,DA,2))
"RTN","DGMTDEL1",33,0)
 ..S NODE0=$G(^DGMT(408.21,DA,0)) Q:NODE0=""
"RTN","DGMTDEL1",34,0)
 ..S AMTFLG=0 F CNT=0:1:9 S:$P(NODE0,"^",CNT+8)'="" AMTFLG=1
"RTN","DGMTDEL1",35,0)
 ..I 'AMTFLG S DIE="^DGMT(408.21,",DR="31///@;2.01///@;2.02///@;2.03///@;2.04///@" D ^DIE
"RTN","DGMTDEL1",36,0)
 D AFTER^DGMTEVT S DGMTINF=0
"RTN","DGMTDEL1",37,0)
 I DGMTYPT=1!(DGMTYPT=2) D EN^DGMTEVT
"RTN","DGMTDEL1",38,0)
 I DGMTYPT=4 D
"RTN","DGMTDEL1",39,0)
 . D EN^DGMTAUD
"RTN","DGMTDEL1",40,0)
 . D ^IVMPMTE
"RTN","DGMTDEL1",41,0)
 Q
"RTN","DGMTDEL1",42,0)
VAR ;set variables
"RTN","DGMTDEL1",43,0)
 S DA=DGMTI,(DGP,DGMTP)=DGMT0,DGMTD=$P(DGMT0,U),DGCAT=$$MTS^DGMTU(DFN,$P(DGMTP,U,3)),DGMTYPT=$P(^DGMT(408.31,DGMTI,0),U,19)
"RTN","DGMTDEL1",44,0)
 Q
"RTN","DGMTDEL1",45,0)
LOOP ;loop through all means test for patient and delete
"RTN","DGMTDEL1",46,0)
 S (DGCT,DGI)=0 F  S DGI=$O(^DGMT(408.31,"C",DFN,DGI)) G:'DGI LKP^DGMTDEL S DGMTI=DGI,DGMT0=+$G(^DGMT(408.31,DGMTI,0)) D VAR,DEL S DGMTP=DGP,DGCT=DGCT+1
"RTN","DGMTDEL1",47,0)
 W !?10,DGCT,$S(DGMTYPT=1:" Means Test",DGMTYPT=2:" Copay Test",DGMTYPT=4:" LTC Copay Exemption Test",1:"")_$S(DGCT'=1:"s",1:"")_" deleted!"
"RTN","DGMTDEL1",48,0)
 Q
"RTN","DGMTDEL1",49,0)
DATE(X) ;function to return date in external format
"RTN","DGMTDEL1",50,0)
 ;INPUT -  FM internal date format
"RTN","DGMTDEL1",51,0)
 ;OUTPUT - external date format
"RTN","DGMTDEL1",52,0)
 Q $$FMTE^XLFDT($E(X,1,12),1)
"RTN","DGMTDEL1",53,0)
 ;
"RTN","DGMTDEL1",54,0)
PID(X) ;function to return pid
"RTN","DGMTDEL1",55,0)
 ;INPUT -  DFN
"RTN","DGMTDEL1",56,0)
 ;OUTPUT - PID or UNKNOWN
"RTN","DGMTDEL1",57,0)
 D PID^VADPT6
"RTN","DGMTDEL1",58,0)
 Q $S(VA("PID")]"":VA("PID"),1:"UNKNOWN")
"RTN","DGMTDEL1",59,0)
DELLNK ;Deletion of Linked tests
"RTN","DGMTDEL1",60,0)
 N IEN4,GIEN,DA,DIK,DIE,DR,LTCDT
"RTN","DGMTDEL1",61,0)
 I DGMTYPT=1!(DGMTYPT=2) D
"RTN","DGMTDEL1",62,0)
 .;check to see if test type 4 is linked with type 1 or 2
"RTN","DGMTDEL1",63,0)
 . S IEN4=$O(^DGMT(408.31,"AT",DGMTI,"")) Q:IEN4=""  ;Test type 4
"RTN","DGMTDEL1",64,0)
 . S LTCDT=$P($G(^DGMT(408.31,IEN4,0)),"^",1)  ;Date of Test
"RTN","DGMTDEL1",65,0)
 .;Check to see if test type 3 is linked with type 4
"RTN","DGMTDEL1",66,0)
 .;if linked, remove pointer value from test type 3
"RTN","DGMTDEL1",67,0)
 .;  Added FOR loop for LTC Phase III to support multiple type 3 tests
"RTN","DGMTDEL1",68,0)
 . S GIEN="" F  S GIEN=$O(^DGMT(408.31,"AT",IEN4,GIEN)) Q:GIEN=""  D
"RTN","DGMTDEL1",69,0)
 . . S DA=GIEN,DR="2.08///@",DIE="^DGMT(408.31," D ^DIE
"RTN","DGMTDEL1",70,0)
 .;remove linked test type 4 record.
"RTN","DGMTDEL1",71,0)
 . D DELETE^IVMPLOG(DFN,LTCDT,,,,4)
"RTN","DGMTDEL1",72,0)
 . N DGMTI,DGMTP,DGMTA,DGMTINF,DGMTACT,DGMTYPT
"RTN","DGMTDEL1",73,0)
 . S DGMTI=IEN4,DGMTP=$G(^DGMT(408.31,DGMTI,0))
"RTN","DGMTDEL1",74,0)
 . S DA=DGMTI,DIK="^DGMT(408.31," D ^DIK
"RTN","DGMTDEL1",75,0)
 . S DGMTACT="DEL" D AFTER^DGMTEVT S DGMTINF=0
"RTN","DGMTDEL1",76,0)
 . S DGMTYPT=4 D EN^DGMTAUD
"RTN","DGMTDEL1",77,0)
 I DGMTYPT=4 D
"RTN","DGMTDEL1",78,0)
 .;Check to see if test type 3 is linked with type 4
"RTN","DGMTDEL1",79,0)
 .;if linked, remove pointer value from test type 3
"RTN","DGMTDEL1",80,0)
 .;  Added FOR loop for LTC Phase III to support multiple type 3 tests
"RTN","DGMTDEL1",81,0)
 . S GIEN="" F  S GIEN=$O(^DGMT(408.31,"AT",DGMTI,GIEN)) Q:GIEN=""  D
"RTN","DGMTDEL1",82,0)
 . . S DA=GIEN,DR="2.08///@",DIE="^DGMT(408.31," D ^DIE
"RTN","DGMTDEL1",83,0)
 Q
"VER")
8.0^22
**END**
**END**

Released PSN*4*75 SEQ #72
Extracted from mail message
**KIDS**:PSN*4.0*75^

**INSTALL NAME**
PSN*4.0*75
"BLD",773,0)
PSN*4.0*75^NATIONAL DRUG FILE^0^3031027^y
"BLD",773,1,0)
^^10^10^3031010^^^^
"BLD",773,1,1,0)
 This patch lays the foundation for future Patient Medication Information
"BLD",773,1,2,0)
 Sheets (PMI) data updates. It creates the Delete Patient Medication
"BLD",773,1,3,0)
 Information Sheets [PSNDELTE] option.This new stand-alone option should
"BLD",773,1,4,0)
 only be used as part of future Patient Medication Information Sheet update
"BLD",773,1,5,0)
 patches. Because it deletes ALL PMI related DATA files, it should not be
"BLD",773,1,6,0)
 used at any other time.
"BLD",773,1,7,0)
 
"BLD",773,1,8,0)
 IMPORTANT: Do NOT use this option until instructed to do so in future PMI
"BLD",773,1,9,0)
 Update patches.
"BLD",773,1,10,0)
 
"BLD",773,4,0)
^9.64PA^^
"BLD",773,"ABPKG")
n
"BLD",773,"INID")
^
"BLD",773,"INIT")

"BLD",773,"KRN",0)
^9.67PA^8989.52^19
"BLD",773,"KRN",.4,0)
.4
"BLD",773,"KRN",.401,0)
.401
"BLD",773,"KRN",.402,0)
.402
"BLD",773,"KRN",.403,0)
.403
"BLD",773,"KRN",.5,0)
.5
"BLD",773,"KRN",.84,0)
.84
"BLD",773,"KRN",3.6,0)
3.6
"BLD",773,"KRN",3.8,0)
3.8
"BLD",773,"KRN",9.2,0)
9.2
"BLD",773,"KRN",9.8,0)
9.8
"BLD",773,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",773,"KRN",9.8,"NM",1,0)
PSNDELTE^^0^B14694052
"BLD",773,"KRN",9.8,"NM","B","PSNDELTE",1)

"BLD",773,"KRN",19,0)
19
"BLD",773,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",773,"KRN",19,"NM",1,0)
PSNDELTE^^0
"BLD",773,"KRN",19,"NM","B","PSNDELTE",1)

"BLD",773,"KRN",19.1,0)
19.1
"BLD",773,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",773,"KRN",101,0)
101
"BLD",773,"KRN",101,"NM",0)
^9.68A^^
"BLD",773,"KRN",409.61,0)
409.61
"BLD",773,"KRN",771,0)
771
"BLD",773,"KRN",870,0)
870
"BLD",773,"KRN",8989.51,0)
8989.51
"BLD",773,"KRN",8989.52,0)
8989.52
"BLD",773,"KRN",8994,0)
8994
"BLD",773,"KRN","B",.4,.4)

"BLD",773,"KRN","B",.401,.401)

"BLD",773,"KRN","B",.402,.402)

"BLD",773,"KRN","B",.403,.403)

"BLD",773,"KRN","B",.5,.5)

"BLD",773,"KRN","B",.84,.84)

"BLD",773,"KRN","B",3.6,3.6)

"BLD",773,"KRN","B",3.8,3.8)

"BLD",773,"KRN","B",9.2,9.2)

"BLD",773,"KRN","B",9.8,9.8)

"BLD",773,"KRN","B",19,19)

"BLD",773,"KRN","B",19.1,19.1)

"BLD",773,"KRN","B",101,101)

"BLD",773,"KRN","B",409.61,409.61)

"BLD",773,"KRN","B",771,771)

"BLD",773,"KRN","B",870,870)

"BLD",773,"KRN","B",8989.51,8989.51)

"BLD",773,"KRN","B",8989.52,8989.52)

"BLD",773,"KRN","B",8994,8994)

"BLD",773,"PRE")

"BLD",773,"PRET")

"BLD",773,"QUES",0)
^9.62^^
"BLD",773,"REQB",0)
^9.611^1^1
"BLD",773,"REQB",1,0)
PSN*4.0*74^1
"BLD",773,"REQB","B","PSN*4.0*74",1)

"KRN",19,975,-1)
0^1
"KRN",19,975,0)
PSNDELTE^Delete Patient Medication Information Sheet Data^^R^^^^^^^^NATIONAL DRUG FILE^^
"KRN",19,975,1,0)
^19.06^2^2^3031008^^
"KRN",19,975,1,1,0)
This option is a standalone option ONLY TO BE USED when installing Patient
"KRN",19,975,1,2,0)
Medication Information Sheets (PMI) data.
"KRN",19,975,20)

"KRN",19,975,25)
BEGIN^PSNDELTE
"KRN",19,975,"U")
DELETE PATIENT MEDICATION INFO
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",114,-1)
1^1
"PKG",114,0)
NATIONAL DRUG FILE^PSN^This is the National Drug File Package V 4
"PKG",114,20,0)
^9.402P^^
"PKG",114,22,0)
^9.49I^1^1
"PKG",114,22,1,0)
4.0
"PKG",114,22,1,"PAH",1,0)
75^3031027
"PKG",114,22,1,"PAH",1,1,0)
^^10^10^3031027
"PKG",114,22,1,"PAH",1,1,1,0)
 This patch lays the foundation for future Patient Medication Information
"PKG",114,22,1,"PAH",1,1,2,0)
 Sheets (PMI) data updates. It creates the Delete Patient Medication
"PKG",114,22,1,"PAH",1,1,3,0)
 Information Sheets [PSNDELTE] option.This new stand-alone option should
"PKG",114,22,1,"PAH",1,1,4,0)
 only be used as part of future Patient Medication Information Sheet update
"PKG",114,22,1,"PAH",1,1,5,0)
 patches. Because it deletes ALL PMI related DATA files, it should not be
"PKG",114,22,1,"PAH",1,1,6,0)
 used at any other time.
"PKG",114,22,1,"PAH",1,1,7,0)
 
"PKG",114,22,1,"PAH",1,1,8,0)
 IMPORTANT: Do NOT use this option until instructed to do so in future PMI
"PKG",114,22,1,"PAH",1,1,9,0)
 Update patches.
"PKG",114,22,1,"PAH",1,1,10,0)
 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSNDELTE")
0^1^B14694052
"RTN","PSNDELTE",1,0)
PSNDELTE ;BIRM/WRT-Deletes PMI files for PMI Update Patches ; 10/27/03 10:27
"RTN","PSNDELTE",2,0)
 ;;4.0; NATIONAL DRUG FILE;**75**; 30 Oct 98
"RTN","PSNDELTE",3,0)
 Q
"RTN","PSNDELTE",4,0)
START ; Begin update process
"RTN","PSNDELTE",5,0)
 W !!,"This option will run the auto-mapping process. This will be accomplished by",!,"taking NDCs from NDC/UPN file #50.67 and the VA Products tied to these NDCs"
"RTN","PSNDELTE",6,0)
 W !,"in file #50.68 AND attempt to find a match in PMI NDC/GCNSEQNO file #50.628."
"RTN","PSNDELTE",7,0)
 W ! S DIR("A")="Are you sure you are ready to proceed? "
"RTN","PSNDELTE",8,0)
 S DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","PSNDELTE",9,0)
 I Y=0 Q
"RTN","PSNDELTE",10,0)
 Q
"RTN","PSNDELTE",11,0)
 ;
"RTN","PSNDELTE",12,0)
 ;
"RTN","PSNDELTE",13,0)
BEGIN I $D(DUZ)#2 N DIC,X,Y S DIC=200,DIC(0)="N",X="`"_DUZ D ^DIC I Y>0,$D(DUZ(0))#2,DUZ(0)="@" G TEXT
"RTN","PSNDELTE",14,0)
 E  W !!,"You must be a valid user with DUZ(0)=""@"""
"RTN","PSNDELTE",15,0)
 Q
"RTN","PSNDELTE",16,0)
TEXT W !,"This option will automatically DELETE all Patient Medication Information Sheet",!,"data from your system."
"RTN","PSNDELTE",17,0)
 W !!,"If you are not absolutely sure what you are about to do, exit this option",!,"immediately by entering ""^"" at the next prompt."
"RTN","PSNDELTE",18,0)
 W !!,"This option should only be used when installing a update Patient Medication",!,"Information Sheet Data Update patch."
"RTN","PSNDELTE",19,0)
 W "Immediately after running this option, the",!,"new data global MUST be installed using instructions from the Patient Medication",!,"Sheet Data Update patch."
"RTN","PSNDELTE",20,0)
 W !,"You are about to DELETE ALL Patient Medication Sheet data from the following",!,"files:",!
"RTN","PSNDELTE",21,0)
 W !!,?7,"50.621       PMI-ENGLISH             ^PS(50.621,"
"RTN","PSNDELTE",22,0)
 W !,?7,"50.622       PMI-SPANISH             ^PS(50.622,"
"RTN","PSNDELTE",23,0)
 W !,?7,"50.623       PMI MAP-ENGLISH         ^PS(50.623,"
"RTN","PSNDELTE",24,0)
 W !,?7,"50.624       PMI MAP-SPANISH         ^PS(50.624,"
"RTN","PSNDELTE",25,0)
 W !,?7,"50.625       WARNING LABEL-ENGLISH   ^PS(50.625,"
"RTN","PSNDELTE",26,0)
 W !,?7,"50.626       WARNING LABEL-SPANISH   ^PS(50.626,"
"RTN","PSNDELTE",27,0)
 W !,?7,"50.627       WARNING LABEL MAP       ^PS(50.627,"
"RTN","PSNDELTE",28,0)
 W ! S DIR("A")="Are you sure you want to delete the Patient Medication Information Sheet data?   "
"RTN","PSNDELTE",29,0)
 S DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","PSNDELTE",30,0)
 I Y=0 Q
"RTN","PSNDELTE",31,0)
 D SECND
"RTN","PSNDELTE",32,0)
 Q
"RTN","PSNDELTE",33,0)
SECND ; Ask a second time
"RTN","PSNDELTE",34,0)
 W !!,"Because running this process inadvertently could cause serious problems, you",!,"will be asked to confirm that you want to proceed."
"RTN","PSNDELTE",35,0)
 K DIR W ! S DIR("A")="Are you sure you are ready to proceed, deleting the Patient Medication          Information Sheet data?  "
"RTN","PSNDELTE",36,0)
 S DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","PSNDELTE",37,0)
 I Y=0 Q
"RTN","PSNDELTE",38,0)
DELETE  K ^PS(50.621),^PS(50.622),^PS(50.623),^PS(50.624),^PS(50.625),^PS(50.626),^PS(50.627)
"RTN","PSNDELTE",39,0)
 W !!,"Deleting all Patient Medication Information Sheet data...",!,"The deletion process has completed.",!!,"Now, IMMEDIATELY install (restore) the new data global from the latest"
"RTN","PSNDELTE",40,0)
 W !,"Patient Medication Information Sheet data update patch."
"RTN","PSNDELTE",41,0)
 Q
"VER")
8.0^22.0
**END**
**END**

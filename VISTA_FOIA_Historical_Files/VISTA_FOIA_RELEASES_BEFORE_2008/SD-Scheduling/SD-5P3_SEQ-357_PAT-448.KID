Released SD*5.3*448 SEQ #357
Extracted from mail message
**KIDS**:SD*5.3*448^

**INSTALL NAME**
SD*5.3*448
"BLD",6277,0)
SD*5.3*448^SCHEDULING^0^3050803^y
"BLD",6277,1,0)
^^4^4^3050803^
"BLD",6277,1,1,0)
The Institution selection in several EWL reports only includes
"BLD",6277,1,2,0)
institutions that have been set up via EWL Parameter enter/edit.  Logic
"BLD",6277,1,3,0)
changed to allow PCMM team institutions, as well as, those set up via EWL
"BLD",6277,1,4,0)
Parameter enter/edit.
"BLD",6277,4,0)
^9.64PA^^
"BLD",6277,"ABPKG")
n
"BLD",6277,"KRN",0)
^9.67PA^8989.52^19
"BLD",6277,"KRN",.4,0)
.4
"BLD",6277,"KRN",.401,0)
.401
"BLD",6277,"KRN",.402,0)
.402
"BLD",6277,"KRN",.403,0)
.403
"BLD",6277,"KRN",.5,0)
.5
"BLD",6277,"KRN",.84,0)
.84
"BLD",6277,"KRN",3.6,0)
3.6
"BLD",6277,"KRN",3.8,0)
3.8
"BLD",6277,"KRN",9.2,0)
9.2
"BLD",6277,"KRN",9.8,0)
9.8
"BLD",6277,"KRN",9.8,"NM",0)
^9.68A^5^4
"BLD",6277,"KRN",9.8,"NM",2,0)
SDWLQOF^^0^B26337393
"BLD",6277,"KRN",9.8,"NM",3,0)
SDWLQOI^^0^B7895390
"BLD",6277,"KRN",9.8,"NM",4,0)
SDWLQSR^^0^B7657186
"BLD",6277,"KRN",9.8,"NM",5,0)
SDWLRQ1^^0^B39567538
"BLD",6277,"KRN",9.8,"NM","B","SDWLQOF",2)

"BLD",6277,"KRN",9.8,"NM","B","SDWLQOI",3)

"BLD",6277,"KRN",9.8,"NM","B","SDWLQSR",4)

"BLD",6277,"KRN",9.8,"NM","B","SDWLRQ1",5)

"BLD",6277,"KRN",19,0)
19
"BLD",6277,"KRN",19.1,0)
19.1
"BLD",6277,"KRN",101,0)
101
"BLD",6277,"KRN",409.61,0)
409.61
"BLD",6277,"KRN",771,0)
771
"BLD",6277,"KRN",870,0)
870
"BLD",6277,"KRN",8989.51,0)
8989.51
"BLD",6277,"KRN",8989.52,0)
8989.52
"BLD",6277,"KRN",8994,0)
8994
"BLD",6277,"KRN","B",.4,.4)

"BLD",6277,"KRN","B",.401,.401)

"BLD",6277,"KRN","B",.402,.402)

"BLD",6277,"KRN","B",.403,.403)

"BLD",6277,"KRN","B",.5,.5)

"BLD",6277,"KRN","B",.84,.84)

"BLD",6277,"KRN","B",3.6,3.6)

"BLD",6277,"KRN","B",3.8,3.8)

"BLD",6277,"KRN","B",9.2,9.2)

"BLD",6277,"KRN","B",9.8,9.8)

"BLD",6277,"KRN","B",19,19)

"BLD",6277,"KRN","B",19.1,19.1)

"BLD",6277,"KRN","B",101,101)

"BLD",6277,"KRN","B",409.61,409.61)

"BLD",6277,"KRN","B",771,771)

"BLD",6277,"KRN","B",870,870)

"BLD",6277,"KRN","B",8989.51,8989.51)

"BLD",6277,"KRN","B",8989.52,8989.52)

"BLD",6277,"KRN","B",8994,8994)

"BLD",6277,"QUES",0)
^9.62^^
"BLD",6277,"REQB",0)
^9.611^2^1
"BLD",6277,"REQB",2,0)
SD*5.3*425^1
"BLD",6277,"REQB","B","SD*5.3*425",2)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
448^3050803
"PKG",16,22,1,"PAH",1,1,0)
^^4^4^3050803
"PKG",16,22,1,"PAH",1,1,1,0)
The Institution selection in several EWL reports only includes
"PKG",16,22,1,"PAH",1,1,2,0)
institutions that have been set up via EWL Parameter enter/edit.  Logic
"PKG",16,22,1,"PAH",1,1,3,0)
changed to allow PCMM team institutions, as well as, those set up via EWL
"PKG",16,22,1,"PAH",1,1,4,0)
Parameter enter/edit.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","SDWLQOF")
0^2^B26337393
"RTN","SDWLQOF",1,0)
SDWLQOF ;;IOFO BAY PINES/TEH - OVERDUE APPOINTMENT
"RTN","SDWLQOF",2,0)
 ;;5.3;scheduling;**263,414,425,448**;AUG 13 1993
"RTN","SDWLQOF",3,0)
 ;
"RTN","SDWLQOF",4,0)
 ;
"RTN","SDWLQOF",5,0)
 ;******************************************************************
"RTN","SDWLQOF",6,0)
 ;                             CHANGE LOG
"RTN","SDWLQOF",7,0)
 ;                                               
"RTN","SDWLQOF",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLQOF",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLQOF",10,0)
 ;
"RTN","SDWLQOF",11,0)
EN ;Header
"RTN","SDWLQOF",12,0)
 N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSAVE,ZTSK,SDWLSPT
"RTN","SDWLQOF",13,0)
 D HD
"RTN","SDWLQOF",14,0)
 S SDWLINST="",SDWLERR=0 K ^TMP("SDWLQOF",$J),DIC,DIR,DR,DIE
"RTN","SDWLQOF",15,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLQOF",16,0)
2 D CAT G 1:SDWLERR,END:$D(DUOUT)
"RTN","SDWLQOF",17,0)
3 D FORM G 2:SDWLERR,END:$D(DUOUT)
"RTN","SDWLQOF",18,0)
4 D DIS G EN:SDWLERR=1,END:SDWLERR=2
"RTN","SDWLQOF",19,0)
 D QUE
"RTN","SDWLQOF",20,0)
 Q
"RTN","SDWLQOF",21,0)
INS ;Get Institution
"RTN","SDWLQOF",22,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // "
"RTN","SDWLQOF",23,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!($D(^SDWL(409.31,""E"",+Y)))!($D(^SCTM(404.51,""AINST"",+Y)))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLQOF",24,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLQOF",25,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLQOF",26,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLQOF",$J,"INS")="ALL" G IN3
"RTN","SDWLQOF",27,0)
 S SDWLPROM="Another Institution: ",SDWLERR=1
"RTN","SDWLQOF",28,0)
 G IN:$D(SDWLIN(+Y)) S SDWLIN(+Y)=""
"RTN","SDWLQOF",29,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLQOF",30,0)
IN2 S ^TMP("SDWLQOF",$J,"INS")=SDWLINST
"RTN","SDWLQOF",31,0)
IN3 Q
"RTN","SDWLQOF",32,0)
CAT ;Report category selection
"RTN","SDWLQOF",33,0)
 K DIR,DIE,DR,DIC
"RTN","SDWLQOF",34,0)
 W !!,"    *** Report Category Selection ***" S SDWLERR=0
"RTN","SDWLQOF",35,0)
 S SDWLERR=0,SDWLCAT="",DIR(0)="SO^1:Clinic;2:Select Service/Specialty",DIR("L",1)="     1. Clinic",DIR("L")="     2. Service/Specialty"
"RTN","SDWLQOF",36,0)
 D ^DIR
"RTN","SDWLQOF",37,0)
 I X="^" S SDWLERR=1 W *7 Q
"RTN","SDWLQOF",38,0)
 I X="" S SDWLERR=1 W *7 Q
"RTN","SDWLQOF",39,0)
 S X=$S(X["C":"C",X["c":"C",X["S":"S",X["s":"S",X=1:"C",X=2:"S",1:"")
"RTN","SDWLQOF",40,0)
 I X="" W *7," Invalid Selection." G CAT
"RTN","SDWLQOF",41,0)
 W !!,"Select Category for Report Output",!
"RTN","SDWLQOF",42,0)
 S SDWLX=$S(X="C":"Clinic: ALL/ ",X="S":"Service/Specialty: ALL/ ")
"RTN","SDWLQOF",43,0)
 S SDWLF=$S(X["C":409.32,X["S":409.31,X["c":409.32,X["s":409.31)
"RTN","SDWLQOF",44,0)
 S SDWLFD=$S(X="C":8,1:7)
"RTN","SDWLQOF",45,0)
 S SDWLCTX=X
"RTN","SDWLQOF",46,0)
 K DIR,DIC,DR
"RTN","SDWLQOF",47,0)
 S ^TMP("SDWLQOF",$J,"CT1")=SDWLCTX_"^"_SDWLF_"^"_SDWLFD,DIC("A")=SDWLX,SDWLE=0
"RTN","SDWLQOF",48,0)
CT1 W ! S DIC(0)="QEMNZA",DIC=SDWLF D ^DIC I 'SDWLE,Y<1 S ^TMP("SDWLQOF",$J,"CT2")="ALL" G CT3
"RTN","SDWLQOF",49,0)
 I Y<0,'$D(^TMP("SDWLQOF",$J,"CT1")) W !,"This Entry is Required." G CAT
"RTN","SDWLQOF",50,0)
 G CT2:Y<0
"RTN","SDWLQOF",51,0)
 S SDWLCAT=SDWLCAT_Y_";",DIC("A")="Another "_$P(SDWLX,":",1)_": ",SDWLE=1 G CT1
"RTN","SDWLQOF",52,0)
CT2 G CT1:'$D(SDWLCAT) S ^TMP("SDWLQOF",$J,"CT2")=SDWLCAT
"RTN","SDWLQOF",53,0)
CT3 Q
"RTN","SDWLQOF",54,0)
FORM ;Report Format
"RTN","SDWLQOF",55,0)
 S SDWLERR=0,DIR(0)="SO^1:D:Detailed;S:Summary",DIR("L",2)="     D Detailed"
"RTN","SDWLQOF",56,0)
 S DIR("L")="     S Summary",DIR("L",1)="Select One of the Following: "
"RTN","SDWLQOF",57,0)
 D ^DIR
"RTN","SDWLQOF",58,0)
 I X="^" S DUOUT=1 Q
"RTN","SDWLQOF",59,0)
 S SDWLFORM=$S(X["D":"D",X["d":"D",X["S":"S",X["s":"S",1:"")
"RTN","SDWLQOF",60,0)
 I X="" W !,"Required!" G FORM
"RTN","SDWLQOF",61,0)
 S ^TMP("SDWLQOF",$J,"FORM")=SDWLFORM
"RTN","SDWLQOF",62,0)
 Q
"RTN","SDWLQOF",63,0)
DIS ;Display Parameters
"RTN","SDWLQOF",64,0)
 S SDWLERR=0 W !!,?80-$L("*** Selected Report Parameters ***")\2,"*** Selected Report Parameters ***",!
"RTN","SDWLQOF",65,0)
 F SDWLI="INS","CT1","CT2","FORM" D
"RTN","SDWLQOF",66,0)
 .S X="SDWL"_SDWLI,@X=$G(^TMP("SDWLQOF",$J,SDWLI))
"RTN","SDWLQOF",67,0)
 F SDWLTAG="IS","CT","OP" D @SDWLTAG
"RTN","SDWLQOF",68,0)
 Q
"RTN","SDWLQOF",69,0)
IS I SDWLINS'["ALL" D
"RTN","SDWLQOF",70,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLINS,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLQOF",71,0)
 .W !,?20,"Institution: "
"RTN","SDWLQOF",72,0)
 .I $D(SDWLY) S I="" F  S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?33 W SDWLY(I)
"RTN","SDWLQOF",73,0)
 .K SDWLY
"RTN","SDWLQOF",74,0)
 I SDWLINS["ALL" W !,?20,"Institution: ALL "
"RTN","SDWLQOF",75,0)
 Q
"RTN","SDWLQOF",76,0)
CT I SDWLCT2'["ALL" D
"RTN","SDWLQOF",77,0)
 .S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLQOF",78,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLCT2,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLQOF",79,0)
 .W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 I @X="ALL" W "All "
"RTN","SDWLQOF",80,0)
 .I $D(SDWLY) S I="" F   S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?35 W $$EXTERNAL^DILFD(SDWLF,.01,,SDWLY(I))
"RTN","SDWLQOF",81,0)
 I SDWLCT2["ALL" W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 W "ALL "
"RTN","SDWLQOF",82,0)
 Q
"RTN","SDWLQOF",83,0)
OP W !,?18,"Output Format: ",$S(SDWLFORM="D":" Detailed",1:" Summary")
"RTN","SDWLQOF",84,0)
 Q
"RTN","SDWLQOF",85,0)
 S %=1 W !!,"Are these Parameters Correct " D YN^DICN I %=2 S SDWLERR=1 W !,"  This Report will NOT be queued to print."
"RTN","SDWLQOF",86,0)
 I SDWLERR S DIR(0)="E" D ^DIR I X["^" S SDWLERR=2
"RTN","SDWLQOF",87,0)
 Q
"RTN","SDWLQOF",88,0)
QUE ;Queue Report
"RTN","SDWLQOF",89,0)
 N ZTQUEUED,POP
"RTN","SDWLQOF",90,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLQOF",91,0)
 S ZTRTN=$S(SDWLFORM="D":"EN^SDWLROF",1:"EN^SDWLROS"),ZTDTH=$H,ZTDESC="WAIT LIST OVERDUE REPORT"
"RTN","SDWLQOF",92,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLQOF",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLQOF",93,0)
 .S SDWLTK=$G(^TMP("SDWLQOF",$J,SDWLTASK))
"RTN","SDWLQOF",94,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLQOF",95,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G END
"RTN","SDWLQOF",96,0)
QUE1 S:$E(IOST,1,2)="C-" SDWLSPT=1 I $D(ZTRTN) U IO D @ZTRTN K SDWLSPT
"RTN","SDWLQOF",97,0)
 ;
"RTN","SDWLQOF",98,0)
END ;
"RTN","SDWLQOF",99,0)
 K SDWLTASK,SDWLY,SDWLED,WDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI,I
"RTN","SDWLQOF",100,0)
 K DIR,DIC,DR,DIE
"RTN","SDWLQOF",101,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLQOF",102,0)
 Q
"RTN","SDWLQOF",103,0)
HD W:$D(IOF) @IOF W !,?80-$L("Overdue Appointment Wait List Report")\2,"Overdue Appointment Wait List Report"
"RTN","SDWLQOF",104,0)
 Q
"RTN","SDWLQOI")
0^3^B7895390
"RTN","SDWLQOI",1,0)
SDWLQOI ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT - ENROLLEE SORT
"RTN","SDWLQOI",2,0)
 ;;5.3;scheduling;**263,425,448**;AUG 13 1993
"RTN","SDWLQOI",3,0)
 ;
"RTN","SDWLQOI",4,0)
 ;
"RTN","SDWLQOI",5,0)
 ;
"RTN","SDWLQOI",6,0)
 ;
"RTN","SDWLQOI",7,0)
 ;
"RTN","SDWLQOI",8,0)
EN D HD
"RTN","SDWLQOI",9,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLQOI",10,0)
2 D DATE G END:$D(DUOUT)
"RTN","SDWLQOI",11,0)
 D QUE G END:$D(DUOUT)
"RTN","SDWLQOI",12,0)
 Q
"RTN","SDWLQOI",13,0)
INS ;Get Institution
"RTN","SDWLQOI",14,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // ",SDWLINST=""
"RTN","SDWLQOI",15,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!$D(^SDWL(409.31,""E"",+Y))!$D(^SCTM(404.51,""AINST"",+Y))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLQOI",16,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLQOI",17,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLQOI",18,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLROI",$J,"INS")="ALL" G IN3
"RTN","SDWLQOI",19,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLQOI",20,0)
IN2 S ^TMP("SDWLROI",$J,"INS")=SDWLINST
"RTN","SDWLQOI",21,0)
IN3 Q
"RTN","SDWLQOI",22,0)
DATE ;Date range selection
"RTN","SDWLQOI",23,0)
 K X,Y,%DT
"RTN","SDWLQOI",24,0)
 S SDWLERR=0 W ! S %DT="AE",%DT("A")="Start Date: " D ^%DT
"RTN","SDWLQOI",25,0)
 I X["^" S DUOUT=1 Q
"RTN","SDWLQOI",26,0)
 I Y<0 S DUOUT=1 Q 
"RTN","SDWLQOI",27,0)
 S SDWLBDT=Y
"RTN","SDWLQOI",28,0)
 Q:$D(DUOUT)
"RTN","SDWLQOI",29,0)
 S %DT("A")="End Date: " D ^%DT G DATE:Y<1 S SDWLEDT=Y K %DT(0),%DT("A")
"RTN","SDWLQOI",30,0)
 G DATE:$D(DUOUT)
"RTN","SDWLQOI",31,0)
 I SDWLEDT<SDWLBDT W !,"Beginning Date must be greater than Ending Date." G DATE
"RTN","SDWLQOI",32,0)
 S ^TMP("SDWLROI",$J,"DATE")=SDWLBDT_"^"_SDWLEDT K DIR,DIC,DIE,%DT Q
"RTN","SDWLQOI",33,0)
 Q
"RTN","SDWLQOI",34,0)
QUE ;Queue Report
"RTN","SDWLQOI",35,0)
 N ZTQUEUED,POP
"RTN","SDWLQOI",36,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLQOI",37,0)
 S ZTRTN="EN^SDWLROI",ZTDTH=$H,ZTDESC="WAIT LIST ENROLL STAT REPORT"
"RTN","SDWLQOI",38,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLROI",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLQOI",39,0)
 .S SDWLTK=$G(^TMP("SDWLROI",$J,SDWLTASK))
"RTN","SDWLQOI",40,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLQOI",41,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G QUE2
"RTN","SDWLQOI",42,0)
QUE1 S:$E(IOST,1,2)="C-" SDWLIOSR=1 I $D(ZTRTN) U IO D @ZTRTN K SDWLIOSR
"RTN","SDWLQOI",43,0)
 ;
"RTN","SDWLQOI",44,0)
 ;
"RTN","SDWLQOI",45,0)
QUE2 K SDWLTASK,SDWLY,SDWLED,SDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI
"RTN","SDWLQOI",46,0)
 K DIR,DIC,DR,DIE
"RTN","SDWLQOI",47,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLQOI",48,0)
 Q
"RTN","SDWLQOI",49,0)
END D EN^SDWLKIL K SDWLIOSR Q
"RTN","SDWLQOI",50,0)
HD ;
"RTN","SDWLQOI",51,0)
 W:$D(IOF) @IOF W !,?80-$L("Wait List Enrollment Status Report")\2,"Wait List Enrollment Status Report",!
"RTN","SDWLQSR")
0^4^B7657186
"RTN","SDWLQSR",1,0)
SDWLQSR ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT
"RTN","SDWLQSR",2,0)
 ;;5.3;scheduling;**263,425,448**;AUG 13 1993
"RTN","SDWLQSR",3,0)
 ;
"RTN","SDWLQSR",4,0)
 ;
"RTN","SDWLQSR",5,0)
 ;
"RTN","SDWLQSR",6,0)
 ;
"RTN","SDWLQSR",7,0)
 ;
"RTN","SDWLQSR",8,0)
EN N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSAVE,ZTSK,POP
"RTN","SDWLQSR",9,0)
 D HD
"RTN","SDWLQSR",10,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLQSR",11,0)
2 D DATE G END:$D(DUOUT)
"RTN","SDWLQSR",12,0)
 D QUE G END:$D(DUOUT)
"RTN","SDWLQSR",13,0)
 Q
"RTN","SDWLQSR",14,0)
INS ;Get Institution
"RTN","SDWLQSR",15,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // ",SDWLINST=""
"RTN","SDWLQSR",16,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!$D(^SDWL(409.31,""E"",+Y))!$D(^SCTM(404.51,""AINST"",+Y))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLQSR",17,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLQSR",18,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLQSR",19,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLQSR",$J,"INS")="ALL" G IN3
"RTN","SDWLQSR",20,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLQSR",21,0)
IN2 S ^TMP("SDWLQSR",$J,"INS")=SDWLINST
"RTN","SDWLQSR",22,0)
IN3 Q
"RTN","SDWLQSR",23,0)
DATE ;Date range selection
"RTN","SDWLQSR",24,0)
 K X,Y,%DT
"RTN","SDWLQSR",25,0)
 S SDWLERR=0 W ! S %DT="AE",%DT("A")="Start Date: " D ^%DT
"RTN","SDWLQSR",26,0)
 I X["^" S DUOUT=1 Q
"RTN","SDWLQSR",27,0)
 I Y<0 S DUOUT=1 Q 
"RTN","SDWLQSR",28,0)
 S SDWLBDT=Y
"RTN","SDWLQSR",29,0)
 Q:$D(DUOUT)
"RTN","SDWLQSR",30,0)
 S %DT("A")="End Date: " D ^%DT G DATE:Y<1 S SDWLEDT=Y K %DT(0),%DT("A")
"RTN","SDWLQSR",31,0)
 G DATE:$D(DUOUT)
"RTN","SDWLQSR",32,0)
 I SDWLEDT<SDWLBDT W !,"Beginning Date must be greater than Ending Date." G DATE
"RTN","SDWLQSR",33,0)
 S ^TMP("SDWLQSR",$J,"DATE")=SDWLBDT_"^"_SDWLEDT K DIR,DIC,DIE,%DT Q
"RTN","SDWLQSR",34,0)
 Q
"RTN","SDWLQSR",35,0)
QUE ;Queue Report
"RTN","SDWLQSR",36,0)
 N ZTQUEUED,POP
"RTN","SDWLQSR",37,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLQSR",38,0)
 S ZTRTN="EN^SDWLRSR",ZTDTH=$H,ZTDESC="WAIT LIST STAT REPORT"
"RTN","SDWLQSR",39,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLQSR",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLQSR",40,0)
 .S SDWLTK=$G(^TMP("SDWLQSR",$J,SDWLTASK))
"RTN","SDWLQSR",41,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLQSR",42,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G QUE2
"RTN","SDWLQSR",43,0)
QUE1 S:$E(IOST,1,2)="C-" SDWLSPT=1 I $D(ZTRTN) U IO D @ZTRTN K SDWLSPT
"RTN","SDWLQSR",44,0)
 ;
"RTN","SDWLQSR",45,0)
 ;
"RTN","SDWLQSR",46,0)
QUE2 K SDWLTASK,SDWLY,SDWLED,WDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI
"RTN","SDWLQSR",47,0)
 K DIR,DIC,DR,DIE
"RTN","SDWLQSR",48,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLQSR",49,0)
 Q
"RTN","SDWLQSR",50,0)
END D EN^SDWLKIL Q
"RTN","SDWLQSR",51,0)
HD ;
"RTN","SDWLQSR",52,0)
 W:$D(IOF) @IOF W !,?80-$L("Wait List Stat Report")\2,"Wait List Stat Report",!
"RTN","SDWLQSR",53,0)
 Q
"RTN","SDWLRQ1")
0^5^B39567538
"RTN","SDWLRQ1",1,0)
SDWLRQ1 ;;IOFO BAY PINES/TEH - ADHOC WAIT LIST REPORT;06/12/2002 ; 20 Aug 2002  2:10 PM
"RTN","SDWLRQ1",2,0)
 ;;5.3;scheduling;**263,399,412,425,448**;AUG 13 1993
"RTN","SDWLRQ1",3,0)
 ;
"RTN","SDWLRQ1",4,0)
 ;
"RTN","SDWLRQ1",5,0)
 ;******************************************************************
"RTN","SDWLRQ1",6,0)
 ;                             CHANGE LOG
"RTN","SDWLRQ1",7,0)
 ;                                               
"RTN","SDWLRQ1",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLRQ1",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLRQ1",10,0)
 ;   
"RTN","SDWLRQ1",11,0)
 ;   
"RTN","SDWLRQ1",12,0)
 ;   
"RTN","SDWLRQ1",13,0)
 ;   
"RTN","SDWLRQ1",14,0)
EN ;Header
"RTN","SDWLRQ1",15,0)
 N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSAVE,ZTSK
"RTN","SDWLRQ1",16,0)
 D HD
"RTN","SDWLRQ1",17,0)
 S SDWLINST="",SDWLERR=0 K ^TMP("SDWLRQ1",$J),DIC,DIR,DR,DIE
"RTN","SDWLRQ1",18,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLRQ1",19,0)
2 D CAT G 1:SDWLERR,2:$D(DUOUT)
"RTN","SDWLRQ1",20,0)
3 D DATE G 2:SDWLERR,END:$D(DUOUT)
"RTN","SDWLRQ1",21,0)
4 D OPEN G 3:SDWLERR,3:$D(DUOUT)
"RTN","SDWLRQ1",22,0)
5 D FORM G 4:SDWLERR,4:$D(DUOUT)
"RTN","SDWLRQ1",23,0)
6 D DIS G EN:SDWLERR=1,END:SDWLERR=2
"RTN","SDWLRQ1",24,0)
 D QUE
"RTN","SDWLRQ1",25,0)
 Q
"RTN","SDWLRQ1",26,0)
INS ;Get Institution
"RTN","SDWLRQ1",27,0)
 N SDWLINST S SDWLINST=""
"RTN","SDWLRQ1",28,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // "
"RTN","SDWLRQ1",29,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!($D(^SDWL(409.31,""E"",+Y)))!($D(^SCTM(404.51,""AINST"",+Y)))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLRQ1",30,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLRQ1",31,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLRQ1",32,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLRQ1",$J,"INS")="ALL" G IN3
"RTN","SDWLRQ1",33,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLRQ1",34,0)
IN2 S ^TMP("SDWLRQ1",$J,"INS")=SDWLINST
"RTN","SDWLRQ1",35,0)
IN3 Q
"RTN","SDWLRQ1",36,0)
CAT ;Report category selection
"RTN","SDWLRQ1",37,0)
 K DIR,DIE,DR,DIC
"RTN","SDWLRQ1",38,0)
 W !!,"    *** Report Category Selection ***" S SDWLERR=0
"RTN","SDWLRQ1",39,0)
 S SDWLERR=0,SDWLCAT="",DIR(0)="SO^1:Clinic;2:Select Service/Specialty",DIR("L",1)="     1. Clinic",DIR("L")="     2. Service/Specialty"
"RTN","SDWLRQ1",40,0)
 D ^DIR
"RTN","SDWLRQ1",41,0)
 I X="^" S SDWLERR=1 W *7 Q
"RTN","SDWLRQ1",42,0)
 I X="" S SDWLERR=1 W *7 Q
"RTN","SDWLRQ1",43,0)
 S X=$S(X["C":"C",X["c":"C",X["S":"S",X["s":"S",X=1:"C",X=2:"S",1:"")
"RTN","SDWLRQ1",44,0)
 I X="" W *7," Invalid Selection." G CAT
"RTN","SDWLRQ1",45,0)
 W !!,"Select Category for Report Output",!
"RTN","SDWLRQ1",46,0)
 S SDWLX=$S(X="C":"Clinic: ALL// ",X="S":"Service/Specialty: ALL// ")
"RTN","SDWLRQ1",47,0)
 S SDWLF=$S(X["C":409.32,X["S":409.31,X["c":409.32,X["s":409.31)
"RTN","SDWLRQ1",48,0)
 S SDWLFD=$S(X="C":8,1:7)
"RTN","SDWLRQ1",49,0)
 S SDWLCTX=X
"RTN","SDWLRQ1",50,0)
 K DIR,DIC,DR
"RTN","SDWLRQ1",51,0)
 S ^TMP("SDWLRQ1",$J,"CT1")=SDWLCTX_"^"_SDWLF_"^"_SDWLFD,DIC("A")=SDWLX,SDWLE=0
"RTN","SDWLRQ1",52,0)
CT1 W ! S DIC(0)="QEMNZA",DIC=SDWLF D ^DIC I 'SDWLE,Y<1 S ^TMP("SDWLRQ1",$J,"CT2")="ALL" G CT3
"RTN","SDWLRQ1",53,0)
 I Y<0,'$D(^TMP("SDWLRQ1",$J,"CT1")) W !,"This Entry is Required." G CAT
"RTN","SDWLRQ1",54,0)
 G CT2:Y<0
"RTN","SDWLRQ1",55,0)
 S SDWLCAT=SDWLCAT_Y_";",DIC("A")="Another "_$P(SDWLX,":",1)_": ",SDWLE=1 G CT1
"RTN","SDWLRQ1",56,0)
CT2 G CT1:'$D(SDWLCAT) S ^TMP("SDWLRQ1",$J,"CT2")=SDWLCAT
"RTN","SDWLRQ1",57,0)
CT3 Q
"RTN","SDWLRQ1",58,0)
DATE ;Date range selection
"RTN","SDWLRQ1",59,0)
 K X,Y,%DT
"RTN","SDWLRQ1",60,0)
 S %=1 W !!,"Print Report for ALL dates? " D YN^DICN
"RTN","SDWLRQ1",61,0)
 I %=1 S ^TMP("SDWLRQ1",$J,"DATE")="ALL" G E1
"RTN","SDWLRQ1",62,0)
 Q:%=0
"RTN","SDWLRQ1",63,0)
 Q:%=-1
"RTN","SDWLRQ1",64,0)
 S SDWLERR=0 W ! S %DT="AE",%DT("A")="Start with Desired Appointment Date: " D ^%DT
"RTN","SDWLRQ1",65,0)
 I X["^" S SDWLERR=1 Q
"RTN","SDWLRQ1",66,0)
 G E1:Y<0 S SDWLBDT=Y
"RTN","SDWLRQ1",67,0)
 Q:$D(DUOUT)
"RTN","SDWLRQ1",68,0)
 S %DT(0)=SDWLBDT,%DT("A")="End with Desired Appointment Date: " D ^%DT G DATE:Y<1 S SDWLEDT=Y K %DT(0),%DT("A")
"RTN","SDWLRQ1",69,0)
 G DATE:$D(DUOUT)
"RTN","SDWLRQ1",70,0)
 I SDWLEDT<SDWLBDT W !,"Beginning Date must be greater than Ending Date." G DATE
"RTN","SDWLRQ1",71,0)
 S ^TMP("SDWLRQ1",$J,"DATE")=SDWLBDT_"^"_SDWLEDT Q
"RTN","SDWLRQ1",72,0)
E1 Q
"RTN","SDWLRQ1",73,0)
OPEN ;OPEN Wait List Entries  
"RTN","SDWLRQ1",74,0)
 S %=1 W !!,"Do you want only 'OPEN' Wait List Entries " D YN^DICN
"RTN","SDWLRQ1",75,0)
 I %=0 W " Response must be 'YES' or 'NO'." G OPEN
"RTN","SDWLRQ1",76,0)
 I %=-1 S SDWLERR=1 W *7,"?? "
"RTN","SDWLRQ1",77,0)
 S ^TMP("SDWLRQ1",$J,"OPEN")=%
"RTN","SDWLRQ1",78,0)
 Q
"RTN","SDWLRQ1",79,0)
FORM ;Report Format
"RTN","SDWLRQ1",80,0)
 S SDWLERR=0,DIR(0)="SO^1:D:Detailed;S:Summary",DIR("L",2)="     D Detailed"
"RTN","SDWLRQ1",81,0)
 S DIR("L")="     S Summary",DIR("L",1)="Select One of the Following: "
"RTN","SDWLRQ1",82,0)
 D ^DIR
"RTN","SDWLRQ1",83,0)
 S SDWLFORM=$S(X["D":"D",X["d":"D",X["S":"S",X["s":"S",1:"")
"RTN","SDWLRQ1",84,0)
 I X="^" S DUOUT=1 Q
"RTN","SDWLRQ1",85,0)
 I SDWLFORM="" W *7,"Required!" G FORM
"RTN","SDWLRQ1",86,0)
 S ^TMP("SDWLRQ1",$J,"FORM")=SDWLFORM
"RTN","SDWLRQ1",87,0)
 Q
"RTN","SDWLRQ1",88,0)
DIS ;Display Parameters
"RTN","SDWLRQ1",89,0)
 S SDWLERR=0 W !!,?80-$L("*** Selected Report Parameters ***")\2,"*** Selected Report Parameters ***",!
"RTN","SDWLRQ1",90,0)
 F SDWLI="INS","CT1","CT2","DATE","FORM","OPEN" D
"RTN","SDWLRQ1",91,0)
 .S X="SDWL"_SDWLI,@X=$G(^TMP("SDWLRQ1",$J,SDWLI))
"RTN","SDWLRQ1",92,0)
 F SDWLTAG="IS","CT","DA","OP","PR" D @SDWLTAG
"RTN","SDWLRQ1",93,0)
 Q
"RTN","SDWLRQ1",94,0)
IS I SDWLINS'["ALL" D
"RTN","SDWLRQ1",95,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLINS,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ1",96,0)
 .W !,?20,"Institution: "
"RTN","SDWLRQ1",97,0)
 .I $D(SDWLY) S I="" F  S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?33 W SDWLY(I)
"RTN","SDWLRQ1",98,0)
 .K SDWLY
"RTN","SDWLRQ1",99,0)
 I SDWLINS["ALL" W !,?20,"Institution: ALL "
"RTN","SDWLRQ1",100,0)
 Q
"RTN","SDWLRQ1",101,0)
CT I SDWLCT2'["ALL" D
"RTN","SDWLRQ1",102,0)
 .S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLRQ1",103,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLCT2,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ1",104,0)
 .W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 I @X="ALL" W "All "
"RTN","SDWLRQ1",105,0)
 .I $D(SDWLY) S I="" F   S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?35 W $$EXTERNAL^DILFD(SDWLF,.01,,SDWLY(I))
"RTN","SDWLRQ1",106,0)
 I SDWLCT2["ALL" W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 W "ALL "
"RTN","SDWLRQ1",107,0)
 Q
"RTN","SDWLRQ1",108,0)
DA W !,?13,"Date Desired Range: " S Y=$P(SDWLDATE,U,1) D DD^%DT S SDWLBD=Y S Y=$P(SDWLDATE,U,2) D DD^%DT S SDWLED=Y
"RTN","SDWLRQ1",109,0)
 W " ",SDWLBD
"RTN","SDWLRQ1",110,0)
 I SDWLED'="" W " to ",SDWLED
"RTN","SDWLRQ1",111,0)
 Q
"RTN","SDWLRQ1",112,0)
OP W !,?18,"Output Format: ",$S(SDWLFORM="D":" Detailed",1:" Summary")
"RTN","SDWLRQ1",113,0)
 Q
"RTN","SDWLRQ1",114,0)
PR I SDWLOPEN=1 W !,?25,"Printing 'OPEN' Entries Only."
"RTN","SDWLRQ1",115,0)
 E  W !,?25,"Printing ALL Entries."
"RTN","SDWLRQ1",116,0)
 S %=1 W !!,"Are these Parameters Correct " D YN^DICN I %=2 S SDWLERR=1 W !,"  This Report will NOT be queued to print."
"RTN","SDWLRQ1",117,0)
 I SDWLERR S DIR(0)="E" D ^DIR I X["^" S SDWLERR=2
"RTN","SDWLRQ1",118,0)
 Q
"RTN","SDWLRQ1",119,0)
QUE ;Queue Report
"RTN","SDWLRQ1",120,0)
 N ZTQUEUED,POP
"RTN","SDWLRQ1",121,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLRQ1",122,0)
 S ZTRTN=$S(SDWLFORM="D":"EN^SDWLRPT1",1:"EN^SDWLRPS1"),ZTDTH=$H,ZTDESC="WAIT LIST REPORT FORMAT 1"
"RTN","SDWLRQ1",123,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLRQ1",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLRQ1",124,0)
 .S SDWLTK=$G(^TMP("SDWLRQ1",$J,SDWLTASK))
"RTN","SDWLRQ1",125,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLRQ1",126,0)
 S ZTSAVE("SDWLF")=""  ; SD*5.3*412
"RTN","SDWLRQ1",127,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G END
"RTN","SDWLRQ1",128,0)
QUE1 S:$E(IOST,1,2)="C-" SDWLSPT=1 I $D(ZTRTN) U IO D @ZTRTN K SDWLSPT
"RTN","SDWLRQ1",129,0)
 ;
"RTN","SDWLRQ1",130,0)
END ;
"RTN","SDWLRQ1",131,0)
 K SDWLTASK,SDWLY,SDWLED,WDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI,I
"RTN","SDWLRQ1",132,0)
 K DIR,DIC,DR,DIE,SDWLERR,SDWLF,SDWLX,SDLFD,SDWLCTX,SDWLDAT,SDWLPROM,SDWLINST,SDWLI,SDWLTAG,SDWLY
"RTN","SDWLRQ1",133,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLRQ1",134,0)
 Q
"RTN","SDWLRQ1",135,0)
HD W:$D(IOF) @IOF W !,?80-$L("Appointment Wait List Report")\2,"Appointment Wait List Report"
"RTN","SDWLRQ1",136,0)
 Q
"VER")
8.0^22.0
"BLD",6277,6)
^SEQ #357
**END**
**END**

$TXT Created by UNDERHILL,GARDNER III at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Thursday, 06/01/06 at 16:33
=============================================================================
Run Date: JUL 25, 2006                     Designation: LR*5.2*361
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #273                    Status: Released
                  Compliance Date: AUG 25, 2006
=============================================================================

Associated patches: (v)LR*5.2*357  <<= must be installed BEFORE `LR*5.2*361'

Subject: ADDING NEW LAB TEST WITH DOUBLE QUOTES

Category: 
  - Routine

Description:
============

 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*361 contains 
 changes to a package referenced in VHA OI SEPG SOP 192-023 Review of 
 VISTA Patches for Effects on VISTA Blood Bank Software. This patch does 
 not alter or modify any VistA Blood Bank software design safeguards or 
 safety critical elements functions.
  
 RISK ANALYSIS: Changes made by patch LR*5.2*361 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
  
 When a user adds a new lab test with its name in double quotes at the 
 LABORATORY TEST NAME prompt, the system encounters the following 
 error: <UNDEFINED>E^DICM.
  
  
 ASSOCIATED REMEDY TICKET(S):
 ============================
 HD142394 - UNDEFINED>E^DICM after using the "Add a new data name"
  
  
 PARTICIPATING TEST SITES:
 =========================
 Puget Sound HCS
 Durham VAMC
 West LA VAMC
 Salisbury VAMC
  
  
 Problem: HD142394
 ========
 The routine LR7OV0 is called by a cross reference trigger in the Data 
 Dictionary for several fields in the LABORATORY TEST file (file # 60).  In
 this routine, an HL7 message is created to update the ORDERABLE ITEMS file
 (file # 101.43) when a new lab test is added, or an existing lab test is
 edited.  When a user adds a new lab test with its name in double quotes
 (example: "MY NEW TEST"), LR7OV0 creates the HL7 message and calls
 MSG^XQOR.  MSG^XQOR in turn makes another classic VA FileMan call.  This
 is another classic VA FileMan call made within a classic VA FileMan call.
 The classic VA FileMan calls are not designed to be recursively called.
  
 Solution:
 =========
 Modify routine LR7OV0 to task the call to create the HL7 message. Handing 
 the call off to TASKMAN creates an isolated workspace where the classic VA
 FileMan call is not made recursively.
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 This patch can be loaded with users in the system, but it should be
 installed during non-peak hours.  Installation time will be less than
 two minutes.
  
  1.  Choose the PackMan message containing this patch and invoke the
      INTALL/CHECK MESSAGE Packman option.
  
  2.  Start up the Kernel Installation and Distribution System Menu [XPD
      MAIN]:
  
             Edits and Distribution ...
             Utilities ...
             Installation ...
  
      Select Kernel Installation & Distribution System Option:
      Installation
  
             1      Load a Distribution
             2      Verify Checksums in Transport Global
             3      Print Transport Global
             4      Compare Transport Global to Current System
             5      Backup a Transport Global
             6      Install Package(s)
                    Restart Install of Package(s)
                    Unload a Distribution
  
  3.  From this menu, it is highly recommended that you use the following
      options (When prompted for the INSTALL NAME, enter LR*5.2*361):
  
      a.  Verify Checksums in Transport Global - This option will verify 
          the checksums of routines included in this patch.
      b.  Print Transport Global - This option will print out a list of all
          the components exported in this patch.
      c.  Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this patch 
          is installed.  It compares all components of this patch
          (routines, DD's, templates, etc.).
      d.  Backup a Transport Global - This option will back up the current
          versions of the routines in this patch before it is installed.
  
  4.  Use the Install Package(s) option and select the package LR*5.2*361.
  
      a.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
          YES//", answer NO.
      b.  When prompted "Want to DISABLE Scheduled Options and Menu Options
          and Protocols? YES//", answer NO.
  
  
 ROUTINE SUMMARY:
 ================
 The following is a list of routine(s) included in this patch.  The second 
 line of each routine will look like:
  
      <tab>;;5.2;LAB SERVICES;**<patchlist>**;Sep 27, 1994
  
  
                            CHECK^XTSUMBLD
  
                       Checksum       Checksum
      Routine Name     Before Patch   After Patch    Patch List
      ------------     ------------   ------------   -----------
      LR7OV0           10440068       10842124       121,187,357,361

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LR7OV0
    Before: B23457676  After: B28253396  **121,187,357,361**

=============================================================================
User Information:
Entered By  : UNDERHILL,GARDNER D           Date Entered  : JUN 01, 2006
Completed By: WERNER,GARY                   Date Completed: JUL 17, 2006
Released By : BELSCHWINDER,MICHAEL          Date Released : JUL 25, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by YORTY,M. ROBERT at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 09/15/03 at 09:28
=============================================================================
Run Date: OCT 15, 2003                     Designation: DG*5.3*539
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #475                    Status: Released
                  Compliance Date: NOV 15, 2003
=============================================================================


Subject: Cancel Clinic Availability

Category: 
  - Routine

Description:
============

 This patch adds force queuing of reports to the print utility routine
  DGUTQ.
   
   
  This patch addresses the following NOIS message(s):
  ---------------------------------------------------
  CMO-0600-41899   CANCEL CLINIC AVAILABILITY GIVES END OF FILE ERROR
   
   
  Overview of NOIS message(s):
  ----------------------------
  CMO-0600-41899   CANCEL CLINIC AVAILABILITY GIVES END OF FILE ERROR  
  Problem:  When canceling a clinic, if you choose to print your list to a 
  printer without queuing, there exists a high chance of receiving an 
  ENDOFILE error message.  This error occurs because, while you have 
  assigned a print device, the code must execute all the protocols listed 
  in the SDAM APPOINTMENT EVENTS protocol driver.  Since some of these
  protocol items are interactive, if the variable ZTQUEUED is not defined
  through queuing, the protocol routines may execute READ statements and
  thus assume the print job is going to a CRT. When a non-queued print job
  sent to a printer encounters a READ statement, an ENDOFILE error will
  occur.
   
  Resolution:  If a printer is chosen, code is added to force queue your
  print selection.  This will define the variable ZTQUEUED.
   
   
  Test Sites:
  -----------
  Bay Pines
  Salisbury
   
   
  =======================INSTALLATION INSTRUCTIONS=========================
   
  Install this patch after normal working hours when Patient Management 
  activity is at a minimum.
   
  Install Time - 1 minute.
   
  Please ensure that your programming variables are set, 
  including your DUZ(0)="@", otherwise installation will abort.
   
   
  1.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only) 
       -----------------------
       Disable routine mapping on all systems for the routines listed in 
       step 3 below.  
        
       NOTE:  If the routines included in this patch are not currently in 
       your mapped routine set, please skip this step.
   
  2.   LOAD TRANSPORT GLOBAL 
       ---------------------
       Choose the PackMan message containing this patch and invoke the 
       INSTALL/CHECK MESSAGE PackMan option.  
   
  3.   COMPONENTS SENT WITH PATCH 
       --------------------------
       The following is a list of the routines included in this patch.  
       The second line of each of these routines now looks like:  
   
       <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
   
                              CHECK^XTSUMBLD results
   Routine name      Before Patch          After Patch         Patch List
   ============      ============          ===========         ==========
   DGUTQ                  4355162              4286117                539
   
    Total number of routines - 1
   
  4.   START UP KIDS 
       -------------
       Start up the Kernel Installation and Distribution System Menu 
       [XPD MAIN]: 
     
            Edits and Distribution ...  
            Utilities ...  
            Installation ...  
     
  Select Kernel Installation & Distribution System Option: INStallation 
                                                           ---
            Load a Distribution 
            Print Transport Global 
            Compare Transport Global to Current System 
            Verify Checksums in Transport Global 
            Install Package(s) 
            Restart Install of Package(s) 
            Unload a Distribution 
            Backup a Transport Global 
     
  Select Installation Option: 
   
  5.   Select Installation Option: 
       ---------------------------
       NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
              NAME, enter DG*5.3*539):
        
       a.  Backup a Transport Global - This option will create a backup
           message of any routines exported with this patch. It will not
           backup any other changes such as DD's or templates.
       b.  Compare Transport Global to Current System - This option will
           allow you to view all changes that will be made when this patch
           is installed.  It compares all components of this patch
           (routines, DD's, templates, etc.).
       c.  Verify Checksums in Transport Global - This option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
       
  6.  Select Installation Option: Install Package(s)
                                  ------------------
      a. Choose the Install Package(s) option to start the patch install.
   
      b. When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of 
         Install? YES//", answer 'NO'.
   
      c. When prompted "Want KIDS to INHIBIT LOGONs during the install? 
         YES//", answer 'NO'.
   
      d. When prompted "Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols? YES//", answer 'NO'.
   
   
  7.  REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
      ==========================
      NOTE: This step is only necessary if you performed step 1 or if you 
      wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - DGUTQ

 - DGUTQ
  
  ***********************
    1)   DGUTQ     ;ALB/AAS - QUEUEING UTILITY (%ZTLOAD) ; 16-JUL-2003
    2)             ;;5.3;Registration;**539**;Aug 13, 1993
    3)             ;
   
  --------
    1)   DGUTQ     ;ALB/AAS - QUEUEING UTILITY (%ZTLOAD) ; 26-JUN-89
    2)             ;;5.3;Registration;;Aug 13, 1993
    3)             ;
   
  ***************
   
  ***********************
    12)  ZIS       W ! K IOP,IO("Q") S POP=0,%ZIS="QMP" S:$D(DGFZIS) 
 IOP="Q"
    13)            D ^%ZIS K %ZIS,IOP Q:POP  I $D(IO("Q")) D QUE S POP=1 G 
  CLOSE
    14)            U IO Q
   
  --------
    12)  ZIS       W ! K IOP,IO("Q") S POP=0,%ZIS="QMP" D ^%ZIS K %ZIS,IOP 
  Q:POP  
  I $D(IO("Q")) D QUE S POP=1 G CLOSE
    13)            U IO Q
   
  ***************
   
  ***********************
    27)  FZIS      ;Settings for force queuing
    28)            N DGFZIS
    29)            S DGFZIS=1 G ZIS
    30)            
   
  --------
    26)            
   
  ***************
   
   
  A total of 3 differences found.

Routine Checksum:

=============================================================================
User Information:
Entered By  : YORTY,M ROBERT                Date Entered  : 
Completed By: RUDINGER,NANCY L.             Date Completed: OCT 09, 2003
Released By : ALEXANDER,DIANNE              Date Released : OCT 15, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

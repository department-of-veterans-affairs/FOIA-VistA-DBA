Released EAS*1*64 SEQ #58
Extracted from mail message
**KIDS**:EAS*1.0*64^

**INSTALL NAME**
EAS*1.0*64
"BLD",5733,0)
EAS*1.0*64^ENROLLMENT APPLICATION SYSTEM^0^3050929^y
"BLD",5733,1,0)
^^1^1^3050622^
"BLD",5733,1,1,0)
FIX EAS MT APPT EXPIRATION RPT
"BLD",5733,4,0)
^9.64PA^^
"BLD",5733,6)
1^
"BLD",5733,"ABPKG")
n
"BLD",5733,"KRN",0)
^9.67PA^8989.52^19
"BLD",5733,"KRN",.4,0)
.4
"BLD",5733,"KRN",.401,0)
.401
"BLD",5733,"KRN",.402,0)
.402
"BLD",5733,"KRN",.403,0)
.403
"BLD",5733,"KRN",.5,0)
.5
"BLD",5733,"KRN",.84,0)
.84
"BLD",5733,"KRN",3.6,0)
3.6
"BLD",5733,"KRN",3.8,0)
3.8
"BLD",5733,"KRN",9.2,0)
9.2
"BLD",5733,"KRN",9.8,0)
9.8
"BLD",5733,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5733,"KRN",9.8,"NM",1,0)
EASMTRP3^^0^B18497499
"BLD",5733,"KRN",9.8,"NM","B","EASMTRP3",1)
 
"BLD",5733,"KRN",19,0)
19
"BLD",5733,"KRN",19.1,0)
19.1
"BLD",5733,"KRN",101,0)
101
"BLD",5733,"KRN",409.61,0)
409.61
"BLD",5733,"KRN",771,0)
771
"BLD",5733,"KRN",870,0)
870
"BLD",5733,"KRN",8989.51,0)
8989.51
"BLD",5733,"KRN",8989.52,0)
8989.52
"BLD",5733,"KRN",8994,0)
8994
"BLD",5733,"KRN","B",.4,.4)
 
"BLD",5733,"KRN","B",.401,.401)
 
"BLD",5733,"KRN","B",.402,.402)
 
"BLD",5733,"KRN","B",.403,.403)
 
"BLD",5733,"KRN","B",.5,.5)
 
"BLD",5733,"KRN","B",.84,.84)
 
"BLD",5733,"KRN","B",3.6,3.6)
 
"BLD",5733,"KRN","B",3.8,3.8)
 
"BLD",5733,"KRN","B",9.2,9.2)
 
"BLD",5733,"KRN","B",9.8,9.8)
 
"BLD",5733,"KRN","B",19,19)
 
"BLD",5733,"KRN","B",19.1,19.1)
 
"BLD",5733,"KRN","B",101,101)
 
"BLD",5733,"KRN","B",409.61,409.61)
 
"BLD",5733,"KRN","B",771,771)
 
"BLD",5733,"KRN","B",870,870)
 
"BLD",5733,"KRN","B",8989.51,8989.51)
 
"BLD",5733,"KRN","B",8989.52,8989.52)
 
"BLD",5733,"KRN","B",8994,8994)
 
"BLD",5733,"QUES",0)
^9.62^^
"BLD",5733,"REQB",0)
^9.611^1^1
"BLD",5733,"REQB",1,0)
EAS*1.0*46^2
"BLD",5733,"REQB","B","EAS*1.0*46",1)
 
"MBREQ")
0
"PKG",552,-1)
1^1
"PKG",552,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",552,20,0)
^9.402P^1^1
"PKG",552,20,1,0)
2^^EASXDR
"PKG",552,20,1,1)
 
"PKG",552,20,"B",2,1)
 
"PKG",552,22,0)
^9.49I^1^1
"PKG",552,22,1,0)
1.0^3010315^3010410^66481
"PKG",552,22,1,"PAH",1,0)
64^3050929^539
"PKG",552,22,1,"PAH",1,1,0)
^^1^1^3050929
"PKG",552,22,1,"PAH",1,1,1,0)
FIX EAS MT APPT EXPIRATION RPT
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")
 
"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","EASMTRP3")
0^1^B18497499
"RTN","EASMTRP3",1,0)
EASMTRP3 ; ALB/SCK - MEANS TEST ANV DATES BY APPT DATE ; 6/21/05 3:01pm
"RTN","EASMTRP3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**3,15,46,64**;MAR 15,2001
"RTN","EASMTRP3",3,0)
 ;
"RTN","EASMTRP3",4,0)
QUE ;  Que off the appointment list search by MT anniversary date
"RTN","EASMTRP3",5,0)
 N EASDT,ZTSAVE
"RTN","EASMTRP3",6,0)
 ;
"RTN","EASMTRP3",7,0)
 S DIR(0)="DAO^DT::EX"
"RTN","EASMTRP3",8,0)
 S DIR("B")="TODAY",DIR("A")="Run report for date: ",DIR("?")="^D HELP^%DTC"
"RTN","EASMTRP3",9,0)
 D ^DIR K DIR
"RTN","EASMTRP3",10,0)
 Q:$D(DIRUT)
"RTN","EASMTRP3",11,0)
 S EASDT=Y
"RTN","EASMTRP3",12,0)
 ;
"RTN","EASMTRP3",13,0)
 S ZTSAVE("EASDT")=""
"RTN","EASMTRP3",14,0)
 D EN^XUTMDEVQ("EN^EASMTRP3","EAS MT DUE BY APPOINTMENT RPT",.ZTSAVE)
"RTN","EASMTRP3",15,0)
 Q
"RTN","EASMTRP3",16,0)
 ;
"RTN","EASMTRP3",17,0)
EN ;  Main entry point for appointment list by MT anniversary date
"RTN","EASMTRP3",18,0)
 N EASSC,PAGE,ACNT,RCNT,DGARRAY,I,CLARR,SDCNT,DGADDF,DGMSGF,DGREQF
"RTN","EASMTRP3",19,0)
 K ^TMP("EASAP",$J)
"RTN","EASMTRP3",20,0)
 S PAGE=1,^TMP("EASAP",$J,"APDT")=EASDT
"RTN","EASMTRP3",21,0)
 ;
"RTN","EASMTRP3",22,0)
 ; Build Array of Valid Clinic IENs
"RTN","EASMTRP3",23,0)
 S ACNT=1,(RCNT,EASSC)=0 F  S EASSC=$O(^SC(EASSC)) Q:'EASSC  D
"RTN","EASMTRP3",24,0)
 .Q:'$D(^SC(EASSC,0))
"RTN","EASMTRP3",25,0)
 .Q:$P(^SC(EASSC,0),U,3)'="C"
"RTN","EASMTRP3",26,0)
 .S RCNT=RCNT+1,CLARR(ACNT)=$G(CLARR(ACNT))_EASSC_";"
"RTN","EASMTRP3",27,0)
 .; Group Clinic IENs by no more than thirty
"RTN","EASMTRP3",28,0)
 .I RCNT>29 S ACNT=ACNT+1,RCNT=0
"RTN","EASMTRP3",29,0)
 ;
"RTN","EASMTRP3",30,0)
 ; Call SD API by array of Clinic IENs
"RTN","EASMTRP3",31,0)
 S DGARRAY(1)=EASDT_";"_EASDT,DGARRAY("FLDS")="1;3"
"RTN","EASMTRP3",32,0)
 F I=1:1 Q:'$D(CLARR(I))  D
"RTN","EASMTRP3",33,0)
 .S DGARRAY(2)=CLARR(I)
"RTN","EASMTRP3",34,0)
 .S SDCNT=$$SDAPI^SDAMA301(.DGARRAY)
"RTN","EASMTRP3",35,0)
 .M ^TMP($J,"SDAMA")=^TMP($J,"SDAMA301")
"RTN","EASMTRP3",36,0)
 .K ^TMP($J,"SDAMA301")
"RTN","EASMTRP3",37,0)
 D LOOP,PRINT
"RTN","EASMTRP3",38,0)
 K DGARRAY,CLARR,I,^TMP($J,"SDAMA")
"RTN","EASMTRP3",39,0)
 Q
"RTN","EASMTRP3",40,0)
 ;
"RTN","EASMTRP3",41,0)
LOOP ; Loop through a clinic's appointment list
"RTN","EASMTRP3",42,0)
 N DFN,EASANV,EASAPT
"RTN","EASMTRP3",43,0)
 ;
"RTN","EASMTRP3",44,0)
 S EASSC=0 F  S EASSC=$O(^TMP($J,"SDAMA",EASSC)) Q:'EASSC  D
"RTN","EASMTRP3",45,0)
 .S DFN=0 F  S DFN=$O(^TMP($J,"SDAMA",EASSC,DFN)) Q:'DFN  D
"RTN","EASMTRP3",46,0)
 ..S EASAPT=0 F  S EASAPT=$O(^TMP($J,"SDAMA",EASSC,DFN,EASAPT)) Q:'EASAPT  D
"RTN","EASMTRP3",47,0)
 ...; Quit if appointment has been cancelled
"RTN","EASMTRP3",48,0)
 ...Q:$P($P(^TMP($J,"SDAMA",EASSC,DFN,EASAPT),U,3),";")["C"
"RTN","EASMTRP3",49,0)
 ...S LASTMT=$$LST^DGMTU(DFN)  ; Get patient's last Means test
"RTN","EASMTRP3",50,0)
 ...; Quit if means test is no longer required or pending
"RTN","EASMTRP3",51,0)
 ...Q:"^N^P^"[(U_$P(LASTMT,U,4)_U)
"RTN","EASMTRP3",52,0)
 ...; Quit if means test is not required by DGMTR (EAS*1.0*64)
"RTN","EASMTRP3",53,0)
 ...I $P(LASTMT,U,4)'="R" S (DGADDF,DGMSGF)=1 D EN^DGMTR I '$G(DGREQF) Q
"RTN","EASMTRP3",54,0)
 ...; Quit if Cat C, agreed to pay deduct. and MT was after 10/5/1999
"RTN","EASMTRP3",55,0)
 ...I $P(LASTMT,U,4)="C",$$GET1^DIQ(408.31,+LASTMT,.11,"I"),$P(LASTMT,U,2)>2991005 Q
"RTN","EASMTRP3",56,0)
 ...; Quit if a Future Dated MT is on file
"RTN","EASMTRP3",57,0)
 ...Q:$$FUT^DGMTU(DFN)
"RTN","EASMTRP3",58,0)
 ...; If appt dt is later than anniversary dt, add veteran to list.
"RTN","EASMTRP3",59,0)
 ...S EASANV=$P(LASTMT,U,2)
"RTN","EASMTRP3",60,0)
 ...S:$P(LASTMT,U,4)'="R" EASANV=$$FMADD^XLFDT(EASANV,365)
"RTN","EASMTRP3",61,0)
 ...I EASDT'<EASANV S ^TMP("EASAP",$J,"CLN",EASSC,DFN,EASAPT)=""
"RTN","EASMTRP3",62,0)
 Q
"RTN","EASMTRP3",63,0)
 ;
"RTN","EASMTRP3",64,0)
PRINT ;  Print Report
"RTN","EASMTRP3",65,0)
 N EACLN,DFN,LASTMT,VA,ANVDT,PAGE,EASABRT,APDT,XX
"RTN","EASMTRP3",66,0)
 ;
"RTN","EASMTRP3",67,0)
 I '$D(^TMP("EASAP",$J,"CLN")) D  Q
"RTN","EASMTRP3",68,0)
 . S PAGE=1 S XX=$$HDR("")
"RTN","EASMTRP3",69,0)
 . W !!?3,"No MT Anniversary dates found for this appointment date."
"RTN","EASMTRP3",70,0)
 ;
"RTN","EASMTRP3",71,0)
 W !
"RTN","EASMTRP3",72,0)
 S EACLN=0
"RTN","EASMTRP3",73,0)
 F  S EACLN=$O(^TMP("EASAP",$J,"CLN",EACLN)) Q:'EACLN  D  Q:$G(EASABRT)
"RTN","EASMTRP3",74,0)
 . S PAGE=1 S EASABRT=$$HDR(EACLN) Q:$G(EASABRT)
"RTN","EASMTRP3",75,0)
 . S DFN=0
"RTN","EASMTRP3",76,0)
 . F  S DFN=$O(^TMP("EASAP",$J,"CLN",EACLN,DFN)) Q:'DFN  D  Q:$G(EASABRT)
"RTN","EASMTRP3",77,0)
 . . S LASTMT=$$LST^DGMTU(DFN),ANVDT=$P(LASTMT,U,2)
"RTN","EASMTRP3",78,0)
 . . I $P(LASTMT,U,4)'="R",ANVDT>0 S ANVDT=$$FMADD^XLFDT(ANVDT,365)
"RTN","EASMTRP3",79,0)
 . . W !?3,$$GET1^DIQ(2,DFN,.01)
"RTN","EASMTRP3",80,0)
 . . D PID^VADPT6
"RTN","EASMTRP3",81,0)
 . . W ?30,VA("BID") K VA
"RTN","EASMTRP3",82,0)
 . . W ?38,$S(ANVDT>0:$$FMTE^XLFDT(ANVDT),1:"")
"RTN","EASMTRP3",83,0)
 . . S APDT=0
"RTN","EASMTRP3",84,0)
 . . F  S APDT=$O(^TMP("EASAP",$J,"CLN",EACLN,DFN,APDT)) Q:'APDT  D  Q:$G(EASABRT)
"RTN","EASMTRP3",85,0)
 . . . W ?55,$$FMTE^XLFDT(APDT,"2P"),!
"RTN","EASMTRP3",86,0)
 . . . I ($Y+5)>IOSL S EASABRT=$$HDR(EACLN)
"RTN","EASMTRP3",87,0)
 ;
"RTN","EASMTRP3",88,0)
 Q
"RTN","EASMTRP3",89,0)
 ;
"RTN","EASMTRP3",90,0)
HDR(EASCLN) ; Report Header
"RTN","EASMTRP3",91,0)
 N TAB,LINE,CLINIC,RSLT
"RTN","EASMTRP3",92,0)
 ;
"RTN","EASMTRP3",93,0)
 S RSLT=0
"RTN","EASMTRP3",94,0)
 I $E(IOST,1,2)="C-" D  I RSLT Q RSLT
"RTN","EASMTRP3",95,0)
 . S DIR(0)="E"
"RTN","EASMTRP3",96,0)
 . D ^DIR K DIR
"RTN","EASMTRP3",97,0)
 . I 'Y S RSLT=1
"RTN","EASMTRP3",98,0)
 ;
"RTN","EASMTRP3",99,0)
 W @IOF
"RTN","EASMTRP3",100,0)
 S CLINIC=$S(EASCLN>0:$$GET1^DIQ(44,EASCLN,.01),1:"")
"RTN","EASMTRP3",101,0)
 W "Means Test Expiration Report by Appt Date "_$S(CLINIC]"":"for "_CLINIC,1:"")
"RTN","EASMTRP3",102,0)
 W !!,"For Appointment Date: ",$$FMTE^XLFDT(^TMP("EASAP",$J,"APDT"))
"RTN","EASMTRP3",103,0)
 W !,"Print Date: ",$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","EASMTRP3",104,0)
 S TAB=IOM-10
"RTN","EASMTRP3",105,0)
 W ?TAB,"Page "_PAGE
"RTN","EASMTRP3",106,0)
 S PAGE=PAGE+1
"RTN","EASMTRP3",107,0)
 ;
"RTN","EASMTRP3",108,0)
 W !!?30,"Last",?38,"Anniversary",?55,"Appointment"
"RTN","EASMTRP3",109,0)
 W !?3,"Name",?30,"Four",?38,"Date",?55,"Time"
"RTN","EASMTRP3",110,0)
 S $P(LINE,"=",IOM)="" W !,LINE,!
"RTN","EASMTRP3",111,0)
 ;
"RTN","EASMTRP3",112,0)
 Q 0
"RTN","EASMTRP3",113,0)
 ;
"RTN","EASMTRP3",114,0)
PAUSE ;
"RTN","EASMTRP3",115,0)
 Q
"VER")
8.0^22.0
"BLD",5733,6)
^SEQ #58
**END**
**END**

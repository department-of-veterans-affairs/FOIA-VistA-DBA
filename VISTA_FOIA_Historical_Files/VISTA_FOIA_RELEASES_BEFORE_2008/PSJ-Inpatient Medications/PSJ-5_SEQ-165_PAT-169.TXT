$TXT Created by CASTLE,JOHN at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Wednesday, 05/24/06 at 13:30
=============================================================================
Run Date: APR 09, 2007                     Designation: PSJ*5*169
Package : PSJ - INPATIENT MEDICATIONS         Priority: Mandatory
Version : 5       SEQ #165                      Status: Released
                  Compliance Date: MAY 10, 2007
=============================================================================

Associated patches: (v)PSJ*5*58    <<= must be installed BEFORE `PSJ*5*169'
                    (v)PSJ*5*85    <<= must be installed BEFORE `PSJ*5*169'
                    (v)PSJ*5*149   <<= must be installed BEFORE `PSJ*5*169'

Subject: ACTION PROFILE REPORT UPDATES AND PATIENT PROFILE FIX

Category: 
  - Routine

Description:
============

  
 This patch will correct three problems with the Action Profile
 reports from three Remedy tickets, HD118347, HD120274, and HD68707.
 It also addresses one undefined variable error with the 
 Patient Profile [PSJU PR], in ticket HD120176.
  
 The first Action Profile Report problem was a result of internal
 testing with patch PSJ*5.0*157, wherein it was noted that if a
 device used for printing did not have a standard page length, the
 number of lines printed in the Additional Medication Orders section
 of the Action Profile reports [PSJU AP-1] and [PSJU AP-2] would
 vary from patient to patient.  It was decided by the Inpatient
 Medications Workgroup that the number of lines printed for this section
 should be standardized to 10 lines.
  
 The second Action Profile Report problem occurs only with the Action
 Profile 2 report [PSJU AP-2].  The problem only occurs when printed
 to the terminal screen.  The report prints properly when printed to
 a printer.  If the patient has a verified allergy, a verified
 adverse reaction, or one of each, the Allergy and Adverse Reaction
 section of the report is printing "No Allergy Assessment".  This
 patch will correct this problem so the AP-2 report is consistent with
 the AP-1 report, and shows the correct allergy and adverse reaction
 information for the patient.
  
 The third Action Profile Report issue was logged because one-time orders
 are appearing on both the AP-1 and AP-2 reports with the option
 available to the provider to RENEW the orders.  The ability to renew
 one-time orders was removed due to a patient safety issue.  Having the
 renew option available to the provider could lead to a reoccurrence
 of the patient safety issue.
  
 The Undefined Variable Error occurs with the Patient Profile, [PSJU PR].
 When attempting to filter the profile at any WARD prompt, if the user
 presses ENTER or the up-carat (^), instead of being taken to the
 previous filter choices, or the main menu, the user is taken to a
 prompt to filter by Room/Bed or Patient.  If the user again presses
 ENTER or ^, an undefined variable error occurs.
  
  
  
 ASSOCIATED REMEDY TICKETS:
 ==========================
 HD118347     -    Standardize AMO section to 10 lines.
  
 HD120274     -    AP-2 Report is Missing Allergy/ADR Assessment
  
 HD68707      -    Provider can renew one-time orders on AP reports
  
 HD120176     -    Undefined variable error in Patient Profile
  
  
 ASSOCIATED NSR:
 ===============
 N/A
  
  
 PARTICIPATING TEST SITES:
 =========================
 BRONX, NY
 PUGET SOUND HCS
 RENO, NV  
  
 
 REMEDY OVERVIEW:
 ================
 HD118347 - Standardize AMO section
  
 Problem
 -------
 The Additional Medication Orders section on the Action Profile reports
 prints a varying number of lines for the provider to write in.
  
 Resolution
 ----------
 Standardize the number of lines available on the reports to 10 lines.
  
  
 HD120274 - AP-2 Report is Missing Allergy/ADR Assessment
  
 Problem
 -------
 The Action Profile 2 report is not printing verified allergies and/or
 adverse reactions on patients.  It is printing "No Allergy Assessment"
 if the report is printed to the screen.
  
  
 Resolution
 ----------
 Make the AP-2 report consistent with the way the AP-1 report determines
 the allergy and ADR information so the AP-2 report properly prints
 this information.
  
 HD68707 - Provider can renew one-time orders on AP reports
  
 Problem
 -------
 The provider is presented R or RENEW as an action to take on the
 Action Profile 1 and 2 reports.
  
 Resolution
 ----------
 If this is a one-time order, do not print R or RENEW for the provider.
  
  
 HD120176 - Undefined variable error in Patient Profile
  
 Problem
 -------
 If the user hits ENTER or ^ at the WARD prompt, the user is taken to a
 room/bed or patient prompt, and subsequently if they hit ENTER or ^
 an undefined variable error occurs.
  
 Resolution
 ----------
 Fix the patient profile so that if the user hits ENTER or ^, they are
 taken to the previous options or main menu, and the error does not happen.
  
  
 TECHNICAL DESCRIPTION:
 ======================
 HD118347
  
 Re-code portions of PSGAPP and PSGCAPP so that instead of printing the
 AMO section based on the page length, standardize it to 10 lines.  The
 updated code resides in the END and NP1 line tags.  The new local variables
 are killed in the DONE line tags.
  
  
 HD120274
  
 In H1^PSGCAPP0, change the algorithm used to determine whether or not to
 print Allergy/ADR information to match the algorithm used by the
 AP-1 report in the routine PSJHEAD.
  
  
 HD68707
  
 Add $S statements to the report printing routines PSGAPIV, PSGAPP,
 PSGCAPIV,PSGCAPP so that if the order is a one-time order, the 
 R or RENEW is not printed as an available option for the provider.
  
  
 HD120176
  
 In PSGPR, when the option to filter by WARD is selected, if no ward is
 selected, (no ward returned from PSJPDIR), the variable PSGPRWD is
 not defined.  The real problem is that the condition PSJSTOP is not
 checked before continuing with other prompts to the user.  In PSGPR,
 add a conditional quit, Q:$G(PSJSTOP)=1 before the user is prompted to
 sort by Room/Bed.  Also ensure PSJSTOP is re-set to null.
  
  
 INSTALL INSTRUCTIONS:
 =====================
  
   ************************ NOTE ************************
   IF A USER IS ON THE SYSTEM AND USING THESE PROGRAMS 
   AN EDITED ERROR WILL OCCUR.  
   The patch should be installed when NO Inpatient Pharmacy 
   users are on the system.
   ******************************************************
  
   Installation will take less than 1 minute.
   
   Suggested time to install: non-peak requirement hours.
 
   
   1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
     
   2. From the Kernel Installation & Distribution System menu, select
      the Installation menu.
   
   3. From this menu, you may select to use the following options
      (when prompted for INSTALL NAME, enter PSJ*5.0*169):
          a.  Verify Checksums in Transport Global - This option will allow
              you to ensure the integrity of the routines that are in the
              transport global.
          b.  Print Transport Global - This option will allow you to view
              the components of the KIDS build.
          c.  Compare Transport Global to Current System - This option will
              allow you to view all changes that will be made when this patch
              is installed.  It compares all components of this patch
              (routines, DD's, templates, etc.).
          d.  Backup a Transport Global - This option will create a backup
              message of any routines exported with this patch. It will not
              backup any other changes such as DD's or templates.
    
   4. Use the Install Package(s) option and select the package PSJ*5.0*169.
    
   5. When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//"
      respond NO.
    
   6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//" respond NO. 
   
  
 INSTALL EXAMPLE:
 ================
  
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME: PSJ*5.0*169     Loaded from Distribution  3/31/06@12:34:58
      => PSJ*5*169
  
 This Distribution was loaded on Mar 31, 2006@12:34:58 with header of PSJ*5*169
    It consisted of the following Install(s):  PSJ*5.0*169
 Checking Install for Package PSJ*5.0*169
  
 Install Questions for PSJ*5.0*169
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   TCP
  
  
                PSJ*5.0*169                                   
 Install Started for PSJ*5.0*169 : 
                Mar 31, 2006@12:36:53
  
 Build Distribution Date: Mar 31, 2006
  
  Installing Routines: Mar 31, 2006@12:36:53
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSJ*5.0*169 Installed.  Mar 31, 2006@12:36:53
  
  Install Message sent #444527
 --------------------------------------------------------------------------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
   
 Install Completed
  
 ROUTINE SUMMARY:
 ================
  
 The following is a list of the routines included in this patch.
 The second line of each of the routines now looks like this:
  
           ;;5.0; INPATIENT MEDICATIONS ;**[PATCH LIST]**;16 DEC 97
  
                        CHECK^XTSUMBLD results   
  
 Routine Name  Before Patch  After Patch                         Patch List
 ============  ============  ===========    ===============================
 PSGAPIV            3619465      4054981                         9,58,169
 PSGAPP            16061597     16896018               8,20,60,50,111,169
 PSGCAPIV           4427058      4533157                         9,58,169
 PSGCAPP            9218932     10009225              8,20,60,111,149,169
 PSGCAPP0           7902209      8121916                      8,20,85,169
 PSGPR             19853552     20052519                      110,111,169
  
  
 
 
 
 
 

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSGAPIV
    Before:  B5508192  After:  B6284918  **9,58,169**
Routine Name: PSGAPP
    Before: B25259233  After: B27978328  **8,20,60,50,111,169**
Routine Name: PSGCAPIV
    Before:  B7164579  After:  B7632761  **9,58,169**
Routine Name: PSGCAPP
    Before: B13989426  After: B15658306  **8,20,60,111,149,169**
Routine Name: PSGCAPP0
    Before: B10374131  After: B10698296  **8,20,85,169**
Routine Name: PSGPR
    Before: B40201649  After: B41426367  **110,111,169**

=============================================================================
User Information:
Entered By  : CASTLE,JOHN                   Date Entered  : NOV 15, 2005
Completed By: GOLDSMITH,JAMES H             Date Completed: APR 04, 2007
Released By : CAMPBELL,THOMAS               Date Released : APR 09, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

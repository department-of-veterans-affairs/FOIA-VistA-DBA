Released PRCA*4.5*218 SEQ #195
Extracted from mail message
**KIDS**:PRCA*4.5*218^

**INSTALL NAME**
PRCA*4.5*218
"BLD",4997,0)
PRCA*4.5*218^ACCOUNTS RECEIVABLE^0^3040819^y
"BLD",4997,1,0)
^^1^1^3040622^
"BLD",4997,1,1,0)
HVE III AR PATCH
"BLD",4997,4,0)
^9.64PA^^
"BLD",4997,"KRN",0)
^9.67PA^8989.52^19
"BLD",4997,"KRN",.4,0)
.4
"BLD",4997,"KRN",.401,0)
.401
"BLD",4997,"KRN",.402,0)
.402
"BLD",4997,"KRN",.403,0)
.403
"BLD",4997,"KRN",.5,0)
.5
"BLD",4997,"KRN",.84,0)
.84
"BLD",4997,"KRN",3.6,0)
3.6
"BLD",4997,"KRN",3.8,0)
3.8
"BLD",4997,"KRN",9.2,0)
9.2
"BLD",4997,"KRN",9.8,0)
9.8
"BLD",4997,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4997,"KRN",9.8,"NM",1,0)
PRCAAPR1^^0^B30720068
"BLD",4997,"KRN",9.8,"NM","B","PRCAAPR1",1)

"BLD",4997,"KRN",19,0)
19
"BLD",4997,"KRN",19.1,0)
19.1
"BLD",4997,"KRN",101,0)
101
"BLD",4997,"KRN",409.61,0)
409.61
"BLD",4997,"KRN",771,0)
771
"BLD",4997,"KRN",870,0)
870
"BLD",4997,"KRN",8989.51,0)
8989.51
"BLD",4997,"KRN",8989.52,0)
8989.52
"BLD",4997,"KRN",8994,0)
8994
"BLD",4997,"KRN","B",.4,.4)

"BLD",4997,"KRN","B",.401,.401)

"BLD",4997,"KRN","B",.402,.402)

"BLD",4997,"KRN","B",.403,.403)

"BLD",4997,"KRN","B",.5,.5)

"BLD",4997,"KRN","B",.84,.84)

"BLD",4997,"KRN","B",3.6,3.6)

"BLD",4997,"KRN","B",3.8,3.8)

"BLD",4997,"KRN","B",9.2,9.2)

"BLD",4997,"KRN","B",9.8,9.8)

"BLD",4997,"KRN","B",19,19)

"BLD",4997,"KRN","B",19.1,19.1)

"BLD",4997,"KRN","B",101,101)

"BLD",4997,"KRN","B",409.61,409.61)

"BLD",4997,"KRN","B",771,771)

"BLD",4997,"KRN","B",870,870)

"BLD",4997,"KRN","B",8989.51,8989.51)

"BLD",4997,"KRN","B",8989.52,8989.52)

"BLD",4997,"KRN","B",8994,8994)

"BLD",4997,"QUES",0)
^9.62^^
"BLD",4997,"REQB",0)
^9.611^2^2
"BLD",4997,"REQB",1,0)
DG*5.3*528^2
"BLD",4997,"REQB",2,0)
PRCA*4.5*192^2
"BLD",4997,"REQB","B","DG*5.3*528",1)

"BLD",4997,"REQB","B","PRCA*4.5*192",2)

"MBREQ")
0
"PKG",158,-1)
1^1
"PKG",158,0)
ACCOUNTS RECEIVABLE^PRCA^FMS
"PKG",158,20,0)
^9.402P^1^1
"PKG",158,20,1,0)
2^^PRCAMRG
"PKG",158,20,1,1)

"PKG",158,20,"B",2,1)

"PKG",158,22,0)
^9.49I^1^1
"PKG",158,22,1,0)
4.5^2950320^2960423
"PKG",158,22,1,"PAH",1,0)
218^3040819
"PKG",158,22,1,"PAH",1,1,0)
^^1^1^3040819
"PKG",158,22,1,"PAH",1,1,1,0)
HVE III AR PATCH
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRCAAPR1")
0^1^B30720068
"RTN","PRCAAPR1",1,0)
PRCAAPR1 ;WASH-ISC@ALTOONA,PA/RGY-PATIENT ACCOUNT PROFILE ;2/12/97  11:48 AM
"RTN","PRCAAPR1",2,0)
V ;;4.5;Accounts Receivable;**34,45,108,143,141,206,192,218**;Mar 20, 1995
"RTN","PRCAAPR1",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","PRCAAPR1",4,0)
HDR ;Head for Account profile
"RTN","PRCAAPR1",5,0)
 S X="",$P(X,"=",23)="" W @IOF,!,X,"   A c c o u n t   P r o f i l e   ",X
"RTN","PRCAAPR1",6,0)
HDR1 N DMC,IBRX,RSN,TOP4,TOP6,DPTFLG,ACCTNUM,RCCV
"RTN","PRCAAPR1",7,0)
 S IBRX=0,DPTFLG=0
"RTN","PRCAAPR1",8,0)
 ;
"RTN","PRCAAPR1",9,0)
 ;Display new 'Statement Account Number" (Patch 206)
"RTN","PRCAAPR1",10,0)
 I PRCADB["DPT(" S DPTFLG=1,ACCTNUM=$$ACCT(PRCADB)
"RTN","PRCAAPR1",11,0)
 ;
"RTN","PRCAAPR1",12,0)
 W !,$P(DEBT,"^",2) I DPTFLG!(PRCADB["VA(200,") S X=$S(PRCADB["DPT(":$P(^DPT(+PRCADB,0),"^",9),1:$P($G(^VA(200,+PRCADB,1)),"^",9)) W " (",$E(X,1,3),"-",$E(X,4,5),"-",$E(X,6,9),")"
"RTN","PRCAAPR1",13,0)
 W ?53,"Statement Day: ",$S($$PST^RCAMFN01(+DEBT)>0:$$PST^RCAMFN01(+DEBT),1:"N/A")
"RTN","PRCAAPR1",14,0)
 K Y S X("ADD")=$$DADD^RCAMADD(PRCADB)
"RTN","PRCAAPR1",15,0)
 ;
"RTN","PRCAAPR1",16,0)
 ;Display new 'Statement Account Number" (Patch 206)
"RTN","PRCAAPR1",17,0)
 I DPTFLG W !,"Statement Account #: ",ACCTNUM,?52,"Last Statement: "
"RTN","PRCAAPR1",18,0)
 E  W !?52,"Last Statement: "
"RTN","PRCAAPR1",19,0)
 ;
"RTN","PRCAAPR1",20,0)
 S Y=+$$LST^RCFN01(PRCADB,2)
"RTN","PRCAAPR1",21,0)
 I Y>0 S Y("CCPC")=$$FPS^RCCPCFN(+DEBT) S:Y("CCPC") Y=+$P(Y("CCPC"),"^")
"RTN","PRCAAPR1",22,0)
 W $S(Y=-1:"N/A",1:$$SLH^RCFN01(Y))
"RTN","PRCAAPR1",23,0)
 W !,$P(X("ADD"),"^")
"RTN","PRCAAPR1",24,0)
 W:+$G(Y("CCPC")) ?52,"Activity as of: ",$$SLH^RCFN01($$ASOF^RCCPCFN($P(Y("CCPC"),"^",2)))
"RTN","PRCAAPR1",25,0)
 W:$P(X("ADD"),"^",2)]"" !,$P(X("ADD"),"^",2) W:$P(X("ADD"),"^",3)]"" !,$P(X("ADD"),"^",3)
"RTN","PRCAAPR1",26,0)
 W ! W:$P(X("ADD"),"^",4)]"" $P(X("ADD"),"^",4),", ",$P(X("ADD"),"^",5),"  ",$S($P(X("ADD"),"^",6):$P(X("ADD"),"^",6),1:$P(X("ADD"),"^",8))
"RTN","PRCAAPR1",27,0)
 W ?55,"Amount Owed: ",?69,$J(+$G(^TMP("PRCAAPR",$J,"C")),9,2)
"RTN","PRCAAPR1",28,0)
 W !,"Phone #: ",$S($P(X("ADD"),"^",7)]"":$P(X("ADD"),"^",7),1:"N/A")
"RTN","PRCAAPR1",29,0)
 I PRCADB["DPT(" W ?51,"RX Copay Exempt: " S IBRX=$$RXST^IBARXEU(+PRCADB,DT) W $S($P(IBRX,U)=1:"YES",$P(IBRX,U)=0:"NO",1:"N/A")
"RTN","PRCAAPR1",30,0)
 I PRCADB["DPT(" W !?57,"CV Status: " S RCCV=$$CVEDT^DGCV(+PRCADB,DT) W $S($P(RCCV,U,3)>0:"YES",1:"NO") I $P(RCCV,U,2) W !?52,"CV Status Ends: ",$$SLH^RCFN01($P(RCCV,U,2))
"RTN","PRCAAPR1",31,0)
 ; *108 add exemption reason/dmc info
"RTN","PRCAAPR1",32,0)
 I IBRX>0,($P(IBRX,U)=1) S DIC="^IBE(354.2,",DIC(0)="M",X=+$P(IBRX,"^",3) D ^DIC I Y>0 W !,?54,"(",$P(Y,"^",2),")"
"RTN","PRCAAPR1",33,0)
 I $D(^RCD(340,"DMC",1,+DEBT)) S DMC=$G(^RCD(340,+DEBT,3)) D
"RTN","PRCAAPR1",34,0)
 .I $P(DMC,"^",2) W !,"** Account forwarded to DMC: ",$$SLH^RCFN01($P(DMC,"^",2)),?50,"Total DMC Amount: ",?69,$J($P(DMC,"^",5),9,2)
"RTN","PRCAAPR1",35,0)
 .I $P(DMC,"^",9)'="" W !,?49,"Lesser Amt to DMC: ",?69,$J($P(DMC,"^",9),9,2)
"RTN","PRCAAPR1",36,0)
 .Q
"RTN","PRCAAPR1",37,0)
 I $D(^RCD(340,"TOP",+DEBT)) S TOP4=$G(^RCD(340,+DEBT,4)),TOP6=$G(^(6)) D
"RTN","PRCAAPR1",38,0)
 .I +TOP6 W !,"** Account forwarded to TOP: ",$$SLH^RCFN01($P(TOP6,"^")),?45,"Total TOP Amount: ",?65,$J($P(TOP4,"^",3),13,2)
"RTN","PRCAAPR1",39,0)
 .I $P(TOP6,"^",6) W !,?45,"TOP HOLD DATE: ",$$SLH^RCFN01($P(TOP6,"^",6))
"RTN","PRCAAPR1",40,0)
 .Q
"RTN","PRCAAPR1",41,0)
 I $O(^RCD(340,+DEBT,2,0)) D
"RTN","PRCAAPR1",42,0)
 .S Y=0 F X=0:0 S X=$O(^RCD(340,+DEBT,2,X)) Q:'X  W:'Y ! W !,$G(^(X,0)) S Y=Y+1 W:Y=3&$O(^RCD(340,+DEBT,2,X)) "..." Q:Y=3
"RTN","PRCAAPR1",43,0)
 .Q
"RTN","PRCAAPR1",44,0)
 Q
"RTN","PRCAAPR1",45,0)
HDR2 W !!,"#",?4,"Bill #",?16,"Est",?28,"Type",?37,"Paid",?46,"Prin",?55,"Int",?63,"Adm",?72,"Balance"
"RTN","PRCAAPR1",46,0)
 Q
"RTN","PRCAAPR1",47,0)
DIS ;Display bill line items
"RTN","PRCAAPR1",48,0)
 NEW STAT1
"RTN","PRCAAPR1",49,0)
 I '$O(^TMP("PRCAAPR",$J,"C",0)) S X="",$P(X,"*",22)="" W !!,X,"  NO ACCOUNT INFORMATION AVAILABLE  ",X G Q1
"RTN","PRCAAPR1",50,0)
 F STAT1=0:0 S STAT1=$O(^TMP("PRCAAPR",$J,"C",STAT1)) Q:'STAT1!$D(OUT)  D BHDR S BILL=0 F  S BILL=$O(^TMP("PRCAAPR",$J,"C",STAT1,BILL)) Q:BILL=""!$D(OUT)  D BLN
"RTN","PRCAAPR1",51,0)
 I '$D(OUT) D READ
"RTN","PRCAAPR1",52,0)
Q1 Q
"RTN","PRCAAPR1",53,0)
BHDR ;Display status line
"RTN","PRCAAPR1",54,0)
 S X=$S(+$P(^TMP("PRCAAPR",$J,"C",STAT1),"^",2)=99:"PAYMENTS",1:$P($G(^PRCA(430.3,+$O(^PRCA(430.3,"AC",+$P(^TMP("PRCAAPR",$J,"C",STAT1),"^",2),0)),0)),"^"))
"RTN","PRCAAPR1",55,0)
 S Y=" "_X_" ("_$J(+^TMP("PRCAAPR",$J,"C",STAT1),0,2)_") " W ! F X=1:1:80-$L(Y)/2 W "-"
"RTN","PRCAAPR1",56,0)
 W Y F X=1:1:IOM-$X-1 W "-"
"RTN","PRCAAPR1",57,0)
 Q
"RTN","PRCAAPR1",58,0)
BLN ;
"RTN","PRCAAPR1",59,0)
 I $Y+5>IOSL,COUNT D READ G:$D(OUT) Q2 D HDR,HDR2,BHDR
"RTN","PRCAAPR1",60,0)
 S:STAT1'=99 COUNT=COUNT+1,^TMP("PRCAAPR",$J,"O",COUNT)=BILL S X=$S(STAT1=99:BILL,1:$G(^PRCA(430,BILL,0)))
"RTN","PRCAAPR1",61,0)
 W !,$S(STAT1'=99:COUNT,1:"*"),?4,$P(X,"^") W:STAT1'=99 ?16,$$SLH^RCFN01($P(X,"^",10))
"RTN","PRCAAPR1",62,0)
 W:STAT1'=99 ?28,$S($P(X,"^",2)=31:"TRIC PT",1:$E($P($G(^PRCA(430.2,$S($O(^PRCA(430.2,"AC",24,0))=$P(X,"^",2):+$P(X,"^",16),1:+$P(X,"^",2)),0)),"^"),1,7))  ; PRCA*4.5*192 changed CHMP PT to TRIC PT
"RTN","PRCAAPR1",63,0)
 W:STAT1=99 ?28,"PAYMENT"
"RTN","PRCAAPR1",64,0)
 S X=$S(STAT1=99:"^^^^^^"_^TMP("PRCAAPR",$J,"C",STAT1,BILL),1:$G(^PRCA(430,BILL,7))) W ?37 W:STAT1=99 "-" W $J($P(X,"^",7)+$P(X,"^",8)+$P(X,"^",9)+$P(X,"^",10)+$P(X,"^",11),0,2)
"RTN","PRCAAPR1",65,0)
 W ?45 W:STAT1=99 " " W:STAT1'=99 $S($P(^PRCA(430,BILL,0),"^",2)=$O(^PRCA(430.2,"AC",33,0)):"-",1:" ")
"RTN","PRCAAPR1",66,0)
 W $J($P(X,"^"),0,2),?55,$J($P(X,"^",2),1,2),?63,$J($P(X,"^",3),0,2),?69,$S(STAT1=99:"-",$P(^PRCA(430,BILL,0),"^",2)=$O(^PRCA(430.2,"AC",33,0)):"-",1:" ")
"RTN","PRCAAPR1",67,0)
 W $S(STAT1=99:$J(^TMP("PRCAAPR",$J,"C",STAT1,BILL),0,2),1:$J($P(X,"^")+$P(X,"^",2)+$P(X,"^",3)+$P(X,"^",4)+$P(X,"^",5),9,2))
"RTN","PRCAAPR1",68,0)
 K ^TMP("PRCAAPR",$J,"C",STAT1,BILL) K:$O(^TMP("PRCAAPR",$J,"C",STAT1,""))="" ^TMP("PRCAAPR",$J,"C",STAT1)
"RTN","PRCAAPR1",69,0)
Q2 Q
"RTN","PRCAAPR1",70,0)
READ ;Read bill number
"RTN","PRCAAPR1",71,0)
 W !!,"Select 1-",COUNT W:$O(^TMP("PRCAAPR",$J,"C","")) " or return to continue" R ": ",X:DTIME I X["^"!'$T S:'$T DTOUT=1 S OUT=1 G Q3
"RTN","PRCAAPR1",72,0)
 I X["?" W !!,"To see detailed information for a bill number, enter the corresponding '#'",!,"next to the bill.  (Ex: 1 or 1,3)" G READ
"RTN","PRCAAPR1",73,0)
 I X="",'$O(^TMP("PRCAAPR",$J,"C","")) S OUT=1 G Q3
"RTN","PRCAAPR1",74,0)
 G:X="" Q3 S SEL=X
"RTN","PRCAAPR1",75,0)
 F X=1:1:$L(SEL,",") S Y=$P(SEL,",",X) I Y'?1N.N!'$D(^TMP("PRCAAPR",$J,"O",+Y)) W *7," ??" G READ
"RTN","PRCAAPR1",76,0)
 S OUT=1 F X=1:1:$L(SEL,",") S Y=$P(SEL,",",X) D EN1^PRCAATR($G(^TMP("PRCAAPR",$J,"O",+Y)))
"RTN","PRCAAPR1",77,0)
Q3 Q
"RTN","PRCAAPR1",78,0)
 ;
"RTN","PRCAAPR1",79,0)
ACCT(DFN) ;Get account number. Join station with DFN (Patch 206)
"RTN","PRCAAPR1",80,0)
 N SITE,ACCT,ACCT1,LEN
"RTN","PRCAAPR1",81,0)
 S DFN=+DFN
"RTN","PRCAAPR1",82,0)
 S LEN=$L(DFN)-1
"RTN","PRCAAPR1",83,0)
 S SITE=$$SITE^RCMSITE                          ;station number
"RTN","PRCAAPR1",84,0)
 S ACCT=$$RJ^XLFSTR(DFN,13,0)                   ;add leading zeroes
"RTN","PRCAAPR1",85,0)
 S ACCT1=SITE_"-"_$E(ACCT,1,$L(ACCT)-$L(DFN))   ;add hyphen
"RTN","PRCAAPR1",86,0)
 S ACCT1=ACCT1_"-"_$E(ACCT,$L(ACCT)-LEN,99)     ;add hyphen
"RTN","PRCAAPR1",87,0)
 S ACCT1=ACCT1_"-"_$E($P($P(DEBT,U,2),","),1,5) ;add last name
"RTN","PRCAAPR1",88,0)
 Q ACCT1
"VER")
8.0^22.0
**END**
**END**

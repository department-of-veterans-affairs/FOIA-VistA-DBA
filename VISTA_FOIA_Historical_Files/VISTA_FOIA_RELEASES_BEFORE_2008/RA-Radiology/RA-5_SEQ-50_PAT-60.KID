Released RA*5*60 SEQ #50
Extracted from mail message
**KIDS**:RA*5.0*60^

**INSTALL NAME**
RA*5.0*60
"BLD",6116,0)
RA*5.0*60^RADIOLOGY/NUCLEAR MEDICINE^0^3050414^y
"BLD",6116,1,0)
^^2^2^3050414^
"BLD",6116,1,1,0)
This patch corrects an HL7 message generation error caused by patch 
"BLD",6116,1,2,0)
RA*5.0*54.
"BLD",6116,4,0)
^9.64PA^^
"BLD",6116,"KRN",0)
^9.67PA^8989.52^19
"BLD",6116,"KRN",.4,0)
.4
"BLD",6116,"KRN",.401,0)
.401
"BLD",6116,"KRN",.402,0)
.402
"BLD",6116,"KRN",.403,0)
.403
"BLD",6116,"KRN",.5,0)
.5
"BLD",6116,"KRN",.84,0)
.84
"BLD",6116,"KRN",3.6,0)
3.6
"BLD",6116,"KRN",3.8,0)
3.8
"BLD",6116,"KRN",9.2,0)
9.2
"BLD",6116,"KRN",9.8,0)
9.8
"BLD",6116,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6116,"KRN",9.8,"NM",1,0)
RAHLRS^^0^B11132546
"BLD",6116,"KRN",9.8,"NM","B","RAHLRS",1)

"BLD",6116,"KRN",19,0)
19
"BLD",6116,"KRN",19.1,0)
19.1
"BLD",6116,"KRN",101,0)
101
"BLD",6116,"KRN",409.61,0)
409.61
"BLD",6116,"KRN",771,0)
771
"BLD",6116,"KRN",870,0)
870
"BLD",6116,"KRN",8989.51,0)
8989.51
"BLD",6116,"KRN",8989.52,0)
8989.52
"BLD",6116,"KRN",8994,0)
8994
"BLD",6116,"KRN","B",.4,.4)

"BLD",6116,"KRN","B",.401,.401)

"BLD",6116,"KRN","B",.402,.402)

"BLD",6116,"KRN","B",.403,.403)

"BLD",6116,"KRN","B",.5,.5)

"BLD",6116,"KRN","B",.84,.84)

"BLD",6116,"KRN","B",3.6,3.6)

"BLD",6116,"KRN","B",3.8,3.8)

"BLD",6116,"KRN","B",9.2,9.2)

"BLD",6116,"KRN","B",9.8,9.8)

"BLD",6116,"KRN","B",19,19)

"BLD",6116,"KRN","B",19.1,19.1)

"BLD",6116,"KRN","B",101,101)

"BLD",6116,"KRN","B",409.61,409.61)

"BLD",6116,"KRN","B",771,771)

"BLD",6116,"KRN","B",870,870)

"BLD",6116,"KRN","B",8989.51,8989.51)

"BLD",6116,"KRN","B",8989.52,8989.52)

"BLD",6116,"KRN","B",8994,8994)

"BLD",6116,"QUES",0)
^9.62^^
"BLD",6116,"REQB",0)
^9.611^1^1
"BLD",6116,"REQB",1,0)
RA*5.0*54^1
"BLD",6116,"REQB","B","RA*5.0*54",1)

"MBREQ")
0
"PKG",31,-1)
1^1
"PKG",31,0)
RADIOLOGY/NUCLEAR MEDICINE^RA^REGISTERS PATIENTS,RECORDS EXAMS,PROFILES,AMIS REPORTS
"PKG",31,22,0)
^9.49I^1^1
"PKG",31,22,1,0)
5.0^2980317^2981117^66481
"PKG",31,22,1,"PAH",1,0)
60^3050414
"PKG",31,22,1,"PAH",1,1,0)
^^2^2^3050414
"PKG",31,22,1,"PAH",1,1,1,0)
This patch corrects an HL7 message generation error caused by patch 
"PKG",31,22,1,"PAH",1,1,2,0)
RA*5.0*54.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","RAHLRS")
0^1^B11132546
"RTN","RAHLRS",1,0)
RAHLRS ;HIRMFO/CRT/PDW - Resend HL7 messages for selected cases ;Mar 16, 1998
"RTN","RAHLRS",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**25,54,60**;Mar 16, 1998
"RTN","RAHLRS",3,0)
 ;
"RTN","RAHLRS",4,0)
 ; Utility to RESEND HL7 messages
"RTN","RAHLRS",5,0)
 ;
"RTN","RAHLRS",6,0)
 N RACNI,RADFN,RADTI,RARPT,X
"RTN","RAHLRS",7,0)
 ;
"RTN","RAHLRS",8,0)
 D SETVARS Q:$G(RAIMGTY)=""
"RTN","RAHLRS",9,0)
 ;
"RTN","RAHLRS",10,0)
 F  S X=$$RACNLU(.RADFN,.RADTI,.RACNI) Q:+X'>0  D  Q:QUIT<0
"RTN","RAHLRS",11,0)
 .D RESEND(RADFN,RADTI,RACNI,.QUIT)
"RTN","RAHLRS",12,0)
 Q
"RTN","RAHLRS",13,0)
 ;
"RTN","RAHLRS",14,0)
RACNLU(RADFN,RADTI,RACNI) ; Select Case Number
"RTN","RAHLRS",15,0)
 ;
"RTN","RAHLRS",16,0)
 N RANOSCRN S RANOSCRN="" ; Don't limit cases to current Imaging Type
"RTN","RAHLRS",17,0)
 S (RADFN,RADTI,RADFN)=""
"RTN","RAHLRS",18,0)
 D ^RACNLU
"RTN","RAHLRS",19,0)
 Q X
"RTN","RAHLRS",20,0)
 ;
"RTN","RAHLRS",21,0)
RESEND(RADFN,RADTI,RACNI,QUIT) ; re-send exam message(s) to HL7 subscribers
"RTN","RAHLRS",22,0)
 ;
"RTN","RAHLRS",23,0)
 N RAED
"RTN","RAHLRS",24,0)
 ;
"RTN","RAHLRS",25,0)
 S QUIT=0
"RTN","RAHLRS",26,0)
 I '$D(DT) D ^%DT S DT=Y
"RTN","RAHLRS",27,0)
 ;
"RTN","RAHLRS",28,0)
 S RAED=$$RAED(RADFN,RADTI,RACNI)
"RTN","RAHLRS",29,0)
 S QUIT=$$OK(RADFN,RADTI,RACNI)
"RTN","RAHLRS",30,0)
 I QUIT>0 D
"RTN","RAHLRS",31,0)
 .I RAED[",REG," D
"RTN","RAHLRS",32,0)
 ..D EN^DDIOL("Re-sending 'EXAM REGISTERD' HL7 message...",,"!!,?6")
"RTN","RAHLRS",33,0)
 ..D REG^RAHLRPC
"RTN","RAHLRS",34,0)
 .I RAED[",CANCEL," D
"RTN","RAHLRS",35,0)
 ..D EN^DDIOL("Re-sending 'EXAM CANCELLED' HL7 message...",,"!,?6")
"RTN","RAHLRS",36,0)
 ..D CANCEL^RAHLRPC
"RTN","RAHLRS",37,0)
 .I RAED[",EXAM," D
"RTN","RAHLRS",38,0)
 ..S $P(^RADPT(RADFN,"DT",RADTI,"P",RACNI,0),"^",30)="" ;Reset sent flag
"RTN","RAHLRS",39,0)
 ..D EN^DDIOL("Re-sending 'EXAMINED' HL7 message...",,"!,?6")
"RTN","RAHLRS",40,0)
 ..N RAEXMDUN D 1^RAHLRPC ;*60 Newed RAEXMDUN to prevent variable leak
"RTN","RAHLRS",41,0)
 .I RAED[",RPT," D
"RTN","RAHLRS",42,0)
 ..D EN^DDIOL("Re-sending 'REPORT VERIFIED' HL7 message...",,"!,?6")
"RTN","RAHLRS",43,0)
 ..D RPT^RAHLRPC
"RTN","RAHLRS",44,0)
 Q
"RTN","RAHLRS",45,0)
 ;
"RTN","RAHLRS",46,0)
RAED(RADFN,RADTI,RACNI) ; identify correct ^RAHLRPC entry point(s)
"RTN","RAHLRS",47,0)
 ;
"RTN","RAHLRS",48,0)
 N RASTAT,RAIMTYP,RAORD,RETURN,RARPST
"RTN","RAHLRS",49,0)
 S (RARPST,RASTAT)=""
"RTN","RAHLRS",50,0)
 ;
"RTN","RAHLRS",51,0)
 S RETURN=",REG,"
"RTN","RAHLRS",52,0)
 ;
"RTN","RAHLRS",53,0)
 S RASTAT=$$GET1^DIQ(70.03,RACNI_","_RADTI_","_RADFN,3,"I")
"RTN","RAHLRS",54,0)
 ;
"RTN","RAHLRS",55,0)
 S RAIMTYP=$$GET1^DIQ(72,+RASTAT,7)
"RTN","RAHLRS",56,0)
 S RAORD=$$GET1^DIQ(72,+RASTAT,3)
"RTN","RAHLRS",57,0)
 ;
"RTN","RAHLRS",58,0)
 S:RAORD=0 RETURN=RETURN_"CANCEL,"
"RTN","RAHLRS",59,0)
 ;
"RTN","RAHLRS",60,0)
 I $$GET1^DIQ(72,+RASTAT,8)="YES" D  ; Generate Examined HL7 Message
"RTN","RAHLRS",61,0)
 .S RETURN=RETURN_"EXAM,"
"RTN","RAHLRS",62,0)
 ;
"RTN","RAHLRS",63,0)
 I RETURN'[",EXAM," D
"RTN","RAHLRS",64,0)
 .; also check previous statuses for 'Generate Examined HL7 Message'
"RTN","RAHLRS",65,0)
 .F  S RAORD=$O(^RA(72,"AA",RAIMTYP,RAORD),-1) Q:+RAORD<1  D  Q:RETURN[",EXAM,"
"RTN","RAHLRS",66,0)
 ..S RASTAT=$O(^RA(72,"AA",RAIMTYP,RAORD,0))
"RTN","RAHLRS",67,0)
 ..I $$GET1^DIQ(72,+RASTAT,8)="YES" S RETURN=RETURN_"EXAM,"
"RTN","RAHLRS",68,0)
 ;
"RTN","RAHLRS",69,0)
 I RARPT]"" D  ; Check if Verified Report exists
"RTN","RAHLRS",70,0)
 .S RARPST=$$GET1^DIQ(74,RARPT,5,"I")
"RTN","RAHLRS",71,0)
 .I RARPST="V" S RETURN=RETURN_"RPT,"
"RTN","RAHLRS",72,0)
 ;
"RTN","RAHLRS",73,0)
 Q RETURN
"RTN","RAHLRS",74,0)
 ;
"RTN","RAHLRS",75,0)
OK(RADFN,RADTI,RACNI) ; Get User to confirm continue
"RTN","RAHLRS",76,0)
 ;
"RTN","RAHLRS",77,0)
 N X,RAEXST
"RTN","RAHLRS",78,0)
 ;
"RTN","RAHLRS",79,0)
 S RAEXST=$$GET1^DIQ(70.03,RACNI_","_RADTI_","_RADFN,3)
"RTN","RAHLRS",80,0)
 ;
"RTN","RAHLRS",81,0)
 S X="",$P(X,"=",70)=""
"RTN","RAHLRS",82,0)
 D EN^DDIOL(X,"","!?5")
"RTN","RAHLRS",83,0)
 S DIR("A")="Re-send all HL7 messages for this '"_RAEXST_"' case?"
"RTN","RAHLRS",84,0)
 S DIR(0)="Y",DIR("B")="YES" D ^DIR
"RTN","RAHLRS",85,0)
 I Y="^" Q -1
"RTN","RAHLRS",86,0)
 Q Y
"RTN","RAHLRS",87,0)
 ;
"RTN","RAHLRS",88,0)
SETVARS ; Setup key Rad/Nuc Med variables
"RTN","RAHLRS",89,0)
 ;
"RTN","RAHLRS",90,0)
 I $O(RACCESS(DUZ,""))="" D SETVARS^RAPSET1(0)
"RTN","RAHLRS",91,0)
 Q:'($D(RACCESS(DUZ))\10)  ; user does not have location access
"RTN","RAHLRS",92,0)
 I $G(RAIMGTY)="" D SETVARS^RAPSET1(1) K:$G(RAIMGTY)="" XQUIT
"RTN","RAHLRS",93,0)
 Q
"VER")
8.0^22.0
**END**
**END**

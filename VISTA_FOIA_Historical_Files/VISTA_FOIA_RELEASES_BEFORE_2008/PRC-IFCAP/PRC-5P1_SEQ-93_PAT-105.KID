Released PRC*5.1*105 SEQ #93
Extracted from mail message
**KIDS**:PRC*5.1*105^

**INSTALL NAME**
PRC*5.1*105
"BLD",5011,0)
PRC*5.1*105^IFCAP^0^3070313^y
"BLD",5011,1,0)
^^9^9^3070207^
"BLD",5011,1,1,0)
This patch addresses three issues.  The first issue involves contract
"BLD",5011,1,2,0)
numbers not being sent in the FPDS HL7 message of Amendments to Delivery
"BLD",5011,1,3,0)
Orders.  Because the contract number is not sent the orders are being
"BLD",5011,1,4,0)
interpreted as an open market order causing problems in Austin.
"BLD",5011,1,5,0)
 
"BLD",5011,1,6,0)
The second and third issues are related to the DUN & Bradstreet DUNS#'s 
"BLD",5011,1,7,0)
changing format.  Formerly DUNS#'s used the 9th digit as a check 
"BLD",5011,1,8,0)
digit and lengths were variable.  Now the 9th digit will no longer be 
"BLD",5011,1,9,0)
used as a check digit and valid lengths are either 9 or 13 numbers only.
"BLD",5011,4,0)
^9.64PA^440.3^2
"BLD",5011,4,440,0)
440
"BLD",5011,4,440,2,0)
^9.641^440^1
"BLD",5011,4,440,2,440,0)
VENDOR  (File-top level)
"BLD",5011,4,440,2,440,1,0)
^9.6411^18.3^1
"BLD",5011,4,440,2,440,1,18.3,0)
DUN & BRADSTREET #
"BLD",5011,4,440,222)
y^n^p^^^^n^^n
"BLD",5011,4,440,224)

"BLD",5011,4,440.3,0)
440.3
"BLD",5011,4,440.3,2,0)
^9.641^440.3^1
"BLD",5011,4,440.3,2,440.3,0)
VENDOR EDIT  (File-top level)
"BLD",5011,4,440.3,2,440.3,1,0)
^9.6411^18.3^1
"BLD",5011,4,440.3,2,440.3,1,18.3,0)
DUN & BRADSTREET #
"BLD",5011,4,440.3,222)
y^n^p^^^^n^^n
"BLD",5011,4,440.3,224)

"BLD",5011,4,"APDD",440,440)

"BLD",5011,4,"APDD",440,440,18.3)

"BLD",5011,4,"APDD",440.3,440.3)

"BLD",5011,4,"APDD",440.3,440.3,18.3)

"BLD",5011,4,"B",440,440)

"BLD",5011,4,"B",440.3,440.3)

"BLD",5011,6.3)
4
"BLD",5011,"KRN",0)
^9.67PA^8989.52^19
"BLD",5011,"KRN",.4,0)
.4
"BLD",5011,"KRN",.401,0)
.401
"BLD",5011,"KRN",.402,0)
.402
"BLD",5011,"KRN",.402,"NM",0)
^9.68A^^
"BLD",5011,"KRN",.403,0)
.403
"BLD",5011,"KRN",.5,0)
.5
"BLD",5011,"KRN",.84,0)
.84
"BLD",5011,"KRN",3.6,0)
3.6
"BLD",5011,"KRN",3.8,0)
3.8
"BLD",5011,"KRN",9.2,0)
9.2
"BLD",5011,"KRN",9.8,0)
9.8
"BLD",5011,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5011,"KRN",9.8,"NM",1,0)
PRCHAAC1^^0^B40484689
"BLD",5011,"KRN",9.8,"NM","B","PRCHAAC1",1)

"BLD",5011,"KRN",19,0)
19
"BLD",5011,"KRN",19.1,0)
19.1
"BLD",5011,"KRN",101,0)
101
"BLD",5011,"KRN",409.61,0)
409.61
"BLD",5011,"KRN",771,0)
771
"BLD",5011,"KRN",870,0)
870
"BLD",5011,"KRN",8989.51,0)
8989.51
"BLD",5011,"KRN",8989.52,0)
8989.52
"BLD",5011,"KRN",8994,0)
8994
"BLD",5011,"KRN","B",.4,.4)

"BLD",5011,"KRN","B",.401,.401)

"BLD",5011,"KRN","B",.402,.402)

"BLD",5011,"KRN","B",.403,.403)

"BLD",5011,"KRN","B",.5,.5)

"BLD",5011,"KRN","B",.84,.84)

"BLD",5011,"KRN","B",3.6,3.6)

"BLD",5011,"KRN","B",3.8,3.8)

"BLD",5011,"KRN","B",9.2,9.2)

"BLD",5011,"KRN","B",9.8,9.8)

"BLD",5011,"KRN","B",19,19)

"BLD",5011,"KRN","B",19.1,19.1)

"BLD",5011,"KRN","B",101,101)

"BLD",5011,"KRN","B",409.61,409.61)

"BLD",5011,"KRN","B",771,771)

"BLD",5011,"KRN","B",870,870)

"BLD",5011,"KRN","B",8989.51,8989.51)

"BLD",5011,"KRN","B",8989.52,8989.52)

"BLD",5011,"KRN","B",8994,8994)

"BLD",5011,"QUES",0)
^9.62^^
"BLD",5011,"REQB",0)
^9.611^1^1
"BLD",5011,"REQB",1,0)
PRC*5.1*79^2
"BLD",5011,"REQB","B","PRC*5.1*79",1)

"FIA",440)
VENDOR
"FIA",440,0)
^PRC(440,
"FIA",440,0,0)
440IsO
"FIA",440,0,1)
y^n^p^^^^n^^n
"FIA",440,0,10)

"FIA",440,0,11)

"FIA",440,0,"RLRO")

"FIA",440,0,"VR")
5.1^PRC
"FIA",440,440)
1
"FIA",440,440,18.3)

"FIA",440.3)
VENDOR EDIT
"FIA",440.3,0)
^PRC(440.3,
"FIA",440.3,0,0)
440.3OIs
"FIA",440.3,0,1)
y^n^p^^^^n^^n
"FIA",440.3,0,10)

"FIA",440.3,0,11)

"FIA",440.3,0,"RLRO")

"FIA",440.3,0,"VR")
5.1^PRC
"FIA",440.3,440.3)
1
"FIA",440.3,440.3,18.3)

"MBREQ")
0
"PKG",455,-1)
1^1
"PKG",455,0)
IFCAP^PRC^IFCAP System Files
"PKG",455,20,0)
^9.402P^^
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
5.1^3001012^3001019^68
"PKG",455,22,1,"PAH",1,0)
105^3070313
"PKG",455,22,1,"PAH",1,1,0)
^^9^9^3070313
"PKG",455,22,1,"PAH",1,1,1,0)
This patch addresses three issues.  The first issue involves contract
"PKG",455,22,1,"PAH",1,1,2,0)
numbers not being sent in the FPDS HL7 message of Amendments to Delivery
"PKG",455,22,1,"PAH",1,1,3,0)
Orders.  Because the contract number is not sent the orders are being
"PKG",455,22,1,"PAH",1,1,4,0)
interpreted as an open market order causing problems in Austin.
"PKG",455,22,1,"PAH",1,1,5,0)
 
"PKG",455,22,1,"PAH",1,1,6,0)
The second and third issues are related to the DUN & Bradstreet DUNS#'s 
"PKG",455,22,1,"PAH",1,1,7,0)
changing format.  Formerly DUNS#'s used the 9th digit as a check 
"PKG",455,22,1,"PAH",1,1,8,0)
digit and lengths were variable.  Now the 9th digit will no longer be 
"PKG",455,22,1,"PAH",1,1,9,0)
used as a check digit and valid lengths are either 9 or 13 numbers only.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRCHAAC1")
0^1^B40484689^n/a
"RTN","PRCHAAC1",1,0)
PRCHAAC1 ;WIFO/CR-CONT. OF IFCAP HL7 MESSAGE TO AUSTIN ;3/4/05 11:43 AM
"RTN","PRCHAAC1",2,0)
 ;;5.1;IFCAP;**79,105**;Oct 20, 2000;Build 4
"RTN","PRCHAAC1",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","PRCHAAC1",4,0)
 ;
"RTN","PRCHAAC1",5,0)
 ; This routine is called from the routine PRCHAAC.
"RTN","PRCHAAC1",6,0)
 ; Set up HL7 environment for message.
"RTN","PRCHAAC1",7,0)
 K HLA,HL,HLFS,HLCS,HLRS
"RTN","PRCHAAC1",8,0)
 N PRCAPPO,PRCPPA,PRCERR,PRCMID,PRCMSG,PRCSEG,PRCSUB,PRCPROT,PRCRSULT,PRCOPTNS
"RTN","PRCHAAC1",9,0)
 S PRCDUZ=$G(DUZ) I +PRCDUZ'>0 D EN^DDIOL("User undefined","","!!?5") Q 0  ;DUZ is system-supplied
"RTN","PRCHAAC1",10,0)
 S PRCPROT="PRC_IFCAP_01_EV_AAC"
"RTN","PRCHAAC1",11,0)
 D INIT^HLFNC2(PRCPROT,.HL)
"RTN","PRCHAAC1",12,0)
 I $G(HL) D  Q 0  ;tell user if there was an error
"RTN","PRCHAAC1",13,0)
 . S PRCMSG=0
"RTN","PRCHAAC1",14,0)
 . I $P(HL,"^",2)]"" D
"RTN","PRCHAAC1",15,0)
 .. D:'$D(ZTQUEUED) EN^DDIOL("Error: "_$P(HL,"^",2)_" occurred. Please try later.")
"RTN","PRCHAAC1",16,0)
 ;
"RTN","PRCHAAC1",17,0)
 S HLFS=$G(HL("FS"))    ;field separator
"RTN","PRCHAAC1",18,0)
 S HLCS=$E(HL("ECH"),1) ;component separator
"RTN","PRCHAAC1",19,0)
 S HLRS=$E(HL("ECH"),2) ;repetition separator
"RTN","PRCHAAC1",20,0)
 ;
"RTN","PRCHAAC1",21,0)
 ;======== MFI Segment ===========
"RTN","PRCHAAC1",22,0)
 S PRCSEG="MFI"_HLFS_"CDM"_HLFS_HLFS_"UPD"_HLFS_HLFS_HLFS_"AL"
"RTN","PRCHAAC1",23,0)
 S HLA("HLS",1)=PRCSEG
"RTN","PRCHAAC1",24,0)
 ;
"RTN","PRCHAAC1",25,0)
 ;======== MFE Segment ===========
"RTN","PRCHAAC1",26,0)
 S PRCSEG="MFE"_HLFS_"MAD"_HLFS_HLFS
"RTN","PRCHAAC1",27,0)
 S $P(PRCSEG,HLFS,5)="V"_PRCROOT_HLFS_"CE"  ;primary key value
"RTN","PRCHAAC1",28,0)
 S HLA("HLS",2)=PRCSEG
"RTN","PRCHAAC1",29,0)
 ;
"RTN","PRCHAAC1",30,0)
 ;======== CDM Segment ===========
"RTN","PRCHAAC1",31,0)
 S PRCSEG="CDM"
"RTN","PRCHAAC1",32,0)
 S $P(PRCSEG,HLFS,2)="V"_PRCROOT      ;primary key value
"RTN","PRCHAAC1",33,0)
 S $P(PRCSEG,HLFS,4)="PROCUREMENT DETAIL FROM IFCAP"
"RTN","PRCHAAC1",34,0)
 S $P(PRCSEG,HLFS,12)=PRCCN           ;contract number
"RTN","PRCHAAC1",35,0)
 S:$G(PRCAM)="" $P(PRCSEG,HLFS,13)=PRCVEN_HLCS_HLCS_PRCDB
"RTN","PRCHAAC1",36,0)
 S HLA("HLS",3)=PRCSEG
"RTN","PRCHAAC1",37,0)
 ;
"RTN","PRCHAAC1",38,0)
 ;======== PRC Segment ===========
"RTN","PRCHAAC1",39,0)
 S PRCSEG="PRC"
"RTN","PRCHAAC1",40,0)
 S $P(PRCSEG,HLFS,2)="V"_PRCROOT      ;primary key value
"RTN","PRCHAAC1",41,0)
 S:$G(PRCAM)="" $P(PRCSEG,HLFS,10)="0"_HLCS_"US"
"RTN","PRCHAAC1",42,0)
 S $P(PRCSEG,HLFS,11)=PRCAMT_HLCS_"US"
"RTN","PRCHAAC1",43,0)
 S $P(PRCSEG,HLFS,12)=$G(PRCOD)    ;effective start date = P.O. Date
"RTN","PRCHAAC1",44,0)
 S $P(PRCSEG,HLFS,13)=$G(PRCDD)    ;effective end date = delivery date
"RTN","PRCHAAC1",45,0)
 S HLA("HLS",4)=PRCSEG
"RTN","PRCHAAC1",46,0)
 ;
"RTN","PRCHAAC1",47,0)
 ;======== ZPO Segment ===========
"RTN","PRCHAAC1",48,0)
 ; Purchase order details - check if this PO has been amended and get
"RTN","PRCHAAC1",49,0)
 ; just a few fields for this segment as requested by Austin Automation
"RTN","PRCHAAC1",50,0)
 ; Center (AAC)
"RTN","PRCHAAC1",51,0)
 I $D(^PRC(442,PRCHPO,6,0)) G AMEND
"RTN","PRCHAAC1",52,0)
 S PRCSEG="ZPO"
"RTN","PRCHAAC1",53,0)
 S:$G(PRCECC)'="" $P(PRCSEG,HLFS,2)=PRCECC      ;extent competed
"RTN","PRCHAAC1",54,0)
 S:$G(PRCRNC)'="" $P(PRCSEG,HLFS,3)=PRCRNC      ;reason not competed
"RTN","PRCHAAC1",55,0)
 S $P(PRCSEG,HLFS,4)=PRCEPAC     ;EPA designated product
"RTN","PRCHAAC1",56,0)
 S:$G(PRCFSC)'="" $P(PRCSEG,HLFS,5)=PRCFSC      ;Federal Supply Class. (or PSC code)
"RTN","PRCHAAC1",57,0)
 S $P(PRCSEG,HLFS,6)=PRCPP       ;place of performance question
"RTN","PRCHAAC1",58,0)
 S $P(PRCSEG,HLFS,7)=PRCPF       ;place of performance
"RTN","PRCHAAC1",59,0)
 S $P(PRCSEG,HLFS,8)=PRCCB       ;contract bundling
"RTN","PRCHAAC1",60,0)
 S $P(PRCSEG,HLFS,9)="N"         ;government furnished eqmt.
"RTN","PRCHAAC1",61,0)
 S $P(PRCSEG,HLFS,10)=PRCPER     ;DUZ^LastName^FirstName (contr. officer)
"RTN","PRCHAAC1",62,0)
 S $P(PRCSEG,HLFS,11)=PRCMOP           ;method of processing
"RTN","PRCHAAC1",63,0)
 S $P(PRCSEG,HLFS,12)="J"              ;type of contract
"RTN","PRCHAAC1",64,0)
 S $P(PRCSEG,HLFS,13)=PRCAAD           ;alternative advertising
"RTN","PRCHAAC1",65,0)
 S $P(PRCSEG,HLFS,14)=$G(PRCDS)        ;date PO was signed
"RTN","PRCHAAC1",66,0)
 S $P(PRCSEG,HLFS,15)=PRCAT            ;award type
"RTN","PRCHAAC1",67,0)
 S $P(PRCSEG,HLFS,16)=PRCRT            ;record type
"RTN","PRCHAAC1",68,0)
 S $P(PRCSEG,HLFS,17)=PRCSPC           ;solicitation procedure
"RTN","PRCHAAC1",69,0)
 S $P(PRCSEG,HLFS,18)=PRCEPC           ;evaluated preference
"RTN","PRCHAAC1",70,0)
 S $P(PRCSEG,HLFS,19)=PRCFAC           ;funding agency code
"RTN","PRCHAAC1",71,0)
 S $P(PRCSEG,HLFS,20)="N"              ;contract funded by foreign gov.
"RTN","PRCHAAC1",72,0)
 S $P(PRCSEG,HLFS,21)=PRCFOC           ;funding agency office code
"RTN","PRCHAAC1",73,0)
 S $P(PRCSEG,HLFS,22)=PRCMY            ;multiyear (for contracts)
"RTN","PRCHAAC1",74,0)
 S $P(PRCSEG,HLFS,23)=PRCPAS           ;pre award synopsis
"RTN","PRCHAAC1",75,0)
 S $P(PRCSEG,HLFS,24)="N"              ;synopsis waiver
"RTN","PRCHAAC1",76,0)
 S $P(PRCSEG,HLFS,25)=PRCNOF           ;number of offers
"RTN","PRCHAAC1",77,0)
 S $P(PRCSEG,HLFS,26)=PRCUV_HLCS_"US"  ;ultimate contract value
"RTN","PRCHAAC1",78,0)
 S $P(PRCSEG,HLFS,27)=PRCCV_HLCS_"US"  ;current contract value
"RTN","PRCHAAC1",79,0)
 S $P(PRCSEG,HLFS,28)=PRCDES           ;description of reqmt. (line item)
"RTN","PRCHAAC1",80,0)
 S $P(PRCSEG,HLFS,29)=3600             ;agency identifier
"RTN","PRCHAAC1",81,0)
 S $P(PRCSEG,HLFS,30)=PRCBZ            ;business size
"RTN","PRCHAAC1",82,0)
 S $P(PRCSEG,HLFS,31)=PRCTSAC          ;type set aside
"RTN","PRCHAAC1",83,0)
 S $P(PRCSEG,HLFS,32)=PRCPBC           ;perf. based service contract
"RTN","PRCHAAC1",84,0)
 S $P(PRCSEG,HLFS,33)=3600             ;contracting agency code
"RTN","PRCHAAC1",85,0)
 S $P(PRCSEG,HLFS,34)=PRCOFC           ;contracting office code
"RTN","PRCHAAC1",86,0)
 S $P(PRCSEG,HLFS,35)=PRCCH            ;Clinger Cohen Act
"RTN","PRCHAAC1",87,0)
 S $P(PRCSEG,HLFS,37)=PRCUCD           ;ultimate completion date
"RTN","PRCHAAC1",88,0)
 S HLA("HLS",5)=PRCSEG
"RTN","PRCHAAC1",89,0)
 G GEN
"RTN","PRCHAAC1",90,0)
 ;
"RTN","PRCHAAC1",91,0)
AMEND ; Get ready for a short amended message
"RTN","PRCHAAC1",92,0)
 S PRCSEG="ZPO"
"RTN","PRCHAAC1",93,0)
 S $P(PRCSEG,HLFS,14)=PRCDS            ;date PO was signed
"RTN","PRCHAAC1",94,0)
 S $P(PRCSEG,HLFS,16)=PRCRT            ;record type
"RTN","PRCHAAC1",95,0)
 S $P(PRCSEG,HLFS,20)="N"              ;contract funded by foreign govt.
"RTN","PRCHAAC1",96,0)
 S $P(PRCSEG,HLFS,26)=PRCUV_HLCS_"US"  ;ultimate contract value
"RTN","PRCHAAC1",97,0)
 S $P(PRCSEG,HLFS,27)=PRCCV_HLCS_"US"  ;current contract value
"RTN","PRCHAAC1",98,0)
 S $P(PRCSEG,HLFS,29)=3600             ;agency identifier
"RTN","PRCHAAC1",99,0)
 S $P(PRCSEG,HLFS,33)=3600             ;contracting agency code
"RTN","PRCHAAC1",100,0)
 S $P(PRCSEG,HLFS,34)=PRCOFC           ;contracting office code
"RTN","PRCHAAC1",101,0)
 S $P(PRCSEG,HLFS,36)=$G(PRCMN)        ;modification number (amendment #)
"RTN","PRCHAAC1",102,0)
 S $P(PRCSEG,HLFS,38)=$G(PRCRMC)       ;reason for mod. (amend authority)
"RTN","PRCHAAC1",103,0)
 S HLA("HLS",5)=PRCSEG
"RTN","PRCHAAC1",104,0)
 ;
"RTN","PRCHAAC1",105,0)
 ; Call HL7 to build/send message and get its number (PRCMID)
"RTN","PRCHAAC1",106,0)
GEN D GENERATE^HLMA(PRCPROT,"LM",1,.PRCRSULT,"",.PRCOPTNS)
"RTN","PRCHAAC1",107,0)
 I $P(PRCRSULT,U,1)]"" S PRCMID=$P(PRCRSULT,U,1)
"RTN","PRCHAAC1",108,0)
 S PRCSUB=$S(PRCMID>0:"PRCHAAC1;"_PRCMID,1:"PRCHAAC1;"_"No MID")
"RTN","PRCHAAC1",109,0)
MAIL2 ;
"RTN","PRCHAAC1",110,0)
 S MSG(1,0)="The following Purchase Order transaction has been sent "
"RTN","PRCHAAC1",111,0)
 S MSG(2,0)="to the Austin Automation Center (AAC) to report"
"RTN","PRCHAAC1",112,0)
 S MSG(3,0)="required FPDS information. Please keep this information"
"RTN","PRCHAAC1",113,0)
 S MSG(4,0)="for two weeks for tracking purposes."
"RTN","PRCHAAC1",114,0)
 S MSG(5,0)=" "
"RTN","PRCHAAC1",115,0)
 S MSG(6,0)="Purchase Order Number: "_$E(PRCROOT,1,3)_"-"_$E(PRCROOT,4,9)
"RTN","PRCHAAC1",116,0)
 S MSG(7,0)=" "
"RTN","PRCHAAC1",117,0)
 S MSG(8,0)="The HL7 Message # is: "_PRCMID
"RTN","PRCHAAC1",118,0)
 S XMSUB="Message for PO #: "_$E(PRCROOT,1,3)_"-"_$E(PRCROOT,4,9)_" to the AAC"
"RTN","PRCHAAC1",119,0)
 ; Get approving official for a delivery order, certified invoice, etc.
"RTN","PRCHAAC1",120,0)
 I $D(^PRC(442,PRCHPO,10)) D
"RTN","PRCHAAC1",121,0)
 . I $P(^PRC(442,PRCHPO,23),U,11)="D" S PRCAPPO=$P(^PRC(442,PRCHPO,10,1,0),U,2)
"RTN","PRCHAAC1",122,0)
 . E  S PRCAPPO=$P(^PRC(442,PRCHPO,10,1,0),U,2)
"RTN","PRCHAAC1",123,0)
 ;
"RTN","PRCHAAC1",124,0)
 ; Get approving official for an order created by a purchasing agent
"RTN","PRCHAAC1",125,0)
 I $P($G(^PRC(442,PRCHPO,23)),U,11)="" D
"RTN","PRCHAAC1",126,0)
 . I '$D(^PRC(442,PRCHPO,13)) Q
"RTN","PRCHAAC1",127,0)
 . S PRC2237=$P(^PRC(442,PRCHPO,13,0),U,3)
"RTN","PRCHAAC1",128,0)
 . S PRCAPPO=$P(^PRC(442,PRCHPO,13,PRC2237,0),U,2)
"RTN","PRCHAAC1",129,0)
 ;
"RTN","PRCHAAC1",130,0)
 ; Get authorized buyer for all POs
"RTN","PRCHAAC1",131,0)
 S PRCPPA=$P(^PRC(442,PRCHPO,1),U,10)
"RTN","PRCHAAC1",132,0)
 S XMDUZ=PRCDUZ
"RTN","PRCHAAC1",133,0)
 S XMY(PRCPPA)=""
"RTN","PRCHAAC1",134,0)
 S:$G(PRCAPPO)'="" XMY(PRCAPPO)=""
"RTN","PRCHAAC1",135,0)
 S XMTEXT="MSG("
"RTN","PRCHAAC1",136,0)
 D ^XMD
"RTN","PRCHAAC1",137,0)
 ;
"RTN","PRCHAAC1",138,0)
 D LOG^PRCHAAC2 ;log record of outgoing message to the AAC
"RTN","PRCHAAC1",139,0)
 ; Keep track of any error found
"RTN","PRCHAAC1",140,0)
 I $P(PRCRSULT,U,2,3)]"",+PRCMID=0 D
"RTN","PRCHAAC1",141,0)
 . S PRCMID=$P(PRCRSULT,U,2,3)
"RTN","PRCHAAC1",142,0)
 . S PRCERR=1
"RTN","PRCHAAC1",143,0)
 . D REC^PRCHAAC2
"RTN","PRCHAAC1",144,0)
 K HLA,HL,HLFS,HLCS,HLRS
"RTN","PRCHAAC1",145,0)
 Q
"VER")
8.0^22.0
"^DD",440,440,18.3,0)
DUN & BRADSTREET #^FX^^7;12^S:$E(X,1,3)="DUN" X=$E(X,4,99) K:X'?9N&(X'?13N) X
"^DD",440,440,18.3,1,0)
^.1
"^DD",440,440,18.3,1,1,0)
440^DB^MUMPS
"^DD",440,440,18.3,1,1,1)
S ^PRC(440,"DB","DUN"_$E(X,1,30),DA)=""
"^DD",440,440,18.3,1,1,2)
K ^PRC(440,"DB","DUN"_$E(X,1,30),DA)
"^DD",440,440,18.3,1,1,"%D",0)
^^1^1^2960618^^
"^DD",440,440,18.3,1,1,"%D",1,0)
This cross reference enables lookup by Dun & Bradstreet #.
"^DD",440,440,18.3,1,1,"DT")
2960307
"^DD",440,440,18.3,3)
ANSWER MUST BE EITHER 9 OR 13 DIGITS IN LENGTH
"^DD",440,440,18.3,21,0)
^^2^2^2940218^^
"^DD",440,440,18.3,21,1,0)
This is the vendor's Dun & Bradstreet number,
"^DD",440,440,18.3,21,2,0)
if applicable.
"^DD",440,440,18.3,"DT")
3070313
"^DD",440.3,440.3,18.3,0)
DUN & BRADSTREET #^FX^^7;12^S:$E(X,1,3)="DUN" X=$E(X,4,99) K:X'?9N&(X'?13N) X
"^DD",440.3,440.3,18.3,3)
ANSWER MUST BE EITHER 9 OR 13 DIGITS IN LENGTH
"^DD",440.3,440.3,18.3,21,0)
^^2^2^2940218^^
"^DD",440.3,440.3,18.3,21,1,0)
This is the vendor's Dun & Bradstreet number,
"^DD",440.3,440.3,18.3,21,2,0)
if applicable.
"^DD",440.3,440.3,18.3,"DT")
3070313
"BLD",5011,6)
^93
**END**
**END**

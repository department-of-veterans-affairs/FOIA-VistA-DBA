Released IB*2*200 SEQ #185
Extracted from mail message
**KIDS**:IB*2.0*200^

**INSTALL NAME**
IB*2.0*200
"BLD",3660,0)
IB*2.0*200^INTEGRATED BILLING^0^3030224^y
"BLD",3660,1,0)
^^2^2^3021223^
"BLD",3660,1,1,0)
This patch provides a means of batch entry for provider ID's and a quick 
"BLD",3660,1,2,0)
method of manually entering provider ID's.
"BLD",3660,4,0)
^9.64PA^^
"BLD",3660,"ABPKG")
n
"BLD",3660,"KRN",0)
^9.67PA^8989.52^19
"BLD",3660,"KRN",.4,0)
.4
"BLD",3660,"KRN",.4,"NM",0)
^9.68A^^
"BLD",3660,"KRN",.401,0)
.401
"BLD",3660,"KRN",.402,0)
.402
"BLD",3660,"KRN",.403,0)
.403
"BLD",3660,"KRN",.5,0)
.5
"BLD",3660,"KRN",.84,0)
.84
"BLD",3660,"KRN",3.6,0)
3.6
"BLD",3660,"KRN",3.8,0)
3.8
"BLD",3660,"KRN",9.2,0)
9.2
"BLD",3660,"KRN",9.8,0)
9.8
"BLD",3660,"KRN",9.8,"NM",0)
^9.68A^3^2
"BLD",3660,"KRN",9.8,"NM",1,0)
IBCEP9^^0^B82786820
"BLD",3660,"KRN",9.8,"NM",3,0)
IBCEP9B^^0^B40515997
"BLD",3660,"KRN",9.8,"NM","B","IBCEP9",1)

"BLD",3660,"KRN",9.8,"NM","B","IBCEP9B",3)

"BLD",3660,"KRN",19,0)
19
"BLD",3660,"KRN",19.1,0)
19.1
"BLD",3660,"KRN",101,0)
101
"BLD",3660,"KRN",409.61,0)
409.61
"BLD",3660,"KRN",771,0)
771
"BLD",3660,"KRN",870,0)
870
"BLD",3660,"KRN",8989.51,0)
8989.51
"BLD",3660,"KRN",8989.52,0)
8989.52
"BLD",3660,"KRN",8994,0)
8994
"BLD",3660,"KRN","B",.4,.4)

"BLD",3660,"KRN","B",.401,.401)

"BLD",3660,"KRN","B",.402,.402)

"BLD",3660,"KRN","B",.403,.403)

"BLD",3660,"KRN","B",.5,.5)

"BLD",3660,"KRN","B",.84,.84)

"BLD",3660,"KRN","B",3.6,3.6)

"BLD",3660,"KRN","B",3.8,3.8)

"BLD",3660,"KRN","B",9.2,9.2)

"BLD",3660,"KRN","B",9.8,9.8)

"BLD",3660,"KRN","B",19,19)

"BLD",3660,"KRN","B",19.1,19.1)

"BLD",3660,"KRN","B",101,101)

"BLD",3660,"KRN","B",409.61,409.61)

"BLD",3660,"KRN","B",771,771)

"BLD",3660,"KRN","B",870,870)

"BLD",3660,"KRN","B",8989.51,8989.51)

"BLD",3660,"KRN","B",8989.52,8989.52)

"BLD",3660,"KRN","B",8994,8994)

"BLD",3660,"QUES",0)
^9.62^^
"BLD",3660,"REQB",0)
^9.611^1^1
"BLD",3660,"REQB",1,0)
IB*2.0*137^2
"BLD",3660,"REQB","B","IB*2.0*137",1)

"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321
"PKG",200,22,1,"PAH",1,0)
200^3030224^2469
"PKG",200,22,1,"PAH",1,1,0)
^^2^2^3030224
"PKG",200,22,1,"PAH",1,1,1,0)
This patch provides a means of batch entry for provider ID's and a quick 
"PKG",200,22,1,"PAH",1,1,2,0)
method of manually entering provider ID's.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","IBCEP9")
0^1^B82786820
"RTN","IBCEP9",1,0)
IBCEP9 ;ALB/TMP - MASS UPDATE OF PROVIDER ID FROM FILE OR MANUAL ;08-NOV-00
"RTN","IBCEP9",2,0)
 ;;2.0;INTEGRATED BILLING;**137,200**;21-MAR-94
"RTN","IBCEP9",3,0)
 ;
"RTN","IBCEP9",4,0)
EN ; Get parameters and mass input provider id by ins co
"RTN","IBCEP9",5,0)
 N A,DA,DIC,DIE,DIK,DIR,DR,POP,Q,Q0,X,Y,Y3,Z,Z0
"RTN","IBCEP9",6,0)
 N IBCND,IBCU,IBCT,IBDELIM,IBFILE,IBFILEN,IBFILEP,IBFORMAT
"RTN","IBCEP9",7,0)
 N IBFT,IBINFILE,IBINS,IBL,IBN,IBOK,IBOPEN,IBPOS,IBPT,IBQUIT
"RTN","IBCEP9",8,0)
 N IBQUIT1,IBQUOTES,IBRA,IBS,IBSA,IBSTART,IBSRC,IBVERIFY,IBVNAME
"RTN","IBCEP9",9,0)
 K ^TMP("IBPID_IN",$J),^TMP("IBPID-ERR",$J),^TMP("IBPID",$J)
"RTN","IBCEP9",10,0)
 S IBQUIT=0
"RTN","IBCEP9",11,0)
1 ; Select INSURANCE COMPANY NAME:
"RTN","IBCEP9",12,0)
 G:IBQUIT ENQ
"RTN","IBCEP9",13,0)
 S IBQUIT1=0
"RTN","IBCEP9",14,0)
 S DIC(0)="AEMQ",DIC="^DIC(36," D ^DIC
"RTN","IBCEP9",15,0)
 I Y'>0 G ENQ
"RTN","IBCEP9",16,0)
 S IBINS=+Y
"RTN","IBCEP9",17,0)
2 ; get data source
"RTN","IBCEP9",18,0)
 G:IBQUIT ENQ
"RTN","IBCEP9",19,0)
 S IBQUIT1=0
"RTN","IBCEP9",20,0)
 S DIR(0)="SA^M:Manual Entry;F:Entry from file"
"RTN","IBCEP9",21,0)
 S DIR("A")="PROVIDER ID DATA SOURCE: ",DIR("B")="Manual Entry"
"RTN","IBCEP9",22,0)
 S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",23,0)
 I Y=""!("FM"'[Y)!IBQUIT1 G 1
"RTN","IBCEP9",24,0)
 S IBSRC=Y,IBVERIFY=0
"RTN","IBCEP9",25,0)
 S IBVERIFY=(Y="M")
"RTN","IBCEP9",26,0)
 I 'IBVERIFY D  G:IBQUIT ENQ G:IBQUIT 2
"RTN","IBCEP9",27,0)
 . S DIR(0)="YA",DIR("A")="DO YOU WANT TO VIEW/VERIFY EACH ENTRY BEFORE IT GETS UPDATED?: "
"RTN","IBCEP9",28,0)
 . S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",29,0)
 . I Y=1 S IBVERIFY=1
"RTN","IBCEP9",30,0)
 ;
"RTN","IBCEP9",31,0)
 G:IBSRC="M" 4
"RTN","IBCEP9",32,0)
21 ; get parameters for file type
"RTN","IBCEP9",33,0)
 G:IBQUIT ENQ
"RTN","IBCEP9",34,0)
 S IBQUIT1=0
"RTN","IBCEP9",35,0)
 S DIR(0)="SA^D:DELIMITED;F:FIXED LENGTH",DIR("B")="D",DIR("A")="SELECT FILE FORMAT: "
"RTN","IBCEP9",36,0)
 S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",37,0)
 I IBQUIT1 G 2
"RTN","IBCEP9",38,0)
 S IBPOS=Y
"RTN","IBCEP9",39,0)
 I IBPOS="D" D  G:IBQUIT1 21
"RTN","IBCEP9",40,0)
 . S DIR(0)="FA^1:1",DIR("B")=",",DIR("A")="DELIMITER CHARACTER: "
"RTN","IBCEP9",41,0)
 . S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",42,0)
 . Q:IBQUIT1
"RTN","IBCEP9",43,0)
 . S $P(IBPOS,U,2)=Y
"RTN","IBCEP9",44,0)
 . S DIR(0)="YA",DIR("B")="NO",DIR("A")="ARE QUOTES WITHIN A FIELD DOUBLE QUOTED?: "
"RTN","IBCEP9",45,0)
 . S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1,,,1)
"RTN","IBCEP9",46,0)
 . Q:IBQUIT1
"RTN","IBCEP9",47,0)
 . S $P(IBPOS,U,3)=Y
"RTN","IBCEP9",48,0)
3 ; select external file name
"RTN","IBCEP9",49,0)
 G:IBQUIT ENQ
"RTN","IBCEP9",50,0)
 S IBQUIT1=0
"RTN","IBCEP9",51,0)
 G:IBSRC="M" 2
"RTN","IBCEP9",52,0)
 S DIR(0)="FA^1:60"
"RTN","IBCEP9",53,0)
 S DIR("A")="FILE NAME PATH: ",DIR("B")=$$PWD^%ZISH
"RTN","IBCEP9",54,0)
 S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",55,0)
 G:IBQUIT1 2
"RTN","IBCEP9",56,0)
 S IBFILEP=$P(Y,U)
"RTN","IBCEP9",57,0)
 S DIR(0)="FA^1:60"
"RTN","IBCEP9",58,0)
 S DIR("A")="FILE NAME: "
"RTN","IBCEP9",59,0)
 S IBSA("*")=""
"RTN","IBCEP9",60,0)
 S DIR("?")="^S Y3=$$LIST^%ZISH(IBFILEP,""IBSA"",""IBRA"") I Y3=1 S Y3="""" F  S Y3=$O(IBRA(Y3)) Q:Y3=""""  W !,Y3"
"RTN","IBCEP9",61,0)
 S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1,,,1)
"RTN","IBCEP9",62,0)
 G:IBQUIT1 2
"RTN","IBCEP9",63,0)
 S IBFILEN=$P(Y,U)
"RTN","IBCEP9",64,0)
 K ^TMP($J),IBRA,Y3
"RTN","IBCEP9",65,0)
 N Y S Y=$$FTG^%ZISH(IBFILEP,IBFILEN,$NA(^TMP($J,1)),2)
"RTN","IBCEP9",66,0)
 I Y=0 W !,"FILE ",IBFILEP,IBFILEN," COULD NOT BE FOUND OR COULD NOT BE OPENED",! G 3
"RTN","IBCEP9",67,0)
 S IBFILE=IO
"RTN","IBCEP9",68,0)
4 ; select Provider ID Type
"RTN","IBCEP9",69,0)
 G:IBQUIT ENQ
"RTN","IBCEP9",70,0)
 S IBQUIT1=0
"RTN","IBCEP9",71,0)
 S DIR(0)="355.9,.06"
"RTN","IBCEP9",72,0)
 I IBSRC="M" S Z=$P($G(^IBE(355.97,+$$PPTYP^IBCEP0(IBINS),0)),U) S:Z'="" DIR("B")=Z
"RTN","IBCEP9",73,0)
 S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",74,0)
 G:Y=""!IBQUIT1 3
"RTN","IBCEP9",75,0)
 S IBPTYP=$P(Y,U)
"RTN","IBCEP9",76,0)
5 ; select Forms Type
"RTN","IBCEP9",77,0)
 G:IBQUIT ENQ
"RTN","IBCEP9",78,0)
 S IBQUIT1=0
"RTN","IBCEP9",79,0)
 S DIR(0)="355.9,.04r",DIR("B")="BOTH UB92 AND HCFA 1500 FORMS"
"RTN","IBCEP9",80,0)
 S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",81,0)
 G:IBQUIT1 4
"RTN","IBCEP9",82,0)
 I Y=""!("012"'[Y) G 5
"RTN","IBCEP9",83,0)
 S IBFT=$P(Y,U)
"RTN","IBCEP9",84,0)
6 ; select Bill Care Type
"RTN","IBCEP9",85,0)
 G:IBQUIT ENQ
"RTN","IBCEP9",86,0)
 S IBQUIT1=0
"RTN","IBCEP9",87,0)
 S DIR(0)="355.9,.05r",DIR("B")="BOTH INPATIENT AND OUTPATIENT"
"RTN","IBCEP9",88,0)
 S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",89,0)
 G:IBQUIT1 5
"RTN","IBCEP9",90,0)
 I Y=""!("0123"'[$P(Y,U)) G 6
"RTN","IBCEP9",91,0)
 S IBCT=$P(Y,U)
"RTN","IBCEP9",92,0)
 ;
"RTN","IBCEP9",93,0)
 S IBCND=$$CAREUN^IBCEP3(IBINS,IBPTYP,IBFT,IBCT,IBCT=3)
"RTN","IBCEP9",94,0)
7 ; get Care Unit
"RTN","IBCEP9",95,0)
 G:IBQUIT ENQ
"RTN","IBCEP9",96,0)
 S IBQUIT1=0
"RTN","IBCEP9",97,0)
 I IBCND D  G:IBQUIT1 6
"RTN","IBCEP9",98,0)
 . S DIR(0)="355.9,.03O"
"RTN","IBCEP9",99,0)
 . S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",100,0)
 . Q:IBQUIT1
"RTN","IBCEP9",101,0)
 . S IBCU=$P(Y,U)
"RTN","IBCEP9",102,0)
 . I IBCU="" W !!,$J("",22),"***** WARNING *****",!," YOU WILL NEED TO MANUALLY ENTER THE CARE UNIT FOR EACH PROVIDER",!!
"RTN","IBCEP9",103,0)
 ;
"RTN","IBCEP9",104,0)
 ; Manual entry to get providers from VistA
"RTN","IBCEP9",105,0)
 I IBSRC="M" D MANUAL^IBCEP9B G:IBQUIT1 6
"RTN","IBCEP9",106,0)
 ; For 'OTHER' files ask position/length or delimiter/piece for data
"RTN","IBCEP9",107,0)
 I IBSRC="F" D  I IBQUIT1 G:'IBCND 6 G 7
"RTN","IBCEP9",108,0)
 . F Z="PROV. SSN^SSN^15^1","PROV. NAME^NAM^30","PROV. HCFA ID^PROF_ID^15","PROV. UB-92 ID^INST_ID^15" D  Q:IBQUIT1
"RTN","IBCEP9",109,0)
 .. I $P(IBPOS,U)'="D" D
"RTN","IBCEP9",110,0)
 ... N X
"RTN","IBCEP9",111,0)
 ... I IBFT=0!(IBFT=1) Q:Z["PROF_ID"  I Z["INST_ID" S $P(Z,U)="PROV. ID"
"RTN","IBCEP9",112,0)
 ... I IBFT=2 Q:Z["INST_ID"
"RTN","IBCEP9",113,0)
 ... S DIR("A")="START POSITION OF "_$P(Z,U)_" FIELD: "
"RTN","IBCEP9",114,0)
 ... S DIR(0)="NA"_$S($P(Z,U,4)!($P(Z,U)["PROV. ID")!($P(Z,U)["_ID"):"",1:"O")_"^1:250"
"RTN","IBCEP9",115,0)
 ... W ! S X=$$DIR1^IBCEP9B(.DIR,Z,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",116,0)
 ... Q:IBQUIT1
"RTN","IBCEP9",117,0)
 ... I X>0 D
"RTN","IBCEP9",118,0)
 .... S IBPOS($P(Z,U,2))=X
"RTN","IBCEP9",119,0)
 .... S DIR("A")="LENGTH OF "_$P(Z,U)_" FIELD: "
"RTN","IBCEP9",120,0)
 .... S DIR(0)="NA"_$S($P(Z,U,3):"^1:"_$P(Z,U,3),1:"")
"RTN","IBCEP9",121,0)
 .... S X=$$DIR1^IBCEP9B(.DIR,Z,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",122,0)
 .... Q:IBQUIT1
"RTN","IBCEP9",123,0)
 .... S $P(IBPOS($P(Z,U,2)),U,2)=IBPOS($P(Z,U,2))+X-1
"RTN","IBCEP9",124,0)
 .. ;
"RTN","IBCEP9",125,0)
 .. I $P(IBPOS,U)="D" D
"RTN","IBCEP9",126,0)
 ... I IBFT=0!(IBFT=1) Q:Z["PROF_ID"  I Z["INST_ID" S $P(Z,U)="PROV. ID"
"RTN","IBCEP9",127,0)
 ... I IBFT=2 Q:Z["INST_ID"
"RTN","IBCEP9",128,0)
 ... W ! S DIR("A")="STARTING '"_$P(IBPOS,U,2)_"' PIECE # OF "_$P(Z,U)_" FIELD: "
"RTN","IBCEP9",129,0)
 ... S DIR(0)="NA"_$S($P(Z,U,4)!($P(Z,U)["PROV. ID")!($P(Z,U)["_ID"):"",1:"O")
"RTN","IBCEP9",130,0)
 ... S X=$$DIR1^IBCEP9B(.DIR,Z,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",131,0)
 ... Q:IBQUIT1
"RTN","IBCEP9",132,0)
 ... I X>0 D
"RTN","IBCEP9",133,0)
 .... S (DIR("B"),IBPOS($P(Z,U,2)))=X
"RTN","IBCEP9",134,0)
 .... S DIR("A")="ENDING '"_$P(IBPOS,U,2)_"' PIECE # OF "_$P(Z,U)_" FIELD: "
"RTN","IBCEP9",135,0)
 .... S DIR(0)="NA"_$S($P(Z,U,4):"",1:"O")_U_(IBPOS($P(Z,U,2)))_":99"
"RTN","IBCEP9",136,0)
 .... S DIR("?")="JUST PRESS THE ENTER KEY IF THIS FIELD IS CONTAINED IN ONLY 1 PIECE"
"RTN","IBCEP9",137,0)
 .... S Y=$$DIR1^IBCEP9B(.DIR,Z,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9",138,0)
 .... Q:IBQUIT1
"RTN","IBCEP9",139,0)
 .... W ! I Y>0,Y'=IBPOS($P(Z,U,2)) S $P(IBPOS($P(Z,U,2)),U,2)=Y
"RTN","IBCEP9",140,0)
 .. ;
"RTN","IBCEP9",141,0)
 . Q:IBQUIT1
"RTN","IBCEP9",142,0)
 . D READFILE
"RTN","IBCEP9",143,0)
 . ;
"RTN","IBCEP9",144,0)
P1 ;
"RTN","IBCEP9",145,0)
 S Z="" F  S Z=$O(^TMP("IBPID_IN",$J,Z)) Q:Z=""  S Z0=0 F  S Z0=$O(^TMP("IBPID_IN",$J,Z,Z0)) Q:'Z0  S Q=$G(^(Z0)) D  G:IBQUIT ENQ
"RTN","IBCEP9",146,0)
 . ;
"RTN","IBCEP9",147,0)
 . I IBSRC="M" D  Q
"RTN","IBCEP9",148,0)
 .. D DISP^IBCEP9B(Q,0,IBINS,IBPTYP,IBFT,IBCT,$G(IBCU),,IBSRC)
"RTN","IBCEP9",149,0)
 .. ; Manually add IDs
"RTN","IBCEP9",150,0)
 .. S IBN=$$DUP(+Z0_";VA(200,",IBINS,$S($G(IBCU)'="":IBCU,1:"*N/A*"),IBFT,IBCT,IBPTYP)
"RTN","IBCEP9",151,0)
 .. I 'IBN D  Q:IBQUIT!(IBN'>0)
"RTN","IBCEP9",152,0)
 ... S IBN=$$ADDID^IBCEP9B(Z0,IBINS,$G(IBCU),IBFT,IBCT,IBPTYP,,.IBQUIT)
"RTN","IBCEP9",153,0)
 .. S DIE="^IBA(355.9,",DR=".07",DA=+IBN D ^DIE
"RTN","IBCEP9",154,0)
 .. I $D(Y)!($P($G(^IBA(355.9,+IBN,0)),U,7)="") D
"RTN","IBCEP9",155,0)
 ... I $P(IBN,U,3) S DA=+IBN,DIK="^IBA(355.9," D ^DIK
"RTN","IBCEP9",156,0)
 ... S DIR(0)="YA",DIR("B")="NO",DIR("A")="DO YOU WANT TO STOP ENTERING PROVIDER IDs?: "
"RTN","IBCEP9",157,0)
 ... S Y=$$DIR(.DIR,.IBQUIT,.IBQUIT1,,1,1)
"RTN","IBCEP9",158,0)
 ... I Y=1 S IBQUIT=1
"RTN","IBCEP9",159,0)
 .. S IBID=$P($G(^IBA(355.9,+IBN,0)),U,7)
"RTN","IBCEP9",160,0)
 .. S:$L(IBID) ^TMP("IBPID_IN",$J,U,Z0,"INST_ID")=IBID
"RTN","IBCEP9",161,0)
 .. I IBID="" K ^TMP("IBPID_IN",$J,U,Z0)
"RTN","IBCEP9",162,0)
 .. I IBQUIT=1 F  S Z0=$O(^TMP("IBPID_IN",$J,U,Z0)) Q:Z0=""  K ^TMP("IBPID_IN",$J,U,Z0) ; user wants to stop, remove all remaining names from list
"RTN","IBCEP9",163,0)
 . ;
"RTN","IBCEP9",164,0)
 . S IBOK=1
"RTN","IBCEP9",165,0)
 . N IBX,IBID
"RTN","IBCEP9",166,0)
 . M IBX=^TMP("IBPID_IN",$J,Z,Z0)
"RTN","IBCEP9",167,0)
 . I IBSRC="F" S IBID=$S(IBFT=0!(IBFT=1):$G(IBX("INST_ID")),1:$G(IBX("PROF_ID")))
"RTN","IBCEP9",168,0)
 . I $G(IBVERIFY) D  ; Display record, ask OK to file id's
"RTN","IBCEP9",169,0)
 .. D DISP^IBCEP9B(Q,0,IBINS,IBPTYP,IBFT,IBCT,$G(IBCU),,IBSRC)
"RTN","IBCEP9",170,0)
 .. W !,"PROVIDER ID: ",IBID
"RTN","IBCEP9",171,0)
 .. S DIR("A")="OK TO FILE THIS ID FOR THIS PROVIDER?: ",DIR(0)="YA",DIR("B")="NO"
"RTN","IBCEP9",172,0)
 .. S Y=$$DIR(.DIR,,,,1,1)
"RTN","IBCEP9",173,0)
 .. I Y'=1 D  Q  ; Send to error array
"RTN","IBCEP9",174,0)
 ... S IBOK=0
"RTN","IBCEP9",175,0)
 ... S ^TMP("IBPID-ERR",$J,2,$P(IBX,U),$P(IBX,U,2)_" ","PROV ID")=IBID
"RTN","IBCEP9",176,0)
 ... S ^TMP("IBPID_IN",$J,U,Z0,0)="NO PRINT"
"RTN","IBCEP9",177,0)
 ... N Z1
"RTN","IBCEP9",178,0)
 ... S Z1="" F  S Z1=$O(IBX(Z1)) Q:Z1=""  I $G(IBX(Z1))'="",Z1'["_ID" S ^TMP("IBPID-ERR",$J,2,$P(IBX,U),$P(IBX,U,2)_" ",Z1)=IBX(Z1)
"RTN","IBCEP9",179,0)
 . I IBOK D  ; Add/update the record
"RTN","IBCEP9",180,0)
 .. I IBSRC="F" D
"RTN","IBCEP9",181,0)
 ... I IBID'="" D
"RTN","IBCEP9",182,0)
 .... S IBN=$$ADDID^IBCEP9B(+Z0,IBINS,$G(IBCU),IBFT,IBCT,IBPTYP,,.IBQUIT)
"RTN","IBCEP9",183,0)
 .... I IBQUIT D:IBN>0  Q
"RTN","IBCEP9",184,0)
 ..... S DA=+IBN,DIK="^IBA(355.9," D ^DIK
"RTN","IBCEP9",185,0)
 .... I IBN>0 S DIE="^IBA(355.9,",DA=+IBN,DR=".07////"_IBID D ^DIE
"RTN","IBCEP9",186,0)
 .. ;
"RTN","IBCEP9",187,0)
 ;
"RTN","IBCEP9",188,0)
ENQ ; Print report, exit
"RTN","IBCEP9",189,0)
 I ($D(^TMP("IBPID-ERR",$J)))!($D(^TMP("IBPID_IN",$J))) D
"RTN","IBCEP9",190,0)
 . N %ZIS,ZTSAVE,ZTRTN,ZTDESC,IBDUZ
"RTN","IBCEP9",191,0)
 . S IBDUZ=$G(DUZ)
"RTN","IBCEP9",192,0)
 . S %ZIS="QM" D ^%ZIS Q:POP
"RTN","IBCEP9",193,0)
 . I $D(IO("Q")) K IO("Q") D  D ^%ZTLOAD K ZTSK D HOME^%ZIS Q
"RTN","IBCEP9",194,0)
 .. S ZTRTN="PRTERR^IBCEP9B",ZTSAVE("^TMP(""IBPID-ERR"",$J,")=""
"RTN","IBCEP9",195,0)
 .. S ZTSAVE("^TMP(""IBPID_IN"",$J,")="",ZTSAVE("IB*")=""
"RTN","IBCEP9",196,0)
 .. S ZTDESC="IB - PROVIDER ID BATCH UPDATE ERROR LOG"
"RTN","IBCEP9",197,0)
 . U IO
"RTN","IBCEP9",198,0)
 . D PRTERR^IBCEP9B
"RTN","IBCEP9",199,0)
 K ^TMP("IBPID_IN",$J),^TMP("IBPID-ERR",$J),^TMP("IBPID",$J)
"RTN","IBCEP9",200,0)
 U IO(0)
"RTN","IBCEP9",201,0)
 Q
"RTN","IBCEP9",202,0)
 ;
"RTN","IBCEP9",203,0)
READFILE ; Read records stored in ^TMP($J
"RTN","IBCEP9",204,0)
 ;
"RTN","IBCEP9",205,0)
 N D,DA,DIC,IBCT,IBP,IBQUIT,IBS,IBX,P,P3,X,Y,Z
"RTN","IBCEP9",206,0)
 S (IBCT,IBQUIT,IBQUIT1,IBS)=0
"RTN","IBCEP9",207,0)
 U IO(0)
"RTN","IBCEP9",208,0)
 ;
"RTN","IBCEP9",209,0)
 F  S IBCT=$O(^TMP($J,IBCT)) Q:'IBCT  S X=$G(^(IBCT)) I X'="" D  Q:IBQUIT
"RTN","IBCEP9",210,0)
 . D  Q:IBQUIT
"RTN","IBCEP9",211,0)
 .. I $P($G(IBPOS),U)="D" D
"RTN","IBCEP9",212,0)
 ... D CSV^IBCEP9B(X,.IBX,$P(IBPOS,U,2),$P(IBPOS,U,3))
"RTN","IBCEP9",213,0)
 ... D DSETUP^IBCEP9B(.IBX,.IBPOS,.P) K IBX
"RTN","IBCEP9",214,0)
 .. I $P($G(IBPOS),U)'="D" D FSETUP^IBCEP9B(X,.IBPOS,.P)
"RTN","IBCEP9",215,0)
 . ;
"RTN","IBCEP9",216,0)
 . I $G(P(1))'="" S P(1)=$$NOPUNCT^IBCEF(P(1),1),X=P(1),D="SSN",DIC="^VA(200,",DIC(0)="" D IX^DIC
"RTN","IBCEP9",217,0)
 . S IBP=+Y,IBVNAME=$P(Y,U,2)
"RTN","IBCEP9",218,0)
 . I $S($G(P(1))="":1,1:Y'>0) D  Q
"RTN","IBCEP9",219,0)
 .. S ^TMP("IBPID-ERR",$J,1,$S($G(P(1))'="":P(1),1:"NO SSN"),$G(P(2))_" ","??")=""
"RTN","IBCEP9",220,0)
 .. N IBID
"RTN","IBCEP9",221,0)
 .. S IBID=$S(IBFT=0!(IBFT=1):$G(P("INST_ID")),1:$G(P("PROF_ID")))
"RTN","IBCEP9",222,0)
 .. S ^TMP("IBPID-ERR",$J,1,$S($G(P(1))'="":P(1),1:"NO SSN"),$G(P(2))_" ","PROV ID")=IBID
"RTN","IBCEP9",223,0)
 . ;
"RTN","IBCEP9",224,0)
 . S ^TMP("IBPID_IN",$J,U,IBP)=P(1)_U_P(2)_U_IBVNAME
"RTN","IBCEP9",225,0)
 . F Q0=0,"TID","UPIN","INST_ID","PROF_ID","CU","CRED" S ^TMP("IBPID_IN",$J,U,IBP,Q0)=$G(P(Q0))
"RTN","IBCEP9",226,0)
 Q
"RTN","IBCEP9",227,0)
 ;
"RTN","IBCEP9",228,0)
DUP(IBPRV,IBINS,IBCU,IBFT,IBCT,IBPTYP) ; Check if provider id record already exists in file 355.9
"RTN","IBCEP9",229,0)
 Q +$O(^IBA(355.9,"AUNIQ",IBPRV,IBINS,IBCU,IBFT,IBCT,IBPTYP,0))
"RTN","IBCEP9",230,0)
 ;
"RTN","IBCEP9",231,0)
ERREOF ; Traps EOF error on file read for non-DSM systems
"RTN","IBCEP9",232,0)
 N IBERROR S IBERROR=$$EC^%ZOSV
"RTN","IBCEP9",233,0)
 I IBERROR["ENDOFFILE" D CLOSE(.IBOPEN) G ENQ
"RTN","IBCEP9",234,0)
 D ^%ZTER
"RTN","IBCEP9",235,0)
 Q
"RTN","IBCEP9",236,0)
 ;
"RTN","IBCEP9",237,0)
CLOSE(IBOPEN) ; Close file
"RTN","IBCEP9",238,0)
 D CLOSE^%ZISH("IBINFILE") S IBOPEN=0
"RTN","IBCEP9",239,0)
 Q
"RTN","IBCEP9",240,0)
 ;
"RTN","IBCEP9",241,0)
DIR(DIR,IBQUIT,IBQUIT1,X,IBW1,IBW2) ; Standard call to ^DIR
"RTN","IBCEP9",242,0)
 ;  Inputs DIR array
"RTN","IBCEP9",243,0)
 ;  Returns IBQUIT,IBQUIT1,X if passed by reference
"RTN","IBCEP9",244,0)
 ;    AND
"RTN","IBCEP9",245,0)
 ;      FUNCTION returns the value of Y
"RTN","IBCEP9",246,0)
 ;  IBW1 = 1 if initial write ! should be done
"RTN","IBCEP9",247,0)
 ;  IBW2 = 1 if last write ! should be done
"RTN","IBCEP9",248,0)
 N DIROUT,DTOUT,DUOUT,DA
"RTN","IBCEP9",249,0)
 W:$G(IBW1) ! D ^DIR K DIR W:$G(IBW2) !
"RTN","IBCEP9",250,0)
 S (IBQUIT,IBQUIT1)=0
"RTN","IBCEP9",251,0)
 S DIR("?")="Enter '^' to back up one prompt or '^^' to exit the option"
"RTN","IBCEP9",252,0)
 I $D(DIROUT) S (IBQUIT,IBQUIT1)=1
"RTN","IBCEP9",253,0)
 I $D(DTOUT)!$D(DUOUT) S IBQUIT1=1
"RTN","IBCEP9",254,0)
 Q Y
"RTN","IBCEP9",255,0)
 ;
"RTN","IBCEP9",256,0)
ERR ; Error list
"RTN","IBCEP9",257,0)
 ;; INVALID OR MISSING SSN - NO PROVIDER MATCH FOUND
"RTN","IBCEP9",258,0)
 ;; NO UPDATE PER USER REQUEST
"RTN","IBCEP9",259,0)
 ;;
"RTN","IBCEP9B")
0^3^B40515997
"RTN","IBCEP9B",1,0)
IBCEP9B ;ALB/TMP - UPDATE OF PROVIDER ID FROM FILE UTILITIES ;14-NOV-00
"RTN","IBCEP9B",2,0)
 ;;2.0;INTEGRATED BILLING;**137,200**;21-MAR-94
"RTN","IBCEP9B",3,0)
 ;
"RTN","IBCEP9B",4,0)
CSV(X,IBX,IBDEL,IBQUOTES) ; Parse out fields from a delimited file
"RTN","IBCEP9B",5,0)
 ; X = data string in CSV format to be parsed
"RTN","IBCEP9B",6,0)
 ; IBX = array returned if passed by reference, subscripted by field #
"RTN","IBCEP9B",7,0)
 ; IBDEL = the delimiter
"RTN","IBCEP9B",8,0)
 ; If IBQUOTES=1, quoted strings are double quoted within a field
"RTN","IBCEP9B",9,0)
 N FC,I,PC,QCT,QM,QM2,QM4,STR,TPC
"RTN","IBCEP9B",10,0)
 S FC=0,TPC=$L(X,IBDEL),QM=$C(34),QM2=QM_QM,QM4=QM2_QM2
"RTN","IBCEP9B",11,0)
 F PC=1:1:TPC D
"RTN","IBCEP9B",12,0)
 . S STR=$P(X,IBDEL,PC)
"RTN","IBCEP9B",13,0)
 . S FC=FC+1
"RTN","IBCEP9B",14,0)
 . I (STR=QM2)!(STR=QM4) S IBX(FC)="" Q
"RTN","IBCEP9B",15,0)
 . I $E(STR,1)=QM D
"RTN","IBCEP9B",16,0)
 .. F QCT=0:1 Q:$E(STR,QCT+1)'=QM
"RTN","IBCEP9B",17,0)
 .. F  Q:($E(STR,1,QCT)=$E(STR,$L(STR)-(QCT-1),$L(STR)))  S PC=PC+1 Q:PC>TPC  S STR=STR_IBDEL_$P(X,IBDEL,PC)
"RTN","IBCEP9B",18,0)
 .. I PC>TPC S IBX(0)="-1^UNMATCHED QUOTE MARKS" Q
"RTN","IBCEP9B",19,0)
 .. F  Q:$E(STR,1)'=QM  I $E(STR,$L(STR))=QM S STR=$E(STR,2,$L(STR)-1)
"RTN","IBCEP9B",20,0)
 . I IBQUOTES,STR[QM2 D
"RTN","IBCEP9B",21,0)
 .. F I=1:1:$L(STR) I $E(STR,I,I+1)=QM2 S STR=$E(STR,1,I)_$E(STR,I+2,9999)
"RTN","IBCEP9B",22,0)
 . S IBX(FC)=STR
"RTN","IBCEP9B",23,0)
 Q
"RTN","IBCEP9B",24,0)
 ;
"RTN","IBCEP9B",25,0)
MANUAL ; Manual entry to get providers from VistA
"RTN","IBCEP9B",26,0)
 N IBCRED,IBDA,IBNAM,IBSSN
"RTN","IBCEP9B",27,0)
 ; S IBCNT=0 ; this looks like extraneous code, IBCNT not used anywhere.
"RTN","IBCEP9B",28,0)
 F  D  I X=""!(X["^") Q
"RTN","IBCEP9B",29,0)
 . S Y=$$LOOKUP^XUSER Q:X=""  I X["^" S IBQUIT1=1 Q
"RTN","IBCEP9B",30,0)
 . S IBDA=+Y,IBNAM=$P(Y,U,2)
"RTN","IBCEP9B",31,0)
 . S IBSSN=$$GET1^DIQ(200,IBDA_",",9,"I")
"RTN","IBCEP9B",32,0)
 . S IBCRED=$$GET1^DIQ(200,IBDA_",",10.6,"I")
"RTN","IBCEP9B",33,0)
 . S ^TMP("IBPID_IN",$J,U,IBDA)=IBSSN_U_IBNAM_" "_IBCRED
"RTN","IBCEP9B",34,0)
 Q
"RTN","IBCEP9B",35,0)
 ;
"RTN","IBCEP9B",36,0)
DIR1(DIR,Z,IBQUIT,IBQUIT1) ; Ask position
"RTN","IBCEP9B",37,0)
 N X,Y
"RTN","IBCEP9B",38,0)
 S Y=$$DIR^IBCEP9(.DIR,.IBQUIT,.IBQUIT1)
"RTN","IBCEP9B",39,0)
 I IBQUIT1 S Y="" G DIRQ
"RTN","IBCEP9B",40,0)
 I $P(Z,U,4),Y'>0 S Y="",(IBQUIT1,IBQUIT)=1
"RTN","IBCEP9B",41,0)
 I Y'>0 S Y=""
"RTN","IBCEP9B",42,0)
DIRQ Q Y
"RTN","IBCEP9B",43,0)
 ;
"RTN","IBCEP9B",44,0)
DISP(Q,IBID,IBINS,IBPTYP,IBFT,IBCT,IBCU,IBPID,IBSRC) ; Display provider data
"RTN","IBCEP9B",45,0)
 ;  includes ID data if IBID=1
"RTN","IBCEP9B",46,0)
 ; Q = SSN^provider name from input^provider name from file #200
"RTN","IBCEP9B",47,0)
 ; IBPID = array of id numbers to be stored
"RTN","IBCEP9B",48,0)
 N A,IBL,Q0,Z
"RTN","IBCEP9B",49,0)
 S $P(Q,U,2)=$$FLEN($P(Q,U,2))
"RTN","IBCEP9B",50,0)
 S Q0(1)="PROVIDER : "_$P(Q,U)_$S($P(Q,U,2)'="":" ("_$P(Q,U,2)_")",1:"")_$S(IBSRC="F":" <- input file data",1:"")
"RTN","IBCEP9B",51,0)
 S Q0(2)="" S:IBSRC="F" Q0(2)=$J("("_$P(Q,U,3),22+$L($P(Q,U,3)))_") <- VA match"
"RTN","IBCEP9B",52,0)
 S IBL=0
"RTN","IBCEP9B",53,0)
 D DISP^IBCEP4("Q0",IBINS,IBPTYP,IBFT,IBCT,3,.IBL)
"RTN","IBCEP9B",54,0)
 I $G(IBCU)'="" S Q0(IBL+1)="CARE UNIT: "_IBCU
"RTN","IBCEP9B",55,0)
 W !
"RTN","IBCEP9B",56,0)
 S A=0 F  S A=$O(Q0(A)) Q:'A  W !,Q0(A)
"RTN","IBCEP9B",57,0)
 I $G(IBID),$O(IBPID(""))'="" D  ; Display id's to be filed
"RTN","IBCEP9B",58,0)
 . W ! S Z="" F  S Z=$O(IBPID(Z)) Q:Z=""  I IBPID(Z)'="" D
"RTN","IBCEP9B",59,0)
 .. W !,$S(Z="TID":"TAX ID NUMBER",Z="INST_ID":"INSTITUTIONAL ID",Z="PROF_ID":"PROFESSIONAL ID",Z="UPIN":"UPIN",1:"PROV ID"),": ",IBPID(Z)
"RTN","IBCEP9B",60,0)
 Q
"RTN","IBCEP9B",61,0)
 ;
"RTN","IBCEP9B",62,0)
DSETUP(IBX,IBPOS,P) ; Set up the subscripted array P with the correct data
"RTN","IBCEP9B",63,0)
 ; from IBX(pc #) based on the parameters in array IBPOS
"RTN","IBCEP9B",64,0)
 ; RETURNED: P(data index)=data value (pass by reference)
"RTN","IBCEP9B",65,0)
 N Q,Z,Z0
"RTN","IBCEP9B",66,0)
 S Z=$G(IBPOS("SSN")),P(1)=""
"RTN","IBCEP9B",67,0)
 F Z0=+Z:1:$S('$P(Z,U,2):Z,1:$P(Z,U,2)) S P(1)=P(1)_$S(P(1)'=""&($G(IBX(Z0))'=""):" ",1:"")_$G(IBX(Z0))
"RTN","IBCEP9B",68,0)
 S Z=$G(IBPOS("NAM")),P(2)=""
"RTN","IBCEP9B",69,0)
 F Z0=+Z:1:$S('$P(Z,U,2):Z,1:$P(Z,U,2)) S P(2)=P(2)_$S(P(2)'=""&($G(IBX(Z0))'=""):" ",1:"")_$G(IBX(Z0))
"RTN","IBCEP9B",70,0)
 F Q="TID","UPIN","INST_ID","PROF_ID","CRED","CU","LIC" D
"RTN","IBCEP9B",71,0)
 . S Z=$G(IBPOS(Q)),P(Q)=""
"RTN","IBCEP9B",72,0)
 . Q:'Z
"RTN","IBCEP9B",73,0)
 . F Z0=+Z:1:$S('$P(Z,U,2):Z,1:$P(Z,U,2)) S P(Q)=P(Q)_$S(P(Q)'=""&($G(IBX(Z0))'=""):" ",1:"")_$G(IBX(Z0))
"RTN","IBCEP9B",74,0)
 Q
"RTN","IBCEP9B",75,0)
 ;
"RTN","IBCEP9B",76,0)
FSETUP(X,IBPOS,P) ;Set up the subscripted array P with the correct data
"RTN","IBCEP9B",77,0)
 ; from record data in X, based on the parameters in array IBPOS for a
"RTN","IBCEP9B",78,0)
 ; fixed length data field format
"RTN","IBCEP9B",79,0)
 ; RETURNED: P(data index)=data value (pass by reference)
"RTN","IBCEP9B",80,0)
 ;
"RTN","IBCEP9B",81,0)
 N Q,Z
"RTN","IBCEP9B",82,0)
 S Z=$G(IBPOS("SSN")),P(1)=""
"RTN","IBCEP9B",83,0)
 S P(1)=$E(X,+Z,$S($P(Z,U,2):$P(Z,U,2),1:+Z))
"RTN","IBCEP9B",84,0)
 S Z=$G(IBPOS("NAM")),P(2)=""
"RTN","IBCEP9B",85,0)
 S P(2)=$E(X,+Z,$S($P(Z,U,2):$P(Z,U,2),1:+Z))
"RTN","IBCEP9B",86,0)
 F Q="TID","UPIN","INST_ID","PROF_ID","CRED","CU","LIC" D
"RTN","IBCEP9B",87,0)
 . S Z=$G(IBPOS(Q)),P(Q)=""
"RTN","IBCEP9B",88,0)
 . Q:'Z
"RTN","IBCEP9B",89,0)
 . S P(Q)=$$FLEN($E(X,+Z,$S($P(Z,U,2):$P(Z,U,2),1:+Z)))
"RTN","IBCEP9B",90,0)
 Q
"RTN","IBCEP9B",91,0)
 ;
"RTN","IBCEP9B",92,0)
FLEN(IBX) ; Strip out trailing spaces from field
"RTN","IBCEP9B",93,0)
 ; FUNCTION returns stripped data
"RTN","IBCEP9B",94,0)
 N Z,IB,IB1
"RTN","IBCEP9B",95,0)
 S IB1=IBX,IB=$TR(IB1," ")
"RTN","IBCEP9B",96,0)
 I IB'="" F Z=$L(IB1):-1:1 I $E(IB1,Z)'=" " S IB=$E(IB1,1,Z) Q
"RTN","IBCEP9B",97,0)
 Q IB
"RTN","IBCEP9B",98,0)
 ;
"RTN","IBCEP9B",99,0)
ADDID(IB200,IBINS,IBCU,IBFT,IBCT,IBPTYP,IBQUIT,IBQUIT1) ; Add ID record (file 355.9) if not already there
"RTN","IBCEP9B",100,0)
 N DIC,X,Y,DO,DD,DLAYGO,DIR
"RTN","IBCEP9B",101,0)
 S X=IB200_";VA(200,"
"RTN","IBCEP9B",102,0)
 S Y=+$O(^IBA(355.9,"AUNIQ",X,$S(IBINS:IBINS,1:"*ALL*"),$S($G(IBCU)'="":IBCU,1:"*N/A*"),IBFT,IBCT,IBPTYP,0))
"RTN","IBCEP9B",103,0)
 I 'Y D
"RTN","IBCEP9B",104,0)
 . S DIC(0)="L",DIC="^IBA(355.9,",DLAYGO=355.9,DIC("DR")=".02////"_IBINS_$S($G(IBCU)'="":";.03////"_IBCU,1:"")_";.04////"_IBFT_";.05////"_IBCT_";.06////"_IBPTYP
"RTN","IBCEP9B",105,0)
 . D FILE^DICN K DIC,DO,DD,DLAYGO
"RTN","IBCEP9B",106,0)
 I Y'>0 D  Q
"RTN","IBCEP9B",107,0)
 . S DIR(0)="AE",DIR("A",1)="A PROBLEM WAS ENCOUNTERED ADDING THIS PROVIDER ID RECORD - NO RECORD ADDED",DIR("A")="PRESS ENTER TO CONTINUE "
"RTN","IBCEP9B",108,0)
 . S Y=$$DIR^IBCEP9(.DIR,.IBQUIT,.IBQUIT1,,1,1)
"RTN","IBCEP9B",109,0)
 S IBN=Y
"RTN","IBCEP9B",110,0)
 Q $S(IBN>0:IBN,1:0)
"RTN","IBCEP9B",111,0)
 ;
"RTN","IBCEP9B",112,0)
PRTERR ; Prints error report
"RTN","IBCEP9B",113,0)
 N IBPAGE,Z,Z0,Z1,Z2,Z3,IBLCT,IBSTOP,IBHDT
"RTN","IBCEP9B",114,0)
 W:$E(IOST,1,2)["C-" @IOF
"RTN","IBCEP9B",115,0)
 I $D(^TMP("IBPID-ERR",$J)) D
"RTN","IBCEP9B",116,0)
 . S IBSTOP=0,IBLCT=$$HDR(.IBPAGE,.IBSTOP,.IBHDT)
"RTN","IBCEP9B",117,0)
 . S Z=0 F  S Z=$O(^TMP("IBPID-ERR",$J,Z)) Q:'Z  W !!,$P($T(ERR+Z^IBCEP9),";;",2)_":" D
"RTN","IBCEP9B",118,0)
 .. S Z0=""
"RTN","IBCEP9B",119,0)
 .. F  S Z0=$O(^TMP("IBPID-ERR",$J,Z,Z0)) Q:Z0=""  S IBLCT=IBLCT+1 S:(IBLCT+5)>IOSL IBLCT=$$HDR(.IBPAGE,.IBSTOP) Q:IBSTOP  D
"RTN","IBCEP9B",120,0)
 ... S Z1="" F  S Z1=$O(^TMP("IBPID-ERR",$J,Z,Z0,Z1)) Q:Z1=""  W !,$E(Z0_$J("",9),1,9) W:$P(Z1,U)'="" "  "_$E($P(Z1,U)_$J("",40),1,40) D
"RTN","IBCEP9B",121,0)
 .... S Z2="" F  S Z2=$O(^TMP("IBPID-ERR",$J,Z,Z0,Z1,Z2)) Q:Z2=""  S Z3=$G(^(Z2)) I Z3'="" D
"RTN","IBCEP9B",122,0)
 ..... W "  "_$S(Z2="CU":"CARE UNIT",Z2="CRED":"CREDENTIALS",Z2="TID":"TAX ID #",Z2="LIC_ST":"LICENSE STATE",Z2="LIC":"LICENSE",Z2="UPIN":"UPIN",1:Z2)_": "_Z3
"RTN","IBCEP9B",123,0)
FILED ; Prints all filed records
"RTN","IBCEP9B",124,0)
 I $D(^TMP("IBPID_IN",$J)) D
"RTN","IBCEP9B",125,0)
 . S IBSTOP=0,IBLCT=$$HDR(.IBPAGE,.IBSTOP,.IBHDT)
"RTN","IBCEP9B",126,0)
 . W !!," RECORDS SELECTED FOR FILING:"
"RTN","IBCEP9B",127,0)
 . S Z0=""
"RTN","IBCEP9B",128,0)
 . F  S Z0=$O(^TMP("IBPID_IN",$J,U,Z0)) Q:Z0=""  S IBLCT=IBLCT+1 S:(IBLCT+5)>IOSL IBLCT=$$HDR(.IBPAGE,.IBSTOP) Q:IBSTOP  D
"RTN","IBCEP9B",129,0)
 .. I $G(^TMP("IBPID_IN",$J,U,Z0,0))="NO PRINT" S:IBLCT>6 IBLCT=IBLCT-1 Q
"RTN","IBCEP9B",130,0)
 .. S Z=^TMP("IBPID_IN",$J,U,Z0)
"RTN","IBCEP9B",131,0)
 .. W !,$P(Z,U,1),?12,$P(Z,U,2),?52,$G(^TMP("IBPID_IN",$J,U,Z0,"INST_ID"))
"RTN","IBCEP9B",132,0)
 ;
"RTN","IBCEP9B",133,0)
 I $E(IOST,1,2)["C-",'IBSTOP K DIR S DIR(0)="E" D ^DIR K DIR
"RTN","IBCEP9B",134,0)
 W @IOF
"RTN","IBCEP9B",135,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","IBCEP9B",136,0)
 I '$D(ZTQUEUED) W ! D ^%ZISC
"RTN","IBCEP9B",137,0)
 Q
"RTN","IBCEP9B",138,0)
HDR(PG,IBSTOP,IBHDT) ; Prints error report header, function returns # of lines used
"RTN","IBCEP9B",139,0)
 ; PG = the last page # printed
"RTN","IBCEP9B",140,0)
 ; IBHDT = the run date of the report
"RTN","IBCEP9B",141,0)
 N Z,IBLCT
"RTN","IBCEP9B",142,0)
 S IBLCT=0
"RTN","IBCEP9B",143,0)
 I '$G(PG) S IBHDT="RUN DATE: "_$$FMTE^XLFDT($$NOW^XLFDT(),2)_U_"RUN BY: "_$P($G(^VA(200,+$G(IBDUZ),0)),U)
"RTN","IBCEP9B",144,0)
 I $G(PG),$E(IOST,1,2)["C-" K DIR S DIR(0)="E" D ^DIR K DIR S IBSTOP=('Y) G:IBSTOP HDRQ  W @IOF
"RTN","IBCEP9B",145,0)
 S PG=$G(PG)+1
"RTN","IBCEP9B",146,0)
 W $J("",23)_"BATCH UPDATE OF PROVIDER ID REPORT"_$J("",13)_"PAGE: ",PG
"RTN","IBCEP9B",147,0)
 W !,$J("",(80-$L($P($G(IBHDT),U)))\2),$P($G(IBHDT),U)
"RTN","IBCEP9B",148,0)
 W !,$J("",(80-$L($P($G(IBHDT),U,2)))\2),$P($G(IBHDT),U,2)
"RTN","IBCEP9B",149,0)
 W !!,"    INSURANCE CO: "_$P($G(^DIC(36,+$G(IBINS),0)),U)
"RTN","IBCEP9B",150,0)
 W !,"PROVIDER ID TYPE: "_$P($G(^IBE(355.97,+$G(IBPTYP),0)),U)
"RTN","IBCEP9B",151,0)
 W !,"       FORM TYPE: "_$$EXPAND^IBTRE(355.91,.04,$G(IBFT))
"RTN","IBCEP9B",152,0)
 W !,"       CARE TYPE: "_$$EXPAND^IBTRE(355.91,.05,$G(IBCT))
"RTN","IBCEP9B",153,0)
 S IBLCT=7
"RTN","IBCEP9B",154,0)
 I $G(IBCU)'="" W !,$J("",7)_"CARE UNIT: "_IBCU S IBLCT=IBLCT+1
"RTN","IBCEP9B",155,0)
 S Z="",$P(Z,"=",81)="",IBLCT=IBLCT+1
"RTN","IBCEP9B",156,0)
 W !,Z
"RTN","IBCEP9B",157,0)
HDRQ Q $G(IBLCT)
"RTN","IBCEP9B",158,0)
 ;
"VER")
8.0^22.0
**END**
**END**

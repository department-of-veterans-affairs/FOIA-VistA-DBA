Released PX*1*146 SEQ #112
Extracted from mail message
**KIDS**:PX*1.0*146^

**INSTALL NAME**
PX*1.0*146
"BLD",5543,0)
PX*1.0*146^PCE PATIENT CARE ENCOUNTER^0^3040630^y
"BLD",5543,1,0)
^^3^3^3040524^
"BLD",5543,1,1,0)
This will address the CASELOAD PROFILE BY CLINIC [PXRR CASELOAD
"BLD",5543,1,2,0)
PROFILE BY CL] option of the PATIENT CARE ENCOUNTER (PCE) package.
"BLD",5543,1,3,0)
The report did not correctly display unscheduled encounters.
"BLD",5543,4,0)
^9.64PA^^
"BLD",5543,"KRN",0)
^9.67PA^8989.52^19
"BLD",5543,"KRN",.4,0)
.4
"BLD",5543,"KRN",.401,0)
.401
"BLD",5543,"KRN",.402,0)
.402
"BLD",5543,"KRN",.403,0)
.403
"BLD",5543,"KRN",.403,"NM",0)
^9.68A^^0
"BLD",5543,"KRN",.5,0)
.5
"BLD",5543,"KRN",.84,0)
.84
"BLD",5543,"KRN",3.6,0)
3.6
"BLD",5543,"KRN",3.8,0)
3.8
"BLD",5543,"KRN",9.2,0)
9.2
"BLD",5543,"KRN",9.8,0)
9.8
"BLD",5543,"KRN",9.8,"NM",0)
^9.68A^4^3
"BLD",5543,"KRN",9.8,"NM",2,0)
PXRRPCR^^0^B19732050
"BLD",5543,"KRN",9.8,"NM",3,0)
PXRRPCE^^0^B14983972
"BLD",5543,"KRN",9.8,"NM",4,0)
PXRRPCE3^^0^B26611053
"BLD",5543,"KRN",9.8,"NM","B","PXRRPCE",3)

"BLD",5543,"KRN",9.8,"NM","B","PXRRPCE3",4)

"BLD",5543,"KRN",9.8,"NM","B","PXRRPCR",2)

"BLD",5543,"KRN",19,0)
19
"BLD",5543,"KRN",19.1,0)
19.1
"BLD",5543,"KRN",101,0)
101
"BLD",5543,"KRN",409.61,0)
409.61
"BLD",5543,"KRN",771,0)
771
"BLD",5543,"KRN",870,0)
870
"BLD",5543,"KRN",8989.51,0)
8989.51
"BLD",5543,"KRN",8989.52,0)
8989.52
"BLD",5543,"KRN",8994,0)
8994
"BLD",5543,"KRN","B",.4,.4)

"BLD",5543,"KRN","B",.401,.401)

"BLD",5543,"KRN","B",.402,.402)

"BLD",5543,"KRN","B",.403,.403)

"BLD",5543,"KRN","B",.5,.5)

"BLD",5543,"KRN","B",.84,.84)

"BLD",5543,"KRN","B",3.6,3.6)

"BLD",5543,"KRN","B",3.8,3.8)

"BLD",5543,"KRN","B",9.2,9.2)

"BLD",5543,"KRN","B",9.8,9.8)

"BLD",5543,"KRN","B",19,19)

"BLD",5543,"KRN","B",19.1,19.1)

"BLD",5543,"KRN","B",101,101)

"BLD",5543,"KRN","B",409.61,409.61)

"BLD",5543,"KRN","B",771,771)

"BLD",5543,"KRN","B",870,870)

"BLD",5543,"KRN","B",8989.51,8989.51)

"BLD",5543,"KRN","B",8989.52,8989.52)

"BLD",5543,"KRN","B",8994,8994)

"BLD",5543,"QUES",0)
^9.62^^
"BLD",5543,"REQB",0)
^9.611^1^1
"BLD",5543,"REQB",1,0)
PX*1.0*121^2
"BLD",5543,"REQB","B","PX*1.0*121",1)

"MBREQ")
0
"PKG",413,-1)
1^1
"PKG",413,0)
PCE PATIENT CARE ENCOUNTER^PX^Patient Care Encounter (VA Parent package)^
"PKG",413,20,0)
^9.402P^^
"PKG",413,22,0)
^9.49I^1^1
"PKG",413,22,1,0)
1.0^2960812^2960913^12537
"PKG",413,22,1,"PAH",1,0)
146^3040630
"PKG",413,22,1,"PAH",1,1,0)
^^3^3^3040630
"PKG",413,22,1,"PAH",1,1,1,0)
This will address the CASELOAD PROFILE BY CLINIC [PXRR CASELOAD
"PKG",413,22,1,"PAH",1,1,2,0)
PROFILE BY CL] option of the PATIENT CARE ENCOUNTER (PCE) package.
"PKG",413,22,1,"PAH",1,1,3,0)
The report did not correctly display unscheduled encounters.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","PXRRPCE")
0^3^B14983972
"RTN","PXRRPCE",1,0)
PXRRPCE ;HIN/MjK - Clinic Specific Workload Reports ;8/28/96
"RTN","PXRRPCE",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**3,146**;Aug 12, 1996
"RTN","PXRRPCE",3,0)
EN D CLEAN^PXRRPCEQ K ^TMP($J) I '$D(PXRRDEMG) S VAUTD=1
"RTN","PXRRPCE",4,0)
CLSTOP ;_._._._._._._._._._._Clinic Vs Stop Code_._._._._._._._._._._.
"RTN","PXRRPCE",5,0)
 D HDR^PXRRPCR,MEAN^PXRRPCR:$D(PXRRDEMG) S PXRI=1,DIR(0)="SA^H:HOSPITAL LOCATION;S:CLINIC STOP CODE",DIR("A")="Select clinic(s) by (H)OSPITAL LOCATION or CLINIC (S)TOP CODE: " D ^DIR K DIR G:$D(DIRUT) QT G STOP:Y="S" W !
"RTN","PXRRPCE",6,0)
CLIN ;_._._._._._._._._.Select Clinic for Report_._._._._._._._._.
"RTN","PXRRPCE",7,0)
 S DIC="^SC(",DIC(0)="QAENMZ",DIC("S")="I $P(^(0),U,3)=""C""!($P(^(0),U,3)=""Z"")",DIC("A")=$S(PXRI=1:"Select HOSPITAL LOCATION name: ",1:"Another HOSPITAL LOCATION name: ")
"RTN","PXRRPCE",8,0)
 D ^DIC I Y>0 S VAUTC=0 S:'$D(PXRI(+Y)) VAUTC(+Y)=+Y S PXRRCLIN(PXRI)=Y(0,0)_U_+Y,PXRI=PXRI+1,PXRI(+Y)="" G CLIN
"RTN","PXRRPCE",9,0)
 K DIC G QT:'$D(PXRRCLIN)!($D(DUOUT))
"RTN","PXRRPCE",10,0)
STOP ;_._._._._._._._._.Select Stop Code for Report_._._._._._._._._.
"RTN","PXRRPCE",11,0)
 I '$D(PXRRCLIN) W ! S DIC=40.7,DIC(0)="QAENMZ",DIC("A")="Select the CLINIC STOP code: ",DIC("S")="I $P($G(^(0)),U,3)=""""" D ^DIC K DIC G:Y<0 QT S PXRRSC=+Y,PXRSTPNM=Y(0,0)
"RTN","PXRRPCE",12,0)
DTRANGE ;_._._._._._._._._.Select Date Range For Values_._._._._._._._._.
"RTN","PXRRPCE",13,0)
 W !! S DIR(0)="DA^2931001:DT:PXEX",DIR("A")="Enter ENCOUNTER BEGINNING DATE: ",DIR("??")="^D BDT^PXRRPCR"
"RTN","PXRRPCE",14,0)
 D ^DIR K DIR G:Y'>0 QT S (PXRRBDT,SDBD)=Y+.0001,DIR(0)="DA^"_$P(SDBD,".")_":DT:PXEX",DIR("A")="Enter ENCOUNTER ENDING DATE: ",DIR("B")=$$FMTE^XLFDT(DT),DIR("??")="^D EDT^PXRRPCR" D ^DIR K DIR I Y'>0 G QT
"RTN","PXRRPCE",15,0)
 S (PXRREDT,SDED)=Y+.9999
"RTN","PXRRPCE",16,0)
ZIS W ! K IOP,IO("Q") S POP=0,%ZIS="QM" D ^%ZIS K %ZIS,IOP G:POP QT
"RTN","PXRRPCE",17,0)
 I $D(IO("Q")) K IOP S ZTRTN=$S($D(PXRRSC):"ST^PXRRPCE",1:"DEMOGR^PXRRPCE"),ZTDESC="PCE CLINICAL DATA REPORTS",ZTSAVE("PXR*")="",ZTSAVE("SD*")="",ZTSAVE("V*")="" D LOAD G QT
"RTN","PXRRPCE",18,0)
STOPCL U IO I $D(PXRRSC) D STPVAUTC
"RTN","PXRRPCE",19,0)
 G:$D(PXRRDEMG) DEMOGR
"RTN","PXRRPCE",20,0)
 ;_._._._._._._._._Clinic Workload Variables_._._._._._._._._._.
"RTN","PXRRPCE",21,0)
ST D:$D(PXRRSC)&('$D(PXRRCLIN)) STPVAUTC
"RTN","PXRRPCE",22,0)
 S VAUTD=1
"RTN","PXRRPCE",23,0)
 S SDCL="",(SDALL,SDADD,SDPRE)=0,SDF="D",SDRT="E",SDS="C",SDNAM=1
"RTN","PXRRPCE",24,0)
6 S (SDOB,SDPG,SDHR,SD1)=0 F I=0:0 S I=$S(VAUTC:$O(^SC(I)),1:$O(VAUTC(I))) Q:'I  D SET^SDCWL3
"RTN","PXRRPCE",25,0)
 I '$D(^TMP($J,"CL")),'$D(^("SC")) G NONE
"RTN","PXRRPCE",26,0)
REPORT G QT:'$D(^TMP($J))
"RTN","PXRRPCE",27,0)
VIS ;_._._._._._._._._._._._.Clinic Workload_._._._._._._._._._._._._
"RTN","PXRRPCE",28,0)
 I '$D(PXRRCASE)&('$D(PXRRDEMG)) D ^PXRRPCE1,^PXRRPCR1 G QT
"RTN","PXRRPCE",29,0)
ACTIVTY ;_._._._._._._._._._._._Caseload Activity_._._._._._._._._._._._.
"RTN","PXRRPCE",30,0)
 I $D(PXRRCASE) D ^PXRRPCE2,^PXRRPCR2 G QT
"RTN","PXRRPCE",31,0)
DEMOGR ;_._._._._._._._._._._._Caseload Demographics_._._._._._._._._._.
"RTN","PXRRPCE",32,0)
 I $D(PXRRDEMG) D  G QT
"RTN","PXRRPCE",33,0)
 .  S PXRC=0 F  S PXRC=$O(PXRRCLIN(PXRC)) Q:'PXRC  S PXRRCLIN=$P(PXRRCLIN(PXRC),U,2) D ^PXRRPCE3,CLEAN^PXRRPCEQ
"RTN","PXRRPCE",34,0)
 .  D:$D(^TMP($J,"CLINIC TOTALS")) MEAN^PXRRPCE5
"RTN","PXRRPCE",35,0)
 .  S PXR=0 F  S PXR=$O(PXRRCLIN(PXR)) Q:'PXR  S PXRRCLIN=$P(PXRRCLIN(PXR),U,2)  D ^PXRRPCR3
"RTN","PXRRPCE",36,0)
QT D ^%ZISC,^PXRRPCEQ Q
"RTN","PXRRPCE",37,0)
CQT K PXRRCLIN,PXRRBDT,PXRREDT,PXRSTPNM
"RTN","PXRRPCE",38,0)
NONE D HDR^PXRRPCR  W !?5,"o There were no appts for this clinic in this date range",!?5,"o Note: This report is run from patient appts., not clinic enrollment." G QT
"RTN","PXRRPCE",39,0)
LOAD D ^%ZTLOAD
"RTN","PXRRPCE",40,0)
 I $D(ZTSK)=0 W !,"Request Cancelled"
"RTN","PXRRPCE",41,0)
 E  W !,"Request queued, task number "_ZTSK
"RTN","PXRRPCE",42,0)
 S:'$D(ZTSK) X="^" I $D(ZTSK),'$D(ZTQUEUED) N POP D ^%ZISC G QT
"RTN","PXRRPCE",43,0)
 Q
"RTN","PXRRPCE",44,0)
STPVAUTC ;_._.Set up VAUTC array for Stop Code_._._.
"RTN","PXRRPCE",45,0)
 S (VAUTC,X)=0 F  S X=$O(^SC("AC","C",X)) Q:'X  I $P($G(^SC(X,0)),U,7)=PXRRSC D
"RTN","PXRRPCE",46,0)
 . I '$D(^SC(X,"I")) S VAUTC(X)=X,PXRRCLIN(PXRI)=$P(^SC(X,0),U)_U_X,PXRI=PXRI+1 Q
"RTN","PXRRPCE",47,0)
 . S Y=$G(^SC(X,"I")) I $P($G(Y),U,2)>$P($G(Y),U) S VAUTC(X)=X,PXRRCLIN(PXRI)=$P(^SC(X,0),U)_U_X,PXRI=PXRI+1
"RTN","PXRRPCE",48,0)
 Q
"RTN","PXRRPCE3")
0^4^B26611053
"RTN","PXRRPCE3",1,0)
PXRRPCE3 ;HIN/MjK - Clinic Specific Workload Reports ;6/7/96
"RTN","PXRRPCE3",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**121,146**;;Aug 12, 1996
"RTN","PXRRPCE3",3,0)
EN ;_._._._._._._.Visit Totals/ Patient Ages/ Unsched Totals_._._._._._.
"RTN","PXRRPCE3",4,0)
 ; Z = Visit Dt/Time
"RTN","PXRRPCE3",5,0)
 D INITVAR^PXRRPCE5 ;Initialize counter variables
"RTN","PXRRPCE3",6,0)
 S (X,Y)=0 F  S X=$O(PXRRCLIN(X)) Q:'X  S Y=Y+1,PXRCLNUM=Y
"RTN","PXRRPCE3",7,0)
 S PXRRY=PXRRYR F  S PXRRY=$O(^AUPNVSIT("B",PXRRY)) Q:'PXRRY!((PXRRY>PXRREDT))  S PXRRVIFN=0 F  S PXRRVIFN=$O(^AUPNVSIT("B",PXRRY,PXRRVIFN)) Q:'PXRRVIFN  I $P($G(^AUPNVSIT(PXRRVIFN,0)),U,22)=PXRRCLIN D
"RTN","PXRRPCE3",8,0)
 . S X=$P($G(^AUPNVSIT(PXRRVIFN,0)),U,7) Q:X'="A"&(X'="I")&(X'="S")
"RTN","PXRRPCE3",9,0)
 . S Z=$P(^AUPNVSIT(PXRRVIFN,0),U),DFN=$P(^AUPNVSIT(PXRRVIFN,0),U,5)
"RTN","PXRRPCE3",10,0)
 . ;_._._._._._._._.Demographics - Sessions, Ages_._._._._._._._.
"RTN","PXRRPCE3",11,0)
 . S PXRRTVS=PXRRTVS+1 I Z>PXRRBDT S PXRRSESS=$S($D(Z($P(Z,"."))):PXRRSESS,1:PXRRSESS+1),Z($P(Z,"."))=""
"RTN","PXRRPCE3",12,0)
 . D AGE
"RTN","PXRRPCE3",13,0)
 . ;_._._._._._._._._._All Clinic Patients_._._._._._._._._._
"RTN","PXRRPCE3",14,0)
 . S PXRRAPT=$P(Z,".") F  S PXRRAPT=$O(^DPT(DFN,"S",PXRRAPT)) Q:'PXRRAPT!(PXRRAPT>($$FMADD^XLFDT(PXRRAPT,1)))  I $P(^DPT(DFN,"S",PXRRAPT,0),U)=PXRRCLIN S:$P(^DPT(DFN,"S",PXRRAPT,0),U,7)=4 PXRRSXUN=PXRRSXUN+1
"RTN","PXRRPCE3",15,0)
 . S ^TMP($J,PXRRCLIN,"PATIENT APPTS",Z,DFN)=""
"RTN","PXRRPCE3",16,0)
 . S ^TMP($J,PXRRCLIN,"CLINIC PATIENTS",DFN)=""
"RTN","PXRRPCE3",17,0)
 . ;_._._._._._._._._._._._._Diagnoses_._._._._._._._._._._._._.
"RTN","PXRRPCE3",18,0)
 . ;B = V POV IEN ; C = ICD Code
"RTN","PXRRPCE3",19,0)
 . ;S B="" F  S B=$O(^AUPNVPOV("AD",PXRRVIFN,B)) Q:'B  S C=$P(^ICD9($P(^AUPNVPOV(B,0),U),0),U),C=$S('+C:C,1:+C) S:(C'?1"272.".E)&(C'?1"305.".E) C=$P(C,".") S ^TMP($J,PXRRCLIN,"ICD",Z,C,DFN)="",^TMP($J,PXRRCLIN,"ICD PAT",C,DFN,Z""
"RTN","PXRRPCE3",20,0)
 . S B="" F  S B=$O(^AUPNVPOV("AD",PXRRVIFN,B)) Q:'B  S C=$P($$ICDDX^ICDCODE($P(^AUPNVPOV(B,0),U)),U,2),C=$S('+C:C,1:+C) S:(C'?1"272.".E)&(C'?1"305.".E) C=$P(C,".") S ^TMP($J,PXRRCLIN,"ICD",Z,C,DFN)="",^TMP($J,PXRRCLIN,"ICD PAT",C,DFN,Z)=""
"RTN","PXRRPCE3",21,0)
MEDAGE ;_._._._._._._._._._._._._._Median Age_._._._._._._._._._._._._._._.
"RTN","PXRRPCE3",22,0)
 S X=0 F  S X=$O(^TMP($J,PXRRCLIN,"PATIENT AGE",X)) Q:'X  S DFN=0 F  S DFN=$O(^TMP($J,PXRRCLIN,"PATIENT AGE",X,DFN)) Q:'DFN  D
"RTN","PXRRPCE3",23,0)
 . S Y=$G(^TMP($J,PXRRCLIN,"PATIENT AGE",X,DFN))
"RTN","PXRRPCE3",24,0)
 . I (Y>PXRRBDT),(Y<PXRREDT) S PXRRAGE=PXRRAGE+1,Y(PXRRAGE)=X
"RTN","PXRRPCE3",25,0)
 S PXRRAGE=PXRRAGE\2,PXRRAG=$G(Y(PXRRAGE)) K Y
"RTN","PXRRPCE3",26,0)
 ;_._._._._._._._._._._._._._Diagnosis Totals_._._._._._._._._._._._._.
"RTN","PXRRPCE3",27,0)
 ;C = ICD ;E = date
"RTN","PXRRPCE3",28,0)
 Q:'$D(^TMP($J,PXRRCLIN,"CLINIC PATIENTS"))!'(PXRRSESS)
"RTN","PXRRPCE3",29,0)
 F C=272.2,272.4,250,401,414,305.1 S PXRR(C)=0
"RTN","PXRRPCE3",30,0)
 S E=0 F  S E=$O(^TMP($J,PXRRCLIN,"ICD",E)) Q:'E  I $D(^TMP($J,PXRRCLIN,"ICD",E,C)) S DFN=0 F  S DFN=$O(^TMP($J,PXRRCLIN,"ICD",E,C,DFN)) Q:'DFN  S PXRR(C)=$S('$D(C(DFN)):PXRR(C)+1,1:PXRR(C)),C(DFN)=""
"RTN","PXRRPCE3",31,0)
 K C S E=PXRRBDT F  S E=$O(^TMP($J,PXRRCLIN,"ICD",E)) Q:'E!(E>PXRREDT)  S C=0 F  S C=$O(^TMP($J,PXRRCLIN,"ICD",E,C)) Q:'C  S DFN=0 F  S DFN=$O(^TMP($J,PXRRCLIN,"ICD",E,C,DFN)) Q:'DFN  D
"RTN","PXRRPCE3",32,0)
 . I '$D(PXRR(C)) S PXRR(C)=0
"RTN","PXRRPCE3",33,0)
 . S PXRR(C)=$S('$D(C(C,DFN)):PXRR(C)+1,1:0),C(C,DFN)=""
"RTN","PXRRPCE3",34,0)
 K C S PXRR(272)=PXRR(272.4)+$G(PXRR(272.2)),PXRR(305)=0 F C=305.1:.01:305.13 S PXRR(305)=PXRR(305)+$G(PXRR(C))
"RTN","PXRRPCE3",35,0)
 S PXRRDM=$G(PXRR(250)),PXRRHTN=$G(PXRR(401)),PXRRCAD=$G(PXRR(414)),PXRRHLIP=PXRR(272),PXRRSMYR=PXRR(305)
"RTN","PXRRPCE3",36,0)
 ;_._._._._._._._._.Diabetes and Hypertensive Patients_._._._._._._._.
"RTN","PXRRPCE3",37,0)
 S PXRRHTDM=0,E=PXRRBDT F  S E=$O(^TMP($J,PXRRCLIN,"ICD",E)) Q:'E!(E>PXRREDT)  S DFN=0 F  S DFN=$O(^TMP($J,PXRRCLIN,"ICD",E,250,DFN)) Q:'DFN  I $D(^TMP($J,PXRRCLIN,"ICD PAT",401,DFN)) D
"RTN","PXRRPCE3",38,0)
 . S X=PXRRBDT F  S X=$O(^TMP($J,PXRRCLIN,"ICD PAT",401,DFN,X)) Q:'X  I X<PXRREDT S PXRRHTDM=PXRRHTDM+1
"RTN","PXRRPCE3",39,0)
 ; _._._._._._._._._._._Smokers with CAD DX_._._._._._._._._._._._._.
"RTN","PXRRPCE3",40,0)
 S PXRRCDSM=0,C=304 F  S C=$O(^TMP($J,PXRRCLIN,"ICD PAT",C)) Q:'C!(C>305.13)  S DFN=0 F  S DFN=$O(^(C,DFN)) Q:'DFN  S E=PXRRSXMO F  S E=$O(^(C,DFN,E)) Q:'E  I $D(^TMP($J,PXRRCLIN,"ICD PAT",414,DFN)) S PXRRCDSM=PXRRCDSM+1
"RTN","PXRRPCE3",41,0)
HBA1 ; _._._._._._._._._._.HTN AND/OR HBA1C w/ DM DX_._._._._._._._._._._._.
"RTN","PXRRPCE3",42,0)
 ;             **Site Specific Entries for Selected Labs**
"RTN","PXRRPCE3",43,0)
 S PX=$O(^PX(815,0)),C=250,(DFN,PXRRHBA1)=0,PXRRLED=(9999999.9999999-PXRRSXMO) F  S DFN=$O(^TMP($J,PXRRCLIN,"ICD PAT",C,DFN)) Q:'DFN  D
"RTN","PXRRPCE3",44,0)
 .  S PXRLRDFN=$P($G(^DPT(DFN,"LR")),U) Q:'PXRLRDFN  S L=0 F  S L=$O(^PX(815,PX,"RR5",L)) Q:'L  S X=$P(^(L,0),U),X=$P($P(^LAB(60,X,0),U,5),";",2),E=9999999.9999999-DT F  S E=$O(^LR(PXRLRDFN,"CH",E)) Q:'E!(E>PXRRLED)  D
"RTN","PXRRPCE3",45,0)
 .. S:+$P($G(^LR(PXRLRDFN,"CH",E,X)),U) PXRRHBA1=PXRRHBA1+$P($G(^LR(PXRLRDFN,"CH",E,X)),U),^TMP($J,PXRRCLIN,"HBA1C",DFN,E)=$P($G(^LR(PXRLRDFN,"CH",E,X)),U)
"RTN","PXRRPCE3",46,0)
 S (PXRRHBG7,PXRRHBPT,DFN)=0 F  S DFN=$O(^TMP($J,PXRRCLIN,"HBA1C",DFN)) Q:'DFN  S X=0 F  S X=$O(^TMP($J,PXRRCLIN,"HBA1C",DFN,X)) Q:'X  S PXRRHBPT=PXRRHBPT+1 D
"RTN","PXRRPCE3",47,0)
 . I $G(^TMP($J,PXRRCLIN,"HBA1C",DFN,X))>6.99,'$D(X(DFN))  S PXRRHBG7=PXRRHBG7+1
"RTN","PXRRPCE3",48,0)
 . S X(DFN)=""
"RTN","PXRRPCE3",49,0)
 K X I $G(PXRRHBA1)>0 S PXRRHBA1=PXRRHBA1/PXRRHBPT
"RTN","PXRRPCE3",50,0)
 S:'PXRRHBPT PXRRHBA1="N/A",PXRRHBG7=0
"RTN","PXRRPCE3",51,0)
SXUTTOT ;_._._._._._._._._.Quality Care & Util 7 other Totals_._._._._._._._.
"RTN","PXRRPCE3",52,0)
 D ^PXRRPCE4
"RTN","PXRRPCE3",53,0)
 I '$D(^TMP($J,PXRRCLIN,"CLINIC PATIENTS")) S ^TMP($J,PXRRCLIN,"PATIENT","NONE",PXRRCLIN)=""
"RTN","PXRRPCE3",54,0)
QT Q
"RTN","PXRRPCE3",55,0)
AGE ;_._._._._._._._._._.Calculate a patient's age_._._._._._._._._._.
"RTN","PXRRPCE3",56,0)
 I $D(^TMP($J,PXRRCLIN,"CLINIC PATIENTS",DFN)) S X=0 Q
"RTN","PXRRPCE3",57,0)
 D DEM^VADPT I VADM(4) S ^TMP($J,PXRRCLIN,"PATIENT AGE",VADM(4),DFN)=Z D KVAR^VADPT
"RTN","PXRRPCE3",58,0)
 Q
"RTN","PXRRPCR")
0^2^B19732050
"RTN","PXRRPCR",1,0)
PXRRPCR ;HIN/MjK - Clinic Specfic Workload Reports ;6/7/96
"RTN","PXRRPCR",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**146**;Aug 12, 1996
"RTN","PXRRPCR",3,0)
HDR D TITLE I $D(^TMP($J)) W @IOF,?(IOM-20),$E($$HTE^XLFDT($H),1,18)
"RTN","PXRRPCR",4,0)
 W @$S($D(^TMP($J)):"!?((IOM/2)-($L(PXRROPT)/2))",1:"!!?((IOM/2)-($L(PXRROPT)/2))"),PXRROPT,!!
"RTN","PXRRPCR",5,0)
 Q
"RTN","PXRRPCR",6,0)
ADMH W !,"Admission",?13,"Discharge",?30,"Patient",?61,"SSN",?69,"Room-Bed",!,"==========",?13,"========",?30,"=======",?57,"=========",?69,"======="
"RTN","PXRRPCR",7,0)
 Q
"RTN","PXRRPCR",8,0)
ERH W !,"ER Encounter Dt",?30,"Patient",?61,"SSN",!,"============",?30,"=======",?56,"============"
"RTN","PXRRPCR",9,0)
 Q
"RTN","PXRRPCR",10,0)
LABH W !,"LAB Date",?13,"Patient",?38,"SSN",?48,"Lab Test/Value",?73,"Hi/Low",!,"============",?13,"================",?35,"===========",?50,"=================",?73,"====="
"RTN","PXRRPCR",11,0)
 Q
"RTN","PXRRPCR",12,0)
DEMOG D HDR W ?1,"Clinic: ",$P($G(^SC(PXRRCLIN,0)),U),!
"RTN","PXRRPCR",13,0)
 W ?1,"Compared to the mean of: " D
"RTN","PXRRPCR",14,0)
 .  I $D(PXRSTPNM) W ?26,PXRSTPNM," Clinic Stop",!?26,"for ",PXRRCNUM," of ",PXRCLNUM," clinics with data" Q
"RTN","PXRRPCR",15,0)
 .  W ?27,$P($G(PXRRCLIN(1)),U) F I=2:1 Q:'$D(PXRRCLIN(I))  D
"RTN","PXRRPCR",16,0)
 .. I ($L($P(PXRRCLIN(I),U))+$X+3)<IOM W ", ",$P(PXRRCLIN(I),U) Q
"RTN","PXRRPCR",17,0)
 .. W !?27,$P($G(PXRRCLIN(I)),U)
"RTN","PXRRPCR",18,0)
 D LINE
"RTN","PXRRPCR",19,0)
 W ! I $D(^TMP($J,"CLINIC TOTALS",PXRRCLIN)) W ?1,"CASELOAD DEMOGRAPHICS for Encounter date range",?52,"|     Clinic     |",?72,"Overall" S Y=$P(PXRRBDT,".") D XD W !?1,Y," to " S Y=$P(PXRREDT,".") D XD S PXRREDT(1)=Y W Y D
"RTN","PXRRPCR",20,0)
 . W ?52,"|",?56,"#",?60,"|",?65,"%",?69,"|",?73,"Mean %" D DASH
"RTN","PXRRPCR",21,0)
 W ! Q
"RTN","PXRRPCR",22,0)
QLM D LINE W !?1,"QUALITY OF CARE MARKERS (6 mos. prior to ",PXRREDT(1),")",?61,"| Clinic",?71,"|Overall" S Y=$P(PXRRSXMO,".") D XD W !?1,Y," to " W PXRREDT(1),?61,"|   #",?71,"| Mean #" D DASH
"RTN","PXRRPCR",23,0)
 W ! Q
"RTN","PXRRPCR",24,0)
PREVMD D LINE W !?1,"PREVENTIVE MEDICINE (12 mos. prior to ",PXRREDT(1),")",?52,"|      Clinic      |Overall" S Y=$P(PXRRYR,".") D XD W !?1,Y," to " W PXRREDT(1),?52,"|    #",?61,"|   %",?71,"| Mean %" D DASH
"RTN","PXRRPCR",25,0)
 Q
"RTN","PXRRPCR",26,0)
UTIL D LINE W !?1,"UTILIZATION DATA (12 months prior to ",PXRREDT(1),?61,"| Number | Overall" S Y=$P(PXRRYR,".") D XD W !?1,Y," to " W PXRREDT(1),?61,"|   #    |   Mean #" D DASH
"RTN","PXRRPCR",27,0)
 Q
"RTN","PXRRPCR",28,0)
MEAN W ?1,"The overall mean values for this report will be for the clinic(s) selected",!?1,"which had encounters during the selected date range.",!
"RTN","PXRRPCR",29,0)
 Q
"RTN","PXRRPCR",30,0)
XD ;_._._._._._._._.Execute DD node for Date Format_._._._._._._._._._.
"RTN","PXRRPCR",31,0)
 S Y=$$FMTE^XLFDT(Y) Q
"RTN","PXRRPCR",32,0)
TITLE   ;_._._._._._.Set Common Title From Option file Name_._._._._.
"RTN","PXRRPCR",33,0)
 D OP^XQCHK S PXRROPT=$P(XQOPT,U,2)
"RTN","PXRRPCR",34,0)
 Q
"RTN","PXRRPCR",35,0)
COL ;_._._._._._._._._.Column Headings for WL report_._._._._._._._._
"RTN","PXRRPCR",36,0)
 W !?30,"|-------------PCE ENCOUNTERS DOCUMENTED----------------|"
"RTN","PXRRPCR",37,0)
 W ?89,"|---------SCHEDULING DATA------------|",!
"RTN","PXRRPCR",38,0)
 W ?30,"|-------E&M PATIENT CATEGORIES-------| NON  NO  TOTAL  |"
"RTN","PXRRPCR",39,0)
 W ?89,"|   WALK-INS   NO-SHOW   CANCELLED   |",!
"RTN","PXRRPCR",40,0)
 W ?0,"CLINIC NAME"
"RTN","PXRRPCR",41,0)
 W ?30,"|NEW   ESTABLISHED   CONSULT   OTHER | E&M  CPT ENCTRS |"
"RTN","PXRRPCR",42,0)
 W ?89,"|               APPTS     APPTS      |",!
"RTN","PXRRPCR",43,0)
 F I=1:1:127 W "="
"RTN","PXRRPCR",44,0)
 W ! Q
"RTN","PXRRPCR",45,0)
FTR ;_._._._._._._._._._._.Footer for WL report_._._._._._._._.__._._
"RTN","PXRRPCR",46,0)
 W !! F Z=1:1:127 W "="
"RTN","PXRRPCR",47,0)
 W !,?0,"TOTAL NUMBER OF CLINIC(S):",?64,$P($J(PXRRCN,4,1),".")
"RTN","PXRRPCR",48,0)
 W !,?0,"AVERAGE NUMBER OF PCE ENCOUNTERS PER CLINIC = ",?64,$J(PXRRAV,4,1)
"RTN","PXRRPCR",49,0)
 W !!,"This report presents a distribution of Clinic Encounters based"
"RTN","PXRRPCR",50,0)
 W " on CPT procedures associated with encounters. CPT",!
"RTN","PXRRPCR",51,0)
 W "Evaluation and Management (E&M) procedures are categorized to provide encounters by patient type, with non E&M and ",!,"no CPT procedures making up the remaining encounters."
"RTN","PXRRPCR",52,0)
 Q
"RTN","PXRRPCR",53,0)
BDT ;_._._.Help for Beginning Date Range_._._._.
"RTN","PXRRPCR",54,0)
 W !,"This is the beginning date for encounters that should be included in the creation of this report."
"RTN","PXRRPCR",55,0)
 Q
"RTN","PXRRPCR",56,0)
EDT ;_._._.Help for Ending Date Range_._._._.
"RTN","PXRRPCR",57,0)
 W !,"This is the ending date for encounters that should be included in the creation of this report."
"RTN","PXRRPCR",58,0)
 Q
"RTN","PXRRPCR",59,0)
LINE ;_._.Write a line_._.
"RTN","PXRRPCR",60,0)
 W ! F I=1:1:IOM W "_"
"RTN","PXRRPCR",61,0)
 Q
"RTN","PXRRPCR",62,0)
DASH ;_._.Write a line of dashes_._.
"RTN","PXRRPCR",63,0)
 W ! F I=1:1:IOM W "-"
"RTN","PXRRPCR",64,0)
 Q
"VER")
8.0^22
**END**
**END**

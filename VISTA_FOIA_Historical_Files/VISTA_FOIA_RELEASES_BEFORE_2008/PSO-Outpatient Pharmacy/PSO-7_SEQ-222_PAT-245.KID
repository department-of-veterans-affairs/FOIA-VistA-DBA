Released PSO*7*245 SEQ #222
Extracted from mail message
**KIDS**:PSO*7.0*245^

**INSTALL NAME**
PSO*7.0*245
"BLD",6176,0)
PSO*7.0*245^OUTPATIENT PHARMACY^0^3060824^y
"BLD",6176,1,0)
^^30^30^3060824^
"BLD",6176,1,1,0)
This patch adds three new Outpatient Pharmacy Application Programming
"BLD",6176,1,2,0)
Interfaces (APIs).
"BLD",6176,1,3,0)
 
"BLD",6176,1,4,0)
The first API (DIQ) requires five parameters to be passed in and data
"BLD",6176,1,5,0)
from the PRESCRIPTION file (#52) will be returned.  This API will invoke
"BLD",6176,1,6,0)
the EN^DIQ1 FileMan call and data will be returned to the calling
"BLD",6176,1,7,0)
application as specified in the EN^DIQ1 FileMan documentation.
"BLD",6176,1,8,0)
 
"BLD",6176,1,9,0)
The second API (STATUS) requires three parameters to be passed in and data
"BLD",6176,1,10,0)
from the STATUS field (#100) from the PRESCRIPTION file (#52) is
"BLD",6176,1,11,0)
returned.  This API will invoke the FIELD^DID FileMan call and data will
"BLD",6176,1,12,0)
be returned to the calling application as specified in the FIELD^DID
"BLD",6176,1,13,0)
FileMan documentation.
"BLD",6176,1,14,0)
 
"BLD",6176,1,15,0)
The third API (DIC) has three parameters and retrieves information 
"BLD",6176,1,16,0)
specific to the PRESCRIPTION file (#52).  This API will invoke the ^DIC 
"BLD",6176,1,17,0)
FileMan call and data will be returned to the calling application as 
"BLD",6176,1,18,0)
specified in the ^DIC FileMan documentation.
"BLD",6176,1,19,0)
 
"BLD",6176,1,20,0)
For more information, please see Forum DBIA 4858, or the Pharmacy
"BLD",6176,1,21,0)
Re-Engineering (PRE) API Manual.
"BLD",6176,1,22,0)
 
"BLD",6176,1,23,0)
This patch also corrects a problem with the PROF^PSO52API API.  The first
"BLD",6176,1,24,0)
node of data returned is meant to return both the PRESCRIPTION NUMBER and
"BLD",6176,1,25,0)
it's IEN.  Currently, the IEN is not returned.  This patch will correct
"BLD",6176,1,26,0)
the problem.
"BLD",6176,1,27,0)
 
"BLD",6176,1,28,0)
This patch also corrects a problem with the PSO^PSO53 API.  Currently 
"BLD",6176,1,29,0)
there is an undefined error when the API is run.  This patch will correct 
"BLD",6176,1,30,0)
the problem and ensure the functionality of the PSO^PSO53 API call.
"BLD",6176,4,0)
^9.64PA^^
"BLD",6176,6)
6^
"BLD",6176,6.3)
20
"BLD",6176,"KRN",0)
^9.67PA^8989.52^19
"BLD",6176,"KRN",.4,0)
.4
"BLD",6176,"KRN",.401,0)
.401
"BLD",6176,"KRN",.402,0)
.402
"BLD",6176,"KRN",.403,0)
.403
"BLD",6176,"KRN",.5,0)
.5
"BLD",6176,"KRN",.84,0)
.84
"BLD",6176,"KRN",3.6,0)
3.6
"BLD",6176,"KRN",3.8,0)
3.8
"BLD",6176,"KRN",9.2,0)
9.2
"BLD",6176,"KRN",9.8,0)
9.8
"BLD",6176,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",6176,"KRN",9.8,"NM",1,0)
PSODI^^0^B5060362
"BLD",6176,"KRN",9.8,"NM",2,0)
PSO52AP1^^0^B6475356
"BLD",6176,"KRN",9.8,"NM",3,0)
PSO53^^0^B2811964
"BLD",6176,"KRN",9.8,"NM","B","PSO52AP1",2)
 
"BLD",6176,"KRN",9.8,"NM","B","PSO53",3)
 
"BLD",6176,"KRN",9.8,"NM","B","PSODI",1)
 
"BLD",6176,"KRN",19,0)
19
"BLD",6176,"KRN",19,"NM",0)
^9.68A^^
"BLD",6176,"KRN",19.1,0)
19.1
"BLD",6176,"KRN",101,0)
101
"BLD",6176,"KRN",409.61,0)
409.61
"BLD",6176,"KRN",771,0)
771
"BLD",6176,"KRN",870,0)
870
"BLD",6176,"KRN",8989.51,0)
8989.51
"BLD",6176,"KRN",8989.52,0)
8989.52
"BLD",6176,"KRN",8994,0)
8994
"BLD",6176,"KRN","B",.4,.4)
 
"BLD",6176,"KRN","B",.401,.401)
 
"BLD",6176,"KRN","B",.402,.402)
 
"BLD",6176,"KRN","B",.403,.403)
 
"BLD",6176,"KRN","B",.5,.5)
 
"BLD",6176,"KRN","B",.84,.84)
 
"BLD",6176,"KRN","B",3.6,3.6)
 
"BLD",6176,"KRN","B",3.8,3.8)
 
"BLD",6176,"KRN","B",9.2,9.2)
 
"BLD",6176,"KRN","B",9.8,9.8)
 
"BLD",6176,"KRN","B",19,19)
 
"BLD",6176,"KRN","B",19.1,19.1)
 
"BLD",6176,"KRN","B",101,101)
 
"BLD",6176,"KRN","B",409.61,409.61)
 
"BLD",6176,"KRN","B",771,771)
 
"BLD",6176,"KRN","B",870,870)
 
"BLD",6176,"KRN","B",8989.51,8989.51)
 
"BLD",6176,"KRN","B",8989.52,8989.52)
 
"BLD",6176,"KRN","B",8994,8994)
 
"BLD",6176,"QUES",0)
^9.62^^
"BLD",6176,"REQB",0)
^9.611^1^1
"BLD",6176,"REQB",1,0)
PSO*7.0*213^2
"BLD",6176,"REQB","B","PSO*7.0*213",1)
 
"MBREQ")
0
"PKG",141,-1)
1^1
"PKG",141,0)
OUTPATIENT PHARMACY^PSO^OUTPATIENT LABELS, PROFILE, INVENTORY, PRESCRIPTIONS
"PKG",141,20,0)
^9.402P^^
"PKG",141,22,0)
^9.49I^1^1
"PKG",141,22,1,0)
7.0^2971216^2980917^11712
"PKG",141,22,1,"PAH",1,0)
245^3060824^10000000060
"PKG",141,22,1,"PAH",1,1,0)
^^30^30^3060824
"PKG",141,22,1,"PAH",1,1,1,0)
This patch adds three new Outpatient Pharmacy Application Programming
"PKG",141,22,1,"PAH",1,1,2,0)
Interfaces (APIs).
"PKG",141,22,1,"PAH",1,1,3,0)
 
"PKG",141,22,1,"PAH",1,1,4,0)
The first API (DIQ) requires five parameters to be passed in and data
"PKG",141,22,1,"PAH",1,1,5,0)
from the PRESCRIPTION file (#52) will be returned.  This API will invoke
"PKG",141,22,1,"PAH",1,1,6,0)
the EN^DIQ1 FileMan call and data will be returned to the calling
"PKG",141,22,1,"PAH",1,1,7,0)
application as specified in the EN^DIQ1 FileMan documentation.
"PKG",141,22,1,"PAH",1,1,8,0)
 
"PKG",141,22,1,"PAH",1,1,9,0)
The second API (STATUS) requires three parameters to be passed in and data
"PKG",141,22,1,"PAH",1,1,10,0)
from the STATUS field (#100) from the PRESCRIPTION file (#52) is
"PKG",141,22,1,"PAH",1,1,11,0)
returned.  This API will invoke the FIELD^DID FileMan call and data will
"PKG",141,22,1,"PAH",1,1,12,0)
be returned to the calling application as specified in the FIELD^DID
"PKG",141,22,1,"PAH",1,1,13,0)
FileMan documentation.
"PKG",141,22,1,"PAH",1,1,14,0)
 
"PKG",141,22,1,"PAH",1,1,15,0)
The third API (DIC) has three parameters and retrieves information 
"PKG",141,22,1,"PAH",1,1,16,0)
specific to the PRESCRIPTION file (#52).  This API will invoke the ^DIC 
"PKG",141,22,1,"PAH",1,1,17,0)
FileMan call and data will be returned to the calling application as 
"PKG",141,22,1,"PAH",1,1,18,0)
specified in the ^DIC FileMan documentation.
"PKG",141,22,1,"PAH",1,1,19,0)
 
"PKG",141,22,1,"PAH",1,1,20,0)
For more information, please see Forum DBIA 4858, or the Pharmacy
"PKG",141,22,1,"PAH",1,1,21,0)
Re-Engineering (PRE) API Manual.
"PKG",141,22,1,"PAH",1,1,22,0)
 
"PKG",141,22,1,"PAH",1,1,23,0)
This patch also corrects a problem with the PROF^PSO52API API.  The first
"PKG",141,22,1,"PAH",1,1,24,0)
node of data returned is meant to return both the PRESCRIPTION NUMBER and
"PKG",141,22,1,"PAH",1,1,25,0)
it's IEN.  Currently, the IEN is not returned.  This patch will correct
"PKG",141,22,1,"PAH",1,1,26,0)
the problem.
"PKG",141,22,1,"PAH",1,1,27,0)
 
"PKG",141,22,1,"PAH",1,1,28,0)
This patch also corrects a problem with the PSO^PSO53 API.  Currently 
"PKG",141,22,1,"PAH",1,1,29,0)
there is an undefined error when the API is run.  This patch will correct 
"PKG",141,22,1,"PAH",1,1,30,0)
the problem and ensure the functionality of the PSO^PSO53 API call.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")
 
"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","PSO52AP1")
0^2^B6475356^B6235999
"RTN","PSO52AP1",1,0)
PSO52AP1 ;BHM/SAB - Encapsulation II API to return Rx data ;04/07/05 10:30 am
"RTN","PSO52AP1",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**213,245**;DEC 1997;Build 20
"RTN","PSO52AP1",3,0)
 ;
"RTN","PSO52AP1",4,0)
 ;Reference to ^PS(55 supported by DBIA 2228
"RTN","PSO52AP1",5,0)
 ;Reference to ^PSDRUG supported by DBIA 221
"RTN","PSO52AP1",6,0)
 ;
"RTN","PSO52AP1",7,0)
 ;Rx profile called from PROF^PSO52API
"RTN","PSO52AP1",8,0)
 ;DFN: Patient's IEN 
"RTN","PSO52AP1",9,0)
 ;LIST: Subscript name used in ^TMP global [REQUIRED]
"RTN","PSO52AP1",10,0)
 ;SDATE: Starting Expiration Date [optional]
"RTN","PSO52AP1",11,0)
 ;EDATE: Ending Expiration Date [optional]
"RTN","PSO52AP1",12,0)
 ;
"RTN","PSO52AP1",13,0)
 Q:$G(LIST)=""
"RTN","PSO52AP1",14,0)
 N DA,DR,PST,DIC,DIQ,DATE,IEN K ^TMP($J,LIST)
"RTN","PSO52AP1",15,0)
 Q:'$G(DFN)
"RTN","PSO52AP1",16,0)
 I '$O(^PS(55,DFN,"P",0)),$O(^PS(55,DFN,"ARC",0)) S ^TMP($J,LIST,DFN,"ARC",0)="PATIENT HAS ARCHIVED PRESCRIPTIONS"
"RTN","PSO52AP1",17,0)
 I $G(SDATE) S DATE=SDATE-1 D  G EX
"RTN","PSO52AP1",18,0)
 .I $G(EDATE) F  S DATE=$O(^PS(55,DFN,"P","A",DATE)) Q:'DATE!(DATE>EDATE)  F IEN=0:0 S IEN=$O(^PS(55,DFN,"P","A",DATE,IEN)) Q:'IEN  D ND
"RTN","PSO52AP1",19,0)
 .I '$G(EDATE) F  S DATE=$O(^PS(55,DFN,"P","A",DATE)) Q:'DATE  F IEN=0:0 S IEN=$O(^PS(55,DFN,"P","A",DATE,IEN)) Q:'IEN  D ND
"RTN","PSO52AP1",20,0)
 I $G(EDATE),'$G(SDATE) S DATE=DT-1 D  G EX
"RTN","PSO52AP1",21,0)
 .F  S DATE=$O(^PS(55,DFN,"P","A",DATE)) Q:'DATE!(DATE>EDATE)  F IEN=0:0 S IEN=$O(^PS(55,DFN,"P","A",DATE,IEN)) Q:'IEN  D ND
"RTN","PSO52AP1",22,0)
 S DATE=DT-1 F  S DATE=$O(^PS(55,DFN,"P","A",DATE)) Q:'DATE  F IEN=0:0 S IEN=$O(^PS(55,DFN,"P","A",DATE,IEN)) Q:'IEN  D ND
"RTN","PSO52AP1",23,0)
EX I $G(DFN),$G(LIST)]"",'$O(^TMP($J,LIST,DFN,0)) S ^TMP($J,LIST,DFN,0)="-1^NO PRESCRIPTION DATA FOUND"
"RTN","PSO52AP1",24,0)
 Q
"RTN","PSO52AP1",25,0)
ND ;returns data
"RTN","PSO52AP1",26,0)
 I DFN'=$P($G(^PSRX(IEN,0)),"^",2) Q
"RTN","PSO52AP1",27,0)
 I $G(^PSRX(IEN,0))']"" Q
"RTN","PSO52AP1",28,0)
 Q:$P($G(^PSRX(IEN,"STA")),"^")=13
"RTN","PSO52AP1",29,0)
 S ^TMP($J,LIST,DFN,0)=$G(^TMP($J,LIST,DFN,0))+1
"RTN","PSO52AP1",30,0)
 I DT>$P(^PSRX(IEN,2),"^",6),$P(^PSRX(IEN,"STA"),"^")<11 D
"RTN","PSO52AP1",31,0)
 .N PSOEXRX,PSOEXSTA,ORN,PIFN,PSUSD,PRFDT,PDA,PSDTEST
"RTN","PSO52AP1",32,0)
 .S PSOEXRX=IEN D EN2^PSOMAUEX K PSOEXRX,PSONM,PSONMX
"RTN","PSO52AP1",33,0)
 K PST S DIC=52,DA=IEN,DR=".01:9;10.3;10.6;11;16;17;100"
"RTN","PSO52AP1",34,0)
 S DIQ="PST",DIQ(0)="IE" D EN^DIQ1
"RTN","PSO52AP1",35,0)
 S ^TMP($J,LIST,"B",PST(52,DA,.01,"E"),IEN)=""
"RTN","PSO52AP1",36,0)
 F DR=.01,1,2,3,4,5,6,6.5,7,8,9,10.3,10.6,11,16,17,100 D
"RTN","PSO52AP1",37,0)
 .I PST(52,DA,DR,"E")'=PST(52,DA,DR,"I") S ^TMP($J,LIST,DFN,IEN,DR)=PST(52,DA,DR,"I")_"^"_PST(52,DA,DR,"E") Q
"RTN","PSO52AP1",38,0)
 .S ^TMP($J,LIST,DFN,IEN,DR)=PST(52,DA,DR,"I")
"RTN","PSO52AP1",39,0)
 S $P(^TMP($J,LIST,DFN,IEN,.01),U,2)=IEN
"RTN","PSO52AP1",40,0)
 K DA,DR,PST,DIC,DIQ
"RTN","PSO52AP1",41,0)
 Q
"RTN","PSO53")
0^3^B2811964^B2836960
"RTN","PSO53",1,0)
PSO53 ;BHM/DB - API FOR PATIENT STATUS FILE ;8 JUN 05
"RTN","PSO53",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**213,245**;DEC 1997;Build 20
"RTN","PSO53",3,0)
PSO(PSOIEN,PSOTXT,LIST) ;
"RTN","PSO53",4,0)
 N DA,DIQ,DR,X,I,DIC
"RTN","PSO53",5,0)
 I $G(LIST)'="" K ^TMP($J,LIST)
"RTN","PSO53",6,0)
 I $G(PSOIEN)="",$G(PSOTXT)="",$G(LIST)="" Q
"RTN","PSO53",7,0)
 I $G(PSOIEN)="",$G(PSOTXT)="",$G(LIST)'="" S ^TMP($J,LIST,0)="-1^NO DATA FOUND" Q
"RTN","PSO53",8,0)
 I $G(LIST)="" Q
"RTN","PSO53",9,0)
 I $G(PSOIEN)'>0,$G(PSOTXT)'="" S DA=$O(^PS(53,"B",PSOTXT,0)) I DA'>0 S ^TMP($J,LIST,0)="-1^NO DATA FOUND" Q
"RTN","PSO53",10,0)
 I $G(DA)'>0,$G(PSOIEN)>0 S DA=PSOIEN
"RTN","PSO53",11,0)
 K ^UTILITY("DIQ1",$J),DIC S DIC=53,DR=".01;2;3;4;5;6;15;16",DIQ(0)="IE" D EN^DIQ1
"RTN","PSO53",12,0)
 I '$D(^UTILITY("DIQ1",$J)) S ^TMP($J,LIST,PSOIEN,0)="-1^NO DATA FOUND" Q
"RTN","PSO53",13,0)
 F X=.01,2,3,4,5,6,15,16 S ^TMP($J,LIST,DA,X)=^UTILITY("DIQ1",$J,53,DA,X,"I")
"RTN","PSO53",14,0)
 S PSOTXT=$G(^UTILITY("DIQ1",$J,53,DA,.01,"E"))
"RTN","PSO53",15,0)
 F X=5,6,15,16 S ^TMP($J,LIST,DA,X)=$S(^UTILITY("DIQ1",$J,53,DA,X,"E")'="":^TMP($J,LIST,DA,X)_"^"_^UTILITY("DIQ1",$J,53,DA,X,"E"),1:"")
"RTN","PSO53",16,0)
 K ^UTILITY("DIQ1",$J) S ^TMP($J,LIST,"B",PSOTXT,DA)="",^TMP($J,LIST,DA,0)=$G(^TMP($J,LIST,DA,0))+1
"RTN","PSO53",17,0)
 K DA,DIC,DIQ,DA,DR,X Q
"RTN","PSODI")
0^1^B5060362^n/a
"RTN","PSODI",1,0)
PSODI ;BHM/AGV - API FOR FILEMAN CALLS ;04/19/06 10:30 am
"RTN","PSODI",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**245**;DEC 1997;Build 20
"RTN","PSODI",3,0)
 ;
"RTN","PSODI",4,0)
DIQ(PSOFILE,DIC,DR,DA,DIQ) ;PROCESS FIELDS
"RTN","PSODI",5,0)
 ;PSOFILE: FILE NUMBER USED FOR VALIDATION OF ACCESS
"RTN","PSODI",6,0)
 ;DIC,DR,DA,DIQ: SEE VA FILEMAN PROGRAMMER MANUAL FOR EN^DIQ1 INPUT DEFINITIONS
"RTN","PSODI",7,0)
 ;
"RTN","PSODI",8,0)
 S PSODIY=""
"RTN","PSODI",9,0)
 I +$G(PSOFILE)'>0 S PSODIY=-1 Q
"RTN","PSODI",10,0)
 N PSOTEST S PSOTEST=$$VALID1(PSOFILE,DIC)
"RTN","PSODI",11,0)
 I PSOTEST'>0 S PSODIY=-1 Q
"RTN","PSODI",12,0)
 D EN^DIQ1
"RTN","PSODI",13,0)
 Q
"RTN","PSODI",14,0)
 ;
"RTN","PSODI",15,0)
STATUS(PSOFILE,PSOFIELD,LIST) ;PROCESS FIELDS
"RTN","PSODI",16,0)
 ;PSOFILE: FILE NUMBER USED FOR VALIDATION OF ACCESS
"RTN","PSODI",17,0)
 ;PSOFIELD: FIELD NUMBER FROM FILE
"RTN","PSODI",18,0)
 ;LIST: SUBSCRIPT USED IN LOCAL ARRAY
"RTN","PSODI",19,0)
 ;
"RTN","PSODI",20,0)
 Q:'$G(PSOFILE)  Q:'$G(PSOFIELD)  Q:$G(LIST)=""
"RTN","PSODI",21,0)
 S PSODIY=""
"RTN","PSODI",22,0)
 N PSOTEST S PSOTEST=$$VALID2(PSOFILE,PSOFIELD)
"RTN","PSODI",23,0)
 I PSOTEST'>0 S PSODIY=-1 Q
"RTN","PSODI",24,0)
 D FIELD^DID(PSOFILE,PSOFIELD,"","POINTER",LIST)
"RTN","PSODI",25,0)
 Q
"RTN","PSODI",26,0)
 ;
"RTN","PSODI",27,0)
DIC(PSOFILE,DIC,X) ;
"RTN","PSODI",28,0)
 ;PSOFILE: FILE NUMBER USED FOR VALIDATION OF ACCESS
"RTN","PSODI",29,0)
 ;DIC,X: SEE VA FILEMAN PROGRAMMER MANUAL FOR ^DIC INPUT DEFINITIONS
"RTN","PSODI",30,0)
 ;
"RTN","PSODI",31,0)
 S PSODIY=""
"RTN","PSODI",32,0)
 I +$G(PSOFILE)'>0 S PSODIY=-1 Q
"RTN","PSODI",33,0)
 N PSOTEST S PSOTEST=$$VALID1(PSOFILE,DIC)
"RTN","PSODI",34,0)
 I PSOTEST'>0 S PSODIY=-1 Q
"RTN","PSODI",35,0)
 I $G(DIC(0))'="" S DIC(0)=$TR(DIC(0),"L","") I $G(DIC(0))="" S PSODIY=-1 Q
"RTN","PSODI",36,0)
 D ^DIC
"RTN","PSODI",37,0)
 Q
"RTN","PSODI",38,0)
 ;
"RTN","PSODI",39,0)
VALID1(PSTFILE,PSTDIC) ;TEST FOR VALID DATA INPUT FOR PSOFILE AND DIC
"RTN","PSODI",40,0)
 N PSVLOOP,PSVTEST,PSVALID S PSVALID=-1
"RTN","PSODI",41,0)
 F PSVLOOP=1:1 S PSVTEST=$P($T(FILE1+PSVLOOP),";;",2)_";;"_$P($T(FILE1+PSVLOOP),";;",3) Q:$G(PSVTEST)'>0!(PSVALID=1)  D
"RTN","PSODI",42,0)
 .I PSTFILE=$P(PSVTEST,";;",1) D  Q
"RTN","PSODI",43,0)
 ..I '$G(PSTDIC) D  Q
"RTN","PSODI",44,0)
 ...I PSTDIC=$P(PSVTEST,";;",2) S PSVALID=1
"RTN","PSODI",45,0)
 ..I PSTDIC=$P(PSVTEST,";;",1) S PSVALID=1
"RTN","PSODI",46,0)
 Q PSVALID
"RTN","PSODI",47,0)
 ;
"RTN","PSODI",48,0)
VALID2(PSTFILE,PSTFIELD)  ;TEST FOR VALID DATA INPUT FOR PSOFILE AND DIC
"RTN","PSODI",49,0)
 N PSVLOOP,PSVTEST,PSVALID S PSVALID=-1
"RTN","PSODI",50,0)
 F PSVLOOP=1:1 S PSVTEST=$P($T(FILE2+PSVLOOP),";;",2)_";;"_$P($T(FILE2+PSVLOOP),";;",3) Q:$G(PSVTEST)'>0!(PSVALID=1)  D
"RTN","PSODI",51,0)
 .I PSTFILE=$P(PSVTEST,";;",1) D  Q
"RTN","PSODI",52,0)
 ..I PSTFIELD=$P(PSVTEST,";;",2) S PSVALID=1
"RTN","PSODI",53,0)
 Q PSVALID
"RTN","PSODI",54,0)
 ;
"RTN","PSODI",55,0)
FILE1 ;ACCESS FILE LIST FOR DIQ AND DIC
"RTN","PSODI",56,0)
 ;;52;;^PSRX(
"RTN","PSODI",57,0)
 ;;59;;^PS(59,
"RTN","PSODI",58,0)
 Q
"RTN","PSODI",59,0)
FILE2 ;ACCESS FILE LIST FOR STATUS
"RTN","PSODI",60,0)
 ;;52;;100
"RTN","PSODI",61,0)
 Q
"VER")
8.0^22.0
"BLD",6176,6)
^222
**END**
**END**

EMERGENCY Released OR*3*161 SEQ #148
Extracted from mail message
**KIDS**:OR*3.0*161^

**INSTALL NAME**
OR*3.0*161
"BLD",4013,0)
OR*3.0*161^ORDER ENTRY/RESULTS REPORTING^0^3021114^y
"BLD",4013,1,0)
^^2^2^3021114^
"BLD",4013,1,1,0)
Fixes problem with November dates being interpreted as "NOW".  Please see 
"BLD",4013,1,2,0)
patch description on FORUM for complete details.
"BLD",4013,4,0)
^9.64PA^^
"BLD",4013,"ABPKG")
n
"BLD",4013,"KRN",0)
^9.67PA^8989.52^19
"BLD",4013,"KRN",.4,0)
.4
"BLD",4013,"KRN",.401,0)
.401
"BLD",4013,"KRN",.402,0)
.402
"BLD",4013,"KRN",.403,0)
.403
"BLD",4013,"KRN",.5,0)
.5
"BLD",4013,"KRN",.84,0)
.84
"BLD",4013,"KRN",3.6,0)
3.6
"BLD",4013,"KRN",3.8,0)
3.8
"BLD",4013,"KRN",9.2,0)
9.2
"BLD",4013,"KRN",9.8,0)
9.8
"BLD",4013,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4013,"KRN",9.8,"NM",1,0)
ORCD^^0^B48508256
"BLD",4013,"KRN",9.8,"NM","B","ORCD",1)

"BLD",4013,"KRN",19,0)
19
"BLD",4013,"KRN",19.1,0)
19.1
"BLD",4013,"KRN",101,0)
101
"BLD",4013,"KRN",409.61,0)
409.61
"BLD",4013,"KRN",771,0)
771
"BLD",4013,"KRN",870,0)
870
"BLD",4013,"KRN",8989.51,0)
8989.51
"BLD",4013,"KRN",8989.52,0)
8989.52
"BLD",4013,"KRN",8994,0)
8994
"BLD",4013,"KRN","B",.4,.4)

"BLD",4013,"KRN","B",.401,.401)

"BLD",4013,"KRN","B",.402,.402)

"BLD",4013,"KRN","B",.403,.403)

"BLD",4013,"KRN","B",.5,.5)

"BLD",4013,"KRN","B",.84,.84)

"BLD",4013,"KRN","B",3.6,3.6)

"BLD",4013,"KRN","B",3.8,3.8)

"BLD",4013,"KRN","B",9.2,9.2)

"BLD",4013,"KRN","B",9.8,9.8)

"BLD",4013,"KRN","B",19,19)

"BLD",4013,"KRN","B",19.1,19.1)

"BLD",4013,"KRN","B",101,101)

"BLD",4013,"KRN","B",409.61,409.61)

"BLD",4013,"KRN","B",771,771)

"BLD",4013,"KRN","B",870,870)

"BLD",4013,"KRN","B",8989.51,8989.51)

"BLD",4013,"KRN","B",8989.52,8989.52)

"BLD",4013,"KRN","B",8994,8994)

"BLD",4013,"QUES",0)
^9.62^^
"BLD",4013,"REQB",0)
^9.611^1^1
"BLD",4013,"REQB",1,0)
OR*3.0*94^2
"BLD",4013,"REQB","B","OR*3.0*94",1)

"MBREQ")
0
"PKG",110,-1)
1^1
"PKG",110,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",110,20,0)
^9.402P^^
"PKG",110,22,0)
^9.49I^1^1
"PKG",110,22,1,0)
3.0^2971217
"PKG",110,22,1,"PAH",1,0)
161^3021114
"PKG",110,22,1,"PAH",1,1,0)
^^2^2^3021114
"PKG",110,22,1,"PAH",1,1,1,0)
Fixes problem with November dates being interpreted as "NOW".  Please see 
"PKG",110,22,1,"PAH",1,1,2,0)
patch description on FORUM for complete details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ORCD")
0^1^B48508256
"RTN","ORCD",1,0)
ORCD ; SLC/MKB - Order Dialog utilities ;11/14/02  09:09
"RTN","ORCD",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**8,38,68,94,161**;Dec 17, 1997
"RTN","ORCD",3,0)
INPT() ; -- Return 1 or 0, if patient/order sheet = inpatient
"RTN","ORCD",4,0)
 I $L($G(OREVENT)) Q $S(OREVENT="A":1,OREVENT="T":1,OREVENT="D":0,OREVENT="V":0,1:+$G(ORWARD))
"RTN","ORCD",5,0)
 Q +$G(ORWARD)
"RTN","ORCD",6,0)
 ;
"RTN","ORCD",7,0)
EXT(P,I,F) ; -- Returns external value of ORDIALOG(Prompt,Instance)
"RTN","ORCD",8,0)
 N TYPE,PARAM,FNUM,IENS,X,Y,J,Z
"RTN","ORCD",9,0)
 S TYPE=$E(ORDIALOG(P,0)),PARAM=$P(ORDIALOG(P,0),U,2),X=ORDIALOG(P,I)
"RTN","ORCD",10,0)
 I "FNW"[TYPE Q X
"RTN","ORCD",11,0)
 I TYPE="Y" Q $S(X:"YES",X=0:"NO",1:"")
"RTN","ORCD",12,0)
 I TYPE="D" S:'$L($G(F)) F=1 Q $$FMTE^XLFDT(X,F)
"RTN","ORCD",13,0)
 I TYPE="R" Q $$FTDATE(X,$G(F)) ; DAY@TIME
"RTN","ORCD",14,0)
 I TYPE="P" D  Q Y
"RTN","ORCD",15,0)
 . S PARAM=$P(PARAM,":"),FNUM=$S(PARAM:+PARAM,1:+$P(@(U_PARAM_"0)"),U,2))
"RTN","ORCD",16,0)
 . S IENS=+X_",",J=$L(PARAM,",") I J>2 F  S J=J-2 Q:J'>0  S Z=$P(PARAM,",",J),IENS=IENS_$S(Z:Z,1:+$P(Z,"(",2))_","
"RTN","ORCD",17,0)
 . S:'+$G(F) F=.01 S Y=$$GET1^DIQ(FNUM,IENS,+F)
"RTN","ORCD",18,0)
 . I Y="",F'=.01 S Y=$$GET1^DIQ(FNUM,IENS,.01)
"RTN","ORCD",19,0)
 I TYPE="S" F J=1:1:$L(PARAM,";") S Z=$P(PARAM,";",J) I $P(Z,":")=X S Y=$S(+$G(F):X,1:$P(Z,":",2)) Q
"RTN","ORCD",20,0)
 Q $G(Y)
"RTN","ORCD",21,0)
 ;
"RTN","ORCD",22,0)
FTDATE(X,F) ; -- Returns free text form of date (i.e. TODAY)
"RTN","ORCD",23,0)
 N D,T,P,Y I X="" Q ""
"RTN","ORCD",24,0)
 S X=$$UP^XLFSTR(X),D=$P(X,"@"),T=$P(X,"@",2) ; D=date,T=time parts
"RTN","ORCD",25,0)
 I "NOW"[X Q "NOW"
"RTN","ORCD",26,0)
 I "NOON"[X Q "NOON"
"RTN","ORCD",27,0)
 I $E("MIDNIGHT",1,$L(X))=X Q "MIDNIGHT"
"RTN","ORCD",28,0)
 I (X="AM")!(X="NEXT") Q X_" Lab collection"
"RTN","ORCD",29,0)
 I (X="NEXTA")!(X="CLOSEST") Q $S(X="NEXTA":"NEXT",1:X)_" administration time"
"RTN","ORCD",30,0)
 I $E(D)'="T",$E(D)'="V",($E(D)'="N"!($E(D,1,3)="NOV")) D  Q $$FMTE^XLFDT(X,F)  ;161
"RTN","ORCD",31,0)
 . N %DT S %DT="TX" D ^%DT S:Y>0 X=Y S:'$G(F) F=1
"RTN","ORCD",32,0)
 S P=$S(D["+":"+",D["-":"-",1:"")
"RTN","ORCD",33,0)
 I P="" S Y=$S($E(D)="T":"TODAY",$E(D)="V":"NEXT VISIT",1:"NOW")
"RTN","ORCD",34,0)
FTD1 E  D
"RTN","ORCD",35,0)
 . N OFFSET,NUM,UNIT
"RTN","ORCD",36,0)
 . S OFFSET=$P(D,P,2),NUM=+OFFSET,UNIT=$E($P(OFFSET,NUM,2)) ; +/-#D
"RTN","ORCD",37,0)
 . I $E(D)="T",NUM=1 S Y=$S(P="+":"TOMORROW",1:"YESTERDAY") Q
"RTN","ORCD",38,0)
 . S Y=NUM_" "_$S(UNIT="'":"MINUTE",UNIT="H":"HOUR",UNIT="W":"WEEK",UNIT="M":"MONTH",1:"DAY")
"RTN","ORCD",39,0)
 . S:NUM>1 Y=Y_"S" ; plural
"RTN","ORCD",40,0)
 . S:$E(D)="N" Y=Y_" "_$S(P="+":"FROM NOW",1:"AGO")
"RTN","ORCD",41,0)
 . S:$E(D)="T" Y=Y_" "_$S(P="+":"FROM TODAY",1:"AGO")
"RTN","ORCD",42,0)
 . S:$E(D)="V" Y=Y_" "_$S(P="+":"AFTER",1:"BEFORE")_" NEXT VISIT"
"RTN","ORCD",43,0)
 I $L(T) S Y=Y_"@"_$$TIME(T)
"RTN","ORCD",44,0)
 Q Y
"RTN","ORCD",45,0)
 ;
"RTN","ORCD",46,0)
FTDHELP ; -- Displays ??-help for R-type prompts
"RTN","ORCD",47,0)
 G R^ORCDLGH
"RTN","ORCD",48,0)
 Q
"RTN","ORCD",49,0)
 ;
"RTN","ORCD",50,0)
FTDCOMP(X1,X2,OPER) ; -- Compares free text dates from prompts X1 & X2
"RTN","ORCD",51,0)
 ;    Returns 1 or 0, IF $$VAL(X1)<OPER>$$VAL(X2) is true
"RTN","ORCD",52,0)
 N X,Y,Y1,Y2,Z,%DT
"RTN","ORCD",53,0)
 S X=$$VAL(X1),%DT="TX" D ^%DT S Y1=Y ; Y'>0 ??
"RTN","ORCD",54,0)
 S X=$$VAL(X2),%DT="TX" D ^%DT S Y2=Y ; Y'>0 ??
"RTN","ORCD",55,0)
 S Z="I "_Y1_OPER_Y2 X Z
"RTN","ORCD",56,0)
 Q $T
"RTN","ORCD",57,0)
 ;
"RTN","ORCD",58,0)
TIME(X) ; -- Returns 00:00 PM formatted time
"RTN","ORCD",59,0)
 N Y,Z,%DT
"RTN","ORCD",60,0)
 I "NOON"[X Q X
"RTN","ORCD",61,0)
 I "MIDNIGHT"[X Q "MIDNIGHT"
"RTN","ORCD",62,0)
 I X?1U,"BNE"[X Q $S(X="B":"BREAKFAST",X="N":"NOON",X="E":"EVENING",1:"")
"RTN","ORCD",63,0)
 S X="T@"_X,%DT="TX" D ^%DT I Y'>0 Q ""
"RTN","ORCD",64,0)
 S Z=$$FMTE^XLFDT(Y,"2P"),Z=$P(Z," ",2)_$$UP^XLFSTR($P(Z," ",3))
"RTN","ORCD",65,0)
 Q Z
"RTN","ORCD",66,0)
 ;
"RTN","ORCD",67,0)
VAL(TEXT,INST) ; -- Returns internal form of TEXT's current value
"RTN","ORCD",68,0)
 N I,X S X="" S:'$G(INST) INST=1
"RTN","ORCD",69,0)
 I '$D(ORDIALOG("B",TEXT)) S I=$O(ORDIALOG("B",TEXT)) Q:$E(I,1,$L(TEXT))'=TEXT X S TEXT=I ; partial match
"RTN","ORCD",70,0)
 S X=$P($G(ORDIALOG("B",TEXT)),U,2) ; ptr
"RTN","ORCD",71,0)
 Q $G(ORDIALOG(X,INST))
"RTN","ORCD",72,0)
 ;
"RTN","ORCD",73,0)
ORDMSG(OI) ; -- Display order message for orderable OI
"RTN","ORCD",74,0)
 Q:'$O(^ORD(101.43,OI,8,0))  ; no order message
"RTN","ORCD",75,0)
 N I S I=0 W !
"RTN","ORCD",76,0)
 F  S I=$O(^ORD(101.43,OI,8,I)) Q:I'>0  W !,$G(^(I,0))
"RTN","ORCD",77,0)
 W ! Q
"RTN","ORCD",78,0)
 ;
"RTN","ORCD",79,0)
PTR(NAME) ; -- Returns pointer to Dialog file for prompt NAME
"RTN","ORCD",80,0)
 Q +$O(^ORD(101.41,"AB",$E(NAME,1,63),0))
"RTN","ORCD",81,0)
 ;
"RTN","ORCD",82,0)
NMSP(PKG) ; -- Returns package namespace from pointer
"RTN","ORCD",83,0)
 N Y S Y=$$GET1^DIQ(9.4,+PKG_",",1)
"RTN","ORCD",84,0)
 S:$E(Y,1,2)="PS" Y="PS" S:Y="GMRV" Y="OR"
"RTN","ORCD",85,0)
 Q Y
"RTN","ORCD",86,0)
 ;
"RTN","ORCD",87,0)
GETQDLG(QIFN) ; -- define ORDIALOG(PROMPT) for quick order QIFN
"RTN","ORCD",88,0)
 S ORDIALOG=$$DEFDLG(QIFN) Q:'ORDIALOG
"RTN","ORCD",89,0)
 D GETDLG(ORDIALOG),GETORDER("^ORD(101.41,"_QIFN_",6)")
"RTN","ORCD",90,0)
 X:$D(^ORD(101.41,QIFN,3)) ^(3) ; entry action for quick order
"RTN","ORCD",91,0)
 Q
"RTN","ORCD",92,0)
 ;
"RTN","ORCD",93,0)
DEFDLG(QDLG) ; -- Returns default dialog for QDLG
"RTN","ORCD",94,0)
 N DG,DLG,TOP S DG=+$P($G(^ORD(101.41,+QDLG,0)),U,5)
"RTN","ORCD",95,0)
 S DLG=+$P($G(^ORD(100.98,DG,0)),U,4) ; default dialog
"RTN","ORCD",96,0)
 I 'DLG S TOP=+$O(^ORD(100.98,"AD",DG,0)),DLG=+$P($G(^ORD(100.98,TOP,0)),U,4)
"RTN","ORCD",97,0)
 Q DLG
"RTN","ORCD",98,0)
 ;
"RTN","ORCD",99,0)
GETDLG(IFN) ; -- define ORDIALOG(PROMPT) for dialog IFN
"RTN","ORCD",100,0)
 N SEQ,DA,ITEM,PTR,PROMPT,TEXT,INDEX,HELP,XHELP,SCREEN,ORD,INPUTXFM,LKP
"RTN","ORCD",101,0)
 S SEQ=0 K ^TMP("ORWORD",$J)
"RTN","ORCD",102,0)
 F  S SEQ=$O(^ORD(101.41,IFN,10,"B",SEQ)) Q:SEQ'>0  S DA=0 F  S DA=$O(^ORD(101.41,IFN,10,"B",SEQ,DA)) Q:'DA  D
"RTN","ORCD",103,0)
 . S ITEM=$G(^ORD(101.41,IFN,10,DA,0)),INPUTXFM=$G(^(.1)),HELP=$G(^(1)),SCREEN=$G(^(4)),XHELP=$G(^(6))
"RTN","ORCD",104,0)
 . S PTR=$P(ITEM,U,2),TEXT=$P(ITEM,U,4),INDEX=$P(ITEM,U,10) Q:'PTR
"RTN","ORCD",105,0)
 . S:'$L(TEXT) TEXT=$P(^ORD(101.41,PTR,0),U,2) K ORD
"RTN","ORCD",106,0)
 . S PROMPT=$G(^ORD(101.41,PTR,1)),ORD=DA_U_$P(PROMPT,U,3)
"RTN","ORCD",107,0)
 . S ORD(0)=$P(PROMPT,U)_$S($P(PROMPT,U)="S":"M",1:"")_U_$P(PROMPT,U,2)_$S($L(INPUTXFM):U_INPUTXFM,1:"")
"RTN","ORCD",108,0)
 . S ORD("A")=TEXT S:$L($P(ITEM,U,13)) ORD("TTL")=$P(ITEM,U,13)
"RTN","ORCD",109,0)
 . I $P(ITEM,U,7) S ORD("MAX")=$P(ITEM,U,12),ORD("MORE")=$P(ITEM,U,14) ; fields for multiples
"RTN","ORCD",110,0)
 . I $L(HELP) S LKP=$P(HELP,U,2),HELP=$P(HELP,U) S:$L(HELP) ORD("?")=HELP S:$L(LKP) ORD("LKP")=$S($L(LKP,";")>1:$TR(LKP,";","^"),1:U_LKP)
"RTN","ORCD",111,0)
 . S:$L(XHELP) ORD("??")=U_XHELP
"RTN","ORCD",112,0)
 . S:$L(INDEX) ORD("D")=INDEX
"RTN","ORCD",113,0)
 . S:$L(SCREEN) ORD("S")=SCREEN
"RTN","ORCD",114,0)
 . S ORDIALOG("B",$$UP^XLFSTR($P(TEXT,":")))=SEQ_U_PTR
"RTN","ORCD",115,0)
 . M ORDIALOG(PTR)=ORD
"RTN","ORCD",116,0)
 Q
"RTN","ORCD",117,0)
 ;
"RTN","ORCD",118,0)
GETDLG1(IFN) ; -- basic ORDIALOG(PROMPT) for dialog IFN
"RTN","ORCD",119,0)
 N SEQ,DA,PROMPT,PTR,WINCTRL
"RTN","ORCD",120,0)
 K ^TMP("ORWORD",$J) S SEQ=0
"RTN","ORCD",121,0)
 F  S SEQ=$O(^ORD(101.41,IFN,10,"B",SEQ)) Q:SEQ'>0  S DA=0 F  S DA=$O(^ORD(101.41,IFN,10,"B",SEQ,DA)) Q:'DA  D
"RTN","ORCD",122,0)
 . S PTR=$P($G(^ORD(101.41,IFN,10,DA,0)),U,2) Q:'PTR
"RTN","ORCD",123,0)
 . S WINCTRL=$P($G(^ORD(101.41,IFN,10,DA,"W")),U)
"RTN","ORCD",124,0)
 . S PROMPT=$G(^ORD(101.41,PTR,1)) Q:'$L(PROMPT)
"RTN","ORCD",125,0)
 . S ORDIALOG(PTR)=DA_U_$P(PROMPT,U,3)_U_WINCTRL
"RTN","ORCD",126,0)
 . S ORDIALOG(PTR,0)=$P(PROMPT,U,1,2)
"RTN","ORCD",127,0)
 Q
"RTN","ORCD",128,0)
 ;
"RTN","ORCD",129,0)
GETORDER(ROOT,ARRAY) ; -- retrieve order values from RESPONSES in ARRAY()
"RTN","ORCD",130,0)
 N ORI,ID,PTR,INST,TYPE,DA,X,ORTXT S:'$L($G(ARRAY)) ARRAY="ORDIALOG"
"RTN","ORCD",131,0)
 I +ROOT=ROOT S ROOT="^OR(100,"_ROOT_",4.5)" ; assume Orders file IFN
"RTN","ORCD",132,0)
 S ORI=0 F  S ORI=$O(@ROOT@(ORI)) Q:ORI'>0  S ID=$G(@ROOT@(ORI,0)) D
"RTN","ORCD",133,0)
 . S DA=$P(ID,U),PTR=$P(ID,U,2),INST=$P(ID,U,3) S:'INST INST=1
"RTN","ORCD",134,0)
 . S:'PTR PTR=$P($G(^ORD(101.41,+ORDIALOG,10,DA,0)),U,2) Q:'PTR
"RTN","ORCD",135,0)
 . Q:'$D(ORDIALOG(PTR))  S TYPE=$E($G(ORDIALOG(PTR,0))) Q:'$L(TYPE)
"RTN","ORCD",136,0)
 . I TYPE'="W" S X=$G(@ROOT@(ORI,1)) S:$L(X) @ARRAY@(PTR,INST)=X Q
"RTN","ORCD",137,0)
 . D RESTXT ;resolve objects
"RTN","ORCD",138,0)
 . I ARRAY="ORDIALOG" M ^TMP("ORWORD",$J,PTR,INST)=@ORTXT S @ARRAY@(PTR,INST)="^TMP(""ORWORD"","_$J_","_PTR_","_INST_")"
"RTN","ORCD",139,0)
 . I ARRAY'="ORDIALOG" M @ARRAY@(PTR,INST)=@ORTXT S @ARRAY@(PTR,INST)=$NA(@ARRAY@(PTR,INST))
"RTN","ORCD",140,0)
 . K @ORTXT
"RTN","ORCD",141,0)
 Q
"RTN","ORCD",142,0)
 ;
"RTN","ORCD",143,0)
RESTXT ; -- resolve objects in text [from GETORDER+8]
"RTN","ORCD",144,0)
 I $G(ORTYPE)="Z" M ^TMP("ORX",$J)=@ROOT@(ORI,2) S ORTXT=$NA(^TMP("ORX",$J)) Q  ;return text unresolved
"RTN","ORCD",145,0)
 N ARRAY,PTR,INST
"RTN","ORCD",146,0)
 D BLRPLT^TIUSRVD(.ORTXT,,+$G(ORVP),,$NA(@ROOT@(ORI,2)))
"RTN","ORCD",147,0)
 Q
"RTN","ORCD",148,0)
 ;
"RTN","ORCD",149,0)
DUP(PROMPT,CURRENT) ; -- Compare CURRENT instance of PROMPT for duplicates
"RTN","ORCD",150,0)
 N X,Y,I
"RTN","ORCD",151,0)
 S X=ORDIALOG(PROMPT,CURRENT),Y=0
"RTN","ORCD",152,0)
 S I=0 F  S I=$O(ORDIALOG(PROMPT,I)) Q:I'>0  I I'=CURRENT,$P(ORDIALOG(PROMPT,I),U)=$P(ORDIALOG(PROMPT,CURRENT),U) S Y=1 Q
"RTN","ORCD",153,0)
 Q Y
"RTN","ORCD",154,0)
 ;
"RTN","ORCD",155,0)
LIST ; -- Show contents of ORDIALOG(PROMPT,"LIST")
"RTN","ORCD",156,0)
 N NUM S NUM=$G(ORDIALOG(PROMPT,"LIST")) Q:'NUM
"RTN","ORCD",157,0)
 W !,"Choose from"_$S('$P(NUM,U,2):" (or enter another):",1:":")
"RTN","ORCD",158,0)
LIST1 N I,DONE,CNT S (I,CNT,DONE)=0
"RTN","ORCD",159,0)
 F  S I=$O(ORDIALOG(PROMPT,"LIST",I)) Q:I'>0  D  Q:DONE
"RTN","ORCD",160,0)
 . S CNT=CNT+1 I CNT>(IOSL-2) S CNT=0 I '$$MORE S DONE=1 Q
"RTN","ORCD",161,0)
 . W !,$J(I,6)_"   "_$P(ORDIALOG(PROMPT,"LIST",I),U,2)
"RTN","ORCD",162,0)
 Q
"RTN","ORCD",163,0)
 ;
"RTN","ORCD",164,0)
SETLIST ; -- Show allowable set of codes
"RTN","ORCD",165,0)
 W !,"Choose from:"
"RTN","ORCD",166,0)
SETLST1 N I,X F I=1:1:$L(DOMAIN,";") S X=$P(DOMAIN,";",I) I $L(X) D
"RTN","ORCD",167,0)
 . W !,?5,$P(X,":"),?15,$P(X,":",2)
"RTN","ORCD",168,0)
 Q
"RTN","ORCD",169,0)
 ;
"RTN","ORCD",170,0)
MORE() ; -- show more?
"RTN","ORCD",171,0)
 N X,Y,DIR
"RTN","ORCD",172,0)
 S DIR(0)="EA",DIR("A")="    press <return> to continue or ^ to exit ..."
"RTN","ORCD",173,0)
 D ^DIR
"RTN","ORCD",174,0)
 Q +Y
"RTN","ORCD",175,0)
 ;
"RTN","ORCD",176,0)
FIRST(P,I) ; -- Returns 1 or 0, if current instance I is first of multiple
"RTN","ORCD",177,0)
 Q '$O(ORDIALOG(P,I),-1)
"RTN","ORCD",178,0)
 ;
"RTN","ORCD",179,0)
RECALL(P,I) ; -- Returns first value for prompt P, instance I
"RTN","ORCD",180,0)
 N Y S:'$G(I) I=1 S Y=$G(^TMP("ORECALL",$J,+ORDIALOG,P,I))
"RTN","ORCD",181,0)
 Q Y
"VER")
8.0^22.0
**END**
**END**

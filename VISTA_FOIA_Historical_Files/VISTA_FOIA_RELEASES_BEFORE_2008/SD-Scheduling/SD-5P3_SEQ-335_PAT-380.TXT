
=============================================================================
Run Date: APR 11, 2005                     Designation: SD*5.3*380
Package : SD - SCHEDULING                     Priority: Mandatory
Version : 5.3       SEQ #335                    Status: Released
                  Compliance Date: MAY 12, 2005
=============================================================================

Associated patches: (v)SD*5.3*168  <<= must be installed BEFORE `SD*5.3*380'
                    (v)SD*5.3*303  <<= must be installed BEFORE `SD*5.3*380'

Subject: RSC - SD RESTRICTING STOP CODES

Category: 
  - Routine
  - Enhancement (Mandatory)
  - Data Dictionary
  - Informational

Description:
============

 ******                         A L E R T                             ******
   Prior to installing the host file, it is strongly recommended that sites
   run the following reports -
     SD CLN STOP CODE REP...   Non-Conforming Clinics Stop Code Report
     ECX CLN STOP REP...       DSS Identifier Non-Conforming Clinics Report
 
   Run the reports, selecting the Active Clinics.  It is highly recommended 
   that all non-conforming clinics be corrected prior to installing the host 
   file.  Although it is not absolutely necessary to correct these clinics 
   before installation, use of clinics with non-conforming stop codes will 
   not be permitted after the installation.
 ******                         *********                             ******  
   
      
 Introduction
 ============
 The Deputy Director of Health Administration Center (HAC) DSS, requested
 enhancements to VistA to implement an electronic means of restricting
 medical centers from entering secondary DSS stop codes, also known as
 DSS Identifiers, in the primary DSS stop code position and to prevent
 stations from using stop codes in the secondary position that should be
 primary only.
    
   
 Technical
 ---------
 Scheduling application was modified to check the associated clinic of
 an encounter to ensure that its corresponding stop pairs conform to the
 stop code restriction.  The following components were affected:-
 
 o  These routines were modified to call API, $$CLNCK^SDUTL2 which
    checks to ensure a clinic has a valid stop code pair in accordance
    with restriction type.
        SDAM   SDAM3   SDAMWI   SDM   SDMULT   SDREACT   SDNACT   SDUNC
 o  A new API, $$CLNCK^SDUTL2 was added and is called by other routines to 
    check the validity of a Clinic and its stop code restrictions.
 o  A new integration agreement, IA#4652 was created so other packages can 
    use API $$CLNCK^SDUTL2.
 o  The STOP CODE NUMBER Field #8 was updated in the HOSPITAL LOCATION,
    File #44 to ensure that only a stop code with a Restriction Type of
    'Primary' or 'Either' can be entered into the field.  It also checks 
    that a stop code cannot be used before its restriction date.
 o  The CREDIT STOP CODE Field #2503 was updated in the HOSPITAL LOCATION,
    File #44 to ensure that only a stop code with a Restriction Type of
    'Secondary' or 'Either' code can be entered into the field.  It also 
    checks that a stop code cannot be used before its restriction date.
 o  NOTE:  The Restriction Types are enforced on all national and local
           stop codes.  Sites may need to review/edit locally created 
           stop codes (range 451-485) to ensure their Restriction Type.
 
   
       
 Functional
 ----------
 The following options were affected by the restricting stop code project.  
 Users will not be able to select clinics with non-conforming stop codes.   
   
     Set up a Clinic [SD BUILD]
     Reactivate a Clinic [SD REACT]
     Restore Clinic Availability  [SDRESTORE]
     Inactivate a clinic [SD INACTIVATE]
     Make Appointment  [SDM]
     Multiple Appointment Booking  [SDMULTIBOOK]
     Appointment Management  [SDAM APPT MGT]
     Multiple Clinic Display/Book [SDMULTICLINIC]
     Check-in/Unsched. Visit [SDI]
     Add/Edit Stop Codes [SDADDEDIT]
     Appointment Management  [SDAM APPT MGT]
        Action:  UN  Unscheduled Visit
                 MA  Make Appointment
                 AE  Add/Edit
   
    
 Misc
 ----
 Routines SDUNC and SDNACT were modified to replace $N with $O.
    
    
   
 Test Sites
 ----------
 Cheyenne, WY
 Little Rock,  AR
 Minneapolis, MN 
 Portland, OR
    
     
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;5.3;Scheduling;**[patch list]**;Aug 13, 1993
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  SD53P380                   N/A               835494             380
  SDAM                   4279726              4568781     149,177,76,242,380
  SDAM3                  4881282              5230253         63,189,380
  SDAMWI                 6484783              6885199      63,94,241,250,296
                                                                  380
  SDM                   14970799              15345282        15,32,38,41,44
                                                           79,94,167,168,218
                                                          223,250,254,296,380
  SDMULT                 7688659              7926207         63,168,380
  SDNACT                12940156             13088310           63,380
  SDREACT               12699956             12983760         63,167,380
  SDUNC                 16053538             16053806         79,303,380
  SDUTL2                 6355526              8935156      20,71,132,149,175
                                                            193,220,258,380
   
       
 SOFTWARE AND DOCUMENTATION RETRIEVAL
 ====================================
 The software for this patch is not being distributed through the National
 Patch Module.  This patch is being distributed as a host file.  The host
 file is a multi-package build containing four (4) KIDS builds.
  
          Host file name: RSC_2_0.KID
     Multi-Package Build: RSC 2.0
                  Builds: SD*5.3*380
                          PX*1.0*151
                          EC*2.0*65
                          ECX*3.0*72
  
 Sites may retrieve the software and documentation directly using FTP
 from the ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
             Albany: ftp.fo-albany.med.va.gov
              Hines: ftp.fo-hines.med.va.gov
     Salt Lake City: ftp.fo-slc.med.va.gov
  
  The following files will be available:
  
     File Name                         Description
     ---------                         -----------
    RSC_2_0.KID                        Host file containing KIDS software
                                       distribution
    DSS_3_FY2005_UM.PDF                DSS User Manual
    EC_GUI_UM.PDF                      EC GUI User Manual
    PXTM.PDF                           PCE Technical Manual
    PXUM.PDF                           PCE User Manual
    SUPV.PDF                           Scheduling User Manual Supervisor Menu
    
     * Note: Use ASCII mode when transferring the .KID file.  Use Binary
             mode when transferring the .PDF files.  The .PDF files can
             be read on a PC using the Adobe Acrobat Reader program.
  
  
 INSTALLATION INSTRUCTIONS:
 =========================
 This patch can be installed with users on the system, however it should
 be installed during off hours to minimize disruption to users.  
 Installation will take less than 5 minutes.
  
 Note: The following is a list of REQUIRED builds for this multi-package
       distribution.  KIDS will not allow the installation of this patch
       without the prior installation of them.
  
          EC*2.0*54      EC*2.0*55      ECX*3.0*60     PX*1.0*147
          SD*5.3*168     SD*5.3*303 
  
  
  1. Download the KIDS file RSC_2_0.KID from the ANONYMOUS.SOFTWARE
     directory of either Albany, Hines or the Salt Lake OIFO to the
     appropriate directory on your system.
  
  2. Use LOAD A DISTRIBUTION option on the KIDS INSTALLATION menu, and
     enter: RSC_2_0.KID
  
  3. Review your mapped set.  If any of the routines listed in the
     ROUTINE SUMMARY section are mapped, they should be removed
     from the mapped set at this time.
  
  4. From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
  5. From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter the appropriate patch
     designation - SD*5.3*380,  PX*1.0*151, EC*2.0*65, or ECX*3.0*72.
  
       a.  Backup a Transport Global - this option will create a backup
           message of any routines exported with the patch.  It will NOT
           backup any other changes such as DDs or templates.
       b.  Compare Transport Global to Current System  - this option will
           allow you to view all changes that will be made when the patch
           is installed.  It compares all components of the patch
           (routines, DDs, templates, etc.).
       c.  Verify Checksums in Transport Global - this option will
           allow you to ensure the integrity of the routines that are in
           the transport global.
       d.  Print Transport Global - this option will allow you to view the
           components of the KIDS build.
  
  6. Use the Install Package(s) option and select the package RSC 2.0.
  
  7. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
     YES//',respond NO.
  
  8. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond YES.  When prompted to select the
     options you would like to place out of order, enter the following:
  
       ECENTER                         Event Capture Data Entry
       ECMGR                           Event Capture Management Menu
       ECX SETUP CLINIC                Set Up for DSS Clinic Information
       PXCE ENCOUNTER DATA ENTRY       PCE Encounter Data Entry
       PXCE ENCOUNTER ENTRY SUPER      PCE Encounter Data Entry -
                                       Supervisor
       PXCE ENCOUNTER ENTRY & DELETE   PCE Encounter Data Entry and Delete
       PXCE ENCOUNTER ENTRY NO DELETE  PCE Encounter Data Entry without
                                       Delete
       SDADDEDIT                       Add/Edit Stop Codes
       SDAM APPT MGT                   Appointment Management
       SDBUILD                         Set up a Clinic
       SDI                             Check-in/Unsched. Visit
       SDM                             Make Appointment
       SDMULTICLINIC                   Multiple Clinic Display/Book
       SDMULTIBOOK                     Multiple Appointment Booking
       SDRESTORE                       Restore Clinic Availability
       SD INACTIVATE                   Inactivate a clinic
       SD REACT                        Reactivate a Clinic
  
  9. If routines were unmapped as part of step 3, they should be
     returned to the mapped set once the installation has run to
     completion.
  
 10. Delete post install routine SD53P380.

Routine Information:
====================

Routine Name:
  - SDREACT


Routine Checksum:

Routine Name:
  - SDUNC


Routine Checksum:

Routine Name:
  - SDNACT


Routine Checksum:

Routine Name:
  - SDUTL2


Routine Checksum:

Routine Name:
  - SDM


Routine Checksum:

Routine Name:
  - SDMULT


Routine Checksum:

Routine Name:
  - SDAMWI


Routine Checksum:

Routine Name:
  - SDAM


Routine Checksum:

Routine Name:
  - SDAM3


Routine Checksum:

Routine Name:
  - SD53P380


Routine Checksum:

=============================================================================
User Information:
Entered By  : MORRISON,JENNIFER             Date Entered  : JUN 17, 2004
Completed By: LAVERTY,TIM                   Date Completed: APR 08, 2005
Released By : HEUER,CINDY                   Date Released : APR 11, 2005
=============================================================================


Packman Mail Message:
=====================

No routines included

Released IB*2*231 SEQ #202
Extracted from mail message
**KIDS**:IB*2.0*231^

**INSTALL NAME**
IB*2.0*231
"BLD",4315,0)
IB*2.0*231^INTEGRATED BILLING^0^3030807^y
"BLD",4315,1,0)
^^1^1^3030715^
"BLD",4315,1,1,0)
REMOTE INSURANCE QUERY FIX/UPDATE
"BLD",4315,4,0)
^9.64PA^355.33^1
"BLD",4315,4,355.33,0)
355.33
"BLD",4315,4,355.33,2,0)
^9.641^355.33^1
"BLD",4315,4,355.33,2,355.33,0)
INSURANCE BUFFER  (File-top level)
"BLD",4315,4,355.33,2,355.33,1,0)
^9.6411^.14^1
"BLD",4315,4,355.33,2,355.33,1,.14,0)
REMOTE LOCATION
"BLD",4315,4,355.33,222)
y^n^p^^^^n^^n
"BLD",4315,4,355.33,224)

"BLD",4315,4,"APDD",355.33,355.33)

"BLD",4315,4,"APDD",355.33,355.33,.14)

"BLD",4315,4,"B",355.33,355.33)

"BLD",4315,"KRN",0)
^9.67PA^8989.52^19
"BLD",4315,"KRN",.4,0)
.4
"BLD",4315,"KRN",.401,0)
.401
"BLD",4315,"KRN",.402,0)
.402
"BLD",4315,"KRN",.403,0)
.403
"BLD",4315,"KRN",.5,0)
.5
"BLD",4315,"KRN",.84,0)
.84
"BLD",4315,"KRN",3.6,0)
3.6
"BLD",4315,"KRN",3.8,0)
3.8
"BLD",4315,"KRN",9.2,0)
9.2
"BLD",4315,"KRN",9.8,0)
9.8
"BLD",4315,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",4315,"KRN",9.8,"NM",1,0)
IBCNRDV^^0^B65324795
"BLD",4315,"KRN",9.8,"NM",2,0)
IBCNBLE^^0^B58169363
"BLD",4315,"KRN",9.8,"NM","B","IBCNBLE",2)

"BLD",4315,"KRN",9.8,"NM","B","IBCNRDV",1)

"BLD",4315,"KRN",19,0)
19
"BLD",4315,"KRN",19.1,0)
19.1
"BLD",4315,"KRN",101,0)
101
"BLD",4315,"KRN",409.61,0)
409.61
"BLD",4315,"KRN",771,0)
771
"BLD",4315,"KRN",870,0)
870
"BLD",4315,"KRN",8989.51,0)
8989.51
"BLD",4315,"KRN",8989.52,0)
8989.52
"BLD",4315,"KRN",8994,0)
8994
"BLD",4315,"KRN","B",.4,.4)

"BLD",4315,"KRN","B",.401,.401)

"BLD",4315,"KRN","B",.402,.402)

"BLD",4315,"KRN","B",.403,.403)

"BLD",4315,"KRN","B",.5,.5)

"BLD",4315,"KRN","B",.84,.84)

"BLD",4315,"KRN","B",3.6,3.6)

"BLD",4315,"KRN","B",3.8,3.8)

"BLD",4315,"KRN","B",9.2,9.2)

"BLD",4315,"KRN","B",9.8,9.8)

"BLD",4315,"KRN","B",19,19)

"BLD",4315,"KRN","B",19.1,19.1)

"BLD",4315,"KRN","B",101,101)

"BLD",4315,"KRN","B",409.61,409.61)

"BLD",4315,"KRN","B",771,771)

"BLD",4315,"KRN","B",870,870)

"BLD",4315,"KRN","B",8989.51,8989.51)

"BLD",4315,"KRN","B",8989.52,8989.52)

"BLD",4315,"KRN","B",8994,8994)

"BLD",4315,"QUES",0)
^9.62^^
"BLD",4315,"REQB",0)
^9.611^2^2
"BLD",4315,"REQB",1,0)
IB*2.0*82^2
"BLD",4315,"REQB",2,0)
IB*2.0*214^2
"BLD",4315,"REQB","B","IB*2.0*214",2)

"BLD",4315,"REQB","B","IB*2.0*82",1)

"FIA",355.33)
INSURANCE BUFFER
"FIA",355.33,0)
^IBA(355.33,
"FIA",355.33,0,0)
355.33D
"FIA",355.33,0,1)
y^n^p^^^^n^^n
"FIA",355.33,0,10)

"FIA",355.33,0,11)

"FIA",355.33,0,"RLRO")

"FIA",355.33,0,"VR")
2.0^IB
"FIA",355.33,355.33)
1
"FIA",355.33,355.33,.14)

"MBREQ")
0
"PKG",202,-1)
1^1
"PKG",202,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",202,20,0)
^9.402P^1^1
"PKG",202,20,1,0)
2^^IBAXDR
"PKG",202,20,1,1)

"PKG",202,20,"B",2,1)

"PKG",202,22,0)
^9.49I^1^1
"PKG",202,22,1,0)
2.0^2940321^2940321
"PKG",202,22,1,"PAH",1,0)
231^3030807
"PKG",202,22,1,"PAH",1,1,0)
^^1^1^3030807
"PKG",202,22,1,"PAH",1,1,1,0)
REMOTE INSURANCE QUERY FIX/UPDATE
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","IBCNBLE")
0^2^B58169363
"RTN","IBCNBLE",1,0)
IBCNBLE ;ALB/ARH-Ins Buffer: LM buffer entry screen ;1 Jun 97
"RTN","IBCNBLE",2,0)
 ;;2.0;INTEGRATED BILLING;**82,231**;21-MAR-94
"RTN","IBCNBLE",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","IBCNBLE",4,0)
 ;
"RTN","IBCNBLE",5,0)
EN ; - main entry point for list manager display
"RTN","IBCNBLE",6,0)
 N DFN
"RTN","IBCNBLE",7,0)
 D EN^VALM("IBCNB INSURANCE BUFFER ENTRY")
"RTN","IBCNBLE",8,0)
 Q
"RTN","IBCNBLE",9,0)
 ;
"RTN","IBCNBLE",10,0)
HDR ; - header code for list manager display
"RTN","IBCNBLE",11,0)
 N IBX,IB0,VADM,VA,VAERR S IBX=""
"RTN","IBCNBLE",12,0)
 I +$G(DFN) D DEM^VADPT S IBX=$E(VADM(1),1,28),IBX=IBX_$J("",35-$L(IBX))_$P(VADM(2),U,2)_"    DOB: "_$P(VADM(3),U,2)_"    AGE: "_VADM(4)
"RTN","IBCNBLE",13,0)
 S VALMHDR(1)=IBX
"RTN","IBCNBLE",14,0)
 S IB0=$G(^IBA(355.33,+$G(IBBUFDA),0))
"RTN","IBCNBLE",15,0)
 S IBX=$E($P($G(^VA(200,+$P(IB0,U,2),0)),U,1),1,27)_" ("_$E($$EXPAND^IBTRE(355.33,.03,$P(IB0,U,3)),1,11)_")"
"RTN","IBCNBLE",16,0)
 S IBX="Buffer entry created on "_$$DATE(+IB0)_" by "_IBX,IBX=$J("",40-($L(IBX)\2))_IBX
"RTN","IBCNBLE",17,0)
 S VALMHDR(2)=IBX
"RTN","IBCNBLE",18,0)
 S IBX="" I +$P(IB0,U,10) S IBX="Buffer entry verified on "_$$DATE(+$P(IB0,U,10))_" by "_$E($P($G(^VA(200,+$P(IB0,U,11),0)),U,1),1,27),IBX=$J("",40-($L(IBX)\2))_IBX
"RTN","IBCNBLE",19,0)
 S VALMHDR(3)=IBX
"RTN","IBCNBLE",20,0)
 Q
"RTN","IBCNBLE",21,0)
 ;
"RTN","IBCNBLE",22,0)
INIT ; - initialization of list manager screen, ifn of record to display required IBBUFDA
"RTN","IBCNBLE",23,0)
 K ^TMP("IBCNBLE",$J)
"RTN","IBCNBLE",24,0)
 I '$G(IBBUFDA) S VALMQUIT="" Q
"RTN","IBCNBLE",25,0)
 S DFN=+$G(^IBA(355.33,IBBUFDA,60))
"RTN","IBCNBLE",26,0)
 D BLD
"RTN","IBCNBLE",27,0)
 Q
"RTN","IBCNBLE",28,0)
 ;
"RTN","IBCNBLE",29,0)
HELP ; - help text for list manager screen
"RTN","IBCNBLE",30,0)
 D FULL^VALM1
"RTN","IBCNBLE",31,0)
 W !!,"This screen displays all data in a Buffer File entry."
"RTN","IBCNBLE",32,0)
 W !!,"The actions allow editing of all data and verification of coverage."
"RTN","IBCNBLE",33,0)
 W !!,"It is not necessary to use the Verify Entry action, this action is optional.",!,"If the Verify Entry action is not used, the policy will be automatically flagged",!,"as verified when it is Accepted and stored in the main Insurance files."
"RTN","IBCNBLE",34,0)
 D PAUSE^VALM1 S VALMBCK="R"
"RTN","IBCNBLE",35,0)
 Q
"RTN","IBCNBLE",36,0)
 ;
"RTN","IBCNBLE",37,0)
EXIT ; - exit list manager screen
"RTN","IBCNBLE",38,0)
 K ^TMP("IBCNBLE",$J)
"RTN","IBCNBLE",39,0)
 D CLEAR^VALM1
"RTN","IBCNBLE",40,0)
 Q
"RTN","IBCNBLE",41,0)
 ;
"RTN","IBCNBLE",42,0)
BLD ; display buffer entry
"RTN","IBCNBLE",43,0)
 N IB0,IB20,IB40,IB60,IB61,IBL,IBLINE,ADDR,IBI,IBY S VALMCNT=0
"RTN","IBCNBLE",44,0)
 S IB0=$G(^IBA(355.33,IBBUFDA,0)),IB20=$G(^IBA(355.33,IBBUFDA,20)),IB40=$G(^IBA(355.33,IBBUFDA,40)),IB60=$G(^IBA(355.33,IBBUFDA,60)),IB61=$G(^IBA(355.33,IBBUFDA,61))
"RTN","IBCNBLE",45,0)
 ;
"RTN","IBCNBLE",46,0)
 D SET(" ") S IBY=$J("",26)_"Insurance Company Information" D SET(IBY,"B") S IBLINE=""
"RTN","IBCNBLE",47,0)
 S IBL="Name: ",IBY=$P(IB20,U,1) S IBLINE=$$SETL("",IBY,IBL,10,30)
"RTN","IBCNBLE",48,0)
 S IBL="Reimburse?: ",IBY=$$EXPAND^IBTRE(355.33,20.05,$P(IB20,U,5)) S IBLINE=$$SETL(IBLINE,IBY,IBL,57,20)
"RTN","IBCNBLE",49,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",50,0)
 S IBL="Phone: ",IBY=$P(IB20,U,2) S IBLINE=$$SETL(IBLINE,IBY,IBL,10,20)
"RTN","IBCNBLE",51,0)
 S IBL="Billing Phone: ",IBY=$P(IB20,U,3) S IBLINE=$$SETL(IBLINE,IBY,IBL,57,20)
"RTN","IBCNBLE",52,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",53,0)
 S IBL="Precert Phone: ",IBY=$P(IB20,U,4) S IBLINE=$$SETL(IBLINE,IBY,IBL,57,20)
"RTN","IBCNBLE",54,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",55,0)
 S IBL="Remote Query From: ",IBY=$$EXTERNAL^DILFD(355.33,.14,"",$P(IB0,"^",14)) S IBLINE=$$SETL(IBLINE,IBY,IBL,57,20)
"RTN","IBCNBLE",56,0)
 D SET(IBLINE) S IBLINE="" D ADDR(21,1)
"RTN","IBCNBLE",57,0)
 S IBL="Address: ",IBY=ADDR(1) S IBLINE=$$SETL(IBLINE,IBY,IBL,10,69)
"RTN","IBCNBLE",58,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",59,0)
 F IBI=2:1:9 S IBL="",IBY=$G(ADDR(IBI)) Q:IBY=""  S IBLINE=$$SETL(IBLINE,IBY,IBL,10,69) D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",60,0)
 ;
"RTN","IBCNBLE",61,0)
 D SET(" ") S IBY=$J("",29)_"Group/Plan Information" D SET(IBY,"B") S IBLINE=""
"RTN","IBCNBLE",62,0)
 S IBL="Group Plan?: ",IBY=$$YN($P(IB40,U,1)) S IBLINE=$$SETL("",IBY,IBL,16,3)
"RTN","IBCNBLE",63,0)
 S IBL="Require UR: ",IBY=$$YN($P(IB40,U,4)) S IBLINE=$$SETL(IBLINE,IBY,IBL,63,3)
"RTN","IBCNBLE",64,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",65,0)
 S IBL="Group Name: ",IBY=$P(IB40,U,2) S IBLINE=$$SETL("",IBY,IBL,16,20)
"RTN","IBCNBLE",66,0)
 S IBL="Require Amb Cert: ",IBY=$$YN($P(IB40,U,6)) S IBLINE=$$SETL(IBLINE,IBY,IBL,63,3)
"RTN","IBCNBLE",67,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",68,0)
 S IBL="Group Number: ",IBY=$P(IB40,U,3) S IBLINE=$$SETL("",IBY,IBL,16,17)
"RTN","IBCNBLE",69,0)
 S IBL="Require Pre-Cert: ",IBY=$$YN($P(IB40,U,5)) S IBLINE=$$SETL(IBLINE,IBY,IBL,63,3)
"RTN","IBCNBLE",70,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",71,0)
 S IBL="Type of Plan: ",IBY=$P($G(^IBE(355.1,+$P(IB40,U,9),0)),U,1) S IBLINE=$$SETL("",IBY,IBL,16,25)
"RTN","IBCNBLE",72,0)
 S IBL="Exclude Pre-Cond: ",IBY=$$YN($P(IB40,U,7)) S IBLINE=$$SETL(IBLINE,IBY,IBL,63,3)
"RTN","IBCNBLE",73,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",74,0)
 S IBL="Benefits Assignable: ",IBY=$$YN($P(IB40,U,8)) S IBLINE=$$SETL(IBLINE,IBY,IBL,63,3)
"RTN","IBCNBLE",75,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",76,0)
 ;
"RTN","IBCNBLE",77,0)
 D SET(" ") S IBY=$J("",26)_"Policy/Subscriber Information" D SET(IBY,"B") S IBLINE=""
"RTN","IBCNBLE",78,0)
 S IBL="Whose Insurance: ",IBY=$$EXPAND^IBTRE(355.33,60.05,$P(IB60,U,5)) S IBLINE=$$SETL("",IBY,IBL,18,7)
"RTN","IBCNBLE",79,0)
 S IBL="Effective: ",IBY=$$DATE($P(IB60,U,2)) S IBLINE=$$SETL(IBLINE,IBY,IBL,62,8)
"RTN","IBCNBLE",80,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",81,0)
 S IBL="Insured's Name: ",IBY=$P(IB60,U,7) S IBLINE=$$SETL("",IBY,IBL,18,30)
"RTN","IBCNBLE",82,0)
 S IBL="Expiration: ",IBY=$$DATE($P(IB60,U,3)) S IBLINE=$$SETL(IBLINE,IBY,IBL,62,13)
"RTN","IBCNBLE",83,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",84,0)
 S IBL="Subscriber Id: ",IBY=$P(IB60,U,4) S IBLINE=$$SETL("",IBY,IBL,18,20)
"RTN","IBCNBLE",85,0)
 S IBL="Primary Provider: ",IBY=$P(IB60,U,10) S IBLINE=$$SETL(IBLINE,IBY,IBL,62,17)
"RTN","IBCNBLE",86,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",87,0)
 S IBL="Relationship: ",IBY=$$EXPAND^IBTRE(355.33,60.06,$P(IB60,U,6)) S IBLINE=$$SETL("",IBY,IBL,18,16)
"RTN","IBCNBLE",88,0)
 S IBL="Provider Phone: ",IBY=$P(IB60,U,11) S IBLINE=$$SETL(IBLINE,IBY,IBL,62,16)
"RTN","IBCNBLE",89,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",90,0)
 I $P(IB60,U,6)'="01"!($P(IB60,U,8)'="") S IBL="Insured's DOB: ",IBY=$$DATE($P(IB60,U,8)) S IBLINE=$$SETL("",IBY,IBL,18,8)
"RTN","IBCNBLE",91,0)
 S IBL="Coord of Benefits: ",IBY=$$EXPAND^IBTRE(355.33,60.12,$P(IB60,U,12)) S IBLINE=$$SETL(IBLINE,IBY,IBL,62,16)
"RTN","IBCNBLE",92,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",93,0)
 I $P(IB60,U,6)'="01"!($P(IB60,U,9)'="") S IBL="Insured's SSN: ",IBY=$P(IB60,U,9) S IBLINE=$$SETL("",IBY,IBL,18,13)
"RTN","IBCNBLE",94,0)
 I IBLINE'="" D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",95,0)
 ;
"RTN","IBCNBLE",96,0)
 I '$P(IB61,U,1) D SET(" ") S IBL="Employer Sponsored Group Health Plan?: ",IBY=$$YN($P(IB61,U,1)) S IBLINE=$$SETL("",IBY,IBL,40,3) D SET(IBLINE) S IBLINE="" G NXT
"RTN","IBCNBLE",97,0)
 ;
"RTN","IBCNBLE",98,0)
 D ADDR(61,6)
"RTN","IBCNBLE",99,0)
 D SET(" ") S IBY=$J("",24)_"Subscriber's Employer Information" D SET(IBY,"B") S IBLINE=""
"RTN","IBCNBLE",100,0)
 S IBL="Employer Sponsored?: ",IBY=$$YN($P(IB61,U,1)) S IBLINE=$$SETL("",IBY,IBL,22,3)
"RTN","IBCNBLE",101,0)
 S IBL="Employment Status: ",IBY=$$EXPAND^IBTRE(355.33,61.03,$P(IB61,U,3)) S IBLINE=$$SETL(IBLINE,IBY,IBL,64,15)
"RTN","IBCNBLE",102,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",103,0)
 S IBL="Claim to Employer: ",IBY=$$YN($P(IB61,U,5)) S IBLINE=$$SETL("",IBY,IBL,22,3)
"RTN","IBCNBLE",104,0)
 S IBL="Retirement Date: ",IBY=$$DATE($P(IB61,U,4)) S IBLINE=$$SETL(IBLINE,IBY,IBL,64,8)
"RTN","IBCNBLE",105,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",106,0)
 S IBL="Employer Name: ",IBY=$P(IB61,U,2) S IBLINE=$$SETL("",IBY,IBL,16,30)
"RTN","IBCNBLE",107,0)
 S IBL="Employer Phone: ",IBY=$P(IB61,U,12) S IBLINE=$$SETL(IBLINE,IBY,IBL,64,15)
"RTN","IBCNBLE",108,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",109,0)
 S IBL="Address: ",IBY=ADDR(1) S IBLINE=$$SETL(IBLINE,IBY,IBL,16,64)
"RTN","IBCNBLE",110,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",111,0)
 F IBI=2:1:9 S IBL="",IBY=$G(ADDR(IBI)) Q:IBY=""  S IBLINE=$$SETL(IBLINE,IBY,IBL,16,64) D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",112,0)
 ;
"RTN","IBCNBLE",113,0)
NXT ;
"RTN","IBCNBLE",114,0)
 D SET(" ") S IBY=$J("",26)_"Buffer Entry Information" D SET(IBY,"B") S IBLINE=""
"RTN","IBCNBLE",115,0)
 S IBL="Date Entered: ",IBY=$$FMTE^XLFDT($P(IB0,U,1),2) S IBLINE=$$SETL("",IBY,IBL,18,17)
"RTN","IBCNBLE",116,0)
 S IBL="Date Verified: ",IBY=$$FMTE^XLFDT($P(IB0,U,10),2) S IBLINE=$$SETL(IBLINE,IBY,IBL,62,17)
"RTN","IBCNBLE",117,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",118,0)
 S IBL="Entered By: ",IBY=$$EXPAND^IBTRE(355.33,.02,$P(IB0,U,2)) S IBLINE=$$SETL("",IBY,IBL,18,40)
"RTN","IBCNBLE",119,0)
 S IBL="Verified By: ",IBY=$$EXPAND^IBTRE(355.33,.11,$P(IB0,U,11)) S IBLINE=$$SETL(IBLINE,IBY,IBL,62,17)
"RTN","IBCNBLE",120,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",121,0)
 S IBL="Source: ",IBY=$$EXPAND^IBTRE(355.33,.03,$P(IB0,U,3)) S IBLINE=$$SETL("",IBY,IBL,18,17)
"RTN","IBCNBLE",122,0)
 D SET(IBLINE) S IBLINE=""
"RTN","IBCNBLE",123,0)
BLDQ Q
"RTN","IBCNBLE",124,0)
 ;
"RTN","IBCNBLE",125,0)
SETL(LINE,DATA,LABLE,COL,LNG) ;
"RTN","IBCNBLE",126,0)
 S LINE=LINE_$J("",(COL-$L(LABLE)-$L(LINE)))_LABLE_$E(DATA,1,LNG)
"RTN","IBCNBLE",127,0)
 Q LINE
"RTN","IBCNBLE",128,0)
 ;
"RTN","IBCNBLE",129,0)
SET(LINE,SPEC) ;
"RTN","IBCNBLE",130,0)
 S VALMCNT=VALMCNT+1
"RTN","IBCNBLE",131,0)
 S ^TMP("IBCNBLE",$J,VALMCNT,0)=LINE
"RTN","IBCNBLE",132,0)
 I $G(SPEC)="B" D CNTRL^VALM10(VALMCNT,1,80,IOINHI,IOINORM)
"RTN","IBCNBLE",133,0)
 Q
"RTN","IBCNBLE",134,0)
 ;
"RTN","IBCNBLE",135,0)
DATE(X) ;
"RTN","IBCNBLE",136,0)
 N Y S Y="" I X?7N.E S Y=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","IBCNBLE",137,0)
 Q Y
"RTN","IBCNBLE",138,0)
 ;
"RTN","IBCNBLE",139,0)
YN(X) ;
"RTN","IBCNBLE",140,0)
 N Y S X=$G(X),Y=$S(X=1:"Yes",X=0:"No",1:"")
"RTN","IBCNBLE",141,0)
 Q Y
"RTN","IBCNBLE",142,0)
 ;
"RTN","IBCNBLE",143,0)
ADDR(NODE,FLD) ; format address for output
"RTN","IBCNBLE",144,0)
 N IBY,IB0,IBCS,IBST,IBZIP,IBJ,IBZ,IBX K ADDR S ADDR(1)=""
"RTN","IBCNBLE",145,0)
 S IB0=$G(^IBA(355.33,IBBUFDA,NODE))
"RTN","IBCNBLE",146,0)
 S IBCS=$P(IB0,U,FLD+3),IBST=$P($G(^DIC(5,+$P(IB0,U,FLD+4),0)),U,2),IBZIP=$P(IB0,U,FLD+5)
"RTN","IBCNBLE",147,0)
 S IBZIP=$E(IBZIP,1,5)_$S($E(IBZIP,6,9)'="":"-"_$E(IBZIP,6,9),1:"")
"RTN","IBCNBLE",148,0)
 S IBST=IBST_$S(IBST=""!(IBZIP=""):"",1:"  ")_IBZIP
"RTN","IBCNBLE",149,0)
 S IBCS=IBCS_$S(IBCS=""!(IBST=""):"",1:", ")_IBST
"RTN","IBCNBLE",150,0)
 ;
"RTN","IBCNBLE",151,0)
 S IBJ=1 F IBY=$P(IB0,U,FLD),$P(IB0,U,(FLD+1)),$P(IB0,U,(FLD+2)),IBCS I IBY'="" S IBX=$G(ADDR(IBJ)),IBZ=", " D
"RTN","IBCNBLE",152,0)
 . S:IBX="" IBZ="" S:($L(IBX)+2+$L(IBY))>64 IBZ="",IBJ=IBJ+1
"RTN","IBCNBLE",153,0)
 . S ADDR(IBJ)=$G(ADDR(IBJ))_IBZ_IBY
"RTN","IBCNBLE",154,0)
 Q
"RTN","IBCNRDV")
0^1^B65324795
"RTN","IBCNRDV",1,0)
IBCNRDV ;OAKFO/ELZ - INSURANCE INFORMATION EXCHANGE VIA RDV;27-MAR-03
"RTN","IBCNRDV",2,0)
 ;;2.0;INTEGRATED BILLING;**214,231**;21-MAR-94
"RTN","IBCNRDV",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","IBCNRDV",4,0)
 ;
"RTN","IBCNRDV",5,0)
 ; This routine is used to exchange insurance information between
"RTN","IBCNRDV",6,0)
 ; facilities.
"RTN","IBCNRDV",7,0)
OPT ; Menu option entry point.  This is used to select a patient to request
"RTN","IBCNRDV",8,0)
 ; information about from the remote treating facilities.
"RTN","IBCNRDV",9,0)
 N DFN,DIC,X,Y,DTOUT,DUOUT,IBT,%,%Y,IBX,VADM,IBB,IBD,IBH,IBI,IBICN,IBR,IBRZ,IBX,IBY,IBZ,IBWAIT,IBL,DO,IBTYPE,IB1
"RTN","IBCNRDV",10,0)
 ;
"RTN","IBCNRDV",11,0)
 ; prompt for patient
"RTN","IBCNRDV",12,0)
AGAIN S DIC="^DPT(",DIC(0)="AEMNQ" D ^DIC Q:Y<1  S DFN=+Y
"RTN","IBCNRDV",13,0)
 ;
"RTN","IBCNRDV",14,0)
BACKGND ; background/tasked entry point
"RTN","IBCNRDV",15,0)
 ; IBTYPE is being used as a flag to indicate this is running in bkng
"RTN","IBCNRDV",16,0)
 ;
"RTN","IBCNRDV",17,0)
 ; look up treating facilities
"RTN","IBCNRDV",18,0)
 K IBT S IBT=$$TFL^IBARXMU(DFN,.IBT)
"RTN","IBCNRDV",19,0)
 I IBT<1,'$D(IBTYPE) W !!,"This patient has no remote treating facilities to query." G AGAIN
"RTN","IBCNRDV",20,0)
 I IBT<1 Q
"RTN","IBCNRDV",21,0)
 ;
"RTN","IBCNRDV",22,0)
 ; display and verify we want to do this
"RTN","IBCNRDV",23,0)
 I '$D(IBTYPE) D DEM^VADPT W !!,"The patient ",VADM(1)," has the following ",IBT," remote facilitie(s)",! S IBX=0 F  S IBX=$O(IBT(IBX)) Q:IBX<1  W !?10,$P(IBT(IBX),"^",2)
"RTN","IBCNRDV",24,0)
 I '$D(IBTYPE) W !!,"Do you want to perform this Remote Query" S %=1 D YN^DICN G:%'=1 AGAIN
"RTN","IBCNRDV",25,0)
 ;
"RTN","IBCNRDV",26,0)
 ; get ICN
"RTN","IBCNRDV",27,0)
 S IBICN=$$ICN^IBARXMU(DFN) I 'IBICN,'$D(IBTYPE) W !!,"No ICN for this patient" G AGAIN
"RTN","IBCNRDV",28,0)
 I 'IBICN Q
"RTN","IBCNRDV",29,0)
 ;
"RTN","IBCNRDV",30,0)
 ; sent off the remote queries and get back handles
"RTN","IBCNRDV",31,0)
 S IBX=0 F  S IBX=$O(IBT(IBX)) Q:IBX<1  D
"RTN","IBCNRDV",32,0)
 . D SEND(.IBH,IBX,IBICN,$S($D(IBTYPE):"IBCN INSURANCE QUERY TASK",1:"IBCN INSURANCE QUERY"))
"RTN","IBCNRDV",33,0)
 . X $S(IBH(0)'="":"S $P(IBT(IBX),U,5)=IBH(0)",1:"W:'$D(IBTYPE) !,""No handle returned for "",$P(IBT(IBX),U,2) K IBT(IBX)")
"RTN","IBCNRDV",34,0)
 ;
"RTN","IBCNRDV",35,0)
 ; no handles returned
"RTN","IBCNRDV",36,0)
 I $D(IBT)<9,'$D(IBTYPE) W !!,"Unable to perform any remote queries.",! G AGAIN
"RTN","IBCNRDV",37,0)
 I $D(IBT)<9 Q
"RTN","IBCNRDV",38,0)
 ;
"RTN","IBCNRDV",39,0)
 ; go through every IBT()
"RTN","IBCNRDV",40,0)
 S IBP="|",IBX=0 F  S IBX=$O(IBT(IBX)) Q:IBX<1!($D(IBT)<9)  D
"RTN","IBCNRDV",41,0)
 . ;
"RTN","IBCNRDV",42,0)
 . ; do I have a return data.
"RTN","IBCNRDV",43,0)
 . F IBWAIT=1:1:60 W:'$D(IBTYPE) "." H 1 D CHECK(.IBR,$P(IBT(IBX),"^",5)) I $G(IBR(0))["Done" Q
"RTN","IBCNRDV",44,0)
 . I $G(IBR(0))'["Done" W:'$D(IBTYPE) !!,"Unable to communicate with ",$P(IBT(IBX),U,2) Q
"RTN","IBCNRDV",45,0)
 . K IBR
"RTN","IBCNRDV",46,0)
 . D RETURN(.IBR,$P(IBT(IBX),"^",5))
"RTN","IBCNRDV",47,0)
 . ;
"RTN","IBCNRDV",48,0)
 . ; no data returned or error message
"RTN","IBCNRDV",49,0)
 . S IBRZ=$S(-1=+$G(IBR):IBR,$G(IBR(0))="":$G(IBR(1)),1:$G(IBR(0)))
"RTN","IBCNRDV",50,0)
 . ;
"RTN","IBCNRDV",51,0)
 . ; no info to proceed
"RTN","IBCNRDV",52,0)
 . I IBRZ<1 W:'$D(IBTYPE) !,"Response from ",$P(IBT(IBX),U,2),!,$P(IBRZ,"^",2) K IBT(IBX) D:IBRZ="-1^No insurance on file" FILE(0) Q
"RTN","IBCNRDV",53,0)
 . ;
"RTN","IBCNRDV",54,0)
 . ; received insurance info, need to file and display message
"RTN","IBCNRDV",55,0)
 . W:'$D(IBTYPE) !,"Received ",$G(IBR(0))," insurance companies from ",$P(IBT(IBX),U,2) D FILE(+IBR(0))
"RTN","IBCNRDV",56,0)
 . ;
"RTN","IBCNRDV",57,0)
 . S IBY=0 F  S IBY=$O(IBR(IBY))  Q:IBY<1  D
"RTN","IBCNRDV",58,0)
 .. F IBL=5:1  S IBT=$P($T(MAP+IBL),";",3) Q:IBT=""  D
"RTN","IBCNRDV",59,0)
 ... ;
"RTN","IBCNRDV",60,0)
 ... ; am i on the right MAP line
"RTN","IBCNRDV",61,0)
 ... I $P(IBT,IBP,3)=$S(IBY#6:IBY#6,1:6) S IBZ=$P(IBR(IBY),"^",$P(IBT,IBP,4)) I $L(IBZ) D
"RTN","IBCNRDV",62,0)
 .... ;
"RTN","IBCNRDV",63,0)
 .... ; xecute code to change external to internal
"RTN","IBCNRDV",64,0)
 .... X:$L($P(IBT,IBP,7)) $P(IBT,IBP,7)
"RTN","IBCNRDV",65,0)
 .... ;
"RTN","IBCNRDV",66,0)
 .... ; put the info in the array for the buffer file
"RTN","IBCNRDV",67,0)
 .... S:$D(IBZ) IBB($P(IBT,IBP,5))=IBZ
"RTN","IBCNRDV",68,0)
 .. ;
"RTN","IBCNRDV",69,0)
 .. ; need to avoid duplicates if possible.
"RTN","IBCNRDV",70,0)
 .. I $G(IBB(20.01))["MEDICARE (WNR)" S X=0 F  S X=$O(^DPT(DFN,.312,X)) Q:X<1  I $P($G(^DIC(36,+$P($G(^DPT(DFN,.312,X,0)),"^"),0)),"^")["MEDICARE (WNR)" K IBB Q
"RTN","IBCNRDV",71,0)
 .. Q:'$D(IBB)
"RTN","IBCNRDV",72,0)
 .. ;
"RTN","IBCNRDV",73,0)
 .. ; file in the buffer file & where else needed
"RTN","IBCNRDV",74,0)
 .. I IBY#6=0 D
"RTN","IBCNRDV",75,0)
 ... I $L($G(IBB(20.01))) D
"RTN","IBCNRDV",76,0)
 .... S IBB(.14)=$$IEN^XUAF4(+IBT(IBX))
"RTN","IBCNRDV",77,0)
 .... S IBB=$$ADDSTF^IBCNBES($G(IBB(.03),1),DFN,.IBB)
"RTN","IBCNRDV",78,0)
 ... I '$D(IB1),$D(IBTYPE),$L($G(IBB(20.01))) D SCH^IBTUTL2(DFN,$G(IBSAVEI),$G(IBSAVEJ)):IBTYPE="TRKR",ADM^IBTUTL($G(IBSAVE1),$G(IBSAVE2),$G(IBSAVE3),$G(IBSAVE4)):IBTYPE="ADM" S IB1=1
"RTN","IBCNRDV",79,0)
 ... W:'$D(IBTYPE)&($L($G(IBB(20.01)))) !,$P($G(IBB),"^")," Buffer File entry for ",$G(IBB(20.01))
"RTN","IBCNRDV",80,0)
 ... K IBB
"RTN","IBCNRDV",81,0)
 ;
"RTN","IBCNRDV",82,0)
 ; flag so i don't do this patient again within 90 days
"RTN","IBCNRDV",83,0)
 S ^IBT(356,"ARDV",DFN,$$FMADD^XLFDT(DT,90))=""
"RTN","IBCNRDV",84,0)
 ;
"RTN","IBCNRDV",85,0)
 Q
"RTN","IBCNRDV",86,0)
 ;
"RTN","IBCNRDV",87,0)
RPC(IBD,IBICN) ; rpc entry for looking up insurance info
"RTN","IBCNRDV",88,0)
 N DFN,IBZ,IBX,IBY,IBP,IBI,IBT,IBZ
"RTN","IBCNRDV",89,0)
 S DFN=$$DFN^IBARXMU(IBICN) I 'DFN S IBD(0)="-1^ICN Not found" Q
"RTN","IBCNRDV",90,0)
 D ALL^IBCNS1(DFN,"IBY",3)
"RTN","IBCNRDV",91,0)
 I '$D(IBY) S IBD(0)="-1^No insurance on file" Q
"RTN","IBCNRDV",92,0)
 ; set up return format
"RTN","IBCNRDV",93,0)
 ; IBD(0)   = # of insurance companies
"RTN","IBCNRDV",94,0)
 S IBD(0)=$G(IBY(0))
"RTN","IBCNRDV",95,0)
 ;
"RTN","IBCNRDV",96,0)
 ; where n starts at 1 and increments 6 for each insurnace co
"RTN","IBCNRDV",97,0)
 ; IBD(n) = 355.33, zero node format
"RTN","IBCNRDV",98,0)
 ; IBD(n+1) = 355.33, 20 node format
"RTN","IBCNRDV",99,0)
 ; IBD(n+2) = 355.33, 21 node format
"RTN","IBCNRDV",100,0)
 ; IBD(n+3) = 355.33, 40 node format
"RTN","IBCNRDV",101,0)
 ; IBD(n+4) = 355.33, 60 node format
"RTN","IBCNRDV",102,0)
 ; IBD(n+5) = 355.33, 61 node format
"RTN","IBCNRDV",103,0)
 ;
"RTN","IBCNRDV",104,0)
 S IBP="|"
"RTN","IBCNRDV",105,0)
 S IBI=0 F  S IBI=$O(IBY(IBI))  Q:IBI<1  F IBL=5:1 S IBT=$P($T(MAP+IBL),";",3) Q:IBT=""  D
"RTN","IBCNRDV",106,0)
 . S IBZ=$P($G(IBY(IBI,+IBT)),"^",$P(IBT,IBP,2)) ; set the existing data
"RTN","IBCNRDV",107,0)
 . I $L($P(IBT,IBP,6)) X $P(IBT,IBP,6) ; output transform
"RTN","IBCNRDV",108,0)
 . S $P(IBD(IBI-1*6+$P(IBT,IBP,3)),"^",$P(IBT,IBP,4))=IBZ ; set data IBD
"RTN","IBCNRDV",109,0)
 Q
"RTN","IBCNRDV",110,0)
 ;
"RTN","IBCNRDV",111,0)
MAP ; this is a mapping of data returned from ALL^IBCNS1 to the buffer file
"RTN","IBCNRDV",112,0)
 ; format is:  node number | piece | extract node | extract piece
"RTN","IBCNRDV",113,0)
 ;             | 355.33 field number | format out code (if any)
"RTN","IBCNRDV",114,0)
 ;             | format in code (if any)
"RTN","IBCNRDV",115,0)
 ; the exract nodes will be sequential to match buffer file dd
"RTN","IBCNRDV",116,0)
 ;;0|1|2|1|20.01|N Z X "F Z=0,.11,.13 S IBY(IBI,36+Z)=$G(^DIC(36,IBZ,Z))" S IBZ=$P(IBY(IBI,36),"^");ins co name
"RTN","IBCNRDV",117,0)
 ;;0|2|5|4|60.04;subscriber id
"RTN","IBCNRDV",118,0)
 ;;0|4|5|3|60.03;experation date
"RTN","IBCNRDV",119,0)
 ;;0|6|5|5|60.05;who's insurance
"RTN","IBCNRDV",120,0)
 ;;0|8|5|2|60.02;effective date
"RTN","IBCNRDV",121,0)
 ;;0|16|5|6|60.06;pt relationship to insured
"RTN","IBCNRDV",122,0)
 ;;0|17|5|7|60.07;name of insured
"RTN","IBCNRDV",123,0)
 ;;0|20|5|12|60.12;coordination of benefits
"RTN","IBCNRDV",124,0)
 ;;1|3|1|10|.1||I IBZ<$$FMADD^XLFDT(DT,-180) K IBZ;date (last) verified
"RTN","IBCNRDV",125,0)
 ;;1|9|1|3|.03;source of information
"RTN","IBCNRDV",126,0)
 ;;2|1|6|5|61.05;send bill to employer
"RTN","IBCNRDV",127,0)
 ;;2|2|6|6|61.06;employer claims street address (line 1)
"RTN","IBCNRDV",128,0)
 ;;2|3|6|7|61.07;employer claims street address line 2
"RTN","IBCNRDV",129,0)
 ;;2|4|6|8|61.08;employer claims street address line 3
"RTN","IBCNRDV",130,0)
 ;;2|5|6|9|61.09;employer claims city
"RTN","IBCNRDV",131,0)
 ;;2|6|6|10|61.1|S IBZ=$$EXTERNAL^DILFD(2.312,2.06,"",IBZ)|N DIC,X,Y S DIC="^DIC(5,",X=IBZ,DIC(0)="OX" D ^DIC K:+Y<1 IBZ S:+Y>0 IBZ=+Y;employer claims state
"RTN","IBCNRDV",132,0)
 ;;2|7|6|11|61.11;employer claims zip code
"RTN","IBCNRDV",133,0)
 ;;2|8|6|12|61.12;employer claims phone
"RTN","IBCNRDV",134,0)
 ;;2|10|6|1|61.01;esghp
"RTN","IBCNRDV",135,0)
 ;;2|11|6|3|61.03;employment status
"RTN","IBCNRDV",136,0)
 ;;2|12|6|4|61.04;retirement date
"RTN","IBCNRDV",137,0)
 ;;3|1|5|8|60.08;insured's dob
"RTN","IBCNRDV",138,0)
 ;;3|5|5|9|60.09;insured's ssn
"RTN","IBCNRDV",139,0)
 ;;4|1|5|10|60.1;primary care provider
"RTN","IBCNRDV",140,0)
 ;;4|2|5|11|60.11;primary provider phone
"RTN","IBCNRDV",141,0)
 ;;355.3|2|4|1|40.01;is this a group policy
"RTN","IBCNRDV",142,0)
 ;;355.3|3|4|2|40.02;group name
"RTN","IBCNRDV",143,0)
 ;;355.3|4|4|3|40.03;group number
"RTN","IBCNRDV",144,0)
 ;;355.3|5|4|4|40.04;(is) utilization required
"RTN","IBCNRDV",145,0)
 ;;355.3|6|4|5|40.05;(is) pre-certification required
"RTN","IBCNRDV",146,0)
 ;;355.3|7|4|7|40.07;exclude pre-existing condition
"RTN","IBCNRDV",147,0)
 ;;355.3|8|4|8|40.08;benefits assignable
"RTN","IBCNRDV",148,0)
 ;;355.3|9|4|9|40.09;type of plan
"RTN","IBCNRDV",149,0)
 ;;355.3|12|4|6|40.06;ambulatory care certification
"RTN","IBCNRDV",150,0)
 ;;36|2|2|5|20.05;reimburse
"RTN","IBCNRDV",151,0)
 ;;36.11|1|3|1|21.01;street address line 1
"RTN","IBCNRDV",152,0)
 ;;36.11|2|3|2|21.02;street address line 2
"RTN","IBCNRDV",153,0)
 ;;36.11|3|3|3|21.03;street address line 3
"RTN","IBCNRDV",154,0)
 ;;36.11|4|3|4|21.04;city
"RTN","IBCNRDV",155,0)
 ;;36.11|5|3|5|21.05|S IBZ=$$EXTERNAL^DILFD(36,.115,"",IBZ)|N DIC,X,Y S DIC="^DIC(5,",X=IBZ,DIC(0)="OX" D ^DIC K:+Y<1 IBZ S:+Y>0 IBZ=+Y;state
"RTN","IBCNRDV",156,0)
 ;;36.11|6|3|6|21.06;zip code
"RTN","IBCNRDV",157,0)
 ;;36.13|1|2|2|20.02;phone number
"RTN","IBCNRDV",158,0)
 ;;36.13|2|2|3|20.03;billing phone number
"RTN","IBCNRDV",159,0)
 ;;36.13|3|2|4|20.04;precertification phone number
"RTN","IBCNRDV",160,0)
 ;;
"RTN","IBCNRDV",161,0)
 ;
"RTN","IBCNRDV",162,0)
SEND(IBH,IBX,IBICN,IBRPC) ; called to send off queries
"RTN","IBCNRDV",163,0)
 D EN1^XWB2HL7(.IBH,IBX,IBRPC,"",IBICN)
"RTN","IBCNRDV",164,0)
 Q
"RTN","IBCNRDV",165,0)
 ;
"RTN","IBCNRDV",166,0)
CHECK(IBR,IBH) ; called to check the return status of an RPC
"RTN","IBCNRDV",167,0)
 D RPCCHK^XWB2HL7(.IBR,IBH)
"RTN","IBCNRDV",168,0)
 Q
"RTN","IBCNRDV",169,0)
 ;
"RTN","IBCNRDV",170,0)
RETURN(IBR,IBH) ; called to get the return data and clear the broker
"RTN","IBCNRDV",171,0)
 N IBZ
"RTN","IBCNRDV",172,0)
 D RTNDATA^XWBDRPC(.IBR,IBH),CLEAR^XWBDRPC(.IBZ,IBH)
"RTN","IBCNRDV",173,0)
 Q
"RTN","IBCNRDV",174,0)
 ;
"RTN","IBCNRDV",175,0)
TASK ; queue off task job
"RTN","IBCNRDV",176,0)
 N ZTRTN,ZTDESC,ZTDTH,ZTIO,ZTSK,ZTSAVE
"RTN","IBCNRDV",177,0)
 S ZTRTN="BACKGND^IBCNRDV",ZTDESC="Query Remote Facilities for Insurance",ZTDTH=$$FMADD^XLFDT($$NOW^XLFDT),(ZTIO,ZTSAVE("DFN"),ZTSAVE("IBSAVE*"),ZTSAVE("IBTYPE"))="" D ^%ZTLOAD
"RTN","IBCNRDV",178,0)
 Q
"RTN","IBCNRDV",179,0)
 ;
"RTN","IBCNRDV",180,0)
TRKR(DFN,IBSAVEI,IBSAVEJ,IBDUZ) ; claims tracking entry
"RTN","IBCNRDV",181,0)
 N IBTYPE,IBT
"RTN","IBCNRDV",182,0)
 Q:$D(^IBT(356,"ARDV",DFN))  ; have already done recently
"RTN","IBCNRDV",183,0)
 Q:'$$TFL^IBARXMU(DFN,.IBT)  ; no remote facilities
"RTN","IBCNRDV",184,0)
 S IBTYPE="TRKR" D
"RTN","IBCNRDV",185,0)
 . I DUZ=.5 N DUZ S DUZ=+$G(IBDUZ),DUZ(2)=+$$SITE^VASITE
"RTN","IBCNRDV",186,0)
 . D TASK
"RTN","IBCNRDV",187,0)
 Q
"RTN","IBCNRDV",188,0)
 ;
"RTN","IBCNRDV",189,0)
ADM(DFN,IBSAVE1,IBSAVE2,IBSAVE3,IBSAVE4) ; admit event entry
"RTN","IBCNRDV",190,0)
 N IBTYPE S IBTYPE="ADM" D TASK
"RTN","IBCNRDV",191,0)
 Q
"RTN","IBCNRDV",192,0)
 ;
"RTN","IBCNRDV",193,0)
FILE(IBX) ; updates data into the log file
"RTN","IBCNRDV",194,0)
 ;IBX = number of insurance co's found
"RTN","IBCNRDV",195,0)
 N DIC,DA,DIE,IBM,DO,X,Y,IBZ,DR
"RTN","IBCNRDV",196,0)
 S IBM=$E($$DT^XLFDT,1,5)_"00",DA=+$O(^IBA(355.34,"B",IBM,0))
"RTN","IBCNRDV",197,0)
 I 'DA K DA L +^IBA(355.34,"B",IBM):10 S X=IBM,DIC="^IBA(355.34,",DIC(0)="F" D FILE^DICN S DA=+Y L -^IBA(355.34,"B",IBM)
"RTN","IBCNRDV",198,0)
 L +^IBA(355.34,DA):10
"RTN","IBCNRDV",199,0)
 S IBZ=^IBA(355.34,DA,0),DIE="^IBA(355.34,"
"RTN","IBCNRDV",200,0)
 S DR=".02///"_($P(IBZ,"^",2)+1)_";.03///"_($P(IBZ,"^",3)+IBX) D ^DIE
"RTN","IBCNRDV",201,0)
 L -^IBA(355.34,DA)
"RTN","IBCNRDV",202,0)
 Q
"VER")
8.0^22.0
"^DD",355.33,355.33,.14,0)
REMOTE LOCATION^P4'^DIC(4,^0;14^Q
"^DD",355.33,355.33,.14,3)
Specify the facility where this insurance information came from.
"^DD",355.33,355.33,.14,21,0)
^^3^3^3030715^
"^DD",355.33,355.33,.14,21,1,0)
This is the remote location from where this insurance information was 
"^DD",355.33,355.33,.14,21,2,0)
gathered from.  This field is optional and will only be completed if the 
"^DD",355.33,355.33,.14,21,3,0)
information came from a remote facility.
"^DD",355.33,355.33,.14,"DT")
3030715
**END**
**END**

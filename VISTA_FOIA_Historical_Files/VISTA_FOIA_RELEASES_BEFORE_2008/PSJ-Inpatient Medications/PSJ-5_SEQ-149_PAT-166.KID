Released PSJ*5*166 SEQ #149
Extracted from mail message
**KIDS**:PSJ*5.0*166^

**INSTALL NAME**
PSJ*5.0*166
"BLD",6172,0)
PSJ*5.0*166^INPATIENT MEDICATIONS^0^3060209^y
"BLD",6172,1,0)
^^5^5^3051104^
"BLD",6172,1,1,0)
 1. The Inpatient Medication Package patient name lookup routine is not
"BLD",6172,1,2,0)
    correctly looking up patient's using the partial match functionality
"BLD",6172,1,3,0)
    that is standard with other packages.  This patch will correct this by
"BLD",6172,1,4,0)
    replacing the lookup call to ^DIC with the DPTLK API designed for
"BLD",6172,1,5,0)
    patient lookup.
"BLD",6172,4,0)
^9.64PA^^
"BLD",6172,6)
2^
"BLD",6172,"KRN",0)
^9.67PA^8989.52^19
"BLD",6172,"KRN",.4,0)
.4
"BLD",6172,"KRN",.401,0)
.401
"BLD",6172,"KRN",.402,0)
.402
"BLD",6172,"KRN",.403,0)
.403
"BLD",6172,"KRN",.5,0)
.5
"BLD",6172,"KRN",.84,0)
.84
"BLD",6172,"KRN",3.6,0)
3.6
"BLD",6172,"KRN",3.8,0)
3.8
"BLD",6172,"KRN",9.2,0)
9.2
"BLD",6172,"KRN",9.8,0)
9.8
"BLD",6172,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6172,"KRN",9.8,"NM",1,0)
PSJDPT^^0^B4403319
"BLD",6172,"KRN",9.8,"NM","B","PSJDPT",1)
 
"BLD",6172,"KRN",19,0)
19
"BLD",6172,"KRN",19.1,0)
19.1
"BLD",6172,"KRN",101,0)
101
"BLD",6172,"KRN",409.61,0)
409.61
"BLD",6172,"KRN",771,0)
771
"BLD",6172,"KRN",870,0)
870
"BLD",6172,"KRN",8989.51,0)
8989.51
"BLD",6172,"KRN",8989.52,0)
8989.52
"BLD",6172,"KRN",8994,0)
8994
"BLD",6172,"KRN","B",.4,.4)
 
"BLD",6172,"KRN","B",.401,.401)
 
"BLD",6172,"KRN","B",.402,.402)
 
"BLD",6172,"KRN","B",.403,.403)
 
"BLD",6172,"KRN","B",.5,.5)
 
"BLD",6172,"KRN","B",.84,.84)
 
"BLD",6172,"KRN","B",3.6,3.6)
 
"BLD",6172,"KRN","B",3.8,3.8)
 
"BLD",6172,"KRN","B",9.2,9.2)
 
"BLD",6172,"KRN","B",9.8,9.8)
 
"BLD",6172,"KRN","B",19,19)
 
"BLD",6172,"KRN","B",19.1,19.1)
 
"BLD",6172,"KRN","B",101,101)
 
"BLD",6172,"KRN","B",409.61,409.61)
 
"BLD",6172,"KRN","B",771,771)
 
"BLD",6172,"KRN","B",870,870)
 
"BLD",6172,"KRN","B",8989.51,8989.51)
 
"BLD",6172,"KRN","B",8989.52,8989.52)
 
"BLD",6172,"KRN","B",8994,8994)
 
"BLD",6172,"QUES",0)
^9.62^^
"BLD",6172,"REQB",0)
^9.611^1^1
"BLD",6172,"REQB",1,0)
PSJ*5.0*124^2
"BLD",6172,"REQB","B","PSJ*5.0*124",1)
 
"MBREQ")
0
"PKG",221,-1)
1^1
"PKG",221,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",221,20,0)
^9.402P^^
"PKG",221,22,0)
^9.49I^1^1
"PKG",221,22,1,0)
5.0^2971215^2981113^1
"PKG",221,22,1,"PAH",1,0)
166^3060209^520645583
"PKG",221,22,1,"PAH",1,1,0)
^^5^5^3060209
"PKG",221,22,1,"PAH",1,1,1,0)
 1. The Inpatient Medication Package patient name lookup routine is not
"PKG",221,22,1,"PAH",1,1,2,0)
    correctly looking up patient's using the partial match functionality
"PKG",221,22,1,"PAH",1,1,3,0)
    that is standard with other packages.  This patch will correct this by
"PKG",221,22,1,"PAH",1,1,4,0)
    replacing the lookup call to ^DIC with the DPTLK API designed for
"PKG",221,22,1,"PAH",1,1,5,0)
    patient lookup.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")
 
"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSJDPT")
0^1^B4403319^B4843407
"RTN","PSJDPT",1,0)
PSJDPT ;BIR/JLC - CENTRALIZED PATIENT LOOKUP FOR IPM ; 07 Nov 00
"RTN","PSJDPT",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**53,124,166**;16 DEC 97
"RTN","PSJDPT",3,0)
 ;
"RTN","PSJDPT",4,0)
 ; Reference to ^DPT is supported by DBIA 10035
"RTN","PSJDPT",5,0)
 ; Reference to ^DGSEC4 is supported by DBIA 3027
"RTN","PSJDPT",6,0)
 ; Reference to ^DIC is supported by DBIA 10006
"RTN","PSJDPT",7,0)
 ; Reference to ^DICN is supported by DBIA 10009
"RTN","PSJDPT",8,0)
 ; Reference to ^DPTLK is supported by DBIA 3787
"RTN","PSJDPT",9,0)
 ; Reference to ^DPTLK1 is supported by DBIA 3266
"RTN","PSJDPT",10,0)
 ; Reference to DISPPRF^DGPFAPI is supported by DBIA 4563
"RTN","PSJDPT",11,0)
 ; Reference to GETACT^DGPFAPI is supported by DBIA 3860
"RTN","PSJDPT",12,0)
 ;
"RTN","PSJDPT",13,0)
EN ; MAIN ENTRY POINT FOR PATIENT LOOKUP
"RTN","PSJDPT",14,0)
 K DIC S DIC="^DPT(",DIC("W")="D DPT^PSJDPT",DIC(0)="QEMZ" D ^DPTLK K DIC
"RTN","PSJDPT",15,0)
 Q
"RTN","PSJDPT",16,0)
CHK(Y,DISP,PAUSE) N RESULT,RES,CHKY,PSGTEMP
"RTN","PSJDPT",17,0)
 S DISP=$G(DISP),PAUSE=$G(PAUSE)
"RTN","PSJDPT",18,0)
 I $G(XQY0)["PSJI COMPLETE",$$GETACT^DGPFAPI(+Y,"PSGTEMP") K PSGTEMP W @IOF,"PATIENT: ",$P(Y,U,2)
"RTN","PSJDPT",19,0)
 S CHKY=Y D DISPPRF^DGPFAPI(Y) S Y=CHKY K CHKY
"RTN","PSJDPT",20,0)
 D PTSEC^DGSEC4(.RESULT,$P(Y,"^"),1)
"RTN","PSJDPT",21,0)
 I RESULT(1)'=0 D
"RTN","PSJDPT",22,0)
 . W !! I DISP W ?(80-$L($P(Y,"^",2)))\2,$P(Y,"^",2),!
"RTN","PSJDPT",23,0)
 . F I=2:1:9 I $D(RESULT(I)) W ?(80-$L(RESULT(I)))\2,RESULT(I),!
"RTN","PSJDPT",24,0)
 . I RESULT(1)'=0,RESULT(1)'=2,PAUSE H 2
"RTN","PSJDPT",25,0)
 . Q:RESULT(1)=1
"RTN","PSJDPT",26,0)
 . I RESULT(1)=-1!(RESULT(1)=3)!(RESULT(1)=4) S Y=-1 Q
"RTN","PSJDPT",27,0)
 . I RESULT(1)=2 D ENCONT I Y=-1 Q
"RTN","PSJDPT",28,0)
 . D NOTICE^DGSEC4(.RES,Y,XQY0,$S(RESULT(1)=1:1,1:3)) I RES=0 S Y=-1 Q
"RTN","PSJDPT",29,0)
 Q
"RTN","PSJDPT",30,0)
ENCONT W !,"Do you want to continue processing this patient record"
"RTN","PSJDPT",31,0)
 S %=2 D YN^DICN I %<0!(%=2) S Y=-1
"RTN","PSJDPT",32,0)
 I '% W !!,"Enter 'YES' to continue processing, or 'NO' to quit processing this record." G ENCONT
"RTN","PSJDPT",33,0)
 Q
"RTN","PSJDPT",34,0)
DPT I $$DOB^DPTLK1(Y)["*SENSITIVE" G SENS
"RTN","PSJDPT",35,0)
 S ND=$S($D(^DPT(Y,0)):^(0),1:""),NB=$P(ND,"^",3),NS=$P(ND,"^",9)
"RTN","PSJDPT",36,0)
 I NS W ?42,$E(NS,1,3),"-",$E(NS,4,5),"-",$E(NS,6,10)," "
"RTN","PSJDPT",37,0)
 I NB W ?55,$E(NB,4,5),"/",$E(NB,6,7),"/",$E(NB,2,3)," "
"RTN","PSJDPT",38,0)
 I $D(^DPT(Y,.1)) W ?67,$P(^(.1),"^")
"RTN","PSJDPT",39,0)
 Q
"RTN","PSJDPT",40,0)
SENS W ?42,"*SENSITIVE* ",?55,"*SENSITIVE* ",?67,"*SENSITIVE*" Q
"VER")
8.0^22.0
"BLD",6172,6)
^149
**END**
**END**

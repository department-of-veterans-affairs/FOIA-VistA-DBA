$TXT Created by DIMICELI,RON at NXT.KERNEL.ISC-SF.VA.GOV  (KIDS) on WEDNESDAY, 05/31/00 at 09:50
=============================================================================
Run Date: MAY 31, 2000                     Designation: HL*1.6*64
Package : HL - HEALTH LEVEL SEVEN            Priority: Mandatory
Version : 1.6        SEQ #55                    Status: Released
=============================================================================

Associated patches: (v)HL*1.6*57       install with patch       `HL*1.6*64'
                    (v)HL*1.6*58       install with patch       `HL*1.6*64'
                    (v)HL*1.6*63       install with patch       `HL*1.6*64'

Subject: Update message status

Category: 
  - Routine

Description: 
============

 This patch addresses the following issues:
  1. Added new status, AWAITING RESPONSE, to the HL7 MESSAGE STATUS file.
  2. New parameter, HLP("ACKTIME"), will reset the Acknowledgement Timeout,
     for the one message. This parameter can be passed in GENERATE^HLMA or
     DIRECT^HLMA APIs.
  3. Retransmission alerts are no longer generated.
  4. DEVNOTOPN errors will no longer be recorded.
  5. New APIs:
         $$MSGSTAT^HLUTIL = returns status of a message
         $$MSGACT^HLUTIL  = outgoing message action, cancel or requeue
         $$CHKLL^HLUTIL   = check setup of Logical Link
         $$FLD^HLCSUTL    = returns a field from a message segment
 
 
 Installation Instructions: 
 ==========================
   1.  Users are allowed to be on the system during the installation.  
  
   2.  DSM SITES: Review your mapped set.  If any of the routines listed in
       the Routine Summary section are mapped, they should be removed from 
       the mapped set at this time.  
  
   3.  Shutdown all Logical Links and incoming and outgoing filers, and
       the Link Manager. Use the options:
  
         Filer and Link Management Options -> 
             SA     Stop All Messaging Background Processes
             LM     TCP/IP Link Manager Start/Stop
 
       For DSM sites ONLY, disabled all HL7 UCX Services 
       for this installation.
  
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
       option will load the KIDS package onto your system.  
  
   5.  The patch has now been loaded into a Transport global on your 
       system. You now need to use KIDS to install the Transport global.  
       On the KIDS menu, under the 'Installation' menu, use the following 
       options: 
  
          2 Verify Checksums in Transport Global 
          3 Print Transport Global 
          4 Compare Transport Global to Current System 
          5 Backup a Transport Global 
          6 Install Package(s) 
              INSTALL NAME: HL*1.6*64
                            =========
   
         Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.
   
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols?'.  
  
   6.  Startup all Logical Links and incoming and outgoing filers. Use the 
  
         Filer and Link Management Options ->
             RA     Restart/Start All Links and Filers
         (Note that links that do not have "autostart" enabled will need to
         be restarted manually)
    
       For DSM sites ONLY, if you previously disabled an HL7 UCX Service
       for this installation, you may now enable it.
  
   7.  DSM Sites: Rebuild your mapped set if necessary.
  
   8.  Start Link Manager using the option: "TCP/IP
         Link Manager Start/Stop."
 
 
 Routine Information:
 ====================
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;1.6;HEALTH LEVEL SEVEN;<patchlist>;JUL 17,1995
 
                  Checksum
 Routine         Old         New            2nd Line
 ========     ========     ========     =====================     
 HLCSAC        2497076      2564816     **43,64**
 HLCSTCP       5155167      5175308     **19,43,49,57,58,64**
 HLCSTCP1      4965932      5081718     **19,43,57,64**
 HLCSTCP2     11299763     11197019     **19,43,49,57,63,64**
 HLCSUTL       6479348      6969973     **2,19,58,64**
 HLMA2         7530649      7925412     **19,43,57,58,64**
 HLTF0         3173064      3232637     **12,19,64**
 HLUTIL        2643574      3175738     **36,19,57,64**
 
 List of preceding patches: 57, 58, 63
 Sites should use CHECK^XTSUMBLD to verify checksums.
 
 
 Documentation:
 ==============
 
  $$MSGSTAT^HLUTIL(X)      ;message status
    input value:  X = message id
 
   return value: status^status updated^error msg.^error type pointer^queue
                 position or # of retries^# open failed^ack timeout
     
         status:
                  0 = message doesn't exist
                  1 = pending transmission
                1.5 = being tranmitted
                1.7 = awaiting response, # of retries
                  2 = awaiting application ack
                  3 = successfully completed
                  4 = error
                  8 = being generated
                  9 = awaiting processing
 
 
  $$MSGACT^HLUTIL(X,HLIENACT)      ;outgoing message action
    input value:       X = message id
                HLIENACT = 1-cancel; 2-requeue
 
   return value:       1 = action sucessful
                       0 = action failed
 
 
  $$CHKLL^HLUTIL(X)        ;check setup of Logical Link
    input value:   X = institution number or name
 
   return value:   1 = setup OK
                   0 = LL setup incorrect
 
 
  $$FLD^HLCSUTL(NODE,FLD)   ;This function will return the value for the field
    input value:   NODE = HLNODE from the HLNEXT call, passed by reference
                    FLD = number, field position in segment
           note:    HL("FS") must be defined
 
   return value:  value for the field in this segment
 

Routine Information:
====================

Routine Name:
  - HLCSTCP


Routine Checksum:

Routine Name:
  - HLCSTCP1


Routine Checksum:

Routine Name:
  - HLCSTCP2


Routine Checksum:

Routine Name:
  - HLCSUTL


Routine Checksum:

Routine Name:
  - HLTF0


Routine Checksum:

Routine Name:
  - HLUTIL


Routine Checksum:

Routine Name:
  - HLMA2


Routine Checksum:

Routine Name:
  - HLCSAC


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : DIMICELI,RON                   Date Entered : MAR 07, 2000
Completed By: CLEMENS,JOHN                  Date Completed: MAY 31, 2000
Released By : SINGH,GURBIR                  Date Released : MAY 31, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

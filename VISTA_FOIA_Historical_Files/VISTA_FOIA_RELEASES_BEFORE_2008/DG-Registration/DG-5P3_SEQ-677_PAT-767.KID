Released DG*5.3*767 SEQ #677
Extracted from mail message
**KIDS**:DG*5.3*767^

**INSTALL NAME**
DG*5.3*767
"BLD",6913,0)
DG*5.3*767^REGISTRATION^0^3070912^y
"BLD",6913,1,0)
^^3^3^3070912^^
"BLD",6913,1,1,0)
This patch fixes an invalid input array entry
"BLD",6913,1,2,0)
error that occurs when using the DGEN APPTS,NOT ENROLLED 
"BLD",6913,1,3,0)
Upcoming Appointments without Enrollment option.
"BLD",6913,4,0)
^9.64PA^^
"BLD",6913,6.3)
2
"BLD",6913,"ABPKG")
n
"BLD",6913,"KRN",0)
^9.67PA^8989.52^19
"BLD",6913,"KRN",.4,0)
.4
"BLD",6913,"KRN",.401,0)
.401
"BLD",6913,"KRN",.402,0)
.402
"BLD",6913,"KRN",.403,0)
.403
"BLD",6913,"KRN",.5,0)
.5
"BLD",6913,"KRN",.84,0)
.84
"BLD",6913,"KRN",3.6,0)
3.6
"BLD",6913,"KRN",3.8,0)
3.8
"BLD",6913,"KRN",9.2,0)
9.2
"BLD",6913,"KRN",9.8,0)
9.8
"BLD",6913,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6913,"KRN",9.8,"NM",1,0)
DGENRPD2^^0^B45357065
"BLD",6913,"KRN",9.8,"NM","B","DGENRPD2",1)

"BLD",6913,"KRN",19,0)
19
"BLD",6913,"KRN",19.1,0)
19.1
"BLD",6913,"KRN",101,0)
101
"BLD",6913,"KRN",409.61,0)
409.61
"BLD",6913,"KRN",771,0)
771
"BLD",6913,"KRN",870,0)
870
"BLD",6913,"KRN",8989.51,0)
8989.51
"BLD",6913,"KRN",8989.52,0)
8989.52
"BLD",6913,"KRN",8994,0)
8994
"BLD",6913,"KRN","B",.4,.4)

"BLD",6913,"KRN","B",.401,.401)

"BLD",6913,"KRN","B",.402,.402)

"BLD",6913,"KRN","B",.403,.403)

"BLD",6913,"KRN","B",.5,.5)

"BLD",6913,"KRN","B",.84,.84)

"BLD",6913,"KRN","B",3.6,3.6)

"BLD",6913,"KRN","B",3.8,3.8)

"BLD",6913,"KRN","B",9.2,9.2)

"BLD",6913,"KRN","B",9.8,9.8)

"BLD",6913,"KRN","B",19,19)

"BLD",6913,"KRN","B",19.1,19.1)

"BLD",6913,"KRN","B",101,101)

"BLD",6913,"KRN","B",409.61,409.61)

"BLD",6913,"KRN","B",771,771)

"BLD",6913,"KRN","B",870,870)

"BLD",6913,"KRN","B",8989.51,8989.51)

"BLD",6913,"KRN","B",8989.52,8989.52)

"BLD",6913,"KRN","B",8994,8994)

"BLD",6913,"QUES",0)
^9.62^^
"BLD",6913,"REQB",0)
^9.611^1^1
"BLD",6913,"REQB",1,0)
DG*5.3*725^1
"BLD",6913,"REQB","B","DG*5.3*725",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
767^3070912
"PKG",5,22,1,"PAH",1,1,0)
^^3^3^3070912
"PKG",5,22,1,"PAH",1,1,1,0)
This patch fixes an invalid input array entry
"PKG",5,22,1,"PAH",1,1,2,0)
error that occurs when using the DGEN APPTS,NOT ENROLLED 
"PKG",5,22,1,"PAH",1,1,3,0)
Upcoming Appointments without Enrollment option.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DGENRPD2")
0^1^B45357065^B45286648
"RTN","DGENRPD2",1,0)
DGENRPD2 ;ALB/CJM/EG -Veteran with Future Appts and no Enrollment App Report - Continue 01/19/2005 ; 1/20/05 1:27pm
"RTN","DGENRPD2",2,0)
 ;;5.3;Registration;**147,232,568,585,725,767**;Aug 13,1993;Build 2
"RTN","DGENRPD2",3,0)
 ;
"RTN","DGENRPD2",4,0)
PRINT ;
"RTN","DGENRPD2",5,0)
 N CRT,QUIT,PAGE,SUBSCRPT
"RTN","DGENRPD2",6,0)
 K ^TMP($J)
"RTN","DGENRPD2",7,0)
 S QUIT=0
"RTN","DGENRPD2",8,0)
 S PAGE=0
"RTN","DGENRPD2",9,0)
 S CRT=$S($E(IOST,1,2)="C-":1,1:0)
"RTN","DGENRPD2",10,0)
 ;
"RTN","DGENRPD2",11,0)
 D GETPAT
"RTN","DGENRPD2",12,0)
 U IO
"RTN","DGENRPD2",13,0)
 I CRT,PAGE=0 W @IOF
"RTN","DGENRPD2",14,0)
 S PAGE=1
"RTN","DGENRPD2",15,0)
 D HEADER
"RTN","DGENRPD2",16,0)
 F SUBSCRPT="STEP2","NOENREC" D
"RTN","DGENRPD2",17,0)
 .D PATIENTS(SUBSCRPT)
"RTN","DGENRPD2",18,0)
 I CRT,'QUIT D PAUSE
"RTN","DGENRPD2",19,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","DGENRPD2",20,0)
 D ^%ZISC
"RTN","DGENRPD2",21,0)
 ;
"RTN","DGENRPD2",22,0)
 K ^TMP($J)
"RTN","DGENRPD2",23,0)
 Q
"RTN","DGENRPD2",24,0)
LINE(LINE) ;
"RTN","DGENRPD2",25,0)
 ;Description: prints a line. First prints header if at end of page.
"RTN","DGENRPD2",26,0)
 ;
"RTN","DGENRPD2",27,0)
 I CRT,($Y>(IOSL-4)) D
"RTN","DGENRPD2",28,0)
 .D PAUSE
"RTN","DGENRPD2",29,0)
 .Q:QUIT
"RTN","DGENRPD2",30,0)
 .W @IOF
"RTN","DGENRPD2",31,0)
 .D HEADER
"RTN","DGENRPD2",32,0)
 .W LINE
"RTN","DGENRPD2",33,0)
 ;
"RTN","DGENRPD2",34,0)
 E  I ('CRT),($Y>(IOSL-2)) D
"RTN","DGENRPD2",35,0)
 .W @IOF
"RTN","DGENRPD2",36,0)
 .D HEADER
"RTN","DGENRPD2",37,0)
 .W LINE
"RTN","DGENRPD2",38,0)
 ;
"RTN","DGENRPD2",39,0)
 E  W !,LINE
"RTN","DGENRPD2",40,0)
 Q
"RTN","DGENRPD2",41,0)
 ;
"RTN","DGENRPD2",42,0)
GETPAT ;
"RTN","DGENRPD2",43,0)
 ; Description: Gets patients to include in the report
"RTN","DGENRPD2",44,0)
 N BEGIN,END,DGARRAY,SDCNT,CATEGORY,DIVISION,NAM
"RTN","DGENRPD2",45,0)
 S BEGIN=DGENRP("BEGIN")_".0000",END=DGENRP("END")_".2359",DGARRAY(1)=BEGIN_";"_END
"RTN","DGENRPD2",46,0)
 S DGARRAY("FLDS")="3;10",SDCNT=$$SDAPI^SDAMA301(.DGARRAY)
"RTN","DGENRPD2",47,0)
 ;
"RTN","DGENRPD2",48,0)
 ;there must be subscripts underneath the 101 level to be a
"RTN","DGENRPD2",49,0)
 ;valid appointment, else it is an error eg 01/20/2005
"RTN","DGENRPD2",50,0)
 ; Appointment Database is Unavailable
"RTN","DGENRPD2",51,0)
 I SDCNT<0 N X S X=$$FAPCHK I X'="" S NAM=X G ERR
"RTN","DGENRPD2",52,0)
 ;
"RTN","DGENRPD2",53,0)
 ; Get All records for report
"RTN","DGENRPD2",54,0)
 I DGENRP("ALL") D
"RTN","DGENRPD2",55,0)
 .S CLINIC=0 F  S CLINIC=$O(^TMP($J,"SDAMA301",CLINIC)) Q:'CLINIC  D
"RTN","DGENRPD2",56,0)
 ..Q:$P($G(^SC(CLINIC,0)),"^",3)'="C"
"RTN","DGENRPD2",57,0)
 ..S DFN=0 F  S DFN=$O(^TMP($J,"SDAMA301",CLINIC,DFN)) Q:'DFN  D
"RTN","DGENRPD2",58,0)
 ...S DIVISION=$P($G(^SC(CLINIC,0)),U,15)
"RTN","DGENRPD2",59,0)
 ...S:'DIVISION DIVISION=$O(^DG(40.8,0))
"RTN","DGENRPD2",60,0)
 ...D VALREC(CLINIC,DFN)
"RTN","DGENRPD2",61,0)
 ;
"RTN","DGENRPD2",62,0)
 ; Get records for specified Divisions only
"RTN","DGENRPD2",63,0)
 I $O(DGENRP("DIVISION",0)) D
"RTN","DGENRPD2",64,0)
 .S CLINIC=0 F  S CLINIC=$O(^TMP($J,"SDAMA301",CLINIC)) Q:'CLINIC  D
"RTN","DGENRPD2",65,0)
 ..Q:$P($G(^SC(CLINIC,0)),"^",3)'="C"
"RTN","DGENRPD2",66,0)
 ..S DIVISION=$P($G(^SC(CLINIC,0)),U,15)
"RTN","DGENRPD2",67,0)
 ..S:'DIVISION DIVISION=$O(^DG(40.8,0))
"RTN","DGENRPD2",68,0)
 ..Q:'DIVISION!('$D(DGENRP("DIVISION",DIVISION)))
"RTN","DGENRPD2",69,0)
 ..S DFN=0 F  S DFN=$O(^TMP($J,"SDAMA301",CLINIC,DFN)) Q:'DFN  D VALREC(CLINIC,DFN)
"RTN","DGENRPD2",70,0)
 ;
"RTN","DGENRPD2",71,0)
 ; Get records for specified Clinics only
"RTN","DGENRPD2",72,0)
 I $O(DGENRP("CLINIC",0)) D
"RTN","DGENRPD2",73,0)
 .S CLINIC=0 F  S CLINIC=$O(^TMP($J,"SDAMA301",CLINIC)) Q:'CLINIC  D
"RTN","DGENRPD2",74,0)
 ..Q:'CLINIC!('$D(DGENRP("CLINIC",CLINIC)))
"RTN","DGENRPD2",75,0)
 ..Q:($P($G(^SC(CLINIC,0)),U,3)'="C")
"RTN","DGENRPD2",76,0)
 ..S DIVISION=$P($G(^SC(CLINIC,0)),U,15)
"RTN","DGENRPD2",77,0)
 ..S:'DIVISION DIVISION=$O(^DG(40.8,0))
"RTN","DGENRPD2",78,0)
 ..S DFN=0 F  S DFN=$O(^TMP($J,"SDAMA301",CLINIC,DFN)) Q:'DFN  D VALREC(CLINIC,DFN)
"RTN","DGENRPD2",79,0)
 ;
"RTN","DGENRPD2",80,0)
 K DGARRAY,^TMP($J,"SDAMA301"),SDCNT
"RTN","DGENRPD2",81,0)
 Q
"RTN","DGENRPD2",82,0)
 ;
"RTN","DGENRPD2",83,0)
ERR ;
"RTN","DGENRPD2",84,0)
 ;^TMP($J,TYPE,DIVISION NAME,CLINIC NAME,CATEGORY,APPT DT/TM,DFN)
"RTN","DGENRPD2",85,0)
 I NAM["Appointment Database is unavailable. Please try again later." S NAM="**Appointment Database is Unavailable**"
"RTN","DGENRPD2",86,0)
 I NAM["Appointment request contains invalid values." S NAM="**Invalid appointment, call Help Desk**"
"RTN","DGENRPD2",87,0)
 I NAM["An error has occurred. Check the RSA Error Log." S NAM="**Error,  check RSA Error Log **"
"RTN","DGENRPD2",88,0)
 S ^TMP($J,"NOENREC"," ",NAM," ",DT," ")=""
"RTN","DGENRPD2",89,0)
 K DGARRAY,^TMP($J,"SDAMA301"),SDCNT,NAM
"RTN","DGENRPD2",90,0)
 Q
"RTN","DGENRPD2",91,0)
 ;
"RTN","DGENRPD2",92,0)
VALREC(CLINIC,DFN) ;
"RTN","DGENRPD2",93,0)
 ;
"RTN","DGENRPD2",94,0)
 N APPT,STATUS,JUSTONCE S JUSTONCE=0
"RTN","DGENRPD2",95,0)
 S APPT=0 F  S APPT=$O(^TMP($J,"SDAMA301",CLINIC,DFN,APPT)) Q:'APPT!(JUSTONCE)  D
"RTN","DGENRPD2",96,0)
 .S JUSTONCE=+$G(DGENRP("JUSTONCE"))
"RTN","DGENRPD2",97,0)
 .; Exclude certain appointment statuses
"RTN","DGENRPD2",98,0)
 .S STATUS=$P($P(^TMP($J,"SDAMA301",CLINIC,DFN,APPT),U,3),";")
"RTN","DGENRPD2",99,0)
 .Q:"^NS^NSR^CC^CCR^CP^CPR^"[(U_STATUS_U)
"RTN","DGENRPD2",100,0)
 .;
"RTN","DGENRPD2",101,0)
 .; Don't include enrolled veterans or ones that have pending apps
"RTN","DGENRPD2",102,0)
 .S CATEGORY=$$CATEGORY^DGENA4(DFN)
"RTN","DGENRPD2",103,0)
 .I (CATEGORY="E")!(CATEGORY="P") Q
"RTN","DGENRPD2",104,0)
 .;
"RTN","DGENRPD2",105,0)
 .; Exclude if not an eligible veteran (can not enroll)
"RTN","DGENRPD2",106,0)
 .Q:'$$VET^DGENPTA(DFN)
"RTN","DGENRPD2",107,0)
 .;
"RTN","DGENRPD2",108,0)
 .D SETTMP(CLINIC,DFN,APPT)
"RTN","DGENRPD2",109,0)
 Q
"RTN","DGENRPD2",110,0)
 ;
"RTN","DGENRPD2",111,0)
SETTMP(CLINIC,DFN,APPT) ;
"RTN","DGENRPD2",112,0)
 ; NOENREC is for patients without enrollment records
"RTN","DGENRPD2",113,0)
 ; SITE2 is for other excluded enrollment records
"RTN","DGENRPD2",114,0)
 ;^TMP($J,TYPE,DIVISION NAME,CLINIC NAME,CATEGORY,APPT DT/TM,DFN)
"RTN","DGENRPD2",115,0)
 ;
"RTN","DGENRPD2",116,0)
 N DIVNAME,CLNAME
"RTN","DGENRPD2",117,0)
 S DIVNAME=$S(DIVISION:$P($$SITE^VASITE(APPT\1,DIVISION),U,2),1:" ")
"RTN","DGENRPD2",118,0)
 S CLNAME=$P($G(^SC(CLINIC,0)),"^")
"RTN","DGENRPD2",119,0)
 S:CLNAME="" CLNAME=" "
"RTN","DGENRPD2",120,0)
 ;
"RTN","DGENRPD2",121,0)
 I $$FINDCUR^DGENA(DFN)="" S ^TMP($J,"NOENREC",DIVNAME,CLNAME,CATEGORY,APPT,DFN)="" Q
"RTN","DGENRPD2",122,0)
 S ^TMP($J,"STEP2",DIVNAME,CLNAME,CATEGORY,APPT,DFN)=$$STATUS^DGENA(DFN)_U_$P($P(^TMP($J,"SDAMA301",CLINIC,DFN,APPT),U,10),";",2)
"RTN","DGENRPD2",123,0)
 Q
"RTN","DGENRPD2",124,0)
 ;
"RTN","DGENRPD2",125,0)
HEADER ;
"RTN","DGENRPD2",126,0)
 ;Description: Prints the report header.
"RTN","DGENRPD2",127,0)
 ;
"RTN","DGENRPD2",128,0)
 N LINE
"RTN","DGENRPD2",129,0)
 I $Y>1 W @IOF
"RTN","DGENRPD2",130,0)
 W !,"Appointments for Veterans with no Enrollment Application"
"RTN","DGENRPD2",131,0)
 W:DGENRP("BEGIN") ?70,"Date Range: "_$$FMTE^XLFDT(DGENRP("BEGIN"))_" to "_$$FMTE^XLFDT($G(DGENRP("END")))
"RTN","DGENRPD2",132,0)
 W ?120,"Page ",PAGE
"RTN","DGENRPD2",133,0)
 S PAGE=PAGE+1
"RTN","DGENRPD2",134,0)
 W !
"RTN","DGENRPD2",135,0)
 W ?70," Run Date: "_$$FMTE^XLFDT(DT)
"RTN","DGENRPD2",136,0)
 W !
"RTN","DGENRPD2",137,0)
 ;
"RTN","DGENRPD2",138,0)
 W !,"Name",?39,"PatientID",?57,"DOB",?70,"Appt Dt/Tm",?90,"EnrollStatus",?121,"Enroll Cat"
"RTN","DGENRPD2",139,0)
 S $P(LINE,"-",132)="-"
"RTN","DGENRPD2",140,0)
 W !,LINE,!
"RTN","DGENRPD2",141,0)
 Q
"RTN","DGENRPD2",142,0)
 ;
"RTN","DGENRPD2",143,0)
PAUSE ;
"RTN","DGENRPD2",144,0)
 ;Description: Screen pause.  Sets QUIT=1 if user decides to quit.
"RTN","DGENRPD2",145,0)
 ;
"RTN","DGENRPD2",146,0)
 N DIR,X,Y
"RTN","DGENRPD2",147,0)
 F  Q:$Y>(IOSL-3)  W !
"RTN","DGENRPD2",148,0)
 S DIR(0)="E"
"RTN","DGENRPD2",149,0)
 D ^DIR
"RTN","DGENRPD2",150,0)
 I ('(+Y))!$D(DIRUT) S QUIT=1
"RTN","DGENRPD2",151,0)
 Q
"RTN","DGENRPD2",152,0)
 ;
"RTN","DGENRPD2",153,0)
PATIENTS(SUBSCRPT) ;
"RTN","DGENRPD2",154,0)
 ;Description: Prints list of patients
"RTN","DGENRPD2",155,0)
 ;
"RTN","DGENRPD2",156,0)
 N NODE,DIVISION,CLINIC,TIME,PATIENT,DGPAT,APPTYPE,ENRSTAT,CATEGORY
"RTN","DGENRPD2",157,0)
 ;
"RTN","DGENRPD2",158,0)
 ;
"RTN","DGENRPD2",159,0)
 S DIVISION=""
"RTN","DGENRPD2",160,0)
 F  S DIVISION=$O(^TMP($J,SUBSCRPT,DIVISION)) Q:DIVISION=""  D  Q:QUIT
"RTN","DGENRPD2",161,0)
 .D LINE("  ") Q:QUIT
"RTN","DGENRPD2",162,0)
 .D LINE($$LJ(" ",40)_"DIVISION: "_DIVISION) Q:QUIT
"RTN","DGENRPD2",163,0)
 .D LINE("  ") Q:QUIT
"RTN","DGENRPD2",164,0)
 .S CLINIC=""
"RTN","DGENRPD2",165,0)
 .F  S CLINIC=$O(^TMP($J,SUBSCRPT,DIVISION,CLINIC)) Q:CLINIC=""  D  Q:QUIT
"RTN","DGENRPD2",166,0)
 ..D LINE("  ") Q:QUIT
"RTN","DGENRPD2",167,0)
 ..D LINE("CLINIC: "_$$LJ(CLINIC,40)_$$LJ(" ",40)_"DIVISION: "_DIVISION)
"RTN","DGENRPD2",168,0)
 ..Q:QUIT
"RTN","DGENRPD2",169,0)
 ..S CATEGORY=""
"RTN","DGENRPD2",170,0)
 ..F  S CATEGORY=$O(^TMP($J,SUBSCRPT,DIVISION,CLINIC,CATEGORY)) Q:CATEGORY=""  D  Q:QUIT
"RTN","DGENRPD2",171,0)
 ...D LINE(" ") Q:QUIT
"RTN","DGENRPD2",172,0)
 ...S TIME=0
"RTN","DGENRPD2",173,0)
 ...F  S TIME=$O(^TMP($J,SUBSCRPT,DIVISION,CLINIC,CATEGORY,TIME)) Q:'TIME  D  Q:QUIT
"RTN","DGENRPD2",174,0)
 ....S DFN=0
"RTN","DGENRPD2",175,0)
 ....F  S DFN=$O(^TMP($J,SUBSCRPT,DIVISION,CLINIC,CATEGORY,TIME,DFN)) Q:'DFN  D  Q:QUIT
"RTN","DGENRPD2",176,0)
 .....S NODE=$G(^TMP($J,SUBSCRPT,DIVISION,CLINIC,CATEGORY,TIME,DFN))
"RTN","DGENRPD2",177,0)
 .....S ENRSTAT=$P(NODE,"^")
"RTN","DGENRPD2",178,0)
 .....S APPTYPE=$P(NODE,"^",2)
"RTN","DGENRPD2",179,0)
 .....Q:'$$GET^DGENPTA(DFN,.DGPAT)
"RTN","DGENRPD2",180,0)
 .....S LINE=$$LJ(DGPAT("NAME"),37)_" "_$$LJ(DGPAT("PID"),15)_" "
"RTN","DGENRPD2",181,0)
 .....S LINE=LINE_$$LJ($$DATE(DGPAT("DOB")),12)_"  "
"RTN","DGENRPD2",182,0)
 .....S LINE=LINE_$$LJ($$DATE(TIME),20)
"RTN","DGENRPD2",183,0)
 .....S LINE=LINE_"  "_$$LJ($S(ENRSTAT="":"NO ENROLLMENT RECORD",1:$$EXT^DGENU("STATUS",ENRSTAT)),28)
"RTN","DGENRPD2",184,0)
 .....S LINE=LINE_$$LJ(" ",2)_$$EXTCAT^DGENA4(CATEGORY)
"RTN","DGENRPD2",185,0)
 .....D LINE(LINE)
"RTN","DGENRPD2",186,0)
 .....Q:QUIT
"RTN","DGENRPD2",187,0)
 Q
"RTN","DGENRPD2",188,0)
 ;
"RTN","DGENRPD2",189,0)
DATE(DATE) ;
"RTN","DGENRPD2",190,0)
 Q $$FMTE^XLFDT(DATE,"1")
"RTN","DGENRPD2",191,0)
 ;
"RTN","DGENRPD2",192,0)
LJ(STRING,LENGTH) ;
"RTN","DGENRPD2",193,0)
 Q $$LJ^XLFSTR($E(STRING,1,LENGTH),LENGTH)
"RTN","DGENRPD2",194,0)
 ;
"RTN","DGENRPD2",195,0)
FAPCHK() ;
"RTN","DGENRPD2",196,0)
 N ERR
"RTN","DGENRPD2",197,0)
 S ERR=$O(^TMP($J,"SDAMA301",""))
"RTN","DGENRPD2",198,0)
 I $D(^TMP($J,"SDAMA301",ERR))=1 Q ^TMP($J,"SDAMA301",ERR)
"RTN","DGENRPD2",199,0)
 Q ""
"VER")
8.0^22.0
"BLD",6913,6)
^677
**END**
**END**

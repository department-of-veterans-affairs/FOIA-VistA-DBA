Released RMPR*3*59 SEQ #64
Extracted from mail message
**KIDS**:RMPR*3.0*59^

**INSTALL NAME**
RMPR*3.0*59
"BLD",3196,0)
RMPR*3.0*59^PROSTHETICS^0^3030619^y
"BLD",3196,1,0)
^^1^1^3030306^
"BLD",3196,1,1,0)
Delay Order Report, 2319 button attached.
"BLD",3196,4,0)
^9.64PA^668^1
"BLD",3196,4,668,0)
668
"BLD",3196,4,668,2,0)
^9.641^668^1
"BLD",3196,4,668,2,668,0)
PROSTHETIC SUSPENSE  (File-top level)
"BLD",3196,4,668,2,668,1,0)
^9.6411^5^2
"BLD",3196,4,668,2,668,1,5,0)
COMPLETION DATE
"BLD",3196,4,668,2,668,1,14,0)
STATUS
"BLD",3196,4,668,222)
y^n^p^^^^n
"BLD",3196,4,"APDD",668,668)

"BLD",3196,4,"APDD",668,668,5)

"BLD",3196,4,"APDD",668,668,14)

"BLD",3196,4,"B",668,668)

"BLD",3196,"ABPKG")
n
"BLD",3196,"INID")
^y
"BLD",3196,"INIT")
RMPR9RI
"BLD",3196,"KRN",0)
^9.67PA^8989.52^19
"BLD",3196,"KRN",.4,0)
.4
"BLD",3196,"KRN",.401,0)
.401
"BLD",3196,"KRN",.402,0)
.402
"BLD",3196,"KRN",.403,0)
.403
"BLD",3196,"KRN",.5,0)
.5
"BLD",3196,"KRN",.84,0)
.84
"BLD",3196,"KRN",3.6,0)
3.6
"BLD",3196,"KRN",3.8,0)
3.8
"BLD",3196,"KRN",9.2,0)
9.2
"BLD",3196,"KRN",9.8,0)
9.8
"BLD",3196,"KRN",9.8,"NM",0)
^9.68A^33^21
"BLD",3196,"KRN",9.8,"NM",1,0)
RMPR9CE^^0^B1268597
"BLD",3196,"KRN",9.8,"NM",2,0)
RMPR9CL^^0^B4042694
"BLD",3196,"KRN",9.8,"NM",3,0)
RMPR9S6^^0^B655259
"BLD",3196,"KRN",9.8,"NM",4,0)
RMPR9DM1^^0^B988680
"BLD",3196,"KRN",9.8,"NM",5,0)
RMPR9LM^^0^B2551359
"BLD",3196,"KRN",9.8,"NM",6,0)
RMPR9PA^^0^B1661694
"BLD",3196,"KRN",9.8,"NM",7,0)
RMPR9DEM^^0^B11309474
"BLD",3196,"KRN",9.8,"NM",8,0)
RMPR9S7^^0^B21651675
"BLD",3196,"KRN",9.8,"NM",9,0)
RMPR9S8^^0^B21751008
"BLD",3196,"KRN",9.8,"NM",11,0)
RMPR9S4^^0^B24918776
"BLD",3196,"KRN",9.8,"NM",12,0)
RMPR9S4E^^0^B34307057
"BLD",3196,"KRN",9.8,"NM",14,0)
RMPR9VR^^0^B5492507
"BLD",3196,"KRN",9.8,"NM",15,0)
RMPR9EPD^^0^B1278644
"BLD",3196,"KRN",9.8,"NM",17,0)
RMPREOU^^0^B16234543
"BLD",3196,"KRN",9.8,"NM",19,0)
RMPRUTL1^^0^B8915341
"BLD",3196,"KRN",9.8,"NM",22,0)
RMPR9X^^0^B10205906
"BLD",3196,"KRN",9.8,"NM",25,0)
RMPRESRV^^0^B4671403
"BLD",3196,"KRN",9.8,"NM",29,0)
RMPR9RI^^0^B420522
"BLD",3196,"KRN",9.8,"NM",31,0)
RMPREXT^^0^B25882706
"BLD",3196,"KRN",9.8,"NM",32,0)
RMPR9S8P^^0^B1849215
"BLD",3196,"KRN",9.8,"NM",33,0)
RMPR9DO^^0^B75679223
"BLD",3196,"KRN",9.8,"NM","B","RMPR9CE",1)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9CL",2)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9DEM",7)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9DM1",4)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9DO",33)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9EPD",15)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9LM",5)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9PA",6)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9RI",29)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9S4",11)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9S4E",12)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9S6",3)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9S7",8)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9S8",9)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9S8P",32)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9VR",14)

"BLD",3196,"KRN",9.8,"NM","B","RMPR9X",22)

"BLD",3196,"KRN",9.8,"NM","B","RMPREOU",17)

"BLD",3196,"KRN",9.8,"NM","B","RMPRESRV",25)

"BLD",3196,"KRN",9.8,"NM","B","RMPREXT",31)

"BLD",3196,"KRN",9.8,"NM","B","RMPRUTL1",19)

"BLD",3196,"KRN",19,0)
19
"BLD",3196,"KRN",19,"NM",0)
^9.68A^3^3
"BLD",3196,"KRN",19,"NM",1,0)
RMPR OFFICIAL^^2
"BLD",3196,"KRN",19,"NM",2,0)
RMPR CLERK^^2
"BLD",3196,"KRN",19,"NM",3,0)
RMPR GUI DOR^^0
"BLD",3196,"KRN",19,"NM","B","RMPR CLERK",2)

"BLD",3196,"KRN",19,"NM","B","RMPR GUI DOR",3)

"BLD",3196,"KRN",19,"NM","B","RMPR OFFICIAL",1)

"BLD",3196,"KRN",19.1,0)
19.1
"BLD",3196,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",3196,"KRN",101,0)
101
"BLD",3196,"KRN",409.61,0)
409.61
"BLD",3196,"KRN",771,0)
771
"BLD",3196,"KRN",870,0)
870
"BLD",3196,"KRN",8989.51,0)
8989.51
"BLD",3196,"KRN",8989.52,0)
8989.52
"BLD",3196,"KRN",8994,0)
8994
"BLD",3196,"KRN",8994,"NM",0)
^9.68A^24^24
"BLD",3196,"KRN",8994,"NM",1,0)
RMPR ADD ITEM^^0
"BLD",3196,"KRN",8994,"NM",2,0)
RMPR CLINIC ENROLLMENT^^0
"BLD",3196,"KRN",8994,"NM",3,0)
RMPR CLINIC LETTER DISPLAY^^0
"BLD",3196,"KRN",8994,"NM",4,0)
RMPR CLINIC LETTER LIST^^0
"BLD",3196,"KRN",8994,"NM",5,0)
RMPR DIS LIST^^0
"BLD",3196,"KRN",8994,"NM",6,0)
RMPR LAST PT MOVEMENTS^^0
"BLD",3196,"KRN",8994,"NM",7,0)
RMPR PENDING APPOINTMENTS^^0
"BLD",3196,"KRN",8994,"NM",8,0)
RMPR PT ADD^^0
"BLD",3196,"KRN",8994,"NM",9,0)
RMPR PT DEM^^0
"BLD",3196,"KRN",8994,"NM",10,0)
RMPR TRANS LIST^^0
"BLD",3196,"KRN",8994,"NM",11,0)
RMPR CRITICAL COM^^0
"BLD",3196,"KRN",8994,"NM",12,0)
RMPR TRANS HISA^^0
"BLD",3196,"KRN",8994,"NM",13,0)
RMPR TRANS HOME O2^^0
"BLD",3196,"KRN",8994,"NM",14,0)
RMPR DOR^^0
"BLD",3196,"KRN",8994,"NM",15,0)
RMPR NPPD LIST^^0
"BLD",3196,"KRN",8994,"NM",16,0)
RMPR IFCAP CHECK AUTH^^0
"BLD",3196,"KRN",8994,"NM",17,0)
RMPR VEN ADDRESS^^0
"BLD",3196,"KRN",8994,"NM",18,0)
RMPR CPRS DISPLAY^^0
"BLD",3196,"KRN",8994,"NM",19,0)
RMPR TRANS LIST EXPANDED^^0
"BLD",3196,"KRN",8994,"NM",20,0)
RMPR VIEW REQ^^0
"BLD",3196,"KRN",8994,"NM",21,0)
RMPR VIEW REQ DESC^^0
"BLD",3196,"KRN",8994,"NM",22,0)
RMPR VIEW REQ IA NOTE^^0
"BLD",3196,"KRN",8994,"NM",23,0)
RMPR VIEW REQ COMP NOTE^^0
"BLD",3196,"KRN",8994,"NM",24,0)
RMPR TRANS HOME O2 RX^^0
"BLD",3196,"KRN",8994,"NM","B","RMPR ADD ITEM",1)

"BLD",3196,"KRN",8994,"NM","B","RMPR CLINIC ENROLLMENT",2)

"BLD",3196,"KRN",8994,"NM","B","RMPR CLINIC LETTER DISPLAY",3)

"BLD",3196,"KRN",8994,"NM","B","RMPR CLINIC LETTER LIST",4)

"BLD",3196,"KRN",8994,"NM","B","RMPR CPRS DISPLAY",18)

"BLD",3196,"KRN",8994,"NM","B","RMPR CRITICAL COM",11)

"BLD",3196,"KRN",8994,"NM","B","RMPR DIS LIST",5)

"BLD",3196,"KRN",8994,"NM","B","RMPR DOR",14)

"BLD",3196,"KRN",8994,"NM","B","RMPR IFCAP CHECK AUTH",16)

"BLD",3196,"KRN",8994,"NM","B","RMPR LAST PT MOVEMENTS",6)

"BLD",3196,"KRN",8994,"NM","B","RMPR NPPD LIST",15)

"BLD",3196,"KRN",8994,"NM","B","RMPR PENDING APPOINTMENTS",7)

"BLD",3196,"KRN",8994,"NM","B","RMPR PT ADD",8)

"BLD",3196,"KRN",8994,"NM","B","RMPR PT DEM",9)

"BLD",3196,"KRN",8994,"NM","B","RMPR TRANS HISA",12)

"BLD",3196,"KRN",8994,"NM","B","RMPR TRANS HOME O2",13)

"BLD",3196,"KRN",8994,"NM","B","RMPR TRANS HOME O2 RX",24)

"BLD",3196,"KRN",8994,"NM","B","RMPR TRANS LIST",10)

"BLD",3196,"KRN",8994,"NM","B","RMPR TRANS LIST EXPANDED",19)

"BLD",3196,"KRN",8994,"NM","B","RMPR VEN ADDRESS",17)

"BLD",3196,"KRN",8994,"NM","B","RMPR VIEW REQ",20)

"BLD",3196,"KRN",8994,"NM","B","RMPR VIEW REQ COMP NOTE",23)

"BLD",3196,"KRN",8994,"NM","B","RMPR VIEW REQ DESC",21)

"BLD",3196,"KRN",8994,"NM","B","RMPR VIEW REQ IA NOTE",22)

"BLD",3196,"KRN","B",.4,.4)

"BLD",3196,"KRN","B",.401,.401)

"BLD",3196,"KRN","B",.402,.402)

"BLD",3196,"KRN","B",.403,.403)

"BLD",3196,"KRN","B",.5,.5)

"BLD",3196,"KRN","B",.84,.84)

"BLD",3196,"KRN","B",3.6,3.6)

"BLD",3196,"KRN","B",3.8,3.8)

"BLD",3196,"KRN","B",9.2,9.2)

"BLD",3196,"KRN","B",9.8,9.8)

"BLD",3196,"KRN","B",19,19)

"BLD",3196,"KRN","B",19.1,19.1)

"BLD",3196,"KRN","B",101,101)

"BLD",3196,"KRN","B",409.61,409.61)

"BLD",3196,"KRN","B",771,771)

"BLD",3196,"KRN","B",870,870)

"BLD",3196,"KRN","B",8989.51,8989.51)

"BLD",3196,"KRN","B",8989.52,8989.52)

"BLD",3196,"KRN","B",8994,8994)

"BLD",3196,"QUES",0)
^9.62^^
"BLD",3196,"REQB",0)
^9.611^^
"FIA",668)
PROSTHETIC SUSPENSE
"FIA",668,0)
^RMPR(668,
"FIA",668,0,0)
668ID
"FIA",668,0,1)
y^n^p^^^^n
"FIA",668,0,10)

"FIA",668,0,11)

"FIA",668,0,"RLRO")

"FIA",668,0,"VR")
3.0^RMPR
"FIA",668,668)
1
"FIA",668,668,5)

"FIA",668,668,14)

"INIT")
RMPR9RI
"KRN",19,5642,-1)
2^1
"KRN",19,5642,0)
RMPR OFFICIAL^Prosthetic Official's Menu^^M^.5^^^^^^^101^^^
"KRN",19,5642,10,0)
^19.01IP^18^16
"KRN",19,5642,10,18,0)
11725
"KRN",19,5642,10,18,"^")
RMPR GUI DOR
"KRN",19,5642,"U")
PROSTHETIC OFFICIAL'S MENU
"KRN",19,5643,-1)
2^2
"KRN",19,5643,0)
RMPR CLERK^Prosthetic Clerk's Menu^^M^.5^^^^^^^101^^1^1
"KRN",19,5643,10,0)
^19.01IP^28^13
"KRN",19,5643,10,28,0)
11725
"KRN",19,5643,10,28,"^")
RMPR GUI DOR
"KRN",19,5643,"U")
PROSTHETIC CLERK'S MENU
"KRN",19,11725,-1)
0^3
"KRN",19,11725,0)
RMPR GUI DOR^DELAYED ORDER REPORT^^B^^^^^^^^PROSTHETICS
"KRN",19,11725,1,0)
^19.06^8^8^3030210^^^^
"KRN",19,11725,1,1,0)
'B' type option for use after installation of RMPR*3*71.
"KRN",19,11725,1,2,0)
For users to be able to use the NPPD Detail Display GUI
"KRN",19,11725,1,3,0)
front-end, this option must be on either their primary
"KRN",19,11725,1,4,0)
or secondary menu options.  This option has also been
"KRN",19,11725,1,5,0)
placed on RMPR NPPD TOOLS to give users who have access
"KRN",19,11725,1,6,0)
to the current NPPD options, access to NPPD GUI Detail
"KRN",19,11725,1,7,0)
Display.  Note: 'B' type options are not visible to roll
"KRN",19,11725,1,8,0)
& scroll users.
"KRN",19,11725,99.1)
59150,36425
"KRN",19,11725,"RPC",0)
^19.05P^35^35
"KRN",19,11725,"RPC",1,0)
RMPR NPPD LIST
"KRN",19,11725,"RPC",2,0)
XWB GET VARIABLE VALUE
"KRN",19,11725,"RPC",4,0)
RMPR ADD ITEM
"KRN",19,11725,"RPC",5,0)
RMPR CLINIC ENROLLMENT
"KRN",19,11725,"RPC",6,0)
RMPR CLINIC LETTER DISPLAY
"KRN",19,11725,"RPC",7,0)
RMPR CLINIC LETTER LIST
"KRN",19,11725,"RPC",8,0)
RMPR IFCAP CHECK AUTH
"KRN",19,11725,"RPC",9,0)
RMPR LAST PT MOVEMENTS
"KRN",19,11725,"RPC",10,0)
RMPR PENDING APPOINTMENTS
"KRN",19,11725,"RPC",11,0)
RMPR TRANS LIST
"KRN",19,11725,"RPC",12,0)
RMPR TRANS HISA
"KRN",19,11725,"RPC",13,0)
RMPR PT ADD
"KRN",19,11725,"RPC",14,0)
RMPR PT DEM
"KRN",19,11725,"RPC",15,0)
RMPR TRANS HOME O2
"KRN",19,11725,"RPC",16,0)
RMPR VEN ADDRESS
"KRN",19,11725,"RPC",17,0)
RMPR CRITICAL COM
"KRN",19,11725,"RPC",19,0)
RMPR DIS LIST
"KRN",19,11725,"RPC",21,0)
RMPR CPRS DISPLAY
"KRN",19,11725,"RPC",24,0)
RMPR TRANS LIST EXPANDED
"KRN",19,11725,"RPC",28,0)
RMPR VIEW REQ
"KRN",19,11725,"RPC",29,0)
RMPR VIEW REQ DESC
"KRN",19,11725,"RPC",30,0)
RMPR VIEW REQ IA NOTE
"KRN",19,11725,"RPC",31,0)
RMPR VIEW REQ COMP NOTE
"KRN",19,11725,"RPC",32,0)
RMPR TRANS HOME O2 RX
"KRN",19,11725,"RPC",33,0)
RMPR DOR
"KRN",19,11725,"RPC",34,0)
DDR LISTER
"KRN",19,11725,"RPC",35,0)
DDR FINDER
"KRN",19,11725,"U")
DELAYED ORDER REPORT
"KRN",8994,1639,-1)
0^10
"KRN",8994,1639,0)
RMPR TRANS LIST^EN^RMPR9S4^2^S^0^^0
"KRN",8994,1639,1,0)
^^1^1^3030319^
"KRN",8994,1639,1,1,0)
GUI 2319 Appliance Transaction List Tab 4.
"KRN",8994,1639,2,0)
^8994.02A^1^1
"KRN",8994,1639,2,1,0)
IEN^1^50^1^1
"KRN",8994,1639,2,"B","IEN",1)

"KRN",8994,1639,2,"PARAMSEQ",1,1)

"KRN",8994,1640,-1)
0^9
"KRN",8994,1640,0)
RMPR PT DEM^EN^RMPR9DEM^2^P^0^^0
"KRN",8994,1640,1,0)
^^40^40^3030502^
"KRN",8994,1640,1,1,0)
This procedure supplies the Patient Demographic data for 
"KRN",8994,1640,1,2,0)
TAB 1 of the GUI 2319 
"KRN",8994,1640,1,3,0)
Same routine for RMPR PT ADD REMOTE PROCEDURE. 
"KRN",8994,1640,1,4,0)
Pass the IEN of file 668
"KRN",8994,1640,1,5,0)
 
"KRN",8994,1640,1,6,0)
RESULTS COME FROM THE PIMS PACKAGE PATIENT FILE #2.
"KRN",8994,1640,1,7,0)
 
"KRN",8994,1640,1,8,0)
RESULTS(1)=NAME
"KRN",8994,1640,1,9,0)
RESULTS(2)=SSN  
"KRN",8994,1640,1,10,0)
RESULTS(3)=DOB
"KRN",8994,1640,1,11,0)
RESULTS(4)=AGE
"KRN",8994,1640,1,12,0)
RESULTS(5)=SEX
"KRN",8994,1640,1,13,0)
RESULTS(6)=DOD
"KRN",8994,1640,1,14,0)
RESULTS(7)=RACE
"KRN",8994,1640,1,15,0)
RESULTS(8)=RELIGION
"KRN",8994,1640,1,16,0)
RESULTS(9)=MARRITAL STATUS
"KRN",8994,1640,1,17,0)
RESULTS(11)=PRIMARY LONG ID
"KRN",8994,1640,1,18,0)
RESULTS(12)=PRIMARY SHORT ID
"KRN",8994,1640,1,19,0)
RESULTS(20)=FIRST LINE ST ADDRESS
"KRN",8994,1640,1,20,0)
RESULTS(21)=CITY
"KRN",8994,1640,1,21,0)
RESULTS(22)=STATE
"KRN",8994,1640,1,22,0)
RESULTS(23)=ZIP
"KRN",8994,1640,1,23,0)
RESULTS(24)=COUNTY
"KRN",8994,1640,1,24,0)
RESULTS(25)=PHONE
"KRN",8994,1640,1,25,0)
RESULTS(26)=ZIP+4
"KRN",8994,1640,1,26,0)
RESULTS(27)=NOK
"KRN",8994,1640,1,27,0)
RESULTS(28)=NOK FIRST LINE ADDRESS
"KRN",8994,1640,1,28,0)
RESULTS(29)=NOK CITY
"KRN",8994,1640,1,29,0)
RESULTS(30)=NOK STATE
"KRN",8994,1640,1,30,0)
RESULTS(31)=NOK ZIP
"KRN",8994,1640,1,31,0)
RESULTS(32)=NOK PHONE
"KRN",8994,1640,1,32,0)
RESULTS(33)=NOK RELATION
"KRN",8994,1640,1,33,0)
RESULTS(34)=PATIENT TYPE
"KRN",8994,1640,1,34,0)
RESULTS(35)=PERIOD OF SERVICE
"KRN",8994,1640,1,35,0)
RESULTS(36)=PRIMARY ELIGIBILITY CODE
"KRN",8994,1640,1,36,0)
RESULTS(37)=ELIGIBILITY VERIFIED?
"KRN",8994,1640,1,37,0)
RESULTS(38)=ONMETARY BENIFITS
"KRN",8994,1640,1,38,0)
RESULTS(45)=PROSTHETICS DISABILITY
"KRN",8994,1640,1,39,0)
RESULTS(46)=POW YES/NO
"KRN",8994,1640,1,40,0)
RESULTS(999)=0
"KRN",8994,1640,2,0)
^8994.02A^^0
"KRN",8994,1641,-1)
0^8
"KRN",8994,1641,0)
RMPR PT ADD^EN1^RMPR9DEM^2^P^0^^0
"KRN",8994,1641,1,0)
^^40^40^3030502^
"KRN",8994,1641,1,1,0)
GUI 2319 Patient Demographics Tab 1.
"KRN",8994,1641,1,2,0)
 
"KRN",8994,1641,1,3,0)
Same routine for RMPR PT DEM REMOTE PROCEDURE. 
"KRN",8994,1641,1,4,0)
Pass the IEN of file 668
"KRN",8994,1641,1,5,0)
 
"KRN",8994,1641,1,6,0)
RESULTS COME FROM THE PIMS PACKAGE PATIENT FILE #2.
"KRN",8994,1641,1,7,0)
 
"KRN",8994,1641,1,8,0)
RESULTS(1)=NAME
"KRN",8994,1641,1,9,0)
RESULTS(2)=SSN  
"KRN",8994,1641,1,10,0)
RESULTS(3)=DOB
"KRN",8994,1641,1,11,0)
RESULTS(4)=AGE
"KRN",8994,1641,1,12,0)
RESULTS(5)=SEX
"KRN",8994,1641,1,13,0)
RESULTS(6)=DOD
"KRN",8994,1641,1,14,0)
RESULTS(7)=RACE
"KRN",8994,1641,1,15,0)
RESULTS(8)=RELIGION
"KRN",8994,1641,1,16,0)
RESULTS(9)=MARRITAL STATUS
"KRN",8994,1641,1,17,0)
RESULTS(11)=PRIMARY LONG ID
"KRN",8994,1641,1,18,0)
RESULTS(12)=PRIMARY SHORT ID
"KRN",8994,1641,1,19,0)
RESULTS(20)=FIRST LINE ST ADDRESS
"KRN",8994,1641,1,20,0)
RESULTS(21)=CITY
"KRN",8994,1641,1,21,0)
RESULTS(22)=STATE
"KRN",8994,1641,1,22,0)
RESULTS(23)=ZIP
"KRN",8994,1641,1,23,0)
RESULTS(24)=COUNTY
"KRN",8994,1641,1,24,0)
RESULTS(25)=PHONE
"KRN",8994,1641,1,25,0)
RESULTS(26)=ZIP+4
"KRN",8994,1641,1,26,0)
RESULTS(27)=NOK
"KRN",8994,1641,1,27,0)
RESULTS(28)=NOK FIRST LINE ADDRESS
"KRN",8994,1641,1,28,0)
RESULTS(29)=NOK CITY
"KRN",8994,1641,1,29,0)
RESULTS(30)=NOK STATE
"KRN",8994,1641,1,30,0)
RESULTS(31)=NOK ZIP
"KRN",8994,1641,1,31,0)
RESULTS(32)=NOK PHONE
"KRN",8994,1641,1,32,0)
RESULTS(33)=NOK RELATION
"KRN",8994,1641,1,33,0)
RESULTS(34)=PATIENT TYPE
"KRN",8994,1641,1,34,0)
RESULTS(35)=PERIOD OF SERVICE
"KRN",8994,1641,1,35,0)
RESULTS(36)=PRIMARY ELIGIBILITY CODE
"KRN",8994,1641,1,36,0)
RESULTS(37)=ELIGIBILITY VERIFIED?
"KRN",8994,1641,1,37,0)
RESULTS(38)=ONMETARY BENIFITS
"KRN",8994,1641,1,38,0)
RESULTS(45)=PROSTHETICS DISABILITY
"KRN",8994,1641,1,39,0)
RESULTS(46)=POW YES/NO
"KRN",8994,1641,1,40,0)
RESULTS(999)=0
"KRN",8994,1642,-1)
0^15
"KRN",8994,1642,0)
RMPR NPPD LIST^EN^RMPR9LNP^4^A^^^1
"KRN",8994,1642,1,0)
^8994.01^22^22^3030502^^
"KRN",8994,1642,1,1,0)
GUI REMOTE PROCEDURE, LIST NPPD DATA
"KRN",8994,1642,1,2,0)
 
"KRN",8994,1642,1,3,0)
        ;RESULTS passed to broker in ^TMP($J,
"KRN",8994,1642,1,4,0)
        ;delimited by "^"
"KRN",8994,1642,1,5,0)
        ;piece 1 = ENTRY DATE
"KRN",8994,1642,1,6,0)
        ;piece 2 = PATIENT NAME
"KRN",8994,1642,1,7,0)
        ;piece 3 = PSAS HCPCS with * if hcpcs has Calculation Flag
"KRN",8994,1642,1,8,0)
        ;piece 4 = QTY
"KRN",8994,1642,1,9,0)
        ;piece 5 = VENDOR
"KRN",8994,1642,1,10,0)
        ;piece 6 = INITIAL ACTION DATE
"KRN",8994,1642,1,11,0)
        ;piece 7 = TOTAL COST
"KRN",8994,1642,1,12,0)
        ;piece 8 = DESCRIPTION
"KRN",8994,1642,1,13,0)
        ;piece 9 = INITIATOR
"KRN",8994,1642,1,14,0)
        ;piece 10 = NPPD LINE BEFORE GROUPER
"KRN",8994,1642,1,15,0)
        ;piece 11 = STATION
"KRN",8994,1642,1,16,0)
        ;piece 12 = GROUPER NUMBER
"KRN",8994,1642,1,17,0)
        ;piece 13 = FORM REQUESTED ON
"KRN",8994,1642,1,18,0)
        ;piece 14 = TYPE OF TRANSACTION
"KRN",8994,1642,1,19,0)
        ;piece 15 = SSN
"KRN",8994,1642,1,20,0)
        ;piece 16 = IEN TO FILE 660
"KRN",8994,1642,1,21,0)
        ;piece 17 = HCPCS SHORT DESCRIPTION
"KRN",8994,1642,1,22,0)
        ;piece 18 = SOURCE
"KRN",8994,1642,2,0)
^8994.02A^2^2
"KRN",8994,1642,2,1,0)
DATE1^1^50^1^1
"KRN",8994,1642,2,1,1,0)
^8994.021^1^1^3020813^^
"KRN",8994,1642,2,1,1,1,0)
The Fileman date to start the query.  The begining date.
"KRN",8994,1642,2,2,0)
DATE2^1^50^1^2
"KRN",8994,1642,2,2,1,0)
^^1^1^3020813^
"KRN",8994,1642,2,2,1,1,0)
The Fileman date to end the query.  The ending date.
"KRN",8994,1642,2,"B","DATE1",1)

"KRN",8994,1642,2,"B","DATE2",2)

"KRN",8994,1642,2,"PARAMSEQ",1,1)

"KRN",8994,1642,2,"PARAMSEQ",2,2)

"KRN",8994,1650,-1)
0^12
"KRN",8994,1650,0)
RMPR TRANS HISA^EN^RMPR9S7^2^A^0^^0
"KRN",8994,1650,1,0)
^^5^5^3030502^
"KRN",8994,1650,1,1,0)
GUI 2319 HISA information Tab 7.
"KRN",8994,1650,1,2,0)
 
"KRN",8994,1650,1,3,0)
PASS IEN OF FILE 668.
"KRN",8994,1650,1,4,0)
 
"KRN",8994,1650,1,5,0)
RETURNED RESUTLS 
"KRN",8994,1651,-1)
0^13
"KRN",8994,1651,0)
RMPR TRANS HOME O2^EN^RMPR9S8^2^S^0^^0
"KRN",8994,1651,1,0)
^^1^1^3030319^
"KRN",8994,1651,1,1,0)
GUI 2319 Home Oxygen tab 8.
"KRN",8994,1651,2,0)
^8994.02A^1^1
"KRN",8994,1651,2,1,0)
IEN^1^50^1^1
"KRN",8994,1651,2,"B","IEN",1)

"KRN",8994,1651,2,"PARAMSEQ",1,1)

"KRN",8994,1652,-1)
0^11
"KRN",8994,1652,0)
RMPR CRITICAL COM^EN^RMPR9S6^2^S^0^^0
"KRN",8994,1652,1,0)
^^8^8^3030502^
"KRN",8994,1652,1,1,0)
GUI 2319 Critical Comment Tab 6.
"KRN",8994,1652,1,2,0)
 
"KRN",8994,1652,1,3,0)
PASS IEN OF FILE 668
"KRN",8994,1652,1,4,0)
 
"KRN",8994,1652,1,5,0)
RETURN RESULTS ARRAY FROM FILE 665 CRITICAL COMMENTS FIELD.
"KRN",8994,1652,1,6,0)
 
"KRN",8994,1652,1,7,0)
RESUTLS()=ONE LINE AT A TIME OF THE WORD PROCESSING FIELD. ONE LINE TO 
"KRN",8994,1652,1,8,0)
INFINITE.
"KRN",8994,1652,2,0)
^8994.02A^1^1
"KRN",8994,1652,2,1,0)
IEN^1^50^1^1
"KRN",8994,1652,2,"B","IEN",1)

"KRN",8994,1652,2,"PARAMSEQ",1,1)

"KRN",8994,1653,-1)
0^5
"KRN",8994,1653,0)
RMPR DIS LIST^EN^RMPR9DM1^2^S^0^^0
"KRN",8994,1653,1,0)
^^8^8^3030502^
"KRN",8994,1653,1,1,0)
GUI 2319 MAS DISABILITY AND PERCENT.
"KRN",8994,1653,1,2,0)
 
"KRN",8994,1653,1,3,0)
PASS IEN OF FILE 668.
"KRN",8994,1653,1,4,0)
 
"KRN",8994,1653,1,5,0)
RETURN RESULTS FROM FILE #2.
"KRN",8994,1653,1,6,0)
 
"KRN",8994,1653,1,7,0)
RESULTS()=DISABILITY DESCRIPTION^%^SC YESorNO.
"KRN",8994,1653,1,8,0)
One line or multiple lines.
"KRN",8994,1653,2,0)
^8994.02A^1^1
"KRN",8994,1653,2,1,0)
IEN^1^50^1^1
"KRN",8994,1653,2,"B","IEN",1)

"KRN",8994,1653,2,"PARAMSEQ",1,1)

"KRN",8994,1654,-1)
0^1
"KRN",8994,1654,0)
RMPR ADD ITEM^EN^RMPR9AI^2^S^0^^0
"KRN",8994,1654,1,0)
^8994.01^1^1^3030430^^^^
"KRN",8994,1654,1,1,0)
RPC to send purchasing information to file 666 GUI PURCHASING FILE.
"KRN",8994,1654,2,0)
^8994.02A^^0
"KRN",8994,1655,-1)
0^6
"KRN",8994,1655,0)
RMPR LAST PT MOVEMENTS^EN^RMPR9LM^2^S^0^^0
"KRN",8994,1655,1,0)
^8994.01^24^24^3030430^^
"KRN",8994,1655,1,1,0)
This procedure supplies the data for the Last 2 inpatient movements for 
"KRN",8994,1655,1,2,0)
TAB 2 of the GUI 2319.
"KRN",8994,1655,1,3,0)
Pass IEN to Prosthetic Suspense (#668)
"KRN",8994,1655,1,4,0)
 
"KRN",8994,1655,1,5,0)
Return RESULTS Array and Example:
"KRN",8994,1655,1,6,0)
 
"KRN",8994,1655,1,7,0)
RESULTS(0)=Name
"KRN",8994,1655,1,8,0)
RESULTS(1)=SSN
"KRN",8994,1655,1,9,0)
RESULTS(2)=DOB
"KRN",8994,1655,1,10,0)
RESULTS(3)=Claim #
"KRN",8994,1655,1,11,0)
RESULTS(4)= if 1 Yes a movement
"KRN",8994,1655,1,12,0)
RESULTS(5)=Transaction type
"KRN",8994,1655,1,13,0)
RESULTS(6)=Date of last Movement
"KRN",8994,1655,1,14,0)
RESULTS(7)=Type of Movement
"KRN",8994,1655,1,15,0)
RESULTS(8)=Ward
"KRN",8994,1655,1,16,0)
RESULTS(9)=Physician
"KRN",8994,1655,1,17,0)
RESULTS(10)=Diagnosis
"KRN",8994,1655,1,18,0)
RESULTS(11)= if 1 Yes Second to last Movement
"KRN",8994,1655,1,19,0)
RESULTS(12)=2nd to last Transaction Type
"KRN",8994,1655,1,20,0)
RESULTS(13)=2nd to last Transaction date
"KRN",8994,1655,1,21,0)
RESULTS(14)=2nd to last Type of movement
"KRN",8994,1655,1,22,0)
RESULTS(15)=2nd to last Ward
"KRN",8994,1655,1,23,0)
RESULTS(16)=Physician
"KRN",8994,1655,1,24,0)
RESULTS(17)=Diagnosis
"KRN",8994,1655,2,0)
^8994.02A^1^1
"KRN",8994,1655,2,1,0)
IEN^1^50^1^1
"KRN",8994,1655,2,"B","IEN",1)

"KRN",8994,1655,2,"PARAMSEQ",1,1)

"KRN",8994,1656,-1)
0^17
"KRN",8994,1656,0)
RMPR VEN ADDRESS^EN1^RMPR9AI^2^S^0^^0
"KRN",8994,1656,1,0)
^8994.01^1^1^3030319^^^
"KRN",8994,1656,1,1,0)
Dispaly vendor address, phone and fax number
"KRN",8994,1656,2,0)
^8994.02A^1^1
"KRN",8994,1656,2,1,0)
IEN^1^50^1^1
"KRN",8994,1656,2,"B","IEN",1)

"KRN",8994,1656,2,"PARAMSEQ",1,1)

"KRN",8994,1658,-1)
0^2
"KRN",8994,1658,0)
RMPR CLINIC ENROLLMENT^EN^RMPR9CE^2^S^0^^0
"KRN",8994,1658,1,0)
^8994.01^9^9^3030430^^
"KRN",8994,1658,1,1,0)
This procedure supplies the Clinic Enrollment data for 
"KRN",8994,1658,1,2,0)
TAB 2 of the GUI 2319.
"KRN",8994,1658,1,3,0)
 
"KRN",8994,1658,1,4,0)
Example of RESULTS 
"KRN",8994,1658,1,5,0)
 
"KRN",8994,1658,1,6,0)
RESULTS(0)=CLINIC
"KRN",8994,1658,1,7,0)
RESULTS(1)=DATE ENROLLED
"KRN",8994,1658,1,8,0)
RESULTS(2)=OPT OR AC
"KRN",8994,1658,1,9,0)
RESULTS(3)=STARTS OVER WITH NEXT CLINIC
"KRN",8994,1658,2,0)
^8994.02A^1^1
"KRN",8994,1658,2,1,0)
IEN^1^50^1^1
"KRN",8994,1658,2,"B","IEN",1)

"KRN",8994,1658,2,"PARAMSEQ",1,1)

"KRN",8994,1659,-1)
0^18
"KRN",8994,1659,0)
RMPR CPRS DISPLAY^EN^RMPR9EPD^2^S^0^^0
"KRN",8994,1659,1,0)
^^5^5^3030502^
"KRN",8994,1659,1,1,0)
GUI CPRS SUSPENSE DETAIL DISPLAY.
"KRN",8994,1659,1,2,0)
 
"KRN",8994,1659,1,3,0)
PASS THE IEN OF FILE 668
"KRN",8994,1659,1,4,0)
 
"KRN",8994,1659,1,5,0)
RETURN RESULTS:  RESUTLS()=^TMP("GMRCR",
"KRN",8994,1659,2,0)
^8994.02A^1^1
"KRN",8994,1659,2,1,0)
IEN^1^50^1^1
"KRN",8994,1659,2,"B","IEN",1)

"KRN",8994,1659,2,"PARAMSEQ",1,1)

"KRN",8994,1660,-1)
0^4
"KRN",8994,1660,0)
RMPR CLINIC LETTER LIST^EN^RMPR9CL^2^S^0^^0
"KRN",8994,1660,1,0)
^^7^7^3030430^
"KRN",8994,1660,1,1,0)
This procedure supplies the Clinic Letter List data for 
"KRN",8994,1660,1,2,0)
TAB 2 of the GUI 2319.
"KRN",8994,1660,1,3,0)
 
"KRN",8994,1660,1,4,0)
Pass IEN to Prosthetic Suspense (#668)
"KRN",8994,1660,1,5,0)
 
"KRN",8994,1660,1,6,0)
Return RESULTS Array
"KRN",8994,1660,1,7,0)
IEN of file 665.4^Patient Name^Letter Title^Author^Date Created
"KRN",8994,1660,2,0)
^8994.02A^1^1
"KRN",8994,1660,2,1,0)
IEN^1^150^1^1
"KRN",8994,1660,2,"B","IEN",1)

"KRN",8994,1660,2,"PARAMSEQ",1,1)

"KRN",8994,1662,-1)
0^7
"KRN",8994,1662,0)
RMPR PENDING APPOINTMENTS^EN^RMPR9PA^2^S^0^^0
"KRN",8994,1662,1,0)
^^7^7^3030430^
"KRN",8994,1662,1,1,0)
This procedure supplies the Pending Appointment data for 
"KRN",8994,1662,1,2,0)
TAB 2 of the GUI 2319.
"KRN",8994,1662,1,3,0)
 
"KRN",8994,1662,1,4,0)
Pass IEN to Prosthetic Suspense (#668)
"KRN",8994,1662,1,5,0)
 
"KRN",8994,1662,1,6,0)
Returned  RESULTS Array:
"KRN",8994,1662,1,7,0)
RESULTS(0)=DATE/TIME^CLINIC^STATUS^TYPE
"KRN",8994,1662,2,0)
^8994.02A^1^1
"KRN",8994,1662,2,1,0)
IEN^1^180^1^1
"KRN",8994,1662,2,"B","IEN",1)

"KRN",8994,1662,2,"PARAMSEQ",1,1)

"KRN",8994,1663,-1)
0^16
"KRN",8994,1663,0)
RMPR IFCAP CHECK AUTH^EN1^RMPR9SPC^2^S^0^^0
"KRN",8994,1663,1,0)
^^15^15^3030429^
"KRN",8994,1663,1,1,0)
 
"KRN",8994,1663,1,2,0)
Check if user has any Purchase Cards Assigened.
"KRN",8994,1663,1,3,0)
 
"KRN",8994,1663,1,4,0)
RESULTS(0)=You are not an authorized Purchase Card User, CONTACT FISCAL!
"KRN",8994,1663,1,5,0)
Or
"KRN",8994,1663,1,6,0)
RESULTS(0)=You are not defined in the Prosthetics Site Parameter File.
"KRN",8994,1663,1,7,0)
Or
"KRN",8994,1663,1,8,0)
RESULTS(0)=9
"KRN",8994,1663,1,9,0)
Ien to file 669.9
"KRN",8994,1663,1,10,0)
 
"KRN",8994,1663,1,11,0)
New X-ref in file 669.9 on Purchasing Agent Field.  Set with routine 
"KRN",8994,1663,1,12,0)
RMPR9X.
"KRN",8994,1663,1,13,0)
"PA ,DUZ,IEN
"KRN",8994,1663,1,14,0)
^RMPR(669.9,"PA",88,9) = 
"KRN",8994,1663,1,15,0)
^RMPR(669.9,"PA",2182,9) =
"KRN",8994,1664,-1)
0^3
"KRN",8994,1664,0)
RMPR CLINIC LETTER DISPLAY^EN1^RMPR9CL^2^S^0^^0
"KRN",8994,1664,1,0)
^8994.01^8^8^3030502^^
"KRN",8994,1664,1,1,0)
This procedure supplies the Clinic Letter Display data for 
"KRN",8994,1664,1,2,0)
TAB 2 of the GUI 2319.
"KRN",8994,1664,1,3,0)
 
"KRN",8994,1664,1,4,0)
Pass IEN to Prosthetic Suspense (#665.4)
"KRN",8994,1664,1,5,0)
 
"KRN",8994,1664,1,6,0)
Return RESULTS Array
"KRN",8994,1664,1,7,0)
One line of the letter at a time from word processsing fields.
"KRN",8994,1664,1,8,0)
The number of lines will vary.
"KRN",8994,1664,2,0)
^8994.02A^1^1
"KRN",8994,1664,2,1,0)
IEN^1^150^1^1
"KRN",8994,1664,2,"B","IEN",1)

"KRN",8994,1664,2,"PARAMSEQ",1,1)

"KRN",8994,1801,-1)
0^19
"KRN",8994,1801,0)
RMPR TRANS LIST EXPANDED^EN^RMPR9S4E^2^S^0^^0
"KRN",8994,1801,1,0)
^^1^1^3030319^
"KRN",8994,1801,1,1,0)
GUI 2319 Expansion of Screen 4 Transaction list.
"KRN",8994,1801,2,0)
^8994.02A^2^2
"KRN",8994,1801,2,1,0)
IEN^1^^1^1
"KRN",8994,1801,2,1,1,0)
^^1^1^3021217^
"KRN",8994,1801,2,1,1,1,0)
The internal entry number of file # 660.
"KRN",8994,1801,2,2,0)
IEN
"KRN",8994,1801,2,"B","IEN",1)

"KRN",8994,1801,2,"B","IEN",2)

"KRN",8994,1801,2,"PARAMSEQ",1,1)

"KRN",8994,1802,-1)
0^24
"KRN",8994,1802,0)
RMPR TRANS HOME O2 RX^EN^RMPR9S8P^2^S^0^^0
"KRN",8994,1802,1,0)
^^6^6^3030430^
"KRN",8994,1802,1,1,0)
RX information for screen 8 of the GUI 2319 Home Oxygen.
"KRN",8994,1802,1,2,0)
 
"KRN",8994,1802,1,3,0)
Pass: IEN of File 660 
"KRN",8994,1802,1,4,0)
RESULTS(0)=THE NUMBER OF PRESCRIPTIONS
"KRN",8994,1802,1,5,0)
RESULTS(1)=DATE PRESCRIPTION WRITTEN
"KRN",8994,1802,1,6,0)
RESULTS(2)=DATE PRESCRIPTION EXPIRES
"KRN",8994,1802,2,0)
^8994.02A^1^1
"KRN",8994,1802,2,1,0)
IEN^1^50^1^1
"KRN",8994,1802,2,"B","IEN",1)

"KRN",8994,1802,2,"PARAMSEQ",1,1)

"KRN",8994,1803,-1)
0^20
"KRN",8994,1803,0)
RMPR VIEW REQ^EN^RMPR9VR^2^S^0^^0
"KRN",8994,1803,1,0)
^^9^9^3030501^
"KRN",8994,1803,1,1,0)
This procedure supplies the View Request screen of file 668.
"KRN",8994,1803,1,2,0)
 
"KRN",8994,1803,1,3,0)
Entry Point:   EN(RESULTS,RMPRA)^RMPR9VR
"KRN",8994,1803,1,4,0)
 
"KRN",8994,1803,1,5,0)
RESULTS(0)= Order date/Suspense date
"KRN",8994,1803,1,6,0)
RESULTS(1)= Requestor
"KRN",8994,1803,1,7,0)
RESULTS(2)= Suspended by
"KRN",8994,1803,1,8,0)
RESULTS(3)= Initial Action Date
"KRN",8994,1803,1,9,0)
RESULTS(4)= Completion Date
"KRN",8994,1803,2,0)
^8994.02A^1^1
"KRN",8994,1803,2,1,0)
IEN^1^150^1^1
"KRN",8994,1803,2,"B","IEN",1)

"KRN",8994,1803,2,"PARAMSEQ",1,1)

"KRN",8994,1804,-1)
0^21
"KRN",8994,1804,0)
RMPR VIEW REQ DESC^EN2^RMPR9VR^2^S^0^^0
"KRN",8994,1804,1,0)
^^5^5^3030501^
"KRN",8994,1804,1,1,0)
This procedure supplies the View Request Description display of file #668.
"KRN",8994,1804,1,2,0)
Entry Point:  EN2(RESULTS,RMPRA)^RMPR9VR
"KRN",8994,1804,1,3,0)
 
"KRN",8994,1804,1,4,0)
RESULTS Array:  Word processing fields 0-infinite lines.
"KRN",8994,1804,1,5,0)
.
"KRN",8994,1804,2,0)
^8994.02A^1^1
"KRN",8994,1804,2,1,0)
IEN^1^150^1^1
"KRN",8994,1804,2,"B","IEN",1)

"KRN",8994,1804,2,"PARAMSEQ",1,1)

"KRN",8994,1805,-1)
0^22
"KRN",8994,1805,0)
RMPR VIEW REQ IA NOTE^EN3^RMPR9VR^2^S^0^^0
"KRN",8994,1805,1,0)
^^5^5^3030501^
"KRN",8994,1805,1,1,0)
This procedure supplies the View Request Initial Action Note display of 
"KRN",8994,1805,1,2,0)
file #668.
"KRN",8994,1805,1,3,0)
Entry Point:  EN3(RESULTS,RMPRA)^RMPR9VR
"KRN",8994,1805,1,4,0)
 
"KRN",8994,1805,1,5,0)
RESULTS Array:  Word processing fields 0-infinite lines.
"KRN",8994,1805,2,0)
^8994.02A^1^1
"KRN",8994,1805,2,1,0)
IEN^1^150^1^1
"KRN",8994,1805,2,"B","IEN",1)

"KRN",8994,1805,2,"PARAMSEQ",1,1)

"KRN",8994,1806,-1)
0^23
"KRN",8994,1806,0)
RMPR VIEW REQ COMP NOTE^EN4^RMPR9VR^2^S^0^^0
"KRN",8994,1806,1,0)
^^5^5^3030501^
"KRN",8994,1806,1,1,0)
This procedure supplies the View Request Completion Note of file #668.
"KRN",8994,1806,1,2,0)
.
"KRN",8994,1806,1,3,0)
Entry Point:  EN4(RESULTS,RMPRA)^RMPR9VR
"KRN",8994,1806,1,4,0)
 
"KRN",8994,1806,1,5,0)
RESULTS Array:  Word processing fields 0-infinite lines.
"KRN",8994,1806,2,0)
^8994.02A^1^1
"KRN",8994,1806,2,1,0)
IEN^1^150^1^1
"KRN",8994,1806,2,"B","IEN",1)

"KRN",8994,1806,2,"PARAMSEQ",1,1)

"KRN",8994,1807,-1)
0^14
"KRN",8994,1807,0)
RMPR DOR^EN^RMPR9DO^4^P^0^^1
"KRN",8994,1807,1,0)
^8994.01^2^2^3030502^^
"KRN",8994,1807,1,1,0)
GUI Order controll processing.  Returns the list of all open pending 
"KRN",8994,1807,1,2,0)
consults from file 668.
"KRN",8994,1807,3,0)
^8994.03^4^4^3030317^^^^
"KRN",8994,1807,3,1,0)
Returns the list of all open pending consults from file 668.
"KRN",8994,1807,3,2,0)
The array format:
"KRN",8994,1807,3,3,0)
 
"KRN",8994,1807,3,4,0)
RMPR9EO(line number,0)=date^patient name^ssn^type^days^status^des
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",101,-1)
1^1
"PKG",101,0)
PROSTHETICS^RMPR^PROSTHETICS VERSION 3.0 ALPHA
"PKG",101,20,0)
^9.402P^^
"PKG",101,22,0)
^9.49I^1^1
"PKG",101,22,1,0)
3.0^2960209^2960214
"PKG",101,22,1,"PAH",1,0)
59^3030619^104
"PKG",101,22,1,"PAH",1,1,0)
^^1^1^3030619
"PKG",101,22,1,"PAH",1,1,1,0)
Delay Order Report, 2319 button attached.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
21
"RTN","RMPR9CE")
0^1^B1268597
"RTN","RMPR9CE",1,0)
RMPR9CE ;HOIFO/SPS - GUI 2319 TAB 2 CLINIC ENROLLEMNT  ;9/19/02  11:29
"RTN","RMPR9CE",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9CE",3,0)
A1(IEN) G A2
"RTN","RMPR9CE",4,0)
EN(RESULTS,IEN) ;broker entry point
"RTN","RMPR9CE",5,0)
A2 ;
"RTN","RMPR9CE",6,0)
 S DFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9CE",7,0)
 I DFN="" S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9CE",8,0)
 ;Clinic Enrollment segment
"RTN","RMPR9CE",9,0)
 D SDE^VADPT
"RTN","RMPR9CE",10,0)
 I '$D(^UTILITY("VAEN",$J)) G EXIT
"RTN","RMPR9CE",11,0)
 S CNT=0,RO=0 F  S RO=$O(^UTILITY("VAEN",$J,RO)) Q:RO'>0  D
"RTN","RMPR9CE",12,0)
 . I CNT>0 S CNT=CNT+1
"RTN","RMPR9CE",13,0)
 . S RESULTS(CNT)=$P(^UTILITY("VAEN",$J,RO,"E"),U,1)_"^"_$P(^UTILITY("VAEN",$J,RO,"E"),U,2)_"^"_$P(^UTILITY("VAEN",$J,RO,"E"),U,3)
"RTN","RMPR9CE",14,0)
 . S CNT=CNT+1
"RTN","RMPR9CE",15,0)
EXIT ;common exit point
"RTN","RMPR9CE",16,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9CE",17,0)
 K CNT,DFN,RO,^UTILITY("VAEN",$J)
"RTN","RMPR9CE",18,0)
 ;END
"RTN","RMPR9CL")
0^2^B4042694
"RTN","RMPR9CL",1,0)
RMPR9CL ;HOIFO/SPS - GUI 2319 TAB 2 LETTER LIST & DISPLAY ;9/26/02  10:09
"RTN","RMPR9CL",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9CL",3,0)
A1(IEN) G A2
"RTN","RMPR9CL",4,0)
EN(RESULTS,IEN) ;broker entry point
"RTN","RMPR9CL",5,0)
A2 ;
"RTN","RMPR9CL",6,0)
 S DFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9CL",7,0)
 I DFN="" S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9CL",8,0)
 ;List of Letters on File
"RTN","RMPR9CL",9,0)
 S RMPRDFN=DFN
"RTN","RMPR9CL",10,0)
 I '$D(^RMPR(665.4,"AH",RMPRDFN)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9CL",11,0)
 N RMPRBDT,DIC,RB,RI,DR,DA,RMPLET,DIQ,Y,RO
"RTN","RMPR9CL",12,0)
 S (CNT,RMPRBDT,RI,RB,RO)=0,RMPRIN=-1,DIC=665.4,DR=".01;1;2;4;11",DIQ="RMPRLET"
"RTN","RMPR9CL",13,0)
 F  S RMPRBDT=$O(^RMPR(665.4,"AH",RMPRDFN,RMPRBDT)) Q:RMPRBDT=""  D  Q:RO=1
"RTN","RMPR9CL",14,0)
 .S DA=0
"RTN","RMPR9CL",15,0)
 .F  S DA=$O(^RMPR(665.4,"AH",RMPRDFN,RMPRBDT,DA)) Q:'DA  D  Q:RO=1
"RTN","RMPR9CL",16,0)
 ..S RI=RI+1,RI(RI)=DA D EN^DIQ1 Q:'$D(RMPRLET)
"RTN","RMPR9CL",17,0)
 ..S RESULTS(CNT)=DA_"^"_RMPRLET(665.4,DA,.01)_"^"_$G(RMPRLET(665.4,DA,1))_"^"_$E($G(RMPRLET(665.4,DA,4)),1,15)_"^"_$G(RMPRLET(665.4,DA,2))_$G(RMPRLET(665.4,DA,11))
"RTN","RMPR9CL",18,0)
 ..S CNT=CNT+1
"RTN","RMPR9CL",19,0)
 ..K RMPRLET
"RTN","RMPR9CL",20,0)
 Q
"RTN","RMPR9CL",21,0)
A3(IEN) G A4
"RTN","RMPR9CL",22,0)
EN1(RESULTS,IEN) ;
"RTN","RMPR9CL",23,0)
A4 ;Print letter, IEN=internal entrie number of file 665.4
"RTN","RMPR9CL",24,0)
 I '$D(^RMPR(665.4,IEN)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9CL",25,0)
 M RMPRTMP=^RMPR(665.4,IEN,1)
"RTN","RMPR9CL",26,0)
 K RMPRTMP(0)
"RTN","RMPR9CL",27,0)
 S RTST=0
"RTN","RMPR9CL",28,0)
 F  S RTST=$O(RMPRTMP(RTST)) Q:RTST=""  D
"RTN","RMPR9CL",29,0)
 . I '$D(RMPRTMP(RTST,0)) Q
"RTN","RMPR9CL",30,0)
 . S RF=$L(RMPRTMP(RTST,0),"|")
"RTN","RMPR9CL",31,0)
 . F RP=0:1:RF I $P(RMPRTMP(RTST,0),"|",RP)["TAB" D
"RTN","RMPR9CL",32,0)
 .. S $P(RMPRTMP(RTST,0),"|",RP)="    "
"RTN","RMPR9CL",33,0)
 . S RMPRTMP(RTST,0)=$TR(RMPRTMP(RTST,0),"|","")
"RTN","RMPR9CL",34,0)
 . S RMPRTMP(RTST)=RMPRTMP(RTST,0)
"RTN","RMPR9CL",35,0)
 . K RMPRTMP(RTST,0)
"RTN","RMPR9CL",36,0)
 M RESULTS=RMPRTMP
"RTN","RMPR9CL",37,0)
EXIT ;common exit point
"RTN","RMPR9CL",38,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9CL",39,0)
 K CNT,DFN,RMPRTMP,RF,RO,RP
"RTN","RMPR9CL",40,0)
 ;END
"RTN","RMPR9DEM")
0^7^B11309474
"RTN","RMPR9DEM",1,0)
RMPR9DEM ;HOIFO/HNC/SPS - GUI 2319 DEM VADPT IN RESULTS ARRAY ;9/19/02  11:27
"RTN","RMPR9DEM",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9DEM",3,0)
EN(RESULTS,IEN) ;broker entry point
"RTN","RMPR9DEM",4,0)
 ;translate ien 668 to DFN
"RTN","RMPR9DEM",5,0)
 ;
"RTN","RMPR9DEM",6,0)
TST ;S IEN=311
"RTN","RMPR9DEM",7,0)
 S DFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9DEM",8,0)
 I DFN="" S RESULTS(999)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9DEM",9,0)
 D DEM^VADPT
"RTN","RMPR9DEM",10,0)
 S RESULTS(0)=VADM(1) ;Name
"RTN","RMPR9DEM",11,0)
 S RESULTS(1)=VADM(2) ;SSN
"RTN","RMPR9DEM",12,0)
 S RESULTS(2)=VADM(3) ;Date of Birth
"RTN","RMPR9DEM",13,0)
 S RESULTS(3)=VADM(4) ;Age
"RTN","RMPR9DEM",14,0)
 S RESULTS(4)=VADM(5) ;Sex
"RTN","RMPR9DEM",15,0)
 S RESULTS(5)=VADM(6) ;Date of Death
"RTN","RMPR9DEM",16,0)
 S RESULTS(6)=VADM(8) ;Race
"RTN","RMPR9DEM",17,0)
 S RESULTS(7)=VADM(9) ;Religion
"RTN","RMPR9DEM",18,0)
 S RESULTS(8)=VADM(10) ;Marital Status
"RTN","RMPR9DEM",19,0)
 S RESULTS(9)=VA("PID") ;Primary Long ID
"RTN","RMPR9DEM",20,0)
 S RESULTS(10)=VA("BID") ;Primary Short ID
"RTN","RMPR9DEM",21,0)
 ;I $G(VAERR)'="" S RESULTS(999)=VAERR
"RTN","RMPR9DEM",22,0)
 ;
"RTN","RMPR9DEM",23,0)
 S DFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9DEM",24,0)
 I DFN="" S RESULTS(999)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9DEM",25,0)
 D ADD^VADPT
"RTN","RMPR9DEM",26,0)
 S RESULTS(12)=VAPA(1) ;First line address
"RTN","RMPR9DEM",27,0)
 S RESULTS(13)=VAPA(4) ;City
"RTN","RMPR9DEM",28,0)
 S RESULTS(14)=VAPA(5) ;State
"RTN","RMPR9DEM",29,0)
 S RESULTS(15)=VAPA(6) ;Zip
"RTN","RMPR9DEM",30,0)
 S RESULTS(16)=VAPA(7) ;County
"RTN","RMPR9DEM",31,0)
 S RESULTS(17)=VAPA(8) ;Phone
"RTN","RMPR9DEM",32,0)
 S RESULTS(18)=VAPA(11) ;Zip+4
"RTN","RMPR9DEM",33,0)
 ;NOK
"RTN","RMPR9DEM",34,0)
 D OAD^VADPT
"RTN","RMPR9DEM",35,0)
 S RESULTS(19)=VAOA(9) ;NOK name
"RTN","RMPR9DEM",36,0)
 S RESULTS(20)=VAOA(1) ;NOK Address
"RTN","RMPR9DEM",37,0)
 S RESULTS(21)=VAOA(4) ;NOK CITY
"RTN","RMPR9DEM",38,0)
 S RESULTS(22)=VAOA(5) ;NOK STATE
"RTN","RMPR9DEM",39,0)
 S RESULTS(23)=VAOA(6) ;NOK ZIP
"RTN","RMPR9DEM",40,0)
 S RESULTS(24)=VAOA(8) ;NOK PHONE
"RTN","RMPR9DEM",41,0)
 S RESULTS(25)=VAOA(10) ;NOK RELATIONSHIP
"RTN","RMPR9DEM",42,0)
 ; Eligibility segment
"RTN","RMPR9DEM",43,0)
 D ELIG^VADPT
"RTN","RMPR9DEM",44,0)
 S RESULTS(11)=VAEL(7) ;Claim #
"RTN","RMPR9DEM",45,0)
 S RESULTS(26)=$P(VAEL(6),U,2) ;Patient Type
"RTN","RMPR9DEM",46,0)
 S RESULTS(27)=$P(VAEL(2),U,2) ;Period of Service
"RTN","RMPR9DEM",47,0)
 S RESULTS(28)=$P(VAEL(1),U,2) ;Primary Eligibility Code
"RTN","RMPR9DEM",48,0)
 S RESULTS(29)=$S(VAEL(8)]"":$P(VAEL(8),U,2),1:"NOT VERIFIED") ;Verification?
"RTN","RMPR9DEM",49,0)
 ;Monetary Benefit Info from MB^VADPT
"RTN","RMPR9DEM",50,0)
 D MB^VADPT
"RTN","RMPR9DEM",51,0)
 S RESULTS(30)="NO" I $P(VAMB(1),U)=1 S RESULTS(30)="YES",RMPRCHK=$P(VAMB(1),U,2)
"RTN","RMPR9DEM",52,0)
 S RESULTS(31)="NO" I $P(VAMB(2),U)=1 S RESULTS(31)="YES",RMPRCHK=$P(VAMB(2),U,2)
"RTN","RMPR9DEM",53,0)
 S RESULTS(32)="NO" I $P(VAMB(4),U)=1 S RESULTS(32)="YES",RMPRCHK=$P(VAMB(4),U,2)
"RTN","RMPR9DEM",54,0)
 S RESULTS(33)="NO" I $P(VAMB(7),U)=1 S RESULTS(33)="YES",RMPRCHK=$P(VAMB(7),U,2)
"RTN","RMPR9DEM",55,0)
 S RESULTS(34)=0 I $G(RMPRCHK)]"" S RESULTS(34)=$G(RMPRCHK) ;Total Annual VA Check Amount
"RTN","RMPR9DEM",56,0)
 ;Prosthetics Disability Codes
"RTN","RMPR9DEM",57,0)
 S (RMPRDC,RO,FG)=0 I '$D(^RMPR(665,DFN,1)) S RESULTS(35)="None" S RO=1
"RTN","RMPR9DEM",58,0)
 K RMPRDC
"RTN","RMPR9DEM",59,0)
 I RO=0 F  S:'FG RMPRDC="" S RO=$O(^RMPR(665,DFN,1,RO)) Q:RO'>0  D
"RTN","RMPR9DEM",60,0)
 .S RR=^(RO,0) S:$P(RR,U,10) FG=1 I '$P(RR,U,10) S RMPRDC=RMPRDC_$P(^RMPR(662,+RR,0),U,1)_"-"_$S($P(RR,U,3)=1:"SC",$P(RR,U,3)=2:"NSC",1:"") S FG=1
"RTN","RMPR9DEM",61,0)
 S:FG=1 RESULTS(35)=RMPRDC
"RTN","RMPR9DEM",62,0)
 ;POW
"RTN","RMPR9DEM",63,0)
 D SVC^VADPT
"RTN","RMPR9DEM",64,0)
 S RESULTS(36)=$S(VASV(4)=1:"YES",1:"NO") ;POW YES/NO
"RTN","RMPR9DEM",65,0)
 ;Emergency Contact
"RTN","RMPR9DEM",66,0)
 S VAOA("A")=1 D OAD^VADPT
"RTN","RMPR9DEM",67,0)
 S RESULTS(37)=VAOA(9) ;Name of Emergency Contact
"RTN","RMPR9DEM",68,0)
 S RESULTS(38)=VAOA(1) ;Street Address
"RTN","RMPR9DEM",69,0)
 S RESULTS(39)=VAOA(4) ;City
"RTN","RMPR9DEM",70,0)
 S RESULTS(40)=$P(VAOA(5),U,2) ;State
"RTN","RMPR9DEM",71,0)
 S RESULTS(41)=VAOA(6) ;Zip
"RTN","RMPR9DEM",72,0)
 S RESULTS(42)=VAOA(8) ;Home Phone
"RTN","RMPR9DEM",73,0)
 S RESULTS(43)=VAOA(10) ;Relationship
"RTN","RMPR9DEM",74,0)
 I $G(VAERR)'="" S RESULTS(999)=VAERR
"RTN","RMPR9DEM",75,0)
 ;
"RTN","RMPR9DEM",76,0)
 Q
"RTN","RMPR9DEM",77,0)
EXIT ;
"RTN","RMPR9DEM",78,0)
 Q
"RTN","RMPR9DEM",79,0)
 ;END
"RTN","RMPR9DM1")
0^4^B988680
"RTN","RMPR9DM1",1,0)
RMPR9DM1 ;HOIFO/HNC - GUI 2319 MAS DISABILITY AND PERCENT ;9/18/02  17:01
"RTN","RMPR9DM1",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9DM1",3,0)
A1(IEN) G A2
"RTN","RMPR9DM1",4,0)
ENR(DFN) ;entry point for roll and scroll
"RTN","RMPR9DM1",5,0)
 G ENC
"RTN","RMPR9DM1",6,0)
EN(RESULTS,IEN) ;broker entry point
"RTN","RMPR9DM1",7,0)
A2 ;
"RTN","RMPR9DM1",8,0)
 S DFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9DM1",9,0)
 I DFN="" S RESULTS(0)="NOTHING FOUND" G EXIT
"RTN","RMPR9DM1",10,0)
 ;new code
"RTN","RMPR9DM1",11,0)
ENC ;roll and scroll starts here
"RTN","RMPR9DM1",12,0)
 K RA
"RTN","RMPR9DM1",13,0)
 D GETS^DIQ(2,DFN,".3721*","E","RA")
"RTN","RMPR9DM1",14,0)
 I '$D(RA) G EXIT
"RTN","RMPR9DM1",15,0)
 ;RA(2.04,"1,110,",.01,"E")=GOUT
"RTN","RMPR9DM1",16,0)
 ;RA(2.04,"1,110,",2,"E")=10
"RTN","RMPR9DM1",17,0)
 ;RA(2.04,"1,110,",3,"E")=YES
"RTN","RMPR9DM1",18,0)
 S CNT=1,REC=0
"RTN","RMPR9DM1",19,0)
 F  S REC=$O(RA(2.04,REC)) Q:REC=""  D
"RTN","RMPR9DM1",20,0)
 .S RESULTS(CNT)=RA(2.04,REC,.01,"E")_U
"RTN","RMPR9DM1",21,0)
 .S RESULTS(CNT)=RESULTS(CNT)_$G(RA(2.04,REC,2,"E"))_U
"RTN","RMPR9DM1",22,0)
 .S RESULTS(CNT)=RESULTS(CNT)_$G(RA(2.04,REC,3,"E"))
"RTN","RMPR9DM1",23,0)
 .S CNT=CNT+1
"RTN","RMPR9DM1",24,0)
 ;
"RTN","RMPR9DM1",25,0)
EXIT ;common exit point
"RTN","RMPR9DM1",26,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING FOUND"
"RTN","RMPR9DM1",27,0)
 K RA,IEN,REC,DFN
"RTN","RMPR9DM1",28,0)
 ;END
"RTN","RMPR9DO")
0^33^B75679223
"RTN","RMPR9DO",1,0)
RMPR9DO ;HOIFO/HNC -  ORDER CONROL PROCESSING-REMOTE PROCEDURE ;6/5/03  13:10
"RTN","RMPR9DO",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9DO",3,0)
 ;
"RTN","RMPR9DO",4,0)
 ;
"RTN","RMPR9DO",5,0)
A1(START,STOP,SITE,SORT,DATE,WHAT) ;entry point for rollup
"RTN","RMPR9DO",6,0)
 ;activated from (option name)
"RTN","RMPR9DO",7,0)
 I WHAT="S" D
"RTN","RMPR9DO",8,0)
 .S STN1=0
"RTN","RMPR9DO",9,0)
 .F  S STN1=$O(^RMPR(669.9,STN1)) Q:STN1'>0  D
"RTN","RMPR9DO",10,0)
 . .S SITE=STN1
"RTN","RMPR9DO",11,0)
 . .D A2
"RTN","RMPR9DO",12,0)
 I WHAT="ALL" G A2
"RTN","RMPR9DO",13,0)
 Q
"RTN","RMPR9DO",14,0)
EN(RESULT,DUZ,START,STOP,SITE,SORT,DATE) ; -- Broker callback to get list to display
"RTN","RMPR9DO",15,0)
A2 ;entry to send to PCM, WHAT=ALL or S for Summary Only
"RTN","RMPR9DO",16,0)
 N STRING,CLREND,COLUMN,ON,OFF
"RTN","RMPR9DO",17,0)
 Q:SORT=""
"RTN","RMPR9DO",18,0)
 Q:DATE=""
"RTN","RMPR9DO",19,0)
 Q:START=""
"RTN","RMPR9DO",20,0)
 Q:STOP=""
"RTN","RMPR9DO",21,0)
 Q:SITE=""
"RTN","RMPR9DO",22,0)
 I SITE'="ALL" S SITE=$P(^RMPR(669.9,SITE,0),U,2)
"RTN","RMPR9DO",23,0)
 K ^TMP($J)
"RTN","RMPR9DO",24,0)
 N RMPRA,CDATE,X
"RTN","RMPR9DO",25,0)
 K ADATE,PDAY
"RTN","RMPR9DO",26,0)
 S VALMCNT=0,RRX=""
"RTN","RMPR9DO",27,0)
 ;if sort for open or pending include all regardless of date
"RTN","RMPR9DO",28,0)
 ;if sort for cancelled or closed include from date passed forward
"RTN","RMPR9DO",29,0)
 ;
"RTN","RMPR9DO",30,0)
 ;PPD# status=pending before date, total days create to 1st action
"RTN","RMPR9DO",31,0)
 ;MHD# manual totals days create to 1st action
"RTN","RMPR9DO",32,0)
 ;CHD# consult totals days create to 1st action
"RTN","RMPR9DO",33,0)
 ;PPDD# status=pending before date, total days in pending state, 1st
"RTN","RMPR9DO",34,0)
 ;      action to current date
"RTN","RMPR9DO",35,0)
 ;
"RTN","RMPR9DO",36,0)
 S (LINE,MHD1,MHD2,MHD3,MHD4,MHD5,CHD1,CHD2,CHD3,CHD4,CHD5,CLNK,MLNK)=0
"RTN","RMPR9DO",37,0)
 S (PPDAY,PPD,PPD1,PPD2,PPD3,PPD4,PPD5)=0
"RTN","RMPR9DO",38,0)
 S (PPDDAY,PPDD1,PPDD2,PPDD3,PPDD4,PPDD5)=0
"RTN","RMPR9DO",39,0)
 I SORT["O"!(SORT["P") D ALL
"RTN","RMPR9DO",40,0)
 I SORT["C"!(SORT["X") D DTFWD
"RTN","RMPR9DO",41,0)
 S LINE=LINE+1
"RTN","RMPR9DO",42,0)
 S ^TMP($J,LINE)="^^^^^^^^"_MHD1_U_MHD2_U_MHD3_U_MHD4_U_MHD5_"^^^^"_MLNK_U_0
"RTN","RMPR9DO",43,0)
 I $G(WHAT)="S" S RMPRXM(1)=MHD1_U_MHD2_U_MHD3_U_MHD4_U_MHD5_U_MLNK_U_0
"RTN","RMPR9DO",44,0)
 S LINE=LINE+1
"RTN","RMPR9DO",45,0)
 S ^TMP($J,LINE)="^^^^^^^^"_CHD1_U_CHD2_U_CHD3_U_CHD4_U_CHD5_"^^^^"_CLNK_U_1
"RTN","RMPR9DO",46,0)
 I $G(WHAT)="S" S RMPRXM(2)=CHD1_U_CHD2_U_CHD3_U_CHD4_U_CHD5_U_CLNK_U_1
"RTN","RMPR9DO",47,0)
 S LINE=LINE+1
"RTN","RMPR9DO",48,0)
 I $G(WHAT)="S" S RMPRXM(3)=PPD1_U_PPD2_U_PPD3_U_PPD4_U_PPD5_U_U_2
"RTN","RMPR9DO",49,0)
 S ^TMP($J,LINE)="^^^^^^^^"_PPDD1_U_PPDD2_U_PPDD3_U_PPDD4_U_PPDD5_"^^^^^"_2
"RTN","RMPR9DO",50,0)
 S LINE=LINE+1
"RTN","RMPR9DO",51,0)
 S ^TMP($J,LINE)="^^^^^^^^"_PPD1_U_PPD2_U_PPD3_U_PPD4_U_PPD5_"^^^^^"_3
"RTN","RMPR9DO",52,0)
 ;quarter rollup with full data
"RTN","RMPR9DO",53,0)
 I $G(WHAT)="Q" D MAIL
"RTN","RMPR9DO",54,0)
 ;summary only
"RTN","RMPR9DO",55,0)
 I $G(WHAT)="S" D MAILG
"RTN","RMPR9DO",56,0)
 I $G(WHAT)="ALL" D MAILG,MAIL
"RTN","RMPR9DO",57,0)
 I '$G(WHAT) G EXIT
"RTN","RMPR9DO",58,0)
 Q
"RTN","RMPR9DO",59,0)
ALL ;all open pending records regardless of date passed
"RTN","RMPR9DO",60,0)
 S RMPRI1=0
"RTN","RMPR9DO",61,0)
 F RMPRI1=START:1:STOP D
"RTN","RMPR9DO",62,0)
 .I $L(RMPRI1)=1 S RMPRI=0_RMPRI1
"RTN","RMPR9DO",63,0)
 .E  S RMPRI=RMPRI1
"RTN","RMPR9DO",64,0)
 .S RMPRST=""
"RTN","RMPR9DO",65,0)
 .F  S RMPRST=$O(^RMPR(668,"L1",RMPRI,RMPRST)) Q:RMPRST=""  D
"RTN","RMPR9DO",66,0)
 . .Q:RMPRST="X"
"RTN","RMPR9DO",67,0)
 . .Q:RMPRST="C"
"RTN","RMPR9DO",68,0)
 . .I SORT'["P"&(RMPRST="P") Q
"RTN","RMPR9DO",69,0)
 . .S RMPRA=0
"RTN","RMPR9DO",70,0)
 . .F  S RMPRA=$O(^RMPR(668,"L1",RMPRI,RMPRST,RMPRA)) Q:RMPRA'>0  D
"RTN","RMPR9DO",71,0)
 . . .S STN=$P(^RMPR(668,RMPRA,0),U,7)
"RTN","RMPR9DO",72,0)
 . . .I SITE'="ALL"&(SITE'=STN) Q
"RTN","RMPR9DO",73,0)
 . . .S STNX=$$STATN^RMPRUTIL(STN)
"RTN","RMPR9DO",74,0)
 . . .I $G(WHAT)="S" S VISNX=$P($G(^RMPR(669.9,STN1,"INV")),U,2)
"RTN","RMPR9DO",75,0)
 . . .S STS=$P(^RMPR(668,RMPRA,0),U,10)
"RTN","RMPR9DO",76,0)
 . . .Q:STS["X"
"RTN","RMPR9DO",77,0)
 . . .Q:STS["C"
"RTN","RMPR9DO",78,0)
 . . .I SORT'["O"&(STS="O") Q
"RTN","RMPR9DO",79,0)
 . . .I SORT'["P"&(STS="P") Q
"RTN","RMPR9DO",80,0)
 . . .D REC
"RTN","RMPR9DO",81,0)
 Q
"RTN","RMPR9DO",82,0)
DTFWD ;from date passed forward
"RTN","RMPR9DO",83,0)
 S RMPRI1=0
"RTN","RMPR9DO",84,0)
 F RMPRI1=START:1:STOP D
"RTN","RMPR9DO",85,0)
 .I $L(RMPRI1)=1 S RMPRI=0_RMPRI1
"RTN","RMPR9DO",86,0)
 .E  S RMPRI=RMPRI1
"RTN","RMPR9DO",87,0)
 .S RMPRDTM=""
"RTN","RMPR9DO",88,0)
 .F  S RMPRDTM=$O(^RMPR(668,"L",RMPRI,RMPRDTM)) Q:RMPRDTM=""  D
"RTN","RMPR9DO",89,0)
 ..Q:RMPRDTM=""
"RTN","RMPR9DO",90,0)
 ..Q:RMPRDTM<DATE
"RTN","RMPR9DO",91,0)
 ..S RMPRST=""
"RTN","RMPR9DO",92,0)
 ..F  S RMPRST=$O(^RMPR(668,"L",RMPRI,RMPRDTM,RMPRST)) Q:RMPRST=""  D
"RTN","RMPR9DO",93,0)
 .. .Q:RMPRST="O"
"RTN","RMPR9DO",94,0)
 .. .Q:RMPRST="P"
"RTN","RMPR9DO",95,0)
 .. .I SORT'["X"&(RMPRST="X") Q
"RTN","RMPR9DO",96,0)
 .. .I SORT'["C"&(RMPRST="C") Q
"RTN","RMPR9DO",97,0)
 .. .S RMPRA=0
"RTN","RMPR9DO",98,0)
 .. .F  S RMPRA=$O(^RMPR(668,"L",RMPRI,RMPRDTM,RMPRST,RMPRA)) Q:RMPRA'>0  D
"RTN","RMPR9DO",99,0)
 .. . .Q:RMPRA=""
"RTN","RMPR9DO",100,0)
 .. . .S STN=$P(^RMPR(668,RMPRA,0),U,7)
"RTN","RMPR9DO",101,0)
 .. . .I SITE'="ALL"&(SITE'=STN) Q
"RTN","RMPR9DO",102,0)
 .. . .S STNX=$$STATN^RMPRUTIL(STN)
"RTN","RMPR9DO",103,0)
 .. . .I $G(WHAT)'="" S VISNX=$P($G(^RMPR(669.9,SITE,"INV")),U,2)
"RTN","RMPR9DO",104,0)
 .. . .S STS=$P(^RMPR(668,RMPRA,0),U,10)
"RTN","RMPR9DO",105,0)
 .. . .Q:STS["O"
"RTN","RMPR9DO",106,0)
 .. . .Q:STS["P"
"RTN","RMPR9DO",107,0)
 .. . .I SORT'["C"&(STS="C") Q
"RTN","RMPR9DO",108,0)
 .. . .I SORT'["X"&(STS="X") Q
"RTN","RMPR9DO",109,0)
 .. . .D REC
"RTN","RMPR9DO",110,0)
 S RMPRDTC=$P(DATE,".",1)
"RTN","RMPR9DO",111,0)
 F  S RMPRDTC=$O(^RMPR(668,"CD",RMPRDTC)) Q:RMPRDTC=""  D
"RTN","RMPR9DO",112,0)
 .Q:RMPRDTC<DATE
"RTN","RMPR9DO",113,0)
 .S RMPRDYS=0
"RTN","RMPR9DO",114,0)
 .F  S RMPRDYS=$O(^RMPR(668,"CD",RMPRDTC,RMPRDYS)) Q:RMPRDYS=""  D
"RTN","RMPR9DO",115,0)
 . .Q:RMPRDYS'>5
"RTN","RMPR9DO",116,0)
 . .S RMPRA=0
"RTN","RMPR9DO",117,0)
 . .F  S RMPRA=$O(^RMPR(668,"CD",RMPRDTC,RMPRDYS,RMPRA)) Q:RMPRA'>0  D
"RTN","RMPR9DO",118,0)
 . . .;check site
"RTN","RMPR9DO",119,0)
 . . .S STN=$P(^RMPR(668,RMPRA,0),U,7)
"RTN","RMPR9DO",120,0)
 . . .I SITE'="ALL"&(SITE'=STN) Q
"RTN","RMPR9DO",121,0)
 . . .S STNX=$$STATN^RMPRUTIL(STN)
"RTN","RMPR9DO",122,0)
 . . .;check status
"RTN","RMPR9DO",123,0)
 . . .S STS=$P(^RMPR(668,RMPRA,0),U,10)
"RTN","RMPR9DO",124,0)
 . . .I SORT'["O"&(STS="O") Q
"RTN","RMPR9DO",125,0)
 . . .I SORT'["P"&(STS="P") Q
"RTN","RMPR9DO",126,0)
 . . .I SORT'["C"&(STS="C") Q
"RTN","RMPR9DO",127,0)
 . . .I SORT'["X"&(STS="X") Q
"RTN","RMPR9DO",128,0)
 . . .;ssn range filter
"RTN","RMPR9DO",129,0)
 . . .S DFN=$P(^RMPR(668,RMPRA,0),U,2)
"RTN","RMPR9DO",130,0)
 . . .D DEM^VADPT
"RTN","RMPR9DO",131,0)
 . . .S SSNEN=$E($P(VADM(2),"^",2),10,11)
"RTN","RMPR9DO",132,0)
 . . .I SSNEN>STOP Q
"RTN","RMPR9DO",133,0)
 . . .I SSNEN<START Q
"RTN","RMPR9DO",134,0)
 . . .K SSNEN,VADM
"RTN","RMPR9DO",135,0)
 . . .D REC
"RTN","RMPR9DO",136,0)
 Q
"RTN","RMPR9DO",137,0)
REC ;records to grid
"RTN","RMPR9DO",138,0)
 ;stop date, init action date
"RTN","RMPR9DO",139,0)
 N DIC,DIQ,DR,STOPDT
"RTN","RMPR9DO",140,0)
 S DA=RMPRA
"RTN","RMPR9DO",141,0)
 S DIC=668,DIQ="RE",DR=10,DIQ(0)="EN" D EN^DIQ1
"RTN","RMPR9DO",142,0)
 S STOPDT=$P($G(^RMPR(668,RMPRA,0)),U,9),STOPDT=$$DAT2^RMPRUTL1(STOPDT)
"RTN","RMPR9DO",143,0)
 S LINE=LINE+1
"RTN","RMPR9DO",144,0)
 S CDATE=$P(^RMPR(668,RMPRA,0),U,1),CDATE=$$DAT2^RMPRUTL1(CDATE)
"RTN","RMPR9DO",145,0)
 S DFN=$P(^RMPR(668,RMPRA,0),U,2) Q:DFN=""
"RTN","RMPR9DO",146,0)
 N VA,VADM
"RTN","RMPR9DO",147,0)
 D DEM^VADPT
"RTN","RMPR9DO",148,0)
 S WHO=VADM(1)
"RTN","RMPR9DO",149,0)
 S SSN=VADM(2)
"RTN","RMPR9DO",150,0)
 D KVAR^VADPT
"RTN","RMPR9DO",151,0)
 ;type
"RTN","RMPR9DO",152,0)
 S TYPE=$$TYPE^RMPREOU(RMPRA,8)
"RTN","RMPR9DO",153,0)
 ;display description if manual
"RTN","RMPR9DO",154,0)
 S DES=$$DES^RMPREOU(RMPRA,22)
"RTN","RMPR9DO",155,0)
 S DES=$TR(DES,"^","*")
"RTN","RMPR9DO",156,0)
 ;init action date
"RTN","RMPR9DO",157,0)
 S ADATE="",PDAY="",WRKDAY=""
"RTN","RMPR9DO",158,0)
 S ADATE=$P(^RMPR(668,RMPRA,0),U,9)
"RTN","RMPR9DO",159,0)
 ;PPD=1 for previous pending
"RTN","RMPR9DO",160,0)
 I ADATE'="" S (PDAY,WRKDAY)=$$WRKDAY^RMPREOU(RMPRA)
"RTN","RMPR9DO",161,0)
 I ADATE="" S (PDAY,WRKDAY)=$$CWRKDAY^RMPREOU(RMPRA)
"RTN","RMPR9DO",162,0)
 I ADATE'="" S CDAY=$$PDAY^RMPREOU(RMPRA)
"RTN","RMPR9DO",163,0)
 ;
"RTN","RMPR9DO",164,0)
 S STATUS=$$STATUS^RMPREOU(RMPRA)
"RTN","RMPR9DO",165,0)
 I STATUS["PENDING" D
"RTN","RMPR9DO",166,0)
 .I ADATE'=""&(ADATE<DATE) S PPD=1
"RTN","RMPR9DO",167,0)
 .S PPDAY=$$PWRKDAY^RMPREOU(RMPRA)
"RTN","RMPR9DO",168,0)
 S LINKED=$P($G(^RMPR(668,RMPRA,10,0)),U,4)
"RTN","RMPR9DO",169,0)
 I LINKED="" S LINKED=0
"RTN","RMPR9DO",170,0)
 ;
"RTN","RMPR9DO",171,0)
 S ^TMP($J,LINE)=CDATE_U_WHO_U_SSN_U_TYPE_U_DES_U
"RTN","RMPR9DO",172,0)
 ;look at pday and parse
"RTN","RMPR9DO",173,0)
 S (HD1,HD2,HD3,HD4,HD5,DH6)=""
"RTN","RMPR9DO",174,0)
 ;SD Working Days in Pending Status
"RTN","RMPR9DO",175,0)
 S (SD1,SD2,SD3,SD4,SD5)=0
"RTN","RMPR9DO",176,0)
 I (PDAY>0)&(PDAY<6)!(PDAY=0) S HD1=PDAY,DH6="NO"
"RTN","RMPR9DO",177,0)
 I (PPDAY>0)&(PPDAY<6)!(PPDAY=0) S SD1=PPDAY
"RTN","RMPR9DO",178,0)
 I (PDAY>0)&(PDAY<6)&(TYPE["MANUAL")!(PDAY=0)&(TYPE["MANUAL") S MHD1=MHD1+1
"RTN","RMPR9DO",179,0)
 I (PDAY>0)&(PDAY<6)&(TYPE'["MANUAL")!(PDAY=0)&(TYPE'["MANUAL") S CHD1=CHD1+1
"RTN","RMPR9DO",180,0)
 I (PPDAY>0)&(PPDAY<6)&(STATUS["PENDING") S PPDD1=PPDD1+1
"RTN","RMPR9DO",181,0)
 I (PDAY>0)&(PDAY<6)&(PPD=1) S PPD1=PPD1+1
"RTN","RMPR9DO",182,0)
 I HD1=""  S HD1=0
"RTN","RMPR9DO",183,0)
 I (PDAY>5)&(PDAY<10) S HD2=PDAY,DH6="YES"
"RTN","RMPR9DO",184,0)
 I (PPDAY>5)&(PPDAY<10) S SD2=PPDAY
"RTN","RMPR9DO",185,0)
 I (PDAY>5)&(PDAY<10)&(TYPE["MANUAL") S MHD2=MHD2+1
"RTN","RMPR9DO",186,0)
 I (PDAY>5)&(PDAY<10)&(TYPE'["MANUAL") S CHD2=CHD2+1
"RTN","RMPR9DO",187,0)
 I (PPDAY>5)&(PPDAY<10)&(STATUS["PENDING") S PPDD2=PPDD2+1
"RTN","RMPR9DO",188,0)
 I (PDAY>5)&(PDAY<10)&(PPD=1) S PPD2=PPD2+1
"RTN","RMPR9DO",189,0)
 I HD2="" S HD2=0
"RTN","RMPR9DO",190,0)
 I (PDAY>9)&(PDAY<30) S HD3=PDAY,DH6="YES"
"RTN","RMPR9DO",191,0)
 I (PPDAY>9)&(PPDAY<30) S SD3=PPDAY
"RTN","RMPR9DO",192,0)
 I (PDAY>9)&(PDAY<30)&(TYPE["MANUAL") S MHD3=MHD3+1
"RTN","RMPR9DO",193,0)
 I (PDAY>9)&(PDAY<30)&(TYPE'["MANUAL") S CHD3=CHD3+1
"RTN","RMPR9DO",194,0)
 I (PPDAY>9)&(PPDAY<30)&(STATUS["PENDING") S PPDD3=PPDD3+1
"RTN","RMPR9DO",195,0)
 I (PDAY>9)&(PDAY<30)&(PPD=1) S PPD3=PPD3+1
"RTN","RMPR9DO",196,0)
 I HD3="" S HD3=0
"RTN","RMPR9DO",197,0)
 I (PDAY>29)&(PDAY<90) S HD4=PDAY,DH6="YES"
"RTN","RMPR9DO",198,0)
 I (PPDAY>29)&(PPDAY<90) S SD4=PPDAY
"RTN","RMPR9DO",199,0)
 I (PDAY>29)&(PDAY<90)&(TYPE["MANUAL") S MHD4=MHD4+1
"RTN","RMPR9DO",200,0)
 I (PDAY>29)&(PDAY<90)&(TYPE'["MANUAL") S CHD4=CHD4+1
"RTN","RMPR9DO",201,0)
 I (PPDAY>29)&(PPDAY<90)&(STATUS["PENDING") S PPDD4=PPDD4+1
"RTN","RMPR9DO",202,0)
 I (PDAY>29)&(PDAY<90)&(PPD=1) S PPD4=PPD4+1
"RTN","RMPR9DO",203,0)
 I HD4="" S HD4=0
"RTN","RMPR9DO",204,0)
 I PDAY>89 S HD5=PDAY,DH6="YES"
"RTN","RMPR9DO",205,0)
 I PPDAY>89 S SD5=PPDAY
"RTN","RMPR9DO",206,0)
 I (PDAY>89)&(TYPE["MANUAL") S MHD5=MHD5+1
"RTN","RMPR9DO",207,0)
 I (PDAY>89)&(TYPE'["MANUAL") S CHD5=CHD5+1
"RTN","RMPR9DO",208,0)
 I (PPDAY>89)&(STATUS["PENDING") S PPDD5=PPDD5+1
"RTN","RMPR9DO",209,0)
 I (PDAY>89)&(PPD=1) S PPD5=PPD5+1
"RTN","RMPR9DO",210,0)
 I HD5="" S HD5=0
"RTN","RMPR9DO",211,0)
 S (PPD,PPDAY)=0
"RTN","RMPR9DO",212,0)
 I LINKED'=0&(TYPE["MANUAL") S MLNK=MLNK+1
"RTN","RMPR9DO",213,0)
 I LINKED'=0&(TYPE'["MANUAL") S CLNK=CLNK+1
"RTN","RMPR9DO",214,0)
 S ^TMP($J,LINE)=^TMP($J,LINE)_STOPDT_U_DH6_U_HD1_U_HD2_U_HD3_U_HD4_U_HD5
"RTN","RMPR9DO",215,0)
 S ^TMP($J,LINE)=^TMP($J,LINE)_U_STATUS_U_RMPRA_U_STNX_U_LINKED
"RTN","RMPR9DO",216,0)
 S ^TMP($J,LINE)=^TMP($J,LINE)_U_U_SD1_U_SD2_U_SD3_U_SD4_U_SD5
"RTN","RMPR9DO",217,0)
 K CDATE,WHO,SSN,TYPE,DES,PDAY,STATUS,ADATE
"RTN","RMPR9DO",218,0)
 ;PUT RESULTS IN GLOBAL!!
"RTN","RMPR9DO",219,0)
 Q
"RTN","RMPR9DO",220,0)
EXIT ;common exit point
"RTN","RMPR9DO",221,0)
 S RESULT=$NA(^TMP($J))
"RTN","RMPR9DO",222,0)
 Q
"RTN","RMPR9DO",223,0)
MAIL ;send to PCM full dataset
"RTN","RMPR9DO",224,0)
 S XMY("G.RMPR SERVER")=""
"RTN","RMPR9DO",225,0)
 S XMY("G.PROSTHETICS@PSAS.MED.VA.GOV")=""
"RTN","RMPR9DO",226,0)
 S XMDUZ=.5
"RTN","RMPR9DO",227,0)
 S XMSUB="Full DOR From Station: "_STNX
"RTN","RMPR9DO",228,0)
 S XMTEXT="^TMP($J,"
"RTN","RMPR9DO",229,0)
 D ^XMD
"RTN","RMPR9DO",230,0)
 Q
"RTN","RMPR9DO",231,0)
MAILG ;Mail message to local staff
"RTN","RMPR9DO",232,0)
 S XMDUZ=.5
"RTN","RMPR9DO",233,0)
 S XMY("G.RMPR SERVER")=""
"RTN","RMPR9DO",234,0)
 S XMY("VHACOPSASPIPReport@MED.VA.GOV")=""
"RTN","RMPR9DO",235,0)
 S XMSUB="DOR From Station: "_STNX
"RTN","RMPR9DO",236,0)
 S RMPRMSG(1)="The Automated Delayed Order Report has transmitted to Prosthetics HQ."
"RTN","RMPR9DO",237,0)
 S RMPRMSG(2)="This was activated by "_$P(XMFROM,"@",1)
"RTN","RMPR9DO",238,0)
 S RMPRMSG(3)=""
"RTN","RMPR9DO",239,0)
 S RMPRMSG(4)="Summary Data Transmitted, includes the following:"
"RTN","RMPR9DO",240,0)
 S RMPRMSG(5)="Totals for site "_STNX_" listed in the order of 0-5, 6-9, 10-29, 30-89, 90+"
"RTN","RMPR9DO",241,0)
 S RMPRMSG(6)="Seperated by ;"
"RTN","RMPR9DO",242,0)
 S RMPRMSG(7)="***Number of MANUALS      ;;"_STNX_";"_MHD1_";"_MHD2_";"_MHD3_";"_MHD4_";"_MHD5
"RTN","RMPR9DO",243,0)
 S RMPRMSG(8)="***Number of CONSULTS     ;;"_STNX_";"_CHD1_";"_CHD2_";"_CHD3_";"_CHD4_";"_CHD5
"RTN","RMPR9DO",244,0)
 S RMPRMSG(9)="***Minus Previous Pending ;;"_STNX_";"_PPD1_";"_PPD2_";"_PPD3_";"_PPD4_";"_PPD5
"RTN","RMPR9DO",245,0)
 S RMPRMSG(10)=""
"RTN","RMPR9DO",246,0)
 S XMTEXT="RMPRMSG("
"RTN","RMPR9DO",247,0)
 D ^XMD
"RTN","RMPR9DO",248,0)
 Q
"RTN","RMPR9EPD")
0^15^B1278644
"RTN","RMPR9EPD",1,0)
RMPR9EPD ;Hines IOFO/HNC - CPRS SUSPENSE DETAIL DISPLAY ;9/12/02  13:16
"RTN","RMPR9EPD",2,0)
 ;;3.0;PROSTHETICS;**63,59**;Feb 09, 1996
"RTN","RMPR9EPD",3,0)
EN(RESULTS,DA) ; -- main entry point for RMPR DETAILED DISPLAY
"RTN","RMPR9EPD",4,0)
 K ^TMP("GMRCR",$J)
"RTN","RMPR9EPD",5,0)
 S GMRCOER=2
"RTN","RMPR9EPD",6,0)
 S RMPROER=$P(^RMPR(668,DA,0),U,15)
"RTN","RMPR9EPD",7,0)
 I RMPROER="" G EXIT
"RTN","RMPR9EPD",8,0)
 ;field 20 ien to file 123
"RTN","RMPR9EPD",9,0)
 ;create tmp array TMP(GMRCR,$J,DT)
"RTN","RMPR9EPD",10,0)
 K DA
"RTN","RMPR9EPD",11,0)
 D DT^GMRCSLM2(RMPROER)
"RTN","RMPR9EPD",12,0)
 S VALMCNT=$O(^TMP("GMRCR",$J,"DT",""),-1)
"RTN","RMPR9EPD",13,0)
 S BA=0
"RTN","RMPR9EPD",14,0)
 F  S BA=$O(^TMP("GMRCR",$J,"DT",BA)) Q:BA=""  D
"RTN","RMPR9EPD",15,0)
 .S RESULTS(BA)=^TMP("GMRCR",$J,"DT",BA,0)
"RTN","RMPR9EPD",16,0)
 G EXIT
"RTN","RMPR9EPD",17,0)
 Q
"RTN","RMPR9EPD",18,0)
 ;
"RTN","RMPR9EPD",19,0)
ENP ;
"RTN","RMPR9EPD",20,0)
 D EN^GMRCP5(RMPROER)
"RTN","RMPR9EPD",21,0)
 K RMPROER
"RTN","RMPR9EPD",22,0)
 Q
"RTN","RMPR9EPD",23,0)
HDR ; -- header code
"RTN","RMPR9EPD",24,0)
 ;N VA,VADM
"RTN","RMPR9EPD",25,0)
 ;S DFN=RMPRDFN
"RTN","RMPR9EPD",26,0)
 ;D DEM^VADPT
"RTN","RMPR9EPD",27,0)
 S VALMHDR(1)="Detailed Display"
"RTN","RMPR9EPD",28,0)
 ;S VALMHDR(2)="Open/Pending/Closed Suspense for "_$$LOWER^VALM1(VADM(1))_"  ("_$P(VADM(2),U,2)_")"
"RTN","RMPR9EPD",29,0)
 ;D KVAR^VADPT
"RTN","RMPR9EPD",30,0)
 Q
"RTN","RMPR9EPD",31,0)
 ;
"RTN","RMPR9EPD",32,0)
INIT ; -- init variables and list array
"RTN","RMPR9EPD",33,0)
 ;
"RTN","RMPR9EPD",34,0)
 Q
"RTN","RMPR9EPD",35,0)
 ;
"RTN","RMPR9EPD",36,0)
 ;
"RTN","RMPR9EPD",37,0)
 ;
"RTN","RMPR9EPD",38,0)
HELP ; -- help code
"RTN","RMPR9EPD",39,0)
 S X="?" D DISP^XQORM1 W !!
"RTN","RMPR9EPD",40,0)
 Q
"RTN","RMPR9EPD",41,0)
 ;
"RTN","RMPR9EPD",42,0)
EXIT ; -- exit code
"RTN","RMPR9EPD",43,0)
 ;NOT XUSCLEAN
"RTN","RMPR9EPD",44,0)
 I '$D(RESULTS) S RESULTS(0)="Nothing to Display, Manual Suspense"
"RTN","RMPR9EPD",45,0)
 K ^TMP("GMRCR",$J)
"RTN","RMPR9EPD",46,0)
 Q
"RTN","RMPR9EPD",47,0)
 ;
"RTN","RMPR9EPD",48,0)
EXPND ; -- expand code
"RTN","RMPR9EPD",49,0)
 Q
"RTN","RMPR9EPD",50,0)
 ;
"RTN","RMPR9LM")
0^5^B2551359
"RTN","RMPR9LM",1,0)
RMPR9LM ;HOIFO/SPS - GUI 2319 Tab 2 Last Patient Movement  ;9/19/02  11:29
"RTN","RMPR9LM",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9LM",3,0)
A1(IEN) G A2
"RTN","RMPR9LM",4,0)
EN(RESULTS,IEN) ;broker entry point
"RTN","RMPR9LM",5,0)
A2 ;
"RTN","RMPR9LM",6,0)
 S DFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9LM",7,0)
 I DFN="" S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9LM",8,0)
 S VAIP("D")="L" D DEM^VADPT,IN5^VADPT,ELIG^VADPT
"RTN","RMPR9LM",9,0)
 ;Header Info
"RTN","RMPR9LM",10,0)
 ;Last movement
"RTN","RMPR9LM",11,0)
 S RESULTS(0)=VADM(1) ;NAME
"RTN","RMPR9LM",12,0)
 S RESULTS(1)=VADM(2) ;SSN
"RTN","RMPR9LM",13,0)
 S RESULTS(2)=VADM(3) ;DOB
"RTN","RMPR9LM",14,0)
 S RESULTS(3)=VAEL(7) ;CLAIM #
"RTN","RMPR9LM",15,0)
 ;Last Movement
"RTN","RMPR9LM",16,0)
 S RESULTS(4)=$S(VAIP(1)>0:1,1:0) ;1=MOVEMENT,0=NONE
"RTN","RMPR9LM",17,0)
 S RESULTS(5)=$P(VAIP(2),U,2) ;Trans Type
"RTN","RMPR9LM",18,0)
 S RESULTS(6)=$P(VAIP(3),U,2) ;Date
"RTN","RMPR9LM",19,0)
 S RESULTS(7)=$P(VAIP(4),U,2) ;Type of Movement
"RTN","RMPR9LM",20,0)
 S RESULTS(8)=$P(VAIP(5),U,2) ;Ward
"RTN","RMPR9LM",21,0)
 S RESULTS(9)=$P(VAIP(7),U,2) ;Physician
"RTN","RMPR9LM",22,0)
 S RESULTS(10)=VAIP(9) ;Diagnosis
"RTN","RMPR9LM",23,0)
 ;2nd from Last Movement
"RTN","RMPR9LM",24,0)
 S RESULTS(11)=$S(VAIP(13)>0:1,1:0) ;1=MOVEMENT,0=NONE
"RTN","RMPR9LM",25,0)
 S RESULTS(12)=$P(VAIP(13,2),U,2) ;Trans. type
"RTN","RMPR9LM",26,0)
 S RESULTS(13)=$P(VAIP(13,1),U,2) ;Date
"RTN","RMPR9LM",27,0)
 S RESULTS(14)=$P(VAIP(13,3),U,2) ;Type of Movement
"RTN","RMPR9LM",28,0)
 S RESULTS(15)=$P(VAIP(13,4),U,2) ;Ward
"RTN","RMPR9LM",29,0)
 S RESULTS(16)=$P(VAIP(13,5),U,2) ;Physician
"RTN","RMPR9LM",30,0)
 S RESULTS(17)=VAIP(13,7) ;Diagnosis
"RTN","RMPR9LM",31,0)
EXIT ;common exit point
"RTN","RMPR9LM",32,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9LM",33,0)
 K DFN,VADM,VAIL,VAIP
"RTN","RMPR9LM",34,0)
 ;END
"RTN","RMPR9PA")
0^6^B1661694
"RTN","RMPR9PA",1,0)
RMPR9PA ;HOIFO/SPS - GUI 2319 TAB 2 PENDING APPOINTMENTS  ;9/19/02  11:30
"RTN","RMPR9PA",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9PA",3,0)
A1(IEN) G A2
"RTN","RMPR9PA",4,0)
EN(RESULTS,IEN) ;broker entry point
"RTN","RMPR9PA",5,0)
A2 ;
"RTN","RMPR9PA",6,0)
 S DFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9PA",7,0)
 I DFN="" S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9PA",8,0)
 ;Pending Appointments
"RTN","RMPR9PA",9,0)
 D SDA^VADPT
"RTN","RMPR9PA",10,0)
 I '$D(^UTILITY("VASD",$J)) G EXIT
"RTN","RMPR9PA",11,0)
 S CNT=0,RO=0 F  S RO=$O(^UTILITY("VASD",$J,RO)) Q:RO'>0  D
"RTN","RMPR9PA",12,0)
 . I CNT>0 S CNT=CNT+1
"RTN","RMPR9PA",13,0)
 . S RESULTS(CNT)=$P(^UTILITY("VASD",$J,RO,"E"),U,1)_"^"_$P(^UTILITY("VASD",$J,RO,"E"),U,2)_"^"_$P(^UTILITY("VASD",$J,RO,"E"),U,3)_"^"_$P(^UTILITY("VASD",$J,RO,"E"),U,4)
"RTN","RMPR9PA",14,0)
 . S CNT=CNT+1
"RTN","RMPR9PA",15,0)
EXIT ;common exit point
"RTN","RMPR9PA",16,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9PA",17,0)
 K CNT,DFN,RO,^UTILITY("VASD",$J)
"RTN","RMPR9PA",18,0)
 ;END
"RTN","RMPR9RI")
0^29^B420522
"RTN","RMPR9RI",1,0)
RMPR9RI ;HOIFO/SPS - RE-INDEX THE STATUS FIELD OF FILE 668 ;5/27/03  08:54
"RTN","RMPR9RI",2,0)
 ;;3.0;PROSTHETICS;**59**;FEB 09, 1996
"RTN","RMPR9RI",3,0)
 ;
"RTN","RMPR9RI",4,0)
IN ;Check for "L"& "L1" existance
"RTN","RMPR9RI",5,0)
 D CD
"RTN","RMPR9RI",6,0)
 S CHK=0
"RTN","RMPR9RI",7,0)
 I $D(^RMPR(668,"L")) S CHK=CHK+1
"RTN","RMPR9RI",8,0)
 I $D(^RMPR(668,"L1")) S CHK=CHK+1
"RTN","RMPR9RI",9,0)
 Q:CHK=2
"RTN","RMPR9RI",10,0)
 ; Set the "L" and "L1" x-ref in file 668
"RTN","RMPR9RI",11,0)
 S DIK="^RMPR(668,",DIK(1)="14^L1^L" D ENALL^DIK
"RTN","RMPR9RI",12,0)
 Q
"RTN","RMPR9RI",13,0)
CD ; Check for "CD" existance
"RTN","RMPR9RI",14,0)
 S CHK=0
"RTN","RMPR9RI",15,0)
 I $D(^RMPR(668,"CD")) S CHK=CHK+1
"RTN","RMPR9RI",16,0)
 Q:CHK>0
"RTN","RMPR9RI",17,0)
 S DIK="^RMPR(668,",DIK(1)="5^CD" D ENALL^DIK
"RTN","RMPR9RI",18,0)
 Q
"RTN","RMPR9S4")
0^11^B24918776
"RTN","RMPR9S4",1,0)
RMPR9S4 ;HOIFO/HNC - GUI 2319ITEM TRANSACTIONS LIST ;9/10/02  08:42
"RTN","RMPR9S4",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9S4",3,0)
 ;
"RTN","RMPR9S4",4,0)
 Q
"RTN","RMPR9S4",5,0)
A1(IEN) G A2
"RTN","RMPR9S4",6,0)
EN(RESULTS,IEN) ;broker
"RTN","RMPR9S4",7,0)
A2 S (RA,AN,ANS,RK,RZ)=0 K ^TMP($J,"TT"),^TMP($J,"AG"),IT
"RTN","RMPR9S4",8,0)
 K ^TMP($J,"RMPRB")
"RTN","RMPR9S4",9,0)
 K ^TMP($J,"RMPRC")
"RTN","RMPR9S4",10,0)
 ;IT IS RESULTS
"RTN","RMPR9S4",11,0)
 ;0;2 DFN in 668
"RTN","RMPR9S4",12,0)
 S RMPRDFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9S4",13,0)
 I RMPRDFN="" S ^TMP($J,"RMPRB",1)="PATIENT NOT KNOWN" Q
"RTN","RMPR9S4",14,0)
 MERGE ^TMP($J,"TT")=^RMPR(660,"AC",RMPRDFN)
"RTN","RMPR9S4",15,0)
 S B=0
"RTN","RMPR9S4",16,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPR9S4",17,0)
 . S BC=0
"RTN","RMPR9S4",18,0)
 . F  S BC=$O(^TMP($J,"TT",B,BC)) Q:BC'>0  D
"RTN","RMPR9S4",19,0)
 . .;Q:$P($G(^RMPR(660,BC,0)),U,10)'=RMPR("STA")
"RTN","RMPR9S4",20,0)
 . .S GN=$P($G(^RMPR(660,BC,"AMS")),U,1)
"RTN","RMPR9S4",21,0)
 . .S ND=$P($G(^RMPR(660,BC,1)),U,4)
"RTN","RMPR9S4",22,0)
 . .I ND S ND=$P(^RMPR(661.1,ND,0),U,8)
"RTN","RMPR9S4",23,0)
 . .S:ND="" ND=2
"RTN","RMPR9S4",24,0)
 . .S:GN="" GN=BC
"RTN","RMPR9S4",25,0)
 . .S ^TMP($J,"AG",GN,ND,BC)=B
"RTN","RMPR9S4",26,0)
 S B=""
"RTN","RMPR9S4",27,0)
 F  S B=$O(^TMP($J,"AG",B)) Q:B'>0  D
"RTN","RMPR9S4",28,0)
 .S BC=""
"RTN","RMPR9S4",29,0)
 .F  S BC=$O(^TMP($J,"AG",B,BC)) Q:BC'>0  D
"RTN","RMPR9S4",30,0)
 . .Q:BC=2
"RTN","RMPR9S4",31,0)
 . .MERGE ^TMP($J,"AGG")=^TMP($J,"AG",B)
"RTN","RMPR9S4",32,0)
 . .S HC="",GTCST=0
"RTN","RMPR9S4",33,0)
 . .K HCC1
"RTN","RMPR9S4",34,0)
 . .F  S HC=$O(^TMP($J,"AGG",HC)) Q:HC'>0  D
"RTN","RMPR9S4",35,0)
 . . .S HCC=0
"RTN","RMPR9S4",36,0)
 . . .;changes for Surgical Implants
"RTN","RMPR9S4",37,0)
 . . .S BDC=""
"RTN","RMPR9S4",38,0)
 . . .F BDC=1:1 S HCC=$O(^TMP($J,"AGG",HC,HCC)) Q:HCC'>0  D
"RTN","RMPR9S4",39,0)
 . . . .S GTCST=GTCST+$P(^RMPR(660,HCC,0),U,16)
"RTN","RMPR9S4",40,0)
 . . . .I BDC=1&(HC'=2) S HCC1=HCC
"RTN","RMPR9S4",41,0)
 . . . .I BDC'=1 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPR9S4",42,0)
 . . . .I HC=2 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPR9S4",43,0)
 . .I $G(HCC1) S $P(^TMP($J,"TT",^TMP($J,"AGG",1,HCC1),HCC1),U,3)=GTCST K HCC1
"RTN","RMPR9S4",44,0)
 . .K GTCST,^TMP($J,"AGG")
"RTN","RMPR9S4",45,0)
 K ^TMP($J,"AG"),BDC
"RTN","RMPR9S4",46,0)
 S B=0,RC=1
"RTN","RMPR9S4",47,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPR9S4",48,0)
 .S RK=0
"RTN","RMPR9S4",49,0)
 .F  S RK=$O(^TMP($J,"TT",B,RK)) Q:RK'>0  D
"RTN","RMPR9S4",50,0)
 . .Q:$D(^RMPO(665.72,"AC",RK))
"RTN","RMPR9S4",51,0)
 . .S ^TMP($J,"RMPRC",RC)=RK
"RTN","RMPR9S4",52,0)
 . .I $P(^TMP($J,"TT",B,RK),U,3) S $P(^TMP($J,"RMPRC",RC),U,3)=$P(^TMP($J,"TT",B,RK),U,3)
"RTN","RMPR9S4",53,0)
 . .S RC=RC+1
"RTN","RMPR9S4",54,0)
 S RK=0,RZ=0
"RTN","RMPR9S4",55,0)
 K ^TMP($J,"TT"),B
"RTN","RMPR9S4",56,0)
 ;
"RTN","RMPR9S4",57,0)
 G:'$D(^TMP($J,"RMPRC")) END
"RTN","RMPR9S4",58,0)
 ;
"RTN","RMPR9S4",59,0)
DIS ;format data string - ALL
"RTN","RMPR9S4",60,0)
 S RC=""
"RTN","RMPR9S4",61,0)
 S RK=0
"RTN","RMPR9S4",62,0)
 F  S RK=$O(^TMP($J,"RMPRC",RK)) Q:RK=""  D
"RTN","RMPR9S4",63,0)
 .S AN=+^TMP($J,"RMPRC",RK)
"RTN","RMPR9S4",64,0)
 .S Y=^RMPR(660,AN,0)
"RTN","RMPR9S4",65,0)
 .D PRT
"RTN","RMPR9S4",66,0)
 ;
"RTN","RMPR9S4",67,0)
 ;
"RTN","RMPR9S4",68,0)
END I RC=0 S ^TMP($J,"RMPRB",1)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S4",69,0)
 ;
"RTN","RMPR9S4",70,0)
 ;
"RTN","RMPR9S4",71,0)
EXIT ;common exit point
"RTN","RMPR9S4",72,0)
 ;pass to broker
"RTN","RMPR9S4",73,0)
 K ^TMP($J,"RMPRC")
"RTN","RMPR9S4",74,0)
 ;S RESULT=$NA(^TMP($J))
"RTN","RMPR9S4",75,0)
 M RESULTS=^TMP($J,"RMPRB")
"RTN","RMPR9S4",76,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9S4",77,0)
 K I,J,L,R0,RA
"RTN","RMPR9S4",78,0)
 Q
"RTN","RMPR9S4",79,0)
 ;
"RTN","RMPR9S4",80,0)
 Q
"RTN","RMPR9S4",81,0)
PRT S DATE=$P(Y,U,3),TYPE=$P(Y,U,6),QTY=$P(Y,U,7)
"RTN","RMPR9S4",82,0)
 S VEN=$P(Y,U,9),TRANS=$P(Y,U,4),STA=$P(Y,U,10),SN=$P(Y,U,11)
"RTN","RMPR9S4",83,0)
 S DEL=$P(Y,U,12)
"RTN","RMPR9S4",84,0)
 S CST=$S($P(Y,U,16)'="":$P(Y,U,16),$D(^RMPR(660,AN,"LB")):$P(^RMPR(660,AN,"LB"),U,9),1:"")
"RTN","RMPR9S4",85,0)
 ;lab source of procurement
"RTN","RMPR9S4",86,0)
 I $D(^RMPR(660,AN,"LB")) S RMPRLPRO=$P(^("LB"),U,3) D
"RTN","RMPR9S4",87,0)
 .I RMPRLPRO="O" S RMPRLPRO="ORTHOTIC" Q
"RTN","RMPR9S4",88,0)
 .I RMPRLPRO="R" S RMPRLPRO="RESTORATION" Q
"RTN","RMPR9S4",89,0)
 .I RMPRLPRO="S" S RMPRLPRO="SHOE" Q
"RTN","RMPR9S4",90,0)
 .I RMPRLPRO="W" S RMPRLPRO="WHEELCHAIR" Q
"RTN","RMPR9S4",91,0)
 .I RMPRLPRO="N" S RMPRLPRO="FOOT CENTER" Q
"RTN","RMPR9S4",92,0)
 .I RMPRLPRO="D" S RMPRLPRO="DDC" Q
"RTN","RMPR9S4",93,0)
 ;form requested on
"RTN","RMPR9S4",94,0)
 S FRM=$P(Y,U,13),REM=$P(Y,U,18)
"RTN","RMPR9S4",95,0)
 S DATE=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3)
"RTN","RMPR9S4",96,0)
 S TYPE=$S(TYPE="":"",$D(^RMPR(661,TYPE,0)):$P(^(0),U,1),1:""),AMIS=$P(Y,U,15),VEN=$S(VEN="":"",$D(^PRC(440,VEN,0)):$P(^(0),U,1),1:"")
"RTN","RMPR9S4",97,0)
 I $D(^RMPR(660.1,"AC",AN)),$P(^RMPR(660.1,$O(^RMPR(660.1,"AC",AN,0)),0),U,11)]"" S AMIS=AMIS_"+"
"RTN","RMPR9S4",98,0)
 S TRANS=$S(TRANS]"":TRANS,1:""),TRANS1="" S:TRANS="X" TRANS1=TRANS,TRANS=""
"RTN","RMPR9S4",99,0)
 S DEL=$E(DEL,4,5)_"/"_$E(DEL,6,7)_"/"_$E(DEL,2,3) S:DEL="//" DEL=""
"RTN","RMPR9S4",100,0)
 ;
"RTN","RMPR9S4",101,0)
 ;set results array
"RTN","RMPR9S4",102,0)
 ;
"RTN","RMPR9S4",103,0)
 S HTYPE=""
"RTN","RMPR9S4",104,0)
 I $D(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),"HST")) S HTYPE=$E(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),"HST"),1,15)
"RTN","RMPR9S4",105,0)
 S ITEM=AMIS_$S(TYPE'="":$P(^PRC(441,TYPE,0),U,2),$P(Y,U,26)="D":"DELIVERY",$P(Y,U,26)="P":"PICKUP",$P(Y,U,17):"SHIPPING",HTYPE'="":HTYPE,1:"")
"RTN","RMPR9S4",106,0)
 K HTYPE
"RTN","RMPR9S4",107,0)
 ;
"RTN","RMPR9S4",108,0)
 S HCPCS=$P($G(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),1)),U,4)
"RTN","RMPR9S4",109,0)
 I HCPCS'="" S HCPCS=$P($G(^RMPR(661.1,HCPCS,0)),U,1)
"RTN","RMPR9S4",110,0)
 ;
"RTN","RMPR9S4",111,0)
 S ^TMP($J,"RMPRB",RK)=$P(^TMP($J,"RMPRC",RK),U,1)_U_DATE_U_QTY_U_ITEM
"RTN","RMPR9S4",112,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_HCPCS_U_TRANS_TRANS1
"RTN","RMPR9S4",113,0)
 ;
"RTN","RMPR9S4",114,0)
 ;S VEN=$E(VEN,1,15)
"RTN","RMPR9S4",115,0)
 ;display source of procurement for 2529-3 under vendor header
"RTN","RMPR9S4",116,0)
 I $D(RMPRLPRO) S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_RMPRLPRO
"RTN","RMPR9S4",117,0)
 ;E  S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_VEN
"RTN","RMPR9S4",118,0)
 I '$D(RMPRLPRO),VEN'="" S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$E(VEN,1,10)
"RTN","RMPR9S4",119,0)
 K RMPRLPRO
"RTN","RMPR9S4",120,0)
 ;I $D(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),"HST")) S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$E($P(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),"HST"),U,3),1,15)
"RTN","RMPR9S4",121,0)
 ;
"RTN","RMPR9S4",122,0)
 I STA'="" S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$P($G(^DIC(4,STA,99)),U,1)
"RTN","RMPR9S4",123,0)
 I STA="" S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_"UNKNOWN"
"RTN","RMPR9S4",124,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_SN_U_DEL
"RTN","RMPR9S4",125,0)
 I $P(^TMP($J,"RMPRC",RK),U,3) S CST=$P(^TMP($J,"RMPRC",RK),U,3)
"RTN","RMPR9S4",126,0)
 S COST=$J($FN($S(CST'="":CST,$P(Y,U,17):$P(Y,U,17),1:""),"T",2),9)
"RTN","RMPR9S4",127,0)
 ;
"RTN","RMPR9S4",128,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_COST_U_REM
"RTN","RMPR9S4",129,0)
 ;
"RTN","RMPR9S4",130,0)
 I $P(^TMP($J,"RMPRC",RK),U,2)="" S $P(^TMP($J,"RMPRC",RK),U,2)=RZ
"RTN","RMPR9S4",131,0)
 ;
"RTN","RMPR9S4",132,0)
 Q
"RTN","RMPR9S4",133,0)
 ;END
"RTN","RMPR9S4E")
0^12^B34307057
"RTN","RMPR9S4E",1,0)
RMPR9S4E ;HOIFO/SPS - GUI 2319 Extended Display Transaction screen 4 ;12/17/02  09:35
"RTN","RMPR9S4E",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9S4E",3,0)
 ;
"RTN","RMPR9S4E",4,0)
 ;         (IEN)=ien of file 660
"RTN","RMPR9S4E",5,0)
 ;display detailed record
"RTN","RMPR9S4E",6,0)
A1(IEN) G A2
"RTN","RMPR9S4E",7,0)
EN(RESULTS,IEN) ;Broker
"RTN","RMPR9S4E",8,0)
A2 ;
"RTN","RMPR9S4E",9,0)
 I +IEN'>0 S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S4E",10,0)
 I '$D(^RMPR(660,IEN)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S4E",11,0)
 N DIC,DIQ,DR,DA,RMPRV,RMPRDA,RV
"RTN","RMPR9S4E",12,0)
 S DIC=660,DIQ="R19",DR=".01:96",DIQ(0)="EN"
"RTN","RMPR9S4E",13,0)
 S (RMPRDA,DA)=(IEN)
"RTN","RMPR9S4E",14,0)
 D EN^DIQ1
"RTN","RMPR9S4E",15,0)
 S DIQ="R19",DR=72,DIQ(0)="I" D EN^DIQ1
"RTN","RMPR9S4E",16,0)
 ;get vendor info
"RTN","RMPR9S4E",17,0)
 S DA=$P(^RMPR(660,RMPRDA,0),U,9)
"RTN","RMPR9S4E",18,0)
 I DA D
"RTN","RMPR9S4E",19,0)
 .S DIC=440,DIQ="RV",DR=".01:6",DIQ(0)="EN"
"RTN","RMPR9S4E",20,0)
 .S (RMPRV,DA)=$P(^RMPR(660,RMPRDA,0),U,9)
"RTN","RMPR9S4E",21,0)
 .D EN^DIQ1
"RTN","RMPR9S4E",22,0)
 ;
"RTN","RMPR9S4E",23,0)
 ;array defined for record in following format:
"RTN","RMPR9S4E",24,0)
 ;R19(filenumber,ien,field,E)=external form of data
"RTN","RMPR9S4E",25,0)
 ;RV(filenumber,ien,field,E)=external form of data
"RTN","RMPR9S4E",26,0)
 ;example:
"RTN","RMPR9S4E",27,0)
 ;R19(660,100,.01,"E")=APR 27, 1995
"RTN","RMPR9S4E",28,0)
 ;R19(660,100,.02,"E")=NAME,PATIENT
"RTN","RMPR9S4E",29,0)
 ;RV(440,131,.01,"E")=ORTHOTIC LAB
"RTN","RMPR9S4E",30,0)
 S RMPRDFN=$P(^RMPR(660,RMPRDA,0),U,2)
"RTN","RMPR9S4E",31,0)
 S RMPRNAM=$P(^DPT(RMPRDFN,0),U),RMPRSSN=$P(^(0),U,9),RMPRDOB=$P(^(0),U,3)
"RTN","RMPR9S4E",32,0)
 ;
"RTN","RMPR9S4E",33,0)
 D HDR
"RTN","RMPR9S4E",34,0)
 ; "TYPE OF FORM: ",
"RTN","RMPR9S4E",35,0)
 S RESULTS(5)=$G(R19(660,RMPRDA,11,"E"))
"RTN","RMPR9S4E",36,0)
 ; "INITIATOR: ",
"RTN","RMPR9S4E",37,0)
 S RESULTS(6)=$G(R19(660,RMPRDA,27,"E"))
"RTN","RMPR9S4E",38,0)
 ; "DATE: ",
"RTN","RMPR9S4E",39,0)
 S RESULTS(7)=$G(R19(660,RMPRDA,1,"E"))
"RTN","RMPR9S4E",40,0)
 ; "DELIVER TO: ",
"RTN","RMPR9S4E",41,0)
 S RESULTS(8)=$G(R19(660,RMPRDA,25,"E"))
"RTN","RMPR9S4E",42,0)
 ; "TYPE TRANS: ",
"RTN","RMPR9S4E",43,0)
 S RESULTS(9)=$G(R19(660,RMPRDA,2,"E"))
"RTN","RMPR9S4E",44,0)
 ; "QTY: ",
"RTN","RMPR9S4E",45,0)
 S RESULTS(10)=$G(R19(660,RMPRDA,5,"E"))
"RTN","RMPR9S4E",46,0)
 ; "INVENTORY POINT: "
"RTN","RMPR9S4E",47,0)
 S RESULTS(11)=$G(R19(660,RMPRDA,29,"E"))
"RTN","RMPR9S4E",48,0)
 ; "SOURCE: ",
"RTN","RMPR9S4E",49,0)
 S RESULTS(12)=$G(R19(660,RMPRDA,12,"E"))
"RTN","RMPR9S4E",50,0)
 ;vendor tracking number
"RTN","RMPR9S4E",51,0)
 S (RESULTS(13),RESULTS(14))=""
"RTN","RMPR9S4E",52,0)
 I $G(R19(660,RMPRDA,11,"E"))="VISA" D
"RTN","RMPR9S4E",53,0)
 .; "VENDOR TRACKING: ",
"RTN","RMPR9S4E",54,0)
 .S RESULTS(13)=$G(R19(660,RMPRDA,4.2,"E"))
"RTN","RMPR9S4E",55,0)
 .; "BANK AUTHORIZATION: ",
"RTN","RMPR9S4E",56,0)
 .S RESULTS(14)=$G(R19(660,RMPRDA,4.3,"E"))
"RTN","RMPR9S4E",57,0)
 ; "VENDOR: ",
"RTN","RMPR9S4E",58,0)
 S RESULTS(15)=$G(R19(660,RMPRDA,7,"E"))
"RTN","RMPR9S4E",59,0)
 ; VENDOR PHONE AND ADDRESS INFO
"RTN","RMPR9S4E",60,0)
 F I=16:1:20 S RESULTS(I)=""
"RTN","RMPR9S4E",61,0)
 I $D(RV) D
"RTN","RMPR9S4E",62,0)
 .; "VENDOR PHONE: and Address ",
"RTN","RMPR9S4E",63,0)
 .S RESULTS(16)=$G(RV(440,RMPRV,5,"E"))
"RTN","RMPR9S4E",64,0)
 .S RESULTS(17)=$G(RV(440,RMPRV,1,"E"))
"RTN","RMPR9S4E",65,0)
 .S RESULTS(18)=$G(RV(440,RMPRV,4.2,"E"))
"RTN","RMPR9S4E",66,0)
 .S RESULTS(19)=$G(RV(440,RMPRV,4.4,"E"))
"RTN","RMPR9S4E",67,0)
 .S RESULTS(20)=$G(RV(440,RMPRV,4.6,"E"))
"RTN","RMPR9S4E",68,0)
 ; "DELIVERY DATE: "
"RTN","RMPR9S4E",69,0)
 S RESULTS(21)=$G(R19(660,RMPRDA,10,"E"))
"RTN","RMPR9S4E",70,0)
 ; "TOTAL COST: "
"RTN","RMPR9S4E",71,0)
 S RESULTS(22)=0.00
"RTN","RMPR9S4E",72,0)
 I $G(R19(660,RMPRDA,14,"E"))'="" S RESULTS(22)="$"_$FN(R19(660,RMPRDA,14,"E"),"T",2)
"RTN","RMPR9S4E",73,0)
 I $G(R19(660,RMPRDA,14,"E"))="" S RESULTS(22)=$S($G(R19(660,RMPRDA,6,"E"))'="":"$"_$FN(R19(660,RMPRDA,6,"E"),"T",2),$G(R19(660,RMPRDA,48,"E"))'="":"$"_$FN(R19(660,RMPRDA,48,"E"),"T",2),1:"")
"RTN","RMPR9S4E",74,0)
 ; "OBL: ",
"RTN","RMPR9S4E",75,0)
 S RESULTS(23)=$G(R19(660,RMPRDA,23,"E"))
"RTN","RMPR9S4E",76,0)
 ;
"RTN","RMPR9S4E",77,0)
 ;lab data
"RTN","RMPR9S4E",78,0)
 F I=24:1:32 S RESULTS(I)=""
"RTN","RMPR9S4E",79,0)
 I $D(^RMPR(660,RMPRDA,"LB")) D
"RTN","RMPR9S4E",80,0)
 .N DIC,DIQ,DR,L19,DA
"RTN","RMPR9S4E",81,0)
 .S (DA,RMPRLA)=$P(^RMPR(660,RMPRDA,"LB"),U,10)
"RTN","RMPR9S4E",82,0)
 .Q:DA=""
"RTN","RMPR9S4E",83,0)
 .S DIC=664.1,DIQ="L19",DR="15",DIQ(0)="E"
"RTN","RMPR9S4E",84,0)
 .D EN^DIQ1
"RTN","RMPR9S4E",85,0)
 .; "WORK ORDER: ",
"RTN","RMPR9S4E",86,0)
 .S RESULTS(24)=$G(R19(660,RMPRDA,71,"E"))
"RTN","RMPR9S4E",87,0)
 .; "RECEIVING STATION: ",
"RTN","RMPR9S4E",88,0)
 .S RESULTS(25)=$G(R19(660,RMPRDA,70,"E"))
"RTN","RMPR9S4E",89,0)
 .; "TECHNICIAN: ",
"RTN","RMPR9S4E",90,0)
 .S RESULTS(26)=$G(L19(664.1,RMPRLA,15,"E"))
"RTN","RMPR9S4E",91,0)
 .; "TOTAL LABOR HOURS: ",
"RTN","RMPR9S4E",92,0)
 .S RESULTS(27)=$G(R19(660,RMPRDA,45,"E"))
"RTN","RMPR9S4E",93,0)
 .; "TOTAL LABOR COST: ",
"RTN","RMPR9S4E",94,0)
 .S RESULTS(28)=$G(R19(660,RMPRDA,46,"E"))
"RTN","RMPR9S4E",95,0)
 .; "TOTAL MATERIAL COST: ",
"RTN","RMPR9S4E",96,0)
 .S RESULTS(29)=$G(R19(660,RMPRDA,47,"E"))
"RTN","RMPR9S4E",97,0)
 .; "TOTAL LAB COST: ",
"RTN","RMPR9S4E",98,0)
 .S RESULTS(30)=$G(R19(660,RMPRDA,48,"E"))
"RTN","RMPR9S4E",99,0)
 .; "COMPLETION DATE: ",
"RTN","RMPR9S4E",100,0)
 .S RESULTS(31)=$G(R19(660,RMPRDA,50,"E"))
"RTN","RMPR9S4E",101,0)
 .; "LAB REMARKS: ",
"RTN","RMPR9S4E",102,0)
 .S RESULTS(32)=$G(R19(660,RMPRDA,51,"E"))
"RTN","RMPR9S4E",103,0)
 ; "REMARKS: ",
"RTN","RMPR9S4E",104,0)
 S RESULTS(33)=$G(R19(660,RMPRDA,16,"E"))
"RTN","RMPR9S4E",105,0)
 ; "RETURN STATUS: ",
"RTN","RMPR9S4E",106,0)
 S RESULTS(34)=$G(R19(660,RMPRDA,17.5,"E"))
"RTN","RMPR9S4E",107,0)
 ;
"RTN","RMPR9S4E",108,0)
 ; CoreFLS Data used to be/and same as historical data
"RTN","RMPR9S4E",109,0)
 F I=35:1:42 S RESULTS(I)=""
"RTN","RMPR9S4E",110,0)
 I $G(R19(660,RMPRDA,15,"E"))["*" D
"RTN","RMPR9S4E",111,0)
 .;include records that have been merged
"RTN","RMPR9S4E",112,0)
 .; "COREFLS/HISTORICAL DATA",!
"RTN","RMPR9S4E",113,0)
 .Q:'$D(R19(660,RMPRDA,89))
"RTN","RMPR9S4E",114,0)
 .; "ITEM: ",
"RTN","RMPR9S4E",115,0)
 .S RESULTS(35)=$G(R19(660,RMPRDA,89,"E"))
"RTN","RMPR9S4E",116,0)
 .; "STATION: ",
"RTN","RMPR9S4E",117,0)
 .S RESULTS(36)=$G(R19(660,RMPRDA,90,"E"))
"RTN","RMPR9S4E",118,0)
 .; "VENDOR: ",
"RTN","RMPR9S4E",119,0)
 .S RESULTS(37)=$G(R19(660,RMPRDA,91,"E"))
"RTN","RMPR9S4E",120,0)
 .; "   PHONE: ",
"RTN","RMPR9S4E",121,0)
 .S RESULTS(38)=$G(R19(660,RMPRDA,92,"E"))
"RTN","RMPR9S4E",122,0)
 .; " STREET
"RTN","RMPR9S4E",123,0)
 .S RESULTS(39)=$G(R19(660,RMPRDA,93,"E"))
"RTN","RMPR9S4E",124,0)
 .; CITY
"RTN","RMPR9S4E",125,0)
 .S RESULTS(40)=$G(R19(660,RMPRDA,94,"E"))
"RTN","RMPR9S4E",126,0)
 .; STATE
"RTN","RMPR9S4E",127,0)
 .S RESULTS(41)=$G(R19(660,RMPRDA,95,"E"))
"RTN","RMPR9S4E",128,0)
 .; ZIP
"RTN","RMPR9S4E",129,0)
 .S RESULTS(42)=$G(R19(660,RMPRDA,96,"E"))
"RTN","RMPR9S4E",130,0)
 ;put in lab display here fields 45,46,47,48 and 51
"RTN","RMPR9S4E",131,0)
 ;lab amis
"RTN","RMPR9S4E",132,0)
 F I=43:1:44 S RESULTS(I)=""
"RTN","RMPR9S4E",133,0)
 I $G(R19(660,RMPRDA,73,"E")) D
"RTN","RMPR9S4E",134,0)
 .; "ORTHOTICS LAB CODE: "
"RTN","RMPR9S4E",135,0)
 .S RESULTS(43)=$S($D(R19(660,RMPRDA,74,"E")):R19(660,RMPRDA,74,"E"),$D(R19(660,RMPRDA,75,"E")):R19(660,RMPRDA,75,"E"),1:"")
"RTN","RMPR9S4E",136,0)
 .; "RESTORATIONS LAB CODE: "
"RTN","RMPR9S4E",137,0)
 .S RESULTS(44)=$S($D(R19(660,RMPRDA,76,"E")):R19(660,RMPRDA,76,"E"),$D(R19(660,RMPRDA,77,"E")):R19(660,RMPRDA,77,"E"),1:"")
"RTN","RMPR9S4E",138,0)
 ;purchasing and issue from stock amis
"RTN","RMPR9S4E",139,0)
 ; "DISABILITY SERVED: ",
"RTN","RMPR9S4E",140,0)
 S RESULTS(45)=$G(R19(660,RMPRDA,62,"E"))
"RTN","RMPR9S4E",141,0)
 ;appliance/item information
"RTN","RMPR9S4E",142,0)
 ; "APPLIANCE: ",
"RTN","RMPR9S4E",143,0)
 S RESULTS(46)=$G(R19(660,RMPRDA,4,"E"))
"RTN","RMPR9S4E",144,0)
 ; "PSAS HCPCS: ",
"RTN","RMPR9S4E",145,0)
 S RESULTS(47)=$G(R19(660,RMPRDA,4.5,"E"))
"RTN","RMPR9S4E",146,0)
 ; "PSAS HCPCS DESC.
"RTN","RMPR9S4E",147,0)
 S RESULTS(48)=""
"RTN","RMPR9S4E",148,0)
 I $P($G(^RMPR(660,RMPRDA,1)),U,4) S RESULTS(48)=$P($G(^RMPR(661.1,$P(^RMPR(660,RMPRDA,1),U,4),0)),U,2)
"RTN","RMPR9S4E",149,0)
 ;added by #69
"RTN","RMPR9S4E",150,0)
 S (RMPRICC,RMPRICD)=""
"RTN","RMPR9S4E",151,0)
 S RMPRICC=$G(R19(660,RMPRDA,8.8,"E"))
"RTN","RMPR9S4E",152,0)
 I $D(^RMPR(660,RMPRDA,10)) S RMPRIC9=$P(^RMPR(660,RMPRDA,10),U,8)
"RTN","RMPR9S4E",153,0)
 I $G(RMPRIC9),$D(^ICD9(RMPRIC9,0)) S RMPRICD=$G(^ICD9(RMPRIC9,1))
"RTN","RMPR9S4E",154,0)
 ; "ICD-9 Code: ",
"RTN","RMPR9S4E",155,0)
 S RESULTS(49)=RMPRICC_"    "_$E(RMPRICD,1,55)
"RTN","RMPR9S4E",156,0)
 ; "CPT MODIFIER: ",
"RTN","RMPR9S4E",157,0)
 S RESULTS(50)=$G(R19(660,RMPRDA,4.7,"E"))
"RTN","RMPR9S4E",158,0)
 ; "DESCRIPTION: ",
"RTN","RMPR9S4E",159,0)
 S RESULTS(51)=$G(R19(660,RMPRDA,24,"E"))
"RTN","RMPR9S4E",160,0)
 ; ,"EXTENDED DESCRIPTION: ",!
"RTN","RMPR9S4E",161,0)
 N R28
"RTN","RMPR9S4E",162,0)
 I $D(R19(660,RMPRDA,28)) D
"RTN","RMPR9S4E",163,0)
 .;command part of new standards
"RTN","RMPR9S4E",164,0)
 .MERGE R28=R19(660,RMPRDA,28)
"RTN","RMPR9S4E",165,0)
 S LN=0,CNT=52
"RTN","RMPR9S4E",166,0)
 F  S LN=$O(R28(LN)) Q:LN'>0  D
"RTN","RMPR9S4E",167,0)
 .S RESULTS(CNT)=R28(LN)
"RTN","RMPR9S4E",168,0)
 .S CNT=CNT+1
"RTN","RMPR9S4E",169,0)
 G EXIT
"RTN","RMPR9S4E",170,0)
 ;
"RTN","RMPR9S4E",171,0)
HDR ;display heading
"RTN","RMPR9S4E",172,0)
 S RESULTS(1)=RMPRNAM
"RTN","RMPR9S4E",173,0)
 ; " SSN: "
"RTN","RMPR9S4E",174,0)
 S RESULTS(2)=$E(RMPRSSN,1,3)_"-"_$E(RMPRSSN,4,5)_"-"_$E(RMPRSSN,6,10)
"RTN","RMPR9S4E",175,0)
 S RESULTS(3)=$G(R19(660,RMPRDA,8,"E"))
"RTN","RMPR9S4E",176,0)
 ; "DOB: "
"RTN","RMPR9S4E",177,0)
 S RESULTS(4)=$S(RMPRDOB:$E(RMPRDOB,4,5)_"-"_$E(RMPRDOB,6,7)_"-"_(1700+$E(RMPRDOB,1,3)),1:"Unknown")
"RTN","RMPR9S4E",178,0)
 Q
"RTN","RMPR9S4E",179,0)
EXIT ;common exit point
"RTN","RMPR9S4E",180,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9S4E",181,0)
 K R19,RV,RMPRICC,RMPRICD,RMPRIC9
"RTN","RMPR9S4E",182,0)
 Q
"RTN","RMPR9S4E",183,0)
 ;end
"RTN","RMPR9S6")
0^3^B655259
"RTN","RMPR9S6",1,0)
RMPR9S6 ;HOIFO/HNC - GUI 2319 CRITICAL COMMENTS ;9/23/02  08:25
"RTN","RMPR9S6",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9S6",3,0)
A1(IEN) G A2
"RTN","RMPR9S6",4,0)
EN(RESULTS,IEN) ;broker entry point
"RTN","RMPR9S6",5,0)
A2 ;
"RTN","RMPR9S6",6,0)
 S RMPRDFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9S6",7,0)
 I RMPRDFN="" S ^RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S6",8,0)
 ;
"RTN","RMPR9S6",9,0)
 D GETS^DIQ(665,RMPRDFN,"30","E","RA")
"RTN","RMPR9S6",10,0)
 I '$D(RA) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S6",11,0)
 ;
"RTN","RMPR9S6",12,0)
 ;RA(665,"RMPRDFN,",30,1)=THIS IS LINE ONE
"RTN","RMPR9S6",13,0)
 ;
"RTN","RMPR9S6",14,0)
 S LN=0,CNT=0
"RTN","RMPR9S6",15,0)
 F  S LN=$O(RA(665,RMPRDFN_",",30,LN)) Q:LN'>0  D
"RTN","RMPR9S6",16,0)
 .S RESULTS(CNT)=RA(665,RMPRDFN_",",30,LN)
"RTN","RMPR9S6",17,0)
 .S CNT=CNT+1
"RTN","RMPR9S6",18,0)
 ;
"RTN","RMPR9S6",19,0)
EXIT ;common exit point
"RTN","RMPR9S6",20,0)
 K RA,LN,CNT
"RTN","RMPR9S6",21,0)
 ;END
"RTN","RMPR9S7")
0^8^B21651675
"RTN","RMPR9S7",1,0)
RMPR9S7 ;HOIFO/HNC - GUI 2319 TAB 7 HISA TRANSACTIONS LIST ;9/10/02  08:43
"RTN","RMPR9S7",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9S7",3,0)
 ;
"RTN","RMPR9S7",4,0)
 Q
"RTN","RMPR9S7",5,0)
A1(IEN) G A2
"RTN","RMPR9S7",6,0)
EN(RESULTS,IEN) ;broker
"RTN","RMPR9S7",7,0)
A2 S (RA,AN,ANS,RK,RZ)=0 K ^TMP($J,"TT"),^TMP($J,"AG"),IT
"RTN","RMPR9S7",8,0)
 K ^TMP($J,"RMPRB")
"RTN","RMPR9S7",9,0)
 K ^TMP($J,"RMPRC")
"RTN","RMPR9S7",10,0)
 ;IT IS RESULTS
"RTN","RMPR9S7",11,0)
 ;0;2 DFN in 668
"RTN","RMPR9S7",12,0)
 S RMPRDFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9S7",13,0)
 I RMPRDFN="" S ^TMP($J,"RMPRB",1)="PATIENT NOT KNOWN" Q
"RTN","RMPR9S7",14,0)
 MERGE ^TMP($J,"TT")=^RMPR(660,"AC",RMPRDFN)
"RTN","RMPR9S7",15,0)
 S B=0
"RTN","RMPR9S7",16,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPR9S7",17,0)
 . S BC=0
"RTN","RMPR9S7",18,0)
 . F  S BC=$O(^TMP($J,"TT",B,BC)) Q:BC'>0  D
"RTN","RMPR9S7",19,0)
 . .;Q:$P($G(^RMPR(660,BC,0)),U,10)'=RMPR("STA")
"RTN","RMPR9S7",20,0)
 . .S GN=$P($G(^RMPR(660,BC,"AMS")),U,1)
"RTN","RMPR9S7",21,0)
 . .S ND=$P($G(^RMPR(660,BC,1)),U,4)
"RTN","RMPR9S7",22,0)
 . .I ND S ND=$P(^RMPR(661.1,ND,0),U,8)
"RTN","RMPR9S7",23,0)
 . .S:ND="" ND=2
"RTN","RMPR9S7",24,0)
 . .S:GN="" GN=BC
"RTN","RMPR9S7",25,0)
 . .S ^TMP($J,"AG",GN,ND,BC)=B
"RTN","RMPR9S7",26,0)
 S B=""
"RTN","RMPR9S7",27,0)
 F  S B=$O(^TMP($J,"AG",B)) Q:B'>0  D
"RTN","RMPR9S7",28,0)
 .S BC=""
"RTN","RMPR9S7",29,0)
 .F  S BC=$O(^TMP($J,"AG",B,BC)) Q:BC'>0  D
"RTN","RMPR9S7",30,0)
 . .Q:BC=2
"RTN","RMPR9S7",31,0)
 . .MERGE ^TMP($J,"AGG")=^TMP($J,"AG",B)
"RTN","RMPR9S7",32,0)
 . .S HC="",GTCST=0
"RTN","RMPR9S7",33,0)
 . .K HCC1
"RTN","RMPR9S7",34,0)
 . .F  S HC=$O(^TMP($J,"AGG",HC)) Q:HC'>0  D
"RTN","RMPR9S7",35,0)
 . . .S HCC=0
"RTN","RMPR9S7",36,0)
 . . .;changes for Surgical Implants
"RTN","RMPR9S7",37,0)
 . . .S BDC=""
"RTN","RMPR9S7",38,0)
 . . .F BDC=1:1 S HCC=$O(^TMP($J,"AGG",HC,HCC)) Q:HCC'>0  D
"RTN","RMPR9S7",39,0)
 . . . .S GTCST=GTCST+$P(^RMPR(660,HCC,0),U,16)
"RTN","RMPR9S7",40,0)
 . . . .I BDC=1&(HC'=2) S HCC1=HCC
"RTN","RMPR9S7",41,0)
 . . . .I BDC'=1 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPR9S7",42,0)
 . . . .I HC=2 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPR9S7",43,0)
 . .I $G(HCC1) S $P(^TMP($J,"TT",^TMP($J,"AGG",1,HCC1),HCC1),U,3)=GTCST K HCC1
"RTN","RMPR9S7",44,0)
 . .K GTCST,^TMP($J,"AGG")
"RTN","RMPR9S7",45,0)
 K ^TMP($J,"AG"),BDC
"RTN","RMPR9S7",46,0)
 S B=0,RC=1
"RTN","RMPR9S7",47,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPR9S7",48,0)
 .S RK=0
"RTN","RMPR9S7",49,0)
 .F  S RK=$O(^TMP($J,"TT",B,RK)) Q:RK'>0  D
"RTN","RMPR9S7",50,0)
 . .Q:$D(^RMPO(665.72,"AC",RK))
"RTN","RMPR9S7",51,0)
 . .S ^TMP($J,"RMPRC",RC)=RK
"RTN","RMPR9S7",52,0)
 . .I $P(^TMP($J,"TT",B,RK),U,3) S $P(^TMP($J,"RMPRC",RC),U,3)=$P(^TMP($J,"TT",B,RK),U,3)
"RTN","RMPR9S7",53,0)
 . .S RC=RC+1
"RTN","RMPR9S7",54,0)
 S RK=0,RZ=0
"RTN","RMPR9S7",55,0)
 K ^TMP($J,"TT"),B
"RTN","RMPR9S7",56,0)
 ;
"RTN","RMPR9S7",57,0)
 G:'$D(^TMP($J,"RMPRC")) END
"RTN","RMPR9S7",58,0)
 ;
"RTN","RMPR9S7",59,0)
DIS ;format data string - only HISA
"RTN","RMPR9S7",60,0)
 S RC=""
"RTN","RMPR9S7",61,0)
 S RK=1
"RTN","RMPR9S7",62,0)
 F  S RK=$O(^TMP($J,"RMPRC",RK)) Q:RK=""  D
"RTN","RMPR9S7",63,0)
 .S AN=+^TMP($J,"RMPRC",RK)
"RTN","RMPR9S7",64,0)
 .S Y=^RMPR(660,AN,0)
"RTN","RMPR9S7",65,0)
 .D PRT
"RTN","RMPR9S7",66,0)
 ;
"RTN","RMPR9S7",67,0)
END ;I RC=0 S ^TMP($J,"RMPRB",0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S7",68,0)
 ;
"RTN","RMPR9S7",69,0)
 ;
"RTN","RMPR9S7",70,0)
EXIT ;common exit point
"RTN","RMPR9S7",71,0)
 K ^TMP($J,"RMPRC")
"RTN","RMPR9S7",72,0)
 ;pass to broker
"RTN","RMPR9S7",73,0)
 ;S RESULT=$NA(^TMP($J))
"RTN","RMPR9S7",74,0)
 M RESULTS=^TMP($J,"RMPRB")
"RTN","RMPR9S7",75,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9S7",76,0)
 K I,J,L,R0,RA
"RTN","RMPR9S7",77,0)
 Q
"RTN","RMPR9S7",78,0)
 ;
"RTN","RMPR9S7",79,0)
 Q
"RTN","RMPR9S7",80,0)
PRT S DATE=$P(Y,U,3),TYPE=$P(Y,U,6),QTY=$P(Y,U,7)
"RTN","RMPR9S7",81,0)
 S VEN=$P(Y,U,9),TRANS=$P(Y,U,4),STA=$P(Y,U,10),SN=$P(Y,U,11)
"RTN","RMPR9S7",82,0)
 S DEL=$P(Y,U,12)
"RTN","RMPR9S7",83,0)
 S CST=$S($P(Y,U,16)'="":$P(Y,U,16),$D(^RMPR(660,AN,"LB")):$P(^RMPR(660,AN,"LB"),U,9),1:"")
"RTN","RMPR9S7",84,0)
 ;lab source of procurement
"RTN","RMPR9S7",85,0)
 I $D(^RMPR(660,AN,"LB")) S RMPRLPRO=$P(^("LB"),U,3) D
"RTN","RMPR9S7",86,0)
 .I RMPRLPRO="O" S RMPRLPRO="ORTHOTIC" Q
"RTN","RMPR9S7",87,0)
 .I RMPRLPRO="R" S RMPRLPRO="RESTORATION" Q
"RTN","RMPR9S7",88,0)
 .I RMPRLPRO="S" S RMPRLPRO="SHOE" Q
"RTN","RMPR9S7",89,0)
 .I RMPRLPRO="W" S RMPRLPRO="WHEELCHAIR" Q
"RTN","RMPR9S7",90,0)
 .I RMPRLPRO="N" S RMPRLPRO="FOOT CENTER" Q
"RTN","RMPR9S7",91,0)
 .I RMPRLPRO="D" S RMPRLPRO="DDC" Q
"RTN","RMPR9S7",92,0)
 ;form requested on
"RTN","RMPR9S7",93,0)
 S FRM=$P(Y,U,13),REM=$P(Y,U,18)
"RTN","RMPR9S7",94,0)
 S DATE=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3)
"RTN","RMPR9S7",95,0)
 S TYPE=$S(TYPE="":"",$D(^RMPR(661,TYPE,0)):$P(^(0),U,1),1:""),AMIS=$P(Y,U,15),VEN=$S(VEN="":"",$D(^PRC(440,VEN,0)):$P(^(0),U,1),1:"")
"RTN","RMPR9S7",96,0)
 I $D(^RMPR(660.1,"AC",AN)),$P(^RMPR(660.1,$O(^RMPR(660.1,"AC",AN,0)),0),U,11)]"" S AMIS=AMIS_"+"
"RTN","RMPR9S7",97,0)
 S TRANS=$S(TRANS]"":TRANS,1:""),TRANS1="" S:TRANS="X" TRANS1=TRANS,TRANS=""
"RTN","RMPR9S7",98,0)
 S DEL=$E(DEL,4,5)_"/"_$E(DEL,6,7)_"/"_$E(DEL,2,3) S:DEL="//" DEL=""
"RTN","RMPR9S7",99,0)
 ;
"RTN","RMPR9S7",100,0)
 ;set results array
"RTN","RMPR9S7",101,0)
 ;
"RTN","RMPR9S7",102,0)
 S ITEM=$S(TYPE'="":$P(^PRC(441,TYPE,0),U,2),$P(Y,U,26)="D":"DELIVERY",$P(Y,U,26)="P":"PICKUP",$P(Y,U,17):"SHIPPING",1:"")
"RTN","RMPR9S7",103,0)
 ;
"RTN","RMPR9S7",104,0)
 S HCPCS=$P($G(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),1)),U,4)
"RTN","RMPR9S7",105,0)
 I HCPCS'="" S HCPCS=$P($G(^RMPR(661.1,HCPCS,0)),U,1)
"RTN","RMPR9S7",106,0)
 Q:HCPCS'["HISA"
"RTN","RMPR9S7",107,0)
 S ^TMP($J,"RMPRB",RK)=$P(^TMP($J,"RMPRC",RK),U,1)_U_DATE_U_QTY_U_ITEM
"RTN","RMPR9S7",108,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_HCPCS_U_TRANS_TRANS1
"RTN","RMPR9S7",109,0)
 ;
"RTN","RMPR9S7",110,0)
 ;display source of procurement for 2529-3 under vendor header
"RTN","RMPR9S7",111,0)
 I $D(RMPRLPRO) S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_RMPRLPRO
"RTN","RMPR9S7",112,0)
 I '$D(RMPRLPRO),VEN'="" S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$E(VEN,1,10)
"RTN","RMPR9S7",113,0)
 K RMPRLPRO
"RTN","RMPR9S7",114,0)
 ;
"RTN","RMPR9S7",115,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$P($G(^DIC(4,STA,99)),U,1)_U_SN_U_DEL
"RTN","RMPR9S7",116,0)
 I $P(^TMP($J,"RMPRC",RK),U,3) S CST=$P(^TMP($J,"RMPRC",RK),U,3)
"RTN","RMPR9S7",117,0)
 S COST=$J($FN($S(CST'="":CST,$P(Y,U,17):$P(Y,U,17),1:""),"T",2),9)
"RTN","RMPR9S7",118,0)
 ;
"RTN","RMPR9S7",119,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_COST_U_REM
"RTN","RMPR9S7",120,0)
 ;
"RTN","RMPR9S7",121,0)
 I $P(^TMP($J,"RMPRC",RK),U,2)="" S $P(^TMP($J,"RMPRC",RK),U,2)=RZ
"RTN","RMPR9S7",122,0)
 ;
"RTN","RMPR9S7",123,0)
 Q
"RTN","RMPR9S7",124,0)
 ;END
"RTN","RMPR9S8")
0^9^B21751008
"RTN","RMPR9S8",1,0)
RMPR9S8 ;HOIFO/HNC - GUI 2319 TAB 8 HOME OXYGEN TRANSACTIONS LIST ;9/10/02  08:43
"RTN","RMPR9S8",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9S8",3,0)
 ;
"RTN","RMPR9S8",4,0)
 Q
"RTN","RMPR9S8",5,0)
A1(IEN) G A2
"RTN","RMPR9S8",6,0)
EN(RESULTS,IEN) ;broker
"RTN","RMPR9S8",7,0)
A2 S (RA,AN,ANS,RK,RZ)=0 K ^TMP($J,"TT"),^TMP($J,"AG"),IT
"RTN","RMPR9S8",8,0)
 K ^TMP($J,"RMPRB")
"RTN","RMPR9S8",9,0)
 K ^TMP($J,"RMPRC")
"RTN","RMPR9S8",10,0)
 ;IT IS RESULTS
"RTN","RMPR9S8",11,0)
 ;0;2 DFN in 668
"RTN","RMPR9S8",12,0)
 S RMPRDFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9S8",13,0)
 I RMPRDFN="" S ^TMP($J,"RMPRB",1)="PATIENT NOT KNOWN" Q
"RTN","RMPR9S8",14,0)
 MERGE ^TMP($J,"TT")=^RMPR(660,"AC",RMPRDFN)
"RTN","RMPR9S8",15,0)
 S B=0
"RTN","RMPR9S8",16,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPR9S8",17,0)
 . S BC=0
"RTN","RMPR9S8",18,0)
 . F  S BC=$O(^TMP($J,"TT",B,BC)) Q:BC'>0  D
"RTN","RMPR9S8",19,0)
 . .;Q:$P($G(^RMPR(660,BC,0)),U,10)'=RMPR("STA")
"RTN","RMPR9S8",20,0)
 . .;home oxygen
"RTN","RMPR9S8",21,0)
 . .Q:'$D(^RMPO(665.72,"AC",BC))
"RTN","RMPR9S8",22,0)
 . .S GN=$P($G(^RMPR(660,BC,"AMS")),U,1)
"RTN","RMPR9S8",23,0)
 . .S ND=$P($G(^RMPR(660,BC,1)),U,4)
"RTN","RMPR9S8",24,0)
 . .I ND S ND=$P(^RMPR(661.1,ND,0),U,8)
"RTN","RMPR9S8",25,0)
 . .S:ND="" ND=2
"RTN","RMPR9S8",26,0)
 . .S:GN="" GN=BC
"RTN","RMPR9S8",27,0)
 . .S ^TMP($J,"AG",GN,ND,BC)=B
"RTN","RMPR9S8",28,0)
 S B=""
"RTN","RMPR9S8",29,0)
 F  S B=$O(^TMP($J,"AG",B)) Q:B'>0  D
"RTN","RMPR9S8",30,0)
 .S BC=""
"RTN","RMPR9S8",31,0)
 .F  S BC=$O(^TMP($J,"AG",B,BC)) Q:BC'>0  D
"RTN","RMPR9S8",32,0)
 . .Q:BC=2
"RTN","RMPR9S8",33,0)
 . .MERGE ^TMP($J,"AGG")=^TMP($J,"AG",B)
"RTN","RMPR9S8",34,0)
 . .S HC="",GTCST=0
"RTN","RMPR9S8",35,0)
 . .K HCC1
"RTN","RMPR9S8",36,0)
 . .F  S HC=$O(^TMP($J,"AGG",HC)) Q:HC'>0  D
"RTN","RMPR9S8",37,0)
 . . .S HCC=0
"RTN","RMPR9S8",38,0)
 . . .;changes for Surgical Implants
"RTN","RMPR9S8",39,0)
 . . .S BDC=""
"RTN","RMPR9S8",40,0)
 . . .F BDC=1:1 S HCC=$O(^TMP($J,"AGG",HC,HCC)) Q:HCC'>0  D
"RTN","RMPR9S8",41,0)
 . . . .S GTCST=GTCST+$P(^RMPR(660,HCC,0),U,16)
"RTN","RMPR9S8",42,0)
 . . . .I BDC=1&(HC'=2) S HCC1=HCC
"RTN","RMPR9S8",43,0)
 . . . .I BDC'=1 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPR9S8",44,0)
 . . . .I HC=2 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPR9S8",45,0)
 . .I $G(HCC1) S $P(^TMP($J,"TT",^TMP($J,"AGG",1,HCC1),HCC1),U,3)=GTCST K HCC1
"RTN","RMPR9S8",46,0)
 . .K GTCST,^TMP($J,"AGG")
"RTN","RMPR9S8",47,0)
 K ^TMP($J,"AG"),BDC
"RTN","RMPR9S8",48,0)
 S B=0,RC=1
"RTN","RMPR9S8",49,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPR9S8",50,0)
 .S RK=0
"RTN","RMPR9S8",51,0)
 .F  S RK=$O(^TMP($J,"TT",B,RK)) Q:RK'>0  D
"RTN","RMPR9S8",52,0)
 . .Q:'$D(^RMPO(665.72,"AC",RK))
"RTN","RMPR9S8",53,0)
 . .S ^TMP($J,"RMPRC",RC)=RK
"RTN","RMPR9S8",54,0)
 . .I $P(^TMP($J,"TT",B,RK),U,3) S $P(^TMP($J,"RMPRC",RC),U,3)=$P(^TMP($J,"TT",B,RK),U,3)
"RTN","RMPR9S8",55,0)
 . .S RC=RC+1
"RTN","RMPR9S8",56,0)
 S RK=0,RZ=0
"RTN","RMPR9S8",57,0)
 K ^TMP($J,"TT"),B
"RTN","RMPR9S8",58,0)
 ;
"RTN","RMPR9S8",59,0)
 G:'$D(^TMP($J,"RMPRC")) END
"RTN","RMPR9S8",60,0)
 ;
"RTN","RMPR9S8",61,0)
DIS ;format data string - only HOME OXYGEN
"RTN","RMPR9S8",62,0)
 S RC=""
"RTN","RMPR9S8",63,0)
 S RK=1
"RTN","RMPR9S8",64,0)
 F  S RK=$O(^TMP($J,"RMPRC",RK)) Q:RK=""  D
"RTN","RMPR9S8",65,0)
 .S AN=+^TMP($J,"RMPRC",RK)
"RTN","RMPR9S8",66,0)
 .S Y=^RMPR(660,AN,0)
"RTN","RMPR9S8",67,0)
 .D PRT
"RTN","RMPR9S8",68,0)
 ;
"RTN","RMPR9S8",69,0)
END ;
"RTN","RMPR9S8",70,0)
 ;
"RTN","RMPR9S8",71,0)
EXIT ;common exit point
"RTN","RMPR9S8",72,0)
 K ^TMP($J,"RMPRC")
"RTN","RMPR9S8",73,0)
 ;pass to broker
"RTN","RMPR9S8",74,0)
 M RESULTS=^TMP($J,"RMPRB")
"RTN","RMPR9S8",75,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9S8",76,0)
 K I,J,L,R0,RA
"RTN","RMPR9S8",77,0)
 Q
"RTN","RMPR9S8",78,0)
 ;
"RTN","RMPR9S8",79,0)
 Q
"RTN","RMPR9S8",80,0)
PRT S DATE=$P(Y,U,3),TYPE=$P(Y,U,6),QTY=$P(Y,U,7)
"RTN","RMPR9S8",81,0)
 S VEN=$P(Y,U,9),TRANS=$P(Y,U,4),STA=$P(Y,U,10),SN=$P(Y,U,11)
"RTN","RMPR9S8",82,0)
 S DEL=$P(Y,U,12)
"RTN","RMPR9S8",83,0)
 S CST=$S($P(Y,U,16)'="":$P(Y,U,16),$D(^RMPR(660,AN,"LB")):$P(^RMPR(660,AN,"LB"),U,9),1:"")
"RTN","RMPR9S8",84,0)
 ;lab source of procurement
"RTN","RMPR9S8",85,0)
 I $D(^RMPR(660,AN,"LB")) S RMPRLPRO=$P(^("LB"),U,3) D
"RTN","RMPR9S8",86,0)
 .I RMPRLPRO="O" S RMPRLPRO="ORTHOTIC" Q
"RTN","RMPR9S8",87,0)
 .I RMPRLPRO="R" S RMPRLPRO="RESTORATION" Q
"RTN","RMPR9S8",88,0)
 .I RMPRLPRO="S" S RMPRLPRO="SHOE" Q
"RTN","RMPR9S8",89,0)
 .I RMPRLPRO="W" S RMPRLPRO="WHEELCHAIR" Q
"RTN","RMPR9S8",90,0)
 .I RMPRLPRO="N" S RMPRLPRO="FOOT CENTER" Q
"RTN","RMPR9S8",91,0)
 .I RMPRLPRO="D" S RMPRLPRO="DDC" Q
"RTN","RMPR9S8",92,0)
 ;form requested on
"RTN","RMPR9S8",93,0)
 S FRM=$P(Y,U,13),REM=$P(Y,U,18)
"RTN","RMPR9S8",94,0)
 S DATE=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3)
"RTN","RMPR9S8",95,0)
 S TYPE=$S(TYPE="":"",$D(^RMPR(661,TYPE,0)):$P(^(0),U,1),1:""),AMIS=$P(Y,U,15),VEN=$S(VEN="":"",$D(^PRC(440,VEN,0)):$P(^(0),U,1),1:"")
"RTN","RMPR9S8",96,0)
 I $D(^RMPR(660.1,"AC",AN)),$P(^RMPR(660.1,$O(^RMPR(660.1,"AC",AN,0)),0),U,11)]"" S AMIS=AMIS_"+"
"RTN","RMPR9S8",97,0)
 S TRANS=$S(TRANS]"":TRANS,1:""),TRANS1="" S:TRANS="X" TRANS1=TRANS,TRANS=""
"RTN","RMPR9S8",98,0)
 S DEL=$E(DEL,4,5)_"/"_$E(DEL,6,7)_"/"_$E(DEL,2,3) S:DEL="//" DEL=""
"RTN","RMPR9S8",99,0)
 ;
"RTN","RMPR9S8",100,0)
 ;set results array
"RTN","RMPR9S8",101,0)
 ;only home oxygen records at this point
"RTN","RMPR9S8",102,0)
 S ITEM=$S(TYPE'="":$P(^PRC(441,TYPE,0),U,2),$P(Y,U,26)="D":"DELIVERY",$P(Y,U,26)="P":"PICKUP",$P(Y,U,17):"SHIPPING",1:"")
"RTN","RMPR9S8",103,0)
 ;
"RTN","RMPR9S8",104,0)
 S HCPCS=$P($G(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),1)),U,4)
"RTN","RMPR9S8",105,0)
 I HCPCS'="" S HCPCS=$P($G(^RMPR(661.1,HCPCS,0)),U,1)
"RTN","RMPR9S8",106,0)
 S ^TMP($J,"RMPRB",RK)=$P(^TMP($J,"RMPRC",RK),U,1)_U_DATE_U_QTY_U_ITEM
"RTN","RMPR9S8",107,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_HCPCS_U_TRANS_TRANS1
"RTN","RMPR9S8",108,0)
 ;
"RTN","RMPR9S8",109,0)
 ;display source of procurement for 2529-3 under vendor header
"RTN","RMPR9S8",110,0)
 I $D(RMPRLPRO) S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_RMPRLPRO
"RTN","RMPR9S8",111,0)
 I '$D(RMPRLPRO),VEN'="" S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$E(VEN,1,10)
"RTN","RMPR9S8",112,0)
 K RMPRLPRO
"RTN","RMPR9S8",113,0)
 ;
"RTN","RMPR9S8",114,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$P($G(^DIC(4,STA,99)),U,1)_U_SN_U_DEL
"RTN","RMPR9S8",115,0)
 I $P(^TMP($J,"RMPRC",RK),U,3) S CST=$P(^TMP($J,"RMPRC",RK),U,3)
"RTN","RMPR9S8",116,0)
 S COST=$J($FN($S(CST'="":CST,$P(Y,U,17):$P(Y,U,17),1:""),"T",2),9)
"RTN","RMPR9S8",117,0)
 ;
"RTN","RMPR9S8",118,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_COST_U_REM
"RTN","RMPR9S8",119,0)
 ;
"RTN","RMPR9S8",120,0)
 I $P(^TMP($J,"RMPRC",RK),U,2)="" S $P(^TMP($J,"RMPRC",RK),U,2)=RZ
"RTN","RMPR9S8",121,0)
 ;
"RTN","RMPR9S8",122,0)
 Q
"RTN","RMPR9S8",123,0)
 ;END
"RTN","RMPR9S8P")
0^32^B1849215
"RTN","RMPR9S8P",1,0)
RMPR9S8P ;HOIFO/SPS - GUI 2319 PRESCRIPTION INFO SCREEN 8 HOME OXYGEN
"RTN","RMPR9S8P",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9S8P",3,0)
 ;         (IEN)=ien of file 660
"RTN","RMPR9S8P",4,0)
 ;display detailed record
"RTN","RMPR9S8P",5,0)
A1(IEN) G A2
"RTN","RMPR9S8P",6,0)
EN(RESULTS,IEN) ;Broker
"RTN","RMPR9S8P",7,0)
A2 ;
"RTN","RMPR9S8P",8,0)
 I '$D(^RMPR(660,IEN)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S8P",9,0)
 S RMPRDFN=$P(^RMPR(660,IEN,0),U,2)
"RTN","RMPR9S8P",10,0)
 S RMPODFN=RMPRDFN
"RTN","RMPR9S8P",11,0)
 D BPI,DPI
"RTN","RMPR9S8P",12,0)
 K PTI,I,RX,Y,DT1,DT2,TRX,IENS,DFN
"RTN","RMPR9S8P",13,0)
 Q
"RTN","RMPR9S8P",14,0)
BPI ; Build pt info hdr
"RTN","RMPR9S8P",15,0)
 K PTI
"RTN","RMPR9S8P",16,0)
 ; Name,SSN
"RTN","RMPR9S8P",17,0)
 S DFN=RMPODFN D DEM^VADPT
"RTN","RMPR9S8P",18,0)
 ; Current Rx (IEN on ACT DATE)
"RTN","RMPR9S8P",19,0)
 S RX=$O(^RMPR(665,RMPODFN,"RMPOB"," "),-1)
"RTN","RMPR9S8P",20,0)
 I 'RX S RESULTS(0)="NOTHING TO REPORT" Q
"RTN","RMPR9S8P",21,0)
 S Y=$P(^RMPR(665,RMPODFN,"RMPOB",RX,0),U) X ^DD("DD") S DT1=Y
"RTN","RMPR9S8P",22,0)
 S Y=$P(^RMPR(665,RMPODFN,"RMPOB",RX,0),U,3) X ^DD("DD") S DT2=Y
"RTN","RMPR9S8P",23,0)
 S PTI(0)=RX
"RTN","RMPR9S8P",24,0)
 ; Activation date
"RTN","RMPR9S8P",25,0)
 S PTI(1)=DT1
"RTN","RMPR9S8P",26,0)
 ; Expiration Date:
"RTN","RMPR9S8P",27,0)
 S PTI(2)=DT2
"RTN","RMPR9S8P",28,0)
 ; Rx Remarks
"RTN","RMPR9S8P",29,0)
 K TRX
"RTN","RMPR9S8P",30,0)
 S IENS=RX_","_RMPODFN_","
"RTN","RMPR9S8P",31,0)
 D GETS^DIQ(665.193,IENS,3,,"TRX")
"RTN","RMPR9S8P",32,0)
 S I=0 F  S I=$O(TRX(665.193,IENS,3,I)) Q:I=""  D
"RTN","RMPR9S8P",33,0)
 . S PTI(2+I)=TRX(665.193,IENS,3,I)
"RTN","RMPR9S8P",34,0)
 Q
"RTN","RMPR9S8P",35,0)
DPI ; Display pt info hdr
"RTN","RMPR9S8P",36,0)
 S I="" F  S I=$O(PTI(I)) Q:I=""  S RESULTS(I)=PTI(I) ;W !,PTI(I)
"RTN","RMPR9S8P",37,0)
 Q
"RTN","RMPR9S8P",38,0)
EXIT ;
"RTN","RMPR9S8P",39,0)
 Q
"RTN","RMPR9VR")
0^14^B5492507
"RTN","RMPR9VR",1,0)
RMPR9VR ;HOIFO/SPS - VIEW CONSULT REQUESTS FOR GUI;01/29/03  11:38
"RTN","RMPR9VR",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9VR",3,0)
 ;
"RTN","RMPR9VR",4,0)
 ;
"RTN","RMPR9VR",5,0)
A1(RMPRA) G A2
"RTN","RMPR9VR",6,0)
EN(RESULTS,RMPRA) ; -- Broker callback to get list to display
"RTN","RMPR9VR",7,0)
A2 ;
"RTN","RMPR9VR",8,0)
 I '$D(^RMPR(668,RMPRA,0)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9VR",9,0)
 K ADATE,PDAY
"RTN","RMPR9VR",10,0)
 ; ORDER DATE/SUSPENSE DATE
"RTN","RMPR9VR",11,0)
 S RESULTS(0)=$P(^RMPR(668,RMPRA,0),U,1),RESULTS(0)=$$DAT1^RMPRUTL1(RESULTS(0))
"RTN","RMPR9VR",12,0)
 ; REQUESTOR
"RTN","RMPR9VR",13,0)
 S RESULTS(1)=$P($G(^RMPR(668,RMPRA,0)),U,11)
"RTN","RMPR9VR",14,0)
 I RESULTS(1)'="" S RESULTS(1)=$P(^VA(200,RESULTS(1),0),U)
"RTN","RMPR9VR",15,0)
 ; SUSPENDED BY
"RTN","RMPR9VR",16,0)
 S RESULTS(2)=$P($G(^RMPR(668,RMPRA,0)),U,4)
"RTN","RMPR9VR",17,0)
 I RESULTS(2)'="" S RESULTS(2)=$P(^VA(200,RESULTS(2),0),U)
"RTN","RMPR9VR",18,0)
 ; INITIAL ACTION DATE
"RTN","RMPR9VR",19,0)
 S RESULTS(3)=$P(^RMPR(668,RMPRA,0),U,9),RESULTS(3)=$$DAT1^RMPRUTL1(RESULTS(3))
"RTN","RMPR9VR",20,0)
 ; COMPLETION DATE
"RTN","RMPR9VR",21,0)
 S RESULTS(4)=$P($G(^RMPR(668,RMPRA,0)),U,5)
"RTN","RMPR9VR",22,0)
 I RESULTS(4)>0 S RESULTS(4)=$$DAT1^RMPRUTL1(RESULTS(4))
"RTN","RMPR9VR",23,0)
EXIT Q
"RTN","RMPR9VR",24,0)
A3(RMPRA) G A4 ;display description
"RTN","RMPR9VR",25,0)
EN2(RESULTS,RMPRA) ;
"RTN","RMPR9VR",26,0)
A4 I '$D(^RMPR(668,RMPRA,0)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9VR",27,0)
 I '$D(^RMPR(668,RMPRA,2,0)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9VR",28,0)
 S (RMPRD,I)=0
"RTN","RMPR9VR",29,0)
 F  S RMPRD=$O(^RMPR(668,RMPRA,2,RMPRD)) Q:RMPRD'>0  D
"RTN","RMPR9VR",30,0)
 .S RESULTS(I)=^RMPR(668,RMPRA,2,RMPRD,0)
"RTN","RMPR9VR",31,0)
 .S I=I+1
"RTN","RMPR9VR",32,0)
 Q
"RTN","RMPR9VR",33,0)
A5(RMPRA) G A6 ;display Initial Action Note
"RTN","RMPR9VR",34,0)
EN3(RESULTS,RMPRA) ;
"RTN","RMPR9VR",35,0)
A6 I '$D(^RMPR(668,RMPRA,0)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9VR",36,0)
 I '$D(^RMPR(668,RMPRA,3,0)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9VR",37,0)
 S (RMPRD,I)=0
"RTN","RMPR9VR",38,0)
 F  S RMPRD=$O(^RMPR(668,RMPRA,3,RMPRD)) Q:RMPRD'>0  D
"RTN","RMPR9VR",39,0)
 .S RESULTS(I)=^RMPR(668,RMPRA,3,RMPRD,0)
"RTN","RMPR9VR",40,0)
 .S I=I+1
"RTN","RMPR9VR",41,0)
 Q
"RTN","RMPR9VR",42,0)
A7(RMPRA) G A8 ;display Completion Note
"RTN","RMPR9VR",43,0)
EN4(RESULTS,RMPRA) ;
"RTN","RMPR9VR",44,0)
A8 I '$D(^RMPR(668,RMPRA,0)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9VR",45,0)
 I '$D(^RMPR(668,RMPRA,4,0)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9VR",46,0)
 S (RMPRD,I)=0
"RTN","RMPR9VR",47,0)
 F  S RMPRD=$O(^RMPR(668,RMPRA,4,RMPRD)) Q:RMPRD'>0  D
"RTN","RMPR9VR",48,0)
 .S RESULTS(I)=^RMPR(668,RMPRA,4,RMPRD,0)
"RTN","RMPR9VR",49,0)
 .S I=I+1
"RTN","RMPR9VR",50,0)
 Q
"RTN","RMPR9X")
0^22^B10205906
"RTN","RMPR9X",1,0)
RMPR9X  ;HOIFO/HNC - X-REF SUSPENSE FILE ;5/6/03  08:08
"RTN","RMPR9X",2,0)
 ;;3.0;PROSTHETICS;**59**;Feb 09, 1996
"RTN","RMPR9X",3,0)
 ;
"RTN","RMPR9X",4,0)
 Q
"RTN","RMPR9X",5,0)
EN02 ;Date Closed and number of processing days
"RTN","RMPR9X",6,0)
 N RMPRDAYS S RMPRCD=""
"RTN","RMPR9X",7,0)
 S RMPRCD=$P($P(^RMPR(668,DA,0),U,5),".",1)
"RTN","RMPR9X",8,0)
 N X
"RTN","RMPR9X",9,0)
 S RMPRDAYS=$$PDAY^RMPREOU(DA)
"RTN","RMPR9X",10,0)
 S ^RMPR(668,"CD",RMPRCD,RMPRDAYS,DA)=""
"RTN","RMPR9X",11,0)
 Q
"RTN","RMPR9X",12,0)
KILL02 ;
"RTN","RMPR9X",13,0)
 N RMPRDAYS,RMPRCD
"RTN","RMPR9X",14,0)
 S RMPRCD=$P(X,".",1)
"RTN","RMPR9X",15,0)
 S RMPRDAYS=$$PDAY^RMPREOU(DA)
"RTN","RMPR9X",16,0)
 K ^RMPR(668,"CD",RMPRCD,RMPRDAYS,DA)
"RTN","RMPR9X",17,0)
 Q
"RTN","RMPR9X",18,0)
EN01 ;L1 x-ref
"RTN","RMPR9X",19,0)
 I X="" Q
"RTN","RMPR9X",20,0)
 N L2,L3,M3
"RTN","RMPR9X",21,0)
 ;L2 last 2 ssn
"RTN","RMPR9X",22,0)
 ;L3 status
"RTN","RMPR9X",23,0)
 ;M3 old status
"RTN","RMPR9X",24,0)
 S DFN=$P($G(^RMPR(668,DA,0)),U,2)
"RTN","RMPR9X",25,0)
 Q:DFN=""
"RTN","RMPR9X",26,0)
 D DEM^VADPT
"RTN","RMPR9X",27,0)
 S L2=$E($P(VADM(2),U,1),8,9)
"RTN","RMPR9X",28,0)
 S L3=$P($G(^RMPR(668,DA,0)),U,10)
"RTN","RMPR9X",29,0)
 Q:L3=""
"RTN","RMPR9X",30,0)
 ;last 2 SSN, status, ien
"RTN","RMPR9X",31,0)
 S M3=""
"RTN","RMPR9X",32,0)
 F  S M3=$O(^RMPR(668,"L1",L2,M3)) Q:M3=""  D
"RTN","RMPR9X",33,0)
 .I $D(^RMPR(668,"L1",L2,M3,DA)) K ^RMPR(668,"L1",L2,M3,DA)
"RTN","RMPR9X",34,0)
 S ^RMPR(668,"L1",L2,L3,DA)=""
"RTN","RMPR9X",35,0)
 K VADM
"RTN","RMPR9X",36,0)
 Q
"RTN","RMPR9X",37,0)
KILL01 ;kill L1 x-ref
"RTN","RMPR9X",38,0)
 N L2,L3,M3
"RTN","RMPR9X",39,0)
 ;L2 last 2 ssn
"RTN","RMPR9X",40,0)
 ;L3 status
"RTN","RMPR9X",41,0)
 ;M3 old status
"RTN","RMPR9X",42,0)
 S DFN=$P($G(^RMPR(668,DA,0)),U,2)
"RTN","RMPR9X",43,0)
 Q:DFN=""
"RTN","RMPR9X",44,0)
 D DEM^VADPT
"RTN","RMPR9X",45,0)
 S L2=$E($P(VADM(2),U,1),8,9)
"RTN","RMPR9X",46,0)
 S L3=$P($G(^RMPR(668,DA,0)),U,10)
"RTN","RMPR9X",47,0)
 Q:L3=""
"RTN","RMPR9X",48,0)
 ;last 2 SSN, status, ien
"RTN","RMPR9X",49,0)
 S M3=""
"RTN","RMPR9X",50,0)
 F  S M3=$O(^RMPR(668,"L1",L2,M3)) Q:M3=""  D
"RTN","RMPR9X",51,0)
 .I $D(^RMPR(668,"L1",L2,M3,DA)) K ^RMPR(668,"L1",L2,M3,DA)
"RTN","RMPR9X",52,0)
 K VADM
"RTN","RMPR9X",53,0)
 Q
"RTN","RMPR9X",54,0)
EN0 ;L x-ref
"RTN","RMPR9X",55,0)
 I X="" Q
"RTN","RMPR9X",56,0)
 N L2,L3,L4,M3,M4
"RTN","RMPR9X",57,0)
 S DFN=$P($G(^RMPR(668,DA,0)),U,2)
"RTN","RMPR9X",58,0)
 Q:DFN=""
"RTN","RMPR9X",59,0)
 D DEM^VADPT
"RTN","RMPR9X",60,0)
 S L2=$E($P(VADM(2),U,1),8,9)
"RTN","RMPR9X",61,0)
 S L3=$P($G(^RMPR(668,DA,0)),U,10)
"RTN","RMPR9X",62,0)
 Q:L3=""
"RTN","RMPR9X",63,0)
 S L4=$P($P(^RMPR(668,DA,0),U,1),".",1)
"RTN","RMPR9X",64,0)
 ;last 2 SSN, date no time, status, ien
"RTN","RMPR9X",65,0)
 S M4=0
"RTN","RMPR9X",66,0)
 F  S M4=$O(^RMPR(668,"L",L2,M4)) Q:M4'>0  D
"RTN","RMPR9X",67,0)
 .S M3=""
"RTN","RMPR9X",68,0)
 .F  S M3=$O(^RMPR(668,"L",L2,M4,M3)) Q:M3=""  D
"RTN","RMPR9X",69,0)
 .  .I $D(^RMPR(668,"L",L2,M4,M3,DA)) K ^RMPR(668,"L",L2,M4,M3,DA)
"RTN","RMPR9X",70,0)
 S ^RMPR(668,"L",L2,L4,L3,DA)=""
"RTN","RMPR9X",71,0)
 K VADM
"RTN","RMPR9X",72,0)
 Q
"RTN","RMPR9X",73,0)
KILL0 ;
"RTN","RMPR9X",74,0)
 N L2,L3,M3,M4
"RTN","RMPR9X",75,0)
 S DFN=$P($G(^RMPR(668,DA,0)),U,2)
"RTN","RMPR9X",76,0)
 Q:DFN=""
"RTN","RMPR9X",77,0)
 S L3=$P(^RMPR(668,DA,0),U,10)
"RTN","RMPR9X",78,0)
 D DEM^VADPT
"RTN","RMPR9X",79,0)
 S L2=$E($P(VADM(2),U,1),8,9)
"RTN","RMPR9X",80,0)
 ;unknown status
"RTN","RMPR9X",81,0)
 S M4=0
"RTN","RMPR9X",82,0)
 F  S M4=$O(^RMPR(668,"L",L2,M4)) Q:M4'>0  D
"RTN","RMPR9X",83,0)
 .S M3=""
"RTN","RMPR9X",84,0)
 .F  S M3=$O(^RMPR(668,"L",L2,M4,M3)) Q:M3=""  D
"RTN","RMPR9X",85,0)
 .  .I $D(^RMPR(668,"L",L2,M4,M3,DA)) K ^RMPR(668,"L",L2,M4,M3,DA)
"RTN","RMPR9X",86,0)
 Q
"RTN","RMPR9X",87,0)
EN      ;Create Entry point
"RTN","RMPR9X",88,0)
 I X="C" D KILL Q
"RTN","RMPR9X",89,0)
 I X="X" D KILL Q
"RTN","RMPR9X",90,0)
 I X="" Q
"RTN","RMPR9X",91,0)
 N L2
"RTN","RMPR9X",92,0)
 S DFN=$P($G(^RMPR(668,DA,0)),U,2)
"RTN","RMPR9X",93,0)
 Q:DFN=""
"RTN","RMPR9X",94,0)
 D DEM^VADPT
"RTN","RMPR9X",95,0)
 S L2=$E($P(VADM(2),U,1),8,9)
"RTN","RMPR9X",96,0)
 S ^RMPR(668,"I",L2,DA)=""
"RTN","RMPR9X",97,0)
 K VADM
"RTN","RMPR9X",98,0)
 Q
"RTN","RMPR9X",99,0)
KILL ;Kill entry point
"RTN","RMPR9X",100,0)
 N L2
"RTN","RMPR9X",101,0)
 S DFN=$P($G(^RMPR(668,DA,0)),U,2)
"RTN","RMPR9X",102,0)
 Q:DFN=""
"RTN","RMPR9X",103,0)
 D DEM^VADPT
"RTN","RMPR9X",104,0)
 S L2=$E($P(VADM(2),U,1),8,9)
"RTN","RMPR9X",105,0)
 K ^RMPR(668,"I",L2,DA)
"RTN","RMPR9X",106,0)
 Q
"RTN","RMPR9X",107,0)
EN1 ;
"RTN","RMPR9X",108,0)
 S WHOZ=$P(^RMPR(669.9,DA(1),5,DA,0),U,1)
"RTN","RMPR9X",109,0)
 S ^RMPR(669.9,"PA",WHOZ,DA(1))=""
"RTN","RMPR9X",110,0)
 Q
"RTN","RMPR9X",111,0)
KILL1 ;
"RTN","RMPR9X",112,0)
 S WHOZ=$P(^RMPR(669.9,DA(1),5,DA,0),U,1)
"RTN","RMPR9X",113,0)
 K ^RMPR(669.9,"PA",WHOZ,DA(1))
"RTN","RMPR9X",114,0)
 Q
"RTN","RMPR9X",115,0)
EN2 ;PCARD CROSS REFERENCE
"RTN","RMPR9X",116,0)
 S WHOZ=$P(^RMPR(669.9,DA(1),5,DA,0),U,1)
"RTN","RMPR9X",117,0)
 S PCRD=$P(^RMPR(669.9,DA(1),5,DA,0),U,5)
"RTN","RMPR9X",118,0)
 S ^RMPR(669.9,"PCRD",WHOZ,PCRD,DA(1))=""
"RTN","RMPR9X",119,0)
 Q
"RTN","RMPR9X",120,0)
KILL2 ;PCARD CROSS REFERENCE
"RTN","RMPR9X",121,0)
 Q
"RTN","RMPR9X",122,0)
 ;END
"RTN","RMPREOU")
0^17^B16234543
"RTN","RMPREOU",1,0)
RMPREOU ;HINES/HNC -Suspense Processing Utility  ;2-2-2000
"RTN","RMPREOU",2,0)
 ;;3.0;PROSTHETICS;**45,55,59**;Feb 09, 1996
"RTN","RMPREOU",3,0)
 ; Add new function for working days M-F.
"RTN","RMPREOU",4,0)
 Q
"RTN","RMPREOU",5,0)
 ;
"RTN","RMPREOU",6,0)
ITEM(DA,RL) ;psas hcpcs space item name
"RTN","RMPREOU",7,0)
 ;parm 1=ien 660
"RTN","RMPREOU",8,0)
 ;parm 2=string length
"RTN","RMPREOU",9,0)
 N DIC,DIQ,DR,ITEM
"RTN","RMPREOU",10,0)
 S DIC=660,DIQ="RE",DR="4:4.5",DIQ(0)="EN" D EN^DIQ1
"RTN","RMPREOU",11,0)
 S ITEM=$G(RE(660,DA,4.5,"E"))_" "_$G(RE(660,DA,4,"E"))
"RTN","RMPREOU",12,0)
 I $G(RL) S ITEM=$E(ITEM,0,RL)
"RTN","RMPREOU",13,0)
 K RE Q ITEM
"RTN","RMPREOU",14,0)
 ;
"RTN","RMPREOU",15,0)
 Q
"RTN","RMPREOU",16,0)
PWRKDAY(DA)     ;working days between init action and current dateM-F.
"RTN","RMPREOU",17,0)
 ;holidays are counted as working days
"RTN","RMPREOU",18,0)
 ;parm 1=ien 668, DA
"RTN","RMPREOU",19,0)
 ;
"RTN","RMPREOU",20,0)
 N RMTO,RB,RE
"RTN","RMPREOU",21,0)
 S RB=$P($G(^RMPR(668,DA,0)),U,9)
"RTN","RMPREOU",22,0)
 Q:RB="" 0
"RTN","RMPREOU",23,0)
 S RE=DT
"RTN","RMPREOU",24,0)
 Q:RE="" 0
"RTN","RMPREOU",25,0)
 D WDAY
"RTN","RMPREOU",26,0)
 Q RMTO
"RTN","RMPREOU",27,0)
 Q
"RTN","RMPREOU",28,0)
 ;
"RTN","RMPREOU",29,0)
TYPE(DA,RL) ;type of consult, suspense
"RTN","RMPREOU",30,0)
 ;parm 1=ien 668
"RTN","RMPREOU",31,0)
 ;parm 2=string length optional
"RTN","RMPREOU",32,0)
 N DIC,DIQ,DR,TYPE
"RTN","RMPREOU",33,0)
 S DIC=668,DIQ="RE",DR=9,DIQ(0)="EN" D EN^DIQ1
"RTN","RMPREOU",34,0)
 S TYPE=$G(RE(668,DA,9,"E"))
"RTN","RMPREOU",35,0)
 I $G(RL) S TYPE=$E(TYPE,0,RL)
"RTN","RMPREOU",36,0)
 K RE Q TYPE
"RTN","RMPREOU",37,0)
 ;
"RTN","RMPREOU",38,0)
 ;
"RTN","RMPREOU",39,0)
 Q
"RTN","RMPREOU",40,0)
PDAY(DA) ;days between create and init action
"RTN","RMPREOU",41,0)
 ;parm 1=ien 668
"RTN","RMPREOU",42,0)
 N PDAY,X1,X2
"RTN","RMPREOU",43,0)
 S PDAY=""
"RTN","RMPREOU",44,0)
 S X2=$P($G(^RMPR(668,DA,0)),U,1)
"RTN","RMPREOU",45,0)
 Q:X2="" PDAY
"RTN","RMPREOU",46,0)
 S X1=$P($G(^RMPR(668,DA,0)),U,9)
"RTN","RMPREOU",47,0)
 I X1="" S:$D(RMPRCD) X1=RMPRCD
"RTN","RMPREOU",48,0)
 ;Q:X1="" PDAY
"RTN","RMPREOU",49,0)
 D ^%DTC
"RTN","RMPREOU",50,0)
 Q X
"RTN","RMPREOU",51,0)
 ;
"RTN","RMPREOU",52,0)
 Q
"RTN","RMPREOU",53,0)
DES(DA,RL) ;description for manual
"RTN","RMPREOU",54,0)
 ;parm 1=ien 668
"RTN","RMPREOU",55,0)
 ;parm 2=string length optional
"RTN","RMPREOU",56,0)
 N DES
"RTN","RMPREOU",57,0)
 S DES=$G(^RMPR(668,DA,2,1,0))
"RTN","RMPREOU",58,0)
 I DES="" Q DES
"RTN","RMPREOU",59,0)
 I $G(RL) S DES=$E(DES,0,RL)
"RTN","RMPREOU",60,0)
 Q DES
"RTN","RMPREOU",61,0)
 ;
"RTN","RMPREOU",62,0)
STATUS(DA,RL) ;status of suspense, open, pending, closed
"RTN","RMPREOU",63,0)
 N DIC,DIQ,DR,STATUS
"RTN","RMPREOU",64,0)
 S DIC=668,DIQ="RE",DR=14,DIQ(0)="EN" D EN^DIQ1
"RTN","RMPREOU",65,0)
 S STATUS=$G(RE(668,DA,14,"E"))
"RTN","RMPREOU",66,0)
 I STATUS="" S STATUS="UNKNOWN"
"RTN","RMPREOU",67,0)
 I $G(RL) S STATUS=$E(STATUS,0,RL)
"RTN","RMPREOU",68,0)
 K RE Q STATUS
"RTN","RMPREOU",69,0)
 ;
"RTN","RMPREOU",70,0)
WHO(DA,RL) ;requestor or provider
"RTN","RMPREOU",71,0)
 N DIC,DIQ,DR,WHO
"RTN","RMPREOU",72,0)
 S DIC=200,DIQ="RE",DR=.01,DIQ(0)="EN" D EN^DIQ1
"RTN","RMPREOU",73,0)
 S WHO=$G(RE(200,DA,.01,"E"))
"RTN","RMPREOU",74,0)
 I $G(RL) S WHO=$E(WHO,0,RL)
"RTN","RMPREOU",75,0)
 K RE Q WHO
"RTN","RMPREOU",76,0)
 ;
"RTN","RMPREOU",77,0)
 Q
"RTN","RMPREOU",78,0)
NUM ;pick number from list
"RTN","RMPREOU",79,0)
 K DIR S DIR(0)="LO^"_VALMBG_":"_VALMLST D ^DIR
"RTN","RMPREOU",80,0)
 Q
"RTN","RMPREOU",81,0)
 ;
"RTN","RMPREOU",82,0)
NUM2 ;pick a single number from a list
"RTN","RMPREOU",83,0)
 K DIR S DIR(0)="N^"_VALMBG_":"_VALMLST D ^DIR
"RTN","RMPREOU",84,0)
 Q
"RTN","RMPREOU",85,0)
 ;
"RTN","RMPREOU",86,0)
WRKDAY(DA)        ;working days between create and init action M-F.
"RTN","RMPREOU",87,0)
 ;holidays are counted as working days
"RTN","RMPREOU",88,0)
 ;parm 1=ien 668, DA
"RTN","RMPREOU",89,0)
 ;
"RTN","RMPREOU",90,0)
 N RMTO,RB,RE
"RTN","RMPREOU",91,0)
 S RB=$P($G(^RMPR(668,DA,0)),U,1)
"RTN","RMPREOU",92,0)
 Q:RB="" 0
"RTN","RMPREOU",93,0)
 S RE=$P($G(^RMPR(668,DA,0)),U,9)
"RTN","RMPREOU",94,0)
 Q:RE="" 0
"RTN","RMPREOU",95,0)
 D WDAY
"RTN","RMPREOU",96,0)
 Q RMTO
"RTN","RMPREOU",97,0)
CWRKDAY(DA) ;working days based on today for open records.
"RTN","RMPREOU",98,0)
 ;holidays are counted as working days
"RTN","RMPREOU",99,0)
 ;parm 1=ien 668, DA
"RTN","RMPREOU",100,0)
 N RMTO,RB,RE
"RTN","RMPREOU",101,0)
 S RB=$P($G(^RMPR(668,DA,0)),U,1)
"RTN","RMPREOU",102,0)
 Q:RB="" 0
"RTN","RMPREOU",103,0)
 S RE=DT
"RTN","RMPREOU",104,0)
 D WDAY
"RTN","RMPREOU",105,0)
 Q RMTO
"RTN","RMPREOU",106,0)
WDAY ;       RB - begining date
"RTN","RMPREOU",107,0)
 ;       RE - ending date
"RTN","RMPREOU",108,0)
 ;Return variable:
"RTN","RMPREOU",109,0)
 ;       RMTO - working days
"RTN","RMPREOU",110,0)
 ;Changed 03/26/03 to make a call to XUWORKDY to not count Holidays
"RTN","RMPREOU",111,0)
 ;In order to not couont Holidays the site must keep the Holiday file 
"RTN","RMPREOU",112,0)
 ;current.
"RTN","RMPREOU",113,0)
 S RMTO=$$EN^XUWORKDY(RB,RE)
"RTN","RMPREOU",114,0)
 Q
"RTN","RMPREOU",115,0)
 ;Set days as Monday the FIRST day and so on:
"RTN","RMPREOU",116,0)
 ;       Monday    = 1
"RTN","RMPREOU",117,0)
 ;       Sunday    = 7
"RTN","RMPREOU",118,0)
 ;If invalid dates, return ZERO.
"RTN","RMPREOU",119,0)
 N X,Y,RMB,RME,RMTOT,RDSDAY,RDEDAY,RBCA,RNOB,RMNOD,RECA,RNO
"RTN","RMPREOU",120,0)
1 S X1=RE,X2=RB D ^%DTC S RMNOD=X
"RTN","RMPREOU",121,0)
 S (RMTO,RMTOT,RECA)=0
"RTN","RMPREOU",122,0)
 S X=RB D DW^%DTC S RMB=X
"RTN","RMPREOU",123,0)
 S X=RE D DW^%DTC S RME=X
"RTN","RMPREOU",124,0)
 I (RB=RE)!(RB>RE)!(RMNOD'>0) Q
"RTN","RMPREOU",125,0)
 ;Get the FIRST set of Monday to Sunday days.
"RTN","RMPREOU",126,0)
 S RDSDAY=$S(RMB["MON":1,RMB["TUE":2,RMB["WED":3,RMB["THU":4,RMB["FRI":5,RMB["SAT":6,RMB["SUN":7,1:0)
"RTN","RMPREOU",127,0)
 S RNOB=$S(RDSDAY=1:4,RDSDAY=2:3,RDSDAY=3:2,RDSDAY=4:1,1:0)
"RTN","RMPREOU",128,0)
 I RNOB=4,RMNOD<7 S RNOB=$S(RMNOD=1:1,RMNOD=2:2,RMNOD=3:3,1:4)
"RTN","RMPREOU",129,0)
 I RNOB=3,RMNOD<6 S RNOB=$S(RMNOD=1:1,RMNOD=2:2,1:3)
"RTN","RMPREOU",130,0)
 I RNOB=2,RMNOD<5 S RNOB=$S(RMNOD=1:1,1:2)
"RTN","RMPREOU",131,0)
 S RBCA=7-RDSDAY
"RTN","RMPREOU",132,0)
 S RMNOD=RMNOD-RBCA
"RTN","RMPREOU",133,0)
 ;Get the SECOND set of Monday to Sunday days.
"RTN","RMPREOU",134,0)
 S RDEDAY=$S(RME["MON":1,RME["TUE":2,RME["WED":3,RME["THU":4,RME["FRI":5,RME["SAT":6,RME["SUN":7,1:0)
"RTN","RMPREOU",135,0)
 I RMNOD>0 D
"RTN","RMPREOU",136,0)
 .S RECA=$S(RDEDAY=7:5,RDEDAY=6:5,1:RDEDAY)
"RTN","RMPREOU",137,0)
 .S RMNOD=RMNOD-RDEDAY
"RTN","RMPREOU",138,0)
 ;
"RTN","RMPREOU",139,0)
 ;calculate totals
"RTN","RMPREOU",140,0)
 S RMTOT=RMTOT+RNOB+RECA
"RTN","RMPREOU",141,0)
 I RMNOD>0,RMNOD<6 S RMTOT=RMTOT+RMNOD
"RTN","RMPREOU",142,0)
 I RMNOD=6 S RMTOT=RMTOT+RMNOD-1
"RTN","RMPREOU",143,0)
 I RMNOD=7 S RMTOT=RMTOT+RMNOD-2
"RTN","RMPREOU",144,0)
 ;if the FIRST and SECOND set of Monday to Sunday total is
"RTN","RMPREOU",145,0)
 ;still greater than 7 days, exclude Saturday and Sunday - don't count.
"RTN","RMPREOU",146,0)
 I RMNOD>7 S RMTOT=RMTOT+(RMNOD-((RMNOD/7)*2))
"RTN","RMPREOU",147,0)
 S RMTO=$J(RMTOT,0,0)
"RTN","RMPREOU",148,0)
END ;
"RTN","RMPRESRV")
0^25^B4671403
"RTN","RMPRESRV",1,0)
RMPRESRV ;PHX/HNB - SERVER ROUTINE FOR NATIONAL DATA EXTRACT ; 7/1/96
"RTN","RMPRESRV",2,0)
 ;;3.0;PROSTHETICS;**12,18,24,51,59**;Feb 09, 1996
"RTN","RMPRESRV",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","RMPRESRV",4,0)
 ;
"RTN","RMPRESRV",5,0)
 ;modified to include the PIP extract 9/28/00
"RTN","RMPRESRV",6,0)
 X XMREC D
"RTN","RMPRESRV",7,0)
 .;disability codes
"RTN","RMPRESRV",8,0)
 .I XMRG["DS1" S RMPRDS1=$P(XMRG,"*",2)
"RTN","RMPRESRV",9,0)
 .I XMRG["DS2" S RMPRDS2=$P(XMRG,"*",4)
"RTN","RMPRESRV",10,0)
 .;new and repair worksheets
"RTN","RMPRESRV",11,0)
 .I XMRG["DT1" S RMPRDT1=$P(XMRG,"*",2)
"RTN","RMPRESRV",12,0)
 .I XMRG["DT2" S RMPRDT2=$P(XMRG,"*",4)
"RTN","RMPRESRV",13,0)
 .;suspense delayed order report
"RTN","RMPRESRV",14,0)
 .I XMRG["DOR1" S RMPRDOR1=$P(XMRG,"*",2)
"RTN","RMPRESRV",15,0)
 .I XMRG["DOR1" S RMPRDORS=$P(XMRG,"*",3)
"RTN","RMPRESRV",16,0)
 .I XMRG["DOR1" S RMPRDORW=$P(XMRG,"*",4)
"RTN","RMPRESRV",17,0)
 .I XMRG["DOR1" D A1^RMPR9DO("00","99","ALL",RMPRDORS,RMPRDOR1,RMPRDORW) Q
"RTN","RMPRESRV",18,0)
 ;pip EXCEL extract
"RTN","RMPRESRV",19,0)
 I $P(XMRG,"*",1)="PIP ROLL-UP" S RMPRPIP1=$P(XMRG,"*",2),RMPRPIP2=$P(XMRG,"*",3) G ^RMPR5HQ1
"RTN","RMPRESRV",20,0)
 ;pip REPORT extract
"RTN","RMPRESRV",21,0)
 I $P(XMRG,"*",1)="PIP REPORT" S RMPRPIP1=$P(XMRG,"*",2),RMPRPIP2=$P(XMRG,"*",3),RMPRDET=$P(XMRG,"*",4) G ^RMPR5HQA
"RTN","RMPRESRV",22,0)
 ;open obligations
"RTN","RMPRESRV",23,0)
 I XMRG="PR2" G PR2^RMPREXT
"RTN","RMPRESRV",24,0)
 I $D(RMPRDS1)&($D(RMPRDS2)) D EN^RMPREXDS(RMPRDS1,RMPRDS2) G EXIT
"RTN","RMPRESRV",25,0)
 I '$D(RMPRDT1)!('$D(RMPRDT2)) G EXIT
"RTN","RMPRESRV",26,0)
 ;dates for message subject
"RTN","RMPRESRV",27,0)
 S Y=RMPRDT1 D DD^%DT S RMPRDAT1=Y
"RTN","RMPRESRV",28,0)
 S Y=RMPRDT2 D DD^%DT S RMPRDAT2=Y
"RTN","RMPRESRV",29,0)
 ;send message to group so they know the server was activated
"RTN","RMPRESRV",30,0)
 S XMDUZ=.5
"RTN","RMPRESRV",31,0)
 S XMY("G.RMPR SERVER")=""
"RTN","RMPRESRV",32,0)
 S XMSUB="Prosthetics Data Extract "_RMPRDAT1_" to "_RMPRDAT2
"RTN","RMPRESRV",33,0)
 S RMPRMSG(1)="The National Data Server has been activated today by Prosthetics HQ."
"RTN","RMPRESRV",34,0)
 S RMPRMSG(2)="Data has been collected for the date range "_RMPRDAT1_" to "_RMPRDAT2_"."
"RTN","RMPRESRV",35,0)
 S RMPRMSG(3)=""
"RTN","RMPRESRV",36,0)
 S RMPRMSG(4)="This was activated by "_$P(XMFROM,"@",1)
"RTN","RMPRESRV",37,0)
 S RMPRMSG(5)=""
"RTN","RMPRESRV",38,0)
 S XMTEXT="RMPRMSG("
"RTN","RMPRESRV",39,0)
 D ^XMD
"RTN","RMPRESRV",40,0)
 ;refresh amis codes in file 660
"RTN","RMPRESRV",41,0)
 D ^RMPREXR
"RTN","RMPRESRV",42,0)
 ;gather and send the raw data
"RTN","RMPRESRV",43,0)
 ;add additional extract here if needed
"RTN","RMPRESRV",44,0)
 D EN1^RMPREXT
"RTN","RMPRESRV",45,0)
EXIT ;common exit point
"RTN","RMPRESRV",46,0)
 K RMPRDAT1,RMPRDAT2
"RTN","RMPRESRV",47,0)
 ;END
"RTN","RMPREXT")
0^31^B25882706
"RTN","RMPREXT",1,0)
RMPREXT ;PHX/HNC-DATA EXTRACT FOR Nppd  ;4/20/1995
"RTN","RMPREXT",2,0)
 ;;3.0;PROSTHETICS;**12,18,24,64,59**;Feb 09, 1996
"RTN","RMPREXT",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","RMPREXT",4,0)
EN ;extract from 660
"RTN","RMPREXT",5,0)
 N %ZIS,ZTIO,ZTRTN,ZTSK,ZTDESC
"RTN","RMPREXT",6,0)
 S %ZIS="Q" D ^%ZIS Q:POP
"RTN","RMPREXT",7,0)
 I $D(IO("Q")) D QUE,HOME^%ZIS Q
"RTN","RMPREXT",8,0)
PR1 ;refresh amis codes
"RTN","RMPREXT",9,0)
 D ^RMPREXR
"RTN","RMPREXT",10,0)
EN1 ;pass dates if needed
"RTN","RMPREXT",11,0)
 S DIC="^RMPR(660,",DR=".01:83",DIQ(0)="EN"
"RTN","RMPREXT",12,0)
 S RMPRB=0,RMPRCNT=0,RMPRSUB="B1 "
"RTN","RMPREXT",13,0)
 K ^TMP("RMPR",$J)
"RTN","RMPREXT",14,0)
 F  S RMPRB=$O(^RMPR(660,"B",RMPRB)) Q:(RMPRB>RMPRDT2)!(RMPRB'>0)  D
"RTN","RMPREXT",15,0)
 .Q:RMPRB<RMPRDT1
"RTN","RMPREXT",16,0)
 .;date range check complete
"RTN","RMPREXT",17,0)
 .;pick up mult records with same date
"RTN","RMPREXT",18,0)
 .S RMPRA=0
"RTN","RMPREXT",19,0)
 .F  S RMPRA=$O(^RMPR(660,"B",RMPRB,RMPRA)) Q:RMPRA'>0  D
"RTN","RMPREXT",20,0)
 ..S DA=RMPRA,DIQ="RMPR"
"RTN","RMPREXT",21,0)
 ..D EN^DIQ1,LINECK
"RTN","RMPREXT",22,0)
 ..;parse array in format needed to send/receive
"RTN","RMPREXT",23,0)
 ..S RMPRC=0
"RTN","RMPREXT",24,0)
 ..F  S RMPRC=$O(RMPR(660,RMPRC)) Q:RMPRC'>0  D TMP
"RTN","RMPREXT",25,0)
 ;clean up before calling mailman
"RTN","RMPREXT",26,0)
 K DFN,RMPRFLD,RMPRE,RMPRCNT,DFN,RMPRA,RMPRC,DIQ,DIC,DR,DA,RMPRDT1,RMPRDT2
"RTN","RMPREXT",27,0)
 S XMSUB="B1-F " D MAIL,EXIT
"RTN","RMPREXT",28,0)
 Q
"RTN","RMPREXT",29,0)
LINECK ;check the message line limit (5000)
"RTN","RMPREXT",30,0)
 I RMPRCNT>5000 S XMSUB=RMPRSUB D MAIL K ^TMP("RMPR",$J) S RMPRCNT=0
"RTN","RMPREXT",31,0)
 Q
"RTN","RMPREXT",32,0)
TMP ;format for mailman ^TMP(namespace,$J,counter)=record,field,value
"RTN","RMPREXT",33,0)
 S RMPRFLD=0
"RTN","RMPREXT",34,0)
 F  S RMPRFLD=$O(RMPR(660,RMPRC,RMPRFLD)) Q:RMPRFLD'>0  D
"RTN","RMPREXT",35,0)
 .S RMPRCNT=RMPRCNT+1,RMPRE=0,DFN=0
"RTN","RMPREXT",36,0)
 .S RMPRE=$O(RMPR(660,RMPRC,RMPRFLD,RMPRE)) Q:RMPRE=""
"RTN","RMPREXT",37,0)
 .;strip the , for CSV file
"RTN","RMPREXT",38,0)
 .S ^TMP("RMPR",$J,RMPRCNT)=RMPRC_","_RMPRFLD_","_$TR(RMPR(660,RMPRC,RMPRFLD,RMPRE),",","/")
"RTN","RMPREXT",39,0)
 .;get SSN
"RTN","RMPREXT",40,0)
 .I RMPRFLD=".02" D
"RTN","RMPREXT",41,0)
 .  .S DFN=$P(^RMPR(660,RMPRC,0),U,2)
"RTN","RMPREXT",42,0)
 .  .D DEM^VADPT,ADD^VADPT
"RTN","RMPREXT",43,0)
 .  .S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",644,"_VA("PID")
"RTN","RMPREXT",44,0)
 .  .;DOB int
"RTN","RMPREXT",45,0)
 .  .I $G(VADM(3)) S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.3,"_$P(VADM(3),U,1)
"RTN","RMPREXT",46,0)
 .  .;DOB ext
"RTN","RMPREXT",47,0)
 .  .I $G(VADM(3)) S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.31,"_$P(VADM(3),U,2)
"RTN","RMPREXT",48,0)
 .  .;Sex, int
"RTN","RMPREXT",49,0)
 .  .I $G(VADM(5))'="" S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.5,"_$P(VADM(5),U,1)
"RTN","RMPREXT",50,0)
 .  .;DOD int
"RTN","RMPREXT",51,0)
 .  .I $G(VADM(6)) S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.6,"_$P(VADM(6),U,1)
"RTN","RMPREXT",52,0)
 .  .;DOD ext
"RTN","RMPREXT",53,0)
 .  .I $G(VADM(6)) S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.61,"_$P(VADM(6),U,2)
"RTN","RMPREXT",54,0)
 .  .;patient zip
"RTN","RMPREXT",55,0)
 .  .I $G(VAPA(6)) S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.62,"_VAPA(6)
"RTN","RMPREXT",56,0)
 .  .;patient county name
"RTN","RMPREXT",57,0)
 .  .I $G(VAPA(7)) S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.63,"_$P(VAPA(7),U,2)
"RTN","RMPREXT",58,0)
 .  .;city
"RTN","RMPREXT",59,0)
 .  .I $G(VAPA(4)) S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.66,"_VAPA(4)
"RTN","RMPREXT",60,0)
 .  .;requestor service
"RTN","RMPREXT",61,0)
 .  .;
"RTN","RMPREXT",62,0)
 .  .;ICN
"RTN","RMPREXT",63,0)
 .  .S ICN=$$GETICN^MPIF001(DFN)
"RTN","RMPREXT",64,0)
 .  .I +ICN'=-1 S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.64,"_ICN
"RTN","RMPREXT",65,0)
 .  .;CMOR
"RTN","RMPREXT",66,0)
 .  .S CMOR=$$GETVCCI^MPIF001(DFN)
"RTN","RMPREXT",67,0)
 .  .I +CMOR'=-1 S RMPRCNT=RMPRCNT+1,^TMP("RMPR",$J,RMPRCNT)=RMPRC_",664.65,"_CMOR
"RTN","RMPREXT",68,0)
 K VA("PID"),RMPR,VADM,VAPA,ICN,CMOR
"RTN","RMPREXT",69,0)
 Q
"RTN","RMPREXT",70,0)
MAIL ;pack it up and send it off
"RTN","RMPREXT",71,0)
 S XMTEXT="^TMP(""RMPR"",$J,"
"RTN","RMPREXT",72,0)
MAILS ;entry point to send summary msg
"RTN","RMPREXT",73,0)
 S XMDUZ=.5
"RTN","RMPREXT",74,0)
 S XMY("G.PROSTHETICS@PSAS.MED.VA.GOV")=""
"RTN","RMPREXT",75,0)
 S XMSUB=XMSUB_" Extract From "_$P($$SITE^VASITE,U,2)
"RTN","RMPREXT",76,0)
 D ^XMD
"RTN","RMPREXT",77,0)
 ;keep track of messages sent
"RTN","RMPREXT",78,0)
 S RMPRM(XMZ)=XMZ
"RTN","RMPREXT",79,0)
 Q
"RTN","RMPREXT",80,0)
QUE ;TaskMan Queue
"RTN","RMPREXT",81,0)
 S ZTIO=ION_";"_IOST K IO("Q")
"RTN","RMPREXT",82,0)
 S ZTRTN="PR1^RMPREXT"
"RTN","RMPREXT",83,0)
 S ZTDESC="Prosthetics National Data Extract"
"RTN","RMPREXT",84,0)
 K ZTSK D ^%ZTLOAD I $G(ZTSK) U IO(0) W !,"<REQUEST QUEUED>"
"RTN","RMPREXT",85,0)
 Q
"RTN","RMPREXT",86,0)
EXIT ;exit point
"RTN","RMPREXT",87,0)
 ;send summary msg
"RTN","RMPREXT",88,0)
 S RMPRM(1)="Message Numbers Created"
"RTN","RMPREXT",89,0)
 S XMSUB=RMPRSUB_"Summary ",XMTEXT="RMPRM("
"RTN","RMPREXT",90,0)
 D MAILS
"RTN","RMPREXT",91,0)
 K ^TMP("RMPR",$J),XMTEXT,XMDUZ,XMY,XMSUB,RMPRM
"RTN","RMPREXT",92,0)
 Q
"RTN","RMPREXT",93,0)
PR2 ;Bundle open obligations on 2319
"RTN","RMPREXT",94,0)
 S XMDUZ=.5
"RTN","RMPREXT",95,0)
 S XMY("G.RMPR SERVER")=""
"RTN","RMPREXT",96,0)
 S XMSUB="Prosthetics Data Extract Open Obligations"
"RTN","RMPREXT",97,0)
 S RMPRMSG(1)="The National Data Server has been activated today by Prosthetics HQ."
"RTN","RMPREXT",98,0)
 S RMPRMSG(2)="Data has been collected for all open obligations."
"RTN","RMPREXT",99,0)
 S RMPRMSG(3)=""
"RTN","RMPREXT",100,0)
 S RMPRMGS(4)="This was activated by "_$P(XMFROM,"@",1)
"RTN","RMPREXT",101,0)
 S RMPRMSG(5)=""
"RTN","RMPREXT",102,0)
 S XMTEXT="RMPRMSG("
"RTN","RMPREXT",103,0)
 D ^XMD
"RTN","RMPREXT",104,0)
 ;
"RTN","RMPREXT",105,0)
 K ^TMP("RMPR",$J)
"RTN","RMPREXT",106,0)
 S RMPRB=0,RMPRCNT=0,RMPRSUB="B2 "
"RTN","RMPREXT",107,0)
 S DIC="^RMPR(660,",DR=".01:83",DIQ(0)="EN"
"RTN","RMPREXT",108,0)
 F  S RMPRB=$O(^RMPR(660,RMPRB)) Q:RMPRB'>0  D
"RTN","RMPREXT",109,0)
 .I $G(^RMPR(660,RMPRB,0))="" Q
"RTN","RMPREXT",110,0)
 .S RMPRA=^RMPR(660,RMPRB,0)
"RTN","RMPREXT",111,0)
 .;delivery date not null
"RTN","RMPREXT",112,0)
 .Q:$P(RMPRA,U,12)'=""
"RTN","RMPREXT",113,0)
 .S RMPRX=$P($G(^RMPR(660,RMPRB,1)),U,1)
"RTN","RMPREXT",114,0)
 .;has an IFCAP transaction number
"RTN","RMPREXT",115,0)
 .Q:$P(RMPRX,U,1)=""
"RTN","RMPREXT",116,0)
 .;refresh amis data
"RTN","RMPREXT",117,0)
 .D
"RTN","RMPREXT",118,0)
 ..N ITM,TYPE,NEW,REPAIR
"RTN","RMPREXT",119,0)
 ..S ITM=$P(RMPRA,U,6),TYPE=$P(RMPRA,U,4)
"RTN","RMPREXT",120,0)
 ..Q:ITM=""
"RTN","RMPREXT",121,0)
 ..Q:TYPE=""
"RTN","RMPREXT",122,0)
 ..S NEW=$P($G(^RMPR(661,ITM,0)),U,3)
"RTN","RMPREXT",123,0)
 ..S REPAIR=$P($G(^RMPR(661,ITM,0)),U,4)
"RTN","RMPREXT",124,0)
 ..I TYPE="X" S $P(^RMPR(660,RMPRB,"AM"),U,5)=REPAIR,$P(^("AM"),U,9)="" Q
"RTN","RMPREXT",125,0)
 ..S $P(^RMPR(660,RMPRB,"AM"),U,9)=NEW,$P(^("AM"),U,5)=""
"RTN","RMPREXT",126,0)
 .;get data
"RTN","RMPREXT",127,0)
 .S DA=RMPRB,DIQ="RMPR" D EN^DIQ1,LINECK
"RTN","RMPREXT",128,0)
 .S RMPRC=0
"RTN","RMPREXT",129,0)
 .F  S RMPRC=$O(RMPR(660,RMPRC)) Q:RMPRC'>0  D LINECK,TMP
"RTN","RMPREXT",130,0)
 K DFN,RMPRFLD,RMPRC,RMPRA,RMPRB,RMPRX,RMPRCNT,RMPRE,DR,DIC,DIQ,DA
"RTN","RMPREXT",131,0)
 S XMSUB="B2-F " D MAIL,EXIT
"RTN","RMPREXT",132,0)
 D ^%ZISC
"RTN","RMPREXT",133,0)
 Q
"RTN","RMPREXT",134,0)
 ;END
"RTN","RMPRUTL1")
0^19^B8915341
"RTN","RMPRUTL1",1,0)
RMPRUTL1 ;PHX/HPL - PROSTHETICS UTILITY SUBROUTINES ;10/31/1994
"RTN","RMPRUTL1",2,0)
 ;;3.0;PROSTHETICS;**3,44,49,59**;Feb 09, 1996
"RTN","RMPRUTL1",3,0)
 ;;PROSTHETICS;3.0;Apr. 17, 1995
"RTN","RMPRUTL1",4,0)
 ;OJ - p49 rewrite of RAP to overcome letter printing line wrap problems
"RTN","RMPRUTL1",5,0)
 ;
"RTN","RMPRUTL1",6,0)
RAP(LINE,TB) ;WRAP A LINE IF NEEDED
"RTN","RMPRUTL1",7,0)
 N MAX,S,NW,NXT,FIN,SL
"RTN","RMPRUTL1",8,0)
 S MAX=IOM-(2*TB),FIN=0
"RTN","RMPRUTL1",9,0)
 F  Q:FIN  D
"RTN","RMPRUTL1",10,0)
 . S SL=$L(LINE)
"RTN","RMPRUTL1",11,0)
 . I SL'>MAX W !?TB,LINE S FIN=1 Q
"RTN","RMPRUTL1",12,0)
 . S S=$E(LINE,1,MAX),NXT=MAX
"RTN","RMPRUTL1",13,0)
 . I $E(S,MAX)'=" " D
"RTN","RMPRUTL1",14,0)
 . . S NW=$L(S," ")-1
"RTN","RMPRUTL1",15,0)
 . . I NW=0 D
"RTN","RMPRUTL1",16,0)
 . . . S NXT=MAX-1,S=$E(S,1,NXT)_"-"
"RTN","RMPRUTL1",17,0)
 . . . Q
"RTN","RMPRUTL1",18,0)
 . . E  D
"RTN","RMPRUTL1",19,0)
 . . . S S=$P(S," ",1,NW),NXT=$L(S)
"RTN","RMPRUTL1",20,0)
 . . . Q
"RTN","RMPRUTL1",21,0)
 . . Q
"RTN","RMPRUTL1",22,0)
 . W !?TB,S
"RTN","RMPRUTL1",23,0)
 . F  S NXT=NXT+1 Q:NXT>SL  Q:$E(LINE,NXT)'=" "
"RTN","RMPRUTL1",24,0)
 . I NXT>SL S FIN=1 Q
"RTN","RMPRUTL1",25,0)
 . S LINE=$E(LINE,NXT,SL)
"RTN","RMPRUTL1",26,0)
 . Q
"RTN","RMPRUTL1",27,0)
 Q ""
"RTN","RMPRUTL1",28,0)
FND ;FIND NEXT NON SPACE POSITION
"RTN","RMPRUTL1",29,0)
 Q:'$D(LINE)  F NLP=LP:1:H S B=NLP Q:$E(LINE,B,B)'=" "
"RTN","RMPRUTL1",30,0)
 Q
"RTN","RMPRUTL1",31,0)
PARS(NAME) ;PARSE AN INTERNAL FORM NAME INTO A LETTER FORMAT NAME
"RTN","RMPRUTL1",32,0)
 I NAME["," S LNAME=$P(NAME,",",1),FNAME=$P(NAME,",",2)
"RTN","RMPRUTL1",33,0)
 E  D
"RTN","RMPRUTL1",34,0)
 .S LNAME=NAME,PIECES=1,FNAME="",FNAME(1)="",TITLE=""
"RTN","RMPRUTL1",35,0)
 I LNAME'[" " S LP=1,LNAME(1)=LNAME,LNAME(2)=""
"RTN","RMPRUTL1",36,0)
 E  D
"RTN","RMPRUTL1",37,0)
 .S LP=2,LNAME(2)=$P(LNAME," ",2),LNAME(1)=$P(LNAME," ",1)
"RTN","RMPRUTL1",38,0)
 F LUP=1:1:LP S NAME=LNAME(LUP) D TRANS S LNAME(LUP)=RMPRNAME
"RTN","RMPRUTL1",39,0)
 S LASTNAME=LNAME(1)_" "_LNAME(2)
"RTN","RMPRUTL1",40,0)
 S PIECES=$S($L(FNAME," ")>1:$L(FNAME," "),1:1) S TITLE=""
"RTN","RMPRUTL1",41,0)
 I PIECES>1&($L($P(FNAME," ",PIECES))>1) D
"RTN","RMPRUTL1",42,0)
 .S TITLE=$P(FNAME," ",PIECES)
"RTN","RMPRUTL1",43,0)
 .S PIECES=PIECES-1
"RTN","RMPRUTL1",44,0)
  S FRSTNAME="" F LP=1:1:PIECES S NAME=$P(FNAME," ",LP) D TRANS S FRSTNAME=FRSTNAME_" "_RMPRNAME
"RTN","RMPRUTL1",45,0)
 S NAME=TITLE
"RTN","RMPRUTL1",46,0)
 I TITLE'["I" D TRANS S TITLE=RMPRNAME
"RTN","RMPRUTL1",47,0)
 S FIXDNAME=FRSTNAME_" "_LASTNAME_" "
"RTN","RMPRUTL1",48,0)
 Q FIXDNAME
"RTN","RMPRUTL1",49,0)
TRANS S RMPRU="ABCDEFGHIJKLMNOPQRSTUVWXYZ",RMPRL="abcdefghijklmnopqrstuvwxyz",RMPR1=$E(NAME),RMPR2=$E(NAME,2,25),RMPRNAME=$TR(RMPR1,RMPRL,RMPRU)_$TR(RMPR2,RMPRU,RMPRL)
"RTN","RMPRUTL1",50,0)
 Q
"RTN","RMPRUTL1",51,0)
DCNT(AMT,PCT) ; CALCULATE A DISCOUNT WITH ROUNDING
"RTN","RMPRUTL1",52,0)
 S DCNT=AMT*PCT S DCNT=$S(DCNT#.01=.005:DCNT+.005,DCNT#.01>.005:DCNT+(.01-(DCNT#.01)),1:DCNT-(DCNT#.01))
"RTN","RMPRUTL1",53,0)
 Q DCNT
"RTN","RMPRUTL1",54,0)
DISP ;Display help for DIR screens/reads.
"RTN","RMPRUTL1",55,0)
 N RMPR90DP,RMPR90I W ! S RMPR90DP=$P(DIR(0),U,2,999) F RMPR90I=1:1:5 I $P($P(RMPR90DP,";",RMPR90I),":",1)'=""  W " ("_$P($P(RMPR90DP,";",RMPR90I),":",1)_")"_$P($P(RMPR90DP,";",RMPR90I),":",2)_" "
"RTN","RMPRUTL1",56,0)
 Q
"RTN","RMPRUTL1",57,0)
EXIT ;GENERIC EXIT TAG
"RTN","RMPRUTL1",58,0)
 ; VARIABLES REQUIRED: NONE
"RTN","RMPRUTL1",59,0)
 N RMPR,RMPRSITE D KILL^%ZISS,KVAR^VADPT,KILL^XUSCLEAN Q
"RTN","RMPRUTL1",60,0)
 ;
"RTN","RMPRUTL1",61,0)
DAT1(X) ; Convert FM date to displayable (mm/dd/yy) format. 
"RTN","RMPRUTL1",62,0)
 N DATE
"RTN","RMPRUTL1",63,0)
 S DATE=$S(X:$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3),1:"")
"RTN","RMPRUTL1",64,0)
 Q DATE
"RTN","RMPRUTL1",65,0)
 ;
"RTN","RMPRUTL1",66,0)
DAT2(X) ;Convert FM date to display (mm/dd/yyyy) format.
"RTN","RMPRUTL1",67,0)
 N DATE
"RTN","RMPRUTL1",68,0)
 S DATE=$S(X:$E(X,4,5)_"/"_$E(X,6,7)_"/"_(1700+$E(X,1,3)),1:"")
"RTN","RMPRUTL1",69,0)
 Q DATE
"RTN","RMPRUTL1",70,0)
 ;
"VER")
8.0^22
"^DD",668,668,5,0)
COMPLETION DATE^D^^0;5^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",668,668,5,1,0)
^.1
"^DD",668,668,5,1,1,0)
^^TRIGGER^668^6
"^DD",668,668,5,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^RMPR(668,D0,0)):^(0),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y S X=DIV S X=DUZ X ^DD(668,5,1,1,1.4)
"^DD",668,668,5,1,1,1.4)
S DIH=$S($D(^RMPR(668,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,6)=DIV,DIH=668,DIG=6 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",668,668,5,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^RMPR(668,D0,0)):^(0),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y S X="" S DIH=$S($D(^RMPR(668,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,6)=DIV,DIH=668,DIG=6 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",668,668,5,1,1,"%D",0)
^^1^1^2960129^
"^DD",668,668,5,1,1,"%D",1,0)
Triggers completed by field.
"^DD",668,668,5,1,1,"CREATE VALUE")
S X=DUZ
"^DD",668,668,5,1,1,"DELETE VALUE")
@
"^DD",668,668,5,1,1,"FIELD")
COMPLETED BY
"^DD",668,668,5,1,2,0)
668^CD^MUMPS
"^DD",668,668,5,1,2,1)
D EN02^RMPR9X
"^DD",668,668,5,1,2,2)
D KILL02^RMPR9X
"^DD",668,668,5,1,2,"%D",0)
^^2^2^3030514^
"^DD",668,668,5,1,2,"%D",1,0)
This will create a cross reference to be used with the Delayed Order
"^DD",668,668,5,1,2,"%D",2,0)
Report.  Completeion Date and Number of Processing Days.
"^DD",668,668,5,1,2,"DT")
3030514
"^DD",668,668,5,3)
MUST NOT BE LESS THAN BEGINNING SUSPENSE DATE
"^DD",668,668,5,21,0)
^^1^1^3000821^
"^DD",668,668,5,21,1,0)
This is the date and time of the completion note.
"^DD",668,668,5,"DT")
3030514
"^DD",668,668,14,0)
STATUS^S^O:OPEN;P:PENDING;C:CLOSED;X:CANCELLED;^0;10^Q
"^DD",668,668,14,1,0)
^.1
"^DD",668,668,14,1,1,0)
668^E
"^DD",668,668,14,1,1,1)
S ^RMPR(668,"E",$E(X,1,30),DA)=""
"^DD",668,668,14,1,1,2)
K ^RMPR(668,"E",$E(X,1,30),DA)
"^DD",668,668,14,1,1,"DT")
3000725
"^DD",668,668,14,1,2,0)
668^I^MUMPS
"^DD",668,668,14,1,2,1)
D EN^RMPR9X
"^DD",668,668,14,1,2,2)
D KILL^RMPR9X
"^DD",668,668,14,1,2,"%D",0)
^^2^2^3021212^
"^DD",668,668,14,1,2,"%D",1,0)
Sort and filter on last 2 numbers of the Patients SSN number for Open or 
"^DD",668,668,14,1,2,"%D",2,0)
Pending Orders Only.
"^DD",668,668,14,1,2,"DT")
3021212
"^DD",668,668,14,1,3,0)
668^L^MUMPS
"^DD",668,668,14,1,3,1)
D EN0^RMPR9X
"^DD",668,668,14,1,3,2)
D KILL0^RMPR9X
"^DD",668,668,14,1,3,"%D",0)
^^2^2^3030305^
"^DD",668,668,14,1,3,"%D",1,0)
This cross refernce is used for the Delayed Order Report GUI Grid.
"^DD",668,668,14,1,3,"%D",2,0)
It is the last 2 of SSN, the Create Date with no Time, and the Status.
"^DD",668,668,14,1,3,"DT")
3030305
"^DD",668,668,14,1,4,0)
668^L1^MUMPS
"^DD",668,668,14,1,4,1)
D EN01^RMPR9X
"^DD",668,668,14,1,4,2)
D KILL01^RMPR9X
"^DD",668,668,14,1,4,"%D",0)
^^2^2^3030305^
"^DD",668,668,14,1,4,"%D",1,0)
This is for the Delayed Order Report, GUI Grid.
"^DD",668,668,14,1,4,"%D",2,0)
It is the last 2 of patient SSN, Status and ien.
"^DD",668,668,14,1,4,"DT")
3030305
"^DD",668,668,14,21,0)
^.001^1^1^3030310^^^^
"^DD",668,668,14,21,1,0)
This is the current status, Open, Pending, Closed, or Cancelled.
"^DD",668,668,14,23,0)
^.001^1^1^3030310^^^^
"^DD",668,668,14,23,1,0)
 
"^DD",668,668,14,"DT")
3030305
**END**
**END**

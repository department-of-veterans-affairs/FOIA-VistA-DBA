Released HBH*1*16 SEQ #16
Extracted from mail message
**KIDS**:HBH*1.0*16^

**INSTALL NAME**
HBH*1.0*16
"BLD",2695,0)
HBH*1.0*16^HOSPITAL BASED HOME CARE^0^3000616^y
"BLD",2695,1,0)
^^1^1^3000608^^^^
"BLD",2695,1,1,0)
This is HBH*1.0*16
"BLD",2695,4,0)
^9.64PA^632^1
"BLD",2695,4,632,0)
632
"BLD",2695,4,632,222)
y^n^f^^^^n
"BLD",2695,4,"B",632,632)

"BLD",2695,"ABPKG")
n
"BLD",2695,"INID")
^y
"BLD",2695,"INIT")
HBHPST16
"BLD",2695,"KRN",0)
^9.67PA^19^18
"BLD",2695,"KRN",.4,0)
.4
"BLD",2695,"KRN",.4,"NM",0)
^9.68A^^
"BLD",2695,"KRN",.401,0)
.401
"BLD",2695,"KRN",.401,"NM",0)
^9.68A^^
"BLD",2695,"KRN",.402,0)
.402
"BLD",2695,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",2695,"KRN",.403,0)
.403
"BLD",2695,"KRN",.403,"NM",0)
^9.68A^^
"BLD",2695,"KRN",.5,0)
.5
"BLD",2695,"KRN",.84,0)
.84
"BLD",2695,"KRN",3.6,0)
3.6
"BLD",2695,"KRN",3.8,0)
3.8
"BLD",2695,"KRN",3.8,"NM",0)
^9.68A^^0
"BLD",2695,"KRN",9.2,0)
9.2
"BLD",2695,"KRN",9.8,0)
9.8
"BLD",2695,"KRN",9.8,"NM",0)
^9.68A^27^19
"BLD",2695,"KRN",9.8,"NM",8,0)
HBHCAPPT^^0^B32214867
"BLD",2695,"KRN",9.8,"NM",9,0)
HBHCAPP1^^0^B6198575
"BLD",2695,"KRN",9.8,"NM",10,0)
HBHCFILE^^0^B30351627
"BLD",2695,"KRN",9.8,"NM",12,0)
HBHCRP3^^0^B11588692
"BLD",2695,"KRN",9.8,"NM",13,0)
HBHCUTL^^0^B26044972
"BLD",2695,"KRN",9.8,"NM",14,0)
HBHCUTL3^^0^B12542145
"BLD",2695,"KRN",9.8,"NM",15,0)
HBHCUTL2^^0^B31428259
"BLD",2695,"KRN",9.8,"NM",16,0)
HBHCRP4^^0^B23627738
"BLD",2695,"KRN",9.8,"NM",17,0)
HBHCRP9^^0^B129336
"BLD",2695,"KRN",9.8,"NM",18,0)
HBHCRP6^^0^B499415
"BLD",2695,"KRN",9.8,"NM",19,0)
HBHCRP20^^0^B11351418
"BLD",2695,"KRN",9.8,"NM",20,0)
HBHCRP21^^0^B50792838
"BLD",2695,"KRN",9.8,"NM",21,0)
HBHCRP17^^0^B8130692
"BLD",2695,"KRN",9.8,"NM",22,0)
HBHCRP22^^0^B12653102
"BLD",2695,"KRN",9.8,"NM",23,0)
HBHCUTL4^^0^B7453460
"BLD",2695,"KRN",9.8,"NM",24,0)
HBHCRP1A^^0^B18793786
"BLD",2695,"KRN",9.8,"NM",25,0)
HBHCRP1B^^0^B17259643
"BLD",2695,"KRN",9.8,"NM",26,0)
HBHPST16^^0^B423156
"BLD",2695,"KRN",9.8,"NM",27,0)
HBHCADM^^0^B18781454
"BLD",2695,"KRN",9.8,"NM","B","HBHCADM",27)

"BLD",2695,"KRN",9.8,"NM","B","HBHCAPP1",9)

"BLD",2695,"KRN",9.8,"NM","B","HBHCAPPT",8)

"BLD",2695,"KRN",9.8,"NM","B","HBHCFILE",10)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP17",21)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP1A",24)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP1B",25)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP20",19)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP21",20)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP22",22)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP3",12)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP4",16)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP6",18)

"BLD",2695,"KRN",9.8,"NM","B","HBHCRP9",17)

"BLD",2695,"KRN",9.8,"NM","B","HBHCUTL",13)

"BLD",2695,"KRN",9.8,"NM","B","HBHCUTL2",15)

"BLD",2695,"KRN",9.8,"NM","B","HBHCUTL3",14)

"BLD",2695,"KRN",9.8,"NM","B","HBHCUTL4",23)

"BLD",2695,"KRN",9.8,"NM","B","HBHPST16",26)

"BLD",2695,"KRN",19,0)
19
"BLD",2695,"KRN",19,"NM",0)
^9.68A^38^37
"BLD",2695,"KRN",19,"NM",1,0)
HBHC INFORMATION SYSTEM MENU^^0
"BLD",2695,"KRN",19,"NM",2,0)
HBHC APPOINTMENT^^0
"BLD",2695,"KRN",19,"NM",3,0)
HBHCADM^^0
"BLD",2695,"KRN",19,"NM",4,0)
HBHCDIS^^0
"BLD",2695,"KRN",19,"NM",5,0)
HBHC REPORTS MENU^^0
"BLD",2695,"KRN",19,"NM",6,0)
HBHC TRANSMISSION MENU^^0
"BLD",2695,"KRN",19,"NM",7,0)
HBHC MANAGER MENU^^0
"BLD",2695,"KRN",19,"NM",8,0)
HBHCRP2^^0
"BLD",2695,"KRN",19,"NM",9,0)
HBHCRP3^^0
"BLD",2695,"KRN",19,"NM",10,0)
HBHCRP5^^0
"BLD",2695,"KRN",19,"NM",11,0)
HBHCRP12^^0
"BLD",2695,"KRN",19,"NM",12,0)
HBHCRP7^^0
"BLD",2695,"KRN",19,"NM",13,0)
HBHCRP16^^0
"BLD",2695,"KRN",19,"NM",14,0)
HBHCRP4^^0
"BLD",2695,"KRN",19,"NM",15,0)
HBHCRP17^^0
"BLD",2695,"KRN",19,"NM",16,0)
HBHCRP22^^0
"BLD",2695,"KRN",19,"NM",17,0)
HBHCR19A^^0
"BLD",2695,"KRN",19,"NM",18,0)
HBHCRP20^^0
"BLD",2695,"KRN",19,"NM",19,0)
HBHCRP21^^0
"BLD",2695,"KRN",19,"NM",20,0)
HBHC CENSUS REPORTS MENU^^0
"BLD",2695,"KRN",19,"NM",21,0)
HBHCRP10^^0
"BLD",2695,"KRN",19,"NM",22,0)
HBHCRP18^^0
"BLD",2695,"KRN",19,"NM",23,0)
HBHCRP11^^0
"BLD",2695,"KRN",19,"NM",24,0)
HBHCRP6^^0
"BLD",2695,"KRN",19,"NM",25,0)
HBHCRP9^^0
"BLD",2695,"KRN",19,"NM",26,0)
HBHCFILE^^0
"BLD",2695,"KRN",19,"NM",27,0)
HBHCRP1^^0
"BLD",2695,"KRN",19,"NM",28,0)
HBHCUPD^^0
"BLD",2695,"KRN",19,"NM",29,0)
HBHCXMT^^0
"BLD",2695,"KRN",19,"NM",30,0)
HBHCR15A^^0
"BLD",2695,"KRN",19,"NM",31,0)
HBHC EDIT SYSTEM PARAMETERS^^0
"BLD",2695,"KRN",19,"NM",32,0)
HBHC EDIT PROVIDER (631.4)^^0
"BLD",2695,"KRN",19,"NM",33,0)
HBHC EDIT CLINIC (631.6)^^0
"BLD",2695,"KRN",19,"NM",34,0)
HBHC EDIT HBHC TEAM (633)^^0
"BLD",2695,"KRN",19,"NM",35,0)
HBHCRP8^^0
"BLD",2695,"KRN",19,"NM",36,0)
HBHXRP14^^0
"BLD",2695,"KRN",19,"NM",38,0)
HBHCRXMT^^0
"BLD",2695,"KRN",19,"NM","B","HBHC APPOINTMENT",2)

"BLD",2695,"KRN",19,"NM","B","HBHC CENSUS REPORTS MENU",20)

"BLD",2695,"KRN",19,"NM","B","HBHC EDIT CLINIC (631.6)",33)

"BLD",2695,"KRN",19,"NM","B","HBHC EDIT HBHC TEAM (633)",34)

"BLD",2695,"KRN",19,"NM","B","HBHC EDIT PROVIDER (631.4)",32)

"BLD",2695,"KRN",19,"NM","B","HBHC EDIT SYSTEM PARAMETERS",31)

"BLD",2695,"KRN",19,"NM","B","HBHC INFORMATION SYSTEM MENU",1)

"BLD",2695,"KRN",19,"NM","B","HBHC MANAGER MENU",7)

"BLD",2695,"KRN",19,"NM","B","HBHC REPORTS MENU",5)

"BLD",2695,"KRN",19,"NM","B","HBHC TRANSMISSION MENU",6)

"BLD",2695,"KRN",19,"NM","B","HBHCADM",3)

"BLD",2695,"KRN",19,"NM","B","HBHCDIS",4)

"BLD",2695,"KRN",19,"NM","B","HBHCFILE",26)

"BLD",2695,"KRN",19,"NM","B","HBHCR15A",30)

"BLD",2695,"KRN",19,"NM","B","HBHCR19A",17)

"BLD",2695,"KRN",19,"NM","B","HBHCRP1",27)

"BLD",2695,"KRN",19,"NM","B","HBHCRP10",21)

"BLD",2695,"KRN",19,"NM","B","HBHCRP11",23)

"BLD",2695,"KRN",19,"NM","B","HBHCRP12",11)

"BLD",2695,"KRN",19,"NM","B","HBHCRP16",13)

"BLD",2695,"KRN",19,"NM","B","HBHCRP17",15)

"BLD",2695,"KRN",19,"NM","B","HBHCRP18",22)

"BLD",2695,"KRN",19,"NM","B","HBHCRP2",8)

"BLD",2695,"KRN",19,"NM","B","HBHCRP20",18)

"BLD",2695,"KRN",19,"NM","B","HBHCRP21",19)

"BLD",2695,"KRN",19,"NM","B","HBHCRP22",16)

"BLD",2695,"KRN",19,"NM","B","HBHCRP3",9)

"BLD",2695,"KRN",19,"NM","B","HBHCRP4",14)

"BLD",2695,"KRN",19,"NM","B","HBHCRP5",10)

"BLD",2695,"KRN",19,"NM","B","HBHCRP6",24)

"BLD",2695,"KRN",19,"NM","B","HBHCRP7",12)

"BLD",2695,"KRN",19,"NM","B","HBHCRP8",35)

"BLD",2695,"KRN",19,"NM","B","HBHCRP9",25)

"BLD",2695,"KRN",19,"NM","B","HBHCRXMT",38)

"BLD",2695,"KRN",19,"NM","B","HBHCUPD",28)

"BLD",2695,"KRN",19,"NM","B","HBHCXMT",29)

"BLD",2695,"KRN",19,"NM","B","HBHXRP14",36)

"BLD",2695,"KRN",19.1,0)
19.1
"BLD",2695,"KRN",19.1,"NM",0)
^9.68A^^0
"BLD",2695,"KRN",101,0)
101
"BLD",2695,"KRN",409.61,0)
409.61
"BLD",2695,"KRN",771,0)
771
"BLD",2695,"KRN",869.2,0)
869.2
"BLD",2695,"KRN",870,0)
870
"BLD",2695,"KRN",8994,0)
8994
"BLD",2695,"KRN","B",.4,.4)

"BLD",2695,"KRN","B",.401,.401)

"BLD",2695,"KRN","B",.402,.402)

"BLD",2695,"KRN","B",.403,.403)

"BLD",2695,"KRN","B",.5,.5)

"BLD",2695,"KRN","B",.84,.84)

"BLD",2695,"KRN","B",3.6,3.6)

"BLD",2695,"KRN","B",3.8,3.8)

"BLD",2695,"KRN","B",9.2,9.2)

"BLD",2695,"KRN","B",9.8,9.8)

"BLD",2695,"KRN","B",19,19)

"BLD",2695,"KRN","B",19.1,19.1)

"BLD",2695,"KRN","B",101,101)

"BLD",2695,"KRN","B",409.61,409.61)

"BLD",2695,"KRN","B",771,771)

"BLD",2695,"KRN","B",869.2,869.2)

"BLD",2695,"KRN","B",870,870)

"BLD",2695,"KRN","B",8994,8994)

"BLD",2695,"QUES",0)
^9.62^^
"BLD",2695,"REQB",0)
^9.611^6^6
"BLD",2695,"REQB",1,0)
HBH*1.0*06^1
"BLD",2695,"REQB",2,0)
HBH*1.0*08^1
"BLD",2695,"REQB",3,0)
HBH*1.0*10^1
"BLD",2695,"REQB",4,0)
HBH*1.0*11^1
"BLD",2695,"REQB",5,0)
HBH*1.0*13^1
"BLD",2695,"REQB",6,0)
HBH*1.0*15^1
"BLD",2695,"REQB","B","HBH*1.0*06",1)

"BLD",2695,"REQB","B","HBH*1.0*08",2)

"BLD",2695,"REQB","B","HBH*1.0*10",3)

"BLD",2695,"REQB","B","HBH*1.0*11",4)

"BLD",2695,"REQB","B","HBH*1.0*13",5)

"BLD",2695,"REQB","B","HBH*1.0*15",6)

"FIA",632)
HBHC VISIT
"FIA",632,0)
^HBHC(632,
"FIA",632,0,0)
632IP
"FIA",632,0,1)
y^n^f^^^^n
"FIA",632,0,10)

"FIA",632,0,11)

"FIA",632,0,"RLRO")

"FIA",632,0,"VR")
1.0^HBH
"FIA",632,632)
0
"FIA",632,632.032)
0
"FIA",632,632.321)
0
"INIT")
HBHPST16
"KRN",19,3518,-1)
0^22
"KRN",19,3518,0)
HBHCRP18^Active Census with ICD9 Code/Text Report  (132)^^R^^^^^^^^
"KRN",19,3518,1,0)
^^5^5^2970207^^^^
"KRN",19,3518,1,1,0)
This option prints the HBPC Active Census with ICD9 Codes/Text Report.
"KRN",19,3518,1,2,0)
The user is prompted to enter the date range for inclusion on the
"KRN",19,3518,1,3,0)
report.  The report is sorted by patient name, then by admission date,
"KRN",19,3518,1,4,0)
and includes:  Patient Name, SSN, Admission Date, ICD9 Code, and ICD9
"KRN",19,3518,1,5,0)
Text.  Report prints in 132 column format.
"KRN",19,3518,25)
HBHCRP18
"KRN",19,3518,598000)
2
"KRN",19,3518,"U")
ACTIVE CENSUS WITH ICD9 CODE/T
"KRN",19,5840,-1)
0^36
"KRN",19,5840,0)
HBHXRP14^Pseudo Social Security Number Report  (80)^^R^^^^^^^^
"KRN",19,5840,1,0)
^^8^8^2940315^^
"KRN",19,5840,1,1,0)
This option prints the HBHC Pseudo Social Security Number (SSN) Report.
"KRN",19,5840,1,2,0)
Patients possessing a pseudo SSN have been selected in error, or their
"KRN",19,5840,1,3,0)
SSN is invalid due to being a pseudo SSN & should be updated by MAS, or
"KRN",19,5840,1,4,0)
the patient is a collateral & should not be tracked in the HBHC
"KRN",19,5840,1,5,0)
Information System.  This report can be used to determine which case
"KRN",19,5840,1,6,0)
scenario applies to the patient & appropriate corrective action taken
"KRN",19,5840,1,7,0)
to eliminate the pseudo SSN from HBHC records.  Report includes patient
"KRN",19,5840,1,8,0)
name & SSN & prints in 80 column format.
"KRN",19,5840,25)
HBHCRP14
"KRN",19,5840,598000)
3
"KRN",19,5840,"U")
PSEUDO SOCIAL SECURITY NUMBER 
"KRN",19,9318,-1)
0^32
"KRN",19,9318,0)
HBHC EDIT PROVIDER (631.4)^Provider File Data Entry^^E^^^^^^^^
"KRN",19,9318,1,0)
^^2^2^2970207^^^^
"KRN",19,9318,1,1,0)
This option allows entering/editing of the provider data in the HBHC
"KRN",19,9318,1,2,0)
Provider File (HBHC(631.4)).
"KRN",19,9318,30)
HBHC(631.4,
"KRN",19,9318,31)
AEMQL
"KRN",19,9318,50)
HBHC(631.4,
"KRN",19,9318,51)
[HBHC EDIT PROVIDER (631.4)]
"KRN",19,9318,99)
55795,36640
"KRN",19,9318,"U")
PROVIDER FILE DATA ENTRY
"KRN",19,9319,-1)
0^33
"KRN",19,9319,0)
HBHC EDIT CLINIC (631.6)^Clinic File Data Entry^^E^^^^^^^^^^
"KRN",19,9319,1,0)
^^2^2^2970207^^^^
"KRN",19,9319,1,1,0)
This option allows entering/editing of the clinic data in the HBHC
"KRN",19,9319,1,2,0)
Clinic File (HBHC(631.6)).
"KRN",19,9319,20)

"KRN",19,9319,30)
HBHC(631.6,
"KRN",19,9319,31)
AELMQZ
"KRN",19,9319,34)

"KRN",19,9319,35)

"KRN",19,9319,50)
HBHC(631.6,
"KRN",19,9319,51)
.01
"KRN",19,9319,99)
55774,28837
"KRN",19,9319,"U")
CLINIC FILE DATA ENTRY
"KRN",19,9320,-1)
0^31
"KRN",19,9320,0)
HBHC EDIT SYSTEM PARAMETERS^System Parameters Edit^^R^^^^^^^^
"KRN",19,9320,1,0)
15^^13^13^2970207^^^^
"KRN",19,9320,1,1,0)
This option allows entering/editing of the system parameters in the
"KRN",19,9320,1,2,0)
HBHC System Parameters file (631.9).
"KRN",19,9320,1,3,0)
 
"KRN",19,9320,1,4,0)
The parameter Number of Visit Days to Scan is used by the system as
"KRN",19,9320,1,5,0)
a starting point of how many days to include when records are being
"KRN",19,9320,1,6,0)
created in the HBHC Visit File (HBHC(632)) using the appointment data
"KRN",19,9320,1,7,0)
entered via the Appointment Management [HBHC APPOINTMENT] option.  This
"KRN",19,9320,1,8,0)
parameter must be a number between 7 and 365 inclusive, but as a rule,
"KRN",19,9320,1,9,0)
the lowest number that accurately reflects the appointment data 
"KRN",19,9320,1,10,0)
timeliness should be entered  (e.g. if appointments are entered daily,
"KRN",19,9320,1,11,0)
then 7 would be appropriate).
"KRN",19,9320,1,12,0)
 
"KRN",19,9320,1,13,0)
All other System Parameter fields are uneditable.
"KRN",19,9320,3.91,0)
^19.391
"KRN",19,9320,25)
HBHCEDSP
"KRN",19,9320,99)
55523,32584
"KRN",19,9320,99.1)
58241,3032
"KRN",19,9320,"U")
SYSTEM PARAMETERS EDIT
"KRN",19,9321,-1)
0^34
"KRN",19,9321,0)
HBHC EDIT HBHC TEAM (633)^Team File Data Entry^^E^^^^^^^^
"KRN",19,9321,1,0)
^^2^2^2970207^^^^
"KRN",19,9321,1,1,0)
This option allows entering/editing of the HBPC team data in the HBHC
"KRN",19,9321,1,2,0)
Team File (HBHC(633)).
"KRN",19,9321,30)
HBHC(633,
"KRN",19,9321,31)
AELMQ
"KRN",19,9321,50)
HBHC(633,
"KRN",19,9321,51)
.01
"KRN",19,9321,"U")
TEAM FILE DATA ENTRY
"KRN",19,9332,-1)
0^2
"KRN",19,9332,0)
HBHC APPOINTMENT^Appointment Management^^A^^^^^^^^^^1^1
"KRN",19,9332,1,0)
^^2^2^2970331^^^^
"KRN",19,9332,1,1,0)
This option utilizes the MAS Scheduling Option, Appointment Management
"KRN",19,9332,1,2,0)
[SDAM APPT MGT], for entry of appointment data.
"KRN",19,9332,15)
D HDLKILL^SDAMEVT
"KRN",19,9332,20)
D HDLKILL^SDAMEVT,EN^SDAM
"KRN",19,9332,25)

"KRN",19,9332,99)
57020,34008
"KRN",19,9332,99.1)
58241,3032
"KRN",19,9332,"U")
APPOINTMENT MANAGEMENT
"KRN",19,9334,-1)
0^3
"KRN",19,9334,0)
HBHCADM^Evaluation/Admission Data Entry^^R^^^^^^^^
"KRN",19,9334,1,0)
^^2^2^2970207^^^^
"KRN",19,9334,1,1,0)
This option allows entering/editing of the evaluation/admission
"KRN",19,9334,1,2,0)
data in the HBHC Patient File (HBHC(631)).
"KRN",19,9334,25)
HBHCADM
"KRN",19,9334,99)
55797,38239
"KRN",19,9334,"U")
EVALUATION/ADMISSION DATA ENTR
"KRN",19,9336,-1)
0^4
"KRN",19,9336,0)
HBHCDIS^Discharge Data Entry^^R^^^^^^^^
"KRN",19,9336,1,0)
^^2^2^2970207^^^^
"KRN",19,9336,1,1,0)
This option allows entering/editing of the discharge data in the
"KRN",19,9336,1,2,0)
HBHC Patient File (HBHC(631)).
"KRN",19,9336,25)
HBHCDIS
"KRN",19,9336,"U")
DISCHARGE DATA ENTRY
"KRN",19,9337,-1)
0^8
"KRN",19,9337,0)
HBHCRP2^Evaluation/Admission Data Report by Patient  (80)^^R^^^^^^^^
"KRN",19,9337,1,0)
^^3^3^2970207^^^^
"KRN",19,9337,1,1,0)
This option prints the HBPC Patient Evaluation/Admission Data Report.
"KRN",19,9337,1,2,0)
The report includes all evaluation/admission (Form 3) fields, plus
"KRN",19,9337,1,3,0)
Case Manager and prints in 80 column format.
"KRN",19,9337,25)
HBHCRP2
"KRN",19,9337,598000)
3
"KRN",19,9337,"U")
EVALUATION/ADMISSION DATA REPO
"KRN",19,9338,-1)
0^9
"KRN",19,9338,0)
HBHCRP3^Patient Visit Data Report  (80)^^R^^^^^^^^
"KRN",19,9338,1,0)
^19.06^3^3^3000421^^^^
"KRN",19,9338,1,1,0)
This option prints the HBPC Patient Visit Data Report.  The user is 
"KRN",19,9338,1,2,0)
prompted to enter the date range for inclusion on the report.  The
"KRN",19,9338,1,3,0)
report includes all visit (Form 4) fields and prints in 80 column format.
"KRN",19,9338,25)
HBHCRP3
"KRN",19,9338,99)
55775,38173
"KRN",19,9338,598000)
3
"KRN",19,9338,"U")
PATIENT VISIT DATA REPORT  (80
"KRN",19,9340,-1)
0^10
"KRN",19,9340,0)
HBHCRP5^Discharge Data Report by Patient  (80)^^R^^^^^^^^
"KRN",19,9340,1,0)
^^3^3^2970207^^^^
"KRN",19,9340,1,1,0)
This option prints the HBPC Patient Discharge Data Report.  The 
"KRN",19,9340,1,2,0)
report includes all discharge (Form 5) fields and prints in 80 
"KRN",19,9340,1,3,0)
column format.
"KRN",19,9340,25)
HBHCRP5
"KRN",19,9340,598000)
3
"KRN",19,9340,"U")
DISCHARGE DATA REPORT BY PATIE
"KRN",19,9342,-1)
0^12
"KRN",19,9342,0)
HBHCRP7^Admissions/Discharges by Date Range Report  (132)^^R^^^^^^^^
"KRN",19,9342,1,0)
^^5^5^2970207^^^^
"KRN",19,9342,1,1,0)
This option prints the HBPC Admissions or Discharges by Date Range 
"KRN",19,9342,1,2,0)
Report.  The report is sorted by Admission/Discharge Date and includes:
"KRN",19,9342,1,3,0)
Admission/Discharge Date, Patient Name, SSN, and ICD9 Code and Diagnosis
"KRN",19,9342,1,4,0)
Text (Primary Diagnosis @ Admission/Discharge), with Totals.  Report 
"KRN",19,9342,1,5,0)
prints in 132 column format.
"KRN",19,9342,25)
HBHCRP7
"KRN",19,9342,598000)
3
"KRN",19,9342,"U")
ADMISSIONS/DISCHARGES BY DATE 
"KRN",19,9344,-1)
0^14
"KRN",19,9344,0)
HBHCRP4^Visit Data by Date Range Report  (80)^^R^^^^^^^^
"KRN",19,9344,1,0)
^19.06^5^5^3000421^^^^
"KRN",19,9344,1,1,0)
This option prints the HBPC Visit Data by Date Range Report.  The
"KRN",19,9344,1,2,0)
report is sorted by provider, then by visit date and includes:
"KRN",19,9344,1,3,0)
Provider Name, Visit Date, Patient Last Name, SSN, DX, & CPT Codes with
"KRN",19,9344,1,4,0)
Modifiers, with totals by provider & all providers total if All providers
"KRN",19,9344,1,5,0)
included on report.  Report prints in 80 column format. 
"KRN",19,9344,25)
HBHCRP4
"KRN",19,9344,99)
55775,28786
"KRN",19,9344,598000)
3
"KRN",19,9344,"U")
VISIT DATA BY DATE RANGE REPOR
"KRN",19,9345,-1)
0^24
"KRN",19,9345,0)
HBHCRP6^Case Manager Census Report  (132)^^R^^^^^^^^
"KRN",19,9345,1,0)
^^7^7^2970207^^^^
"KRN",19,9345,1,1,0)
This option prints the HBPC Case Manager Census Report.  The report
"KRN",19,9345,1,2,0)
can be run for All or Individual Case Managers.  The user is prompted
"KRN",19,9345,1,3,0)
to enter the date range for inclusion on the report.  The report is 
"KRN",19,9345,1,4,0)
sorted by Case Manager and includes:  Case Manager, Patient Name, SSN,
"KRN",19,9345,1,5,0)
Admission Date, Street Address, City, ZIP Code, and Phone, with Totals
"KRN",19,9345,1,6,0)
for each Case Manager and Final Totals if 'All' selected.  Report
"KRN",19,9345,1,7,0)
prints in 132 column format.
"KRN",19,9345,25)
HBHCRP6
"KRN",19,9345,598000)
3
"KRN",19,9345,"U")
CASE MANAGER CENSUS REPORT  (1
"KRN",19,9346,-1)
0^26
"KRN",19,9346,0)
HBHCFILE^Build/Verify Transmission File^^R^^^^^^^^
"KRN",19,9346,1,0)
11^^12^12^2970207^^^^
"KRN",19,9346,1,1,0)
This option builds the HBPC Transmission Data file (HBHC(634)) used
"KRN",19,9346,1,2,0)
to transmit to Austin.  The records included in this file are verified
"KRN",19,9346,1,3,0)
for completeness and also for validity  (e.g.  no admission data should
"KRN",19,9346,1,4,0)
be included if the patient was rejected from the HBPC program).
"KRN",19,9346,1,5,0)
 
"KRN",19,9346,1,6,0)
If errors/omissions are found, the records in error are written to
"KRN",19,9346,1,7,0)
another file and must be corrected before transmission is allowed.
"KRN",19,9346,1,8,0)
Once the errors are corrected, this option must be run again to 
"KRN",19,9346,1,9,0)
add the corrected records to the transmission file.  This process
"KRN",19,9346,1,10,0)
(build file, correct errors, add corrected records via build file) 
"KRN",19,9346,1,11,0)
may be repeated as necessary until all records are valid and included
"KRN",19,9346,1,12,0)
in the Transmission Data file.
"KRN",19,9346,25)
HBHCFILE
"KRN",19,9346,"U")
BUILD/VERIFY TRANSMISSION FILE
"KRN",19,9349,-1)
0^27
"KRN",19,9349,0)
HBHCRP1^Form Errors Report  (80)^^R^^^^^^^^
"KRN",19,9349,1,0)
^^6^6^2970624^^^^
"KRN",19,9349,1,1,0)
This option prints the HBPC Form Errors Report.  The errors were found when
"KRN",19,9349,1,2,0)
the Build/Verify Transmission File [HBHCFILE] option was run.  The report
"KRN",19,9349,1,3,0)
is sorted by Form, then by Patient Name and includes: Patient File IEN
"KRN",19,9349,1,4,0)
(internal entry number), Patient Name, Last Four, and corresponding Date. 
"KRN",19,9349,1,5,0)
Visits also contain:  Clinic Name, Error, Provider, ICD9 Diagnosis, and CPT
"KRN",19,9349,1,6,0)
Code fields.  Report prints in 80 column format. 
"KRN",19,9349,25)
HBHCRP1A
"KRN",19,9349,99)
55493,57972
"KRN",19,9349,598000)
3
"KRN",19,9349,"U")
FORM ERRORS REPORT  (80)
"KRN",19,9350,-1)
0^28
"KRN",19,9350,0)
HBHCUPD^Edit Form Errors Data^^R^^^^^^^^
"KRN",19,9350,1,0)
^^7^7^2970710^^^^
"KRN",19,9350,1,1,0)
This option allows editing of the HBPC Form Errors Data.  The user
"KRN",19,9350,1,2,0)
is prompted for a patient, then the routine prompts for the fields
"KRN",19,9350,1,3,0)
that are missing or invalid in each record.  These errors are found
"KRN",19,9350,1,4,0)
when the Build/Verify Transmission File [HBHCFILE] option is run and
"KRN",19,9350,1,5,0)
must be corrected before transmission to Austin is allowed.  Visit error 
"KRN",19,9350,1,6,0)
corrections must be made using PCE options.  Then the Edit Form Errors
"KRN",19,9350,1,7,0)
option must be accessed to clean up the Visit Error file. 
"KRN",19,9350,25)
HBHCUPD
"KRN",19,9350,"U")
EDIT FORM ERRORS DATA
"KRN",19,9351,-1)
0^29
"KRN",19,9351,0)
HBHCXMT^Transmit File to Austin^^R^^HBHC TRANSMIT^^^^^^
"KRN",19,9351,1,0)
^^6^6^2971010^^^
"KRN",19,9351,1,1,0)
This option creates and transmits the HBPC MailMan message using the
"KRN",19,9351,1,2,0)
Transmission Data in HBHC(634) to Austin.  All Form Errors found via
"KRN",19,9351,1,3,0)
the Build/Verify Transmission File option must be corrected before
"KRN",19,9351,1,4,0)
transmission to Austin is allowed.  A confirmation message will be
"KRN",19,9351,1,5,0)
returned from Austin upon receipt of the HBPC Transmission.  This option is
"KRN",19,9351,1,6,0)
locked with the HBHC TRANSMIT security key. 
"KRN",19,9351,25)
HBHCXMT
"KRN",19,9351,"U")
TRANSMIT FILE TO AUSTIN
"KRN",19,9352,-1)
0^35
"KRN",19,9352,0)
HBHCRP8^HBPC Provider File Report  (132)^^R^^^^^^^^
"KRN",19,9352,1,0)
^^4^4^2970710^^^^
"KRN",19,9352,1,1,0)
This option prints the HBPC Provider File Report.  The report is
"KRN",19,9352,1,2,0)
sorted by Provider Name and includes:  Provider Name, Provider
"KRN",19,9352,1,3,0)
Number, Degree, Grade/Step, HBPC FTEE, HBPC Team, and Inactive Provider 
"KRN",19,9352,1,4,0)
Number.  Report prints in 132 column format. 
"KRN",19,9352,25)
HBHCRP8
"KRN",19,9352,99)
55775,51850
"KRN",19,9352,598000)
3
"KRN",19,9352,"U")
HBPC PROVIDER FILE REPORT  (13
"KRN",19,9353,-1)
0^38
"KRN",19,9353,0)
HBHCRXMT^Re-Transmit File to Austin^^R^^^^^^^^
"KRN",19,9353,1,0)
^^7^7^2970207^^
"KRN",19,9353,1,1,0)
This option allows re-transmission of the same HBPC data included in the
"KRN",19,9353,1,2,0)
last file transmitted to Austin, provided that Build/Verify Transmission
"KRN",19,9353,1,3,0)
File has NOT been run again since the last transmission.  This option
"KRN",19,9353,1,4,0)
should be used only under special circumstances, such as a transmission
"KRN",19,9353,1,5,0)
failure, and should be coordinated with Austin via your IRM technical
"KRN",19,9353,1,6,0)
support person.  This option requires cautious use due to the possibility
"KRN",19,9353,1,7,0)
of duplicate records in Austin.
"KRN",19,9353,25)
HBHCRXMT
"KRN",19,9353,"U")
RE-TRANSMIT FILE TO AUSTIN
"KRN",19,9354,-1)
0^7
"KRN",19,9354,0)
HBHC MANAGER MENU^Manager Menu^^M^^HBHC MANAGER^^^^^^
"KRN",19,9354,1,0)
^^12^12^2970702^^^^
"KRN",19,9354,1,1,0)
This option is the HBPC Manager Menu.  The option includes:
"KRN",19,9354,1,2,0)

"KRN",19,9354,1,3,0)
  System Parameters Edit [HBHC EDIT SYSTEM PARAMETERS]
"KRN",19,9354,1,4,0)
  Provider File Data Entry [HBHC EDIT PROVIDER (631.4)]
"KRN",19,9354,1,5,0)
  Clinic File Data Entry [HBHC EDIT CLINIC (631.6)]
"KRN",19,9354,1,6,0)
  Team File Data Entry [HBHC EDIT HBHC TEAM (633)]
"KRN",19,9354,1,7,0)
  Print HBPC Provider File Report  (132) [HBHCRP8]
"KRN",19,9354,1,8,0)
  Pseudo Social Security Number Report  (80) [HBHCRP14]
"KRN",19,9354,1,9,0)
  QA Indicator Report  (80) [HBHCRP13]
"KRN",19,9354,1,10,0)
  Re-Transmit File to Austin  [HBHCRXMT]
"KRN",19,9354,1,11,0)
 
"KRN",19,9354,1,12,0)
This option is locked with the HBHC MANAGER security key.
"KRN",19,9354,10,0)
^19.01IP^7^7
"KRN",19,9354,10,1,0)
9318^^2
"KRN",19,9354,10,1,"^")
HBHC EDIT PROVIDER (631.4)
"KRN",19,9354,10,2,0)
9319^^3
"KRN",19,9354,10,2,"^")
HBHC EDIT CLINIC (631.6)
"KRN",19,9354,10,3,0)
9321^^4
"KRN",19,9354,10,3,"^")
HBHC EDIT HBHC TEAM (633)
"KRN",19,9354,10,4,0)
9320^^1
"KRN",19,9354,10,4,"^")
HBHC EDIT SYSTEM PARAMETERS
"KRN",19,9354,10,5,0)
9352^^5
"KRN",19,9354,10,5,"^")
HBHCRP8
"KRN",19,9354,10,6,0)
9353^^7
"KRN",19,9354,10,6,"^")
HBHCRXMT
"KRN",19,9354,10,7,0)
5840^^6
"KRN",19,9354,10,7,"^")
HBHXRP14
"KRN",19,9354,99)
58203,37631
"KRN",19,9354,99.1)
57886,84821
"KRN",19,9354,"U")
MANAGER MENU
"KRN",19,9355,-1)
0^6
"KRN",19,9355,0)
HBHC TRANSMISSION MENU^Transmission Menu^^M^^^^^^^^
"KRN",19,9355,1,0)
^^8^8^2971010^^^^
"KRN",19,9355,1,1,0)
This option is the HBPC Transmission Menu.  The menu includes:
"KRN",19,9355,1,2,0)
 
"KRN",19,9355,1,3,0)
  Build/Verify Transmission File  [HBHCFILE]
"KRN",19,9355,1,4,0)
  Form Errors Report  [HBHCRP1]
"KRN",19,9355,1,5,0)
  Edit Form Errors Data  [HBHCUPD]
"KRN",19,9355,1,6,0)
  Transmit File to Austin  [HBHCXMT]
"KRN",19,9355,1,7,0)
    **>  Locked with HBHC TRANSMIT
"KRN",19,9355,1,8,0)
  Print Transmit History Report  (80) [HBHCR15A]
"KRN",19,9355,10,0)
^19.01PI^5^5
"KRN",19,9355,10,1,0)
9346^^1
"KRN",19,9355,10,1,"^")
HBHCFILE
"KRN",19,9355,10,2,0)
9349^^2
"KRN",19,9355,10,2,"^")
HBHCRP1
"KRN",19,9355,10,3,0)
9350^^3
"KRN",19,9355,10,3,"^")
HBHCUPD
"KRN",19,9355,10,4,0)
9351^^4
"KRN",19,9355,10,4,"^")
HBHCXMT
"KRN",19,9355,10,5,0)
11263^^5
"KRN",19,9355,10,5,"^")
HBHCR15A
"KRN",19,9355,99)
58203,37633
"KRN",19,9355,99.1)
57860,84797
"KRN",19,9355,"U")
TRANSMISSION MENU
"KRN",19,9356,-1)
0^1
"KRN",19,9356,0)
HBHC INFORMATION SYSTEM MENU^HBPC Information System Menu^^M^^^^^^^^
"KRN",19,9356,1,0)
^^15^15^2970207^^^^
"KRN",19,9356,1,1,0)
This option is the HBPC Information System Menu.  The menu includes:
"KRN",19,9356,1,2,0)
 
"KRN",19,9356,1,3,0)
  Appointment Management  [HBHC APPOINTMENT]
"KRN",19,9356,1,4,0)
  Cancel Appointment  [HBHC CANCEL APPOINTMENT]
"KRN",19,9356,1,5,0)
  Enter/Edit Evaluation/Admission Data  [HBHCADM]
"KRN",19,9356,1,6,0)
  Enter/Edit Visit Data  [HBHC VISIT]
"KRN",19,9356,1,7,0)
  Enter/Edit Discharge Data  [HBHCDIS]
"KRN",19,9356,1,8,0)
  Print Patient Evaluation/Admission Data Report  [HBHCRP2]
"KRN",19,9356,1,9,0)
  Print Patient Visit Data Report  [HBHCRP3]
"KRN",19,9356,1,10,0)
  Print Patient Discharge Data Report  [HBHCRP5]
"KRN",19,9356,1,11,0)
  Print Admissions/Discharges by Date Range Report  [HBHCRP7]
"KRN",19,9356,1,12,0)
  Print Visit Data by Date Range Report  [HBHCRP4]
"KRN",19,9356,1,13,0)
  Print Case Manager Census Report  [HBHCRP6]
"KRN",19,9356,1,14,0)
  Transmission Menu  [HBHC TRANSMISSION MENU]  Locked:  HBHC TRANSMIT
"KRN",19,9356,1,15,0)
  Manager Menu  [HBHC MANAGER MENU]  Locked:  HBHC MANAGER
"KRN",19,9356,10,0)
^19.01PI^15^15
"KRN",19,9356,10,3,0)
9334^^2
"KRN",19,9356,10,3,"^")
HBHCADM
"KRN",19,9356,10,5,0)
9336^^3
"KRN",19,9356,10,5,"^")
HBHCDIS
"KRN",19,9356,10,12,0)
9355^^5
"KRN",19,9356,10,12,"^")
HBHC TRANSMISSION MENU
"KRN",19,9356,10,13,0)
9354^^6
"KRN",19,9356,10,13,"^")
HBHC MANAGER MENU
"KRN",19,9356,10,14,0)
2893432^^4
"KRN",19,9356,10,14,"^")
HBHC REPORTS MENU
"KRN",19,9356,10,15,0)
9332^^1
"KRN",19,9356,10,15,"^")
HBHC APPOINTMENT
"KRN",19,9356,99)
58203,37634
"KRN",19,9356,99.1)
58241,2924
"KRN",19,9356,"U")
HBPC INFORMATION SYSTEM MENU
"KRN",19,11263,-1)
0^30
"KRN",19,11263,0)
HBHCR15A^Print Transmit History Report  (80)^^R^^^^^^^^
"KRN",19,11263,1,0)
^^11^11^2970702^^^^
"KRN",19,11263,1,1,0)
This option prints the HBPC Transmit History Report.  The user is prompted
"KRN",19,11263,1,2,0)
for date from within last 12 transmit batches & also selects forms for
"KRN",19,11263,1,3,0)
inclusion on the report.  The report includes:  form number, patient name,
"KRN",19,11263,1,4,0)
last four, form date, plus Action on form 3 (admission), Provider Number &
"KRN",19,11263,1,5,0)
Provider Name on visits (form 4), & Admission or Discharge on form 6
"KRN",19,11263,1,6,0)
(corrections). 
"KRN",19,11263,1,7,0)
 
"KRN",19,11263,1,8,0)
A Transmit History Report for the current transmission batch can be
"KRN",19,11263,1,9,0)
generated automatically from the Transmit File to Austin option [HBHCXMT]
"KRN",19,11263,1,10,0)
if a default printer is defined in System Parameters file (631.9).  If no
"KRN",19,11263,1,11,0)
printer is defined, no report will be generated at transmit time. 
"KRN",19,11263,25)
HBHCR15A
"KRN",19,11263,598000)
3
"KRN",19,11263,"U")
PRINT TRANSMIT HISTORY REPORT 
"KRN",19,11307,-1)
0^13
"KRN",19,11307,0)
HBHCRP16^Rejections from HBPC Program Report  (132)^^R^^^^^^^^
"KRN",19,11307,1,0)
^^5^5^2970509^^^^
"KRN",19,11307,1,1,0)
This option prints the HBPC Rejections from Program Report.  (Admit/Reject
"KRN",19,11307,1,2,0)
Action field = Reject)  The user is prompted to enter the date range for
"KRN",19,11307,1,3,0)
inclusion on the report.  The report is sorted by patient name and
"KRN",19,11307,1,4,0)
includes:  Patient Name, SSN, Date, and Reject/Withdraw Reason.  Report
"KRN",19,11307,1,5,0)
prints in 132 column format. 
"KRN",19,11307,25)
HBHCRP16
"KRN",19,11307,598000)
3
"KRN",19,11307,"U")
REJECTIONS FROM HBPC PROGRAM R
"KRN",19,2892965,-1)
0^25
"KRN",19,2892965,0)
HBHCRP9^Provider Census Report  (132)^^R^^^^^^^^
"KRN",19,2892965,1,0)
^^8^8^2970207^^^^
"KRN",19,2892965,1,1,0)
This option prints the HBPC Provider Census Report.  The report can
"KRN",19,2892965,1,2,0)
be run for All or Individual Providers.  The user is prompted to enter
"KRN",19,2892965,1,3,0)
the date range of visits for inclusion on the report.  Only patients
"KRN",19,2892965,1,4,0)
with a current admission will be included.  The report is sorted by
"KRN",19,2892965,1,5,0)
Provider and includes:  Provider Name, Provider Number, Patient Name,
"KRN",19,2892965,1,6,0)
SSN, Admission Date, Street Address, City, ZIP Code, and Phone, with
"KRN",19,2892965,1,7,0)
Totals for each Provider and Final Totals if 'All' selected.  Report
"KRN",19,2892965,1,8,0)
prints in 132 column format.
"KRN",19,2892965,25)
HBHCRP9
"KRN",19,2892965,598000)
3
"KRN",19,2892965,"U")
PROVIDER CENSUS REPORT  (132)
"KRN",19,2892966,-1)
0^21
"KRN",19,2892966,0)
HBHCRP10^Program Census Report  (80)^^R^^^^^^^^
"KRN",19,2892966,1,0)
^^4^4^2970207^^^^
"KRN",19,2892966,1,1,0)
This option prints the HBPC Program Census Report.  The user is prompted
"KRN",19,2892966,1,2,0)
to enter the date range for inclusion on the report.  The report is
"KRN",19,2892966,1,3,0)
sorted by patient name and includes:  Patient Name, SSN, and Admission
"KRN",19,2892966,1,4,0)
Date.  Report prints in 80 column format.
"KRN",19,2892966,25)
HBHCRP10
"KRN",19,2892966,99)
55776,30342
"KRN",19,2892966,598000)
3
"KRN",19,2892966,"U")
PROGRAM CENSUS REPORT  (80)
"KRN",19,2892967,-1)
0^23
"KRN",19,2892967,0)
HBHCRP11^Team Census Report  (80)^^R^^^^^^^^
"KRN",19,2892967,1,0)
^^5^5^2970207^^^^
"KRN",19,2892967,1,1,0)
This option prints the HBPC Team Census Report.  The user is prompted
"KRN",19,2892967,1,2,0)
to enter the date range for inclusion on the report.  The report is
"KRN",19,2892967,1,3,0)
sorted by Team and includes:  Team Name, Patient Name, SSN, and
"KRN",19,2892967,1,4,0)
Admission Date, with Totals for each Team and Final Totals for all
"KRN",19,2892967,1,5,0)
Teams.  Report prints in 80 column format.
"KRN",19,2892967,25)
HBHCRP11
"KRN",19,2892967,598000)
3
"KRN",19,2892967,"U")
TEAM CENSUS REPORT  (80)
"KRN",19,2892968,-1)
0^11
"KRN",19,2892968,0)
HBHCRP12^Episode of Care/Length of Stay Report  (80)^^R^^^^^^^^
"KRN",19,2892968,1,0)
^^5^5^2970207^^^^
"KRN",19,2892968,1,1,0)
This option prints the HBPC Episode of Care/Length of Stay Report.  The
"KRN",19,2892968,1,2,0)
user is prompted to enter the date range for inclusion on the report.
"KRN",19,2892968,1,3,0)
The report is sorted by patient and includes:  Patient Name, SSN,
"KRN",19,2892968,1,4,0)
Admission Date, Discharge Date, and Length of Stay.  Report prints in
"KRN",19,2892968,1,5,0)
80 columm format.
"KRN",19,2892968,25)
HBHCRP12
"KRN",19,2892968,99)
55782,38792
"KRN",19,2892968,598000)
3
"KRN",19,2892968,"U")
EPISODE OF CARE/LENGTH OF STAY
"KRN",19,2893432,-1)
0^5
"KRN",19,2893432,0)
HBHC REPORTS MENU^Reports Menu^^M^^^^^^^^
"KRN",19,2893432,1,0)
^^13^13^2971118^^^^
"KRN",19,2893432,1,1,0)
This option is the HBPC Reports Menu.  The option includes:
"KRN",19,2893432,1,2,0)

"KRN",19,2893432,1,3,0)
  Evaluation/Admission Data Report by Patient  (80) [HBHCRP2]
"KRN",19,2893432,1,4,0)
  Patient Visit Data Report  (80) [HBHCRP3]
"KRN",19,2893432,1,5,0)
  Discharge Data Report by Patient  (80) [HBHCRP5]
"KRN",19,2893432,1,6,0)
  Episode of Care/Length of Stay Report  (80) [HBHCRP12]
"KRN",19,2893432,1,7,0)
  Admissions/Discharges by Date Range Report  (132) [HBHCRP7]
"KRN",19,2893432,1,8,0)
  Rejections from HBPC Program Report  (80) [HBHCRP16]
"KRN",19,2893432,1,9,0)
  Visit Data by Date Range Report  (80) [HBHCRP4]
"KRN",19,2893432,1,10,0)
  CPT Code Summary Report  (80) [HBHCRP17]
"KRN",19,2893432,1,11,0)
  ICD9 Code/Dx Text by Date Range Report  (80) [HBHCR19A]
"KRN",19,2893432,1,12,0)
  Unique Patients by Date Range Summary Report  (80) [HBHCRP20]
"KRN",19,2893432,1,13,0)
  Census Reports Menu ... [HBHC CENSUS REPORTS MENU]
"KRN",19,2893432,10,0)
^19.01PI^21^21
"KRN",19,2893432,10,1,0)
9337^^1
"KRN",19,2893432,10,1,"^")
HBHCRP2
"KRN",19,2893432,10,2,0)
9338^^2
"KRN",19,2893432,10,2,"^")
HBHCRP3
"KRN",19,2893432,10,3,0)
9340^^3
"KRN",19,2893432,10,3,"^")
HBHCRP5
"KRN",19,2893432,10,4,0)
2892968^^4
"KRN",19,2893432,10,4,"^")
HBHCRP12
"KRN",19,2893432,10,9,0)
9342^^5
"KRN",19,2893432,10,9,"^")
HBHCRP7
"KRN",19,2893432,10,10,0)
9344^^7
"KRN",19,2893432,10,10,"^")
HBHCRP4
"KRN",19,2893432,10,14,0)
11307^^6
"KRN",19,2893432,10,14,"^")
HBHCRP16
"KRN",19,2893432,10,16,0)
2894448^^13
"KRN",19,2893432,10,16,"^")
HBHC CENSUS REPORTS MENU
"KRN",19,2893432,10,17,0)
2894447^^8
"KRN",19,2893432,10,17,"^")
HBHCRP17
"KRN",19,2893432,10,18,0)
2894634^^10
"KRN",19,2893432,10,18,"^")
HBHCR19A
"KRN",19,2893432,10,19,0)
2894817^^11
"KRN",19,2893432,10,19,"^")
HBHCRP20
"KRN",19,2893432,10,20,0)
2895381^^9
"KRN",19,2893432,10,20,"^")
HBHCRP22
"KRN",19,2893432,10,21,0)
2895379^^12
"KRN",19,2893432,10,21,"^")
HBHCRP21
"KRN",19,2893432,99)
58203,37637
"KRN",19,2893432,99.1)
58241,3046
"KRN",19,2893432,"U")
REPORTS MENU
"KRN",19,2894447,-1)
0^15
"KRN",19,2894447,0)
HBHCRP17^CPT Code Summary Report  (80)^^R^^^^^^^^HOSPITAL BASED HOME CARE
"KRN",19,2894447,1,0)
^^4^4^2980707^^^
"KRN",19,2894447,1,1,0)
This option prints the HBPC CPT Code Summary Report.  The user is prompted
"KRN",19,2894447,1,2,0)
to enter the date range, and CPT Code(s) or range of codes for inclusion on
"KRN",19,2894447,1,3,0)
the report.  The report is sorted by CPT Code with totals for each CPT Code
"KRN",19,2894447,1,4,0)
plus a grand total.  Report prints in 80 column format. 
"KRN",19,2894447,25)
HBHCRP17
"KRN",19,2894447,598000)
3
"KRN",19,2894447,"U")
CPT CODE SUMMARY REPORT  (80)
"KRN",19,2894448,-1)
0^20
"KRN",19,2894448,0)
HBHC CENSUS REPORTS MENU^Census Reports Menu^^M^^^^^^^^HOSPITAL BASED HOME CARE
"KRN",19,2894448,1,0)
^^9^9^2970702^
"KRN",19,2894448,1,1,0)
This option is the HBPC Census Reports Menu.  The menu includes:
"KRN",19,2894448,1,2,0)

"KRN",19,2894448,1,3,0)
  Program Census Report  (80) [HBHCRP10]
"KRN",19,2894448,1,4,0)
  Active Census with ICD9 Code/Text Report  (132) [HBHCRP18]
"KRN",19,2894448,1,5,0)
  Team Census Report  (80) [HBHCRP11]
"KRN",19,2894448,1,6,0)
  Case Manager Census Report  (132) [HBHCRP6]
"KRN",19,2894448,1,7,0)
  Provider Census Report  (132) [HBHCRP9]
"KRN",19,2894448,1,8,0)

"KRN",19,2894448,1,9,0)
This option is accessible from the HBHC REPORTS MENU option.
"KRN",19,2894448,10,0)
^19.01IP^5^5
"KRN",19,2894448,10,1,0)
2892966^^1
"KRN",19,2894448,10,1,"^")
HBHCRP10
"KRN",19,2894448,10,2,0)
3518^^2
"KRN",19,2894448,10,2,"^")
HBHCRP18
"KRN",19,2894448,10,3,0)
2892967^^3
"KRN",19,2894448,10,3,"^")
HBHCRP11
"KRN",19,2894448,10,4,0)
9345^^4
"KRN",19,2894448,10,4,"^")
HBHCRP6
"KRN",19,2894448,10,5,0)
2892965^^5
"KRN",19,2894448,10,5,"^")
HBHCRP9
"KRN",19,2894448,99)
58203,37635
"KRN",19,2894448,"U")
CENSUS REPORTS MENU
"KRN",19,2894634,-1)
0^17
"KRN",19,2894634,0)
HBHCR19A^ICD9 Code/Dx Text by Date Range Report  (80)^^R^^^^^^^^HOSPITAL BASED HOME CARE
"KRN",19,2894634,1,0)
^^10^10^2971118^^^^
"KRN",19,2894634,1,1,0)
This option prints the HBPC ICD9 Code/Diagnosis Text by Date Range Report.
"KRN",19,2894634,1,2,0)
The user is prompted to enter the date range, and the ICD9 Code(s), or 
"KRN",19,2894634,1,3,0)
category of codes, for inclusion on the report.  If the user responds 'yes'
"KRN",19,2894634,1,4,0)
to the 'include All codes within category xxx' prompt, simply selecting ANY
"KRN",19,2894634,1,5,0)
code from the category will be category inclusive.  (e.g.  selecting 250.00
"KRN",19,2894634,1,6,0)
or 250.60 will produce the same report results) 
"KRN",19,2894634,1,7,0)

"KRN",19,2894634,1,8,0)
The report is sorted by ICD9 Code category, then alphabetically by patient
"KRN",19,2894634,1,9,0)
within category, with totals for each ICD9 Code category plus a grand
"KRN",19,2894634,1,10,0)
total.  Report prints in 80 column format. 
"KRN",19,2894634,25)
HBHCR19A
"KRN",19,2894634,598000)
2
"KRN",19,2894634,"U")
ICD9 CODE/DX TEXT BY DATE RANG
"KRN",19,2894817,-1)
0^18
"KRN",19,2894817,0)
HBHCRP20^Unique Patients by Date Range Summary Report  (80)^^R^^^^^^^^HOSPITAL BASED HOME CARE
"KRN",19,2894817,1,0)
^^4^4^2971118^
"KRN",19,2894817,1,1,0)
This option prints the HBPC Unique patients by Date Range Report.  The user is
"KRN",19,2894817,1,2,0)
prompted to enter the date range for inclusion on the report.  The report
"KRN",19,2894817,1,3,0)
prints separate totals for patients with single visit only or multiple visits,
"KRN",19,2894817,1,4,0)
plus grand total of unique patients.  Reports prints in 80 column format. 
"KRN",19,2894817,25)
HBHCRP20
"KRN",19,2894817,"U")
UNIQUE PATIENTS BY DATE RANGE 
"KRN",19,2895379,-1)
0^19
"KRN",19,2895379,0)
HBHCRP21^Total Visits by Date Range Report  (80)^^R^^^^^^^^HOSPITAL BASED HOME CARE
"KRN",19,2895379,1,0)
^^19^19^2980707^
"KRN",19,2895379,1,1,0)
This option prints HBPC Total Visits by Date Range Report.  User is prompted to
"KRN",19,2895379,1,2,0)
enter date range for inclusion on report.  Visit is omitted from report if
"KRN",19,2895379,1,3,0)
contains any of the following CPT codes: 
"KRN",19,2895379,1,4,0)
 
"KRN",19,2895379,1,5,0)
  99358  PROLONGED SERV, W/O CONTACT
"KRN",19,2895379,1,6,0)
  99359  PROLONGED SERV, W/O CONTACT
"KRN",19,2895379,1,7,0)
  99361  PHYSICIAN/TEAM CONFERENCE
"KRN",19,2895379,1,8,0)
  99362  PHYSICIAN/TEAM CONFERENCE
"KRN",19,2895379,1,9,0)
  99371  PHYSICIAN PHONE CONSULTATION
"KRN",19,2895379,1,10,0)
  99372  PHYSICIAN PHONE CONSULTATION
"KRN",19,2895379,1,11,0)
  99373  PHYSICIAN PHONE CONSULTATION
"KRN",19,2895379,1,12,0)
  99374  HOME HEALTH CARE SUPERVISION
"KRN",19,2895379,1,13,0)
  99375  HOME HEALTH CARE SUPERVISION
"KRN",19,2895379,1,14,0)
  99376  CARE PLAN OVERSIGHT/OVER 60
"KRN",19,2895379,1,15,0)

"KRN",19,2895379,1,16,0)
User can also select additional CPT codes to omit from report.  Report
"KRN",19,2895379,1,17,0)
includes:  Patient Name, SSN Last Four, Total Visits per patient, Date
"KRN",19,2895379,1,18,0)
(admitted to HBPC program) & Discharge Date (if applicable), with grand totals
"KRN",19,2895379,1,19,0)
of patients & visits.  Report prints in 80 column format. 
"KRN",19,2895379,25)
HBHCRP21
"KRN",19,2895379,"U")
TOTAL VISITS BY DATE RANGE REP
"KRN",19,2895381,-1)
0^16
"KRN",19,2895381,0)
HBHCRP22^Provider CPT Code Summary Report  (80)^^R^^^^^^^^HOSPITAL BASED HOME CARE
"KRN",19,2895381,1,0)
^^5^5^2980707^
"KRN",19,2895381,1,1,0)
This option prints HBPC Provider CPT Code Summary Report.  User is prompted
"KRN",19,2895381,1,2,0)
to enter date range, CPT code(s) (can be range of CPTs), & Provider for
"KRN",19,2895381,1,3,0)
inclusion on report.   Report includes:  Provider Name in header, CPT code(s)
"KRN",19,2895381,1,4,0)
with summary total(s) & grand total for all CPTs.  Report prints in 80 column
"KRN",19,2895381,1,5,0)
format. 
"KRN",19,2895381,25)
HBHCRP22
"KRN",19,2895381,"U")
PROVIDER CPT CODE SUMMARY REPO
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",455,-1)
1^1
"PKG",455,0)
HOSPITAL BASED HOME CARE^HBH^Hospital Based Home Care
"PKG",455,20,0)
^9.402P^^
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
1.0^2931101
"PKG",455,22,1,"PAH",1,0)
16^3000616^3779
"PKG",455,22,1,"PAH",1,1,0)
^^1^1^3000616
"PKG",455,22,1,"PAH",1,1,1,0)
This is HBH*1.0*16
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
19
"RTN","HBHCADM")
0^27^B18781454
"RTN","HBHCADM",1,0)
HBHCADM ; LR VAMC(IRMS)/MJT-HBHC eval/adm data entry, obtain demographic info from ^DPT, verify patient D/C from last episode/care before creating episode, calls ACTION^HBHCUTL, BIRTHYR^HBHCUTL1, SEXRACE^HBHCUTL1 ; May 2000
"RTN","HBHCADM",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**2,6,8,16**;NOV 01, 1993
"RTN","HBHCADM",3,0)
START ; Initialization
"RTN","HBHCADM",4,0)
 S HBHCFORM=3
"RTN","HBHCADM",5,0)
PROMPT ; Prompt user for patient name
"RTN","HBHCADM",6,0)
 K DIC,HBHCFLG,HBHCPRCT S DIC="^HBHC(631,",DIC(0)="AELMQZ" D ^DIC
"RTN","HBHCADM",7,0)
 G:Y=-1 EXIT
"RTN","HBHCADM",8,0)
 S HBHCDFN=+Y,HBHCDPT=$P(Y,U,2),HBHCDPT0=^DPT(HBHCDPT,0)
"RTN","HBHCADM",9,0)
 I $P(HBHCDPT0,U,9)'?9N W !!,"Patient has 'pseudo' social security number (SSN) on file.  If patient was",!,"not chosen in error, contact MAS to correct the invalid SSN.  Patient must",!,"have a valid SSN to be selected.",! H 3 G PROMPT
"RTN","HBHCADM",10,0)
 S HBHCXMT3=$P($G(^HBHC(631,HBHCDFN,1)),U,17)
"RTN","HBHCADM",11,0)
 I $P(^HBHC(631,HBHCDFN,0),U,40)]"" W *7,!!!,"***  Record contains Discharge data indicating a Complete Episode of Care  ***",!! H 3
"RTN","HBHCADM",12,0)
 I (HBHCXMT3]"")&(HBHCXMT3'="N") D FORMMSG^HBHCUTL1 G:$D(HBHCNHSP) EXIT G:HBHCPRCT'=1 PROMPT
"RTN","HBHCADM",13,0)
 I $P(Y,U,3) S $P(^HBHC(631,HBHCDFN,1),U,17)="N",^HBHC(631,"AE","N",HBHCDFN)="" S HBHCBXRF="" F  S HBHCBXRF=$O(^HBHC(631,"B",HBHCDPT,HBHCBXRF)) Q:(HBHCBXRF="")!(HBHCBXRF=HBHCDFN)  D CHECK
"RTN","HBHCADM",14,0)
 G:$D(HBHCFLG) PROMPT
"RTN","HBHCADM",15,0)
 D DEMO
"RTN","HBHCADM",16,0)
 K DIE S DIE="^HBHC(631,",DA=HBHCDFN,DIE("NO^")="OUTOK"
"RTN","HBHCADM",17,0)
 S DR="K HBHCQ;17;2:5;D BIRTHYR^HBHCUTL1;7;D SEXRACE^HBHCUTL1;10:13;14;D ACTION^HBHCUTL;15;16;I $D(HBHCQ) K HBHCQ S Y=37;18;68;19:36;37:38;67"
"RTN","HBHCADM",18,0)
 L +^HBHC(631,HBHCDFN):0 I $T D ^DIE L -^HBHC(631,HBHCDFN) G PROMPT
"RTN","HBHCADM",19,0)
 W *7,!!,"Another user is editing this entry.",!! G PROMPT
"RTN","HBHCADM",20,0)
EXIT ; Exit module
"RTN","HBHCADM",21,0)
 K DA,DIC,DIE,DIK,DR,HBHCAFLG,HBHCBXRF,HBHCCNTY,HBHCDFN,HBHCDPT,HBHCDPT0,HBHCEL,HBHCELGE,HBHCFLG,HBHCFORM,HBHCI,HBHCIEN,HBHCINFO,HBHCJ,HBHCMARE,HBHCMS,HBHCNHSP,HBHCPRCT,HBHCPS,HBHCPSRV,HBHCQ,HBHCRFLG,HBHCST,HBHCXMT3,HBHCWRD1
"RTN","HBHCADM",22,0)
 K HBHCWRD2,HBHCWRD3,HBHCY0,HBHCZIP,X,Y
"RTN","HBHCADM",23,0)
 Q
"RTN","HBHCADM",24,0)
CHECK ; Check previous episode(s) of care for 'Reject' in Admit/Reject Action or Discharge Date to ensure completed episode of care before allowing another episode of care to be created
"RTN","HBHCADM",25,0)
 Q:($P(^HBHC(631,HBHCBXRF,0),U,15)=2)!($P(^HBHC(631,HBHCBXRF,0),U,40)]"")
"RTN","HBHCADM",26,0)
 W *7,!!,"Patient must be discharged from last episode of care before new episode",!,"can be entered.  Current episode not created.",! H 3
"RTN","HBHCADM",27,0)
 K DIK S DIK="^HBHC(631,",DA=HBHCDFN D ^DIK
"RTN","HBHCADM",28,0)
 S HBHCFLG=1
"RTN","HBHCADM",29,0)
 Q
"RTN","HBHCADM",30,0)
DEMO ; Obtain patient demographic info
"RTN","HBHCADM",31,0)
 S (HBHCST,HBHCCNTY,HBHCZIP,HBHCEL,HBHCELGE,HBHCPS,HBHCPSRV,HBHCMS,HBHCMARE)=""
"RTN","HBHCADM",32,0)
 I $D(^DPT(HBHCDPT,.11)) S HBHCINFO=^DPT(HBHCDPT,.11),HBHCCNTY=$P(HBHCINFO,U,7),HBHCZIP=$P(HBHCINFO,U,12),HBHCST=$P(HBHCINFO,U,5) I HBHCST]"" S HBHCIEN="" F  S HBHCIEN=$O(^HBHC(631.8,"B",HBHCST,HBHCIEN)) Q:HBHCIEN=""  S HBHCST=HBHCIEN
"RTN","HBHCADM",33,0)
 I $D(^DPT(HBHCDPT,.36)) S HBHCEL=$P($G(^DIC(8,(+^DPT(HBHCDPT,.36)),0)),U,9),HBHCELGE=$S(HBHCEL=1:"01",HBHCEL=2:"02",HBHCEL=15:"02",HBHCEL=3:"03",HBHCEL=4:"04",1:"05")
"RTN","HBHCADM",34,0)
 I $D(^DPT(HBHCDPT,.32)) S HBHCINFO=^DPT(HBHCDPT,.32),HBHCPS=$P(HBHCINFO,U,3),HBHCPSRV=$S(((HBHCPS>0)&(HBHCPS<9)):HBHCPS,HBHCPS=9:10,HBHCPS=121:11,1:"")
"RTN","HBHCADM",35,0)
 S HBHCINFO=^DPT(HBHCDPT,0),HBHCMS=$P(HBHCINFO,U,5),HBHCMARE=$S(HBHCMS=1:4,HBHCMS=2:1,HBHCMS=4:2,HBHCMS=5:3,HBHCMS=6:5,1:"")
"RTN","HBHCADM",36,0)
 I HBHCST]"" S:($P(Y(0),U,3)="")&($D(^HBHC(631.8,HBHCST,0))) $P(^HBHC(631,HBHCDFN,0),U,3)=HBHCST I (HBHCCNTY]"")&($P(Y(0),U,4)="") S:$D(^HBHC(631.8,HBHCST,0)) $P(^HBHC(631,HBHCDFN,0),U,4)=HBHCCNTY
"RTN","HBHCADM",37,0)
 S:(HBHCZIP]"")&(($P(Y(0),U,5)="")!($P(Y(0),U,5)'?9N)) $P(^HBHC(631,HBHCDFN,0),U,5)=HBHCZIP
"RTN","HBHCADM",38,0)
 S:(HBHCELGE]"")&($P(Y(0),U,6)="") $P(^HBHC(631,HBHCDFN,0),U,6)=HBHCELGE
"RTN","HBHCADM",39,0)
 S:(HBHCPSRV]"")&($P(Y(0),U,8)="") $P(^HBHC(631,HBHCDFN,0),U,8)=HBHCPSRV
"RTN","HBHCADM",40,0)
 S:(HBHCMARE]"")&($P(Y(0),U,11)="") $P(^HBHC(631,HBHCDFN,0),U,11)=HBHCMARE
"RTN","HBHCADM",41,0)
 Q
"RTN","HBHCAPP1")
0^9^B6198575
"RTN","HBHCAPP1",1,0)
HBHCAPP1 ; LR VAMC(IRMS)/MJT-HBHC called by HBHCAPPT, entry points:  START, ERROR, MAIL, EXIT ; Nov 1999
"RTN","HBHCAPP1",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,10,16**;NOV 01, 1993
"RTN","HBHCAPP1",3,0)
START ; Initialization
"RTN","HBHCAPP1",4,0)
 ; Set File Update in Progress Flag
"RTN","HBHCAPP1",5,0)
 S $P(^HBHC(631.9,1,0),U,8)=1
"RTN","HBHCAPP1",6,0)
 ; HBHC(634.2 killed to allow file update processing to run daily, any errors found in previous batch that haven't been corrected will be found again
"RTN","HBHCAPP1",7,0)
 K ^HBHC(634.2) S ^HBHC(634.2,0)="HBHC VISIT ERROR(S)^634.2P^"
"RTN","HBHCAPP1",8,0)
 ; Omit visits prior to 10/1/97, FY 1997 data did not include inpatient appointments, FY 1998 will, auto-queued job will only gather data for 7 days since HBHCFLAG is set in HBHCFILE
"RTN","HBHCAPP1",9,0)
 K %DT S X="T"-($S($D(HBHCFLAG):($P(^HBHC(631.9,1,0),U,4)),1:7)) D ^%DT S HBHCBGDT=$S(Y<2970930.9999:2970930.9999,1:Y_.9999)
"RTN","HBHCAPP1",10,0)
 D NOW^%DTC S (HBHCNOW,Y)=% X ^DD("DD") S HBHCDAT=Y
"RTN","HBHCAPP1",11,0)
 ; Omit future dates from file update
"RTN","HBHCAPP1",12,0)
 I $D(HBHCLSDT) S:HBHCLSDT>% HBHCLSDT=%
"RTN","HBHCAPP1",13,0)
 ; Auto-queued option will not have HBHCLSDT defined
"RTN","HBHCAPP1",14,0)
 I '$D(HBHCLSDT) S HBHCLSDT=%
"RTN","HBHCAPP1",15,0)
 S HBHCDTE=HBHCBGDT_U_HBHCLSDT
"RTN","HBHCAPP1",16,0)
 ; Cancel appointments in ^HBHC(632), & delete 'filed' records from ^HBHC(634) if outpatient encounter (^SCE(409.68)) entry no longer exists
"RTN","HBHCAPP1",17,0)
 D ^HBHCCAN
"RTN","HBHCAPP1",18,0)
 Q
"RTN","HBHCAPP1",19,0)
ERROR ; Update HBHC Error(s) (634.2) file Error Message (3) & Outpatient Encounter (4) fields
"RTN","HBHCAPP1",20,0)
 K DD,DO,DTOUT,DUOUT
"RTN","HBHCAPP1",21,0)
 S DIC="^HBHC(634.2,",DIC(0)="L",X=HBHCDPT,DIC("DR")="3///^S X=HBHCMSG;4///^S X=HBHCOEP;5///^S X=HBHCAPDT;6///^S X=HBHCCLN" D FILE^DICN
"RTN","HBHCAPP1",22,0)
 K HBHCMSG
"RTN","HBHCAPP1",23,0)
 Q
"RTN","HBHCAPP1",24,0)
MAIL ; Send mail message
"RTN","HBHCAPP1",25,0)
 S TMP(1)="Please run Form Errors Report option for HBHC errors to correct.",XMDUZ="HBHC File Update Mail Group",XMSUB=$P(HBHCDAT,"@")_" HBHC File Update",XMY("INFO:G.HBH")="",XMTEXT="TMP("
"RTN","HBHCAPP1",26,0)
 D ^XMD
"RTN","HBHCAPP1",27,0)
 Q
"RTN","HBHCAPP1",28,0)
EXIT ; Exit module
"RTN","HBHCAPP1",29,0)
 D CLEAN^DILF
"RTN","HBHCAPP1",30,0)
 ; HBHCFLAG set in ^HBHCFILE, to accommodate retaining these variables if not auto-queued job
"RTN","HBHCAPP1",31,0)
 K:'$D(HBHCFLAG) HBHCDAT,HBHCDTE,HBHCNOW
"RTN","HBHCAPP1",32,0)
 K DA,DD,DO,DIC,DIK,DTOUT,DUOUT,HBHC,HBHCAPDT,HBHCBGDT,HBHCBXRF,HBHCCLN,HBHCCNT,HBHCCPT,HBHCCPTL,HBHCDFN,HBHCDPT,HBHCDX,HBHCDXL,HBHCFLG,HBHCI,HBHCINFO,HBHCJ,HBHCK,HBHCMSG,HBHCNBR,HBHCOEP,HBHCONE,HBHCPCNT,HBHCPRV,HBHCPRV1,HBHCPRVL
"RTN","HBHCAPP1",33,0)
 K HBHCSCE0,HBHCTOT,HBHCTXT,TMP,X,Y,%DT,%
"RTN","HBHCAPP1",34,0)
 Q
"RTN","HBHCAPPT")
0^8^B32214867
"RTN","HBHCAPPT",1,0)
HBHCAPPT ; LR VAMC(IRMS)/MJT-HBHC batch job to create ^HBHC(632) (visit) nodes from PCE module info => patient, appointment date/time, hospital location (clinic), prov, DX code(s), & CPT code(s), calls ^HBHCCAN, HBHCAPP1 ; Dec 1999
"RTN","HBHCAPPT",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,10,12,13,15,16**;NOV 01, 1993
"RTN","HBHCAPPT",3,0)
 ; Daily auto-queued option, also called from ^HBHCFILE, HBHCLSDT, last date to include in transmit set up in ^HBHCFILE
"RTN","HBHCAPPT",4,0)
 D START^HBHCAPP1
"RTN","HBHCAPPT",5,0)
SCAN ; Scan
"RTN","HBHCAPPT",6,0)
 N HBHCQRY
"RTN","HBHCAPPT",7,0)
 D OPEN^SDQ(.HBHCQRY)
"RTN","HBHCAPPT",8,0)
 D INDEX^SDQ(.HBHCQRY,"DATE/TIME","SET")
"RTN","HBHCAPPT",9,0)
 D DATE^SDQ(.HBHCQRY,HBHCBGDT,HBHCLSDT,"SET")
"RTN","HBHCAPPT",10,0)
 D SCANCB^SDQ(.HBHCQRY,"D CB^HBHCAPPT(Y,Y0,.SDSTOP)","SET")
"RTN","HBHCAPPT",11,0)
 D ACTIVE^SDQ(.HBHCQRY,"TRUE","SET")
"RTN","HBHCAPPT",12,0)
 D SCAN^SDQ(.HBHCQRY,"FORWARD")
"RTN","HBHCAPPT",13,0)
 D CLOSE^SDQ(.HBHCQRY)
"RTN","HBHCAPPT",14,0)
 I ($D(^HBHC(634.1,"B")))!($D(^HBHC(634.2,"B")))!($D(^HBHC(634.3,"B")))!($D(^HBHC(634.5,"B"))) D MAIL^HBHCAPP1
"RTN","HBHCAPPT",15,0)
 ; Delete File Update in Progress Flag
"RTN","HBHCAPPT",16,0)
 S $P(^HBHC(631.9,1,0),U,8)=""
"RTN","HBHCAPPT",17,0)
EXIT ; Exit module
"RTN","HBHCAPPT",18,0)
 D EXIT^HBHCAPP1
"RTN","HBHCAPPT",19,0)
 Q
"RTN","HBHCAPPT",20,0)
CB(HBHCOEP,HBHCSCE0,HBHCSTOP) ;
"RTN","HBHCAPPT",21,0)
 ; Omit Child encounter, (child if Parent Encounter field contains data)
"RTN","HBHCAPPT",22,0)
 Q:$P(HBHCSCE0,U,6)]""
"RTN","HBHCAPPT",23,0)
 ; Quit if invalid status for HBHC purposes
"RTN","HBHCAPPT",24,0)
 Q:($P(HBHCSCE0,U,12)=4)!($P(HBHCSCE0,U,12)=5)!($P(HBHCSCE0,U,12)=6)!($P(HBHCSCE0,U,12)=7)!($P(HBHCSCE0,U,12)=9)!($P(HBHCSCE0,U,12)=10)!($P(HBHCSCE0,U,12)=11)!($P(HBHCSCE0,U,12)=13)
"RTN","HBHCAPPT",25,0)
 ; Clinic missing
"RTN","HBHCAPPT",26,0)
 Q:$P(HBHCSCE0,U,4)=""
"RTN","HBHCAPPT",27,0)
 ; Include only HBHC clinics
"RTN","HBHCAPPT",28,0)
 Q:'$D(^HBHC(631.6,"B",$P(HBHCSCE0,U,4)))
"RTN","HBHCAPPT",29,0)
 S HBHCCLN=$P(HBHCSCE0,U,4)
"RTN","HBHCAPPT",30,0)
 D VERIFY I 'HBHCFLG D PROCESS D:$D(HBHCMSG) ERROR^HBHCAPP1
"RTN","HBHCAPPT",31,0)
 Q
"RTN","HBHCAPPT",32,0)
VERIFY ; Verify record doesn't already exist in ^HBHC(632) file
"RTN","HBHCAPPT",33,0)
 S HBHCFLG=0,HBHCDPT=$P(HBHCSCE0,U,2),HBHCAPDT=$P(HBHCSCE0,U)
"RTN","HBHCAPPT",34,0)
 I HBHCDPT="" S HBHCFLG=1 Q
"RTN","HBHCAPPT",35,0)
 S HBHCBXRF=0 F  S HBHCBXRF=$O(^HBHC(632,"B",HBHCDPT,HBHCBXRF)) Q:(HBHCBXRF'>0)!(HBHCFLG)  S:($D(^HBHC(632,"AE",HBHCOEP)))&(HBHCAPDT=$P(^HBHC(632,HBHCBXRF,0),U,2))&('$D(^HBHC(632,"AC","C",HBHCBXRF))) HBHCFLG=1
"RTN","HBHCAPPT",36,0)
 Q
"RTN","HBHCAPPT",37,0)
PROCESS ; Process provider, diagnosis (Dx) (limit: 5), & CPT code data
"RTN","HBHCAPPT",38,0)
 ; Dx
"RTN","HBHCAPPT",39,0)
 K HBHCDXL
"RTN","HBHCAPPT",40,0)
 F HBHCI=1:1:5 S HBHCDX(HBHCI)="",HBHCCNT=1
"RTN","HBHCAPPT",41,0)
 D GETDX^SDOE(HBHCOEP,"HBHCDXL")
"RTN","HBHCAPPT",42,0)
 S HBHCDFN=0 F  S HBHCDFN=$O(HBHCDXL(HBHCDFN)) Q:(HBHCDFN'>0)!(HBHCCNT>5)  S:$P(HBHCDXL(HBHCDFN),U,12)="P" HBHCDX(1)=$P(HBHCDXL(HBHCDFN),U) S:$P(HBHCDXL(HBHCDFN),U,12)="S" HBHCCNT=HBHCCNT+1,HBHCDX(HBHCCNT)=$P(HBHCDXL(HBHCDFN),U)
"RTN","HBHCAPPT",43,0)
 ; Dx missing
"RTN","HBHCAPPT",44,0)
 I (+$G(HBHCDXL)'>0) S HBHCMSG=3 Q
"RTN","HBHCAPPT",45,0)
 ; Dx > 5
"RTN","HBHCAPPT",46,0)
 I (+$G(HBHCDXL)>5) S HBHCMSG=6 Q
"RTN","HBHCAPPT",47,0)
 ; provider, use Encounter Provider (field 1204, file 9000010.18) or V Provider (9000010.06) (if encounter provider doesn't exist), each provider within encounter will become a separate HBHC Visit record
"RTN","HBHCAPPT",48,0)
 K HBHCPRV1,HBHCPRVL
"RTN","HBHCAPPT",49,0)
 D GETPRV^SDOE(HBHCOEP,"HBHCPRVL")
"RTN","HBHCAPPT",50,0)
 S (HBHCPCNT,HBHCDFN,HBHCONE)=0 F  S HBHCDFN=$O(HBHCPRVL(HBHCDFN)) Q:HBHCDFN'>0  S HBHCPRV=$P(HBHCPRVL(HBHCDFN),U) D CHECK S:HBHCONE=1 HBHCPCNT=HBHCPCNT+1,HBHCPRV1(HBHCPRV)=""
"RTN","HBHCAPPT",51,0)
 ; Provider missing
"RTN","HBHCAPPT",52,0)
 I (+$G(HBHCPRVL)'>0) S HBHCMSG=2 Q
"RTN","HBHCAPPT",53,0)
 ; HBHC provider missing
"RTN","HBHCAPPT",54,0)
 I HBHCONE=0 S HBHCMSG=11 Q
"RTN","HBHCAPPT",55,0)
 ; Multiple HBHC provider numbers
"RTN","HBHCAPPT",56,0)
 I HBHCONE>1 S HBHCMSG=12 Q
"RTN","HBHCAPPT",57,0)
 ; CPT Code 
"RTN","HBHCAPPT",58,0)
 K HBHCCPTL,HBHCPRV
"RTN","HBHCAPPT",59,0)
 D GETCPT^SDOE(HBHCOEP,"HBHCCPTL")
"RTN","HBHCAPPT",60,0)
 S (HBHCDFN,HBHCONE)=0 F  S HBHCDFN=$O(HBHCCPTL(HBHCDFN)) Q:(HBHCDFN'>0)!($D(HBHCMSG))  S HBHCPRV=$P($G(HBHCCPTL(HBHCDFN,12)),U,4) D:HBHCPRV]"" CHECK S HBHCNBR=$P(HBHCCPTL(HBHCDFN,0),U,16) D PROV
"RTN","HBHCAPPT",61,0)
 ; Provider mismatch
"RTN","HBHCAPPT",62,0)
 Q:$D(HBHCMSG)
"RTN","HBHCAPPT",63,0)
 ; Provider ambiguous
"RTN","HBHCAPPT",64,0)
 I $D(HBHCPRV("ZZ")) S HBHCMSG=5 Q
"RTN","HBHCAPPT",65,0)
 ; CPT Code missing
"RTN","HBHCAPPT",66,0)
 I (+$G(HBHCCPTL)=0) S HBHCMSG=4 Q
"RTN","HBHCAPPT",67,0)
 ; outpatient encounter must have 'checked-out' status (2) to ensure provider, Dx, & CPT data exist, or inpatient status (8)
"RTN","HBHCAPPT",68,0)
 I ($P(HBHCSCE0,U,12)'=2)&($P(HBHCSCE0,U,12)'=8) S HBHCMSG=1 Q
"RTN","HBHCAPPT",69,0)
SET ; Set node, call ^DIK to set cross-refs in ^HBHC(632) (visit) file
"RTN","HBHCAPPT",70,0)
 S HBHCPRV="" F  S HBHCPRV=$O(HBHCPRV(HBHCPRV)) Q:HBHCPRV=""  D SETLOOP
"RTN","HBHCAPPT",71,0)
 Q
"RTN","HBHCAPPT",72,0)
SETLOOP ; Set loop
"RTN","HBHCAPPT",73,0)
 S HBHC="" F  S HBHC=$O(^HBHC(631.4,"C",HBHCPRV,HBHC)) Q:(HBHC="")!('$D(^HBHC(631.4,"AC",1,HBHC)))
"RTN","HBHCAPPT",74,0)
 L +^HBHC(632,0) F  S HBHCDFN=$P(^HBHC(632,0),U,3)+1,$P(^HBHC(632,0),U,3)=HBHCDFN Q:'$D(^HBHC(632,HBHCDFN,0))
"RTN","HBHCAPPT",75,0)
 S $P(^HBHC(632,0),U,4)=$P(^HBHC(632,0),U,4)+1 L -^HBHC(632,0)
"RTN","HBHCAPPT",76,0)
 L +^HBHC(632,HBHCDFN,2) S HBHCCPT=""
"RTN","HBHCAPPT",77,0)
 F  S HBHCCPT=$O(HBHCPRV(HBHCPRV,HBHCCPT)) Q:HBHCCPT=""  S HBHCNBR="" F  S HBHCNBR=$O(HBHCPRV(HBHCPRV,HBHCCPT,HBHCNBR)) Q:HBHCNBR=""  D SETCPT S HBHCK=0 F  S HBHCK=$O(HBHCPRV(HBHCPRV,HBHCCPT,HBHCNBR,HBHCK)) Q:HBHCK'>0  D SETMOD
"RTN","HBHCAPPT",78,0)
 L -^HBHC(632,HBHCDFN,2)
"RTN","HBHCAPPT",79,0)
 L +^HBHC(632,HBHCDFN,0) S ^HBHC(632,HBHCDFN,0)=HBHCDPT_U_HBHCAPDT_U_HBHCCLN_U_HBHC_U_U_U_U_"N"_U_U_U_U_U_U_U_U_U_HBHCDX(1)_U_HBHCDX(2)_U_HBHCDX(3)_U_HBHCDX(4)_U_HBHCDX(5)_U_HBHCOEP L -^HBHC(632,HBHCDFN,0)
"RTN","HBHCAPPT",80,0)
 K DIK S DIK="^HBHC(632,",DA=HBHCDFN D IX^DIK K DIK
"RTN","HBHCAPPT",81,0)
 Q
"RTN","HBHCAPPT",82,0)
CHECK ; Check to ensure provider only has 1 HBHC Provider Number (631.4) or if > 1, has others flagged as Inactive Provider Numbers
"RTN","HBHCAPPT",83,0)
 S (HBHCONE,HBHCIEN)=0 F  S HBHCIEN=$O(^HBHC(631.4,"C",HBHCPRV,HBHCIEN)) Q:(HBHCIEN'>0)!(HBHCONE>1)  S:'$D(^HBHC(631.4,"AC",1,HBHCIEN)) HBHCONE=HBHCONE+1
"RTN","HBHCAPPT",84,0)
 Q
"RTN","HBHCAPPT",85,0)
PROV ; Encounter provider & CPT code processing
"RTN","HBHCAPPT",86,0)
 S:HBHCPCNT=1 HBHCTXT="",HBHCTXT=$O(HBHCPRV1(HBHCTXT))
"RTN","HBHCAPPT",87,0)
 F HBHCJ=1:1:HBHCNBR D:HBHCPRV="" SUB1 D:HBHCPRV]"" SUB2
"RTN","HBHCAPPT",88,0)
 Q
"RTN","HBHCAPPT",89,0)
SUB1 ; Subroutine 1 for encounter provider & CPT code processing
"RTN","HBHCAPPT",90,0)
 S HBHCPRV($S(HBHCPCNT=1:HBHCTXT,1:"ZZ"),$P(HBHCCPTL(HBHCDFN,0),U),HBHCJ)=""
"RTN","HBHCAPPT",91,0)
 S HBHCK=0 F  S HBHCK=$O(HBHCCPTL(HBHCDFN,1,HBHCK)) Q:HBHCK'>0  S HBHCPRV($S(HBHCPCNT=1:HBHCTXT,1:"ZZ"),$P(HBHCCPTL(HBHCDFN,0),U),HBHCJ,HBHCK)=HBHCCPTL(HBHCDFN,1,HBHCK,0)
"RTN","HBHCAPPT",92,0)
 Q
"RTN","HBHCAPPT",93,0)
SUB2 ; Subroutine 2 for encounter provider & CPT code processing
"RTN","HBHCAPPT",94,0)
 I (HBHCONE=1)&($D(HBHCPRV1(HBHCPRV))) S HBHCPRV(HBHCPRV,$P(HBHCCPTL(HBHCDFN,0),U),HBHCJ)="",HBHCK=0 F  S HBHCK=$O(HBHCCPTL(HBHCDFN,1,HBHCK)) Q:HBHCK'>0  S HBHCPRV(HBHCPRV,$P(HBHCCPTL(HBHCDFN,0),U),HBHCJ,HBHCK)=HBHCCPTL(HBHCDFN,1,HBHCK,0)
"RTN","HBHCAPPT",95,0)
 S:'$D(HBHCPRV1(HBHCPRV)) HBHCMSG=13
"RTN","HBHCAPPT",96,0)
 Q
"RTN","HBHCAPPT",97,0)
SETCPT ; Set CPT multiple
"RTN","HBHCAPPT",98,0)
 K DD,DO S DIC="^HBHC(632,",DIC(0)="L",DIC("P")=$P(^DD(632,32,0),U,2),DA(1)=HBHCDFN,X=HBHCCPT,DIC=DIC_DA(1)_",2," D FILE^DICN
"RTN","HBHCAPPT",99,0)
 ; Set up for CPT Modifier update
"RTN","HBHCAPPT",100,0)
 S DA=+Y,DA(2)=DA(1),DA(1)=DA
"RTN","HBHCAPPT",101,0)
 K DD,DO S DIC("P")=$P(^DD(632.032,1,0),U,2),DIC=DIC_DA_",1,"
"RTN","HBHCAPPT",102,0)
 Q
"RTN","HBHCAPPT",103,0)
SETMOD ; Set CPT Modifier multiple
"RTN","HBHCAPPT",104,0)
 S X=HBHCPRV(HBHCPRV,HBHCCPT,HBHCNBR,HBHCK) D FILE^DICN S DA=+Y
"RTN","HBHCAPPT",105,0)
 Q
"RTN","HBHCFILE")
0^10^B30351627
"RTN","HBHCFILE",1,0)
HBHCFILE ; LR VAMC(IRMS)/MJT-HBHC populates ^HBHC(632) visit file, & ^HBHC(634), file for transmitting to Austin, calls ^HBHCAPPT, ^HBHCXMC, ^HBHCXMA, ^HBHCXMV, & ^HBHCXMD ; Nov 1999
"RTN","HBHCFILE",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**2,5,6,8,9,10,16**;NOV 01, 1993
"RTN","HBHCFILE",3,0)
 I $P(^HBHC(631.9,1,0),U,5)="" W !!,"***  NOTICE:  Hospital Number is missing from System Parameter file (#631.9).",!,"Transmission file building CANNOT proceed without this information.  Contact"
"RTN","HBHCFILE",4,0)
 I $P(^HBHC(631.9,1,0),U,5)="" W !,"IRM to enter this information using FileMan.",! H 10 Q
"RTN","HBHCFILE",5,0)
 L +^HBHC(634.5,0):0 I '$T W *7,!!,"Another user has the pseudo SSN file locked." H 3 G EXIT
"RTN","HBHCFILE",6,0)
 I ($D(^HBHC(634.1,"B")))!($D(^HBHC(634.2,"B")))!($D(^HBHC(634.3,"B")))!($D(^HBHC(634.5,"B"))) W *7,!!,"Records containing errors exist and must be corrected before transmit",!,"file can be created or updated.",!! H 3 Q
"RTN","HBHCFILE",7,0)
EN ; Entry point
"RTN","HBHCFILE",8,0)
 I $P(^HBHC(631.9,1,0),U,8)]"" W *7,!,"File Update in progress.  Please try again later." H 3 Q
"RTN","HBHCFILE",9,0)
 W !!,"This option builds the file for transmission to Austin.  Do you wish to",!,"continue" S %=2 D YN^DICN
"RTN","HBHCFILE",10,0)
 I %=0 W !!,"A 'Yes' response will add records to the file.  A 'No' response will return",!,"to the menu without updating the file." G EN
"RTN","HBHCFILE",11,0)
 G:%'=1 EXIT
"RTN","HBHCFILE",12,0)
MONTH ; Calculate default month value & last date to be included for transmission
"RTN","HBHCFILE",13,0)
 S X="T" D ^%DT S X1=$P(Y,"."),X2=-28 D C^%DTC S DIR("B")=+$E(X,4,5)
"RTN","HBHCFILE",14,0)
 S DIR(0)="SX^1:January;2:February;3:March;4:April;5:May;6:June;7:July;8:August;9:September;10:October;11:November;12:December;"
"RTN","HBHCFILE",15,0)
 S DIR("A")="Month for which data is to be transmitted"
"RTN","HBHCFILE",16,0)
 S DIR("?")="Month entered controls the ending date for data transmitted to Austin.  (e.g.  An August 5 transmission with July selected as month, will include data thru July 31.)"
"RTN","HBHCFILE",17,0)
 D ^DIR Q:$D(DIRUT)  S HBHCDIR=Y
"RTN","HBHCFILE",18,0)
 S X="T" D ^%DT S HBHCYEAR=$S(HBHCDIR>(+$E(Y,4,5)):($E(Y,1,3))-1,1:$E(Y,1,3))
"RTN","HBHCFILE",19,0)
 S Y=1700+HBHCYEAR,HBHCLEAP=$S(Y#400=0:1,Y#4=0&'(Y#100=0):1,1:0)
"RTN","HBHCFILE",20,0)
 S HBHCLSDT=HBHCYEAR_$S(HBHCDIR<10:"0"_HBHCDIR,1:HBHCDIR)_$S("^4^6^9^11^"[HBHCDIR:30,((HBHCDIR=2)&('HBHCLEAP)):28,((HBHCDIR=2)&(HBHCLEAP)):29,1:31)_.9999
"RTN","HBHCFILE",21,0)
 S Y=$P(HBHCLSDT,".") D DD^%DT S HBHCCKDT=Y
"RTN","HBHCFILE",22,0)
NUMBER ; Edit Number of Visit Days to Scan system parameter
"RTN","HBHCFILE",23,0)
 W !
"RTN","HBHCFILE",24,0)
 K DIR S DIR(0)="631.9,3",DIR("A")="Number of Visit Days to Scan",DIR("B")=$P($G(^HBHC(631.9,1,0)),U,4)
"RTN","HBHCFILE",25,0)
 S DIR("?",1)="Enter number of days to be included when the system creates records in the",DIR("?",2)="HBHC Visit File from the appointment data entered via the Appointment",DIR("?")="Management  [HBHC APPOINTMENT]  option."
"RTN","HBHCFILE",26,0)
 D ^DIR
"RTN","HBHCFILE",27,0)
 G:($D(DTOUT))!($D(DUOUT)) EXIT
"RTN","HBHCFILE",28,0)
 S HBHCDIR=Y
"RTN","HBHCFILE",29,0)
 I (HBHCDIR'=DIR("B"))&(HBHCDIR?1.3N) K DIE S HBHCDAYS=Y,DIE="^HBHC(631.9,",DA=1,DR="3///^S X=HBHCDAYS" D ^DIE
"RTN","HBHCFILE",30,0)
 ; Check to ensure Number of Visit Days to Scan date < HBHCLSDT
"RTN","HBHCFILE",31,0)
 K %DT S X="T"-($S(HBHCDIR'=DIR("B"):HBHCDIR,1:DIR("B"))) D ^%DT
"RTN","HBHCFILE",32,0)
 I (Y_".9999")'<HBHCLSDT D DD^%DT W *7,!!,"Date Range is invalid.  Transmit Month Ending Date of:  ",HBHCCKDT,"  must",!,"be closer to today than the Number of Days to Scan Date:  ",Y,".",! G NUMBER
"RTN","HBHCFILE",33,0)
CLEANUP ; Cleanup ^HBHC(634) if new transmit cycle => all records flagged as transmitted
"RTN","HBHCFILE",34,0)
 I ('$D(^HBHC(631,"AE","F")))&('$D(^HBHC(631,"AF","F")))&('$D(^HBHC(632,"AC","F"))) K ^HBHC(634) S ^HBHC(634,0)="HBHC TRANSMIT^634"
"RTN","HBHCFILE",35,0)
 ; Flag used to control killing HBHCDAT, HBHCDTE, & HBHCNOW in HBHCAPPT
"RTN","HBHCFILE",36,0)
 S HBHCFLAG=1
"RTN","HBHCFILE",37,0)
QUEUE ; Queue
"RTN","HBHCFILE",38,0)
 S ZTIO="",ZTDTH=$H,ZTRTN="PLOOP^HBHCFILE",ZTSAVE("HBHC*")="",ZTDESC="HBPC Build Transmit File" D ^%ZTLOAD
"RTN","HBHCFILE",39,0)
 W *7,!!,"Build Transmit File processing has been queued.  Task number:  ",ZTSK H 3
"RTN","HBHCFILE",40,0)
 G EXIT
"RTN","HBHCFILE",41,0)
PLOOP ; Loop thru ^HBHC(632,"C" Appointment Date cross-ref & flag as 'P' (Record Prior to Package Startup Date) in Form 4 Transmit Status field if date < Package Startup Date
"RTN","HBHCFILE",42,0)
 S X1=$P(^HBHC(631.9,1,0),U,3),X2=-1 D C^%DTC S HBHCSTDT=X_.9999
"RTN","HBHCFILE",43,0)
 S HBHCAPDT=0,DIE="^HBHC(632,",DR="7///P"
"RTN","HBHCFILE",44,0)
 F  S HBHCAPDT=$O(^HBHC(632,"C",HBHCAPDT)) Q:(HBHCAPDT'>0)!(HBHCAPDT>HBHCSTDT)  S DA="" F  S DA=$O(^HBHC(632,"C",HBHCAPDT,DA)) Q:DA'>0  D:'$D(^HBHC(632,"AC","P",DA)) ^DIE
"RTN","HBHCFILE",45,0)
POP ; Populate ^HBHC(634) or ^HBHC(634.1/634.2/634.3/634.5 Error files
"RTN","HBHCFILE",46,0)
 D ^HBHCAPPT,^HBHCXMC,^HBHCXMA,^HBHCXMV,^HBHCXMD
"RTN","HBHCFILE",47,0)
 ; Cleanup potential scrogged HBHC(632,"AC" cross-ref on Form 4 Transmit Status field (#7) as failsafe
"RTN","HBHCFILE",48,0)
 K ^HBHC(632,"AC") S DIK="^HBHC(632,",DIK(1)=7 D ENALL^DIK
"RTN","HBHCFILE",49,0)
 ; Send mail message
"RTN","HBHCFILE",50,0)
 D:('$D(^HBHC(634.1,"B")))&('$D(^HBHC(634.2,"B")))&('$D(^HBHC(634.3,"B")))&('$D(^HBHC(634.5,"B"))) MAIL
"RTN","HBHCFILE",51,0)
EXIT ; Exit module
"RTN","HBHCFILE",52,0)
 L -^HBHC(634.5,0)
"RTN","HBHCFILE",53,0)
 K DA,DIE,DIR,DIRUT,DR,DTOUT,DUOUT,HBHCAPDT,HBHCCKDT,HBHCDAT,HBHCDAYS,HBHCDTE,HBHCDIR,HBHCFLAG,HBHCLEAP,HBHCLSDT,HBHCNOW,HBHCSTDT,HBHCYEAR,%,TMP,X,X1,X2,Y
"RTN","HBHCFILE",54,0)
 Q
"RTN","HBHCFILE",55,0)
MAIL ; Send completed mail message
"RTN","HBHCFILE",56,0)
 S TMP(1)=$P(HBHCDAT,"@")_" HBHC Build Transmit File is complete with no errors found.",TMP(2)="",TMP(3)="   Number of Visit Days to Scan system parameter:  "_$P(^HBHC(631.9,1,0),U,4),TMP(4)=""
"RTN","HBHCFILE",57,0)
 S Y=$P($P(HBHCDTE,U),"@") X ^DD("DD") S HBHCINFO=Y,Y=$P($P(HBHCDTE,U,2),"@") X ^DD("DD") S TMP(5)="   Date range:  "_$P(HBHCINFO,"@")_"  thru  "_$P(Y,"@"),TMP(6)=""
"RTN","HBHCFILE",58,0)
 D NOW^%DTC S Y=% X ^DD("DD")
"RTN","HBHCFILE",59,0)
 S TMP(7)="   Start time:  "_$P(HBHCDAT,"@",2)_"   End time:  "_$P(Y,"@",2)_"   Elapsed minutes:  "_($E(%_"000",9,10)-$E(HBHCNOW_"000",9,10)*60+$E(%_"00000",11,12)-$E(HBHCNOW_"00000",11,12)),TMP(8)=""
"RTN","HBHCFILE",60,0)
 S TMP(9)="*****   Reminder:  Please run Transmit File to Austin option.   *****"
"RTN","HBHCFILE",61,0)
 S XMDUZ="HBHC Build Transmit File Mail Group",XMSUB=$P(HBHCDAT,"@")_" HBHC Build Transmit File",XMY(DUZ)="",XMTEXT="TMP("
"RTN","HBHCFILE",62,0)
 D ^XMD
"RTN","HBHCFILE",63,0)
 Q
"RTN","HBHCRP17")
0^21^B8130692
"RTN","HBHCRP17",1,0)
HBHCRP17 ; LR VAMC(IRMS)/MJT-HBHC report on file 632, user selected date range, CPT code(s) (can be range of CPTs), with summary totals, calls:  CPT^HBHCUTL3, EN1^HBHCUTL4 & KILL^HBHCUTL4 ; Apr 2000
"RTN","HBHCRP17",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,11,16**;NOV 01, 1993
"RTN","HBHCRP17",3,0)
 D EN1^HBHCUTL4
"RTN","HBHCRP17",4,0)
 G:(HBHCBEG1=-1)!(HBHCEND1=-1)!($D(DTOUT))!(('$D(HBHCCPTB))&('$D(HBHCCPTE))&('$D(HBHCTMP)))!(($D(HBHCCPTB))&('$D(HBHCCPTE))) EXIT
"RTN","HBHCRP17",5,0)
 S %ZIS="Q",HBHCCC=0 K IOP,ZTIO,ZTSAVE D ^%ZIS G:POP EXIT
"RTN","HBHCRP17",6,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP17",ZTDESC="HBPC CPT Code Summary Report",ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCRP17",7,0)
DQ ; De-queue
"RTN","HBHCRP17",8,0)
 U IO
"RTN","HBHCRP17",9,0)
 K ^TMP("HBHC",$J)
"RTN","HBHCRP17",10,0)
 S HBHCCC=0,HBHCHEAD="CPT Code Summary",HBHCHDR="W !,""CPT Code"",?39,""Total""",HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCRP17",11,0)
 S HBHCTOT=0,$P(HBHCY,"-",81)=""
"RTN","HBHCRP17",12,0)
LOOP ; Loop thru ^HBHC(632) "C" (visit date) cross-ref to build report
"RTN","HBHCRP17",13,0)
 S X1=HBHCBEG1,X2=-1 D C^%DTC S HBHCDATE=X_.9999
"RTN","HBHCRP17",14,0)
 F  S HBHCDATE=$O(^HBHC(632,"C",HBHCDATE)) Q:(HBHCDATE="")!($P(HBHCDATE,".")>HBHCEND1)  S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(632,"C",HBHCDATE,HBHCDFN)) Q:HBHCDFN=""  S HBHCNOD0=^HBHC(632,HBHCDFN,0) D:$P(HBHCNOD0,U,7)="" PROCESS
"RTN","HBHCRP17",15,0)
 D:IO'=IO(0)!($D(IO("S"))) HDRRANGE^HBHCUTL
"RTN","HBHCRP17",16,0)
 I '$D(IO("S")),(IO=IO(0)) S HBHCCC=HBHCCC+1 D HDRRANGE^HBHCUTL
"RTN","HBHCRP17",17,0)
 W:'$D(^TMP("HBHC",$J)) !!,"No Visits containing CPT codes requested found for Date Range selected."
"RTN","HBHCRP17",18,0)
 I $D(^TMP("HBHC",$J)) D PRTLOOP
"RTN","HBHCRP17",19,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<5) W @IOF D HDRRANGE^HBHCUTL
"RTN","HBHCRP17",20,0)
 W !!,HBHCZ,!,"Total CPT Codes:  ",$J(HBHCTOT,6),!,HBHCZ
"RTN","HBHCRP17",21,0)
 D ENDRPT^HBHCUTL1
"RTN","HBHCRP17",22,0)
EXIT ; Exit module
"RTN","HBHCRP17",23,0)
 D ^%ZISC,KILL^HBHCUTL4
"RTN","HBHCRP17",24,0)
 K DIC,DTOUT,DUOUT,HBHCBEG1,HBHCCPTB,HBHCCPTE,HBHCEND1,HBHCHEAD,Y
"RTN","HBHCRP17",25,0)
 Q
"RTN","HBHCRP17",26,0)
PROCESS ; Process record & create ^TMP("HBHC",$J global
"RTN","HBHCRP17",27,0)
 S HBHCDPT0=^DPT($P(HBHCNOD0,U),0)
"RTN","HBHCRP17",28,0)
 D CPT^HBHCUTL3
"RTN","HBHCRP17",29,0)
 S HBHCI=0 F  S HBHCI=$O(HBHCCPTA(HBHCI)) Q:HBHCI'>0  S HBHCCPT=HBHCCPTA(HBHCI) D SET
"RTN","HBHCRP17",30,0)
 Q
"RTN","HBHCRP17",31,0)
SET ; Set TMP node for CPTs
"RTN","HBHCRP17",32,0)
 I HBHCDIR=1 Q:(($P(HBHCCPT,"  "))<HBHCCPTB)!(($P(HBHCCPT,"  "))>HBHCCPTE)
"RTN","HBHCRP17",33,0)
 Q:(HBHCDIR=0)&('$D(HBHCTMP($P(HBHCCPT,"  "))))
"RTN","HBHCRP17",34,0)
 S:$D(^TMP("HBHC",$J,HBHCCPT)) ^TMP("HBHC",$J,HBHCCPT)=^TMP("HBHC",$J,HBHCCPT)+1
"RTN","HBHCRP17",35,0)
 S:'$D(^TMP("HBHC",$J,HBHCCPT)) ^TMP("HBHC",$J,HBHCCPT)=1
"RTN","HBHCRP17",36,0)
 Q
"RTN","HBHCRP17",37,0)
PRTLOOP ; Print loop
"RTN","HBHCRP17",38,0)
 S HBHCCPT="" F  S HBHCCPT=$O(^TMP("HBHC",$J,HBHCCPT)) Q:HBHCCPT=""  D PRINT
"RTN","HBHCRP17",39,0)
 Q
"RTN","HBHCRP17",40,0)
PRINT ; Print report
"RTN","HBHCRP17",41,0)
 S HBHCCNT=^TMP("HBHC",$J,HBHCCPT)
"RTN","HBHCRP17",42,0)
 S HBHCTOT=HBHCTOT+HBHCCNT
"RTN","HBHCRP17",43,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<5) W @IOF D HDRRANGE^HBHCUTL
"RTN","HBHCRP17",44,0)
 W !,HBHCCPT,?39,$J(HBHCCNT,5)
"RTN","HBHCRP17",45,0)
 W !,HBHCY
"RTN","HBHCRP17",46,0)
 Q
"RTN","HBHCRP1A")
0^24^B18793786
"RTN","HBHCRP1A",1,0)
HBHCRP1A ; LR VAMC(IRMS)/MJT-HBHC report on files 634.1, 634.2, & 634.3, (Form 3/4/5 (A/V/D respectively) Error(s)), sorted by form, then by: clinic, date, patient & includes: pt name, last 4, form, & date ; Apr 2000
"RTN","HBHCRP1A",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,10,13,16**;NOV 01, 1993
"RTN","HBHCRP1A",3,0)
 ; visits display current outpatient encounter file data, allowing easier re-entry when cleaning up errors, includes: Pt file IEN, error, provider, Dx, CPT code with Modifiers & clinic name, calls HBHCRP1B & PSEUDO^HBHCUTL3
"RTN","HBHCRP1A",4,0)
 I $P(^HBHC(631.9,1,0),U,8)]"" W *7,!,"File Update in progress.  Please try again later." H 3 Q
"RTN","HBHCRP1A",5,0)
 S %ZIS="Q",HBHCCC=0 K IOP,ZTIO,ZTSAVE D ^%ZIS Q:POP
"RTN","HBHCRP1A",6,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP1A",ZTSAVE("HBHC*")="",ZTDESC="HBPC Form Errors Report" D ^%ZTLOAD G EXIT
"RTN","HBHCRP1A",7,0)
DQ ; De-queue
"RTN","HBHCRP1A",8,0)
 U IO
"RTN","HBHCRP1A",9,0)
 D START^HBHCRP1B
"RTN","HBHCRP1A",10,0)
LOOP ; Loop thru files 634.1, 634.2 & 634.3 "B" cross-ref
"RTN","HBHCRP1A",11,0)
 F HBHCFILE=634.1,634.2,634.3 S HBHCDPT="" F  S HBHCDPT=$O(^HBHC(HBHCFILE,"B",HBHCDPT)) Q:HBHCDPT=""  D SETUP^HBHCRP1B S HBHCIEN="" F  S HBHCIEN=$O(^HBHC(HBHCFILE,"B",HBHCDPT,HBHCIEN)) Q:HBHCIEN=""  D PROCESS
"RTN","HBHCRP1A",12,0)
 D PRTLOOP^HBHCRP1B D:$D(^HBHC(634.5,"B")) PSEUDO^HBHCUTL3
"RTN","HBHCRP1A",13,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<12) W @IOF D HDRPAGE^HBHCUTL
"RTN","HBHCRP1A",14,0)
 D:$D(^HBHC(634.2,"B")) PCEMSG^HBHCUTL3 D ENDRPT^HBHCUTL1
"RTN","HBHCRP1A",15,0)
EXIT ; Exit module
"RTN","HBHCRP1A",16,0)
 D EXIT^HBHCRP1B
"RTN","HBHCRP1A",17,0)
 Q
"RTN","HBHCRP1A",18,0)
PROCESS ; Process report data
"RTN","HBHCRP1A",19,0)
 S HBHCDPT0=^DPT(HBHCDPT,0),HBHCNOD0=$S(HBHCFORM="V":$G(^HBHC(HBHCFL,HBHCIEN,0)),1:$G(^HBHC(HBHCFL,$P(^HBHC(HBHCFILE,HBHCIEN,0),U,2),0)))
"RTN","HBHCRP1A",20,0)
 ; Form 3: use Evaluation Date (field 1) if Date (field 17) null, 'reject' episodes prior to PCE patch will only have eval date
"RTN","HBHCRP1A",21,0)
 S (HBHCDAT,Y)=$P(HBHCNOD0,U,HBHCPC) S:(HBHCFORM="A")&(Y="") (HBHCDAT,Y)=$P(HBHCNOD0,U,2) D DD^%DT S HBHCDATE=$E(Y,1,18) S:HBHCDAT="" (HBHCDAT,HBHCDATE)="Missing"
"RTN","HBHCRP1A",22,0)
 S HBHCNAME=$E($P(HBHCDPT0,U),1,14),HBHCSSN=$E($P(HBHCDPT0,U,9),6,9)
"RTN","HBHCRP1A",23,0)
 S HBHCCLN="n/a" S:HBHCFORM="V" HBHCCLN=$S($P(HBHCNOD0,U,6)]"":$E($P(^SC($P(HBHCNOD0,U,6),0),U),1,18),1:"Unknown")
"RTN","HBHCRP1A",24,0)
 S HBHCMSG="" S:HBHCFORM="V" HBHCMSG=$S($P(HBHCNOD0,U,3)]"":$P(^HBHC(633.1,$P(HBHCNOD0,U,3),0),U),1:"")
"RTN","HBHCRP1A",25,0)
 I HBHCFORM="V" S HBHCOEP=$P(HBHCNOD0,U,4) D:HBHCOEP]"" OE
"RTN","HBHCRP1A",26,0)
 S ^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,1)="`"_HBHCDPT_U_HBHCDATE_U_HBHCMSG
"RTN","HBHCRP1A",27,0)
 Q
"RTN","HBHCRP1A",28,0)
OE ; Process Outpatient Encounter data
"RTN","HBHCRP1A",29,0)
 ; Provider, 2 pieces of info delimited by $ (Provider name & V PROVIDER  ^AUPNVPRV(9000010.06) DFN)
"RTN","HBHCRP1A",30,0)
 K HBHCPRV1,HBHCPRVL
"RTN","HBHCRP1A",31,0)
 D GETPRV^SDOE(HBHCOEP,"HBHCPRVL")
"RTN","HBHCRP1A",32,0)
 S HBHCDFN=0 F HBHCI=1:1 S HBHCDFN=$O(HBHCPRVL(HBHCDFN)) Q:HBHCDFN'>0  S HBHCPRVP=$P(HBHCPRVL(HBHCDFN),U),^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,2,HBHCI)=$S(HBHCPRVP]"":$P(^VA(200,HBHCPRVP,0),U)_"$"_HBHCPRVP,1:"")
"RTN","HBHCRP1A",33,0)
 ; Dx
"RTN","HBHCRP1A",34,0)
 K HBHCDXL
"RTN","HBHCRP1A",35,0)
 D GETDX^SDOE(HBHCOEP,"HBHCDXL")
"RTN","HBHCRP1A",36,0)
 S HBHCDFN=0 F HBHCI=1:1 S HBHCDFN=$O(HBHCDXL(HBHCDFN)) Q:HBHCDFN'>0  S HBHCINFO=HBHCDXL(HBHCDFN),HBHCICDP=$P(HBHCINFO,U),HBHCDX1=$S($P(HBHCINFO,U,12)="P":"* ",1:HBHCSP2) D ICD
"RTN","HBHCRP1A",37,0)
 ; CPT Code, 3 pieces of info delimited by $ (CPT Code w/Text, Quantity of CPT code & New Person file (200) DFN), must match V PROVIDER ^AUPNVPRV(9000010.06) DFN to ensure same provider
"RTN","HBHCRP1A",38,0)
 K HBHCCPTL,HBHCPRV
"RTN","HBHCRP1A",39,0)
 D GETCPT^SDOE(HBHCOEP,"HBHCCPTL")
"RTN","HBHCRP1A",40,0)
 S HBHCDFN=0 F HBHCI=1:1  S HBHCDFN=$O(HBHCCPTL(HBHCDFN)) Q:HBHCDFN'>0  S HBHCJ=0 F  S HBHCJ=$O(HBHCCPTL(HBHCDFN,HBHCJ)) Q:HBHCJ'>0  S HBHCINFO=HBHCCPTL(HBHCDFN,0),HBHCCPT=$$CPT^ICPTCOD($P(HBHCINFO,U)) D SETCPT,MOD
"RTN","HBHCRP1A",41,0)
 Q
"RTN","HBHCRP1A",42,0)
ICD ; Dx info
"RTN","HBHCRP1A",43,0)
 S ^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,3,HBHCI)=HBHCDX1_$S(HBHCICDP]"":$P(^ICD9(HBHCICDP,0),U)_"  "_$P(^ICD9(HBHCICDP,0),U,3),1:"")_$S(HBHCDX1["*":"  *  Primary Dx",1:"")
"RTN","HBHCRP1A",44,0)
 Q
"RTN","HBHCRP1A",45,0)
SETCPT ; Set TMP global with CPT info
"RTN","HBHCRP1A",46,0)
 S ^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,4,HBHCI)=$P(HBHCCPT,U,2)_HBHCSP3_$P(HBHCCPT,U,3)_"$"_$P(HBHCINFO,U,16)_"$"_$S($D(HBHCCPTL(HBHCDFN,12)):$P(HBHCCPTL(HBHCDFN,12),U,4),1:"")
"RTN","HBHCRP1A",47,0)
 Q
"RTN","HBHCRP1A",48,0)
MOD ; CPT Modifier loop & set
"RTN","HBHCRP1A",49,0)
 S HBHCK=0
"RTN","HBHCRP1A",50,0)
 F  S HBHCK=$O(HBHCCPTL(HBHCDFN,HBHCJ,HBHCK)) Q:HBHCK'>0  S HBHCMOD=$$MOD^ICPTMOD(HBHCCPTL(HBHCDFN,HBHCJ,HBHCK,0),"I"),^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,4,HBHCI,HBHCJ)=$P(HBHCMOD,U,2)_HBHCSP3_$P(HBHCMOD,U,3)
"RTN","HBHCRP1A",51,0)
 Q
"RTN","HBHCRP1B")
0^25^B17259643
"RTN","HBHCRP1B",1,0)
HBHCRP1B ; LR VAMC(IRMS)/MJT-HBHC report on files 634.1, 634.2, & 634.3, (Form 3/4/5 (A/V/D respectively) Error(s)), called by HBHCRP1A, entry points:  START, SETUP, PRTLOOP, EXIT ; April 2000
"RTN","HBHCRP1B",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,10,16**;NOV 01, 1993
"RTN","HBHCRP1B",3,0)
START ; Entry point
"RTN","HBHCRP1B",4,0)
 K ^TMP("HBHC",$J)
"RTN","HBHCRP1B",5,0)
 ; Max length for HBHCHEAD = 50
"RTN","HBHCRP1B",6,0)
 S $P(HBHCSP2," ",3)="",$P(HBHCSP3," ",4)="",HBHCTEXT="   Modifier:   - ",$P(HBHCY,"-",81)="",HBHCPAGE=0,HBHCHEAD="Form Errors"
"RTN","HBHCRP1B",7,0)
 S HBHCHDR="W ""Patient"",?27,""Last"",!,""File IEN"",?10,""Patient Name"",?27,""Four"",?34,""Visit Clinic Name"",?55,""Date"",?75,""Form"""
"RTN","HBHCRP1B",8,0)
 S HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1 D TODAY^HBHCUTL
"RTN","HBHCRP1B",9,0)
 Q
"RTN","HBHCRP1B",10,0)
SETUP ; Setup variables
"RTN","HBHCRP1B",11,0)
 S HBHCFORM=$S(HBHCFILE=634.1:"A",HBHCFILE=634.2:"V",1:"D"),HBHCFL=$S(HBHCFORM="V":634.2,1:631),HBHCPC=$S(HBHCFORM="D":40,HBHCFORM="V":5,1:18)
"RTN","HBHCRP1B",12,0)
 Q
"RTN","HBHCRP1B",13,0)
PRTLOOP ; Print loop
"RTN","HBHCRP1B",14,0)
 D:IO'=IO(0)!($D(IO("S"))) HDRPAGE^HBHCUTL
"RTN","HBHCRP1B",15,0)
 I '$D(IO("S")),(IO=IO(0)) S HBHCCC=HBHCCC+1 D HDRPAGE^HBHCUTL
"RTN","HBHCRP1B",16,0)
 S HBHCFORM=""
"RTN","HBHCRP1B",17,0)
 F  S HBHCFORM=$O(^TMP("HBHC",$J,HBHCFORM)) Q:HBHCFORM=""  D SETTXT S HBHCCLN="" F  S HBHCCLN=$O(^TMP("HBHC",$J,HBHCFORM,HBHCCLN)) Q:HBHCCLN=""  S HBHCDAT="" F  S HBHCDAT=$O(^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT)) Q:HBHCDAT=""  D LOOP2
"RTN","HBHCRP1B",18,0)
 Q
"RTN","HBHCRP1B",19,0)
SETTXT ; Set text
"RTN","HBHCRP1B",20,0)
 S HBHCTXT=$S(HBHCFORM="A":"E/Adm",HBHCFORM="V":"Visit",1:"D/C")
"RTN","HBHCRP1B",21,0)
 Q
"RTN","HBHCRP1B",22,0)
LOOP2 ; Continuation of PRTLOOP
"RTN","HBHCRP1B",23,0)
 S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME)) Q:HBHCNAME=""  S HBHCSSN="" F  S HBHCSSN=$O(^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN)) Q:HBHCSSN=""  D PRINT
"RTN","HBHCRP1B",24,0)
 Q
"RTN","HBHCRP1B",25,0)
PRINT ; Print report
"RTN","HBHCRP1B",26,0)
 S HBHCINFO=^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,1)
"RTN","HBHCRP1B",27,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<12) W @IOF D HDRPAGE^HBHCUTL
"RTN","HBHCRP1B",28,0)
 W !,$J($P(HBHCINFO,U),8),?10,HBHCNAME,?27,HBHCSSN,?34,HBHCCLN,?55,$P(HBHCINFO,U,2),"  ",?75,HBHCTXT W:$P(HBHCINFO,U,3)]"" !,"Error:  ",$P(HBHCINFO,U,3)
"RTN","HBHCRP1B",29,0)
 I HBHCFORM'="V" W !,HBHCY Q
"RTN","HBHCRP1B",30,0)
 ; provider
"RTN","HBHCRP1B",31,0)
 F HBHCI=1:1 S HBHCINFO=$G(^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,2,HBHCI)) Q:HBHCINFO=""  W !,"Provider:  ",$P(HBHCINFO,"$"),?54,"Encounter Prov #:",?72,$J($P(HBHCINFO,"$",2),8)
"RTN","HBHCRP1B",32,0)
 ; Dx
"RTN","HBHCRP1B",33,0)
 F HBHCI=1:1 S HBHCINFO=$G(^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,3,HBHCI)) Q:HBHCINFO=""  W !,"ICD9:  ",HBHCINFO
"RTN","HBHCRP1B",34,0)
 ; CPT code
"RTN","HBHCRP1B",35,0)
 F HBHCI=1:1 S HBHCINFO=$G(^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,4,HBHCI)) Q:HBHCINFO=""  D CPT F HBHCJ=1:1 S HBHCINFO=$G(^TMP("HBHC",$J,HBHCFORM,HBHCCLN,HBHCDAT,HBHCNAME,HBHCSSN,4,HBHCI,HBHCJ)) Q:HBHCINFO=""   D MOD
"RTN","HBHCRP1B",36,0)
 W !,HBHCY
"RTN","HBHCRP1B",37,0)
 Q
"RTN","HBHCRP1B",38,0)
CPT ; Write CPT info
"RTN","HBHCRP1B",39,0)
 W !?1,"CPT:  ",$P(HBHCINFO,"$"),?45,"QTY: ",$J($P(HBHCINFO,"$",2),3),?55,"CPT Code Prov #:",?72,$J($P(HBHCINFO,"$",3),8)
"RTN","HBHCRP1B",40,0)
 Q
"RTN","HBHCRP1B",41,0)
MOD ; Write Modifier info
"RTN","HBHCRP1B",42,0)
 W !,HBHCTEXT,HBHCINFO
"RTN","HBHCRP1B",43,0)
 Q
"RTN","HBHCRP1B",44,0)
EXIT ; Exit module
"RTN","HBHCRP1B",45,0)
 D ^%ZISC
"RTN","HBHCRP1B",46,0)
 K DA,DIK,HBHCCC,HBHCCLN,HBHCCOLM,HBHCCPT,HBHCCPTL,HBHCDAT,HBHCDATE,HBHCDFN,HBHCDPT,HBHCDPT0,HBHCDX1,HBHCDXL,HBHCFILE,HBHCFL,HBHCFORM,HBHCHDR,HBHCHEAD,HBHCI,HBHCICDP,HBHCIEN,HBHCINFO,HBHCJ,HBHCK,HBHCMOD,HBHCMSG,HBHCNAME,HBHCNOD0
"RTN","HBHCRP1B",47,0)
 K HBHCOEP,HBHCPAGE,HBHCPC,HBHCPRV,HBHCPRV1,HBHCPRVL,HBHCPRVP,HBHCSP2,HBHCSP3,HBHCSSN,HBHCTDY,HBHCTEXT,HBHCTXT,HBHCY,HBHCZ,X,Y,^TMP("HBHC",$J)
"RTN","HBHCRP1B",48,0)
 Q
"RTN","HBHCRP20")
0^19^B11351418
"RTN","HBHCRP20",1,0)
HBHCRP20 ; LR VAMC(IRMS)/MJT-HBHC report on file 632, unique patients by date range summary ; Apr 2000
"RTN","HBHCRP20",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**8,10,16**;NOV 01, 1993
"RTN","HBHCRP20",3,0)
 D START^HBHCUTL
"RTN","HBHCRP20",4,0)
 G:(HBHCBEG1=-1)!(HBHCEND1=-1) EXIT
"RTN","HBHCRP20",5,0)
 S %ZIS="Q",HBHCCC=0 K IOP,ZTIO,ZTSAVE D ^%ZIS G:POP EXIT
"RTN","HBHCRP20",6,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP20",ZTDESC="HBPC Unique Patients by Date Range Summary Report",ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCRP20",7,0)
DQ ; De-queue
"RTN","HBHCRP20",8,0)
 U IO
"RTN","HBHCRP20",9,0)
 K ^TMP("HBHC",$J)
"RTN","HBHCRP20",10,0)
 S $P(HBHCY,"-",81)="",HBHCHEAD="Unique Patients by Date Range Summary",(HBHCCNT,HBHCCNT1)=0
"RTN","HBHCRP20",11,0)
 S HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCRP20",12,0)
 D TODAY^HBHCUTL D:IO'=IO(0)!($D(IO("S"))) HDRRANGE^HBHCUTL
"RTN","HBHCRP20",13,0)
 I '$D(IO("S")),(IO=IO(0)) S HBHCCC=HBHCCC+1 D HDRRANGE^HBHCUTL
"RTN","HBHCRP20",14,0)
LOOP ; Loop thru ^HBHC(632) "C" (appointment date) cross-ref to build report
"RTN","HBHCRP20",15,0)
 S X1=HBHCBEG1,X2=-1 D C^%DTC S HBHCAPDT=X_.9999
"RTN","HBHCRP20",16,0)
 F  S HBHCAPDT=$O(^HBHC(632,"C",HBHCAPDT)) Q:(HBHCAPDT="")!(HBHCAPDT>HBHCEND1)  S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(632,"C",HBHCAPDT,HBHCDFN)) Q:HBHCDFN=""  S HBHCNOD0=^HBHC(632,HBHCDFN,0) D:$P(HBHCNOD0,U,7)="" PROCESS
"RTN","HBHCRP20",17,0)
 D CNTLOOP
"RTN","HBHCRP20",18,0)
 W !!,"Total Patients with Single Appointment Only:",?46,$J(HBHCCNT1,4)
"RTN","HBHCRP20",19,0)
 W !,"Total Patients with Multiple Appointments:",?46,$J(HBHCCNT,4)
"RTN","HBHCRP20",20,0)
 W !!,"Total Unique Patients:  ",$J((HBHCCNT+HBHCCNT1),5)
"RTN","HBHCRP20",21,0)
 D ENDRPT^HBHCUTL1
"RTN","HBHCRP20",22,0)
EXIT ; Exit module
"RTN","HBHCRP20",23,0)
 D ^%ZISC
"RTN","HBHCRP20",24,0)
 K HBHCAPDT,HBHCBEG1,HBHCBEG2,HBHCCC,HBHCCNT,HBHCCNT1,HBHCCOLM,HBHCDFN,HBHCDPT0,HBHCEND1,HBHCEND2,HBHCHEAD,HBHCNAME,HBHCNOD0,HBHCPAGE,HBHCSSN,HBHCTDY,HBHCY,HBHCZ,X,X1,X2,Y,^TMP("HBHC",$J)
"RTN","HBHCRP20",25,0)
 Q
"RTN","HBHCRP20",26,0)
PROCESS ; Process record & build ^TMP("HBHC",$J) global
"RTN","HBHCRP20",27,0)
 S HBHCDPT0=^DPT($P(HBHCNOD0,U),0)
"RTN","HBHCRP20",28,0)
 D:$D(^TMP("HBHC",$J,$P(HBHCDPT0,U),$E($P(HBHCDPT0,U,9),1,3)_"-"_$E($P(HBHCDPT0,U,9),4,5)_"-"_$E($P(HBHCDPT0,U,9),6,9))) SET
"RTN","HBHCRP20",29,0)
 S:'$D(^TMP("HBHC",$J,$P(HBHCDPT0,U),$E($P(HBHCDPT0,U,9),1,3)_"-"_$E($P(HBHCDPT0,U,9),4,5)_"-"_$E($P(HBHCDPT0,U,9),6,9))) ^TMP("HBHC",$J,$P(HBHCDPT0,U),$E($P(HBHCDPT0,U,9),1,3)_"-"_$E($P(HBHCDPT0,U,9),4,5)_"-"_$E($P(HBHCDPT0,U,9),6,9))=HBHCAPDT
"RTN","HBHCRP20",30,0)
 Q
"RTN","HBHCRP20",31,0)
SET ; Set ^TMP("HBHC",$J
"RTN","HBHCRP20",32,0)
 S ^TMP("HBHC",$J,$P(HBHCDPT0,U),$E($P(HBHCDPT0,U,9),1,3)_"-"_$E($P(HBHCDPT0,U,9),4,5)_"-"_$E($P(HBHCDPT0,U,9),6,9))=HBHCAPDT_U_"*"
"RTN","HBHCRP20",33,0)
 Q
"RTN","HBHCRP20",34,0)
CNTLOOP ; Count loop
"RTN","HBHCRP20",35,0)
 S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCNAME)) Q:HBHCNAME=""  S HBHCSSN="" F  S HBHCSSN=$O(^TMP("HBHC",$J,HBHCNAME,HBHCSSN)) Q:HBHCSSN=""  D COUNT
"RTN","HBHCRP20",36,0)
 Q
"RTN","HBHCRP20",37,0)
COUNT ; Count
"RTN","HBHCRP20",38,0)
 ; patients with multiple visits
"RTN","HBHCRP20",39,0)
 S:$P(^TMP("HBHC",$J,HBHCNAME,HBHCSSN),U,2)]"" HBHCCNT=HBHCCNT+1
"RTN","HBHCRP20",40,0)
 ; patients with only 1 visit
"RTN","HBHCRP20",41,0)
 S:$P(^TMP("HBHC",$J,HBHCNAME,HBHCSSN),U,2)="" HBHCCNT1=HBHCCNT1+1
"RTN","HBHCRP20",42,0)
 Q
"RTN","HBHCRP21")
0^20^B50792838
"RTN","HBHCRP21",1,0)
HBHCRP21 ; LR VAMC(IRMS)/MJT-HBHC report on file 632, number of pat visits by date range, with total pats & total visits, user selectable alpha or number of visits sort, number of visits has subtotals & summary, calls CPT^HBHCUTL3 ; Apr 2000
"RTN","HBHCRP21",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**13,15,16**;NOV 01, 1993
"RTN","HBHCRP21",3,0)
 D START^HBHCUTL
"RTN","HBHCRP21",4,0)
 G:(HBHCBEG1=-1)!(HBHCEND1=-1) EXIT
"RTN","HBHCRP21",5,0)
 W !,"Visits containing any of the following CPT Codes are omitted from report:"
"RTN","HBHCRP21",6,0)
 W !!?2,"99358  PROLONGED SERV, W/O CONTACT"
"RTN","HBHCRP21",7,0)
 W !?2,"99359  PROLONGED SERV, W/O CONTACT"
"RTN","HBHCRP21",8,0)
 W !?2,"99361  PHYSICIAN/TEAM CONFERENCE"
"RTN","HBHCRP21",9,0)
 W !?2,"99362  PHYSICIAN/TEAM CONFERENCE"
"RTN","HBHCRP21",10,0)
 W !?2,"99371  PHYSICIAN PHONE CONSULTATION"
"RTN","HBHCRP21",11,0)
 W !?2,"99372  PHYSICIAN PHONE CONSULTATION"
"RTN","HBHCRP21",12,0)
 W !?2,"99373  PHYSICIAN PHONE CONSULTATION"
"RTN","HBHCRP21",13,0)
 W !?2,"99374  HOME HEALTH CARE SUPERVISION"
"RTN","HBHCRP21",14,0)
 W !?2,"99375  HOME HEALTH CARE SUPERVISION"
"RTN","HBHCRP21",15,0)
 W !?2,"99376  CARE PLAN OVERSIGHT/OVER 60",!
"RTN","HBHCRP21",16,0)
PROMPT ; Prompt user for CPT code
"RTN","HBHCRP21",17,0)
 K DIR S DIR(0)="PO^81",DIR("A")="Enter any other CPT code you wish to omit",DIR("?")="Enter 5 digit CPT code you wish to omit from report." D ^DIR
"RTN","HBHCRP21",18,0)
 G:$D(DTOUT) EXIT I '$D(DUOUT) I X'="" S HBHCCPTL(X)="" G PROMPT
"RTN","HBHCRP21",19,0)
 W !
"RTN","HBHCRP21",20,0)
 ; Prompt user for sort preference
"RTN","HBHCRP21",21,0)
 K DIR S DIR(0)="SM^A:Alphabetical;V:Number of Visits",DIR("A")="Sort Preference",DIR("B")="V",DIR("?")="Sort report alphabetically by patient (A), or by number of visits (V).  Visit sort includes subtotals & summary." D ^DIR
"RTN","HBHCRP21",22,0)
 G:$D(DIRUT) EXIT
"RTN","HBHCRP21",23,0)
 ; HBHCFLG exists if visit sort selected
"RTN","HBHCRP21",24,0)
 S:X="V" HBHCFLG=1
"RTN","HBHCRP21",25,0)
 S %ZIS="Q",HBHCCC=0 K IOP,ZTIO,ZTSAVE D ^%ZIS G:POP EXIT
"RTN","HBHCRP21",26,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP21",ZTDESC=$S($D(HBHCFLG):"HBPC Total Visits by Date Range Report,Visit Sort",1:"HBPC Total Visits by Date Range Report"),ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCRP21",27,0)
DQ ; De-queue
"RTN","HBHCRP21",28,0)
 ; CPT codes omitted from inclusion on report
"RTN","HBHCRP21",29,0)
 S HBHCCPTL(99358)="",HBHCCPTL(99359)="",HBHCCPTL(99361)="",HBHCCPTL(99362)="",HBHCCPTL(99371)="",HBHCCPTL(99372)="",HBHCCPTL(99373)="",HBHCCPTL(99374)="",HBHCCPTL(99375)="",HBHCCPTL(99376)=""
"RTN","HBHCRP21",30,0)
 U IO
"RTN","HBHCRP21",31,0)
 K ^TMP("HBHC",$J)
"RTN","HBHCRP21",32,0)
 S $P(HBHCY,"-",81)="",$P(HBHCZ,"=",81)="",(HBHCCNT,HBHCCNT1,HBHCTOT)=0
"RTN","HBHCRP21",33,0)
 S HBHCHEAD=$S($D(HBHCFLG):"Total Visits by Date Range, Visit Sort",1:"Total Visits by Date Range")
"RTN","HBHCRP21",34,0)
 S HBHCHDR="W !?31,""Last"",?40,""Visit"",?68,""Discharge"",!,""Patient Name"",?31,""Four"",?40,""Total"",?50,""Date"",?68,""Date""",HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCRP21",35,0)
LOOP ; Loop thru ^HBHC(632) "C" (appointment date) cross-ref to build report
"RTN","HBHCRP21",36,0)
 S X1=HBHCBEG1,X2=-1 D C^%DTC S HBHCAPDT=X_.9999
"RTN","HBHCRP21",37,0)
 F  S HBHCAPDT=$O(^HBHC(632,"C",HBHCAPDT)) Q:(HBHCAPDT="")!(HBHCAPDT>HBHCEND1)  S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(632,"C",HBHCAPDT,HBHCDFN)) Q:HBHCDFN=""  S HBHCNOD0=^HBHC(632,HBHCDFN,0) D:$P(HBHCNOD0,U,7)="" PROCESS
"RTN","HBHCRP21",38,0)
 D TODAY^HBHCUTL D:IO'=IO(0)!($D(IO("S"))) HDRRANGE^HBHCUTL
"RTN","HBHCRP21",39,0)
 I '$D(IO("S")),(IO=IO(0)) S HBHCCC=HBHCCC+1 D HDRRANGE^HBHCUTL
"RTN","HBHCRP21",40,0)
 W:'$D(^TMP("HBHC",$J)) !!,"No Visits found for Date Range selected."
"RTN","HBHCRP21",41,0)
 I $D(^TMP("HBHC",$J)) W !!,"Visits containing any of the following CPT Codes are omitted from report:",! S HBHCCPT="" F  S HBHCCPT=$O(HBHCCPTL(HBHCCPT)) Q:HBHCCPT=""  S HBHC=$$CPT^ICPTCOD(HBHCCPT) W !?2,$P(HBHC,U,2)_"  "_$P(HBHC,U,3)
"RTN","HBHCRP21",42,0)
 I $D(^TMP("HBHC",$J)) W !!,HBHCY D:$D(HBHCFLG) SORT,PRTLOOP,SUMMARY I '$D(HBHCFLG) D APRTLOOP W !!,"Total Patients:  ",$J(HBHCCNT,4),!!,"Total Visits:  ",$J(HBHCTOT,6)
"RTN","HBHCRP21",43,0)
 D ENDRPT^HBHCUTL1
"RTN","HBHCRP21",44,0)
EXIT ; Exit module
"RTN","HBHCRP21",45,0)
 D ^%ZISC
"RTN","HBHCRP21",46,0)
 K DIR,HBHC,HBHCADDT,HBHCAPDT,HBHCBEG1,HBHCBEG2,HBHCCC,HBHCCNT,HBHCCNT1,HBHCCOLM,HBHCCPT,HBHCCPTL,HBHCDFN,HBHCDPT0,HBHCDSDT,HBHCEND1,HBHCEND2,HBHCFLAG,HBHCFLG,HBHCHEAD,HBHCHDR,HBHCI,HBHCIEN,HBHCINFO,HBHCNAME,HBHCNBR,HBHCNOD0
"RTN","HBHCRP21",47,0)
 K HBHCPAGE,HBHCLST4,HBHCTDY,HBHCTOT,HBHCY,HBHCZ,X,X1,X2,Y,^TMP("HBHC",$J)
"RTN","HBHCRP21",48,0)
 Q
"RTN","HBHCRP21",49,0)
PROCESS ; Process record & build ^TMP("HBHC",$J) global
"RTN","HBHCRP21",50,0)
 ; Quit if no CPT codes
"RTN","HBHCRP21",51,0)
 D CPT^HBHCUTL3 Q:'$D(HBHCCPTA)
"RTN","HBHCRP21",52,0)
 ; Quit if contains CPT code to be omitted
"RTN","HBHCRP21",53,0)
 K HBHCFLAG
"RTN","HBHCRP21",54,0)
 S HBHCI="" F  S HBHCI=$O(HBHCCPTA(HBHCI)) Q:(HBHCI="")!($D(HBHCFLAG))  S HBHCCPT=$P(HBHCCPTA(HBHCI),"  ") S:$D(HBHCCPTL(HBHCCPT)) HBHCFLAG=1
"RTN","HBHCRP21",55,0)
 Q:$D(HBHCFLAG)
"RTN","HBHCRP21",56,0)
 S HBHCDPT0=^DPT($P(HBHCNOD0,U),0),HBHCNAME=$P(HBHCDPT0,U),HBHCLST4=$E($P(HBHCDPT0,U,9),1,3)_"-"_$E($P(HBHCDPT0,U,9),4,5)_"-"_$E($P(HBHCDPT0,U,9),6,9)
"RTN","HBHCRP21",57,0)
 S (HBHCADDT,HBHCDSDT)=""
"RTN","HBHCRP21",58,0)
 S HBHCIEN=0 F  S HBHCIEN=$O(^HBHC(631,"B",$P(HBHCNOD0,U),HBHCIEN)) Q:HBHCIEN'>0  S HBHCINFO=^HBHC(631,HBHCIEN,0),HBHCADDT=$P(HBHCINFO,U,18),HBHCDSDT=$P(HBHCINFO,U,40)
"RTN","HBHCRP21",59,0)
 ; patient not in HBHC(631
"RTN","HBHCRP21",60,0)
 S:HBHCADDT="" HBHCADDT="n/a"
"RTN","HBHCRP21",61,0)
 S:HBHCDSDT="" HBHCDSDT="n/a"
"RTN","HBHCRP21",62,0)
 I $D(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) S ^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)=^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)+1
"RTN","HBHCRP21",63,0)
 S:'$D(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) ^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)=1
"RTN","HBHCRP21",64,0)
 Q
"RTN","HBHCRP21",65,0)
SORT ; Sort TMP according to number of visits
"RTN","HBHCRP21",66,0)
 S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCNAME)) Q:HBHCNAME=""  S HBHCLST4="" F  S HBHCLST4=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4)) Q:HBHCLST4=""  D SORTLOOP
"RTN","HBHCRP21",67,0)
 Q
"RTN","HBHCRP21",68,0)
SORTLOOP ; Sort loop
"RTN","HBHCRP21",69,0)
 S HBHCADDT="" F  S HBHCADDT=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT)) Q:HBHCADDT=""  S HBHCDSDT="" F  S HBHCDSDT=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) Q:HBHCDSDT=""  D SET
"RTN","HBHCRP21",70,0)
 Q
"RTN","HBHCRP21",71,0)
SET ; Set TMP in re-sorted order by number of visits, kill old TMP node
"RTN","HBHCRP21",72,0)
 S HBHCNBR=^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)
"RTN","HBHCRP21",73,0)
 S ^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)=HBHCNBR
"RTN","HBHCRP21",74,0)
 K ^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)
"RTN","HBHCRP21",75,0)
 Q
"RTN","HBHCRP21",76,0)
PRTLOOP ; Print loop
"RTN","HBHCRP21",77,0)
 S HBHCNBR="" F  S HBHCNBR=$O(^TMP("HBHC",$J,HBHCNBR)) Q:HBHCNBR=""  D PRTLOOP2 W:HBHCCNT1>0 !!?5,"Total Patients with ",HBHCNBR," Visit(s):  ",HBHCCNT1,!!,HBHCY S HBHC(HBHCNBR)=HBHCCNT1,HBHCCNT1=0
"RTN","HBHCRP21",78,0)
 Q
"RTN","HBHCRP21",79,0)
PRTLOOP2 ; Print loop continued
"RTN","HBHCRP21",80,0)
 S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCNBR,HBHCNAME)) Q:HBHCNAME=""  S HBHCLST4="" F  S HBHCLST4=$O(^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4)) Q:HBHCLST4=""  D PRTLOOP3
"RTN","HBHCRP21",81,0)
 Q
"RTN","HBHCRP21",82,0)
PRTLOOP3 ; Print loop continued again
"RTN","HBHCRP21",83,0)
 S HBHCADDT="" F  S HBHCADDT=$O(^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4,HBHCADDT)) Q:HBHCADDT=""  S HBHCDSDT="" F  S HBHCDSDT=$O(^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) Q:HBHCDSDT=""  D PRINT
"RTN","HBHCRP21",84,0)
 Q
"RTN","HBHCRP21",85,0)
APRTLOOP ; Print loop for alphabetic sort
"RTN","HBHCRP21",86,0)
 S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCNAME)) Q:HBHCNAME=""  S HBHCLST4="" F  S HBHCLST4=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4)) Q:HBHCLST4=""  D APRTLP2
"RTN","HBHCRP21",87,0)
 Q
"RTN","HBHCRP21",88,0)
APRTLP2 ; Print loop for alphabetic sort continued
"RTN","HBHCRP21",89,0)
 S HBHCADDT="" F  S HBHCADDT=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT)) Q:HBHCADDT=""  S HBHCDSDT="" F  S HBHCDSDT=$O(^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)) Q:HBHCDSDT=""  D PRINT
"RTN","HBHCRP21",90,0)
 Q
"RTN","HBHCRP21",91,0)
PRINT ; Print report
"RTN","HBHCRP21",92,0)
 S HBHCCNT=HBHCCNT+1
"RTN","HBHCRP21",93,0)
 S:$D(HBHCFLG) HBHCINFO=^TMP("HBHC",$J,HBHCNBR,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT),HBHCCNT1=HBHCCNT1+1
"RTN","HBHCRP21",94,0)
 S:'$D(HBHCFLG) HBHCINFO=^TMP("HBHC",$J,HBHCNAME,HBHCLST4,HBHCADDT,HBHCDSDT)
"RTN","HBHCRP21",95,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<7) W @IOF D HDRRANGE^HBHCUTL
"RTN","HBHCRP21",96,0)
 S HBHCTOT=HBHCTOT+($P(HBHCINFO,U))
"RTN","HBHCRP21",97,0)
 W !,$E(HBHCNAME,1,25),?31,$E(HBHCLST4,8,11),?41,$J($P(HBHCINFO,U),3)
"RTN","HBHCRP21",98,0)
 S Y=HBHCADDT D DD^%DT W ?50,Y
"RTN","HBHCRP21",99,0)
 S Y=HBHCDSDT D DD^%DT W ?68,$S(Y'="n/a":Y,1:"")
"RTN","HBHCRP21",100,0)
 W !,HBHCY
"RTN","HBHCRP21",101,0)
 Q
"RTN","HBHCRP21",102,0)
SUMMARY ; Print report summary
"RTN","HBHCRP21",103,0)
 W @IOF,HBHCZ,!?22,"******  Total Visits Summary  ******",!,HBHCZ,!
"RTN","HBHCRP21",104,0)
 S HBHCNBR=0 F  S HBHCNBR=$O(HBHC(HBHCNBR)) Q:HBHCNBR'>0  W !,"Total Patients with ",$J(HBHCNBR,3)," Visit(s):  ",$J(HBHC(HBHCNBR),4)
"RTN","HBHCRP21",105,0)
 W !?34,"------",!,"Total Patients:  ",?35,$J(HBHCCNT,4),!!,"Total Visits:  ",?33,$J(HBHCTOT,6)
"RTN","HBHCRP21",106,0)
 Q
"RTN","HBHCRP22")
0^22^B12653102
"RTN","HBHCRP22",1,0)
HBHCRP22 ; LR VAMC(IRMS)/MJT-HBHC rpt, file 632, user selected date range, CPT code(s) (can be range of CPTs), & Provider, with summary totals ; Apr 2000
"RTN","HBHCRP22",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**11,16**;NOV 01, 1993
"RTN","HBHCRP22",3,0)
 ; calls:  PROV^HBHCUTL2, EN^HBHCUTL2, TOT^HBHCUTL2, FTOT^HBHCUTL2, CPT^HBHCUTL3, EN1^HBHCUTL4, & KILL^HBHCUTL4
"RTN","HBHCRP22",4,0)
 D PROV^HBHCUTL2,EN^HBHCUTL2
"RTN","HBHCRP22",5,0)
 G:(%=-1)!($D(DTOUT))!($D(DUOUT)) EXIT
"RTN","HBHCRP22",6,0)
 D EN1^HBHCUTL4
"RTN","HBHCRP22",7,0)
 G:(HBHCBEG1=-1)!(HBHCEND1=-1)!($D(DTOUT))!(('$D(HBHCCPTB))&('$D(HBHCCPTE))&('$D(HBHCTMP)))!(($D(HBHCCPTB))&('$D(HBHCCPTE))) EXIT
"RTN","HBHCRP22",8,0)
 S %ZIS="Q" K IOP,ZTIO,ZTSAVE D ^%ZIS G:POP EXIT
"RTN","HBHCRP22",9,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP22",ZTDESC="HBPC Provider CPT Code Summary Report",ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCRP22",10,0)
DQ ; De-queue
"RTN","HBHCRP22",11,0)
 U IO
"RTN","HBHCRP22",12,0)
 K ^TMP("HBHC",$J)
"RTN","HBHCRP22",13,0)
 S HBHCONE=1,(HBHCFTOT,HBHCTOT)=0,$P(HBHCY,"-",81)="",HBHCTXT="CPT Code",HBHCHEAD="Provider CPT Code Summary",HBHCHDR="W !,""CPT Code"",?39,""Total""",HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCRP22",14,0)
LOOP ; Loop thru ^HBHC(632) "C" (visit date) cross-ref to build report
"RTN","HBHCRP22",15,0)
 S X1=HBHCBEG1,X2=-1 D C^%DTC S HBHCDATE=X_.9999
"RTN","HBHCRP22",16,0)
 F  S HBHCDATE=$O(^HBHC(632,"C",HBHCDATE)) Q:(HBHCDATE="")!($P(HBHCDATE,".")>HBHCEND1)  S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(632,"C",HBHCDATE,HBHCDFN)) Q:HBHCDFN=""  S HBHCNOD0=^HBHC(632,HBHCDFN,0) D:$P(HBHCNOD0,U,7)="" PROCESS
"RTN","HBHCRP22",17,0)
 I '$D(^TMP("HBHC",$J)) K HBHCNAM D HDRRANGE^HBHCUTL W !!,"No Visits containing CPT codes requested found for Date Range selected."
"RTN","HBHCRP22",18,0)
 I $D(^TMP("HBHC",$J)) D PRTLOOP D:'$D(HBHCPRVL) FTOT^HBHCUTL2
"RTN","HBHCRP22",19,0)
 D ENDRPT^HBHCUTL1
"RTN","HBHCRP22",20,0)
EXIT ; Exit module
"RTN","HBHCRP22",21,0)
 D ^%ZISC,KILL^HBHCUTL4
"RTN","HBHCRP22",22,0)
 K DIC,DTOUT,DUOUT,HBHCBEG1,HBHCCLM1,HBHCCPTB,HBHCCPTE,HBHCEND1,HBHCFTOT,HBHCHEAD,HBHCNAM,HBHCONE,HBHCPRV,HBHCPRVL,HBHCTXT,HBHCWHO,HBHCWHOC,HBHCWHOS,Y,%
"RTN","HBHCRP22",23,0)
 Q
"RTN","HBHCRP22",24,0)
PROCESS ; Process record & create ^TMP("HBHC",$J global
"RTN","HBHCRP22",25,0)
 ; Quit if not provider requested
"RTN","HBHCRP22",26,0)
 S HBHCPRV=$P(HBHCNOD0,U,4)
"RTN","HBHCRP22",27,0)
 I $D(HBHCPRVL) Q:'$D(HBHCPRVL(HBHCPRV))
"RTN","HBHCRP22",28,0)
 S HBHCDPT0=^DPT($P(HBHCNOD0,U),0)
"RTN","HBHCRP22",29,0)
 D CPT^HBHCUTL3
"RTN","HBHCRP22",30,0)
 S HBHCI=0 F  S HBHCI=$O(HBHCCPTA(HBHCI)) Q:HBHCI'>0  S HBHCCPT=HBHCCPTA(HBHCI) D SET
"RTN","HBHCRP22",31,0)
 Q
"RTN","HBHCRP22",32,0)
SET ; Set TMP node for CPTs
"RTN","HBHCRP22",33,0)
 I HBHCDIR=1 Q:(($P(HBHCCPT,"  "))<HBHCCPTB)!(($P(HBHCCPT,"  "))>HBHCCPTE)
"RTN","HBHCRP22",34,0)
 Q:(HBHCDIR=0)&('$D(HBHCTMP($P(HBHCCPT,"  "))))
"RTN","HBHCRP22",35,0)
 S HBHCNAM=$P(^VA(200,$P(^HBHC(631.4,HBHCPRV,0),U,2),0),U)_"  ("_$P(^HBHC(631.4,HBHCPRV,0),U)_")"
"RTN","HBHCRP22",36,0)
 S:$D(^TMP("HBHC",$J,HBHCNAM,HBHCCPT)) ^TMP("HBHC",$J,HBHCNAM,HBHCCPT)=^TMP("HBHC",$J,HBHCNAM,HBHCCPT)+1
"RTN","HBHCRP22",37,0)
 S:'$D(^TMP("HBHC",$J,HBHCNAM,HBHCCPT)) ^TMP("HBHC",$J,HBHCNAM,HBHCCPT)=1
"RTN","HBHCRP22",38,0)
 Q
"RTN","HBHCRP22",39,0)
PRTLOOP ; Print loop
"RTN","HBHCRP22",40,0)
 S HBHCPRV="" F  S HBHCPRV=$O(^TMP("HBHC",$J,HBHCPRV)) D:HBHCTOT>0 TOT^HBHCUTL2 Q:HBHCPRV=""  D HDR S HBHCCPT="" F  S HBHCCPT=$O(^TMP("HBHC",$J,HBHCPRV,HBHCCPT)) Q:HBHCCPT=""  D PRINT
"RTN","HBHCRP22",41,0)
 Q
"RTN","HBHCRP22",42,0)
PRINT ; Print report
"RTN","HBHCRP22",43,0)
 S HBHCCNT=^TMP("HBHC",$J,HBHCPRV,HBHCCPT)
"RTN","HBHCRP22",44,0)
 S HBHCTOT=HBHCTOT+HBHCCNT
"RTN","HBHCRP22",45,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<5) W @IOF D HDRRANGE^HBHCUTL
"RTN","HBHCRP22",46,0)
 W !,HBHCCPT,?39,HBHCCNT
"RTN","HBHCRP22",47,0)
 W !,HBHCY
"RTN","HBHCRP22",48,0)
 Q
"RTN","HBHCRP22",49,0)
HDR ; Report header setup
"RTN","HBHCRP22",50,0)
 S HBHCPAGE=0,HBHCNAM=HBHCPRV,HBHCCLM1=(80-(20+$L(HBHCNAM))\2) S:HBHCCLM1'>0 HBHCCLM1=1
"RTN","HBHCRP22",51,0)
 W @IOF D HDRRANGE^HBHCUTL
"RTN","HBHCRP22",52,0)
 Q 
"RTN","HBHCRP3")
0^12^B11588692
"RTN","HBHCRP3",1,0)
HBHCRP3 ; LR VAMC(IRMS)/MJT-HBHC report on file 632, individual patient visit data by date range, includes all fields, calls DX^HBHCUTL3, DX80^HBHCUTL3, CPT^HBHCUTL3 ; Jan 2000
"RTN","HBHCRP3",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,15,16**;NOV 01, 1993
"RTN","HBHCRP3",3,0)
PROMPT ; Prompt user for patient name
"RTN","HBHCRP3",4,0)
 K DIC S DIC="^DPT(",DIC(0)="AEMQ",HBHCCC=0 D ^DIC
"RTN","HBHCRP3",5,0)
 G:Y=-1 EXIT
"RTN","HBHCRP3",6,0)
 S HBHCDPT=+Y
"RTN","HBHCRP3",7,0)
 I '$D(^HBHC(632,"B",HBHCDPT)) W *7,!!,"This patient has no visits on file.",!! H 3 G PROMPT
"RTN","HBHCRP3",8,0)
 D START^HBHCUTL
"RTN","HBHCRP3",9,0)
 G:(HBHCBEG1=-1)!(HBHCEND1=-1) EXIT
"RTN","HBHCRP3",10,0)
 S %ZIS="Q",HBHCCC=0 K IOP,ZTIO,ZTSAVE D ^%ZIS G:POP EXIT
"RTN","HBHCRP3",11,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP3",ZTDESC="HBPC Patient Visit Data Report",ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCRP3",12,0)
DQ ; De-queue
"RTN","HBHCRP3",13,0)
 U IO
"RTN","HBHCRP3",14,0)
 S $P(HBHCY,"-",81)="",$P(HBHCZ,"=",81)="",$P(HBHCSP2," ",3)="",HBHCMSG="(continued from previous page...)"
"RTN","HBHCRP3",15,0)
 S HBHCDPT0=^DPT(HBHCDPT,0),HBHCINFO=$P(HBHCDPT0,U)_HBHCSP2_$E($P(HBHCDPT0,U,9),1,3)_"-"_$E($P(HBHCDPT0,U,9),4,5)_"-"_$E($P(HBHCDPT0,U,9),6,9)
"RTN","HBHCRP3",16,0)
 S HBHCHEAD="Patient:  "_HBHCINFO_"  Visit Data",HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCRP3",17,0)
 D:IO'=IO(0)!($D(IO("S"))) HDRRANGE^HBHCUTL
"RTN","HBHCRP3",18,0)
 I '$D(IO("S")),IO=IO(0) S HBHCCC=HBHCCC+1 D HDRRANGE^HBHCUTL
"RTN","HBHCRP3",19,0)
LOOP ; Loop thru ^HBHC(632) "B" cross-ref to build report
"RTN","HBHCRP3",20,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(632,"B",HBHCDPT,HBHCDFN)) Q:HBHCDFN=""  S HBHCNOD0=^HBHC(632,HBHCDFN,0) D:$P(HBHCNOD0,U,7)="" PROCESS
"RTN","HBHCRP3",21,0)
 D ENDRPT^HBHCUTL1
"RTN","HBHCRP3",22,0)
EXIT ; Exit module
"RTN","HBHCRP3",23,0)
 D ^%ZISC
"RTN","HBHCRP3",24,0)
 K DIC,HBHCBEG1,HBHCBEG2,HBHCCC,HBHCCOLM,HBHCCPT,HBHCCPTA,HBHCDFN,HBHCDPT,HBHCDPT0,HBHCDX1,HBHCDX2,HBHCDX3,HBHCDX4,HBHCDX5,HBHCEND1,HBHCEND2,HBHCHEAD,HBHCI,HBHCINFO,HBHCJ,HBHCMSG,HBHCNOD0,HBHCPAGE,HBHCPRV,HBHCSP2,HBHCTDY,HBHCY
"RTN","HBHCRP3",25,0)
 K HBHCZ,X,Y
"RTN","HBHCRP3",26,0)
 Q
"RTN","HBHCRP3",27,0)
PROCESS ; Process record
"RTN","HBHCRP3",28,0)
 Q:($E($P(HBHCNOD0,U,2),1,7)<HBHCBEG1)!($E($P(HBHCNOD0,U,2),1,7)>HBHCEND1)
"RTN","HBHCRP3",29,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<8) W @IOF D HDRRANGE^HBHCUTL
"RTN","HBHCRP3",30,0)
 S HBHCPRV=$S($P(HBHCNOD0,U,4)]"":$E($P(^VA(200,$P(^HBHC(631.4,$P(HBHCNOD0,U,4),0),U,2),0),U),1,23),1:"")
"RTN","HBHCRP3",31,0)
 D WRITE,DX^HBHCUTL3,DX80^HBHCUTL3,CPT^HBHCUTL3,CPT80
"RTN","HBHCRP3",32,0)
 Q
"RTN","HBHCRP3",33,0)
WRITE ; Write record info
"RTN","HBHCRP3",34,0)
 W !,"Visit Date:  ",$S($P(HBHCNOD0,U,2)]"":$E($P(HBHCNOD0,U,2),4,5)_"-"_$E($P(HBHCNOD0,U,2),6,7)_"-"_(1700+$E($P(HBHCNOD0,U,2),1,3)),1:""),?27,"Prov No.:  ",$P(^HBHC(631.4,$P(HBHCNOD0,U,4),0),U),?45,"Prov Name:  ",HBHCPRV
"RTN","HBHCRP3",35,0)
 Q
"RTN","HBHCRP3",36,0)
CPT80 ; Print CPT info in 80 column format
"RTN","HBHCRP3",37,0)
 S HBHCI=0 F  S HBHCI=$O(HBHCCPTA(HBHCI)) Q:HBHCI'>0  D:(IOSL-$Y)<8 HDRCONT W !,"CPT Code:  ",?13,HBHCCPTA(HBHCI) S HBHCJ=0 F  S HBHCJ=$O(HBHCCPTA(HBHCI,HBHCJ)) Q:HBHCJ'>0  W !,"  Modifier:   - ",HBHCCPTA(HBHCI,HBHCJ)
"RTN","HBHCRP3",38,0)
 W !,HBHCY
"RTN","HBHCRP3",39,0)
 Q
"RTN","HBHCRP3",40,0)
HDRCONT ; Print header info when record continued to new page
"RTN","HBHCRP3",41,0)
 W @IOF D HDRRANGE^HBHCUTL W !,HBHCMSG,!
"RTN","HBHCRP3",42,0)
 Q
"RTN","HBHCRP4")
0^16^B23627738
"RTN","HBHCRP4",1,0)
HBHCRP4 ; LR VAMC(IRMS)/MJT-HBHC report on file 632, visit data by date range, sorted alphabetically by provider, then by visit date, includes all fields, & total ; Jan 2000
"RTN","HBHCRP4",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,15,16**;NOV 01, 1993
"RTN","HBHCRP4",3,0)
 ; calls PROV^HBHCUTL2, EN^HBHCUTL2, TOT^HBHCUTL2, FTOT^HBHCUTL2, DX^HBHCUTL3, CPT^HBHCUTL3, & DX80^HBHCUTL3
"RTN","HBHCRP4",4,0)
 D PROV^HBHCUTL2,EN^HBHCUTL2
"RTN","HBHCRP4",5,0)
 G:(%=-1)!($D(DTOUT))!($D(DUOUT)) EXIT
"RTN","HBHCRP4",6,0)
 D START^HBHCUTL
"RTN","HBHCRP4",7,0)
 G:(HBHCBEG1=-1)!(HBHCEND1=-1) EXIT
"RTN","HBHCRP4",8,0)
 S %ZIS="Q",HBHCCC=0 K IOP,ZTIO,ZTSAVE D ^%ZIS G:POP EXIT
"RTN","HBHCRP4",9,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP4",ZTDESC="HBPC Visit Data Date Range Report",ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCRP4",10,0)
DQ ; De-queue
"RTN","HBHCRP4",11,0)
 U IO
"RTN","HBHCRP4",12,0)
 K ^TMP("HBHC",$J)
"RTN","HBHCRP4",13,0)
 S HBHCTEXT="  Modifier:   - ",HBHCTXT="Visits",HBHCONE=1,(HBHCFTOT,HBHCTOT)=0,$P(HBHCY,"-",81)="",HBHCMSG="(continued from previous page...)",HBHCHEAD="Visit Data by Date Range",HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCRP4",14,0)
LOOP ; Loop thru ^HBHC(632) "C" (visit date) cross-ref to build report
"RTN","HBHCRP4",15,0)
 S X1=HBHCBEG1,X2=-1 D C^%DTC S HBHCDATE=X_.9999
"RTN","HBHCRP4",16,0)
 F  S HBHCDATE=$O(^HBHC(632,"C",HBHCDATE)) Q:(HBHCDATE="")!($P(HBHCDATE,".")>HBHCEND1)  S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(632,"C",HBHCDATE,HBHCDFN)) Q:HBHCDFN=""  D PROCESS
"RTN","HBHCRP4",17,0)
 I '$D(^TMP("HBHC",$J)) K HBHCNAM D HDRRANGE^HBHCUTL W !!,"No Visits found for Date Range selected."
"RTN","HBHCRP4",18,0)
 I $D(^TMP("HBHC",$J)) D PRTLOOP I '$D(HBHCPRVL) S HBHCTXT="All Providers Visit" D FTOT^HBHCUTL2
"RTN","HBHCRP4",19,0)
 D ENDRPT^HBHCUTL1
"RTN","HBHCRP4",20,0)
EXIT ; Exit module
"RTN","HBHCRP4",21,0)
 D ^%ZISC
"RTN","HBHCRP4",22,0)
 K DIC,DTOUT,DUOUT,HBHCBEG1,HBHCBEG2,HBHCCC,HBHCCLM1,HBHCCOLM,HBHCCPT,HBHCCPTA,HBHCDATE,HBHCDFN,HBHCDPT0,HBHCDX1,HBHCDX2,HBHCDX3,HBHCDX4,HBHCDX5,HBHCEND1,HBHCEND2,HBHCFILE,HBHCFTOT,HBHCHEAD,HBHCI,HBHCJ,HBHCMSG,HBHCNAM,HBHCNOD0
"RTN","HBHCRP4",23,0)
 K HBHCONE,HBHCPAGE,HBHCPRV,HBHCPRVL,HBHCSUB,HBHCTDY,HBHCTEXT,HBHCTMP,HBHCTOT,HBHCTXT,HBHCWHO,HBHCWHOC,HBHCWHOS,HBHCXREF,HBHCY,HBHCZ,X,X1,X2,Y,^TMP("HBHC",$J),%
"RTN","HBHCRP4",24,0)
 Q
"RTN","HBHCRP4",25,0)
PROCESS ; Process record & create ^TMP("HBHC",$J global
"RTN","HBHCRP4",26,0)
 S HBHCNOD0=^HBHC(632,HBHCDFN,0),HBHCDPT0=^DPT($P(HBHCNOD0,U),0)
"RTN","HBHCRP4",27,0)
 Q:$P(HBHCNOD0,U,7)]""  ; Q if cancelled appointment
"RTN","HBHCRP4",28,0)
 Q:($D(HBHCPRVL))&('$D(HBHCPRVL($P(HBHCNOD0,U,4))))  ; Q if not selected provider
"RTN","HBHCRP4",29,0)
 S HBHCPRV=$S($P(HBHCNOD0,U,4)]"":$E($P(^VA(200,$P(^HBHC(631.4,$P(HBHCNOD0,U,4),0),U,2),0),U),1,23)_"  ("_$P(^HBHC(631.4,$P(HBHCNOD0,U,4),0),U)_")",1:"None")
"RTN","HBHCRP4",30,0)
 D DX^HBHCUTL3
"RTN","HBHCRP4",31,0)
 S ^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,1)=$E($P(HBHCDPT0,U),1,21)_U_$E($P(HBHCDPT0,U,9),6,9)
"RTN","HBHCRP4",32,0)
 S ^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,2)=HBHCDX1_U_HBHCDX2_U_HBHCDX3_U_HBHCDX4_U_HBHCDX5
"RTN","HBHCRP4",33,0)
 D CPT^HBHCUTL3
"RTN","HBHCRP4",34,0)
 ; HBHCSUB must be initialized to 2, since nodes 1 & 2 are hardcoded above
"RTN","HBHCRP4",35,0)
 S HBHCSUB=2,HBHCI=0 F  S HBHCI=$O(HBHCCPTA(HBHCI)) Q:HBHCI'>0  S HBHCSUB=HBHCSUB+1,^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,HBHCSUB)=HBHCCPTA(HBHCI) S HBHCJ=0 F  S HBHCJ=$O(HBHCCPTA(HBHCI,HBHCJ)) Q:HBHCJ'>0  D SETMOD
"RTN","HBHCRP4",36,0)
 Q
"RTN","HBHCRP4",37,0)
SETMOD ; Set TMP global with CPT Modifier info
"RTN","HBHCRP4",38,0)
 S ^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,HBHCSUB,HBHCJ)=HBHCCPTA(HBHCI,HBHCJ)
"RTN","HBHCRP4",39,0)
 Q
"RTN","HBHCRP4",40,0)
PRTLOOP ; Print loop
"RTN","HBHCRP4",41,0)
 S HBHCPRV=""
"RTN","HBHCRP4",42,0)
 F  S HBHCPRV=$O(^TMP("HBHC",$J,HBHCPRV)) D TOT Q:HBHCPRV=""  D HDR S HBHCDATE="" F  S HBHCDATE=$O(^TMP("HBHC",$J,HBHCPRV,HBHCDATE)) Q:HBHCDATE=""  S HBHCDFN="" F  S HBHCDFN=$O(^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN)) Q:HBHCDFN=""  D PRINT
"RTN","HBHCRP4",43,0)
 Q
"RTN","HBHCRP4",44,0)
PRINT ; Print report
"RTN","HBHCRP4",45,0)
 K HBHCTMP
"RTN","HBHCRP4",46,0)
 S HBHCTMP(1)=^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,1)
"RTN","HBHCRP4",47,0)
 W !,"Visit Date:  ",$E(HBHCDATE,4,5)_"-"_$E(HBHCDATE,6,7)_"-"_(1700+$E(HBHCDATE,1,3)),?26,"Patient Name:  ",$P(HBHCTMP(1),U),?67,"Last 4:  ",$P(HBHCTMP(1),U,2) S HBHCTOT=HBHCTOT+1
"RTN","HBHCRP4",48,0)
 S HBHCTMP(2)=$G(^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,2))
"RTN","HBHCRP4",49,0)
 ; Set DX fields
"RTN","HBHCRP4",50,0)
 S HBHCDX1=$P(HBHCTMP(2),U)
"RTN","HBHCRP4",51,0)
 S HBHCDX2=$P(HBHCTMP(2),U,2)
"RTN","HBHCRP4",52,0)
 S HBHCDX3=$P(HBHCTMP(2),U,3)
"RTN","HBHCRP4",53,0)
 S HBHCDX4=$P(HBHCTMP(2),U,4)
"RTN","HBHCRP4",54,0)
 S HBHCDX5=$P(HBHCTMP(2),U,5)
"RTN","HBHCRP4",55,0)
 D DX80^HBHCUTL3
"RTN","HBHCRP4",56,0)
 ; HBHCI must be initialized to 2, since nodes 1 & 2 are hardcoded above
"RTN","HBHCRP4",57,0)
 S HBHCI=2
"RTN","HBHCRP4",58,0)
 F  S HBHCI=$O(^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,HBHCI)) Q:HBHCI'>0  D CPTPRT S HBHCJ=0 F  S HBHCJ=$O(^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,HBHCI,HBHCJ)) Q:HBHCJ'>0  W !,HBHCTEXT,^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,HBHCI,HBHCJ)
"RTN","HBHCRP4",59,0)
 W !,HBHCY
"RTN","HBHCRP4",60,0)
 Q
"RTN","HBHCRP4",61,0)
HDR ; Report header setup
"RTN","HBHCRP4",62,0)
 S HBHCPAGE=0,HBHCNAM=HBHCPRV,HBHCCLM1=(80-(16+$L(HBHCNAM))\2) S:HBHCCLM1'>0 HBHCCLM1=1
"RTN","HBHCRP4",63,0)
 W @IOF D HDRRANGE^HBHCUTL
"RTN","HBHCRP4",64,0)
 Q 
"RTN","HBHCRP4",65,0)
TOT ; Print total
"RTN","HBHCRP4",66,0)
 Q:HBHCTOT=0
"RTN","HBHCRP4",67,0)
 D TOT^HBHCUTL2
"RTN","HBHCRP4",68,0)
 Q
"RTN","HBHCRP4",69,0)
CPTPRT ; CPT print
"RTN","HBHCRP4",70,0)
 I ((IOSL-$Y)<8) W @IOF D HDRRANGE^HBHCUTL W !,HBHCMSG,!
"RTN","HBHCRP4",71,0)
 W !,"CPT Code:  ",?13,^TMP("HBHC",$J,HBHCPRV,HBHCDATE,HBHCDFN,HBHCI)
"RTN","HBHCRP4",72,0)
 Q
"RTN","HBHCRP6")
0^18^B499415
"RTN","HBHCRP6",1,0)
HBHCRP6 ; LR VAMC(IRMS)/MJT-HBHC rpt, file 631, All or multi case mgr census by date range, includes: Case Manager, Pat Name, SSN, Adm Date, Address, City, ZIP Code, & Phone, Totals for Case Mgr & All, calls EN^HBHCUTL2 & EN2^HBHCUTL2 ; Apr 2000
"RTN","HBHCRP6",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;16;NOV 01, 1993
"RTN","HBHCRP6",3,0)
 S HBHCWHO="case manager",HBHCWHOS="case managers",HBHCWHOC="Case Manager",HBHCFILE=631,HBHCXREF="AD",HBHCC=24
"RTN","HBHCRP6",4,0)
 D EN^HBHCUTL2,EN2^HBHCUTL2
"RTN","HBHCRP6",5,0)
EXIT ; Exit module
"RTN","HBHCRP6",6,0)
 Q
"RTN","HBHCRP9")
0^17^B129336
"RTN","HBHCRP9",1,0)
HBHCRP9 ; LR VAMC(IRMS)/MJT-HBHC rpt, file 632, All or multi prov census by date range, includes: Prov, Pt Name, SSN, Adm Date, Address, City, ZIP Code, & Phone, Totals for Prov & All, calls PROV^HBHCUTL2, EN^HBHCUTL2, & EN2^HBHCUTL2 ; Apr 2000
"RTN","HBHCRP9",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;16;NOV 01, 1993
"RTN","HBHCRP9",3,0)
 S HBHCC=20,HBHCFILE=632,HBHCXREF="C"
"RTN","HBHCRP9",4,0)
 D PROV^HBHCUTL2,EN^HBHCUTL2,EN2^HBHCUTL2
"RTN","HBHCRP9",5,0)
EXIT ; Exit module
"RTN","HBHCRP9",6,0)
 Q
"RTN","HBHCUTL")
0^13^B26044972
"RTN","HBHCUTL",1,0)
HBHCUTL ; LR VAMC(IRMS)/MJT-HBHC Utility module, Entry points:  ACTION, STATUS, START, TODAY, HDRPAGE, HDRRANGE, HDR132, HDR132NR ; Mar 2000
"RTN","HBHCUTL",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**2,6,8,16**;NOV 01, 1993
"RTN","HBHCUTL",3,0)
ACTION ; Set appropriate fields/variables for Admit/Reject Action
"RTN","HBHCUTL",4,0)
 K HBHCQ,HBHCKEEP
"RTN","HBHCUTL",5,0)
 S HBHCY0=^HBHC(631,HBHCDFN,0)
"RTN","HBHCUTL",6,0)
 S:X="" Y=$S($D(HBHCUPD):0,1:87) S:X=1 Y=18 S:X=2 HBHCQ=1
"RTN","HBHCUTL",7,0)
 S HBHCAFLG=0 F HBHCI=19:1:37 Q:HBHCAFLG  S:$P(HBHCY0,U,HBHCI)]"" HBHCAFLG=1
"RTN","HBHCUTL",8,0)
 S HBHCRFLG=0 I ($P(HBHCY0,U,16)]"")!($P(HBHCY0,U,17)]"") S HBHCRFLG=1
"RTN","HBHCUTL",9,0)
 Q:(HBHCAFLG=0)&(HBHCRFLG=0)
"RTN","HBHCUTL",10,0)
 Q:(HBHCRFLG=0)&(X=1)
"RTN","HBHCUTL",11,0)
 Q:(HBHCAFLG=0)&(X=2)
"RTN","HBHCUTL",12,0)
 S HBHCWRD1=$S(HBHCAFLG=1:"admission",1:"rejection")
"RTN","HBHCUTL",13,0)
 S HBHCWRD2=$S(X="":"to 'Delete'",X=2:"'Reject' in",1:"'Admit' in")
"RTN","HBHCUTL",14,0)
 S HBHCWRD3=$S(HBHCAFLG=1:"1 for Admit",1:"2 for Reject")
"RTN","HBHCUTL",15,0)
 D PROCADM I %=1 D:HBHCAFLG ADMIT S:HBHCRFLG $P(^HBHC(631,HBHCDFN,0),U,16)="",$P(^HBHC(631,HBHCDFN,0),U,17)=""
"RTN","HBHCUTL",16,0)
 Q
"RTN","HBHCUTL",17,0)
PROCADM ; Process 'Delete' & 'Reject' responses
"RTN","HBHCUTL",18,0)
 W *7,!!,"This record contains ",HBHCWRD1," data.  Are you sure you want ",HBHCWRD2," the",!,"Admit/Reject Action field  ('Yes' will delete the ",HBHCWRD1," data)" S %=2 D YN^DICN
"RTN","HBHCUTL",19,0)
 W ! W:%=0 !!,"Admit/Reject Action field must either contain ",HBHCWRD3," or the ",HBHCWRD1,!,"data MUST be deleted by responding 'Yes'.",!!
"RTN","HBHCUTL",20,0)
 I %'=1 S Y=$S($D(HBHCUPD):0,1:14) S:$D(HBHCUPD) HBHCKEEP=1
"RTN","HBHCUTL",21,0)
 Q
"RTN","HBHCUTL",22,0)
ADMIT ; Set appropriate fields = null
"RTN","HBHCUTL",23,0)
 F HBHCJ=19:1:37 S $P(^HBHC(631,HBHCDFN,0),U,HBHCJ)=""
"RTN","HBHCUTL",24,0)
 S $P(^HBHC(631,HBHCDFN,1),U,14)=""
"RTN","HBHCUTL",25,0)
 Q
"RTN","HBHCUTL",26,0)
STATUS ; Set appropriate fields/variables for Discharge Status
"RTN","HBHCUTL",27,0)
 K HBHCQ,HBHCQ1,HBHCKEEP
"RTN","HBHCUTL",28,0)
 S HBHC12="^1^2^",HBHC359="^3^5^9^",HBHCNOD1=$G(^HBHC(631,HBHCDFN,1)),HBHCY0=^HBHC(631,HBHCDFN,0)
"RTN","HBHCUTL",29,0)
 S:X="" Y=$S($D(HBHCUPD):0,1:65) S:HBHC12[(U_X_U) HBHCQ1=1,Y=44 S:HBHC359[(U_X_U) Y="@1" S:X=4 HBHCQ=1,Y=$S($D(HBHCUPD):0,1:69)
"RTN","HBHCUTL",30,0)
 S HBHCTFLG=0 S:($P(HBHCY0,U,45)]"")!($P(HBHCY0,U,46)]"") HBHCTFLG=1
"RTN","HBHCUTL",31,0)
 S HBHCDIED=0 S:$P($G(^HBHC(631,HBHCDFN,1)),U,15)]"" HBHCDIED=1
"RTN","HBHCUTL",32,0)
 S HBHCDFLG=0 F HBHCL=47:1:55 Q:HBHCDFLG  S:$P(HBHCY0,U,HBHCL)]"" HBHCDFLG=1
"RTN","HBHCUTL",33,0)
 I HBHCNOD1]"" F HBHCM=1:1:10 Q:HBHCDFLG  S:$P(HBHCNOD1,U,HBHCM)]"" HBHCDFLG=1
"RTN","HBHCUTL",34,0)
 Q:(HBHCTFLG=0)&(HBHCDIED=0)&(HBHCDFLG=0)
"RTN","HBHCUTL",35,0)
 Q:(HBHC12[(U_X_U))&(HBHCDIED=0)
"RTN","HBHCUTL",36,0)
 Q:(X=4)&(HBHCTFLG=0)&(HBHCDFLG=0)
"RTN","HBHCUTL",37,0)
 Q:(HBHC359[(U_X_U))&(HBHCTFLG=0)&(HBHCDIED=0)
"RTN","HBHCUTL",38,0)
 S HBHCWRD1=$S(HBHCTFLG:"transfer",HBHCDIED:"deceased",1:"discharge")
"RTN","HBHCUTL",39,0)
 S HBHCWRD2=$S(X="":"to 'Delete'",HBHC12[(U_X_U):"'Transfer' in",X=4:"'Died' in",1:"'Discharge' in")
"RTN","HBHCUTL",40,0)
 S HBHCWRD3=$S(HBHCTFLG:"1 or 2 for Transfer",HBHCDIED:"4 for Died on HBHC",1:"3, 5 or 9 for Discharge")
"RTN","HBHCUTL",41,0)
 D PROCDIS Q:%'=1
"RTN","HBHCUTL",42,0)
 S:HBHCTFLG $P(^HBHC(631,HBHCDFN,0),U,45)="",$P(^HBHC(631,HBHCDFN,0),U,46)=""
"RTN","HBHCUTL",43,0)
 D:(HBHCDFLG)&((X=4)!(X="")) DISCHRG
"RTN","HBHCUTL",44,0)
 S:HBHCDIED $P(^HBHC(631,HBHCDFN,1),U,15)=""
"RTN","HBHCUTL",45,0)
 Q
"RTN","HBHCUTL",46,0)
PROCDIS ; Process 'Delete', '1 or 2', '4', & '3 or 5 or 9' responses
"RTN","HBHCUTL",47,0)
 W *7,!!,"This record contains ",HBHCWRD1," data.  Are you sure you want ",HBHCWRD2," the",!,"Discharge Status field  ('Yes' will delete the ",HBHCWRD1," data)" S %=2 D YN^DICN
"RTN","HBHCUTL",48,0)
 W ! W:%=0 !!,"Discharge Status field must contain ",HBHCWRD3," or the ",HBHCWRD1,!,"data MUST be deleted by responding 'Yes'.",!!
"RTN","HBHCUTL",49,0)
 I %'=1 S Y=$S($D(HBHCUPD):0,1:43) S:$D(HBHCUPD) HBHCKEEP=1
"RTN","HBHCUTL",50,0)
 Q
"RTN","HBHCUTL",51,0)
DISCHRG ; Delete discharge data 
"RTN","HBHCUTL",52,0)
 F HBHCI=47:1:55 S $P(^HBHC(631,HBHCDFN,0),U,HBHCI)=""
"RTN","HBHCUTL",53,0)
 F HBHCJ=1:1:10 S $P(^HBHC(631,HBHCDFN,1),U,HBHCJ)=""
"RTN","HBHCUTL",54,0)
 S $P(^HBHC(631,HBHCDFN,1),U,16)=""
"RTN","HBHCUTL",55,0)
 Q
"RTN","HBHCUTL",56,0)
START ; Prompt for beginning/ending report dates
"RTN","HBHCUTL",57,0)
 W ! K %DT S (HBHCBEG1,HBHCEND1,HBHCPAGE)=0,%DT("A")="Beginning Report Date: ",%DT="AEX" D ^%DT S HBHCBEG1=Y Q:HBHCBEG1=-1  D DD^%DT S HBHCBEG2=Y
"RTN","HBHCUTL",58,0)
END ; Ending date prompt
"RTN","HBHCUTL",59,0)
 S %DT("A")="Ending Report Date: " D ^%DT I (Y>0)&(Y<HBHCBEG1) W *7,!!,"Ending Report Date must be closer to today than the Beginning Report Date",! G END
"RTN","HBHCUTL",60,0)
 S HBHCEND1=Y_.9999 Q:HBHCEND1=-1  D DD^%DT S HBHCEND2=Y
"RTN","HBHCUTL",61,0)
TODAY ; Obtain current date
"RTN","HBHCUTL",62,0)
 S $P(HBHCZ,"=",81)=""
"RTN","HBHCUTL",63,0)
 K %DT S X="T" D ^%DT,DD^%DT S HBHCTDY=Y K %DT
"RTN","HBHCUTL",64,0)
 Q
"RTN","HBHCUTL",65,0)
HDRPAGE ; Print header with Page
"RTN","HBHCUTL",66,0)
 S HBHCPAGE=HBHCPAGE+1
"RTN","HBHCUTL",67,0)
 W !?HBHCCOLM,">>> HBPC ",HBHCHEAD," Report <<<",?71,"Page: ",HBHCPAGE,!!,"Run Date: ",HBHCTDY,!! I $D(HBHCHDR) X HBHCHDR W !
"RTN","HBHCUTL",68,0)
 W HBHCZ
"RTN","HBHCUTL",69,0)
 Q
"RTN","HBHCUTL",70,0)
HDRRANGE ; Print header with Date Range
"RTN","HBHCUTL",71,0)
 S HBHCPAGE=HBHCPAGE+1
"RTN","HBHCUTL",72,0)
 W !?HBHCCOLM,">>> HBPC ",HBHCHEAD," Report <<<",?71,"Page: ",HBHCPAGE,! W:$D(HBHCNAM) ?HBHCCLM1,$S($D(HBHCONE):"Provider:  ",1:"HBPC Team: "),HBHCNAM,! W !,"Run Date: ",HBHCTDY,?53,"Date Range: ",HBHCBEG2," to",!?65,HBHCEND2,!
"RTN","HBHCUTL",73,0)
 I $D(HBHCHDR) X HBHCHDR W !
"RTN","HBHCUTL",74,0)
 W HBHCZ
"RTN","HBHCUTL",75,0)
 Q
"RTN","HBHCUTL",76,0)
HDR132 ; Print 132 column header with Date Range 
"RTN","HBHCUTL",77,0)
 S HBHCPAGE=HBHCPAGE+1
"RTN","HBHCUTL",78,0)
 W !?HBHCCOLM,">>> HBPC ",HBHCHEAD," Report <<<",?123,"Page: ",HBHCPAGE,! W:$D(HBHCNAM) ?HBHCCLM1,HBHCWHOC_": ",HBHCNAM,! W !,"Run Date: ",HBHCTDY,?105,"Date Range: ",HBHCBEG2," to",!?117,HBHCEND2,! I $D(HBHCHDR) X HBHCHDR W !
"RTN","HBHCUTL",79,0)
 W HBHCZ
"RTN","HBHCUTL",80,0)
 Q
"RTN","HBHCUTL",81,0)
HDR132NR ; Print 132 column header with No Date Range 
"RTN","HBHCUTL",82,0)
 S HBHCPAGE=HBHCPAGE+1
"RTN","HBHCUTL",83,0)
 W !?HBHCCOLM,">>> HBPC ",HBHCHEAD," Report <<<",?123,"Page: ",HBHCPAGE,! W !,"Run Date: ",HBHCTDY I $D(HBHCHDR) X HBHCHDR W !
"RTN","HBHCUTL",84,0)
 W HBHCZ
"RTN","HBHCUTL",85,0)
 Q
"RTN","HBHCUTL2")
0^15^B31428259
"RTN","HBHCUTL2",1,0)
HBHCUTL2 ; LR VAMC(IRMS)/MJT-HBHC Utility module, Entry points:  PROV, EN, EN2, TOT, & FTOT (see line labels for called by routines) ; Apr 2000
"RTN","HBHCUTL2",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,16**;NOV 01, 1993
"RTN","HBHCUTL2",3,0)
PROV ; Provider variable setup, called by ^HBHCRP4, ^HBHCRP9, ^HBHCRP22
"RTN","HBHCUTL2",4,0)
 S HBHCWHO="provider",HBHCWHOS="providers",HBHCWHOC="Provider"
"RTN","HBHCUTL2",5,0)
 Q
"RTN","HBHCUTL2",6,0)
EN ; Entry point called by ^HBHCRP4, ^HBHCRP6, ^HBHCRP9, & ^HBHCRP22
"RTN","HBHCUTL2",7,0)
 S HBHCCC=0
"RTN","HBHCUTL2",8,0)
 W !!,"Do you wish to include ALL ",HBHCWHOS," on the report" S %=1 D YN^DICN
"RTN","HBHCUTL2",9,0)
 W !
"RTN","HBHCUTL2",10,0)
 I %=0 W !!,"A 'Yes' response will include ALL "_HBHCWHOS_".  A 'No' response will",!,"prompt for an individual "_HBHCWHO_" name." G EN
"RTN","HBHCUTL2",11,0)
 I %=2 K DIC S DIC="^HBHC(631.4,",DIC(0)="AEMQ",DIC("A")="Select HBPC "_HBHCWHOC_": ",DIC("S")="I $P(^HBHC(631.4,Y,0),U,7)="""""
"RTN","HBHCUTL2",12,0)
ENPRV ; Enter provider prompt
"RTN","HBHCUTL2",13,0)
 I %=2 D ^DIC S:+Y>0 HBHCPRVL(+Y)="" G:Y>0 ENPRV
"RTN","HBHCUTL2",14,0)
 Q
"RTN","HBHCUTL2",15,0)
EN2 ; Entry point 2 called by ^HBHCRP6 & ^HBHCRP9
"RTN","HBHCUTL2",16,0)
 D START^HBHCUTL
"RTN","HBHCUTL2",17,0)
 G:(HBHCBEG1=-1)!(HBHCEND1=-1) EXIT
"RTN","HBHCUTL2",18,0)
 S %ZIS="Q" K IOP,ZTIO,ZTSAVE D ^%ZIS G:POP EXIT
"RTN","HBHCUTL2",19,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCUTL2",ZTDESC="HBPC "_HBHCWHOC_" Census Report",ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCUTL2",20,0)
DQ ; De-queue
"RTN","HBHCUTL2",21,0)
 U IO
"RTN","HBHCUTL2",22,0)
 K ^TMP("HBHC",$J)
"RTN","HBHCUTL2",23,0)
 S $P(HBHCY,"-",133)="",$P(HBHCZ,"=",133)="",HBHCTXT="Case Census",HBHCHEAD=HBHCWHOC_" Census",HBHCHDR="W !,""Patient Name"",?28,""SSN"",?41,""Date"",?51,""Street Address"",?83,""City"",?100,""ZIP Code"",?112,""Phone"""
"RTN","HBHCUTL2",24,0)
 S HBHCCOLM=(132-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1 S (HBHCTOT,HBHCFTOT)=0
"RTN","HBHCUTL2",25,0)
 D TODAY^HBHCUTL
"RTN","HBHCUTL2",26,0)
LOOP ; Loop thru ^HBHC(631) "AD" (Admission Date) cross-ref to build report for case manager report or thru ^HBHC(632) "C" (Visit Date) for provider report
"RTN","HBHCUTL2",27,0)
 S X1=HBHCBEG1,X2=-1 D C^%DTC S HBHCDATE=X
"RTN","HBHCUTL2",28,0)
 F  S HBHCDATE=$O(^HBHC(HBHCFILE,HBHCXREF,HBHCDATE)) Q:(HBHCDATE="")!(HBHCDATE>HBHCEND1)  S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(HBHCFILE,HBHCXREF,HBHCDATE,HBHCDFN)) Q:HBHCDFN=""  D PROCESS
"RTN","HBHCUTL2",29,0)
 I '$D(^TMP("HBHC",$J)) K HBHCNAM D HDR132^HBHCUTL W !!,"No data found for "_HBHCWHOC_" by Date Range selected."
"RTN","HBHCUTL2",30,0)
 I $D(^TMP("HBHC",$J)) D PRTLOOP D:'$D(HBHCPRVL) FTOT
"RTN","HBHCUTL2",31,0)
 D END132^HBHCUTL1
"RTN","HBHCUTL2",32,0)
EXIT ; Exit module
"RTN","HBHCUTL2",33,0)
 D ^%ZISC
"RTN","HBHCUTL2",34,0)
 K DIC,DTOUT,DUOUT,HBHCADDT,HBHCBEG1,HBHCBEG2,HBHCC,HBHCCC,HBHCCLM1,HBHCCOLM,HBHCDATE,HBHCDFN,HBHCDPT0,HBHCDPTA,HBHCEND1,HBHCEND2,HBHCFILE,HBHCFTOT,HBHCHDR,HBHCHEAD,HBHCNAM,HBHCNBR,HBHCNDX,HBHCNM,HBHCNOD0,HBHCNOD1,HBHCPAGE
"RTN","HBHCUTL2",35,0)
 K HBHCPHON,HBHCPRV,HBHCPRVL,HBHCSSN,HBHCTDY,HBHCTMP,HBHCTOT,HBHCTXT,HBHCWHO,HBHCWHOC,HBHCWHOS,HBHCXREF,HBHCY,HBHCZ,HBHCZIP,X,Y,^TMP("HBHC",$J),%
"RTN","HBHCUTL2",36,0)
 Q
"RTN","HBHCUTL2",37,0)
PROCESS ; Process record & create ^TMP("HBHC",$J global
"RTN","HBHCUTL2",38,0)
 S HBHCNOD0=^HBHC(HBHCFILE,HBHCDFN,0),HBHCNOD1=$G(^HBHC(HBHCFILE,HBHCDFN,1))
"RTN","HBHCUTL2",39,0)
 ; Q if no case manager or not selected case manager 
"RTN","HBHCUTL2",40,0)
 I HBHCFILE=631 Q:$P(HBHCNOD1,U,13)=""  Q:($D(HBHCPRVL))&('$D(HBHCPRVL($P(HBHCNOD1,U,13))))
"RTN","HBHCUTL2",41,0)
 I HBHCFILE=631 Q:(($P(HBHCNOD0,U,40)]"")&($P(HBHCNOD0,U,40)<HBHCEND1))!($P(HBHCNOD0,U,15)=2)!($P(HBHCNOD1,U,13)="")  S HBHCADDT=$E(HBHCDATE,4,5)_"-"_$E(HBHCDATE,6,7)_"-"_$E(HBHCDATE,2,3)
"RTN","HBHCUTL2",42,0)
 I HBHCFILE=632 Q:($D(HBHCPRVL))&('$D(HBHCPRVL($P(HBHCNOD0,U,4))))  ; Q if not selected provider
"RTN","HBHCUTL2",43,0)
 I HBHCFILE=632 S (HBHCNBR,HBHCNDX)="" F  S HBHCNBR=$O(^HBHC(631,"B",+HBHCNOD0,HBHCNBR)) Q:HBHCNBR=""  S HBHCNDX=HBHCNBR
"RTN","HBHCUTL2",44,0)
 I HBHCFILE=632 Q:HBHCNDX=""  Q:(($P(^HBHC(631,HBHCNDX,0),U,40)]"")&($P(^HBHC(631,HBHCNDX,0),U,40)<HBHCEND1))!($P(^HBHC(631,HBHCNDX,0),U,15)=2)
"RTN","HBHCUTL2",45,0)
 I HBHCFILE=632 S HBHCADDT=$P(^HBHC(631,HBHCNDX,0),U,18),HBHCADDT=$E(HBHCADDT,4,5)_"-"_$E(HBHCADDT,6,7)_"-"_$E(HBHCADDT,2,3) Q:$P(HBHCNOD0,U,4)=""
"RTN","HBHCUTL2",46,0)
 S HBHCNAM=$S(HBHCFILE=631:$P(^VA(200,$P(^HBHC(631.4,$P(HBHCNOD1,U,13),0),U,2),0),U)_"  ("_$P(^HBHC(631.4,$P(HBHCNOD1,U,13),0),U)_")",1:$P(^VA(200,$P(^HBHC(631.4,$P(HBHCNOD0,U,4),0),U,2),0),U)_"  ("_$P(^HBHC(631.4,$P(HBHCNOD0,U,4),0),U)_")")
"RTN","HBHCUTL2",47,0)
 S HBHCDPT0=^DPT($P(HBHCNOD0,U),0),HBHCDPTA=$G(^DPT($P(HBHCNOD0,U),.11))
"RTN","HBHCUTL2",48,0)
 S HBHCSSN=$E($P(HBHCDPT0,U,9),1,3)_"-"_$E($P(HBHCDPT0,U,9),4,5)_"-"_$E($P(HBHCDPT0,U,9),6,9),HBHCNM=$E($P(HBHCDPT0,U),1,26)
"RTN","HBHCUTL2",49,0)
 S HBHCZIP=$S(($P(HBHCDPTA,U,12)]""):$E($P(HBHCDPTA,U,12),1,5)_$S($E($P(HBHCDPTA,U,12),6,9)]"":"-"_$E($P(HBHCDPTA,U,12),6,9),1:""),1:$E($P(HBHCDPTA,U,6),1,5)_$S($E($P(HBHCDPTA,U,6),6,9)]"":"-"_$E($P(HBHCDPTA,U,6),6,9),1:""))
"RTN","HBHCUTL2",50,0)
 S HBHCPHON=$P($G(^DPT($P(HBHCNOD0,U),.13)),U) S:HBHCPHON?7N HBHCPHON=$E(HBHCPHON,1,3)_"-"_$E(HBHCPHON,4,7) S:HBHCPHON?10N HBHCPHON="("_$E(HBHCPHON,1,3)_") "_$E(HBHCPHON,4,6)_"-"_$E(HBHCPHON,7,10)
"RTN","HBHCUTL2",51,0)
 S ^TMP("HBHC",$J,HBHCNAM,HBHCNM)=HBHCSSN_U_HBHCADDT_U_$P(HBHCDPTA,U)_U_$P(HBHCDPTA,U,2)_U_$P(HBHCDPTA,U,3)_U_$E($P(HBHCDPTA,U,4),1,15)_U_HBHCZIP_U_HBHCPHON
"RTN","HBHCUTL2",52,0)
 Q
"RTN","HBHCUTL2",53,0)
PRTLOOP ; Print loop
"RTN","HBHCUTL2",54,0)
 S HBHCPRV="" F  S HBHCPRV=$O(^TMP("HBHC",$J,HBHCPRV)) D:HBHCTOT>0 TOT Q:HBHCPRV=""  D HDR S HBHCNM="" F  S HBHCNM=$O(^TMP("HBHC",$J,HBHCPRV,HBHCNM)) Q:HBHCNM=""  D PRT
"RTN","HBHCUTL2",55,0)
 Q
"RTN","HBHCUTL2",56,0)
HDR ; Report header setup
"RTN","HBHCUTL2",57,0)
 S HBHCPAGE=0,HBHCNAM=HBHCPRV,HBHCCLM1=(132-(HBHCC+$L(HBHCNAM))\2) S:HBHCCLM1'>0 HBHCCLM1=1
"RTN","HBHCUTL2",58,0)
 W @IOF D HDR132^HBHCUTL
"RTN","HBHCUTL2",59,0)
 Q
"RTN","HBHCUTL2",60,0)
PRT ; Print report
"RTN","HBHCUTL2",61,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<5) W @IOF D HDR132^HBHCUTL
"RTN","HBHCUTL2",62,0)
 S HBHCTOT=HBHCTOT+1,HBHCTMP=^TMP("HBHC",$J,HBHCPRV,HBHCNM)
"RTN","HBHCUTL2",63,0)
 W !,HBHCNM,?28,$P(HBHCTMP,U),?41,$P(HBHCTMP,U,2),?51,$P(HBHCTMP,U,3),?83,$P(HBHCTMP,U,6),?100,$P(HBHCTMP,U,7),?112,$P(HBHCTMP,U,8)
"RTN","HBHCUTL2",64,0)
 W:$P(HBHCTMP,U,4)]"" !?51,$P(HBHCTMP,U,4)
"RTN","HBHCUTL2",65,0)
 W:$P(HBHCTMP,U,5)]"" !?51,$P(HBHCTMP,U,5)
"RTN","HBHCUTL2",66,0)
 W !,HBHCY
"RTN","HBHCUTL2",67,0)
 Q
"RTN","HBHCUTL2",68,0)
TOT ; Print case manager/provider total, called by ^HBHCRP4 & ^HBHCRP22
"RTN","HBHCUTL2",69,0)
 W !!,HBHCZ,!,HBHCWHOC_": "_HBHCNAM_"  "_HBHCTXT_" Total:  ",HBHCTOT,!,HBHCZ
"RTN","HBHCUTL2",70,0)
 S HBHCFTOT=HBHCFTOT+HBHCTOT,HBHCTOT=0
"RTN","HBHCUTL2",71,0)
 Q
"RTN","HBHCUTL2",72,0)
FTOT ; Print report final total, called by ^HBHCRP4 & ^HBHCRP22
"RTN","HBHCUTL2",73,0)
 K HBHCHDR,HBHCNAM S HBHCPAGE=0 W @IOF
"RTN","HBHCUTL2",74,0)
 ; for HBHCUTL2 calls (called from HBHCRP6 & HBHCRP9)
"RTN","HBHCUTL2",75,0)
 D:$L(HBHCZ)=132 HDR132^HBHCUTL
"RTN","HBHCUTL2",76,0)
 ; for HBHCRP4 & HBHCRP22 calls
"RTN","HBHCUTL2",77,0)
 D:$L(HBHCZ)=80 HDRRANGE^HBHCUTL
"RTN","HBHCUTL2",78,0)
 W !!,HBHCTXT_" Total:  ",HBHCFTOT,!!,HBHCZ
"RTN","HBHCUTL2",79,0)
 Q
"RTN","HBHCUTL3")
0^14^B12542145
"RTN","HBHCUTL3",1,0)
HBHCUTL3 ; LR VAMC(IRMS)/MJT-HBHC Utility module, Entry points:  PSEUDO, PCEMSG, DX, DX80, & CPT ; Jan 2000
"RTN","HBHCUTL3",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,10,15,16**;NOV 01, 1993
"RTN","HBHCUTL3",3,0)
PSEUDO ; Print pseudo SSN message
"RTN","HBHCUTL3",4,0)
 W *7,!!,"Patient visit records with pseudo social security numbers (SSNs) exist.",!,"Print the 'Pseudo Social Security Number Report' located on the HBHC Reports"
"RTN","HBHCUTL3",5,0)
 W !,"Menu to obtain a list of patients with invalid SSNs.  HBHC must determine",!,"what corrective action is appropriate to eliminate these records from the",!,"HBHC Information System.",!! H 5
"RTN","HBHCUTL3",6,0)
 Q
"RTN","HBHCUTL3",7,0)
PCEMSG ; Print PCE correction of errors message
"RTN","HBHCUTL3",8,0)
 W !!,"Note:  Please use Appointment Management to Correct Visit Errors.  Run",!?7,"Edit Form Errors Data option when corrections are complete."
"RTN","HBHCUTL3",9,0)
 Q
"RTN","HBHCUTL3",10,0)
DX ; Process Diagnosis (DX), HBHCNOD0=^HBHC(632,HBHCDFN,0), HBHCNOD0 must be defined prior to call, returns code plus text
"RTN","HBHCUTL3",11,0)
 S $P(HBHCSP5," ",6)=""
"RTN","HBHCUTL3",12,0)
 S HBHCDX1=$S($P(HBHCNOD0,U,17)]"":$P(^ICD9($P(HBHCNOD0,U,17),0),U)_$E(HBHCSP5,1,(8-$L($P(^ICD9($P(HBHCNOD0,U,17),0),U))))_$P(^ICD9($P(HBHCNOD0,U,17),0),U,3),1:"")
"RTN","HBHCUTL3",13,0)
 S HBHCDX2=$S($P(HBHCNOD0,U,18)]"":$P(^ICD9($P(HBHCNOD0,U,18),0),U)_$E(HBHCSP5,1,(8-$L($P(^ICD9($P(HBHCNOD0,U,18),0),U))))_$P(^ICD9($P(HBHCNOD0,U,18),0),U,3),1:"")
"RTN","HBHCUTL3",14,0)
 S HBHCDX3=$S($P(HBHCNOD0,U,19)]"":$P(^ICD9($P(HBHCNOD0,U,19),0),U)_$E(HBHCSP5,1,(8-$L($P(^ICD9($P(HBHCNOD0,U,19),0),U))))_$P(^ICD9($P(HBHCNOD0,U,19),0),U,3),1:"")
"RTN","HBHCUTL3",15,0)
 S HBHCDX4=$S($P(HBHCNOD0,U,20)]"":$P(^ICD9($P(HBHCNOD0,U,20),0),U)_$E(HBHCSP5,1,(8-$L($P(^ICD9($P(HBHCNOD0,U,20),0),U))))_$P(^ICD9($P(HBHCNOD0,U,20),0),U,3),1:"")
"RTN","HBHCUTL3",16,0)
 S HBHCDX5=$S($P(HBHCNOD0,U,21)]"":$P(^ICD9($P(HBHCNOD0,U,21),0),U)_$E(HBHCSP5,1,(8-$L($P(^ICD9($P(HBHCNOD0,U,21),0),U))))_$P(^ICD9($P(HBHCNOD0,U,21),0),U,3),1:"")
"RTN","HBHCUTL3",17,0)
 K HBHCSP5
"RTN","HBHCUTL3",18,0)
 Q
"RTN","HBHCUTL3",19,0)
DX80 ; Print DX info in 80 column format, HBHCDX1, HBHCDX2, HBHCDX3, HBHCDX4, HBHCDX5 must exist prior to call
"RTN","HBHCUTL3",20,0)
 W !,"Diagnosis:   ",HBHCDX1
"RTN","HBHCUTL3",21,0)
 W:HBHCDX2]"" !?13,HBHCDX2
"RTN","HBHCUTL3",22,0)
 W:HBHCDX3]"" !?13,HBHCDX3
"RTN","HBHCUTL3",23,0)
 W:HBHCDX4]"" !?13,HBHCDX4
"RTN","HBHCUTL3",24,0)
 W:HBHCDX5]"" !?13,HBHCDX5
"RTN","HBHCUTL3",25,0)
 Q
"RTN","HBHCUTL3",26,0)
CPT ; CPT code info, HBHCDFN must be defined prior to call, returns code plus text in local array HBHCCPTA
"RTN","HBHCUTL3",27,0)
 K HBHCCPTA S $P(HBHCSP3," ",4)="",HBHCI=0 F  S HBHCI=$O(^HBHC(632,HBHCDFN,2,HBHCI)) Q:HBHCI'>0  S HBHCCPT=$$CPT^ICPTCOD(^HBHC(632,HBHCDFN,2,HBHCI,0)),HBHCCPTA(HBHCI)=$P(HBHCCPT,U,2)_HBHCSP3_$P(HBHCCPT,U,3) D CPTMOD
"RTN","HBHCUTL3",28,0)
 K HBHCCPT,HBHCI,HBHCJ,HBHCMOD,HBHCSP3
"RTN","HBHCUTL3",29,0)
 Q
"RTN","HBHCUTL3",30,0)
CPTMOD ; Process CPT Modifier code plus text into local array HBHCCPTA(HBHCCPT,HBHCJ)
"RTN","HBHCUTL3",31,0)
 S HBHCJ=0 F  S HBHCJ=$O(^HBHC(632,HBHCDFN,2,HBHCI,1,HBHCJ)) Q:HBHCJ'>0  S HBHCMOD=$$MOD^ICPTMOD($P(^HBHC(632,HBHCDFN,2,HBHCI,1,HBHCJ,0),U),"I"),HBHCCPTA(HBHCI,HBHCJ)=$P(HBHCMOD,U,2)_HBHCSP3_$P(HBHCMOD,U,3)
"RTN","HBHCUTL3",32,0)
 Q
"RTN","HBHCUTL4")
0^23^B7453460
"RTN","HBHCUTL4",1,0)
HBHCUTL4 ; LR VAMC(IRMS)/MJT-HBHC Utility module, Entry points: EN1 & KILL, called from: ^HBHCRP17 & ^HBHCRP22 ; Apr 2000
"RTN","HBHCUTL4",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**11,15,16**;NOV 01, 1993
"RTN","HBHCUTL4",3,0)
EN1 ; Entry point 1
"RTN","HBHCUTL4",4,0)
 D START^HBHCUTL
"RTN","HBHCUTL4",5,0)
 G:(HBHCBEG1=-1)!(HBHCEND1=-1) EXIT
"RTN","HBHCUTL4",6,0)
 S HBHCMSG="CPT Code must contain 5 numerics for use in a range."
"RTN","HBHCUTL4",7,0)
 W ! K DIR,DIRUT S DIR(0)="YO",DIR("A")="Will CPT Codes selected be a Range of codes  (Y/N)",DIR("?")="Enter 'Y' for Yes, a range of CPT Codes is requested, 'N' for No, individual CPT codes will be selected." D ^DIR G:$D(DIRUT) EXIT S HBHCDIR=Y
"RTN","HBHCUTL4",8,0)
 W ! K DIC,DTOUT,DUOUT S DIC="^ICPT(",DIC(0)="AEMNQZ",DIC("A")="Select Beginning CPT Code:  "
"RTN","HBHCUTL4",9,0)
BEGCPT ; Prompt for beginning CPT code of range
"RTN","HBHCUTL4",10,0)
 I HBHCDIR=1 D ^DIC G:(Y=-1)!($D(DTOUT))!($D(DUOUT)) EXIT I +$P(Y,U)'?3.5N W $C(7),!!,HBHCMSG,! G BEGCPT
"RTN","HBHCUTL4",11,0)
 S:HBHCDIR=1 HBHCCPTB=$P(Y,U),DIC("A")="Select Ending CPT Code:  "
"RTN","HBHCUTL4",12,0)
ENDCPT ; Prompt for Ending CPT Code of range
"RTN","HBHCUTL4",13,0)
 I HBHCDIR=1 D ^DIC G:(Y=-1)!($D(DTOUT))!($D(DUOUT)) EXIT I +$P(Y,U)'?3.5N W $C(7),!!,HBHCMSG,! G ENDCPT
"RTN","HBHCUTL4",14,0)
 I HBHCDIR=1 S:($P(Y,U)'<HBHCCPTB) HBHCCPTE=$P(Y,U) I ($P(Y,U)<HBHCCPTB) W $C(7),!!,"Ending CPT Code in range must be greater than the Beginning CPT Code",! G ENDCPT
"RTN","HBHCUTL4",15,0)
 I HBHCDIR=0 K DIC("A"),HBHCTMP
"RTN","HBHCUTL4",16,0)
CPT ; Prompt for CPT code(s)
"RTN","HBHCUTL4",17,0)
 I HBHCDIR=0 D ^DIC G:(Y=-1)!($D(DTOUT))!($D(DUOUT)) EXIT S HBHCTMP(""_$P(Y(0),U)_"")=$P(Y(0),U,2) G CPT
"RTN","HBHCUTL4",18,0)
EXIT ; Exit module
"RTN","HBHCUTL4",19,0)
 Q
"RTN","HBHCUTL4",20,0)
KILL ; Kill variables
"RTN","HBHCUTL4",21,0)
 K DIR,DIRUT,HBHCBEG2,HBHCCC,HBHCCNT,HBHCCOLM,HBHCCPTA,HBHCCPT,HBHCDATE,HBHCDFN,HBHCDIR,HBHCDPT0,HBHCEND2,HBHCHDR,HBHCI,HBHCMSG,HBHCNOD0,HBHCPAGE,HBHCTDY,HBHCTMP,HBHCTOT,HBHCY,HBHCZ,X,X1,X2,^TMP("HBHC",$J)
"RTN","HBHCUTL4",22,0)
 Q
"RTN","HBHPST16")
0^26^B423156
"RTN","HBHPST16",1,0)
HBHPST16 ; LR VAMC(IRMS)/MJT-HBHC Post Install routine for HBH*1*16, delete obsolete option & routine:  HBHCRP13, populate new ^HBHC(632) "AE" cross-ref on field 31, Outpatient Encounter ; May 2000
"RTN","HBHPST16",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**16**;NOV 01, 1993
"RTN","HBHPST16",3,0)
 ; Delete obsolete HBHCRP13 option, QA Indicator Report
"RTN","HBHPST16",4,0)
 S DIK="^DIC(19,",DA=0 F  S DA=$O(^DIC(19,"B","HBHCRP13",DA)) Q:DA'>0  D ^DIK
"RTN","HBHPST16",5,0)
 ; Delete obsolete HBHCRP13 routine 
"RTN","HBHPST16",6,0)
 I $D(^%ZOSF("DEL")) S X="HBHCRP13" X ^%ZOSF("DEL")
"RTN","HBHPST16",7,0)
 ; Populate new HBHC(632,"AE" cross-ref
"RTN","HBHPST16",8,0)
 K ^HBHC(632,"AE") S DIK="^HBHC(632,",DIK(1)=31 D ENALL^DIK
"RTN","HBHPST16",9,0)
 Q 
"VER")
8.0^22.0
"^DD",632,632,0)
FIELD^^32^23
"^DD",632,632,0,"DDA")
N
"^DD",632,632,0,"DT")
3000503
"^DD",632,632,0,"ID",1)
W "   ",$E($P(^(0),U,2),4,5)_"-"_$E($P(^(0),U,2),6,7)_"-"_$E($P(^(0),U,2),2,3)
"^DD",632,632,0,"ID",2)
S %I=Y,Y=$S('$D(^(0)):"",$D(^SC(+$P(^(0),U,3),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(44,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",632,632,0,"IX","AC",632,7)

"^DD",632,632,0,"IX","AD",632,10)

"^DD",632,632,0,"IX","AE",632,31)

"^DD",632,632,0,"IX","B",632,.01)

"^DD",632,632,0,"IX","C",632,1)

"^DD",632,632,0,"NM","HBHC VISIT")

"^DD",632,632,0,"PT",634.2,1)

"^DD",632,632,0,"VRPK")
HBH
"^DD",632,632,.01,0)
PATIENT NAME^RP2'^DPT(^0;1^Q
"^DD",632,632,.01,1,0)
^.1
"^DD",632,632,.01,1,1,0)
632^B
"^DD",632,632,.01,1,1,1)
S ^HBHC(632,"B",$E(X,1,30),DA)=""
"^DD",632,632,.01,1,1,2)
K ^HBHC(632,"B",$E(X,1,30),DA)
"^DD",632,632,.01,1,1,"%D",0)
^^2^2^2921229^^
"^DD",632,632,.01,1,1,"%D",1,0)
This cross-reference represents regular 'B' file index of HBHC Visit (632)
"^DD",632,632,.01,1,1,"%D",2,0)
file, Patient Name (.01) field, which references Patient (2) file entries.
"^DD",632,632,.01,3)
Answer using last name, first name, middle name format, or enter first letter of last name and last four digits of social security number  (e.g. A1234).
"^DD",632,632,.01,21,0)
^^2^2^2921215^^^
"^DD",632,632,.01,21,1,0)
This field represents patient's name in Patient (2) file.  Patient must
"^DD",632,632,.01,21,2,0)
exist in DPT for HBHC selection, since LAYGO is not allowed.
"^DD",632,632,.01,"DT")
2921216
"^DD",632,632,1,0)
DATE^D^^0;2^S %DT="ETX" D ^%DT S X=Y K:2770101>X X
"^DD",632,632,1,1,0)
^.1
"^DD",632,632,1,1,1,0)
632^C
"^DD",632,632,1,1,1,1)
S ^HBHC(632,"C",$E(X,1,30),DA)=""
"^DD",632,632,1,1,1,2)
K ^HBHC(632,"C",$E(X,1,30),DA)
"^DD",632,632,1,1,1,"%D",0)
^^2^2^2921230^^^
"^DD",632,632,1,1,1,"%D",1,0)
This cross-reference represents regular 'C' file index of HBHC Visit (632)
"^DD",632,632,1,1,1,"%D",2,0)
file, Date (1) field.  Date field updated by package only, no user input.
"^DD",632,632,1,1,1,"DT")
2920413
"^DD",632,632,1,3)
Answer is date of HBHC visit.  Answer must be 1/1/1977 or later.  Field updated by package only, no user input.
"^DD",632,632,1,21,0)
^^3^3^2921218^^^
"^DD",632,632,1,21,1,0)
This field represents date of HBHC visit.  Date range allowed is
"^DD",632,632,1,21,2,0)
1/1/1977 or later.  Field updated by package only,
"^DD",632,632,1,21,3,0)
no user input.
"^DD",632,632,1,"DT")
2921218
"^DD",632,632,2,0)
CLINIC NUMBER^P44'^SC(^0;3^Q
"^DD",632,632,2,3)
Answer is clinic that exists in Hospital Location file.  Field updated only by package, no user input.
"^DD",632,632,2,21,0)
^^3^3^2921211^^
"^DD",632,632,2,21,1,0)
This field represents HBHC Clinic number in Hospital Location (44) file.
"^DD",632,632,2,21,2,0)
Clinic must exist in Hospital Location file, since LAYGO is not allowed.
"^DD",632,632,2,21,3,0)
Field updated by package only, no user input.
"^DD",632,632,2,"DT")
2910820
"^DD",632,632,3,0)
PROVIDER^P631.4'^HBHC(631.4,^0;4^Q
"^DD",632,632,3,3)
Answer with provider name or provider number that exists in HBHC Provider file.
"^DD",632,632,3,21,0)
^^3^3^2921203^^
"^DD",632,632,3,21,1,0)
This field represents HBHC provider number, referencing HBHC Provider
"^DD",632,632,3,21,2,0)
(631.4) file entries.  Provider must exist in HBHC Provider file, since
"^DD",632,632,3,21,3,0)
LAYGO is not allowed.
"^DD",632,632,3,"DT")
2910820
"^DD",632,632,4,0)
TYPE OF VISIT^P631.5'^HBHC(631.5,^0;5^Q
"^DD",632,632,4,3)
Answer with 1 digit numeric code representing type of visit.
"^DD",632,632,4,21,0)
^^2^2^2921211^
"^DD",632,632,4,21,1,0)
This field represents 1 digit numeric code for HBHC Type of Visit,
"^DD",632,632,4,21,2,0)
referencing HBHC Type of Visit (631.5) file entries.
"^DD",632,632,4,"DT")
2920427
"^DD",632,632,5,0)
COMMENTS^F^^0;6^K:$L(X)>30!($L(X)<1) X
"^DD",632,632,5,3)
Answer must be 1-30 characters in length.
"^DD",632,632,5,21,0)
^^2^2^2921216^^^
"^DD",632,632,5,21,1,0)
This field represents comments pertaining to this visit.  Field allows
"^DD",632,632,5,21,2,0)
1-30 characters of free text. 
"^DD",632,632,5,"DT")
2910820
"^DD",632,632,6,0)
CANCELLED APPOINTMENT^F^^0;7^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<1) X
"^DD",632,632,6,1,0)
^.1^^0
"^DD",632,632,6,3)
Field updated only by package, no user input.  Answer must be 1-30 characters in length.
"^DD",632,632,6,21,0)
^^2^2^2921215^^
"^DD",632,632,6,21,1,0)
This field represents cancelled appointment codes.  Field updated by
"^DD",632,632,6,21,2,0)
package only, no user input.
"^DD",632,632,6,"DT")
2950109
"^DD",632,632,7,0)
FORM 4 TRANSMIT STATUS^S^C:Record Contains Cancelled Appointment;F:Record in Transmit File;N:Record Needs Transmitting;P:Record Prior to Package Startup Date;T:Record Transmitted;O:Record Omitted, Pre-dates 10/1/96 PCE Usage;^0;8^Q
"^DD",632,632,7,1,0)
^.1
"^DD",632,632,7,1,1,0)
632^AC
"^DD",632,632,7,1,1,1)
S ^HBHC(632,"AC",$E(X,1,30),DA)=""
"^DD",632,632,7,1,1,2)
K ^HBHC(632,"AC",$E(X,1,30),DA)
"^DD",632,632,7,1,1,"%D",0)
^^3^3^2991115^^^^
"^DD",632,632,7,1,1,"%D",1,0)
This cross-reference represents regular 'AC' file index of HBHC Visit (632)
"^DD",632,632,7,1,1,"%D",2,0)
file, Form 4 (Visit) Transmit Status (7) field.  Form 4 Transmit Status
"^DD",632,632,7,1,1,"%D",3,0)
field updated by package only, no user input.
"^DD",632,632,7,1,1,"DT")
2920427
"^DD",632,632,7,3)
Field updated only by package, no user input.
"^DD",632,632,7,21,0)
^^5^5^2970313^^^^
"^DD",632,632,7,21,1,0)
This field represents Form 4 (Visit) Transmit Status.  Field will contain
"^DD",632,632,7,21,2,0)
either 'C' (Record Contains Cancelled Appointment), 'F' (Record in Transmit
"^DD",632,632,7,21,3,0)
File), 'N' (Record Needs Transmitting), 'O' (Record Omitted, Pre-dates 10/1/96
"^DD",632,632,7,21,4,0)
PCE Usage), 'P' (Record Prior to Package Startup Date),  or 'T' (Record
"^DD",632,632,7,21,5,0)
Transmitted).  Field updated by package only, no user input.
"^DD",632,632,7,"DT")
2970313
"^DD",632,632,8,0)
FORM 4 FILED IN HBHC(634) DATE^D^^0;9^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",632,632,8,3)
Date Form 4 filed in Transmit file.  Field updated only by package, no user input.
"^DD",632,632,8,21,0)
^^2^2^2921216^^
"^DD",632,632,8,21,1,0)
This field represents date Form 4 (Visit) record filed in Transmit
"^DD",632,632,8,21,2,0)
(634) file.  Field updated by package only, no user input.
"^DD",632,632,8,"DT")
2920429
"^DD",632,632,9,0)
FORM 4 BATCH INITIAL MM MSG #^F^^0;10^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>15!($L(X)<3) X
"^DD",632,632,9,1,0)
^.1^^0
"^DD",632,632,9,3)
Field updated only by package, no user input.  Number represents first MM msg # in transmission batch.  Record may be transmitted in different msg, if multiple msgs transmitted.
"^DD",632,632,9,21,0)
^^4^4^2921215^
"^DD",632,632,9,21,1,0)
This field represents MailMan message number of 'First' MailMan message
"^DD",632,632,9,21,2,0)
in Austin transmission batch.  Record 'may' be transmitted in different
"^DD",632,632,9,21,3,0)
message, if multiple messages are transmitted in one transmission batch.
"^DD",632,632,9,21,4,0)
Field updated by package only, no user input.
"^DD",632,632,9,"DT")
2920626
"^DD",632,632,10,0)
FORM 4 MAIL MESSAGE DATE^D^^0;11^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",632,632,10,1,0)
^.1
"^DD",632,632,10,1,1,0)
632^AD
"^DD",632,632,10,1,1,1)
S ^HBHC(632,"AD",$E(X,1,30),DA)=""
"^DD",632,632,10,1,1,2)
K ^HBHC(632,"AD",$E(X,1,30),DA)
"^DD",632,632,10,1,1,"%D",0)
^^3^3^2921230^^^
"^DD",632,632,10,1,1,"%D",1,0)
This cross-reference represents regular 'AD' file index of HBHC Visit (632)
"^DD",632,632,10,1,1,"%D",2,0)
file, Form 4 (Visit) Mail Message Date (10) field.  Form 4 Mail Message Date
"^DD",632,632,10,1,1,"%D",3,0)
field updated by package only, no user input.
"^DD",632,632,10,1,1,"DT")
2920504
"^DD",632,632,10,3)
Field updated only by package, no user input.
"^DD",632,632,10,21,0)
^^2^2^2921215^
"^DD",632,632,10,21,1,0)
This field represents date of Form 4 (Visit) record transmission via
"^DD",632,632,10,21,2,0)
MailMan to Austin.  Field updated by package only, no user input.
"^DD",632,632,10,"DT")
2920504
"^DD",632,632,11,0)
FORM 4 TRANSMIT FLAG EDIT DATE^D^^0;12^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",632,632,11,3)
Field updated only by package, no user input.  Field is updated with current date when user requests Form 4 Transmit Status flag be reset (allowing editing of transmitted record).
"^DD",632,632,11,21,0)
^^3^3^2921216^^
"^DD",632,632,11,21,1,0)
This field represents date Form 4 (Visit) Transmit Status flag was
"^DD",632,632,11,21,2,0)
requested by user to be reset (allowing editing of previously transmitted
"^DD",632,632,11,21,3,0)
record).  Field updated by package only, no user input.
"^DD",632,632,11,"DT")
2920429
"^DD",632,632,12,0)
FORM 4 TRANSMIT FLAG EDIT DUZ^P200'^VA(200,^0;13^Q
"^DD",632,632,12,3)
Field updated only by package, no user input.  Field is updated with user's DUZ when user requests Form 4 Transmit Status flag be reset (allowing editing of transmitted record).
"^DD",632,632,12,21,0)
^^3^3^2921215^
"^DD",632,632,12,21,1,0)
This field represents DUZ of user requesting Form 4 (Visit) Transmit
"^DD",632,632,12,21,2,0)
Status flag be reset (allowing editing of previously transmitted
"^DD",632,632,12,21,3,0)
record).  Field updated by package only, no user input.
"^DD",632,632,12,"DT")
2920429
"^DD",632,632,13,0)
FORM 4 RE-TRANS BATCH MM MSG #^F^^0;14^K:$L(X)>15!($L(X)<3) X
"^DD",632,632,13,3)
Field updated only by package, no user input.  Number represents first MM msg # in re-transmission batch.  Record may be transmitted in different msg, if multiple msgs transmitted.
"^DD",632,632,13,21,0)
^^4^4^2921215^
"^DD",632,632,13,21,1,0)
This field represents MailMan message number of 'First' MailMan message
"^DD",632,632,13,21,2,0)
in re-transmission batch to Austin.  Record 'may' be transmitted in
"^DD",632,632,13,21,3,0)
different message, if multiple messages are transmitted in one
"^DD",632,632,13,21,4,0)
re-transmission batch.  Field updated by package only, no user input.
"^DD",632,632,13,"DT")
2920626
"^DD",632,632,14,0)
FORM 4 RE-TRANSMIT DATE^D^^0;15^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",632,632,14,3)
Field updated only by package, no user input.
"^DD",632,632,14,21,0)
^^2^2^2921215^
"^DD",632,632,14,21,1,0)
This field represents date of Form 4 (Visit) record re-transmission via
"^DD",632,632,14,21,2,0)
MailMan to Austin.  Field updated by package only, no user input.
"^DD",632,632,14,"DT")
2920504
"^DD",632,632,15,0)
QA INDICATOR^F^^0;16^K:$L(X)>2!($L(X)<1) X
"^DD",632,632,15,3)
Answer must be 1-2 characters in length.  Refer to directions from Office of Geriatrics & Extended Care for current QA Indicator data value instructions.
"^DD",632,632,15,21,0)
^^4^4^2930702^^
"^DD",632,632,15,21,1,0)
This field represents a generic QA Indicator.  The Office of Geriatrics &
"^DD",632,632,15,21,2,0)
Extended Care supplies HBHC programs with current QA Indicator information.
"^DD",632,632,15,21,3,0)
The QA Indicator & corresponding data value for the field will change
"^DD",632,632,15,21,4,0)
periodically at the discretion of the Geriatrics & Extended Care office.
"^DD",632,632,15,"DT")
2930702
"^DD",632,632,16,0)
DIAGNOSIS 1^RP80'O^ICD9(^0;17^Q
"^DD",632,632,16,2)
S Y(0)=Y Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,17),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,16,2.1)
Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,17),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,16,3)
Field updated by package only, no user input.
"^DD",632,632,16,21,0)
^^2^2^2970214^^^
"^DD",632,632,16,21,1,0)
This field represents primary diagnosis (ICD9 code) for this visit.  Field
"^DD",632,632,16,21,2,0)
updated by package only, no user input. 
"^DD",632,632,16,"DT")
2970307
"^DD",632,632,17,0)
DIAGNOSIS 2^P80'O^ICD9(^0;18^Q
"^DD",632,632,17,2)
S Y(0)=Y Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,18),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,17,2.1)
Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,18),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,17,3)
Field updated by package only, no user input.
"^DD",632,632,17,21,0)
^^2^2^2970214^^^
"^DD",632,632,17,21,1,0)
This field represents diagnosis number two (ICD9 code) for this visit.  Field
"^DD",632,632,17,21,2,0)
updated by package only, no user input. 
"^DD",632,632,17,"DT")
2970307
"^DD",632,632,18,0)
DIAGNOSIS 3^P80'O^ICD9(^0;19^Q
"^DD",632,632,18,2)
S Y(0)=Y Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,19),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,18,2.1)
Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,19),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,18,3)
Field updated by package only, no user input.
"^DD",632,632,18,21,0)
^^2^2^2970214^^^^
"^DD",632,632,18,21,1,0)
This field represents diagnosis number three (ICD9 code) for this visit.  Field
"^DD",632,632,18,21,2,0)
updated by package only, no user input. 
"^DD",632,632,18,"DT")
2970307
"^DD",632,632,19,0)
DIAGNOSIS 4^P80'O^ICD9(^0;20^Q
"^DD",632,632,19,2)
S Y(0)=Y Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,20),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,19,2.1)
Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,20),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,19,3)
Field updated by package only, no user input.
"^DD",632,632,19,21,0)
^^2^2^2970214^^^^
"^DD",632,632,19,21,1,0)
This field represents diagnosis number four (ICD9 code) for this visit.  Field
"^DD",632,632,19,21,2,0)
updated by package only, no user input.
"^DD",632,632,19,"DT")
2970307
"^DD",632,632,20,0)
DIAGNOSIS 5^P80'O^ICD9(^0;21^Q
"^DD",632,632,20,2)
S Y(0)=Y Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,21),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,20,2.1)
Q:Y=""  S Z0=$S($D(^HBHC(632,D0,0)):$P(^(0),U,21),1:"") Q:'Z0  S Y=$S($D(^ICD9(Z0,0)):$P(^ICD9(Z0,0),U)_"  "_$P(^ICD9(Z0,0),U,3),1:"")
"^DD",632,632,20,3)
Field updated by package only, no user input.
"^DD",632,632,20,21,0)
^^2^2^2970214^
"^DD",632,632,20,21,1,0)
This field represents diagnosis number five (ICD9 code) for this visit.  Field
"^DD",632,632,20,21,2,0)
updated by package only, no user input.
"^DD",632,632,20,"DT")
2970307
"^DD",632,632,31,0)
OUTPATIENT ENCOUNTER^P409.68'^SCE(^0;22^Q
"^DD",632,632,31,1,0)
^.1
"^DD",632,632,31,1,1,0)
632^AE
"^DD",632,632,31,1,1,1)
S ^HBHC(632,"AE",$E(X,1,30),DA)=""
"^DD",632,632,31,1,1,2)
K ^HBHC(632,"AE",$E(X,1,30),DA)
"^DD",632,632,31,1,1,"%D",0)
^^3^3^2991115^
"^DD",632,632,31,1,1,"%D",1,0)
This cross-reference represents regular 'AE' file index of HBHC Visit (632)
"^DD",632,632,31,1,1,"%D",2,0)
file, Outpatient Encounter (31) field.  Outpatient Encounter field updated
"^DD",632,632,31,1,1,"%D",3,0)
by package only, no user input. 
"^DD",632,632,31,1,1,"DT")
2991115
"^DD",632,632,31,3)
Field updated by package only, no user input.
"^DD",632,632,31,21,0)
^^2^2^2970702^^^^
"^DD",632,632,31,21,1,0)
This field represents outpatient encounter record in ^SCE (#409.68) file. 
"^DD",632,632,31,21,2,0)
Field updated by package only, no user input. 
"^DD",632,632,31,"DT")
2991115
"^DD",632,632,32,0)
CPT^632.032PA^^2;0
"^DD",632,632.032,0)
CPT SUB-FIELD^^1^2
"^DD",632,632.032,0,"DT")
3000503
"^DD",632,632.032,0,"IX","B",632.032,.01)

"^DD",632,632.032,0,"NM","CPT")

"^DD",632,632.032,0,"UP")
632
"^DD",632,632.032,.01,0)
CPT^MRP81'^ICPT(^0;1^Q
"^DD",632,632.032,.01,1,0)
^.1
"^DD",632,632.032,.01,1,1,0)
632.032^B
"^DD",632,632.032,.01,1,1,1)
S ^HBHC(632,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",632,632.032,.01,1,1,2)
K ^HBHC(632,DA(1),2,"B",$E(X,1,30),DA)
"^DD",632,632.032,.01,3)
Field updated by package only, no user input.
"^DD",632,632.032,.01,21,0)
^.001^2^2^3000503^^^^
"^DD",632,632.032,.01,21,1,0)
This field represents the CPT code(s) performed during the encounter. 
"^DD",632,632.032,.01,21,2,0)
Field updated by package only, no user input. 
"^DD",632,632.032,.01,"DT")
2991206
"^DD",632,632.032,1,0)
CPT MODIFIER^632.321PA^^1;0
"^DD",632,632.321,0)
CPT MODIFIER SUB-FIELD^^.01^1
"^DD",632,632.321,0,"DT")
3000503
"^DD",632,632.321,0,"IX","B",632.321,.01)

"^DD",632,632.321,0,"NM","CPT MODIFIER")

"^DD",632,632.321,0,"UP")
632.032
"^DD",632,632.321,.01,0)
CPT MODIFIER^MP81.3'^DIC(81.3,^0;1^Q
"^DD",632,632.321,.01,1,0)
^.1
"^DD",632,632.321,.01,1,1,0)
632.321^B
"^DD",632,632.321,.01,1,1,1)
S ^HBHC(632,DA(2),2,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",632,632.321,.01,1,1,2)
K ^HBHC(632,DA(2),2,DA(1),1,"B",$E(X,1,30),DA)
"^DD",632,632.321,.01,3)
Field updated by package only, no user input.
"^DD",632,632.321,.01,21,0)
^.001^2^2^3000503^^^^
"^DD",632,632.321,.01,21,1,0)
This field contains CPT Modifier(s) related to the CPT Code(s) for the 
"^DD",632,632.321,.01,21,2,0)
visit.  Field updated by package only, no user input.
"^DD",632,632.321,.01,"DT")
3000503
"^DIC",632,632,0)
HBHC VISIT
"^DIC",632,632,0,"GL")
^HBHC(632,
"^DIC",632,632,"%D",0)
^^2^2^2931015^^^^
"^DIC",632,632,"%D",1,0)
This file is the HBHC Visit file and includes visit and record transmission
"^DIC",632,632,"%D",2,0)
data.
"^DIC",632,"B","HBHC VISIT",632)

**END**
**END**

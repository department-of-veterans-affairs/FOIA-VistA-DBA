Released LR*5.2*355 SEQ #269
Extracted from mail message
**KIDS**:LR*5.2*355^

**INSTALL NAME**
LR*5.2*355
"BLD",6714,0)
LR*5.2*355^LAB SERVICE^0^3060411^y
"BLD",6714,1,0)
^^2^2^3060322^
"BLD",6714,1,1,0)
This patch corrects a SUBSCRIPT error causing the HAM report to error
"BLD",6714,1,2,0)
out.
"BLD",6714,4,0)
^9.64PA^^
"BLD",6714,6)
4^
"BLD",6714,"ABPKG")
n
"BLD",6714,"KRN",0)
^9.67PA^8989.52^19
"BLD",6714,"KRN",.4,0)
.4
"BLD",6714,"KRN",.401,0)
.401
"BLD",6714,"KRN",.402,0)
.402
"BLD",6714,"KRN",.403,0)
.403
"BLD",6714,"KRN",.5,0)
.5
"BLD",6714,"KRN",.84,0)
.84
"BLD",6714,"KRN",3.6,0)
3.6
"BLD",6714,"KRN",3.8,0)
3.8
"BLD",6714,"KRN",9.2,0)
9.2
"BLD",6714,"KRN",9.8,0)
9.8
"BLD",6714,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6714,"KRN",9.8,"NM",1,0)
LRAPSM^^0^14446711
"BLD",6714,"KRN",9.8,"NM","B","LRAPSM",1)

"BLD",6714,"KRN",19,0)
19
"BLD",6714,"KRN",19,"NM",0)
^9.68A^^
"BLD",6714,"KRN",19.1,0)
19.1
"BLD",6714,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",6714,"KRN",101,0)
101
"BLD",6714,"KRN",101,"NM",0)
^9.68A^^
"BLD",6714,"KRN",409.61,0)
409.61
"BLD",6714,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",6714,"KRN",771,0)
771
"BLD",6714,"KRN",771,"NM",0)
^9.68A^^
"BLD",6714,"KRN",870,0)
870
"BLD",6714,"KRN",870,"NM",0)
^9.68A^^
"BLD",6714,"KRN",8989.51,0)
8989.51
"BLD",6714,"KRN",8989.51,"NM",0)
^9.68A^^
"BLD",6714,"KRN",8989.52,0)
8989.52
"BLD",6714,"KRN",8994,0)
8994
"BLD",6714,"KRN","B",.4,.4)

"BLD",6714,"KRN","B",.401,.401)

"BLD",6714,"KRN","B",.402,.402)

"BLD",6714,"KRN","B",.403,.403)

"BLD",6714,"KRN","B",.5,.5)

"BLD",6714,"KRN","B",.84,.84)

"BLD",6714,"KRN","B",3.6,3.6)

"BLD",6714,"KRN","B",3.8,3.8)

"BLD",6714,"KRN","B",9.2,9.2)

"BLD",6714,"KRN","B",9.8,9.8)

"BLD",6714,"KRN","B",19,19)

"BLD",6714,"KRN","B",19.1,19.1)

"BLD",6714,"KRN","B",101,101)

"BLD",6714,"KRN","B",409.61,409.61)

"BLD",6714,"KRN","B",771,771)

"BLD",6714,"KRN","B",870,870)

"BLD",6714,"KRN","B",8989.51,8989.51)

"BLD",6714,"KRN","B",8989.52,8989.52)

"BLD",6714,"KRN","B",8994,8994)

"BLD",6714,"QUES",0)
^9.62^^
"BLD",6714,"REQB",0)
^9.611^1^1
"BLD",6714,"REQB",1,0)
LR*5.2*253^1
"BLD",6714,"REQB","B","LR*5.2*253",1)

"MBREQ")
0
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950304
"PKG",26,22,1,"PAH",1,0)
355^3060411^33274
"PKG",26,22,1,"PAH",1,1,0)
^^2^2^3060411
"PKG",26,22,1,"PAH",1,1,1,0)
This patch corrects a SUBSCRIPT error causing the HAM report to error
"PKG",26,22,1,"PAH",1,1,2,0)
out.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","LRAPSM")
0^1^B14446711^B13812630
"RTN","LRAPSM",1,0)
LRAPSM ;AVAMC/REG - SNOMED SEARCH ;8/14/95  09:49
"RTN","LRAPSM",2,0)
 ;;5.2;LAB SERVICE;**72,253,355**;Sep 27, 1994
"RTN","LRAPSM",3,0)
 S IOP="HOME" D ^%ZIS W @IOF,!?20,LRO(68)," search by ",S(7)," code"
"RTN","LRAPSM",4,0)
 S (LR,LR(1),LR(2),LR(3))=0
"RTN","LRAPSM",5,0)
TP K A("B") W !!,"TOPOGRAPHY (Organ/Tissue)",!?5,"Select 1 or more characters of the code",!?5 R "For all sites type 'ALL' : ",X:DTIME Q:X=""!(X[U)  I X["ALL" S S(2)="ALL"
"RTN","LRAPSM",6,0)
 E  D CK^LRAUSM G:$D(A("B")) TP S S(2)=X,S(1)=$L(X)
"RTN","LRAPSM",7,0)
 K LRN,LRM S (LRO,LRN)="" W !!,S(7) I LRSN=61.5 D POS Q:'$D(LRO)
"RTN","LRAPSM",8,0)
 W !?5,"For all choices type 'ALL'" F B=1:1 D ASK Q:X[U!(X="")!(LRN="ALL")
"RTN","LRAPSM",9,0)
 Q:B<2&(LRN="")  S:LRN=""&(B=2) LRN=$O(LRN(0)) W ! D B^LRU Q:Y<0  S LRSDT=LRSDT-.01,LRLDT=LRLDT+.99
"RTN","LRAPSM",10,0)
 S ZTRTN="QUE^LRAPSM" D BEG^LRUTL Q:POP!($D(ZTSK))
"RTN","LRAPSM",11,0)
QUE U IO K ^TMP($J) D L^LRU,S^LRU,XR^LRU
"RTN","LRAPSM",12,0)
 S ^TMP($J,0)=S(2)_U_LRN_U_LRO(68)_U_S(7)
"RTN","LRAPSM",13,0)
 F X=0:0 S LRSDT=$O(^LR(LRXR,LRSDT)) Q:'LRSDT!(LRSDT>LRLDT)  D LRDFN
"RTN","LRAPSM",14,0)
END D ^LRAPSM1,END^LRUTL,V^LRU Q
"RTN","LRAPSM",15,0)
Y I $E(X,1,Y(1))=Y(2) S I=1 Q
"RTN","LRAPSM",16,0)
Y1 S I=1 F I(1)=1:1:Y(1) S I(2)=$E(Y(2),I(1)) I I(2)'="*",I(2)'=$E(X,I(1)) S I=0 Q
"RTN","LRAPSM",17,0)
 Q
"RTN","LRAPSM",18,0)
LRDFN S LRDFN=0 F  S LRDFN=$O(^LR(LRXR,LRSDT,LRDFN)) Q:'LRDFN  S LR(2)=LR(2)+1 D I
"RTN","LRAPSM",19,0)
 Q
"RTN","LRAPSM",20,0)
I F LRI=0:0 S LRI=$O(^LR(LRXR,LRSDT,LRDFN,LRI)) Q:'LRI  D T
"RTN","LRAPSM",21,0)
 Q
"RTN","LRAPSM",22,0)
T Q:$P($P($G(^LR(LRDFN,LRSS,LRI,0)),U,6)," ")'=LRABV
"RTN","LRAPSM",23,0)
 S LR(4)=^LR(LRDFN,LRSS,LRI,0),LR(12)=$P(LR(4),"^",10)
"RTN","LRAPSM",24,0)
 S H(2)=$E(LR(12),1,3),LRAC=$P(LR(4),"^",6),LRAN=+$P(LRAC," ",3)
"RTN","LRAPSM",25,0)
 S LR(3)=LR(3)+1
"RTN","LRAPSM",26,0)
 S T=0 F LR(9)=0:1 S T=$O(^LR(LRDFN,LRSS,LRI,2,T)) Q:'T  S LR(7)=+^(T,0) D TG
"RTN","LRAPSM",27,0)
 S LR=LR+LR(9) Q  ;Number of organ/tissues
"RTN","LRAPSM",28,0)
TG Q:'$D(^LAB(61,LR(7),0))  S LR(11)=^(0),LR(5)=$P(LR(11),"^"),LR(11)=$P(LR(11),"^",2) I S(2)'="ALL",$E(LR(11),1,S(1))'=S(2) Q:S(2)'["*"  S Y(1)=S(1),X=LR(11),Y(2)=S(2) D Y1 Q:'I
"RTN","LRAPSM",29,0)
 S LR(1)=LR(1)+1 D M Q  ;Total of the organ/tissue searched for
"RTN","LRAPSM",30,0)
M F M=0:0 S M=$O(^LR(LRDFN,LRSS,LRI,2,T,V,M)) Q:'M  S X=^(M,0),LR(8)=+X,LRM=$P(X,"^",2) D @($S(LRSN'=61.2:"MX",1:"E"))
"RTN","LRAPSM",31,0)
 Q
"RTN","LRAPSM",32,0)
E F E=0:0 S E=$O(^LR(LRDFN,LRSS,LRI,2,T,V,M,1,E)) Q:'E  S LR(8)=+^(E,0) D MX
"RTN","LRAPSM",33,0)
 Q
"RTN","LRAPSM",34,0)
MX Q:'$D(^LAB(LRSN,LR(8),0))  S W=^(0) I $D(LRO),LRO]"",LRO'=LRM Q
"RTN","LRAPSM",35,0)
 I LRN="ALL" I '$D(^TMP($J,H(2),LRAN,LR(7),0)) S ^TMP($J,H(2),LRAN,LR(7),0)=LR(5) D  G PRT
"RTN","LRAPSM",36,0)
 . I $P(W,"^",2)'="" S ^TMP($J,H(2),LRAN,LR(7),$P(W,"^",2))=$P(W,"^")_"^"_LRM Q
"RTN","LRAPSM",37,0)
 . S ^TMP($J,H(2),LRAN,LR(7),"99999999")=$P(W,"^")_"^"_LRM
"RTN","LRAPSM",38,0)
 S X=$P(W,"^",2),Y=0 F Z=1:1 S Y=$O(LRN(Y)) Q:Y=""  S Y(1)=LRM(Y),Y(2)=LRN(Y) D Y I I S:'$D(^TMP($J,H(2),LRAN,LR(7),0)) ^(0)=LR(5) S ^(X)=$P(W,"^")_"^"_LRM
"RTN","LRAPSM",39,0)
 Q:'$D(^TMP($J,H(2),LRAN))
"RTN","LRAPSM",40,0)
PRT S X=^LR(LRDFN,0),(LRDPF,LR(14))=$P(X,"^",2),LRPF=^DIC(LR(14),0,"GL"),DFN=$P(X,"^",3) Q:'$D(@(LRPF_DFN_",0)"))
"RTN","LRAPSM",41,0)
 S X=@(LRPF_DFN_",0)"),LRP=$P(X,"^"),SSN=$P(X,"^",9),SEX=$P(X,"^",2),DOB=$P(X,"^",3),X1=$P(LR(4),"^"),X2=DOB D ^%DTC,SSN^LRU S AGE=X\365.25
"RTN","LRAPSM",42,0)
 S:AGE>130 AGE="?"
"RTN","LRAPSM",43,0)
 S ^TMP($J,H(2),LRAN)=LRAC_"^"_AGE_"^"_SEX_"^"_LRP_"^"_SSN(1)_"^"_+$E(LR(12),4,5)_"/"_$E(LR(12),6,7)_"^"_LR(14)
"RTN","LRAPSM",44,0)
 S ^TMP($J,"B",LRP,H(2),LRAN)=""
"RTN","LRAPSM",45,0)
 Q
"RTN","LRAPSM",46,0)
ASK K A("B") W !,"Choice #",$J(B,2),": Select 1 or more characters of the code: " R X:DTIME Q:X=""!(X[U)  I X["ALL" S LRN="ALL" Q
"RTN","LRAPSM",47,0)
 D CK^LRAUSM G:$D(A("B")) ASK S LRN(X)=X,LRM(X)=$L(X) Q
"RTN","LRAPSM",48,0)
POS ;also from LRAPSEM
"RTN","LRAPSM",49,0)
 W !,"Select only procedures with results " S %=2 D YN^LRU I %<1 K LRO Q
"RTN","LRAPSM",50,0)
 I %=2 S LRO="" Q
"RTN","LRAPSM",51,0)
C W !,"Enter 1 for positive results or 0 for negative results: " R X:DTIME Q:X=""!(X[U)  I X'=1,X'=0 W $C(7)," Enter '1' or '0'" G C
"RTN","LRAPSM",52,0)
 S LRO=X Q
"VER")
8.0^22.0
"BLD",6714,6)
^269
**END**
**END**

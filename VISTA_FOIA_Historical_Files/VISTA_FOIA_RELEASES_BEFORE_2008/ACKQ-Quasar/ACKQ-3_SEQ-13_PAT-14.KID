Released ACKQ*3*14 SEQ #13
Extracted from mail message
**KIDS**:ACKQ*3.0*14^

**INSTALL NAME**
ACKQ*3.0*14
"BLD",6278,0)
ACKQ*3.0*14^QUASAR^0^3061103^y
"BLD",6278,1,0)
^^5^5^3061103^
"BLD",6278,1,1,0)
Within the New Clinic Visits [ACKQAS VISIT ENTRY] and Edit an Existing 
"BLD",6278,1,2,0)
Visit [ACKQAS VISIT EDIT] options, if a patient has more than twenty-two
"BLD",6278,1,3,0)
Rated Disabilities, the display will scroll off the top of the screen.  A
"BLD",6278,1,4,0)
change has been made to display the multiple Rated Disabilities one screen
"BLD",6278,1,5,0)
at a time.
"BLD",6278,4,0)
^9.64PA^^
"BLD",6278,6.3)
14
"BLD",6278,"ABPKG")
n
"BLD",6278,"KRN",0)
^9.67PA^8989.52^19
"BLD",6278,"KRN",.4,0)
.4
"BLD",6278,"KRN",.401,0)
.401
"BLD",6278,"KRN",.402,0)
.402
"BLD",6278,"KRN",.403,0)
.403
"BLD",6278,"KRN",.5,0)
.5
"BLD",6278,"KRN",.84,0)
.84
"BLD",6278,"KRN",3.6,0)
3.6
"BLD",6278,"KRN",3.8,0)
3.8
"BLD",6278,"KRN",9.2,0)
9.2
"BLD",6278,"KRN",9.8,0)
9.8
"BLD",6278,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",6278,"KRN",9.8,"NM",1,0)
ACKQNQ^^0^B27196175
"BLD",6278,"KRN",9.8,"NM",2,0)
ACKQUTL4^^0^B85095923
"BLD",6278,"KRN",9.8,"NM","B","ACKQNQ",1)
 
"BLD",6278,"KRN",9.8,"NM","B","ACKQUTL4",2)
 
"BLD",6278,"KRN",19,0)
19
"BLD",6278,"KRN",19,"NM",0)
^9.68A^^0
"BLD",6278,"KRN",19.1,0)
19.1
"BLD",6278,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",6278,"KRN",101,0)
101
"BLD",6278,"KRN",101,"NM",0)
^9.68A^^
"BLD",6278,"KRN",409.61,0)
409.61
"BLD",6278,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",6278,"KRN",771,0)
771
"BLD",6278,"KRN",771,"NM",0)
^9.68A^^
"BLD",6278,"KRN",870,0)
870
"BLD",6278,"KRN",8989.51,0)
8989.51
"BLD",6278,"KRN",8989.52,0)
8989.52
"BLD",6278,"KRN",8994,0)
8994
"BLD",6278,"KRN","B",.4,.4)
 
"BLD",6278,"KRN","B",.401,.401)
 
"BLD",6278,"KRN","B",.402,.402)
 
"BLD",6278,"KRN","B",.403,.403)
 
"BLD",6278,"KRN","B",.5,.5)
 
"BLD",6278,"KRN","B",.84,.84)
 
"BLD",6278,"KRN","B",3.6,3.6)
 
"BLD",6278,"KRN","B",3.8,3.8)
 
"BLD",6278,"KRN","B",9.2,9.2)
 
"BLD",6278,"KRN","B",9.8,9.8)
 
"BLD",6278,"KRN","B",19,19)
 
"BLD",6278,"KRN","B",19.1,19.1)
 
"BLD",6278,"KRN","B",101,101)
 
"BLD",6278,"KRN","B",409.61,409.61)
 
"BLD",6278,"KRN","B",771,771)
 
"BLD",6278,"KRN","B",870,870)
 
"BLD",6278,"KRN","B",8989.51,8989.51)
 
"BLD",6278,"KRN","B",8989.52,8989.52)
 
"BLD",6278,"KRN","B",8994,8994)
 
"BLD",6278,"QUES",0)
^9.62^^
"BLD",6278,"REQB",0)
^9.611^1^1
"BLD",6278,"REQB",1,0)
ACKQ*3.0*8^1
"BLD",6278,"REQB","B","ACKQ*3.0*8",1)
 
"MBREQ")
0
"PKG",322,-1)
1^1
"PKG",322,0)
QUASAR^ACKQ^Quality: Audiology and Speech Pathology Audit and Review
"PKG",322,20,0)
^9.402P^^
"PKG",322,22,0)
^9.49I^1^1
"PKG",322,22,1,0)
3.0^3000211^3000317^2178
"PKG",322,22,1,"PAH",1,0)
14^3061103
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")
 
"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","ACKQNQ")
0^1^B27196175^B22396694
"RTN","ACKQNQ",1,0)
ACKQNQ ;AUG/JLTP,AEM BIR/PTD HCIOFO/BH HCIOFO/AG-Inquire - A&SP Patient ; 04/01/99 
"RTN","ACKQNQ",2,0)
 ;;3.0;QUASAR;**8,14**;Feb 11, 2000;Build 14
"RTN","ACKQNQ",3,0)
 ;Per VHA Directive 10-93-142, this routine SHOULD NOT be modified.
"RTN","ACKQNQ",4,0)
 ;
"RTN","ACKQNQ",5,0)
OPTN ;  Introduce option.
"RTN","ACKQNQ",6,0)
 S ACKQUIT=0
"RTN","ACKQNQ",7,0)
 W:$E(IOST,1,2)="C-" @IOF,!,"This option displays demographic data, inpatient status, and diagnostic",!,"history for a selected A&SP patient."
"RTN","ACKQNQ",8,0)
 ;
"RTN","ACKQNQ",9,0)
DIC ;  LOOKUP PATIENT
"RTN","ACKQNQ",10,0)
 N DIC
"RTN","ACKQNQ",11,0)
 W ! S DIC=509850.2,DIC(0)="AEMQ" D ^DIC
"RTN","ACKQNQ",12,0)
 I (Y<0)!($D(DUOUT)) S ACKQUIT=1 G EXIT
"RTN","ACKQNQ",13,0)
 S ACKDFN=+Y
"RTN","ACKQNQ",14,0)
 ;
"RTN","ACKQNQ",15,0)
ASK ;  Update patient's diagnostic history?
"RTN","ACKQNQ",16,0)
 S DIR(0)="Y",DIR("A")="Do you want to update this patient's diagnostic history NOW",DIR("B")="NO",DIR("?")="Enter YES to recompile the Problem List; enter NO to continue."
"RTN","ACKQNQ",17,0)
 S DIR("??")="^D UPDATE^ACKQHLP1" W ! D ^DIR K DIR G:$D(DIRUT) EXIT I Y=1 D UPDATE
"RTN","ACKQNQ",18,0)
 ;
"RTN","ACKQNQ",19,0)
DEV W !!,"The right margin for this report is 80.",!,"You can queue it to run at a later time.",!
"RTN","ACKQNQ",20,0)
 K %ZIS,IOP S %ZIS="QM",%ZIS("B")="" D ^%ZIS I POP W !,"NO DEVICE SELECTED OR REPORT PRINTED." G EXIT
"RTN","ACKQNQ",21,0)
 I $D(IO("Q")) K IO("Q") S ZTRTN="EN^ACKQNQ",ZTSAVE("ACKDFN")="",ZTDESC="QUASAR - Inquire - A&SP Patient" D ^%ZTLOAD D HOME^%ZIS K ZTSK G EXIT
"RTN","ACKQNQ",22,0)
 ;
"RTN","ACKQNQ",23,0)
EN U IO N DFN,I,X,Y S DFN=ACKDFN
"RTN","ACKQNQ",24,0)
 D DEM^VADPT,INP^VADPT,ELIG^VADPT
"RTN","ACKQNQ",25,0)
 S ACKIVD=$$NUMDT^ACKQUTL($P(^ACK(509850.2,DFN,0),U,2))
"RTN","ACKQNQ",26,0)
 K ACK S ACK(1)=VADM(1),ACK(2)=$P(VADM(3),U,2),ACK(3)=$P(VADM(2),U,2),ACK(4)=VADM(7),ACK(6)=$P(VAIN(4),U,2)
"RTN","ACKQNQ",27,0)
 S ACKINP=$S($L(ACK(6)):1,1:0),ACK(5)="Patient is "_$S(ACKINP:"",1:"not ")_"currently an inpatient."
"RTN","ACKQNQ",28,0)
 S ACK(7)=VAIN(5),ACK(8)=$P(VAIN(3),U,2),ACK(9)=$P(VAEL(1),U,2)
"RTN","ACKQNQ",29,0)
 ;
"RTN","ACKQNQ",30,0)
 ;
"RTN","ACKQNQ",31,0)
PRINT W:$E(IOST,1,2)="C-" @IOF
"RTN","ACKQNQ",32,0)
 D CNTR^ACKQUTL("Patient Inquiry")
"RTN","ACKQNQ",33,0)
 ;
"RTN","ACKQNQ",34,0)
 W !!
"RTN","ACKQNQ",35,0)
 W "PATIENT: ",ACK(1),?45,"DOB: ",ACK(2),?63,"SSN: ",ACK(3)
"RTN","ACKQNQ",36,0)
 W !,"ELIGIBILITY: ",ACK(9)
"RTN","ACKQNQ",37,0)
 W ?45,"INITIAL VISIT DATE: ",ACKIVD
"RTN","ACKQNQ",38,0)
 W:$L(ACK(4)) !,ACK(4) W !,ACK(5) D:ACKINP INP
"RTN","ACKQNQ",39,0)
 ;
"RTN","ACKQNQ",40,0)
 I $P(VAEL(3),U,1) W !!,"Patient is Service Connected."
"RTN","ACKQNQ",41,0)
 I '$P(VAEL(3),U,1) D
"RTN","ACKQNQ",42,0)
 . S ACKPAT=DFN D STATUS^ACKQUTL4 K VASV
"RTN","ACKQNQ",43,0)
 . D NOT^ACKQUTL7("Patient is not Service Connected.",ACKAO,ACKRAD,ACKENV)
"RTN","ACKQNQ",44,0)
 . K ACKPAT,ACKAO,ACKRAD,ACKENV
"RTN","ACKQNQ",45,0)
 ;
"RTN","ACKQNQ",46,0)
 D RATDIS  G:$G(DIRUT) EXIT
"RTN","ACKQNQ",47,0)
 D ICDSORT,DIAGHIST
"RTN","ACKQNQ",48,0)
 ;
"RTN","ACKQNQ",49,0)
EXIT I $G(ACKVISIT)'="",$G(DIRUT)=1 S ACKDIRUT=1  ;  Quit flag for template
"RTN","ACKQNQ",50,0)
 K %ZIS,ACK,ACKDC,ACKDD,ACKDFN,ACKDN,ACKI,ACKICD,ACKINP,ACKIVD,ACKLINE
"RTN","ACKQNQ",51,0)
 K ACKRD,DIRUT,DTOUT,DUOUT,VA,VADM,VAEL,VAERR,VAIN,X,X1,Y,ZTDESC,ZTIO
"RTN","ACKQNQ",52,0)
 K ZTRTN,ZTSAVE
"RTN","ACKQNQ",53,0)
 I $G(ACKQUIT)=1 D KILL^%ZISS Q
"RTN","ACKQNQ",54,0)
 I $E(IOST,1,2)="C-" W !!,"Press return to continue." R X:DTIME  W @IOF
"RTN","ACKQNQ",55,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","ACKQNQ",56,0)
 S ACKQUIT=0 G DIC
"RTN","ACKQNQ",57,0)
 Q
"RTN","ACKQNQ",58,0)
 ;
"RTN","ACKQNQ",59,0)
EN1 ;  CALL THIS ENTRY POINT INSTEAD OF EN
"RTN","ACKQNQ",60,0)
 D HOME^%ZIS G EN
"RTN","ACKQNQ",61,0)
 ;
"RTN","ACKQNQ",62,0)
 ;
"RTN","ACKQNQ",63,0)
INP ;  PRINT INPATIENT INFO
"RTN","ACKQNQ",64,0)
 W !,"WARD: ",ACK(6),?20,"ROOM/BED: ",ACK(7),?40,"TREATING SPEC: ",$E(ACK(8),1,25)
"RTN","ACKQNQ",65,0)
 Q
"RTN","ACKQNQ",66,0)
 ;
"RTN","ACKQNQ",67,0)
 ;
"RTN","ACKQNQ",68,0)
RATDIS ;  Display Patients RATED DISABILITIES
"RTN","ACKQNQ",69,0)
 Q:'$O(^DPT(DFN,.372,0))
"RTN","ACKQNQ",70,0)
 N ACKRD,RC,X,X1
"RTN","ACKQNQ",71,0)
 D ENS^%ZISS
"RTN","ACKQNQ",72,0)
 ;---
"RTN","ACKQNQ",73,0)
 S RC=$$PAGE(5)  Q:RC<0  W:'RC !!
"RTN","ACKQNQ",74,0)
 W IOUON,"Rated Disabilities",IOUOFF,!
"RTN","ACKQNQ",75,0)
 ;---
"RTN","ACKQNQ",76,0)
 S ACKRD=0
"RTN","ACKQNQ",77,0)
 F  S ACKRD=$O(^DPT(DFN,.372,ACKRD))  Q:'ACKRD  D  Q:RC<0
"RTN","ACKQNQ",78,0)
 . S RC=$$PAGE(2)  Q:RC<0
"RTN","ACKQNQ",79,0)
 . W:RC IOUON,"Rated Disabilities (cont'd)",IOUOFF,!
"RTN","ACKQNQ",80,0)
 . S X=^DPT(DFN,.372,ACKRD,0),X1=$P(^DIC(31,+X,0),U)
"RTN","ACKQNQ",81,0)
 . W !,X1_"  ("_$P(X,U,2)_"%)"  I $P(X,U,3) W "  (SC)"
"RTN","ACKQNQ",82,0)
 Q
"RTN","ACKQNQ",83,0)
 ;
"RTN","ACKQNQ",84,0)
DIAGHIST ;
"RTN","ACKQNQ",85,0)
 Q:$D(ACKICD)<10
"RTN","ACKQNQ",86,0)
 N ACKI,RC
"RTN","ACKQNQ",87,0)
 D ENS^%ZISS
"RTN","ACKQNQ",88,0)
 ;---
"RTN","ACKQNQ",89,0)
 S RC=$$PAGE(7)  Q:RC<0  W:'RC !!
"RTN","ACKQNQ",90,0)
 W IOUON,"Patient Diagnostic History",IOUOFF
"RTN","ACKQNQ",91,0)
 W !,$S($P(VADM(5),U)="F":"Ms. ",1:"Mr. "),$P(VADM(1),",")," has been seen for the following:",!
"RTN","ACKQNQ",92,0)
 D DIHEAD
"RTN","ACKQNQ",93,0)
 ;---
"RTN","ACKQNQ",94,0)
 S ACKI=""
"RTN","ACKQNQ",95,0)
 F  S ACKI=$O(ACKICD(ACKI))  Q:ACKI=""  D  Q:RC<0
"RTN","ACKQNQ",96,0)
 . S RC=$$PAGE(2)  Q:RC<0
"RTN","ACKQNQ",97,0)
 . I RC  D  D DIHEAD
"RTN","ACKQNQ",98,0)
 . . W IOUON,"Patient Diagnostic History (cont'd)","  (",ACK(1),")",IOUOFF,!
"RTN","ACKQNQ",99,0)
 . W !,$P(ACKICD(ACKI),U),?15,$P(ACKICD(ACKI),U,3)
"RTN","ACKQNQ",100,0)
 . W ?60,$$NUMDT^ACKQUTL($P(ACKICD(ACKI),U,4))
"RTN","ACKQNQ",101,0)
 Q
"RTN","ACKQNQ",102,0)
 ;
"RTN","ACKQNQ",103,0)
 ;
"RTN","ACKQNQ",104,0)
CLASDIS ;  Display Patient Servive Classifications
"RTN","ACKQNQ",105,0)
 N RC
"RTN","ACKQNQ",106,0)
 I '$D(ACKQSER),'$D(ACKQORG),'$D(ACKQIR),'$D(ACKQECON) Q
"RTN","ACKQNQ",107,0)
 S RC=$$PAGE(5)  Q:RC<0  W:'RC !!
"RTN","ACKQNQ",108,0)
 D ENS^%ZISS
"RTN","ACKQNQ",109,0)
 W IOUON,"Service Classifications",IOUOFF,!
"RTN","ACKQNQ",110,0)
 W:$D(ACKQSER) " SERVICE-CONNECTED " W:$D(ACKQORG) " AGENT-ORANGE " W:$D(ACKQIR) " RADIATION " W:$D(ACKQECON) " ENVIRONMENTAL-CONTAMINANTS"
"RTN","ACKQNQ",111,0)
 W !
"RTN","ACKQNQ",112,0)
 Q
"RTN","ACKQNQ",113,0)
 ;
"RTN","ACKQNQ",114,0)
 ;
"RTN","ACKQNQ",115,0)
DIHEAD W !,"DIAGNOSIS",?60,"DATE ENTERED",!,$$REPEAT^XLFSTR("-",IOM-1)
"RTN","ACKQNQ",116,0)
 Q
"RTN","ACKQNQ",117,0)
 ;
"RTN","ACKQNQ",118,0)
 ;
"RTN","ACKQNQ",119,0)
ICDSORT S ACKI=0 F  S ACKI=$O(^ACK(509850.2,DFN,1,ACKI)) Q:'ACKI  D
"RTN","ACKQNQ",120,0)
 . S ACKDC=^ACK(509850.2,DFN,1,ACKI,0),ACKDD=$P(ACKDC,U,2)
"RTN","ACKQNQ",121,0)
 . D GETS^DIQ(80,+ACKDC_",",".01;2;3","E","ACKTGT","ACKMSG")
"RTN","ACKQNQ",122,0)
 . S ACKDN=ACKTGT(80,+ACKDC_",",.01,"E")
"RTN","ACKQNQ",123,0)
 . S ACKICD(ACKDN)=ACKDN_U_ACKTGT(80,+ACKDC_",",2,"E")_U_ACKTGT(80,+ACKDC_",",3,"E")_U_ACKDD
"RTN","ACKQNQ",124,0)
 K ACKTGT,ACKMSG
"RTN","ACKQNQ",125,0)
 Q
"RTN","ACKQNQ",126,0)
 ;
"RTN","ACKQNQ",127,0)
UPDATE ;  Update patient's diagnostic history in 509850.2.
"RTN","ACKQNQ",128,0)
 ;  ACKDFN is defined upon entry to this module.
"RTN","ACKQNQ",129,0)
 D WAIT^DICD W !
"RTN","ACKQNQ",130,0)
 D PROBLIST^ACKQUTL3(ACKDFN,1)
"RTN","ACKQNQ",131,0)
 Q
"RTN","ACKQNQ",132,0)
 ;
"RTN","ACKQNQ",133,0)
 ;***** CHECKS IS NEW PAGE SHOULD BE STARTED
"RTN","ACKQNQ",134,0)
 ;
"RTN","ACKQNQ",135,0)
 ; [RESERVE]     Number of additional reserved lines (0, by default).
"RTN","ACKQNQ",136,0)
 ;               If the current page does not have so many lines
"RTN","ACKQNQ",137,0)
 ;               available, a new page will be started.
"RTN","ACKQNQ",138,0)
 ;
"RTN","ACKQNQ",139,0)
 ; [FORCE]       Force the prompt
"RTN","ACKQNQ",140,0)
 ;
"RTN","ACKQNQ",141,0)
 ; Return values:
"RTN","ACKQNQ",142,0)
 ;
"RTN","ACKQNQ",143,0)
 ;       -2  Timeout
"RTN","ACKQNQ",144,0)
 ;       -1  User canceled the output ('^' was entered)
"RTN","ACKQNQ",145,0)
 ;        0  Ok
"RTN","ACKQNQ",146,0)
 ;        1  New page
"RTN","ACKQNQ",147,0)
 ;
"RTN","ACKQNQ",148,0)
PAGE(RESERVE,FORCE) ;
"RTN","ACKQNQ",149,0)
 N RC
"RTN","ACKQNQ",150,0)
 I ($Y'<($G(IOSL,24)-$G(RESERVE,1)))!$G(FORCE)  D  S $Y=0
"RTN","ACKQNQ",151,0)
 . I $E(IOST,1,2)'="C-"  W @IOF  Q
"RTN","ACKQNQ",152,0)
 . N DA,DIR,DIROUT,DTOUT,DUOUT,I,X,Y
"RTN","ACKQNQ",153,0)
 . S DIR(0)="E"
"RTN","ACKQNQ",154,0)
 . D ^DIR
"RTN","ACKQNQ",155,0)
 . S RC=$S($D(DUOUT):-1,$D(DTOUT):-2,1:1)
"RTN","ACKQNQ",156,0)
 . W:RC>0 @IOF
"RTN","ACKQNQ",157,0)
 Q +$G(RC)
"RTN","ACKQUTL4")
0^2^B85095923^B76816435
"RTN","ACKQUTL4",1,0)
ACKQUTL4 ;HCIOFO/BH-NEW/EDIT Visit Template Utilities for QUASAR ; 04/01/99
"RTN","ACKQUTL4",2,0)
 ;;3.0;QUASAR;**1,8,14**;Feb 11, 2000;Build 14
"RTN","ACKQUTL4",3,0)
 ;Per VHA Directive 10-93-142, this routine SHOULD NOT be modified.
"RTN","ACKQUTL4",4,0)
 ;
"RTN","ACKQUTL4",5,0)
CHK(Y,ACKVD) ;
"RTN","ACKQUTL4",6,0)
 N ACKQQD
"RTN","ACKQUTL4",7,0)
 S ACKQQD=$P(^EC(725,Y,0),"^",3) I ACKQQD="" Q 1
"RTN","ACKQUTL4",8,0)
 I ACKVD<ACKQQD Q 1
"RTN","ACKQUTL4",9,0)
 Q 0
"RTN","ACKQUTL4",10,0)
 ;  Clears passed in field # of visit rec.
"RTN","ACKQUTL4",11,0)
CLEAR(ACKVIEN,ACKZNUM) ;
"RTN","ACKQUTL4",12,0)
 N ACKARR
"RTN","ACKQUTL4",13,0)
 S ACKARR(509850.6,ACKVIEN_",",ACKZNUM)=""
"RTN","ACKQUTL4",14,0)
 D FILE^DIE("","ACKARR","")
"RTN","ACKQUTL4",15,0)
 Q
"RTN","ACKQUTL4",16,0)
 ;  Decides if patient is/was suffering from MST at the time of the visit
"RTN","ACKQUTL4",17,0)
MST(ACKPCE,ACKVD,ACKPAT) ;
"RTN","ACKQUTL4",18,0)
 I '$$PATCH^XPDUTL("DG*5.3*308") Q 0
"RTN","ACKQUTL4",19,0)
 I ACKPCE'=1 Q 0
"RTN","ACKQUTL4",20,0)
 N ACKRET,ACKXKEEP
"RTN","ACKQUTL4",21,0)
 S ACKXKEEP=X
"RTN","ACKQUTL4",22,0)
 S ACKRET=$$GETSTAT^DGMSTAPI(ACKPAT,ACKVD)
"RTN","ACKQUTL4",23,0)
 S X=ACKXKEEP
"RTN","ACKQUTL4",24,0)
 I $P(ACKRET,"^",2)="Y" Q 1
"RTN","ACKQUTL4",25,0)
 Q 0
"RTN","ACKQUTL4",26,0)
 ;
"RTN","ACKQUTL4",27,0)
PROB(ACKPCE,ACKDIV) ;  Decides if Update PCE Problem List prompt appaers
"RTN","ACKQUTL4",28,0)
 I 'ACKPCE Q 0
"RTN","ACKQUTL4",29,0)
 I '$$GET1^DIQ(509850.83,ACKDIV_",1",".09","I") Q 0
"RTN","ACKQUTL4",30,0)
 Q 1
"RTN","ACKQUTL4",31,0)
 ;
"RTN","ACKQUTL4",32,0)
SETUP ;  Called from within the New/Edit visit template to set up parameters
"RTN","ACKQUTL4",33,0)
 ;
"RTN","ACKQUTL4",34,0)
 D ENS^%ZISS
"RTN","ACKQUTL4",35,0)
 ;
"RTN","ACKQUTL4",36,0)
 I ACKVISIT="EDIT" D
"RTN","ACKQUTL4",37,0)
 . K ACKAR
"RTN","ACKQUTL4",38,0)
 . S ACKAR(509850.6,ACKVIEN_",",.27)=""
"RTN","ACKQUTL4",39,0)
 . D FILE^DIE("K","ACKAR") K ACKAR
"RTN","ACKQUTL4",40,0)
 ;
"RTN","ACKQUTL4",41,0)
 N ACKX,ACKD0
"RTN","ACKQUTL4",42,0)
 ;
"RTN","ACKQUTL4",43,0)
 S (ICPTVDT,ICDVDT)=ACKVD
"RTN","ACKQUTL4",44,0)
 ;
"RTN","ACKQUTL4",45,0)
 S ACKPCE=$$PCE(ACKDIV,ACKVD)  ;  Sets PCE indicator
"RTN","ACKQUTL4",46,0)
 ;
"RTN","ACKQUTL4",47,0)
 S ACKEVENT=1
"RTN","ACKQUTL4",48,0)
 S ACKEVENT=$$EVENT^ACKQUTL5(ACKDIV,ACKVD)   ; Use EC Codes or CPT
"RTN","ACKQUTL4",49,0)
 ;  Indicates whether local clinic #'s are in use
"RTN","ACKQUTL4",50,0)
 S ACKCLNO=$$GET1^DIQ(509850.83,ACKDIV_",1",".04","I")
"RTN","ACKQUTL4",51,0)
 ;
"RTN","ACKQUTL4",52,0)
 ;  Indicates whether the bypass flag for Audiometrics is set
"RTN","ACKQUTL4",53,0)
 S ACKBA=$$GET1^DIQ(509850.83,ACKDIV_",1",".07","I")
"RTN","ACKQUTL4",54,0)
 ;
"RTN","ACKQUTL4",55,0)
 ;  Indicates whether the visit is service connected
"RTN","ACKQUTL4",56,0)
 S DFN=ACKPAT D ELIG^VADPT S ACKSC=$P(VAEL(3),U,1)
"RTN","ACKQUTL4",57,0)
 ;
"RTN","ACKQUTL4",58,0)
 ;  Indicates whether the patient has any previous visits
"RTN","ACKQUTL4",59,0)
 ;  with audiometric test scores
"RTN","ACKQUTL4",60,0)
 ;
"RTN","ACKQUTL4",61,0)
 S ACKATS=1
"RTN","ACKQUTL4",62,0)
 S ACKX=$O(^ACK(509850.6,"AMD",ACKPAT,0)),ACKD0=$O(^ACK(509850.6,"AMD",ACKPAT,+ACKX,0))
"RTN","ACKQUTL4",63,0)
 I 'ACKX!('$D(^ACK(509850.6,+ACKD0,0))) S ACKATS=0
"RTN","ACKQUTL4",64,0)
 ;
"RTN","ACKQUTL4",65,0)
 ;   
"RTN","ACKQUTL4",66,0)
 S ACKAO=0,ACKRAD=0,ACKENV=0,ACKLOSS="",ACKLAMD=""
"RTN","ACKQUTL4",67,0)
 I ACKPCE D STATUS
"RTN","ACKQUTL4",68,0)
 S:ACKSC ACKQSER=1 S:ACKAO ACKQORG=1
"RTN","ACKQUTL4",69,0)
 S:ACKRAD ACKQIR=1 S:ACKENV ACKQECON=1
"RTN","ACKQUTL4",70,0)
 ;
"RTN","ACKQUTL4",71,0)
 D ELIG
"RTN","ACKQUTL4",72,0)
 ;
"RTN","ACKQUTL4",73,0)
 K VASV,VAEL
"RTN","ACKQUTL4",74,0)
 ;  
"RTN","ACKQUTL4",75,0)
 Q
"RTN","ACKQUTL4",76,0)
 ;
"RTN","ACKQUTL4",77,0)
PCE(ACKDIV,ACKVD) ;  Sets ACKPCE to 1 if - The send to PCE flag is set 
"RTN","ACKQUTL4",78,0)
 ; (for the division) and the PCE INTERFACE START DATE is before or on
"RTN","ACKQUTL4",79,0)
 ; the same day as the Visit Date and the INTERFACE WITH PCE flag for
"RTN","ACKQUTL4",80,0)
 ; the site is set to true.
"RTN","ACKQUTL4",81,0)
 N ACKOUT S ACKOUT=0
"RTN","ACKQUTL4",82,0)
 I $$GET1^DIQ(509850.8,"1,","2","I") D
"RTN","ACKQUTL4",83,0)
 . I $$GET1^DIQ(509850.83,ACKDIV_",1",".03","I"),ACKVD'<$$GET1^DIQ(509850.83,ACKDIV_",1",".08","I") S ACKOUT=1
"RTN","ACKQUTL4",84,0)
 Q ACKOUT
"RTN","ACKQUTL4",85,0)
 ;
"RTN","ACKQUTL4",86,0)
 ;-----
"RTN","ACKQUTL4",87,0)
STATUS ;  Sets Agent orange, Radiation and Environmental Contaiment indicators
"RTN","ACKQUTL4",88,0)
 ;  if present.
"RTN","ACKQUTL4",89,0)
 ;
"RTN","ACKQUTL4",90,0)
 ;  Agent Orange and Radiation
"RTN","ACKQUTL4",91,0)
 D SVC^VADPT S ACKAO=VASV(2),ACKRAD=VASV(3)
"RTN","ACKQUTL4",92,0)
 ;
"RTN","ACKQUTL4",93,0)
 ;  Environmental Contaminents
"RTN","ACKQUTL4",94,0)
 S ACKENV=$$GET1^DIQ(2,ACKPAT,.322013,"I")
"RTN","ACKQUTL4",95,0)
 I ACKENV="Y" S ACKENV=1
"RTN","ACKQUTL4",96,0)
 S:ACKENV'="1" ACKENV=0
"RTN","ACKQUTL4",97,0)
 Q
"RTN","ACKQUTL4",98,0)
 ;-----
"RTN","ACKQUTL4",99,0)
 ;
"RTN","ACKQUTL4",100,0)
AUDIO() ;  Pass back 1 if user is valid to enter audimetric scores else 0
"RTN","ACKQUTL4",101,0)
 ;
"RTN","ACKQUTL4",102,0)
 I ACKCP=1 Q 1
"RTN","ACKQUTL4",103,0)
 I ACKLOSS,'ACKBA Q 1
"RTN","ACKQUTL4",104,0)
 Q 0
"RTN","ACKQUTL4",105,0)
 ;
"RTN","ACKQUTL4",106,0)
 ;-----
"RTN","ACKQUTL4",107,0)
 ;
"RTN","ACKQUTL4",108,0)
ELIG ;  Set up eligibiliy variables and if more than one eligibility create
"RTN","ACKQUTL4",109,0)
 ;  display array used in block ELIGDISP
"RTN","ACKQUTL4",110,0)
 ;
"RTN","ACKQUTL4",111,0)
 ;  If not service connected set default to primary & file in visit rec.
"RTN","ACKQUTL4",112,0)
 I $P(VAEL(3),U,1)=0 D  Q
"RTN","ACKQUTL4",113,0)
 . S ACKELGCT=1,ACKELIG=$P(VAEL(1),U,2),ACKELIG1=$P(VAEL(1),U,1)
"RTN","ACKQUTL4",114,0)
 . K ACKAR  S ACKAR(509850.6,ACKVIEN_",",80)=ACKELIG1
"RTN","ACKQUTL4",115,0)
 . D FILE^DIE("K","ACKAR") K ACKAR Q
"RTN","ACKQUTL4",116,0)
 ;
"RTN","ACKQUTL4",117,0)
 S ACKVELG=$$GET1^DIQ(509850.6,ACKVIEN,80,"I") I $G(ACKVELG)'="" D
"RTN","ACKQUTL4",118,0)
 . S ACKVELG=ACKVELG_"^"_$$GET1^DIQ(8,ACKVELG,.01,"I")
"RTN","ACKQUTL4",119,0)
 ;
"RTN","ACKQUTL4",120,0)
 ;  Set default eligibility
"RTN","ACKQUTL4",121,0)
 S ACKELIG=$S($G(ACKVELG)'="":$P(ACKVELG,U,2),1:$P(VAEL(1),U,2))
"RTN","ACKQUTL4",122,0)
 ;
"RTN","ACKQUTL4",123,0)
 ;  Set up display array
"RTN","ACKQUTL4",124,0)
 ;
"RTN","ACKQUTL4",125,0)
 K ACKELDIS S ACKELGCT=0
"RTN","ACKQUTL4",126,0)
 ;
"RTN","ACKQUTL4",127,0)
 I $G(ACKVELG)'="" S ACKELDIS($P(ACKVELG,U,1))=ACKVELG,ACKELGCT=ACKELGCT+1
"RTN","ACKQUTL4",128,0)
 S ACKELDIS($P(VAEL(1),U,1))=VAEL(1),ACKELGCT=ACKELGCT+1
"RTN","ACKQUTL4",129,0)
 ;
"RTN","ACKQUTL4",130,0)
 S ACKK2=""
"RTN","ACKQUTL4",131,0)
 F  S ACKK2=$O(VAEL(1,ACKK2)) Q:ACKK2=""  D
"RTN","ACKQUTL4",132,0)
 .S ACKELGCT=ACKELGCT+1
"RTN","ACKQUTL4",133,0)
 .S ACKELDIS($P(VAEL(1,ACKK2),U,1))=VAEL(1,ACKK2)
"RTN","ACKQUTL4",134,0)
 ;
"RTN","ACKQUTL4",135,0)
 ;  If not already set up add NSC internal number 5
"RTN","ACKQUTL4",136,0)
 I '$D(ACKELDIS(5)) S ACKELGCT=ACKELGCT+1,ACKELDIS(5)="5^NSC"
"RTN","ACKQUTL4",137,0)
 ;
"RTN","ACKQUTL4",138,0)
 Q
"RTN","ACKQUTL4",139,0)
 ;
"RTN","ACKQUTL4",140,0)
ELIGDIS  ;  Display patients eligibilities
"RTN","ACKQUTL4",141,0)
 ;
"RTN","ACKQUTL4",142,0)
 N ACKK2,RC
"RTN","ACKQUTL4",143,0)
 D ENS^%ZISS
"RTN","ACKQUTL4",144,0)
 S RC=$$PAGE^ACKQNQ(6)  Q:RC<0  W:'RC !!
"RTN","ACKQUTL4",145,0)
 W IOUON,"This Patient has other Entitled Eligibilities",IOUOFF,!!
"RTN","ACKQUTL4",146,0)
 S ACKK2=""
"RTN","ACKQUTL4",147,0)
 F  S ACKK2=$O(ACKELDIS(ACKK2)) Q:ACKK2=""  D  Q:RC<0
"RTN","ACKQUTL4",148,0)
 .Q:$P(ACKELDIS(ACKK2),U,2)=ACKELIG
"RTN","ACKQUTL4",149,0)
 .S RC=$$PAGE^ACKQNQ(2) Q:RC<0
"RTN","ACKQUTL4",150,0)
 .W:RC IOUON,"Other Entitled Eligibilities (cont'd)",IOUOFF,!!
"RTN","ACKQUTL4",151,0)
 .W ?1,$P(ACKELDIS(ACKK2),U,2)_" "
"RTN","ACKQUTL4",152,0)
 .W $$GET1^DIQ(8,ACKK2,5),!
"RTN","ACKQUTL4",153,0)
 Q
"RTN","ACKQUTL4",154,0)
 ;-----
"RTN","ACKQUTL4",155,0)
 ;  Display Patient data concerning Rated Disabilities and service clas.
"RTN","ACKQUTL4",156,0)
PATDIS ;
"RTN","ACKQUTL4",157,0)
 S DFN=ACKPAT  D RATDIS^ACKQNQ
"RTN","ACKQUTL4",158,0)
 D CLASDIS^ACKQNQ
"RTN","ACKQUTL4",159,0)
 Q
"RTN","ACKQUTL4",160,0)
 ;
"RTN","ACKQUTL4",161,0)
ACKCP() ;  This initialises the C&P Paramter.
"RTN","ACKQUTL4",162,0)
 ;  First check site parameteres file for C&P flag
"RTN","ACKQUTL4",163,0)
 ;
"RTN","ACKQUTL4",164,0)
 I '$$GET1^DIQ(509850.83,ACKDIV_",1",".06","I") Q 0
"RTN","ACKQUTL4",165,0)
 ;
"RTN","ACKQUTL4",166,0)
 ;  Check if C&P has an open request pass back 1 or 0
"RTN","ACKQUTL4",167,0)
 S ACKQCPS=$$EN1^DVBCTRN(ACKPAT,"AUDIO")
"RTN","ACKQUTL4",168,0)
 S:ACKQCPS>0 ACKQCPS=$P(ACKQCPS,U)
"RTN","ACKQUTL4",169,0)
 I $S(ACKCSC'="A":1,$$EN1^DVBCTRN(ACKPAT,"AUDIO",ACKQCPS)<1:1,$O(^ACK(509850.6,"ALCP",ACKQCPS,0))=ACKVIEN:0,$D(^ACK(509850.6,"ALCP",ACKQCPS)):1,1:0) Q 0
"RTN","ACKQUTL4",170,0)
 Q "1^"_ACKQCPS
"RTN","ACKQUTL4",171,0)
 ;
"RTN","ACKQUTL4",172,0)
 ;-----
"RTN","ACKQUTL4",173,0)
PROVDIS ;  Get providers already filed and display
"RTN","ACKQUTL4",174,0)
 ;
"RTN","ACKQUTL4",175,0)
 N RC
"RTN","ACKQUTL4",176,0)
 D ENS^%ZISS
"RTN","ACKQUTL4",177,0)
 N ACKK1,ACKPROV,ACKK2,D0,ACKARR,ACKTGT,ACKMSG
"RTN","ACKQUTL4",178,0)
 D LIST^DIC(509850.66,","_ACKVIEN_",",".01","","*","","","","","","ACKTGT","ACKMSG")
"RTN","ACKQUTL4",179,0)
 S ACKK1=""
"RTN","ACKQUTL4",180,0)
 F  S ACKK1=$O(ACKTGT("DILIST",1,ACKK1)) Q:ACKK1=""  D
"RTN","ACKQUTL4",181,0)
 . S ACKARR(ACKK1)=ACKTGT("DILIST",1,ACKK1)
"RTN","ACKQUTL4",182,0)
 K ACKPROV S ACKK2=ACKVIEN_","
"RTN","ACKQUTL4",183,0)
 D GETS^DIQ(509850.6,ACKK2,"6;7","E","ACKPROV")
"RTN","ACKQUTL4",184,0)
 I '$D(ACKARR),$G(ACKPROV(509850.6,ACKK2,"6","E"))="",$G(ACKPROV(509850.6,ACKK2,"7","E"))="" Q
"RTN","ACKQUTL4",185,0)
 S RC=$$PAGE^ACKQNQ(5) Q:RC<0  W:'RC !!
"RTN","ACKQUTL4",186,0)
 W " ",IOUON,"Providers currently recorded for this visit",IOUOFF,!
"RTN","ACKQUTL4",187,0)
 I $G(ACKPROV(509850.6,ACKK2,"6","E"))'="" W !," Primary Provider   - "_ACKPROV(509850.6,ACKK2,"6","E")
"RTN","ACKQUTL4",188,0)
 I $D(ACKARR)>1  S RC=0  D  Q:RC<0
"RTN","ACKQUTL4",189,0)
 . S ACKK1=""
"RTN","ACKQUTL4",190,0)
 . F  S ACKK1=$O(ACKARR(ACKK1))  Q:ACKK1=""  D  Q:RC<0
"RTN","ACKQUTL4",191,0)
 . . S RC=$$PAGE^ACKQNQ(2)  Q:RC<0
"RTN","ACKQUTL4",192,0)
 . . W !," Secondary Provider - "_ACKARR(ACKK1)
"RTN","ACKQUTL4",193,0)
 D:$G(ACKPROV(509850.6,ACKK2,"7","E"))'=""
"RTN","ACKQUTL4",194,0)
 . S RC=$$PAGE^ACKQNQ(2)  Q:RC<0
"RTN","ACKQUTL4",195,0)
 . W !," Student            - "_ACKPROV(509850.6,ACKK2,"7","E")
"RTN","ACKQUTL4",196,0)
 W !
"RTN","ACKQUTL4",197,0)
 Q
"RTN","ACKQUTL4",198,0)
 ;
"RTN","ACKQUTL4",199,0)
CPTDIS ;  Get procedures already filed and display
"RTN","ACKQUTL4",200,0)
 ;
"RTN","ACKQUTL4",201,0)
 D ENS^%ZISS
"RTN","ACKQUTL4",202,0)
 N D0,ACKKEY,ACKCPTDS,ACKK3,ACKPIEN,ACKTMOD,ACKCODE,ACKPROC,ACKPRV
"RTN","ACKQUTL4",203,0)
 D LIST^DIC(509850.61,","_ACKVIEN_",",".01;.03;.05","I","*","","","","","","ACKCPTDS")
"RTN","ACKQUTL4",204,0)
 I '$D(ACKCPTDS("DILIST",1)) Q
"RTN","ACKQUTL4",205,0)
 W !!," ",IOUON,"Procedures currently entered for this visit",IOUOFF,!
"RTN","ACKQUTL4",206,0)
 S ACKK3=""
"RTN","ACKQUTL4",207,0)
 F  S ACKK3=$O(ACKCPTDS("DILIST",1,ACKK3)) Q:ACKK3=""  D
"RTN","ACKQUTL4",208,0)
 . S ACKPROC=ACKCPTDS("DILIST",1,ACKK3)
"RTN","ACKQUTL4",209,0)
 . S ACKPRV=ACKCPTDS("DILIST","ID",ACKK3,.05)
"RTN","ACKQUTL4",210,0)
 . I ACKPRV'="" S ACKPRV=$$CONVERT(ACKPRV)
"RTN","ACKQUTL4",211,0)
 . W !," Code: ",$$GET1^DIQ(509850.4,ACKPROC_",",.01),?19,"Volume: ",ACKCPTDS("DILIST","ID",ACKK3,.03) I ACKPRV'="" W "   Provider : ",ACKPRV
"RTN","ACKQUTL4",212,0)
 . D LONG^ACKQUTL6(ACKPROC,"1")
"RTN","ACKQUTL4",213,0)
 . W !
"RTN","ACKQUTL4",214,0)
 . ;  Check if any Modifiers present for this Procedure
"RTN","ACKQUTL4",215,0)
 . S ACKPIEN="" I $D(ACKCODE(ACKPROC)) S ACKPIEN=$O(ACKCODE(ACKPROC,""),-1)
"RTN","ACKQUTL4",216,0)
 . S ACKPIEN=$O(^ACK(509850.6,ACKVIEN,3,"B",ACKPROC,ACKPIEN))
"RTN","ACKQUTL4",217,0)
 . I ACKPIEN="" W ! Q
"RTN","ACKQUTL4",218,0)
 . S ACKCODE(ACKPROC,ACKPIEN)=""
"RTN","ACKQUTL4",219,0)
 . ;  Modifier level present do a LIST to get them
"RTN","ACKQUTL4",220,0)
 . S ACKPIEN=ACKPIEN_","_ACKVIEN
"RTN","ACKQUTL4",221,0)
 . D LIST^DIC(509850.64,","_ACKPIEN_",",".01","I","*","","","","","","ACKTMOD")
"RTN","ACKQUTL4",222,0)
 . I $D(ACKTMOD("DILIST",1)) D
"RTN","ACKQUTL4",223,0)
 . . W "        Modifiers:"
"RTN","ACKQUTL4",224,0)
 . . ;  Loop through Modifier Array
"RTN","ACKQUTL4",225,0)
 . . S ACKKEY=""
"RTN","ACKQUTL4",226,0)
 . . F  S ACKKEY=$O(ACKTMOD("DILIST",1,ACKKEY)) Q:ACKKEY=""  D
"RTN","ACKQUTL4",227,0)
 . . . W ?19,$$MODTXT^ACKQUTL8(ACKTMOD("DILIST",1,ACKKEY),ACKVD),!
"RTN","ACKQUTL4",228,0)
 . . K ACKTMOD
"RTN","ACKQUTL4",229,0)
 W !
"RTN","ACKQUTL4",230,0)
 Q
"RTN","ACKQUTL4",231,0)
 ;
"RTN","ACKQUTL4",232,0)
DIAGDIS ;  Get diagnoses already filed and display
"RTN","ACKQUTL4",233,0)
 D ENS^%ZISS
"RTN","ACKQUTL4",234,0)
 N ACK1,D0,ACKDIAGD,ACKK3,ACKK4,ACKI,ACKD,RC
"RTN","ACKQUTL4",235,0)
 D LIST^DIC(509850.63,","_ACKVIEN_",",".01;.12","I","*","","","","","","ACKDIAGD")
"RTN","ACKQUTL4",236,0)
 I '$D(ACKDIAGD("DILIST",1)) Q
"RTN","ACKQUTL4",237,0)
 S RC=$$PAGE^ACKQNQ(5)  Q:RC<0  W:'RC !!
"RTN","ACKQUTL4",238,0)
 W " ",IOUON,"Diagnoses currently entered for this visit:",IOUOFF,!
"RTN","ACKQUTL4",239,0)
 S ACKK3="",ACKSP="                                   "
"RTN","ACKQUTL4",240,0)
 F  S ACKK3=$O(ACKDIAGD("DILIST",1,ACKK3)) Q:ACKK3=""  D
"RTN","ACKQUTL4",241,0)
 . S ACKK4=ACKDIAGD("DILIST",1,ACKK3)
"RTN","ACKQUTL4",242,0)
 . S ACKI=$$GET1^DIQ(80,ACKK4,.01)
"RTN","ACKQUTL4",243,0)
 . S ACKD($S(ACKI?.NP:+ACKI,1:ACKI))=ACKI_$E("   ",1,7-$L(ACKI))_"- "_$E($$DIAGTXT^ACKQUTL8(ACKK4,ACKVD)_ACKSP,1,35)_$S($G(ACKDIAGD("DILIST","ID",ACKK3,".12"))=1:"  * Primary Diagnosis *",1:"  * Secondary Diagnosis *")
"RTN","ACKQUTL4",244,0)
 ;
"RTN","ACKQUTL4",245,0)
 S ACK1=""
"RTN","ACKQUTL4",246,0)
 F  S ACK1=$O(ACKD(ACK1)) Q:ACK1=""  D
"RTN","ACKQUTL4",247,0)
 . S RC=$$PAGE^ACKQNQ(3)  Q:RC<0
"RTN","ACKQUTL4",248,0)
 . W:RC IOUON,"Diagnoses currently entered for this visit (cont'd)",IOUOFF,!
"RTN","ACKQUTL4",249,0)
 . W !," ",ACKD(ACK1)
"RTN","ACKQUTL4",250,0)
 W !
"RTN","ACKQUTL4",251,0)
 Q
"RTN","ACKQUTL4",252,0)
 ;
"RTN","ACKQUTL4",253,0)
 ;
"RTN","ACKQUTL4",254,0)
HLOSS ; Sets hearing loss variable if one or more diagnosis are for hearing
"RTN","ACKQUTL4",255,0)
 ;  loss
"RTN","ACKQUTL4",256,0)
 ;
"RTN","ACKQUTL4",257,0)
 N ACKK4,ACKDIAG
"RTN","ACKQUTL4",258,0)
 S (ACKLOSS,ACKK4)=0
"RTN","ACKQUTL4",259,0)
 F  S ACKK4=$O(^ACK(509850.6,ACKVIEN,1,ACKK4)) Q:ACKK4'?1.N!(ACKLOSS)  D
"RTN","ACKQUTL4",260,0)
 .S ACKDIAG=$P(^ACK(509850.6,ACKVIEN,1,ACKK4,0),U,1)
"RTN","ACKQUTL4",261,0)
 .I $P(^ACK(509850.1,ACKDIAG,0),U,5)=1 S ACKLOSS=1 Q 
"RTN","ACKQUTL4",262,0)
 Q
"RTN","ACKQUTL4",263,0)
 ;
"RTN","ACKQUTL4",264,0)
MODDIS ;  Display Modifiers - Called within Executable Help of Modiifer
"RTN","ACKQUTL4",265,0)
 ;  Enter Edit.
"RTN","ACKQUTL4",266,0)
 S ACK1="0"
"RTN","ACKQUTL4",267,0)
 F  S ACK1=$O(^ACK(509850.5,ACK1)) Q:'+ACK1  D
"RTN","ACKQUTL4",268,0)
 . W !,"  "_$$GET1^DIQ(81.3,ACK1,.01),?5,$$MODTXT^ACKQUTL8(ACK1,""),?53,$$GET1^DIQ(81.3,ACK1,.04)
"RTN","ACKQUTL4",269,0)
 W ! Q
"RTN","ACKQUTL4",270,0)
 ;
"RTN","ACKQUTL4",271,0)
CONVERT(ACKPRV) ; Converts the QSR Prov Code into a name string from file 200.
"RTN","ACKQUTL4",272,0)
 ;
"RTN","ACKQUTL4",273,0)
 N ACKPRV1,ACKPRV2
"RTN","ACKQUTL4",274,0)
 S ACKPRV1=$P(^ACK(509850.3,ACKPRV,0),U,1)
"RTN","ACKQUTL4",275,0)
 S ACKPRV2=$P(^USR(8930.3,ACKPRV1,0),U,1)
"RTN","ACKQUTL4",276,0)
 Q $$GET1^DIQ(200,ACKPRV2_",",.01)
"RTN","ACKQUTL4",277,0)
 ;
"RTN","ACKQUTL4",278,0)
CONVERT1(ACKPRV) ;  Converts the Provider IEN number used within Quasar
"RTN","ACKQUTL4",279,0)
 ;                  to its equivalent code used on the 200 file.
"RTN","ACKQUTL4",280,0)
 N ACKPRV1
"RTN","ACKQUTL4",281,0)
 S ACKPRV1=$P(^ACK(509850.3,ACKPRV,0),U,1)
"RTN","ACKQUTL4",282,0)
 Q $P(^USR(8930.3,ACKPRV1,0),U,1)
"RTN","ACKQUTL4",283,0)
 ;
"RTN","ACKQUTL4",284,0)
CONVERT2(ACKPRV) ;  Converts the Provider IEN number used within Quasar
"RTN","ACKQUTL4",285,0)
 ;                  to its equivalent code used on the 200 file.
"RTN","ACKQUTL4",286,0)
 N ACKPRV1
"RTN","ACKQUTL4",287,0)
 S ACKPRV1=$P(^ACK(509850.3,ACKPRV,0),U,1)
"RTN","ACKQUTL4",288,0)
 Q $P($G(^USR(8930.3,ACKPRV1,0)),U,1)
"VER")
8.0^22.0
"BLD",6278,6)
^13
**END**
**END**

KIDS Distribution saved on Feb 02, 2005@15:17:25
NFS OUTPATIENT MEALS KIDS BUILD - 2/2/05
**KIDS**:DIETETICS 5.5^

**INSTALL NAME**
DIETETICS 5.5
"BLD",5078,0)
DIETETICS 5.5^DIETETICS^0^3050202^y
"BLD",5078,4,0)
^9.64PA^119.74^44
"BLD",5078,4,111,0)
111
"BLD",5078,4,111,222)
y^y^f^^^^n
"BLD",5078,4,111.1,0)
111.1
"BLD",5078,4,111.1,222)
y^y^f^^^^n
"BLD",5078,4,112,0)
112
"BLD",5078,4,112,222)
y^y^f^^^^n
"BLD",5078,4,112.2,0)
112.2
"BLD",5078,4,112.2,222)
y^y^f^^^^n
"BLD",5078,4,112.6,0)
112.6
"BLD",5078,4,112.6,222)
y^y^f^^^^n
"BLD",5078,4,113,0)
113
"BLD",5078,4,113,222)
y^y^f^^^^n
"BLD",5078,4,113.1,0)
113.1
"BLD",5078,4,113.1,222)
y^y^f^^^^n
"BLD",5078,4,113.2,0)
113.2
"BLD",5078,4,113.2,222)
y^y^f^^^^n
"BLD",5078,4,114,0)
114
"BLD",5078,4,114,222)
y^y^f^^^^n
"BLD",5078,4,114.1,0)
114.1
"BLD",5078,4,114.1,222)
y^y^f^^^^n
"BLD",5078,4,114.2,0)
114.2
"BLD",5078,4,114.2,222)
y^y^f^^^^n
"BLD",5078,4,114.3,0)
114.3
"BLD",5078,4,114.3,222)
y^y^f^^^^n
"BLD",5078,4,114.4,0)
114.4
"BLD",5078,4,114.4,222)
y^y^f^^^^n
"BLD",5078,4,115,0)
115
"BLD",5078,4,115,222)
y^y^f^^^^n
"BLD",5078,4,115.2,0)
115.2
"BLD",5078,4,115.2,222)
y^y^f^^^^n
"BLD",5078,4,115.3,0)
115.3
"BLD",5078,4,115.3,222)
y^y^f^^^^n
"BLD",5078,4,115.4,0)
115.4
"BLD",5078,4,115.4,222)
y^y^f^^^^n
"BLD",5078,4,115.5,0)
115.5
"BLD",5078,4,115.5,222)
y^y^f^^^^n
"BLD",5078,4,115.6,0)
115.6
"BLD",5078,4,115.6,222)
y^y^f^^^^n
"BLD",5078,4,115.7,0)
115.7
"BLD",5078,4,115.7,222)
y^y^f^^^^n
"BLD",5078,4,116,0)
116
"BLD",5078,4,116,222)
y^y^f^^^^n
"BLD",5078,4,116.1,0)
116.1
"BLD",5078,4,116.1,222)
y^y^f^^^^n
"BLD",5078,4,116.2,0)
116.2
"BLD",5078,4,116.2,222)
y^y^f^^^^n
"BLD",5078,4,116.3,0)
116.3
"BLD",5078,4,116.3,222)
y^y^f^^^^n
"BLD",5078,4,117,0)
117
"BLD",5078,4,117,222)
y^y^f^^^^n
"BLD",5078,4,117.1,0)
117.1
"BLD",5078,4,117.1,222)
y^y^f^^^^n
"BLD",5078,4,117.2,0)
117.2
"BLD",5078,4,117.2,222)
y^y^f^^^^n
"BLD",5078,4,117.3,0)
117.3
"BLD",5078,4,117.3,222)
y^y^f^^^^n
"BLD",5078,4,117.4,0)
117.4
"BLD",5078,4,117.4,222)
y^y^f^^^^n
"BLD",5078,4,118,0)
118
"BLD",5078,4,118,222)
y^y^f^^^^n
"BLD",5078,4,118.1,0)
118.1
"BLD",5078,4,118.1,222)
y^y^f^^^^n
"BLD",5078,4,118.2,0)
118.2
"BLD",5078,4,118.2,222)
y^y^f^^^^n
"BLD",5078,4,118.3,0)
118.3
"BLD",5078,4,118.3,222)
y^y^f^^^^n
"BLD",5078,4,119,0)
119
"BLD",5078,4,119,222)
y^y^f^^^^n
"BLD",5078,4,119.1,0)
119.1
"BLD",5078,4,119.1,222)
y^y^f^^^^n
"BLD",5078,4,119.4,0)
119.4
"BLD",5078,4,119.4,222)
y^y^f^^^^n
"BLD",5078,4,119.5,0)
119.5
"BLD",5078,4,119.5,222)
y^y^f^^^^n
"BLD",5078,4,119.6,0)
119.6
"BLD",5078,4,119.6,222)
y^y^f^^^^n
"BLD",5078,4,119.71,0)
119.71
"BLD",5078,4,119.71,222)
y^y^f^^^^n
"BLD",5078,4,119.72,0)
119.72
"BLD",5078,4,119.72,222)
y^y^f^^^^n
"BLD",5078,4,119.73,0)
119.73
"BLD",5078,4,119.73,222)
y^y^f^^^^n
"BLD",5078,4,119.74,0)
119.74
"BLD",5078,4,119.74,222)
y^y^f^^^^n
"BLD",5078,4,119.8,0)
119.8
"BLD",5078,4,119.8,222)
y^y^f^^^^n
"BLD",5078,4,119.9,0)
119.9
"BLD",5078,4,119.9,222)
y^y^f^^^^n
"BLD",5078,4,"B",111,111)

"BLD",5078,4,"B",111.1,111.1)

"BLD",5078,4,"B",112,112)

"BLD",5078,4,"B",112.2,112.2)

"BLD",5078,4,"B",112.6,112.6)

"BLD",5078,4,"B",113,113)

"BLD",5078,4,"B",113.1,113.1)

"BLD",5078,4,"B",113.2,113.2)

"BLD",5078,4,"B",114,114)

"BLD",5078,4,"B",114.1,114.1)

"BLD",5078,4,"B",114.2,114.2)

"BLD",5078,4,"B",114.3,114.3)

"BLD",5078,4,"B",114.4,114.4)

"BLD",5078,4,"B",115,115)

"BLD",5078,4,"B",115.2,115.2)

"BLD",5078,4,"B",115.3,115.3)

"BLD",5078,4,"B",115.4,115.4)

"BLD",5078,4,"B",115.5,115.5)

"BLD",5078,4,"B",115.6,115.6)

"BLD",5078,4,"B",115.7,115.7)

"BLD",5078,4,"B",116,116)

"BLD",5078,4,"B",116.1,116.1)

"BLD",5078,4,"B",116.2,116.2)

"BLD",5078,4,"B",116.3,116.3)

"BLD",5078,4,"B",117,117)

"BLD",5078,4,"B",117.1,117.1)

"BLD",5078,4,"B",117.2,117.2)

"BLD",5078,4,"B",117.3,117.3)

"BLD",5078,4,"B",117.4,117.4)

"BLD",5078,4,"B",118,118)

"BLD",5078,4,"B",118.1,118.1)

"BLD",5078,4,"B",118.2,118.2)

"BLD",5078,4,"B",118.3,118.3)

"BLD",5078,4,"B",119,119)

"BLD",5078,4,"B",119.1,119.1)

"BLD",5078,4,"B",119.4,119.4)

"BLD",5078,4,"B",119.5,119.5)

"BLD",5078,4,"B",119.6,119.6)

"BLD",5078,4,"B",119.71,119.71)

"BLD",5078,4,"B",119.72,119.72)

"BLD",5078,4,"B",119.73,119.73)

"BLD",5078,4,"B",119.74,119.74)

"BLD",5078,4,"B",119.8,119.8)

"BLD",5078,4,"B",119.9,119.9)

"BLD",5078,"ABNS",0)
^9.66A^1^1
"BLD",5078,"ABNS",1,0)
FH
"BLD",5078,"ABNS",1,1,0)
^9.661A^^
"BLD",5078,"ABNS","B","FH",1)

"BLD",5078,"ABPKG")
n^y
"BLD",5078,"INI")
FH55PRE
"BLD",5078,"INIT")
FH55PST
"BLD",5078,"KRN",0)
^9.67PA^8989.52^19
"BLD",5078,"KRN",.4,0)
.4
"BLD",5078,"KRN",.4,"NM",0)
^9.68A^16^16
"BLD",5078,"KRN",.4,"NM",1,0)
FHDIETL    FILE #111^111^0
"BLD",5078,"KRN",.4,"NM",2,0)
FHISLST    FILE #119.4^119.4^0
"BLD",5078,"KRN",.4,"NM",3,0)
FHNULST    FILE #112^112^0
"BLD",5078,"KRN",.4,"NM",4,0)
FHORCON    FILE #119.5^119.5^0
"BLD",5078,"KRN",.4,"NM",5,0)
FHORWRD    FILE #119.6^119.6^0
"BLD",5078,"KRN",.4,"NM",6,0)
FHPROD    FILE #116.2^116.2^0
"BLD",5078,"KRN",.4,"NM",7,0)
FHPROP    FILE #114.2^114.2^0
"BLD",5078,"KRN",.4,"NM",8,0)
FHPSTO    FILE #113.1^113.1^0
"BLD",5078,"KRN",.4,"NM",9,0)
FHRECC    FILE #114.1^114.1^0
"BLD",5078,"KRN",.4,"NM",10,0)
FHSELIST    FILE #115.2^115.2^0
"BLD",5078,"KRN",.4,"NM",11,0)
FHSFLST    FILE #118^118^0
"BLD",5078,"KRN",.4,"NM",12,0)
FHSFMENU    FILE #118.1^118.1^0
"BLD",5078,"KRN",.4,"NM",13,0)
FHSYP1    FILE #119.9^119.9^0
"BLD",5078,"KRN",.4,"NM",14,0)
FHSYP2    FILE #119.9^119.9^0
"BLD",5078,"KRN",.4,"NM",15,0)
FHTFLST    FILE #118.2^118.2^0
"BLD",5078,"KRN",.4,"NM",16,0)
FHUMENU    FILE #112.6^112.6^0
"BLD",5078,"KRN",.4,"NM","B","FHDIETL    FILE #111",1)

"BLD",5078,"KRN",.4,"NM","B","FHISLST    FILE #119.4",2)

"BLD",5078,"KRN",.4,"NM","B","FHNULST    FILE #112",3)

"BLD",5078,"KRN",.4,"NM","B","FHORCON    FILE #119.5",4)

"BLD",5078,"KRN",.4,"NM","B","FHORWRD    FILE #119.6",5)

"BLD",5078,"KRN",.4,"NM","B","FHPROD    FILE #116.2",6)

"BLD",5078,"KRN",.4,"NM","B","FHPROP    FILE #114.2",7)

"BLD",5078,"KRN",.4,"NM","B","FHPSTO    FILE #113.1",8)

"BLD",5078,"KRN",.4,"NM","B","FHRECC    FILE #114.1",9)

"BLD",5078,"KRN",.4,"NM","B","FHSELIST    FILE #115.2",10)

"BLD",5078,"KRN",.4,"NM","B","FHSFLST    FILE #118",11)

"BLD",5078,"KRN",.4,"NM","B","FHSFMENU    FILE #118.1",12)

"BLD",5078,"KRN",.4,"NM","B","FHSYP1    FILE #119.9",13)

"BLD",5078,"KRN",.4,"NM","B","FHSYP2    FILE #119.9",14)

"BLD",5078,"KRN",.4,"NM","B","FHTFLST    FILE #118.2",15)

"BLD",5078,"KRN",.4,"NM","B","FHUMENU    FILE #112.6",16)

"BLD",5078,"KRN",.401,0)
.401
"BLD",5078,"KRN",.402,0)
.402
"BLD",5078,"KRN",.402,"NM",0)
^9.68A^11^11
"BLD",5078,"KRN",.402,"NM",1,0)
FH AMS4 224    FILE #2100^2100^0
"BLD",5078,"KRN",.402,"NM",2,0)
FHADM2    FILE #117^117^0
"BLD",5078,"KRN",.402,"NM",3,0)
FHADM4    FILE #117.1^117.1^0
"BLD",5078,"KRN",.402,"NM",4,0)
FHASE    FILE #115.7^115.7^0
"BLD",5078,"KRN",.402,"NM",5,0)
FHCMSR    FILE #117.2^117.2^0
"BLD",5078,"KRN",.402,"NM",6,0)
FHINPR    FILE #114^114^0
"BLD",5078,"KRN",.402,"NM",7,0)
FHMADM2    FILE #117^117^0
"BLD",5078,"KRN",.402,"NM",8,0)
FHMADM4    FILE #117.1^117.1^0
"BLD",5078,"KRN",.402,"NM",9,0)
FHMASE    FILE #115.7^115.7^0
"BLD",5078,"KRN",.402,"NM",10,0)
FHSEL    FILE #115^115^0
"BLD",5078,"KRN",.402,"NM",11,0)
FHSITEC1    FILE #119.9^119.9^0
"BLD",5078,"KRN",.402,"NM","B","FH AMS4 224    FILE #2100",1)

"BLD",5078,"KRN",.402,"NM","B","FHADM2    FILE #117",2)

"BLD",5078,"KRN",.402,"NM","B","FHADM4    FILE #117.1",3)

"BLD",5078,"KRN",.402,"NM","B","FHASE    FILE #115.7",4)

"BLD",5078,"KRN",.402,"NM","B","FHCMSR    FILE #117.2",5)

"BLD",5078,"KRN",.402,"NM","B","FHINPR    FILE #114",6)

"BLD",5078,"KRN",.402,"NM","B","FHMADM2    FILE #117",7)

"BLD",5078,"KRN",.402,"NM","B","FHMADM4    FILE #117.1",8)

"BLD",5078,"KRN",.402,"NM","B","FHMASE    FILE #115.7",9)

"BLD",5078,"KRN",.402,"NM","B","FHSEL    FILE #115",10)

"BLD",5078,"KRN",.402,"NM","B","FHSITEC1    FILE #119.9",11)

"BLD",5078,"KRN",.403,0)
.403
"BLD",5078,"KRN",.5,0)
.5
"BLD",5078,"KRN",.84,0)
.84
"BLD",5078,"KRN",3.6,0)
3.6
"BLD",5078,"KRN",3.6,"NM",0)
^9.68A^5^5
"BLD",5078,"KRN",3.6,"NM",1,0)
FHDIDIP^^0
"BLD",5078,"KRN",3.6,"NM",2,0)
FHDIOO^^0
"BLD",5078,"KRN",3.6,"NM",3,0)
FHDIORD^^0
"BLD",5078,"KRN",3.6,"NM",4,0)
FHDIREQ^^0
"BLD",5078,"KRN",3.6,"NM",5,0)
FHDITF^^0
"BLD",5078,"KRN",3.6,"NM","B","FHDIDIP",1)

"BLD",5078,"KRN",3.6,"NM","B","FHDIOO",2)

"BLD",5078,"KRN",3.6,"NM","B","FHDIORD",3)

"BLD",5078,"KRN",3.6,"NM","B","FHDIREQ",4)

"BLD",5078,"KRN",3.6,"NM","B","FHDITF",5)

"BLD",5078,"KRN",3.8,0)
3.8
"BLD",5078,"KRN",9.2,0)
9.2
"BLD",5078,"KRN",9.8,0)
9.8
"BLD",5078,"KRN",9.8,"NM",0)
^9.68A^352^339
"BLD",5078,"KRN",9.8,"NM",1,0)
FH^^0^B3580285
"BLD",5078,"KRN",9.8,"NM",2,0)
FH55PRE^^0^B882791
"BLD",5078,"KRN",9.8,"NM",3,0)
FH55PST^^0^B4245680
"BLD",5078,"KRN",9.8,"NM",4,0)
FHADM2^^0^B8983689
"BLD",5078,"KRN",9.8,"NM",5,0)
FHADM21^^0^B11163428
"BLD",5078,"KRN",9.8,"NM",6,0)
FHADM2A^^0^B3488610
"BLD",5078,"KRN",9.8,"NM",7,0)
FHADM3^^0^B8659464
"BLD",5078,"KRN",9.8,"NM",8,0)
FHADM4^^0^B15416996
"BLD",5078,"KRN",9.8,"NM",9,0)
FHADM5^^0^B372437
"BLD",5078,"KRN",9.8,"NM",10,0)
FHADR1^^0^B12601285
"BLD",5078,"KRN",9.8,"NM",11,0)
FHADR10^^0^B3980921
"BLD",5078,"KRN",9.8,"NM",12,0)
FHADR1A^^0^B10224986
"BLD",5078,"KRN",9.8,"NM",13,0)
FHADR2^^0^B6444587
"BLD",5078,"KRN",9.8,"NM",14,0)
FHADR3^^0^B2364238
"BLD",5078,"KRN",9.8,"NM",15,0)
FHADR3A^^0^B16975546
"BLD",5078,"KRN",9.8,"NM",16,0)
FHADR4^^0^B6206595
"BLD",5078,"KRN",9.8,"NM",17,0)
FHADR5^^0^B7610044
"BLD",5078,"KRN",9.8,"NM",18,0)
FHADR6^^0^B19020278
"BLD",5078,"KRN",9.8,"NM",19,0)
FHADR61^^0^B3744047
"BLD",5078,"KRN",9.8,"NM",20,0)
FHADR7^^0^B12469313
"BLD",5078,"KRN",9.8,"NM",21,0)
FHADR8^^0^B3989191
"BLD",5078,"KRN",9.8,"NM",22,0)
FHADR81^^0^B15000317
"BLD",5078,"KRN",9.8,"NM",23,0)
FHADR9^^0^B12552308
"BLD",5078,"KRN",9.8,"NM",24,0)
FHADR9A^^0^B10747285
"BLD",5078,"KRN",9.8,"NM",25,0)
FHADRPT^^0^B5941727
"BLD",5078,"KRN",9.8,"NM",26,0)
FHADRSY^^0^B1641515
"BLD",5078,"KRN",9.8,"NM",27,0)
FHASC^^0^B2021650
"BLD",5078,"KRN",9.8,"NM",28,0)
FHASE^^0^B19984975
"BLD",5078,"KRN",9.8,"NM",29,0)
FHASE1^^0^B6349078
"BLD",5078,"KRN",9.8,"NM",30,0)
FHASE1A^^0^B19883224
"BLD",5078,"KRN",9.8,"NM",31,0)
FHASE2^^0^B7099237
"BLD",5078,"KRN",9.8,"NM",32,0)
FHASE3^^0^B2086750
"BLD",5078,"KRN",9.8,"NM",33,0)
FHASM1^^0^B18758963
"BLD",5078,"KRN",9.8,"NM",34,0)
FHASM2^^0^B12615736
"BLD",5078,"KRN",9.8,"NM",35,0)
FHASM2A^^0^B4690497
"BLD",5078,"KRN",9.8,"NM",36,0)
FHASM2B^^0^B5462722
"BLD",5078,"KRN",9.8,"NM",37,0)
FHASM2C^^0^B14309979
"BLD",5078,"KRN",9.8,"NM",38,0)
FHASM2D^^0^B3631718
"BLD",5078,"KRN",9.8,"NM",39,0)
FHASM3^^0^B6230541
"BLD",5078,"KRN",9.8,"NM",40,0)
FHASM3A^^0^B14219417
"BLD",5078,"KRN",9.8,"NM",41,0)
FHASM4^^0^B12052466
"BLD",5078,"KRN",9.8,"NM",42,0)
FHASM5^^0^B14455306
"BLD",5078,"KRN",9.8,"NM",43,0)
FHASM6^^0^B12720792
"BLD",5078,"KRN",9.8,"NM",44,0)
FHASM7^^0^B13420540
"BLD",5078,"KRN",9.8,"NM",45,0)
FHASMR^^0^B3641105
"BLD",5078,"KRN",9.8,"NM",46,0)
FHASMR1^^0^B16349992
"BLD",5078,"KRN",9.8,"NM",47,0)
FHASN^^0^B4842109
"BLD",5078,"KRN",9.8,"NM",48,0)
FHASN1^^0^B5304819
"BLD",5078,"KRN",9.8,"NM",49,0)
FHASN3^^0^B8443388
"BLD",5078,"KRN",9.8,"NM",50,0)
FHASN4^^0^B19267930
"BLD",5078,"KRN",9.8,"NM",51,0)
FHASN5^^0^B12778356
"BLD",5078,"KRN",9.8,"NM",52,0)
FHASN6^^0^B11586994
"BLD",5078,"KRN",9.8,"NM",53,0)
FHASN7^^0^B3501634
"BLD",5078,"KRN",9.8,"NM",54,0)
FHASN71^^0^B18147254
"BLD",5078,"KRN",9.8,"NM",55,0)
FHASP^^0^B16874575
"BLD",5078,"KRN",9.8,"NM",56,0)
FHASP1^^0^B16358458
"BLD",5078,"KRN",9.8,"NM",57,0)
FHASP2^^0^B4711640
"BLD",5078,"KRN",9.8,"NM",58,0)
FHASXR^^0^B10017874
"BLD",5078,"KRN",9.8,"NM",59,0)
FHASXR1^^0^B16666585
"BLD",5078,"KRN",9.8,"NM",60,0)
FHBIR^^0^B15349700
"BLD",5078,"KRN",9.8,"NM",62,0)
FHCLN^^0^B850863
"BLD",5078,"KRN",9.8,"NM",63,0)
FHCMS1^^0^B2440456
"BLD",5078,"KRN",9.8,"NM",64,0)
FHCMSR^^0^B7358130
"BLD",5078,"KRN",9.8,"NM",65,0)
FHCMSR1^^0^B13056514
"BLD",5078,"KRN",9.8,"NM",67,0)
FHCTF^^0^B840527
"BLD",5078,"KRN",9.8,"NM",68,0)
FHCTF1^^0^B9148269
"BLD",5078,"KRN",9.8,"NM",69,0)
FHCTF2^^0^B809965
"BLD",5078,"KRN",9.8,"NM",70,0)
FHCTF3^^0^B24411252
"BLD",5078,"KRN",9.8,"NM",71,0)
FHCTF4^^0^B13668134
"BLD",5078,"KRN",9.8,"NM",72,0)
FHCTF5^^0^B12923038
"BLD",5078,"KRN",9.8,"NM",73,0)
FHDCR1^^0^B10950315
"BLD",5078,"KRN",9.8,"NM",74,0)
FHDCR11^^0^B24899410
"BLD",5078,"KRN",9.8,"NM",75,0)
FHDCR1A^^0^B42167175
"BLD",5078,"KRN",9.8,"NM",76,0)
FHDCR1B^^0^B18417680
"BLD",5078,"KRN",9.8,"NM",77,0)
FHDCR1C^^0^B3312595
"BLD",5078,"KRN",9.8,"NM",78,0)
FHDCR1D^^0^B25088633
"BLD",5078,"KRN",9.8,"NM",79,0)
FHDCR2^^0^B1418501
"BLD",5078,"KRN",9.8,"NM",80,0)
FHDEV^^0^B1514744
"BLD",5078,"KRN",9.8,"NM",81,0)
FHDMP^^0^B21337811
"BLD",5078,"KRN",9.8,"NM",82,0)
FHDMP1^^0^B4600552
"BLD",5078,"KRN",9.8,"NM",83,0)
FHDMP2^^0^B7783846
"BLD",5078,"KRN",9.8,"NM",84,0)
FHDMP3^^0^B5833131
"BLD",5078,"KRN",9.8,"NM",85,0)
FHDMP4^^0^B11249036
"BLD",5078,"KRN",9.8,"NM",86,0)
FHDMP5^^0^B6806997
"BLD",5078,"KRN",9.8,"NM",87,0)
FHDPA^^0^B2632448
"BLD",5078,"KRN",9.8,"NM",88,0)
FHENV^^0^B98531
"BLD",5078,"KRN",9.8,"NM",91,0)
FHLABEL^^0^B9674043
"BLD",5078,"KRN",9.8,"NM",92,0)
FHMADM2^^0^B12575896
"BLD",5078,"KRN",9.8,"NM",93,0)
FHMADM21^^0^B34931110
"BLD",5078,"KRN",9.8,"NM",94,0)
FHMADM2A^^0^B5248967
"BLD",5078,"KRN",9.8,"NM",95,0)
FHMADM3^^0^B23111413
"BLD",5078,"KRN",9.8,"NM",96,0)
FHMADM4^^0^B36293844
"BLD",5078,"KRN",9.8,"NM",97,0)
FHMASE^^0^B21014606
"BLD",5078,"KRN",9.8,"NM",98,0)
FHMASE1^^0^B10848521
"BLD",5078,"KRN",9.8,"NM",99,0)
FHMASE1A^^0^B41020024
"BLD",5078,"KRN",9.8,"NM",100,0)
FHMMBRPT^^0^B17726500
"BLD",5078,"KRN",9.8,"NM",101,0)
FHMMNADM^^0^B29247238
"BLD",5078,"KRN",9.8,"NM",102,0)
FHMMNPRT^^0^B34894053
"BLD",5078,"KRN",9.8,"NM",103,0)
FHMMNREP^^0^B20084205
"BLD",5078,"KRN",9.8,"NM",104,0)
FHMNADM^^0^B9528536
"BLD",5078,"KRN",9.8,"NM",105,0)
FHMNBRPT^^0^B5470086
"BLD",5078,"KRN",9.8,"NM",106,0)
FHMNINQ^^0^B6290326
"BLD",5078,"KRN",9.8,"NM",107,0)
FHMNPRT^^0^B16366448
"BLD",5078,"KRN",9.8,"NM",108,0)
FHMNREP^^0^B12507010
"BLD",5078,"KRN",9.8,"NM",109,0)
FHMTK^^0^B14398258
"BLD",5078,"KRN",9.8,"NM",110,0)
FHMTK1^^0^B16276192
"BLD",5078,"KRN",9.8,"NM",111,0)
FHMTK11^^0^B20736345
"BLD",5078,"KRN",9.8,"NM",112,0)
FHMTK1A^^0^B8635876
"BLD",5078,"KRN",9.8,"NM",113,0)
FHMTK1B^^0^B20145458
"BLD",5078,"KRN",9.8,"NM",114,0)
FHMTK1C^^0^B21105135
"BLD",5078,"KRN",9.8,"NM",115,0)
FHMTK2^^0^B6404765
"BLD",5078,"KRN",9.8,"NM",116,0)
FHMTK21^^0^B11051896
"BLD",5078,"KRN",9.8,"NM",117,0)
FHMTK3^^0^B11788228
"BLD",5078,"KRN",9.8,"NM",118,0)
FHMTK4^^0^B10894266
"BLD",5078,"KRN",9.8,"NM",119,0)
FHMTK5^^0^B16246661
"BLD",5078,"KRN",9.8,"NM",120,0)
FHMTK6^^0^B10926277
"BLD",5078,"KRN",9.8,"NM",121,0)
FHMTK7^^0^B9607976
"BLD",5078,"KRN",9.8,"NM",122,0)
FHMTK8^^0^B34945617
"BLD",5078,"KRN",9.8,"NM",123,0)
FHMTKO^^0^B16079692
"BLD",5078,"KRN",9.8,"NM",124,0)
FHNO1^^0^B3318863
"BLD",5078,"KRN",9.8,"NM",125,0)
FHNO2^^0^B22999730
"BLD",5078,"KRN",9.8,"NM",126,0)
FHNO21^^0^B14924290
"BLD",5078,"KRN",9.8,"NM",127,0)
FHNO3^^0^B4355132
"BLD",5078,"KRN",9.8,"NM",128,0)
FHNO31^^0^B12996063
"BLD",5078,"KRN",9.8,"NM",129,0)
FHNO4^^0^B1337662
"BLD",5078,"KRN",9.8,"NM",130,0)
FHNO41^^0^B15794344
"BLD",5078,"KRN",9.8,"NM",131,0)
FHNO5^^0^B9563413
"BLD",5078,"KRN",9.8,"NM",132,0)
FHNO6^^0^B15764090
"BLD",5078,"KRN",9.8,"NM",133,0)
FHNO7^^0^B2949434
"BLD",5078,"KRN",9.8,"NM",134,0)
FHNO8^^0^B3646920
"BLD",5078,"KRN",9.8,"NM",137,0)
FHNU^^0^B1947288
"BLD",5078,"KRN",9.8,"NM",138,0)
FHNU1^^0^B6466411
"BLD",5078,"KRN",9.8,"NM",139,0)
FHNU10^^0^B8353081
"BLD",5078,"KRN",9.8,"NM",140,0)
FHNU11^^0^B12787092
"BLD",5078,"KRN",9.8,"NM",141,0)
FHNU12^^0^B7479780
"BLD",5078,"KRN",9.8,"NM",142,0)
FHNU2^^0^B17765623
"BLD",5078,"KRN",9.8,"NM",143,0)
FHNU3^^0^B9501882
"BLD",5078,"KRN",9.8,"NM",144,0)
FHNU4^^0^B16508748
"BLD",5078,"KRN",9.8,"NM",145,0)
FHNU5^^0^B13700099
"BLD",5078,"KRN",9.8,"NM",146,0)
FHNU6^^0^B13054055
"BLD",5078,"KRN",9.8,"NM",147,0)
FHNU7^^0^B8293944
"BLD",5078,"KRN",9.8,"NM",148,0)
FHNU8^^0^B11707333
"BLD",5078,"KRN",9.8,"NM",149,0)
FHNU9^^0^B5847790
"BLD",5078,"KRN",9.8,"NM",150,0)
FHNUT^^0^B6346803
"BLD",5078,"KRN",9.8,"NM",151,0)
FHOMAPI^^0^B1199374
"BLD",5078,"KRN",9.8,"NM",152,0)
FHOMDPA^^0^B5284156
"BLD",5078,"KRN",9.8,"NM",153,0)
FHOMELT^^0^B2893206
"BLD",5078,"KRN",9.8,"NM",154,0)
FHOMGP1^^0^B5582686
"BLD",5078,"KRN",9.8,"NM",155,0)
FHOMGR1^^0^B6486886
"BLD",5078,"KRN",9.8,"NM",156,0)
FHOMIP^^0^B2144039
"BLD",5078,"KRN",9.8,"NM",157,0)
FHOMPP^^0^B15901336
"BLD",5078,"KRN",9.8,"NM",158,0)
FHOMPP1^^0^B22257868
"BLD",5078,"KRN",9.8,"NM",159,0)
FHOMRA1^^0^B6231973
"BLD",5078,"KRN",9.8,"NM",160,0)
FHOMRBL1^^0^B26804148
"BLD",5078,"KRN",9.8,"NM",161,0)
FHOMRBLD^^0^B48623743
"BLD",5078,"KRN",9.8,"NM",162,0)
FHOMRC1^^0^B10151717
"BLD",5078,"KRN",9.8,"NM",163,0)
FHOMRE1^^0^B13383678
"BLD",5078,"KRN",9.8,"NM",164,0)
FHOMRO1^^0^B48862987
"BLD",5078,"KRN",9.8,"NM",165,0)
FHOMRO2^^0^B17528698
"BLD",5078,"KRN",9.8,"NM",166,0)
FHOMRP1^^0^B7865299
"BLD",5078,"KRN",9.8,"NM",167,0)
FHOMRR1^^0^B17681030
"BLD",5078,"KRN",9.8,"NM",168,0)
FHOMRT1^^0^B16103268
"BLD",5078,"KRN",9.8,"NM",169,0)
FHOMSA1^^0^B4674762
"BLD",5078,"KRN",9.8,"NM",170,0)
FHOMSC1^^0^B1487825
"BLD",5078,"KRN",9.8,"NM",171,0)
FHOMSP1^^0^B8274936
"BLD",5078,"KRN",9.8,"NM",172,0)
FHOMSR1^^0^B15017027
"BLD",5078,"KRN",9.8,"NM",173,0)
FHOMSS1^^0^B6804782
"BLD",5078,"KRN",9.8,"NM",175,0)
FHOMTK1^^0^B5990172
"BLD",5078,"KRN",9.8,"NM",176,0)
FHOMTK2^^0^B22837815
"BLD",5078,"KRN",9.8,"NM",177,0)
FHOMUPD^^0^B667616
"BLD",5078,"KRN",9.8,"NM",178,0)
FHOMUTL^^0^B19020381
"BLD",5078,"KRN",9.8,"NM",179,0)
FHOMWOR^^0^B17355019
"BLD",5078,"KRN",9.8,"NM",180,0)
FHORC^^0^B5770912
"BLD",5078,"KRN",9.8,"NM",181,0)
FHORC1^^0^B4903856
"BLD",5078,"KRN",9.8,"NM",182,0)
FHORC2^^0^B15250167
"BLD",5078,"KRN",9.8,"NM",183,0)
FHORC3^^0^B12069151
"BLD",5078,"KRN",9.8,"NM",184,0)
FHORC4^^0^B3689342
"BLD",5078,"KRN",9.8,"NM",185,0)
FHORC5^^0^B2667793
"BLD",5078,"KRN",9.8,"NM",186,0)
FHORD^^0^B3881051
"BLD",5078,"KRN",9.8,"NM",187,0)
FHORD1^^0^B21152206
"BLD",5078,"KRN",9.8,"NM",188,0)
FHORD10^^0^B9628638
"BLD",5078,"KRN",9.8,"NM",189,0)
FHORD11^^0^B16228852
"BLD",5078,"KRN",9.8,"NM",190,0)
FHORD13^^0^B48082272
"BLD",5078,"KRN",9.8,"NM",191,0)
FHORD1A^^0^B4650519
"BLD",5078,"KRN",9.8,"NM",192,0)
FHORD2^^0^B9427807
"BLD",5078,"KRN",9.8,"NM",193,0)
FHORD3^^0^B12761703
"BLD",5078,"KRN",9.8,"NM",194,0)
FHORD4^^0^B7643589
"BLD",5078,"KRN",9.8,"NM",195,0)
FHORD41^^0^B7828794
"BLD",5078,"KRN",9.8,"NM",196,0)
FHORD5^^0^B8107317
"BLD",5078,"KRN",9.8,"NM",197,0)
FHORD6^^0^B20737754
"BLD",5078,"KRN",9.8,"NM",198,0)
FHORD61^^0^B13130333
"BLD",5078,"KRN",9.8,"NM",199,0)
FHORD7^^0^B15592333
"BLD",5078,"KRN",9.8,"NM",200,0)
FHORD71^^0^B21240764
"BLD",5078,"KRN",9.8,"NM",201,0)
FHORD72^^0^B10206008
"BLD",5078,"KRN",9.8,"NM",202,0)
FHORD8^^0^B8127031
"BLD",5078,"KRN",9.8,"NM",203,0)
FHORD81^^0^B37481758
"BLD",5078,"KRN",9.8,"NM",204,0)
FHORD82^^0^B13838420
"BLD",5078,"KRN",9.8,"NM",205,0)
FHORD83^^0^B5249988
"BLD",5078,"KRN",9.8,"NM",206,0)
FHORD9^^0^B39801171
"BLD",5078,"KRN",9.8,"NM",207,0)
FHORD91^^0^B6191873
"BLD",5078,"KRN",9.8,"NM",208,0)
FHORD92^^0^B10689263
"BLD",5078,"KRN",9.8,"NM",209,0)
FHORD93^^0^B20775630
"BLD",5078,"KRN",9.8,"NM",210,0)
FHORDR^^0^B4951563
"BLD",5078,"KRN",9.8,"NM",211,0)
FHORE1^^0^B17169358
"BLD",5078,"KRN",9.8,"NM",212,0)
FHORE1A^^0^B2346552
"BLD",5078,"KRN",9.8,"NM",213,0)
FHORE2^^0^B6718113
"BLD",5078,"KRN",9.8,"NM",214,0)
FHORE21^^0^B29199963
"BLD",5078,"KRN",9.8,"NM",215,0)
FHORE3^^0^B5498065
"BLD",5078,"KRN",9.8,"NM",216,0)
FHORO^^0^B5737899
"BLD",5078,"KRN",9.8,"NM",217,0)
FHORR^^0^B5932851
"BLD",5078,"KRN",9.8,"NM",218,0)
FHORT1^^0^B15600227
"BLD",5078,"KRN",9.8,"NM",219,0)
FHORT10^^0^B27414587
"BLD",5078,"KRN",9.8,"NM",220,0)
FHORT11^^0^B2965950
"BLD",5078,"KRN",9.8,"NM",221,0)
FHORT2^^0^B9988060
"BLD",5078,"KRN",9.8,"NM",222,0)
FHORT3^^0^B4733379
"BLD",5078,"KRN",9.8,"NM",223,0)
FHORT5^^0^B7823183
"BLD",5078,"KRN",9.8,"NM",224,0)
FHORT5A^^0^B25454150
"BLD",5078,"KRN",9.8,"NM",225,0)
FHORT5B^^0^B2880437
"BLD",5078,"KRN",9.8,"NM",226,0)
FHORT5C^^0^B4841858
"BLD",5078,"KRN",9.8,"NM",227,0)
FHORT5D^^0^B11879741
"BLD",5078,"KRN",9.8,"NM",228,0)
FHORTR^^0^B3604196
"BLD",5078,"KRN",9.8,"NM",229,0)
FHORX^^0^B1827718
"BLD",5078,"KRN",9.8,"NM",230,0)
FHORX1^^0^B29007606
"BLD",5078,"KRN",9.8,"NM",231,0)
FHORX1A^^0^B45459503
"BLD",5078,"KRN",9.8,"NM",232,0)
FHORX1B^^0^B9940559
"BLD",5078,"KRN",9.8,"NM",233,0)
FHORX1C^^0^B11881645
"BLD",5078,"KRN",9.8,"NM",234,0)
FHORX2^^0^B4235060
"BLD",5078,"KRN",9.8,"NM",235,0)
FHORX3^^0^B14764815
"BLD",5078,"KRN",9.8,"NM",237,0)
FHPATM^^0^B13051908
"BLD",5078,"KRN",9.8,"NM",238,0)
FHPRC^^0^B7181488
"BLD",5078,"KRN",9.8,"NM",239,0)
FHPRC1^^0^B9271367
"BLD",5078,"KRN",9.8,"NM",240,0)
FHPRC10^^0^B19192455
"BLD",5078,"KRN",9.8,"NM",241,0)
FHPRC11^^0^B19510636
"BLD",5078,"KRN",9.8,"NM",242,0)
FHPRC12^^0^B10951820
"BLD",5078,"KRN",9.8,"NM",243,0)
FHPRC13^^0^B21014482
"BLD",5078,"KRN",9.8,"NM",244,0)
FHPRC14^^0^B16326822
"BLD",5078,"KRN",9.8,"NM",245,0)
FHPRC2^^0^B7470525
"BLD",5078,"KRN",9.8,"NM",246,0)
FHPRC3^^0^B6573528
"BLD",5078,"KRN",9.8,"NM",247,0)
FHPRC4^^0^B2645185
"BLD",5078,"KRN",9.8,"NM",248,0)
FHPRC5^^0^B2469527
"BLD",5078,"KRN",9.8,"NM",249,0)
FHPRC6^^0^B7384532
"BLD",5078,"KRN",9.8,"NM",250,0)
FHPRC7^^0^B4333956
"BLD",5078,"KRN",9.8,"NM",251,0)
FHPRC8^^0^B13521843
"BLD",5078,"KRN",9.8,"NM",252,0)
FHPRC9^^0^B10913177
"BLD",5078,"KRN",9.8,"NM",255,0)
FHPRF^^0^B1869381
"BLD",5078,"KRN",9.8,"NM",256,0)
FHPRF1^^0^B44967707
"BLD",5078,"KRN",9.8,"NM",257,0)
FHPRF1A^^0^B6887397
"BLD",5078,"KRN",9.8,"NM",258,0)
FHPRF2^^0^B3976413
"BLD",5078,"KRN",9.8,"NM",259,0)
FHPRF4^^0^B2105934
"BLD",5078,"KRN",9.8,"NM",260,0)
FHPRI^^0^B4887366
"BLD",5078,"KRN",9.8,"NM",261,0)
FHPRI1^^0^B6393491
"BLD",5078,"KRN",9.8,"NM",262,0)
FHPRI2^^0^B14177573
"BLD",5078,"KRN",9.8,"NM",263,0)
FHPRI3^^0^B2620613
"BLD",5078,"KRN",9.8,"NM",264,0)
FHPRO^^0^B10200393
"BLD",5078,"KRN",9.8,"NM",265,0)
FHPRO1^^0^B14807409
"BLD",5078,"KRN",9.8,"NM",266,0)
FHPRO2^^0^B30473092
"BLD",5078,"KRN",9.8,"NM",267,0)
FHPRO3^^0^B3558044
"BLD",5078,"KRN",9.8,"NM",268,0)
FHPRO4^^0^B9551925
"BLD",5078,"KRN",9.8,"NM",269,0)
FHPRO4A^^0^B5495633
"BLD",5078,"KRN",9.8,"NM",270,0)
FHPRO5^^0^B9414108
"BLD",5078,"KRN",9.8,"NM",271,0)
FHPRO6^^0^B3839506
"BLD",5078,"KRN",9.8,"NM",272,0)
FHPRO7^^0^B2263724
"BLD",5078,"KRN",9.8,"NM",273,0)
FHPRR1^^0^B6264425
"BLD",5078,"KRN",9.8,"NM",274,0)
FHPRR2^^0^B12967941
"BLD",5078,"KRN",9.8,"NM",275,0)
FHPRW^^0^B20787507
"BLD",5078,"KRN",9.8,"NM",276,0)
FHPRW1^^0^B5749467
"BLD",5078,"KRN",9.8,"NM",277,0)
FHPRW2^^0^B5757118
"BLD",5078,"KRN",9.8,"NM",278,0)
FHPRW3^^0^B5689438
"BLD",5078,"KRN",9.8,"NM",279,0)
FHPRW4^^0^B2683798
"BLD",5078,"KRN",9.8,"NM",282,0)
FHREC^^0^B5543081
"BLD",5078,"KRN",9.8,"NM",283,0)
FHREC1^^0^B7950704
"BLD",5078,"KRN",9.8,"NM",284,0)
FHREC2^^0^B7690308
"BLD",5078,"KRN",9.8,"NM",285,0)
FHREC3^^0^B2392359
"BLD",5078,"KRN",9.8,"NM",286,0)
FHREC4^^0^B4501508
"BLD",5078,"KRN",9.8,"NM",287,0)
FHREC5^^0^B4574625
"BLD",5078,"KRN",9.8,"NM",288,0)
FHREC6^^0^B14015147
"BLD",5078,"KRN",9.8,"NM",289,0)
FHREC7^^0^B2172371
"BLD",5078,"KRN",9.8,"NM",290,0)
FHREP^^0^B6037745
"BLD",5078,"KRN",9.8,"NM",291,0)
FHREP1^^0^B20171462
"BLD",5078,"KRN",9.8,"NM",292,0)
FHSEL1^^0^B19311390
"BLD",5078,"KRN",9.8,"NM",293,0)
FHSEL2^^0^B26687747
"BLD",5078,"KRN",9.8,"NM",294,0)
FHSEL3^^0^B11655434
"BLD",5078,"KRN",9.8,"NM",295,0)
FHSEL4^^0^B10168431
"BLD",5078,"KRN",9.8,"NM",296,0)
FHSP^^0^B1095426
"BLD",5078,"KRN",9.8,"NM",297,0)
FHSP1^^0^B25286206
"BLD",5078,"KRN",9.8,"NM",298,0)
FHSP11^^0^B6211120
"BLD",5078,"KRN",9.8,"NM",299,0)
FHSPED^^0^B20565975
"BLD",5078,"KRN",9.8,"NM",300,0)
FHSPTAB^^0^B9025859
"BLD",5078,"KRN",9.8,"NM",301,0)
FHSYSF^^0^B1170383
"BLD",5078,"KRN",9.8,"NM",302,0)
FHSYSK^^0^B4790690
"BLD",5078,"KRN",9.8,"NM",303,0)
FHSYSP^^0^B2630692
"BLD",5078,"KRN",9.8,"NM",304,0)
FHVER^^0^B1886996
"BLD",5078,"KRN",9.8,"NM",305,0)
FHWADM^^0^B10963798
"BLD",5078,"KRN",9.8,"NM",306,0)
FHWDIS^^0^B21294067
"BLD",5078,"KRN",9.8,"NM",307,0)
FHWDISD^^0^B5371386
"BLD",5078,"KRN",9.8,"NM",308,0)
FHWGMR^^0^B1375643
"BLD",5078,"KRN",9.8,"NM",309,0)
FHWHEA^^0^B20254205
"BLD",5078,"KRN",9.8,"NM",310,0)
FHWMAS^^0^B1958777
"BLD",5078,"KRN",9.8,"NM",311,0)
FHWOR^^0^B28923502
"BLD",5078,"KRN",9.8,"NM",312,0)
FHWOR1^^0^B3420812
"BLD",5078,"KRN",9.8,"NM",313,0)
FHWOR2^^0^B19324793
"BLD",5078,"KRN",9.8,"NM",314,0)
FHWOR3^^0^B23638068
"BLD",5078,"KRN",9.8,"NM",315,0)
FHWOR31^^0^B2848231
"BLD",5078,"KRN",9.8,"NM",316,0)
FHWOR4^^0^B13393906
"BLD",5078,"KRN",9.8,"NM",317,0)
FHWOR5^^0^B19012473
"BLD",5078,"KRN",9.8,"NM",318,0)
FHWOR51^^0^B8838321
"BLD",5078,"KRN",9.8,"NM",319,0)
FHWOR5R^^0^B5365773
"BLD",5078,"KRN",9.8,"NM",320,0)
FHWOR6^^0^B17590294
"BLD",5078,"KRN",9.8,"NM",321,0)
FHWOR61^^0^B7491076
"BLD",5078,"KRN",9.8,"NM",322,0)
FHWOR7^^0^B4949957
"BLD",5078,"KRN",9.8,"NM",323,0)
FHWOR71^^0^B28099245
"BLD",5078,"KRN",9.8,"NM",324,0)
FHWOR72^^0^B16706896
"BLD",5078,"KRN",9.8,"NM",325,0)
FHWOR8^^0^B6318925
"BLD",5078,"KRN",9.8,"NM",327,0)
FHWORA^^0^B19320980
"BLD",5078,"KRN",9.8,"NM",328,0)
FHWORA1^^0^B41936257
"BLD",5078,"KRN",9.8,"NM",329,0)
FHWORI^^0^B7351269
"BLD",5078,"KRN",9.8,"NM",330,0)
FHWORP^^0^B7665673
"BLD",5078,"KRN",9.8,"NM",331,0)
FHWORR^^0^B9467558
"BLD",5078,"KRN",9.8,"NM",332,0)
FHWTRN^^0^B4252356
"BLD",5078,"KRN",9.8,"NM",333,0)
FHXCNV^^0^B4289580
"BLD",5078,"KRN",9.8,"NM",334,0)
FHXDB^^0^B19045456
"BLD",5078,"KRN",9.8,"NM",335,0)
FHXDB1^^0^B20944830
"BLD",5078,"KRN",9.8,"NM",336,0)
FHXDB2^^0^B12453403
"BLD",5078,"KRN",9.8,"NM",337,0)
FHXIN^^0^B3430781
"BLD",5078,"KRN",9.8,"NM",338,0)
FHXMOV^^0^B13633003
"BLD",5078,"KRN",9.8,"NM",339,0)
FHXOR^^0^B7181116
"BLD",5078,"KRN",9.8,"NM",340,0)
FHXOR3^^0^B9489372
"BLD",5078,"KRN",9.8,"NM",341,0)
FHXUTL^^0^B6215213
"BLD",5078,"KRN",9.8,"NM",342,0)
FHXWRD^^0^B5585424
"BLD",5078,"KRN",9.8,"NM",343,0)
FHZDOC^^0^B1268882
"BLD",5078,"KRN",9.8,"NM",344,0)
FHZDOC1^^0^B868405
"BLD",5078,"KRN",9.8,"NM",345,0)
FHZDOC2^^0^B14968710
"BLD",5078,"KRN",9.8,"NM",346,0)
FHZDOC3^^0^B1210093
"BLD",5078,"KRN",9.8,"NM",347,0)
FHIPST6^^0^B827521
"BLD",5078,"KRN",9.8,"NM",348,0)
FHOMRO3^^0^B3405082
"BLD",5078,"KRN",9.8,"NM",349,0)
FHDPGM^^0^B2646216
"BLD",5078,"KRN",9.8,"NM",350,0)
FHDPSM^^0^B4611317
"BLD",5078,"KRN",9.8,"NM",351,0)
FHOMDMP^^0^B13156206
"BLD",5078,"KRN",9.8,"NM",352,0)
FHOMRMD^^0^B13565013
"BLD",5078,"KRN",9.8,"NM","B","FH",1)

"BLD",5078,"KRN",9.8,"NM","B","FH55PRE",2)

"BLD",5078,"KRN",9.8,"NM","B","FH55PST",3)

"BLD",5078,"KRN",9.8,"NM","B","FHADM2",4)

"BLD",5078,"KRN",9.8,"NM","B","FHADM21",5)

"BLD",5078,"KRN",9.8,"NM","B","FHADM2A",6)

"BLD",5078,"KRN",9.8,"NM","B","FHADM3",7)

"BLD",5078,"KRN",9.8,"NM","B","FHADM4",8)

"BLD",5078,"KRN",9.8,"NM","B","FHADM5",9)

"BLD",5078,"KRN",9.8,"NM","B","FHADR1",10)

"BLD",5078,"KRN",9.8,"NM","B","FHADR10",11)

"BLD",5078,"KRN",9.8,"NM","B","FHADR1A",12)

"BLD",5078,"KRN",9.8,"NM","B","FHADR2",13)

"BLD",5078,"KRN",9.8,"NM","B","FHADR3",14)

"BLD",5078,"KRN",9.8,"NM","B","FHADR3A",15)

"BLD",5078,"KRN",9.8,"NM","B","FHADR4",16)

"BLD",5078,"KRN",9.8,"NM","B","FHADR5",17)

"BLD",5078,"KRN",9.8,"NM","B","FHADR6",18)

"BLD",5078,"KRN",9.8,"NM","B","FHADR61",19)

"BLD",5078,"KRN",9.8,"NM","B","FHADR7",20)

"BLD",5078,"KRN",9.8,"NM","B","FHADR8",21)

"BLD",5078,"KRN",9.8,"NM","B","FHADR81",22)

"BLD",5078,"KRN",9.8,"NM","B","FHADR9",23)

"BLD",5078,"KRN",9.8,"NM","B","FHADR9A",24)

"BLD",5078,"KRN",9.8,"NM","B","FHADRPT",25)

"BLD",5078,"KRN",9.8,"NM","B","FHADRSY",26)

"BLD",5078,"KRN",9.8,"NM","B","FHASC",27)

"BLD",5078,"KRN",9.8,"NM","B","FHASE",28)

"BLD",5078,"KRN",9.8,"NM","B","FHASE1",29)

"BLD",5078,"KRN",9.8,"NM","B","FHASE1A",30)

"BLD",5078,"KRN",9.8,"NM","B","FHASE2",31)

"BLD",5078,"KRN",9.8,"NM","B","FHASE3",32)

"BLD",5078,"KRN",9.8,"NM","B","FHASM1",33)

"BLD",5078,"KRN",9.8,"NM","B","FHASM2",34)

"BLD",5078,"KRN",9.8,"NM","B","FHASM2A",35)

"BLD",5078,"KRN",9.8,"NM","B","FHASM2B",36)

"BLD",5078,"KRN",9.8,"NM","B","FHASM2C",37)

"BLD",5078,"KRN",9.8,"NM","B","FHASM2D",38)

"BLD",5078,"KRN",9.8,"NM","B","FHASM3",39)

"BLD",5078,"KRN",9.8,"NM","B","FHASM3A",40)

"BLD",5078,"KRN",9.8,"NM","B","FHASM4",41)

"BLD",5078,"KRN",9.8,"NM","B","FHASM5",42)

"BLD",5078,"KRN",9.8,"NM","B","FHASM6",43)

"BLD",5078,"KRN",9.8,"NM","B","FHASM7",44)

"BLD",5078,"KRN",9.8,"NM","B","FHASMR",45)

"BLD",5078,"KRN",9.8,"NM","B","FHASMR1",46)

"BLD",5078,"KRN",9.8,"NM","B","FHASN",47)

"BLD",5078,"KRN",9.8,"NM","B","FHASN1",48)

"BLD",5078,"KRN",9.8,"NM","B","FHASN3",49)

"BLD",5078,"KRN",9.8,"NM","B","FHASN4",50)

"BLD",5078,"KRN",9.8,"NM","B","FHASN5",51)

"BLD",5078,"KRN",9.8,"NM","B","FHASN6",52)

"BLD",5078,"KRN",9.8,"NM","B","FHASN7",53)

"BLD",5078,"KRN",9.8,"NM","B","FHASN71",54)

"BLD",5078,"KRN",9.8,"NM","B","FHASP",55)

"BLD",5078,"KRN",9.8,"NM","B","FHASP1",56)

"BLD",5078,"KRN",9.8,"NM","B","FHASP2",57)

"BLD",5078,"KRN",9.8,"NM","B","FHASXR",58)

"BLD",5078,"KRN",9.8,"NM","B","FHASXR1",59)

"BLD",5078,"KRN",9.8,"NM","B","FHBIR",60)

"BLD",5078,"KRN",9.8,"NM","B","FHCLN",62)

"BLD",5078,"KRN",9.8,"NM","B","FHCMS1",63)

"BLD",5078,"KRN",9.8,"NM","B","FHCMSR",64)

"BLD",5078,"KRN",9.8,"NM","B","FHCMSR1",65)

"BLD",5078,"KRN",9.8,"NM","B","FHCTF",67)

"BLD",5078,"KRN",9.8,"NM","B","FHCTF1",68)

"BLD",5078,"KRN",9.8,"NM","B","FHCTF2",69)

"BLD",5078,"KRN",9.8,"NM","B","FHCTF3",70)

"BLD",5078,"KRN",9.8,"NM","B","FHCTF4",71)

"BLD",5078,"KRN",9.8,"NM","B","FHCTF5",72)

"BLD",5078,"KRN",9.8,"NM","B","FHDCR1",73)

"BLD",5078,"KRN",9.8,"NM","B","FHDCR11",74)

"BLD",5078,"KRN",9.8,"NM","B","FHDCR1A",75)

"BLD",5078,"KRN",9.8,"NM","B","FHDCR1B",76)

"BLD",5078,"KRN",9.8,"NM","B","FHDCR1C",77)

"BLD",5078,"KRN",9.8,"NM","B","FHDCR1D",78)

"BLD",5078,"KRN",9.8,"NM","B","FHDCR2",79)

"BLD",5078,"KRN",9.8,"NM","B","FHDEV",80)

"BLD",5078,"KRN",9.8,"NM","B","FHDMP",81)

"BLD",5078,"KRN",9.8,"NM","B","FHDMP1",82)

"BLD",5078,"KRN",9.8,"NM","B","FHDMP2",83)

"BLD",5078,"KRN",9.8,"NM","B","FHDMP3",84)

"BLD",5078,"KRN",9.8,"NM","B","FHDMP4",85)

"BLD",5078,"KRN",9.8,"NM","B","FHDMP5",86)

"BLD",5078,"KRN",9.8,"NM","B","FHDPA",87)

"BLD",5078,"KRN",9.8,"NM","B","FHDPGM",349)

"BLD",5078,"KRN",9.8,"NM","B","FHDPSM",350)

"BLD",5078,"KRN",9.8,"NM","B","FHENV",88)

"BLD",5078,"KRN",9.8,"NM","B","FHIPST6",347)

"BLD",5078,"KRN",9.8,"NM","B","FHLABEL",91)

"BLD",5078,"KRN",9.8,"NM","B","FHMADM2",92)

"BLD",5078,"KRN",9.8,"NM","B","FHMADM21",93)

"BLD",5078,"KRN",9.8,"NM","B","FHMADM2A",94)

"BLD",5078,"KRN",9.8,"NM","B","FHMADM3",95)

"BLD",5078,"KRN",9.8,"NM","B","FHMADM4",96)

"BLD",5078,"KRN",9.8,"NM","B","FHMASE",97)

"BLD",5078,"KRN",9.8,"NM","B","FHMASE1",98)

"BLD",5078,"KRN",9.8,"NM","B","FHMASE1A",99)

"BLD",5078,"KRN",9.8,"NM","B","FHMMBRPT",100)

"BLD",5078,"KRN",9.8,"NM","B","FHMMNADM",101)

"BLD",5078,"KRN",9.8,"NM","B","FHMMNPRT",102)

"BLD",5078,"KRN",9.8,"NM","B","FHMMNREP",103)

"BLD",5078,"KRN",9.8,"NM","B","FHMNADM",104)

"BLD",5078,"KRN",9.8,"NM","B","FHMNBRPT",105)

"BLD",5078,"KRN",9.8,"NM","B","FHMNINQ",106)

"BLD",5078,"KRN",9.8,"NM","B","FHMNPRT",107)

"BLD",5078,"KRN",9.8,"NM","B","FHMNREP",108)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK",109)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK1",110)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK11",111)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK1A",112)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK1B",113)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK1C",114)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK2",115)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK21",116)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK3",117)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK4",118)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK5",119)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK6",120)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK7",121)

"BLD",5078,"KRN",9.8,"NM","B","FHMTK8",122)

"BLD",5078,"KRN",9.8,"NM","B","FHMTKO",123)

"BLD",5078,"KRN",9.8,"NM","B","FHNO1",124)

"BLD",5078,"KRN",9.8,"NM","B","FHNO2",125)

"BLD",5078,"KRN",9.8,"NM","B","FHNO21",126)

"BLD",5078,"KRN",9.8,"NM","B","FHNO3",127)

"BLD",5078,"KRN",9.8,"NM","B","FHNO31",128)

"BLD",5078,"KRN",9.8,"NM","B","FHNO4",129)

"BLD",5078,"KRN",9.8,"NM","B","FHNO41",130)

"BLD",5078,"KRN",9.8,"NM","B","FHNO5",131)

"BLD",5078,"KRN",9.8,"NM","B","FHNO6",132)

"BLD",5078,"KRN",9.8,"NM","B","FHNO7",133)

"BLD",5078,"KRN",9.8,"NM","B","FHNO8",134)

"BLD",5078,"KRN",9.8,"NM","B","FHNU",137)

"BLD",5078,"KRN",9.8,"NM","B","FHNU1",138)

"BLD",5078,"KRN",9.8,"NM","B","FHNU10",139)

"BLD",5078,"KRN",9.8,"NM","B","FHNU11",140)

"BLD",5078,"KRN",9.8,"NM","B","FHNU12",141)

"BLD",5078,"KRN",9.8,"NM","B","FHNU2",142)

"BLD",5078,"KRN",9.8,"NM","B","FHNU3",143)

"BLD",5078,"KRN",9.8,"NM","B","FHNU4",144)

"BLD",5078,"KRN",9.8,"NM","B","FHNU5",145)

"BLD",5078,"KRN",9.8,"NM","B","FHNU6",146)

"BLD",5078,"KRN",9.8,"NM","B","FHNU7",147)

"BLD",5078,"KRN",9.8,"NM","B","FHNU8",148)

"BLD",5078,"KRN",9.8,"NM","B","FHNU9",149)

"BLD",5078,"KRN",9.8,"NM","B","FHNUT",150)

"BLD",5078,"KRN",9.8,"NM","B","FHOMAPI",151)

"BLD",5078,"KRN",9.8,"NM","B","FHOMDMP",351)

"BLD",5078,"KRN",9.8,"NM","B","FHOMDPA",152)

"BLD",5078,"KRN",9.8,"NM","B","FHOMELT",153)

"BLD",5078,"KRN",9.8,"NM","B","FHOMGP1",154)

"BLD",5078,"KRN",9.8,"NM","B","FHOMGR1",155)

"BLD",5078,"KRN",9.8,"NM","B","FHOMIP",156)

"BLD",5078,"KRN",9.8,"NM","B","FHOMPP",157)

"BLD",5078,"KRN",9.8,"NM","B","FHOMPP1",158)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRA1",159)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRBL1",160)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRBLD",161)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRC1",162)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRE1",163)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRMD",352)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRO1",164)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRO2",165)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRO3",348)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRP1",166)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRR1",167)

"BLD",5078,"KRN",9.8,"NM","B","FHOMRT1",168)

"BLD",5078,"KRN",9.8,"NM","B","FHOMSA1",169)

"BLD",5078,"KRN",9.8,"NM","B","FHOMSC1",170)

"BLD",5078,"KRN",9.8,"NM","B","FHOMSP1",171)

"BLD",5078,"KRN",9.8,"NM","B","FHOMSR1",172)

"BLD",5078,"KRN",9.8,"NM","B","FHOMSS1",173)

"BLD",5078,"KRN",9.8,"NM","B","FHOMTK1",175)

"BLD",5078,"KRN",9.8,"NM","B","FHOMTK2",176)

"BLD",5078,"KRN",9.8,"NM","B","FHOMUPD",177)

"BLD",5078,"KRN",9.8,"NM","B","FHOMUTL",178)

"BLD",5078,"KRN",9.8,"NM","B","FHOMWOR",179)

"BLD",5078,"KRN",9.8,"NM","B","FHORC",180)

"BLD",5078,"KRN",9.8,"NM","B","FHORC1",181)

"BLD",5078,"KRN",9.8,"NM","B","FHORC2",182)

"BLD",5078,"KRN",9.8,"NM","B","FHORC3",183)

"BLD",5078,"KRN",9.8,"NM","B","FHORC4",184)

"BLD",5078,"KRN",9.8,"NM","B","FHORC5",185)

"BLD",5078,"KRN",9.8,"NM","B","FHORD",186)

"BLD",5078,"KRN",9.8,"NM","B","FHORD1",187)

"BLD",5078,"KRN",9.8,"NM","B","FHORD10",188)

"BLD",5078,"KRN",9.8,"NM","B","FHORD11",189)

"BLD",5078,"KRN",9.8,"NM","B","FHORD13",190)

"BLD",5078,"KRN",9.8,"NM","B","FHORD1A",191)

"BLD",5078,"KRN",9.8,"NM","B","FHORD2",192)

"BLD",5078,"KRN",9.8,"NM","B","FHORD3",193)

"BLD",5078,"KRN",9.8,"NM","B","FHORD4",194)

"BLD",5078,"KRN",9.8,"NM","B","FHORD41",195)

"BLD",5078,"KRN",9.8,"NM","B","FHORD5",196)

"BLD",5078,"KRN",9.8,"NM","B","FHORD6",197)

"BLD",5078,"KRN",9.8,"NM","B","FHORD61",198)

"BLD",5078,"KRN",9.8,"NM","B","FHORD7",199)

"BLD",5078,"KRN",9.8,"NM","B","FHORD71",200)

"BLD",5078,"KRN",9.8,"NM","B","FHORD72",201)

"BLD",5078,"KRN",9.8,"NM","B","FHORD8",202)

"BLD",5078,"KRN",9.8,"NM","B","FHORD81",203)

"BLD",5078,"KRN",9.8,"NM","B","FHORD82",204)

"BLD",5078,"KRN",9.8,"NM","B","FHORD83",205)

"BLD",5078,"KRN",9.8,"NM","B","FHORD9",206)

"BLD",5078,"KRN",9.8,"NM","B","FHORD91",207)

"BLD",5078,"KRN",9.8,"NM","B","FHORD92",208)

"BLD",5078,"KRN",9.8,"NM","B","FHORD93",209)

"BLD",5078,"KRN",9.8,"NM","B","FHORDR",210)

"BLD",5078,"KRN",9.8,"NM","B","FHORE1",211)

"BLD",5078,"KRN",9.8,"NM","B","FHORE1A",212)

"BLD",5078,"KRN",9.8,"NM","B","FHORE2",213)

"BLD",5078,"KRN",9.8,"NM","B","FHORE21",214)

"BLD",5078,"KRN",9.8,"NM","B","FHORE3",215)

"BLD",5078,"KRN",9.8,"NM","B","FHORO",216)

"BLD",5078,"KRN",9.8,"NM","B","FHORR",217)

"BLD",5078,"KRN",9.8,"NM","B","FHORT1",218)

"BLD",5078,"KRN",9.8,"NM","B","FHORT10",219)

"BLD",5078,"KRN",9.8,"NM","B","FHORT11",220)

"BLD",5078,"KRN",9.8,"NM","B","FHORT2",221)

"BLD",5078,"KRN",9.8,"NM","B","FHORT3",222)

"BLD",5078,"KRN",9.8,"NM","B","FHORT5",223)

"BLD",5078,"KRN",9.8,"NM","B","FHORT5A",224)

"BLD",5078,"KRN",9.8,"NM","B","FHORT5B",225)

"BLD",5078,"KRN",9.8,"NM","B","FHORT5C",226)

"BLD",5078,"KRN",9.8,"NM","B","FHORT5D",227)

"BLD",5078,"KRN",9.8,"NM","B","FHORTR",228)

"BLD",5078,"KRN",9.8,"NM","B","FHORX",229)

"BLD",5078,"KRN",9.8,"NM","B","FHORX1",230)

"BLD",5078,"KRN",9.8,"NM","B","FHORX1A",231)

"BLD",5078,"KRN",9.8,"NM","B","FHORX1B",232)

"BLD",5078,"KRN",9.8,"NM","B","FHORX1C",233)

"BLD",5078,"KRN",9.8,"NM","B","FHORX2",234)

"BLD",5078,"KRN",9.8,"NM","B","FHORX3",235)

"BLD",5078,"KRN",9.8,"NM","B","FHPATM",237)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC",238)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC1",239)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC10",240)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC11",241)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC12",242)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC13",243)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC14",244)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC2",245)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC3",246)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC4",247)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC5",248)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC6",249)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC7",250)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC8",251)

"BLD",5078,"KRN",9.8,"NM","B","FHPRC9",252)

"BLD",5078,"KRN",9.8,"NM","B","FHPRF",255)

"BLD",5078,"KRN",9.8,"NM","B","FHPRF1",256)

"BLD",5078,"KRN",9.8,"NM","B","FHPRF1A",257)

"BLD",5078,"KRN",9.8,"NM","B","FHPRF2",258)

"BLD",5078,"KRN",9.8,"NM","B","FHPRF4",259)

"BLD",5078,"KRN",9.8,"NM","B","FHPRI",260)

"BLD",5078,"KRN",9.8,"NM","B","FHPRI1",261)

"BLD",5078,"KRN",9.8,"NM","B","FHPRI2",262)

"BLD",5078,"KRN",9.8,"NM","B","FHPRI3",263)

"BLD",5078,"KRN",9.8,"NM","B","FHPRO",264)

"BLD",5078,"KRN",9.8,"NM","B","FHPRO1",265)

"BLD",5078,"KRN",9.8,"NM","B","FHPRO2",266)

"BLD",5078,"KRN",9.8,"NM","B","FHPRO3",267)

"BLD",5078,"KRN",9.8,"NM","B","FHPRO4",268)

"BLD",5078,"KRN",9.8,"NM","B","FHPRO4A",269)

"BLD",5078,"KRN",9.8,"NM","B","FHPRO5",270)

"BLD",5078,"KRN",9.8,"NM","B","FHPRO6",271)

"BLD",5078,"KRN",9.8,"NM","B","FHPRO7",272)

"BLD",5078,"KRN",9.8,"NM","B","FHPRR1",273)

"BLD",5078,"KRN",9.8,"NM","B","FHPRR2",274)

"BLD",5078,"KRN",9.8,"NM","B","FHPRW",275)

"BLD",5078,"KRN",9.8,"NM","B","FHPRW1",276)

"BLD",5078,"KRN",9.8,"NM","B","FHPRW2",277)

"BLD",5078,"KRN",9.8,"NM","B","FHPRW3",278)

"BLD",5078,"KRN",9.8,"NM","B","FHPRW4",279)

"BLD",5078,"KRN",9.8,"NM","B","FHREC",282)

"BLD",5078,"KRN",9.8,"NM","B","FHREC1",283)

"BLD",5078,"KRN",9.8,"NM","B","FHREC2",284)

"BLD",5078,"KRN",9.8,"NM","B","FHREC3",285)

"BLD",5078,"KRN",9.8,"NM","B","FHREC4",286)

"BLD",5078,"KRN",9.8,"NM","B","FHREC5",287)

"BLD",5078,"KRN",9.8,"NM","B","FHREC6",288)

"BLD",5078,"KRN",9.8,"NM","B","FHREC7",289)

"BLD",5078,"KRN",9.8,"NM","B","FHREP",290)

"BLD",5078,"KRN",9.8,"NM","B","FHREP1",291)

"BLD",5078,"KRN",9.8,"NM","B","FHSEL1",292)

"BLD",5078,"KRN",9.8,"NM","B","FHSEL2",293)

"BLD",5078,"KRN",9.8,"NM","B","FHSEL3",294)

"BLD",5078,"KRN",9.8,"NM","B","FHSEL4",295)

"BLD",5078,"KRN",9.8,"NM","B","FHSP",296)

"BLD",5078,"KRN",9.8,"NM","B","FHSP1",297)

"BLD",5078,"KRN",9.8,"NM","B","FHSP11",298)

"BLD",5078,"KRN",9.8,"NM","B","FHSPED",299)

"BLD",5078,"KRN",9.8,"NM","B","FHSPTAB",300)

"BLD",5078,"KRN",9.8,"NM","B","FHSYSF",301)

"BLD",5078,"KRN",9.8,"NM","B","FHSYSK",302)

"BLD",5078,"KRN",9.8,"NM","B","FHSYSP",303)

"BLD",5078,"KRN",9.8,"NM","B","FHVER",304)

"BLD",5078,"KRN",9.8,"NM","B","FHWADM",305)

"BLD",5078,"KRN",9.8,"NM","B","FHWDIS",306)

"BLD",5078,"KRN",9.8,"NM","B","FHWDISD",307)

"BLD",5078,"KRN",9.8,"NM","B","FHWGMR",308)

"BLD",5078,"KRN",9.8,"NM","B","FHWHEA",309)

"BLD",5078,"KRN",9.8,"NM","B","FHWMAS",310)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR",311)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR1",312)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR2",313)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR3",314)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR31",315)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR4",316)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR5",317)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR51",318)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR5R",319)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR6",320)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR61",321)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR7",322)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR71",323)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR72",324)

"BLD",5078,"KRN",9.8,"NM","B","FHWOR8",325)

"BLD",5078,"KRN",9.8,"NM","B","FHWORA",327)

"BLD",5078,"KRN",9.8,"NM","B","FHWORA1",328)

"BLD",5078,"KRN",9.8,"NM","B","FHWORI",329)

"BLD",5078,"KRN",9.8,"NM","B","FHWORP",330)

"BLD",5078,"KRN",9.8,"NM","B","FHWORR",331)

"BLD",5078,"KRN",9.8,"NM","B","FHWTRN",332)

"BLD",5078,"KRN",9.8,"NM","B","FHXCNV",333)

"BLD",5078,"KRN",9.8,"NM","B","FHXDB",334)

"BLD",5078,"KRN",9.8,"NM","B","FHXDB1",335)

"BLD",5078,"KRN",9.8,"NM","B","FHXDB2",336)

"BLD",5078,"KRN",9.8,"NM","B","FHXIN",337)

"BLD",5078,"KRN",9.8,"NM","B","FHXMOV",338)

"BLD",5078,"KRN",9.8,"NM","B","FHXOR",339)

"BLD",5078,"KRN",9.8,"NM","B","FHXOR3",340)

"BLD",5078,"KRN",9.8,"NM","B","FHXUTL",341)

"BLD",5078,"KRN",9.8,"NM","B","FHXWRD",342)

"BLD",5078,"KRN",9.8,"NM","B","FHZDOC",343)

"BLD",5078,"KRN",9.8,"NM","B","FHZDOC1",344)

"BLD",5078,"KRN",9.8,"NM","B","FHZDOC2",345)

"BLD",5078,"KRN",9.8,"NM","B","FHZDOC3",346)

"BLD",5078,"KRN",19,0)
19
"BLD",5078,"KRN",19,"NM",0)
^9.68A^293^293
"BLD",5078,"KRN",19,"NM",1,0)
FH GECS BATCH^^0
"BLD",5078,"KRN",19,"NM",2,0)
FH GECS BATCH EDIT^^0
"BLD",5078,"KRN",19,"NM",3,0)
FH GECS BATCHES STATUS^^0
"BLD",5078,"KRN",19,"NM",4,0)
FH GECS BATCHES WAITING TRANS^^0
"BLD",5078,"KRN",19,"NM",5,0)
FH GECS CODE EDIT^^0
"BLD",5078,"KRN",19,"NM",6,0)
FH GECS CREATE^^0
"BLD",5078,"KRN",19,"NM",7,0)
FH GECS DELETE^^0
"BLD",5078,"KRN",19,"NM",8,0)
FH GECS KEYPUNCH^^0
"BLD",5078,"KRN",19,"NM",9,0)
FH GECS MAIN MENU^^0
"BLD",5078,"KRN",19,"NM",10,0)
FH GECS MAINTENANCE USER MENU^^0
"BLD",5078,"KRN",19,"NM",11,0)
FH GECS PURGE^^0
"BLD",5078,"KRN",19,"NM",12,0)
FH GECS READY FOR BATCHING LIS^^0
"BLD",5078,"KRN",19,"NM",13,0)
FH GECS REBATCH^^0
"BLD",5078,"KRN",19,"NM",14,0)
FH GECS REPORTS MENU^^0
"BLD",5078,"KRN",19,"NM",15,0)
FH GECS RETRANSMIT^^0
"BLD",5078,"KRN",19,"NM",16,0)
FH GECS REVIEW CODE SHEET^^0
"BLD",5078,"KRN",19,"NM",17,0)
FH GECS TRANSMIT^^0
"BLD",5078,"KRN",19,"NM",18,0)
FH GECS TRANSMIT USER^^0
"BLD",5078,"KRN",19,"NM",19,0)
FH GECS USER MENU^^0
"BLD",5078,"KRN",19,"NM",20,0)
FHADM^^0
"BLD",5078,"KRN",19,"NM",21,0)
FHADMR^^0
"BLD",5078,"KRN",19,"NM",22,0)
FHADMR1^^0
"BLD",5078,"KRN",19,"NM",23,0)
FHADMR2^^0
"BLD",5078,"KRN",19,"NM",24,0)
FHADMR2A^^0
"BLD",5078,"KRN",19,"NM",25,0)
FHADMR3^^0
"BLD",5078,"KRN",19,"NM",26,0)
FHADMR4^^0
"BLD",5078,"KRN",19,"NM",27,0)
FHADMR5^^0
"BLD",5078,"KRN",19,"NM",28,0)
FHADMR8^^0
"BLD",5078,"KRN",19,"NM",29,0)
FHADR1^^0
"BLD",5078,"KRN",19,"NM",30,0)
FHADR2^^0
"BLD",5078,"KRN",19,"NM",31,0)
FHADR3^^0
"BLD",5078,"KRN",19,"NM",32,0)
FHADR4^^0
"BLD",5078,"KRN",19,"NM",33,0)
FHADR5^^0
"BLD",5078,"KRN",19,"NM",34,0)
FHADR6^^0
"BLD",5078,"KRN",19,"NM",35,0)
FHADR7^^0
"BLD",5078,"KRN",19,"NM",36,0)
FHADR8^^0
"BLD",5078,"KRN",19,"NM",37,0)
FHADR9^^0
"BLD",5078,"KRN",19,"NM",38,0)
FHADRP^^0
"BLD",5078,"KRN",19,"NM",39,0)
FHADRR^^0
"BLD",5078,"KRN",19,"NM",40,0)
FHADRS^^0
"BLD",5078,"KRN",19,"NM",41,0)
FHASC1^^0
"BLD",5078,"KRN",19,"NM",42,0)
FHASC10^^0
"BLD",5078,"KRN",19,"NM",43,0)
FHASC2^^0
"BLD",5078,"KRN",19,"NM",44,0)
FHASC4^^0
"BLD",5078,"KRN",19,"NM",45,0)
FHASC8^^0
"BLD",5078,"KRN",19,"NM",46,0)
FHASC9^^0
"BLD",5078,"KRN",19,"NM",47,0)
FHASCM^^0
"BLD",5078,"KRN",19,"NM",48,0)
FHASCX^^0
"BLD",5078,"KRN",19,"NM",49,0)
FHASE1^^0
"BLD",5078,"KRN",19,"NM",50,0)
FHASE2^^0
"BLD",5078,"KRN",19,"NM",51,0)
FHASE3^^0
"BLD",5078,"KRN",19,"NM",52,0)
FHASE4^^0
"BLD",5078,"KRN",19,"NM",53,0)
FHASE5^^0
"BLD",5078,"KRN",19,"NM",54,0)
FHASE6^^0
"BLD",5078,"KRN",19,"NM",55,0)
FHASE7^^0
"BLD",5078,"KRN",19,"NM",56,0)
FHASM1^^0
"BLD",5078,"KRN",19,"NM",57,0)
FHASMR^^0
"BLD",5078,"KRN",19,"NM",58,0)
FHASNR^^0
"BLD",5078,"KRN",19,"NM",59,0)
FHASNR2^^0
"BLD",5078,"KRN",19,"NM",60,0)
FHASNR3^^0
"BLD",5078,"KRN",19,"NM",61,0)
FHASNR4^^0
"BLD",5078,"KRN",19,"NM",62,0)
FHASNR5^^0
"BLD",5078,"KRN",19,"NM",63,0)
FHASNRR^^0
"BLD",5078,"KRN",19,"NM",64,0)
FHASP1^^0
"BLD",5078,"KRN",19,"NM",65,0)
FHASXR^^0
"BLD",5078,"KRN",19,"NM",66,0)
FHBIR^^0
"BLD",5078,"KRN",19,"NM",67,0)
FHBUD^^0
"BLD",5078,"KRN",19,"NM",68,0)
FHCDLST^^0
"BLD",5078,"KRN",19,"NM",69,0)
FHCMRR1^^0
"BLD",5078,"KRN",19,"NM",70,0)
FHCMRR2^^0
"BLD",5078,"KRN",19,"NM",71,0)
FHCTF^^0
"BLD",5078,"KRN",19,"NM",72,0)
FHCTF1^^0
"BLD",5078,"KRN",19,"NM",73,0)
FHCTF2^^0
"BLD",5078,"KRN",19,"NM",74,0)
FHCTF3^^0
"BLD",5078,"KRN",19,"NM",75,0)
FHCTF5^^0
"BLD",5078,"KRN",19,"NM",76,0)
FHDCRP^^0
"BLD",5078,"KRN",19,"NM",77,0)
FHDIET^^0
"BLD",5078,"KRN",19,"NM",78,0)
FHDMP^^0
"BLD",5078,"KRN",19,"NM",79,0)
FHFIL1^^0
"BLD",5078,"KRN",19,"NM",80,0)
FHFIL2^^0
"BLD",5078,"KRN",19,"NM",81,0)
FHFIL3^^0
"BLD",5078,"KRN",19,"NM",82,0)
FHFIL4^^0
"BLD",5078,"KRN",19,"NM",83,0)
FHFILM^^0
"BLD",5078,"KRN",19,"NM",84,0)
FHING1^^0
"BLD",5078,"KRN",19,"NM",85,0)
FHING10^^0
"BLD",5078,"KRN",19,"NM",86,0)
FHING11^^0
"BLD",5078,"KRN",19,"NM",87,0)
FHING12^^0
"BLD",5078,"KRN",19,"NM",88,0)
FHING13^^0
"BLD",5078,"KRN",19,"NM",89,0)
FHING2^^0
"BLD",5078,"KRN",19,"NM",90,0)
FHING3^^0
"BLD",5078,"KRN",19,"NM",91,0)
FHING4^^0
"BLD",5078,"KRN",19,"NM",92,0)
FHING5^^0
"BLD",5078,"KRN",19,"NM",93,0)
FHING51^^0
"BLD",5078,"KRN",19,"NM",94,0)
FHING52^^0
"BLD",5078,"KRN",19,"NM",95,0)
FHING6^^0
"BLD",5078,"KRN",19,"NM",96,0)
FHING7^^0
"BLD",5078,"KRN",19,"NM",97,0)
FHING8^^0
"BLD",5078,"KRN",19,"NM",98,0)
FHING9^^0
"BLD",5078,"KRN",19,"NM",99,0)
FHINGM^^0
"BLD",5078,"KRN",19,"NM",100,0)
FHMGR^^2
"BLD",5078,"KRN",19,"NM",101,0)
FHMGRA^^0
"BLD",5078,"KRN",19,"NM",102,0)
FHMGRC^^0
"BLD",5078,"KRN",19,"NM",103,0)
FHMGROM^^0
"BLD",5078,"KRN",19,"NM",104,0)
FHMNADM^^0
"BLD",5078,"KRN",19,"NM",105,0)
FHMNBRPT^^0
"BLD",5078,"KRN",19,"NM",106,0)
FHMNINQ^^0
"BLD",5078,"KRN",19,"NM",107,0)
FHMNREP^^0
"BLD",5078,"KRN",19,"NM",108,0)
FHMTKE^^0
"BLD",5078,"KRN",19,"NM",109,0)
FHMTKH^^0
"BLD",5078,"KRN",19,"NM",110,0)
FHMTKM^^0
"BLD",5078,"KRN",19,"NM",111,0)
FHMTKMM^^0
"BLD",5078,"KRN",19,"NM",112,0)
FHMTKN^^0
"BLD",5078,"KRN",19,"NM",113,0)
FHMTKP^^0
"BLD",5078,"KRN",19,"NM",114,0)
FHMTKS^^0
"BLD",5078,"KRN",19,"NM",115,0)
FHMTKT^^0
"BLD",5078,"KRN",19,"NM",116,0)
FHMTKTR^^0
"BLD",5078,"KRN",19,"NM",117,0)
FHNO10^^0
"BLD",5078,"KRN",19,"NM",118,0)
FHNO11^^0
"BLD",5078,"KRN",19,"NM",119,0)
FHNO12^^0
"BLD",5078,"KRN",19,"NM",120,0)
FHNO1E^^0
"BLD",5078,"KRN",19,"NM",121,0)
FHNO1I^^0
"BLD",5078,"KRN",19,"NM",122,0)
FHNO2^^0
"BLD",5078,"KRN",19,"NM",123,0)
FHNO3^^0
"BLD",5078,"KRN",19,"NM",124,0)
FHNO4^^0
"BLD",5078,"KRN",19,"NM",125,0)
FHNO5^^0
"BLD",5078,"KRN",19,"NM",126,0)
FHNO6^^0
"BLD",5078,"KRN",19,"NM",127,0)
FHNO7^^0
"BLD",5078,"KRN",19,"NM",128,0)
FHNO8^^0
"BLD",5078,"KRN",19,"NM",129,0)
FHNO9^^0
"BLD",5078,"KRN",19,"NM",130,0)
FHNOM^^0
"BLD",5078,"KRN",19,"NM",131,0)
FHNOX^^0
"BLD",5078,"KRN",19,"NM",132,0)
FHNU11^^0
"BLD",5078,"KRN",19,"NM",133,0)
FHNU12^^0
"BLD",5078,"KRN",19,"NM",134,0)
FHNU1D^^0
"BLD",5078,"KRN",19,"NM",135,0)
FHNU1P^^0
"BLD",5078,"KRN",19,"NM",136,0)
FHNU2^^0
"BLD",5078,"KRN",19,"NM",137,0)
FHNU3^^0
"BLD",5078,"KRN",19,"NM",138,0)
FHNU4^^0
"BLD",5078,"KRN",19,"NM",139,0)
FHNU5^^0
"BLD",5078,"KRN",19,"NM",140,0)
FHNU6^^0
"BLD",5078,"KRN",19,"NM",141,0)
FHNU7^^0
"BLD",5078,"KRN",19,"NM",142,0)
FHNU8^^0
"BLD",5078,"KRN",19,"NM",143,0)
FHNU9^^0
"BLD",5078,"KRN",19,"NM",144,0)
FHNUM^^0
"BLD",5078,"KRN",19,"NM",145,0)
FHNUX^^0
"BLD",5078,"KRN",19,"NM",146,0)
FHOMGMGR^^0
"BLD",5078,"KRN",19,"NM",147,0)
FHOMGP^^0
"BLD",5078,"KRN",19,"NM",148,0)
FHOMGR^^0
"BLD",5078,"KRN",19,"NM",149,0)
FHOMIP^^0
"BLD",5078,"KRN",19,"NM",150,0)
FHOMRA^^0
"BLD",5078,"KRN",19,"NM",151,0)
FHOMRAC^^0
"BLD",5078,"KRN",19,"NM",152,0)
FHOMRC^^0
"BLD",5078,"KRN",19,"NM",153,0)
FHOMRE^^0
"BLD",5078,"KRN",19,"NM",154,0)
FHOMREC^^0
"BLD",5078,"KRN",19,"NM",155,0)
FHOMRMGR^^0
"BLD",5078,"KRN",19,"NM",156,0)
FHOMRO^^0
"BLD",5078,"KRN",19,"NM",157,0)
FHOMRP^^0
"BLD",5078,"KRN",19,"NM",158,0)
FHOMRR^^0
"BLD",5078,"KRN",19,"NM",159,0)
FHOMRT^^0
"BLD",5078,"KRN",19,"NM",160,0)
FHOMRTC^^0
"BLD",5078,"KRN",19,"NM",161,0)
FHOMSA^^0
"BLD",5078,"KRN",19,"NM",162,0)
FHOMSC^^0
"BLD",5078,"KRN",19,"NM",163,0)
FHOMSMGR^^0
"BLD",5078,"KRN",19,"NM",164,0)
FHOMSP^^0
"BLD",5078,"KRN",19,"NM",165,0)
FHOMSR^^0
"BLD",5078,"KRN",19,"NM",166,0)
FHOMSS^^0
"BLD",5078,"KRN",19,"NM",167,0)
FHORC1^^0
"BLD",5078,"KRN",19,"NM",168,0)
FHORC10^^0
"BLD",5078,"KRN",19,"NM",169,0)
FHORC2^^0
"BLD",5078,"KRN",19,"NM",170,0)
FHORC3^^0
"BLD",5078,"KRN",19,"NM",171,0)
FHORC4^^0
"BLD",5078,"KRN",19,"NM",172,0)
FHORC5^^0
"BLD",5078,"KRN",19,"NM",173,0)
FHORC6^^0
"BLD",5078,"KRN",19,"NM",174,0)
FHORC7^^0
"BLD",5078,"KRN",19,"NM",175,0)
FHORC8^^0
"BLD",5078,"KRN",19,"NM",176,0)
FHORC9^^0
"BLD",5078,"KRN",19,"NM",177,0)
FHORCM^^0
"BLD",5078,"KRN",19,"NM",178,0)
FHORCX^^0
"BLD",5078,"KRN",19,"NM",179,0)
FHORD1^^0
"BLD",5078,"KRN",19,"NM",180,0)
FHORD10^^0
"BLD",5078,"KRN",19,"NM",181,0)
FHORD11^^0
"BLD",5078,"KRN",19,"NM",182,0)
FHORD12^^0
"BLD",5078,"KRN",19,"NM",183,0)
FHORD13^^0
"BLD",5078,"KRN",19,"NM",184,0)
FHORD14^^0
"BLD",5078,"KRN",19,"NM",185,0)
FHORD15^^0
"BLD",5078,"KRN",19,"NM",186,0)
FHORD2^^0
"BLD",5078,"KRN",19,"NM",187,0)
FHORD3^^0
"BLD",5078,"KRN",19,"NM",188,0)
FHORD4^^0
"BLD",5078,"KRN",19,"NM",189,0)
FHORD41^^0
"BLD",5078,"KRN",19,"NM",190,0)
FHORD5^^0
"BLD",5078,"KRN",19,"NM",191,0)
FHORD6^^0
"BLD",5078,"KRN",19,"NM",192,0)
FHORD7^^0
"BLD",5078,"KRN",19,"NM",193,0)
FHORD9^^0
"BLD",5078,"KRN",19,"NM",194,0)
FHORDM^^0
"BLD",5078,"KRN",19,"NM",195,0)
FHORDX^^0
"BLD",5078,"KRN",19,"NM",196,0)
FHOREL1^^0
"BLD",5078,"KRN",19,"NM",197,0)
FHOREL2^^0
"BLD",5078,"KRN",19,"NM",198,0)
FHOREL3^^0
"BLD",5078,"KRN",19,"NM",199,0)
FHORI1^^0
"BLD",5078,"KRN",19,"NM",200,0)
FHORI2^^0
"BLD",5078,"KRN",19,"NM",201,0)
FHORO1^^0
"BLD",5078,"KRN",19,"NM",202,0)
FHORT5S^^0
"BLD",5078,"KRN",19,"NM",203,0)
FHORTF1^^0
"BLD",5078,"KRN",19,"NM",204,0)
FHORTF2^^0
"BLD",5078,"KRN",19,"NM",205,0)
FHORTF3^^0
"BLD",5078,"KRN",19,"NM",206,0)
FHORTF4^^0
"BLD",5078,"KRN",19,"NM",207,0)
FHORTF5^^0
"BLD",5078,"KRN",19,"NM",208,0)
FHORTF5C^^0
"BLD",5078,"KRN",19,"NM",209,0)
FHORTF5L^^0
"BLD",5078,"KRN",19,"NM",210,0)
FHORTF5P^^0
"BLD",5078,"KRN",19,"NM",211,0)
FHORTFM^^0
"BLD",5078,"KRN",19,"NM",212,0)
FHORX2^^0
"BLD",5078,"KRN",19,"NM",213,0)
FHPATM^^0
"BLD",5078,"KRN",19,"NM",214,0)
FHPATP^^0
"BLD",5078,"KRN",19,"NM",215,0)
FHPRC1^^0
"BLD",5078,"KRN",19,"NM",216,0)
FHPRC10^^0
"BLD",5078,"KRN",19,"NM",217,0)
FHPRC11^^0
"BLD",5078,"KRN",19,"NM",218,0)
FHPRC12^^0
"BLD",5078,"KRN",19,"NM",219,0)
FHPRC13^^0
"BLD",5078,"KRN",19,"NM",220,0)
FHPRC14^^0
"BLD",5078,"KRN",19,"NM",221,0)
FHPRC2^^0
"BLD",5078,"KRN",19,"NM",222,0)
FHPRC3^^0
"BLD",5078,"KRN",19,"NM",223,0)
FHPRC4^^0
"BLD",5078,"KRN",19,"NM",224,0)
FHPRC5^^0
"BLD",5078,"KRN",19,"NM",225,0)
FHPRC6^^0
"BLD",5078,"KRN",19,"NM",226,0)
FHPRC7^^0
"BLD",5078,"KRN",19,"NM",227,0)
FHPRC8^^0
"BLD",5078,"KRN",19,"NM",228,0)
FHPRC9^^0
"BLD",5078,"KRN",19,"NM",229,0)
FHPRCM^^0
"BLD",5078,"KRN",19,"NM",230,0)
FHPRF1^^0
"BLD",5078,"KRN",19,"NM",231,0)
FHPRF2^^0
"BLD",5078,"KRN",19,"NM",232,0)
FHPRF4^^0
"BLD",5078,"KRN",19,"NM",233,0)
FHPRF5^^0
"BLD",5078,"KRN",19,"NM",234,0)
FHPRF6^^0
"BLD",5078,"KRN",19,"NM",235,0)
FHPRFM^^0
"BLD",5078,"KRN",19,"NM",236,0)
FHPRG^^0
"BLD",5078,"KRN",19,"NM",237,0)
FHPRO^^0
"BLD",5078,"KRN",19,"NM",238,0)
FHPRO10^^0
"BLD",5078,"KRN",19,"NM",239,0)
FHPRO11^^0
"BLD",5078,"KRN",19,"NM",240,0)
FHPRO2^^0
"BLD",5078,"KRN",19,"NM",241,0)
FHPRO3^^0
"BLD",5078,"KRN",19,"NM",242,0)
FHPRO4^^0
"BLD",5078,"KRN",19,"NM",243,0)
FHPRO5^^0
"BLD",5078,"KRN",19,"NM",244,0)
FHPRO6^^0
"BLD",5078,"KRN",19,"NM",245,0)
FHPRO7^^0
"BLD",5078,"KRN",19,"NM",246,0)
FHPRO8^^0
"BLD",5078,"KRN",19,"NM",247,0)
FHPRO9^^0
"BLD",5078,"KRN",19,"NM",248,0)
FHPROM^^0
"BLD",5078,"KRN",19,"NM",249,0)
FHPRR1^^0
"BLD",5078,"KRN",19,"NM",250,0)
FHPURGE^^0
"BLD",5078,"KRN",19,"NM",251,0)
FHREC1^^0
"BLD",5078,"KRN",19,"NM",252,0)
FHREC10^^0
"BLD",5078,"KRN",19,"NM",253,0)
FHREC11^^0
"BLD",5078,"KRN",19,"NM",254,0)
FHREC12^^0
"BLD",5078,"KRN",19,"NM",255,0)
FHREC13^^0
"BLD",5078,"KRN",19,"NM",256,0)
FHREC2^^0
"BLD",5078,"KRN",19,"NM",257,0)
FHREC3^^0
"BLD",5078,"KRN",19,"NM",258,0)
FHREC4^^0
"BLD",5078,"KRN",19,"NM",259,0)
FHREC5^^0
"BLD",5078,"KRN",19,"NM",260,0)
FHREC6^^0
"BLD",5078,"KRN",19,"NM",261,0)
FHREC7^^0
"BLD",5078,"KRN",19,"NM",262,0)
FHREC8^^0
"BLD",5078,"KRN",19,"NM",263,0)
FHREC9^^0
"BLD",5078,"KRN",19,"NM",264,0)
FHRECM^^0
"BLD",5078,"KRN",19,"NM",265,0)
FHSEL1^^0
"BLD",5078,"KRN",19,"NM",266,0)
FHSEL2^^0
"BLD",5078,"KRN",19,"NM",267,0)
FHSEL3^^0
"BLD",5078,"KRN",19,"NM",268,0)
FHSEL4^^0
"BLD",5078,"KRN",19,"NM",269,0)
FHSEL5^^0
"BLD",5078,"KRN",19,"NM",270,0)
FHSELM^^0
"BLD",5078,"KRN",19,"NM",271,0)
FHSELX^^0
"BLD",5078,"KRN",19,"NM",272,0)
FHSITE^^0
"BLD",5078,"KRN",19,"NM",273,0)
FHSP1^^0
"BLD",5078,"KRN",19,"NM",274,0)
FHSP2^^0
"BLD",5078,"KRN",19,"NM",275,0)
FHSP3^^0
"BLD",5078,"KRN",19,"NM",276,0)
FHSP4^^0
"BLD",5078,"KRN",19,"NM",277,0)
FHSP5^^0
"BLD",5078,"KRN",19,"NM",278,0)
FHSP7^^0
"BLD",5078,"KRN",19,"NM",279,0)
FHSP8^^0
"BLD",5078,"KRN",19,"NM",280,0)
FHSPM^^0
"BLD",5078,"KRN",19,"NM",281,0)
FHSPX^^0
"BLD",5078,"KRN",19,"NM",282,0)
FHSYP1^^0
"BLD",5078,"KRN",19,"NM",283,0)
FHSYP2^^0
"BLD",5078,"KRN",19,"NM",284,0)
FHSYSM^^0
"BLD",5078,"KRN",19,"NM",285,0)
FHTECH^^0
"BLD",5078,"KRN",19,"NM",286,0)
FHUSR^^0
"BLD",5078,"KRN",19,"NM",287,0)
FHWARD^^0
"BLD",5078,"KRN",19,"NM",288,0)
FHX1^^0
"BLD",5078,"KRN",19,"NM",289,0)
FHX2^^0
"BLD",5078,"KRN",19,"NM",290,0)
FHX3^^0
"BLD",5078,"KRN",19,"NM",291,0)
FHX4^^0
"BLD",5078,"KRN",19,"NM",292,0)
FHX5^^0
"BLD",5078,"KRN",19,"NM",293,0)
GMRA PATIENT A/AR EDIT^^0
"BLD",5078,"KRN",19,"NM","B","FH GECS BATCH",1)

"BLD",5078,"KRN",19,"NM","B","FH GECS BATCH EDIT",2)

"BLD",5078,"KRN",19,"NM","B","FH GECS BATCHES STATUS",3)

"BLD",5078,"KRN",19,"NM","B","FH GECS BATCHES WAITING TRANS",4)

"BLD",5078,"KRN",19,"NM","B","FH GECS CODE EDIT",5)

"BLD",5078,"KRN",19,"NM","B","FH GECS CREATE",6)

"BLD",5078,"KRN",19,"NM","B","FH GECS DELETE",7)

"BLD",5078,"KRN",19,"NM","B","FH GECS KEYPUNCH",8)

"BLD",5078,"KRN",19,"NM","B","FH GECS MAIN MENU",9)

"BLD",5078,"KRN",19,"NM","B","FH GECS MAINTENANCE USER MENU",10)

"BLD",5078,"KRN",19,"NM","B","FH GECS PURGE",11)

"BLD",5078,"KRN",19,"NM","B","FH GECS READY FOR BATCHING LIS",12)

"BLD",5078,"KRN",19,"NM","B","FH GECS REBATCH",13)

"BLD",5078,"KRN",19,"NM","B","FH GECS REPORTS MENU",14)

"BLD",5078,"KRN",19,"NM","B","FH GECS RETRANSMIT",15)

"BLD",5078,"KRN",19,"NM","B","FH GECS REVIEW CODE SHEET",16)

"BLD",5078,"KRN",19,"NM","B","FH GECS TRANSMIT",17)

"BLD",5078,"KRN",19,"NM","B","FH GECS TRANSMIT USER",18)

"BLD",5078,"KRN",19,"NM","B","FH GECS USER MENU",19)

"BLD",5078,"KRN",19,"NM","B","FHADM",20)

"BLD",5078,"KRN",19,"NM","B","FHADMR",21)

"BLD",5078,"KRN",19,"NM","B","FHADMR1",22)

"BLD",5078,"KRN",19,"NM","B","FHADMR2",23)

"BLD",5078,"KRN",19,"NM","B","FHADMR2A",24)

"BLD",5078,"KRN",19,"NM","B","FHADMR3",25)

"BLD",5078,"KRN",19,"NM","B","FHADMR4",26)

"BLD",5078,"KRN",19,"NM","B","FHADMR5",27)

"BLD",5078,"KRN",19,"NM","B","FHADMR8",28)

"BLD",5078,"KRN",19,"NM","B","FHADR1",29)

"BLD",5078,"KRN",19,"NM","B","FHADR2",30)

"BLD",5078,"KRN",19,"NM","B","FHADR3",31)

"BLD",5078,"KRN",19,"NM","B","FHADR4",32)

"BLD",5078,"KRN",19,"NM","B","FHADR5",33)

"BLD",5078,"KRN",19,"NM","B","FHADR6",34)

"BLD",5078,"KRN",19,"NM","B","FHADR7",35)

"BLD",5078,"KRN",19,"NM","B","FHADR8",36)

"BLD",5078,"KRN",19,"NM","B","FHADR9",37)

"BLD",5078,"KRN",19,"NM","B","FHADRP",38)

"BLD",5078,"KRN",19,"NM","B","FHADRR",39)

"BLD",5078,"KRN",19,"NM","B","FHADRS",40)

"BLD",5078,"KRN",19,"NM","B","FHASC1",41)

"BLD",5078,"KRN",19,"NM","B","FHASC10",42)

"BLD",5078,"KRN",19,"NM","B","FHASC2",43)

"BLD",5078,"KRN",19,"NM","B","FHASC4",44)

"BLD",5078,"KRN",19,"NM","B","FHASC8",45)

"BLD",5078,"KRN",19,"NM","B","FHASC9",46)

"BLD",5078,"KRN",19,"NM","B","FHASCM",47)

"BLD",5078,"KRN",19,"NM","B","FHASCX",48)

"BLD",5078,"KRN",19,"NM","B","FHASE1",49)

"BLD",5078,"KRN",19,"NM","B","FHASE2",50)

"BLD",5078,"KRN",19,"NM","B","FHASE3",51)

"BLD",5078,"KRN",19,"NM","B","FHASE4",52)

"BLD",5078,"KRN",19,"NM","B","FHASE5",53)

"BLD",5078,"KRN",19,"NM","B","FHASE6",54)

"BLD",5078,"KRN",19,"NM","B","FHASE7",55)

"BLD",5078,"KRN",19,"NM","B","FHASM1",56)

"BLD",5078,"KRN",19,"NM","B","FHASMR",57)

"BLD",5078,"KRN",19,"NM","B","FHASNR",58)

"BLD",5078,"KRN",19,"NM","B","FHASNR2",59)

"BLD",5078,"KRN",19,"NM","B","FHASNR3",60)

"BLD",5078,"KRN",19,"NM","B","FHASNR4",61)

"BLD",5078,"KRN",19,"NM","B","FHASNR5",62)

"BLD",5078,"KRN",19,"NM","B","FHASNRR",63)

"BLD",5078,"KRN",19,"NM","B","FHASP1",64)

"BLD",5078,"KRN",19,"NM","B","FHASXR",65)

"BLD",5078,"KRN",19,"NM","B","FHBIR",66)

"BLD",5078,"KRN",19,"NM","B","FHBUD",67)

"BLD",5078,"KRN",19,"NM","B","FHCDLST",68)

"BLD",5078,"KRN",19,"NM","B","FHCMRR1",69)

"BLD",5078,"KRN",19,"NM","B","FHCMRR2",70)

"BLD",5078,"KRN",19,"NM","B","FHCTF",71)

"BLD",5078,"KRN",19,"NM","B","FHCTF1",72)

"BLD",5078,"KRN",19,"NM","B","FHCTF2",73)

"BLD",5078,"KRN",19,"NM","B","FHCTF3",74)

"BLD",5078,"KRN",19,"NM","B","FHCTF5",75)

"BLD",5078,"KRN",19,"NM","B","FHDCRP",76)

"BLD",5078,"KRN",19,"NM","B","FHDIET",77)

"BLD",5078,"KRN",19,"NM","B","FHDMP",78)

"BLD",5078,"KRN",19,"NM","B","FHFIL1",79)

"BLD",5078,"KRN",19,"NM","B","FHFIL2",80)

"BLD",5078,"KRN",19,"NM","B","FHFIL3",81)

"BLD",5078,"KRN",19,"NM","B","FHFIL4",82)

"BLD",5078,"KRN",19,"NM","B","FHFILM",83)

"BLD",5078,"KRN",19,"NM","B","FHING1",84)

"BLD",5078,"KRN",19,"NM","B","FHING10",85)

"BLD",5078,"KRN",19,"NM","B","FHING11",86)

"BLD",5078,"KRN",19,"NM","B","FHING12",87)

"BLD",5078,"KRN",19,"NM","B","FHING13",88)

"BLD",5078,"KRN",19,"NM","B","FHING2",89)

"BLD",5078,"KRN",19,"NM","B","FHING3",90)

"BLD",5078,"KRN",19,"NM","B","FHING4",91)

"BLD",5078,"KRN",19,"NM","B","FHING5",92)

"BLD",5078,"KRN",19,"NM","B","FHING51",93)

"BLD",5078,"KRN",19,"NM","B","FHING52",94)

"BLD",5078,"KRN",19,"NM","B","FHING6",95)

"BLD",5078,"KRN",19,"NM","B","FHING7",96)

"BLD",5078,"KRN",19,"NM","B","FHING8",97)

"BLD",5078,"KRN",19,"NM","B","FHING9",98)

"BLD",5078,"KRN",19,"NM","B","FHINGM",99)

"BLD",5078,"KRN",19,"NM","B","FHMGR",100)

"BLD",5078,"KRN",19,"NM","B","FHMGRA",101)

"BLD",5078,"KRN",19,"NM","B","FHMGRC",102)

"BLD",5078,"KRN",19,"NM","B","FHMGROM",103)

"BLD",5078,"KRN",19,"NM","B","FHMNADM",104)

"BLD",5078,"KRN",19,"NM","B","FHMNBRPT",105)

"BLD",5078,"KRN",19,"NM","B","FHMNINQ",106)

"BLD",5078,"KRN",19,"NM","B","FHMNREP",107)

"BLD",5078,"KRN",19,"NM","B","FHMTKE",108)

"BLD",5078,"KRN",19,"NM","B","FHMTKH",109)

"BLD",5078,"KRN",19,"NM","B","FHMTKM",110)

"BLD",5078,"KRN",19,"NM","B","FHMTKMM",111)

"BLD",5078,"KRN",19,"NM","B","FHMTKN",112)

"BLD",5078,"KRN",19,"NM","B","FHMTKP",113)

"BLD",5078,"KRN",19,"NM","B","FHMTKS",114)

"BLD",5078,"KRN",19,"NM","B","FHMTKT",115)

"BLD",5078,"KRN",19,"NM","B","FHMTKTR",116)

"BLD",5078,"KRN",19,"NM","B","FHNO10",117)

"BLD",5078,"KRN",19,"NM","B","FHNO11",118)

"BLD",5078,"KRN",19,"NM","B","FHNO12",119)

"BLD",5078,"KRN",19,"NM","B","FHNO1E",120)

"BLD",5078,"KRN",19,"NM","B","FHNO1I",121)

"BLD",5078,"KRN",19,"NM","B","FHNO2",122)

"BLD",5078,"KRN",19,"NM","B","FHNO3",123)

"BLD",5078,"KRN",19,"NM","B","FHNO4",124)

"BLD",5078,"KRN",19,"NM","B","FHNO5",125)

"BLD",5078,"KRN",19,"NM","B","FHNO6",126)

"BLD",5078,"KRN",19,"NM","B","FHNO7",127)

"BLD",5078,"KRN",19,"NM","B","FHNO8",128)

"BLD",5078,"KRN",19,"NM","B","FHNO9",129)

"BLD",5078,"KRN",19,"NM","B","FHNOM",130)

"BLD",5078,"KRN",19,"NM","B","FHNOX",131)

"BLD",5078,"KRN",19,"NM","B","FHNU11",132)

"BLD",5078,"KRN",19,"NM","B","FHNU12",133)

"BLD",5078,"KRN",19,"NM","B","FHNU1D",134)

"BLD",5078,"KRN",19,"NM","B","FHNU1P",135)

"BLD",5078,"KRN",19,"NM","B","FHNU2",136)

"BLD",5078,"KRN",19,"NM","B","FHNU3",137)

"BLD",5078,"KRN",19,"NM","B","FHNU4",138)

"BLD",5078,"KRN",19,"NM","B","FHNU5",139)

"BLD",5078,"KRN",19,"NM","B","FHNU6",140)

"BLD",5078,"KRN",19,"NM","B","FHNU7",141)

"BLD",5078,"KRN",19,"NM","B","FHNU8",142)

"BLD",5078,"KRN",19,"NM","B","FHNU9",143)

"BLD",5078,"KRN",19,"NM","B","FHNUM",144)

"BLD",5078,"KRN",19,"NM","B","FHNUX",145)

"BLD",5078,"KRN",19,"NM","B","FHOMGMGR",146)

"BLD",5078,"KRN",19,"NM","B","FHOMGP",147)

"BLD",5078,"KRN",19,"NM","B","FHOMGR",148)

"BLD",5078,"KRN",19,"NM","B","FHOMIP",149)

"BLD",5078,"KRN",19,"NM","B","FHOMRA",150)

"BLD",5078,"KRN",19,"NM","B","FHOMRAC",151)

"BLD",5078,"KRN",19,"NM","B","FHOMRC",152)

"BLD",5078,"KRN",19,"NM","B","FHOMRE",153)

"BLD",5078,"KRN",19,"NM","B","FHOMREC",154)

"BLD",5078,"KRN",19,"NM","B","FHOMRMGR",155)

"BLD",5078,"KRN",19,"NM","B","FHOMRO",156)

"BLD",5078,"KRN",19,"NM","B","FHOMRP",157)

"BLD",5078,"KRN",19,"NM","B","FHOMRR",158)

"BLD",5078,"KRN",19,"NM","B","FHOMRT",159)

"BLD",5078,"KRN",19,"NM","B","FHOMRTC",160)

"BLD",5078,"KRN",19,"NM","B","FHOMSA",161)

"BLD",5078,"KRN",19,"NM","B","FHOMSC",162)

"BLD",5078,"KRN",19,"NM","B","FHOMSMGR",163)

"BLD",5078,"KRN",19,"NM","B","FHOMSP",164)

"BLD",5078,"KRN",19,"NM","B","FHOMSR",165)

"BLD",5078,"KRN",19,"NM","B","FHOMSS",166)

"BLD",5078,"KRN",19,"NM","B","FHORC1",167)

"BLD",5078,"KRN",19,"NM","B","FHORC10",168)

"BLD",5078,"KRN",19,"NM","B","FHORC2",169)

"BLD",5078,"KRN",19,"NM","B","FHORC3",170)

"BLD",5078,"KRN",19,"NM","B","FHORC4",171)

"BLD",5078,"KRN",19,"NM","B","FHORC5",172)

"BLD",5078,"KRN",19,"NM","B","FHORC6",173)

"BLD",5078,"KRN",19,"NM","B","FHORC7",174)

"BLD",5078,"KRN",19,"NM","B","FHORC8",175)

"BLD",5078,"KRN",19,"NM","B","FHORC9",176)

"BLD",5078,"KRN",19,"NM","B","FHORCM",177)

"BLD",5078,"KRN",19,"NM","B","FHORCX",178)

"BLD",5078,"KRN",19,"NM","B","FHORD1",179)

"BLD",5078,"KRN",19,"NM","B","FHORD10",180)

"BLD",5078,"KRN",19,"NM","B","FHORD11",181)

"BLD",5078,"KRN",19,"NM","B","FHORD12",182)

"BLD",5078,"KRN",19,"NM","B","FHORD13",183)

"BLD",5078,"KRN",19,"NM","B","FHORD14",184)

"BLD",5078,"KRN",19,"NM","B","FHORD15",185)

"BLD",5078,"KRN",19,"NM","B","FHORD2",186)

"BLD",5078,"KRN",19,"NM","B","FHORD3",187)

"BLD",5078,"KRN",19,"NM","B","FHORD4",188)

"BLD",5078,"KRN",19,"NM","B","FHORD41",189)

"BLD",5078,"KRN",19,"NM","B","FHORD5",190)

"BLD",5078,"KRN",19,"NM","B","FHORD6",191)

"BLD",5078,"KRN",19,"NM","B","FHORD7",192)

"BLD",5078,"KRN",19,"NM","B","FHORD9",193)

"BLD",5078,"KRN",19,"NM","B","FHORDM",194)

"BLD",5078,"KRN",19,"NM","B","FHORDX",195)

"BLD",5078,"KRN",19,"NM","B","FHOREL1",196)

"BLD",5078,"KRN",19,"NM","B","FHOREL2",197)

"BLD",5078,"KRN",19,"NM","B","FHOREL3",198)

"BLD",5078,"KRN",19,"NM","B","FHORI1",199)

"BLD",5078,"KRN",19,"NM","B","FHORI2",200)

"BLD",5078,"KRN",19,"NM","B","FHORO1",201)

"BLD",5078,"KRN",19,"NM","B","FHORT5S",202)

"BLD",5078,"KRN",19,"NM","B","FHORTF1",203)

"BLD",5078,"KRN",19,"NM","B","FHORTF2",204)

"BLD",5078,"KRN",19,"NM","B","FHORTF3",205)

"BLD",5078,"KRN",19,"NM","B","FHORTF4",206)

"BLD",5078,"KRN",19,"NM","B","FHORTF5",207)

"BLD",5078,"KRN",19,"NM","B","FHORTF5C",208)

"BLD",5078,"KRN",19,"NM","B","FHORTF5L",209)

"BLD",5078,"KRN",19,"NM","B","FHORTF5P",210)

"BLD",5078,"KRN",19,"NM","B","FHORTFM",211)

"BLD",5078,"KRN",19,"NM","B","FHORX2",212)

"BLD",5078,"KRN",19,"NM","B","FHPATM",213)

"BLD",5078,"KRN",19,"NM","B","FHPATP",214)

"BLD",5078,"KRN",19,"NM","B","FHPRC1",215)

"BLD",5078,"KRN",19,"NM","B","FHPRC10",216)

"BLD",5078,"KRN",19,"NM","B","FHPRC11",217)

"BLD",5078,"KRN",19,"NM","B","FHPRC12",218)

"BLD",5078,"KRN",19,"NM","B","FHPRC13",219)

"BLD",5078,"KRN",19,"NM","B","FHPRC14",220)

"BLD",5078,"KRN",19,"NM","B","FHPRC2",221)

"BLD",5078,"KRN",19,"NM","B","FHPRC3",222)

"BLD",5078,"KRN",19,"NM","B","FHPRC4",223)

"BLD",5078,"KRN",19,"NM","B","FHPRC5",224)

"BLD",5078,"KRN",19,"NM","B","FHPRC6",225)

"BLD",5078,"KRN",19,"NM","B","FHPRC7",226)

"BLD",5078,"KRN",19,"NM","B","FHPRC8",227)

"BLD",5078,"KRN",19,"NM","B","FHPRC9",228)

"BLD",5078,"KRN",19,"NM","B","FHPRCM",229)

"BLD",5078,"KRN",19,"NM","B","FHPRF1",230)

"BLD",5078,"KRN",19,"NM","B","FHPRF2",231)

"BLD",5078,"KRN",19,"NM","B","FHPRF4",232)

"BLD",5078,"KRN",19,"NM","B","FHPRF5",233)

"BLD",5078,"KRN",19,"NM","B","FHPRF6",234)

"BLD",5078,"KRN",19,"NM","B","FHPRFM",235)

"BLD",5078,"KRN",19,"NM","B","FHPRG",236)

"BLD",5078,"KRN",19,"NM","B","FHPRO",237)

"BLD",5078,"KRN",19,"NM","B","FHPRO10",238)

"BLD",5078,"KRN",19,"NM","B","FHPRO11",239)

"BLD",5078,"KRN",19,"NM","B","FHPRO2",240)

"BLD",5078,"KRN",19,"NM","B","FHPRO3",241)

"BLD",5078,"KRN",19,"NM","B","FHPRO4",242)

"BLD",5078,"KRN",19,"NM","B","FHPRO5",243)

"BLD",5078,"KRN",19,"NM","B","FHPRO6",244)

"BLD",5078,"KRN",19,"NM","B","FHPRO7",245)

"BLD",5078,"KRN",19,"NM","B","FHPRO8",246)

"BLD",5078,"KRN",19,"NM","B","FHPRO9",247)

"BLD",5078,"KRN",19,"NM","B","FHPROM",248)

"BLD",5078,"KRN",19,"NM","B","FHPRR1",249)

"BLD",5078,"KRN",19,"NM","B","FHPURGE",250)

"BLD",5078,"KRN",19,"NM","B","FHREC1",251)

"BLD",5078,"KRN",19,"NM","B","FHREC10",252)

"BLD",5078,"KRN",19,"NM","B","FHREC11",253)

"BLD",5078,"KRN",19,"NM","B","FHREC12",254)

"BLD",5078,"KRN",19,"NM","B","FHREC13",255)

"BLD",5078,"KRN",19,"NM","B","FHREC2",256)

"BLD",5078,"KRN",19,"NM","B","FHREC3",257)

"BLD",5078,"KRN",19,"NM","B","FHREC4",258)

"BLD",5078,"KRN",19,"NM","B","FHREC5",259)

"BLD",5078,"KRN",19,"NM","B","FHREC6",260)

"BLD",5078,"KRN",19,"NM","B","FHREC7",261)

"BLD",5078,"KRN",19,"NM","B","FHREC8",262)

"BLD",5078,"KRN",19,"NM","B","FHREC9",263)

"BLD",5078,"KRN",19,"NM","B","FHRECM",264)

"BLD",5078,"KRN",19,"NM","B","FHSEL1",265)

"BLD",5078,"KRN",19,"NM","B","FHSEL2",266)

"BLD",5078,"KRN",19,"NM","B","FHSEL3",267)

"BLD",5078,"KRN",19,"NM","B","FHSEL4",268)

"BLD",5078,"KRN",19,"NM","B","FHSEL5",269)

"BLD",5078,"KRN",19,"NM","B","FHSELM",270)

"BLD",5078,"KRN",19,"NM","B","FHSELX",271)

"BLD",5078,"KRN",19,"NM","B","FHSITE",272)

"BLD",5078,"KRN",19,"NM","B","FHSP1",273)

"BLD",5078,"KRN",19,"NM","B","FHSP2",274)

"BLD",5078,"KRN",19,"NM","B","FHSP3",275)

"BLD",5078,"KRN",19,"NM","B","FHSP4",276)

"BLD",5078,"KRN",19,"NM","B","FHSP5",277)

"BLD",5078,"KRN",19,"NM","B","FHSP7",278)

"BLD",5078,"KRN",19,"NM","B","FHSP8",279)

"BLD",5078,"KRN",19,"NM","B","FHSPM",280)

"BLD",5078,"KRN",19,"NM","B","FHSPX",281)

"BLD",5078,"KRN",19,"NM","B","FHSYP1",282)

"BLD",5078,"KRN",19,"NM","B","FHSYP2",283)

"BLD",5078,"KRN",19,"NM","B","FHSYSM",284)

"BLD",5078,"KRN",19,"NM","B","FHTECH",285)

"BLD",5078,"KRN",19,"NM","B","FHUSR",286)

"BLD",5078,"KRN",19,"NM","B","FHWARD",287)

"BLD",5078,"KRN",19,"NM","B","FHX1",288)

"BLD",5078,"KRN",19,"NM","B","FHX2",289)

"BLD",5078,"KRN",19,"NM","B","FHX3",290)

"BLD",5078,"KRN",19,"NM","B","FHX4",291)

"BLD",5078,"KRN",19,"NM","B","FHX5",292)

"BLD",5078,"KRN",19,"NM","B","GMRA PATIENT A/AR EDIT",293)

"BLD",5078,"KRN",19.1,0)
19.1
"BLD",5078,"KRN",19.1,"NM",0)
^9.68A^3^3
"BLD",5078,"KRN",19.1,"NM",1,0)
FHAUTH^^0
"BLD",5078,"KRN",19.1,"NM",2,0)
FHMGR^^0
"BLD",5078,"KRN",19.1,"NM",3,0)
FHWARD^^0
"BLD",5078,"KRN",19.1,"NM","B","FHAUTH",1)

"BLD",5078,"KRN",19.1,"NM","B","FHMGR",2)

"BLD",5078,"KRN",19.1,"NM","B","FHWARD",3)

"BLD",5078,"KRN",101,0)
101
"BLD",5078,"KRN",101,"NM",0)
^9.68A^33^17
"BLD",5078,"KRN",101,"NM",1,0)
FH EVSEND OR^^3
"BLD",5078,"KRN",101,"NM",2,0)
FH ORDERABLE ITEM UPDATE^^3
"BLD",5078,"KRN",101,"NM",3,0)
FH RECEIVE^^0
"BLD",5078,"KRN",101,"NM",4,0)
FH SIGNED REACTION CANCEL^^0
"BLD",5078,"KRN",101,"NM",5,0)
FH SIGNED REACTION INTERFACE^^0
"BLD",5078,"KRN",101,"NM",6,0)
FHW1^^0
"BLD",5078,"KRN",101,"NM",7,0)
FHW2^^0
"BLD",5078,"KRN",101,"NM",8,0)
FHW3^^0
"BLD",5078,"KRN",101,"NM",9,0)
FHW4^^0
"BLD",5078,"KRN",101,"NM",10,0)
FHW6^^0
"BLD",5078,"KRN",101,"NM",11,0)
FHW7^^0
"BLD",5078,"KRN",101,"NM",12,0)
FHW8^^0
"BLD",5078,"KRN",101,"NM",29,0)
FHWMAS^^0
"BLD",5078,"KRN",101,"NM",30,0)
FHWMENU^^0
"BLD",5078,"KRN",101,"NM",31,0)
FHWN1^^0
"BLD",5078,"KRN",101,"NM",32,0)
FHWN2^^0
"BLD",5078,"KRN",101,"NM",33,0)
FHWPRO1^^0
"BLD",5078,"KRN",101,"NM","B","FH EVSEND OR",1)

"BLD",5078,"KRN",101,"NM","B","FH ORDERABLE ITEM UPDATE",2)

"BLD",5078,"KRN",101,"NM","B","FH RECEIVE",3)

"BLD",5078,"KRN",101,"NM","B","FH SIGNED REACTION CANCEL",4)

"BLD",5078,"KRN",101,"NM","B","FH SIGNED REACTION INTERFACE",5)

"BLD",5078,"KRN",101,"NM","B","FHW1",6)

"BLD",5078,"KRN",101,"NM","B","FHW2",7)

"BLD",5078,"KRN",101,"NM","B","FHW3",8)

"BLD",5078,"KRN",101,"NM","B","FHW4",9)

"BLD",5078,"KRN",101,"NM","B","FHW6",10)

"BLD",5078,"KRN",101,"NM","B","FHW7",11)

"BLD",5078,"KRN",101,"NM","B","FHW8",12)

"BLD",5078,"KRN",101,"NM","B","FHWMAS",29)

"BLD",5078,"KRN",101,"NM","B","FHWMENU",30)

"BLD",5078,"KRN",101,"NM","B","FHWN1",31)

"BLD",5078,"KRN",101,"NM","B","FHWN2",32)

"BLD",5078,"KRN",101,"NM","B","FHWPRO1",33)

"BLD",5078,"KRN",409.61,0)
409.61
"BLD",5078,"KRN",771,0)
771
"BLD",5078,"KRN",870,0)
870
"BLD",5078,"KRN",8989.51,0)
8989.51
"BLD",5078,"KRN",8989.52,0)
8989.52
"BLD",5078,"KRN",8994,0)
8994
"BLD",5078,"KRN","B",.4,.4)

"BLD",5078,"KRN","B",.401,.401)

"BLD",5078,"KRN","B",.402,.402)

"BLD",5078,"KRN","B",.403,.403)

"BLD",5078,"KRN","B",.5,.5)

"BLD",5078,"KRN","B",.84,.84)

"BLD",5078,"KRN","B",3.6,3.6)

"BLD",5078,"KRN","B",3.8,3.8)

"BLD",5078,"KRN","B",9.2,9.2)

"BLD",5078,"KRN","B",9.8,9.8)

"BLD",5078,"KRN","B",19,19)

"BLD",5078,"KRN","B",19.1,19.1)

"BLD",5078,"KRN","B",101,101)

"BLD",5078,"KRN","B",409.61,409.61)

"BLD",5078,"KRN","B",771,771)

"BLD",5078,"KRN","B",870,870)

"BLD",5078,"KRN","B",8989.51,8989.51)

"BLD",5078,"KRN","B",8989.52,8989.52)

"BLD",5078,"KRN","B",8994,8994)

"BLD",5078,"QUES",0)
^9.62^^
"BLD",5078,"REQB",0)
^9.611^1^1
"BLD",5078,"REQB",1,0)
FH*5.0*41^1
"BLD",5078,"REQB","B","FH*5.0*41",1)

"FIA",111)
DIETS
"FIA",111,0)
^FH(111,
"FIA",111,0,0)
111sI
"FIA",111,0,1)
y^y^f^^^^n
"FIA",111,0,10)

"FIA",111,0,11)

"FIA",111,0,"RLRO")

"FIA",111,0,"VR")
5.5^DIETETICS
"FIA",111,111)
0
"FIA",111,111.01)
0
"FIA",111.1)
DIET PATTERNS
"FIA",111.1,0)
^FH(111.1,
"FIA",111.1,0,0)
111.1sI
"FIA",111.1,0,1)
y^y^f^^^^n
"FIA",111.1,0,10)

"FIA",111.1,0,11)

"FIA",111.1,0,"RLRO")

"FIA",111.1,0,"VR")
5.5^DIETETICS
"FIA",111.1,111.1)
0
"FIA",111.1,111.11)
0
"FIA",111.1,111.115)
0
"FIA",111.1,111.116)
0
"FIA",111.1,111.117)
0
"FIA",111.1,111.119)
0
"FIA",111.1,111.12)
0
"FIA",111.1,111.13)
0
"FIA",112)
FOOD NUTRIENTS
"FIA",112,0)
^FHNU(
"FIA",112,0,0)
112sI
"FIA",112,0,1)
y^y^f^^^^n
"FIA",112,0,10)

"FIA",112,0,11)

"FIA",112,0,"RLRO")

"FIA",112,0,"VR")
5.5^DIETETICS
"FIA",112,112)
0
"FIA",112.2)
DRI VALUES
"FIA",112.2,0)
^FH(112.2,
"FIA",112.2,0,0)
112.2
"FIA",112.2,0,1)
y^y^f^^^^n
"FIA",112.2,0,10)

"FIA",112.2,0,11)

"FIA",112.2,0,"RLRO")

"FIA",112.2,0,"VR")
5.5^DIETETICS
"FIA",112.2,112.2)
0
"FIA",112.6)
USER MENU
"FIA",112.6,0)
^FHUM(
"FIA",112.6,0,0)
112.6I
"FIA",112.6,0,1)
y^y^f^^^^n
"FIA",112.6,0,10)

"FIA",112.6,0,11)

"FIA",112.6,0,"RLRO")

"FIA",112.6,0,"VR")
5.5^DIETETICS
"FIA",112.6,112.6)
0
"FIA",112.6,112.61)
0
"FIA",112.6,112.62)
0
"FIA",112.6,112.63)
0
"FIA",112.6,112.64)
0
"FIA",113)
INGREDIENT
"FIA",113,0)
^FHING(
"FIA",113,0,0)
113sI
"FIA",113,0,1)
y^y^f^^^^n
"FIA",113,0,10)

"FIA",113,0,11)

"FIA",113,0,"RLRO")

"FIA",113,0,"VR")
5.5^DIETETICS
"FIA",113,113)
0
"FIA",113.1)
STORAGE LOCATION
"FIA",113.1,0)
^FH(113.1,
"FIA",113.1,0,0)
113.1sI
"FIA",113.1,0,1)
y^y^f^^^^n
"FIA",113.1,0,10)

"FIA",113.1,0,11)

"FIA",113.1,0,"RLRO")

"FIA",113.1,0,"VR")
5.5^DIETETICS
"FIA",113.1,113.1)
0
"FIA",113.2)
FH VENDOR
"FIA",113.2,0)
^FH(113.2,
"FIA",113.2,0,0)
113.2sI
"FIA",113.2,0,1)
y^y^f^^^^n
"FIA",113.2,0,10)

"FIA",113.2,0,11)

"FIA",113.2,0,"RLRO")

"FIA",113.2,0,"VR")
5.5^DIETETICS
"FIA",113.2,113.2)
0
"FIA",114)
RECIPE
"FIA",114,0)
^FH(114,
"FIA",114,0,0)
114sI
"FIA",114,0,1)
y^y^f^^^^n
"FIA",114,0,10)

"FIA",114,0,11)

"FIA",114,0,"RLRO")

"FIA",114,0,"VR")
5.5^DIETETICS
"FIA",114,114)
0
"FIA",114,114.01)
0
"FIA",114,114.0103)
0
"FIA",114,114.02)
0
"FIA",114,114.03)
0
"FIA",114,114.05)
0
"FIA",114.1)
RECIPE CATEGORY
"FIA",114.1,0)
^FH(114.1,
"FIA",114.1,0,0)
114.1sI
"FIA",114.1,0,1)
y^y^f^^^^n
"FIA",114.1,0,10)

"FIA",114.1,0,11)

"FIA",114.1,0,"RLRO")

"FIA",114.1,0,"VR")
5.5^DIETETICS
"FIA",114.1,114.1)
0
"FIA",114.2)
PREPARATION AREA
"FIA",114.2,0)
^FH(114.2,
"FIA",114.2,0,0)
114.2sI
"FIA",114.2,0,1)
y^y^f^^^^n
"FIA",114.2,0,10)

"FIA",114.2,0,11)

"FIA",114.2,0,"RLRO")

"FIA",114.2,0,"VR")
5.5^DIETETICS
"FIA",114.2,114.2)
0
"FIA",114.3)
SERVING UTENSIL
"FIA",114.3,0)
^FH(114.3,
"FIA",114.3,0,0)
114.3sI
"FIA",114.3,0,1)
y^y^f^^^^n
"FIA",114.3,0,10)

"FIA",114.3,0,11)

"FIA",114.3,0,"RLRO")

"FIA",114.3,0,"VR")
5.5^DIETETICS
"FIA",114.3,114.3)
0
"FIA",114.4)
EQUIPMENT
"FIA",114.4,0)
^FH(114.4,
"FIA",114.4,0,0)
114.4sI
"FIA",114.4,0,1)
y^y^f^^^^n
"FIA",114.4,0,10)

"FIA",114.4,0,11)

"FIA",114.4,0,"RLRO")

"FIA",114.4,0,"VR")
5.5^DIETETICS
"FIA",114.4,114.4)
0
"FIA",115)
NUTRITION PERSON
"FIA",115,0)
^FHPT(
"FIA",115,0,0)
115
"FIA",115,0,1)
y^y^f^^^^n
"FIA",115,0,10)

"FIA",115,0,11)

"FIA",115,0,"RLRO")

"FIA",115,0,"VR")
5.5^DIETETICS
"FIA",115,115)
0
"FIA",115,115.01)
0
"FIA",115,115.011)
0
"FIA",115,115.012)
0
"FIA",115,115.016)
0
"FIA",115,115.017)
0
"FIA",115,115.018)
0
"FIA",115,115.02)
0
"FIA",115,115.021)
0
"FIA",115,115.03)
0
"FIA",115,115.04)
0
"FIA",115,115.05)
0
"FIA",115,115.06)
0
"FIA",115,115.07)
0
"FIA",115,115.08)
0
"FIA",115,115.09)
0
"FIA",115,115.1)
0
"FIA",115,115.11)
0
"FIA",115,115.1171)
0
"FIA",115,115.14)
0
"FIA",115,115.1619)
0
"FIA",115.2)
FOOD PREFERENCES
"FIA",115.2,0)
^FH(115.2,
"FIA",115.2,0,0)
115.2sI
"FIA",115.2,0,1)
y^y^f^^^^n
"FIA",115.2,0,10)

"FIA",115.2,0,11)

"FIA",115.2,0,"RLRO")

"FIA",115.2,0,"VR")
5.5^DIETETICS
"FIA",115.2,115.2)
0
"FIA",115.2,115.21)
0
"FIA",115.3)
NUTRITION CLASSIFICATION
"FIA",115.3,0)
^FH(115.3,
"FIA",115.3,0,0)
115.3sI
"FIA",115.3,0,1)
y^y^f^^^^n
"FIA",115.3,0,10)

"FIA",115.3,0,11)

"FIA",115.3,0,"RLRO")

"FIA",115.3,0,"VR")
5.5^DIETETICS
"FIA",115.3,115.3)
0
"FIA",115.4)
NUTRITION STATUS
"FIA",115.4,0)
^FH(115.4,
"FIA",115.4,0,0)
115.4sI
"FIA",115.4,0,1)
y^y^f^^^^n
"FIA",115.4,0,10)

"FIA",115.4,0,11)

"FIA",115.4,0,"RLRO")

"FIA",115.4,0,"VR")
5.5^DIETETICS
"FIA",115.4,115.4)
0
"FIA",115.5)
DIETETIC NUTRITION PLAN
"FIA",115.5,0)
^FH(115.5,
"FIA",115.5,0,0)
115.5
"FIA",115.5,0,1)
y^y^f^^^^n
"FIA",115.5,0,10)

"FIA",115.5,0,11)

"FIA",115.5,0,"RLRO")

"FIA",115.5,0,"VR")
5.5^DIETETICS
"FIA",115.5,115.5)
0
"FIA",115.6)
ENCOUNTER TYPES
"FIA",115.6,0)
^FH(115.6,
"FIA",115.6,0,0)
115.6sI
"FIA",115.6,0,1)
y^y^f^^^^n
"FIA",115.6,0,10)

"FIA",115.6,0,11)

"FIA",115.6,0,"RLRO")

"FIA",115.6,0,"VR")
5.5^DIETETICS
"FIA",115.6,115.6)
0
"FIA",115.7)
DIETETIC ENCOUNTERS
"FIA",115.7,0)
^FHEN(
"FIA",115.7,0,0)
115.7
"FIA",115.7,0,1)
y^y^f^^^^n
"FIA",115.7,0,10)

"FIA",115.7,0,11)

"FIA",115.7,0,"RLRO")

"FIA",115.7,0,"VR")
5.5^DIETETICS
"FIA",115.7,115.7)
0
"FIA",115.7,115.701)
0
"FIA",116)
MENU CYCLE
"FIA",116,0)
^FH(116,
"FIA",116,0,0)
116
"FIA",116,0,1)
y^y^f^^^^n
"FIA",116,0,10)

"FIA",116,0,11)

"FIA",116,0,"RLRO")

"FIA",116,0,"VR")
5.5^DIETETICS
"FIA",116,116)
0
"FIA",116,116.01)
0
"FIA",116,116.02)
0
"FIA",116.1)
MEAL
"FIA",116.1,0)
^FH(116.1,
"FIA",116.1,0,0)
116.1sI
"FIA",116.1,0,1)
y^y^f^^^^n
"FIA",116.1,0,10)

"FIA",116.1,0,11)

"FIA",116.1,0,"RLRO")

"FIA",116.1,0,"VR")
5.5^DIETETICS
"FIA",116.1,116.1)
0
"FIA",116.1,116.11)
0
"FIA",116.1,116.112)
0
"FIA",116.1,116.12)
0
"FIA",116.2)
PRODUCTION DIET
"FIA",116.2,0)
^FH(116.2,
"FIA",116.2,0,0)
116.2sI
"FIA",116.2,0,1)
y^y^f^^^^n
"FIA",116.2,0,10)

"FIA",116.2,0,11)

"FIA",116.2,0,"RLRO")

"FIA",116.2,0,"VR")
5.5^DIETETICS
"FIA",116.2,116.2)
0
"FIA",116.2,116.211)
0
"FIA",116.3)
HOLIDAY MEALS
"FIA",116.3,0)
^FH(116.3,
"FIA",116.3,0,0)
116.3
"FIA",116.3,0,1)
y^y^f^^^^n
"FIA",116.3,0,10)

"FIA",116.3,0,11)

"FIA",116.3,0,"RLRO")

"FIA",116.3,0,"VR")
5.5^DIETETICS
"FIA",116.3,116.3)
0
"FIA",117)
MEALS SERVED
"FIA",117,0)
^FH(117,
"FIA",117,0,0)
117D
"FIA",117,0,1)
y^y^f^^^^n
"FIA",117,0,10)

"FIA",117,0,11)

"FIA",117,0,"RLRO")

"FIA",117,0,"VR")
5.5^DIETETICS
"FIA",117,117)
0
"FIA",117,117.06)
0
"FIA",117.1)
STAFFING DATA
"FIA",117.1,0)
^FH(117.1,
"FIA",117.1,0,0)
117.1D
"FIA",117.1,0,1)
y^y^f^^^^n
"FIA",117.1,0,10)

"FIA",117.1,0,11)

"FIA",117.1,0,"RLRO")

"FIA",117.1,0,"VR")
5.5^DIETETICS
"FIA",117.1,117.1)
0
"FIA",117.1,117.11)
0
"FIA",117.2)
DIETETIC COST OF MEALS
"FIA",117.2,0)
^FH(117.2,
"FIA",117.2,0,0)
117.2D
"FIA",117.2,0,1)
y^y^f^^^^n
"FIA",117.2,0,10)

"FIA",117.2,0,11)

"FIA",117.2,0,"RLRO")

"FIA",117.2,0,"VR")
5.5^DIETETICS
"FIA",117.2,117.2)
0
"FIA",117.3)
ANNUAL REPORT
"FIA",117.3,0)
^FH(117.3,
"FIA",117.3,0,0)
117.3D
"FIA",117.3,0,1)
y^y^f^^^^n
"FIA",117.3,0,10)

"FIA",117.3,0,11)

"FIA",117.3,0,"RLRO")

"FIA",117.3,0,"VR")
5.5^DIETETICS
"FIA",117.3,117.3)
0
"FIA",117.3,117.31)
0
"FIA",117.3,117.312)
0
"FIA",117.3,117.313)
0
"FIA",117.3,117.325)
0
"FIA",117.3,117.332)
0
"FIA",117.3,117.338)
0
"FIA",117.3,117.356)
0
"FIA",117.3,117.358)
0
"FIA",117.3,117.359)
0
"FIA",117.3,117.361)
0
"FIA",117.3,117.362)
0
"FIA",117.3,117.363)
0
"FIA",117.3,117.364)
0
"FIA",117.3,117.365)
0
"FIA",117.3,117.366)
0
"FIA",117.3,117.37)
0
"FIA",117.3,117.371)
0
"FIA",117.3,117.372)
0
"FIA",117.3,117.373)
0
"FIA",117.3,117.374)
0
"FIA",117.3,117.375)
0
"FIA",117.3,117.376)
0
"FIA",117.3,117.377)
0
"FIA",117.3,117.378)
0
"FIA",117.3,117.379)
0
"FIA",117.4)
DIETETIC REPORT CATEGORIES
"FIA",117.4,0)
^FH(117.4,
"FIA",117.4,0,0)
117.4sI
"FIA",117.4,0,1)
y^y^f^^^^n
"FIA",117.4,0,10)

"FIA",117.4,0,11)

"FIA",117.4,0,"RLRO")

"FIA",117.4,0,"VR")
5.5^DIETETICS
"FIA",117.4,117.4)
0
"FIA",118)
SUPPLEMENTAL FEEDINGS
"FIA",118,0)
^FH(118,
"FIA",118,0,0)
118sI
"FIA",118,0,1)
y^y^f^^^^n
"FIA",118,0,10)

"FIA",118,0,11)

"FIA",118,0,"RLRO")

"FIA",118,0,"VR")
5.5^DIETETICS
"FIA",118,118)
0
"FIA",118,118.01)
0
"FIA",118.1)
SUPPLEMENTAL FEEDING MENU
"FIA",118.1,0)
^FH(118.1,
"FIA",118.1,0,0)
118.1sI
"FIA",118.1,0,1)
y^y^f^^^^n
"FIA",118.1,0,10)

"FIA",118.1,0,11)

"FIA",118.1,0,"RLRO")

"FIA",118.1,0,"VR")
5.5^DIETETICS
"FIA",118.1,118.1)
0
"FIA",118.2)
TUBEFEEDING
"FIA",118.2,0)
^FH(118.2,
"FIA",118.2,0,0)
118.2sI
"FIA",118.2,0,1)
y^y^f^^^^n
"FIA",118.2,0,10)

"FIA",118.2,0,11)

"FIA",118.2,0,"RLRO")

"FIA",118.2,0,"VR")
5.5^DIETETICS
"FIA",118.2,118.2)
0
"FIA",118.2,118.21)
0
"FIA",118.3)
STANDING ORDERS
"FIA",118.3,0)
^FH(118.3,
"FIA",118.3,0,0)
118.3sI
"FIA",118.3,0,1)
y^y^f^^^^n
"FIA",118.3,0,10)

"FIA",118.3,0,11)

"FIA",118.3,0,"RLRO")

"FIA",118.3,0,"VR")
5.5^DIETETICS
"FIA",118.3,118.3)
0
"FIA",119)
DIETITIAN TICKLER FILE
"FIA",119,0)
^FH(119,
"FIA",119,0,0)
119P
"FIA",119,0,1)
y^y^f^^^^n
"FIA",119,0,10)

"FIA",119,0,11)

"FIA",119,0,"RLRO")

"FIA",119,0,"VR")
5.5^DIETETICS
"FIA",119,119)
0
"FIA",119,119.01)
0
"FIA",119.1)
UNITS
"FIA",119.1,0)
^FH(119.1,
"FIA",119.1,0,0)
119.1
"FIA",119.1,0,1)
y^y^f^^^^n
"FIA",119.1,0,10)

"FIA",119.1,0,11)

"FIA",119.1,0,"RLRO")

"FIA",119.1,0,"VR")
5.5^DIETETICS
"FIA",119.1,119.1)
0
"FIA",119.4)
ISOLATION/PRECAUTION TYPE
"FIA",119.4,0)
^FH(119.4,
"FIA",119.4,0,0)
119.4sI
"FIA",119.4,0,1)
y^y^f^^^^n
"FIA",119.4,0,10)

"FIA",119.4,0,11)

"FIA",119.4,0,"RLRO")

"FIA",119.4,0,"VR")
5.5^DIETETICS
"FIA",119.4,119.4)
0
"FIA",119.5)
DIETETIC CONSULTS
"FIA",119.5,0)
^FH(119.5,
"FIA",119.5,0,0)
119.5sI
"FIA",119.5,0,1)
y^y^f^^^^n
"FIA",119.5,0,10)

"FIA",119.5,0,11)

"FIA",119.5,0,"RLRO")

"FIA",119.5,0,"VR")
5.5^DIETETICS
"FIA",119.5,119.5)
0
"FIA",119.6)
NUTRITION LOCATION
"FIA",119.6,0)
^FH(119.6,
"FIA",119.6,0,0)
119.6sI
"FIA",119.6,0,1)
y^y^f^^^^n
"FIA",119.6,0,10)

"FIA",119.6,0,11)

"FIA",119.6,0,"RLRO")

"FIA",119.6,0,"VR")
5.5^DIETETICS
"FIA",119.6,119.6)
0
"FIA",119.6,119.61)
0
"FIA",119.6,119.62)
0
"FIA",119.6,119.63)
0
"FIA",119.6,119.64)
0
"FIA",119.71)
PRODUCTION FACILITY
"FIA",119.71,0)
^FH(119.71,
"FIA",119.71,0,0)
119.71sI
"FIA",119.71,0,1)
y^y^f^^^^n
"FIA",119.71,0,10)

"FIA",119.71,0,11)

"FIA",119.71,0,"RLRO")

"FIA",119.71,0,"VR")
5.5^DIETETICS
"FIA",119.71,119.71)
0
"FIA",119.72)
SERVICE POINT
"FIA",119.72,0)
^FH(119.72,
"FIA",119.72,0,0)
119.72sI
"FIA",119.72,0,1)
y^y^f^^^^n
"FIA",119.72,0,10)

"FIA",119.72,0,11)

"FIA",119.72,0,"RLRO")

"FIA",119.72,0,"VR")
5.5^DIETETICS
"FIA",119.72,119.72)
0
"FIA",119.72,119.721)
0
"FIA",119.72,119.7211)
0
"FIA",119.72,119.722)
0
"FIA",119.73)
COMMUNICATION OFFICE
"FIA",119.73,0)
^FH(119.73,
"FIA",119.73,0,0)
119.73sI
"FIA",119.73,0,1)
y^y^f^^^^n
"FIA",119.73,0,10)

"FIA",119.73,0,11)

"FIA",119.73,0,"RLRO")

"FIA",119.73,0,"VR")
5.5^DIETETICS
"FIA",119.73,119.73)
0
"FIA",119.74)
SUPPLEMENTAL FEEDING SITE
"FIA",119.74,0)
^FH(119.74,
"FIA",119.74,0,0)
119.74sI
"FIA",119.74,0,1)
y^y^f^^^^n
"FIA",119.74,0,10)

"FIA",119.74,0,11)

"FIA",119.74,0,"RLRO")

"FIA",119.74,0,"VR")
5.5^DIETETICS
"FIA",119.74,119.74)
0
"FIA",119.8)
NUTRITION EVENTS
"FIA",119.8,0)
^FH(119.8,
"FIA",119.8,0,0)
119.8
"FIA",119.8,0,1)
y^y^f^^^^n
"FIA",119.8,0,10)

"FIA",119.8,0,11)

"FIA",119.8,0,"RLRO")

"FIA",119.8,0,"VR")
5.5^DIETETICS
"FIA",119.8,119.8)
0
"FIA",119.9)
FH SITE PARAMETERS
"FIA",119.9,0)
^FH(119.9,
"FIA",119.9,0,0)
119.9
"FIA",119.9,0,1)
y^y^f^^^^n
"FIA",119.9,0,10)

"FIA",119.9,0,11)

"FIA",119.9,0,"RLRO")

"FIA",119.9,0,"VR")
5.5^DIETETICS
"FIA",119.9,119.9)
0
"FIA",119.9,119.9001)
0
"FIA",119.9,119.93)
0
"FIA",119.9,119.985)
0
"INI")
FH55PRE
"INIT")
FH55PST
"KRN",.4,357,-1)
0^3
"KRN",.4,357,0)
FHNULST^2850412^^112^^^3020506^
"KRN",.4,357,"%D",0)
^^1^1^2880516^
"KRN",.4,357,"%D",1,0)
This template is used to print the nutrient data file.
"KRN",.4,357,"F",1)
.01~1;C62~4;"QUICK";C69~2;"COMMON";C75~3;"GM/UNIT";C86;D1~4.2;C96;L30~4.4;"QUICK";C127~
"KRN",.4,357,"H")
FOOD NUTRIENTS
"KRN",.4,358,-1)
0^12
"KRN",.4,358,0)
FHSFMENU^2850316^^118.1^^^3040128^
"KRN",.4,358,"%D",0)
^^3^3^2880709^
"KRN",.4,358,"%D",1,0)
This template lists all of the supplemental menus listed in
"KRN",.4,358,"%D",2,0)
the Supplemental Feeding Menu file (118.1) along with the
"KRN",.4,358,"%D",3,0)
associated data elements.
"KRN",.4,358,"F",1)
.01~1;C30~99;"INACT";C42;R4~3;"D/T";C49;L4~10.5;"";R3;C56~10;"10AM FEEDING";C60~14.5;"";R3;C82~14;"2PM FEEDING";C86~18.5;"";R3;C108~18;"8PM FEEDING";C112~11.5;"";R3;C56~
"KRN",.4,358,"F",2)
11;"";C60~15.5;"";R3;C82~15;"";C86~19.5;"";R3;C108~19;"";C112~12.5;"";R3;C56~12;"";C60~16.5;"";R3;C82~16;"";C86~20.5;"";R3;C108~20;"";C112~
"KRN",.4,358,"F",3)
13.5;"";R3;C56~13;"";C60~17.5;"";R3;C82~17;"";C86~21.5;"";R3;C108~21;"";C112~
"KRN",.4,358,"H")
SUPPLEMENTAL FEEDING MENU LIST
"KRN",.4,359,-1)
0^11
"KRN",.4,359,0)
FHSFLST^2901016.1004^^118^^^3040128^
"KRN",.4,359,"%D",0)
^^3^3^2910507^^^
"KRN",.4,359,"%D",1,0)
This template lists all of the supplemental feedings contained
"KRN",.4,359,"%D",2,0)
in the Supplemental Feeding file (118) along with the associated
"KRN",.4,359,"%D",3,0)
data elements.
"KRN",.4,359,"F",2)
.01~5;"LABEL";C30~10;"BULK ONLY";C40~7;"MED VEH";C47~99;"INACT";C53~20;C59;R5~11;"RECIPE";C68~1,.01;C101~
"KRN",.4,359,"H")
SUPPLEMENTAL FEEDINGS LIST
"KRN",.4,360,-1)
0^16
"KRN",.4,360,0)
FHUMENU^2950313.1555^^112.6^^^3020506
"KRN",.4,360,"%D",0)
^^3^3^2880717^^
"KRN",.4,360,"%D",1,0)
This template will list all users who have created User Menus
"KRN",.4,360,"%D",2,0)
along with the menu names they created, date of creation, and
"KRN",.4,360,"%D",3,0)
type of units selected.
"KRN",.4,360,"F",2)
.8;L25~.7;"CREATED";C28~.6;C42~.01;"USER MENU";C51;L28~2;"REC MENU?";C82~
"KRN",.4,360,"H")
USER MENU LIST
"KRN",.4,361,-1)
0^15
"KRN",.4,361,0)
FHTFLST^2920928.1349^^118.2^^^3041006^
"KRN",.4,361,"%D",0)
^^2^2^2920929^^
"KRN",.4,361,"%D",1,0)
This template lists all of the tubefeeding products in the
"KRN",.4,361,"%D",2,0)
Tubefeeding file (118.2) along with its various data elements.
"KRN",.4,361,"F",2)
.01~1~2;R8~3~5;R5~99~11;"RECIPE";L20~10,.01;C101~
"KRN",.4,361,"H")
TUBEFEEDING LIST
"KRN",.4,362,-1)
0^4
"KRN",.4,362,0)
FHORCON^2860813^^119.5^^^3031110^
"KRN",.4,362,"%D",0)
^^3^3^2880709^
"KRN",.4,362,"%D",1,0)
This template lists the consultation types contained in the
"KRN",.4,362,"%D",2,0)
Dietetic Consults file (119.5) along with the associated
"KRN",.4,362,"%D",3,0)
data elements.
"KRN",.4,362,"F",2)
.01~1;C52~2;"ASK";C65~3;"IN-TU";C71~4;"FU-TU";C81~99;"INACT";C90~5;"BULLETIN";C100~
"KRN",.4,362,"H")
DIETETIC CONSULTS LIST
"KRN",.4,363,-1)
0^5
"KRN",.4,363,0)
FHORWRD^2850528^^119.6^^^3041215^
"KRN",.4,363,"%D",0)
^^2^2^2880709^^
"KRN",.4,363,"%D",1,0)
This template lists the responsible clinician for each ward
"KRN",.4,363,"%D",2,0)
in the Dietetic Ward file (119.6).
"KRN",.4,363,"F",1)
.01~1~
"KRN",.4,363,"H")
WARD ASSIGNMENTS LIST
"KRN",.4,365,-1)
0^2
"KRN",.4,365,0)
FHISLST^2860813^^119.4^^^3041006^
"KRN",.4,365,"%D",0)
^^3^3^2880709^^
"KRN",.4,365,"%D",1,0)
This template lists all of the isolation types listed in
"KRN",.4,365,"%D",2,0)
the Isolation/Precaution Type file (119.4) along with the
"KRN",.4,365,"%D",3,0)
associated data elements.
"KRN",.4,365,"F",2)
.01~1~2~99;"INACTIVE"~
"KRN",.4,365,"H")
ISOLATION TYPE LIST
"KRN",.4,366,-1)
0^6
"KRN",.4,366,0)
FHPROD^2881202^^116.2^^^3040407^
"KRN",.4,366,"%D",0)
^^3^3^2880709^
"KRN",.4,366,"%D",1,0)
This template lists the production diets contained in the
"KRN",.4,366,"%D",2,0)
Production Diet file (116.2) along with the associated
"KRN",.4,366,"%D",3,0)
data elements.
"KRN",.4,366,"F",1)
8;"TALLY ORDER";R4~1;"CODE";R3;C8~.01;"DIET";L30;C14~99;"INACT";C47~3;"REV";R3;C55~7;R4;C61~7.5;"DAILY MENU";R4;C68~10;"COMBO";R4;C75~
"KRN",.4,366,"F",2)
11,.01;"TALLIED PROD. DIETS";L30;C82~
"KRN",.4,366,"H")
PRODUCTION DIET LIST
"KRN",.4,367,-1)
0^10
"KRN",.4,367,0)
FHSELIST^2940726.1218^@^115.2^^@^3041123
"KRN",.4,367,"%D",0)
^^2^2^2880901^
"KRN",.4,367,"%D",1,0)
This template is used to list the patient preference items
"KRN",.4,367,"%D",2,0)
contained in the Patient Preferences file (115.2).
"KRN",.4,367,"F",2)
.01;S1~1;"TYPE";L3;C32~99;"INA";C38~20;"DEF";L3;C43~21;"MEAL";L3;C48~3;"RECIPE";C54~10,.01;"EXCLUDED RECIPES";C54~
"KRN",.4,367,"H")
PATIENT PREFERENCES LIST
"KRN",.4,368,-1)
0^8
"KRN",.4,368,0)
FHPSTO^2861208^^113.1^^^3001107^
"KRN",.4,368,"%D",0)
^^3^3^2880709^
"KRN",.4,368,"%D",1,0)
This template lists all of the storage locations contained
"KRN",.4,368,"%D",2,0)
in the Storage Location file (113.1) along with the
"KRN",.4,368,"%D",3,0)
associated data elements.
"KRN",.4,368,"F",2)
.01~1;C20~2;C30~
"KRN",.4,368,"H")
STORAGE LOCATION LIST
"KRN",.4,369,-1)
0^9
"KRN",.4,369,0)
FHRECC^2950428.1057^^114.1^^^3040407
"KRN",.4,369,"%D",0)
^^3^3^2930119^^
"KRN",.4,369,"%D",1,0)
This template lists the recipe categories contained in the
"KRN",.4,369,"%D",2,0)
Recipe Category file (114.1) along with the associated
"KRN",.4,369,"%D",3,0)
data elements.
"KRN",.4,369,"F",2)
.01~1;C20~2;"PRINT ORDER";C30~99;C45~
"KRN",.4,369,"H")
RECIPE CATEGORY LIST
"KRN",.4,370,-1)
0^7
"KRN",.4,370,0)
FHPROP^2880407^^114.2^^^3010423^
"KRN",.4,370,"%D",0)
^^3^3^2880709^
"KRN",.4,370,"%D",1,0)
This template lists the preparation areas contained in the
"KRN",.4,370,"%D",2,0)
Preparation Area file (114.2) along with the associated
"KRN",.4,370,"%D",3,0)
data elements.
"KRN",.4,370,"F",2)
.01~1;C20~2;C30~
"KRN",.4,370,"H")
PREPARATION AREA LIST
"KRN",.4,504,-1)
0^13
"KRN",.4,504,0)
FHSYP1^2900123.1544^^119.9^^^3040211^
"KRN",.4,504,"%D",0)
^^2^2^2900317^
"KRN",.4,504,"%D",1,0)
This template is used to list the laboratory tests selected as
"KRN",.4,504,"%D",2,0)
those of interest to dietetics.
"KRN",.4,504,"F",2)
80,.01~80,1;C40;""~80,4;C47~80,2;C54;"PRINT ON ASSESS"~80,3;C62;"PRINT ON SCREEN"~80,5;C70~
"KRN",.4,504,"H")
FH SITE PARAMETERS LIST
"KRN",.4,505,-1)
0^14
"KRN",.4,505,0)
FHSYP2^2900123.1558^^119.9^^^3000427^
"KRN",.4,505,"%D",0)
^^2^2^2900317^
"KRN",.4,505,"%D",1,0)
This template is used to list the drugs contained in a set of
"KRN",.4,505,"%D",2,0)
drug classifications selected as those of interest to dietetics.
"KRN",.4,505,"DXS",1,9.2)
S I(1,0)=$S($D(D1):D1,1:""),I(0,0)=$S($D(D0):D0,1:""),DIP(1)=$S($D(^FH(119.9,D0,"P",D1,0)):^(0),1:""),D0=$P(DIP(1),U,1) S:'$D(^PS(50.605,+D0,0)) D0=-1
"KRN",.4,505,"F",1)
85,.01;"DRUG CLASS"~
"KRN",.4,505,"F",2)
85,X DXS(1,9.2) S DIP(101)=$S($D(^PS(50.605,D0,0)):^(0),1:"") S X=$P(DIP(101),U,2) S D0=I(0,0) S D1=I(1,0) W X K DIP;C12;"TITLE";Z;"DRUG CLASSIFICATIONS:CLASSIFICATION"~
"KRN",.4,505,"H")
FH SITE PARAMETERS LIST
"KRN",.4,877,-1)
0^1
"KRN",.4,877,0)
FHDIETL^2870120^^111^^^3041116^
"KRN",.4,877,"%D",0)
^^1^1^2950717^^
"KRN",.4,877,"%D",1,0)
This template is used to print a basic diet list.
"KRN",.4,877,"F",2)
.01~1;C32~3;"DIET PREC";C46~6;"ABBREV LABEL";C52~4;"PROD DIET";C66;L12~2;"ASK EXP";C80~5;"MAIL";C86~99;"INACT";C92~10,.01;C100~
"KRN",.4,877,"H")
DIETS LIST
"KRN",.402,297,-1)
0^2
"KRN",.402,297,0)
FHADM2^3040311.1549^^117^^^3041217
"KRN",.402,297,"%D",0)
^.4021^2^2^3031006^^^^
"KRN",.402,297,"%D",1,0)
This template is used to enter served meals data which is used
"KRN",.402,297,"%D",2,0)
to complete the worksheet for AMIS segment 224.
"KRN",.402,297,"DR",1,117)
S DIE("NO^")="" S:'$D(FHN("D")) Y="@1";1//^S X=FHN("D",0);2//^S X=FHN("D",1);@1;S:'$D(FHN("N")) Y="@2";4//^S X=FHN("N",0);5//^S X=FHN("N",1);@2;S:'$D(FHN("H")) Y="@3";7//^S X=FHN("H",0);8//^S X=FHN("H",1);@3;K DIE("NO^");
"KRN",.402,297,"DR",1,117,1)
30//^S X=FHOPC("B");31//^S X=FHOPC("N");32//^S X=FHOPC("E");33//^S X=FHOPC("E","B");34//^S X=FHOPC("E","N");35//^S X=FHOPC("E","E");36//^S X=FHOPC("P","B");37//^S X=FHOPC("P","N");38//^S X=FHOPC("P","E");39//^S X=FHOPC("O","B");
"KRN",.402,297,"DR",1,117,2)
40//^S X=FHOPC("O","N");41//^S X=FHOPC("O","E");42//^S X=FHOPC("V","B");43//^S X=FHOPC("V","N");44//^S X=FHOPC("V","E");45//^S X=FHOPC("G","B");46//^S X=FHOPC("G","N");47//^S X=FHOPC("G","E");50;51;
"KRN",.402,300,-1)
0^6
"KRN",.402,300,0)
FHINPR^2950428.0903^^114^^^3010926
"KRN",.402,300,"%D",0)
^^1^1^2940120^^^
"KRN",.402,300,"%D",1,0)
This template is used to enter recipes into the recipe file.
"KRN",.402,300,"DR",1,114)
.01;8;2;3;4;5;6;7;11;12;9;10//NO;1;1.5;20;99;103;
"KRN",.402,300,"DR",2,114.01)
.01;S FHX1=+X,Y0=$G(^FHING(FHX1,0)),UNT=$P(Y0,"^",16);W !,"  Units should be ",$S(UNT="EACH":"EACH",UNT="OZ"!(UNT="LB"):"WEIGHTS",1:"VOLUMES");1;S FHX2=+X*$P(Y0,"^",22);
"KRN",.402,300,"DR",2,114.01,1)
2//^S X=$S($P(Y0,"^",21):$P($G(^FHNU($P(Y0,"^",21),0)),"^",1),1:"");S FHX3=$P($G(^FHNU(+X,0)),"^",5) S:FHX3&(FHX3'=100) FHX2=FHX2*FHX3/100;3//^S X=+$J(FHX2,0,3);
"KRN",.402,300,"DR",2,114.0103)
.01;1//1;
"KRN",.402,300,"DR",2,114.03)
.01;W !,"  Portion Size: ",$P(^FH(114,+X,0),U,3);1;
"KRN",.402,300,"DR",2,114.05)
.01;
"KRN",.402,369,-1)
0^1
"KRN",.402,369,0)
FH AMS4 224^2901214.1037^^2100^^^2931105
"KRN",.402,369,"DIAB",9,0,2100,0)
4224.001;T
"KRN",.402,369,"DIAB",10,0,2100,0)
4224.002;T
"KRN",.402,369,"DIAB",12,0,2100,0)
4224.004;T
"KRN",.402,369,"DIAB",13,0,2100,0)
4224.005;T
"KRN",.402,369,"DIAB",14,0,2100,0)
4224.006;T
"KRN",.402,369,"DIAB",15,0,2100,0)
4224.007;T
"KRN",.402,369,"DIAB",20,0,2100,0)
4224.012;T
"KRN",.402,369,"DR",1,2100)
1///^S X="AMS";1254///^S X="((";1255///^S X=4;1256///^S X=8;5///^S X=GECS("SITE");6;7///^S X=224;1257;4224.001T~;4224.002T~;4224.003;4224.004T~;4224.005T~;4224.006T~;4224.007T~;4224.008;4224.009;4224.01;4224.011;4224.012T~;
"KRN",.402,369,"DR",1,2100,1)
99///^S X="$";
"KRN",.402,629,-1)
0^4
"KRN",.402,629,0)
FHASE^3040316.1008^^115.7^^^3050120
"KRN",.402,629,"%D",0)
^.4021^2^2^3030602^^^^
"KRN",.402,629,"%D",1,0)
This template is used to enter data relating to a dietetic
"KRN",.402,629,"%D",2,0)
encounter.
"KRN",.402,629,"DR",1,115.7)
2//^S X=$P(^VA(200,DUZ,0),"^",1);3//^S X="",DIC("S")="I Y>2";K DIC("S") S FHX1=$S($D(^FH(115.6,+X,0)):^(0),1:"") I $P(FHX1,"^",5)'="Y" S Y="@1";4;@1;S FHX2=$P(FHX1,"^",3) I '$P(FHX1,"^",4) S Y=6;5;I X="F" S FHX2=$P(FHX1,"^",4);
"KRN",.402,629,"DR",1,115.7,1)
6//^S X=FHX2;S FHX2=$P(FHX1,"^",6) I FHX2'="B" S Y="@3";7;S FHX2=X,Y="@4";@3;7///^S X=FHX2;@4;10;S FHX3="" I $P(FHX1,"^",7)'="Y" S Y=8 S:FHX2="I" FHX3=1;@5;20;D CNT^FHASE I $P(FHX4,"^",10)'="",FHX3 S $P(^FHEN(ASE,0),U,10)="";
"KRN",.402,629,"DR",1,115.7,2)
I FHX2="I",FHX3<1 W *7,!?5,"Must select a patient." S Y="@5";@8;8//^S X=FHX3;I X<FHX3 W *7,!?5,"Group Size cannot be less than total person count (default)" S $P(^FHEN(ASE,0),U,10)="",Y="@8";I $P(FHX4,"^",13)'="" S Y="@9";
"KRN",.402,629,"DR",1,115.7,3)
101////^S X=DUZ;@9;I $P(FHX4,"^",14)'="" S Y="@10";102///^S X="NOW";@10;S:'FHN Y=0;103///^S X="NOW";104////^S X=DUZ;
"KRN",.402,629,"DR",2,115.701)
.01;S DFN=X,DGT=DTE D ^DGPMSTAT S X9=$G(^DIC(42,+DG1,44));1////^S X=X9;I $P(FHX1,"^",8)'="Y" S Y="@6";2;@6;I $P(FHX1,"^",9)'="Y" S Y="@7";3;@7;I FHX2="I" S DI(1)=+DI(1),Y=0;
"KRN",.402,630,-1)
0^3
"KRN",.402,630,0)
FHADM4^3031010.1131^^117.1^^^3031016
"KRN",.402,630,"%D",0)
^.4021^2^2^3030423^^^^
"KRN",.402,630,"%D",1,0)
This template is used to input daily data into the Staffing
"KRN",.402,630,"%D",2,0)
Guidelines file (117.1).
"KRN",.402,630,"DR",1,117.1)
1//^S X=$P(FHX1,"^",1);2//^S X=$P(FHX1,"^",2);3//^S X=$P(FHX1,"^",3);4//^S X=$P(FHX1,"^",4);5//^S X=$P(FHX1,"^",5);6;7;8;9;10;11;12;13;14;15;16;17;18;19;
"KRN",.402,1656,-1)
0^11
"KRN",.402,1656,0)
FHSITEC1^2910820.1214^^119.9^^^3040708^
"KRN",.402,1656,"%D",0)
^^2^2^2911210^^^^
"KRN",.402,1656,"%D",1,0)
This template is used to enter the clinical site parameters for the
"KRN",.402,1656,"%D",2,0)
Dietetic System.
"KRN",.402,1656,"DIAB",1,1,119.9001,0)
ALL
"KRN",.402,1656,"DIAB",1,1,119.985,0)
ALL
"KRN",.402,1656,"DR",1,119.9)
W !!,"--- Clinical Site Parameters";W !!,"The assessment default units are used for determining";W !,"the units for inputs when units are not specified";W !,"and for determining which units are used for output";
"KRN",.402,1656,"DR",1,119.9,1)
W !,"on the assessment and screening forms. Either English";W !,"or metric may be selected.";W !;70;W !!,"The Screening form makes provision for a";W !,"site-selectable line being added to the form as the";
"KRN",.402,1656,"DR",1,119.9,2)
W !,"last line under the S: (or subjective) section.";W !,"If an entry is made, the user should consider the";W !,"indenting and column usage of the existing lines in";W !,"determining the line to be entered. Just press RETURN";
"KRN",.402,1656,"DR",1,119.9,3)
W !,"to bypass having this extra line.";W !;75;W !!,"A Nutrition Profile may optionally be printed following each";W !,"Screening form. Answer YES if you wish the profile printed,";
"KRN",.402,1656,"DR",1,119.9,4)
W !,"NO if you do not. Answer A (for Ask user) if you wish the user to be";W !,"prompted as to whether a profile will be printed.";W !;74;W !!,"In selecting laboratory results to be displayed, the";
"KRN",.402,1656,"DR",1,119.9,5)
W !,"program allows for the selection of the number of days";W !,"in the past for which data will be searched. Thus,";W !,"selecting 30 as a value will result in the most recent";
"KRN",.402,1656,"DR",1,119.9,6)
W !,"lab test results obtained in the last 30 days being displayed.";W !;71;W !!,"You should select only those laboratory tests in which";W !,"the clinical staff is typically interested. You will also";
"KRN",.402,1656,"DR",1,119.9,7)
W !,"be prompted as to whether you wish those results to be";W !,"printed on the Assessment report and the Screening form.";W !;80;W !!,"You should select only those drug classifications in";
"KRN",.402,1656,"DR",1,119.9,8)
W !,"which the clinical staff is typically interested.";W !,"In displaying prescribed drugs, the actual drug name";W !,"will appear, but the selection of drugs to be displayed";
"KRN",.402,1656,"DR",1,119.9,9)
W !,"will be controlled by the drug classifications selected.";W !;85;
"KRN",.402,1656,"DR",2,119.9001)
.01:5
"KRN",.402,1656,"DR",2,119.985)
.01
"KRN",.402,1657,-1)
0^10
"KRN",.402,1657,0)
FHSEL^2920219.1217^^115^^^3041116^
"KRN",.402,1657,"%D",0)
^^3^3^2930909^^
"KRN",.402,1657,"%D",1,0)
This template is used to enter the food preferences for a patient.
"KRN",.402,1657,"%D",2,0)
It will prompt for the quantity only if the selected preference
"KRN",.402,1657,"%D",3,0)
is a 'Like' rather than a 'Dislike'.
"KRN",.402,1657,"DR",1,115)
10;
"KRN",.402,1657,"DR",2,115.09)
.01;S X9=$P($G(^FH(115.2,+X,0)),"^",2);1;S:X9="D" Y="@1";2//1;@1;
"KRN",.402,1658,-1)
0^5
"KRN",.402,1658,0)
FHCMSR^2920220.1546^^117.2^^^3041103^
"KRN",.402,1658,"%D",0)
^^3^3^2920520^^^^
"KRN",.402,1658,"%D",1,0)
This template is used to enter values into File 117.2, the
"KRN",.402,1658,"%D",2,0)
Dietetic Cost of Meals file used to generate the Dietetic
"KRN",.402,1658,"%D",3,0)
Cost of Meals Report.
"KRN",.402,1658,"DR",1,117.2)
1//^S X=$P(FHX1,"^",1);2//^S X=$P(FHX1,"^",2);3//^S X=$P(FHX1,"^",3);4//^S X=$P(FHX1,"^",4);5//^S X=$P(FHX1,"^",5);6//^S X=$P(FHX1,"^",6);7;8;9;10;11;12;13;14;15;16;17;18;19//^S X=35;20//^S X=12;21//^S X=22;22//^S X=6;23//^S X=12;
"KRN",.402,1658,"DR",1,117.2,1)
24//^S X=13;
"KRN",.402,1658,"ROUOLD")

"KRN",.402,2138,-1)
0^7
"KRN",.402,2138,0)
FHMADM2^3040316.16^@^117^^@^3040519
"KRN",.402,2138,"DR",1,117)
6;
"KRN",.402,2138,"DR",2,117.06)
.01;S FHCOMM=X;D C1^FHMADM2;S DIE("NO^")="" S:'$D(FHN("D")) Y="@1";21//^S X=FHN("D",0);22//^S X=FHN("D",1);@1;S:'$D(FHN("N")) Y="@2";23//^S X=FHN("N",0);24//^S X=FHN("N",1);@2;S:'$D(FHN("H")) Y="@3";25//^S X=FHN("H",0);
"KRN",.402,2138,"DR",2,117.06,1)
26//^S X=FHN("H",1);@3;K DIE("NO^");1//^S X=FHOPC("B");2//^S X=FHOPC("N");3//^S X=FHOPC("E");4//^S X=FHOPC("E","B");5//^S X=FHOPC("E","N");6//^S X=FHOPC("E","E");7//^S X=FHOPC("P","B");8//^S X=FHOPC("P","N");9//^S X=FHOPC("P","E");
"KRN",.402,2138,"DR",2,117.06,2)
10//^S X=FHOPC("O","B");11//^S X=FHOPC("O","N");12//^S X=FHOPC("O","E");13//^S X=FHOPC("V","B");14//^S X=FHOPC("V","N");15//^S X=FHOPC("V","E");16//^S X=FHOPC("G","B");17//^S X=FHOPC("G","N");18//^S X=FHOPC("G","E");19;20;
"KRN",.402,2139,-1)
0^8
"KRN",.402,2139,0)
FHMADM4^3031010.1122^@^117.1^^@^3031203
"KRN",.402,2139,"DR",1,117.1)
20;
"KRN",.402,2139,"DR",2,117.11)
2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;
"KRN",.402,2140,-1)
0^9
"KRN",.402,2140,0)
FHMASE^3031014.1532^@^115.7^^@^3040729
"KRN",.402,2140,"DR",1,115.7)
2//^S X=$P(^VA(200,DUZ,0),"^",1);11;3//^S X="",DIC("S")="I Y>2";K DIC("S") S FHX1=$S($D(^FH(115.6,+X,0)):^(0),1:"") I $P(FHX1,"^",5)'="Y" S Y="@1";4;@1;S FHX2=$P(FHX1,"^",3) I '$P(FHX1,"^",4) S Y=6;5;I X="F" S FHX2=$P(FHX1,"^",4);
"KRN",.402,2140,"DR",1,115.7,1)
6//^S X=FHX2;S FHX2=$P(FHX1,"^",6) I FHX2'="B" S Y="@3";7;S FHX2=X,Y="@4";@3;7///^S X=FHX2;@4;10;S FHX3="" I $P(FHX1,"^",7)'="Y" S Y=8 S:FHX2="I" FHX3=1;@5;20;D CNT^FHMASE I $P(FHX4,"^",10)'="",FHX3 S $P(^FHEN(ASE,0),U,10)="";
"KRN",.402,2140,"DR",1,115.7,2)
I FHX2="I",FHX3<1 W *7,!?5,"Must select a patient." S Y="@5";@8;8//^S X=FHX3;I X<FHX3 W *7,!?5,"Group Size cannot be less than total person count (default)" S $P(^FHEN(ASE,0),U,10)="",Y="@8";I $P(FHX4,"^",13)'="" S Y="@9";
"KRN",.402,2140,"DR",1,115.7,3)
101////^S X=DUZ;@9;I $P(FHX4,"^",14)'="" S Y="@10";102///^S X="NOW";@10;S:'FHN Y=0;103///^S X="NOW";104////^S X=DUZ;
"KRN",.402,2140,"DR",2,115.701)
.01;S DFN=X,DGT=DTE D ^DGPMSTAT S X9=$G(^DIC(42,+DG1,44));1////^S X=X9;I $P(FHX1,"^",8)'="Y" S Y="@6";2;@6;I $P(FHX1,"^",9)'="Y" S Y="@7";3;@7;I FHX2="I" S DI(1)=+DI(1),Y=0;
"KRN",3.6,40,-1)
0^4
"KRN",3.6,40,0)
FHDIREQ^Dietetic Consultation Request
"KRN",3.6,40,1,0)
^^3^3^2920323^^^^
"KRN",3.6,40,1,1,0)
You have a |1| request.
"KRN",3.6,40,1,2,0)
Patient is |3| on ward |4|, room |2|.
"KRN",3.6,40,1,3,0)
|5|
"KRN",3.6,40,3,0)
^^2^2^2920323^^^^
"KRN",3.6,40,3,1,0)
Bulletin Ward Clinician when consult is entered on a
"KRN",3.6,40,3,2,0)
patient on a ward for which the clinician is responsible.
"KRN",3.6,40,4,0)
^3.64A^2^5
"KRN",3.6,40,4,1,0)
1
"KRN",3.6,40,4,1,1,0)
^^1^1^2850427^^
"KRN",3.6,40,4,1,1,1,0)
Type of consultation requested; from file 119.52
"KRN",3.6,40,4,2,0)
2
"KRN",3.6,40,4,2,1,0)
^^1^1^2920323^^
"KRN",3.6,40,4,2,1,1,0)
Room-Bed
"KRN",3.6,40,4,3,0)
3
"KRN",3.6,40,4,3,1,0)
^^1^1^2850427^^
"KRN",3.6,40,4,3,1,1,0)
Patient name
"KRN",3.6,40,4,4,0)
4
"KRN",3.6,40,4,4,1,0)
^^1^1^2850427^^
"KRN",3.6,40,4,4,1,1,0)
Current ward of patient
"KRN",3.6,40,4,5,0)
5
"KRN",3.6,40,4,5,1,0)
^^1^1^2891226^^^^
"KRN",3.6,40,4,5,1,1,0)
Comment by person ordering
"KRN",3.6,41,-1)
0^3
"KRN",3.6,41,0)
FHDIORD^Diet Order
"KRN",3.6,41,1,0)
^^3^3^2940119^^^^
"KRN",3.6,41,1,1,0)
|1| on ward |2|, room |5| has been ordered
"KRN",3.6,41,1,2,0)
|3|
"KRN",3.6,41,1,3,0)
Effective |4|
"KRN",3.6,41,3,0)
^^2^2^2940119^^^^
"KRN",3.6,41,3,1,0)
Bulletin Ward Clinician when 'Bulletinized' Diet Order
"KRN",3.6,41,3,2,0)
is entered.
"KRN",3.6,41,4,0)
^3.64A^5^5
"KRN",3.6,41,4,1,0)
1
"KRN",3.6,41,4,1,1,0)
^^1^1^2940119^^
"KRN",3.6,41,4,1,1,1,0)
Patient name
"KRN",3.6,41,4,2,0)
2
"KRN",3.6,41,4,2,1,0)
^^1^1^2940119^^
"KRN",3.6,41,4,2,1,1,0)
Current ward
"KRN",3.6,41,4,3,0)
3
"KRN",3.6,41,4,3,1,0)
^^1^1^2940119^^
"KRN",3.6,41,4,3,1,1,0)
Diet order
"KRN",3.6,41,4,4,0)
4
"KRN",3.6,41,4,4,1,0)
^^1^1^2940119^^^^
"KRN",3.6,41,4,4,1,1,0)
Effective date of diet order
"KRN",3.6,41,4,5,0)
5
"KRN",3.6,41,4,5,1,0)
^^1^1^2940119^^^^
"KRN",3.6,41,4,5,1,1,0)
Room-Bed
"KRN",3.6,42,-1)
0^5
"KRN",3.6,42,0)
FHDITF^Tubefeeding Order
"KRN",3.6,42,1,0)
^^4^4^2930527^^^^
"KRN",3.6,42,1,1,0)
You have a Tubefeeding Order for |1|  ( |2| )
"KRN",3.6,42,1,2,0)
on ward |3|, room |4|
"KRN",3.6,42,1,3,0)
 
"KRN",3.6,42,1,4,0)
|5|
"KRN",3.6,42,3,0)
^^1^1^2930527^^^^
"KRN",3.6,42,3,1,0)
Bulletin to alert Ward Clinician of Tubefeeding Order.
"KRN",3.6,42,4,0)
^3.64A^5^5
"KRN",3.6,42,4,1,0)
1
"KRN",3.6,42,4,1,1,0)
^^1^1^2850908^
"KRN",3.6,42,4,1,1,1,0)
Patient Name
"KRN",3.6,42,4,2,0)
2
"KRN",3.6,42,4,2,1,0)
^^1^1^2850908^
"KRN",3.6,42,4,2,1,1,0)
Last 4 SSN digits
"KRN",3.6,42,4,3,0)
3
"KRN",3.6,42,4,3,1,0)
^^1^1^2850908^^
"KRN",3.6,42,4,3,1,1,0)
Ward Name
"KRN",3.6,42,4,4,0)
4
"KRN",3.6,42,4,4,1,0)
^^1^1^2901219^^
"KRN",3.6,42,4,4,1,1,0)
Room-Bed
"KRN",3.6,42,4,5,0)
5
"KRN",3.6,42,4,5,1,0)
^^1^1^2930527^^^^
"KRN",3.6,42,4,5,1,1,0)
Comment indicating whether tray order and SF were cancelled.
"KRN",3.6,107,-1)
0^2
"KRN",3.6,107,0)
FHDIOO^Additional Order
"KRN",3.6,107,1,0)
^^5^5^2920323^^^^
"KRN",3.6,107,1,1,0)
|6|  Additional Order: |1|
"KRN",3.6,107,1,2,0)
 
"KRN",3.6,107,1,3,0)
                   |3|, |4|, |2|
"KRN",3.6,107,1,4,0)
 
"KRN",3.6,107,1,5,0)
Comment: |5|
"KRN",3.6,107,3,0)
^^1^1^2920323^^^
"KRN",3.6,107,3,1,0)
Bulletin to alert Ward Clinician of Additional Order.
"KRN",3.6,107,4,0)
^3.64A^6^1
"KRN",3.6,107,4,6,0)
6
"KRN",3.6,107,4,6,1,0)
^^1^1^2920323^^^
"KRN",3.6,107,4,6,1,1,0)
Comment to indicate approval or disapproval for the Additional Order.
"KRN",3.6,108,-1)
0^1
"KRN",3.6,108,0)
FHDIDIP^Meal Pattern
"KRN",3.6,108,1,0)
^^3^3^2940119^^^
"KRN",3.6,108,1,1,0)
|1| on ward |2|, room |3| has no meal pattern for
"KRN",3.6,108,1,2,0)
|4|
"KRN",3.6,108,1,3,0)
Effective |5|
"KRN",3.6,108,3,0)
^^1^1^2940119^^^
"KRN",3.6,108,3,1,0)
Bulletin Ward Clinician when a Diet Order has no Meal Pattern.
"KRN",3.6,108,4,0)
^3.64A^5^5
"KRN",3.6,108,4,1,0)
1
"KRN",3.6,108,4,1,1,0)
^^1^1^2940119^^
"KRN",3.6,108,4,1,1,1,0)
Patient name
"KRN",3.6,108,4,2,0)
2
"KRN",3.6,108,4,2,1,0)
^^1^1^2940119^^
"KRN",3.6,108,4,2,1,1,0)
Current ward
"KRN",3.6,108,4,3,0)
3
"KRN",3.6,108,4,3,1,0)
^^1^1^2940119^^
"KRN",3.6,108,4,3,1,1,0)
Room-Bed
"KRN",3.6,108,4,4,0)
4
"KRN",3.6,108,4,4,1,0)
^^1^1^2940119^^
"KRN",3.6,108,4,4,1,1,0)
Diet order
"KRN",3.6,108,4,5,0)
5
"KRN",3.6,108,4,5,1,0)
^^1^1^2940119^^^^
"KRN",3.6,108,4,5,1,1,0)
Effective date of diet order
"KRN",19,2082,-1)
0^78
"KRN",19,2082,0)
FHDMP^Patient Data Log^^R^^^^^^^^DIETETICS
"KRN",19,2082,1,0)
^19.06^4^4^3040623^^^^
"KRN",19,2082,1,1,0)
This option will dump all of the dietetic data for a particular
"KRN",19,2082,1,2,0)
admission for a given patient. It includes all of the
"KRN",19,2082,1,3,0)
'captured' data such as who entered the order and the exact
"KRN",19,2082,1,4,0)
date and time of entry.
"KRN",19,2082,25)
FHDMP
"KRN",19,2082,"U")
PATIENT DATA LOG
"KRN",19,2083,-1)
0^272
"KRN",19,2083,0)
FHSITE^Modify Site Parameters^^R^^^^^^^^
"KRN",19,2083,1,0)
^19.06^2^2^3040524^^^^
"KRN",19,2083,1,1,0)
Allows for the modification of the entries in the FH Site
"KRN",19,2083,1,2,0)
Parameter file (119.9).
"KRN",19,2083,25)
FHSYSP
"KRN",19,2083,"U")
MODIFY SITE PARAMETERS
"KRN",19,2085,-1)
0^213
"KRN",19,2085,0)
FHPATM^Patient Movements^^R^^^^^^^^
"KRN",19,2085,1,0)
3^^3^3^2880717^
"KRN",19,2085,1,1,0)
This option will produce a listing of all patient movements (admissions,
"KRN",19,2085,1,2,0)
discharges and transfers) from a specified date/time until the
"KRN",19,2085,1,3,0)
present.
"KRN",19,2085,25)
FHPATM
"KRN",19,2085,"U")
PATIENT MOVEMENTS
"KRN",19,2086,-1)
0^138
"KRN",19,2086,0)
FHNU4^Input Menu Data^^R^^^^^^^^
"KRN",19,2086,1,0)
1^^2^2^2931201^^
"KRN",19,2086,1,1,0)
This option allows a user to create and/or edit a menu in the
"KRN",19,2086,1,2,0)
User Menu file (112.6).
"KRN",19,2086,25)
FHNU4
"KRN",19,2086,"U")
INPUT MENU DATA
"KRN",19,2087,-1)
0^135
"KRN",19,2087,0)
FHNU1P^View/Print Menu^^R^^^^^^^^
"KRN",19,2087,1,0)
^^2^2^2880717^^^^
"KRN",19,2087,1,1,0)
This option allows a user to display and/or print a menu contained
"KRN",19,2087,1,2,0)
in the User Menu file (112.6).
"KRN",19,2087,25)
FHNU1
"KRN",19,2087,"U")
VIEW/PRINT MENU
"KRN",19,2088,-1)
0^134
"KRN",19,2088,0)
FHNU1D^View Meal^^R^^^^^^^^
"KRN",19,2088,1,0)
^^2^2^2931027^^^^
"KRN",19,2088,1,1,0)
This option will display a meal contained in the User Menu
"KRN",19,2088,1,2,0)
file (112.6).
"KRN",19,2088,25)
EN1^FHNU1
"KRN",19,2088,"U")
VIEW MEAL
"KRN",19,2089,-1)
0^136
"KRN",19,2089,0)
FHNU2^Print Analysis (32 Nutrients)^^R^^^^^^^^
"KRN",19,2089,1,0)
^^2^2^2931027^^^^
"KRN",19,2089,1,1,0)
This option produces a complete analysis of a User Menu including
"KRN",19,2089,1,2,0)
all 32 nutrients, meal and daily totals, and %RDA values.
"KRN",19,2089,25)
FHNU2
"KRN",19,2089,"U")
PRINT ANALYSIS (32 NUTRIENTS)
"KRN",19,2090,-1)
0^142
"KRN",19,2090,0)
FHNU8^Print Nutrient Intake Study (10 Nutrients)^^R^^^^^^^^
"KRN",19,2090,1,0)
^^2^2^2880717^^^^
"KRN",19,2090,1,1,0)
This option will produce a short-form analysis, using 10 nutrients,
"KRN",19,2090,1,2,0)
of a User Menu for calorie count purposes.
"KRN",19,2090,25)
FHNU8
"KRN",19,2090,"U")
PRINT NUTRIENT INTAKE STUDY (1
"KRN",19,2091,-1)
0^139
"KRN",19,2091,0)
FHNU5^Abbreviated Analysis^^R^^^^^^^^
"KRN",19,2091,1,0)
^^4^4^2880717^^^
"KRN",19,2091,1,1,0)
This option allows for entry and analysis of a group of food items
"KRN",19,2091,1,2,0)
selected from the Food Nutrient file. It is designed for a quick analysis
"KRN",19,2091,1,3,0)
and does not save the items selected nor does it analyze a
"KRN",19,2091,1,4,0)
pre-existing User Menu entry.
"KRN",19,2091,25)
FHNU5
"KRN",19,2091,"U")
ABBREVIATED ANALYSIS
"KRN",19,2092,-1)
0^144
"KRN",19,2092,0)
FHNUM^Energy/Nutrient Analysis^^M^^^^^^^^^^1
"KRN",19,2092,1,0)
^^2^2^2931027^^^^
"KRN",19,2092,1,1,0)
This menu allows access to all of the Energy/Nutrient options
"KRN",19,2092,1,2,0)
except for the file management options.
"KRN",19,2092,10,0)
^19.01PI^6^6
"KRN",19,2092,10,1,0)
2088^VM
"KRN",19,2092,10,1,"^")
FHNU1D
"KRN",19,2092,10,2,0)
2087^PM
"KRN",19,2092,10,2,"^")
FHNU1P
"KRN",19,2092,10,3,0)
2089^AN
"KRN",19,2092,10,3,"^")
FHNU2
"KRN",19,2092,10,4,0)
2086^MD
"KRN",19,2092,10,4,"^")
FHNU4
"KRN",19,2092,10,5,0)
2091^AA
"KRN",19,2092,10,5,"^")
FHNU5
"KRN",19,2092,10,6,0)
2090^NI
"KRN",19,2092,10,6,"^")
FHNU8
"KRN",19,2092,20)
W @IOF,!!?16,"E N E R G Y / N U T R I E N T   A N A L Y S I S",!!!
"KRN",19,2092,99)
56581,48190
"KRN",19,2092,"U")
ENERGY/NUTRIENT ANALYSIS
"KRN",19,2093,-1)
0^121
"KRN",19,2093,0)
FHNO1I^Supplemental Feeding Inquiry^^R^^^^^^^^
"KRN",19,2093,1,0)
^19.06^1^1^3030512^^^^
"KRN",19,2093,1,1,0)
Displays current supplemental feedings ordered for an inpatient.
"KRN",19,2093,25)
EN2^FHNO7
"KRN",19,2093,"U")
SUPPLEMENTAL FEEDING INQUIRY
"KRN",19,2094,-1)
0^120
"KRN",19,2094,0)
FHNO1E^Change Patient Supplemental Feedings^^R^^^^^^^^
"KRN",19,2094,1,0)
^19.06^1^1^3030512^^^^
"KRN",19,2094,1,1,0)
Allows editing of supplemental feedings ordered for an inpatient.
"KRN",19,2094,25)
FHNO5
"KRN",19,2094,"U")
CHANGE PATIENT SUPPLEMENTAL FE
"KRN",19,2095,-1)
0^122
"KRN",19,2095,0)
FHNO2^Run SF Labels/Consolid Ingred List^^R^^^^^^^^
"KRN",19,2095,1,0)
^19.06^3^3^3050131^^^^
"KRN",19,2095,1,1,0)
This option will produce supplemental feeding labels for any
"KRN",19,2095,1,2,0)
selected feeding period as well as a consolidated ingredient
"KRN",19,2095,1,3,0)
requirements list.
"KRN",19,2095,25)
FHNO2
"KRN",19,2095,"U")
RUN SF LABELS/CONSOLID INGRED 
"KRN",19,2096,-1)
0^123
"KRN",19,2096,0)
FHNO3^Ward Supplemental Feeding Lists^^R^^^^^^^^
"KRN",19,2096,1,0)
^19.06^5^5^3030512^^^^
"KRN",19,2096,1,1,0)
This option produces a page for each ward listing all patients
"KRN",19,2096,1,2,0)
having a current supplemental feeding order as well as the
"KRN",19,2096,1,3,0)
actual feeding items. Optionally, a site parameter allows for
"KRN",19,2096,1,4,0)
this listing to contain an ingredient pick list for delivery
"KRN",19,2096,1,5,0)
purposes if desired.
"KRN",19,2096,25)
FHNO3
"KRN",19,2096,"U")
WARD SUPPLEMENTAL FEEDING LIST
"KRN",19,2097,-1)
0^130
"KRN",19,2097,0)
FHNOM^Supplemental Feedings^^M^^^^^^^^^^1
"KRN",19,2097,1,0)
^^2^2^2950315^^^^
"KRN",19,2097,1,1,0)
This menu allows entry to all supplemental feeding options
"KRN",19,2097,1,2,0)
except the file management options.
"KRN",19,2097,10,0)
^19.01PI^12^7
"KRN",19,2097,10,1,0)
2094^SF
"KRN",19,2097,10,1,"^")
FHNO1E
"KRN",19,2097,10,2,0)
2093^IN
"KRN",19,2097,10,2,"^")
FHNO1I
"KRN",19,2097,10,3,0)
2095^LA
"KRN",19,2097,10,3,"^")
FHNO2
"KRN",19,2097,10,4,0)
2096^WL
"KRN",19,2097,10,4,"^")
FHNO3
"KRN",19,2097,10,10,0)
2139^WR
"KRN",19,2097,10,10,"^")
FHNO9
"KRN",19,2097,10,11,0)
2140^WP
"KRN",19,2097,10,11,"^")
FHNO10
"KRN",19,2097,10,12,0)
2187^SH
"KRN",19,2097,10,12,"^")
FHNO12
"KRN",19,2097,20)
W @IOF,!!?19,"S U P P L E M E N T A L   F E E D I N G S",!!!
"KRN",19,2097,99)
59709,25880
"KRN",19,2097,"U")
SUPPLEMENTAL FEEDINGS
"KRN",19,2098,-1)
0^140
"KRN",19,2098,0)
FHNU6^Enter/Edit Nutrients^^R^^^^^^^^
"KRN",19,2098,1,0)
^^3^3^2890606^^
"KRN",19,2098,1,1,0)
This option allows for additions and editing of entries in the
"KRN",19,2098,1,2,0)
Food Nutrients file (112). The nutrient values for USDA items
"KRN",19,2098,1,3,0)
cannot be edited.
"KRN",19,2098,25)
EN2^FHNU
"KRN",19,2098,"U")
ENTER/EDIT NUTRIENTS
"KRN",19,2099,-1)
0^124
"KRN",19,2099,0)
FHNO4^Enter/Edit Supplemental Feedings^^R^^^^^^^^
"KRN",19,2099,1,0)
^^2^2^2880717^^
"KRN",19,2099,1,1,0)
This option allows for the addition/editing of items in the
"KRN",19,2099,1,2,0)
Supplemental Feedings file (118).
"KRN",19,2099,25)
EN3^FHNO1
"KRN",19,2099,"U")
ENTER/EDIT SUPPLEMENTAL FEEDIN
"KRN",19,2100,-1)
0^126
"KRN",19,2100,0)
FHNO6^Enter/Edit Supplemental Feeding Menus^^R^^^^^^^^
"KRN",19,2100,1,0)
^19.06^2^2^3030710^^^
"KRN",19,2100,1,1,0)
This option allows for the creation/editing of supplemental
"KRN",19,2100,1,2,0)
feeding menus in the Supplemental Feeding menu file (118.1).
"KRN",19,2100,25)
EN4^FHNO1
"KRN",19,2100,"U")
ENTER/EDIT SUPPLEMENTAL FEEDIN
"KRN",19,2101,-1)
2^100
"KRN",19,2101,0)
FHMGR^Dietetics Management^^M^.5^^^^^^^29^^1
"KRN",19,2101,10,0)
^19.01IP^12^6
"KRN",19,2101,10,3,0)
2164^AD
"KRN",19,2101,10,3,"^")
FHMGRA
"KRN",19,2101,10,5,0)
8756^DF
"KRN",19,2101,10,5,"^")
FHPRG
"KRN",19,2101,10,8,0)
2170^SM
"KRN",19,2101,10,8,"^")
FHSYSM
"KRN",19,2101,10,10,0)
2172^CM
"KRN",19,2101,10,10,"^")
FHMGRC
"KRN",19,2101,10,11,0)
2173^XF
"KRN",19,2101,10,11,"^")
FHFILM
"KRN",19,2101,10,12,0)
11726^OM
"KRN",19,2101,10,12,"^")
FHMGROM
"KRN",19,2101,"U")
DIETETICS MANAGEMENT
"KRN",19,2102,-1)
0^77
"KRN",19,2102,0)
FHDIET^Clinical Dietetics^^M^^^^^^^^DIETETICS^^1
"KRN",19,2102,1,0)
^^2^2^2950309^^^^
"KRN",19,2102,1,1,0)
This menu contains all of the various options that the clinical
"KRN",19,2102,1,2,0)
dietetics staff will require.
"KRN",19,2102,10,0)
^19.01PI^13^12
"KRN",19,2102,10,1,0)
3498^NM
"KRN",19,2102,10,1,"^")
FHASCM
"KRN",19,2102,10,2,0)
2092^EA
"KRN",19,2102,10,2,"^")
FHNUM
"KRN",19,2102,10,3,0)
2097^SF
"KRN",19,2102,10,3,"^")
FHNOM
"KRN",19,2102,10,4,0)
2085^PM
"KRN",19,2102,10,4,"^")
FHPATM
"KRN",19,2102,10,5,0)
2115^DO
"KRN",19,2102,10,5,"^")
FHORDM
"KRN",19,2102,10,6,0)
2124^DC
"KRN",19,2102,10,6,"^")
FHORCM
"KRN",19,2102,10,7,0)
2156^DR
"KRN",19,2102,10,7,"^")
FHCDLST
"KRN",19,2102,10,8,0)
2185^SO
"KRN",19,2102,10,8,"^")
FHSPM
"KRN",19,2102,10,9,0)
2244^FP
"KRN",19,2102,10,9,"^")
FHSELM
"KRN",19,2102,10,10,0)
8746^TF
"KRN",19,2102,10,10,"^")
FHCTF
"KRN",19,2102,10,12,0)
8774^LE
"KRN",19,2102,10,12,"^")
FHASE7
"KRN",19,2102,10,13,0)
8784^PE
"KRN",19,2102,10,13,"^")
FHORX2
"KRN",19,2102,15)

"KRN",19,2102,20)
S FHA1=2 D ^FHVER
"KRN",19,2102,99)
56581,48220
"KRN",19,2102,99.1)
55410,42176
"KRN",19,2102,"U")
CLINICAL DIETETICS
"KRN",19,2103,-1)
0^141
"KRN",19,2103,0)
FHNU7^List Nutrient File^^R^^^^^^^^
"KRN",19,2103,1,0)
^^2^2^2890606^^^^
"KRN",19,2103,1,1,0)
This option will produce a complete listing of the Food Nutrients
"KRN",19,2103,1,2,0)
file (112) except for the actual nutrient values.
"KRN",19,2103,15)

"KRN",19,2103,20)

"KRN",19,2103,25)
EN5^FHNU
"KRN",19,2103,30)

"KRN",19,2103,60)

"KRN",19,2103,62)

"KRN",19,2103,63)

"KRN",19,2103,64)

"KRN",19,2103,65)

"KRN",19,2103,66)

"KRN",19,2103,67)

"KRN",19,2103,"U")
LIST NUTRIENT FILE
"KRN",19,2104,-1)
0^125
"KRN",19,2104,0)
FHNO5^List Supplemental Feedings^^R^^^^^^^^
"KRN",19,2104,1,0)
^^3^3^2880717^^^
"KRN",19,2104,1,1,0)
This option will list all supplemental feedings contained
"KRN",19,2104,1,2,0)
in the Supplemental Feedings file (118) along will associated
"KRN",19,2104,1,3,0)
data elements.
"KRN",19,2104,25)
EN6^FHNO1
"KRN",19,2104,"U")
LIST SUPPLEMENTAL FEEDINGS
"KRN",19,2105,-1)
0^127
"KRN",19,2105,0)
FHNO7^List Supplemental Feeding Menus^^R^^^^^^^^
"KRN",19,2105,1,0)
^^3^3^2880717^^^^
"KRN",19,2105,1,1,0)
This option will list all supplemental feeding menus contained in the
"KRN",19,2105,1,2,0)
Supplemental Feeding Menu file (118.1) along with associated
"KRN",19,2105,1,3,0)
data elements.
"KRN",19,2105,25)
EN7^FHNO1
"KRN",19,2105,"U")
LIST SUPPLEMENTAL FEEDING MENU
"KRN",19,2106,-1)
0^137
"KRN",19,2106,0)
FHNU3^List User Menus^^R^^^^^^^^
"KRN",19,2106,1,0)
^^2^2^2950313^^^^
"KRN",19,2106,1,1,0)
This option will list the User Menus currently contained in the
"KRN",19,2106,1,2,0)
User Menu file (112.6) by user.
"KRN",19,2106,25)
EN8^FHNU
"KRN",19,2106,"U")
LIST USER MENUS
"KRN",19,2107,-1)
0^143
"KRN",19,2107,0)
FHNU9^List DRI Values^^R^^^^^^^^
"KRN",19,2107,1,0)
^19.06^1^1^3020410^^^^
"KRN",19,2107,1,1,0)
This option will list the contents of the DRI Values file (112.2).
"KRN",19,2107,25)
FHNU10
"KRN",19,2107,"U")
LIST DRI VALUES
"KRN",19,2108,-1)
0^191
"KRN",19,2108,0)
FHORD6^Enter/Edit Diets^^R^^^^^^^^
"KRN",19,2108,1,0)
^19.06^2^2^3020724^^
"KRN",19,2108,1,1,0)
This option allows for the addition/editing of diet modifications
"KRN",19,2108,1,2,0)
in the Diets file (111).
"KRN",19,2108,25)
EN1^FHORD
"KRN",19,2108,"U")
ENTER/EDIT DIETS
"KRN",19,2109,-1)
0^179
"KRN",19,2109,0)
FHORD1^Order Diet^^R^^^^^^^^
"KRN",19,2109,1,0)
^19.06^3^3^3031106^^^^
"KRN",19,2109,1,1,0)
This option allows for the ordering of a diet, which is composed
"KRN",19,2109,1,2,0)
of up to five diet modifications. The type of service, a beginning
"KRN",19,2109,1,3,0)
date/time, and an optional ending date/time are also entered.
"KRN",19,2109,25)
FHORD1
"KRN",19,2109,"U")
ORDER DIET
"KRN",19,2110,-1)
0^167
"KRN",19,2110,0)
FHORC1^Order Consult^^R^^^^^^^^
"KRN",19,2110,1,0)
1^^1^1^2920605^
"KRN",19,2110,1,1,0)
This option allows the ordering of a dietetic consult.
"KRN",19,2110,25)
EN1^FHORC
"KRN",19,2110,"U")
ORDER CONSULT
"KRN",19,2111,-1)
0^187
"KRN",19,2111,0)
FHORD3^NPO/Hold Tray^^R^^^^^^^^
"KRN",19,2111,1,0)
^^1^1^2920318^^^^
"KRN",19,2111,1,1,0)
This option allows for the entry of an NPO order.
"KRN",19,2111,25)
FHORD3
"KRN",19,2111,"U")
NPO/HOLD TRAY
"KRN",19,2112,-1)
0^188
"KRN",19,2112,0)
FHORD4^Enter/Cancel Isolation/Precautions^^R^^^^^^^^
"KRN",19,2112,1,0)
^^3^3^2880914^^^
"KRN",19,2112,1,1,0)
This option allows for placing a patient on isolation (as far
"KRN",19,2112,1,2,0)
as dietetics is concerned) or removing the patient from an
"KRN",19,2112,1,3,0)
existing isolation/precaution type.
"KRN",19,2112,25)
FHORD4
"KRN",19,2112,"U")
ENTER/CANCEL ISOLATION/PRECAUT
"KRN",19,2113,-1)
0^186
"KRN",19,2113,0)
FHORD2^Review Diet Orders^^R^^^^^^^^
"KRN",19,2113,1,0)
^19.06^3^3^3021030^^^^
"KRN",19,2113,1,1,0)
This option displays all diet orders entered as well as a
"KRN",19,2113,1,2,0)
'dietetic time line' indicating when each diet order will
"KRN",19,2113,1,3,0)
become effective.
"KRN",19,2113,25)
FHORD2
"KRN",19,2113,"U")
REVIEW DIET ORDERS
"KRN",19,2114,-1)
0^190
"KRN",19,2114,0)
FHORD5^NPO/Pass List^^R^^^^^^^^
"KRN",19,2114,1,0)
^19.06^2^2^3050111^^
"KRN",19,2114,1,1,0)
This option will produce a list of all patients who are presently
"KRN",19,2114,1,2,0)
on NPO or for whom no order exists.
"KRN",19,2114,25)
FHORD5
"KRN",19,2114,"U")
NPO/PASS LIST
"KRN",19,2115,-1)
0^194
"KRN",19,2115,0)
FHORDM^Diet Orders^^M^^^^^^^^^^1
"KRN",19,2115,1,0)
^19.06^3^3^3041209^^^^
"KRN",19,2115,1,1,0)
This menu allows access to all Diet Order functions including
"KRN",19,2115,1,2,0)
diet orders, NPO's, early/late trays, isolations,
"KRN",19,2115,1,3,0)
tubefeedings, and additional orders.
"KRN",19,2115,10,0)
^19.01IP^26^14
"KRN",19,2115,10,1,0)
2109^OD
"KRN",19,2115,10,1,"^")
FHORD1
"KRN",19,2115,10,3,0)
2111^ON
"KRN",19,2115,10,3,"^")
FHORD3
"KRN",19,2115,10,4,0)
2112^PI
"KRN",19,2115,10,4,"^")
FHORD4
"KRN",19,2115,10,5,0)
2113^PH
"KRN",19,2115,10,5,"^")
FHORD2
"KRN",19,2115,10,8,0)
2129^OE
"KRN",19,2115,10,8,"^")
FHOREL2
"KRN",19,2115,10,9,0)
2130^XE
"KRN",19,2115,10,9,"^")
FHOREL3
"KRN",19,2115,10,13,0)
2127^OT
"KRN",19,2115,10,13,"^")
FHORTF3
"KRN",19,2115,10,14,0)
2131^XT
"KRN",19,2115,10,14,"^")
FHORTF4
"KRN",19,2115,10,17,0)
2138^PP
"KRN",19,2115,10,17,"^")
FHORD9
"KRN",19,2115,10,21,0)
2151^XN
"KRN",19,2115,10,21,"^")
FHORD12
"KRN",19,2115,10,23,0)
2161^OA
"KRN",19,2115,10,23,"^")
FHORO1
"KRN",19,2115,10,24,0)
2247^PF
"KRN",19,2115,10,24,"^")
FHSEL3
"KRN",19,2115,10,25,0)
5523^PA
"KRN",19,2115,10,25,"^")
GMRA PATIENT A/AR EDIT
"KRN",19,2115,10,26,0)
8799^EP
"KRN",19,2115,10,26,"^")
FHMTKE
"KRN",19,2115,15)

"KRN",19,2115,20)
S FHA1=3 D ^FHVER
"KRN",19,2115,99)
56725,53739
"KRN",19,2115,"U")
DIET ORDERS
"KRN",19,2116,-1)
0^173
"KRN",19,2116,0)
FHORC6^List Ward Assignments^^R^^^^^^^^
"KRN",19,2116,1,0)
^^2^2^2880717^^^
"KRN",19,2116,1,1,0)
This option will list all Dietetic Wards and the assigned
"KRN",19,2116,1,2,0)
clinician.
"KRN",19,2116,25)
EN10^FHORC5
"KRN",19,2116,"U")
LIST WARD ASSIGNMENTS
"KRN",19,2117,-1)
0^174
"KRN",19,2117,0)
FHORC7^Enter/Edit Consult Types^^R^^^^^^^^
"KRN",19,2117,1,0)
^^2^2^2880717^^^
"KRN",19,2117,1,1,0)
This option allows for the creation/editing of consult types
"KRN",19,2117,1,2,0)
in the Dietetic Consults file (119.5).
"KRN",19,2117,25)
EN11^FHORC5
"KRN",19,2117,"U")
ENTER/EDIT CONSULT TYPES
"KRN",19,2118,-1)
0^175
"KRN",19,2118,0)
FHORC8^List Consult Types^^R^^^^^^^^
"KRN",19,2118,1,0)
^^3^3^2880716^^
"KRN",19,2118,1,1,0)
This option will print the various consult types contained in
"KRN",19,2118,1,2,0)
the Dietetic Consults file (119.5) along with associated
"KRN",19,2118,1,3,0)
data elements.
"KRN",19,2118,25)
EN12^FHORC5
"KRN",19,2118,"U")
LIST CONSULT TYPES
"KRN",19,2119,-1)
0^176
"KRN",19,2119,0)
FHORC9^Re-Assign Active Consults^^R^^^^^^^^
"KRN",19,2119,1,0)
^^4^4^2880717^
"KRN",19,2119,1,1,0)
This option will allow re-assignments of all active consults
"KRN",19,2119,1,2,0)
from one clinician to another. It is primarily used when a
"KRN",19,2119,1,3,0)
clinician is reassigned to other duties, leaves, or will be
"KRN",19,2119,1,4,0)
on leave for an extended period.
"KRN",19,2119,25)
FHORC4
"KRN",19,2119,"U")
RE-ASSIGN ACTIVE CONSULTS
"KRN",19,2120,-1)
0^168
"KRN",19,2120,0)
FHORC10^Consult Statistics^^R^^^^^^^^
"KRN",19,2120,1,0)
^^3^3^2880716^^
"KRN",19,2120,1,1,0)
This option will, for any specified period of time, produce
"KRN",19,2120,1,2,0)
an optional listing of all completed consults as well as
"KRN",19,2120,1,3,0)
'time units' by consult type and totals.
"KRN",19,2120,25)
FHORC3
"KRN",19,2120,"U")
CONSULT STATISTICS
"KRN",19,2121,-1)
0^169
"KRN",19,2121,0)
FHORC2^Review Active Consults^^R^^^^^^^^
"KRN",19,2121,1,0)
^^3^3^2880716^^
"KRN",19,2121,1,1,0)
This option allows a clinician or supervisor to review all
"KRN",19,2121,1,2,0)
active (e.g., not completed or cancelled) consults for
"KRN",19,2121,1,3,0)
themselves or for all clinicians.
"KRN",19,2121,25)
FHORC1
"KRN",19,2121,"U")
REVIEW ACTIVE CONSULTS
"KRN",19,2122,-1)
0^170
"KRN",19,2122,0)
FHORC3^Consult Inquiry^^R^^^^^^^^
"KRN",19,2122,1,0)
^^2^2^2880716^^
"KRN",19,2122,1,1,0)
This option displays the consult request, clinician assigned,
"KRN",19,2122,1,2,0)
and status of a consult.
"KRN",19,2122,25)
EN2^FHORC2
"KRN",19,2122,"U")
CONSULT INQUIRY
"KRN",19,2123,-1)
0^171
"KRN",19,2123,0)
FHORC4^Clear/Cancel/Reassign a Consult^^R^^^^^^^^
"KRN",19,2123,1,0)
^19.06^2^2^3040127^^^
"KRN",19,2123,1,1,0)
This option allows a clinician to clear (complete) a consult,
"KRN",19,2123,1,2,0)
cancel it, or assign it to another clinician.
"KRN",19,2123,25)
EN1^FHORC2
"KRN",19,2123,"U")
CLEAR/CANCEL/REASSIGN A CONSUL
"KRN",19,2124,-1)
0^177
"KRN",19,2124,0)
FHORCM^Dietetic Consults^^M^^^^^^^^
"KRN",19,2124,1,0)
^^2^2^2880717^
"KRN",19,2124,1,1,0)
This menu contains the majority of the Consult options and
"KRN",19,2124,1,2,0)
is for routine use by the clinical dietetic staff.
"KRN",19,2124,10,0)
^19.01PI^4^4
"KRN",19,2124,10,1,0)
2121^AC
"KRN",19,2124,10,1,"^")
FHORC2
"KRN",19,2124,10,2,0)
2122^IN
"KRN",19,2124,10,2,"^")
FHORC3
"KRN",19,2124,10,3,0)
2123^CC
"KRN",19,2124,10,3,"^")
FHORC4
"KRN",19,2124,10,4,0)
2110^OC
"KRN",19,2124,10,4,"^")
FHORC1
"KRN",19,2124,99)
56581,48193
"KRN",19,2124,"U")
DIETETIC CONSULTS
"KRN",19,2125,-1)
0^203
"KRN",19,2125,0)
FHORTF1^Enter/Edit Tubefeeding Products^^R^^^^^^^^
"KRN",19,2125,1,0)
^^2^2^2920505^^^
"KRN",19,2125,1,1,0)
This option allows for the creation/editing of products in the
"KRN",19,2125,1,2,0)
Tubefeeding file (118.2).
"KRN",19,2125,25)
EN1^FHORT3
"KRN",19,2125,"U")
ENTER/EDIT TUBEFEEDING PRODUCT
"KRN",19,2126,-1)
0^204
"KRN",19,2126,0)
FHORTF2^List Tubefeeding Products^^R^^^^^^^^
"KRN",19,2126,1,0)
^^3^3^2950302^^^
"KRN",19,2126,1,1,0)
This option will list all tubefeeding products in the
"KRN",19,2126,1,2,0)
Tubefeeding file (118.2) along with all associated data
"KRN",19,2126,1,3,0)
elements.
"KRN",19,2126,25)
EN2^FHORT3
"KRN",19,2126,"U")
LIST TUBEFEEDING PRODUCTS
"KRN",19,2127,-1)
0^205
"KRN",19,2127,0)
FHORTF3^Order Tubefeeding^^R^^^^^^^^
"KRN",19,2127,1,0)
^19.06^2^2^3030603^^^^
"KRN",19,2127,1,1,0)
This option allows for the ordering of a tubefeeding for an
"KRN",19,2127,1,2,0)
inpatient.
"KRN",19,2127,25)
FHORT1
"KRN",19,2127,"U")
ORDER TUBEFEEDING
"KRN",19,2128,-1)
0^196
"KRN",19,2128,0)
FHOREL1^List Early/Late Trays^^R^^^^^^^^
"KRN",19,2128,1,0)
^19.06^4^4^3040524^^^^
"KRN",19,2128,1,1,0)
This option will list, for a specified date and meal, all
"KRN",19,2128,1,2,0)
early and late tray orders.
"KRN",19,2128,1,3,0)

"KRN",19,2128,1,4,0)
As of Version 5.5, this report will list outpatient E/L trays as well.
"KRN",19,2128,25)
FHORE2
"KRN",19,2128,"U")
LIST EARLY/LATE TRAYS
"KRN",19,2129,-1)
0^197
"KRN",19,2129,0)
FHOREL2^Order Early/Late Tray^^R^^^^^^^^
"KRN",19,2129,1,0)
^19.06^5^5^3030513^^^^
"KRN",19,2129,1,1,0)
This option will allow the ordering of an early or late tray
"KRN",19,2129,1,2,0)
for a patient. A series of trays, for specified days of the
"KRN",19,2129,1,3,0)
week, may also be ordered in the case of patients on chemotherapy
"KRN",19,2129,1,4,0)
or radiation therapy needing early or late trays on a
"KRN",19,2129,1,5,0)
consistent basis.
"KRN",19,2129,25)
FHORE1
"KRN",19,2129,"U")
ORDER EARLY/LATE TRAY
"KRN",19,2130,-1)
0^198
"KRN",19,2130,0)
FHOREL3^Cancel Early/Late Tray^^R^^^^^^^^
"KRN",19,2130,1,0)
^^2^2^2880717^
"KRN",19,2130,1,1,0)
This option will allow the cancellation of an early or late
"KRN",19,2130,1,2,0)
tray order. Optionally, all future orders may be cancelled.
"KRN",19,2130,25)
FHORE3
"KRN",19,2130,"U")
CANCEL EARLY/LATE TRAY
"KRN",19,2131,-1)
0^206
"KRN",19,2131,0)
FHORTF4^Cancel Tubefeeding Order^^R^^^^^^^^
"KRN",19,2131,1,0)
^^2^2^2880717^
"KRN",19,2131,1,1,0)
This option allows for the cancellation of an existing
"KRN",19,2131,1,2,0)
tubefeeding order.
"KRN",19,2131,25)
EN3^FHORT2
"KRN",19,2131,"U")
CANCEL TUBEFEEDING ORDER
"KRN",19,2132,-1)
0^128
"KRN",19,2132,0)
FHNO8^Enter/Edit Bulk Ward Feedings^^R^^^^^^^^
"KRN",19,2132,1,0)
^19.06^2^2^3020729^^^^
"KRN",19,2132,1,1,0)
This option allows for adding/editing bulk feeding items to be
"KRN",19,2132,1,2,0)
delivered to each ward.
"KRN",19,2132,25)
FHNO4
"KRN",19,2132,"U")
ENTER/EDIT BULK WARD FEEDINGS
"KRN",19,2134,-1)
0^240
"KRN",19,2134,0)
FHPRO2^Enter/Edit Nutrition Locations^^R^^^^^^^^
"KRN",19,2134,1,0)
^19.06^4^4^3041109^^^^
"KRN",19,2134,1,1,0)
This option allows for creating/editing of locations in the Nutrition
"KRN",19,2134,1,2,0)
Location (#119.6) file. Locations are selected from those in either the
"KRN",19,2134,1,3,0)
MAS WARD (#42) or HOSPITAL LOCATION (#44) files. As of Version 5.5, this
"KRN",19,2134,1,4,0)
option allows creation/editing of outpatient locations.
"KRN",19,2134,25)
EN2^FHPRO
"KRN",19,2134,"U")
ENTER/EDIT NUTRITION LOCATIONS
"KRN",19,2135,-1)
0^192
"KRN",19,2135,0)
FHORD7^List Diets^^R^^^^^^^^
"KRN",19,2135,1,0)
^^2^2^2880714^
"KRN",19,2135,1,1,0)
This option will list all diets contained in the Diets file (111)
"KRN",19,2135,1,2,0)
along with all associated data elements.
"KRN",19,2135,25)
EN2^FHORD
"KRN",19,2135,"U")
LIST DIETS
"KRN",19,2136,-1)
0^172
"KRN",19,2136,0)
FHORC5^Enter/Edit Ward Assignments^^R^^^^^^^^
"KRN",19,2136,1,0)
^^3^3^2880716^^
"KRN",19,2136,1,1,0)
This option allows for the assignment of clinicians to each
"KRN",19,2136,1,2,0)
ward. This assignment will be used to assign consults arising
"KRN",19,2136,1,3,0)
from that ward to the indicated clinician.
"KRN",19,2136,25)
EN9^FHORC5
"KRN",19,2136,99)
55481,41901
"KRN",19,2136,"U")
ENTER/EDIT WARD ASSIGNMENTS
"KRN",19,2138,-1)
0^193
"KRN",19,2138,0)
FHORD9^Patient Profile^^R^^^^^^^^
"KRN",19,2138,1,0)
^19.06^8^8^3040908^^^^
"KRN",19,2138,1,1,0)
This option will produce a comprehensive display of most
"KRN",19,2138,1,2,0)
dietetic orders and data associated with a patient's
"KRN",19,2138,1,3,0)
admission. It includes diet orders, active or saved consults,
"KRN",19,2138,1,4,0)
early/late tray requests for the next 72 hours, standing
"KRN",19,2138,1,5,0)
orders, tubefeedings, supplemental feedings, etc.
"KRN",19,2138,1,6,0)

"KRN",19,2138,1,7,0)
As of Version 5.5, this report will include outpatient data
"KRN",19,2138,1,8,0)
as well, including recurring meals, special meals and guest meals.
"KRN",19,2138,25)
FHORD6
"KRN",19,2138,"U")
PATIENT PROFILE
"KRN",19,2139,-1)
0^129
"KRN",19,2139,0)
FHNO9^Review Bulk Nutrition Location Feedings^^R^^^^^^^^DIETETICS
"KRN",19,2139,1,0)
^19.06^2^2^3040623^^^^
"KRN",19,2139,1,1,0)
This option will display the bulk ward supplemental feeding
"KRN",19,2139,1,2,0)
items currently ordered for any selected ward.
"KRN",19,2139,25)
EN2^FHNO4
"KRN",19,2139,"U")
REVIEW BULK NUTRITION LOCATION
"KRN",19,2140,-1)
0^117
"KRN",19,2140,0)
FHNO10^Print Bulk Feedings/Cost Report^^R^^^^^^^^
"KRN",19,2140,1,0)
^19.06^4^4^3030617^^^^
"KRN",19,2140,1,1,0)
This option will produce a delivery listing or labels
"KRN",19,2140,1,2,0)
for all bulk supplemental feedings for all wards served by a
"KRN",19,2140,1,3,0)
Supplemental Feeding Site. A cost report and consolidated pick
"KRN",19,2140,1,4,0)
list will also be produced.
"KRN",19,2140,25)
FHNO41
"KRN",19,2140,"U")
PRINT BULK FEEDINGS/COST REPOR
"KRN",19,2141,-1)
0^199
"KRN",19,2141,0)
FHORI1^Enter/Edit Isolation/Precaution Types^^R^^^^^^^^
"KRN",19,2141,1,0)
^^2^2^2880717^
"KRN",19,2141,1,1,0)
This option allows for the creation/editing of entries in the
"KRN",19,2141,1,2,0)
Isolation/Precaution Type file (119.4).
"KRN",19,2141,25)
EN1^FHORD4
"KRN",19,2141,"U")
ENTER/EDIT ISOLATION/PRECAUTIO
"KRN",19,2142,-1)
0^200
"KRN",19,2142,0)
FHORI2^List Isolation/Precaution Types^^R^^^^^^^^
"KRN",19,2142,1,0)
^^3^3^2880717^
"KRN",19,2142,1,1,0)
This option will list all of the current entries in the
"KRN",19,2142,1,2,0)
Isolation/Precaution Type file (119.4) along with the
"KRN",19,2142,1,3,0)
associated data elements.
"KRN",19,2142,25)
EN2^FHORD4
"KRN",19,2142,"U")
LIST ISOLATION/PRECAUTION TYPE
"KRN",19,2143,-1)
0^178
"KRN",19,2143,0)
FHORCX^Consult Management^^M^^^^^^^^
"KRN",19,2143,1,0)
^^3^3^2880717^
"KRN",19,2143,1,1,0)
This menu allows access to the file management options associated
"KRN",19,2143,1,2,0)
with the consult module as well as access to consult statistics
"KRN",19,2143,1,3,0)
and the ability to perform mass re-assignment of consults.
"KRN",19,2143,10,0)
^19.01PI^6^6
"KRN",19,2143,10,1,0)
2136^WE
"KRN",19,2143,10,1,"^")
FHORC5
"KRN",19,2143,10,2,0)
2116^WL
"KRN",19,2143,10,2,"^")
FHORC6
"KRN",19,2143,10,3,0)
2117^CE
"KRN",19,2143,10,3,"^")
FHORC7
"KRN",19,2143,10,4,0)
2118^CL
"KRN",19,2143,10,4,"^")
FHORC8
"KRN",19,2143,10,5,0)
2119^CR
"KRN",19,2143,10,5,"^")
FHORC9
"KRN",19,2143,10,6,0)
2120^CX
"KRN",19,2143,10,6,"^")
FHORC10
"KRN",19,2143,99)
56581,48194
"KRN",19,2143,"U")
CONSULT MANAGEMENT
"KRN",19,2144,-1)
0^195
"KRN",19,2144,0)
FHORDX^Diet Order Management^^M^^^^^^^^
"KRN",19,2144,1,0)
^^2^2^2940707^^^^
"KRN",19,2144,1,1,0)
This menu allows access to all file management options
"KRN",19,2144,1,2,0)
relating to diet orders, tubefeedings and isolations.
"KRN",19,2144,10,0)
^19.01PI^6^6
"KRN",19,2144,10,1,0)
2108^DE
"KRN",19,2144,10,1,"^")
FHORD6
"KRN",19,2144,10,2,0)
2141^IE
"KRN",19,2144,10,2,"^")
FHORI1
"KRN",19,2144,10,3,0)
2125^TE
"KRN",19,2144,10,3,"^")
FHORTF1
"KRN",19,2144,10,4,0)
2135^DL
"KRN",19,2144,10,4,"^")
FHORD7
"KRN",19,2144,10,5,0)
2142^IL
"KRN",19,2144,10,5,"^")
FHORI2
"KRN",19,2144,10,6,0)
2126^TL
"KRN",19,2144,10,6,"^")
FHORTF2
"KRN",19,2144,99)
56581,48200
"KRN",19,2144,"U")
DIET ORDER MANAGEMENT
"KRN",19,2145,-1)
0^145
"KRN",19,2145,0)
FHNUX^Energy/Nutrient Management^^M^^^^^^^^
"KRN",19,2145,1,0)
^^2^2^2931027^^
"KRN",19,2145,1,1,0)
This menu allows access to the file management options associated
"KRN",19,2145,1,2,0)
with the Energy/Nutrient module.
"KRN",19,2145,10,0)
^19.01PI^6^6
"KRN",19,2145,10,1,0)
2098^NE
"KRN",19,2145,10,1,"^")
FHNU6
"KRN",19,2145,10,2,0)
2103^NL
"KRN",19,2145,10,2,"^")
FHNU7
"KRN",19,2145,10,3,0)
2107^RL
"KRN",19,2145,10,3,"^")
FHNU9
"KRN",19,2145,10,4,0)
2106^ML
"KRN",19,2145,10,4,"^")
FHNU3
"KRN",19,2145,10,5,0)
2177^RE
"KRN",19,2145,10,5,"^")
FHNU11
"KRN",19,2145,10,6,0)
8793^NG
"KRN",19,2145,10,6,"^")
FHNU12
"KRN",19,2145,99)
58904,31206
"KRN",19,2145,"U")
ENERGY/NUTRIENT MANAGEMENT
"KRN",19,2146,-1)
0^131
"KRN",19,2146,0)
FHNOX^Supplemental Feeding Management^^M^^^^^^^^
"KRN",19,2146,1,0)
^^2^2^2941018^^^^
"KRN",19,2146,1,1,0)
This menu contains the file management options pertaining to the
"KRN",19,2146,1,2,0)
Supplemental Feedings module.
"KRN",19,2146,10,0)
^19.01PI^5^5
"KRN",19,2146,10,1,0)
2132^BE
"KRN",19,2146,10,1,"^")
FHNO8
"KRN",19,2146,10,2,0)
2099^SE
"KRN",19,2146,10,2,"^")
FHNO4
"KRN",19,2146,10,3,0)
2104^SL
"KRN",19,2146,10,3,"^")
FHNO5
"KRN",19,2146,10,4,0)
2105^ML
"KRN",19,2146,10,4,"^")
FHNO7
"KRN",19,2146,10,5,0)
2100^ME
"KRN",19,2146,10,5,"^")
FHNO6
"KRN",19,2146,99)
56581,48187
"KRN",19,2146,"U")
SUPPLEMENTAL FEEDING MANAGEMEN
"KRN",19,2147,-1)
0^207
"KRN",19,2147,0)
FHORTF5^Preparation/Delivery of Tubefeedings^^R^^^^^^^^DIETETICS
"KRN",19,2147,1,0)
^19.06^1^1^3030512^^^^
"KRN",19,2147,1,1,0)
This option produces the Preparation/Delivery and the Pull List.
"KRN",19,2147,20)

"KRN",19,2147,25)
ALL^FHORT5
"KRN",19,2147,"U")
PREPARATION/DELIVERY OF TUBEFE
"KRN",19,2148,-1)
0^287
"KRN",19,2148,0)
FHWARD^Dietetic Orders^^M^^^^^^^^DIETETICS^^1
"KRN",19,2148,1,0)
^^5^5^2940107^^^^
"KRN",19,2148,1,1,0)
This menu allows access to all dietetic order options normally given
"KRN",19,2148,1,2,0)
to ward personnel and includes the ability to order diets, consults,
"KRN",19,2148,1,3,0)
early/late trays, NPO's, tubefeedings, and enter additional
"KRN",19,2148,1,4,0)
orders. Supplemental feedings and standing orders are not
"KRN",19,2148,1,5,0)
included as normal ward ordering functions.
"KRN",19,2148,10,0)
^19.01PI^15^13
"KRN",19,2148,10,1,0)
2130^XE
"KRN",19,2148,10,1,"^")
FHOREL3
"KRN",19,2148,10,2,0)
2131^XT
"KRN",19,2148,10,2,"^")
FHORTF4
"KRN",19,2148,10,3,0)
2138^PP
"KRN",19,2148,10,3,"^")
FHORD9
"KRN",19,2148,10,5,0)
2112^PI
"KRN",19,2148,10,5,"^")
FHORD4
"KRN",19,2148,10,6,0)
2111^ON
"KRN",19,2148,10,6,"^")
FHORD3
"KRN",19,2148,10,7,0)
2109^OD
"KRN",19,2148,10,7,"^")
FHORD1
"KRN",19,2148,10,8,0)
2129^OE
"KRN",19,2148,10,8,"^")
FHOREL2
"KRN",19,2148,10,9,0)
2110^OC
"KRN",19,2148,10,9,"^")
FHORC1
"KRN",19,2148,10,10,0)
2127^OT
"KRN",19,2148,10,10,"^")
FHORTF3
"KRN",19,2148,10,12,0)
2151^XN
"KRN",19,2148,10,12,"^")
FHORD12
"KRN",19,2148,10,13,0)
2113^PH
"KRN",19,2148,10,13,"^")
FHORD2
"KRN",19,2148,10,14,0)
2161^OA
"KRN",19,2148,10,14,"^")
FHORO1
"KRN",19,2148,10,15,0)
5523^PA
"KRN",19,2148,10,15,"^")
GMRA PATIENT A/AR EDIT
"KRN",19,2148,15)

"KRN",19,2148,20)
S FHA1=3 D ^FHVER
"KRN",19,2148,99)
56725,53739
"KRN",19,2148,"U")
DIETETIC ORDERS
"KRN",19,2149,-1)
0^180
"KRN",19,2149,0)
FHORD10^Nutrition Location Diet Order List^^R^^^^^^^^DIETETICS
"KRN",19,2149,1,0)
^19.06^4^4^3041214^^^^
"KRN",19,2149,1,1,0)
This option will produce a list of all patients on a ward along
"KRN",19,2149,1,2,0)
with a majority of the dietetic orders for the patient: diet
"KRN",19,2149,1,3,0)
order, active consults, standing orders, early/late tray requests
"KRN",19,2149,1,4,0)
for the next 72 hours, etc.
"KRN",19,2149,25)
FHORD8
"KRN",19,2149,99.1)
59023,24463
"KRN",19,2149,"U")
NUTRITION LOCATION DIET ORDER 
"KRN",19,2150,-1)
0^181
"KRN",19,2150,0)
FHORD11^Actual Diet Census^^R^^^^^^^^
"KRN",19,2150,1,0)
^^3^3^3040322^
"KRN",19,2150,1,1,0)
This option will produce, for a specified date/time and Production
"KRN",19,2150,1,2,0)
Facility, the production diet counts based upon the tallied diets
"KRN",19,2150,1,3,0)
of all inpatients and outpatients.
"KRN",19,2150,25)
FHORD9
"KRN",19,2150,"U")
ACTUAL DIET CENSUS
"KRN",19,2151,-1)
0^182
"KRN",19,2151,0)
FHORD12^Cancel NPO/Withhold Order^^R^^^^^^^^DIETETICS
"KRN",19,2151,1,0)
^19.06^2^2^3020418^^^^
"KRN",19,2151,1,1,0)
This option will list all current/future NPO or Withhold orders
"KRN",19,2151,1,2,0)
and allows cancellation (or discontinuation) of the order.
"KRN",19,2151,25)
EN2^FHORD3
"KRN",19,2151,"U")
CANCEL NPO/WITHHOLD ORDER
"KRN",19,2152,-1)
0^183
"KRN",19,2152,0)
FHORD13^Diet Activity Report/Labels^^R^^^^^^^^
"KRN",19,2152,1,0)
^^4^4^3040322^
"KRN",19,2152,1,1,0)
This option will produce a listing, or diet card labels, for
"KRN",19,2152,1,2,0)
all patients who have had MAS activity (e.g., change of room
"KRN",19,2152,1,3,0)
or ward) or change of diet order or type of service and all outpatient 
"KRN",19,2152,1,4,0)
meals, since the last report was run.
"KRN",19,2152,25)
FHORX1
"KRN",19,2152,30)
&
"KRN",19,2152,"U")
DIET ACTIVITY REPORT/LABELS
"KRN",19,2153,-1)
0^286
"KRN",19,2153,0)
FHUSR^Dietetic User^^M^^^^^^^^^^1
"KRN",19,2153,1,0)
^^3^3^2891106^^^
"KRN",19,2153,1,1,0)
This menu allows non-dietetic personnel access to the nutrition
"KRN",19,2153,1,2,0)
assessment option, the energy/nutrient abbreviated analysis, the
"KRN",19,2153,1,3,0)
dietetic patient profile, and the ability to review diet orders.
"KRN",19,2153,10,0)
^19.01PI^4^4
"KRN",19,2153,10,1,0)
2091^AA
"KRN",19,2153,10,1,"^")
FHNU5
"KRN",19,2153,10,2,0)
3488^DA
"KRN",19,2153,10,2,"^")
FHASMR
"KRN",19,2153,10,3,0)
2138^PP
"KRN",19,2153,10,3,"^")
FHORD9
"KRN",19,2153,10,4,0)
2113^DH
"KRN",19,2153,10,4,"^")
FHORD2
"KRN",19,2153,15)

"KRN",19,2153,20)
S FHA1=2 D ^FHVER
"KRN",19,2153,99)
56581,48222
"KRN",19,2153,"U")
DIETETIC USER
"KRN",19,2154,-1)
0^214
"KRN",19,2154,0)
FHPATP^Dietetic Patient Profile^^M^^^^^^^^^^1
"KRN",19,2154,1,0)
^^3^3^2880716^^
"KRN",19,2154,1,1,0)
This option will display all of the pertinent dietetic
"KRN",19,2154,1,2,0)
information about an inpatient -- diet orders, tubefeedings,
"KRN",19,2154,1,3,0)
active consults, early/late trays, standing orders, etc.
"KRN",19,2154,10,0)
^19.01PI^2^2
"KRN",19,2154,10,1,0)
2138^PP
"KRN",19,2154,10,1,"^")
FHORD9
"KRN",19,2154,10,2,0)
2113^DH
"KRN",19,2154,10,2,"^")
FHORD2
"KRN",19,2154,15)

"KRN",19,2154,20)
S FHA1=6 D ^FHVER
"KRN",19,2154,25)

"KRN",19,2154,99)
56581,48203
"KRN",19,2154,"U")
DIETETIC PATIENT PROFILE
"KRN",19,2155,-1)
0^118
"KRN",19,2155,0)
FHNO11^Supplemental Feeding Cost Report^^R^^^^^^^^
"KRN",19,2155,1,0)
^19.06^2^2^3030710^^^^
"KRN",19,2155,1,1,0)
This option will produce a cost report for a ward, or all wards,
"KRN",19,2155,1,2,0)
based upon the supplemental feedings currently ordered.
"KRN",19,2155,25)
FHNO6
"KRN",19,2155,"U")
SUPPLEMENTAL FEEDING COST REPO
"KRN",19,2156,-1)
0^68
"KRN",19,2156,0)
FHCDLST^Dietetic Lists/Reports^^M^^^^^^^^DIETETICS
"KRN",19,2156,1,0)
^^3^3^2950714^^^^
"KRN",19,2156,1,1,0)
This menu contains the various lists and reports most often
"KRN",19,2156,1,2,0)
required by the clinical staff or the diet communications
"KRN",19,2156,1,3,0)
office.
"KRN",19,2156,10,0)
^19.01PI^24^17
"KRN",19,2156,10,1,0)
2152^DA
"KRN",19,2156,10,1,"^")
FHORD13
"KRN",19,2156,10,2,0)
2150^DC
"KRN",19,2156,10,2,"^")
FHORD11
"KRN",19,2156,10,3,0)
2128^EL
"KRN",19,2156,10,3,"^")
FHOREL1
"KRN",19,2156,10,4,0)
2114^NL
"KRN",19,2156,10,4,"^")
FHORD5
"KRN",19,2156,10,6,0)
2149^WD
"KRN",19,2156,10,6,"^")
FHORD10
"KRN",19,2156,10,8,0)
2140^WP
"KRN",19,2156,10,8,"^")
FHNO10
"KRN",19,2156,10,9,0)
2095^LA
"KRN",19,2156,10,9,"^")
FHNO2
"KRN",19,2156,10,10,0)
2096^WL
"KRN",19,2156,10,10,"^")
FHNO3
"KRN",19,2156,10,11,0)
2169^DR
"KRN",19,2156,10,11,"^")
FHORD14
"KRN",19,2156,10,12,0)
2174^IL
"KRN",19,2156,10,12,"^")
FHORD41
"KRN",19,2156,10,13,0)
2183^SO
"KRN",19,2156,10,13,"^")
FHSP5
"KRN",19,2156,10,14,0)
2234^BL
"KRN",19,2156,10,14,"^")
FHBIR
"KRN",19,2156,10,20,0)
8777^SP
"KRN",19,2156,10,20,"^")
FHSP7
"KRN",19,2156,10,21,0)
8778^SL
"KRN",19,2156,10,21,"^")
FHSP8
"KRN",19,2156,10,22,0)
8787^TR
"KRN",19,2156,10,22,"^")
FHORTFM
"KRN",19,2156,10,23,0)
8784^PE
"KRN",19,2156,10,23,"^")
FHORX2
"KRN",19,2156,10,24,0)
8797^TT
"KRN",19,2156,10,24,"^")
FHMTKM
"KRN",19,2156,99)
59709,25232
"KRN",19,2156,"U")
DIETETIC LISTS/REPORTS
"KRN",19,2157,-1)
0^285
"KRN",19,2157,0)
FHTECH^Clinical Dietetics^^M^^^^^^^^^^1
"KRN",19,2157,1,0)
^19.06^2^2^3020913^^^^
"KRN",19,2157,1,1,0)
This menu contains all of the various options that dietetic
"KRN",19,2157,1,2,0)
technicians will require. It is the same as the FHDIET menu.
"KRN",19,2157,10,0)
^19.01IP^13^12
"KRN",19,2157,10,1,0)
2124^DC
"KRN",19,2157,10,1,"^")
FHORCM
"KRN",19,2157,10,2,0)
2115^DO
"KRN",19,2157,10,2,"^")
FHORDM
"KRN",19,2157,10,3,0)
2092^EA
"KRN",19,2157,10,3,"^")
FHNUM
"KRN",19,2157,10,4,0)
3498^NM
"KRN",19,2157,10,4,"^")
FHASCM
"KRN",19,2157,10,5,0)
2085^PM
"KRN",19,2157,10,5,"^")
FHPATM
"KRN",19,2157,10,6,0)
2097^SF
"KRN",19,2157,10,6,"^")
FHNOM
"KRN",19,2157,10,7,0)
2156^XL
"KRN",19,2157,10,7,"^")
FHCDLST
"KRN",19,2157,10,8,0)
2185^SO
"KRN",19,2157,10,8,"^")
FHSPM
"KRN",19,2157,10,9,0)
2244^FP
"KRN",19,2157,10,9,"^")
FHSELM
"KRN",19,2157,10,10,0)
8746^TF
"KRN",19,2157,10,10,"^")
FHCTF
"KRN",19,2157,10,11,0)
8774^LE
"KRN",19,2157,10,11,"^")
FHASE7
"KRN",19,2157,10,13,0)
8784^PE
"KRN",19,2157,10,13,"^")
FHORX2
"KRN",19,2157,15)

"KRN",19,2157,20)
S FHA1=2 D ^FHVER
"KRN",19,2157,99)
56581,48222
"KRN",19,2157,99.1)
58531,48799
"KRN",19,2157,"U")
CLINICAL DIETETICS
"KRN",19,2158,-1)
0^241
"KRN",19,2158,0)
FHPRO3^Enter/Edit Production Diets^^R^^^^^^^^
"KRN",19,2158,1,0)
^^2^2^2990511^^^^
"KRN",19,2158,1,1,0)
This option allows for the creation/editing of production
"KRN",19,2158,1,2,0)
diets in the Production Diet file (116.2).
"KRN",19,2158,25)
EN3^FHPRO
"KRN",19,2158,"U")
ENTER/EDIT PRODUCTION DIETS
"KRN",19,2159,-1)
0^242
"KRN",19,2159,0)
FHPRO4^List Production Diets^^R^^^^^^^^
"KRN",19,2159,1,0)
^^3^3^2911211^^^^
"KRN",19,2159,1,1,0)
This option will list all production diets contained in the
"KRN",19,2159,1,2,0)
Production Diet file (116.2) along with all associated data
"KRN",19,2159,1,3,0)
elements.
"KRN",19,2159,25)
EN4^FHPRO
"KRN",19,2159,"U")
LIST PRODUCTION DIETS
"KRN",19,2160,-1)
0^248
"KRN",19,2160,0)
FHPROM^Production Management^^M^^^^^^^^
"KRN",19,2160,1,0)
^19.06^4^4^3021031^^^^
"KRN",19,2160,1,1,0)
This menu allows access to the file management options associated
"KRN",19,2160,1,2,0)
with food production, including service points, dietetic wards,
"KRN",19,2160,1,3,0)
production diets, and production diet percentages used for
"KRN",19,2160,1,4,0)
forecasting.
"KRN",19,2160,10,0)
^19.01IP^14^9
"KRN",19,2160,10,3,0)
2158^PE
"KRN",19,2160,10,3,"^")
FHPRO3
"KRN",19,2160,10,4,0)
2159^PL
"KRN",19,2160,10,4,"^")
FHPRO4
"KRN",19,2160,10,5,0)
2198^PP
"KRN",19,2160,10,5,"^")
FHPRF1
"KRN",19,2160,10,6,0)
2201^DP
"KRN",19,2160,10,6,"^")
FHPRF4
"KRN",19,2160,10,7,0)
2236^WL
"KRN",19,2160,10,7,"^")
FHPRO6
"KRN",19,2160,10,8,0)
2217^OE
"KRN",19,2160,10,8,"^")
FHPRF5
"KRN",19,2160,10,9,0)
2218^OL
"KRN",19,2160,10,9,"^")
FHPRF6
"KRN",19,2160,10,13,0)
8753^SL
"KRN",19,2160,10,13,"^")
FHPRO10
"KRN",19,2160,10,14,0)
8802^TM
"KRN",19,2160,10,14,"^")
FHMTKMM
"KRN",19,2160,99)
59576,31605
"KRN",19,2160,"U")
PRODUCTION MANAGEMENT
"KRN",19,2161,-1)
0^201
"KRN",19,2161,0)
FHORO1^Enter Additional Order^^R^^^^^^^^
"KRN",19,2161,1,0)
^19.06^2^2^3030513^^^^
"KRN",19,2161,1,1,0)
This option will allow the user to enter an additional order
"KRN",19,2161,1,2,0)
for an inpatient.
"KRN",19,2161,25)
EN1^FHORO
"KRN",19,2161,"U")
ENTER ADDITIONAL ORDER
"KRN",19,2164,-1)
0^101
"KRN",19,2164,0)
FHMGRA^Dietetic Administration^^M^^^^^^^^^^1
"KRN",19,2164,1,0)
^19.06^2^2^3030311^^^^
"KRN",19,2164,1,1,0)
This menu allows access to all options pertaining to dietetic
"KRN",19,2164,1,2,0)
administration as well as food production.
"KRN",19,2164,10,0)
^19.01PI^14^10
"KRN",19,2164,10,2,0)
2196^XR
"KRN",19,2164,10,2,"^")
FHRECM
"KRN",19,2164,10,3,0)
2195^XI
"KRN",19,2164,10,3,"^")
FHINGM
"KRN",19,2164,10,4,0)
2160^XP
"KRN",19,2164,10,4,"^")
FHPROM
"KRN",19,2164,10,8,0)
8771^XX
"KRN",19,2164,10,8,"^")
FHADRR
"KRN",19,2164,10,9,0)
2203^XM
"KRN",19,2164,10,9,"^")
FHPRCM
"KRN",19,2164,10,10,0)
2166^AM
"KRN",19,2164,10,10,"^")
FHADMR
"KRN",19,2164,10,11,0)
4117^PR
"KRN",19,2164,10,11,"^")
FHADM
"KRN",19,2164,10,12,0)
2173^XF
"KRN",19,2164,10,12,"^")
FHFILM
"KRN",19,2164,10,13,0)
2184^SO
"KRN",19,2164,10,13,"^")
FHSPX
"KRN",19,2164,10,14,0)
2249^FP
"KRN",19,2164,10,14,"^")
FHSELX
"KRN",19,2164,15)

"KRN",19,2164,20)
S FHA1=4 D ^FHVER
"KRN",19,2164,99)
56581,48220
"KRN",19,2164,99.1)
53952,47936
"KRN",19,2164,"U")
DIETETIC ADMINISTRATION
"KRN",19,2165,-1)
0^22
"KRN",19,2165,0)
FHADMR1^Enter/Edit Served Meals^^R^^^^^^^^
"KRN",19,2165,1,0)
^19.06^3^3^3040524^^^^
"KRN",19,2165,1,1,0)
This option allows for entry and/or editing of the various values
"KRN",19,2165,1,2,0)
used in the Served Ration Report.  As of Version 5.5, this option will
"KRN",19,2165,1,3,0)
provide default values for outpatient fields.
"KRN",19,2165,25)
EN1^FHADM2
"KRN",19,2165,"U")
ENTER/EDIT SERVED MEALS
"KRN",19,2166,-1)
0^21
"KRN",19,2166,0)
FHADMR^Administrative Menu^^M^^^^^^^^DIETETICS
"KRN",19,2166,1,0)
^19.06^2^2^3040804^^^^
"KRN",19,2166,1,1,0)
This menu contains the various administrative and cost reports
"KRN",19,2166,1,2,0)
produced by the system.
"KRN",19,2166,10,0)
^19.01IP^14^12
"KRN",19,2166,10,1,0)
2165^RE
"KRN",19,2166,10,1,"^")
FHADMR1
"KRN",19,2166,10,2,0)
2167^RR
"KRN",19,2166,10,2,"^")
FHADMR2
"KRN",19,2166,10,3,0)
2168^AR
"KRN",19,2166,10,3,"^")
FHADMR3
"KRN",19,2166,10,6,0)
2175^PE
"KRN",19,2166,10,6,"^")
FHADMR4
"KRN",19,2166,10,7,0)
2176^PR
"KRN",19,2166,10,7,"^")
FHADMR5
"KRN",19,2166,10,8,0)
2155^SR
"KRN",19,2166,10,8,"^")
FHNO11
"KRN",19,2166,10,9,0)
8758^RS
"KRN",19,2166,10,9,"^")
FHCMRR1
"KRN",19,2166,10,10,0)
8759^SP
"KRN",19,2166,10,10,"^")
FHCMRR2
"KRN",19,2166,10,11,0)
8776^TC
"KRN",19,2166,10,11,"^")
FHORTF5C
"KRN",19,2166,10,12,0)
8772^QE
"KRN",19,2166,10,12,"^")
FHING12
"KRN",19,2166,10,13,0)
8773^QW
"KRN",19,2166,10,13,"^")
FHING13
"KRN",19,2166,10,14,0)
11797^GM
"KRN",19,2166,10,14,"^")
FHOMGP
"KRN",19,2166,15)

"KRN",19,2166,20)

"KRN",19,2166,99)
59751,27826
"KRN",19,2166,"U")
ADMINISTRATIVE MENU
"KRN",19,2167,-1)
0^23
"KRN",19,2167,0)
FHADMR2^Served Meals Report^^R^^^^^^^^
"KRN",19,2167,1,0)
^19.06^2^2^3040524^^^^
"KRN",19,2167,1,1,0)
This option will print the Served Ration Report for any time
"KRN",19,2167,1,2,0)
period specified.
"KRN",19,2167,25)
EN2^FHADM21
"KRN",19,2167,"U")
SERVED MEALS REPORT
"KRN",19,2168,-1)
0^25
"KRN",19,2168,0)
FHADMR3^Additional Meals Report^^R^^^^^^^^
"KRN",19,2168,1,0)
^19.06^4^4^3040524^^^^
"KRN",19,2168,1,1,0)
This option will print the individual meal counts used in the
"KRN",19,2168,1,2,0)
Served Ration Report for other than inpatients. These values
"KRN",19,2168,1,3,0)
are converted to rations when used in calculations for the
"KRN",19,2168,1,4,0)
Served Ration Report.
"KRN",19,2168,25)
FHADM3
"KRN",19,2168,"U")
ADDITIONAL MEALS REPORT
"KRN",19,2169,-1)
0^184
"KRN",19,2169,0)
FHORD14^Reprint Diet Labels^^R^^^^^^^^DIETETICS
"KRN",19,2169,1,0)
^19.06^2^2^3040623^^^^
"KRN",19,2169,1,1,0)
This option will reprint a diet card label for an individual
"KRN",19,2169,1,2,0)
patient or for all patients on a specified ward.
"KRN",19,2169,25)
FHORD13
"KRN",19,2169,"U")
REPRINT DIET LABELS
"KRN",19,2170,-1)
0^284
"KRN",19,2170,0)
FHSYSM^System Management^^M^^^^^^^^
"KRN",19,2170,1,0)
^^5^5^2911127^^^
"KRN",19,2170,1,1,0)
This menu allows a system manager to modify site parameters,
"KRN",19,2170,1,2,0)
purge dietetic data, check the integrity of the dietetic
"KRN",19,2170,1,3,0)
routines and file pointers, tally production diets for all
"KRN",19,2170,1,4,0)
inpatients, and create missing dietetic file entries for
"KRN",19,2170,1,5,0)
inpatients.
"KRN",19,2170,10,0)
^19.01PI^7^7
"KRN",19,2170,10,1,0)
2083^SP
"KRN",19,2170,10,1,"^")
FHSITE
"KRN",19,2170,10,2,0)
2171^PD
"KRN",19,2170,10,2,"^")
FHPURGE
"KRN",19,2170,10,3,0)
2238^RI
"KRN",19,2170,10,3,"^")
FHX1
"KRN",19,2170,10,4,0)
2239^RD
"KRN",19,2170,10,4,"^")
FHX2
"KRN",19,2170,10,5,0)
2240^FP
"KRN",19,2170,10,5,"^")
FHX3
"KRN",19,2170,10,6,0)
2241^DF
"KRN",19,2170,10,6,"^")
FHX4
"KRN",19,2170,10,7,0)
8754^DL
"KRN",19,2170,10,7,"^")
FHX5
"KRN",19,2170,99)
56581,48224
"KRN",19,2170,"U")
SYSTEM MANAGEMENT
"KRN",19,2171,-1)
0^250
"KRN",19,2171,0)
FHPURGE^Purge Dietetic Data^^R^^^^^^^^DIETETICS
"KRN",19,2171,1,0)
^^3^3^2931027^^^^
"KRN",19,2171,1,1,0)
This option allows the purging of dietetic data on all admissions
"KRN",19,2171,1,2,0)
for which at least 400 days have elapsed since discharge. The
"KRN",19,2171,1,3,0)
data is not archived but is permanently purged from the system.
"KRN",19,2171,25)
FHSYSK
"KRN",19,2171,"U")
PURGE DIETETIC DATA
"KRN",19,2172,-1)
0^102
"KRN",19,2172,0)
FHMGRC^Clinical Management^^M^^^^^^^^DIETETICS^^1
"KRN",19,2172,1,0)
^^2^2^2950420^^^^
"KRN",19,2172,1,1,0)
This menu allows access to all options pertaining to clinical
"KRN",19,2172,1,2,0)
dietetics.
"KRN",19,2172,10,0)
^19.01IP^10^8
"KRN",19,2172,10,1,0)
2102^CD
"KRN",19,2172,10,1,"^")
FHDIET
"KRN",19,2172,10,2,0)
2082^DM
"KRN",19,2172,10,2,"^")
FHDMP
"KRN",19,2172,10,3,0)
2144^XD
"KRN",19,2172,10,3,"^")
FHORDX
"KRN",19,2172,10,4,0)
2143^XM
"KRN",19,2172,10,4,"^")
FHORCX
"KRN",19,2172,10,5,0)
2146^XS
"KRN",19,2172,10,5,"^")
FHNOX
"KRN",19,2172,10,6,0)
2145^XE
"KRN",19,2172,10,6,"^")
FHNUX
"KRN",19,2172,10,7,0)
2173^XF
"KRN",19,2172,10,7,"^")
FHFILM
"KRN",19,2172,10,10,0)
3497^XC
"KRN",19,2172,10,10,"^")
FHASCX
"KRN",19,2172,15)

"KRN",19,2172,20)
S FHA1=5 D ^FHVER
"KRN",19,2172,99)
56581,48198
"KRN",19,2172,"U")
CLINICAL MANAGEMENT
"KRN",19,2173,-1)
0^83
"KRN",19,2173,0)
FHFILM^File Manager^^M^^^^^^^^
"KRN",19,2173,1,0)
^^2^2^2911113^^^^
"KRN",19,2173,1,1,0)
This menu allows access to FileMan print, search, inquire, and
"KRN",19,2173,1,2,0)
list data dictionary options.
"KRN",19,2173,10,0)
^19.01PI^4^4
"KRN",19,2173,10,1,0)
2253^PE
"KRN",19,2173,10,1,"^")
FHFIL1
"KRN",19,2173,10,2,0)
2254^SE
"KRN",19,2173,10,2,"^")
FHFIL2
"KRN",19,2173,10,3,0)
2255^IE
"KRN",19,2173,10,3,"^")
FHFIL3
"KRN",19,2173,10,4,0)
2256^FD
"KRN",19,2173,10,4,"^")
FHFIL4
"KRN",19,2173,99)
56581,48175
"KRN",19,2173,99.1)
59932,26554
"KRN",19,2173,"U")
FILE MANAGER
"KRN",19,2174,-1)
0^189
"KRN",19,2174,0)
FHORD41^Isolation/Precaution Patient List^^R^^^^^^^^
"KRN",19,2174,1,0)
^19.06^2^2^3040524^^^^
"KRN",19,2174,1,1,0)
This option will produce a list of all patients currently
"KRN",19,2174,1,2,0)
on some type of isolation or precautions, including outpatients.
"KRN",19,2174,25)
FHORD41
"KRN",19,2174,"U")
ISOLATION/PRECAUTION PATIENT L
"KRN",19,2175,-1)
0^26
"KRN",19,2175,0)
FHADMR4^Enter/Edit Staffing Data^^R^^^^^^^^
"KRN",19,2175,1,0)
^19.06^4^4^3031008^^^^
"KRN",19,2175,1,1,0)
This option allows for entry and/or editing of the various values
"KRN",19,2175,1,2,0)
used in the Performance Standards Report. The value for the
"KRN",19,2175,1,3,0)
Served Rations is automatically captured from the Served Ration
"KRN",19,2175,1,4,0)
Report and cannot be edited.
"KRN",19,2175,25)
EN1^FHADM4
"KRN",19,2175,"U")
ENTER/EDIT STAFFING DATA
"KRN",19,2176,-1)
0^27
"KRN",19,2176,0)
FHADMR5^Staffing Data Report^^R^^^^^^^^
"KRN",19,2176,1,0)
^19.06^3^3^3030819^^^^
"KRN",19,2176,1,1,0)
This option will produce the Performance Standards Report for any
"KRN",19,2176,1,2,0)
specified time period. The value for the Served Rations is calculated
"KRN",19,2176,1,3,0)
from the most recent data in the Served Ration Report.
"KRN",19,2176,25)
EN2^FHADM4
"KRN",19,2176,"U")
STAFFING DATA REPORT
"KRN",19,2177,-1)
0^132
"KRN",19,2177,0)
FHNU11^Recipe Analysis^^R^^^^^^^^
"KRN",19,2177,1,0)
^^4^4^2930510^^^^
"KRN",19,2177,1,1,0)
This option allows for selection of items from the Food
"KRN",19,2177,1,2,0)
Nutrient file which are then combined into a recipe and
"KRN",19,2177,1,3,0)
optionally stored in the Food Nutrient file as an analyzed
"KRN",19,2177,1,4,0)
food item.
"KRN",19,2177,25)
FHNU11
"KRN",19,2177,"U")
RECIPE ANALYSIS
"KRN",19,2179,-1)
0^273
"KRN",19,2179,0)
FHSP1^Enter/Edit Standing Order File^^R^^^^^^^^
"KRN",19,2179,1,0)
^^2^2^2890606^^^^
"KRN",19,2179,1,1,0)
This option allows for the addition/editing of names
"KRN",19,2179,1,2,0)
contained in the Standing Orders file (118.3).
"KRN",19,2179,25)
EN1^FHSP
"KRN",19,2179,"U")
ENTER/EDIT STANDING ORDER FILE
"KRN",19,2180,-1)
0^274
"KRN",19,2180,0)
FHSP2^List Standing Order File^^R^^^^^^^^
"KRN",19,2180,1,0)
^^2^2^2890606^^^
"KRN",19,2180,1,1,0)
This option will list all standing order names contained
"KRN",19,2180,1,2,0)
in the Standing Orders file (118.3).
"KRN",19,2180,25)
EN2^FHSP
"KRN",19,2180,"U")
LIST STANDING ORDER FILE
"KRN",19,2181,-1)
0^275
"KRN",19,2181,0)
FHSP3^Enter/Edit Standing Orders^^R^^^^^^^^
"KRN",19,2181,1,0)
^19.06^3^3^3030512^^^^
"KRN",19,2181,1,1,0)
This option allows for the entering and editing of a standing order
"KRN",19,2181,1,2,0)
for a patient. The meals with which the standing order
"KRN",19,2181,1,3,0)
are to be associated are also indicated.
"KRN",19,2181,25)
EN1^FHSPED
"KRN",19,2181,"U")
ENTER/EDIT STANDING ORDERS
"KRN",19,2182,-1)
0^276
"KRN",19,2182,0)
FHSP4^Standing Order Inquiry^^R^^^^^^^^
"KRN",19,2182,1,0)
^19.06^2^2^3030512^^^
"KRN",19,2182,1,1,0)
This option allows for displaying the active standing orders
"KRN",19,2182,1,2,0)
for a patient.
"KRN",19,2182,25)
EN2^FHSPED
"KRN",19,2182,"U")
STANDING ORDER INQUIRY
"KRN",19,2183,-1)
0^277
"KRN",19,2183,0)
FHSP5^Tabulate Standing Orders^^R^^^^^^^^
"KRN",19,2183,1,0)
^19.06^3^3^3030512^^^^
"KRN",19,2183,1,1,0)
This option will produce a tabulation of all standing orders
"KRN",19,2183,1,2,0)
for a meal for a specified Communication Office or all
"KRN",19,2183,1,3,0)
offices.
"KRN",19,2183,25)
FHSPTAB
"KRN",19,2183,"U")
TABULATE STANDING ORDERS
"KRN",19,2184,-1)
0^281
"KRN",19,2184,0)
FHSPX^Standing Order Management^^M^^^^^^^^
"KRN",19,2184,1,0)
^^2^2^2880806^^
"KRN",19,2184,1,1,0)
This menu allows access to the file management options of the
"KRN",19,2184,1,2,0)
Standing Order module.
"KRN",19,2184,10,0)
^19.01PI^2^2
"KRN",19,2184,10,1,0)
2179^SE
"KRN",19,2184,10,1,"^")
FHSP1
"KRN",19,2184,10,2,0)
2180^LS
"KRN",19,2184,10,2,"^")
FHSP2
"KRN",19,2184,99)
56581,48220
"KRN",19,2184,"U")
STANDING ORDER MANAGEMENT
"KRN",19,2185,-1)
0^280
"KRN",19,2185,0)
FHSPM^Standing Orders^^M^^^^^^^^
"KRN",19,2185,1,0)
^^2^2^2930930^^^^
"KRN",19,2185,1,1,0)
This menu allows access to the routine Standing Order
"KRN",19,2185,1,2,0)
options.
"KRN",19,2185,10,0)
^19.01PI^6^5
"KRN",19,2185,10,1,0)
2181^SE
"KRN",19,2185,10,1,"^")
FHSP3
"KRN",19,2185,10,2,0)
2182^IN
"KRN",19,2185,10,2,"^")
FHSP4
"KRN",19,2185,10,3,0)
2183^TS
"KRN",19,2185,10,3,"^")
FHSP5
"KRN",19,2185,10,5,0)
8777^SC
"KRN",19,2185,10,5,"^")
FHSP7
"KRN",19,2185,10,6,0)
8778^SL
"KRN",19,2185,10,6,"^")
FHSP8
"KRN",19,2185,99)
56581,48220
"KRN",19,2185,"U")
STANDING ORDERS
"KRN",19,2186,-1)
0^67
"KRN",19,2186,0)
FHBUD^Budget Asst. Menu^^M^^^^^^^^^^1
"KRN",19,2186,1,0)
^^3^3^2950307^^^^
"KRN",19,2186,1,1,0)
This menu contains those options most likely to be performed
"KRN",19,2186,1,2,0)
by a budget assistant -- administrative reports, cost updating,
"KRN",19,2186,1,3,0)
projected requirements, etc.
"KRN",19,2186,10,0)
^19.01PI^9^5
"KRN",19,2186,10,1,0)
2166^AM
"KRN",19,2186,10,1,"^")
FHADMR
"KRN",19,2186,10,2,0)
2195^XI
"KRN",19,2186,10,2,"^")
FHINGM
"KRN",19,2186,10,7,0)
2231^PU
"KRN",19,2186,10,7,"^")
FHPRR1
"KRN",19,2186,10,8,0)
2233^IC
"KRN",19,2186,10,8,"^")
FHADMR8
"KRN",19,2186,10,9,0)
2211^WP
"KRN",19,2186,10,9,"^")
FHPRC7
"KRN",19,2186,15)

"KRN",19,2186,20)
S FHA1=4 D ^FHVER
"KRN",19,2186,99)
56581,48212
"KRN",19,2186,"U")
BUDGET ASST. MENU
"KRN",19,2187,-1)
0^119
"KRN",19,2187,0)
FHNO12^History of Supplemental Feedings^^R^^^^^^^^
"KRN",19,2187,1,0)
2^19.06^2^2^3030512^^^^
"KRN",19,2187,1,1,0)
This option will display all Supplemental Feeding orders
"KRN",19,2187,1,2,0)
entered for this patient's admission.
"KRN",19,2187,25)
FHNO8
"KRN",19,2187,"U")
HISTORY OF SUPPLEMENTAL FEEDIN
"KRN",19,2190,-1)
0^90
"KRN",19,2190,0)
FHING3^Enter/Edit Ingredients^^R^^^^^^^^
"KRN",19,2190,1,0)
^19.06^2^2^3021121^^^
"KRN",19,2190,1,1,0)
This option allows the user to add and/or edit entries in
"KRN",19,2190,1,2,0)
the Ingredient file (113).
"KRN",19,2190,25)
EN3^FHPRI
"KRN",19,2190,"U")
ENTER/EDIT INGREDIENTS
"KRN",19,2191,-1)
0^84
"KRN",19,2191,0)
FHING1^Enter/Edit Units^^R^^^^^^^^
"KRN",19,2191,1,0)
^^2^2^2920604^^^^
"KRN",19,2191,1,1,0)
This option allows the user to add and/or edit entries in the
"KRN",19,2191,1,2,0)
Units file (119.1).
"KRN",19,2191,25)
EN1^FHPRI
"KRN",19,2191,"U")
ENTER/EDIT UNITS
"KRN",19,2192,-1)
0^89
"KRN",19,2192,0)
FHING2^Enter/Edit Vendor File^^R^^^^^^^^
"KRN",19,2192,1,0)
^^2^2^2880717^^
"KRN",19,2192,1,1,0)
This option allows the user to add and/or edit entries in
"KRN",19,2192,1,2,0)
the Vendor file (113.2)
"KRN",19,2192,25)
EN2^FHPRI
"KRN",19,2192,"U")
ENTER/EDIT VENDOR FILE
"KRN",19,2193,-1)
0^251
"KRN",19,2193,0)
FHREC1^Enter/Edit Recipes^^R^^^^^^^^
"KRN",19,2193,1,0)
2^19.06^2^2^3010815^^
"KRN",19,2193,1,1,0)
This option allows for the creation and/or editing of recipes
"KRN",19,2193,1,2,0)
in the Recipe file (114).
"KRN",19,2193,25)
EN1^FHREC
"KRN",19,2193,"U")
ENTER/EDIT RECIPES
"KRN",19,2194,-1)
0^91
"KRN",19,2194,0)
FHING4^Enter/Edit Storage Locations^^R^^^^^^^^
"KRN",19,2194,1,0)
^^2^2^2880717^^
"KRN",19,2194,1,1,0)
This option allows the user to add and/or edit entries in
"KRN",19,2194,1,2,0)
the Storage Location file (113.1).
"KRN",19,2194,25)
EN4^FHPRI
"KRN",19,2194,"U")
ENTER/EDIT STORAGE LOCATIONS
"KRN",19,2195,-1)
0^99
"KRN",19,2195,0)
FHINGM^Ingredient Management^^M^^^^^^^^DIETETICS
"KRN",19,2195,1,0)
^^4^4^2950714^^^^
"KRN",19,2195,1,1,0)
This menu allows access to all options pertaining to the
"KRN",19,2195,1,2,0)
management of the Ingredient file and the ingredient related
"KRN",19,2195,1,3,0)
files such as the Units file, Vendor file, and Storage
"KRN",19,2195,1,4,0)
Location file.
"KRN",19,2195,10,0)
^19.01PI^14^13
"KRN",19,2195,10,1,0)
2191^UE
"KRN",19,2195,10,1,"^")
FHING1
"KRN",19,2195,10,2,0)
2192^VE
"KRN",19,2195,10,2,"^")
FHING2
"KRN",19,2195,10,3,0)
2190^IE
"KRN",19,2195,10,3,"^")
FHING3
"KRN",19,2195,10,4,0)
2194^LE
"KRN",19,2195,10,4,"^")
FHING4
"KRN",19,2195,10,5,0)
2213^IR
"KRN",19,2195,10,5,"^")
FHING5
"KRN",19,2195,10,6,0)
2214^UL
"KRN",19,2195,10,6,"^")
FHING6
"KRN",19,2195,10,7,0)
2215^VL
"KRN",19,2195,10,7,"^")
FHING7
"KRN",19,2195,10,8,0)
2216^LL
"KRN",19,2195,10,8,"^")
FHING8
"KRN",19,2195,10,10,0)
2230^IP
"KRN",19,2195,10,10,"^")
FHING51
"KRN",19,2195,10,11,0)
2221^RL
"KRN",19,2195,10,11,"^")
FHING11
"KRN",19,2195,10,12,0)
8772^QE
"KRN",19,2195,10,12,"^")
FHING12
"KRN",19,2195,10,13,0)
8773^QW
"KRN",19,2195,10,13,"^")
FHING13
"KRN",19,2195,10,14,0)
8786^IN
"KRN",19,2195,10,14,"^")
FHING52
"KRN",19,2195,99)
56581,48179
"KRN",19,2195,"U")
INGREDIENT MANAGEMENT
"KRN",19,2196,-1)
0^264
"KRN",19,2196,0)
FHRECM^Recipe Management^^M^^^^^^^^
"KRN",19,2196,1,0)
^^2^2^2941027^^^^
"KRN",19,2196,1,1,0)
This menu contains all of the options relating to the management
"KRN",19,2196,1,2,0)
of recipes.
"KRN",19,2196,10,0)
^19.01PI^16^16
"KRN",19,2196,10,1,0)
2193^RE
"KRN",19,2196,10,1,"^")
FHREC1
"KRN",19,2196,10,2,0)
2204^RP
"KRN",19,2196,10,2,"^")
FHREC2
"KRN",19,2196,10,3,0)
2212^RL
"KRN",19,2196,10,3,"^")
FHREC3
"KRN",19,2196,10,4,0)
2219^PE
"KRN",19,2196,10,4,"^")
FHING9
"KRN",19,2196,10,5,0)
2220^PL
"KRN",19,2196,10,5,"^")
FHING10
"KRN",19,2196,10,6,0)
2223^CE
"KRN",19,2196,10,6,"^")
FHREC4
"KRN",19,2196,10,7,0)
2224^CL
"KRN",19,2196,10,7,"^")
FHREC5
"KRN",19,2196,10,8,0)
2226^SE
"KRN",19,2196,10,8,"^")
FHREC6
"KRN",19,2196,10,9,0)
2227^SL
"KRN",19,2196,10,9,"^")
FHREC7
"KRN",19,2196,10,10,0)
2228^EE
"KRN",19,2196,10,10,"^")
FHREC8
"KRN",19,2196,10,11,0)
2229^EL
"KRN",19,2196,10,11,"^")
FHREC9
"KRN",19,2196,10,12,0)
2232^RC
"KRN",19,2196,10,12,"^")
FHREC10
"KRN",19,2196,10,13,0)
2243^RU
"KRN",19,2196,10,13,"^")
FHPRC10
"KRN",19,2196,10,14,0)
8790^NA
"KRN",19,2196,10,14,"^")
FHREC11
"KRN",19,2196,10,15,0)
8791^ND
"KRN",19,2196,10,15,"^")
FHREC12
"KRN",19,2196,10,16,0)
8795^NL
"KRN",19,2196,10,16,"^")
FHREC13
"KRN",19,2196,99)
56581,48216
"KRN",19,2196,"U")
RECIPE MANAGEMENT
"KRN",19,2197,-1)
0^235
"KRN",19,2197,0)
FHPRFM^Forecasting^^M^^^^^^^^
"KRN",19,2197,1,0)
^^1^1^2921005^^^^
"KRN",19,2197,1,1,0)
This menu contains all of the forecasting options.
"KRN",19,2197,10,0)
^19.01PI^5^3
"KRN",19,2197,10,2,0)
2199^FC
"KRN",19,2197,10,2,"^")
FHPRF2
"KRN",19,2197,10,4,0)
2150^DC
"KRN",19,2197,10,4,"^")
FHORD11
"KRN",19,2197,10,5,0)
8782^DP
"KRN",19,2197,10,5,"^")
FHORD15
"KRN",19,2197,99)
56581,48208
"KRN",19,2197,"U")
FORECASTING
"KRN",19,2198,-1)
0^230
"KRN",19,2198,0)
FHPRF1^Enter/Edit Production Diet Percentages^^R^^^^^^^^
"KRN",19,2198,1,0)
^19.06^3^3^3020722^^^^
"KRN",19,2198,1,1,0)
This option is part of the Forecasting module and is used to
"KRN",19,2198,1,2,0)
enter and edit the percentage of total census represented by
"KRN",19,2198,1,3,0)
each production diet for each day of the week.
"KRN",19,2198,25)
EN1^FHPRF
"KRN",19,2198,"U")
ENTER/EDIT PRODUCTION DIET PER
"KRN",19,2199,-1)
0^231
"KRN",19,2199,0)
FHPRF2^Forecasted Diet Census^^R^^^^^^^^
"KRN",19,2199,1,0)
^19.06^8^8^3041220^^^
"KRN",19,2199,1,1,0)
This option allows for the forecast of the total census for
"KRN",19,2199,1,2,0)
a Production Facility for a specified date. The forecast is based
"KRN",19,2199,1,3,0)
upon MAS census counts for the same day of the week for
"KRN",19,2199,1,4,0)
the last 9 occurrences and is then corrected by examining
"KRN",19,2199,1,5,0)
the error between the forecast and the actual census for
"KRN",19,2199,1,6,0)
the most recent three days.  This report also includes all the
"KRN",19,2199,1,7,0)
outpatient meals in a specific Production Facility for a specified
"KRN",19,2199,1,8,0)
date.
"KRN",19,2199,25)
FHPRF1
"KRN",19,2199,"U")
FORECASTED DIET CENSUS
"KRN",19,2201,-1)
0^232
"KRN",19,2201,0)
FHPRF4^List Production Diet Percentages^^R^^^^^^^^
"KRN",19,2201,1,0)
^19.06^2^2^3020719^^^^
"KRN",19,2201,1,1,0)
This option will list the percentage of total census represented
"KRN",19,2201,1,2,0)
by each production diet for each day of the week for a Service Point.
"KRN",19,2201,25)
FHPRF2
"KRN",19,2201,"U")
LIST PRODUCTION DIET PERCENTAG
"KRN",19,2202,-1)
0^243
"KRN",19,2202,0)
FHPRO5^Meal Production Reports^^R^^^^^^^^
"KRN",19,2202,1,0)
^19.06^7^7^3031119^^^^
"KRN",19,2202,1,1,0)
This option will produce, for a selected Production Facility
"KRN",19,2202,1,2,0)
and meal, the ingredient requirements in the form of a
"KRN",19,2202,1,3,0)
stockroom requisition list, the preparation requirements in
"KRN",19,2202,1,4,0)
terms of all recipes needing preparation and the required
"KRN",19,2202,1,5,0)
ingredient amounts, and service reports indicating the number
"KRN",19,2202,1,6,0)
of portions of each recipe needed by Service Point as well as
"KRN",19,2202,1,7,0)
the production diets associated with each recipe.
"KRN",19,2202,25)
FHPRO1
"KRN",19,2202,"U")
MEAL PRODUCTION REPORTS
"KRN",19,2203,-1)
0^229
"KRN",19,2203,0)
FHPRCM^Menu Cycle Management^^M^^^^^^^^
"KRN",19,2203,1,0)
^^2^2^2931201^^^^
"KRN",19,2203,1,1,0)
This menu contains all of the various menu cycle options
"KRN",19,2203,1,2,0)
and is designed for the management of the Menu Cycle.
"KRN",19,2203,10,0)
^19.01PI^14^13
"KRN",19,2203,10,1,0)
2205^CE
"KRN",19,2203,10,1,"^")
FHPRC1
"KRN",19,2203,10,2,0)
2206^CD
"KRN",19,2203,10,2,"^")
FHPRC2
"KRN",19,2203,10,3,0)
2207^CQ
"KRN",19,2203,10,3,"^")
FHPRC3
"KRN",19,2203,10,4,0)
2208^ME
"KRN",19,2203,10,4,"^")
FHPRC4
"KRN",19,2203,10,5,0)
2209^HE
"KRN",19,2203,10,5,"^")
FHPRC5
"KRN",19,2203,10,6,0)
2210^ML
"KRN",19,2203,10,6,"^")
FHPRC6
"KRN",19,2203,10,7,0)
2211^WP
"KRN",19,2203,10,7,"^")
FHPRC7
"KRN",19,2203,10,8,0)
2235^CL
"KRN",19,2203,10,8,"^")
FHPRC8
"KRN",19,2203,10,9,0)
2237^MP
"KRN",19,2203,10,9,"^")
FHPRC9
"KRN",19,2203,10,11,0)
2252^DP
"KRN",19,2203,10,11,"^")
FHPRC11
"KRN",19,2203,10,12,0)
8760^WR
"KRN",19,2203,10,12,"^")
FHPRC12
"KRN",19,2203,10,13,0)
8792^DM
"KRN",19,2203,10,13,"^")
FHPRC13
"KRN",19,2203,10,14,0)
8794^CR
"KRN",19,2203,10,14,"^")
FHPRC14
"KRN",19,2203,99)
56581,48207
"KRN",19,2203,"U")
MENU CYCLE MANAGEMENT
"KRN",19,2204,-1)
0^256
"KRN",19,2204,0)
FHREC2^Print Adjusted Recipe^^R^^^^^^^^
"KRN",19,2204,1,0)
^^5^5^2880718^^^
"KRN",19,2204,1,1,0)
This option will adjust and print an adjusted recipe. For
"KRN",19,2204,1,2,0)
any specified number of portions, the ingredient requirements
"KRN",19,2204,1,3,0)
will be linearly adjusted upward or downward based upon the
"KRN",19,2204,1,4,0)
number of portions specified as compared to the number of
"KRN",19,2204,1,5,0)
portions contained in the recipe.
"KRN",19,2204,25)
EN2^FHREC2
"KRN",19,2204,"U")
PRINT ADJUSTED RECIPE
"KRN",19,2205,-1)
0^215
"KRN",19,2205,0)
FHPRC1^Enter/Edit Menu Cycle^^R^^^^^^^^
"KRN",19,2205,1,0)
^^2^2^2880716^^
"KRN",19,2205,1,1,0)
This option will allow the creation and/or editing of an
"KRN",19,2205,1,2,0)
entry in the Menu Cycle file (116).
"KRN",19,2205,25)
EN2^FHPRC
"KRN",19,2205,"U")
ENTER/EDIT MENU CYCLE
"KRN",19,2206,-1)
0^221
"KRN",19,2206,0)
FHPRC2^Menu Cycle Effective Dates^^R^^^^^^^^
"KRN",19,2206,1,0)
^^2^2^2880716^^
"KRN",19,2206,1,1,0)
This option allows for the entry or editing of the Effective
"KRN",19,2206,1,2,0)
Date field in the Menu Cycle file (116).
"KRN",19,2206,25)
EN2^FHPRC4
"KRN",19,2206,"U")
MENU CYCLE EFFECTIVE DATES
"KRN",19,2207,-1)
0^222
"KRN",19,2207,0)
FHPRC3^Menu Cycle Query^^R^^^^^^^^
"KRN",19,2207,1,0)
^^4^4^2880718^^^
"KRN",19,2207,1,1,0)
This option will display, for any date, the menu cycle that
"KRN",19,2207,1,2,0)
is in effect as well as the three meals. In the case where holiday
"KRN",19,2207,1,3,0)
meals have been entered into the Holiday Meal file, those
"KRN",19,2207,1,4,0)
meals will over-ride the normal cycle meals.
"KRN",19,2207,25)
EN1^FHPRC4
"KRN",19,2207,"U")
MENU CYCLE QUERY
"KRN",19,2208,-1)
0^223
"KRN",19,2208,0)
FHPRC4^Enter/Edit Meals^^R^^^^^^^^
"KRN",19,2208,1,0)
^19.06^2^2^3031106^^^
"KRN",19,2208,1,1,0)
This option allows for the creation/editing of a meal including
"KRN",19,2208,1,2,0)
the associated recipes and production diets.
"KRN",19,2208,25)
EN3^FHPRC
"KRN",19,2208,"U")
ENTER/EDIT MEALS
"KRN",19,2209,-1)
0^224
"KRN",19,2209,0)
FHPRC5^Enter/Edit Holiday Meals^^R^^^^^^^^
"KRN",19,2209,1,0)
^^6^6^2890607^^^^
"KRN",19,2209,1,1,0)
This option allows for the entry/editing of the Holiday Meals
"KRN",19,2209,1,2,0)
file (116.3) in which meals may be specified for a holiday
"KRN",19,2209,1,3,0)
which will override the normal cycle meals. Only those
"KRN",19,2209,1,4,0)
meals selected will override; the absence of a specific
"KRN",19,2209,1,5,0)
meal entry will result in the retention of the normal cycle
"KRN",19,2209,1,6,0)
meal.
"KRN",19,2209,25)
EN4^FHPRC
"KRN",19,2209,"U")
ENTER/EDIT HOLIDAY MEALS
"KRN",19,2210,-1)
0^225
"KRN",19,2210,0)
FHPRC6^List Meal^^R^^^^^^^^
"KRN",19,2210,1,0)
^^2^2^2880716^^
"KRN",19,2210,1,1,0)
This option will list a meal contained in the Meal file (116.1)
"KRN",19,2210,1,2,0)
as well as the associated recipes and production diets.
"KRN",19,2210,25)
FHPRC3
"KRN",19,2210,"U")
LIST MEAL
"KRN",19,2211,-1)
0^226
"KRN",19,2211,0)
FHPRC7^Print Weekly Menu^^R^^^^^^^^
"KRN",19,2211,1,0)
^^5^5^2920226^^^^
"KRN",19,2211,1,1,0)
This option will print a seven day menu containing the 
"KRN",19,2211,1,2,0)
individual recipes to be served at breakfast, noon, and
"KRN",19,2211,1,3,0)
evening for each of the seven days. The meals, from which
"KRN",19,2211,1,4,0)
the recipes are taken, are those that are or will be effective
"KRN",19,2211,1,5,0)
during the week chosen.
"KRN",19,2211,25)
FHPRC2
"KRN",19,2211,"U")
PRINT WEEKLY MENU
"KRN",19,2212,-1)
0^257
"KRN",19,2212,0)
FHREC3^List Recipes^^R^^^^^^^^
"KRN",19,2212,1,0)
^^2^2^2880717^^
"KRN",19,2212,1,1,0)
This option will list all recipes contained in the Recipe
"KRN",19,2212,1,2,0)
file (114) and their associated data elements.
"KRN",19,2212,25)
FHREC4
"KRN",19,2212,"U")
LIST RECIPES
"KRN",19,2213,-1)
0^92
"KRN",19,2213,0)
FHING5^List Ingredients - Recipe Data^^R^^^^^^^^
"KRN",19,2213,1,0)
^19.06^4^4^3021121^^^^
"KRN",19,2213,1,1,0)
This option will list all ingredients along with data elements
"KRN",19,2213,1,2,0)
associated with recipe preparation such as unit of issue, recipe
"KRN",19,2213,1,3,0)
unit, number of recipe units in an issue unit, storage location,
"KRN",19,2213,1,4,0)
thaw days, etc.
"KRN",19,2213,25)
LIS1^FHPRI2
"KRN",19,2213,"U")
LIST INGREDIENTS - RECIPE DATA
"KRN",19,2214,-1)
0^95
"KRN",19,2214,0)
FHING6^List Units^^R^^^^^^^^
"KRN",19,2214,1,0)
^^2^2^2880717^
"KRN",19,2214,1,1,0)
This option produces a listing of all of the entries in the
"KRN",19,2214,1,2,0)
Units file (119.1).
"KRN",19,2214,25)
EN6^FHPRI
"KRN",19,2214,"U")
LIST UNITS
"KRN",19,2215,-1)
0^96
"KRN",19,2215,0)
FHING7^List Vendors^^R^^^^^^^^
"KRN",19,2215,1,0)
^^2^2^2950614^^
"KRN",19,2215,1,1,0)
This option produces a list of all of the vendors in the
"KRN",19,2215,1,2,0)
Vendor file (113.2) as well as all associated data elements.
"KRN",19,2215,25)
FHPRI3
"KRN",19,2215,"U")
LIST VENDORS
"KRN",19,2216,-1)
0^97
"KRN",19,2216,0)
FHING8^List Storage Locations^^R^^^^^^^^
"KRN",19,2216,1,0)
^^3^3^2880717^
"KRN",19,2216,1,1,0)
This option produces a list of all storage locations contained
"KRN",19,2216,1,2,0)
in the Storage Location file (113.1) as well as all associated
"KRN",19,2216,1,3,0)
data elements.
"KRN",19,2216,25)
EN8^FHPRI
"KRN",19,2216,"U")
LIST STORAGE LOCATIONS
"KRN",19,2217,-1)
0^233
"KRN",19,2217,0)
FHPRF5^Enter/Edit Other Meals^^R^^^^^^^^
"KRN",19,2217,1,0)
^^6^6^2911212^^^^
"KRN",19,2217,1,1,0)
This option allows for the building of a table of other
"KRN",19,2217,1,2,0)
meals. The table is by Service Point, day of the week, and
"KRN",19,2217,1,3,0)
meal (breakfast, noon, evening). The values represent
"KRN",19,2217,1,4,0)
other meals (for outpatients, residents, guests, volunteers,
"KRN",19,2217,1,5,0)
etc.) that would not be included in the inpatient forecast or
"KRN",19,2217,1,6,0)
census.
"KRN",19,2217,25)
EN2^FHPRF
"KRN",19,2217,"U")
ENTER/EDIT OTHER MEALS
"KRN",19,2218,-1)
0^234
"KRN",19,2218,0)
FHPRF6^List Other Meals^^R^^^^^^^^
"KRN",19,2218,1,0)
^19.06^3^3^3020719^^^^
"KRN",19,2218,1,1,0)
This option will list the Other Meals table showing for
"KRN",19,2218,1,2,0)
each Service Point how many other meals are required
"KRN",19,2218,1,3,0)
each day of the week for breakfast, noon, and evening.
"KRN",19,2218,25)
FHPRF4
"KRN",19,2218,"U")
LIST OTHER MEALS
"KRN",19,2219,-1)
0^98
"KRN",19,2219,0)
FHING9^Enter/Edit Preparation Areas^^R^^^^^^^^
"KRN",19,2219,1,0)
^^2^2^2920505^^
"KRN",19,2219,1,1,0)
This option allows the user to add and/or edit entries in
"KRN",19,2219,1,2,0)
the Preparation Area file (114.2).
"KRN",19,2219,25)
EN9^FHREC
"KRN",19,2219,"U")
ENTER/EDIT PREPARATION AREAS
"KRN",19,2220,-1)
0^85
"KRN",19,2220,0)
FHING10^List Preparation Areas^^R^^^^^^^^
"KRN",19,2220,1,0)
^^2^2^2880717^^
"KRN",19,2220,1,1,0)
This option produces a listing of the entries in the
"KRN",19,2220,1,2,0)
Preparation Area file (114.2).
"KRN",19,2220,25)
EN10^FHREC
"KRN",19,2220,"U")
LIST PREPARATION AREAS
"KRN",19,2221,-1)
0^86
"KRN",19,2221,0)
FHING11^List Recipes Containing an Ingredient^^R^^^^^^^^
"KRN",19,2221,1,0)
^^4^4^2880717^^
"KRN",19,2221,1,1,0)
This option will produce a list of all recipes in the Recipe
"KRN",19,2221,1,2,0)
file which contain a selected ingredient. In addition, the
"KRN",19,2221,1,3,0)
listing shows which meals and menu cycle days reference
"KRN",19,2221,1,4,0)
that recipe.
"KRN",19,2221,25)
FHPRI1
"KRN",19,2221,"U")
LIST RECIPES CONTAINING AN ING
"KRN",19,2223,-1)
0^258
"KRN",19,2223,0)
FHREC4^Enter/Edit Recipe Categories^^R^^^^^^^^
"KRN",19,2223,1,0)
^^2^2^2880717^^
"KRN",19,2223,1,1,0)
This option allows for the addition/editing of recipe
"KRN",19,2223,1,2,0)
categories contained in the Recipe Category file (114.1).
"KRN",19,2223,25)
EN3^FHREC
"KRN",19,2223,"U")
ENTER/EDIT RECIPE CATEGORIES
"KRN",19,2224,-1)
0^259
"KRN",19,2224,0)
FHREC5^List Recipe Categories^^R^^^^^^^^
"KRN",19,2224,1,0)
^^3^3^2941027^^^
"KRN",19,2224,1,1,0)
This option will list all of the recipe categories in the
"KRN",19,2224,1,2,0)
Recipe Category file (114.1) and their associated data
"KRN",19,2224,1,3,0)
elements.
"KRN",19,2224,25)
EN4^FHREC
"KRN",19,2224,"U")
LIST RECIPE CATEGORIES
"KRN",19,2225,-1)
0^237
"KRN",19,2225,0)
FHPRO^Food Production^^M^^^^^^^^^^1
"KRN",19,2225,1,0)
^^3^3^2930713^^^^
"KRN",19,2225,1,1,0)
This menu allows access to options needed frequently in
"KRN",19,2225,1,2,0)
food production, including most recipe and menu cycle file management
"KRN",19,2225,1,3,0)
options as well as all production reports.
"KRN",19,2225,10,0)
^19.01PI^3^3
"KRN",19,2225,10,1,0)
4117^PR
"KRN",19,2225,10,1,"^")
FHADM
"KRN",19,2225,10,2,0)
2203^XM
"KRN",19,2225,10,2,"^")
FHPRCM
"KRN",19,2225,10,3,0)
2196^XR
"KRN",19,2225,10,3,"^")
FHRECM
"KRN",19,2225,15)

"KRN",19,2225,20)
S FHA1=7 D ^FHVER
"KRN",19,2225,99)
56581,48216
"KRN",19,2225,"U")
FOOD PRODUCTION
"KRN",19,2226,-1)
0^260
"KRN",19,2226,0)
FHREC6^Enter/Edit Serving Utensils^^R^^^^^^^^
"KRN",19,2226,1,0)
^^2^2^2880717^^
"KRN",19,2226,1,1,0)
This option allows for the addition/editing of serving
"KRN",19,2226,1,2,0)
utensil names contained in the Serving Utensil file (114.3).
"KRN",19,2226,25)
EN5^FHREC
"KRN",19,2226,"U")
ENTER/EDIT SERVING UTENSILS
"KRN",19,2227,-1)
0^261
"KRN",19,2227,0)
FHREC7^List Serving Utensils^^R^^^^^^^^
"KRN",19,2227,1,0)
^^2^2^2890606^^^^
"KRN",19,2227,1,1,0)
This option will list all serving utensils contained in the
"KRN",19,2227,1,2,0)
Serving Utensil file (114.3).
"KRN",19,2227,25)
EN6^FHREC
"KRN",19,2227,"U")
LIST SERVING UTENSILS
"KRN",19,2228,-1)
0^262
"KRN",19,2228,0)
FHREC8^Enter/Edit Equipment^^R^^^^^^^^
"KRN",19,2228,1,0)
^^2^2^2880717^^
"KRN",19,2228,1,1,0)
This option allows for the addition/editing of equipment names
"KRN",19,2228,1,2,0)
contained in the Equipment file (114.4).
"KRN",19,2228,25)
EN7^FHREC
"KRN",19,2228,"U")
ENTER/EDIT EQUIPMENT
"KRN",19,2229,-1)
0^263
"KRN",19,2229,0)
FHREC9^List Equipment^^R^^^^^^^^
"KRN",19,2229,1,0)
^^2^2^2880717^^
"KRN",19,2229,1,1,0)
This option will list all equipment names contained in the
"KRN",19,2229,1,2,0)
Equipment file (114.4).
"KRN",19,2229,25)
EN8^FHREC
"KRN",19,2229,"U")
LIST EQUIPMENT
"KRN",19,2230,-1)
0^93
"KRN",19,2230,0)
FHING51^List Ingredients - Purchasing Data^^R^^^^^^^^
"KRN",19,2230,1,0)
^19.06^3^3^3021121^^^^
"KRN",19,2230,1,1,0)
This option will list all ingredients along with data elements
"KRN",19,2230,1,2,0)
associated with purchasing the item: stock number, unit of
"KRN",19,2230,1,3,0)
purchase, vendor, purchase price, etc.
"KRN",19,2230,25)
LIS2^FHPRI2
"KRN",19,2230,"U")
LIST INGREDIENTS - PURCHASING 
"KRN",19,2231,-1)
0^249
"KRN",19,2231,0)
FHPRR1^Projected Usage^^R^^^^^^^^
"KRN",19,2231,1,0)
^19.06^5^5^3030512^^
"KRN",19,2231,1,1,0)
This option will produce, for a specified time period, the
"KRN",19,2231,1,2,0)
ingredients and amounts needed in order to meet production
"KRN",19,2231,1,3,0)
requirements. The production requirements are based upon the
"KRN",19,2231,1,4,0)
menu cycle in effect and a specified average census for the
"KRN",19,2231,1,5,0)
time period.
"KRN",19,2231,25)
FHPRR1
"KRN",19,2231,"U")
PROJECTED USAGE
"KRN",19,2232,-1)
0^252
"KRN",19,2232,0)
FHREC10^Re-cost Recipes^^R^^^^^^^^
"KRN",19,2232,1,0)
^^2^2^2880717^^
"KRN",19,2232,1,1,0)
This option will re-price all recipes producing a cost/portion
"KRN",19,2232,1,2,0)
using the latest prices in the Ingredient file.
"KRN",19,2232,25)
FHREC3
"KRN",19,2232,"U")
RE-COST RECIPES
"KRN",19,2233,-1)
0^28
"KRN",19,2233,0)
FHADMR8^Edit Ingredient Cost^^R^^^^^^^^
"KRN",19,2233,1,0)
2
"KRN",19,2233,1,1,0)
This option allows for editing only the item cost field
"KRN",19,2233,1,2,0)
in the Ingredient file (113).
"KRN",19,2233,25)
EN3^FHADM5
"KRN",19,2233,"U")
EDIT INGREDIENT COST
"KRN",19,2234,-1)
0^66
"KRN",19,2234,0)
FHBIR^Birthday List^^R^^^^^^^^
"KRN",19,2234,1,0)
^19.06^5^5^3040524^^^^
"KRN",19,2234,1,1,0)
This option will print a list of all patients with a birthday in
"KRN",19,2234,1,2,0)
a particular month or those with a birthday on a specific month
"KRN",19,2234,1,3,0)
and day.
"KRN",19,2234,1,4,0)

"KRN",19,2234,1,5,0)
As of Version 5.5, the birthday list may be printed for outpatients as well.
"KRN",19,2234,25)
FHBIR
"KRN",19,2234,99)
55593,31173
"KRN",19,2234,"U")
BIRTHDAY LIST
"KRN",19,2235,-1)
0^227
"KRN",19,2235,0)
FHPRC8^List Menu Cycle^^R^^^^^^^^
"KRN",19,2235,1,0)
^^3^3^2880716^^
"KRN",19,2235,1,1,0)
This option will list a specific menu cycle, showing for each
"KRN",19,2235,1,2,0)
day of the cycle what meal will be served for breakfast, noon
"KRN",19,2235,1,3,0)
and evening.
"KRN",19,2235,25)
FHPRC5
"KRN",19,2235,"U")
LIST MENU CYCLE
"KRN",19,2236,-1)
0^244
"KRN",19,2236,0)
FHPRO6^List Nutrition Locations^^R^^^^^^^^
"KRN",19,2236,1,0)
^19.06^2^2^3040524^^^^
"KRN",19,2236,1,1,0)
This option will list the nutrition locations contained in the Nutrition
"KRN",19,2236,1,2,0)
Location (#119.6) file along with all of the associated data elements.
"KRN",19,2236,25)
FHPRW
"KRN",19,2236,"U")
LIST NUTRITION LOCATIONS
"KRN",19,2237,-1)
0^228
"KRN",19,2237,0)
FHPRC9^Edit Meal Production Diets^^R^^^^^^^^
"KRN",19,2237,1,0)
^^4^4^2880716^^
"KRN",19,2237,1,1,0)
This option allows for editing the production diets associated
"KRN",19,2237,1,2,0)
with a recipe in a meal. It is designed for rapid and easy
"KRN",19,2237,1,3,0)
modification of the production diet string associated with
"KRN",19,2237,1,4,0)
the recipes.
"KRN",19,2237,25)
FHPRC6
"KRN",19,2237,"U")
EDIT MEAL PRODUCTION DIETS
"KRN",19,2238,-1)
0^288
"KRN",19,2238,0)
FHX1^Check Integrity of Routines^^R^^^^^^^^
"KRN",19,2238,1,0)
^^4^4^2890223^^
"KRN",19,2238,1,1,0)
This option will check the integrity of all dietetic system
"KRN",19,2238,1,2,0)
routines. An error will be shown for any routine which has been
"KRN",19,2238,1,3,0)
modified. Routines for which patches have been issued will
"KRN",19,2238,1,4,0)
normally show an error.
"KRN",19,2238,25)
FHNTEG
"KRN",19,2238,"U")
CHECK INTEGRITY OF ROUTINES
"KRN",19,2239,-1)
0^289
"KRN",19,2239,0)
FHX2^Recode Diets for all Inpatients^^R^^^^^^^^
"KRN",19,2239,1,0)
^19.06^5^5^3050113^^
"KRN",19,2239,1,1,0)
This option will automatically recode the production diet based
"KRN",19,2239,1,2,0)
upon the clinical diet order for all inpatients using the current
"KRN",19,2239,1,3,0)
data in the production diet file. It is used whenever significant
"KRN",19,2239,1,4,0)
alterations have been made to the production diet file which
"KRN",19,2239,1,5,0)
will affect the recoding of diets.
"KRN",19,2239,25)
INP^FHORDR
"KRN",19,2239,"U")
RECODE DIETS FOR ALL INPATIENT
"KRN",19,2240,-1)
0^290
"KRN",19,2240,0)
FHX3^Check File Pointers^^R^^^^^^^^
"KRN",19,2240,1,0)
^^5^5^2920605^^
"KRN",19,2240,1,1,0)
This option will check all of the file relationships to ensure
"KRN",19,2240,1,2,0)
that no entry has been deleted which is used by another file.
"KRN",19,2240,1,3,0)
Since the patient file 'points' to many of these files it is
"KRN",19,2240,1,4,0)
also checked if requested but may require a considerable
"KRN",19,2240,1,5,0)
period of time.
"KRN",19,2240,25)
FHXDB
"KRN",19,2240,"U")
CHECK FILE POINTERS
"KRN",19,2241,-1)
0^291
"KRN",19,2241,0)
FHX4^Create Dietetic File entry for all Inpatients^^R^^^^^^^^
"KRN",19,2241,1,0)
^^4^4^2950121^^^^
"KRN",19,2241,1,1,0)
This option will verify that all inpatients have a Dietetic
"KRN",19,2241,1,2,0)
Patient file entry for the current admission. It is primarily
"KRN",19,2241,1,3,0)
used when link failures have resulted in new admissions not
"KRN",19,2241,1,4,0)
having a file entry created.
"KRN",19,2241,25)
EN1^FHXIN
"KRN",19,2241,"U")
CREATE DIETETIC FILE ENTRY FOR
"KRN",19,2243,-1)
0^216
"KRN",19,2243,0)
FHPRC10^List Recipe Usage in Meals/Cycles^^R^^^^^^^^
"KRN",19,2243,1,0)
^^2^2^2920107^^
"KRN",19,2243,1,1,0)
This option will find all occurrences of a recipe in the
"KRN",19,2243,1,2,0)
Meal file and the meal in the Menu Cycle file.
"KRN",19,2243,25)
FHPRC7
"KRN",19,2243,"U")
LIST RECIPE USAGE IN MEALS/CYC
"KRN",19,2244,-1)
0^270
"KRN",19,2244,0)
FHSELM^Food Preferences^^M^^^^^^^^
"KRN",19,2244,1,0)
^^2^2^2881103^^
"KRN",19,2244,1,1,0)
This menu allows entry to all the food preference options
"KRN",19,2244,1,2,0)
except for the file management options.
"KRN",19,2244,10,0)
^19.01PI^3^3
"KRN",19,2244,10,1,0)
2247^EP
"KRN",19,2244,10,1,"^")
FHSEL3
"KRN",19,2244,10,2,0)
2248^DP
"KRN",19,2244,10,2,"^")
FHSEL4
"KRN",19,2244,10,3,0)
2251^TP
"KRN",19,2244,10,3,"^")
FHSEL5
"KRN",19,2244,99)
56581,48218
"KRN",19,2244,"U")
FOOD PREFERENCES
"KRN",19,2245,-1)
0^265
"KRN",19,2245,0)
FHSEL1^Enter/Edit Food Preferences^^R^^^^^^^^
"KRN",19,2245,1,0)
^19.06^2^2^3030512^^^
"KRN",19,2245,1,1,0)
This option allows for the entry and editing of items into
"KRN",19,2245,1,2,0)
the Food Preferences file (115.2).
"KRN",19,2245,25)
EN1^FHSEL1
"KRN",19,2245,"U")
ENTER/EDIT FOOD PREFERENCES
"KRN",19,2246,-1)
0^266
"KRN",19,2246,0)
FHSEL2^List Food Preferences^^R^^^^^^^^
"KRN",19,2246,1,0)
^^2^2^2901101^^^^
"KRN",19,2246,1,1,0)
This option will list all of the entries in the Food
"KRN",19,2246,1,2,0)
Preferences file (115.2).
"KRN",19,2246,25)
EN2^FHSEL1
"KRN",19,2246,"U")
LIST FOOD PREFERENCES
"KRN",19,2247,-1)
0^267
"KRN",19,2247,0)
FHSEL3^Enter/Edit Patient Preferences^^R^^^^^^^^DIETETICS
"KRN",19,2247,1,0)
^19.06^2^2^3040623^^^^
"KRN",19,2247,1,1,0)
This options allows for the entry and editing of food preferences
"KRN",19,2247,1,2,0)
for a particular patient.
"KRN",19,2247,25)
EN3^FHSEL1
"KRN",19,2247,"U")
ENTER/EDIT PATIENT PREFERENCES
"KRN",19,2248,-1)
0^268
"KRN",19,2248,0)
FHSEL4^Display Patient Preferences^^R^^^^^^^^DIETETICS
"KRN",19,2248,1,0)
^19.06^2^2^3040623^^^^
"KRN",19,2248,1,1,0)
This option will display the current food preferences for a
"KRN",19,2248,1,2,0)
particular patient.
"KRN",19,2248,25)
EN4^FHSEL1
"KRN",19,2248,"U")
DISPLAY PATIENT PREFERENCES
"KRN",19,2249,-1)
0^271
"KRN",19,2249,0)
FHSELX^Food Preference Management^^M^^^^^^^^
"KRN",19,2249,1,0)
^^1^1^2880914^^^^
"KRN",19,2249,1,1,0)
This menu allows access to all of the food preference options.
"KRN",19,2249,10,0)
^19.01PI^2^2
"KRN",19,2249,10,1,0)
2245^EP
"KRN",19,2249,10,1,"^")
FHSEL1
"KRN",19,2249,10,2,0)
2246^LP
"KRN",19,2249,10,2,"^")
FHSEL2
"KRN",19,2249,99)
56581,48218
"KRN",19,2249,99.1)
59932,26554
"KRN",19,2249,"U")
FOOD PREFERENCE MANAGEMENT
"KRN",19,2251,-1)
0^269
"KRN",19,2251,0)
FHSEL5^Tabulate Patient Meal Preferences^^R^^^^^^^^DIETETICS
"KRN",19,2251,1,0)
^19.06^3^3^3040623^^^^
"KRN",19,2251,1,1,0)
This option will tabulate patient preferences for a given
"KRN",19,2251,1,2,0)
meal. It will tabulate likes and dislikes for only those recipes
"KRN",19,2251,1,3,0)
appearing on the menu.
"KRN",19,2251,25)
FHSEL2
"KRN",19,2251,"U")
TABULATE PATIENT MEAL PREFEREN
"KRN",19,2252,-1)
0^217
"KRN",19,2252,0)
FHPRC11^Print Daily Diet Menus^^R^^^^^^^^
"KRN",19,2252,1,0)
^19.06^3^3^3020725^^^
"KRN",19,2252,1,1,0)
This option will print the Daily Routine and Modified Diet Menus
"KRN",19,2252,1,2,0)
sheet for a given date. The items will be based upon the effective
"KRN",19,2252,1,3,0)
menu cycle meals for the selected date.
"KRN",19,2252,25)
FHPRC8
"KRN",19,2252,"U")
PRINT DAILY DIET MENUS
"KRN",19,2253,-1)
0^79
"KRN",19,2253,0)
FHFIL1^Print File Entries^^R^^^^^^^^
"KRN",19,2253,1,0)
^^2^2^2950310^^^
"KRN",19,2253,1,1,0)
This option is the standard FileMan Preint option except that
"KRN",19,2253,1,2,0)
it is restricted to dietetic files.
"KRN",19,2253,25)
PRNT^FHSYSF
"KRN",19,2253,"U")
PRINT FILE ENTRIES
"KRN",19,2254,-1)
0^80
"KRN",19,2254,0)
FHFIL2^Search File Entries^^R^^^^^^^^
"KRN",19,2254,1,0)
^^2^2^2890726^
"KRN",19,2254,1,1,0)
This option is the standard FileMan Search option except that
"KRN",19,2254,1,2,0)
it is restricted to dietetic files.
"KRN",19,2254,25)
SRCH^FHSYSF
"KRN",19,2254,"U")
SEARCH FILE ENTRIES
"KRN",19,2255,-1)
0^81
"KRN",19,2255,0)
FHFIL3^Inquire to Files^^R^^^^^^^^
"KRN",19,2255,1,0)
^^2^2^2890726^
"KRN",19,2255,1,1,0)
This option is the standard FileMan Inquire to Files option
"KRN",19,2255,1,2,0)
except that it is restricted to dietetic files.
"KRN",19,2255,25)
INQ^FHSYSF
"KRN",19,2255,"U")
INQUIRE TO FILES
"KRN",19,2256,-1)
0^82
"KRN",19,2256,0)
FHFIL4^File Dictionaries^^R^^^^^^^^
"KRN",19,2256,1,0)
^^1^1^2901016^^
"KRN",19,2256,1,1,0)
This option is the standard FileMan List File Attributes.
"KRN",19,2256,25)
DIC^FHSYSF
"KRN",19,2256,"U")
FILE DICTIONARIES
"KRN",19,2552,-1)
0^1
"KRN",19,2552,0)
FH GECS BATCH^Batch Code Sheets^^A^^^^^^^^^^1
"KRN",19,2552,1,0)
^^1^1^2890411^
"KRN",19,2552,1,1,0)
This option will batch all code sheets by batch type (file 2101.1).
"KRN",19,2552,15)
K GECSSYS
"KRN",19,2552,20)
S GECSSYS="DIETETICS" D BATCH^GECSCALL
"KRN",19,2552,"U")
BATCH CODE SHEETS
"KRN",19,2553,-1)
0^2
"KRN",19,2553,0)
FH GECS BATCH EDIT^Batch Edit^^A^^^^^^^^^^1
"KRN",19,2553,1,0)
^^1^1^2890411^
"KRN",19,2553,1,1,0)
This option allows a batch number or priority to be changed or deleted.
"KRN",19,2553,15)
K GECSSYS
"KRN",19,2553,20)
S GECSSYS="DIETETICS" D EDITBAT^GECSCALL
"KRN",19,2553,"U")
BATCH EDIT
"KRN",19,2554,-1)
0^3
"KRN",19,2554,0)
FH GECS BATCHES STATUS^Status of all Batches^^A^^^^^^^^^^1
"KRN",19,2554,1,0)
^^1^1^2890411^
"KRN",19,2554,1,1,0)
This option will give the status of all batches.
"KRN",19,2554,15)
K GECSSYS
"KRN",19,2554,20)
S GECSSYS="DIETETICS" D RSTATUS^GECSCALL
"KRN",19,2554,"U")
STATUS OF ALL BATCHES
"KRN",19,2555,-1)
0^4
"KRN",19,2555,0)
FH GECS BATCHES WAITING TRANS^Batches Waiting to be Transmitted^^A^^^^^^^^^^1
"KRN",19,2555,1,0)
^^1^1^2890411^
"KRN",19,2555,1,1,0)
This option will display batches waiting to be transmitted.
"KRN",19,2555,15)
K GECSSYS
"KRN",19,2555,20)
S GECSSYS="DIETETICS" D RBATWA^GECSCALL
"KRN",19,2555,"U")
BATCHES WAITING TO BE TRANSMIT
"KRN",19,2556,-1)
0^5
"KRN",19,2556,0)
FH GECS CODE EDIT^Code Sheet Edit^^A^^^^^^^^^^1
"KRN",19,2556,1,0)
^^1^1^2890411^
"KRN",19,2556,1,1,0)
This option will allow a code sheet to be edit.
"KRN",19,2556,15)
K GECSSYS
"KRN",19,2556,20)
S GECSSYS="DIETETICS" D EDITCOD^GECSCALL
"KRN",19,2556,"U")
CODE SHEET EDIT
"KRN",19,2557,-1)
0^6
"KRN",19,2557,0)
FH GECS CREATE^Create a Code Sheet^^A^^^^^^^^^^1
"KRN",19,2557,1,0)
^^2^2^2890411^^
"KRN",19,2557,1,1,0)
This option allows users to input data into the fields set up in
"KRN",19,2557,1,2,0)
file 2100 for creating code sheets.
"KRN",19,2557,15)
K GECSSYS
"KRN",19,2557,20)
S GECSSYS="DIETETICS" D CREATE^GECSCALL
"KRN",19,2557,"U")
CREATE A CODE SHEET
"KRN",19,2558,-1)
0^7
"KRN",19,2558,0)
FH GECS DELETE^Delete a Code Sheet^^A^^^^^^^^^^1
"KRN",19,2558,1,0)
^^1^1^2890411^
"KRN",19,2558,1,1,0)
This option will allow code sheets to be deleted.
"KRN",19,2558,15)
K GECSSYS
"KRN",19,2558,20)
S GECSSYS="DIETETICS" D DELCODE^GECSCALL
"KRN",19,2558,"U")
DELETE A CODE SHEET
"KRN",19,2559,-1)
0^8
"KRN",19,2559,0)
FH GECS KEYPUNCH^Keypunch a Code Sheet^^A^^^^^^^^^^1
"KRN",19,2559,1,0)
^^1^1^2890411^
"KRN",19,2559,1,1,0)
This option allows a code sheet to be created in a word-processing field.
"KRN",19,2559,15)
K GECSSYS
"KRN",19,2559,20)
S GECSSYS="DIETETICS" D KEY^GECSCALL
"KRN",19,2559,"U")
KEYPUNCH A CODE SHEET
"KRN",19,2560,-1)
0^11
"KRN",19,2560,0)
FH GECS PURGE^Purge Transmission Records/Code Sheets^^A^^^^^^^^^^1
"KRN",19,2560,1,0)
^^1^1^2890411^
"KRN",19,2560,1,1,0)
This option will purge old code sheets and transmitted code sheets.
"KRN",19,2560,15)
K GECSSYS
"KRN",19,2560,20)
S GECSSYS="DIETETICS" D PURGE^GECSCALL
"KRN",19,2560,"U")
PURGE TRANSMISSION RECORDS/COD
"KRN",19,2561,-1)
0^12
"KRN",19,2561,0)
FH GECS READY FOR BATCHING LIS^Code Sheets Ready for Batching^^A^^^^^^^^^^1
"KRN",19,2561,1,0)
^^1^1^2890411^
"KRN",19,2561,1,1,0)
This option will list code sheets which are ready for batching.
"KRN",19,2561,15)
K GECSSYS
"KRN",19,2561,20)
S GECSSYS="DIETETICS" D RCODEBA^GECSCALL
"KRN",19,2561,"U")
CODE SHEETS READY FOR BATCHING
"KRN",19,2562,-1)
0^13
"KRN",19,2562,0)
FH GECS REBATCH^Mark Code Sheets for Rebatching^^A^^^^^^^^^^1
"KRN",19,2562,1,0)
^^1^1^2890411^
"KRN",19,2562,1,1,0)
This option will allow a code sheet to be rebatched.
"KRN",19,2562,15)
K GECSSYS
"KRN",19,2562,20)
S GECSSYS="DIETETICS" D REBAT^GECSCALL
"KRN",19,2562,"U")
MARK CODE SHEETS FOR REBATCHIN
"KRN",19,2563,-1)
0^15
"KRN",19,2563,0)
FH GECS RETRANSMIT^Mark Batch for Retransmission^^A^^^^^^^^^^1
"KRN",19,2563,1,0)
^^1^1^2890411^
"KRN",19,2563,1,1,0)
This option allows batches to be retransmitted.
"KRN",19,2563,15)
K GECSSYS
"KRN",19,2563,20)
S GECSSYS="DIETETICS" D RETRAN^GECSCALL
"KRN",19,2563,"U")
MARK BATCH FOR RETRANSMISSION
"KRN",19,2564,-1)
0^16
"KRN",19,2564,0)
FH GECS REVIEW CODE SHEET^Review a Code Sheet^^A^^^^^^^^^^1
"KRN",19,2564,1,0)
^^1^1^2890411^^
"KRN",19,2564,1,1,0)
This option allows code sheets waiting to be batched, to be edit.
"KRN",19,2564,15)
K GECSSYS
"KRN",19,2564,20)
S GECSSYS="DIETETICS" D REVCODE^GECSCALL
"KRN",19,2564,"U")
REVIEW A CODE SHEET
"KRN",19,2565,-1)
0^17
"KRN",19,2565,0)
FH GECS TRANSMIT^Transmit Code Sheets^^A^^^^^^^^^^1
"KRN",19,2565,1,0)
^^1^1^2890411^
"KRN",19,2565,1,1,0)
This option will transmit a batch.
"KRN",19,2565,15)
K GECSSYS
"KRN",19,2565,20)
S GECSSYS="DIETETICS" D TRANS^GECSCALL
"KRN",19,2565,"U")
TRANSMIT CODE SHEETS
"KRN",19,2566,-1)
0^10
"KRN",19,2566,0)
FH GECS MAINTENANCE USER MENU^Maintenance Menu^^M^^^^^^^^
"KRN",19,2566,1,0)
^^2^2^2890411^
"KRN",19,2566,1,1,0)
This menu is for the users (under the GECS USER MENU) for maintenance of
"KRN",19,2566,1,2,0)
the code sheets.
"KRN",19,2566,10,0)
^19.01IP^5^5
"KRN",19,2566,10,1,0)
2553
"KRN",19,2566,10,1,"^")
FH GECS BATCH EDIT
"KRN",19,2566,10,2,0)
2562
"KRN",19,2566,10,2,"^")
FH GECS REBATCH
"KRN",19,2566,10,3,0)
2556
"KRN",19,2566,10,3,"^")
FH GECS CODE EDIT
"KRN",19,2566,10,4,0)
2558
"KRN",19,2566,10,4,"^")
FH GECS DELETE
"KRN",19,2566,10,5,0)
2564
"KRN",19,2566,10,5,"^")
FH GECS REVIEW CODE SHEET
"KRN",19,2566,99)
55724,59982
"KRN",19,2566,"U")
MAINTENANCE MENU
"KRN",19,2567,-1)
0^14
"KRN",19,2567,0)
FH GECS REPORTS MENU^Reports Menu^^M^^^^^^^^
"KRN",19,2567,1,0)
^19.06^2^2^3010726^^
"KRN",19,2567,1,1,0)
This menu contains the reports necessary to manage the generic code
"KRN",19,2567,1,2,0)
sheet system.
"KRN",19,2567,10,0)
^19.01IP^3^3
"KRN",19,2567,10,1,0)
2554
"KRN",19,2567,10,1,"^")
FH GECS BATCHES STATUS
"KRN",19,2567,10,2,0)
2561
"KRN",19,2567,10,2,"^")
FH GECS READY FOR BATCHING LIS
"KRN",19,2567,10,3,0)
2555
"KRN",19,2567,10,3,"^")
FH GECS BATCHES WAITING TRANS
"KRN",19,2567,99)
55724,59980
"KRN",19,2567,"U")
REPORTS MENU
"KRN",19,2568,-1)
0^19
"KRN",19,2568,0)
FH GECS USER MENU^DIETETICS Code Sheet User Menu^^M^^^^^^^^
"KRN",19,2568,1,0)
^^1^1^2890411^^
"KRN",19,2568,1,1,0)
This menu is designated for users who can create and batch code sheets.
"KRN",19,2568,10,0)
^19.01IP^5^5
"KRN",19,2568,10,1,0)
2552
"KRN",19,2568,10,1,"^")
FH GECS BATCH
"KRN",19,2568,10,2,0)
2557
"KRN",19,2568,10,2,"^")
FH GECS CREATE
"KRN",19,2568,10,3,0)
2567
"KRN",19,2568,10,3,"^")
FH GECS REPORTS MENU
"KRN",19,2568,10,4,0)
2559
"KRN",19,2568,10,4,"^")
FH GECS KEYPUNCH
"KRN",19,2568,10,5,0)
2566
"KRN",19,2568,10,5,"^")
FH GECS MAINTENANCE USER MENU
"KRN",19,2568,99)
55724,59980
"KRN",19,2568,"U")
DIETETICS CODE SHEET USER MENU
"KRN",19,2569,-1)
0^18
"KRN",19,2569,0)
FH GECS TRANSMIT USER^DIETETICS Code Sheet Transmission Menu^^M^^^^^^^^
"KRN",19,2569,1,0)
^^1^1^2890411^^
"KRN",19,2569,1,1,0)
This menu is designated for users who transmit code sheets (batches).
"KRN",19,2569,10,0)
^19.01IP^4^4
"KRN",19,2569,10,1,0)
2565
"KRN",19,2569,10,1,"^")
FH GECS TRANSMIT
"KRN",19,2569,10,2,0)
2563
"KRN",19,2569,10,2,"^")
FH GECS RETRANSMIT
"KRN",19,2569,10,3,0)
2555
"KRN",19,2569,10,3,"^")
FH GECS BATCHES WAITING TRANS
"KRN",19,2569,10,4,0)
2554
"KRN",19,2569,10,4,"^")
FH GECS BATCHES STATUS
"KRN",19,2569,99)
55724,59982
"KRN",19,2569,"U")
DIETETICS CODE SHEET TRANSMISS
"KRN",19,2570,-1)
0^9
"KRN",19,2570,0)
FH GECS MAIN MENU^DIETETICS Code Sheet Manager Menu^^M^^^^^^^^
"KRN",19,2570,1,0)
^^2^2^2890411^
"KRN",19,2570,1,1,0)
This menu contains all options and should only be given to the manager
"KRN",19,2570,1,2,0)
of the generic code sheets system.
"KRN",19,2570,10,0)
^19.01IP^7^7
"KRN",19,2570,10,1,0)
2552
"KRN",19,2570,10,1,"^")
FH GECS BATCH
"KRN",19,2570,10,2,0)
2557
"KRN",19,2570,10,2,"^")
FH GECS CREATE
"KRN",19,2570,10,3,0)
2567
"KRN",19,2570,10,3,"^")
FH GECS REPORTS MENU
"KRN",19,2570,10,4,0)
2559
"KRN",19,2570,10,4,"^")
FH GECS KEYPUNCH
"KRN",19,2570,10,5,0)
2566
"KRN",19,2570,10,5,"^")
FH GECS MAINTENANCE USER MENU
"KRN",19,2570,10,6,0)
2569
"KRN",19,2570,10,6,"^")
FH GECS TRANSMIT USER
"KRN",19,2570,10,7,0)
2560
"KRN",19,2570,10,7,"^")
FH GECS PURGE
"KRN",19,2570,99)
55724,59980
"KRN",19,2570,"U")
DIETETICS CODE SHEET MANAGER M
"KRN",19,3486,-1)
0^65
"KRN",19,3486,0)
FHASXR^Print Screening Report^^R^^^^^^^^
"KRN",19,3486,1,0)
^19.06^3^3^3020618^^^^
"KRN",19,3486,1,1,0)
This option will print a nutrition screening form for a patient;
"KRN",19,3486,1,2,0)
it contains any prior assessment data and a format for recording
"KRN",19,3486,1,3,0)
clinical information of interest to dietetics.
"KRN",19,3486,25)
FHASXR
"KRN",19,3486,"U")
PRINT SCREENING REPORT
"KRN",19,3487,-1)
0^56
"KRN",19,3487,0)
FHASM1^Enter Assessment^^R^^^^^^^^DIETETICS
"KRN",19,3487,1,0)
^19.06^2^2^3031204^^^^
"KRN",19,3487,1,1,0)
This option is used to perform a nutrition assessment. The results
"KRN",19,3487,1,2,0)
may optionally be saved.
"KRN",19,3487,25)
FHASM1
"KRN",19,3487,99)
55608,47967
"KRN",19,3487,"U")
ENTER ASSESSMENT
"KRN",19,3488,-1)
0^57
"KRN",19,3488,0)
FHASMR^Display Assessment^^R^^^^^^^^
"KRN",19,3488,1,0)
^19.06^2^2^3011106^^^^
"KRN",19,3488,1,1,0)
This option allows the clinician to display any nutrition
"KRN",19,3488,1,2,0)
assessment on file.
"KRN",19,3488,25)
FHASMR
"KRN",19,3488,"U")
DISPLAY ASSESSMENT
"KRN",19,3489,-1)
0^41
"KRN",19,3489,0)
FHASC1^Enter/Edit Nutrition Classifications^^R^^^^^^^^
"KRN",19,3489,1,0)
^^2^2^2920915^^
"KRN",19,3489,1,1,0)
This option allows creation and/or editing of entries in
"KRN",19,3489,1,2,0)
the Nutrition Classification file (115.3).
"KRN",19,3489,25)
EN1^FHASC
"KRN",19,3489,"U")
ENTER/EDIT NUTRITION CLASSIFIC
"KRN",19,3490,-1)
0^43
"KRN",19,3490,0)
FHASC2^List Nutrition Classifications^^R^^^^^^^^
"KRN",19,3490,1,0)
^^2^2^2891106^
"KRN",19,3490,1,1,0)
This option lists the entries in the Nutrition Classification
"KRN",19,3490,1,2,0)
file (115.3).
"KRN",19,3490,25)
EN2^FHASC
"KRN",19,3490,"U")
LIST NUTRITION CLASSIFICATIONS
"KRN",19,3492,-1)
0^44
"KRN",19,3492,0)
FHASC4^List Nutrition Statuses^^R^^^^^^^^
"KRN",19,3492,1,0)
^19.06^2^2^3031014^^^
"KRN",19,3492,1,1,0)
This option lists the entries in the Nutrition Status
"KRN",19,3492,1,2,0)
file (115.4).
"KRN",19,3492,25)
EN4^FHASN
"KRN",19,3492,"U")
LIST NUTRITION STATUSES
"KRN",19,3493,-1)
0^49
"KRN",19,3493,0)
FHASE1^Enter/Edit Encounter Types^^R^^^^^^^^
"KRN",19,3493,1,0)
^^2^2^2891110^^
"KRN",19,3493,1,1,0)
This option allows creation and/or editing of entries in the
"KRN",19,3493,1,2,0)
Encounter Types file (115.6).
"KRN",19,3493,25)
EN1^FHASE
"KRN",19,3493,"U")
ENTER/EDIT ENCOUNTER TYPES
"KRN",19,3494,-1)
0^50
"KRN",19,3494,0)
FHASE2^List Encounter Types^^R^^^^^^^^
"KRN",19,3494,1,0)
^^2^2^2891110^^
"KRN",19,3494,1,1,0)
This option lists the entries in the Encounter Types
"KRN",19,3494,1,2,0)
file (115.6).
"KRN",19,3494,25)
EN2^FHASE
"KRN",19,3494,"U")
LIST ENCOUNTER TYPES
"KRN",19,3495,-1)
0^45
"KRN",19,3495,0)
FHASC8^Enter/Edit Clinical Site Parameters^^R^^^^^^^^
"KRN",19,3495,1,0)
^19.06^2^2^3011115^^^^
"KRN",19,3495,1,1,0)
This option allows for the entry and/or editing of site parameters
"KRN",19,3495,1,2,0)
for the clinical dietetic functions.
"KRN",19,3495,25)
EN3^FHSYSP
"KRN",19,3495,"U")
ENTER/EDIT CLINICAL SITE PARAM
"KRN",19,3496,-1)
0^51
"KRN",19,3496,0)
FHASE3^Enter/Edit Encounter^^R^^^^^^^^
"KRN",19,3496,1,0)
^19.06^1^1^3040316^^^^
"KRN",19,3496,1,1,0)
This option is used to create or edit a dietetic encounter.
"KRN",19,3496,25)
EN3^FHASE
"KRN",19,3496,"U")
ENTER/EDIT ENCOUNTER
"KRN",19,3497,-1)
0^48
"KRN",19,3497,0)
FHASCX^Clinical Management Menu^^M^^^^^^^^
"KRN",19,3497,1,0)
^^2^2^2930910^^^^
"KRN",19,3497,1,1,0)
This menu allows for the management of the various files used
"KRN",19,3497,1,2,0)
by the clinical and patient management functions of the system.
"KRN",19,3497,10,0)
^19.01PI^18^12
"KRN",19,3497,10,1,0)
3489^EC
"KRN",19,3497,10,1,"^")
FHASC1
"KRN",19,3497,10,2,0)
3490^LC
"KRN",19,3497,10,2,"^")
FHASC2
"KRN",19,3497,10,4,0)
3492^LS
"KRN",19,3497,10,4,"^")
FHASC4
"KRN",19,3497,10,5,0)
3493^ET
"KRN",19,3497,10,5,"^")
FHASE1
"KRN",19,3497,10,6,0)
3494^LT
"KRN",19,3497,10,6,"^")
FHASE2
"KRN",19,3497,10,7,0)
3495^XP
"KRN",19,3497,10,7,"^")
FHASC8
"KRN",19,3497,10,8,0)
3498^NM
"KRN",19,3497,10,8,"^")
FHASCM
"KRN",19,3497,10,9,0)
3499^EP
"KRN",19,3497,10,9,"^")
FHASC9
"KRN",19,3497,10,10,0)
3500^LP
"KRN",19,3497,10,10,"^")
FHASC10
"KRN",19,3497,10,12,0)
3504^XL
"KRN",19,3497,10,12,"^")
FHSYP1
"KRN",19,3497,10,13,0)
3505^XD
"KRN",19,3497,10,13,"^")
FHSYP2
"KRN",19,3497,10,18,0)
8788^CR
"KRN",19,3497,10,18,"^")
FHASNRR
"KRN",19,3497,99)
56581,48221
"KRN",19,3497,99.1)
54375,50474
"KRN",19,3497,"U")
CLINICAL MANAGEMENT MENU
"KRN",19,3498,-1)
0^47
"KRN",19,3498,0)
FHASCM^Nutrition Patient Management^^M^^^^^^^^
"KRN",19,3498,1,0)
^^2^2^2930910^^^^
"KRN",19,3498,1,1,0)
This menu contains the primary clinical dietetic activities
"KRN",19,3498,1,2,0)
performed by the clinician.
"KRN",19,3498,10,0)
^19.01PI^10^10
"KRN",19,3498,10,1,0)
3486^PS
"KRN",19,3498,10,1,"^")
FHASXR
"KRN",19,3498,10,2,0)
3487^EA
"KRN",19,3498,10,2,"^")
FHASM1
"KRN",19,3498,10,3,0)
3488^DA
"KRN",19,3498,10,3,"^")
FHASMR
"KRN",19,3498,10,4,0)
3496^EE
"KRN",19,3498,10,4,"^")
FHASE3
"KRN",19,3498,10,5,0)
3501^ES
"KRN",19,3498,10,5,"^")
FHASE6
"KRN",19,3498,10,6,0)
3503^PE
"KRN",19,3498,10,6,"^")
FHASE5
"KRN",19,3498,10,7,0)
3507^PP
"KRN",19,3498,10,7,"^")
FHASP1
"KRN",19,3498,10,8,0)
8780^PH
"KRN",19,3498,10,8,"^")
FHASNR3
"KRN",19,3498,10,9,0)
8781^LL
"KRN",19,3498,10,9,"^")
FHASNR4
"KRN",19,3498,10,10,0)
8774^LE
"KRN",19,3498,10,10,"^")
FHASE7
"KRN",19,3498,99)
56581,48170
"KRN",19,3498,"U")
NUTRITION PATIENT MANAGEMENT
"KRN",19,3499,-1)
0^46
"KRN",19,3499,0)
FHASC9^Enter/Edit Nutrition Plans^^R^^^^^^^^
"KRN",19,3499,1,0)
^^3^3^2920915^^^
"KRN",19,3499,1,1,0)
This option is used to create and/or edit entries in the
"KRN",19,3499,1,2,0)
nutrition plan file (115.5) used on the Nutrition Screening
"KRN",19,3499,1,3,0)
form.
"KRN",19,3499,25)
EN9^FHASC
"KRN",19,3499,"U")
ENTER/EDIT NUTRITION PLANS
"KRN",19,3500,-1)
0^42
"KRN",19,3500,0)
FHASC10^List Nutrition Plans^^R^^^^^^^^
"KRN",19,3500,1,0)
^^2^2^2891106^
"KRN",19,3500,1,1,0)
This option is used to list the entries in the nutrition plan
"KRN",19,3500,1,2,0)
file (115.5).
"KRN",19,3500,25)
EN10^FHASC
"KRN",19,3500,"U")
LIST NUTRITION PLANS
"KRN",19,3501,-1)
0^54
"KRN",19,3501,0)
FHASE6^Enter Patient Nutrition Status^^R^^^^^^^^
"KRN",19,3501,1,0)
^19.06^2^2^3031204^^^^
"KRN",19,3501,1,1,0)
This option is used to enter the current nutrition status
"KRN",19,3501,1,2,0)
of a patient.
"KRN",19,3501,25)
EN5^FHASN
"KRN",19,3501,"U")
ENTER PATIENT NUTRITION STATUS
"KRN",19,3502,-1)
0^52
"KRN",19,3502,0)
FHASE4^Encounter Statistics^^R^^^^^^^^DIETETICS
"KRN",19,3502,1,0)
^19.06^2^2^3031015^^^^
"KRN",19,3502,1,1,0)
This option is used to tabulate encounters, broken down by
"KRN",19,3502,1,2,0)
clinician if desired, for any specified period of time.
"KRN",19,3502,25)
FHASE1
"KRN",19,3502,"U")
ENCOUNTER STATISTICS
"KRN",19,3503,-1)
0^53
"KRN",19,3503,0)
FHASE5^Patient Encounter Inquiry^^R^^^^^^^^
"KRN",19,3503,1,0)
^^2^2^2911209^^^
"KRN",19,3503,1,1,0)
This option allows for a listing of the details of all encounters
"KRN",19,3503,1,2,0)
from a given date for a specified patient.
"KRN",19,3503,25)
FHASE2
"KRN",19,3503,"U")
PATIENT ENCOUNTER INQUIRY
"KRN",19,3504,-1)
0^282
"KRN",19,3504,0)
FHSYP1^Display Selected Lab Tests^^R^^^^^^^^
"KRN",19,3504,1,0)
^^2^2^2920915^^^
"KRN",19,3504,1,1,0)
This option will display all of the lab tests selected as
"KRN",19,3504,1,2,0)
site parameters for this site.
"KRN",19,3504,25)
EN1^FHSYSP
"KRN",19,3504,"U")
DISPLAY SELECTED LAB TESTS
"KRN",19,3505,-1)
0^283
"KRN",19,3505,0)
FHSYP2^Display Selected Drug Classifications^^R^^^^^^^^
"KRN",19,3505,1,0)
^^2^2^2920915^^^
"KRN",19,3505,1,1,0)
This option will display all of the drug classifications
"KRN",19,3505,1,2,0)
selected as site parameters by this site.
"KRN",19,3505,25)
EN2^FHSYSP
"KRN",19,3505,"U")
DISPLAY SELECTED DRUG CLASSIFI
"KRN",19,3506,-1)
0^58
"KRN",19,3506,0)
FHASNR^Nutrition Status Summary^^R^^^^^^^^DIETETICS
"KRN",19,3506,1,0)
^^2^2^2930415^^
"KRN",19,3506,1,1,0)
This option will display the nutrition status counts
"KRN",19,3506,1,2,0)
by either ward or by clinician.
"KRN",19,3506,25)
FHASN1
"KRN",19,3506,"U")
NUTRITION STATUS SUMMARY
"KRN",19,3507,-1)
0^64
"KRN",19,3507,0)
FHASP1^Print Nutrition Profile^^R^^^^^^^^DIETETICS
"KRN",19,3507,1,0)
^19.06^3^3^3040623^^^^
"KRN",19,3507,1,1,0)
This option will print a Nutrition Profile listing important
"KRN",19,3507,1,2,0)
events, drugs, lab tests, etc. which may be of importance in
"KRN",19,3507,1,3,0)
developing treatment recommendations.
"KRN",19,3507,25)
FHASP
"KRN",19,3507,"U")
PRINT NUTRITION PROFILE
"KRN",19,3508,-1)
0^24
"KRN",19,3508,0)
FHADMR2A^Calculate NPO/Trays^^R^^^^^^^^DIETETICS
"KRN",19,3508,1,0)
^19.06^2^2^3031201^^^^
"KRN",19,3508,1,1,0)
This option is used to calculate the number of NPO and
"KRN",19,3508,1,2,0)
cafeteria meals served.
"KRN",19,3508,25)
EN1^FHADM2A
"KRN",19,3508,200.9)
y
"KRN",19,3508,"U")
CALCULATE NPO/TRAYS
"KRN",19,4117,-1)
0^20
"KRN",19,4117,0)
FHADM^Production Reports^^M^^^^^^^^^^1
"KRN",19,4117,1,0)
^19.06^2^2^3020124^^^^
"KRN",19,4117,1,1,0)
This menu contains the lists and reports used for daily food
"KRN",19,4117,1,2,0)
production.
"KRN",19,4117,10,0)
^19.01IP^16^15
"KRN",19,4117,10,2,0)
2202^MR
"KRN",19,4117,10,2,"^")
FHPRO5
"KRN",19,4117,10,3,0)
2204^RP
"KRN",19,4117,10,3,"^")
FHREC2
"KRN",19,4117,10,4,0)
2211^WP
"KRN",19,4117,10,4,"^")
FHPRC7
"KRN",19,4117,10,5,0)
2197^FM
"KRN",19,4117,10,5,"^")
FHPRFM
"KRN",19,4117,10,6,0)
2231^PU
"KRN",19,4117,10,6,"^")
FHPRR1
"KRN",19,4117,10,7,0)
2183^SO
"KRN",19,4117,10,7,"^")
FHSP5
"KRN",19,4117,10,8,0)
2096^WL
"KRN",19,4117,10,8,"^")
FHNO3
"KRN",19,4117,10,9,0)
2140^BW
"KRN",19,4117,10,9,"^")
FHNO10
"KRN",19,4117,10,10,0)
2095^LA
"KRN",19,4117,10,10,"^")
FHNO2
"KRN",19,4117,10,11,0)
2251^TP
"KRN",19,4117,10,11,"^")
FHSEL5
"KRN",19,4117,10,12,0)
2252^DP
"KRN",19,4117,10,12,"^")
FHPRC11
"KRN",19,4117,10,13,0)
8760^WR
"KRN",19,4117,10,13,"^")
FHPRC12
"KRN",19,4117,10,14,0)
8777^SP
"KRN",19,4117,10,14,"^")
FHSP7
"KRN",19,4117,10,15,0)
8778^SL
"KRN",19,4117,10,15,"^")
FHSP8
"KRN",19,4117,10,16,0)
11406^TR
"KRN",19,4117,10,16,"^")
FHMTKTR
"KRN",19,4117,15)

"KRN",19,4117,20)
S FHA1=7 D ^FHVER
"KRN",19,4117,99)
58828,33514
"KRN",19,4117,"U")
PRODUCTION REPORTS
"KRN",19,5523,-1)
0^293
"KRN",19,5523,0)
GMRA PATIENT A/AR EDIT^Enter/Edit Patient Reaction Data^^R^^^^^^^^ADVERSE REACTION TRACKING
"KRN",19,5523,1,0)
^^2^2^2960130^
"KRN",19,5523,1,1,0)
This option allows the clinicians/allergy verifiers access to enter and
"KRN",19,5523,1,2,0)
edit allergy/adverse reaction data for a particular patient.
"KRN",19,5523,25)
EN1^GMRAPEM0
"KRN",19,5523,99)
55605,53764
"KRN",19,5523,99.1)
55409,57966
"KRN",19,5523,"U")
ENTER/EDIT PATIENT REACTION DA
"KRN",19,8746,-1)
0^71
"KRN",19,8746,0)
FHCTF^Tickler File^^M^^^^^^^^
"KRN",19,8746,1,0)
^19.06^1^1^3020626^^^^
"KRN",19,8746,1,1,0)
This is the menu of Tickler File options.
"KRN",19,8746,10,0)
^19.01IP^3^3
"KRN",19,8746,10,1,0)
8747^DI
"KRN",19,8746,10,1,"^")
FHCTF1
"KRN",19,8746,10,2,0)
8748^CL
"KRN",19,8746,10,2,"^")
FHCTF2
"KRN",19,8746,10,3,0)
8749^EN
"KRN",19,8746,10,3,"^")
FHCTF3
"KRN",19,8746,99)
56581,48173
"KRN",19,8746,"U")
TICKLER FILE
"KRN",19,8747,-1)
0^72
"KRN",19,8747,0)
FHCTF1^Display Tickler File^^R^^^^^^^^
"KRN",19,8747,1,0)
^^3^3^2950302^^
"KRN",19,8747,1,1,0)
This option will display all Tickler File entries for a
"KRN",19,8747,1,2,0)
clinician. It scanns all wards for which the clinician is
"KRN",19,8747,1,3,0)
responsible.
"KRN",19,8747,25)
FHCTF1
"KRN",19,8747,"U")
DISPLAY TICKLER FILE
"KRN",19,8748,-1)
0^73
"KRN",19,8748,0)
FHCTF2^Clear Tickler File Entries^^R^^^^^^^^
"KRN",19,8748,1,0)
^19.06^2^2^3020829^^^^
"KRN",19,8748,1,1,0)
This option allows the clinician to clear Tickler File
"KRN",19,8748,1,2,0)
entries by performing the required reviews.
"KRN",19,8748,25)
FHCTF3
"KRN",19,8748,"U")
CLEAR TICKLER FILE ENTRIES
"KRN",19,8749,-1)
0^74
"KRN",19,8749,0)
FHCTF3^Enter Tickler File Item^^R^^^^^^^^
"KRN",19,8749,1,0)
^19.06^2^2^3020626^^
"KRN",19,8749,1,1,0)
This option allows for the entry of a 'personal' or non-patient
"KRN",19,8749,1,2,0)
related Tickler File item.
"KRN",19,8749,25)
EN1^FHCTF
"KRN",19,8749,"U")
ENTER TICKLER FILE ITEM
"KRN",19,8750,-1)
0^245
"KRN",19,8750,0)
FHPRO7^Enter/Edit Production Facilities^^R^^^^^^^^
"KRN",19,8750,1,0)
^^3^3^2911204^
"KRN",19,8750,1,1,0)
This option is used to enter and edit values for the various
"KRN",19,8750,1,2,0)
Production Facilities. A Production Facility is generally a main
"KRN",19,8750,1,3,0)
kitchen where bulk food is prepared.
"KRN",19,8750,25)
EN5^FHPRO
"KRN",19,8750,"U")
ENTER/EDIT PRODUCTION FACILITI
"KRN",19,8751,-1)
0^246
"KRN",19,8751,0)
FHPRO8^Enter/Edit Service Points^^R^^^^^^^^
"KRN",19,8751,1,0)
^19.06^3^3^3020719^^
"KRN",19,8751,1,1,0)
This option is used to enter and edit values for Service Points.
"KRN",19,8751,1,2,0)
Service Points are various tray assembly lines and cafeterias where
"KRN",19,8751,1,3,0)
bulk food from the Production Facility is served.
"KRN",19,8751,25)
EN6^FHPRO
"KRN",19,8751,"U")
ENTER/EDIT SERVICE POINTS
"KRN",19,8752,-1)
0^247
"KRN",19,8752,0)
FHPRO9^Enter/Edit Communication Offices^^R^^^^^^^^
"KRN",19,8752,1,0)
^^3^3^2911211^^^
"KRN",19,8752,1,1,0)
This option is used to enter and edit values for Communication Offices.
"KRN",19,8752,1,2,0)
The Communication Office processes all diet orders for the wards for
"KRN",19,8752,1,3,0)
which it is responsible.
"KRN",19,8752,25)
EN7^FHPRO
"KRN",19,8752,"U")
ENTER/EDIT COMMUNICATION OFFIC
"KRN",19,8753,-1)
0^238
"KRN",19,8753,0)
FHPRO10^List Production/Service/Communication Facilities^^R^^^^^^^^
"KRN",19,8753,1,0)
^19.06^4^4^3020719^^^^
"KRN",19,8753,1,1,0)
This option is used to produce a series of reports on each of the
"KRN",19,8753,1,2,0)
Production Facilities, Service Points, Communication Offices, and
"KRN",19,8753,1,3,0)
Supplemental Feeding Sites. The reports show all parameters
"KRN",19,8753,1,4,0)
associated with each facility.
"KRN",19,8753,25)
FHPRW1
"KRN",19,8753,"U")
LIST PRODUCTION/SERVICE/COMMUN
"KRN",19,8754,-1)
0^292
"KRN",19,8754,0)
FHX5^Update Patient Dietetic Location^^R^^^^^^^^
"KRN",19,8754,1,0)
^19.06^4^4^3020501^^^^
"KRN",19,8754,1,1,0)
This option will determine the proper Dietetic Ward based upon
"KRN",19,8754,1,2,0)
the Room-Bed (or Default MAS Ward if necessary) and insert the
"KRN",19,8754,1,3,0)
location into the Dietetic Patient file for the appropriate
"KRN",19,8754,1,4,0)
admission.
"KRN",19,8754,25)
EN1^FHXWRD
"KRN",19,8754,"U")
UPDATE PATIENT DIETETIC LOCATI
"KRN",19,8755,-1)
0^239
"KRN",19,8755,0)
FHPRO11^Enter/Edit Supplemental Fdg. Sites^^R^^^^^^^^
"KRN",19,8755,1,0)
^^3^3^2911204^
"KRN",19,8755,1,1,0)
This option is used to enter and edit values for Supplemental
"KRN",19,8755,1,2,0)
Feeding Sites. These sites assemble the supplemental feeding orders
"KRN",19,8755,1,3,0)
for the wards which are asigned to them.
"KRN",19,8755,25)
EN8^FHPRO
"KRN",19,8755,"U")
ENTER/EDIT SUPPLEMENTAL FDG. S
"KRN",19,8756,-1)
0^236
"KRN",19,8756,0)
FHPRG^Dietetic Facilities^^M^^^^^^^^
"KRN",19,8756,1,0)
^19.06^2^2^3030728^^^^
"KRN",19,8756,1,1,0)
This is a menu which allows the manager to build basic files
"KRN",19,8756,1,2,0)
relating to the facilities available in the Dietetic Service.
"KRN",19,8756,10,0)
^19.01IP^8^8
"KRN",19,8756,10,1,0)
8752^CE
"KRN",19,8756,10,1,"^")
FHPRO9
"KRN",19,8756,10,2,0)
8750^FE
"KRN",19,8756,10,2,"^")
FHPRO7
"KRN",19,8756,10,3,0)
8755^NE
"KRN",19,8756,10,3,"^")
FHPRO11
"KRN",19,8756,10,4,0)
8751^SE
"KRN",19,8756,10,4,"^")
FHPRO8
"KRN",19,8756,10,5,0)
8753^SL
"KRN",19,8756,10,5,"^")
FHPRO10
"KRN",19,8756,10,6,0)
2134^WE
"KRN",19,8756,10,6,"^")
FHPRO2
"KRN",19,8756,10,7,0)
2236^WL
"KRN",19,8756,10,7,"^")
FHPRO6
"KRN",19,8756,10,8,0)
2083^SP
"KRN",19,8756,10,8,"^")
FHSITE
"KRN",19,8756,99)
59576,31849
"KRN",19,8756,"U")
DIETETIC FACILITIES
"KRN",19,8757,-1)
0^59
"KRN",19,8757,0)
FHASNR2^Nutrition Status Matrix^^R^^^^^^^^DIETETICS
"KRN",19,8757,1,0)
^^3^3^2930415^
"KRN",19,8757,1,1,0)
This option allows user to print in matrix form the changes of
"KRN",19,8757,1,2,0)
inpatients' Nutrition Statuses from admission to XX number
"KRN",19,8757,1,3,0)
of days or a selected start date to end date.
"KRN",19,8757,25)
FHASN3
"KRN",19,8757,"U")
NUTRITION STATUS MATRIX
"KRN",19,8758,-1)
0^69
"KRN",19,8758,0)
FHCMRR1^Enter/Edit Cost of Meals Served^^R^^^^^^^^DIETETICS
"KRN",19,8758,1,0)
^19.06^1^1^3030818^^^^
"KRN",19,8758,1,1,0)
This option allows user to enter or edit Cost of Meals Served.
"KRN",19,8758,25)
EN1^FHCMSR
"KRN",19,8758,"U")
ENTER/EDIT COST OF MEALS SERVE
"KRN",19,8759,-1)
0^70
"KRN",19,8759,0)
FHCMRR2^Cost of Meals Served Report^^R^^^^^^^^DIETETICS
"KRN",19,8759,1,0)
^19.06^2^2^3030730^^^^
"KRN",19,8759,1,1,0)
This option allows the user to print the Cost of Meals Served Report
"KRN",19,8759,1,2,0)
from a selected Month/Year to a selected Month/Year.
"KRN",19,8759,25)
EN2^FHCMSR
"KRN",19,8759,"U")
COST OF MEALS SERVED REPORT
"KRN",19,8760,-1)
0^218
"KRN",19,8760,0)
FHPRC12^Print Weekly Menu Blocks^^R^^^^^^^^DIETETICS
"KRN",19,8760,1,0)
^^5^5^2940104^^^^
"KRN",19,8760,1,1,0)
This option allows the user to print a seven days menu containing
"KRN",19,8760,1,2,0)
the individual recipes under a selected Recipe Category for one
"KRN",19,8760,1,3,0)
Production Diet or all to be served at breakfast, noon, and evening
"KRN",19,8760,1,4,0)
for each of the seven days.  The meals from which the recipes are
"KRN",19,8760,1,5,0)
taken, are those that are or will be effective during the week chosen.
"KRN",19,8760,25)
FHPRC9
"KRN",19,8760,"U")
PRINT WEEKLY MENU BLOCKS
"KRN",19,8761,-1)
0^29
"KRN",19,8761,0)
FHADR1^Enter/Edit Facility Profile^^R^^^^^^^^DIETETICS
"KRN",19,8761,1,0)
^^3^3^2930406^^^^
"KRN",19,8761,1,1,0)
This option allows the user to enter or edit the facility Profile 
"KRN",19,8761,1,2,0)
along with the Special Medical Programs, Primary Delivery System,
"KRN",19,8761,1,3,0)
and Cook Chill.
"KRN",19,8761,25)
EN1^FHADR1
"KRN",19,8761,"U")
ENTER/EDIT FACILITY PROFILE
"KRN",19,8762,-1)
0^30
"KRN",19,8762,0)
FHADR2^Enter/Edit Type of Service^^R^^^^^^^^DIETETICS
"KRN",19,8762,1,0)
^^3^3^2920306^^^^
"KRN",19,8762,1,1,0)
This option allows the user to enter or edit the number of Proposed
"KRN",19,8762,1,2,0)
Patients' Meals currently served at Bedside, in a Cafeteria, and
"KRN",19,8762,1,3,0)
at Dining Room.
"KRN",19,8762,25)
FHADR2
"KRN",19,8762,99)
55545,47198
"KRN",19,8762,"U")
ENTER/EDIT TYPE OF SERVICE
"KRN",19,8763,-1)
0^31
"KRN",19,8763,0)
FHADR3^Enter/Edit Hospital Outpatient Visits^^R^^^^^^^^DIETETICS
"KRN",19,8763,1,0)
^^3^3^2930126^^^^
"KRN",19,8763,1,1,0)
This option allows the user to enter or edit the number of
"KRN",19,8763,1,2,0)
Outpatient visits to the Hospital and the Satellite Clinic
"KRN",19,8763,1,3,0)
locations and the number of Outpatients that visit them.
"KRN",19,8763,25)
EN1^FHADR3
"KRN",19,8763,"U")
ENTER/EDIT HOSPITAL OUTPATIENT
"KRN",19,8764,-1)
0^32
"KRN",19,8764,0)
FHADR4^Enter/Edit Staffing FTEE^^R^^^^^^^^DIETETICS
"KRN",19,8764,1,0)
^^3^3^2920227^^^
"KRN",19,8764,1,1,0)
This option allows the user to enter or edit the Staffing FTEE
"KRN",19,8764,1,2,0)
of Clinical, Administrative, Support Staff, Supervisory, and
"KRN",19,8764,1,3,0)
Measured.
"KRN",19,8764,25)
EN1^FHADR7
"KRN",19,8764,"U")
ENTER/EDIT STAFFING FTEE
"KRN",19,8765,-1)
0^33
"KRN",19,8765,0)
FHADR5^Enter the Snapshot date for Modified Diets^^R^^^^^^^^DIETETICS
"KRN",19,8765,1,0)
^^3^3^2920316^^^^
"KRN",19,8765,1,1,0)
This option allows the user to enter a Sunday as the
"KRN",19,8765,1,2,0)
Snapshot date to tabulate the Average number of patients that have
"KRN",19,8765,1,3,0)
Modified Diet for the week Prior from that Sunday of each quarter.
"KRN",19,8765,25)
EN1^FHADR6
"KRN",19,8765,"U")
ENTER THE SNAPSHOT DATE FOR MO
"KRN",19,8766,-1)
0^34
"KRN",19,8766,0)
FHADR6^Enter/Edit Cost Per Diem^^R^^^^^^^^DIETETICS
"KRN",19,8766,1,0)
^19.06^5^5^3041119^^^^
"KRN",19,8766,1,1,0)
This option allows the user to enter or edit the Cost Per Diem
"KRN",19,8766,1,2,0)
per Patient. The Cost include Total Personal Service Cost of
"KRN",19,8766,1,3,0)
Technicians, Dietitians, Wageboard, and Clerical, Subsistence,
"KRN",19,8766,1,4,0)
and Operating Supplies. In addition, the cumulative Fiscal
"KRN",19,8766,1,5,0)
Year totals presented on the 830 Report will need to be entered.
"KRN",19,8766,25)
EN1^FHADR8
"KRN",19,8766,"U")
ENTER/EDIT COST PER DIEM
"KRN",19,8767,-1)
0^35
"KRN",19,8767,0)
FHADR7^Enter/Edit Dietetic Satisfaction Survey^^R^^^^^^^^DIETETICS
"KRN",19,8767,1,0)
^^3^3^2931230^^^^
"KRN",19,8767,1,1,0)
This option allows the user to enter or edit the service
"KRN",19,8767,1,2,0)
Satisfaction data which result from the Dietetic
"KRN",19,8767,1,3,0)
Survey taken by the facility.
"KRN",19,8767,25)
EN1^FHADR9
"KRN",19,8767,"U")
ENTER/EDIT DIETETIC SATISFACTI
"KRN",19,8768,-1)
0^36
"KRN",19,8768,0)
FHADR8^Enter/Edit Dietetic Service Equipment^^R^^^^^^^^DIETETICS
"KRN",19,8768,1,0)
^^2^2^2930126^^
"KRN",19,8768,1,1,0)
This option allows the user to indicate the Dietetic System
"KRN",19,8768,1,2,0)
Equipment the facility has and the Brand of the Equipment.
"KRN",19,8768,25)
EN1^FHADR10
"KRN",19,8768,"U")
ENTER/EDIT DIETETIC SERVICE EQ
"KRN",19,8769,-1)
0^38
"KRN",19,8769,0)
FHADRP^Print Annual Dietetic Report^^R^^^^^^^^DIETETICS
"KRN",19,8769,1,0)
^19.06^1^1^3011010^^^^
"KRN",19,8769,1,1,0)
This option allows the user to print the Annual Dietetic Report.
"KRN",19,8769,25)
EN1^FHADRPT
"KRN",19,8769,"U")
PRINT ANNUAL DIETETIC REPORT
"KRN",19,8770,-1)
0^40
"KRN",19,8770,0)
FHADRS^Purge Old Annual Dietetic Data^^R^^^^^^^^DIETETICS
"KRN",19,8770,1,0)
^^2^2^2930205^^^^
"KRN",19,8770,1,1,0)
This option allows the user to Purge the Annual Dietetic Data
"KRN",19,8770,1,2,0)
that is prior than three years from current year.
"KRN",19,8770,25)
EN1^FHADRSY
"KRN",19,8770,"U")
PURGE OLD ANNUAL DIETETIC DATA
"KRN",19,8771,-1)
0^39
"KRN",19,8771,0)
FHADRR^Annual Report Management^^M^^^^^^^^DIETETICS^^1
"KRN",19,8771,1,0)
^19.06^3^3^3010905^^^^
"KRN",19,8771,1,1,0)
This menu allows access to options necessary for data collection
"KRN",19,8771,1,2,0)
and calculation for the seven sections in each quarter and allows
"KRN",19,8771,1,3,0)
the user to print the final report.
"KRN",19,8771,10,0)
^19.01IP^11^11
"KRN",19,8771,10,1,0)
8761^EA^1
"KRN",19,8771,10,1,"^")
FHADR1
"KRN",19,8771,10,2,0)
8762^EC^3
"KRN",19,8771,10,2,"^")
FHADR2
"KRN",19,8771,10,3,0)
8763^EB^2
"KRN",19,8771,10,3,"^")
FHADR3
"KRN",19,8771,10,4,0)
8764^ED^4
"KRN",19,8771,10,4,"^")
FHADR4
"KRN",19,8771,10,5,0)
8765^EE^5
"KRN",19,8771,10,5,"^")
FHADR5
"KRN",19,8771,10,6,0)
8766^EF^6
"KRN",19,8771,10,6,"^")
FHADR6
"KRN",19,8771,10,7,0)
8767^EG^7
"KRN",19,8771,10,7,"^")
FHADR7
"KRN",19,8771,10,8,0)
8768^EH^8
"KRN",19,8771,10,8,"^")
FHADR8
"KRN",19,8771,10,9,0)
8769^PR^10
"KRN",19,8771,10,9,"^")
FHADRP
"KRN",19,8771,10,10,0)
8770^PU^11
"KRN",19,8771,10,10,"^")
FHADRS
"KRN",19,8771,10,11,0)
8785^EI^9
"KRN",19,8771,10,11,"^")
FHADR9
"KRN",19,8771,20)
S FHA1=8 D ^FHVER
"KRN",19,8771,99)
56581,48164
"KRN",19,8771,"U")
ANNUAL REPORT MANAGEMENT
"KRN",19,8772,-1)
0^87
"KRN",19,8772,0)
FHING12^Enter/Edit Current Ingredient QOH^^R^^^^^^^^DIETETICS
"KRN",19,8772,1,0)
^^2^2^2920728^^^^
"KRN",19,8772,1,1,0)
This option allows user to enter/edit Quantity On Hand one at the time
"KRN",19,8772,1,2,0)
or either by Food Group Order or Storage Location.
"KRN",19,8772,20)

"KRN",19,8772,25)
EN1^FHREP
"KRN",19,8772,"U")
ENTER/EDIT CURRENT INGREDIENT 
"KRN",19,8773,-1)
0^88
"KRN",19,8773,0)
FHING13^Display Ingredient Inventory List^^R^^^^^^^^DIETETICS
"KRN",19,8773,1,0)
^19.06^1^1^3040804^^^^
"KRN",19,8773,1,1,0)
This option allow the user to display the Inventory Worksheet or Report.
"KRN",19,8773,20)

"KRN",19,8773,25)
EN2^FHREP1
"KRN",19,8773,"U")
DISPLAY INGREDIENT INVENTORY L
"KRN",19,8774,-1)
0^55
"KRN",19,8774,0)
FHASE7^List Encounters^^R^^^^^^^^
"KRN",19,8774,1,0)
^19.06^2^2^3030819^^^^
"KRN",19,8774,1,1,0)
This option will list all encounters for a single clinician
"KRN",19,8774,1,2,0)
based upon a starting and ending date.
"KRN",19,8774,25)
IND^FHASE1
"KRN",19,8774,"U")
LIST ENCOUNTERS
"KRN",19,8775,-1)
0^209
"KRN",19,8775,0)
FHORTF5L^Print Tubefeeding Labels^^R^^^^^^^^DIETETICS
"KRN",19,8775,1,0)
^19.06^1^1^3030806^^^^
"KRN",19,8775,1,1,0)
This option allows user to print the Tubefeeding labels.
"KRN",19,8775,20)

"KRN",19,8775,25)
LAB^FHORT5
"KRN",19,8775,"U")
PRINT TUBEFEEDING LABELS
"KRN",19,8776,-1)
0^208
"KRN",19,8776,0)
FHORTF5C^Print Tubefeeding Cost Report^^R^^^^^^^^DIETETICS
"KRN",19,8776,1,0)
^19.06^1^1^3041221^^^^
"KRN",19,8776,1,1,0)
This option allow user to print the Tubefeeding Cost Report.
"KRN",19,8776,20)

"KRN",19,8776,25)
COST^FHORT5
"KRN",19,8776,"U")
PRINT TUBEFEEDING COST REPORT
"KRN",19,8777,-1)
0^278
"KRN",19,8777,0)
FHSP7^Consolidate Standing Orders^^R^^^^^^^^DIETETICS
"KRN",19,8777,1,0)
^19.06^2^2^3030512^^^^
"KRN",19,8777,1,1,0)
This option allows user to tally by Service Point and
"KRN",19,8777,1,2,0)
consolidate by meal or day.
"KRN",19,8777,20)

"KRN",19,8777,25)
E1^FHSP1
"KRN",19,8777,"U")
CONSOLIDATE STANDING ORDERS
"KRN",19,8778,-1)
0^279
"KRN",19,8778,0)
FHSP8^Print Standing Order Labels^^R^^^^^^^^DIETETICS
"KRN",19,8778,1,0)
^19.06^1^1^3030616^^^^
"KRN",19,8778,1,1,0)
This option allows the user to print labels for standing orders.
"KRN",19,8778,20)

"KRN",19,8778,25)
E2^FHSP1
"KRN",19,8778,"U")
PRINT STANDING ORDER LABELS
"KRN",19,8779,-1)
0^210
"KRN",19,8779,0)
FHORTF5P^Tubefeeding Preparation^^R^^^^^^^^DIETETICS
"KRN",19,8779,1,0)
^^2^2^3040322^
"KRN",19,8779,1,1,0)
This option will print only the Tubefeeding Preparation Report
"KRN",19,8779,1,2,0)
for use on the Locations.
"KRN",19,8779,25)
PREP^FHORT5
"KRN",19,8779,"U")
TUBEFEEDING PREPARATION
"KRN",19,8780,-1)
0^60
"KRN",19,8780,0)
FHASNR3^Print Pat's Nutrition Status History^^R^^^^^^^^DIETETICS
"KRN",19,8780,1,0)
^^4^4^2930630^^^^
"KRN",19,8780,1,1,0)
This option will print the Nutrition Status History for an
"KRN",19,8780,1,2,0)
inpatient or outpatient. The user can select a starting
"KRN",19,8780,1,3,0)
and an ending date or take the default of FIRST,
"KRN",19,8780,1,4,0)
the first date on file, to LAST, the last date on file.
"KRN",19,8780,25)
FHASN5
"KRN",19,8780,"U")
PRINT PAT'S NUTRITION STATUS H
"KRN",19,8781,-1)
0^61
"KRN",19,8781,0)
FHASNR4^List Inpats By Nutrition Status Level^^R^^^^^^^^DIETETICS
"KRN",19,8781,1,0)
^^2^2^2930630^^^^
"KRN",19,8781,1,1,0)
This option will List all inpatients at the Nutrition Status
"KRN",19,8781,1,2,0)
Level selected by the user.
"KRN",19,8781,25)
FHASN6
"KRN",19,8781,"U")
LIST INPATS BY NUTRITION STATU
"KRN",19,8782,-1)
0^185
"KRN",19,8782,0)
FHORD15^Diet Census Percentage^^R^^^^^^^^DIETETICS
"KRN",19,8782,1,0)
^19.06^2^2^3020430^^^
"KRN",19,8782,1,1,0)
This option allows user to display the Actual Diet Census Percentage
"KRN",19,8782,1,2,0)
or the Forecasted or Actual Diet Census Percentage of meal.
"KRN",19,8782,25)
FHORD92
"KRN",19,8782,"U")
DIET CENSUS PERCENTAGE
"KRN",19,8783,-1)
0^62
"KRN",19,8783,0)
FHASNR5^Nutrition Status Average^^R^^^^^^^^DIETETICS
"KRN",19,8783,1,0)
^^3^3^2930415^
"KRN",19,8783,1,1,0)
This option displays the Averages of the Nutrition Statuses for ward(s)
"KRN",19,8783,1,2,0)
or clinician(s) from a selected start date to end date.  This report
"KRN",19,8783,1,3,0)
is very time consuming; therefore, it must be queued to print.
"KRN",19,8783,25)
FHASN7
"KRN",19,8783,"U")
NUTRITION STATUS AVERAGE
"KRN",19,8784,-1)
0^212
"KRN",19,8784,0)
FHORX2^List Patient Events^^R^^^^^^^^
"KRN",19,8784,1,0)
^19.06^4^4^3040524^^^^
"KRN",19,8784,1,1,0)
This option will list all patient dietetic events for a
"KRN",19,8784,1,2,0)
specified period of time.
"KRN",19,8784,1,3,0)

"KRN",19,8784,1,4,0)
As of Version 5.5, this option will list outpatient events as well.
"KRN",19,8784,25)
FHORX2
"KRN",19,8784,"U")
LIST PATIENT EVENTS
"KRN",19,8785,-1)
0^37
"KRN",19,8785,0)
FHADR9^Enter/Edit Nutritive Analysis Average^^R^^^^^^^^DIETETICS
"KRN",19,8785,1,0)
^^2^2^2930406^^^^
"KRN",19,8785,1,1,0)
This option allows user to Enter or Edit the Nutritiive Analysis
"KRN",19,8785,1,2,0)
Average of one week regular menu.
"KRN",19,8785,25)
EN1^FHADR61
"KRN",19,8785,"U")
ENTER/EDIT NUTRITIVE ANALYSIS 
"KRN",19,8786,-1)
0^94
"KRN",19,8786,0)
FHING52^List Ingredients - Nutrient Data^^R^^^^^^^^DIETETICS
"KRN",19,8786,1,0)
^19.06^4^4^3021121^^^^
"KRN",19,8786,1,1,0)
This option will list all ingredients along with data elements
"KRN",19,8786,1,2,0)
associated with food nutrient for running the recipe analysis
"KRN",19,8786,1,3,0)
such as default nutrient, recipe unit, and weight of recipe unit
"KRN",19,8786,1,4,0)
in LBS.
"KRN",19,8786,25)
LIS3^FHPRI2
"KRN",19,8786,"U")
LIST INGREDIENTS - NUTRIENT DA
"KRN",19,8787,-1)
0^211
"KRN",19,8787,0)
FHORTFM^Tubefeeding Reports/Labels^^M^^^^^^^^DIETETICS
"KRN",19,8787,1,0)
^^3^3^2930429^^^^
"KRN",19,8787,1,1,0)
This is a menu which contains the options to display the
"KRN",19,8787,1,2,0)
Preparation/Delivery of Tubefeedings, the Tubefeeding
"KRN",19,8787,1,3,0)
Preparation, and the Tubefeeding Labels.
"KRN",19,8787,10,0)
^19.01PI^4^4
"KRN",19,8787,10,1,0)
2147^TF
"KRN",19,8787,10,1,"^")
FHORTF5
"KRN",19,8787,10,2,0)
8775^TL
"KRN",19,8787,10,2,"^")
FHORTF5L
"KRN",19,8787,10,3,0)
8779^TP
"KRN",19,8787,10,3,"^")
FHORTF5P
"KRN",19,8787,10,4,0)
8789^TX
"KRN",19,8787,10,4,"^")
FHORT5S
"KRN",19,8787,99)
56581,48202
"KRN",19,8787,"U")
TUBEFEEDING REPORTS/LABELS
"KRN",19,8788,-1)
0^63
"KRN",19,8788,0)
FHASNRR^Clinical Management Report^^M^^^^^^^^DIETETICS
"KRN",19,8788,1,0)
^19.06^3^3^3021031^^^^
"KRN",19,8788,1,1,0)
This menu allows user to access the Monitor Inquiry, Monitor Reports,
"KRN",19,8788,1,2,0)
Encounter Statistics, Nutrition Status Summary, Nutrition Status Average
"KRN",19,8788,1,3,0)
and Nutrition Status Matrix options.
"KRN",19,8788,10,0)
^19.01IP^8^8
"KRN",19,8788,10,1,0)
3506^NS
"KRN",19,8788,10,1,"^")
FHASNR
"KRN",19,8788,10,2,0)
8757^NZ
"KRN",19,8788,10,2,"^")
FHASNR2
"KRN",19,8788,10,3,0)
8783^NA
"KRN",19,8788,10,3,"^")
FHASNR5
"KRN",19,8788,10,4,0)
3502^SE
"KRN",19,8788,10,4,"^")
FHASE4
"KRN",19,8788,10,5,0)
11317^MI
"KRN",19,8788,10,5,"^")
FHMNINQ
"KRN",19,8788,10,6,0)
11318^MR
"KRN",19,8788,10,6,"^")
FHMNREP
"KRN",19,8788,10,7,0)
11487^MM
"KRN",19,8788,10,7,"^")
FHMNBRPT
"KRN",19,8788,10,8,0)
11541^MA
"KRN",19,8788,10,8,"^")
FHMNADM
"KRN",19,8788,99)
58979,50244
"KRN",19,8788,"U")
CLINICAL MANAGEMENT REPORT
"KRN",19,8789,-1)
0^202
"KRN",19,8789,0)
FHORT5S^Tubefeeding Pull Lists^^R^^^^^^^^
"KRN",19,8789,1,0)
^^3^3^3040322^
"KRN",19,8789,1,1,0)
This option will print pick lists for all tubefeeding products for
"KRN",19,8789,1,2,0)
the selected Communication Office or Location as well as a consolidated
"KRN",19,8789,1,3,0)
pick list when all Communication Offices or Locations are selected.
"KRN",19,8789,25)
PULL^FHORT5
"KRN",19,8789,"U")
TUBEFEEDING PULL LISTS
"KRN",19,8790,-1)
0^253
"KRN",19,8790,0)
FHREC11^Analyze All Recipes^^R^^^^^^^^
"KRN",19,8790,1,0)
^^2^2^2940113^^
"KRN",19,8790,1,1,0)
This option will re-analyze all recipes using the current nutrient
"KRN",19,8790,1,2,0)
values in File 112. Updated results will be stored in 112.
"KRN",19,8790,25)
ALL^FHREC5
"KRN",19,8790,"U")
ANALYZE ALL RECIPES
"KRN",19,8791,-1)
0^254
"KRN",19,8791,0)
FHREC12^Display Recipe Analysis^^R^^^^^^^^
"KRN",19,8791,1,0)
^^1^1^2940113^^^
"KRN",19,8791,1,1,0)
This option will display the nutrient analysis of a recipe.
"KRN",19,8791,25)
FHREC6
"KRN",19,8791,"U")
DISPLAY RECIPE ANALYSIS
"KRN",19,8792,-1)
0^219
"KRN",19,8792,0)
FHPRC13^Display Meal Analysis^^R^^^^^^^^DIETETICS
"KRN",19,8792,1,0)
^19.06^2^2^3020225^^^^
"KRN",19,8792,1,1,0)
This option will produce a nutrient analysis for a selected meal from
"KRN",19,8792,1,2,0)
the Meal file using the nutrient analysis of the recipes.
"KRN",19,8792,25)
FHPRC10
"KRN",19,8792,"U")
DISPLAY MEAL ANALYSIS
"KRN",19,8793,-1)
0^133
"KRN",19,8793,0)
FHNU12^Enter Nutrients (Common Units)^^R^^^^^^^^DIETETICS
"KRN",19,8793,1,0)
^^2^2^2931027^^^
"KRN",19,8793,1,1,0)
This option allow user to enter Nutrients in Common Units to
"KRN",19,8793,1,2,0)
calculate the value per 100 grams to be stored in file (112).
"KRN",19,8793,25)
FHNUT
"KRN",19,8793,"U")
ENTER NUTRIENTS (COMMON UNITS)
"KRN",19,8794,-1)
0^220
"KRN",19,8794,0)
FHPRC14^Input Recipe Menu^^R^^^^^^^^DIETETICS
"KRN",19,8794,1,0)
^19.06^2^2^3020528^^^^
"KRN",19,8794,1,1,0)
This option allows user to create and/or edit recipe menu
"KRN",19,8794,1,2,0)
for the User Menu file (112.6) to be used for the Meal Analysis.
"KRN",19,8794,25)
FHPRC13
"KRN",19,8794,"U")
INPUT RECIPE MENU
"KRN",19,8795,-1)
0^255
"KRN",19,8795,0)
FHREC13^Display Analyzed Recipes List^^R^^^^^^^^DIETETICS
"KRN",19,8795,1,0)
^^3^3^2940113^
"KRN",19,8795,1,1,0)
This option will display a list of recipe names that have been
"KRN",19,8795,1,2,0)
analyzed and also the ones that have not been analyzed with
"KRN",19,8795,1,3,0)
'**' preceding the name.
"KRN",19,8795,25)
FHREC7
"KRN",19,8795,"U")
DISPLAY ANALYZED RECIPES LIST
"KRN",19,8796,-1)
0^113
"KRN",19,8796,0)
FHMTKP^Print Tray Tickets^^R^^^^^^^^DIETETICS
"KRN",19,8796,1,0)
^19.06^5^5^3040524^^^^
"KRN",19,8796,1,1,0)
This option allows the user to print tray tickets three patients
"KRN",19,8796,1,2,0)
per page for a selected patient, a ward, a Communication Office, or
"KRN",19,8796,1,3,0)
all for one meal or all three meals.
"KRN",19,8796,1,4,0)

"KRN",19,8796,1,5,0)
As of Version 5.5, tray tickets can be printed for outpatients as well.
"KRN",19,8796,25)
FHMTK1
"KRN",19,8796,"U")
PRINT TRAY TICKETS
"KRN",19,8797,-1)
0^110
"KRN",19,8797,0)
FHMTKM^Tray Tickets^^M^^^^^^^^DIETETICS
"KRN",19,8797,1,0)
^19.06^2^2^3030702^^^^
"KRN",19,8797,1,1,0)
This menu contains the options for producing the Diet Cards,
"KRN",19,8797,1,2,0)
Tray Tickets, and the Diet Pattern list.
"KRN",19,8797,10,0)
^19.01IP^7^4
"KRN",19,8797,10,4,0)
8796^PT
"KRN",19,8797,10,4,"^")
FHMTKP
"KRN",19,8797,10,5,0)
8798^PD
"KRN",19,8797,10,5,"^")
FHDCRP
"KRN",19,8797,10,6,0)
8803^LD
"KRN",19,8797,10,6,"^")
FHMTKN
"KRN",19,8797,10,7,0)
8804^HP
"KRN",19,8797,10,7,"^")
FHMTKH
"KRN",19,8797,99)
59709,24808
"KRN",19,8797,"U")
TRAY TICKETS
"KRN",19,8798,-1)
0^76
"KRN",19,8798,0)
FHDCRP^Print Diet Cards^^R^^^^^^^^DIETETICS
"KRN",19,8798,1,0)
^^4^4^3040630^
"KRN",19,8798,1,1,0)
This option allows user to print Diet Cards that consist of
"KRN",19,8798,1,2,0)
patients' Diet patterns.  The Diet Cards can be printed
"KRN",19,8798,1,3,0)
two patients per page or three per page for a selected
"KRN",19,8798,1,4,0)
patient, a location, a Communication Office, or all.
"KRN",19,8798,25)
FHDCR1
"KRN",19,8798,"U")
PRINT DIET CARDS
"KRN",19,8799,-1)
0^108
"KRN",19,8799,0)
FHMTKE^Enter/Edit Patient Diet Pattern^^R^^^^^^^^DIETETICS
"KRN",19,8799,1,0)
^19.06^2^2^3040225^^^
"KRN",19,8799,1,1,0)
This option allows the user to enter a specific Diet Pattern for
"KRN",19,8799,1,2,0)
a selected patient for the three meals.
"KRN",19,8799,25)
FHMTK3
"KRN",19,8799,"U")
ENTER/EDIT PATIENT DIET PATTER
"KRN",19,8800,-1)
0^114
"KRN",19,8800,0)
FHMTKS^Enter/Edit Diet Patterns^^R^^^^^^^^DIETETICS
"KRN",19,8800,1,0)
^19.06^3^3^3031103^^^^
"KRN",19,8800,1,1,0)
This option allows the user to enter/edit a Diet pattern which
"KRN",19,8800,1,2,0)
consist of Recipe Categories and the quantities for the purpose
"KRN",19,8800,1,3,0)
of printing the Tray Tickets.
"KRN",19,8800,25)
FHMTK
"KRN",19,8800,"U")
ENTER/EDIT DIET PATTERNS
"KRN",19,8801,-1)
0^115
"KRN",19,8801,0)
FHMTKT^List Diet Patterns^^R^^^^^^^^DIETETICS
"KRN",19,8801,1,0)
^^2^2^2941109^^
"KRN",19,8801,1,1,0)
This option allows the user to list one selected Diet Pattern or
"KRN",19,8801,1,2,0)
all the Diet Patterns entered through Enter/Edit Diet Patterns.
"KRN",19,8801,25)
FHMTK2
"KRN",19,8801,"U")
LIST DIET PATTERNS
"KRN",19,8802,-1)
0^111
"KRN",19,8802,0)
FHMTKMM^Tray Tickets/Diet Cards Management^^M^^^^^^^^DIETETICS
"KRN",19,8802,1,0)
^19.06^4^4^3021031^^^^
"KRN",19,8802,1,1,0)
This menu consists of the options associated with Tray
"KRN",19,8802,1,2,0)
Tickets and Diet Cards, including enter/edit the Diet Patterns,
"KRN",19,8802,1,3,0)
Recipe categories, and meals and the printing of the Tray Tickets
"KRN",19,8802,1,4,0)
and Diet Cards.
"KRN",19,8802,10,0)
^19.01IP^8^8
"KRN",19,8802,10,1,0)
2223^CE
"KRN",19,8802,10,1,"^")
FHREC4
"KRN",19,8802,10,2,0)
8800^DP
"KRN",19,8802,10,2,"^")
FHMTKS
"KRN",19,8802,10,3,0)
8801^LP
"KRN",19,8802,10,3,"^")
FHMTKT
"KRN",19,8802,10,4,0)
2208^ME
"KRN",19,8802,10,4,"^")
FHPRC4
"KRN",19,8802,10,5,0)
2210^ML
"KRN",19,8802,10,5,"^")
FHPRC6
"KRN",19,8802,10,6,0)
8798^PD
"KRN",19,8802,10,6,"^")
FHDCRP
"KRN",19,8802,10,7,0)
8796^PT
"KRN",19,8802,10,7,"^")
FHMTKP
"KRN",19,8802,10,8,0)
2224^CL
"KRN",19,8802,10,8,"^")
FHREC5
"KRN",19,8802,99)
56581,48214
"KRN",19,8802,"U")
TRAY TICKETS/DIET CARDS MANAGE
"KRN",19,8803,-1)
0^112
"KRN",19,8803,0)
FHMTKN^List Patients With No/prev Patterns^^R^^^^^^^^DIETETICS
"KRN",19,8803,1,0)
^19.06^6^6^3050106^^^^
"KRN",19,8803,1,1,0)
This option allows the user to run two listings.  One list
"KRN",19,8803,1,2,0)
consists of all the inpatients that do not have any Diet
"KRN",19,8803,1,3,0)
Pattern that match with their current-diet.  The second list
"KRN",19,8803,1,4,0)
consists of a listing of inpatients that do not have a current
"KRN",19,8803,1,5,0)
individual pattern but have had a individual pattern for a 
"KRN",19,8803,1,6,0)
previous Diet order.
"KRN",19,8803,25)
FHMTK5
"KRN",19,8803,"U")
LIST PATIENTS WITH NO/PREV PAT
"KRN",19,8804,-1)
0^109
"KRN",19,8804,0)
FHMTKH^History of Diet Patterns^^R^^^^^^^^DIETETICS
"KRN",19,8804,1,0)
^19.06^3^3^3041123^^^^
"KRN",19,8804,1,1,0)
This option will display all Diet Patterns entered for
"KRN",19,8804,1,2,0)
the patient's admission and allow user to add a previous
"KRN",19,8804,1,3,0)
Diet Pattern to a patient's current-diet.
"KRN",19,8804,25)
FHMTK6
"KRN",19,8804,"U")
HISTORY OF DIET PATTERNS
"KRN",19,11210,-1)
0^75
"KRN",19,11210,0)
FHCTF5^Inpatient Monitor Scan^^R^^^^^^^^
"KRN",19,11210,1,0)
^19.06^4^4^3011115^^^^
"KRN",19,11210,1,1,0)
This option is designed to be run automatically once a day to
"KRN",19,11210,1,2,0)
scan each inpatient for compliance with established monitors.
"KRN",19,11210,1,3,0)
Patients needing examination will be placed both in the monitor
"KRN",19,11210,1,4,0)
files as well as into the Tickler file.
"KRN",19,11210,25)
FHCTF5
"KRN",19,11210,200.9)
y
"KRN",19,11210,"U")
INPATIENT MONITOR SCAN
"KRN",19,11317,-1)
0^106
"KRN",19,11317,0)
FHMNINQ^Nutrition Patient Monitor Inquiry^^R^^^^^^^^
"KRN",19,11317,1,0)
^19.06^2^2^3020612^^^
"KRN",19,11317,1,1,0)
This option does an inquiry of any monitors for a selected patient
"KRN",19,11317,1,2,0)
on a selected admission date.
"KRN",19,11317,25)
FHMNINQ
"KRN",19,11317,"U")
NUTRITION PATIENT MONITOR INQU
"KRN",19,11318,-1)
0^107
"KRN",19,11318,0)
FHMNREP^Nutrition Monitor Statistics Report^^R^^^^^^^^
"KRN",19,11318,1,0)
^19.06^4^4^3030530^^^^
"KRN",19,11318,1,1,0)
This option displays an expanded report given a date range sortable by
"KRN",19,11318,1,2,0)
clinician or ward, of patients with admission dates within the date range.
"KRN",19,11318,1,3,0)
Displays the monitors for each patient as well as totals for each clinician
"KRN",19,11318,1,4,0)
or ward and gives total admissions, number with monitors and a percentage.
"KRN",19,11318,25)
FHMNREP
"KRN",19,11318,"U")
NUTRITION MONITOR STATISTICS R
"KRN",19,11406,-1)
0^116
"KRN",19,11406,0)
FHMTKTR^Print Tabulated Recipe List^^R^^^^^^^^DIETETICS
"KRN",19,11406,1,0)
^19.06^2^2^3020320^^^
"KRN",19,11406,1,1,0)
New option to Print the Dietetics Tabulated Recipe List as a separate
"KRN",19,11406,1,2,0)
option from the Print Tray Tickets option.
"KRN",19,11406,25)
TABREC^FHMTK1
"KRN",19,11406,"U")
PRINT TABULATED RECIPE LIST
"KRN",19,11487,-1)
0^105
"KRN",19,11487,0)
FHMNBRPT^Nutrition Monitor Brief Report^^R^^^^^^^^
"KRN",19,11487,1,0)
^19.06^3^3^3030709^^^^
"KRN",19,11487,1,1,0)
This option displays a report given a date range of patients with
"KRN",19,11487,1,2,0)
admission dates within that range and whether they have any monitors or
"KRN",19,11487,1,3,0)
not.  Also gives total admissions, number with monitors and a percentage.
"KRN",19,11487,25)
FHMNBRPT
"KRN",19,11487,"U")
NUTRITION MONITOR BRIEF REPORT
"KRN",19,11541,-1)
0^104
"KRN",19,11541,0)
FHMNADM^Nutrition Admission/Discharge Monitor Report^^R^^^^^^^^
"KRN",19,11541,1,0)
^19.06^2^2^3030530^^^^
"KRN",19,11541,1,1,0)
Displays a report of admitted or discharged patients with monitors in
"KRN",19,11541,1,2,0)
a given date range.
"KRN",19,11541,25)
FHMNADM
"KRN",19,11541,"U")
NUTRITION ADMISSION/DISCHARGE 
"KRN",19,11726,-1)
0^103
"KRN",19,11726,0)
FHMGROM^Outpatient Meals^^M^^^^^^^^
"KRN",19,11726,1,0)
^19.06^2^2^3030609^^^^
"KRN",19,11726,1,1,0)
This menu allows access to all options pertaining to the outpatient
"KRN",19,11726,1,2,0)
meals functionality.
"KRN",19,11726,10,0)
^19.01IP^3^3
"KRN",19,11726,10,1,0)
11730^RM^2
"KRN",19,11726,10,1,"^")
FHOMRMGR
"KRN",19,11726,10,2,0)
11731^SM^1
"KRN",19,11726,10,2,"^")
FHOMSMGR
"KRN",19,11726,10,3,0)
11732^GM^3
"KRN",19,11726,10,3,"^")
FHOMGMGR
"KRN",19,11726,10.1)

"KRN",19,11726,99)
59240,37195
"KRN",19,11726,"U")
OUTPATIENT MEALS
"KRN",19,11727,-1)
0^156
"KRN",19,11727,0)
FHOMRO^Order/Edit Outpatient Meals^^R^^^^^^^^
"KRN",19,11727,1,0)
^19.06^1^1^3030508^^
"KRN",19,11727,1,1,0)
Option to order recurring outpatient meals or edit existing outpatient meals.
"KRN",19,11727,10.1)
Order (short)
"KRN",19,11727,25)
FHOMRO1
"KRN",19,11727,"U")
ORDER/EDIT OUTPATIENT MEALS
"KRN",19,11728,-1)
0^152
"KRN",19,11728,0)
FHOMRC^Cancel Outpatient Meal^^R^^^^^^^^
"KRN",19,11728,1,0)
^^1^1^3030311^
"KRN",19,11728,1,1,0)
Option to cancel existing outpatient meal(s).
"KRN",19,11728,10.1)
Cancel (Short)
"KRN",19,11728,25)
FHOMRC1
"KRN",19,11728,"U")
CANCEL OUTPATIENT MEAL
"KRN",19,11729,-1)
0^158
"KRN",19,11729,0)
FHOMRR^Review Outpatient Meal^^R^^^^^^^^
"KRN",19,11729,1,0)
^^1^1^3030311^
"KRN",19,11729,1,1,0)
Option to display/review recurring outpatient meals.
"KRN",19,11729,25)
FHOMRR1
"KRN",19,11729,"U")
REVIEW OUTPATIENT MEAL
"KRN",19,11730,-1)
0^155
"KRN",19,11730,0)
FHOMRMGR^Recurring Meals Menu^^M^^^^^^^^
"KRN",19,11730,1,0)
^19.06^2^2^3040831^^^^
"KRN",19,11730,1,1,0)
This menu allows access to all recurring meals options within the outpatient
"KRN",19,11730,1,2,0)
meals menu.
"KRN",19,11730,10,0)
^19.01IP^12^12
"KRN",19,11730,10,1,0)
11727^OD^1
"KRN",19,11730,10,1,"^")
FHOMRO
"KRN",19,11730,10,2,0)
11729^RO^3
"KRN",19,11730,10,2,"^")
FHOMRR
"KRN",19,11730,10,3,0)
11728^CM^5
"KRN",19,11730,10,3,"^")
FHOMRC
"KRN",19,11730,10,4,0)
11777^PT^8
"KRN",19,11730,10,4,"^")
FHOMRP
"KRN",19,11730,10,5,0)
11778^AO^6
"KRN",19,11730,10,5,"^")
FHOMRA
"KRN",19,11730,10,6,0)
2138^PP^4
"KRN",19,11730,10,6,"^")
FHORD9
"KRN",19,11730,10,7,0)
11779^EL^2
"KRN",19,11730,10,7,"^")
FHOMRE
"KRN",19,11730,10,8,0)
11793^TF^7
"KRN",19,11730,10,8,"^")
FHOMRT
"KRN",19,11730,10,9,0)
11871^IP^9
"KRN",19,11730,10,9,"^")
FHOMIP
"KRN",19,11730,10,10,0)
11950^CA^10
"KRN",19,11730,10,10,"^")
FHOMRAC
"KRN",19,11730,10,11,0)
11951^CE^11
"KRN",19,11730,10,11,"^")
FHOMREC
"KRN",19,11730,10,12,0)
11952^CT^12
"KRN",19,11730,10,12,"^")
FHOMRTC
"KRN",19,11730,99)
59540,34517
"KRN",19,11730,"U")
RECURRING MEALS MENU
"KRN",19,11731,-1)
0^163
"KRN",19,11731,0)
FHOMSMGR^Special Meals Menu^^M^^^^^^^^
"KRN",19,11731,1,0)
^19.06^2^2^3030421^^^^
"KRN",19,11731,1,1,0)
This menu allows access to all special meals options within the outpatient
"KRN",19,11731,1,2,0)
meals menu.
"KRN",19,11731,10,0)
^19.01IP^5^5
"KRN",19,11731,10,1,0)
11759^AM^2
"KRN",19,11731,10,1,"^")
FHOMSA
"KRN",19,11731,10,2,0)
11760^RO^1
"KRN",19,11731,10,2,"^")
FHOMSR
"KRN",19,11731,10,3,0)
11761^PM^3
"KRN",19,11731,10,3,"^")
FHOMSP
"KRN",19,11731,10,4,0)
11762^CM^4
"KRN",19,11731,10,4,"^")
FHOMSC
"KRN",19,11731,10,5,0)
11763^MS^5
"KRN",19,11731,10,5,"^")
FHOMSS
"KRN",19,11731,99)
59871,57393
"KRN",19,11731,99.1)
59932,26554
"KRN",19,11731,"U")
SPECIAL MEALS MENU
"KRN",19,11732,-1)
0^146
"KRN",19,11732,0)
FHOMGMGR^Guest Meals Menu^^M^^^^^^^^
"KRN",19,11732,1,0)
^19.06^2^2^3030701^^^^
"KRN",19,11732,1,1,0)
This menu allows access to all guest meals options within the outpatient
"KRN",19,11732,1,2,0)
meals menu.
"KRN",19,11732,10,0)
^19.01IP^2^2
"KRN",19,11732,10,1,0)
11764^GM^1
"KRN",19,11732,10,1,"^")
FHOMGR
"KRN",19,11732,10,2,0)
11797^PT^2
"KRN",19,11732,10,2,"^")
FHOMGP
"KRN",19,11732,99)
59351,47162
"KRN",19,11732,99.1)
59932,26554
"KRN",19,11732,"U")
GUEST MEALS MENU
"KRN",19,11759,-1)
0^161
"KRN",19,11759,0)
FHOMSA^Authorize a Meal^^R^^^^^^^^
"KRN",19,11759,1,0)
^19.06^1^1^3030421^^^
"KRN",19,11759,1,1,0)
Allows an authorized user to authorize a special meal request.
"KRN",19,11759,25)
FHOMSA1
"KRN",19,11759,"U")
AUTHORIZE A MEAL
"KRN",19,11760,-1)
0^165
"KRN",19,11760,0)
FHOMSR^Request a Meal^^R^^^^^^^^
"KRN",19,11760,1,0)
^19.06^1^1^3041229^^
"KRN",19,11760,1,1,0)
Allows the user to request a special meal.
"KRN",19,11760,25)
FHOMSR1
"KRN",19,11760,"U")
REQUEST A MEAL
"KRN",19,11761,-1)
0^164
"KRN",19,11761,0)
FHOMSP^Print Meal Voucher^^R^^^^^^^^
"KRN",19,11761,1,0)
^19.06^1^1^3041229^^^
"KRN",19,11761,1,1,0)
Allows the user to print a special meal voucher.
"KRN",19,11761,25)
FHOMSP1
"KRN",19,11761,"U")
PRINT MEAL VOUCHER
"KRN",19,11762,-1)
0^162
"KRN",19,11762,0)
FHOMSC^Cancel a Meal^^R^^^^^^^^
"KRN",19,11762,1,0)
^^1^1^3030421^
"KRN",19,11762,1,1,0)
Allows the user to cancel a meal.
"KRN",19,11762,25)
FHOMSC1
"KRN",19,11762,"U")
CANCEL A MEAL
"KRN",19,11763,-1)
0^166
"KRN",19,11763,0)
FHOMSS^Meal Status Report^^R^^^^^^^^
"KRN",19,11763,1,0)
^^1^1^3030421^
"KRN",19,11763,1,1,0)
Prints a list of existing special meals and their current status.
"KRN",19,11763,25)
FHOMSS1
"KRN",19,11763,"U")
MEAL STATUS REPORT
"KRN",19,11764,-1)
0^148
"KRN",19,11764,0)
FHOMGR^Request a Meal^^R^^^^^^^^
"KRN",19,11764,1,0)
^^1^1^3030421^
"KRN",19,11764,1,1,0)
Allows the user to request a guest meal.
"KRN",19,11764,25)
FHOMGR1
"KRN",19,11764,"U")
REQUEST A MEAL
"KRN",19,11777,-1)
0^157
"KRN",19,11777,0)
FHOMRP^Recurring Meal Plan Expiration List^^R^^^^^^^^
"KRN",19,11777,1,0)
^^1^1^3030508^
"KRN",19,11777,1,1,0)
Displays a list of meal plans expiring for selected outpatient location.
"KRN",19,11777,25)
FHOMRP1
"KRN",19,11777,"U")
RECURRING MEAL PLAN EXPIRATION
"KRN",19,11778,-1)
0^150
"KRN",19,11778,0)
FHOMRA^Additional Orders^^R^^^^^^^^
"KRN",19,11778,1,0)
^^1^1^3030520^
"KRN",19,11778,1,1,0)
Option to enter additional orders for outpatients.
"KRN",19,11778,25)
FHOMRA1
"KRN",19,11778,"U")
ADDITIONAL ORDERS
"KRN",19,11779,-1)
0^153
"KRN",19,11779,0)
FHOMRE^Early/Late Tray^^R^^^^^^^^
"KRN",19,11779,1,0)
^^1^1^3030527^
"KRN",19,11779,1,1,0)
This option is to enter an early/late tray for an outpatient recurring meal.
"KRN",19,11779,25)
FHOMRE1
"KRN",19,11779,"U")
EARLY/LATE TRAY
"KRN",19,11793,-1)
0^159
"KRN",19,11793,0)
FHOMRT^Tubefeeding^^R^^^^^^^^
"KRN",19,11793,1,0)
^19.06^2^2^3030828^^^
"KRN",19,11793,1,1,0)
This option allows tubefeedings to be ordered for outpatients with recurring
"KRN",19,11793,1,2,0)
meals.
"KRN",19,11793,25)
FHOMRT1
"KRN",19,11793,"U")
TUBEFEEDING
"KRN",19,11797,-1)
0^147
"KRN",19,11797,0)
FHOMGP^Print Guest Meal List^^R^^^^^^^^
"KRN",19,11797,1,0)
^^1^1^3030701^
"KRN",19,11797,1,1,0)
Report to display list of guest meals.
"KRN",19,11797,25)
FHOMGP1
"KRN",19,11797,"U")
PRINT GUEST MEAL LIST
"KRN",19,11871,-1)
0^149
"KRN",19,11871,0)
FHOMIP^Outpatient Isolation/Precaution^^R^^^^^^^^
"KRN",19,11871,1,0)
^^1^1^3030922^
"KRN",19,11871,1,1,0)
Option for entering Isolations/Precautions for outpatients.
"KRN",19,11871,25)
FHOMIP
"KRN",19,11871,"U")
OUTPATIENT ISOLATION/PRECAUTIO
"KRN",19,11950,-1)
0^151
"KRN",19,11950,0)
FHOMRAC^Cancel Additional Order^^R^^^^^^^^
"KRN",19,11950,1,0)
^19.06^1^1^3040816^^
"KRN",19,11950,1,1,0)
Option to cancel existing outpatient additional orders.
"KRN",19,11950,25)
CA^FHOMRC1
"KRN",19,11950,"U")
CANCEL ADDITIONAL ORDER
"KRN",19,11951,-1)
0^154
"KRN",19,11951,0)
FHOMREC^Cancel Early/Late Tray^^R^^^^^^^^
"KRN",19,11951,1,0)
^^1^1^3040816^
"KRN",19,11951,1,1,0)
Option to cancel existing outpatient early/late trays.
"KRN",19,11951,25)
CE^FHOMRC1
"KRN",19,11951,"U")
CANCEL EARLY/LATE TRAY
"KRN",19,11952,-1)
0^160
"KRN",19,11952,0)
FHOMRTC^Cancel Tubefeeding^^R^^^^^^^^
"KRN",19,11952,1,0)
^^1^1^3040816^
"KRN",19,11952,1,1,0)
Option to cancel existing outpatient tubefeedings.
"KRN",19,11952,25)
CT^FHOMRC1
"KRN",19,11952,"U")
CANCEL TUBEFEEDING
"KRN",19.1,99,-1)
0^2
"KRN",19.1,99,0)
FHMGR
"KRN",19.1,99,1,0)
^^3^3^2890623^^^
"KRN",19.1,99,1,1,0)
This key allows deletion of Dietetics file entries as well as the
"KRN",19.1,99,1,2,0)
ability to select inactivated entries for re-activation or
"KRN",19.1,99,1,3,0)
deletion.
"KRN",19.1,131,-1)
0^3
"KRN",19.1,131,0)
FHWARD
"KRN",19.1,131,1,0)
^^3^3^2851101^
"KRN",19.1,131,1,1,0)
This key is for the set of routines comprising FHWARD, the 
"KRN",19.1,131,1,2,0)
ward order-entry programs.
"KRN",19.1,131,1,3,0)
 
"KRN",19.1,449,-1)
0^1
"KRN",19.1,449,0)
FHAUTH
"KRN",19.1,449,1,0)
^^1^1^3030424^
"KRN",19.1,449,1,1,0)
This key allows authorization of Outpatient Meals Special Meals requests.
"KRN",101,1064,-1)
0^6
"KRN",101,1064,0)
FHW1^Diet Order^^O^^^^^^^^DIETETICS
"KRN",101,1064,1,0)
^101.06^1^1^3040901^^
"KRN",101,1064,1,1,0)
This is the OE/RR protocol for ordering diets.
"KRN",101,1064,5)

"KRN",101,1064,20)
D ^FHORDW
"KRN",101,1064,99)
57406,36135
"KRN",101,1064,100.1)
D CANO^FHORDW
"KRN",101,1065,-1)
0^7
"KRN",101,1065,0)
FHW2^Early/Late Tray^^O^^^^^^^^DIETETICS
"KRN",101,1065,1,0)
^^1^1^2890512^
"KRN",101,1065,1,1,0)
This is the OE/RR protocol to order Early & Late trays.
"KRN",101,1065,5)

"KRN",101,1065,20)
D ^FHOREW
"KRN",101,1065,99)
57406,36135
"KRN",101,1065,100.1)
D OREO^FHORE3
"KRN",101,1066,-1)
0^8
"KRN",101,1066,0)
FHW3^Isolation/Precautions^^O^^^^^^^^DIETETICS
"KRN",101,1066,1,0)
^^1^1^2910626^
"KRN",101,1066,1,1,0)
This is the OE/RR option to order Isolation/Precautions.
"KRN",101,1066,5)

"KRN",101,1066,20)
D ^FHORDW2
"KRN",101,1066,99)
57406,36135
"KRN",101,1067,-1)
0^9
"KRN",101,1067,0)
FHW4^NPO^^O^^^^^^^^DIETETICS
"KRN",101,1067,1,0)
^^1^1^2890512^
"KRN",101,1067,1,1,0)
This is the OE/RR option for NPO Orders.
"KRN",101,1067,5)

"KRN",101,1067,20)
D ^FHORDW1
"KRN",101,1067,99)
57406,36135
"KRN",101,1067,100.1)
D CANN^FHORDW
"KRN",101,1069,-1)
0^10
"KRN",101,1069,0)
FHW6^Dietetic Consult^^O^^^^^^^^DIETETICS
"KRN",101,1069,1,0)
^^1^1^2910626^
"KRN",101,1069,1,1,0)
This is the OE/RR protocol for ordering Dietetic consultations.
"KRN",101,1069,5)

"KRN",101,1069,20)
D ^FHORCW
"KRN",101,1069,99)
57406,36135
"KRN",101,1069,100)
D DIS^FHORCW
"KRN",101,1069,100.1)
D CAN^FHORCW
"KRN",101,1070,-1)
0^11
"KRN",101,1070,0)
FHW7^Additional Orders^^O^^^^^^^^DIETETICS
"KRN",101,1070,1,0)
^^2^2^2910626^
"KRN",101,1070,1,1,0)
This is the OE/RR protocol for entering additional orders other
"KRN",101,1070,1,2,0)
than those contained in other dietetic protocols.
"KRN",101,1070,5)

"KRN",101,1070,20)
D ^FHOROW
"KRN",101,1070,99)
57406,36135
"KRN",101,1070,100)
D DIS^FHOROW
"KRN",101,1070,100.1)
D CAN^FHOROW
"KRN",101,1071,-1)
0^12
"KRN",101,1071,0)
FHW8^Tubefeeding^^O^^^^^^^^DIETETICS
"KRN",101,1071,1,0)
^^1^1^2890512^
"KRN",101,1071,1,1,0)
This is the OE/RR protocol for ordering Tubefeedings.
"KRN",101,1071,5)

"KRN",101,1071,20)
D ^FHORTW
"KRN",101,1071,99)
57406,36135
"KRN",101,1071,100)
D DIS^FHORTW
"KRN",101,1071,100.1)
D CAN^FHORTW
"KRN",101,1073,-1)
0^33
"KRN",101,1073,0)
FHWPRO1^Dietetic Profile^^A^^^^^^^^DIETETICS
"KRN",101,1073,1,0)
^^2^2^2891007^
"KRN",101,1073,1,1,0)
This option is added to the OE/RR OROPRO menu to display
"KRN",101,1073,1,2,0)
the dietetic patient profile.
"KRN",101,1073,5)

"KRN",101,1073,20)
D OE^FHORD6
"KRN",101,1073,99)
57406,36136
"KRN",101,1077,-1)
0^29
"KRN",101,1077,0)
FHWMAS^Dietetics MAS Event Processor^^X^^^^^^^^DIETETICS
"KRN",101,1077,1,0)
^101.06^2^2^3020226^^^
"KRN",101,1077,1,1,0)
This protocol is used to process MAS events (admissions, discharges,
"KRN",101,1077,1,2,0)
etc.) from the MAS package.
"KRN",101,1077,5)

"KRN",101,1077,20)
D ^FHWMAS
"KRN",101,1077,99)
57406,36135
"KRN",101,1451,-1)
0^31
"KRN",101,1451,0)
FHWN1^NPO Now^^O^^^^^^^^DIETETICS
"KRN",101,1451,20)
D NOW^%DTC S D1=% D Q1^FHORDW1
"KRN",101,1451,99)
57406,36136
"KRN",101,1452,-1)
0^32
"KRN",101,1452,0)
FHWN2^NPO at Midnight^^O^^^^^^^^DIETETICS
"KRN",101,1452,20)
D NOW^%DTC S D1=%\1_".2359" D Q1^FHORDW1
"KRN",101,1452,99)
57406,36136
"KRN",101,1454,-1)
0^30
"KRN",101,1454,0)
FHWMENU^Dietetic Orders^^Q^^^^^^^^DIETETICS
"KRN",101,1454,4)
40
"KRN",101,1454,5)

"KRN",101,1454,10,0)
^101.01PA^29^19
"KRN",101,1454,10,1,0)
1064^1^1^
"KRN",101,1454,10,1,"^")
FHW1
"KRN",101,1454,10,2,0)
1065^3^3^
"KRN",101,1454,10,2,"^")
FHW2
"KRN",101,1454,10,3,0)
1067^2^2^
"KRN",101,1454,10,3,"^")
FHW4
"KRN",101,1454,10,4,0)
1071^4^4^
"KRN",101,1454,10,4,"^")
FHW8
"KRN",101,1454,10,5,0)
1070^5^5^
"KRN",101,1454,10,5,"^")
FHW7
"KRN",101,1454,10,6,0)
1069^6^6^
"KRN",101,1454,10,6,"^")
FHW6
"KRN",101,1454,10,7,0)
1066^7^7^
"KRN",101,1454,10,7,"^")
FHW3
"KRN",101,1454,10,9,0)
1451^N1^9^
"KRN",101,1454,10,9,"^")
FHWN1
"KRN",101,1454,10,10,0)
1452^N2^10^
"KRN",101,1454,10,10,"^")
FHWN2
"KRN",101,1454,20)
S FHA1=0 D ^FHVER
"KRN",101,1454,99)
59779,49322
"KRN",101,3142,-1)
0^5
"KRN",101,3142,0)
FH SIGNED REACTION INTERFACE^FH Signed Reaction Interface^^A^^^^^^^^DIETETICS
"KRN",101,3142,20)
D EN1^FHWGMR
"KRN",101,3142,99)
57063,42635
"KRN",101,3143,-1)
0^4
"KRN",101,3143,0)
FH SIGNED REACTION CANCEL^FH Signed Reaction Cancel^^A^^^^^^^^DIETETICS
"KRN",101,3143,20)
D CAN^FHWGMR
"KRN",101,3143,99)
57063,42635
"KRN",101,3786,-1)
3^2
"KRN",101,3786,0)
FH ORDERABLE ITEM UPDATE^Update Dietetics orderable item^^X^^^^^^^^
"KRN",101,3786,10,0)
^101.01PA^1^1
"KRN",101,3786,99)
57440,46149
"KRN",101,3787,-1)
3^1
"KRN",101,3787,0)
FH EVSEND OR^FH --> OR event messages^^X^^^^^^^^
"KRN",101,3787,10,0)
^101.01PA^1^1
"KRN",101,3787,20)

"KRN",101,3787,99)
57981,28800
"KRN",101,3789,-1)
0^3
"KRN",101,3789,0)
FH RECEIVE^FH receives order msg from OE/RR^^A^^^^^^^^
"KRN",101,3789,20)
D EN^FHWOR(.XQORMSG)
"KRN",101,3789,99)
57314,57480
"MBREQ")
0
"ORD",2,3.6)
3.6;2;1;;BUL^XPDTA1;;BULE1^XPDIA1;;;BULDEL^XPDIA1
"ORD",2,3.6,0)
BULLETIN
"ORD",3,19.1)
19.1;3;1;;KEY^XPDTA1;;;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",29,-1)
1^1
"PKG",29,0)
DIETETICS^FH^Dietetics/Nutrition & Food Service System
"PKG",29,5)
HISC
"PKG",29,7)
^^I
"PKG",29,20,0)
^9.402P^^
"PKG",29,22,0)
^9.49I^1^1
"PKG",29,22,1,0)
5.5^3050202^3040621^4572
"PKG",29,22,1,1,0)
^^1^1^3040622^
"PKG",29,22,1,1,1,0)
OUTPATIENT MEALS
"PKG",29,22,1,"PAH",0)
^9.4901^1^1
"PKG",29,22,1,"PAH",1,0)
1^3040813
"PKG",29,22,1,"PAH","B",1,1)

"PKG",29,"DEV")
RICH KNOEPFLE/HINES OIFO
"PKG",29,"VERSION")
5.5
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
339
"RTN","FH")
0^1^B3580285
"RTN","FH",1,0)
FH ; HISC/REL - Dietetics System ;2/15/95  15:56 
"RTN","FH",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FH",3,0)
EN0 ; Set Dietetics Patient File Entry
"RTN","FH",4,0)
SET ;
"RTN","FH",5,0)
 Q
"RTN","FH",6,0)
EN2 ; Queue a task
"RTN","FH",7,0)
 K IO("Q"),ZTUCI,ZTDTH,ZTIO,ZTSAVE S ZTRTN=FHPGM,ZTREQ="@",ZTSAVE("ZTREQ")=""
"RTN","FH",8,0)
 S:$D(XQY0) ZTDESC=$P(XQY0,"^",1)
"RTN","FH",9,0)
 F V3=1:1 S V1=$P(FHLST,"^",V3) Q:V1=""  S ZTSAVE(V1)=""
"RTN","FH",10,0)
 D ^%ZTLOAD D ^%ZISC U IO W !,"Request Queued",! K V1,V3,FHPGM,FHLST,ZTSK Q
"RTN","FH",11,0)
EN4 ; Kill System Variables
"RTN","FH",12,0)
 Q
"RTN","FH",13,0)
SITE ; Get Site Name & Number
"RTN","FH",14,0)
 S FHSITE=$P($G(^XMB(1,1,"XUS")),"^",17),SITE(1)="   ",SITE="" Q:'FHSITE
"RTN","FH",15,0)
 S SITE(1)=$P($G(^DIC(4,FHSITE,99)),"^",1)
"RTN","FH",16,0)
 I $$PATCH^XPDUTL("DG*5.3*134") S SITE=$$NAME^VASITE I SITE'="" K FHSITE Q
"RTN","FH",17,0)
 S SITE=$P($G(^DIC(4,FHSITE,0)),"^",1) K FHSITE Q
"RTN","FH",18,0)
TR ; Translate All Lower Case entry to Upper Case
"RTN","FH",19,0)
 S X=$TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","FH",20,0)
 Q
"RTN","FH",21,0)
DTP ; Printable Date/Time
"RTN","FH",22,0)
 S %=DTP,DTP=$J(+$E(DTP,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(DTP,4,5))_"-"_$E(DTP,2,3)
"RTN","FH",23,0)
 S:%#1 %=+$E(%_"0",9,10)_"^"_$E(%_"000",11,12),DTP=DTP_$J($S(%>12:%-12,1:+%),3)_":"_$P(%,"^",2)_$S(%<12:"am",%<24:"pm",1:"m") K % Q
"RTN","FH",24,0)
 Q
"RTN","FH",25,0)
DLSO ; Delete Standing Order if Inactivated (called by 118.3,99 dd)
"RTN","FH",26,0)
 Q
"RTN","FH",27,0)
SPKS ; Kill Stmt for file #119.6, fields 3,4,5 AS x-refs
"RTN","FH",28,0)
 S VAR=$S(DI=3:"T",DI=4:"C",DI=5:"D",1:"") Q:VAR=""
"RTN","FH",29,0)
 S STR=$P($G(^FH(119.6,DA,0)),U,10),NWSTR=""
"RTN","FH",30,0)
 I STR'[VAR Q
"RTN","FH",31,0)
 S NWSTR=$E(STR,1,$F(STR,VAR)-2)_$E(STR,$F(STR,VAR),3)
"RTN","FH",32,0)
 S $P(^FH(119.6,DA,0),U,10)=NWSTR
"RTN","FH",33,0)
 Q
"RTN","FH55PRE")
0^2^B882791
"RTN","FH55PRE",1,0)
FH55PRE ;Hines OIFO/RTK RECURRING MEALS RELEASE POST-INIT  ;2/18/03  10:15
"RTN","FH55PRE",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FH55PRE",3,0)
 ;
"RTN","FH55PRE",4,0)
ITEM1 ;File #119.9 contains new fields.  Delete any old fields that may
"RTN","FH55PRE",5,0)
 ;still be hanging around where new fields should be
"RTN","FH55PRE",6,0)
 I $P($G(^FH(119.9,1,"CV")),U,1)=1 Q  ;QUIT IF 5.5 PREVIOUSLY INSTALLED
"RTN","FH55PRE",7,0)
 S DIK="^DD(119.9,",DA(1)=119.9
"RTN","FH55PRE",8,0)
 F DA=4.5,5.1,5.3,5.5,21.5,23,24,25,26,27,30,30.1,30.2,30.3,30.4,30.5,31,31.1,31.2,31.3,31.4,31.5,32,32.1,32.2,32.3,32.4,32.5,41,42,43,44,45,46,76 D ^DIK
"RTN","FH55PRE",9,0)
 Q
"RTN","FH55PST")
0^3^B4245680
"RTN","FH55PST",1,0)
FH55PST ;Hines OIFO/RTK RECURRING MEALS RELEASE POST-INIT  ;2/18/03  10:15
"RTN","FH55PST",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FH55PST",3,0)
 ;
"RTN","FH55PST",4,0)
 I $P($G(^FH(119.9,1,"CV")),U,1)=1 Q  ;QUIT IF 5.5 PREVIOUSLY INSTALLED
"RTN","FH55PST",5,0)
ITEM1 ;Convert file .01 field of file #115. The .01 field was a pointer to
"RTN","FH55PST",6,0)
 ;the Patient (#2) file, it is being changed to a free text field which
"RTN","FH55PST",7,0)
 ;will look like P## or N##, for either a pointer to the Patient (#2)
"RTN","FH55PST",8,0)
 ;file or the New Person (#200) file. For example, P27 will be a pointer
"RTN","FH55PST",9,0)
 ;to entry #27 in file #2 and N1866 will be a pointer to entry #1866 in
"RTN","FH55PST",10,0)
 ;file #200. In addition there will be 2 new pointer fields in file #115
"RTN","FH55PST",11,0)
 ;which will be mutually exclusive pointer field to files #2 and #200:
"RTN","FH55PST",12,0)
 ; FIELD #14  - PATIENT will be a pointer to file #2.
"RTN","FH55PST",13,0)
 ; FIELD #15  - NEW PERSON will be a pointer to file #200.
"RTN","FH55PST",14,0)
 ;Each entry in file #115 will have a value in EITHER field #14 or #15.
"RTN","FH55PST",15,0)
 ;
"RTN","FH55PST",16,0)
 F FHPTIEN=0:0 S FHPTIEN=$O(^FHPT(FHPTIEN)) Q:FHPTIEN'>0  D
"RTN","FH55PST",17,0)
 .S FHPT1=$P($G(^FHPT(FHPTIEN,0)),U,1)
"RTN","FH55PST",18,0)
 .S FHPT26=$P($G(^FHPT(FHPTIEN,0)),U,2,6)
"RTN","FH55PST",19,0)
 .I FHPT1?1.25N,$D(^DPT(FHPT1)) D
"RTN","FH55PST",20,0)
 ..S FHNEW1="P"_FHPT1
"RTN","FH55PST",21,0)
 ..S FHZNODE=FHNEW1_"^"_FHPT26
"RTN","FH55PST",22,0)
 ..S ^FHPT(FHPTIEN,0)=FHZNODE
"RTN","FH55PST",23,0)
 ..I $D(^DPT(FHPTIEN,.1)) S DA=FHPTIEN,DR="13////^S X=""I""",DIE="^FHPT(" D ^DIE
"RTN","FH55PST",24,0)
 ..Q
"RTN","FH55PST",25,0)
 .Q
"RTN","FH55PST",26,0)
 ;
"RTN","FH55PST",27,0)
ITEM2 ;Populate/ensure integrity of fields #14 (PATIENT) and #15 (NEW PERSON)
"RTN","FH55PST",28,0)
 ;in file #115.  Each entry in #115 should have a pointer value in
"RTN","FH55PST",29,0)
 ;EITHER field #14 or #15.
"RTN","FH55PST",30,0)
 F FHPTIEN=0:0 S FHPTIEN=$O(^FHPT(FHPTIEN)) Q:FHPTIEN'>0  D
"RTN","FH55PST",31,0)
 .S FHPT1=$P($G(^FHPT(FHPTIEN,0)),U,1),FHPTTYP=$E(FHPT1,1)
"RTN","FH55PST",32,0)
 .I FHPTTYP'="P",FHPTTYP'="N" Q
"RTN","FH55PST",33,0)
 .S FHPTR=$E(FHPT1,2,99)
"RTN","FH55PST",34,0)
 .I FHPTTYP="P" D
"RTN","FH55PST",35,0)
 ..I '$D(^DPT(FHPTR)) Q
"RTN","FH55PST",36,0)
 ..K DIE S DA=FHPTIEN,DIE="^FHPT(",DR="14////^S X=FHPTR;15///@" D ^DIE
"RTN","FH55PST",37,0)
 .I FHPTTYP="N" D
"RTN","FH55PST",38,0)
 ..I '$D(^VA(200,FHPTR)) Q
"RTN","FH55PST",39,0)
 ..K DIE S DA=FHPTIEN,DIE="^FHPT(",DR="15////^S X=FHPTR;14///@" D ^DIE
"RTN","FH55PST",40,0)
 .Q
"RTN","FH55PST",41,0)
 ;
"RTN","FH55PST",42,0)
ITEM3 ;Re-index the "B" cross-reference on the #.01 field of file #115
"RTN","FH55PST",43,0)
 ;Re-index the "AW" cross-reference on the #13 sub-field of the #1 field
"RTN","FH55PST",44,0)
 S DIK="^FHPT(",DIK(1)=".01^B" D ENALL^DIK
"RTN","FH55PST",45,0)
 S IEN=0 F  S IEN=$O(^FHPT(IEN)) Q:IEN'>0  D
"RTN","FH55PST",46,0)
 .I '$D(^FHPT(IEN,"A")) Q
"RTN","FH55PST",47,0)
 .S DIK="^FHPT(IEN,""A"",",DIK(1)="13^AW",DA(1)=IEN D ENALL^DIK
"RTN","FH55PST",48,0)
 ;
"RTN","FH55PST",49,0)
ITEM4 ;Delete data hanging around in Site Parameters (#119.9) file.
"RTN","FH55PST",50,0)
 ;Allow post-init to be rerun without deleting values in the newly
"RTN","FH55PST",51,0)
 ;created fields
"RTN","FH55PST",52,0)
 K ^FH(119.9,1,1) K ^FH(119.9,1,2)
"RTN","FH55PST",53,0)
 I $P($G(^FH(119.9,1,"CV")),U,1)=1 Q
"RTN","FH55PST",54,0)
 S FHMULT=$P($G(^FH(119.9,1,0)),U,20)
"RTN","FH55PST",55,0)
 S ^FH(119.9,1,0)="1^^^^^^^^^^^^^^^^^^^"_FHMULT
"RTN","FH55PST",56,0)
 S DIE=119.9,DA=1,DR="101////^S X=1" D ^DIE
"RTN","FH55PST",57,0)
 Q
"RTN","FHADM2")
0^4^B8983689
"RTN","FHADM2",1,0)
FHADM2 ; HISC/REL/NCA - Enter/Edit Served Meals ;5/4/93  09:53
"RTN","FHADM2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADM2",3,0)
EN1 ; Enter/Edit Served Meals
"RTN","FHADM2",4,0)
 ; Check for multidivisional site
"RTN","FHADM2",5,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D ^FHMADM2 Q
"RTN","FHADM2",6,0)
 D NOW^%DTC S DT=%\1 K %,%H,%I
"RTN","FHADM2",7,0)
E1 S %DT="AEPX",%DT("A")="SERVED MEALS Date: " W ! D ^%DT G KIL^FHADM21:"^"[X!$D(DTOUT),E1:Y<1
"RTN","FHADM2",8,0)
 S DA=+Y,(FHRM,FHSM,FHGM)=DA I DA'<DT W *7,!!,"** Input must be for a date before today in order to collect ADT data!",! G E1
"RTN","FHADM2",9,0)
 K DIC,DIE S DIE="^FH(117," I '$D(^FH(117,DA,0)) S ^FH(117,DA,0)=DA,^FH(117,"B",DA,DA)="",X0=^FH(117,0),$P(^FH(117,0),"^",3,4)=DA_"^"_($P(X0,"^",4)+1)
"RTN","FHADM2",10,0)
 S DA=+Y K FHN W !!,"Calculating Census Values ...",!
"RTN","FHADM2",11,0)
 F W1=0:0 S W1=$O(^DG(41.9,W1)) Q:W1<1  I $D(^DG(41.9,W1,"C",DA,0)) D C1
"RTN","FHADM2",12,0)
 W !,"Calculating Outpatient Values ...",! D CALCOP
"RTN","FHADM2",13,0)
 S ^FH(117,DA,0)=DA
"RTN","FHADM2",14,0)
 S DR="[FHADM2]" D ^DIE G EN1
"RTN","FHADM2",15,0)
C1 S X0=^DG(41.9,W1,"C",DA,0),X1=$G(^(1))
"RTN","FHADM2",16,0)
 S TYP=$P(^DIC(42,W1,0),"^",3),TYP=$S(TYP="D":"D",TYP="NH":"N",1:"H")
"RTN","FHADM2",17,0)
 I '$D(FHN(TYP)) S FHN(TYP,0)=0,FHN(TYP,1)=0
"RTN","FHADM2",18,0)
 S Y0=$P(X0,"^",2),Y1=$P(X1,"^",5)
"RTN","FHADM2",19,0)
 S FHN(TYP,0)=FHN(TYP,0)+Y0 S:Y1 FHN(TYP,1)=FHN(TYP,1)+Y1 Q
"RTN","FHADM2",20,0)
DT ; Get From/To Dates
"RTN","FHADM2",21,0)
D1 S %DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D1 S SDT=+Y
"RTN","FHADM2",22,0)
 I SDT'<DT W *7,"  [Must Start before Today!] " G D1
"RTN","FHADM2",23,0)
D2 S %DT="AEPX",%DT("A")=" Ending Date: " D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D2 S EDT=+Y
"RTN","FHADM2",24,0)
 I EDT'<DT W *7,"  [Must End before Today!] " G D2
"RTN","FHADM2",25,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHADM2",26,0)
 Q
"RTN","FHADM2",27,0)
CALCOP ; Calculate Outpatient totals (Recurring and Special Meals)
"RTN","FHADM2",28,0)
 K FHOPC S FHEND=FHRM_.9999,X1=FHRM,X2=-1 D C^%DTC S FHRM=X
"RTN","FHADM2",29,0)
 F IX="B","N","E" S FHOPC(IX)=0 F FC="E","G","O","P","V" S FHOPC(FC,IX)=0
"RTN","FHADM2",30,0)
 ; Count recurring meals totals in FHOPC(INDX)
"RTN","FHADM2",31,0)
 F FHRM=FHRM:0 S FHRM=$O(^FHPT("RM",FHRM)) Q:FHRM=""!(FHRM'<FHEND)  D
"RTN","FHADM2",32,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHRM,FHDFN)) Q:FHDFN=""  D
"RTN","FHADM2",33,0)
 ..F FHRNUM=0:0 S FHRNUM=$O(^FHPT("RM",FHRM,FHDFN,FHRNUM)) Q:FHRNUM=""  D
"RTN","FHADM2",34,0)
 ...S FHMEAL=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,4)
"RTN","FHADM2",35,0)
 ...Q:"BNE"'[FHMEAL!(FHMEAL="")
"RTN","FHADM2",36,0)
 ...I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" Q
"RTN","FHADM2",37,0)
 ...S FHOPC(FHMEAL)=FHOPC(FHMEAL)+1
"RTN","FHADM2",38,0)
 ; Add special meals to recurring meals totals in FHOPC(INDX)
"RTN","FHADM2",39,0)
 F FHSM=FHSM:0 S FHSM=$O(^FHPT("SM",FHSM)) Q:FHSM>FHEND!(FHSM="")  D
"RTN","FHADM2",40,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("SM",FHSM,FHDFN)) Q:FHDFN'>0  D
"RTN","FHADM2",41,0)
 ..;W !,FHSM,"  ",FHDFN
"RTN","FHADM2",42,0)
 ..S FHMEAL=$P($G(^FHPT(FHDFN,"SM",FHSM,0)),U,9)
"RTN","FHADM2",43,0)
 ..Q:"BNE"'[FHMEAL!(FHMEAL="")
"RTN","FHADM2",44,0)
 ..S FHOPC(FHMEAL)=FHOPC(FHMEAL)+1
"RTN","FHADM2",45,0)
 ; Calculate Employee, Paid, OOD, Grat and Volunteer totals (Guest Meals)
"RTN","FHADM2",46,0)
 F FHGM=FHGM:0 S FHGM=$O(^FHPT("GM",FHGM)) Q:FHGM>FHEND!(FHGM="")  D
"RTN","FHADM2",47,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHGM,FHDFN)) Q:FHDFN'>0  D
"RTN","FHADM2",48,0)
 ..;W !,FHGM,"  ",FHDFN
"RTN","FHADM2",49,0)
 ..S FHCLASS=$P($G(^FHPT(FHDFN,"GM",FHGM,0)),U,2)
"RTN","FHADM2",50,0)
 ..Q:"EGOPV"'[FHCLASS!(FHCLASS="")
"RTN","FHADM2",51,0)
 ..S FHMEAL=$P($G(^FHPT(FHDFN,"GM",FHGM,0)),U,3)
"RTN","FHADM2",52,0)
 ..Q:"BNE"'[FHMEAL!(FHMEAL="")
"RTN","FHADM2",53,0)
 ..S FHOPC(FHCLASS,FHMEAL)=FHOPC(FHCLASS,FHMEAL)+1
"RTN","FHADM2",54,0)
 Q
"RTN","FHADM21")
0^5^B11163428
"RTN","FHADM21",1,0)
FHADM21 ; HISC/REL/NCA - Served Meals Report ;1/23/98  16:07
"RTN","FHADM21",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADM21",3,0)
EN2 ; Print Meals Report
"RTN","FHADM21",4,0)
 ; Check for multidivisional site
"RTN","FHADM21",5,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D ^FHMADM21 Q
"RTN","FHADM21",6,0)
 D NOW^%DTC S DT=%\1 D DT^FHADM2 G:"^"[X KIL
"RTN","FHADM21",7,0)
 W !!,"The report requires a 132 column printer.",!
"RTN","FHADM21",8,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHADM21",9,0)
 I $D(IO("Q")) S FHPGM="Q1^FHADM21",FHLST="EDT^SDT" D EN2^FH G KIL
"RTN","FHADM21",10,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHADM21",11,0)
Q1 S DTP=SDT\1 D DTP^FH S DTE=DTP_" to " S DTP=EDT\1 D DTP^FH S DTE=DTE_DTP
"RTN","FHADM21",12,0)
 S X=SDT D DOW^%DTC S DOW=Y+1
"RTN","FHADM21",13,0)
 D NOW^%DTC S DTP=% D DTP^FH S HDT=DTP,PG=0 D HDR
"RTN","FHADM21",14,0)
 K S F K=1:1:21 S S(K)=0
"RTN","FHADM21",15,0)
 S D1=SDT,(ND,TD)=0 F L1=0:0 D N1 S X1=D1,X2=1 D C^%DTC Q:X>EDT  S D1=X,DOW=DOW+1 S:DOW=8 DOW=1
"RTN","FHADM21",16,0)
 F K=1:1:18 S N(K)=$J($S(ND:S(K)/ND,1:0),0,0),N(K)=$J($S(N(K)<1:"",1:N(K)),5)_" ",S(K)=$S(S(K)<1:$J("",6),S(K)<100000:$J(S(K),5)_" ",1:$J(S(K),6))
"RTN","FHADM21",17,0)
 F K=19:1:21 S N(K)=$J($S(TD:S(K)/TD,1:0),0,0),N(K)=$J($S(N(K)<1:"",1:N(K)),5)_" ",S(K)=$S(S(K)<1:$J("",6),S(K)<100000:$J(S(K),5)_" ",1:$J(S(K),6))
"RTN","FHADM21",18,0)
 D LN W !?4,"Total",?15,"|",S(1),S(2),S(3),"|",S(4),S(5),S(6),"|",S(7),S(8),S(9),"|",S(10),"|",S(11),S(13),S(16),"|",S(17),"|",S(18),"|",S(19),S(20),S(21),!
"RTN","FHADM21",19,0)
 W:ND ?4,"Avg. ",?15,"|",N(1),N(2),N(3),"|",N(4),N(5),N(6),"|",N(7),N(8),N(9),"|",N(10),"|",N(11),N(13),N(16),"|",N(17),"|",N(18),"|",N(19),N(20),N(21),!
"RTN","FHADM21",20,0)
 Q
"RTN","FHADM21",21,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,HDT,?44,"S E R V E D   M E A L S   W O R K S H E E T",?125,"Page ",PG
"RTN","FHADM21",22,0)
 W !!?(131-$L(DTE)\2),DTE
"RTN","FHADM21",23,0)
 W !!,?15,"|",?32,"MEALS SERVED ON INPATIENT BASIS",?79,"|",?82,"MEALS SERVED TO OTHERS",?105,"| TOTAL| SERVED TRAYS DATA"
"RTN","FHADM21",24,0)
 W !,?15,"|",?19,"DOMICILIARY",?34,"| NURSING HOME CU",?53,"|",?59,"HOSPITAL",?72,"| TOTAL|",?98,"| TOTAL| MEALS|"
"RTN","FHADM21",25,0)
 W !,?15,"|  Inp.  Abs.  Meal|  Inp.  Abs.  Meal|  Inp.  Abs.  Meal|      | Outp.  Paid Grat.|      |      |  Cafe   NPO Trays"
"RTN","FHADM21",26,0)
 W !,?15,"|   A     B     C  |   D     E     F  |   G     H     I  |   J  |   K     M    Q   |      |   R  |   T      U    V"
"RTN","FHADM21",27,0)
LN W ! F K=1:1:131 W "-"
"RTN","FHADM21",28,0)
 Q
"RTN","FHADM21",29,0)
N1 S Y0=$G(^FH(117,D1,0)),Y1=$G(^(1))
"RTN","FHADM21",30,0)
 K N S K=1 F L=1,2,4,5,7,8 S K=K+1,N(L)=$P(Y0,"^",K)
"RTN","FHADM21",31,0)
 S K=10 F L=1:3:16 S K=K+1,N(K)=$P(Y1,"^",L)+$P(Y1,"^",L+1)+$P(Y1,"^",L+2)
"RTN","FHADM21",32,0)
 S N(19)=$P(Y1,"^",19),N(20)=$P(Y1,"^",20)
"RTN","FHADM21",33,0)
 S N(3)=N(1)-N(2)*3,N(6)=N(4)-N(5)*3,N(9)=N(7)-N(8)*3,N(10)=N(3)+N(6)+N(9)
"RTN","FHADM21",34,0)
 S N(16)=N(14)+N(15)+N(16),N(13)=N(12)+N(13),N(17)=N(11)+N(13)+N(16),N(18)=N(10)+N(17),N(19)=N(19)+N(17),N(21)=N(18)-N(19)-N(20) S:N(18) ND=ND+1 S:N(20) TD=TD+1
"RTN","FHADM21",35,0)
 F K=1:1:21 S S(K)=S(K)+N(K)
"RTN","FHADM21",36,0)
 F K=1:1:21 S N(K)=$J($S(N(K)<1:"",1:N(K)),5)_" "
"RTN","FHADM21",37,0)
 S DTP=D1 D DTP^FH D:$Y>(IOSL-8) HDR
"RTN","FHADM21",38,0)
 W !,$P("Sun Mon Tue Wed Thu Fri Sat"," ",DOW)," ",DTP
"RTN","FHADM21",39,0)
 W ?15,"|",N(1),N(2),N(3),"|",N(4),N(5),N(6),"|",N(7),N(8),N(9),"|",N(10),"|",N(11),N(13),N(16),"|",N(17),"|",N(18),"|",N(19),N(20),N(21) Q
"RTN","FHADM21",40,0)
KIL ; Kill all used Variables
"RTN","FHADM21",41,0)
 G KILL^XUSCLEAN
"RTN","FHADM2A")
0^6^B3488610
"RTN","FHADM2A",1,0)
FHADM2A ; HISC/REL/NCA - Calculate NPO/Trays for Served Meals ;6/18/93  14:03
"RTN","FHADM2A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADM2A",3,0)
EN1 ; Calculate NPO/Trays
"RTN","FHADM2A",4,0)
 ; Check for multidivisional site
"RTN","FHADM2A",5,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D ^FHMADM2A Q
"RTN","FHADM2A",6,0)
 D NOW^%DTC S NOW=%,DT=NOW\1,(TP,TC,TE,N,R)=0 F K=1:1:5 S S(K)=0
"RTN","FHADM2A",7,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD'>0  F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN=""  S ADM=^FHPT("AW",WRD,FHDFN) D CNT
"RTN","FHADM2A",8,0)
 I '$D(^FH(117,DT,0)) S ^FH(117,DT,0)=DT,^FH(117,"B",DT,DT)="",X0=^FH(117,0),$P(^FH(117,0),"^",3,4)=DT_"^"_($P(X0,"^",4)+1)
"RTN","FHADM2A",9,0)
 S MD=N-R
"RTN","FHADM2A",10,0)
 S $P(^FH(117,DT,1),"^",19,27)=(3*TC)_"^"_(TP-TE*3)_"^"_S(1)_"^"_S(2)_"^"_S(3)_"^"_S(4)_"^"_S(5)_"^"_MD_"^"_N
"RTN","FHADM2A",11,0)
 K %,%H,%I,A1,ADM,FHDFN,FHORD,K,MD,N,NOW,R,S,TC,TE,TP,TYP,WRD,X0,X1,Y0,ZZ Q
"RTN","FHADM2A",12,0)
CNT Q:'ADM  S TP=TP+1 Q:'$D(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHADM2A",13,0)
 S X5=$O(^FHPT(FHDFN,"S",0)) I X5 S X5=$G(^(X5,0))
"RTN","FHADM2A",14,0)
 I  I $P(X5,"^",1)<$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",1) S X5=5,S(X5)=S(X5)+1 G C1
"RTN","FHADM2A",15,0)
 S X5=$P(X5,"^",2) S:X5=""!(X5>4) X5=5 S S(X5)=S(X5)+1
"RTN","FHADM2A",16,0)
C1 S X0=^FHPT(FHDFN,"A",ADM,0)
"RTN","FHADM2A",17,0)
 S FHORD=$P(X0,"^",2),X1=$P(X0,"^",3),ZZ=$P(X0,"^",5) Q:'FHORD
"RTN","FHADM2A",18,0)
 S Y0=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) Q:Y0=""
"RTN","FHADM2A",19,0)
 S FHOR=$P(Y0,"^",2,6),FHLD=$P(Y0,"^",7)
"RTN","FHADM2A",20,0)
 I FHLD'="" Q:ZZ=""  S N=N+1 Q
"RTN","FHADM2A",21,0)
 S Z=$P(Y0,"^",13) Q:Z=""  S TE=TE+1,TYP=$P(Y0,"^",8) S:TYP="C" TC=TC+1 S N=N+1
"RTN","FHADM2A",22,0)
 I "1^^^^"[FHOR S R=R+1
"RTN","FHADM2A",23,0)
 Q
"RTN","FHADM3")
0^7^B8659464
"RTN","FHADM3",1,0)
FHADM3 ; HISC/REL - Additional Meals Report ;1/23/98  16:07
"RTN","FHADM3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADM3",3,0)
EN1 ; Print Meal Report
"RTN","FHADM3",4,0)
 ; Check for multidivisional site
"RTN","FHADM3",5,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D ^FHMADM3 Q
"RTN","FHADM3",6,0)
 D DT G:"^"[X KIL
"RTN","FHADM3",7,0)
 W !!,"The report requires a 132 column printer.",!
"RTN","FHADM3",8,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHADM3",9,0)
 I $D(IO("Q")) S FHPGM="Q1^FHADM3",FHLST="EDT^SDT" D EN2^FH G KIL
"RTN","FHADM3",10,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHADM3",11,0)
Q1 ; Process Printing the Meal Report
"RTN","FHADM3",12,0)
 S DTP=SDT\1 D DTP^FH S DTE=DTP_" to " S DTP=EDT\1 D DTP^FH S DTE=DTE_DTP
"RTN","FHADM3",13,0)
 S X=SDT D DOW^%DTC S DOW=Y+1
"RTN","FHADM3",14,0)
 D NOW^%DTC S DTP=% D DTP^FH S HDT=DTP,PG=0 D HDR
"RTN","FHADM3",15,0)
 K S F K=1:1:22 S S(K)=0
"RTN","FHADM3",16,0)
 S D1=SDT F L1=0:0 D N1 S X1=D1,X2=1 D C^%DTC Q:X>EDT  S D1=X,DOW=DOW+1 S:DOW=8 DOW=1
"RTN","FHADM3",17,0)
 F K=1:1:22 S Z=$S(K<19:5,1:6),S(K)=$S(S(K)<1:$J("",Z),S(K)<10000:$J(S(K),Z-1)_" ",1:$J(S(K),Z))
"RTN","FHADM3",18,0)
 D LN W !,"  Total",?10,"|",S(1),S(2),S(3),S(4),S(5),S(6),S(19)," |",S(7),S(8),S(9),S(10),S(11),S(12),S(20)," |",S(13),S(14),S(15),S(16),S(17),S(18),S(21)," |",S(22),! Q
"RTN","FHADM3",19,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,HDT,?50,"A D D I T I O N A L   M E A L S",?125,"Page ",PG
"RTN","FHADM3",20,0)
 W !!?(131-$L(DTE)\2),DTE
"RTN","FHADM3",21,0)
 W !!,?10,"|",?21,"B R E A K F A S T",?48,"|",?64,"N O O N",?86,"|",?99,"E V E N I N G",?124,"| TOTAL"
"RTN","FHADM3",22,0)
 W !,?10,"| Opt. Emp. Paid OOD  Vol. Grt. Total | Opt. Emp. Paid OOD  Vol. Grt. Total | Opt. Emp. Paid OOD  Vol. Grt. Total |"
"RTN","FHADM3",23,0)
LN W !,"-----------------------------------------------------------------------------------------------------------------------------------" Q
"RTN","FHADM3",24,0)
N1 S Y1=$G(^FH(117,D1,1)) F L1=19:1:22 S N(L1)=0
"RTN","FHADM3",25,0)
 S K=0 F L1=1:1:6 F L2=1:1:3 S K=K+1,N=L2-1*6+L1,Z=$P(Y1,"^",K),N(N)=Z,N(18+L2)=N(18+L2)+Z
"RTN","FHADM3",26,0)
 S N(22)=N(19)+N(20)+N(21)
"RTN","FHADM3",27,0)
 F K=1:1:22 S S(K)=S(K)+N(K),N(K)=$J($S(N(K)<1:"",1:N(K)),$S(K<19:4,1:5))_" "
"RTN","FHADM3",28,0)
 S DTP=D1 D DTP^FH D:$Y>(IOSL-8) HDR
"RTN","FHADM3",29,0)
 W !,$P("Sun Mon Tue Wed Thu Fri Sat"," ",DOW)," ",$E(DTP,1,6)
"RTN","FHADM3",30,0)
 W "|",N(1),N(2),N(3),N(4),N(5),N(6),N(19)," |",N(7),N(8),N(9),N(10),N(11),N(12),N(20)," |",N(13),N(14),N(15),N(16),N(17),N(18),N(21)," |",N(22) Q
"RTN","FHADM3",31,0)
DT ; Get From/To Dates
"RTN","FHADM3",32,0)
D1 S %DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D1 S SDT=+Y
"RTN","FHADM3",33,0)
 I SDT'<DT W *7,"  [Must Start before Today!] " G D1
"RTN","FHADM3",34,0)
D2 S %DT="AEPX",%DT("A")=" Ending Date: " D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D2 S EDT=+Y
"RTN","FHADM3",35,0)
 I EDT'<DT W *7,"  [Must End before Today!] " G D2
"RTN","FHADM3",36,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHADM3",37,0)
 Q
"RTN","FHADM3",38,0)
KIL G KILL^XUSCLEAN
"RTN","FHADM4")
0^8^B15416996
"RTN","FHADM4",1,0)
FHADM4 ; HISC/REL/NCA - Staffing Data Report ;1/23/98  16:08
"RTN","FHADM4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADM4",3,0)
EN1 ; Enter/Edit Staffing Data
"RTN","FHADM4",4,0)
 ; Check for multidivisional site
"RTN","FHADM4",5,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D EN1^FHMADM4 Q
"RTN","FHADM4",6,0)
 D NOW^%DTC S DT=%\1
"RTN","FHADM4",7,0)
E1 S %DT="AEPX",%DT("A")="STAFFING DATA Date: " W ! D ^%DT G KIL:"^"[X!$D(DTOUT),E1:Y<1
"RTN","FHADM4",8,0)
 S DA=+Y I DA>DT W *7,!!,"** Date must not be in the future!",! G E1
"RTN","FHADM4",9,0)
 K DIC,DIE S DIE="^FH(117.1," I '$D(^FH(117.1,DA,0)) S ^FH(117.1,DA,0)=DA,^FH(117.1,"B",DA,DA)="",X0=^FH(117.1,0),$P(^FH(117.1,0),"^",3,4)=DA_"^"_($P(X0,"^",4)+1)
"RTN","FHADM4",10,0)
 S X1=DA,X2=-1 D C^%DTC S DM1=X,FHX1=$P($G(^FH(117.1,DM1,0)),"^",2,6)
"RTN","FHADM4",11,0)
 S DR="[FHADM4]" D ^DIE G EN1
"RTN","FHADM4",12,0)
EN2 ; Print Staffing Data Report
"RTN","FHADM4",13,0)
 ; Check for multidivisional site
"RTN","FHADM4",14,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D EN2^FHMADM4 Q
"RTN","FHADM4",15,0)
 D DT^FHADM2 G:"^"[X KIL
"RTN","FHADM4",16,0)
 W !!,"The report requires a 132 column printer.",!
"RTN","FHADM4",17,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHADM4",18,0)
 I $D(IO("Q")) S FHPGM="Q1^FHADM4",FHLST="EDT^SDT" D EN2^FH G KIL
"RTN","FHADM4",19,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHADM4",20,0)
Q1 ; Process Printing Staffing Report
"RTN","FHADM4",21,0)
 S DTP=SDT\1 D DTP^FH S DTE=DTP_" to " S DTP=EDT\1 D DTP^FH S DTE=DTE_DTP
"RTN","FHADM4",22,0)
 S X=SDT D DOW^%DTC S DOW=Y+1
"RTN","FHADM4",23,0)
 D NOW^%DTC S DTP=% D DTP^FH S HDT=DTP,PG=0 D HDR
"RTN","FHADM4",24,0)
 K S,AV F K=1:1:23 S S(K)=0
"RTN","FHADM4",25,0)
 S SIZ="61 51 51 51 51 50 30 30 30 30 30 30 30 30 30 30 30 30 30 51 50 50 50"
"RTN","FHADM4",26,0)
 S D1=SDT,(ND,FHTOT,TO1,TOT)=0 F L1=0:0 D N1 S X1=D1,X2=1 D C^%DTC Q:X>EDT  S D1=X,DOW=DOW+1 S:DOW=8 DOW=1
"RTN","FHADM4",27,0)
 D LN G:ND>62 Q2
"RTN","FHADM4",28,0)
 W !?7,"Total",?15 F K=1:1:5,20,21,6:1:10,22,11:1:19,23 S X=$P(SIZ," ",K) W $J(S(K),$E(X,1)+1,$E(X,2))
"RTN","FHADM4",29,0)
Q2 I ND W !?7,"Avg.",?15 F K=1:1:5,20,21,6:1:10,22,11:1:19,23 S X=$P(SIZ," ",K) W $J(S(K)/ND,$E(X,1)+1,$E(X,2))
"RTN","FHADM4",30,0)
 I S(22) W !?7,"% Paid",?68 F K=8,9,10,22,11:1:19,23 S X=$P(SIZ," ",K) W $J(S(K)/S(22)*100,$E(X,1)+1,0)
"RTN","FHADM4",31,0)
 I TOT W !!?7,"Adjustment for Unscheduled and Intermittent",!!?7,"UNS/INT Total " S TOT=TOT/8 W $J(TOT,5,1)," FTEE",!?7,"Adjusted Measured FTEE " S TOT=TOT+TO1 W $J(TOT,6,1) I ND W !?7,"Avg Measured FTEE       ",$J(TOT/ND,5,1)
"RTN","FHADM4",32,0)
 I FHTOT S MAN=S(22)*60 W !!?7,"Man Minutes/Meal:    ",$J(MAN/FHTOT,0,0)
"RTN","FHADM4",33,0)
 W ! Q
"RTN","FHADM4",34,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?4,HDT,?44,"S T A F F I N G   D A T A   W O R K S H E E T",?122,"Page ",PG
"RTN","FHADM4",35,0)
 W !!?(132-$L(DTE)\2),DTE
"RTN","FHADM4",36,0)
 W !!?15,"| DAILY| CLIN|ADMIN| SUPP| SUPV| MEAS| POT | OFF |WOP| OT|UNS|INT| PAID|COP| AL| SL|OTH|LND|CMP|TRN|VOL|BOR|TOTAL"
"RTN","FHADM4",37,0)
 W !?15,"|  FTEE| FTEE| FTEE| FTEE| FTEE| FTEE| HRS | HRS |HRS|HRS|HRS|HRS| HRS |HRS|HRS|HRS|HRS|HRS|HRS|HRS|HRS|HRS| HRS"
"RTN","FHADM4",38,0)
LN W !?4,"----------------------------------------------------------------------------------------------------------------------------" Q
"RTN","FHADM4",39,0)
N1 S Y0=$G(^FH(117.1,D1,0)),ND=ND+1
"RTN","FHADM4",40,0)
 S DTP=D1 D DTP^FH D:$Y>(IOSL-8) HDR
"RTN","FHADM4",41,0)
 K N F L=2:1:20 S N(L-1)=$P(Y0,"^",L)
"RTN","FHADM4",42,0)
 S N(20)=N(1)-N(2)-N(3)-N(4)-N(5),N(21)=N(20)*8
"RTN","FHADM4",43,0)
 S N(22)=N(21)-N(6)-N(7)+N(8)+N(9)+N(10),N(23)=N(22)-N(11)-N(12)-N(13)-N(14)-N(15)+N(16)+N(17)+N(18)+N(19),TOT=TOT+N(9)+N(10),TO1=TO1+N(20)
"RTN","FHADM4",44,0)
 W !?4,$P("Sun Mon Tue Wed Thu Fri Sat"," ",DOW)," ",$E(DTP,1,6)," "
"RTN","FHADM4",45,0)
 F K=1:1:5,20,21,6:1:10,22,11:1:19,23 S S(K)=S(K)+N(K),X=$P(SIZ," ",K),N(K)=$S('N(K):$J("",$E(X,1)),1:$J(N(K),$E(X,1),$E(X,2))) W "|",N(K)
"RTN","FHADM4",46,0)
 D M1
"RTN","FHADM4",47,0)
 Q
"RTN","FHADM4",48,0)
M1 ; Get total Meals
"RTN","FHADM4",49,0)
 S Y1=$G(^FH(117,D1,0)) Q:Y1=""  S Y2=$G(^FH(117,D1,1))
"RTN","FHADM4",50,0)
 K M S K=1 F L=1,2,4,5,7,8 S K=K+1,M(L)=$P(Y1,"^",K)
"RTN","FHADM4",51,0)
 S K=10 F L=1:3:16 S K=K+1,M(K)=$P(Y2,"^",L)+$P(Y2,"^",L+1)+$P(Y2,"^",L+2)
"RTN","FHADM4",52,0)
 S M(3)=M(1)-M(2)*3,M(6)=M(4)-M(5)*3,M(9)=M(7)-M(8)*3
"RTN","FHADM4",53,0)
 S M(10)=M(3)+M(6)+M(9)
"RTN","FHADM4",54,0)
 S M(16)=M(14)+M(15)+M(16),M(13)=M(12)+M(13),M(17)=M(11)+M(13)+M(16),M(18)=M(10)+M(17)
"RTN","FHADM4",55,0)
 S FHTOT=FHTOT+M(18) Q
"RTN","FHADM4",56,0)
KIL G KILL^XUSCLEAN
"RTN","FHADM5")
0^9^B372437
"RTN","FHADM5",1,0)
FHADM5 ; HISC/REL - Update Costs ;4/25/93  18:11 
"RTN","FHADM5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADM5",3,0)
EN3 ; Edit Ingredient Cost
"RTN","FHADM5",4,0)
 W ! S (DIC,DIE)="^FHING(",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:$D(DTOUT),E31:U[X,EN3:Y<1
"RTN","FHADM5",5,0)
 S DA=+Y,DR=8 D ^DIE K DA,DIE,DR,X,Y G EN3
"RTN","FHADM5",6,0)
E31 D ^FHREC3
"RTN","FHADM5",7,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR1")
0^10^B12601285
"RTN","FHADR1",1,0)
FHADR1 ; HISC/NCA - Dietetic Facility Profile ;1/23/98  15:03
"RTN","FHADR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR1",3,0)
EN1 ; Enter/Edit Facility Data and Specialized Medical Programs
"RTN","FHADR1",4,0)
 S (FLG1,FLG2)=0 D YR G:'PRE KIL
"RTN","FHADR1",5,0)
 D GET G:Y<1 KIL S FHX1=+Y
"RTN","FHADR1",6,0)
 S ST=$G(^DIC(4,+FHX1,0)) Q:ST=""
"RTN","FHADR1",7,0)
 S X1=PRE,X2=-356 D C^%DTC S OLD=$E(X,1,4)_"400" I '$D(^FH(117.3,PRE,0)) D S1
"RTN","FHADR1",8,0)
E1 W ! K DIR S DIR(0)="YAO",DIR("A")="Enter/Edit Facility Data? " D ^DIR G:$D(DIRUT)!($D(DIROUT)) KIL
"RTN","FHADR1",9,0)
 I 'Y K Y G E2
"RTN","FHADR1",10,0)
 S FLG1=1 D:FLG1 EDIT S FLG1=0
"RTN","FHADR1",11,0)
E2 W ! K DIR S DIR(0)="YAO",DIR("A")="Enter/Edit Specialized Medical Programs? "
"RTN","FHADR1",12,0)
 D ^DIR I $D(DIRUT)!($D(DIROUT)) G KIL
"RTN","FHADR1",13,0)
 I 'Y K Y S OLD=PRE D SET G KIL
"RTN","FHADR1",14,0)
 S FLG2=1 D:FLG2 EDIT
"RTN","FHADR1",15,0)
 S OLD=PRE D SET
"RTN","FHADR1",16,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR1",17,0)
EDIT ; Edit the Fields
"RTN","FHADR1",18,0)
 K DIC,DIE W ! S DIE="^FH(117.3,",DA=PRE
"RTN","FHADR1",19,0)
 L +^FH(117.3,PRE,0):0 I '$T W !?5,"Another user is editing this entry." G KIL
"RTN","FHADR1",20,0)
 I '$D(^FH(117.3,PRE,0)) D
"RTN","FHADR1",21,0)
 .S $P(^FH(117.3,PRE,0),"^",1)=PRE,^FH(117.3,"B",PRE,PRE)=""
"RTN","FHADR1",22,0)
 .S Z=$G(^FH(117.3,0)),$P(^FH(117.3,0),"^",3,4)=PRE_"^"_($P(Z,"^",4)+1)
"RTN","FHADR1",23,0)
 .S ZZ=$P($G(^FH(117.3,OLD,0)),"^",2,13)
"RTN","FHADR1",24,0)
 .I ZZ="" S $P(ZZ,"^",2,3)=$P(ST,"^",7)_"^"_$P($G(^DIC(4,+FHX1,"DIV")),"^",1)
"RTN","FHADR1",25,0)
 .S $P(^FH(117.3,PRE,0),"^",2,13)=ZZ
"RTN","FHADR1",26,0)
 .Q
"RTN","FHADR1",27,0)
 S DR=$S(FLG1:"2:11;13;51//Y;S:X'=""Y"" Y="""";52",1:"12;W !;53//Y;S:X'=""Y"" Y=""@1"";54;@1;55//Y;S:X'=""Y"" Y="""";56:57")
"RTN","FHADR1",28,0)
 D ^DIE L -^FH(117.3,PRE,0) K DA,DIC,DIE,DR,Z,ZZ Q
"RTN","FHADR1",29,0)
SET ; Set all three quarters with the Facility Profile Data
"RTN","FHADR1",30,0)
 F QTR=2:1:4 S PRE=$E(OLD,1,4)_QTR_"00" D S1
"RTN","FHADR1",31,0)
 Q
"RTN","FHADR1",32,0)
S1 ; Process Storage of Facility Profile Data
"RTN","FHADR1",33,0)
 Q:'$D(^FH(117.3,OLD,0))
"RTN","FHADR1",34,0)
 I '$D(^FH(117.3,PRE,0)) S $P(^FH(117.3,PRE,0),"^",1)=PRE,^FH(117.3,"B",PRE,PRE)="",Z=$G(^FH(117.3,0)),$P(^FH(117.3,0),"^",3,4)=PRE_"^"_($P(Z,"^",4)+1)
"RTN","FHADR1",35,0)
 S $P(^FH(117.3,PRE,0),"^",2,26)=$P($G(^FH(117.3,OLD,0)),"^",2,26)
"RTN","FHADR1",36,0)
 F TIT="AREA","DELV","SPEC" D
"RTN","FHADR1",37,0)
 .I $O(^FH(117.3,OLD,TIT,0))>0 K ^FH(117.3,PRE,TIT) D
"RTN","FHADR1",38,0)
 ..I '$D(^FH(117.3,PRE,TIT,0)) S ^(0)=$S(TIT="AREA":"^117.356S^^",TIT="DELV":"^117.313P^^",1:"^117.312P^^")
"RTN","FHADR1",39,0)
 ..F K1=0:0 S K1=$O(^FH(117.3,OLD,TIT,K1)) Q:K1<1  S L1=$G(^(K1,0)) D
"RTN","FHADR1",40,0)
 ...S ^FH(117.3,PRE,TIT,K1,0)=L1,^FH(117.3,PRE,TIT,"B",+L1,K1)=""
"RTN","FHADR1",41,0)
 ...S Z=$G(^FH(117.3,PRE,TIT,0)),$P(^FH(117.3,PRE,TIT,0),"^",3,4)=K1_"^"_($P(Z,"^",4)+1)
"RTN","FHADR1",42,0)
 ...Q
"RTN","FHADR1",43,0)
 ..Q
"RTN","FHADR1",44,0)
 .Q
"RTN","FHADR1",45,0)
 Q
"RTN","FHADR1",46,0)
GET ; Get the Facility Data from Institution file
"RTN","FHADR1",47,0)
 D SITE^FH
"RTN","FHADR1",48,0)
 K DIC S DIC="^DIC(4,",DIC(0)="AEMQ",DIC("A")="Enter Station Number: ",DIC("B")=SITE(1),D="D"
"RTN","FHADR1",49,0)
 W ! D MIX^DIC1 K DIC,SITE Q:"^"[X!($D(DTOUT))  Q:Y<1
"RTN","FHADR1",50,0)
 Q
"RTN","FHADR1",51,0)
QR ; Read in Qtr and Year
"RTN","FHADR1",52,0)
 S (PRE,QTR)=0 D NOW^%DTC S NOW=%\1
"RTN","FHADR1",53,0)
 ;S YR=$E(NOW,2,3),S1=$E(NOW,4,5),QTR=$S(S1<4:1,S1<7:2,S1<10:3,1:4)
"RTN","FHADR1",54,0)
 S YR=$E(NOW,1,3)+1700,S1=$E(NOW,4,5),QTR=$S(S1<4:1,S1<7:2,S1<10:3,1:4)
"RTN","FHADR1",55,0)
Q1 K %DT W !!,"Enter Qtr/Yr: "_QTR_"/"_YR_"// " R X:DTIME Q:'$T!(X["^")
"RTN","FHADR1",56,0)
 I X="" S X=$E(NOW,1,3)_"0"_QTR_"00"
"RTN","FHADR1",57,0)
 D ^%DT
"RTN","FHADR1",58,0)
 I $E(Y,6,7) W *7,?28,"  Do Not Enter Dates." G Q1
"RTN","FHADR1",59,0)
 ;I $E(Y,4,5)<1!($E(Y,4,5)>4)!($E(Y,1,3)>$E(NOW,1,3)) W *7,"  Answer Qtr 1-4 and Yr as Qtr/Yr.",!?28,"  Yr CANNOT be greater than now." G Q1
"RTN","FHADR1",60,0)
 I $E(Y,4,5)<1!($E(Y,4,5)>4)!($E(Y,1,3)>$E(NOW,1,3)) D  G Q1
"RTN","FHADR1",61,0)
 .W *7,"  Answer Qtr 1-4 and Yr as 4 digit year, ie 2001."
"RTN","FHADR1",62,0)
 .W !?28,"  Example:  4/2001 for 4th quarter, year 2001."
"RTN","FHADR1",63,0)
 .W !?28,"  Yr CANNOT be greater than now."
"RTN","FHADR1",64,0)
 I $E(Y,4,5)>QTR&($E(Y,1,3)=$E(NOW,1,3)) W *7,"  Qtr/Yr must not be greater than default." G Q1
"RTN","FHADR1",65,0)
 S YR=$E(Y,2,3),QTR=$E(Y,5),PRE=$E(Y,1,5)_"00" Q
"RTN","FHADR1",66,0)
YR ; Read in the Year
"RTN","FHADR1",67,0)
 W ! K %DT S PRE="",%DT="AEP",%DT("A")="Enter YR: "
"RTN","FHADR1",68,0)
 D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 YR
"RTN","FHADR1",69,0)
 I $E(Y,1,3)>$E(DT,1,3) W *7,"  Do Not Enter Future Year." G YR
"RTN","FHADR1",70,0)
 I $E(Y,4,7)>0 W *7,"  Enter Year Only." G YR
"RTN","FHADR1",71,0)
 S Y=$E(Y,1,3)_"0100",PRE=Y Q
"RTN","FHADR10")
0^11^B3980921
"RTN","FHADR10",1,0)
FHADR10 ; HISC/NCA - Dietetic Equipment ;1/5/94  14:30
"RTN","FHADR10",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR10",3,0)
EN1 ; Enter/Edit Dietetic Equipment
"RTN","FHADR10",4,0)
 D YR^FHADR1 G:'PRE KIL
"RTN","FHADR10",5,0)
 S X1=PRE,X2=-356 D C^%DTC S OLD=$E(X,1,4)_"400" I $O(^FH(117.3,PRE,"EQUI",0))<1 D S1
"RTN","FHADR10",6,0)
 K DIC,DIE W ! S DIE="^FH(117.3,",DA=PRE,DR="38:39"
"RTN","FHADR10",7,0)
 D ^DIE K DA,DIC,DIE,DR S OLD=PRE
"RTN","FHADR10",8,0)
SET ; Set all three quarters with the Dietetic Equipment Data
"RTN","FHADR10",9,0)
 F QTR=2:1:4 S PRE=$E(OLD,1,4)_QTR_"00" D S1
"RTN","FHADR10",10,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR10",11,0)
S1 S TIT="EQUI"
"RTN","FHADR10",12,0)
 I $O(^FH(117.3,OLD,TIT,0))>0 K ^FH(117.3,PRE,TIT) D
"RTN","FHADR10",13,0)
 .S $P(^FH(117.3,PRE,3),"^",1)=$P($G(^FH(117.3,OLD,3)),"^",1)
"RTN","FHADR10",14,0)
 .I '$D(^FH(117.3,PRE,TIT,0)) S ^(0)="^117.338P^^"
"RTN","FHADR10",15,0)
 .F K1=0:0 S K1=$O(^FH(117.3,OLD,TIT,K1)) Q:K1<1  S L1=$G(^(K1,0)) D
"RTN","FHADR10",16,0)
 ..S ^FH(117.3,PRE,TIT,K1,0)=L1,^FH(117.3,PRE,TIT,"B",+L1,K1)=""
"RTN","FHADR10",17,0)
 ..S Z=$G(^FH(117.3,PRE,TIT,0))
"RTN","FHADR10",18,0)
 ..S $P(^FH(117.3,PRE,TIT,0),"^",3,4)=K1_"^"_($P(Z,"^",4)+1)
"RTN","FHADR10",19,0)
 ..Q
"RTN","FHADR10",20,0)
 .Q
"RTN","FHADR10",21,0)
 Q
"RTN","FHADR10",22,0)
EN2 ; Print the CMR Cost,Dietetic Equipment, and Brand
"RTN","FHADR10",23,0)
 D HDR
"RTN","FHADR10",24,0)
 S PRE=FHYR_"0000",X1=""
"RTN","FHADR10",25,0)
 F L1=PRE:0 S L1=$O(^FH(117.3,L1)) Q:L1<1!($E(L1,1,3)'=$E(PRE,1,3))  I $P($G(^FH(117.3,L1,3)),"^",1)'<1 S X1=L1
"RTN","FHADR10",26,0)
 I X1'="" S Z=$P($G(^FH(117.3,X1,3)),"^",1) W !,"CMR Cost",!?2,"Total",?46 S X=Z,X2="0$" D COMMA^%DTC W X
"RTN","FHADR10",27,0)
 W !!,"EQUIPMENT",?40,"BRAND",! S X1=""
"RTN","FHADR10",28,0)
 F L1=PRE:0 S L1=$O(^FH(117.3,L1)) Q:L1<1!($E(L1,1,3)'=$E(PRE,1,3))  I $P($G(^FH(117.3,L1,"EQUI",0)),"^",3)'="" S X1=L1
"RTN","FHADR10",29,0)
 Q:X1=""
"RTN","FHADR10",30,0)
 S L2=0 F  S L2=$O(^FH(117.3,X1,"EQUI",L2)) Q:L2<1  D
"RTN","FHADR10",31,0)
 .S X=$G(^FH(117.3,X1,"EQUI",L2,0))
"RTN","FHADR10",32,0)
 .S Z=$P(X,"^",1),Z=$P($G(^FH(117.4,Z,0)),"^",1),BRD=$P(X,"^",2)
"RTN","FHADR10",33,0)
 .W !,Z,?40,BRD
"RTN","FHADR10",34,0)
 .Q
"RTN","FHADR10",35,0)
 Q
"RTN","FHADR10",36,0)
HDR ; Print Heading for Dietetic Equipment
"RTN","FHADR10",37,0)
 D:$Y'<21 HDR^FHADRPT
"RTN","FHADR10",38,0)
 W !!!,"S E C T I O N  VII   E Q U I P M E N T",!!
"RTN","FHADR10",39,0)
 Q
"RTN","FHADR1A")
0^12^B10224986
"RTN","FHADR1A",1,0)
FHADR1A ; HISC/NCA - Dietetic Facility Profile ;4/27/93  09:32
"RTN","FHADR1A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR1A",3,0)
EN2 ; Print Facility Profile
"RTN","FHADR1A",4,0)
 D HDR^FHADRPT,HDR
"RTN","FHADR1A",5,0)
 K N F I=1:1:13 S N(I)=""
"RTN","FHADR1A",6,0)
 S PRE=FHYR_"0000",(X0,X1)="" D LP
"RTN","FHADR1A",7,0)
 Q
"RTN","FHADR1A",8,0)
LP F L1=PRE:0 S L1=$O(^FH(117.3,L1)) Q:L1<1!($E(L1,1,3)'=$E(PRE,1,3))  I $G(^FH(117.3,L1,0))'="" S X0=^(0),X1=L1
"RTN","FHADR1A",9,0)
 Q:X0=""
"RTN","FHADR1A",10,0)
 S ST=$G(^DIC(4,FHX1,0)) Q:ST=""
"RTN","FHADR1A",11,0)
 S X=$P(ST,"^",1,2)_"^"_$P($G(^DIC(4,FHX1,99)),"^",1)
"RTN","FHADR1A",12,0)
 F I=1:1:3 S N(I)=$P(X,"^",I)
"RTN","FHADR1A",13,0)
 S N(2)=$P($G(^DIC(5,N(2),0)),"^",1)
"RTN","FHADR1A",14,0)
 S K=3 F I=3:1:12 S K=K+1,N(K)=$P(X0,"^",I)
"RTN","FHADR1A",15,0)
 F I=5,8:1:13 S N(I)=$S(N(I)="Y":"YES",1:"NO")
"RTN","FHADR1A",16,0)
 W ?13,"NAME: ",?39,N(1),?86,"STATION NUMBER: ",?104,N(3)
"RTN","FHADR1A",17,0)
 W !?13,"LOCATION: ",?39,N(2),?86,"REGION:",?104,N(4)
"RTN","FHADR1A",18,0)
 W !?13,"RPM CLASSIFICATION: ",?39,N(6),?86,"COMPLEXITY LEVEL: ",N(7)
"RTN","FHADR1A",19,0)
 W !?13,"MULTI DIVISION FACILITY:",?39,N(5),!
"RTN","FHADR1A",20,0)
L1 S (FLG,L1)=0 S FLG=1 F  S L1=$O(^FH(117.3,X1,"DELV",L1)) Q:L1<1  S X2=$G(^(L1,0)) D:$Y'<LIN HDR^FHADRPT,HDR D LP1
"RTN","FHADR1A",21,0)
L2 W !!?13,"COOK CHILL FOODS: ",?66,$J($S($P(X0,"^",21)="Y":"YES",1:"NO"),3)
"RTN","FHADR1A",22,0)
 I $P(X0,"^",21)="Y" S TIT=";"_$P(^DD(117.3,52,0),"^",3),L2=$F(TIT,";"_$P(X0,"^",22)_":") S:L2>0 L2=$P($E(TIT,L2,999),";",1) W:L2'="" !!?15,L2,!
"RTN","FHADR1A",23,0)
L3 S (FLG,L3)=0 S FLG=1 F  S L3=$O(^FH(117.3,X1,"SPEC",L3)) Q:L3<1  S X2=$G(^(L3,0)) D:$Y'<LIN HDR^FHADRPT,HDR D LP1
"RTN","FHADR1A",24,0)
 D:$Y'<(LIN-8) HDR^FHADRPT,HDR
"RTN","FHADR1A",25,0)
 W !!?13,"DIETETIC INTERNSHIP/PROGRAMS:"
"RTN","FHADR1A",26,0)
 W !!,?15,"VA SPONSORED DIETETIC INTERNSHIP",?66,$J(N(8),3)
"RTN","FHADR1A",27,0)
 W !?15,"AFFILIATED AP4",?66,$J(N(9),3),!,?15,"AFFILIATED DIETETIC INTERNSHIP",?66,$J(N(10),3)
"RTN","FHADR1A",28,0)
 W !,?15,"AFFILIATED CUP",?66,$J(N(11),3),!,?15,"VA SPONSORED AP4",?66,$J(N(12),3)
"RTN","FHADR1A",29,0)
 W !,?15,"AFFILIATED DIETETIC TECHNICIAN",?66,$J(N(13),3) D:$Y'<(LIN-8) HDR^FHADRPT,HDR
"RTN","FHADR1A",30,0)
 W !!?13,"FUNDED NUTRITION RESEARCH",?66,$J($S($P(X0,"^",23)="Y":"YES",1:"NO"),3),?95 I $P(X0,"^",23)="Y" W:$P(X0,"^",24)'="" $J($P(X0,"^",24),5,1)
"RTN","FHADR1A",31,0)
 W !?13,"UNFUNDED NUTRITION RESEARCH",?66,$J($S($P(X0,"^",25)="Y":"YES",1:"NO"),3),?95 I $P(X0,"^",25)="Y" W:$P(X0,"^",26)'="" $J($P(X0,"^",26),5,1),!
"RTN","FHADR1A",32,0)
 S L2=0 F  S L2=$O(^FH(117.3,X1,"AREA",L2)) Q:L2<1  S X2=$G(^(L2,0)) I X2'="" S TIT=";"_$P(^DD(117.356,.01,0),"^",3),ZZ=$F(TIT,";"_+X2_":") S:ZZ>0 ZZ=$P($E(TIT,ZZ,999),";",1) W:ZZ'="" !?15,ZZ
"RTN","FHADR1A",33,0)
 K N Q
"RTN","FHADR1A",34,0)
LP1 S Z=$P(X2,"^",1),LST=$G(^FH(117.4,Z,0)) Q:LST=""  S TYP=$P(LST,"^",2)
"RTN","FHADR1A",35,0)
 I FLG W !?13,$S(TYP="S":"SPECIALIZED MEDICAL PROGRAMS:",TYP="D":"PRIMARY DELIVERY SYSTEM:",1:"NOT SPECIFIED") W ! S FLG=0 I TYP="S" W ?86,"ASSIGNED CLINICAL FTEE",!
"RTN","FHADR1A",36,0)
 W !?15,$P(LST,"^",1) W:$P(X2,"^",2)'="" ?95,$J($P(X2,"^",2),5,1) Q
"RTN","FHADR1A",37,0)
HDR ; Print Facility Profile Heading
"RTN","FHADR1A",38,0)
 W !!!,?13,"S E C T I O N  I   F A C I L I T Y   P R O F I L E",!!!! Q
"RTN","FHADR2")
0^13^B6444587
"RTN","FHADR2",1,0)
FHADR2 ; HISC/NCA/JH - Type of Service ;2/15/95  16:02 
"RTN","FHADR2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR2",3,0)
Q1 ; Bedside Tray, Cafeteria, and Dining Room Tray
"RTN","FHADR2",4,0)
 ; Enter/Edit the Type of Service
"RTN","FHADR2",5,0)
 S DP=0 D NOW^%DTC S NOW=%\1 K %
"RTN","FHADR2",6,0)
 D YR^FHADR1 G:'PRE KIL
"RTN","FHADR2",7,0)
 S X=$P($G(^XMB(1,1,"XUS")),"^",17) G:X="" MSG S FHX1=X
"RTN","FHADR2",8,0)
 S ST=$G(^DIC(4,FHX1,0)) Q:ST=""
"RTN","FHADR2",9,0)
 S X1=PRE,X2=-356 D C^%DTC S OLD=$E(X,1,4)_"400"
"RTN","FHADR2",10,0)
 I '$D(^FH(117.3,PRE,0)) D S1^FHADR1 S OLD=PRE D SET^FHADR1 S PRE=OLD G F1
"RTN","FHADR2",11,0)
 S OLD=PRE
"RTN","FHADR2",12,0)
F1 W ! K DIC,DIE S DIE="^FH(117.3,",DA=PRE
"RTN","FHADR2",13,0)
 L +^FH(117.3,PRE,0):0 I '$T W !?5,"Another user is editing this entry." G KIL
"RTN","FHADR2",14,0)
 I '$D(^FH(117.3,PRE,0)) D
"RTN","FHADR2",15,0)
 .S $P(^FH(117.3,PRE,0),"^",1)=PRE,^FH(117.3,"B",PRE,PRE)=""
"RTN","FHADR2",16,0)
 .S Z=$G(^FH(117.3,0)),$P(^FH(117.3,0),"^",3,4)=PRE_"^"_($P(Z,"^",4)+1)
"RTN","FHADR2",17,0)
 .S $P(ZZ,"^",2,12)=$P(ST,"^",7)_"^"_$P($G(^DIC(4,FHX1,"DIV")),"^",1)_"^^^^^^^^^"
"RTN","FHADR2",18,0)
 .S $P(^FH(117.3,PRE,0),"^",2,13)=ZZ
"RTN","FHADR2",19,0)
 .Q
"RTN","FHADR2",20,0)
 S DR="15:17" D ^DIE L -^FH(117.3,PRE,0) K DA,DIC,DIE,DR
"RTN","FHADR2",21,0)
SET ; Set all three quarters with the Type of Service
"RTN","FHADR2",22,0)
 F QTR=2:1:4 S PRE=$E(OLD,1,4)_QTR_"00" D S1
"RTN","FHADR2",23,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR2",24,0)
S1 Q:'$D(^FH(117.3,OLD,0))
"RTN","FHADR2",25,0)
 I '$D(^FH(117.3,PRE,0)) S $P(^FH(117.3,PRE,0),"^",1)=PRE,^FH(117.3,"B",PRE,PRE)="",Z=^FH(117.3,0),$P(^FH(117.3,0),"^",3,4)=PRE_"^"_($P(Z,"^",4)+1)
"RTN","FHADR2",26,0)
 S $P(^FH(117.3,PRE,0),"^",2,16)=$P($G(^FH(117.3,OLD,0)),"^",2,16)
"RTN","FHADR2",27,0)
 Q
"RTN","FHADR2",28,0)
MSG W !!,$C(7)," *** SITE NOT FOUND IN ^XMB GLOBAL ***" G KIL
"RTN","FHADR2",29,0)
EN2 ; Print out the Type of Service
"RTN","FHADR2",30,0)
 D:$Y'<(LIN-10) HDR^FHADRPT,HDR2^FHADR3A
"RTN","FHADR2",31,0)
 W !!!!!,?13,"TYPE OF SERVICE SUMMARY"
"RTN","FHADR2",32,0)
 S (N1,N2,N3,X2,X3)=""
"RTN","FHADR2",33,0)
 W !?65,"Average Daily Meals Served",!?68,"By Type of Service",?93,"% of Workload"
"RTN","FHADR2",34,0)
 S X="" F QR=1:1:4 S QTR=QR,PRE=FHYR_"0"_QTR_"00" S X3=$P($G(^FH(117.3,PRE,0)),"^",14,16) S:"^^"'[X3 X=X3
"RTN","FHADR2",35,0)
 S N1=$P(X,"^",1),N2=$P(X,"^",2),N3=$P(X,"^",3),X2=$P(X,"^",1)+$P(X,"^",2)+$P(X,"^",3)
"RTN","FHADR2",36,0)
 W !,?15,"Bedside Tray",?80 W $J($S(N1:N1,1:""),6),?100,$S(X2:$J(N1/X2*100,6,0),1:$J("",6))
"RTN","FHADR2",37,0)
 W !?15,"Cafeteria",?80 W $J($S(N2:N2,1:""),6),?100,$S(X2:$J(N2/X2*100,6,0),1:$J("",6))
"RTN","FHADR2",38,0)
 W !?15,"Dining Room Tray",?80 W $J($S(N3:N3,1:""),6),?100,$S(X2:$J(N3/X2*100,6,0),1:$J("",6))
"RTN","FHADR2",39,0)
 W !,?15,"Total",?80 W $J($S(X2:X2,1:""),6)
"RTN","FHADR2",40,0)
 K N1,N2,N3,X2,X3 Q
"RTN","FHADR3")
0^14^B2364238
"RTN","FHADR3",1,0)
FHADR3 ; HISC/NCA - Facility Workload ;11/3/94  15:37
"RTN","FHADR3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR3",3,0)
EN1 ; Enter/Edit Outpatients Visits
"RTN","FHADR3",4,0)
 D QR^FHADR1 G:'PRE KIL
"RTN","FHADR3",5,0)
 S OLD=$S($E(PRE,5)=1:$E(PRE,1,3)-1_"0400",1:$E(PRE,1,5)-1_"00")
"RTN","FHADR3",6,0)
 S (Z,ZZZ)=""
"RTN","FHADR3",7,0)
 K DIC,DIE W ! S DIE="^FH(117.3,",DA=PRE
"RTN","FHADR3",8,0)
 S DR="21;23;S:X'="""" ZZZ=X"
"RTN","FHADR3",9,0)
 L +^FH(117.3,PRE,0):0 I '$T W !?5,"Another user is editing the entry." G KIL
"RTN","FHADR3",10,0)
 D ^DIE K DR
"RTN","FHADR3",11,0)
 I ZZZ,$D(^FH(117.3,OLD,"CLIN",0)) D
"RTN","FHADR3",12,0)
 .I '$D(^FH(117.3,PRE,"CLIN",0)) D
"RTN","FHADR3",13,0)
 ..S ^FH(117.3,PRE,"CLIN",0)="^117.325^^",NDE=$G(^FH(117.3,PRE,"CLIN",0)),NDE=$P(NDE,"^",4)
"RTN","FHADR3",14,0)
 ..F LP=0:0 S LP=$O(^FH(117.3,OLD,"CLIN",LP)) Q:LP<1  S Z1=$G(^(LP,0)) D 
"RTN","FHADR3",15,0)
 ...I Z1'="",'$D(^FH(117.3,PRE,"CLIN",LP,0)) S ^(0)=$P(Z1,"^",1),^FH(117.3,PRE,"CLIN","B",$P(Z1,"^",1),LP)="",NDE=NDE+1,$P(^FH(117.3,PRE,"CLIN",0),"^",3,4)=LP_"^"_NDE Q
"RTN","FHADR3",16,0)
 ..Q
"RTN","FHADR3",17,0)
 .Q
"RTN","FHADR3",18,0)
 S DR="I 'ZZZ S Y="""";25"
"RTN","FHADR3",19,0)
 S DR(2,117.325)=".01:1"
"RTN","FHADR3",20,0)
 D ^DIE L -^FH(117.3,PRE,0) K DIE,DR
"RTN","FHADR3",21,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR3A")
0^15^B16975546
"RTN","FHADR3A",1,0)
FHADR3A ; HISC/NCA - Facility Workload ;6/18/93  11:30
"RTN","FHADR3A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR3A",3,0)
EN2 ; Calculate Inpats Days of Care and Outpats treated in
"RTN","FHADR3A",4,0)
 ; Hosp & Sat Clinics
"RTN","FHADR3A",5,0)
 K AMS,T1,T2,TD S AMS="" F K=1:1:8 S T1(K)=""
"RTN","FHADR3A",6,0)
 F K=1:1:4 S TD(K)=0
"RTN","FHADR3A",7,0)
 F QR=1:1:4 S QTR=QR,PRE=FHYR_"0"_QTR_"00" D Q2^FHADRPT D
"RTN","FHADR3A",8,0)
 .Q:'SDT!('EDT)
"RTN","FHADR3A",9,0)
 .K N S S=0 F K=1:1:24 S N(K)=0
"RTN","FHADR3A",10,0)
 .S STR1=""
"RTN","FHADR3A",11,0)
 .S D1=SDT\1 F L1=0:0 D  Q:X>EDT
"RTN","FHADR3A",12,0)
 ..S Y0=$G(^FH(117,D1,0)),Y1=$G(^(1))
"RTN","FHADR3A",13,0)
 ..S:Y0'="" S=S+1
"RTN","FHADR3A",14,0)
 ..S K=1 F L=1,2,4,5,7,8 S K=K+1,N(L)=$P(Y0,"^",K)
"RTN","FHADR3A",15,0)
 ..S K=10 F L=1:3:16 S K=K+1,N(K)=$P(Y1,"^",L)+$P(Y1,"^",L+1)+$P(Y1,"^",L+2)
"RTN","FHADR3A",16,0)
 ..S N(3)=N(1)-N(2)*3,N(6)=N(4)-N(5)*3,N(9)=N(7)-N(8)*3
"RTN","FHADR3A",17,0)
 ..S N(10)=N(3)+N(6)+N(9)+N(11)+N(12)+N(13)+N(14)+N(15)+N(16)
"RTN","FHADR3A",18,0)
 ..S N(22)=N(1)-N(2),N(23)=N(4)-N(5),N(24)=N(7)-N(8)
"RTN","FHADR3A",19,0)
 ..S N(17)=N(17)+N(10),N(18)=N(18)+N(22)
"RTN","FHADR3A",20,0)
 ..S N(19)=N(19)+N(23),N(20)=N(20)+N(24)
"RTN","FHADR3A",21,0)
 ..S X1=D1,X2=1 D C^%DTC
"RTN","FHADR3A",22,0)
 ..S D1=X
"RTN","FHADR3A",23,0)
 ..Q
"RTN","FHADR3A",24,0)
 .S N(21)=N(18)+N(19)+N(20)
"RTN","FHADR3A",25,0)
 .S $P(T1(QTR),"^",1)=$P(T1(QTR),"^",1)+N(17)
"RTN","FHADR3A",26,0)
 .S $P(T1(QTR),"^",2)=$P(T1(QTR),"^",2)+N(20)
"RTN","FHADR3A",27,0)
 .S $P(T1(QTR),"^",3)=$P(T1(QTR),"^",3)+N(19)
"RTN","FHADR3A",28,0)
 .S $P(T1(QTR),"^",4)=$P(T1(QTR),"^",4)+N(18)
"RTN","FHADR3A",29,0)
 .S $P(T1(QTR),"^",5)=$P(T1(QTR),"^",5)+N(21)
"RTN","FHADR3A",30,0)
 .S TD(QTR)=TD(QTR)+S
"RTN","FHADR3A",31,0)
 .S $P(^FH(117.3,PRE,1),"^",5)=N(17)
"RTN","FHADR3A",32,0)
 .S STR=$G(^FH(117.3,PRE,1))
"RTN","FHADR3A",33,0)
 .S $P(T1(5),"^",QTR)=$P(T1(5),"^",QTR)+$P(STR,"^",1)
"RTN","FHADR3A",34,0)
 .S $P(T1(5),"^",5)=$P(T1(5),"^",5)+$P(STR,"^",1)
"RTN","FHADR3A",35,0)
 .S $P(T1(6),"^",QTR)=$P(T1(6),"^",QTR)+$P(STR,"^",1)
"RTN","FHADR3A",36,0)
 .S NUM=$P(STR,"^",3) Q:NUM<1
"RTN","FHADR3A",37,0)
 .S CTR=$P($G(^FH(117.3,PRE,"CLIN",0)),"^",4) Q:CTR=""  Q:CTR'=NUM
"RTN","FHADR3A",38,0)
 .F NUM=0:0 S NUM=$O(^FH(117.3,PRE,"CLIN",NUM)) Q:NUM<1  S STR1=$G(^(NUM,0)) D
"RTN","FHADR3A",39,0)
 ..S SAT=$P(STR1,"^",1)
"RTN","FHADR3A",40,0)
 ..I SAT'="" S:'$D(T2(SAT)) T2(SAT)=""
"RTN","FHADR3A",41,0)
 ..S $P(T2(SAT),"^",QTR)=$P(T2(SAT),"^",QTR)+$P(STR1,"^",2)
"RTN","FHADR3A",42,0)
 ..S $P(T2(SAT),"^",5)=$P(T2(SAT),"^",5)+$P(STR1,"^",2)
"RTN","FHADR3A",43,0)
 ..S $P(T1(5),"^",5)=$P(T1(5),"^",5)+$P(STR1,"^",2)
"RTN","FHADR3A",44,0)
 ..S $P(T1(6),"^",QTR)=$P(T1(6),"^",QTR)+$P(STR1,"^",2)
"RTN","FHADR3A",45,0)
 ..Q
"RTN","FHADR3A",46,0)
 .Q
"RTN","FHADR3A",47,0)
 D HDR1 S (FIN,FTO,YD)=0
"RTN","FHADR3A",48,0)
 W !,?15,"Hospital ",?61
"RTN","FHADR3A",49,0)
 F I=1:1:4 S X=$P(T1(I),"^",2),X2=0 D COMMA^%DTC W X S FIN=FIN+$P(T1(I),"^",2)
"RTN","FHADR3A",50,0)
 S X=FIN,X2=0 D COMMA^%DTC W ?112,X S FTO=FTO+FIN,FIN=0
"RTN","FHADR3A",51,0)
 W !,?15,"Nursing Home ",?61
"RTN","FHADR3A",52,0)
 F I=1:1:4 S X=$P(T1(I),"^",3),X2=0 D COMMA^%DTC W X S FIN=FIN+$P(T1(I),"^",3)
"RTN","FHADR3A",53,0)
 S X=FIN,X2=0 D COMMA^%DTC W ?112,X S FTO=FTO+FIN,FIN=0
"RTN","FHADR3A",54,0)
 W !,?15,"Domicillary ",?61
"RTN","FHADR3A",55,0)
 F I=1:1:4 S X=$P(T1(I),"^",4),X2=0 D COMMA^%DTC W X S FIN=FIN+$P(T1(I),"^",4)
"RTN","FHADR3A",56,0)
 S X=FIN,X2=0 D COMMA^%DTC W ?112,X S FTO=FTO+FIN,FIN=0
"RTN","FHADR3A",57,0)
 W !,?15,"Total Inpatient Days ",?61
"RTN","FHADR3A",58,0)
 F I=1:1:4 S X=$P(T1(I),"^",5),X2=0 D COMMA^%DTC W X
"RTN","FHADR3A",59,0)
 S X=FTO,X2=0 D COMMA^%DTC W ?112,X
"RTN","FHADR3A",60,0)
 W !!!,?13,"OUTPATIENTS TREATED",!?15,"Hospital Clinic ",?61
"RTN","FHADR3A",61,0)
 F I=1:1:4 S X=$P(T1(5),"^",I),X2=0 D COMMA^%DTC W X S FIN=FIN+$P(T1(5),"^",I)
"RTN","FHADR3A",62,0)
 S X=FIN,X2=0 D COMMA^%DTC W ?112,X S FIN=0
"RTN","FHADR3A",63,0)
 S (CT,Z)=0 F K=0:0 S Z=$O(T2(Z)) Q:Z=""  S CT=CT+1 D
"RTN","FHADR3A",64,0)
 .W !,?15,"Satellite Location ",CT," ",Z,?61
"RTN","FHADR3A",65,0)
 .F J=1:1:4 S X=$P(T2(Z),"^",J),X2=0 D COMMA^%DTC W X
"RTN","FHADR3A",66,0)
 .S X=$P(T2(Z),"^",5),X2=0 D COMMA^%DTC W ?112,X
"RTN","FHADR3A",67,0)
 .Q
"RTN","FHADR3A",68,0)
 W !,?15,"Total Outpatients Treated ",?61
"RTN","FHADR3A",69,0)
 F I=1:1:4 S X=$P(T1(6),"^",I),X2=0 D COMMA^%DTC W X S FIN=FIN+$P(T1(6),"^",I)
"RTN","FHADR3A",70,0)
 S X=FIN,X2=0 D COMMA^%DTC W ?112,X S FIN=0
"RTN","FHADR3A",71,0)
 D:$Y'<LIN HDR^FHADRPT D HDR2
"RTN","FHADR3A",72,0)
 W !!!!?13,"SERVED MEALS SUMMARY",!!?65,"1st Qtr     2nd Qtr     3rd Qtr     4th Qtr         Yearly"
"RTN","FHADR3A",73,0)
 W !!?15,"Total Served Meals",?61
"RTN","FHADR3A",74,0)
 F I=1:1:4 S X=$P(T1(I),"^",1),X2=0 D COMMA^%DTC W X S FIN=FIN+$P(T1(I),"^",1)
"RTN","FHADR3A",75,0)
 S X=FIN,X2=0 D COMMA^%DTC W ?112,X
"RTN","FHADR3A",76,0)
 W !,?15,"Average Daily Meals",?61 S FIN=0
"RTN","FHADR3A",77,0)
 F I=1:1:4 S X=$S(+TD(I)'<1:$P(T1(I),"^",1)/TD(I),1:""),$P(AMS,"^",I)=X,X2=0,FIN=FIN+$P(T1(I),"^",1),YD=YD+TD(I) D COMMA^%DTC W X
"RTN","FHADR3A",78,0)
 S X=$S(YD'<1:FIN/YD,1:""),X2=0 D COMMA^%DTC W ?112,X
"RTN","FHADR3A",79,0)
 K N,T1,T2,TD Q
"RTN","FHADR3A",80,0)
HDR1 ; Print heading for Facility Workload
"RTN","FHADR3A",81,0)
 D:$Y'<(LIN-20) HDR^FHADRPT
"RTN","FHADR3A",82,0)
 W !!!?13,"S E C T I O N  II   F A C I L I T Y   W O R K L O A D   S T A T I S T I C S"
"RTN","FHADR3A",83,0)
 W !!!!,?13,"INPATIENT DAYS OF CARE" W ?65,"1st Qtr     2nd Qtr     3rd Qtr     4th Qtr      YTD Total" Q
"RTN","FHADR3A",84,0)
HDR2 ; Print Heading for Workload Statistics
"RTN","FHADR3A",85,0)
 D:$Y'<(LIN-14) HDR^FHADRPT
"RTN","FHADR3A",86,0)
 W !!!!!!?13,"S E C T I O N  III   D I E T E T I C   W O R K L O A D   S T A T I S T I C S"
"RTN","FHADR3A",87,0)
 Q
"RTN","FHADR4")
0^16^B6206595
"RTN","FHADR4",1,0)
FHADR4 ; HISC/NCA - Annual Nutrition Status Summary ;9/10/93  14:44
"RTN","FHADR4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR4",3,0)
Q1 ; Process Screening
"RTN","FHADR4",4,0)
 K M,N,S,T1 S (TD,XX)=0
"RTN","FHADR4",5,0)
 F K=1:1:5 S S(K)=0,T1(K)=""
"RTN","FHADR4",6,0)
 F QR=1:1:4 S QTR=QR,PRE=FHYR_"0"_QTR_"00" D Q2^FHADRPT,Q11
"RTN","FHADR4",7,0)
 G EN2
"RTN","FHADR4",8,0)
Q11 ; T1(1-4) have tabulated statuses for the quarters
"RTN","FHADR4",9,0)
 ; T1(5) is final Total
"RTN","FHADR4",10,0)
 Q:'SDT!('EDT)
"RTN","FHADR4",11,0)
 S D1=SDT,(FIN,ND)=0,(M,N)="" F L1=0:0 D Q2 S X1=D1,X2=1 D C^%DTC Q:X>EDT  S D1=X
"RTN","FHADR4",12,0)
 Q:'FIN
"RTN","FHADR4",13,0)
 F K=1:1:5 S $P(T1(QTR),"^",K)=$J($S(ND:$P(N,"^",K)/ND,1:0),0,0),$P(T1(5),"^",QTR)=$P(T1(5),"^",QTR)+$P(T1(QTR),"^",K)
"RTN","FHADR4",14,0)
 F K=1:1:5 S $P(T1(QTR),"^",K+5)=$J($S($P(T1(5),"^",QTR):$P(T1(QTR),"^",K)/$P(T1(5),"^",QTR)*100,1:0),0,1)
"RTN","FHADR4",15,0)
 S:ND TD=TD+1
"RTN","FHADR4",16,0)
 Q
"RTN","FHADR4",17,0)
Q2 ; Tabulate status
"RTN","FHADR4",18,0)
 S TOT=0
"RTN","FHADR4",19,0)
 S X4=$G(^FH(117,D1,0)) Q:X4=""  S X5=$G(^(1))
"RTN","FHADR4",20,0)
 Q:X5=""
"RTN","FHADR4",21,0)
 S K=20 F L=1:1:5 S K=K+1,S(L)=$P(X5,"^",K),TOT=TOT+$S(S(L):S(L),1:0) S:'$D(N) N="" S $P(N,"^",L)=$P(N,"^",L)+$S(S(L):S(L),1:0)
"RTN","FHADR4",22,0)
 Q:'TOT  S ND=ND+1
"RTN","FHADR4",23,0)
 S X=$S(TOT:TOT,1:0),FIN=FIN+X
"RTN","FHADR4",24,0)
 F K=1:1:5 S X=S(K) S:'$D(M) M="" S $P(M,"^",K)=$P(M,"^",K)+$S(X:X,1:0)
"RTN","FHADR4",25,0)
 Q
"RTN","FHADR4",26,0)
EN2 ; Print Summary
"RTN","FHADR4",27,0)
 D HDR
"RTN","FHADR4",28,0)
 F K=1:1:5 F J=1:1:4 S $P(T1(K),"^",11)=$P(T1(K),"^",11)+$S($P(T1(J),"^",K):$P(T1(J),"^",K),1:0)
"RTN","FHADR4",29,0)
 F J=1:1:5 S XX=XX+$S($P(T1(J),"^",11):$P(T1(J),"^",11),1:0)
"RTN","FHADR4",30,0)
 F K=1:1:5 S TIT=$P("I,II,III,IV,UNC",",",K)_" "_$S(K<5:$P($G(^FH(115.4,K,0)),"^",3),1:"UNCLASSIFIED") D LP
"RTN","FHADR4",31,0)
 W !,?13,"TOTAL",?67 F I=1:1:4 W $J($S($P(T1(5),"^",I):$P(T1(5),"^",I),1:""),5)_$J("",7)
"RTN","FHADR4",32,0)
 W ?117,$J($S(XX:XX,1:""),5)
"RTN","FHADR4",33,0)
 K M,N,S,T1 Q
"RTN","FHADR4",34,0)
LP W !,?13,TIT,?67
"RTN","FHADR4",35,0)
 F I=1:1:4 W $S($P(T1(I),"^",K):$J($P(T1(I),"^",K),5),1:$J("",5))_$J("",7)
"RTN","FHADR4",36,0)
 W ?117,$S($P(T1(K),"^",11):$J($P(T1(K),"^",11),5,0),1:$J("",5))
"RTN","FHADR4",37,0)
 W !,?13,"%",?67 F I=1:1:4 W $S($P(T1(I),"^",K+5):$J($P(T1(I),"^",K+5),5,1),1:$J("",5))_$J("",7)
"RTN","FHADR4",38,0)
 S X6=$S(XX:$P(T1(K),"^",11)/XX*100,1:"")
"RTN","FHADR4",39,0)
 W ?117,$S(X6:$J(X6,5,1),1:$J("",5)),!
"RTN","FHADR4",40,0)
 Q
"RTN","FHADR4",41,0)
HDR ; Print Heading for Nutrition Statuses Summary
"RTN","FHADR4",42,0)
 D:$Y'<(LIN-22) HDR^FHADRPT,HDR2^FHADR3A
"RTN","FHADR4",43,0)
 W !!!,?14,"NUTRITION STATUS SUMMARY"
"RTN","FHADR4",44,0)
 W !!,?67,"Avg",?79,"Avg",?91,"Avg",?103,"Avg",?117,"YTD"
"RTN","FHADR4",45,0)
 W !?13,"Status",?65,"1st Qtr     2nd Qtr     3rd Qtr     4th Qtr       Tot Avg",! Q
"RTN","FHADR5")
0^17^B7610044
"RTN","FHADR5",1,0)
FHADR5 ; HISC/NCA - Dietetic Encounter Percentage ;4/27/93  09:20
"RTN","FHADR5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR5",3,0)
Q0 ; Calculate the Encounter Percentage
"RTN","FHADR5",4,0)
 K N,P,S,T2,T3,T4,T5 S (T2,T3,T4,T5)="",(CTN,NUM)=0
"RTN","FHADR5",5,0)
 F QR=1:1:4 S QTR=QR,PRE=FHYR_"0"_QTR_"00" D Q2^FHADRPT,Q1
"RTN","FHADR5",6,0)
 G EN2
"RTN","FHADR5",7,0)
Q1 Q:'SDT!('EDT)
"RTN","FHADR5",8,0)
 S X1=SDT\1-.0001,X2=EDT\1+.3 K T,P
"RTN","FHADR5",9,0)
Q2 S X1=$O(^FHEN("AT",X1)) I X1<1!(X1>X2) G ADD
"RTN","FHADR5",10,0)
 S K=0
"RTN","FHADR5",11,0)
Q3 ; Count the Encounter and Work Units
"RTN","FHADR5",12,0)
 S K=$O(^FHEN("AT",X1,K)) G:K="" Q2
"RTN","FHADR5",13,0)
 S X=$G(^FHEN(K,0)),TYP=$P(X,"^",4) G:'TYP Q3
"RTN","FHADR5",14,0)
 S UNT=$P(X,"^",8)
"RTN","FHADR5",15,0)
 S:'$D(T(TYP)) T(TYP)=0 S T(TYP)=T(TYP)+1
"RTN","FHADR5",16,0)
 S:'$D(P(TYP)) P(TYP)=0 S P(TYP)=P(TYP)+UNT
"RTN","FHADR5",17,0)
 G Q3
"RTN","FHADR5",18,0)
ADD F K=0:0 S K=$O(T(K)) Q:K<1  S TYP=$P($G(^FH(115.6,K,0)),"^",2) D A1
"RTN","FHADR5",19,0)
 Q
"RTN","FHADR5",20,0)
A1 ; S(TYP) contains encounters, and N(TYP) contains the Work Units for
"RTN","FHADR5",21,0)
 ; four quarters T2 contains Total Encounters and T4 contains
"RTN","FHADR5",22,0)
 ; total Work Units of last line, CTN is YTD final encounters and
"RTN","FHADR5",23,0)
 ; NUM is YTD Units, T3 contains YTD Total encounters for each category
"RTN","FHADR5",24,0)
 ; T5 contains the YTD Total Units for each category
"RTN","FHADR5",25,0)
 Q:TYP=""
"RTN","FHADR5",26,0)
 S:'$D(S(TYP)) S(TYP)=""
"RTN","FHADR5",27,0)
 S $P(S(TYP),"^",QTR)=$P(S(TYP),"^",QTR)+T(K),CTN=CTN+T(K)
"RTN","FHADR5",28,0)
 S $P(T2,"^",QTR)=$P(T2,"^",QTR)+T(K) S:'$D(T3(TYP)) T3(TYP)=0
"RTN","FHADR5",29,0)
 S T3(TYP)=T3(TYP)+T(K)
"RTN","FHADR5",30,0)
 S:'$D(N(TYP)) N(TYP)="" S $P(N(TYP),"^",QTR)=$P(N(TYP),"^",QTR)+P(K)
"RTN","FHADR5",31,0)
 S $P(T4,"^",QTR)=$P(T4,"^",QTR)+P(K) S:'$D(T5(TYP)) T5(TYP)=0
"RTN","FHADR5",32,0)
 S T5(TYP)=T5(TYP)+P(K),NUM=NUM+P(K)
"RTN","FHADR5",33,0)
 Q
"RTN","FHADR5",34,0)
EN2 ; Print the Encounters and Work Units
"RTN","FHADR5",35,0)
 D:$Y'<LIN HDR^FHADRPT D HDR
"RTN","FHADR5",36,0)
 S TIT=";"_$P(^DD(115.6,10,0),"^",3)
"RTN","FHADR5",37,0)
P1 S Z=0 F K=0:0 S Z=$O(S(Z)) Q:Z=""  S X=$F(TIT,";"_Z_":") S:X>0 X=$P($E(TIT,X,999),";",1) D P2
"RTN","FHADR5",38,0)
 S X="Total Encounters" D TOT Q
"RTN","FHADR5",39,0)
P2 W !,?2,X,?28 F I=1:1:4 D LP
"RTN","FHADR5",40,0)
 W $J($S(+T3(Z)'<1:T3(Z),1:""),5)_" ",$S(T5(Z):$J(T5(Z),7,0),1:$J("",7))
"RTN","FHADR5",41,0)
 W $S(NUM:$J(T5(Z)/NUM*100,6,1),1:$J("",6)) Q
"RTN","FHADR5",42,0)
LP W $J($S(+$P(S(Z),"^",I)'<1:$P(S(Z),"^",I),1:""),5)_" ",$S($P(N(Z),"^",I)'="":$J($P(N(Z),"^",I),7,0),1:$J("",7))
"RTN","FHADR5",43,0)
 W $S($P(T4,"^",I)'<1:$J($P(N(Z),"^",I)/$P(T4,"^",I)*100,6,1),1:$J("",6))_" "
"RTN","FHADR5",44,0)
 Q
"RTN","FHADR5",45,0)
TOT ; Print Last Line
"RTN","FHADR5",46,0)
 W !!,X,?28 F I=1:1:4 W $J($S($P(T2,"^",I):$P(T2,"^",I),1:""),5)_" ",$S($P(T4,"^",I):$J($P(T4,"^",I),7,0),1:$J("",7))_$J("",7)
"RTN","FHADR5",47,0)
 W ?108,$J($S(CTN:CTN,1:""),5)_" ",$S(NUM:$J(NUM,7,0),1:$J("",7))
"RTN","FHADR5",48,0)
 K N,P,S,T2,T3,T4,T5 Q
"RTN","FHADR5",49,0)
HDR ; Print Heading for Encounter Category Summary
"RTN","FHADR5",50,0)
 D:$Y'<(LIN-17) HDR^FHADRPT,HDR2^FHADR3A
"RTN","FHADR5",51,0)
 W !!!!,"CLINICAL ENCOUNTER CATEGORY SUMMARY"
"RTN","FHADR5",52,0)
 W !!,?35,"1st Qtr",?55,"2nd Qtr",?76,"3rd Qtr",?95,"4th Qtr",?116,"YTD"
"RTN","FHADR5",53,0)
 W !?36,"Work",?56,"Work",?76,"Work",?96,"Work",?116,"Work"
"RTN","FHADR5",54,0)
 W !,"Clinical Categories",?30,"Tot   Units   %     Tot   Units   %     Tot   Units   %     Tot   Units   %     Tot   Units   %",! Q
"RTN","FHADR6")
0^18^B19020278
"RTN","FHADR6",1,0)
FHADR6 ; HISC/NCA - Modified Diet Percentage ;1/23/98  16:06
"RTN","FHADR6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR6",3,0)
EN1 ; Enter Snapshot Date
"RTN","FHADR6",4,0)
 S (MD,N)=0 D QR^FHADR1 G:'PRE KIL
"RTN","FHADR6",5,0)
 S (ANS,XX)="",TIM=$P($G(^FH(117.3,PRE,1)),"^",12) I TIM'="" S Y=TIM X ^DD("DD") S XX=Y
"RTN","FHADR6",6,0)
F1 K %DT W !,"Select SUNDAY Date: ",$S(XX'="":XX_"// ",1:"") R X:DTIME G:'$T!(X["^") KIL
"RTN","FHADR6",7,0)
 S:X="" X=XX
"RTN","FHADR6",8,0)
 S %DT="EXP" D ^%DT G KIL:$D(DTOUT),F1:Y<1
"RTN","FHADR6",9,0)
 S (TIM,X)=Y D H^%DTC G:%Y<0 F1 I %Y W *7,"  .. Not a Sunday" G F1
"RTN","FHADR6",10,0)
 S TS=$E(TIM,4,5),TS=$S(TS<4:2,TS<7:3,TS<10:4,1:1) I TS'=$E(PRE,5) W *7,"  .. Date Not Within Qtr" G F1
"RTN","FHADR6",11,0)
 I TS>1,$E(PRE,1,3)'=$E(TIM,1,3) W *7,"..Date Not Within Qtr" G F1
"RTN","FHADR6",12,0)
 I TS=1,$E(PRE,1,3)-1'=$E(TIM,1,3) W *7,"..Date Not Within Qtr" G F1
"RTN","FHADR6",13,0)
 S $P(^FH(117.3,PRE,1),"^",12)=TIM\1
"RTN","FHADR6",14,0)
DISP ; Display the numbers of the seven days for validation
"RTN","FHADR6",15,0)
 K DC,M,TM S D1=TIM\1 F L=1:1:7 S DC(L)=D1,X1=D1,X2=1 D C^%DTC S D1=X
"RTN","FHADR6",16,0)
 F K=1:1:7 S R=$G(^FH(117,DC(K),1)),N=$P(R,"^",26,27) D
"RTN","FHADR6",17,0)
 .S M(K)=$P(N,"^",1)
"RTN","FHADR6",18,0)
 .I '$P(N,"^",2) D
"RTN","FHADR6",19,0)
 ..F LP=21:1:25 S $P(N,"^",2)=$P(N,"^",2)+$P(R,"^",LP)
"RTN","FHADR6",20,0)
 ..S $P(^FH(117,DC(K),1),"^",27)=$P(N,"^",2)
"RTN","FHADR6",21,0)
 ..Q
"RTN","FHADR6",22,0)
 .S TM(K)=$P(N,"^",2)
"RTN","FHADR6",23,0)
 .Q
"RTN","FHADR6",24,0)
 ; Display Data for the seven dates
"RTN","FHADR6",25,0)
 W !!?25 S Y=DC(1) X ^DD("DD") W Y," - " S Y=DC(7) X ^DD("DD") W Y
"RTN","FHADR6",26,0)
 W !!?12,"|   X   |   M   |   T   |   W   |   R   |   F   |   S   |"
"RTN","FHADR6",27,0)
 W !?12,"|  Sun  |  Mon  |  Tues |  Wed  |  Thur |  Fri  |  Sat  |   Total"
"RTN","FHADR6",28,0)
 W !,"_____________________________________________________________________________"
"RTN","FHADR6",29,0)
 W !,"# Mod. Diets" S TOT=0 F L=1:1:7 W "|",$J($S(M(L):M(L),1:""),7) S TOT=TOT+M(L)
"RTN","FHADR6",30,0)
 W "|",$J($S(TOT:TOT,1:""),8) S TOT=0
"RTN","FHADR6",31,0)
 W !,"Total Diets",?12 F L=1:1:7 W "|",$J($S(TM(L):TM(L),1:""),7) S TOT=TOT+TM(L)
"RTN","FHADR6",32,0)
 W "|",$J($S(TOT:TOT,1:""),8)
"RTN","FHADR6",33,0)
F2 R !!,"Change Numbers of Modified Diets and Total Diets for that week? Y// ",X:DTIME G:'$T!(X="^") KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G F2
"RTN","FHADR6",34,0)
 S X=$E(X,1) G:X="N" KIL
"RTN","FHADR6",35,0)
OK W !!?10,"Sun  Mon  Tues  Wed  Thur  Fri  Sat"
"RTN","FHADR6",36,0)
 W !?10," X    M     T    W     R    F    S"
"RTN","FHADR6",37,0)
 W !!,"Enter string of characters for desired days of week: e.g., MWF",!
"RTN","FHADR6",38,0)
OK1 R !!,"Select the Day of Week you wish to change the data on: ",WKDS:DTIME G:'$T!("^"[WKDS) KIL S X=WKDS D TR^FH S WKDS=X
"RTN","FHADR6",39,0)
 S X1="" F K=1:1 S Z=$E(WKDS,K) Q:Z=""  G:X1[Z MSG S X1=X1_Z I "XMTWRFS"'[Z W !,"Please enter the desired days of the week." G OK
"RTN","FHADR6",40,0)
 F K=1:1 S Y=$E(WKDS,K) Q:Y=""  S DAY=$F("XMTWRFS",Y),DAY=DAY-1,WK=$P("Sun Mon Tues Wed Thur Fri Sat"," ",DAY) D E1 Q:ANS="^"
"RTN","FHADR6",41,0)
 G KIL:ANS="^",DISP
"RTN","FHADR6",42,0)
E1 W !!,"Change # of Modified Diets for ",WK," from ",$S(M(DAY):M(DAY),1:""),"  to: " R Y:DTIME I '$T!(Y["^") S ANS="^" Q
"RTN","FHADR6",43,0)
 I Y="",M(DAY) S Y=M(DAY) W "  ",M(DAY)
"RTN","FHADR6",44,0)
 I Y'?1N.N!(Y'>0)!(Y>999999999) W *7,!,"  Enter an amount greater than 0 but less than 999999999" G E1
"RTN","FHADR6",45,0)
 S M(DAY)=Y
"RTN","FHADR6",46,0)
E2 W !!,"Change # of Total Diets for ",WK," from ",$S(TM(DAY):TM(DAY),1:""),"  to: " R Y:DTIME I '$T!(Y["^") S ANS="^" Q
"RTN","FHADR6",47,0)
 I Y="",TM(DAY) S Y=TM(DAY) W "  ",TM(DAY)
"RTN","FHADR6",48,0)
 I Y'?1N.N!(Y'>0)!(Y>9999999999) W *7,!,"  Enter an amount greater than 0 but less than 9999999999" G E2
"RTN","FHADR6",49,0)
 S TM(DAY)=Y
"RTN","FHADR6",50,0)
 S $P(^FH(117,DC(DAY),1),"^",26,27)=M(DAY)_"^"_TM(DAY)
"RTN","FHADR6",51,0)
 Q
"RTN","FHADR6",52,0)
MSG W *7,!,"  Error - Illegal Character or Repeated Day." G OK1
"RTN","FHADR6",53,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR6",54,0)
EN2 ; Print the % Modified Diet and Number of Patients
"RTN","FHADR6",55,0)
 K M,N,TD,TM S (TOT,TQ)=0 F K=1:1:4 S (M(K),TD(K),TM(K))=""
"RTN","FHADR6",56,0)
 D:$Y'<(LIN-7) HDR^FHADRPT,HDR2^FHADR3A
"RTN","FHADR6",57,0)
 W !!!!,"MODIFIED DIET SUMMARY"
"RTN","FHADR6",58,0)
 W !!?35,"1st Qtr",?55,"2nd Qtr",?75,"3rd Qtr",?95,"4th Qtr",?115,"YTD Avg",!
"RTN","FHADR6",59,0)
P1 ; Build List of dates and add the Modified Diets for the seven days
"RTN","FHADR6",60,0)
 F QR=1:1:4 S QTR=QR,PRE=FHYR_"0"_QTR_"00" D
"RTN","FHADR6",61,0)
 .S TIM=$P($G(^FH(117.3,PRE,1)),"^",12) Q:'TIM
"RTN","FHADR6",62,0)
 .K DC S D1=TIM\1 F L=1:1:7 S DC(L)=D1,X1=D1,X2=1 D C^%DTC S D1=X
"RTN","FHADR6",63,0)
 .F K=1:1:7 S R=$G(^FH(117,DC(K),1)),N=$P(R,"^",26,27) I N'="" D
"RTN","FHADR6",64,0)
 ..Q:'$P(N,"^",1)  S M(QTR)=M(QTR)+$P(N,"^",1)
"RTN","FHADR6",65,0)
 ..I '$P(N,"^",2) D
"RTN","FHADR6",66,0)
 ...F LP=21:1:25 S $P(N,"^",2)=$P(N,"^",2)+$P(R,"^",LP)
"RTN","FHADR6",67,0)
 ...S $P(^FH(117,DC(K),1),"^",27)=$P(N,"^",2)
"RTN","FHADR6",68,0)
 ...Q
"RTN","FHADR6",69,0)
 ..Q:'$P(N,"^",2)  S TM(QTR)=TM(QTR)+$P(N,"^",2)
"RTN","FHADR6",70,0)
 ..S TD(QTR)=TD(QTR)+1
"RTN","FHADR6",71,0)
 ..Q
"RTN","FHADR6",72,0)
 .S:TD(QTR)'="" TQ=TQ+1
"RTN","FHADR6",73,0)
 .Q
"RTN","FHADR6",74,0)
 W !,"Week Average Modified Diet",?35 F QTR=1:1:4 S X=$S(+TM(QTR)'<1:M(QTR)/TM(QTR)*100,1:""),TOT=TOT+X W $S(X:$J(X,7,1),1:$J("",7))_$J("",13)
"RTN","FHADR6",75,0)
 W $S(TQ:$J(TOT/TQ,7,1),1:$J("",7))
"RTN","FHADR6",76,0)
 K LP,M,N,R,TD,TM Q
"RTN","FHADR61")
0^19^B3744047
"RTN","FHADR61",1,0)
FHADR61 ; HISC/NCA - Nutritive Analysis Average ;12/29/93  13:54
"RTN","FHADR61",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR61",3,0)
EN1 ; Enter/Edit Nutritive Analysis Average of one wk reg menu
"RTN","FHADR61",4,0)
 D YR^FHADR1 G:'PRE KIL
"RTN","FHADR61",5,0)
 S OLD=$P($G(^FH(117.3,PRE,3)),"^",2),Y=OLD X ^DD("DD") S OLD=Y
"RTN","FHADR61",6,0)
D1 S %DT="AEPX",%DT("A")="Enter Date Nutritive Analysis was taken: " S:OLD'="" %DT("B")=OLD W ! D ^%DT S:$D(DTOUT) X="^" G KIL:U[X,D1:Y<1 S SDT=+Y
"RTN","FHADR61",7,0)
 I SDT'<DT W *7,!?29,"  [Must Start before Today!] " G D1
"RTN","FHADR61",8,0)
 S YR=$E(SDT,1,3),S1=$E(SDT,4,5),QTR=$S(S1<4:2,S1<7:3,S1<10:4,1:1) S:QTR=1 YR=YR+1
"RTN","FHADR61",9,0)
 I YR'=$E(PRE,1,3) W *7,!?29,"  [Date Is Not Within the Fiscal Year!] " G D1
"RTN","FHADR61",10,0)
 S $P(^FH(117.3,PRE,3),"^",2)=SDT
"RTN","FHADR61",11,0)
 K DIC,DIE S DIE="^FH(117.3,",DA=PRE,DR="41:46"
"RTN","FHADR61",12,0)
 D ^DIE K DA,DIC,DIE,DR S OLD=PRE
"RTN","FHADR61",13,0)
SET ; Set all three quarters with the Nutritive Analysis Data
"RTN","FHADR61",14,0)
 F QTR=2:1:4 S PRE=$E(OLD,1,4)_QTR_"00",$P(^FH(117.3,PRE,3),"^",2,8)=$P($G(^FH(117.3,OLD,3)),"^",2,8)
"RTN","FHADR61",15,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR61",16,0)
EN2 ; Print the Nutritive Analysis Average of one wk reg menu
"RTN","FHADR61",17,0)
 D HDR
"RTN","FHADR61",18,0)
 S PRE=FHYR_"0000",X1=""
"RTN","FHADR61",19,0)
 F L1=PRE:0 S L1=$O(^FH(117.3,L1)) Q:L1<1!($E(L1,1,3)'=$E(PRE,1,3))  S X=$P($G(^FH(117.3,L1,3)),"^",2,8) S:"^^^^^^"'[X X1=X
"RTN","FHADR61",20,0)
 I X1'="" D
"RTN","FHADR61",21,0)
 .S DTP=$P(X1,"^",1) D DTP^FH
"RTN","FHADR61",22,0)
 .W !?100,"Date Taken: ",DTP,!!
"RTN","FHADR61",23,0)
 .S TIT="Calories^%CHO^%PRO^%FAT^Mg CHOL^Mg Na"
"RTN","FHADR61",24,0)
 .W ?30 F L2=1:1:6 W $P(TIT,"^",L2)_":",$J($P(X1,"^",L2+1),5),"  "
"RTN","FHADR61",25,0)
 .Q
"RTN","FHADR61",26,0)
 Q
"RTN","FHADR61",27,0)
HDR ; Print Heading for Nutritive Analysis
"RTN","FHADR61",28,0)
 D:$Y'<(LIN-6) HDR^FHADRPT,HDR2^FHADR3A
"RTN","FHADR61",29,0)
 W !!!,"Nutritive Analysis 7 Days Average Regular Menu",!
"RTN","FHADR61",30,0)
 Q
"RTN","FHADR7")
0^20^B12469313
"RTN","FHADR7",1,0)
FHADR7 ; HISC/NCA - Staffing Yearly Average ;1/5/94  14:44 
"RTN","FHADR7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR7",3,0)
EN1 ; Enter/Edit Staffing Data
"RTN","FHADR7",4,0)
 D QR^FHADR1 G:'PRE KIL S FHYR=$E(PRE,1,3) D Q2^FHADRPT
"RTN","FHADR7",5,0)
 G:'SDT!('EDT) KIL
"RTN","FHADR7",6,0)
 F I=1:1:6 S S(I)=0
"RTN","FHADR7",7,0)
 S D1=SDT,ND=0 F L1=0:0 D N2 S X1=D1,X2=1 D C^%DTC Q:X>EDT  S D1=X
"RTN","FHADR7",8,0)
 F L=1:1:6 S S(L)=$S(ND:S(L)/ND,1:""),S(L)=+$J(S(L),0,1)
"RTN","FHADR7",9,0)
 K DIC,DIE S DIE="^FH(117.3,",DA=PRE
"RTN","FHADR7",10,0)
 S DR="27//^S X=S(1);28//^S X=S(2);29//^S X=S(3);30//^S X=S(4);31//^S X=S(5);31.6//^S X=S(6)"
"RTN","FHADR7",11,0)
 L +^FH(117.3,PRE,1):0 I '$T W !?5,"Another user is editing this entry." G KIL
"RTN","FHADR7",12,0)
 D ^DIE L -^FH(117.3,PRE,1) K DA,DIE,DR
"RTN","FHADR7",13,0)
 S (P1,X1)=$E(PRE,1,4)_"100",X2=-356 D C^%DTC S OLD=$E(X,1,4)_"400"
"RTN","FHADR7",14,0)
 S PRE=P1 I "^^^"[$P($G(^FH(117.3,P1,1)),"^",14,17) D S1 S OLD=PRE D SET S PRE=P1
"RTN","FHADR7",15,0)
 W ! K DIR S DIR(0)="YAO",DIR("A")="Change the number of Specialty Staffing? ",DIR("B")="NO" D ^DIR I $D(DIRUT)!($D(DIROUT)) G KIL
"RTN","FHADR7",16,0)
 G:'Y KIL
"RTN","FHADR7",17,0)
 K DIE S DIE="^FH(117.3,",DA=PRE,DR="47:50" D ^DIE K DA,DIE,DR S OLD=PRE D SET
"RTN","FHADR7",18,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR7",19,0)
SET ; Set three quarters with the number of Specialty Staffing
"RTN","FHADR7",20,0)
 F QTR=2:1:4 S PRE=$E(OLD,1,4)_QTR_"00" D S1
"RTN","FHADR7",21,0)
 Q
"RTN","FHADR7",22,0)
S1 Q:$G(^FH(117.3,OLD,1))=""
"RTN","FHADR7",23,0)
 S $P(^FH(117.3,PRE,1),"^",14,17)=$P($G(^FH(117.3,OLD,1)),"^",14,17) Q
"RTN","FHADR7",24,0)
N2 S Y0=$G(^FH(117.1,D1,0)) Q:Y0=""  S ND=ND+1
"RTN","FHADR7",25,0)
 F L=2:1:6 S S(L-1)=S(L-1)+$P(Y0,"^",L)
"RTN","FHADR7",26,0)
 S S(6)=S(6)+$P(Y0,"^",10)+$P(Y0,"^",11)
"RTN","FHADR7",27,0)
 Q
"RTN","FHADR7",28,0)
EN2 ; Print the Staffing Data
"RTN","FHADR7",29,0)
 D HDR
"RTN","FHADR7",30,0)
 K T1 S (TQ,TQ1)=0,Z1="" F I=1:1:8 S T1(I)=""
"RTN","FHADR7",31,0)
 F QR=1:1:4 S QTR=QR,PRE=FHYR_"0"_QTR_"00" D Q2^FHADRPT,Q11
"RTN","FHADR7",32,0)
 D Q2
"RTN","FHADR7",33,0)
 W !!!,"Specialty Staffing",!
"RTN","FHADR7",34,0)
 W !,"Staff Certified Diabetes Educators (CDE): ",$J($P(Z1,"^",1),2)
"RTN","FHADR7",35,0)
 W !,"Staff Certified in Nutrition Support: ",$J($P(Z1,"^",2),2)
"RTN","FHADR7",36,0)
 W !,"Staff Registered Clinical Dietetic Technicians: ",$J($P(Z1,"^",3),2)
"RTN","FHADR7",37,0)
 W !,"Staff With Clinical Privileges (Not Scope of Practice): ",$J($P(Z1,"^",4),2)
"RTN","FHADR7",38,0)
 K S,T1 Q
"RTN","FHADR7",39,0)
Q11 Q:'SDT!('EDT)
"RTN","FHADR7",40,0)
 S AV=0 F K=1:1:7 S S(K)=""
"RTN","FHADR7",41,0)
 S Y0=$G(^FH(117.3,PRE,1)) Q:Y0=""
"RTN","FHADR7",42,0)
 F I=1:1:5 S S(I)=$P(Y0,"^",I+5)
"RTN","FHADR7",43,0)
 S S(7)=$P(Y0,"^",13),Z=$P(Y0,"^",14,17) S:"^^^"'[Z Z1=Z
"RTN","FHADR7",44,0)
 S:S(1) TQ=TQ+1 S S(7)=S(7)/8,S(1)=S(1)+S(7)
"RTN","FHADR7",45,0)
 S S(6)=S(1)-S(2)-S(3)-S(4)-S(5)
"RTN","FHADR7",46,0)
 F L=1:1:6 S $P(T1(QTR),"^",L)=$P(T1(QTR),"^",L)+S(L),$P(T1(6),"^",L)=$P(T1(6),"^",L)+S(L)
"RTN","FHADR7",47,0)
 ; AMS is the Average meals served for four quarters.
"RTN","FHADR7",48,0)
 S:S(6) AV=$P(AMS,"^",QTR)/S(6) S:AV TQ1=TQ1+1 S $P(T1(5),"^",QTR)=$P(T1(5),"^",QTR)+AV
"RTN","FHADR7",49,0)
 Q
"RTN","FHADR7",50,0)
Q2 S K=0 F TIT="CLINICAL","ADMINISTRATIVE","SUPPORT STAFF","SUPERVISORY","ADJUSTED MEASURED" S K=K+1 D Q3
"RTN","FHADR7",51,0)
 W !,"TOTAL",?36 F I=1:1:4 W $S(+$P(T1(I),"^",1)'<1:$J($P(T1(I),"^",1),7,1),1:$J("",7))_$J("",13)
"RTN","FHADR7",52,0)
 W $S(TQ:$J($P(T1(6),"^",1)/TQ,7,1),1:$J("",7))
"RTN","FHADR7",53,0)
 W !!,"Average Daily",!,"Meals/Adj Measured FTEE"
"RTN","FHADR7",54,0)
 W ?36 F I=1:1:4 W $S($P(T1(5),"^",I):$J($P(T1(5),"^",I),7,2),1:$J("",7))_$J("",13) S $P(T1(5),"^",5)=$P(T1(5),"^",5)+$P(T1(5),"^",I)
"RTN","FHADR7",55,0)
 S $P(T1(5),"^",5)=$S(TQ1:$P(T1(5),"^",5)/TQ1,1:"") W $S($P(T1(5),"^",5)'="":$J($P(T1(5),"^",5),7,2),1:$J("",7))
"RTN","FHADR7",56,0)
 Q
"RTN","FHADR7",57,0)
Q3 W !,TIT,?36 F I=1:1:4 W $S(+$P(T1(I),"^",K+1)'<1:$J($P(T1(I),"^",K+1),7,1),1:$J("",7))_$J("",13)
"RTN","FHADR7",58,0)
 W $S(TQ:$J($P(T1(6),"^",K+1)/TQ,7,1),1:$J("",7))
"RTN","FHADR7",59,0)
 Q
"RTN","FHADR7",60,0)
HDR ; Print Heading for Staffing
"RTN","FHADR7",61,0)
 D:$Y'<(LIN-25) HDR^FHADRPT
"RTN","FHADR7",62,0)
 W !!!,"S E C T I O N  IV   S T A F F I N G"
"RTN","FHADR7",63,0)
 W !!!,"FTEE Summary",!?37,"1st Qtr",?57,"2nd Qtr",?77,"3rd Qtr",?97,"4th Qtr",?120,"YTD"
"RTN","FHADR7",64,0)
 W !,?38,"Total",?58,"Total",?78,"Total",?98,"Total",?116,"Average",! Q
"RTN","FHADR8")
0^21^B3989191
"RTN","FHADR8",1,0)
FHADR8 ; HISC/NCA/FAI- Dietetic Costs ;11/17/04  09:20
"RTN","FHADR8",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR8",3,0)
EN1 ; Enter/Edit Cost Diem
"RTN","FHADR8",4,0)
 K COST,N S COST="",NFLG=0 D QR^FHADR1 G:'PRE KIL
"RTN","FHADR8",5,0)
 S FHYR=$E(PRE,1,3) D Q2^FHADRPT K FHYR G:'SDT!('EDT) KIL
"RTN","FHADR8",6,0)
 S Z1=$P($G(^FH(117.3,PRE,"COST",0)),"^",3),Z2=$P($G(^FH(117.3,PRE,"COST",+Z1,0)),"^",1)
"RTN","FHADR8",7,0)
 I Z2="" S NFLG=1
"RTN","FHADR8",8,0)
E1 K DIR S DIR(0)="117.332,.01",DIR("A")="Enter Cumulative Total on the 830 Report of Costs" S:Z2 DIR("B")=Z2
"RTN","FHADR8",9,0)
 D ^DIR I X="@" W *7,"  REQUIRED FIELD!" G E1
"RTN","FHADR8",10,0)
 G:$D(DIRUT)!($D(DIROUT)) KIL
"RTN","FHADR8",11,0)
 S:X["$" X=$P(X,"$",2) S FHX=+X
"RTN","FHADR8",12,0)
 I Z1,Z2'=+FHX S $P(^FH(117.3,PRE,"COST",+Z1,0),"^",1)=+FHX K:$D(^FH(117.3,PRE,"COST","B",+Z2,+Z1)) ^FH(117.3,PRE,"COST","B",+Z2,+Z1) S ^FH(117.3,PRE,"COST","B",+FHX,+Z1)=""
"RTN","FHADR8",13,0)
 I 'NFLG G EDIT
"RTN","FHADR8",14,0)
 I '$D(^FH(117.3,PRE,"COST",0)) S ^FH(117.3,PRE,"COST",0)="^117.332^^"
"RTN","FHADR8",15,0)
 K DIC,DD,DO S DIC="^FH(117.3,PRE,""COST"",",DIC(0)="L",DLAYGO=117.3,DA(1)=PRE
"RTN","FHADR8",16,0)
 S DA=$P($G(^FH(117.3,PRE,"COST",0)),"^",3)+1 I $D(^FH(117.3,PRE,"COST",0)) S $P(^FH(117.3,PRE,"COST",0),"^",3)=DA
"RTN","FHADR8",17,0)
 S X=+FHX,DINUM=DA D FILE^DICN K DA,DIC,DLAYGO,DINUM S Z1=+Y
"RTN","FHADR8",18,0)
EDIT K DIC,DIE S DA(0)=PRE,DA=+Z1,DIE="^FH(117.3,"_DA(0)_",""COST"","
"RTN","FHADR8",19,0)
 S DR="1:7"
"RTN","FHADR8",20,0)
 L +^FH(117.3,PRE,"COST",0):0 I '$T W !?5,"Another user is editing this entry." G KIL
"RTN","FHADR8",21,0)
 D ^DIE L -^FH(117.3,PRE,"COST",0)
"RTN","FHADR8",22,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR81")
0^22^B15000317
"RTN","FHADR81",1,0)
FHADR81 ; HISC/NCA - Print Dietetic Costs ;11/25/94  14:11
"RTN","FHADR81",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR81",3,0)
EN2 ; Print Dietetic Cost
"RTN","FHADR81",4,0)
 K N,PER,T1,TO,TP S (TO,TP,TQ,TQ1,TQ2,TQ3,TQ4)="",TOT=0
"RTN","FHADR81",5,0)
 F I=1:1:5 S T1(I)=""
"RTN","FHADR81",6,0)
 F I=1:1:4 S PER(I)=""
"RTN","FHADR81",7,0)
 F QR=1:1:4 S QTR=QR,PRE=FHYR_"0"_QTR_"00" D Q2^FHADRPT,CALC
"RTN","FHADR81",8,0)
 D PRT K N,PER,T1,TO,TP Q
"RTN","FHADR81",9,0)
CALC ; Calculate the Avg Cost Per Meal and store it in T1(1)
"RTN","FHADR81",10,0)
 Q:'SDT!('EDT)
"RTN","FHADR81",11,0)
 S (BEG,CLOS,ISS,USG)=0
"RTN","FHADR81",12,0)
 S SDT=$E(SDT,1,5)_"00",EDT=$E(EDT,1,5)_"00"
"RTN","FHADR81",13,0)
 S X1=$P($G(^FH(117.2,SDT,0)),"^",2,7) F J=1:1:6 S BEG=BEG+$P(X1,"^",J)
"RTN","FHADR81",14,0)
 S X1=$P($G(^FH(117.2,EDT,0)),"^",14,19) F J=1:1:6 S CLOS=CLOS+$P(X1,"^",J)
"RTN","FHADR81",15,0)
 S SDT=$E(SDT,1,5)-1_"00"
"RTN","FHADR81",16,0)
 F LL=SDT:0 S LL=$O(^FH(117.2,LL)) Q:LL<1!(LL>EDT)  S X1=^(LL,0) D
"RTN","FHADR81",17,0)
 .S J1=7
"RTN","FHADR81",18,0)
 .F J=1:1:6 D
"RTN","FHADR81",19,0)
 ..S J1=J1+1
"RTN","FHADR81",20,0)
 ..S ISS=ISS+$P(X1,"^",J1)
"RTN","FHADR81",21,0)
 ..Q
"RTN","FHADR81",22,0)
 .Q
"RTN","FHADR81",23,0)
 S USG=(BEG+ISS)-CLOS
"RTN","FHADR81",24,0)
 S TQ=TQ+1
"RTN","FHADR81",25,0)
 S TOT=$P($G(^FH(117.3,PRE,1)),"^",5)
"RTN","FHADR81",26,0)
 S USG=$S(TOT:USG/TOT,1:"") S:USG TQ1=TQ1+1 S $P(T1(1),"^",QTR)=$P(T1(1),"^",QTR)+USG
"RTN","FHADR81",27,0)
 S $P(T1(1),"^",5)=$P(T1(1),"^",5)+USG
"RTN","FHADR81",28,0)
 ; Calculate the Cost Per Diem
"RTN","FHADR81",29,0)
 S ST=$P($G(^FH(117.3,PRE,"COST",0)),"^",3) Q:ST<1
"RTN","FHADR81",30,0)
 S ST1=$G(^FH(117.3,PRE,"COST",ST,0)) Q:ST1=""
"RTN","FHADR81",31,0)
 F I=1:1:10 S N(I)=""
"RTN","FHADR81",32,0)
 S K=0 F I=1:1:6,8,9 S K=K+1,N(I)=$P(ST1,"^",K)
"RTN","FHADR81",33,0)
 S TOT=$S(TOT:TOT/3,1:"")
"RTN","FHADR81",34,0)
 F M=1:1:6,8,9 S N(M)=$S(TOT:N(M)/TOT,1:"")
"RTN","FHADR81",35,0)
 S N(7)=N(2)-N(3)-N(4)-N(5)-N(6),N(10)=N(1)-N(2)-N(8)-N(9)
"RTN","FHADR81",36,0)
 F M=1:1:10 S N(M)=$J(N(M),0,2)
"RTN","FHADR81",37,0)
 S:N(1) TQ2=TQ2+1
"RTN","FHADR81",38,0)
 S:N(2) TQ3=TQ3+1
"RTN","FHADR81",39,0)
 ; Store data of each 4 Quarters in T1(2)-T1(5) and Total in TO.
"RTN","FHADR81",40,0)
 S K=0 F I=3:1:10 S K=K+1,$P(T1(QTR+1),"^",K)=$S(N(I):N(I),1:"")
"RTN","FHADR81",41,0)
 S $P(T1(QTR+1),"^",9)=$S(N(2):N(2),1:""),$P(T1(QTR+1),"^",10)=$S(N(1):N(1),1:"")
"RTN","FHADR81",42,0)
 F L=1:1:10 S $P(TO,"^",L)=$P(TO,"^",L)+$P(T1(QTR+1),"^",L)
"RTN","FHADR81",43,0)
 ; Calculate and store Percent Cost and after T1 Cost Strg.
"RTN","FHADR81",44,0)
 F I=6:1:10 S $P(PER(QTR),"^",I)=$S(+$P(T1(QTR+1),"^",10)'<1:$P(T1(QTR+1),"^",I)/$P(T1(QTR+1),"^",10)*100,1:"")
"RTN","FHADR81",45,0)
 Q
"RTN","FHADR81",46,0)
PRT ; Print Avg Cost Per Meal, Cost Per Diem, and the YTD
"RTN","FHADR81",47,0)
 S $P(T1(1),"^",5)=$S(TQ1:$P(T1(1),"^",5)/TQ1,1:"")
"RTN","FHADR81",48,0)
 D:$Y'<(LIN-9) HDR^FHADRPT D HD,HDR
"RTN","FHADR81",49,0)
 W ?35 F L=1:1:4 W " ",$S($P(T1(1),"^",L):$J($P(T1(1),"^",L),8,2),1:$J("",8))_$J("",11)
"RTN","FHADR81",50,0)
 W $S($P(T1(1),"^",5):$J($P(T1(1),"^",5),8,2),1:$J("",8))
"RTN","FHADR81",51,0)
 D HDR1
"RTN","FHADR81",52,0)
 F L=6:1:10 S $P(TP,"^",L)=$S(+$P(TO,"^",10)'<1:$P(TO,"^",L)/$P(TO,"^",10)*100,1:"")
"RTN","FHADR81",53,0)
 S K=1
"RTN","FHADR81",54,0)
 S I=2 F TIT="Tech (1019)","Dietitians (1018)","Wageboard (1008)","Clerical (1002)","Other" S TQ4=TQ2 D LOOP
"RTN","FHADR81",55,0)
 S X="Total Personal Cost" S K1=9 D LAST
"RTN","FHADR81",56,0)
 S I=0,K=6 F TIT="Subsistence (2610)","Operating Supp (2660)","All Other" S TQ4=TQ3 D LOOP
"RTN","FHADR81",57,0)
 S X="Total" S K1=10 D LAST
"RTN","FHADR81",58,0)
 Q
"RTN","FHADR81",59,0)
LAST ; Print the Last Line
"RTN","FHADR81",60,0)
 S TQ4=""
"RTN","FHADR81",61,0)
 W !,X,?29 F I=1:1:4 D
"RTN","FHADR81",62,0)
 .S X=$S($P(T1(I+1),"^",K1):$P(T1(I+1),"^",K1),1:"")
"RTN","FHADR81",63,0)
 .S:X TQ4=TQ4+1
"RTN","FHADR81",64,0)
 .W $S(X:$J(X,9,2),1:$J("",9))_" "
"RTN","FHADR81",65,0)
 .W $S($P(PER(I),"^",K1):$J($P(PER(I),"^",K1),8,2),1:$J("",8))_"  "
"RTN","FHADR81",66,0)
 .Q
"RTN","FHADR81",67,0)
 W ?110 S X=$S($P(TO,"^",K1):$P(TO,"^",K1),1:""),X=$J($S(TQ4:X/TQ4,1:""),0,2)
"RTN","FHADR81",68,0)
 W $S(X:$J(X,9,2),1:$J("",9))_" "
"RTN","FHADR81",69,0)
 W $S($P(TP,"^",K1):$J($P(TP,"^",K1),8,2),1:$J("",8))
"RTN","FHADR81",70,0)
 Q
"RTN","FHADR81",71,0)
LOOP ; Print title for each row along with the cost of the quarters.
"RTN","FHADR81",72,0)
 W ! W:I ?I W TIT,?29
"RTN","FHADR81",73,0)
 F J=1:1:4 D
"RTN","FHADR81",74,0)
 .S X=$S($P(T1(J+1),"^",K):$P(T1(J+1),"^",K),1:"")
"RTN","FHADR81",75,0)
 .W $S(X:$J(X,9,2),1:$J("",9))_" "
"RTN","FHADR81",76,0)
 .W $S($P(PER(J),"^",K):$J($P(PER(J),"^",K),8,2),1:$J("",8))_"  "
"RTN","FHADR81",77,0)
 .Q
"RTN","FHADR81",78,0)
 W ?110 S X=$S($P(TO,"^",K):$P(TO,"^",K),1:""),X=$J($S(TQ4:X/TQ4,1:""),0,2)
"RTN","FHADR81",79,0)
 W $S(X:$J(X,9,2),1:$J("",9))_" "
"RTN","FHADR81",80,0)
 W $S($P(TP,"^",K):$J($P(TP,"^",K),8,2),1:$J("",8))
"RTN","FHADR81",81,0)
 S K=K+1
"RTN","FHADR81",82,0)
 Q
"RTN","FHADR81",83,0)
HD W !!!!,"S E C T I O N  V   D I E T E T I C   C O S T" Q
"RTN","FHADR81",84,0)
HDR ; Print Cost Per Meal Hdg
"RTN","FHADR81",85,0)
 W !!!!,"COST PER MEAL"
"RTN","FHADR81",86,0)
 W ?37,"1st Qtr",?57,"2nd Qtr",?77,"3rd Qtr",?97,"4th Qtr",?120,"YTD"
"RTN","FHADR81",87,0)
 W !!,"Average Cost Per Meal"
"RTN","FHADR81",88,0)
 Q
"RTN","FHADR81",89,0)
HDR1 ; Print Cost Per Diem Hdg
"RTN","FHADR81",90,0)
 D:$Y'<(LIN-15) HDR^FHADRPT,HD
"RTN","FHADR81",91,0)
 W !!!!,"COST PER DIEM"
"RTN","FHADR81",92,0)
 W ?37,"1st Qtr",?57,"2nd Qtr",?77,"3rd Qtr",?97,"4th Qtr",?120,"YTD"
"RTN","FHADR81",93,0)
 W !,?34,"Cost",?41,"% Cost",?54,"Cost",?61,"% Cost",?74,"Cost",?81,"% Cost",?94,"Cost",?101,"% Cost",?112,"Avg Tot",?122,"% Cost"
"RTN","FHADR81",94,0)
 W !,"Personal Services" Q
"RTN","FHADR9")
0^23^B12552308
"RTN","FHADR9",1,0)
FHADR9 ; HISC/NCA - Dietetic Survey ;11/25/94  14:27
"RTN","FHADR9",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR9",3,0)
EN1 ; Enter/Edit Dietetic Survey
"RTN","FHADR9",4,0)
 D QR^FHADR1 G:'PRE KIL
"RTN","FHADR9",5,0)
F1 ; Select Survey Category
"RTN","FHADR9",6,0)
 S FHX3=0 K DIR S DIR(0)="SO^1:APPETIZING;2:FOODS PREFERRED;3:HOT ENOUGH;4:COLD ENOUGH;5:COURTEOUS;6:PREFERENCES DISCUSSED;7:TIMELINESS;8:ENOUGH TIME TO EAT;9:NUTRITIONAL INFO;10:OVERALL",DIR("A")="Select SURVEY CATEGORY"
"RTN","FHADR9",7,0)
 S DIR("?")="Select one of the questions on the Dietetic Survey."
"RTN","FHADR9",8,0)
 D ^DIR G:$D(DIRUT)!($D(DIROUT)) KIL S FHX1=+Y
"RTN","FHADR9",9,0)
 S FLDNUM=69+FHX1
"RTN","FHADR9",10,0)
 S TIT=$P($G(^DD(117.3,FLDNUM,0)),U,4)
"RTN","FHADR9",11,0)
 S TIT=$S(FHX1=1:"Q1AP",FHX1=2:"Q2FP",FHX1=3:"Q3HF",FHX1=4:"Q4CF",FHX1=5:"Q5CR",FHX1=6:"Q6PD",FHX1=7:"Q7TI",FHX1=8:"Q8ET",FHX1=9:"Q9NI",1:"Q10V")
"RTN","FHADR9",12,0)
 I '$D(^FH(117.3,PRE,TIT,0)) D CREAT
"RTN","FHADR9",13,0)
F2 ; Select Service
"RTN","FHADR9",14,0)
 K DIR S DIR(0)="SO^1:GM&S;2:NHCU;3:PSYCH;4:DOM;5:SCI;6:OTHER",DIR("A")="Select SERVICE",DIR("?")="Enter the Service you want to enter or edit."
"RTN","FHADR9",15,0)
 D ^DIR G:$D(DIRUT)!($D(DIROUT)) KIL S FHX2=+Y
"RTN","FHADR9",16,0)
 I 'FHX3 S FHX3=$P($G(^FH(117.3,PRE,TIT,0)),"^",3) Q:'FHX3
"RTN","FHADR9",17,0)
 S OLD=$P($G(^FH(117.3,PRE,TIT,FHX3,0)),"^",FHX2+1)
"RTN","FHADR9",18,0)
 G RTG
"RTN","FHADR9",19,0)
CREAT ; Create the first entry
"RTN","FHADR9",20,0)
 ;S ^FH(117.3,PRE,TIT,0)=$S(FHX1=1:"^117.358^^",FHX1=2:"^117.359^^",FHX1=3:"^117.31^^",FHX1=4:"^117.361^^",FHX1=5:"^117.362^^",FHX1=6:"^117.363^^",FHX1=7:"^117.364^^",FHX1=8:"^117.365^^",1:"^117.366^^")
"RTN","FHADR9",21,0)
 ;S ^FH(117.3,PRE,TIT,0)=$S(FHX1=1:"^117.37^^",FHX1=2:"^117.371^^",FHX1=3:"^117.372^^",FHX1=4:"^117.373^^",FHX1=5:"^117.374^^",FHX1=6:"^117.375^^",FHX1=7:"^117.376^^",FHX1=8:"^117.377^^",FHX1=8:"^117.378^^",1:"^117.379^^")
"RTN","FHADR9",22,0)
 ;S ^FH(117.3,PRE,TIT,0)=$P($G(^DD(117.3,FLDNUM,0)),U,2)
"RTN","FHADR9",23,0)
 ;S DA=$P(^FH(117.3,PRE,TIT,0),"^",3)+1,$P(^FH(117.3,PRE,TIT,0),"^",3)=DA
"RTN","FHADR9",24,0)
 K DIC,DD,DO S DIC="^FH(117.3,PRE,TIT,",DIC(0)="L",DLAYGO=117.3,DA(1)=PRE
"RTN","FHADR9",25,0)
 S (X,DINUM)=1 D FILE^DICN
"RTN","FHADR9",26,0)
 S FHX3=+Y K DA,DIC,DLAYGO,DINUM Q
"RTN","FHADR9",27,0)
RTG ; Read in Rating String
"RTN","FHADR9",28,0)
 W ! K DIR S DIR(0)="FO^2:35",DIR("A")="Enter Rating String" S:OLD'="" DIR("B")=OLD S DIR("?")="^D HEL^FHADR9"
"RTN","FHADR9",29,0)
 D ^DIR I X="@" S X="" G R1
"RTN","FHADR9",30,0)
 G:$D(DIRUT)!($D(DIROUT)) KIL
"RTN","FHADR9",31,0)
 D C0 I '$D(X) G RTG
"RTN","FHADR9",32,0)
R1 S $P(^FH(117.3,PRE,TIT,FHX3,0),"^",FHX2+1)=X
"RTN","FHADR9",33,0)
F3 W ! K DIR S DIR(0)="YA",DIR("A")="Enter More Rating String for another service ? ",DIR("B")="YES" D ^DIR G:$D(DIRUT)!($D(DIROUT)) KIL K DIR
"RTN","FHADR9",34,0)
 G F2:Y,F1
"RTN","FHADR9",35,0)
C0 ; Check validity of the Rating String
"RTN","FHADR9",36,0)
 D TR^FH
"RTN","FHADR9",37,0)
 I $E(X,$L(X))=" " S X=$E(X,1,$L(X)-1)
"RTN","FHADR9",38,0)
 S X9="",(X6,X7)=0 F X4=1:1 Q:$P(X," ",X4,99)=""  S X1=$P(X," ",X4) D C1
"RTN","FHADR9",39,0)
 K:X6 X K X1,X2,X3,X4,X5,X6,X7,X8,X9 Q
"RTN","FHADR9",40,0)
C1 I X1="" W *7,!?5,"Two spaces found in input" S X6=1 Q
"RTN","FHADR9",41,0)
 S X5=$F("E V G F U",$E(X1,1)) I 'X5 W *7,!?5,"'",$E(X1,1),"' Not a Rating." S X6=1 Q
"RTN","FHADR9",42,0)
 F X8=1:1 Q:$E(X1,X8)'?1U
"RTN","FHADR9",43,0)
 I X8<2!(X8>2) W *7,!?5,"Illegal String Specification in ",X1 S X6=1 Q
"RTN","FHADR9",44,0)
 I $E(X1,X8,$L(X1))="" W *7,!?5,"No number surveyed for ",X1 S X6=1
"RTN","FHADR9",45,0)
 I $E(X1,X8,$L(X1))'?1.4N W *7,!?5,"Illegal entry in rating ",X1 S X6=1
"RTN","FHADR9",46,0)
 I $E(X1,X8,$L(X1))>9999 W *7,!?5,$E(X1,X8,$L(X1))," cannot be greater than 9999" S X6=1
"RTN","FHADR9",47,0)
 S X2=$E(X1,1)
"RTN","FHADR9",48,0)
 I X9[X2 W *7,!?5,X2," used more than once." S X6=1
"RTN","FHADR9",49,0)
 S X9=X9_" "_X2,X7=X7+1
"RTN","FHADR9",50,0)
 I X7>5 W *7,!?5,"There are only 5 ratings." S X6=1
"RTN","FHADR9",51,0)
 Q
"RTN","FHADR9",52,0)
HEL ; Help Prompt for Rating String
"RTN","FHADR9",53,0)
 W !!,"List the numbers surveyed by specifying which rating it belongs"
"RTN","FHADR9",54,0)
 W !,"to and separated by a single space.",!
"RTN","FHADR9",55,0)
 W !,"Example: E20 V40 G40 F3 U1",!
"RTN","FHADR9",56,0)
 W !,"  E = Excellent, V = Very Good, G = Good, F = Fair and U = Unacceptable",!
"RTN","FHADR9",57,0)
 W !,"Omit if none surveyed for a certain rating.",! Q
"RTN","FHADR9",58,0)
KIL G KILL^XUSCLEAN
"RTN","FHADR9A")
0^24^B10747285
"RTN","FHADR9A",1,0)
FHADR9A ; HISC/NCA,RTK - Dietetic Survey (cont.) ;1/10/94  16:10
"RTN","FHADR9A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADR9A",3,0)
EN2 ; Print the Dietetic Survey
"RTN","FHADR9A",4,0)
 D:$Y'<(LIN-16) HDR^FHADRPT
"RTN","FHADR9A",5,0)
 K T1,T2,TOT S TQ=0
"RTN","FHADR9A",6,0)
 F I=1:1:10 S (T1(I),T2(I),TOT(I))=""
"RTN","FHADR9A",7,0)
 F QR=1:1:4 S QTR=QR,PRE=FHYR_"0"_QTR_"00" D Q2^FHADRPT,Q11
"RTN","FHADR9A",8,0)
 G PRT
"RTN","FHADR9A",9,0)
Q11 Q:'SDT!('EDT)
"RTN","FHADR9A",10,0)
 F N=1:1:10 D DECODE
"RTN","FHADR9A",11,0)
 Q
"RTN","FHADR9A",12,0)
DECODE ; Decode each string rating
"RTN","FHADR9A",13,0)
 S (L1,S1,S2,S3)=""
"RTN","FHADR9A",14,0)
 S TLE=$S(N=1:"Q1AP",N=2:"Q2FP",N=3:"Q3HF",N=4:"Q4CF",N=5:"Q5CR",N=6:"Q6PD",N=7:"Q7TI",N=8:"Q8ET",N=9:"Q9NI",1:"Q10V")
"RTN","FHADR9A",15,0)
 S L1=$P($G(^FH(117.3,PRE,TLE,0)),"^",3) Q:L1<1
"RTN","FHADR9A",16,0)
 S SURV=$P($G(^FH(117.3,PRE,TLE,L1,0)),"^",2,7)
"RTN","FHADR9A",17,0)
 F LP=1:1:6 D
"RTN","FHADR9A",18,0)
 .S (CTR,VAL)=0,X=$P(SURV,"^",LP)
"RTN","FHADR9A",19,0)
 .F J=1:1 Q:$P(X," ",J)=""  D
"RTN","FHADR9A",20,0)
 ..S X1=$P(X," ",J),CHR=$E(X1,1),NUM=+$P(X1,CHR,2)
"RTN","FHADR9A",21,0)
 ..;S RTG=$S(CHR="V":5,CHR="G":4,CHR="A":3,CHR="F":2,1:1)
"RTN","FHADR9A",22,0)
 ..S RTG=$S(CHR="E":5,CHR="V":4,CHR="G":3,CHR="F":2,1:1)
"RTN","FHADR9A",23,0)
 ..S S3=S3+NUM,VAL=VAL+(NUM*RTG),CTR=CTR+NUM Q
"RTN","FHADR9A",24,0)
 .S S1=S1_VAL_","
"RTN","FHADR9A",25,0)
 .S S2=S2_CTR_"," Q
"RTN","FHADR9A",26,0)
 S $P(T1(N),"^",QTR)=S1,$P(T2(N),"^",QTR)=S2,$P(TOT(N),"^",QTR)=S3 Q
"RTN","FHADR9A",27,0)
PRT ; Print the Dietetic Survey
"RTN","FHADR9A",28,0)
 D HDR,HD1
"RTN","FHADR9A",29,0)
 F N=1:1:10 D LP
"RTN","FHADR9A",30,0)
 K CHR,CTR,FIN,I,J,L,L1,L2,LP,N,N1,NUM,QNAM,QR,RTG,S1,S2,S3,SUM,SURV,T1,T2,TOT,TIT,TLE,TQ,VAL,X,X1,X2 Q
"RTN","FHADR9A",31,0)
LP ; Loop to Print each row
"RTN","FHADR9A",32,0)
 I $Y'<(LIN-6) D HDR^FHADRPT,HDR,HD1
"RTN","FHADR9A",33,0)
 S QNAM=$S(N=1:"Appetizing",N=2:"Foods Preferred",N=3:"Hot Enough",N=4:"Cold Enough",N=5:"Courteous",N=6:"Preferences Discussed",N=7:"Timeliness",N=8:"Enough Time to Eat",N=9:"Nutritional Info",1:"Overall")
"RTN","FHADR9A",34,0)
 W !,QNAM,!
"RTN","FHADR9A",35,0)
 S (FTQR,FNRT,SUM)=0
"RTN","FHADR9A",36,0)
 F RR=1:1:4 S (TQR(RR),NRT(RR))=0
"RTN","FHADR9A",37,0)
 F N1=1:1:6 D
"RTN","FHADR9A",38,0)
 .S TIT=$S(N1=1:"GM&S",N1=2:"NHCU",N1=3:"PSYCH",N1=4:"DOM",N1=5:"SCI",1:"OTHER")
"RTN","FHADR9A",39,0)
 .W !,TIT,?23
"RTN","FHADR9A",40,0)
 .S (FIN,RTG,TQ)=0
"RTN","FHADR9A",41,0)
 .F QR=1:1:4 D
"RTN","FHADR9A",42,0)
 ..S X1=$P($G(T1(N)),"^",QR) S:$E(X1,$L(X1))="," X1=$E(X1,1,$L(X1)-1)
"RTN","FHADR9A",43,0)
 ..S X2=$P($G(T2(N)),"^",QR) S:$E(X2,$L(X2))="," X2=$E(X2,1,$L(X2)-1)
"RTN","FHADR9A",44,0)
 ..S NUM=$P(X1,",",N1),CTR=$P(X2,",",N1)
"RTN","FHADR9A",45,0)
 ..S X=$S(CTR:NUM/CTR,1:"")
"RTN","FHADR9A",46,0)
 ..W $J($S(CTR:CTR,1:""),5),$S(X:$J(X,5,2),1:$J("",5))_$J("",12)
"RTN","FHADR9A",47,0)
 ..S FIN=FIN+CTR,RTG=RTG+X,TQR(QR)=TQR(QR)+X
"RTN","FHADR9A",48,0)
 ..I CTR S TQ=TQ+1,NRT(QR)=NRT(QR)+1
"RTN","FHADR9A",49,0)
 ..Q
"RTN","FHADR9A",50,0)
 .W ?111,$J($S(FIN:FIN,1:""),5),$S(TQ:$J(RTG/TQ,5,2),1:$J("",5))
"RTN","FHADR9A",51,0)
 .S SUM=SUM+FIN
"RTN","FHADR9A",52,0)
 .Q
"RTN","FHADR9A",53,0)
 F RR=1:1:4 S FTQR=FTQR+TQR(RR),FNRT=FNRT+NRT(RR)
"RTN","FHADR9A",54,0)
 W !,"Total",?23 F L2=1:1:4 S X=$P($G(TOT(N)),"^",L2) W $J($S(X:X,1:""),5)_$S(NRT(L2):$J(TQR(L2)/NRT(L2),5,2),1:$J("",5))_$J("",12)
"RTN","FHADR9A",55,0)
 W ?111,$J($S(SUM:SUM,1:""),5),$S(FNRT:$J(FTQR/FNRT,5,2),1:$J("",5)),!
"RTN","FHADR9A",56,0)
 Q
"RTN","FHADR9A",57,0)
HDR ; Section Heading
"RTN","FHADR9A",58,0)
 W !!!!,"S E C T I O N  VI   P A T I E N T   S A T I S F A C T I O N" Q
"RTN","FHADR9A",59,0)
HD1 ; Print Heading for Overall Service
"RTN","FHADR9A",60,0)
 W !!!,"DIETETIC SURVEY",?25,"1st Qtr",?47,"2nd Qtr",?69,"3rd Qtr",?91,"4th Qtr",?113,"YTD Rtng"
"RTN","FHADR9A",61,0)
 W !?25,"Num Rtng",?47,"Num Rtng",?69,"Num Rtng",?91,"Num Rtng",?113,"ToT  Avg",! Q
"RTN","FHADRPT")
0^25^B5941727
"RTN","FHADRPT",1,0)
FHADRPT ; HISC/NCA - Print Dietetic Annual Report ;1/23/98  16:05
"RTN","FHADRPT",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADRPT",3,0)
EN1 ; Get the Station Data for Printing
"RTN","FHADRPT",4,0)
 D GET^FHADR1 G:Y<1 KIL
"RTN","FHADRPT",5,0)
 S FHX1=+Y,LS=$E(DT,1,3) W !
"RTN","FHADRPT",6,0)
Q0 K %DT S PRE="",FG=0,%DT="AEP",%DT("A")="Enter YR: "
"RTN","FHADRPT",7,0)
 D ^%DT S:$D(DTOUT) X="^" G KIL:U[X,Q0:Y<1
"RTN","FHADRPT",8,0)
 I $E(Y,1,3)>LS W *7,"  Do Not Enter Future Year." G Q0
"RTN","FHADRPT",9,0)
 I $E(Y,4,7)>0 W *7,"  Enter Year Only." G Q0
"RTN","FHADRPT",10,0)
 S Y=$E(Y,1,3)_"0000",PRE=Y,FG=1
"RTN","FHADRPT",11,0)
 S QTR=$E(PRE,5),YR=$E(PRE,2,3)
"RTN","FHADRPT",12,0)
L0 K IOP,%ZIS,ZTUCI,ZTRTN,ZTSAVE,ZTDESC
"RTN","FHADRPT",13,0)
 W !!,"The report requires a 132 column printer.",!
"RTN","FHADRPT",14,0)
 S %ZIS="QM",%ZIS("B")="",IOP="Q" W !! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHADRPT",15,0)
 I $D(IO("Q")) D  G KIL
"RTN","FHADRPT",16,0)
 .S ZTRTN="TSK^FHADRPT",ZTREQ="@",ZTSAVE("ZTREQ")=""
"RTN","FHADRPT",17,0)
 .S ZTSAVE("FG")="",ZTSAVE("FHX1")="",ZTSAVE("PRE")=""
"RTN","FHADRPT",18,0)
 .S ZTSAVE("QTR")="",ZTSAVE("YR")=""
"RTN","FHADRPT",19,0)
 .S ZTDESC="Print the Dietetic Annual Report"
"RTN","FHADRPT",20,0)
 .D ^%ZTLOAD
"RTN","FHADRPT",21,0)
 .Q
"RTN","FHADRPT",22,0)
 E  D  G L0
"RTN","FHADRPT",23,0)
 .D ^%ZISC
"RTN","FHADRPT",24,0)
 .W !?5,"This is a very long and time consuming"
"RTN","FHADRPT",25,0)
 .W !?5,"report, it must be queued to print.",*7
"RTN","FHADRPT",26,0)
 .Q
"RTN","FHADRPT",27,0)
 G KIL
"RTN","FHADRPT",28,0)
TSK ; Tasking the Report
"RTN","FHADRPT",29,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP,ZTSK G KIL
"RTN","FHADRPT",30,0)
Q1 ; Display the Report
"RTN","FHADRPT",31,0)
 S PG=0,LIN=IOSL-6
"RTN","FHADRPT",32,0)
 S FHYR=$E(PRE,1,3) D NOW^%DTC S DTP=% D DTP^FH S HEAD=DTP
"RTN","FHADRPT",33,0)
 D EN2^FHADR1A,EN2^FHADR3A,EN2^FHADR2,Q1^FHADR4,Q0^FHADR5,EN2^FHADR6
"RTN","FHADRPT",34,0)
 D EN2^FHADR61,EN2^FHADR7,EN2^FHADR81,EN2^FHADR9A,EN2^FHADR10
"RTN","FHADRPT",35,0)
 Q
"RTN","FHADRPT",36,0)
Q2 ; Find the Starting Month and Ending Month of Each Quarter
"RTN","FHADRPT",37,0)
 S (EDT,MTH,SDT)=""
"RTN","FHADRPT",38,0)
 S MTH=$P("October^January January^April April^July July^October"," ",QTR)
"RTN","FHADRPT",39,0)
 I MTH="" W *7," Error! Wrong Qtr" Q
"RTN","FHADRPT",40,0)
L1 K %DT S X=$P(MTH,"^",1)_" "_(1700+$E(FHYR,1,3)) D ^%DT I QTR=1 S X1=+Y,X2=-365 D C^%DTC S X=$E(X,1,6)_"1" S SDT=+X G L2
"RTN","FHADRPT",41,0)
 S SDT=Y+1
"RTN","FHADRPT",42,0)
L2 I SDT>DT S SDT="" Q
"RTN","FHADRPT",43,0)
 S X=$P(MTH,"^",2)_" "_(1700+$E(FHYR,1,3)) D ^%DT S X1=Y,X2=-1 D C^%DTC S EDT=X
"RTN","FHADRPT",44,0)
 I EDT>DT S EDT="" Q
"RTN","FHADRPT",45,0)
 S SDT=SDT\1,EDT=EDT\1
"RTN","FHADRPT",46,0)
 Q
"RTN","FHADRPT",47,0)
HDR ; Report Header
"RTN","FHADRPT",48,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHADRPT",49,0)
 W !?13,HEAD,?50,"D I E T E T I C   R E P O R T",?116,"Page ",PG
"RTN","FHADRPT",50,0)
 W !!?105 S Q1=$S(FG:"1 - 4",1:"") W Q1," Qtr   FY ",$E(FHYR,2,3) Q
"RTN","FHADRPT",51,0)
KIL G KILL^XUSCLEAN
"RTN","FHADRSY")
0^26^B1641515
"RTN","FHADRSY",1,0)
FHADRSY ; HISC/NCA - Purge Old Annual Dietetic Data ;4/25/95  12:47
"RTN","FHADRSY",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHADRSY",3,0)
EN1 ; Purge Data Older than three years
"RTN","FHADRSY",4,0)
 S X="T-1095",%DT="X" D ^%DT S EDT=$E(+Y,1,3)_"0500"
"RTN","FHADRSY",5,0)
 S FLG=0 F QTR=1:1:4 S PRE=$E(EDT,1,4)_QTR_"00" I $D(^FH(117.3,"B",PRE,PRE)) S FLG=1 Q
"RTN","FHADRSY",6,0)
 I 'FLG W !!,"Already Purged to ",$E(EDT,2,3) G KIL
"RTN","FHADRSY",7,0)
D1 W !!,"Purge To The Year: ",$E(EDT,2,3)," // " R X:DTIME G:'$T!(X="^") KIL G:X="" D2 S %DT="E" D ^%DT G:U[X!$D(DTOUT) KIL G:Y<1 D1
"RTN","FHADRSY",8,0)
 S Y=$E(+Y,1,3)_"0000" I Y>EDT W *7,!!,"CANNOT PURGE TO YEAR THAT IS GREATER THAN THE DEFAULT!" G D1
"RTN","FHADRSY",9,0)
 S EDT=+Y
"RTN","FHADRSY",10,0)
D2 F PRE=0:0 S PRE=$O(^FH(117.3,PRE)) Q:PRE'<EDT  D K0
"RTN","FHADRSY",11,0)
 W !!,"... Done"
"RTN","FHADRSY",12,0)
KIL G KILL^XUSCLEAN
"RTN","FHADRSY",13,0)
K0 K ^FH(117.3,PRE),^FH(117.3,"B",PRE,PRE) Q
"RTN","FHASC")
0^27^B2021650
"RTN","FHASC",1,0)
FHASC ; HISC/REL/NCA - Clinical Management ;2/13/95  14:12 
"RTN","FHASC",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASC",3,0)
EN1 ; Enter/Edit Nutrition Classifications
"RTN","FHASC",4,0)
 S (DIC,DIE)="^FH(115.3,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=115.3 W ! D ^DIC K DIC,DLAYGO G KIL:"^"[X!$D(DTOUT),EN1:Y<1
"RTN","FHASC",5,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=115.3 D ^DIE,KIL G EN1
"RTN","FHASC",6,0)
EN2 ; List Nutrition Classifications
"RTN","FHASC",7,0)
 W ! S L=0,DIC="^FH(115.3,",FLDS=".01,99",BY=".01"
"RTN","FHASC",8,0)
 S (FR,TO)="",DHD="NUTRITION CLASSIFICATIONS" D EN1^DIP,RSET Q
"RTN","FHASC",9,0)
EN9 ; Enter/Edit Nutrition Plans
"RTN","FHASC",10,0)
 S (DIC,DIE)="^FH(115.5,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=115.5 W ! D ^DIC K DIC,DLAYGO G KIL:"^"[X!$D(DTOUT),EN9:Y<1
"RTN","FHASC",11,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=115.5 D ^DIE,KIL G EN9
"RTN","FHASC",12,0)
EN10 ; List Nutrition Plans
"RTN","FHASC",13,0)
 W ! S L=0,DIC="^FH(115.5,",FLDS=".01",BY=".01"
"RTN","FHASC",14,0)
 S (FR,TO)="",DHD="NUTRITION PLANS" D EN1^DIP,RSET Q
"RTN","FHASC",15,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHASC",16,0)
KIL G KILL^XUSCLEAN
"RTN","FHASE")
0^28^B19984975
"RTN","FHASE",1,0)
FHASE ; HISC/REL/NCA - Dietetic Encounters ;7/22/96  13:17
"RTN","FHASE",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASE",3,0)
EN1 ; Enter/Edit Encounter Types
"RTN","FHASE",4,0)
 S (DIC,DIE)="^FH(115.6,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=115.6 W ! D ^DIC K DIC,DLAYGO G KIL:"^"[X!$D(DTOUT),EN1:Y<1
"RTN","FHASE",5,0)
 S DA=+Y,DR=$S(DA=1:2,DA=2:"2;3",1:".01;1:4;10;5:6;I X'=""Y"" S Y=99;7;8;99") S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=115.6 D ^DIE,KIL G EN1
"RTN","FHASE",6,0)
EN2 ; List Encounter Types
"RTN","FHASE",7,0)
 W ! S L=0,DIC="^FH(115.6,",FLDS=".01,2,3,4,10,5,6,7,8,99",BY=".01"
"RTN","FHASE",8,0)
 S (FR,TO)="",DHD="ENCOUNTER TYPES" D EN1^DIP,RSET Q
"RTN","FHASE",9,0)
EN3 ; Enter Dietetic Encounter
"RTN","FHASE",10,0)
 ; Check for multidivisional site
"RTN","FHASE",11,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D EN3^FHMASE Q
"RTN","FHASE",12,0)
 W ! K DIR S FHN=0,DIR(0)="YAO",DIR("A")="Enter a NEW Encounter (Y/N)? " D ^DIR G:$D(DIROUT)!($D(DIRUT)) KIL K DIR,DIROUT,DIRUT
"RTN","FHASE",13,0)
 I 'Y S FHN=1 G EN4
"RTN","FHASE",14,0)
EN30 ; Enter/Edit a Encounter
"RTN","FHASE",15,0)
 D EN31 G:Y<1 KIL G EN3
"RTN","FHASE",16,0)
EN31 ; Enter a Encounter
"RTN","FHASE",17,0)
 K %DT S FHN=0,%DT="AETPX",%DT("A")="DATE/TIME OF ENCOUNTER: ",%DT("B")="TODAY",%DT(0)="-NOW" W ! D ^%DT K %DT S:$D(DTOUT) Y=0 Q:Y<1  S DTE=Y
"RTN","FHASE",18,0)
 K DIC,DD,DO S DIC="^FHEN(",DIC(0)="L",DIC("DR")="1////^S X=DTE",DLAYGO=115.7
"RTN","FHASE",19,0)
A L +^FHEN(0) S DA=$P(^FHEN(0),"^",3)+1 I $D(^FHEN(DA)) S $P(^FHEN(0),"^",3)=DA L -^FHEN(0) G A
"RTN","FHASE",20,0)
 S (X,DINUM)=DA D FILE^DICN L -^FHEN(0) S ASE=+Y,FHX4="" K DIC,DLAYGO,DINUM
"RTN","FHASE",21,0)
 D EDIT Q
"RTN","FHASE",22,0)
EN4 ; Process Edit Encounter
"RTN","FHASE",23,0)
 W ! K ^TMP($J,"ECTR"),%DT S %DT="AEPX",%DT("A")="Enter Date of Encounter you want to edit: " D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 KIL S X1=Y,(TIM,X1)=X1-.0001,(EDT,X2)=Y\1+.3,CTR=0
"RTN","FHASE",24,0)
A0 W !! K DIR S DIR(0)="SO^C:CLINICIAN;P:PATIENT",DIR("A")="CHOOSE CLINICIAN or PATIENT" D ^DIR K DIR G:$D(DIROUT)!($D(DIRUT)) KIL I Y?1"P" D PAT G:'DFN KIL D PR G:Y<1 KIL D ASK G KIL:Y<1,EN4
"RTN","FHASE",25,0)
A1 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="Select CLINICIAN: " W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),A1:Y<1 S NAM=+Y D CLIN,PR G:Y<1 KIL D ASK G KIL:Y<1,EN4
"RTN","FHASE",26,0)
PR W ! S K1="" F CTR=0:0 S CTR=$O(^TMP($J,"ECTR",CTR)) Q:CTR<1  S X=$G(^(CTR,0)),K1=CTR W !,CTR,"  " S Y=$P(X,"^",2) X ^DD("DD") W Y,"  ",$P(X,"^",3) K Y
"RTN","FHASE",27,0)
 I 'K1 W !?5,"No encounter on file on this date" S Y=0 Q
"RTN","FHASE",28,0)
 W !!,"Select number you want: " R X:DTIME I '$T!("^"[X) S Y=0 Q
"RTN","FHASE",29,0)
 I X'?1.N!(X<1)!(X>K1) W *7,!!,"Select only a number no greater than ",K1," or press ""^"" or a return to exit." G PR
"RTN","FHASE",30,0)
 S ASE=$P($G(^TMP($J,"ECTR",+X,0)),"^",1),FHX4=$G(^FHEN(ASE,0))
"RTN","FHASE",31,0)
 S FHCLK=$P($G(^TMP($J,"ECTR",+X,0)),"^",4) W !
"RTN","FHASE",32,0)
EDIT N FHX1 S DA=ASE K DIC,DIE S DIE="^FHEN(",DR="[FHASE]" D ^DIE K DIC,DIE,DR
"RTN","FHASE",33,0)
 S DA=ASE,X=^FHEN(DA,0)
"RTN","FHASE",34,0)
 I '$P(X,"^",3)!('$P(X,"^",4)) S DIK="^FHEN(" D ^DIK W *7,!,"<encounter deleted>" K DIK,DA
"RTN","FHASE",35,0)
 S Y=1 Q
"RTN","FHASE",36,0)
PAT ; Get Patient
"RTN","FHASE",37,0)
 S ALL=1 D ^FHDPA Q:'DFN
"RTN","FHASE",38,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"Patient has expired." G PAT
"RTN","FHASE",39,0)
 I '$D(^FHEN("AP",DFN)) W !!,"No Encounter on file for this patient." G PAT
"RTN","FHASE",40,0)
 F DTE=TIM:0 S DTE=$O(^FHEN("AP",DFN,DTE)) Q:DTE<1!(DTE>EDT)  F ASE=0:0 S ASE=$O(^FHEN("AP",DFN,DTE,ASE)) Q:ASE<1  S Y=$P($G(^FHEN(ASE,0)),"^",4) I Y>2 D
"RTN","FHASE",41,0)
 .S CTR=CTR+1,^TMP($J,"ECTR",CTR,0)=ASE_"^"_DTE_"^"_$P($G(^FH(115.6,+Y,0)),"^",1)_"^"_$P($G(^FHEN(ASE,0)),"^",13) Q
"RTN","FHASE",42,0)
 Q
"RTN","FHASE",43,0)
CLIN ; Get Clinician
"RTN","FHASE",44,0)
 S X1=$O(^FHEN("AT",X1)) Q:X1<1!(X1>X2)
"RTN","FHASE",45,0)
 S ASE=0
"RTN","FHASE",46,0)
R1 S ASE=$O(^FHEN("AT",X1,ASE)) G:ASE="" CLIN
"RTN","FHASE",47,0)
 S Y=$G(^FHEN(ASE,0)),E1=$P(Y,"^",3) I $P(Y,"^",4)>2,E1,E1=NAM S CTR=CTR+1,^TMP($J,"ECTR",CTR,0)=ASE_"^"_$P(Y,"^",2)_"^"_$P($G(^FH(115.6,+$P(Y,"^",4),0)),"^",1)_"^"_$P(Y,"^",13),DTE=$P(Y,"^",2)
"RTN","FHASE",48,0)
 G R1
"RTN","FHASE",49,0)
ASK R !!,"Is this correct? Y// ",YN:DTIME I '$T!(YN["^") S Y=0 Q
"RTN","FHASE",50,0)
 S:YN="" YN="Y" S X=YN D TR^FH S YN=X
"RTN","FHASE",51,0)
 I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G ASK
"RTN","FHASE",52,0)
 Q:YN?1"Y".E
"RTN","FHASE",53,0)
 I FHCLK'=DUZ W !!,"You can ONLY DELETE an encounter that is entered by you.",! G EDIT
"RTN","FHASE",54,0)
E5 R !,"Want to delete encounter? N// ",YN:DTIME I '$T!(YN["^") S Y=0 Q
"RTN","FHASE",55,0)
 S:YN="" YN="N" S X=YN D TR^FH S YN=X
"RTN","FHASE",56,0)
 I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G E5
"RTN","FHASE",57,0)
 Q:YN?1"N".E
"RTN","FHASE",58,0)
 S DIK="^FHEN(",DA=ASE D ^DIK W *7,!,"<encounter deleted>" K DA,DIK S Y=1 Q
"RTN","FHASE",59,0)
CNT S FHX3=FHX3+$P($G(^FHEN(ASE,"P",0)),"^",4)
"RTN","FHASE",60,0)
 S ST="" F LP=0:0 S LP=$O(^FHEN(ASE,"P",LP)) Q:LP<1  S ST=$G(^(LP,0)) I $P(ST,"^",3)'<1 S FHX3=FHX3+$P(ST,"^",3)
"RTN","FHASE",61,0)
 Q
"RTN","FHASE",62,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHASE",63,0)
KIL K ^TMP($J,"ECTR") G KILL^XUSCLEAN
"RTN","FHASE1")
0^29^B6349078
"RTN","FHASE1",1,0)
FHASE1 ; HISC/REL/NCA - Encounter Statistics ;3/6/95  11:57
"RTN","FHASE1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASE1",3,0)
 ; Check for multidivisional site
"RTN","FHASE1",4,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D ^FHMASE1 Q
"RTN","FHASE1",5,0)
 D DT G:U[X KIL G A0
"RTN","FHASE1",6,0)
IND ; List Encounters for a clinician
"RTN","FHASE1",7,0)
 ; Check for multidivisional site
"RTN","FHASE1",8,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D IND^FHMASE1 Q
"RTN","FHASE1",9,0)
 D DT G:U[X KIL S FHX1=DUZ,FHX2=0 G F1
"RTN","FHASE1",10,0)
A0 R !!,"Statistics for ALL Clinicians? Y// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G A0
"RTN","FHASE1",11,0)
 I X?1"Y".E G F0
"RTN","FHASE1",12,0)
A1 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="Select CLINICIAN: " W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),A1:Y<1 S FHX1=+Y,FHX2=1 G F2
"RTN","FHASE1",13,0)
F0 R !!,"Break-down by Clinician? Y// ",X:DTIME G:'$T!(X=U) KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G F0
"RTN","FHASE1",14,0)
 S FHX1=X?1"Y".E-1,FHX2=0
"RTN","FHASE1",15,0)
F1 I FHX1'<0 R !!,"List Individual Patient Encounters? N// ",X:DTIME G:'$T!(X=U) KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G F1
"RTN","FHASE1",16,0)
 S:FHX1'<0 FHX2=X?1"Y".E
"RTN","FHASE1",17,0)
F2 W !!,"The report requires a 132 column printer.",!
"RTN","FHASE1",18,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASE1",19,0)
 I $D(IO("Q")) S FHPGM="Q1^FHASE1A",FHLST="EDT^SDT^FHX1^FHX2" D EN2^FH G KIL
"RTN","FHASE1",20,0)
 U IO D Q1^FHASE1A D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHASE1",21,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHASE1",22,0)
DT ; Get From/To Dates
"RTN","FHASE1",23,0)
D1 S %DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D1 S SDT=+Y
"RTN","FHASE1",24,0)
 I SDT>DT W *7,"  [Cannot Start after Today!] " G D1
"RTN","FHASE1",25,0)
D2 S %DT="AEPX",%DT("A")=" Ending Date: " D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D2 S EDT=+Y
"RTN","FHASE1",26,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHASE1",27,0)
 I EDT>DT W *7,"  [Must Not enter date greater than Today!] " G D1
"RTN","FHASE1",28,0)
 Q
"RTN","FHASE1A")
0^30^B19883224
"RTN","FHASE1A",1,0)
FHASE1A ; HISC/REL/NCA - Encounter Statistics (cont.) ;9/6/94  13:13 
"RTN","FHASE1A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASE1A",3,0)
Q1 ; Calculate the Encounters
"RTN","FHASE1A",4,0)
 K ^TMP($J) S X1=SDT\1-.0001,X2=EDT\1+.3
"RTN","FHASE1A",5,0)
 S TIT=";"_$P(^DD(115.6,10,0),"^",3)
"RTN","FHASE1A",6,0)
R1 S X1=$O(^FHEN("AT",X1)) I X1<1!(X1>X2) G P1
"RTN","FHASE1A",7,0)
 S E1=0
"RTN","FHASE1A",8,0)
R2 S E1=$O(^FHEN("AT",X1,E1)) G:E1="" R1
"RTN","FHASE1A",9,0)
 S Y=$G(^FHEN(E1,0))
"RTN","FHASE1A",10,0)
 S D1=$P(Y,"^",3),D2=$P(Y,"^",4) G:'D2 R2 I FHX1>0,D1'=FHX1 G R2
"RTN","FHASE1A",11,0)
 S D6=$P(Y,"^",7),D3=$P(Y,"^",8),D9=$P(Y,"^",9),D5=$P(Y,"^",11) D CNT
"RTN","FHASE1A",12,0)
 S D2=$P($G(^FH(115.6,D2,0)),"^",1,2) G:"^"[D2 R2
"RTN","FHASE1A",13,0)
 S Z1=$P(D2,"^",2),D2=$P(D2,"^",1)
"RTN","FHASE1A",14,0)
 S D8=$F(TIT,";"_Z1_":") G:D8<0 R2
"RTN","FHASE1A",15,0)
 S:D6="F" D2=D2_"~F"
"RTN","FHASE1A",16,0)
 S S1=$G(^TMP($J,0,D8,D2)) D UPD S ^TMP($J,0,D8,D2)=S1
"RTN","FHASE1A",17,0)
 G R2:FHX1<0,R2:'D1 I '$D(^TMP($J,D1)) S NAM=$P(^VA(200,D1,0),"^",1),^TMP($J,$E(NAM,1,30),D1)=""
"RTN","FHASE1A",18,0)
 S S1=$G(^TMP($J,D1,D8,D2)) D UPD S ^TMP($J,D1,D8,D2)=S1 G:'FHX2 R2
"RTN","FHASE1A",19,0)
 S (DTP,W1)=$P(Y,"^",2)\1 D DTP^FH I '$D(^TMP($J,D1,D8,D2,W1)) S ^TMP($J,D1,D8,D2,W1)=DTP,^(W1,0)=0
"RTN","FHASE1A",20,0)
 I '$D(^FHEN(E1,"P")) G R4
"RTN","FHASE1A",21,0)
 F DFN=0:0 S DFN=$O(^FHEN(E1,"P",DFN)) Q:DFN<1  D R3
"RTN","FHASE1A",22,0)
 G R2
"RTN","FHASE1A",23,0)
R3 S L=^TMP($J,D1,D8,D2,W1,0)+1,^(0)=L
"RTN","FHASE1A",24,0)
 S ^TMP($J,D1,D8,D2,W1,L)=DFN Q
"RTN","FHASE1A",25,0)
R4 S DFN="^"_D5 D R3 G R2
"RTN","FHASE1A",26,0)
CNT S C(8)=$P(Y,"^",10),(C(1),C(2),C(3),C(4),C(5),C(6),C(7))=0
"RTN","FHASE1A",27,0)
 F DFN=0:0 S DFN=$O(^FHEN(E1,"P",DFN)) Q:DFN<1  S X=^(DFN,0) D C1
"RTN","FHASE1A",28,0)
 S C(7)=C(8)-C(1)-C(2)-C(4)-C(5) S:C(7)<1 C(7)=0
"RTN","FHASE1A",29,0)
 I D9'="I" S TM=C(1)+C(4)+C(7) I TM S TM=D3/TM,C(3)=TM*C(1),C(6)=TM*C(4),C(3)=$J(C(3),0,1),C(6)=$J(C(6),0,1) Q
"RTN","FHASE1A",30,0)
 Q
"RTN","FHASE1A",31,0)
C1 S Z=$P(X,"^",2) G:Z<1 C2 S Z=$P($G(^SC(+Z,0)),"^",3) G:Z'="W" C2
"RTN","FHASE1A",32,0)
 S C(1)=C(1)+1,C(2)=C(2)+$P(X,"^",3) S:D9="I" C(3)=C(3)+D3 Q
"RTN","FHASE1A",33,0)
C2 S C(4)=C(4)+1,C(5)=C(5)+$P(X,"^",3) S:D9="I" C(6)=C(6)+D3 Q
"RTN","FHASE1A",34,0)
UPD S $P(S1,"^",1)=$P(S1,"^",1)+1,$P(S1,"^",2)=$P(S1,"^",2)+D3
"RTN","FHASE1A",35,0)
 F K=1:1:8 I C(K) S $P(S1,"^",K+2)=$P(S1,"^",K+2)+C(K)
"RTN","FHASE1A",36,0)
 Q
"RTN","FHASE1A",37,0)
P1 S DTP=SDT\1 D DTP^FH S DTE=DTP_" to " S DTP=EDT\1 D DTP^FH S DTE=DTE_DTP,PG=0 D HEAD I FHX1>0 G D0
"RTN","FHASE1A",38,0)
 S D8="",CT=0 F K=1:1:11 S (I(K),J(K))=0
"RTN","FHASE1A",39,0)
 F KK=0:0 S D8=$O(^TMP($J,0,D8)) Q:D8=""  S CT=CT+1 D:CT'=1 STOT W ! D PR S NX="" F K=0:0 S NX=$O(^TMP($J,0,D8,NX)) Q:NX=""  S X1=$P(NX,"~",1)_$S($P(NX,"~",2)="F":"  (F)",1:"") Q:X1=""  S S1=^TMP($J,0,D8,NX) D PP
"RTN","FHASE1A",40,0)
 D STOT W ! S X="T O T A L" D TOT W ! Q:FHX1<0  D HEAD
"RTN","FHASE1A",41,0)
D0 S NX=":" F K=0:0 S NX=$O(^TMP($J,NX)) Q:NX=""  F D1=0:0 S D1=$O(^TMP($J,NX,D1)) Q:D1<1  D P2
"RTN","FHASE1A",42,0)
 W ! Q
"RTN","FHASE1A",43,0)
P2 D:$Y>(IOSL-6) HEAD W !!,NX S D8="",CT=0 F K=1:1:11 S (I(K),J(K))=0
"RTN","FHASE1A",44,0)
 F L=0:0 S D8=$O(^TMP($J,D1,D8)) Q:D8=""  S CT=CT+1 D:CT'=1 STOT W ! D PR S D2="" F L1=0:0 S D2=$O(^TMP($J,D1,D8,D2)) Q:D2=""  S S1=^(D2),X1=$P(D2,"~",1)_$S($P(D2,"~",2)="F":"  (F)",1:"") D PP I FHX2 D P3
"RTN","FHASE1A",45,0)
 D STOT W ! S X="TOTAL ENCOUNTERS" D TOT Q
"RTN","FHASE1A",46,0)
P3 S DTP=""
"RTN","FHASE1A",47,0)
P4 S DTP=$O(^TMP($J,D1,D8,D2,DTP)) Q:DTP=""  S S1=^(DTP),W1=0
"RTN","FHASE1A",48,0)
P5 S W1=$O(^TMP($J,D1,D8,D2,DTP,W1)) G:W1="" P4 S DFN=^(W1) G:DFN<1 P6
"RTN","FHASE1A",49,0)
 S Y=$G(^DPT(DFN,0)) G:Y="" P5 D PID^FHDPA
"RTN","FHASE1A",50,0)
 W !?7,S1,?17,BID,?26,$P(Y,"^",1) G P5
"RTN","FHASE1A",51,0)
P6 W !?7,S1,?17,$P(DFN,"^",2) G P5
"RTN","FHASE1A",52,0)
PP D:$Y>(IOSL-6) HEAD W !?5,X1,?47,$J($P(S1,"^",1),6,0) S I(1)=I(1)+$P(S1,"^",1),J(1)=J(1)+$P(S1,"^",1)
"RTN","FHASE1A",53,0)
 F K=1:1:6 S Z=$P(S1,"^",K+2),I(K+2)=I(K+2)+Z,J(K+2)=J(K+2)+Z W $S(K=3!(K=6):$S(Z:$J(Z,8,1),1:$J("",8)),1:$J($S(Z:Z,1:""),6))
"RTN","FHASE1A",54,0)
 S Z=$P(S1,"^",9),I(9)=I(9)+$S(Z'<1:Z,1:0),J(9)=J(9)+$S(Z'<1:Z,1:0) W ?97,$J($S(Z'<1:Z,1:""),6)
"RTN","FHASE1A",55,0)
 I Z S Z=$P(S1,"^",2)-$P(S1,"^",5)-$P(S1,"^",8),I(10)=I(10)+$S(Z'<1:Z,1:0),J(10)=J(10)+$S(Z'<1:Z,1:0)
"RTN","FHASE1A",56,0)
 W $S(Z'<1:$J(Z,8,1),1:$J("",8))
"RTN","FHASE1A",57,0)
 S Z=$P(S1,"^",10),I(11)=I(11)+Z,J(11)=J(11)+Z W ?113,$J($S(Z'<1:Z,1:""),6)
"RTN","FHASE1A",58,0)
 I $P(S1,"^",2) W $J($P(S1,"^",2),8,1) S I(2)=I(2)+$P(S1,"^",2),J(2)=J(2)+$P(S1,"^",2)
"RTN","FHASE1A",59,0)
 Q
"RTN","FHASE1A",60,0)
PR S X=$P($E(TIT,D8,999),";",1)
"RTN","FHASE1A",61,0)
 D:$Y>(IOSL-6) HEAD W !?3,X Q
"RTN","FHASE1A",62,0)
STOT W !?5,"Subtotal",?47,$J(J(1),6) F K=1:1:6 W $S(K=3!(K=6):$S(J(K+2):$J(J(K+2),8,1),1:$J("",8)),1:$J($S(J(K+2):J(K+2),1:""),6))
"RTN","FHASE1A",63,0)
 W ?97,$S(J(9):$J(J(9),6),1:$J("",6)),$S(J(10):$J(J(10),8,1),1:$J("",8))
"RTN","FHASE1A",64,0)
 W ?113,$S(J(11):$J(J(11),6),1:$J("",6)),$S(J(2):$J(J(2),8,1),1:$J("",8))
"RTN","FHASE1A",65,0)
 F K=1:1:11 S J(K)=0
"RTN","FHASE1A",66,0)
 Q
"RTN","FHASE1A",67,0)
TOT W !?3,X,?47,$J(I(1),6) F K=1:1:6 W $S(K=3!(K=6):$S(I(K+2):$J(I(K+2),8,1),1:$J("",8)),1:$J($S(I(K+2):I(K+2),1:""),6))
"RTN","FHASE1A",68,0)
 W ?97,$S(I(9):$J(I(9),6),1:$J("",6)),$S(I(10):$J(I(10),8,1),1:$J("",8))
"RTN","FHASE1A",69,0)
 W ?113,$S(I(11):$J(I(11),6),1:$J("",6)),$S(I(2):$J(I(2),8,1),1:$J("",8)) Q
"RTN","FHASE1A",70,0)
HEAD ;W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?30,"D I E T E T I C   E N C O U N T E R   S T A T I S T I C S",?120,"Page ",PG
"RTN","FHASE1A",71,0)
 W @IOF S PG=PG+1 W !?30,"D I E T E T I C   E N C O U N T E R   S T A T I S T I C S",?120,"Page ",PG
"RTN","FHASE1A",72,0)
 W !!?(114-$L(DTE)\2),DTE,!?47,"Number      Inpatients         Outpatients            Others           Total"
"RTN","FHASE1A",73,0)
 W !?56,"Pat   Col   Units   Pat   Col   Units",?98,"Persn   Units   Persn   Units",! Q
"RTN","FHASE2")
0^31^B7099237
"RTN","FHASE2",1,0)
FHASE2 ; HISC/REL - Patient Encounter Inquiry ;4/27/93  10:08
"RTN","FHASE2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASE2",3,0)
 S ALL=1 D ^FHDPA G:'DFN KIL
"RTN","FHASE2",4,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"  [ Patient has expired. ]"
"RTN","FHASE2",5,0)
 I '$D(^FHEN("AP",DFN)) W !!,"No Encounters on file for this patient." G FHASE2
"RTN","FHASE2",6,0)
 K %DT S %DT="AEPX",%DT("A")="Display Encounters Since: ",%DT(0)="-NOW" W ! D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 KIL S DTE=Y
"RTN","FHASE2",7,0)
 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASE2",8,0)
 I $D(IO("Q")) S FHPGM="Q1^FHASE2",FHLST="DFN^PID^DTE" D EN2^FH G FHASE2
"RTN","FHASE2",9,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G FHASE2
"RTN","FHASE2",10,0)
Q1 ; Display Encounters
"RTN","FHASE2",11,0)
 S Y=$G(^DPT(DFN,0)),NAM=$P(Y,"^",1),N1=0,QT="^" D NOW^%DTC S DT=%\1,PG=0,N1=0,QT=""
"RTN","FHASE2",12,0)
 S DTP=DTE D DTP^FH S STRT=DTP D HDR
"RTN","FHASE2",13,0)
 F DTE=DTE-.000001:0 S DTE=$O(^FHEN("AP",DFN,DTE)) Q:DTE<1  F ASN=0:0 S ASN=$O(^FHEN("AP",DFN,DTE,ASN)) Q:ASN<1  D:(IOSL-$Y)<6 HDR G:QT="^" QT D LST S N1=N1+1
"RTN","FHASE2",14,0)
 I 'N1 W !!,"No Encounters recorded since ",STRT
"RTN","FHASE2",15,0)
QT W ! Q
"RTN","FHASE2",16,0)
LST S X0=$G(^FHEN(ASN,0)),X1=$G(^FHEN(ASN,"P",DFN,0))
"RTN","FHASE2",17,0)
 S DTP=$P(X0,"^",2) D DTP^FH W !!,$E(DTP,1,9),"  " S Y=$P(X0,"^",4),Y=$P($G(^FH(115.6,+Y,0)),"^",1) W Y I $P(X0,"^",7)="F" W " (FU)"
"RTN","FHASE2",18,0)
 S Y=$P(X0,"^",3),Y=$P($G(^VA(200,+Y,0)),"^",1) W !,"Clinician: ",Y
"RTN","FHASE2",19,0)
 S Y=$P(X0,"^",5) I Y S Y=$P($G(^SC(+Y,0)),"^",1) I Y'="" W ?40,"Location: ",Y
"RTN","FHASE2",20,0)
 S Y=$P(X0,"^",11) I Y'="" W !?11,Y
"RTN","FHASE2",21,0)
 S Y=$P(X0,"^",9) W !?11,$S(Y="G":"Group",1:"Individual") S Y=$P(X1,"^",3) I Y W ", ",Y," collateral" W:Y>1 "s"
"RTN","FHASE2",22,0)
 S Y=$P(X1,"^",4) W:Y'="" !?11,Y
"RTN","FHASE2",23,0)
 S DTP=$P(X0,"^",14) I DTP D DTP^FH W !,"Entered  : ",DTP S Y=$P(X0,"^",13),Y=$P($G(^VA(200,+Y,0)),"^",1) W:Y'="" "  By: ",Y
"RTN","FHASE2",24,0)
 S DTP=$P(X0,"^",15) I DTP D DTP^FH W !,"Reviewed : ",DTP S Y=$P(X0,"^",16),Y=$P($G(^VA(200,+Y,0)),"^",1) W:Y'="" "  By: ",Y
"RTN","FHASE2",25,0)
 Q
"RTN","FHASE2",26,0)
HDR ; Print Header
"RTN","FHASE2",27,0)
 S QT="" G:IOST'?1"C".E H1
"RTN","FHASE2",28,0)
 I PG R !!,"Press RETURN to continue  ",QT:DTIME S:'$T QT="^" Q:QT="^"
"RTN","FHASE2",29,0)
H1 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S DTP=DT D DTP^FH S DTP=$E(DTP,1,9),PG=PG+1
"RTN","FHASE2",30,0)
 W !,DTP,?13,"P A T I E N T   D I E T E T I C   E N C O U N T E R S",?73,"Page ",PG
"RTN","FHASE2",31,0)
 W !!,PID,?18,NAM Q
"RTN","FHASE2",32,0)
KIL G KILL^XUSCLEAN
"RTN","FHASE3")
0^32^B2086750
"RTN","FHASE3",1,0)
FHASE3 ; HISC/REL - Encounter Utilities ;5/7/92  08:46
"RTN","FHASE3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASE3",3,0)
FIL ; File encounter - DTE date/time   S1 enc. ident   S2 I/F   S3 comment
"RTN","FHASE3",4,0)
 S S1=$O(^FH(115.6,"AX",S1,"")) Q:S1<1
"RTN","FHASE3",5,0)
 K DIC,DD,DO S DIC="^FHEN(",DIC(0)="L",DLAYGO=115.7
"RTN","FHASE3",6,0)
F1 L +^FHEN(0) S DA=$P(^FHEN(0),"^",3)+1 I $D(^FHEN(DA)) S $P(^FHEN(0),"^",3)=DA L -^FHEN(0) G F1
"RTN","FHASE3",7,0)
 ;
"RTN","FHASE3",8,0)
 S (X,FHDA,DINUM)=DA D FILE^DICN L -^FHEN(0) S ASE=+Y K DIC,DLAYGO,DINUM
"RTN","FHASE3",9,0)
 S DTE=+DTE,S4=$S(S2="I":3,1:4),S4=$S($D(^FH(115.6,S1,0)):$P(^(0),"^",S4),1:0)
"RTN","FHASE3",10,0)
 S S5=$G(^DPT(DFN,.1)) S:S5'="" S5=$O(^DIC(42,"B",S5,0)) S S5=$G(^DIC(42,+S5,44))
"RTN","FHASE3",11,0)
 S ^FHEN(ASE,0)=ASE_"^"_DTE_"^"_DUZ_"^"_S1_"^^^"_S2_"^"_S4_"^I^1^^^"_DUZ_"^"_NOW
"RTN","FHASE3",12,0)
 S ^FHEN(ASE,"P",0)="^115.701P^"_DFN_"^1"
"RTN","FHASE3",13,0)
 S ^FHEN(ASE,"P",DFN,0)=DFN_"^"_S5_"^^"_S3
"RTN","FHASE3",14,0)
 S ^FHEN(ASE,"P","B",DFN,DFN)="",^FHEN("AP",DFN,DTE,ASE)="",^FHEN("AT",DTE,ASE)=""
"RTN","FHASE3",15,0)
 ;
"RTN","FHASE3",16,0)
 ; IF MULTIDIVISIONAL SITE STORE COMMUNICATIONS OFFICE CODE
"RTN","FHASE3",17,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D
"RTN","FHASE3",18,0)
 .S DA=FHDA,DIE="^FHEN(",DR="11////^S X=FHCOMM"
"RTN","FHASE3",19,0)
 .D ^DIE
"RTN","FHASE3",20,0)
 ;
"RTN","FHASE3",21,0)
 K ASE,DTE,S1,S2,S3,S4,S5 Q
"RTN","FHASM1")
0^33^B18758963
"RTN","FHASM1",1,0)
FHASM1 ; HISC/REL - Nutrition Assessment ;1/25/00  12:08
"RTN","FHASM1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM1",3,0)
 W @IOF,!!?20,"N U T R I T I O N   A S S E S S M E N T",!! S X="T",%DT="X" D ^%DT S DT=+Y
"RTN","FHASM1",4,0)
F1 ; Select Patient
"RTN","FHASM1",5,0)
 S ALL=1 D ^FHDPA G PAT:X="*",KIL:'DFN S Y(0)=^DPT(DFN,0),NAM=$P(Y(0),U,1),SEX=$P(Y(0),U,2),AGE=$P(Y(0),U,3)
"RTN","FHASM1",6,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"  [ Patient has expired. ]" G KIL
"RTN","FHASM1",7,0)
 I AGE'="" S AGE=$E(DT,1,3)-$E(AGE,1,3)-($E(DT,4,7)<$E(AGE,4,7))
"RTN","FHASM1",8,0)
 I SEX=""!(AGE="") G P1
"RTN","FHASM1",9,0)
F2 S X="NOW",%DT="XT" D ^%DT S ADT=Y
"RTN","FHASM1",10,0)
F3 I DFN,$D(^FHPT(FHDFN,"N",9999999-ADT)) S ADT=$$FMADD^XLFDT(ADT,,,1) G F3
"RTN","FHASM1",11,0)
 S FHAP=$G(^FH(119.9,1,3)),FHU=$P(FHAP,"^",1)
"RTN","FHASM1",12,0)
 S (TSF,TSFP,SCA,SCAP,ACIR,ACIRP,CCIR,CCIRP,BFAMA,BFAMAP,BMI,BMIP,X1,X2)=""
"RTN","FHASM1",13,0)
 G:'DFN F4 S XX=$O(^FHPT(FHDFN,"N",0)) G:XX="" F4 S XX=$G(^(XX,0)),HGT=$P(XX,"^",4),HGP=$P(XX,"^",5)
"RTN","FHASM1",14,0)
 I HGP'="S" S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:""),X2=+$J(HGT*2.54,0,0)_"CM",X1=$S(FHU'="M":X1,1:X2)
"RTN","FHASM1",15,0)
F4 ; If Multidivisional site Select Communications Office
"RTN","FHASM1",16,0)
 S FHCOMM="" I $P($G(^FH(119.9,1,0)),U,20)'="N" D  I FHCOMM="" Q
"RTN","FHASM1",17,0)
 .K DIC S DIC="^FH(119.73," S DIC(0)="AEMQ" D ^DIC
"RTN","FHASM1",18,0)
 .I Y=-1 Q
"RTN","FHASM1",19,0)
 .S FHCOMM=+Y
"RTN","FHASM1",20,0)
 ;
"RTN","FHASM1",21,0)
F4A S (KNEE,EXT)="" W !!,"Height: " W:X1'="" X1,"// " R X:DTIME G:'$T!(X["^") KIL I X="",X1'="" S Y0=$J(HGT,0,0),H1=Y0 G F5
"RTN","FHASM1",22,0)
 D TR,HGT I Y<1 D HGP G F4A
"RTN","FHASM1",23,0)
 S HGT=Y,H1=Y0,HGP=Y1
"RTN","FHASM1",24,0)
F5 R !!,"Weight: ",X:DTIME S:X="" X="?" G:'$T!(X["^") KIL
"RTN","FHASM1",25,0)
 S:X="a" X="A"
"RTN","FHASM1",26,0)
 I X="A",AGE>39 D A^FHASM2D G:Y<1 F5 S WGT=Y,WGP="A" G F6
"RTN","FHASM1",27,0)
 D WGT I Y<1 D WGP W:AGE>39 !,"You may enter an A to calculate weight anthropometrically." G F5
"RTN","FHASM1",28,0)
 S WGT=Y,WGP=Y1
"RTN","FHASM1",29,0)
F6 S %DT="AEP",%DT("A")="Date Weight Taken: ",%DT("B")="TODAY",%DT(0)="-T" W ! D ^%DT K %DT G KIL:X["^"!$D(DTOUT),F6:Y<1
"RTN","FHASM1",30,0)
 S DWGT=Y
"RTN","FHASM1",31,0)
F7 R !!,"Usual Weight: ",X:DTIME G:'$T!(X["^") KIL I X="" S UWGT="" G F8
"RTN","FHASM1",32,0)
 D WGT S UWGT=Y I Y<1 D WGP G F7
"RTN","FHASM1",33,0)
F8 K %DT,A1,K,X,Y G ^FHASM2
"RTN","FHASM1",34,0)
HGT ; Convert Height to inches
"RTN","FHASM1",35,0)
 S A1=+X I 'A1 S Y=-1 Q
"RTN","FHASM1",36,0)
 S X=$P(X,A1,2,99) S:$E(X,1)=" " X=$E(X,2,99) I "SMK"[$E(X,1) S Y=A1 S:FHU="M" Y=Y/2.54 G H1
"RTN","FHASM1",37,0)
 I """I"[$E(X,1) S Y=A1 G H1
"RTN","FHASM1",38,0)
 I $E(X,1)="C" S Y=A1/2.54 G H1
"RTN","FHASM1",39,0)
 I "'F"'[$E(X,1) S Y=-1 G H2
"RTN","FHASM1",40,0)
 S Y=A1*12 F K=1:1 Q:$E(X,K)?.N
"RTN","FHASM1",41,0)
 I $E(X,K,99)="" G H1
"RTN","FHASM1",42,0)
 S A1=+$E(X,K,99),X=$P(X,A1,2,99) S:$E(X,1)=" " X=$E(X,2,99)
"RTN","FHASM1",43,0)
 I """I"'[$E(X,1) S Y=-1 G H2
"RTN","FHASM1",44,0)
 S Y=Y+A1
"RTN","FHASM1",45,0)
H1 I X["K" D K^FHASM2D
"RTN","FHASM1",46,0)
H2 I Y<12!(Y>96) S Y=-1
"RTN","FHASM1",47,0)
 S:Y>0 Y0=+$J(Y,0,0),Y=+$J(Y,0,1) S Y1=$S(X["K":"K",X["S":"S",1:"") Q
"RTN","FHASM1",48,0)
HGP ; Height Help
"RTN","FHASM1",49,0)
 W !!,"Enter height as: 6' 2"" or 74"" or 74IN or 6FT 2 IN or 30CM"
"RTN","FHASM1",50,0)
 W !,"Add an S if height is stated rather than measured."
"RTN","FHASM1",51,0)
 W !,"Add a K if value is a Knee Height measurement."
"RTN","FHASM1",52,0)
 W !,"Height should be between 12"" and 96"" (8')." Q
"RTN","FHASM1",53,0)
WGT ; Convert Weight to lbs.
"RTN","FHASM1",54,0)
 D TR S A1=+X I 'A1 S Y=-1 Q
"RTN","FHASM1",55,0)
 S X=$P(X,A1,2,99) S:$E(X,1)=" " X=$E(X,2,99) I "SM"[$E(X,1) S Y=A1 S:FHU="M" Y=Y*2.2 G W1
"RTN","FHASM1",56,0)
 I $E(X,1)="O" S Y=A1/16 G W1
"RTN","FHASM1",57,0)
 I $E(X,1)="G" S Y=A1/1000*2.2 G W1
"RTN","FHASM1",58,0)
 I $E(X,1)="K" S Y=A1*2.2 G W1
"RTN","FHASM1",59,0)
 I "L#"'[$E(X,1) S Y=-1 G W1
"RTN","FHASM1",60,0)
 S Y=A1 F K=1:1 Q:$E(X,K)?.N
"RTN","FHASM1",61,0)
 I $E(X,K,99)="" G W1
"RTN","FHASM1",62,0)
 S A1=+$E(X,K,99),X=$P(X,A1,2,99) S:$E(X,1)=" " X=$E(X,2,99)
"RTN","FHASM1",63,0)
 I $E(X,1)'="O" S Y=-1 G W1
"RTN","FHASM1",64,0)
 S Y=A1/16+Y
"RTN","FHASM1",65,0)
W1 I Y<0!(Y>750) S Y=-1
"RTN","FHASM1",66,0)
 S:Y>0 Y0=+$J(Y,0,0),Y=+$J(Y,0,1) S Y1="" S:X["S" Y1="S" Q
"RTN","FHASM1",67,0)
WGP ; Weight help
"RTN","FHASM1",68,0)
 W !!,"Enter Weight as 150# or 150# 6OZ or 800G or 70KG"
"RTN","FHASM1",69,0)
 W !,"Add an S if weight is stated rather than measured."
"RTN","FHASM1",70,0)
 W !,"Enter an A to determine weight anthropometrically."
"RTN","FHASM1",71,0)
 W !,"Weight should be between 0 Lbs and 750 Lbs." Q
"RTN","FHASM1",72,0)
TR ; Translate Lower to Upper Case
"RTN","FHASM1",73,0)
 D TR^FH
"RTN","FHASM1",74,0)
 Q
"RTN","FHASM1",75,0)
KIL ; Final variable kill
"RTN","FHASM1",76,0)
 G KILL^XUSCLEAN
"RTN","FHASM1",77,0)
PAT S (FHDFN,DFN,SEX,AGE,PID)="" R !!,"Enter Patient's Name: ",NAM:DTIME G:'$T!(NAM["^") KIL
"RTN","FHASM1",78,0)
 I NAM["?"!(NAM'?.ANP)!(NAM="") W *7,!?5,"Enter Patient's Name to be printed on the report." G PAT
"RTN","FHASM1",79,0)
P1 I SEX="" R !,"Sex: ",SEX:DTIME S:SEX="" SEX="?" G:'$T!(SEX["^") KIL S X=SEX D TR S SEX=X I $P("FEMALE",SEX,1)'="",$P("MALE",SEX,1)'="" W *7,"  Enter M or F" S SEX="" G P1
"RTN","FHASM1",80,0)
 S SEX=$E(SEX,1)
"RTN","FHASM1",81,0)
P2 I AGE="" R !,"Age: ",AGE:DTIME S:AGE="" AGE="?" G:'$T!(AGE["^") KIL S X=AGE D TR S AGE=X
"RTN","FHASM1",82,0)
 S:AGE["M" AGE=+$J($P(AGE,"M",1)/12,0,2) I AGE'>0!(AGE>124) W !?5,"Enter Age Less Than 124 in Years or Months (followed by M) but Not Both" S AGE="" G P2
"RTN","FHASM1",83,0)
 G F2
"RTN","FHASM2")
0^34^B12615736
"RTN","FHASM2",1,0)
FHASM2 ; HISC/REL - Assessment (cont) ;5/14/93  10:03
"RTN","FHASM2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM2",3,0)
FRM ; Calculate Frame Size
"RTN","FHASM2",4,0)
 R !!,"Wrist Circumference (cm): ",X:DTIME G KIL^FHASM1:'$T!(X["^"),F1:X=""
"RTN","FHASM2",5,0)
 I X'?1.2N.1".".N!(X<2)!(X>50) W *7,!,"Value should be between 2 and 50cm.; press RETURN to bypass." G FRM
"RTN","FHASM2",6,0)
 S WCIR=+X,RAT=HGT*2.54/WCIR
"RTN","FHASM2",7,0)
 I SEX="F" S FRM=$S(RAT>11.0:"S",RAT<10.1:"L",1:"M")
"RTN","FHASM2",8,0)
 I SEX="M" S FRM=$S(RAT>10.4:"S",RAT<9.6:"L",1:"M")
"RTN","FHASM2",9,0)
 W "   ",$S(FRM="S":"Small",FRM="M":"Medium",1:"Large")," Frame" G IBW
"RTN","FHASM2",10,0)
F1 R !!,"Frame Size (SMALL,MEDIUM,LARGE) MED// ",FRM:DTIME G:'$T!(FRM["^") KIL^FHASM1 S:FRM="" FRM="M" S X=FRM D TR^FHASM1 S FRM=X
"RTN","FHASM2",11,0)
 I $P("SMALL",FRM,1)'="",$P("MEDIUM",FRM,1)'="",$P("LARGE",FRM,1)'="" W *7,"  Enter S, M or L" G F1
"RTN","FHASM2",12,0)
 S FRM=$E(FRM,1)
"RTN","FHASM2",13,0)
IBW ; Ideal Body Weight
"RTN","FHASM2",14,0)
 W !!,"Calculation of Ideal Body Weight",! S METH=""
"RTN","FHASM2",15,0)
 I H1'<60 W !?10,"H   Hamwi" S METH=METH_"H"
"RTN","FHASM2",16,0)
 I SEX="M",(H1<76),(H1>60),(AGE'<19) W !?10,"M   Metropolitan 83" W !?10,"S   Spinal Cord Injury" S METH=METH_"MS"
"RTN","FHASM2",17,0)
 I SEX="F",(H1<73),(H1>57),(AGE'<19) W !?10,"M   Metropolitan 83" W !?10,"S   Spinal Cord Injury" S METH=METH_"MS"
"RTN","FHASM2",18,0)
 I SEX="M",(H1<74),(H1>60),(AGE>64) W !?10,"G   Geriatric" S METH=METH_"G"
"RTN","FHASM2",19,0)
 I SEX="F",(H1<70),(H1>57),(AGE>64) W !?10,"G   Geriatric" S METH=METH_"G"
"RTN","FHASM2",20,0)
 I AGE<10 W !?10,"P   Pediatric" S METH=METH_"P"
"RTN","FHASM2",21,0)
 W !?10,"E   Enter Manually" S METH=METH_"E"
"RTN","FHASM2",22,0)
SEL R !!,"Method: ",X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM2",23,0)
 D TR^FHASM1
"RTN","FHASM2",24,0)
 I METH'[$E(X,1)!(X="") W *7,!,"   You Must Choose from the List Above" G SEL
"RTN","FHASM2",25,0)
 S METH=$E(X,1) D E:METH="E",H^FHASM2D:METH="H",^FHASM2A:METH="M",^FHASM2A:METH="S",^FHASM2B:METH="G",^FHASM2C:METH="P" I IBW'>0 G KIL^FHASM1:IBW="^",IBW
"RTN","FHASM2",26,0)
AMP R !!,"Does Patient have an Amputation? NO// ",AMP:DTIME G:'$T!(AMP["^") KIL^FHASM1 S:AMP="" AMP="N" S X=AMP D TR^FHASM1 S AMP=X I $P("YES",AMP,1)'="",$P("NO",AMP,1)'="" W *7," Answer YES or NO" G AMP
"RTN","FHASM2",27,0)
 S AMP=$E(AMP,1),AMP=AMP="Y" G:'AMP A5
"RTN","FHASM2",28,0)
A1 W !!,"Amputee Types: (may be multiple, e.g: 2,2,5)"
"RTN","FHASM2",29,0)
 W !!?5,"1 Hand              (0.7%)",?36,"2 Total Leg        (16.1%)",!?5,"3 Total Arm         (4.9%)",?36,"4 Foot              (1.5%)"
"RTN","FHASM2",30,0)
 W !?5,"5 Forearm and Hand  (2.3%)",?36,"6 Calf and Foot     (5.8%)"
"RTN","FHASM2",31,0)
A2 S AMP=0 R !!?2,"Amputee Types: ",X:DTIME G:'$T!(X["^") KIL^FHASM1
"RTN","FHASM2",32,0)
 F K=1:1 S Y=$P(X,",",K) Q:Y=""  G:Y'?1N!(Y<1)!(Y>6) A6 S AMP=AMP+$P(".7,16.1,4.9,1.5,2.3,5.8",",",Y)
"RTN","FHASM2",33,0)
A3 W !!,"Total Amputee %: ",AMP," // " R X:DTIME S:X="" X=AMP G:'$T!(X["^") KIL^FHASM1
"RTN","FHASM2",34,0)
 I X<.5!(X>50) W *7,!,"Total % of amputations should be .5% to 50%" G A3
"RTN","FHASM2",35,0)
 S AMP=+$J(X,0,1),IBW=100-AMP*IBW/100,IBW=+$J(IBW,0,0)
"RTN","FHASM2",36,0)
A4 S X1=$S(FHU'="M":IBW_"#",1:+$J(IBW/2.2,0,1)_"kg")
"RTN","FHASM2",37,0)
 W !!,"Select IBW after Amputee Correction: ",X1," // " R X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM2",38,0)
 I X=""!(X=+X1) G A5
"RTN","FHASM2",39,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G A4
"RTN","FHASM2",40,0)
 S IBW=+Y
"RTN","FHASM2",41,0)
A5 S IBW=+$J(IBW,0,0) G ^FHASM3
"RTN","FHASM2",42,0)
A6 W *7,!!?5,"Enter a string of types (e.g: 1,1,4); no digit can exceed 6." G A2
"RTN","FHASM2",43,0)
E ; Manual Entry of Ideal Weight
"RTN","FHASM2",44,0)
 R !!,"Enter Ideal Body Weight: ",X:DTIME S:X="" X="?" I '$T!(X["^") S IBW="^" Q
"RTN","FHASM2",45,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G E
"RTN","FHASM2",46,0)
 S IBW=+Y Q
"RTN","FHASM2A")
0^35^B4690497
"RTN","FHASM2A",1,0)
FHASM2A ; HISC/REL - Ideal Weight - Metropolitan 83 ;5/14/93  08:59
"RTN","FHASM2A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM2A",3,0)
M ; Metropolitan Height & Weight tables
"RTN","FHASM2A",4,0)
 ; 1983 Metropolitan Life Insurance Company Height & Weight Tables
"RTN","FHASM2A",5,0)
 ; as measured with 1" heels and clothes weighing 5# for men and 3# for women.
"RTN","FHASM2A",6,0)
M1 S OFF=$S(SEX="M":H1-61,1:H1-43),A1=$P($T(MM1+OFF),";",$F("SML",FRM)+2)
"RTN","FHASM2A",7,0)
 S W1=$P(A1,"-",1),W2=$P(A1,"-",2) G:METH="M" M3
"RTN","FHASM2A",8,0)
 ; Ideal Weight for Spinal Cord Patients
"RTN","FHASM2A",9,0)
 ; Nutrition Assessment of the Spinal Cord Injured Patient by
"RTN","FHASM2A",10,0)
 ; Suzanne C Peiffer, R.D., Patricia Blust, R.D., and Jose Florante J Leyson
"RTN","FHASM2A",11,0)
M2 W !!,"Extent of Injury:",!!?7,"P   Paraplegic",!?7,"Q   Quadriplegic"
"RTN","FHASM2A",12,0)
 R !!,"Select: ",SP:DTIME I '$T!(SP["^") S IBW="^" Q
"RTN","FHASM2A",13,0)
 S X=SP D TR^FHASM1 S SP=X
"RTN","FHASM2A",14,0)
 I SP'="P",SP'="Q" W !?3,*7,"Only P or Q are Valid Choices" G M2
"RTN","FHASM2A",15,0)
 S W1=W1-$S(SP="P":15,1:20),W2=W2-$S(SP="P":20,1:25)
"RTN","FHASM2A",16,0)
M3 S W3=+$J(W1+W2/2,0,0),X1=$S(FHU'="M":W1,1:+$J(W1/2.2,0,1)),X2=$S(FHU'="M":W2,1:+$J(W2/2.2,0,1)),X3=$S(FHU'="M":W3,1:+$J(W3/2.2,0,1))
"RTN","FHASM2A",17,0)
M4 W !!,"Select Ideal Weight (",X1,"-",X2,") ",X3,$S(FHU'="M":" lb",1:" kg")," // " R X:DTIME I '$T!(X["^") S IBW="^" Q
"RTN","FHASM2A",18,0)
 I X="" S IBW=W3 Q
"RTN","FHASM2A",19,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G M4
"RTN","FHASM2A",20,0)
 S IBW=+Y I IBW<W1!(IBW>W2) S METH="E"
"RTN","FHASM2A",21,0)
 Q
"RTN","FHASM2A",22,0)
MM1 ;;62;128-134;131-141;138-150
"RTN","FHASM2A",23,0)
 ;;63;130-136;133-143;140-153
"RTN","FHASM2A",24,0)
 ;;64;132-138;135-145;142-156
"RTN","FHASM2A",25,0)
 ;;65;134-140;137-148;144-160
"RTN","FHASM2A",26,0)
 ;;66;136-142;139-151;146-164
"RTN","FHASM2A",27,0)
 ;;67;138-145;142-154;149-168
"RTN","FHASM2A",28,0)
 ;;68;140-148;145-157;152-172
"RTN","FHASM2A",29,0)
 ;;69;142-151;148-160;155-176
"RTN","FHASM2A",30,0)
 ;;70;144-154;151-163;158-180
"RTN","FHASM2A",31,0)
 ;;71;146-157;154-166;161-184
"RTN","FHASM2A",32,0)
 ;;72;149-160;157-170;164-188
"RTN","FHASM2A",33,0)
 ;;73;152-164;160-174;168-192
"RTN","FHASM2A",34,0)
 ;;74;155-168;164-178;172-197
"RTN","FHASM2A",35,0)
 ;;75;158-172;167-182;176-202
"RTN","FHASM2A",36,0)
 ;;76;162-176;171-187;181-207
"RTN","FHASM2A",37,0)
MW1 ;;58;102-111;109-121;118-131
"RTN","FHASM2A",38,0)
 ;;59;103-113;111-123;120-134
"RTN","FHASM2A",39,0)
 ;;60;104-115;113-126;122-137
"RTN","FHASM2A",40,0)
 ;;61;106-118;115-129;125-140
"RTN","FHASM2A",41,0)
 ;;62;108-121;118-132;128-143
"RTN","FHASM2A",42,0)
 ;;63;111-124;121-135;131-147
"RTN","FHASM2A",43,0)
 ;;64;114-127;124-138;134-151
"RTN","FHASM2A",44,0)
 ;;65;117-130;127-141;137-155
"RTN","FHASM2A",45,0)
 ;;66;120-133;130-144;140-159
"RTN","FHASM2A",46,0)
 ;;67;123-136;133-147;143-163
"RTN","FHASM2A",47,0)
 ;;68;126-139;136-150;146-167
"RTN","FHASM2A",48,0)
 ;;69;129-142;139-153;149-170
"RTN","FHASM2A",49,0)
 ;;70;132-145;142-156;152-173
"RTN","FHASM2A",50,0)
 ;;71;135-148;145-159;155-176
"RTN","FHASM2A",51,0)
 ;;72;138-151;148-162;158-179
"RTN","FHASM2B")
0^36^B5462722
"RTN","FHASM2B",1,0)
FHASM2B ; HISC/REL - Ideal Weight - Geriatric ;6/1/89  16:17
"RTN","FHASM2B",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM2B",3,0)
 ; Ideal Weight for Geriatrics
"RTN","FHASM2B",4,0)
 ; Journal of Amer. Medical Assn., Vol. 172, p. 658, by
"RTN","FHASM2B",5,0)
 ; Master & Lasser. Used for people ages 65 to 94.
"RTN","FHASM2B",6,0)
G1 S OFF=$S(SEX="M":H1-61,1:H1-45),A1=$P($T(GM1+OFF),";",$S(AGE<70:4,AGE<75:5,AGE<80:6,AGE<85:7,AGE<90:8,1:9))
"RTN","FHASM2B",7,0)
 G:A1'["*" G2 S A2=+A1,A1=$P($T(GM1+OFF),";",A2)
"RTN","FHASM2B",8,0)
 W *7,!!,"No data for your Age Group, the ",$S(A2=1:"65-69",A2=2:"70-74",A2=3:"75-79",A2=4:"80-84",1:"85-89")," Group was used."
"RTN","FHASM2B",9,0)
G2 S W1=$P(A1,"-",1),W2=+$P(A1,"-",2),W3=+$J(W1+W2/2,0,0)
"RTN","FHASM2B",10,0)
 S X1=$S(FHU'="M":W1,1:+$J(W1/2.2,0,1)),X2=$S(FHU'="M":W2,1:+$J(W2/2.2,0,1)),X3=$S(FHU'="M":W3,1:+$J(W3/2.2,0,1))
"RTN","FHASM2B",11,0)
G3 W !!,"Select Ideal Weight (",X1,"-",X2,") ",X3,$S(FHU'="M":" lb",1:" kg")," // " R X:DTIME I '$T!(X["^") S IBW="^" Q
"RTN","FHASM2B",12,0)
 I X="" S IBW=W3 Q
"RTN","FHASM2B",13,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G G3
"RTN","FHASM2B",14,0)
 S IBW=+Y I IBW<W1!(IBW>W2) S METH="E"
"RTN","FHASM2B",15,0)
 Q
"RTN","FHASM2B",16,0)
GM1 ;;61;128-156;125-153;123-151;3*;3*;3*
"RTN","FHASM2B",17,0)
 ;;62;130-158;127-155;125-153;122-148;4*;4*
"RTN","FHASM2B",18,0)
 ;;63;131-161;129-157;127-155;122-150;120-146;5*
"RTN","FHASM2B",19,0)
 ;;64;134-164;131-161;129-157;124-152;122-148;5*
"RTN","FHASM2B",20,0)
 ;;65;136-166;134-164;130-160;127-155;125-153;117-143
"RTN","FHASM2B",21,0)
 ;;66;139-169;137-167;133-163;130-158;128-156;120-146
"RTN","FHASM2B",22,0)
 ;;67;140-172;140-170;136-166;132-162;130-160;122-150
"RTN","FHASM2B",23,0)
 ;;68;143-175;142-174;139-169;135-165;133-163;126-154
"RTN","FHASM2B",24,0)
 ;;69;147-179;146-178;142-174;139-169;137-167;130-153
"RTN","FHASM2B",25,0)
 ;;70;150-184;148-182;146-178;143-175;140-172;134-164
"RTN","FHASM2B",26,0)
 ;;71;155-189;152-186;149-183;148-180;144-176;139-169
"RTN","FHASM2B",27,0)
 ;;72;159-195;156-190;154-188;153-187;148-182;5*
"RTN","FHASM2B",28,0)
 ;;73;164-200;160-196;158-192;3*;3*;3*
"RTN","FHASM2B",29,0)
GW1 ;;58;120-146;112-138;111-135;3*;3*;3*
"RTN","FHASM2B",30,0)
 ;;59;121-147;114-140;112-136;100-122;99-121;5*
"RTN","FHASM2B",31,0)
 ;;60;122-148;116-142;113-139;106-130;102-124;5*
"RTN","FHASM2B",32,0)
 ;;61;123-151;118-144;115-141;109-133;104-128;5*
"RTN","FHASM2B",33,0)
 ;;62;125-153;121-147;118-144;112-136;108-132;107-131
"RTN","FHASM2B",34,0)
 ;;63;127-155;123-151;121-147;115-141;112-136;107-131
"RTN","FHASM2B",35,0)
 ;;64;130-158;126-154;123-151;119-145;115-141;109-132
"RTN","FHASM2B",36,0)
 ;;65;132-162;130-158;126-154;122-150;120-146;112-136
"RTN","FHASM2B",37,0)
 ;;66;136-166;132-162;128-157;126-154;124-152;116-142
"RTN","FHASM2B",38,0)
 ;;67;140-170;136-166;131-161;130-158;128-156;5*
"RTN","FHASM2B",39,0)
 ;;68;143-175;140-170;2*;2*;2*;2*
"RTN","FHASM2B",40,0)
 ;;69;148-180;144-176;2*;2*;2*;2*
"RTN","FHASM2C")
0^37^B14309979
"RTN","FHASM2C",1,0)
FHASM2C ; HISC/REL - Ideal Weight - Pediatric ;6/2/89  15:15
"RTN","FHASM2C",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM2C",3,0)
 ;;Normalized NCHS/CDC Anthropometric Reference
"RTN","FHASM2C",4,0)
 S X1=+$J(AGE*12,0,0) I X1'>0!(X1>119) S IBW="" Q
"RTN","FHASM2C",5,0)
P1 S X=$P($T(WT+X1),";;",2) S:SEX="F" X=$P(X," ",4,6) S X3=$P(X," ",1),A1=$P(X," ",2),A2=$P(X," ",3)
"RTN","FHASM2C",6,0)
 S X1=+$J(-.524*A1+X3,0,1),X2=+$J(.524*A2+X3,0,1)
"RTN","FHASM2C",7,0)
 S W1=+$J(X1*2.2,0,0),W2=+$J(X2*2.2,0,0),W3=+$J(X3*2.2,0,0)
"RTN","FHASM2C",8,0)
 I FHU'="M" S X1=W1,X2=W2,X3=W3
"RTN","FHASM2C",9,0)
P3 W !!,"Select Ideal Weight (",X1,"-",X2,") ",X3,$S(FHU'="M":" lb",1:" kg")," // " R X:DTIME I '$T!(X["^") S IBW="^" Q
"RTN","FHASM2C",10,0)
 I X="" S IBW=W3 Q
"RTN","FHASM2C",11,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G P3
"RTN","FHASM2C",12,0)
 S IBW=+Y I IBW<W1!(IBW>W2) S METH="E"
"RTN","FHASM2C",13,0)
 Q
"RTN","FHASM2C",14,0)
WT ;;3.3 .4 .5 3.2 .5 .4
"RTN","FHASM2C",15,0)
 ;;4.3 .7 .7 4 .6 .5
"RTN","FHASM2C",16,0)
 ;;5.2 .9 .8 4.7 .7 .7
"RTN","FHASM2C",17,0)
 ;;6 1 .9 5.4 .7 .8
"RTN","FHASM2C",18,0)
 ;;6.7 1 .9 6 .8 .8
"RTN","FHASM2C",19,0)
 ;;7.3 1 .9 6.7 .8 .9
"RTN","FHASM2C",20,0)
 ;;7.8 1 1 7.2 .9 .9
"RTN","FHASM2C",21,0)
 ;;8.3 1 1 7.7 .9 .9
"RTN","FHASM2C",22,0)
 ;;8.8 1 1 8.2 .9 1
"RTN","FHASM2C",23,0)
 ;;9.2 1 1 8.6 1 1
"RTN","FHASM2C",24,0)
 ;;9.5 1 1.1 8.9 1 1
"RTN","FHASM2C",25,0)
 ;;9.9 1 1.1 9.2 1 1
"RTN","FHASM2C",26,0)
 ;;10.2 1 1.1 9.5 1 1
"RTN","FHASM2C",27,0)
 ;;10.4 1 1.1 9.8 1.1 1.1
"RTN","FHASM2C",28,0)
 ;;10.7 1.1 1.2 10 1.1 1.1
"RTN","FHASM2C",29,0)
 ;;10.9 1.1 1.2 10.2 1.1 1.1
"RTN","FHASM2C",30,0)
 ;;11.1 1.1 1.2 10.4 1.1 1.1
"RTN","FHASM2C",31,0)
 ;;11.3 1.1 1.2 10.6 1.2 1.1
"RTN","FHASM2C",32,0)
 ;;11.5 1.2 1.2 10.8 1.2 1.1
"RTN","FHASM2C",33,0)
 ;;11.7 1.2 1.2 11 1.2 1.2
"RTN","FHASM2C",34,0)
 ;;11.8 1.2 1.3 11.2 1.2 1.2
"RTN","FHASM2C",35,0)
 ;;12 1.3 1.3 11.4 1.2 1.2
"RTN","FHASM2C",36,0)
 ;;12.2 1.3 1.3 11.5 1.2 1.2
"RTN","FHASM2C",37,0)
 ;;12.4 1.3 1.3 11.7 1.2 1.3
"RTN","FHASM2C",38,0)
 ;;12.3 1.1 1.7 11.8 1.2 1.4
"RTN","FHASM2C",39,0)
 ;;12.5 1.2 1.7 12 1.2 1.5
"RTN","FHASM2C",40,0)
 ;;12.7 1.2 1.7 12.2 1.2 1.5
"RTN","FHASM2C",41,0)
 ;;12.9 1.3 1.7 12.4 1.3 1.6
"RTN","FHASM2C",42,0)
 ;;13.1 1.3 1.7 12.6 1.3 1.6
"RTN","FHASM2C",43,0)
 ;;13.3 1.3 1.7 12.8 1.3 1.7
"RTN","FHASM2C",44,0)
 ;;13.5 1.4 1.7 13 1.3 1.7
"RTN","FHASM2C",45,0)
 ;;13.7 1.4 1.7 13.2 1.4 1.7
"RTN","FHASM2C",46,0)
 ;;13.9 1.5 1.8 13.4 1.4 1.8
"RTN","FHASM2C",47,0)
 ;;14.1 1.5 1.8 13.6 1.4 1.8
"RTN","FHASM2C",48,0)
 ;;14.3 1.5 1.8 13.8 1.4 1.9
"RTN","FHASM2C",49,0)
 ;;14.4 1.6 1.8 13.9 1.5 1.9
"RTN","FHASM2C",50,0)
 ;;14.6 1.6 1.8 14.1 1.5 2
"RTN","FHASM2C",51,0)
 ;;14.8 1.6 1.8 14.3 1.5 2
"RTN","FHASM2C",52,0)
 ;;15 1.7 1.8 14.4 1.5 2
"RTN","FHASM2C",53,0)
 ;;15.2 1.7 1.9 14.6 1.5 2.1
"RTN","FHASM2C",54,0)
 ;;15.3 1.7 1.9 14.8 1.6 2.1
"RTN","FHASM2C",55,0)
 ;;15.5 1.7 1.9 14.9 1.6 2.1
"RTN","FHASM2C",56,0)
 ;;15.7 1.8 1.9 15.1 1.6 2.2
"RTN","FHASM2C",57,0)
 ;;15.8 1.8 1.9 15.2 1.6 2.2
"RTN","FHASM2C",58,0)
 ;;16 1.8 2 15.4 1.6 2.2
"RTN","FHASM2C",59,0)
 ;;16.2 1.8 2 15.5 1.6 2.3
"RTN","FHASM2C",60,0)
 ;;16.4 1.9 2 15.7 1.7 2.3
"RTN","FHASM2C",61,0)
 ;;16.5 1.9 2 15.8 1.7 2.3
"RTN","FHASM2C",62,0)
 ;;16.7 1.9 2 16 1.7 2.4
"RTN","FHASM2C",63,0)
 ;;16.9 1.9 2.1 16.1 1.7 2.4
"RTN","FHASM2C",64,0)
 ;;17 1.9 2.1 16.2 1.7 2.4
"RTN","FHASM2C",65,0)
 ;;17.2 2 2.1 16.4 1.8 2.5
"RTN","FHASM2C",66,0)
 ;;17.4 2 2.2 16.5 1.8 2.5
"RTN","FHASM2C",67,0)
 ;;17.5 2 2.2 16.7 1.8 2.5
"RTN","FHASM2C",68,0)
 ;;17.7 2 2.2 16.8 1.8 2.6
"RTN","FHASM2C",69,0)
 ;;17.9 2 2.2 17 1.8 2.6
"RTN","FHASM2C",70,0)
 ;;18 2 2.3 17.1 1.8 2.6
"RTN","FHASM2C",71,0)
 ;;18.2 2.1 2.3 17.2 1.9 2.7
"RTN","FHASM2C",72,0)
 ;;18.3 2.1 2.3 17.4 1.9 2.7
"RTN","FHASM2C",73,0)
 ;;18.5 2.1 2.4 17.5 1.9 2.7
"RTN","FHASM2C",74,0)
 ;;18.7 2.1 2.4 17.7 1.9 2.8
"RTN","FHASM2C",75,0)
 ;;18.8 2.1 2.4 17.8 2 2.8
"RTN","FHASM2C",76,0)
 ;;19 2.1 2.5 18 2 2.9
"RTN","FHASM2C",77,0)
 ;;19.2 2.2 2.5 18.1 2 2.9
"RTN","FHASM2C",78,0)
 ;;19.3 2.2 2.6 18.3 2 2.9
"RTN","FHASM2C",79,0)
 ;;19.5 2.2 2.6 18.4 2.1 3
"RTN","FHASM2C",80,0)
 ;;19.7 2.2 2.6 18.6 2.1 3
"RTN","FHASM2C",81,0)
 ;;19.8 2.2 2.7 18.7 2.1 3.1
"RTN","FHASM2C",82,0)
 ;;20 2.3 2.7 18.9 2.1 3.1
"RTN","FHASM2C",83,0)
 ;;20.2 2.3 2.8 19 2.2 3.2
"RTN","FHASM2C",84,0)
 ;;20.3 2.3 2.8 19.2 2.2 3.2
"RTN","FHASM2C",85,0)
 ;;20.5 2.3 2.9 19.4 2.2 3.3
"RTN","FHASM2C",86,0)
 ;;20.7 2.3 2.9 19.5 2.3 3.3
"RTN","FHASM2C",87,0)
 ;;20.9 2.4 3 19.7 2.3 3.4
"RTN","FHASM2C",88,0)
 ;;21 2.4 3 19.9 2.3 3.5
"RTN","FHASM2C",89,0)
 ;;21.2 2.4 3.1 20 2.4 3.5
"RTN","FHASM2C",90,0)
 ;;21.4 2.4 3.2 20.2 2.4 3.6
"RTN","FHASM2C",91,0)
 ;;21.6 2.4 3.2 20.4 2.4 3.6
"RTN","FHASM2C",92,0)
 ;;21.7 2.5 3.3 20.6 2.5 3.7
"RTN","FHASM2C",93,0)
 ;;21.9 2.5 3.3 20.8 2.5 3.8
"RTN","FHASM2C",94,0)
 ;;22.1 2.5 3.4 21 2.6 3.9
"RTN","FHASM2C",95,0)
 ;;22.3 2.5 3.5 21.2 2.6 3.9
"RTN","FHASM2C",96,0)
 ;;22.5 2.6 3.5 21.4 2.7 4
"RTN","FHASM2C",97,0)
 ;;22.7 2.6 3.6 21.6 2.7 4.1
"RTN","FHASM2C",98,0)
 ;;22.9 2.6 3.7 21.8 2.8 4.2
"RTN","FHASM2C",99,0)
 ;;23 2.7 3.7 22.1 2.8 4.3
"RTN","FHASM2C",100,0)
 ;;23.2 2.7 3.8 22.3 2.9 4.4
"RTN","FHASM2C",101,0)
 ;;23.4 2.7 3.9 22.5 2.9 4.4
"RTN","FHASM2C",102,0)
 ;;23.6 2.8 4 22.8 3 4.5
"RTN","FHASM2C",103,0)
 ;;23.8 2.8 4 23 3 4.6
"RTN","FHASM2C",104,0)
 ;;24 2.8 4.1 23.3 3.1 4.7
"RTN","FHASM2C",105,0)
 ;;24.2 2.9 4.2 23.5 3.2 4.8
"RTN","FHASM2C",106,0)
 ;;24.4 2.9 4.3 23.8 3.2 4.9
"RTN","FHASM2C",107,0)
 ;;24.7 3 4.4 24 3.3 5
"RTN","FHASM2C",108,0)
 ;;24.9 3 4.5 24.3 3.3 5.2
"RTN","FHASM2C",109,0)
 ;;25.1 3.1 4.6 24.6 3.4 5.3
"RTN","FHASM2C",110,0)
 ;;25.3 3.1 4.7 24.8 3.5 5.4
"RTN","FHASM2C",111,0)
 ;;25.5 3.1 4.7 25.1 3.5 5.5
"RTN","FHASM2C",112,0)
 ;;25.7 3.2 4.8 25.4 3.6 5.6
"RTN","FHASM2C",113,0)
 ;;26 3.3 4.9 25.7 3.7 5.7
"RTN","FHASM2C",114,0)
 ;;26.2 3.3 5 26 3.8 5.8
"RTN","FHASM2C",115,0)
 ;;26.4 3.4 5.1 26.3 3.8 6
"RTN","FHASM2C",116,0)
 ;;26.7 3.4 5.2 26.6 3.9 6.1
"RTN","FHASM2C",117,0)
 ;;26.9 3.5 5.4 26.9 4 6.2
"RTN","FHASM2C",118,0)
 ;;27.1 3.5 5.5 27.2 4.1 6.3
"RTN","FHASM2C",119,0)
 ;;27.4 3.6 5.6 27.5 4.1 6.4
"RTN","FHASM2C",120,0)
 ;;27.6 3.7 5.7 27.8 4.2 6.6
"RTN","FHASM2C",121,0)
 ;;27.9 3.7 5.8 28.1 4.3 6.7
"RTN","FHASM2C",122,0)
 ;;28.1 3.8 5.9 28.5 4.4 6.8
"RTN","FHASM2C",123,0)
 ;;28.4 3.9 6 28.8 4.4 6.9
"RTN","FHASM2C",124,0)
 ;;28.6 3.9 6.1 29.1 4.5 7.1
"RTN","FHASM2C",125,0)
 ;;28.9 4 6.2 29.4 4.6 7.2
"RTN","FHASM2C",126,0)
 ;;29.2 4.1 6.3 29.8 4.7 7.3
"RTN","FHASM2C",127,0)
 ;;29.5 4.1 6.5 30.1 4.8 7.4
"RTN","FHASM2C",128,0)
 ;;29.7 4.2 6.6 30.5 4.8 7.6
"RTN","FHASM2C",129,0)
 ;;30 4.3 6.7 30.8 4.9 7.7
"RTN","FHASM2C",130,0)
 ;;30.3 4.4 6.8 31.1 5 7.8
"RTN","FHASM2C",131,0)
 ;;30.6 4.4 6.9 31.5 5.1 7.9
"RTN","FHASM2C",132,0)
 ;;30.9 4.5 7.1 31.8 5.2 8.1
"RTN","FHASM2C",133,0)
 ;;31.1 4.6 7.2 32.2 5.2 8.2
"RTN","FHASM2D")
0^38^B3631718
"RTN","FHASM2D",1,0)
FHASM2D ; HISC/REL - Ideal Weight - Anthropometric/Hamwi ;4/10/90  08:16
"RTN","FHASM2D",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM2D",3,0)
A ; Anthropometric Weight Calculation (Chumlea, 1988)
"RTN","FHASM2D",4,0)
 S EXT="Y" D ANT^FHASM3
"RTN","FHASM2D",5,0)
 S Y="" I ACIR=""!(CCIR="") W *7,!!,"Need Arm & Calf Circumference, at a minimum, to compute weight." Q
"RTN","FHASM2D",6,0)
 G A1:SCA="",A2:KNEE="",A3
"RTN","FHASM2D",7,0)
A1 I SEX="M" S Y=2.31*ACIR+(1.5*CCIR)-50.1 G A4
"RTN","FHASM2D",8,0)
 S Y=1.63*ACIR+(1.43*CCIR)-37.46 G A4
"RTN","FHASM2D",9,0)
A2 I SEX="M" S Y=1.92*ACIR+(1.44*CCIR)+(.26*SCA)-39.97 G A4
"RTN","FHASM2D",10,0)
 S Y=.92*ACIR+(1.5*CCIR)+(.42*SCA)-26.19 G A4
"RTN","FHASM2D",11,0)
A3 I SEX="M" S Y=1.73*ACIR+(.98*CCIR)+(.37*SCA)+(1.16*KNEE)-81.69 G A4
"RTN","FHASM2D",12,0)
 S Y=.98*ACIR+(1.27*CCIR)+(.4*SCA)+(.87*KNEE)-62.35 G A4
"RTN","FHASM2D",13,0)
A4 S Y0=+$J(Y*2.2,0,0),Y=+$J(Y*2.2,0,1)
"RTN","FHASM2D",14,0)
 W !!,"Calculated Weight: ",$S(FHU="M":+$J(Y/2.2,0,0)_"kg",1:Y0_"#") Q
"RTN","FHASM2D",15,0)
K ;Estimating Stature from Knee Height for Persons 60 to 90
"RTN","FHASM2D",16,0)
 ;Years of Age by William Cameron Chumlea, PhD
"RTN","FHASM2D",17,0)
 S KNEE=+$J(Y*2.54,0,1)
"RTN","FHASM2D",18,0)
 I AGE<60 W !,*7,"Can only calculate knee height for persons aged 60 or older" S Y=-1 Q
"RTN","FHASM2D",19,0)
 S A1=Y*2.54
"RTN","FHASM2D",20,0)
 I SEX="M" S A1=60.65+(2.04*A1)
"RTN","FHASM2D",21,0)
 I SEX="F" S A1=84.88+(1.83*A1)-(.24*AGE)
"RTN","FHASM2D",22,0)
 S Y=$J(A1/2.54,0,0)
"RTN","FHASM2D",23,0)
 S X1=$S(Y\12:Y\12_"'",1:"")_$S(Y#12:" "_(Y#12)_"""",1:""),X2=+$J(Y*2.54,0,0)_" cm"
"RTN","FHASM2D",24,0)
 W "  (",$S(FHU'="M":X1,1:X2),")" Q
"RTN","FHASM2D",25,0)
H ; Hamwi Ideal Weight
"RTN","FHASM2D",26,0)
 ; Hamwi,George J. Therapy: Changing Dietary Concepts in Diabetes Mellitus:
"RTN","FHASM2D",27,0)
 ; Diagnosis and Treatment, Vol. 1, Edited by T.S. Danowski.
"RTN","FHASM2D",28,0)
 ; Amer. Diabetes Assn., 500 5th Ave, NYC, NY 10020, 1964, 73-78.
"RTN","FHASM2D",29,0)
 S A1=$S(FRM="S":0.9,FRM="L":1.1,1:1)
"RTN","FHASM2D",30,0)
 I SEX="M" S IBW=HGT-60*6+106*A1
"RTN","FHASM2D",31,0)
 I SEX="F" S IBW=HGT-60*5+100*A1
"RTN","FHASM2D",32,0)
 G ED
"RTN","FHASM2D",33,0)
ED S X1=$S(FHU'="M":+$J(IBW,0,0)_" lb",1:+$J(IBW/2.2,0,1)_" kg")
"RTN","FHASM2D",34,0)
E1 W !!,"Select Ideal Body Weight: ",X1," // " R X:DTIME I '$T!(X["^") S IBW="" Q
"RTN","FHASM2D",35,0)
 Q:X=""  D WGT^FHASM1 I Y<1 D WGP^FHASM1 G E1
"RTN","FHASM2D",36,0)
 S:IBW'=+Y IBW=+Y,METH="E" Q
"RTN","FHASM3")
0^39^B6230541
"RTN","FHASM3",1,0)
FHASM3 ; HISC/REL - Antropometrics ;5/14/93  09:17
"RTN","FHASM3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM3",3,0)
 I EXT="Y" G NEXT
"RTN","FHASM3",4,0)
EXT R !!,"Do you wish Anthropometric Assessment? NO// ",EXT:DTIME S:EXT="" EXT="N" G:'$T!(EXT["^") KIL^FHASM1 S X=EXT D TR^FHASM1 S EXT=X
"RTN","FHASM3",5,0)
 I $P("YES",EXT,1)'="",$P("NO",EXT,1)'="" W *7,!," Enter YES if you have Anthropometric measurements; Otherwise NO" G EXT
"RTN","FHASM3",6,0)
 S EXT=$E(EXT,1) I EXT="Y" D ANT G:EXT="" KIL^FHASM1
"RTN","FHASM3",7,0)
NEXT ; Calculate BMI
"RTN","FHASM3",8,0)
 S A2=HGT*.0254,BMI=+$J(WGT/2.2/(A2*A2),0,1)
"RTN","FHASM3",9,0)
 D ^FHASM3A G ^FHASM4
"RTN","FHASM3",10,0)
ANT ; Anthropometric measurements
"RTN","FHASM3",11,0)
 R !!,"Triceps Skin Fold (mm): ",TSF:DTIME G QT:'$T!(TSF["^"),A1:TSF=""
"RTN","FHASM3",12,0)
 I TSF'?.N.1".".N!(TSF<1)!(TSF>100) W !?5,"Enter value between 1 and 100; outside values should be assessed manually" G ANT
"RTN","FHASM3",13,0)
A1 R !,"Subscapular Skinfold (mm): ",SCA:DTIME G QT:'$T!(SCA["^"),A2:SCA=""
"RTN","FHASM3",14,0)
 I SCA'?.N.1".".N!(SCA<1)!(SCA>100) W !?5,"Enter value between 1 and 100; outside values should be assessed manually" G A1
"RTN","FHASM3",15,0)
A2 R !,"Arm Circumference (cm): ",ACIR:DTIME G QT:'$T!(ACIR["^"),A3:ACIR=""
"RTN","FHASM3",16,0)
 I ACIR'?.N.1".".N!(ACIR<5)!(ACIR>100) W !?5,"Enter number between 5 and 100; outside values should be assessed manually" G A2
"RTN","FHASM3",17,0)
A3 R !,"Calf Circumference (cm): ",CCIR:DTIME G QT:'$T!(CCIR["^"),A4:CCIR=""
"RTN","FHASM3",18,0)
 I CCIR'?.N.1".".N!(CCIR<10)!(CCIR>250) W !?5,"Enter value between 10 and 250; outside values should be assessed manually" G A3
"RTN","FHASM3",19,0)
A4 I ACIR,TSF S X1=ACIR-(TSF/10*3.1416),BFAMA=X1*X1/12.5664-$S(AGE<18:0,SEX="M":10,1:6.5),BFAMA=$J(BFAMA,0,1)
"RTN","FHASM3",20,0)
 Q
"RTN","FHASM3",21,0)
QT S EXT="" Q
"RTN","FHASM3A")
0^40^B14219417
"RTN","FHASM3A",1,0)
FHASM3A ; HISC/REL - Frisancho Standards ;4/5/90  08:09
"RTN","FHASM3A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM3A",3,0)
 S A=AGE\1 G:A<1 KIL I A<18 S O1=A
"RTN","FHASM3A",4,0)
 E  S O1=$S(A<25:18,A<30:19,A<35:20,A<40:21,A<45:22,A<50:23,A<55:24,A<60:25,A<65:26,A<70:27,1:28)
"RTN","FHASM3A",5,0)
 S O2=$S(SEX="F":3,1:1)
"RTN","FHASM3A",6,0)
 F M="BMI","TSF","SCA","ACIR" S X=@M I X'="" D GET S @(M_"P")=Z
"RTN","FHASM3A",7,0)
 G:BFAMA="" KIL S X=BFAMA I A<18!(FRM="") S M="AMA" D GET S BFAMAP=Z G KIL
"RTN","FHASM3A",8,0)
 S O1=O1-17,O2=$S(SEX="F":7,1:1),O2=O2+$S(FRM="S":0,FRM="L":4,1:2)
"RTN","FHASM3A",9,0)
 S M="BFAMA" D GET S BFAMAP=Z G KIL
"RTN","FHASM3A",10,0)
GET S B=$P($T(@M+O2),";;",2),B=$P(B," ",O1)
"RTN","FHASM3A",11,0)
 S S=$P($T(@M+O2+1),";;",2),S=$P(S," ",O1)
"RTN","FHASM3A",12,0)
 S (Z,ZA)=X-B/S S:Z<0 ZA=-Z
"RTN","FHASM3A",13,0)
 S ZA=$S(ZA<.063:0,ZA<.189:1,ZA<.319:2,ZA<.454:3,ZA<.598:4,ZA<.755:5,ZA<.935:6,ZA<1.15:7,ZA<1.44:8,ZA<1.96:9,1:9.8)*5
"RTN","FHASM3A",14,0)
 S Z=50+$S(Z'<0:ZA,1:-ZA) Q
"RTN","FHASM3A",15,0)
KIL K A,B,M,O1,O2,S,X,Z,ZA Q
"RTN","FHASM3A",16,0)
BMI ;;
"RTN","FHASM3A",17,0)
 ;;17.3 16.2 16 15.7 15.6 15.8 16.0 16.3 16.9 17.7 18.4 18.9 19.5 20.3 20.8 21.9 21.8 23.6 24.9 25.7 25.9 26.2 26.3 26.1 26.2 25.8 25.5 25.3
"RTN","FHASM3A",18,0)
 ;;2.4 1.3 1.4 1.3 1.5 1.9 1.8 2.2 2.4 2.8 3.6 3.5 3.5 3.3 3.1 3.3 3.5 3.8 4.3 4.2 4 4 4.2 4.2 4.3 3.8 4 4
"RTN","FHASM3A",19,0)
 ;;16.7 16 15.7 15.5 15.5 15.5 15.9 16.5 17.3 17.7 18.9 19.6 20.4 21.1 21.1 22.1 22.5 22.9 23.7 24.8 25.3 25.7 26 26.3 26.9 26.7 26.8 26.6
"RTN","FHASM3A",20,0)
 ;;1.5 1.5 1.4 1.4 1.7 1.7 1.9 2.7 3.1 3.1 3.8 3.7 4.1 3.9 3.8 4 4.7 4.6 5.2 5.9 5.8 5.9 6.2 5.5 6.1 5.5 5.5 5.3
"RTN","FHASM3A",21,0)
TSF ;;
"RTN","FHASM3A",22,0)
 ;;10.4 10 9.9 9.2 8.9 8.9 9 9.6 10.2 11.5 12.5 12.2 11 10.4 9.8 10 9.1 11.3 12.2 13.1 12.9 13 12.9 12.6 12.4 12.5 12.1 12
"RTN","FHASM3A",23,0)
 ;;2.9 2.9 2.7 2.7 3.1 3.8 4 4.4 5.1 5.7 7 6.8 6.7 6.5 6.5 5.9 5.3 6.4 6.7 6.7 6.2 6.6 6.4 6.1 6 6 5.9 5.8
"RTN","FHASM3A",24,0)
 ;;10.4 10.5 10.4 10.3 10.4 10.4 11.1 12.1 13.4 13.9 15 15.1 16.4 17.1 17.3 19.2 19.1 20 21.7 23.7 24.7 25.1 26.1 26.5 26.6 26.6 25.1 24
"RTN","FHASM3A",25,0)
 ;;3.1 2.9 2.9 3 3.5 3.7 4.2 5.4 5.9 6.1 6.8 6.3 7.4 7.3 7.4 7.0 8.0 8.2 8.8 9.2 9.3 9 9.3 9 9.4 8.8 8.5 8.5
"RTN","FHASM3A",26,0)
SCA ;;
"RTN","FHASM3A",27,0)
 ;;6.3 5.9 5.5 5.3 5.2 5.5 5.7 6 6.8 7.6 9.0 8.9 8.8 9.0 9.4 10.1 10.1 13.4 15.5 17.3 17.6 17.4 18.2 17.7 17.6 18.1 16.8 16.3
"RTN","FHASM3A",28,0)
 ;;1.9 2 1.8 1.8 2.4 3.3 3.3 3.8 4.8 5.5 7.6 7.1 7 6.5 6.8 6.2 6 7.6 8.2 8.5 8.3 8.2 8.6 8.4 8.1 8.4 8.2 7.8
"RTN","FHASM3A",29,0)
 ;;6.5 6.4 6.1 6 6.2 6.3 6.7 7.8 9 9.7 10.7 11.5 12.3 13 13 14.7 15.4 16.1 17.5 19.7 20.6 20.9 21.8 23 23.2 22.8 21.4 20.5
"RTN","FHASM3A",30,0)
 ;;2 2.3 2.2 2.3 3 3.4 3.5 5.8 6.5 6.5 7.6 7.7 7.8 7.7 7.5 8.7 8.9 9.4 10.4 11.7 11.6 11.4 11.4 11.4 11.7 11.3 10.6 10.1
"RTN","FHASM3A",31,0)
ACIR ;;
"RTN","FHASM3A",32,0)
 ;;16.1 16.4 16.9 17.2 17.7 18.3 19 19.6 20.7 21.8 22.8 23.8 24.8 26.2 27.3 28.7 29 31 32.1 32.7 32.9 32.9 32.7 32.4 32.3 31.9 31.1 30.6
"RTN","FHASM3A",33,0)
 ;;1.2 1.4 1.4 1.4 1.8 2.1 2.1 2.3 2.7 3 3.4 3.5 3.3 3.5 3.2 3.2 3.4 3.5 3.5 3.4 3.3 3.2 3.4 3.4 3.3 3.4 3.4 3.4
"RTN","FHASM3A",34,0)
 ;;15.7 16.2 16.6 17.1 17.7 18.2 19 20 21.1 21.8 23.2 24 25 25.9 25.9 26.8 27.3 27.5 28.5 29.6 30.2 30.6 30.9 31.2 31.6 31.4 30.9 30.5
"RTN","FHASM3A",35,0)
 ;;1.3 1.3 1.4 1.5 1.8 2 2.2 2.6 2.8 3.1 3.6 3.4 3.7 3.6 3.5 3.5 4.1 4 4.3 4.7 4.8 4.8 5 4.5 5.1 4.6 4.4 4.3
"RTN","FHASM3A",36,0)
AMA ;;
"RTN","FHASM3A",37,0)
 ;;13.2 14.1 15.2 16.3 17.8 19.3 21 22.1 24.5 26.7 28.8 31.9 36.8 42.4 46.8 52.6 54.7 50.5 54.1 55.6 56.5 56.6 55.9 55 54.7 52.8 49.8 47.8
"RTN","FHASM3A",38,0)
 ;;2.3 3.2 3.1 2.7 3.7 4 4.5 4.2 5.1 5.9 6.7 7.4 9 9.1 9.6 10 10.5 11.6 11.9 12.1 12.4 11.7 12.3 12.5 11.8 11.7 11.6 11.5
"RTN","FHASM3A",39,0)
 ;;12.3 13.3 14.3 15.4 16.7 18 19.3 21.1 22.9 24.3 27.6 29.7 31.9 33.9 33.8 34.8 36.1 29.8 31.1 32.8 34.2 35.2 34.9 35.6 37.1 36.3 36.3 36
"RTN","FHASM3A",40,0)
 ;;2.3 2.3 2.4 2.8 3.1 3.9 4 4.7 4.6 5.5 6.7 6.5 7.4 7.7 7 8 8.8 8.4 9.1 10.4 11.5 13.3 11.8 11 13.3 11.3 11.3 10.8
"RTN","FHASM3A",41,0)
BFAMA ;;
"RTN","FHASM3A",42,0)
 ;;45.6 48.2 49.6 51.2 51.5 49.7 49.1 47.9 48.7 45.1 43.5
"RTN","FHASM3A",43,0)
 ;;10.6 9.8 10.2 10.4 10.1 10.8 11.2 10.1 11.2 10.7 10.3
"RTN","FHASM3A",44,0)
 ;;50.5 54 55 56.7 56.7 56.6 55.3 55.4 52.3 49.8 47.8
"RTN","FHASM3A",45,0)
 ;;10.5 11.3 10.4 11.7 11 11.2 11.7 10.8 10.8 10.5 10.8
"RTN","FHASM3A",46,0)
 ;;55.7 60.3 62.8 61.6 61.8 61.1 60.5 60.2 57.9 54.5 52
"RTN","FHASM3A",47,0)
 ;;12.2 12 13.4 13.3 12.3 13 12.8 12 12.1 12.7 12.4
"RTN","FHASM3A",48,0)
 ;;26.2 27.8 28.6 29.8 29.8 29.2 30.3 30.9 31.9 31.3 32
"RTN","FHASM3A",49,0)
 ;;6 7.4 7.8 10.1 6.6 7.4 7.3 7.6 8.7 8.1 9.9
"RTN","FHASM3A",50,0)
 ;;29.3 30 32 32.7 33.7 33.8 35 36.3 35.1 35.7 35.3
"RTN","FHASM3A",51,0)
 ;;7 7.2 9.1 8.4 12.1 8.8 9.7 11.5 9.1 10 9.7
"RTN","FHASM3A",52,0)
 ;;34.4 36.7 38.8 41.6 43.5 43 42.4 45.2 43.1 42.5 41.5
"RTN","FHASM3A",53,0)
 ;;10.7 11.5 12.3 14.4 16.6 15.8 13.1 16.9 14.2 13.4 11.6
"RTN","FHASM4")
0^41^B12052466
"RTN","FHASM4",1,0)
FHASM4 ; HISC/REL/JH - Laboratory/Drug Data ;4/3/01  14:12
"RTN","FHASM4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM4",3,0)
 S PX=3 D LAB G ^FHASM5
"RTN","FHASM4",4,0)
LAB ; Collect lab results
"RTN","FHASM4",5,0)
 K LRTST,^TMP($J,"LRTST") Q:'DFN
"RTN","FHASM4",6,0)
 S LRDFN=$P($G(^DPT(DFN,"LR")),"^",1) G:'LRDFN LKIL
"RTN","FHASM4",7,0)
 W:PX=3 !!,"Collecting laboratory data ... " D GET
"RTN","FHASM4",8,0)
 S X2=-$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)
"RTN","FHASM4",9,0)
 S %DT="X",X="T" D ^%DT S DT=+Y,X1=DT D C^%DTC S A1=9999999-X
"RTN","FHASM4",10,0)
 F K=0:0 S K=$O(^LR(LRDFN,"CH",K)) Q:K<1!(K>A1)  F L=0:0 S L=$O(^LR(LRDFN,"CH",K,L)) Q:L'>0  I $D(LRTST(L)) S X=^(L) D STR
"RTN","FHASM4",11,0)
 S %=100 F L=0:0 S L=$O(LRTST(L)) Q:L'>0  F SP=0:0 S SP=$O(LRTST(L,SP)) Q:SP'>0  D
"RTN","FHASM4",12,0)
 .I $P(LRTST(L,SP),"^",6)="" K LRTST(L,SP) Q
"RTN","FHASM4",13,0)
 .S %=%+1,^TMP($J,"LRTST",$S($P(LRTST(L,SP),"^",8)'="":$P(LRTST(L,SP),"^",8),1:%))=LRTST(L,SP) Q
"RTN","FHASM4",14,0)
 K LRTST F L=0:0 S L=$O(^TMP($J,"LRTST",L)) Q:L<1  S LRTST(L)=^(L)
"RTN","FHASM4",15,0)
LKIL K %,%H,%I,%T,%DT,A1,FLG,GRP,HI,K,L,LO,LRCW,LRDFN,P60,PC,SP,THER,TNAM,TST,X,X0,X1,X2,Y Q
"RTN","FHASM4",16,0)
STR ;
"RTN","FHASM4",17,0)
 S SP=$P($G(^LR(LRDFN,"CH",K,0)),"^",5) Q:'SP
"RTN","FHASM4",18,0)
 I '$D(LRTST(L,SP)) Q
"RTN","FHASM4",19,0)
 I $P(LRTST(L,SP),"^",6)'="" Q
"RTN","FHASM4",20,0)
 S P60=$P(LRTST(L,SP),"^",2),SP=$P(LRTST(L,SP),"^",3),GRP=$P(LRTST(L,SP),"^",8)
"RTN","FHASM4",21,0)
 S FLG=$P(X,"^",2),X=$P(X,"^",1) Q:X=""  S PC=$P($G(^LAB(60,P60,.1)),"^",3)
"RTN","FHASM4",22,0)
 S LRCW=8 I PC="" S X=$J(X,LRCW)
"RTN","FHASM4",23,0)
 E  S @("X="_PC)
"RTN","FHASM4",24,0)
 S:FLG'="" X=X_" "_FLG
"RTN","FHASM4",25,0)
 S $P(LRTST(L,SP),"^",6,7)=X_"^"_(9999999-K)
"RTN","FHASM4",26,0)
 I GRP F %=0:0 S %=$O(LRTST(%)) Q:%=""  F P60=0:0 S P60=$O(LRTST(%,P60)) Q:P60=""  I $P(LRTST(%,P60),"^",8)=GRP,'(%=L&(P60=SP)) D
"RTN","FHASM4",27,0)
 .I $P(LRTST(L,SP),"^",7)>$P(LRTST(%,P60),"^",7) K LRTST(%,P60) Q
"RTN","FHASM4",28,0)
 .K LRTST(L,SP) Q
"RTN","FHASM4",29,0)
 Q
"RTN","FHASM4",30,0)
GET ; Get Lab Tests of interest from Site Parameter file
"RTN","FHASM4",31,0)
 F K=0:0 S K=$O(^FH(119.9,1,"L",K)) Q:K'>0  S X=^(K,0) I 'PX!($P(X,"^",PX)="Y") D G1
"RTN","FHASM4",32,0)
 Q
"RTN","FHASM4",33,0)
G1 S P60=+$P(X,"^",1),SP=$P(X,"^",2),GRP=$P(X,"^",5) Q:'SP  S X0=$G(^LAB(60,P60,0)) Q:X0=""
"RTN","FHASM4",34,0)
 S X1=$G(^LAB(60,P60,.1)),TST=$P($P(X0,"^",5),";",2) Q:'TST
"RTN","FHASM4",35,0)
 S TNAM=$P(X0,"^",1) I $L(TNAM)>20 S TNAM=$P(X1,"^",1)
"RTN","FHASM4",36,0)
 S X=$G(^LAB(60,P60,1,SP,0)) Q:'$L(X)  S THER=$S($L($P(X,U,11,12))>1:1,1:0) S LO=$S(THER:$P(X,U,11),1:$P(X,U,2)),HI=$S(THER:$P(X,U,12),1:$P(X,U,3))
"RTN","FHASM4",37,0)
 S @("LO="_$S($L(LO):LO,1:"""""")),@("HI="_$S($L(HI):HI,1:""""""))
"RTN","FHASM4",38,0)
 S LRTST(TST,SP)=TNAM_"^"_P60_"^"_SP_"^"_$P(X,"^",7)_"^"_$J(LO,4)_$S($L(HI):" - "_$J(HI,4),1:"")_"^^^"_GRP Q
"RTN","FHASM4",39,0)
DRUG ; Collect requested drugs 0=Outpatient 1=Inpatient
"RTN","FHASM4",40,0)
 K PC,PSD F K=0:0 S K=$O(^FH(119.9,1,"P",K)) Q:K'>0  S X=$P(^(K,0),"^",1),CLS=$E($P($G(^PS(50.605,+X,0)),"^",1),1,3) I CLS'="" S:$E(CLS,3)="0" CLS=$E(CLS,1,2) S PC(CLS)=""
"RTN","FHASM4",41,0)
 G:'$D(PC) PKIL D NOW^%DTC K PSD I 'PX D OUTP G PKIL
"RTN","FHASM4",42,0)
 F STRT=%:0 S STRT=$O(^PS(55,DFN,5,"AUS",STRT)) Q:'STRT  F PSORD=0:0 S PSORD=$O(^PS(55,DFN,5,"AUS",STRT,PSORD)) Q:'PSORD  D D1
"RTN","FHASM4",43,0)
PKIL K %,%H,%I,CLS,DRG,K,PC,PSORD,STRT,X Q
"RTN","FHASM4",44,0)
OUTP F STRT=(%\1)-1:0 S STRT=$O(^PS(55,DFN,"P","A",STRT)) Q:STRT'>0  F JX=0:0 S JX=$O(^PS(55,DFN,"P","A",STRT,JX)) Q:JX'>0  D
"RTN","FHASM4",45,0)
 . S X=JX D EN^PSOORDER(DFN,X)
"RTN","FHASM4",46,0)
 . S CLS=$P($P($G(^TMP("PSOR",$J,JX,0)),"^",4),";",1) I CLS'="A",CLS'="H",CLS'="S" Q
"RTN","FHASM4",47,0)
 . S DRG=$P($P($G(^TMP("PSOR",$J,JX,"DRUG",0)),U),";") D:DRG D2
"RTN","FHASM4",48,0)
 . Q
"RTN","FHASM4",49,0)
 Q
"RTN","FHASM4",50,0)
D1 S DRG=$P($G(^PS(55,DFN,5,PSORD,1,1,0)),"^",1) Q:'DRG
"RTN","FHASM4",51,0)
D2 S CLS=$P($G(^PSDRUG(DRG,0)),"^",2) Q:CLS=""  I '$D(PC($E(CLS,1,2))),'$D(PC($E(CLS,1,3))) Q
"RTN","FHASM4",52,0)
 S PSD(DRG)=$P(^PSDRUG(DRG,0),"^") Q
"RTN","FHASM5")
0^42^B14455306
"RTN","FHASM5",1,0)
FHASM5 ; HISC/REL - Energy/Calorie Factors ;3/20/95  08:18
"RTN","FHASM5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM5",3,0)
 I AGE<19 G PED
"RTN","FHASM5",4,0)
 S CB="Energy" D GETW G HARRIS:CB=3,KIL^FHASM1:CB=0 W !!,"Calculate Energy Needs by:  "
"RTN","FHASM5",5,0)
 W !!?6,"1  Harris-Benedict",!?6,"2  Kcal/Kg",!?6,"3  Enter Manually"
"RTN","FHASM5",6,0)
E2 R !!,"Choose:  ",CM:DTIME G:'$T!(CM["^") KIL^FHASM1 I "123"'[CM!(CM'?1N) W !,*7,"Choose Either 1, 2, or 3" G E2
"RTN","FHASM5",7,0)
 G HARRIS:CM=1,KCAL:CM=2,MAN
"RTN","FHASM5",8,0)
MAN ; Manual Entry
"RTN","FHASM5",9,0)
M1 R !!,"Enter Energy Requirements (Kcal/day):  ",KCAL:DTIME G:'$T!(KCAL["^") KIL^FHASM1
"RTN","FHASM5",10,0)
 S KCAL=+$J(KCAL,0,0) I KCAL'>0 W *7,!,"KCAL must be greater than 0" G M1
"RTN","FHASM5",11,0)
 G NEXT
"RTN","FHASM5",12,0)
PED ; Pediatric
"RTN","FHASM5",13,0)
 I AGE<11 S KCAL=$S(AGE<.6:115,AGE<1:105,AGE<4:100,AGE<7:85,1:86) G P1
"RTN","FHASM5",14,0)
 I SEX="M" S KCAL=$S(AGE<15:60,1:42) G P1
"RTN","FHASM5",15,0)
 S KCAL=$S(AGE<15:48,1:38)
"RTN","FHASM5",16,0)
P1 S KCAL=+$J(KCAL*WGT/2.2,0,0) G P5
"RTN","FHASM5",17,0)
HARRIS ; Harris Method
"RTN","FHASM5",18,0)
 I SEX="F" S KCAL=(655.10+(9.56*W2)+(1.85*HGT*2.54)-(4.68*AGE))
"RTN","FHASM5",19,0)
 I SEX="M" S KCAL=(66.47+(13.75*W2)+(5.0*HGT*2.54)-(6.67*AGE))
"RTN","FHASM5",20,0)
 S KCAL=$J(KCAL,0,0)
"RTN","FHASM5",21,0)
H1 R !!,"Is patient confined to bed (Y/N)? ",AF:DTIME G:'$T!(AF["^") KIL^FHASM1 S:AF="" AF="^" S X=AF D TR^FHASM1 S AF=X I $P("YES",AF,1)'="",$P("NO",AF,1)'="" W *7,!,"  Answer YES or NO" G H1
"RTN","FHASM5",22,0)
 S AF=$S(AF?1"Y".E:1.2,1:1.3) W "  (Activity Factor = ",AF,")"
"RTN","FHASM5",23,0)
 W !!?27,"Injury/Stress Factors",!
"RTN","FHASM5",24,0)
 W !,"Surgery",?25,"1.1 - 1.3",?40,"Skeletal Trauma",?65,"1.35",!,"Major Sepsis",?25,"1.6",?40,"Severe Burn",?65,"2.1"
"RTN","FHASM5",25,0)
 W !,"Blunt Trauma",?25,"1.35",?40,"Trauma w/ Steroid",?65,"1.68",!,"Starvation",?25,".7",?40,"Trauma on Ventilator",?65,"1.6"
"RTN","FHASM5",26,0)
 W !,"Mild Infection",?25,"1.2",?40,"0-20% BSA Burn",?65,"1.25",!,"Moderate Infection",?25,"1.4",?40,"20-40% BSA Burn",?65,"1.5"
"RTN","FHASM5",27,0)
 W !,"Long Bone Fracture",?25,"1.6",?40,">40% BSA Burn",?65,"1.85",!,"Peritonitis",?25,"1.15"
"RTN","FHASM5",28,0)
 W !,"Stress - Low",?25,"1.3",?40,"Anabolism",?65,"1.5-1.75"
"RTN","FHASM5",29,0)
 W !,"       - Moderate",?25,"1.5",?40,"Cancer",?65,"1.6"
"RTN","FHASM5",30,0)
 W !,"       - Severe",?25,"2.0"
"RTN","FHASM5",31,0)
 W !!,"BEE = ",KCAL," Kcal/day"
"RTN","FHASM5",32,0)
H2 R !!,"Select Energy Factor:  ",EF:DTIME G:'$T!(EF["^") KIL^FHASM1 I EF<.7!(EF>2.5) W !,*7,"Energy Factor must be Between .7 and 2.5" G H2
"RTN","FHASM5",33,0)
 S KCAL=+$J(KCAL*AF*EF,0,0) G P5
"RTN","FHASM5",34,0)
KCAL ; KCAL Method
"RTN","FHASM5",35,0)
 W !!?35,"Caloric Factors"
"RTN","FHASM5",36,0)
 W !!,"Basal Energy",?30,"25",!,"Ambulatory w/ Weight Maint.",?30,"30"
"RTN","FHASM5",37,0)
 W !,"Malnutrition w/ Mild Sepsis",?30,"40",!,"Injuries/ Sepsis - Severe",?30,"50"
"RTN","FHASM5",38,0)
 W !,"Burn - Extensive",?30,"80",!,"Non-Dialysis Renal Failure",?30,"35"
"RTN","FHASM5",39,0)
 W !,"Dialysis",?30,"40",!,"Dialysis w/ Diabetes",?30,"30",!,"Anabolism",?30,"35-45"
"RTN","FHASM5",40,0)
P4 R !!,"Enter Kcal/Kg (10-100):  ",KCAL:DTIME G:'$T!(KCAL["^") KIL^FHASM1 I KCAL'?1.3N!(KCAL<10)!(KCAL>100) W !,*7,"Kcal/Kg Must be Between 10 and 100" G P4
"RTN","FHASM5",41,0)
 S KCAL=+$J(KCAL*W2,0,0)
"RTN","FHASM5",42,0)
P5 W !!,"Enter Caloric Requirements (Kcal/day): ",KCAL," // " R X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM5",43,0)
 I X'="",X'?.N.1".".N!(X<1)!(X>10000) W *7,!?5,"Enter a value between 1-10000" G P5
"RTN","FHASM5",44,0)
 I X'="",X'=KCAL S KCAL=+$J(X,0,0)
"RTN","FHASM5",45,0)
NEXT G ^FHASM6
"RTN","FHASM5",46,0)
GETW W !!,"Calculate ",CB," Requirements Based On:" S CM="12"
"RTN","FHASM5",47,0)
 W !!?2,"1  Actual Body Weight",!?2,"2  Ideal Body Weight"
"RTN","FHASM5",48,0)
 I WGT/IBW'<1.2 W !?2,"3  Obese Calculation" S CM="123"
"RTN","FHASM5",49,0)
E1 R !!,"Choose:  ",CB:DTIME I '$T!(CB["^") S CB=0 Q
"RTN","FHASM5",50,0)
 I CM'[CB!(CB'?1N) W !,*7,"Choose either 1 or 2" W:CM["3" " or 3" G E1
"RTN","FHASM5",51,0)
 S W2=$S(CB=2:IBW,CB=3:WGT-IBW*.25+IBW,1:WGT)/2.2 S:CB=3 CM=1 Q
"RTN","FHASM6")
0^43^B12720792
"RTN","FHASM6",1,0)
FHASM6 ; HISC/REL - Protein/Fluid Requirements ;10/30/90  13:42
"RTN","FHASM6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM6",3,0)
H2O W !!,"Calculate Fluid Requirements By:"
"RTN","FHASM6",4,0)
 W !!?5,"1)  Adult (35 ml/kg/day)",!?9,"Adolescent (40-60 ml/kg/day)",!?9,"Children (70-110 ml/kg/day)",!?9,"Infant (100-150 ml/kg/day)"
"RTN","FHASM6",5,0)
 W !?5,"2)  100 ml/kg first 10 kg +",!?9,"50 ml/kg second 10 kg +",!?9,"25 ml/kg remaining kg"
"RTN","FHASM6",6,0)
 W !?5,"3)  1 ml/Kcal",!?5,"4)  0.5 ml/Kcal  (Fluid Overload)"
"RTN","FHASM6",7,0)
 W !?5,"5)  1500 ml/sq meter"
"RTN","FHASM6",8,0)
 W !?5,"6)  Set Your Own Fluid Level",!?5,"7)  Omit Calculation"
"RTN","FHASM6",9,0)
H0 R !!,"Choose: ",H2O:DTIME G:'$T!(H2O["^") KIL^FHASM1 I "1234567"'[H2O!(H2O'?1N) W !,"Choose 1 - 7 Only" G H0
"RTN","FHASM6",10,0)
 I "125"[H2O S CB="Fluid" D GETW^FHASM5 G:CB=0 KIL^FHASM1
"RTN","FHASM6",11,0)
 G H1:H2O=1,H2:H2O=2,H3:H2O=3,H4:H2O=4,H5:H2O=5,H6:H2O=6 S FLD="" G PRO
"RTN","FHASM6",12,0)
H1 I AGE>18 S FLD=35 G H12
"RTN","FHASM6",13,0)
 I AGE>10 S A1=40,A2=60 G H11
"RTN","FHASM6",14,0)
 I AGE'<1 S A1=70,A2=110 G H11
"RTN","FHASM6",15,0)
 S A1=100,A2=150
"RTN","FHASM6",16,0)
H11 W !!,"Select Level Between ",A1," and ",A2," ml/kg/day: " R FLD:DTIME G:'$T!(FLD["^") KIL^FHASM1
"RTN","FHASM6",17,0)
 I FLD<A1!(FLD>A2) W *7,!,"Fluid Level is not within range." G H11
"RTN","FHASM6",18,0)
H12 S FLD=W2*FLD G H7
"RTN","FHASM6",19,0)
H2 S W1=W2,FLD=$S(W1<10:W1*100,W1<20:W1-10*50+1000,1:W1-20*25+1500) G H7
"RTN","FHASM6",20,0)
H3 S FLD=KCAL G H7
"RTN","FHASM6",21,0)
H4 S FLD=.5*KCAL G H7
"RTN","FHASM6",22,0)
H5 S X=W2,X1=.425 D PWR S FLD=Y,X=HGT*2.54,X1=.725 D PWR S FLD=FLD*Y*.007184*1500 G H7
"RTN","FHASM6",23,0)
H6 R !!,"Enter Fluid Requirements (ml/day): ",FLD:DTIME G:'$T!(FLD["^") KIL^FHASM1
"RTN","FHASM6",24,0)
 I FLD'?1N.N!(FLD<0)!(FLD>10000) W *7,!,"Level must be between 0-10000 ml/day" G H6
"RTN","FHASM6",25,0)
 S FLD=+$J(FLD,0,0) G PRO
"RTN","FHASM6",26,0)
H7 S FLD=+$J(FLD,0,0)
"RTN","FHASM6",27,0)
H8 W !!,"Select Fluid Requirements (ml/day): ",FLD," // " R X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM6",28,0)
 I X'="",X'?1N.N!(X<0)!(X>10000) W *7,!,"Level must be between 0-10000 ml/day" G H8
"RTN","FHASM6",29,0)
 I X'="",X'=FLD S FLD=+$J(X,0,0),H2O=6
"RTN","FHASM6",30,0)
PRO S CB="Protein" D GETW^FHASM5 G:CB=0 KIL^FHASM1 W !!?11,"Protein Requirements (g/kg)",!?16,"(Examples)"
"RTN","FHASM6",31,0)
 W !!,"Acute Burn, Injury,  Trauma",?35,"2-4",!,"Convalescent Burn, Injury Trauma",?35,"2"
"RTN","FHASM6",32,0)
 W !,"Malabsorption Syndrome",?35,"1",!,"Ulcerative Colitis",?35,"1-1.4"
"RTN","FHASM6",33,0)
 W !,"Ileocolostomy",?35,"1-1.4",!,"Chronic Liver Disease",?35,"1-1.5"
"RTN","FHASM6",34,0)
 W !,"Acute Encephalopathy",?35,"0.5",!,"Chronic Renal Failure",?35,"0.6"
"RTN","FHASM6",35,0)
 W !,"Nephrotic Syndrome",?35,"1-1.4"
"RTN","FHASM6",36,0)
 W !,"Burn",?35,"1.4",!,"Protein-Sparing",?35,"1.5"
"RTN","FHASM6",37,0)
 W !,"Anabolism",?35,"1.2-1.5"
"RTN","FHASM6",38,0)
 S P1=$S(AGE>18:.8,AGE>14:.84,AGE>10:1,AGE>6:1.2,AGE>3:1.5,AGE>1:1.8,AGE>.5:2,1:2.2)
"RTN","FHASM6",39,0)
P6 W !!,"Enter Protein Level (g/kg) ",P1," // " R PRO:DTIME S:PRO="" PRO=P1 G:'$T!(PRO["^") KIL^FHASM1
"RTN","FHASM6",40,0)
 I PRO'?.1N.1".".2N!(PRO<.4)!(PRO>4) W *7,"  Level must be .4 to 4.0" G P6
"RTN","FHASM6",41,0)
 S PRO=+$J(PRO*W2,0,0)
"RTN","FHASM6",42,0)
P7 W !!,"Enter Protein Requirements (gm/day): ",PRO," // " R X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM6",43,0)
 I X'="",X'>0!(X>400) W *7," Enter a value greater than 0 but not more than 400." G P7
"RTN","FHASM6",44,0)
 I X'="",X'=PRO S PRO=+$J(X,0,0)
"RTN","FHASM6",45,0)
 I KCAL W "  ",$J(PRO*400/KCAL,0,0)," % of KCAL"
"RTN","FHASM6",46,0)
NEXT G ^FHASM7
"RTN","FHASM6",47,0)
 ;
"RTN","FHASM6",48,0)
PWR ; Raise X to X1 power - Output in Y
"RTN","FHASM6",49,0)
 I X'>0 S Y=0 Q
"RTN","FHASM6",50,0)
 S X2=1 I X>0 F X3=0:1 Q:(X/X2)<10  S X2=X2*10
"RTN","FHASM6",51,0)
 I X<1 F X3=0:-1 Q:(X/X2)>.1  S X2=X2*.1
"RTN","FHASM6",52,0)
 S X=X/X2
"RTN","FHASM6",53,0)
 S X=(X-1)/(X+1),(Y,X5)=X F X4=3:2 S X5=X5*X*X,X2=X5/X4,Y=X2+Y S:X2<0 X2=-X2 Q:X2<.000001
"RTN","FHASM6",54,0)
 S Y=Y*2+(X3*2.302585),X=Y*X1
"RTN","FHASM6",55,0)
 S (Y,X5)=X,Y=Y+1 F X4=2:1 S X5=X5*X/X4,Y=Y+X5 Q:X5<.000001
"RTN","FHASM6",56,0)
 S Y=+$J(Y,0,5) K X2,X3,X4,X5 Q
"RTN","FHASM7")
0^44^B13420540
"RTN","FHASM7",1,0)
FHASM7 ; HISC/REL - KCAL Distribution ;8/18/93  11:05
"RTN","FHASM7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASM7",3,0)
 S PRT=0,(ASN,NB)="" D ^FHASMR1
"RTN","FHASM7",4,0)
E31 R !!,"Do you want to do a NITROGEN BALANCE? NO// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="N" D TR^FHASM1 I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G E31
"RTN","FHASM7",5,0)
 I $E(X,1)="N" G KIL:'DFN,E4
"RTN","FHASM7",6,0)
E32 R !!,"Enter Protein Intake (gm/24hr): ",X1:DTIME G KIL:'$T!(X1["^"),E35:X1=""
"RTN","FHASM7",7,0)
 I X1'?.N.1".".N!(X1<0)!(X1>200) W !?5,"Enter 0-200 grams of protein intake" G E32
"RTN","FHASM7",8,0)
E33 R !,"Enter Urinary Nitrogen Output (gm/24hr): ",X2:DTIME G KIL:'$T!(X2["^"),E35:X2=""
"RTN","FHASM7",9,0)
 I X2'?.N.1".".N!(X2<0)!(X2>30) W !?5,"Enter 0-30 gms of Urinary Nitrogen output (24 hr UUN)" G E33
"RTN","FHASM7",10,0)
E34 R !,"Enter Insensible Nitrogen Output (gm/24hr): 4// ",X3:DTIME S:X3="" X3=4 G:'$T!(X3["^") KIL
"RTN","FHASM7",11,0)
 I X3'?.N.1".".N!(X3<0)!(X3>10) W !?5,"Insensible Nitrogen output should be between 0-10 grams" G E34
"RTN","FHASM7",12,0)
 S NB=X1/6.25-(X2+X3),NB=$J(NB,0,0) W !,"Nitrogen Balance: ",NB
"RTN","FHASM7",13,0)
E35 G:'DFN KIL
"RTN","FHASM7",14,0)
E4 R !!,"Appearance: ",APP:DTIME G KIL^FHASM1:'$T!(APP["^")
"RTN","FHASM7",15,0)
 I APP["?"!(APP'?.ANP)!($L(APP)>60) W *7,!,"Enter Physical Appearance of patient; cannot exceed 60 characters." G E4
"RTN","FHASM7",16,0)
 W ! S DIC="^FH(115.3,",DIC(0)="AEQMZ" D ^DIC K DIC G KIL^FHASM1:X["^"!$D(DTOUT) S XD=$S(Y>0:+Y,1:"")
"RTN","FHASM7",17,0)
E5 W ! S DIC="^FH(115.4,",DIC(0)="AEQMZ",DIC("S")="I $P(^(0),U,2)'=""""" D ^DIC K DIC G KIL^FHASM1:X["^"!$D(DTOUT) S RC=$S(Y>0:+Y,1:"")
"RTN","FHASM7",18,0)
 W !!,"Comments:" K ^TMP("FH",$J) S DIC="^TMP(""FH"",$J,",DWPK=1 D EN^DIWE
"RTN","FHASM7",19,0)
E6 R !!,"Do you wish to FILE this Assessment Y// ",X:DTIME G:'$T!(X["^") KIL^FHASM1 S:X="" X="Y" D TR^FHASM1 I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G E6
"RTN","FHASM7",20,0)
 I X'?1"Y".E G KIL
"RTN","FHASM7",21,0)
 I '$D(^FHPT(FHDFN,0)) S ^(0)=FHDFN
"RTN","FHASM7",22,0)
 I '$D(^FHPT(FHDFN,"N",0)) S ^FHPT(FHDFN,"N",0)="^115.011D^^"
"RTN","FHASM7",23,0)
 K DIC,DD,DO S DIC="^FHPT(FHDFN,""N"",",DIC(0)="L",DLAYGO=115,DA(1)=FHDFN,X=ADT,DINUM=9999999-ADT D FILE^DICN S ASN=+Y
"RTN","FHASM7",24,0)
 D NOW^%DTC S NOW=%
"RTN","FHASM7",25,0)
 S Y=ADT_"^"_SEX_"^"_AGE_"^"_HGT_"^"_HGP_"^"_WGT_"^"_WGP_"^"_DWGT_"^"_UWGT_"^"_IBW_"^"_FRM_"^"_AMP_"^^^^"_KCAL_"^"_PRO_"^"_FLD_"^"_RC_"^"_XD_"^"_BMI_"^"_BMIP_"^"_DUZ_"^"_NOW_"^"_NB
"RTN","FHASM7",26,0)
 S ^FHPT(FHDFN,"N",ASN,0)=Y
"RTN","FHASM7",27,0)
 S:EXT="Y" ^FHPT(FHDFN,"N",ASN,1)=TSF_"^"_TSFP_"^"_SCA_"^"_SCAP_"^"_ACIR_"^"_ACIRP_"^"_CCIR_"^"_CCIRP_"^"_BFAMA_"^"_BFAMAP
"RTN","FHASM7",28,0)
 S:APP'="" ^FHPT(FHDFN,"N",ASN,2)=APP G:'$D(LRTST) E7
"RTN","FHASM7",29,0)
 S N1=0 F K=0:0 S K=$O(LRTST(K)) Q:K=""  S ^FHPT(FHDFN,"N",ASN,"L",K,0)=LRTST(K),N1=N1+1
"RTN","FHASM7",30,0)
 I N1,'$D(^FHPT(FHDFN,"N",ASN,"L",0)) S ^(0)="^115.021^^"
"RTN","FHASM7",31,0)
E7 G:'$D(^TMP("FH",$J)) E8
"RTN","FHASM7",32,0)
 S ^FHPT(FHDFN,"N",ASN,"X",0)=^TMP("FH",$J,0)
"RTN","FHASM7",33,0)
 S N1=0 F K=0:0 S K=$O(^TMP("FH",$J,K)) Q:K'>0  S N1=N1+1,^FHPT(FHDFN,"N",ASN,"X",N1,0)=^TMP("FH",$J,K,0)
"RTN","FHASM7",34,0)
E8 S DTE=ADT,S1=1,S2="I",S3=$S('RC:"",1:"Nutrition Status: "_$P(^FH(115.4,RC,0),"^",2))
"RTN","FHASM7",35,0)
 D FIL^FHASE3 I 'RC G E9
"RTN","FHASM7",36,0)
 I '$D(^FHPT(FHDFN,"S",0)) S ^(0)="^115.012D^^"
"RTN","FHASM7",37,0)
 K DIC,DD,DO S DIC="^FHPT(FHDFN,""S"",",DIC(0)="L",DLAYGO=115,DA(1)=FHDFN,X=ADT,DINUM=9999999-ADT D FILE^DICN S ASE=+Y
"RTN","FHASM7",38,0)
 D DID^FHDPA S $P(^FHPT(FHDFN,"S",ASE,0),"^",2,3)=RC_"^"_DUZ S:FHWRD $P(^(0),"^",6)=FHWRD
"RTN","FHASM7",39,0)
E9 G P0^FHASMR
"RTN","FHASM7",40,0)
KIL G KIL^FHASMR
"RTN","FHASMR")
0^45^B3641105
"RTN","FHASMR",1,0)
FHASMR ; HISC/REL/NCA - Assessment Report ;4/25/93  18:46
"RTN","FHASMR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASMR",3,0)
 S ALL=1 D ^FHDPA G:'DFN KIL
"RTN","FHASMR",4,0)
 I '$D(^FHPT(FHDFN,"N",0)) W !!,"No Nutrition Assessments on file" G KIL
"RTN","FHASMR",5,0)
 K DIC S DIC="^FHPT(FHDFN,""N"",",DIC(0)="Q",DA=FHDFN,X="??" D ^DIC
"RTN","FHASMR",6,0)
A0 S DIC="^FHPT(FHDFN,""N"",",DIC(0)="AEQM",DIC("A")="SELECT Assessment Date: " W ! D ^DIC G KIL:"^"[X!$D(DTOUT),A0:Y<1 S ASN=+Y
"RTN","FHASMR",7,0)
P0 ; Select Device
"RTN","FHASMR",8,0)
 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASMR",9,0)
 I $D(IO("Q")) S FHPGM="Q1^FHASMR",FHLST="FHDFN^DFN^PID^ASN" D EN2^FH G KIL
"RTN","FHASMR",10,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHASMR",11,0)
Q1 ; Process Printing Assessment
"RTN","FHASMR",12,0)
 S %DT="XT",X="NOW" D ^%DT S DT=Y\1,DTP=+Y D DTP^FH S NOW=DTP
"RTN","FHASMR",13,0)
 S NAM=$P(^DPT(DFN,0),"^",1)
"RTN","FHASMR",14,0)
 S FHAP=$G(^FH(119.9,1,3)),FHU=$P(FHAP,"^",1)
"RTN","FHASMR",15,0)
 S Y=^FHPT(FHDFN,"N",ASN,0)
"RTN","FHASMR",16,0)
 F K=1:1:22 S @$P("ADT SEX AGE HGT HGP WGT WGP DWGT UWGT IBW FRM AMP X X X KCAL PRO FLD RC XD BMI BMIP"," ",K)=$P(Y,"^",K)
"RTN","FHASMR",17,0)
 S NB=$P(Y,"^",25)
"RTN","FHASMR",18,0)
 S EXT="" I $D(^FHPT(FHDFN,"N",ASN,1)) S EXT="Y",Y=^(1) F K=1:1:10 S @$P("TSF TSFP SCA SCAP ACIR ACIRP CCIR CCIRP BFAMA BFAMAP"," ",K)=$P(Y,"^",K)
"RTN","FHASMR",19,0)
 S APP=$G(^FHPT(FHDFN,"N",ASN,2))
"RTN","FHASMR",20,0)
 K LRTST F K=0:0 S K=$O(^FHPT(FHDFN,"N",ASN,"L",K)) Q:K<1  S LRTST(K)=^(K,0)
"RTN","FHASMR",21,0)
 S PRT=1 G ^FHASMR1
"RTN","FHASMR",22,0)
KIL ; Final variable kill
"RTN","FHASMR",23,0)
 G KILL^XUSCLEAN
"RTN","FHASMR1")
0^46^B16349992
"RTN","FHASMR1",1,0)
FHASMR1 ; HISC/REL/NCA/JH - Assessment Report (cont) ;5/17/96  12:48
"RTN","FHASMR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASMR1",3,0)
EN ; Print Report
"RTN","FHASMR1",4,0)
 D NOW^%DTC S NOW=% K % S ANS=""
"RTN","FHASMR1",5,0)
 S LN="",$P(LN,"-",80)="",PG=0,S1=$S(IOST?1"C".E:IOSL-2,1:IOSL-6) D HEAD
"RTN","FHASMR1",6,0)
 W !!,NAM,?40,$S(SEX="M":"Male",1:"Female"),?60,"Age ",AGE
"RTN","FHASMR1",7,0)
 S DTP=ADT D DTP^FH W !!?25,"Date of Assessment: ",$E(DTP,1,9)
"RTN","FHASMR1",8,0)
EN1 S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:""),X2=+$J(HGT*2.54,0,0)_" cm"
"RTN","FHASMR1",9,0)
 W !!,"Height:       ",$S(FHU'="M":X1,1:X2)," (",$S(FHU'="M":X2,1:X1),")" W:HGP'="" " ",$S(HGP="K":"knee hgt",HGP="S":"stated",1:"")
"RTN","FHASMR1",10,0)
 S X1=WGT_" lbs",X2=+$J(WGT/2.2,0,1)_" kg"
"RTN","FHASMR1",11,0)
 W !,"Weight:       ",$S(FHU'="M":X1,1:X2)," (",$S(FHU'="M":X2,1:X1),")" W:WGP'="" " ",$S(WGP="A":"anthro",WGP="S":"stated",1:"") S DTP=DWGT D DTP^FH W ?50,"Weight Taken:    ",DTP
"RTN","FHASMR1",12,0)
 I UWGT S X1=UWGT_" lbs",X2=+$J(UWGT/2.2,0,1)_" kg"
"RTN","FHASMR1",13,0)
 W !,"Usual Weight: " W:UWGT $S(FHU'="M":X1,1:X2)," (",$S(FHU'="M":X2,1:X1),")" W ?50,"Weight/Usual Wt:  " W:UWGT $J(WGT/UWGT*100,3,0),"%"
"RTN","FHASMR1",14,0)
 S X1=IBW_" lbs",X2=+$J(IBW/2.2,0,1)_" kg"
"RTN","FHASMR1",15,0)
 W !,"Ideal Weight: ",$S(FHU'="M":X1,1:X2)," (",$S(FHU'="M":X2,1:X1),")" W ?50,"Weight/IBW:       " W:IBW $J(WGT/IBW*100,3,0),"%"
"RTN","FHASMR1",16,0)
 I AMP W !?6,"Ideal weight adjusted for amputation"
"RTN","FHASMR1",17,0)
 W !,"Frame Size:   ",$S(FRM="S":"Small",FRM="M":"Medium",FRM="L":"Large",1:"")
"RTN","FHASMR1",18,0)
 W ?50,"Body Mass Index:  ",BMI W:BMIP'="" " (",BMIP,"%)"
"RTN","FHASMR1",19,0)
 D:$Y'<(S1-3) HF Q:ANS="^"  G:EXT'="Y" Q4 W !!?26,"Anthropometric Measurements",!?35,"%ile",?71,"%ile",!
"RTN","FHASMR1",20,0)
 W !?4,"Triceps Skinfold (mm)" I TSF W ?31,$J(+TSF,3,0),?36,$J(TSFP,3)
"RTN","FHASMR1",21,0)
 W ?43,"Arm Circumference (cm)" I ACIR W ?67,$J(+ACIR,3,0),?72,$J(ACIRP,3)
"RTN","FHASMR1",22,0)
 W !?4,"Subscapular Skinfold (mm)" I SCA W ?31,$J(+SCA,3,0),?36,$J(SCAP,3)
"RTN","FHASMR1",23,0)
 W ?43,"Bone-free AMA (cm2)" I BFAMA W ?67,$J(+BFAMA,3,0),?72,$J(BFAMAP,3)
"RTN","FHASMR1",24,0)
 W !?4,"Calf Circumference (cm)" I CCIR W ?31,$J(+CCIR,3,0),?36,$J(CCIRP,3)
"RTN","FHASMR1",25,0)
Q4 W !!?32,"Laboratory Data",!?5,"Test",?30,"Result    units",?51,"Ref.   range",?67,"Date"
"RTN","FHASMR1",26,0)
 S N1=0 F K=0:0 S K=$O(LRTST(K)) Q:K=""  D LAB
"RTN","FHASMR1",27,0)
 I 'N1 W !!?5,"No laboratory data available last ",$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)," days"
"RTN","FHASMR1",28,0)
 S N=PRO/6.25 I $Y'<(S1-4) D HF Q:ANS="^"
"RTN","FHASMR1",29,0)
 W !!,"Energy Requirements:  ",KCAL," Kcal/day" W:N ?50,"Kcal:N  ",$J(KCAL/N,0,0),":1" W:NB'="" ?67,"N-Bal: ",NB
"RTN","FHASMR1",30,0)
 W !,"Protein Requirements: ",PRO," gm/day" W:N ?50,"NPC:N   ",$J(KCAL-(PRO*4)/N,0,0),":1"
"RTN","FHASMR1",31,0)
 I FLD'="" W !,"Fluid Requirements:   ",FLD," ml/day"
"RTN","FHASMR1",32,0)
 G:'PRT Q6
"RTN","FHASMR1",33,0)
 D:$Y'<(S1-4) HF Q:ANS="^"  W:APP'="" !!,"Appearance: ",?20,APP
"RTN","FHASMR1",34,0)
 I XD W !,"Nutrition Class: " W ?20,$P($G(^FH(115.3,XD,0)),"^",1)
"RTN","FHASMR1",35,0)
 I RC W !,"Nutrition Status: " W ?20,$P($G(^FH(115.4,RC,0)),"^",2)
"RTN","FHASMR1",36,0)
 D:$Y'<(S1-4) HF Q:ANS="^"  W !!,"Comments",!
"RTN","FHASMR1",37,0)
 I ASN F K=0:0 S K=$O(^FHPT(FHDFN,"N",ASN,"X",K)) Q:K<1  D:$Y'<S1 HF Q:ANS="^"  W !,^FHPT(FHDFN,"N",ASN,"X",K,0)
"RTN","FHASMR1",38,0)
 S SIGN=$P(^FHPT(FHDFN,"N",ASN,0),U,23) W:SIGN'="" !!,"Entered by: ",$P($P(^VA(200,SIGN,0),U),",",2)," ",$P($P(^VA(200,SIGN,0),U),",")
"RTN","FHASMR1",39,0)
 G:$E(IOST)="C" Q6 F KK=1:1:IOSL-$Y-7 W !
"RTN","FHASMR1",40,0)
 S $P(UL,"-",39)="" W !?38,UL W !?38,"Signature",?68,"Date"
"RTN","FHASMR1",41,0)
Q6 D FOOT Q
"RTN","FHASMR1",42,0)
LAB S X1=$P(LRTST(K),"^",7) Q:X1=""  S DTP=X1\1 D DTP^FH W:'N1 ! S N1=N1+1
"RTN","FHASMR1",43,0)
 I $Y'<S1 D HF Q:ANS="^"
"RTN","FHASMR1",44,0)
 W !?5,$P(LRTST(K),"^",1),?27,$P(LRTST(K),"^",6),?40,$P(LRTST(K),"^",4),?51,$P(LRTST(K),"^",5),?65,DTP Q
"RTN","FHASMR1",45,0)
HF ; Do Header and Footer
"RTN","FHASMR1",46,0)
 D FOOT Q:ANS="^"  D HEAD
"RTN","FHASMR1",47,0)
 Q
"RTN","FHASMR1",48,0)
HEAD ; Page Header
"RTN","FHASMR1",49,0)
 I IOST?1"C".E W @IOF Q
"RTN","FHASMR1",50,0)
 W:PG @IOF S PG=PG+1,DTP=DT D DTP^FH
"RTN","FHASMR1",51,0)
 W !,LN,!,DTP,?29,"NUTRITION ASSESSMENT",?73,"Page ",PG,!,LN Q
"RTN","FHASMR1",52,0)
FOOT ; Page Footer
"RTN","FHASMR1",53,0)
 D PAUSE Q:IOST?1"C-".E
"RTN","FHASMR1",54,0)
 F KK=1:1:IOSL-$Y-5 W !
"RTN","FHASMR1",55,0)
 D SITE^FH W !,LN,!,NAM W ?(80-$L(SITE)\2),SITE,?67,"VAF 10-9034"
"RTN","FHASMR1",56,0)
 W ! W:PID'="" PID
"RTN","FHASMR1",57,0)
 S W1=$G(^DPT(DFN,.1)) S:$D(^DPT(DFN,.101)) W1=W1_"/"_^DPT(DFN,.101) W:W1'="" ?(80-$L(W1)\2),W1,?66,"(Vice SF 509)"
"RTN","FHASMR1",58,0)
 W !,LN,! Q
"RTN","FHASMR1",59,0)
PAUSE ; Pause to Scroll
"RTN","FHASMR1",60,0)
 I IOST?1"C".E R !!,"Press RETURN to continue. ",YN:DTIME S:'$T!(YN["^") ANS="^" Q:ANS="^"  I "^"'[YN W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHASMR1",61,0)
 Q
"RTN","FHASN")
0^47^B4842109
"RTN","FHASN",1,0)
FHASN ; HISC/REL - Nutrition Status ;10/29/93  08:55
"RTN","FHASN",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASN",3,0)
EN4 ; List Nutrition Statuses
"RTN","FHASN",4,0)
 W ! S L=0,DIC="^FH(115.4,",FLDS=".01,1",BY=".01"
"RTN","FHASN",5,0)
 S (FR,TO)="",DHD="NUTRITION STATUS" D EN1^DIP,RSET Q
"RTN","FHASN",6,0)
EN5 ; Enter Nutrition Status for Patient
"RTN","FHASN",7,0)
 S ALL=1 D ^FHDPA G:'DFN KIL
"RTN","FHASN",8,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"  [ Patient has expired. ]" G EN5
"RTN","FHASN",9,0)
 ; If Multidivisional site Select Communications Office
"RTN","FHASN",10,0)
 S FHCOMM="" I $P($G(^FH(119.9,1,0)),U,20)'="N" D  I FHCOMM="" Q
"RTN","FHASN",11,0)
 .W ! K DIC S DIC="^FH(119.73," S DIC(0)="AEMQ" D ^DIC
"RTN","FHASN",12,0)
 .I Y=-1 Q
"RTN","FHASN",13,0)
 .S FHCOMM=+Y
"RTN","FHASN",14,0)
 D DID^FHDPA,GET
"RTN","FHASN",15,0)
 K DIC S DIC="^FH(115.4,",DIC(0)="AEQM",DIC("S")="I $P(^(0),U,2)'=""""" S:Y'="" DIC("B")=Y W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),EN5:Y<1 I +Y'=OLD S S2="I" G C2
"RTN","FHASN",16,0)
C1 R !!,"Is this a re-screen (Y/N)? ",X:DTIME G KIL:'$T,EN5:X["^" S:X="" X="^" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,!,"  Answer YES or NO" G C1
"RTN","FHASN",17,0)
 S S2=$S(X?1"Y".E:"F",1:"I")
"RTN","FHASN",18,0)
C2 S S1=+Y D NOW^%DTC S NOW=%
"RTN","FHASN",19,0)
 I '$D(^FHPT(FHDFN,0)) S ^(0)=FHDFN
"RTN","FHASN",20,0)
 I '$D(^FHPT(FHDFN,"S",0)) S ^(0)="^115.012D^^"
"RTN","FHASN",21,0)
 K DIC,DD,DO S DIC="^FHPT(FHDFN,""S"",",DIC(0)="L",DLAYGO=115,DA(1)=FHDFN,X=NOW,DINUM=9999999-NOW D FILE^DICN S ASE=+Y
"RTN","FHASN",22,0)
 S $P(^FHPT(FHDFN,"S",ASE,0),"^",2,3)=S1_"^"_DUZ S:FHWRD $P(^(0),"^",6)=FHWRD
"RTN","FHASN",23,0)
 S DTE=+$E(NOW,1,12),S3="Nutrition Status: "_$P(^FH(115.4,S1,0),"^",2),S1=2
"RTN","FHASN",24,0)
 D FIL^FHASE3 G EN5
"RTN","FHASN",25,0)
GET ; Get Nutrition Status for current admission
"RTN","FHASN",26,0)
 S Y="",OLD="",X5=$O(^FHPT(FHDFN,"S",0)) Q:X5=""  S X5=^(X5,0)
"RTN","FHASN",27,0)
 I WARD'="" Q:$P(X5,"^",1)<$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",1)
"RTN","FHASN",28,0)
 S OLD=+$P(X5,"^",2),Y=$P($G(^FH(115.4,OLD,0)),"^",2) K X5 Q
"RTN","FHASN",29,0)
RSET K %ZIS S IOP="" D ^%ZIS K %ZIS,IOP
"RTN","FHASN",30,0)
KIL G KILL^XUSCLEAN
"RTN","FHASN1")
0^48^B5304819
"RTN","FHASN1",1,0)
FHASN1 ; HISC/REL - Print Status Summary ;5/14/93  10:12
"RTN","FHASN1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASN1",3,0)
F0 R !!,"Print by CLINICIAN or WARD? WARD// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="W" D TR^FH I $P("CLINICIAN",X,1)'="",$P("WARD",X,1)'="" W *7,"  Answer with C or W" G F0
"RTN","FHASN1",4,0)
 S SRT=$E(X,1)
"RTN","FHASN1",5,0)
L0 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASN1",6,0)
 I $D(IO("Q")) S FHPGM="Q0^FHASN1",FHLST="SRT" D EN2^FH G KIL
"RTN","FHASN1",7,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHASN1",8,0)
Q0 ; Process Screening
"RTN","FHASN1",9,0)
 K S
"RTN","FHASN1",10,0)
 F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1'>0  D W1 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",W1,FHDFN)) Q:ADM<1  D Q1
"RTN","FHASN1",11,0)
 G P0
"RTN","FHASN1",12,0)
Q1 ; Tabulate status
"RTN","FHASN1",13,0)
 S X5=$O(^FHPT(FHDFN,"S",0)) G:X5="" Q2 S X5=^(X5,0)
"RTN","FHASN1",14,0)
 I $P(X5,"^",1)<$S($D(^FHPT(FHDFN,"A",ADM,0)):$P(^(0),"^",1),1:9999999) G Q2
"RTN","FHASN1",15,0)
 S S1=$P(X5,"^",2),D1=$P(X5,"^",3) I S1,S1<5 G Q3
"RTN","FHASN1",16,0)
Q2 ; Unclassified
"RTN","FHASN1",17,0)
 S S1=5,D1=WD
"RTN","FHASN1",18,0)
Q3 ; Set Classification
"RTN","FHASN1",19,0)
 S X=$S(SRT="W":W1,1:D1) S:'$D(S(X)) S(X)="" S $P(S(X),"^",S1)=$P(S(X),"^",S1)+1 Q
"RTN","FHASN1",20,0)
P0 ; Print summary
"RTN","FHASN1",21,0)
 D NOW^%DTC S (NOW,DTP)=% D DTP^FH S PG=0,LN="",$P(LN,"-",66)="" D HDR
"RTN","FHASN1",22,0)
 K ^TMP($J) F W1=0:0 S W1=$O(S(W1)) Q:W1=""  D P1
"RTN","FHASN1",23,0)
 S NAM="" F W1=0:0 S NAM=$O(^TMP($J,NAM)) Q:NAM=""  S D1=^(NAM) D P2
"RTN","FHASN1",24,0)
 W ! Q
"RTN","FHASN1",25,0)
P1 I SRT="W" S NAM=$P($G(^FH(119.6,W1,0)),"^",1)
"RTN","FHASN1",26,0)
 E  S NAM=$P($G(^VA(200,W1,0)),"^",1)
"RTN","FHASN1",27,0)
 Q:NAM=""  S ^TMP($J,NAM_"~"_W1)=S(W1) Q
"RTN","FHASN1",28,0)
P2 D:$Y>(IOSL-8) HDR W !?7,$P(NAM,"~",1),?37 F K=1:1:5 S X=$P(D1,"^",K) W $J(X,7)
"RTN","FHASN1",29,0)
 Q
"RTN","FHASN1",30,0)
W1 ; Get ward parameters
"RTN","FHASN1",31,0)
 S WD=$P($G(^FH(119.6,W1,0)),"^",2) S:'WD WD=0 Q
"RTN","FHASN1",32,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?16,"N U T R I T I O N   S T A T U S   S U M M A R Y",?73,"Page ",PG
"RTN","FHASN1",33,0)
 W !!?(80-$L(DTP)\2),DTP
"RTN","FHASN1",34,0)
 W !!?7,$S(SRT="C":"CLINICIAN",1:"WARD"),?43,"I     II    III     IV    UNC",!?7,LN,! Q
"RTN","FHASN1",35,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHASN3")
0^49^B8443388
"RTN","FHASN3",1,0)
FHASN3 ; HISC/NCA - Nutrition Status Matrix ;9/29/93  10:02
"RTN","FHASN3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASN3",3,0)
EN2 ; Select to print Change Overtime or Admission
"RTN","FHASN3",4,0)
 K DIR S DIR(0)="SO^1:Status Change Over a period of time;2:Status Change from Admission",DIR("A")="Select one to Display" D ^DIR G:$D(DIRUT)!($D(DIROUT)) KIL S FHX1=+Y
"RTN","FHASN3",5,0)
 S WRDS=$O(^FH(119.6,0)) I WRDS'<1,$O(^FH(119.6,WRDS))<1 S WRDS=0 G DT:FHX1=1,E2
"RTN","FHASN3",6,0)
E1 R !!,"Select WARD (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S WRDS=0
"RTN","FHASN3",7,0)
 I X'="ALL" K DIC S DIC="^FH(119.6,",DIC(0)="EMQ" D ^DIC G KIL:$D(DTOUT),E1:Y<1 S WRDS=+Y
"RTN","FHASN3",8,0)
 I FHX1=2 S (SDT,EDT)="" G E2
"RTN","FHASN3",9,0)
DT ; Get From/To Dates
"RTN","FHASN3",10,0)
D1 K %DT S %DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT G:U[X!($D(DTOUT)) KIL G:Y<1 D1 S SDT=+Y
"RTN","FHASN3",11,0)
 I SDT'<DT W *7,"  [Must Start before Today!] " G D1
"RTN","FHASN3",12,0)
D2 K %DT S %DT="AEPX",%DT("A")=" Ending Date: " D ^%DT G:U[X!($D(DTOUT)) KIL G:Y<1 D2 S EDT=+Y
"RTN","FHASN3",13,0)
 I EDT>DT W *7,"  [Greater than Today?] " G D1
"RTN","FHASN3",14,0)
 I EDT'>SDT W *7,"  [Must End after Start] " G D1
"RTN","FHASN3",15,0)
 S X1=EDT\1,X2=SDT\1 D ^%DTC
"RTN","FHASN3",16,0)
 G:'%Y!(X<1) DT
"RTN","FHASN3",17,0)
 S NOM=+X+1
"RTN","FHASN3",18,0)
 W !!,"This Report shows the status change on the starting date and on the ending date.",!,"Excludes any Admission starting from the starting date.",!
"RTN","FHASN3",19,0)
 G L0
"RTN","FHASN3",20,0)
E2 ; Get # of Days from Admission
"RTN","FHASN3",21,0)
 W ! K DIR S DIR(0)="NAO^3:99",DIR("?")="The response must be a number from 3-99"
"RTN","FHASN3",22,0)
 S DIR("A")="Enter # of Days from Admission: "
"RTN","FHASN3",23,0)
 D ^DIR G:$D(DIRUT)!($D(DIROUT)) KIL S NOM=+Y
"RTN","FHASN3",24,0)
L0 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASN3",25,0)
 I $D(IO("Q")) S FHPGM="Q0^FHASN4",FHLST="FHX1^NOM^SDT^EDT^WRDS" D EN2^FH G KIL
"RTN","FHASN3",26,0)
 U IO D Q0^FHASN4 D ^%ZISC K %ZIS,IOP G KIL:'WRDS,FHASN3
"RTN","FHASN3",27,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHASN3",28,0)
HD ; Check for end of page
"RTN","FHASN3",29,0)
 I IOST?1"C".E W:$X>1 ! W *7 K DIR S DIR(0)="E" D ^DIR I 'Y S ANS="^" Q
"RTN","FHASN3",30,0)
HDR ; Print heading
"RTN","FHASN3",31,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,HD,?72,"Page ",PG
"RTN","FHASN3",32,0)
 W !!?9,"N U T R I T I O N   S T A T U S   C H A N G E   M A T R I X"
"RTN","FHASN3",33,0)
 W !!,"WARD",?30,DTE,!,$P(NAM,"~",1)
"RTN","FHASN3",34,0)
 I FHX1=1 W !?17,"Shows Status Change on Start Date and End Date",!?17,"(Excludes Any Admission from the starting date)"
"RTN","FHASN3",35,0)
 W !!,?23,"BEG STATUS",?54,"END STATUS",?73,"STATUS"
"RTN","FHASN3",36,0)
 W !,"STATUS",?26,"TOTAL",?43,"I     II    III     IV    UNC   SAME",!,LN,! Q
"RTN","FHASN4")
0^50^B19267930
"RTN","FHASN4",1,0)
FHASN4 ; HISC/NCA - Nutrition Status Matrix (cont.) ;8/3/94  11:11
"RTN","FHASN4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASN4",3,0)
Q0 ; Process Screening
"RTN","FHASN4",4,0)
 K S,^TMP($J),CTN,CTR S CT=0,ANS=""
"RTN","FHASN4",5,0)
 F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1'>0  D F0
"RTN","FHASN4",6,0)
 G P0
"RTN","FHASN4",7,0)
F0 I WRDS,W1'=WRDS Q
"RTN","FHASN4",8,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",W1,FHDFN)) Q:ADM<1  S (NEW,OLD)=0 D Q1
"RTN","FHASN4",9,0)
 Q
"RTN","FHASN4",10,0)
Q1 ; Process screening inpatients for status comparison
"RTN","FHASN4",11,0)
 S ADTE=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",1) Q:ADTE=""
"RTN","FHASN4",12,0)
 S DSCH=$P($G(^DGPM(ADM,0)),"^",17) S:DSCH>0 DSCH=$P($G(^DGPM(+DSCH,0)),"^",1)
"RTN","FHASN4",13,0)
 I FHX1=2 S SDT=ADTE,EDT=DT
"RTN","FHASN4",14,0)
 S X1=EDT\1,X2=ADTE\1 D ^%DTC Q:'%Y
"RTN","FHASN4",15,0)
 I FHX1=1 Q:X<NOM  I X'>NOM,SDT<(ADTE\1) Q
"RTN","FHASN4",16,0)
 I FHX1=2 Q:X'=NOM
"RTN","FHASN4",17,0)
 I DSCH,DSCH>SDT,DSCH<EDT Q
"RTN","FHASN4",18,0)
 ; Tabulate status for new
"RTN","FHASN4",19,0)
 S X4=EDT+1,X4=X4+.0001,X4=9999999-X4
"RTN","FHASN4",20,0)
 S X4=$O(^FHPT(FHDFN,"S",X4)) G:'X4 Q2 S X5=^(X4,0)
"RTN","FHASN4",21,0)
 I $P(X5,"^",1)<$S(SDT:SDT,1:9999999) G Q2:$P(X5,"^",1)<ADTE,CNT
"RTN","FHASN4",22,0)
 S NEW=$S($P(X5,"^",2)<5:$P(X5,"^",2),1:5)
"RTN","FHASN4",23,0)
 G Q3
"RTN","FHASN4",24,0)
CNT ; Count unchanged status
"RTN","FHASN4",25,0)
 S (OLD,NEW)=$S($P(X5,"^",2)<5:$P(X5,"^",2),1:5)
"RTN","FHASN4",26,0)
 G Q5
"RTN","FHASN4",27,0)
Q2 ; Unclassified New
"RTN","FHASN4",28,0)
 S NEW=5
"RTN","FHASN4",29,0)
Q3 ; Tabulate status for old
"RTN","FHASN4",30,0)
 S L1=SDT\1,L1=L1-.0001
"RTN","FHASN4",31,0)
 S L1=$O(^FHPT(FHDFN,"S","B",L1)) G:L1=""!(L1\1>EDT) Q4
"RTN","FHASN4",32,0)
 S L1=9999999-L1,X6=$G(^FHPT(FHDFN,"S",L1,0)) G:X6="" Q4
"RTN","FHASN4",33,0)
 S X1=SDT\1-.0001,X1=X1\1,X2=3 D C^%DTC S THR=X
"RTN","FHASN4",34,0)
 I $P(X6,"^",1)>$S(THR:THR+.3,1:9999999) G:SDT\1=ADTE\1 Q4 S L1=$O(^FHPT(FHDFN,"S",L1)) G:L1="" Q4 S X6=$G(^(L1,0)) G:$P(X6,"^",1)<ADTE Q4
"RTN","FHASN4",35,0)
 S OLD=$S($P(X6,"^",2)<5:$P(X6,"^",2),1:5)
"RTN","FHASN4",36,0)
 G Q5
"RTN","FHASN4",37,0)
Q4 ; Unclassified Old
"RTN","FHASN4",38,0)
 S OLD=5
"RTN","FHASN4",39,0)
Q5 ; Set Classification for Old and New
"RTN","FHASN4",40,0)
 I OLD=NEW S:'$D(CTR(W1)) CTR(W1)="" S $P(CTR(W1),"^",OLD)=$P(CTR(W1),"^",OLD)+1,$P(CTR(W1),"^",6)=$P(CTR(W1),"^",6)+1
"RTN","FHASN4",41,0)
 S:'$D(S(W1,OLD)) S(W1,OLD)="" S $P(S(W1,OLD),"^",NEW)=$P(S(W1,OLD),"^",NEW)+1
"RTN","FHASN4",42,0)
 S:'$D(CTN(W1)) CTN(W1)="" S $P(CTN(W1),"^",OLD)=$P(CTN(W1),"^",OLD)+1
"RTN","FHASN4",43,0)
 I OLD=NEW Q:OLD'=5
"RTN","FHASN4",44,0)
 S CT=CT+1
"RTN","FHASN4",45,0)
 S:'$D(^TMP($J,"VEC1",W1,OLD,NEW,CT)) ^TMP($J,"VEC1",W1,OLD,NEW,CT)=""
"RTN","FHASN4",46,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHASN4",47,0)
 S Y=$P($G(^DPT(DFN,0)),"^",1) S:Y="" Y="Unknown" D PID^FHDPA
"RTN","FHASN4",48,0)
 S ^TMP($J,"VEC1",W1,OLD,NEW,CT)=$E(Y,1,30)_"^"_BID
"RTN","FHASN4",49,0)
 S $P(^TMP($J,"VEC1",W1,OLD,NEW,CT),"^",NEW+2)=$P(^TMP($J,"VEC1",W1,OLD,NEW,CT),"^",NEW+2)+1
"RTN","FHASN4",50,0)
 Q
"RTN","FHASN4",51,0)
P0 ; Print Summary
"RTN","FHASN4",52,0)
 D NOW^%DTC S (NOW,DTP)=% D DTP^FH S HD=DTP S PG=0,LN="",$P(LN,"-",80)=""
"RTN","FHASN4",53,0)
 I FHX1=1 S DTP=SDT D DTP^FH S DTE=DTP_" to " S DTP=EDT D DTP^FH S DTE=DTE_DTP
"RTN","FHASN4",54,0)
 I FHX1=2 S DTE="Admission "_NOM_" Days to "_HD
"RTN","FHASN4",55,0)
 F W1=0:0 S W1=$O(S(W1)) Q:W1=""  F ST=0:0 S ST=$O(S(W1,ST)) Q:ST=""  D P1
"RTN","FHASN4",56,0)
 F W1=0:0 S W1=$O(CTN(W1)) Q:W1=""  S NAM=$P($G(^FH(119.6,+W1,0)),"^",1) S:NAM'="" ^TMP($J,"CNT",NAM_"~"_W1,0)=$P(CTN(W1),"^",1)_"^"_$P(CTN(W1),"^",2)_"^"_$P(CTN(W1),"^",3)_"^"_$P(CTN(W1),"^",4)_"^"_$P(CTN(W1),"^",5)_"^"_$G(CTR(W1))
"RTN","FHASN4",57,0)
 S (NAM,STS)="",N=1
"RTN","FHASN4",58,0)
 F W1=0:0 S NAM=$O(^TMP($J,"VEC2",NAM)) Q:NAM=""!(ANS="^")  D HDR^FHASN3:N=1,HD^FHASN3:N'=1 S (TOT,SUM)=0,TOT1="",N=N+1 F ST=0:0 S ST=$O(^TMP($J,"VEC2",NAM,ST)) D:ST<1 LAST Q:ST<1!(ANS="^")  S STS=ST,D1=^(STS,0) D P2
"RTN","FHASN4",59,0)
 K ^TMP($J),CTN,CTR,N,SUM,TOT,TOT1,X
"RTN","FHASN4",60,0)
 W ! Q
"RTN","FHASN4",61,0)
P1 S NAM=$P($G(^FH(119.6,+W1,0)),"^",1)
"RTN","FHASN4",62,0)
 Q:NAM=""  S ^TMP($J,"VEC2",NAM_"~"_W1,ST,0)=$G(S(W1,ST))
"RTN","FHASN4",63,0)
 F LL=1:1:5 I $D(^TMP($J,"VEC1",W1,ST,LL)) F CT=0:0 S CT=$O(^TMP($J,"VEC1",W1,ST,LL,CT)) Q:CT<1  S ^TMP($J,"VEC2",NAM_"~"_W1,ST,"NS",LL,CT)=$G(^TMP($J,"VEC1",W1,ST,LL,CT))
"RTN","FHASN4",64,0)
 Q
"RTN","FHASN4",65,0)
P2 D:$Y'<(IOSL-3) HD^FHASN3 Q:ANS="^"
"RTN","FHASN4",66,0)
 W !,$S(STS=1:"I",STS=2:"II",STS=3:"III",STS=4:"IV",1:"UNC")
"RTN","FHASN4",67,0)
 S TOT=$G(^TMP($J,"CNT",NAM,0)) W ?24,$J($P(TOT,"^",STS),7) S SUM=SUM+$P(TOT,"^",STS)
"RTN","FHASN4",68,0)
 W ?37 F K=1:1:5 S X=$P(D1,"^",K) W $J(X,7) S $P(TOT1,"^",K)=$P(TOT1,"^",K)+X
"RTN","FHASN4",69,0)
 S X=$P(TOT,"^",5+STS) W $J(X,7)
"RTN","FHASN4",70,0)
 F LL=0:0 S LL=$O(^TMP($J,"VEC2",NAM,STS,"NS",LL)) Q:LL<1  F CT=0:0 S CT=$O(^TMP($J,"VEC2",NAM,STS,"NS",LL,CT)) Q:CT<1  S Y=^(CT) W !?1,$P(Y,"^",2),?10,$E($P(Y,"^",1),1,26),?37 D
"RTN","FHASN4",71,0)
 .F L=1:1:5 S AST=$P(Y,"^",L+2) S:AST AST="*" W $J(AST,7)
"RTN","FHASN4",72,0)
 .Q
"RTN","FHASN4",73,0)
 Q
"RTN","FHASN4",74,0)
LAST ; Last Total Line
"RTN","FHASN4",75,0)
 W !,LN,!,"Total",?24,$J(SUM,7),?37 F L=1:1:5 W $J($P(TOT1,"^",L),7)
"RTN","FHASN4",76,0)
 W $J($S($P(TOT,"^",11)'="":$P(TOT,"^",11),1:""),7)
"RTN","FHASN4",77,0)
 Q
"RTN","FHASN5")
0^51^B12778356
"RTN","FHASN5",1,0)
FHASN5 ; HISC/NCA - Print Patient's Nutrition Status History ;12/13/93  12:58
"RTN","FHASN5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASN5",3,0)
EN2 ; Select Patient to print
"RTN","FHASN5",4,0)
 S ALL=1 D ^FHDPA G:'DFN KIL S:WARD="" (ADM,ADTE,DSCH)=""
"RTN","FHASN5",5,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"Patient has expired." G EN2
"RTN","FHASN5",6,0)
 S X5=$O(^FHPT(FHDFN,"S",0)) I X5="" W *7,!!?5,"No status on file for this patient." G EN2
"RTN","FHASN5",7,0)
 I $O(^FHPT(FHDFN,"A",0))<1 G D1
"RTN","FHASN5",8,0)
 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="Q",DA=FHDFN,X="??" D ^DIC
"RTN","FHASN5",9,0)
 S WARD=$G(^DPT(DFN,.1))
"RTN","FHASN5",10,0)
A0 W !!,"Select ADMISSION",$S(WARD'="":" (or C for CURRENT)",1:""),": " R X:DTIME G:'$T!(X["^") KIL D:X="c" TR^FH I X="" G D1:WARD="",KIL
"RTN","FHASN5",11,0)
 I WARD'="",X="C" S ADM=$G(^DPT("CN",WARD,DFN)) G A1:ADM,KIL
"RTN","FHASN5",12,0)
 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="EQM" D ^DIC G:Y<1 A0 S ADM=+Y
"RTN","FHASN5",13,0)
A1 S ADTE=$P($G(^DGPM(ADM,0)),"^",1),DSCH=$P($G(^DGPM(ADM,0)),"^",17) I DSCH S Z1=$G(^DGPM(DSCH,0)),MV=$P(Z1,"^",18),DSCH=$S("^13^42^43^45^46^"[("^"_MV_"^"):$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",14),1:$P(Z1,"^",1))
"RTN","FHASN5",14,0)
D1 S %DT="AEPTX",%DT("A")="Starting Date: FIRST// " W ! D ^%DT S:$D(DTOUT) X="^" G:X[U KIL S:X="" Y=ADTE G:Y<0 D1 S SDT=+Y
"RTN","FHASN5",15,0)
 I SDT\1'<DT W *7,"  [Must Start before Today!] " G D1
"RTN","FHASN5",16,0)
 I SDT,SDT<ADTE W *7," [Must not be before Admission!]" G D1
"RTN","FHASN5",17,0)
D2 S %DT="AEPTX",%DT("A")="Ending Date: LAST// " D ^%DT S:$D(DTOUT) X="^" G:X[U KIL S:X="" Y=DSCH G:Y<0 D2 S EDT=+Y
"RTN","FHASN5",18,0)
 I EDT\1>DT W *7,"  [Greater than Today?] " G D1
"RTN","FHASN5",19,0)
 I EDT,EDT<SDT W *7," [Must not be before Starting Date!] " G D1
"RTN","FHASN5",20,0)
 I EDT,DSCH,EDT>DSCH W *7,!?24," [Must not exceed the length of stay of this admission!] " G D1
"RTN","FHASN5",21,0)
P0 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASN5",22,0)
 I $D(IO("Q")) S FHPGM="Q0^FHASN5",FHLST="FHDFN^DFN^PID^ADM^EDT^SDT^ADTE^WARD^DSCH" D EN2^FH G KIL
"RTN","FHASN5",23,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G FHASN5
"RTN","FHASN5",24,0)
Q0 D NOW^%DTC S NOW=% S PG=0,Y=$G(^DPT(DFN,0)),NAM=$P(Y,"^",1)
"RTN","FHASN5",25,0)
 K ^TMP($J,"SH") S (ANS,LN,RM)="",$P(LN,"-",80)="",SDT=9999999-SDT,ZZ=EDT#1,EDT=$S(EDT:9999999-$S(ZZ:EDT,1:(EDT+.3)),1:EDT)
"RTN","FHASN5",26,0)
 I ADM S Y=$G(^FHPT(FHDFN,"A",ADM,0)),WARD=$P(Y,"^",8),WARD=$P($G(^FH(119.6,+WARD,0)),"^",1),RM=$P(Y,"^",9),RM=$P($G(^DG(405.4,+RM,0)),"^",1)
"RTN","FHASN5",27,0)
 D HDR F X5=EDT:0 S X5=$O(^FHPT(FHDFN,"S",X5)) Q:X5<1!(X5>SDT)  S X4=$G(^(X5,0)) I X4'="" S X2=9999999-X5,^TMP($J,"SH",X2,0)=X4
"RTN","FHASN5",28,0)
 I $O(^TMP($J,"SH",0))<1 W *7,!,"No Status on file on this Admission." G KIL
"RTN","FHASN5",29,0)
 F X5=0:0 S X5=$O(^TMP($J,"SH",X5)) Q:X5<1  S X4=$G(^(X5,0)) D LP Q:ANS="^"
"RTN","FHASN5",30,0)
KIL K ^TMP($J,"SH") G KILL^XUSCLEAN
"RTN","FHASN5",31,0)
LP ; Print History list
"RTN","FHASN5",32,0)
 D:$Y'<(IOSL-3) HD Q:ANS="^"
"RTN","FHASN5",33,0)
 S STS=$P(X4,"^",2),TIT=$S(STS=1:"I  ",STS=2:"II ",STS=3:"III",STS=4:"IV ",1:"V  ")_"  "_$S(STS<5:$P($G(^FH(115.4,+STS,0)),"^",3),1:"UNCLASSIFIED") W !?2,TIT
"RTN","FHASN5",34,0)
 W ?35 S DTP=$P(X4,"^",1) D DTP^FH W DTP
"RTN","FHASN5",35,0)
 S Y=$P(X4,"^",3) W ?55,$E($P($G(^VA(200,+Y,0)),"^",1),1,25)
"RTN","FHASN5",36,0)
 Q
"RTN","FHASN5",37,0)
HD ; Check for end of page
"RTN","FHASN5",38,0)
 I IOST?1"C".E W:$X>1 ! W *7 K DIR S DIR(0)="E" D ^DIR I 'Y S ANS="^" Q
"RTN","FHASN5",39,0)
HDR ; Heading for the Nutrition Status History
"RTN","FHASN5",40,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHASN5",41,0)
 W ! W:PID'="" PID W ?17,NAM S DTP=NOW D DTP^FH W ?53,DTP,?72,"Page ",PG,!
"RTN","FHASN5",42,0)
 I ADM W:WARD'="" ?17,"WARD  ",WARD W:RM'="" ?53,"RM  ",RM
"RTN","FHASN5",43,0)
 W !,LN,!?15,"N U T R I T I O N   S T A T U S   H I S T O R Y",!!
"RTN","FHASN5",44,0)
 W ?2,"Status Level",?35,"Date Entered",?55,"Clinician Who Entered",! Q
"RTN","FHASN6")
0^52^B11586994
"RTN","FHASN6",1,0)
FHASN6 ; HISC/NCA - List Inpats By Nutrition Status Level ;3/1/95  10:58
"RTN","FHASN6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASN6",3,0)
EN2 ; Select Status to print
"RTN","FHASN6",4,0)
 K DIR S DIR(0)="SO^1:NORMAL;2:MILDLY COMPROMISED;3:MODERATELY COMPROMISED;4:SEVERELY COMPROMISED;5:UNCLASSIFIED",DIR("A")="Choose a Nutrition Status Level" D ^DIR G:$D(DIRUT)!($D(DIROUT)) KIL S STS=+Y
"RTN","FHASN6",5,0)
F0 R !!,"Print by CLINICIAN or WARD? WARD// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="W" D TR^FH I $P("CLINICIAN",X,1)'="",$P("WARD",X,1)'="" W *7,"  Answer with C or W" G F0
"RTN","FHASN6",6,0)
 S SRT=$E(X,1)
"RTN","FHASN6",7,0)
L0 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASN6",8,0)
 I $D(IO("Q")) S FHPGM="Q0^FHASN6",FHLST="STS^SRT" D EN2^FH G KIL
"RTN","FHASN6",9,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G FHASN6
"RTN","FHASN6",10,0)
Q0 ; Process Screening
"RTN","FHASN6",11,0)
 K ^TMP($J)
"RTN","FHASN6",12,0)
 S TIT="Current Inpatients At Nutrition Status: ",ANS=""
"RTN","FHASN6",13,0)
 S TIT=TIT_$P("I,II,III,IV,V",",",+STS)_" "_$S(STS<5:$P($G(^FH(115.4,+STS,0)),"^",2),1:"Unclassified")
"RTN","FHASN6",14,0)
 F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1'>0  D W1 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",W1,FHDFN)) Q:ADM<1  D Q1
"RTN","FHASN6",15,0)
 D P0
"RTN","FHASN6",16,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHASN6",17,0)
Q1 ; Tabulate status
"RTN","FHASN6",18,0)
 S DTE="",X5=$O(^FHPT(FHDFN,"S",0)) G:X5="" Q2 S X5=^(X5,0)
"RTN","FHASN6",19,0)
 I $P(X5,"^",1)<$S($D(^FHPT(FHDFN,"A",ADM,0)):$P(^(0),"^",1),1:9999999) G Q2
"RTN","FHASN6",20,0)
 S S1=$P(X5,"^",2),D1=$P(X5,"^",3),DTE=$P(X5,"^",1) I S1,S1<5 G Q3
"RTN","FHASN6",21,0)
Q2 ; Unclassified
"RTN","FHASN6",22,0)
 S S1=5,D1=WD
"RTN","FHASN6",23,0)
Q3 ; Set Classification
"RTN","FHASN6",24,0)
 S XX=$S(SRT="W":W1,1:D1)
"RTN","FHASN6",25,0)
Q4 ; Store Status
"RTN","FHASN6",26,0)
 I S1'=STS Q
"RTN","FHASN6",27,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHASN6",28,0)
 S X2=$G(^FHPT(FHDFN,"A",ADM,0)),RM=$P(X2,"^",9),RM=$P($G(^DG(405.4,+RM,0)),"^",1),X3=$G(^DPT(DFN,0)),PAT=$E($P(X3,"^",1),1,23) D PID^FHDPA
"RTN","FHASN6",29,0)
 D P1
"RTN","FHASN6",30,0)
 Q
"RTN","FHASN6",31,0)
P0 ; Print summary
"RTN","FHASN6",32,0)
 D NOW^%DTC S DTP=% D DTP^FH S NOW=DTP,PG=0,LN="",$P(LN,"-",80)="" D HDR
"RTN","FHASN6",33,0)
 I '$D(^TMP($J)) W !!,"There are No current inpatients with ",$S(STS<5:$P($G(^FH(115.4,+STS,0)),"^",2),1:"Unclassified")," nutrition status.",!! Q
"RTN","FHASN6",34,0)
 W ! S NAM="" F W1=0:0 S NAM=$O(^TMP($J,NAM)) Q:NAM=""!(ANS="^")  W NAM F W2=0:0 S W2=$O(^TMP($J,NAM,W2)) Q:W2<1!(ANS="^")  S PAT="" D P2
"RTN","FHASN6",35,0)
 W ! Q
"RTN","FHASN6",36,0)
P1 I SRT="W" S NAM=$E($P($G(^FH(119.6,+XX,0)),"^",1),1,15)
"RTN","FHASN6",37,0)
 E  S NAM=$E($P($G(^VA(200,+XX,0)),"^",1),1,26)
"RTN","FHASN6",38,0)
 Q:NAM=""  S:DTE="" DTE=$P(^FHPT(FHDFN,"A",ADM,0),"^",1) S ^TMP($J,NAM,DTE,PAT)=BID_"^"_$E(RM,1,10) Q
"RTN","FHASN6",39,0)
P2 S PAT=$O(^TMP($J,NAM,W2,PAT)) Q:PAT=""  S D1=$G(^(PAT))
"RTN","FHASN6",40,0)
 D:$Y'<(IOSL-3) HD Q:ANS="^"
"RTN","FHASN6",41,0)
 S BID=$P(D1,"^",1),RM=$P(D1,"^",2)
"RTN","FHASN6",42,0)
 W:SRT="W" ?15,RM W ?28,PAT,?53,BID,?62 S DTP=W2 D DTP^FH W DTP,!!
"RTN","FHASN6",43,0)
 G P2
"RTN","FHASN6",44,0)
W1 ; Get ward parameters
"RTN","FHASN6",45,0)
 S WD=$P($G(^FH(119.6,W1,0)),"^",2) S:'WD WD=0 Q
"RTN","FHASN6",46,0)
HD ; Check for end of page
"RTN","FHASN6",47,0)
 I IOST?1"C".E W:$X>1 ! W *7 K DIR S DIR(0)="E" D ^DIR I 'Y S ANS="^" Q
"RTN","FHASN6",48,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,NOW,?72,"Page ",PG,!!?(80-$L(TIT)\2),TIT
"RTN","FHASN6",49,0)
 W !!,$S(SRT="W":"Ward           Room",1:"Clinician"),?28,"Patient",?53,"ID#",?62,"Date Entered",!,LN,! Q
"RTN","FHASN7")
0^53^B3501634
"RTN","FHASN7",1,0)
FHASN7 ; HISC/NCA - Print Status Average ;3/10/95  08:55
"RTN","FHASN7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASN7",3,0)
F0 R !!,"Print by CLINICIAN or WARD? WARD// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="W" D TR^FH I $P("CLINICIAN",X,1)'="",$P("WARD",X,1)'="" W *7,"  Answer with C or W" G F0
"RTN","FHASN7",4,0)
 S SRT=$E(X,1)
"RTN","FHASN7",5,0)
DT ; Get From/To Dates
"RTN","FHASN7",6,0)
D1 S %DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT S:$D(DTOUT) X="^" G KIL:U[X,D1:Y<1 S SDT=+Y
"RTN","FHASN7",7,0)
 I SDT'<DT W *7,"  [Must Start before Today!] " G D1
"RTN","FHASN7",8,0)
D2 S %DT="AEPX",%DT("A")=" Ending Date: " D ^%DT S:$D(DTOUT) X="^" G KIL:U[X,D2:Y<1 S EDT=+Y
"RTN","FHASN7",9,0)
 I EDT>DT W *7,"  [Greater than Today?] " G D1
"RTN","FHASN7",10,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHASN7",11,0)
L0 K IOP,%ZIS,ZTRTN,ZTSAVE,ZTDESC
"RTN","FHASN7",12,0)
 W !!,"The report requires a 132 column printer.",!
"RTN","FHASN7",13,0)
 S %ZIS="QM",%ZIS("B")="",IOP="Q" W !! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASN7",14,0)
 I $D(IO("Q")) D  G KIL
"RTN","FHASN7",15,0)
 .K IO("Q")
"RTN","FHASN7",16,0)
 .S ZTRTN="TSK^FHASN7",ZTREQ="@"
"RTN","FHASN7",17,0)
 .S ZTSAVE("SRT")="",ZTSAVE("SDT")="",ZTSAVE("EDT")="",ZTSAVE("ZTREQ")=""
"RTN","FHASN7",18,0)
 .S ZTDESC="Nutrition Status Average"
"RTN","FHASN7",19,0)
 .D ^%ZTLOAD
"RTN","FHASN7",20,0)
 .Q
"RTN","FHASN7",21,0)
 E  D  G L0
"RTN","FHASN7",22,0)
 .D ^%ZISC
"RTN","FHASN7",23,0)
 .W !?5,"This is a very time consuming report,"
"RTN","FHASN7",24,0)
 .W !?5,"it must be queued to print.",*7
"RTN","FHASN7",25,0)
 .Q
"RTN","FHASN7",26,0)
 G KIL
"RTN","FHASN7",27,0)
TSK ; Tasking the Report
"RTN","FHASN7",28,0)
 U IO D Q0^FHASN71 D ^%ZISC K %ZIS,IOP,ZTSK G KIL
"RTN","FHASN7",29,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHASN71")
0^54^B18147254
"RTN","FHASN71",1,0)
FHASN71 ; HISC/NCA - Print Status Average (cont.) ;9/28/95  10:52
"RTN","FHASN71",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASN71",3,0)
Q0 ; Process Screening all patients
"RTN","FHASN71",4,0)
 K S,DWRD S TOT=""
"RTN","FHASN71",5,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  F LST=0:0 S LST=$O(^FH(119.6,WRD,"W",LST)) Q:LST<1  S X=+$G(^(LST,0)) S:'$D(DWRD(X)) DWRD(X)=WRD
"RTN","FHASN71",6,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT(FHDFN)) Q:FHDFN<1  I $D(^FHPT(FHDFN,0)) K N S ND=0 D Q1,CALC
"RTN","FHASN71",7,0)
 G P0
"RTN","FHASN71",8,0)
Q1 ; Tabulate status
"RTN","FHASN71",9,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHASN71",10,0)
 S DGT=EDT+1,DGT=DGT+.0000001,(DGA1,DG1,DGXFR0)="" D ^DGPMSTAT Q:DGA1=""!(DG1="")
"RTN","FHASN71",11,0)
 S ADM=DGA1,XX=$G(^DGPM(ADM,0)),DISC=$P(XX,"^",17) S:DISC'="" DISC=$P($G(^DGPM(DISC,0)),"^",1)
"RTN","FHASN71",12,0)
 Q:'$D(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHASN71",13,0)
 S MW1=$S($P(DG1,"^",1):$P(DG1,"^",1),1:0),W1=$S($D(DWRD(+MW1)):$G(DWRD(+MW1)),1:0)
"RTN","FHASN71",14,0)
 I '$D(^FH(119.6,+W1,0)) S MWRD=$P($G(^DIC(42,+MW1,0)),"^",1) S DW1=$O(^FH(119.6,"B",MWRD,0)) Q:DW1<1  S W1=+DW1
"RTN","FHASN71",15,0)
 S WD=$P($G(^FH(119.6,+W1,0)),"^",2) S:'WD WD=0
"RTN","FHASN71",16,0)
 I '$D(^FHPT(FHDFN,"S",0)) D Q2 Q
"RTN","FHASN71",17,0)
 D NS I '$D(^TMP($J,"FHNS")) D Q2 Q
"RTN","FHASN71",18,0)
 S NX="" F X4=0:0 S X4=$O(^TMP($J,"FHNS",X4)) Q:X4<1  S X5=$G(^(X4,0)),NX=X4 D CHK
"RTN","FHASN71",19,0)
 Q
"RTN","FHASN71",20,0)
CHK ; Check if inpat with ADM
"RTN","FHASN71",21,0)
 I $P(X5,"^",1)<$S($D(^FHPT(FHDFN,"A",ADM,0)):$P(^(0),"^",1),1:9999999) D GADM G:'$D(^FHPT(FHDFN,"A",ADM,0)) Q2 G:$P(X5,"^",1)<$S($D(^FHPT(FHDFN,"A",ADM,0)):$P(^(0),"^",1),1:9999999) Q2
"RTN","FHASN71",22,0)
 I DISC,$P(X5,"^",1)>DISC D GADM Q:'$D(^FHPT(FHDFN,"A",ADM,0))  Q:DISC&($P(X5,"^",1)>DISC)
"RTN","FHASN71",23,0)
 S S1=$P(X5,"^",2),D1=$P(X5,"^",3)
"RTN","FHASN71",24,0)
 S W1=$S($P(X5,"^",6)'="":$P(X5,"^",6),1:W1) S:'W1 W1=0 S WD=$P($G(^FH(119.6,+W1,0)),"^",2) S:'WD WD=0
"RTN","FHASN71",25,0)
 I S1,S1<5 G Q3
"RTN","FHASN71",26,0)
Q2 ; Unclassified
"RTN","FHASN71",27,0)
 S S1=5,D1=WD
"RTN","FHASN71",28,0)
Q3 ; Set Classification
"RTN","FHASN71",29,0)
 S X=$S(SRT="W":W1,1:D1) S:'$D(N(X)) N(X)="" S $P(N(X),"^",S1)=$P(N(X),"^",S1)+1,ND=ND+1
"RTN","FHASN71",30,0)
 Q
"RTN","FHASN71",31,0)
GADM ; Get next ADM for pat
"RTN","FHASN71",32,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHASN71",33,0)
 S NX=$O(^DGPM("ATID1",DFN,NX)) Q:NX=""  S ADM=+$O(^(NX,0)),XX=$G(^DGPM(ADM,0)),DISC=$P(XX,"^",17) S:DISC'="" DISC=$P($G(^DGPM(DISC,0)),"^",1)
"RTN","FHASN71",34,0)
 Q:'$D(^FHPT(FHDFN,"A",ADM,0))  Q:$P(X5,"^",1)<$S($D(^FHPT(FHDFN,"A",ADM,0)):$P(^(0),"^",1),1:9999999)
"RTN","FHASN71",35,0)
 S W1=$S($P(XX,"^",6):$P(XX,"^",6),1:0),WD=$P($G(^FH(119.6,+W1,0)),"^",2) S:'WD WD=0
"RTN","FHASN71",36,0)
 Q
"RTN","FHASN71",37,0)
NS ; Nutrition Status in inverse date order
"RTN","FHASN71",38,0)
 K ^TMP($J,"FHNS") S FHX1=9999999-(EDT+.3),FHX2=9999999-(SDT+.0001),ZZ=""
"RTN","FHASN71",39,0)
 F XX=FHX1:0 S XX=$O(^FHPT(FHDFN,"S",XX)) Q:XX<1!(XX>FHX2)  S X=$G(^(XX,0)) D STOR
"RTN","FHASN71",40,0)
 I '$D(^TMP($J,"FHNS")) S XX=FHX1,FHX1=$O(^FHPT(FHDFN,"S",FHX1)) Q:FHX1=""  S X=$G(^(FHX1,0)) D STOR
"RTN","FHASN71",41,0)
 Q
"RTN","FHASN71",42,0)
STOR ; Store Nutrition Status by inverse date
"RTN","FHASN71",43,0)
 I ZZ'=($P(X,"^",1)\1) S ^TMP($J,"FHNS",XX,0)=X
"RTN","FHASN71",44,0)
 S ZZ=$P(X,"^",1)\1
"RTN","FHASN71",45,0)
 Q
"RTN","FHASN71",46,0)
CALC ; Calculate Average
"RTN","FHASN71",47,0)
 I $G(N(0))'="" S L=0 D C1
"RTN","FHASN71",48,0)
 F L=0:0 S L=$O(N(L)) Q:L<1  D C1
"RTN","FHASN71",49,0)
 Q
"RTN","FHASN71",50,0)
C1 F K=1:1:5 D
"RTN","FHASN71",51,0)
 .S X=$S(ND:$P(N(L),"^",K)/ND,1:"")
"RTN","FHASN71",52,0)
 .S X=$J(X,0,0) S:'$D(S(L)) S(L)=""
"RTN","FHASN71",53,0)
 .S $P(S(L),"^",K)=$P(S(L),"^",K)+X
"RTN","FHASN71",54,0)
 .S $P(S(L),"^",6)=$P(S(L),"^",6)+X
"RTN","FHASN71",55,0)
 .S $P(TOT,"^",K)=$P(TOT,"^",K)+X
"RTN","FHASN71",56,0)
 .S $P(TOT,"^",6)=$P(TOT,"^",6)+X
"RTN","FHASN71",57,0)
 .Q
"RTN","FHASN71",58,0)
 Q
"RTN","FHASN71",59,0)
P0 ; Print summary
"RTN","FHASN71",60,0)
 S DTP=SDT D DTP^FH S DTE=DTP_" to " S DTP=EDT D DTP^FH S DTE=DTE_DTP
"RTN","FHASN71",61,0)
 D NOW^%DTC S (NOW,DTP)=% D DTP^FH S PG=0,LN="",$P(LN,"-",100)="" D HDR
"RTN","FHASN71",62,0)
 K ^TMP($J) F W1=0:0 S W1=$O(S(W1)) Q:W1=""  D P1
"RTN","FHASN71",63,0)
 S NAM="" F W1=0:0 S NAM=$O(^TMP($J,NAM)) Q:NAM=""  S D1=^(NAM) D P2
"RTN","FHASN71",64,0)
 I $G(S(0))'="" S D1=$G(S(0)) W ! D
"RTN","FHASN71",65,0)
 .W ?16,"UNKNOWN",?48
"RTN","FHASN71",66,0)
 .F K=1:1:5 S X=$P(D1,"^",K) W $S(X:$J(X,7),1:$J("",7)) S X=$S($P(D1,"^",6):X/$P(D1,"^",6)*100,1:"") W $S(X:$J(X,5,0),1:$J("",5))
"RTN","FHASN71",67,0)
 .S X=$P(D1,"^",6) W $S(X:$J(X,7),1:$J("",7)) Q
"RTN","FHASN71",68,0)
 W !?16,LN,!?16,"Grand Total",?48 F K=1:1:5 S X=$P(TOT,"^",K) W $S(X:$J(X,7),1:$J("",7)) S X=$S($P(TOT,"^",6):X/$P(TOT,"^",6)*100,1:"") W $S(X:$J(X,5,0),1:$J("",5))
"RTN","FHASN71",69,0)
 S X=$P(TOT,"^",6) W $S(X:$J(X,7),1:$J("",7))
"RTN","FHASN71",70,0)
 W ! Q
"RTN","FHASN71",71,0)
P1 I SRT="W" S NAM=$P($G(^FH(119.6,+W1,0)),"^",1)
"RTN","FHASN71",72,0)
 E  S NAM=$P($G(^VA(200,+W1,0)),"^",1)
"RTN","FHASN71",73,0)
 Q:NAM=""  S ^TMP($J,NAM_"~"_W1)=S(W1) Q
"RTN","FHASN71",74,0)
P2 D:$Y>(IOSL-8) HDR W !?16,$P(NAM,"~",1),?48
"RTN","FHASN71",75,0)
 F K=1:1:5 S X=$P(D1,"^",K) W $S(X:$J(X,7),1:$J("",7)) S X=$S($P(D1,"^",6):X/$P(D1,"^",6)*100,1:"") W $S(X:$J(X,5,0),1:$J("",5))
"RTN","FHASN71",76,0)
 S X=$P(D1,"^",6) W $S(X:$J(X,7),1:$J("",7))
"RTN","FHASN71",77,0)
 Q
"RTN","FHASN71",78,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?16,DTP,!!?42,"N U T R I T I O N   S T A T U S   A V E R A G E",?109,"Page ",PG
"RTN","FHASN71",79,0)
 W !!?(132-$L(DTE)\2),DTE
"RTN","FHASN71",80,0)
 W !!?16,$S(SRT="C":"CLINICIAN",1:"WARD"),?54,"I    %     II    %    III    %     IV    %    UNC    %  TOTAL",!?16,LN,! Q
"RTN","FHASP")
0^55^B16874575
"RTN","FHASP",1,0)
FHASP ; HISC/REL - Nutrition Profile ;11/16/94  16:55
"RTN","FHASP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASP",3,0)
P0 S ALL=1 D ^FHDPA G:'DFN KIL S:WARD="" ADM=""
"RTN","FHASP",4,0)
 ;
"RTN","FHASP",5,0)
 W ! S DIR(0)="Y",DIR("A")="Would you like to display ALL monitors"
"RTN","FHASP",6,0)
 S DIR("B")="YES" D ^DIR
"RTN","FHASP",7,0)
 I Y="^" Q
"RTN","FHASP",8,0)
 I Y=1 S FHNUM=9999 G L0
"RTN","FHASP",9,0)
 S DIR(0)="N^1:9999"
"RTN","FHASP",10,0)
 S DIR("A")="How many monitors would you like to display?"
"RTN","FHASP",11,0)
 S DIR("B")=20 D ^DIR
"RTN","FHASP",12,0)
 I Y=""!(Y="^") Q
"RTN","FHASP",13,0)
 S FHNUM=Y
"RTN","FHASP",14,0)
 ;
"RTN","FHASP",15,0)
L0 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASP",16,0)
 I $D(IO("Q")) S FHPGM="Q0^FHASP",FHLST="FHDFN^DFN^PID^ADM^WARD^FHNUM" D EN2^FH G KIL
"RTN","FHASP",17,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G FHASP
"RTN","FHASP",18,0)
Q0 ; Print Profile
"RTN","FHASP",19,0)
 D NOW^%DTC S NOW=%,DT=NOW\1 S FHU=$S($D(^FH(119.9,1,3)):$P(^(3),"^",1),1:"E")
"RTN","FHASP",20,0)
 S Y=^DPT(DFN,0),NAM=$P(Y,"^",1),SEX=$P(Y,"^",2),DOB=$P(Y,"^",3)
"RTN","FHASP",21,0)
 S AGE="" I DOB'="" S AGE=$E(NOW,1,3)-$E(DOB,1,3)-($E(NOW,4,7)<$E(DOB,4,7))
"RTN","FHASP",22,0)
 S LN="",$P(LN,"-",80)="",ANS="",PG=0,S1=$S(IOST?1"C".E:IOSL-2,1:IOSL-7) D HEAD
"RTN","FHASP",23,0)
 W !!,"Status: " I WARD="" W "Outpatient"
"RTN","FHASP",24,0)
 E  S DTP=$P(^DGPM(ADM,0),"^",1) D DTP^FH W "Inpatient admitted ",DTP D ^FHASP2
"RTN","FHASP",25,0)
 S RC="",ASE=$O(^FHPT(FHDFN,"S",0)) I ASE S Y=^(ASE,0),RC=$P(Y,"^",2),DTP=$P(Y,"^",1)
"RTN","FHASP",26,0)
 W !!,"Nutrition Status: " I RC W ?20,$P($G(^FH(115.4,RC,0)),"^",2) D DTP^FH W "  (",$E(DTP,1,9),")"
"RTN","FHASP",27,0)
 D ALG^FHCLN W !!,"Allergies: " S ALG=$S(ALG="":"None on file",1:ALG) D LNE^FHDMP
"RTN","FHASP",28,0)
 W !!?29,"Nutrition Assessments"
"RTN","FHASP",29,0)
 S ASN=$O(^FHPT(FHDFN,"N",0)) I ASN'>0 W !!?5,"No assessments on file." G Q1
"RTN","FHASP",30,0)
 W !!,"Recent Assessments:"
"RTN","FHASP",31,0)
 S N1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"N",K)) Q:K<1  S DTP=$P(^(K,0),"^",1) D DTP^FH W "  ",$E(DTP,1,9) S N1=N1+1 Q:N1=3
"RTN","FHASP",32,0)
 S Y=^FHPT(FHDFN,"N",ASN,0)
"RTN","FHASP",33,0)
 S N1=0 F K=1,4:1:10,20 S N1=N1+1,@$P("ADT HGT HGP WGT WGP DWGT UWGT IBW XD"," ",N1)=$P(Y,"^",K)
"RTN","FHASP",34,0)
 S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:""),X2=+$J(HGT*2.54,0,0)_" cm"
"RTN","FHASP",35,0)
 W !!,"Height: ",X2 W:HGP'="" " ",HGP W " (",X1,")"
"RTN","FHASP",36,0)
 I UWGT S X1=UWGT_" lbs",X2=+$J(UWGT/2.2,0,1)_" kg"
"RTN","FHASP",37,0)
 W ?27,"Usual Wt: " W:UWGT X2," (",X1,")" W ?58,"Weight/Usual Wt: " W:UWGT $J(WGT/UWGT*100,3,0),"%"
"RTN","FHASP",38,0)
 S X1=WGT_" lbs",X2=+$J(WGT/2.2,0,1)_" kg"
"RTN","FHASP",39,0)
 W !,"Weight: ",X2 W:WGP'="" " ",WGP W " (",X1,")"
"RTN","FHASP",40,0)
 S X1=IBW_" lbs",X2=+$J(IBW/2.2,0,1)_" kg"
"RTN","FHASP",41,0)
 W ?27,"Ideal Wt: ",X2," (",X1,")" W:IBW ?58,"Weight/IBW:      ",$J(WGT/IBW*100,3,0),"%"
"RTN","FHASP",42,0)
 S DTP=DWGT D DTP^FH W !,"Date Taken:   ",DTP
"RTN","FHASP",43,0)
 I XD W !!?5,"Nutrition Class: " W ?20,$P($G(^FH(115.3,XD,0)),"^",1)
"RTN","FHASP",44,0)
Q1 S PX=0 D LAB^FHASM4 S PX=$S(WARD="":0,1:1) D DRUG^FHASM4
"RTN","FHASP",45,0)
 W !!?34,"Medications" S N1=0 F N2=0:0 S N2=$O(PSD(N2)) Q:N2=""  D:$Y'<S1 HF Q:ANS="^"  W:'N1 ! W !?5,PSD(N2) S N1=N1+1
"RTN","FHASP",46,0)
 Q:ANS="^"
"RTN","FHASP",47,0)
 I 'N1 W !!?5,"No current medications in selected drug classes."
"RTN","FHASP",48,0)
 W !!?32,"Laboratory Data"
"RTN","FHASP",49,0)
 S N1=0 F K=0:0 S K=$O(LRTST(K)) Q:K=""  D:$Y'<S1 HF Q:ANS="^"  D LAB
"RTN","FHASP",50,0)
 Q:ANS="^"
"RTN","FHASP",51,0)
 I 'N1 W !!?5,"No selected laboratory data available last ",$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)," days."
"RTN","FHASP",52,0)
 G ^FHASP1
"RTN","FHASP",53,0)
LAB S X1=$P(LRTST(K),"^",7) Q:X1=""  S DTP=X1\1 D DTP^FH
"RTN","FHASP",54,0)
 I 'N1 W !?5,"Test",?30,"Result    units",?51,"Ref.   range",?67,"Date",!
"RTN","FHASP",55,0)
 S N1=N1+1
"RTN","FHASP",56,0)
 W !?5,$P(LRTST(K),"^",1),?27,$P(LRTST(K),"^",6),?40,$P(LRTST(K),"^",4),?51,$P(LRTST(K),"^",5),?65,DTP Q
"RTN","FHASP",57,0)
HF ; Do Header and Footer
"RTN","FHASP",58,0)
 D FOOT Q:ANS="^"  D HEAD
"RTN","FHASP",59,0)
 Q
"RTN","FHASP",60,0)
HEAD ; Page Header
"RTN","FHASP",61,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=DT D DTP^FH
"RTN","FHASP",62,0)
 W !,LN,!,DTP,?31,"NUTRITION PROFILE",?73,"Page ",PG,!,LN
"RTN","FHASP",63,0)
 W !,NAM,?40,$S(SEX="M":"Male",SEX="F":"Female",1:""),?73,"Age ",AGE,! Q
"RTN","FHASP",64,0)
FOOT ; Page Footer
"RTN","FHASP",65,0)
 D PAUSE Q:IOST?1"C".E
"RTN","FHASP",66,0)
 F KK=1:1:IOSL-$Y-6 W !
"RTN","FHASP",67,0)
 D SITE^FH W !,LN,!,NAM W ?(80-$L(SITE)\2),SITE,?67,"VAF 10-9034"
"RTN","FHASP",68,0)
 W ! W:PID'="" PID
"RTN","FHASP",69,0)
 S W1=$G(^DPT(DFN,.1)) S:$D(^DPT(DFN,.101)) W1=W1_"/"_^DPT(DFN,.101) W:W1'="" ?(80-$L(W1)\2),W1 W ?66,"(Vice SF 509)"
"RTN","FHASP",70,0)
 W !,LN,! Q
"RTN","FHASP",71,0)
PAUSE ; Pause For Scroll
"RTN","FHASP",72,0)
 I IOST?1"C".E R !!,"Press RETURN to continue. ",X:DTIME S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHASP",73,0)
 Q
"RTN","FHASP",74,0)
KIL ; Final variable kill
"RTN","FHASP",75,0)
 G KILL^XUSCLEAN
"RTN","FHASP1")
0^56^B16358458
"RTN","FHASP1",1,0)
FHASP1 ; HISC/REL/JH - Nutrition Profile (cont) ;5/2/01  10:14
"RTN","FHASP1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASP1",3,0)
 ;
"RTN","FHASP1",4,0)
 S X1=DT,X2=-1095 D C^%DTC S DTE=X,N1=0 W !!?22,"Dietetic Encounters Last Three Years"
"RTN","FHASP1",5,0)
 F DTE=DTE:0 S DTE=$O(^FHEN("AP",DFN,DTE)) Q:DTE<1!(ANS="^")  F ASN=0:0 S ASN=$O(^FHEN("AP",DFN,DTE,ASN)) Q:ASN<1  D:$Y'<S1 HF^FHASP Q:ANS="^"  D LST
"RTN","FHASP1",6,0)
 Q:ANS="^"
"RTN","FHASP1",7,0)
 I 'N1 W !!?5,"No Encounters recorded last three years."
"RTN","FHASP1",8,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHASP1",9,0)
 S FADM=$O(^FHPT(FHDFN,"A",""),-1) S FADM=$S($G(ADM):$G(ADM),FADM:FADM,1:"") G:FADM="" F1
"RTN","FHASP1",10,0)
 D:$Y'<(S1-6) HF^FHASP Q:ANS="^"  W !!?28,$S($G(ADM):"Current",1:"Last")," Admission Monitors" S N1=0
"RTN","FHASP1",11,0)
 ; F NDT=0:0 S NDT=$O(^FHPT(FHDFN,"A",FADM,"MO","AC",NDT)) Q:NDT<1  F K=0:0 S K=$O(^FHPT(FHDFN,"A",FADM,"MO","AC",NDT,K)) Q:K<1  D MO
"RTN","FHASP1",12,0)
 S FHTTLM="",FHTTLM=$P($G(^FHPT(FHDFN,"A",FADM,"MO",0)),U,3)
"RTN","FHASP1",13,0)
 I FHTTLM="" W !,"No Monitors on file." G F1
"RTN","FHASP1",14,0)
 S FHMONS=$S(FHTTLM-FHNUM<0:0,1:FHTTLM-FHNUM)
"RTN","FHASP1",15,0)
 F NDT=FHMONS:0 S NDT=$O(^FHPT(FHDFN,"A",FADM,"MO",NDT)) Q:NDT<1!(ANS="^")  S K=NDT D MO
"RTN","FHASP1",16,0)
 Q:ANS="^"  I 'N1 W !,"No Monitors on file."
"RTN","FHASP1",17,0)
F1 D:$Y'<(S1-6) HF^FHASP Q:ANS="^"  W !!?32,"Food Preferences" D DISP
"RTN","FHASP1",18,0)
 W !!?27,"Future Clinic Appointments" S N1=0
"RTN","FHASP1",19,0)
 ;
"RTN","FHASP1",20,0)
 ;patch #41
"RTN","FHASP1",21,0)
 ;F NDT=NOW:0 S NDT=$O(^DPT(DFN,"S",NDT)) Q:NDT'>0  S Z=^(NDT,0) I "I"[$P(Z,"^",2) D CLIN Q:ANS="^"
"RTN","FHASP1",22,0)
 K ^TMP($J)
"RTN","FHASP1",23,0)
 S FHCNT=""
"RTN","FHASP1",24,0)
 D GETAPPT^SDAMA201(DFN,"1;2;12","R",DT,,.FHCNT,"")
"RTN","FHASP1",25,0)
 G:'$D(^TMP($J,"SDAMA201","GETAPPT")) NOAPP
"RTN","FHASP1",26,0)
 I $D(^TMP($J,"SDAMA201","GETAPPT")) S FHTMP=$NA(^TMP($J,"SDAMA201","GETAPPT"))
"RTN","FHASP1",27,0)
 I $D(@FHTMP@("ERROR")) D PRERR
"RTN","FHASP1",28,0)
 I $G(FHCNT) F FHI=0:0 S FHI=$O(@FHTMP@(FHI)) Q:FHI'>0  D CLIN I ANS="^" K ^TMP($J) Q
"RTN","FHASP1",29,0)
 K ^TMP($J)
"RTN","FHASP1",30,0)
 ;end changes in patch #41
"RTN","FHASP1",31,0)
 Q:ANS="^"
"RTN","FHASP1",32,0)
NOAPP I 'N1 W !!?5,"No scheduled appointments."
"RTN","FHASP1",33,0)
 D FOOT^FHASP Q
"RTN","FHASP1",34,0)
LST S X0=$G(^FHEN(ASN,0)) Q:$P(X0,"^",4)<3
"RTN","FHASP1",35,0)
 S X1=$G(^FHEN(ASN,"P",DFN,0))
"RTN","FHASP1",36,0)
 W:'N1 ! S N1=N1+1,DTP=$P(X0,"^",2) D DTP^FH W !?5,$E(DTP,1,9),"  " S Y=$P(X0,"^",4),Y=$P($G(^FH(115.6,+Y,0)),"^",1) W Y I $P(X0,"^",7)="F" W " (FU)"
"RTN","FHASP1",37,0)
 S Y=$P(X0,"^",9) W ", ",$S(Y="G":"Group",1:"Individual")
"RTN","FHASP1",38,0)
 S Y=$P(X0,"^",11) W:Y'="" !?10,Y S Y=$P(X1,"^",4) W:Y'="" !?10,Y Q
"RTN","FHASP1",39,0)
 ;patch #41
"RTN","FHASP1",40,0)
CLIN ;S SC=+$P(Z,"^",1),Y=$P($G(^SC(SC,0)),"^",1) Q:Y=""
"RTN","FHASP1",41,0)
 S NDT=@FHTMP@(FHI,1)
"RTN","FHASP1",42,0)
 S SC=$P(@FHTMP@(FHI,2),U,1)
"RTN","FHASP1",43,0)
 S Y=$P(@FHTMP@(FHI,2),U,2) Q:Y=""
"RTN","FHASP1",44,0)
 D:$Y'<S1 HF^FHASP Q:ANS="^"  W:'N1 ! S N1=N1+1,DTP=NDT D DTP^FH W !?5,DTP,?25,Y Q
"RTN","FHASP1",45,0)
 ;D:$Y'<S1 HF^FHASP Q:ANS="^"  W:'N1 ! S N1=N1+1,DTP=NDT D DTP^FH W !?5,DTP,?25,Y W:$P(Z,"^",11) " (Collateral)" Q
"RTN","FHASP1",46,0)
 ;end changes in patch #41
"RTN","FHASP1",47,0)
DISP ; Display Food Preferences
"RTN","FHASP1",48,0)
 W !?26,"Likes",?58,"DisLikes",!
"RTN","FHASP1",49,0)
 K P S P1=1 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D SP
"RTN","FHASP1",50,0)
 W ! S (M,MM)="" F  S M=$O(P(M)) Q:M=""  I $D(P(M)) W $P(M,"~",2) D  S MM=M
"RTN","FHASP1",51,0)
 .  S (P1,P2)=0 F  S:P1'="" P1=$O(P(M,"L",P1)) S X1=$S(P1>0:P(M,"L",P1),1:"") S:P2'="" P2=$O(P(M,"D",P2)) S X2=$S(P2>0:P(M,"D",P2),1:"") Q:P1=""&(P2="")  D P0 Q:ANS="^"  W:MM'=M !
"RTN","FHASP1",52,0)
 .  Q
"RTN","FHASP1",53,0)
 Q:ANS="^"
"RTN","FHASP1",54,0)
 I $O(P(""))="" W !,"No Food Preferences on file",!
"RTN","FHASP1",55,0)
 Q
"RTN","FHASP1",56,0)
P0 I X1'="" W ?12 S X=X1 D P1 S X1=X
"RTN","FHASP1",57,0)
 I X2'="" W ?46 S X=X2 D P1 S X2=X
"RTN","FHASP1",58,0)
 Q:X1=""&(X2="")  D:$Y'<S1 HF^FHASP Q:ANS="^"  W ! G P0
"RTN","FHASP1",59,0)
P1 I $L(X)<34 W X S X="" Q
"RTN","FHASP1",60,0)
 F KK=35:-1:1 Q:$E(X,KK-1,KK)=", "
"RTN","FHASP1",61,0)
 W $E(X,1,KK-2) S X=$E(X,KK+1,999) Q
"RTN","FHASP1",62,0)
SP Q:'$P(X,U)  S M1=$P(X,"^",2) S:M1="A" M1="BNE" S Z=$G(^FH(115.2,+X,0)) Q:$P(Z,U)=""!($P(Z,U,2)="")  S L1=$P(Z,"^",1),KK=$P(Z,"^",2),M="",DAS=$P(X,"^",4)
"RTN","FHASP1",63,0)
 I KK="L" S Q=$P(X,"^",3),L1=$S(Q:Q,1:1)_" "_L1
"RTN","FHASP1",64,0)
 I M1="BNE" S M="1~All Meals" G SP1
"RTN","FHASP1",65,0)
 S Z1=$E(M1,1) I Z1'="" S M=$S(Z1="B":"2~Break",Z1="N":"3~Noon",1:"4~Even")
"RTN","FHASP1",66,0)
 S Z1=$E(M1,2) I Z1'="" S M=M_","_$S(Z1="B":"Break",Z1="N":"Noon",1:"Even")
"RTN","FHASP1",67,0)
SP1 S:'$D(P(M,KK,P1)) P(M,KK,P1)="" I $L(P(M,KK,P1))+$L(L1)<255 S P(M,KK,P1)=P(M,KK,P1)_$S(P(M,KK,P1)="":"",1:", ")_L1_$S(DAS="Y":" (D)",1:"")
"RTN","FHASP1",68,0)
 E  S:'$D(P(M,KK,K)) P(M,KK,K)="" S P(M,KK,K)=L1_$S(DAS="Y":" (D)",1:"") S P1=K
"RTN","FHASP1",69,0)
 Q
"RTN","FHASP1",70,0)
MO ; Display Monitors
"RTN","FHASP1",71,0)
 S Y=$G(^FHPT(FHDFN,"A",FADM,"MO",K,0)) Q:Y=""  S N1=N1+1
"RTN","FHASP1",72,0)
 D:$Y'<S1 HF^FHASP Q:ANS="^"
"RTN","FHASP1",73,0)
 W !,$P(Y,"^",1) S DTP=$P(Y,"^",2) D DTP^FH W ", ",DTP
"RTN","FHASP1",74,0)
 S COM=$P(Y,"^",3) W:COM'="" !?5,"Action: ",COM Q
"RTN","FHASP1",75,0)
PRERR ;if Scheduling API returns an error, print error in the report.
"RTN","FHASP1",76,0)
 S FHER=$O(@FHTMP@("ERROR",0))
"RTN","FHASP1",77,0)
 W !!,"*** ERROR in Scheduling API ***"
"RTN","FHASP1",78,0)
 W !,"***",@FHTMP@("ERROR",FHER)," !!!",!
"RTN","FHASP1",79,0)
 Q
"RTN","FHASP2")
0^57^B4711640
"RTN","FHASP2",1,0)
FHASP2 ; HISC/REL - Nutrition Profile (cont.) ;10/4/93  11:44
"RTN","FHASP2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASP2",3,0)
 S X=$P($G(^DGPM(ADM,0)),"^",10) W !,"Adm. Dx: ",$E(X,1,27)
"RTN","FHASP2",4,0)
 S X(0)=$G(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHASP2",5,0)
F1 D CUR^FHORD7 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHASP2",6,0)
 I Y'="",FHORD>0 I $D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) S COM=^(1) W:COM'="" !,"Comment: ",COM
"RTN","FHASP2",7,0)
 S TYP=$P(X,"^",8) I TYP'="" W !,"Service: ",$S(TYP="T":"Tray",TYP="D":"Dining Room",1:"Cafeteria")
"RTN","FHASP2",8,0)
 S DTP=$P(X(0),"^",3) I DTP D DTP^FH W !,"Expires: ",DTP
"RTN","FHASP2",9,0)
 S TF=$P(X(0),"^",4) G:TF<1 F2
"RTN","FHASP2",10,0)
 S Y=^FHPT(FHDFN,"A",ADM,"TF",TF,0)
"RTN","FHASP2",11,0)
 S DTP=$P(Y,"^",1),COM=$P(Y,"^",5),TQU=$P(Y,"^",6),CAL=$P(Y,"^",7)
"RTN","FHASP2",12,0)
 D DTP^FH W !!,"Tubefeed Ordered: ",DTP
"RTN","FHASP2",13,0)
 F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S XY=^(TF2,0) D LP
"RTN","FHASP2",14,0)
 W !,"Total Quantity: ",TQU," cc",?42,"Total KCAL: ",CAL
"RTN","FHASP2",15,0)
 W:COM'="" !,"Comment: ",COM
"RTN","FHASP2",16,0)
F2 S NO=$P(X(0),"^",7),Y=$S('NO:"",1:^FHPT(FHDFN,"A",ADM,"SF",NO,0))
"RTN","FHASP2",17,0)
 S L=$P(Y,"^",4) W !!,"Supplemental Feeding: ",$S('L:"No Order",1:$P(^FH(118.1,L,0),"^",1)) G:'NO F3
"RTN","FHASP2",18,0)
 S DTP=$P(Y,"^",30) D DTP^FH W ?50,"Reviewed: ",DTP
"RTN","FHASP2",19,0)
 S L=4 F K1=1:1:3 S K=0,N(K1)="" F K2=1:1:4 S Z=$P(Y,U,L+1),Q=$P(Y,U,L+2),L=L+2 I Z'="" S:'Q Q=1 S:N(K1)'="" N(K1)=N(K1)_"; " S N(K1)=N(K1)_Q_" "_$P(^FH(118,Z,0),"^",1)
"RTN","FHASP2",20,0)
 F K1=1:1:3 I N(K1)'="" W !?5,$P("10am; 2pm; 8pm",";",K1),":",?13,N(K1)
"RTN","FHASP2",21,0)
F3 K CAL,TF2,TQU,X(0),XY Q
"RTN","FHASP2",22,0)
LP S TUN=$P(XY,"^",1),STR=$P(XY,"^",2),QUA=$P(XY,"^",3)
"RTN","FHASP2",23,0)
 W !?3,$P($G(^FH(118.2,TUN,0)),"^",1),", ",$S(STR=4:"Full",STR=1:"1/4",STR=2:"1/2",1:"3/4")," Str., ",QUA Q
"RTN","FHASXR")
0^58^B10017874
"RTN","FHASXR",1,0)
FHASXR ; HISC/REL - Print Screening ;5/10/93  15:10
"RTN","FHASXR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASXR",3,0)
F0 R !!,"Print by PATIENT or COMMUNICATION OFFICE or ALL or WARD? WARD// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="W" D TR^FH
"RTN","FHASXR",4,0)
 I $P("PATIENT",X,1)'="",$P("WARD",X,1)'="",$P("COMMUNICATION OFFICE",X,1)'="",$P("ALL",X,1)'="" W *7,"  Answer with P or C or A or W" G F0
"RTN","FHASXR",5,0)
 G P0:X?1"P".E,W0:X?1"W".E I X?1"A".E S (DFN,ADM,WARD)="" G W1
"RTN","FHASXR",6,0)
D0 K DIC S DIC="^FH(119.73,",DIC("A")="Select COMMUNICATION OFFICE: ",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),D0:Y<1 S WARD=-Y,(DFN,ADM)="" G W1
"RTN","FHASXR",7,0)
W0 K DIC S DIC("A")="Select DIETETIC WARD: ",DIC="^FH(119.6,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),W0:Y<1 S WARD=+Y,(DFN,ADM)=""
"RTN","FHASXR",8,0)
W1 R !!,"Admissions since Date/Time: ",X:DTIME G:'$T!("^"[X) KIL S %DT="EXTS",%DT(0)="-NOW" D ^%DT K %DT G:Y<1 W1 S TIM=Y
"RTN","FHASXR",9,0)
 D NOW^%DTC S X1=%\1,X2=-5 D C^%DTC I TIM<X W "  [ DATE CANNOT BE MORE THAN 5 DAYS IN PAST ]" G W1
"RTN","FHASXR",10,0)
 G P1
"RTN","FHASXR",11,0)
P0 S ALL=1 D ^FHDPA G:'DFN KIL S TIM=""
"RTN","FHASXR",12,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"  [ Patient has expired. ]" G KIL
"RTN","FHASXR",13,0)
P1 S NP=$P($G(^FH(119.9,1,3)),"^",3) I NP'="A" G P3
"RTN","FHASXR",14,0)
P2 R !!,"Include Nutrition Profiles? (Y/N): ",NP:DTIME G:'$T!(NP["^") KIL S:NP="" NP="^" S X=NP D TR^FH S NP=X I $P("YES",NP,1)'="",$P("NO",NP,1)'="" W *7,!,"  Answer YES or NO" G P2
"RTN","FHASXR",15,0)
P3 S NP=$S(NP?1"Y".E:1,1:0)
"RTN","FHASXR",16,0)
 I NP=0 S FHNUM=9999 G L0
"RTN","FHASXR",17,0)
 W ! S DIR(0)="Y",DIR("A")="Would you like to display ALL monitors"
"RTN","FHASXR",18,0)
 S DIR("B")="YES" D ^DIR
"RTN","FHASXR",19,0)
 I Y="^" Q
"RTN","FHASXR",20,0)
 I Y=1 S FHNUM=9999 G L0
"RTN","FHASXR",21,0)
 S DIR(0)="N^1:9999"
"RTN","FHASXR",22,0)
 S DIR("A")="How many monitors would you like to display?"
"RTN","FHASXR",23,0)
 S DIR("B")=20 D ^DIR
"RTN","FHASXR",24,0)
 I Y=""!(Y="^") Q
"RTN","FHASXR",25,0)
 S FHNUM=Y
"RTN","FHASXR",26,0)
L0 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASXR",27,0)
 I $D(IO("Q")) S FHPGM="Q0^FHASXR",FHLST="DFN^ADM^WARD^TIM^NP^FHNUM" D EN2^FH G KIL
"RTN","FHASXR",28,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHASXR",29,0)
Q0 ; Process Screening
"RTN","FHASXR",30,0)
 I DFN S FHZ115="P"_DFN D CHECK^FHOMDPA Q:FHDFN=""  D ^FHASXR1 Q
"RTN","FHASXR",31,0)
 G Q2:WARD<0,Q3:WARD=""
"RTN","FHASXR",32,0)
Q1 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WARD,FHDFN)) Q:FHDFN=""  S ADM=$G(^FHPT("AW",WARD,FHDFN)),X=$P($G(^DGPM(+ADM,0)),"^",1) I X'<TIM D PATNAME^FHOMUTL,^FHASXR1 W:$E(IOST,1,2)'="C-" @IOF Q:ANS="^"
"RTN","FHASXR",33,0)
 Q
"RTN","FHASXR",34,0)
Q2 S CF=-WARD,WRD=""
"RTN","FHASXR",35,0)
 F NN=0:0 S WRD=$O(^FH(119.6,"B",WRD)) Q:WRD=""  S WARD=$O(^FH(119.6,"B",WRD,0)) I $P($G(^FH(119.6,+WARD,0)),"^",8)=CF D Q1
"RTN","FHASXR",36,0)
 Q
"RTN","FHASXR",37,0)
Q3 S WRD="" F NN=0:0 S WRD=$O(^FH(119.6,"B",WRD)) Q:WRD=""  S WARD=$O(^(WRD,0)) Q:'WARD  D Q1
"RTN","FHASXR",38,0)
 Q
"RTN","FHASXR",39,0)
KIL G KILL^XUSCLEAN
"RTN","FHASXR1")
0^59^B16666585
"RTN","FHASXR1",1,0)
FHASXR1 ; HISC/REL - Print Screening (cont) ;4/20/95  08:53
"RTN","FHASXR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHASXR1",3,0)
Q1 ; Print assessment
"RTN","FHASXR1",4,0)
 I $G(DFN)="" Q
"RTN","FHASXR1",5,0)
 S X="T",%DT="X" D ^%DT S DT=Y,Y=^DPT(DFN,0),NAM=$P(Y,"^",1),SEX=$P(Y,"^",2),DOB=$P(Y,"^",3)
"RTN","FHASXR1",6,0)
 S AGE=$E(DT,1,3)-$E(DOB,1,3)-($E(DT,4,7)<$E(DOB,4,7)) D PID^FHDPA
"RTN","FHASXR1",7,0)
 S FHAP=$G(^FH(119.9,1,3)),FHU=$P(FHAP,"^",1)
"RTN","FHASXR1",8,0)
 S LN="",$P(LN,"-",80)="",PG=0,S1=$S(IOST?1"C".E:IOSL-2,1:IOSL-6) D HEAD
"RTN","FHASXR1",9,0)
 S UL="",$P(UL,"_",80)="",ANS=""
"RTN","FHASXR1",10,0)
 W !!,"S:  Chewing Problems: Y N",?41,"Pre-Admission Diet: ",$E(UL,1,18)
"RTN","FHASXR1",11,0)
 W !?4,"Dysphagia: Y N",?41,"Wt. + - ____ # in last ___ months"
"RTN","FHASXR1",12,0)
 W !?4,"Appetite: + -",?41,"Nausea: Y N",?58,"Vomiting: Y N"
"RTN","FHASXR1",13,0)
 W !?4,"Feeding Assistance Required: Y N",?41,"Diarrhea: Y N",?58,"Constipation: Y N"
"RTN","FHASXR1",14,0)
 D ALG^FHCLN W !?4,"Food Allergies: " S ALG=$S(ALG="":"None on file",1:ALG) D LNE
"RTN","FHASXR1",15,0)
 I $P(FHAP,"^",5)'="" W !?4,$P(FHAP,"^",5)
"RTN","FHASXR1",16,0)
Q2 W !!,"O:  Current Diet: " G:WARD="" Q21 I $D(^FHPT(FHDFN,"A",ADM,0)) D CUR^FHORD7 W Y
"RTN","FHASXR1",17,0)
 S X=$P($G(^DGPM(ADM,0)),"^",10) W !?4,"Adm. Dx: ",$E(X,1,27)
"RTN","FHASXR1",18,0)
 S DTP=$P($G(^DGPM(ADM,0)),"^",1) D DTP^FH W ?41,"Adm. Date:   ",?59,DTP
"RTN","FHASXR1",19,0)
Q21 W !?4,"Age: ",AGE,?18,"Sex: ",SEX,?41,"Prior Assessment:" S ASN=$O(^FHPT(FHDFN,"N",0)) I ASN>0 S DTP=9999999-ASN D DTP^FH W ?59,DTP
"RTN","FHASXR1",20,0)
 S Y=$S(ASN>0:^FHPT(FHDFN,"N",ASN,0),1:"")
"RTN","FHASXR1",21,0)
 S HGT=$P(Y,"^",4),WGT=$P(Y,"^",6),DWGT=$P(Y,"^",8),UWGT=$P(Y,"^",9),IBW=$P(Y,"^",10),FRM=$P(Y,"^",11),AMP=$P(Y,"^",12),HGP=$P(Y,"^",5),WGP=$P(Y,"^",7)
"RTN","FHASXR1",22,0)
 I HGT'="" S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:""),X2=+$J(HGT*2.54,0,0)_" cm"
"RTN","FHASXR1",23,0)
 W !?4,"Height:" I HGT'="" W ?18,X2 W:HGP'="" " ",HGP W " (",X1,")"
"RTN","FHASXR1",24,0)
 W ?41,"Frame Size:",?59,$S(FRM="S":"Small",FRM="M":"Medium",FRM="L":"Large",1:"")
"RTN","FHASXR1",25,0)
 W !?4,"Curr. Weight:",?41,"Amputation %:",?59,AMP
"RTN","FHASXR1",26,0)
 I WGT'="" S X1=WGT_" lbs",X2=+$J(WGT/2.2,0,1)_" kg"
"RTN","FHASXR1",27,0)
 W !?4,"Last Weight:" I WGT'="" W ?18,X2 W:WGP'="" " ",WGP W " (",X1,")"
"RTN","FHASXR1",28,0)
 W ?41,"Weight Taken:" I DWGT'="" S DTP=DWGT D DTP^FH W ?59,DTP
"RTN","FHASXR1",29,0)
 I UWGT'="" S X1=UWGT_" lbs",X2=+$J(UWGT/2.2,0,1)_" kg"
"RTN","FHASXR1",30,0)
 W !?4,"Usual Weight:" I UWGT'="" W ?18,X2," (",X1,")"
"RTN","FHASXR1",31,0)
 W ?41,"Weight/Usual Wt: " W:UWGT ?59,$J(WGT/UWGT*100,3,0),"%"
"RTN","FHASXR1",32,0)
 I IBW'="" S X1=IBW_" lbs",X2=+$J(IBW/2.2,0,1)_" kg"
"RTN","FHASXR1",33,0)
 W !?4,"Ideal Weight:" I IBW'="" W ?18,X2," (",X1,")"
"RTN","FHASXR1",34,0)
 W ?41,"Weight/IBW:" W:IBW ?59,$J(WGT/IBW*100,3,0),"%"
"RTN","FHASXR1",35,0)
Q3 S PX=4 D LAB^FHASM4
"RTN","FHASXR1",36,0)
 W !!?32,"Laboratory Data",!?5,"Test",?30,"Result    units",?51,"Ref.   range",?67,"Date",!
"RTN","FHASXR1",37,0)
 S N1=0 F K=0:0 S K=$O(LRTST(K)) Q:K=""  D LAB
"RTN","FHASXR1",38,0)
 I 'N1 W !?5,"No laboratory data available last ",$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)," days"
"RTN","FHASXR1",39,0)
Q6 W !!?4,"Appearance: "
"RTN","FHASXR1",40,0)
 W !!,"A:  Nutrition Status",?48,"Nutrition Education",!
"RTN","FHASXR1",41,0)
 S E(1)="Further Education Required: Y N",E(2)=$E(UL,1,31)
"RTN","FHASXR1",42,0)
 S N=0 F KK=0:0 S KK=$O(^FH(115.4,KK)) Q:KK<1&(N>1)  S N=N+1 W !?4 W:$P($G(^FH(115.4,+KK,0)),"^",2)'="" "___ ",$P(^(0),"^",2) W:N<3 ?48,E(N)
"RTN","FHASXR1",43,0)
 W !?4,"Comments:"
"RTN","FHASXR1",44,0)
 W !!,"P:  Nutrition Plan",!
"RTN","FHASXR1",45,0)
 F KK=0:0 S KK=$O(^FH(115.5,KK)) Q:KK<1  W !?4,"___ ",$P(^(KK,0),"^",1)
"RTN","FHASXR1",46,0)
 W !?4,"Recommendations:" F KK=1:1:IOSL-$Y-7 W !
"RTN","FHASXR1",47,0)
 W !?41,$E(UL,1,38)
"RTN","FHASXR1",48,0)
 W !?41,"Signature",?68,"Date"
"RTN","FHASXR1",49,0)
 D FOOT Q:'NP!(ANS="^")  W:$E(IOST,1,2)'="C-" @IOF D Q0^FHASP Q
"RTN","FHASXR1",50,0)
LAB S X1=$P(LRTST(K),"^",7) Q:X1=""  S DTP=X1\1 D DTP^FH S N1=N1+1
"RTN","FHASXR1",51,0)
 W !?5,$P(LRTST(K),"^",1),?27,$P(LRTST(K),"^",6),?40,$P(LRTST(K),"^",4),?51,$P(LRTST(K),"^",5),?65,DTP Q
"RTN","FHASXR1",52,0)
LNE ; Break Line if longer than 56 chars
"RTN","FHASXR1",53,0)
 I $L(ALG)<57 W ALG Q
"RTN","FHASXR1",54,0)
 F L=58:-1:1 Q:$E(ALG,L-1,L)=", "
"RTN","FHASXR1",55,0)
 W $E(ALG,1,L-2)
"RTN","FHASXR1",56,0)
 S ALG=$E(ALG,L+1,999)
"RTN","FHASXR1",57,0)
 Q:ALG=""  W !?20
"RTN","FHASXR1",58,0)
 G LNE
"RTN","FHASXR1",59,0)
HEAD ; Page Header
"RTN","FHASXR1",60,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=DT D DTP^FH
"RTN","FHASXR1",61,0)
 W !,LN,!,DTP,?30,"NUTRITION SCREENING",?73,"Page ",PG,!,LN Q
"RTN","FHASXR1",62,0)
FOOT ; Page Footer
"RTN","FHASXR1",63,0)
 D PAUSE Q:IOST?1"C".E
"RTN","FHASXR1",64,0)
 F KK=1:1:IOSL-$Y-5 W !
"RTN","FHASXR1",65,0)
 D SITE^FH W !,LN,!,NAM W ?(80-$L(SITE)\2),SITE,?67,"VAF 10-9034"
"RTN","FHASXR1",66,0)
 W ! W:PID'="" PID
"RTN","FHASXR1",67,0)
 S W1=$G(^DPT(DFN,.1)) S:$D(^DPT(DFN,.101)) W1=W1_"/"_^DPT(DFN,.101) W:W1'="" ?(80-$L(W1)\2),W1,?66,"(Vice SF 509)"
"RTN","FHASXR1",68,0)
 W !,LN,! Q
"RTN","FHASXR1",69,0)
PAUSE ; Pause to Scroll
"RTN","FHASXR1",70,0)
 I IOST?1"C".E R !!,"Press RETURN to continue." R X:DTIME S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHASXR1",71,0)
 Q
"RTN","FHBIR")
0^60^B15349700
"RTN","FHBIR",1,0)
FHBIR ; HISC/REL - Birthday List ;1/23/98  16:06
"RTN","FHBIR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHBIR",3,0)
 S FHP=$O(^FH(119.73,0)) I FHP'<1,$O(^FH(119.73,FHP))<1 S FHP=0 G R1
"RTN","FHBIR",4,0)
R0 ;
"RTN","FHBIR",5,0)
 R !!,"Select COMMUNICATION OFFICE (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0
"RTN","FHBIR",6,0)
 E  K DIC S DIC="^FH(119.73,",DIC(0)="EMQ" D ^DIC G:Y<1 R0 S FHP=+Y
"RTN","FHBIR",7,0)
R1 ;
"RTN","FHBIR",8,0)
 S %DT="AEP",%DT("A")="Birthday DATE: " W ! D ^%DT G:Y<1 KIL S DAT=Y
"RTN","FHBIR",9,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHBIR",10,0)
 I $D(IO("Q")) S FHPGM="Q1^FHBIR",FHLST="DAT^FHP" D EN2^FH G KIL
"RTN","FHBIR",11,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHBIR",12,0)
Q1 ; Process Printing Birthday List
"RTN","FHBIR",13,0)
 K ^TMP($J) S PG=0,TYP=$E(DAT,6,7)="00" D NOW^%DTC S NOW=% K %,%H,%I
"RTN","FHBIR",14,0)
 F FHWRD=0:0 S FHWRD=$O(^FH(119.6,FHWRD)) Q:FHWRD'>0  S DP=$P(^(FHWRD,0),"^",8) I 'FHP!(DP=FHP) S WRD=$P(^(0),"^",1) F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",FHWRD,FHDFN)) Q:FHDFN<1  D Q2
"RTN","FHBIR",15,0)
 S PATTYP="INPATIENTS" D HDR S NAM="" F K=0:0 S NAM=$O(^TMP($J,NAM)) Q:NAM=""  F FHDFN=0:0 S FHDFN=$O(^TMP($J,NAM,FHDFN)) Q:FHDFN<1  D Q3
"RTN","FHBIR",16,0)
 D OUTP
"RTN","FHBIR",17,0)
 Q
"RTN","FHBIR",18,0)
Q2 ;
"RTN","FHBIR",19,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHBIR",20,0)
 S Y0=$G(^DPT(DFN,0)),X=$P(Y0,"^",3) Q:'X
"RTN","FHBIR",21,0)
 I 'TYP Q:$E(X,4,7)'=$E(DAT,4,7)
"RTN","FHBIR",22,0)
 Q:$E(X,4,5)'=$E(DAT,4,5)
"RTN","FHBIR",23,0)
 S BD=$E(X,4,7)_$E($P(Y0,"^",1),1,26),^TMP($J,BD,FHDFN)=X_"^"_WRD Q
"RTN","FHBIR",24,0)
Q3 ;
"RTN","FHBIR",25,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHBIR",26,0)
 S X1=^TMP($J,NAM,FHDFN),DTP=$P(X1,"^",1),WRD=$P(X1,"^",2)
"RTN","FHBIR",27,0)
 S RM=$G(^DPT(DFN,.101))
"RTN","FHBIR",28,0)
 S DTP=$J(+$E(DTP,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(DTP,4,5))_"-"_(1700+$E(DTP,1,3))
"RTN","FHBIR",29,0)
 D:$Y>(IOSL-10) HDR
"RTN","FHBIR",30,0)
 W !,$E(NAM,5,30),?32,$E(WRD,1,10),?44,$E(RM,1,10),?56,DTP Q
"RTN","FHBIR",31,0)
HDR ;
"RTN","FHBIR",32,0)
 N DTP
"RTN","FHBIR",33,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=NOW D DTP^FH W !,DTP,?27,"B I R T H D A Y   L I S T",?74,"Page ",PG
"RTN","FHBIR",34,0)
 S DTP=DAT D DTP^FH S DTP=$P(DTP,"-",$S(TYP:2,1:1),2) S:FHP DTP=$P(^FH(119.73,FHP,0),"^",1)_"  "_DTP W !!,PATTYP,?(79-$L(DTP)\2),DTP
"RTN","FHBIR",35,0)
 I $G(FHOPFLG)=1 W !!,"Name",?32,"Location",?57,"Birthday",! Q
"RTN","FHBIR",36,0)
 W !!,"Name",?32,"Ward",?44,"Room",?57,"Birthday",! Q
"RTN","FHBIR",37,0)
KIL K ^TMP($J),FHOPFLG G KILL^XUSCLEAN
"RTN","FHBIR",38,0)
 Q
"RTN","FHBIR",39,0)
OUTP ;Add Outpatient Display Here - RTK
"RTN","FHBIR",40,0)
 ;Only birthdays with Recurring, Special, Guest Meals for date selected
"RTN","FHBIR",41,0)
 ;
"RTN","FHBIR",42,0)
 K ^TMP($J) S PATTYP="OUTPATIENTS",FHOPFLG=1
"RTN","FHBIR",43,0)
 I TYP=1 S FHDTQ=$E(DAT,1,5)_"99.999999",FHRM=DAT-.0001
"RTN","FHBIR",44,0)
 I TYP=0 S FHDTQ=DAT_".999999" S X1=DAT,X2=-1 D C^%DTC S FHRM=X
"RTN","FHBIR",45,0)
 F FHOMDT=FHRM:0 S FHOMDT=$O(^FHPT("RM",FHOMDT)) Q:FHOMDT=""!(FHOMDT'<FHDTQ)  D
"RTN","FHBIR",46,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHOMDT,FHDFN)) Q:FHDFN=""  D
"RTN","FHBIR",47,0)
 ..F FHRNUM=0:0 S FHRNUM=$O(^FHPT("RM",FHOMDT,FHDFN,FHRNUM)) Q:FHRNUM=""  D
"RTN","FHBIR",48,0)
 ...S FHLOC=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,3) Q:FHLOC=""
"RTN","FHBIR",49,0)
 ...D CHECK
"RTN","FHBIR",50,0)
 F FHOM=DAT:0 S FHOM=$O(^FHPT("SM",FHOM)) Q:FHOM=""!(FHOM>FHDTQ)  D
"RTN","FHBIR",51,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("SM",FHOM,FHDFN)) Q:FHDFN=""  D
"RTN","FHBIR",52,0)
 ..S FHLOC=$P($G(^FHPT(FHDFN,"SM",FHOM,0)),U,3) Q:FHLOC=""
"RTN","FHBIR",53,0)
 ..D CHECK
"RTN","FHBIR",54,0)
 F FHOM=DAT:0 S FHOM=$O(^FHPT("GM",FHOM)) Q:FHOM=""!(FHOM>FHDTQ)  D
"RTN","FHBIR",55,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHOM,FHDFN)) Q:FHDFN=""  D
"RTN","FHBIR",56,0)
 ..S FHLOC=$P($G(^FHPT(FHDFN,"GM",FHOM,0)),U,5) Q:FHLOC=""
"RTN","FHBIR",57,0)
 ..D CHECK
"RTN","FHBIR",58,0)
 ;
"RTN","FHBIR",59,0)
 D HDR S NAM="" F K=0:0 S NAM=$O(^TMP($J,NAM)) Q:NAM=""  F FHDFN=0:0 S FHDFN=$O(^TMP($J,NAM,FHDFN)) Q:FHDFN<1  D
"RTN","FHBIR",60,0)
 .S X1=^TMP($J,NAM,FHDFN),DTP=$P(X1,"^",1),WRD=$P(X1,"^",2)
"RTN","FHBIR",61,0)
 .S DTP=$J(+$E(DTP,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(DTP,4,5))_"-"_(1700+$E(DTP,1,3))
"RTN","FHBIR",62,0)
 .D:$Y>(IOSL-10) HDR
"RTN","FHBIR",63,0)
 .W !,$E(NAM,5,30),?32,$E(WRD,1,22),?56,DTP Q
"RTN","FHBIR",64,0)
 W ! K FHOPFLG Q
"RTN","FHBIR",65,0)
CHECK ;
"RTN","FHBIR",66,0)
 D PATNAME^FHOMUTL
"RTN","FHBIR",67,0)
 I 'TYP Q:$E(FHDOB,4,7)'=$E(DAT,4,7)
"RTN","FHBIR",68,0)
 Q:$E(FHDOB,4,5)'=$E(DAT,4,5)
"RTN","FHBIR",69,0)
 S FHCOM=$P($G(^FH(119.6,FHLOC,0)),U,8)
"RTN","FHBIR",70,0)
 I FHP'=0,FHCOM'=FHP Q
"RTN","FHBIR",71,0)
 S FHLNM=$P($G(^FH(119.6,FHLOC,0)),U,1)
"RTN","FHBIR",72,0)
 S BD=$E(FHDOB,4,7)_$E(FHPTNM,1,26),^TMP($J,BD,FHDFN)=FHDOB_"^"_FHLNM Q
"RTN","FHCLN")
0^62^B850863
"RTN","FHCLN",1,0)
FHCLN ; HISC/REL - Clinical Dietetics ;2/13/95  14:20 
"RTN","FHCLN",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCLN",3,0)
ALG ; Get Allergies
"RTN","FHCLN",4,0)
 I $G(DFN)="" S ALG="" Q
"RTN","FHCLN",5,0)
 S ALG="",GMRA="1^0^010" D ^GMRADPT
"RTN","FHCLN",6,0)
 G:$O(GMRAL(0))<1 A1 F DA=0:0 S DA=$O(GMRAL(DA)) Q:DA<1  S:ALG'="" ALG=ALG_", " S GMRA=$P(GMRAL(DA),"^",2) G:$L(ALG)+$L(GMRA)>250 A2 S ALG=ALG_GMRA
"RTN","FHCLN",7,0)
A1 K GMRA,GMRAL Q
"RTN","FHCLN",8,0)
A2 S:$L(ALG)<246 ALG=ALG_"OTHERS" G A1
"RTN","FHCMS1")
0^63^B2440456
"RTN","FHCMS1",1,0)
FHCMS1 ; HISC/NCA/RVD - Calculate Meals ;3/22/93  12:28
"RTN","FHCMS1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCMS1",3,0)
 S FHTOT=0 F LL=SDT:0 S LL=$O(^FH(117,LL)) Q:LL<1!($E(LL,1,5)>$E(EDT,1,5))  D N1
"RTN","FHCMS1",4,0)
 Q
"RTN","FHCMS1",5,0)
N1 S Y0=$G(^FH(117,LL,0)) Q:Y0=""
"RTN","FHCMS1",6,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" G ALL    ;multidivisional
"RTN","FHCMS1",7,0)
 S Y1=$G(^FH(117,LL,1))
"RTN","FHCMS1",8,0)
 S K=1 F L=1,2,4,5,7,8 S K=K+1,N(L)=$P(Y0,"^",K)
"RTN","FHCMS1",9,0)
 S K=10 F L=1:3:16 S K=K+1,N(K)=$P(Y1,"^",L)+$P(Y1,"^",L+1)+$P(Y1,"^",L+2)
"RTN","FHCMS1",10,0)
 S N(3)=N(1)-N(2)*3,N(6)=N(4)-N(5)*3,N(9)=N(7)-N(8)*3
"RTN","FHCMS1",11,0)
 S N(10)=N(3)+N(6)+N(9)
"RTN","FHCMS1",12,0)
 S N(16)=N(14)+N(15)+N(16),N(13)=N(12)+N(13),N(17)=N(11)+N(13)+N(16),N(18)=N(10)+N(17)
"RTN","FHCMS1",13,0)
 S FHTOT=FHTOT+N(18) Q
"RTN","FHCMS1",14,0)
 ;
"RTN","FHCMS1",15,0)
ALL ;get all comm.
"RTN","FHCMS1",16,0)
 S K=1 F L=1,2,4,5,7,8 S K=K+1,N(L)=$P(Y0,"^",K)
"RTN","FHCMS1",17,0)
 F FHCOI=0:0 S FHCOI=$O(^FH(117,LL,2,FHCOI)) Q:FHCOI'>0  D
"RTN","FHCMS1",18,0)
 .S Y0=$G(^FH(117,LL,2,FHCOI,1)) Q:Y0=""
"RTN","FHCMS1",19,0)
 .S K=1 F L=1,2,4,5,7,8 S K=K+1,N(L)=$P(Y0,"^",K)
"RTN","FHCMS1",20,0)
 .S Y1=$G(^FH(117,LL,2,FHCOI,0)) Q:Y1=""
"RTN","FHCMS1",21,0)
 .S K=10 F L=2:4:17 S K=K+1,N(K)=$P(Y1,"^",L)+$P(Y1,"^",L+1)+$P(Y1,"^",L+2)
"RTN","FHCMS1",22,0)
 .S N(3)=N(1)-N(4)*3,N(6)=N(6)-N(7)*3,N(9)=N(7)-N(8)*3
"RTN","FHCMS1",23,0)
 .S N(10)=N(3)+N(6)+N(9)
"RTN","FHCMS1",24,0)
 .S N(16)=N(14)+N(15)+N(16),N(13)=N(12)+N(13),N(17)=N(11)+N(13)+N(16),N(18)=N(10)+N(17)
"RTN","FHCMS1",25,0)
 .S FHTOT=FHTOT+N(18)
"RTN","FHCMS1",26,0)
 Q
"RTN","FHCMSR")
0^64^B7358130
"RTN","FHCMSR",1,0)
FHCMSR ; HISC/NCA - Cost of Meals Served ;3/20/95  09:22
"RTN","FHCMSR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCMSR",3,0)
EN1 ; Read in Month/Year
"RTN","FHCMSR",4,0)
 R !!,"Enter Month/Year of Cost of Meals Served: ",X:DTIME G:'$T!("^"[X) KIL I X["?" D HELP G EN1
"RTN","FHCMSR",5,0)
 K %DT S Z=0,%DT="EP"
"RTN","FHCMSR",6,0)
 D ^%DT G KIL:"^"[X!($D(DTOUT)),EN1:Y<1
"RTN","FHCMSR",7,0)
 I '$E(Y,4,5) W *7,!,"You Must enter a Month and a Year." G EN1
"RTN","FHCMSR",8,0)
 S DA=$E(+Y,1,5)_"00"
"RTN","FHCMSR",9,0)
 I DA>DT W *7,!?5,"Month/Year must not be in the future." G EN1
"RTN","FHCMSR",10,0)
 K DIC,DIE W ! S DIE="^FH(117.2,"
"RTN","FHCMSR",11,0)
 L +^FH(117.2,DA,0):0 I '$T W !?5,"Another user is editing this entry." G KIL
"RTN","FHCMSR",12,0)
 I '$D(^FH(117.2,DA,0)) S $P(^FH(117.2,DA,0),"^",1)=DA,^FH(117.2,"B",DA,DA)="",Z=$P(^FH(117.2,0),"^",4)+1,$P(^FH(117.2,0),"^",3,4)=DA_"^"_Z
"RTN","FHCMSR",13,0)
 S FHX1=""
"RTN","FHCMSR",14,0)
 S S1=$E(DA,4,5),S2=$S(S1<4:"01",S1<7:"04",S1<10:"07",1:10) G:'S2 EN1 S S1=$E(DA,1,3)_S2_"00"
"RTN","FHCMSR",15,0)
 S X1=S1,X2=-1 D C^%DTC S FHPRE=X,FHPRE=$E(FHPRE,1,5)_"00",FHX1=$P($G(^FH(117.2,FHPRE,0)),"^",14,19)
"RTN","FHCMSR",16,0)
 S DR="[FHCMSR]" D ^DIE L -^FH(117.2,DA,0) K DIC,DIE,DA,DR,DTOUT G EN1
"RTN","FHCMSR",17,0)
EN2 ; Print the Cost of Meals Served
"RTN","FHCMSR",18,0)
 D NOW^%DTC S DT=%\1
"RTN","FHCMSR",19,0)
D1 ; Get Start-End Month/Year
"RTN","FHCMSR",20,0)
 R !!,"Starting Month/Year: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHCMSR",21,0)
 I X["?" D HELP G D1
"RTN","FHCMSR",22,0)
 K %DT S %DT="EP"
"RTN","FHCMSR",23,0)
 D ^%DT S:$D(DTOUT) X="^" G KIL:U[X,D1:Y<1 S SDT=+Y
"RTN","FHCMSR",24,0)
 I $E(SDT,1,5)'<$E(DT,1,5) W *7,!,"  Month/Year Must Start before Current Month/Year! " G D1
"RTN","FHCMSR",25,0)
 I '$E(SDT,4,5) W *7,!,"  You Must enter a Month and a Year." G D1
"RTN","FHCMSR",26,0)
 S SDT=$E(SDT,1,5)_"00"
"RTN","FHCMSR",27,0)
D2 R !,"Ending Month/Year: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHCMSR",28,0)
 I X["?" D HELP G D2
"RTN","FHCMSR",29,0)
 S %DT="EP"
"RTN","FHCMSR",30,0)
 D ^%DT S:$D(DTOUT) X="^" G KIL:U[X,D2:Y<1 S EDT=+Y
"RTN","FHCMSR",31,0)
 I '$E(EDT,4,5) W *7,!,"  You Must enter a Month and a Year." G D1
"RTN","FHCMSR",32,0)
 I $E(EDT,1,5)'<$E(DT,1,5) W *7,!,"  Month/Year Must be before Current Month/Year. " G D1
"RTN","FHCMSR",33,0)
 I $E(EDT,1,5)<$E(SDT,1,5) W *7,!,"  End Cannot be before Start Month/Year." G D1
"RTN","FHCMSR",34,0)
 S EDT=$E(EDT,1,5)_"00"
"RTN","FHCMSR",35,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHCMSR",36,0)
 I $D(IO("Q")) S FHPGM="Q1^FHCMSR1",FHLST="EDT^SDT" D EN2^FH G KIL
"RTN","FHCMSR",37,0)
 U IO D Q1^FHCMSR1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHCMSR",38,0)
KIL G KILL^XUSCLEAN
"RTN","FHCMSR",39,0)
HELP ; Help Message
"RTN","FHCMSR",40,0)
 W !!,"Enter a Month and a Year such as 6 2000, 6/2000, 6-2000, or June 2000.",!
"RTN","FHCMSR",41,0)
 W "You can even enter T-1 or type in a date.",!
"RTN","FHCMSR",42,0)
 Q 
"RTN","FHCMSR1")
0^65^B13056514
"RTN","FHCMSR1",1,0)
FHCMSR1 ; HISC/NCA - Cost of Meals Served (cont.) ;4/25/93  13:57
"RTN","FHCMSR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCMSR1",3,0)
Q1 ; Process Calculating Cost of Meals
"RTN","FHCMSR1",4,0)
 ; STG contains a string of number that is used to indicate which column
"RTN","FHCMSR1",5,0)
 ; to print each cost in the row.
"RTN","FHCMSR1",6,0)
 S DA=SDT D NOW^%DTC S DTP=% D DTP^FH S HD=DTP,PG=0 D HDR
"RTN","FHCMSR1",7,0)
 S S1=$E(SDT,4,5),S2=$S(S1<4:"01",S1<7:"04",S1<10:"07",1:10) S:$E(SDT,4,5)'=S2 SDT=$E(SDT,1,3)_S2_"00"
"RTN","FHCMSR1",8,0)
 K S S (STG,X1)=""
"RTN","FHCMSR1",9,0)
 S STG="1,7,13,1,19,8,15,1;2,8,14,2,20,9,16,2;3,9,15,3,21,10,17,3;4,10,16,4,22,11,18,4;5,11,17,5,23,12,19,5;6,12,18,6,24,13,20,6"
"RTN","FHCMSR1",10,0)
 S L=SDT-100 F L1=L:0 S L1=$O(^FH(117.2,L1)) Q:L1<1!(L1>EDT)  S X1=$G(^(L1,0)) D ADD
"RTN","FHCMSR1",11,0)
 Q:X1=""  D CAL
"RTN","FHCMSR1",12,0)
 Q
"RTN","FHCMSR1",13,0)
CAL ; Calculate the costs
"RTN","FHCMSR1",14,0)
 ; P(1) contains the cost entered for calculating all the cost of the
"RTN","FHCMSR1",15,0)
 ; Food Groups. P(2) contains the total of the beg inv, issue, end inv,
"RTN","FHCMSR1",16,0)
 ; and recommanded.
"RTN","FHCMSR1",17,0)
 K P F L=1:1:4 S P(L)=""
"RTN","FHCMSR1",18,0)
 S P1=$P($G(^FH(117.2,SDT,0)),"^",2,7)_"^"_$P(X1,"^",8,25) Q:P1=""
"RTN","FHCMSR1",19,0)
 F L=1:1:24 S $P(P(1),"^",L)=$P(P1,"^",L)
"RTN","FHCMSR1",20,0)
 S K=6 F L=1:1:6 S $P(P(1),"^",K+L)=S(L)
"RTN","FHCMSR1",21,0)
 S K=0 F I=1:1:4 F L=1:1:6 S K=K+1,$P(P(2),"^",I)=$P(P(2),"^",I)+$P(P(1),"^",K)
"RTN","FHCMSR1",22,0)
 ; P(3) contains Beg Inv + Issue - End Inv.  Piece 7 Total,
"RTN","FHCMSR1",23,0)
 ; Pieces 8-13 contains Usage / Total Usage and Total.
"RTN","FHCMSR1",24,0)
 ; Pieces 15-20 contains % Actual - % Cost rec (F-E) and Total.
"RTN","FHCMSR1",25,0)
 ; P(4) contains Usage / Total Meals Served (FHTOT) AND Total/Total Meals.
"RTN","FHCMSR1",26,0)
 F L=1:1:6 S $P(P(3),"^",L)=($P(P(1),"^",L)+$P(P(1),"^",L+6))-$P(P(1),"^",L+12),$P(P(3),"^",7)=$P(P(3),"^",7)+$P(P(3),"^",L)
"RTN","FHCMSR1",27,0)
 F L=1:1:6 D
"RTN","FHCMSR1",28,0)
 .S $P(P(3),"^",L+7)=$S(+$P(P(3),"^",7)'<1:($P(P(3),"^",L)/$P(P(3),"^",7))*100,1:"")
"RTN","FHCMSR1",29,0)
 .S $P(P(3),"^",L+7)=$J($P(P(3),"^",L+7),0,0)
"RTN","FHCMSR1",30,0)
 .S $P(P(3),"^",L+14)=$P(P(3),"^",L+7)-$P(P(1),"^",L+18)
"RTN","FHCMSR1",31,0)
 .Q
"RTN","FHCMSR1",32,0)
 S K=7 F L=1:1:6 S K=K+1,$P(P(3),"^",14)=$P(P(3),"^",14)+$P(P(3),"^",K)
"RTN","FHCMSR1",33,0)
 S K=14 F L=1:1:6 S K=K+1,$P(P(3),"^",21)=$P(P(3),"^",21)+$P(P(3),"^",K)
"RTN","FHCMSR1",34,0)
 K N F I=1:1:21 S N(I)=0
"RTN","FHCMSR1",35,0)
 D ^FHCMS1
"RTN","FHCMSR1",36,0)
 G:'FHTOT PRT F I=1:1:6 S $P(P(4),"^",I)=$S(FHTOT:$P(P(3),"^",I)/FHTOT,1:"")
"RTN","FHCMSR1",37,0)
 S $P(P(4),"^",7)=$S(FHTOT:$P(P(3),"^",7)/FHTOT,1:"")
"RTN","FHCMSR1",38,0)
PRT ; Print the costs
"RTN","FHCMSR1",39,0)
 F L=1:1:18 S X=$P(P(1),"^",L),X2="0",X3=11 D COMMA^%DTC S $P(P(1),"^",L)=X
"RTN","FHCMSR1",40,0)
 F L=1:1:3 S X=$P(P(2),"^",L),X2="0",X3=11 D COMMA^%DTC S $P(P(2),"^",L)=X
"RTN","FHCMSR1",41,0)
 F L=1:1:7 S X=$P(P(3),"^",L),X2="0",X3=11 D COMMA^%DTC S $P(P(3),"^",L)=X
"RTN","FHCMSR1",42,0)
 F L=19:1:24 S $P(P(1),"^",L)=$J($P(P(1),"^",L),5)
"RTN","FHCMSR1",43,0)
 F L=8:1:20 S $P(P(3),"^",L)=$J($P(P(3),"^",L),5)
"RTN","FHCMSR1",44,0)
 F I=1:1:7 S $P(P(4),"^",I)=$J($P(P(4),"^",I),9,4)
"RTN","FHCMSR1",45,0)
 F I=1:1:6 S PC=$P(STG,";",I),T1=0 D LP
"RTN","FHCMSR1",46,0)
 G ND
"RTN","FHCMSR1",47,0)
LP ; Loop to print costs for each group
"RTN","FHCMSR1",48,0)
 W $P("I II III IV V VI"," ",I)
"RTN","FHCMSR1",49,0)
 W ?7,$P(P(1),"^",$P(PC,"^",1)),?18,$P(P(1),"^",$P(PC,",",2)),?29,$P(P(1),"^",$P(PC,",",3)),?40,$P(P(3),"^",$P(PC,",",4)),?50,$P(P(1),"^",$P(PC,",",5))_"%"
"RTN","FHCMSR1",50,0)
 W ?57,$P(P(3),"^",$P(PC,",",6))_"%",?64,$P(P(3),"^",$P(PC,",",7))_"%",?71,$P(P(4),"^",$P(PC,",",8))
"RTN","FHCMSR1",51,0)
 W !
"RTN","FHCMSR1",52,0)
 Q
"RTN","FHCMSR1",53,0)
ND ; Print the last line,the total of each column
"RTN","FHCMSR1",54,0)
 W !,"Total",?7,$P(P(2),"^",1),?18,$P(P(2),"^",2),?29,$P(P(2),"^",3),?40,$P(P(3),"^",7),?50,$J($P(P(2),"^",4),5)_"%",?57,$J($P(P(3),"^",14),5),"%",?64,$J($P(P(3),"^",21),5),"%",?71,$P(P(4),"^",7),! Q
"RTN","FHCMSR1",55,0)
ADD ; Add Issue for the quarter
"RTN","FHCMSR1",56,0)
 Q:X1=""
"RTN","FHCMSR1",57,0)
 S K=7 F I=1:1:6 S:'$D(S(I)) S(I)=0 S S(I)=S(I)+$P(X1,"^",K+I)
"RTN","FHCMSR1",58,0)
 Q
"RTN","FHCMSR1",59,0)
HDR ; Print Heading
"RTN","FHCMSR1",60,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","FHCMSR1",61,0)
 W !,HD D HDR1 S Y=X_" "_(1700+$E(DA,1,3)) I SDT'=EDT S DA=EDT D HDR1 S Y=Y_"-"_X_" "_(1700+$E(DA,1,3))
"RTN","FHCMSR1",62,0)
 W !!,?(80-$L(Y)/2),Y
"RTN","FHCMSR1",63,0)
 W !!,?24,"COST  OF  MEALS  SERVED  WORKSHEET"
"RTN","FHCMSR1",64,0)
 S PG=PG+1 W ?74,"Page ",PG
"RTN","FHCMSR1",65,0)
 W !!!?24,"Costs",! S LN="",$P(LN,"-",43)="" W ?8,LN,!
"RTN","FHCMSR1",66,0)
 W "Food",?11,"Beg",?32,"Close",?54,"%",?61,"%",?68,"%",?73,"Food",!
"RTN","FHCMSR1",67,0)
 W "Group",?11,"Inv",?21,"Issue",?33,"Inv",?43,"Usage",?53,"Rec",?60,"Act",?67,"Dev",?73,"Cost"
"RTN","FHCMSR1",68,0)
 W !?12,"A",?23,"B",?34,"C",?45,"D",?54,"E",?61,"F",?68,"G",?75,"H"
"RTN","FHCMSR1",69,0)
 S LN="",$P(LN,"-",81)="" W !,LN,! Q
"RTN","FHCMSR1",70,0)
HDR1 S X=$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(DA,4,5)) Q
"RTN","FHCTF")
0^67^B840527
"RTN","FHCTF",1,0)
FHCTF ; HISC/REL - Clinician Tickler File ;2/13/95  14:21
"RTN","FHCTF",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCTF",3,0)
EN1 ; Enter Personal item
"RTN","FHCTF",4,0)
 D NOW^%DTC S NOW=% K %
"RTN","FHCTF",5,0)
 S %DT="AEFXT",%DT("A")="Date/Time: " W ! D ^%DT G:Y<1 KIL S DAT=Y
"RTN","FHCTF",6,0)
 I DAT'>NOW W "  [ Date must be in Future ]" G EN1
"RTN","FHCTF",7,0)
E1 R !,"Comment: ",COM:DTIME G:'$T!(COM["^") KIL I COM'?.ANP W *7," ??" G E1
"RTN","FHCTF",8,0)
 I $L(COM)>60!(COM?1"?".E) W *7,!,"Enter 1-60 character comment" G E1
"RTN","FHCTF",9,0)
 S FHDUZ=DUZ,FHTF=DAT_"^X^"_COM D FILE^FHCTF2
"RTN","FHCTF",10,0)
KIL G KILL^XUSCLEAN
"RTN","FHCTF1")
0^68^B9148269
"RTN","FHCTF1",1,0)
FHCTF1 ; HISC/REL/NCA - Display Tickler File ;4/6/01  08:43
"RTN","FHCTF1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCTF1",3,0)
E0 W !!,"Select CLINICIAN (or ALL): ",$P($G(^VA(200,DUZ,0)),"^",1)," // " R X:DTIME G:'$T!(X="^") KIL
"RTN","FHCTF1",4,0)
 I X="" S FHDUZ=DUZ G DISP
"RTN","FHCTF1",5,0)
 D TR^FH I X="ALL" S FHDUZ=0 G DISP
"RTN","FHCTF1",6,0)
 K DIC S DIC="^VA(200,",DIC(0)="AQEM",DIC("A")="Select CLINICIAN: ",DIC("B")=$P($G(^VA(200,DUZ,0)),"^",1) W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),E0:Y<1 S FHDUZ=+Y
"RTN","FHCTF1",7,0)
DISP ; Display Tickler File
"RTN","FHCTF1",8,0)
E1 S %DT="AEFX",%DT("A")="Through Date: ",%DT("B")="TODAY" W ! D ^%DT S:$D(DTOUT) X="^" G KIL:U[X,E1:Y<1 S EDT=+Y+.3
"RTN","FHCTF1",9,0)
E2 W ! K IOP,%ZIS S %ZIS("A")="Select LIST PRINTER: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHCTF1",10,0)
 I $D(IO("Q")) S FHPGM="Q0^FHCTF1",FHLST="EDT^FHDUZ" D EN2^FH G KIL
"RTN","FHCTF1",11,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHCTF1",12,0)
Q0 ; Process Displaying Tickler File Entries
"RTN","FHCTF1",13,0)
 D ^FHCTF4 S (CNT,PG)=0,YN="" G:FHDUZ Q1
"RTN","FHCTF1",14,0)
 F FHDUZ=0:0 S FHDUZ=$O(^FH(119,FHDUZ)) Q:FHDUZ<1  I $O(^FH(119,FHDUZ,"I",EDT+1),-1) D Q1 Q:YN="^"
"RTN","FHCTF1",15,0)
 Q
"RTN","FHCTF1",16,0)
Q1 D HDR F K=0:0 S K=$O(^FH(119,FHDUZ,"I",K)) Q:K<1!(K>EDT)  S FHTF=^(K,0) D:$Y>(IOSL-5) HDR Q:YN="^"  D D2
"RTN","FHCTF1",17,0)
 I 'CNT W !!,"No Tickler File Entries"
"RTN","FHCTF1",18,0)
 W ! Q
"RTN","FHCTF1",19,0)
D2 S DTP=$P(FHTF,"^",1),TYP=$P(FHTF,"^",2),X=$P(FHTF,"^",3),DFN=$P(FHTF,"^",4),ADM=$P(FHTF,"^",5),FHOR=$P(FHTF,"^",6)
"RTN","FHCTF1",20,0)
 D DTP W !!,DTP,?18,$S(TYP="C":"Consult",TYP="S":"SF Review",TYP="D":"Diet Review",TYP="X":"Personal",TYP="T":"Tubefeed",TYP="N":"Status",1:""),": ",X
"RTN","FHCTF1",21,0)
 I DFN W !?18,$P($G(^DPT(DFN,0)),"^",1)," (",$E($P($G(^(0)),"^",9),6,9),")  "
"RTN","FHCTF1",22,0)
 I DFN S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHCTF1",23,0)
 I DFN S FHWRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) W $P($G(^FH(119.6,+FHWRD,0)),"^",1),"  ",$P($G(^DPT(DFN,.101)),"^",1)
"RTN","FHCTF1",24,0)
 S CNT=CNT+1 Q
"RTN","FHCTF1",25,0)
DTP ; Printable Date/Time
"RTN","FHCTF1",26,0)
 S %=DTP,DTP=$J(+$E(DTP,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(DTP,4,5))_"-"_$E(DTP,2,3)
"RTN","FHCTF1",27,0)
 S:%#1 %=+$E(%_"0",9,10)_"^"_$E(%_"000",11,12),DTP=DTP_$J($S(%>12:%-12,1:+%),3)_":"_$P(%,"^",2)_$S(%<12:"am",%<24:"pm",1:"m") K % Q
"RTN","FHCTF1",28,0)
HDR ; Display Header
"RTN","FHCTF1",29,0)
 I PG,IOST?1"C-".E R !!,"Press RETURN to continue or ""^"" to exit. ",YN:DTIME S:'$T!(YN["^") YN="^" Q:YN="^"  I "^"'[YN W !,"Enter Return or ""^""." G HDR
"RTN","FHCTF1",30,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","FHCTF1",31,0)
 S PG=PG+1,DTP=NOW D DTP^FH W !,DTP,?28,"T I C K L E R   F I L E",?73,"Page ",PG
"RTN","FHCTF1",32,0)
 W !!,$P(^VA(200,FHDUZ,0),"^",1) S DTP=EDT\1 D DTP^FH W ?64,"Thru: ",DTP
"RTN","FHCTF1",33,0)
 S $P(LN,"-",80)="" W !,LN,! Q
"RTN","FHCTF1",34,0)
KIL G KILL^XUSCLEAN
"RTN","FHCTF2")
0^69^B809965
"RTN","FHCTF2",1,0)
FHCTF2 ; HISC/REL - Tickler File Utilities ;4/26/91  12:12
"RTN","FHCTF2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCTF2",3,0)
FILE ; File Entry
"RTN","FHCTF2",4,0)
 S %=$P(FHTF,"^",1) I $D(^FH(119,FHDUZ,"I")) G F1
"RTN","FHCTF2",5,0)
 I '$D(^FH(119,FHDUZ)) S ^FH(119,FHDUZ,0)=FHDUZ,^FH(119,"B",FHDUZ,FHDUZ)=""
"RTN","FHCTF2",6,0)
 S ^FH(119,FHDUZ,"I",0)="^119.01D^0^0"
"RTN","FHCTF2",7,0)
 L +^FH(119,0) S FH3=$P(^FH(119,0),"^",3),FH4=$P(^FH(119,0),"^",4)
"RTN","FHCTF2",8,0)
 I FHDUZ>FH3 S FH3=FHDUZ
"RTN","FHCTF2",9,0)
 S FH4=FH4+1
"RTN","FHCTF2",10,0)
 S $P(^FH(119,0),"^",3)=FH3,$P(^FH(119,0),"^",4)=FH4
"RTN","FHCTF2",11,0)
 L -^FH(119,0)
"RTN","FHCTF2",12,0)
F1 I $D(^FH(119,FHDUZ,"I",%)) S %=%+.000001 G F1
"RTN","FHCTF2",13,0)
 S ^FH(119,FHDUZ,"I",%,0)=FHTF K %,FHTF Q
"RTN","FHCTF3")
0^70^B24411252
"RTN","FHCTF3",1,0)
FHCTF3 ; HISC/REL/NCA - Clear File Entries ;4/6/01  09:37
"RTN","FHCTF3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCTF3",3,0)
E0 K DIC S DIC="^VA(200,",DIC(0)="AQEM",DIC("A")="Select CLINICIAN: ",DIC("B")=$P($G(^VA(200,DUZ,0)),"^",1) W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),E0:Y<1 S FHDUZ=+Y
"RTN","FHCTF3",4,0)
 S CNT=0 D NOW^%DTC S NOW=%,DT=NOW\1 D CLN^FHCTF4 S $P(LN,"-",80)="",QT=""
"RTN","FHCTF3",5,0)
 F LLL=0:0 S LLL=$O(^FH(119,FHDUZ,"I",LLL)) Q:LLL<1  S FHTF=^(LLL,0) D D2 Q:QT="^"
"RTN","FHCTF3",6,0)
 I 'CNT W !!,"No Tickler File Entries"
"RTN","FHCTF3",7,0)
 W ! G KIL
"RTN","FHCTF3",8,0)
D2 S DTP=$P(FHTF,"^",1),TYP=$P(FHTF,"^",2),X=$P(FHTF,"^",3),DFN=$P(FHTF,"^",4),ADM=$P(FHTF,"^",5),CNT=CNT+1,FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHCTF3",9,0)
 I DFN,ADM S FHWRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8)
"RTN","FHCTF3",10,0)
 G SF:TYP="S",CN:TYP="C",DI:TYP="D",TF:TYP="T",NS:TYP="N",MO:TYP="M" Q
"RTN","FHCTF3",11,0)
SF ; Clear Supplemental Feeding
"RTN","FHCTF3",12,0)
 D HDR,CUR^FHORD7
"RTN","FHCTF3",13,0)
 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHCTF3",14,0)
 S NO=$P(FHTF,"^",6),Y=$S('NO:"",1:$G(^FHPT(FHDFN,"A",ADM,"SF",NO,0))) D L1^FHNO7
"RTN","FHCTF3",15,0)
S1 R !!,"Is Order OK? Y// ",YN:DTIME S:'$T!(YN["^") QT="^" Q:QT="^"  S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G S1
"RTN","FHCTF3",16,0)
 S YN=$E(YN,1) Q:YN'="Y"
"RTN","FHCTF3",17,0)
 S $P(^FHPT(FHDFN,"A",ADM,"SF",NO,0),"^",30,31)=NOW_"^"_DUZ
"RTN","FHCTF3",18,0)
 K ^FH(119,FHDUZ,"I",LLL) G DNE
"RTN","FHCTF3",19,0)
CN ; Clear Consult
"RTN","FHCTF3",20,0)
 D HDR S FHDR=$P(FHTF,"^",6),Y=^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),ALL=0 D D1^FHORC2
"RTN","FHCTF3",21,0)
C1 R !!,"Disposition (C=Complete, X=Cancelled, R=Reassign, RETURN to bypass): ",TYP:DTIME S:'$T!(TYP["^") QT="^" Q:"^"[TYP  S X=TYP D TR^FH S TYP=X I TYP'?1U!("XCR"'[TYP) W *7,!,"Enter C, X or R or Press RETURN to bypass" G C1
"RTN","FHCTF3",22,0)
 I TYP="R" G C2
"RTN","FHCTF3",23,0)
 I ORIFN S ORSTS=TYP="C"+1 D ST^ORX
"RTN","FHCTF3",24,0)
 K ^FHPT("ADRU",FHDUZ,FHDFN,ADM,FHDR)
"RTN","FHCTF3",25,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),"^",8,10)=TYP_"^"_NOW_"^"_DUZ K ^FH(119,FHDUZ,"I",LLL)
"RTN","FHCTF3",26,0)
 D:TYP="C" EN31^FHASE G DNE
"RTN","FHCTF3",27,0)
C2 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="REASSIGN to Clinician: " W ! D ^DIC S:$D(DTOUT) QT="^" Q:Y<1  S XMKK=+Y K DIC
"RTN","FHCTF3",28,0)
 K ^FHPT("ADRU",FHDUZ,FHDFN,ADM,FHDR) S ^FHPT("ADRU",XMKK,FHDFN,ADM,FHDR)=""
"RTN","FHCTF3",29,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),"^",5)=XMKK
"RTN","FHCTF3",30,0)
 K ^FH(119,FHDUZ,"I",LLL) S FHSV=FHDUZ,FHDUZ=XMKK D FILE^FHCTF2 S FHDUZ=FHSV
"RTN","FHCTF3",31,0)
 S REQ=CON,WARD=$P($G(^FH(119.6,+FHWRD,0)),"^",1) D POST^FHORC G DNE
"RTN","FHCTF3",32,0)
TF ; Tubefeed
"RTN","FHCTF3",33,0)
 S TF=$P(FHTF,"^",6) D HDR,DIS^FHORT2
"RTN","FHCTF3",34,0)
T1 R !!,"Is Order OK? Y// ",YN:DTIME S:'$T!(YN["^") QT="^" Q:QT="^"  S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G T1
"RTN","FHCTF3",35,0)
 S YN=$E(YN,1) Q:YN'="Y"
"RTN","FHCTF3",36,0)
 S $P(^FHPT(FHDFN,"A",ADM,"TF",TF,0),"^",15,16)=NOW_"^"_DUZ
"RTN","FHCTF3",37,0)
 K ^FH(119,FHDUZ,"I",LLL) G DNE
"RTN","FHCTF3",38,0)
 Q
"RTN","FHCTF3",39,0)
DI ; Diet
"RTN","FHCTF3",40,0)
 S FHORD=$P(FHTF,"^",6) Q:'FHORD  D HDR,C2^FHORD7 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHCTF3",41,0)
 I $D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) S COM=^(1) W:COM'="" !,"Comment: ",COM
"RTN","FHCTF3",42,0)
 S TYP=$P(X,"^",8) I TYP'="" W !,"Service: ",$S(TYP="T":"Tray",TYP="D":"Dining Room",1:"Cafeteria")
"RTN","FHCTF3",43,0)
 S DTP=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",3) I DTP D DTP^FH W !,"Expires: ",DTP
"RTN","FHCTF3",44,0)
D1 R !!,"Is Order OK? Y// ",YN:DTIME S:'$T!(YN["^") QT="^" Q:QT="^"  S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G D1
"RTN","FHCTF3",45,0)
 S YN=$E(YN,1) Q:YN'="Y"
"RTN","FHCTF3",46,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",16,17)=NOW_"^"_DUZ
"RTN","FHCTF3",47,0)
 K ^FH(119,FHDUZ,"I",LLL) G DNE
"RTN","FHCTF3",48,0)
 Q
"RTN","FHCTF3",49,0)
NS ; Status
"RTN","FHCTF3",50,0)
 S F1=$P(FHTF,"^",6),Y=$G(^FHPT(FHDFN,"S",+F1,0)) Q:Y=""  S S=$P(Y,"^",2)
"RTN","FHCTF3",51,0)
 D HDR W !!,"Current Status: ",$P($G(^FH(115.4,+S,0)),"^",2)
"RTN","FHCTF3",52,0)
N1 R !!,"Is Status OK? Y// ",YN:DTIME S:'$T!(YN["^") QT="^" Q:QT="^"  S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G N1
"RTN","FHCTF3",53,0)
 S YN=$E(YN,1) Q:YN'="Y"
"RTN","FHCTF3",54,0)
 S $P(^FHPT(FHDFN,"S",F1,0),"^",4,5)=NOW_"^"_DUZ
"RTN","FHCTF3",55,0)
 K ^FH(119,FHDUZ,"I",LLL) G DNE
"RTN","FHCTF3",56,0)
MO ; Monitor
"RTN","FHCTF3",57,0)
 D HDR W !!,$P(FHTF,"^",3)
"RTN","FHCTF3",58,0)
M1 S MOCOM="" R !!,"Action Taken: ",MOCOM:DTIME S:MOCOM="^^" QT="^" Q:'$T!(MOCOM["^")  I MOCOM'?.ANP W *7," ??" G M1
"RTN","FHCTF3",59,0)
 I MOCOM=""!($L(MOCOM)>60)!(MOCOM?1"?".E) W *7,!,"Required entry: document action (up to 60 characters) or ^ to bypass." G M1
"RTN","FHCTF3",60,0)
 S F1=$P(FHTF,"^",6) S $P(^FHPT(FHDFN,"A",ADM,"MO",F1,0),"^",3,5)=MOCOM_"^"_DUZ_"^"_NOW
"RTN","FHCTF3",61,0)
 K ^FH(119,FHDUZ,"I",LLL)
"RTN","FHCTF3",62,0)
 G DNE
"RTN","FHCTF3",63,0)
DNE W "  ... done" Q
"RTN","FHCTF3",64,0)
HDR S Y0=$G(^DPT(DFN,0)) W @IOF,!!,$P(Y0,"^",1) D PID^FHDPA W:BID'="" " (",BID,")"
"RTN","FHCTF3",65,0)
 W ?40,$S($P(Y0,"^",2)="F":"Female",1:"Male")
"RTN","FHCTF3",66,0)
 S AGE=$P(Y0,"^",3) I AGE'="" S AGE=$E(DT,1,3)-$E(AGE,1,3)-($E(DT,4,7)<$E(AGE,4,7)) W "   Age ",AGE
"RTN","FHCTF3",67,0)
 S X=$P($G(^FH(119.6,+FHWRD,0)),"^",1)_" "_$P($G(^DPT(DFN,.101)),"^",1) W ?(79-$L(X)),X
"RTN","FHCTF3",68,0)
 W !,LN S X=$S(TYP="S":"SUPPLEMENTAL FEEDING",TYP="C":"DIETETIC CONSULTATION",TYP="D":"DIET ORDER",TYP="T":"TUBEFEEDING",TYP="N":"NUTRITION STATUS",TYP="M":"MONITOR",1:"")
"RTN","FHCTF3",69,0)
 W !?(80-$L(X)\2),X,!,LN Q
"RTN","FHCTF3",70,0)
KIL G KILL^XUSCLEAN
"RTN","FHCTF4")
0^71^B13668134
"RTN","FHCTF4",1,0)
FHCTF4 ; HISC/REL/NCA - Check Ward Patients for a Clinician ;3/8/01  13:13
"RTN","FHCTF4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCTF4",3,0)
 D NOW^%DTC S NOW=% D CLN
"RTN","FHCTF4",4,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  I $P(^(WRD,0),"^",2)=FHDUZ!('FHDUZ) D CHK
"RTN","FHCTF4",5,0)
 Q
"RTN","FHCTF4",6,0)
CHK D DAT F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",WRD,FHDFN)) D PAT
"RTN","FHCTF4",7,0)
 Q
"RTN","FHCTF4",8,0)
CLN ; Clean up ticker file
"RTN","FHCTF4",9,0)
 F K=0:0 S K=$O(^FH(119,FHDUZ,"I",K)) Q:K<1  S X=^(K,0) D C0
"RTN","FHCTF4",10,0)
 Q
"RTN","FHCTF4",11,0)
C0 ;
"RTN","FHCTF4",12,0)
 S DFN=$P(X,"^",4),A0="",FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHCTF4",13,0)
 G:'DFN C1 S ADM=$P(X,"^",5) G:'ADM C1
"RTN","FHCTF4",14,0)
 S W1=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) I W1="" G KIL
"RTN","FHCTF4",15,0)
 S Y=$G(^FHPT("AW",W1,FHDFN)) I ADM'=Y G KIL
"RTN","FHCTF4",16,0)
 S Y=$P($G(^FH(119.6,+W1,0)),"^",2)
"RTN","FHCTF4",17,0)
 I Y'="",Y'=FHDUZ G KIL
"RTN","FHCTF4",18,0)
 S A0=$G(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHCTF4",19,0)
C1 S TYP=$P(X,"^",2) G C2:TYP="C",C3:TYP="S",C4:TYP="D",C5:TYP="X",C6:TYP="T",C7:TYP="N" Q
"RTN","FHCTF4",20,0)
C2 S FHDR=$P(X,"^",6),Y=^FHPT(FHDFN,"A",ADM,"DR",FHDR,0) I $P(Y,"^",8)'="A"!($P(Y,"^",5)'=FHDUZ) D KIL
"RTN","FHCTF4",21,0)
 Q
"RTN","FHCTF4",22,0)
C3 D:$P(X,"^",6)'=$P(A0,"^",7) KIL Q
"RTN","FHCTF4",23,0)
C4 D:$P(X,"^",6)'=$P(A0,"^",2) KIL Q
"RTN","FHCTF4",24,0)
C5 D:+X<NOW KIL Q
"RTN","FHCTF4",25,0)
C6 D:$P(X,"^",6)'=$P(A0,"^",4) KIL Q
"RTN","FHCTF4",26,0)
C7 S Y=$O(^FHPT(FHDFN,"S",0)) D:Y<$P(X,"^",6) KIL Q
"RTN","FHCTF4",27,0)
KIL K ^FH(119,FHDUZ,"I",K)
"RTN","FHCTF4",28,0)
 ;K ^FH(119,FHDUZ,"I","C",PT,DT)
"RTN","FHCTF4",29,0)
 Q
"RTN","FHCTF4",30,0)
PAT ; Check Patient
"RTN","FHCTF4",31,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHCTF4",32,0)
 S A0=$G(^FHPT(FHDFN,"A",ADM,0)),FHORD=$P(A0,"^",2) I FHORD S X1=$P(A0,"^",3) G P1
"RTN","FHCTF4",33,0)
 S LST=$P(A0,"^",1),FHLD="X" S:'LST LST=+D("NP") G P2
"RTN","FHCTF4",34,0)
P1 S X=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),FHLD=$P(X,"^",7),PD=$P(X,"^",13),LST=$P(X,"^",16) I 'LST S LST=$P(X,"^",9)
"RTN","FHCTF4",35,0)
 G P4:FHLD="P",P2:'PD S LR=$G(D("D",PD)) G P4:'LR,P4:LST>LR
"RTN","FHCTF4",36,0)
 S FHTF="D^"_$P(^FH(116.2,PD,0),"^",1)_"^"_DFN_"^"_ADM_"^"_FHORD D FIL
"RTN","FHCTF4",37,0)
 G P4
"RTN","FHCTF4",38,0)
P2 ; Check NPO/No Order
"RTN","FHCTF4",39,0)
 G:$P(A0,"^",4) P4 S LR=$G(D("NP")) G P4:'LR,P4:LST>LR
"RTN","FHCTF4",40,0)
 S FHTF="D^"_$S(FHLD="P":"NPO",1:"No Order")_" > "_$P(LR,"^",2)_" days^"_DFN_"^"_ADM_"^"_FHORD D FIL
"RTN","FHCTF4",41,0)
P4 ; Check Supplemental Feeding
"RTN","FHCTF4",42,0)
 S NO=$P(A0,"^",7) G:'NO P5 S LR=$G(D("SF")) G:'LR P5
"RTN","FHCTF4",43,0)
 S LST=$P(^FHPT(FHDFN,"A",ADM,"SF",NO,0),"^",30) I 'LST S LST=$P(^(0),"^",2)
"RTN","FHCTF4",44,0)
 G:LST>LR P5 S Y=$P(^FHPT(FHDFN,"A",ADM,"SF",NO,0),"^",4),Y=$P($G(^FH(118.1,+Y,0)),"^",1)
"RTN","FHCTF4",45,0)
 S FHTF="S^"_Y_"^"_DFN_"^"_ADM_"^"_NO D FIL
"RTN","FHCTF4",46,0)
P5 ; Check Tubefeeding
"RTN","FHCTF4",47,0)
 S TF=$P(A0,"^",4) G:'TF P6 S LR=$G(D("TF")) G:'LR P6
"RTN","FHCTF4",48,0)
 S LST=$P(^FHPT(FHDFN,"A",ADM,"TF",TF,0),"^",15) I 'LST S LST=$P(^(0),"^",1)
"RTN","FHCTF4",49,0)
 G:LST>LR P6
"RTN","FHCTF4",50,0)
 S Y="" F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S XX=^(TF2,0) S:Y'="" Y=Y_", " S Y=Y_$P($G(^FH(118.2,$P(XX,"^",1),0)),"^",1)
"RTN","FHCTF4",51,0)
 S FHTF="T^"_Y_"^"_DFN_"^"_ADM_"^"_TF D FIL
"RTN","FHCTF4",52,0)
P6 ; Check Status
"RTN","FHCTF4",53,0)
 S F1=$O(^FHPT(FHDFN,"S",0)) G:'F1 P7 S A1=^FHPT(FHDFN,"S",F1,0) I $P(A1,"^",1)<$P(A0,"^",1) G P7
"RTN","FHCTF4",54,0)
 S S1=$P(A1,"^",2),LR=$G(D("S",S1)) G:'LR P8
"RTN","FHCTF4",55,0)
 S LST=$P(A1,"^",4) I 'LST S LST=$P(A1,"^",1)
"RTN","FHCTF4",56,0)
 G:LST>LR P8 S Y=$P(^FH(115.4,S1,0),"^",2)
"RTN","FHCTF4",57,0)
 S FHTF="N^"_Y_"^"_DFN_"^"_ADM_"^"_F1 D FIL G P8
"RTN","FHCTF4",58,0)
P7 S LR=$G(D("NS")) G:'LR P8 S LST=$P(A0,"^",1) G P8:LST>LR,P8:'LST
"RTN","FHCTF4",59,0)
 S FHTF="N^No Admission Status^"_DFN_"^"_ADM_"^"_(9999999-LST) D FIL G P8
"RTN","FHCTF4",60,0)
P8 Q
"RTN","FHCTF4",61,0)
FIL ; File entry
"RTN","FHCTF4",62,0)
 F L=0:0 S L=$O(^FH(119,FHDUZ,"I",L)) Q:L<1  I $P(^(L,0),"^",2,6)=FHTF S FHTF="" Q
"RTN","FHCTF4",63,0)
 Q:FHTF=""  S X1=LST,X2=$P(LR,"^",2) D C^%DTC S FHTF=X_"^"_FHTF D FILE^FHCTF2 Q
"RTN","FHCTF4",64,0)
DAT ; Get Review Dates
"RTN","FHCTF4",65,0)
 K D,T S FHPAR=$G(^FH(119.6,WRD,0)),L=10
"RTN","FHCTF4",66,0)
 F K="NP","TF","SF","NS" S L=L+1,Z=$P(FHPAR,"^",L),D(K)="" I Z D D1 S D(K)=X_"^"_Z
"RTN","FHCTF4",67,0)
 F K=1:1:4 S Z=$P(FHPAR,"^",K+19) I Z D D1 S D("S",K)=X_"^"_Z
"RTN","FHCTF4",68,0)
 F K=0:0 S K=$O(^FH(116.2,K)) Q:K<1  S Z=$P(^(K,0),"^",8) I Z D D1 S D("D",K)=X_"^"_Z
"RTN","FHCTF4",69,0)
 K T Q
"RTN","FHCTF4",70,0)
D1 I $D(T(Z)) S X=T(Z) Q
"RTN","FHCTF4",71,0)
 S X1=NOW,X2=-Z D C^%DTC S T(Z)=X Q
"RTN","FHCTF5")
0^72^B12923038
"RTN","FHCTF5",1,0)
FHCTF5 ; IOFO/REL - Check Inpatients for Monitors ;5/15/01  08:14
"RTN","FHCTF5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHCTF5",3,0)
 D NOW^%DTC S NOW=% D CLR
"RTN","FHCTF5",4,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  S FHDUZ=$P($G(^(WRD,0)),"^",2) F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",WRD,FHDFN)) D PAT
"RTN","FHCTF5",5,0)
 K %,A1,A2,ADM,BMI,CLR,DA,DD,DFN,DIC,DTE,FHDFN,FHDUZ,FHOR,FHORD,FHTF
"RTN","FHCTF5",6,0)
 K GMRVSTR,HT,L,LST,MONIFN,MONTX,N,NOW,PX,STOP,TF,WRD,WT,X,X0,Y
"RTN","FHCTF5",7,0)
 Q
"RTN","FHCTF5",8,0)
PAT ;; Check a patient
"RTN","FHCTF5",9,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHCTF5",10,0)
 S Y=^DPT(DFN,0),NAM=$P(Y,"^",1),SEX=$P(Y,"^",2),DOB=$P(Y,"^",3)
"RTN","FHCTF5",11,0)
 S AGE="" I DOB'="" S AGE=$E(NOW,1,3)-$E(DOB,1,3)-($E(NOW,4,7)<$E(DOB,4,7))
"RTN","FHCTF5",12,0)
P0 ; Calculate BMI
"RTN","FHCTF5",13,0)
 S GMRVSTR="WT" D EN6^GMRVUTL S WT=$P(X,"^",8)
"RTN","FHCTF5",14,0)
 S GMRVSTR="HT" D EN6^GMRVUTL S HT=$P(X,"^",8)
"RTN","FHCTF5",15,0)
 S BMI="" I WT,HT S A2=HT*.0254,BMI=+$J(WT/2.2/(A2*A2),0,1)
"RTN","FHCTF5",16,0)
 I $G(BMI)=""!($G(BMI)'<21) G P1
"RTN","FHCTF5",17,0)
 S MONTX="Monitor: BMI < 21",DTE=NOW
"RTN","FHCTF5",18,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N D FIL G P1
"RTN","FHCTF5",19,0)
 ; Check if been 30 days
"RTN","FHCTF5",20,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHCTF5",21,0)
 S X=$$FMDIFF^XLFDT(DTE,LST,3) I X>30 D FIL
"RTN","FHCTF5",22,0)
P1 ; Check for current Tubefeeding
"RTN","FHCTF5",23,0)
 S TF=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4) I 'TF G P2
"RTN","FHCTF5",24,0)
 S MONTX="Monitor: On Tubefeeding",DTE=NOW
"RTN","FHCTF5",25,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N D FIL G P2
"RTN","FHCTF5",26,0)
 ; Check if been 7 days
"RTN","FHCTF5",27,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHCTF5",28,0)
 S X=$$FMDIFF^XLFDT(DTE,LST,3) I X>7 D FIL
"RTN","FHCTF5",29,0)
P2 ; Check for Hyperals
"RTN","FHCTF5",30,0)
 S MONTX="",DTE=NOW
"RTN","FHCTF5",31,0)
 F STOP=NOW:0 S STOP=$O(^PS(55,DFN,"IV","AIT","H",STOP)) Q:STOP<1  F DA=0:0 S DA=$O(^PS(55,DFN,"IV","AIT","H",STOP,DA)) Q:DA<1  D
"RTN","FHCTF5",32,0)
 .S X0=$P($G(^PS(55,DFN,"IV",DA,0)),"^",2) I X0>NOW Q
"RTN","FHCTF5",33,0)
 .S MONTX="Monitor: On Hyperals" Q
"RTN","FHCTF5",34,0)
 D:MONTX'="" FIL
"RTN","FHCTF5",35,0)
P3 ; Check for Serum Albumin
"RTN","FHCTF5",36,0)
 S MONTX="",PX=6 D LAB^FHASM4 I $D(^TMP($J,"LRTST")) D
"RTN","FHCTF5",37,0)
 .F L=0:0 S L=$O(^TMP($J,"LRTST",L)) Q:L<1  S Y=$TR($P(^(L),"^",6)," ","") I Y'?1A.E,Y<3.2 S MONTX="Monitor: Albumin < 3.2",DTE=$P(^(L),"^",7) Q
"RTN","FHCTF5",38,0)
 .Q
"RTN","FHCTF5",39,0)
 G:MONTX="" P4
"RTN","FHCTF5",40,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N D FIL G P4
"RTN","FHCTF5",41,0)
 ; Check if same test
"RTN","FHCTF5",42,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2) I DTE>LST D FIL
"RTN","FHCTF5",43,0)
P4 ; Check for NPO+Clr Liq > 3 days
"RTN","FHCTF5",44,0)
 S A1=NOW,DTE=NOW
"RTN","FHCTF5",45,0)
 F  D  Q:'A1
"RTN","FHCTF5",46,0)
 .S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1),-1) Q:'A1
"RTN","FHCTF5",47,0)
 .S FHORD=$P($G(^FHPT(FHDFN,"A",ADM,"AC",A1,0)),"^",2) I 'FHORD S A1="" Q
"RTN","FHCTF5",48,0)
 .S FHOR=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHCTF5",49,0)
 .I $P(FHOR,"^",7)="N" S DTE=A1 Q
"RTN","FHCTF5",50,0)
 .I $P(FHOR,"^",2)=CLR S DTE=A1 Q
"RTN","FHCTF5",51,0)
 .S A1="" Q
"RTN","FHCTF5",52,0)
 I DTE'<NOW G P5
"RTN","FHCTF5",53,0)
 S X=$$FMDIFF^XLFDT(NOW,DTE,3) G:X<3 P5
"RTN","FHCTF5",54,0)
 S MONTX="Monitor: NPO+Clr Liq > 3 days",DTE=NOW
"RTN","FHCTF5",55,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N D FIL G P5
"RTN","FHCTF5",56,0)
 ; Check if been 3 days
"RTN","FHCTF5",57,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHCTF5",58,0)
 S X=$$FMDIFF^XLFDT(NOW,LST,3) I X>3 D FIL
"RTN","FHCTF5",59,0)
P5 ; Done
"RTN","FHCTF5",60,0)
 Q
"RTN","FHCTF5",61,0)
CLR ; Find Clear Liquid
"RTN","FHCTF5",62,0)
 S CLR=$O(^FH(111,"B","CLEAR LIQUID",0)) Q:CLR
"RTN","FHCTF5",63,0)
 S CLR=$O(^FH(111,"C","CLEAR LIQUID",0)) Q:CLR
"RTN","FHCTF5",64,0)
 S CLR=$O(^FH(111,"C","CLR LIQ",0)) Q:CLR
"RTN","FHCTF5",65,0)
 S CLR=$O(^FH(111,"C","CL",0)) Q:CLR
"RTN","FHCTF5",66,0)
 Q
"RTN","FHCTF5",67,0)
FIL ; File Monitor
"RTN","FHCTF5",68,0)
 L +^FHPT(FHDFN,"A",ADM,"MO",0)
"RTN","FHCTF5",69,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"MO",0)) S ^FHPT(FHDFN,"A",ADM,"MO",0)="^115.11^^"
"RTN","FHCTF5",70,0)
 L -^FHPT(FHDFN,"A",ADM,"MO",0)
"RTN","FHCTF5",71,0)
 K DIC,DD,DO,DINUM S DIC="^FHPT(FHDFN,""A"",ADM,""MO"",",DIC(0)="L",DA(1)=ADM,DA(2)=FHDFN,DLAYGO=115,X=MONTX D FILE^DICN K DIC,DLAYGO
"RTN","FHCTF5",72,0)
 Q:Y<1  S MONIFN=+Y
"RTN","FHCTF5",73,0)
 S $P(^FHPT(FHDFN,"A",ADM,"MO",MONIFN,0),"^",2)=DTE,^FHPT(FHDFN,"A",ADM,"MO","AC",DTE,MONIFN)=""
"RTN","FHCTF5",74,0)
 S FHTF=DTE_"^M^"_MONTX_"^"_DFN_"^"_ADM_"^"_MONIFN
"RTN","FHCTF5",75,0)
 D:FHDUZ FILE^FHCTF2 Q
"RTN","FHDCR1")
0^73^B10950315
"RTN","FHDCR1",1,0)
FHDCR1 ; HISC/REL/NCA/RVD - Diet Cards ;4/21/95  10:10
"RTN","FHDCR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDCR1",3,0)
F0 R !!,"Print by PATIENT or COMMUNICATION OFFICE or LOCATION or ALL? COMM// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="C" D TR^FH
"RTN","FHDCR1",4,0)
 I $P("PATIENT",X,1)'="",$P("LOCATION",X,1)'="",$P("COMMUNICATION OFFICE",X,1)'="",$P("ALL",X,1)'="" W *7,!,"  Answer with P or C or A or L" G F0
"RTN","FHDCR1",5,0)
 G P0:X?1"P".E,W0:X?1"L".E I X?1"A".E S (DFN,FHP,W1)="" G S0
"RTN","FHDCR1",6,0)
 S FHP=$O(^FH(119.73,0)) I FHP'<1,$O(^FH(119.73,FHP))<1 S (DFN,W1)="" G S0
"RTN","FHDCR1",7,0)
D0 K DIC S DIC="^FH(119.73,",DIC("A")="Select COMMUNICATION OFFICE: ",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),D0:Y<1 S FHP=+Y,(DFN,W1)="" G S0
"RTN","FHDCR1",8,0)
W0 K DIC S DIC("A")="Select DIETETIC LOCATION: ",DIC="^FH(119.6,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),W0:Y<1 S W1=+Y,(DFN,FHP)="" G S0
"RTN","FHDCR1",9,0)
P0 S FHALL=1 D ^FHOMDPA G:'FHDFN KIL S (FHP,W1)="",UPD=0,SORT="R" G F1
"RTN","FHDCR1",10,0)
 I $G(DFN),($P($G(^DPT(DFN,.35)),"^",1)) W *7,!!?5,"  [ Patient has expired. ]" G KIL
"RTN","FHDCR1",11,0)
S0 R !!,"Sort Patients: (A=Alphabetically  R=Room-Bed) R// ",SORT:DTIME G:'$T!(SORT["^") KIL S:SORT="" SORT="R" I "ar"[SORT S X=SORT D TR^FH S SORT=X
"RTN","FHDCR1",12,0)
 I SORT'?1U!("AR"'[SORT) W *7," Enter A or R" G S0
"RTN","FHDCR1",13,0)
F1 S %DT("A")="Select Date: ",%DT="AEFX",%DT("B")="TODAY",%DT(0)=DT W ! D ^%DT G KIL:"^"[X!$D(DTOUT),F1:Y<1 S (X1,D1)=+Y
"RTN","FHDCR1",14,0)
 D E1^FHPRC1 S FLG=0 I FHCY<1 S FLG=1,(FHDA,FHX1)="" G R0
"RTN","FHDCR1",15,0)
 I '$D(^FH(116,FHCY,"DA",FHDA,0)) S FLG=1,(FHDA,FHX1)=""
"RTN","FHDCR1",16,0)
R0 R !!,"Print Three Per Page? N//",X:DTIME G:'$T!(X="^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G R0
"RTN","FHDCR1",17,0)
 S TPP=$E(X,1),TPP=TPP="Y" I 'TPP S MEAL="A",FLG=1,(FHDA,FHX1)="" G P1
"RTN","FHDCR1",18,0)
R1 R !!,"Select MEAL (B,N,E,or ALL): ",MEAL:DTIME G:'$T!("^"[MEAL) KIL S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="A"
"RTN","FHDCR1",19,0)
 I "BNEA"'[MEAL!(MEAL'?1U) W *7,!,"Select B for Breakfast, N for Noon, or E for Evening or ALL for all meals" G R1
"RTN","FHDCR1",20,0)
P1 I FLG G L0:DFN,R2
"RTN","FHDCR1",21,0)
 S FHDA=^FH(116,FHCY,"DA",FHDA,0)
"RTN","FHDCR1",22,0)
 I $D(^FH(116.3,D1,0)) S X=^(0) F LL=2:1:4 I $P(X,"^",LL) S $P(FHDA,"^",LL)=$P(X,"^",LL)
"RTN","FHDCR1",23,0)
 S FHX1=FHDA G:DFN L0
"RTN","FHDCR1",24,0)
R2 R !!,"Print Only Ones With Order Changes related to the Diet Card? N // ",X:DTIME G:'$T!(X="^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,!,"  Answer YES or NO" G R2
"RTN","FHDCR1",25,0)
 S UPD=X?1"Y".E
"RTN","FHDCR1",26,0)
L0 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHDCR1",27,0)
 I $D(IO("Q")) S FHPGM="B1^FHDCR1A",FHLST="D1^MEAL^FHX1^FHP^FLG^W1^FHDFN^DFN^UPD^TPP^SORT" D EN2^FH G KIL
"RTN","FHDCR1",28,0)
 U IO D B1^FHDCR1A D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHDCR1",29,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHDCR11")
0^74^B24899410
"RTN","FHDCR11",1,0)
FHDCR11 ; HISC/REL/NCA/RVD - Build Diet Cards (Cont.) ;3/27/96  10:20
"RTN","FHDCR11",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDCR11",3,0)
BLD ; Build Diet Card list for a patient
"RTN","FHDCR11",4,0)
 S X1=$G(^FHPT(+FHDFN,"A",+ADM,0)),FHORD=$P(X1,"^",2),SVC=$P(X1,"^",5),SF=$P(X1,"^",7),IS=$P(X1,"^",10),FHD=$P(X1,"^",16),(FHOR,X)=""
"RTN","FHDCR11",5,0)
 I FHPAR'="Y" Q:SVC="C"
"RTN","FHDCR11",6,0)
 I SVC="C" S:SP'=SP1 SP=SP1 Q:'SP
"RTN","FHDCR11",7,0)
 Q:'FHORD  S X=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHDCR11",8,0)
 S MPD=$P(X,"^",13),FHOR=$P(X,"^",2,6) Q:"^^^^"[FHOR
"RTN","FHDCR11",9,0)
 I IS S IS=$G(^FH(119.4,+IS,0)) S:IS'="" SVC=SVC_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHDCR11",10,0)
 S:SF SVC=SVC_"  "_"SF"_"("_$S($P($G(^FHPT(FHDFN,"A",ADM,"SF",+SF,0)),"^",34)="Y":"M",1:"I")_")"
"RTN","FHDCR11",11,0)
 I UPD D OLD^FHMTK11 I OLD=FHOR S FLG2=0 D EVT^FHDCR2 Q:'FLG2
"RTN","FHDCR11",12,0)
 S STR=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,2))
"RTN","FHDCR11",13,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHDCR11",14,0)
 F MEAL="B","N","E" D
"RTN","FHDCR11",15,0)
 .K FP(MEAL),MP(MEAL),N2(MEAL) I $P(STR,";",$S(MEAL="B":1,MEAL="N":2,1:3))'="" D DECOD^FHDCR1B
"RTN","FHDCR11",16,0)
 .S PD=MPD
"RTN","FHDCR11",17,0)
 .I DPAT S PD=$P($G(^FH(111.1,DPAT,0)),"^",7) D
"RTN","FHDCR11",18,0)
 ..I $P(STR,";",$S(MEAL="B":1,MEAL="N":2,1:3))="",$O(MP(MEAL,""))="" F X8=0:0 S X8=$O(^FH(111.1,DPAT,MEAL,X8)) Q:X8<1  S Z1=$G(^(X8,0)) D
"RTN","FHDCR11",19,0)
 ...S ZZ=$G(^FH(114.1,+Z1,0)),NAM=$P(ZZ,"^",1)
"RTN","FHDCR11",20,0)
 ...S K4=$P(ZZ,"^",3),K4=$S('K4:99,K4<10:"0"_K4,1:K4)
"RTN","FHDCR11",21,0)
 ...S MP(MEAL,K4_"~"_+Z1_"~"_NAM)=$P(Z1,"^",2) Q
"RTN","FHDCR11",22,0)
 ..Q
"RTN","FHDCR11",23,0)
 .Q:PD=""  S PD=$P($G(^FH(116.2,PD,0)),"^",2) Q:PD=""
"RTN","FHDCR11",24,0)
 I NBR=2 D PRT^FHDCR1C K ^TMP($J,"MP"),^TMP($J,0),PP,S,TT S NBR=0
"RTN","FHDCR11",25,0)
 Q:PD=""  S NBR=NBR+1 D PID^FHDPA
"RTN","FHDCR11",26,0)
 S Y0=$P($G(^DPT(DFN,0)),"^",1)_" ("_BID_")"_"  "_SVC,N1=0,S(NBR)=0
"RTN","FHDCR11",27,0)
 D CUR^FHORD7
"RTN","FHDCR11",28,0)
 S N1=N1+1 I $L(Y)<60 S PP(N1,NBR)=Y
"RTN","FHDCR11",29,0)
 E  S L=$S($L($P(Y,",",1,4))<60:4,1:3) S PP(N1,NBR)=$P(Y,",",1,L),N1=N1+1,PP(N1,NBR)=$E($P(Y,",",L+1,5),2,99)
"RTN","FHDCR11",30,0)
 S ^TMP($J,0,NBR)=Y0_"^"_WRDN_"^"_RM
"RTN","FHDCR11",31,0)
 I $G(DFN) D ALG^FHCLN S ALG="ALLGS.: "_$S(ALG="":"NONE ON FILE",1:ALG) S J=0 D BRK^FHDCR1B
"RTN","FHDCR11",32,0)
 S S(NBR)=S(NBR)+1
"RTN","FHDCR11",33,0)
 S ^TMP($J,"MP",S(NBR),NBR)="   Breakfast                Noon               Evening"
"RTN","FHDCR11",34,0)
 K NN F MEAL="B","N","E" D
"RTN","FHDCR11",35,0)
 .S X8="" F  S X8=$O(MP(MEAL,X8)) Q:X8=""  S X1=+$G(MP(MEAL,X8)) D
"RTN","FHDCR11",36,0)
 ..;Q:'X1  S Z1=$P(X8,"~",2),QTY=$S(+X1#1>0:$J(+X1,3,1),1:+X1_"  ")_" "
"RTN","FHDCR11",37,0)
 ..Q:'X1  S Z1=$P(X8,"~",2),PAD=$E("    ",1,5-$L(X1)),QTY=+X1_PAD
"RTN","FHDCR11",38,0)
 ..S NN(MEAL,X8)=QTY_$E($P(X8,"~",3),1,15)
"RTN","FHDCR11",39,0)
 ..Q
"RTN","FHDCR11",40,0)
 .Q
"RTN","FHDCR11",41,0)
 K TT,SRT F MEAL="B","N","E" D
"RTN","FHDCR11",42,0)
 .S TT(MEAL)=0
"RTN","FHDCR11",43,0)
 .S X8="" F  S X8=$O(NN(MEAL,X8)) Q:X8=""  D
"RTN","FHDCR11",44,0)
 ..S TT(MEAL)=TT(MEAL)+1,SRT(TT(MEAL),MEAL)=$G(NN(MEAL,X8)) Q
"RTN","FHDCR11",45,0)
 .D SO^FHDCR1B,DISL^FHDCR1B Q
"RTN","FHDCR11",46,0)
 F N1=1:1 Q:'$D(SRT(N1))  D
"RTN","FHDCR11",47,0)
 .S STR="" F MEAL="B","N","E" D
"RTN","FHDCR11",48,0)
 ..I '$D(SRT(N1,MEAL)) S STR=STR_$J("",20) Q
"RTN","FHDCR11",49,0)
 ..S STR=STR_SRT(N1,MEAL)
"RTN","FHDCR11",50,0)
 ..S:MEAL'="E" STR=STR_$J("",20-$L(SRT(N1,MEAL)))
"RTN","FHDCR11",51,0)
 ..Q
"RTN","FHDCR11",52,0)
 .S S(NBR)=S(NBR)+1
"RTN","FHDCR11",53,0)
 .S ^TMP($J,"MP",S(NBR),NBR)=STR
"RTN","FHDCR11",54,0)
 .Q
"RTN","FHDCR11",55,0)
 ;
"RTN","FHDCR11",56,0)
OUT ;OUTPATIENT data
"RTN","FHDCR11",57,0)
 S (SVC,SF,IS)=""
"RTN","FHDCR11",58,0)
 Q:'$D(FHKDAT)
"RTN","FHDCR11",59,0)
 S X1=FHKDAT
"RTN","FHDCR11",60,0)
 S FHWARD=W1 D LOC
"RTN","FHDCR11",61,0)
 S (FHOR,FHORD)=FHDIET,FHD=$P(X1,"^",14)
"RTN","FHDCR11",62,0)
 I FHPAR'="Y" Q:SVC="C"
"RTN","FHDCR11",63,0)
 I SVC="C" S:SP'=SP1 SP=SP1 Q:'SP
"RTN","FHDCR11",64,0)
 Q:'FHORD
"RTN","FHDCR11",65,0)
 I UPD D OLD^FHMTK11 I OLD=FHOR S FLG2=0 D EVT^FHDCR2 Q:'FLG2
"RTN","FHDCR11",66,0)
 S STR="",FHOR=FHOR_"^^^^"
"RTN","FHDCR11",67,0)
 ;
"RTN","FHDCR11",68,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHDCR11",69,0)
 F MEAL="B","N","E" D
"RTN","FHDCR11",70,0)
 .Q:FHMEAL'=MEAL
"RTN","FHDCR11",71,0)
 .K FP(MEAL),MP(MEAL),N2(MEAL)
"RTN","FHDCR11",72,0)
 .S PD=MPD
"RTN","FHDCR11",73,0)
 .I DPAT S PD=$P($G(^FH(111.1,DPAT,0)),"^",7) D
"RTN","FHDCR11",74,0)
 ..F X8=0:0 S X8=$O(^FH(111.1,DPAT,MEAL,X8)) Q:X8<1  S Z1=$G(^(X8,0)) D
"RTN","FHDCR11",75,0)
 ...S ZZ=$G(^FH(114.1,+Z1,0)),NAM=$P(ZZ,"^",1)
"RTN","FHDCR11",76,0)
 ...S K4=$P(ZZ,"^",3),K4=$S('K4:99,K4<10:"0"_K4,1:K4)
"RTN","FHDCR11",77,0)
 ...S MP(MEAL,K4_"~"_+Z1_"~"_NAM)=$P(Z1,"^",2) Q
"RTN","FHDCR11",78,0)
 ..Q
"RTN","FHDCR11",79,0)
 .Q:PD=""  S PD=$P($G(^FH(116.2,PD,0)),"^",2) Q:PD=""
"RTN","FHDCR11",80,0)
 I NBR=2 D PRT^FHDCR1C K ^TMP($J,"MP"),^TMP($J,0),PP,S,TT S (N1,NBR)=0
"RTN","FHDCR11",81,0)
 Q:PD=""  S NBR=NBR+1 D PATNAME^FHOMUTL
"RTN","FHDCR11",82,0)
 S Y0=FHPTNM_" ("_FHBID_")"_"  "_SVC,N1=0,S(NBR)=0,Y="***"
"RTN","FHDCR11",83,0)
 S:$G(FHDIET) Y=$P(^FH(111,FHDIET,0),U,7)
"RTN","FHDCR11",84,0)
 S N1=N1+1 I $L(Y)<60 S PP(N1,NBR)=Y
"RTN","FHDCR11",85,0)
 E  S L=$S($L($P(Y,",",1,4))<60:4,1:3) S PP(N1,NBR)=$P(Y,",",1,L),N1=N1+1,PP(N1,NBR)=$E($P(Y,",",L+1,5),2,99)
"RTN","FHDCR11",86,0)
 S ^TMP($J,0,NBR)=Y0_"^"_WRDN_"^"_RM_"^^^^"_FHMEAL
"RTN","FHDCR11",87,0)
 I $G(DFN) D ALG^FHCLN S ALG="ALLGS.: "_$S(ALG="":"NONE ON FILE",1:ALG) S J=0 D BRK^FHDCR1B
"RTN","FHDCR11",88,0)
 S S(NBR)=S(NBR)+1
"RTN","FHDCR11",89,0)
 S ^TMP($J,"MP",S(NBR),NBR)="   Breakfast                Noon               Evening"
"RTN","FHDCR11",90,0)
 K NN F MEAL="B","N","E" D
"RTN","FHDCR11",91,0)
 .S X8="" F  S X8=$O(MP(MEAL,X8)) Q:X8=""  S X1=+$G(MP(MEAL,X8)) D
"RTN","FHDCR11",92,0)
 ..;Q:'X1  S Z1=$P(X8,"~",2),QTY=$S(+X1#1>0:$J(+X1,3,1),1:+X1_"  ")_" "
"RTN","FHDCR11",93,0)
 ..Q:'X1  S Z1=$P(X8,"~",2),PAD=$E("    ",1,5-$L(X1)),QTY=+X1_PAD
"RTN","FHDCR11",94,0)
 ..S NN(MEAL,X8)=QTY_$E($P(X8,"~",3),1,15)
"RTN","FHDCR11",95,0)
 ..Q
"RTN","FHDCR11",96,0)
 .Q
"RTN","FHDCR11",97,0)
 K TT,SRT F MEAL="B","N","E" D
"RTN","FHDCR11",98,0)
 .S TT(MEAL)=0
"RTN","FHDCR11",99,0)
 .S X8="" F  S X8=$O(NN(MEAL,X8)) Q:X8=""  D
"RTN","FHDCR11",100,0)
 ..S TT(MEAL)=TT(MEAL)+1,SRT(TT(MEAL),MEAL)=$G(NN(MEAL,X8)) Q
"RTN","FHDCR11",101,0)
 .D DISL^FHDCR1B
"RTN","FHDCR11",102,0)
 ;
"RTN","FHDCR11",103,0)
 F N1=1:1 Q:'$D(SRT(N1))  D
"RTN","FHDCR11",104,0)
 .S STR="" F MEAL="B","N","E" D
"RTN","FHDCR11",105,0)
 ..I '$D(SRT(N1,MEAL))!(MEAL'=FHMEAL) S STR=STR_$J("",20) Q
"RTN","FHDCR11",106,0)
 ..S STR=STR_SRT(N1,MEAL)
"RTN","FHDCR11",107,0)
 ..S:MEAL'="E" STR=STR_$J("",20-$L(SRT(N1,MEAL)))
"RTN","FHDCR11",108,0)
 ..Q
"RTN","FHDCR11",109,0)
 .S S(NBR)=S(NBR)+1
"RTN","FHDCR11",110,0)
 .S ^TMP($J,"MP",S(NBR),NBR)=STR
"RTN","FHDCR11",111,0)
 .Q
"RTN","FHDCR11",112,0)
 Q
"RTN","FHDCR11",113,0)
 ;
"RTN","FHDCR11",114,0)
LOC ;get location info
"RTN","FHDCR11",115,0)
 I $G(FHWARD),$D(^FH(119.6,FHWARD,0)) S FHWDAT=^FH(119.6,FHWARD,0) D
"RTN","FHDCR11",116,0)
 .S FHWT=$P(FHWDAT,U,5)
"RTN","FHDCR11",117,0)
 .S FHWC=$P(FHWDAT,U,6)
"RTN","FHDCR11",118,0)
 .S FHWD=$P(FHWDAT,U,7)
"RTN","FHDCR11",119,0)
 .I $G(FHWT),$D(^FH(119.72,FHWT,0)) S SVC=$P(^FH(119.72,FHWT,0),U,2)
"RTN","FHDCR11",120,0)
 .I $G(FHWC),$D(^FH(119.72,FHWC,0)) S SVC=$P(^FH(119.72,FHWC,0),U,2)
"RTN","FHDCR11",121,0)
 .I FHRGS="OP" D
"RTN","FHDCR11",122,0)
 ..S (FHOR,FHDIET)=$P(FHKDAT,U,2)
"RTN","FHDCR11",123,0)
 .I FHRGS="GM" D
"RTN","FHDCR11",124,0)
 ..S FHDIET=$P(FHKDAT,U,6)
"RTN","FHDCR11",125,0)
 .I FHRGS="SM" D
"RTN","FHDCR11",126,0)
 ..S FHDIET=$P(FHKDAT,U,4)
"RTN","FHDCR11",127,0)
 .S:$G(FHDIET) MPD=$P(^FH(111,FHDIET,0),U,5)
"RTN","FHDCR11",128,0)
 Q
"RTN","FHDCR1A")
0^75^B42167175
"RTN","FHDCR1A",1,0)
FHDCR1A ; HISC/REL/NCA/RVD - Build Diet Cards ;1/21/99  14:04
"RTN","FHDCR1A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDCR1A",3,0)
B1 ; Store wards
"RTN","FHDCR1A",4,0)
 K ^TMP($J),NN,N,P S MFLG=0 D Q1^FHDCR1B D NOW^%DTC S (DTP,TIM)=% D DTP^FH S HD=DTP S:MEAL="A" MFLG=1
"RTN","FHDCR1A",5,0)
 S DTP=D1 D DTP^FH S (MDT,MEALDT)=DTP,MEALDT=$J("",62-$L(MEALDT)\2)_MEALDT
"RTN","FHDCR1A",6,0)
 S FHBOT=$P($G(^FH(119.9,1,4)),"^",1)
"RTN","FHDCR1A",7,0)
 S FHD1=D1-.00001,FHD2=D1+.99999
"RTN","FHDCR1A",8,0)
 S FHDFNSAV="",FHW1SAV=W1,FHFHPSAV=FHP,FHMEALSA=MEAL
"RTN","FHDCR1A",9,0)
 S:$G(FHDFN) FHDFNSAV=FHDFN
"RTN","FHDCR1A",10,0)
 I $G(DFN),'$D(^DPT(DFN,.1)) G OUTALL
"RTN","FHDCR1A",11,0)
 I '$G(DFN),$G(FHDFN) G OUTALL
"RTN","FHDCR1A",12,0)
 ;next process inpatient data
"RTN","FHDCR1A",13,0)
DFN I DFN D  Q
"RTN","FHDCR1A",14,0)
 .S ADM=+$G(^DPT(DFN,.105)),W1=+$P($G(^FHPT(DFN,"A",+ADM,0)),"^",8)
"RTN","FHDCR1A",15,0)
 .S K1=$G(^FH(119.6,+W1,0)),WRDN=$P(K1,"^",1),SP=$P(K1,"^",5),SP1=$P(K1,"^",6),FHPAR=$P(K1,"^",24),RM=$G(^DPT(FHDFN,.101))
"RTN","FHDCR1A",16,0)
 .I 'SP Q:FHPAR'="Y"  S SP=SP1 Q:'SP
"RTN","FHDCR1A",17,0)
 .K PP,S,MM S NBR=0
"RTN","FHDCR1A",18,0)
 .I 'TPP D BLD^FHDCR11 D:NBR UPD,PRT^FHDCR1C Q
"RTN","FHDCR1A",19,0)
 .I 'MFLG D BLD^FHDCR1D D:NBR UPD,PRT^FHMTK1C Q
"RTN","FHDCR1A",20,0)
 .F MEAL="B","N","E" D BLD^FHDCR1D
"RTN","FHDCR1A",21,0)
 .D UPD
"RTN","FHDCR1A",22,0)
 .D:NBR PRT^FHMTK1C
"RTN","FHDCR1A",23,0)
 ;if ward, do specific ward/location;otherwise, do all entry for all
"RTN","FHDCR1A",24,0)
 ;wards/locations and all communication offices.
"RTN","FHDCR1A",25,0)
WARD I W1 S ^TMP($J,"W","01"_$P($G(^FH(119.6,+W1,0)),"^",1))=W1_"^"_$P($G(^FH(119.6,+W1,0)),"^",5,6)_"^"_$P($G(^FH(119.6,+W1,0)),"^",24)
"RTN","FHDCR1A",26,0)
 E  F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  D
"RTN","FHDCR1A",27,0)
 .S P0=$G(^FH(119.6,W1,0)),WRDN=$P(P0,"^",1),SP=$P(P0,"^",5,6),D2=$P(P0,"^",8),FHPAR=$P(P0,"^",24),P0=$P(P0,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHDCR1A",28,0)
 .I FHP,D2'=FHP Q
"RTN","FHDCR1A",29,0)
 .S ^TMP($J,"W",P0_WRDN)=W1_"^"_SP_"^"_FHPAR Q
"RTN","FHDCR1A",30,0)
 S NX="" F  S NX=$O(^TMP($J,"W",NX)) Q:NX=""  S X1=$G(^(NX)),W1=+X1,FHS=$P(X1,"^",2),SP1=$P(X1,"^",3),FHPAR=$P(X1,"^",4),WRDN=$E(NX,3,99) S:'FHS&(FHPAR="Y") FHS=SP1 I FHS K ^TMP($J,"D") D
"RTN","FHDCR1A",31,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  D
"RTN","FHDCR1A",32,0)
 ..D PATNAME^FHOMUTL Q:'$G(DFN)
"RTN","FHDCR1A",33,0)
 ..S ADM=$G(^FHPT("AW",W1,FHDFN))
"RTN","FHDCR1A",34,0)
 ..I SORT="A" S RM=$P($G(^DPT(DFN,0)),"^",1),DL=0,RMB=$G(^DPT(DFN,.101)) S:RMB="" RMB="***"
"RTN","FHDCR1A",35,0)
 ..E  S RI=$G(^DPT(DFN,.108)),RM=$G(^DPT(DFN,.101)) S:RM="" RM="***" S:RI RE=$O(^FH(119.6,"AR",+RI,W1,0)) S:'RI RE="" S DL=$S(RE:$P($G(^FH(119.6,W1,"R",+RE,0)),"^",2),1:""),RMB=""
"RTN","FHDCR1A",36,0)
 ..S DL=$S(DL<1:99,DL<10:"0"_DL,1:DL)
"RTN","FHDCR1A",37,0)
 ..S ^TMP($J,"D",DL_"~"_RM_"~"_$S(SORT="R":DFN,1:RMB))=DFN_"^"_ADM Q
"RTN","FHDCR1A",38,0)
 .;
"RTN","FHDCR1A",39,0)
 .K ^TMP($J,"MP"),^TMP($J,0),MM,PP,S S X9="",NBR=0 F  S X9=$O(^TMP($J,"D",X9)) Q:X9=""  S FHX6=$G(^(X9)) S (DFN,FHDFN)=$P(FHX6,"^",1),ADM=$P(FHX6,"^",2) D
"RTN","FHDCR1A",40,0)
 ..S RM=$S(SORT="R":$P(X9,"~",2),1:$P(X9,"~",3)) S SP=FHS
"RTN","FHDCR1A",41,0)
 ..I TPP D  Q
"RTN","FHDCR1A",42,0)
 ...I 'MFLG D BLD^FHDCR1D,UPD Q
"RTN","FHDCR1A",43,0)
 ...F MEAL="B","N","E" D BLD^FHDCR1D
"RTN","FHDCR1A",44,0)
 ...D UPD
"RTN","FHDCR1A",45,0)
 ...Q
"RTN","FHDCR1A",46,0)
 ..I 'TPP D BLD^FHDCR11 D UPD Q
"RTN","FHDCR1A",47,0)
 .I NBR,TPP D PRT^FHMTK1C Q
"RTN","FHDCR1A",48,0)
 .D:NBR PRT^FHDCR1C
"RTN","FHDCR1A",49,0)
 ;
"RTN","FHDCR1A",50,0)
OUTALL K ^TMP($J,"D")   ;reset/clean-up tmp global outpatient process.
"RTN","FHDCR1A",51,0)
 ;process outpatient data
"RTN","FHDCR1A",52,0)
 ;next recurring
"RTN","FHDCR1A",53,0)
 F FHK1=FHD1:0 S FHK1=$O(^FHPT("RM",FHK1)) Q:(FHK1'>0)!(FHK1>FHD2)  D
"RTN","FHDCR1A",54,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHK1,FHDFN)) Q:FHDFN'>0  D
"RTN","FHDCR1A",55,0)
 ..F FHKD=0:0 S FHKD=$O(^FHPT("RM",FHK1,FHDFN,FHKD)) Q:FHKD'>0  D
"RTN","FHDCR1A",56,0)
 ...S FHKDAT=^FHPT(FHDFN,"OP",FHKD,0)
"RTN","FHDCR1A",57,0)
 ...S (W1,FHW1)=$P(FHKDAT,U,3)
"RTN","FHDCR1A",58,0)
 ...S FHDIET=$P(FHKDAT,U,2),FHMEAL=$P(FHKDAT,U,4),FHSTAT=$P(FHKDAT,U,15)
"RTN","FHDCR1A",59,0)
 ...S:FHDIET="" FHDIET=$P(FHKDAT,U,7)
"RTN","FHDCR1A",60,0)
 ...S:FHDIET="" FHDIET=$P(FHKDAT,U,8)
"RTN","FHDCR1A",61,0)
 ...S:FHDIET="" FHDIET=$P(FHKDAT,U,9)
"RTN","FHDCR1A",62,0)
 ...S:FHDIET="" FHDIET=$P(FHKDAT,U,10)
"RTN","FHDCR1A",63,0)
 ...S:FHDIET="" FHDIET=$P(FHKDAT,U,11)
"RTN","FHDCR1A",64,0)
 ...I (FHMEALSA'="A"),(FHMEAL'=FHMEALSA) Q
"RTN","FHDCR1A",65,0)
 ...I FHSTAT="C" Q
"RTN","FHDCR1A",66,0)
 ...I $G(FHW1SAV),(FHW1'=FHW1SAV) Q
"RTN","FHDCR1A",67,0)
 ...I $G(FHDFNSAV),(FHDFN'=FHDFNSAV) Q
"RTN","FHDCR1A",68,0)
 ...S FHLOC="",FHRGS="OP"
"RTN","FHDCR1A",69,0)
 ...Q:'$G(FHW1)
"RTN","FHDCR1A",70,0)
 ...S:$D(^FH(119.6,FHW1,0)) FHLOC=$P(^FH(119.6,FHW1,0),U,8)
"RTN","FHDCR1A",71,0)
 ...I $G(FHFHPSAV),$G(FHLOC),(FHFHPSAV'=FHLOC) Q
"RTN","FHDCR1A",72,0)
 ...S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHDCR1A",73,0)
 ...I $G(FHW1SAV)!($G(FHFHPSAV)) D OUTW Q
"RTN","FHDCR1A",74,0)
 ...I $G(FHDFNSAV) D OUTP Q
"RTN","FHDCR1A",75,0)
 ...D OUTW
"RTN","FHDCR1A",76,0)
 ;next guest
"RTN","FHDCR1A",77,0)
 F FHKD=FHD1:0 S FHKD=$O(^FHPT("GM",FHKD)) Q:(FHKD'>0)!(FHKD>FHD2)  D
"RTN","FHDCR1A",78,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHKD,FHDFN)) Q:FHDFN'>0  D
"RTN","FHDCR1A",79,0)
 ..S FHKDAT=^FHPT(FHDFN,"GM",FHKD,0)
"RTN","FHDCR1A",80,0)
 ..S (W1,FHW1)=$P(FHKDAT,U,5)
"RTN","FHDCR1A",81,0)
 ..S FHDIET=$P(FHKDAT,U,6),FHMEAL=$P(FHKDAT,U,3)
"RTN","FHDCR1A",82,0)
 ..I (FHMEALSA'="A"),(FHMEAL'=FHMEALSA) Q
"RTN","FHDCR1A",83,0)
 ..I $G(FHW1SAV),(FHW1'=FHW1SAV) Q
"RTN","FHDCR1A",84,0)
 ..I $G(FHDFNSAV),(FHDFN'=FHDFNSAV) Q
"RTN","FHDCR1A",85,0)
 ..S FHLOC="",FHRGS="GM"
"RTN","FHDCR1A",86,0)
 ..Q:'$G(FHW1)
"RTN","FHDCR1A",87,0)
 ..S:$D(^FH(119.6,FHW1,0)) FHLOC=$P(^FH(119.6,FHW1,0),U,8)
"RTN","FHDCR1A",88,0)
 ..I $G(FHFHPSAV),$G(FHLOC),(FHFHPSAV'=FHLOC) Q
"RTN","FHDCR1A",89,0)
 ..S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHDCR1A",90,0)
 ..I $G(FHW1SAV)!($G(FHFHPSAV)) D OUTW Q
"RTN","FHDCR1A",91,0)
 ..I $G(FHDFNSAV) D OUTP Q
"RTN","FHDCR1A",92,0)
 ..D OUTW
"RTN","FHDCR1A",93,0)
 ;next SPECIAL
"RTN","FHDCR1A",94,0)
 F FHKD=FHD1:0 S FHKD=$O(^FHPT("SM",FHKD)) Q:(FHKD'>0)!(FHKD>FHD2)  D
"RTN","FHDCR1A",95,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("SM",FHKD,FHDFN)) Q:FHDFN'>0  D
"RTN","FHDCR1A",96,0)
 ..S FHKDAT=^FHPT(FHDFN,"SM",FHKD,0)
"RTN","FHDCR1A",97,0)
 ..S (W1,FHW1)=$P(FHKDAT,U,3)
"RTN","FHDCR1A",98,0)
 ..S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHDCR1A",99,0)
 ..S FHDIET=$P(FHKDAT,U,4),FHMEAL=$P(FHKDAT,U,9),FHSTAT=$P(FHKDAT,U,2)
"RTN","FHDCR1A",100,0)
 ..I (FHMEALSA'="A"),(FHMEAL'=FHMEALSA) Q
"RTN","FHDCR1A",101,0)
 ..I (FHSTAT="C")!(FHSTAT="D") Q
"RTN","FHDCR1A",102,0)
 ..I $G(FHW1SAV),(FHW1'=FHW1SAV) Q
"RTN","FHDCR1A",103,0)
 ..I $G(FHDFNSAV),(FHDFN'=FHDFNSAV) Q
"RTN","FHDCR1A",104,0)
 ..S FHLOC="",FHRGS="SM"
"RTN","FHDCR1A",105,0)
 ..Q:'$G(FHW1)
"RTN","FHDCR1A",106,0)
 ..S:$D(^FH(119.6,FHW1,0)) FHLOC=$P(^FH(119.6,FHW1,0),U,8)
"RTN","FHDCR1A",107,0)
 ..I $G(FHFHPSAV),$G(FHLOC),(FHFHPSAV'=FHLOC) Q
"RTN","FHDCR1A",108,0)
 ..S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHDCR1A",109,0)
 ..I $G(FHW1SAV)!($G(FHFHPSAV)) D OUTW Q
"RTN","FHDCR1A",110,0)
 ..I $G(FHDFNSAV) D OUTP Q
"RTN","FHDCR1A",111,0)
 ..D OUTW
"RTN","FHDCR1A",112,0)
 ;
"RTN","FHDCR1A",113,0)
 K ^TMP($J,"MP"),^TMP($J,0),MM,PP,S S X9="",NBR=0 F  S X9=$O(^TMP($J,"D",X9)) Q:X9=""  S FHX6=$G(^(X9)) S FHDFN=$P(FHX6,"^",1),ADM=$P(FHX6,"^",2) D
"RTN","FHDCR1A",114,0)
 .S RM=$S(SORT="R":$P(X9,"~",2),1:$P(X9,"~",3)) S SP=FHS
"RTN","FHDCR1A",115,0)
 .S FHDFN=$P(FHX6,"^",1),FHRGS=$P(FHX6,"^",2)
"RTN","FHDCR1A",116,0)
 .D PATNAME^FHOMUTL
"RTN","FHDCR1A",117,0)
 .S FHKD=$P(FHX6,"^",3),W1=$P(FHX6,"^",4)
"RTN","FHDCR1A",118,0)
 .Q:$G(FHRGS)!('$G(FHKD))
"RTN","FHDCR1A",119,0)
 .S RM="***",FHSTAT=""
"RTN","FHDCR1A",120,0)
 .S FHKDAT=$G(^FHPT(FHDFN,""_FHRGS_"",FHKD,0))
"RTN","FHDCR1A",121,0)
 .I FHRGS="GM" S W1=$P(FHKDAT,U,5),FHDIET=$P(FHKDAT,U,6),FHMEAL=$P(FHKDAT,U,3)
"RTN","FHDCR1A",122,0)
 .I FHRGS="OP" S W1=$P(FHKDAT,U,3),FHDIET=$P(FHKDAT,U,2),FHMEAL=$P(FHKDAT,U,4),FHSTAT=$P(FHKDAT,U,15)
"RTN","FHDCR1A",123,0)
 .I FHRGS="SM" S W1=$P(FHKDAT,U,3),FHDIET=$P(FHKDAT,U,4),FHMEAL=$P(FHKDAT,U,9),FHSTAT=$P(FHKDAT,U,2)
"RTN","FHDCR1A",124,0)
 .;don't process IF STATUS IS cancelled or denied
"RTN","FHDCR1A",125,0)
 .I (FHSTAT="C")!(FHSTAT="D") Q
"RTN","FHDCR1A",126,0)
 .S K1=$G(^FH(119.6,+W1,0)),WRDN=$P(K1,"^",1),SP=$P(K1,"^",5),SP1=$P(K1,"^",6),FHPAR=$P(K1,"^",24)
"RTN","FHDCR1A",127,0)
 .I 'SP Q:FHPAR'="Y"  S SP=SP1 Q:'SP
"RTN","FHDCR1A",128,0)
 .I TPP D  Q
"RTN","FHDCR1A",129,0)
 ..I 'MFLG,'ADM D OUT^FHDCR1D,@FHRGS Q
"RTN","FHDCR1A",130,0)
 ..F MEAL="B","N","E" D:'ADM OUT^FHDCR1D
"RTN","FHDCR1A",131,0)
 ..D:'ADM @FHRGS
"RTN","FHDCR1A",132,0)
 .I 'TPP,'ADM D OUT^FHDCR11 D @FHRGS Q
"RTN","FHDCR1A",133,0)
 I NBR,TPP D PRT^FHMTK1C Q
"RTN","FHDCR1A",134,0)
 D:NBR PRT^FHDCR1C
"RTN","FHDCR1A",135,0)
 Q
"RTN","FHDCR1A",136,0)
 ;
"RTN","FHDCR1A",137,0)
UPD ; Update Date/Time Diet Card was Printed
"RTN","FHDCR1A",138,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",16)=TIM Q
"RTN","FHDCR1A",139,0)
OUTP ;process outpatient using patient
"RTN","FHDCR1A",140,0)
 S K1=$G(^FH(119.6,+W1,0)),WRDN=$P(K1,"^",1),SP=$P(K1,"^",5),SP1=$P(K1,"^",6),FHPAR=$P(K1,"^",24)
"RTN","FHDCR1A",141,0)
 I 'SP Q:FHPAR'="Y"  S SP=SP1 Q:'SP
"RTN","FHDCR1A",142,0)
 K PP,S,MM S NBR=0,RM="***"
"RTN","FHDCR1A",143,0)
 I 'TPP D OUT^FHDCR11 D:NBR @FHRGS,PRT^FHDCR1C Q
"RTN","FHDCR1A",144,0)
 I 'MFLG D OUT^FHDCR1D D:NBR @FHRGS,PRT^FHMTK1C Q
"RTN","FHDCR1A",145,0)
 F MEAL="B","N","E" D OUT^FHDCR1D
"RTN","FHDCR1A",146,0)
 D @FHRGS
"RTN","FHDCR1A",147,0)
 D:NBR PRT^FHMTK1C
"RTN","FHDCR1A",148,0)
 Q
"RTN","FHDCR1A",149,0)
OP S $P(^FHPT(FHDFN,"OP",FHKD,0),"^",14)=TIM Q
"RTN","FHDCR1A",150,0)
GM S $P(^FHPT(FHDFN,"GM",FHKD,0),"^",8)=TIM Q
"RTN","FHDCR1A",151,0)
SM S $P(^FHPT(FHDFN,"SM",FHKD,0),"^",11)=TIM Q
"RTN","FHDCR1A",152,0)
 ;
"RTN","FHDCR1A",153,0)
OUTW ;process outpatient using all and ward.
"RTN","FHDCR1A",154,0)
 ;F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  D
"RTN","FHDCR1A",155,0)
 D PATNAME^FHOMUTL
"RTN","FHDCR1A",156,0)
 I SORT="A" S RM=FHPTNM,DL=0,RMB="***"
"RTN","FHDCR1A",157,0)
 E  S (RI,RM,RE,RMB,DL)="***"
"RTN","FHDCR1A",158,0)
 S ^TMP($J,"D",DL_"~"_RM_"~"_$S(SORT="R":FHDFN,1:RMB)_FHMEAL)=FHDFN_"^"_FHRGS_"^"_FHKD_"^"_W1
"RTN","FHDCR1A",159,0)
 Q
"RTN","FHDCR1B")
0^76^B18417680
"RTN","FHDCR1B",1,0)
FHDCR1B ; HISC/NCA - Diet Card Utilities ;2/23/00  09:51
"RTN","FHDCR1B",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDCR1B",3,0)
Q1 ; Store Bread/Beverage default, Food Preference, and Recipes of meal
"RTN","FHDCR1B",4,0)
 S LN=$S(IOST?1"C".E:IOSL-2,1:IOSL-6),FHX4=FHX1 F SP=0:0 S SP=$O(^FH(119.72,SP)) Q:SP<1  S Z=$G(^(SP,0)),^TMP($J,"SRP",SP)=$P(Z,"^",1,4)
"RTN","FHDCR1B",5,0)
 I MEAL'="A" S M1=MEAL D GET Q
"RTN","FHDCR1B",6,0)
 F M1="B","N","E" D GET
"RTN","FHDCR1B",7,0)
 Q
"RTN","FHDCR1B",8,0)
GET F LL=0:0 S LL=$O(^FH(115.2,LL)) Q:LL<1  D
"RTN","FHDCR1B",9,0)
 .S L2=$G(^(LL,0))
"RTN","FHDCR1B",10,0)
 .I $P(L2,"^",2)="D" D  Q
"RTN","FHDCR1B",11,0)
 ..I FLG S ^TMP($J,"X",M1,LL,0)=""
"RTN","FHDCR1B",12,0)
 ..F KK=0:0 S KK=$O(^FH(115.2,LL,"X",KK)) Q:KK<1  S REC=$P($G(^(KK,0)),"^",1) S ^TMP($J,"X",M1,LL,KK)=+REC
"RTN","FHDCR1B",13,0)
 ..Q
"RTN","FHDCR1B",14,0)
 .S REC=$P(L2,"^",4) Q:'REC  S Y=$G(^FH(114,+REC,0)),NAM=$P(Y,"^",1),K3=$P(Y,"^",7) Q:'K3  I $P(L2,"^",5) D
"RTN","FHDCR1B",15,0)
 ..I $P(L2,"^",6)[M1 S:'$D(^TMP($J,"FHDEF",M1,K3,+REC)) ^TMP($J,"FHDEF",M1,K3,+REC)=+REC_"^"_NAM
"RTN","FHDCR1B",16,0)
 ..Q
"RTN","FHDCR1B",17,0)
 .Q
"RTN","FHDCR1B",18,0)
 I FLG D  Q
"RTN","FHDCR1B",19,0)
 .S P1="" F  S P1=$O(^FH(116.2,"C",P1)) Q:P1=""  F P2=0:0 S P2=$O(^FH(116.2,"C",P1,P2)) Q:P2<1  S NN(P1)=+P2
"RTN","FHDCR1B",20,0)
 .F LL=0:0 S LL=$O(^TMP($J,"FHDEF",M1,LL)) Q:LL<1  F NX=0:0 S NX=$O(^TMP($J,"FHDEF",M1,LL,NX)) Q:NX<1  S L1=$G(^TMP($J,"FHDEF",M1,LL,NX)) D
"RTN","FHDCR1B",21,0)
 ..S NAM=$P(L1,"^",2)
"RTN","FHDCR1B",22,0)
 ..S PD="" F  S PD=$O(NN(PD)) Q:PD=""  D
"RTN","FHDCR1B",23,0)
 ...S P4="~" F SP=0:0 S SP=$O(^TMP($J,"SRP",SP)) Q:SP<1  S P4=P4_SP_"~"
"RTN","FHDCR1B",24,0)
 ...S ^TMP($J,"DEF",M1,PD,LL_"~"_NAM)=+L1_"~"_LL_"~"_NAM_P4
"RTN","FHDCR1B",25,0)
 ...Q
"RTN","FHDCR1B",26,0)
 ..Q
"RTN","FHDCR1B",27,0)
 .Q
"RTN","FHDCR1B",28,0)
 S FHX1=$P(FHX4,"^",$F("BNE",M1)) Q:'FHX1
"RTN","FHDCR1B",29,0)
 F LL=0:0 S LL=$O(^TMP($J,"X",M1,LL)) Q:LL<1  F KK=0:0 S KK=$O(^TMP($J,"X",M1,LL,KK)) Q:KK<1  S X1=+$G(^(KK)),X2=$O(^FH(116.1,FHX1,"RE","B",X1,0)) I X2<1 K ^TMP($J,"X",M1,LL,KK)
"RTN","FHDCR1B",30,0)
 F P1=0:0 S P1=$O(^FH(116.1,FHX1,"RE",P1)) Q:P1<1  S L1=$G(^(P1,0)),Y=$G(^FH(114,+L1,0)),NAM=$P(Y,"^",1) D
"RTN","FHDCR1B",31,0)
 .F CAT=0:0 S CAT=$O(^FH(116.1,FHX1,"RE",P1,"R",CAT)) Q:CAT<1  S MCA=$G(^(CAT,0)) D
"RTN","FHDCR1B",32,0)
 ..S FHPD=$P(MCA,"^",2),K3=+MCA S:'K3 K3=$P(Y,"^",7) S K4=$P($G(^FH(114.1,+K3,0)),"^",3)
"RTN","FHDCR1B",33,0)
 ..Q:'$D(^TMP($J,"FHDEF",M1,K3))
"RTN","FHDCR1B",34,0)
 ..F P2=1:1 S FHX2=$P(FHPD," ",P2) Q:FHX2=""  S PD=$P(FHX2,";",1),P4="~" I PD'="" D
"RTN","FHDCR1B",35,0)
 ...F SP=0:0 S SP=$O(^TMP($J,"SRP",SP)) Q:SP<1  S SRP=$G(^TMP($J,"SRP",SP)),Z1=$G(^FH(116.1,FHX1,"RE",P1,"D",SP,0)),Z1=$P(Z1,"^",2),Z1=$S(Z1="":1,1:Z1) D SRP
"RTN","FHDCR1B",36,0)
 ...S ^TMP($J,"DEF",M1,PD,K3_"~"_NAM)=+L1_"~"_K3_"~"_NAM_P4 Q
"RTN","FHDCR1B",37,0)
 ..Q
"RTN","FHDCR1B",38,0)
 .Q
"RTN","FHDCR1B",39,0)
 Q
"RTN","FHDCR1B",40,0)
DECOD ; Decode code string
"RTN","FHDCR1B",41,0)
 S M1=$S(MEAL="B":1,MEAL="N":2,1:3),ST=$P(STR,";",M1)
"RTN","FHDCR1B",42,0)
 F X4=1:1 Q:$P(ST," ",X4,99)=""  D
"RTN","FHDCR1B",43,0)
 .S X1=$P(ST," ",X4),ZZ=$G(^FH(114.1,+X1,0)),NAM=$P(ZZ,"^",1)
"RTN","FHDCR1B",44,0)
 .S K4=$P(ZZ,"^",3),K4=$S('K4:99,K4<10:"0"_K4,1:K4)
"RTN","FHDCR1B",45,0)
 .S $P(X1,",",2)=$S($P(X1,",",2)'="":$P(X1,",",2),1:1)
"RTN","FHDCR1B",46,0)
 .S MP(MEAL,K4_"~"_+X1_"~"_NAM)=$P(X1,",",2) Q
"RTN","FHDCR1B",47,0)
 Q
"RTN","FHDCR1B",48,0)
DISL ; Store patient dislikes
"RTN","FHDCR1B",49,0)
 F LL=0:0 S LL=$O(^TMP($J,"X",MEAL,LL)) Q:LL<1  D DL1 F KK=0:0 S KK=$O(^TMP($J,"X",MEAL,LL,KK)) Q:KK<1
"RTN","FHDCR1B",50,0)
 Q
"RTN","FHDCR1B",51,0)
DL1 S X6=$O(^FHPT(FHDFN,"P","B",LL,0)) Q:X6<1
"RTN","FHDCR1B",52,0)
 S X2=$G(^FHPT(FHDFN,"P",X6,0)) Q:$P(X2,"^",2)'[MEAL
"RTN","FHDCR1B",53,0)
 S TT(MEAL)=TT(MEAL)+1
"RTN","FHDCR1B",54,0)
 S SRT(TT(MEAL),MEAL)="    "_$E($P($G(^FH(115.2,+X2,0)),"^",1),1,15)
"RTN","FHDCR1B",55,0)
 Q
"RTN","FHDCR1B",56,0)
CHK ; Check for Patient dislike on meal
"RTN","FHDCR1B",57,0)
 F LL=0:0 S LL=$O(^TMP($J,"X",MEAL,LL)) Q:LL<1  F KK=0:0 S KK=$O(^TMP($J,"X",MEAL,LL,KK)) Q:KK<1  S X1=+$G(^TMP($J,"X",MEAL,LL,KK)) D
"RTN","FHDCR1B",58,0)
 .S X6=$O(^FHPT(FHDFN,"P","B",LL,0)) Q:X6<1
"RTN","FHDCR1B",59,0)
 .S X2=$G(^FHPT(FHDFN,"P",X6,0)) Q:$P(X2,"^",2)'[MEAL
"RTN","FHDCR1B",60,0)
 .S FP(MEAL,X1)=""
"RTN","FHDCR1B",61,0)
 .Q
"RTN","FHDCR1B",62,0)
 Q
"RTN","FHDCR1B",63,0)
SO ; Store Standing Orders
"RTN","FHDCR1B",64,0)
 F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  D
"RTN","FHDCR1B",65,0)
 .S X=$G(^FHPT(FHDFN,"A",ADM,"SP",K,0)),Z=$P(X,"^",2),M=$P(X,"^",3) Q:'Z
"RTN","FHDCR1B",66,0)
 .I M[MEAL S TT(MEAL)=TT(MEAL)+1,SRT(TT(MEAL),MEAL)=$S($P(X,"^",8):$P(X,"^",8),1:1)_"   "_$E($P($G(^FH(118.3,+Z,0)),"^",1),1,15) Q
"RTN","FHDCR1B",67,0)
 Q
"RTN","FHDCR1B",68,0)
SRP ; Store service point for each Production Diet of recipe
"RTN","FHDCR1B",69,0)
 I Z1 S:'$F(P4,"~"_SP_"~") P4=P4_SP_"~"
"RTN","FHDCR1B",70,0)
 S FHX3=$P(FHX2,";",2),SC=$S(FHX3'="":$E(FHX3,1),1:""),NUM=$S(SC'="":$P(FHX3,SC,2),1:"")
"RTN","FHDCR1B",71,0)
 I SC=$P(SRP,"^",2),NUM S:'$F(P4,"~"_SP_"~") P4=P4_SP_"~"
"RTN","FHDCR1B",72,0)
 S FHX3=$P(FHX2,";",3),SC=$S(FHX3'="":$E(FHX3,1),1:""),NUM=$S(SC'="":$P(FHX3,SC,2),1:"")
"RTN","FHDCR1B",73,0)
 I SC=$P(SRP,"^",2),NUM S:'$F(P4,"~"_SP_"~") P4=P4_SP_"~"
"RTN","FHDCR1B",74,0)
 Q
"RTN","FHDCR1B",75,0)
BRK ; Break the line if allergies' length >50 chars
"RTN","FHDCR1B",76,0)
 I J>2 S S(NBR)=S(NBR)+1,^TMP($J,"MP",S(NBR),NBR)=$S($L(ALG)<51:ALG,1:$J("",8)_"OTHERS") Q
"RTN","FHDCR1B",77,0)
 I $L(ALG)<51 S S(NBR)=S(NBR)+1,J=J+1,^TMP($J,"MP",S(NBR),NBR)=ALG Q
"RTN","FHDCR1B",78,0)
 F L=52:-1:8 Q:$E(ALG,L-1,L)=", "
"RTN","FHDCR1B",79,0)
 I L=8 S L=50 S S(NBR)=S(NBR)+1,J=J+1,^TMP($J,"MP",S(NBR),NBR)=$E(ALG,1,50)
"RTN","FHDCR1B",80,0)
 E  S S(NBR)=S(NBR)+1,J=J+1,^TMP($J,"MP",S(NBR),NBR)=$E(ALG,1,L-1)
"RTN","FHDCR1B",81,0)
 S ALG=$J("",8)_$E(ALG,L+1,999)
"RTN","FHDCR1B",82,0)
 G BRK
"RTN","FHDCR1C")
0^77^B3312595
"RTN","FHDCR1C",1,0)
FHDCR1C ; HISC/NCA/RVD - Print Diet Cards (cont.) ;5/10/95  13:02
"RTN","FHDCR1C",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDCR1C",3,0)
PRT ; Print 2 person page
"RTN","FHDCR1C",4,0)
 N NBR
"RTN","FHDCR1C",5,0)
 S TL=0 D CHKH
"RTN","FHDCR1C",6,0)
 W !! S TL=TL+2 F N1=1:1:2 I $D(^TMP($J,0,N1)) W ?$S(N1=1:2,1:65),MEALDT
"RTN","FHDCR1C",7,0)
 W ! S TL=TL+1 F N1=1:1 Q:'$D(PP(N1))  W ! S TL=TL+1 F NBR=1:1:2 I $D(PP(N1,NBR)) W ?$S(NBR=1:2,1:65),PP(N1,NBR)
"RTN","FHDCR1C",8,0)
 W ! S TL=TL+1
"RTN","FHDCR1C",9,0)
 F N1=1:1 Q:'$D(^TMP($J,"MP",N1))  D:(TL+2)'<($S(FHBOT="Y":LN-5,1:LN-3)) NXT W !! S TL=TL+2 F NBR=1:1:2 D
"RTN","FHDCR1C",10,0)
 .S S1=$S(NBR=1:2,1:65)
"RTN","FHDCR1C",11,0)
 .I $D(^TMP($J,"MP",N1,NBR)) W ?S1,^TMP($J,"MP",N1,NBR)
"RTN","FHDCR1C",12,0)
 .Q
"RTN","FHDCR1C",13,0)
 I TL<LN F L1=TL:1:$S(FHBOT="Y":LN-2,1:LN) W !
"RTN","FHDCR1C",14,0)
 I FHBOT="Y" D HEAD W @IOF Q
"RTN","FHDCR1C",15,0)
 E  D FOOT
"RTN","FHDCR1C",16,0)
 W @IOF Q
"RTN","FHDCR1C",17,0)
NXT ; Print Next Page
"RTN","FHDCR1C",18,0)
 W !! S TL=TL+2 F NM=1:1:2 I $D(^TMP($J,0,NM)) W ?$S(NM=1:20,1:80),"(More Items Next Pg)"
"RTN","FHDCR1C",19,0)
 I TL<LN F L1=TL:1:$S(FHBOT="Y":LN-2,1:LN) W !
"RTN","FHDCR1C",20,0)
 I FHBOT="Y" D HEAD G N1
"RTN","FHDCR1C",21,0)
 E  D FOOT
"RTN","FHDCR1C",22,0)
N1 W @IOF S TL=0 D CHKH
"RTN","FHDCR1C",23,0)
 W !! S TL=TL+2 F XX=1:1:2 I $D(^TMP($J,0,XX)) W ?$S(XX=1:2,1:65),MEALDT,"  (Cont.)"
"RTN","FHDCR1C",24,0)
 W ! S TL=TL+1
"RTN","FHDCR1C",25,0)
 Q
"RTN","FHDCR1C",26,0)
CHKH ; Check whether name header should be on bottom
"RTN","FHDCR1C",27,0)
 I FHBOT="Y" W ! S TL=TL+1 D FOOT W ! S TL=TL+1 Q
"RTN","FHDCR1C",28,0)
 E  D HEAD
"RTN","FHDCR1C",29,0)
 Q
"RTN","FHDCR1C",30,0)
HEAD F NM=1:1:3 W ! S TL=TL+1 F NBR=1:1:2 S X=$P($G(^TMP($J,0,NBR)),"^",NM) I X'="" D
"RTN","FHDCR1C",31,0)
 .S S1=$S(NBR=1:2,1:65) I NM=1 W ?S1,X Q
"RTN","FHDCR1C",32,0)
 .W ?(S1+56-$L(X)),X Q
"RTN","FHDCR1C",33,0)
 Q
"RTN","FHDCR1C",34,0)
FOOT W ! S TL=TL+1 F NBR=1:1:2 S S1=$S(NBR=1:2,1:65) W:$D(^TMP($J,0,NBR)) ?S1,HD
"RTN","FHDCR1C",35,0)
 Q
"RTN","FHDCR1D")
0^78^B25088633
"RTN","FHDCR1D",1,0)
FHDCR1D ; HISC/REL/NCA/RVD - Build Separate Meal Diet Card ;2/23/00  09:52
"RTN","FHDCR1D",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDCR1D",3,0)
BLD ; Build Diet Card list for a patient in three per page format
"RTN","FHDCR1D",4,0)
 S X1=$G(^FHPT(+FHDFN,"A",+ADM,0)),FHORD=$P(X1,"^",2),SVC=$P(X1,"^",5),SF=$P(X1,"^",7),IS=$P(X1,"^",10),FHD=$P(X1,"^",16),(FHOR,X)=""
"RTN","FHDCR1D",5,0)
 I FHPAR'="Y" Q:SVC="C"
"RTN","FHDCR1D",6,0)
 I SVC="C" S:SP'=SP1 SP=SP1 Q:'SP
"RTN","FHDCR1D",7,0)
 Q:'FHORD  S X=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHDCR1D",8,0)
 S PD=$P(X,"^",13),FHOR=$P(X,"^",2,6) Q:"^^^^"[FHOR
"RTN","FHDCR1D",9,0)
 I IS S IS=$G(^FH(119.4,+IS,0)) S:IS'="" SVC=SVC_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHDCR1D",10,0)
 S:SF SVC=SVC_"  "_"SF"_"("_$S($P($G(^FHPT(FHDFN,"A",ADM,"SF",+SF,0)),"^",34)="Y":"M",1:"I")_")"
"RTN","FHDCR1D",11,0)
 I UPD D OLD^FHMTK11 I OLD=FHOR S FLG2=0 D EVT^FHDCR2 Q:'FLG2
"RTN","FHDCR1D",12,0)
 S STR=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,2))
"RTN","FHDCR1D",13,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHDCR1D",14,0)
 K FP,MP,N2,NN I $P(STR,";",$S(MEAL="B":1,MEAL="N":2,1:3))'="" D DECOD^FHDCR1B
"RTN","FHDCR1D",15,0)
 I DPAT S PD=$P($G(^FH(111.1,DPAT,0)),"^",7) D
"RTN","FHDCR1D",16,0)
 .I $P(STR,";",$S(MEAL="B":1,MEAL="N":2,1:3))="",$O(MP(MEAL,""))="" F X8=0:0 S X8=$O(^FH(111.1,DPAT,MEAL,X8)) Q:X8<1  S Z1=$G(^(X8,0)) D
"RTN","FHDCR1D",17,0)
 ..S ZZ=$G(^FH(114.1,+Z1,0)),NAM=$P(ZZ,"^",1)
"RTN","FHDCR1D",18,0)
 ..S K4=$P(ZZ,"^",3),K4=$S('K4:99,K4<10:"0"_K4,1:K4)
"RTN","FHDCR1D",19,0)
 ..S MP(MEAL,K4_"~"_+Z1_"~"_NAM)=$P(Z1,"^",2) Q
"RTN","FHDCR1D",20,0)
 .Q
"RTN","FHDCR1D",21,0)
 Q:PD=""  S PD=$P($G(^FH(116.2,PD,0)),"^",2) Q:PD=""  D CHK^FHMTK1B
"RTN","FHDCR1D",22,0)
 I NBR=3 D PRT^FHMTK1C K MM,PP,S S NBR=0
"RTN","FHDCR1D",23,0)
 S NBR=NBR+1 D PID^FHDPA
"RTN","FHDCR1D",24,0)
 F X6=0:0 S X6=$O(^FHPT(FHDFN,"P","B",X6)) Q:X6<1  F X7=0:0 S X7=$O(^FHPT(FHDFN,"P","B",X6,X7)) Q:X7<1  D
"RTN","FHDCR1D",25,0)
 .S PS=$P($G(^FH(115.2,+X6,0)),"^",4) I PS S P4=$G(^FH(114,+PS,0)),P1=$P(P4,"^",7)_"^"_+PS_"^"_$P(P4,"^",1) I +P1,$D(^TMP($J,"FHDEF",MEAL,+P1)) D
"RTN","FHDCR1D",26,0)
 ..S CHK="" F  S CHK=$O(^TMP($J,"DEF",MEAL,PD,CHK)) Q:CHK=""  S C1=$G(^(CHK)) I +CHK=+P1,$D(^TMP($J,"FHDEF",MEAL,+CHK,+C1)) D  Q
"RTN","FHDCR1D",27,0)
 ...S C2=$G(^FHPT(FHDFN,"P",+X7,0)) Q:$P(C2,"^",2)'[MEAL
"RTN","FHDCR1D",28,0)
 ...S P2=+P1,P3=$P(P1,"^",3) S:'$D(N2(P2,P3)) N2(P2,P3)=+$P(P1,"^",2)_"^"_P3 Q
"RTN","FHDCR1D",29,0)
 ..Q
"RTN","FHDCR1D",30,0)
 S LP="" F  S LP=$O(^TMP($J,"DEF",MEAL,PD,LP)) Q:LP=""  I '$D(N2(+LP)) D
"RTN","FHDCR1D",31,0)
 .S TST=$G(^TMP($J,"DEF",MEAL,PD,LP)),CHK="~"_$P(TST,"~",4,$L(TST,"~")) Q:'$F(CHK,"~"_SP_"~")
"RTN","FHDCR1D",32,0)
 .I '$D(FP(+TST)) S N2(+LP,$P(LP,"~",2))=+TST_"^"_$P(LP,"~",2) Q
"RTN","FHDCR1D",33,0)
 .Q:FLG
"RTN","FHDCR1D",34,0)
 .F X6=0:0 S X6=$O(^FHPT(FHDFN,"P","B",X6)) Q:X6<1  F X7=0:0 S X7=$O(^FHPT(FHDFN,"P","B",X6,X7)) Q:X7<1  D
"RTN","FHDCR1D",35,0)
 ..S PS=$P($G(^FH(115.2,+X6,0)),"^",4) I +PS S P4=$G(^FH(114,+PS,0)),P1=$P(P4,"^",7)_"^"_+PS_"^"_$P(P4,"^",1) I +P1,+P1=+LP D
"RTN","FHDCR1D",36,0)
 ...S C2=$G(^FHPT(FHDFN,"P",+X7,0)) Q:$P(C2,"^",2)'[MEAL
"RTN","FHDCR1D",37,0)
 ...S P2=+P1,P3=$P(P1,"^",3) S:'$D(N2(P2,P3)) N2(P2,P3)=+$P(P1,"^",2)_"^"_P3 Q
"RTN","FHDCR1D",38,0)
 ..Q
"RTN","FHDCR1D",39,0)
 S Y0=$P($G(^DPT(DFN,0)),"^",1)_" ("_BID_")"_"  "_SVC,S(NBR)=0,N1=0
"RTN","FHDCR1D",40,0)
 D CUR^FHORD7 S N1=N1+1 I $L(Y)<40 S PP(N1,NBR)=Y
"RTN","FHDCR1D",41,0)
 E  S L=$S($L($P(Y,",",1,3))<40:3,1:2) S PP(N1,NBR)=$P(Y,",",1,L),N1=N1+1,PP(N1,NBR)=$E($P(Y,",",L+1,5),2,99)
"RTN","FHDCR1D",42,0)
 S MM(0,NBR)=Y0_"^"_WRDN_"^"_RM
"RTN","FHDCR1D",43,0)
 I $G(DFN) D ALG^FHCLN S ALG="ALLGS.: "_$S(ALG="":"NONE ON FILE",1:ALG) S J=0 D BRK^FHMTK1B
"RTN","FHDCR1D",44,0)
 S X8="" F  S X8=$O(MP(MEAL,X8)) Q:X8=""  S X1=+MP(MEAL,X8) D
"RTN","FHDCR1D",45,0)
 .S Z1=+$P(X8,"~",2),QTY="" Q:'X1  S QTY=$S(+X1#1>0:$J(+X1,3,1),1:+X1_"  ")_" "
"RTN","FHDCR1D",46,0)
 .S Z1=+$P(X8,"~",2),QTY="" Q:'X1  S PAD=$E("    ",1,5-$L(X1)),QTY=+X1_PAD
"RTN","FHDCR1D",47,0)
 .I $D(N2(Z1)) D  Q
"RTN","FHDCR1D",48,0)
 ..S X7="" F  S X7=$O(N2(Z1,X7)) Q:X7=""  S C1=$P(X8,"~",1,2)_"~"_X7 I '$D(NN(C1)) S NN(C1)=QTY_X7
"RTN","FHDCR1D",49,0)
 ..Q
"RTN","FHDCR1D",50,0)
 .S NN(X8)=QTY_$P(X8,"~",3)
"RTN","FHDCR1D",51,0)
 .Q
"RTN","FHDCR1D",52,0)
 S X8="" F  S X8=$O(NN(X8)) Q:X8=""  D
"RTN","FHDCR1D",53,0)
 .S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$G(NN(X8)) Q
"RTN","FHDCR1D",54,0)
 S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=""
"RTN","FHDCR1D",55,0)
 D SO^FHMTK1B
"RTN","FHDCR1D",56,0)
 S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=""
"RTN","FHDCR1D",57,0)
 D DISL
"RTN","FHDCR1D",58,0)
 Q
"RTN","FHDCR1D",59,0)
 ;
"RTN","FHDCR1D",60,0)
OUT ;process outpatient data
"RTN","FHDCR1D",61,0)
 S (SVC,SF,IS)=""
"RTN","FHDCR1D",62,0)
 Q:'$D(FHKDAT)
"RTN","FHDCR1D",63,0)
 S X1=FHKDAT
"RTN","FHDCR1D",64,0)
 S FHWARD=W1 D LOC^FHDCR11
"RTN","FHDCR1D",65,0)
 S (FHOR,FHORD)=FHDIET,FHD=$P(X1,"^",14)
"RTN","FHDCR1D",66,0)
 I FHPAR'="Y" Q:SVC="C"
"RTN","FHDCR1D",67,0)
 I SVC="C" S:SP'=SP1 SP=SP1 Q:'SP
"RTN","FHDCR1D",68,0)
 Q:'FHORD
"RTN","FHDCR1D",69,0)
 S MEAL=FHMEAL
"RTN","FHDCR1D",70,0)
 I UPD D OLD^FHMTK11 I OLD=FHOR S FLG2=0 D EVT^FHDCR2 Q:'FLG2
"RTN","FHDCR1D",71,0)
 S STR="",FHOR=FHOR_"^^^^"
"RTN","FHDCR1D",72,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHDCR1D",73,0)
 K FP,MP,N2,NN
"RTN","FHDCR1D",74,0)
 S PD=MPD
"RTN","FHDCR1D",75,0)
 I DPAT S PD=$P($G(^FH(111.1,DPAT,0)),"^",7) D
"RTN","FHDCR1D",76,0)
 .F X8=0:0 S X8=$O(^FH(111.1,DPAT,MEAL,X8)) Q:X8<1  S Z1=$G(^(X8,0)) D
"RTN","FHDCR1D",77,0)
 ..S ZZ=$G(^FH(114.1,+Z1,0)),NAM=$P(ZZ,"^",1)
"RTN","FHDCR1D",78,0)
 ..S K4=$P(ZZ,"^",3),K4=$S('K4:99,K4<10:"0"_K4,1:K4)
"RTN","FHDCR1D",79,0)
 ..S MP(MEAL,K4_"~"_+Z1_"~"_NAM)=$P(Z1,"^",2) Q
"RTN","FHDCR1D",80,0)
 Q:PD=""  S PD=$P($G(^FH(116.2,PD,0)),"^",2) Q:PD=""  D CHK^FHMTK1B
"RTN","FHDCR1D",81,0)
 ;
"RTN","FHDCR1D",82,0)
 I NBR=3 D PRT^FHMTK1C K MM,PP,S S NBR=0
"RTN","FHDCR1D",83,0)
 S NBR=NBR+1 D PATNAME^FHOMUTL
"RTN","FHDCR1D",84,0)
 S Y0=FHPTNM_" ("_FHBID_")"_"  "_SVC,S(NBR)=0,N1=0,Y="***"
"RTN","FHDCR1D",85,0)
 S:$G(FHDIET) Y=$P(^FH(111,FHDIET,0),U,7)
"RTN","FHDCR1D",86,0)
 S N1=N1+1 I $L(Y)<40 S PP(N1,NBR)=Y
"RTN","FHDCR1D",87,0)
 E  S L=$S($L($P(Y,",",1,3))<40:3,1:2) S PP(N1,NBR)=$P(Y,",",1,L),N1=N1+1,PP(N1,NBR)=$E($P(Y,",",L+1,5),2,99)
"RTN","FHDCR1D",88,0)
 S MM(0,NBR)=Y0_"^"_WRDN_"^"_RM_"^^^^"_FHMEAL
"RTN","FHDCR1D",89,0)
 I $G(DFN) D ALG^FHCLN S ALG="ALLGS.: "_$S(ALG="":"NONE ON FILE",1:ALG) S J=0 D BRK^FHMTK1B
"RTN","FHDCR1D",90,0)
 ;
"RTN","FHDCR1D",91,0)
 S X8="" F  S X8=$O(MP(MEAL,X8)) Q:X8=""  S X1=+MP(MEAL,X8) D
"RTN","FHDCR1D",92,0)
 .S Z1=+$P(X8,"~",2),QTY="" Q:'X1  S QTY=$S(+X1#1>0:$J(+X1,3,1),1:+X1_"  ")_" "
"RTN","FHDCR1D",93,0)
 .S Z1=+$P(X8,"~",2),QTY="" Q:'X1  S PAD=$E("    ",1,5-$L(X1)),QTY=+X1_PAD
"RTN","FHDCR1D",94,0)
 .I $D(N2(Z1)) D  Q
"RTN","FHDCR1D",95,0)
 ..S X7="" F  S X7=$O(N2(Z1,X7)) Q:X7=""  S C1=$P(X8,"~",1,2)_"~"_X7 I '$D(NN(C1)) S NN(C1)=QTY_X7
"RTN","FHDCR1D",96,0)
 ..Q
"RTN","FHDCR1D",97,0)
 .S NN(X8)=QTY_$P(X8,"~",3)
"RTN","FHDCR1D",98,0)
 .Q
"RTN","FHDCR1D",99,0)
 S X8="" F  S X8=$O(NN(X8)) Q:X8=""  D
"RTN","FHDCR1D",100,0)
 .S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$G(NN(X8)) Q
"RTN","FHDCR1D",101,0)
 S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=""
"RTN","FHDCR1D",102,0)
 D DISL
"RTN","FHDCR1D",103,0)
 Q
"RTN","FHDCR1D",104,0)
 ;
"RTN","FHDCR1D",105,0)
DISL ; Store patient dislikes
"RTN","FHDCR1D",106,0)
 F LL=0:0 S LL=$O(^TMP($J,"X",MEAL,LL)) Q:LL<1  D DL1
"RTN","FHDCR1D",107,0)
 Q
"RTN","FHDCR1D",108,0)
DL1 S X6=$O(^FHPT(FHDFN,"P","B",LL,0)) Q:X6<1
"RTN","FHDCR1D",109,0)
 S X2=$G(^FHPT(FHDFN,"P",X6,0)) Q:$P(X2,"^",2)'[MEAL
"RTN","FHDCR1D",110,0)
 S S(NBR)=S(NBR)+1
"RTN","FHDCR1D",111,0)
 S MM(S(NBR),NBR)="    "_$E($P($G(^FH(115.2,+X2,0)),"^",1),1,25)
"RTN","FHDCR1D",112,0)
 Q
"RTN","FHDCR2")
0^79^B1418501
"RTN","FHDCR2",1,0)
FHDCR2 ; HISC/REL/NCA - Find Order Changes ;4/20/95  11:33
"RTN","FHDCR2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDCR2",3,0)
EVT ; Find order changes,SF,FP,Isolation,SO,Location
"RTN","FHDCR2",4,0)
 ; Except Allergies.
"RTN","FHDCR2",5,0)
 I SF,$P($G(^FHPT(FHDFN,"A",ADM,"SF",+SF,0)),"^",2)>FHD,$P($G(^FHPT(FHDFN,"A",ADM,"SF",+SF,0)),"^",34)'="Y" S FLG2=1 Q
"RTN","FHDCR2",6,0)
 F KK=FHD-.0001:0 S KK=$O(^FH(119.8,"AP",FHDFN,KK)) Q:KK>TIM!(KK<1)  F DA=0:0 S DA=$O(^FH(119.8,"AP",FHDFN,KK,DA)) Q:DA<1  D  Q:FLG2
"RTN","FHDCR2",7,0)
 .S Z=$G(^FH(119.8,DA,0)) Q:Z=""  S D1=$P(Z,"^",2),TYP=$P(Z,"^",5),ACT=$P(Z,"^",6)
"RTN","FHDCR2",8,0)
 .I TYP="L" D  Q
"RTN","FHDCR2",9,0)
 ..I "AT"[ACT S FLG2=1 Q
"RTN","FHDCR2",10,0)
 ..Q
"RTN","FHDCR2",11,0)
 .I TYP="D" Q
"RTN","FHDCR2",12,0)
 .I TYP="M" Q
"RTN","FHDCR2",13,0)
 .I TYP="I" S FLG2=1 Q
"RTN","FHDCR2",14,0)
 .I TYP="T" Q
"RTN","FHDCR2",15,0)
 .I TYP="O" Q
"RTN","FHDCR2",16,0)
 .I TYP="P" S FLG2=1 Q
"RTN","FHDCR2",17,0)
 .I TYP="S" S FLG2=1 Q
"RTN","FHDCR2",18,0)
 .Q
"RTN","FHDCR2",19,0)
 Q
"RTN","FHDEV")
0^80^B1514744
"RTN","FHDEV",1,0)
FHDEV ; HISC/REL - Device Parameters ;7/11/89  22:0 
"RTN","FHDEV",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDEV",3,0)
 S FHIO("P10")=$P($G(^%ZIS(2,IOST(0),5)),"^",1) S:FHIO("P10")="" FHIO("P10")=""""""
"RTN","FHDEV",4,0)
 S FHIO("P16")=$P($G(^%ZIS(2,IOST(0),12.1)),"^",1) S:FHIO("P16")="" FHIO("P16")=""""""
"RTN","FHDEV",5,0)
 S FHIO("RES")=$P($G(^%ZIS(2,IOST(0),6)),"^",1) S:FHIO("RES")="" FHIO("RES")=""""""
"RTN","FHDEV",6,0)
 S FHIO("EON")=$P($G(^%ZIS(2,IOST(0),7)),"^",1) S:FHIO("EON")="" FHIO("EON")=""""""
"RTN","FHDEV",7,0)
 S FHIO("EOF")=$P($G(^%ZIS(2,IOST(0),7)),"^",2) S:FHIO("EOF")="" FHIO("EOF")=""""""
"RTN","FHDEV",8,0)
 S FHIO("DON")=$P($G(^%ZIS(2,IOST(0),408)),"^",1) S:FHIO("DON")="" FHIO("DON")=""""""
"RTN","FHDEV",9,0)
 S FHIO("DOF")=$P($G(^%ZIS(2,IOST(0),409)),"^",1) S:FHIO("DOF")="" FHIO("DOF")=""""""
"RTN","FHDEV",10,0)
 Q
"RTN","FHDMP")
0^81^B21337811
"RTN","FHDMP",1,0)
FHDMP ; HISC/REL/NCA/JH/RK/FAI - Patient Data Log ;10/19/04  13:26
"RTN","FHDMP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDMP",3,0)
BEGIN S ADM="",FHALL=1 D ^FHOMDPA
"RTN","FHDMP",4,0)
 G:'FHDFN CLEAN
"RTN","FHDMP",5,0)
 I $O(^FHPT(FHDFN,"A",0))<1 W !!,"NO ADMISSIONS ON FILE!" G OMDATE
"RTN","FHDMP",6,0)
 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="Q",DA=FHDFN,X="??" D ^DIC
"RTN","FHDMP",7,0)
 S WARD="" I $G(DFN)'="" S WARD=$G(^DPT(DFN,.1))
"RTN","FHDMP",8,0)
 K ADM
"RTN","FHDMP",9,0)
A0 W !!,"Select ADMISSION or RETURN for OUTPATIENT ",$S(WARD'="":" (or C for CURRENT)",1:""),": " R X:DTIME G:X["^" KIL D:X="c" TR^FH
"RTN","FHDMP",10,0)
 I (X="")&'($D(^FHPT(FHDFN,"RM"))!$D(^FHPT(FHDFN,"GM"))!$D(^FHPT(FHDFN,"SM"))) W !!,"NO OUTPATIENT DATA ON FILE!" G FHDMP
"RTN","FHDMP",11,0)
 I (X="")&($D(^FHPT(FHDFN,"RM"))!$D(^FHPT(FHDFN,"GM"))!$D(^FHPT(FHDFN,"SM"))) G OMDATE
"RTN","FHDMP",12,0)
 I WARD'="",X="C" S ADM=$G(^DPT("CN",WARD,DFN)) G CAD:ADM
"RTN","FHDMP",13,0)
 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="EQM" D ^DIC G:Y<1 A0 S ADM=+Y
"RTN","FHDMP",14,0)
CAD I ADM,$G(^FHPT(FHDFN,"A",ADM,0)) S (SDT,STDT)=$P(^FHPT(FHDFN,"A",ADM,0),U,1),ENDT=DT G P0:SDT
"RTN","FHDMP",15,0)
 ;
"RTN","FHDMP",16,0)
OMDATE I '($D(^FHPT(FHDFN,"RM"))!$D(^FHPT(FHDFN,"GM"))!$D(^FHPT(FHDFN,"SM"))) W !!,"NO OUTPATIENT DATA ON FILE!" G FHDMP
"RTN","FHDMP",17,0)
 W !!,"This report will also display any existing outpatient meals data."
"RTN","FHDMP",18,0)
 W !,"Enter the Start Date and End Date for outpatient data.",!
"RTN","FHDMP",19,0)
 D STDATE^FHOMUTL S SDT=STDT I STDT="" Q
"RTN","FHDMP",20,0)
 S X="T+30" D ^%DT S ENDT=Y
"RTN","FHDMP",21,0)
 D DD^%DT S FHDTDF=Y K DIR
"RTN","FHDMP",22,0)
 S DIR("A")="Select End Date: ",DIR("B")=FHDTDF,DIR(0)="DAO^"_STDT
"RTN","FHDMP",23,0)
 D ^DIR
"RTN","FHDMP",24,0)
 Q:$D(DIRUT)  S ENDT=Y S Y=ENDT D DD^%DT W "  ",Y
"RTN","FHDMP",25,0)
 D P0
"RTN","FHDMP",26,0)
 Q
"RTN","FHDMP",27,0)
P0 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHDMP",28,0)
 I $D(IO("Q")) S FHPGM="INOUT^FHDMP",FHLST="FHDFN^DFN^PID^OPSD^STDT^ENDT" D EN2^FH G KIL
"RTN","FHDMP",29,0)
 U IO D INOUT D ^%ZISC K %ZIS,IOP G FHDMP
"RTN","FHDMP",30,0)
 Q
"RTN","FHDMP",31,0)
INOUT D F0
"RTN","FHDMP",32,0)
 Q:QT="^"  I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHDMP",33,0)
 Q:$G(ADM)
"RTN","FHDMP",34,0)
 W:QT'="^" !,LN,!,?15,"*** O U T P A T I E N T   M E A L   D A T A ***"
"RTN","FHDMP",35,0)
 Q:QT="^"  D DISP^FHOMRMD I EX=U Q
"RTN","FHDMP",36,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHDMP",37,0)
 Q:QT="^"  D ^FHDPSM I EX=U Q
"RTN","FHDMP",38,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHDMP",39,0)
 Q:QT="^"  D ^FHDPGM I EX=U Q
"RTN","FHDMP",40,0)
CLEAN G KILL^XUSCLEAN
"RTN","FHDMP",41,0)
F0 D NOW^%DTC S DT=%\1,DTP=% D DTP^FH S NOW=DTP,S1=$S(IOST?1"C".E:IOSL,1:IOSL-6)
"RTN","FHDMP",42,0)
 D PATNAME^FHOMUTL
"RTN","FHDMP",43,0)
 ;S Y(0)=^DPT(DFN,0)
"RTN","FHDMP",44,0)
 S NAM=FHPTNM,SEX=FHSEX,DOB=FHDOB,PID=$G(PID),AGE=FHAGE,PG=0,QT=""
"RTN","FHDMP",45,0)
 S PRTFM=STDT_" TO  "_ENDT
"RTN","FHDMP",46,0)
 S DTP=STDT D DTP^FH S SDT1=DTP
"RTN","FHDMP",47,0)
 S DTP=ENDT D DTP^FH S EDT1=DTP
"RTN","FHDMP",48,0)
 S PRTFM=SDT1_"  TO  "_EDT1
"RTN","FHDMP",49,0)
 S LN="",$P(LN,"-",80)=""
"RTN","FHDMP",50,0)
 D HDR
"RTN","FHDMP",51,0)
 D ALG^FHCLN W !!,"Allergies: " S ALG=$S(ALG="":"None on file",1:ALG) D LNE
"RTN","FHDMP",52,0)
 W !!,"Food Preferences Currently on file:",!!?26,"Likes",?58,"Dislikes",!
"RTN","FHDMP",53,0)
 K N S P1=1 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D SP
"RTN","FHDMP",54,0)
 W ! S (M1,MM)="",L=0 F  S M1=$O(N(M1)) Q:M1=""  I $D(N(M1)) W $P(M1,"~",2) D  S MM=M1
"RTN","FHDMP",55,0)
 .  S (P1,P2)=0 F  S:P1'="" P1=$O(N(M1,"L",P1)) S X1=$S(P1>0:N(M1,"L",P1),1:"") S:P2'="" P2=$O(N(M1,"D",P2)) S X2=$S(P2>0:N(M1,"D",P2),1:"") Q:P1=""&(P2="")  D W0 W:MM'=M1 !
"RTN","FHDMP",56,0)
 .  Q
"RTN","FHDMP",57,0)
 I $O(N(""))="" W !!,"No Food Preferences on file",! D ^FHDMP1 Q
"RTN","FHDMP",58,0)
 W ! K L,N,M,M1,M2 D ^FHDMP1 Q
"RTN","FHDMP",59,0)
W0 I X1'="" W ?12 S X=X1 D W1 S X1=X
"RTN","FHDMP",60,0)
 I X2'="" W ?46 S X=X2 D W1 S X2=X
"RTN","FHDMP",61,0)
 Q:X1=""&(X2="")  S:$Y'<S1 L=1 D:$Y'<S1 HDR G:QT="^" KIL W ! W:L ! S L=0 G W0
"RTN","FHDMP",62,0)
W1 I $L(X)<34 W X S X="" Q
"RTN","FHDMP",63,0)
 F KK=35:-1:1 Q:$E(X,KK-1,KK)=", "
"RTN","FHDMP",64,0)
 W $E(X,1,KK-2) S X=$E(X,KK+1,999) Q
"RTN","FHDMP",65,0)
SP S M=$P(X,"^",2) S:M="A" M="BNE" S Z=$G(^FH(115.2,+X,0)),L1=$P(Z,"^",1),KK=$P(Z,"^",2),M1="",DAS=$P(X,"^",4)
"RTN","FHDMP",66,0)
 I KK="L" S Q=$P(X,"^",3),L1=$S(Q:Q,1:1)_" "_L1
"RTN","FHDMP",67,0)
 I M="BNE" S M1="1~All Meals" G SP1
"RTN","FHDMP",68,0)
 S Z1=$E(M,1) I Z1'="" S M1=$S(Z1="B":"2~Break",Z1="N":"3~Noon",1:"4~Even")
"RTN","FHDMP",69,0)
 S Z1=$E(M,2) I Z1'="" S M1=M1_","_$S(Z1="B":"Break",Z1="N":"Noon",1:"Even")
"RTN","FHDMP",70,0)
SP1 S:'$D(N(M1,KK,P1)) N(M1,KK,P1)="" I $L(N(M1,KK,P1))+$L(L1)<255 S N(M1,KK,P1)=N(M1,KK,P1)_$S(N(M1,KK,P1)="":"",1:", ")_L1_$S(DAS="Y":" (D)",1:"")
"RTN","FHDMP",71,0)
 E  S:'$D(N(M1,KK,K)) N(M1,KK,K)="" S N(M1,KK,K)=L1_$S(DAS="Y":" (D)",1:"") S P1=K
"RTN","FHDMP",72,0)
 Q
"RTN","FHDMP",73,0)
LNE ; Break Line if longer than 65 chars
"RTN","FHDMP",74,0)
 I $L(ALG)<66 W ALG Q
"RTN","FHDMP",75,0)
 F L=67:-1:1 Q:$E(ALG,L-1,L)=", "
"RTN","FHDMP",76,0)
 W $E(ALG,1,L-2)
"RTN","FHDMP",77,0)
 S ALG=$E(ALG,L+1,999)
"RTN","FHDMP",78,0)
 Q:ALG=""  W !?11
"RTN","FHDMP",79,0)
 G LNE
"RTN","FHDMP",80,0)
HDR ; Print Header
"RTN","FHDMP",81,0)
 S (EX,QT)="" I PG,IOST?1"C".E W:$X>1 ! W *7 R QT:DTIME S:'$T QT="^" Q:QT="^"
"RTN","FHDMP",82,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHDMP",83,0)
 W !,?15,"P  A  T  I  E  N  T     D  A  T  A     L  O  G",!
"RTN","FHDMP",84,0)
 W !,"Date Range:  ",PRTFM,?62,NOW,!!,PID,?17,NAM,?49,$S(SEX="M":"Male",SEX="F":"Female",1:""),?58,"Age ",AGE,?72,"Page ",PG Q
"RTN","FHDMP",85,0)
DTP ; Printable Date/Time
"RTN","FHDMP",86,0)
 Q:Y<1  W $J(+$E(Y,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(Y,4,5))_"-"_$E(Y,2,3)
"RTN","FHDMP",87,0)
 I Y["." S %=+$E(Y_"0",9,10) W $J($S(%>12:%-12,1:%),3)_":"_$E(Y_"000",11,12)_$S(%<12:"am",%<24:"pm",1:"m")
"RTN","FHDMP",88,0)
 K % Q
"RTN","FHDMP",89,0)
KIL ; User exit
"RTN","FHDMP",90,0)
 Q
"RTN","FHDMP1")
0^82^B4600552
"RTN","FHDMP1",1,0)
FHDMP1 ; HISC/REL/FAI - Patient Data Log (cont) ;10/19/04  14:37 
"RTN","FHDMP1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDMP1",3,0)
 I IEN200'="",DFN="" Q
"RTN","FHDMP1",4,0)
 Q:$G(ADM)=""
"RTN","FHDMP1",5,0)
 D:$Y>(S1-3) HDR^FHDMP G:QT="^" KIL^FHDMP
"RTN","FHDMP1",6,0)
 I $Y>(S1-9) D HDR^FHDMP G:QT="^" KIL^FHDMP
"RTN","FHDMP1",7,0)
ADMIT ;
"RTN","FHDMP1",8,0)
 S ISO=$P($G(^FHPT(FHDFN,"A",ADM,0)),U,10)
"RTN","FHDMP1",9,0)
 D:$Y>(S1-3) HDR^FHDMP G:QT="^" KIL^FHDMP
"RTN","FHDMP1",10,0)
 W !,LN,!?20,"~ ~ ~   A D M I S S I O N   D A T A  ~ ~ ~"
"RTN","FHDMP1",11,0)
 S Y=$P($G(^DGPM(ADM,0)),"^",1) W !!,"Admitted: " D DTP
"RTN","FHDMP1",12,0)
 S Y=$P($G(^DGPM(ADM,0)),"^",17) S:Y>0 Y=$P($G(^DGPM(+Y,0)),"^",1) W ?50,"Discharged: " D DTP
"RTN","FHDMP1",13,0)
 S X=$G(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHDMP1",14,0)
 S Y=$P(X,"^",8) I Y W !!,"Nutrition Ward: ",$P($G(^FH(119.6,Y,0)),"^",1) S Y=$P(X,"^",9) W ?50,"Room-Bed: " I Y W $P($G(^DG(405.4,Y,0)),"^",1)
"RTN","FHDMP1",15,0)
 W !!,"Current Diet Order: ",?20,$P(X,"^",2) S Y=$P(X,"^",3) W ?50,"Expires: ",?62 D DTP
"RTN","FHDMP1",16,0)
 S Y=$P(X,"^",5) W !,"Current Service: ",?20,$S(Y="T":"Tray",Y="C":"Cafeteria",Y="D":"Dining Room",1:"")
"RTN","FHDMP1",17,0)
 S Y=$P(X,"^",10) W !,"Current Isolation/Precaution: ",?20,$P($G(^FH(119.4,+Y,0)),"^",1)
"RTN","FHDMP1",18,0)
 W ?50,"Current Tubefeed Order: ",?76,$P(X,"^",4)
"RTN","FHDMP1",19,0)
 S Y=$P(X,"^",11) W !,"Last Label Ward: ",?20,$P($G(^FH(119.6,+Y,0)),"^",1)
"RTN","FHDMP1",20,0)
 W ?50,"Current Supp. Fdg. Order: ",?76,$P(X,"^",7)
"RTN","FHDMP1",21,0)
 W !,"Last Label Room: ",?20,$P(X,"^",12),!
"RTN","FHDMP1",22,0)
 G ^FHDMP2
"RTN","FHDMP1",23,0)
DTP ; Printable Date/Time
"RTN","FHDMP1",24,0)
 Q:Y<1  W $J(+$E(Y,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(Y,4,5))_"-"_$E(Y,2,3)
"RTN","FHDMP1",25,0)
 I Y["." S %=+$E(Y_"0",9,10) W $J($S(%>12:%-12,1:%),3)_":"_$E(Y_"000",11,12)_$S(%<12:"am",%<24:"pm",1:"m")
"RTN","FHDMP1",26,0)
 K % Q
"RTN","FHDMP2")
0^83^B7783846
"RTN","FHDMP2",1,0)
FHDMP2 ; HISC/REL/NCA/FAI - Patient Data Log (cont) ;10/19/04  14:38
"RTN","FHDMP2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDMP2",3,0)
 S LST=1 D:$Y>(S1-4) HDR^FHDMP G:QT="^" KIL^FHDMP W !,LN,!?29,"D I E T   O R D E R S"
"RTN","FHDMP2",4,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI")) W !!,"No Diet Orders for this Admission",! G ^FHDMP3
"RTN","FHDMP2",5,0)
 I SDT F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"DI",K)) Q:K<1  S D1=$P(^(K,0),"^",9) Q:D1=""!(D1'<SDT)  S LST=K
"RTN","FHDMP2",6,0)
 F FHORD=LST-1:0 S FHORD=$O(^FHPT(FHDFN,"A",ADM,"DI",FHORD)) Q:FHORD<1  I $D(^(FHORD,0)) S X=^(0) D:$Y>(S1-6) HDR^FHDMP G:QT="^" KIL^FHDMP D LIS
"RTN","FHDMP2",7,0)
 W !
"RTN","FHDMP2",8,0)
 S LST=1 D:$Y>(S1-3) HDR^FHDMP G:QT="^" KIL^FHDMP W !,LN,!?21,"D I E T   O R D E R   S E Q U E N C E",!
"RTN","FHDMP2",9,0)
 I SDT F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K=""!(K'<SDT)  S LST=K
"RTN","FHDMP2",10,0)
 S CT=0 F KK=LST-.0001:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1  S FHORD=$P(^(KK,0),"^",2) D:$Y>(S1-2) HDR^FHDMP G:QT="^" KIL^FHDMP D T1
"RTN","FHDMP2",11,0)
 I 'CT W !!,"No Diet Order Sequence for this Admission",!
"RTN","FHDMP2",12,0)
 W ! G ^FHDMP3
"RTN","FHDMP2",13,0)
LIS S COM=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1))
"RTN","FHDMP2",14,0)
 S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHDMP2",15,0)
 W !!,"Order: ",?12,FHORD S Y=$P(X,"^",9) W ?18,"Effective: " D DTP S Y=$P(X,"^",10) W ?53,"Expires: " D DTP
"RTN","FHDMP2",16,0)
 S Y=$P(X,"^",11) W !,"Ordered by: ",?12,$P($G(^VA(200,+Y,0)),"^",1) S Y=$P(X,"^",12) W ?53,"Ordered: " D DTP
"RTN","FHDMP2",17,0)
 D ORD W !,"Diet: ",?12 I $L(Y)<66 W Y
"RTN","FHDMP2",18,0)
 E  W $P(Y,",",1,3),!?11,$P(Y,",",4,5)
"RTN","FHDMP2",19,0)
 W:COM'="" !,"Comment: ",COM
"RTN","FHDMP2",20,0)
 S Y=$P(X,"^",13) W !,"Prod. Diet: ",?12,$P($G(^FH(116.2,+Y,0)),"^",1)
"RTN","FHDMP2",21,0)
 S Y=$P(X,"^",8) W ?53,"Service: ",$S(Y="T":"Tray",Y="C":"Cafeteria",Y="D":"Dining Room",1:"")
"RTN","FHDMP2",22,0)
 I FHLD'="" S Y=$P(X,"^",19) I Y W !,"Canc. By: ",?12,$P($G(^VA(200,+Y,0)),"^",1) S Y=$P(X,"^",18) W:Y'="" ?53,"Canc.  : " D DTP
"RTN","FHDMP2",23,0)
 Q
"RTN","FHDMP2",24,0)
ORD S Y="" I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHDMP2",25,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHDMP2",26,0)
 Q
"RTN","FHDMP2",27,0)
T1 S CT=CT+1,Y=KK W ! D DTP W ?25,"Order: ",FHORD Q
"RTN","FHDMP2",28,0)
DTP ; Printable Date/Time
"RTN","FHDMP2",29,0)
 Q:Y<1  W $J(+$E(Y,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(Y,4,5))_"-"_$E(Y,2,3)
"RTN","FHDMP2",30,0)
 I Y["." S %=+$E(Y_"0",9,10) W $J($S(%>12:%-12,1:%),3)_":"_$E(Y_"000",11,12)_$S(%<12:"am",%<24:"pm",1:"m")
"RTN","FHDMP2",31,0)
 K % Q
"RTN","FHDMP3")
0^84^B5833131
"RTN","FHDMP3",1,0)
FHDMP3 ; HISC/REL/NCA - Patient Data Log (cont) ;4/30/92  10:15 
"RTN","FHDMP3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDMP3",3,0)
 D:$Y>(S1-4) HDR^FHDMP G:QT="^" KIL^FHDMP W !,LN,!?19,"S U P P L E M E N T A L   F E E D I N G S" S LST=1
"RTN","FHDMP3",4,0)
 I SDT F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"SF",KK)) Q:KK<1  S D1=$P(^(KK,0),"^",2) Q:D1=""!(D1'<SDT)  S LST=KK
"RTN","FHDMP3",5,0)
 S CT=0 F NO=LST-1:0 S NO=$O(^FHPT(FHDFN,"A",ADM,"SF",NO)) Q:NO<1  I $D(^(NO,0)) S X=^(0) D:$Y>(S1-10) HDR^FHDMP G:QT="^" KIL^FHDMP D LIS
"RTN","FHDMP3",6,0)
 I 'CT W !!,"No Supplemental Feedings for this Admission"
"RTN","FHDMP3",7,0)
 W ! G ^FHDMP4
"RTN","FHDMP3",8,0)
LIS S CT=CT+1 W !!,"Order: ",?11,NO S Y=$P(X,"^",4) W ?40,"Menu: ",$P($G(^FH(118.1,+Y,0)),"^",1)
"RTN","FHDMP3",9,0)
 S Y=$P(X,"^",2) W !,"Ordered:   " D DTP S Y=$P(X,"^",3) W ?40,"By:   ",$P($G(^VA(200,+Y,0)),"^",1)
"RTN","FHDMP3",10,0)
 S Y=$P(X,"^",30) W !,"Reviewed:  " D DTP S Y=$P(X,"^",31) W ?40,"By:   ",$P($G(^VA(200,+Y,0)),"^",1)
"RTN","FHDMP3",11,0)
 S Y=$P(X,"^",32) W !,"Cancelled: " D DTP S Y=$P(X,"^",33) W ?40,"By:   ",$P($G(^VA(200,+Y,0)),"^",1)
"RTN","FHDMP3",12,0)
 S Y=$P(X,"^",29) W !,"Type: ",?11,$S(Y="D":"Dietary",Y="T":"Therapeutic",1:"") S Y=$P(X,"^",34) W ?40,"Diet Associated: ",$S(Y="Y":"Yes",1:"No")
"RTN","FHDMP3",13,0)
 K N S L=4 F K1=1:1:3 S K=0,N(K1)="" F K2=1:1:4 S Z=$P(X,"^",L+1),Q=$P(X,"^",L+2),L=L+2 I Z'="" S:'Q Q=1 S:N(K1)'="" N(K1)=N(K1)_"; " S N(K1)=N(K1)_Q_" "_$P($G(^FH(118,Z,0)),"^",1)
"RTN","FHDMP3",14,0)
 F K1=1:1:3 I N(K1)'="" W !,$P("10 Am; 2 Pm; 8 Pm",";",K1),?8,$E(N(K1),1,52)
"RTN","FHDMP3",15,0)
 Q
"RTN","FHDMP3",16,0)
DTP ; Printable Date/Time
"RTN","FHDMP3",17,0)
 Q:Y<1  W $J(+$E(Y,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(Y,4,5))_"-"_$E(Y,2,3)
"RTN","FHDMP3",18,0)
 I Y["." S %=+$E(Y_"0",9,10) W $J($S(%>12:%-12,1:%),3)_":"_$E(Y_"000",11,12)_$S(%<12:"am",%<24:"pm",1:"m")
"RTN","FHDMP3",19,0)
 K % Q
"RTN","FHDMP4")
0^85^B11249036
"RTN","FHDMP4",1,0)
FHDMP4 ; HISC/REL/NCA - Patient Data Log (cont) ;5/7/92  15:36 
"RTN","FHDMP4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDMP4",3,0)
 S LST=1 D:$Y>(S1-4) HDR^FHDMP G:QT="^" KIL^FHDMP W !,LN,!?28,"T U B E F E E D I N G S"
"RTN","FHDMP4",4,0)
 I SDT F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"TF",K)) Q:K<1  S D1=$P(^(K,0),"^",1) Q:D1=""!(D1'<SDT)  S LST=K
"RTN","FHDMP4",5,0)
 S CT=0 F TF=LST-1:0 S TF=$O(^FHPT(FHDFN,"A",ADM,"TF",TF)) Q:TF<1  I $D(^(TF,0)) S X=^(0) D TF G:QT="^" KIL^FHDMP
"RTN","FHDMP4",6,0)
 I 'CT W !!,"No Tubefeedings ordered for this Admission"
"RTN","FHDMP4",7,0)
 W !
"RTN","FHDMP4",8,0)
 D:$Y>(S1-4) HDR^FHDMP G:QT="^" KIL^FHDMP W !,LN,!?23,"D I E T E T I C   C O N S U L T S"
"RTN","FHDMP4",9,0)
 S CT=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"DR",K)) Q:K<1  I $D(^(K,0)) S X=^(0) I $P(X,"^",1)'<SDT S CT=CT+1 D:$Y>(S1-6) HDR^FHDMP G:QT="^" KIL^FHDMP D CD
"RTN","FHDMP4",10,0)
 I 'CT W !!,"No Consultations ordered for this Admission"
"RTN","FHDMP4",11,0)
 W !
"RTN","FHDMP4",12,0)
 D:$Y>(S1-4) HDR^FHDMP G:QT="^" KIL^FHDMP W !,LN,!?24,"E A R L Y / L A T E   T R A Y S"
"RTN","FHDMP4",13,0)
 S CT=0 F K=SDT:0 S K=$O(^FHPT(FHDFN,"A",ADM,"EL",K)) Q:K<1  S X=^(K,0),CT=CT+1 D:$Y>(S1-4) HDR^FHDMP G:QT="^" KIL^FHDMP D EL
"RTN","FHDMP4",14,0)
 I 'CT W !!,"No Early or Late Trays ordered for this Admission"
"RTN","FHDMP4",15,0)
 W ! G ^FHDMP5
"RTN","FHDMP4",16,0)
TF W !!,"Order # ",TF S CT=CT+1
"RTN","FHDMP4",17,0)
 F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S X1=^(TF2,0) D:$Y>(S1-8) HDR^FHDMP Q:QT="^"  D TF1
"RTN","FHDMP4",18,0)
 Q:QT="^"  W !,"Daily CC's:   ",$P(X,"^",3),?42,"Daily KCals: ",$P(X,"^",7)
"RTN","FHDMP4",19,0)
 S Y=$P(X,"^",5) W:Y'="" !,"Comment:      ",Y
"RTN","FHDMP4",20,0)
 S Y=$P(X,"^",1) W !,"Ordered:      " D DTP S Y=$P(X,"^",10) W ?42,"By: ",$P($G(^VA(200,+Y,0)),"^",1)
"RTN","FHDMP4",21,0)
 S Y=$P(X,"^",11) W !,"Cancelled:    " D DTP S Y=$P(X,"^",12) W ?42,"By: ",$P($G(^VA(200,+Y,0)),"^",1) Q
"RTN","FHDMP4",22,0)
TF1 S Y=$P(X1,"^",1) W !,"Product: ",$P($G(^FH(118.2,+Y,0)),"^",1),", "
"RTN","FHDMP4",23,0)
 S Y=$P(X1,"^",2) W $S(Y=4:"Full",Y=1:"1/4",Y=2:"1/2",1:"3/4")," Str., ",$P(X1,"^",3)
"RTN","FHDMP4",24,0)
 W !,"Product CC's: ",$P(X1,"^",4),?42,"Water CC's:  ",$P(X1,"^",5) Q
"RTN","FHDMP4",25,0)
CD S Y=$P(X,"^",2) W !!,"Request:   ",$P($G(^FH(119.5,+Y,0)),"^",1)
"RTN","FHDMP4",26,0)
 S Y=$P(X,"^",8) W ?62,"Status: ",$S(Y="A":"Active",Y="C":"Complete",Y="X":"Cancelled",1:"")
"RTN","FHDMP4",27,0)
 S Y=$P(X,"^",3) I Y'="" W !,"Comment:   ",Y
"RTN","FHDMP4",28,0)
 S Y=$P(X,"^",5) W !,"Clinician: ",$P($G(^VA(200,+Y,0)),"^",1)
"RTN","FHDMP4",29,0)
 S Y=$P(X,"^",11) W ?62,"Type:   ",$S(Y="I":"Initial",Y="F":"Follow-up",1:"")
"RTN","FHDMP4",30,0)
 S Y=$P(X,"^",1) W !,"Ordered:   " D DTP S Y=$P(X,"^",7) W ?45,"By: ",$P($G(^VA(200,+Y,0)),"^",1)
"RTN","FHDMP4",31,0)
 S Y=$P(X,"^",9) W !,"Cleared:   " D DTP S Y=$P(X,"^",10) W ?45,"By: ",$P($G(^VA(200,+Y,0)),"^",1) Q
"RTN","FHDMP4",32,0)
EL S Y=$P(X,"^",1) W !!,"Order:   " D DTP S Y=$P(X,"^",2) W ?28,"Meal: ",$S(Y="B":"Breakfast",Y="N":"Noon",Y="E":"Evening",1:"")
"RTN","FHDMP4",33,0)
 S Y=$P(X,"^",4) W ?47,"Bagged: ",$S(Y="Y":"Yes",Y="N":"No",1:"") W ?62,"Time: ",$P(X,"^",3)
"RTN","FHDMP4",34,0)
 S Y=$P(X,"^",6) W !,"Ordered: " D DTP S Y=$P(X,"^",5) W ?28,"By:   ",$P($G(^VA(200,+Y,0)),"^",1) Q
"RTN","FHDMP4",35,0)
DTP ; Printable Date/Time
"RTN","FHDMP4",36,0)
 Q:Y<1  W $J(+$E(Y,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(Y,4,5))_"-"_$E(Y,2,3)
"RTN","FHDMP4",37,0)
 I Y["." S %=+$E(Y_"0",9,10) W $J($S(%>12:%-12,1:%),3)_":"_$E(Y_"000",11,12)_$S(%<12:"am",%<24:"pm",1:"m")
"RTN","FHDMP4",38,0)
 K % Q
"RTN","FHDMP5")
0^86^B6806997
"RTN","FHDMP5",1,0)
FHDMP5 ; HISC/REL/NCA - Patient Data Log (cont) ;2/17/93  16:23 
"RTN","FHDMP5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDMP5",3,0)
 D:$Y>(S1-4) HDR^FHDMP G:QT="^" KIL^FHDMP W !,LN,!?25,"S T A N D I N G   O R D E R S"
"RTN","FHDMP5",4,0)
 S CT=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"SP",K)) Q:K<1  I $D(^(K,0)) S X=^(0) I $P(X,"^",4)'<SDT D:$Y>(S1-6) HDR^FHDMP G:QT="^" KIL^FHDMP D SP
"RTN","FHDMP5",5,0)
 I 'CT W !!,"No Standing Orders for this Admission"
"RTN","FHDMP5",6,0)
 W !
"RTN","FHDMP5",7,0)
 D:$Y>(S1-4) HDR^FHDMP G:QT="^" KIL^FHDMP W !,LN,!?23,"A D D I T I O N A L   O R D E R S"
"RTN","FHDMP5",8,0)
 S CT=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"OO",K)) Q:K<1  I $D(^(K,0)) S X=^(0) I $P(X,"^",2)'<SDT D:$Y>(S1-6) HDR^FHDMP G:QT="^" KIL^FHDMP D L1
"RTN","FHDMP5",9,0)
 I 'CT W !!,"No Additional Orders for this Admission"
"RTN","FHDMP5",10,0)
 W ! Q
"RTN","FHDMP5",11,0)
SP S CT=CT+1 W !!,"Order #:   ",K
"RTN","FHDMP5",12,0)
 S M1=$P(X,"^",3) I M1="BNE" S M2="All Meals" G S1
"RTN","FHDMP5",13,0)
 S L=$E(M1,1),M2=$S(L="B":"Break",L="N":"Noon",1:"Even")
"RTN","FHDMP5",14,0)
 S L=$E(M1,2) I L'="" S M2=M2_","_$S(L="B":"Break",L="N":"Noon",1:"Even")
"RTN","FHDMP5",15,0)
S1 W ?40,"Meals: ",M2
"RTN","FHDMP5",16,0)
 S Y=$P(X,"^",2),Q=$P(X,"^",8) W !,"Order:     ",$S(Q:Q,1:1)," ",$P($G(^FH(118.3,+Y,0)),"^",1)
"RTN","FHDMP5",17,0)
 S Y=$P(X,"^",4) W !,"Ordered:   " D DTP S Y=$P(X,"^",5) W ?40,"By:    ",$P($G(^VA(200,+Y,0)),"^",1)
"RTN","FHDMP5",18,0)
 S Y=$P(X,"^",6) W !,"Cancelled: " D DTP S Y=$P(X,"^",7) W ?40,"By:    ",$P($G(^VA(200,+Y,0)),"^",1)
"RTN","FHDMP5",19,0)
 S Y=$P(X,"^",9) W !,"Diet Associated: ",$S(Y="Y":"Yes",1:"No") Q
"RTN","FHDMP5",20,0)
L1 S CT=CT+1 W !!,"Order #:   ",K S Y=$P(X,"^",5) W ?40,"Status: ",$S(Y="C":"Complete",Y="A":"Active",Y="S":"Saved",Y="X":"Cancelled",1:"")
"RTN","FHDMP5",21,0)
 W !,"Order:     ",$P(X,"^",3)
"RTN","FHDMP5",22,0)
 S Y=$P(X,"^",2) W !,"Ordered:   " D DTP S Y=$P(X,"^",4) W ?40,"By:     ",$P($G(^VA(200,+Y,0)),"^",1)
"RTN","FHDMP5",23,0)
 S Y=$P(X,"^",6) W !,"Cleared:   " D DTP S Y=$P(X,"^",7) W ?40,"By:     ",$P($G(^VA(200,+Y,0)),"^",1) Q
"RTN","FHDMP5",24,0)
DTP ; Printable Date/Time
"RTN","FHDMP5",25,0)
 Q:Y<1  W $J(+$E(Y,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(Y,4,5))_"-"_$E(Y,2,3)
"RTN","FHDMP5",26,0)
 I Y["." S %=+$E(Y_"0",9,10) W $J($S(%>12:%-12,1:%),3)_":"_$E(Y_"000",11,12)_$S(%<12:"am",%<24:"pm",1:"m")
"RTN","FHDMP5",27,0)
 K % Q
"RTN","FHDPA")
0^87^B2632448
"RTN","FHDPA",1,0)
FHDPA ; HISC/REL - Patient Look-Up ;2/1/95  09:46 ;
"RTN","FHDPA",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005;
"RTN","FHDPA",3,0)
 ; ALL=0 - only inpatients
"RTN","FHDPA",4,0)
F1 R !!,"Select Patient (Name or SSN): ",X:DTIME G NOP:'$T!(U[X)!(X="*")
"RTN","FHDPA",5,0)
 K DIC S DIC="^DPT(",DIC(0)="EQZM" S:'ALL DIC("S")="I $D(^DPT(Y,.1))" D ^DIC K DIC G NOP:U[X,F1:X["?" I Y<1 W !,$S('ALL:"Inp",1:"P"),"atient Not Selected" G F1
"RTN","FHDPA",6,0)
ENOM ;OUTPATIENT MEALS (^FHOMDPA) ENTRY POINT
"RTN","FHDPA",7,0)
 S (DA,DFN)=+Y,FHWF=$S($D(^ORD(101)):1,1:0),FHPV=DUZ
"RTN","FHDPA",8,0)
 S FHZ115="P"_DFN D ADD^FHOMDPA I FHDFN="" Q
"RTN","FHDPA",9,0)
F2 S WARD=$G(^DPT(DFN,.1)) D PID
"RTN","FHDPA",10,0)
 I WARD="" Q:ALL  W *7,!!,"NOT CURRENTLY AN INPATIENT!",! G NOP
"RTN","FHDPA",11,0)
 S ADM=$G(^DPT("CN",WARD,DFN)) G:ADM<1 NOP
"RTN","FHDPA",12,0)
 Q:$D(^FHPT(FHDFN,"A",ADM,0))  G:'$D(^DGPM(ADM,0)) NOP
"RTN","FHDPA",13,0)
 D ^FHWADM S FHPV=DUZ Q
"RTN","FHDPA",14,0)
NOP S (DFN,DFNF2,FHDFN)=0,Y=-1 Q
"RTN","FHDPA",15,0)
PID ; Get patient variables
"RTN","FHDPA",16,0)
 D PID^VADPT6 S PID=$G(VA("PID")),BID=$G(VA("BID")) K VA Q
"RTN","FHDPA",17,0)
DID ; Get dietetic ward
"RTN","FHDPA",18,0)
 S (FHWRD,FHRMB)="" S WARD=$G(^DPT(DFN,.1)) Q:WARD=""  S FHRMB=$G(^DPT(DFN,.108))
"RTN","FHDPA",19,0)
 I FHRMB S FHWRD=$O(^FH(119.6,"AR",+FHRMB,0)) Q:FHWRD
"RTN","FHDPA",20,0)
 N W1 S W1=$O(^DIC(42,"B",WARD,0)) Q:W1=""  S FHWRD=$O(^FH(119.6,"AW",W1,0)) Q
"RTN","FHDPGM")
0^349^B2646216
"RTN","FHDPGM",1,0)
FHDPGM ;Hines OIFO/RTK/FAI PRINT GUEST MEALS LIST  ;10/20/04  15:15
"RTN","FHDPGM",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDPGM",3,0)
 ;
"RTN","FHDPGM",4,0)
EN S FHSORT="A"
"RTN","FHDPGM",5,0)
LIST ;
"RTN","FHDPGM",6,0)
 S EX="",NUM=0 D HDR
"RTN","FHDPGM",7,0)
 F FHGMDT=STDT:0 S FHGMDT=$O(^FHPT(FHDFN,"GM",FHGMDT)) Q:FHGMDT'>0!(FHGMDT<STDT)!(FHGMDT>ENDT)!(EX=U)  D
"RTN","FHDPGM",8,0)
 .S NUM=NUM+1,FHNODE=$G(^FHPT(FHDFN,"GM",FHGMDT,0))
"RTN","FHDPGM",9,0)
 .S FHCL=$P(FHNODE,U,2),FHML=$P(FHNODE,U,3),FHCH=$P(FHNODE,U,4)
"RTN","FHDPGM",10,0)
 .S FHLPT=$P($G(FHNODE),U,5)
"RTN","FHDPGM",11,0)
 .S:FHLPT'="" FHLOC=$E($P($G(^FH(119.6,FHLPT,0)),U,1),1,10)
"RTN","FHDPGM",12,0)
 .S FHCL=$S(FHCL="E":" EMPLOYEE",FHCL="G":"GRATUITOUS",FHCL="O":"   OOD",FHCL="P":"   PAID",1:"VOLUNTEER")
"RTN","FHDPGM",13,0)
 .D PATNAME^FHOMUTL
"RTN","FHDPGM",14,0)
 .S FHD=$$FMTE^XLFDT(FHGMDT,"P") W !,?2,$E(FHD,1,12)
"RTN","FHDPGM",15,0)
 .W ?16,$G(FHLOC),?30,FHML,?36,FHCL,?50,FHCH
"RTN","FHDPGM",16,0)
 .I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHDPGM",17,0)
 .Q
"RTN","FHDPGM",18,0)
 I NUM=0 W !!,"NO GUEST MEALS FOR THIS DATE RANGE" Q
"RTN","FHDPGM",19,0)
 Q
"RTN","FHDPGM",20,0)
END ;
"RTN","FHDPGM",21,0)
 K FHGMDT,FHML,FHCL,FHCH
"RTN","FHDPGM",22,0)
 Q
"RTN","FHDPGM",23,0)
PG ;
"RTN","FHDPGM",24,0)
 Q:$O(^FHPT(FHDFN,"GM",FHGMDT))'>0
"RTN","FHDPGM",25,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHDPGM",26,0)
 D HDR Q
"RTN","FHDPGM",27,0)
HDR ;
"RTN","FHDPGM",28,0)
 W:$Y @IOF
"RTN","FHDPGM",29,0)
 W !?15,"G U E S T   M E A L S"
"RTN","FHDPGM",30,0)
 W !!?2,"Date",?16,"Location",?30,"Meal"
"RTN","FHDPGM",31,0)
 W ?36,"Class",?50,"Charge"
"RTN","FHDPGM",32,0)
 W !?2,"============",?16,"=========="
"RTN","FHDPGM",33,0)
 W ?30,"====",?36,"=========",?50,"======"
"RTN","FHDPGM",34,0)
 Q
"RTN","FHDPSM")
0^350^B4611317
"RTN","FHDPSM",1,0)
FHDPSM ;Hines OIFO/RTK/FAI SPECIAL MEALS DISPLAY  ;10/20/04  14:22
"RTN","FHDPSM",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHDPSM",3,0)
 ;
"RTN","FHDPSM",4,0)
LIST ;
"RTN","FHDPSM",5,0)
 K FHLIST S FHS="ACDP",NUM=0,EX="" D HDR
"RTN","FHDPSM",6,0)
 F FHSMDT=STDT:0 S FHSMDT=$O(^FHPT(FHDFN,"SM",FHSMDT)) Q:FHSMDT'>0!(FHSMDT<STDT)!(FHSMDT>ENDT)!(EX=U)  D
"RTN","FHDPSM",7,0)
 .S FHNODE=$G(^FHPT(FHDFN,"SM",FHSMDT,0)),FHSTAT=$P(FHNODE,U,2)
"RTN","FHDPSM",8,0)
 .I FHS'[FHSTAT Q
"RTN","FHDPSM",9,0)
 .S FHSTAT=$S(FHSTAT="P":"PENDING",FHSTAT="A":"AUTHORIZED",FHSTAT="D":"DENIED",1:"CANCELLED")
"RTN","FHDPSM",10,0)
 .S NUM=NUM+1,PAD=$S($L(NUM)=1:" ",1:"") W !,PAD,NUM
"RTN","FHDPSM",11,0)
 .D PATNAME^FHOMUTL
"RTN","FHDPSM",12,0)
 .S FHD=$$FMTE^XLFDT(FHSMDT,"P") W ?8,$E(FHD,1,12)
"RTN","FHDPSM",13,0)
 .S FHLPT=$P($G(FHNODE),U,3),FHLOC=$E($P($G(^FH(119.6,FHLPT,0)),U,1),1,10)
"RTN","FHDPSM",14,0)
 .W ?26,FHLOC
"RTN","FHDPSM",15,0)
 .S FHDPT=$P(FHNODE,U,4),FHDIET=$E($P($G(^FH(111,FHDPT,0)),U,1),1,12)
"RTN","FHDPSM",16,0)
 .W ?40,FHDIET
"RTN","FHDPSM",17,0)
 .S FHMEAL=$P(FHNODE,U,9) W ?57,FHMEAL,?65,FHSTAT
"RTN","FHDPSM",18,0)
 .S FHLIST(NUM)=FHDFN_"^"_FHSMDT
"RTN","FHDPSM",19,0)
 .I $E(FHSTAT,1)="D" D
"RTN","FHDPSM",20,0)
 ..S FHDENY=$P(FHNODE,U,6)
"RTN","FHDPSM",21,0)
 ..I FHDENY'="" W !,?6,"Denied By: ",$P($G(^VA(200,FHDENY,0)),U,1)
"RTN","FHDPSM",22,0)
 .S FHCOMM=$P(FHNODE,U,8) I FHCOMM'="" W !?6,"Comment: ",FHCOMM
"RTN","FHDPSM",23,0)
 .I $D(^FHPT(FHDFN,"SM",FHSMDT,1)) D
"RTN","FHDPSM",24,0)
 ..S FHEL=$G(^FHPT(FHDFN,"SM",FHSMDT,1))
"RTN","FHDPSM",25,0)
 ..W !?6,"Early/Late Tray Time: ",$P(FHEL,U,1)
"RTN","FHDPSM",26,0)
 ..W "  Bagged Meal: ",$P(FHEL,U,2)
"RTN","FHDPSM",27,0)
 ..Q
"RTN","FHDPSM",28,0)
 .I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHDPSM",29,0)
 .Q
"RTN","FHDPSM",30,0)
 I NUM=0 W !!,"NO SPECIAL MEALS FOR THIS DATE RANGE" Q
"RTN","FHDPSM",31,0)
 Q
"RTN","FHDPSM",32,0)
PG ;
"RTN","FHDPSM",33,0)
 Q:$O(^FHPT(FHDFN,"SM",FHSMDT))'>0
"RTN","FHDPSM",34,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHDPSM",35,0)
 D HDR Q
"RTN","FHDPSM",36,0)
HDR ;
"RTN","FHDPSM",37,0)
 W:$Y @IOF
"RTN","FHDPSM",38,0)
 W !?15,"S P E C I A L    M E A L S "
"RTN","FHDPSM",39,0)
 W !!!?1,"#",?8,"Date/Time",?26,"Location",?40,"Diet Ordered",?57,"Meal",?65,"Status"
"RTN","FHDPSM",40,0)
 W !,"===",?7,"============",?25,"==========",?39,"============",?56,"====",?65,"========="
"RTN","FHDPSM",41,0)
 Q
"RTN","FHDPSM",42,0)
END ;
"RTN","FHDPSM",43,0)
 K EX,FHNODE,FHSTAT Q
"RTN","FHENV")
0^88^B98531
"RTN","FHENV",1,0)
FHENV ; HISC/NCA - Environment Check Routine For Patch 21
"RTN","FHENV",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHENV",3,0)
 I +$$VERSION^XPDUTL("OR")=2.5 D RTN
"RTN","FHENV",4,0)
 Q
"RTN","FHENV",5,0)
RTN Q:'$$RTNUP^XPDUTL("FHORD7",2)
"RTN","FHENV",6,0)
 Q
"RTN","FHIPST6")
0^347^B827521
"RTN","FHIPST6",1,0)
FHIPST6 ; HISC/REL - Set up Recipe Analysis values ;5/4/93  14:19
"RTN","FHIPST6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHIPST6",3,0)
 F REC=0:0 S REC=$O(^FH(114,REC)) Q:REC<1  F KK=0:0 S KK=$O(^FH(114,REC,"I",KK)) Q:KK<1  S Y0=$G(^(KK,0)) D I1
"RTN","FHIPST6",4,0)
 Q
"RTN","FHIPST6",5,0)
I1 ; Set up Ingredient values
"RTN","FHIPST6",6,0)
 Q:$P(Y0,"^",3)  S I1=+Y0 Q:'I1  S AMT=$P(Y0,"^",2) Q:'AMT
"RTN","FHIPST6",7,0)
 S Y0=$G(^FHING(I1,0)),N1=$P(Y0,"^",21),A1=$P(Y0,"^",22) Q:'N1
"RTN","FHIPST6",8,0)
 S EP=$P($G(^FHNU(N1,0)),"^",5)
"RTN","FHIPST6",9,0)
 I A1 S A1=A1*AMT I EP,EP'=100 S A1=A1*EP/100
"RTN","FHIPST6",10,0)
 S $P(^FH(114,REC,"I",KK,0),"^",3,4)=N1_"^"_A1 Q
"RTN","FHLABEL")
0^91^B9674043
"RTN","FHLABEL",1,0)
FHLABEL ; HISC/RTK - Laser label sheet build and display;9/27/02  9:25
"RTN","FHLABEL",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHLABEL",3,0)
LAB ;
"RTN","FHLABEL",4,0)
 S FHCOL=$S(LAB=3:3,1:2)
"RTN","FHLABEL",5,0)
 I LABSTART>1 F FHLABST=1:1:(LABSTART-1)*FHCOL D  S LABSTART=1
"RTN","FHLABEL",6,0)
 .I LAB=3 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6)="" D LL3^FHLABEL
"RTN","FHLABEL",7,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6,PCL7,PCL8)="" D LL4^FHLABEL
"RTN","FHLABEL",8,0)
 .Q
"RTN","FHLABEL",9,0)
 S FHTAB=$S(LAB=3:24,1:37)
"RTN","FHLABEL",10,0)
 S BIDX1=BID_$E("          ",1,12-$L(BID))_X1,BXLN=$L(BIDX1)
"RTN","FHLABEL",11,0)
 S N1=$E(N1,1,FHTAB-$L(W1)),DTP=$E(DTP,1,9)
"RTN","FHLABEL",12,0)
 S FLG=0,(LS,LS2)="" I LAB>2 F D=1:1:5 D  Q:FLG=1
"RTN","FHLABEL",13,0)
 .S P=$P(Y,", ",D) I P="" S FLG=1 Q
"RTN","FHLABEL",14,0)
 .S TL=$L(LS)+$L(P)+1,NUM=$S(LAB=3:26,1:38)
"RTN","FHLABEL",15,0)
 .I TL<NUM S LS=LS_P_","
"RTN","FHLABEL",16,0)
 .I TL>(NUM-1) S LS2=LS2_P_","
"RTN","FHLABEL",17,0)
 S LNA=N1_$J(W1,FHTAB+1-$L(N1)),LNB=BIDX1_$J(R1,FHTAB+1-$L(BIDX1))
"RTN","FHLABEL",18,0)
 S LNC=$S(LS2="":$E(LS,1,$L(LS)-1),1:LS)
"RTN","FHLABEL",19,0)
 S LND=$E(LS2,1,$L(LS2)-1)
"RTN","FHLABEL",20,0)
 I LAB=3 S PCL1="",PCL2=LNA,PCL3=LNB,PCL4=LNC,PCL5=$E(LND,1,25),PCL6=DTP D LL3 Q
"RTN","FHLABEL",21,0)
 I LAB=4 S (PCL1,PCL2,PCL8)="",PCL3=LNA,PCL4=LNB,PCL5=LNC,PCL6=$E(LND,1,38),PCL7=DTP D LL4 Q
"RTN","FHLABEL",22,0)
 Q
"RTN","FHLABEL",23,0)
LL3 ;LASER LABEL PRINT - AVERY 5160
"RTN","FHLABEL",24,0)
 S COUNT=COUNT+1 I COUNT>1,COUNT#3=1 S LINE=LINE+6
"RTN","FHLABEL",25,0)
 S ^TMP($J,"DL3",LINE)=$G(^TMP($J,"DL3",LINE))_PCL1_U
"RTN","FHLABEL",26,0)
 S ^TMP($J,"DL3",LINE+1)=$G(^TMP($J,"DL3",LINE+1))_PCL2_U
"RTN","FHLABEL",27,0)
 S ^TMP($J,"DL3",LINE+2)=$G(^TMP($J,"DL3",LINE+2))_PCL3_U
"RTN","FHLABEL",28,0)
 S ^TMP($J,"DL3",LINE+3)=$G(^TMP($J,"DL3",LINE+3))_PCL4_U
"RTN","FHLABEL",29,0)
 S ^TMP($J,"DL3",LINE+4)=$G(^TMP($J,"DL3",LINE+4))_PCL5_U
"RTN","FHLABEL",30,0)
 S ^TMP($J,"DL3",LINE+5)=$G(^TMP($J,"DL3",LINE+5))_PCL6_U
"RTN","FHLABEL",31,0)
 Q
"RTN","FHLABEL",32,0)
LL4 ;LASER LABEL PRINT - AVERY 5162
"RTN","FHLABEL",33,0)
 S COUNT=COUNT+1 I COUNT>1,COUNT#2=1 S LINE=LINE+8
"RTN","FHLABEL",34,0)
 S ^TMP($J,"DL4",LINE)=$G(^TMP($J,"DL4",LINE))_PCL1_U
"RTN","FHLABEL",35,0)
 S ^TMP($J,"DL4",LINE+1)=$G(^TMP($J,"DL4",LINE+1))_PCL2_U
"RTN","FHLABEL",36,0)
 S ^TMP($J,"DL4",LINE+2)=$G(^TMP($J,"DL4",LINE+2))_PCL3_U
"RTN","FHLABEL",37,0)
 S ^TMP($J,"DL4",LINE+3)=$G(^TMP($J,"DL4",LINE+3))_PCL4_U
"RTN","FHLABEL",38,0)
 S ^TMP($J,"DL4",LINE+4)=$G(^TMP($J,"DL4",LINE+4))_PCL5_U
"RTN","FHLABEL",39,0)
 S ^TMP($J,"DL4",LINE+5)=$G(^TMP($J,"DL4",LINE+5))_PCL6_U
"RTN","FHLABEL",40,0)
 S ^TMP($J,"DL4",LINE+6)=$G(^TMP($J,"DL4",LINE+6))_PCL7_U
"RTN","FHLABEL",41,0)
 S ^TMP($J,"DL4",LINE+7)=$G(^TMP($J,"DL4",LINE+7))_PCL8_U
"RTN","FHLABEL",42,0)
 Q
"RTN","FHLABEL",43,0)
DPLL ;
"RTN","FHLABEL",44,0)
 I LAB=3 D DPLL3 Q
"RTN","FHLABEL",45,0)
 I LAB=4 D DPLL4 Q
"RTN","FHLABEL",46,0)
 Q
"RTN","FHLABEL",47,0)
DPLL3 ;
"RTN","FHLABEL",48,0)
 S COUNT=0 W !! F FHLL=1:6 Q:'$D(^TMP($J,"DL3",FHLL))  D
"RTN","FHLABEL",49,0)
 .S COUNT=COUNT+1
"RTN","FHLABEL",50,0)
 .I COUNT=11 W @IOF,!! S COUNT=1
"RTN","FHLABEL",51,0)
 .S LINE1=^TMP($J,"DL3",FHLL),LINE2=^TMP($J,"DL3",FHLL+1)
"RTN","FHLABEL",52,0)
 .S LINE3=^TMP($J,"DL3",FHLL+2),LINE4=^TMP($J,"DL3",FHLL+3)
"RTN","FHLABEL",53,0)
 .S LINE5=^TMP($J,"DL3",FHLL+4),LINE6=^TMP($J,"DL3",FHLL+5)
"RTN","FHLABEL",54,0)
 .F L=LINE1,LINE2,LINE3,LINE4,LINE5,LINE6 D
"RTN","FHLABEL",55,0)
 ..W !,$P(L,U,1),?27,$P(L,U,2),?55,$P(L,U,3)
"RTN","FHLABEL",56,0)
 Q
"RTN","FHLABEL",57,0)
DPLL4 ;
"RTN","FHLABEL",58,0)
 S COUNT=0 W !!!! F FHLL=1:8 Q:'$D(^TMP($J,"DL4",FHLL))  D
"RTN","FHLABEL",59,0)
 .S COUNT=COUNT+1
"RTN","FHLABEL",60,0)
 .I COUNT=8 W @IOF,!!!! S COUNT=1
"RTN","FHLABEL",61,0)
 .S LINE1=^TMP($J,"DL4",FHLL),LINE2=^TMP($J,"DL4",FHLL+1)
"RTN","FHLABEL",62,0)
 .S LINE3=^TMP($J,"DL4",FHLL+2),LINE4=^TMP($J,"DL4",FHLL+3)
"RTN","FHLABEL",63,0)
 .S LINE5=^TMP($J,"DL4",FHLL+4),LINE6=^TMP($J,"DL4",FHLL+5)
"RTN","FHLABEL",64,0)
 .S LINE7=^TMP($J,"DL4",FHLL+6),LINE8=^TMP($J,"DL4",FHLL+7)
"RTN","FHLABEL",65,0)
 .F L=LINE1,LINE2,LINE3,LINE4,LINE5,LINE6,LINE7,LINE8 D
"RTN","FHLABEL",66,0)
 ..W !,$P(L,U,1),?42,$P(L,U,2)
"RTN","FHLABEL",67,0)
 Q
"RTN","FHMADM2")
0^92^B12575896
"RTN","FHMADM2",1,0)
FHMADM2 ; HISC/AAC - Multidivisional Enter/Edit Served Meals ;10/9/03  09:53
"RTN","FHMADM2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMADM2",3,0)
EN1 ; Enter/Edit Served Meals
"RTN","FHMADM2",4,0)
 D NOW^%DTC S DT=%\1 K %,%H,%I
"RTN","FHMADM2",5,0)
 S (ZZOUT,COMM)=0,ZOUT=$P($G(^FH(119.6,0)),"^",4)
"RTN","FHMADM2",6,0)
 ;
"RTN","FHMADM2",7,0)
E1 S %DT="AEPX",%DT("A")="SERVED MEALS Date: " W ! D ^%DT G KIL^FHMADM21:"^"[X!$D(DTOUT),E1:Y<1
"RTN","FHMADM2",8,0)
 ;
"RTN","FHMADM2",9,0)
 S DA=+Y,(FHRM,FHSM,FHGM)=DA I DA'<DT W *7,!!,"** Input must be for a date before today in order to collect ADT data!",! G E1
"RTN","FHMADM2",10,0)
 ;
"RTN","FHMADM2",11,0)
 ;Enter Communications Office 
"RTN","FHMADM2",12,0)
 K DIC,DIE S DIE="^FH(117," I '$D(^FH(117,DA,0)) S ^FH(117,DA,0)=DA,^FH(117,"B",DA,DA)="",X0=^FH(117,0),$P(^FH(117,0),"^",3,4)=DA_"^"_($P(X0,"^",4)+1)
"RTN","FHMADM2",13,0)
 S DA=+Y I $G(^FH(117,DA,"I"))="Y" W !," ** INACTIVE COMM OFFICE **" Q
"RTN","FHMADM2",14,0)
 S ^FH(117,DA,0)=DA
"RTN","FHMADM2",15,0)
 S DR="[FHMADM2]" D ^DIE
"RTN","FHMADM2",16,0)
 Q
"RTN","FHMADM2",17,0)
 ;
"RTN","FHMADM2",18,0)
C1 ;
"RTN","FHMADM2",19,0)
 K FHN W !!,"Calculating Census Values ...",!
"RTN","FHMADM2",20,0)
 F W1=0:0 S W1=$O(^DG(41.9,W1)) Q:W1'>0  D C2
"RTN","FHMADM2",21,0)
        W !,"Calculating Outpatient Values ...",! D CALCOP
"RTN","FHMADM2",22,0)
 Q
"RTN","FHMADM2",23,0)
C2 ;
"RTN","FHMADM2",24,0)
 I '$D(^DG(41.9,W1,"C",DA(1))) Q
"RTN","FHMADM2",25,0)
 S X0=^DG(41.9,W1,"C",DA(1),0),X1=$G(^(1)) I $D(^DIC(42,W1,0)) S FHWARD=$O(^FH(119.6,"AW",W1,"")) Q:FHWARD=""
"RTN","FHMADM2",26,0)
 S FHCOM19=$P($G(^FH(119.6,FHWARD,0)),"^",8) Q:FHCOMM'=FHCOM19
"RTN","FHMADM2",27,0)
 S TYP=$P(^DIC(42,W1,0),"^",3),TYP=$S(TYP="D":"D",TYP="NH":"N",1:"H")
"RTN","FHMADM2",28,0)
 I '$D(FHN(TYP)) S FHN(TYP,0)=0,FHN(TYP,1)=0
"RTN","FHMADM2",29,0)
 S Y0=$P(X0,"^",2),Y1=$P(X1,"^",5)
"RTN","FHMADM2",30,0)
 S:Y0 FHN(TYP,0)=FHN(TYP,0)+Y0 S:Y1 FHN(TYP,1)=FHN(TYP,1)+Y1 Q
"RTN","FHMADM2",31,0)
 Q
"RTN","FHMADM2",32,0)
DT ; Get From/To Dates
"RTN","FHMADM2",33,0)
D1 S %DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D1 S SDT=+Y
"RTN","FHMADM2",34,0)
 I SDT'<DT W *7,"  [Must Start before Today!] " G D1
"RTN","FHMADM2",35,0)
D2 S %DT="AEPX",%DT("A")=" Ending Date: " D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D2 S EDT=+Y
"RTN","FHMADM2",36,0)
 I EDT'<DT W *7,"  [Must End before Today!] " G D2
"RTN","FHMADM2",37,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHMADM2",38,0)
 Q
"RTN","FHMADM2",39,0)
CALCOP ; Calculate Outpatient totals (Recurring and Special Meals) for the
"RTN","FHMADM2",40,0)
 ; selected Communication Office
"RTN","FHMADM2",41,0)
 ;
"RTN","FHMADM2",42,0)
 K FHOPC S FHEND=FHRM_.9999,X1=FHRM,X2=-1 D C^%DTC S FHRM=X
"RTN","FHMADM2",43,0)
 F IX="B","N","E" S FHOPC(IX)=0 F FC="E","G","O","P","V" S FHOPC(FC,IX)=0
"RTN","FHMADM2",44,0)
 ; Count recurring meals totals in FHOPC(INDX)
"RTN","FHMADM2",45,0)
 F FHRM=FHRM:0 S FHRM=$O(^FHPT("RM",FHRM)) Q:FHRM=""!(FHRM'<FHEND)  D
"RTN","FHMADM2",46,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHRM,FHDFN)) Q:FHDFN=""  D
"RTN","FHMADM2",47,0)
 ..F FHRNUM=0:0 S FHRNUM=$O(^FHPT("RM",FHRM,FHDFN,FHRNUM)) Q:FHRNUM=""  D
"RTN","FHMADM2",48,0)
 ...S FHLOC=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,3)
"RTN","FHMADM2",49,0)
 ...I $P($G(^FH(119.6,FHLOC,0)),U,8)'=FHCOMM Q
"RTN","FHMADM2",50,0)
 ...S FHMEAL=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,4)
"RTN","FHMADM2",51,0)
 ...Q:"BNE"'[FHMEAL!(FHMEAL="")
"RTN","FHMADM2",52,0)
 ...I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" Q
"RTN","FHMADM2",53,0)
 ...S FHOPC(FHMEAL)=FHOPC(FHMEAL)+1
"RTN","FHMADM2",54,0)
 ; Add special meals to recurring meals totals in FHOPC(INDX)
"RTN","FHMADM2",55,0)
 F FHSM=FHSM:0 S FHSM=$O(^FHPT("SM",FHSM)) Q:FHSM>FHEND!(FHSM="")  D
"RTN","FHMADM2",56,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("SM",FHSM,FHDFN)) Q:FHDFN'>0  D
"RTN","FHMADM2",57,0)
 ..S FHLOC=$P($G(^FHPT(FHDFN,"SM",FHSM,0)),U,3)
"RTN","FHMADM2",58,0)
 ..I $P($G(^FH(119.6,FHLOC,0)),U,8)'=FHCOMM Q
"RTN","FHMADM2",59,0)
 ..S FHMEAL=$P($G(^FHPT(FHDFN,"SM",FHSM,0)),U,9)
"RTN","FHMADM2",60,0)
 ..Q:"BNE"'[FHMEAL!(FHMEAL="")
"RTN","FHMADM2",61,0)
 ..S FHOPC(FHMEAL)=FHOPC(FHMEAL)+1
"RTN","FHMADM2",62,0)
 ; Calculate Employee, Paid, OOD, Grat and Volunteer totals (Guest Meals)
"RTN","FHMADM2",63,0)
 F FHGM=FHGM:0 S FHGM=$O(^FHPT("GM",FHGM)) Q:FHGM>FHEND!(FHGM="")  D
"RTN","FHMADM2",64,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHGM,FHDFN)) Q:FHDFN'>0  D
"RTN","FHMADM2",65,0)
 ..S FHLOC=$P($G(^FHPT(FHDFN,"GM",FHGM,0)),U,5)
"RTN","FHMADM2",66,0)
 ..I $P($G(^FH(119.6,FHLOC,0)),U,8)'=FHCOMM Q
"RTN","FHMADM2",67,0)
 ..S FHCLASS=$P($G(^FHPT(FHDFN,"GM",FHGM,0)),U,2)
"RTN","FHMADM2",68,0)
 ..Q:"EGOPV"'[FHCLASS!(FHCLASS="")
"RTN","FHMADM2",69,0)
 ..S FHMEAL=$P($G(^FHPT(FHDFN,"GM",FHGM,0)),U,3)
"RTN","FHMADM2",70,0)
 ..Q:"BNE"'[FHMEAL!(FHMEAL="")
"RTN","FHMADM2",71,0)
 ..S FHOPC(FHCLASS,FHMEAL)=FHOPC(FHCLASS,FHMEAL)+1
"RTN","FHMADM2",72,0)
 Q
"RTN","FHMADM21")
0^93^B34931110
"RTN","FHMADM21",1,0)
FHMADM21 ; HISC/AAC - Multidivisional Served Meals Report ;10/9/03  16:07
"RTN","FHMADM21",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMADM21",3,0)
 ;
"RTN","FHMADM21",4,0)
 ;This program is being modified for Multidivisional Reports
"RTN","FHMADM21",5,0)
 ;Project ID 4QNFR03 - 2003
"RTN","FHMADM21",6,0)
 ;
"RTN","FHMADM21",7,0)
EN2 ; Print Meals Report
"RTN","FHMADM21",8,0)
 ;
"RTN","FHMADM21",9,0)
 D NOW^%DTC S DT=%\1 D DT^FHMADM2 G:"^"[X KIL
"RTN","FHMADM21",10,0)
 ;
"RTN","FHMADM21",11,0)
 ;Declare variables,determine total # of comm offices - alc 02-26-03
"RTN","FHMADM21",12,0)
 ;
"RTN","FHMADM21",13,0)
 S CONAME="",CO="",ZCO="",L=0,CONUM="",CONUMZ="",COUNT=0,COX="",COXX="",Y00=""
"RTN","FHMADM21",14,0)
 ;S ZZOUT=$G(^FH(119.73,0)),ZOUT=$P(ZZOUT,"^",4)
"RTN","FHMADM21",15,0)
 S ZZCOUNT=0 F ZZCOUNT=0:0 S ZZCOUNT=$O(^FH(119.73,ZZCOUNT)) Q:ZZCOUNT'>0  S ZOUT=ZZCOUNT
"RTN","FHMADM21",16,0)
 F K=1:1:21 S S(K)="",SS(K)="",NN(K)=0
"RTN","FHMADM21",17,0)
 ;
"RTN","FHMADM21",18,0)
 R !,"Print report for all Communications Offices Y or N: ",ZCO:DTIME W ! S ZCO=$TR(ZCO,"y","Y") I ZCO="Y" G PRINT
"RTN","FHMADM21",19,0)
 ;
"RTN","FHMADM21",20,0)
EN3 ;Enter/Edit data - alc 02-26-03
"RTN","FHMADM21",21,0)
 ;
"RTN","FHMADM21",22,0)
 S DIC=119.73,DIC(0)="AEQ"
"RTN","FHMADM21",23,0)
 D ^DIC I (Y=-1)&(CO="") G KIL Q
"RTN","FHMADM21",24,0)
 I (Y=-1) G PRINT Q
"RTN","FHMADM21",25,0)
 S CON=$P(Y,"^",1),CO=CON_"^"_CO,CONAM=$P(Y,"^",2),CONAME=CONAM_"^"_CONAME G EN3
"RTN","FHMADM21",26,0)
 I Y=-1 K DIC Q     ;quit if lookup fails
"RTN","FHMADM21",27,0)
 ;
"RTN","FHMADM21",28,0)
PRINT W !!,"The report requires a 132 column printer.",!
"RTN","FHMADM21",29,0)
 S NAMENO=$L(CONAME,"^"),CONUMX=$L(CO,"^")
"RTN","FHMADM21",30,0)
 I ZCO="Y" S CONUMZ=$G(^FH(119.73,0)),CONUMZ=$P(CONUMZ,"^",4)
"RTN","FHMADM21",31,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHMADM21",32,0)
 I $D(IO("Q")) S FHPGM="Q1^FHMADM21",FHLST="EDT^SDT^ZCO^CONUMX^CO^CONAM^CONAME^COUNT^CONUMZ^ZOUT^S(^SS(" D EN2^FH G KIL
"RTN","FHMADM21",33,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHMADM21",34,0)
 ;
"RTN","FHMADM21",35,0)
Q1 S DTP=SDT\1 D DTP^FH S DTE=DTP_" to " S DTP=EDT\1 D DTP^FH S DTE=DTE_DTP
"RTN","FHMADM21",36,0)
 S X=SDT D DOW^%DTC S DOW=Y+1
"RTN","FHMADM21",37,0)
 D NOW^%DTC S DTP=% D DTP^FH S HDT=DTP,PG=0
"RTN","FHMADM21",38,0)
 ;
"RTN","FHMADM21",39,0)
Q2 ;Drivers for individual Comm Off report - alc 02-26-03
"RTN","FHMADM21",40,0)
 ;
"RTN","FHMADM21",41,0)
 I ZCO'="Y" S CONUMX=CONUMX-1 G:CONUMX=0 QUIT  S COXX=$P(CO,"^",CONUMX),NAME=$P(CONAME,"^",CONUMX) G:$D(^FH(119.73,COXX,"I")) Q2 G:'$D(^FH(119.73,COXX,0)) Q2
"RTN","FHMADM21",42,0)
 I ZCO="Y" S COUNT=COUNT+1 G:COUNT>ZOUT QUIT  S NAME=$G(^FH(119.73,COUNT,0)),NAME=$P(NAME,"^") G:$D(^FH(119.73,COUNT,"I")) Q2 G:'$D(^FH(119.73,COUNT,0)) Q2
"RTN","FHMADM21",43,0)
 ;W @IOF
"RTN","FHMADM21",44,0)
 D HDR
"RTN","FHMADM21",45,0)
 S DOW=Y+1 D Q3
"RTN","FHMADM21",46,0)
 I CONUMX>0  G Q2
"RTN","FHMADM21",47,0)
 Q
"RTN","FHMADM21",48,0)
 ;
"RTN","FHMADM21",49,0)
QUIT ;Drivers for report final totals/average - alc 02-26-03
"RTN","FHMADM21",50,0)
 ;
"RTN","FHMADM21",51,0)
 ;W @IOF
"RTN","FHMADM21",52,0)
 S NAME="Total All Communications Offices "
"RTN","FHMADM21",53,0)
 D HDR
"RTN","FHMADM21",54,0)
 ;
"RTN","FHMADM21",55,0)
 F K=1:1:18 S NN(K)=$J($S(NDX:SS(K)/NDX,1:0),0,0),NN(K)=$J($S(NN(K)<1:"",1:NN(K)),5)_" ",SS(K)=$S(SS(K)<1:$J("",6),SS(K)<100000:$J(SS(K),5)_" ",1:$J(SS(K),6))
"RTN","FHMADM21",56,0)
 F K=19:1:21 S NN(K)=$J($S(NDX:SS(K)/NDX,1:0),0,0),NN(K)=$J($S(NN(K)<1:"",1:NN(K)),5)_" ",SS(K)=$S(SS(K)<1:$J("",6),SS(K)<100000:$J(SS(K),5)_" ",1:$J(SS(K),6))
"RTN","FHMADM21",57,0)
 ;BREAK
"RTN","FHMADM21",58,0)
 D FTOTALS
"RTN","FHMADM21",59,0)
 Q
"RTN","FHMADM21",60,0)
 ;
"RTN","FHMADM21",61,0)
Q3 ;Looping thru dates/comm off load data buckets - alc 02-26-03
"RTN","FHMADM21",62,0)
 ;
"RTN","FHMADM21",63,0)
 S D1=SDT,(ND,TD,NDX,TDX)=0 F L1=0:0 D N1 S X1=D1,X2=1 D C^%DTC Q:(X>EDT)  S D1=X,DOW=DOW+1 S:DOW=8 DOW=1
"RTN","FHMADM21",64,0)
 ;
"RTN","FHMADM21",65,0)
 F K=1:1:18 S N(K)=$J($S(ND:S(K)/ND,1:0),0,0),N(K)=$J($S(N(K)<1:"",1:N(K)),5)_" ",S(K)=$S(S(K)<1:$J("",6),S(K)<100000:$J(S(K),5)_" ",1:$J(S(K),6))
"RTN","FHMADM21",66,0)
 ;
"RTN","FHMADM21",67,0)
 F K=19:1:21 S N(K)=$J($S(TD:S(K)/TD,1:0),0,0),N(K)=$J($S(N(K)<1:"",1:N(K)),5)_" ",S(K)=$S(S(K)<1:$J("",6),S(K)<100000:$J(S(K),5)_" ",1:$J(S(K),6))
"RTN","FHMADM21",68,0)
 ;
"RTN","FHMADM21",69,0)
 ;Print daily totals - alc 02-26-03
"RTN","FHMADM21",70,0)
 ;
"RTN","FHMADM21",71,0)
 D LN W !?4,"Total",?15,"|",S(1),S(2),S(3),"|",S(4),S(5),S(6),"|",S(7),S(8),S(9),"|",S(10),"|",S(11),S(13),S(16),"|",S(17),"|",S(18),"|",S(19),S(20),S(21),!
"RTN","FHMADM21",72,0)
 ;
"RTN","FHMADM21",73,0)
 W:ND ?4,"Avg. ",?15,"|",N(1),N(2),N(3),"|",N(4),N(5),N(6),"|",N(7),N(8),N(9),"|",N(10),"|",N(11),N(13),N(16),"|",N(17),"|",N(18),"|",N(19),N(20),N(21),!
"RTN","FHMADM21",74,0)
 ;
"RTN","FHMADM21",75,0)
 Q
"RTN","FHMADM21",76,0)
 ;
"RTN","FHMADM21",77,0)
FTOTALS ;PRINT FINAL TOTALS - alc 02-26-03
"RTN","FHMADM21",78,0)
 ;
"RTN","FHMADM21",79,0)
 D LN W !?4,"ALL Total",?15,"|",SS(1),SS(2),SS(3),"|",SS(4),SS(5),SS(6),"|",SS(7),SS(8),SS(9),"|",SS(10),"|",SS(11),SS(13),SS(16),"|",SS(17),"|",SS(18),"|",SS(19),SS(20),SS(21),!
"RTN","FHMADM21",80,0)
 ;
"RTN","FHMADM21",81,0)
 W:ND ?4,"Avg. ",?15,"|",NN(1),NN(2),NN(3),"|",NN(4),NN(5),NN(6),"|",NN(7),NN(8),NN(9),"|",NN(10),"|",NN(11),NN(13),NN(16),"|",NN(17),"|",NN(18),"|",NN(19),NN(20),NN(21),!
"RTN","FHMADM21",82,0)
 ;
"RTN","FHMADM21",83,0)
 Q
"RTN","FHMADM21",84,0)
 ;
"RTN","FHMADM21",85,0)
HDR ;Print report headings - alc 02-26-03
"RTN","FHMADM21",86,0)
 ;
"RTN","FHMADM21",87,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,HDT,?44,"S E R V E D   M E A L S   W O R K S H E E T",?123,"Page ",PG
"RTN","FHMADM21",88,0)
 ;
"RTN","FHMADM21",89,0)
 ;S NAMENO=NAMENO-1,NAME=$P(CONAME,"^",NAMENO) 
"RTN","FHMADM21",90,0)
 W !!,?1,NAME
"RTN","FHMADM21",91,0)
 ;
"RTN","FHMADM21",92,0)
 W ?(131-$L(DTE)\2),DTE
"RTN","FHMADM21",93,0)
 W !!,?15,"|",?32,"MEALS SERVED ON INPATIENT BASIS",?79,"|",?82,"MEALS SERVED TO OTHERS",?105,"| TOTAL| SERVED TRAYS DATA"
"RTN","FHMADM21",94,0)
 W !,?15,"|",?19,"DOMICILIARY",?34,"| NURSING HOME CU",?53,"|",?59,"HOSPITAL",?72,"| TOTAL|",?98,"| TOTAL| MEALS|"
"RTN","FHMADM21",95,0)
 W !,?15,"|  Inp.  Abs.  Meal|  Inp.  Abs.  Meal|  Inp.  Abs.  Meal|      | Outp.  Paid Grat.|      |      |  Cafe   NPO Trays"
"RTN","FHMADM21",96,0)
 W !,?15,"|   A     B     C  |   D     E     F  |   G     H     I  |   J  |   K     M    Q   |      |   R  |   T      U    V"
"RTN","FHMADM21",97,0)
LN W ! F K=1:1:131 W "-"
"RTN","FHMADM21",98,0)
 Q
"RTN","FHMADM21",99,0)
 ;
"RTN","FHMADM21",100,0)
N1 ;Get data from approp date/comm office globals - alc 02-26-03
"RTN","FHMADM21",101,0)
 ;
"RTN","FHMADM21",102,0)
 I ZCO="Y" F CONUM=1:1  Q:CONUM>ZOUT  S Y0=$G(^FH(117,D1,2,CONUM,0)),Y2=$P(Y0,"^"),Y1=($P(Y0,"^",2,99)),Y00=$G(^FH(117,D1,2,CONUM,1)),Y11=($P(Y00,"^",1,99))  Q:COUNT=Y2 
"RTN","FHMADM21",103,0)
 ;
"RTN","FHMADM21",104,0)
N2 I ZCO'="Y" F CONUM=1:1  Q:CONUM>ZOUT  S Y0=$G(^FH(117,D1,2,CONUM,0)),Y2=$P(Y0,"^"),Y1=($P(Y0,"^",2,99)),Y00=$G(^FH(117,D1,2,CONUM,1)),Y11=($P(Y00,"^",1,99))  Q:COXX=Y2
"RTN","FHMADM21",105,0)
 ;
"RTN","FHMADM21",106,0)
 K N S K=0 F L=1,2,4,5,7,8 S K=K+1,N(L)=$P(Y11,"^",K)
"RTN","FHMADM21",107,0)
 S K=10 F L=1:3:16 S K=K+1,N(K)=$P(Y1,"^",L)+$P(Y1,"^",L+1)+$P(Y1,"^",L+2)
"RTN","FHMADM21",108,0)
 ;
"RTN","FHMADM21",109,0)
 ;Calcs - alc 02-26-03
"RTN","FHMADM21",110,0)
 ;
"RTN","FHMADM21",111,0)
 S N(19)=$P(Y1,"^",19),N(20)=$P(Y1,"^",20)
"RTN","FHMADM21",112,0)
 S N(3)=N(1)-N(2)*3,N(6)=N(4)-N(5)*3,N(9)=N(7)-N(8)*3,N(10)=N(3)+N(6)+N(9)
"RTN","FHMADM21",113,0)
 ;
"RTN","FHMADM21",114,0)
 ;
"RTN","FHMADM21",115,0)
 S N(16)=N(14)+N(15)+N(16),N(13)=N(12)+N(13),N(17)=N(11)+N(13)+N(16),N(18)=N(10)+N(17),N(19)=N(19)+N(17),N(21)=N(18)-N(19)-N(20) S:N(18) (ND,NDX)=ND+1 S:N(20) (TD,TDX)=TD+1
"RTN","FHMADM21",116,0)
 ;
"RTN","FHMADM21",117,0)
 ;Summarizing detail report data into totals - alc 02-26-03
"RTN","FHMADM21",118,0)
 ;
"RTN","FHMADM21",119,0)
 F K=1:1:21 S S(K)=S(K)+N(K),SS(K)=SS(K)+N(K)
"RTN","FHMADM21",120,0)
 ;
"RTN","FHMADM21",121,0)
 F K=1:1:21 S N(K)=$J($S(N(K)<1:"",1:N(K)),5)_" "
"RTN","FHMADM21",122,0)
 ;
"RTN","FHMADM21",123,0)
 ;Prints detail line by date - alc 02-26-03
"RTN","FHMADM21",124,0)
 ;
"RTN","FHMADM21",125,0)
 S DTP=D1 D DTP^FH D:$Y>(IOSL-8) HDR
"RTN","FHMADM21",126,0)
 W !,$P("Sun Mon Tue Wed Thu Fri Sat"," ",DOW)," ",DTP
"RTN","FHMADM21",127,0)
 W ?15,"|",N(1),N(2),N(3),"|",N(4),N(5),N(6),"|",N(7),N(8),N(9),"|",N(10),"|",N(11),N(13),N(16),"|",N(17),"|",N(18),"|",N(19),N(20),N(21)  Q
"RTN","FHMADM21",128,0)
KIL ; Kill all used Variables
"RTN","FHMADM21",129,0)
 G KILL^XUSCLEAN
"RTN","FHMADM2A")
0^94^B5248967
"RTN","FHMADM2A",1,0)
FHMADM2A ; HISC/RTK - Calculate Multidiv NPO/Trays for Served Meals ;10/15/03  14:03
"RTN","FHMADM2A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMADM2A",3,0)
EN1 ; Calculate NPO/Trays
"RTN","FHMADM2A",4,0)
 F FHCOMM=0:0 S FHCOMM=$O(^FH(119.73,FHCOMM)) Q:FHCOMM'>0  D FHMULT
"RTN","FHMADM2A",5,0)
 Q
"RTN","FHMADM2A",6,0)
FHMULT ;
"RTN","FHMADM2A",7,0)
 D NOW^%DTC S NOW=%,DT=NOW\1,(TP,TC,TE,N,R)=0 F K=1:1:5 S S(K)=0
"RTN","FHMADM2A",8,0)
 I $G(^FH(119.73,FHCOMM,"I"))="Y" Q
"RTN","FHMADM2A",9,0)
 S FHZZ=$O(^FH(117,DT,2,"B",FHCOMM,"")) I FHZZ="" D
"RTN","FHMADM2A",10,0)
 .S Y=FHCOMM K DIC,DO S DA(1)=DT,DIC="^FH(117,"_DA(1)_",2,"
"RTN","FHMADM2A",11,0)
 .S DIC(0)="L",DIC("P")=$P(^DD(117,6,0),U,2),X=+Y
"RTN","FHMADM2A",12,0)
 .D FILE^DICN I Y=-1 Q
"RTN","FHMADM2A",13,0)
 S FHZZ=$O(^FH(117,DT,2,"B",FHCOMM,"")) I FHZZ="" Q
"RTN","FHMADM2A",14,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD'>0  S FHWRDCM=$P($G(^FH(119.6,WRD,0)),U,8) Q:FHWRDCM'=FHCOMM  F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN=""  S ADM=^FHPT("AW",WRD,FHDFN) D CNT
"RTN","FHMADM2A",15,0)
 I '$D(^FH(117,DT,0)) S ^FH(117,DT,0)=DT,^FH(117,"B",DT,DT)="",X0=^FH(117,0),$P(^FH(117,0),"^",3,4)=DT_"^"_($P(X0,"^",4)+1)
"RTN","FHMADM2A",16,0)
 S MD=N-R
"RTN","FHMADM2A",17,0)
 S $P(^FH(117,DT,2,FHZZ,0),"^",20,28)=(3*TC)_"^"_(TP-TE*3)_"^"_S(1)_"^"_S(2)_"^"_S(3)_"^"_S(4)_"^"_S(5)_"^"_MD_"^"_N
"RTN","FHMADM2A",18,0)
 K %,%H,%I,A1,ADM,FHDFN,DFN,FHORD,K,MD,N,NOW,R,S,TC,TE,TP,TYP,WRD
"RTN","FHMADM2A",19,0)
 K X0,X1,Y0,ZZ Q
"RTN","FHMADM2A",20,0)
CNT ;
"RTN","FHMADM2A",21,0)
 Q:'ADM  S TP=TP+1 Q:'$D(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHMADM2A",22,0)
 S X5=$O(^FHPT(FHDFN,"S",0)) I X5 S X5=$G(^(X5,0))
"RTN","FHMADM2A",23,0)
 I  I $P(X5,"^",1)<$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",1) S X5=5,S(X5)=S(X5)+1 G C1
"RTN","FHMADM2A",24,0)
 S X5=$P(X5,"^",2) S:X5=""!(X5>4) X5=5 S S(X5)=S(X5)+1
"RTN","FHMADM2A",25,0)
C1 S X0=^FHPT(FHDFN,"A",ADM,0)
"RTN","FHMADM2A",26,0)
 S FHORD=$P(X0,"^",2),X1=$P(X0,"^",3),ZZ=$P(X0,"^",5) Q:'FHORD
"RTN","FHMADM2A",27,0)
 S Y0=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) Q:Y0=""
"RTN","FHMADM2A",28,0)
 S FHOR=$P(Y0,"^",2,6),FHLD=$P(Y0,"^",7)
"RTN","FHMADM2A",29,0)
 I FHLD'="" Q:ZZ=""  S N=N+1 Q
"RTN","FHMADM2A",30,0)
 S Z=$P(Y0,"^",13) Q:Z=""  S TE=TE+1,TYP=$P(Y0,"^",8) S:TYP="C" TC=TC+1 S N=N+1
"RTN","FHMADM2A",31,0)
 I "1^^^^"[FHOR S R=R+1
"RTN","FHMADM2A",32,0)
 Q
"RTN","FHMADM3")
0^95^B23111413
"RTN","FHMADM3",1,0)
FHMADM3 ; HISC/REL/AAC - Additional Meals Report ;10/9/03  16:07
"RTN","FHMADM3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMADM3",3,0)
EN1 ; Print Meal Report
"RTN","FHMADM3",4,0)
 D DT G:"^"[X KIL
"RTN","FHMADM3",5,0)
 ;
"RTN","FHMADM3",6,0)
 ;Get Communication Offices data
"RTN","FHMADM3",7,0)
 F K=1:1:22 S SS(K)=0,S(K)=0
"RTN","FHMADM3",8,0)
 S CONUM="",ZCO="",COXX="",CO="",CONAME="",CONAM="",COUNT=0
"RTN","FHMADM3",9,0)
 ;S ZZOUT=$G(^FH(119.73,0)),ZOUT=$P(ZZOUT,"^",4)
"RTN","FHMADM3",10,0)
 S ZZCOUNT=0 F ZZCOUNT=0:0 S ZZCOUNT=$O(^FH(119.73,ZZCOUNT)) Q:ZZCOUNT'>0  S ZOUT=ZZCOUNT
"RTN","FHMADM3",11,0)
 ;
"RTN","FHMADM3",12,0)
 R !,"Print report for all Communications Offices Y or N: ",ZCO:DTIME W ! S ZCO=$TR(ZCO,"y","Y") I ZCO'="Y" D N2 G KIL Q
"RTN","FHMADM3",13,0)
 ;
"RTN","FHMADM3",14,0)
PRINT W !!,"The report requires a 132 column printer.",!
"RTN","FHMADM3",15,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHMADM3",16,0)
 I $D(IO("Q")) S FHPGM="Q1^FHMADM3",FHLST="CONAME^CO^CONUMX^EDT^SDT^ZCO^COUNT^ZOUT^S(^SS(" D EN2^FH G KIL
"RTN","FHMADM3",17,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHMADM3",18,0)
 ;
"RTN","FHMADM3",19,0)
Q1 ; Process Printing the Meal Report
"RTN","FHMADM3",20,0)
 ;
"RTN","FHMADM3",21,0)
 S DTP=SDT\1 D DTP^FH S DTE=DTP_" to " S DTP=EDT\1 D DTP^FH S DTE=DTE_DTP
"RTN","FHMADM3",22,0)
 S X=SDT D DOW^%DTC S DOW=Y+1
"RTN","FHMADM3",23,0)
 D NOW^%DTC S DTP=% D DTP^FH S HDT=DTP,PG=0
"RTN","FHMADM3",24,0)
 ;
"RTN","FHMADM3",25,0)
Q2 ;
"RTN","FHMADM3",26,0)
 ;Get Specific Communication Offices
"RTN","FHMADM3",27,0)
 I ZCO'="Y" S CONUMX=CONUMX-1 G:CONUMX=0 QUIT  S COXX=$P(CO,"^",CONUMX),NAME=$P(CONAME,"^",CONUMX) G:$D(^FH(119.73,COXX,"I")) Q2 G:'$D(^FH(119.73,COXX,0)) Q2
"RTN","FHMADM3",28,0)
 I ZCO="Y" S COUNT=COUNT+1 G:COUNT>ZOUT QUIT  S NAME=$G(^FH(119.73,COUNT,0)),NAME=$P(NAME,"^") G:$D(^FH(119.73,COUNT,"I")) Q2 G:'$D(^FH(119.73,COUNT,0)) Q2
"RTN","FHMADM3",29,0)
 ;W @IOF
"RTN","FHMADM3",30,0)
 D HDR
"RTN","FHMADM3",31,0)
 S DOW=Y+1 D Q3
"RTN","FHMADM3",32,0)
 I ZCO'="Y" I CONUMX>0  G Q2
"RTN","FHMADM3",33,0)
 I ZCO="Y" G Q2
"RTN","FHMADM3",34,0)
 Q
"RTN","FHMADM3",35,0)
 ;
"RTN","FHMADM3",36,0)
QUIT ;
"RTN","FHMADM3",37,0)
 ;W @IOF
"RTN","FHMADM3",38,0)
 S NAME="Total All Communications Offices "
"RTN","FHMADM3",39,0)
 D HDR
"RTN","FHMADM3",40,0)
 D FTOTALS
"RTN","FHMADM3",41,0)
 D LN,LN
"RTN","FHMADM3",42,0)
 Q
"RTN","FHMADM3",43,0)
 ;
"RTN","FHMADM3",44,0)
Q3 F L1=19:1:22 S N(L1)=0
"RTN","FHMADM3",45,0)
 S D1=SDT F L1=0:0 D N1 S X1=D1,X2=1 D C^%DTC  Q:X>EDT  S D1=X,DOW=DOW+1 S:DOW=8 DOW=1
"RTN","FHMADM3",46,0)
 ;
"RTN","FHMADM3",47,0)
TOTALS ;
"RTN","FHMADM3",48,0)
 ;Print Totals
"RTN","FHMADM3",49,0)
 F K=1:1:22 S Z=$S(K<19:5,1:6),S(K)=$S(S(K)<1:$J("",Z),S(K)<10000:$J(S(K),Z-1)_" ",1:$J(S(K),Z))
"RTN","FHMADM3",50,0)
 ;
"RTN","FHMADM3",51,0)
 D LN W !,"  Total",?10,"|",S(1),S(2),S(3),S(4),S(5),S(6),S(19)," |",S(7),S(8),S(9),S(10),S(11),S(12),S(20)," |",S(13),S(14),S(15),S(16),S(17),S(18),S(21)," |",S(22),!
"RTN","FHMADM3",52,0)
 Q
"RTN","FHMADM3",53,0)
 ;
"RTN","FHMADM3",54,0)
FTOTALS ; Final Totals
"RTN","FHMADM3",55,0)
 ;
"RTN","FHMADM3",56,0)
 F K=1:1:22 S Z=$S(K<19:5,1:6),SS(K)=$S(SS(K)<1:$J("",Z),SS(K)<10000:$J(SS(K),Z-1)_" ",1:$J(SS(K),Z))
"RTN","FHMADM3",57,0)
 ;
"RTN","FHMADM3",58,0)
 W !,"ALL Total",?10,"|",SS(1),SS(2),SS(3),SS(4),SS(5),SS(6),SS(19)," |",SS(7),SS(8),SS(9),SS(10),SS(11),SS(12),SS(20)," |",SS(13),SS(14),SS(15),SS(16),SS(17),SS(18),SS(21)," |",SS(22),!
"RTN","FHMADM3",59,0)
 Q
"RTN","FHMADM3",60,0)
 ;
"RTN","FHMADM3",61,0)
HDR ;Print page headers
"RTN","FHMADM3",62,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,HDT,?50,"A D D I T I O N A L   M E A L S",?125,"Page ",PG
"RTN","FHMADM3",63,0)
 W !!,?1,NAME
"RTN","FHMADM3",64,0)
 W !!?(131-$L(DTE)\2),DTE
"RTN","FHMADM3",65,0)
 W !!,?10,"|",?21,"B R E A K F A S T",?48,"|",?64,"N O O N",?86,"|",?99,"E V E N I N G",?124,"| TOTAL"
"RTN","FHMADM3",66,0)
 W !,?10,"| Opt. Emp. Paid OOD  Vol. Grt. Total | Opt. Emp. Paid OOD  Vol. Grt. Total | Opt. Emp. Paid OOD  Vol. Grt. Total |"
"RTN","FHMADM3",67,0)
LN W !,"-----------------------------------------------------------------------------------------------------------------------------------"
"RTN","FHMADM3",68,0)
 Q
"RTN","FHMADM3",69,0)
 ;
"RTN","FHMADM3",70,0)
N1 ;Get specific records based on Communications Offices,Start/End Dates, etc
"RTN","FHMADM3",71,0)
 I ZCO'="Y" F CONUM=1:1  Q:CONUM>ZOUT  S Y0=$G(^FH(117,D1,2,CONUM,0)),Y2=$P(Y0,"^"),Y1=$P(Y0,"^",2,99)  Q:COXX=Y2
"RTN","FHMADM3",72,0)
 ;
"RTN","FHMADM3",73,0)
 I ZCO="Y" F CONUM=1:1  Q:CONUM>ZOUT  S Y0=$G(^FH(117,D1,2,CONUM,0)),Y2=$P(Y0,"^"),Y1=$P(Y0,"^",2,99)  Q:COUNT=Y2
"RTN","FHMADM3",74,0)
 ;
"RTN","FHMADM3",75,0)
 S K=0 F L1=1:1:6 F L2=1:1:3 S K=K+1,N=L2-1*6+L1,Z=$P(Y1,"^",K),N(N)=Z,N(18+L2)=N(18+L2)+Z
"RTN","FHMADM3",76,0)
 S N(22)=N(19)+N(20)+N(21)
"RTN","FHMADM3",77,0)
 ;
"RTN","FHMADM3",78,0)
 F K=1:1:22 S S(K)=S(K)+N(K),SS(K)=SS(K)+N(K),N(K)=$J($S(N(K)<1:"",1:N(K)),$S(K<19:4,1:5))_" "
"RTN","FHMADM3",79,0)
 ;
"RTN","FHMADM3",80,0)
 S DTP=D1 D DTP^FH D:$Y>(IOSL-8) HDR
"RTN","FHMADM3",81,0)
 W !,$P("Sun Mon Tue Wed Thu Fri Sat"," ",DOW)," ",$E(DTP,1,6)
"RTN","FHMADM3",82,0)
 W "|",N(1),N(2),N(3),N(4),N(5),N(6),N(19)," |",N(7),N(8),N(9),N(10),N(11),N(12),N(20)," |",N(13),N(14),N(15),N(16),N(17),N(18),N(21)," |",N(22) Q
"RTN","FHMADM3",83,0)
 ;
"RTN","FHMADM3",84,0)
N2 ;Get Communciation Offices
"RTN","FHMADM3",85,0)
 S DIC=119.73,DIC(0)="AEQ",DIC("A")="Select Communication Offices: "
"RTN","FHMADM3",86,0)
 D ^DIC I (Y=-1)&(CO="") Q
"RTN","FHMADM3",87,0)
 I Y=-1 G PRINT Q
"RTN","FHMADM3",88,0)
 S CON=$P(Y,"^",1),CO=CON_"^"_CO,CONAM=$P(Y,"^",2),CONAME=CONAM_"^"_CONAME S CONUMX=$L(CO,"^") G N2 Q
"RTN","FHMADM3",89,0)
 I Y=-1 K DIC Q
"RTN","FHMADM3",90,0)
 ;
"RTN","FHMADM3",91,0)
DT ; Get From/To Dates
"RTN","FHMADM3",92,0)
D1 S %DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D1 S SDT=+Y
"RTN","FHMADM3",93,0)
 I SDT'<DT W *7,"  [Must Start before Today!] " G D1
"RTN","FHMADM3",94,0)
 ;
"RTN","FHMADM3",95,0)
D2 ;
"RTN","FHMADM3",96,0)
 S %DT="AEPX",%DT("A")=" Ending Date: " D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D2 S EDT=+Y
"RTN","FHMADM3",97,0)
 I EDT'<DT W *7,"  [Must End before Today!] " G D2
"RTN","FHMADM3",98,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHMADM3",99,0)
 Q
"RTN","FHMADM3",100,0)
 ;
"RTN","FHMADM3",101,0)
KIL G KILL^XUSCLEAN Q
"RTN","FHMADM3",102,0)
EXIT Q
"RTN","FHMADM4")
0^96^B36293844
"RTN","FHMADM4",1,0)
FHMADM4 ; HISC/AAC - Multidivisional Staffing Data Report ;10/10/03  16:08
"RTN","FHMADM4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMADM4",3,0)
EN1 ; Enter/Edit Staffing Data
"RTN","FHMADM4",4,0)
 D NOW^%DTC S DT=%\1
"RTN","FHMADM4",5,0)
 ;
"RTN","FHMADM4",6,0)
 ;
"RTN","FHMADM4",7,0)
E1 S %DT="AEPX",%DT("A")="STAFFING DATA Date: " W ! D ^%DT G KIL:"^"[X!$D(DTOUT),E1:Y<1
"RTN","FHMADM4",8,0)
 S DA=+Y I DA>DT W *7,!!,"** Date must not be in the future!",! G E1
"RTN","FHMADM4",9,0)
 K DIC,DIE S DIE="^FH(117.1," I '$D(^FH(117.1,DA,0)) S ^FH(117.1,DA,0)=DA,^FH(117.1,"B",DA,DA)="",X0=^FH(117.1,0),$P(^FH(117.1,0),"^",3,4)=DA_"^"_($P(X0,"^",4)+1)
"RTN","FHMADM4",10,0)
 S X1=DA,X2=-1 D C^%DTC S DM1=X,FHX1=$P($G(^FH(117.1,DM1,0)),"^",2,6)
"RTN","FHMADM4",11,0)
 S DR="[FHMADM4]" D ^DIE G EN1
"RTN","FHMADM4",12,0)
 ;
"RTN","FHMADM4",13,0)
EN2 ; Print Staffing Data Report
"RTN","FHMADM4",14,0)
 D DT^FHMADM2 G:"^"[X KIL
"RTN","FHMADM4",15,0)
 ;
"RTN","FHMADM4",16,0)
 S (CONUM,ZCO,COXX,CO,CONAME,CONAM)="",(COUNT,SSND,SSTOT,SSTO1,SMAN)=0
"RTN","FHMADM4",17,0)
 F K=1:1:23 S SS(K)=0
"RTN","FHMADM4",18,0)
 ;S ZZOUT=$G(^FH(119.73,0)),(CONUMX,ZOUT)=$P(ZZOUT,"^",4)
"RTN","FHMADM4",19,0)
 S ZZCOUNT=0 F ZZCOUNT=0:0 S ZZCOUNT=$O(^FH(119.73,ZZCOUNT)) Q:ZZCOUNT'>0  S ZOUT=ZZCOUNT
"RTN","FHMADM4",20,0)
 R !,"Print report all Communications Offices Y or N: ",ZCO:DTIME W ! S ZCO=$TR(ZCO,"y","Y") I ZCO'="Y"  D N2 Q
"RTN","FHMADM4",21,0)
 ;
"RTN","FHMADM4",22,0)
PRINT W !!,"The report requires a 132 column printer.",!
"RTN","FHMADM4",23,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHMADM4",24,0)
 I $D(IO("Q")) S FHPGM="Q1^FHMADM4",FHLST="EDT^SDT^ZCO^CONUMX^COUNT^ZOUT^SSND^SSTOT^CO^CONAME^SMAN^SSTO1^SS(" D EN2^FH G KIL
"RTN","FHMADM4",25,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHMADM4",26,0)
 ;
"RTN","FHMADM4",27,0)
Q1 ; Process Printing Staffing Report
"RTN","FHMADM4",28,0)
 S DTP=SDT\1 D DTP^FH S DTE=DTP_" to " S DTP=EDT\1 D DTP^FH S DTE=DTE_DTP
"RTN","FHMADM4",29,0)
 S X=SDT D DOW^%DTC S DOW=Y+1
"RTN","FHMADM4",30,0)
 D NOW^%DTC S DTP=% D DTP^FH S HDT=DTP,PG=0
"RTN","FHMADM4",31,0)
 K S,AV F K=1:1:23 S S(K)=0
"RTN","FHMADM4",32,0)
 S SIZ="61 51 51 51 51 50 30 30 30 30 30 30 30 30 30 30 30 30 30 51 50 50 50"
"RTN","FHMADM4",33,0)
 ;
"RTN","FHMADM4",34,0)
Q3 ;
"RTN","FHMADM4",35,0)
 ;Get Communication Office data drivers
"RTN","FHMADM4",36,0)
 I ZCO'="Y" S CONUMX=CONUMX-1 G:CONUMX=0 QUIT  S COXX=$P(CO,"^",CONUMX),NAME=$P(CONAME,"^",CONUMX) G:$D(^FH(119.73,COXX,"I")) Q3 G:'$D(^FH(119.73,COXX,0)) Q3
"RTN","FHMADM4",37,0)
 I ZCO="Y" S COUNT=COUNT+1 G:COUNT>ZOUT QUIT  S NAME=$G(^FH(119.73,COUNT,0)),NAME=$P(NAME,"^") G:$D(^FH(119.73,COUNT,"I")) Q3 G:'$D(^FH(119.73,COUNT,0)) Q3
"RTN","FHMADM4",38,0)
 ;W @IOF
"RTN","FHMADM4",39,0)
 D HDR
"RTN","FHMADM4",40,0)
 D Q4
"RTN","FHMADM4",41,0)
 I ZCO'="Y" I CONUM>0 G Q3
"RTN","FHMADM4",42,0)
 I ZCO="Y" G Q3
"RTN","FHMADM4",43,0)
 Q
"RTN","FHMADM4",44,0)
 ;
"RTN","FHMADM4",45,0)
QUIT ;
"RTN","FHMADM4",46,0)
 ;End of routine drivers
"RTN","FHMADM4",47,0)
 ;W @IOF
"RTN","FHMADM4",48,0)
 S NAME="Total all Communications Offices "
"RTN","FHMADM4",49,0)
 D HDR
"RTN","FHMADM4",50,0)
 D FTOTALS
"RTN","FHMADM4",51,0)
 D LN
"RTN","FHMADM4",52,0)
 D LN
"RTN","FHMADM4",53,0)
 Q
"RTN","FHMADM4",54,0)
Q4 ;
"RTN","FHMADM4",55,0)
 ;Get detail information for Communciation Office, Start/End dates, etc.
"RTN","FHMADM4",56,0)
 F K=1:1:23 S S(K)=0
"RTN","FHMADM4",57,0)
 S D1=SDT,(ND,FHTOT,TO1,TOT,SFHTOT,MAN)=0 F L1=0:0 D N1 S X1=D1,X2=1 D C^%DTC Q:X>EDT  S D1=X,DOW=DOW+1 S:DOW=8 DOW=1
"RTN","FHMADM4",58,0)
 D LN G:ND>62 Q2
"RTN","FHMADM4",59,0)
 W !?7,"Total",?15 F K=1:1:5,20,21,6:1:10,22,11:1:19,23 S X=$P(SIZ," ",K),SS(K)=SS(K)+S(K) W $J(S(K),$E(X,1)+1,$E(X,2))
"RTN","FHMADM4",60,0)
 ;
"RTN","FHMADM4",61,0)
Q2 ;Print Averages
"RTN","FHMADM4",62,0)
 I ND W !?7,"Avg.",?15 F K=1:1:5,20,21,6:1:10,22,11:1:19,23 S X=$P(SIZ," ",K) W $J(S(K)/ND,$E(X,1)+1,$E(X,2))
"RTN","FHMADM4",63,0)
 I S(22) W !?7,"% Paid",?68 F K=8,9,10,22,11:1:19,23 S X=$P(SIZ," ",K) W $J(S(K)/S(22)*100,$E(X,1)+1,0)
"RTN","FHMADM4",64,0)
 I TOT W !!?7,"Adjustment for Unscheduled and Intermittent",!!?7,"UNS/INT Total " S TOT=TOT/8 W $J(TOT,5,1)," FTEE",!?7,"Adjusted Measured FTEE " S TOT=TOT+TO1 W $J(TOT,6,1) ;I ND W !?7,"Avg Measured FTEE       ",$J(TOT/ND,5,1)
"RTN","FHMADM4",65,0)
 I FHTOT S MAN=S(22)*60 W !!?7,"Man Minutes/Meal:    ",$J(MAN/FHTOT,0,0) S SFHTOT=SFHTOT+FHTOT,SMAN=SMAN+MAN
"RTN","FHMADM4",66,0)
 W ! Q
"RTN","FHMADM4",67,0)
 ;
"RTN","FHMADM4",68,0)
FTOTALS ;Print Final Totals
"RTN","FHMADM4",69,0)
 ;
"RTN","FHMADM4",70,0)
 W !?6,"All Total",?13 F K=1:1:5,20,21,6:1:10,22,11:1:19,23 S X=$P(SIZ," ",K) W $J(SS(K),$E(X,1)+1,$E(X,2))
"RTN","FHMADM4",71,0)
 ;
"RTN","FHMADM4",72,0)
 ;I ND W !?6,"All Avg.",?15 F K=1:1:5,20,21,6:1:10,22,11:1:19,23 S X=$P(SIZ," ",K) W $J(SS(K)/SSND,$E(X,1)+1,$E(X,2))
"RTN","FHMADM4",73,0)
 I SS(22) W !?6,"All % Paid",?68 F K=8,9,10,22,11:1:19,23 S X=$P(SIZ," ",K) W $J(SS(K)/SS(22)*100,$E(X,1)+1,0)
"RTN","FHMADM4",74,0)
 I SSTOT W !!?6,"All Adjustment for Unscheduled and Intermittent",!!?6,"All UNS/INT Total " S SSTOT=SSTOT/8 W $J(TOT,5,1)," FTEE",!?6,"All Adjusted Measured FTEE "
"RTN","FHMADM4",75,0)
 S SSTOT=SSTOT+SSTO1 W $J(SSTOT,6,1) ;I ND W !?6,"All Avg Measured FTEE       ",$J(SSTOT/ND,5,1)
"RTN","FHMADM4",76,0)
 I SFHTOT S SMAN=SS(22)*60 W !!?6,"Man Minutes/Meal:    ",$J(SMAN/SFHTOT,0,0)
"RTN","FHMADM4",77,0)
 W ! Q
"RTN","FHMADM4",78,0)
 ;
"RTN","FHMADM4",79,0)
HDR ;Print page headers
"RTN","FHMADM4",80,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?4,HDT,?44,"S T A F F I N G   D A T A   W O R K S H E E T",?122,"Page ",PG
"RTN","FHMADM4",81,0)
 W !!,?1,NAME
"RTN","FHMADM4",82,0)
 W !!?(132-$L(DTE)\2),DTE
"RTN","FHMADM4",83,0)
 W !!?15,"| DAILY| CLIN|ADMIN| SUPP| SUPV| MEAS| POT | OFF |WOP| OT|UNS|INT| PAID|COP| AL| SL|OTH|LND|CMP|TRN|VOL|BOR|TOTAL"
"RTN","FHMADM4",84,0)
 W !?15,"|  FTEE| FTEE| FTEE| FTEE| FTEE| FTEE| HRS | HRS |HRS|HRS|HRS|HRS| HRS |HRS|HRS|HRS|HRS|HRS|HRS|HRS|HRS|HRS| HRS"
"RTN","FHMADM4",85,0)
LN W !?4,"----------------------------------------------------------------------------------------------------------------------------" Q
"RTN","FHMADM4",86,0)
 ;
"RTN","FHMADM4",87,0)
N1 ;Get specific records
"RTN","FHMADM4",88,0)
 I ZCO'="Y" F CONUM=1:1  Q:CONUM>ZOUT  S Y3=$G(^FH(117.1,D1,1,CONUM,0)),Y5=$P(Y3,"^"),Y4=$P(Y3,"^",2,99)  Q:COXX=Y5
"RTN","FHMADM4",89,0)
 I ZCO="Y" F CONUM=1:1  Q:CONUM>ZOUT  S Y3=$G(^FH(117.1,D1,1,CONUM,0)),Y5=$P(Y3,"^"),Y4=$P(Y3,"^",2,99)  Q:COUNT=Y5
"RTN","FHMADM4",90,0)
 ;
"RTN","FHMADM4",91,0)
 S ND=ND+1,SSND=SSND+1
"RTN","FHMADM4",92,0)
 S DTP=D1 D DTP^FH D:$Y>(IOSL-8) HDR
"RTN","FHMADM4",93,0)
 K N F L=1:1:20 S N(L)=$P(Y4,"^",L)
"RTN","FHMADM4",94,0)
 S N(20)=N(1)-N(2)-N(3)-N(4)-N(5),N(21)=N(20)*8
"RTN","FHMADM4",95,0)
 S N(22)=N(21)-N(6)-N(7)+N(8)+N(9)+N(10),N(23)=N(22)-N(11)-N(12)-N(13)-N(14)-N(15)+N(16)+N(17)+N(18)+N(19),TOT=TOT+N(9)+N(10),TO1=TO1+N(20),SSTOT=SSTOT+TOT,SSTO1=SSTO1+TO1
"RTN","FHMADM4",96,0)
 W !?4,$P("Sun Mon Tue Wed Thu Fri Sat"," ",DOW)," ",$E(DTP,1,6)," "
"RTN","FHMADM4",97,0)
 F K=1:1:5,20,21,6:1:10,22,11:1:19,23 S S(K)=S(K)+N(K),X=$P(SIZ," ",K),N(K)=$S('N(K):$J("",$E(X,1)),1:$J(N(K),$E(X,1),$E(X,2))) W "|",N(K)
"RTN","FHMADM4",98,0)
 D M1
"RTN","FHMADM4",99,0)
 Q
"RTN","FHMADM4",100,0)
 ;
"RTN","FHMADM4",101,0)
M1 ; Get total Meals
"RTN","FHMADM4",102,0)
 ; S Y1=$G(^FH(117,D1,0)) Q:Y1=""  I '$D(^FH(117,D1,1)) Q  S Y2=$G(^FH(117,D1,1)) Q
"RTN","FHMADM4",103,0)
 ;
"RTN","FHMADM4",104,0)
 ;I ZCO'="Y" F CONUM=1:1  Q:CONUM>ZOUT  S Y1=$G(^FH(117,D1,2,CONUM,1)) S Y0=$G(^FH(117,D1,2,CONUM,0)),Y2=$P(Y0,"^",2,99) Q:COXX=CONUM 
"RTN","FHMADM4",105,0)
 ;BREAK  I ZCO="Y" F CONUM=1:1 Q:CONUM>ZOUT  S Y1=$G(^FH(117,D1,2,CONUM,1)) Q:Y1=""  S Y0=$G(^FH(117,D1,2,CONUM,0)),Y6=$P(Y0,U,1),Y2=$P(Y0,U,2,99) Q:COUNT=CONUM
"RTN","FHMADM4",106,0)
 ;
"RTN","FHMADM4",107,0)
 ;S Y1=$G(^FH(117,D1,0)) Q:Y1=""  S Y2=$G(^FH(117,D1,1))
"RTN","FHMADM4",108,0)
 Q:$G(^FH(117,D1,2,0))=""  S Y1=$G(^FH(117,D1,2,CONUM,1)),Y2=$G(^FH(117,D1,2,CONUM,0))
"RTN","FHMADM4",109,0)
 K M S K=0 F L=1,2,4,5,7,8 S K=K+1,M(L)=$P(Y1,"^",K)
"RTN","FHMADM4",110,0)
 S K=10 F L=2:3:17 S K=K+1,M(K)=$P(Y2,"^",L)+$P(Y2,"^",L+1)+$P(Y2,"^",L+2)
"RTN","FHMADM4",111,0)
 S M(3)=M(1)-M(2)*3,M(6)=M(4)-M(5)*3,M(9)=M(7)-M(8)*3
"RTN","FHMADM4",112,0)
 S M(10)=M(3)+M(6)+M(9)
"RTN","FHMADM4",113,0)
 S M(16)=M(14)+M(15)+M(16),M(13)=M(12)+M(13),M(17)=M(11)+M(13)+M(16),M(18)=M(10)+M(17)
"RTN","FHMADM4",114,0)
 S FHTOT=FHTOT+M(18) Q
"RTN","FHMADM4",115,0)
 ;
"RTN","FHMADM4",116,0)
N2 ;Get Communications Offices
"RTN","FHMADM4",117,0)
 S DIC=119.73,DIC(0)="AEQ",DIC("A")="Select Communication Offices: "
"RTN","FHMADM4",118,0)
 D ^DIC I (Y=-1)&(CO="") Q
"RTN","FHMADM4",119,0)
 I Y=-1 G PRINT Q
"RTN","FHMADM4",120,0)
 S CON=$P(Y,"^",1),CO=CON_"^"_CO,CONAM=$P(Y,"^",2),CONAME=CONAM_"^"_CONAME,CONUMX=$L(CO,"^") G N2
"RTN","FHMADM4",121,0)
 I Y=-1 K DIC Q
"RTN","FHMADM4",122,0)
 Q
"RTN","FHMADM4",123,0)
 ;
"RTN","FHMADM4",124,0)
KIL G KILL^XUSCLEAN
"RTN","FHMASE")
0^97^B21014606
"RTN","FHMASE",1,0)
FHMASE ; HISC/AAC - Multidivisional Dietetic Encounters ;10/14/03  13:17
"RTN","FHMASE",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMASE",3,0)
EN1 ; Enter/Edit Encounter Types
"RTN","FHMASE",4,0)
 S (DIC,DIE)="^FH(115.6,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=115.6 W ! D ^DIC K DIC,DLAYGO G KIL:"^"[X!$D(DTOUT),EN1:Y<1
"RTN","FHMASE",5,0)
 S DA=+Y,DR=$S(DA=1:2,DA=2:"2;3",1:".01;1:4;10;5:6;I X'=""Y"" S Y=99;7;8;99") S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=115.6 D ^DIE,KIL G EN1
"RTN","FHMASE",6,0)
 ;
"RTN","FHMASE",7,0)
EN2 ; List Encounter Types
"RTN","FHMASE",8,0)
 W ! S L=0,DIC="^FH(115.6,",FLDS=".01,2,3,4,10,5,6,7,8,99",BY=".01"
"RTN","FHMASE",9,0)
 S (FR,TO)="",DHD="ENCOUNTER TYPES" D EN1^DIP,RSET Q
"RTN","FHMASE",10,0)
 ;
"RTN","FHMASE",11,0)
EN3 ; Enter Dietetic Encounter
"RTN","FHMASE",12,0)
 W ! K DIR S FHN=0,DIR(0)="YAO",DIR("A")="Enter a NEW Encounter (Y/N)? " D ^DIR G:$D(DIROUT)!($D(DIRUT)) KIL K DIR,DIROUT,DIRUT
"RTN","FHMASE",13,0)
 I 'Y S FHN=1 G EN4
"RTN","FHMASE",14,0)
 ;
"RTN","FHMASE",15,0)
EN30 ; Enter/Edit a Encounter
"RTN","FHMASE",16,0)
 D EN31 G:Y<1 KIL G EN3
"RTN","FHMASE",17,0)
 ;
"RTN","FHMASE",18,0)
EN31 ; Enter a Encounter
"RTN","FHMASE",19,0)
 S FHN=0 K %DT S %DT="AETPX",%DT("A")="DATE/TIME OF ENCOUNTER: ",%DT("B")="TODAY",%DT(0)="-NOW" W ! D ^%DT K %DT S:$D(DTOUT) Y=0 Q:Y<1  S DTE=Y
"RTN","FHMASE",20,0)
 K DIC,DD,DO S DIC="^FHEN(",DIC(0)="L",DIC("DR")="1////^S X=DTE",DLAYGO=115.7
"RTN","FHMASE",21,0)
A L +^FHEN(0) S DA=$P(^FHEN(0),"^",3)+1 I $D(^FHEN(DA)) S $P(^FHEN(0),"^",3)=DA L -^FHEN(0) G A
"RTN","FHMASE",22,0)
 S (X,DINUM)=DA D FILE^DICN L -^FHEN(0) S ASE=+Y,FHX4="" K DIC,DLAYGO,DINUM
"RTN","FHMASE",23,0)
 D EDIT Q
"RTN","FHMASE",24,0)
 ;
"RTN","FHMASE",25,0)
EN4 ; Process Edit Encounter
"RTN","FHMASE",26,0)
 ;
"RTN","FHMASE",27,0)
 W ! K ^TMP($J,"ECTR"),%DT S %DT="AEPX",%DT("A")="Enter Date of Encounter you want to edit: " D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 KIL S X1=Y,(TIM,X1)=X1-.0001,(EDT,X2)=Y\1+.3,CTR=0
"RTN","FHMASE",28,0)
A0 W !! K DIR S DIR(0)="SO^C:CLINICIAN;P:PATIENT",DIR("A")="CHOOSE CLINICIAN or PATIENT" D ^DIR K DIR G:$D(DIROUT)!($D(DIRUT)) KIL I Y?1"P" D PAT G:'DFN KIL D PR G:Y<1 KIL D ASK G KIL:Y<1,EN4
"RTN","FHMASE",29,0)
A1 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="Select CLINICIAN: " W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),A1:Y<1 S NAM=+Y D CLIN,PR G:Y<1 KIL D ASK G KIL:Y<1,EN4
"RTN","FHMASE",30,0)
PR W ! S K1="" F CTR=0:0 S CTR=$O(^TMP($J,"ECTR",CTR)) Q:CTR<1  S X=$G(^(CTR,0)),K1=CTR W !,CTR,"  " S Y=$P(X,"^",2) X ^DD("DD") W Y,"  ",$P(X,"^",3) K Y
"RTN","FHMASE",31,0)
 I 'K1 W !?5,"No encounter on file on this date" S Y=0 Q
"RTN","FHMASE",32,0)
 W !!,"Select number you want: " R X:DTIME I '$T!("^"[X) S Y=0 Q
"RTN","FHMASE",33,0)
 I X'?1.N!(X<1)!(X>K1) W *7,!!,"Select only a number no greater than ",K1," or press ""^"" or a return to exit." G PR
"RTN","FHMASE",34,0)
 S ASE=$P($G(^TMP($J,"ECTR",+X,0)),"^",1),FHX4=$G(^FHEN(ASE,0))
"RTN","FHMASE",35,0)
 S FHCLK=$P($G(^TMP($J,"ECTR",+X,0)),"^",4) W !
"RTN","FHMASE",36,0)
 ;
"RTN","FHMASE",37,0)
EDIT N FHX1 S DA=ASE K DIC,DIE S DIE="^FHEN(",DR="[FHMASE]" D ^DIE K DIC,DIE,DR
"RTN","FHMASE",38,0)
 S DA=ASE,X=^FHEN(DA,0)
"RTN","FHMASE",39,0)
 I '$P(X,"^",3)!('$P(X,"^",4)) S DIK="^FHEN(" D ^DIK W *7,!,"<encounter deleted>" K DIK,DA
"RTN","FHMASE",40,0)
 S Y=1 Q
"RTN","FHMASE",41,0)
 ;
"RTN","FHMASE",42,0)
PAT ; Get Patient
"RTN","FHMASE",43,0)
 S ALL=1 D ^FHDPA Q:'DFN
"RTN","FHMASE",44,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"Patient has expired." G PAT
"RTN","FHMASE",45,0)
 I '$D(^FHEN("AP",DFN)) W !!,"No Encounter on file for this patient." G PAT
"RTN","FHMASE",46,0)
 F DTE=TIM:0 S DTE=$O(^FHEN("AP",DFN,DTE)) Q:DTE<1!(DTE>EDT)  F ASE=0:0 S ASE=$O(^FHEN("AP",DFN,DTE,ASE)) Q:ASE<1  S Y=$P($G(^FHEN(ASE,0)),"^",4) I Y>2 D
"RTN","FHMASE",47,0)
 .S CTR=CTR+1,^TMP($J,"ECTR",CTR,0)=ASE_"^"_DTE_"^"_$P($G(^FH(115.6,+Y,0)),"^",1)_"^"_$P($G(^FHEN(ASE,0)),"^",13) Q
"RTN","FHMASE",48,0)
 Q
"RTN","FHMASE",49,0)
CLIN ; Get Clinician
"RTN","FHMASE",50,0)
 S X1=$O(^FHEN("AT",X1)) Q:X1<1!(X1>X2)
"RTN","FHMASE",51,0)
 S ASE=0
"RTN","FHMASE",52,0)
 ;
"RTN","FHMASE",53,0)
R1 S ASE=$O(^FHEN("AT",X1,ASE)) G:ASE="" CLIN
"RTN","FHMASE",54,0)
 S Y=$G(^FHEN(ASE,0)),E1=$P(Y,"^",3) I $P(Y,"^",4)>2,E1,E1=NAM S CTR=CTR+1,^TMP($J,"ECTR",CTR,0)=ASE_"^"_$P(Y,"^",2)_"^"_$P($G(^FH(115.6,+$P(Y,"^",4),0)),"^",1)_"^"_$P(Y,"^",13),DTE=$P(Y,"^",2)
"RTN","FHMASE",55,0)
 G R1
"RTN","FHMASE",56,0)
 ;
"RTN","FHMASE",57,0)
ASK R !!,"Is this correct? Y// ",YN:DTIME I '$T!(YN["^") S Y=0 Q
"RTN","FHMASE",58,0)
 S:YN="" YN="Y" S X=YN D TR^FH S YN=X
"RTN","FHMASE",59,0)
 I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G ASK
"RTN","FHMASE",60,0)
 Q:YN?1"Y".E
"RTN","FHMASE",61,0)
 I FHCLK'=DUZ W !!,"You can ONLY DELETE an encounter that is entered by you.",! G EDIT
"RTN","FHMASE",62,0)
 ;
"RTN","FHMASE",63,0)
E5 R !,"Want to delete encounter? N// ",YN:DTIME I '$T!(YN["^") S Y=0 Q
"RTN","FHMASE",64,0)
 S:YN="" YN="N" S X=YN D TR^FH S YN=X
"RTN","FHMASE",65,0)
 I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G E5
"RTN","FHMASE",66,0)
 Q:YN?1"N".E
"RTN","FHMASE",67,0)
 S DIK="^FHEN(",DA=ASE D ^DIK W *7,!,"<encounter deleted>" K DA,DIK S Y=1 Q
"RTN","FHMASE",68,0)
 ;
"RTN","FHMASE",69,0)
CNT S FHX3=FHX3+$P($G(^FHEN(ASE,"P",0)),"^",4)
"RTN","FHMASE",70,0)
 S ST="" F LP=0:0 S LP=$O(^FHEN(ASE,"P",LP)) Q:LP<1  S ST=$G(^(LP,0)) I $P(ST,"^",3)'<1 S FHX3=FHX3+$P(ST,"^",3)
"RTN","FHMASE",71,0)
 Q
"RTN","FHMASE",72,0)
 ;
"RTN","FHMASE",73,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHMASE",74,0)
 ;
"RTN","FHMASE",75,0)
KIL K ^TMP($J,"ECTR") G KILL^XUSCLEAN
"RTN","FHMASE",76,0)
 ;
"RTN","FHMASE1")
0^98^B10848521
"RTN","FHMASE1",1,0)
FHMASE1 ; HISC/AAC - Multidivisional Encounter Statistics ;10/14/03  11:57
"RTN","FHMASE1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMASE1",3,0)
 ;
"RTN","FHMASE1",4,0)
 ;Encounter Statistic
"RTN","FHMASE1",5,0)
 ;
"RTN","FHMASE1",6,0)
 S HEADER="S T A T I S T I C S"
"RTN","FHMASE1",7,0)
 S (Y,CO)=""
"RTN","FHMASE1",8,0)
 D COM
"RTN","FHMASE1",9,0)
 I (Y=-1)&(CO="") Q
"RTN","FHMASE1",10,0)
 D DT G:U[X KIL
"RTN","FHMASE1",11,0)
 D A0
"RTN","FHMASE1",12,0)
 Q
"RTN","FHMASE1",13,0)
 ;
"RTN","FHMASE1",14,0)
IND ;List Encounters
"RTN","FHMASE1",15,0)
 ;
"RTN","FHMASE1",16,0)
 S HEADER="V I S I T S "
"RTN","FHMASE1",17,0)
 S (Y,CO)=""
"RTN","FHMASE1",18,0)
 D COM
"RTN","FHMASE1",19,0)
 I (Y=-1)&(CO="") Q
"RTN","FHMASE1",20,0)
 D DT G:U[X KIL S FHX1=DUZ,FHX2=0
"RTN","FHMASE1",21,0)
 D F1
"RTN","FHMASE1",22,0)
 Q
"RTN","FHMASE1",23,0)
 ;
"RTN","FHMASE1",24,0)
COM ; List Encounters for a clinician
"RTN","FHMASE1",25,0)
 S (ZCO,CO,COXX,CONAME,CONAM)=""
"RTN","FHMASE1",26,0)
 R !!,"Print report for all Communications Offices Y or N: ",ZCO:DTIME W ! S ZCO=$TR(ZCO,"y","Y")
"RTN","FHMASE1",27,0)
 I ZCO'="Y" D N2 Q
"RTN","FHMASE1",28,0)
 Q 
"RTN","FHMASE1",29,0)
 ;
"RTN","FHMASE1",30,0)
A0 R !!,"Statistics for ALL Clinicians? Y// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G A0
"RTN","FHMASE1",31,0)
 I X?1"Y".E G F0
"RTN","FHMASE1",32,0)
 ;
"RTN","FHMASE1",33,0)
A1 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="Select CLINICIAN: " W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),A1:Y<1 S FHX1=+Y,FHX2=1 G F1
"RTN","FHMASE1",34,0)
 ;
"RTN","FHMASE1",35,0)
F0 R !!,"Break-down by Clinician? Y// ",X:DTIME G:'$T!(X=U) KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G F0
"RTN","FHMASE1",36,0)
 S FHX1=X?1"Y".E-1,FHX2=0
"RTN","FHMASE1",37,0)
 ;
"RTN","FHMASE1",38,0)
F1 I FHX1'<0 R !!,"List Individual Patient Encounters? N// ",X:DTIME G:'$T!(X=U) KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G F1
"RTN","FHMASE1",39,0)
 S:FHX1'<0 FHX2=X?1"Y".E
"RTN","FHMASE1",40,0)
 ;
"RTN","FHMASE1",41,0)
F2 W !!,"The report requires a 132 column printer.",!
"RTN","FHMASE1",42,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHMASE1",43,0)
 I $D(IO("Q")) S FHPGM="Q1^FHMASE1A",FHLST="HEADER^EDT^SDT^FHX1^FHX2^ZCO^NAME^CONUMX^CO^CONAME" D EN2^FH Q 
"RTN","FHMASE1",44,0)
 U IO D Q1^FHMASE1A D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHMASE1",45,0)
 ;
"RTN","FHMASE1",46,0)
KIL ;
"RTN","FHMASE1",47,0)
 K ^TMP($J) G KILL^XUSCLEAN Q
"RTN","FHMASE1",48,0)
 Q
"RTN","FHMASE1",49,0)
 ;
"RTN","FHMASE1",50,0)
DT ; Get From/To Dates
"RTN","FHMASE1",51,0)
D1 S %DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D1 S SDT=+Y
"RTN","FHMASE1",52,0)
 I SDT>DT W *7,"  [Cannot Start after Today!] " G D1
"RTN","FHMASE1",53,0)
 ;
"RTN","FHMASE1",54,0)
D2 S %DT="AEPX",%DT("A")=" Ending Date: " D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D2 S EDT=+Y
"RTN","FHMASE1",55,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHMASE1",56,0)
 I EDT>DT W *7,"  [Must Not enter date greater than Today!] " G D1
"RTN","FHMASE1",57,0)
 Q
"RTN","FHMASE1",58,0)
N2 ;Get Communications Office
"RTN","FHMASE1",59,0)
 S DIC=119.73,DIC(0)="AEQ",DIC("A")="Select Communication Offices: "
"RTN","FHMASE1",60,0)
 D ^DIC I (Y=-1)&(CO="") Q
"RTN","FHMASE1",61,0)
 I Y=-1 Q
"RTN","FHMASE1",62,0)
 S CON=$P(Y,"^",1),CO=CON_"^"_CO,CONAM=$P(Y,"^",2),CONAME=CONAM_"^"_CONAME S CONUMX=$L(CO,"^") G N2
"RTN","FHMASE1",63,0)
 I Y=-1 K DIC Q
"RTN","FHMASE1",64,0)
 Q
"RTN","FHMASE1",65,0)
QUIT ;
"RTN","FHMASE1",66,0)
 Q
"RTN","FHMASE1A")
0^99^B41020024
"RTN","FHMASE1A",1,0)
FHMASE1A ; HISC/AAC - Multidiv Encounter Stats (cont.) ;10/14/03  13:13 
"RTN","FHMASE1A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMASE1A",3,0)
Q1 ; Calculate the Encounters
"RTN","FHMASE1A",4,0)
 K ^TMP($J)
"RTN","FHMASE1A",5,0)
 S YX1=SDT\1-.0001,YX2=EDT\1+.3
"RTN","FHMASE1A",6,0)
 S TIT=";"_$P(^DD(115.6,10,0),"^",3)
"RTN","FHMASE1A",7,0)
 S D1XX="FHMASE1A"
"RTN","FHMASE1A",8,0)
 S XX1=YX1
"RTN","FHMASE1A",9,0)
 S (XXX,XX2,XX3,X3,XY,YY1)="",(COUNT,LL,L,D1F,D1CNTX,NUMBER)=0
"RTN","FHMASE1A",10,0)
 S ZZCOUNT=0 F ZZCOUNT=0:0 S ZZCOUNT=$O(^FH(119.73,ZZCOUNT)) Q:ZZCOUNT'>0  S ZOUT=ZZCOUNT
"RTN","FHMASE1A",11,0)
 F K=1:1:11 S II(K)=0,JJ(K)=0
"RTN","FHMASE1A",12,0)
 ;
"RTN","FHMASE1A",13,0)
Q2 ;Get Communications Offices
"RTN","FHMASE1A",14,0)
 D DEL S (SS1,DD1,DD2,DD3,DD4,E1,COXX1,D1X,DIF,D1CNTX)=0,(NX,WW1)=""
"RTN","FHMASE1A",15,0)
 I ZCO'="Y" S CONUMX=CONUMX-1 G:CONUMX<1 ALLTOT S COXX=$P(CO,"^",CONUMX),NAME=$P(CONAME,"^",CONUMX)
"RTN","FHMASE1A",16,0)
 I ZCO="Y" S COUNT=COUNT+1 G:COUNT>ZOUT ALLTOT S REC=$G(^FH(119.73,COUNT,0)),NAME=$P(REC,"^",1)
"RTN","FHMASE1A",17,0)
 ;
"RTN","FHMASE1A",18,0)
R2 ;Find Patient records within parameters
"RTN","FHMASE1A",19,0)
 I ZCO'="Y" G:$D(^FH(119.73,COXX,"I")) Q2 G:'$D(^FH(119.73,COXX,0)) Q2
"RTN","FHMASE1A",20,0)
 I ZCO="Y" G:$D(^FH(119.73,COUNT,"I")) Q2 G:'$D(^FH(119.73,COUNT,0)) Q2
"RTN","FHMASE1A",21,0)
 ;
"RTN","FHMASE1A",22,0)
 S YX1=SDT\1-.0001,YX2=EDT\1+.3,XX1=YX1
"RTN","FHMASE1A",23,0)
 ;
"RTN","FHMASE1A",24,0)
R1 F  S XX1=$O(^FHEN("AT",XX1)) G:XX1'>0 P1 G:XX1>YX2 P1  D 
"RTN","FHMASE1A",25,0)
R11 .S XXX=XX1 F E1=0:0 S E1=$O(^FHEN("AT",XXX,E1)) Q:E1'>0  D 
"RTN","FHMASE1A",26,0)
 ..I XX1>YX2 Q
"RTN","FHMASE1A",27,0)
 ..S XX2=$G(^FHEN(E1,0))
"RTN","FHMASE1A",28,0)
 ..I ZCO'="Y" S XY=$P(XX2,"^",6) Q:COXX'=XY
"RTN","FHMASE1A",29,0)
 ..I ZCO="Y" S XY=$P(XX2,"^",6) Q:COUNT'=XY
"RTN","FHMASE1A",30,0)
 ..S Y=$G(^FHEN(E1,0))
"RTN","FHMASE1A",31,0)
 ..S D1=$P(Y,"^",3) S D2=$P(Y,"^",4),D4=$P(Y,"^",6) Q:'D2  Q:'D4
"RTN","FHMASE1A",32,0)
 ..I FHX1>0,D1'=FHX1 Q
"RTN","FHMASE1A",33,0)
 ..I $D(^FH(119.73,D4,"I")) Q
"RTN","FHMASE1A",34,0)
 ..S D6=$P(Y,"^",7),D3=$P(Y,"^",8),D9=$P(Y,"^",9),D5=$P(Y,"^",11) D C0
"RTN","FHMASE1A",35,0)
 ..S D2=$P($G(^FH(115.6,D2,0)),"^",1,2) Q:"^"[D2
"RTN","FHMASE1A",36,0)
 ..S Z1=$P(D2,"^",2),D2=$P(D2,"^",1)
"RTN","FHMASE1A",37,0)
 ..S D8=$F(TIT,";"_Z1_":") Q:D8<0
"RTN","FHMASE1A",38,0)
 ..S:D6="F" D2=D2_"~F"
"RTN","FHMASE1A",39,0)
 ..S S1=$G(^TMP($J,0,D8,D2,D4)) D UPD S ^TMP($J,0,D8,D2,D4)=S1
"RTN","FHMASE1A",40,0)
 ..S S1=$G(^TMP($J,D1,D8,D2,D4)) D UPD S ^TMP($J,D1,D8,D2,D4)=S1 S DD1=D1,DD8=D8,DD2=D2,DD4=D4 Q:'FHX2
"RTN","FHMASE1A",41,0)
 ..S (DTP,W1)=$P(Y,"^",2)\1 D DTP^FH I '$D(^TMP($J,D1,D8,D2,D4,W1)) S ^TMP($J,D1,D8,D2,D4,W1)=DTP,^(W1,0)=0 S D2=DD2,D3=DD3,D4=DD4 I '$D(^FHEN(E1,"P")) S DFN="^"_D5 D R3 Q
"RTN","FHMASE1A",42,0)
 ..F DFN=0:0 S DFN=$O(^FHEN(E1,"P",DFN)) Q:DFN<1  D R3
"RTN","FHMASE1A",43,0)
 ..Q
"RTN","FHMASE1A",44,0)
 .Q
"RTN","FHMASE1A",45,0)
 Q
"RTN","FHMASE1A",46,0)
 G R11
"RTN","FHMASE1A",47,0)
 ;
"RTN","FHMASE1A",48,0)
R3 ;
"RTN","FHMASE1A",49,0)
 S L=^TMP($J,D1,D8,D2,D4,W1,0)+1,^(0)=L S WW1=W1
"RTN","FHMASE1A",50,0)
 S ^TMP($J,D1,D8,D2,D4,W1,L)=DFN Q
"RTN","FHMASE1A",51,0)
 ;
"RTN","FHMASE1A",52,0)
R4 ;
"RTN","FHMASE1A",53,0)
 S DFN="^"_D5 D R3 G R2
"RTN","FHMASE1A",54,0)
 ;
"RTN","FHMASE1A",55,0)
C0 ;
"RTN","FHMASE1A",56,0)
 S C(8)=$P(Y,"^",10),(C(1),C(2),C(3),C(4),C(5),C(6),C(7))=0
"RTN","FHMASE1A",57,0)
 F DFN=0:0 S DFN=$O(^FHEN(E1,"P",DFN)) Q:DFN<1  S X=^(DFN,0) D C1
"RTN","FHMASE1A",58,0)
 S C(7)=C(8)-C(1)-C(2)-C(4)-C(5) S:C(7)<1 C(7)=0
"RTN","FHMASE1A",59,0)
 I D9'="I" S TM=C(1)+C(4)+C(7) I TM S TM=D3/TM,C(3)=TM*C(1),C(6)=TM*C(4),C(3)=$J(C(3),0,1),C(6)=$J(C(6),0,1) Q
"RTN","FHMASE1A",60,0)
 Q
"RTN","FHMASE1A",61,0)
 ;
"RTN","FHMASE1A",62,0)
C1 ;
"RTN","FHMASE1A",63,0)
 S Z=$P(X,"^",2) G:Z<1 C2 S Z=$P($G(^SC(+Z,0)),"^",3) G:Z'="W" C2
"RTN","FHMASE1A",64,0)
 S C(1)=C(1)+1,C(2)=C(2)+$P(X,"^",3) S:D9="I" C(3)=C(3)+D3 Q
"RTN","FHMASE1A",65,0)
 ;
"RTN","FHMASE1A",66,0)
C2 ;
"RTN","FHMASE1A",67,0)
 S C(4)=C(4)+1,C(5)=C(5)+$P(X,"^",3) S:D9="I" C(6)=C(6)+D3 Q
"RTN","FHMASE1A",68,0)
 ;
"RTN","FHMASE1A",69,0)
UPD ;Update S1 record
"RTN","FHMASE1A",70,0)
 S $P(S1,"^",1)=$P(S1,"^",1)+1,$P(S1,"^",2)=$P(S1,"^",2)+D3
"RTN","FHMASE1A",71,0)
 F K=1:1:8 I C(K) S $P(S1,"^",K+2)=$P(S1,"^",K+2)+C(K)
"RTN","FHMASE1A",72,0)
 Q
"RTN","FHMASE1A",73,0)
 ;
"RTN","FHMASE1A",74,0)
P1 ;load data by paramters/totals for each Communication Office
"RTN","FHMASE1A",75,0)
 S DTP=SDT\1 D DTP^FH S DTE=DTP_" to " S DTP=EDT\1 D DTP^FH S DTE=DTE_DTP,PG=0 D HEAD I FHX1>0 S NAM="" D D0
"RTN","FHMASE1A",76,0)
 S (NX,D8)="",CT=0 F K=1:1:11 S (I(K),J(K))=0
"RTN","FHMASE1A",77,0)
 ;
"RTN","FHMASE1A",78,0)
 F KK=0:0 S D8=$O(^TMP($J,0,D8)) Q:D8=""  S CT=CT+1 D:CT'=1 STOT W ! D PR F K=0:0 S NX=$O(^TMP($J,0,D8,NX)) Q:NX=""  S X1=$P(NX,"~",1)_$S($P(NX,"~",2)="F":"  (F)",1:"") Q:X1=""  S S1=$G(^TMP($J,0,D8,NX,D4)) D PP
"RTN","FHMASE1A",79,0)
 D STOT W ! S X=" T O T A L" D PX D TOT W ! F K=1:1:11 S (I(K),J(K))=0 I FHX1<0 G Q2 D HEAD I FHX2<0 D Q2
"RTN","FHMASE1A",80,0)
 ;
"RTN","FHMASE1A",81,0)
P2 ;load data for each clinician
"RTN","FHMASE1A",82,0)
 D:$Y>55 HEAD S (D8,NAM)="",CT=0
"RTN","FHMASE1A",83,0)
 S D8=0
"RTN","FHMASE1A",84,0)
 F D1=0:0 S D1=$O(^TMP($J,D1)) G:D1="" P2A S CT=CT+1 D:CT'=1 STOT W ! F D8=0:0 S D8=$O(^TMP($J,D1,D8)) Q:D8'>0  D PR,D0 S D2="" F L1=0:0 S D2=$O(^TMP($J,D1,D8,D2)) Q:D2=""  S S1=$G(^TMP($J,D1,D8,D2,D4)) Q:S1=""   D SETX1,PP I FHX2 D P3
"RTN","FHMASE1A",85,0)
 D STOT G P2
"RTN","FHMASE1A",86,0)
P2A D STOT W ! S X=" TOTAL ENCOUNTERS" D TOT W @IOF D DEL S X1=SDT G Q2
"RTN","FHMASE1A",87,0)
 ;
"RTN","FHMASE1A",88,0)
SETX1 ;
"RTN","FHMASE1A",89,0)
 S X1=$P(D2,"~",1)_$S($P(D2,"~",2)="F":"  (F)",1:"")
"RTN","FHMASE1A",90,0)
 Q
"RTN","FHMASE1A",91,0)
D0 ;Get Clinician Name
"RTN","FHMASE1A",92,0)
 I FHX1>0 S D1=FHX1
"RTN","FHMASE1A",93,0)
 S NAM=$P(^VA(200,D1,0),"^",1),NAM=$E(NAM,1,30) W !,NAM Q
"RTN","FHMASE1A",94,0)
 ;
"RTN","FHMASE1A",95,0)
P3 ;
"RTN","FHMASE1A",96,0)
 S DTP=""
"RTN","FHMASE1A",97,0)
 ;
"RTN","FHMASE1A",98,0)
P4 ;
"RTN","FHMASE1A",99,0)
 S DTP=$O(^TMP($J,D1,D8,D2,D4,DTP)) Q:DTP=""  S S1=^(DTP),W1=0
"RTN","FHMASE1A",100,0)
 ;
"RTN","FHMASE1A",101,0)
P5 ;
"RTN","FHMASE1A",102,0)
 S W1=$O(^TMP($J,D1,D8,D2,D4,DTP,W1)) G:W1="" P4 S DFN=^(W1) G:DFN<1 P6
"RTN","FHMASE1A",103,0)
 S Y=$G(^DPT(DFN,0)) G:Y="" P5 D PID^FHDPA
"RTN","FHMASE1A",104,0)
 W !?7,S1,?17,BID,?26,$P(Y,"^",1) G P5
"RTN","FHMASE1A",105,0)
 ;
"RTN","FHMASE1A",106,0)
P6 ;
"RTN","FHMASE1A",107,0)
 W !?7,S1,?17,$P(DFN,"^",2) G P5
"RTN","FHMASE1A",108,0)
 ;
"RTN","FHMASE1A",109,0)
PP ;Print totals for Communications Offices
"RTN","FHMASE1A",110,0)
 D:$Y>58 HEAD W !?5,X1,?47,$J($P(S1,"^",1),6,0) S I(1)=I(1)+$P(S1,"^",1),J(1)=J(1)+$P(S1,"^",1)  ;)
"RTN","FHMASE1A",111,0)
 F K=1:1:6 S Z=$P(S1,"^",K+2),I(K+2)=I(K+2)+Z,J(K+2)=J(K+2)+Z W $S(K=3!(K=6):$S(Z:$J(Z,8,1),1:$J("",8)),1:$J($S(Z:Z,1:""),6))
"RTN","FHMASE1A",112,0)
 S Z=$P(S1,"^",9),I(9)=I(9)+$S(Z'<1:Z,1:0),J(9)=J(9)+$S(Z'<1:Z,1:0) W ?97,$J($S(Z'<1:Z,1:""),6)
"RTN","FHMASE1A",113,0)
 ;
"RTN","FHMASE1A",114,0)
 I Z S Z=$P(S1,"^",2)-$P(S1,"^",5)-$P(S1,"^",8),I(10)=I(10)+$S(Z'<1:Z,1:0),J(10)=J(10)+$S(Z'<1:Z,1:0)
"RTN","FHMASE1A",115,0)
 ;
"RTN","FHMASE1A",116,0)
 W $S(Z'<1:$J(Z,8,1),1:$J("",8))
"RTN","FHMASE1A",117,0)
 S Z=$P(S1,"^",10),I(11)=I(11)+Z,J(11)=J(11)+Z W ?113,$J($S(Z'<1:Z,1:""),6)
"RTN","FHMASE1A",118,0)
 I $P(S1,"^",2) W $J($P(S1,"^",2),8,1) S I(2)=I(2)+$P(S1,"^",2),J(2)=J(2)+$P(S1,"^",2)
"RTN","FHMASE1A",119,0)
 ;
"RTN","FHMASE1A",120,0)
 Q
"RTN","FHMASE1A",121,0)
 ;
"RTN","FHMASE1A",122,0)
PX ;Accumulate amount for final total
"RTN","FHMASE1A",123,0)
 S II(1)=II(1)+I(1)  ;,II(3)=II(3)+I(3),II(6)=II(6)+I(6)
"RTN","FHMASE1A",124,0)
 F K=1:1:6 S II(K+2)=II(K+2)+I(K+2) ;,II(K+2)=II(K+2)+I(K+2)
"RTN","FHMASE1A",125,0)
 S II(9)=II(9)+I(9),II(10)=II(10)+I(10),II(11)=II(11)+I(11)
"RTN","FHMASE1A",126,0)
 Q
"RTN","FHMASE1A",127,0)
 ;
"RTN","FHMASE1A",128,0)
PR ;
"RTN","FHMASE1A",129,0)
 S X=$P($E(TIT,D8,999),";",1)
"RTN","FHMASE1A",130,0)
 D:$Y>55 HEAD W !?3,X Q
"RTN","FHMASE1A",131,0)
 Q
"RTN","FHMASE1A",132,0)
 ;
"RTN","FHMASE1A",133,0)
STOT ;Print sub-totals for Communications Office and Clinician
"RTN","FHMASE1A",134,0)
 W !?5,"Subtotal",?47,$J(J(1),6) F K=1:1:6 W $S(K=3!(K=6):$S(J(K+2):$J(J(K+2),8,1),1:$J("",8)),1:$J($S(J(K+2):J(K+2),1:""),6))
"RTN","FHMASE1A",135,0)
 W ?97,$S(J(9):$J(J(9),6),1:$J("",6)),$S(J(10):$J(J(10),8,1),1:$J("",8))
"RTN","FHMASE1A",136,0)
 W ?113,$S(J(11):$J(J(11),6),1:$J("",6)),$S(J(2):$J(J(2),8,1),1:$J("",8)) W !
"RTN","FHMASE1A",137,0)
 F K=1:1:11 S J(K)=0
"RTN","FHMASE1A",138,0)
 Q
"RTN","FHMASE1A",139,0)
 ;
"RTN","FHMASE1A",140,0)
TOT ;
"RTN","FHMASE1A",141,0)
 ;Totals by Communications Offices
"RTN","FHMASE1A",142,0)
 W !?3,NAME,X,?47,$J(I(1),6) F K=1:1:6 W $S(K=3!(K=6):$S(I(K+2):$J(I(K+2),8,1),1:$J("",8)),1:$J($S(I(K+2):I(K+2),1:""),6))
"RTN","FHMASE1A",143,0)
 W ?97,$S(I(9):$J(I(9),6),1:$J("",6)),$S(I(10):$J(I(10),8,1),1:$J("",8))
"RTN","FHMASE1A",144,0)
 W ?113,$S(I(11):$J(I(11),6),1:$J("",6)),$S(I(2):$J(I(2),8,1),1:$J("",8))
"RTN","FHMASE1A",145,0)
 F K=1:1:11 S I(K)=0
"RTN","FHMASE1A",146,0)
 Q
"RTN","FHMASE1A",147,0)
 ;
"RTN","FHMASE1A",148,0)
ALLTOT ; 
"RTN","FHMASE1A",149,0)
 ;Final Totals - all Communication Offices
"RTN","FHMASE1A",150,0)
 S XS="ALL COMMUNICATIONS OFFICES " W !,XS,?47,$J(II(1),6) F K=1:1:6 W $S(K=3!(K=6):$S(II(K+2):$J(II(K+2),8,1),1:$J("",8)),1:$J($S(II(K+2):II(K+2),1:""),6))
"RTN","FHMASE1A",151,0)
 W ?97,$S(II(9):$J(I(9),6),1:$J("",6)),$S(II(10):$J(II(10),8,1),1:$J("",8))
"RTN","FHMASE1A",152,0)
 W ?113,$S(II(11):$J(II(11),6),1:$J("",6)) W $S(II(5):$J(II(5),8,1),1:$J("",6))
"RTN","FHMASE1A",153,0)
 D DEL Q
"RTN","FHMASE1A",154,0)
 ;
"RTN","FHMASE1A",155,0)
HEAD ;Print page headers
"RTN","FHMASE1A",156,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?30,"D I E T E T I C   E N C O U N T E R  ",?69,HEADER,?120,"Page ",PG
"RTN","FHMASE1A",157,0)
 W !?2,NAME,?(114-$L(DTE)\2),DTE,!?47,"Number      Inpatients         Outpatients            Others           Total"
"RTN","FHMASE1A",158,0)
 W !?56,"Pat   Col   Units   Pat   Col   Units",?98,"Persn   Units   Persn   Units",! Q
"RTN","FHMASE1A",159,0)
 ;
"RTN","FHMASE1A",160,0)
DEL ;DELETE RECORDS FROM ^TMP
"RTN","FHMASE1A",161,0)
 K ^TMP($J)
"RTN","FHMASE1A",162,0)
 W !!
"RTN","FHMASE1A",163,0)
 Q
"RTN","FHMASE1A",164,0)
Q ;
"RTN","FHMASE1A",165,0)
QUIT ;
"RTN","FHMASE1A",166,0)
 Q
"RTN","FHMMBRPT")
0^100^B17726500
"RTN","FHMMBRPT",1,0)
FHMMBRPT ;Hines OIFO/JT,RTK,AAC - Multidiv Monitor Brief ;10/10/03  11:49
"RTN","FHMMBRPT",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMMBRPT",3,0)
 ;
"RTN","FHMMBRPT",4,0)
COM ;get Communication Offices
"RTN","FHMMBRPT",5,0)
 S (ZCO,CO,CONAME,CONAM,WARD,FHCOMM,ZZOUT,ZOUT,CONUMX)="",(COXX,ALLMON,ALLADM,ALLFHPER)=0
"RTN","FHMMBRPT",6,0)
 ;S ZZOUT=$G(^FH(119.73,0)),CONUMX=$P(ZZOUT,"^",4),ZOUT=CONUMX
"RTN","FHMMBRPT",7,0)
 S ZZCOUNT=0 F ZZCOUNT=0:0 S ZZCOUNT=$O(^FH(119.73,ZZCOUNT)) Q:ZZCOUNT'>0  S ZOUT=ZZCOUNT
"RTN","FHMMBRPT",8,0)
 R !!,"Print report for all Communication Offices Y or N: ",ZCO:DTIME W ! S ZCO=$TR(ZCO,"y","Y")
"RTN","FHMMBRPT",9,0)
 I ZCO'="Y" D N2 I (Y=-1)&(CO="") Q
"RTN","FHMMBRPT",10,0)
 ;
"RTN","FHMMBRPT",11,0)
DATE ;sets date
"RTN","FHMMBRPT",12,0)
 W ! S %DT="AEPT",%DT("A")="Enter beginning date: " D ^%DT Q:Y<0
"RTN","FHMMBRPT",13,0)
 S FHSDT=Y,%DT(0)=FHSDT,%DT("A")="Enter ending date: " D ^%DT K %DT(0)
"RTN","FHMMBRPT",14,0)
 S PG=0,EX=""
"RTN","FHMMBRPT",15,0)
 I Y<0 D END Q
"RTN","FHMMBRPT",16,0)
 S FHEDT=Y
"RTN","FHMMBRPT",17,0)
 D DEV Q
"RTN","FHMMBRPT",18,0)
 ;D END
"RTN","FHMMBRPT",19,0)
 ;
"RTN","FHMMBRPT",20,0)
EN ;get admission/monitor information
"RTN","FHMMBRPT",21,0)
 I ZCO'="Y" S CONUMX=CONUMX-1 G:CONUMX=0 THEND  S COXX=$P(CO,"^",CONUMX),NAME=$P(CONAME,"^",CONUMX)
"RTN","FHMMBRPT",22,0)
 I ZCO="Y" S COXX=COXX+1 G:COXX>ZOUT THEND  S NAME=$G(^FH(119.73,COXX,0)),NAME=$P(NAME,"^")
"RTN","FHMMBRPT",23,0)
 I $D(^FH(119.73,COXX,"I"))!'$D(^FH(119.73,COXX,0)) G EN
"RTN","FHMMBRPT",24,0)
 ;
"RTN","FHMMBRPT",25,0)
 D NOW^%DTC S Y=X D DD^%DT S FHNDT=Y D PG
"RTN","FHMMBRPT",26,0)
 S ADMTOT=0,MONTOT=0
"RTN","FHMMBRPT",27,0)
 S I=FHSDT F  S I=$O(^DGPM("ATT1",I)) Q:'I!(I>FHEDT)  D
"RTN","FHMMBRPT",28,0)
 .S J=0 F  S J=$O(^DGPM("ATT1",I,J)) Q:'J!(EX=U)  S REC=$G(^DGPM(J,0)) S WARD=$P(REC,"^",6) Q:WARD=""  D COFF Q:FHCOMM=""  Q:$D(^FH(119.73,FHCOMM,"I"))  Q:FHCOMM'=COXX  D
"RTN","FHMMBRPT",29,0)
 ..S DFN=$P(^DGPM(J,0),U,3) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMBRPT",30,0)
 ..S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHMMBRPT",31,0)
 ..S Y=$P(I,".") X ^DD("DD") W !,Y,?13,$E($P($G(^DPT(DFN,0)),U,1),1,23)
"RTN","FHMMBRPT",32,0)
 ..W ?39,$E($P($G(^DPT(DFN,0)),U,9),6,9) S ADMTOT=ADMTOT+1
"RTN","FHMMBRPT",33,0)
 ..I $D(^FHPT(FHDFN,"A",J,"MO","B")) W ?48,"Yes" S MONTOT=MONTOT+1
"RTN","FHMMBRPT",34,0)
 ..S Y=$P($P($G(^FHPT(FHDFN,"A",J,0)),U,14),".",1) I Y X ^DD("DD") W ?56,Y
"RTN","FHMMBRPT",35,0)
 ..Q
"RTN","FHMMBRPT",36,0)
 .Q
"RTN","FHMMBRPT",37,0)
 I EX=U D THEND Q
"RTN","FHMMBRPT",38,0)
 W !!,"TOTAL ADMISSIONS: ",?22,ADMTOT S ALLADM=ALLADM+ADMTOT I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMBRPT",39,0)
 W !,"TOTAL WITH MONITORS:",?22,MONTOT S ALLMON=ALLMON+MONTOT I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMBRPT",40,0)
 W !,"Percentage of Admissions with Monitors: "
"RTN","FHMMBRPT",41,0)
 I ADMTOT=0!(MONTOT=0) W "0.0%" D EN Q
"RTN","FHMMBRPT",42,0)
 S FHPER=(MONTOT/ADMTOT)*100
"RTN","FHMMBRPT",43,0)
 I $L($P(FHPER,".",2))>2 S FHPER=$P(FHPER,".",1)_"."_$E($P(FHPER,".",2),1,2)
"RTN","FHMMBRPT",44,0)
 W FHPER,"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMBRPT",45,0)
 G EN
"RTN","FHMMBRPT",46,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR
"RTN","FHMMBRPT",47,0)
 Q
"RTN","FHMMBRPT",48,0)
 ;
"RTN","FHMMBRPT",49,0)
COFF ;get Communications Offices
"RTN","FHMMBRPT",50,0)
 Q:'$D(^FH(119.6,"AW",WARD))
"RTN","FHMMBRPT",51,0)
 S FHWARD=$O(^FH(119.6,"AW",WARD,""))
"RTN","FHMMBRPT",52,0)
 S FHCOMM=$P($G(^FH(119.6,FHWARD,0)),"^",8)
"RTN","FHMMBRPT",53,0)
 Q
"RTN","FHMMBRPT",54,0)
 ;
"RTN","FHMMBRPT",55,0)
DEV ;get device and set up queue
"RTN","FHMMBRPT",56,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHMMBRPT",57,0)
 I '$D(IO("Q")) U IO D EN,^%ZISC,END Q
"RTN","FHMMBRPT",58,0)
 S ZTRTN="EN^FHMMBRPT",ZTSAVE("FHSDT")="",ZTSAVE("FHEDT")=""
"RTN","FHMMBRPT",59,0)
 S ZTSAVE=("FHNDT")="",ZTSAVE=("FHPER")="",ZTSAVE("ZCO")=""
"RTN","FHMMBRPT",60,0)
 S ZTSAVE("CO")="",ZTSAVE("ALLMON")="",ZTSAVE("PG")="",ZTSAVE("EX")=""
"RTN","FHMMBRPT",61,0)
 S ZTSAVE("ZOUT")="",ZTSAVE("ALLADM")="",ZTSAVE("ALLFHPER")=""
"RTN","FHMMBRPT",62,0)
 S ZTSAVE("COXX")="",ZTSAVE("CONUMX")="",ZTSAVE("FHCOMM")=""
"RTN","FHMMBRPT",63,0)
 S ZTSAVE("CONAME")=""
"RTN","FHMMBRPT",64,0)
 S ZTDESC="Dietetics Monitor Report" D ^%ZTLOAD
"RTN","FHMMBRPT",65,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHMMBRPT",66,0)
 ;D END Q
"RTN","FHMMBRPT",67,0)
 ;
"RTN","FHMMBRPT",68,0)
END ;kill and quit
"RTN","FHMMBRPT",69,0)
 K I,J,DFN,FHDFN,SSN,ADMTOT,MONTOT,FHPER,FHSDT,FHEDT,FHNDT,X,Y,PG
"RTN","FHMMBRPT",70,0)
 Q
"RTN","FHMMBRPT",71,0)
 ;
"RTN","FHMMBRPT",72,0)
THEND ;
"RTN","FHMMBRPT",73,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR
"RTN","FHMMBRPT",74,0)
 S NAME="ALL COMMUNICATION OFFICES " D HDR
"RTN","FHMMBRPT",75,0)
 W !!,"ALL TOTAL ADMISSIONS: ",?22,ALLADM
"RTN","FHMMBRPT",76,0)
 W !,"TOTAL WITH MONITORS:",?22,ALLMON
"RTN","FHMMBRPT",77,0)
 W !,"Percentage of Admissions with Monitors: "
"RTN","FHMMBRPT",78,0)
 I ALLADM=0!(ALLMON=0) W "0.0%" D END Q
"RTN","FHMMBRPT",79,0)
 S ALLFHPER=(ALLMON/ALLADM)*100
"RTN","FHMMBRPT",80,0)
 I $L($P(ALLFHPER,".",2))>2 S ALLFHPER=$P(ALLFHPER,".",1)_"."_$E($P(ALLFHPER,".",2),1,2)
"RTN","FHMMBRPT",81,0)
 W ALLFHPER,"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMBRPT",82,0)
 G END Q
"RTN","FHMMBRPT",83,0)
 ;
"RTN","FHMMBRPT",84,0)
N2 ;find Communications Office
"RTN","FHMMBRPT",85,0)
 S DIC=119.73,DIC(0)="AEQ",DIC("A")="Select Communication Offices: "
"RTN","FHMMBRPT",86,0)
 D ^DIC I (Y=-1)&(CO="") Q
"RTN","FHMMBRPT",87,0)
 I Y=-1 Q
"RTN","FHMMBRPT",88,0)
 S CON=$P(Y,"^",1),CO=CON_"^"_CO,CONAM=$P(Y,"^",2),CONAME=CONAM_"^"_CONAME S CONUMX=$L(CO,"^") G N2
"RTN","FHMMBRPT",89,0)
 I Y=-1 K DIC Q
"RTN","FHMMBRPT",90,0)
 Q
"RTN","FHMMBRPT",91,0)
 ;
"RTN","FHMMBRPT",92,0)
PG ;
"RTN","FHMMBRPT",93,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHMMBRPT",94,0)
 D HDR Q
"RTN","FHMMBRPT",95,0)
HDR ;Header
"RTN","FHMMBRPT",96,0)
 W:$Y @IOF W !,NAME,?30,"MONITOR BRIEF REPORT" W !,FHNDT,?60,"Page: " S PG=PG+1 W PG,!!
"RTN","FHMMBRPT",97,0)
 W "Admission",?13,"Patient",?39,"SSN",?45,"Monitor?",?56,"Discharge"
"RTN","FHMMBRPT",98,0)
 W ! F Z=1:1:79 W "="
"RTN","FHMMBRPT",99,0)
 Q
"RTN","FHMMNADM")
0^101^B29247238
"RTN","FHMMNADM",1,0)
FHMMNADM ;Hines OIFO/JT,RTK,AAC - Multidiv Adm/Disc Monitor Report ;10/10/03  10:34
"RTN","FHMMNADM",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMMNADM",3,0)
 ;
"RTN","FHMMNADM",4,0)
COM ;Get Communication Offices
"RTN","FHMMNADM",5,0)
 ;
"RTN","FHMMNADM",6,0)
 S (XX,ZCO,CO,COXX,CNAME,CONAME,CONAM,WARD,FHCOMM)="",(ALLMON,ALLMV)=0
"RTN","FHMMNADM",7,0)
 ;S ZZOUT=$G(^FH(119.73,0)),(CONUMX,ZOUT)=$P(ZZOUT,"^",4)
"RTN","FHMMNADM",8,0)
 S ZZCOUNT=0 F ZZCOUNT=0:0 S ZZCOUNT=$O(^FH(119.73,ZZCOUNT)) Q:ZZCOUNT'>0  S ZOUT=ZZCOUNT
"RTN","FHMMNADM",9,0)
 R !!,"Print report for all Communications Offices Y or N: ",ZCO:DTIME W ! S ZCO=$TR(ZCO,"y","Y")
"RTN","FHMMNADM",10,0)
 I ZCO'="Y" D N2 I (Y=-1)&(CO="") Q
"RTN","FHMMNADM",11,0)
 ;
"RTN","FHMMNADM",12,0)
DATE ;sets date
"RTN","FHMMNADM",13,0)
 ;
"RTN","FHMMNADM",14,0)
 K %DT(0) S %DT="AEPT",%DT("A")="Enter beginning date: " D ^%DT Q:Y<0
"RTN","FHMMNADM",15,0)
 S FHSDT=Y,%DT(0)=FHSDT,%DT("A")="Enter ending date: " D ^%DT Q:Y<0
"RTN","FHMMNADM",16,0)
 S FHEDT=Y
"RTN","FHMMNADM",17,0)
 S DIR(0)="SA^A:Admissions;D:Discharges"
"RTN","FHMMNADM",18,0)
 S DIR("A")="Select type of movement for this report: " D ^DIR
"RTN","FHMMNADM",19,0)
 Q:Y["^"!(Y="")  S TYP=Y
"RTN","FHMMNADM",20,0)
 D DEV Q
"RTN","FHMMNADM",21,0)
 ;
"RTN","FHMMNADM",22,0)
EN ;get admission/monitor information
"RTN","FHMMNADM",23,0)
 Q:XX="*"
"RTN","FHMMNADM",24,0)
 I ZCO'="Y" S CONUMX=CONUMX-1 G:CONUMX=0 THEND  S COXX=$P(CO,"^",CONUMX),CNAME=$P(CONAME,"^",CONUMX)
"RTN","FHMMNADM",25,0)
 I ZCO="Y" S COXX=COXX+1 G:COXX>ZOUT THEND  S CNAME=$G(^FH(119.73,COXX,0)),CNAME=$P(CNAME,"^")
"RTN","FHMMNADM",26,0)
 I $D(^FH(119.73,COXX,"I"))!'$D(^FH(119.73,COXX,0)) G EN
"RTN","FHMMNADM",27,0)
 ;
"RTN","FHMMNADM",28,0)
 I TYP'="A" G EN1 Q
"RTN","FHMMNADM",29,0)
 S PG=0,EX="",Y=DT X ^DD("DD") S FHNDT=Y D HDR
"RTN","FHMMNADM",30,0)
 S MVTOT=0,MONTOT=0
"RTN","FHMMNADM",31,0)
 S I=FHSDT F  S I=$O(^DGPM("ATT1",I)) Q:'I!(I>FHEDT)!(EX=U)  D 
"RTN","FHMMNADM",32,0)
 .S J=0 F  S J=$O(^DGPM("ATT1",I,J)) Q:'J!(EX=U)  S REC=$G(^DGPM(J,0)) S WARD=$P(REC,"^",6) Q:WARD=""  D COFF2 Q:FHCOMM=""  Q:$D(^FH(119.73,FHCOMM,"I"))  Q:FHCOMM'=COXX  D
"RTN","FHMMNADM",33,0)
 ..S ADM=J,ADMD=I D WRT
"RTN","FHMMNADM",34,0)
 .Q
"RTN","FHMMNADM",35,0)
 Q:XX="*"
"RTN","FHMMNADM",36,0)
 D END
"RTN","FHMMNADM",37,0)
 D EN
"RTN","FHMMNADM",38,0)
 Q
"RTN","FHMMNADM",39,0)
 ;
"RTN","FHMMNADM",40,0)
COFF ;get communication offices
"RTN","FHMMNADM",41,0)
 Q:'$D(^DIC(42,"B",WARD))
"RTN","FHMMNADM",42,0)
 S WARDIEN=$O(^DIC(42,"B",WARD,""))
"RTN","FHMMNADM",43,0)
 Q:'$D(^FH(119.6,"AW",WARDIEN))
"RTN","FHMMNADM",44,0)
 S FHWARD=$O(^FH(119.6,"AW",WARDIEN,""))
"RTN","FHMMNADM",45,0)
 S FHCOMM=$P($G(^FH(119.6,FHWARD,0)),"^",8)
"RTN","FHMMNADM",46,0)
 Q
"RTN","FHMMNADM",47,0)
 ;
"RTN","FHMMNADM",48,0)
COFF2 ;
"RTN","FHMMNADM",49,0)
 Q:'$D(^FH(119.6,"AW",WARD))
"RTN","FHMMNADM",50,0)
 S FHWARD=$O(^FH(119.6,"AW",WARD,""))
"RTN","FHMMNADM",51,0)
 S FHCOMM=$P($G(^FH(119.6,FHWARD,0)),"^",8)
"RTN","FHMMNADM",52,0)
 Q
"RTN","FHMMNADM",53,0)
 ;
"RTN","FHMMNADM",54,0)
WRT ;write info
"RTN","FHMMNADM",55,0)
 ; 
"RTN","FHMMNADM",56,0)
 S DFN=$P(^DGPM(J,0),U,3) I $Y>(IOSL-4) D PG I EX=U S XX="*" Q
"RTN","FHMMNADM",57,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHMMNADM",58,0)
 S Y=$P(ADMD,".") X ^DD("DD") W !,Y,?13,$E($P($G(^DPT(DFN,0)),U,1),U,23)
"RTN","FHMMNADM",59,0)
 W ?39,$E($P($G(^DPT(DFN,0)),U,9),6,9) S MVTOT=MVTOT+1
"RTN","FHMMNADM",60,0)
 I $D(^FHPT(FHDFN,"A",ADM,"MO","B")) W ?48,"Yes" S MONTOT=MONTOT+1
"RTN","FHMMNADM",61,0)
 S Y=$P($P($G(^FHPT(FHDFN,"A",ADM,0)),U,14),".",1) I Y X ^DD("DD") W ?56,Y
"RTN","FHMMNADM",62,0)
 I $Y>(IOSL-4) D PG I EX=U S XX="*" Q
"RTN","FHMMNADM",63,0)
 Q
"RTN","FHMMNADM",64,0)
 ;
"RTN","FHMMNADM",65,0)
EN1 ;discharges
"RTN","FHMMNADM",66,0)
 S PG=0,EX="",Y=DT X ^DD("DD") S FHNDT=Y D HDR I EX=U S XX="*" Q
"RTN","FHMMNADM",67,0)
 S MVTOT=0,MONTOT=0
"RTN","FHMMNADM",68,0)
 S I=FHSDT F  S I=$O(^DGPM("ATT3",I)) Q:'I!(I>FHEDT)!(EX=U)  D
"RTN","FHMMNADM",69,0)
 .S J=0 F  S J=$O(^DGPM("ATT3",I,J)) Q:'J!(EX=U)  S D0=J D WARD^DGPMUTL S WARD=X Q:WARD=""  D COFF Q:FHCOMM=""  Q:$D(^FH(119.73,FHCOMM,"I"))  Q:FHCOMM'=COXX  D
"RTN","FHMMNADM",70,0)
 ..S ADM=$P(^DGPM(J,0),U,14)
"RTN","FHMMNADM",71,0)
 ..S ADMD=$P(^DGPM(ADM,0),U,1) D WRT
"RTN","FHMMNADM",72,0)
 .Q
"RTN","FHMMNADM",73,0)
 D END
"RTN","FHMMNADM",74,0)
 D EN Q
"RTN","FHMMNADM",75,0)
 ;
"RTN","FHMMNADM",76,0)
END ;end/kill/quit
"RTN","FHMMNADM",77,0)
 ;
"RTN","FHMMNADM",78,0)
 I EX=U Q
"RTN","FHMMNADM",79,0)
 W !!,"TOTAL "_$S(TYP="A":"ADMISSIONS",TYP="D":"DISCHARGES")_": ",?22,MVTOT S ALLMV=ALLMV+MVTOT
"RTN","FHMMNADM",80,0)
 W !,"TOTAL WITH MONITORS:",?22,MONTOT S ALLMON=ALLMON+MONTOT
"RTN","FHMMNADM",81,0)
 S FHPER=0 I MONTOT>0,MVTOT>0 S FHPER=(MONTOT/MVTOT)*100
"RTN","FHMMNADM",82,0)
 I $L($P(FHPER,".",2))>2 S FHPER=$P(FHPER,".",1)_"."_$E($P(FHPER,".",2),1,2)
"RTN","FHMMNADM",83,0)
 W !,"Percentage of "
"RTN","FHMMNADM",84,0)
 W $S(TYP="A":"Admissions",TYP="D":"Discharges")
"RTN","FHMMNADM",85,0)
 W " with Monitors: ",FHPER,"%"
"RTN","FHMMNADM",86,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR
"RTN","FHMMNADM",87,0)
 Q
"RTN","FHMMNADM",88,0)
 ;
"RTN","FHMMNADM",89,0)
THEND ;end/kill/quit
"RTN","FHMMNADM",90,0)
 ;
"RTN","FHMMNADM",91,0)
 I EX=U Q
"RTN","FHMMNADM",92,0)
 S CNAME="ALL "
"RTN","FHMMNADM",93,0)
 D HDR
"RTN","FHMMNADM",94,0)
 W !!,"ALL TOTAL "_$S(TYP="A":"ADMISSIONS",TYP="D":"DISCHARGES")_": ",?22,ALLMV
"RTN","FHMMNADM",95,0)
 W !,"TOTAL WITH MONITORS:",?22,ALLMON
"RTN","FHMMNADM",96,0)
 S ALLFHPER=0 I ALLMON>0,ALLMV>0 S ALLFHPER=(ALLMON/ALLMV)*100
"RTN","FHMMNADM",97,0)
 I $L($P(ALLFHPER,".",2))>2 S ALLFHPER=$P(ALLFHPER,".",1)_"."_$E($P(ALLFHPER,".",2),1,2)
"RTN","FHMMNADM",98,0)
 W !,"Percentage of "
"RTN","FHMMNADM",99,0)
 W $S(TYP="A":"Admissions",TYP="D":"Discharges")
"RTN","FHMMNADM",100,0)
 W " with Monitors: ",ALLFHPER,"%"
"RTN","FHMMNADM",101,0)
 Q
"RTN","FHMMNADM",102,0)
 ;
"RTN","FHMMNADM",103,0)
 ;
"RTN","FHMMNADM",104,0)
DEV ;get device and set up queue
"RTN","FHMMNADM",105,0)
 S TAG=$S(TYP="A":"EN",TYP="D":"EN")
"RTN","FHMMNADM",106,0)
 K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHMMNADM",107,0)
 I '$D(IO("Q")) U IO D @TAG,^%ZISC Q
"RTN","FHMMNADM",108,0)
 S ZTRTN=TAG_"^FHMMNADM",ZTSAVE("FHSDT")="",ZTSAVE("FHEDT")=""
"RTN","FHMMNADM",109,0)
 S ZTSAVE("ZCO")="",ZTSAVE("COXX")="",ZTSAVE("CONUMX")="",ZTSAVE("ZOUT")="",ZTSAVE("XX")=""
"RTN","FHMMNADM",110,0)
 S ZTSAVE("CNAME")="",ZTSAVE("FHCOMM")="",ZTSAVE("CO")="",ZTSAVE("CONAME")=""
"RTN","FHMMNADM",111,0)
 S ZTSAVE("ALLMV")="",ZTSAVE("ALLMON")="",ZTSAVE("ALLFHPER")=""
"RTN","FHMMNADM",112,0)
 S ZTSAVE("TYP")="",ZTDESC="Dietetics Monitor Report" D ^%ZTLOAD
"RTN","FHMMNADM",113,0)
 W !,"Task #",ZTSK
"RTN","FHMMNADM",114,0)
 D ^%ZISC K %ZIS,IOP Q
"RTN","FHMMNADM",115,0)
 Q
"RTN","FHMMNADM",116,0)
 ;
"RTN","FHMMNADM",117,0)
KL ;
"RTN","FHMMNADM",118,0)
 K I,J,DFN,FHDFN,SSN,MVTOT,MONTOT,FHPER,X,Y,PG,FHNDT,ADM,CO,CONAME,CONAM,WARD,FHCOMM,ALLMON,ALLMV
"RTN","FHMMNADM",119,0)
 K TAG,DIR,%DT,ADDT Q
"RTN","FHMMNADM",120,0)
 Q
"RTN","FHMMNADM",121,0)
 ;
"RTN","FHMMNADM",122,0)
N2 ;Find Communications Office
"RTN","FHMMNADM",123,0)
 S DIC=119.73,DIC(0)="AEQ",DIC("A")="Select Communication Offices: "
"RTN","FHMMNADM",124,0)
 D ^DIC I (Y=-1)&(CO="") Q
"RTN","FHMMNADM",125,0)
 I Y=-1 Q
"RTN","FHMMNADM",126,0)
 S CON=$P(Y,"^",1),CO=CON_"^"_CO,CONAM=$P(Y,"^",2),CONAME=CONAM_"^"_CONAME S CONUMX=$L(CO,"^") G N2
"RTN","FHMMNADM",127,0)
 I Y=-1 K DIC Q
"RTN","FHMMNADM",128,0)
 Q
"RTN","FHMMNADM",129,0)
 ;
"RTN","FHMMNADM",130,0)
PG ;
"RTN","FHMMNADM",131,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHMMNADM",132,0)
 D HDR Q
"RTN","FHMMNADM",133,0)
HDR ;Header
"RTN","FHMMNADM",134,0)
 ;
"RTN","FHMMNADM",135,0)
 W:$Y @IOF
"RTN","FHMMNADM",136,0)
 W !,"DIETETIC MONITOR REPORT (Monitoring "
"RTN","FHMMNADM",137,0)
 W $S(TYP="A":"Admissions",TYP="D":"Discharges")_")"
"RTN","FHMMNADM",138,0)
 W !,FHNDT,?60,"Page: " S PG=PG+1 W PG,!
"RTN","FHMMNADM",139,0)
 W !,?5,"Communication Offices: ",CNAME,!!
"RTN","FHMMNADM",140,0)
 W "Admission",?13,"Patient",?39,"SSN",?45,"Monitor?",?56,"Discharge"
"RTN","FHMMNADM",141,0)
 W ! F Z=1:1:79 W "="
"RTN","FHMMNADM",142,0)
 Q
"RTN","FHMMNPRT")
0^102^B34894053
"RTN","FHMMNPRT",1,0)
FHMMNPRT ;Hines OIFO/RTK,AAC - Mult Monitor Report Print ;10/10/03  10:29
"RTN","FHMMNPRT",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMMNPRT",3,0)
 ;
"RTN","FHMMNPRT",4,0)
 S (COUNT,COMM,CTCOMM,MON,ALLMON,ALLMON1,M1,M2,M3,M4,M5)=0
"RTN","FHMMNPRT",5,0)
 S PG=0,(EX,XX)="" D NOW^%DTC S Y=X D DD^%DT S FHNDT=Y
"RTN","FHMMNPRT",6,0)
 K FHMNTT
"RTN","FHMMNPRT",7,0)
 ;
"RTN","FHMMNPRT",8,0)
PRINT ;
"RTN","FHMMNPRT",9,0)
 S (MM1,MM2,MM3,MM4,MM5)=0
"RTN","FHMMNPRT",10,0)
 D MNAME
"RTN","FHMMNPRT",11,0)
 Q:XX="*"
"RTN","FHMMNPRT",12,0)
 I FHNXIEN'="ALL" I '$D(^TMP($J,"FHDATA",COMM,FHNXIEN)) D MESSAGE Q
"RTN","FHMMNPRT",13,0)
 I FHNXIEN'="ALL" S ZZ=FHNXIEN D DISP,D1END Q
"RTN","FHMMNPRT",14,0)
 I FHNXIEN="ALL" S ZZ="" F  S ZZ=$O(^TMP($J,"FHDATA",COMM,ZZ)) Q:ZZ=""!(EX=U)  D
"RTN","FHMMNPRT",15,0)
 .D PG
"RTN","FHMMNPRT",16,0)
 .D DISP
"RTN","FHMMNPRT",17,0)
 .S ALLMON=ALLMON+MON
"RTN","FHMMNPRT",18,0)
 .S ALLMON1=ALLMON1+MON
"RTN","FHMMNPRT",19,0)
 .S M1=M1+MON1,M2=M2+MON2,M3=M3+MON3,M4=M4+MON4,M5=M5+MON5
"RTN","FHMMNPRT",20,0)
 .S MM1=MM1+MON1,MM2=MM2+MON2,MM3=MM3+MON3,MM4=MM4+MON4,MM5=MM5+MON5
"RTN","FHMMNPRT",21,0)
 .Q
"RTN","FHMMNPRT",22,0)
 I FHNXIEN'="ALL"!(EX=U) G END Q
"RTN","FHMMNPRT",23,0)
 I ALLMON=0 W !!?5,"NO PATIENTS WITH MONITORS IN GIVEN DATE RANGE" D END Q
"RTN","FHMMNPRT",24,0)
 ;
"RTN","FHMMNPRT",25,0)
 W !!,"** TOTAL COMMUNICATIONS OFFICE - Admissions.....: ",NAME I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",26,0)
 ;
"RTN","FHMMNPRT",27,0)
 W !!?16,"Totals for ALL ",$S(FHSORT="C":"Clinicians.......: ",1:"Wards............: "),$J(ALLMON1,3) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",28,0)
 ;I ZCO'="Y",ALLMON1=0 G PRINT
"RTN","FHMMNPRT",29,0)
 I ALLMON>0 W !?16,"Monitor: Albumin < 3.2..........: ",$J(MM1,3),"   ",$J(((MM1/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",30,0)
 I ALLMON>0 W !?16,"Monitor: BMI < 21...............: ",$J(MM2,3),"   ",$J(((MM2/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",31,0)
 I ALLMON>0 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(MM3,3),"   ",$J(((MM3/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",32,0)
 I ALLMON>0 W !?16,"Monitor: On Hyperals............: ",$J(MM4,3),"   ",$J(((MM4/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",33,0)
 I ALLMON>0 W !?16,"Monitor: On Tubefeeding.........: ",$J(MM5,3),"   ",$J(((MM5/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",34,0)
 ;
"RTN","FHMMNPRT",35,0)
 ;
"RTN","FHMMNPRT",36,0)
 S (MM1,MM2,MM3,MM4,MM5,ALLMON1)=0
"RTN","FHMMNPRT",37,0)
 G PRINT Q
"RTN","FHMMNPRT",38,0)
 Q
"RTN","FHMMNPRT",39,0)
 ;
"RTN","FHMMNPRT",40,0)
THEND ;
"RTN","FHMMNPRT",41,0)
 S NAME="ALL COMMUNICATION OFFICES " D PG I EX=U Q
"RTN","FHMMNPRT",42,0)
 W !!,"*** TOTAL PATIENTS WITH MONITORS ALL COMMUNICATION OFFICES....: ",CTCOMM
"RTN","FHMMNPRT",43,0)
 ;
"RTN","FHMMNPRT",44,0)
 W !!?16,"Totals for ALL ",$S(FHSORT="C":"Clinicians.......: ",1:"Wards............: "),$J(ALLMON,3)
"RTN","FHMMNPRT",45,0)
 I ALLMON>0 W !?16,"Monitor: Albumin < 3.2..........: ",$J(M1,3),"   ",$J(((M1/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",46,0)
 I ALLMON>0 W !?16,"Monitor: BMI < 21...............: ",$J(M2,3),"   ",$J(((M2/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",47,0)
 I ALLMON>0 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(M3,3),"   ",$J(((M3/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",48,0)
 I ALLMON>0 W !?16,"Monitor: On Hyperals............: ",$J(M4,3),"   ",$J(((M4/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",49,0)
 I ALLMON>0 W !?16,"Monitor: On Tubefeeding.........: ",$J(M5,3),"   ",$J(((M5/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",50,0)
 ;
"RTN","FHMMNPRT",51,0)
 ;W !!!,"TOTAL ADMISSIONS....:",?23,FHTADM
"RTN","FHMMNPRT",52,0)
 ;W !,"TOTAL MONITORS......:",?23,ALLMON
"RTN","FHMMNPRT",53,0)
 ;I FHTADM>0 W !,"PERCENTAGE..........:",?23,$J(((ALLMON/FHTADM)*100),1,2),"%"
"RTN","FHMMNPRT",54,0)
 D LINE
"RTN","FHMMNPRT",55,0)
 S XX="*"
"RTN","FHMMNPRT",56,0)
 Q
"RTN","FHMMNPRT",57,0)
 ;I $Y>(IOSL-4)
"RTN","FHMMNPRT",58,0)
 ;
"RTN","FHMMNPRT",59,0)
D1END W ! K DIR Q:EX'=U  S DIR(0)="E" D ^DIR  ;I IOST?1"C".E,EX'=U 
"RTN","FHMMNPRT",60,0)
 D END Q
"RTN","FHMMNPRT",61,0)
 Q
"RTN","FHMMNPRT",62,0)
DISP ;
"RTN","FHMMNPRT",63,0)
 S (TOT,MON,MON1,MON2,MON3,MON4,MON5)=0
"RTN","FHMMNPRT",64,0)
 F YY=0:0 S YY=$O(^TMP($J,"FHDATA",COMM,ZZ,YY)) Q:YY'>0  D
"RTN","FHMMNPRT",65,0)
DISP2 .F HH=0:0 S HH=$O(^TMP($J,"FHDATA",COMM,ZZ,YY,HH)) Q:HH'>0!(EX=U)  D
"RTN","FHMMNPRT",66,0)
 ..I $Y>(IOSL-4) I EX=U Q  W ! D HDR
"RTN","FHMMNPRT",67,0)
 ..S CTCOMM=CTCOMM+1
"RTN","FHMMNPRT",68,0)
 ..S DFN=$P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,5)
"RTN","FHMMNPRT",69,0)
 ..S Y=YY X ^DD("DD") W !,Y
"RTN","FHMMNPRT",70,0)
 ..W ?13,$P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,2)
"RTN","FHMMNPRT",71,0)
 ..W ?39,$P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,3)
"RTN","FHMMNPRT",72,0)
 ..W ?47,$P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,6)
"RTN","FHMMNPRT",73,0)
 ..I $P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,7)="Yes"  D
"RTN","FHMMNPRT",74,0)
 ...F NUM=0:0 S NUM=$O(FHMON(DFN,HH,NUM)) Q:NUM'>0!(EX=U)  D
"RTN","FHMMNPRT",75,0)
 ....I NUM'=1 W !
"RTN","FHMMNPRT",76,0)
 ....S MON=MON+1,MONTYP=$P($P(FHMON(DFN,HH,NUM),U,1),": ",2)
"RTN","FHMMNPRT",77,0)
 ....S PC=$S(MONTYP["Albumin":1,MONTYP["BMI":2,MONTYP["NPO+Clr":3,MONTYP["Hyper":4,1:5)
"RTN","FHMMNPRT",78,0)
 ....I $G(FHMNTT(COMM,ZZ))="" S FHMNTT(COMM,ZZ)=""
"RTN","FHMMNPRT",79,0)
 ....S $P(FHMNTT(COMM,ZZ),U,PC)=$P(FHMNTT(COMM,ZZ),U,PC)+1
"RTN","FHMMNPRT",80,0)
 ....W ?56,MONTYP I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",81,0)
 ....Q
"RTN","FHMMNPRT",82,0)
 ...Q
"RTN","FHMMNPRT",83,0)
 ..S TOT=TOT+1
"RTN","FHMMNPRT",84,0)
 ..Q
"RTN","FHMMNPRT",85,0)
 .Q
"RTN","FHMMNPRT",86,0)
 I MON=0!(EX=U) Q
"RTN","FHMMNPRT",87,0)
 I FHSORT="C" W !!,"*  CLINICIAN: ",ZZ
"RTN","FHMMNPRT",88,0)
 I FHSORT="W" W !!,"*  WARD: ",ZZ
"RTN","FHMMNPRT",89,0)
 W !?16,"Total Number of Monitors........: ",$J(MON,3) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",90,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,1) I PCE>0 W !?16,"Monitor: Albumin < 3.2..........: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON1=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",91,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,2) I PCE>0 W !?16,"Monitor: BMI < 21...............: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON2=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",92,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,3) I PCE>0 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON3=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",93,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,4) I PCE>0 W !?16,"Monitor: On Hyperals............: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON4=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",94,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,5) I PCE>0 W !?16,"Monitor: On Tubefeeding.........: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON5=PCE
"RTN","FHMMNPRT",95,0)
 W !
"RTN","FHMMNPRT",96,0)
 Q
"RTN","FHMMNPRT",97,0)
 ;
"RTN","FHMMNPRT",98,0)
MESSAGE ;
"RTN","FHMMNPRT",99,0)
 W !!?5,"NO PATIENTS WITH MONITORS IN GIVEN DATE RANGE"
"RTN","FHMMNPRT",100,0)
 W !?10,"FOR THIS ",$S(FHSORT="C":"CLINICIAN",1:"WARD"),": ",FHNXIEN
"RTN","FHMMNPRT",101,0)
 Q
"RTN","FHMMNPRT",102,0)
END K FHMNTT,HH,M1,M2,M3,M4,M5,MON,MON1,MON2,MON3,MON4,MON5,MONTYP
"RTN","FHMMNPRT",103,0)
 K NUM,PC,PCE,PG,PER,TOT,YY
"RTN","FHMMNPRT",104,0)
 QUIT
"RTN","FHMMNPRT",105,0)
 Q
"RTN","FHMMNPRT",106,0)
 ;
"RTN","FHMMNPRT",107,0)
PG ;
"RTN","FHMMNPRT",108,0)
 I IOST?1"C".E  W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHMMNPRT",109,0)
 D HDR Q
"RTN","FHMMNPRT",110,0)
 Q
"RTN","FHMMNPRT",111,0)
HDR ;Header
"RTN","FHMMNPRT",112,0)
 W:$Y @IOF W !,FHNDT,?60,"Page: " S PG=PG+1 W PG,!
"RTN","FHMMNPRT",113,0)
 W !,?25,"Nutrition Monitor Statistic Report"
"RTN","FHMMNPRT",114,0)
 W !,NAME,!
"RTN","FHMMNPRT",115,0)
 W "Admission",?13,"Patient",?39,"SSN",?45,"Status",?56,"Monitor(s)"
"RTN","FHMMNPRT",116,0)
LINE W ! F Z=1:1:79 W "="
"RTN","FHMMNPRT",117,0)
 Q
"RTN","FHMMNPRT",118,0)
MNAME ;
"RTN","FHMMNPRT",119,0)
 I ZCO'="Y" S CONUMX=CONUMX-1 G:CONUMX<1 THEND  S COXX=$P(CO,"^",CONUMX),NAME=$P(CONAME,"^",CONUMX) S COMM=COXX Q
"RTN","FHMMNPRT",120,0)
 I ZCO="Y" S COUNT=COUNT+1 G:COUNT>ZOUT THEND  S NAME=$G(^FH(119.73,COUNT,0)),NAME=$P(NAME,"^") S COMM=COUNT
"RTN","FHMMNPRT",121,0)
 I $D(^FH(119.73,COUNT,"I"))!'$D(^FH(119.73,COUNT,0)) G MNAME
"RTN","FHMMNPRT",122,0)
 Q
"RTN","FHMMNPRT",123,0)
QUIT ;
"RTN","FHMMNPRT",124,0)
 W !
"RTN","FHMMNPRT",125,0)
 Q
"RTN","FHMMNREP")
0^103^B20084205
"RTN","FHMMNREP",1,0)
FHMMNREP ;Hines OIFO/RTK,AAC - Multidiv Monitor Report ;10/10/03  11:49
"RTN","FHMMNREP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMMNREP",3,0)
 ;
"RTN","FHMMNREP",4,0)
COM ;Get Communication Offices
"RTN","FHMMNREP",5,0)
 S (ZCO,CO,COXX,CONAME,CONAM,WARD,FHCOMM)="",(ZCOMM,CONUMX,ALLCOMM)=0
"RTN","FHMMNREP",6,0)
 ;S ZZOUT=$G(^FH(119.73,0)),ZOUT=$P(ZZOUT,"^",4)
"RTN","FHMMNREP",7,0)
 S ZZCOUNT=0 F ZZCOUNT=0:0 S ZZCOUNT=$O(^FH(119.73,ZZCOUNT)) Q:ZZCOUNT'>0  S ZOUT=ZZCOUNT
"RTN","FHMMNREP",8,0)
 R !!,"Print report for all Communications Offices Y or N: ",ZCO:DTIME W ! S ZCO=$TR(ZCO,"y","Y")
"RTN","FHMMNREP",9,0)
 Q:ZCO="^"
"RTN","FHMMNREP",10,0)
 I ZCO'="Y" D N2 I (Y=-1)&(CO="") Q
"RTN","FHMMNREP",11,0)
 ;
"RTN","FHMMNREP",12,0)
DATE ;sets date
"RTN","FHMMNREP",13,0)
 S (FHTADM,FHTMON)=0
"RTN","FHMMNREP",14,0)
 W ! S %DT="AEPT",%DT("A")="Enter beginning date: " D ^%DT Q:Y<0
"RTN","FHMMNREP",15,0)
 S FHSDT=Y,%DT(0)=FHSDT,%DT("A")="Enter ending date: " D ^%DT K %DT(0)
"RTN","FHMMNREP",16,0)
 S FHEDT=Y I Y<0 D END Q
"RTN","FHMMNREP",17,0)
 D SORTCR S FHSORT=Y I Y="^" D END Q
"RTN","FHMMNREP",18,0)
 I FHSORT="C" D FHCL Q:'$D(FHCLIEN)  S FHNXIEN=CLNAM
"RTN","FHMMNREP",19,0)
 I FHSORT="W" D FHWA Q:'$D(FHWRIEN)  S FHNXIEN=WRDNAM
"RTN","FHMMNREP",20,0)
 D DEV,END Q
"RTN","FHMMNREP",21,0)
 ;
"RTN","FHMMNREP",22,0)
FHCL ;
"RTN","FHMMNREP",23,0)
 K DIR S DIR(0)="Y",DIR("A")="Select ALL Clinicians",DIR("B")="Y" D ^DIR
"RTN","FHMMNREP",24,0)
 I Y=1 S (FHCLIEN,CLNAM)="ALL"
"RTN","FHMMNREP",25,0)
 I Y=0 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="Select CLINICIAN: " D ^DIC S FHCLIEN=$P(Y,U,1),CLNAM=$P($G(^VA(200,FHCLIEN,0)),U,1)
"RTN","FHMMNREP",26,0)
 I (Y=-1)!($D(DUOUT))!($D(DTOUT)) D END Q
"RTN","FHMMNREP",27,0)
 Q
"RTN","FHMMNREP",28,0)
FHWA ;
"RTN","FHMMNREP",29,0)
 K DIR S DIR(0)="Y",DIR("A")="Select ALL Wards",DIR("B")="Y" D ^DIR
"RTN","FHMMNREP",30,0)
 I Y=1 S (FHWRIEN,WRDNAM)="ALL"
"RTN","FHMMNREP",31,0)
 I Y=0 K DIC S DIC="^FH(119.6,",DIC(0)="AEQM" D ^DIC S FHWRIEN=$P(Y,U,1),WRDNAM=$P($G(^FH(119.6,FHWRIEN,0)),U,1)
"RTN","FHMMNREP",32,0)
 I (Y=-1)!($D(DUOUT))!($D(DTOUT)) D END Q
"RTN","FHMMNREP",33,0)
 Q
"RTN","FHMMNREP",34,0)
EN ;
"RTN","FHMMNREP",35,0)
 ;^TMP($J,"FHDATA") SUBSCRIPTS (CLINIC OR WARD NAME,DGPM DATE,DGPM ENTRY)
"RTN","FHMMNREP",36,0)
 ;^TMP($J,"FHDATA") PIECES="PatName^SSN^Monitors?^DischargeDt^DFN^Status"
"RTN","FHMMNREP",37,0)
 ;
"RTN","FHMMNREP",38,0)
 K ^TMP($J,"FHDATA"),FHMON
"RTN","FHMMNREP",39,0)
 S I=FHSDT F  S I=$O(^DGPM("ATT1",I)) Q:'I!(I>FHEDT)  D
"RTN","FHMMNREP",40,0)
 .S J=0 F  S J=$O(^DGPM("ATT1",I,J)) Q:'J  D
"RTN","FHMMNREP",41,0)
 ..S ZCOMM=ZCOMM+1
"RTN","FHMMNREP",42,0)
 ..S DFN=$P($G(^DGPM(J,0)),U,3)
"RTN","FHMMNREP",43,0)
 ..S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHMMNREP",44,0)
 ..I '$D(^FHPT(FHDFN,"A",J,"MO","B")) Q
"RTN","FHMMNREP",45,0)
 ..S II=$P(I,".")
"RTN","FHMMNREP",46,0)
 ..S FHWARD=$P($G(^DGPM(J,0)),U,6)
"RTN","FHMMNREP",47,0)
 ..Q:'$D(^FH(119.6,"AW",FHWARD))
"RTN","FHMMNREP",48,0)
 ..S WRD=$O(^FH(119.6,"AW",FHWARD,""))
"RTN","FHMMNREP",49,0)
 ..S FHCOMM=$P($G(^FH(119.6,WRD,0)),"^",8),CLN=$P($G(^FH(119.6,WRD,0)),"^",2)
"RTN","FHMMNREP",50,0)
 ..Q:FHCOMM=""  Q:$D(^FH(119.73,FHCOMM,"I"))
"RTN","FHMMNREP",51,0)
 ..S FHTADM=FHTADM+1
"RTN","FHMMNREP",52,0)
 ..S ALLCOMM=ALLCOMM+1
"RTN","FHMMNREP",53,0)
 ..;S CLN=$P($G(^DGPM(J,0)),U,19),WRD=$P($G(^DGPM(J,0)),U,6)
"RTN","FHMMNREP",54,0)
 ..S INDX=$S(FHSORT="C":CLN,1:WRD) I INDX="" Q
"RTN","FHMMNREP",55,0)
 ..S INDX=$S(FHSORT="C":$P($G(^VA(200,CLN,0)),U,1),1:$P($G(^FH(119.6,WRD,0)),U,1))
"RTN","FHMMNREP",56,0)
 ..S $P(^TMP($J,"FHDATA",FHCOMM,INDX,II,J),U,1)=FHCOMM
"RTN","FHMMNREP",57,0)
 ..S $P(^TMP($J,"FHDATA",FHCOMM,INDX,II,J),U,2)=$E($P($G(^DPT(DFN,0)),U,1),1,23)
"RTN","FHMMNREP",58,0)
 ..S $P(^TMP($J,"FHDATA",FHCOMM,INDX,II,J),U,5)=DFN
"RTN","FHMMNREP",59,0)
 ..S $P(^TMP($J,"FHDATA",FHCOMM,INDX,II,J),U,3)=$E($P($G(^DPT(DFN,0)),U,9),6,9)
"RTN","FHMMNREP",60,0)
 ..I $D(^FHPT(FHDFN,"A",J,"MO","B")) S $P(^TMP($J,"FHDATA",FHCOMM,INDX,II,J),U,7)="Yes",FHTMON=FHTMON+1,MCNT=0  D
"RTN","FHMMNREP",61,0)
 ...F FHMN=0:0 S FHMN=$O(^FHPT(FHDFN,"A",J,"MO",FHMN)) Q:FHMN'>0  S MCNT=MCNT+1,FHMON(DFN,J,MCNT)=$P($G(^FHPT(FHDFN,"A",J,"MO",FHMN,0)),"^",1)
"RTN","FHMMNREP",62,0)
 ..S Y=$P($P($G(^FHPT(FHDFN,"A",J,0)),U,14),".",1) I Y X ^DD("DD") S $P(^TMP($J,"FHDATA",FHCOMM,INDX,II,J),U,4)=Y
"RTN","FHMMNREP",63,0)
 ..I $D(^FHPT(FHDFN,"S",0)) S NS=$O(^FHPT(FHDFN,"S",0)),STAT=$P($G(^FHPT(FHDFN,"S",NS,0)),U,2) S $P(^TMP($J,"FHDATA",FHCOMM,INDX,II,J),U,6)=$P($G(^FH(115.4,STAT,0)),U,1)
"RTN","FHMMNREP",64,0)
 ..Q
"RTN","FHMMNREP",65,0)
 .Q
"RTN","FHMMNREP",66,0)
 D ^FHMMNPRT
"RTN","FHMMNREP",67,0)
 Q
"RTN","FHMMNREP",68,0)
 ;
"RTN","FHMMNREP",69,0)
THEND ;Q
"RTN","FHMMNREP",70,0)
 ;
"RTN","FHMMNREP",71,0)
DEV ;get device and set up queue
"RTN","FHMMNREP",72,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHMMNREP",73,0)
 I '$D(IO("Q")) U IO D EN,^%ZISC,END Q
"RTN","FHMMNREP",74,0)
 S ZTRTN="EN^FHMMNREP",ZTSAVE("FHSDT")="",ZTSAVE("FHEDT")="",ZTSAVE("ZCOMM")=""
"RTN","FHMMNREP",75,0)
 S ZTSAVE("FHNDT")="",ZTSAVE("FHPER")="",ZTSAVE("FHSORT")=""
"RTN","FHMMNREP",76,0)
 S ZTSAVE("FHNXIEN")="",ZTSAVE("FHTADM")="",ZTSAVE("FHTMON")=""
"RTN","FHMMNREP",77,0)
 S ZTSAVE("ALLCOMM")="",ZTSAVE("ZCO")="",ZTSAVE("COXX")="",ZTSAVE("ZOUT")=""
"RTN","FHMMNREP",78,0)
 S ZTSAVE("CONUMX")="",ZTSAVE("CO")="",ZTSAVE("CONAME")=""
"RTN","FHMMNREP",79,0)
 S ZTDESC="Dietetics Monitor Report" D ^%ZTLOAD
"RTN","FHMMNREP",80,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHMMNREP",81,0)
 D END Q
"RTN","FHMMNREP",82,0)
 ;
"RTN","FHMMNREP",83,0)
N2 ;Find Communication Office
"RTN","FHMMNREP",84,0)
 S DIC=119.73,DIC(0)="AEQ",DIC("A")="Select Communication Offices: "
"RTN","FHMMNREP",85,0)
 D ^DIC I Y=-1&(CO="") Q
"RTN","FHMMNREP",86,0)
 I Y=-1 Q
"RTN","FHMMNREP",87,0)
 S CON=$P(Y,"^",1),CO=CON_"^"_CO,CONAM=$P(Y,"^",2),CONAME=CONAM_"^"_CONAME S CONUMX=$L(CO,"^") G N2
"RTN","FHMMNREP",88,0)
 I Y=-1 K DIC Q
"RTN","FHMMNREP",89,0)
 Q
"RTN","FHMMNREP",90,0)
 ;
"RTN","FHMMNREP",91,0)
SORTCR ;
"RTN","FHMMNREP",92,0)
 K DIR S DIR(0)="SB^C:CLINICIAN;W:WARD",DIR("A")="Sort by Clinician/Ward"
"RTN","FHMMNREP",93,0)
 D ^DIR
"RTN","FHMMNREP",94,0)
 Q
"RTN","FHMMNREP",95,0)
END ;kill and quit
"RTN","FHMMNREP",96,0)
 K CLN,CLNAM,FHDFN,DFN,I,II,INDX,J,SSN,MCNT
"RTN","FHMMNREP",97,0)
 K FHCLIEN,FHEDT,FHMN,FHNDT,FHNXIEN,FHTADM,FHTMON
"RTN","FHMMNREP",98,0)
 K FHPER,FHSDT,FHSORT,FHWRIEN,WRD,WRDNAM,X,Y,Z
"RTN","FHMMNREP",99,0)
 Q
"RTN","FHMNADM")
0^104^B9528536
"RTN","FHMNADM",1,0)
FHMNADM ;Hines OIFO/JT,RTK - Dietetics Adm/Disc Monitor Report ;06/12/02  10:34
"RTN","FHMNADM",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMNADM",3,0)
 ;
"RTN","FHMNADM",4,0)
DATE ;sets date
"RTN","FHMNADM",5,0)
 ;
"RTN","FHMNADM",6,0)
 ; Check for multidivisional site
"RTN","FHMNADM",7,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D ^FHMMNADM Q
"RTN","FHMNADM",8,0)
 K %DT(0) S %DT="AEPT",%DT("A")="Enter beginning date: " D ^%DT Q:Y<0
"RTN","FHMNADM",9,0)
 S FHSDT=Y,%DT(0)=FHSDT,%DT("A")="Enter ending date: " D ^%DT Q:Y<0
"RTN","FHMNADM",10,0)
 S FHEDT=Y
"RTN","FHMNADM",11,0)
 S DIR(0)="SA^A:Admissions;D:Discharges"
"RTN","FHMNADM",12,0)
 S DIR("A")="Select type of movement for this report: " D ^DIR
"RTN","FHMNADM",13,0)
 Q:Y["^"!(Y="")  S TYP=Y
"RTN","FHMNADM",14,0)
 G DEV
"RTN","FHMNADM",15,0)
 ;
"RTN","FHMNADM",16,0)
EN ;get admission/monitor information
"RTN","FHMNADM",17,0)
 S PG=0,EX="",Y=DT X ^DD("DD") S FHNDT=Y D HDR
"RTN","FHMNADM",18,0)
 S MVTOT=0,MONTOT=0
"RTN","FHMNADM",19,0)
 S I=FHSDT F  S I=$O(^DGPM("ATT1",I)) Q:'I!(I>FHEDT)!(EX=U)  D
"RTN","FHMNADM",20,0)
 .S J=0 F  S J=$O(^DGPM("ATT1",I,J)) Q:'J!(EX=U)  D
"RTN","FHMNADM",21,0)
 ..S ADM=J,ADMD=I D WRT Q
"RTN","FHMNADM",22,0)
 .Q
"RTN","FHMNADM",23,0)
 D END Q
"RTN","FHMNADM",24,0)
 ;
"RTN","FHMNADM",25,0)
WRT ;write info
"RTN","FHMNADM",26,0)
 ; 
"RTN","FHMNADM",27,0)
 S DFN=$P(^DGPM(J,0),U,3) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNADM",28,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHMNADM",29,0)
 S Y=$P(ADMD,".") X ^DD("DD") W !,Y,?13,$E($P(^DPT(DFN,0),U,1),U,23)
"RTN","FHMNADM",30,0)
 W ?39,$E($P(^(0),U,9),6,9) S MVTOT=MVTOT+1
"RTN","FHMNADM",31,0)
 I $D(^FHPT(FHDFN,"A",ADM,"MO"))>9 W ?48,"Yes" S MONTOT=MONTOT+1
"RTN","FHMNADM",32,0)
 S Y=$P($P($G(^FHPT(FHDFN,"A",ADM,0)),U,14),".",1) I Y X ^DD("DD") W ?56,Y
"RTN","FHMNADM",33,0)
 Q
"RTN","FHMNADM",34,0)
 ;
"RTN","FHMNADM",35,0)
EN1 ;discharges
"RTN","FHMNADM",36,0)
 S PG=0,EX="",Y=DT X ^DD("DD") S FHNDT=Y D HDR
"RTN","FHMNADM",37,0)
 S MVTOT=0,MONTOT=0
"RTN","FHMNADM",38,0)
 S I=FHSDT F  S I=$O(^DGPM("ATT3",I)) Q:'I!(I>FHEDT)!(EX=U)  D
"RTN","FHMNADM",39,0)
 .S J=0 F  S J=$O(^DGPM("ATT3",I,J)) Q:'J!(EX=U)  D
"RTN","FHMNADM",40,0)
 ..S ADM=$P(^DGPM(J,0),U,14)
"RTN","FHMNADM",41,0)
 ..S ADMD=$P(^DGPM(ADM,0),U,1) D WRT Q
"RTN","FHMNADM",42,0)
 .Q
"RTN","FHMNADM",43,0)
 ;
"RTN","FHMNADM",44,0)
END ;end/kill/quit
"RTN","FHMNADM",45,0)
 ; 
"RTN","FHMNADM",46,0)
 I EX=U D KL Q
"RTN","FHMNADM",47,0)
 W !!,"TOTAL "_$S(TYP="A":"ADMISSIONS",TYP="D":"DISCHARGES")_": ",?22,MVTOT
"RTN","FHMNADM",48,0)
 W !,"TOTAL WITH MONITORS:",?22,MONTOT
"RTN","FHMNADM",49,0)
 S FHPER=0 I MONTOT>0,MVTOT>0 S FHPER=(MONTOT/MVTOT)*100
"RTN","FHMNADM",50,0)
 I $L($P(FHPER,".",2))>2 S FHPER=$P(FHPER,".",1)_"."_$E($P(FHPER,".",2),1,2)
"RTN","FHMNADM",51,0)
 W !,"Percentage of "
"RTN","FHMNADM",52,0)
 W $S(TYP="A":"Admissions",TYP="D":"Discharges")
"RTN","FHMNADM",53,0)
 W " with Monitors: ",FHPER,"%"
"RTN","FHMNADM",54,0)
KL K I,J,FHDFN,DFN,SSN,MVTOT,MONTOT,FHPER,FHSDT,FHEDT,X,Y,PG,FHNDT,ADM
"RTN","FHMNADM",55,0)
 K TAG,TYP,DIR,%DT,ADDT Q
"RTN","FHMNADM",56,0)
 ;
"RTN","FHMNADM",57,0)
DEV ;get device and set up queue
"RTN","FHMNADM",58,0)
 S TAG=$S(TYP="A":"EN",TYP="D":"EN1")
"RTN","FHMNADM",59,0)
 K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHMNADM",60,0)
 I '$D(IO("Q")) U IO D @TAG,^%ZISC Q
"RTN","FHMNADM",61,0)
 S ZTRTN=TAG_"^FHMNADM",ZTSAVE("FHSDT")="",ZTSAVE("FHEDT")=""
"RTN","FHMNADM",62,0)
 S ZTSAVE("TYP")="",ZTDESC="Dietetics Monitor Report" D ^%ZTLOAD
"RTN","FHMNADM",63,0)
 W !,"Task #",ZTSK
"RTN","FHMNADM",64,0)
 D ^%ZISC K %ZIS,IOP,FHSDT,FHEDT Q
"RTN","FHMNADM",65,0)
PG ;
"RTN","FHMNADM",66,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHMNADM",67,0)
 D HDR Q
"RTN","FHMNADM",68,0)
HDR ;Header
"RTN","FHMNADM",69,0)
 ;
"RTN","FHMNADM",70,0)
 W:$Y @IOF
"RTN","FHMNADM",71,0)
 W !,"DIETETIC MONITOR REPORT (Monitoring "
"RTN","FHMNADM",72,0)
 W $S(TYP="A":"Admissions",TYP="D":"Discharges")_")"
"RTN","FHMNADM",73,0)
 W !,FHNDT,?60,"Page: " S PG=PG+1 W PG,!!
"RTN","FHMNADM",74,0)
 W "Admission",?13,"Patient",?39,"SSN",?45,"Monitor?",?56,"Discharge"
"RTN","FHMNADM",75,0)
 W ! F Z=1:1:79 W "="
"RTN","FHMNADM",76,0)
 Q
"RTN","FHMNBRPT")
0^105^B5470086
"RTN","FHMNBRPT",1,0)
FHMNBRPT ;Hines OIFO/JT,RTK - Dietetics Monitor Brief ;07/26/01  11:49
"RTN","FHMNBRPT",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMNBRPT",3,0)
 ;
"RTN","FHMNBRPT",4,0)
DATE ;sets date
"RTN","FHMNBRPT",5,0)
 ; Check for multidivisional site
"RTN","FHMNBRPT",6,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D ^FHMMBRPT Q
"RTN","FHMNBRPT",7,0)
 W ! S %DT="AEPT",%DT("A")="Enter beginning date: " D ^%DT Q:Y<0
"RTN","FHMNBRPT",8,0)
 S FHSDT=Y,%DT(0)=FHSDT,%DT("A")="Enter ending date: " D ^%DT K %DT(0)
"RTN","FHMNBRPT",9,0)
 I Y<0 D END Q
"RTN","FHMNBRPT",10,0)
 S FHEDT=Y D DEV
"RTN","FHMNBRPT",11,0)
 D END Q
"RTN","FHMNBRPT",12,0)
 ;
"RTN","FHMNBRPT",13,0)
EN ;get admission/monitor information
"RTN","FHMNBRPT",14,0)
 S PG=0,EX="" D NOW^%DTC S Y=X D DD^%DT S FHNDT=Y D HDR
"RTN","FHMNBRPT",15,0)
 S ADMTOT=0,MONTOT=0
"RTN","FHMNBRPT",16,0)
 S I=FHSDT F  S I=$O(^DGPM("ATT1",I)) Q:'I!(I>FHEDT)  D
"RTN","FHMNBRPT",17,0)
 .S J=0 F  S J=$O(^DGPM("ATT1",I,J)) Q:'J!(EX=U)  D
"RTN","FHMNBRPT",18,0)
 ..S DFN=$P(^DGPM(J,0),U,3) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNBRPT",19,0)
 ..S Y=$P(I,".") X ^DD("DD") W !,Y,?13,$E($P(^DPT(DFN,0),U,1),1,23)
"RTN","FHMNBRPT",20,0)
 ..W ?39,$E($P(^DPT(DFN,0),U,9),6,9) S ADMTOT=ADMTOT+1
"RTN","FHMNBRPT",21,0)
 ..I $D(^FHPT(FHDFN,"A",J,"MO","B")) W ?48,"Yes" S MONTOT=MONTOT+1
"RTN","FHMNBRPT",22,0)
 ..S Y=$P($P($G(^FHPT(FHDFN,"A",J,0)),U,14),".",1) I Y X ^DD("DD") W ?56,Y
"RTN","FHMNBRPT",23,0)
 ..Q
"RTN","FHMNBRPT",24,0)
 .Q
"RTN","FHMNBRPT",25,0)
 I EX=U D END Q
"RTN","FHMNBRPT",26,0)
 W !!,"TOTAL ADMISSIONS: ",?22,ADMTOT
"RTN","FHMNBRPT",27,0)
 W !,"TOTAL WITH MONITORS:",?22,MONTOT
"RTN","FHMNBRPT",28,0)
 W !,"Percentage of Admissions with Monitors: "
"RTN","FHMNBRPT",29,0)
 I ADMTOT=0!(MONTOT=0) W "0.0%" D END Q
"RTN","FHMNBRPT",30,0)
 S FHPER=(MONTOT/ADMTOT)*100
"RTN","FHMNBRPT",31,0)
 I $L($P(FHPER,".",2))>2 S FHPER=$P(FHPER,".",1)_"."_$E($P(FHPER,".",2),1,2)
"RTN","FHMNBRPT",32,0)
 W FHPER,"%"
"RTN","FHMNBRPT",33,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR
"RTN","FHMNBRPT",34,0)
 D END Q
"RTN","FHMNBRPT",35,0)
DEV ;get device and set up queue
"RTN","FHMNBRPT",36,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHMNBRPT",37,0)
 I '$D(IO("Q")) U IO D EN,^%ZISC,END Q
"RTN","FHMNBRPT",38,0)
 S ZTRTN="EN^FHMNBRPT",ZTSAVE("FHSDT")="",ZTSAVE("FHEDT")=""
"RTN","FHMNBRPT",39,0)
 S ZTSAVE=("FHNDT"),ZTSAVE=("FHPER")
"RTN","FHMNBRPT",40,0)
 S ZTDESC="Dietetics Monitor Report" D ^%ZTLOAD
"RTN","FHMNBRPT",41,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHMNBRPT",42,0)
 D END Q
"RTN","FHMNBRPT",43,0)
END ;kill and quit
"RTN","FHMNBRPT",44,0)
 K I,J,FHDFN,DFN,SSN,ADMTOT,MONTOT,FHPER,FHSDT,FHEDT,FHNDT,X,Y,PG
"RTN","FHMNBRPT",45,0)
 Q
"RTN","FHMNBRPT",46,0)
PG ;
"RTN","FHMNBRPT",47,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHMNBRPT",48,0)
 D HDR Q
"RTN","FHMNBRPT",49,0)
HDR ;Header
"RTN","FHMNBRPT",50,0)
 W:$Y @IOF W !,FHNDT,?60,"Page: " S PG=PG+1 W PG,!!
"RTN","FHMNBRPT",51,0)
 W "Admission",?13,"Patient",?39,"SSN",?45,"Monitor?",?56,"Discharge"
"RTN","FHMNBRPT",52,0)
 W ! F Z=1:1:79 W "="
"RTN","FHMNBRPT",53,0)
 Q
"RTN","FHMNINQ")
0^106^B6290326
"RTN","FHMNINQ",1,0)
FHMNINQ ;Hines OIFO/JT,RTK - Dietetics Monitor Inquiry ;07/26/01  09:53
"RTN","FHMNINQ",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMNINQ",3,0)
 ;
"RTN","FHMNINQ",4,0)
DATE W ! K DIC S DIC="^DPT(",DIC(0)="AEQM" D ^DIC Q:Y<0  S DFN=+Y K DIC
"RTN","FHMNINQ",5,0)
 I $O(^DGPM("APTT1",DFN,""))="" W !,"NO ADMISSIONS FOR THIS PATIENT!" H 2 Q
"RTN","FHMNINQ",6,0)
 W !,"This patient has the following admissions:",!
"RTN","FHMNINQ",7,0)
 S FHINDX=0 F FHI=0:0 S FHI=$O(^DGPM("APTT1",DFN,FHI)) Q:FHI'>0  D
"RTN","FHMNINQ",8,0)
 .S FHINDX=FHINDX+1
"RTN","FHMNINQ",9,0)
 .S FHLST(FHINDX)=FHI S Y=FHI D DD^%DT W !,FHINDX,?5,Y
"RTN","FHMNINQ",10,0)
 .Q
"RTN","FHMNINQ",11,0)
 D SELADM I '$G(FHADM) D EX Q
"RTN","FHMNINQ",12,0)
 D DEV,EX Q
"RTN","FHMNINQ",13,0)
 ;
"RTN","FHMNINQ",14,0)
EN ;
"RTN","FHMNINQ",15,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHMNINQ",16,0)
 S PG=0,EX="" D NOW^%DTC S Y=X D DD^%DT S FHNDT=Y D HDR
"RTN","FHMNINQ",17,0)
 S FLG=0 I '$O(^FHPT(FHDFN,"A",FHADM,"MO",0)) D
"RTN","FHMNINQ",18,0)
 .W "NO MONITORS FOR THIS PATIENT" S FLG=1 Q
"RTN","FHMNINQ",19,0)
 Q:FLG
"RTN","FHMNINQ",20,0)
 S J=0 F  S J=$O(^FHPT(FHDFN,"A",FHADM,"MO",J)) Q:'J!(EX=U)  D
"RTN","FHMNINQ",21,0)
 .I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNINQ",22,0)
 .W !!?3,$P(^FHPT(FHDFN,"A",FHADM,"MO",J,0),U,1)
"RTN","FHMNINQ",23,0)
 .W !?6,"Entered: " S Y=$P(^(0),U,2) X ^DD("DD") W Y K Y
"RTN","FHMNINQ",24,0)
 .S Y=$P(^FHPT(FHDFN,"A",FHADM,"MO",J,0),U,5) Q:'Y
"RTN","FHMNINQ",25,0)
 .W ?40,"Cleared: " X ^DD("DD") W Y Q
"RTN","FHMNINQ",26,0)
 I IOST?1"C".E,EX'=U W ! K DIR S DIR(0)="E" D ^DIR
"RTN","FHMNINQ",27,0)
EX K %DT,X,Y,FHI,FHINDX,FHLST,FHADM,FHNDT,FHDFN,DFN,SSN,FLG,J
"RTN","FHMNINQ",28,0)
 Q
"RTN","FHMNINQ",29,0)
DEV ;device and queue info
"RTN","FHMNINQ",30,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHMNINQ",31,0)
 I '$D(IO("Q")) U IO D EN,^%ZISC Q
"RTN","FHMNINQ",32,0)
 S ZTRTN="EN^FHMNINQ"
"RTN","FHMNINQ",33,0)
 S ZTSAVE("FHI")="",ZTSAVE("FHINDX")="",ZTSAVE("FHNDT")=""
"RTN","FHMNINQ",34,0)
 S ZTSAVE("FHLST")="",ZTSAVE("FHADM")=""
"RTN","FHMNINQ",35,0)
 S ZTSAVE("DFN")="",ZTSAVE("FHDFN")=""
"RTN","FHMNINQ",36,0)
 S ZTDESC="Dietetics Monitor Inquiry" D ^%ZTLOAD
"RTN","FHMNINQ",37,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHMNINQ",38,0)
 Q
"RTN","FHMNINQ",39,0)
SELADM ;
"RTN","FHMNINQ",40,0)
 K DIR W ! S DIR(0)="N"
"RTN","FHMNINQ",41,0)
 S DIR("A")="Select Admission Date for this Patient"
"RTN","FHMNINQ",42,0)
 D ^DIR
"RTN","FHMNINQ",43,0)
 Q:$D(DIRUT)
"RTN","FHMNINQ",44,0)
 I Y<1!(Y>FHINDX) W !!,"Response must be no less than 1 and no greater than ",FHINDX,"." D SELADM Q
"RTN","FHMNINQ",45,0)
 S FHI=FHLST(Y),FHADM=$O(^DGPM("APTT1",DFN,FHI,0))
"RTN","FHMNINQ",46,0)
 Q
"RTN","FHMNINQ",47,0)
PG ;
"RTN","FHMNINQ",48,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHMNINQ",49,0)
 D HDR Q
"RTN","FHMNINQ",50,0)
HDR ;
"RTN","FHMNINQ",51,0)
 W:$Y @IOF W !,FHNDT,?60,"Page: " S PG=PG+1 W PG,!!
"RTN","FHMNINQ",52,0)
 W $E($P(^DPT(DFN,0),U,1),1,28) S SSN=$P(^(0),U,9)
"RTN","FHMNINQ",53,0)
 W ?30,$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","FHMNINQ",54,0)
 W ?44,"Admission Date: " S Y=FHI X ^DD("DD") W Y
"RTN","FHMNINQ",55,0)
 W ! F Z=1:1:79 W "="
"RTN","FHMNPRT")
0^107^B16366448
"RTN","FHMNPRT",1,0)
FHMNPRT ;Hines OIFO/RTK - Dietetics Monitor Report Print ;10/23/01  10:29
"RTN","FHMNPRT",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMNPRT",3,0)
 ;
"RTN","FHMNPRT",4,0)
PRINT ;
"RTN","FHMNPRT",5,0)
 K FHMNTT S PG=0,EX="" D NOW^%DTC S Y=X D DD^%DT S FHNDT=Y D HDR
"RTN","FHMNPRT",6,0)
 S (ALLMON,M1,M2,M3,M4,M5)=0
"RTN","FHMNPRT",7,0)
 I FHNXIEN'="ALL",'$D(FHDATA(FHNXIEN)) D MESSAGE Q
"RTN","FHMNPRT",8,0)
 I FHNXIEN'="ALL" S ZZ=FHNXIEN D DISP,D1END Q
"RTN","FHMNPRT",9,0)
 I FHNXIEN="ALL" S ZZ="" F  S ZZ=$O(FHDATA(ZZ)) Q:ZZ=""!(EX=U)  D
"RTN","FHMNPRT",10,0)
 .D DISP
"RTN","FHMNPRT",11,0)
 .S ALLMON=ALLMON+MON
"RTN","FHMNPRT",12,0)
 .S M1=M1+MON1,M2=M2+MON2,M3=M3+MON3,M4=M4+MON4,M5=M5+MON5
"RTN","FHMNPRT",13,0)
 .Q
"RTN","FHMNPRT",14,0)
 I FHNXIEN'="ALL"!(EX=U) D END Q
"RTN","FHMNPRT",15,0)
 I ALLMON=0 W !!?5,"NO PATIENTS WITH MONITORS IN GIVEN DATE RANGE" D END Q
"RTN","FHMNPRT",16,0)
 W !!?16,"Totals for ALL ",$S(FHSORT="C":"Clinicians.......: ",1:"Wards............: "),$J(ALLMON,3)
"RTN","FHMNPRT",17,0)
 W !?16,"Monitor: Albumin < 3.2..........: ",$J(M1,3),"   ",$J(((M1/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",18,0)
 W !?16,"Monitor: BMI < 21...............: ",$J(M2,3),"   ",$J(((M2/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",19,0)
 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(M3,3),"   ",$J(((M3/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",20,0)
 W !?16,"Monitor: On Hyperals............: ",$J(M4,3),"   ",$J(((M4/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",21,0)
 W !?16,"Monitor: On Tubefeeding.........: ",$J(M5,3),"   ",$J(((M5/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",22,0)
 I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",23,0)
 W !!!,"TOTAL ADMISSIONS....:",?23,FHTADM
"RTN","FHMNPRT",24,0)
 W !,"TOTAL MONITORS......:",?23,ALLMON
"RTN","FHMNPRT",25,0)
 I FHTADM>0 W !,"PERCENTAGE..........:",?23,$J(((ALLMON/FHTADM)*100),1,2),"%"
"RTN","FHMNPRT",26,0)
 ;
"RTN","FHMNPRT",27,0)
D1END I IOST?1"C".E,EX'=U W ! K DIR S DIR(0)="E" D ^DIR
"RTN","FHMNPRT",28,0)
 D END Q
"RTN","FHMNPRT",29,0)
DISP ;
"RTN","FHMNPRT",30,0)
 I FHSORT="C" W !!?25,"CLINICIAN: ",ZZ
"RTN","FHMNPRT",31,0)
 I FHSORT="W" W !!?25,"WARD: ",ZZ
"RTN","FHMNPRT",32,0)
 S (TOT,MON,MON1,MON2,MON3,MON4,MON5)=0
"RTN","FHMNPRT",33,0)
 F YY=0:0 S YY=$O(FHDATA(ZZ,YY)) Q:YY'>0  D
"RTN","FHMNPRT",34,0)
 .F HH=0:0 S HH=$O(FHDATA(ZZ,YY,HH)) Q:HH'>0!(EX=U)  D
"RTN","FHMNPRT",35,0)
 ..I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",36,0)
 ..S DFN=$P(FHDATA(ZZ,YY,HH),U,5)
"RTN","FHMNPRT",37,0)
 ..S Y=YY X ^DD("DD") W !,Y
"RTN","FHMNPRT",38,0)
 ..W ?13,$P(FHDATA(ZZ,YY,HH),U,1)
"RTN","FHMNPRT",39,0)
 ..W ?39,$P(FHDATA(ZZ,YY,HH),U,2)
"RTN","FHMNPRT",40,0)
 ..W ?47,$P(FHDATA(ZZ,YY,HH),U,6)
"RTN","FHMNPRT",41,0)
 ..I $P(FHDATA(ZZ,YY,HH),U,3)="Yes" D
"RTN","FHMNPRT",42,0)
 ...F NUM=0:0 S NUM=$O(FHMON(DFN,HH,NUM)) Q:NUM'>0!(EX=U)  D
"RTN","FHMNPRT",43,0)
 ....I NUM'=1 W !
"RTN","FHMNPRT",44,0)
 ....S MON=MON+1,MONTYP=$P($P(FHMON(DFN,HH,NUM),U,1),": ",2)
"RTN","FHMNPRT",45,0)
 ....S PC=$S(MONTYP["Albumin":1,MONTYP["BMI":2,MONTYP["NPO+Clr":3,MONTYP["Hyper":4,1:5)
"RTN","FHMNPRT",46,0)
 ....I $G(FHMNTT(ZZ))="" S FHMNTT(ZZ)=""
"RTN","FHMNPRT",47,0)
 ....S $P(FHMNTT(ZZ),U,PC)=$P(FHMNTT(ZZ),U,PC)+1
"RTN","FHMNPRT",48,0)
 ....W ?56,MONTYP I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",49,0)
 ....Q
"RTN","FHMNPRT",50,0)
 ...Q
"RTN","FHMNPRT",51,0)
 ..S TOT=TOT+1
"RTN","FHMNPRT",52,0)
 ..Q
"RTN","FHMNPRT",53,0)
 .Q
"RTN","FHMNPRT",54,0)
 I EX=U Q
"RTN","FHMNPRT",55,0)
 W !!?16,"Total Number of Monitors........: ",$J(MON,3) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",56,0)
 S PCE=$P(FHMNTT(ZZ),U,1) I PCE>0 W !?16,"Monitor: Albumin < 3.2..........: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON1=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",57,0)
 S PCE=$P(FHMNTT(ZZ),U,2) I PCE>0 W !?16,"Monitor: BMI < 21...............: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON2=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",58,0)
 S PCE=$P(FHMNTT(ZZ),U,3) I PCE>0 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON3=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",59,0)
 S PCE=$P(FHMNTT(ZZ),U,4) I PCE>0 W !?16,"Monitor: On Hyperals............: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON4=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",60,0)
 S PCE=$P(FHMNTT(ZZ),U,5) I PCE>0 W !?16,"Monitor: On Tubefeeding.........: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON5=PCE
"RTN","FHMNPRT",61,0)
 W ! Q
"RTN","FHMNPRT",62,0)
 ;
"RTN","FHMNPRT",63,0)
MESSAGE ;
"RTN","FHMNPRT",64,0)
 W !!?5,"NO PATIENTS WITH MONITORS IN GIVEN DATE RANGE"
"RTN","FHMNPRT",65,0)
 W !?10,"FOR THIS ",$S(FHSORT="C":"CLINICIAN",1:"WARD"),": ",FHNXIEN
"RTN","FHMNPRT",66,0)
 Q
"RTN","FHMNPRT",67,0)
END K FHMNTT,HH,M1,M2,M3,M4,M5,MON,MON1,MON2,MON3,MON4,MON5,MONTYP
"RTN","FHMNPRT",68,0)
 K NUM,PC,PCE,PG,PER,TOT,YY
"RTN","FHMNPRT",69,0)
 Q
"RTN","FHMNPRT",70,0)
PG ;
"RTN","FHMNPRT",71,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHMNPRT",72,0)
 D HDR Q
"RTN","FHMNPRT",73,0)
HDR ;Header
"RTN","FHMNPRT",74,0)
 W:$Y @IOF W !,FHNDT,?60,"Page: " S PG=PG+1 W PG,!!
"RTN","FHMNPRT",75,0)
 W "Admission",?13,"Patient",?39,"SSN",?45,"Status",?56,"Monitor(s)"
"RTN","FHMNPRT",76,0)
 W ! F Z=1:1:79 W "="
"RTN","FHMNPRT",77,0)
 Q
"RTN","FHMNREP")
0^108^B12507010
"RTN","FHMNREP",1,0)
FHMNREP ;Hines OIFO/RTK - Dietetics Monitor Report ;10/18/01  11:49
"RTN","FHMNREP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMNREP",3,0)
 ;
"RTN","FHMNREP",4,0)
DATE ;sets date
"RTN","FHMNREP",5,0)
 ; Check for multidivisional site
"RTN","FHMNREP",6,0)
 I $P($G(^FH(119.9,1,0)),U,20)'="N" D ^FHMMNREP Q
"RTN","FHMNREP",7,0)
 S (FHTADM,FHTMON)=0
"RTN","FHMNREP",8,0)
 W ! S %DT="AEPT",%DT("A")="Enter beginning date: " D ^%DT Q:Y<0
"RTN","FHMNREP",9,0)
 S FHSDT=Y,%DT(0)=FHSDT,%DT("A")="Enter ending date: " D ^%DT K %DT(0)
"RTN","FHMNREP",10,0)
 S FHEDT=Y I Y<0 D END Q
"RTN","FHMNREP",11,0)
 D SORTCR S FHSORT=Y I Y="^" D END Q
"RTN","FHMNREP",12,0)
 I FHSORT="C" D FHCL Q:'$D(FHCLIEN)  S FHNXIEN=CLNAM
"RTN","FHMNREP",13,0)
 I FHSORT="W" D FHWA Q:'$D(FHWRIEN)  S FHNXIEN=WRDNAM
"RTN","FHMNREP",14,0)
 D DEV,END Q
"RTN","FHMNREP",15,0)
 ;
"RTN","FHMNREP",16,0)
FHCL ;
"RTN","FHMNREP",17,0)
 K DIR S DIR(0)="Y",DIR("A")="Select ALL Clinicians",DIR("B")="Y" D ^DIR
"RTN","FHMNREP",18,0)
 I Y=1 S (FHCLIEN,CLNAM)="ALL"
"RTN","FHMNREP",19,0)
 I Y=0 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="Select CLINICIAN: " D ^DIC S FHCLIEN=$P(Y,U,1),CLNAM=$P($G(^VA(200,FHCLIEN,0)),U,1)
"RTN","FHMNREP",20,0)
 I (Y=-1)!($D(DUOUT))!($D(DTOUT)) D END Q
"RTN","FHMNREP",21,0)
 Q
"RTN","FHMNREP",22,0)
FHWA ;
"RTN","FHMNREP",23,0)
 K DIR S DIR(0)="Y",DIR("A")="Select ALL Wards",DIR("B")="Y" D ^DIR
"RTN","FHMNREP",24,0)
 I Y=1 S (FHWRIEN,WRDNAM)="ALL"
"RTN","FHMNREP",25,0)
 I Y=0 K DIC S DIC="^FH(119.6,",DIC(0)="AEQM" D ^DIC S FHWRIEN=$P(Y,U,1),WRDNAM=$P($G(^FH(119.6,FHWRIEN,0)),U,1)
"RTN","FHMNREP",26,0)
 I (Y=-1)!($D(DUOUT))!($D(DTOUT)) D END Q
"RTN","FHMNREP",27,0)
 Q
"RTN","FHMNREP",28,0)
EN ;
"RTN","FHMNREP",29,0)
 ;FHDATA SUBSCRIPTS(CLINIC OR WARD NAME,DGPM DATE,DGPM ENTRY)
"RTN","FHMNREP",30,0)
 ;FHDATA ARRAY="PatName^SSN^Monitors?^DischargeDt^DFN^Status"
"RTN","FHMNREP",31,0)
 ;
"RTN","FHMNREP",32,0)
 K FHDATA,FHMON
"RTN","FHMNREP",33,0)
 S I=FHSDT F  S I=$O(^DGPM("ATT1",I)) Q:'I!(I>FHEDT)  D
"RTN","FHMNREP",34,0)
 .S J=0 F  S J=$O(^DGPM("ATT1",I,J)) Q:'J  D
"RTN","FHMNREP",35,0)
 ..S FHTADM=FHTADM+1
"RTN","FHMNREP",36,0)
 ..S DFN=$P($G(^DGPM(J,0)),U,3)
"RTN","FHMNREP",37,0)
 ..S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHMNREP",38,0)
 ..I '$D(^FHPT(FHDFN,"A",J,"MO","B")) Q
"RTN","FHMNREP",39,0)
 ..S II=$P(I,".")
"RTN","FHMNREP",40,0)
 ..S WRD=$P($G(^FHPT(FHDFN,"A",J,0)),U,8),CLN=""
"RTN","FHMNREP",41,0)
 ..I WRD'="" S CLN=$P($G(^FH(119.6,WRD,0)),"^",2)
"RTN","FHMNREP",42,0)
 ..;S CLN=$P($G(^DGPM(J,0)),U,19),WRD=$P($G(^DGPM(J,0)),U,6)
"RTN","FHMNREP",43,0)
 ..S INDX=$S(FHSORT="C":CLN,1:WRD) I INDX="" Q
"RTN","FHMNREP",44,0)
 ..S INDX=$S(FHSORT="C":$P($G(^VA(200,CLN,0)),U,1),1:$P($G(^FH(119.6,WRD,0)),U,1))
"RTN","FHMNREP",45,0)
 ..S $P(FHDATA(INDX,II,J),U,1)=$E($P(^DPT(DFN,0),U,1),1,23)
"RTN","FHMNREP",46,0)
 ..S $P(FHDATA(INDX,II,J),U,5)=DFN
"RTN","FHMNREP",47,0)
 ..S $P(FHDATA(INDX,II,J),U,2)=$E($P(^DPT(DFN,0),U,9),6,9)
"RTN","FHMNREP",48,0)
 ..I $D(^FHPT(FHDFN,"A",J,"MO","B")) S $P(FHDATA(INDX,II,J),U,3)="Yes",FHTMON=FHTMON+1,MCNT=0 D
"RTN","FHMNREP",49,0)
 ...F FHMN=0:0 S FHMN=$O(^FHPT(FHDFN,"A",J,"MO",FHMN)) Q:FHMN'>0  S MCNT=MCNT+1,FHMON(DFN,J,MCNT)=$P($G(^FHPT(FHDFN,"A",J,"MO",FHMN,0)),"^",1)
"RTN","FHMNREP",50,0)
 ..S Y=$P($P($G(^FHPT(FHDFN,"A",J,0)),U,14),".",1) I Y X ^DD("DD") S $P(FHDATA(INDX,II,J),U,4)=Y
"RTN","FHMNREP",51,0)
 ..I $D(^FHPT(FHDFN,"S",0)) S NS=$O(^FHPT(FHDFN,"S",0)),STAT=$P($G(^FHPT(FHDFN,"S",NS,0)),U,2) S $P(FHDATA(INDX,II,J),U,6)=$P($G(^FH(115.4,STAT,0)),U,1)
"RTN","FHMNREP",52,0)
 ..Q
"RTN","FHMNREP",53,0)
 .Q
"RTN","FHMNREP",54,0)
 D PRINT^FHMNPRT
"RTN","FHMNREP",55,0)
 Q
"RTN","FHMNREP",56,0)
DEV ;get device and set up queue
"RTN","FHMNREP",57,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHMNREP",58,0)
 I '$D(IO("Q")) U IO D EN,^%ZISC,END Q
"RTN","FHMNREP",59,0)
 S ZTRTN="EN^FHMNREP",ZTSAVE("FHSDT")="",ZTSAVE("FHEDT")=""
"RTN","FHMNREP",60,0)
 S ZTSAVE("FHNDT")="",ZTSAVE("FHPER")="",ZTSAVE("FHSORT")=""
"RTN","FHMNREP",61,0)
 S ZTSAVE("FHNXIEN")="",ZTSAVE("FHTADM")="",ZTSAVE("FHTMON")=""
"RTN","FHMNREP",62,0)
 S ZTDESC="Dietetics Monitor Report" D ^%ZTLOAD
"RTN","FHMNREP",63,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHMNREP",64,0)
 D END Q
"RTN","FHMNREP",65,0)
SORTCR ;
"RTN","FHMNREP",66,0)
 K DIR S DIR(0)="SB^C:CLINICIAN;W:WARD",DIR("A")="Sort by Clinician/Ward"
"RTN","FHMNREP",67,0)
 D ^DIR
"RTN","FHMNREP",68,0)
 Q
"RTN","FHMNREP",69,0)
END ;kill and quit
"RTN","FHMNREP",70,0)
 K CLN,CLNAM,FHDFN,DFN,I,II,INDX,J,SSN,MCNT
"RTN","FHMNREP",71,0)
 K FHCLIEN,FHEDT,FHMN,FHNDT,FHNXIEN,FHTADM,FHTMON
"RTN","FHMNREP",72,0)
 K FHPER,FHSDT,FHSORT,FHWRIEN,WRD,WRDNAM,X,Y,Z
"RTN","FHMNREP",73,0)
 Q
"RTN","FHMTK")
0^109^B14398258
"RTN","FHMTK",1,0)
FHMTK ; HISC/REL/NCA - Enter/Edit Diet Patterns ;12/6/00  15:15
"RTN","FHMTK",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK",3,0)
 ;last edited NOV 27,2000
"RTN","FHMTK",4,0)
 S FLG=0 K ^TMP($J)
"RTN","FHMTK",5,0)
F0 K DI S N1=0,ANS=""
"RTN","FHMTK",6,0)
F1 W ! K DIC S DIC="^FH(111,",DIC(0)="AEQMZ" D ^DIC K DIC G KIL:X[U!$D(DTOUT),F5:X="",F1:Y<1
"RTN","FHMTK",7,0)
 S PREC=$P(Y(0),U,4) I PREC,$D(DI(PREC)) W *7,!!,"This conflicts with ",$P(DI(PREC),"^",2),! G F1
"RTN","FHMTK",8,0)
 S N1=N1+1,DI(PREC)=+Y_"^"_Y(0) G F5:+Y=1,F1:N1<5 W *7,!!,"You have now selected the maximum of 5 Diet Modifications!"
"RTN","FHMTK",9,0)
F5 I 'N1,'FLG G KIL
"RTN","FHMTK",10,0)
 I 'N1 D CLEANTMP^FHMTK8 D ^FHMTK7 G KIL ;P30
"RTN","FHMTK",11,0)
 I N1>1 D  I CHK W !!,"You can not order REGULAR with another Diet." G F0
"RTN","FHMTK",12,0)
 .S CHK=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  I +DI(D0)=1 S CHK=1 Q
"RTN","FHMTK",13,0)
 .Q
"RTN","FHMTK",14,0)
 W !!,"You have selected the following Diet:",!
"RTN","FHMTK",15,0)
 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  W !?5,$P(DI(D0),U,2)
"RTN","FHMTK",16,0)
F9 R !!,"Is this Correct? Y// ",Y:DTIME G:'$T!(Y="^") KIL S:Y="" Y="Y" S X=Y D TR^FH S Y=X
"RTN","FHMTK",17,0)
 I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,!,"  Answer YES to accept diet list; NO to select diets again" G F9
"RTN","FHMTK",18,0)
 I Y'?1"Y".E W !!,"Select new diets ..." G F0
"RTN","FHMTK",19,0)
 S FHOR="^^^^",N1=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  S N1=N1+1,$P(FHOR,U,N1)=+DI(D0)
"RTN","FHMTK",20,0)
 S Y="" F A1=1:1:5 S D3=$P(FHOR,"^",A1) Q:'D3  S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHMTK",21,0)
 S DA=$O(^FH(111.1,"AB",FHOR,0)) G:DA F09
"RTN","FHMTK",22,0)
 K DIC,DD,DO S DIC="^FH(111.1,",DIC(0)="L",X=Y D FILE^DICN S DA=+Y
"RTN","FHMTK",23,0)
 S $P(^FH(111.1,DA,0),"^",2,6)=FHOR,^FH(111.1,"AB",FHOR,DA)=""
"RTN","FHMTK",24,0)
F09 D NEWTMP^FHMTK8 ;P30
"RTN","FHMTK",25,0)
 S FHDA=DA D TRAN G:ANS="^" KIL K A1
"RTN","FHMTK",26,0)
 D CODE I Z,'$P($G(^FH(111.1,FHDA,0)),"^",7) S $P(^FH(111.1,FHDA,0),"^",7)=Z
"RTN","FHMTK",27,0)
F10 K DIC,DIE W ! S DIE="^FH(111.1,",DA=FHDA,DR="10:99" D ^DIE K DIC,DIE,DR
"RTN","FHMTK",28,0)
 I $P($G(^FH(111.1,FHDA,0)),"^",7)="" S DIK="^FH(111.1,",DA(1)=111.1,DA=FHDA D ^DIK W *7,!,"<Pattern deleted>" K DIK,DA,^FH(111.1,"AB",FHOR,FHDA)
"RTN","FHMTK",29,0)
 S FLG=1 G F0
"RTN","FHMTK",30,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHMTK",31,0)
CODE ; Recode diet
"RTN","FHMTK",32,0)
 S Z=0 Q:"^^^^"[FHOR  I FHOR="1^^^^" S Z=1 G C1
"RTN","FHMTK",33,0)
 S M="^" F K1=1:1:5 S Z=$P(FHOR,"^",K1) Q:Z<1  S M=M_+$P(^FH(111,Z,0),"^",5)_"^"
"RTN","FHMTK",34,0)
 F LC=0:0 S LC=$O(^FH(116.2,"AR",LC)) Q:LC<1  S X=^(LC) F K1=1:1 S X1=$P(X,"^",K1) Q:X1<1  D REC G:Z C1
"RTN","FHMTK",35,0)
 S Z=0
"RTN","FHMTK",36,0)
C1 Q
"RTN","FHMTK",37,0)
REC S Z=$P(X1,":",1),X1=$P(X1,":",2) F K2=1:1 S C=$P(X1," ",K2) Q:C<1  G:M'[("^"_C_"^") R1
"RTN","FHMTK",38,0)
 Q
"RTN","FHMTK",39,0)
R1 S Z=0 Q
"RTN","FHMTK",40,0)
TRAN R !!,"Do you want to import Recipe Categories from another Diet Pattern? N // ",X:DTIME
"RTN","FHMTK",41,0)
 I '$T!(X["^") S ANS="^" Q
"RTN","FHMTK",42,0)
 S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,!,"  Answer YES or NO" G TRAN
"RTN","FHMTK",43,0)
 S ANS=X?1"Y".E Q:'ANS
"RTN","FHMTK",44,0)
T1 W ! K DIC S DIC="^FH(111.1,",DIC(0)="AEMQ" D ^DIC K DIC
"RTN","FHMTK",45,0)
 I "^"[X!($D(DTOUT)) S ANS="^" Q
"RTN","FHMTK",46,0)
 G:Y<1 T1 S FHD=+Y
"RTN","FHMTK",47,0)
 L +^FH(111.1,FHDA,0)
"RTN","FHMTK",48,0)
 S SF=$P($G(^FH(111.1,FHD,0)),"^",8),$P(^FH(111.1,FHDA,0),"^",8)=SF
"RTN","FHMTK",49,0)
 S:'$D(^FH(111.1,FHDA,"B",0)) ^(0)="^111.115P^^"
"RTN","FHMTK",50,0)
 S:'$D(^FH(111.1,FHDA,"N",0)) ^(0)="^111.116P^^"
"RTN","FHMTK",51,0)
 S:'$D(^FH(111.1,FHDA,"E",0)) ^(0)="^111.117P^^"
"RTN","FHMTK",52,0)
 F MEAL="B","N","E" F LP=0:0 S LP=$O(^FH(111.1,FHD,MEAL,LP)) Q:LP<1  S L1=$G(^(LP,0)) D ADD
"RTN","FHMTK",53,0)
 S:'$D(^FH(111.1,FHDA,"BS",0)) ^(0)="^111.11P^^"
"RTN","FHMTK",54,0)
 S:'$D(^FH(111.1,FHDA,"NS",0)) ^(0)="^111.12P^^"
"RTN","FHMTK",55,0)
 S:'$D(^FH(111.1,FHDA,"ES",0)) ^(0)="^111.13P^^"
"RTN","FHMTK",56,0)
 F MEAL="BS","NS","ES" F LP=0:0 S LP=$O(^FH(111.1,FHD,MEAL,LP)) Q:LP<1  S L1=$G(^(LP,0)) D ADD
"RTN","FHMTK",57,0)
 S:'$D(^FH(111.1,FHDA,"RES",0)) ^(0)="^111.119P^^"
"RTN","FHMTK",58,0)
 S MEAL="RES" F LP=0:0 S LP=$O(^FH(111.1,FHD,MEAL,LP)) Q:LP<1  S L1=$G(^(LP,0)) D ADD
"RTN","FHMTK",59,0)
 L -^FH(111.1,FHDA,0) W !,"..Done" Q
"RTN","FHMTK",60,0)
ADD I $D(^FH(111.1,FHDA,MEAL,"B",+L1)) Q
"RTN","FHMTK",61,0)
A S FHX1=$G(^FH(111.1,FHDA,MEAL,0)),FHX2=$P(FHX1,"^",3)+1
"RTN","FHMTK",62,0)
 S $P(^FH(111.1,FHDA,MEAL,0),"^",3)=FHX2
"RTN","FHMTK",63,0)
 I $D(^FH(111.1,FHDA,MEAL,FHX2,0)) G A
"RTN","FHMTK",64,0)
 S $P(^FH(111.1,FHDA,MEAL,0),"^",4)=($P(FHX1,"^",4)+1)
"RTN","FHMTK",65,0)
 S ^FH(111.1,FHDA,MEAL,FHX2,0)=+L1_"^"_$P(L1,"^",2)
"RTN","FHMTK",66,0)
 S ^FH(111.1,FHDA,MEAL,"B",+L1,FHX2)=""
"RTN","FHMTK",67,0)
 Q
"RTN","FHMTK",68,0)
 ;
"RTN","FHMTK1")
0^110^B16276192
"RTN","FHMTK1",1,0)
FHMTK1 ; HISC/REL/NCA - Tray Tickets ;4/20/95  15:28
"RTN","FHMTK1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK1",3,0)
F0 ;
"RTN","FHMTK1",4,0)
 K FHOMF,DFN,IEN200 S FHBY="",FHTTDFN=0
"RTN","FHMTK1",5,0)
 K DIR S DIR(0)="SBAO^P:Patient;C:Communication Office;L:Location;A:All"
"RTN","FHMTK1",6,0)
 S DIR("B")="COMM"
"RTN","FHMTK1",7,0)
 S DIR("A")="Print by PATIENT, COMMUNICATION OFFICE, LOCATION or ALL? "
"RTN","FHMTK1",8,0)
 D ^DIR I $D(DIRUT) D KIL Q
"RTN","FHMTK1",9,0)
 S FHBY=Y
"RTN","FHMTK1",10,0)
 I FHBY="P" D P0 Q
"RTN","FHMTK1",11,0)
 I FHBY="C" D C0 Q
"RTN","FHMTK1",12,0)
 I FHBY="L" D NL0 Q
"RTN","FHMTK1",13,0)
 I FHBY="A" S (DFN,FHP,W1)="" D S0 Q
"RTN","FHMTK1",14,0)
 Q
"RTN","FHMTK1",15,0)
C0 ; Sort by Communication Office
"RTN","FHMTK1",16,0)
 S FHP=$O(^FH(119.73,0))
"RTN","FHMTK1",17,0)
 I FHP'<1,$O(^FH(119.73,FHP))<1 S (DFN,W1)="" G S0
"RTN","FHMTK1",18,0)
 K DIC S DIC="^FH(119.73,",DIC("A")="Select COMMUNICATION OFFICE: "
"RTN","FHMTK1",19,0)
 S DIC(0)="AEQM" W ! D ^DIC K DIC
"RTN","FHMTK1",20,0)
 G KIL:"^"[X!$D(DTOUT),C0:Y<1 S FHP=+Y,(DFN,W1)="" G S0
"RTN","FHMTK1",21,0)
NL0 ; Sort by Location
"RTN","FHMTK1",22,0)
 K DIC S DIC="^FH(119.6,",DIC("A")="Select NUTRITION LOCATION: "
"RTN","FHMTK1",23,0)
 S DIC(0)="AEQM" W ! D ^DIC K DIC
"RTN","FHMTK1",24,0)
 G KIL:"^"[X!$D(DTOUT),NL0:Y<1 S W1=+Y,(DFN,FHP)="" G S0
"RTN","FHMTK1",25,0)
P0 ; Single patient
"RTN","FHMTK1",26,0)
 S FHALL=1 D ^FHOMDPA S FHTTDFN=FHDFN I 'FHDFN D KIL Q
"RTN","FHMTK1",27,0)
 I 'DFN D P1 Q
"RTN","FHMTK1",28,0)
 I $G(^DPT(DFN,.1))="" D P1 Q
"RTN","FHMTK1",29,0)
 S (FHP,W1)="",SRT="R" G F1
"RTN","FHMTK1",30,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W !!?5,"  [ Patient has expired. ]" G KIL
"RTN","FHMTK1",31,0)
S0 ; Start
"RTN","FHMTK1",32,0)
 I $G(TABREC)="YES" S SRT="A" G F1
"RTN","FHMTK1",33,0)
 R !!,"Sort Patients: (A=Alphabetically  R=Room-Bed) R// ",SRT:DTIME G:'$T!(SRT["^") KIL S:SRT="" SRT="R" I "ar"[SRT S X=SRT D TR^FH S SRT=X
"RTN","FHMTK1",34,0)
 I SRT'?1U!("AR"'[SRT) W *7," Enter A or R" G S0
"RTN","FHMTK1",35,0)
F1 S %DT("A")="Select Date: ",%DT="AEFX",%DT("B")="TODAY",%DT(0)=DT W ! D ^%DT G KIL:"^"[X!$D(DTOUT),F1:Y<1 S (X1,D1)=+Y
"RTN","FHMTK1",36,0)
 D E1^FHPRC1 I FHCY<1 W *7,!!,"No MENU CYCLE Defined for that Date!" G F1
"RTN","FHMTK1",37,0)
 I '$D(^FH(116,FHCY,"DA",FHDA,0)) W *7,!!,"MENU CYCLE DAY Not Defined for that Date!" G F1
"RTN","FHMTK1",38,0)
R1 R !!,"Select MEAL (B,N,E,or ALL): ",MEAL:DTIME G:'$T!("^"[MEAL) KIL S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="A"
"RTN","FHMTK1",39,0)
 I "BNEA"'[MEAL!(MEAL'?1U) W *7,!,"Select B for Breakfast, N for Noon, or E for Evening or ALL for all meals" G R1
"RTN","FHMTK1",40,0)
 S FHOMEAL=MEAL,FHDA=^FH(116,FHCY,"DA",FHDA,0)
"RTN","FHMTK1",41,0)
 I $D(^FH(116.3,D1,0)) S X=^(0) F LL=2:1:4 I $P(X,"^",LL) S $P(FHDA,"^",LL)=$P(X,"^",LL)
"RTN","FHMTK1",42,0)
 I MEAL="A" F LP="B","N","E" S FHX1=$P(FHDA,"^",$F("BNE",LP)) I 'FHX1 W *7,!!,"*** NO MENU DEFINED FOR ",$S(LP="B":"BREAKFAST",LP="N":"NOON",1:"EVENING")," ***" G KIL
"RTN","FHMTK1",43,0)
 S (SUM,UPD)=0 G:MEAL="A" D5
"RTN","FHMTK1",44,0)
 S FHX1=$P(FHDA,"^",$F("BNE",MEAL)) I 'FHX1 W *7,!!,"*** NO MENU DEFINED FOR THIS MEAL ***" G KIL
"RTN","FHMTK1",45,0)
 I $G(IEN200)'="",$G(FHOMF)=1 Q
"RTN","FHMTK1",46,0)
 G L0:DFN,R2
"RTN","FHMTK1",47,0)
D5 G:DFN!($G(IEN200)'="") L0 R !!,"Consolidated List? Y// ",X:DTIME G:'$T!(X="^") KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G D5
"RTN","FHMTK1",48,0)
 S SUM=X?1"Y".E
"RTN","FHMTK1",49,0)
R2 I $G(TABREC)="YES" G L0
"RTN","FHMTK1",50,0)
 R !!,"Print Only Ones With Order Changes related to the Tray Ticket? N // ",X:DTIME G:'$T!(X="^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,!,"  Answer YES or NO" G R2
"RTN","FHMTK1",51,0)
 S UPD=X?1"Y".E
"RTN","FHMTK1",52,0)
L0 ;I $G(FHOMF)=1 Q
"RTN","FHMTK1",53,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHMTK1",54,0)
 I $D(IO("Q")) S FHPGM="B1^FHMTK1A",FHLST="D1^MEAL^IEN200^FHOMEAL^FHOMF^FHBY^FHDFN^FHTTDFN^FHX1^FHP^W1^DFN^FHDA^SUM^UPD^SRT^TABREC" D EN2^FH G KIL
"RTN","FHMTK1",55,0)
 U IO D B1^FHMTK1A D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHMTK1",56,0)
KIL K ^TMP($J),TABREC G KILL^XUSCLEAN
"RTN","FHMTK1",57,0)
 ;
"RTN","FHMTK1",58,0)
TABREC ; Entry point for separate Print Tab Recipes option
"RTN","FHMTK1",59,0)
 S TABREC="YES" D F0
"RTN","FHMTK1",60,0)
 K TABREC Q
"RTN","FHMTK1",61,0)
P1 ; Tray tickets for single outpatient
"RTN","FHMTK1",62,0)
 S (FHP,W1)="",SRT="R",FHOMF=1,NBR=0,MFLG=0
"RTN","FHMTK1",63,0)
 S FHBOT=$P($G(^FH(119.9,1,4)),"^",1) D F1
"RTN","FHMTK1",64,0)
 S LN=$S(IOST?1"C".E:IOSL-2,1:IOSL-6),SL=40
"RTN","FHMTK1",65,0)
 I '$D(MEAL) Q
"RTN","FHMTK1",66,0)
 I MEAL="A" S MFLG=1
"RTN","FHMTK1",67,0)
 D ^FHOMTK1 Q
"RTN","FHMTK1",68,0)
 Q
"RTN","FHMTK1",69,0)
 ;
"RTN","FHMTK1",70,0)
OLDF0 ; Old F0 entry point, no longer used
"RTN","FHMTK1",71,0)
 ;K FHOMF S FHBY="" R !!,"Print by PATIENT or COMMUNICATION OFFICE or LOCATION or ALL? COMM// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="C" D TR^FH
"RTN","FHMTK1",72,0)
 ;I $P("PATIENT",X,1)'="",$P("LOCATION",X,1)'="",$P("COMMUNICATION OFFICE",X,1)'="",$P("ALL",X,1)'="" W *7,!?7,"  Answer with P or C or L or A" G F0
"RTN","FHMTK1",73,0)
 ;S FHBY=X G P0:X?1"P".E,NL0:X?1"L".E I X?1"A".E S (DFN,FHP,W1)="" G S0
"RTN","FHMTK1",74,0)
 ;S FHP=$O(^FH(119.73,0)) I FHP'<1,$O(^FH(119.73,FHP))<1 S (DFN,W1)="" G S0
"RTN","FHMTK11")
0^111^B20736345
"RTN","FHMTK11",1,0)
FHMTK11 ; HISC/REL/NCA - Build Tray Tickets (Cont.) ;2/23/00  09:53
"RTN","FHMTK11",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK11",3,0)
BLD ; Build Tray Ticket list for a patient
"RTN","FHMTK11",4,0)
 S X1=$G(^FHPT(+FHDFN,"A",+ADM,0)),FHORD=$P(X1,"^",2),SVC=$P(X1,"^",5),SF=$P(X1,"^",7),IS=$P(X1,"^",10),FHD=$P(X1,"^",15),(FHOR,X)=""
"RTN","FHMTK11",5,0)
 I FHPAR'="Y" Q:SVC="C"
"RTN","FHMTK11",6,0)
 I SVC="C" S:SP'=SP1 SP=SP1 Q:'SP
"RTN","FHMTK11",7,0)
 Q:'FHORD  S X=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHMTK11",8,0)
 S PD=$P(X,"^",13),FHOR=$P(X,"^",2,6) Q:"^^^^"[FHOR
"RTN","FHMTK11",9,0)
 I IS S IS=$G(^FH(119.4,+IS,0)) S:IS'="" SVC=SVC_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHMTK11",10,0)
 S:SF SVC=SVC_"  "_"SF"_"("_$S($P($G(^FHPT(FHDFN,"A",ADM,"SF",+SF,0)),"^",34)="Y":"M",1:"I")_")"
"RTN","FHMTK11",11,0)
 I UPD D OLD I OLD=FHOR S FLG2=0 D EVT^FHDCR2 Q:'FLG2
"RTN","FHMTK11",12,0)
 S STR=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,2)) K FP,MP,N2,NN,P4,PS D:STR'="" DECOD^FHMTK1B
"RTN","FHMTK11",13,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHMTK11",14,0)
 I DPAT S PD=$P($G(^FH(111.1,DPAT,0)),"^",7) I STR="",$O(MP(""))="" F X8=0:0 S X8=$O(^FH(111.1,DPAT,MEAL,X8)) Q:X8<1  S Z1=$G(^(X8,0)),MP(+Z1)=$P(Z1,"^",2)
"RTN","FHMTK11",15,0)
 Q:PD=""  S PD=$P($G(^FH(116.2,PD,0)),"^",2) Q:PD=""  D CHK^FHMTK1B
"RTN","FHMTK11",16,0)
 I NBR=3 D PRT^FHMTK1C K MM,PP,S S NBR=0
"RTN","FHMTK11",17,0)
 S NBR=NBR+1 D PID^FHDPA
"RTN","FHMTK11",18,0)
 F X6=0:0 S X6=$O(^FHPT(FHDFN,"P","B",X6)) Q:X6<1  F X7=0:0 S X7=$O(^FHPT(FHDFN,"P","B",X6,X7)) Q:X7<1  S PS=$P($G(^FH(115.2,+X6,0)),"^",4) I PS S P4=$G(^FH(114,+PS,0)),P1=$P(P4,"^",7)_"^"_+PS_"^"_$P(P4,"^",1) I +P1 D
"RTN","FHMTK11",19,0)
 .S CHK="" F  S CHK=$O(^TMP($J,"DEF",MEAL,PD,CHK)) Q:CHK=""  S C1=$G(^(CHK)) I $D(^TMP($J,"FHDEF",MEAL,+C1)),+^TMP($J,"FHDEF",MEAL,+C1)=+P1 D  Q
"RTN","FHMTK11",20,0)
 ..S C2=$G(^FHPT(FHDFN,"P",+X7,0)) Q:$P(C2,"^",2)'[MEAL
"RTN","FHMTK11",21,0)
 ..S P2=+CHK,P3=$P(P1,"^",3) S:'$D(N2(P2,+C1,P3)) N2(P2,+C1,P3)=+$P(P1,"^",2)_"^"_P3 Q
"RTN","FHMTK11",22,0)
 .Q
"RTN","FHMTK11",23,0)
 S Y0=$P($G(^DPT(DFN,0)),"^",1)_" ("_BID_")"_"  "_SVC,S(NBR)=0,N1=0
"RTN","FHMTK11",24,0)
 D CUR^FHORD7 S N1=N1+1 I $L(Y)<40 S PP(N1,NBR)=Y
"RTN","FHMTK11",25,0)
 E  S L=$S($L($P(Y,",",1,3))<40:3,1:2) S PP(N1,NBR)=$P(Y,",",1,L),N1=N1+1,PP(N1,NBR)=$E($P(Y,",",L+1,5),2,99)
"RTN","FHMTK11",26,0)
 S MM(0,NBR)=Y0_"^"_WRDN_"^"_RM
"RTN","FHMTK11",27,0)
 I $G(DFN) D ALG^FHCLN S ALG="ALLGS.: "_$S(ALG="":"NONE ON FILE",1:ALG) S J=0 D BRK^FHMTK1B
"RTN","FHMTK11",28,0)
 S X8="" F  S X8=$O(^TMP($J,MEAL,PD,X8)) Q:X8=""  S (P4,X1)=^(X8),X1=+X1,P4=$P(P4,"^",3) D
"RTN","FHMTK11",29,0)
 .S Z1=+$P(X8,"~",2) Q:'$F(P4,"~"_SP_"~")
"RTN","FHMTK11",30,0)
 .S (MSG,X6)="",CTR=1
"RTN","FHMTK11",31,0)
 .S QTY="" Q:'$D(MP(Z1))  Q:MP(Z1)=0  S PAD=$E("    ",1,5-$L(MP(Z1))),QTY=MP(Z1)_PAD,CTR=$J(MP(Z1),0,2)
"RTN","FHMTK11",32,0)
 .S:$G(^TMP($J,"FHPO",$P(X8,"~",3)))="" ^TMP($J,"FHPO",$P(X8,"~",3))=X8 S C2=$G(^TMP($J,"FHPO",$P(X8,"~",3)))
"RTN","FHMTK11",33,0)
 .I $D(N2(Z1,X1)) D BRD Q
"RTN","FHMTK11",34,0)
 .I $D(FP(+X1)) D SUB Q
"RTN","FHMTK11",35,0)
 .S NN(X8)=QTY_$P(X8,"~",3) D CNT
"RTN","FHMTK11",36,0)
 .I $D(^TMP($J,"DBX",MEAL,PD,+X1)) F LL=0:0 S LL=$O(^TMP($J,"DBX",MEAL,PD,+X1,LL)) Q:LL<1  S NN(X8_" "_LL)=$G(^(LL))
"RTN","FHMTK11",37,0)
 .Q
"RTN","FHMTK11",38,0)
 S X8="" F  S X8=$O(NN(X8)) Q:X8=""  D
"RTN","FHMTK11",39,0)
 .S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$G(NN(X8)) Q
"RTN","FHMTK11",40,0)
 S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=""
"RTN","FHMTK11",41,0)
 D SO^FHMTK1B
"RTN","FHMTK11",42,0)
 Q
"RTN","FHMTK11",43,0)
SUB ; Get Substitutes
"RTN","FHMTK11",44,0)
 D ALT^FHMTK1B S:MSG'="" NN(X8)=MSG Q:'X6
"RTN","FHMTK11",45,0)
 S X1=+X6,XX=Z,Z1=$P(XX,"~",2) I $D(N2(Z1,X1)) D BRD Q
"RTN","FHMTK11",46,0)
 S:$D(^TMP($J,"FHPO",$P(XX,"~",3))) XX=$G(^TMP($J,"FHPO",$P(XX,"~",3)))
"RTN","FHMTK11",47,0)
 S NN(XX)=QTY_$P(XX,"~",3)
"RTN","FHMTK11",48,0)
 S CT=$G(^TMP($J,"CTR",MEAL,XX,SP))
"RTN","FHMTK11",49,0)
 S CT=CT+CTR,^TMP($J,"CTR",MEAL,XX,SP)=CT D C1
"RTN","FHMTK11",50,0)
 I SUM S TOT=$G(^TMP($J,"TOT",XX,SP)),TOT=TOT+CTR,^TMP($J,"TOT",XX,SP)=TOT
"RTN","FHMTK11",51,0)
 I $D(^TMP($J,"DBX",MEAL,PD,+X1)) F LL=0:0 S LL=$O(^TMP($J,"DBX",MEAL,PD,+X1,LL)) Q:LL<1  S NN(XX_" "_LL)=$G(^(LL))
"RTN","FHMTK11",52,0)
 Q
"RTN","FHMTK11",53,0)
BRD ; Get Bread/Beverage
"RTN","FHMTK11",54,0)
 S (X7,XX)="" F  S X7=$O(N2(Z1,X1,X7)) Q:X7=""  D
"RTN","FHMTK11",55,0)
 .S L1=+N2(Z1,X1,X7),XX=$P(X8,"~",1,2)_"~"_X7
"RTN","FHMTK11",56,0)
 .I '$D(NN(XX)) S NN(XX)=QTY_X7 S CT=$G(^TMP($J,"CTR",MEAL,XX,SP)),CT=CT+CTR,^TMP($J,"CTR",MEAL,XX,SP)=CT D C1 I SUM S TOT=$G(^TMP($J,"TOT",XX,SP)),TOT=TOT+CTR,^TMP($J,"TOT",XX,SP)=TOT
"RTN","FHMTK11",57,0)
 .Q
"RTN","FHMTK11",58,0)
 Q
"RTN","FHMTK11",59,0)
CNT ; Count Recipe items for Service Points
"RTN","FHMTK11",60,0)
 S CT=$G(^TMP($J,"CTR",MEAL,C2,SP)),CT=CT+CTR,^TMP($J,"CTR",MEAL,C2,SP)=CT
"RTN","FHMTK11",61,0)
 I SUM S TOT=$G(^TMP($J,"TOT",C2,SP)),TOT=TOT+CTR,^TMP($J,"TOT",C2,SP)=TOT
"RTN","FHMTK11",62,0)
C1 ; Setup Service Points Array
"RTN","FHMTK11",63,0)
 S M1=$G(^TMP($J,"SRP",SP)),M2=$P(M1,"^",1),M3=$P(M1,"^",4)
"RTN","FHMTK11",64,0)
 S:M3="" M3=$E(M2,1,8) I '$D(DP(MEAL,M3,SP)) S DP(MEAL,M3,SP)=$J(M3,10),LS(MEAL)=LS(MEAL)+10,P(MEAL,M3,SP)=""
"RTN","FHMTK11",65,0)
 I SUM,'$D(TP(M3,SP)) S TP(M3,SP)=$J(M3,10),SL=SL+10,T1(M3,SP)=""
"RTN","FHMTK11",66,0)
 Q
"RTN","FHMTK11",67,0)
OLD ; Get Previous Diet Order
"RTN","FHMTK11",68,0)
 S:'FHD FHD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",1)
"RTN","FHMTK11",69,0)
 S E1="" F NXT=0:0 S NXT=$O(^FHPT(FHDFN,"A",ADM,"AC",NXT)) Q:NXT<1!(NXT>FHD)  S E1=NXT
"RTN","FHMTK11",70,0)
 I 'E1 S OLD="^^^^" Q
"RTN","FHMTK11",71,0)
 S KK=$P($G(^FHPT(FHDFN,"A",ADM,"AC",E1,0)),"^",2) I 'KK S OLD="^^^^" Q
"RTN","FHMTK11",72,0)
 S NNXX="" I NXT'="" S NNXX=$P($G(^FHPT(FHDFN,"A",ADM,"AC",NXT,0)),"^",2)
"RTN","FHMTK11",73,0)
 I NNXX'="",$P($G(^FHPT(FHDFN,"A",ADM,"DI",NNXX,0)),U,10)=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),U,9),$P($G(^FHPT(FHDFN,"A",ADM,"DI",NNXX,0)),U,7)="N" S OLD="^^^^" Q
"RTN","FHMTK11",74,0)
 S OLD=$P($G(^FHPT(FHDFN,"A",ADM,"DI",KK,0)),"^",2,6) Q
"RTN","FHMTK1A")
0^112^B8635876
"RTN","FHMTK1A",1,0)
FHMTK1A ; HISC/REL/NCA - Build Tray Tickets ;4/21/95  08:21
"RTN","FHMTK1A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK1A",3,0)
B1 ; Store wards
"RTN","FHMTK1A",4,0)
 K ^TMP($J),DP,N,P,TP,T1 S ALL=0,MFLG=0 D Q1^FHMTK1B D NOW^%DTC S (DTP,TIM)=% D DTP^FH S HD=DTP
"RTN","FHMTK1A",5,0)
 S DTP=D1 D DTP^FH S MDT=DTP S:MEAL="A" MFLG=1
"RTN","FHMTK1A",6,0)
 I 'FHP,'W1,'DFN S ALL=1
"RTN","FHMTK1A",7,0)
 S FHBOT=$P($G(^FH(119.9,1,4)),"^",1)
"RTN","FHMTK1A",8,0)
 I DFN,$G(FHOMF)=1 D ^FHOMTK1 Q
"RTN","FHMTK1A",9,0)
 I $G(IEN200)'="",$G(FHOMF)=1 Q
"RTN","FHMTK1A",10,0)
 I DFN D  Q
"RTN","FHMTK1A",11,0)
 .S ADM=+$G(^DPT(DFN,.105)),W1=+$P($G(^FHPT(FHDFN,"A",+ADM,0)),"^",8)
"RTN","FHMTK1A",12,0)
 .S K1=$G(^FH(119.6,+W1,0)),WRDN=$P(K1,"^",1),SP=$P(K1,"^",5),SP1=$P(K1,"^",6),FHPAR=$P(K1,"^",24),RM=$G(^DPT(DFN,.101))
"RTN","FHMTK1A",13,0)
 .I 'SP Q:FHPAR'="Y"  S SP=SP1 Q:'SP
"RTN","FHMTK1A",14,0)
 .K MM,PP,S S NBR=0 I MEAL'="A" D BLD^FHMTK11 D:NBR UPD,PRT^FHMTK1C Q
"RTN","FHMTK1A",15,0)
 .F MEAL="B","N","E" D BLD^FHMTK11
"RTN","FHMTK1A",16,0)
 .D UPD
"RTN","FHMTK1A",17,0)
 .D:NBR PRT^FHMTK1C Q
"RTN","FHMTK1A",18,0)
 I W1 S ^TMP($J,"W","01"_$P($G(^FH(119.6,+W1,0)),"^",1))=W1_"^"_$P($G(^FH(119.6,+W1,0)),"^",5,6)_"^"_$P($G(^FH(119.6,+W1,0)),"^",24)
"RTN","FHMTK1A",19,0)
 E  F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  D
"RTN","FHMTK1A",20,0)
 .S P0=$G(^FH(119.6,W1,0)),WRDN=$P(P0,"^",1),SP=$P(P0,"^",5,6),D2=$P(P0,"^",8),FHPAR=$P(P0,"^",24),P0=$P(P0,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHMTK1A",21,0)
 .I FHP,D2'=FHP Q
"RTN","FHMTK1A",22,0)
 .S ^TMP($J,"W",P0_WRDN)=W1_"^"_SP_"^"_FHPAR Q
"RTN","FHMTK1A",23,0)
 S NX="" F  S NX=$O(^TMP($J,"W",NX)) Q:NX=""  S X1=$G(^(NX)),W1=+X1,FHS=$P(X1,"^",2),SP1=$P(X1,"^",3),FHPAR=$P(X1,"^",4),WRDN=$E(NX,3,99) S:'FHS&(FHPAR="Y") FHS=SP1 I FHS K ^TMP($J,"D") D
"RTN","FHMTK1A",24,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  D
"RTN","FHMTK1A",25,0)
 ..D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHMTK1A",26,0)
 ..S ADM=$G(^FHPT("AW",W1,FHDFN))
"RTN","FHMTK1A",27,0)
 ..I SRT="A" S RM=$P($G(^DPT(DFN,0)),"^",1),R0=0,RMB=$G(^DPT(DFN,.101)) S:RMB="" RMB="***"
"RTN","FHMTK1A",28,0)
 ..E  S RI=$G(^DPT(DFN,.108)),RM=$G(^DPT(DFN,.101)) S:RM="" RM="***" S RE=$S(RI:$O(^FH(119.6,"AR",+RI,W1,0)),1:""),R0=$S(RE:$P($G(^FH(119.6,W1,"R",+RE,0)),"^",2),1:""),RMB=""
"RTN","FHMTK1A",29,0)
 ..S R0=$S(R0<1:99,R0<10:"0"_R0,1:R0)
"RTN","FHMTK1A",30,0)
 ..S ^TMP($J,"D",R0_"~"_RM_"~"_$S(SRT="R":FHDFN,1:RMB))=FHDFN_"^"_ADM Q
"RTN","FHMTK1A",31,0)
 .K MM,PP,S S X9="",NBR=0 F  S X9=$O(^TMP($J,"D",X9)) Q:X9=""  S FHDFN=$P(^(X9),"^",1),ADM=$P(^(X9),"^",2),RM=$S(SRT="R":$P(X9,"~",2),1:$P(X9,"~",3)) S SP=FHS D
"RTN","FHMTK1A",32,0)
 ..D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHMTK1A",33,0)
 ..I 'MFLG D BLD^FHMTK11,UPD Q
"RTN","FHMTK1A",34,0)
 ..F MEAL="B","N","E" D BLD^FHMTK11
"RTN","FHMTK1A",35,0)
 ..D UPD
"RTN","FHMTK1A",36,0)
 ..Q
"RTN","FHMTK1A",37,0)
 .I NBR D PRT^FHMTK1C
"RTN","FHMTK1A",38,0)
 .Q
"RTN","FHMTK1A",39,0)
OMTT ;Display outpatient tray tickets
"RTN","FHMTK1A",40,0)
 K MM,PP,S D ^FHOMTK1
"RTN","FHMTK1A",41,0)
TAB ;Display tabulated recipe list
"RTN","FHMTK1A",42,0)
 D LIST^FHMTK1C
"RTN","FHMTK1A",43,0)
 Q
"RTN","FHMTK1A",44,0)
UPD ; Update the Date/Time Tray Ticket was Printed
"RTN","FHMTK1A",45,0)
 I $G(TABREC)="YES" QUIT
"RTN","FHMTK1A",46,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",15)=TIM Q
"RTN","FHMTK1B")
0^113^B20145458
"RTN","FHMTK1B",1,0)
FHMTK1B ; HISC/NCA - Tray Ticket Utilities ;2/23/00  09:53
"RTN","FHMTK1B",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK1B",3,0)
Q1 ; Store Service Point, Bread/Beverage default, Food Preference,
"RTN","FHMTK1B",4,0)
 ; and Recipes of meal
"RTN","FHMTK1B",5,0)
 S LN=$S(IOST?1"C".E:IOSL-2,1:IOSL-6),SL=40 F SP=0:0 S SP=$O(^FH(119.72,SP)) Q:SP<1  S Z=$G(^(SP,0)),^TMP($J,"SRP",SP)=$P(Z,"^",1,4)
"RTN","FHMTK1B",6,0)
 I MEAL'="A" S M1=MEAL D GET Q
"RTN","FHMTK1B",7,0)
 F M1="B","N","E" S FHX1=$P(FHDA,"^",$F("BNE",M1)) D GET
"RTN","FHMTK1B",8,0)
 Q
"RTN","FHMTK1B",9,0)
GET S LS(M1)=40 F LL=0:0 S LL=$O(^FH(115.2,LL)) Q:LL<1  S L2=$G(^(LL,0)) D
"RTN","FHMTK1B",10,0)
 .I $P(L2,"^",2)="D" D  Q
"RTN","FHMTK1B",11,0)
 ..F KK=0:0 S KK=$O(^FH(115.2,LL,"X",KK)) Q:KK<1  S REC=$P($G(^(KK,0)),"^",1),^TMP($J,"X",M1,LL,KK)=+REC
"RTN","FHMTK1B",12,0)
 ..Q
"RTN","FHMTK1B",13,0)
 .S REC=$P(L2,"^",4) Q:'REC  S Y=$G(^FH(114,+REC,0)),NAM=$P(Y,"^",1),K3=$P(Y,"^",7) I $P(L2,"^",5),$P(L2,"^",6)[M1 D
"RTN","FHMTK1B",14,0)
 ..S:'$D(^TMP($J,"FHDEF",M1,+REC)) ^TMP($J,"FHDEF",M1,+REC)=K3_"^"_+REC_"^"_NAM
"RTN","FHMTK1B",15,0)
 ..Q
"RTN","FHMTK1B",16,0)
 .Q
"RTN","FHMTK1B",17,0)
 F LL=0:0 S LL=$O(^TMP($J,"X",M1,LL)) Q:LL<1  F KK=0:0 S KK=$O(^TMP($J,"X",M1,LL,KK)) Q:KK<1  S X1=+$G(^(KK)),X2=$O(^FH(116.1,FHX1,"RE","B",X1,0)) I X2<1 K ^TMP($J,"X",M1,LL,KK)
"RTN","FHMTK1B",18,0)
 F P1=0:0 S P1=$O(^FH(116.1,FHX1,"RE",P1)) Q:P1<1  S L1=$G(^(P1,0)),Y=$G(^FH(114,+L1,0)),NAM=$P(Y,"^",1) D
"RTN","FHMTK1B",19,0)
 .F CAT=0:0 S CAT=$O(^FH(116.1,FHX1,"RE",P1,"R",CAT)) Q:CAT<1  S MCA=$G(^(CAT,0)) D
"RTN","FHMTK1B",20,0)
 ..S FHPD=$P(MCA,"^",2),K3=+MCA S:'K3 K3=$P(Y,"^",7)
"RTN","FHMTK1B",21,0)
 ..S CODE=$P($G(^FH(114.1,+K3,0)),"^",2),ZZ1=CODE
"RTN","FHMTK1B",22,0)
 ..I $E(CODE,$L(CODE))="X" S K3=$O(^FH(114.1,"C",$E(CODE,1,$L(CODE)-1),0)) S:'K3 K3=$P(Y,"^",7)
"RTN","FHMTK1B",23,0)
 ..S K4=$P($G(^FH(114.1,+K3,0)),"^",3),K4=$S('K4:99,K4<10:"0"_K4,1:K4)
"RTN","FHMTK1B",24,0)
 ..F P2=1:1 S FHX2=$P(FHPD," ",P2) Q:FHX2=""  S PD=$P(FHX2,";",1),P4="~" I PD'="" D
"RTN","FHMTK1B",25,0)
 ...F SP=0:0 S SP=$O(^TMP($J,"SRP",SP)) Q:SP<1  S SRP=$G(^TMP($J,"SRP",SP)),Z1=$G(^FH(116.1,FHX1,"RE",P1,"D",SP,0)),Z1=$P(Z1,"^",2),Z1=$S(Z1="":1,1:Z1) D SRP^FHDCR1B
"RTN","FHMTK1B",26,0)
 ...D STOR Q
"RTN","FHMTK1B",27,0)
 ..Q
"RTN","FHMTK1B",28,0)
 .Q
"RTN","FHMTK1B",29,0)
 Q
"RTN","FHMTK1B",30,0)
STOR ; Store Alternate recipes and default recipes
"RTN","FHMTK1B",31,0)
 N CODE S DBX="",CODE=ZZ1 I $E(CODE,$L(CODE))?1"X" D
"RTN","FHMTK1B",32,0)
 .S CODE=$E(CODE,1,$L(CODE)-1),DBX="*** Omit ",LC=0
"RTN","FHMTK1B",33,0)
 .F NX=0:0 S NX=$O(^FH(114,+L1,"DBX",NX)) Q:NX<1  S Z3=^(NX,0),QTY=$S($P(Z3,"^",2):$P(Z3,"^",2),1:1),ZZ=QTY_" "_$P($G(^FH(114.1,+Z3,0)),"^",1)_", " D:$L(DBX)+$L(ZZ)>28 SET S DBX=DBX_ZZ
"RTN","FHMTK1B",34,0)
 .D SET Q
"RTN","FHMTK1B",35,0)
 I $E(CODE,$L(CODE))?1N,$E(CODE,$L(CODE))>1 S ^TMP($J,"ALT",M1,PD,CODE,+L1)=K4_"~"_K3_"~"_NAM_P4
"RTN","FHMTK1B",36,0)
 S ^TMP($J,M1,PD,K4_"~"_K3_"~"_NAM)=+L1_"^"_CODE_"^"_P4
"RTN","FHMTK1B",37,0)
 S:'$D(^TMP($J,"FHPO",NAM)) ^TMP($J,"FHPO",NAM)=K4_"~"_K3_"~"_NAM
"RTN","FHMTK1B",38,0)
 I $D(^TMP($J,"FHDEF",M1,+L1)) S ^TMP($J,"DEF",M1,PD,K3_"~"_NAM)=+L1_"~"_K3_"~"_NAM Q
"RTN","FHMTK1B",39,0)
 Q
"RTN","FHMTK1B",40,0)
SET I $L(DBX)>9 S LC=LC+1,^TMP($J,"DBX",M1,PD,+L1,LC)=$E(DBX,1,$L(DBX)-2),DBX="*** Omit "
"RTN","FHMTK1B",41,0)
 Q
"RTN","FHMTK1B",42,0)
ALT ; Exchange dislike recipe with an alternate recipe
"RTN","FHMTK1B",43,0)
 S R1=$P($G(^TMP($J,MEAL,PD,X8)),"^",2),R2=R1 Q:R1=""
"RTN","FHMTK1B",44,0)
 F  S R2=$O(^TMP($J,"ALT",MEAL,PD,R2)) Q:R2=""!($E(R1,1,$L(R1)-1)'=$E(R2,1,$L(R2)-1))  D A1 Q:X6
"RTN","FHMTK1B",45,0)
 I 'X6 D
"RTN","FHMTK1B",46,0)
 .I $E(R1,1,$L(R1)-1)="E" S MSG="  ** NO ENTREE **",EVT="M^O^^No Entree" D ^FHORX Q
"RTN","FHMTK1B",47,0)
 .S MSG="  ** NO "_$P($G(^FH(114.1,Z1,0)),"^",1)_" - FP" Q
"RTN","FHMTK1B",48,0)
 Q
"RTN","FHMTK1B",49,0)
A1 S R3=0
"RTN","FHMTK1B",50,0)
A2 S R3=$O(^TMP($J,"ALT",MEAL,PD,R2,R3)) Q:R3<1
"RTN","FHMTK1B",51,0)
 S Z=$G(^TMP($J,"ALT",MEAL,PD,R2,R3)),P4="~"_$P(Z,"~",4,$L(Z,"~")) I $F(P4,"~"_SP_"~"),'$D(FP(R3)) S X6=R3 Q
"RTN","FHMTK1B",52,0)
 G A2
"RTN","FHMTK1B",53,0)
DECOD ; Decode code string
"RTN","FHMTK1B",54,0)
 S M1=$S(MEAL="B":1,MEAL="N":2,1:3),STR=$P(STR,";",M1)
"RTN","FHMTK1B",55,0)
 F X4=1:1 Q:$P(STR," ",X4,99)=""  D
"RTN","FHMTK1B",56,0)
 .S X1=$P(STR," ",X4),NAM=$P($G(^FH(114.1,+X1,0)),"^",1),$P(X1,",",2)=$S($P(X1,",",2)'="":$P(X1,",",2),1:1)
"RTN","FHMTK1B",57,0)
 .S MP(+X1)=$P(X1,",",2) Q
"RTN","FHMTK1B",58,0)
 Q
"RTN","FHMTK1B",59,0)
CHK ; Check for Patient dislike on meal
"RTN","FHMTK1B",60,0)
 F LL=0:0 S LL=$O(^TMP($J,"X",MEAL,LL)) Q:LL<1  F KK=0:0 S KK=$O(^TMP($J,"X",MEAL,LL,KK)) Q:KK<1  S X1=+$G(^TMP($J,"X",MEAL,LL,KK)) D
"RTN","FHMTK1B",61,0)
 .S X6=$O(^FHPT(FHDFN,"P","B",LL,0)) Q:X6<1
"RTN","FHMTK1B",62,0)
 .S X2=$G(^FHPT(FHDFN,"P",X6,0)) Q:$P(X2,"^",2)'[MEAL
"RTN","FHMTK1B",63,0)
 .S FP(X1)=""
"RTN","FHMTK1B",64,0)
 .Q
"RTN","FHMTK1B",65,0)
 Q
"RTN","FHMTK1B",66,0)
SO ; Store Standing Orders
"RTN","FHMTK1B",67,0)
 K ALPHA,SONAME S INDX=1 F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  D
"RTN","FHMTK1B",68,0)
 .S X=$G(^FHPT(FHDFN,"A",ADM,"SP",K,0)),Z=$P(X,"^",2)
"RTN","FHMTK1B",69,0)
 .S SONAME=$P($G(^FH(118.3,+Z,0)),U,1) I SONAME="" Q
"RTN","FHMTK1B",70,0)
 .I $D(ALPHA(SONAME)) S SONAME=SONAME_INDX,INDX=INDX+1
"RTN","FHMTK1B",71,0)
 .S ALPHA(SONAME)=K_"^"_Z
"RTN","FHMTK1B",72,0)
 .Q
"RTN","FHMTK1B",73,0)
 S SONAME="" F  S SONAME=$O(ALPHA(SONAME)) Q:SONAME=""  D
"RTN","FHMTK1B",74,0)
 .S K=$P(ALPHA(SONAME),U,1)
"RTN","FHMTK1B",75,0)
 .S X=$G(^FHPT(FHDFN,"A",ADM,"SP",K,0)),Z=$P(X,U,2),M=$P(X,U,3) Q:'Z
"RTN","FHMTK1B",76,0)
 .I M[MEAL S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$S($P(X,"^",8):$P(X,"^",8),1:1)_"    "_$P(^FH(118.3,+Z,0),"^",1) Q
"RTN","FHMTK1B",77,0)
 Q
"RTN","FHMTK1B",78,0)
BRK ; Break the line if allergies' length > 35 chars
"RTN","FHMTK1B",79,0)
 I J>2 S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$S($L(ALG)<36:ALG,1:$J("",8)_"OTHERS") Q
"RTN","FHMTK1B",80,0)
 I $L(ALG)<36 S S(NBR)=S(NBR)+1,J=J+1,MM(S(NBR),NBR)=ALG Q
"RTN","FHMTK1B",81,0)
 F L=37:-1:8 Q:$E(ALG,L-1,L)=", "
"RTN","FHMTK1B",82,0)
 I L=8 S L=35 S S(NBR)=S(NBR)+1,J=J+1,MM(S(NBR),NBR)=$E(ALG,1,35)
"RTN","FHMTK1B",83,0)
 E  S S(NBR)=S(NBR)+1,J=J+1,MM(S(NBR),NBR)=$E(ALG,1,L-1)
"RTN","FHMTK1B",84,0)
 S ALG=$J("",8)_$E(ALG,L+1,999)
"RTN","FHMTK1B",85,0)
 G BRK
"RTN","FHMTK1C")
0^114^B21105135
"RTN","FHMTK1C",1,0)
FHMTK1C ; HISC/NCA/RVD - Print Tray Tickets ;4/13/95  13:45
"RTN","FHMTK1C",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK1C",3,0)
PRT ; Print 3 person per page
"RTN","FHMTK1C",4,0)
START I $G(TABREC)="YES" QUIT
"RTN","FHMTK1C",5,0)
 S TL=0 D CHKH
"RTN","FHMTK1C",6,0)
 W !! S TL=TL+2 F N1=1:1:3 D
"RTN","FHMTK1C",7,0)
 .I 'MFLG S MEALDT=$S(MEAL="B":"Breakfast",MEAL="N":"Noon",1:"Evening")_" "_MDT
"RTN","FHMTK1C",8,0)
 .E  S MEALDT=$S(N1=1:"Breakfast",N1=2:"Noon",1:"Evening")_" "_MDT
"RTN","FHMTK1C",9,0)
 .I '$D(MM(0,N1)) Q
"RTN","FHMTK1C",10,0)
 .S MMMDT=$P(MM(0,N1),U,7) I MMMDT'="" S MEALDT=$S(MMMDT="B":"Breakfast",MMMDT="N":"Noon",1:"Evening")_" "_MDT
"RTN","FHMTK1C",11,0)
 .S MEALDT=$J("",40-$L(MEALDT)\2)_MEALDT
"RTN","FHMTK1C",12,0)
 .I $D(MM(0,N1)) W ?$S(N1=1:2,N1=2:45,1:88),MEALDT
"RTN","FHMTK1C",13,0)
 .Q
"RTN","FHMTK1C",14,0)
 W ! S TL=TL+1 F N1=1:1 Q:'$D(PP(N1))  W ! S TL=TL+1 F NBR=1:1:3 I $D(PP(N1,NBR)) W ?$S(NBR=1:2,NBR=2:45,1:88),PP(N1,NBR)
"RTN","FHMTK1C",15,0)
 ;W ! S TL=TL+1 F N1=1:1 Q:'$D(PP(N1))  W ! S TL=TL+1
"RTN","FHMTK1C",16,0)
 W ! S TL=TL+1
"RTN","FHMTK1C",17,0)
 F N1=1:1 Q:'$D(MM(N1))  D:(TL+2)'<($S(FHBOT="Y":LN-5,1:LN-3)) NXT W !! S TL=TL+2 F NBR=1:1:3 I $D(MM(N1,NBR)) W ?$S(NBR=1:2,NBR=2:45,1:88),MM(N1,NBR)
"RTN","FHMTK1C",18,0)
 I TL<LN F L1=TL:1:$S(FHBOT="Y":LN-2,1:LN) W !
"RTN","FHMTK1C",19,0)
 I FHBOT="Y" D HEAD W @IOF Q
"RTN","FHMTK1C",20,0)
 E  D FOOT
"RTN","FHMTK1C",21,0)
 W @IOF Q
"RTN","FHMTK1C",22,0)
NXT ; Print Next Page
"RTN","FHMTK1C",23,0)
 W !! S TL=TL+2 F NM=1:1:3 I $D(MM(0,NM)) W ?$S(NM=1:12,NM=2:57,1:100),"(More Items Next Pg)"
"RTN","FHMTK1C",24,0)
 I TL<LN F L1=TL:1:$S(FHBOT="Y":LN-2,1:LN) W !
"RTN","FHMTK1C",25,0)
 I FHBOT="Y" D HEAD W @IOF G N1
"RTN","FHMTK1C",26,0)
 E  D FOOT
"RTN","FHMTK1C",27,0)
N1 W @IOF S TL=0 D CHKH
"RTN","FHMTK1C",28,0)
 W !! S TL=TL+2 F XX=1:1:3 D
"RTN","FHMTK1C",29,0)
 .I 'MFLG S MEALDT=$S(MEAL="B":"Breakfast",MEAL="N":"Noon",1:"Evening")_" "_MDT
"RTN","FHMTK1C",30,0)
 .E  S MEALDT=$S(XX=1:"Breakfast",XX=2:"Noon",1:"Evening")_" "_MDT
"RTN","FHMTK1C",31,0)
 .I '$D(MM(0,XX)) Q
"RTN","FHMTK1C",32,0)
 .S MMMDT=$P(MM(0,XX),U,7) I MMMDT'="" S MEALDT=$S(MMMDT="B":"Breakfast",MMMDT="N":"Noon",1:"Evening")_" "_MDT
"RTN","FHMTK1C",33,0)
 .S MEALDT=$J("",40-$L(MEALDT)\2)_MEALDT
"RTN","FHMTK1C",34,0)
 .I $D(MM(0,XX)) W ?$S(XX=1:2,XX=2:45,1:88),MEALDT,"  (Cont.)"
"RTN","FHMTK1C",35,0)
 .W ! S TL=TL+1 Q
"RTN","FHMTK1C",36,0)
 Q
"RTN","FHMTK1C",37,0)
CHKH ; Check whether name header should be on bottom
"RTN","FHMTK1C",38,0)
 I FHBOT="Y" W ! S TL=TL+1 D FOOT W ! S TL=TL+1 Q
"RTN","FHMTK1C",39,0)
 E  D HEAD
"RTN","FHMTK1C",40,0)
 Q
"RTN","FHMTK1C",41,0)
HEAD F NM=1:1:3 W ! S TL=TL+1 F NBR=1:1:3 S X=$P($G(MM(0,NBR)),"^",NM) I X'="" D
"RTN","FHMTK1C",42,0)
 .S S1=$S(NBR=1:2,NBR=2:45,1:88) I NM=1 W ?S1,X Q
"RTN","FHMTK1C",43,0)
 .W ?(S1+38-$L(X)),X Q
"RTN","FHMTK1C",44,0)
 Q
"RTN","FHMTK1C",45,0)
FOOT W ! S TL=TL+1 F NBR=1:1:3 S S1=$S(NBR=1:2,NBR=2:45,1:88) W:$D(MM(0,NBR)) ?S1,HD
"RTN","FHMTK1C",46,0)
 Q
"RTN","FHMTK1C",47,0)
LIST ; Print Tabulated Recipe List for Service Points
"RTN","FHMTK1C",48,0)
 S PG=0 I 'MFLG D L1 Q
"RTN","FHMTK1C",49,0)
 F MEAL="B","N","E" D L1
"RTN","FHMTK1C",50,0)
 D:SUM SUM Q
"RTN","FHMTK1C",51,0)
 Q
"RTN","FHMTK1C",52,0)
L1 S:LS(MEAL)<80 LS(MEAL)=80 S MEALDT=$S(MEAL="B":"Breakfast",MEAL="N":"Noon",1:"Evening")_" "_MDT,PG=PG+1
"RTN","FHMTK1C",53,0)
 W:$E(IOST,1,2)="C-" @IOF W !,HD,!!!?(LS(MEAL)-42\2),"T A B U L A T E D   R E C I P E   L I S T",?(LS(MEAL)-8),"Page ",PG
"RTN","FHMTK1C",54,0)
 W !!?(LS(MEAL)-$L(MEALDT)\2),MEALDT,!!,$S(ALL:"ALL",FHP:$P($G(^FH(119.73,FHP,0)),"^",1),1:$P($G(^FH(119.6,+W1,0)),"^",1)),!
"RTN","FHMTK1C",55,0)
 W !!,"R E C I P E S",?29
"RTN","FHMTK1C",56,0)
 S X="" F  S X=$O(DP(MEAL,X)) Q:X=""  F K=0:0 S K=$O(DP(MEAL,X,K)) Q:K=""  W $P(DP(MEAL,X,K),"^",1)
"RTN","FHMTK1C",57,0)
 W "      Total",!
"RTN","FHMTK1C",58,0)
 S X8="" F  S X8=$O(^TMP($J,"CTR",MEAL,X8)) Q:X8=""  W !!,$P(X8,"~",3),?31 D PRO
"RTN","FHMTK1C",59,0)
 S TOT=0 W !!!,"TOTAL RECIPES",?31 S X="" F  S X=$O(DP(MEAL,X)) Q:X=""  D
"RTN","FHMTK1C",60,0)
 .F K=0:0 S K=$O(DP(MEAL,X,K)) Q:K<1  D
"RTN","FHMTK1C",61,0)
 ..S Z=$G(P(MEAL,X,K)),TOT=TOT+Z
"RTN","FHMTK1C",62,0)
 ..I 'Z W $J("",8)_"  " Q
"RTN","FHMTK1C",63,0)
 ..;W $S(Z#1>0:$J(Z,8,1),1:$J(Z,6)_"  ")_"  " Q
"RTN","FHMTK1C",64,0)
 ..W $S(Z#1>0:$J(Z,8,2),1:$J(Z,8))_"  " Q
"RTN","FHMTK1C",65,0)
 .Q
"RTN","FHMTK1C",66,0)
 ;W $S(TOT#1>0:$J(TOT,9,1),1:$J(TOT,7)) W:MFLG @IOF Q
"RTN","FHMTK1C",67,0)
 W $S(TOT#1>0:$J(TOT,9,2),1:$J(TOT,9)) W:MFLG @IOF Q
"RTN","FHMTK1C",68,0)
PRO S FTOT=0,X="" F  S X=$O(DP(MEAL,X)) Q:X=""  D
"RTN","FHMTK1C",69,0)
 .F K=0:0 S K=$O(DP(MEAL,X,K)) Q:K<1  D
"RTN","FHMTK1C",70,0)
 ..S Z=$G(^TMP($J,"CTR",MEAL,X8,K)),FTOT=FTOT+Z,P(MEAL,X,K)=P(MEAL,X,K)+Z
"RTN","FHMTK1C",71,0)
 ..I 'Z W $J("",8)_"  " Q
"RTN","FHMTK1C",72,0)
 ..;W $S(Z#1>0:$J(Z,8,1),1:$J(Z,6)_"  ")_"  " Q
"RTN","FHMTK1C",73,0)
 ..W $S(Z#1>0:$J(Z,8,2),1:$J(Z,8))_"  " Q
"RTN","FHMTK1C",74,0)
 .Q
"RTN","FHMTK1C",75,0)
 ;W $S(FTOT#1>0:$J(FTOT,9,1),1:$J(FTOT,7)_"  ")
"RTN","FHMTK1C",76,0)
 W $S(FTOT#1>0:$J(FTOT,9,2),1:$J(FTOT,9)_"  ")
"RTN","FHMTK1C",77,0)
 Q
"RTN","FHMTK1C",78,0)
SUM S:SL<80 SL=80 S MEALDT="All Meals "_MDT S PG=0 D HDR
"RTN","FHMTK1C",79,0)
 S X8="" F  S X8=$O(^TMP($J,"TOT",X8)) Q:X8=""  D
"RTN","FHMTK1C",80,0)
 .I $Y>LN W @IOF D HDR
"RTN","FHMTK1C",81,0)
 .W !!,$P(X8,"~",3),?31 D PR1 Q
"RTN","FHMTK1C",82,0)
 S TOT=0 W !!!,"TOTAL RECIPES",?31 S X="" F  S X=$O(TP(X)) Q:X=""  D
"RTN","FHMTK1C",83,0)
 .F K=0:0 S K=$O(TP(X,K)) Q:K<1  D
"RTN","FHMTK1C",84,0)
 ..S Z=$G(T1(X,K)),TOT=TOT+Z
"RTN","FHMTK1C",85,0)
 ..I 'Z W $J("",8)_"  " Q
"RTN","FHMTK1C",86,0)
 ..;W $S(Z#1>0:$J(Z,8,1),1:$J(Z,6)_"  ")_"  " Q
"RTN","FHMTK1C",87,0)
 ..W $S(Z#1>0:$J(Z,8,2),1:$J(Z,8))_"  " Q
"RTN","FHMTK1C",88,0)
 .Q
"RTN","FHMTK1C",89,0)
 ;W $S(TOT#1>0:$J(TOT,9,1),1:$J(TOT,7)) Q
"RTN","FHMTK1C",90,0)
 W $S(TOT#1>0:$J(TOT,9,2),1:$J(TOT,9)) Q
"RTN","FHMTK1C",91,0)
PR1 S FTOT=0,X="" F  S X=$O(TP(X)) Q:X=""  D
"RTN","FHMTK1C",92,0)
 .F K=0:0 S K=$O(TP(X,K)) Q:K<1  D
"RTN","FHMTK1C",93,0)
 ..S Z=$G(^TMP($J,"TOT",X8,K)),FTOT=FTOT+Z,T1(X,K)=T1(X,K)+Z
"RTN","FHMTK1C",94,0)
 ..I 'Z W $J("",8)_"  " Q
"RTN","FHMTK1C",95,0)
 ..;W $S(Z#1>0:$J(Z,8,1),1:$J(Z,6)_"  ")_"  " Q
"RTN","FHMTK1C",96,0)
 ..W $S(Z#1>0:$J(Z,8,2),1:$J(Z,8))_"  " Q
"RTN","FHMTK1C",97,0)
 .Q
"RTN","FHMTK1C",98,0)
 ;W $S(FTOT#1>0:$J(FTOT,9,1),1:$J(FTOT,7)_"  ")
"RTN","FHMTK1C",99,0)
 W $S(FTOT#1>0:$J(FTOT,9,2),1:$J(FTOT,9)_"  ")
"RTN","FHMTK1C",100,0)
 Q
"RTN","FHMTK1C",101,0)
HDR ; Consolidated Recipe List Heading
"RTN","FHMTK1C",102,0)
 S PG=PG+1 W !,HD,!!!?(SL-48\2),"C O N S O L I D A T E D   R E C I P E   L I S T",?(SL-8),"Page ",PG
"RTN","FHMTK1C",103,0)
 W !!?(SL-$L(MEALDT)\2),MEALDT,!!,$S(ALL:"ALL",FHP:$P($G(^FH(119.73,FHP,0)),"^",1),1:$P($G(^FH(119.6,+W1,0)),"^",1)),!
"RTN","FHMTK1C",104,0)
 W !!,"R E C I P E S",?29
"RTN","FHMTK1C",105,0)
 S X="" F  S X=$O(TP(X)) Q:X=""  F K=0:0 S K=$O(TP(X,K)) Q:K=""  W $P(TP(X,K),"^",1)
"RTN","FHMTK1C",106,0)
 W "      Total",! Q
"RTN","FHMTK2")
0^115^B6404765
"RTN","FHMTK2",1,0)
FHMTK2 ; HISC/NCA - List Diet Patterns ;4/25/95  09:54
"RTN","FHMTK2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK2",3,0)
ASK R !!,"Print ALL Diet Patterns? Y// ",ANS:DTIME G:'$T!(ANS="^") KIL S:ANS="" ANS="Y" S X=ANS D TR^FH S ANS=X
"RTN","FHMTK2",4,0)
 I $P("YES",ANS,1)'="",$P("NO",ANS,1)'="" W *7,!,"  Answer YES to print all Diet Patterns; NO to select ONE Diet Pattern to print" G ASK
"RTN","FHMTK2",5,0)
 I ANS?1"Y".E S FHDA="" G LIS
"RTN","FHMTK2",6,0)
F0 K DI S N1=0
"RTN","FHMTK2",7,0)
F1 W ! K DIC S DIC="^FH(111,",DIC(0)="AEQMZ" D ^DIC K DIC G KIL:X[U!$D(DTOUT),F5:X="",F1:Y<1
"RTN","FHMTK2",8,0)
 S PREC=$P(Y(0),U,4) I PREC,$D(DI(PREC)) W *7,!!,"This conflicts with ",$P(DI(PREC),"^",2),! G F1
"RTN","FHMTK2",9,0)
 S N1=N1+1,DI(PREC)=+Y_"^"_Y(0) G F5:+Y=1,F1:N1<5 W *7,!!,"You have now selected the maximum of 5 Diet Modifications!"
"RTN","FHMTK2",10,0)
F5 G:'N1 KIL
"RTN","FHMTK2",11,0)
 I N1>1 D  I CHK W !!,"You can not select REGULAR with another Diet." G F0
"RTN","FHMTK2",12,0)
 .S CHK=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  I +DI(D0)=1 S CHK=1 Q
"RTN","FHMTK2",13,0)
 .Q
"RTN","FHMTK2",14,0)
 W !!,"You have selected the following Diet:",!
"RTN","FHMTK2",15,0)
 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  W !?5,$P(DI(D0),U,2)
"RTN","FHMTK2",16,0)
F9 R !!,"Is this Correct? Y// ",Y:DTIME G:'$T!(Y="^") KIL S:Y="" Y="Y" S X=Y D TR^FH S Y=X
"RTN","FHMTK2",17,0)
 I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,!,"  Answer YES to accept diet list; NO to select diets again" G F9
"RTN","FHMTK2",18,0)
 I Y'?1"Y".E W !!,"Select new diets ..." G F0
"RTN","FHMTK2",19,0)
 S FHOR="^^^^",N1=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  S N1=N1+1,$P(FHOR,U,N1)=+DI(D0)
"RTN","FHMTK2",20,0)
 S Y="" F A1=1:1:5 S D3=$P(FHOR,"^",A1) Q:'D3  S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHMTK2",21,0)
 S FHDA=$O(^FH(111.1,"AB",FHOR,0)) I 'FHDA W !,"No Diet Pattern for this Diet Order" G KIL
"RTN","FHMTK2",22,0)
 K A1,CHK,DI,D0,D3,FHOR,PREC,N1,Y
"RTN","FHMTK2",23,0)
LIS ; List Diet Patterns
"RTN","FHMTK2",24,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHMTK2",25,0)
 I $D(IO("Q")) S FHPGM="L1^FHMTK21",FHLST="ANS^FHDA" D EN2^FH G KIL
"RTN","FHMTK2",26,0)
 U IO D L1^FHMTK21 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHMTK2",27,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHMTK21")
0^116^B11051896
"RTN","FHMTK21",1,0)
FHMTK21 ; HISC/NCA - List Diet Patterns (cont.) ;5/1/95  11:46
"RTN","FHMTK21",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK21",3,0)
L1 ; List the Diet Pattern(s)
"RTN","FHMTK21",4,0)
 K ^TMP($J) D NOW^%DTC S DTP=% D DTP^FH S PG=0,RES="" D HDR
"RTN","FHMTK21",5,0)
 I ANS'?1"Y".E S MP=+FHDA,X=$G(^FH(111.1,MP,0)) D L2 G PRT
"RTN","FHMTK21",6,0)
 F MP=0:0 S MP=$O(^FH(111.1,MP)) Q:MP<1  S X=$G(^(MP,0)) D L2
"RTN","FHMTK21",7,0)
 G PRT
"RTN","FHMTK21",8,0)
L2 S PD=$P(X,"^",7) Q:'PD
"RTN","FHMTK21",9,0)
 S NAM=$P(X,"^",1),FHPD=$P($G(^FH(116.2,PD,0)),"^",1),NM=$P(X,"^",8),SF=$P($G(^FH(118.1,+NM,0)),"^",1)
"RTN","FHMTK21",10,0)
 S P0=$P($G(^FH(116.2,PD,0)),"^",6),P0=$S('P0:99,P0<10:"0"_P0,1:P0)
"RTN","FHMTK21",11,0)
 S P0=P0_"~"_FHPD
"RTN","FHMTK21",12,0)
 S:'$D(^TMP($J,"FHPD",P0)) ^TMP($J,"FHPD",P0)=PD S M0=NAM
"RTN","FHMTK21",13,0)
 S ^TMP($J,"FHO",PD,M0)=MP_"^"_SF
"RTN","FHMTK21",14,0)
 F MEAL="B","N","E" D L3
"RTN","FHMTK21",15,0)
 F MEAL="BS","NS","ES" D L5
"RTN","FHMTK21",16,0)
 F R1=0:0 S R1=$O(^FH(111.1,MP,"RES",R1)) Q:R1<1  S FP=$G(^(R1,0)) D
"RTN","FHMTK21",17,0)
 .Q:$P(FP,"^",2)=""
"RTN","FHMTK21",18,0)
 .S K1=99_R1,K1=K1_"~"_$E($P($G(^FH(115.2,+FP,0)),"^",1),1,30)
"RTN","FHMTK21",19,0)
 .F MEAL="B","N","E" I $P(FP,"^",2)[MEAL S ^TMP($J,"FHFP",MP,MEAL,K1)=""
"RTN","FHMTK21",20,0)
 .Q
"RTN","FHMTK21",21,0)
 Q
"RTN","FHMTK21",22,0)
L3 ; Get Diet pattern in print order
"RTN","FHMTK21",23,0)
 S LP=0
"RTN","FHMTK21",24,0)
L4 S LP=$O(^FH(111.1,MP,MEAL,LP)) Q:LP<1  S R1=$G(^(LP,0))
"RTN","FHMTK21",25,0)
 S K1=$P($G(^FH(114.1,+R1,0)),"^",3)
"RTN","FHMTK21",26,0)
 S K1=$S('K1:99,K1<10:"0"_K1,1:K1)
"RTN","FHMTK21",27,0)
 S K1=K1_"~"_$E($P($G(^FH(114.1,+R1,0)),"^",1),1,15)
"RTN","FHMTK21",28,0)
 S ^TMP($J,"FHMP",MP,MEAL,K1)=$P(R1,"^",2)_"^"_+R1
"RTN","FHMTK21",29,0)
 G L4
"RTN","FHMTK21",30,0)
L5 ; Get Standing Orders associated with Diet pattern
"RTN","FHMTK21",31,0)
 S LP=0
"RTN","FHMTK21",32,0)
L6 S LP=$O(^FH(111.1,MP,MEAL,LP)) Q:LP<1  S R1=$G(^(LP,0))
"RTN","FHMTK21",33,0)
 S K1=99_LP,K1=K1_"~"_$E($P($G(^FH(118.3,+R1,0)),"^",1),1,30)
"RTN","FHMTK21",34,0)
 S ^TMP($J,"FHMP",MP,$E(MEAL,1),K1)=$P(R1,"^",2)_"^"_+R1
"RTN","FHMTK21",35,0)
 G L6
"RTN","FHMTK21",36,0)
PRT ; Print Diet Pattern
"RTN","FHMTK21",37,0)
 S P0="" F  S P0=$O(^TMP($J,"FHPD",P0)) Q:P0=""!(RES="^")  S PD=+$G(^(P0)),M0="" F  S M0=$O(^TMP($J,"FHO",PD,M0)) Q:M0=""  S MP=+$G(^(M0)),SF=$P($G(^(M0)),"^",2) D P1,P2 Q:RES="^"
"RTN","FHMTK21",38,0)
 Q
"RTN","FHMTK21",39,0)
P1 K MM S CTR=0 F MEAL="B","N","E" S N1=0,CTR=CTR+1 D
"RTN","FHMTK21",40,0)
 .S NX="" F  S NX=$O(^TMP($J,"FHMP",MP,MEAL,NX)) Q:NX=""  S QTY=$G(^(NX)) D
"RTN","FHMTK21",41,0)
 ..S QTY=$S(QTY="":1,1:+QTY),N1=N1+1
"RTN","FHMTK21",42,0)
 ..S PAD=$E("    ",1,4-$L(QTY)),MM(N1,CTR)=PAD_QTY_" "_$E($P(NX,"~",2),1,21)
"RTN","FHMTK21",43,0)
 ..;S MM(N1,CTR)=$S(QTY#1>0:$J(QTY,3,1),1:QTY_"  ")_" "_$E($P(NX,"~",2),1,21)
"RTN","FHMTK21",44,0)
 ..Q
"RTN","FHMTK21",45,0)
 .S R1="" F  S R1=$O(^TMP($J,"FHFP",MP,MEAL,R1)) Q:R1=""  S N1=N1+1,MM(N1,CTR)=$J("",4)_$E($P(R1,"~",2),1,21)
"RTN","FHMTK21",46,0)
 .Q
"RTN","FHMTK21",47,0)
 Q
"RTN","FHMTK21",48,0)
P2 I $Y'<(IOSL-8) D HDR Q:RES="^"
"RTN","FHMTK21",49,0)
 W !!,"Production Diet: ",$P(P0,"~",2),!,"Diet Order: ",M0
"RTN","FHMTK21",50,0)
 W !,"Associated Supp. Fdgs. Menu: ",$E(SF,1,30),!
"RTN","FHMTK21",51,0)
 W ! F N1=1:1 W ! Q:'$D(MM(N1))!(RES="^")  F CTR=1:1:3 I $D(MM(N1,CTR)) D  Q:RES="^"
"RTN","FHMTK21",52,0)
 .I $Y'<(IOSL-6) D HDR Q:RES="^"
"RTN","FHMTK21",53,0)
 .W ?$S(CTR=1:0,CTR=2:27,1:54),MM(N1,CTR) Q
"RTN","FHMTK21",54,0)
 Q
"RTN","FHMTK21",55,0)
HDR D PAUSE Q:RES="^"  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","FHMTK21",56,0)
 S PG=PG+1 W !,DTP,?23,"D I E T   P A T T E R N   L I S T",?73,"Page ",PG
"RTN","FHMTK21",57,0)
 W !,"-------------------------------------------------------------------------------",!
"RTN","FHMTK21",58,0)
 W ! F CT=1:1:3 W ?$S(CT=1:8,CT=2:38,1:63),$S(CT=1:"BREAKFAST",CT=2:"NOON",1:"EVENING")
"RTN","FHMTK21",59,0)
 W ! Q
"RTN","FHMTK21",60,0)
PAUSE ; Check to pause for reading
"RTN","FHMTK21",61,0)
 I PG,IOST?1"C-".E R !!,"Press RETURN to continue or ""^"" to exit. ",RES:DTIME S:'$T!(RES["^") RES="^" Q:RES="^"  I "^"'[RES W !,"Enter Return or ""^""." G PAUSE
"RTN","FHMTK21",62,0)
 Q
"RTN","FHMTK3")
0^117^B11788228
"RTN","FHMTK3",1,0)
FHMTK3 ; HISC/NCA - Enter/Edit Patient Diet Pattern ;2/21/96  07:59
"RTN","FHMTK3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK3",3,0)
EN1 ; Enter/Edit patient Diet Pattern
"RTN","FHMTK3",4,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL D NOW^%DTC S TIM=%
"RTN","FHMTK3",5,0)
 D CUR^FHORD7 G:FHLD'="" KIL G:'FHORD KIL S PD=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),"^",13)
"RTN","FHMTK3",6,0)
 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order") G:Y="" KIL
"RTN","FHMTK3",7,0)
 S MP=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHMTK3",8,0)
 I 'MP,$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,2))="" W !!,"No Diet Pattern for this Diet Order.",! D RET G:'MP KIL
"RTN","FHMTK3",9,0)
 S:'MP MP=0
"RTN","FHMTK3",10,0)
 I MP S PD=$P($G(^FH(111.1,+MP,0)),"^",7)
"RTN","FHMTK3",11,0)
 S:PD $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",13)=PD
"RTN","FHMTK3",12,0)
 G:PD="" KIL W !,"Production Diet: ",$P($G(^FH(116.2,+PD,0)),"^",1)
"RTN","FHMTK3",13,0)
 W ! K ^TMP($J) D LIS^FHMTK4
"RTN","FHMTK3",14,0)
R1 R !!,"Select MEAL (B,N,E): ",MEAL:DTIME G KIL:'$T!(MEAL="^"),R5:MEAL="" S X=MEAL D TR^FH S MEAL=X
"RTN","FHMTK3",15,0)
 I "BNE"'[MEAL!(MEAL'?1U) W *7,!,"Select B for Breakfast, N for Noon, or E for Evening" G R1
"RTN","FHMTK3",16,0)
 S MEAL=$F("BNE",MEAL)-1
"RTN","FHMTK3",17,0)
R2 D LIST^FHMTK4 K DIC W ! S DIC="^FH(114.1,",DIC("A")="Select a Recipe Category: ",DIC(0)="AEQM"
"RTN","FHMTK3",18,0)
 ;D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),R2:Y<1 S RC=+Y,QTY=""
"RTN","FHMTK3",19,0)
 D ^DIC K DIC G R4:"^"[X!$D(DTOUT),R2:Y<1 S RC=+Y,QTY=""
"RTN","FHMTK3",20,0)
 S C1=$G(^FH(114.1,RC,0)),NAM=$P(C1,"^",1),K1=$P(C1,"^",3)
"RTN","FHMTK3",21,0)
 S K1=$S('K1:99,K1<10:"0"_K1,1:K1),K1=K1_"~"_NAM
"RTN","FHMTK3",22,0)
 I $D(P(MEAL,RC)) S S1=$G(P(MEAL,RC)),QTY=+S1 G R2A
"RTN","FHMTK3",23,0)
 W !!,$P($G(^FH(114.1,RC,0)),"^",1)," added",! S P(MEAL,RC)=""
"RTN","FHMTK3",24,0)
 S M3=$S(MEAL=1:"B",MEAL=2:"N",1:"E"),^TMP($J,"FHMP",MP,M3,K1)="^"_+RC
"RTN","FHMTK3",25,0)
R2A W !,"Recipe Category: ",$P($G(^FH(114.1,+RC,0)),"^",1)_" // " R X:DTIME G:'$T!(X="^") KIL
"RTN","FHMTK3",26,0)
 I X="@" K P(MEAL,+RC),^TMP($J,"FHMP",MP,MEAL,K1) D SORT^FHMTK4 W " ...Done" G R4
"RTN","FHMTK3",27,0)
 I X'="" W *7,!,"Press Return to take Default or ""@"" to Delete" G R2A
"RTN","FHMTK3",28,0)
R3 W !,"Quantity: ",$S(QTY:QTY_"// ",1:"") R X:DTIME G:'$T!(X["^") KIL S:X="" X=QTY
"RTN","FHMTK3",29,0)
 I X'?0.1N.1".".2N!(X<0)!(X>9.99) W *7,"  Enter a number between 0-9.99." G R3
"RTN","FHMTK3",30,0)
 S QTY=X S P(MEAL,RC)=QTY D SORT^FHMTK4
"RTN","FHMTK3",31,0)
R4 R !!,"Enter/Edit More? Y// ",Y:DTIME G:'$T!(Y="^") KIL S:Y="" Y="Y" S X=Y D TR^FH S Y=X
"RTN","FHMTK3",32,0)
 I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,!,"  Answer YES to continue modifying Diet Pattern; NO to continue and store patient's pattern" G R4
"RTN","FHMTK3",33,0)
 I Y?1"Y".E G R1
"RTN","FHMTK3",34,0)
R5 R !!,"Is this Correct to store? Y// ",Y:DTIME G:'$T!(Y="^") KIL S:Y="" Y="Y" S X=Y D TR^FH S Y=X
"RTN","FHMTK3",35,0)
 I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,!,"  Answer YES to accept patient's Diet Pattern; NO to modify again" G R5
"RTN","FHMTK3",36,0)
 G:Y'?1"Y".E R1 W !!,"Storing Patient's Diet Pattern ..."
"RTN","FHMTK3",37,0)
 S STR="" F M1=1:1:3 S M3=$S(M1=1:"B",M1=2:"N",1:"E") D
"RTN","FHMTK3",38,0)
 .S NX="" F  S NX=$O(^TMP($J,"FHMP",MP,M3,NX)) Q:NX=""  D
"RTN","FHMTK3",39,0)
 ..S Z=$P($G(^(NX)),"^",2) I $D(P(M1,+Z)) S STR=STR_+Z_","_$S($G(P(M1,+Z))'=1:$G(P(M1,+Z)),1:"")_" "
"RTN","FHMTK3",40,0)
 ..Q
"RTN","FHMTK3",41,0)
 .S:$E(STR,$L(STR))=" " STR=$E(STR,1,$L(STR)-1) S STR=STR_";"
"RTN","FHMTK3",42,0)
 .Q
"RTN","FHMTK3",43,0)
 S:$E(STR,$L(STR))=";" STR=$E(STR,1,$L(STR)-1)
"RTN","FHMTK3",44,0)
 I $L(STR)>240 S LN=$L($E(STR,1,240)," "),STR=$P(STR," ",1,LN-1)
"RTN","FHMTK3",45,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",FHORD,2)=STR
"RTN","FHMTK3",46,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",FHORD,3)=DUZ_"^"_TIM
"RTN","FHMTK3",47,0)
KIL K ^TMP($J,"FHMP") G KILL^XUSCLEAN
"RTN","FHMTK3",48,0)
RET ; Returns a selected Pattern
"RTN","FHMTK3",49,0)
 W ! K DIC S DIC="^FH(111.1,",DIC(0)="AEMQ" D ^DIC K DIC
"RTN","FHMTK3",50,0)
 I "^"[X!($D(DTOUT)) S MP=0 Q
"RTN","FHMTK3",51,0)
 G:Y<1 RET S MP=+Y
"RTN","FHMTK3",52,0)
 Q
"RTN","FHMTK4")
0^118^B10894266
"RTN","FHMTK4",1,0)
FHMTK4 ; HISC/NCA - Patient Diet Pattern Utility ;4/25/95  10:01
"RTN","FHMTK4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK4",3,0)
LIS ; List Diet Pattern of Diet Order
"RTN","FHMTK4",4,0)
 S ANS="" D SO Q:ANS="^"  S STR=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,2))
"RTN","FHMTK4",5,0)
 W !!!?33,"Diet Pattern"
"RTN","FHMTK4",6,0)
 W !! F CTR=1:1:3 W ?$S(CTR=1:9,CTR=2:35,1:61),$S(CTR=1:"Breakfast",CTR=2:"Noon",1:"Evening")
"RTN","FHMTK4",7,0)
 I STR'="" D DECOD G L1
"RTN","FHMTK4",8,0)
 F MEAL="B","N","E" D L3^FHMTK21
"RTN","FHMTK4",9,0)
 K MM,P S M1=0 F MEAL="B","N","E" S N1=0,M1=M1+1 D
"RTN","FHMTK4",10,0)
 .S NX="" F  S NX=$O(^TMP($J,"FHMP",MP,MEAL,NX)) Q:NX=""  S S1=$G(^(NX)),QTY=$S(S1="":1,1:+S1),N1=N1+1,PAD=$E("    ",1,4-$L(QTY)),MM(N1,M1)=PAD_QTY_" "_$P(NX,"~",2),P(M1,$P(S1,"^",2))=QTY
"RTN","FHMTK4",11,0)
 .;S NX="" F  S NX=$O(^TMP($J,"FHMP",MP,MEAL,NX)) Q:NX=""  S S1=$G(^(NX)),QTY=$S(S1="":1,1:+S1),N1=N1+1,MM(N1,M1)=$S(QTY#1>0:$J(QTY,3,2),1:QTY_"   ")_" "_$P(NX,"~",2),P(M1,$P(S1,"^",2))=QTY
"RTN","FHMTK4",12,0)
 .Q
"RTN","FHMTK4",13,0)
L1 W ! F N1=1:1 W ! Q:'$D(MM(N1))  F M1=1:1:3 I $D(MM(N1,M1)) W ?$S(M1=1:2,M1=2:28,1:54),MM(N1,M1)
"RTN","FHMTK4",14,0)
 Q
"RTN","FHMTK4",15,0)
LIST ; List Recipe Category of a selected meal
"RTN","FHMTK4",16,0)
 W ! F NO=1:1 Q:'$D(MM(NO,MEAL))  W !,MM(NO,MEAL)
"RTN","FHMTK4",17,0)
 Q
"RTN","FHMTK4",18,0)
SO ; List Standing Orders
"RTN","FHMTK4",19,0)
 W !?16,"Standing Orders",!
"RTN","FHMTK4",20,0)
 K N F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  S X=$G(^FHPT(FHDFN,"A",ADM,"SP",K,0)),M=$P(X,"^",3),M=$S(M="BNE":"A",1:$E(M,1)),N(M,K)=$P(X,"^",2,3)_"^"_$P(X,"^",8,9)
"RTN","FHMTK4",21,0)
 S LN=0 F M="A","B","N","E" D  Q:ANS="^"
"RTN","FHMTK4",22,0)
 .F K=0:0 S K=$O(N(M,K)) Q:K<1  S Z=+N(M,K) I Z D  Q:ANS="^"
"RTN","FHMTK4",23,0)
 ..D L1^FHSPED W ! S NUM=$P(N(M,K),"^",3),LN=LN+1
"RTN","FHMTK4",24,0)
 ..W ?5,M2,?18,$S(NUM:NUM,1:1)," ",$P(^FH(118.3,Z,0),"^",1),$S($P(N(M,K),"^",4)'="Y":" (I)",1:"")
"RTN","FHMTK4",25,0)
 ..I LN>15 D PSE S LN=0
"RTN","FHMTK4",26,0)
 ..Q
"RTN","FHMTK4",27,0)
 .Q
"RTN","FHMTK4",28,0)
 Q
"RTN","FHMTK4",29,0)
SORT ; Sort Recipe Category in print order
"RTN","FHMTK4",30,0)
 F L1=1:1 Q:'$D(MM(L1,MEAL))  K MM(L1,MEAL)
"RTN","FHMTK4",31,0)
 S N1=0,M3=$S(MEAL=1:"B",MEAL=2:"N",1:"E"),NX=""
"RTN","FHMTK4",32,0)
 F  S NX=$O(^TMP($J,"FHMP",MP,M3,NX)) Q:NX=""  S S1=$G(^(NX)),Z=$P(S1,"^",2) I $D(P(MEAL,+Z)) S N1=N1+1,QTY=$S($G(P(MEAL,+Z))="":1,1:+$G(P(MEAL,+Z))),PAD=$E("    ",1,4-$L(QTY)),MM(N1,MEAL)=PAD_QTY_" "_$P(NX,"~",2)
"RTN","FHMTK4",33,0)
 ;F  S NX=$O(^TMP($J,"FHMP",MP,M3,NX)) Q:NX=""  S S1=$G(^(NX)),Z=$P(S1,"^",2) I $D(P(MEAL,+Z)) S N1=N1+1,QTY=$S($G(P(MEAL,+Z))="":1,1:+$G(P(MEAL,+Z))),MM(N1,MEAL)=$S(QTY#1>0:$J(QTY,3,2),1:QTY_"   ")_" "_$P(NX,"~",2)
"RTN","FHMTK4",34,0)
 Q
"RTN","FHMTK4",35,0)
DECOD ; Decode code string
"RTN","FHMTK4",36,0)
 K MM,P F M1=1:1:3 S S1=$P(STR,";",M1),M3=$S(M1=1:"B",M1=2:"N",1:"E") D
"RTN","FHMTK4",37,0)
 .F X4=1:1 Q:$P(S1," ",X4,99)=""  D
"RTN","FHMTK4",38,0)
 ..S X1=$P(S1," ",X4),NAM=$P($G(^FH(114.1,+X1,0)),"^",1),$P(X1,",",2)=$S($P(X1,",",2)'="":$P(X1,",",2),1:1)
"RTN","FHMTK4",39,0)
 ..S PAD=$E("    ",1,4-$L($P(X1,",",2)))
"RTN","FHMTK4",40,0)
 ..S MM(X4,M1)=PAD_$P(X1,",",2)_" "_NAM,P(M1,+X1)=$P(X1,",",2)
"RTN","FHMTK4",41,0)
 ..;S MM(X4,M1)=$S($P(X1,",",2)#1>0:$J($P(X1,",",2),3,2),1:$P(X1,",",2)_"   ")_" "_NAM,P(M1,+X1)=$P(X1,",",2)
"RTN","FHMTK4",42,0)
 ..S K1=$P($G(^FH(114.1,+X1,0)),"^",3),K1=$S('K1:99,K1<10:"0"_K1,1:K1)_"~"_NAM
"RTN","FHMTK4",43,0)
 ..S ^TMP($J,"FHMP",MP,M3,K1)=$P(X1,",",2)_"^"_+X1 Q
"RTN","FHMTK4",44,0)
 .Q
"RTN","FHMTK4",45,0)
 Q
"RTN","FHMTK4",46,0)
PSE I IOST?1"C-".E R !!,"Press RETURN to Continue ",X:DTIME W ! S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PSE
"RTN","FHMTK4",47,0)
 Q
"RTN","FHMTK5")
0^119^B16246661
"RTN","FHMTK5",1,0)
FHMTK5 ; HISC/NCA - List Patients Without Diet Patterns/Ind Pattern ;3/09/04  12:35
"RTN","FHMTK5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK5",3,0)
LIS W !!,"The list requires a 132 column printer.",!
"RTN","FHMTK5",4,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHMTK5",5,0)
 I $D(IO("Q")) S FHPGM="L1^FHMTK5",FHLST="" D EN2^FH G KIL
"RTN","FHMTK5",6,0)
 U IO D L1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHMTK5",7,0)
L1 ; Process Listing Patients Without Diet Patterns & Patients
"RTN","FHMTK5",8,0)
 ; With Individual Pattern
"RTN","FHMTK5",9,0)
 D NOW^%DTC S DTP=% D DTP^FH S FHDTP=DTP
"RTN","FHMTK5",10,0)
 K ^TMP($J,"D"),^TMP($J,"NP"),^TMP($J,"W") S ANS=""
"RTN","FHMTK5",11,0)
 F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  D
"RTN","FHMTK5",12,0)
 .S P0=$G(^FH(119.6,W1,0)),WRDN=$P(P0,"^",1),P0=$P(P0,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHMTK5",13,0)
 .S ^TMP($J,"W",P0_WRDN)=W1 Q
"RTN","FHMTK5",14,0)
 S NX="" F  S NX=$O(^TMP($J,"W",NX)) Q:NX=""  S X1=$G(^(NX)),W1=+X1 D
"RTN","FHMTK5",15,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  D
"RTN","FHMTK5",16,0)
 ..D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHMTK5",17,0)
 ..S ADM=$G(^FHPT("AW",W1,FHDFN)),RI=$G(^DPT(DFN,.108)),RM=$G(^DPT(DFN,.101)) S:RM="" RM="***"
"RTN","FHMTK5",18,0)
 ..S RE=$S(RI:$O(^FH(119.6,"AR",+RI,W1,0)),1:"")
"RTN","FHMTK5",19,0)
 ..S R0=$S(RE:$P($G(^FH(119.6,W1,"R",+RE,0)),"^",2),1:"")
"RTN","FHMTK5",20,0)
 ..S R0=$S(R0<1:99,R0<10:"0"_R0,1:R0)
"RTN","FHMTK5",21,0)
 ..D CUR^FHORD7 Q:"^^^^"[FHOR  S:Y'="" O1=Y
"RTN","FHMTK5",22,0)
 ..Q:$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,2))'=""
"RTN","FHMTK5",23,0)
 ..S DPAT=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHMTK5",24,0)
 ..I 'DPAT S ^TMP($J,"NP",NX_"~"_R0_"~"_RM_"~"_FHDFN)=FHDFN_"^"_ADM_"^"_O1 Q
"RTN","FHMTK5",25,0)
 ..S TIM=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),"^",9) D GET
"RTN","FHMTK5",26,0)
 ..Q
"RTN","FHMTK5",27,0)
 .Q
"RTN","FHMTK5",28,0)
 S PG=0 D HDR S X9="" F  S X9=$O(^TMP($J,"NP",X9)) Q:X9=""  S FHDFN=$P(^(X9),"^",1),ADM=$P(^(X9),"^",2),Y=$P(^(X9),"^",3) D  Q:ANS="^"
"RTN","FHMTK5",29,0)
 .D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHMTK5",30,0)
 .S RM=$P(X9,"~",3),WRDN=$E($P(X9,"~",1),3,99)
"RTN","FHMTK5",31,0)
 .D:$Y'<(IOSL-8) HDR Q:ANS="^"
"RTN","FHMTK5",32,0)
 .W !,$E(WRDN,1,15)_"/"_$E(RM,1,15),?34,$E($P($G(^DPT(DFN,0)),"^",1),1,30),?66,Y Q
"RTN","FHMTK5",33,0)
 Q:ANS="^"  S PG=0 D HDR1 S X9="" F  S X9=$O(^TMP($J,"D",X9)) Q:X9=""  S XX=$G(^(X9)),ZZ=$G(^(X9,1)),FHDFN=$P(XX,"^",1),ADM=$P(XX,"^",2),Y=$P(XX,"^",3) D  Q:ANS="^"
"RTN","FHMTK5",34,0)
 .D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHMTK5",35,0)
 .S RM=$P(X9,"~",3),WRDN=$E($P(X9,"~",1),3,99)
"RTN","FHMTK5",36,0)
 .D:$Y'<(IOSL-8) HDR1 Q:ANS="^"
"RTN","FHMTK5",37,0)
 .W !!,$E(WRDN,1,15)_"/"_$E(RM,1,15),!,$E($P($G(^DPT(DFN,0)),"^",1),1,30)
"RTN","FHMTK5",38,0)
 .S DTP=$P(XX,"^",4) D:DTP'="" DTP^FH W:DTP'="" ?32,DTP W ?52,"Current: ",Y,!
"RTN","FHMTK5",39,0)
 .S DTP=$P(ZZ,"^",2) D:DTP'="" DTP^FH W:DTP'="" ?32,DTP W ?52,"Prev. Pattern: ",$P(ZZ,"^",1),! Q
"RTN","FHMTK5",40,0)
 Q
"RTN","FHMTK5",41,0)
GET ; Get Previous Diet Order
"RTN","FHMTK5",42,0)
 K ^TMP($J,"TRAV") S SK=0 F K0=0:0 S K0=$O(^FHPT(FHDFN,"A",ADM,"AC",K0)) Q:K0<1!(K0'<TIM)  S K2=$G(^(K0,0)),SK=K0,^TMP($J,"TRAV",9999999-SK)=K2
"RTN","FHMTK5",43,0)
 S X7="" F K0=0:0 S K0=$O(^TMP($J,"TRAV",K0)) Q:K0<1  S K2=$G(^(K0)) D  Q:X7'=""
"RTN","FHMTK5",44,0)
 .S X5=$P(K2,"^",2) Q:'X5
"RTN","FHMTK5",45,0)
 .S X6=$G(^FHPT(FHDFN,"A",ADM,"DI",+X5,0)) Q:X6=""
"RTN","FHMTK5",46,0)
 .Q:$P(X6,"^",7)'=""
"RTN","FHMTK5",47,0)
 .S X7=$G(^FHPT(FHDFN,"A",ADM,"DI",+X5,2))
"RTN","FHMTK5",48,0)
 .Q:X7=""
"RTN","FHMTK5",49,0)
 .S X8=$P($G(^FHPT(FHDFN,"A",ADM,"DI",+X5,0)),"^",9) D CUR
"RTN","FHMTK5",50,0)
 .S X8=$S($P($G(^FHPT(FHDFN,"A",ADM,"DI",+X5,3)),"^",2):$P(^FHPT(FHDFN,"A",ADM,"DI",+X5,3),"^",2),1:X8)
"RTN","FHMTK5",51,0)
 .S ^TMP($J,"D",NX_"~"_R0_"~"_RM_"~"_FHDFN)=FHDFN_"^"_ADM_"^"_O1_"^"_TIM
"RTN","FHMTK5",52,0)
 .S ^TMP($J,"D",NX_"~"_R0_"~"_RM_"~"_FHDFN,1)=Y_"^"_X8 Q
"RTN","FHMTK5",53,0)
 .Q
"RTN","FHMTK5",54,0)
 Q
"RTN","FHMTK5",55,0)
CUR S Y="" Q:X6=""  S FHOR=$P(X6,"^",2,6),FHLD=$P(X6,"^",7)
"RTN","FHMTK5",56,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHMTK5",57,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHMTK5",58,0)
 Q
"RTN","FHMTK5",59,0)
HDR ; Print No Diet Pattern Heading
"RTN","FHMTK5",60,0)
 D PAUSE Q:ANS="^"  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","FHMTK5",61,0)
 S PG=PG+1 W !,FHDTP,?33,"I N P A T I E N T S   W I T H   N O   D I E T   P A T T E R N S",?123,"Page ",PG
"RTN","FHMTK5",62,0)
 W !!,"Ward/Room",?34,"Patient",?66,"Current-Diet",!
"RTN","FHMTK5",63,0)
 Q
"RTN","FHMTK5",64,0)
HDR1 ; Print Previous Diet Pattern Heading
"RTN","FHMTK5",65,0)
 S PG=PG+1 D PAUSE Q:ANS="^"  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","FHMTK5",66,0)
 W !,FHDTP,?27,"P A T I E N T S   T H A T   H A D   I N D I V I D U A L   P A T T E R N S",?123,"Page ",PG
"RTN","FHMTK5",67,0)
 W !!,"Patient",?32,"Effective",?52,"Diet"
"RTN","FHMTK5",68,0)
 Q
"RTN","FHMTK5",69,0)
PAUSE ; Check to pause for reading
"RTN","FHMTK5",70,0)
 I IOST?1"C".E,PG R !!,"Press RETURN to continue. ",X:DTIME S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHMTK5",71,0)
 Q
"RTN","FHMTK5",72,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHMTK6")
0^120^B10926277
"RTN","FHMTK6",1,0)
FHMTK6 ; HISC/NCA/RTK/FAI - History of Diet Patterns ;10/20/04  07:12
"RTN","FHMTK6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK6",3,0)
 S (ANS,O1,FHO1)="",FHALL=1 D ^FHOMDPA G:'FHDFN KIL
"RTN","FHMTK6",4,0)
 I $O(^FHPT(FHDFN,"A",0))<1 W !!,"NO ADMISSIONS ON FILE!" G FHMTK6
"RTN","FHMTK6",5,0)
 D ADM I ADM'="" S FHADM=ADM D CUR^FHORD7 G:FHLD'="" KIL S FHO1=FHORD,O1=Y,ANS=""
"RTN","FHMTK6",6,0)
 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="Q",DA=FHDFN,X="??" D ^DIC
"RTN","FHMTK6",7,0)
A0 W !!,"Select ADMISSION",$S($D(^DPT(DFN,.1)):" (or C for CURRENT)",1:""),": " R X:DTIME G:'$T!("^"[X) KIL D:X="c" TR^FH
"RTN","FHMTK6",8,0)
 I X="C" D ADM G P0:ADM'<1,FHMTK6
"RTN","FHMTK6",9,0)
 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="EQM" D ^DIC G:Y<1 A0 S ADM=+Y
"RTN","FHMTK6",10,0)
P0 W !!!,"Current Diet: ",$S(O1'="":O1,1:"No Current Diet") S FHORD=""
"RTN","FHMTK6",11,0)
 K S S (LST,N1)=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"DI",K)) Q:K<1  S X=$G(^(K,0)),X1=$G(^(2)),X2=$G(^(3)) I X1'="" S (FHORD,LST)=K D LIS
"RTN","FHMTK6",12,0)
 I 'N1 W !!,"No Diet Pattern for this Admission!" G FHMTK6
"RTN","FHMTK6",13,0)
P1 R !!,"Detailed Display of which Pattern #? ",X:DTIME G:'$T!("^"[X) FHMTK6 I X'?1N.N!(X<1)!(X>N1) W *7," Enter Pattern # to List" G P1
"RTN","FHMTK6",14,0)
 I '$G(S(+X)) W !!,"No Pattern Saved for this Diet!" G FHMTK6
"RTN","FHMTK6",15,0)
 S FHORD=+S(+X) W ! S MP=0 D LIS^FHMTK4 G:ANS="^" FHMTK6
"RTN","FHMTK6",16,0)
 S PD=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),"^",13)
"RTN","FHMTK6",17,0)
 S CLERK=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,3)),"^",1)
"RTN","FHMTK6",18,0)
 W !!?25,"Pattern Entered By: ",$E($P($G(^VA(200,+CLERK,0)),"^",1),1,30),!
"RTN","FHMTK6",19,0)
 S Z=$O(^FHPT(FHDFN,"P",0)) I Z D PSE G:ANS="^" FHMTK6 D DISP^FHSEL1
"RTN","FHMTK6",20,0)
 I FHO1="" Q
"RTN","FHMTK6",21,0)
 S FHOR=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHO1,0)),"^",2,6)
"RTN","FHMTK6",22,0)
R5 R !!,"Do You Want to Store this Pattern As the Patient's Individual Pattern? N// ",Y:DTIME G:'$T!(Y="^") FHMTK6 S:Y="" Y="N" S X=Y D TR^FH S Y=X
"RTN","FHMTK6",23,0)
 I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,!,"  Answer YES to Store this Pattern as the patient's Diet Pattern;  NO, not to store." G R5
"RTN","FHMTK6",24,0)
 G:Y'?1"Y".E FHMTK6 W !!,"Storing Patient's Diet Pattern ..."
"RTN","FHMTK6",25,0)
 G:STR="" FHMTK6
"RTN","FHMTK6",26,0)
 S:$E(STR,$L(STR))=";" STR=$E(STR,1,$L(STR)-1)
"RTN","FHMTK6",27,0)
 I $L(STR)>240 S LN=$L($E(STR,1,240)," "),STR=$P(STR," ",1,LN-1)
"RTN","FHMTK6",28,0)
 S ^FHPT(FHDFN,"A",FHADM,"DI",FHO1,2)=STR D NOW^%DTC S TIM=%
"RTN","FHMTK6",29,0)
 S:$G(^FHPT(FHDFN,"A",FHADM,"DI",FHO1,3))="" ^FHPT(FHDFN,"A",FHADM,"DI",FHO1,3)=DUZ_"^"_TIM
"RTN","FHMTK6",30,0)
 I PD S $P(^FHPT(FHDFN,"A",FHADM,"DI",FHO1,0),"^",13)=PD
"RTN","FHMTK6",31,0)
 G FHMTK6
"RTN","FHMTK6",32,0)
ADM S WARD=$G(^DPT(DFN,.1))
"RTN","FHMTK6",33,0)
 I WARD="" W *7,!!,"NOT CURRENTLY AN INPATIENT!",! S ADM="" Q
"RTN","FHMTK6",34,0)
 S ADM=$G(^DPT("CN",WARD,DFN)) Q
"RTN","FHMTK6",35,0)
LIS I 'N1 W !!,"Pat  Date/Time Entered  Diet Pattern",!
"RTN","FHMTK6",36,0)
 S D1=$P(X2,"^",2)
"RTN","FHMTK6",37,0)
 S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7),Y=""
"RTN","FHMTK6",38,0)
 I FHLD'="" Q
"RTN","FHMTK6",39,0)
 S N1=N1+1,S(N1)=FHORD
"RTN","FHMTK6",40,0)
 S DTP=D1 S:DTP="" DTP=$P(X,"^",9)
"RTN","FHMTK6",41,0)
 D:DTP'="" DTP^FH W !,$J(N1,3),"  ",$S(DTP'="":DTP,1:"")
"RTN","FHMTK6",42,0)
 S Y="" F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHMTK6",43,0)
 W:Y'="" ?24,Y
"RTN","FHMTK6",44,0)
 Q
"RTN","FHMTK6",45,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHMTK6",46,0)
PSE I IOST?1"C-".E R !!,"Press RETURN to Continue ",X:DTIME W ! S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PSE
"RTN","FHMTK6",47,0)
 Q
"RTN","FHMTK7")
0^121^B9607976
"RTN","FHMTK7",1,0)
FHMTK7 ; HISC/NCA - Update Diet Restrictions ;12/6/00  15:14
"RTN","FHMTK7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK7",3,0)
 ; Update the Diet Restrictions For All Inpatients
"RTN","FHMTK7",4,0)
 R !!,"Update All Diet Related Information for Patients? Y // ",X:DTIME Q:'$T!(X["^")
"RTN","FHMTK7",5,0)
 S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,!,"  Answer YES or NO" G FHMTK7
"RTN","FHMTK7",6,0)
 S ANS=X?1"Y".E Q:'ANS
"RTN","FHMTK7",7,0)
 F W1=0:0 S W1=$O(^FHPT("AW",W1)) Q:W1'>0  F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",W1,FHDFN)) D:ADM PAT,STORD,SFMENU  ;P30
"RTN","FHMTK7",8,0)
 Q
"RTN","FHMTK7",9,0)
STORD ;Update Standing orders for a patient, P30
"RTN","FHMTK7",10,0)
 D SO^FHMTK8
"RTN","FHMTK7",11,0)
 Q
"RTN","FHMTK7",12,0)
SFMENU ;Update SF Menu for a patient, P30
"RTN","FHMTK7",13,0)
 D SF^FHMTK8
"RTN","FHMTK7",14,0)
 Q
"RTN","FHMTK7",15,0)
PAT ; Update Restrictions for a patient
"RTN","FHMTK7",16,0)
 S FHORD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",2) I FHORD<1 S DPAT="" G UPD
"RTN","FHMTK7",17,0)
 S Z=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),FHOR=$P(Z,"^",2,6) I "^^^^"[FHOR S DPAT="" G UPD
"RTN","FHMTK7",18,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0)) G:DPAT="" UPD
"RTN","FHMTK7",19,0)
 Q:'$D(^TMP($J,+DPAT))
"RTN","FHMTK7",20,0)
 ;
"RTN","FHMTK7",21,0)
UPD ; Update Pattern
"RTN","FHMTK7",22,0)
 S (COM,PP)=""
"RTN","FHMTK7",23,0)
 F SP=0:0 S SP=$O(^FHPT(FHDFN,"P",SP)) Q:SP<1  S M2=$G(^(SP,0)) I $P(M2,"^",4)="Y" D
"RTN","FHMTK7",24,0)
 .S FP=+M2 I $D(^FH(111.1,+DPAT,"RES","B",FP)) Q
"RTN","FHMTK7",25,0)
 .D PURG Q
"RTN","FHMTK7",26,0)
 F R1=0:0 S R1=$O(^FH(111.1,+DPAT,"RES",R1)) Q:R1<1  S M2=$G(^(R1,0)),FP=+M2 I FP D
"RTN","FHMTK7",27,0)
 .S SP=$O(^FHPT(FHDFN,"P","B",FP,0)) I 'SP D ADD Q
"RTN","FHMTK7",28,0)
 .I $P($G(^FHPT(FHDFN,"P",SP,0)),"^",2)=$P(M2,"^",2) Q
"RTN","FHMTK7",29,0)
 .D CHG Q
"RTN","FHMTK7",30,0)
 G FIL
"RTN","FHMTK7",31,0)
CHG ; Change the Diet Restrictions
"RTN","FHMTK7",32,0)
 S MEAL=$P(M2,"^",2)
"RTN","FHMTK7",33,0)
 I $P($G(^FHPT(FHDFN,"P",SP,0)),"^",4)="Y" S M2=MEAL G CHG1 ;diet related
"RTN","FHMTK7",34,0)
 Q:MEAL=""
"RTN","FHMTK7",35,0)
 S M1=$P($G(^FHPT(FHDFN,"P",SP,0)),"^",2) Q:M1=""  S:M1="A" M1="BNE"
"RTN","FHMTK7",36,0)
 S M2="" F LP=1:1:$L(MEAL) I M1'[$E(MEAL,LP) S M2=M2_$E(MEAL,LP)
"RTN","FHMTK7",37,0)
 Q:M2=""
"RTN","FHMTK7",38,0)
 S M1=M1_M2,M2="" S:M1["B" M2="B" S:M1["N" M2=M2_"N" S:M1["E" M2=M2_"E"
"RTN","FHMTK7",39,0)
CHG1 S $P(^FHPT(FHDFN,"P",SP,0),"^",2)=M2
"RTN","FHMTK7",40,0)
 S PP=" Mod 1 "_$P(^FH(115.2,+FP,0),"^",1)_" ("_M2_")"_" (D)" D SET
"RTN","FHMTK7",41,0)
 Q
"RTN","FHMTK7",42,0)
ADD ; Add the Diet Restriction
"RTN","FHMTK7",43,0)
 S MEAL=$P($G(M2),"^",2) Q:MEAL=""
"RTN","FHMTK7",44,0)
 K DIC,DD,DO S DIC="^FHPT(FHDFN,""P"",",DIC(0)="L",DLAYGO=115,DA(1)=FHDFN,X=+FP
"RTN","FHMTK7",45,0)
A1 L +^FHPT(FHDFN,"P",0)
"RTN","FHMTK7",46,0)
 I '$D(^FHPT(FHDFN,"P",0)) S ^FHPT(FHDFN,"P",0)="^115.09PA^^"
"RTN","FHMTK7",47,0)
 S NUM=$P(^FHPT(FHDFN,"P",0),"^",3)+1
"RTN","FHMTK7",48,0)
 S $P(^FHPT(FHDFN,"P",0),"^",3)=NUM
"RTN","FHMTK7",49,0)
 L -^FHPT(FHDFN,"P",0) I $D(^FHPT(FHDFN,"P",NUM,0)) G A1
"RTN","FHMTK7",50,0)
 S DINUM=NUM D FILE^DICN S SP=+Y K DIC,DLAYGO,DINUM
"RTN","FHMTK7",51,0)
 S $P(^FHPT(FHDFN,"P",+SP,0),"^",2,4)=MEAL_"^^Y",PP=" Add 1 "_$P(^FH(115.2,+FP,0),"^",1)_" ("_$P(FP,"^",2)_")"_" (D)" D SET
"RTN","FHMTK7",52,0)
 Q
"RTN","FHMTK7",53,0)
PURG ; Purge the Old Restrictions
"RTN","FHMTK7",54,0)
 S M1=$P($G(^FHPT(FHDFN,"P",SP,0)),"^",2) Q:M1=""  S:M1="A" M1="BNE"
"RTN","FHMTK7",55,0)
 K DIK S DA(1)=FHDFN,DA=+SP,DIK="^FHPT("_DA(1)_",""P""," D ^DIK K DIK,DA S PP=" Del 1 "_$P(^FH(115.2,+FP,0),"^",1)_" ("_M1_")"_" (D)" D SET Q
"RTN","FHMTK7",56,0)
SET I $L(COM)+$L(PP)>120 S EVT="P^O^^"_$E(COM,2,999) D ^FHORX S COM=""
"RTN","FHMTK7",57,0)
 S COM=COM_PP
"RTN","FHMTK7",58,0)
 Q
"RTN","FHMTK7",59,0)
FIL ; File the Event
"RTN","FHMTK7",60,0)
 I COM'="" S EVT="P^O^^"_$E(COM,2,999) D ^FHORX
"RTN","FHMTK7",61,0)
 Q
"RTN","FHMTK8")
0^122^B34945617
"RTN","FHMTK8",1,0)
FHMTK8 ; HIOFO/SS - DIET PATTERN RELATED UPDATES ;02/22/01  09:02
"RTN","FHMTK8",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTK8",3,0)
 ;
"RTN","FHMTK8",4,0)
SO ;check and update Stand.Orders,called from FHMTK7
"RTN","FHMTK8",5,0)
 N FH S FH=$$DOSO(FHDFN,ADM)
"RTN","FHMTK8",6,0)
 Q
"RTN","FHMTK8",7,0)
 ;
"RTN","FHMTK8",8,0)
DOSO(FHDFN,FHADM) ;check/update SO
"RTN","FHMTK8",9,0)
 ;
"RTN","FHMTK8",10,0)
 N FHMX,FHCNT,FHPSO,FHS1,FH,FHDP
"RTN","FHMTK8",11,0)
 S FHDP=$$CURDT(FHDFN,FHADM) ;current DietPattr
"RTN","FHMTK8",12,0)
 ;1)for patterns edited - update 
"RTN","FHMTK8",13,0)
 ;2)if no pattern/deleted (FHDP=-1) -cancel all diet related
"RTN","FHMTK8",14,0)
 I FHDP'<0 Q:'$D(^TMP($J,+FHDP)) 0
"RTN","FHMTK8",15,0)
 S FHCNT=0
"RTN","FHMTK8",16,0)
 F FH=0:0 S FH=$O(^FHPT("ASP",FHDFN,FHADM,FH)) Q:FH<1  D
"RTN","FHMTK8",17,0)
 . S FHS1=$G(^FHPT(FHDFN,"A",FHADM,"SP",FH,0))
"RTN","FHMTK8",18,0)
 . I $P(FHS1,"^",9)="Y" S FHCNT=FHCNT+1,FHPSO("C",FH)=FHS1
"RTN","FHMTK8",19,0)
 Q $$CHKSO(FHDP,.FHPSO)  ;0-no changes,1-changes
"RTN","FHMTK8",20,0)
 ;
"RTN","FHMTK8",21,0)
CHKSO(FHDT,FHCSO) ;compares SO of diet patterns(FHDT) 
"RTN","FHMTK8",22,0)
 ;and patient (FHCSO)
"RTN","FHMTK8",23,0)
 N FHML,FH,FHSO,FHCNT2,FH1,FH2
"RTN","FHMTK8",24,0)
 S FHCNT2=0
"RTN","FHMTK8",25,0)
 F FHML="B","N","E" D  ;-thru diff meals
"RTN","FHMTK8",26,0)
 . S FH1=0   ;----thru diet pattern SO
"RTN","FHMTK8",27,0)
 . F  S FH1=$O(^FH(111.1,FHDT,FHML_"S",FH1)) Q:+FH1=0  D
"RTN","FHMTK8",28,0)
 .. S FHCNT2=FHCNT2+1
"RTN","FHMTK8",29,0)
 .. S FHCSO("N",FHCNT2)=FHML_"^"_^FH(111.1,FHDT,FHML_"S",FH1,0) ;dietpat
"RTN","FHMTK8",30,0)
 .. S FH2=0 ;-----thru patient's diet related SOrders
"RTN","FHMTK8",31,0)
 .. F  S FH2=$O(FHCSO("C",FH2)) Q:+FH2=0  D  Q:+FH2=0
"RTN","FHMTK8",32,0)
 ... Q:$P(FHCSO("C",FH2),"^",3)'=FHML  ;diff meal
"RTN","FHMTK8",33,0)
 ... I $P(FHCSO("C",FH2),"^",2)=+$P(FHCSO("N",FHCNT2),"^",2) D  S FH2=0
"RTN","FHMTK8",34,0)
 .... I $P(FHCSO("C",FH2),"^",8)'=$P(FHCSO("N",FHCNT2),"^",3) S FHCSO("U",FH2)=FHCSO("C",FH2),$P(FHCSO("U",FH2),"^",8)=$P(FHCSO("N",FHCNT2),"^",3)
"RTN","FHMTK8",35,0)
 .... K FHCSO("N",FHCNT2),FHCSO("C",FH2) Q
"RTN","FHMTK8",36,0)
 ;FHCSO contains info for update
"RTN","FHMTK8",37,0)
 ;subscripts mean: "N"-insert,"U"-change amount,"C"-cancel
"RTN","FHMTK8",38,0)
 I $D(FHCSO) D UPDTSO(FHDFN,FHADM,.FHCSO) Q 1  ; updated
"RTN","FHMTK8",39,0)
 Q 0  ;no changes
"RTN","FHMTK8",40,0)
 ;
"RTN","FHMTK8",41,0)
UPDTSO(FHDFN,FHADM,FHUCSO) ;update Standing orders. 
"RTN","FHMTK8",42,0)
 ;FHUCSO-array(see CHKSO for format)
"RTN","FHMTK8",43,0)
 N FHNOW,FH,FHNEW
"RTN","FHMTK8",44,0)
 ;D PATNAME^FHOMUTL I DFN="" Q ;for ^FHORX
"RTN","FHMTK8",45,0)
 ;I '$D(DFN) N DFN S DFN=FHDFN ;for ^FHORX
"RTN","FHMTK8",46,0)
 I '$D(ADM) N ADM S ADM=FHADM
"RTN","FHMTK8",47,0)
 D NOW^%DTC S FHNOW=%
"RTN","FHMTK8",48,0)
 I '$D(DUZ) W !,"Unknown user" Q
"RTN","FHMTK8",49,0)
 ; cancel
"RTN","FHMTK8",50,0)
 S FH=0 F  S FH=$O(FHUCSO("C",FH)) Q:+FH=0  D
"RTN","FHMTK8",51,0)
 . D CANCSO
"RTN","FHMTK8",52,0)
 ; update
"RTN","FHMTK8",53,0)
 S FH=0 F  S FH=$O(FHUCSO("U",FH)) Q:+FH=0  D
"RTN","FHMTK8",54,0)
 . D CANCSO
"RTN","FHMTK8",55,0)
 . S FHNEW=$$ADDSO(FHDFN,FHADM,$P(FHUCSO("U",FH),"^",3),$P(FHUCSO("U",FH),"^",2),$P(FHUCSO("U",FH),"^",8)) S EVT="S^O^"_FHNEW D ^FHORX
"RTN","FHMTK8",56,0)
 ; add new
"RTN","FHMTK8",57,0)
 S FH=0 F  S FH=$O(FHUCSO("N",FH)) Q:+FH=0  D
"RTN","FHMTK8",58,0)
 . S FHNEW=$$ADDSO(FHDFN,FHADM,$P(FHUCSO("N",FH),"^",1),$P(FHUCSO("N",FH),"^",2),$P(FHUCSO("N",FH),"^",3)) S EVT="S^O^"_FHNEW D ^FHORX
"RTN","FHMTK8",59,0)
 Q
"RTN","FHMTK8",60,0)
 ;
"RTN","FHMTK8",61,0)
CANCSO ;cancel SO
"RTN","FHMTK8",62,0)
 S $P(^FHPT(FHDFN,"A",FHADM,"SP",FH,0),"^",6,7)=FHNOW_"^"_DUZ
"RTN","FHMTK8",63,0)
 K ^FHPT("ASP",FHDFN,FHADM,FH)
"RTN","FHMTK8",64,0)
 S EVT="S^C^"_FH D ^FHORX  ;file event
"RTN","FHMTK8",65,0)
 Q
"RTN","FHMTK8",66,0)
 ;
"RTN","FHMTK8",67,0)
ADDSO(FHDFN,FHADM,FHML,FHSO,FHN)     ; Add Standing Order
"RTN","FHMTK8",68,0)
 N FHX,FH
"RTN","FHMTK8",69,0)
 S FH=0
"RTN","FHMTK8",70,0)
AGN L +^FHPT(FHDFN,"A",FHADM,"SP",0)
"RTN","FHMTK8",71,0)
 I '$D(^FHPT(FHDFN,"A",FHADM,"SP",0)) S ^FHPT(FHDFN,"A",FHADM,"SP",0)="^115.08^^"
"RTN","FHMTK8",72,0)
 S FHX=^FHPT(FHDFN,"A",FHADM,"SP",0),FH=$P(FHX,"^",3)+1,^(0)=$P(FHX,"^",1,2)_"^"_FH_"^"_($P(FHX,"^",4)+1)
"RTN","FHMTK8",73,0)
 L -^FHPT(FHDFN,"A",FHADM,"SP",0)
"RTN","FHMTK8",74,0)
 G:$D(^FHPT(FHDFN,"A",FHADM,"SP",FH)) AGN
"RTN","FHMTK8",75,0)
 S ^FHPT(FHDFN,"A",FHADM,"SP",FH,0)=FH_"^"_FHSO_"^"_FHML_"^"_FHNOW_"^"_DUZ_"^^^"_FHN_"^Y",^FHPT("ASP",FHDFN,FHADM,FH)=""
"RTN","FHMTK8",76,0)
 Q FH
"RTN","FHMTK8",77,0)
 ;
"RTN","FHMTK8",78,0)
 ;--------- Suppl Feedings --------------------
"RTN","FHMTK8",79,0)
SF ;check/update diet related SF,called from FHMTK7
"RTN","FHMTK8",80,0)
 D DOSF(FHDFN,ADM)
"RTN","FHMTK8",81,0)
 Q
"RTN","FHMTK8",82,0)
DOSF(FHDFN,FHADM) ;check/update SF
"RTN","FHMTK8",83,0)
 ;FHDFN-patient,FHADM-admission
"RTN","FHMTK8",84,0)
 N FHDSF,FH,FHPSF
"RTN","FHMTK8",85,0)
 ;current DietPattr (DP)'s
"RTN","FHMTK8",86,0)
 S FH=$$CURDT(FHDFN,FHADM)
"RTN","FHMTK8",87,0)
 ;update only for patterns edited
"RTN","FHMTK8",88,0)
 I FH'<0 Q:'$D(^TMP($J,+FH))
"RTN","FHMTK8",89,0)
 ;DietPattr's SF menu (ien of 118.1)
"RTN","FHMTK8",90,0)
 S FHDSF=$P($G(^FH(111.1,FH,0)),"^",8)
"RTN","FHMTK8",91,0)
 ;Patient's SF menu info
"RTN","FHMTK8",92,0)
 ;CURRENT seq# of SF MENU entered via SF menu option
"RTN","FHMTK8",93,0)
 S FHPSF("N")=$P($G(^FHPT(FHDFN,"A",FHADM,0)),"^",7)
"RTN","FHMTK8",94,0)
 S FHPSF("E")=$S(FHPSF("N")="":1,1:0) ;1-if cancelled Explicitly
"RTN","FHMTK8",95,0)
 ; if not cancelled Explicitly it still can be entered explicitly
"RTN","FHMTK8",96,0)
 ; as well as via diet pattern
"RTN","FHMTK8",97,0)
 ; pick up SF seq# from subfile
"RTN","FHMTK8",98,0)
 S:FHPSF("E")=1 FHPSF("N")=$P($G(^FHPT(FHDFN,"A",FHADM,"SF",0)),"^",3)
"RTN","FHMTK8",99,0)
 ;get SF info
"RTN","FHMTK8",100,0)
 S FHPSF=$G(^FHPT(FHDFN,"A",FHADM,"SF",+FHPSF("N"),0))
"RTN","FHMTK8",101,0)
 ;if it is expired or cancelled
"RTN","FHMTK8",102,0)
 S FHPSF("C")=$S($P(FHPSF,"^",32)="":0,1:1)
"RTN","FHMTK8",103,0)
 ;if INDIVIDUALIZED - do nothing
"RTN","FHMTK8",104,0)
 Q:+$P(FHPSF,"^",4)=1
"RTN","FHMTK8",105,0)
 ;if it is not diet related or if it entered Explicitly via SF menu
"RTN","FHMTK8",106,0)
 ;and diet pattern has no SF menu - then do nothing
"RTN","FHMTK8",107,0)
 I $P(FHPSF,"^",34)'="Y" Q:FHDSF=""
"RTN","FHMTK8",108,0)
 I FHPSF("E")=1 Q:FHDSF=""
"RTN","FHMTK8",109,0)
 D UPDSF(FHDFN,FHADM,FHDSF,.FHPSF)
"RTN","FHMTK8",110,0)
 Q
"RTN","FHMTK8",111,0)
 ;
"RTN","FHMTK8",112,0)
UPDSF(FHDFN,FHADM,FHSF,FHPSF) ;updates diet related Suppl.Feed.
"RTN","FHMTK8",113,0)
 N FHX,FHNO,FHPNO,FHPNN,FHNOW
"RTN","FHMTK8",114,0)
 D NOW^%DTC S FHNOW=%
"RTN","FHMTK8",115,0)
 ;D PATNAME^FHOMUTL I DFN="" Q ;for ^FHORX
"RTN","FHMTK8",116,0)
 ;I '$D(DFN) N DFN S DFN=FHDFN ;for ^FHORX
"RTN","FHMTK8",117,0)
 I '$D(ADM) N ADM S ADM=FHADM
"RTN","FHMTK8",118,0)
 I '$D(DUZ) W !,"Unknown user" Q
"RTN","FHMTK8",119,0)
 ;if SF is diet related & diet pattr doesn't have SF - cancel it
"RTN","FHMTK8",120,0)
 I FHSF="" S FHNO(0)=+FHPSF("N") D:FHNO(0)>0 CANCSF Q
"RTN","FHMTK8",121,0)
 ;Diet.Pattr's SFmenu items
"RTN","FHMTK8",122,0)
 S FHPNO=$G(^FH(118.1,+FHSF,1)) Q:FHPNO=""
"RTN","FHMTK8",123,0)
 ;if no patient SF menu - add
"RTN","FHMTK8",124,0)
 G:+FHPSF("N")=0!(FHPSF("C")=1) CONT
"RTN","FHMTK8",125,0)
 ;if diffr SF menu - change it
"RTN","FHMTK8",126,0)
 G:+$P(FHPSF,"^",4)'=+FHSF CONT
"RTN","FHMTK8",127,0)
 ;If SF menu and its content are the same - do nothing
"RTN","FHMTK8",128,0)
 Q:$P(FHPSF,"^",5,29)=FHPNO
"RTN","FHMTK8",129,0)
 ;cancel current and add new
"RTN","FHMTK8",130,0)
CONT S FHPNN="^"_FHNOW_"^"_DUZ_"^"_FHSF_"^"_FHPNO
"RTN","FHMTK8",131,0)
 ;create new record
"RTN","FHMTK8",132,0)
TRYSF L +^FHPT(FHDFN,"A",FHADM,"SF",0)
"RTN","FHMTK8",133,0)
 I '$D(^FHPT(FHDFN,"A",FHADM,"SF",0)) S ^FHPT(FHDFN,"A",FHADM,"SF",0)="^115.07^^"
"RTN","FHMTK8",134,0)
 S FHX=^FHPT(FHDFN,"A",FHADM,"SF",0),FHNO(0)=+$P(FHX,"^",3),FHNO=FHNO(0)+1,^(0)=$P(FHX,"^",1,2)_"^"_FHNO_"^"_($P(FHX,"^",4)+1)
"RTN","FHMTK8",135,0)
 L -^FHPT(FHDFN,"A",FHADM,"SF",0) I $D(^FHPT(FHDFN,"A",FHADM,"SF",FHNO)) G TRYSF
"RTN","FHMTK8",136,0)
 ;add new
"RTN","FHMTK8",137,0)
 S ^FHPT(FHDFN,"A",FHADM,"SF",FHNO,0)=FHNO_"^"_$P(FHPNN,"^",2,99)
"RTN","FHMTK8",138,0)
 ;when new one is OK - cancel previous & file event
"RTN","FHMTK8",139,0)
 D CANCSF
"RTN","FHMTK8",140,0)
 ;update # and put timestamp for new record
"RTN","FHMTK8",141,0)
 S $P(^FHPT(FHDFN,"A",FHADM,0),"^",7)=FHNO
"RTN","FHMTK8",142,0)
 S:FHNO $P(^FHPT(FHDFN,"A",FHADM,"SF",FHNO,0),"^",30,31)=FHNOW_"^"_DUZ
"RTN","FHMTK8",143,0)
 ;set diet related for new record
"RTN","FHMTK8",144,0)
 S:FHNO $P(^FHPT(FHDFN,"A",FHADM,"SF",FHNO,0),"^",34)="Y"
"RTN","FHMTK8",145,0)
 ;file event
"RTN","FHMTK8",146,0)
 S EVT="F^O^"_FHNO D ^FHORX
"RTN","FHMTK8",147,0)
 Q
"RTN","FHMTK8",148,0)
 ;cancel previous & file event
"RTN","FHMTK8",149,0)
CANCSF I FHNO(0)'=0&(FHPSF("C")=0) D
"RTN","FHMTK8",150,0)
 . S $P(^FHPT(FHDFN,"A",FHADM,"SF",FHNO(0),0),"^",32,33)=FHNOW_"^"_DUZ
"RTN","FHMTK8",151,0)
 . S $P(^FHPT(FHDFN,"A",FHADM,0),"^",7)=""
"RTN","FHMTK8",152,0)
 . S EVT="F^C^"_FHNO(0) D ^FHORX
"RTN","FHMTK8",153,0)
 Q
"RTN","FHMTK8",154,0)
 ;
"RTN","FHMTK8",155,0)
CURDT(FHDFN,FHADM) ;get current patient's diet pattern ien of 111.1
"RTN","FHMTK8",156,0)
 N FHDT,FHOR,FHZ
"RTN","FHMTK8",157,0)
 S FHDT=$P($G(^FHPT(FHDFN,"A",FHADM,0)),"^",2) Q:FHDT<1 -1
"RTN","FHMTK8",158,0)
 S FHZ=$G(^FHPT(FHDFN,"A",FHADM,"DI",FHDT,0)),FHOR=$P(FHZ,"^",2,6) I "^^^^"[FHOR Q -1
"RTN","FHMTK8",159,0)
 S FHDT=$O(^FH(111.1,"AB",FHOR,0)) Q:FHDT="" -1  ;doesn't exist
"RTN","FHMTK8",160,0)
 Q FHDT
"RTN","FHMTK8",161,0)
 ;
"RTN","FHMTK8",162,0)
NEWTMP ;save original state before editing
"RTN","FHMTK8",163,0)
 Q:$O(^TMP($J,DA,""))'=""  ;repeated editing
"RTN","FHMTK8",164,0)
 M ^TMP($J,DA)=^FH(111.1,DA)
"RTN","FHMTK8",165,0)
 Q
"RTN","FHMTK8",166,0)
 ;
"RTN","FHMTK8",167,0)
CLEANTMP ;
"RTN","FHMTK8",168,0)
 N FHA1,FHB1,FHDA
"RTN","FHMTK8",169,0)
 S FHDA=""
"RTN","FHMTK8",170,0)
 F  S FHDA=$O(^TMP($J,FHDA)) Q:+FHDA=0  D
"RTN","FHMTK8",171,0)
 . S FHA1="^TMP($J,FHDA,"""")",FHB1="^FH(111.1,FHDA,"""")"
"RTN","FHMTK8",172,0)
 . F  Q:$$FETCH(.FHA1,$J,FHDA)'=$$FETCH(.FHB1,111.1,FHDA)  I FHA1="" K ^TMP($J,FHDA) Q
"RTN","FHMTK8",173,0)
 Q
"RTN","FHMTK8",174,0)
 ;
"RTN","FHMTK8",175,0)
FETCH(FHX,FHSUB,FHDP) ;
"RTN","FHMTK8",176,0)
 S FHX=$Q(@FHX)
"RTN","FHMTK8",177,0)
 I $P($P(FHX,",",1),"(",2)'=FHSUB!($P(FHX,",",2)'=FHDP) S FHX="" Q ""
"RTN","FHMTK8",178,0)
 Q $P(FHX,",",2,99)_"="_@FHX
"RTN","FHMTK8",179,0)
 ;
"RTN","FHMTKO")
0^123^B16079692
"RTN","FHMTKO",1,0)
FHMTKO ; HISC/NCA/FAI - List Outpats Without Diet Patterns/Ind Pattern ;02/24/04  11:00
"RTN","FHMTKO",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHMTKO",3,0)
LIS W !!,"The list requires a 132 column printer.",!
"RTN","FHMTKO",4,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHMTKO",5,0)
 I $D(IO("Q")) S FHPGM="L1^FHMTKO",FHLST="" D EN2^FH G KIL
"RTN","FHMTKO",6,0)
 U IO D L1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHMTKO",7,0)
L1 ; Process Listing Outpatients Without Diet Patterns & Inpatients
"RTN","FHMTKO",8,0)
 ; With Individual Pattern
"RTN","FHMTKO",9,0)
 D NOW^%DTC S DTP=% D DTP^FH S FHDTP=DTP
"RTN","FHMTKO",10,0)
 K ^TMP($J,"D"),^TMP($J,"NP"),^TMP($J,"W") S ANS=""
"RTN","FHMTKO",11,0)
 F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  D
"RTN","FHMTKO",12,0)
 .S P0=$G(^FH(119.6,W1,0)),WRDN=$P(P0,"^",1),P0=$P(P0,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHMTKO",13,0)
 .S ^TMP($J,"W",P0_WRDN)=W1 Q
"RTN","FHMTKO",14,0)
 S NX="" F  S NX=$O(^TMP($J,"W",NX)) Q:NX=""  S X1=$G(^(NX)),W1=+X1 D
"RTN","FHMTKO",15,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  D
"RTN","FHMTKO",16,0)
 ..D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHMTKO",17,0)
 ..S ADM=$G(^FHPT("AW",W1,FHDFN)),RI=$G(^DPT(DFN,.108)),RM=$G(^DPT(DFN,.101)) S:RM="" RM="***"
"RTN","FHMTKO",18,0)
 ..S RE=$S(RI:$O(^FH(119.6,"AR",+RI,W1,0)),1:"")
"RTN","FHMTKO",19,0)
 ..S R0=$S(RE:$P($G(^FH(119.6,W1,"R",+RE,0)),"^",2),1:"")
"RTN","FHMTKO",20,0)
 ..S R0=$S(R0<1:99,R0<10:"0"_R0,1:R0)
"RTN","FHMTKO",21,0)
 ..D CUR^FHORD7 Q:"^^^^"[FHOR  S:Y'="" O1=Y
"RTN","FHMTKO",22,0)
 ..Q:$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,2))'=""
"RTN","FHMTKO",23,0)
 ..S DPAT=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHMTKO",24,0)
 ..I 'DPAT S ^TMP($J,"NP",NX_"~"_R0_"~"_RM_"~"_FHDFN)=FHDFN_"^"_ADM_"^"_O1 Q
"RTN","FHMTKO",25,0)
 ..S TIM=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),"^",9) D GET
"RTN","FHMTKO",26,0)
 ..Q
"RTN","FHMTKO",27,0)
 .Q
"RTN","FHMTKO",28,0)
 S PG=0 D HDR S X9="" F  S X9=$O(^TMP($J,"NP",X9)) Q:X9=""  S FHDFN=$P(^(X9),"^",1),ADM=$P(^(X9),"^",2),Y=$P(^(X9),"^",3) D  Q:ANS="^"
"RTN","FHMTKO",29,0)
 .D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHMTKO",30,0)
 .S RM=$P(X9,"~",3),WRDN=$E($P(X9,"~",1),3,99)
"RTN","FHMTKO",31,0)
 .D:$Y'<(IOSL-8) HDR Q:ANS="^"
"RTN","FHMTKO",32,0)
 .W !,$E(WRDN,1,15)_"/"_$E(RM,1,15),?34,$E($P($G(^DPT(DFN,0)),"^",1),1,30),?66,Y Q
"RTN","FHMTKO",33,0)
 Q:ANS="^"  S PG=0 D HDR1 S X9="" F  S X9=$O(^TMP($J,"D",X9)) Q:X9=""  S XX=$G(^(X9)),ZZ=$G(^(X9,1)),FHDFN=$P(XX,"^",1),ADM=$P(XX,"^",2),Y=$P(XX,"^",3) D  Q:ANS="^"
"RTN","FHMTKO",34,0)
 .S RM=$P(X9,"~",3),WRDN=$E($P(X9,"~",1),3,99)
"RTN","FHMTKO",35,0)
 .D:$Y'<(IOSL-8) HDR1 Q:ANS="^"
"RTN","FHMTKO",36,0)
 .W !!,$E(WRDN,1,15)_"/"_$E(RM,1,15),!,$E($P($G(^DPT(DFN,0)),"^",1),1,30)
"RTN","FHMTKO",37,0)
 .S DTP=$P(XX,"^",4) D:DTP'="" DTP^FH W:DTP'="" ?32,DTP W ?52,"Current: ",Y,!
"RTN","FHMTKO",38,0)
 .S DTP=$P(ZZ,"^",2) D:DTP'="" DTP^FH W:DTP'="" ?32,DTP W ?52,"Prev. Pattern: ",$P(ZZ,"^",1),! Q
"RTN","FHMTKO",39,0)
 Q
"RTN","FHMTKO",40,0)
GET ; Get Previous Diet Order
"RTN","FHMTKO",41,0)
 K ^TMP($J,"TRAV") S SK=0 F K0=0:0 S K0=$O(^FHPT(FHDFN,"A",ADM,"AC",K0)) Q:K0<1!(K0'<TIM)  S K2=$G(^(K0,0)),SK=K0,^TMP($J,"TRAV",9999999-SK)=K2
"RTN","FHMTKO",42,0)
 S X7="" F K0=0:0 S K0=$O(^TMP($J,"TRAV",K0)) Q:K0<1  S K2=$G(^(K0)) D  Q:X7'=""
"RTN","FHMTKO",43,0)
 .S X5=$P(K2,"^",2) Q:'X5
"RTN","FHMTKO",44,0)
 .S X6=$G(^FHPT(FHDFN,"A",ADM,"DI",+X5,0)) Q:X6=""
"RTN","FHMTKO",45,0)
 .Q:$P(X6,"^",7)'=""
"RTN","FHMTKO",46,0)
 .S X7=$G(^FHPT(FHDFN,"A",ADM,"DI",+X5,2))
"RTN","FHMTKO",47,0)
 .Q:X7=""
"RTN","FHMTKO",48,0)
 .S X8=$P($G(^FHPT(FHDFN,"A",ADM,"DI",+X5,0)),"^",9) D CUR
"RTN","FHMTKO",49,0)
 .S X8=$S($P($G(^FHPT(FHDFN,"A",ADM,"DI",+X5,3)),"^",2):$P(^FHPT(FHDFN,"A",ADM,"DI",+X5,3),"^",2),1:X8)
"RTN","FHMTKO",50,0)
 .S ^TMP($J,"D",NX_"~"_R0_"~"_RM_"~"_FHDFN)=FHDFN_"^"_ADM_"^"_O1_"^"_TIM
"RTN","FHMTKO",51,0)
 .S ^TMP($J,"D",NX_"~"_R0_"~"_RM_"~"_FHDFN,1)=Y_"^"_X8 Q
"RTN","FHMTKO",52,0)
 .Q
"RTN","FHMTKO",53,0)
 Q
"RTN","FHMTKO",54,0)
CUR S Y="" Q:X6=""  S FHOR=$P(X6,"^",2,6),FHLD=$P(X6,"^",7)
"RTN","FHMTKO",55,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHMTKO",56,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHMTKO",57,0)
 Q
"RTN","FHMTKO",58,0)
HDR ; Print No Diet Pattern Heading
"RTN","FHMTKO",59,0)
 D PAUSE Q:ANS="^"  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","FHMTKO",60,0)
 S PG=PG+1 W !,FHDTP,?33,"I N P A T I E N T S   W I T H   N O   D I E T   P A T T E R N S",?123,"Page ",PG
"RTN","FHMTKO",61,0)
 W !!,"Ward/Room",?34,"Patient",?66,"Current-Diet",!
"RTN","FHMTKO",62,0)
 Q
"RTN","FHMTKO",63,0)
HDR1 ; Print Previous Diet Pattern Heading
"RTN","FHMTKO",64,0)
 S PG=PG+1 D PAUSE Q:ANS="^"  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","FHMTKO",65,0)
 W !,FHDTP,?27,"I N P A T I E N T S   T H A T   H A D   I N D I V I D U A L   P A T T E R N S",?123,"Page ",PG
"RTN","FHMTKO",66,0)
 W !!,"Patient",?32,"Effective",?52,"Diet"
"RTN","FHMTKO",67,0)
 Q
"RTN","FHMTKO",68,0)
PAUSE ; Check to pause for reading
"RTN","FHMTKO",69,0)
 I IOST?1"C".E,PG R !!,"Press RETURN to continue. ",X:DTIME S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHMTKO",70,0)
 Q
"RTN","FHMTKO",71,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHNO1")
0^124^B3318863
"RTN","FHNO1",1,0)
FHNO1 ; HISC/REL - Supplement Feeding Management ;3/8/95  13:27
"RTN","FHNO1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO1",3,0)
EN3 ; Edit Supplemental Feedings
"RTN","FHNO1",4,0)
 D NOW^%DTC S DT=%\1 K %,%H,%I
"RTN","FHNO1",5,0)
 W ! S (DIC,DIE)="^FH(118,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=118 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN3:Y<1
"RTN","FHNO1",6,0)
 S DA=+Y,DR=$S(DA>1:".01;",1:"")_"1;5//Y;6:20;22:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=118 D ^DIE K DA,DIE,DIDEL,DR G EN3
"RTN","FHNO1",7,0)
EN4 ; Edit Supp. Feeding Menus
"RTN","FHNO1",8,0)
 W ! S (DIC,DIE)="^FH(118.1,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=118.1 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN4:Y<1
"RTN","FHNO1",9,0)
 I +Y=1 W *7,!!,"You cannot edit INDIVIDUALIZED Supplemental Menu",! G EN4
"RTN","FHNO1",10,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=118.1 D ^DIE G:'$D(DA) EN41
"RTN","FHNO1",11,0)
 S Y=$G(^FH(118.1,DA,1)),E=0
"RTN","FHNO1",12,0)
 F K=2:2:24 I $P(Y,"^",K),$P(Y,"^",K-1)="" S $P(Y,"^",K)="",E=1
"RTN","FHNO1",13,0)
 S:E ^FH(118.1,DA,1)=Y
"RTN","FHNO1",14,0)
EN41 K DA,DIE,DIDEL,DR,E,K,Y G EN4
"RTN","FHNO1",15,0)
EN6 ; List Supplemental Feedings
"RTN","FHNO1",16,0)
 W ! S L=0,DIC="^FH(118,",FLDS="[FHSFLST]",BY="NAME"
"RTN","FHNO1",17,0)
 S FR="",TO="",DHD="SUPPLEMENTAL FEEDINGS" D EN1^DIP,RSET Q
"RTN","FHNO1",18,0)
EN7 ; List Supplemental Feeding Menus
"RTN","FHNO1",19,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHNO1",20,0)
 W ! S L=0,DIC="^FH(118.1,",FLDS="[FHSFMENU]",BY="NAME"
"RTN","FHNO1",21,0)
 S FR="",TO="",DHD="SUPPLEMENTAL FEEDING MENUS" D EN1^DIP,RSET Q
"RTN","FHNO1",22,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHNO1",23,0)
KIL G KILL^XUSCLEAN
"RTN","FHNO2")
0^125^B22999730
"RTN","FHNO2",1,0)
FHNO2 ; HISC/REL/NCA - Supplemental Feeding Labels ;8/26/94  12:01 
"RTN","FHNO2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO2",3,0)
D0 R !!,"Select by S=SUPPLEMENTAL FEEDING SITE or W=WARD: ",XX:DTIME G:'$T!("^"[XX) KIL I "sw"[XX S X=XX D TR^FH S XX=X
"RTN","FHNO2",4,0)
 I XX'?1U!("SW"'[XX) W *7," Enter S or W" G D0
"RTN","FHNO2",5,0)
 I XX="S" S D1=$O(^FH(119.74,0)) I D1'<1,$O(^FH(119.74,D1))<1 G D3
"RTN","FHNO2",6,0)
 I XX="W" S WRD=$O(^FH(119.6,0)) I WRD'<1,$O(^FH(119.6,WRD))<1 G D3
"RTN","FHNO2",7,0)
 I XX="S" G D2
"RTN","FHNO2",8,0)
D1 R !!,"Select WARD: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHNO2",9,0)
 K DIC S DIC="^FH(119.6,",DIC(0)="EMQ" D ^DIC G:Y<1 D1 S W1=+Y
"RTN","FHNO2",10,0)
 S D1=$P($G(^FH(119.6,W1,0)),"^",9) G D3
"RTN","FHNO2",11,0)
D2 R !!,"Select SUPPLEMENTAL FEEDING SITE: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHNO2",12,0)
 K DIC S DIC="^FH(119.74,",DIC(0)="EMQ" D ^DIC G:Y<1 D2 S D1=+Y,W1=0
"RTN","FHNO2",13,0)
D3 R !!,"Select Supplemental Feeding Time (10,2,8,ALL): ",TIM:DTIME G KIL:'$T!(U[TIM) I TIM="all" S X=TIM D TR^FH S TIM=X
"RTN","FHNO2",14,0)
 I TIM'=2,TIM'=8,TIM'=10,TIM'="ALL" W *7," Enter a time, 10,2,8, or ALL" G D3
"RTN","FHNO2",15,0)
 W ! K DIR,LABSTART S DIR(0)="NA^1:10",DIR("A")="If using laser label sheets, what row do you want to begin printing at? ",DIR("B")=1 D ^DIR
"RTN","FHNO2",16,0)
 Q:$D(DIRUT)  S LABSTART=Y
"RTN","FHNO2",17,0)
D4 R !!,"Do you want Ingredient list only? N// ",D3:DTIME G:'$T!(D3="^") KIL S:D3="" D3="N" S X=D3 D TR^FH S D3=X I $P("YES",D3,1)'="",$P("NO",D3,1)'="" W *7,"  Answer YES or NO" G D4
"RTN","FHNO2",18,0)
 S D3=$E(D3,1),D3=D3="Y" G:'D3 D6
"RTN","FHNO2",19,0)
D5 R !!,"Consolidated List only? Y// ",X:DTIME G:'$T!(X="^") KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G D5
"RTN","FHNO2",20,0)
 S X=$E(X,1) S:X="Y" D3=D3+1
"RTN","FHNO2",21,0)
D6 I 'D3,'D1,XX="W" W !!,"No Supplemental Feeding Site associated with this ward." G KIL
"RTN","FHNO2",22,0)
 W:'D3 !!,"Place Labels in Printer"
"RTN","FHNO2",23,0)
PR K IOP S %ZIS="MQ",%ZIS("A")="Select "_$S('D3:"LABEL",1:"LIST")_" Printer: " W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNO2",24,0)
 I $D(IO("Q")) S FHPGM="Q1^FHNO2",FHLST="XX^TIM^W1^D1^D3^LABSTART" D EN2^FH G KIL
"RTN","FHNO2",25,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHNO2",26,0)
Q1 ; Process Printing Supplemental Feeding Labels
"RTN","FHNO2",27,0)
 D NOW^%DTC S NOW=%,DT=%\1 G:D3=2 SUM
"RTN","FHNO2",28,0)
 I 'D3 Q:'D1  S FHPAR=$G(^FH(119.74,D1,0)),LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1
"RTN","FHNO2",29,0)
 S COUNT=0,LINE=1 I TIM="ALL" S TIM=10 D Q2 S TIM=2 D Q2 S TIM=8
"RTN","FHNO2",30,0)
 D Q2
"RTN","FHNO2",31,0)
 I $G(LAB)>2 D DPLL^FHLABEL,KIL Q
"RTN","FHNO2",32,0)
 I 'D3 F L=1:1:18 W !
"RTN","FHNO2",33,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHNO2",34,0)
Q2 K ^TMP($J,"L"),^TMP($J,"I"),^TMP($J,"SF"),C S P1=$S(TIM=10:5,TIM=2:13,1:21),T0=$P(DT,".",1)_"."_$S(TIM=10:1,TIM=2:14,1:2),P3=7,N1=0
"RTN","FHNO2",35,0)
 I XX="W" S P0=$P($G(^FH(119.6,W1,0)),"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0) D F0
"RTN","FHNO2",36,0)
 I XX="S" F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  S X=^(W1,0),D2=$P(X,"^",9) I D1=D2 S P0=$P(X,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0) D F0
"RTN","FHNO2",37,0)
 G ^FHNO21:'D3,PRT
"RTN","FHNO2",38,0)
F0 S WRDN=$P(^FH(119.6,W1,0),"^",1),FHDFN=0
"RTN","FHNO2",39,0)
F1 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN=""  S ADM=$G(^FHPT("AW",W1,FHDFN)) G:ADM<1 F1
"RTN","FHNO2",40,0)
 G:'$D(^FHPT(FHDFN,"A",ADM,0)) F1 S X1=^(0),NO=$P(X1,"^",7) G:'NO F1
"RTN","FHNO2",41,0)
 I 'D3 S IS=$P(X1,"^",10) I IS S IS=$P($G(^FH(119.4,IS,0)),"^",3) S:IS'="N" IS=""
"RTN","FHNO2",42,0)
 D CHK G:'NO F1
"RTN","FHNO2",43,0)
 S Y=$G(^FHPT(FHDFN,"A",ADM,"SF",NO,0))
"RTN","FHNO2",44,0)
 S Y=$P(Y,"^",P1,P1+7) G:Y?."^" F1 D:D3 CALC
"RTN","FHNO2",45,0)
 I 'D3 D
"RTN","FHNO2",46,0)
 .D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHNO2",47,0)
 .S $P(Y,"^",9)=IS
"RTN","FHNO2",48,0)
 .S LNOD=$S(XX="S":D2_"~"_$P($G(^FH(119.74,D2,0)),"^",1),1:P0_"~"_WRDN)
"RTN","FHNO2",49,0)
 .S RI=$G(^DPT(DFN,.108)) S RE=$S(RI:$O(^FH(119.6,"AR",+RI,W1,0)),1:"")
"RTN","FHNO2",50,0)
 .S R0=$S(RE:$P($G(^FH(119.6,W1,"R",+RE,0)),"^",2),1:"")
"RTN","FHNO2",51,0)
 .S R0=$S(R0<1:99,R0<10:"0"_R0,1:R0)
"RTN","FHNO2",52,0)
 .S RM=$G(^DPT(DFN,.101)),PNOD=P0_"~"_R0_RM_"~"_FHDFN,WRD=P0_$E(WRDN,1,27-$L(RM))_"/"_RM
"RTN","FHNO2",53,0)
 .S ^TMP($J,"L",LNOD,PNOD)=Y_"^"_WRD Q
"RTN","FHNO2",54,0)
 G F1
"RTN","FHNO2",55,0)
CHK S FHORD=$P(X1,"^",2),X1=$P(X1,"^",3) G:FHORD<1 C1
"RTN","FHNO2",56,0)
 I X1>1,X1'>T0 G C2
"RTN","FHNO2",57,0)
C0 I '$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) G C2
"RTN","FHNO2",58,0)
 S X1=$P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",7) I X1'="",X1'="X" S NO=""
"RTN","FHNO2",59,0)
C1 K FHORD,A1,K,X1 Q
"RTN","FHNO2",60,0)
C2 S A1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1!(K>T0)  S A1=K
"RTN","FHNO2",61,0)
 G:'A1 C1 S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2) G:FHORD'<1 C0 K ^FHPT(FHDFN,"A",ADM,"AC",A1) G C2
"RTN","FHNO2",62,0)
SUM K C,^TMP($J,"SF") S P0=$S(TIM=2:13,TIM=8:21,1:5),P3=$S(TIM="ALL":23,1:7),N1=0
"RTN","FHNO2",63,0)
 I XX="W" S X=$G(^FH(119.6,W1,0)) D S0
"RTN","FHNO2",64,0)
 I XX="S" F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  S X=^(W1,0),D2=$P(X,"^",9) I D1=D2 D S0
"RTN","FHNO2",65,0)
 G PRT
"RTN","FHNO2",66,0)
S0 S WRDN=$P(^FH(119.6,W1,0),"^",1),FHDFN=0
"RTN","FHNO2",67,0)
S1 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN=""  S ADM=$G(^FHPT("AW",W1,FHDFN)) G:ADM<1 S1
"RTN","FHNO2",68,0)
 G:'$D(^FHPT(FHDFN,"A",ADM,0)) S1 S X1=^(0),NO=$P(X1,"^",7) G:'NO S1
"RTN","FHNO2",69,0)
 S Y=$P(^FHPT(FHDFN,"A",ADM,"SF",NO,0),"^",P0,P0+P3) G:Y?."^" S1 D CALC
"RTN","FHNO2",70,0)
 G S1
"RTN","FHNO2",71,0)
PRT S DTP=DT D DTP^FH S DTE=DTP_" "_$S(TIM="ALL":"ALL",TIM=10:TIM_" AM",1:TIM_" PM")
"RTN","FHNO2",72,0)
 S Y=$S(XX="S":$P($G(^FH(119.74,D1,0)),"^",1),1:WRDN)
"RTN","FHNO2",73,0)
 W @IOF W:D3=2 !?5,"**** CONSOLIDATED ****" W !?3,"**** INGREDIENTS LIST ****",! W:D3=1 ! W ?(33-$L(Y)\2),Y,!?9,DTE,!!
"RTN","FHNO2",74,0)
 F L=0:0 S L=$O(^FH(118,L)) Q:L<1  S:$D(C(L)) ^TMP($J,"SF",$P($G(^FH(118,L,0)),"^",1),L)=""
"RTN","FHNO2",75,0)
 S A1="" F  S A1=$O(^TMP($J,"SF",A1)) Q:A1=""  F L=0:0 S L=$O(^TMP($J,"SF",A1,L)) Q:L<1  W !,$E(A1,1,26),?28,$J(C(L),5,0)
"RTN","FHNO2",76,0)
 W !!?4,"**** PATIENTS = ",N1," ****",! Q
"RTN","FHNO2",77,0)
CALC S N1=N1+1
"RTN","FHNO2",78,0)
 F L=1:2:P3 S Z=$P(Y,"^",L) I Z'="" S Q=$P(Y,"^",L+1) S:'Q Q=1 S:'$D(C(Z)) C(Z)=0 S C(Z)=C(Z)+Q
"RTN","FHNO2",79,0)
 Q
"RTN","FHNO21")
0^126^B14924290
"RTN","FHNO21",1,0)
FHNO21 ; HISC/REL/NCA - Print Feeding Labels ;8/26/94  12:01 
"RTN","FHNO21",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO21",3,0)
 S DTP=DT\1 D DTP^FH S DTE=DTP_" "_TIM_$S(TIM=10:"AM",1:"PM")
"RTN","FHNO21",4,0)
 S S1=$S(LAB=1:6,1:9),S2=LAB=2*5+33
"RTN","FHNO21",5,0)
 K N F L=0:0 S L=$O(^FH(118,L)) Q:L<1  S Y=^(L,0),N1=$P(Y,"^",1),^TMP($J,"I",$E(N1,1,26)_","_L)=L I '$D(^FH(118,L,"I")) S N(L)=$P(Y,"^",1,2)
"RTN","FHNO21",6,0)
 S LNOD="" F  S LNOD=$O(^TMP($J,"L",LNOD)) Q:LNOD=""  D P2
"RTN","FHNO21",7,0)
 Q
"RTN","FHNO21",8,0)
P2 S PNOD="",N1=0 K C F  S PNOD=$O(^TMP($J,"L",LNOD,PNOD)) Q:PNOD=""  S Y2=^(PNOD) D P3
"RTN","FHNO21",9,0)
 I LAB<3 D P5 Q
"RTN","FHNO21",10,0)
 Q
"RTN","FHNO21",11,0)
P3 S N1=N1+1
"RTN","FHNO21",12,0)
 S FHDFN=$P(PNOD,"~",3),WRD=$P(Y2,"^",10)
"RTN","FHNO21",13,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHNO21",14,0)
 S NAM=$P(^DPT(DFN,0),"^",1),IS=$P(Y2,"^",9) D PID^FHDPA
"RTN","FHNO21",15,0)
 I LAB>2 D LL Q
"RTN","FHNO21",16,0)
 I $P(FHPAR,"^",4)="Y" G P4
"RTN","FHNO21",17,0)
 W !,$E(NAM,1,S2-$L(WRD)),?(S2+2-$L(WRD)),$E(WRD,3,99),!?$S(LAB=1:3,1:0),BID W:IS'="" ?(S2-22),"*NURSE" W ?(S2-15),DTE S LN=2 I LAB=2 W !! S LN=4
"RTN","FHNO21",18,0)
 F L=1:2:7 S Z=$P(Y2,"^",L) I Z'="" D
"RTN","FHNO21",19,0)
 .S Q=$P(Y2,"^",L+1) S:'Q Q=1
"RTN","FHNO21",20,0)
 .W !,$J(Q,2)," "
"RTN","FHNO21",21,0)
 .W $S($D(N(Z)):$P(N(Z),"^",1),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:"")
"RTN","FHNO21",22,0)
 .S LN=LN+1 S:'$D(C(Z)) C(Z)=0 S C(Z)=C(Z)+Q
"RTN","FHNO21",23,0)
 .Q
"RTN","FHNO21",24,0)
 I LN<S1 F L=LN+1:1:S1 W !
"RTN","FHNO21",25,0)
 Q
"RTN","FHNO21",26,0)
P4 F L=1:2:7 S Z=$P(Y2,"^",L) I Z'="",$S($D(N(Z)):$P(N(Z),"^",2),$D(^FH(118,+Z,0)):$P(^(0),"^",2),1:"")'="N" D
"RTN","FHNO21",27,0)
 .S Q=$P(Y2,"^",L+1) S:'Q Q=1
"RTN","FHNO21",28,0)
 .W !,$E(NAM,1,S2-$L(WRD)),?(S2+2-$L(WRD)),$E(WRD,3,99),!,BID
"RTN","FHNO21",29,0)
 .W:IS'="" ?11,"*NURSE"
"RTN","FHNO21",30,0)
 .W ?(S2-15),DTE,!!,$J(Q,2)," "
"RTN","FHNO21",31,0)
 .W $S($D(N(Z)):$P(N(Z),"^",1),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:""),!!
"RTN","FHNO21",32,0)
 .W:LAB=2 !!!
"RTN","FHNO21",33,0)
 .S:'$D(C(Z)) C(Z)=0 S C(Z)=C(Z)+Q
"RTN","FHNO21",34,0)
 .Q
"RTN","FHNO21",35,0)
 Q
"RTN","FHNO21",36,0)
P5 S Y=$S(XX="S":$P($G(^FH(119.74,D1,0)),"^",1),1:$P($G(^FH(119.6,W1,0)),"^",1))
"RTN","FHNO21",37,0)
 W !?3,"**** INGREDIENTS LIST ****",!!?(33-$L(Y)\2),Y,!?9,DTE,!! S LN=6
"RTN","FHNO21",38,0)
 S A1="" F K=0:0 S A1=$O(^TMP($J,"I",A1)) Q:A1=""  S L=^(A1) I $D(C(L)),C(L) W !,$S($D(N(L)):$P(N(L),"^",1),$D(^FH(118,+L,0)):$P(^(0),"^",1),1:""),?28,$J(C(L),5,0) S LN=LN+1
"RTN","FHNO21",39,0)
P6 W !!?4,"**** PATIENTS = ",N1," ****",! S LN=LN+3
"RTN","FHNO21",40,0)
 S LN=LN#S1 I LN F L=LN+1:1:S1 W !
"RTN","FHNO21",41,0)
 Q
"RTN","FHNO21",42,0)
LL ;
"RTN","FHNO21",43,0)
 S FHCOL=$S(LAB=3:3,1:2)
"RTN","FHNO21",44,0)
 I LABSTART>1 F FHLABST=1:1:(LABSTART-1)*FHCOL D  S LABSTART=1
"RTN","FHNO21",45,0)
 .I LAB=3 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6)="" D LL3^FHLABEL
"RTN","FHNO21",46,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6,PCL7,PCL8)="" D LL4^FHLABEL
"RTN","FHNO21",47,0)
 .Q
"RTN","FHNO21",48,0)
 S FHTAB=$S(LAB=3:24,1:37)
"RTN","FHNO21",49,0)
 S WRD1=$E(WRD,3,99)
"RTN","FHNO21",50,0)
 S NAM=$E(NAM,1,FHTAB-$L(WRD1)),BIDIS=BID I IS="N" S BIDIS=BID_" *NURSE"
"RTN","FHNO21",51,0)
 S LNA=NAM_$J(WRD1,FHTAB+1-$L(NAM)),LNB=BIDIS_$J(DTE,FHTAB+1-$L(BIDIS))
"RTN","FHNO21",52,0)
 I $P(FHPAR,"^",4)="Y" D LL2 Q
"RTN","FHNO21",53,0)
 S NUM=0 F XSF=1:2:7 I $P(Y2,U,XSF)'="" S NUM=NUM+1
"RTN","FHNO21",54,0)
 S INDX=0 F XSF=1:2:7 D
"RTN","FHNO21",55,0)
 .S SFPTR=$P(Y2,U,XSF) I SFPTR="" Q
"RTN","FHNO21",56,0)
 .S QTY=$P(Y2,U,XSF+1),SFNM=$P($G(^FH(118,SFPTR,0)),U,1)
"RTN","FHNO21",57,0)
 .S INDX=INDX+1,ZF(INDX)=$J(QTY,2)_" "_SFNM
"RTN","FHNO21",58,0)
 .Q
"RTN","FHNO21",59,0)
 I LAB=3 D
"RTN","FHNO21",60,0)
 .I NUM=1 S (PCL1,PCL2,PCL6)="",PCL3=LNA,PCL4=LNB,PCL5=ZF(1)
"RTN","FHNO21",61,0)
 .I NUM=2 S (PCL1,PCL6)="",PCL2=LNA,PCL3=LNB,PCL4=ZF(1),PCL5=ZF(2)
"RTN","FHNO21",62,0)
 .I NUM=3 S PCL1="",PCL2=LNA,PCL3=LNB,PCL4=ZF(1),PCL5=ZF(2),PCL6=ZF(3)
"RTN","FHNO21",63,0)
 .I NUM=4 S PCL1=LNA,PCL2=LNB,PCL3=ZF(1),PCL4=ZF(2),PCL5=ZF(3),PCL6=ZF(4)
"RTN","FHNO21",64,0)
 .D LL3^FHLABEL
"RTN","FHNO21",65,0)
 I LAB=4 D
"RTN","FHNO21",66,0)
 .I NUM=1 S (PCL1,PCL2,PCL3,PCL7,PCL8)="",PCL4=LNA,PCL5=LNB,PCL6=ZF(1)
"RTN","FHNO21",67,0)
 .I NUM=2 S (PCL1,PCL2,PCL7,PCL8)="",PCL3=LNA,PCL4=LNB,PCL5=ZF(1),PCL6=ZF(2)
"RTN","FHNO21",68,0)
 .I NUM=3 S (PCL1,PCL2,PCL8)="",PCL3=LNA,PCL4=LNB,PCL5=ZF(1),PCL6=ZF(2),PCL7=ZF(3)
"RTN","FHNO21",69,0)
 .I NUM=4 S (PCL1,PCL8)="",PCL2=LNA,PCL3=LNB,PCL4=ZF(1),PCL5=ZF(2),PCL6=ZF(3),PCL7=ZF(4)
"RTN","FHNO21",70,0)
 .D LL4^FHLABEL
"RTN","FHNO21",71,0)
 Q
"RTN","FHNO21",72,0)
LL2 ;
"RTN","FHNO21",73,0)
 F XSF=1:2:7 D
"RTN","FHNO21",74,0)
 .S SFPTR=$P(Y2,U,XSF) I SFPTR="" Q
"RTN","FHNO21",75,0)
 .S QTY=$P(Y2,U,XSF+1),SFNM=$P($G(^FH(118,SFPTR,0)),U,1)
"RTN","FHNO21",76,0)
 .S LNC=$J(QTY,2)_" "_SFNM
"RTN","FHNO21",77,0)
 .I LAB=3 S (PCL1,PCL4,PCL6)="",PCL2=LNA,PCL3=LNB,PCL5=LNC D LL3^FHLABEL
"RTN","FHNO21",78,0)
 .I LAB=4 S (PCL1,PCL2,PCL5,PCL7,PCL8)="",PCL3=LNA,PCL4=LNB,PCL6=LNC D LL4^FHLABEL
"RTN","FHNO21",79,0)
 Q
"RTN","FHNO3")
0^127^B4355132
"RTN","FHNO3",1,0)
FHNO3 ; HISC/REL - Supplemental Feeding Lists ;5/14/93  13:36 
"RTN","FHNO3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO3",3,0)
 W @IOF,!!?24,"WARD SUPPLEMENTAL FEEDING LISTS",!!
"RTN","FHNO3",4,0)
D0 R !!,"Select by S=SUPPLEMENTAL FEEDING SITE or W=WARD: ",XX:DTIME G:'$T!("^"[XX) KIL I "sw"[XX S X=XX D TR^FH S XX=X
"RTN","FHNO3",5,0)
 I XX'?1U!("SW"'[XX) W *7," Enter S or W" G D0
"RTN","FHNO3",6,0)
 I XX="S" S WRDS=$O(^FH(119.74,0)) I WRDS'<1,$O(^FH(119.74,WRDS))<1 G AR
"RTN","FHNO3",7,0)
 I XX="W" S WRDS=$O(^FH(119.6,0)) I WRDS'<1,$O(^FH(119.6,WRDS))<1 S WRDS=0 G AR
"RTN","FHNO3",8,0)
 I XX="S" G D2
"RTN","FHNO3",9,0)
D1 R !!,"Select WARD (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S WRDS=0,XX="W"
"RTN","FHNO3",10,0)
 I X'="ALL" K DIC S DIC="^FH(119.6,",DIC(0)="EMQ" D ^DIC G:Y<1 D1 S WRDS=+Y
"RTN","FHNO3",11,0)
 G AR
"RTN","FHNO3",12,0)
D2 R !!,"Select SUPPLEMENTAL FEEDING SITE (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S WRDS=0,XX="S"
"RTN","FHNO3",13,0)
 I X'="ALL" K DIC S DIC="^FH(119.74,",DIC(0)="EMQ" D ^DIC G:Y<1 D2 S WRDS=+Y
"RTN","FHNO3",14,0)
AR R !!,"Print Patients: (A=Alphabetically  R=Room-Bed) R// ",PRN:DTIME G:'$T!(PRN["^") KIL S:PRN="" PRN="R" I "ar"[PRN S X=PRN D TR^FH S PRN=X
"RTN","FHNO3",15,0)
 I PRN'?1U!("AR"'[PRN) W *7," Enter A or R" G AR
"RTN","FHNO3",16,0)
L0 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNO3",17,0)
 I $D(IO("Q")) S FHPGM="^FHNO31",FHLST="WRDS^XX^PRN" D EN2^FH G KIL:'WRDS,D0
"RTN","FHNO3",18,0)
 U IO D ^FHNO31 D ^%ZISC K %ZIS,IOP G KIL:'WRDS,D0
"RTN","FHNO3",19,0)
KIL K ^TMP($J),^TMP("FH",$J) G KILL^XUSCLEAN
"RTN","FHNO31")
0^128^B12996063
"RTN","FHNO31",1,0)
FHNO31 ; HISC/REL - Supplemental Feeding Lists (cont) ;4/27/93  11:26 
"RTN","FHNO31",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO31",3,0)
 K C F L=0:0 S L=$O(^FH(118,L)) Q:L<1  I '$D(^FH(118,L,"I")) S C(L)=$P(^(0),"^",1)
"RTN","FHNO31",4,0)
 D NOW^%DTC S (NOW,DTP)=%,DT=%\1 D DTP^FH S X1=DT,X2=-14 D C^%DTC S OLD=+X
"RTN","FHNO31",5,0)
 K ^TMP("FH",$J) S PG=0
"RTN","FHNO31",6,0)
 F KK=0:0 S KK=$O(^FH(119.6,KK)) Q:KK<1  S X=^(KK,0) D F0
"RTN","FHNO31",7,0)
 S NXW="" F KK=0:0 S NXW=$O(^TMP("FH",$J,NXW)) Q:NXW=""  F WRD=0:0 S WRD=$O(^TMP("FH",$J,NXW,WRD)) Q:WRD<1  D F2
"RTN","FHNO31",8,0)
 Q
"RTN","FHNO31",9,0)
F0 I XX="S" S K1=$P(X,"^",9) I WRDS,K1'=WRDS Q
"RTN","FHNO31",10,0)
 I XX="W",WRDS,KK'=WRDS Q
"RTN","FHNO31",11,0)
 S K1=$S(XX="W":"",K1<1:99,K1<10:"0"_K1,1:K1),P0=$P(X,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHNO31",12,0)
 S WRDN=$P(^FH(119.6,KK,0),"^",1),^TMP("FH",$J,K1_P0_$E(WRDN,1,26),KK)="" Q
"RTN","FHNO31",13,0)
F2 S WRDN=$P(^FH(119.6,WRD,0),"^",1) I $O(^FHPT("AW",WRD,0))<1 Q
"RTN","FHNO31",14,0)
 K ^TMP($J) F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",WRD,FHDFN)) D RM
"RTN","FHNO31",15,0)
 Q:'$D(^TMP($J))  D HDR
"RTN","FHNO31",16,0)
 S (NR,RM)="",FHPAR=0 I XX="S",WRDS S FHPAR=$P($G(^FH(119.74,WRDS,0)),"^",5)="Y"
"RTN","FHNO31",17,0)
L2 S NR=$O(^TMP($J,"P",NR)) I NR="" W ! D:FHPAR ING Q
"RTN","FHNO31",18,0)
 S FHDFN=""
"RTN","FHNO31",19,0)
L3 S FHDFN=$O(^TMP($J,"P",NR,FHDFN)) G:FHDFN="" L2 S ADM=$G(^TMP($J,"P",NR,FHDFN)) G:ADM<1 L3 D PATNAME^FHOMUTL G:DFN="" L2 S Y(0)=^DPT(DFN,0) D PID^FHDPA
"RTN","FHNO31",20,0)
 S RM=$S(PRN="R":NR,$D(^DPT(DFN,.101)):^(.101),1:"")
"RTN","FHNO31",21,0)
 S (NO,Y)="" I $D(^FHPT(FHDFN,"A",ADM,0)) S NO=$P(^(0),"^",7),IS=$P(^(0),"^",10)
"RTN","FHNO31",22,0)
 G:'NO L3 S Y=^FHPT(FHDFN,"A",ADM,"SF",NO,0),NM=$P(Y,"^",4),LST=$P(Y,"^",30)\1
"RTN","FHNO31",23,0)
 I IS S IS=$P($G(^FH(119.4,IS,0)),"^",3) S:IS'="N" IS=""
"RTN","FHNO31",24,0)
 I NM S NM=$P(^FH(118.1,NM,0),"^",2) I NM="" S NM=$P(^(0),"^",1)
"RTN","FHNO31",25,0)
 D:$Y>(IOSL-8) HDR W !!,RM,?13,$E($P(Y(0),"^",1),1,24),?38,BID
"RTN","FHNO31",26,0)
 W ?47,$E(NM,1,10) W:IS'="" ?60,"*NURSE" W ?69,$E(LST,4,5),"-",$E(LST,6,7) W:LST<OLD "*"
"RTN","FHNO31",27,0)
 S L=4 F K1=1:1:3 S K=0,N(K1)="" F K2=1:1:4 S Z=$P(Y,U,L+1),Q=$P(Y,U,L+2),L=L+2 I Z'="" S:'Q Q=1 S:N(K1)'="" N(K1)=N(K1)_"; " S N(K1)=N(K1)_Q_" "_$S($D(C(Z)):C(Z),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:"") I FHPAR D L4
"RTN","FHNO31",28,0)
 F K1=1:1:3 I N(K1)'="" W !?8,$P("10AM; 2PM; 8PM",";",K1),?14,N(K1)
"RTN","FHNO31",29,0)
 G L3
"RTN","FHNO31",30,0)
L4 S:'$D(^TMP($J,"I",K1,Z)) ^TMP($J,"I",K1,Z)=0 S ^(Z)=^(Z)+Q Q
"RTN","FHNO31",31,0)
ING Q:'$D(^TMP($J,"I"))  S DTP=DT D DTP^FH W @IOF,!,WRDN," INGREDIENT LIST FOR ",DTP
"RTN","FHNO31",32,0)
 W !!,"--- 10 AM ---",?26,"--- 2 PM ---",?52,"--- 8 PM ---",! S (N(1),N(2),N(3))=.5
"RTN","FHNO31",33,0)
 F L=0:0 Q:(N(1)+N(2)+N(3))=0  W ! F K=1:1:3 S:N(K)>0 N(K)=$O(^TMP($J,"I",K,N(K))) I N(K)>0 S Z=N(K) W ?(K-1*26),$J(^(Z),4,0)," ",$S($D(C(Z)):C(Z),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:"")
"RTN","FHNO31",34,0)
 W ! Q
"RTN","FHNO31",35,0)
RM ;
"RTN","FHNO31",36,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHNO31",37,0)
 Q:'$D(^DPT(DFN,0))  Q:ADM<1
"RTN","FHNO31",38,0)
 Q:'$D(^FHPT(FHDFN,"A",ADM,0))  S X1=^(0),NO=$P(X1,"^",7) Q:'NO
"RTN","FHNO31",39,0)
 D CHK Q:'NO
"RTN","FHNO31",40,0)
 I PRN="R" S RM=$G(^DPT(DFN,.101))
"RTN","FHNO31",41,0)
 E  S RM=$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHNO31",42,0)
 S:RM="" RM=" " S ^TMP($J,"P",RM,FHDFN)=ADM Q
"RTN","FHNO31",43,0)
CHK S FHORD=$P(X1,"^",2),X1=$P(X1,"^",3) G:FHORD<1 C1
"RTN","FHNO31",44,0)
 I X1>1,X1'>NOW G C2
"RTN","FHNO31",45,0)
C0 I '$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) G C2
"RTN","FHNO31",46,0)
 S X1=$P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",7) I X1'="",X1'="X" S NO=""
"RTN","FHNO31",47,0)
C1 K FHORD,A1,K,X1 Q
"RTN","FHNO31",48,0)
C2 S A1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1!(K>NOW)  S A1=K
"RTN","FHNO31",49,0)
 G:'A1 C1 S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2) G:FHORD'<1 C0 K ^FHPT(FHDFN,"A",ADM,"AC",A1) G C2
"RTN","FHNO31",50,0)
HDR ; Print Header
"RTN","FHNO31",51,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHNO31",52,0)
 W !?10,"W A R D   S U P P L E M E N T A L   F E E D I N G   L I S T",?72,"Page ",PG
"RTN","FHNO31",53,0)
 W !!,"Ward: ",WRDN,?61,DTP
"RTN","FHNO31",54,0)
 W !!,"ROOM",?13,"PATIENT",?39,"ID#     SUPP MENU",?60,"ISOLAT",?69,"REVIEW" Q
"RTN","FHNO4")
0^129^B1337662
"RTN","FHNO4",1,0)
FHNO4 ; HISC/REL - Bulk Nourishments ;4/25/93  19:01
"RTN","FHNO4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO4",3,0)
EN1 ; Enter/Edit Bulk Nourishments
"RTN","FHNO4",4,0)
 D WRD G:'WRD KIL S DA=WRD,DR="20" D ^DIE G EN1
"RTN","FHNO4",5,0)
EN2 ; List Bulk Nourishments
"RTN","FHNO4",6,0)
 D WRD G:'WRD KIL S CT=0 W !
"RTN","FHNO4",7,0)
 F K=0:0 S K=$O(^FH(119.6,WRD,"BN",K)) Q:K<1  S X=^(K,0),X1=$P(X,"^",1),X2=$P(X,"^",2) I X1,$D(^FH(118,X1,0)) W !,$J(X2,6),"  ",$P(^(0),"^",1) S CT=CT+1
"RTN","FHNO4",8,0)
 I 'CT W !,"No Bulk Nourishment Order entered for this Ward."
"RTN","FHNO4",9,0)
 G EN2
"RTN","FHNO4",10,0)
WRD K DIC S (DIC,DIE)="^FH(119.6,",DIC(0)="AEQM",WRD=0
"RTN","FHNO4",11,0)
 S DIC("DR")=".01" W ! D ^DIC Q:U[X!$D(DTOUT)  G:Y<1 WRD S WRD=+Y Q
"RTN","FHNO4",12,0)
KIL G KILL^XUSCLEAN
"RTN","FHNO41")
0^130^B15794344
"RTN","FHNO41",1,0)
FHNO41 ; HISC/REL/RVD - List Bulk Nourishments ;7/14/93  10:13
"RTN","FHNO41",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO41",3,0)
 ;RVD - Outpatient meals
"RTN","FHNO41",4,0)
 S D1=$O(^FH(119.74,0)) I D1'<1,$O(^FH(119.74,D1))<1 G N3
"RTN","FHNO41",5,0)
N2 R !!,"Select SUPPLEMENTAL FEEDING SITE (or ALL): ",X:DTIME G:'$T!("^"[X) KIL I X="ALL" S D1=0 G N3
"RTN","FHNO41",6,0)
 K DIC S DIC="^FH(119.74,",DIC(0)="EMQ" D ^DIC G:Y<1 N2 S D1=+Y
"RTN","FHNO41",7,0)
N3 R !!,"Do you want Labels? N// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Enter YES or NO" G N3
"RTN","FHNO41",8,0)
 S X=$E(X,1),LAB=X="Y"
"RTN","FHNO41",9,0)
 S FHLBFLG=1 I LAB D  I FHLBFLG=0 Q
"RTN","FHNO41",10,0)
 .W ! K DIR,LABSTART S DIR(0)="NA^1:10",DIR("A")="If using laser label sheets, what row do you want to begin printing at? ",DIR("B")=1 D ^DIR
"RTN","FHNO41",11,0)
 .I $D(DIRUT) S FHLBFLG=0 Q
"RTN","FHNO41",12,0)
 .S LABSTART=Y Q
"RTN","FHNO41",13,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select "_$S(LAB:"LABEL",1:"LIST")_" Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNO41",14,0)
 I $D(IO("Q")) S FHPGM="Q1^FHNO41",FHLST="D1^LAB^LABSTART" D EN2^FH G KIL
"RTN","FHNO41",15,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHNO41",16,0)
Q1 ; Process Printing Bulk Nourishments
"RTN","FHNO41",17,0)
 K ^TMP($J) D NOW^%DTC S DTP=% D DTP^FH
"RTN","FHNO41",18,0)
 I LAB S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1
"RTN","FHNO41",19,0)
 F K=0:0 S K=$O(^FH(119.6,K)) Q:K<1  S X=^(K,0),D2=$P(X,"^",9) I 'D1!(D1=D2),$O(^FH(119.6,K,"BN",0))>0 S P0=$P(X,"^",4) S:P0<1 P0=99 S ^TMP($J,P0,K)=""
"RTN","FHNO41",20,0)
 G:LAB L0
"RTN","FHNO41",21,0)
 S D3=$S('D1:"ALL SITES",1:$P(^FH(119.74,D1,0),"^",1)),PG=0 D HDR
"RTN","FHNO41",22,0)
 K D S C1=0 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  F K=0:0 S K=$O(^TMP($J,P0,K)) Q:K<1  D Q4
"RTN","FHNO41",23,0)
 D:$Y>(IOSL-8) HDR W !!?(45-$L(D3)\2),"***** ",D3," TOTAL *****"
"RTN","FHNO41",24,0)
 W !!,"   Qty  Item",?33,"Cost   Vehicle   Other   Total",!
"RTN","FHNO41",25,0)
 S (C(0),C(1))=0 F K=0:0 S K=$O(D(K)) Q:K<1  D:$Y>(IOSL-8) HDR S Y=^FH(118,K,0) D C3 S CT=$P(Y,"^",4)="Y",C(CT)=D(K)*C3+C(CT) W !,$J(D(K),6),"  ",$P(Y,"^",1),?31,$J(C3,6,2) W ?($S(CT:40,1:49)),$J(D(K)*C3,6,2),?57,$J(D(K)*C3,6,2)
"RTN","FHNO41",26,0)
 W !!?8,"Total",?39,$J(C(1),7,2),?48,$J(C(0),7,2),?56,$J(C(0)+C(1),7,2)
"RTN","FHNO41",27,0)
Q3 W ! Q
"RTN","FHNO41",28,0)
Q4 D:$Y>(IOSL-8) HDR W !!,"--- ",$P(^FH(119.6,K,0),"^",1)," ---",! S C1=C1+1
"RTN","FHNO41",29,0)
 F L=0:0 S L=$O(^FH(119.6,K,"BN",L)) Q:L<1  S X=^(L,0),X1=$P(X,"^",1),X2=$P(X,"^",2) I X1,$D(^FH(118,X1,0)) D:$Y>(IOSL-8) HDR W !,$J(X2,6),"  ",$P(^(0),"^",1) S:'$D(D(X1)) D(X1)=0 S D(X1)=D(X1)+X2
"RTN","FHNO41",30,0)
 Q
"RTN","FHNO41",31,0)
HDR ; Print Header
"RTN","FHNO41",32,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHNO41",33,0)
 S X="BULK NOURISHMENTS FOR: "_D3 W !?(80-$L(X)\2),X,?73,"Page ",PG,!!?32,DTP,! Q
"RTN","FHNO41",34,0)
L0 S S2=LAB=2*5+32,S1=$S(LAB=2:9,1:6),COUNT=0,LINE=1
"RTN","FHNO41",35,0)
 K D S C1=0
"RTN","FHNO41",36,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  F K=0:0 S K=$O(^TMP($J,P0,K)) Q:K<1  S WRD=$P(^FH(119.6,K,0),"^",1) F L=0:0 S L=$O(^FH(119.6,K,"BN",L)) Q:L<1  D L3
"RTN","FHNO41",37,0)
 I LAB>2 D DPLL^FHLABEL Q
"RTN","FHNO41",38,0)
 Q:'C1  S LN=6,X="BULK NOURISHMENTS PICK LIST" W !!?(S2-$L(X)\2),X
"RTN","FHNO41",39,0)
 S D3=$S('D1:"ALL SITES",1:$P(^FH(119.74,D1,0),"^",1)) W !!?(S2-$L(D3)\2),D3,!!
"RTN","FHNO41",40,0)
 F K=0:0 S K=$O(D(K)) Q:K<1  W !,$J(D(K),4),"  ",$P(^FH(118,K,0),"^",1) S LN=LN+1
"RTN","FHNO41",41,0)
 S LN=LN#S1 I LN F K=LN+1:1:S1 W !
"RTN","FHNO41",42,0)
 Q
"RTN","FHNO41",43,0)
L3 S X=^FH(119.6,K,"BN",L,0),X1=$P(X,"^",1),X2=$P(X,"^",2) Q:'X1!('$D(^FH(118,X1,0)))
"RTN","FHNO41",44,0)
 S:'$D(D(X1)) D(X1)=0 S D(X1)=D(X1)+X2,C1=C1+1
"RTN","FHNO41",45,0)
 S X1=^FH(118,X1,0),CHK=$P(X1,"^",2) Q:CHK="N"  S X1=$P(X1,"^",1)
"RTN","FHNO41",46,0)
 I LAB>2 D LL Q
"RTN","FHNO41",47,0)
 F C1=1:1:X2 W !!?(S2-$L(X1)\2),X1,!!,WRD,?(S2-$L(DTP)),DTP,!! W:LAB=2 !!!
"RTN","FHNO41",48,0)
 Q
"RTN","FHNO41",49,0)
C3 S C3=$P($G(^FH(114,+$P(Y,"^",7),0)),"^",13) Q
"RTN","FHNO41",50,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHNO41",51,0)
 Q
"RTN","FHNO41",52,0)
LL ;
"RTN","FHNO41",53,0)
 S FHCOL=$S(LAB=3:3,1:2)
"RTN","FHNO41",54,0)
 I LABSTART>1 F FHLABST=1:1:(LABSTART-1)*FHCOL D  S LABSTART=1
"RTN","FHNO41",55,0)
 .I LAB=3 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6)="" D LL3^FHLABEL
"RTN","FHNO41",56,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6,PCL7,PCL8)="" D LL4^FHLABEL
"RTN","FHNO41",57,0)
 .Q
"RTN","FHNO41",58,0)
 F C1=1:1:X2 D
"RTN","FHNO41",59,0)
 .S FHTAB=$S(LAB=3:24,1:37),SPC=$J(" ",70)
"RTN","FHNO41",60,0)
 .S LNA=$E(SPC,1,FHTAB-$L(X1)/2)_X1,LNB=WRD_$J(DTP,FHTAB+1-$L(WRD))
"RTN","FHNO41",61,0)
 .I LAB=3 S (PCL1,PCL2,PCL4,PCL6)="",PCL3=LNA,PCL5=LNB
"RTN","FHNO41",62,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL5,PCL7,PCL8)="",PCL4=LNA,PCL6=LNB
"RTN","FHNO41",63,0)
 .D:LAB=3 LL3^FHLABEL D:LAB=4 LL4^FHLABEL
"RTN","FHNO41",64,0)
 Q
"RTN","FHNO5")
0^131^B9563413
"RTN","FHNO5",1,0)
FHNO5 ; HISC/REL - Enter/Edit Supplemental Fdgs. ;7/27/94  14:45 
"RTN","FHNO5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO5",3,0)
 D NOW^%DTC S NOW=%
"RTN","FHNO5",4,0)
 S ALL=0 D ^FHDPA G:'DFN KIL W ! D LIS^FHNO7 S PNO=Y
"RTN","FHNO5",5,0)
S0 K DIC S DIC="^FH(118.1,",DIC(0)="EQM",OLD=$S('NM:"",1:$P(^FH(118.1,NM,0),"^",1))
"RTN","FHNO5",6,0)
 W !!,"Supplemental Feeding Menu: " W:NM OLD," // " R X:DTIME G KIL:'$T,FHNO5:X["^"
"RTN","FHNO5",7,0)
 I X="" G FHNO5:'NM,S1
"RTN","FHNO5",8,0)
 I X="@" D CAN W "  .. cancelled" G FHNO5
"RTN","FHNO5",9,0)
 D ^DIC K DIC G S0:Y<1 S NM=+Y
"RTN","FHNO5",10,0)
S1 S KK=1,PNN="^"_NOW_"^"_DUZ_"^"_NM_"^"_$S(NM=1:$P(PNO,"^",5,29),1:^FH(118.1,NM,1))
"RTN","FHNO5",11,0)
 I NM'=1 G UPD:$P(PNO,"^",4,29)=$P(PNN,"^",4,29) D CAN G ADD
"RTN","FHNO5",12,0)
 S DIC="^FH(118,",DIC(0)="EQM",DIC("S")="I $P(^(0),U,3)'=""Y"""
"RTN","FHNO5",13,0)
G1 G:KK>12 G5 S T1=$P("10am^2pm^8pm","^",KK-1\4+1),T2="#"_(KK-1#4+1),P1=KK*2+3
"RTN","FHNO5",14,0)
 S DIC("A")=T1_" Feeding "_T2_": "
"RTN","FHNO5",15,0)
 S OLD=$P(PNN,"^",P1) I OLD S DIC("A")=DIC("A")_$P(^FH(118,+OLD,0),"^",1)_"// "
"RTN","FHNO5",16,0)
G2 W !!,DIC("A") R X:DTIME G:'$T!(X["^") G5
"RTN","FHNO5",17,0)
 I X="" G:OLD G3 S KK=$S(KK<5:5,KK<9:9,1:13) G G1
"RTN","FHNO5",18,0)
 I OLD,X="@" S $P(PNN,"^",P1)="",$P(PNN,"^",P1+1)="" S KK=KK+1 G G1
"RTN","FHNO5",19,0)
 D ^DIC G:Y<1 G2 S Y=+Y,K1=$S(KK<5:1,KK<9:5,1:9)
"RTN","FHNO5",20,0)
 F L=K1:1:K1+3 I L'=KK,$P(PNN,"^",L*2+3)=Y W *7," .. DUPLICATE OF EXISTING ITEM!" G G2
"RTN","FHNO5",21,0)
 S:OLD'=Y $P(PNN,"^",P1)=Y
"RTN","FHNO5",22,0)
G3 S OLD=$P(PNN,"^",P1+1)
"RTN","FHNO5",23,0)
G4 W !,T1," ",T2," Qty: ",$S(OLD="":1,1:OLD),"// " R X:DTIME G:'$T!(X["^") G5
"RTN","FHNO5",24,0)
 S:X="@" X=0 I X="" S:OLD="" $P(PNN,"^",P1+1)=1 S KK=KK+1 G G1
"RTN","FHNO5",25,0)
 I X'?1N.N!(X>20) W *7," ??" S X="?"
"RTN","FHNO5",26,0)
 I X["?" W !?5,"Enter a whole number between 1 and 20" G G4
"RTN","FHNO5",27,0)
 I 'X S $P(PNN,"^",P1)="",$P(PNN,"^",P1+1)="" S KK=KK+1 G G1
"RTN","FHNO5",28,0)
 S $P(PNN,"^",P1+1)=X,KK=KK+1 G G1
"RTN","FHNO5",29,0)
G5 S KK=3,X="" F T1=0:1:2 S P1=T1*8-1 F T2=1:1:4 S KK=KK+2 I $P(PNN,"^",KK) S P1=P1+2,$P(X,"^",P1,P1+1)=$P(PNN,"^",KK,KK+1)
"RTN","FHNO5",30,0)
 I X="" D CAN G FHNO5
"RTN","FHNO5",31,0)
G6 S P1=$P(PNN,"^",29) S:P1="" P1="D" W !!,"Dietary or Therapeutic? ",P1,"// " R Y:DTIME S:'$T!("^"[Y) Y=P1
"RTN","FHNO5",32,0)
 S:$P("dietary",Y,1)="" Y="D" S:$P("therapeutic",Y,1)="" Y="T"
"RTN","FHNO5",33,0)
 I $P("DIETARY",Y,1)'="",$P("THERAPEUTIC",Y,1)'="" W *7,!?5," Answer D for Dietary use or T for Therapeutic use" G G6
"RTN","FHNO5",34,0)
 S $P(X,"^",25)=$E(Y,1),PNN=$P(PNN,"^",1,4)_"^"_X
"RTN","FHNO5",35,0)
 G:$P(PNO,"^",5,29)=X UPD D CAN
"RTN","FHNO5",36,0)
ADD ; Add Supplemental Feeding
"RTN","FHNO5",37,0)
 L +^FHPT(FHDFN,"A",ADM,"SF",0)
"RTN","FHNO5",38,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"SF",0)) S ^FHPT(FHDFN,"A",ADM,"SF",0)="^115.07^^"
"RTN","FHNO5",39,0)
 S X=^FHPT(FHDFN,"A",ADM,"SF",0),NO=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_NO_"^"_($P(X,"^",4)+1)
"RTN","FHNO5",40,0)
 L -^FHPT(FHDFN,"A",ADM,"SF",0) I $D(^FHPT(FHDFN,"A",ADM,"SF",NO)) G ADD
"RTN","FHNO5",41,0)
 S ^FHPT(FHDFN,"A",ADM,"SF",NO,0)=NO_"^"_$P(PNN,"^",2,99)
"RTN","FHNO5",42,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",7)=NO
"RTN","FHNO5",43,0)
 I NO'="" S EVT="F^O^"_NO D ^FHORX  ;file event, P30
"RTN","FHNO5",44,0)
UPD S:NO $P(^FHPT(FHDFN,"A",ADM,"SF",NO,0),"^",30,31)=NOW_"^"_DUZ G FHNO5
"RTN","FHNO5",45,0)
CAN ; Cancel SF Order
"RTN","FHNO5",46,0)
 S NO=$P(^FHPT(FHDFN,"A",ADM,0),"^",7),$P(^(0),"^",7)=""
"RTN","FHNO5",47,0)
 S:NO $P(^FHPT(FHDFN,"A",ADM,"SF",NO,0),"^",32,33)=NOW_"^"_DUZ
"RTN","FHNO5",48,0)
 I NO'="" S EVT="F^C^"_NO D ^FHORX  ;file event, P30
"RTN","FHNO5",49,0)
 Q
"RTN","FHNO5",50,0)
KIL G KILL^XUSCLEAN
"RTN","FHNO6")
0^132^B15764090
"RTN","FHNO6",1,0)
FHNO6 ; HISC/REL/NCA - Supplemental Feeding Costs ;2/13/95  13:32 
"RTN","FHNO6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO6",3,0)
 W @IOF,!!?27,"SUPPLEMENTAL FEEDING COSTS",!!
"RTN","FHNO6",4,0)
D0 R !!,"Select by S=SUPPLEMENTAL FEEDING SITE or W=WARD: ",XX:DTIME G:'$T!("^"[XX) KIL
"RTN","FHNO6",5,0)
 I XX'?1U!("SW"'[XX) W *7," Enter S or W" G D0
"RTN","FHNO6",6,0)
 I XX="S" S WRD=$O(^FH(119.74,0)) I WRD'<1,$O(^FH(119.74,WRD))<1 G S0
"RTN","FHNO6",7,0)
 I XX="W" S WRD=$O(^FH(119.6,0)) I WRD'<1,$O(^FH(119.6,WRD))<1 G S0
"RTN","FHNO6",8,0)
 I XX="S" G D2
"RTN","FHNO6",9,0)
F1 R !!,"Select WARD (or ALL): ",X:DTIME G:'$T!("^"[X) KIL I X="ALL" S WRD=0
"RTN","FHNO6",10,0)
 E  K DIC S DIC="^FH(119.6,",DIC(0)="EQM" D ^DIC G:Y<1 F1 S WRD=+Y
"RTN","FHNO6",11,0)
 G S0
"RTN","FHNO6",12,0)
D2 R !!,"Select SUPPLEMENTAL FEEDING SITE (or ALL): ",X:DTIME G:'$T!("^"[X) KIL I X="ALL" S WRD=0
"RTN","FHNO6",13,0)
 I X'="ALL" K DIC S DIC="^FH(119.74,",DIC(0)="EMQ" D ^DIC G:Y<1 D2 S WRD=+Y
"RTN","FHNO6",14,0)
S0 S X="N" I 'WRD R !!,"SUMMARY only? Y// ",X:DTIME G:'$T!(X="^") KIL S:X="" X="Y" I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G S0
"RTN","FHNO6",15,0)
 S SUM=X?1"Y".E
"RTN","FHNO6",16,0)
L0 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNO6",17,0)
 I $D(IO("Q")) S FHPGM="Q1^FHNO6",FHLST="XX^WRD^SUM" D EN2^FH G KIL
"RTN","FHNO6",18,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHNO6",19,0)
Q1 ; Print Supplemental Feeding Cost Report
"RTN","FHNO6",20,0)
 D NOW^%DTC S DTP=% D DTP^FH S PTIM=DTP,PG=0 K ^TMP($J)
"RTN","FHNO6",21,0)
 F KK=0:0 S KK=$O(^FH(119.6,KK)) Q:KK<1  S X0=$G(^(KK,0)) D
"RTN","FHNO6",22,0)
 .I XX="W",WRD,WRD'=KK Q
"RTN","FHNO6",23,0)
 .I XX="S",WRD,$P(X0,"^",9)'=WRD Q
"RTN","FHNO6",24,0)
 .S P0=$P(X0,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0),TNOD=$S(SUM:"0",XX="S":"99~"_$P($G(^FH(119.74,+$P(X0,"^",9),0)),"^",1),1:P0_"~"_$P(X0,"^",1))
"RTN","FHNO6",25,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",KK,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",KK,FHDFN)) I ADM>0 D
"RTN","FHNO6",26,0)
 ..S $P(^TMP($J,"T",TNOD,0),"^",1)=$P($G(^TMP($J,"T",TNOD,0)),"^",1)+1
"RTN","FHNO6",27,0)
 ..S (NO,Y)="" I $D(^FHPT(FHDFN,"A",ADM,0)) S NO=$P(^(0),"^",7)
"RTN","FHNO6",28,0)
 ..Q:'NO  S Y=$G(^FHPT(FHDFN,"A",ADM,"SF",NO,0))
"RTN","FHNO6",29,0)
 ..S PD=$P(Y,"^",29) S:PD="" PD="D"
"RTN","FHNO6",30,0)
 ..S $P(^TMP($J,"T",TNOD,0),"^",PD'="D"+2)=$P(^TMP($J,"T",TNOD,0),"^",PD'="D"+2)+1
"RTN","FHNO6",31,0)
 ..F L=5:2:28 S Z=$P(Y,"^",L),Q=$P(Y,"^",L+1) I Z'="" S:'Q Q=1 S:'$D(^TMP($J,"T",TNOD,Z,PD)) ^TMP($J,"T",TNOD,Z,PD)=0 S ^(PD)=^(PD)+Q
"RTN","FHNO6",32,0)
 ..Q
"RTN","FHNO6",33,0)
 .Q
"RTN","FHNO6",34,0)
 S NAM="" F  S NAM=$O(^FH(118,"B",NAM)) Q:NAM=""  F Z=0:0 S Z=$O(^FH(118,"B",NAM,Z)) Q:Z<1  I $O(^(Z,0))="" S REC=$P($G(^FH(118,Z,0)),"^",7),CU=$P($G(^FH(114,+REC,0)),"^",13),^TMP($J,"P",NAM_"~"_Z)=CU
"RTN","FHNO6",35,0)
 S TNOD="" F  S TNOD=$O(^TMP($J,"T",TNOD)) Q:TNOD=""  D
"RTN","FHNO6",36,0)
 .Q:$O(^TMP($J,"T",TNOD,0))=""  D HDR S (T1,T2)=0
"RTN","FHNO6",37,0)
 .S NAM="" F  S NAM=$O(^TMP($J,"P",NAM)) Q:NAM=""  S CU=^(NAM) D
"RTN","FHNO6",38,0)
 ..S Z=$P(NAM,"~",2) I '$D(^TMP($J,"T",TNOD,Z)) Q
"RTN","FHNO6",39,0)
 ..S A1=$G(^TMP($J,"T",TNOD,Z,"D")),A2=$G(^("T")),T1=A1*CU+T1,T2=A2*CU+T2 D:$Y>(IOSL-8) HDR
"RTN","FHNO6",40,0)
 ..W !,$E($P(NAM,"~",1),1,24),?25,$J(CU,7,3),$J(A1,7),$J(A1*CU,8,2),$J(A2,8),$J(A2*CU,8,2),$J(A1+A2,8),$J(A1+A2*CU,8,2) Q
"RTN","FHNO6",41,0)
 .D:$Y>(IOSL-13) HDR W !!,"Total",?39,$J(T1,8,2),$J(T2,16,2),$J(T1+T2,16,2)
"RTN","FHNO6",42,0)
 .S CTR=$G(^TMP($J,"T",TNOD,0)),WP=$P(CTR,"^",1),WPD=$P(CTR,"^",2),WPT=$P(CTR,"^",3)
"RTN","FHNO6",43,0)
 .W !!,"Cost/Patient:",?32,$J(WP,7),?39,$J(T1/WP,8,2),?47,$J(WP,8),?55,$J(T2/WP,8,2),?63,$J(WP,8),?71,$J(T1+T2/WP,8,2)
"RTN","FHNO6",44,0)
 .W !,"Cost/Recipient:" W:WPD ?32,$J(WPD,7),?39,$J(T1/WPD,8,2) W:WPT ?47,$J(WPT,8),?55,$J(T2/WPT,8,2) W:(WPD+WPT) ?63,$J(WPD+WPT,8),?71,$J(T1+T2/(WPD+WPT),8,2)
"RTN","FHNO6",45,0)
 .W !!,"Recipient %:" W:WPD ?39,$J(WPD/WP*100,8,0) W:WPT ?55,$J(WPT/WP*100,8,0) W:(WPD+WPT) ?71,$J(WPD+WPT/WP*100,8,0) W ! Q
"RTN","FHNO6",46,0)
 Q
"RTN","FHNO6",47,0)
HDR ; Print Header
"RTN","FHNO6",48,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHNO6",49,0)
 W !,PTIM,!!?11,"S U P P L E M E N T A L   F E E D I N G   C O S T S",?73,"Page ",PG
"RTN","FHNO6",50,0)
 S Y=$S(SUM:"CONSOLIDATED",1:$P(TNOD,"~",2)) W !!?(80-$L(Y)\2),Y
"RTN","FHNO6",51,0)
 W !!?38,"DIETARY",?52,"THERAPEUTIC",?71,"TOTAL",!,"Supplemental Feeding",?28,"Cost    Qty   Total     Qty   Total     Qty   Total",! Q
"RTN","FHNO6",52,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHNO7")
0^133^B2949434
"RTN","FHNO7",1,0)
FHNO7 ; HISC/REL - List Supplemental Fdgs. ;12/15/94  09:14 
"RTN","FHNO7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO7",3,0)
LIS ; Display Feeding
"RTN","FHNO7",4,0)
 S NAM=$P(^DPT(DFN,0),"^",1) D CUR^FHORD7
"RTN","FHNO7",5,0)
 W:$E(IOST,1,2)="C-" @IOF W !!,NAM,"  " W:WARD'="" "( ",WARD," )"
"RTN","FHNO7",6,0)
 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHNO7",7,0)
 S NO=$P(^FHPT(FHDFN,"A",ADM,0),"^",7),Y=$S('NO:"",1:$G(^FHPT(FHDFN,"A",ADM,"SF",NO,0)))
"RTN","FHNO7",8,0)
L1 ; Display SF Order
"RTN","FHNO7",9,0)
 S NM=$P(Y,"^",4) W !!,"Feeding Menu: ",$S('NM:"None",1:$P(^FH(118.1,NM,0),"^",1)) Q:'NO  S DTP=$P(Y,"^",30) D DTP^FH W ?50,"Reviewed: ",DTP
"RTN","FHNO7",10,0)
 W !!,"10AM",?26,"2PM",?52,"8PM",!,"-----------------------   -----------------------   -----------------------"
"RTN","FHNO7",11,0)
 K N F K1=1:1:3 F K2=1:1:4 S N(K1,K2)=""
"RTN","FHNO7",12,0)
 S L=4 F K1=1:1:3 S K=0 F K2=1:1:4 S Z=$P(Y,"^",L+1),Q=$P(Y,"^",L+2),L=L+2 I Z'="" S:'Q Q=1 S K=K+1,N(K1,K)=$J(Q,2)_" "_$P($G(^FH(118,Z,0)),"^",1)
"RTN","FHNO7",13,0)
 F K2=1:1:4 W !,N(1,K2),?26,N(2,K2),?52,N(3,K2)
"RTN","FHNO7",14,0)
 W:$P(Y,"^",34)'="" !!,"Diet Pattern Associated: ",$S($P(Y,"^",34)="Y":"YES",1:"NO")
"RTN","FHNO7",15,0)
 Q
"RTN","FHNO7",16,0)
EN2 ; Supplemental Feeding Inquiry
"RTN","FHNO7",17,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL D LIS G EN2
"RTN","FHNO7",18,0)
KIL G KILL^XUSCLEAN
"RTN","FHNO8")
0^134^B3646920
"RTN","FHNO8",1,0)
FHNO8 ; HISC/REL - History of Supp. Fdgs. ;5/17/93  14:24 
"RTN","FHNO8",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNO8",3,0)
 S ALL=1 D ^FHDPA G:'DFN KIL G:'FHDFN KIL
"RTN","FHNO8",4,0)
 I $O(^FHPT(FHDFN,"A",0))<1 W !!,"NO ADMISSIONS ON FILE!" G FHNO8
"RTN","FHNO8",5,0)
 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="Q",DA=FHDFN,X="??" D ^DIC
"RTN","FHNO8",6,0)
A0 W !!,"Select ADMISSION",$S($D(^DPT(DFN,.1)):" (or C for CURRENT)",1:""),": " R X:DTIME G:'$T!("^"[X) KIL D:X="c" TR^FH
"RTN","FHNO8",7,0)
 I X="C" D ADM G P0:ADM'<1,FHNO8
"RTN","FHNO8",8,0)
 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="EQM" D ^DIC G:Y<1 A0 S ADM=+Y
"RTN","FHNO8",9,0)
P0 S (N1,LST)=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"SF",K)) Q:K<1  S X=^(K,0),LST=K D LIS
"RTN","FHNO8",10,0)
 I 'N1 W !!,"No Supplemental Feedings for this Admission!" G FHNO8
"RTN","FHNO8",11,0)
P1 R !!,"Detailed Display of which Order #? ",X:DTIME G:'$T!("^"[X) FHNO8 I X'?1N.N!(X<1)!(X>LST) W *7," Enter # of Order to List" G P1
"RTN","FHNO8",12,0)
 S NO=+X,Y=$G(^FHPT(FHDFN,"A",ADM,"SF",NO,0)) D L1^FHNO7
"RTN","FHNO8",13,0)
 G FHNO8
"RTN","FHNO8",14,0)
ADM S WARD=$G(^DPT(DFN,.1))
"RTN","FHNO8",15,0)
 I WARD="" W *7,!!,"NOT CURRENTLY AN INPATIENT!",! S ADM="" Q
"RTN","FHNO8",16,0)
 S ADM=$G(^DPT("CN",WARD,DFN)) Q
"RTN","FHNO8",17,0)
LIS I 'N1 W !!,"Ord  Date/Time Ordered  Supplemental Feeding Menu    Date/Time Cancelled",!
"RTN","FHNO8",18,0)
 S N1=N1+1,D1=$P(X,"^",2),NM=$P(X,"^",4),D2=$P(X,"^",32)
"RTN","FHNO8",19,0)
 S DTP=D1 D DTP^FH W !,$J(K,3),"  ",DTP
"RTN","FHNO8",20,0)
 S X=$P($G(^FH(118.1,+NM,0)),"^",1) W:X'="" ?24,X
"RTN","FHNO8",21,0)
 I D2 S DTP=D2 D DTP^FH W ?54,DTP
"RTN","FHNO8",22,0)
 Q
"RTN","FHNO8",23,0)
KIL G KILL^XUSCLEAN
"RTN","FHNU")
0^137^B1947288
"RTN","FHNU",1,0)
FHNU ; HISC/REL - Nutrient Analysis ;3/24/95  13:07
"RTN","FHNU",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU",3,0)
EN2 ; Edit Nutrients
"RTN","FHNU",4,0)
 S (DIC,DIE)="^FHNU(",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=112 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN2:Y<1
"RTN","FHNU",5,0)
 S DA=+Y,DR=$S($P(^FHNU(DA,0),"^",6)="N":"4:4.9",1:".01;2:5;7:27;29:99") S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=112 D ^DIE K DA,DIE,DIDEL,DR G EN2
"RTN","FHNU",6,0)
EN5 ; List Nutrient File
"RTN","FHNU",7,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHNU",8,0)
 W ! S L=0,DIC="^FHNU(",FLDS="[FHNULST]",BY="NAME"
"RTN","FHNU",9,0)
 S FR="",TO="",DHD="FOOD NUTRIENTS" D EN1^DIP,RSET Q
"RTN","FHNU",10,0)
EN8 ; List User Menus
"RTN","FHNU",11,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHNU",12,0)
 W ! S L=0,DIC="^FHUM(",FLDS="[FHUMENU]",BY="USER,DATE ENTERED"
"RTN","FHNU",13,0)
 S (FR,TO)=",",DHD="USER MENUS" D EN1^DIP,RSET Q
"RTN","FHNU",14,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHNU",15,0)
KIL G KILL^XUSCLEAN
"RTN","FHNU1")
0^138^B6466411
"RTN","FHNU1",1,0)
FHNU1 ; HISC/REL - List Menu ;11/16/93  09:49 
"RTN","FHNU1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU1",3,0)
 D GET G:'MENU KIL K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNU1",4,0)
 I $D(IO("Q")) S FHPGM="F0^FHNU1",FHLST="MENU^MNAM^TYP" D EN2^FH G KIL
"RTN","FHNU1",5,0)
 U IO D F0 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHNU1",6,0)
F0 ; List the Menu
"RTN","FHNU1",7,0)
 S DAY=0 W:$E(IOST,1,2)="C-" @IOF
"RTN","FHNU1",8,0)
F1 S DAY=$O(^FHUM(MENU,1,DAY)),(MEAL,H1)=0 I DAY<1 W ! G KIL
"RTN","FHNU1",9,0)
F2 S MEAL=$O(^FHUM(MENU,1,DAY,1,MEAL)) G:MEAL<1 F1 S (ITM,H2)=0
"RTN","FHNU1",10,0)
F3 S ITM=$O(^FHUM(MENU,1,DAY,1,MEAL,1,ITM)) G:ITM<1 F2
"RTN","FHNU1",11,0)
 I 'H1 W !!,"Menu: ",MNAM,?60,"Day: ",DAY,! S H1=1
"RTN","FHNU1",12,0)
 I 'H2 W !!?18,"----------  Meal ",MEAL,"  ----------",! S H2=1
"RTN","FHNU1",13,0)
 S X=^FHUM(MENU,1,DAY,1,MEAL,1,ITM,0),Y(0)=^FHNU(+X,0)
"RTN","FHNU1",14,0)
 W !,$P(Y(0),"^",1)," - ",$P(X,"^",2)," ",$S(TYP="C":$P(Y(0),"^",3),1:"gms") G F3
"RTN","FHNU1",15,0)
EN1 ; Display Meal
"RTN","FHNU1",16,0)
 D GET G:'MENU KIL
"RTN","FHNU1",17,0)
SEL S (DAY,MEAL)=0 K DIC I '$D(^FHUM(MENU,1,0)) S ^FHUM(MENU,1,0)="^112.61^^"
"RTN","FHNU1",18,0)
S1 S DIC="^FHUM(MENU,1,",DIC(0)="AEQM",DIC("DR")="",DA(1)=MENU,DIC("A")="Select DAY #: " D ^DIC G KIL:"^"[X!$D(DTOUT),S1:Y<1 S (DAY,DA)=+Y
"RTN","FHNU1",19,0)
 K DR I '$D(^FHUM(MENU,1,DAY,1,0)) S ^FHUM(MENU,1,DAY,1,0)="^112.62^^"
"RTN","FHNU1",20,0)
S2 S DIC="^FHUM(MENU,1,DAY,1,",DIC("A")="Select MEAL #: " D ^DIC G KIL:"^"[X!$D(DTOUT),S2:Y<1 S MEAL=+Y K DIC
"RTN","FHNU1",21,0)
 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNU1",22,0)
 I $D(IO("Q")) S FHPGM="S3^FHNU1",FHLST="MENU^MNAM^TYP^DAY^MEAL" D EN2^FH G KIL
"RTN","FHNU1",23,0)
 U IO D S3 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHNU1",24,0)
S3 ; Print Meal
"RTN","FHNU1",25,0)
 W:$E(IOST,1,2)="C-" @IOF W !,"Menu: ",MNAM,"     Day: ",DAY,"     Meal: ",MEAL,! S (ITM,H1)=0
"RTN","FHNU1",26,0)
D1 S ITM=$O(^FHUM(MENU,1,DAY,1,MEAL,1,ITM)) I ITM<1 W ! W:'H1 !,"NO Items Selected for this Meal!" Q
"RTN","FHNU1",27,0)
 S X=^FHUM(MENU,1,DAY,1,MEAL,1,ITM,0),Y(0)=^FHNU(+X,0),H1=H1+1
"RTN","FHNU1",28,0)
 W !,$P(Y(0),"^",1)," - ",$P(X,"^",2)," ",$S(TYP="C":$P(Y(0),"^",3),1:"gms") G D1
"RTN","FHNU1",29,0)
KIL G KILL^XUSCLEAN
"RTN","FHNU1",30,0)
GET K DIC S MENU=0,DIC="^FHUM(",DIC(0)="AEQMZ",DIC("S")="I '$P(^(0),U,5)" W ! D ^DIC Q:U[X!$D(DTOUT)  G:Y<1 GET S MENU=+Y,MNAM=$P(Y,U,2),TYP=$P(Y(0),U,2) Q
"RTN","FHNU10")
0^139^B8353081
"RTN","FHNU10",1,0)
FHNU10 ; HISC/REL - Print DRI Values ;3/8/95  13:26
"RTN","FHNU10",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU10",3,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHNU10",4,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST PRINTER: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNU10",5,0)
 I $D(IO("Q")) S FHPGM="Q1^FHNU10",FHLST="" D EN2^FH G KIL
"RTN","FHNU10",6,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHNU10",7,0)
Q1 ; Print the DRI Values
"RTN","FHNU10",8,0)
 D NOW^%DTC S DTP=% D DTP^FH
"RTN","FHNU10",9,0)
 S PG=0 D HD1,HD2 S ITMS=$T(ITMS+1)
"RTN","FHNU10",10,0)
 S MNE="" F  S MNE=$O(^FH(112.2,"C",MNE)) Q:MNE=""  S FN=$O(^FH(112.2,"C",MNE,0)) D L1
"RTN","FHNU10",11,0)
 D HD1,HD3 S ITMS=$T(ITMS+2)
"RTN","FHNU10",12,0)
 S MNE="" F  S MNE=$O(^FH(112.2,"C",MNE)) Q:MNE=""  S FN=$O(^FH(112.2,"C",MNE,0)) D L1
"RTN","FHNU10",13,0)
 D HD1,HD4 S ITMS=$T(ITMS+3)
"RTN","FHNU10",14,0)
 S MNE="" F  S MNE=$O(^FH(112.2,"C",MNE)) Q:MNE=""  S FN=$O(^FH(112.2,"C",MNE,0)) D L1
"RTN","FHNU10",15,0)
 W ! Q
"RTN","FHNU10",16,0)
L1 S X=$G(^FH(112.2,FN,0)) W !,$E($P(X,"^",1),1,30)
"RTN","FHNU10",17,0)
 S X=$G(^FH(112.2,FN,1))
"RTN","FHNU10",18,0)
 F LL=3:1 S Y=$P(ITMS,";",LL) Q:Y=""  S P1=$P(Y,",",1),P2=$P(Y,",",2),P3=$P(Y,",",3),P4=$P(Y,",",4),Y=$P(X,"^",P1) W:Y'="" ?P2,$J(Y,P3,P4)
"RTN","FHNU10",19,0)
 Q
"RTN","FHNU10",20,0)
HD1 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,"DRI VALUES",?104,DTP,?125,"Page ",PG Q
"RTN","FHNU10",21,0)
HD2 W !?32,"Protein",?42,"Vitamin A",?54,"Vitamin E",?66,"Vitamin C",?77,"Thiamin",?87,"Riboflavin",?99,"Niacin",?108,"Vitamin B6",?121,"Folate"
"RTN","FHNU10",22,0)
 W !,"Name",?35,"Gm.",?46,"RE",?58,"Mg",?70,"Mg",?80,"Mg",?91,"Mg",?101,"Mg",?112,"Mg",?123,"Mcg"
"RTN","FHNU10",23,0)
 D LN Q
"RTN","FHNU10",24,0)
HD3 W !?32,"Vitamin B12",?46,"Calcium",?57,"Phosphorus",?70,"Magnesium",?84,"Iron",?93,"Zinc",?101,"Pantothenic",?117,"Copper"
"RTN","FHNU10",25,0)
 W !,"Name",?36,"Mcg",?49,"Mg",?61,"Mg",?74,"Mg",?85,"Mg",?94,"Mg",?104,"Acid Mg",?118,"Mg"
"RTN","FHNU10",26,0)
 D LN Q
"RTN","FHNU10",27,0)
HD4 W !?32,"Manganese",?45,"Sodium",?56,"Potassium",?69,"Biotin",?80,"Selenium",?92,"Choline",?103,"Vitamin D",?116,"Fluoride"
"RTN","FHNU10",28,0)
 W !,"Name",?36,"Mg",?47,"Mg",?60,"Mg",?71,"Mcg",?83,"Mcg",?95,"Mg",?107,"Mcg",?119,"Mg"
"RTN","FHNU10",29,0)
 D LN Q
"RTN","FHNU10",30,0)
ITMS ;;Piece,?Tab,Size,Dec
"RTN","FHNU10",31,0)
 ;;1,32,6,1;2,43,6,0;3,55,5,0;4,66,5,0;5,77,5,1;6,86,7,1;7,99,4,0;8,110,5,1;9,121,5,0;
"RTN","FHNU10",32,0)
 ;;10,34,5,1;11,46,6,0;12,57,7,0;13,70,6,0;14,84,3,0;15,93,3,0;16,102,7,1;17,117,4,2;
"RTN","FHNU10",33,0)
 ;;18,32,7,2;19,45,5,0;20,56,7,0;21,69,4,0;22,79,6,0;23,93,4,0;24,105,4,0;25,116,6,2;
"RTN","FHNU10",34,0)
LN W !,"-----------------------------------------------------------------------------------------------------------------------------------",! Q
"RTN","FHNU10",35,0)
KIL G KILL^XUSCLEAN
"RTN","FHNU11")
0^140^B12787092
"RTN","FHNU11",1,0)
FHNU11 ; HISC/REL - Recipe Analysis ;3/10/95  12:17
"RTN","FHNU11",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU11",3,0)
T0 R !!,"Title of Recipe: ",TIT:DTIME G:'$T!("^"[TIT) KIL I TIT'?.ANP W *7,"  ??" G T0
"RTN","FHNU11",4,0)
 I $L(TIT)>60!($L(TIT)<3)!(TIT?1P.E) W *7,!,"Answer must be 3-60 characters in length" G T0
"RTN","FHNU11",5,0)
T1 R !!,"Number of Portions: ",POR:DTIME G:'$T!(POR["^") KIL I +POR'=POR!(POR<1)!(POR>1000) W *7,"Enter number from 1 to 1000" G T1
"RTN","FHNU11",6,0)
D0 R !!,"Do you wish to use common units rather than grams? YES// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="Y" S X=YN D TR^FH S YN=X
"RTN","FHNU11",7,0)
 I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7,!,"  Answer YES or NO" G D0
"RTN","FHNU11",8,0)
 S TYP=$S(YN?1"N".E:"G",1:"C") S:TYP="G" UNIT="gm."
"RTN","FHNU11",9,0)
 W !!!,"We will now build the ingredient list." K FHM
"RTN","FHNU11",10,0)
D1 D ^FHNU7 I FFN'="" G D1
"RTN","FHNU11",11,0)
D2 D LI
"RTN","FHNU11",12,0)
D3 R !!,"Do you wish to edit this list? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G D3
"RTN","FHNU11",13,0)
 G ED:YN?1"Y".E,KIL:'NM D ^FHNU12
"RTN","FHNU11",14,0)
D4 R !,"Do you wish to analyze another Recipe? NO// ",YN:DTIME G:'$T!("^"[YN) KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X G KIL:$P("NO",YN,1)="",T0:$P("YES",YN,1)="" W *7," Answer YES or NO" G D4
"RTN","FHNU11",15,0)
KIL G KILL^XUSCLEAN
"RTN","FHNU11",16,0)
LI W @IOF,!!,"Here is your final ingredient list:",! S NX=0,XT="",NM=0
"RTN","FHNU11",17,0)
L1 S NX=$O(FHM(NX)) I NX="" W:'NM !?5,"No ingredients selected." Q
"RTN","FHNU11",18,0)
 S XT=XT_NX_",",NM=NM+1,X=FHM(NX),AMT=+X S:TYP="C" UNIT=$P(X,",",2),WT=$P(X,",",3)
"RTN","FHNU11",19,0)
 W !,$J(NM,4,0),"  ",$P(^FHNU(NX,0),"^",1),"  ",AMT," ",UNIT G L1
"RTN","FHNU11",20,0)
ED G:'NM E4 R !!,"Do you wish to change any amounts? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G ED
"RTN","FHNU11",21,0)
 G:YN?1"N".E E2
"RTN","FHNU11",22,0)
E1 R !,"Change item # : ",X:DTIME G KIL:'$T,E2:X="",ED:X["^" I X'?1N.N!(X<1)!(X>NM) W *7,"  Enter an item #." G E1
"RTN","FHNU11",23,0)
 S X=$P(XT,",",X) I TYP="C" S UNIT=$P(FHM(X),",",2),WT=$P(FHM(X),",",3)
"RTN","FHNU11",24,0)
 W "  from ",(+FHM(X))," ",UNIT," to: " R Y:DTIME G KIL:'$T,E1:Y["^" I Y'?.N.1".".N!(Y'>0)!(Y>99999) W *7,"  Enter a number from 1 to 99999." G E1
"RTN","FHNU11",25,0)
 W " ",UNIT S $P(FHM(X),",",1)=+Y G E1
"RTN","FHNU11",26,0)
E2 R !!,"Do you wish to delete any items? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G E2
"RTN","FHNU11",27,0)
 G:YN?1"N".E E4
"RTN","FHNU11",28,0)
E3 R !,"Delete item # : ",X:DTIME G KIL:'$T,E4:X="",ED:X["^" I X'?1N.N!(X<1)!(X>NM) W *7,"  Enter an item #." G E3
"RTN","FHNU11",29,0)
 S X=$P(XT,",",X) K FHM(X) W " ... deleted" G E3
"RTN","FHNU11",30,0)
E4 R !!,"Do you wish to add more ingredients? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G E4
"RTN","FHNU11",31,0)
 G D1:YN?1"Y".E,D3
"RTN","FHNU12")
0^141^B7479780
"RTN","FHNU12",1,0)
FHNU12 ; HISC/REL - Recipe Analysis Output ;2/23/00  12:36
"RTN","FHNU12",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU12",3,0)
 K A,B F K=1:1:66 S A(K)=0,B(K)=0
"RTN","FHNU12",4,0)
 S NX=0,SUM=0
"RTN","FHNU12",5,0)
D1 S NX=$O(FHM(NX)) I NX="" G D2
"RTN","FHNU12",6,0)
 S AMT=+FHM(NX) I TYP="C" S WT=$P(FHM(NX),",",3),AMT=AMT*WT
"RTN","FHNU12",7,0)
 S SUM=SUM+AMT
"RTN","FHNU12",8,0)
 S AMT=AMT/100,Y=$G(^FHNU(NX,1)) F K=1:1:20 S Z1=$P(Y,"^",K) I Z1'="" S A(K)=Z1*AMT+A(K),B(K)=B(K)+1
"RTN","FHNU12",9,0)
 S Y=$G(^FHNU(NX,2)) F K=21:1:38 S Z1=$P(Y,"^",K-20) I Z1'="" S A(K)=Z1*AMT+A(K),B(K)=B(K)+1
"RTN","FHNU12",10,0)
 S Y=$G(^FHNU(NX,3)) F K=39:1:56 S Z1=$P(Y,"^",K-38) I Z1'="" S A(K)=Z1*AMT+A(K),B(K)=B(K)+1
"RTN","FHNU12",11,0)
 S Y=$G(^FHNU(NX,4)) F K=57:1:66 S Z1=$P(Y,"^",K-56) I Z1'="" S A(K)=Z1*AMT+A(K),B(K)=B(K)+1
"RTN","FHNU12",12,0)
 G D1
"RTN","FHNU12",13,0)
D2 Q:'SUM  S PW=+$J(SUM/POR,0,2),SUM=SUM/100,ANS="" F K=1:1:66 S:B(K) A(K)=A(K)/SUM,A(K)=+$J(A(K),0,3)
"RTN","FHNU12",14,0)
 W @IOF,!?23,"--- Analysis of Recipe Portion ---",!!?(80-$L(TIT)\2),TIT,!
"RTN","FHNU12",15,0)
 S SUM=PW/100 F K=1:1:34 S Y=$T(COM+K^FHNU6),Z1=$P(Y,";",3) D LST
"RTN","FHNU12",16,0)
 D PSE Q:ANS="^"  F K=35:1:70 S Y=$T(COM+K^FHNU6),Z1=$P(Y,";",3) D LST
"RTN","FHNU12",17,0)
 W !!,"Grams/Portion: ",PW
"RTN","FHNU12",18,0)
D3 R !!,"Do you wish to STORE this recipe in FOOD NUTRIENT File? ",YN:DTIME G FIN:'$T!("^"[YN) S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7,"  Answer YES or NO" G D3
"RTN","FHNU12",19,0)
 G FIN:YN?1"N".E
"RTN","FHNU12",20,0)
 K DIC,DD,DO,DINUM S (DIC,DIE)="^FHNU(",DIC(0)="L",DLAYGO=112,X=TIT D FILE^DICN K DIC,DLAYGO G:Y<1 FIN
"RTN","FHNU12",21,0)
 S DA=+Y,DR=".01;2//^S X=""svg."";3//^S X=PW;4;4.2;S:X="""" Y=98;4.4;98;99" W ! S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=112 D ^DIE K DIE,DIDEL,DR G:'$D(DA) FIN
"RTN","FHNU12",22,0)
 S (Z1,Z2,Z3,Z4)="" F K=1:1:20 S:B(K) $P(Z1,"^",K)=A(K)
"RTN","FHNU12",23,0)
 F K=21:1:38 S:B(K) $P(Z2,"^",K-20)=A(K)
"RTN","FHNU12",24,0)
 F K=39:1:56 S:B(K) $P(Z3,"^",K-38)=A(K)
"RTN","FHNU12",25,0)
 F K=57:1:66 S:B(K) $P(Z4,"^",K-56)=A(K)
"RTN","FHNU12",26,0)
 S ^FHNU(DA,1)=Z1,^(2)=Z2 S:Z3'="" ^FHNU(DA,3)=Z3 S:Z4'="" ^FHNU(DA,4)=Z4
"RTN","FHNU12",27,0)
FIN W ! K DA,A,B,T1,Z1,Z2,Z3,Z4 Q
"RTN","FHNU12",28,0)
LST W:K#2 ! Q:'Z1  S T1=$S(K#2:0,1:42)
"RTN","FHNU12",29,0)
 W ?T1,$P(Y,";",4)," (",B(Z1),")" I B(Z1) W ?(T1+21),$J(A(Z1)*SUM,7,$P(Y,";",6))," ",$P(Y,";",5)
"RTN","FHNU12",30,0)
 Q
"RTN","FHNU12",31,0)
PSE I IOST?1"C-".E R !!,"Press RETURN to Continue ",X:DTIME W ! S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PSE
"RTN","FHNU12",32,0)
 Q
"RTN","FHNU2")
0^142^B17765623
"RTN","FHNU2",1,0)
FHNU2 ; HISC/REL/NCA - Analyze Menu ;3/6/95  15:53
"RTN","FHNU2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU2",3,0)
GET K DIC S MENU=0,DIC="^FHUM(",DIC(0)="AEQMZ",DIC("S")="I '$P(^(0),U,5)" W ! D ^DIC G KIL:U[X!$D(DTOUT),GET:Y<1 S MENU=+Y,MNAM="Menu: "_$P(Y,U,2),TYP=$P(Y(0),U,2)
"RTN","FHNU2",4,0)
F0 K DIC S DIC="^FH(112.2,",DIC(0)="AEQM",DIC("A")="Select DRI Category: " W ! D ^DIC G KIL:X["^"!$D(DTOUT),F0:Y<1 S RDA=+Y K DIC
"RTN","FHNU2",5,0)
S0 R !!,"Do you wish a detailed analysis? Y// ",SUM:DTIME G:'$T!(SUM["^") KIL S:SUM="" SUM="Y" S X=SUM D TR^FH S SUM=X I $P("YES",SUM,1)'="",$P("NO",SUM,1)'="" W *7,!,"  Answer YES or NO" G S0
"RTN","FHNU2",6,0)
 S SUM=$E(SUM,1),SUM=SUM="N"
"RTN","FHNU2",7,0)
 W !!,"The Analysis requires a 132 column printer.",!
"RTN","FHNU2",8,0)
 K IOP S %ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNU2",9,0)
 I $D(IO("Q")) S FHPGM="F1^FHNU2",FHLST="MENU^MNAM^TYP^RDA^SUM" D EN2^FH G KIL
"RTN","FHNU2",10,0)
 U IO X ^%ZOSF("BRK") D F1 X ^%ZOSF("NBRK") D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHNU2",11,0)
F1 ; Print Nutrient Menu Analysis
"RTN","FHNU2",12,0)
 S %DT="X",X="T" D ^%DT S DT=+Y,DTP=DT D DTP^FH,TOT^FHNU9 S (DAY,PG)=0 K D,T G:SUM ^FHNU3
"RTN","FHNU2",13,0)
F5 S DAY=$O(^TMP($J,"I",DAY)) G:DAY="" ^FHNU3 S MEAL=0,NEW=1
"RTN","FHNU2",14,0)
F6 S MEAL=$O(^TMP($J,"I",DAY,MEAL)) G:MEAL="" F8
"RTN","FHNU2",15,0)
 W:'NEW !!,"Meal ",MEAL,! D:NEW HEAD,HD1
"RTN","FHNU2",16,0)
F7 F NM=1:1 Q:'$D(^TMP($J,"I",DAY,MEAL,NM))  S X0=$G(^(NM,0)),X1=$G(^(1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D:$Y>(IOSL-8) HEAD,HD1 W !,$J(NM,5),"  ",$P(X0,"^",1),?24,$J($P(X0,"^",2),5,0) D LIS
"RTN","FHNU2",17,0)
 D:$Y>(IOSL-10) HEAD,HD1 W !!?7,"Meal Total",?29 S X1=$G(^TMP($J,"M",DAY,MEAL,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D LIS
"RTN","FHNU2",18,0)
 W !?7,"% of Kcal",?36 S Z1=$P(X1,"^",4) S:'Z1 Z1=1 F KK=1,3,2 W $J($P(X1,"^",KK)*$S(KK=2:900,1:400)/Z1,7,0)
"RTN","FHNU2",19,0)
 G F6
"RTN","FHNU2",20,0)
F8 D:$Y>(IOSL-12) HEAD,HD1 W !!,"Daily Total",?29 S X1=$G(^TMP($J,"D",DAY,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D LIS
"RTN","FHNU2",21,0)
 W !,"% DRI",?29 D RDA^FHNU9
"RTN","FHNU2",22,0)
 W !,"% of Kcal",?36 S Z1=$P(X1,"^",4) S:'Z1 Z1=1 F KK=1,3,2 W $J($P(X1,"^",KK)*$S(KK=2:900,1:400)/Z1,7,0)
"RTN","FHNU2",23,0)
 W:$P(X1,"^",1) !!,"Kcal:N Ratio = ",$J(6.25*$P(X1,"^",4)/$P(X1,"^",1),0,0),":1"
"RTN","FHNU2",24,0)
 S MEAL=0,NEW=1
"RTN","FHNU2",25,0)
F9 S MEAL=$O(^TMP($J,"I",DAY,MEAL)) G:MEAL="" F11
"RTN","FHNU2",26,0)
 W:'NEW !!,"Meal ",MEAL,! D:NEW HEAD,HD2
"RTN","FHNU2",27,0)
F10 F NM=1:1 Q:'$D(^TMP($J,"I",DAY,MEAL,NM))  S X0=$G(^(NM,0)),X1=$G(^(1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D:$Y>(IOSL-8) HEAD,HD2 W !,$J(NM,5),?12 D LIS
"RTN","FHNU2",28,0)
 D:$Y>(IOSL-9) HEAD,HD2 W !!?3,"Total",?12 S X1=$G(^TMP($J,"M",DAY,MEAL,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D LIS G F9
"RTN","FHNU2",29,0)
F11 D:$Y>(IOSL-10) HEAD,HD2 W !!,"Daily Total",?12 S X1=$G(^TMP($J,"D",DAY,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D LIS
"RTN","FHNU2",30,0)
 W !,"% DRI",?12 D RDA^FHNU9 G F5
"RTN","FHNU2",31,0)
LIS ; List nutrient values
"RTN","FHNU2",32,0)
 S KK=1
"RTN","FHNU2",33,0)
L1 S NODE=$E(NUT,KK) Q:'NODE  S ITM=+$E(NUT,KK+1,KK+2) Q:'ITM  S SIZ=$E(NUT,KK+3),DEC=$E(NUT,KK+4),KK=KK+7
"RTN","FHNU2",34,0)
 S Z1=$S(NODE=1:$P(X1,"^",ITM),NODE=2:$P(X2,"^",ITM-20),NODE=3:$P(X3,"^",ITM-38),1:$P(X4,"^",ITM-56))
"RTN","FHNU2",35,0)
 S Z1=$S(Z1'="":$J(Z1,SIZ,DEC),1:$J(Z1,SIZ)) W Z1 G L1
"RTN","FHNU2",36,0)
KIL ; Final Variable Kill
"RTN","FHNU2",37,0)
 K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHNU2",38,0)
HEAD ; Print Header
"RTN","FHNU2",39,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 I PG=1 D SITE^FH
"RTN","FHNU2",40,0)
 W !,"Station #: ",SITE(1),?44,"E N E R G Y / N U T R I E N T   A N A L Y S I S",?124,"Page ",PG
"RTN","FHNU2",41,0)
 W !,"Station Name: ",SITE,?61,DTP,?110,"DRI: ",$P(^FH(112.2,RDA,0),U,1)
"RTN","FHNU2",42,0)
 W !?(132-$L(MNAM)\2),MNAM S NEW=0 Q
"RTN","FHNU2",43,0)
HD1 W !!,"Day ",DAY,?24,"Quant  Energ    Pro    CHO    Fat    Sod    Pot   Calc   Phos   Iron   Zinc    Mag    Man   Cop   Sel  DFib"
"RTN","FHNU2",44,0)
 W ! W:MEAL'="" "Meal ",MEAL W ?27,"Gm   KCal     Gm     Gm     Gm     Mg     Mg     Mg     Mg     Mg     Mg     Mg     Mg    Mg   Mcg    Gm",!
"RTN","FHNU2",45,0)
 ;NUT String contains 7 characters per nut: 1=node in ^FHNU,2-3=pos. in ^FHNU, 4=field size, 5=# decimals, 6-7=pos. of DRI in ^FH(112.2
"RTN","FHNU2",46,0)
 S NUT="104700010171011037100102710011370191127020108701111170121097114114711511071131167218115621746661222376100" Q
"RTN","FHNU2",47,0)
HD2 W !!,"Day ",DAY,?18,"K      A      C      E    Rib    Thi    Nia     B6    B12    Fol   Pant   Chol   18C2   18C3   Mono   PuFA   SaFa"
"RTN","FHNU2",48,0)
 W ! W:MEAL'="" "Meal ",MEAL W ?16,"Mcg     RE     Mg     Mg     Mg     Mg     Mg     Mg    Mcg    Mcg     Mg     Mg     Gm     Gm     Gm     Gm     Gm",!
"RTN","FHNU2",49,0)
 S NUT="46571262337002119710411771032217206120720522272072247208226721022572092237216229700022771002287100231710023271002307100" Q
"RTN","FHNU3")
0^143^B9501882
"RTN","FHNU3",1,0)
FHNU3 ; HISC/REL/NCA - Weekly Summary ;2/15/95  16:08 
"RTN","FHNU3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU3",3,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 I PG=1 D SITE^FH
"RTN","FHNU3",4,0)
 W !,"Station #: ",SITE(1),?43,"E N E R G Y / N U T R I E N T   S U M M A R Y",?124,"Page ",PG
"RTN","FHNU3",5,0)
 W !,"Station Name: ",SITE,?61,DTP,?110,"DRI: ",$P(^FH(112.2,RDA,0),U,1)
"RTN","FHNU3",6,0)
 W !?(132-$L(MNAM)\2),MNAM S (T(1),T(2),T(3),T(4),T(5))="",NDAY=0
"RTN","FHNU3",7,0)
 W !!,"Daily Totals",?20,"Energ    Pro    CHO    Fat    Sod    Pot   Calc   Phos   Iron   Zinc    Mag    Man    Cop    Sel   DFib      K"
"RTN","FHNU3",8,0)
 W !?21,"KCal     Gm     Gm     Gm     Mg     Mg     Mg     Mg     Mg     Mg     Mg     Mg     Mg    Mcg     Gm    Mcg",!
"RTN","FHNU3",9,0)
 S NUT="1047000101710110370001027000113701911270201087011111701210971141147115110711311672181157217466712223771004657126",DAY=0
"RTN","FHNU3",10,0)
T1 S DAY=$O(^TMP($J,"D",DAY)) G:DAY="" T2 S X1=$G(^(DAY,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)),X5=$G(^(5)),NDAY=NDAY+1
"RTN","FHNU3",11,0)
 F K=1:1:20 S Z1=$P(X1,"^",K) I Z1 S $P(T(1),"^",K)=$P(T(1),"^",K)+Z1
"RTN","FHNU3",12,0)
 F K=1:1:18 S Z1=$P(X2,"^",K) I Z1 S $P(T(2),"^",K)=$P(T(2),"^",K)+Z1
"RTN","FHNU3",13,0)
 F K=9,10 S Z1=$P(X4,"^",K) I Z1 S $P(T(4),"^",K)=$P(T(4),"^",K)+Z1
"RTN","FHNU3",14,0)
 F K=1:1:66 S:$P(X5,"^",K) $P(T(5),"^",K)=1
"RTN","FHNU3",15,0)
 W !?3,"Day ",DAY,?19 D LIS G T1
"RTN","FHNU3",16,0)
T2 D AVG W !!,"Daily Average",?19 S X1=T(1),X2=T(2),X4=T(4),X5=T(5) D LIS
"RTN","FHNU3",17,0)
 W !,"Average % DRI",?18 D RDA^FHNU9
"RTN","FHNU3",18,0)
 W !,"% of Kcal",?25 S Z1=$P(X1,"^",4) S:'Z1 Z1=1 F KK=1,3,2 W $J($P(X1,"^",KK)*$S(KK=2:900,1:400)/Z1,7,0)
"RTN","FHNU3",19,0)
 W !!!!,"Daily Totals",?24,"A      C      E    Rib    Thi    Nia     B6    B12    Fol   Pant   Chol   18C2   18C3   Mono   PuFa   SaFa"
"RTN","FHNU3",20,0)
 W !?23,"RE     Mg     Mg     Mg     Mg     Mg     Mg    Mcg    Mcg     Mg     Mg     Gm     Gm     Gm     Gm     Gm",!
"RTN","FHNU3",21,0)
 S NUT="2338002119710411771032217206120720522272072247208226721022572092237216229700022771002287100231710023271002307100",DAY=0
"RTN","FHNU3",22,0)
T3 S DAY=$O(^TMP($J,"D",DAY)) G:DAY="" T4 S X1=$G(^(DAY,1)),X2=$G(^(2)),X4=$G(^(4)),X5=$G(^(5))
"RTN","FHNU3",23,0)
 W !?3,"Day ",DAY,?18 D LIS G T3
"RTN","FHNU3",24,0)
T4 W !!,"Daily Average",?18 S X1=T(1),X2=T(2),X4=T(4),X5=T(5) D LIS
"RTN","FHNU3",25,0)
 W !,"Average % DRI",?17 D RDA^FHNU9
"RTN","FHNU3",26,0)
 W:$P(X1,"^",1) !!,"Kcal:N Ratio = ",$J(6.25*$P(X1,"^",4)/$P(X1,"^",1),0,0),":1"
"RTN","FHNU3",27,0)
 W !!,"'+' following a daily value indicates that incomplete data exists.",! G KIL^FHNU2
"RTN","FHNU3",28,0)
LIS ; List nutrient values
"RTN","FHNU3",29,0)
 S KK=1
"RTN","FHNU3",30,0)
L1 S NODE=$E(NUT,KK) Q:'NODE  S ITM=+$E(NUT,KK+1,KK+2) Q:'ITM  S SIZ=$E(NUT,KK+3),DEC=$E(NUT,KK+4),KK=KK+7
"RTN","FHNU3",31,0)
 S Z1=$S(NODE=1:$P(X1,"^",ITM),NODE=2:$P(X2,"^",ITM-20),NODE=3:$P(X3,"^",ITM-38),1:$P(X4,"^",ITM-56))
"RTN","FHNU3",32,0)
 S Z1=$S(Z1'="":$J(Z1,SIZ-1,DEC),1:$J(Z1,SIZ-1))_$S($P(X5,"^",ITM):"+",1:" ") W Z1 G L1
"RTN","FHNU3",33,0)
AVG ; Get averages
"RTN","FHNU3",34,0)
 S:'NDAY NDAY=1 F K=1:1:20 S $P(T(1),"^",K)=$J($P(T(1),"^",K)/NDAY,0,3)
"RTN","FHNU3",35,0)
 F K=1:1:18 S $P(T(2),"^",K)=$J($P(T(2),"^",K)/NDAY,0,3)
"RTN","FHNU3",36,0)
 F K=9,10 S $P(T(4),"^",K)=$J($P(T(4),"^",K)/NDAY,0,3)
"RTN","FHNU3",37,0)
 Q
"RTN","FHNU4")
0^144^B16508748
"RTN","FHNU4",1,0)
FHNU4 ; HISC/REL - Edit Menu ;11/16/93  09:52 
"RTN","FHNU4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU4",3,0)
GET W ! K DIC S DIC="^FHUM(",DIC(0)="AEQLMZ",DIC("S")="I '$P(^(0),U,5)",DIC("DR")=".01",DLAYGO=112.6 D ^DIC K DLAYGO G KIL:U[X!$D(DTOUT),GET:Y<1 S MENU=+Y,MNAM=$P(Y,U,2)
"RTN","FHNU4",4,0)
 S NEW=$P(Y,U,3),DIE=DIC K DIC S DA=MENU,DR=$S(NEW:".6",1:".01"),DIDEL=112.6 D ^DIE K DIDEL G KIL:'$D(^FHUM(MENU)) I NEW S %DT="X",X="T" D ^%DT S $P(^FHUM(MENU,0),U,3,4)=Y_"^"_DUZ
"RTN","FHNU4",5,0)
 S TYP=$P(^FHUM(MENU,0),U,2)
"RTN","FHNU4",6,0)
SEL S (DAY,MEAL)=0 K DIC I '$D(^FHUM(MENU,1,0)) S ^FHUM(MENU,1,0)="^112.61^^"
"RTN","FHNU4",7,0)
S1 S DIC="^FHUM(MENU,1,",DIC(0)="AEQLM",DIC("DR")="",DA(1)=MENU,DIC("A")="Select DAY #: ",DLAYGO=112.6 D ^DIC K DLAYGO G KIL:U[X!$D(DTOUT),S1:Y<1 S (DAY,DA)=+Y
"RTN","FHNU4",8,0)
 K DR I '$D(^FHUM(MENU,1,DAY,1,0)) S ^FHUM(MENU,1,DAY,1,0)="^112.62^^"
"RTN","FHNU4",9,0)
S2 S DIC="^FHUM(MENU,1,DAY,1,",DIC("A")="Select MEAL #: " D ^DIC G KIL:U[X!$D(DTOUT),S2:Y<1 S MEAL=+Y K DIC I $P(Y,U,3) S ^FHUM(MENU,1,DAY,1,MEAL,1,0)="^112.63P^^" K FHM G E5
"RTN","FHNU4",10,0)
ED D LIS R !!,"Do you wish to EDIT this list? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G ED
"RTN","FHNU4",11,0)
 I YN?1"N".E W ! G SEL
"RTN","FHNU4",12,0)
E0 G:'NM E5 R !!,"Do you wish to change any amounts? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X
"RTN","FHNU4",13,0)
 I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7,!,"  Answer YES or NO" G E0
"RTN","FHNU4",14,0)
 G E2:YN?1"N".E
"RTN","FHNU4",15,0)
E1 R !,"Change item # : ",X:DTIME G KIL:'$T,E2:X="",ED:X["^" I X'?1N.N!(X<1)!(X>NM) W *7,"  ??" G E1
"RTN","FHNU4",16,0)
 S X=$P(XT,",",X) I TYP="C" S UNIT=$P(FHM(X),",",2),WT=$P(FHM(X),",",3)
"RTN","FHNU4",17,0)
 W *7,"  from ",(+FHM(X))," ",UNIT," to: " R Y:DTIME G KIL:'$T,E1:Y["^" I Y'?.N.1".".N!(Y'>0)!(Y>99999) W "  ??" G E1
"RTN","FHNU4",18,0)
 W " ",UNIT S Y=+Y,$P(FHM(X),",",1)=Y
"RTN","FHNU4",19,0)
 S $P(^FHUM(MENU,1,DAY,1,MEAL,1,X,0),"^",2)=Y G E1
"RTN","FHNU4",20,0)
E2 R !!,"Do you wish to delete any items? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X
"RTN","FHNU4",21,0)
 I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7,!,"  Answer YES or NO" G E2
"RTN","FHNU4",22,0)
 G E4:YN?1"N".E
"RTN","FHNU4",23,0)
E3 R !,"Delete item # : ",X:DTIME G KIL:'$T,E4:X="",ED:X["^" I X'?1N.N!(X<1)!(X>NM) W *7,"  ??" G E3
"RTN","FHNU4",24,0)
 S X=$P(XT,",",X) K FHM(X),^FHUM(MENU,1,DAY,1,MEAL,1,X,0) W " ... deleted"
"RTN","FHNU4",25,0)
 S $P(^FHUM(MENU,1,DAY,1,MEAL,1,0),U,4)=$P(^FHUM(MENU,1,DAY,1,MEAL,1,0),U,4)-1 G E3
"RTN","FHNU4",26,0)
E4 R !!,"Do you wish to add more food items? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X
"RTN","FHNU4",27,0)
 I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7,!,"  Answer YES or NO" G E4
"RTN","FHNU4",28,0)
 G E6:YN?1"N".E
"RTN","FHNU4",29,0)
E5 D ^FHNU7 I FFN="" G E6
"RTN","FHNU4",30,0)
 I $D(^FHUM(MENU,1,DAY,1,MEAL,1,FFN,0)) S $P(^(0),"^",2)=AMT G E5
"RTN","FHNU4",31,0)
 S $P(^FHUM(MENU,1,DAY,1,MEAL,1,0),U,3,4)=FFN_"^"_($P(^FHUM(MENU,1,DAY,1,MEAL,1,0),U,4)+1)
"RTN","FHNU4",32,0)
 S ^FHUM(MENU,1,DAY,1,MEAL,1,FFN,0)=FFN_"^"_AMT G E5
"RTN","FHNU4",33,0)
E6 I $O(^FHUM(MENU,1,DAY,1,MEAL,1,0))>0 G ED
"RTN","FHNU4",34,0)
 K ^FHUM(MENU,1,DAY,1,MEAL) W !!?5,"No Items Remain - Meal Deleted!"
"RTN","FHNU4",35,0)
 S $P(^FHUM(MENU,1,DAY,1,0),U,4)=$P(^FHUM(MENU,1,DAY,1,0),U,4)-1
"RTN","FHNU4",36,0)
 I $O(^FHUM(MENU,1,DAY,1,0))>0 W ! G SEL
"RTN","FHNU4",37,0)
 K ^FHUM(MENU,1,DAY) W !?5,"No Meals Remain - Day Deleted!"
"RTN","FHNU4",38,0)
 S $P(^FHUM(MENU,1,0),U,4)=$P(^FHUM(MENU,1,0),U,4)-1 W ! G SEL
"RTN","FHNU4",39,0)
KIL G KILL^XUSCLEAN
"RTN","FHNU4",40,0)
LIS W @IOF,!!,"Current Food List for Menu: ",MNAM,"     Day: ",DAY,"     Meal: ",MEAL,! S (NX,NM)=0,XT="",UNIT="gm." K FHM
"RTN","FHNU4",41,0)
L1 S NX=$O(^FHUM(MENU,1,DAY,1,MEAL,1,NX)) I NX="" W:'NM !?5,"No items selected." Q
"RTN","FHNU4",42,0)
 S AMT=$P(^FHUM(MENU,1,DAY,1,MEAL,1,NX,0),"^",2),X=^FHNU(NX,0),NM=NM+1 I TYP="C" S UNIT=$P(X,"^",3),WT=$P(X,"^",4) D UNT
"RTN","FHNU4",43,0)
 S XT=XT_NX_",",FHM(NX)=AMT I TYP="C" S FHM(NX)=FHM(NX)_","_UNIT_","_WT
"RTN","FHNU4",44,0)
 W !,$J(NM,4,0),"  ",$P(X,"^",1)," - ",AMT," ",UNIT G L1
"RTN","FHNU4",45,0)
UNT I AMT'>1,UNIT'["." S L=$L(UNIT)-1,L=$S($E(UNIT,L)'="e":L,"hos"'[$E(UNIT,L-1):L,1:L-1),UNIT=$E(UNIT,1,L) I $E(UNIT,L-1,L)="ie" S UNIT=$E(UNIT,1,L-2)_"y"
"RTN","FHNU4",46,0)
 Q
"RTN","FHNU5")
0^145^B13700099
"RTN","FHNU5",1,0)
FHNU5 ; HISC/REL - Abbreviated Analysis ;5/17/93  08:48 
"RTN","FHNU5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU5",3,0)
T0 R !!,"Title of Analysis: ",TIT:DTIME G:'$T!("^"[TIT) KIL I TIT'?.ANP W *7,"  ??" G T0
"RTN","FHNU5",4,0)
 I $L(TIT)>60!($L(TIT)<3)!(TIT?1P.E) W *7,!,"Answer must be 3-60 characters in length" G T0
"RTN","FHNU5",5,0)
D0 R !!,"Do you wish to use common units rather than grams? YES// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="Y" S X=YN D TR^FH S YN=X
"RTN","FHNU5",6,0)
 I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7,!,"  Answer YES or NO" G D0
"RTN","FHNU5",7,0)
 S TYP=$S(YN?1"N".E:"G",1:"C") S:TYP="G" UNIT="gm."
"RTN","FHNU5",8,0)
RDA K DIC S DIC="^FH(112.2,",DIC(0)="AEQM",DIC("A")="Select DRI Category: " W ! D ^DIC G:X["^"!$D(DTOUT) KIL S RDA=$S(Y<1:0,1:+Y) K DIC
"RTN","FHNU5",9,0)
 W !!!,"We will now build the food list; you can obtain an analysis"
"RTN","FHNU5",10,0)
 W !,"of a single food item by merely selecting that one item." K FHM
"RTN","FHNU5",11,0)
D1 D ^FHNU7 I FFN'="" G D1
"RTN","FHNU5",12,0)
D3 D LI
"RTN","FHNU5",13,0)
D4 R !!,"Do you wish to edit this list? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G D4
"RTN","FHNU5",14,0)
 G ED:YN?1"Y".E,KIL:'NM K IOP S %ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNU5",15,0)
 I $D(IO("Q")) S FHPGM="^FHNU6",FHLST="TYP^RDA^TIT^FHM(" D EN2^FH W ! G D5
"RTN","FHNU5",16,0)
 U IO D ^FHNU6 D ^%ZISC K %ZIS,IOP
"RTN","FHNU5",17,0)
D5 R !,"Do you wish to analyze another menu? NO// ",YN:DTIME G:'$T!("^"[YN) KIL S X=YN D TR^FH S YN=X G KIL:$P("NO",YN,1)="",T0:$P("YES",YN,1)="" W *7," Answer YES or NO" G D5
"RTN","FHNU5",18,0)
KIL G KILL^XUSCLEAN
"RTN","FHNU5",19,0)
LI W @IOF,!!,"Here is your final food list:",! S NX=0,XT="",NM=0
"RTN","FHNU5",20,0)
L1 S NX=$O(FHM(NX)) I NX="" W:'NM !?5,"No food items selected." Q
"RTN","FHNU5",21,0)
 S XT=XT_NX_",",NM=NM+1,X=FHM(NX),AMT=+X S:TYP="C" UNIT=$P(X,",",2),WT=$P(X,",",3)
"RTN","FHNU5",22,0)
 W !,$J(NM,4,0),"  ",$P(^FHNU(NX,0),"^",1),"  ",AMT," ",UNIT G L1
"RTN","FHNU5",23,0)
ED G:'NM E4 R !!,"Do you wish to change any amounts? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G ED
"RTN","FHNU5",24,0)
 G:YN?1"N".E E2
"RTN","FHNU5",25,0)
E1 R !,"Change item # : ",X:DTIME G KIL:'$T,E2:X="",ED:X["^" I X'?1N.N!(X<1)!(X>NM) W *7,"  Enter an item #." G E1
"RTN","FHNU5",26,0)
 S X=$P(XT,",",X) I TYP="C" S UNIT=$P(FHM(X),",",2),WT=$P(FHM(X),",",3)
"RTN","FHNU5",27,0)
 W "  from ",(+FHM(X))," ",UNIT," to: " R Y:DTIME G KIL:'$T,E1:Y["^" I Y'?.N.1".".N!(Y'>0)!(Y>99999) W *7,"  Enter a number from 1 to 99999." G E1
"RTN","FHNU5",28,0)
 W " ",UNIT S $P(FHM(X),",",1)=+Y G E1
"RTN","FHNU5",29,0)
E2 R !!,"Do you wish to delete any items? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G E2
"RTN","FHNU5",30,0)
 G:YN?1"N".E E4
"RTN","FHNU5",31,0)
E3 R !,"Delete item # : ",X:DTIME G KIL:'$T,E4:X="",ED:X["^" I X'?1N.N!(X<1)!(X>NM) W *7,"  Enter an item #." G E3
"RTN","FHNU5",32,0)
 S X=$P(XT,",",X) K FHM(X) W " ... deleted" G E3
"RTN","FHNU5",33,0)
E4 R !!,"Do you wish to add more food items? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G E4
"RTN","FHNU5",34,0)
 G D1:YN?1"Y".E,D3
"RTN","FHNU6")
0^146^B13054055
"RTN","FHNU6",1,0)
FHNU6 ; HISC/REL/NCA - Abbreviated Analysis Output ;8/2/94  16:09
"RTN","FHNU6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU6",3,0)
 K A,B,C F K=1:1:3 S C(K)=0 F K=1:1:66 S A(K)=0,B(K)=0
"RTN","FHNU6",4,0)
 S NX=0
"RTN","FHNU6",5,0)
D1 S NX=$O(FHM(NX)) I NX="" G D2
"RTN","FHNU6",6,0)
 S AMT=+FHM(NX) I TYP="C" S WT=$P(FHM(NX),",",3),AMT=AMT*WT
"RTN","FHNU6",7,0)
 S AMT=AMT/100,Y=$G(^FHNU(NX,1)) F K=1:1:20 S Z1=$P(Y,"^",K) I Z1'="" S A(K)=Z1*AMT+A(K),B(K)=B(K)+1
"RTN","FHNU6",8,0)
 S Y=$G(^FHNU(NX,2)) F K=21:1:38 S Z1=$P(Y,"^",K-20) I Z1'="" S A(K)=Z1*AMT+A(K),B(K)=B(K)+1
"RTN","FHNU6",9,0)
 S Y=$G(^FHNU(NX,3)) F K=39:1:56 S Z1=$P(Y,"^",K-38) I Z1'="" S A(K)=Z1*AMT+A(K),B(K)=B(K)+1
"RTN","FHNU6",10,0)
 S Y=$G(^FHNU(NX,4)) F K=57:1:66 S Z1=$P(Y,"^",K-56) I Z1'="" S A(K)=Z1*AMT+A(K),B(K)=B(K)+1
"RTN","FHNU6",11,0)
 G D1
"RTN","FHNU6",12,0)
D2 S ZR=$S(RDA:^FH(112.2,RDA,1),1:""),ANS=""
"RTN","FHNU6",13,0)
 S Z1=4*A(1)+(9*A(2))+(4*A(3)) S:'Z1 Z1=1 F KK=1,3,2 S C(KK)=$J(A(KK)*$S(KK=2:900,1:400)/Z1,4,0)
"RTN","FHNU6",14,0)
 W:$E(IOST,1,2)="C-" @IOF W !?28,"--- Analysis of Menu ---",!!?(80-$L(TIT)\2),TIT,!!?34,"%",?39,"%",?76,"%",!
"RTN","FHNU6",15,0)
 W ?33,"DRI",?37,"Kcal",?75,"DRI",!
"RTN","FHNU6",16,0)
 F K=1:1:34 S Y=$T(COM+K),Z1=$P(Y,";",3) D LST
"RTN","FHNU6",17,0)
 D PSE I ANS="^" K A,B,C,KK,T1,Z1,Z2,ZR Q
"RTN","FHNU6",18,0)
 F K=35:1:70 S Y=$T(COM+K),Z1=$P(Y,";",3) D LST
"RTN","FHNU6",19,0)
 D PSE W ! K A,B,C,KK,T1,Z1,Z2,ZR Q
"RTN","FHNU6",20,0)
LST W:K#2 ! Q:'Z1  S T1=$S(K#2:0,1:42)
"RTN","FHNU6",21,0)
 W ?T1,$P(Y,";",4)," (",B(Z1),")" I B(Z1) W ?(T1+21),$J(A(Z1),7,$P(Y,";",6))," ",$P(Y,";",5)
"RTN","FHNU6",22,0)
 S Z2=$P(Y,";",7) I Z2,ZR'="" S Z2=A(Z1)/$P(ZR,U,Z2) W ?(T1+33),$J(Z2*100,3,0)
"RTN","FHNU6",23,0)
 I $D(C(Z1)) W ?(T1+37),C(Z1)
"RTN","FHNU6",24,0)
 Q
"RTN","FHNU6",25,0)
PSE I IOST?1"C-".E R !!,"Press RETURN to Continue ",X:DTIME W ! S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PSE
"RTN","FHNU6",26,0)
 Q
"RTN","FHNU6",27,0)
COM ;;
"RTN","FHNU6",28,0)
 ;;4;Calories;K;0;0
"RTN","FHNU6",29,0)
 ;;33;Vitamin A;RE;0;2
"RTN","FHNU6",30,0)
 ;;1;Protein;Gms;1;1
"RTN","FHNU6",31,0)
 ;;19;Ascorbic Acid;Mg;1;4
"RTN","FHNU6",32,0)
 ;;3;Carbohydrate;Gms;1;0
"RTN","FHNU6",33,0)
 ;;17;Vitamin E;Mg;1;3
"RTN","FHNU6",34,0)
 ;;2;Fat;Gms;1;0
"RTN","FHNU6",35,0)
 ;;21;Riboflavin;Mg;1;6
"RTN","FHNU6",36,0)
 ;;13;Sodium;Mg;1;19
"RTN","FHNU6",37,0)
 ;;20;Thiamin;Mg;1;5
"RTN","FHNU6",38,0)
 ;;12;Potassium;Mg;1;20
"RTN","FHNU6",39,0)
 ;;22;Niacin;Mg;1;7
"RTN","FHNU6",40,0)
 ;;8;Calcium;Mg;1;11
"RTN","FHNU6",41,0)
 ;;24;Vitamin B6;Mg;1;8
"RTN","FHNU6",42,0)
 ;;11;Phosphorus;Mg;1;12
"RTN","FHNU6",43,0)
 ;;26;Vitamin B12;Mcg;1;10
"RTN","FHNU6",44,0)
 ;;9;Iron;Mg;1;14
"RTN","FHNU6",45,0)
 ;;65;Vitamin K;Mcg;1;26
"RTN","FHNU6",46,0)
 ;;14;Zinc;Mg;1;15
"RTN","FHNU6",47,0)
 ;;25;Folate;Mcg;1;9
"RTN","FHNU6",48,0)
 ;;10;Magnesium;Mg;1;13
"RTN","FHNU6",49,0)
 ;;23;Pantothenic Ac;Mg;1;16
"RTN","FHNU6",50,0)
 ;;16;Manganese;Mg;1;18
"RTN","FHNU6",51,0)
 ;;29;Cholesterol;Mg;1;0
"RTN","FHNU6",52,0)
 ;;15;Copper;Mg;1;17
"RTN","FHNU6",53,0)
 ;;27;Linoleic Acid;Gms;1;0
"RTN","FHNU6",54,0)
 ;;66;Selenium;Mcg;1;22
"RTN","FHNU6",55,0)
 ;;28;Linolenic Acid;Gms;1;0
"RTN","FHNU6",56,0)
 ;;0;Crude Fiber;Gms;1;0
"RTN","FHNU6",57,0)
 ;;31;Monounsat. Fat;Gms;1;0
"RTN","FHNU6",58,0)
 ;;0;Dietary Fiber;Gms;1;0
"RTN","FHNU6",59,0)
 ;;32;Polyunsat. Fat;Gms;1;0
"RTN","FHNU6",60,0)
 ;;5;Water;Ml;1;0
"RTN","FHNU6",61,0)
 ;;30;Saturated Fat;Gms;1;0
"RTN","FHNU6",62,0)
 ;;34;Ash;Gms;1;0
"RTN","FHNU6",63,0)
 ;;39;Tryptophan;Gms;2;0
"RTN","FHNU6",64,0)
 ;;35;Alcohol;Gms;1;0
"RTN","FHNU6",65,0)
 ;;40;Threonine;Gms;2;0
"RTN","FHNU6",66,0)
 ;;36;Caffeine;Mg;1;0
"RTN","FHNU6",67,0)
 ;;41;Isoleucine;Gms;2;0
"RTN","FHNU6",68,0)
 ;;37;Total Diet Fiber;Gms;1;0
"RTN","FHNU6",69,0)
 ;;42;Leucine;Gms;2;0
"RTN","FHNU6",70,0)
 ;;38;Total Tocopherol;Mg;1;0
"RTN","FHNU6",71,0)
 ;;43;Lysine;Gms;2;0
"RTN","FHNU6",72,0)
 ;;57;Capric Acid;Gms;2;0
"RTN","FHNU6",73,0)
 ;;44;Methionine;Gms;2;0
"RTN","FHNU6",74,0)
 ;;58;Lauric Acid;Gms;2;0
"RTN","FHNU6",75,0)
 ;;45;Cystine;Gms;2;0
"RTN","FHNU6",76,0)
 ;;59;Myristic Acid;Gms;2;0
"RTN","FHNU6",77,0)
 ;;46;Phenylalanine;Gms;2;0
"RTN","FHNU6",78,0)
 ;;60;Palmitic Acid;Gms;2;0
"RTN","FHNU6",79,0)
 ;;47;Tyrosine;Gms;2;0
"RTN","FHNU6",80,0)
 ;;61;Palmitoleic Acid;Gms;2;0
"RTN","FHNU6",81,0)
 ;;48;Valine;Gms;2;0
"RTN","FHNU6",82,0)
 ;;62;Stearic Acid;Gms;2;0
"RTN","FHNU6",83,0)
 ;;49;Arginine;Gms;2;0
"RTN","FHNU6",84,0)
 ;;63;Oleic Acid;Gms;2;0
"RTN","FHNU6",85,0)
 ;;50;Histidine;Gms;2;0
"RTN","FHNU6",86,0)
 ;;64;Arachidonic Acid;Gms;2;0
"RTN","FHNU6",87,0)
 ;;51;Alanine;Gms;2;0
"RTN","FHNU6",88,0)
 ;;0
"RTN","FHNU6",89,0)
 ;;52;Aspartic Acid;Gms;2;0
"RTN","FHNU6",90,0)
 ;;0
"RTN","FHNU6",91,0)
 ;;53;Glutamic Acid;Gms;2;0
"RTN","FHNU6",92,0)
 ;;0
"RTN","FHNU6",93,0)
 ;;54;Glycine;Gms;2;0
"RTN","FHNU6",94,0)
 ;;0
"RTN","FHNU6",95,0)
 ;;55;Proline;Gms;2;0
"RTN","FHNU6",96,0)
 ;;0
"RTN","FHNU6",97,0)
 ;;56;Serine;Gms;2;0
"RTN","FHNU7")
0^147^B8293944
"RTN","FHNU7",1,0)
FHNU7 ; HISC/REL - Food Item Search ;5/17/93  08:50
"RTN","FHNU7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU7",3,0)
 S NOD="AQ",(FFN,NAM,AMT)=""
"RTN","FHNU7",4,0)
 R !!?2,"Select Food Item: ",Y:DTIME G:'$T!("^"[Y)!(Y?1",".E)!(Y'?.ANP)!($L(Y)>30) END S X=Y D TR^FH S Y=X
"RTN","FHNU7",5,0)
 I Y["?" W !,"Enter first few characters of food name, e.g., MILK" G FHNU7
"RTN","FHNU7",6,0)
F0 S NM=0,XT="",L=$P(Y,",",1),F=$P(Y,",",2) S:$E(F,1)=" " F=$E(F,2,99)
"RTN","FHNU7",7,0)
 S NX=L,J=$L(L),K=$L(F) I $D(^FHNU(NOD,NX)) S FFN=0 G S1
"RTN","FHNU7",8,0)
S0 S NX=$O(^FHNU(NOD,NX)) G:NX=""!($P(NX,L,1)'="") SD I K G:$E($P(NX,", ",2),1,K)'=F S0
"RTN","FHNU7",9,0)
 S FFN=0
"RTN","FHNU7",10,0)
S1 S FFN=$O(^FHNU(NOD,NX,FFN)) G:FFN="" S0 S NM=NM+1,XT=XT_FFN_"," G S1:NM<18,TOO
"RTN","FHNU7",11,0)
SD I 'NM G:NOD="AQ" NX W !!?2,"Food item not found " G FHNU7
"RTN","FHNU7",12,0)
TOO W ! F LL=1:1:NM S X=^FHNU($P(XT,",",LL),0) W !,$J(LL,3,0),?6,$P(X,"^",1)
"RTN","FHNU7",13,0)
 S YN=NOD="AQ"!(NM=18) W !!?2,"Select Food Item #, '",$S(YN:"^",1:"RETURN"),"' to Quit" W:YN ",",!?2,"or 'RETURN' to continue list"
"RTN","FHNU7",14,0)
 R " => ",YN:DTIME I '$T!(YN["^") S FFN="" G END
"RTN","FHNU7",15,0)
 I YN="",NM>17 S NM=0,XT="" G S1
"RTN","FHNU7",16,0)
 G:YN["^" FHNU7 I YN="" G NX:NOD="AQ",FHNU7
"RTN","FHNU7",17,0)
 I YN'?1N.N!(YN<1)!(YN>NM) W *7,"  ??" G TOO
"RTN","FHNU7",18,0)
 S FFN=$P(XT,",",YN) G OK
"RTN","FHNU7",19,0)
OK S X=^FHNU(FFN,0),NAM=$P(X,"^",1),UNT=$P(X,"^",3),WT=$P(X,"^",4)
"RTN","FHNU7",20,0)
 I $D(FHM(FFN)) G ED
"RTN","FHNU7",21,0)
 S UNIT=$S(TYP="C":UNT,1:"gms.")
"RTN","FHNU7",22,0)
D2 W !!?2,NAM,!?5,"Amount (",UNIT W:TYP="C" " at ",WT," gms" W ")  => " R Y:DTIME I '$T!(Y["^") S FFN="" G END
"RTN","FHNU7",23,0)
 I Y=0 G FHNU7
"RTN","FHNU7",24,0)
 I Y'?.N.1".".N!(Y'>0)!(Y>99999) W *7,!,"  Enter amount of item. Enter 0 to delete;",!,"  otherwise enter a number greater than 0 but less than 99999." G D2
"RTN","FHNU7",25,0)
 I TYP="C" W "  ... ",Y*WT," grams"
"RTN","FHNU7",26,0)
 I TYP="C",Y'>1,UNIT'["." S L=$L(UNIT)-1,L=$S($E(UNIT,L)'="e":L,"hos"'[$E(UNIT,L-1):L,1:L-1),UNIT=$E(UNIT,1,L) I $E(UNIT,L-1,L)="ie" S UNIT=$E(UNIT,1,L-2)_"y"
"RTN","FHNU7",27,0)
 S FHM(FFN)=Y,AMT=Y S:TYP="C" FHM(FFN)=FHM(FFN)_","_UNIT_","_WT
"RTN","FHNU7",28,0)
END K NOD,F,J,K,L,LL,NM,NX,XT,X,Y,YN Q
"RTN","FHNU7",29,0)
NX S NOD="B",(FFN,NAM,AMT)="" G F0
"RTN","FHNU7",30,0)
ED W !!?2,"You have already selected ",NAM
"RTN","FHNU7",31,0)
 I TYP="C" S UNIT=$P(FHM(FFN),",",2),WT=$P(FHM(FFN),",",3)
"RTN","FHNU7",32,0)
 E  S UNIT="gms."
"RTN","FHNU7",33,0)
E1 W !!?2,"Change amount from ",(+FHM(FFN))," ",UNIT," to: " R Y:DTIME I '$T!(Y["^") S FFN="" G END
"RTN","FHNU7",34,0)
 I Y'?.N.1".".N!(Y'>0)!(Y>99999) W *7,!,"  Enter an amount greater than 0 but less than 99999" G E1
"RTN","FHNU7",35,0)
 W " ",UNIT S (Y,AMT)=+Y,$P(FHM(FFN),",",1)=AMT G END
"RTN","FHNU8")
0^148^B11707333
"RTN","FHNU8",1,0)
FHNU8 ; HISC/REL/NCA - Nutrient Intake Study ;11/16/93  09:52 
"RTN","FHNU8",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU8",3,0)
 S %DT="X",X="T" D ^%DT,HDR S DT=Y
"RTN","FHNU8",4,0)
F4 K DIC S MENU=0,DIC="^FHUM(",DIC(0)="AEQMZ",DIC("S")="I '$P(^(0),U,5)" W ! D ^DIC G KIL:U[X!$D(DTOUT),F4:Y<1 S MENU=+Y,MNAM="Menu: "_$P(Y,U,2),TYP=$P(Y(0),U,2)
"RTN","FHNU8",5,0)
F5 K DIC S DIC="^FH(112.2,",DIC(0)="AEQM",DIC("A")="Select DRI Category: " W ! D ^DIC G:X["^"!$D(DTOUT) KIL S RDA=$S(Y<1:0,1:+Y) K DIC
"RTN","FHNU8",6,0)
F1 S ALL=1 D ^FHDPA G PAT:X="*",KIL:'DFN G:FHDFN="" KIL S NAM=$P(Y(0),U,1),SEX=$P(Y(0),U,2),AGE=$P(Y(0),U,3) G:SEX=""!(AGE="") P1
"RTN","FHNU8",7,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"  [ Patient has expired. ]" G KIL
"RTN","FHNU8",8,0)
 S AGE=$E(DT,1,3)-$E(AGE,1,3)-($E(DT,4,7)<$E(AGE,4,7))
"RTN","FHNU8",9,0)
F2 K IOP S %ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHNU8",10,0)
 I $D(IO("Q")) S FHPGM="Q1^FHNU8",FHLST="MENU^MNAM^TYP^RDA^NAM^SEX^AGE^DTP" D EN2^FH G KIL
"RTN","FHNU8",11,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHNU8",12,0)
Q1 ; Printing Nutrient Intake
"RTN","FHNU8",13,0)
 S %DT="X",X="T" D ^%DT S (DT,DTP)=Y D DTP^FH
"RTN","FHNU8",14,0)
 D TOT^FHNU9,HEAD S (DAY,NDAY)=0,(T(1),T(2),T(3),T(4),T(5))=""
"RTN","FHNU8",15,0)
C1 S DAY=$O(^TMP($J,"M",DAY)) G:DAY="" C4 S MEAL=0 W !!,"Day ",DAY
"RTN","FHNU8",16,0)
C2 S MEAL=$O(^TMP($J,"M",DAY,MEAL)) G:MEAL="" C3 S X1=$G(^(MEAL,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4))
"RTN","FHNU8",17,0)
 W !," Meal ",MEAL,?7 D LIS^FHNU2 G C2
"RTN","FHNU8",18,0)
C3 S X1=$G(^TMP($J,"D",DAY,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)),X5=$G(^(5)) W !!," Total",?8 D LIS^FHNU3
"RTN","FHNU8",19,0)
 S NDAY=NDAY+1 I RDA W !," % DRI",?7 D RDA^FHNU9
"RTN","FHNU8",20,0)
 W !," % Kcal",?14 S Z1=$P(X1,"^",4) S:'Z1 Z1=1 F KK=1,3,2 W $J($P(X1,"^",KK)*$S(KK=2:900,1:400)/Z1,7,0)
"RTN","FHNU8",21,0)
 D RAT F K=1:1:20 S Z1=$P(X1,"^",K) I Z1 S $P(T(1),"^",K)=$P(T(1),"^",K)+Z1
"RTN","FHNU8",22,0)
 F K=1:1:13 S Z1=$P(X2,"^",K) I Z1 S $P(T(2),"^",K)=$P(T(2),"^",K)+Z1
"RTN","FHNU8",23,0)
 F K=1:1:33 S:$P(X5,"^",K) $P(T(5),"^",K)=1
"RTN","FHNU8",24,0)
 G C1
"RTN","FHNU8",25,0)
C4 D AVG^FHNU3 W !!,"Day Avg." S X1=T(1),X2=T(2),X5=T(5) D LIS^FHNU3
"RTN","FHNU8",26,0)
 I RDA W !," % DRI",?7 D RDA^FHNU9
"RTN","FHNU8",27,0)
 W !," % Kcal",?14 S Z1=$P(X1,"^",4) S:'Z1 Z1=1 F KK=1,3,2 W $J($P(X1,"^",KK)*$S(KK=2:900,1:400)/Z1,7,0)
"RTN","FHNU8",28,0)
 D RAT W !!,"'+' following a daily value indicates that incomplete data exists.",!
"RTN","FHNU8",29,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHNU8",30,0)
HDR W @IOF,!!?19,"N U T R I E N T   I N T A K E   S T U D Y",!! Q
"RTN","FHNU8",31,0)
RAT W:$P(X1,"^",1) !," Kcal:N Ratio = ",$J(6.25*$P(X1,"^",4)/$P(X1,"^",1),0,0),":1" Q
"RTN","FHNU8",32,0)
PAT R !!,"Enter Patient's Name: ",NAM:DTIME G:'$T!("^"[NAM) KIL
"RTN","FHNU8",33,0)
 I NAM["?"!(NAM'?.ANP)!(NAM["^") W *7,!?5,"Enter Patient's Name to be printed on the report." G PAT
"RTN","FHNU8",34,0)
P1 R !,"Sex: ",SEX:DTIME G:'$T!("^"[SEX) KIL S X=SEX D TR^FH S SEX=X I $P("MALE",SEX,1)'="",$P("FEMALE",SEX,1)'="" W *7,"  Enter M or F" G P1
"RTN","FHNU8",35,0)
 S SEX=$E(SEX,1)
"RTN","FHNU8",36,0)
P2 R !,"Age: ",AGE:DTIME G:'$T!("^"[AGE) KIL I AGE'?1N.N!(AGE<6)!(AGE>124) W !?5,"Enter Age in years between 6 and 124" G P2
"RTN","FHNU8",37,0)
 G F2
"RTN","FHNU8",38,0)
HEAD W:$E(IOST,1,2)="C-" @IOF W !?19,"N U T R I E N T   I N T A K E   S T U D Y",?68,DTP,!
"RTN","FHNU8",39,0)
 W !,"Patient: ",NAM,?40,$S(SEX="M":"Male",1:"Female"),?70,"Age: ",AGE,!
"RTN","FHNU8",40,0)
 W !?9,"Energ    Pro    CHO    Fat    Sod    Pot   Calc   Phos   Chol    H2O"
"RTN","FHNU8",41,0)
 W !?10,"KCal     Gm     Gm     Gm     Mg     Mg     Mg     Mg     Mg     Ml",!
"RTN","FHNU8",42,0)
 S NUT="1047000101710110371001027100113701911270201087011111701222970001057000" Q
"RTN","FHNU9")
0^149^B5847790
"RTN","FHNU9",1,0)
FHNU9 ; HISC/REL/NCA - Nutrient Analysis Utilities ;7/29/94  11:54 
"RTN","FHNU9",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNU9",3,0)
RDA ; Calculate RDA values
"RTN","FHNU9",4,0)
 S ZR=^FH(112.2,RDA,1),KK=1
"RTN","FHNU9",5,0)
R1 S NODE=$E(NUT,KK) Q:'NODE  S ITM=+$E(NUT,KK+1,KK+2) Q:'ITM  S SIZ=$E(NUT,KK+3),Q=+$E(NUT,KK+5,KK+6),KK=KK+7 I 'Q S Q=$J("",SIZ) G R2
"RTN","FHNU9",6,0)
 S Z1=$S(NODE=1:$P(X1,"^",ITM),NODE=2:$P(X2,"^",ITM-20),NODE=3:$P(X3,"^",ITM-38),1:$P(X4,"^",ITM-56))
"RTN","FHNU9",7,0)
 S Q=$J($S($P(ZR,"^",Q):Z1/$P(ZR,"^",Q)*100,1:""),SIZ,0)
"RTN","FHNU9",8,0)
R2 W Q G R1
"RTN","FHNU9",9,0)
TOT ; Calculate total nutrient values
"RTN","FHNU9",10,0)
 K ^TMP($J) S DAY=0
"RTN","FHNU9",11,0)
T1 S DAY=$O(^FHUM(MENU,1,DAY)) Q:DAY<1  S MEAL=0,(D(1),D(2),D(3),D(4),D(5))=""
"RTN","FHNU9",12,0)
T2 S MEAL=$O(^FHUM(MENU,1,DAY,1,MEAL)) I MEAL<1 S ^TMP($J,"D",DAY,1)=D(1),^(2)=D(2),^(4)=D(4),^(5)=D(5) G T1
"RTN","FHNU9",13,0)
 S (ITM,NM)=0,(T(1),T(2),T(3),T(4))=""
"RTN","FHNU9",14,0)
T3 S ITM=$O(^FHUM(MENU,1,DAY,1,MEAL,1,ITM)) I ITM<1 S ^TMP($J,"M",DAY,MEAL,1)=T(1),^(2)=T(2),^(4)=T(4) D ADD G T2
"RTN","FHNU9",15,0)
 S X=^FHUM(MENU,1,DAY,1,MEAL,1,ITM,0),Y(0)=^FHNU(+X,0),Y(1)=$G(^(1)),Y(2)=$G(^(2)),Y(4)=$G(^(4))
"RTN","FHNU9",16,0)
 S AMT=$P(X,"^",2) I TYP="C" S AMT=AMT*$P(Y(0),"^",4)
"RTN","FHNU9",17,0)
 S MUL=AMT/100 F K=1:1:20 S Z1=$P(Y(1),"^",K) S:Z1="" $P(D(5),"^",K)=1 I Z1 S Z1=$J(Z1*MUL,0,3),$P(Y(1),"^",K)=Z1,$P(T(1),"^",K)=$P(T(1),"^",K)+Z1
"RTN","FHNU9",18,0)
 F K=1:1:18 S Z1=$P(Y(2),"^",K) S:Z1="" $P(D(5),"^",K+20)=1 I Z1 S Z1=$J(Z1*MUL,0,3),$P(Y(2),"^",K)=Z1,$P(T(2),"^",K)=$P(T(2),"^",K)+Z1
"RTN","FHNU9",19,0)
 F K=9,10 S Z1=$P(Y(4),"^",K) S:Z1="" $P(D(5),"^",K+56)=1 I Z1 S Z1=$J(Z1*MUL,0,3),$P(Y(4),"^",K)=Z1,$P(T(4),"^",K)=$P(T(4),"^",K)+Z1
"RTN","FHNU9",20,0)
 S NM=NM+1,^TMP($J,"I",DAY,MEAL,NM,0)=$E($P(^FHNU(+X,0),"^",1),1,15)_"^"_AMT
"RTN","FHNU9",21,0)
 S ^TMP($J,"I",DAY,MEAL,NM,1)=Y(1),^(2)=Y(2),^(4)=Y(4) G T3
"RTN","FHNU9",22,0)
ADD ; Calculate Total Nutrient Values For a Day
"RTN","FHNU9",23,0)
 F KK=1:1:20 S Z1=$P(T(1),"^",KK) I Z1 S $P(D(1),"^",KK)=$P(D(1),"^",KK)+Z1
"RTN","FHNU9",24,0)
 F KK=1:1:18 S Z1=$P(T(2),"^",KK) I Z1 S $P(D(2),"^",KK)=$P(D(2),"^",KK)+Z1
"RTN","FHNU9",25,0)
 F KK=9,10 S Z1=$P(T(4),"^",KK) I Z1 S $P(D(4),"^",KK)=$P(D(4),"^",KK)+Z1
"RTN","FHNU9",26,0)
 Q
"RTN","FHNUT")
0^150^B6346803
"RTN","FHNUT",1,0)
FHNUT ; HISC/NCA - Read in the and Calculate 100 Grams ;2/23/00  12:38
"RTN","FHNUT",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHNUT",3,0)
EN1 ; Enter Data
"RTN","FHNUT",4,0)
 K DIC S FHX1=0,DIC="^FHNU(",DIC(0)="EMZ"
"RTN","FHNUT",5,0)
 R !!,"Food Nutrient Name: ",TIT:DTIME G:'$T!("^"[TIT) KIL I TIT'?.ANP W *7,"  ??" G EN1
"RTN","FHNUT",6,0)
 S DIC("S")="I $E($P(^(0),U,1),1)'=""*"""
"RTN","FHNUT",7,0)
 S X=TIT D ^DIC K DIC G:U[X!($D(DTOUT)) EN1 I Y<1 G:TIT["?" EN1 D ADD G KIL:'FHX1,R2
"RTN","FHNUT",8,0)
 S FHX1=+Y I $P($G(^FHNU(FHX1,0)),"^",6)="N" W !!,"  USDA Handbook Values Not Editable" Q
"RTN","FHNUT",9,0)
R2 W !!,"Portion Size: " R X:DTIME G:'$T!("^"[X) KIL
"RTN","FHNUT",10,0)
 I X'?.N.1".".N!(X<0)!(X>9999) W *7,!,"Enter the gram Portion Size.",!,"Enter a number From 1-9999." G R2
"RTN","FHNUT",11,0)
 S POR=X
"RTN","FHNUT",12,0)
STOR K A S ANS="" F L=1:1:66 S A(L)=""
"RTN","FHNUT",13,0)
 F K=1:1:34 S Y=$T(COM+K^FHNU6),Z1=$P(Y,";",3) G:ANS="^" KIL D:Z1 CALC
"RTN","FHNUT",14,0)
 F K=35:1:70 S Y=$T(COM+K^FHNU6),Z1=$P(Y,";",3) G:ANS="^" KIL D:Z1 CALC
"RTN","FHNUT",15,0)
 S (Z1,Z2,Z3,Z4)="" S $P(^FHNU(FHX1,0),"^",4)=POR F K=1:1:20 S $P(Z1,"^",K)=A(K)
"RTN","FHNUT",16,0)
 F K=21:1:38 S $P(Z2,"^",K-20)=A(K)
"RTN","FHNUT",17,0)
 F K=39:1:56 S $P(Z3,"^",K-38)=A(K)
"RTN","FHNUT",18,0)
 F K=57:1:66 S $P(Z4,"^",K-56)=A(K)
"RTN","FHNUT",19,0)
 S ^FHNU(FHX1,1)=Z1,^(2)=Z2 S:Z3'="" ^FHNU(FHX1,3)=Z3 S:Z4'="" ^FHNU(FHX1,4)=Z4
"RTN","FHNUT",20,0)
 G EN1
"RTN","FHNUT",21,0)
KIL G KILL^XUSCLEAN
"RTN","FHNUT",22,0)
ADD ; Add the new entry
"RTN","FHNUT",23,0)
 W !!,"ADD ",TIT," as a New Entry? Y// " R X:DTIME Q:'$T!(X="^")  S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G ADD
"RTN","FHNUT",24,0)
 S X=$E(X,1) Q:X="N"
"RTN","FHNUT",25,0)
 K DIC,DD,DO,X S (DIC,DIE)="^FHNU(",DIC(0)="L",DLAYGO=112
"RTN","FHNUT",26,0)
A L +^FHNU(0) S DA=$P(^FHNU(0),"^",3)+1 I $D(^FHNU(DA)) S $P(^FHNU(0),"^",3)=DA L -^FHNU(0) G A
"RTN","FHNUT",27,0)
 S X=TIT D FILE^DICN L -^FHNU(0) S FHX1=+Y K DIC,DLAYGO
"RTN","FHNUT",28,0)
 S DA=+Y,DR=".01;2;4:5;7;98;99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=112 D ^DIE S:$D(DTOUT)!($D(Y))!('$D(DA)) FHX1=0 K DA,DIE,DR,Y
"RTN","FHNUT",29,0)
 Q
"RTN","FHNUT",30,0)
CALC ; Read in Food Nutrient and Calculate 100 gms
"RTN","FHNUT",31,0)
 W !,$P(Y,";",4)_": " R X:DTIME I '$T S ANS="^" Q
"RTN","FHNUT",32,0)
 I X["^" W *7,"  Required Field." G CALC
"RTN","FHNUT",33,0)
 I X'?.N.1".".N!(X<0)!(X>99999) W *7,"  Enter a number from 0-99999" G CALC
"RTN","FHNUT",34,0)
 I X'="" S DEC=$S(Z1>64:2,1:3),A(Z1)=X/POR*100,A(Z1)=$S(A(Z1):+$J(A(Z1),0,DEC),1:0) W "... ",A(Z1)
"RTN","FHNUT",35,0)
 Q
"RTN","FHOMAPI")
0^151^B1199374
"RTN","FHOMAPI",1,0)
FHOMAPI ;Hines OIFO/RTK OUTPATIENT MEALS/CPRS API's  ;8/26/03  10:15
"RTN","FHOMAPI",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMAPI",3,0)
 ;
"RTN","FHOMAPI",4,0)
AUTH(DUZ) ;Check whether USER (DUZ) has FHAUTH key: 1=YES, 0=NO
"RTN","FHOMAPI",5,0)
 N FHAU S FHAU=0
"RTN","FHOMAPI",6,0)
 I $D(^XUSEC("FHAUTH",DUZ)) S FHAU=1
"RTN","FHOMAPI",7,0)
 Q FHAU
"RTN","FHOMAPI",8,0)
DIETLST ;Build list of allowable outpatient diets from site parameters
"RTN","FHOMAPI",9,0)
 K FHDIET,SPDIETS S SPDIETS=$P($G(^FH(119.9,1,0)),U,2,6)
"RTN","FHOMAPI",10,0)
 F A=1:1:5 S AB=$P(SPDIETS,U,A) I AB'="" S FHN=$P($G(^FH(111,AB,0)),U,1),FHDIET(A)=AB_"^"_FHN
"RTN","FHOMAPI",11,0)
 Q
"RTN","FHOMAPI",12,0)
MAXDAYS(FHLOC) ;Returns max number of days a recurring meal may be ordered
"RTN","FHOMAPI",13,0)
 N FHMAXD S FHMAXD=365 I FHLOC="" Q FHMAXD
"RTN","FHOMAPI",14,0)
 S FHLOC=$O(^FH(119.6,"AL",FHLOC,""))
"RTN","FHOMAPI",15,0)
 I 'FHLOC Q FHMAXD
"RTN","FHOMAPI",16,0)
 S FHMAXD=$P($G(^FH(119.6,FHLOC,1)),U,2) I FHMAXD="" S FHMAXD=365
"RTN","FHOMAPI",17,0)
 Q FHMAXD
"RTN","FHOMAPI",18,0)
NFSLOC(FHLOC) ;Returns NFS location name given HOSP LOCATION pointer
"RTN","FHOMAPI",19,0)
 I FHLOC="" Q ""
"RTN","FHOMAPI",20,0)
 S FHLOC=$O(^FH(119.6,"AL",FHLOC,""))
"RTN","FHOMAPI",21,0)
 I 'FHLOC Q ""
"RTN","FHOMAPI",22,0)
 S FHLNAME=$P($G(^FH(119.6,FHLOC,0)),U,1)
"RTN","FHOMAPI",23,0)
 Q FHLNAME
"RTN","FHOMDMP")
0^351^B13156206
"RTN","FHOMDMP",1,0)
FHOMDMP ; HISC/REL/NCA/JH/RK/FAI - Patient Data Log ;10/19/04  13:26
"RTN","FHOMDMP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMDMP",3,0)
BEGIN S FHALL=1 D ^FHOMDPA G:'DFN KIL G:'FHDFN KIL
"RTN","FHOMDMP",4,0)
 D STDATE^FHOMUTL S SDT=STDT I STDT="" Q
"RTN","FHOMDMP",5,0)
 D ENDATE^FHOMUTL I ENDT="" Q
"RTN","FHOMDMP",6,0)
 D P0
"RTN","FHOMDMP",7,0)
 Q
"RTN","FHOMDMP",8,0)
OP S OP="" F  S OP=$O(^FHPT(FHDFN,"OP",OP)) Q:OP=""  W !,"OUPT  "_OP
"RTN","FHOMDMP",9,0)
 Q
"RTN","FHOMDMP",10,0)
P0 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHOMDMP",11,0)
 I $D(IO("Q")) S FHPGM="F0^FHOMDMP",FHLST="FHDFN^DFN^PID^OPSD^STDT^ENDT" D EN2^FH G KIL
"RTN","FHOMDMP",12,0)
 U IO D F0 D ^%ZISC K %ZIS,IOP G FHOMDMP
"RTN","FHOMDMP",13,0)
 ;*************************************************
"RTN","FHOMDMP",14,0)
 ; Process Printing Patient Data log
"RTN","FHOMDMP",15,0)
 ;****D DISP^FHOMRR1
"RTN","FHOMDMP",16,0)
 Q
"RTN","FHOMDMP",17,0)
F0 D NOW^%DTC S DT=%\1,DTP=% D DTP^FH S NOW=DTP,S1=$S(IOST?1"C".E:IOSL,1:IOSL-6)
"RTN","FHOMDMP",18,0)
 S Y(0)=^DPT(DFN,0),NAM=$P(Y(0),"^",1),SEX=$P(Y(0),"^",2),DOB=$P(Y(0),"^",3),PID=$G(PID)
"RTN","FHOMDMP",19,0)
 S AGE=$E(DT,1,3)-$E(DOB,1,3)-($E(DT,4,7)<$E(DOB,4,7)),PG=0,QT="",PRTFM=STDT_" TO  "_ENDT
"RTN","FHOMDMP",20,0)
 ;W !,"****"_INP
"RTN","FHOMDMP",21,0)
 ; S PRTFM=$P($G(^FHPT(FHDFN,"A",INP,0)),U,1) 
"RTN","FHOMDMP",22,0)
 ;Q:$G(PRTFM)=""  S DTP=PRTFM D DTP^FH S PRTFM=DTP
"RTN","FHOMDMP",23,0)
 ;S:PRTFM="" PRTFM="Admission Date" D HDR
"RTN","FHOMDMP",24,0)
 S DTP=STDT D DTP^FH S SDT1=DTP
"RTN","FHOMDMP",25,0)
 S DTP=ENDT D DTP^FH S EDT1=DTP
"RTN","FHOMDMP",26,0)
 S PRTFM=SDT1_"  TO  "_EDT1
"RTN","FHOMDMP",27,0)
 S LN="",$P(LN,"-",80)=""
"RTN","FHOMDMP",28,0)
 D HDR
"RTN","FHOMDMP",29,0)
 ;W !!,LN,!?28,"P A T I E N T   D A T A"
"RTN","FHOMDMP",30,0)
 D ALG^FHCLN W !!,"Allergies: " S ALG=$S(ALG="":"None on file",1:ALG) D LNE
"RTN","FHOMDMP",31,0)
 W !!,"Food Preferences Currently on file:",!!?26,"Likes",?58,"Dislikes",!
"RTN","FHOMDMP",32,0)
 K N S P1=1 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D SP
"RTN","FHOMDMP",33,0)
 W ! S (M1,MM)="",L=0 F  S M1=$O(N(M1)) Q:M1=""  I $D(N(M1)) W $P(M1,"~",2) D  S MM=M1
"RTN","FHOMDMP",34,0)
 .  S (P1,P2)=0 F  S:P1'="" P1=$O(N(M1,"L",P1)) S X1=$S(P1>0:N(M1,"L",P1),1:"") S:P2'="" P2=$O(N(M1,"D",P2)) S X2=$S(P2>0:N(M1,"D",P2),1:"") Q:P1=""&(P2="")  D W0 W:MM'=M1 !
"RTN","FHOMDMP",35,0)
 .  Q
"RTN","FHOMDMP",36,0)
 I $O(N(""))="" W !!,"No Food Preferences on file",! G ^FHDMP1
"RTN","FHOMDMP",37,0)
 W ! K L,N,M,M1,M2 G ^FHDMP1
"RTN","FHOMDMP",38,0)
 ;************************************************
"RTN","FHOMDMP",39,0)
W0 I X1'="" W ?12 S X=X1 D W1 S X1=X
"RTN","FHOMDMP",40,0)
 I X2'="" W ?46 S X=X2 D W1 S X2=X
"RTN","FHOMDMP",41,0)
 Q:X1=""&(X2="")  S:$Y'<S1 L=1 D:$Y'<S1 HDR G:QT="^" KIL W ! W:L ! S L=0 G W0
"RTN","FHOMDMP",42,0)
W1 I $L(X)<34 W X S X="" Q
"RTN","FHOMDMP",43,0)
 F KK=35:-1:1 Q:$E(X,KK-1,KK)=", "
"RTN","FHOMDMP",44,0)
 W $E(X,1,KK-2) S X=$E(X,KK+1,999) Q
"RTN","FHOMDMP",45,0)
SP S M=$P(X,"^",2) S:M="A" M="BNE" S Z=$G(^FH(115.2,+X,0)),L1=$P(Z,"^",1),KK=$P(Z,"^",2),M1="",DAS=$P(X,"^",4)
"RTN","FHOMDMP",46,0)
 I KK="L" S Q=$P(X,"^",3),L1=$S(Q:Q,1:1)_" "_L1
"RTN","FHOMDMP",47,0)
 I M="BNE" S M1="1~All Meals" G SP1
"RTN","FHOMDMP",48,0)
 S Z1=$E(M,1) I Z1'="" S M1=$S(Z1="B":"2~Break",Z1="N":"3~Noon",1:"4~Even")
"RTN","FHOMDMP",49,0)
 S Z1=$E(M,2) I Z1'="" S M1=M1_","_$S(Z1="B":"Break",Z1="N":"Noon",1:"Even")
"RTN","FHOMDMP",50,0)
SP1 S:'$D(N(M1,KK,P1)) N(M1,KK,P1)="" I $L(N(M1,KK,P1))+$L(L1)<255 S N(M1,KK,P1)=N(M1,KK,P1)_$S(N(M1,KK,P1)="":"",1:", ")_L1_$S(DAS="Y":" (D)",1:"")
"RTN","FHOMDMP",51,0)
 E  S:'$D(N(M1,KK,K)) N(M1,KK,K)="" S N(M1,KK,K)=L1_$S(DAS="Y":" (D)",1:"") S P1=K
"RTN","FHOMDMP",52,0)
 Q
"RTN","FHOMDMP",53,0)
LNE ; Break Line if longer than 65 chars
"RTN","FHOMDMP",54,0)
 I $L(ALG)<66 W ALG Q
"RTN","FHOMDMP",55,0)
 F L=67:-1:1 Q:$E(ALG,L-1,L)=", "
"RTN","FHOMDMP",56,0)
 W $E(ALG,1,L-2)
"RTN","FHOMDMP",57,0)
 S ALG=$E(ALG,L+1,999)
"RTN","FHOMDMP",58,0)
 Q:ALG=""  W !?11
"RTN","FHOMDMP",59,0)
 G LNE
"RTN","FHOMDMP",60,0)
HDR ; Print Header
"RTN","FHOMDMP",61,0)
 S QT="" I PG,IOST?1"C".E W:$X>1 ! W *7 R QT:DTIME S:'$T QT="^" Q:QT="^"
"RTN","FHOMDMP",62,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHOMDMP",63,0)
 W !,?20,"P  A  T  I  E  N  T   D  A  T  A   L  O  G",!
"RTN","FHOMDMP",64,0)
 W !,"Date Range:  ",PRTFM,?62,NOW,!!,PID,?17,NAM,?49,$S(SEX="M":"Male",SEX="F":"Female",1:""),?58,"Age ",AGE,?72,"Page ",PG Q
"RTN","FHOMDMP",65,0)
DTP ; Printable Date/Time
"RTN","FHOMDMP",66,0)
 Q:Y<1  W $J(+$E(Y,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(Y,4,5))_"-"_$E(Y,2,3)
"RTN","FHOMDMP",67,0)
 I Y["." S %=+$E(Y_"0",9,10) W $J($S(%>12:%-12,1:%),3)_":"_$E(Y_"000",11,12)_$S(%<12:"am",%<24:"pm",1:"m")
"RTN","FHOMDMP",68,0)
 K % Q
"RTN","FHOMDMP",69,0)
KIL ; Final variable kill
"RTN","FHOMDMP",70,0)
 G KILL^XUSCLEAN
"RTN","FHOMDPA")
0^152^B5284156
"RTN","FHOMDPA",1,0)
FHOMDPA ;Hines OIFO/RTK OUTPATIENT LOOK-UP ;12/3/02  09:46
"RTN","FHOMDPA",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMDPA",3,0)
F1 ;
"RTN","FHOMDPA",4,0)
 ; FHALL=1 - Lookup INPATIENTS or OUTPATIENTS
"RTN","FHOMDPA",5,0)
 ; FHALL=0 - Lookup OUTPATIENTS only (to lookup INPATS only, use FHDPA)
"RTN","FHOMDPA",6,0)
 ; FHDFN=IEN in file #115, FHZ115=.01 in file #115 (ie P27 or N1866)
"RTN","FHOMDPA",7,0)
 ; DFN=IEN in file #2 (or NULL), IEN200=IEN in file #200 (or NULL)
"RTN","FHOMDPA",8,0)
 ;
"RTN","FHOMDPA",9,0)
 S (FHZ115,FHDFN,IEN200)="",FHALL=$G(FHALL)
"RTN","FHOMDPA",10,0)
 R !!,"Select Patient (Name or SSN): ",X:DTIME I '$T!(U[X) D NOP Q
"RTN","FHOMDPA",11,0)
 S XRESP=X
"RTN","FHOMDPA",12,0)
 I XRESP=" " S FHDFN=$G(^DISV(DUZ,"^FHPT(")) I FHDFN'="" D PATNAME^FHOMUTL W FHPTNM K:DFN="" FHALL Q:DFN=""  S Y=DFN D FX1 K FHALL Q
"RTN","FHOMDPA",13,0)
 K DIC S DIC=2,DIC(0)="EZM" D ^DIC K DIC I U[X D NOP Q
"RTN","FHOMDPA",14,0)
 S FHYIEN=+Y,DFN=FHYIEN
"RTN","FHOMDPA",15,0)
FX1 I FHALL=1,$D(^DPT(DFN,.1)) D ENOM^FHDPA K FHALL Q
"RTN","FHOMDPA",16,0)
 I $D(^DPT(DFN,.1)) D MSG K FHALL Q
"RTN","FHOMDPA",17,0)
 I DFN>0 D VER I Y="^" K FHALL Q
"RTN","FHOMDPA",18,0)
 I Y=1 S FHZ115="P"_DFN D ADD K FHALL Q
"RTN","FHOMDPA",19,0)
FF11 ;
"RTN","FHOMDPA",20,0)
 S X=XRESP K DIC S DIC=200,DIC(0)="EQZM" D ^DIC K DIC I U[X D NOP Q
"RTN","FHOMDPA",21,0)
 S FHYIEN=+Y,IEN200=FHYIEN
"RTN","FHOMDPA",22,0)
 I IEN200>0 D VER I Y="^"!(Y=0) K FHALL Q
"RTN","FHOMDPA",23,0)
 I IEN200<1 W !!,"NOT FOUND IN 2 OR 200" D F1 K FHALL Q
"RTN","FHOMDPA",24,0)
 S FHZ115="N"_IEN200 D ADD
"RTN","FHOMDPA",25,0)
 K FHALL Q
"RTN","FHOMDPA",26,0)
VER ;
"RTN","FHOMDPA",27,0)
 W ! S DIR(0)="YA",DIR("A")="Correct? ",DIR("B")="Y" D ^DIR
"RTN","FHOMDPA",28,0)
 Q
"RTN","FHOMDPA",29,0)
ADD ; ADD ENTRY IF NOT ALREADY IN FILE 115
"RTN","FHOMDPA",30,0)
 D CHECK I FLAG=1 Q
"RTN","FHOMDPA",31,0)
 K DD,DO S DIC="^FHPT(",DIC(0)="L",X=FHZ115 D FILE^DICN
"RTN","FHOMDPA",32,0)
 S FHDFN=$O(^FHPT("B",FHZ115,"")) I FHDFN="" Q
"RTN","FHOMDPA",33,0)
 S ^DISV(DUZ,"^FHPT(")=FHDFN  ;save SPACEBAR/RETURN value
"RTN","FHOMDPA",34,0)
 S FHPTTYP=$E(FHZ115,1),FHPTR=$E(FHZ115,2,99)
"RTN","FHOMDPA",35,0)
 I FHPTTYP="P" D
"RTN","FHOMDPA",36,0)
 .K DIE S DA=FHDFN,DIE="^FHPT(",DR="14////^S X=FHPTR;15///@" D ^DIE
"RTN","FHOMDPA",37,0)
 I FHPTTYP="N" D
"RTN","FHOMDPA",38,0)
 .K DIE S DA=FHDFN,DIE="^FHPT(",DR="15////^S X=FHPTR;14///@" D ^DIE
"RTN","FHOMDPA",39,0)
 Q
"RTN","FHOMDPA",40,0)
CHECK ; CHECK IF ALREADY IN FILE 115
"RTN","FHOMDPA",41,0)
 S FLAG=0,FHDFN=""
"RTN","FHOMDPA",42,0)
 I $D(^FHPT("B",FHZ115)) D
"RTN","FHOMDPA",43,0)
 .S FLAG=1,FHDFN=$O(^FHPT("B",FHZ115,""))
"RTN","FHOMDPA",44,0)
 .S ^DISV(DUZ,"^FHPT(")=FHDFN  ;save SPACEBAR/RETURN value
"RTN","FHOMDPA",45,0)
 .I $E(FHZ115,1)="P" S DFN=$E(FHZ115,2,99),IEN200=""
"RTN","FHOMDPA",46,0)
 .I $E(FHZ115,1)="N" S IEN200=$E(FHZ115,2,99),DFN=""
"RTN","FHOMDPA",47,0)
 Q
"RTN","FHOMDPA",48,0)
MSG ;
"RTN","FHOMDPA",49,0)
 W !!,"Currently admitted as an Inpatient." D NOP
"RTN","FHOMDPA",50,0)
 Q
"RTN","FHOMDPA",51,0)
NOP ;
"RTN","FHOMDPA",52,0)
 S FHDFN=0,DFN=0,Y=-1 K FHALL Q
"RTN","FHOMDPA",53,0)
 Q
"RTN","FHOMELT")
0^153^B2893206
"RTN","FHOMELT",1,0)
FHOMELT ;Hines OIFO/RTK OUTPATIENT MEALS LIST EARLY/LATE TRAYS  ;5/10/04  12:35
"RTN","FHOMELT",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMELT",3,0)
 ;
"RTN","FHOMELT",4,0)
 ; FHP=PTR to COMM OFFICE, DTE=DATE in FILEMAN FORMAT, MEAL=B,N,E or A
"RTN","FHOMELT",5,0)
 ;K ^TMP($J)
"RTN","FHOMELT",6,0)
 S X1=DTE,X2=-1 D C^%DTC S FHRMDTE=X,X1=DTE,X2=1 D C^%DTC S FHDTQ=X
"RTN","FHOMELT",7,0)
 F FHOMDT=FHRMDTE:0 S FHOMDT=$O(^FHPT("RM",FHOMDT)) Q:FHOMDT=""!(FHOMDT'<FHDTQ)  D
"RTN","FHOMELT",8,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHOMDT,FHDFN)) Q:FHDFN=""  D
"RTN","FHOMELT",9,0)
 ..F FHRNUM=0:0 S FHRNUM=$O(^FHPT("RM",FHOMDT,FHDFN,FHRNUM)) Q:FHRNUM=""  D
"RTN","FHOMELT",10,0)
 ...I '$D(^FHPT(FHDFN,"OP",FHRNUM,2)) Q
"RTN","FHOMELT",11,0)
 ...S FHELN0=$G(^FHPT(FHDFN,"OP",FHRNUM,0))
"RTN","FHOMELT",12,0)
 ...S FHELN2=$G(^FHPT(FHDFN,"OP",FHRNUM,2))
"RTN","FHOMELT",13,0)
 ...I $P(FHELN0,U,15)="C" Q
"RTN","FHOMELT",14,0)
 ...I $P(FHELN2,U,6)="C" Q
"RTN","FHOMELT",15,0)
 ...S FHLOC=$P(FHELN0,U,3) I FHLOC="" Q
"RTN","FHOMELT",16,0)
 ...S FHCOMM=$P($G(^FH(119.6,FHLOC,0)),U,8) I FHCOMM="" Q
"RTN","FHOMELT",17,0)
 ...S FHMEAL=$P(FHELN0,U,4) I MEAL'="A",MEAL'=FHMEAL Q
"RTN","FHOMELT",18,0)
 ...I FHP>0,FHP'=FHCOMM Q
"RTN","FHOMELT",19,0)
 ...S FHMLTM=$P(FHELN2,U,1),FHBAG=$P(FHELN2,U,2)
"RTN","FHOMELT",20,0)
 ...I $P($G(^FH(119.6,FHLOC,1)),U,4)="Y" D DIETPAT^FHOMRR1 S FHDIET=FHDIETP
"RTN","FHOMELT",21,0)
 ...I $P($G(^FH(119.6,FHLOC,1)),U,4)'="Y" S FHDIET=$P(FHELN0,U,2) I FHDIET'="" S FHDIET=$P($G(^FH(111,FHDIET,0)),U,1)
"RTN","FHOMELT",22,0)
 ...D PATNAME^FHOMUTL
"RTN","FHOMELT",23,0)
 ...S ^TMP($J,FHMEAL,FHMLTM_"~"_FHPTNM)=FHLOC_"^"_FHDFN_"^"_FHBAG_"^"_FHDIET
"RTN","FHOMELT",24,0)
 ...Q
"RTN","FHOMGP1")
0^154^B5582686
"RTN","FHOMGP1",1,0)
FHOMGP1 ;Hines OIFO/RTK PRINT GUEST MEALS LIST  ;6/30/03  15:45
"RTN","FHOMGP1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMGP1",3,0)
 ;
"RTN","FHOMGP1",4,0)
EN S FHSRTLOC="" D STDATE^FHOMUTL I STDT="" Q
"RTN","FHOMGP1",5,0)
 D ENDATE^FHOMUTL I ENDT="" Q
"RTN","FHOMGP1",6,0)
 ;D NOW^%DTC I STDT>X W !!,"No future dates allowed.",! D EN Q
"RTN","FHOMGP1",7,0)
 K DIR S DIR("A")="Sort by Location or Print All? "
"RTN","FHOMGP1",8,0)
 S DIR(0)="SAO^L:Location;A:All",DIR("B")="A" D ^DIR Q:$D(DIRUT)
"RTN","FHOMGP1",9,0)
 Q:$D(DIRUT)  S FHSORT=Y
"RTN","FHOMGP1",10,0)
 I FHSORT="L" D OUTLOC^FHOMUTL S FHSRTLOC=FHLOC I FHSRTLOC="" Q
"RTN","FHOMGP1",11,0)
 D DEV Q
"RTN","FHOMGP1",12,0)
DEV ;get device and set up queue
"RTN","FHOMGP1",13,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHOMGP1",14,0)
 I '$D(IO("Q")) U IO D LIST,^%ZISC,END Q
"RTN","FHOMGP1",15,0)
 S ZTRTN="LIST^FHOMGP1"
"RTN","FHOMGP1",16,0)
 S ZTSAVE("STDT")="",ZTSAVE("ENDT")="",ZTSAVE("FHDFN")=""
"RTN","FHOMGP1",17,0)
 S ZTSAVE("FHSORT")="",ZTSAVE("FHSRTLOC")=""
"RTN","FHOMGP1",18,0)
 S ZTDESC="Guest Meals Display" D ^%ZTLOAD
"RTN","FHOMGP1",19,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHOMGP1",20,0)
 D END Q
"RTN","FHOMGP1",21,0)
LIST ;
"RTN","FHOMGP1",22,0)
 S EX="",NUM=0,ENDT=ENDT_.99 D HDR
"RTN","FHOMGP1",23,0)
 F FHGMDT=STDT:0 S FHGMDT=$O(^FHPT("GM",FHGMDT)) Q:FHGMDT'>0!(FHGMDT>ENDT)!(EX=U)  D
"RTN","FHOMGP1",24,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHGMDT,FHDFN)) Q:FHDFN'>0!(EX=U)  D
"RTN","FHOMGP1",25,0)
 ..S NUM=NUM+1,FHNODE=$G(^FHPT(FHDFN,"GM",FHGMDT,0))
"RTN","FHOMGP1",26,0)
 ..S FHCL=$P(FHNODE,U,2),FHML=$P(FHNODE,U,3),FHCH=$P(FHNODE,U,4)
"RTN","FHOMGP1",27,0)
 ..S FHLPT=$P(FHNODE,U,5) I FHLPT="" Q
"RTN","FHOMGP1",28,0)
 ..S FHLOC=$E($P($G(^FH(119.6,FHLPT,0)),U,1),1,10)
"RTN","FHOMGP1",29,0)
 ..I FHSORT="L",FHLPT'=FHSRTLOC Q
"RTN","FHOMGP1",30,0)
 ..S FHCL=$S(FHCL="E":" EMPLOYEE",FHCL="G":"GRATUITOUS",FHCL="O":"   OOD",FHCL="P":"   PAID",1:"VOLUNTEER")
"RTN","FHOMGP1",31,0)
 ..D PATNAME^FHOMUTL W !?2,$E(FHPTNM,1,26)
"RTN","FHOMGP1",32,0)
 ..S FHD=$$FMTE^XLFDT(FHGMDT,"P") W ?30,$E(FHD,1,12)
"RTN","FHOMGP1",33,0)
 ..W ?44,FHLOC,?57,FHML,?62,FHCL,?74,FHCH
"RTN","FHOMGP1",34,0)
 ..I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHOMGP1",35,0)
 .Q
"RTN","FHOMGP1",36,0)
 I NUM=0 W !!,"NO GUEST MEALS FOR THIS DATE RANGE" Q
"RTN","FHOMGP1",37,0)
 Q
"RTN","FHOMGP1",38,0)
END ;
"RTN","FHOMGP1",39,0)
 K FHGMDT,FHML,FHCL,FHCH
"RTN","FHOMGP1",40,0)
 Q
"RTN","FHOMGP1",41,0)
PG ;
"RTN","FHOMGP1",42,0)
 Q:$O(^FHPT(FHDFN,"GM",FHGMDT))'>0
"RTN","FHOMGP1",43,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHOMGP1",44,0)
 D HDR Q
"RTN","FHOMGP1",45,0)
HDR ;
"RTN","FHOMGP1",46,0)
 W:$Y @IOF
"RTN","FHOMGP1",47,0)
 W !?5,"G U E S T   M E A L   L I S T"
"RTN","FHOMGP1",48,0)
 W !!?9,"Name",?34,"Date",?45,"Location",?56,"Meal"
"RTN","FHOMGP1",49,0)
 W ?64,"Class",?73,"Charge"
"RTN","FHOMGP1",50,0)
 W !?2,"==========================",?30,"============",?44,"=========="
"RTN","FHOMGP1",51,0)
 W ?56,"====",?62,"=========",?73,"======"
"RTN","FHOMGP1",52,0)
 Q
"RTN","FHOMGR1")
0^155^B6486886
"RTN","FHOMGR1",1,0)
FHOMGR1 ;Hines OIFO/RTK GUEST MEALS REQUEST MEAL  ;4/17/03  09:45
"RTN","FHOMGR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMGR1",3,0)
 ;
"RTN","FHOMGR1",4,0)
 D NOW^%DTC S STDT=X,FHDSDT=$$FMTE^XLFDT(STDT,"P") W !!,FHDSDT
"RTN","FHOMGR1",5,0)
 S FHMSG1="G" D ^FHOMDPA I FHDFN="" Q
"RTN","FHOMGR1",6,0)
 I '$D(^FHPT(FHDFN,0)) W !!,"UNKNOWN SELECTION !" Q
"RTN","FHOMGR1",7,0)
CLASS ;Prompt for classification
"RTN","FHOMGR1",8,0)
 W ! K DIR,DIC S DIR("A")="Select Classification: "
"RTN","FHOMGR1",9,0)
 S DIR(0)="SAO^E:Employee;G:Gratuitous;O:OOD;P:Paid;V:Volunteer"
"RTN","FHOMGR1",10,0)
 D ^DIR I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMGR1",11,0)
 I Y'=-1 S FHCLASS=Y
"RTN","FHOMGR1",12,0)
LOC ;Prompt for location
"RTN","FHOMGR1",13,0)
 D OUTLOC^FHOMUTL I FHLOC="" D EXMSG^FHOMUTL Q
"RTN","FHOMGR1",14,0)
 S FHCOMM=$P($G(^FH(119.6,FHLOC,0)),U,8)
"RTN","FHOMGR1",15,0)
MEAL ;Prompt for meal
"RTN","FHOMGR1",16,0)
 K DIR,DIC S DIR("A")="Select Meal: "
"RTN","FHOMGR1",17,0)
 S DIR(0)="SAO^B:Breakfast;N:Noon;E:Evening"
"RTN","FHOMGR1",18,0)
 D ^DIR I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMGR1",19,0)
 I Y'=-1 S FHMEAL=Y
"RTN","FHOMGR1",20,0)
DIET ;Stuff diet
"RTN","FHOMGR1",21,0)
 S FHDIET=$P($G(^FH(119.9,1,0)),U,2)
"RTN","FHOMGR1",22,0)
 I FHDIET="" W !!,"NO DEFAULT OUTPATIENT DIET SET!!",! Q
"RTN","FHOMGR1",23,0)
CHARGE ;Get charge
"RTN","FHOMGR1",24,0)
 S FHCHAR=""
"RTN","FHOMGR1",25,0)
 S F=$S(FHCLASS="E":12,FHCLASS="P":13,FHCLASS="O":14,FHCLASS="V":15,1:16)
"RTN","FHOMGR1",26,0)
 S FHYN=$P($G(^FH(119.9,1,0)),U,F) I FHYN'="Y" W ! D SET1 Q
"RTN","FHOMGR1",27,0)
 S F=$S(FHCLASS="E":21,FHCLASS="P":24,FHCLASS="O":27,FHCLASS="V":30,1:33)
"RTN","FHOMGR1",28,0)
 S FHP=F+$S(FHMEAL="B":0,FHMEAL="N":1,1:2)
"RTN","FHOMGR1",29,0)
 S FHCHAR=$P($G(^FH(119.9,1,0)),U,FHP)
"RTN","FHOMGR1",30,0)
 W !!,"Payment amount = $",FHCHAR,!
"RTN","FHOMGR1",31,0)
SET1 K DIR S DIR("A")="Is this correct?: ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMGR1",32,0)
 S CONT=Y I CONT'=1 D EXMSG^FHOMUTL Q
"RTN","FHOMGR1",33,0)
 S FHGML=1 D SMGM^FHOMRO2 I SKIP=1 Q
"RTN","FHOMGR1",34,0)
SETNODE ;
"RTN","FHOMGR1",35,0)
 S MLT=$S(FHMEAL="B":".08",FHMEAL="N":".13",1:".18")
"RTN","FHOMGR1",36,0)
 S STDTIM=STDT_MLT
"RTN","FHOMGR1",37,0)
 I $D(^FHPT(FHDFN,"GM","B",STDTIM)) D MESSAGE Q
"RTN","FHOMGR1",38,0)
 S Y=STDTIM K DIC,DO S DA(1)=FHDFN,DIC="^FHPT("_DA(1)_",""GM"","
"RTN","FHOMGR1",39,0)
 S DIC(0)="L",DIC("P")=$P(^DD(115,18,0),U,2),X=+Y,DINUM=X
"RTN","FHOMGR1",40,0)
 D FILE^DICN I Y=-1 Q
"RTN","FHOMGR1",41,0)
 K DIE S DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""GM"","
"RTN","FHOMGR1",42,0)
 S DA=+Y,FHDA=DA
"RTN","FHOMGR1",43,0)
 S DR="1////^S X=FHCLASS;2////^S X=FHMEAL;3////^S X=FHCHAR;4////^S X=FHLOC;5////^S X=FHDIET"
"RTN","FHOMGR1",44,0)
 D ^DIE,OKMSG^FHOMUTL
"RTN","FHOMGR1",45,0)
 S FHZN=$G(^FHPT(FHDFN,"GM",FHDA,0))
"RTN","FHOMGR1",46,0)
 S FHACT="O",FHOPTY="G",FHOPDT=STDT D SETGM^FHOMRO2 ;set event
"RTN","FHOMGR1",47,0)
 Q
"RTN","FHOMGR1",48,0)
MESSAGE ;
"RTN","FHOMGR1",49,0)
 D PATNAME^FHOMUTL S FHPREDT=$$FMTE^XLFDT(STDT,"P")
"RTN","FHOMGR1",50,0)
 W !!?3,FHPTNM," ALREADY HAS A "
"RTN","FHOMGR1",51,0)
 W $S(FHMEAL="B":"BREAKFAST",FHMEAL="N":"NOON",1:"EVENING")
"RTN","FHOMGR1",52,0)
 W " GUEST MEAL ORDERED FOR ",FHPREDT
"RTN","FHOMGR1",53,0)
 Q
"RTN","FHOMIP")
0^156^B2144039
"RTN","FHOMIP",1,0)
FHOMIP ;Hines OIFO/RTK OUTPATIENT ISOLATION/PRECAUTION EDIT  ;9/22/03  11:15
"RTN","FHOMIP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMIP",3,0)
 ;
"RTN","FHOMIP",4,0)
 D ^FHOMDPA I FHDFN="" Q
"RTN","FHOMIP",5,0)
 I '$D(^FHPT(FHDFN,0)) W !!,"UNKNOWN SELECTION !" Q
"RTN","FHOMIP",6,0)
 S FHIPBEF=$P($G(^FHPT(FHDFN,0)),U,5)
"RTN","FHOMIP",7,0)
 S DIE="^FHPT(",DA=FHDFN,DR="19" D ^DIE
"RTN","FHOMIP",8,0)
 S FHIP=$P($G(^FHPT(FHDFN,0)),U,5) I FHIP=FHIPBEF Q
"RTN","FHOMIP",9,0)
 I FHIP'="" S FHIP=$P($G(^FH(119.4,FHIP,0)),U,1)
"RTN","FHOMIP",10,0)
 I FHIP="" S FHIP="Cancelled"
"RTN","FHOMIP",11,0)
 S FHACT="O",FHOPTY="I",(FHDIET,FHLOC,FHMEAL)="" D SETORX^FHOMRO2
"RTN","FHOMIP",12,0)
 Q
"RTN","FHOMIP",13,0)
HL7SET ;
"RTN","FHOMIP",14,0)
 ; Use this to set isolations/precautions received from CPRS via HL7 msg
"RTN","FHOMIP",15,0)
 ; segments.  Just set the necessary variables.
"RTN","FHOMIP",16,0)
 S FHOBR=$P(FHX,"|",13),FHIP=$P(FHOBR,"^",4)
"RTN","FHOMIP",17,0)
 I '$D(^FH(119.4,FHIP,0)) S TXT="Invalid I/P" D GETOR^FHWOR,ERR^FHOMWOR Q
"RTN","FHOMIP",18,0)
 S DIE="^FHPT(",DA=FHDFN,DR="19////^S X=FHIP;20////^S X=FHORN" D ^DIE
"RTN","FHOMIP",19,0)
 S FILL="I;"_FHIP
"RTN","FHOMIP",20,0)
 D SEND^FHWOR
"RTN","FHOMIP",21,0)
 S FHIP=$P($G(^FH(119.4,FHIP,0)),U,1)
"RTN","FHOMIP",22,0)
 S FHACT="O",FHOPTY="I",(FHDIET,FHLOC,FHMEAL)="" D SETORX^FHOMRO2
"RTN","FHOMIP",23,0)
 Q
"RTN","FHOMIP",24,0)
CAN ;
"RTN","FHOMIP",25,0)
 S DIE="^FHPT(",DA=FHDFN,DR="19////@;20////@" D ^DIE
"RTN","FHOMIP",26,0)
 S FHACT="O",FHOPTY="I",FHIP="Cancelled",(FHDIET,FHLOC,FHMEAL)=""
"RTN","FHOMIP",27,0)
 D SETORX^FHOMRO2
"RTN","FHOMIP",28,0)
 Q
"RTN","FHOMPP")
0^157^B15901336
"RTN","FHOMPP",1,0)
FHOMPP ; OIFO/RTK - Patient Profile for Outpatients ;6/23/03  1:04
"RTN","FHOMPP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMPP",3,0)
 D DEV Q
"RTN","FHOMPP",4,0)
DEV ;get device and set up queue
"RTN","FHOMPP",5,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHOMPP",6,0)
 I '$D(IO("Q")) U IO D DISP,^%ZISC,END Q
"RTN","FHOMPP",7,0)
 S ZTRTN="DISP^FHOMPP"
"RTN","FHOMPP",8,0)
 S ZTSAVE("FHDFN")=""
"RTN","FHOMPP",9,0)
 S ZTDESC="Outpatient Meals Recurring Meals Display" D ^%ZTLOAD
"RTN","FHOMPP",10,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHOMPP",11,0)
 D END Q
"RTN","FHOMPP",12,0)
DISP ;
"RTN","FHOMPP",13,0)
 S EX="" D HDR
"RTN","FHOMPP",14,0)
 D ALG^FHCLN I ALG'="" W !!,"Allergies: ",ALG
"RTN","FHOMPP",15,0)
 K ^TMP($J) F FHFP=0:0 S FHFP=$O(^FHPT(FHDFN,"P",FHFP)) Q:FHFP'>0  D
"RTN","FHOMPP",16,0)
 .S FHFPZN=$G(^FHPT(FHDFN,"P",FHFP,0))
"RTN","FHOMPP",17,0)
 .S FHFPIEN=$P(FHFPZN,U,1),FHMEAL=$P(FHFPZN,U,2),FHQTY=$P(FHFPZN,U,3)
"RTN","FHOMPP",18,0)
 .Q:FHFPIEN=""
"RTN","FHOMPP",19,0)
 .S FHNORD=$S($L(FHMEAL)=3:1,$E(FHMEAL)="B":2,$E(FHMEAL)="N":3,1:4)
"RTN","FHOMPP",20,0)
 .S FHMEAL=FHNORD_FHMEAL
"RTN","FHOMPP",21,0)
 .S FHFPLD=$P($G(^FH(115.2,FHFPIEN,0)),U,2) Q:FHFPLD=""
"RTN","FHOMPP",22,0)
 .S FHFPNM=$P($G(^FH(115.2,FHFPIEN,0)),U,1) Q:FHFPNM=""
"RTN","FHOMPP",23,0)
 .S ^TMP($J,FHFPLD,FHMEAL,FHFPIEN)=FHQTY_" "_FHFPNM
"RTN","FHOMPP",24,0)
 .Q
"RTN","FHOMPP",25,0)
 W !!,"Food Preferences Currently on file: "
"RTN","FHOMPP",26,0)
 I $D(^TMP($J,"L")) W !!?20,"Likes"
"RTN","FHOMPP",27,0)
 S FHM="" F  S FHM=$O(^TMP($J,"L",FHM)) Q:FHM=""!(EX=U)  D
"RTN","FHOMPP",28,0)
 .F FHP=0:0 S FHP=$O(^TMP($J,"L",FHM,FHP)) Q:FHP'>0  W !!,^TMP($J,"L",FHM,FHP) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHOMPP",29,0)
 I $D(^TMP($J,"D")) W !!?20,"Dislikes"
"RTN","FHOMPP",30,0)
 S FHM="" F  S FHM=$O(^TMP($J,"D",FHM)) Q:FHM=""!(EX=U)  D
"RTN","FHOMPP",31,0)
 .F FHP=0:0 S FHP=$O(^TMP($J,"D",FHM,FHP)) Q:FHP'>0  W !!,^TMP($J,"D",FHM,FHP) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHOMPP",32,0)
 ;
"RTN","FHOMPP",33,0)
 S FHIPX=$P($G(^FHPT(FHDFN,0)),U,5) I FHIPX'="" W !!,"Isolation/Precaution type is ",$P($G(^FH(119.4,FHIPX,0)),"^",1) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHOMPP",34,0)
 W !!,"Recurring Meals on File: " I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHOMPP",35,0)
 W ! S STDT=DT S FHPP=1 D DISP^FHOMRR1 K FHPP
"RTN","FHOMPP",36,0)
 I EX'=U,IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR
"RTN","FHOMPP",37,0)
 Q
"RTN","FHOMPP",38,0)
PG ;
"RTN","FHOMPP",39,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHOMPP",40,0)
 D HDR Q
"RTN","FHOMPP",41,0)
HDR ;
"RTN","FHOMPP",42,0)
 W:$Y @IOF
"RTN","FHOMPP",43,0)
 W !!,"OUTPATIENT NAME: " D PATNAME^FHOMUTL W FHPTNM,"   ",FHSSN
"RTN","FHOMPP",44,0)
 W ?65,FHSEX," Age ",FHAGE Q
"RTN","FHOMPP",45,0)
END ;
"RTN","FHOMPP",46,0)
 K FHM,FHP,FHT Q
"RTN","FHOMPP",47,0)
 ;
"RTN","FHOMPP",48,0)
CPRS ; Call from FHWOR71 to get outpatient profile for CPRS
"RTN","FHOMPP",49,0)
 ; Data is returned in ^TMP($J,"FHPROF",DFN,FHX)
"RTN","FHOMPP",50,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q "-1^Invalid outpatient"
"RTN","FHOMPP",51,0)
 K ^TMP($J,"FHPROF",DFN) S (FHX,N)=0 D PATNAME^FHOMUTL
"RTN","FHOMPP",52,0)
 S FHB="" F I=1:1:80 S FHB=FHB_" "
"RTN","FHOMPP",53,0)
 S ^TMP($J,"FHPROF",DFN,FHX)="OUTPATIENT NAME: "_FHPTNM_"   "_FHSSN
"RTN","FHOMPP",54,0)
 S FHJ=66 D PAD^FHOMPP1 S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_FHSEX_" Age "_FHAGE
"RTN","FHOMPP",55,0)
 D ALG^FHCLN I ALG'="" S N=1 D NEWL S ^TMP($J,"FHPROF",DFN,FHX)="Allergies: "_ALG
"RTN","FHOMPP",56,0)
 F FHFP=0:0 S FHFP=$O(^FHPT(FHDFN,"P",FHFP)) Q:FHFP'>0  D
"RTN","FHOMPP",57,0)
 .S FHFPZN=$G(^FHPT(FHDFN,"P",FHFP,0))
"RTN","FHOMPP",58,0)
 .S FHFPIEN=$P(FHFPZN,U,1),FHMEAL=$P(FHFPZN,U,2),FHQTY=$P(FHFPZN,U,3)
"RTN","FHOMPP",59,0)
 .Q:FHFPIEN=""
"RTN","FHOMPP",60,0)
 .S FHNORD=$S($L(FHMEAL)=3:1,$E(FHMEAL)="B":2,$E(FHMEAL)="N":3,1:4)
"RTN","FHOMPP",61,0)
 .S FHMEAL=FHNORD_FHMEAL
"RTN","FHOMPP",62,0)
 .S FHFPLD=$P($G(^FH(115.2,FHFPIEN,0)),U,2) Q:FHFPLD=""
"RTN","FHOMPP",63,0)
 .S FHFPNM=$P($G(^FH(115.2,FHFPIEN,0)),U,1) Q:FHFPNM=""
"RTN","FHOMPP",64,0)
 .S ^TMP($J,FHFPLD,FHMEAL,FHFPIEN)=FHQTY_" "_FHFPNM
"RTN","FHOMPP",65,0)
 .Q
"RTN","FHOMPP",66,0)
 S N=1 D NEWL S ^TMP($J,"FHPROF",DFN,FHX)="Food Preferences Currently on file: "
"RTN","FHOMPP",67,0)
 I $D(^TMP($J,"L")) S N=1 D NEWL S ^TMP($J,"FHPROF",DFN,FHX)="Likes"
"RTN","FHOMPP",68,0)
 S FHM="" F  S FHM=$O(^TMP($J,"L",FHM)) Q:FHM=""  D
"RTN","FHOMPP",69,0)
 .F FHP=0:0 S FHP=$O(^TMP($J,"L",FHM,FHP)) Q:FHP'>0  S N=0 D NEWL S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"L",FHM,FHP) Q
"RTN","FHOMPP",70,0)
 I $D(^TMP($J,"D")) S N=1 D NEWL S ^TMP($J,"FHPROF",DFN,FHX)="Dislikes"
"RTN","FHOMPP",71,0)
 S FHM="" F  S FHM=$O(^TMP($J,"D",FHM)) Q:FHM=""  D
"RTN","FHOMPP",72,0)
 .F FHP=0:0 S FHP=$O(^TMP($J,"D",FHM,FHP)) Q:FHP'>0  S N=0 D NEWL S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"D",FHM,FHP) Q
"RTN","FHOMPP",73,0)
 ;
"RTN","FHOMPP",74,0)
 S N=1 D NEWL S ^TMP($J,"FHPROF",DFN,FHX)="Recurring Meals on File: "
"RTN","FHOMPP",75,0)
 S STDT=DT D ^FHOMPP1
"RTN","FHOMPP",76,0)
 Q
"RTN","FHOMPP",77,0)
NEWL ;New line before next line of text in ^TMP global
"RTN","FHOMPP",78,0)
 I N=1 S FHX=FHX+1,^TMP($J,"FHPROF",DFN,FHX)=" "
"RTN","FHOMPP",79,0)
 S FHX=FHX+1
"RTN","FHOMPP",80,0)
 Q
"RTN","FHOMPP1")
0^158^B22257868
"RTN","FHOMPP1",1,0)
FHOMPP1 ;Hines OIFO/RTK Patient Profile for CPRS (continued)  ;6/07/04  9:05
"RTN","FHOMPP1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMPP1",3,0)
 ;
"RTN","FHOMPP1",4,0)
 S FHB="" F I=1:1:80 S FHB=FHB_" "
"RTN","FHOMPP1",5,0)
 S X1=STDT,X2=-1 D C^%DTC S STDT=X
"RTN","FHOMPP1",6,0)
 I '$O(^FHPT(FHDFN,"OP","B",STDT)) S N=1 D NEWL^FHOMPP S ^TMP($J,"FHPROF",DFN,FHX)="No Recurring Meals to Display" Q
"RTN","FHOMPP1",7,0)
 K FHLIST S EX="",NUM=0 D HDR
"RTN","FHOMPP1",8,0)
 F FHRMDT=STDT:0 S FHRMDT=$O(^FHPT(FHDFN,"OP","B",FHRMDT)) Q:FHRMDT'>0!(EX=U)  F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRMDT,FHRNUM)) Q:FHRNUM'>0!(EX=U)  D
"RTN","FHOMPP1",9,0)
 .S NUM=NUM+1,FHNODE=$G(^FHPT(FHDFN,"OP",FHRNUM,0))
"RTN","FHOMPP1",10,0)
 .S FHRM=$P(FHNODE,U,1)
"RTN","FHOMPP1",11,0)
 .S FHDOW=$$DOW^XLFDT(FHRM),FHDOW=$E(FHDOW,1,3)
"RTN","FHOMPP1",12,0)
 .S FHDTP=$$FMTE^XLFDT(FHRM,"P") S N=0 D NEWL^FHOMPP S ^TMP($J,"FHPROF",DFN,FHX)=NUM S FHJ=7 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_FHDOW_" - "_$E(FHDTP,1,12)
"RTN","FHOMPP1",13,0)
 .S FHLPT=$P(FHNODE,U,3),FHLOCZN=$G(^FH(119.6,FHLPT,0)) D
"RTN","FHOMPP1",14,0)
 ..S FHLOC=$E($P(FHLOCZN,U,1),1,10),FHSERV=$P(FHLOCZN,U,10)
"RTN","FHOMPP1",15,0)
 ..S FHSRV=$S(FHSERV["T":$P(FHLOCZN,U,5),FHSERV["C":$P(FHLOCZN,U,6),1:"")
"RTN","FHOMPP1",16,0)
 ..I FHSRV="" S FHSRVPT="" Q
"RTN","FHOMPP1",17,0)
 ..S FHSRVPT=$P($G(^FH(119.72,FHSRV,0)),U,1)
"RTN","FHOMPP1",18,0)
 ..Q
"RTN","FHOMPP1",19,0)
 .S FHJ=27 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_FHLOC
"RTN","FHOMPP1",20,0)
 .S FHJ=39 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_$E(FHSRVPT,1,9)
"RTN","FHOMPP1",21,0)
 .S FHJ=52 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_$P(FHNODE,U,4)
"RTN","FHOMPP1",22,0)
 .S FHJ=57 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_$P(FHNODE,U,5)
"RTN","FHOMPP1",23,0)
 .I $P($G(^FH(119.6,FHLPT,1)),U,4)="Y" D DIETPAT S FHJ=61 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_$E(FHDIETP,1,12)
"RTN","FHOMPP1",24,0)
 .E  S FHDPTR=$P(FHNODE,U,2) S FHJ=61 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_$E($P($G(^FH(111,FHDPTR,0)),U,1),1,12)
"RTN","FHOMPP1",25,0)
 .S FHSTAT=$P(FHNODE,U,15) I FHSTAT="C" S FHJ=77 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_"C"
"RTN","FHOMPP1",26,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,1)) D
"RTN","FHOMPP1",27,0)
 ..S N=0 D NEWL^FHOMPP
"RTN","FHOMPP1",28,0)
 ..S FHNODE1=$G(^FHPT(FHDFN,"OP",FHRNUM,1))
"RTN","FHOMPP1",29,0)
 ..S FHSTATA=$P(FHNODE1,U,5) I FHSTATA="C" S ^TMP($J,"FHPROF",DFN,FHX)="        Additional Orders: "_$E($P(FHNODE1,U,1),1,46) S FHJ=77 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_"C" Q
"RTN","FHOMPP1",30,0)
 ..S ^TMP($J,"FHPROF",DFN,FHX)="        Additional Orders: "_$P(FHNODE1,U,1)
"RTN","FHOMPP1",31,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,2)) D
"RTN","FHOMPP1",32,0)
 ..S N=0 D NEWL^FHOMPP
"RTN","FHOMPP1",33,0)
 ..S FHNODE2=$G(^FHPT(FHDFN,"OP",FHRNUM,2))
"RTN","FHOMPP1",34,0)
 ..S FHEL=FHNODE2
"RTN","FHOMPP1",35,0)
 ..S ^TMP($J,"FHPROF",DFN,FHX)="        Early/Late Tray Time: "_$P(FHEL,U,1)_"  Bagged Meal: "_$P(FHEL,U,2)
"RTN","FHOMPP1",36,0)
 ..S FHSTATE=$P(FHNODE2,U,6) I FHSTATE="C" S FHJ=77 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_"C" Q
"RTN","FHOMPP1",37,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,3)) D
"RTN","FHOMPP1",38,0)
 ..S N=0 D NEWL^FHOMPP
"RTN","FHOMPP1",39,0)
 ..S FHNODE3=$G(^FHPT(FHDFN,"OP",FHRNUM,3))
"RTN","FHOMPP1",40,0)
 ..S FHTU=FHNODE3
"RTN","FHOMPP1",41,0)
 ..S ^TMP($J,"FHPROF",DFN,FHX)="        Tubefeeding: " S FHSTATT=$P(FHTU,U,5) I FHSTATT="C" S FHJ=77 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_"C"
"RTN","FHOMPP1",42,0)
 ..S N=0 D NEWL^FHOMPP
"RTN","FHOMPP1",43,0)
 ..F FHTZ=0:0 S FHTZ=$O(^FHPT(FHDFN,"OP",FHRNUM,"TF",FHTZ)) Q:FHTZ'>0  D
"RTN","FHOMPP1",44,0)
 ...S FHTUZN=$G(^FHPT(FHDFN,"OP",FHRNUM,"TF",FHTZ,0))
"RTN","FHOMPP1",45,0)
 ...S FHTUPTR=$P(FHTUZN,U,1),FHTUSTR=$P(FHTUZN,U,2)
"RTN","FHOMPP1",46,0)
 ...S ^TMP($J,"FHPROF",DFN,FHX)="          "_$P($G(^FH(118.2,FHTUPTR,0)),U,1)_"  Strength: "_$S(FHTUSTR=1:"1/4",FHTUSTR=2:"1/2",FHTUSTR=3:"3/4",1:"FULL")_"  Quantity: "_$P(FHTUZN,U,3)
"RTN","FHOMPP1",47,0)
 ...S N=0 D NEWL^FHOMPP
"RTN","FHOMPP1",48,0)
 ...S ^TMP($J,"FHPROF",DFN,FHX)="          Total CC's: "_$P(FHTU,U,2)_"  Total KCALS/DAY: "_$P(FHTU,U,3)
"RTN","FHOMPP1",49,0)
 ..S FHTCOMM=$P(FHTU,U,1) I FHTCOMM'="" S N=0 D NEWL^FHOMPP S ^TMP($J,"FHPROF",DFN,FHX)="Comment: "_FHTCOMM
"RTN","FHOMPP1",50,0)
 .Q
"RTN","FHOMPP1",51,0)
 Q
"RTN","FHOMPP1",52,0)
DIETPAT ;
"RTN","FHOMPP1",53,0)
 S FHDIETS=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,7,11)
"RTN","FHOMPP1",54,0)
 S FHDIETP=""
"RTN","FHOMPP1",55,0)
 F PCE=1:1:5 D
"RTN","FHOMPP1",56,0)
 .S FHDPTR=$P(FHDIETS,U,PCE) I FHDPTR="" Q
"RTN","FHOMPP1",57,0)
 .S FHDNM=$P($G(^FH(111,FHDPTR,0)),U,7)
"RTN","FHOMPP1",58,0)
 .I FHDNM="" S FHDNM=$P($G(^FH(111,FHDPTR,0)),U,1)
"RTN","FHOMPP1",59,0)
 .S FHDIETP=FHDIETP_FHDNM_"," Q
"RTN","FHOMPP1",60,0)
 S FHDIETP=$E(FHDIETP,1,$L(FHDIETP)-1)
"RTN","FHOMPP1",61,0)
 Q
"RTN","FHOMPP1",62,0)
HDR ;
"RTN","FHOMPP1",63,0)
 ;S ^TMP($J,"FHPROF",DFN,FHX)="   OUTPATIENT NAME: " D PATNAME^FHOMUTL S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_FHPTNM_"   "_FHSSN
"RTN","FHOMPP1",64,0)
 ;S FHJ=66 D PAD S ^TMP($J,"FHPROF",DFN,FHX)=^TMP($J,"FHPROF",DFN,FHX)_PAD_FHSEX_" Age "_FHAGE
"RTN","FHOMPP1",65,0)
 S N=1 D NEWL^FHOMPP
"RTN","FHOMPP1",66,0)
 S ^TMP($J,"FHPROF",DFN,FHX)="                          Ordering   Service"
"RTN","FHOMPP1",67,0)
 S N=0 D NEWL^FHOMPP
"RTN","FHOMPP1",68,0)
 S ^TMP($J,"FHPROF",DFN,FHX)=" #   Date/Time            Location   Point       Meal Bag  Diet Ordered  Status"
"RTN","FHOMPP1",69,0)
 S N=0 D NEWL^FHOMPP
"RTN","FHOMPP1",70,0)
 S ^TMP($J,"FHPROF",DFN,FHX)="===  ==================  ==========  ==========  ==== ===  ============  ======"
"RTN","FHOMPP1",71,0)
 Q
"RTN","FHOMPP1",72,0)
PAD ;
"RTN","FHOMPP1",73,0)
 S FHU=^TMP($J,"FHPROF",DFN,FHX),A=$L(FHU),PAD=$E(FHB,1,FHJ-A)
"RTN","FHOMPP1",74,0)
 Q
"RTN","FHOMPP1",75,0)
END ;
"RTN","FHOMPP1",76,0)
 K EX,FHDIET,FHDIETP,FHDIETS,FHDTP,FHFIND,FHLOC,FHLPT,FHNODE,FHRM
"RTN","FHOMPP1",77,0)
 K FHRNUM,FHDPTR,FHDNM Q
"RTN","FHOMRA1")
0^159^B6231973
"RTN","FHOMRA1",1,0)
FHOMRA1 ;Hines OIFO/RTK OUTPATIENT MEALS ADDITIONAL ORDERS  ;5/14/03  15:15
"RTN","FHOMRA1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRA1",3,0)
 ;
"RTN","FHOMRA1",4,0)
 S FHMSG1="A" D GETOPT^FHOMUTL I FHFIND=0 Q
"RTN","FHOMRA1",5,0)
 K NUM D DISP^FHOMRR1 I $G(NUM)="" Q
"RTN","FHOMRA1",6,0)
AO1 W ! K DIR S DIR("A")="Select Order(s)",DIR(0)="LO^1:"_NUM D ^DIR
"RTN","FHOMRA1",7,0)
 Q:$D(DIRUT)  S FHCLST=Y
"RTN","FHOMRA1",8,0)
 S FHCAN1=0 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=FHLIST(FHC) I $P($G(^FHPT(FHDFN,"OP",+FHRNUM,0)),U,15)'="C" S FHCAN1=1
"RTN","FHOMRA1",9,0)
 I FHCAN1=0 W !!?3,"The selected order(s) have been cancelled!",! D AO1 Q
"RTN","FHOMRA1",10,0)
 W ! K DIR S DIR("A")="Additional Order: ",DIR(0)="FAO^1:160" D ^DIR
"RTN","FHOMRA1",11,0)
 I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMRA1",12,0)
 S FHTEXT=Y,FHORN=""
"RTN","FHOMRA1",13,0)
 W ! K DIR S DIR("A")="Is this correct?: ",DIR(0)="YA",DIR("B")="Y"
"RTN","FHOMRA1",14,0)
 D ^DIR I $D(DIRUT)!(Y=0) D EXMSG^FHOMUTL,END Q
"RTN","FHOMRA1",15,0)
 W !
"RTN","FHOMRA1",16,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=FHLIST(FHC) D CHK
"RTN","FHOMRA1",17,0)
 D OKMSG^FHOMUTL Q
"RTN","FHOMRA1",18,0)
 D END Q
"RTN","FHOMRA1",19,0)
CHK ;
"RTN","FHOMRA1",20,0)
 I $P($G(^FHPT(FHDFN,"OP",+FHRNUM,0)),U,15)="C" S FHDTX=$P(FHRNUM,U,2),FHDTX=$$FMTE^XLFDT(FHDTX,"P") W !?3,"The order for ",$E(FHDTX,1,12)," has been cancelled -- not ordered!" Q
"RTN","FHOMRA1",21,0)
 D SET
"RTN","FHOMRA1",22,0)
 Q
"RTN","FHOMRA1",23,0)
SET ;
"RTN","FHOMRA1",24,0)
 D NOW^%DTC S FHTODAY=$E(%,1,12)
"RTN","FHOMRA1",25,0)
 K DIE S DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=+FHRNUM
"RTN","FHOMRA1",26,0)
 S DR="11////^S X=FHTEXT;12////^S X=DUZ;13////^S X=FHTODAY;13.5////^S X=FHORN" D ^DIE
"RTN","FHOMRA1",27,0)
 S FHACT="O",FHOPTY="A",FHAET=FHTEXT D SETAET^FHOMRO2
"RTN","FHOMRA1",28,0)
 Q
"RTN","FHOMRA1",29,0)
END ;
"RTN","FHOMRA1",30,0)
 K A,FHFIND,FHCLST,FHC,FHRNUM,FHTEXT,FHTODAY,NUM Q
"RTN","FHOMRA1",31,0)
HL7SET ;
"RTN","FHOMRA1",32,0)
 ; Entry point for AO's placed from CPRS/OERR
"RTN","FHOMRA1",33,0)
 S FHTEXT=FHCOM,X1=STDT,X2=-1 D C^%DTC S STDT1=X
"RTN","FHOMRA1",34,0)
 F FHRMDT=STDT1:0 S FHRMDT=$O(^FHPT(FHDFN,"OP","B",FHRMDT)) Q:FHRMDT'>0!(FHRMDT>ENDT)  F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRMDT,FHRNUM)) Q:FHRNUM'>0  D SET
"RTN","FHOMRA1",35,0)
 I '$D(FHRNUM) Q
"RTN","FHOMRA1",36,0)
 S FILL="A;"_FHRNUM_";"_FHCOM_";"_FHORN
"RTN","FHOMRA1",37,0)
 D SEND^FHWOR Q
"RTN","FHOMRBL1")
0^160^B26804148
"RTN","FHOMRBL1",1,0)
FHOMRBL1 ;Hines OIFO/RVD-OUTPATIENT REPORT UTILITY2  ;2/03/04  10:05
"RTN","FHOMRBL1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRBL1",3,0)
 ;
"RTN","FHOMRBL1",4,0)
 ;
"RTN","FHOMRBL1",5,0)
GETGM(FHGDT,FHGCOM,FHGLOC,FHGDFN) ;get guest meals data
"RTN","FHOMRBL1",6,0)
 ;ENTRY POINTS:
"RTN","FHOMRBL1",7,0)
 ;          GETGM - get outpatient guest meals data from starting dt.
"RTN","FHOMRBL1",8,0)
 ;input variable:
"RTN","FHOMRBL1",9,0)
 ;         FHGDT        = starting date
"RTN","FHOMRBL1",10,0)
 ;         FHGCOM       = IEN of communication office, 'ALL' for all.
"RTN","FHOMRBL1",11,0)
 ;                      = if NULL, considered 'ALL'
"RTN","FHOMRBL1",12,0)
 ;         FHGLOC       = IEN of location, 'ALL' for all.
"RTN","FHOMRBL1",13,0)
 ;                      = if NULL, considered 'ALL'
"RTN","FHOMRBL1",14,0)
 ;         FHGDFN       = IEN of file #115, 'ALL' for all.
"RTN","FHOMRBL1",15,0)
 ;                      = if NULL, considered 'ALL'
"RTN","FHOMRBL1",16,0)
 ;
"RTN","FHOMRBL1",17,0)
 ;output variable:
"RTN","FHOMRBL1",18,0)
 ;         ^TMP($J,"OP","G",COMM OFF,PATIENT NAME,DTE)
"RTN","FHOMRBL1",19,0)
 ;
"RTN","FHOMRBL1",20,0)
 ;error:
"RTN","FHOMRBL1",21,0)
 ;         ^TMP($J,"OP","ER")
"RTN","FHOMRBL1",22,0)
 K ^TMP($J,"OP","G")
"RTN","FHOMRBL1",23,0)
 D NEWVAR
"RTN","FHOMRBL1",24,0)
 S:FHGDFN="" FHGDFN="ALL"
"RTN","FHOMRBL1",25,0)
 S:FHGCOM="" FHGCOM="ALL"
"RTN","FHOMRBL1",26,0)
 S:FHGLOC="" FHGLOC="ALL"
"RTN","FHOMRBL1",27,0)
 S FHGDT=FHGDT-.000001
"RTN","FHOMRBL1",28,0)
 I '$O(^FHPT("GM",FHGDT)) S ^TMP($J,"OP","ER")="NO GUEST MEALS FOR THIS DATE RANGE" Q
"RTN","FHOMRBL1",29,0)
 ;
"RTN","FHOMRBL1",30,0)
 F FHGMDT=FHGDT:0 S FHGMDT=$O(^FHPT("GM",FHGMDT)) Q:FHGMDT'>0  D
"RTN","FHOMRBL1",31,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHGMDT,FHDFN)) Q:FHDFN'>0  D
"RTN","FHOMRBL1",32,0)
 ..I $G(FHGDFN),(FHGDFN'=FHDFN) Q
"RTN","FHOMRBL1",33,0)
 ..S (FHGCOMN,FHPTNM,FHLOCN)=""
"RTN","FHOMRBL1",34,0)
 ..S FHNODE=$G(^FHPT(FHDFN,"GM",FHGMDT,0))
"RTN","FHOMRBL1",35,0)
 ..S FHCL=$P(FHNODE,U,2)
"RTN","FHOMRBL1",36,0)
 ..S FHML=$P(FHNODE,U,3)
"RTN","FHOMRBL1",37,0)
 ..S FHCH=$P(FHNODE,U,4)
"RTN","FHOMRBL1",38,0)
 ..S FHLPT=$P(FHNODE,U,5)
"RTN","FHOMRBL1",39,0)
 ..S FHDIET=$P(FHNODE,U,6)
"RTN","FHOMRBL1",40,0)
 ..I $G(FHGLOC),FHGLOC'=FHLPT Q   ;quit if location is not the same
"RTN","FHOMRBL1",41,0)
 ..S:$G(FHLPT) FHLCOM=$P($G(^FH(119.6,FHLPT,0)),U,8)
"RTN","FHOMRBL1",42,0)
 ..I $G(FHGCOM),FHGCOM'=FHLCOM Q  ;quit if d same communication office
"RTN","FHOMRBL1",43,0)
 ..S:$G(FHLCOM) FHGCOMN=$P($G(^FH(119.73,FHLCOM,0)),U,1)
"RTN","FHOMRBL1",44,0)
 ..S:FHGCOMN="" FHGCOMN="***"
"RTN","FHOMRBL1",45,0)
 ..I $G(FHLPT) D
"RTN","FHOMRBL1",46,0)
 ...S FHLOCN=$P($G(^FH(119.6,FHLPT,0)),U,1)
"RTN","FHOMRBL1",47,0)
 ..S:FHLOCN="" FHLOCN="***"
"RTN","FHOMRBL1",48,0)
 ..;
"RTN","FHOMRBL1",49,0)
 ..S FHCL=$S(FHCL="E":"EMPLOYEE",FHCL="G":"GRATUITOUS",FHCL="O":"OOD",FHCL="P":"PAID",1:"VOLUNTEER")
"RTN","FHOMRBL1",50,0)
 ..S FHD=$$FMTE^XLFDT(FHGMDT,"P")
"RTN","FHOMRBL1",51,0)
 ..S FHD=$E(FHD,1,12)
"RTN","FHOMRBL1",52,0)
 ..D PATNAME^FHOMUTL S FHPTNM=$E(FHPTNM,1,24)
"RTN","FHOMRBL1",53,0)
 ..S:FHPTNM="" FHPTNM="***"
"RTN","FHOMRBL1",54,0)
 ..S ^TMP($J,"OP","G",FHGCOMN,FHLOCN,FHPTNM,FHGMDT)=FHDFN_"^"_FHD_"^"_FHML_"^"_FHCL_"^"_FHCH_"^"_FHDIET
"RTN","FHOMRBL1",55,0)
 Q
"RTN","FHOMRBL1",56,0)
 ;
"RTN","FHOMRBL1",57,0)
NEWVAR ;new all variables.
"RTN","FHOMRBL1",58,0)
 N FHPTNM,FHD,FHDIET,FHMEAL,FHELTT,FHELBG,FHDAT,FHSTAT,FHLPT
"RTN","FHOMRBL1",59,0)
 N FHAGE,FHCH,FHCL,FHDOB,FHGMDT,FHML,FHNODE,FHPCZN,FHSEX,FHSSN,FILE
"RTN","FHOMRBL1",60,0)
 N FHDAT,FHDPT,FHEL,FHLPT,FHS,FHSMDT,FHSTAT,FHNN,FH
"RTN","FHOMRBL1",61,0)
 Q
"RTN","FHOMRBL1",62,0)
 ;
"RTN","FHOMRBL1",63,0)
GETOUT ;get outpatient data for TODAY.
"RTN","FHOMRBL1",64,0)
 ;output variables:
"RTN","FHOMRBL1",65,0)
 ;         ^TMP($J,"FH",##LOCATION,PATIENT NAME,DATE)=OP or SM or GM^IEN OF 115^MEAL^STATUS
"RTN","FHOMRBL1",66,0)
 ;
"RTN","FHOMRBL1",67,0)
 K ^TMP($J)
"RTN","FHOMRBL1",68,0)
 N FHMEAL,FHDT,DT3,FHI,I,J,FHRMD,FHRMLNM,FHSMD,FHSMSTA,DFN,FHDFN
"RTN","FHOMRBL1",69,0)
 N DTTST,FHSMLNM,FHGMLNM
"RTN","FHOMRBL1",70,0)
 ;recurring meals
"RTN","FHOMRBL1",71,0)
 S FHDT=DT-.00001,DT3=DT+.999999
"RTN","FHOMRBL1",72,0)
 F FHI=FHDT:0 S FHI=$O(^FHPT("RM",FHI)) Q:(FHI>DT3)!(FHI="")  F I=0:0 S I=$O(^FHPT("RM",FHI,I)) Q:I'>0  D
"RTN","FHOMRBL1",73,0)
 .F J=0:0 S J=$O(^FHPT("RM",FHI,I,J)) Q:J'>0  D
"RTN","FHOMRBL1",74,0)
 ..S (FHRMD,FHMEAL)=""
"RTN","FHOMRBL1",75,0)
 ..S FHRMLNM="***"
"RTN","FHOMRBL1",76,0)
 ..I $D(^FHPT(I,"OP",J,0)) S FHRMD=$G(^FHPT(I,"OP",J,0))
"RTN","FHOMRBL1",77,0)
 ..I $D(FHRMD) S FHMEAL=$P(FHRMD,U,2)
"RTN","FHOMRBL1",78,0)
 ..S FHDFN=I D PATNAME^FHOMUTL Q:DFN=""
"RTN","FHOMRBL1",79,0)
 ..S:FHMEAL="" FHMEAL=$P(FHRMD,U,7)
"RTN","FHOMRBL1",80,0)
 ..S:FHMEAL="" FHMEAL=$P(FHRMD,U,8)
"RTN","FHOMRBL1",81,0)
 ..S:FHMEAL="" FHMEAL=$P(FHRMD,U,9)
"RTN","FHOMRBL1",82,0)
 ..S:FHMEAL="" FHMEAL=$P(FHRMD,U,10)
"RTN","FHOMRBL1",83,0)
 ..S:FHMEAL="" FHMEAL=$P(FHRMD,U,11)
"RTN","FHOMRBL1",84,0)
 ..S FHRMLOC=$P(FHRMD,U,3) Q:FHRMLOC=""
"RTN","FHOMRBL1",85,0)
 ..S FHML=$P(FHRMD,U,4)
"RTN","FHOMRBL1",86,0)
 ..I $G(FHRMLOC),$D(^FH(119.6,FHRMLOC,0)) D
"RTN","FHOMRBL1",87,0)
 ...S FHRMLNM=$P(^FH(119.6,FHRMLOC,0),U,1)
"RTN","FHOMRBL1",88,0)
 ...S FHRMPR=$P(^FH(119.6,FHRMLOC,0),U,4)
"RTN","FHOMRBL1",89,0)
 ...S FHRMSTA=$P(^FH(119.6,FHRMLOC,0),U,8)
"RTN","FHOMRBL1",90,0)
 ...S:FHRMPR<10 FHRMPR=0_FHRMPR
"RTN","FHOMRBL1",91,0)
 ...S:FHRMPR="" FHRMPR=99
"RTN","FHOMRBL1",92,0)
 ..S ^TMP($J,"FH",FHRMPR_FHRMLNM,FHPTNM,FHI,J)="OP"_"^"_I_"^"_FHMEAL_"^"_FHRMSTA_"^"_FHML_"^"_FHRMLOC
"RTN","FHOMRBL1",93,0)
SM ;special meals
"RTN","FHOMRBL1",94,0)
 S FHDT=DT-.00001,DTTST=$P(DT,".",1),DT3=DTTST+1
"RTN","FHOMRBL1",95,0)
 F FHI=FHDT:0 S FHI=$O(^FHPT("SM",FHI)) Q:(FHI>DT3)!(FHI="")  F I=0:0 S I=$O(^FHPT("SM",FHI,I)) Q:I'>0  D
"RTN","FHOMRBL1",96,0)
 .F J=0:0 S J=$O(^FHPT("SM",FHI,I,J)) Q:J'>0  D
"RTN","FHOMRBL1",97,0)
 ..S (FHSMD,FHMEAL)=""
"RTN","FHOMRBL1",98,0)
 ..S FHSMSTA=""
"RTN","FHOMRBL1",99,0)
 ..I $D(^FHPT(I,"SM",J,0)) S FHSMD=$G(^FHPT(I,"SM",J,0))
"RTN","FHOMRBL1",100,0)
 ..I $D(FHSMD) S FHMEAL=$P(FHSMD,U,4)
"RTN","FHOMRBL1",101,0)
 ..S FHDFN=I D PATNAME^FHOMUTL Q:DFN=""
"RTN","FHOMRBL1",102,0)
 ..S FHSMLOC=$P(FHSMD,U,3) Q:FHSMLOC=""
"RTN","FHOMRBL1",103,0)
 ..S FHSMSTA=$P(FHSMD,U,2)
"RTN","FHOMRBL1",104,0)
 ..S FHML=$P(FHSMD,U,9)
"RTN","FHOMRBL1",105,0)
 ..I $G(FHSMLOC),$D(^FH(119.6,FHSMLOC,0)) D
"RTN","FHOMRBL1",106,0)
 ...S FHSMLNM=$P(^FH(119.6,FHSMLOC,0),U,1)
"RTN","FHOMRBL1",107,0)
 ...S FHSMPR=$P(^FH(119.6,FHSMLOC,0),U,4)
"RTN","FHOMRBL1",108,0)
 ...S FHSMSTA=$P(^FH(119.6,FHSMLOC,0),U,8)
"RTN","FHOMRBL1",109,0)
 ...S:FHSMPR<10 FHSMPR=0_FHSMPR
"RTN","FHOMRBL1",110,0)
 ...S:FHSMPR="" FHSMPR=99
"RTN","FHOMRBL1",111,0)
 ..S ^TMP($J,"FH",FHSMPR_FHSMLNM,FHPTNM,J)="SM"_"^"_I_"^"_FHMEAL_"^"_FHSMSTA_"^"_FHML_"^"_FHSMLOC
"RTN","FHOMRBL1",112,0)
 ;guest meals
"RTN","FHOMRBL1",113,0)
 S FHDT=DT-.00001,DTTST=$P(DT,".",1),DT3=DTTST+1
"RTN","FHOMRBL1",114,0)
 F FHI=FHDT:0 S FHI=$O(^FHPT("GM",FHI)) Q:(FHI>DT3)!(FHI="")  F I=0:0 S I=$O(^FHPT("GM",FHI,I)) Q:I'>0  D
"RTN","FHOMRBL1",115,0)
 .F J=0:0 S J=$O(^FHPT("GM",FHI,I,J)) Q:J'>0  D
"RTN","FHOMRBL1",116,0)
 ..S (FHSMD,FHMEAL)=""
"RTN","FHOMRBL1",117,0)
 ..S FHSMSTA=""
"RTN","FHOMRBL1",118,0)
 ..S FHSMLNM="***"
"RTN","FHOMRBL1",119,0)
 ..I $D(^FHPT(I,"GM",J,0)) S FHSMD=$G(^FHPT(I,"GM",J,0))
"RTN","FHOMRBL1",120,0)
 ..I $D(FHSMD) S FHMEAL=$P(FHSMD,U,6)
"RTN","FHOMRBL1",121,0)
 ..S FHDFN=I D PATNAME^FHOMUTL Q:DFN=""
"RTN","FHOMRBL1",122,0)
 ..S FHSMLOC=$P(FHSMD,U,5) Q:FHSMLOC=""
"RTN","FHOMRBL1",123,0)
 ..S FHML=$P(FHSMD,U,3)
"RTN","FHOMRBL1",124,0)
 ..I $G(FHSMLOC),$D(^FH(119.6,FHSMLOC,0)) D
"RTN","FHOMRBL1",125,0)
 ...S FHSMLNM=$P(^FH(119.6,FHSMLOC,0),U,1)
"RTN","FHOMRBL1",126,0)
 ...S FHSMSTA=$P(^FH(119.6,FHSMLOC,0),U,8)
"RTN","FHOMRBL1",127,0)
 ...S FHSMPR=$P(^FH(119.6,FHSMLOC,0),U,4)
"RTN","FHOMRBL1",128,0)
 ...S:FHSMPR<10 FHSMPR=0_FHSMPR
"RTN","FHOMRBL1",129,0)
 ...S:FHSMPR="" FHSMPR=99
"RTN","FHOMRBL1",130,0)
 ..S ^TMP($J,"FH",FHSMPR_FHSMLNM,FHPTNM,J)="GM"_"^"_I_"^"_FHMEAL_"^"_FHSMSTA_"^"_FHML_"^"_FHSMLOC
"RTN","FHOMRBL1",131,0)
 Q
"RTN","FHOMRBLD")
0^161^B48623743
"RTN","FHOMRBLD",1,0)
FHOMRBLD ;Hines OIFO/RVD-OUTPATIENT REPORT UTILITY  ;2/03/04  10:05
"RTN","FHOMRBLD",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRBLD",3,0)
 ;
"RTN","FHOMRBLD",4,0)
 ;RVD 2/3/04 - modified for Outpatient Meals
"RTN","FHOMRBLD",5,0)
 ;
"RTN","FHOMRBLD",6,0)
 ;ENTRY POINTS:
"RTN","FHOMRBLD",7,0)
 ;          GETRM - get outpatient recurring meals data from starting dt.
"RTN","FHOMRBLD",8,0)
 ;          GETSM - get outpatient special meals data from starting dt.
"RTN","FHOMRBLD",9,0)
 ;
"RTN","FHOMRBLD",10,0)
GETRM(FHSDT,FHCOM,FHLOC,FHRDFN) ;get special recurring data.
"RTN","FHOMRBLD",11,0)
 ;input variables:
"RTN","FHOMRBLD",12,0)
 ;          FHSDT        = starting date
"RTN","FHOMRBLD",13,0)
 ;          FHCOM        = IEN of communication office, 'ALL' for all.
"RTN","FHOMRBLD",14,0)
 ;                       = if NULL, considered 'ALL'
"RTN","FHOMRBLD",15,0)
 ;          FHLOC        = IEN of location, 'ALL' for all.
"RTN","FHOMRBLD",16,0)
 ;                       = if NULL, considered 'ALL'
"RTN","FHOMRBLD",17,0)
 ;          FHRDFN        = IEN of NUTRITION PERSON, 'ALL' for all.
"RTN","FHOMRBLD",18,0)
 ;                       = if NULL, considered 'ALL'
"RTN","FHOMRBLD",19,0)
 ;
"RTN","FHOMRBLD",20,0)
 ;ouput:
"RTN","FHOMRBLD",21,0)
 ;    ^TMP($J,"OP","R",COMMUNICATION OFF,NUTRITION LOCATION,PATIENT,DTE)
"RTN","FHOMRBLD",22,0)
 ;                       = for outpatient recurring meals
"RTN","FHOMRBLD",23,0)
 ;
"RTN","FHOMRBLD",24,0)
 ;contents of ^TMP($J global:
"RTN","FHOMRBLD",25,0)
 ;         Piece 1 = patient DFN(IEN in file #115)
"RTN","FHOMRBLD",26,0)
 ;         Piece 2 = recurring meals IEN
"RTN","FHOMRBLD",27,0)
 ;         Piece 3 = recurring date/time
"RTN","FHOMRBLD",28,0)
 ;         Piece 4 = diet
"RTN","FHOMRBLD",29,0)
 ;         Piece 5 = meal
"RTN","FHOMRBLD",30,0)
 ;         Piece 6 = bagged meal
"RTN","FHOMRBLD",31,0)
 ;         Piece 7 = meal plan order number
"RTN","FHOMRBLD",32,0)
 ;         Piece 8 = ADDITIONAL ORDER TEXT
"RTN","FHOMRBLD",33,0)
 ;         Piece 9 = ADDITIONAL ORDER CLERK
"RTN","FHOMRBLD",34,0)
 ;         Piece 10 = ADDITIONAL ORDER DATE AND TIME
"RTN","FHOMRBLD",35,0)
 ;         Piece 11 = EARLY/LATE TRAY TIME
"RTN","FHOMRBLD",36,0)
 ;         Piece 12 = EARLY/LATE TRAY BAGGED MEAL
"RTN","FHOMRBLD",37,0)
 ;         Piece 13 = EARLY/LATE TRAY CLERK
"RTN","FHOMRBLD",38,0)
 ;         Piece 14 = EARLY/LATE TRAY ENTRY DATE
"RTN","FHOMRBLD",39,0)
 ;         Piece 15 = TUBEFEEDING COMMENT
"RTN","FHOMRBLD",40,0)
 ;         Piece 16 = TF TOTAL CC'S
"RTN","FHOMRBLD",41,0)
 ;         Piece 17 = TF TOTAL KCALS/DAY
"RTN","FHOMRBLD",42,0)
 ;         Piece 18 = SERVICE (T,C,D or combination of 3)
"RTN","FHOMRBLD",43,0)
 ;         Piece 19 = Status
"RTN","FHOMRBLD",44,0)
 ;
"RTN","FHOMRBLD",45,0)
 ;error:
"RTN","FHOMRBLD",46,0)
 ;         ^TMP($J,"OP","ER") = error message
"RTN","FHOMRBLD",47,0)
 K ^TMP($J,"OP","R")
"RTN","FHOMRBLD",48,0)
 D NEWVAR
"RTN","FHOMRBLD",49,0)
 I '$O(^FHPT("RM",FHSDT)) S ^TMP($J,"OP","ER")="NO RECURRING MEALS FOR THIS DATE RANGE" Q
"RTN","FHOMRBLD",50,0)
 S:FHLOC="" FHLOC="ALL"
"RTN","FHOMRBLD",51,0)
 S:FHCOM="" FHCOM="ALL"
"RTN","FHOMRBLD",52,0)
 S:FHRDFN="" FHRDFN="ALL"
"RTN","FHOMRBLD",53,0)
 F FHSMDT=FHSDT:0 S FHSMDT=$O(^FHPT("RM",FHSMDT)) Q:FHSMDT'>0  D
"RTN","FHOMRBLD",54,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHSMDT,FHDFN)) Q:FHDFN'>0  D
"RTN","FHOMRBLD",55,0)
 ..F FHIN=0:0 S FHIN=$O(^FHPT("RM",FHSMDT,FHDFN,FHIN)) Q:FHIN'>0  D
"RTN","FHOMRBLD",56,0)
 ...I $G(FHRDFN),(FHRDFN'=FHDFN) Q   ;quit entry is different.
"RTN","FHOMRBLD",57,0)
 ...S (FHLCOMN,FHLCOM,FHLOCN,FHPTNM,FHDIET,FHTCD)=""
"RTN","FHOMRBLD",58,0)
 ...S FHNODE=$G(^FHPT(FHDFN,"OP",FHIN,0))
"RTN","FHOMRBLD",59,0)
 ...S FHD=$P(FHNODE,U,1)
"RTN","FHOMRBLD",60,0)
 ...D PATNAME^FHOMUTL S FHPTNM=$E(FHPTNM,1,18)
"RTN","FHOMRBLD",61,0)
 ...S:'$D(FHPTNM) FHPTNM="***"
"RTN","FHOMRBLD",62,0)
 ...S:FHPTNM="" FHPTNM="***"
"RTN","FHOMRBLD",63,0)
 ...S FHD=$$FMTE^XLFDT(FHSMDT,"P")
"RTN","FHOMRBLD",64,0)
 ...S FHD=$E(FHD,1,12)
"RTN","FHOMRBLD",65,0)
 ...S FHLPT=$P(FHNODE,U,3)
"RTN","FHOMRBLD",66,0)
 ...I $G(FHLOC),FHLOC'=FHLPT Q   ;quit if location is not the same
"RTN","FHOMRBLD",67,0)
 ...S:$G(FHLPT) FHLCOM=$P($G(^FH(119.6,FHLPT,0)),U,8)
"RTN","FHOMRBLD",68,0)
 ...I $G(FHCOM),FHCOM'=FHLCOM Q  ;quit if not same communication office
"RTN","FHOMRBLD",69,0)
 ...S:$G(FHLCOM) FHLCOMN=$P($G(^FH(119.73,FHLCOM,0)),U,1)
"RTN","FHOMRBLD",70,0)
 ...S:FHLCOMN="" FHLCOMN="***"
"RTN","FHOMRBLD",71,0)
 ...I $G(FHLPT) D
"RTN","FHOMRBLD",72,0)
 ....S FHLOCN=$P($G(^FH(119.6,FHLPT,0)),U,1)
"RTN","FHOMRBLD",73,0)
 ....S:$P($G(^FH(119.6,FHLPT,0)),U,5) FHTCD=FHTCD_"T"
"RTN","FHOMRBLD",74,0)
 ....S:$P($G(^FH(119.6,FHLPT,0)),U,6) FHTCD=FHTCD_"C"
"RTN","FHOMRBLD",75,0)
 ....S:$P($G(^FH(119.6,FHLPT,0)),U,7) FHTCD=FHTCD_"D"
"RTN","FHOMRBLD",76,0)
 ...S:FHLOCN="" FHLOCN="***"
"RTN","FHOMRBLD",77,0)
 ...S FHDPT=$P(FHNODE,U,2) S:FHDPT="" FHDPT=$P(FHNODE,U,7)
"RTN","FHOMRBLD",78,0)
 ...S:FHDPT="" FHDPT=$P(FHNODE,U,8) S:FHDPT="" FHDPT=$P(FHNODE,U,9)
"RTN","FHOMRBLD",79,0)
 ...S:FHDPT="" FHDPT=$P(FHNODE,U,10) S:FHDPT="" FHDPT=$P(FHNODE,U,11)
"RTN","FHOMRBLD",80,0)
 ...S:$G(FHDPT) FHDIET=$P($G(^FH(111,FHDPT,0)),U,1)
"RTN","FHOMRBLD",81,0)
 ...S:FHDIET="" FHDIET="***"
"RTN","FHOMRBLD",82,0)
 ...S FHMEAL=$P(FHNODE,U,4)
"RTN","FHOMRBLD",83,0)
 ...S:FHMEAL="" FHMEAL=$P(FHNODE,U,7)
"RTN","FHOMRBLD",84,0)
 ...S:FHMEAL="" FHMEAL=$P(FHNODE,U,8)
"RTN","FHOMRBLD",85,0)
 ...S:FHMEAL="" FHMEAL=$P(FHNODE,U,9)
"RTN","FHOMRBLD",86,0)
 ...S:FHMEAL="" FHMEAL=$P(FHNODE,U,10)
"RTN","FHOMRBLD",87,0)
 ...S:FHMEAL="" FHMEAL=$P(FHNODE,U,11)
"RTN","FHOMRBLD",88,0)
 ...S FHBAGM=$P(FHNODE,U,5)
"RTN","FHOMRBLD",89,0)
 ...S FHMPO=$P(FHNODE,U,6)
"RTN","FHOMRBLD",90,0)
 ...S FHMPO=$E(FHMPO,1,70)
"RTN","FHOMRBLD",91,0)
 ...S FHSTAT=$P(FHNODE,U,15)
"RTN","FHOMRBLD",92,0)
 ...S (FHADO,FHADOC,FHADODT,FHELT,FHELTB)=""
"RTN","FHOMRBLD",93,0)
 ...S (FHELTC,FHELTED,FHTFC,FHTFTC,FHTFTK)=""
"RTN","FHOMRBLD",94,0)
 ...I $D(^FHPT(FHDFN,"OP",FHIN,1)) D
"RTN","FHOMRBLD",95,0)
 ....S FHEL=$G(^FHPT(FHDFN,"OP",FHIN,1))
"RTN","FHOMRBLD",96,0)
 ....S FHADO=$P(FHEL,U,1)
"RTN","FHOMRBLD",97,0)
 ....S FHADOC=$P(FHEL,U,2)
"RTN","FHOMRBLD",98,0)
 ....I $G(FHADOC),($D(^VA(200,FHADOC,0))) S FHADOC=$P(^VA(200,FHADOC,0),U,1)
"RTN","FHOMRBLD",99,0)
 ....S FHADDT=$P(FHEL,U,3)
"RTN","FHOMRBLD",100,0)
 ...I $D(^FHPT(FHDFN,"OP",FHIN,2)) D
"RTN","FHOMRBLD",101,0)
 ....S FHEL2=$G(^FHPT(FHDFN,"OP",FHIN,2))
"RTN","FHOMRBLD",102,0)
 ....S FHELT=$P(FHEL2,U,1)
"RTN","FHOMRBLD",103,0)
 ....S FHELTB=$P(FHEL2,U,2)
"RTN","FHOMRBLD",104,0)
 ....S FHELTC=$P(FHEL2,U,3)
"RTN","FHOMRBLD",105,0)
 ....S FHELTED=$P(FHEL2,U,4)
"RTN","FHOMRBLD",106,0)
 ...I $D(^FHPT(FHDFN,"OP",FHIN,3)) D
"RTN","FHOMRBLD",107,0)
 ....S FHEL3=$G(^FHPT(FHDFN,"OP",FHIN,3))
"RTN","FHOMRBLD",108,0)
 ....S FHTFC=$P(FHEL3,U,1)
"RTN","FHOMRBLD",109,0)
 ....S FHTFTC=$P(FHEL3,U,2)
"RTN","FHOMRBLD",110,0)
 ....S FHTFTK=$P(FHEL3,U,3)
"RTN","FHOMRBLD",111,0)
 ...S FHDAT=FHDFN_"^"_FHD_"^"_FHDIET_"^"_FHMEAL_"^"_FHBAGM_"^"_FHMPO
"RTN","FHOMRBLD",112,0)
 ...S FHDAT=FHDAT_"^"_FHADO_"^"_FHADOC_"^"_FHADODT_"^"_FHELT_"^"_FHELTB
"RTN","FHOMRBLD",113,0)
 ...S FHDAT=FHDAT_"^"_FHELTC_"^"_FHELTED_"^"_FHTFC_"^"_FHTFTC_"^"_FHTFTK
"RTN","FHOMRBLD",114,0)
 ...S ^TMP($J,"OP","R",FHLCOMN,FHLOCN,FHPTNM,FHSMDT)=FHDAT_"^"_FHTCD_"^"_FHSTAT
"RTN","FHOMRBLD",115,0)
 Q
"RTN","FHOMRBLD",116,0)
 ;
"RTN","FHOMRBLD",117,0)
 ;
"RTN","FHOMRBLD",118,0)
GETSM(FHSDT,FHCOM,FHLOC,FHSDFN) ;get special meals data.
"RTN","FHOMRBLD",119,0)
 ;input variables:
"RTN","FHOMRBLD",120,0)
 ;          FHSDT        = starting date
"RTN","FHOMRBLD",121,0)
 ;          FHCOM        = IEN of communication office, 'ALL' for all.
"RTN","FHOMRBLD",122,0)
 ;                       = if NULL, considered 'ALL'
"RTN","FHOMRBLD",123,0)
 ;          FHLOC        = IEN of location, 'ALL' for all.
"RTN","FHOMRBLD",124,0)
 ;                       = if NULL, considered 'ALL'
"RTN","FHOMRBLD",125,0)
 ;          FHSDFN       = IEN of file #115, 'ALL' for all.
"RTN","FHOMRBLD",126,0)
 ;                       = if NULL, considered 'ALL'
"RTN","FHOMRBLD",127,0)
 ;
"RTN","FHOMRBLD",128,0)
 ;ouput:
"RTN","FHOMRBLD",129,0)
 ;    ^TMP($J,"OP","S",COMMUNICATION OFF,NUTRITION LOCATION,PATIENT,DTE)
"RTN","FHOMRBLD",130,0)
 ;                       = for outpatient special meals
"RTN","FHOMRBLD",131,0)
 ;
"RTN","FHOMRBLD",132,0)
 ;contents of ^TMP($J global:
"RTN","FHOMRBLD",133,0)
 ;         Piece 1 = patient DFN
"RTN","FHOMRBLD",134,0)
 ;         Piece 2 = special meal date/time
"RTN","FHOMRBLD",135,0)
 ;         Piece 3 = status
"RTN","FHOMRBLD",136,0)
 ;         Piece 4 = diet
"RTN","FHOMRBLD",137,0)
 ;         Piece 5 = requestor
"RTN","FHOMRBLD",138,0)
 ;         Piece 6 = authorizor
"RTN","FHOMRBLD",139,0)
 ;         Piece 7 = authorize/deny date/time
"RTN","FHOMRBLD",140,0)
 ;         Piece 8 = comment
"RTN","FHOMRBLD",141,0)
 ;         Piece 9 = meal
"RTN","FHOMRBLD",142,0)
 ;         Piece 10 = early/late tray time
"RTN","FHOMRBLD",143,0)
 ;         Piece 11 = early/late tray bagged meal
"RTN","FHOMRBLD",144,0)
 ;         Piece 12 = early/late tray clerk
"RTN","FHOMRBLD",145,0)
 ;         Piece 13 = SERVICE (T,C,D or combination of 3)
"RTN","FHOMRBLD",146,0)
 ;
"RTN","FHOMRBLD",147,0)
 ;error:
"RTN","FHOMRBLD",148,0)
 ;         ^TMP($J,"OP","ER")
"RTN","FHOMRBLD",149,0)
 K ^TMP($J,"OP","S")
"RTN","FHOMRBLD",150,0)
 D NEWVAR
"RTN","FHOMRBLD",151,0)
 S FHSDT=FHSDT-.000001
"RTN","FHOMRBLD",152,0)
 I '$O(^FHPT("SM",FHSDT)) S ^TMP($J,"OP","ER")="NO SPECIAL MEALS FOR THIS DATE RANGE" Q
"RTN","FHOMRBLD",153,0)
 S:FHLOC="" FHLOC="ALL"
"RTN","FHOMRBLD",154,0)
 S:FHCOM="" FHCOM="ALL"
"RTN","FHOMRBLD",155,0)
 S:FHSDFN="" FHSDFN="ALL"
"RTN","FHOMRBLD",156,0)
 S FHS="ACDP"
"RTN","FHOMRBLD",157,0)
 F FHSMDT=FHSDT:0 S FHSMDT=$O(^FHPT("SM",FHSMDT)) Q:FHSMDT'>0  D
"RTN","FHOMRBLD",158,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("SM",FHSMDT,FHDFN)) Q:FHDFN'>0  D
"RTN","FHOMRBLD",159,0)
 ..I $G(FHSDFN),(FHSDFN'=FHDFN) Q
"RTN","FHOMRBLD",160,0)
 ..S (FHLCOMN,FHLCOM,FHLOCN,FHPTNM,FHDIET,FHTCD)=""
"RTN","FHOMRBLD",161,0)
 ..S FHNODE=$G(^FHPT(FHDFN,"SM",FHSMDT,0))
"RTN","FHOMRBLD",162,0)
 ..S FHSTAT=$P(FHNODE,U,2)
"RTN","FHOMRBLD",163,0)
 ..I FHS'[FHSTAT Q
"RTN","FHOMRBLD",164,0)
 ..S FHSTAT=$S(FHSTAT="P":"PENDING",FHSTAT="A":"AUTHORIZED",FHSTAT="D":"DENIED",1:"CANCELLED")
"RTN","FHOMRBLD",165,0)
 ..D PATNAME^FHOMUTL S FHPTNM=$E(FHPTNM,1,18)
"RTN","FHOMRBLD",166,0)
 ..S:FHPTNM="" FHPTNM="***"
"RTN","FHOMRBLD",167,0)
 ..S FHD=$$FMTE^XLFDT(FHSMDT,"P")
"RTN","FHOMRBLD",168,0)
 ..S FHD=$E(FHD,1,12)
"RTN","FHOMRBLD",169,0)
 ..S FHSTAT=$P(FHNODE,U,2)
"RTN","FHOMRBLD",170,0)
 ..S FHLPT=$P(FHNODE,U,3)
"RTN","FHOMRBLD",171,0)
 ..I $G(FHLOC),FHLOC'=FHLPT Q
"RTN","FHOMRBLD",172,0)
 ..S:$G(FHLPT) FHLCOM=$P($G(^FH(119.6,FHLPT,0)),U,8)
"RTN","FHOMRBLD",173,0)
 ..I $G(FHCOM),FHCOM'=FHLCOM Q  ;quit if d same communication office
"RTN","FHOMRBLD",174,0)
 ..S:$G(FHLCOM) FHLCOMN=$P($G(^FH(119.73,FHLCOM,0)),U,1)
"RTN","FHOMRBLD",175,0)
 ..S:FHLCOMN="" FHLCOMN="***"
"RTN","FHOMRBLD",176,0)
 ..I $G(FHLPT) D
"RTN","FHOMRBLD",177,0)
 ...S FHLOCN=$P($G(^FH(119.6,FHLPT,0)),U,1)
"RTN","FHOMRBLD",178,0)
 ...S:$P($G(^FH(119.6,FHLPT,0)),U,5) FHTCD=FHTCD_"T"
"RTN","FHOMRBLD",179,0)
 ...S:$P($G(^FH(119.6,FHLPT,0)),U,6) FHTCD=FHTCD_"C"
"RTN","FHOMRBLD",180,0)
 ...S:$P($G(^FH(119.6,FHLPT,0)),U,7) FHTCD=FHTCD_"D"
"RTN","FHOMRBLD",181,0)
 ..S:FHLOCN="" FHLOCN="***"
"RTN","FHOMRBLD",182,0)
 ..S FHDPT=$P(FHNODE,U,4)
"RTN","FHOMRBLD",183,0)
 ..S:$G(FHDPT) FHDIET=$P($G(^FH(111,FHDPT,0)),U,1)
"RTN","FHOMRBLD",184,0)
 ..S:FHDIET="" FHDIET="***"
"RTN","FHOMRBLD",185,0)
 ..S (FHAUTR,FHREQ)=""
"RTN","FHOMRBLD",186,0)
 ..S FHCOMM=$P(FHNODE,U,8)
"RTN","FHOMRBLD",187,0)
 ..S FHMEAL=$P(FHNODE,U,9)
"RTN","FHOMRBLD",188,0)
 ..S FHADDT=$P(FHNODE,U,7)
"RTN","FHOMRBLD",189,0)
 ..S FHAUTR=$P(FHNODE,U,6)
"RTN","FHOMRBLD",190,0)
 ..S FHREQ=$P(FHNODE,U,5)
"RTN","FHOMRBLD",191,0)
 ..S:$L(FHCOMM)>70 FHCOMM=$E(FHCOMM,1,70)
"RTN","FHOMRBLD",192,0)
 ..I $G(FHAUTR),($D(^VA(200,FHAUTR,0))) S FHAUTR=$P(^VA(200,FHAUTR,0),U,1)
"RTN","FHOMRBLD",193,0)
 ..I $G(FHREQ),($D(^VA(200,FHREQ,0))) S FHREQ=$P(^VA(200,FHREQ,0),U,1)
"RTN","FHOMRBLD",194,0)
 ..S (FHELT,FHELBG,FHELC)=""
"RTN","FHOMRBLD",195,0)
 ..I $D(^FHPT(FHDFN,"SM",FHSMDT,1)) D
"RTN","FHOMRBLD",196,0)
 ...S FHEL=$G(^FHPT(FHDFN,"SM",FHSMDT,1))
"RTN","FHOMRBLD",197,0)
 ...S FHELT=$P(FHEL,U,1)
"RTN","FHOMRBLD",198,0)
 ...S FHELBG=$P(FHEL,U,2)
"RTN","FHOMRBLD",199,0)
 ...S FHELC=$P(FHEL,U,3)
"RTN","FHOMRBLD",200,0)
 ..S FHDAT=FHDFN_"^"_FHD_"^"_FHSTAT_"^"_FHDIET_"^"_FHREQ
"RTN","FHOMRBLD",201,0)
 ..S FHDAT=FHDAT_"^"_FHAUTR_"^"_FHADDT_"^"_FHCOMM
"RTN","FHOMRBLD",202,0)
 ..S FHDAT=FHDAT_"^"_FHMEAL_"^"_FHELT_"^"_FHELBG_"^"_FHELC_"^"_FHTCD
"RTN","FHOMRBLD",203,0)
 ..S ^TMP($J,"OP","S",FHLCOMN,FHLOCN,FHPTNM,FHSMDT)=FHDAT
"RTN","FHOMRBLD",204,0)
 Q
"RTN","FHOMRBLD",205,0)
 ;
"RTN","FHOMRBLD",206,0)
NEWVAR ;new all variables.
"RTN","FHOMRBLD",207,0)
 N FHPTNM,FHD,FHDIET,FHMEAL,FHELTT,FHELBG,FHDAT,FHSTAT,FHLPT
"RTN","FHOMRBLD",208,0)
 N FHAGE,FHCH,FHCL,FHDOB,FHGMDT,FHML,FHNODE,FHPCZN,FHSEX,FHSSN,FILE
"RTN","FHOMRBLD",209,0)
 N FHDAT,FHDPT,FHEL,FHLPT,FHS,FHSMDT,FHSTAT,FHNN,FH
"RTN","FHOMRBLD",210,0)
 Q
"RTN","FHOMRC1")
0^162^B10151717
"RTN","FHOMRC1",1,0)
FHOMRC1 ;Hines OIFO/RTK RECURRING MEALS CANCEL MEAL  ;2/10/03  15:05
"RTN","FHOMRC1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRC1",3,0)
 ;
"RTN","FHOMRC1",4,0)
CRM ; Cancel entire recurring meal
"RTN","FHOMRC1",5,0)
 D GETRM I FHFIND=0 Q
"RTN","FHOMRC1",6,0)
 I $G(NUM)<1 Q
"RTN","FHOMRC1",7,0)
CRM1 W ! K DIR S DIR("A")="Cancel which order (or ALL)?",DIR(0)="FO^1:80"
"RTN","FHOMRC1",8,0)
 D ^DIR
"RTN","FHOMRC1",9,0)
 Q:$D(DIRUT)  S FHNUM=Y D RANGE^FHOMUTL I FHCLST="" D CRM1 Q
"RTN","FHOMRC1",10,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRC1",11,0)
 I Y=0!($D(DIRUT)) D END Q
"RTN","FHOMRC1",12,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=$P(FHLIST(FHC),U,1) D CANRM
"RTN","FHOMRC1",13,0)
 W "  ... done" D END Q
"RTN","FHOMRC1",14,0)
CANRM ;
"RTN","FHOMRC1",15,0)
 I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" Q
"RTN","FHOMRC1",16,0)
 K DIE S FHSTAT="C",DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=FHRNUM
"RTN","FHOMRC1",17,0)
 S DR="24////^S X=FHSTAT" D ^DIE
"RTN","FHOMRC1",18,0)
 S FHACT="C",FHOPTY="R" D SETAET^FHOMRO2
"RTN","FHOMRC1",19,0)
 Q
"RTN","FHOMRC1",20,0)
CA ; Cancel Additional Order
"RTN","FHOMRC1",21,0)
 D GETRM I FHFIND=0 Q
"RTN","FHOMRC1",22,0)
CA1 W ! K DIR S DIR("A")="Cancel which Additional Order (or ALL)?"
"RTN","FHOMRC1",23,0)
 S DIR(0)="FO^1:80" D ^DIR
"RTN","FHOMRC1",24,0)
 Q:$D(DIRUT)  S FHNUM=Y D RANGE^FHOMUTL I FHCLST="" D CA1 Q
"RTN","FHOMRC1",25,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRC1",26,0)
 I Y=0!($D(DIRUT)) D END Q
"RTN","FHOMRC1",27,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=$P(FHLIST(FHC),U,1) D CANAO
"RTN","FHOMRC1",28,0)
 W "  ... done" D END Q
"RTN","FHOMRC1",29,0)
CANAO ;
"RTN","FHOMRC1",30,0)
 I '$D(^FHPT(FHDFN,"OP",FHRNUM,1)) Q
"RTN","FHOMRC1",31,0)
 I $P($G(^FHPT(FHDFN,"OP",FHRNUM,1)),U,5)="C" Q
"RTN","FHOMRC1",32,0)
 K DIE S FHSTAT="C",DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=FHRNUM
"RTN","FHOMRC1",33,0)
 S DR="13.6////^S X=FHSTAT" D ^DIE
"RTN","FHOMRC1",34,0)
 S FHACT="C",FHOPTY="A" D SETAET^FHOMRO2
"RTN","FHOMRC1",35,0)
 Q
"RTN","FHOMRC1",36,0)
CE ; Cancel Early/Late Tray
"RTN","FHOMRC1",37,0)
 D GETRM I FHFIND=0 Q
"RTN","FHOMRC1",38,0)
CE1 W ! K DIR S DIR("A")="Cancel which Early/Late Tray (or ALL)?"
"RTN","FHOMRC1",39,0)
 S DIR(0)="FO^1:80" D ^DIR
"RTN","FHOMRC1",40,0)
 Q:$D(DIRUT)  S FHNUM=Y D RANGE^FHOMUTL I FHCLST="" D CE1 Q
"RTN","FHOMRC1",41,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRC1",42,0)
 I Y=0!($D(DIRUT)) D END Q
"RTN","FHOMRC1",43,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=$P(FHLIST(FHC),U,1) D CANEL
"RTN","FHOMRC1",44,0)
 W "  ... done" D END Q
"RTN","FHOMRC1",45,0)
CANEL ;
"RTN","FHOMRC1",46,0)
 I '$D(^FHPT(FHDFN,"OP",FHRNUM,2)) Q
"RTN","FHOMRC1",47,0)
 I $P($G(^FHPT(FHDFN,"OP",FHRNUM,2)),U,6)="C" Q
"RTN","FHOMRC1",48,0)
 K DIE S FHSTAT="C",DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=FHRNUM
"RTN","FHOMRC1",49,0)
 S DR="17.6////^S X=FHSTAT" D ^DIE
"RTN","FHOMRC1",50,0)
 S FHACT="C",FHOPTY="E" D SETAET^FHOMRO2
"RTN","FHOMRC1",51,0)
 Q
"RTN","FHOMRC1",52,0)
CT ; Cancel Tubefeeding
"RTN","FHOMRC1",53,0)
 D GETRM I FHFIND=0 Q
"RTN","FHOMRC1",54,0)
CT1 W ! K DIR S DIR("A")="Cancel which Tubefeeding (or ALL)?"
"RTN","FHOMRC1",55,0)
 S DIR(0)="FO^1:80" D ^DIR
"RTN","FHOMRC1",56,0)
 Q:$D(DIRUT)  S FHNUM=Y D RANGE^FHOMUTL I FHCLST="" D CT1 Q
"RTN","FHOMRC1",57,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRC1",58,0)
 I Y=0!($D(DIRUT)) D END Q
"RTN","FHOMRC1",59,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=$P(FHLIST(FHC),U,1) D CANTF
"RTN","FHOMRC1",60,0)
 W "  ... done" D END Q
"RTN","FHOMRC1",61,0)
CANTF ;
"RTN","FHOMRC1",62,0)
 I '$D(^FHPT(FHDFN,"OP",FHRNUM,3)) Q
"RTN","FHOMRC1",63,0)
 I $P($G(^FHPT(FHDFN,"OP",FHRNUM,3)),U,5)="C" Q
"RTN","FHOMRC1",64,0)
 K DIE S FHSTAT="C",DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=FHRNUM
"RTN","FHOMRC1",65,0)
 S DR="21.6////^S X=FHSTAT" D ^DIE
"RTN","FHOMRC1",66,0)
 S FHACT="C",FHOPTY="T" D SETAET^FHOMRO2
"RTN","FHOMRC1",67,0)
 Q
"RTN","FHOMRC1",68,0)
GETRM ; Select patient and get recurring meals
"RTN","FHOMRC1",69,0)
 S FHPSDT="N" D GETOPT^FHOMUTL I FHFIND=0 Q
"RTN","FHOMRC1",70,0)
 D DISP^FHOMRR1
"RTN","FHOMRC1",71,0)
 Q
"RTN","FHOMRC1",72,0)
END ;
"RTN","FHOMRC1",73,0)
 K A,FHFIND,FHCLST,FHC,FHCDT,NUM
"RTN","FHOMRC1",74,0)
 Q
"RTN","FHOMRE1")
0^163^B13383678
"RTN","FHOMRE1",1,0)
FHOMRE1 ;Hines OIFO/RTK OUTPATIENT MEALS EARLY/LATE TRAY  ;5/20/03  08:35
"RTN","FHOMRE1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRE1",3,0)
 ;
"RTN","FHOMRE1",4,0)
 S FHMSG1="E" D EN1,END Q
"RTN","FHOMRE1",5,0)
EN1 D GETOPT^FHOMUTL I FHFIND=0 Q
"RTN","FHOMRE1",6,0)
 K NUM D DISP^FHOMRR1 I $G(NUM)="" Q
"RTN","FHOMRE1",7,0)
EL1 K DIR S DIR(0)="NAO^1:"_NUM,DIR("A")="Early/Late Tray For Which Order? "
"RTN","FHOMRE1",8,0)
 D ^DIR Q:$D(DIRUT)
"RTN","FHOMRE1",9,0)
 S FHRMSEL=Y,FHC=FHRMSEL,FHRNUM=$P(FHLIST(FHRMSEL),U,1)
"RTN","FHOMRE1",10,0)
 S FHRMDT=$P(FHLIST(FHRMSEL),U,2),Y=FHRMDT D DD^%DT W !,Y,!
"RTN","FHOMRE1",11,0)
 I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" W !!?3,"The selected order has been cancelled!",! D EL1 Q
"RTN","FHOMRE1",12,0)
 I $D(^FHPT(FHDFN,"OP",FHRNUM,2)) W !,"Early/Late Tray already exists for this meal." K DIR S DIR(0)="YA",DIR("A")="Do you wish to overwrite? ",DIR("B")="N" D ^DIR Q:$D(DIRUT)  Q:Y'=1
"RTN","FHOMRE1",13,0)
 ; Only allow selection of one order at a time, rather than a range
"RTN","FHOMRE1",14,0)
 ; because they could be different meals which could have different
"RTN","FHOMRE1",15,0)
 ; allowable meal window times.
"RTN","FHOMRE1",16,0)
 K DIR S DIR(0)="SAO^E:EARLY;L:LATE",DIR("A")="Early or Late (E or L)? "
"RTN","FHOMRE1",17,0)
 D ^DIR I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMRE1",18,0)
 S FHEL=Y
"RTN","FHOMRE1",19,0)
ORD S FHLOC=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,3),FHORN="",FHMSG1="E"
"RTN","FHOMRE1",20,0)
 S FHDIET=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,2)
"RTN","FHOMRE1",21,0)
 S FHCOMM=$P($G(^FH(119.6,FHLOC,0)),U,8),FHCOMM1=$G(^FH(119.73,FHCOMM,1))
"RTN","FHOMRE1",22,0)
 S FHMEAL=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,4)
"RTN","FHOMRE1",23,0)
 S FH1=$S(FHMEAL="B":1,FHMEAL="N":7,1:13) I FHEL="L" S FH1=FH1+3
"RTN","FHOMRE1",24,0)
TIME S FH3=FH1+2,FHCNT=0 F FHT=FH1:1:FH3 D
"RTN","FHOMRE1",25,0)
 .I $P(FHCOMM1,U,FHT)="" Q
"RTN","FHOMRE1",26,0)
 .S FHCNT=FHCNT+1,FHTM(FHCNT)=$P(FHCOMM1,U,FHT)
"RTN","FHOMRE1",27,0)
 W !,"Select Time: ( " F J=1:1:FHCNT W J,"=",FHTM(J)," "
"RTN","FHOMRE1",28,0)
 R ") ",FHS:DTIME I FHS=""!(FHS["^") D EXMSG^FHOMUTL Q
"RTN","FHOMRE1",29,0)
 I (FHS'?1N)!(FHS<1)!(FHS>FHCNT) W !!,"Invalid time selection!" D TIME Q
"RTN","FHOMRE1",30,0)
 S FHTIME=FHTM(FHS),X=FHRMDT_"@"_FHTIME,%DT="XT" D ^%DT S FHDTM=Y
"RTN","FHOMRE1",31,0)
 D NOW^%DTC I FHDTM<% W !!,"Cannot order for a Date/Time before now!" D TIME Q
"RTN","FHOMRE1",32,0)
 K DIR S DIR(0)="SAO^Y:Yes;N:No",DIR("A")="Bagged Meal? ",DIR("B")="N"
"RTN","FHOMRE1",33,0)
 D ^DIR I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMRE1",34,0)
 S FHBAG=Y
"RTN","FHOMRE1",35,0)
 D SET,OKMSG^FHOMUTL Q
"RTN","FHOMRE1",36,0)
 ;
"RTN","FHOMRE1",37,0)
SET S DA=FHRNUM,DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"","
"RTN","FHOMRE1",38,0)
 D NOW^%DTC S FHTODAY=$E(%,1,12)
"RTN","FHOMRE1",39,0)
 S DR="14////^S X=FHTIME;15////^S X=FHBAG;16////^S X=DUZ;17////^S X=FHTODAY;17.5////^S X=FHORN;17.6////^S X=""@""" D ^DIE
"RTN","FHOMRE1",40,0)
 S FHACT="O",FHOPTY="E",FHAET=FHTIME D SETAET^FHOMRO2
"RTN","FHOMRE1",41,0)
END K A,FHFIND,FHCLST,FHC,FHCOMM,FH1,FH3,FHTEXT,NUM
"RTN","FHOMRE1",42,0)
 K FHSEL,FHT,FHCNT,FHCOMM1,FHS Q
"RTN","FHOMRE1",43,0)
 Q
"RTN","FHOMRE1",44,0)
HL7SET ;
"RTN","FHOMRE1",45,0)
 ; Entry point for E/L trays placed from CPRS/OERR
"RTN","FHOMRE1",46,0)
 S FHMEAL=$E(FHSVCP,1),FHEL=$E(FHSVCP,2),FHTM=$E(FHSVCP,3)
"RTN","FHOMRE1",47,0)
 I FHEL'?1"E",FHEL'?1"L" D GETOR^FHWOR,ERR^FHOMWOR Q
"RTN","FHOMRE1",48,0)
 I FHTM<1!(FHTM>3) S TXT="Invalid time" D GETOR^FHWOR,ERR^FHOMWOR Q
"RTN","FHOMRE1",49,0)
 S FHRMDT=STDT,ENDT=FHRMDT_.9999
"RTN","FHOMRE1",50,0)
 I '$D(^FHPT(FHDFN,"OP","B",FHRMDT)) S TXT="No Recurring Meal for this date/meal" D GETOR^FHWOR,ERR^FHOMWOR Q
"RTN","FHOMRE1",51,0)
 ;I $D(^FHPT(FHDFN,"OP",FHRNUM,2)) S TXT="Early/Late Tray already exists for this recurring meal" D GETOR^FHWOR,ERR^FHOMWOR Q
"RTN","FHOMRE1",52,0)
 S FH1=$S(FHMEAL="B":1,FHMEAL="N":7,1:13) I FHEL="L" S FH1=FH1+3
"RTN","FHOMRE1",53,0)
 S FH1=FH1+FHTM-1
"RTN","FHOMRE1",54,0)
 S FHCOMM=$P($G(^FH(119.6,FHLOC,0)),U,8),FHCOMM1=$G(^FH(119.73,FHCOMM,1))
"RTN","FHOMRE1",55,0)
 S FHTIME=$P(FHCOMM1,U,FH1),X1=STDT,X2=-1 D C^%DTC S STDT1=X
"RTN","FHOMRE1",56,0)
 F FHRMDT=STDT1:0 S FHRMDT=$O(^FHPT(FHDFN,"OP","B",FHRMDT)) Q:FHRMDT'>0!(FHRMDT>ENDT)  F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRMDT,FHRNUM)) Q:FHRNUM'>0  Q:$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,4)'=FHMEAL  D SET
"RTN","FHOMRE1",57,0)
 I '$D(FHRNUM) Q
"RTN","FHOMRE1",58,0)
 S FILL="E;"_FHRNUM_";"_FHTIME_";"_FHEL
"RTN","FHOMRE1",59,0)
 D SEND^FHWOR Q
"RTN","FHOMRMD")
0^352^B13565013
"RTN","FHOMRMD",1,0)
FHOMRMD ;Hines OIFO/RTK/FAI RECURRING MEALS REVIEW/DISPLAY  ;10/20/04  13:22
"RTN","FHOMRMD",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRMD",3,0)
 ;
"RTN","FHOMRMD",4,0)
DISP ;
"RTN","FHOMRMD",5,0)
 S X1=STDT,X2=-1 D C^%DTC S STDT=X
"RTN","FHOMRMD",6,0)
 I '$O(^FHPT(FHDFN,"OP","B",STDT)) W !!,"No Recurring Meals to Display" Q
"RTN","FHOMRMD",7,0)
 K FHLIST S EX="",NUM=0 D HDR I $G(ENDT)="" S ENDT=9999999.99
"RTN","FHOMRMD",8,0)
 F FHRMDT=STDT:0 S FHRMDT=$O(^FHPT(FHDFN,"OP","B",FHRMDT)) Q:FHRMDT'>0!(FHRMDT>ENDT)!(EX=U)  F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRMDT,FHRNUM)) Q:FHRNUM'>0!(EX=U)  D
"RTN","FHOMRMD",9,0)
 .S FHNODE=$G(^FHPT(FHDFN,"OP",FHRNUM,0))
"RTN","FHOMRMD",10,0)
 .S FHRM=$P(FHNODE,U,1)
"RTN","FHOMRMD",11,0)
 .S NUM=NUM+1,PAD=$S($L(NUM)<3:3-$L(NUM),1:1) W !?PAD,NUM
"RTN","FHOMRMD",12,0)
 .S FHLIST(NUM)=FHRNUM_"^"_FHRM
"RTN","FHOMRMD",13,0)
 .S FHDOW=$$DOW^XLFDT(FHRM),FHDOW=$E(FHDOW,1,3)
"RTN","FHOMRMD",14,0)
 .S FHDTP=$$FMTE^XLFDT(FHRM,"P") W ?6,FHDOW," - ",$E(FHDTP,1,12)
"RTN","FHOMRMD",15,0)
 .S FHLPT=$P(FHNODE,U,3),FHLOCZN=$G(^FH(119.6,FHLPT,0)) D
"RTN","FHOMRMD",16,0)
 ..S FHLOC=$E($P(FHLOCZN,U,1),1,10),FHSERV=$P(FHLOCZN,U,10)
"RTN","FHOMRMD",17,0)
 ..S FHSRV=$S(FHSERV["T":$P(FHLOCZN,U,5),FHSERV["C":$P(FHLOCZN,U,6),1:"")
"RTN","FHOMRMD",18,0)
 ..I FHSRV="" S FHSRVPT="" Q
"RTN","FHOMRMD",19,0)
 ..S FHSRVPT=$P($G(^FH(119.72,FHSRV,0)),U,1)
"RTN","FHOMRMD",20,0)
 ..Q
"RTN","FHOMRMD",21,0)
 .W ?26,FHLOC,?38,$E(FHSRVPT,1,9)
"RTN","FHOMRMD",22,0)
 .W ?51,$P(FHNODE,U,4),?56,$P(FHNODE,U,5)
"RTN","FHOMRMD",23,0)
 .I $P($G(^FH(119.6,FHLPT,1)),U,4)="Y" D DIETPAT W ?60,$E(FHDIETP,1,12)
"RTN","FHOMRMD",24,0)
 .I $P($G(^FH(119.6,FHLPT,1)),U,4)'="Y" S FHDPTR=$P(FHNODE,U,2) Q:FHDPTR=""  W ?60,$E($P($G(^FH(111,FHDPTR,0)),U,1),1,12)
"RTN","FHOMRMD",25,0)
 .S FHSTAT=$P(FHNODE,U,15) I FHSTAT="C" W ?76,"C"
"RTN","FHOMRMD",26,0)
 .I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHOMRMD",27,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,1)) D
"RTN","FHOMRMD",28,0)
 ..S FHNODE1=$G(^FHPT(FHDFN,"OP",FHRNUM,1))
"RTN","FHOMRMD",29,0)
 ..S FHSTATA=$P(FHNODE1,U,5) I FHSTATA="C" W !?7,"Additional Orders: ",$E($P(FHNODE1,U,1),1,46),?76,"C" Q
"RTN","FHOMRMD",30,0)
 ..W !?7,"Additional Orders: ",$P(FHNODE1,U,1)
"RTN","FHOMRMD",31,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,2)) D
"RTN","FHOMRMD",32,0)
 ..S FHNODE2=$G(^FHPT(FHDFN,"OP",FHRNUM,2))
"RTN","FHOMRMD",33,0)
 ..S FHEL=FHNODE2
"RTN","FHOMRMD",34,0)
 ..W !?7,"Early/Late Tray Time: ",$P(FHEL,U,1)
"RTN","FHOMRMD",35,0)
 ..W "  Bagged Meal: ",$P(FHEL,U,2)
"RTN","FHOMRMD",36,0)
 ..S FHSTATE=$P(FHNODE2,U,6) I FHSTATE="C" W ?76,"C"
"RTN","FHOMRMD",37,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,3)) D
"RTN","FHOMRMD",38,0)
 ..S FHNODE3=$G(^FHPT(FHDFN,"OP",FHRNUM,3))
"RTN","FHOMRMD",39,0)
 ..S FHTU=FHNODE3
"RTN","FHOMRMD",40,0)
 ..W !?7,"Tubefeeding: " S FHSTATT=$P(FHTU,U,5) I FHSTATT="C" W ?76,"C"
"RTN","FHOMRMD",41,0)
 ..F FHTZ=0:0 S FHTZ=$O(^FHPT(FHDFN,"OP",FHRNUM,"TF",FHTZ)) Q:FHTZ'>0  D
"RTN","FHOMRMD",42,0)
 ...S FHTUZN=$G(^FHPT(FHDFN,"OP",FHRNUM,"TF",FHTZ,0))
"RTN","FHOMRMD",43,0)
 ...S FHTUPTR=$P(FHTUZN,U,1),FHTUSTR=$P(FHTUZN,U,2)
"RTN","FHOMRMD",44,0)
 ...W !?9,$P($G(^FH(118.2,FHTUPTR,0)),U,1),"  Strength: "
"RTN","FHOMRMD",45,0)
 ...W $S(FHTUSTR=1:"1/4",FHTUSTR=2:"1/2",FHTUSTR=3:"3/4",1:"FULL")
"RTN","FHOMRMD",46,0)
 ...W "  Quantity: ",$P(FHTUZN,U,3)
"RTN","FHOMRMD",47,0)
 ..W !?7,"Total CC's: ",$P(FHTU,U,2),"  Total KCALS/DAY: ",$P(FHTU,U,3)
"RTN","FHOMRMD",48,0)
 ..S FHTCOMM=$P(FHTU,U,1) I FHTCOMM'="" W !?7,"Comment: ",FHTCOMM
"RTN","FHOMRMD",49,0)
 .Q
"RTN","FHOMRMD",50,0)
 W ! Q
"RTN","FHOMRMD",51,0)
DIETPAT ;
"RTN","FHOMRMD",52,0)
 S FHDIETS=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,7,11)
"RTN","FHOMRMD",53,0)
 S FHDIETP=""
"RTN","FHOMRMD",54,0)
 F PCE=1:1:5 D
"RTN","FHOMRMD",55,0)
 .S FHDPTR=$P(FHDIETS,U,PCE) I FHDPTR="" Q
"RTN","FHOMRMD",56,0)
 .S FHDNM=$P($G(^FH(111,FHDPTR,0)),U,7)
"RTN","FHOMRMD",57,0)
 .I FHDNM="" S FHDNM=$P($G(^FH(111,FHDPTR,0)),U,1)
"RTN","FHOMRMD",58,0)
 .S FHDIETP=FHDIETP_FHDNM_"," Q
"RTN","FHOMRMD",59,0)
 S FHDIETP=$E(FHDIETP,1,$L(FHDIETP)-1)
"RTN","FHOMRMD",60,0)
 Q
"RTN","FHOMRMD",61,0)
PG ;
"RTN","FHOMRMD",62,0)
 Q:$O(^FHPT(FHDFN,"OP","B",FHRMDT))'>0
"RTN","FHOMRMD",63,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHOMRMD",64,0)
 D HDR Q
"RTN","FHOMRMD",65,0)
HDR ;
"RTN","FHOMRMD",66,0)
 I $G(FHPP)'=1 W:$Y @IOF
"RTN","FHOMRMD",67,0)
 K FHPP W !?15,"R E C U R R I N G   M E A L S"
"RTN","FHOMRMD",68,0)
 W !!?3,"NAME: " D PATNAME^FHOMUTL W FHPTNM,"   ",FHSSN
"RTN","FHOMRMD",69,0)
 W !!?27,"Ordering",?38,"Service"
"RTN","FHOMRMD",70,0)
 W !?2,"#",?6,"Date/Time",?27,"Location",?38,"Point"
"RTN","FHOMRMD",71,0)
 W ?50,"Meal",?55,"Bag",?60,"Diet Ordered",?74,"Status"
"RTN","FHOMRMD",72,0)
 W !?1,"===",?6,"==================",?26,"=========="
"RTN","FHOMRMD",73,0)
 W ?38,"==========",?50,"====",?55,"===",?60,"============",?74,"======"
"RTN","FHOMRMD",74,0)
 Q
"RTN","FHOMRMD",75,0)
END ;
"RTN","FHOMRMD",76,0)
 K EX,FHDIET,FHDIETP,FHDIETS,FHDTP,FHFIND,FHLOC,FHLPT,FHNODE,FHRM
"RTN","FHOMRMD",77,0)
 K FHRNUM,FHDPTR,FHDNM Q
"RTN","FHOMRO1")
0^164^B48862987
"RTN","FHOMRO1",1,0)
FHOMRO1 ;Hines OIFO/RTK RECURRING MEALS ORDER EDIT  ;2/04/03  14:05
"RTN","FHOMRO1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRO1",3,0)
 ;
"RTN","FHOMRO1",4,0)
 S (FHDIET,FHORN)="" F FHDX=1:1:5 S FHDIETX(FHDX)=""
"RTN","FHOMRO1",5,0)
 S FHMSG1="R" D ^FHOMDPA I FHDFN="" Q
"RTN","FHOMRO1",6,0)
 I '$D(^FHPT(FHDFN,0)) W !!,"UNKNOWN SELECTION !" Q
"RTN","FHOMRO1",7,0)
 D NOW^%DTC S X1=$E(%,1,7),X2=-1 D C^%DTC S FHNOW=X D CHECK
"RTN","FHOMRO1",8,0)
 I FHEXST=1 D ORDEDT,END Q
"RTN","FHOMRO1",9,0)
 D ORDER,END Q
"RTN","FHOMRO1",10,0)
ORDEDT ;
"RTN","FHOMRO1",11,0)
 W !!,"This person has an existing outpatient diet order."
"RTN","FHOMRO1",12,0)
 K DIR S DIR(0)="SBO^E:Edit;O:New Order"
"RTN","FHOMRO1",13,0)
 S DIR("A")="Edit the existing diet or order another one" D ^DIR
"RTN","FHOMRO1",14,0)
 Q:$D(DIRUT)
"RTN","FHOMRO1",15,0)
 I Y="O" D ORDER Q
"RTN","FHOMRO1",16,0)
 I Y="E" D EDIT Q
"RTN","FHOMRO1",17,0)
 Q
"RTN","FHOMRO1",18,0)
ORDER ;
"RTN","FHOMRO1",19,0)
 W ! D OUTLOC^FHOMUTL I FHLOC="" D EXMSG^FHOMUTL Q
"RTN","FHOMRO1",20,0)
DIETORD ;
"RTN","FHOMRO1",21,0)
 I $P($G(^FH(119.6,FHLOC,1)),U,4)="Y" D MULTDT D:FHDIETX(1)="" EXMSG^FHOMUTL Q:FHDIETX(1)=""  D DATE Q
"RTN","FHOMRO1",22,0)
 D DIETLST^FHOMUTL I FHDEF="" W !!,"NO DEFAULT OUTPATIENT DIET SET!!",! Q
"RTN","FHOMRO1",23,0)
 S FHDEF=$P($G(^FH(111,FHDEF,0)),U,1)
"RTN","FHOMRO1",24,0)
 K DIC S DIC="^FH(111,",DIC("A")="Select DIET NAME: ",DIC(0)="AEMQZ"
"RTN","FHOMRO1",25,0)
 S DIC("B")=FHDEF,DIC("S")="I FHSPDTS[$P(^(0),U)" D ^DIC
"RTN","FHOMRO1",26,0)
 I $D(DUOUT) D EXMSG^FHOMUTL Q
"RTN","FHOMRO1",27,0)
 I Y=-1 D EXMSG^FHOMUTL Q
"RTN","FHOMRO1",28,0)
 S FHDIET=+Y
"RTN","FHOMRO1",29,0)
DATE ;
"RTN","FHOMRO1",30,0)
 K DIR S DIR("A")="Select Start Date: ",DIR(0)="DAO^DT" D ^DIR
"RTN","FHOMRO1",31,0)
 I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMRO1",32,0)
 S STDT=Y S Y=STDT D DD^%DT W "  ",Y
"RTN","FHOMRO1",33,0)
 S FHMAX=$P($G(^FH(119.6,FHLOC,1)),U,2) I FHMAX="" S FHMAX=999
"RTN","FHOMRO1",34,0)
 D NOW^%DTC S FHTODAY=$E(%,1,7),X1=FHTODAY,X2=FHMAX D C^%DTC S FHCUT=X
"RTN","FHOMRO1",35,0)
 K DIR S DIR("A")="Select End Date: ",DIR(0)="DAO^"_STDT_":"_FHCUT D ^DIR
"RTN","FHOMRO1",36,0)
 I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMRO1",37,0)
 S ENDT=Y S Y=ENDT D DD^%DT W "  ",Y
"RTN","FHOMRO1",38,0)
DAYS ;
"RTN","FHOMRO1",39,0)
 S FHIFLG=0 D SHDAYS
"RTN","FHOMRO1",40,0)
 K DIR S DIR("A")="Select Days of Week: ",DIR(0)="FAO"
"RTN","FHOMRO1",41,0)
 D ^DIR I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMRO1",42,0)
 S FHDAYS=Y D DAYCHK I FHIFLG=1 D DAYS Q
"RTN","FHOMRO1",43,0)
 K DIR S DIR("A")="Select MEAL: "
"RTN","FHOMRO1",44,0)
 S DIR(0)="SAO^B:Breakfast;N:Noon;E:Evening"
"RTN","FHOMRO1",45,0)
 D ^DIR I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMRO1",46,0)
 S FHMEAL=Y
"RTN","FHOMRO1",47,0)
 K DIR S DIR("A")="BAGGED MEAL?: ",DIR(0)="YA"
"RTN","FHOMRO1",48,0)
 D ^DIR I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMRO1",49,0)
 S FHBAG=$S(Y=1:"Y",1:"N") W !
"RTN","FHOMRO1",50,0)
 K DIR S DIR("A")="Is this correct?: ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRO1",51,0)
 S CONT=Y I CONT'=1 D EXMSG^FHOMUTL Q
"RTN","FHOMRO1",52,0)
 S STDTMP=STDT,FHTDTMP=FHTODAY D CHK1^FHOMRO2
"RTN","FHOMRO1",53,0)
 D SETNODE
"RTN","FHOMRO1",54,0)
 I FHSETFLG=0 W !!!?5,"No meals ordered!",! Q
"RTN","FHOMRO1",55,0)
 S FHACT="O",FHOPTY="R" D SETORX^FHOMRO2
"RTN","FHOMRO1",56,0)
 S FHMSG1="R" D OKMSG^FHOMUTL
"RTN","FHOMRO1",57,0)
 S FHLTFLG=0 I STDTMP=FHTDTMP D CHK2^FHOMRO2
"RTN","FHOMRO1",58,0)
 I FHLTFLG=1 F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHTODAY,FHRNUM)) Q:FHRNUM'>0  D
"RTN","FHOMRO1",59,0)
 .I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,4)'=FHMEAL Q
"RTN","FHOMRO1",60,0)
 .I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" Q
"RTN","FHOMRO1",61,0)
 .S FHEL="L",FHRMDT=FHTODAY D ORD^FHOMRE1
"RTN","FHOMRO1",62,0)
 Q
"RTN","FHOMRO1",63,0)
SETNODE ;
"RTN","FHOMRO1",64,0)
 S FHMPNUM=$O(^FHPT(FHDFN,"OP","C",""),-1) I FHMPNUM="" S FHMPNUM=0
"RTN","FHOMRO1",65,0)
 S FHMPNUM=FHMPNUM+1,FHSETFLG=0
"RTN","FHOMRO1",66,0)
 K ODAYS S CCC=0,X1=STDT,X2=-1 D C^%DTC S STDT=X
"RTN","FHOMRO1",67,0)
 S ENDL=0 F  Q:ENDL=1  D
"RTN","FHOMRO1",68,0)
 .S CCC=CCC+1,X1=STDT,X2=1 D C^%DTC S STDT=X
"RTN","FHOMRO1",69,0)
 .I STDT>ENDT S ENDL=1 Q
"RTN","FHOMRO1",70,0)
 .S X=STDT D DOW^%DTC
"RTN","FHOMRO1",71,0)
 .I FHDAYS[$E("XMTWRFS",Y+1) S ODAYS(STDT)=STDT D SET
"RTN","FHOMRO1",72,0)
 .Q
"RTN","FHOMRO1",73,0)
 Q
"RTN","FHOMRO1",74,0)
SET ;
"RTN","FHOMRO1",75,0)
 S FHPREVML=0 D PREV I FHPREVML=1 Q
"RTN","FHOMRO1",76,0)
 S FHSETFLG=1
"RTN","FHOMRO1",77,0)
 ;I $O(^FHPT(FHDFN,"OP","B",STDT,FHRNUM)) Q:FHRNUM'>0  D
"RTN","FHOMRO1",78,0)
 S Y=STDT K DIC,DO S DA(1)=FHDFN,DIC="^FHPT("_DA(1)_",""OP"","
"RTN","FHOMRO1",79,0)
 S DIC(0)="L"  ;,DIC("P")=$P(^DD(115,16,0),U,2),X=+Y,DINUM=X
"RTN","FHOMRO1",80,0)
 D FILE^DICN I Y=-1 Q
"RTN","FHOMRO1",81,0)
 K DIE S DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"","
"RTN","FHOMRO1",82,0)
 S DA=+Y
"RTN","FHOMRO1",83,0)
 S DR="1////^S X=FHDIET;2////^S X=FHLOC;3////^S X=FHMEAL;4////^S X=FHBAG;5////^S X=FHMPNUM;6////^S X=FHDIETX(1);7////^S X=FHDIETX(2);8////^S X=FHDIETX(3);9////^S X=FHDIETX(4);10////^S X=FHDIETX(5);.05////^S X=FHORN" D ^DIE
"RTN","FHOMRO1",84,0)
 Q
"RTN","FHOMRO1",85,0)
MULTDT ;
"RTN","FHOMRO1",86,0)
 S FHDIET="@" F FHDX=1:1:5 S FHDIETX(FHDX)="@"
"RTN","FHOMRO1",87,0)
 D ^FHOMRO3 I $O(FHDI(0))="" F FHDX=1:1:5 S FHDIETX(FHDX)="" Q
"RTN","FHOMRO1",88,0)
 S FHDX=0 F FHD0=0:0 S FHD0=$O(FHDI(FHD0)) Q:FHD0=""  S FHDX=FHDX+1,FHDIETX(FHDX)=$P(FHDI(FHD0),"^",1)
"RTN","FHOMRO1",89,0)
 Q
"RTN","FHOMRO1",90,0)
SHDAYS ;
"RTN","FHOMRO1",91,0)
 W !!,"          Mon  Tues  Wed  Thur  Fri  Sat  Sun"
"RTN","FHOMRO1",92,0)
 W !,"           M     T    W     R    F    S    X"
"RTN","FHOMRO1",93,0)
 W !!,"Enter string of characters for desired days of week: e.g., MWF",!
"RTN","FHOMRO1",94,0)
 Q
"RTN","FHOMRO1",95,0)
DAYCHK ;
"RTN","FHOMRO1",96,0)
 S X=FHDAYS D TR^FH S FHDAYS=X
"RTN","FHOMRO1",97,0)
 S X1="" F K=1:1 S Z=$E(FHDAYS,K) Q:Z=""!(FHIFLG=1)  D
"RTN","FHOMRO1",98,0)
 .I X1[Z S FHIFLG=1 Q
"RTN","FHOMRO1",99,0)
 .I "MTWRFSX"'[Z S FHIFLG=1 Q
"RTN","FHOMRO1",100,0)
 .S X1=X1_Z Q
"RTN","FHOMRO1",101,0)
 I FHIFLG=1 W !!,"Please enter the desired days of the week.",!
"RTN","FHOMRO1",102,0)
 Q
"RTN","FHOMRO1",103,0)
PREV ;
"RTN","FHOMRO1",104,0)
 F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",STDT,FHRNUM)) Q:FHRNUM'>0!(FHPREVML=1)  D
"RTN","FHOMRO1",105,0)
 .I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,4)'=FHMEAL Q
"RTN","FHOMRO1",106,0)
 .I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" Q
"RTN","FHOMRO1",107,0)
 .D PATNAME^FHOMUTL S FHPREDT=$$FMTE^XLFDT(STDT,"P") I $G(FHHL7)'=1 D
"RTN","FHOMRO1",108,0)
 ..W !!?3,FHPTNM," ALREADY HAS A "
"RTN","FHOMRO1",109,0)
 ..W $S(FHMEAL="B":"BREAKFAST",FHMEAL="N":"NOON",1:"EVENING")
"RTN","FHOMRO1",110,0)
 ..W " MEAL ORDERED FOR ",FHPREDT
"RTN","FHOMRO1",111,0)
 .S FHPREVML=1
"RTN","FHOMRO1",112,0)
 Q
"RTN","FHOMRO1",113,0)
CHECK ;
"RTN","FHOMRO1",114,0)
 S FHEXST=0 I $O(^FHPT(FHDFN,"OP","B",FHNOW)) D
"RTN","FHOMRO1",115,0)
 .F FHRMDT=FHNOW:0 S FHRMDT=$O(^FHPT(FHDFN,"OP","B",FHRMDT)) Q:FHRMDT'>0  F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRMDT,FHRNUM)) Q:FHRNUM'>0  I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)'="C" S FHEXST=1
"RTN","FHOMRO1",116,0)
 Q
"RTN","FHOMRO1",117,0)
END ;Kill local variables before exiting
"RTN","FHOMRO1",118,0)
 K A,AA,AB,FHBAG,CCC,CONT,ENDL,ENDT,FHDFN,FHDAYS,FHDEF,FHDIET,FHDIETS
"RTN","FHOMRO1",119,0)
 K FHDIETX1,FHDIETX2,FHDIETX3,FHDIETX4,FHDIETX5,FHEXST,FHIFLG,FHLOC
"RTN","FHOMRO1",120,0)
 K FHMPNUM,FHYIEN,FLAG,J,FHMEAL,MLT,ODAYS,SPDIETS,STDT
"RTN","FHOMRO1",121,0)
 Q
"RTN","FHOMRO1",122,0)
EDIT ;
"RTN","FHOMRO1",123,0)
 D NOW^%DTC S STDT=$E(%,1,7),FHDTRLE=%
"RTN","FHOMRO1",124,0)
 D DISP^FHOMRR1
"RTN","FHOMRO1",125,0)
EDT1 K DIR S DIR(0)="NAO^1:"_NUM,DIR("A")="Edit Which Order? " D ^DIR
"RTN","FHOMRO1",126,0)
 Q:$D(DIRUT)
"RTN","FHOMRO1",127,0)
 S ORDNUM=Y,Y=$P(FHLIST(ORDNUM),U,2) D DD^%DT W !,Y,!
"RTN","FHOMRO1",128,0)
 S DA=$P(FHLIST(ORDNUM),U,1),DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"","
"RTN","FHOMRO1",129,0)
 I $P($G(^FHPT(FHDFN,"OP",DA,0)),U,15)="C" W !!?3,"The selected order has been cancelled!",! D EDT1 Q
"RTN","FHOMRO1",130,0)
 S FHLPT=$P($G(^FHPT(FHDFN,"OP",DA,0)),U,3),FHBAG=$P($G(^FHPT(FHDFN,"OP",DA,0)),U,5)
"RTN","FHOMRO1",131,0)
 D OUTLOC I FHLOC="" D UPXMSG^FHOMUTL Q
"RTN","FHOMRO1",132,0)
 I $P($G(^FH(119.6,FHLOC,1)),U,4)="Y" D MULTDT D:FHDIETX(1)="" UPXMSG^FHOMUTL Q:FHDIETX(1)=""  S FHDIET="@" D SETEDT Q
"RTN","FHOMRO1",133,0)
 D DIETLST^FHOMUTL I FHDEF="" W !!,"NO DEFAULT OUTPATIENT DIET SET!!",! Q
"RTN","FHOMRO1",134,0)
 S FHDEF2=$P($G(^FHPT(FHDFN,"OP",DA,0)),U,2) I FHDEF2'="" S FHDEF=$P($G(^FH(111,FHDEF2,0)),U,1)
"RTN","FHOMRO1",135,0)
 K DIC S DIC="^FH(111,",DIC("A")="Select DIET NAME: ",DIC(0)="AEMQZ"
"RTN","FHOMRO1",136,0)
 S DIC("B")=FHDEF,DIC("S")="I FHSPDTS[$P(^(0),U)" D ^DIC
"RTN","FHOMRO1",137,0)
 I $D(DUOUT) D UPXMSG^FHOMUTL Q
"RTN","FHOMRO1",138,0)
 I Y=-1 D UPXMSG^FHOMUTL Q
"RTN","FHOMRO1",139,0)
 S FHDIET=+Y F FHDX=1:1:5 S FHDIETX(FHDX)="@"
"RTN","FHOMRO1",140,0)
 ;
"RTN","FHOMRO1",141,0)
SETEDT ;
"RTN","FHOMRO1",142,0)
 K DIR S DIR("A")="BAGGED MEAL?: ",DIR(0)="YA",DIR("B")=FHBAG
"RTN","FHOMRO1",143,0)
 D ^DIR I $D(DIRUT) D UPXMSG^FHOMUTL Q
"RTN","FHOMRO1",144,0)
 S FHBAG=$S(Y=1:"Y",1:"N") W !
"RTN","FHOMRO1",145,0)
 S DR="4////^S X=FHBAG;2////^S X=FHLOC;1////^S X=FHDIET;6////^S X=FHDIETX(1);7////^S X=FHDIETX(2);8////^S X=FHDIETX(3);9////^S X=FHDIETX(4);10////^S X=FHDIETX(5);25////^S X=FHDTRLE"
"RTN","FHOMRO1",146,0)
 D ^DIE,UPDMSG^FHOMUTL
"RTN","FHOMRO1",147,0)
 Q
"RTN","FHOMRO1",148,0)
OUTLOC ;Prompt for outpatient location - screen for ONLY Outpatient Locations
"RTN","FHOMRO1",149,0)
 S FHLOC="",FHOUT="O"
"RTN","FHOMRO1",150,0)
 K DIC S DIC="^FH(119.6,",DIC(0)="AEQZ",DIC("B")=FHLPT
"RTN","FHOMRO1",151,0)
 S DIC("A")="Select OUTPATIENT LOCATION: "
"RTN","FHOMRO1",152,0)
 S DIC("S")="I $P(^(0),U,3)=FHOUT" D ^DIC
"RTN","FHOMRO1",153,0)
 Q:$D(DUOUT)  I Y=-1 Q
"RTN","FHOMRO1",154,0)
 S FHLOC=+Y Q
"RTN","FHOMRO1",155,0)
 ;
"RTN","FHOMRO1",156,0)
XXXXX ;
"RTN","FHOMRO1",157,0)
 I FHLTFLG=1 F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHTODAY,FHRNUM)) Q:FHRNUM'>0  D
"RTN","FHOMRO1",158,0)
 .I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,4)'=FHMEAL Q
"RTN","FHOMRO1",159,0)
 .I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" Q
"RTN","FHOMRO1",160,0)
 .S FHEL="L",FHRMDT=FHTODAY W !,FHTODAY,!,FHRMDT,!,FHRNUM,!,FHDFN,!,FHLTFLG,!,FHMEAL
"RTN","FHOMRO2")
0^165^B17528698
"RTN","FHOMRO2",1,0)
FHOMRO2 ;Hines OIFO/RTK CHECK MEAL WINDOW TIMES,FILE OP EVENTS ;2/04/03  14:05
"RTN","FHOMRO2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRO2",3,0)
 ;
"RTN","FHOMRO2",4,0)
 ; IF TIME (NOW) IS PAST MEAL SELECTED WINDOW DISPLAY MSG; SKIP TODAY
"RTN","FHOMRO2",5,0)
 ; IF TIME (NOW) IS WITHIN THE MEAL WINDOW (SEE FHORD1A) ASK "DO YOU
"RTN","FHOMRO2",6,0)
 ;   WANT TO ORDER A LATE TRAY" IF YES, LET THEM; IF NO SKIP TODAY
"RTN","FHOMRO2",7,0)
CHK1 ; Check if meal is past for today
"RTN","FHOMRO2",8,0)
 S X=FHTODAY D H^%DTC S FHK=$E("XMTWRFS",%Y+1) I FHDAYS'[FHK Q
"RTN","FHOMRO2",9,0)
 D VARS
"RTN","FHOMRO2",10,0)
 I FHMEAL="B",FHTIME>$P(FHWIND2,U,2) D MSG Q
"RTN","FHOMRO2",11,0)
 I FHMEAL="N",FHTIME>$P(FHWIND2,U,4) D MSG Q
"RTN","FHOMRO2",12,0)
 I FHMEAL="E",FHTIME>$P(FHWIND2,U,6) D MSG Q
"RTN","FHOMRO2",13,0)
 Q
"RTN","FHOMRO2",14,0)
CHK2 ; Check if late tray needs to be ordered
"RTN","FHOMRO2",15,0)
 S X=FHTODAY D H^%DTC S FHK=$E("XMTWRFS",%Y+1) I FHDAYS'[FHK Q
"RTN","FHOMRO2",16,0)
 D VARS
"RTN","FHOMRO2",17,0)
 I FHMEAL="B",FHTIME>$P(FHWIND2,U,1),FHTIME<$P(FHWIND2,U,2) D LATE
"RTN","FHOMRO2",18,0)
 I FHMEAL="N",FHTIME>$P(FHWIND2,U,3),FHTIME<$P(FHWIND2,U,4) D LATE
"RTN","FHOMRO2",19,0)
 I FHMEAL="E",FHTIME>$P(FHWIND2,U,5),FHTIME<$P(FHWIND2,U,6) D LATE
"RTN","FHOMRO2",20,0)
 Q
"RTN","FHOMRO2",21,0)
VARS ;
"RTN","FHOMRO2",22,0)
 S FHWIND1=$G(^FH(119.73,FHCOMM,1)),FHWIND2=$G(^FH(119.73,FHCOMM,2))
"RTN","FHOMRO2",23,0)
 D NOW^%DTC S FHTIME=$E($P(%,".",2),1,4)
"RTN","FHOMRO2",24,0)
 S MLTX=$S(FHMEAL="B":"breakfast",FHMEAL="N":"noon",1:"evening"),SKIP=0
"RTN","FHOMRO2",25,0)
 Q
"RTN","FHOMRO2",26,0)
SMGM ;entry point for Special/Guest meals
"RTN","FHOMRO2",27,0)
 S FHWIND1=$G(^FH(119.73,FHCOMM,1)),FHWIND2=$G(^FH(119.73,FHCOMM,2))
"RTN","FHOMRO2",28,0)
 D NOW^%DTC S FHTIME=$E($P(%,".",2),1,4)
"RTN","FHOMRO2",29,0)
 S MLTX=$S(FHMEAL="B":"breakfast",FHMEAL="N":"noon",1:"evening"),SKIP=0
"RTN","FHOMRO2",30,0)
 I FHMEAL="B",FHTIME>$P(FHWIND2,U,2) D MSG Q
"RTN","FHOMRO2",31,0)
 I FHMEAL="N",FHTIME>$P(FHWIND2,U,4) D MSG Q
"RTN","FHOMRO2",32,0)
 I FHMEAL="E",FHTIME>$P(FHWIND2,U,6) D MSG Q
"RTN","FHOMRO2",33,0)
 I FHMEAL="B",FHTIME>$P(FHWIND2,U,1),FHTIME<$P(FHWIND2,U,2) D LATE
"RTN","FHOMRO2",34,0)
 I FHMEAL="N",FHTIME>$P(FHWIND2,U,3),FHTIME<$P(FHWIND2,U,4) D LATE
"RTN","FHOMRO2",35,0)
 I FHMEAL="E",FHTIME>$P(FHWIND2,U,5),FHTIME<$P(FHWIND2,U,6) D LATE
"RTN","FHOMRO2",36,0)
 Q
"RTN","FHOMRO2",37,0)
MSG ;
"RTN","FHOMRO2",38,0)
 W !!,"The ",MLTX," window has passed for today!  Not ordered for today."
"RTN","FHOMRO2",39,0)
 D SKIP Q
"RTN","FHOMRO2",40,0)
LATE ;
"RTN","FHOMRO2",41,0)
 I $G(FHGML)=1 Q
"RTN","FHOMRO2",42,0)
 W !,"You have missed the ",MLTX," cut-off."
"RTN","FHOMRO2",43,0)
 K DIR S DIR("A")="Do you wish to order a LATE TRAY for today? (Y/N): "
"RTN","FHOMRO2",44,0)
 S DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRO2",45,0)
 I $D(DIRUT) D SKIP Q
"RTN","FHOMRO2",46,0)
 S FHLATE=Y I FHLATE'=1 D SKIP Q
"RTN","FHOMRO2",47,0)
 S FHLTFLG=1
"RTN","FHOMRO2",48,0)
 Q
"RTN","FHOMRO2",49,0)
SKIP ;
"RTN","FHOMRO2",50,0)
 S SKIP=1,X1=STDT,X2=1 D C^%DTC S STDT=X ;add (skip) a day to Start Date
"RTN","FHOMRO2",51,0)
 Q
"RTN","FHOMRO2",52,0)
 ;
"RTN","FHOMRO2",53,0)
 ; Entry points for filing Outpatient Dietetic Events
"RTN","FHOMRO2",54,0)
SETSM ; Set specific variables for SM Events then call SETORX
"RTN","FHOMRO2",55,0)
 S FHDIET=$P(FHZN,U,4),FHLOC=$P(FHZN,U,3),FHMEAL=$P(FHZN,U,9)
"RTN","FHOMRO2",56,0)
 D SETORX Q
"RTN","FHOMRO2",57,0)
SETGM ; Set specific variables for GM Events then call SETORX
"RTN","FHOMRO2",58,0)
 S FHDIET=$P(FHZN,U,6),FHLOC=$P(FHZN,U,5),FHMEAL=$P(FHZN,U,3)
"RTN","FHOMRO2",59,0)
 D SETORX Q
"RTN","FHOMRO2",60,0)
SETAET ; Set specific variables for RM AO, E/L, TF Events then do SETORX
"RTN","FHOMRO2",61,0)
 S FHZN=$G(^FHPT(FHDFN,"OP",+FHRNUM,0)),FHDIET=$P(FHZN,U,2)
"RTN","FHOMRO2",62,0)
 S FHLOC=$P(FHZN,U,3),FHMEAL=$P(FHZN,U,4)
"RTN","FHOMRO2",63,0)
 I $G(FHC) S FHOPDT=$P(FHLIST(FHC),U,2) D SETORX Q
"RTN","FHOMRO2",64,0)
 S FHOPDT=FHRMDT
"RTN","FHOMRO2",65,0)
SETORX ; Set variables for RM Events and call FHORX
"RTN","FHOMRO2",66,0)
 I $G(FHOPDT)'="" S FHOPDT=$P($$FMTE^XLFDT(FHOPDT,"P"),",",1)
"RTN","FHOMRO2",67,0)
 K FHTXT S (FHDDISP,FHLDSP)=""
"RTN","FHOMRO2",68,0)
 I FHDIET'="" S FHDDISP=$P($G(^FH(111,FHDIET,0)),U,1)
"RTN","FHOMRO2",69,0)
 I FHLOC'="" S FHLDSP=$P($G(^FH(119.6,FHLOC,0)),U,1)
"RTN","FHOMRO2",70,0)
 S FHMLDSP=$S(FHMEAL="B":"Breakfast",FHMEAL="N":"Noon",1:"Evening")
"RTN","FHOMRO2",71,0)
 S FHFROMD=$O(ODAYS("")),FHFROMD=$P($$FMTE^XLFDT(FHFROMD,"P"),",",1)
"RTN","FHOMRO2",72,0)
 S FHTOD=$O(ODAYS(""),-1),FHTOD=$P($$FMTE^XLFDT(FHTOD,"P"),",",1)
"RTN","FHOMRO2",73,0)
 S FHOPTY2="Outpatient "_$S(FHOPTY="R":"Recurring Meal",FHOPTY="S":"Special Meal",FHOPTY="G":"Guest Meal",FHOPTY="I":"Isolation/Precaution",FHOPTY="A":"Add. Order",FHOPTY="E":"E/L Tray",1:"TF")
"RTN","FHOMRO2",74,0)
 S FHACT2=$S(FHACT="O":": ",1:" cancelled: ") I FHOPTY="S" S FHACT2=$S(FHSTAT="A":" authorized: ",FHSTAT="D":" denied: ",1:FHACT2)
"RTN","FHOMRO2",75,0)
 S FHTXT=FHOPTY2_FHACT2_FHDDISP_", "_FHLDSP_", "_FHMLDSP
"RTN","FHOMRO2",76,0)
 I FHOPTY="R",FHACT="O" D DAYS S FHTXT=FHTXT_", "_FHDAZ_", "_FHFROMD_"-"_FHTOD D OPFILE^FHORX Q
"RTN","FHOMRO2",77,0)
 S FHTXT=FHTXT_", "_$G(FHOPDT) I $G(FHAET)'="" S FHTXT=FHTXT_", "_FHAET
"RTN","FHOMRO2",78,0)
 I FHOPTY="I" S FHTXT=$P(FHTXT,":",1)_": "_FHIP
"RTN","FHOMRO2",79,0)
 D OPFILE^FHORX Q
"RTN","FHOMRO2",80,0)
DAYS ; External display of Days
"RTN","FHOMRO2",81,0)
 S FHDAZ="" F A=1:1:7 S B=$E(FHDAYS,A) Q:B=""  S FHDAZ=FHDAZ_$S(B="M":"Mon",B="T":"Tue",B="W":"Wed",B="R":"Thu",B="F":"Fri",B="S":"Sat",1:"Sun")_"/"
"RTN","FHOMRO2",82,0)
 S FHDAZ=$E(FHDAZ,1,$L(FHDAZ)-1)
"RTN","FHOMRO2",83,0)
 Q
"RTN","FHOMRO3")
0^348^B3405082
"RTN","FHOMRO3",1,0)
FHOMRO3 ;Hines OIFO/RTK OUTPATIENT ORDER MULTIPLE DIETS ;9/28/04  10:05
"RTN","FHOMRO3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRO3",3,0)
 ;
"RTN","FHOMRO3",4,0)
 ;Code reused from FHORD1
"RTN","FHOMRO3",5,0)
 K FHDI,PREC S N1=0
"RTN","FHOMRO3",6,0)
F1 ;
"RTN","FHOMRO3",7,0)
 W ! K DIC S DIC="^FH(111,",DIC(0)="AEQMZ"
"RTN","FHOMRO3",8,0)
 S DIC("S")="I '$D(^(""I""))&(Y>0)" D ^DIC
"RTN","FHOMRO3",9,0)
 K DIC G AB:X[U!$D(DTOUT),F5:X="",F1:Y<1
"RTN","FHOMRO3",10,0)
 S PREC=$P(Y(0),U,4) I PREC,$D(FHDI(PREC)) W *7,!!,"This conflicts with ",$P(FHDI(PREC),"^",2),! G F1
"RTN","FHOMRO3",11,0)
 S N1=N1+1,FHDI(PREC)=+Y_"^"_Y(0) G F5:+Y=1,F1:N1<5 W *7,!!,"You have now selected the maximum of 5 Diet Modifications!"
"RTN","FHOMRO3",12,0)
F5 ;
"RTN","FHOMRO3",13,0)
 G:'N1 AB W !!,"You have selected the following Diet:",!
"RTN","FHOMRO3",14,0)
 S (FHD3,FHD4)=0 F FHD0=0:0 S FHD0=$O(FHDI(FHD0)) Q:FHD0=""  W !?5,$P(FHDI(FHD0),U,2) S:$P(FHDI(FHD0),U,4)="Y" FHD3=1 S:$P(FHDI(FHD0),U,7)="Y" FHD4=1
"RTN","FHOMRO3",15,0)
F9 ;
"RTN","FHOMRO3",16,0)
 R !!,"Is this Correct? Y// ",Y:DTIME G:'$T!(Y="^") AB S:Y="" Y="Y" S X=Y D TR^FH S Y=X
"RTN","FHOMRO3",17,0)
 I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,!,"  Answer YES to accept diet list; NO to select diets again" G F9
"RTN","FHOMRO3",18,0)
 I Y'?1"Y".E K FHDI S N1=0 W !!,"Select new diets ..." G F1
"RTN","FHOMRO3",19,0)
 Q
"RTN","FHOMRO3",20,0)
AB K FHDI S N1=0 Q
"RTN","FHOMRP1")
0^166^B7865299
"RTN","FHOMRP1",1,0)
FHOMRP1 ;Hines OIFO/RTK RECURRING MEALS PRINT EXPIRING LIST  ;4/17/03  09:45
"RTN","FHOMRP1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRP1",3,0)
 W ! K DIR,DIC S DIR("A")="Select Outpatient Ordering Location: "
"RTN","FHOMRP1",4,0)
 S DIR(0)="PAO^119.6:EMQZ" D ^DIR Q:$D(DIRUT)
"RTN","FHOMRP1",5,0)
 I Y'=-1 S FHLOC=+Y
"RTN","FHOMRP1",6,0)
 S FHPARAM=$P($G(^FH(119.6,FHLOC,1)),U,3),FHNOEP=0
"RTN","FHOMRP1",7,0)
 I FHPARAM="" D  Q
"RTN","FHOMRP1",8,0)
 .W !!?5,"NOTICE: No value set for 'NUMBER OF DAYS FOR REVIEW' "
"RTN","FHOMRP1",9,0)
 .W !?5,"parameter -- CAN'T CONTINUE",!! Q
"RTN","FHOMRP1",10,0)
 D NOW^%DTC S FHTODAY=X,X1=FHTODAY,X2=FHPARAM D C^%DTC S FHDSDT=X
"RTN","FHOMRP1",11,0)
 S FHD=$$FMTE^XLFDT(FHDSDT,"P")
"RTN","FHOMRP1",12,0)
 W ! K DIR,DIC S DIR("A")="Display recurring meals expiring by: "
"RTN","FHOMRP1",13,0)
 S DIR(0)="DAEO^"_DT,DIR("B")=FHD D ^DIR Q:$D(DIRUT)
"RTN","FHOMRP1",14,0)
 I Y'=-1 S FHNDAYS=+Y
"RTN","FHOMRP1",15,0)
DEV ;get device and set up queue
"RTN","FHOMRP1",16,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHOMRP1",17,0)
 I '$D(IO("Q")) U IO D DISP,^%ZISC,END Q
"RTN","FHOMRP1",18,0)
 S ZTRTN="DISP^FHOMRP1"
"RTN","FHOMRP1",19,0)
 S ZTSAVE("FHLOC")="",ZTSAVE("FHPARAM")="",ZTSAVE("FHNDAYS")=""
"RTN","FHOMRP1",20,0)
 S ZTSAVE("FHTODAY")="",ZTSAVE("FHNOEP")=""
"RTN","FHOMRP1",21,0)
 S ZTDESC="Print Recurring Meals Expiration List" D ^%ZTLOAD
"RTN","FHOMRP1",22,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHOMRP1",23,0)
 D END Q
"RTN","FHOMRP1",24,0)
DISP ;
"RTN","FHOMRP1",25,0)
 S FHLZN=$G(^FH(119.6,FHLOC,0)),FHLOCNM=$P(FHLZN,U,1)
"RTN","FHOMRP1",26,0)
 W !!?2,"OUTPATIENT LOCATION: ",FHLOCNM
"RTN","FHOMRP1",27,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("C",FHLOC,FHDFN)) Q:FHDFN'>0  D
"RTN","FHOMRP1",28,0)
 .S FHRNUM=$O(^FHPT("C",FHLOC,FHDFN,""),-1)
"RTN","FHOMRP1",29,0)
 .S FHDT=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,1)
"RTN","FHOMRP1",30,0)
 .I FHDT<FHNDAYS,FHDT>FHTODAY D
"RTN","FHOMRP1",31,0)
 ..S FHNODE=$G(^FHPT(FHDFN,"OP",FHRNUM,0))
"RTN","FHOMRP1",32,0)
 ..D PATNAME^FHOMUTL S FHNOEP=1
"RTN","FHOMRP1",33,0)
 ..S FHDATE=$$FMTE^XLFDT(FHDT,"P")
"RTN","FHOMRP1",34,0)
 ..W !!?3,FHPTNM,"  RECURRING DIET ORDER EXPIRES ON: ",$E(FHDATE,1,12)
"RTN","FHOMRP1",35,0)
 ..W !?27,"Ordering",?38,"Service",!?6,"Date/Time",?27,"Location"
"RTN","FHOMRP1",36,0)
 ..W ?38,"Point",?50,"Meal",?55,"Bag",?60,"Diet Ordered"
"RTN","FHOMRP1",37,0)
 ..W !?6,"==================",?26,"=========="
"RTN","FHOMRP1",38,0)
 ..W ?38,"==========",?50,"====",?55,"===",?60,"============"
"RTN","FHOMRP1",39,0)
 ..;S FHDTP=$$FMTE^XLFDT(FHRM,"P") W ?6,FHDOW," - ",$E(FHDTP,1,12)
"RTN","FHOMRP1",40,0)
 ..S FHLNM=$E($P(FHLZN,U,1),1,10),FHSERV=$P(FHLZN,U,10)
"RTN","FHOMRP1",41,0)
 ..S FHSRV=$S(FHSERV["T":$P(FHLZN,U,5),FHSERV["C":$P(FHLZN,U,6),1:"")
"RTN","FHOMRP1",42,0)
 ..I FHSRV="" S FHSRVPT="" Q
"RTN","FHOMRP1",43,0)
 ..S FHSRVPT=$P($G(^FH(119.72,FHSRV,0)),U,1)
"RTN","FHOMRP1",44,0)
 ..W !?6,$E(FHDATE,1,12),?26,FHLNM,?38,$E(FHSRVPT,1,9)
"RTN","FHOMRP1",45,0)
 ..W ?51,$P(FHNODE,U,4),?56,$P(FHNODE,U,5)
"RTN","FHOMRP1",46,0)
 ..I $P($G(^FH(119.6,FHLOC,1)),U,4)="Y" D DIETPAT^FHOMRR1 W ?60,$E(FHDIETP,1,20)
"RTN","FHOMRP1",47,0)
 ..I $P($G(^FH(119.6,FHLOC,1)),U,4)'="Y" S FHDPTR=$P(FHNODE,U,2) W ?60,$E($P($G(^FH(111,FHDPTR,0)),U,1),1,20)
"RTN","FHOMRP1",48,0)
 I FHNOEP=0 D
"RTN","FHOMRP1",49,0)
 .S FHDSPDT=$$FMTE^XLFDT(FHNDAYS,"P")
"RTN","FHOMRP1",50,0)
 .W !!?3,"NO RECURRING MEAL PLANS EXPIRING FOR ",FHLOCNM
"RTN","FHOMRP1",51,0)
 .W " BEFORE ",FHDSPDT,"."
"RTN","FHOMRP1",52,0)
 Q
"RTN","FHOMRP1",53,0)
END ;
"RTN","FHOMRP1",54,0)
 K FHLOC,FHPARAM Q
"RTN","FHOMRR1")
0^167^B17681030
"RTN","FHOMRR1",1,0)
FHOMRR1 ;Hines OIFO/RTK RECURRING MEALS REVIEW/DISPLAY  ;2/04/03  14:05
"RTN","FHOMRR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRR1",3,0)
 ;
"RTN","FHOMRR1",4,0)
 D GETOPT^FHOMUTL I FHFIND=0 Q
"RTN","FHOMRR1",5,0)
 I STDT="" Q
"RTN","FHOMRR1",6,0)
 D ENDATE^FHOMUTL I ENDT="" Q
"RTN","FHOMRR1",7,0)
 S ENDT=ENDT_.99
"RTN","FHOMRR1",8,0)
 D DEV Q
"RTN","FHOMRR1",9,0)
 ;I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR Q
"RTN","FHOMRR1",10,0)
 ;
"RTN","FHOMRR1",11,0)
DEV ;get device and set up queue
"RTN","FHOMRR1",12,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHOMRR1",13,0)
 I '$D(IO("Q")) U IO D DISP,^%ZISC,END Q
"RTN","FHOMRR1",14,0)
 S ZTRTN="DISP^FHOMRR1"
"RTN","FHOMRR1",15,0)
 S ZTSAVE("STDT")="",ZTSAVE("FHDFN")=""
"RTN","FHOMRR1",16,0)
 S ZTDESC="Outpatient Meals Recurring Meals Display" D ^%ZTLOAD
"RTN","FHOMRR1",17,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHOMRR1",18,0)
 D END Q
"RTN","FHOMRR1",19,0)
DISP ;
"RTN","FHOMRR1",20,0)
 S X1=STDT,X2=-1 D C^%DTC S STDT=X
"RTN","FHOMRR1",21,0)
 I '$O(^FHPT(FHDFN,"OP","B",STDT)) W !!,"No Recurring Meals to Display" Q
"RTN","FHOMRR1",22,0)
 K FHLIST S EX="",NUM=0 D HDR I $G(ENDT)="" S ENDT=9999999.99
"RTN","FHOMRR1",23,0)
 F FHRMDT=STDT:0 S FHRMDT=$O(^FHPT(FHDFN,"OP","B",FHRMDT)) Q:FHRMDT'>0!(FHRMDT>ENDT)!(EX=U)  F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRMDT,FHRNUM)) Q:FHRNUM'>0!(EX=U)  D
"RTN","FHOMRR1",24,0)
 .S FHNODE=$G(^FHPT(FHDFN,"OP",FHRNUM,0))
"RTN","FHOMRR1",25,0)
 .S FHRM=$P(FHNODE,U,1)
"RTN","FHOMRR1",26,0)
 .S NUM=NUM+1,PAD=$S($L(NUM)<3:3-$L(NUM),1:1) W !?PAD,NUM
"RTN","FHOMRR1",27,0)
 .S FHLIST(NUM)=FHRNUM_"^"_FHRM
"RTN","FHOMRR1",28,0)
 .S FHDOW=$$DOW^XLFDT(FHRM),FHDOW=$E(FHDOW,1,3)
"RTN","FHOMRR1",29,0)
 .S FHDTP=$$FMTE^XLFDT(FHRM,"P") W ?6,FHDOW," - ",$E(FHDTP,1,12)
"RTN","FHOMRR1",30,0)
 .S FHLPT=$P(FHNODE,U,3),FHLOCZN=$G(^FH(119.6,FHLPT,0)) D
"RTN","FHOMRR1",31,0)
 ..S FHLOC=$E($P(FHLOCZN,U,1),1,10),FHSERV=$P(FHLOCZN,U,10)
"RTN","FHOMRR1",32,0)
 ..S FHSRV=$S(FHSERV["T":$P(FHLOCZN,U,5),FHSERV["C":$P(FHLOCZN,U,6),1:"")
"RTN","FHOMRR1",33,0)
 ..I FHSRV="" S FHSRVPT="" Q
"RTN","FHOMRR1",34,0)
 ..S FHSRVPT=$P($G(^FH(119.72,FHSRV,0)),U,1)
"RTN","FHOMRR1",35,0)
 ..Q
"RTN","FHOMRR1",36,0)
 .W ?26,FHLOC,?38,$E(FHSRVPT,1,9)
"RTN","FHOMRR1",37,0)
 .W ?51,$P(FHNODE,U,4),?56,$P(FHNODE,U,5)
"RTN","FHOMRR1",38,0)
 .I $P($G(^FH(119.6,FHLPT,1)),U,4)="Y" D DIETPAT W ?60,$E(FHDIETP,1,12)
"RTN","FHOMRR1",39,0)
 .I $P($G(^FH(119.6,FHLPT,1)),U,4)'="Y" S FHDPTR=$P(FHNODE,U,2) Q:FHDPTR=""  W ?60,$E($P($G(^FH(111,FHDPTR,0)),U,1),1,12)
"RTN","FHOMRR1",40,0)
 .S FHSTAT=$P(FHNODE,U,15) I FHSTAT="C" W ?76,"C"
"RTN","FHOMRR1",41,0)
 .I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHOMRR1",42,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,1)) D
"RTN","FHOMRR1",43,0)
 ..S FHNODE1=$G(^FHPT(FHDFN,"OP",FHRNUM,1))
"RTN","FHOMRR1",44,0)
 ..S FHSTATA=$P(FHNODE1,U,5) I FHSTATA="C" W !?7,"Additional Orders: ",$E($P(FHNODE1,U,1),1,46),?76,"C" Q
"RTN","FHOMRR1",45,0)
 ..W !?7,"Additional Orders: ",$P(FHNODE1,U,1)
"RTN","FHOMRR1",46,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,2)) D
"RTN","FHOMRR1",47,0)
 ..S FHNODE2=$G(^FHPT(FHDFN,"OP",FHRNUM,2))
"RTN","FHOMRR1",48,0)
 ..S FHEL=FHNODE2
"RTN","FHOMRR1",49,0)
 ..W !?7,"Early/Late Tray Time: ",$P(FHEL,U,1)
"RTN","FHOMRR1",50,0)
 ..W "  Bagged Meal: ",$P(FHEL,U,2)
"RTN","FHOMRR1",51,0)
 ..S FHSTATE=$P(FHNODE2,U,6) I FHSTATE="C" W ?76,"C"
"RTN","FHOMRR1",52,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,3)) D
"RTN","FHOMRR1",53,0)
 ..S FHNODE3=$G(^FHPT(FHDFN,"OP",FHRNUM,3))
"RTN","FHOMRR1",54,0)
 ..S FHTU=FHNODE3
"RTN","FHOMRR1",55,0)
 ..W !?7,"Tubefeeding: " S FHSTATT=$P(FHTU,U,5) I FHSTATT="C" W ?76,"C"
"RTN","FHOMRR1",56,0)
 ..F FHTZ=0:0 S FHTZ=$O(^FHPT(FHDFN,"OP",FHRNUM,"TF",FHTZ)) Q:FHTZ'>0  D
"RTN","FHOMRR1",57,0)
 ...S FHTUZN=$G(^FHPT(FHDFN,"OP",FHRNUM,"TF",FHTZ,0))
"RTN","FHOMRR1",58,0)
 ...S FHTUPTR=$P(FHTUZN,U,1),FHTUSTR=$P(FHTUZN,U,2)
"RTN","FHOMRR1",59,0)
 ...W !?9,$P($G(^FH(118.2,FHTUPTR,0)),U,1),"  Strength: "
"RTN","FHOMRR1",60,0)
 ...W $S(FHTUSTR=1:"1/4",FHTUSTR=2:"1/2",FHTUSTR=3:"3/4",1:"FULL")
"RTN","FHOMRR1",61,0)
 ...W "  Quantity: ",$P(FHTUZN,U,3)
"RTN","FHOMRR1",62,0)
 ..W !?7,"Total CC's: ",$P(FHTU,U,2),"  Total KCALS/DAY: ",$P(FHTU,U,3)
"RTN","FHOMRR1",63,0)
 ..S FHTCOMM=$P(FHTU,U,1) I FHTCOMM'="" W !?7,"Comment: ",FHTCOMM
"RTN","FHOMRR1",64,0)
 .Q
"RTN","FHOMRR1",65,0)
 W ! Q
"RTN","FHOMRR1",66,0)
DIETPAT ;
"RTN","FHOMRR1",67,0)
 S FHDIETS=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,7,11)
"RTN","FHOMRR1",68,0)
 S FHDIETP=""
"RTN","FHOMRR1",69,0)
 F PCE=1:1:5 D
"RTN","FHOMRR1",70,0)
 .S FHDPTR=$P(FHDIETS,U,PCE) I FHDPTR="" Q
"RTN","FHOMRR1",71,0)
 .S FHDNM=$P($G(^FH(111,FHDPTR,0)),U,7)
"RTN","FHOMRR1",72,0)
 .I FHDNM="" S FHDNM=$P($G(^FH(111,FHDPTR,0)),U,1)
"RTN","FHOMRR1",73,0)
 .S FHDIETP=FHDIETP_FHDNM_"," Q
"RTN","FHOMRR1",74,0)
 S FHDIETP=$E(FHDIETP,1,$L(FHDIETP)-1)
"RTN","FHOMRR1",75,0)
 Q
"RTN","FHOMRR1",76,0)
PG ;
"RTN","FHOMRR1",77,0)
 Q:$O(^FHPT(FHDFN,"OP","B",FHRMDT))'>0
"RTN","FHOMRR1",78,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHOMRR1",79,0)
 D HDR Q
"RTN","FHOMRR1",80,0)
HDR ;
"RTN","FHOMRR1",81,0)
 I $G(FHPP)'=1 W:$Y @IOF
"RTN","FHOMRR1",82,0)
 K FHPP W !?5,"R E C U R R I N G   M E A L   D I S P L A Y"
"RTN","FHOMRR1",83,0)
 W !!?3,"OUTPATIENT NAME: " D PATNAME^FHOMUTL W FHPTNM,"   ",FHSSN
"RTN","FHOMRR1",84,0)
 W ?65,FHSEX," Age ",FHAGE
"RTN","FHOMRR1",85,0)
 W !!?27,"Ordering",?38,"Service"
"RTN","FHOMRR1",86,0)
 W !?2,"#",?6,"Date/Time",?27,"Location",?38,"Point"
"RTN","FHOMRR1",87,0)
 W ?50,"Meal",?55,"Bag",?60,"Diet Ordered",?74,"Status"
"RTN","FHOMRR1",88,0)
 W !?1,"===",?6,"==================",?26,"=========="
"RTN","FHOMRR1",89,0)
 W ?38,"==========",?50,"====",?55,"===",?60,"============",?74,"======"
"RTN","FHOMRR1",90,0)
 Q
"RTN","FHOMRR1",91,0)
END ;
"RTN","FHOMRR1",92,0)
 K ENDT,EX,FHDIET,FHDIETP,FHDIETS,FHDTP,FHFIND,FHLOC,FHLPT,FHNODE,FHRM
"RTN","FHOMRR1",93,0)
 K FHRNUM,FHDPTR,FHDNM Q
"RTN","FHOMRT1")
0^168^B16103268
"RTN","FHOMRT1",1,0)
FHOMRT1 ;Hines OIFO/RTK OUTPATIENT MEALS TUBEFEEDING ORDERS  ;6/02/03  14:15
"RTN","FHOMRT1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMRT1",3,0)
 ;
"RTN","FHOMRT1",4,0)
 S FHMSG1="T" D GETOPT^FHOMUTL I FHFIND=0 Q
"RTN","FHOMRT1",5,0)
 K NUM D DISP^FHOMRR1 I $G(NUM)="" Q
"RTN","FHOMRT1",6,0)
TF1 W ! K DIR S DIR("A")="Select Order(s)",DIR(0)="LO^1:"_NUM D ^DIR
"RTN","FHOMRT1",7,0)
 Q:$D(DIRUT)  S FHCLST=Y
"RTN","FHOMRT1",8,0)
 S FHCAN1=0 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=FHLIST(FHC) I $P($G(^FHPT(FHDFN,"OP",+FHRNUM,0)),U,15)'="C" S FHCAN1=1
"RTN","FHOMRT1",9,0)
 I FHCAN1=0 W !!?3,"The selected order(s) have been cancelled!",! D TF1 Q
"RTN","FHOMRT1",10,0)
FHTUB S NO=0,FHWF=$S($D(^ORD(101)):1,1:0) D ^FHORT10
"RTN","FHOMRT1",11,0)
 I $O(TUN(0))="" D EXMSG^FHOMUTL Q
"RTN","FHOMRT1",12,0)
 S (FHTC,FHTK)=0,FHORN="" W !
"RTN","FHOMRT1",13,0)
 F FHK=0:0 S FHK=$O(TUN(FHK)) Q:FHK<1  D
"RTN","FHOMRT1",14,0)
 .S FHTC=FHTC+$P(TUN(FHK),"^",4)+$P(TUN(FHK),"^",5)
"RTN","FHOMRT1",15,0)
 .S FHTK=FHTK+$P(TUN(FHK),"^",6),FHSTR=$P(TUN(FHK),"^",2)
"RTN","FHOMRT1",16,0)
 .S FHPRO=$P(TUN(FHK),"^",1)
"RTN","FHOMRT1",17,0)
 .W !,"Product: ",$P($G(^FH(118.2,FHPRO,0)),"^",1),", "
"RTN","FHOMRT1",18,0)
 .W $S(FHSTR=4:"Full",FHSTR=2:"1/2",FHSTR=1:"1/4",1:"3/4"),", "
"RTN","FHOMRT1",19,0)
 .W $P(TUN(FHK),"^",3)
"RTN","FHOMRT1",20,0)
 .Q
"RTN","FHOMRT1",21,0)
 W !!,"Total Kcal: ",FHTK,?36,"Total Quantity: ",FHTC
"RTN","FHOMRT1",22,0)
 I FHTC>5000 W !!,"WARNING: Total amount exceeds 5000cc: ",FHTC," cc",!,"Please Edit the Tubefeeding and Modify." D FHTUB Q
"RTN","FHOMRT1",23,0)
 ;
"RTN","FHOMRT1",24,0)
 W ! K DIR S DIR("A")="Tubefeeding Comment: ",DIR(0)="FAO^1:160" D ^DIR
"RTN","FHOMRT1",25,0)
 I Y="^" D EXMSG^FHOMUTL Q
"RTN","FHOMRT1",26,0)
 S FHTEXT=Y
"RTN","FHOMRT1",27,0)
 W ! K DIR S DIR("A")="Is this correct?: ",DIR(0)="YA",DIR("B")="Y"
"RTN","FHOMRT1",28,0)
 D ^DIR I $D(DIRUT)!(Y=0) D EXMSG^FHOMUTL,END Q
"RTN","FHOMRT1",29,0)
 W !
"RTN","FHOMRT1",30,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=FHLIST(FHC) D CHK
"RTN","FHOMRT1",31,0)
 D OKMSG^FHOMUTL Q
"RTN","FHOMRT1",32,0)
 D END Q
"RTN","FHOMRT1",33,0)
CHK ;
"RTN","FHOMRT1",34,0)
 I $P($G(^FHPT(FHDFN,"OP",+FHRNUM,0)),U,15)="C" S FHDTX=$P(FHRNUM,U,2),FHDTX=$$FMTE^XLFDT(FHDTX,"P") W !?3,"The order for ",$E(FHDTX,1,12)," has been cancelled -- not ordered!" Q
"RTN","FHOMRT1",35,0)
 D SET
"RTN","FHOMRT1",36,0)
 Q
"RTN","FHOMRT1",37,0)
SET ;
"RTN","FHOMRT1",38,0)
 K ^FHPT(FHDFN,"OP",+FHRNUM,"TF") S FHEV=""
"RTN","FHOMRT1",39,0)
 K DIE S DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=+FHRNUM
"RTN","FHOMRT1",40,0)
 S DR="18////^S X=FHTEXT;20////^S X=FHTC;21////^S X=FHTK;21.5////^S X=FHORN" D ^DIE
"RTN","FHOMRT1",41,0)
 F K=0:0 S K=$O(TUN(K)) Q:K<1  D
"RTN","FHOMRT1",42,0)
 .S Y=K K DIC,DO S DA(2)=FHDFN,DA(1)=+FHRNUM
"RTN","FHOMRT1",43,0)
 .S DIC="^FHPT("_DA(2)_",""OP"","_DA(1)_",""TF"","
"RTN","FHOMRT1",44,0)
 .S DIC(0)="L",DIC("P")=$P(^DD(115.016,19,0),U,2),X=+Y,DINUM=X
"RTN","FHOMRT1",45,0)
 .D FILE^DICN I Y=-1 Q
"RTN","FHOMRT1",46,0)
 .K DIE S DA(2)=FHDFN,DA(1)=+FHRNUM,DA=+Y
"RTN","FHOMRT1",47,0)
 .S FH1=$P(TUN(K),U,2),FH2=$P(TUN(K),U,3),FH3=$P(TUN(K),U,4)
"RTN","FHOMRT1",48,0)
 .S FH4=$P(TUN(K),U,5),FH5=$P(TUN(K),U,6)
"RTN","FHOMRT1",49,0)
 .S DIE="^FHPT("_DA(2)_",""OP"","_DA(1)_",""TF"","
"RTN","FHOMRT1",50,0)
 .S DR="1////^S X=FH1;2////^S X=FH2;3////^S X=FH3;4////^S X=FH4;5////^S X=FH5" D ^DIE
"RTN","FHOMRT1",51,0)
 .S X3=TUN(K),TUN=$P(X3,U,1),XX=$G(^FH(118.2,TUN,0)) D CALC^FHORX3
"RTN","FHOMRT1",52,0)
 .S FHEV=FHEV_P2_" "_$P(XX,"^",1)_", "
"RTN","FHOMRT1",53,0)
 .Q
"RTN","FHOMRT1",54,0)
 S FHACT="O",FHOPTY="T",FHAET=$E(FHEV,1,$L(FHEV)-2) D SETAET^FHOMRO2
"RTN","FHOMRT1",55,0)
 Q
"RTN","FHOMRT1",56,0)
END ;
"RTN","FHOMRT1",57,0)
 K A,FHFIND,FHCLST,FHC,FHRNUM,FHTEXT,FHTODAY,NUM Q
"RTN","FHOMRT1",58,0)
 Q
"RTN","FHOMRT1",59,0)
HL7SET ;
"RTN","FHOMRT1",60,0)
 ; Entry point for TF's placed from CPRS/OERR
"RTN","FHOMRT1",61,0)
 K TUN S (NO,TC,TK,TP,TW,S2)=0,CTR=5
"RTN","FHOMRT1",62,0)
 F NUM=1:1:5 S DATA=$G(FHMSG(CTR)) Q:DATA=""  S CTR=CTR+1,DATA1=$G(FHMSG(CTR)) Q:DATA1=""  D ^FHWOR51 S CTR=CTR+1 Q:TXT'=""
"RTN","FHOMRT1",63,0)
 I TXT'="" D ERR^FHOMWOR Q
"RTN","FHOMRT1",64,0)
 I $O(TUN(0))="" Q
"RTN","FHOMRT1",65,0)
 S (FHCOND,FHTC,FHTK)=0,FHTEXT=$E($P(DATA,"|",5),1,160)
"RTN","FHOMRT1",66,0)
 F FHK=0:0 S FHK=$O(TUN(FHK)) Q:FHK<1!(FHCOND=1)  D
"RTN","FHOMRT1",67,0)
 .I '$D(^FH(118.2,FHK)) S FHCOND=1 Q
"RTN","FHOMRT1",68,0)
 .S FHTC=FHTC+$P(TUN(FHK),"^",4)+$P(TUN(FHK),"^",5)
"RTN","FHOMRT1",69,0)
 .S FHTK=FHTK+$P(TUN(FHK),"^",6)
"RTN","FHOMRT1",70,0)
 .Q
"RTN","FHOMRT1",71,0)
 I FHCOND=1 S TXT="Invalid TF Product" D GETOR^FHWOR,ERR^FHOMWOR Q
"RTN","FHOMRT1",72,0)
 I FHTC>5000 S TXT="Total amount exceeds 5000cc" D ERR^FHOMWOR Q
"RTN","FHOMRT1",73,0)
 S X1=STDT,X2=-1 D C^%DTC S STDT1=X
"RTN","FHOMRT1",74,0)
 F FHRMDT=STDT1:0 S FHRMDT=$O(^FHPT(FHDFN,"OP","B",FHRMDT)) Q:FHRMDT'>0!(FHRMDT>ENDT)  F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRMDT,FHRNUM)) Q:FHRNUM'>0  D SET
"RTN","FHOMRT1",75,0)
 I '$D(FHRNUM) Q
"RTN","FHOMRT1",76,0)
 S FILL="T;"_FHRNUM_";"_FHTK_";"_FHTC_";"_FHTEXT_";"_FHORN
"RTN","FHOMRT1",77,0)
 D SEND^FHWOR Q
"RTN","FHOMSA1")
0^169^B4674762
"RTN","FHOMSA1",1,0)
FHOMSA1 ;Hines OIFO/RTK SPECIAL MEALS AUTHORIZE MEAL  ;4/11/03  12:55
"RTN","FHOMSA1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMSA1",3,0)
 ;
"RTN","FHOMSA1",4,0)
 I '$D(^XUSEC("FHAUTH",DUZ)) W !!!,"To access this option you most hold the 'FHAUTH' key!",!! H 3 Q
"RTN","FHOMSA1",5,0)
 S STDT=DT,FHS="P" D LIST^FHOMSS1 W !
"RTN","FHOMSA1",6,0)
 I NUM=0 W !,"NO PENDING SPECIAL MEALS TO AUTHORIZE" Q
"RTN","FHOMSA1",7,0)
 K DIR S DIR("A")="Select Which Meal(s)?",DIR(0)="LO^1:"_NUM D ^DIR
"RTN","FHOMSA1",8,0)
 Q:$D(DIRUT)  S FHCLST=Y
"RTN","FHOMSA1",9,0)
 W ! K DIR S DIR("A")="Authorize or Deny? "
"RTN","FHOMSA1",10,0)
 S DIR(0)="SAO^A:AUTHORIZE;D:DENY",DIR("B")="A" D ^DIR
"RTN","FHOMSA1",11,0)
 Q:$D(DIRUT)  S FHSTAT=Y
"RTN","FHOMSA1",12,0)
 I FHSTAT="D" W ! K DIR S DIR("A")="Comment: ",DIR(0)="FA^1:80" D ^DIR S FHCOMM=Y
"RTN","FHOMSA1",13,0)
 I FHCOMM="^" Q
"RTN","FHOMSA1",14,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMSA1",15,0)
 Q:$D(DIRUT)  I Y=0 D END Q
"RTN","FHOMSA1",16,0)
 D SIG^XUSESIG I X1="" W !!?5,"<< Incorrect Electronic Signature!! >>" Q
"RTN","FHOMSA1",17,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHCDT=FHLIST(FHC) D UPD
"RTN","FHOMSA1",18,0)
 W "  ... done" Q
"RTN","FHOMSA1",19,0)
 Q
"RTN","FHOMSA1",20,0)
UPD ;Update the status,authorizor,date/time of special meal request
"RTN","FHOMSA1",21,0)
 D NOW^%DTC S FHTODAY=$E(%,1,12)
"RTN","FHOMSA1",22,0)
 S DA=$P(FHCDT,U,2),FHDA=DA,DA(1)=$P(FHCDT,U,1),FHDFN=DA(1)
"RTN","FHOMSA1",23,0)
 S DIE="^FHPT("_DA(1)_",""SM"","
"RTN","FHOMSA1",24,0)
 S DR="1////^S X=FHSTAT;5////^S X=DUZ;6////^S X=FHTODAY;7////^S X=FHCOMM"
"RTN","FHOMSA1",25,0)
 D ^DIE
"RTN","FHOMSA1",26,0)
 D ALERT
"RTN","FHOMSA1",27,0)
 S FHZN=$G(^FHPT(FHDFN,"SM",FHDA,0))
"RTN","FHOMSA1",28,0)
 S FHACT="O",FHOPTY="S",FHOPDT=$P(FHTODAY,".",1) D SETSM^FHOMRO2
"RTN","FHOMSA1",29,0)
 Q
"RTN","FHOMSA1",30,0)
ALERT ;Send alert back to requestor
"RTN","FHOMSA1",31,0)
 K XQA S (FHAUDA,FHDFN)=$P(FHCDT,U,1),FHAUSMDT=$P(FHCDT,U,2)
"RTN","FHOMSA1",32,0)
 S FHREQ=$P($G(^FHPT(FHAUDA,"SM",FHAUSMDT,0)),U,5) I FHREQ="" Q
"RTN","FHOMSA1",33,0)
 S FHAUSTT=$S(FHSTAT="A":"AUTHORIZED",1:"DENIED")
"RTN","FHOMSA1",34,0)
 S FHAUNAM=$P($G(^VA(200,DUZ,0)),U,1)
"RTN","FHOMSA1",35,0)
 D PATNAME^FHOMUTL
"RTN","FHOMSA1",36,0)
 S XQA(FHREQ)=""
"RTN","FHOMSA1",37,0)
 S XQAMSG="SPECIAL MEAL FOR "_FHPTNM_" HAS BEEN "_FHAUSTT_" BY "_FHAUNAM
"RTN","FHOMSA1",38,0)
 D SETUP^XQALERT
"RTN","FHOMSA1",39,0)
 Q
"RTN","FHOMSA1",40,0)
END ;
"RTN","FHOMSA1",41,0)
 K FHAUDA,FHAUNAM,FHAUSMDT,FHAUSTT,FHS,FHSTAT Q
"RTN","FHOMSC1")
0^170^B1487825
"RTN","FHOMSC1",1,0)
FHOMSC1 ;Hines OIFO/RTK SPECIAL MEALS CANCEL MEAL  ;4/15/03  8:55
"RTN","FHOMSC1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMSC1",3,0)
 ;
"RTN","FHOMSC1",4,0)
 S FHORN="",STDT=DT,FHS="ADP" D LIST^FHOMSS1 W !
"RTN","FHOMSC1",5,0)
 I NUM=0 W !,"NO SPECIAL MEALS TO CANCEL" Q
"RTN","FHOMSC1",6,0)
 K DIR S DIR("A")="Cancel Which Meal(s)?",DIR(0)="LO^1:"_NUM D ^DIR
"RTN","FHOMSC1",7,0)
 Q:$D(DIRUT)  S FHCLST=Y
"RTN","FHOMSC1",8,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMSC1",9,0)
 Q:$D(DIRUT)  I Y=0 D END Q
"RTN","FHOMSC1",10,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHCDT=FHLIST(FHC) D CAN
"RTN","FHOMSC1",11,0)
 W "  ... done" Q
"RTN","FHOMSC1",12,0)
 Q
"RTN","FHOMSC1",13,0)
CAN ;
"RTN","FHOMSC1",14,0)
 S FHSTAT="C",FHORN=+FHORN
"RTN","FHOMSC1",15,0)
 S DA=$P(FHCDT,U,2),FHDA=DA,DA(1)=$P(FHCDT,U,1),FHDFN=DA(1)
"RTN","FHOMSC1",16,0)
 S DIE="^FHPT("_DA(1)_",""SM"","
"RTN","FHOMSC1",17,0)
 S DR="1////^S X=FHSTAT;11////^S X=FHORN" D ^DIE
"RTN","FHOMSC1",18,0)
 S FHZN=$G(^FHPT(FHDFN,"SM",FHDA,0))
"RTN","FHOMSC1",19,0)
 S FHACT="C",FHOPTY="S",FHOPDT=FHDA D SETSM^FHOMRO2
"RTN","FHOMSC1",20,0)
 Q
"RTN","FHOMSC1",21,0)
END ;
"RTN","FHOMSC1",22,0)
 K FHS,FHSTAT Q
"RTN","FHOMSP1")
0^171^B8274936
"RTN","FHOMSP1",1,0)
FHOMSP1 ;Hines OIFO/RTK SPECIAL MEALS PRINT MEAL  ;4/11/03  8:05
"RTN","FHOMSP1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMSP1",3,0)
 ;
"RTN","FHOMSP1",4,0)
 S STDT=DT,FHS="AP" D LIST^FHOMSS1 W !
"RTN","FHOMSP1",5,0)
 I NUM=0 W !,"NO AUTHORIZED OR PENDING SPECIAL MEALS TO PRINT" Q
"RTN","FHOMSP1",6,0)
 K DIR S DIR("A")="Print Which Meal(s)?",DIR(0)="LO^1:"_NUM D ^DIR
"RTN","FHOMSP1",7,0)
 Q:$D(DIRUT)  S FHCLST=Y
"RTN","FHOMSP1",8,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMSP1",9,0)
 Q:$D(DIRUT)  I Y=0 D END Q
"RTN","FHOMSP1",10,0)
 D DEV Q
"RTN","FHOMSP1",11,0)
DEV ;get device and set up queue
"RTN","FHOMSP1",12,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHOMSP1",13,0)
 I '$D(IO("Q")) U IO D PRINT,^%ZISC,END Q
"RTN","FHOMSP1",14,0)
 S ZTRTN="PRINT^FHOMSP1",ZTSAVE("STDT")="",ZTSAVE("FHDFN")=""
"RTN","FHOMSP1",15,0)
 S ZTSAVE("FHS")="",ZTSAVE("FHCDT")="",ZTSAVE("FHREQPR")=""
"RTN","FHOMSP1",16,0)
 S ZTSAVE("NUM")="",ZTSAVE("FHCLST")="",ZTSAVE("FHLIST(")=""
"RTN","FHOMSP1",17,0)
 S ZTDESC="Print Special Meals Voucher" D ^%ZTLOAD
"RTN","FHOMSP1",18,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHOMSP1",19,0)
 D END Q
"RTN","FHOMSP1",20,0)
PRINT ;
"RTN","FHOMSP1",21,0)
 I $G(FHREQPR)=1 D PR2 Q
"RTN","FHOMSP1",22,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHCDT=FHLIST(FHC) D PR2
"RTN","FHOMSP1",23,0)
 Q
"RTN","FHOMSP1",24,0)
PR2 ;
"RTN","FHOMSP1",25,0)
 S FHDFN=$P(FHCDT,U,1) D PATNAME^FHOMUTL S FHD=$P(FHCDT,U,2)
"RTN","FHOMSP1",26,0)
 S FHNODE=$G(^FHPT(FHDFN,"SM",FHD,0))
"RTN","FHOMSP1",27,0)
 S (LNS,UNLNS)="" F FHA=1:1:80 S LNS=LNS_"-",UNLNS=UNLNS_"_"
"RTN","FHOMSP1",28,0)
 S FHD=$E($$FMTE^XLFDT($P(FHCDT,U,2),"P"),1,12) S X=FHD D TR^FH S FHD=X
"RTN","FHOMSP1",29,0)
 S FHM=$P(FHNODE,U,9),FHSTAT=$P(FHNODE,U,2)
"RTN","FHOMSP1",30,0)
 S FHRQR=$P(FHNODE,U,5) S:FHRQR'="" FHRQR=$P($G(^VA(200,FHRQR,0)),U,1)
"RTN","FHOMSP1",31,0)
 S FHAZR=$P(FHNODE,U,6) S:FHAZR'="" FHAZR=$P($G(^VA(200,FHAZR,0)),U,1)
"RTN","FHOMSP1",32,0)
 S FHTTL=$P(FHNODE,U,6) S:FHTTL'="" FHTTL=$P($G(^VA(200,FHTTL,0)),U,9) I FHTTL'="" S FHTTL=$P($G(^DIC(3.1,FHTTL,0)),U,1)
"RTN","FHOMSP1",33,0)
 S FHMEAL=$S(FHM="B":"BREAKFAST",FHM="N":"NOON",1:"EVENING")
"RTN","FHOMSP1",34,0)
 S FHLPT=$P(FHNODE,U,3),FHLOC=$P($G(^FH(119.6,FHLPT,0)),U,1)
"RTN","FHOMSP1",35,0)
 S FHDPT=$P(FHNODE,U,4),FHDIET=$P($G(^FH(111,FHDPT,0)),U,1)
"RTN","FHOMSP1",36,0)
 W:$Y @IOF
"RTN","FHOMSP1",37,0)
 W !!!!,LNS,!?4," A U T H O R I Z E D   O U T P A T I E N T   M E A L   V O U C H E R",!,LNS
"RTN","FHOMSP1",38,0)
 W !!!,"Name of Pt:  ",FHPTNM,?40,"Req Loc  :  ",FHLOC
"RTN","FHOMSP1",39,0)
 W !,"Start Date:  ",FHD,?40,"Requestor:  ",FHRQR
"RTN","FHOMSP1",40,0)
 W !,"Stop Date :  ",FHD
"RTN","FHOMSP1",41,0)
 W !!?40,"Signature:  ",$S(FHSTAT="A":"/es/"_FHAZR,1:$E(UNLNS,1,25))
"RTN","FHOMSP1",42,0)
 W !!?40,"    Title:  ",$S(FHSTAT="A":FHTTL,1:$E(UNLNS,1,25))
"RTN","FHOMSP1",43,0)
 W !!?40,"     Date:  ",$S(FHSTAT="A":FHD,1:$E(UNLNS,1,25))
"RTN","FHOMSP1",44,0)
 W !!!!,"Pt Authorized a:  ",FHDIET," Meal for ",FHMEAL," meal time"
"RTN","FHOMSP1",45,0)
 W !!!!!!!!!!!!,"ALTERING OR COPYING THIS MEAL VOUCHER IS PROHIBITED."
"RTN","FHOMSP1",46,0)
 W !!!!!!!!!!!!!!!!!!!,LNS,!,"In lieu of VA FORM 10-2817",!
"RTN","FHOMSP1",47,0)
 W !,"Facility:  " D SITE^FH W SITE D NOW^%DTC W ?45,$$FMTE^XLFDT(%,"P")
"RTN","FHOMSP1",48,0)
 W !,LNS
"RTN","FHOMSP1",49,0)
 Q
"RTN","FHOMSP1",50,0)
END ;
"RTN","FHOMSP1",51,0)
 K FHLPT,FHDPT,FHDIET,FHLOC,FHSTAT,FHRQR,FHTITL,FHAZR,FHMEAL Q
"RTN","FHOMSR1")
0^172^B15017027
"RTN","FHOMSR1",1,0)
FHOMSR1 ;Hines OIFO/RTK SPECIAL MEALS REQUEST MEAL  ;4/02/03  15:05
"RTN","FHOMSR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMSR1",3,0)
 ;
"RTN","FHOMSR1",4,0)
 S (FHORN,FHDIET)="",FHKEY=0,FHMSG1="S"
"RTN","FHOMSR1",5,0)
 D ^FHOMDPA I FHDFN="" Q
"RTN","FHOMSR1",6,0)
 I '$D(^FHPT(FHDFN,0)) W !!,"UNKNOWN SELECTION !" Q
"RTN","FHOMSR1",7,0)
 D SMSTAT^FHOMUTL I FHSTAT="P" D MESSAGE Q
"RTN","FHOMSR1",8,0)
 I $D(^XUSEC("FHAUTH",DUZ)) S FHKEY=1
"RTN","FHOMSR1",9,0)
LOC ;Prompt for outpatient location
"RTN","FHOMSR1",10,0)
 W ! D OUTLOC^FHOMUTL I FHLOC="" D EXMSG^FHOMUTL Q
"RTN","FHOMSR1",11,0)
DIET ;Prompt for diet
"RTN","FHOMSR1",12,0)
 D DIETLST^FHOMUTL
"RTN","FHOMSR1",13,0)
 I FHDEF="" W !!,"NO DEFAULT OUTPATIENT DIET SET!!",! Q
"RTN","FHOMSR1",14,0)
 S FHDEF=$P($G(^FH(111,FHDEF,0)),U,1)
"RTN","FHOMSR1",15,0)
 K DIC S DIC="^FH(111,",DIC("A")="Select DIET NAME: ",DIC(0)="AEMQZ"
"RTN","FHOMSR1",16,0)
 S DIC("B")=FHDEF,DIC("S")="I FHSPDTS[$P(^(0),U)" D ^DIC
"RTN","FHOMSR1",17,0)
 I $D(DUOUT) D EXMSG^FHOMUTL Q
"RTN","FHOMSR1",18,0)
 I Y=-1 D EXMSG^FHOMUTL Q
"RTN","FHOMSR1",19,0)
 S FHDIET=+Y
"RTN","FHOMSR1",20,0)
MEAL ;Prompt for meal
"RTN","FHOMSR1",21,0)
 K DIR,DIC S DIR("A")="Select Meal: "
"RTN","FHOMSR1",22,0)
 S DIR(0)="SAO^B:Breakfast;N:Noon;E:Evening"
"RTN","FHOMSR1",23,0)
 D ^DIR I $D(DIRUT) D EXMSG^FHOMUTL Q
"RTN","FHOMSR1",24,0)
 I Y'=-1 S FHMEAL=Y
"RTN","FHOMSR1",25,0)
 W ! K DIR S DIR("A")="Is this correct?: ",DIR(0)="YA",DIR("B")="Y"
"RTN","FHOMSR1",26,0)
 D ^DIR
"RTN","FHOMSR1",27,0)
 S CONT=Y I CONT'=1 D EXMSG^FHOMUTL Q
"RTN","FHOMSR1",28,0)
 D NOW^%DTC S FHNOW=%,STDT=DT,FHLTFLG=0 D SMGM^FHOMRO2
"RTN","FHOMSR1",29,0)
 I SKIP=1 D EXMSG^FHOMUTL Q
"RTN","FHOMSR1",30,0)
 S FHQEL=1 I FHLTFLG=1 S FHSM=FHNOW,FHEL="L",FHQEL=0 D LATE I FHQEL=1 D EXMSG^FHOMUTL Q
"RTN","FHOMSR1",31,0)
 S FHSTAT=$S(FHKEY=1:"A",1:"P") D SETNODE
"RTN","FHOMSR1",32,0)
 D OKMSG^FHOMUTL
"RTN","FHOMSR1",33,0)
 I FHKEY=1 D PRINT
"RTN","FHOMSR1",34,0)
 I FHKEY=0 D ALERT
"RTN","FHOMSR1",35,0)
 D END Q
"RTN","FHOMSR1",36,0)
PRINT ;If user has key allow printing without sending alert to authorizor(s)
"RTN","FHOMSR1",37,0)
 W ! S DIR(0)="YA",DIR("B")="Y",DIR("A")="Print Voucher? " D ^DIR
"RTN","FHOMSR1",38,0)
 Q:$D(DIRUT)  S PRINT=Y I PRINT'=1 Q
"RTN","FHOMSR1",39,0)
 S FHCDT=FHDFN_"^"_FHNOW,FHREQPR=1 D DEV^FHOMSP1 K FHREQPR Q
"RTN","FHOMSR1",40,0)
ALERT ;Send alert to 5 Authorizors set up in file #119.9 (fields 9-13)
"RTN","FHOMSR1",41,0)
 K XQA,FHAU15 S FHAU15=$P($G(^FH(119.9,1,0)),U,7,11)
"RTN","FHOMSR1",42,0)
 F A=1:1:5 S AB=$P(FHAU15,U,A) I AB'="" S XQA(AB)=""
"RTN","FHOMSR1",43,0)
 I '$D(XQA) D
"RTN","FHOMSR1",44,0)
 .W !!?5,"NOTICE: No 'Authorizing Person(s)' defined in site "
"RTN","FHOMSR1",45,0)
 .W !!?5,"parameter (#119.9) file -- NO ALERT SENT",!! Q
"RTN","FHOMSR1",46,0)
 D PATNAME^FHOMUTL
"RTN","FHOMSR1",47,0)
 S XQAMSG="SPECIAL MEAL FOR "_FHPTNM_" NEEDS AUTHORIZING" D SETUP^XQALERT
"RTN","FHOMSR1",48,0)
 Q
"RTN","FHOMSR1",49,0)
SETNODE ;
"RTN","FHOMSR1",50,0)
 S AUDUZ=$S(FHSTAT="A":DUZ,1:""),AUFHNOW=$S(FHSTAT="A":FHNOW,1:"")
"RTN","FHOMSR1",51,0)
 S (FHSMID,Y)=FHNOW K DIC,DO S DA(1)=FHDFN,DIC="^FHPT("_DA(1)_",""SM"","
"RTN","FHOMSR1",52,0)
 S DIC(0)="L",DIC("P")=$P(^DD(115,17,0),U,2),X=+Y,DINUM=X
"RTN","FHOMSR1",53,0)
 D FILE^DICN I Y=-1 Q
"RTN","FHOMSR1",54,0)
 K DIE S DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""SM"","
"RTN","FHOMSR1",55,0)
 S DA=+Y,FHDA=DA
"RTN","FHOMSR1",56,0)
 S DR="1////^S X=FHSTAT;2////^S X=FHLOC;3////^S X=FHDIET;3.5////^S X=FHMEAL;4////^S X=DUZ;5////^S X=AUDUZ;6////^S X=AUFHNOW;11////^S X=FHORN"
"RTN","FHOMSR1",57,0)
 D ^DIE
"RTN","FHOMSR1",58,0)
 I FHQEL=0 D ORDEL
"RTN","FHOMSR1",59,0)
 S FHZN=$G(^FHPT(FHDFN,"SM",FHDA,0))
"RTN","FHOMSR1",60,0)
 S FHACT="O",FHOPTY="S",FHOPDT=$P(FHNOW,".",1) D SETSM^FHOMRO2
"RTN","FHOMSR1",61,0)
 Q
"RTN","FHOMSR1",62,0)
MESSAGE ;
"RTN","FHOMSR1",63,0)
 W !!,"THIS PATIENT ALREADY HAS A SPECIAL MEAL REQUEST PENDING"
"RTN","FHOMSR1",64,0)
 Q
"RTN","FHOMSR1",65,0)
END ;Kill local variables before exiting
"RTN","FHOMSR1",66,0)
 K A,AA,AB,BAG,CCC,CONT,ENDL,ENDT,FHDFN,FHDAYS,FHDEF,FHDIET,FHDIETS
"RTN","FHOMSR1",67,0)
 K FHSTAT,STDT,STDTIM Q
"RTN","FHOMSR1",68,0)
 ;
"RTN","FHOMSR1",69,0)
LATE ;
"RTN","FHOMSR1",70,0)
 S FHCOMM=$P($G(^FH(119.6,FHLOC,0)),U,8),FHCOMM1=$G(^FH(119.73,FHCOMM,1))
"RTN","FHOMSR1",71,0)
 S FH1=$S(FHMEAL="B":1,FHMEAL="N":7,1:13) I FHEL="L" S FH1=FH1+3
"RTN","FHOMSR1",72,0)
TIME S FH3=FH1+2,FHCNT=0 F FHT=FH1:1:FH3 D
"RTN","FHOMSR1",73,0)
 .I $P(FHCOMM1,U,FHT)="" Q
"RTN","FHOMSR1",74,0)
 .S FHCNT=FHCNT+1,FHTM(FHCNT)=$P(FHCOMM1,U,FHT)
"RTN","FHOMSR1",75,0)
 W !,"Select Time: ( " F J=1:1:FHCNT W J,"=",FHTM(J)," "
"RTN","FHOMSR1",76,0)
 R ") ",FHS:DTIME I FHS=""!(FHS["^") S FHQEL=1 Q
"RTN","FHOMSR1",77,0)
 I (FHS'?1N)!(FHS<1)!(FHS>FHCNT) W !!,"Invalid time selection!" D TIME Q
"RTN","FHOMSR1",78,0)
 S FHTIME=FHTM(FHS),X=$E(FHNOW,1,7)_"@"_FHTIME,%DT="XT" D ^%DT S FHDTM=Y
"RTN","FHOMSR1",79,0)
 D NOW^%DTC I FHDTM<% W !!,"Cannot order for a time before now!" D TIME Q
"RTN","FHOMSR1",80,0)
 K DIR S DIR(0)="SAO^Y:Yes;N:No",DIR("A")="Bagged Meal? ",DIR("B")="N"
"RTN","FHOMSR1",81,0)
 D ^DIR I $D(DIRUT) S FHQEL=1 Q
"RTN","FHOMSR1",82,0)
 S FHBAG=Y
"RTN","FHOMSR1",83,0)
 Q
"RTN","FHOMSR1",84,0)
ORDEL ;
"RTN","FHOMSR1",85,0)
 S DA=FHSM,DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""SM"","
"RTN","FHOMSR1",86,0)
 S DR="8////^S X=FHTIME;9////^S X=FHBAG;10////^S X=DUZ" D ^DIE
"RTN","FHOMSR1",87,0)
 Q
"RTN","FHOMSS1")
0^173^B6804782
"RTN","FHOMSS1",1,0)
FHOMSS1 ;Hines OIFO/RTK SPECIAL MEALS STATUS LIST  ;4/11/03  10:05
"RTN","FHOMSS1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMSS1",3,0)
 ;
"RTN","FHOMSS1",4,0)
 D STDATE^FHOMUTL I STDT="" Q
"RTN","FHOMSS1",5,0)
 D ENDATE^FHOMUTL I ENDT="" Q
"RTN","FHOMSS1",6,0)
 S FHS="ACDP"
"RTN","FHOMSS1",7,0)
 D DEV Q
"RTN","FHOMSS1",8,0)
DEV ;get device and set up queue
"RTN","FHOMSS1",9,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHOMSS1",10,0)
 I '$D(IO("Q")) U IO D LIST,^%ZISC,END Q
"RTN","FHOMSS1",11,0)
 S ZTSAVE("STDT")="",ZTSAVE("ENDT")=""
"RTN","FHOMSS1",12,0)
 S ZTSAVE("FHDFN")="",ZTSAVE("FHS")=""
"RTN","FHOMSS1",13,0)
 S ZTRTN="LIST^FHOMSS1",ZTDESC="Special Meals Display" D ^%ZTLOAD
"RTN","FHOMSS1",14,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHOMSS1",15,0)
 D END Q
"RTN","FHOMSS1",16,0)
LIST ;
"RTN","FHOMSS1",17,0)
 K FHLIST S NUM=0,EX=""
"RTN","FHOMSS1",18,0)
 I $G(ENDT)="" S ENDT=9999999
"RTN","FHOMSS1",19,0)
 D HDR S ENDT=ENDT_.99
"RTN","FHOMSS1",20,0)
 F FHSMDT=STDT:0 S FHSMDT=$O(^FHPT("SM",FHSMDT)) Q:FHSMDT'>0!(FHSMDT>ENDT)!(EX=U)  D
"RTN","FHOMSS1",21,0)
 .S FHDFN=$O(^FHPT("SM",FHSMDT,""))
"RTN","FHOMSS1",22,0)
 .S FHNODE=$G(^FHPT(FHDFN,"SM",FHSMDT,0)),FHSTAT=$P(FHNODE,U,2)
"RTN","FHOMSS1",23,0)
 .I FHS'[FHSTAT Q
"RTN","FHOMSS1",24,0)
 .S FHSTAT=$S(FHSTAT="P":"PENDING",FHSTAT="A":"AUTHORIZED",FHSTAT="D":"DENIED",1:"CANCELLED")
"RTN","FHOMSS1",25,0)
 .S NUM=NUM+1,PAD=$S($L(NUM)=1:" ",1:"") W !,PAD,NUM
"RTN","FHOMSS1",26,0)
 .D PATNAME^FHOMUTL W ?5,$E(FHPTNM,1,18)
"RTN","FHOMSS1",27,0)
 .S FHD=$$FMTE^XLFDT(FHSMDT,"P") W ?25,$E(FHD,1,12)
"RTN","FHOMSS1",28,0)
 .S FHLPT=$P(FHNODE,U,3),FHLOC=$E($P($G(^FH(119.6,FHLPT,0)),U,1),1,10)
"RTN","FHOMSS1",29,0)
 .W ?39,FHLOC
"RTN","FHOMSS1",30,0)
 .S FHDPT=$P(FHNODE,U,4),FHDIET=$E($P($G(^FH(111,FHDPT,0)),U,1),1,12)
"RTN","FHOMSS1",31,0)
 .W ?51,FHDIET
"RTN","FHOMSS1",32,0)
 .S FHMEAL=$P(FHNODE,U,9) W ?66,FHMEAL,?70,FHSTAT
"RTN","FHOMSS1",33,0)
 .S FHLIST(NUM)=FHDFN_"^"_FHSMDT
"RTN","FHOMSS1",34,0)
 .I $E(FHSTAT,1)="D" D
"RTN","FHOMSS1",35,0)
 ..S FHDENY=$P(FHNODE,U,6) W !?6,"Denied by: "
"RTN","FHOMSS1",36,0)
 ..I FHDENY'="" W $P($G(^VA(200,FHDENY,0)),U,1)
"RTN","FHOMSS1",37,0)
 .S FHCOMM=$P(FHNODE,U,8) I FHCOMM'="" W !?6,"Comment: ",FHCOMM
"RTN","FHOMSS1",38,0)
 .I $D(^FHPT(FHDFN,"SM",FHSMDT,1)) D
"RTN","FHOMSS1",39,0)
 ..S FHEL=$G(^FHPT(FHDFN,"SM",FHSMDT,1))
"RTN","FHOMSS1",40,0)
 ..W !?6,"Early/Late Tray Time: ",$P(FHEL,U,1)
"RTN","FHOMSS1",41,0)
 ..W "  Bagged Meal: ",$P(FHEL,U,2)
"RTN","FHOMSS1",42,0)
 ..Q
"RTN","FHOMSS1",43,0)
 .I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHOMSS1",44,0)
 .Q
"RTN","FHOMSS1",45,0)
 I NUM=0 W !!,"NO SPECIAL MEALS FOR THIS DATE RANGE" Q
"RTN","FHOMSS1",46,0)
 Q
"RTN","FHOMSS1",47,0)
PG ;
"RTN","FHOMSS1",48,0)
 Q:$O(^FHPT(FHDFN,"SM",FHSMDT))'>0
"RTN","FHOMSS1",49,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHOMSS1",50,0)
 D HDR Q
"RTN","FHOMSS1",51,0)
HDR ;
"RTN","FHOMSS1",52,0)
 W:$Y @IOF
"RTN","FHOMSS1",53,0)
 W !?5,"S P E C I A L    M E A L S    S T A T U S    R E P O R T"
"RTN","FHOMSS1",54,0)
 W !!!?1,"#",?8,"Name",?26,"Date/Time",?40,"Location"
"RTN","FHOMSS1",55,0)
 W ?51,"Diet Ordered",?65,"Meal",?71,"Status"
"RTN","FHOMSS1",56,0)
 W !,"===",?5,"==================",?25,"============",?39,"=========="
"RTN","FHOMSS1",57,0)
 W ?51,"============",?65,"====",?70,"========="
"RTN","FHOMSS1",58,0)
 Q
"RTN","FHOMSS1",59,0)
END ;
"RTN","FHOMSS1",60,0)
 K EX,FHNODE,FHSTAT Q
"RTN","FHOMTK1")
0^175^B5990172
"RTN","FHOMTK1",1,0)
FHOMTK1 ;Hines OIFO/RTK OUTPATIENT MEALS TRAY TICKETS  ;7/02/03  14:05
"RTN","FHOMTK1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMTK1",3,0)
 ;
"RTN","FHOMTK1",4,0)
START S RM="",FHBY=$E($G(FHBY),1) I FHBY="" Q
"RTN","FHOMTK1",5,0)
 S FHDTE=D1
"RTN","FHOMTK1",6,0)
 S X1=D1,X2=-1 D C^%DTC S FHRMDTE=X
"RTN","FHOMTK1",7,0)
 S X1=D1,X2=1 D C^%DTC S FHDTQ=X
"RTN","FHOMTK1",8,0)
RM ; Recurring Meals
"RTN","FHOMTK1",9,0)
 S FHOMTYP="R"
"RTN","FHOMTK1",10,0)
 F FHOMDT=FHRMDTE:0 S FHOMDT=$O(^FHPT("RM",FHOMDT)) Q:FHOMDT=""!(FHOMDT'<FHDTQ)  D
"RTN","FHOMTK1",11,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHOMDT,FHDFN)) Q:FHDFN=""  D
"RTN","FHOMTK1",12,0)
 ..F FHRNUM=0:0 S FHRNUM=$O(^FHPT("RM",FHOMDT,FHDFN,FHRNUM)) Q:FHRNUM=""  D
"RTN","FHOMTK1",13,0)
 ...S FHZN=$G(^FHPT(FHDFN,"OP",FHRNUM,0)),FHLOC=$P(FHZN,U,3) Q:FHLOC=""
"RTN","FHOMTK1",14,0)
 ...S FHSTAT=$P(FHZN,U,15) Q:FHSTAT="C"
"RTN","FHOMTK1",15,0)
 ...S FHMEAL=$P(FHZN,U,4)
"RTN","FHOMTK1",16,0)
 ...I FHOMEAL'="A",FHOMEAL'[FHMEAL Q
"RTN","FHOMTK1",17,0)
 ...I FHBY="P",FHDFN'=FHTTDFN Q
"RTN","FHOMTK1",18,0)
 ...I FHBY="L",W1'=FHLOC Q
"RTN","FHOMTK1",19,0)
 ...I FHBY="C" S FHCOMM=$P($G(^FH(119.6,FHLOC,0)),U,8) I FHP'=FHCOMM Q
"RTN","FHOMTK1",20,0)
 ...I UPD,$P(FHZN,U,16)<$P(FHZN,U,13) Q
"RTN","FHOMTK1",21,0)
 ...I FHOMEAL'="A" D BLD^FHOMTK2 Q
"RTN","FHOMTK1",22,0)
 ...S MEAL=FHMEAL D BLD^FHOMTK2
"RTN","FHOMTK1",23,0)
 ...Q
"RTN","FHOMTK1",24,0)
 ..Q
"RTN","FHOMTK1",25,0)
 .Q
"RTN","FHOMTK1",26,0)
SM ; Special Meals
"RTN","FHOMTK1",27,0)
 S FHOMTYP="S"
"RTN","FHOMTK1",28,0)
 F FHOMDT=FHDTE:0 S FHOMDT=$O(^FHPT("SM",FHOMDT)) Q:FHOMDT=""!(FHOMDT>FHDTQ)  D
"RTN","FHOMTK1",29,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("SM",FHOMDT,FHDFN)) Q:FHDFN=""  D
"RTN","FHOMTK1",30,0)
 ..S FHZN=$G(^FHPT(FHDFN,"SM",FHOMDT,0)),FHLOC=$P(FHZN,U,3) Q:FHLOC=""
"RTN","FHOMTK1",31,0)
 ..S FHMEAL=$P(FHZN,U,9)
"RTN","FHOMTK1",32,0)
 ..I FHOMEAL'="A",FHOMEAL'[FHMEAL Q
"RTN","FHOMTK1",33,0)
 ..I FHBY="P",FHDFN'=FHTTDFN Q
"RTN","FHOMTK1",34,0)
 ..I FHBY="L",W1'=FHLOC Q
"RTN","FHOMTK1",35,0)
 ..I FHBY="C" S FHCOMM=$P($G(^FH(119.6,FHLOC,0)),U,8) I FHP'=FHCOMM Q
"RTN","FHOMTK1",36,0)
 ..I FHOMEAL'="A" D BLD^FHOMTK2 Q
"RTN","FHOMTK1",37,0)
 ..S MEAL=FHMEAL D BLD^FHOMTK2
"RTN","FHOMTK1",38,0)
 ..Q
"RTN","FHOMTK1",39,0)
 .Q
"RTN","FHOMTK1",40,0)
GM ; Guest Meals
"RTN","FHOMTK1",41,0)
 S FHOMTYP="G"
"RTN","FHOMTK1",42,0)
 F FHOMDT=FHDTE:0 S FHOMDT=$O(^FHPT("GM",FHOMDT)) Q:FHOMDT=""!(FHOMDT>FHDTQ)  D
"RTN","FHOMTK1",43,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHOMDT,FHDFN)) Q:FHDFN=""  D
"RTN","FHOMTK1",44,0)
 ..S FHZN=$G(^FHPT(FHDFN,"GM",FHOMDT,0)),FHLOC=$P(FHZN,U,5) Q:FHLOC=""
"RTN","FHOMTK1",45,0)
 ..S FHMEAL=$P(FHZN,U,3)
"RTN","FHOMTK1",46,0)
 ..I FHOMEAL'="A",FHOMEAL'[FHMEAL Q
"RTN","FHOMTK1",47,0)
 ..I FHBY="P",FHDFN'=FHTTDFN Q
"RTN","FHOMTK1",48,0)
 ..I FHBY="L",W1'=FHLOC Q
"RTN","FHOMTK1",49,0)
 ..I FHBY="C" S FHCOMM=$P($G(^FH(119.6,FHLOC,0)),U,8) I FHP'=FHCOMM Q
"RTN","FHOMTK1",50,0)
 ..I FHOMEAL'="A" D BLD^FHOMTK2 Q
"RTN","FHOMTK1",51,0)
 ..S MEAL=FHMEAL D BLD^FHOMTK2
"RTN","FHOMTK1",52,0)
 ..Q
"RTN","FHOMTK1",53,0)
 .Q
"RTN","FHOMTK1",54,0)
 I $G(NBR) D PRT^FHMTK1C Q
"RTN","FHOMTK1",55,0)
 K FHTTDFN Q
"RTN","FHOMTK1",56,0)
 ;
"RTN","FHOMTK2")
0^176^B22837815
"RTN","FHOMTK2",1,0)
FHOMTK2 ;Hines OIFO/RTK OUTPATIENT MEALS BUILD TRAY TICKETS  ;2/11/04  13:45
"RTN","FHOMTK2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMTK2",3,0)
BLD ; Build Tray Ticket list for a patient
"RTN","FHOMTK2",4,0)
 D GETOPV  ; GET OUTPATIENT VARIABLES - FHDIET, FHLOC, FHLOCNM
"RTN","FHOMTK2",5,0)
 I FHDIET=""!(FHLOC="") W !!,"NO DIET OR NO NUTRITION LOCATION!" Q
"RTN","FHOMTK2",6,0)
 S FHOR=FHDIET F ZZZ=1:1:4 I $L(FHOR,"^")<5 S FHOR=FHOR_"^"
"RTN","FHOMTK2",7,0)
 I FHMEAL'=MEAL Q
"RTN","FHOMTK2",8,0)
 ;  SVC (SERVICE), IS (ISOLATION/PRE), FHD (D/T TICKET LAST PRINTED),
"RTN","FHOMTK2",9,0)
 ;  PD (PRODUCTION DIET), SP (TRAY SERVICE PT), SP1 (CAF SERVICE PT)
"RTN","FHOMTK2",10,0)
 S SVC="T",SX=$E($P($G(^FH(119.6,FHLOC,0)),U,10),1) I "TCD"[SX S SVC=SX
"RTN","FHOMTK2",11,0)
 S SP=$P($G(^FH(119.6,FHLOC,0)),U,5),SP1=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHOMTK2",12,0)
 S FHPAR=$P($G(^FH(119.6,FHLOC,0)),U,24)
"RTN","FHOMTK2",13,0)
 S IS=$P($G(^FHPT(FHDFN,0)),U,5)
"RTN","FHOMTK2",14,0)
 I FHPAR'="Y" Q:SVC="C"
"RTN","FHOMTK2",15,0)
 I SVC="C" S:SP'=SP1 SP=SP1 Q:'SP
"RTN","FHOMTK2",16,0)
 I IS S IS=$G(^FH(119.4,+IS,0)) S:IS'="" SVC=SVC_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHOMTK2",17,0)
 K FP,MP,N2,NN,P4,PS
"RTN","FHOMTK2",18,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0)) I DPAT="" W !!,"NO DIET PATTERN FOR ",FHPTNM,! Q
"RTN","FHOMTK2",19,0)
 I DPAT S PD=$P($G(^FH(111.1,DPAT,0)),"^",7) I $O(MP(""))="" F X8=0:0 S X8=$O(^FH(111.1,DPAT,MEAL,X8)) Q:X8<1  S Z1=$G(^(X8,0)),MP(+Z1)=$P(Z1,"^",2)
"RTN","FHOMTK2",20,0)
 Q:PD=""  S PD=$P($G(^FH(116.2,PD,0)),"^",2) Q:PD=""  D CHK^FHMTK1B
"RTN","FHOMTK2",21,0)
 I $G(NBR)=3 D PRT^FHMTK1C K MM,PP,S S NBR=0
"RTN","FHOMTK2",22,0)
 S NBR=$G(NBR)+1 ;D PID^FHDPA
"RTN","FHOMTK2",23,0)
 F X6=0:0 S X6=$O(^FHPT(FHDFN,"P","B",X6)) Q:X6<1  F X7=0:0 S X7=$O(^FHPT(FHDFN,"P","B",X6,X7)) Q:X7<1  S PS=$P($G(^FH(115.2,+X6,0)),"^",4) I PS S P4=$G(^FH(114,+PS,0)),P1=$P(P4,"^",7)_"^"_+PS_"^"_$P(P4,"^",1) I +P1 D
"RTN","FHOMTK2",24,0)
 .S CHK="" F  S CHK=$O(^TMP($J,"DEF",MEAL,PD,CHK)) Q:CHK=""  S C1=$G(^(CHK)) I $D(^TMP($J,"FHDEF",MEAL,+C1)),+^TMP($J,"FHDEF",MEAL,+C1)=+P1 D  Q
"RTN","FHOMTK2",25,0)
 ..S C2=$G(^FHPT(FHDFN,"P",+X7,0)) Q:$P(C2,"^",2)'[MEAL
"RTN","FHOMTK2",26,0)
 ..S P2=+CHK,P3=$P(P1,"^",3) S:'$D(N2(P2,+C1,P3)) N2(P2,+C1,P3)=+$P(P1,"^",2)_"^"_P3 Q
"RTN","FHOMTK2",27,0)
 .Q
"RTN","FHOMTK2",28,0)
 S Y0=FHPTNM_" ("_FHBID_")"_"  "_SVC,S(NBR)=0,N1=0
"RTN","FHOMTK2",29,0)
 S N1=N1+1 I $L(Y)<40 S PP(N1,NBR)=Y
"RTN","FHOMTK2",30,0)
 E  S L=$S($L($P(Y,",",1,3))<40:3,1:2) S PP(N1,NBR)=$P(Y,",",1,L),N1=N1+1,PP(N1,NBR)=$E($P(Y,",",L+1,5),2,99)
"RTN","FHOMTK2",31,0)
 S MM(0,NBR)=Y0_"^"_FHLOCNM_"^^^^^"_FHMEAL
"RTN","FHOMTK2",32,0)
 D ALG^FHCLN S ALG="ALLGS.: "_$S(ALG="":"NONE ON FILE",1:ALG) S J=0 D BRK^FHMTK1B
"RTN","FHOMTK2",33,0)
 S X8="" F  S X8=$O(^TMP($J,MEAL,PD,X8)) Q:X8=""  S (P4,X1)=^(X8),X1=+X1,P4=$P(P4,"^",3) D
"RTN","FHOMTK2",34,0)
 .S Z1=+$P(X8,"~",2) Q:'$F(P4,"~"_SP_"~")
"RTN","FHOMTK2",35,0)
 .S (MSG,X6)="",CTR=1
"RTN","FHOMTK2",36,0)
 .S QTY="" Q:'$D(MP(Z1))  Q:MP(Z1)=0  S PAD=$E("    ",1,5-$L(MP(Z1))),QTY=MP(Z1)_PAD,CTR=$J(MP(Z1),0,2)
"RTN","FHOMTK2",37,0)
 .S:$G(^TMP($J,"FHPO",$P(X8,"~",3)))="" ^TMP($J,"FHPO",$P(X8,"~",3))=X8 S C2=$G(^TMP($J,"FHPO",$P(X8,"~",3)))
"RTN","FHOMTK2",38,0)
 .I $D(N2(Z1,X1)) D BRD Q
"RTN","FHOMTK2",39,0)
 .I $D(FP(+X1)) D SUB Q
"RTN","FHOMTK2",40,0)
 .S NN(X8)=QTY_$P(X8,"~",3) D CNT
"RTN","FHOMTK2",41,0)
 .I $D(^TMP($J,"DBX",MEAL,PD,+X1)) F LL=0:0 S LL=$O(^TMP($J,"DBX",MEAL,PD,+X1,LL)) Q:LL<1  S NN(X8_" "_LL)=$G(^(LL))
"RTN","FHOMTK2",42,0)
 .Q
"RTN","FHOMTK2",43,0)
 S X8="" F  S X8=$O(NN(X8)) Q:X8=""  D
"RTN","FHOMTK2",44,0)
 .S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$G(NN(X8)) Q
"RTN","FHOMTK2",45,0)
 S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=""
"RTN","FHOMTK2",46,0)
 D NOW^%DTC S (DTP,TIM)=% D DTP^FH S HD=DTP
"RTN","FHOMTK2",47,0)
 S DTP=D1 D DTP^FH S MDT=DTP
"RTN","FHOMTK2",48,0)
 I FHOMTYP'="R" Q
"RTN","FHOMTK2",49,0)
 D NOW^%DTC S FHDTLP=%,$P(^FHPT(FHDFN,"OP",FHRNUM,0),U,13)=FHDTLP
"RTN","FHOMTK2",50,0)
 Q
"RTN","FHOMTK2",51,0)
SUB ; Get Substitutes
"RTN","FHOMTK2",52,0)
 D ALT^FHMTK1B S:MSG'="" NN(X8)=MSG Q:'X6
"RTN","FHOMTK2",53,0)
 S X1=+X6,XX=Z,Z1=$P(XX,"~",2) I $D(N2(Z1,X1)) D BRD Q
"RTN","FHOMTK2",54,0)
 S:$D(^TMP($J,"FHPO",$P(XX,"~",3))) XX=$G(^TMP($J,"FHPO",$P(XX,"~",3)))
"RTN","FHOMTK2",55,0)
 S NN(XX)=QTY_$P(XX,"~",3)
"RTN","FHOMTK2",56,0)
 S CT=$G(^TMP($J,"CTR",MEAL,XX,SP))
"RTN","FHOMTK2",57,0)
 S CT=CT+CTR,^TMP($J,"CTR",MEAL,XX,SP)=CT D C1
"RTN","FHOMTK2",58,0)
 I SUM S TOT=$G(^TMP($J,"TOT",XX,SP)),TOT=TOT+CTR,^TMP($J,"TOT",XX,SP)=TOT
"RTN","FHOMTK2",59,0)
 I $D(^TMP($J,"DBX",MEAL,PD,+X1)) F LL=0:0 S LL=$O(^TMP($J,"DBX",MEAL,PD,+X1,LL)) Q:LL<1  S NN(XX_" "_LL)=$G(^(LL))
"RTN","FHOMTK2",60,0)
 Q
"RTN","FHOMTK2",61,0)
BRD ; Get Bread/Beverage
"RTN","FHOMTK2",62,0)
 S (X7,XX)="" F  S X7=$O(N2(Z1,X1,X7)) Q:X7=""  D
"RTN","FHOMTK2",63,0)
 .S L1=+N2(Z1,X1,X7),XX=$P(X8,"~",1,2)_"~"_X7
"RTN","FHOMTK2",64,0)
 .I '$D(NN(XX)) S NN(XX)=QTY_X7 S CT=$G(^TMP($J,"CTR",MEAL,XX,SP)),CT=CT+CTR,^TMP($J,"CTR",MEAL,XX,SP)=CT D C1 I SUM S TOT=$G(^TMP($J,"TOT",XX,SP)),TOT=TOT+CTR,^TMP($J,"TOT",XX,SP)=TOT
"RTN","FHOMTK2",65,0)
 .Q
"RTN","FHOMTK2",66,0)
 Q
"RTN","FHOMTK2",67,0)
CNT ; Count Recipe items for Service Points
"RTN","FHOMTK2",68,0)
 S CT=$G(^TMP($J,"CTR",MEAL,C2,SP)),CT=CT+CTR,^TMP($J,"CTR",MEAL,C2,SP)=CT
"RTN","FHOMTK2",69,0)
 I SUM S TOT=$G(^TMP($J,"TOT",C2,SP)),TOT=TOT+CTR,^TMP($J,"TOT",C2,SP)=TOT
"RTN","FHOMTK2",70,0)
C1 ; Setup Service Points Array
"RTN","FHOMTK2",71,0)
 S M1=$G(^TMP($J,"SRP",SP)),M2=$P(M1,"^",1),M3=$P(M1,"^",4)
"RTN","FHOMTK2",72,0)
 S:M3="" M3=$E(M2,1,8) I '$D(DP(MEAL,M3,SP)) S DP(MEAL,M3,SP)=$J(M3,10),LS(MEAL)=LS(MEAL)+10,P(MEAL,M3,SP)=""
"RTN","FHOMTK2",73,0)
 I SUM,'$D(TP(M3,SP)) S TP(M3,SP)=$J(M3,10),SL=SL+10,T1(M3,SP)=""
"RTN","FHOMTK2",74,0)
 Q
"RTN","FHOMTK2",75,0)
GETOPV ; Get outpatient variables
"RTN","FHOMTK2",76,0)
 I FHOMTYP="R" D
"RTN","FHOMTK2",77,0)
 .S FHDIET=$P(FHZN,U,2)
"RTN","FHOMTK2",78,0)
 .I $P($G(^FH(119.6,FHLOC,1)),U,4)="Y" S FHDIET=$P(FHZN,U,7,11)
"RTN","FHOMTK2",79,0)
 .S FHLOC=$P(FHZN,U,3),FHMEAL=$P(FHZN,U,4),FHD=$P(FHZN,U,13)
"RTN","FHOMTK2",80,0)
 I FHOMTYP="S" D
"RTN","FHOMTK2",81,0)
 .S FHDIET=$P(FHZN,U,4)
"RTN","FHOMTK2",82,0)
 .S FHLOC=$P(FHZN,U,3),FHMEAL=$P(FHZN,U,9),FHD=$P(FHZN,U,10)
"RTN","FHOMTK2",83,0)
 I FHOMTYP="G" D
"RTN","FHOMTK2",84,0)
 .S FHDIET=$P(FHZN,U,6)
"RTN","FHOMTK2",85,0)
 .S FHLOC=$P(FHZN,U,5),FHMEAL=$P(FHZN,U,3),FHD=$P(FHZN,U,7)
"RTN","FHOMTK2",86,0)
 I FHDIET=""!(FHLOC="") Q
"RTN","FHOMTK2",87,0)
 S FHLD="" ;no WITHHOLD for outpatients
"RTN","FHOMTK2",88,0)
 S Y="" F A1=1:1:5 S D3=$P(FHDIET,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7) ;set Y = diet text
"RTN","FHOMTK2",89,0)
 D PATNAME^FHOMUTL
"RTN","FHOMTK2",90,0)
 S FHLOCNM=$P($G(^FH(119.6,FHLOC,0)),U,1) ;set location name
"RTN","FHOMTK2",91,0)
 Q
"RTN","FHOMUPD")
0^177^B667616
"RTN","FHOMUPD",1,0)
FHOMUPD ;Hines OIFO/RTK OUTPATIENT MEALS UPDATE INP/OUTP FIELD ;9/18/03  13:15
"RTN","FHOMUPD",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMUPD",3,0)
 ;
"RTN","FHOMUPD",4,0)
 Q
"RTN","FHOMUPD",5,0)
 ;
"RTN","FHOMUPD",6,0)
 F FHPTIEN=0:0 S FHPTIEN=$O(^FHPT(FHPTIEN)) Q:FHPTIEN'>0  D
"RTN","FHOMUPD",7,0)
 .S FHPTNUM=$P($G(^FHPT(FHPTIEN,0)),U,1)
"RTN","FHOMUPD",8,0)
 .S FHIOFLD=$P($G(^FHPT(FHPTIEN,0)),U,2)
"RTN","FHOMUPD",9,0)
 .I FHPTNUM["N",FHIOFLD'="O" S FHVAL="O" D UPD Q
"RTN","FHOMUPD",10,0)
 .S FHDPTR=$E(FHPTNUM,2,99) I FHDPTR="" Q
"RTN","FHOMUPD",11,0)
 .I $D(^DPT(FHDPTR,.1)) S FHVAL="I" D UPD Q
"RTN","FHOMUPD",12,0)
 Q
"RTN","FHOMUPD",13,0)
UPD ;
"RTN","FHOMUPD",14,0)
 K DIE S DIE="^FHPT(",DA=FHPTIEN
"RTN","FHOMUPD",15,0)
 S DR="13////^S X=FHVAL" D ^DIE
"RTN","FHOMUPD",16,0)
 Q
"RTN","FHOMUTL")
0^178^B19020381
"RTN","FHOMUTL",1,0)
FHOMUTL ;Hines OIFO/RTK OUTPATIENT MEALS UTILITIES  ;2/04/03  15:15
"RTN","FHOMUTL",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMUTL",3,0)
 ;
"RTN","FHOMUTL",4,0)
DIV ;ask for Communication office if Multi-division.
"RTN","FHOMUTL",5,0)
 N FHSCNT,FH
"RTN","FHOMUTL",6,0)
 K FHSITE,FHSITENM
"RTN","FHOMUTL",7,0)
 S FHSCNT=0 F FH=0:0 S FH=$O(^FH(119.73,FH)) Q:FH'>0  S FHSCNT=FHSCNT+1,FHSITE=FH,FHSITENM=$P($G(^FH(119.73,FH,0)),U,1)
"RTN","FHOMUTL",8,0)
 I (FHSCNT=1),($P($G(^FH(119.9,1,0)),U,20)'="Y") Q
"RTN","FHOMUTL",9,0)
D2 I FHSCNT>1 K FHSITE,FHSITENM,X R !!,"Select COMMUNICATION OFFICE (or ALL): ALL// ",X:DTIME S:X="" X="ALL" Q:'$T!("^"[X)  D TR^FH I X="ALL" S FHSITE=0
"RTN","FHOMUTL",10,0)
 I X'="ALL" K DIC S DIC="^FH(119.73,",DIC(0)="EMQ" D ^DIC G:Y<1 D2 S FHSITE=+Y,FHSITENM=$P(Y,U,2)
"RTN","FHOMUTL",11,0)
 Q
"RTN","FHOMUTL",12,0)
 ;
"RTN","FHOMUTL",13,0)
STDATE ;Prompt for start date (if FHPSDT="N" do not allow past dates)
"RTN","FHOMUTL",14,0)
 S STDT="" D NOW^%DTC S Y=X D DD^%DT S FHDTDF=Y
"RTN","FHOMUTL",15,0)
 K DIR S DIR("A")="Select Start Date: ",DIR("B")=FHDTDF
"RTN","FHOMUTL",16,0)
 S DIR(0)="DAO" I $G(FHPSDT)="N" S DIR(0)="DAO^FHDTDF"
"RTN","FHOMUTL",17,0)
 D ^DIR Q:$D(DIRUT)  S STDT=Y S Y=STDT D DD^%DT W "  ",Y
"RTN","FHOMUTL",18,0)
 Q
"RTN","FHOMUTL",19,0)
ENDATE ;Prompt for end date
"RTN","FHOMUTL",20,0)
 S ENDT="" D NOW^%DTC S Y=X D DD^%DT S FHDTDF=Y K DIR
"RTN","FHOMUTL",21,0)
 S DIR("A")="Select End Date: ",DIR("B")=FHDTDF,DIR(0)="DAO^"_STDT D ^DIR
"RTN","FHOMUTL",22,0)
 Q:$D(DIRUT)  S ENDT=Y S Y=ENDT D DD^%DT W "  ",Y
"RTN","FHOMUTL",23,0)
 Q
"RTN","FHOMUTL",24,0)
OUTLOC ;Prompt for outpatient location - screen for ONLY Outpatient Locations
"RTN","FHOMUTL",25,0)
 S FHLOC="",FHOUT="O"
"RTN","FHOMUTL",26,0)
 K DIC S DIC="^FH(119.6,",DIC(0)="AEQZ"
"RTN","FHOMUTL",27,0)
 S DIC("A")="Select Outpatient Ordering Location: "
"RTN","FHOMUTL",28,0)
 S DIC("S")="I $P(^(0),U,3)=FHOUT" D ^DIC
"RTN","FHOMUTL",29,0)
 Q:$D(DUOUT)  I Y=-1 Q
"RTN","FHOMUTL",30,0)
 S FHLOC=+Y,FHCOMM=$P($G(^FH(119.6,FHLOC,0)),U,8)
"RTN","FHOMUTL",31,0)
 Q
"RTN","FHOMUTL",32,0)
 ;
"RTN","FHOMUTL",33,0)
GETOPT ;Select outpatient for recurring meals
"RTN","FHOMUTL",34,0)
 S FHFIND=1 D ^FHOMDPA I FHDFN="" S FHFIND=0 Q
"RTN","FHOMUTL",35,0)
 I '$D(^FHPT(FHDFN,0)) W !!,"UNKNOWN SELECTION !" S FHFIND=0 Q
"RTN","FHOMUTL",36,0)
 I $O(^FHPT(FHDFN,"OP",0))="" W !!,"NO RECURRING MEALS FOR THIS PERSON" S FHFIND=0 Q
"RTN","FHOMUTL",37,0)
 W ! D STDATE I STDT="" S FHFIND=0 Q
"RTN","FHOMUTL",38,0)
 Q
"RTN","FHOMUTL",39,0)
PATNAME ;Get name and demographics of patient/new person
"RTN","FHOMUTL",40,0)
 ;input variable: FHDFN
"RTN","FHOMUTL",41,0)
 S (FHDOB,FHBID,FHSEX,DFN)="" D GETZN
"RTN","FHOMUTL",42,0)
 I FILE="P" S FHPTNM=$P($G(^DPT(IEN,0)),U,1)
"RTN","FHOMUTL",43,0)
 I FILE="N" S FHPTNM=$P($G(^VA(200,IEN,0)),U,1)
"RTN","FHOMUTL",44,0)
 ;Get SSN,Age,DOB,Sex of patient/new person
"RTN","FHOMUTL",45,0)
 I FILE="P" D
"RTN","FHOMUTL",46,0)
 .S DFN=IEN
"RTN","FHOMUTL",47,0)
 .D PID^FHDPA S FHSSN=PID
"RTN","FHOMUTL",48,0)
 .S FHSEX=$P($G(^DPT(DFN,0)),U,2),FHDOB=$P($G(^DPT(DFN,0)),U,3)
"RTN","FHOMUTL",49,0)
 .S FHBID=BID
"RTN","FHOMUTL",50,0)
 I FILE="N" D
"RTN","FHOMUTL",51,0)
 .S IEN200=IEN,FHSSN=$P($G(^VA(200,IEN,1)),U,9)
"RTN","FHOMUTL",52,0)
 .S FHBID=$E(FHSSN,6,$L(FHSSN))
"RTN","FHOMUTL",53,0)
 .S FHSEX=$P($G(^VA(200,IEN,1)),U,2),FHDOB=$P($G(^VA(200,IEN,1)),U,3)
"RTN","FHOMUTL",54,0)
 S FHAGE="" D NOW^%DTC
"RTN","FHOMUTL",55,0)
 I FHDOB'="" S FHAGE=$E(%,1,3)-$E(FHDOB,1,3)-($E(%,4,7)<$E(FHDOB,4,7))
"RTN","FHOMUTL",56,0)
 Q
"RTN","FHOMUTL",57,0)
GETZN ;Get first piece of zero node in 115
"RTN","FHOMUTL",58,0)
 S FHPCZN=$P($G(^FHPT(FHDFN,0)),U,1),FILE=$E(FHPCZN,1)
"RTN","FHOMUTL",59,0)
 S IEN=$E(FHPCZN,2,99)
"RTN","FHOMUTL",60,0)
 Q
"RTN","FHOMUTL",61,0)
DIETVER ;Verify that diet selected is from the allowable diets in 119.9
"RTN","FHOMUTL",62,0)
 D DIETLST I $D(FHDIETS(FHDIET)) Q
"RTN","FHOMUTL",63,0)
 S FHDIET="" W *7," ==> NOT ALLOWED",! D DIETMSG Q
"RTN","FHOMUTL",64,0)
DIETHLP ;Display allowable diets from 119.9
"RTN","FHOMUTL",65,0)
 D DIETLST,DIETMSG Q
"RTN","FHOMUTL",66,0)
DIETLST ;Build list
"RTN","FHOMUTL",67,0)
 K FHDIETS,SPD S FHSPDTS="",SPD=$P($G(^FH(119.9,1,0)),U,2,6)
"RTN","FHOMUTL",68,0)
 S FHDEF=$P($G(^FH(119.9,1,0)),U,2)
"RTN","FHOMUTL",69,0)
 F A=1:1:5 S AB=$P(SPD,U,A) D
"RTN","FHOMUTL",70,0)
 .I AB="" Q
"RTN","FHOMUTL",71,0)
 .S FHDIETS(AB)=AB
"RTN","FHOMUTL",72,0)
 .S FHSPDTS=FHSPDTS_$P($G(^FH(111,AB,0)),U,1)_"^"
"RTN","FHOMUTL",73,0)
 Q
"RTN","FHOMUTL",74,0)
DIETMSG ;Display message
"RTN","FHOMUTL",75,0)
 W !?3,"You must select from the diets set up in the Site Parameters:"
"RTN","FHOMUTL",76,0)
 S AB="" F  S AB=$O(FHDIETS(AB)) Q:AB'>0  W !?3,$P($G(^FH(111,AB,0)),U)
"RTN","FHOMUTL",77,0)
 W ! Q
"RTN","FHOMUTL",78,0)
 Q
"RTN","FHOMUTL",79,0)
EXMSG ;Display message stating meal NOT ordered
"RTN","FHOMUTL",80,0)
 D TYPE
"RTN","FHOMUTL",81,0)
 W !!?3,FHMSGML," NOT ordered!",! H 2
"RTN","FHOMUTL",82,0)
 Q
"RTN","FHOMUTL",83,0)
OKMSG ;Display message stating meal ordered successfully
"RTN","FHOMUTL",84,0)
 D TYPE
"RTN","FHOMUTL",85,0)
 D PATNAME W !!?3,FHMSGML," ordered for ",FHPTNM,"...",! H 2
"RTN","FHOMUTL",86,0)
 Q
"RTN","FHOMUTL",87,0)
TYPE ;
"RTN","FHOMUTL",88,0)
 S FHMSGML=$S(FHMSG1="G":"Guest meal",FHMSG1="S":"Special meal",FHMSG1="R":"Recurring meal",FHMSG1="E":"Early/Late tray",FHMSG1="T":"Tubefeeding",1:"Additional order")
"RTN","FHOMUTL",89,0)
 Q
"RTN","FHOMUTL",90,0)
UPXMSG ;
"RTN","FHOMUTL",91,0)
 W !!?3,"Recurring meal NOT updated! ",! H 2
"RTN","FHOMUTL",92,0)
 Q
"RTN","FHOMUTL",93,0)
UPDMSG ;
"RTN","FHOMUTL",94,0)
 D PATNAME W !!?3,"Recurring meal updated for ",FHPTNM,"...",! H 2
"RTN","FHOMUTL",95,0)
 Q
"RTN","FHOMUTL",96,0)
SMSTAT ;Status of last special meal request
"RTN","FHOMUTL",97,0)
 S FHSMNUM=$O(^FHPT(FHDFN,"SM","B",""),-1) I FHSMNUM="" S FHSTAT="" Q
"RTN","FHOMUTL",98,0)
 I $E(FHSMNUM,1,7)'=DT S FHSTAT="" Q
"RTN","FHOMUTL",99,0)
 S FHSTAT=$P($G(^FHPT(FHDFN,"SM",FHSMNUM,0)),U,2)
"RTN","FHOMUTL",100,0)
 Q
"RTN","FHOMUTL",101,0)
RANGE ;Check for validity of range of numbers entered
"RTN","FHOMUTL",102,0)
 S FHCLST="",FLG="",X=FHNUM D TR^FH S FHNUM=X
"RTN","FHOMUTL",103,0)
 I FHNUM="A"!(FHNUM?1"A"1.2"L") S FHNUM="1-"_NUM
"RTN","FHOMUTL",104,0)
 F K=1:1 S K1=$P(FHNUM,",",K) Q:K1=""!(FLG="QUIT")  D
"RTN","FHOMUTL",105,0)
 .S K2=$S(K1["-":$P(K1,"-",2),1:+K1),K1=+K1 D CK I FLG="QUIT" Q
"RTN","FHOMUTL",106,0)
 .F K3=K1:1:K2 S FHCLST=FHCLST_K3_","
"RTN","FHOMUTL",107,0)
 Q
"RTN","FHOMUTL",108,0)
CK I K1<1!(K1>NUM)!(K1'?1N.N) D C1 Q
"RTN","FHOMUTL",109,0)
 I K2<1!(K2>NUM)!(K2'?1N.N) D C1 Q
"RTN","FHOMUTL",110,0)
 Q:K2'<K1
"RTN","FHOMUTL",111,0)
C1 W !,"  Enter numbers or range or ALL (E.G.,  1,3,4 or 3-5 or 1,3-5)" S FLG="QUIT",FHCLST="" Q
"RTN","FHOMUTL",112,0)
 Q
"RTN","FHOMWOR")
0^179^B17355019
"RTN","FHOMWOR",1,0)
FHOMWOR ;Hines OIFO/RTK OUTPATIENT MEALS/HL7 MESSAGING  ;10/21/03  10:15
"RTN","FHOMWOR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHOMWOR",3,0)
 S FHDFN="",FHZ115="P"_DFN D ADD^FHOMDPA
"RTN","FHOMWOR",4,0)
 I 'FHDFN S TXT="Outpatient not found" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",5,0)
 ;Decode FHMSG(3) - PV1
"RTN","FHOMWOR",6,0)
 S FHX=$G(FHMSG(3))
"RTN","FHOMWOR",7,0)
 I $E(FHX,1,3)'="PV1" S TXT="3rd msg not PV1" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",8,0)
 S FHLOC=$P($P(FHX,"|",4),U,1)
"RTN","FHOMWOR",9,0)
 I FHLOC="" S TXT="Missing Location" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",10,0)
 S FHLOC=$O(^FH(119.6,"AL",FHLOC,""))
"RTN","FHOMWOR",11,0)
 I 'FHLOC S TXT="Invalid Location" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",12,0)
 ;Decode FHMSG(4) - ORC
"RTN","FHOMWOR",13,0)
 S FHX=$G(FHMSG(4))
"RTN","FHOMWOR",14,0)
 I $E(FHX,1,3)'="ORC" S TXT="4th msg not ORC" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",15,0)
 S FHORN=$P(FHX,"|",3),FHORN=+FHORN,FILL=$P(FHX,"|",4)
"RTN","FHOMWOR",16,0)
 S FHDUR=$P(FHX,"|",8),FHDOW=$P(FHDUR,U,2)
"RTN","FHOMWOR",17,0)
 S DATE=$E($P(FHDUR,U,4),1,8) D CVT^FHWOR S STDT=DATE
"RTN","FHOMWOR",18,0)
 S DATE=$P(FHDUR,U,5) D CVT^FHWOR S ENDT=DATE I ENDT'="" S ENDT=ENDT_.99
"RTN","FHOMWOR",19,0)
 I ENDT="" S ENDT=9999999.99
"RTN","FHOMWOR",20,0)
 S ACT=$P(FHX,"|",2) I ACT="CA"!(ACT="DC") D CANCEL Q
"RTN","FHOMWOR",21,0)
 I ACT'="NW" S TXT="Action not NW, CA or DC" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",22,0)
 D NOW^%DTC S FHNOW=$P(%,".",1)
"RTN","FHOMWOR",23,0)
 I STDT=""!(STDT<FHNOW) S TXT="Start Date not valid" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",24,0)
 I ENDT<STDT S TXT="End Date not valid" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",25,0)
 S FHPV=$P(FHX,"|",13),FHEFF=$P(FHX,"|",16)
"RTN","FHOMWOR",26,0)
 I FHEFF="" S TXT="No effective date" D ERR Q
"RTN","FHOMWOR",27,0)
 ;Decode FHMSG(5) - ODS/ODT
"RTN","FHOMWOR",28,0)
 S FHX=$G(FHMSG(5))
"RTN","FHOMWOR",29,0)
 S FHINST=$P(FHX,"|",4),FHBAG="N" I FHINST="bagged" S FHBAG="Y"
"RTN","FHOMWOR",30,0)
 S FHSVCP=$P($P(FHX,"|",3),U,4)
"RTN","FHOMWOR",31,0)
 I $E(FHX,1,3)="ODT" D HL7SET^FHOMRE1 Q  ;EARLY/LATE
"RTN","FHOMWOR",32,0)
 I $E(FHX,1,3)="OBR" D HL7SET^FHOMIP Q  ;ISOLATION/PRECAUTION
"RTN","FHOMWOR",33,0)
 I $E(FHX,1,3)'="ODS" S TXT="5th message not ODT or ODS as expected" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",34,0)
 S FHTYPC=$P(FHX,"|",2) I FHTYPC="ZE" D HL7SET^FHOMRT1 Q  ;TUBEFEEDING
"RTN","FHOMWOR",35,0)
 S FHDTX=$P(FHX,"|",4),FHDIET=$P(FHDTX,U,4),FHDTX=$E(FHDTX,4,$L(FHDTX))
"RTN","FHOMWOR",36,0)
 S FHCOM=$P(FHX,"|",5),FHM3=$P(FHX,"|",3)
"RTN","FHOMWOR",37,0)
 I $E(FHDTX,1,4)="FH-6" D HL7SET^FHOMRA1 Q  ;ADDITIONAL ORDERS
"RTN","FHOMWOR",38,0)
 S FHMEAL=$S(FHM3=1:"B",FHM3=3:"N",FHM3=5:"E",1:"")
"RTN","FHOMWOR",39,0)
 I FHMEAL="" S TXT="Meal missing" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",40,0)
 I FHDIET="" S TXT="Missing diet" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",41,0)
 I '$D(^FH(111,FHDIET)) S TXT="Invalid diet" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",42,0)
 I FHTYPC="S" D SM  ;SPECIAL MEAL REQUEST
"RTN","FHOMWOR",43,0)
 I FHTYPC="D" D RM I $G(FHAIL)'="" Q  ;RECURRING MEAL ORDER
"RTN","FHOMWOR",44,0)
 D SEND^FHWOR Q
"RTN","FHOMWOR",45,0)
SM ; Special Meal Request
"RTN","FHOMWOR",46,0)
 ; FHDFN,FHLOC set at top of FHOMWOR
"RTN","FHOMWOR",47,0)
 D NOW^%DTC S FHNOW=%
"RTN","FHOMWOR",48,0)
 S FHDUZ=$P($G(FHMSG(4)),"|",11),FHSTAT="P"
"RTN","FHOMWOR",49,0)
 I FHDUZ'="",$D(^XUSEC("FHAUTH",FHDUZ)) S FHSTAT="A"
"RTN","FHOMWOR",50,0)
 S FHQEL=1 D SETNODE^FHOMSR1
"RTN","FHOMWOR",51,0)
 S FILL="S;"_STDT_";"_ENDT_";"_FHLOC_";"_FHSMID
"RTN","FHOMWOR",52,0)
 Q
"RTN","FHOMWOR",53,0)
RM ;
"RTN","FHOMWOR",54,0)
 ; Recurring orders from CPRS will only have ONE diet, not up to 5 like
"RTN","FHOMWOR",55,0)
 ; for NonVA patients/inpatients therefore can set FHDIETX1-5 = NULL
"RTN","FHOMWOR",56,0)
 ; FHDFN,FHLOC set at top of FHOMWOR
"RTN","FHOMWOR",57,0)
 S (FHAIL,FHDIETX(1),FHDIETX(2),FHDIETX(3),FHDIETX(4),FHDIETX(5))=""
"RTN","FHOMWOR",58,0)
 S (C,FHENDL)=0,STDTLP=STDT,FHDZ="" F  Q:FHENDL=1  D
"RTN","FHOMWOR",59,0)
 .S X=STDTLP D H^%DTC S:%Y=0 %Y=7 S FHDZ=FHDZ_%Y_"^",X1=STDTLP,X2=1
"RTN","FHOMWOR",60,0)
 .D C^%DTC S STDTLP=X,C=C+1 I STDTLP>ENDT!(C>6) S FHENDL=1 Q
"RTN","FHOMWOR",61,0)
 S FHDAYS="" F FHH=1:1:7 S FHPCE=$P(FHDOW,"~",FHH) Q:FHPCE=""  D
"RTN","FHOMWOR",62,0)
 .S FHD3=$E(FHPCE,3)
"RTN","FHOMWOR",63,0)
 .I FHD3'>0,FHD3'<8 Q
"RTN","FHOMWOR",64,0)
 .I FHDZ'[FHD3 Q
"RTN","FHOMWOR",65,0)
 .S FHDAYS=FHDAYS_$E("MTWRFSX",FHD3)
"RTN","FHOMWOR",66,0)
 I FHDAYS="" S (TXT,FHAIL)="Day of week invalid or not within date range" D GETOR^FHWOR,ERR Q
"RTN","FHOMWOR",67,0)
 D SETNODE^FHOMRO1
"RTN","FHOMWOR",68,0)
 S FILL="R;"_STDT_";"_ENDT_";"_FHLOC
"RTN","FHOMWOR",69,0)
 Q
"RTN","FHOMWOR",70,0)
CANCEL ;
"RTN","FHOMWOR",71,0)
 S FHENDT=ENDT,FHX=$G(FHMSG(4)),FILL=$P(FHX,"|",4)
"RTN","FHOMWOR",72,0)
 S FHTYPE=$P(FILL,";",1),FHSMID=$P(FILL,";",5)
"RTN","FHOMWOR",73,0)
 I "AEISRT"'[FHTYPE S TXT="Invalid cancel code" D ERR Q
"RTN","FHOMWOR",74,0)
 S X1=STDT,X2=-1 D C^%DTC S STDT1=X
"RTN","FHOMWOR",75,0)
 F FHRMDT=STDT1:0 S FHRMDT=$O(^FHPT(FHDFN,"OP","B",FHRMDT)) Q:FHRMDT'>0!(FHRMDT>FHENDT)  D
"RTN","FHOMWOR",76,0)
 .F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRMDT,FHRNUM)) Q:FHRNUM'>0  D
"RTN","FHOMWOR",77,0)
 ..I FHTYPE="A" D CANAO^FHOMRC1 Q
"RTN","FHOMWOR",78,0)
 ..I FHTYPE="E" D CANEL^FHOMRC1 Q
"RTN","FHOMWOR",79,0)
 ..I FHTYPE="T" D CANTF^FHOMRC1 Q
"RTN","FHOMWOR",80,0)
 ..I FHTYPE="R" D CANRM^FHOMRC1 Q
"RTN","FHOMWOR",81,0)
 I FHTYPE="I" D CAN^FHOMIP
"RTN","FHOMWOR",82,0)
 I FHTYPE="S" S FHCDT=FHDFN_"^"_FHSMID D CAN^FHOMSC1
"RTN","FHOMWOR",83,0)
 D CSEND^FHWOR Q
"RTN","FHOMWOR",84,0)
 Q
"RTN","FHOMWOR",85,0)
ERR ;
"RTN","FHOMWOR",86,0)
 K MSG D RMSH^FHWOR  ;Sets MSG(1) & MSG(2)
"RTN","FHOMWOR",87,0)
 S ACT="UA" I $P(FHMSG(4),"|",2)="CA" S ACT="U"_$E($P(FHMSG(4),"|",2),1)
"RTN","FHOMWOR",88,0)
 S $P(MSG(3),"|",1,2)="ORC|"_ACT,$P(MSG(3),"|",3)=FHORN
"RTN","FHOMWOR",89,0)
 S $P(MSG(3),"|",4)=$P(FHMSG(3),"|",4)
"RTN","FHOMWOR",90,0)
 S $P(MSG(3),"|",13)=$P(FHMSG(3),"|",13)
"RTN","FHOMWOR",91,0)
 S $P(MSG(3),"|",16)=$P(FHMSG(3),"|",16),$P(MSG(3),"|",17)=TXT
"RTN","FHOMWOR",92,0)
 ;
"RTN","FHOMWOR",93,0)
 ;F RTK=0:0 S RTK=$O(MSG(RTK)) Q:RTK'>0  W !,"  MSG"_RTK_"= ",MSG(RTK)
"RTN","FHOMWOR",94,0)
 ;F RTK=0:0 S RTK=$O(FHMSG(RTK)) Q:RTK'>0  W !,"FHMSG"_RTK_"= ",FHMSG(RTK)
"RTN","FHOMWOR",95,0)
 ;W !!,"TXT=",TXT,!!
"RTN","FHOMWOR",96,0)
 ;
"RTN","FHOMWOR",97,0)
 D EVSEND^FHWOR Q
"RTN","FHOMWOR",98,0)
 Q
"RTN","FHORC")
0^180^B5770912
"RTN","FHORC",1,0)
FHORC ; HISC/REL - Dietetic Consults ;9/4/96  09:22 ;
"RTN","FHORC",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORC",3,0)
EN1 ; Order Consult
"RTN","FHORC",4,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL D ORD G:'$D(DFN) KIL D FIL G KIL
"RTN","FHORC",5,0)
ORD ; Get Order
"RTN","FHORC",6,0)
 W ! F K=0:0 S K=$O(^FH(119.5,K)) Q:K<1  W:'$D(^FH(119.5,K,"I")) !,$P(^(0),"^",1)
"RTN","FHORC",7,0)
R1 W ! K DIC S DIC="^FH(119.5,",DIC(0)="AEQZM" D ^DIC G AB:U[X!$D(DTOUT),R1:Y<1 S REQ=+Y
"RTN","FHORC",8,0)
R2 R !,"Comment: ",COM:DTIME G:'$T!(COM["^") AB I COM'?.ANP W *7," ??" G R2
"RTN","FHORC",9,0)
 I $L(COM)>80!(COM?1"?".E) W *7,!,"Enter 1-80 character comment" G R2
"RTN","FHORC",10,0)
R4 R !,"Ok to Enter Request? Y// ",YN:DTIME G AB:'$T!(YN["^") S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G R4
"RTN","FHORC",11,0)
 G:YN'?1"Y".E AB Q
"RTN","FHORC",12,0)
FIL ; File Order
"RTN","FHORC",13,0)
 L +^FHPT(FHDFN,"A",ADM,"DR",0) S:'$D(^FHPT(FHDFN,"A",ADM,"DR",0)) ^FHPT(FHDFN,"A",ADM,"DR",0)="^115.03^^"
"RTN","FHORC",14,0)
 S DR=$P(^FHPT(FHDFN,"A",ADM,"DR",0),"^",3)+1,$P(^(0),"^",3,4)=DR_"^"_DR L -^FHPT(FHDFN,"A",ADM,"DR",0)
"RTN","FHORC",15,0)
 D NOW^%DTC S NOW=% D CHK
"RTN","FHORC",16,0)
 S ^FHPT(FHDFN,"A",ADM,"DR",DR,0)=NOW_"^"_REQ_"^"_COM_"^^"_XMKK_"^^"_DUZ_"^A"
"RTN","FHORC",17,0)
 S ^FHPT("ADR",NOW,FHDFN,ADM,DR)="",^FHPT("ADRU",XMKK,FHDFN,ADM,DR)=""
"RTN","FHORC",18,0)
 D POST Q
"RTN","FHORC",19,0)
CHK ; Get Clinician
"RTN","FHORC",20,0)
 S WRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) G:WRD<1 RNO
"RTN","FHORC",21,0)
 G:'$D(^FH(119.6,WRD)) RNO
"RTN","FHORC",22,0)
 S XMKK=$P($G(^FH(119.5,+REQ,0)),"^",6) I XMKK<1 S XMKK=$P(^FH(119.6,WRD,0),"^",2) G:XMKK<1 RNO
"RTN","FHORC",23,0)
 Q
"RTN","FHORC",24,0)
RNO S XMKK=$O(^XUSEC("FHMGR",0)) S:XMKK<1 XMKK=.5 Q
"RTN","FHORC",25,0)
AB W *7,!!,"Consult entry is TERMINATED - No request entered!"
"RTN","FHORC",26,0)
KIL K %,%H,%I,A,G,I,XMKK,WARD,WRD,ADM,ALL,COM,DA,FHDFN,DFN,DIC,DR,FHPV,K,NOW,REQ,X,Y,YN Q
"RTN","FHORC",27,0)
POST ; Generate Bulletin
"RTN","FHORC",28,0)
 S XMB="FHDIREQ",XMY(XMKK)=""
"RTN","FHORC",29,0)
 S XMB(1)=$P(^FH(119.5,REQ,0),"^",1),XMB(2)=$S($D(^DPT(DFN,.101)):^(.101),1:"unknown")
"RTN","FHORC",30,0)
 S XMB(3)=$P(^DPT(DFN,0),"^",1),XMB(4)=WARD,XMB(5)=COM D ^XMB K XMB,XMY,XMM,XMDT Q
"RTN","FHORC1")
0^181^B4903856
"RTN","FHORC1",1,0)
FHORC1 ; HISC/REL - Review Active Consults ;4/26/93  14:48 
"RTN","FHORC1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORC1",3,0)
E1 R !!,"Select CLINICIAN (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHDZ=0
"RTN","FHORC1",4,0)
 E  K DIC S DIC="^VA(200,",DIC(0)="QEM" D ^DIC G:Y<1 E1 S FHDZ=+Y
"RTN","FHORC1",5,0)
E2 W ! K IOP,%ZIS S %ZIS("A")="Select LIST PRINTER: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORC1",6,0)
 I $D(IO("Q")) S FHPGM="Q0^FHORC1",FHLST="FHDZ" D EN2^FH G:'FHDZ KIL G E1
"RTN","FHORC1",7,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G KIL:'FHDZ,E1
"RTN","FHORC1",8,0)
Q0 ; Display Active Consults
"RTN","FHORC1",9,0)
 W:$E(IOST,1,2)="C-" @IOF W !?25,"A C T I V E   C O N S U L T S"
"RTN","FHORC1",10,0)
 I FHDZ S X=$P(^VA(200,FHDZ,0),"^",1) W !!?(80-$L(X)\2),X
"RTN","FHORC1",11,0)
 W !!,"Date/Time Ordered",?19,"Request",?31,"ID#",?40,"Patient",?62,$S(FHDZ:"Ward",1:"Clinician"),!
"RTN","FHORC1",12,0)
Q1 S FHDFN=0,X1=FHDZ I FHDZ G Q3
"RTN","FHORC1",13,0)
Q2 S X1=$O(^FHPT("ADRU",X1)) G:X1<1 Q10 S FHDFN=0
"RTN","FHORC1",14,0)
Q3 S FHDFN=$O(^FHPT("ADRU",X1,FHDFN)) G:FHDFN="" Q2:'FHDZ,Q10 S ADM=""
"RTN","FHORC1",15,0)
Q4 S ADM=$O(^FHPT("ADRU",X1,FHDFN,ADM)) G:ADM="" Q3 S DR=""
"RTN","FHORC1",16,0)
Q5 S DR=$O(^FHPT("ADRU",X1,FHDFN,ADM,DR)) G:DR="" Q4
"RTN","FHORC1",17,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORC1",18,0)
 S Y=^FHPT(FHDFN,"A",ADM,"DR",DR,0)
"RTN","FHORC1",19,0)
 S REQ=$P(Y,"^",2),DTE=$P(Y,"^",1),DIET=$P(Y,"^",5)
"RTN","FHORC1",20,0)
 I '$D(^DGPM(ADM,0)) K ^FHPT("ADRU",X1,FHDFN) S $P(^FHPT(FHDFN,"A",ADM,"DR",DR,0),"^",8)="X" G Q5
"RTN","FHORC1",21,0)
 S Y=^DPT(DFN,0),PNAM=$P(Y,"^",1),FHWRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) D PID^FHDPA
"RTN","FHORC1",22,0)
 I FHDZ S WARD=$S(FHWRD:$P($G(^FH(119.6,FHWRD,0)),"^",1),1:"Discharged") I $P($G(^DGPM(ADM,0)),"^",17) S WARD="Discharged"
"RTN","FHORC1",23,0)
 I 'FHDZ S WARD=$P(^VA(200,DIET,0),"^",1)
"RTN","FHORC1",24,0)
 S REQ=$P($G(^FH(119.5,REQ,0)),"^",2)
"RTN","FHORC1",25,0)
 S DTP=DTE D DTP^FH
"RTN","FHORC1",26,0)
 W !,DTP,?19,REQ,?31,BID,?40,$E(PNAM,1,20),?62,$E(WARD,1,17) G Q5
"RTN","FHORC1",27,0)
Q10 I IOST?1"C-".E R !!,"Press RETURN to Continue ",X:DTIME Q:'$T!(X["^")
"RTN","FHORC1",28,0)
 W ! Q
"RTN","FHORC1",29,0)
KIL G KILL^XUSCLEAN
"RTN","FHORC2")
0^182^B15250167
"RTN","FHORC2",1,0)
FHORC2 ; HISC/REL/NCA - Clear/Query a Consult ;9/4/96  09:32 ;
"RTN","FHORC2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORC2",3,0)
EN1 ; Clear/Cancel/Reassign a Consult
"RTN","FHORC2",4,0)
Q1 K DIC S DIC="^VA(200,",DIC(0)="AQEM",DIC("A")="Select CLINICIAN: " W ! D ^DIC G KIL:"^"[X!$D(DTOUT),Q1:Y<1 S FHX1=+Y
"RTN","FHORC2",5,0)
Q2 S (N1,FHDFN)=0
"RTN","FHORC2",6,0)
Q3 S FHDFN=$O(^FHPT("ADRU",FHX1,FHDFN)),ADM=0 I FHDFN="" W:'N1 !!,"No Consults to Clear" G Q1
"RTN","FHORC2",7,0)
Q4 S ADM=$O(^FHPT("ADRU",FHX1,FHDFN,ADM)) G:ADM="" Q3 S FHDR=0
"RTN","FHORC2",8,0)
Q5 S FHDR=$O(^FHPT("ADRU",FHX1,FHDFN,ADM,FHDR)) G:FHDR="" Q4
"RTN","FHORC2",9,0)
 S ALL=0 D DISP G:DTP="^" Q5 S N1=N1+1
"RTN","FHORC2",10,0)
Q6 R !!,"Disposition (C=Complete, X=Cancelled, R=Reassign, RETURN to bypass): ",TYP:DTIME G KIL:'$T!(TYP=U),Q5:TYP="" S X=TYP D TR^FH S TYP=X I TYP'?1U!("XCR"'[TYP) W *7,!,"Enter C, X or R or Press RETURN to bypass" G Q6
"RTN","FHORC2",11,0)
 S S1="" G Q9:TYP="X",Q10:TYP="R" S S1="I" G:$P(^FH(119.5,CON,0),"^",3)'="Y" Q9
"RTN","FHORC2",12,0)
Q7 R !,"Initial or Follow-up (I/F)? ",S1:DTIME G KIL:'$T!(S1["^") S X=S1 D TR^FH S S1=X I S1'="I",S1'="F" W *7,"  Enter I or F" G Q7
"RTN","FHORC2",13,0)
Q9 K ^FHPT("ADRU",FHX1,FHDFN,ADM,FHDR)
"RTN","FHORC2",14,0)
 D NOW^%DTC S $P(^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),"^",8,11)=TYP_"^"_%_"^"_DUZ_"^"_S1 W "  ... done"
"RTN","FHORC2",15,0)
 D EN31^FHASE G Q5
"RTN","FHORC2",16,0)
Q10 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="REASSIGN to Clinician: " W ! D ^DIC G KIL:U[X!$D(DTOUT),Q10:Y<1 S XMKK=+Y K DIC
"RTN","FHORC2",17,0)
 K ^FHPT("ADRU",FHX1,FHDFN,ADM,FHDR) S ^FHPT("ADRU",XMKK,FHDFN,ADM,FHDR)=""
"RTN","FHORC2",18,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),"^",5)=XMKK
"RTN","FHORC2",19,0)
 S REQ=CON D POST^FHORC
"RTN","FHORC2",20,0)
 W "  ... done" G Q5
"RTN","FHORC2",21,0)
EN2 ; Consult Inquiry
"RTN","FHORC2",22,0)
 S ALL=1 D ^FHDPA G:'DFN KIL G:'FHDFN KIL
"RTN","FHORC2",23,0)
 S ADM=$O(^FHPT(FHDFN,"A",0)) I ADM<1 W !,"No Admissions on File" G EN2
"RTN","FHORC2",24,0)
 I $P(^FHPT(FHDFN,"A",0),"^",4)=1 G E2
"RTN","FHORC2",25,0)
E1 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="Q",X="??" D ^DIC S DIC(0)="AQM" W ! D ^DIC K DIC G KIL:U[X!$D(DTOUT),E1:Y<1 S ADM=+Y
"RTN","FHORC2",26,0)
E2 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"DR",0)) I FHDR<1 W !,"No Consultations for this admission" G EN2
"RTN","FHORC2",27,0)
 I $P(^FHPT(FHDFN,"A",ADM,"DR",0),"^",4)=1 G E4
"RTN","FHORC2",28,0)
E3 S DIC="^FHPT(FHDFN,""A"",ADM,""DR"",",DIC(0)="Q",X="??" D ^DIC S DIC(0)="AQM" W ! D ^DIC K DIC G KIL:U[X!$D(DTOUT),E2:Y<1 S FHDR=+Y
"RTN","FHORC2",29,0)
E4 S ALL=1 D DISP G EN2
"RTN","FHORC2",30,0)
DISP S Y=^FHPT(FHDFN,"A",ADM,"DR",FHDR,0)
"RTN","FHORC2",31,0)
 I '$D(^DGPM(ADM,0)) S XMKK=$P(Y,"^",5) K:XMKK ^FHPT("ADRU",XMKK,FHDFN) S $P(^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),"^",8)="X",DTP=U Q
"RTN","FHORC2",32,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORC2",33,0)
 S PNAM=$P(^DPT(DFN,0),"^",1),FHWRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8),WARD=$S(FHWRD:$P($G(^FH(119.6,FHWRD,0)),"^",1),1:"Discharged") I $P($G(^DGPM(ADM,0)),"^",17) S WARD="Discharged"
"RTN","FHORC2",34,0)
 S DTP=+^DGPM(ADM,0) D DTP^FH W !!,$E(PNAM,1,25),?27,"Admitted: ",DTP,?57,"Ward: ",$E(WARD,1,16)
"RTN","FHORC2",35,0)
D1 ; Display consult
"RTN","FHORC2",36,0)
 S CON=$P(Y,"^",2),DTP=$P(Y,"^",1),DIET=$P(Y,"^",5),COM=$P(Y,"^",3),STAT=$P(Y,"^",8)
"RTN","FHORC2",37,0)
 W !!,"Consult: ",$P($G(^FH(119.5,CON,0)),"^",1)
"RTN","FHORC2",38,0)
 W:COM'="" !,"Comment: ",COM
"RTN","FHORC2",39,0)
 W !,"Status: ",$S(STAT="A":"ACTIVE",STAT="C":"COMPLETE",1:"CANCELLED")
"RTN","FHORC2",40,0)
 D DTP^FH W !,"Ordered: ",DTP,?40,"Clinician: ",$P($G(^VA(200,DIET,0)),"^",1)
"RTN","FHORC2",41,0)
 Q:'ALL  S D1=$P(Y,"^",7),D2=$P(Y,"^",10),DTP=$P(Y,"^",9),S1=$P(Y,"^",11)
"RTN","FHORC2",42,0)
 W !!,"Order Entered: ",$P($G(^VA(200,D1,0)),"^",1)
"RTN","FHORC2",43,0)
 Q:'D2  D DTP^FH W !,"Order Cleared: ",$P($G(^VA(200,D2,0)),"^",1)
"RTN","FHORC2",44,0)
 W !,"Date Cleared:  ",DTP W:S1'="" ?40,"Consult Type: ",$S(S1'="F":"INITIAL",1:"FOLLOW-UP") Q
"RTN","FHORC2",45,0)
KIL K %,%H,%I,ADM,ALL,ASE,COM,CON,D1,D2,DA,FHDFN,DFN,DIC,DIET,DTP,FHAP,FHWRD,FHWF,FHPV,FHX1,FHX2,FHX3,FHX4,LP,N1,PNAM,FHDR,STAT,S1,ST,TYP,REQ,WARD,X,X1,X9,Y,XMKK Q
"RTN","FHORC3")
0^183^B12069151
"RTN","FHORC3",1,0)
FHORC3 ; HISC/REL - Consult Statistics ;5/17/93  14:54 
"RTN","FHORC3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORC3",3,0)
 D DT G:U[X KIL
"RTN","FHORC3",4,0)
F0 R !!,"Break-down by Clinician? Y// ",X:DTIME G:'$T!(X=U) KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G F0
"RTN","FHORC3",5,0)
 S FHX1=X?1"Y".E,FHX2=0
"RTN","FHORC3",6,0)
F1 I FHX1 R !!,"List Individual Patient Consults? N// ",X:DTIME G:'$T!(X=U) KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G F1
"RTN","FHORC3",7,0)
 S:FHX1 FHX2=X?1"Y".E
"RTN","FHORC3",8,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORC3",9,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORC3",FHLST="EDT^SDT^FHX1^FHX2" D EN2^FH G KIL
"RTN","FHORC3",10,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORC3",11,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHORC3",12,0)
Q1 ; Print Consult Statistics
"RTN","FHORC3",13,0)
 K D,^TMP($J) S X1=SDT\1-.0001,X2=EDT\1+.3
"RTN","FHORC3",14,0)
R1 S X1=$O(^FHPT("ADR",X1)) I X1<1!(X1>X2) G P1
"RTN","FHORC3",15,0)
 S FHDFN=0
"RTN","FHORC3",16,0)
R2 S FHDFN=$O(^FHPT("ADR",X1,FHDFN)) G:FHDFN="" R1 S ADM=0
"RTN","FHORC3",17,0)
R3 S ADM=$O(^FHPT("ADR",X1,FHDFN,ADM)) G:ADM="" R2 S DR=0
"RTN","FHORC3",18,0)
R4 S DR=$O(^FHPT("ADR",X1,FHDFN,ADM,DR)) G:DR="" R3
"RTN","FHORC3",19,0)
 S Y=^FHPT(FHDFN,"A",ADM,"DR",DR,0)
"RTN","FHORC3",20,0)
 S ST=$P(Y,"^",8) I ST'="C" G R4
"RTN","FHORC3",21,0)
 S D1=$P(Y,"^",5),D2=$P(Y,"^",2) G:'D2 R4
"RTN","FHORC3",22,0)
 S S1=$P(Y,"^",11) S:S1="F" D2=D2_"F"
"RTN","FHORC3",23,0)
 S:'$D(D(D2)) D(D2)=0 S D(D2)=D(D2)+1
"RTN","FHORC3",24,0)
 G R4:'FHX1,R4:'D1 I '$D(^TMP($J,D1)) S NAM=$P(^VA(200,D1,0),"^",1),^TMP($J,$E(NAM,1,30),D1)=""
"RTN","FHORC3",25,0)
 I '$D(^TMP($J,D1,D2)) S ^TMP($J,D1,D2)=0
"RTN","FHORC3",26,0)
 S ^TMP($J,D1,D2)=^TMP($J,D1,D2)+1 G:'FHX2 R4
"RTN","FHORC3",27,0)
 S (DTP,W1)=$P(Y,"^",1)\1 D DTP^FH I '$D(^TMP($J,D1,D2,W1)) S ^TMP($J,D1,D2,W1)=DTP,^(W1,0)=0
"RTN","FHORC3",28,0)
 S L=^TMP($J,D1,D2,W1,0)+1,^(0)=L
"RTN","FHORC3",29,0)
 S ^TMP($J,D1,D2,W1,L)=FHDFN G R4
"RTN","FHORC3",30,0)
P1 S DTP=SDT\1 D DTP^FH S DTE=DTP_" to " S DTP=EDT\1 D DTP^FH S DTE=DTE_DTP,PG=0 D HEAD W !?59,"Number        Units",!
"RTN","FHORC3",31,0)
 S NX="",(I1,I2)=0 F K=0:0 S NX=$O(D(NX)) Q:NX=""  S X=^FH(119.5,+NX,0),W1=$P(X,"^",$S(NX'["F":4,1:5)) W !,$P(X,"^",1) W:NX["F" " (FU)" W ?60,$J(D(NX),5,0),$J(D(NX)*W1,13,2) S I1=I1+D(NX),I2=D(NX)*W1+I2
"RTN","FHORC3",32,0)
 W !!,"T O T A L",?60,$J(I1,5,0),$J(I2,13,2),! Q:'FHX1  D HEAD
"RTN","FHORC3",33,0)
 S NX=":" F K=0:0 S NX=$O(^TMP($J,NX)) Q:NX=""  F D1=0:0 S D1=$O(^TMP($J,NX,D1)) Q:D1<1  D P2
"RTN","FHORC3",34,0)
 W ! Q
"RTN","FHORC3",35,0)
P2 D:$Y>55 HEAD W !!,NX S (I1,I2)=0
"RTN","FHORC3",36,0)
 S D2="" F L=0:0 S D2=$O(^TMP($J,D1,D2)) Q:D2=""  S D(0)=^(D2) D P3
"RTN","FHORC3",37,0)
 W !?3,"TOTAL CONSULTS",?63,$J(I1,5,0),$J(I2,10,2) Q
"RTN","FHORC3",38,0)
P3 S X=^FH(119.5,+D2,0),W1=$P(X,"^",$S(D2'["F":4,1:5)) D:$Y>58 HEAD W !?3,$P(X,"^",1) W:D2["F" " (FU)" W ?63,$J(D(0),5,0),$J(D(0)*W1,10,2) S I1=I1+D(0),I2=D(0)*W1+I2
"RTN","FHORC3",39,0)
 Q:'FHX2  S DTP=""
"RTN","FHORC3",40,0)
P4 S DTP=$O(^TMP($J,D1,D2,DTP)) Q:DTP=""  S D(0)=^(DTP),W1=0
"RTN","FHORC3",41,0)
P5 S W1=$O(^TMP($J,D1,D2,DTP,W1)) G:W1="" P4 S FHDFN=^(W1)
"RTN","FHORC3",42,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORC3",43,0)
 S Y=$G(^DPT(DFN,0)) G:Y="" P5 D PID^FHDPA
"RTN","FHORC3",44,0)
 W !?6,D(0),?17,BID,?27,$P(Y,"^",1) G P5
"RTN","FHORC3",45,0)
DT ; Get From/To Dates
"RTN","FHORC3",46,0)
D1 S %DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D1 S SDT=+Y
"RTN","FHORC3",47,0)
D2 S %DT="AEPX",%DT("A")=" Ending Date: " D ^%DT S:$D(DTOUT) X="^" Q:U[X  G:Y<1 D2 S EDT=+Y
"RTN","FHORC3",48,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHORC3",49,0)
 Q
"RTN","FHORC3",50,0)
HEAD W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?17,"D I E T E T I C   C O N S U L T   U N I T S",?71,"Page ",PG
"RTN","FHORC3",51,0)
 W !!?(78-$L(DTE)\2),DTE,! Q
"RTN","FHORC4")
0^184^B3689342
"RTN","FHORC4",1,0)
FHORC4 ; HISC/REL - Re-Assign Active Consults ;5/18/93  15:42 
"RTN","FHORC4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORC4",3,0)
 W !!,"This will re-assign all ACTIVE consults from one Clinician to another",!!
"RTN","FHORC4",4,0)
E1 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="Select CURRENT Clinician: " W ! D ^DIC G KIL:U[X!$D(DTOUT),E1:Y<1 S OLD=+Y
"RTN","FHORC4",5,0)
E2 S DIC("A")="Select NEW Clinician: " W ! D ^DIC G KIL:U[X!$D(DTOUT),E2:Y<1 S NEW=+Y,N1=0,FHDFN=0
"RTN","FHORC4",6,0)
 S WRD="" I OLD=NEW W !!,"No change in Clinician!" G KIL
"RTN","FHORC4",7,0)
E3 S FHDFN=$O(^FHPT("ADRU",OLD,FHDFN)) G:FHDFN<1 E6 S ADM=0
"RTN","FHORC4",8,0)
E4 S ADM=$O(^FHPT("ADRU",OLD,FHDFN,ADM)) G:ADM<1 E3 S REQ=0
"RTN","FHORC4",9,0)
E5 S REQ=$O(^FHPT("ADRU",OLD,FHDFN,ADM,REQ)) G:REQ<1 E4
"RTN","FHORC4",10,0)
 I WRD,'$D(^FHPT("AW",WRD,FHDFN)) G E5
"RTN","FHORC4",11,0)
 S N1=N1+1 K ^FHPT("ADRU",OLD,FHDFN,ADM,REQ)
"RTN","FHORC4",12,0)
 S ^FHPT("ADRU",NEW,FHDFN,ADM,REQ)="",$P(^FHPT(FHDFN,"A",ADM,"DR",REQ,0),"^",5)=NEW G E5
"RTN","FHORC4",13,0)
E6 W !!,N1," Consults were transferred"
"RTN","FHORC4",14,0)
KIL K ADM,FHDFN,DFN,DIC,N1,NEW,OLD,REQ,WRD,X,Y Q
"RTN","FHORC4",15,0)
EN2 ; Entry point from Edit Ward Assignment
"RTN","FHORC4",16,0)
 W !!,"Since you have changed a ward assignment, do you wish to"
"RTN","FHORC4",17,0)
 W !,"re-assign all active consults from ",$P(^VA(200,OLD,0),"^",1)
"RTN","FHORC4",18,0)
 W !,"to ",$P(^VA(200,NEW,0),"^",1)," ? N// "
"RTN","FHORC4",19,0)
N2 R X:DTIME Q:'$T!(X["^")  S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G EN2
"RTN","FHORC4",20,0)
 Q:X'?1"Y".E  S (N1,FHDFN,DFN)=0,WRD=+DA D E3 Q
"RTN","FHORC5")
0^185^B2667793
"RTN","FHORC5",1,0)
FHORC5 ; HISC/REL - Consult Management ;3/9/95  15:52
"RTN","FHORC5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORC5",3,0)
EN9 ; Enter/Edit Ward Assignments
"RTN","FHORC5",4,0)
 K DIC S (DIC,DIE)="^FH(119.6,",DIC(0)="AEQM"
"RTN","FHORC5",5,0)
 W ! D ^DIC G KIL:U[X!$D(DTOUT),EN9:Y<1 S OLD=$S($P(Y,"^",3):"",1:$P(^FH(119.6,+Y,0),"^",2))
"RTN","FHORC5",6,0)
 S DA=+Y,DR="1" D ^DIE S NEW=$P(^FH(119.6,DA,0),"^",2) I 'NEW!('OLD) K OLD,NEW,X,Y G EN9
"RTN","FHORC5",7,0)
 D:OLD'=NEW EN2^FHORC4 K OLD,NEW,X,Y G EN9
"RTN","FHORC5",8,0)
EN10 ; List Ward Assignments
"RTN","FHORC5",9,0)
 W ! S L=0,DIC="^FH(119.6,",FLDS="[FHORWRD]",BY=".01"
"RTN","FHORC5",10,0)
 S (FR,TO)="",DHD="WARD ASSIGNMENTS" D EN1^DIP,RSET Q
"RTN","FHORC5",11,0)
EN11 ; Enter/Edit Consult Types
"RTN","FHORC5",12,0)
 S (DIC,DIE)="^FH(119.5,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=119.5
"RTN","FHORC5",13,0)
 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN11:Y<1
"RTN","FHORC5",14,0)
 S DA=+Y,DR=".01:2;S FHA1=X;3;S Y=$S(FHA1=""Y"":4,1:5);4;5:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.5 D ^DIE K DA,DIE,DIDEL,DR,FHA1 G EN11
"RTN","FHORC5",15,0)
EN12 ; List Consult Types
"RTN","FHORC5",16,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHORC5",17,0)
 W ! S L=0,DIC="^FH(119.5,",FLDS="[FHORCON]",BY=".01"
"RTN","FHORC5",18,0)
 S (FR,TO)="",DHD="CONSULTATION TYPES" D EN1^DIP,RSET Q
"RTN","FHORC5",19,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHORC5",20,0)
KIL K %,%ZIS,IOP,BY,DA,DHD,DIC,DIE,DR,FLDS,FR,L,NEW,OLD,TO,X,Y Q
"RTN","FHORD")
0^186^B3881051
"RTN","FHORD",1,0)
FHORD ; HISC/REL/NCA - Diet Order Entry ;8/9/96  12:29 ;
"RTN","FHORD",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD",3,0)
EN1 ; Edit Diets
"RTN","FHORD",4,0)
 S CHK=0,TYP="D",EVENT="UPD",REC=1,(NOD1,NOD2)="" K ^TMP($J,"FHNOD3")
"RTN","FHORD",5,0)
 S (DIC,DIE)="^FH(111,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=111 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
"RTN","FHORD",6,0)
 S IEN=Y,NOD1=$P($G(^FH(111,+IEN,0)),"^",1,4),NOD2=$G(^FH(111,+IEN,"I"))
"RTN","FHORD",7,0)
 F IEN1=0:0 S IEN1=$O(^FH(111,+IEN,"AN",IEN1)) Q:IEN1<1  S:'$D(^TMP($J,"FHNOD3",IEN1)) ^TMP($J,"FHNOD3",IEN1)=$G(^FH(111,+IEN,"AN",IEN1,0))
"RTN","FHORD",8,0)
 S DA=+Y,DR=$S(DA'=1:".01:99",1:"1;2;5;6;10"),DIE("NO^")="" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=111 D ^DIE K DIC,DIE,DIDEL I $D(^ORD(101.43)) D UPDATE^FHWOR6
"RTN","FHORD",9,0)
 G EN1
"RTN","FHORD",10,0)
EN2 ; List Diets
"RTN","FHORD",11,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHORD",12,0)
 W ! S L=0,DIC="^FH(111,",FLDS="[FHDIETL]",BY="NAME"
"RTN","FHORD",13,0)
 S FR="",TO="",DHD="DIETS LIST" D EN1^DIP,RSET Q
"RTN","FHORD",14,0)
KIL K ^TMP($J),%,ADM,ALL,C,CHK,D,DA,DIC,DIE,DR,FHDFN,DFN,EVENT,FHDR,FHK,I,IEN,IEN1,FHX1,FHX2,FHWF,FHPV,COM,NOD1,NOD2,NOD3,NOW,POP,REC,STR,STR1,TYP,WARD,X Q
"RTN","FHORD",15,0)
RSET K %ZIS S IOP="" D ^%ZIS K %ZIS,IOP,BY,DA,FHDFN,DFN,DHD,DIC,DIE,DR,FLDS,FR,L,TO,X,Y Q
"RTN","FHORD1")
0^187^B21152206
"RTN","FHORD1",1,0)
FHORD1 ; HISC/REL/NCA - Diet Order ;3/28/01  10:28
"RTN","FHORD1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD1",3,0)
F0 S ALL=1 D ^FHDPA G:'DFN KIL G:'FHDFN KIL
"RTN","FHORD1",4,0)
 I $G(ADM)="" W *7,!!," NOT CURRENTLY AN INPATIENT" D KIL Q
"RTN","FHORD1",5,0)
 D D0 G:'DFN KIL G:'FHDFN KIL D PROC
"RTN","FHORD1",6,0)
 S DTE="" D ^FHORD1A I FHWF,DTE S (SDT,EDT)=DTE,WKD="",SERV="L" D EL^FHWOR3 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORD1",7,0)
 S TF=$P(^FHPT(FHDFN,"A",ADM,0),"^",4) I TF W !!,"An ACTIVE Tubefeeding Order Exists!" S FHD="Y" D DIS^FHORT2,ASK^FHORT2 D:FHD="Y" CAN^FHORT2
"RTN","FHORD1",8,0)
 G F0
"RTN","FHORD1",9,0)
D0 ; Process Diet Order
"RTN","FHORD1",10,0)
 D CUR^FHORD7 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHORD1",11,0)
 I FHORD S COM=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) I COM'="" W !,"Comment: ",COM
"RTN","FHORD1",12,0)
 D NOW^%DTC S NOW=% K %,%H,%I D FUT
"RTN","FHORD1",13,0)
C0 I CT W *7 R !!,"A new order with no expiration date will CANCEL these diets.",!!,"Do you wish to CONTINUE? (Y/N): ",X:DTIME G:'$T!(X="^") AB S:X="" X="^" D TR^FH G:$P("NO",X,1)="" AB I $P("YES",X,1)'="" W *7,"  Answer YES or NO" G C0
"RTN","FHORD1",14,0)
F7 S WRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8),SVC="" I WRD>0 S SVC=$P($G(^FH(119.6,WRD,0)),"^",10)
"RTN","FHORD1",15,0)
 S:SVC="" SVC="T" I $L(SVC)=1 S TYP=SVC G F8
"RTN","FHORD1",16,0)
 S N1=$P(^FHPT(FHDFN,"A",ADM,0),"^",5) S:SVC'[N1 N1=""
"RTN","FHORD1",17,0)
 S X="Tray^Cafeteria^Dining Room" W !!,$P(X,"^",$F("TCD",$E(SVC,1))-1),$S($L(SVC)=2:" or ",1:", "),$P(X,"^",$F("TCD",$E(SVC,2))-1)
"RTN","FHORD1",18,0)
 W:$L(SVC)=3 " or ",$P(X,"^",$F("TCD",$E(SVC,3))-1) W ": ",$S(N1="":$E(SVC,1),1:N1),"// "
"RTN","FHORD1",19,0)
 R X:DTIME G:'$T!(X="^") AB S:X="" X=$S(N1="":$E(SVC,1),1:N1) S X=$E(X,1) D TR^FH
"RTN","FHORD1",20,0)
 I SVC'[X W *7,!,"Enter one of the given type of services." G F7
"RTN","FHORD1",21,0)
 S TYP=X
"RTN","FHORD1",22,0)
 I 'FHORD!(N1="")!(N1=TYP) G F8
"RTN","FHORD1",23,0)
 S N1=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0) I "^^^^"[$P(N1,"^",2,6) G F8
"RTN","FHORD1",24,0)
R1 R !!,"Retain Current Diet? N// ",Y:DTIME G:'$T!(Y="^") AB S:Y="" Y="N" S X=Y D TR^FH S Y=X I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,"  Answer YES or NO" G R1
"RTN","FHORD1",25,0)
 G:Y?1"N".E F8 S FHOR=$P(N1,"^",2,6),(D3,D4)=0,D2=$P(N1,"^",10)
"RTN","FHORD1",26,0)
 S D1=NOW G F10
"RTN","FHORD1",27,0)
F8 K DI S N1=0 G:FHWF=2 F1 R !!,"Order a REGULAR Diet? (Y/N) ",Y:DTIME G:'$T!(Y="^") AB S:Y="" Y="^" S X=Y D TR^FH S Y=X I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,"  Answer YES or NO" G F8
"RTN","FHORD1",28,0)
 G:Y'?1"Y".E F1 S Y(0)=^FH(111,1,0),PREC=$P(Y(0),U,4),DI(PREC)="1^"_Y(0),N1=1 G F5
"RTN","FHORD1",29,0)
F1 W ! K DIC S DIC="^FH(111,",DIC(0)="AEQMZ" S DIC("S")="I '$D(^(""I""))&(Y>1)" D ^DIC K DIC G AB:X[U!$D(DTOUT),F5:X="",F1:Y<1
"RTN","FHORD1",30,0)
 S PREC=$P(Y(0),U,4) I PREC,$D(DI(PREC)) W *7,!!,"This conflicts with ",$P(DI(PREC),"^",2),! G F1
"RTN","FHORD1",31,0)
 S N1=N1+1,DI(PREC)=+Y_"^"_Y(0) G F5:+Y=1,F1:N1<5 W *7,!!,"You have now selected the maximum of 5 Diet Modifications!"
"RTN","FHORD1",32,0)
F5 G:'N1 AB W !!,"You have selected the following Diet:",!
"RTN","FHORD1",33,0)
 S (D3,D4)=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  W !?5,$P(DI(D0),U,2) S:$P(DI(D0),U,4)="Y" D3=1 S:$P(DI(D0),U,7)="Y" D4=1
"RTN","FHORD1",34,0)
F9 G:FHWF=2 F6 R !!,"Is this Correct? Y// ",Y:DTIME G:'$T!(Y="^") AB S:Y="" Y="Y" S X=Y D TR^FH S Y=X
"RTN","FHORD1",35,0)
 I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,!,"  Answer YES to accept diet list; NO to select diets again" G F9
"RTN","FHORD1",36,0)
 I Y'?1"Y".E K DI S N1=0 W !!,"Select new diets ..." G F1
"RTN","FHORD1",37,0)
F6 S COM="" ;R !!,"Comment: ",COM:DTIME G:'$T!(COM["^") AB I COM'?.ANP W *7," ??" G F6
"RTN","FHORD1",38,0)
 I $L(COM)>80!(COM?1"?".E) W *7,!,"Enter any special instructions of up to 80 characters!" G F6
"RTN","FHORD1",39,0)
 D GETD^FHORD71 G:'D1 AB
"RTN","FHORD1",40,0)
 S FHOR="^^^^",FHEVTX="",N1=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  S N1=N1+1,$P(FHOR,U,N1)=+DI(D0),FHEVTX=FHEVTX_", "_$P(DI(D0),U,8)
"RTN","FHORD1",41,0)
 ; [SEE NOIS SDC-0402-62498] S FHDPATT=$O(^FH(111.1,"AB",FHOR,0)) I FHDPATT'="" I $G(^FH(111.1,FHDPATT,"I"))="Y" W !!,"  ** INACTIVE DIET PATTERN! **" G AB
"RTN","FHORD1",42,0)
 I '$O(^FH(111.1,"AB",FHOR,0)),$P($G(^FH(119.9,1,4)),"^",2)="Y" S EVT="M^O^^No Diet Pattern ("_$E(FHEVTX,3,999)_")" D ^FHORX
"RTN","FHORD1",43,0)
F10 S FHLD="" W:FHWF'=2 !!,"... Diet Order Accepted"
"RTN","FHORD1",44,0)
 Q
"RTN","FHORD1",45,0)
PROC ; Process & file order
"RTN","FHORD1",46,0)
 D STR^FHORD7,^FHORDR D:D4 POST^FHORD7 Q
"RTN","FHORD1",47,0)
AB W *7,!!,"Diet Order for this Patient is UNCHANGED -- No order entered!",! S (DFN,FHDFN)="" Q
"RTN","FHORD1",48,0)
KIL ; Final variable kill
"RTN","FHORD1",49,0)
 K %,%H,%I,%T,%DT,A1,A2,ADM,ALL,C,COM,CORD,CT,D0,D1,D2,D3,D4,DA,FHDFN,DFN,DTP,DI,DIC,FHDU,FHD,FHLD,FHOR,FHPAR,FHWF,FHPV,FLG,I,J,K,KK,N1,NOW,FHORD,FHSAV,FHSAV1,FHDAY
"RTN","FHORD1",50,0)
 K FHK,FHK1,FHOE,FHOLD,FHMSG,FHNEW,K1,K2,KK1,LC,M,PREC,SVC,TYP,X,X1,X2,Y,WRD,WARD,TF,QUA,STR,TUN,XMKK,Z Q
"RTN","FHORD1",51,0)
FUT ; List future diets
"RTN","FHORD1",52,0)
 S CT=0,CORD=FHORD F KK=NOW:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1  S FHORD=$P(^(KK,0),"^",2) D T1
"RTN","FHORD1",53,0)
 S FHORD=CORD Q
"RTN","FHORD1",54,0)
T1 Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))  S DTP=KK D DTP^FH,C2^FHORD7
"RTN","FHORD1",55,0)
 I 'CT W !!,"Future Diet Orders:",!
"RTN","FHORD1",56,0)
 S CT=CT+1 W !?5,DTP,?25,Y Q
"RTN","FHORD10")
0^188^B9628638
"RTN","FHORD10",1,0)
FHORD10 ; HISC/REL/NCA - Diet Activity Report ;5/17/93  09:57 
"RTN","FHORD10",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD10",3,0)
 S FHP=$O(^FH(119.73,0)) I FHP'<1,$O(^FH(119.73,FHP))<1 G R1
"RTN","FHORD10",4,0)
R0 R !!,"Select COMMUNICATION OFFICE: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHORD10",5,0)
 K DIC S DIC="^FH(119.73,",DIC(0)="EMQ" D ^DIC G:Y<1 R0 S FHP=+Y
"RTN","FHORD10",6,0)
R1 R !!,"Do you want labels? N// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Enter YES or NO" G R1
"RTN","FHORD10",7,0)
 S LAB=X?1"Y".E,TIM=$P($G(^FH(119.73,FHP,0)),"^",2) I 'TIM D NOW^%DTC S TIM=%
"RTN","FHORD10",8,0)
 S DTP=TIM D DTP^FH
"RTN","FHORD10",9,0)
R2 R !!,"Do you wish to update ward/rooms? N // ",X:DTIME G:'$T!(X["^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G R2
"RTN","FHORD10",10,0)
 S UPD=X?1"Y".E
"RTN","FHORD10",11,0)
R3 W !!,"Changes since Date/Time: ",DTP," // " R X:DTIME G:'$T!(X["^") KIL I X'="" S %DT="EXTS" D ^%DT K %DT G:Y<1 R3 S TIM=Y
"RTN","FHORD10",12,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select "_$S(LAB:"LABEL",1:"LIST")_" Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORD10",13,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORD10",FHLST="TIM^LAB^FHP^UPD" D EN2^FH G KIL
"RTN","FHORD10",14,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORD10",15,0)
Q1 ; Print Diet Activity Report
"RTN","FHORD10",16,0)
 K ^TMP($J) D NOW^%DTC S NOW=%,DTP=TIM,TIM=TIM-.0001 D DTP^FH S H1=DTP_" - " S DTP=NOW D DTP^FH S H1=H1_DTP D ^FHDEV
"RTN","FHORD10",17,0)
 I LAB S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1
"RTN","FHORD10",18,0)
 F W1=0:0 S W1=$O(^FHPT("AW",W1)) Q:W1'>0  D WRD I FHP=D2 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN=""  S ADM=$G(^FHPT("AW",W1,FHDFN)) D:ADM Q3
"RTN","FHORD10",19,0)
 G ^FHORD11
"RTN","FHORD10",20,0)
WRD S P0=$G(^FH(119.6,W1,0)),WRDN=$P(P0,"^",1),D2=$P(P0,"^",8),P0=$P(P0,"^",4) S:P0<1 P0=99 Q
"RTN","FHORD10",21,0)
Q3 Q:'$D(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHORD10",22,0)
Q4 S X0=^FHPT(FHDFN,"A",ADM,0)
"RTN","FHORD10",23,0)
 S FHORD=$P(X0,"^",2),X1=$P(X0,"^",3) Q:'FHORD
"RTN","FHORD10",24,0)
 S E1="" F NX=TIM:0 S NX=$O(^FHPT(FHDFN,"A",ADM,"AC",NX)) Q:NX<1!(NX>NOW)  S E1=NX
"RTN","FHORD10",25,0)
 S OLW=$P(X0,"^",11),OLR=$P(X0,"^",12) I W1'=OLW S E1=1 I UPD S $P(^FHPT(FHDFN,"A",ADM,0),"^",11)=W1
"RTN","FHORD10",26,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORD10",27,0)
 S R1=$G(^DPT(DFN,.101)) I R1'=OLR S E1=1 I UPD S $P(^FHPT(FHDFN,"A",ADM,0),"^",12)=R1
"RTN","FHORD10",28,0)
 S OLW=$S(OLW=W1:" ",'OLW:"",1:$P($G(^FH(119.6,OLW,0)),"^",1)),OLR=$S(R1=OLR:" ",1:OLR)
"RTN","FHORD10",29,0)
 S:E1 ^TMP($J,D2,$S(P0<10:"0"_P0,1:P0)_$S(R1'="":R1,1:"   "),FHDFN)=WRDN_"^"_R1_"^"_ADM_"^"_FHORD_"^"_$P(X0,"^",7)_"^"_$P(X0,"^",10)_"^"_OLW_"^"_OLR Q
"RTN","FHORD10",30,0)
KIL K %,%H,%I,%DT,A1,ADM,ALG,CADM,COM,D2,D3,DA,FHDFN,DFN,DIC,DTP,E1,FHOR,FHP,H1,IS,K,L1,L2,LAB,N1,NOW,NX,OLW,OLR,FHORD,FHDU,FHIO,FHLD
"RTN","FHORD10",31,0)
 K L,SF,SO,SVC,P0,PG,POP,R1,S1,S2,TC,TIM,UPD,W1,WRDN,X,X0,X1,X2,Y,Y0,^TMP($J) Q
"RTN","FHORD11")
0^189^B16228852
"RTN","FHORD11",1,0)
FHORD11 ; HISC/REL/NCA - Diet Activity Report (cont) ;4/26/93  16:37 
"RTN","FHORD11",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD11",3,0)
 S PG=0,S2=LAB=2*5+36 D HDR:'LAB,LHD:LAB
"RTN","FHORD11",4,0)
 F D2=0:0 S D2=$O(^TMP($J,D2)) Q:D2<1  S P0="" F E1=0:0 S P0=$O(^TMP($J,D2,P0)) Q:P0=""  F FHDFN=0:0 S FHDFN=$O(^TMP($J,D2,P0,FHDFN)) Q:FHDFN<1  S X=$G(^TMP($J,D2,P0,FHDFN)) D LST
"RTN","FHORD11",5,0)
 D DISC I LAB F L=1:1:18 W !
"RTN","FHORD11",6,0)
 W:'LAB ! I UPD S $P(^FH(119.73,FHP,0),"^",2)=NOW
"RTN","FHORD11",7,0)
 Q
"RTN","FHORD11",8,0)
LST D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORD11",9,0)
 S W1=$P(X,"^",1),R1=$P(X,"^",2),ADM=$P(X,"^",3),FHORD=$P(X,"^",4),SF=$P(X,"^",5),IS=$P(X,"^",6),OLW=$P(X,"^",7),OLR=$P(X,"^",8) Q:'$D(^DPT(DFN,0))  S Y0=^(0)
"RTN","FHORD11",10,0)
 S SO=$D(^FHPT("ASP",FHDFN,ADM))
"RTN","FHORD11",11,0)
 S W1=$E(W1,1,15),R1=$E(R1,1,10),N1=$E($P(Y0,"^",1),1,22) D PID^FHDPA
"RTN","FHORD11",12,0)
 S X0=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),COM=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1))
"RTN","FHORD11",13,0)
 S TC=$P(X0,"^",8) I IS S IS=$G(^FH(119.4,IS,0)) I IS'="" S TC=TC_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHORD11",14,0)
 G:LAB L1 D:$Y>54 HDR W !!,W1,?18,R1,?31,N1,?54,BID W:OLW="" " *" W ?63,$S(SF:"SF",1:""),?66,$S(SO:"SO",1:""),?73,TC W:" "'[OLW ?81,$E(OLW,1,15) W:" "'[OLR ?99,$E(OLR,1,10)
"RTN","FHORD11",15,0)
 D:OLW="" NEWP D OLD S X=X0 D CUR W !?18,"Diet: ",Y W:COM'="" !?24,COM Q
"RTN","FHORD11",16,0)
L1 S X=X0 D CUR W !,$E(N1,1,S2-5-$L(W1)),?(S2-3-$L(W1)),W1,!,BID W:OLW="" " *"
"RTN","FHORD11",17,0)
 W @FHIO("EON") W ?(S2-3\2),TC W @FHIO("EOF") W ?(S2-3-$L(R1)),R1 W @FHIO("EON") I $L(Y)<S2 W:LAB=2 ! W !!,Y,!!
"RTN","FHORD11",18,0)
 E  S L=$S($L($P(Y,",",1,3))<S2:3,1:2) W !!,$P(Y,",",1,L) W:LAB=2 ! W !,$E($P(Y,",",L+1,5),2,99),!
"RTN","FHORD11",19,0)
 W @FHIO("EOF") W:LAB=2 ?(S2-20),$P(H1," - ",2),!! Q
"RTN","FHORD11",20,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?35,"D I E T   A C T I V I T Y   R E P O R T",?102,"Page ",PG
"RTN","FHORD11",21,0)
 W !!?(110-$L(H1)\2),H1
"RTN","FHORD11",22,0)
 W !!,"Ward",?18,"Room",?31,"Patient",?55,"ID#",?62,"Sup/Std  Service   Old Ward",?99,"Old Room" Q
"RTN","FHORD11",23,0)
LHD S A1=S2-30\2 W:LAB=2 ! W !?A1,"***************************",!?A1,"*",?(A1+26),"*",!?A1,"*",?(A1+5),$P(H1," - ",2),?(A1+26),"*"
"RTN","FHORD11",24,0)
 W !?A1,"*",?(A1+26),"*",!?A1,"***************************",! W:LAB=2 !! Q
"RTN","FHORD11",25,0)
CUR S Y="" Q:X=""  S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHORD11",26,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHORD11",27,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORD11",28,0)
 Q
"RTN","FHORD11",29,0)
OLD S X2="" F NX=0:0 S NX=$O(^FHPT(FHDFN,"A",ADM,"AC",NX)) Q:NX<1!(NX>TIM)  S X2=$P(^(NX,0),"^",2)
"RTN","FHORD11",30,0)
 Q:X2=FHORD!(X2="")  S X=$G(^FHPT(FHDFN,"A",ADM,"DI",X2,0)) D CUR
"RTN","FHORD11",31,0)
 W !?18,"Old:  ",Y Q
"RTN","FHORD11",32,0)
NEWP D ALG^FHCLN W:ALG'="" !?18,"Allergies: ",ALG
"RTN","FHORD11",33,0)
 S X1="Pref:" F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D N1
"RTN","FHORD11",34,0)
 W:$L(X1)>6 !?18,X1 Q
"RTN","FHORD11",35,0)
N1 S Y=$G(^FH(115.2,+X,0)) Q:$P(Y,"^",2)'="D"
"RTN","FHORD11",36,0)
 S Y=" "_$P(Y,"^",1)_" ("_$P(X,"^",2)_")"_$S($P(X,"^",4)="Y":" (D)",1:"") I $L(X1)+$L(Y)>92 W !?18,X1 S X1="Pref:"
"RTN","FHORD11",37,0)
 S X1=X1_Y Q
"RTN","FHORD11",38,0)
DISC F NX=TIM:0 S NX=$O(^DGPM("ATT3",NX)) Q:NX<1!(NX>NOW)  F DA=0:0 S DA=$O(^DGPM("ATT3",NX,DA)) Q:DA'>0  D D2
"RTN","FHORD11",39,0)
 Q
"RTN","FHORD11",40,0)
D2 S X=$G(^DGPM(DA,0)),DFN=$P(X,"^",3),ADM=$P(X,"^",14) Q:'DFN!('ADM)
"RTN","FHORD11",41,0)
 S W1=$G(^DPT(DFN,.1)),CADM=$S(W1="":"",$D(^DPT("CN",W1,DFN)):^(DFN),1:"") Q:CADM
"RTN","FHORD11",42,0)
 S X=$P(X,"^",18) I X=41!(X=42)!(X=46)!(X=47) Q
"RTN","FHORD11",43,0)
 S X=^DPT(DFN,0),N1=$P(X,"^",1),(R1,W1,SF,SO,D2)="" D PID^FHDPA
"RTN","FHORD11",44,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHORD11",45,0)
 I $D(^FHPT(FHDFN,"A",ADM,0)) S X=^(0),W1=$P(X,"^",11),R1=$P(X,"^",12),SF=$P(X,"^",7)
"RTN","FHORD11",46,0)
 S SO=$D(^FHPT("ASP",FHDFN,ADM))
"RTN","FHORD11",47,0)
 S OLW=W1 D:'W1 D3 I W1 S D2=$P($G(^FH(119.6,W1,0)),"^",8),W1=$P($G(^FH(119.6,W1,0)),"^",1)
"RTN","FHORD11",48,0)
 I FHP,FHP'=D2 Q
"RTN","FHORD11",49,0)
 S W1=$E(W1,1,15),R1=$E(R1,1,10),N1=$E(N1,1,22)
"RTN","FHORD11",50,0)
 I 'LAB D:$Y>54 HDR W !!,"** DISCHARGED **",?31,N1,?54,BID,?63,$S(SF:"SF",1:""),?66,$S(SO:"SO",1:""),?81,W1,?99,R1 Q
"RTN","FHORD11",51,0)
 W !,$E(N1,1,S2-5-$L(W1)),?(S2-3-$L(W1)),W1,!,BID W:OLW="" " *" W ?(S2-3-$L(R1)),R1 W !!?(S2-18\2),"** DISCHARGED **",!! W:LAB=2 !?(S2-20),$P(H1," - ",2),!! Q
"RTN","FHORD11",52,0)
D3 S W1="" F L1=0:0 S L1=$O(^DGPM("APMV",DFN,ADM,L1)) Q:L1=""  F L2=0:0 S L2=$O(^DGPM("APMV",DFN,ADM,L1,L2)) Q:L2=""  S X1=$P($G(^DGPM(L2,0)),"^",6) I X1 S W1=X1 G D4
"RTN","FHORD11",53,0)
D4 S:W1 W1=$O(^FH(119.6,"AW",W1,0)) Q
"RTN","FHORD13")
0^190^B48082272
"RTN","FHORD13",1,0)
FHORD13 ; HISC/REL/NCA/RVD - Reprint Diet Label ;2/26/96  11:57
"RTN","FHORD13",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD13",3,0)
 W @IOF,!!?21,"R E P R I N T   D I E T   L A B E L S"
"RTN","FHORD13",4,0)
F0 R !!,"Reprint by COMMUNICATION OFFICE, PATIENT, LOCATION or ALL? PATIENT// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="P" D TR^FH
"RTN","FHORD13",5,0)
 I $P("COMMUNICATION OFFICE",X,1)'="",$P("PATIENT",X,1)'="",$P("LOCATION",X,1)'="",$P("ALL",X,1)'="" W *7,!!,"  Answer with C, L, P or A" G F0
"RTN","FHORD13",6,0)
 S FHPR=$E(X,1),ALL=0,(FHX1,FHX2)="" G P0:FHPR?1"P",D2:FHPR?1"C",P1:FHPR?1"A"
"RTN","FHORD13",7,0)
W0 K DIC S DIC("A")="Select LOCATION: ",DIC="^FH(119.6,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),W0:Y<1 S FHX1=-Y G P1
"RTN","FHORD13",8,0)
D2 K DIC S DIC("A")="Select COMMUNICATION OFFICE: ",DIC="^FH(119.73,",DIC(0)="AEMQ" W ! D ^DIC G KIL:"^"[X!$D(DTOUT),D2:Y<1 S FHX1=-Y G P1
"RTN","FHORD13",9,0)
P0 S FHALL=1 D ^FHOMDPA I '$G(FHDFN),FHX1'="" G P1
"RTN","FHORD13",10,0)
 Q:'FHDFN
"RTN","FHORD13",11,0)
 S ADM="*"
"RTN","FHORD13",12,0)
 I 'DFN,$G(FHDFN) G PPT
"RTN","FHORD13",13,0)
 I $D(^DPT(DFN,.1)) S WARD=$G(^DPT(DFN,.1)) D
"RTN","FHORD13",14,0)
 .I $G(^DPT("CN",WARD,DFN)) S ADM=$G(^DPT("CN",WARD,DFN))
"RTN","FHORD13",15,0)
PPT S FHX1=$G(FHX1)_FHDFN_"^",FHX2=$G(FHX2)_ADM_"^" I $L(FHX1)<231,$L(FHX2)<231 G P0
"RTN","FHORD13",16,0)
 G:FHX1="" KIL
"RTN","FHORD13",17,0)
P1 ;
"RTN","FHORD13",18,0)
 W ! K DIR,LABSTART S DIR(0)="NA^1:10",DIR("A")="If using laser label sheets, what row do you want to begin printing at? ",DIR("B")=1 D ^DIR
"RTN","FHORD13",19,0)
 Q:$D(DIRUT)  S LABSTART=Y
"RTN","FHORD13",20,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LABEL Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORD13",21,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORD13",FHLST="FHX1^FHX2^FHPR^LABSTART" D EN2^FH G KIL
"RTN","FHORD13",22,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORD13",23,0)
Q1 ; Reprint the Diet Labels
"RTN","FHORD13",24,0)
 S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1 S S2=LAB=2*5+36 D NOW^%DTC S NOW=%
"RTN","FHORD13",25,0)
 S COUNT=0,LINE=1
"RTN","FHORD13",26,0)
 S DTP=NOW D DTP^FH,^FHDEV G:FHX1>0 Q2
"RTN","FHORD13",27,0)
 S WRD=-FHX1 K ^TMP($J)
"RTN","FHORD13",28,0)
 F K1=0:0 S K1=$O(^FH(119.6,K1)) Q:K1<1  S X=^(K1,0) D F1
"RTN","FHORD13",29,0)
 S RM="" F  S RM=$O(^TMP($J,"DL",RM)) Q:RM=""  F DFN=0:0 S DFN=$O(^TMP($J,"DL",RM,DFN)) Q:DFN<1  S ADM=^(DFN) S FHZ115="P"_DFN D CHECK^FHOMDPA Q:FHDFN=""  D:ADM LST
"RTN","FHORD13",30,0)
 K ^TMP($J)
"RTN","FHORD13",31,0)
 ;process outpat after all communication or location is done.
"RTN","FHORD13",32,0)
 D OUTP
"RTN","FHORD13",33,0)
 D PROUT    ;print outpt labels
"RTN","FHORD13",34,0)
 ;I LAB>2 D DPLL^FHLABEL K ^TMP($J) Q
"RTN","FHORD13",35,0)
 ;G Q3
"RTN","FHORD13",36,0)
 Q
"RTN","FHORD13",37,0)
 ;
"RTN","FHORD13",38,0)
F1 I FHPR="C" S KK=$P(X,"^",8) I WRD,KK'=WRD Q
"RTN","FHORD13",39,0)
 I FHPR="L" S KK=$P(X,"^",1) I WRD,K1'=WRD Q
"RTN","FHORD13",40,0)
 S P0=$P(X,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHORD13",41,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",K1,FHDFN)) Q:FHDFN<1  D
"RTN","FHORD13",42,0)
 .D PATNAME^FHOMUTL Q:DFN=""
"RTN","FHORD13",43,0)
 .S ADM=$G(^FHPT("AW",K1,FHDFN))
"RTN","FHORD13",44,0)
 .S RM=$G(^DPT(DFN,.101))
"RTN","FHORD13",45,0)
 .S:RM="" RM="***"
"RTN","FHORD13",46,0)
 .S RI=$G(^DPT(DFN,.108)) S RE=$S(RI:$O(^FH(119.6,"AR",+RI,K1,0)),1:"")
"RTN","FHORD13",47,0)
 .S R0=$S(RE:$P($G(^FH(119.6,K1,"R",+RE,0)),"^",2),1:"")
"RTN","FHORD13",48,0)
 .S R0=$S(R0<1:99,R0<10:"0"_R0,1:R0)
"RTN","FHORD13",49,0)
 .S ^TMP($J,"DL",P0_"~"_R0_"~"_RM,DFN)=ADM Q
"RTN","FHORD13",50,0)
 Q
"RTN","FHORD13",51,0)
 ;
"RTN","FHORD13",52,0)
Q2 F K7=1:1 S FHDFN=$P(FHX1,"^",K7) Q:FHDFN<1  D PATNAME^FHOMUTL S ADM=$P(FHX2,"^",K7) D:$G(ADM) LST I '$G(ADM) S FHDFNSAV(FHDFN)=FHDFN
"RTN","FHORD13",53,0)
 D OUTP
"RTN","FHORD13",54,0)
 D PROUT
"RTN","FHORD13",55,0)
 Q
"RTN","FHORD13",56,0)
LST ;
"RTN","FHORD13",57,0)
 Q:'$D(^FHPT(FHDFN,"A",ADM,0))  S X0=^(0)
"RTN","FHORD13",58,0)
 S FHORD=$P(X0,"^",2),X1=$P(X0,"^",5) Q:FHORD<1
"RTN","FHORD13",59,0)
 S W1=$P(X0,"^",8),W1=$P($G(^FH(119.6,+W1,0)),"^",1),R1=$G(^DPT(DFN,.101))
"RTN","FHORD13",60,0)
 Q:'$D(^DPT(DFN,0))  S Y0=^(0) D PID^FHDPA
"RTN","FHORD13",61,0)
 S W1=$E(W1,1,15),N1=$E($P(Y0,"^",1),1,22)
"RTN","FHORD13",62,0)
 S X=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHORD13",63,0)
 S (Y,X1)="" G:X="" L1 S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHORD13",64,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") G:%<1 L1 S Y=$P($E(FHDU,%,999),";",1) G L1
"RTN","FHORD13",65,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORD13",66,0)
 S IS=$P(X0,"^",10),X1=$P(X,"^",8) I IS S IS=^FH(119.4,IS,0),X1=X1_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHORD13",67,0)
 ;
"RTN","FHORD13",68,0)
L1 I LAB>2 D LL Q
"RTN","FHORD13",69,0)
 W !,$E(N1,1,S2-5-$L(W1)),?(S2-3-$L(W1)),W1,!,BID W @FHIO("EON") W ?(S2-3\2),X1 W @FHIO("EOF") W ?(S2-3-$L(R1)),R1 W @FHIO("EON") I $L(Y)<S2 W:LAB=2 ! W !!,Y,!!
"RTN","FHORD13",70,0)
 E  S L=$S($L($P(Y,",",1,3))<S2:3,1:2) W !!,$P(Y,",",1,L) W:LAB=2 ! W !,$E($P(Y,",",L+1,5),2,99),!
"RTN","FHORD13",71,0)
 W @FHIO("EOF") W:LAB=2 ?(S2-20),DTP,!! Q
"RTN","FHORD13",72,0)
 ;
"RTN","FHORD13",73,0)
OUTP ;process outpatient dat
"RTN","FHORD13",74,0)
 S (R1,FHW1SAV,FHFHPSAV)=""
"RTN","FHORD13",75,0)
 I FHPR="L" S FHW1SAV=-FHX1
"RTN","FHORD13",76,0)
 I FHPR="C" S FHFHPSAV=-FHX1
"RTN","FHORD13",77,0)
 S FHD1=DT-.00001,FHD2=DT+.99999
"RTN","FHORD13",78,0)
 ;next recurring
"RTN","FHORD13",79,0)
 F FHK1=FHD1:0 S FHK1=$O(^FHPT("RM",FHK1)) Q:(FHK1'>0)!(FHK1>FHD2)  D
"RTN","FHORD13",80,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHK1,FHDFN)) Q:FHDFN'>0  D
"RTN","FHORD13",81,0)
 ..F FHKD=0:0 S FHKD=$O(^FHPT("RM",FHK1,FHDFN,FHKD)) Q:FHKD'>0  D
"RTN","FHORD13",82,0)
 ...S FHKDAT=^FHPT(FHDFN,"OP",FHKD,0)
"RTN","FHORD13",83,0)
 ...S (W1,FHW1)=$P(FHKDAT,U,3)
"RTN","FHORD13",84,0)
 ...S FHDIET=$P(FHKDAT,U,2),FHMEAL=$P(FHKDAT,U,4),FHSTAT=$P(FHKDAT,U,15)
"RTN","FHORD13",85,0)
 ...I FHSTAT="C" Q
"RTN","FHORD13",86,0)
 ...S FHDIET1=$P(FHKDAT,U,7)
"RTN","FHORD13",87,0)
 ...S FHDIET2=$P(FHKDAT,U,8)
"RTN","FHORD13",88,0)
 ...S FHDIET3=$P(FHKDAT,U,9)
"RTN","FHORD13",89,0)
 ...S FHDIET4=$P(FHKDAT,U,10)
"RTN","FHORD13",90,0)
 ...S FHDIET5=$P(FHKDAT,U,11)
"RTN","FHORD13",91,0)
 ...I FHPR="P",'$D(FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",92,0)
 ...I $G(FHW1SAV),(FHW1'=FHW1SAV) Q
"RTN","FHORD13",93,0)
 ...I $D(FHDFNSAV(FHDFN)),(FHDFN'=FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",94,0)
 ...S FHLOC="",FHRGS="OP"
"RTN","FHORD13",95,0)
 ...S:$D(^FH(119.6,FHW1,0)) FHLOC=$P(^FH(119.6,FHW1,0),U,8)
"RTN","FHORD13",96,0)
 ...I $G(FHFHPSAV),$G(FHLOC),(FHFHPSAV'=FHLOC) Q
"RTN","FHORD13",97,0)
 ...S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHORD13",98,0)
 ...D OUTW
"RTN","FHORD13",99,0)
 ;next guest
"RTN","FHORD13",100,0)
 F FHKD=FHD1:0 S FHKD=$O(^FHPT("GM",FHKD)) Q:(FHKD'>0)!(FHKD>FHD2)  D
"RTN","FHORD13",101,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHKD,FHDFN)) Q:FHDFN'>0  D
"RTN","FHORD13",102,0)
 ..I FHPR="P",'$D(FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",103,0)
 ..S FHKDAT=^FHPT(FHDFN,"GM",FHKD,0)
"RTN","FHORD13",104,0)
 ..S (W1,FHW1)=$P(FHKDAT,U,5)
"RTN","FHORD13",105,0)
 ..S FHDIET=$P(FHKDAT,U,6),FHMEAL=$P(FHKDAT,U,3)
"RTN","FHORD13",106,0)
 ..I $G(FHW1SAV),(FHW1'=FHW1SAV) Q
"RTN","FHORD13",107,0)
 ..I $D(FHDFNSAV(FHDFN)),(FHDFN'=FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",108,0)
 ..S FHLOC=""
"RTN","FHORD13",109,0)
 ..S:$D(^FH(119.6,FHW1,0)) FHLOC=$P(^FH(119.6,FHW1,0),U,8)
"RTN","FHORD13",110,0)
 ..I $G(FHFHPSAV),$G(FHLOC),(FHFHPSAV'=FHLOC) Q
"RTN","FHORD13",111,0)
 ..S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHORD13",112,0)
 ..D OUTW
"RTN","FHORD13",113,0)
 ;next SPECIAL
"RTN","FHORD13",114,0)
 F FHKD=FHD1:0 S FHKD=$O(^FHPT("SM",FHKD)) Q:(FHKD'>0)!(FHKD>FHD2)  D
"RTN","FHORD13",115,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("SM",FHKD,FHDFN)) Q:FHDFN'>0  D
"RTN","FHORD13",116,0)
 ..I FHPR="P",'$D(FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",117,0)
 ..S FHKDAT=^FHPT(FHDFN,"SM",FHKD,0)
"RTN","FHORD13",118,0)
 ..S (W1,FHW1)=$P(FHKDAT,U,3)
"RTN","FHORD13",119,0)
 ..S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHORD13",120,0)
 ..S FHDIET=$P(FHKDAT,U,4),FHMEAL=$P(FHKDAT,U,9),FHSTAT=$P(FHKDAT,U,2)
"RTN","FHORD13",121,0)
 ..I (FHSTAT="C")!(FHSTAT="D") Q
"RTN","FHORD13",122,0)
 ..I $G(FHW1SAV),(FHW1'=FHW1SAV) Q
"RTN","FHORD13",123,0)
 ..I $D(FHDFNSAV(FHDFN)),(FHDFN'=FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",124,0)
 ..S FHLOC=""
"RTN","FHORD13",125,0)
 ..S:$D(^FH(119.6,FHW1,0)) FHLOC=$P(^FH(119.6,FHW1,0),U,8)
"RTN","FHORD13",126,0)
 ..I $G(FHFHPSAV),$G(FHLOC),(FHFHPSAV'=FHLOC) Q
"RTN","FHORD13",127,0)
 ..S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHORD13",128,0)
 ..D OUTW
"RTN","FHORD13",129,0)
 Q
"RTN","FHORD13",130,0)
 ;
"RTN","FHORD13",131,0)
OUTW ;set all outpt data for printing
"RTN","FHORD13",132,0)
 D PATNAME^FHOMUTL
"RTN","FHORD13",133,0)
 S FHTC=""
"RTN","FHORD13",134,0)
 Q:'$D(^FH(119.6,FHW1,0))
"RTN","FHORD13",135,0)
 S P0=$P(^FH(119.6,FHW1,0),U,4)
"RTN","FHORD13",136,0)
 S P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHORD13",137,0)
 S FHW1N=$P(^FH(119.6,FHW1,0),U,1)
"RTN","FHORD13",138,0)
 S FHTC5=$P(^FH(119.6,FHW1,0),U,5)
"RTN","FHORD13",139,0)
 S FHTC6=$P(^FH(119.6,FHW1,0),U,6)
"RTN","FHORD13",140,0)
 I $G(FHTC5),$D(^FH(119.72,FHTC5,0)) S FHTC=FHTC_$P(^FH(119.72,FHTC5,0),U,2)
"RTN","FHORD13",141,0)
 I $G(FHTC6),$D(^FH(119.72,FHTC6,0)) S FHTC=FHTC_$P(^FH(119.72,FHTC6,0),U,2)
"RTN","FHORD13",142,0)
 S:$G(FHDIET) FHDIET=$P(^FH(111,FHDIET,0),U,7)
"RTN","FHORD13",143,0)
 I $G(FHDIET1) S FHDIET1=$P(^FH(111,FHDIET1,0),U,7) D
"RTN","FHORD13",144,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET1 Q
"RTN","FHORD13",145,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET1
"RTN","FHORD13",146,0)
 I $G(FHDIET2) S FHDIET2=$P(^FH(111,FHDIET2,0),U,7) D
"RTN","FHORD13",147,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET2 Q
"RTN","FHORD13",148,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET2
"RTN","FHORD13",149,0)
 I $G(FHDIET3) S FHDIET3=$P(^FH(111,FHDIET3,0),U,7) D
"RTN","FHORD13",150,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET3 Q
"RTN","FHORD13",151,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET3
"RTN","FHORD13",152,0)
 I $G(FHDIET4) S FHDIET4=$P(^FH(111,FHDIET4,0),U,7) D
"RTN","FHORD13",153,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET4 Q
"RTN","FHORD13",154,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET4
"RTN","FHORD13",155,0)
 I $G(FHDIET5) S FHDIET5=$P(^FH(111,FHDIET5,0),U,7) D
"RTN","FHORD13",156,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET5 Q
"RTN","FHORD13",157,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET5
"RTN","FHORD13",158,0)
 S ^TMP($J,"DL",P0_"~"_$E(FHW1N,1,20)_"~"_$E(FHPTNM,1,26),FHMEAL)=FHPTNM_"^"_FHW1N_"^"_FHBID_"^"_FHDIET_"^"_FHTC
"RTN","FHORD13",159,0)
 Q
"RTN","FHORD13",160,0)
 ;
"RTN","FHORD13",161,0)
PROUT ;print outptlabels
"RTN","FHORD13",162,0)
 S (X1,RM)=""
"RTN","FHORD13",163,0)
 F  S RM=$O(^TMP($J,"DL",RM)) Q:RM=""  D
"RTN","FHORD13",164,0)
 .S FHMEL=""
"RTN","FHORD13",165,0)
 .F  S FHMEL=$O(^TMP($J,"DL",RM,FHMEL)) Q:FHMEL=""  D
"RTN","FHORD13",166,0)
 ..S FHOU=^TMP($J,"DL",RM,FHMEL)
"RTN","FHORD13",167,0)
 ..S N1=$P(FHOU,U,1)
"RTN","FHORD13",168,0)
 ..S W1=$P(FHOU,U,2)
"RTN","FHORD13",169,0)
 ..S BID=$P(FHOU,U,3)
"RTN","FHORD13",170,0)
 ..S (Y,FHDIET)=$P(FHOU,U,4)
"RTN","FHORD13",171,0)
 ..S X1=$P(FHOU,U,5)
"RTN","FHORD13",172,0)
 ..D L1
"RTN","FHORD13",173,0)
 ;
"RTN","FHORD13",174,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHORD13",175,0)
 Q
"RTN","FHORD13",176,0)
LL D LAB^FHLABEL Q
"RTN","FHORD1A")
0^191^B4650519
"RTN","FHORD1A",1,0)
FHORD1A ; HISC/REL/NCA - Diet Order Window ;7/11/96  12:21 ;
"RTN","FHORD1A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD1A",3,0)
WIN Q:$P(D1,".",1)'=$P(NOW,".",1)  S X1=+$E($P(D1,".",2)_"0000",1,4)
"RTN","FHORD1A",4,0)
 S X2=+$E($P(NOW,".",2)_"0000",1,4),K1=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8)
"RTN","FHORD1A",5,0)
 S DP=$P($G(^FH(119.6,+K1,0)),"^",8)
"RTN","FHORD1A",6,0)
 S X=$G(^FH(119.73,+DP,2))
"RTN","FHORD1A",7,0)
 F K=1:2:5 S A1=$P(X,"^",K),A2=$P(X,"^",K+1) I A1,A2,X1'<A1,X1'>A2,X2'<A1,X2'>A2 G W1
"RTN","FHORD1A",8,0)
 Q
"RTN","FHORD1A",9,0)
W1 S MEAL=$S(K=1:"B",K=3:"N",1:"E"),A1=$P(D1,".",1)
"RTN","FHORD1A",10,0)
 F K=A1:0 S K=$O(^FHPT(FHDFN,"A",ADM,"EL",K)) Q:K<1!(K\1'=A1)  I $P(^(K,0),"^",2)=MEAL G W5
"RTN","FHORD1A",11,0)
 W *7,!!,"You have missed the ",$S(MEAL="B":"BREAKFAST",MEAL="N":"NOON",1:"EVENING")," cut-off."
"RTN","FHORD1A",12,0)
W2 R !!,"Do you wish to order a LATE TRAY? (Y/N): ",YN:DTIME Q:'$T!(YN["^")  S:YN="" YN="^" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G W2
"RTN","FHORD1A",13,0)
 Q:YN?1"N".E
"RTN","FHORD1A",14,0)
 S A1=$G(^FH(119.73,+DP,1)),K=$S(MEAL="B":3,MEAL="N":9,1:15)
"RTN","FHORD1A",15,0)
 K N S %DT="XT",K2=0 F K1=K+1:1:K+3 S X2=$P(A1,"^",K1) I X2'="" S X=$P(D1,".",1)_"@"_X2 D ^%DT I Y'<NOW S K2=K2+1,N(K2)=X2_"^"_Y
"RTN","FHORD1A",16,0)
 I 'K2 W *7,!!,"No Late Tray Delivery Times -- Notify Dietetics" Q
"RTN","FHORD1A",17,0)
 I K2=1 S K1=1 G W4
"RTN","FHORD1A",18,0)
W3 W !,"Select Time ( " F K1=1:1:K2 W K1,"=",$P(N(K1),"^",1)," "
"RTN","FHORD1A",19,0)
 R "): ",K1:DTIME Q:'$T!(K1["^")  I K1<1!(K1>K2)!(K1'?1N) W *7,!,"Enter the number of the desired time" G W3
"RTN","FHORD1A",20,0)
W4 S TIM=$P(N(K1),"^",1),DTE=$P(N(K1),"^",2) N FHORN S FHORN="",NUM=K1
"RTN","FHORD1A",21,0)
 S BAG="N" D FIL^FHORE1A W "  .. done" Q
"RTN","FHORD1A",22,0)
W5 Q
"RTN","FHORD2")
0^192^B9427807
"RTN","FHORD2",1,0)
FHORD2 ; HISC/REL/NCA - Review Diet Orders ;11/7/92  09:57 
"RTN","FHORD2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD2",3,0)
F0 S ALL=0 D ^FHDPA G KIL:'DFN,KIL:'FHDFN,F0:'$D(^DGPM(ADM,0))
"RTN","FHORD2",4,0)
 S DTP=$P(^DGPM(ADM,0),"^",1) D DTP^FH
"RTN","FHORD2",5,0)
F01 W !!,"List Orders from Date/Time: "_DTP_" // " R X:DTIME G:'$T!(X["^") KIL S:X="" Y=0 I X'="" S %DT="EXTS" D ^%DT G:Y<1 F01
"RTN","FHORD2",6,0)
 S D4=Y D CUR^FHORD7 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHORD2",7,0)
 I Y'="",FHORD>0 I $D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) W !,"Comment: ",^(1)
"RTN","FHORD2",8,0)
 S X1=^FHPT(FHDFN,"A",ADM,0),DTP=$P(X1,"^",3) I DTP D DTP^FH W !,"Expires: ",DTP
"RTN","FHORD2",9,0)
 S TF=$P(X1,"^",4) G:TF<1 F1
"RTN","FHORD2",10,0)
 S Y=^FHPT(FHDFN,"A",ADM,"TF",TF,0)
"RTN","FHORD2",11,0)
 S DTP=$P(Y,"^",1),COM=$P(Y,"^",5),TQU=$P(Y,"^",6),CAL=$P(Y,"^",7)
"RTN","FHORD2",12,0)
 D DTP^FH W !!,"Tubefeed Ordered: ",DTP
"RTN","FHORD2",13,0)
 F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S XY=^(TF2,0) D LP
"RTN","FHORD2",14,0)
 W !,"Total Quantity: ",TQU," cc",?42,"Total KCAL: ",CAL
"RTN","FHORD2",15,0)
 W:COM'="" !,"Comment: ",COM
"RTN","FHORD2",16,0)
F1 S CT=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"OO",K)) Q:K<1  S X=^(K,0) I $P(X,"^",2)'<D4,$P(X,"^",5)="S" D L1
"RTN","FHORD2",17,0)
 S N1=0 F FHORD=0:0 S FHORD=$O(^FHPT(FHDFN,"A",ADM,"DI",FHORD)) Q:FHORD<1  S X=^(FHORD,0) D LST
"RTN","FHORD2",18,0)
 I 'N1 W !!,"No Diet Orders Entered",! G F0
"RTN","FHORD2",19,0)
 D TLN G F0
"RTN","FHORD2",20,0)
KIL K %,%DT,A1,ADM,ALL,C,CAL,COM,CT,D1,D2,D3,D4,DA,DTP,FHDFN,DFN,FHDU,FHLD,FHOR,I,K,KK,N1,NOW,FHORD,FHWF,FHPV,POP,TYP,TF,TF2,TQU,TUN,STR,QUA,WARD,X,X1,X2,XY,Y Q
"RTN","FHORD2",21,0)
LP S TUN=$P(XY,"^",1),STR=$P(XY,"^",2),QUA=$P(XY,"^",3)
"RTN","FHORD2",22,0)
 W !,"Product: ",$P($G(^FH(118.2,TUN,0)),"^",1),", ",$S(STR=4:"Full",STR=1:"1/4",STR=2:"1/2",1:"3/4")," Str., ",QUA Q
"RTN","FHORD2",23,0)
L1 I 'CT W !!,"Saved Additional Orders:",! S CT=1
"RTN","FHORD2",24,0)
 S DTP=$P(X,"^",2) D DTP^FH W !,DTP,?20,$P(X,"^",3) Q
"RTN","FHORD2",25,0)
LST S COM=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) Q:$P(X,"^",9)<D4
"RTN","FHORD2",26,0)
 I 'N1 W !!,"    Effective         Expires         Type  Order",!
"RTN","FHORD2",27,0)
 S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7),D1=$P(X,"^",9),D2=$P(X,"^",10),TYP=$P(X,"^",8),D3=$P(X,"^",12),N1=N1+1
"RTN","FHORD2",28,0)
 S DTP=D1 D DTP^FH W !,DTP I D2 S DTP=D2 D DTP^FH W ?20,DTP
"RTN","FHORD2",29,0)
 W ?40,TYP,?44 D ORD I $L(Y)<36 W Y
"RTN","FHORD2",30,0)
 E  W $P(Y,", ",1,3) W:$P(Y,", ",4)'="" ",",!?44,$P(Y,", ",4,5)
"RTN","FHORD2",31,0)
 W:COM'="" !?44,COM Q
"RTN","FHORD2",32,0)
ORD S Y="" I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHORD2",33,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORD2",34,0)
 Q
"RTN","FHORD2",35,0)
TLN W !!?24,"----- Diet Orders Time Line -----",!,"    Effective     Type  Order",!
"RTN","FHORD2",36,0)
 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1  S FHORD=$P(^(KK,0),"^",2) D T1
"RTN","FHORD2",37,0)
 Q
"RTN","FHORD2",38,0)
T1 S X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0) Q:$P(X,"^",9)<D4
"RTN","FHORD2",39,0)
 S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7),TYP=$P(X,"^",8)
"RTN","FHORD2",40,0)
 S DTP=KK D DTP^FH W !,DTP,?20,TYP,?24 D ORD I $L(Y)<56 W Y Q
"RTN","FHORD2",41,0)
 W $P(Y,", ",1,4),",",!?24,$P(Y,", ",5) Q
"RTN","FHORD3")
0^193^B12761703
"RTN","FHORD3",1,0)
FHORD3 ; HISC/REL/NCA - Withhold Service ;8/20/96  09:09 ;
"RTN","FHORD3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005;
"RTN","FHORD3",3,0)
F0 S ALL=0 D ^FHDPA G:'DFN KIL^FHORD1 G:'FHDFN KIL^FHORD1
"RTN","FHORD3",4,0)
 D NOW^%DTC S NOW=% D CUR,FUT^FHORD1
"RTN","FHORD3",5,0)
 W !!,"Place patient on NPO/HOLD-TRAY." D F5 Q:'$D(DFN)  Q:'$D(FHDFN)  D F7 W !!,"... done" G F0
"RTN","FHORD3",6,0)
F5 ; Process NPO
"RTN","FHORD3",7,0)
 S D3=1 D GETD^FHORD71 G:'D1 AB
"RTN","FHORD3",8,0)
F6 R !!,"Comment: ",COM:DTIME G:'$T!(COM[U) AB I COM'?.ANP W *7," ??" G F6
"RTN","FHORD3",9,0)
 I $L(COM)>80!(COM?1"?".E) W *7,!,"Enter comment of up to 80 characters!" G F6
"RTN","FHORD3",10,0)
 Q
"RTN","FHORD3",11,0)
F7 ; File NPO
"RTN","FHORD3",12,0)
 S FHOR="^^^^",FHLD="N",TYP="",D4=0 D STR^FHORD7
"RTN","FHORD3",13,0)
 G KIL^FHORD1
"RTN","FHORD3",14,0)
EN2 ; Cancel Withhold Order
"RTN","FHORD3",15,0)
 D NOW^%DTC S NOW=%,DT=%\1
"RTN","FHORD3",16,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL D CUR S OLD=FHLD
"RTN","FHORD3",17,0)
 S (A2,CT)=0 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK'<NOW)  S A2=KK
"RTN","FHORD3",18,0)
 S XT="" K N F KK=A2-.000001:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1  S FHORD=$P(^(KK,0),"^",2) D T1
"RTN","FHORD3",19,0)
 I 'CT W !!,"No WITHHOLD Orders to Cancel" G KIL
"RTN","FHORD3",20,0)
C0 R !!,"Cancel Which Order #? ",X:DTIME G:'$T!("^"[X) AB I X'?1N.N!(X<1)!(X>CT) W *7," Enter # of Order to Cancel" G C0
"RTN","FHORD3",21,0)
 S FHORD=$P(XT,",",X),KK=N(FHORD) D T0 G KIL
"RTN","FHORD3",22,0)
T0 ; Update cancelled NPO
"RTN","FHORD3",23,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),D1=$P(X,"^",9),D2=$S(D1'>NOW:NOW,1:D1)
"RTN","FHORD3",24,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",10)=D2
"RTN","FHORD3",25,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",18,19)=D2_"^"_DUZ
"RTN","FHORD3",26,0)
 S:FHWF'=2 FHORN=$P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",14)
"RTN","FHORD3",27,0)
 F K9=KK-.000001:0 S K9=$O(^FHPT(FHDFN,"A",ADM,"AC",K9)) Q:K9<1  I $P(^(K9,0),"^",2)=FHORD S D1=K9 D S0
"RTN","FHORD3",28,0)
 D UPD^FHORD7 W:FHWF'=2 "  ... done" Q:FHWF=2  D CUR
"RTN","FHORD3",29,0)
 I OLD'="","^^^^"'[FHOR S D1=NOW D ^FHORD1A
"RTN","FHORD3",30,0)
 Q
"RTN","FHORD3",31,0)
S0 ; Set AC cross-ref data field
"RTN","FHORD3",32,0)
 S X2=D1+.0000001,D2=$O(^FHPT(FHDFN,"A",ADM,"AC",D1)) S:D2<1 D2=""
"RTN","FHORD3",33,0)
S1 S A2=0 F A1=0:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1<1!(A1'<X2)  S A2=A1
"RTN","FHORD3",34,0)
 I A2 S X2=A2,A2=$P(^FHPT(FHDFN,"A",ADM,"AC",A2,0),"^",2),X1=$P(^FHPT(FHDFN,"A",ADM,"DI",A2,0),"^",10) I X1'="",X1'>D1 G S1
"RTN","FHORD3",35,0)
 D:'A2 NOR S Z6=D1_"^"_A2 D ACR^FHORD71
"RTN","FHORD3",36,0)
 I X1'="",D2=""!(X1<D2) S D1=X1 G S0
"RTN","FHORD3",37,0)
S2 S X1="",A1=0 G S4
"RTN","FHORD3",38,0)
S3 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) G:A1="" S4 S X2=$P(^(A1,0),"^",2)
"RTN","FHORD3",39,0)
 I X2<1 D SK G S3
"RTN","FHORD3",40,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI",X2,0)) D SK G S3
"RTN","FHORD3",41,0)
 S X2=^FHPT(FHDFN,"A",ADM,"DI",X2,0) I $P(X2,"^",2,8)'=$P(X1,"^",2,8) S X1=X2 G S3
"RTN","FHORD3",42,0)
 I $P(X1,"^",10)="" D SK G S3
"RTN","FHORD3",43,0)
 I $P(X2,"^",10),$P(X2,"^",10)'>$P(X1,"^",10) D SK G S3
"RTN","FHORD3",44,0)
 S X1=X2 G S3
"RTN","FHORD3",45,0)
S4 D OEU^FHORD71 Q
"RTN","FHORD3",46,0)
SK K ^FHPT(FHDFN,"A",ADM,"AC",A1) S Z6=-1 G ACR^FHORD71
"RTN","FHORD3",47,0)
NOR L +^FHPT(FHDFN,"A",ADM,"DI",0)
"RTN","FHORD3",48,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI",0)) S ^FHPT(FHDFN,"A",ADM,"DI",0)="^115.02A^^"
"RTN","FHORD3",49,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",0),A2=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_A2_"^"_($P(X,"^",4)+1) L -^FHPT(FHDFN,"A",ADM,"DI",0)
"RTN","FHORD3",50,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",A2,0)=A2_"^^^^^^X^^"_D1_"^^"_DUZ_"^"_NOW,X="" Q
"RTN","FHORD3",51,0)
CUR D CUR^FHORD7 W !!,"Current Diet: ",$S(Y'="":Y,1:"No Current Order")
"RTN","FHORD3",52,0)
 Q:'FHORD  S X9=$P(X,"^",8) W:X9'="" " (",$S(X9="T":"Tray",X9="D":"Dining Room",1:"Cafe"),")" Q
"RTN","FHORD3",53,0)
T1 Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))!($D(N(FHORD)))  Q:$P(^(0),"^",7)=""  S P2=$P(^(0),"^",10)
"RTN","FHORD3",54,0)
 S DTP=KK D DTP^FH,C2^FHORD7
"RTN","FHORD3",55,0)
 I 'CT W !!," #      Effective            Expires           Order",!
"RTN","FHORD3",56,0)
 S CT=CT+1,XT=XT_FHORD_",",N(FHORD)=KK W !,$J(CT,2),"  ",DTP
"RTN","FHORD3",57,0)
 S DTP=P2 D:DTP DTP^FH W ?24,DTP,?47,Y Q
"RTN","FHORD3",58,0)
AB W *7,!!,"Withhold entry TERMINATED - No change!"
"RTN","FHORD3",59,0)
KIL K %,%H,%I,C,CT,DA,DG,DLB,DTP,I,K9,N,OLD,POP,P2,X9,XT G KIL^FHORD1
"RTN","FHORD4")
0^194^B7643589
"RTN","FHORD4",1,0)
FHORD4 ; HISC/REL/NCA - Isolation/Precaution ;10/11/00  07:52
"RTN","FHORD4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD4",3,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL
"RTN","FHORD4",4,0)
 D NOW^%DTC S NOW=% K %,%H,%I
"RTN","FHORD4",5,0)
 I $P(^FHPT(FHDFN,"A",ADM,0),"^",10)'="" G F1
"RTN","FHORD4",6,0)
 K DIC S DIC="^FH(119.4,",DIC(0)="AEQM" W ! D ^DIC G:Y<1 KIL S IS=+Y
"RTN","FHORD4",7,0)
 S FHNOW=NOW D FIL,ISO^FHWOR61 S NOW=FHNOW
"RTN","FHORD4",8,0)
 S TYP=$P(^FHPT(FHDFN,"A",ADM,0),"^",5) I TYP'="C",TYP'="D" G S2
"RTN","FHORD4",9,0)
S1 R !!,"Patient is on CAFETERIA/DINING ROOM Service. Change to TRAY? YES// ",X:DTIME G:'$T!(X["^") KIL
"RTN","FHORD4",10,0)
 S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G S1
"RTN","FHORD4",11,0)
 G:X?1"N".E S2 D CUR^FHORD7 I "^^^^"[FHOR S $P(^FHPT(FHDFN,"A",ADM,0),"^",5)="T" G S2
"RTN","FHORD4",12,0)
 S TYP="T",D2=$P(X,"^",10),(D3,D4)=0,COM="",D1=NOW,DT=NOW\1 D STR^FHORD7
"RTN","FHORD4",13,0)
S2 ;
"RTN","FHORD4",14,0)
 W "  ... done" G KIL
"RTN","FHORD4",15,0)
F1 S X=$P(^FHPT(FHDFN,"A",ADM,0),"^",10)
"RTN","FHORD4",16,0)
 W !!,"Isolation/Precaution Type is: ",$P($G(^FH(119.4,X,0)),"^",1)
"RTN","FHORD4",17,0)
F2 R !!,"Do you wish to remove? (Y/N) ",X:DTIME G:'$T!(X["^") KIL S:X="" X="*" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G F2
"RTN","FHORD4",18,0)
 I X?1"Y".E D CAN S FHORN=$P(^FHPT(FHDFN,"A",ADM,0),"^",13) D:FHORN>0 CODE^FHWOR61 W "  ...removed" G KIL
"RTN","FHORD4",19,0)
 W "  ... no change made" G KIL
"RTN","FHORD4",20,0)
FIL ; File Isolation
"RTN","FHORD4",21,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",10)=IS,X=^FH(119.4,IS,0)
"RTN","FHORD4",22,0)
 S ^FHPT("AIS",FHDFN,ADM)=""
"RTN","FHORD4",23,0)
 S EVT="I^O^"_IS D ^FHORX Q
"RTN","FHORD4",24,0)
CAN ; Cancel Isolation
"RTN","FHORD4",25,0)
 S IS=$P(^FHPT(FHDFN,"A",ADM,0),"^",10),$P(^(0),"^",10)="" K ^FHPT("AIS",FHDFN,ADM)
"RTN","FHORD4",26,0)
 S EVT="I^C^"_IS D ^FHORX Q
"RTN","FHORD4",27,0)
KIL K %DT,ADM,ALL,BY,C,COM,D1,D2,D3,D4,DA,FHDFN,DFN,DHD,DIC,DIE,DR,FHDU,FHLD,FHORD,FHDR,FHOR,FHORN,FHWF,FHPV,FLDS,FR,I,IS,L,NOW,POP,TO,TYP,WARD,X,X1,Y Q
"RTN","FHORD4",28,0)
EN1 ; Enter/Edit Isolation/Precaution Types
"RTN","FHORD4",29,0)
 K DIC S (DIC,DIE)="^FH(119.4,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=119.4 W ! D ^DIC K DIC,DLAYGO G KIL:"^"[X!$D(DTOUT),EN1:Y<1
"RTN","FHORD4",30,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.4 D ^DIE K DA,DIE,DIDEL,DR G EN1
"RTN","FHORD4",31,0)
EN2 ; List Isolation/Precaution Types
"RTN","FHORD4",32,0)
 W ! S L=0,DIC="^FH(119.4,",FLDS="[FHISLST]",BY="NAME"
"RTN","FHORD4",33,0)
 S (FR,TO)="",DHD="ISOLATION/PRECAUTION TYPES" D EN1^DIP,RSET G KIL
"RTN","FHORD4",34,0)
RSET K %ZIS S IOP="" D ^%ZIS K %ZIS,IOP,BY,DA,DHD,DIC,DIE,DR,FLDS,FR,L,TO,X,Y Q
"RTN","FHORD4",35,0)
SETVAR ; Set Date in HL7 format
"RTN","FHORD4",36,0)
 S FHIDT=$$FMTHL7^XLFDT(NOW) ;HL7 date format
"RTN","FHORD4",37,0)
 S FILL="I"_";"_ADM_";"_IS D SITE^FH
"RTN","FHORD4",38,0)
 Q
"RTN","FHORD41")
0^195^B7828794
"RTN","FHORD41",1,0)
FHORD41 ; HISC/REL/NCA - Isolation List ;4/27/93  08:07 
"RTN","FHORD41",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD41",3,0)
 W @IOF,!!?19,"I S O L A T I O N / P R E C A U T I O N S",!!
"RTN","FHORD41",4,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORD41",5,0)
 I $D(IO("Q")) S FHPGM="F1^FHORD41",FHLST="" D EN2^FH G KIL
"RTN","FHORD41",6,0)
 U IO D F1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORD41",7,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHORD41",8,0)
F1 ; List Isolations
"RTN","FHORD41",9,0)
 D NOW^%DTC S NOW=%,DT=NOW\1 K ^TMP($J)
"RTN","FHORD41",10,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("AIS",FHDFN)) Q:FHDFN<1  F ADM=0:0 S ADM=$O(^FHPT("AIS",FHDFN,ADM)) Q:ADM<1  D F2
"RTN","FHORD41",11,0)
 S PG=0 D HDR S WRDN=""
"RTN","FHORD41",12,0)
 F L1=0:0 S WRDN=$O(^TMP($J,WRDN)) Q:WRDN=""  S RM="" F L2=0:0 S RM=$O(^TMP($J,WRDN,RM)) Q:RM=""  F FHDFN=0:0 S FHDFN=$O(^TMP($J,WRDN,RM,FHDFN)) Q:FHDFN<1  S Y0=$G(^TMP($J,WRDN,RM,FHDFN)) D F3
"RTN","FHORD41",13,0)
 ;Add outpatient ISOLATION/PRECAUTIONS
"RTN","FHORD41",14,0)
 W !!,"O U T P A T I E N T S",!,"======================"
"RTN","FHORD41",15,0)
 W !!,"PATIENT",?34,"PLATE  DELIVERY"
"RTN","FHORD41",16,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("IP",FHDFN)) Q:FHDFN'>0  D
"RTN","FHORD41",17,0)
 .S FHIP=$P($G(^FHPT(FHDFN,0)),U,5) I FHIP="" Q
"RTN","FHORD41",18,0)
 .D PATNAME^FHOMUTL
"RTN","FHORD41",19,0)
 .S FHIPZN=$G(^FH(119.4,FHIP,0)),FHPC=$P(FHIPZN,U,2),FHDL=$P(FHIPZN,U,3)
"RTN","FHORD41",20,0)
 .W !!,FHPTNM,?34
"RTN","FHORD41",21,0)
 .W $S(FHPC="P":"Paper",1:"China"),"  ",$S(FHDL="N":"Nurse",1:"Food Svc")
"RTN","FHORD41",22,0)
 W ! Q
"RTN","FHORD41",23,0)
F2 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORD41",24,0)
 I '$D(^DPT(DFN,.1)) K ^FHPT("AIS",FHDFN,ADM) Q
"RTN","FHORD41",25,0)
 S X=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) I $G(^FHPT("AW",+X,FHDFN))'=ADM K ^FHPT("AIS",FHDFN,ADM) Q
"RTN","FHORD41",26,0)
 S WRDN=$P($G(^FH(119.6,+X,0)),"^",1),RM=$G(^DPT(DFN,.101)) S:RM="" RM=" "
"RTN","FHORD41",27,0)
 S PRE=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",10) Q:'PRE
"RTN","FHORD41",28,0)
 D CUR^FHORD7 S X=$P(X,"^",8) I X'="" S Y=Y_" ("_X_")"
"RTN","FHORD41",29,0)
 S ^TMP($J,WRDN,RM,FHDFN)=PRE_"^"_Y Q
"RTN","FHORD41",30,0)
F3 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORD41",31,0)
 S PRE=$P(Y0,"^",1),Y0=$P(Y0,"^",2),X0=^DPT(DFN,0),X1=$G(^FH(119.4,+PRE,0)),X2=$P(X1,"^",3),X1=$P(X1,"^",2) D PID^FHDPA D:$Y>57 HDR
"RTN","FHORD41",32,0)
 W !!,$E(WRDN,1,15),?17,$E(RM,1,10),?29,$E($P(X0,"^",1),1,23),?54,BID,?62,$S(X1="P":"Paper",1:"China"),"  ",$S(X2="N":" Nurse",1:"Food Svc")
"RTN","FHORD41",33,0)
 W:Y0'="" !?3,"Diet: ",Y0 Q
"RTN","FHORD41",34,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?18,"I S O L A T I O N / P R E C A U T I O N S",?71,"Page ",PG
"RTN","FHORD41",35,0)
 S DTP=NOW D DTP^FH W !!?31,DTP
"RTN","FHORD41",36,0)
 W !!,"I N P A T I E N T S",!,"===================="
"RTN","FHORD41",37,0)
 W !!,"WARD",?17,"ROOM",?29,"PATIENT",?55,"ID#",?62,"PLATE  DELIVERY" Q
"RTN","FHORD5")
0^196^B8107317
"RTN","FHORD5",1,0)
FHORD5 ; HISC/REL/NCA - Withhold Lists ;3/16/95  14:21
"RTN","FHORD5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD5",3,0)
 W @IOF,!!?27,"N P O / P A S S   L I S T",!!
"RTN","FHORD5",4,0)
 S FHP=$O(^FH(119.73,0)) I FHP'<1,$O(^FH(119.73,FHP))<1 S FHP=0 G R1
"RTN","FHORD5",5,0)
R0 R !!,"Select COMMUNICATION OFFICE (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0
"RTN","FHORD5",6,0)
 E  K DIC S DIC="^FH(119.73,",DIC(0)="EMQ" D ^DIC G:Y<1 R0 S FHP=+Y
"RTN","FHORD5",7,0)
R1 R !!,"Sort by WARD or DATE/TIME? WARD// ",SRT:DTIME G:'$T!(SRT["^") KIL S:SRT="" SRT="W" S X=SRT D TR^FH S SRT=X
"RTN","FHORD5",8,0)
 I $P("WARD",SRT,1)'="",$P("DATE/TIME",SRT,1)'="" W *7,"  Enter W or D" G R1
"RTN","FHORD5",9,0)
 S SRT=$E(SRT,1)
"RTN","FHORD5",10,0)
R2 W !!,"The list requires a 132 column printer.",!
"RTN","FHORD5",11,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORD5",12,0)
 I $D(IO("Q")) S FHPGM="F1^FHORD5",FHLST="FHP^SRT" D EN2^FH G KIL
"RTN","FHORD5",13,0)
 U IO D F1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORD5",14,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHORD5",15,0)
F1 ; List Withholds
"RTN","FHORD5",16,0)
 D NOW^%DTC S NOW=%,DT=NOW\1 S X1=NOW,X2=-3 D C^%DTC S OLD=+X,PG=0 D HDR K ^TMP($J)
"RTN","FHORD5",17,0)
 F W1=0:0 S W1=$O(^FHPT("AW",W1)) Q:W1'>0  D DP I 'FHP!(D1=FHP) F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",W1,FHDFN)) I ADM>0 D F2
"RTN","FHORD5",18,0)
 S WRDN="" F A3=0:0 S WRDN=$O(^TMP($J,WRDN)) Q:WRDN=""  F FHDFN=0:0 S FHDFN=$O(^TMP($J,WRDN,FHDFN)) Q:FHDFN<1  S X=$G(^TMP($J,WRDN,FHDFN)) D F3
"RTN","FHORD5",19,0)
 W ! Q
"RTN","FHORD5",20,0)
F2 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORD5",21,0)
 S Y(0)=^DPT(DFN,0) Q:'$D(^FHPT(FHDFN,"A",ADM,0))  Q:$P(^(0),"^",4)  D CUR^FHORD7 Q:FHLD=""
"RTN","FHORD5",22,0)
 S A1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1!(K>NOW)  I $P(^(K,0),"^",2)=FHORD S A1=K
"RTN","FHORD5",23,0)
 S D2=$P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",10) D PID^FHDPA
"RTN","FHORD5",24,0)
 S RM=$E(WRDN,1,14) I $D(^DPT(DFN,.101)) S RM=RM_"/"_^(.101)
"RTN","FHORD5",25,0)
 S ^TMP($J,$S(SRT="W":WRDN,1:A1),FHDFN)=$E(RM,1,21)_"^"_$P(Y(0),"^",1)_"^"_BID_"^"_A1_"^"_D2_"^"_Y Q
"RTN","FHORD5",26,0)
F3 D:$Y>58 HDR W !,$P(X,"^",1),?24,$P(X,"^",2),?55,$P(X,"^",3)
"RTN","FHORD5",27,0)
 S D1=$P(X,"^",4),D2=$P(X,"^",5)
"RTN","FHORD5",28,0)
 S DTP=D1 D DTP^FH W ?64,DTP I D2 S DTP=D2 D DTP^FH W ?83,DTP
"RTN","FHORD5",29,0)
 W:D1<OLD ?102,"*" W ?106,$P(X,"^",6) Q
"RTN","FHORD5",30,0)
DP S WRDN=$P(^FH(119.6,W1,0),"^",1),D1=$P(^(0),"^",8) Q
"RTN","FHORD5",31,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?44,"N P O  /  P A S S   L I S T",?107,"Page ",PG
"RTN","FHORD5",32,0)
 W !! W:FHP $P(^FH(119.73,FHP,0),"^",1) S DTP=NOW D DTP^FH W ?48,DTP
"RTN","FHORD5",33,0)
 W !!,"WARD/ROOM",?24,"PATIENT",?56,"ID#",?65,"EFFECTIVE DATE",?84,"EXPIRATION DATE",?102,">3",?106,"REASON",! Q
"RTN","FHORD6")
0^197^B20737754
"RTN","FHORD6",1,0)
FHORD6 ; HISC/REL/NCA/JH/RTK - Diet Inquiry ;5/3/01  11:04
"RTN","FHORD6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD6",3,0)
 ;S ALL=0 D ^FHDPA G:'DFN KIL
"RTN","FHORD6",4,0)
 ;S FHALL=1 D ^FHOMDPA I 'DFN!('FHDFN) G KIL
"RTN","FHORD6",5,0)
 S FHALL=1 D ^FHOMDPA I 'FHDFN G KIL
"RTN","FHORD6",6,0)
 I FHDFN,DFN="" D ^FHOMPP Q  ;profile for file #200 outpatients
"RTN","FHORD6",7,0)
 I FHDFN,$G(^DPT(DFN,.1))="" D ^FHOMPP Q  ;profile for file #2 outpts
"RTN","FHORD6",8,0)
 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORD6",9,0)
 I $D(IO("Q")) S FHPGM="F0^FHORD6",FHLST="FHDFN^DFN^PID^ADM" D EN2^FH G KIL
"RTN","FHORD6",10,0)
 U IO D F0 D ^%ZISC K %ZIS,IOP G FHORD6
"RTN","FHORD6",11,0)
F0 ; Display Diet
"RTN","FHORD6",12,0)
 D NOW^%DTC S NOW=%,DT=NOW\1,QT=""
"RTN","FHORD6",13,0)
 S WARD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) S:WARD WARD=$P($G(^FH(119.6,WARD,0)),"^",1)
"RTN","FHORD6",14,0)
 S Y(0)=^DPT(DFN,0),SEX=$P(Y(0),"^",2),DOB=$P(Y(0),"^",3)
"RTN","FHORD6",15,0)
 S AGE=$E(NOW,1,3)-$E(DOB,1,3)-($E(NOW,4,7)<$E(DOB,4,7)),X=$P($G(^DPT(DFN,.101)),"^",1),RM=$E(WARD,1,15) S:X'="" RM=RM_"/"_X
"RTN","FHORD6",16,0)
 S QT="",PG=0 D HDR
"RTN","FHORD6",17,0)
 D ALG^FHCLN I ALG'="" W !!,"Allergies: ",ALG
"RTN","FHORD6",18,0)
 K N S P1=1 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0),M=$P(X,"^",2) S:M="A" M="BNE" D SP
"RTN","FHORD6",19,0)
 I $O(N(""))="" W !!,"No Food Preferences on file",! G A0
"RTN","FHORD6",20,0)
 W !!,"Food Preferences Currently on file",!!?23,"Likes",?57,"Dislikes",!
"RTN","FHORD6",21,0)
 W ! S (M,MM)="" F  S M=$O(N(M)) Q:M=""  I $D(N(M)) W $P(M,"~",2) D  Q:QT="^"  S MM=M ;P32
"RTN","FHORD6",22,0)
 .  S (P1,P2)=0 F  S:P1'="" P1=$O(N(M,"L",P1)) S X1=$S(P1>0:N(M,"L",P1),1:"") S:P2'="" P2=$O(N(M,"D",P2)) S X2=$S(P2>0:N(M,"D",P2),1:"") Q:P1=""&(P2="")  D W0 Q:QT="^"  W:MM'=M ! ;P32
"RTN","FHORD6",23,0)
 .  Q
"RTN","FHORD6",24,0)
 W ! K L,N,M,M1,M2
"RTN","FHORD6",25,0)
 G:QT="^" KIL ;P32
"RTN","FHORD6",26,0)
A0 S X(0)=^FHPT(FHDFN,"A",ADM,0),X=$P(X(0),"^",10) G:X="" F1
"RTN","FHORD6",27,0)
 D:$Y>(IOSL-3) HDR G:QT="^" KIL W !!,"Isolation/Precaution Type is ",$P($G(^FH(119.4,X,0)),"^",1)
"RTN","FHORD6",28,0)
F1 D CUR^FHORD7 D:$Y>(IOSL-6) HDR G:QT="^" KIL W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHORD6",29,0)
 I Y'="",FHORD>0 I $D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) S COM=^(1) W:COM'="" !,"Comment: ",COM
"RTN","FHORD6",30,0)
 S TYP=$P(X,"^",8) I TYP'="" W !,"Service: ",$S(TYP="T":"Tray",TYP="D":"Dining Room",1:"Cafeteria")
"RTN","FHORD6",31,0)
 S DTP=$P(X(0),"^",3) I DTP D DTP^FH W !,"Expires: ",DTP
"RTN","FHORD6",32,0)
 S TF=$P(X(0),"^",4) G:TF<1 F2
"RTN","FHORD6",33,0)
 S Y=^FHPT(FHDFN,"A",ADM,"TF",TF,0)
"RTN","FHORD6",34,0)
 S DTP=$P(Y,"^",1),COM=$P(Y,"^",5),TQU=$P(Y,"^",6),CAL=$P(Y,"^",7)
"RTN","FHORD6",35,0)
 D DTP^FH W !!,"Tubefeed Ordered: ",DTP
"RTN","FHORD6",36,0)
 F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S XY=^(TF2,0) D LP
"RTN","FHORD6",37,0)
 W !,"Total Quantity: ",TQU," cc",?42,"Total KCAL: ",CAL
"RTN","FHORD6",38,0)
 W:COM'="" !,"Comment: ",COM
"RTN","FHORD6",39,0)
F2 S NO=$P(X(0),"^",7),Y=$S('NO:"",1:^FHPT(FHDFN,"A",ADM,"SF",NO,0)) D:$Y>(IOSL-3) HDR G:QT="^" KIL
"RTN","FHORD6",40,0)
 S L=$P(Y,"^",4) W !!,"Supplemental Feeding: ",$S('L:"No Order",1:$P(^FH(118.1,L,0),"^",1)) G:'NO F3
"RTN","FHORD6",41,0)
 S DTP=$P(Y,"^",30) D DTP^FH W ?50,"Reviewed: ",DTP
"RTN","FHORD6",42,0)
 S L=4 F K1=1:1:3 S K=0,N(K1)="" F K2=1:1:4 S Z=$P(Y,U,L+1),Q=$P(Y,U,L+2),L=L+2 I Z'="" S:'Q Q=1 S:N(K1)'="" N(K1)=N(K1)_"; " S N(K1)=N(K1)_Q_" "_$P(^FH(118,Z,0),"^",1)
"RTN","FHORD6",43,0)
 D:$Y>(IOSL-4) HDR G:QT="^" KIL F K1=1:1:3 I N(K1)'="" W !?5,$P("10am; 2pm; 8pm",";",K1),":",?13,N(K1)
"RTN","FHORD6",44,0)
F3 G ^FHORD61
"RTN","FHORD6",45,0)
LP S TUN=$P(XY,"^",1),STR=$P(XY,"^",2),QUA=$P(XY,"^",3)
"RTN","FHORD6",46,0)
 W !,"Product: ",$P($G(^FH(118.2,TUN,0)),"^",1),", ",$S(STR=4:"Full",STR=1:"1/4",STR=2:"1/2",1:"3/4")," Str., ",QUA Q
"RTN","FHORD6",47,0)
SP S Z=$G(^FH(115.2,+X,0)),L1=$P(Z,"^",1),KK=$P(Z,"^",2),M1="",DAS=$P(X,"^",4)
"RTN","FHORD6",48,0)
 I KK="L" S Q=$P(X,"^",3),L1=$S(Q:Q,1:1)_" "_L1
"RTN","FHORD6",49,0)
 I M="BNE" S M1="1~All Meals" G SP1
"RTN","FHORD6",50,0)
 S Z1=$E(M,1) I Z1'="" S M1=$S(Z1="B":"2~Break",Z1="N":"3~Noon",1:"4~Even")
"RTN","FHORD6",51,0)
 S Z1=$E(M,2) I Z1'="" S M1=M1_","_$S(Z1="B":"Break",Z1="N":"Noon",1:"Even")
"RTN","FHORD6",52,0)
SP1 S:'$D(N(M1,KK,P1)) N(M1,KK,P1)="" I $L(N(M1,KK,P1))+$L(L1)<255 S N(M1,KK,P1)=N(M1,KK,P1)_$S(N(M1,KK,P1)="":"",1:", ")_L1_$S(DAS="Y":" (D)",1:"")
"RTN","FHORD6",53,0)
 E  S:'$D(N(M1,KK,K)) N(M1,KK,K)="" S N(M1,KK,K)=L1_$S(DAS="Y":" (D)",1:"") S P1=K
"RTN","FHORD6",54,0)
 Q
"RTN","FHORD6",55,0)
W0 I X1'="" W ?12 S X=X1 D W1 S X1=X
"RTN","FHORD6",56,0)
 I X2'="" W ?46 S X=X2 D W1 S X2=X
"RTN","FHORD6",57,0)
 Q:X1=""&(X2="")  D:$Y'<(IOSL-2) HDR Q:QT="^"  W ! G W0 ;P32
"RTN","FHORD6",58,0)
W1 I $L(X)<34 W X S X="" Q
"RTN","FHORD6",59,0)
 F KK=35:-1:1 Q:$E(X,KK-1,KK)=", "
"RTN","FHORD6",60,0)
 W $E(X,1,KK-2) S X=$E(X,KK+1,999) Q
"RTN","FHORD6",61,0)
PAUSE ; Pause For Scroll
"RTN","FHORD6",62,0)
 I $E(IOST,1,2)="C-",PG R !!,"Press return to continue  ",YN:DTIME S:'$T!(YN["^") QT="^" Q:QT="^"  I "^"'[YN W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHORD6",63,0)
 Q
"RTN","FHORD6",64,0)
HDR ; Print Header
"RTN","FHORD6",65,0)
 D PAUSE Q:QT="^"
"RTN","FHORD6",66,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHORD6",67,0)
 W !,PID,?16,$P(Y(0),"^",1),?48,SEX," Age ",AGE,?(79-$L(RM)),RM Q
"RTN","FHORD6",68,0)
KIL ; Final variable kill
"RTN","FHORD6",69,0)
 K %,%H,%I,%T,%ZIS,A1,ADM,AGE,ALG,ALL,BAG,C,CAL,COM,CON,CT,D3,DA,DAS,FHDU,FHDFN,DFN,DOB,DTP,FHOR,FHLD,I,IOP,K,K1,K2,KK,L,L1,LST,MEAL,N,NO,NOW,FHORD,FHWF,FHPV
"RTN","FHORD6",70,0)
 K POP,Q,QUA,QT,QTY,RM,SEX,PID,BID,STR,TYP,TF,TF2,TIM,TQU,TUN,WARD,X,X1,X2,XY,Y,YN,Z,Z1 Q
"RTN","FHORD61")
0^198^B13130333
"RTN","FHORD61",1,0)
FHORD61 ; HISC/REL/NCA - Diet Inquiry (cont) ;3/13/01  15:08
"RTN","FHORD61",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD61",3,0)
 S X1=NOW,X2=-1 D C^%DTC S LST=X,CT=0
"RTN","FHORD61",4,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"OO",K)) Q:K<1  S X=^(K,0) I $P(X,"^",2)'<LST!($P(X,"^",5)="S"),$P(X,"^",5)'="X" D L1 Q:QT="^"
"RTN","FHORD61",5,0)
 G:QT="^" KIL^FHORD6
"RTN","FHORD61",6,0)
 W ! S CT=0 F KK=NOW:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1  S FHORD=$P(^(KK,0),"^",2) D T1 Q:QT="^"
"RTN","FHORD61",7,0)
 G:QT="^" KIL^FHORD6
"RTN","FHORD61",8,0)
 D:$Y>(IOSL-2) HDR^FHORD6 G:QT="^" KIL^FHORD6 I 'CT W !,"No future Diet Orders exist"
"RTN","FHORD61",9,0)
F4 W ! S CT=0 F K=NOW:0 S K=$O(^FHPT(FHDFN,"A",ADM,"EL",K)) Q:K<1  S CT=CT+1,Y=^(K,0) D EL Q:QT="^"
"RTN","FHORD61",10,0)
 G:QT="^" KIL^FHORD6
"RTN","FHORD61",11,0)
 D:$Y>(IOSL-2) HDR^FHORD6 G:QT="^" KIL^FHORD6 I 'CT W !,"No future Early or Late Trays ordered"
"RTN","FHORD61",12,0)
 K N F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  S X=^FHPT(FHDFN,"A",ADM,"SP",K,0),M=$P(X,"^",3),M=$S(M="BNE":"A",1:$E(M,1)),N(M,K)=$P(X,"^",2,3),$P(N(M,K),"^",3)=$P(X,"^",8)
"RTN","FHORD61",13,0)
 D:$Y>(IOSL-4) HDR^FHORD6 G:QT="^" KIL^FHORD6 I $O(N(""))="" W !!,"No Active Standing Orders" G F5
"RTN","FHORD61",14,0)
 W !!,"Active Standing Orders:",!
"RTN","FHORD61",15,0)
 F M="A","B","N","E" F K=0:0 S K=$O(N(M,K)) Q:K<1  S Z=+N(M,K) I Z D:$Y>(IOSL-2) HDR^FHORD6 Q:QT="^"  D SP S QTY=$P(N(M,K),"^",3) W !?5,M2,?18,$S(QTY:QTY,1:1)," ",$P(^FH(118.3,Z,0),"^",1)
"RTN","FHORD61",16,0)
 G:QT="^" KIL^FHORD6
"RTN","FHORD61",17,0)
 K L,N,M,M1,M2
"RTN","FHORD61",18,0)
F5 S CT=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"DR",K)) Q:K<1  D:$Y>(IOSL-5) HDR^FHORD6 Q:QT="^"  D CD
"RTN","FHORD61",19,0)
 G:QT="^" KIL^FHORD6
"RTN","FHORD61",20,0)
 I 'CT D:$Y>(IOSL-4) HDR^FHORD6 G:QT="^" KIL^FHORD6 W !!,"No Active Consultations for this Admission"
"RTN","FHORD61",21,0)
F6 S CT=0 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"MO","AC",KK)) Q:KK<1!(QT="^")  F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"MO","AC",KK,K)) Q:K<1  D:$Y>(IOSL-5) HDR^FHORD6 Q:QT="^"  D MO
"RTN","FHORD61",22,0)
 G:QT="^" KIL^FHORD6
"RTN","FHORD61",23,0)
 I 'CT D:$Y>(IOSL-4) HDR^FHORD6 G:QT="^" KIL^FHORD6 W !!,"No Monitors for this Admission"
"RTN","FHORD61",24,0)
 I $E(IOST,1,2)="C-" R !!,"Press return to continue  ",YN:DTIME
"RTN","FHORD61",25,0)
 W ! G KIL^FHORD6
"RTN","FHORD61",26,0)
SP S M1=$P(N(M,K),"^",2) I M1="BNE" S M2="All Meals" Q
"RTN","FHORD61",27,0)
 S L=$E(M1,1),M2=$S(L="B":"Break",L="N":"Noon",1:"Even")
"RTN","FHORD61",28,0)
 S L=$E(M1,2) Q:L=""  S M2=M2_","_$S(L="B":"Break",L="N":"Noon",1:"Even") Q
"RTN","FHORD61",29,0)
EL S MEAL=$P(Y,"^",2),TIM=$P(Y,"^",3),BAG=$P(Y,"^",4),DTP=K\1 D DTP^FH
"RTN","FHORD61",30,0)
 D:$Y>(IOSL-2) HDR^FHORD6 Q:QT="^"  W !,"Early/Late Meal: ",DTP,?29,$J(TIM,10),"   ",$S(MEAL="B":"Breakfast",MEAL="N":"  Noon ",1:" Evening") W:BAG="Y" ?62,"Bagged Meal" Q
"RTN","FHORD61",31,0)
CD S Y=^FHPT(FHDFN,"A",ADM,"DR",K,0) Q:$P(Y,"^",8)'="A"  S CT=CT+1
"RTN","FHORD61",32,0)
 S CON=$P(Y,"^",2),DTP=$P(Y,"^",1),COM=$P(Y,"^",3)
"RTN","FHORD61",33,0)
 W !!,"Consult: ",$P($G(^FH(119.5,CON,0)),"^",1)
"RTN","FHORD61",34,0)
 W:COM'="" !,"Comment: ",COM
"RTN","FHORD61",35,0)
 D DTP^FH W !,"Ordered: ",DTP Q
"RTN","FHORD61",36,0)
L1 D:$Y>(IOSL-4) HDR^FHORD6 Q:QT="^"  I 'CT W !!,"Additional Orders Saved or Last 24 Hours:",! S CT=1
"RTN","FHORD61",37,0)
 S DTP=$P(X,"^",2) D DTP^FH W !,DTP,?20,$P(X,"^",3) Q
"RTN","FHORD61",38,0)
T1 Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))  S DTP=KK D DTP^FH,C2^FHORD7
"RTN","FHORD61",39,0)
 D:$Y>(IOSL-3) HDR^FHORD6 Q:QT="^"  I 'CT W !,"Future Diet Orders:",!
"RTN","FHORD61",40,0)
 S CT=CT+1 W !?5,DTP,?25,Y Q
"RTN","FHORD61",41,0)
MO ; Display Monitors
"RTN","FHORD61",42,0)
 S Y=$G(^FHPT(FHDFN,"A",ADM,"MO",K,0)) Q:Y=""  S CT=CT+1
"RTN","FHORD61",43,0)
 W !!,$P(Y,"^",1) S DTP=$P(Y,"^",2) D DTP^FH W ", ",DTP
"RTN","FHORD61",44,0)
 S COM=$P(Y,"^",3) W:COM'="" !?5,"Action: ",COM Q
"RTN","FHORD7")
0^199^B15592333
"RTN","FHORD7",1,0)
FHORD7 ; HISC/REL/NCA/JH - Diet Order Utilities ;4/5/96  11:27
"RTN","FHORD7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD7",3,0)
CUR ; Get Diet
"RTN","FHORD7",4,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHORD7",5,0)
 S X1=$G(^FHPT(FHDFN,"A",ADM,0)),FHORD=$P(X1,"^",2),X1=$P(X1,"^",3),(FHLD,FHOR,X,Y)=""
"RTN","FHORD7",6,0)
 Q:'FHORD  Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHORD7",7,0)
C2 ; Set FHOR & FHLD variables & Y = diet text
"RTN","FHORD7",8,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7),Y=""
"RTN","FHORD7",9,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") S:%>0 Y=$P($E(FHDU,%,999),";",1) K % Q
"RTN","FHORD7",10,0)
C3 S Y="" F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORD7",11,0)
 Q
"RTN","FHORD7",12,0)
NOW D NOW^%DTC S NOW=% Q
"RTN","FHORD7",13,0)
POST ; Generate bulletin
"RTN","FHORD7",14,0)
 S WRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) Q:WRD<1
"RTN","FHORD7",15,0)
 S XMKK=$P($G(^FH(119.6,WRD,0)),"^",2) Q:XMKK<1
"RTN","FHORD7",16,0)
 S XMB="FHDIORD",XMY(XMKK)=""
"RTN","FHORD7",17,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORD7",18,0)
 S XMB(1)=$P(^DPT(DFN,0),"^",1),XMB(2)=$P(^FH(119.6,WRD,0),"^",1) D C3 S XMB(3)=Y
"RTN","FHORD7",19,0)
 S XMB(5)=$S($D(^DPT(DFN,.101)):^(.101),1:"unknown")
"RTN","FHORD7",20,0)
 S DTP=D1 D DTP^FH S XMB(4)=DTP D ^XMB K XMB,XMY,XMM,XMDT Q
"RTN","FHORD7",21,0)
STR ; Store new diet order
"RTN","FHORD7",22,0)
 D ORD,NOW
"RTN","FHORD7",23,0)
 S X=FHORD_"^"_FHOR_"^"_FHLD_"^"_TYP_"^"_D1_"^"_$S(D2:D2,1:"")_"^"_DUZ_"^"_NOW,FHNOW=NOW
"RTN","FHORD7",24,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)=X S:COM'="" ^(1)=COM I FHWF D OE^FHORD71 S NOW=FHNOW
"RTN","FHORD7",25,0)
S0 G:'D2 S1 S X2=D2+.000001
"RTN","FHORD7",26,0)
S01 S A2=0 F A1=0:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1<1!(A1'<X2)  S A2=A1
"RTN","FHORD7",27,0)
 I A2 S X2=A2,A2=$P(^FHPT(FHDFN,"A",ADM,"AC",A2,0),"^",2),X1=$P(^FHPT(FHDFN,"A",ADM,"DI",A2,0),"^",10) I X1'="",X1'>D2 G S01
"RTN","FHORD7",28,0)
 F A1=D1:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1<1!(A1'<D2)  D SK
"RTN","FHORD7",29,0)
 S Z6=D1_"^"_FHORD D ACR^FHORD71
"RTN","FHORD7",30,0)
 I 'A2 D ORD S A2=FHORD,^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)=FHORD_"^^^^^^X^^"_D2_"^^"_DUZ_"^"_NOW
"RTN","FHORD7",31,0)
 E  D OE3
"RTN","FHORD7",32,0)
 S Z6=D2_"^"_A2 D ACR^FHORD71 G S2
"RTN","FHORD7",33,0)
S1 I FHLD'="P" F A1=D1:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1=""  D SK
"RTN","FHORD7",34,0)
 S Z6=D1_"^"_FHORD D ACR^FHORD71
"RTN","FHORD7",35,0)
S2 S X1="",A1=0 G S4
"RTN","FHORD7",36,0)
S3 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) G:A1="" S4 S X2=$P(^(A1,0),"^",2)
"RTN","FHORD7",37,0)
 I X2<1 D SK G S3
"RTN","FHORD7",38,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI",X2,0)) D SK G S3
"RTN","FHORD7",39,0)
 S X2=^FHPT(FHDFN,"A",ADM,"DI",X2,0) I $P(X2,"^",2,8)'=$P(X1,"^",2,8) S X1=X2 G S3
"RTN","FHORD7",40,0)
 I $P(X1,"^",10)="" D SK G S3
"RTN","FHORD7",41,0)
 I $P(X2,"^",10),$P(X2,"^",10)'>$P(X1,"^",10) D SK G S3
"RTN","FHORD7",42,0)
 S X1=X2 G S3
"RTN","FHORD7",43,0)
S4 D OEU^FHORD71 S NOW=FHNOW K FHNOW G U1
"RTN","FHORD7",44,0)
UPD ; Get time & update diet
"RTN","FHORD7",45,0)
 D NOW I $D(ZTQUEUED),$D(Z6) I NOW<Z6 S NOW=Z6+.0002
"RTN","FHORD7",46,0)
U1 ; Update diet
"RTN","FHORD7",47,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" W "Could not find patient" Q
"RTN","FHORD7",48,0)
 S A1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1!(K>NOW)  S A1=K
"RTN","FHORD7",49,0)
 G:'A1 U3 S X1=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2) G S2:X1<1,S2:'$D(^FHPT(FHDFN,"A",ADM,"DI",X1,0))
"RTN","FHORD7",50,0)
 S X2=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) S:X2<1 X2=""
"RTN","FHORD7",51,0)
U2 I $P(^FHPT(FHDFN,"A",ADM,0),"^",2,3)=X1_"^"_X2 Q
"RTN","FHORD7",52,0)
 S FHYES=0 I $P(^FHPT(FHDFN,"A",ADM,0),"^",2)=X1 S FHYES=1
"RTN","FHORD7",53,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",2,3)=X1_"^"_X2,X9="" I X1 S X9=$P(^FHPT(FHDFN,"A",ADM,"DI",X1,0),"^",8) I 'FHYES S EVT="D^O^"_X1 D ^FHORX
"RTN","FHORD7",54,0)
 I X9'="",X9'=$P(^FHPT(FHDFN,"A",ADM,0),"^",5) S $P(^(0),"^",5)=X9
"RTN","FHORD7",55,0)
 K X9 D ^FHORD72 K FHYES Q
"RTN","FHORD7",56,0)
U3 S (X1,X2)="" G U2
"RTN","FHORD7",57,0)
SK K ^FHPT(FHDFN,"A",ADM,"AC",A1) S Z6=-1 G ACR^FHORD71
"RTN","FHORD7",58,0)
ORD ; Get next order #
"RTN","FHORD7",59,0)
 L +^FHPT(FHDFN,"A",ADM,"DI",0)
"RTN","FHORD7",60,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI",0)) S ^FHPT(FHDFN,"A",ADM,"DI",0)="^115.02A^^"
"RTN","FHORD7",61,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",0),FHORD=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_FHORD_"^"_($P(X,"^",4)+1)
"RTN","FHORD7",62,0)
 L -^FHPT(FHDFN,"A",ADM,"DI",0) Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD))  G ORD
"RTN","FHORD7",63,0)
OE3 ; Enter New Re-enstated Order
"RTN","FHORD7",64,0)
 Q:$$VERSION^XPDUTL("OR")=2.5
"RTN","FHORD7",65,0)
 D ORD^FHORR S FHNO1=$G(^FHPT(FHDFN,"A",ADM,"DI",A2,0)),FHNO2=$G(^(1)),FHNO3=$G(^(2))
"RTN","FHORD7",66,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",FHORD1,0)=FHORD1_"^"_$P(FHNO1,"^",2,8)_"^"_D2_"^"_$P(FHNO1,"^",10)_"^"_DUZ_"^"_NOW_"^"_$P(FHNO1,"^",13) S:FHNO2'="" ^(1)=FHNO2
"RTN","FHORD7",67,0)
 S:FHNO3 ^(2)=FHNO3,^(3)=DUZ_"^"_NOW S A2=FHORD1 I FHWF D OE^FHORR S NOW=FHNOW
"RTN","FHORD7",68,0)
 K FHNO1,FHNO2,FHNO3,FHORD1 Q
"RTN","FHORD71")
0^200^B21240764
"RTN","FHORD71",1,0)
FHORD71 ; HISC/REL - Diet Order Utilities (cont) ;10/1/96  10:00
"RTN","FHORD71",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD71",3,0)
GETD ; Get from/to dates
"RTN","FHORD71",4,0)
 S (D1,D2)=0 D NOW^%DTC S NOW=%,DT=NOW\1 K %,%H,%I
"RTN","FHORD71",5,0)
D1 R !!,"Effective Date/Time: NOW// ",X:DTIME Q:'$T!(X="^")  S:X="" X="NOW" D:$E($P(X,"@",2),1)?1U CNV S %DT="ETSX" D ^%DT Q:U[X  G:Y<1 D1
"RTN","FHORD71",6,0)
 I Y<NOW W *7,"  Cannot be effective before now!" G GETD
"RTN","FHORD71",7,0)
 S D1=+Y Q:'D3
"RTN","FHORD71",8,0)
D2 R !!,"Expiration Date/Time: ",X:DTIME G:'$T!(X["^") D3 Q:X=""  D:$P(X,"@",2)?1U CNV S %DT="ETSX" D ^%DT G D3:U[X,D2:Y<1
"RTN","FHORD71",9,0)
 I Y'>D1 W *7,"  Cannot end before effective date!" G GETD
"RTN","FHORD71",10,0)
 S D2=+Y Q
"RTN","FHORD71",11,0)
D3 S D1=0 Q
"RTN","FHORD71",12,0)
CNV S DP=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8)
"RTN","FHORD71",13,0)
 I DP'="" S DP=$P($G(^FH(119.6,DP,0)),"^",8)
"RTN","FHORD71",14,0)
 S FHPAR=$G(^FH(119.73,+DP,2))
"RTN","FHORD71",15,0)
 S A1=$E($P(X,"@",2),1) I A1'="M" S A1=$S(A1="B":$P(FHPAR,"^",7),A1="N":$P(FHPAR,"^",8),A1="E":$P(FHPAR,"^",9),1:A1),$P(X,"@",2)=A1 Q
"RTN","FHORD71",16,0)
 S X=$P(X,"@",1),%DT="X" D ^%DT I Y<1 S X=X_"@2359" Q
"RTN","FHORD71",17,0)
 S X1=Y,X2=1 D C^%DTC K %H,%T Q:X<1  S X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_(1700+$E(X,1,3))_"@0001" Q
"RTN","FHORD71",18,0)
ACR ; Store AC diet sequence data
"RTN","FHORD71",19,0)
 G:Z6<1 A1 I '$D(^FHPT(FHDFN,"A",ADM,"AC",0)) S ^(0)="^115.14^^"
"RTN","FHORD71",20,0)
 S ^FHPT(FHDFN,"A",ADM,"AC",+Z6,0)=Z6,$P(^FHPT(FHDFN,"A",ADM,"AC",0),"^",3)=+Z6
"RTN","FHORD71",21,0)
 I Z6'>NOW S Z6=1 G A1
"RTN","FHORD71",22,0)
 N X,X1,FHORN K ZTSAVE
"RTN","FHORD71",23,0)
 S ZTIO="",ZTRTN="UPD^FHORD7",ZTREQ="@",ZTDESC="Diet Update",ZTDTH=+Z6
"RTN","FHORD71",24,0)
 S ZTSAVE("DFN")=DFN,ZTSAVE("FHDFN")=FHDFN,ZTSAVE("ADM")=ADM,ZTSAVE("Z6")=+Z6,ZTSAVE("ZTREQ")="" D ^%ZTLOAD K ZTSK
"RTN","FHORD71",25,0)
 S Z6=1
"RTN","FHORD71",26,0)
A1 S $P(^FHPT(FHDFN,"A",ADM,"AC",0),"^",4)=$P(^FHPT(FHDFN,"A",ADM,"AC",0),"^",4)+Z6 K Z6 Q
"RTN","FHORD71",27,0)
OE ; File OE/RR Diet Order
"RTN","FHORD71",28,0)
 Q:FHLD="X"!(FHLD="P")
"RTN","FHORD71",29,0)
 S FHO=FHOR,VAL="" D VAL^FHWORP(FHO,.VAL) Q:VAL=""
"RTN","FHORD71",30,0)
 S FHNEW=$S(FHLD'="":"N",1:"D")_";"_ADM_";"_FHORD_";"_D1_";"_D2_";"_FHLD_";"_COM_";"_TYP_";"_D4_";"_VAL
"RTN","FHORD71",31,0)
 S (FHSTS,FHDU)=$S(D1>NOW:8,1:6)
"RTN","FHORD71",32,0)
 I FHWF=1 D FILE S:FHDU $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",15)=FHDU Q
"RTN","FHORD71",33,0)
 I FHWF=2 S FHDU=+FHORN_"^"_FHDU D FHWF2
"RTN","FHORD71",34,0)
 S:+FHDU $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",14,15)=FHDU Q
"RTN","FHORD71",35,0)
OEU ; Update status of OE/RR orders
"RTN","FHORD71",36,0)
 N FHORN K A1 S A1=0
"RTN","FHORD71",37,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K>NOW!(K<1)  S A1=K
"RTN","FHORD71",38,0)
 I A1 S X=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2),A1(+X)=A1,A1=+X
"RTN","FHORD71",39,0)
 F K=NOW:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1  S X=$P(^(K,0),"^",2) I '$D(A1(+X)) S A1(+X)=K
"RTN","FHORD71",40,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"DI",K)) Q:K=""  S FHORN=$P(^(K,0),"^",14) I FHORN S STS=$P(^(0),"^",15) D U1
"RTN","FHORD71",41,0)
 K A1,K,X,FHORN,FHL,FHO,FHMSG1,FHSAV,STS Q
"RTN","FHORD71",42,0)
U1 I '$D(A1(K)) Q:STS<3  S $P(^FHPT(FHDFN,"A",ADM,"DI",K,0),"^",15)=1,FHSTS=1,FHSAV=$G(^FHPT(FHDFN,"A",ADM,"DI",K,0)) Q:'$D(^OR(100,FHORN))  G U3
"RTN","FHORD71",43,0)
 N FHMSG1,FHO,FHSAV S FHSAV=$G(^FHPT(FHDFN,"A",ADM,"DI",K,0))
"RTN","FHORD71",44,0)
 S FHO=$P(FHSAV,"^",2,6),VAL="" D VAL^FHWORP(FHO,.VAL) Q:VAL=""
"RTN","FHORD71",45,0)
 S FHMSG1=$S($P(FHSAV,"^",7)="N":"N",1:"D")_";"_ADM_";"_K_";"_$P(FHSAV,"^",9)_";"_$P(FHSAV,"^",10)_";"_$P(FHSAV,"^",7)_";"_$G(^FHPT(FHDFN,"A",ADM,"DI",K,1))_";"_$P(FHSAV,"^",8)_";;"_VAL
"RTN","FHORD71",46,0)
 S FHDAT="",FHSTRT=$P(^FHPT(FHDFN,"A",ADM,"DI",K,0),"^",9) I FHSTRT'=A1(K) S FHDAT=A1(K)
"RTN","FHORD71",47,0)
 S FHDAT=FHDAT_"^"_$P(^FHPT(FHDFN,"A",ADM,"DI",K,0),"^",10)
"RTN","FHORD71",48,0)
 S FHSTS=$S(K=A1:6,1:8) I FHSTS'=STS S $P(^FHPT(FHDFN,"A",ADM,"DI",K,0),"^",15)=FHSTS
"RTN","FHORD71",49,0)
 I '$D(^OR(100,FHORN)) K FHDAT,FHSTRT,FHSTS Q
"RTN","FHORD71",50,0)
 I $D(FHORN1),FHORN1=FHORN S FHORR=1
"RTN","FHORD71",51,0)
 I $P(FHSAV,"^",7)="N" D CODE^FHWOR4 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG,FHDAT,FHSTRT,FHSTS Q
"RTN","FHORD71",52,0)
 I $P(FHSAV,"^",7)="" D CODE^FHWOR2 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORD71",53,0)
 K FHDAT,FHSTRT,FHSTS Q
"RTN","FHORD71",54,0)
U3 S FHO=$P(FHSAV,"^",2,6),VAL="" D VAL^FHWORP(FHO,.VAL) Q:VAL=""
"RTN","FHORD71",55,0)
 S FHMSG1=$S($P(FHSAV,"^",7)="N":"N",1:"D")_";"_ADM_";"_K_";"_$P(FHSAV,"^",9)_";"_$P(FHSAV,"^",10)_";"_$P(FHSAV,"^",7)_";"_$G(^FHPT(FHDFN,"A",ADM,"DI",K,1))_";"_$P(FHSAV,"^",8)_";;"_VAL
"RTN","FHORD71",56,0)
 I $D(FHORN1),FHORN1=FHORN S FHORR=1
"RTN","FHORD71",57,0)
 S FHDAT=""
"RTN","FHORD71",58,0)
 I $P(FHSAV,"^",7)="N" D CODE^FHWOR4 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG Q
"RTN","FHORD71",59,0)
 I $P(FHSAV,"^",7)="" D CODE^FHWOR2 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORD71",60,0)
 Q
"RTN","FHORD71",61,0)
FILE ; File Orders from Dietetics
"RTN","FHORD71",62,0)
 I FHLD="N" D NPO^FHWOR4 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG Q
"RTN","FHORD71",63,0)
 I FHLD="" D DO^FHWOR2 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORD71",64,0)
 Q
"RTN","FHORD71",65,0)
FHWF2 ; Perform if orders comes from OE/RR
"RTN","FHORD71",66,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",14)=$S(+FHORN:+FHORN,1:0)
"RTN","FHORD71",67,0)
 Q:FHLD="X"!(FHLD="P")
"RTN","FHORD71",68,0)
 Q:'FHORN  S VAL="" D VAL^FHWORP(FHOR,.VAL) Q:VAL=""
"RTN","FHORD71",69,0)
 S FILL=$S(FHLD="N":"N;",1:"D;")_ADM_";"_FHORD_";"_D1_";"_D2_";"_FHLD_";"_COM_";"_TYP_";"_D4_";"_VAL
"RTN","FHORD71",70,0)
 I FHLD="N" D SEND^FHWOR D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG Q
"RTN","FHORD71",71,0)
 I FHLD="" D SEND^FHWOR D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORD71",72,0)
 Q
"RTN","FHORD71",73,0)
WAIT ; Hold screen for OE/RR
"RTN","FHORD71",74,0)
 Q:$E(IOST,1)'="C"  R !!?5,"Press return to continue ",X:DTIME Q
"RTN","FHORD72")
0^201^B10206008
"RTN","FHORD72",1,0)
FHORD72 ; HISC/NCA - Diet Order Utilities (cont) ;12/4/00  10:36
"RTN","FHORD72",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD72",3,0)
ADD ; Add diet associated Standing Orders and Supplemental Feeding Menu
"RTN","FHORD72",4,0)
 S PDFLG=0 Q:'X1  I $D(FHYES) Q:FHYES
"RTN","FHORD72",5,0)
 N FHOR S FHOR=$P($G(^FHPT(FHDFN,"A",ADM,"DI",X1,0)),"^",2,6)
"RTN","FHORD72",6,0)
 S X3="" F NX=0:0 S NX=$O(^FHPT(FHDFN,"A",ADM,"AC",NX)) Q:NX<1!(NX'<A1)  S X3=$P(^(NX,0),"^",2)
"RTN","FHORD72",7,0)
 G:X3=X1 KIL G:X3="" A1
"RTN","FHORD72",8,0)
 I FHOR=$P($G(^FHPT(FHDFN,"A",ADM,"DI",X3,0)),"^",2,6) D IND
"RTN","FHORD72",9,0)
 K N,P S LN=0
"RTN","FHORD72",10,0)
 F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  S X=^FHPT(FHDFN,"A",ADM,"SP",K,0) I $P(X,"^",9)="Y" S M=$P(X,"^",3),M=$S(M="BNE":"A",1:$E(M,1)),N(M,K)=$P(X,"^",2,3)_"^"_$P(X,"^",8),LN=LN+1,P(LN,+N(M,K))=K_"^"_N(M,K)
"RTN","FHORD72",11,0)
 F LN=1:1 Q:'$D(P(LN))  F Z=0:0 S Z=$O(P(LN,Z)) Q:Z<1  S SP=+Z D EN3^FHSPED
"RTN","FHORD72",12,0)
A1 S DPAT=$O(^FH(111.1,"AB",FHOR,0)) G:'DPAT A2 S LS=""
"RTN","FHORD72",13,0)
 F M1="BS","NS","ES" F L=0:0 S L=$O(^FH(111.1,DPAT,M1,L)) Q:L<1  S X=$G(^(L,0)),SP=+$P(X,"^",1),MEAL=$E(M1,1),NUM=$S($P(X,"^",2):$P(X,"^",2),1:1)_"^Y" D SO
"RTN","FHORD72",14,0)
A2 S SF=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",7) G:'SF A3 S X=$G(^FHPT(FHDFN,"A",ADM,"SF",SF,0))
"RTN","FHORD72",15,0)
 I $P(X,"^",4)=1!($P(X,"^",34)'="Y") G A4
"RTN","FHORD72",16,0)
 D CAN^FHNO5
"RTN","FHORD72",17,0)
A3 G:'DPAT A4
"RTN","FHORD72",18,0)
 S NM=$P($G(^FH(111.1,DPAT,0)),"^",8) G:'NM A4
"RTN","FHORD72",19,0)
 S PNO=$G(^FH(118.1,NM,1)) G:PNO="" A4
"RTN","FHORD72",20,0)
 S PNN="^"_NOW_"^"_DUZ_"^"_NM_"^"_PNO,NO="" D SF
"RTN","FHORD72",21,0)
A4 D UPD^FHMTK7
"RTN","FHORD72",22,0)
KIL K COM,DPAT,EVT,FP,L,LN,LP,LS,M,M1,M2,MEAL,N,NM,NO,NUM,NX,OPAT,P,PP,PNN,PNO,R1,SF,SP,X3,^TMP($J),Z
"RTN","FHORD72",23,0)
 Q
"RTN","FHORD72",24,0)
SO ; Add Standing Order
"RTN","FHORD72",25,0)
 L +^FHPT(FHDFN,"A",ADM,"SP",0)
"RTN","FHORD72",26,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"SP",0)) S ^FHPT(FHDFN,"A",ADM,"SP",0)="^115.08^^"
"RTN","FHORD72",27,0)
 S X=^FHPT(FHDFN,"A",ADM,"SP",0),NO=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_NO_"^"_($P(X,"^",4)+1)
"RTN","FHORD72",28,0)
 L -^FHPT(FHDFN,"A",ADM,"SP",0) I $D(^FHPT(FHDFN,"A",ADM,"SP",NO)) G SO
"RTN","FHORD72",29,0)
 S ^FHPT(FHDFN,"A",ADM,"SP",NO,0)=NO_"^"_SP_"^"_MEAL_"^"_NOW_"^"_DUZ_"^^^"_NUM,^FHPT("ASP",FHDFN,ADM,NO)="",LS=LS_NO_","
"RTN","FHORD72",30,0)
 S EVT="S^O^"_NO D ^FHORX Q
"RTN","FHORD72",31,0)
SF ; Add Supplemental Feeding
"RTN","FHORD72",32,0)
 L +^FHPT(FHDFN,"A",ADM,"SF",0)
"RTN","FHORD72",33,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"SF",0)) S ^FHPT(FHDFN,"A",ADM,"SF",0)="^115.07^^"
"RTN","FHORD72",34,0)
 S X=^FHPT(FHDFN,"A",ADM,"SF",0),NO=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_NO_"^"_($P(X,"^",4)+1)
"RTN","FHORD72",35,0)
 L -^FHPT(FHDFN,"A",ADM,"SF",0) I $D(^FHPT(FHDFN,"A",ADM,"SF",NO)) G SF
"RTN","FHORD72",36,0)
 S ^FHPT(FHDFN,"A",ADM,"SF",NO,0)=NO_"^"_$P(PNN,"^",2,99)
"RTN","FHORD72",37,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",7)=NO
"RTN","FHORD72",38,0)
 I NO'="" S EVT="F^O^"_NO D ^FHORX  ;file event, P30
"RTN","FHORD72",39,0)
UPD S:NO $P(^FHPT(FHDFN,"A",ADM,"SF",NO,0),"^",30,31)=NOW_"^"_DUZ
"RTN","FHORD72",40,0)
 S:NO $P(^FHPT(FHDFN,"A",ADM,"SF",NO,0),"^",34)="Y" Q
"RTN","FHORD72",41,0)
IND ; Restore Individual Pattern
"RTN","FHORD72",42,0)
 Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",X3,2))
"RTN","FHORD72",43,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",X1,2)=$G(^FHPT(FHDFN,"A",ADM,"DI",X3,2))
"RTN","FHORD72",44,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DI",X1,3),"^",1,2)=DUZ_"^"_NOW
"RTN","FHORD72",45,0)
 I $P(^FHPT(FHDFN,"A",ADM,"DI",X3,0),"^",13) S $P(^FHPT(FHDFN,"A",ADM,"DI",X1,0),"^",13)=$P(^FHPT(FHDFN,"A",ADM,"DI",X3,0),"^",13),PDFLG=1
"RTN","FHORD72",46,0)
 Q
"RTN","FHORD8")
0^202^B8127031
"RTN","FHORD8",1,0)
FHORD8 ; HISC/REL/NCA - Diet Order Lists ;4/24/95  09:15
"RTN","FHORD8",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD8",3,0)
 W @IOF,!!?20,"NUTRITION LOCATION DIET ORDER LISTS",!!
"RTN","FHORD8",4,0)
D0 R !!,"Select by C=COMMUNICATION OFFICE or L=LOCATION: ",FHXX:DTIME G:'$T!("^"[FHXX) KIL I "cl"[FHXX S X=FHXX D TR^FH S FHXX=X
"RTN","FHORD8",5,0)
 I FHXX'?1U!("CL"'[FHXX) W *7," Enter C or L" G D0
"RTN","FHORD8",6,0)
 I FHXX="C" G D2
"RTN","FHORD8",7,0)
F1 R !!,"Select LOCATION (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S WRD=0
"RTN","FHORD8",8,0)
 E  K DIC S DIC="^FH(119.6,",DIC(0)="EQM" D ^DIC G:Y<1 F1 S WRD=+Y
"RTN","FHORD8",9,0)
 G S0
"RTN","FHORD8",10,0)
D2 R !!,"Select COMMUNICATION OFFICE (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S WRD=0
"RTN","FHORD8",11,0)
 E  K DIC S DIC="^FH(119.73,",DIC(0)="EMQ" D ^DIC G:Y<1 D2 S WRD=+Y
"RTN","FHORD8",12,0)
S0 R !!,"Sort Patients: (A=Alphabetically  R=Room-Bed) R// ",SRT:DTIME G:'$T!(SRT["^") KIL S:SRT="" SRT="R" I "ar"[SRT S X=SRT D TR^FH S SRT=X
"RTN","FHORD8",13,0)
 I SRT'?1U!("AR"'[SRT) W *7," Enter A or R" G S0
"RTN","FHORD8",14,0)
S1 R !!,"Select Type of Service (T, C, D or ALL): ALL// ",SER:DTIME G:'$T!(SER["^") KIL S:SER="" SER="A" S X=SER D TR^FH S SER=X
"RTN","FHORD8",15,0)
 I $P("TRAY",SER,1)'="",$P("CAFETERIA",SER,1)'="",$P("DINING ROOM",SER,1)'="",$P("ALL",SER,1)'="" W *7,!," Enter T for Tray, C for Cafeteria, D for Dining Room, or A for All" G S1
"RTN","FHORD8",16,0)
 S SER=$E(SER,1)
"RTN","FHORD8",17,0)
L0 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORD8",18,0)
 I $D(IO("Q")) S FHPGM="^FHORD81",FHLST="FHXX^WRD^SRT^SER" D EN2^FH G KIL:'WRD,D0
"RTN","FHORD8",19,0)
 U IO D ^FHORD81 D ^%ZISC K %ZIS,IOP G KIL:'WRD,D0
"RTN","FHORD8",20,0)
KIL ; Final variable kill
"RTN","FHORD8",21,0)
 K ^TMP($J),^TMP("FH",$J),%,%H,%I,%T,A1,ADM,ALG,BAG,BID,C,CAL,COM,CT,D3,DAS,DFN,DIC,DTE,DTP,FHA1,FHDFN,FHDU,FHLD,FHLST,FHOR,FHORD,FHPGM,I,IOP,J,K,K1,K2,K3,KK,L,L1,LEN,LL,LST,MEAL,N,NM,NOW
"RTN","FHORD8",22,0)
 K NX,NXW,OLD,OLN,P,POP,P0,P1,P2,P3,PG,PID,Q,QTY,REC,RM,SER,SRT,TF,TF2,TIM,TP,TU,TUN,TW,WRD,WRDN,WRDS,W1,WW,X,X0,X1,X2,X3,X5,FHXX,XX,XY,XZ,Y,YY,Z,Z1,Z5,ZZ Q
"RTN","FHORD81")
0^203^B37481758
"RTN","FHORD81",1,0)
FHORD81 ; HISC/REL/NCA - Diet Order Lists (cont) ;11/30/00  13:55
"RTN","FHORD81",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD81",3,0)
 K C,^TMP("FH",$J) F L=0:0 S L=$O(^FH(118,L)) Q:L<1  I '$D(^FH(118,L,"I")) S C(L)=$P(^(0),"^",1)
"RTN","FHORD81",4,0)
 D NOW^%DTC S NOW=%,DT=NOW\1,X1=DT,X2=-14 D C^%DTC S OLN=+X S X1=NOW,X2=-3 D C^%DTC S OLD=+X
"RTN","FHORD81",5,0)
 S X1=DT,X2=2 D C^%DTC S K3=+X
"RTN","FHORD81",6,0)
 F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  S X=^(W1,0) D F0
"RTN","FHORD81",7,0)
 S (PG,REC)=0,NXW="" F  S NXW=$O(^TMP("FH",$J,NXW)) Q:NXW=""  F W1=0:0 S W1=$O(^TMP("FH",$J,NXW,W1)) Q:W1<1  D F2
"RTN","FHORD81",8,0)
 ;
"RTN","FHORD81",9,0)
OUTP ;Outpatient data
"RTN","FHORD81",10,0)
 D GETOUT^FHOMRBL1
"RTN","FHORD81",11,0)
 S (ADM,DTP,FHPTSA,RM,FHLSAV,FHI)=""
"RTN","FHORD81",12,0)
 F  S FHI=$O(^TMP($J,"FH",FHI)) Q:FHI=""  D
"RTN","FHORD81",13,0)
 .S FHJ="" F  S FHJ=$O(^TMP($J,"FH",FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORD81",14,0)
 ..S FHPTSA=FHJ
"RTN","FHORD81",15,0)
 ..F FHK=0:0 S FHK=$O(^TMP($J,"FH",FHI,FHJ,FHK)) Q:FHK'>0  D
"RTN","FHORD81",16,0)
 ...S FHDAT=""
"RTN","FHORD81",17,0)
 ...S FHL=$O(^TMP($J,"FH",FHI,FHJ,FHK,0))
"RTN","FHORD81",18,0)
 ...I $G(FHL) D REC Q
"RTN","FHORD81",19,0)
 ...D PROC
"RTN","FHORD81",20,0)
 W ! Q
"RTN","FHORD81",21,0)
 ;
"RTN","FHORD81",22,0)
PROC ;process/print
"RTN","FHORD81",23,0)
 S FHPLD=0
"RTN","FHORD81",24,0)
 S:FHDAT="" FHDAT=^TMP($J,"FH",FHI,FHJ,FHK)
"RTN","FHORD81",25,0)
 S FHCAT=$P(FHDAT,U,1)
"RTN","FHORD81",26,0)
 S FHDFN=$P(FHDAT,U,2)
"RTN","FHORD81",27,0)
 S FHDIE=$P(FHDAT,U,3)
"RTN","FHORD81",28,0)
 S FHSTA=$P(FHDAT,U,4)
"RTN","FHORD81",29,0)
 S FHMEAL=$P(FHDAT,U,5)
"RTN","FHORD81",30,0)
 S FHLOC=$P(FHDAT,U,6)
"RTN","FHORD81",31,0)
 S (FHSERT,FHSERC,FHSERD,FHSER)=""
"RTN","FHORD81",32,0)
 I $G(FHLOC),$D(^FH(119.6,FHLOC,0)) D
"RTN","FHORD81",33,0)
 .S:$P(^FH(119.6,FHLOC,0),U,5) FHSERT="T"
"RTN","FHORD81",34,0)
 .S:$P(^FH(119.6,FHLOC,0),U,6) FHSERC="C"
"RTN","FHORD81",35,0)
 .S:$P(^FH(119.6,FHLOC,0),U,7) FHSERD="D"
"RTN","FHORD81",36,0)
 .S FHSER=FHSERT_FHSERC_FHSERD
"RTN","FHORD81",37,0)
 I (FHXX="C"),(WRD>0),(WRD'=FHSTA) Q
"RTN","FHORD81",38,0)
 I (FHXX="L"),(WRD>0),(WRD'=FHLOC) Q
"RTN","FHORD81",39,0)
 I (SER'="A"),(FHSER'[SER) Q
"RTN","FHORD81",40,0)
 I FHI'=FHLSAV S FHLSAV=FHI,WRDN=$E(FHI,3,$L(FHI)) D HDR
"RTN","FHORD81",41,0)
 S FHDIET=""
"RTN","FHORD81",42,0)
 D PATNAME^FHOMUTL
"RTN","FHORD81",43,0)
 I FHLSAV'=FHI S FHLSAV=FHI D HDR
"RTN","FHORD81",44,0)
 W !!,?13,$E($P(FHJ,"^",1),1,24),?38,FHBID,?67,FHSER
"RTN","FHORD81",45,0)
 I $Y>(IOSL-6) D HDR
"RTN","FHORD81",46,0)
 I $D(^FH(111,FHDIE,0)) S FHDIET=$P(^FH(111,FHDIE,0),U,7)
"RTN","FHORD81",47,0)
 S FHTYP=$S(FHCAT="OP":"Recurring",FHCAT="GM":"Guest",FHCAT="SM":"Special",1:"")
"RTN","FHORD81",48,0)
 S DTP=FHK D DTP^FH
"RTN","FHORD81",49,0)
 W !,?14,"Diet Order: ",FHDIET,?40,"Meal: ","(",FHMEAL,")"
"RTN","FHORD81",50,0)
 W !,?14,"Service Type: ",FHTYP,?40,"Date: ",DTP
"RTN","FHORD81",51,0)
 S FHDAIN=$O(^FHPT(FHDFN,""_FHCAT_"","B",FHK,0))
"RTN","FHORD81",52,0)
 I $G(FHDAIN),$D(^FHPT(FHDFN,""_FHCAT_"",FHDAIN,"TF")) D OUTF
"RTN","FHORD81",53,0)
 S FHPLD=1
"RTN","FHORD81",54,0)
 D:'$G(FHL) ^FHORD83
"RTN","FHORD81",55,0)
 Q
"RTN","FHORD81",56,0)
 ;
"RTN","FHORD81",57,0)
REC ;set/get recurring data
"RTN","FHORD81",58,0)
 F FHL=0:0 S FHL=$O(^TMP($J,"FH",FHI,FHJ,FHK,FHL)) Q:FHL'>0  D
"RTN","FHORD81",59,0)
 .S FHDAT=^TMP($J,"FH",FHI,FHJ,FHK,FHL)
"RTN","FHORD81",60,0)
 .D PROC
"RTN","FHORD81",61,0)
 D:$G(FHPLD) ^FHORD83
"RTN","FHORD81",62,0)
 Q
"RTN","FHORD81",63,0)
 ;
"RTN","FHORD81",64,0)
OUTF ;outpatient TF
"RTN","FHORD81",65,0)
 S REC=1
"RTN","FHORD81",66,0)
 S (FHTFPR,FHTFQU,FHTFST,FHTFCOM,FHTFTC,FHTFKD,FHTFCN)=""
"RTN","FHORD81",67,0)
 I $G(FHDAIN),$D(^FHPT(FHDFN,"OP",FHDAIN,3)) D
"RTN","FHORD81",68,0)
 .S FHRDAT3=$G(^FHPT(FHDFN,"OP",FHDAIN,3))
"RTN","FHORD81",69,0)
 .S FHTFCOM=$P(FHRDAT3,U,1)
"RTN","FHORD81",70,0)
 .S FHTFTC=$P(FHRDAT3,U,2)
"RTN","FHORD81",71,0)
 .S FHTFTKD=$P(FHRDAT3,U,3)
"RTN","FHORD81",72,0)
 .S FHTFCN=$P(FHRDAT3,U,5)
"RTN","FHORD81",73,0)
 .S:FHTFCN="C" FHTFCN="Cancelled"
"RTN","FHORD81",74,0)
 F FHTFDA=0:0 S FHTFDA=$O(^FHPT(FHDFN,"OP",FHDAIN,"TF",FHTFDA)) Q:FHTFDA'>0  D
"RTN","FHORD81",75,0)
 .S FHTFDAT=$G(^FHPT(FHDFN,"OP",FHDAIN,"TF",FHTFDA,0))
"RTN","FHORD81",76,0)
 .S FHTFPR=$P(FHTFDAT,U,1)
"RTN","FHORD81",77,0)
 .I $G(FHTFPR),$D(^FH(118.2,FHTFPR,0)) S FHTFPR=$P(^FH(118.2,FHTFPR,0),U,1)
"RTN","FHORD81",78,0)
 .S FHTFST=$P(FHTFDAT,U,2)
"RTN","FHORD81",79,0)
 .S:$G(FHTFST) FHTFST=$S(FHTFST=1:"1/4",FHTFST=2:"1/2",FHTFST=3:"3/4",FHTFST=4:"FULL",1:"")
"RTN","FHORD81",80,0)
 .S FHTFQU=$P(FHTFDAT,U,3)
"RTN","FHORD81",81,0)
 .S FHTFCC=$P(FHTFDAT,U,4)
"RTN","FHORD81",82,0)
 .;I FHAOT'="" S ZZ="  Additional Order: "_FHAOT_" "_FHAOCN_" By: "_FHAOC D LNE^FHORD82
"RTN","FHORD81",83,0)
 .;I FHELTT'="" S ZZ="  Early/Late Tray Time: "_FHELTT_"  Bag Meal: "_FHELTBM D LNE^FHOR82
"RTN","FHORD81",84,0)
 .I $Y>(IOSL-6) D LNE^FHORD82
"RTN","FHORD81",85,0)
 .W !,?5,"Tubefeed.:"
"RTN","FHORD81",86,0)
 .S ZZ=FHTFCOM_"  TF Total CCs: "_FHTFTC_"  TF Total KCALS/Day: "_FHTFTKD_" "_FHTFCN W ZZ
"RTN","FHORD81",87,0)
 .I FHTFPR'="" D
"RTN","FHORD81",88,0)
 ..I $Y>(IOSL-6) D LNE^FHORD82
"RTN","FHORD81",89,0)
 ..W !,?5
"RTN","FHORD81",90,0)
 ..S ZZ="TF Product: "_FHTFPR_"  TF Strength: "_FHTFST_"  TF Quantity: "_FHTFQU
"RTN","FHORD81",91,0)
 ..W ZZ
"RTN","FHORD81",92,0)
 ..I $Y>(IOSL-6) D LNE^FHORD82
"RTN","FHORD81",93,0)
 ..W !,?5
"RTN","FHORD81",94,0)
 ..S ZZ="TF Product CC/Day: "_FHTFCC_" "_FHTFCN
"RTN","FHORD81",95,0)
 ..W ZZ
"RTN","FHORD81",96,0)
 Q
"RTN","FHORD81",97,0)
F0 ;
"RTN","FHORD81",98,0)
 I $P(X,U,3)="O" Q
"RTN","FHORD81",99,0)
 I FHXX="C" S K1=$P(X,"^",8) I WRD,K1'=WRD Q
"RTN","FHORD81",100,0)
 I FHXX="L" S K1=$P(X,"^",1) I WRD,W1'=WRD Q
"RTN","FHORD81",101,0)
 S K1=$S(FHXX="W":"",K1<1:99,K1<10:"0"_K1,1:K1),P0=$P(X,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHORD81",102,0)
 S WRDN=$P(^FH(119.6,W1,0),"^",1),^TMP("FH",$J,K1_P0_$E(WRDN,1,26),W1)="" Q
"RTN","FHORD81",103,0)
F2 S WRDN=$P(^FH(119.6,W1,0),"^",1)
"RTN","FHORD81",104,0)
 K ^TMP($J) F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  S ADM=^(FHDFN) D RM
"RTN","FHORD81",105,0)
 Q:'$D(^TMP($J))  S NX="" D HDR
"RTN","FHORD81",106,0)
L2 S NX=$O(^TMP($J,NX)) I NX="" W ! Q
"RTN","FHORD81",107,0)
 S FHDFN=""
"RTN","FHORD81",108,0)
L3 ; Get Next Patient data
"RTN","FHORD81",109,0)
 S FHDFN=$O(^TMP($J,NX,FHDFN)) G:FHDFN="" L2 S ADM=^(FHDFN)
"RTN","FHORD81",110,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORD81",111,0)
 G:ADM<1 L3 S Y(0)=^DPT(DFN,0) G:'$D(^DGPM(ADM,0)) L3
"RTN","FHORD81",112,0)
 G:'$D(^FHPT(FHDFN,"A",ADM,0)) L3 S LEN=0 D CUR^FHORD7 S MEAL=Y,X0=^FHPT(FHDFN,"A",ADM,0) S:$L(MEAL)>48 LEN=$L($E(MEAL,1,48),",")
"RTN","FHORD81",113,0)
 I SER'="A",$P(X0,"^",5)'=SER G L3
"RTN","FHORD81",114,0)
 D:$Y>(IOSL-6) HDR S DTP=$P(^DGPM(ADM,0),"^",1) D DTP^FH
"RTN","FHORD81",115,0)
 S RM=$S(SRT="R":NX,$D(^DPT(DFN,.101)):^(.101),1:"") D PID^FHDPA
"RTN","FHORD81",116,0)
 W !!,RM,?13,$E($P(Y(0),"^",1),1,24),?38,BID,?47,DTP
"RTN","FHORD81",117,0)
 S Y=$P(X0,"^",5) I Y'="" W ?67,Y
"RTN","FHORD81",118,0)
 D GET I Y'="" W !?13,"Nut. Status: ",Y S X=+X5 D DT W ?72,X
"RTN","FHORD81",119,0)
 D ALG^FHCLN I ALG'="" W !?13,"Allergies: " S ZZ=ALG D LNE^FHORD82
"RTN","FHORD81",120,0)
 I "NO ORDER"'[MEAL!'$P(X0,"^",4) W !?13,"Diet Order: ",$S(LEN:$P(MEAL,",",1,LEN-1)_",",1:MEAL)
"RTN","FHORD81",121,0)
 I  I FHORD S X=$P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",9) D DT W ?72,X D:FHLD'="" NPO W:LEN !?24,$P(MEAL,",",LEN,999) D COM
"RTN","FHORD81",122,0)
 G ^FHORD82
"RTN","FHORD81",123,0)
GET S Y="",X5=$O(^FHPT(FHDFN,"S",0)) Q:X5=""  S X5=^(X5,0)
"RTN","FHORD81",124,0)
 Q:$P(X5,"^",1)<$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",1)
"RTN","FHORD81",125,0)
 S Y=$P($G(^FH(115.4,+$P(X5,"^",2),0)),"^",2) Q
"RTN","FHORD81",126,0)
NPO S LST=0 F K1=0:0 S K1=$O(^FHPT(FHDFN,"A",ADM,"AC",K1)) Q:K1<1!(K1>NOW)  I $P(^(K1,0),"^",2)=FHORD S LST=K1
"RTN","FHORD81",127,0)
 W:LST<OLD "*" Q
"RTN","FHORD81",128,0)
COM ; List comment if any
"RTN","FHORD81",129,0)
 S COM=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) Q:COM=""  I $L(COM)<51 W !?16,COM Q
"RTN","FHORD81",130,0)
 F LEN=51:-1:1 Q:$E(COM,LEN)=" "
"RTN","FHORD81",131,0)
 W !?16,$E(COM,1,LEN-1) S COM=$E(COM,LEN+1,999)
"RTN","FHORD81",132,0)
 W:COM'="" !?19,COM Q
"RTN","FHORD81",133,0)
DT S X=$J(+$E(X,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(X,4,5)) Q
"RTN","FHORD81",134,0)
RM ;
"RTN","FHORD81",135,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORD81",136,0)
 I SRT="R" S RM=$G(^DPT(DFN,.101))
"RTN","FHORD81",137,0)
 E  S RM=$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHORD81",138,0)
 S:RM="" RM=" " S ^TMP($J,RM,FHDFN)=ADM Q
"RTN","FHORD81",139,0)
HDR ;W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=NOW D DTP^FH
"RTN","FHORD81",140,0)
 W @IOF S PG=PG+1,DTP=NOW D DTP^FH
"RTN","FHORD81",141,0)
 W !,DTP,?(67-$L(WRDN)\2),WRDN," DIET ORDERS",?72,"Page ",PG
"RTN","FHORD81",142,0)
 I SER'="A" S X=$S(SER="T":"TRAY",SER="C":"CAFETERIA",1:"DINING ROOM")_" Service Only" W !!?(79-$L(X)\2),X
"RTN","FHORD81",143,0)
 W !!,"Room",?13,"Patient",?39,"ID#",?48,"Admission Date",?66,"Svc",?71,"Ord Date" Q
"RTN","FHORD82")
0^204^B13838420
"RTN","FHORD82",1,0)
FHORD82 ; HISC/REL/NCA - Diet Order Lists (cont) ;3/25/96  08:36
"RTN","FHORD82",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD82",3,0)
 S TF=$P(X0,"^",4) G:'TF L4
"RTN","FHORD82",4,0)
 S Y=^FHPT(FHDFN,"A",ADM,"TF",TF,0),X=$P(Y,"^",1),COM=$P(Y,"^",5),CAL=$P(Y,"^",7)
"RTN","FHORD82",5,0)
 W !,?13,"Tubefeed.: " S ZZ="" D DT S DTE=X
"RTN","FHORD82",6,0)
 F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S X3=$G(^(TF2,0)),TUN=+X3,XX=$G(^FH(118.2,TUN,0)),TUN=$P(XX,"^",1) D CALC S:ZZ'="" ZZ=ZZ_", " S ZZ=ZZ_P2_" "_TUN
"RTN","FHORD82",7,0)
 S ZZ=ZZ_", "_CAL_" Kcal/Day"
"RTN","FHORD82",8,0)
 S REC=1 D LNE
"RTN","FHORD82",9,0)
L3 W:COM'="" !?15,COM,!
"RTN","FHORD82",10,0)
L4 F K1=DT-.00001:0 S K1=$O(^FHPT(FHDFN,"A",ADM,"EL",K1)) Q:K1<1!(K1\1>K3)  S Y=^(K1,0) D EL
"RTN","FHORD82",11,0)
 D DISP^FHORD83
"RTN","FHORD82",12,0)
 K N F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  S X=^FHPT(FHDFN,"A",ADM,"SP",K,0),M=$P(X,"^",3),M=$S(M="BNE":"A",1:$E(M,1)),N(M,K)=$P(X,"^",2,4),$P(N(M,K),"^",4,5)=$P(X,"^",8,9)
"RTN","FHORD82",13,0)
 W !
"RTN","FHORD82",14,0)
 F M="A","B","N","E" F K=0:0 S K=$O(N(M,K)) Q:K<1  S Z=+N(M,K) I Z D
"RTN","FHORD82",15,0)
 .I ($Y>(IOSL-6)) D HDR^FHORD81,FLNE
"RTN","FHORD82",16,0)
 .D SP S QTY=$P(N(M,K),"^",4)
"RTN","FHORD82",17,0)
 .W !?13,"Stng. Order: ",M2,?38,$S(QTY:QTY,1:1)," ",$P($G(^FH(118.3,Z,0)),"^",1),$S($P(N(M,K),"^",5)'="Y":" (I)",1:"")
"RTN","FHORD82",18,0)
 .S X=$P(N(M,K),"^",3) D DT W ?72,X Q
"RTN","FHORD82",19,0)
 K L,N,M,M1,M2 S NM=$P(X0,"^",7) G:'NM L3^FHORD81 S Y=^FHPT(FHDFN,"A",ADM,"SF",NM,0)
"RTN","FHORD82",20,0)
 S L=4 F K1=1:1:3 S K=0,N(K1)="" F K2=1:1:4 S Z=$P(Y,U,L+1),Q=$P(Y,U,L+2),L=L+2 I Z'="" S:'Q Q=1 S:N(K1)'="" N(K1)=N(K1)_"; " S N(K1)=N(K1)_Q_" "_$S($D(C(Z)):C(Z),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:" ")
"RTN","FHORD82",21,0)
 S LST=$P(Y,"^",30)\1,X=LST,P1=0 D DT S:LST<OLN X=X_"*"
"RTN","FHORD82",22,0)
 F K1=1:1:3 I N(K1)'="" W !?13,$P("10AM; 2PM; 8PM",";",K1),?19,$E(N(K1),1,52) I 'P1 S P1=1 W ?72,X
"RTN","FHORD82",23,0)
 G L3^FHORD81
"RTN","FHORD82",24,0)
SP S M1=$P(N(M,K),"^",2) I M1="BNE" S M2="All Meals" Q
"RTN","FHORD82",25,0)
 S L=$E(M1,1),M2=$S(L="B":"Break",L="N":"Noon",1:"Even")
"RTN","FHORD82",26,0)
 S L=$E(M1,2) Q:L=""  S M2=M2_","_$S(L="B":"Break",L="N":"Noon",1:"Even") Q
"RTN","FHORD82",27,0)
EL I ($Y>(IOSL-6)) D HDR^FHORD81,FLNE
"RTN","FHORD82",28,0)
 S MEAL=$P(Y,"^",2),TIM=$P(Y,"^",3),BAG=$P(Y,"^",4),DTP=K1\1 D DTP^FH
"RTN","FHORD82",29,0)
 W !?13,"Early/Late Tray: ",DTP,?39,$J(TIM,10),"   ",$S(MEAL="B":"Breakfast",MEAL="N":"Noon",1:"Evening") W:BAG="Y" ", Bagged Meal" Q
"RTN","FHORD82",30,0)
 Q
"RTN","FHORD82",31,0)
DT S X=$J(+$E(X,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(X,4,5)) Q
"RTN","FHORD82",32,0)
CALC ; Figure # of units for TF
"RTN","FHORD82",33,0)
 I $E($P(XX,"^",3),$L($P(XX,"^",3)))="G" D GRM Q
"RTN","FHORD82",34,0)
 S TU=$P(X3,"^",4)/$S(+$P(XX,"^",3):+$P(XX,"^",3),1:9999),TW=$P(X3,"^",5)
"RTN","FHORD82",35,0)
 I TW<6 S TU=TU+.75\1,P2=TU,P2=P2_" "_$S(P2>1:$P(XX,"^",2)_"S",1:$P(XX,"^",2)) Q
"RTN","FHORD82",36,0)
 S TU=TU+.2*4\1/4,P2=$S(TU<1:"",1:TU\1) I TU#1 S:P2 P2=P2_"-" S P3=TU#1,P2=P2_$S(P3<.3:"1/4",P3<.6:"1/2",1:"3/4")
"RTN","FHORD82",37,0)
 S P2=P2_" "_$S(P2>1:$P(XX,"^",2)_"S",1:$P(XX,"^",2))
"RTN","FHORD82",38,0)
 Q
"RTN","FHORD82",39,0)
GRM S X=$P(X3,"^",3) D FIX^FHORT10 S Z5="" F LL=1:1:$L(X) I $E(X,LL)'=" " S Z5=Z5_$E(X,LL)
"RTN","FHORD82",40,0)
 S Z5=$P(Z5,"/",2),Z5=$P(Z5,"X",2)
"RTN","FHORD82",41,0)
 I 'Z5 S Z5=$P("1,24,2,3,12,8,6,4",",",K) G G1
"RTN","FHORD82",42,0)
 I Z5'["F" S Z5=$S(K=1:1,K=2:Z5,K=3:2,K=4:3,K=5:Z5\2,K=6:Z5\3,K=7:Z5\4,1:Z5\6)
"RTN","FHORD82",43,0)
 E  S:K=1 Z5=1
"RTN","FHORD82",44,0)
G1 S TU=+$P(X3,"^",3)*Z5
"RTN","FHORD82",45,0)
 S TU=TU/$S(+$P(XX,"^",3):+$P(XX,"^",3),1:9999)
"RTN","FHORD82",46,0)
 S P2=$S(TU<1:"",1:TU\1) I P2="" S TU=TU+.95\1,P2=TU
"RTN","FHORD82",47,0)
 I TU#1 S:P2 P2=P2_"-" S TU=TU#1,P2=P2_$S(TU<.3:"1/4",TU<.6:"1/2",1:"3/4")
"RTN","FHORD82",48,0)
 S P2=P2_" "_$S(P2>1:$P(XX,"^",2)_"S",1:$P(XX,"^",2))
"RTN","FHORD82",49,0)
 Q
"RTN","FHORD82",50,0)
LNE ; Break Line if longer than 45 chars
"RTN","FHORD82",51,0)
 I $L(ZZ)<46 D  Q
"RTN","FHORD82",52,0)
 .W ZZ
"RTN","FHORD82",53,0)
 .I REC W ?72,DTE S REC=0
"RTN","FHORD82",54,0)
 .Q
"RTN","FHORD82",55,0)
 ;F L=47:-1:1 Q:$E(ZZ,L-1,L)=", "
"RTN","FHORD82",56,0)
 F L=47:-1:1 Q:$E(ZZ,L)=" "!($E(ZZ,L)=",")
"RTN","FHORD82",57,0)
 W $E(ZZ,1,L-1) I REC W ?72,DTE S REC=0
"RTN","FHORD82",58,0)
 S ZZ=$E(ZZ,L+1,999)
"RTN","FHORD82",59,0)
 Q:ZZ=""  W !?24
"RTN","FHORD82",60,0)
 G LNE
"RTN","FHORD82",61,0)
FLNE I '$G(ADM)!'$G(DFN) Q
"RTN","FHORD82",62,0)
 S DTP=$P(^DGPM(ADM,0),"^",1) D DTP^FH
"RTN","FHORD82",63,0)
 W !!,RM,?13,$E($P($G(^DPT(DFN,0)),"^",1),1,24),?38,BID,?47,DTP
"RTN","FHORD82",64,0)
 I $P($G(^FHPT(FHDFN,"A",ADM,0)),"^",5)'="" W ?67,$P(^FHPT(FHDFN,"A",ADM,0),"^",5)
"RTN","FHORD82",65,0)
 Q
"RTN","FHORD83")
0^205^B5249988
"RTN","FHORD83",1,0)
FHORD83 ; HISC/REL/NCA/JH - Diet Order Lists (cont.) ;7/31/96  11:37
"RTN","FHORD83",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD83",3,0)
DISP ; Display Patient Food Preference
"RTN","FHORD83",4,0)
 I ($Y>(IOSL-6)) D HDR^FHORD81,FLNE^FHORD82
"RTN","FHORD83",5,0)
 W !!?26,"Likes",?58,"DisLikes",!!
"RTN","FHORD83",6,0)
 K P S P1=1 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D FP
"RTN","FHORD83",7,0)
 S (M,MM)="" F  S M=$O(P(M)) Q:M=""  D  S MM=M
"RTN","FHORD83",8,0)
 .I $D(P(M)) D
"RTN","FHORD83",9,0)
 ..I ($Y>(IOSL-6)) D HDR^FHORD81,FLNE^FHORD82 W !!?26,"Likes",?58,"Dislikes",!!
"RTN","FHORD83",10,0)
 ..W ?13,$P(M,"~",2) S (P1,P2)=0 F  S:P1'="" P1=$O(P(M,"L",P1)) S X1=$S(P1'="":P(M,"L",P1),1:"") S:P2'="" P2=$O(P(M,"D",P2)) S X2=$S(P2'="":P(M,"D",P2),1:"") Q:P1=""&(P2="")  D P0 W:MM'=M !
"RTN","FHORD83",11,0)
 ..Q
"RTN","FHORD83",12,0)
 .Q
"RTN","FHORD83",13,0)
 I $O(P(""))="" W !?13,"No Food Preferences on file",!
"RTN","FHORD83",14,0)
 Q
"RTN","FHORD83",15,0)
P0 I X1'="" W ?25 S X=X1 D P1 S X1=X
"RTN","FHORD83",16,0)
 I X2'="" W ?52 S X=X2 D P1 S X2=X
"RTN","FHORD83",17,0)
 Q:X1=""&(X2="")  W ! G P0
"RTN","FHORD83",18,0)
P1 I $L(X)<27 W X S X="" Q
"RTN","FHORD83",19,0)
 F KK=28:-1:1 Q:$E(X,KK-1,KK)=", "
"RTN","FHORD83",20,0)
 I KK=1 S KK=26 W $E(X,1,KK) S X=$E(X,KK+1,999) Q
"RTN","FHORD83",21,0)
 I $Y>(IOSL-6) D HDR^FHORD81
"RTN","FHORD83",22,0)
 W $E(X,1,KK-2) S X=$E(X,KK+1,999) Q
"RTN","FHORD83",23,0)
FP Q:'$P(X,U)  S M1=$P(X,"^",2) Q:M1=""  S:M1="A" M1="BNE" S Z=$G(^FH(115.2,+X,0)) Q:$P(Z,U)=""!($P(Z,U,2)="")  S L1=$P(Z,"^",1),KK=$P(Z,"^",2),M="",DAS=$P(X,"^",4)
"RTN","FHORD83",24,0)
 I KK="L" S Q=$P(X,"^",3),L1=$S(Q:Q,1:1)_" "_L1
"RTN","FHORD83",25,0)
 I M1="BNE" S M="1~All Meals" G FP1
"RTN","FHORD83",26,0)
 S Z1=$E(M1,1) I Z1'="" S M=$S(Z1="B":"2~Break",Z1="N":"3~Noon",1:"4~Even")
"RTN","FHORD83",27,0)
 S Z1=$E(M1,2) I Z1'="" S M=M_","_$S(Z1="B":"Break",Z1="N":"Noon",1:"Even")
"RTN","FHORD83",28,0)
FP1 S:'$D(P(M,KK,P1)) P(M,KK,P1)="" I $L(P(M,KK,P1))+$L(L1)<255 S P(M,KK,P1)=P(M,KK,P1)_$S(P(M,KK,P1)="":"",1:", ")_L1_$S(DAS="Y":" (D)",1:"")
"RTN","FHORD83",29,0)
 E  S:'$D(P(M,KK,K)) P(M,KK,K)="" S P(M,KK,K)=L1_$S(DAS="Y":" (D)",1:"") S P1=K
"RTN","FHORD83",30,0)
 Q
"RTN","FHORD9")
0^206^B39801171
"RTN","FHORD9",1,0)
FHORD9 ; HISC/REL/NCA/RVD - Diet Order Census ;7/1/94  14:24 
"RTN","FHORD9",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD9",3,0)
 ;
"RTN","FHORD9",4,0)
 ;RVD 2/17/04 -added Outpatient meals.
"RTN","FHORD9",5,0)
 ;
"RTN","FHORD9",6,0)
 D NOW^%DTC S DT=%\1 K %,^TMP($J)
"RTN","FHORD9",7,0)
 D DIV^FHOMUTL G:'$D(FHSITE) KIL
"RTN","FHORD9",8,0)
 S FHP=$O(^FH(119.71,0)) I FHP'<1,$O(^FH(119.71,FHP))<1 G F0
"RTN","FHORD9",9,0)
D0 R !!,"Select PRODUCTION FACILITY: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHORD9",10,0)
 K DIC S DIC="^FH(119.71,",DIC(0)="EMQ" D ^DIC G:Y<1 D0 S FHP=+Y
"RTN","FHORD9",11,0)
F0 R !!,"Effective Date/Time: ",X:DTIME G:'$T!("^"[X) KIL S %DT="ETSX" D ^%DT G:Y<1 F0 S TIM=Y
"RTN","FHORD9",12,0)
 I (TIM\1)<DT W *7,"  Cannot be before TODAY!" G F0
"RTN","FHORD9",13,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORD9",14,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORD9",FHLST="FHP^TIM^FHSITE^FHSITENM" D EN2^FH G KIL
"RTN","FHORD9",15,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORD9",16,0)
Q1 ; Calculate census
"RTN","FHORD9",17,0)
 K ^TMP($J) S CT=0 D NOW^%DTC S NOW=% K %,D,P
"RTN","FHORD9",18,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  S X=^(WRD,0) D
"RTN","FHORD9",19,0)
 .I '$G(FHSITE) D WRD
"RTN","FHORD9",20,0)
 .I ($G(FHSITE)),($P(X,U,8)=FHSITE) D WRD
"RTN","FHORD9",21,0)
 ;
"RTN","FHORD9",22,0)
 ;get outpatient data
"RTN","FHORD9",23,0)
 S:'$G(FHSITE) FHSITE=""
"RTN","FHORD9",24,0)
 S:'$D(FHSITENM) FHSITENM="CONSOLIDATED"
"RTN","FHORD9",25,0)
 D GETSM^FHOMRBLD(TIM,FHSITE,"","")
"RTN","FHORD9",26,0)
 D GETGM^FHOMRBL1(TIM,FHSITE,"","")
"RTN","FHORD9",27,0)
 S FHTIM=$P(TIM,".",1),FHTIM=FHTIM-.000001
"RTN","FHORD9",28,0)
 D GETRM^FHOMRBLD(FHTIM,FHSITE,"","")
"RTN","FHORD9",29,0)
 D PROSG   ;process recurring, special and guest meal from "OP" node
"RTN","FHORD9",30,0)
 G ^FHORD91
"RTN","FHORD9",31,0)
WRD ; Calculate census for ward
"RTN","FHORD9",32,0)
 K S S X1="" F D2=5,6 S N1=$P(X,"^",D2) Q:$G(^FH(119.72,+N1,"I"))="Y"  S N2=$P($G(^FH(119.72,+N1,0)),"^",3) I N2=FHP S S($E("TC",D2-4))=N1,D(N1)="",X1=X1_$E("TC",D2-4)
"RTN","FHORD9",33,0)
 Q:'$D(S)
"RTN","FHORD9",34,0)
 S:$L(X1)>1 X1=$E(X1,1) Q:'$D(S(X1))  S SP=S(X1)
"RTN","FHORD9",35,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",WRD,FHDFN)) I ADM>0 S K=SP D W3
"RTN","FHORD9",36,0)
 Q
"RTN","FHORD9",37,0)
W3 Q:'$D(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHORD9",38,0)
 S X0=^FHPT(FHDFN,"A",ADM,0)
"RTN","FHORD9",39,0)
 S FHORD=$P(X0,"^",2),X1=$P(X0,"^",3),TF=$P(X0,"^",4),N1=$P(X0,"^",5) S:N1="" N1="T"
"RTN","FHORD9",40,0)
 I FHORD<1 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",0)) G:A1=""!(A1>TIM) W4 D U1 G:'FHORD W4 S X1=""
"RTN","FHORD9",41,0)
 I X1>1,X1'>TIM D U1 G:'FHORD W4
"RTN","FHORD9",42,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) D U1 G:'FHORD W4
"RTN","FHORD9",43,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7),X1=$P(X,"^",8)
"RTN","FHORD9",44,0)
 S:X1="" X1=N1 S:X1="D" X1="T" Q:'$D(S(X1))  S K=S(X1) D CNT
"RTN","FHORD9",45,0)
 I FHLD="" S Z=$P(X,"^",13) S:Z="" FHLD="X" I Z S:'$D(P(Z,K)) P(Z,K)=0 S P(Z,K)=P(Z,K)+1 Q
"RTN","FHORD9",46,0)
 I FHLD="P" S:'$D(P(.8,K)) P(.8,K)=0 S P(.8,K)=P(.8,K)+1 Q
"RTN","FHORD9",47,0)
 I FHLD="N" D  Q
"RTN","FHORD9",48,0)
 .I TF="" S:'$D(P(.5,K)) P(.5,K)=0 S P(.5,K)=P(.5,K)+1 Q
"RTN","FHORD9",49,0)
 .S:'$D(P(.7,K)) P(.7,K)=0 S P(.7,K)=P(.7,K)+1 Q
"RTN","FHORD9",50,0)
 Q:'TF  S:'$D(P(.7,K)) P(.7,K)=0 S P(.7,K)=P(.7,K)+1 Q
"RTN","FHORD9",51,0)
W4 G:'TF CNT S:'$D(P(.7,K)) P(.7,K)=0 S P(.7,K)=P(.7,K)+1
"RTN","FHORD9",52,0)
CNT S:'$D(P(.6,K)) P(.6,K)=0 S P(.6,K)=P(.6,K)+1 Q
"RTN","FHORD9",53,0)
U1 S (A1,FHORD)=0 F K1=0:0 S K1=$O(^FHPT(FHDFN,"A",ADM,"AC",K1)) Q:K1<1!(K1>TIM)  S A1=K1
"RTN","FHORD9",54,0)
 Q:'A1  S X1=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2) G U2:X1<1,U2:'$D(^FHPT(FHDFN,"A",ADM,"DI",X1,0)) S FHORD=X1 Q
"RTN","FHORD9",55,0)
U2 S X1="",A1=0
"RTN","FHORD9",56,0)
U3 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) G:A1="" U1 S X2=$P(^(A1,0),"^",2)
"RTN","FHORD9",57,0)
 I X2<1 K ^FHPT(FHDFN,"A",ADM,"AC",A1) G U3
"RTN","FHORD9",58,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI",X2,0)) K ^FHPT(FHDFN,"A",ADM,"AC",A1) G U3
"RTN","FHORD9",59,0)
 G U3
"RTN","FHORD9",60,0)
PROSG ;process outpatient data from ^tmp($j global.
"RTN","FHORD9",61,0)
 S FHPLNM=""
"RTN","FHORD9",62,0)
 S:$G(FHSITE) FHPLNM=$P($G(^FH(119.73,FHSITE,0)),U,1)
"RTN","FHORD9",63,0)
REC ;for recurring meals
"RTN","FHORD9",64,0)
 S FHDT=TIM+.999999
"RTN","FHORD9",65,0)
 ;S FHTMPS=$NA(^TMP($J,"OP","R",FHPLNM))
"RTN","FHORD9",66,0)
 S FHTMPS="^TMP($J,""OP"",""R"")"
"RTN","FHORD9",67,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORD9",68,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHORD9",69,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>FHDT)  D
"RTN","FHORD9",70,0)
 ..S (FHRDAT,FHIJKDAT)=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHORD9",71,0)
 ..Q:$P(FHRDAT,U,19)="C"   ;quit if status is cancelled.
"RTN","FHORD9",72,0)
 ..S (FHPDIET,FHDIET,FHSER,FHLOC)="***"
"RTN","FHORD9",73,0)
 ..S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHORD9",74,0)
 ..S:$G(FHLOC) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,5)
"RTN","FHORD9",75,0)
 ..S:'$G(FHSER) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHORD9",76,0)
 ..S:'$G(FHSER) FHSER=$O(^FH(119.72,0))
"RTN","FHORD9",77,0)
 ..I $D(^FH(119.72,FHSER,0)),$P(^FH(119.72,FHSER,0),U,3)'=FHP Q
"RTN","FHORD9",78,0)
 ..I $G(FHSITE),$P($G(^FH(119.6,FHLOC,0)),U,8)'=FHSITE Q
"RTN","FHORD9",79,0)
 ..S FHDIET=$P($G(^FH(119.9,1,0)),U,2)
"RTN","FHORD9",80,0)
 ..S FHREIEN=$P(FHIJKDAT,U,1)
"RTN","FHORD9",81,0)
 ..S FHDIETN=$P(FHIJKDAT,U,3)
"RTN","FHORD9",82,0)
 ..S:$D(^FH(111,"B",FHDIETN)) FHDIET=$O(^FH(111,"B",FHDIETN,0))
"RTN","FHORD9",83,0)
 ..S:$D(^FH(111,FHDIET,0)) FHPDIET=$P(^FH(111,FHDIET,0),U,5)
"RTN","FHORD9",84,0)
 ..S:'$D(P(FHPDIET,FHSER)) P(FHPDIET,FHSER)=0
"RTN","FHORD9",85,0)
 ..S P(FHPDIET,FHSER)=P(FHPDIET,FHSER)+1
"RTN","FHORD9",86,0)
 ..S:'$D(P(.6,FHSER)) P(.6,FHSER)=0 S P(.6,FHSER)=P(.6,FHSER)+1
"RTN","FHORD9",87,0)
 ..;if tubefeeding, also count the TF data.
"RTN","FHORD9",88,0)
 ..I $D(^FHPT(FHREIEN,"OP",FHK,"TF")) D
"RTN","FHORD9",89,0)
 ...I '$D(P(.7,FHSER)) S P(.7,FHSER)=1
"RTN","FHORD9",90,0)
 ...E  S P(.7,FHSER)=P(.7,FHSER)+1
"RTN","FHORD9",91,0)
 ...S:'$D(P(.6,FHSER)) P(.6,FHSER)=0 S P(.6,FHSER)=P(.6,FHSER)+1
"RTN","FHORD9",92,0)
 ;
"RTN","FHORD9",93,0)
SPEC ;for special meals
"RTN","FHORD9",94,0)
 S FHTMPS="^TMP($J,""OP"",""S"")" I '$D(FHPLNM) S FHPLNM=""
"RTN","FHORD9",95,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORD9",96,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHORD9",97,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>FHDT)  D
"RTN","FHORD9",98,0)
 ..S (FHRDAT,FHIJKDAT)=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHORD9",99,0)
 ..S (FHPDIET,FHDIET,FHSER,FHLOC)="***"
"RTN","FHORD9",100,0)
 ..S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHORD9",101,0)
 ..S:$G(FHLOC) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,5)
"RTN","FHORD9",102,0)
 ..S:'$G(FHSER) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHORD9",103,0)
 ..S:'$G(FHSER) FHSER=$O(^FH(119.72,0))
"RTN","FHORD9",104,0)
 ..I $D(^FH(119.72,FHSER,0)),$P(^FH(119.72,FHSER,0),U,3)'=FHP Q
"RTN","FHORD9",105,0)
 ..I $G(FHSITE),$P($G(^FH(119.6,FHLOC,0)),U,8)'=FHSITE Q
"RTN","FHORD9",106,0)
 ..S FHDIET=$P($G(^FH(119.9,1,0)),U,2)
"RTN","FHORD9",107,0)
 ..S FHSTAT=$P(FHIJKDAT,U,3)
"RTN","FHORD9",108,0)
 ..Q:FHSTAT'="A"     ;quit if status is not Authorized
"RTN","FHORD9",109,0)
 ..S FHDIETN=$P(FHIJKDAT,U,4)
"RTN","FHORD9",110,0)
 ..S:$D(^FH(111,"B",FHDIETN)) FHDIET=$O(^FH(111,"B",FHDIETN,0))
"RTN","FHORD9",111,0)
 ..S:$D(^FH(111,FHDIET,0)) FHPDIET=$P(^FH(111,FHDIET,0),U,5)
"RTN","FHORD9",112,0)
 ..S:'$D(P(FHPDIET,FHSER)) P(FHPDIET,FHSER)=0
"RTN","FHORD9",113,0)
 ..S P(FHPDIET,FHSER)=P(FHPDIET,FHSER)+1
"RTN","FHORD9",114,0)
 ..S:'$D(P(.6,FHSER)) P(.6,FHSER)=0 S P(.6,FHSER)=P(.6,FHSER)+1
"RTN","FHORD9",115,0)
 ;
"RTN","FHORD9",116,0)
GUEST ;for guest meals.
"RTN","FHORD9",117,0)
 ;If no diet, use default outpatient diet in file #119.9.
"RTN","FHORD9",118,0)
 ;S FHTMPS=$NA(^TMP($J,"OP","G",FHPLNM))
"RTN","FHORD9",119,0)
 S FHTMPS="^TMP($J,""OP"",""G"")" I '$D(FHPLNM) S FHPLNM=""
"RTN","FHORD9",120,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORD9",121,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHORD9",122,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>FHDT)  D
"RTN","FHORD9",123,0)
 ..S (FHRDAT,FHIJKDAT)=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHORD9",124,0)
 ..S (FHPDIET,FHDIET,FHSER,FHLOC)="***"
"RTN","FHORD9",125,0)
 ..S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHORD9",126,0)
 ..S:$G(FHLOC) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,5)
"RTN","FHORD9",127,0)
 ..S:'$G(FHSER) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHORD9",128,0)
 ..S:'$G(FHSER) FHSER=$O(^FH(119.72,0))
"RTN","FHORD9",129,0)
 ..I $D(^FH(119.72,FHSER,0)),$P(^FH(119.72,FHSER,0),U,3)'=FHP Q
"RTN","FHORD9",130,0)
 ..I $G(FHSITE),$P($G(^FH(119.6,FHLOC,0)),U,8)'=FHSITE Q
"RTN","FHORD9",131,0)
 ..S FHDIET=$P($G(^FH(119.9,1,0)),U,2)
"RTN","FHORD9",132,0)
 ..S FHDIETN=$P(FHIJKDAT,U,6)
"RTN","FHORD9",133,0)
 ..S:$D(^FH(111,FHDIETN,0)) FHPDIET=$P(^FH(111,FHDIETN,0),U,5)
"RTN","FHORD9",134,0)
 ..S:'$D(P(FHPDIET,FHSER)) P(FHPDIET,FHSER)=0
"RTN","FHORD9",135,0)
 ..S P(FHPDIET,FHSER)=P(FHPDIET,FHSER)+1
"RTN","FHORD9",136,0)
 ..S:'$D(P(.6,FHSER)) P(.6,FHSER)=0 S P(.6,FHSER)=P(.6,FHSER)+1
"RTN","FHORD9",137,0)
 ;
"RTN","FHORD9",138,0)
 Q
"RTN","FHORD9",139,0)
 ;
"RTN","FHORD9",140,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHORD9",141,0)
 ;K %,%H,%I,%T,%DT,%ZIS,A1,ADM,CHK,CT,D,D1,D2,FHDFN,DFN,DIC,DOW,DTP,FHLD,FHOR,FHP,FHPAR,K,K1,KK,L1,LP,N,N1,N2,N3,NOW,NXW,FHORD,P,P1,POP,S,SP,TF,TIM,TOT,TYP,WRD,WRDN,X,X0,X1,X2,Y,Z K ^TMP($J) Q
"RTN","FHORD91")
0^207^B6191873
"RTN","FHORD91",1,0)
FHORD91 ; HISC/REL/NCA/RVD - Diet Census Cont. ;1/23/98  16:08
"RTN","FHORD91",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD91",3,0)
 ;
"RTN","FHORD91",4,0)
 K S S L1=50
"RTN","FHORD91",5,0)
STR F K=0:0 S K=$O(D(K)) Q:K=""  S P(0,K)="",X=^FH(119.72,K,0),N1=$P(X,"^",1),N2=$P(X,"^",2),N3=$P(X,"^",4) S:N3="" N3=$E(N1,1,6) S S(N3,K)=$J(N3,8)_"^"_N2,L1=L1+8
"RTN","FHORD91",6,0)
 S:L1<80 L1=80
"RTN","FHORD91",7,0)
LST S DTP=NOW D DTP^FH W:$E(IOST,1,2)="C-" @IOF W !,DTP,?(L1-35\2),"A C T U A L   D I E T   C E N S U S"
"RTN","FHORD91",8,0)
 S Z=$P(^FH(119.71,FHP,0),"^",1),DTP=TIM D DTP^FH
"RTN","FHORD91",9,0)
 S X=TIM D DOW^%DTC S DOW=Y+1,X=$P("Sun^Mon^Tues^Wednes^Thurs^Fri^Satur","^",DOW)_"day  "_DTP
"RTN","FHORD91",10,0)
 S DTP=TIM D DTP^FH W !,FHSITENM
"RTN","FHORD91",11,0)
 W !,?(L1-$L(Z)\2),Z,!!?(L1-$L(X)\2),X
"RTN","FHORD91",12,0)
 W !!?(L1-31\2),"P R O D U C T I O N   D I E T S",!!
"RTN","FHORD91",13,0)
 S X="",FHCNTX=0 F  S X=$O(S(X)) Q:X=""  S FHCNTX=FHCNTX+1
"RTN","FHORD91",14,0)
 S FHSP1=31
"RTN","FHORD91",15,0)
 S:FHCNTX=5 FHSP1=19
"RTN","FHORD91",16,0)
 S:FHCNTX=4 FHSP1=19
"RTN","FHORD91",17,0)
 S:FHCNTX=3 FHSP1=25
"RTN","FHORD91",18,0)
 S:FHCNTX=2 FHSP1=31
"RTN","FHORD91",19,0)
 S:FHCNTX=1 FHSP1=37
"RTN","FHORD91",20,0)
 S FHSP2=33
"RTN","FHORD91",21,0)
 S:FHCNTX=5 FHSP2=21
"RTN","FHORD91",22,0)
 S:FHCNTX=4 FHSP2=21
"RTN","FHORD91",23,0)
 S:FHCNTX=3 FHSP2=27
"RTN","FHORD91",24,0)
 S:FHCNTX=2 FHSP2=33
"RTN","FHORD91",25,0)
 S:FHCNTX=1 FHSP2=39
"RTN","FHORD91",26,0)
 W ?FHSP1
"RTN","FHORD91",27,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K=0:0 S K=$O(S(X,K)) Q:K=""  W $P(S(X,K),"^",1)
"RTN","FHORD91",28,0)
 W "    Tray  Cafe  Total",!
"RTN","FHORD91",29,0)
 F P1=0:0 S P1=$O(^FH(116.2,"AP",P1)) Q:P1<1  F K=0:0 S K=$O(^FH(116.2,"AP",P1,K)) Q:K<1  I $D(P(K)) D PRO
"RTN","FHORD91",30,0)
 W !?3,"N P O",?FHSP2 S K=.5 D P1 K P(.5)
"RTN","FHORD91",31,0)
 W !?3,"P A S S",?FHSP2 S K=.8 D P1 K P(.8)
"RTN","FHORD91",32,0)
 W !?3,"TF Only",?FHSP2 S K=.7 D P1 K P(.7)
"RTN","FHORD91",33,0)
 F X=0:0 S X=$O(P(.6,X)) Q:X<1  I $D(P(0,X)) S P(.6,X)=P(.6,X)-P(0,X)
"RTN","FHORD91",34,0)
 W !?3,"No Order",?FHSP2 S K=.6 D P1 K P(.6)
"RTN","FHORD91",35,0)
 W !!,"TOTAL MEALS",?FHSP2 S K=0 D P1 W ! K P(0) Q
"RTN","FHORD91",36,0)
PRO W !,$E($P($G(^FH(116.2,K,0)),"^",1),1,21),?FHSP2
"RTN","FHORD91",37,0)
P1 S (N("T"),N("C"),N("D"),N("G"))=""
"RTN","FHORD91",38,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K1=0:0 S K1=$O(S(X,K1)) Q:K1=""  S Z=$G(P(K,K1)),TYP=$P(S(X,K1),"^",2) S:Z N(TYP)=N(TYP)+Z W $S(Z:$J(Z,6),1:$J("",6)),"  " I K>.4,Z S P(0,K1)=P(0,K1)+Z
"RTN","FHORD91",39,0)
 S:N("D") N("T")=N("T")+N("D") W $J(N("T"),6),$J(N("C"),6),$J(N("T")+N("C"),7) Q
"RTN","FHORD92")
0^208^B10689263
"RTN","FHORD92",1,0)
FHORD92 ; HISC/NCA - Diet Census Percentage ;6/8/93  08:54 
"RTN","FHORD92",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD92",3,0)
 ;
"RTN","FHORD92",4,0)
 ;RVD 4/7/04 - add outpatient meals data.
"RTN","FHORD92",5,0)
 ;
"RTN","FHORD92",6,0)
 D DIV^FHOMUTL G:'$D(FHSITE) KIL
"RTN","FHORD92",7,0)
R0 R !!,"Do you want DIET CENSUS PERCENTAGE for MEAL? (Y/N): ",FHAN:DTIME G:'$T!("^"[FHAN) KIL S X=FHAN D TR^FH S FHAN=X I $P("YES",FHAN,1)'="",$P("NO",FHAN,1)'="" W *7,"  Enter YES or NO" G R0
"RTN","FHORD92",8,0)
 S FHAN=$E(FHAN,1)
"RTN","FHORD92",9,0)
 S FHP=$O(^FH(119.71,0)) I FHP'<1,$O(^FH(119.71,FHP))<1 G F1
"RTN","FHORD92",10,0)
F0 R !!,"Select PRODUCTION FACILITY: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHORD92",11,0)
 K DIC S DIC="^FH(119.71,",DIC(0)="EMQ" D ^DIC G:Y<1 F0 S FHP=+Y
"RTN","FHORD92",12,0)
F1 S %DT("A")="Select Date: ",%DT="AEX" W ! D ^%DT G KIL:"^"[X!$D(DTOUT),F1:Y<1 S (X1,D1)=+Y
"RTN","FHORD92",13,0)
 I FHAN'="Y" S (MEAL,FHCY,FHDA,FHP1)="" G L0
"RTN","FHORD92",14,0)
 D E1^FHPRC1 I FHCY<1 W *7,!!,"No MENU CYCLE Defined for that Date!" G F1
"RTN","FHORD92",15,0)
 I '$D(^FH(116,FHCY,"DA",FHDA,0)) W *7,!!,"MENU CYCLE DAY Not Defined for that Date!" G F1
"RTN","FHORD92",16,0)
R1 R !!,"Select MEAL (B,N,E or ALL): ",MEAL:DTIME G:'$T!("^"[MEAL) KIL S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="A"
"RTN","FHORD92",17,0)
 I "BNEA"'[MEAL!(MEAL'?1U) W *7,!,"Select B for Breakfast, N for Noon, or E for Evening or ALL for all meals" G R1
"RTN","FHORD92",18,0)
 S FHDA=^FH(116,FHCY,"DA",FHDA,0)
"RTN","FHORD92",19,0)
 I $D(^FH(116.3,D1,0)) S X=^(0) F LL=2:1:4 I $P(X,"^",LL) S $P(FHDA,"^",LL)=$P(X,"^",LL)
"RTN","FHORD92",20,0)
 I MEAL'="A" S FHX1=$P(FHDA,"^",$F("BNE",MEAL)) I 'FHX1 W *7,!!,"*** NO MENU DEFINED FOR THIS MEAL ***" G KIL
"RTN","FHORD92",21,0)
R2 R !!,"Use CENSUS or FORECAST? (C OR F): ",FHP1:DTIME G:'$T!("^"[FHP1) KIL S X=FHP1 D TR^FH S FHP1=X I $P("CENSUS",FHP1,1)'="",$P("FORECAST",FHP1,1)'="" W *7," Enter C or F" G R2
"RTN","FHORD92",22,0)
 K M2 S FHP1=$E(FHP1,1),FHX1=$S(FHP1="C":"Census",1:"Forecast") G:FHX1["C" L0
"RTN","FHORD92",23,0)
 W !!,"Forecasting ..." D Q2^FHPRF1
"RTN","FHORD92",24,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  D C0 G:X="^" KIL
"RTN","FHORD92",25,0)
L0 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORD92",26,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORD93",FHLST="D1^MEAL^FHAN^FHDA^FHP^FHP1^M2(^FHSITE^FHSITENM" D EN2^FH G KIL
"RTN","FHORD92",27,0)
 U IO D Q1^FHORD93 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORD92",28,0)
C0 S S1=^TMP($J,P0)
"RTN","FHORD92",29,0)
 W !!?5,"Service Point: ",$P(^FH(119.72,P0,0),"^",1)
"RTN","FHORD92",30,0)
C1 W !?5,"Forecast Census: ",S1," // " R X:DTIME I '$T!(X["^") S X="^" Q
"RTN","FHORD92",31,0)
 S:X="" X=S1 I X'?1N.N!(X>9999) W *7,"  Must be a number less than 9999" G C1
"RTN","FHORD92",32,0)
 S M2(P0)=X Q
"RTN","FHORD92",33,0)
KIL K %,%H,%I,%T,%DT,%ZIS,A1,ADM,C2,C3,D,D1,D2,CHK,CT,FHDFN,DFN,DIC,DOW,DTP,FHAN,FHCY,FHDA,FHLD,FHOR,FHORD,FHP,FHP1,FHPAR,FHX1,K,K1,K3,KK,L1,L2,LL,LN,LP,MEAL,M2,N,N1,N2,N3
"RTN","FHORD92",34,0)
 K NOW,NXW,P,P0,P1,PG,POP,S,S0,S1,S2,S3,S4,SP,T,T0,TF,TIM,TP,TOT,TYP,W1,WRD,WRDN,X,X0,X1,X2,Y,Y0,Z K ^TMP($J) Q
"RTN","FHORD93")
0^209^B20775630
"RTN","FHORD93",1,0)
FHORD93 ; HISC/NCA/RVD - Diet Census Percentage (Cont.) ;1/23/98  16:09
"RTN","FHORD93",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORD93",3,0)
 ;RVD 4/7/04 - add outpatient meals data.
"RTN","FHORD93",4,0)
 ;
"RTN","FHORD93",5,0)
Q1 ; Calculate Census
"RTN","FHORD93",6,0)
 S X=D1 D DOW^%DTC S DOW=Y+1 D NOW^%DTC S NOW=% S PG=0
"RTN","FHORD93",7,0)
 G:FHAN'="Y" GET
"RTN","FHORD93",8,0)
 I MEAL'="A" G Q2
"RTN","FHORD93",9,0)
 F MEAL="B","N","E" D Q2
"RTN","FHORD93",10,0)
 Q
"RTN","FHORD93",11,0)
Q2 S K3=$F("BNE",MEAL)-1,FHX1=$P(FHDA,"^",K3+1) D CEN^FHPRO2:FHP1["C",FOR^FHPRO2:FHP1["F",LST
"RTN","FHORD93",12,0)
 Q
"RTN","FHORD93",13,0)
GET F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  S X=^(WRD,0),TIM=D1 I $P(X,U,8)=FHSITE D WRD^FHORD9
"RTN","FHORD93",14,0)
 ;get outpatient data
"RTN","FHORD93",15,0)
 S FHTIM=D1-.000001
"RTN","FHORD93",16,0)
 F FHIR=FHTIM:0 S FHIR=$O(^FHPT("RM",FHIR)) Q:(FHIR'>0)!(FHIR>(FHTIM+1))  F FHIDFN=0:0 S FHIDFN=$O(^FHPT("RM",FHIR,FHIDFN)) Q:FHIDFN'>0  D
"RTN","FHORD93",17,0)
 .F FHIEN=0:0 S FHIEN=$O(^FHPT("RM",FHIR,FHIDFN,FHIEN)) Q:FHIEN'>0  D
"RTN","FHORD93",18,0)
 ..S FHREDAT=$G(^FHPT(FHIDFN,"OP",FHIEN,0))
"RTN","FHORD93",19,0)
 ..S FHLOC=$P(FHREDAT,U,3)
"RTN","FHORD93",20,0)
 ..Q:$P(FHREDAT,U,5)="C"    ;quit if cancelled
"RTN","FHORD93",21,0)
 ..Q:$P($G(^FH(119.6,FHLOC,0)),U,8)'=FHSITE
"RTN","FHORD93",22,0)
 ..S FHRDIET=$P(FHREDAT,U,2),FHPDIET=$P($G(^FH(111,FHRDIET,0)),U,5)
"RTN","FHORD93",23,0)
 ..S:$G(FHLOC) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,5)
"RTN","FHORD93",24,0)
 ..S:'$G(FHSER) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHORD93",25,0)
 ..S:'$G(FHSER) FHSER=$O(^FH(119.72,0))
"RTN","FHORD93",26,0)
 ..I $D(^FH(119.72,FHSER,0)),$P(^FH(119.72,FHSER,0),U,3)'=FHP Q
"RTN","FHORD93",27,0)
 ..S FHDIET=$P($G(^FH(119.9,1,0)),U,2)
"RTN","FHORD93",28,0)
 ..S:'$D(P(FHPDIET,FHSER)) P(FHPDIET,FHSER)=0
"RTN","FHORD93",29,0)
 ..S P(FHPDIET,FHSER)=P(FHPDIET,FHSER)+1
"RTN","FHORD93",30,0)
 ..S:'$D(P(.6,FHSER)) P(.6,FHSER)=0 S P(.6,FHSER)=P(.6,FHSER)+1
"RTN","FHORD93",31,0)
 ..;if tubefeeding and not cancelled, count the TF data.
"RTN","FHORD93",32,0)
 ..I $D(^FHPT(FHIDFN,"OP",FHIEN,"TF")) D
"RTN","FHORD93",33,0)
 ...Q:$P(^FHPT(FHIDFN,"OP",FHIEN,3),U,5)="C"
"RTN","FHORD93",34,0)
 ...I '$D(P(.7,FHSER)) S P(.7,FHSER)=1
"RTN","FHORD93",35,0)
 ...E  S P(.7,FHSER)=P(.7,FHSER)+1
"RTN","FHORD93",36,0)
 ...S:'$D(P(.6,FHSER)) P(.6,FHSER)=0 S P(.6,FHSER)=P(.6,FHSER)+1
"RTN","FHORD93",37,0)
 S FHPLNM=$P($G(^FH(119.73,FHSITE,0)),U,1)
"RTN","FHORD93",38,0)
 S FHDT=D1+.999999
"RTN","FHORD93",39,0)
 D GETSM^FHOMRBLD(FHTIM,FHSITE,"","")
"RTN","FHORD93",40,0)
 D SPEC^FHORD9
"RTN","FHORD93",41,0)
 D GETGM^FHOMRBL1(FHTIM,FHSITE,"","")
"RTN","FHORD93",42,0)
 D GUEST^FHORD9
"RTN","FHORD93",43,0)
 ;
"RTN","FHORD93",44,0)
 K D,NP F LP=0:0 S LP=$O(P(.5,LP)) Q:LP<1  S:'$D(NP(.5,LP)) NP(.5,LP)=0 S NP(.5,LP)=NP(.5,LP)+P(.5,LP) S:'$D(D(LP)) D(LP)=0 S D(LP)=D(LP)+P(.5,LP)
"RTN","FHORD93",45,0)
 K P(.5) F LP=0:0 S LP=$O(P(.7,LP)) Q:LP<1  S:'$D(NP(.7,LP)) NP(.7,LP)=0 S NP(.7,LP)=NP(.7,LP)+P(.7,LP) S:'$D(D(LP)) D(LP)=0 S D(LP)=D(LP)+P(.7,LP)
"RTN","FHORD93",46,0)
 K P(.7) F LP=0:0 S LP=$O(P(.6,LP)) Q:LP<1  S:'$D(NP(.6,LP)) NP(.6,LP)=0 S NP(.6,LP)=NP(.6,LP)+P(.6,LP)
"RTN","FHORD93",47,0)
 K P(.6) F LP=0:0 S LP=$O(P(.8,LP)) Q:LP<1  S:'$D(NP(.8,LP)) NP(.8,LP)=0 S NP(.8,LP)=NP(.8,LP)+P(.8,LP) S:'$D(D(LP)) D(LP)=0 S D(LP)=D(LP)+P(.8,LP)
"RTN","FHORD93",48,0)
 K P(.8),^TMP($J) F LL=0:0 S LL=$O(P(LL)) Q:LL<1  S P(LL,0)=0 F P0=0:0 S P0=$O(P(LL,P0)) Q:P0<1  S ^TMP($J,P0,LL)=P(LL,P0) S:'$D(D(P0)) D(P0)="" S D(P0)=D(P0)+P(LL,P0),P(LL,0)=P(LL,0)+P(LL,P0)
"RTN","FHORD93",49,0)
 F LP=0:0 S LP=$O(NP(.6,LP)) Q:LP<1  S:$D(D(LP)) NP(.6,LP)=NP(.6,LP)-D(LP) S:'$D(D(LP)) D(LP)=0 S D(LP)=D(LP)+NP(.6,LP)
"RTN","FHORD93",50,0)
 F P0=0:0 S P0=$O(D(P0)) Q:P0<1  S ^TMP($J,P0)=D(P0)
"RTN","FHORD93",51,0)
 F LL=0:0 S LL=$O(P(LL)) Q:LL<1  I $G(P(LL,0)) S ^TMP($J,0,LL)=P(LL,0)
"RTN","FHORD93",52,0)
 K P,D
"RTN","FHORD93",53,0)
LST K S S L1=30
"RTN","FHORD93",54,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0=""  S X=^FH(119.72,P0,0),N1=$P(X,"^",1),N2=$P(X,"^",2),N3=$P(X,"^",4) S:N3="" N3=$E(N1,1,6) S S(N3,P0)=$J(N3,8)_"^"_N2,L1=L1+10
"RTN","FHORD93",55,0)
 S:L1<80 L1=80 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHORD93",56,0)
 S Z=$S(FHP1["F":"F O R E C A S T E D",1:"A C T U A L")_"   D I E T   C E N S U S"
"RTN","FHORD93",57,0)
 S DTP=NOW D DTP^FH W !,DTP,?(L1-$L(Z)\2),Z,?(L1-7),"Page ",PG,!?(L1-21\2),"P E R C E N T A G E S"
"RTN","FHORD93",58,0)
 W !,$G(FHSITENM)
"RTN","FHORD93",59,0)
 S Z=$P(^FH(119.71,FHP,0),"^",1),DTP=D1 D DTP^FH
"RTN","FHORD93",60,0)
 S X=D1\1 D DOW^%DTC S DOW=Y+1,X=$P("Sun^Mon^Tues^Wednes^Thurs^Fri^Satur","^",DOW)_"day  "_DTP I FHAN="Y" S X=X_"  "_$P("BREAKFAST^NOON^EVENING","^",K3)
"RTN","FHORD93",61,0)
 S DTP=D1\1 D DTP^FH W !!?(L1-$L(Z)\2),Z,!!?(L1-$L(X)\2),X
"RTN","FHORD93",62,0)
 W !!?(L1-31\2),"P R O D U C T I O N   D I E T S",!!?29
"RTN","FHORD93",63,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K=0:0 S K=$O(S(X,K)) Q:K=""  W $P(S(X,K),"^",1)_" %"
"RTN","FHORD93",64,0)
 W !
"RTN","FHORD93",65,0)
 F P1=0:0 S P1=$O(^FH(116.2,"AP",P1)) Q:P1<1  F K=0:0 S K=$O(^FH(116.2,"AP",P1,K)) Q:K<1  I $D(^TMP($J,0,K)) D PRO
"RTN","FHORD93",66,0)
 I FHP1'["F" W !?3,"N P O",?31 S K=.5 D P1 K NP(.5)
"RTN","FHORD93",67,0)
 I FHP1'["F" W !?3,"P A S S",?31 S K=.8 D P1 K NP(.8)
"RTN","FHORD93",68,0)
 I FHP1'["F" W !?3,"TF Only",?31 S K=.7 D P1 K NP(.7)
"RTN","FHORD93",69,0)
 I FHP1'["F" W !?3,"No Order",?31 S K=.6 D P1 K NP(.6)
"RTN","FHORD93",70,0)
 W !
"RTN","FHORD93",71,0)
 Q
"RTN","FHORD93",72,0)
PRO W !,$P($G(^FH(116.2,K,0)),"^",1),?31
"RTN","FHORD93",73,0)
P1 F  S X=$O(S(X)) Q:X=""  F K1=0:0 S K1=$O(S(X,K1)) Q:K1=""  S Z=$S(K>.9:$G(^TMP($J,K1,K)),1:$G(NP(K,K1))),Z=$S($G(^TMP($J,K1)):Z/$G(^TMP($J,K1))*100,1:"") W $J(Z,8,1),"  "
"RTN","FHORD93",74,0)
 Q
"RTN","FHORDR")
0^210^B4951563
"RTN","FHORDR",1,0)
FHORDR ; HISC/REL - Production Diet Recode ;3/28/95  12:09
"RTN","FHORDR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORDR",3,0)
 S FLG=0
"RTN","FHORDR",4,0)
CODE ; Recode diet
"RTN","FHORDR",5,0)
 Q:"^^^^"[FHOR  I FHOR="1^^^^" S Z=1 G C1
"RTN","FHORDR",6,0)
 Q:PDFLG
"RTN","FHORDR",7,0)
 S MP=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHORDR",8,0)
 S Z=$P($G(^FH(111.1,+MP,0)),"^",7) G:Z C1
"RTN","FHORDR",9,0)
 S M="^" F K1=1:1:5 S Z=$P(FHOR,"^",K1) Q:Z<1  S M=M_+$P(^FH(111,Z,0),"^",5)_"^"
"RTN","FHORDR",10,0)
 F LC=0:0 S LC=$O(^FH(116.2,"AR",LC)) Q:LC<1  S X=^(LC) F K1=1:1 S X1=$P(X,"^",K1) Q:X1<1  D REC G:Z C1
"RTN","FHORDR",11,0)
 S Z=0 D:FLG MIS
"RTN","FHORDR",12,0)
C1 S:Z $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",13)=Z Q
"RTN","FHORDR",13,0)
MIS ; No recoding of diet order
"RTN","FHORDR",14,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORDR",15,0)
 W !,$P($G(^DPT(DFN,0)),"^",1),", Admission ",ADM,", Diet Order ",FHORD," not recoded" Q
"RTN","FHORDR",16,0)
 Q
"RTN","FHORDR",17,0)
REC S Z=$P(X1,":",1),X1=$P(X1,":",2) F K2=1:1 S C=$P(X1," ",K2) Q:C<1  G:M'[("^"_C_"^") R1
"RTN","FHORDR",18,0)
 Q
"RTN","FHORDR",19,0)
R1 S Z=0 Q
"RTN","FHORDR",20,0)
SET ; Rebuild 'AR' recode cross-reference
"RTN","FHORDR",21,0)
 K M,^FH(116.2,"AR") F K1=0:0 S K1=$O(^FH(116.2,K1)) Q:K1<1  D S1
"RTN","FHORDR",22,0)
 S LC=1,X="" F M=0:0 S M=$O(M(M)) Q:M<1  S Z=M(M) D S2
"RTN","FHORDR",23,0)
 S:X'="" ^FH(116.2,"AR",LC)=$E(X,2,999) K FHORD,K1,K2,LC,M,X,Z Q
"RTN","FHORDR",24,0)
S1 S X="",M=+$P(^FH(116.2,K1,0),"^",5) Q:'M  Q:$D(^FH(116.2,K1,"I"))
"RTN","FHORDR",25,0)
 F K2=0:0 S K2=$O(^FH(116.2,K1,"R",K2)) Q:K2<1  S Z=^(K2,0) S:Z X=X_" "_Z
"RTN","FHORDR",26,0)
 S:X="" X=" "_K1 S M(M)=K1_":"_$E(X,2,999) Q
"RTN","FHORDR",27,0)
S2 I $L(X)+$L(Z)>245 S ^FH(116.2,"AR",LC)=$E(X,2,999),X="",LC=LC+1
"RTN","FHORDR",28,0)
 S X=X_"^"_Z Q
"RTN","FHORDR",29,0)
INP ; Recode all inpatients
"RTN","FHORDR",30,0)
 D SET S FLG=1,PDFLG=0
"RTN","FHORDR",31,0)
 F W1=0:0 S W1=$O(^FHPT("AW",W1)) Q:W1'>0  F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",W1,FHDFN)) D:ADM Z1
"RTN","FHORDR",32,0)
 K ADM,C,D,FHDFN,DFN,FHOR,FHORD,FLG,I,K1,K2,LC,M,W1,X,X1,Z Q
"RTN","FHORDR",33,0)
Z1 F FHORD=0:0 S FHORD=$O(^FHPT(FHDFN,"A",ADM,"DI",FHORD)) Q:FHORD<1  D Z2
"RTN","FHORDR",34,0)
 Q
"RTN","FHORDR",35,0)
Z2 S Z=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),FHOR=$P(Z,"^",2,6) Q:"^^^^"[FHOR  D CODE Q
"RTN","FHORE1")
0^211^B17169358
"RTN","FHORE1",1,0)
FHORE1 ; HISC/REL - Early/Late Trays ;8/8/96  13:57 ;
"RTN","FHORE1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005;
"RTN","FHORE1",3,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL D F1 G:'$D(DFN) KIL G:'$D(FHDFN) KIL I 'FHWF S FHORN="" D ^FHORE1A G KIL
"RTN","FHORE1",4,0)
 ; Set HL7
"RTN","FHORE1",5,0)
 S FHORN="" D ^FHORE1A I FHDAY D EL^FHWOR3 D KIL I $D(MSG) D MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORE1",6,0)
 Q
"RTN","FHORE1",7,0)
F1 ; Process order
"RTN","FHORE1",8,0)
 D NOW^%DTC S NOW=%,DT=NOW\1 K %
"RTN","FHORE1",9,0)
 S X1=DT,X2=31 D C^%DTC S X31=X
"RTN","FHORE1",10,0)
F2 W ! S %DT="AEX",%DT("A")="Select Start Date: " D ^%DT K %DT G AB:U[X!$D(DTOUT),F2:Y<1 S SDT=+Y\1 I SDT<DT G F15
"RTN","FHORE1",11,0)
 I SDT>X31 W *7,!,"  [ Cannot schedule more than 31 days in the future ]" G F2
"RTN","FHORE1",12,0)
F3 S DTP=SDT D DTP^FH
"RTN","FHORE1",13,0)
 S %DT="AEX",%DT("A")="Select End Date: "_DTP_"// " D ^%DT K %DT G AB:X["^"!$D(DTOUT) S:X="" Y=SDT G F3:Y<1 S EDT=+Y\1
"RTN","FHORE1",14,0)
 S WKD="" G:SDT=EDT F6 I EDT<SDT W *7,"  [ End before Start? ] " G F2
"RTN","FHORE1",15,0)
 I EDT>X31 W *7,!,"  [ Cannot schedule for more than 31 days in the future ]" G F3
"RTN","FHORE1",16,0)
OK W !!?10,"Mon  Tues  Wed  Thur  Fri  Sat  Sun"
"RTN","FHORE1",17,0)
 W !?10," M     T    W     R    F    S    X"
"RTN","FHORE1",18,0)
 W !!,"Enter string of characters for desired days of week: e.g., MWF",!
"RTN","FHORE1",19,0)
F4 R !,"Days of Week: ",WKD:DTIME G:'$T!("^"[WKD) AB S X=WKD D TR^FH S WKD=X
"RTN","FHORE1",20,0)
 S X1="" F K=1:1 S Z=$E(WKD,K) Q:Z=""  G:X1[Z F16 S X1=X1_Z I "MTWRFSX"'[Z W !,"Please enter the desired days of the week." G OK
"RTN","FHORE1",21,0)
F6 R !,"Select Meal (B,N,E): ",MEAL:DTIME G:'$T!("^"[MEAL) AB S X=MEAL D TR^FH S MEAL=X
"RTN","FHORE1",22,0)
 I "BNE"'[MEAL!(MEAL'?1U) W *7,!,"Enter B for Breakfast, N for Noon , or E for Evening" G F6
"RTN","FHORE1",23,0)
 G:SDT'=EDT F7 F K=SDT:0 S K=$O(^FHPT(FHDFN,"A",ADM,"EL",K)) Q:K<1!(K\1'=SDT)  I $P(^(K,0),"^",2)=MEAL W *7,!!,"Early/Late Meal Already Ordered for this Date!" G AB
"RTN","FHORE1",24,0)
F7 R !,"Early or Late (E or L): ",X1:DTIME G AB:'$T!("^"[X1)
"RTN","FHORE1",25,0)
 I "el"[X1 S X=X1 D TR^FH S X1=X
"RTN","FHORE1",26,0)
 I X1'="E",X1'="L" W *7,!,"Enter E for early tray, L for late tray" G F7
"RTN","FHORE1",27,0)
 S SERV=X1 D DP S K=$S(MEAL="B":0,MEAL="N":6,1:12)+(X1="L"*3)
"RTN","FHORE1",28,0)
 K N S K2=0 F K1=K+1:1:K+3 S X2=$P(Y,"^",K1) I X2'="" S K2=K2+1,N(K2)=X2
"RTN","FHORE1",29,0)
 I 'K2 W *7,!!,"No Early/Late Delivery Times -- Notify Dietetics" G AB
"RTN","FHORE1",30,0)
 I K2=1 S K1=1 G F9
"RTN","FHORE1",31,0)
F8 W !,"Select Time: ( " F K1=1:1:K2 W K1,"=",N(K1)," "
"RTN","FHORE1",32,0)
 R ") ",K1:DTIME G AB:'$T!("^"[K1) I K1<1!(K1>K2)!(K1'?1N) W *7,!,"Enter the number of the desired time" G F8
"RTN","FHORE1",33,0)
F9 S TIM=N(K1),X=SDT_"@"_TIM,%DT="XT",NUM=K1 D ^%DT S (SDT,DTE)=Y,EDT=EDT+(SDT#1) G F10:SDT'=EDT,F15:DTE<NOW
"RTN","FHORE1",34,0)
 D CUR I FHLD'="" W *7,!!,"Patient is on a WITHHOLD ORDER at that time!" G AB
"RTN","FHORE1",35,0)
 I "^^^^"[FHOR W *7,!!,"Patient has NO DIET ORDER at that time!" G AB
"RTN","FHORE1",36,0)
F10 S BAG="N" I $P(FHPAR,"^",10)'="N" R !,"Bagged Meal: NO// ",BAG:DTIME G:'$T!(BAG=U) AB S:BAG="" BAG="N" S X=BAG D TR^FH S BAG=X I $P("YES",BAG,1)'="",$P("NO",BAG,1)'="" W *7," Enter Y or N" G F10
"RTN","FHORE1",37,0)
 S BAG=$E(BAG,1) W !?5 Q
"RTN","FHORE1",38,0)
DP S Y="" S W1=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8),DP=$P($G(^FH(119.6,+W1,0)),"^",8)
"RTN","FHORE1",39,0)
 S Y=$G(^FH(119.73,+DP,1)),FHPAR=$G(^FH(119.73,+DP,2)) Q
"RTN","FHORE1",40,0)
F15 W *7,!!,"Cannot Order a Meal for a Date/Time before now!" G AB
"RTN","FHORE1",41,0)
F16 W *7,!,"  Error - Illegal character or repeated day" G F4
"RTN","FHORE1",42,0)
DTP ; Printable Date
"RTN","FHORE1",43,0)
 Q:Y<1  S Y=$J(+$E(Y,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(Y,4,5))_"-"_$E(Y,2,3) Q
"RTN","FHORE1",44,0)
CUR S A1=0,(FHOR,FHLD)="" F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK>DTE)  S A1=KK
"RTN","FHORE1",45,0)
 Q:'A1  S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2),X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7) Q
"RTN","FHORE1",46,0)
AB W *7,!!,"Early/Late Tray operation TERMINATED - No change!"
"RTN","FHORE1",47,0)
KIL K %,%H,%I,%T,%DT,A1,ADM,ALL,BAG,C,DA,FHDFN,DFN,DP,DTE,DTP,EDT,FHDAY,FHLD,FHOR,FHPAR,FHWF,FHPV,I,K,K1,K2,KK,MEAL,N,NUM,NOW,FHORN,FHORD,SDT,SERV,TIM,WARD,WKD,X,X1,X2,X31,Y,Z Q
"RTN","FHORE1A")
0^212^B2346552
"RTN","FHORE1A",1,0)
FHORE1A ; HISC/REL - File Early/Late Order ;6/21/96  10:14
"RTN","FHORE1A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORE1A",3,0)
PROC ; File complete order
"RTN","FHORE1A",4,0)
 S FHDAY=0,DTE=SDT I SDT=EDT D FIL G F13
"RTN","FHORE1A",5,0)
F11 G:DTE<NOW F12
"RTN","FHORE1A",6,0)
 S X=DTE\1 D DOW^%DTC G:WKD'[$E("XMTWRFS",Y+1) F12
"RTN","FHORE1A",7,0)
 F K=X:0 S K=$O(^FHPT(FHDFN,"A",ADM,"EL",K)) Q:K<1!(K\1'=X)  I $P(^(K,0),"^",2)=MEAL W:FHWF'=2 *7,!,"Early/Late Meal Already Ordered for ",$E(X,4,5),"/",$E(X,6,7),"/",$E(X,2,3),! G F12
"RTN","FHORE1A",8,0)
 D FIL W:FHWF'=2 "."
"RTN","FHORE1A",9,0)
F12 S X1=DTE\1,X2=1 D C^%DTC G:X>EDT F13
"RTN","FHORE1A",10,0)
 S X=X_"@"_TIM,%DT="XT" D ^%DT S DTE=Y G F11
"RTN","FHORE1A",11,0)
F13 W:FHWF'=2 "... done" Q
"RTN","FHORE1A",12,0)
FIL ; File daily order
"RTN","FHORE1A",13,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"EL",0)) S ^(0)="^115.05D^^"
"RTN","FHORE1A",14,0)
 S %=$P(^FHPT(FHDFN,"A",ADM,"EL",0),"^",4)+1,$P(^(0),"^",3,4)=DTE_"^"_%
"RTN","FHORE1A",15,0)
 S ^FHPT(FHDFN,"A",ADM,"EL",DTE,0)=DTE_"^"_MEAL_"^"_TIM_"^"_BAG_"^"_DUZ_"^"_NOW_"^"_+FHORN,FHDAY=1
"RTN","FHORE1A",16,0)
 S ^FHPT("ADLT",DTE,FHDFN,ADM)="" Q
"RTN","FHORE2")
0^213^B6718113
"RTN","FHORE2",1,0)
FHORE2 ; HISC/REL/NCA - List Early/Late Trays ;3/15/95  08:59
"RTN","FHORE2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORE2",3,0)
 S FHP=$O(^FH(119.73,0)) I FHP'<1,$O(^FH(119.73,FHP))<1 G N1
"RTN","FHORE2",4,0)
R0 R !!,"Select COMMUNICATION OFFICE (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0 G N1
"RTN","FHORE2",5,0)
 K DIC S DIC="^FH(119.73,",DIC(0)="EMQ" D ^DIC G:Y<1 R0 S FHP=+Y
"RTN","FHORE2",6,0)
N1 W ! S %DT="AEX",%DT("A")="Select Date: " D ^%DT K %DT G KIL:X[U!$D(DTOUT),N1:Y<1 S DTE=+Y\1
"RTN","FHORE2",7,0)
N2 R !!,"Select Meal (B,N,E or ALL): ",MEAL:DTIME G:'$T!("^"[MEAL) KIL S X=MEAL D TR^FH S MEAL=X
"RTN","FHORE2",8,0)
 S:$P("ALL",MEAL,1)="" MEAL="A" I "BNEA"'[MEAL!(MEAL'?1U) W *7,!,"Select B for Breakfast, N for Noon, E for Evening or ALL for all meals" G N2
"RTN","FHORE2",9,0)
N3 R !!,"Do you want Labels? N// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Enter YES or NO" G N3
"RTN","FHORE2",10,0)
 S LAB=X?1"Y".E
"RTN","FHORE2",11,0)
 S FHLBFLG=1 I LAB>0 D  I FHLBFLG=0 Q
"RTN","FHORE2",12,0)
 .W ! K DIR,LABSTART S DIR(0)="NA^1:10",DIR("A")="If using laser label sheets, what row do you want to begin printing at? ",DIR("B")=1 D ^DIR
"RTN","FHORE2",13,0)
 .I $D(DIRUT) S FHLBFLG=0 Q
"RTN","FHORE2",14,0)
 .S LABSTART=Y Q
"RTN","FHORE2",15,0)
 I 'LAB W !!,"The list requires a 132 column printer.",!
"RTN","FHORE2",16,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select "_$S(LAB:"LABEL",1:"LIST")_" Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORE2",17,0)
 I $D(IO("Q")) S FHPGM="^FHORE21",FHLST="FHP^LAB^DTE^MEAL^LABSTART" D EN2^FH G KIL
"RTN","FHORE2",18,0)
 U IO D ^FHORE21 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORE2",19,0)
KIL K %,%H,%I,%DT,A1,ADM,ANS,BAG,D1,D3,FHDFN,DFN,DIC,DP,DTP,DTE,FHDU,FHLD,FHOR,FHP,H1,IS,K,K1,K2,KK,L,L1,LAB,LABSTART,M1,M2,MEAL,N,N1,N2,O1,OLW,FHORD,P0,P1,P2,PG,POP,RM,S1,TIM,W1,WARD,X,X2,Y K ^TMP($J) Q
"RTN","FHORE21")
0^214^B29199963
"RTN","FHORE21",1,0)
FHORE21 ; HISC/REL/NCA - List Early/Late Trays (cont) ;11/9/94  13:33 
"RTN","FHORE21",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORE21",3,0)
 S D1=DTE,COUNT=0,LINE=1 K ^TMP($J) S ANS=""
"RTN","FHORE21",4,0)
F2 S D1=$O(^FHPT("ADLT",D1)) G:D1<1!(D1\1'=DTE) P0 S FHDFN=0
"RTN","FHORE21",5,0)
F3 S FHDFN=$O(^FHPT("ADLT",D1,FHDFN)) G:FHDFN<1 F2 S ADM=0
"RTN","FHORE21",6,0)
F4 S ADM=$O(^FHPT("ADLT",D1,FHDFN,ADM)) G:ADM<1 F3
"RTN","FHORE21",7,0)
 I $S($D(^DGPM(ADM,0)):$P(^(0),"^",17),1:1) G F7
"RTN","FHORE21",8,0)
 S Y(0)=$G(^FHPT(FHDFN,"A",ADM,"EL",D1,0)) G:Y(0)="" F7
"RTN","FHORE21",9,0)
 S X=$G(^FHPT(FHDFN,"A",ADM,0)),OLW=$P(X,"^",11),IS=$P(X,"^",10)
"RTN","FHORE21",10,0)
 S W1=$P(X,"^",8),X2=$G(^FH(119.6,+W1,0)),WARD=$P(X2,"^",1)
"RTN","FHORE21",11,0)
 G:WARD="" F4 S P0=$P(X2,"^",8) I FHP,P0'=FHP G F4
"RTN","FHORE21",12,0)
 S M1=$P(Y(0),"^",2) I MEAL'="A",M1'=MEAL G F4
"RTN","FHORE21",13,0)
 D CUR G:FHLD'="" F4 S O1=Y
"RTN","FHORE21",14,0)
 S ^TMP($J,"EL",D1_"-"_$P(Y(0),"^",6),FHDFN_"-"_ADM)=WARD_"^"_P0_"^"_OLW_"^"_IS_"^"_O1_"^"_$P(Y(0),"^",2,4) G F4
"RTN","FHORE21",15,0)
P0 D NOW^%DTC S DTP=% D DTP^FH S H1=DTP,DTP=DTE\1 D DTP^FH S L1=DTP
"RTN","FHORE21",16,0)
 I LAB S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1
"RTN","FHORE21",17,0)
 S S1=LAB=2*5+36
"RTN","FHORE21",18,0)
P1 S M2="Z",PG=0 D:'LAB HDR
"RTN","FHORE21",19,0)
 S N1="" F  S N1=$O(^TMP($J,"EL",N1)) Q:N1=""!(ANS="^")  S N2="" F  S N2=$O(^TMP($J,"EL",N1,N2)) Q:N2=""  S Y=^(N2) D P2 Q:ANS="^"
"RTN","FHORE21",20,0)
 ;
"RTN","FHORE21",21,0)
 D ^FHOMELT  ;List Outpatient (Recurring Meals) Late Trays
"RTN","FHORE21",22,0)
 I LAB<1 W !!
"RTN","FHORE21",23,0)
 S FHPREV="" D:'LAB OPHDR
"RTN","FHORE21",24,0)
 F N1="B","N","E"  D
"RTN","FHORE21",25,0)
 .I '$D(^TMP($J,N1)) Q
"RTN","FHORE21",26,0)
 .S N2="" F  S N2=$O(^TMP($J,N1,N2)) Q:N2=""!(ANS="^")  D
"RTN","FHORE21",27,0)
 ..S FHDATA=$G(^TMP($J,N1,N2)),FHLOC=$P(FHDATA,U,1),FHDFN=$P(FHDATA,U,2)
"RTN","FHORE21",28,0)
 ..S FHBAG=$P(FHDATA,U,3),(O1,FHDIET)=$P(FHDATA,U,4) D PATNAME^FHOMUTL
"RTN","FHORE21",29,0)
 ..S (WARD,FHLOCNM)=$E($P($G(^FH(119.6,FHLOC,0)),U,1),1,22)
"RTN","FHORE21",30,0)
 ..S FHIP=$P($G(^FHPT(FHDFN,0)),U,5),FHIPD=""
"RTN","FHORE21",31,0)
 ..I FHIP'="" S (IS,FHIPD)=$P($G(^FH(119.4,FHIP,0)),U,2)_$P($G(^FH(119.4,FHIP,0)),U,3)
"RTN","FHORE21",32,0)
 ..S P1=FHPTNM,RM="",BID=FHBID,TIM=$P(N2,"~",1),M1=N1
"RTN","FHORE21",33,0)
 ..I LAB<1 D OUTP
"RTN","FHORE21",34,0)
 ..I LAB>0,LAB<3 D P3
"RTN","FHORE21",35,0)
 ..I LAB>2 D LL Q
"RTN","FHORE21",36,0)
 I LAB>2 D DPLL^FHLABEL K ^TMP($J) Q
"RTN","FHORE21",37,0)
 I LAB<3 F K=1:1:$S('LAB:1,1:18) W !
"RTN","FHORE21",38,0)
 Q
"RTN","FHORE21",39,0)
P2 S FHDFN=+N2,WARD=$P(Y,"^",1),P0=$P(Y,"^",2),OLW=$P(Y,"^",3),IS=$P(Y,"^",4),O1=$P(Y,"^",5),M1=$P(Y,"^",6),TIM=$P(Y,"^",7),BAG=$P(Y,"^",8)
"RTN","FHORE21",40,0)
 I IS S IS=^FH(119.4,IS,0),IS=$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHORE21",41,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORE21",42,0)
 S Y=^DPT(DFN,0),P1=$P(Y,"^",1) D PID^FHDPA
"RTN","FHORE21",43,0)
 S RM=$G(^DPT(DFN,.101)) I LAB>2 D LL Q
"RTN","FHORE21",44,0)
 G:LAB P3
"RTN","FHORE21",45,0)
 I $Y>(IOSL-10) D HDR Q:ANS="^"  W !!?56,$S(M1="B":"Breakfast ",M1="N":"   Noon ",1:" Evening "),$J(TIM,6),! S M2=M1_TIM
"RTN","FHORE21",46,0)
 S X=M1_TIM I X'=M2 W !!?56,$S(M1="B":"Breakfast ",M1="N":"   Noon ",1:" Evening "),$J(TIM,6),! S M2=X
"RTN","FHORE21",47,0)
 W !,$S(WARD'="":$E(WARD,1,10),1:"")_$S(RM'="":"/"_$E(RM,1,10),1:""),?24,$E(P1,1,22),?50,BID,?61,$S(IS'="":IS,1:""),?67,$S(BAG="Y":"YES",1:""),?73,O1
"RTN","FHORE21",48,0)
 Q
"RTN","FHORE21",49,0)
P3 S P1=$E(P1,1,22),WARD=$E(WARD,1,15),RM=$E(RM,1,10)
"RTN","FHORE21",50,0)
 W !,$S(M1="B":"Breakfast",M1="N":"  Noon ",1:" Evening"),?10,TIM,?(S1-12),L1 W:LAB=2 !
"RTN","FHORE21",51,0)
 W !,$E(P1,1,S1-5-$L(WARD)),?(S1-3-$L(WARD)),WARD
"RTN","FHORE21",52,0)
 W !,BID W:IS'="" ?(S1-3\2),IS W ?(S1-3-$L(RM)),RM W:LAB=2 !
"RTN","FHORE21",53,0)
 I $L(O1)<S1 W !,O1,!!
"RTN","FHORE21",54,0)
 E  S L=$S($L($P(O1,",",1,3))<S1:3,1:2) W !,$P(O1,",",1,L),!,$E($P(O1,",",L+1,5),2,99),!
"RTN","FHORE21",55,0)
 W:LAB=2 ! Q
"RTN","FHORE21",56,0)
OUTP ;
"RTN","FHORE21",57,0)
 I $Y>(IOSL-10) D OPHDR Q:ANS="^"
"RTN","FHORE21",58,0)
 S NEW=N1_$P(N2,"~",1) I FHPREV'=NEW W !!?56,$S(N1="B":"Breakfast ",N1="N":"   Noon ",1:" Evening "),$J($P(N2,"~",1),6),!
"RTN","FHORE21",59,0)
 W !,FHLOCNM
"RTN","FHORE21",60,0)
 D PATNAME^FHOMUTL W ?24,FHPTNM,?50,FHBID
"RTN","FHORE21",61,0)
 W ?61,FHIPD,?67,$S(FHBAG="Y":"YES",1:"")
"RTN","FHORE21",62,0)
 W ?73,FHDIET
"RTN","FHORE21",63,0)
 S FHPREV=N1_$P(N2,"~",1)
"RTN","FHORE21",64,0)
 Q
"RTN","FHORE21",65,0)
F7 K ^FHPT("ADLT",D1,FHDFN,ADM) G F4
"RTN","FHORE21",66,0)
CUR S A1=0,(Y,FHLD,FHOR)="" F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK>D1)  S A1=KK
"RTN","FHORE21",67,0)
 Q:'A1  S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2),X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHORE21",68,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHORE21",69,0)
 S Y="" F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORE21",70,0)
 Q
"RTN","FHORE21",71,0)
DP K N S Y=$G(^FH(119.73,+P0,1))
"RTN","FHORE21",72,0)
 F KK=1,2,3,7,8,9,13,14,15 S X=$P(Y,"^",KK) I X'="" S N($S(KK<7:"B",KK<13:"N",1:"E"),X)=""
"RTN","FHORE21",73,0)
 Q
"RTN","FHORE21",74,0)
HDR ; Print Header (INPATIENT)
"RTN","FHORE21",75,0)
 I PG,IOST?1"C-".E R !!,"Press RETURN to continue or ""^"" to exit. ",ANS:DTIME S:'$T!(ANS["^") ANS="^" Q:ANS="^"  I "^"'[ANS W !,"Enter Return or ""^""." G HDR
"RTN","FHORE21",76,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHORE21",77,0)
 W !?32,"I N P A T I E N T   E A R L Y / L A T E   T R A Y S",?110,H1
"RTN","FHORE21",78,0)
 W !,$S('FHP:"Consolidated",1:$P(^FH(119.73,FHP,0),"^",1)),?61,L1,?121,"Page ",PG
"RTN","FHORE21",79,0)
 W !!,"Ward/Room",?24,"Patient",?50,"ID#",?61,"Iso   Bag   Current-Diet",! Q
"RTN","FHORE21",80,0)
OPHDR ; Print Header (OUTPATIENT)
"RTN","FHORE21",81,0)
 I PG,IOST?1"C-".E R !!,"Press RETURN to continue or ""^"" to exit. ",ANS:DTIME S:'$T!(ANS["^") ANS="^" Q:ANS="^"  I "^"'[ANS W !,"Enter Return or ""^""." G OPHDR
"RTN","FHORE21",82,0)
 W:$E(IOST,1,2)="C-" @IOF S PG=PG+1
"RTN","FHORE21",83,0)
 W !?32,"O U T P A T I E N T   E A R L Y / L A T E   T R A Y S",?110,H1
"RTN","FHORE21",84,0)
 W !,$S('FHP:"Consolidated",1:$P(^FH(119.73,FHP,0),"^",1)),?61,L1,?121,"Page ",PG
"RTN","FHORE21",85,0)
 W !!,"Ward/Room",?24,"Patient",?50,"ID#",?61,"Iso   Bag   Current-Diet",! Q
"RTN","FHORE21",86,0)
LL ;
"RTN","FHORE21",87,0)
 S FHCOL=$S(LAB=3:3,1:2)
"RTN","FHORE21",88,0)
 I LABSTART>1 F FHLABST=1:1:(LABSTART-1)*FHCOL D  S LABSTART=1
"RTN","FHORE21",89,0)
 .I LAB=3 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6)="" D LL3^FHLABEL
"RTN","FHORE21",90,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6,PCL7,PCL8)="" D LL4^FHLABEL
"RTN","FHORE21",91,0)
 .Q
"RTN","FHORE21",92,0)
 S SL1=$S(LAB=3:25,1:38)
"RTN","FHORE21",93,0)
 S MEALTM=$S(M1="B":"Breakfast",M1="N":"Noon",1:"Evening")_"  "_TIM
"RTN","FHORE21",94,0)
 S BIDIS=BID_$E("        ",1,12-$L(BID))_IS
"RTN","FHORE21",95,0)
 S WARD=$E(WARD,1,15),WLN=$L(WARD),RM=$E(RM,1,10)
"RTN","FHORE21",96,0)
 I LAB=3 D
"RTN","FHORE21",97,0)
 .S P1=$E(P1,1,24-WLN)
"RTN","FHORE21",98,0)
 .S (PCL1,PCL6)="",PCL2=MEALTM_$J(L1,25-$L(MEALTM))
"RTN","FHORE21",99,0)
 .S PCL3=P1_$J(WARD,25-$L(P1)),PCL4=BIDIS_$J(RM,25-$L(BIDIS))
"RTN","FHORE21",100,0)
 .S PCL5=$E(O1,1,29) D LL3^FHLABEL
"RTN","FHORE21",101,0)
 I LAB=4 D
"RTN","FHORE21",102,0)
 .S P1=$E(P1,1,37-WLN)
"RTN","FHORE21",103,0)
 .S (PCL1,PCL2,PCL7,PCL8)="",PCL3=MEALTM_$J(L1,38-$L(MEALTM))
"RTN","FHORE21",104,0)
 .S PCL4=P1_$J(WARD,38-$L(P1)),PCL5=BIDIS_$J(RM,38-$L(BIDIS))
"RTN","FHORE21",105,0)
 .S PCL6=$E(O1,1,42) D LL4^FHLABEL
"RTN","FHORE21",106,0)
 Q
"RTN","FHORE3")
0^215^B5498065
"RTN","FHORE3",1,0)
FHORE3 ; HISC/REL - Cancel Early/Late Trays ;6/21/96  10:30 ;
"RTN","FHORE3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005;
"RTN","FHORE3",3,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL D NOW^%DTC S NOW=%
"RTN","FHORE3",4,0)
S0 S CT=0 K N,NN W !!,"Order     Date        Time       Meal",!
"RTN","FHORE3",5,0)
 F K=NOW:0 S K=$O(^FHPT(FHDFN,"A",ADM,"EL",K)) Q:K<1  S CT=CT+1,N(CT)=K,Y=^(K,0) D D3
"RTN","FHORE3",6,0)
 I 'CT W !,"No future early or late trays to cancel" G KIL
"RTN","FHORE3",7,0)
D0 R !!,"Cancel Which Early/Late Orders (or ALL)? ",MEAL:DTIME G:'$T!("^"[MEAL) AB S:$P("all",MEAL,1)="" MEAL="A" S:$P("ALL",MEAL,1)="" MEAL="1-"_CT
"RTN","FHORE3",8,0)
 F K=1:1 S K1=$P(MEAL,",",K) Q:K1=""  S K2=$S(K1["-":$P(K1,"-",2),1:+K1),K1=+K1 D CK G:'K1 S0 F K3=K1:1:K2 D D2
"RTN","FHORE3",9,0)
 W "  ... done" G KIL
"RTN","FHORE3",10,0)
CK I K1<1!(K1>CT)!(K1'?1N.N) G C1
"RTN","FHORE3",11,0)
 I K2<1!(K2>CT)!(K2'?1N.N) G C1
"RTN","FHORE3",12,0)
 Q:K2'<K1
"RTN","FHORE3",13,0)
C1 W *7,!,"  Enter numbers, or range, of desired orders or ALL (E.G.,  1,3,4 or 3-5 or 1,3-5 etc.)" S K1=0 Q
"RTN","FHORE3",14,0)
D2 S DTE=N(K3) S FHORN=$P($G(^FHPT(FHDFN,"A",ADM,"EL",DTE,0)),"^",7) I FHORN S:'$D(NN(FHORN,DTE)) NN(FHORN,DTE)=""
"RTN","FHORE3",15,0)
 K ^FHPT(FHDFN,"A",ADM,"EL",DTE),^FHPT("ADLT",DTE,FHDFN)
"RTN","FHORE3",16,0)
 S %=$S($D(^FHPT(FHDFN,"A",ADM,"EL",0)):$P(^(0),"^",4),1:0)-1 S:%'<0 $P(^(0),"^",4)=%
"RTN","FHORE3",17,0)
 Q:'FHORN  F I9=NOW:0 S I9=$O(^FHPT(FHDFN,"A",ADM,"EL",I9)) Q:I9<1  I $P(^(I9,0),"^",7)=FHORN G D21
"RTN","FHORE3",18,0)
 D CODE^FHWOR3 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORE3",19,0)
D21 Q
"RTN","FHORE3",20,0)
D3 S MEAL=$P(Y,"^",2),TIM=$P(Y,"^",3),BAG=$P(Y,"^",4),DTP=K\1 D DTP^FH
"RTN","FHORE3",21,0)
 W !,$J(CT,4),"   ",DTP
"RTN","FHORE3",22,0)
 W $J(TIM,10),"   ",$S(MEAL="B":"Breakfast",MEAL="N":"  Noon ",1:" Evening") W:BAG="Y" ?45,"Bagged Meal" Q
"RTN","FHORE3",23,0)
AB W *7,!!,"Early/Late Tray operation TERMINATED - No change!"
"RTN","FHORE3",24,0)
KIL K %,%H,%I,ADM,ALL,BAG,CT,DA,WARD,FHDFN,DFN,DTE,DTP,FHORN,FHWF,FHPV,I9,K,K1,K2,K3,MEAL,N,NN,NOW,TIM,X,Y Q
"RTN","FHORO")
0^216^B5737899
"RTN","FHORO",1,0)
FHORO ; HISC/REL - Additional Orders ;2/22/95  10:06 ;
"RTN","FHORO",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORO",3,0)
EN1 ; Enter Order
"RTN","FHORO",4,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL D R1 G:'$D(DFN) KIL G:'$D(FHDFN) KIL D ORD G:'FHWF A0
"RTN","FHORO",5,0)
 ; Set HL7
"RTN","FHORO",6,0)
 D AO^FHWOR1,KIL I $D(MSG) D MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORO",7,0)
A0 W "  ... done" Q
"RTN","FHORO",8,0)
R1 ; Process Order
"RTN","FHORO",9,0)
 D LIS
"RTN","FHORO",10,0)
R2 R !!,"Additional Order: ",COM:DTIME G:'$T!(COM="")!(COM["^") AB I COM'?.ANP W *7," ??" G R2
"RTN","FHORO",11,0)
 I COM?1."?" W *7,!,"Enter your dietetic request. Do not use ^ or ? in your response." G R2
"RTN","FHORO",12,0)
 I $L(COM)>160 W *7,!,"Order not accepted! - Enter 1-160 character order" G R2
"RTN","FHORO",13,0)
 Q:FHWF=2
"RTN","FHORO",14,0)
R3 R !,"Ok to Enter Request? Y// ",YN:DTIME G AB:'$T!(YN["^") S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G R3
"RTN","FHORO",15,0)
 G:YN'?1"Y".E AB Q
"RTN","FHORO",16,0)
ORD ; Set Order
"RTN","FHORO",17,0)
 L +^FHPT(FHDFN,"A",ADM,"OO",0) S:'$D(^FHPT(FHDFN,"A",ADM,"OO",0)) ^FHPT(FHDFN,"A",ADM,"OO",0)="^115.06^^"
"RTN","FHORO",18,0)
 S FHDR=$P(^FHPT(FHDFN,"A",ADM,"OO",0),"^",3)+1,$P(^(0),"^",3,4)=FHDR_"^"_FHDR L -^FHPT(FHDFN,"A",ADM,"OO",0)
"RTN","FHORO",19,0)
 D NOW^%DTC S NOW=%
"RTN","FHORO",20,0)
 S ^FHPT(FHDFN,"A",ADM,"OO",FHDR,0)=FHDR_"^"_NOW_"^"_COM_"^"_DUZ_"^A"
"RTN","FHORO",21,0)
 S ^FHPT("AOO",FHDFN,ADM,FHDR)="" S EVT="O^O^"_FHDR D ^FHORX Q
"RTN","FHORO",22,0)
AB W *7,!!,"Order entry is TERMINATED - No request entered!"
"RTN","FHORO",23,0)
KIL K %,%H,%I,%T,A,C,CT,ADM,ALL,COM,DA,FHDFN,DFN,DTP,FHDR,FHPV,FHWF,G,K,I,NOW,POP,WARD,X,X1,X2,Y,YN Q
"RTN","FHORO",24,0)
LIS D NOW^%DTC S X1=%,X2=-1 D C^%DTC S A=X
"RTN","FHORO",25,0)
 S CT=0 W !!,"Additional Orders Last 24 Hours:",!
"RTN","FHORO",26,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"OO",K)) Q:K<1  S X=^(K,0) I $P(X,"^",2)'<A,$P(X,"^",5)'="X" D L1
"RTN","FHORO",27,0)
 W:'CT !?5,"None Entered." Q
"RTN","FHORO",28,0)
L1 S DTP=$P(X,"^",2),CT=1 D DTP^FH W !,DTP,?20,$P(X,"^",3) Q
"RTN","FHORR")
0^217^B5932851
"RTN","FHORR",1,0)
FHORR ; HISC/NCA/JH - Diet Order Utilities For OE/RR Interface ;10/10/00  14:54
"RTN","FHORR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORR",3,0)
OE ; File OE/RR Diet Order For Re-instated Diet Order
"RTN","FHORR",4,0)
 Q:$P(FHNO1,"^",7)="X"!($P(FHNO1,"^",7)="P")
"RTN","FHORR",5,0)
 S FHO=$P(FHNO1,"^",2,6),VAL="" D VAL^FHWORP(FHO,.VAL) Q:VAL=""
"RTN","FHORR",6,0)
 S FHNEW=$S($P(FHNO1,"^",7)'="":"N",1:"D")_";"_ADM_";"_FHORD1_";"_D2_";"_$P(FHNO1,"^",10)_";"_$P(FHNO1,"^",7)_";"_FHNO2_";"_$P(FHNO1,"^",8)_";"_0_";"_VAL
"RTN","FHORR",7,0)
 S (FHSTS,FHDU)=$S(D2>NOW:8,1:6) S FHDIE=FHORD
"RTN","FHORR",8,0)
 I $P(FHNO1,"^",7)="N" D NPO D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG S FHORD=FHDIE K FHDIE G SAV
"RTN","FHORR",9,0)
 I $P(FHNO1,"^",7)="" D DO D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORR",10,0)
 S FHORD=FHDIE K FHDIE
"RTN","FHORR",11,0)
SAV S:FHDU $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD1,0),"^",15)=FHDU Q
"RTN","FHORR",12,0)
DO ; Code Re-instated Diet Orders
"RTN","FHORR",13,0)
 K MSG S FILL=$G(FHNEW)
"RTN","FHORR",14,0)
 S SDT=D2,DATE1="" D SET
"RTN","FHORR",15,0)
 ; Code MSH, PID, and PV1
"RTN","FHORR",16,0)
 D MSH^FHWOR
"RTN","FHORR",17,0)
 ; code ORC
"RTN","FHORR",18,0)
 S MSG(4)="ORC|SN||"_FILL_"^FH||||^^^"_SDT_"^"_DATE1_"|||"_DUZ_"||"_FHPV_"|||"_DATE
"RTN","FHORR",19,0)
 ; Code ODS
"RTN","FHORR",20,0)
 F A7=5:1 S A8=$P(FHNO1,"^",A7-3) Q:'A8  D
"RTN","FHORR",21,0)
 .S MSG(A7)="ODS|ZT||^^^"_A8_"^"_$P($G(^FH(111,+A8,0)),"^",1)_"^99FHD" Q
"RTN","FHORR",22,0)
 K A7,A8,DATE,DATE1,FILL,FHWRD,HOSP,RM,SITE,SDT,VAL
"RTN","FHORR",23,0)
 Q
"RTN","FHORR",24,0)
NPO ; Code Re-instated NPO Order
"RTN","FHORR",25,0)
 K MSG S FILL=$G(FHNEW) Q:FILL=""
"RTN","FHORR",26,0)
 S SDT=D2,DATE1="" D SET
"RTN","FHORR",27,0)
 ; Code MSH, PID, and PV1
"RTN","FHORR",28,0)
 D MSH^FHWOR
"RTN","FHORR",29,0)
 ; code ORC
"RTN","FHORR",30,0)
 S MSG(4)="ORC|SN||"_FILL_"^FH||||^^^"_SDT_"^"_DATE1_"|||"_DUZ_"||"_FHPV_"|||"_DATE
"RTN","FHORR",31,0)
 ; Code ODS
"RTN","FHORR",32,0)
 S MSG(5)="ODS|D||^^^FH-5^NPO^99OTH|"_COM
"RTN","FHORR",33,0)
 K DATE,DATE1,FILL,FHWRD,HOSP,RM,SITE,SDT
"RTN","FHORR",34,0)
 Q
"RTN","FHORR",35,0)
SET ; Set Date/Time in HL7 format
"RTN","FHORR",36,0)
 S DATR=$S($P(FHNO1,"^",10):$P(FHNO1,"^",10),1:"")
"RTN","FHORR",37,0)
 S:SDT SDT=$$FMTHL7^XLFDT(SDT)
"RTN","FHORR",38,0)
 S:NOW DATE=$$FMTHL7^XLFDT(NOW)
"RTN","FHORR",39,0)
 S:DATR DATE1=$$FMTHL7^XLFDT(DATR) S:'DATE1 DATE1="" K DATR
"RTN","FHORR",40,0)
 Q
"RTN","FHORR",41,0)
ORD ; Get next order # for re-instate diet order
"RTN","FHORR",42,0)
 L +^FHPT(FHDFN,"A",ADM,"DI",0)
"RTN","FHORR",43,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI",0)) S ^FHPT(FHDFN,"A",ADM,"DI",0)="^115.02A^^"
"RTN","FHORR",44,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",0),FHORD1=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_FHORD1_"^"_($P(X,"^",4)+1)
"RTN","FHORR",45,0)
 L -^FHPT(FHDFN,"A",ADM,"DI",0) Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD1))  G ORD
"RTN","FHORT1")
0^218^B15600227
"RTN","FHORT1",1,0)
FHORT1 ; HISC/REL/NCA - Tubefeeding ;8/19/96  14:55 ;
"RTN","FHORT1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT1",3,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL
"RTN","FHORT1",4,0)
 ; Set HL7
"RTN","FHORT1",5,0)
 D E0 G:'DFN KIL G:'FHDFN KIL S TF=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4) D:TF CAN^FHORT2 D ^FHORT11 G:'FHWF KIL
"RTN","FHORT1",6,0)
 D TF^FHWOR5 F FHTF=0:0 S FHTF=$O(TUN(FHTF)) Q:FHTF<1  S XX=$G(TUN(FHTF)) D TF1^FHWOR5
"RTN","FHORT1",7,0)
 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORT1",8,0)
 G KIL
"RTN","FHORT1",9,0)
E0 ; Process tubefeeding
"RTN","FHORT1",10,0)
 S (NO,T1,T2,T3,T4)=0,(PRO,TFCOM)="" K TUN
"RTN","FHORT1",11,0)
 S TF=$P(^FHPT(FHDFN,"A",ADM,0),"^",4) G:TF<1 E3
"RTN","FHORT1",12,0)
 W !!,"An ACTVE TUBEFEEDING ORDER exists!" D DIS^FHORT2
"RTN","FHORT1",13,0)
 R !!,"Do You Wish to Cancel the Existing Tubefeeding and Enter a New One? Y// ",ANS:DTIME I '$T!(ANS="^")  W *7,!!,"No order entered!" S (DFN,FHDFN)="" Q
"RTN","FHORT1",14,0)
 S:ANS="" ANS="Y" S X=ANS D TR^FH S ANS=X
"RTN","FHORT1",15,0)
 I $P("YES",ANS,1)'="",$P("NO",ANS,1)'="" W !!,"Answer YES to Cancel Existing Order and Enter a New One.",!,"Answer NO to Edit the Existing Tubefeeding Order.",!,"Enter ""^"" to Exit Completely." G E0
"RTN","FHORT1",16,0)
 I ANS?1"Y".E K TUN S TFCOM="",NO=0
"RTN","FHORT1",17,0)
 I ANS'?1"Y".E W *7,!!,"Edit the Existing Tubefeeding." S TFCOM=$P(T,"^",5)
"RTN","FHORT1",18,0)
 I NO=5 W !!,*7,"There are FIVE products already!",!,"You may edit them, or delete a product before adding any."
"RTN","FHORT1",19,0)
E3 D ^FHORT10 Q:'DFN  Q:'FHDFN
"RTN","FHORT1",20,0)
 I $O(TUN(0))="" W !!,"No Tubefeeding Products selected." G AB
"RTN","FHORT1",21,0)
 S (TC,TK)=0 W !
"RTN","FHORT1",22,0)
 F K=0:0 S K=$O(TUN(K)) Q:K<1  D
"RTN","FHORT1",23,0)
 .S TC=TC+$P(TUN(K),"^",4)+$P(TUN(K),"^",5)
"RTN","FHORT1",24,0)
 .S TK=TK+$P(TUN(K),"^",6),STR=$P(TUN(K),"^",2)
"RTN","FHORT1",25,0)
 .S PRO=$P(TUN(K),"^",1)
"RTN","FHORT1",26,0)
 .W !,"Product: ",$P($G(^FH(118.2,PRO,0)),"^",1),", "
"RTN","FHORT1",27,0)
 .W $S(STR=4:"Full",STR=2:"1/2",STR=1:"1/4",1:"3/4"),", "
"RTN","FHORT1",28,0)
 .W $P(TUN(K),"^",3)
"RTN","FHORT1",29,0)
 .Q
"RTN","FHORT1",30,0)
 W !!,"Total Kcal: ",TK,?36,"Total Quantity: ",TC
"RTN","FHORT1",31,0)
 I TC>5000 W *7,!!,"WARNING: Total amount exceeds 5000cc: ",TC," cc",!,"Please Edit the Tubefeeding and Modify." G E3
"RTN","FHORT1",32,0)
E31 R !!,"Is this Correct ? Y// ",X:DTIME G:'$T!(X="^") AB S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G E31
"RTN","FHORT1",33,0)
 G:X'?1"Y".E E3
"RTN","FHORT1",34,0)
 G:TC>5000 AB
"RTN","FHORT1",35,0)
E4 W !,"Comment: ",$S(TFCOM'="":TFCOM_"// ",1:"") R X:DTIME G:'$T!(X[U) AB I X'?.ANP W *7," ??" G E4
"RTN","FHORT1",36,0)
 I $L(X)>160!(X?1"?".E) W *7,!,"Enter a comment of up to 160 characters" G E4
"RTN","FHORT1",37,0)
 I X'="" S TFCOM=X
"RTN","FHORT1",38,0)
E5 R !,"Cancel all current or future tray orders? Y// ",YN:DTIME G:'$T!(YN["^") AB S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G E5
"RTN","FHORT1",39,0)
 S CAN=YN?1"Y".E
"RTN","FHORT1",40,0)
E6 Q:FHWF=2  R !,"Ok to Enter Order? Y// ",YN:DTIME G:'$T!(YN["^") AB S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G E6
"RTN","FHORT1",41,0)
 G:YN'?1"Y".E AB Q
"RTN","FHORT1",42,0)
KIL K %,%H,%I,A,A1,A2,A3,A4,ADM,ALL,ANS,C,CAN,COM,TFCOM,CS,D1,D2,D3,D4,FHDFN,DFN,DX,E,PID,BID,DIC,FHD,FHDR,FHORD,FLG,FLG1,FHLD,FHOR,FHPAR,FHWF,FHPV,FHTF,FHDU,I,K,NO,NOW,DTP,P,P1,P2,POP
"RTN","FHORT1",43,0)
 K OLDT,FHSAV,FHORN,MNUM,PR,PRO,NU,QUA,S1,S2,S3,STR,ST1,ST3,T,T1,T2,T3,T4,TC,TK,TF,TF2,TP,TT,TU,TUN,TW,TYP,UNT,WARD,WRD,X,X1,X2,XX,Y,Y0,Y2,YN,YY,Z,Z1,ZZ Q
"RTN","FHORT1",44,0)
AB W *7,!!,"Tubefeeding Order TERMINATED - No order entered!" S (DFN,FHDFN)="" Q
"RTN","FHORT10")
0^219^B27414587
"RTN","FHORT10",1,0)
FHORT10 ; HISC/REL/NCA - Tubefeeding (cont) ;8/6/96  12:00
"RTN","FHORT10",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT10",3,0)
E1 S FLG1=0 W ! K DIC S DIC="^FH(118.2,",DIC(0)="AEQM",STR=4,QUA=""
"RTN","FHORT10",4,0)
 S DIC("A")="Select Tubefeeding Product: " D ^DIC K DIC G AB:"^"[X!$D(DTOUT),E1:Y<1
"RTN","FHORT10",5,0)
E1A I $D(TUN(+Y)) S STR=$P(TUN(+Y),"^",2),QUA=$P(TUN(+Y),"^",3) S X=QUA D:X'="" FIX S QUA=X S:'STR STR=4
"RTN","FHORT10",6,0)
 E  G:NO>4 AB S $P(TUN(+Y),"^",1)=+Y,NO=NO+1 W !?5,"Product ",$P($G(^FH(118.2,+Y,0)),"^",1)," added"
"RTN","FHORT10",7,0)
E10 W !,"Product: ",$P($G(^FH(118.2,+Y,0)),"^",1)_"// " R X:DTIME G:'$T!(X=U) AB
"RTN","FHORT10",8,0)
 I X="" G E11
"RTN","FHORT10",9,0)
 I X="@" K TUN(+Y) S NO=NO-1 W "  Product including Strength and Quantity DELETED." S FLG1=1 G MORE
"RTN","FHORT10",10,0)
 I X["?" D HELP^FHORTR G E10
"RTN","FHORT10",11,0)
 S OLDT=$G(TUN(+Y))
"RTN","FHORT10",12,0)
 S Y=$$SRCH^FHORTR(X) I 'Y S Y=+OLDT G E10
"RTN","FHORT10",13,0)
 I +Y'=+OLDT D  G E1A
"RTN","FHORT10",14,0)
 .I '$D(TUN(+Y)) K TUN(+OLDT) W !!,$P($G(^FH(118.2,+OLDT,0)),"^",1)," Replaced With ",$P($G(^FH(118.2,+Y,0)),"^",1)
"RTN","FHORT10",15,0)
 .Q
"RTN","FHORT10",16,0)
E11 S T(0)=^FH(118.2,+Y,0),(FLG,FLG1)=0,S2="",TT=+Y
"RTN","FHORT10",17,0)
 I $E($P(T(0),"^",3),$L($P(T(0),"^",3)))?1"G" S FLG=1 G F0
"RTN","FHORT10",18,0)
E2 W !,"Strength: (1=1/4, 2=1/2, 3=3/4, 4=FULL): ",STR,"// " R X:DTIME G AB:'$T!(X=U),F0:X=""
"RTN","FHORT10",19,0)
 I X'?1N!(X<1)!(X>4) W *7,!!,"Enter 1 to 4 to indicate strength." G E2
"RTN","FHORT10",20,0)
 S STR=+X
"RTN","FHORT10",21,0)
F0 W !,"Enter quantity as 2000 K, 100 CC/HOUR, 8 OZ/TID, 500 CC/HR X 16, 20 GRAMS/DAY etc."
"RTN","FHORT10",22,0)
E3 W !,"Quantity: ",$S(QUA:QUA_"// ",1:"") R X:DTIME G:'$T!(X["^") AB S:X="" X=QUA G:"?"[X F5 D TR^FH
"RTN","FHORT10",23,0)
 I X=QUA G:STR=$P(TUN(TT),"^",2) MORE
"RTN","FHORT10",24,0)
 S (TC,TK,TP,TW)=0
"RTN","FHORT10",25,0)
 I $E(X,$L(X))="K" S X=X_"/QD"
"RTN","FHORT10",26,0)
 S A1="" F K=1:1:$L(X) S Z=$E(X,K) I Z'=" " S A1=A1_Z
"RTN","FHORT10",27,0)
 F K=1:1:$L(A1) Q:$E(A1,K)?1U
"RTN","FHORT10",28,0)
 S A2=$E(A1,K,99),A1=+$E(A1,1,K-1)
"RTN","FHORT10",29,0)
 I A2?1"G".E,'FLG W *7,!!,"Cannot enter ""GRAMS"" if AMT/UNIT is specified in CC's." G F0
"RTN","FHORT10",30,0)
 S A3=$P(A2,"/",2),A2=$P(A2,"/",1)
"RTN","FHORT10",31,0)
 I FLG S XX=$F("KCAL CC ML OZ TBSP",A2) I XX W *7,!!,"Enter quantity in powder form when AMT/UNIT is in Grams (e.g., # GMS, 1 PKG, or 1 U/Frequency)." G F0
"RTN","FHORT10",32,0)
 D:FLG GRAM F K=1:1:11 S S1=$P("KCAL CC ML OZ UNITS BOTTLES CANS PKG TBSP GMS GRAMS"," ",K) G:$P(S1,A2,1)="" F3
"RTN","FHORT10",33,0)
 G F5
"RTN","FHORT10",34,0)
F3 S S1=$S(K=1:1,K<4:2,K=4:3,K=9:5,K>9:6,1:4),A2=$P(A3,"X",1),A3=$P(A3,"X",2)
"RTN","FHORT10",35,0)
 G:A2'?1U.E F5 I $L(A2)=1,"DH"'[A2 G F5
"RTN","FHORT10",36,0)
 S S2=$F("DAY QD QH HOUR HR BID TID Q2H Q3H Q4H Q6H QID",A2) G:'S2 F5 S S2=$S(S2<8:1,S2<19:2,S2<23:3,S2<27:4,S2<31:5,S2<35:6,S2<39:7,1:8)
"RTN","FHORT10",37,0)
 S QUA=A1_" "_$P("KCAL CC OZ UNITS TBSP GM"," ",S1),QUA=QUA_" "_$P($T(F6),";",S2+2)
"RTN","FHORT10",38,0)
 S:A3'="" QUA=QUA_" X "_(+A3)_" "_$S(A3["F":"fdgs",1:"hrs")
"RTN","FHORT10",39,0)
 I S1=1 S DX=$P(T(0),"^",4) G:'DX F5 S TK=A1,TC=A1/DX*$S(STR=4:1,STR=3:1.333,STR=2:2,1:4)
"RTN","FHORT10",40,0)
 I S1=4 S DX=+$P(T(0),"^",3) G:'DX F5 S TC=A1*DX*$S(STR=4:1,STR=3:1.333,STR=2:2,1:4)
"RTN","FHORT10",41,0)
 S:S1=2 TC=A1 S:S1=3 TC=A1*29.5 S:S1=5 TC=A1*15 I S1=6 S TC=0,A3=0 G C1
"RTN","FHORT10",42,0)
CC I 'A3 S A3=$P("1,24,2,3,12,8,6,4",",",S2) G C1
"RTN","FHORT10",43,0)
 I A3'["F" S A3=$S(S2=1:1,S2=2:A3,S2=3:2,S2=4:3,S2=5:A3\2,S2=6:A3\3,S2=7:A3\4,1:A3\6)
"RTN","FHORT10",44,0)
 E  S:S2=1 A3=1
"RTN","FHORT10",45,0)
C1 S TC=$J(TC*A3,0,0)
"RTN","FHORT10",46,0)
 W !!,"Quantity: ",QUA,"  -- Total: ",TC," cc"
"RTN","FHORT10",47,0)
 I TC>5000 W *7,!!,"WARNING: Total Amount should be between 0 to 5000 cc",!,"Please Edit Tubefeeding and Modify."
"RTN","FHORT10",48,0)
 S:TC'<1 TP=$S(STR=4:TC,STR=3:TC*.75,STR=2:TC/2,1:TC/4),TP=$J(TP,0,0),TW=TC-TP
"RTN","FHORT10",49,0)
 I S1'=1!(S1'=6) S TK="",DX=$P(T(0),"^",4) I DX S TK=DX*TP,TK=$J(TK,0,0)
"RTN","FHORT10",50,0)
 S $P(TUN(TT),"^",2,6)=STR_"^"_QUA_"^"_TP_"^"_TW_"^"_TK G:TC>5000 E1
"RTN","FHORT10",51,0)
MORE R !!,"Enter/Edit another Tubefeeding product ? N// ",ANS:DTIME G:'$T!(ANS="^") AB S:ANS="" ANS="N" S X=ANS D TR^FH S ANS=X
"RTN","FHORT10",52,0)
 I $P("YES",ANS,1)'="",$P("NO",ANS,1)'="" W *7,!,"Answer YES to Enter More Products or Edit Existing Product.",!,"Answer NO to End Entering and Editing and Process the Products.",!,"Enter ""^"" will Terminate process." G MORE
"RTN","FHORT10",53,0)
 I ANS?1"Y".E  D DISP^FHORTR G E1
"RTN","FHORT10",54,0)
 I FLG1,'NO S TF=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4) D:TF CAN^FHORT2
"RTN","FHORT10",55,0)
 Q
"RTN","FHORT10",56,0)
FIX ; Reset Quantity to parsable string
"RTN","FHORT10",57,0)
 S K=$F(X,"fdgs") I K>1 S X=$E(X,1,K-5)_"F"
"RTN","FHORT10",58,0)
 S K=$F(X,"hrs") I K>1 S X=$E(X,1,K-5)
"RTN","FHORT10",59,0)
 F K=1:1:8 S Z=" "_$P($T(F6),";",K+2) I X[Z G F1
"RTN","FHORT10",60,0)
 Q
"RTN","FHORT10",61,0)
F1 S X=$P(X,Z,1)_"/"_$P("QD QH BID TID Q2H Q3H Q4H Q6H"," ",K)_$P(X,Z,2) Q
"RTN","FHORT10",62,0)
GRAM ; Get the Grams for powder form
"RTN","FHORT10",63,0)
 Q:$E(A2,1)="G"
"RTN","FHORT10",64,0)
 S A1=A1*+$P(T(0),"^",3),A2="GRAM"
"RTN","FHORT10",65,0)
 Q
"RTN","FHORT10",66,0)
AB W *7,!!,"Tubefeeding Order TERMINATED - No order entered!" D:FHWF=2 WAIT^FHORD71 S (DFN,FHDFN)="" K TUN Q
"RTN","FHORT10",67,0)
F5 W *7,!!,"Units may be K for Kcals, C for cc's, O for oz. or U for units (e.g., cans)"
"RTN","FHORT10",68,0)
 W !,"Frequency may be DAY, HOUR, QD, QH, BID, TID, QID, Q2H, Q3H, Q4H or Q6H"
"RTN","FHORT10",69,0)
 W !,"May also input 100CC/HR X 16 for 16 hours or 100CC/Q3H X 6F for 6 feedings."
"RTN","FHORT10",70,0)
 W !,"When feeding is specified, it is taken into account other than the predetermined frequency interval.",!,"If Frequency is ordered per day, the Total cc is always the Units ordered."
"RTN","FHORT10",71,0)
 W !,"Valid quantity for powder form product can be ""# GRAMS"" as 20 G, GRAMS",!,"or GMS or as 1 PKG or 1 U and the frequency (e.g.,20 GRAMS/DAY, 1 PKG/TID).",! G F0
"RTN","FHORT10",72,0)
F6 ;;per Day;per Hour;Twice a Day;Three times a Day;Every 2 Hours;Every 3 Hours;Every 4 Hours;Every 6 Hours
"RTN","FHORT11")
0^220^B2965950
"RTN","FHORT11",1,0)
FHORT11 ; HISC/REL/NCA - File Tubefeeding Order ;9/4/96  09:18
"RTN","FHORT11",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT11",3,0)
 L +^FHPT(FHDFN,"A",ADM,"TF",0) S:'$D(^FHPT(FHDFN,"A",ADM,"TF",0)) ^FHPT(FHDFN,"A",ADM,"TF",0)="^115.04^^"
"RTN","FHORT11",4,0)
 S TF=$P(^FHPT(FHDFN,"A",ADM,"TF",0),"^",3)+1,$P(^(0),"^",3,4)=TF_"^"_TF L -^FHPT(FHDFN,"A",ADM,"TF",0)
"RTN","FHORT11",5,0)
 D NOW^%DTC S NOW=%,DT=NOW\1
"RTN","FHORT11",6,0)
 S ^FHPT(FHDFN,"A",ADM,"TF",TF,0)=NOW_"^^^^"_TFCOM_"^"_TC_"^"_TK_"^^^"_DUZ
"RTN","FHORT11",7,0)
 S TF2=0 F P=0:0 S P=$O(TUN(P)) Q:P<1  D TF1
"RTN","FHORT11",8,0)
 S ^FHPT(FHDFN,"A",ADM,"TF",TF,"P",0)="^115.1P^"_TF2_"^"_TF2
"RTN","FHORT11",9,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",4)=TF,^FHPT("ADTF",FHDFN,ADM)="",EVT="T^O^"_TF D ^FHORX
"RTN","FHORT11",10,0)
 S:FHWF'=2 (FHORN,FHSAV)=""
"RTN","FHORT11",11,0)
 I CAN S FHOR="^^^^",FHLD="X",TYP="",D1=NOW,D2="",D4=0,COM="Hold Tray due to Tubefeeding" D STR^FHORD7 I $P(^FHPT(FHDFN,"A",ADM,0),"^",7) S CAN=CAN+1 D CAN^FHNO5 K NO
"RTN","FHORT11",12,0)
 D POST^FHORT3 W:FHWF'=2 "  ... filed" Q
"RTN","FHORT11",13,0)
TF1 S TF2=TF2+1,^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2,0)=$P(TUN(P),"^",1,6)
"RTN","FHORT11",14,0)
 S ^FHPT(FHDFN,"A",ADM,"TF",TF,"P","B",+TUN(P),TF2)="" Q
"RTN","FHORT2")
0^221^B9988060
"RTN","FHORT2",1,0)
FHORT2 ; HISC/REL/NCA - Tubefeeding Inquiry/Cancel ;6/25/96  10:50 ;
"RTN","FHORT2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT2",3,0)
EN2 ; Current Tubefeeding
"RTN","FHORT2",4,0)
 S (ALL,TF)=0 D ^FHDPA Q:'DFN  Q:'FHDFN
"RTN","FHORT2",5,0)
 S TF=$P(^FHPT(FHDFN,"A",ADM,0),"^",4)
"RTN","FHORT2",6,0)
 I TF<1 W !!,"No Tubefeeding Order Exists" Q
"RTN","FHORT2",7,0)
DIS ; Display Tubefeeding
"RTN","FHORT2",8,0)
 S T=^FHPT(FHDFN,"A",ADM,"TF",TF,0),DTP=$P(T,"^",1),NO=0 D DTP^FH W !!,"Date Ordered: ",DTP
"RTN","FHORT2",9,0)
 W ! F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S Y=^(TF2,0),TUN(+Y)=Y,NO=NO+1 D D1
"RTN","FHORT2",10,0)
 S TFCOM=$P(T,"^",5)
"RTN","FHORT2",11,0)
 W !!,"Total KCAL: ",$P(T,"^",7),?42,"Total Quantity: ",$P(T,"^",6)," cc"
"RTN","FHORT2",12,0)
 W:TFCOM'="" !,"Comment: ",TFCOM Q
"RTN","FHORT2",13,0)
D1 S TUN=$P(Y,"^",1),STR=$P(Y,"^",2),QUA=$P(Y,"^",3)
"RTN","FHORT2",14,0)
 W !,"Product: ",$P($G(^FH(118.2,TUN,0)),"^",1),", ",$S(STR=4:"Full",STR=1:"1/4",STR=2:"1/2",1:"3/4")," Str., ",QUA Q
"RTN","FHORT2",15,0)
EN3 ; Cancel Tubefeeding
"RTN","FHORT2",16,0)
 D EN2 G:TF<1 KIL S FHD="N" D ASK G:FHD'="Y" KIL D CAN
"RTN","FHORT2",17,0)
 D CUR^FHORD7 I Y="" W *7,!!,"Note: NO current DIET ORDER exists for this patient!" G KIL
"RTN","FHORT2",18,0)
 G:"^^^^"'[FHOR KIL I FHLD'="" W *7,!!,"Note: Patient is on a WITHHOLD SERVICE Order!"
"RTN","FHORT2",19,0)
C1 R !!,"Do you wish to RESUME Tray Service? N// ",X:DTIME G:'$T!(X="^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G C1
"RTN","FHORT2",20,0)
 G:X'?1"Y".E KIL S A2=0 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK'<NOW)  I $P(^(KK,0),"^",2)=FHORD S A2=KK
"RTN","FHORT2",21,0)
 I 'A2 W *7,!!,"Cannot CANCEL -- Try using Cancel Withhold option!" G KIL
"RTN","FHORT2",22,0)
 S DT=$P(NOW,".",1),KK=A2,OLD=FHLD D T0^FHORD3 G KIL
"RTN","FHORT2",23,0)
ASK ; Ask if wish to cancel
"RTN","FHORT2",24,0)
 W !!,"Do you wish to CANCEL the ORIGINAL Tubefeeding? ",FHD,"// " R X:DTIME I '$T!(X["^") S FHD="N" Q
"RTN","FHORT2",25,0)
 S:X="" X=FHD D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G ASK
"RTN","FHORT2",26,0)
 S FHD=$E(X,1) W:FHD'="Y" "  ... no change" Q
"RTN","FHORT2",27,0)
CAN ; Perform cancel
"RTN","FHORT2",28,0)
 N FHORN,FILL,COM D NOW^%DTC S NOW=%
"RTN","FHORT2",29,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",4)="" K ^FHPT("ADTF",FHDFN,ADM)
"RTN","FHORT2",30,0)
 S $P(^FHPT(FHDFN,"A",ADM,"TF",TF,0),"^",11,12)=NOW_"^"_DUZ
"RTN","FHORT2",31,0)
 S FHORN=$P(^FHPT(FHDFN,"A",ADM,"TF",TF,0),"^",14)
"RTN","FHORT2",32,0)
 S FHSAV=$G(^FHPT(FHDFN,"A",ADM,"TF",TF,0))
"RTN","FHORT2",33,0)
 K % S EVT="T^C^"_TF D ^FHORX I FHORN S FILL="T"_";"_ADM_";"_TF_";"_$P(FHSAV,"^",6)_";"_$P(FHSAV,"^",7)_";"_$P(FHSAV,"^",5)_";" D CODE^FHWOR5 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG,FHSAV,FILL
"RTN","FHORT2",34,0)
 Q
"RTN","FHORT2",35,0)
KIL K %,%H,%I,A1,A2,C,D1,D2,D3,DA,KK,P2,FHDU,NOW,X1,X2,OLD,FHDR,FHORD,FHPAR,FHLD,FHWF,FHPV,FHOR,I,K9,ADM,ALL,COM,TFCOM,FHDFN,DFN,FHD,POP,PID,BID,DTP,QUA,STR,T,TF,TF2,TUN,WARD,X,X9,Y Q
"RTN","FHORT3")
0^222^B4733379
"RTN","FHORT3",1,0)
FHORT3 ; HISC/REL/NCA - Tubefeeding Utilities ;8/9/96  11:41 ;
"RTN","FHORT3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT3",3,0)
EN1 ; Edit Tubefeeding Products
"RTN","FHORT3",4,0)
 S CHK=0,TYP="T",EVENT="UPD",REC=1,(NOD1,NOD3)="" K ^TMP($J,"FHNOD2")
"RTN","FHORT3",5,0)
 W ! S (DIC,DIE)="^FH(118.2,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=118.2 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
"RTN","FHORT3",6,0)
 S DA=+Y,IEN=Y,NOD1=$P($G(^FH(118.2,+IEN,0)),"^",1),NOD3=$G(^FH(118.2,+IEN,"I"))
"RTN","FHORT3",7,0)
 F IEN1=0:0 S IEN1=$O(^FH(118.2,+IEN,1,IEN1)) Q:IEN1<1  S:'$D(^TMP($J,"FHNOD2",IEN1)) ^TMP($J,"FHNOD2",IEN1)=$G(^FH(118.2,+IEN,1,IEN1,0))
"RTN","FHORT3",8,0)
 S DR=".01;1;2;S:X[""G"" Y=""@1"";3;@1;10:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=118.2 D ^DIE K DA,DIE,DIDEL,DR I $D(^ORD(101.43)) D UPDATE^FHWOR6
"RTN","FHORT3",9,0)
 G EN1
"RTN","FHORT3",10,0)
EN2 ; List Tubefeeding Products
"RTN","FHORT3",11,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHORT3",12,0)
 W ! S L=0,DIC="^FH(118.2,",FLDS="[FHTFLST]",BY="NAME"
"RTN","FHORT3",13,0)
 S FR="",TO="",DHD="TUBEFEEDING PRODUCTS" D EN1^DIP,RSET Q
"RTN","FHORT3",14,0)
RSET K %ZIS S IOP="" D ^%ZIS K %ZIS,IOP,BY,DA,DHD,DIC,DIE,DR,FLDS,FR,L,TO,X,Y Q
"RTN","FHORT3",15,0)
KIL K ^TMP($J),CHK,DIC,DIE,DTOUT,EVENT,IEN,IEN1,NOD1,NOD3,REC,TYP,X,Y Q
"RTN","FHORT3",16,0)
POST ; Generate bulletin
"RTN","FHORT3",17,0)
 S WRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8)
"RTN","FHORT3",18,0)
 Q:'$D(^FH(119.6,+WRD,0))  S XMKK=$P(^(0),"^",2) Q:XMKK<1
"RTN","FHORT3",19,0)
 K XMY,XMB S XMB(1)=$P(^DPT(DFN,0),"^",1),XMB(2)=BID
"RTN","FHORT3",20,0)
 S XMB(4)=$S($D(^DPT(DFN,.101)):^(.101),1:"unknown")
"RTN","FHORT3",21,0)
 S XMB(5)="" I CAN S XMB(5)="Diet Orders"_$S(CAN=2:" and Supplemental Feedings",1:"")_" have been cancelled."
"RTN","FHORT3",22,0)
 S XMB(3)=$P(^FH(119.6,WRD,0),"^",1),XMB="FHDITF",XMY(XMKK)="" D ^XMB K XMY,XMB,XMM,XMDT Q
"RTN","FHORT5")
0^223^B7823183
"RTN","FHORT5",1,0)
FHORT5 ; HISC/REL/NCA/RVD - Tubefeeding Reports ;3/1/04  13:31
"RTN","FHORT5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT5",3,0)
 ;
"RTN","FHORT5",4,0)
ALL ; Print All Reports
"RTN","FHORT5",5,0)
 S FHOPT=1 G A0
"RTN","FHORT5",6,0)
PREP ; Print Preparation Report Only
"RTN","FHORT5",7,0)
 S FHOPT=2 G A0
"RTN","FHORT5",8,0)
COST ; Print Tubefeed Cost Report
"RTN","FHORT5",9,0)
 S FHOPT=3 G A0
"RTN","FHORT5",10,0)
LAB ; Print Tubefeed Labels
"RTN","FHORT5",11,0)
 S FHOPT=4 G A0
"RTN","FHORT5",12,0)
PULL ; Product Pick List
"RTN","FHORT5",13,0)
 S FHOPT=5 G A0
"RTN","FHORT5",14,0)
A0 R !!,"Select C=COMMUNICATION OFFICE or L=LOCATION: ",FHXX:DTIME G:'$T!("^"[FHXX) KIL I "cl"[FHXX S X=FHXX D TR^FH S FHXX=X
"RTN","FHORT5",15,0)
 I FHXX'?1U!("CL"'[FHXX) W *7,"Enter C or L" G A0
"RTN","FHORT5",16,0)
 I FHXX="C" G A2
"RTN","FHORT5",17,0)
A1 R !!,"Select LOCATION (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0,FHXX="L",WRD=0
"RTN","FHORT5",18,0)
 E  K DIC S DIC="^FH(119.6,",DIC(0)="EQM" D ^DIC G:Y<1 A1 S FHP=+Y,WRD=$P(Y,"^",2)
"RTN","FHORT5",19,0)
 G A3
"RTN","FHORT5",20,0)
A2 S FHP=$O(^FH(119.73,0)) I FHP'<1,$O(^FH(119.73,FHP))<1 G A3
"RTN","FHORT5",21,0)
 R !!,"Select COMMUNICATION OFFICE (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0,FHXX="C",WRD=0
"RTN","FHORT5",22,0)
 I X'="ALL" K DIC S DIC="^FH(119.73,",DIC(0)="EMQ" D ^DIC G:Y<1 A2 S FHP=+Y
"RTN","FHORT5",23,0)
A3 S (SUM,MUL)=0 G A5:FHOPT=4,A6:FHP
"RTN","FHORT5",24,0)
A4 R !!,"Consolidated Report Only? Y// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G A4
"RTN","FHORT5",25,0)
 S SUM=X?1"Y".E G A6
"RTN","FHORT5",26,0)
A5 W ! K DIR,LABSTART S DIR(0)="NA^1:10",DIR("A")="If using laser label sheets, what row do you want to begin printing at? ",DIR("B")=1 D ^DIR
"RTN","FHORT5",27,0)
 Q:$D(DIRUT)  S LABSTART=Y
"RTN","FHORT5",28,0)
 R !!,"Do you want multiple labels? N// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Enter YES or NO" G A5
"RTN","FHORT5",29,0)
 S MUL=X?1"Y".E
"RTN","FHORT5",30,0)
A6 I FHOPT'>2 W !!,"The report requires a 132 column printer.",!
"RTN","FHORT5",31,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select "_$S(FHOPT=4:"LABEL",1:"LIST")_" Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORT5",32,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORT5A",FHLST="FHXX^FHOPT^FHP^WRD^SUM^MUL^LABSTART" D EN2^FH G KIL
"RTN","FHORT5",33,0)
 U IO D Q1^FHORT5A D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORT5",34,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHORT5A")
0^224^B25454150
"RTN","FHORT5A",1,0)
FHORT5A ; HISC/REL/NCA/RVD - Tubefeeding Reports (cont) ;3/1/04  13:15
"RTN","FHORT5A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT5A",3,0)
 ;
"RTN","FHORT5A",4,0)
 ;RVD 3/1/04 - modify for outpatient meals.
"RTN","FHORT5A",5,0)
 ;
"RTN","FHORT5A",6,0)
Q1 ; Print Tubefeeding Report
"RTN","FHORT5A",7,0)
 S PG=0 D NOW^%DTC S (DTP,NOW)=% D DTP^FH K ^TMP($J)
"RTN","FHORT5A",8,0)
INPAT ;get inpatient data
"RTN","FHORT5A",9,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("ADTF",FHDFN)) Q:FHDFN<1  F ADM=0:0 S ADM=$O(^FHPT("ADTF",FHDFN,ADM)) Q:ADM<1  D PATNAME^FHOMUTL Q:DFN=""  D Q2
"RTN","FHORT5A",10,0)
 ;
"RTN","FHORT5A",11,0)
OUTPAT ;get outpatient data, for today's date.
"RTN","FHORT5A",12,0)
 F FHDFN=0:0  S FHDFN=$O(^FHPT("RM",DT,FHDFN)) Q:FHDFN'>0  F FHFIN=0:0 S FHFIN=$O(^FHPT("RM",DT,FHDFN,FHFIN)) Q:FHFIN'>0  D
"RTN","FHORT5A",13,0)
 .;quit if TF is cancelled
"RTN","FHORT5A",14,0)
 .I $D(^FHPT(FHDFN,"OP",FHFIN,3)),$P(^(3),U,5)="C" Q
"RTN","FHORT5A",15,0)
 .F FHTF=0:0 S FHTF=$O(^FHPT(FHDFN,"OP",FHFIN,"TF",FHTF)) Q:FHTF'>0  D
"RTN","FHORT5A",16,0)
 ..Q:'$D(^FHPT(FHDFN,"OP",FHFIN,"TF",FHTF,0))
"RTN","FHORT5A",17,0)
 ..S YY=$G(^FHPT(FHDFN,"OP",FHFIN,"TF",FHTF,0))
"RTN","FHORT5A",18,0)
 ..;
"RTN","FHORT5A",19,0)
 ..S TF2=FHTF
"RTN","FHORT5A",20,0)
 ..S Z=$G(^FHPT(FHDFN,"OP",FHFIN,0))
"RTN","FHORT5A",21,0)
 ..S XY=$G(^FHPT(FHDFN,"OP",FHFIN,3))
"RTN","FHORT5A",22,0)
 ..S (Z1,Z2)="",W1=$P(Z,"^",3)
"RTN","FHORT5A",23,0)
 ..S P0=$G(^FH(119.6,+W1,0)),Z3=$P(P0,"^",8),WARD=$P(P0,"^",1)
"RTN","FHORT5A",24,0)
 ..S CC=$P($G(^FH(119.73,+Z3,0)),"^",1)
"RTN","FHORT5A",25,0)
 ..I FHXX="C" S D2=$P(P0,"^",8) I FHP,FHP'=D2 Q
"RTN","FHORT5A",26,0)
 ..I FHXX="L" I FHP,FHP'=W1 Q
"RTN","FHORT5A",27,0)
 ..S P0=$P(P0,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHORT5A",28,0)
 ..S TNOD=$S(FHXX="C":"99~"_CC,1:P0_"~"_WARD),CNOD=$S('SUM:TNOD,1:"0")
"RTN","FHORT5A",29,0)
 ..;
"RTN","FHORT5A",30,0)
 ..I FHOPT=3 D
"RTN","FHORT5A",31,0)
 ...S CTR=$G(^TMP($J,"C",CNOD,0))
"RTN","FHORT5A",32,0)
 ...;I "^^^^"[FHOR S:Z2 $P(CTR,"^",1)=$P(CTR,"^",1)+1 S:Z2 $P(CTR,"^",3)=$P(CTR,"^",3)+1
"RTN","FHORT5A",33,0)
 ...S $P(CTR,"^",1)=$P(CTR,"^",1)+1
"RTN","FHORT5A",34,0)
 ...;I "^^^^"'[FHOR,Z1="T" S:'Z2 $P(CTR,"^",2)=$P(CTR,"^",2)+1 S:Z2 $P(CTR,"^",4)=$P(CTR,"^",4)+1
"RTN","FHORT5A",35,0)
 ...S ^TMP($J,"C",CNOD,0)=CTR Q
"RTN","FHORT5A",36,0)
 ..;
"RTN","FHORT5A",37,0)
 ..S TP=$P(YY,"^",4) D PREP
"RTN","FHORT5A",38,0)
 ..;set ^tmp global for specific report.
"RTN","FHORT5A",39,0)
 ..D PATNAME^FHOMUTL
"RTN","FHORT5A",40,0)
 ..S PNOD=P0_"~"_WARD_"~"_FHDFN
"RTN","FHORT5A",41,0)
 ..I "135"[FHOPT S:'$D(^TMP($J,"C",CNOD,TUN,0)) ^(0)="" S $P(^(0),"^",1)=$P(^(0),"^",1)+TU,$P(^(0),"^",2)=$P(^(0),"^",2)+1
"RTN","FHORT5A",42,0)
 ..I "124"[FHOPT D
"RTN","FHORT5A",43,0)
 ...S:'$D(^TMP($J,"T",TNOD,PNOD,0)) ^(0)=$E(FHPTNM,1,22)_"^"_FHBID_"^"_WARD_"^^"_$P(XY,"^",1,3)
"RTN","FHORT5A",44,0)
 ...S ^TMP($J,"T",TNOD,PNOD,TF2,0)=$P(Y0,"^",1)_"^"_$P(Y0,"^",2)_"^"_TP_"^"_TW_"^"_TU_"^"_P1_"^"_STR_"^"_QUA_"^"_TUN
"RTN","FHORT5A",45,0)
 ;
"RTN","FHORT5A",46,0)
PRT ;prints corresponding reports.
"RTN","FHORT5A",47,0)
 I FHOPT=1 D PREP^FHORT5B,PULL^FHORT5C,DEL^FHORT5C Q
"RTN","FHORT5A",48,0)
 I FHOPT=2 D PREP^FHORT5B Q
"RTN","FHORT5A",49,0)
 I FHOPT=3 D CST^FHORT5D Q
"RTN","FHORT5A",50,0)
 I FHOPT=4 D LAB^FHORT5D Q
"RTN","FHORT5A",51,0)
 I FHOPT=5 D PULL^FHORT5C
"RTN","FHORT5A",52,0)
 Q
"RTN","FHORT5A",53,0)
Q2 S Z=$G(^FHPT(FHDFN,"A",ADM,0)),WARD=$P(Z,"^",8) S:WARD WARD=$P($G(^FH(119.6,WARD,0)),"^",1) I WARD="" G Q3
"RTN","FHORT5A",54,0)
 G:'$D(^DPT(DFN,.1)) Q3 S CADM=$G(^DPT("CN",^DPT(DFN,.1),DFN)) G:ADM'=CADM Q3
"RTN","FHORT5A",55,0)
 S TF=$P(Z,"^",4) G:TF<1 Q3
"RTN","FHORT5A",56,0)
 S Z1=$P(Z,"^",5),Z2=$P(Z,"^",7),W1=$P(Z,"^",8),P0=$G(^FH(119.6,+W1,0)),Z3=$P(P0,"^",8),CC=$P($G(^FH(119.73,+Z3,0)),"^",1)
"RTN","FHORT5A",57,0)
 I FHXX="C" S D2=$P(P0,"^",8) I FHP,FHP'=D2 Q
"RTN","FHORT5A",58,0)
 I FHXX="L" I FHP,FHP'=W1 Q
"RTN","FHORT5A",59,0)
 S P0=$P(P0,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHORT5A",60,0)
 S TNOD=$S(FHXX="C":"99~"_CC,1:P0_"~"_WARD),CNOD=$S('SUM:TNOD,1:"0")
"RTN","FHORT5A",61,0)
 D CUR^FHORD7 I FHLD="P" Q
"RTN","FHORT5A",62,0)
 I FHOPT=3 D
"RTN","FHORT5A",63,0)
 .S CTR=$G(^TMP($J,"C",CNOD,0))
"RTN","FHORT5A",64,0)
 .I "^^^^"[FHOR S:'Z2 $P(CTR,"^",1)=$P(CTR,"^",1)+1 S:Z2 $P(CTR,"^",3)=$P(CTR,"^",3)+1
"RTN","FHORT5A",65,0)
 .I "^^^^"'[FHOR,Z1="T" S:'Z2 $P(CTR,"^",2)=$P(CTR,"^",2)+1 S:Z2 $P(CTR,"^",4)=$P(CTR,"^",4)+1
"RTN","FHORT5A",66,0)
 .S ^TMP($J,"C",CNOD,0)=CTR Q
"RTN","FHORT5A",67,0)
 I "124"[FHOPT D
"RTN","FHORT5A",68,0)
 .S RM=$G(^DPT(DFN,.101))
"RTN","FHORT5A",69,0)
 .S RI=$G(^DPT(DFN,.108)) S RE=$S(RI:$O(^FH(119.6,"AR",+RI,W1,0)),1:"")
"RTN","FHORT5A",70,0)
 .S R0=$S(RE:$P($G(^FH(119.6,W1,"R",+RE,0)),"^",2),1:"")
"RTN","FHORT5A",71,0)
 .S R0=$S(R0<1:99,R0<10:"0"_R0,1:R0)
"RTN","FHORT5A",72,0)
 .S PNOD=P0_"~"_R0_RM_"~"_DFN,X=^DPT(DFN,0) D PID^FHDPA
"RTN","FHORT5A",73,0)
 .S XY=^FHPT(FHDFN,"A",ADM,"TF",TF,0)
"RTN","FHORT5A",74,0)
 .S ^TMP($J,"T",TNOD,PNOD,0)=$E($P(X,"^",1),1,22)_"^"_BID_"^"_WARD_"^"_RM_"^"_$P(XY,"^",5,7) Q
"RTN","FHORT5A",75,0)
 F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S YY=^(TF2,0) D LP
"RTN","FHORT5A",76,0)
 Q
"RTN","FHORT5A",77,0)
LP S TP=$P(YY,"^",4) D PREP
"RTN","FHORT5A",78,0)
 I "135"[FHOPT S:'$D(^TMP($J,"C",CNOD,TUN,0)) ^(0)="" S $P(^(0),"^",1)=$P(^(0),"^",1)+TU,$P(^(0),"^",2)=$P(^(0),"^",2)+1
"RTN","FHORT5A",79,0)
 I "124"[FHOPT S ^TMP($J,"T",TNOD,PNOD,TF2,0)=$P(Y0,"^",1)_"^"_$P(Y0,"^",2)_"^"_TP_"^"_TW_"^"_TU_"^"_P1_"^"_STR_"^"_QUA_"^"_TUN
"RTN","FHORT5A",80,0)
 Q
"RTN","FHORT5A",81,0)
Q3 K ^FHPT("ADTF",FHDFN,ADM)
"RTN","FHORT5A",82,0)
 I $D(^FHPT(FHDFN,"A",ADM,0)) S TF=$P(^(0),"^",4),$P(^(0),"^",4)="" I TF>0,$D(^FHPT(FHDFN,"A",ADM,"TF",TF,0)) S $P(^(0),"^",11)=NOW,ORIFN=$P(^(0),"^",14) I ORIFN S ORSTS=1 D ST^ORX
"RTN","FHORT5A",83,0)
 Q
"RTN","FHORT5A",84,0)
PREP ; Calculate Preparation
"RTN","FHORT5A",85,0)
 S TUN=$P(YY,"^",1),Y0=$G(^FH(118.2,TUN,0)) Q:Y0=""
"RTN","FHORT5A",86,0)
 S STR=$P(YY,"^",2),QUA=$P(YY,"^",3)
"RTN","FHORT5A",87,0)
 I $E($P(Y0,"^",3),$L($P(Y0,"^",3)))="G" D GRM Q
"RTN","FHORT5A",88,0)
 S TU=$P(YY,"^",4)/$S(+$P(Y0,"^",3):+$P(Y0,"^",3),1:9999),TW=$P(YY,"^",5)
"RTN","FHORT5A",89,0)
 ;I TW<6 S TP="",TW="",TU=TU+.75\1,P1=TU Q  ;NOIS MWV-0303-21626
"RTN","FHORT5A",90,0)
 I TW<6 S TP="",TW="",P1=TU+.9999\1,TU=TU+.75\1 Q
"RTN","FHORT5A",91,0)
 S TU=TU+.2*4\1/4,TP=$J(TP/10,0)*10,TW=$J(TW/10,0)*10
"RTN","FHORT5A",92,0)
 S P1=$S(TU<1:"",1:TU\1) I TU#1 S:P1 P1=P1_"-" S P2=TU#1,P1=P1_$S(P2<.3:"1/4",P2<.6:"1/2",1:"3/4")
"RTN","FHORT5A",93,0)
 Q
"RTN","FHORT5A",94,0)
GRM ; Calculate Gram
"RTN","FHORT5A",95,0)
 S TW=0,X=QUA D FIX^FHORT10 S Z5="" F L=1:1:$L(X) I $E(X,L)'=" " S Z5=Z5_$E(X,L)
"RTN","FHORT5A",96,0)
 S Z5=$P(Z5,"/",2),Z5=$P(Z5,"X",2)
"RTN","FHORT5A",97,0)
 I 'Z5 S Z5=$P("1,24,2,3,12,8,6,4",",",K) G G1
"RTN","FHORT5A",98,0)
 I Z5'["F" S Z5=$S(K=1:1,K=2:Z5,K=3:2,K=4:3,K=5:Z5\2,K=6:Z5\3,K=7:Z5\4,1:Z5\6)
"RTN","FHORT5A",99,0)
 E  S:K=1 Z5=1
"RTN","FHORT5A",100,0)
G1 S TU=+QUA*Z5
"RTN","FHORT5A",101,0)
 S TU=TU/$S(+$P(Y0,"^",3):+$P(Y0,"^",3),1:9999)
"RTN","FHORT5A",102,0)
 S P1=$S(TU<1:"",1:TU\1) I P1="" S TU=TU+.95\1,P1=TU
"RTN","FHORT5A",103,0)
 I TU#1 S:P1 P1=P1_"-" S TU=TU#1,P1=P1_$S(TU<.3:"1/4",TU<.6:"1/2",1:"3/4")
"RTN","FHORT5A",104,0)
 Q
"RTN","FHORT5B")
0^225^B2880437
"RTN","FHORT5B",1,0)
FHORT5B ; HISC/REL/NCA - Tubefeeding Reports (cont) ;5/4/93  10:47 
"RTN","FHORT5B",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT5B",3,0)
PREP ; Preparation Report
"RTN","FHORT5B",4,0)
 D:SUM HD1 S TNOD="" F  S TNOD=$O(^TMP($J,"T",TNOD)) Q:TNOD=""  D:'SUM HD1 D A2
"RTN","FHORT5B",5,0)
 Q
"RTN","FHORT5B",6,0)
A2 S PNOD="" F  S PNOD=$O(^TMP($J,"T",TNOD,PNOD)) Q:PNOD=""  S X0=^(PNOD,0) D A3
"RTN","FHORT5B",7,0)
 Q
"RTN","FHORT5B",8,0)
A3 D:$Y>(IOSL-10) HD1 W !,$P(X0,"^",3)," ",$P(X0,"^",4),!,$P(X0,"^",1),?23,$P(X0,"^",2)
"RTN","FHORT5B",9,0)
 F TF2=0:0 S TF2=$O(^TMP($J,"T",TNOD,PNOD,TF2)) Q:'TF2  S X1=^(TF2,0) D A4
"RTN","FHORT5B",10,0)
 S COM=$P(X0,"^",5) W:COM'="" ?66,COM,! Q
"RTN","FHORT5B",11,0)
A4 W ?31,$E($P(X1,"^",1),1,29) S STR=$P(X1,"^",7) W ?61,$S(STR=4:"Full",STR=2:"1/2",STR=1:"1/4",1:"3/4")
"RTN","FHORT5B",12,0)
 W ?66,$P(X1,"^",8),?101,$P(X1,"^",2),?110,$P(X1,"^",6)
"RTN","FHORT5B",13,0)
 S TW=$P(X1,"^",4) I TW W ?117,$J($P(X1,"^",3),5),?126,$J(TW,4)
"RTN","FHORT5B",14,0)
 W ! Q
"RTN","FHORT5B",15,0)
HD1 ; Preparation Header
"RTN","FHORT5B",16,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHORT5B",17,0)
 W !,DTP,?39,"P R E P A R A T I O N   O F   T U B E F E E D I N G S",?125,"Page ",PG
"RTN","FHORT5B",18,0)
 S Y=$S(SUM:"CONSOLIDATED",1:$P(TNOD,"~",2)) W:Y'="" !!?(131-$L(Y)\2),Y
"RTN","FHORT5B",19,0)
 W !!,?112,"#",?119,"CC",?127,"CC"
"RTN","FHORT5B",20,0)
 W !,"Patient",?24,"ID#",?31,"Product",?61,"Str",?66,"Quantity",?101,"Unit",?110,"Units",?117,"Product",?126,"Water",!
"RTN","FHORT5B",21,0)
 Q
"RTN","FHORT5C")
0^226^B4841858
"RTN","FHORT5C",1,0)
FHORT5C ; HISC/REL/NCA/RVD - Tubefeeding Reports (cont) ;3/1/04  09:55
"RTN","FHORT5C",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT5C",3,0)
 ;
"RTN","FHORT5C",4,0)
 ;RVD 3/1/04 - modify for Outpatient meals project (pull list report).
"RTN","FHORT5C",5,0)
 ;
"RTN","FHORT5C",6,0)
PULL ; Pull List
"RTN","FHORT5C",7,0)
 S NAM="" F  S NAM=$O(^FH(118.2,"B",NAM)) Q:NAM=""  F LL=0:0 S LL=$O(^FH(118.2,"B",NAM,LL)) Q:LL<1  S ^TMP($J,"P",NAM_"~"_LL)=LL
"RTN","FHORT5C",8,0)
 I SUM S CNOD="0" D P2 Q
"RTN","FHORT5C",9,0)
 S CNOD="0" F  S CNOD=$O(^TMP($J,"C",CNOD)) Q:CNOD=""  D P2
"RTN","FHORT5C",10,0)
 Q
"RTN","FHORT5C",11,0)
P2 S NAM="" D HD3
"RTN","FHORT5C",12,0)
 F  S NAM=$O(^TMP($J,"P",NAM)) Q:NAM=""  S LL=^(NAM) I $D(^TMP($J,"C",CNOD,LL)) S TU=$P($G(^(LL,0)),"^",1) D
"RTN","FHORT5C",13,0)
 .S Y0=^FH(118.2,LL,0),TU=TU+.95\1 D:$Y>(IOSL-8) HD3
"RTN","FHORT5C",14,0)
 .W !?21,$J(TU,5)," ",$P(Y0,"^",2),?41,$P(Y0,"^",1) Q
"RTN","FHORT5C",15,0)
 W ! Q
"RTN","FHORT5C",16,0)
DEL ; Delivery List
"RTN","FHORT5C",17,0)
 D:SUM HD2 S TNOD="" F  S TNOD=$O(^TMP($J,"T",TNOD)) Q:TNOD=""  D:'SUM HD2 S PNOD="" F  S PNOD=$O(^TMP($J,"T",TNOD,PNOD)) Q:PNOD=""  S X0=^(PNOD,0) D
"RTN","FHORT5C",18,0)
 .D:$Y>(IOSL-10) HD2 W !,$E($P(X0,"^",3),1,12),?13,$E($P(X0,"^",4),1,10),?24,$P(X0,"^",1),?47,$P(X0,"^",2)
"RTN","FHORT5C",19,0)
 .F TF2=0:0 S TF2=$O(^TMP($J,"T",TNOD,PNOD,TF2)) Q:TF2<1  S X1=^(TF2,0) D
"RTN","FHORT5C",20,0)
 ..S TW=$P(X0,"^",4) W ?55,$P(X1,"^",1),?86,$P(X1,"^",6),! Q
"RTN","FHORT5C",21,0)
 .Q
"RTN","FHORT5C",22,0)
 W ! Q
"RTN","FHORT5C",23,0)
HD2 ; Delivery Header
"RTN","FHORT5C",24,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHORT5C",25,0)
 W !,DTP,?42,"D E L I V E R Y   O F   T U B E F E E D I N G S",?125,"Page ",PG
"RTN","FHORT5C",26,0)
 S Y=$S(SUM:"CONSOLIDATED",1:$P(TNOD,"~",2)) W:Y'="" !!?(131-$L(Y)\2),Y
"RTN","FHORT5C",27,0)
 W !!,"Location",?13,"Room",?24,"Patient",?48,"ID#",?55,"Product",?86,"Quantity",!
"RTN","FHORT5C",28,0)
 Q
"RTN","FHORT5C",29,0)
HD3 ; Pull List Header
"RTN","FHORT5C",30,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHORT5C",31,0)
 W !,DTP,?19,"T U B E F E E D I N G   P U L L   L I S T",?72,"Page ",PG
"RTN","FHORT5C",32,0)
 S Y=$S(SUM:"CONSOLIDATED",1:$P(CNOD,"~",2)) W:Y'="" !!?(80-$L(Y)\2),Y
"RTN","FHORT5C",33,0)
 W !!?25,"# Units",?41,"Product",! Q
"RTN","FHORT5D")
0^227^B11879741
"RTN","FHORT5D",1,0)
FHORT5D ; HISC/REL/NCA/RVD - Tubefeeding Reports (cont) ;5/4/93  10:52 
"RTN","FHORT5D",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORT5D",3,0)
 ;
"RTN","FHORT5D",4,0)
CST ; Print Cost Report for Tubefeeding
"RTN","FHORT5D",5,0)
 S NAM="" F  S NAM=$O(^FH(118.2,"B",NAM)) Q:NAM=""  F LL=0:0 S LL=$O(^FH(118.2,"B",NAM,LL)) Q:LL<1  S ^TMP($J,"P",NAM_"~"_LL)=LL
"RTN","FHORT5D",6,0)
 I SUM S CNOD="0" D C2 Q
"RTN","FHORT5D",7,0)
 S CNOD="0" F  S CNOD=$O(^TMP($J,"C",CNOD)) Q:CNOD=""  D C2
"RTN","FHORT5D",8,0)
 Q
"RTN","FHORT5D",9,0)
C2 S D2=0,NAM="" D HD4 S X0=$G(^TMP($J,"C",CNOD,0))
"RTN","FHORT5D",10,0)
 F  S NAM=$O(^TMP($J,"P",NAM)) Q:NAM=""  S LL=^(NAM) I $D(^TMP($J,"C",CNOD,LL)) S X1=$G(^(LL,0)),TU=$P(X1,"^",1),TP=$P(X1,"^",2) D
"RTN","FHORT5D",11,0)
 .I $Y>(IOSL-8) D HD4
"RTN","FHORT5D",12,0)
 .S Y0=^FH(118.2,LL,0),TU=TU+.95\1,PR=$P($G(^FH(114,+$P(Y0,"^",7),0)),"^",13),D2=TU*PR+D2
"RTN","FHORT5D",13,0)
 .W !,$P(Y0,"^",1),?31,$J($S(TP:TP,1:0),5),?41,$P(Y0,"^",2),?53,$J(TU,5),?62,$J(PR,7,2),?72,$J(TU*PR,7,2) Q
"RTN","FHORT5D",14,0)
 W !!,"Total: ",?71,$J(D2,8,2),!!!,"No. of Patients on TF: ",?33,$J($P(X0,"^",1),6)
"RTN","FHORT5D",15,0)
 W !,"No. of Patients on TF and Tray: ",?33,$J($P(X0,"^",2),6),!,"No. of Patients on TF and SF: ",?33,$J($P(X0,"^",3),6)
"RTN","FHORT5D",16,0)
 W !,"No. of Patients on ALL Three: ",?33,$J($P(X0,"^",4),6),!,"Cost/Patient: ",?33 S X=$P(X0,"^",1) W $J($S(X:D2/X,1:""),6,2),! Q
"RTN","FHORT5D",17,0)
LAB ; Print Labels
"RTN","FHORT5D",18,0)
 S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1 S S1=$S(LAB=1:6,1:9),S2=LAB=2*5+33
"RTN","FHORT5D",19,0)
 S COUNT=0,LINE=1
"RTN","FHORT5D",20,0)
 S TNOD="" F  S TNOD=$O(^TMP($J,"T",TNOD)) Q:TNOD=""  D L1
"RTN","FHORT5D",21,0)
 I LAB>2 D DPLL^FHLABEL Q
"RTN","FHORT5D",22,0)
 W !!!!!!!!!!!!!!!!!! Q
"RTN","FHORT5D",23,0)
L1 S PNOD="" F  S PNOD=$O(^TMP($J,"T",TNOD,PNOD)) Q:PNOD=""  S X0=^(PNOD,0) D L2
"RTN","FHORT5D",24,0)
 Q
"RTN","FHORT5D",25,0)
L2 S NAM=$P(X0,"^",1),WARD=$P(X0,"^",3),RM=$P(X0,"^",4),X3=3
"RTN","FHORT5D",26,0)
 F TF2=0:0 S TF2=$O(^TMP($J,"T",TNOD,PNOD,TF2)) Q:'TF2  S X1=^(TF2,0),X3=X3+3 D L3
"RTN","FHORT5D",27,0)
 Q
"RTN","FHORT5D",28,0)
L3 S Y0=$P(X1,"^",1),STR=$P(X1,"^",7),Y1="" I STR<4 S Y1=$S(STR=1:"1/4",STR=2:"1/2",1:"3/4")_" Str, "
"RTN","FHORT5D",29,0)
 S Y1=Y1_$P(X1,"^",8),Y0=Y0_", "_$S('MUL:$P(X1,"^",6),1:1)_" "_$P(X1,"^",2) I 'MUL,$P(X1,"^",6)>1 S Y0=Y0_"S"
"RTN","FHORT5D",30,0)
 I LAB>2 D LL Q
"RTN","FHORT5D",31,0)
 I 'MUL D LHDR W !,Y0,!,Y1,! W:LAB=2 !!! Q
"RTN","FHORT5D",32,0)
 F X2=1:1:+$P(X1,"^",6) D LHDR W !,Y0,!,Y1,! W:LAB=2 !!!
"RTN","FHORT5D",33,0)
 Q
"RTN","FHORT5D",34,0)
LHDR ; Label Header
"RTN","FHORT5D",35,0)
 W !,NAM,?(S2-$L(WARD)),WARD,!,$P(X0,"^",2),?8,$E(DTP,1,9),?(S2-$L(RM)),RM,! Q
"RTN","FHORT5D",36,0)
HD4 ; Cost Report Header
"RTN","FHORT5D",37,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHORT5D",38,0)
 W !,$E(DTP,1,9),?17,"T U B E F E E D I N G   C O S T   R E P O R T",?73,"Page ",PG
"RTN","FHORT5D",39,0)
 S Y=$S(SUM:"CONSOLIDATED",1:$P(CNOD,"~",2)) W !!?(80-$L(Y)\2),Y
"RTN","FHORT5D",40,0)
 W !!,"Product",?30,"# Patient",?41,"Unit",?53,"# Units",?62,"Cost/Unit",?74,"Total",! Q
"RTN","FHORT5D",41,0)
 Q
"RTN","FHORT5D",42,0)
LL ;
"RTN","FHORT5D",43,0)
 S FHCOL=$S(LAB=3:3,1:2)
"RTN","FHORT5D",44,0)
 I LABSTART>1 F FHLABST=1:1:(LABSTART-1)*FHCOL D  S LABSTART=1
"RTN","FHORT5D",45,0)
 .I LAB=3 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6)="" D LL3^FHLABEL
"RTN","FHORT5D",46,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6,PCL7,PCL8)="" D LL4^FHLABEL
"RTN","FHORT5D",47,0)
 .Q
"RTN","FHORT5D",48,0)
 S FHTAB=$S(LAB=3:24,1:37)
"RTN","FHORT5D",49,0)
 S NAM=$E(NAM,1,FHTAB-$L(WARD)),X02P=$P(X0,U,2),DTP=$E(DTP,1,9)
"RTN","FHORT5D",50,0)
 S X0DTP=X02P_$E("        ",1,7-$L(X02P))_DTP
"RTN","FHORT5D",51,0)
 S LNA=NAM_$J(WARD,FHTAB+1-$L(NAM))
"RTN","FHORT5D",52,0)
 S LNB=X0DTP_$J($E(RM,1,8),FHTAB+1-$L(X0DTP))
"RTN","FHORT5D",53,0)
 I 'MUL D LLB Q
"RTN","FHORT5D",54,0)
 I MUL F X2=1:1:+$P(X1,"^",6) D LLB
"RTN","FHORT5D",55,0)
 Q
"RTN","FHORT5D",56,0)
LLB ;
"RTN","FHORT5D",57,0)
 S FHST=$S(LAB=3:25,1:38)
"RTN","FHORT5D",58,0)
 S FHN=FHST F CN=FHST:-1:FHST-5 S Y0X=$E(Y0,CN) I Y0X="," S FHN=CN Q
"RTN","FHORT5D",59,0)
 I LAB=3 S PCL1="",PCL2=LNA,PCL3=LNB,PCL4=$E(Y0,1,FHN),PCL5=$E(Y0,FHN+1,99),PCL6=Y1
"RTN","FHORT5D",60,0)
 I LAB=4 S (PCL1,PCL2,PCL8)="",PCL3=LNA,PCL4=LNB,PCL5=$E(Y0,1,FHN),PCL6=$E(Y0,FHN+1,99),PCL7=Y1
"RTN","FHORT5D",61,0)
 D:LAB=3 LL3^FHLABEL D:LAB=4 LL4^FHLABEL
"RTN","FHORT5D",62,0)
 Q
"RTN","FHORTR")
0^228^B3604196
"RTN","FHORTR",1,0)
FHORTR ; HISC/NCA - Tubefeeding Product Search ;8/8/96  08:12
"RTN","FHORTR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORTR",3,0)
SRCH(FHX) ; Search For Tubefeeding Product
"RTN","FHORTR",4,0)
 N DIC,FHY,X,Y
"RTN","FHORTR",5,0)
 S X=FHX,FHY=""
"RTN","FHORTR",6,0)
 W ! K DIC S DIC="^FH(118.2,",DIC(0)="EQM" D ^DIC G:"^"[X!$D(DTOUT) EXIT
"RTN","FHORTR",7,0)
 G:Y<1 EXIT
"RTN","FHORTR",8,0)
 S FHY=+Y
"RTN","FHORTR",9,0)
EXIT Q FHY
"RTN","FHORTR",10,0)
DISP ; Display Edited Tubefeeding
"RTN","FHORTR",11,0)
 N TC,TK S (TC,TK)=0 W !
"RTN","FHORTR",12,0)
 I $O(TUN(0))="" W !!,"No Tubefeeding Products Selected." Q
"RTN","FHORTR",13,0)
 F K=0:0 S K=$O(TUN(K)) Q:K<1  D
"RTN","FHORTR",14,0)
 .S TC=TC+$P(TUN(K),"^",4)+$P(TUN(K),"^",5)
"RTN","FHORTR",15,0)
 .S TK=TK+$P(TUN(K),"^",6),STR=$P(TUN(K),"^",2)
"RTN","FHORTR",16,0)
 .S PRO=$P(TUN(K),"^",1)
"RTN","FHORTR",17,0)
 .W !,"Product: ",$P($G(^FH(118.2,PRO,0)),"^",1),", "
"RTN","FHORTR",18,0)
 .W $S(STR=4:"Full",STR=2:"1/2",STR=1:"1/4",STR=3:"3/4",1:""),", "
"RTN","FHORTR",19,0)
 .W $P(TUN(K),"^",3)
"RTN","FHORTR",20,0)
 .Q
"RTN","FHORTR",21,0)
 W !!,"Total Kcal: ",TK,?36,"Total Quantity: ",TC
"RTN","FHORTR",22,0)
 Q
"RTN","FHORTR",23,0)
HELP ; Help Prompt for Tubefeeding Product.
"RTN","FHORTR",24,0)
 W !!,"Hit return to take the default.",!,"Enter a ""@"" to delete the product, strength and quantity.",!,"Enter another product name to replace existing product name."
"RTN","FHORTR",25,0)
 W !,"To Replace, enter first few characters of the product name, e.g., SUS for SUSTACAL."
"RTN","FHORTR",26,0)
 W !,"Enter a ""^"" will Exit Completely."
"RTN","FHORTR",27,0)
 Q
"RTN","FHORX")
0^229^B1827718
"RTN","FHORX",1,0)
FHORX ; HISC/REL,RTK - File Dietetic Event ;2/26/96  09:54
"RTN","FHORX",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORX",3,0)
FIL ; File event
"RTN","FHORX",4,0)
 L +^FH(119.8,0) S DA=$P(^FH(119.8,0),"^",3)+1,$P(^FH(119.8,0),"^",3,4)=DA_"^"_DA L -^FH(119.8,0)
"RTN","FHORX",5,0)
 I $D(^FH(119.8,DA)) G FIL
"RTN","FHORX",6,0)
 I $G(ADM)="" S ADM=""  ;for outpatient food preferences - RTK 8/04
"RTN","FHORX",7,0)
 D NOW^%DTC
"RTN","FHORX",8,0)
 S ^FH(119.8,DA,0)=DA_"^"_%_"^"_FHDFN_"^"_ADM_"^"_EVT S $P(^(0),"^",9)=DUZ
"RTN","FHORX",9,0)
 S ^FH(119.8,"B",DA,DA)="",^FH(119.8,"AP",FHDFN,%,DA)="",^FH(119.8,"AD",%,DA)=""
"RTN","FHORX",10,0)
 K %,DA,EVT Q
"RTN","FHORX",11,0)
OPFILE ; File outpatient events (TYPE = "Z")
"RTN","FHORX",12,0)
 K DIC,DO S Y=$P(^FH(119.8,0),"^",3)+1,DIC="^FH(119.8,",X=+Y,DINUM=X
"RTN","FHORX",13,0)
 S DIC(0)="L" D FILE^DICN I Y=-1 Q
"RTN","FHORX",14,0)
 D NOW^%DTC S FHDTM=%,FHTYP="Z"
"RTN","FHORX",15,0)
 K DIE S DIE="^FH(119.8,",DA=+Y
"RTN","FHORX",16,0)
 S DR="1////^S X=FHDTM;2////^S X=FHDFN;4////^S X=FHTYP;5////^S X=FHACT;7////^S X=FHTXT;8////^S X=DUZ" D ^DIE
"RTN","FHORX",17,0)
 Q
"RTN","FHORX1")
0^230^B29007606
"RTN","FHORX1",1,0)
FHORX1 ; HISC/REL/RVD - Diet Activity Report ;9/10/98  15:31
"RTN","FHORX1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORX1",3,0)
 ;
"RTN","FHORX1",4,0)
 ;RVD 1/29/04 - modify for Outpatient Meals changes
"RTN","FHORX1",5,0)
 ;
"RTN","FHORX1",6,0)
 D NOW^%DTC S NOW=%,TIM=""
"RTN","FHORX1",7,0)
R0 D DIV^FHOMUTL G:'$D(FHSITE) KIL
"RTN","FHORX1",8,0)
 S FHP=FHSITE
"RTN","FHORX1",9,0)
R1 R !!,"Do you want labels? N// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Enter YES or NO" G R1
"RTN","FHORX1",10,0)
 S LAB=X?1"Y".E
"RTN","FHORX1",11,0)
 S:$G(FHP) TIM=$P($G(^FH(119.73,FHP,0)),"^",$S(LAB:3,1:2))
"RTN","FHORX1",12,0)
 I 'TIM S TIM=DT
"RTN","FHORX1",13,0)
 S FHLBFLG=1 I LAB D  I FHLBFLG=0 Q
"RTN","FHORX1",14,0)
 .W ! K DIR,LABSTART S DIR(0)="NA^1:10",DIR("A")="If using laser label sheets, what row do you want to begin printing at? ",DIR("B")=1 D ^DIR
"RTN","FHORX1",15,0)
 .I $D(DIRUT) S FHLBFLG=0 Q
"RTN","FHORX1",16,0)
 .S LABSTART=Y Q
"RTN","FHORX1",17,0)
 S DTP=TIM D DTP^FH
"RTN","FHORX1",18,0)
R3 W !!,"Changes since Date/Time: ",DTP," // " R X:DTIME G:'$T!(X["^") KIL I X'="" S %DT="EXTS" D ^%DT K %DT G:Y<1 R3 S TIM=Y
"RTN","FHORX1",19,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select "_$S(LAB:"LABEL",1:"LIST")_" Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORX1",20,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORX1",FHLST="TIM^LAB^FHP^LABSTART^FHSITE^FHSITENM" D EN2^FH G KIL
"RTN","FHORX1",21,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORX1",22,0)
Q1 ; Print the Diet Activity Report
"RTN","FHORX1",23,0)
 S FHTIM=TIM    ;save date/time for recurring meal data.
"RTN","FHORX1",24,0)
 K ^TMP($J) D NOW^%DTC S NOW=%,DTP=TIM,TIM=TIM-.000001 D DTP^FH S H1=DTP_" - " S DTP=NOW D DTP^FH S H1=H1_DTP D ^FHDEV
"RTN","FHORX1",25,0)
 F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  D WRD
"RTN","FHORX1",26,0)
 I LAB S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1
"RTN","FHORX1",27,0)
 F LLL=TIM:0 S LLL=$O(^FH(119.8,"AD",LLL)) Q:LLL<1  F DA=0:0 S DA=$O(^FH(119.8,"AD",LLL,DA)) Q:DA<1  D Q3
"RTN","FHORX1",28,0)
 ;
"RTN","FHORX1",29,0)
 ;get outpatient data
"RTN","FHORX1",30,0)
 D GETSM^FHOMRBLD(TIM,FHP,"","")
"RTN","FHORX1",31,0)
 D GETGM^FHOMRBL1(TIM,FHP,"","")
"RTN","FHORX1",32,0)
 S FHTIM=$P(FHTIM,".",1)-.000001
"RTN","FHORX1",33,0)
 D GETRM^FHOMRBLD(FHTIM,FHP,"","")
"RTN","FHORX1",34,0)
 D PROSG   ;process recurring, special and guest meal from "OP" node.
"RTN","FHORX1",35,0)
 ;go to routines for printing report
"RTN","FHORX1",36,0)
 G ^FHORX1A:'LAB,^FHORX1B
"RTN","FHORX1",37,0)
WRD S P0=$G(^FH(119.6,W1,0)),WRDN=$P(P0,"^",1),D2=$P(P0,"^",8),P0=$P(P0,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHORX1",38,0)
 I $G(FHP),D2=FHP S ^TMP($J,"W",W1)=P0_"~"_WRDN
"RTN","FHORX1",39,0)
 I '$G(FHP) S ^TMP($J,"W",W1)=P0_"~"_WRDN
"RTN","FHORX1",40,0)
 Q
"RTN","FHORX1",41,0)
Q3 S Z=$G(^FH(119.8,DA,0)) Q:Z=""  S TM1=($P(Z,"^",2)\1),FHDFN=$P(Z,"^",3),ADM=$P(Z,"^",4) Q:'$G(ADM)  Q:'$D(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHORX1",42,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORX1",43,0)
 S WARD=$G(^DPT(DFN,.1)) G:WARD="" Q5 ; Not an inpatient
"RTN","FHORX1",44,0)
 I $G(^DPT("CN",WARD,DFN))'=ADM Q  ; Not current admission
"RTN","FHORX1",45,0)
 S X0=^FHPT(FHDFN,"A",ADM,0),W1=+$P(X0,"^",8) I '$D(^TMP($J,"W",W1)) Q  ; Not in this Comm Office
"RTN","FHORX1",46,0)
 S R1=$G(^DPT(DFN,.101))
"RTN","FHORX1",47,0)
 S RI=$G(^DPT(DFN,.108)) S RE=$S(RI:$O(^FH(119.6,"AR",+RI,W1,0)),1:"")
"RTN","FHORX1",48,0)
 S R0=$S(RE:$P($G(^FH(119.6,W1,"R",+RE,0)),"^",2),1:"")
"RTN","FHORX1",49,0)
 S R0=$S(R0<1:99,R0<10:"0"_R0,1:R0)
"RTN","FHORX1",50,0)
 S ^TMP($J,"I",^TMP($J,"W",W1)_"~"_R0_"~"_R1_"~"_FHDFN,DA)=$P(Z,"^",4,9) Q
"RTN","FHORX1",51,0)
Q5 ; process discharges
"RTN","FHORX1",52,0)
 S W1=+$P(Z,"^",8) Q:'W1  Q:'$D(^TMP($J,"W",W1))
"RTN","FHORX1",53,0)
 S ^TMP($J,"I",^TMP($J,"W",W1)_"~~***~"_FHDFN,DA)=$P(Z,"^",4,9)
"RTN","FHORX1",54,0)
 Q
"RTN","FHORX1",55,0)
 ;
"RTN","FHORX1",56,0)
PROSG ;process recurring, special and guest meals.
"RTN","FHORX1",57,0)
 S FHPLNM=""
"RTN","FHORX1",58,0)
 S:$G(FHP) FHPLNM=$P($G(^FH(119.73,FHP,0)),U,1)
"RTN","FHORX1",59,0)
REC ;for recurring meals
"RTN","FHORX1",60,0)
 ;S FHTMPS=$NA(^TMP($J,"OP","R",FHPLNM))
"RTN","FHORX1",61,0)
 S FHTMPS="^TMP($J,""OP"",""R"")"
"RTN","FHORX1",62,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORX1",63,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHORX1",64,0)
 .S FHPROR="01",FHLOC=""
"RTN","FHORX1",65,0)
 .S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHORX1",66,0)
 .S:$G(FHLOC) FHPROR=$P($G(^FH(119.6,FHLOC,0)),U,4)
"RTN","FHORX1",67,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>NOW)  D
"RTN","FHORX1",68,0)
 ..S (FHRDAT,FHIJKDAT)=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHORX1",69,0)
 ..S $P(FHRDAT,U,3)=$P(FHIJKDAT,U,18)
"RTN","FHORX1",70,0)
 ..S $P(FHRDAT,U,4)=$P(FHIJKDAT,U,3)
"RTN","FHORX1",71,0)
 ..S $P(FHRDAT,U,9)=$P(FHIJKDAT,U,4)
"RTN","FHORX1",72,0)
 ..S $P(FHRDAT,U,5)=$P(FHIJKDAT,U,8)
"RTN","FHORX1",73,0)
 ..S $P(FHRDAT,U,8)=$P(FHIJKDAT,U,7)
"RTN","FHORX1",74,0)
 ..S $P(FHRDAT,U,13)=$P(FHIJKDAT,U,17)
"RTN","FHORX1",75,0)
 ..S FHLPAT=FHPROR_"~"_FHI_"~~~"_$P(FHIJKDAT,U,1)
"RTN","FHORX1",76,0)
 ..S ^TMP($J,"O",FHLPAT,FHK)="RECURRING"_"^"_FHJ_"^"_FHRDAT
"RTN","FHORX1",77,0)
SPEC ;for special meals
"RTN","FHORX1",78,0)
 ;S FHPLNM=$P($G(^FH(119.73,FHP,0)),U,1) Q:FHPLNM=""    ;quit if no comm
"RTN","FHORX1",79,0)
 ;S FHTMPS=$NA(^TMP($J,"OP","S"))
"RTN","FHORX1",80,0)
 S FHTMPS="^TMP($J,""OP"",""S"")"
"RTN","FHORX1",81,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORX1",82,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHORX1",83,0)
 .S FHPROR="01",FHLOC=""
"RTN","FHORX1",84,0)
 .S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHORX1",85,0)
 .S:$G(FHLOC) FHPROR=$P($G(^FH(119.6,FHLOC,0)),U,4)
"RTN","FHORX1",86,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>NOW)  D
"RTN","FHORX1",87,0)
 ..S FHIJKDAT=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHORX1",88,0)
 ..S FHLPAT=FHPROR_"~"_FHI_"~~~"_$P(FHIJKDAT,U,1)
"RTN","FHORX1",89,0)
 ..S ^TMP($J,"O",FHLPAT,FHK)="SPECIAL"_"^"_FHJ_"^"_FHIJKDAT
"RTN","FHORX1",90,0)
 ;for guest meals
"RTN","FHORX1",91,0)
GUEST ;S FHTMPS=$NA(^TMP($J,"OP","G",FHPLNM))
"RTN","FHORX1",92,0)
 S FHTMPS="^TMP($J,""OP"",""G"")"
"RTN","FHORX1",93,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORX1",94,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHORX1",95,0)
 .S FHPROR="01",FHLOC=""
"RTN","FHORX1",96,0)
 .S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHORX1",97,0)
 .S:$G(FHLOC) FHPROR=$P($G(^FH(119.6,FHLOC,0)),U,4)
"RTN","FHORX1",98,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>NOW)  D
"RTN","FHORX1",99,0)
 ..S FHIJKDAT=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHORX1",100,0)
 ..S FHGDIET=$P($G(^FH(119.9,1,0)),U,2)
"RTN","FHORX1",101,0)
 ..S $P(FHIJKDAT,U,9)=$P(FHIJKDAT,U,3)
"RTN","FHORX1",102,0)
 ..S $P(FHIJKDAT,U,14)=$P(FHIJKDAT,U,4)
"RTN","FHORX1",103,0)
 ..S $P(FHIJKDAT,U,15)=$P(FHIJKDAT,U,5)
"RTN","FHORX1",104,0)
 ..S FHGDIETN=$P(FHIJKDAT,U,6)
"RTN","FHORX1",105,0)
 ..I $G(FHGDIETN),$D(^FH(111,FHGDIETN,0)) D
"RTN","FHORX1",106,0)
 ...S FHGDTNM=$P(^FH(111,FHGDIETN,0),U,1)
"RTN","FHORX1",107,0)
 ..E  S:$G(FHGDIET) FHGDTNM=$P($G(^FH(111,FHGDIET,0)),U,1)
"RTN","FHORX1",108,0)
 ..S $P(FHIJKDAT,U,4)=FHGDTNM
"RTN","FHORX1",109,0)
 ..I $G(FHGDIET),$D(^FH(111,FHGDIET,0)) D
"RTN","FHORX1",110,0)
 ...S $P(FHIJKDAT,U,4)=$P(^FH(111,FHGDIET,0),U,1)
"RTN","FHORX1",111,0)
 ..S FHLPAT=FHPROR_"~"_FHI_"~~~"_$P(FHIJKDAT,U,1)
"RTN","FHORX1",112,0)
 ..S ^TMP($J,"O",FHLPAT,FHK)="GUEST"_"^"_FHJ_"^"_FHIJKDAT
"RTN","FHORX1",113,0)
 Q
"RTN","FHORX1",114,0)
 ;
"RTN","FHORX1",115,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHORX1A")
0^231^B45459503
"RTN","FHORX1A",1,0)
FHORX1A ; HISC/REL/NCA/RVD - Diet Activity Report (cont) ;3/17/95  10:06
"RTN","FHORX1A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORX1A",3,0)
 ;
"RTN","FHORX1A",4,0)
 ;process inpatient data.
"RTN","FHORX1A",5,0)
 S PG=0 S FHPIO="** INPATIENT **" D HDR
"RTN","FHORX1A",6,0)
 S P0="",NN=0 F  S P0=$O(^TMP($J,"I",P0)) Q:P0=""  D LST
"RTN","FHORX1A",7,0)
 ;
"RTN","FHORX1A",8,0)
 ;process outpatient data.
"RTN","FHORX1A",9,0)
 S FHPIO="** OUTPATIENT **" D HDR
"RTN","FHORX1A",10,0)
 S P0="",NN=0 F  S P0=$O(^TMP($J,"O",P0)) Q:P0=""  D LST1
"RTN","FHORX1A",11,0)
 ;
"RTN","FHORX1A",12,0)
 S:$G(FHP) $P(^FH(119.73,FHP,0),"^",2)=NOW
"RTN","FHORX1A",13,0)
 I '$G(FHP) F FHII=0:0 S FHII=$O(^FH(119.73,FHII)) Q:FHII'>0  S $P(^FH(119.73,FHII,0),"^",2)=NOW
"RTN","FHORX1A",14,0)
 Q
"RTN","FHORX1A",15,0)
 ;
"RTN","FHORX1A",16,0)
LST K PP S NP=0 F DA=0:0 S DA=$O(^TMP($J,"I",P0,DA)) Q:DA<1  S Z=^(DA) D L1
"RTN","FHORX1A",17,0)
 D L2 Q
"RTN","FHORX1A",18,0)
 ;
"RTN","FHORX1A",19,0)
LST1 K PP S NP=0 S DA=$O(^TMP($J,"O",P0,-NOW)) Q:DA<1  S Z=^(DA) D T1,T2
"RTN","FHORX1A",20,0)
 Q
"RTN","FHORX1A",21,0)
 ;
"RTN","FHORX1A",22,0)
L1 ; Process event
"RTN","FHORX1A",23,0)
 S ADM=$P(Z,"^",1),TYP=$P(Z,"^",2),ACT=$P(Z,"^",3),FHORD=$P(Z,"^",4),TXT=$P(Z,"^",5),CLK=$P(Z,"^",6)
"RTN","FHORX1A",24,0)
 I 'FHORD S NN=NN+1,FHORD=NN
"RTN","FHORX1A",25,0)
 I "DIT"[TYP D
"RTN","FHORX1A",26,0)
 .I TYP="D",FHORD=1 S NP=1
"RTN","FHORX1A",27,0)
 .I $D(PP(TYP,ADM_"~"_FHORD)),ACT="C" K PP(TYP,ADM_"~"_FHORD) Q
"RTN","FHORX1A",28,0)
 .K PP(TYP) S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT_"^"_CLK Q
"RTN","FHORX1A",29,0)
 I "OPSF"[TYP D
"RTN","FHORX1A",30,0)
 .I $D(PP(TYP,ADM_"~"_FHORD)),ACT="C" K PP(TYP,ADM_"~"_FHORD) Q
"RTN","FHORX1A",31,0)
 .S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT_"^"_CLK Q
"RTN","FHORX1A",32,0)
 I "LM"[TYP S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT_"^"_CLK
"RTN","FHORX1A",33,0)
 Q
"RTN","FHORX1A",34,0)
 ;
"RTN","FHORX1A",35,0)
L2 S W1=$P(P0,"~",2),R1=$P(P0,"~",4),FHDFN=$P(P0,"~",5)
"RTN","FHORX1A",36,0)
 D PATNAME^FHOMUTL Q:'$G(DFN)
"RTN","FHORX1A",37,0)
 S Y0=$G(^DPT(DFN,0))
"RTN","FHORX1A",38,0)
 S N1=$P(Y0,"^",1)
"RTN","FHORX1A",39,0)
 ;D PID^FHDPA
"RTN","FHORX1A",40,0)
 S TC=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",5),SF=$P($G(^(0)),"^",7),SO=$D(^FHPT("ASP",FHDFN,ADM))
"RTN","FHORX1A",41,0)
 D:$Y>(IOSL-6) HDR W !!,$E(W1_" "_R1,1,20),?22,N1,?50,BID,?63,$S(SF:"SF",1:""),?66,$S(SO:"SO",1:""),?73,TC,!
"RTN","FHORX1A",42,0)
 D ^FHORX1C D:NP NEWP Q
"RTN","FHORX1A",43,0)
 ;
"RTN","FHORX1A",44,0)
T1 ; Process outpatient event
"RTN","FHORX1A",45,0)
 ;S ADM=$P(Z,"^",1),TYP=$P(Z,"^",2),ACT=$P(Z,"^",3),FHORD=$P(Z,"^",4),TXT=$P(Z,"^",5),CLK=$P(Z,"^",6)
"RTN","FHORX1A",46,0)
 S FHMTY=$P(Z,"^",1),FHPNM=$P(Z,"^",2),FHDTE=$P(Z,"^",4)
"RTN","FHORX1A",47,0)
 S FHMEAL=$P(Z,"^",9),FHDIET=$P(Z,"^",6)
"RTN","FHORX1A",48,0)
 S FHCOMM=$P(Z,"^",10),FHTCD=$P(Z,"^",15)
"RTN","FHORX1A",49,0)
 Q
"RTN","FHORX1A",50,0)
 ;
"RTN","FHORX1A",51,0)
T2 S W1=$P(P0,"~",2),R1=$P(P0,"~",4),FHDFN=$P(P0,"~",5)
"RTN","FHORX1A",52,0)
 Q:'$G(FHDFN)
"RTN","FHORX1A",53,0)
 D PATNAME^FHOMUTL
"RTN","FHORX1A",54,0)
 S FHDASAV=DA
"RTN","FHORX1A",55,0)
 ;
"RTN","FHORX1A",56,0)
 ;S N1=$P(Y0,"^",1) D PID^FHDPA
"RTN","FHORX1A",57,0)
 ;S TC=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",5),SF=$P($G(^(0)),"^",7),SO=$D(^FHPT("ASP",FHDFN,ADM))
"RTN","FHORX1A",58,0)
 ;D:$Y>54 HDR W !!,$E(W1_" "_R1,1,20),?22,N1,?54,FHBID,?63,$S(SF:"SF",1:""),?66,$S(SO:"SO",1:""),?73,TC,!
"RTN","FHORX1A",59,0)
 I $Y>(IOSL-6) D HDR
"RTN","FHORX1A",60,0)
 W !!,$E(W1,1,20),?22,FHPNM,?50,FHBID,?73,FHTCD
"RTN","FHORX1A",61,0)
 F FHDA=0:0 S FHDA=$O(^TMP($J,"O",P0,FHDA)) Q:FHDA<1  S Z=^(FHDA) D
"RTN","FHORX1A",62,0)
 .S FHMTY=$P(Z,"^",1),FHPNM=$P(Z,"^",2),FHDTE=$P(Z,"^",4)
"RTN","FHORX1A",63,0)
 .S FHSTAT=$P(Z,"^",5)
"RTN","FHORX1A",64,0)
 .S FHSTANAM=""
"RTN","FHORX1A",65,0)
 .I FHMTY="SPECIAL" S FHSTANAM=$S(FHSTAT="C":"CANCELLED",FHSTAT="D":"DENIED",FHSTAT="A":"AUTHORIZED",1:"PENDING")
"RTN","FHORX1A",66,0)
 .I FHMTY="RECURRING",FHSTAT="C" D  Q
"RTN","FHORX1A",67,0)
 ..W:FHDTE'="" !!,?12,"Date: ",FHDTE
"RTN","FHORX1A",68,0)
 ..W !,?14,"CANCELLED!!!"
"RTN","FHORX1A",69,0)
 ..W:FHMTY'="" !,?14,"Service Type: ",FHMTY
"RTN","FHORX1A",70,0)
 .S FHCOMM=$P(Z,"^",10),FHTCD=$P(Z,"^",15)
"RTN","FHORX1A",71,0)
 .S FHCLA=$P(Z,"^",16),FHCOS=$P(Z,"^",17)
"RTN","FHORX1A",72,0)
 .S FHMEAL=$P(Z,"^",11),FHDIET=$P(Z,"^",6),FHCLRK=$P(Z,"^",7)
"RTN","FHORX1A",73,0)
 .I $Y>(IOSL-6) D HDR W !!,$E(W1,1,20),?22,FHPNM,?50,FHBID,?73,FHTCD
"RTN","FHORX1A",74,0)
 .I FHMTY="GUEST" D  Q
"RTN","FHORX1A",75,0)
 ..W:FHDTE'="" !!,?12,"Date: ",FHDTE
"RTN","FHORX1A",76,0)
 ..W:FHDIET'="" !,?14,"Diet: ",FHDIET
"RTN","FHORX1A",77,0)
 ..W:FHMEAL'="" !,?14,"Meal: (",FHMEAL,")"
"RTN","FHORX1A",78,0)
 ..I $Y>(IOSL-6) D HDR
"RTN","FHORX1A",79,0)
 ..W:FHMTY'="" !,?14,"Service Type: ",FHMTY
"RTN","FHORX1A",80,0)
 ..W:FHCLA'="" !,?14,"Classification: ",FHCLA
"RTN","FHORX1A",81,0)
 ..W:FHCOS'="" !,?14,"Charge: ",FHCOS
"RTN","FHORX1A",82,0)
 .;
"RTN","FHORX1A",83,0)
 .I FHMTY="SPECIAL" D  Q
"RTN","FHORX1A",84,0)
 ..W:FHDTE'="" !!,?12,"Date: ",FHDTE
"RTN","FHORX1A",85,0)
 ..W:FHDIET'="" !,?14,"Diet: ",FHDIET
"RTN","FHORX1A",86,0)
 ..W:FHSTANAM'="" !,?14,"Status: ",FHSTANAM
"RTN","FHORX1A",87,0)
 ..W:FHMEAL'="" !,?14,"Meal: (",FHMEAL,")"
"RTN","FHORX1A",88,0)
 ..W:FHMTY'="" !,?14,"Service Type: ",FHMTY
"RTN","FHORX1A",89,0)
 ..I FHCOMM'="" S EVT="  Comment: "_FHCOMM D LNE^FHORX1C
"RTN","FHORX1A",90,0)
 .S (FHAOT,FHAOC,FHELTT,FHELTBM,FHTFCOM,FHTFTC,FHTFTKD,FHTFPR)=""
"RTN","FHORX1A",91,0)
 .S (FHDAIN,FHAOCN)=""
"RTN","FHORX1A",92,0)
 .I $D(^FHPT(FHDFN,"OP","B",FHDA)) D
"RTN","FHORX1A",93,0)
 ..S FHDAIN=$O(^FHPT(FHDFN,"OP","B",FHDA,0))
"RTN","FHORX1A",94,0)
 .I $G(FHDAIN),$D(^FHPT(FHDFN,"OP",FHDAIN,1)) D
"RTN","FHORX1A",95,0)
 ..S FHRDAT1=$G(^FHPT(FHDFN,"OP",FHDAIN,1))
"RTN","FHORX1A",96,0)
 ..S FHAOT=$P(FHRDAT1,U,1)
"RTN","FHORX1A",97,0)
 ..S FHAOC=$P(FHRDAT1,U,2)
"RTN","FHORX1A",98,0)
 ..S FHAOCN=$P(FHRDAT1,U,5)
"RTN","FHORX1A",99,0)
 ..S:FHAOCN="C" FHAOCN="Cancelled"
"RTN","FHORX1A",100,0)
 ..I $G(FHAOC),($D(^VA(200,FHAOC,0))) S FHAOC=$P(^VA(200,FHAOC,0),U,1)
"RTN","FHORX1A",101,0)
 .I $D(^FHPT(FHDFN,"OP","SM",FHDA,1)) D
"RTN","FHORX1A",102,0)
 ..S FHRDAT1=$G(^FHPT(FHDFN,"OP","SM",FHDA,1))
"RTN","FHORX1A",103,0)
 ..S FHELTT=$P(FHRDAT1,U,1)
"RTN","FHORX1A",104,0)
 ..S FHELTBM=$P(FHRDAT1,U,2)
"RTN","FHORX1A",105,0)
 ..I $G(FHAOC),($D(^VA(200,FHAOC,0))) S FHAOC=$P(^VA(200,FHAOC,0),U,1)
"RTN","FHORX1A",106,0)
 .I $D(^FHPT(FHDFN,"OP",FHDA,2)) D
"RTN","FHORX1A",107,0)
 ..S FHRDAT2=$G(^FHPT(FHDFN,"OP",FHDAIN,2))
"RTN","FHORX1A",108,0)
 ..S FHELTT=$P(FHRDAT2,U,1)
"RTN","FHORX1A",109,0)
 ..S FHELTBM=$P(FHRDAT2,U,2)
"RTN","FHORX1A",110,0)
 .S FHTFCN=""
"RTN","FHORX1A",111,0)
 .I $G(FHDAIN),$D(^FHPT(FHDFN,"OP",FHDAIN,3)) D
"RTN","FHORX1A",112,0)
 ..S FHRDAT3=$G(^FHPT(FHDFN,"OP",FHDAIN,3))
"RTN","FHORX1A",113,0)
 ..S FHTFCOM=$P(FHRDAT3,U,1)
"RTN","FHORX1A",114,0)
 ..S FHTFTC=$P(FHRDAT3,U,2)
"RTN","FHORX1A",115,0)
 ..S FHTFTKD=$P(FHRDAT3,U,3)
"RTN","FHORX1A",116,0)
 ..S FHTFCN=$P(FHRDAT3,U,5)
"RTN","FHORX1A",117,0)
 ..S:FHTFCN="C" FHTFCN="Cancelled"
"RTN","FHORX1A",118,0)
 .;get Tube Feeding data
"RTN","FHORX1A",119,0)
 .I $G(FHDAIN) D
"RTN","FHORX1A",120,0)
 ..F FHTFDA=0:0 S FHTFDA=$O(^FHPT(FHDFN,"OP",FHDAIN,"TF",FHTFDA)) Q:FHTFDA'>0  D
"RTN","FHORX1A",121,0)
 ...S FHTFDAT=$G(^FHPT(FHDFN,"OP",FHDAIN,"TF",FHTFDA,0))
"RTN","FHORX1A",122,0)
 ...S FHTFPR=$P(FHTFDAT,U,1)
"RTN","FHORX1A",123,0)
 ...I $G(FHTFPR),$D(^FH(118.2,FHTFPR,0)) S FHTFPR=$P(^FH(118.2,FHTFPR,0),U,1)
"RTN","FHORX1A",124,0)
 ...S FHTFST=$P(FHTFDAT,U,2)
"RTN","FHORX1A",125,0)
 ...S:$G(FHTFST) FHTFST=$S(FHTFST=1:"1/4",FHTFST=2:"1/2",FHTFST=3:"3/4",FHTFST=4:"FULL",1:"")
"RTN","FHORX1A",126,0)
 ...S FHTFQU=$P(FHTFDAT,U,3)
"RTN","FHORX1A",127,0)
 ...S FHTFCC=$P(FHTFDAT,U,4)
"RTN","FHORX1A",128,0)
 .W:FHDTE'="" !!,?12,"Date: ",FHDTE
"RTN","FHORX1A",129,0)
 .W:FHDIET'="" !,?14,"Diet: ",FHDIET
"RTN","FHORX1A",130,0)
 .W:FHMEAL'="" !,?14,"Meal: (",FHMEAL,")"
"RTN","FHORX1A",131,0)
 .W:FHMTY'="" !,?14,"Service Type: ",FHMTY
"RTN","FHORX1A",132,0)
 .;
"RTN","FHORX1A",133,0)
 .I FHAOT'="",FHMTY="RECURRING" S EVT="  Additional Order: "_FHAOT_" "_FHAOCN_" By: "_FHAOC D LNE^FHORX1C
"RTN","FHORX1A",134,0)
 .I FHELTT'="" S EVT="  Early/Late Tray Time: "_FHELTT_"  Bag Meal: "_FHELTBM D LNE^FHORX1C
"RTN","FHORX1A",135,0)
 .I FHTFCOM'="",FHMTY="RECURRING" S EVT="  TF: "_FHTFCOM_"  TF Total CCs: "_FHTFTC_"  TF Total KCALS/Day: "_FHTFTKD_" "_FHTFCN D LNE^FHORX1C
"RTN","FHORX1A",136,0)
 .I FHTFPR'="",FHMTY="RECURRING" D
"RTN","FHORX1A",137,0)
 ..S EVT="  TF Product: "_FHTFPR_"  TF Strength: "_FHTFST_"  TF Quantity: "_FHTFQU_"  TF Product CC/Day: "_FHTFCC_" "_FHTFCN
"RTN","FHORX1A",138,0)
 ..D LNE^FHORX1C
"RTN","FHORX1A",139,0)
 .;
"RTN","FHORX1A",140,0)
 K ALG I $G(DFN) D ALG^FHCLN I ALG'="" S EVT="Allergies: "_ALG,TYP="A" D LNE^FHORX1C
"RTN","FHORX1A",141,0)
 S DA=FHDASAV
"RTN","FHORX1A",142,0)
 ;get food preference
"RTN","FHORX1A",143,0)
 S FHFPDAT=$O(^FHPT(FHDFN,"P",0))
"RTN","FHORX1A",144,0)
 I $G(FHFPDAT) D
"RTN","FHORX1A",145,0)
 .F FHFPI=0:0 S FHFPI=$O(^FHPT(FHDFN,"P",FHFPI)) Q:FHFPI'>0  D
"RTN","FHORX1A",146,0)
 ..S FHFPDAT1=$G(^FHPT(FHDFN,"P",FHFPI,0))
"RTN","FHORX1A",147,0)
 ..S FHFP52=$P(FHFPDAT1,U,1)
"RTN","FHORX1A",148,0)
 ..S FHFPME=$P(FHFPDAT1,U,2)
"RTN","FHORX1A",149,0)
 ..I $G(FHFP52),$D(^FH(115.2,FHFP52,0)) D
"RTN","FHORX1A",150,0)
 ...S EVT="Pref: "_$P(^FH(115.2,FHFP52,0),U,1)_"  ("_FHFPME_")"
"RTN","FHORX1A",151,0)
 ...I $Y>(IOSL-6) D HDR W !!,$E(W1,1,20),?22,FHPNM,?50,FHBID,?73,FHTCD
"RTN","FHORX1A",152,0)
 ...D LNE^FHORX1C
"RTN","FHORX1A",153,0)
 Q
"RTN","FHORX1A",154,0)
 ;
"RTN","FHORX1A",155,0)
HDR ;W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?20,"D I E T   A C T I V I T Y   R E P O R T",?72,"Page ",PG
"RTN","FHORX1A",156,0)
 W @IOF S PG=PG+1 W !?20,"D I E T   A C T I V I T Y   R E P O R T",?72,"Page ",PG
"RTN","FHORX1A",157,0)
 W !!?(80-$L(H1)\2),H1
"RTN","FHORX1A",158,0)
 W !,?30,FHPIO
"RTN","FHORX1A",159,0)
 W !!,"Location",?22,"Patient",?50,"ID#",?62,"Sup/Std  Service"
"RTN","FHORX1A",160,0)
 Q
"RTN","FHORX1A",161,0)
 ;
"RTN","FHORX1A",162,0)
NEWP K ALG I $G(DFN) D ALG^FHCLN I ALG'="" S EVT="Allergies: "_ALG,TYP="A" D LNE^FHORX1C
"RTN","FHORX1A",163,0)
 Q:'$D(^FHPT(FHDFN,"P"))
"RTN","FHORX1A",164,0)
 S X1="Pref:" F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D N1
"RTN","FHORX1A",165,0)
 W:$L(X1)>6 !?12,X1 Q
"RTN","FHORX1A",166,0)
 ;
"RTN","FHORX1A",167,0)
N1 S Y=$G(^FH(115.2,+X,0)) Q:$P(Y,"^",2)'="D"
"RTN","FHORX1A",168,0)
 S Y=" "_$P(Y,"^",1)_" ("_$P(X,"^",2)_")"_$S($P(X,"^",4)="Y":" (D)",1:"") I $L(X1)+$L(Y)>48 W !?12,X1 S X1="Pref:"
"RTN","FHORX1A",169,0)
 S X1=X1_Y Q
"RTN","FHORX1B")
0^232^B9940559
"RTN","FHORX1B",1,0)
FHORX1B ; HISC/REL/RVD - Diet Activity Labels ;8/26/94  12:10
"RTN","FHORX1B",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORX1B",3,0)
 ;
"RTN","FHORX1B",4,0)
 ;RVD 2/04/04 - modified for outpatient meals changes.
"RTN","FHORX1B",5,0)
 ;
"RTN","FHORX1B",6,0)
 ;^tmp($J,"I" - for inpatient data.
"RTN","FHORX1B",7,0)
 ;^tmp($J,"O" - for outpatient data;
"RTN","FHORX1B",8,0)
 ;
"RTN","FHORX1B",9,0)
 ;S FHPIO="** INPATIENT **"
"RTN","FHORX1B",10,0)
 S S2=LAB=2*5+36 I LAB<3 D LHD
"RTN","FHORX1B",11,0)
 S COUNT=0,LINE=1
"RTN","FHORX1B",12,0)
 S P0="",NN=0 F  S P0=$O(^TMP($J,"I",P0)) Q:P0=""  D LST
"RTN","FHORX1B",13,0)
 ;S FHPIO="** OUTPATIENT **"
"RTN","FHORX1B",14,0)
 D LST1    ;go process event for outpatient
"RTN","FHORX1B",15,0)
 I LAB<3 F L=1:1:18 W !
"RTN","FHORX1B",16,0)
 S:$G(FHP) $P(^FH(119.73,FHP,0),"^",3)=NOW
"RTN","FHORX1B",17,0)
 I '$G(FHP) F FHII=0:0 S FHII=$O(^FH(119.73,FHII)) Q:FHII'>0  S $P(^FH(119.73,FHII,0),"^",3)=NOW
"RTN","FHORX1B",18,0)
 I LAB>2 D DPLL^FHLABEL
"RTN","FHORX1B",19,0)
 Q
"RTN","FHORX1B",20,0)
LST K PP S NP=0,LOC=0 F DA=0:0 S DA=$O(^TMP($J,"I",P0,DA)) Q:DA<1  S Z=^(DA) D L1
"RTN","FHORX1B",21,0)
 Q:LOC
"RTN","FHORX1B",22,0)
 D:$D(PP) L2,WRT Q
"RTN","FHORX1B",23,0)
 ;
"RTN","FHORX1B",24,0)
LST1 ;process outpatient
"RTN","FHORX1B",25,0)
 K PP S NP=0,LOC=0,P0="" F  S P0=$O(^TMP($J,"O",P0)) Q:P0=""  D T2
"RTN","FHORX1B",26,0)
 Q
"RTN","FHORX1B",27,0)
 ;
"RTN","FHORX1B",28,0)
L1 ; Process event for inpatient
"RTN","FHORX1B",29,0)
 S ADM=$P(Z,"^",1),TYP=$P(Z,"^",2),ACT=$P(Z,"^",3),FHORD=$P(Z,"^",4),TXT=$P(Z,"^",5)
"RTN","FHORX1B",30,0)
 Q:"DIL"'[TYP  I 'FHORD S NN=NN+1,FHORD=NN
"RTN","FHORX1B",31,0)
 I "DI"[TYP D
"RTN","FHORX1B",32,0)
 .I $D(PP(TYP,ADM_"~"_FHORD)),ACT="C" K PP(TYP,ADM_"~"_FHORD) Q
"RTN","FHORX1B",33,0)
 .K PP(TYP) S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT Q
"RTN","FHORX1B",34,0)
 I TYP="L" D
"RTN","FHORX1B",35,0)
 .I ACT="D" S LOC=1 Q
"RTN","FHORX1B",36,0)
 .S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT S:ACT="A" NP=1 Q
"RTN","FHORX1B",37,0)
 Q
"RTN","FHORX1B",38,0)
 ;
"RTN","FHORX1B",39,0)
L2 S W1=$P(P0,"~",2),R1=$P(P0,"~",4),FHDFN=$P(P0,"~",5)
"RTN","FHORX1B",40,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORX1B",41,0)
 S Y0=$G(^DPT(DFN,0))
"RTN","FHORX1B",42,0)
 S N1=$P(Y0,"^",1) D PID^FHDPA
"RTN","FHORX1B",43,0)
 S TC=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",5),IS=$P($G(^(0)),"^",10),FHORD=+$P($G(^(0)),"^",2) Q:'FHORD
"RTN","FHORX1B",44,0)
 I IS S IS=$G(^FH(119.4,IS,0)) I IS'="" S TC=TC_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHORX1B",45,0)
 S X=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) D CUR
"RTN","FHORX1B",46,0)
 Q
"RTN","FHORX1B",47,0)
 ;
"RTN","FHORX1B",48,0)
T2 ;get the last outpatient entry.
"RTN","FHORX1B",49,0)
 K PP S NP=0,LOC=0 S FHDAT=$O(^TMP($J,"O",P0,-NOW))
"RTN","FHORX1B",50,0)
 S (FHDIET,Y)=$P(^TMP($J,"O",P0,FHDAT),U,6)
"RTN","FHORX1B",51,0)
 S TC=$P(^TMP($J,"O",P0,FHDAT),U,15)
"RTN","FHORX1B",52,0)
 S W1=$P(P0,"~",2),R1=$P(P0,"~",4),FHDFN=$P(P0,"~",5)
"RTN","FHORX1B",53,0)
 D PATNAME^FHOMUTL
"RTN","FHORX1B",54,0)
 S N1=FHPTNM,BID=FHBID
"RTN","FHORX1B",55,0)
 ;
"RTN","FHORX1B",56,0)
WRT I LAB>2 D LL Q
"RTN","FHORX1B",57,0)
 W !,$E(N1,1,S2-5-$L(W1)),?(S2-3-$L(W1)),W1,!,BID W:NP " *"
"RTN","FHORX1B",58,0)
 W @FHIO("EON") W ?(S2-3\2),TC W @FHIO("EOF") W ?(S2-3-$L(R1)),R1 W @FHIO("EON") I $L(Y)<S2 W:LAB=2 ! W !!,Y,!!
"RTN","FHORX1B",59,0)
 E  S L=$S($L($P(Y,",",1,3))<S2:3,1:2) W !!,$P(Y,",",1,L) W:LAB=2 ! W !,$E($P(Y,",",L+1,5),2,99),!
"RTN","FHORX1B",60,0)
 W @FHIO("EOF") W:LAB=2 ?(S2-20),$P(H1," - ",2),!! Q
"RTN","FHORX1B",61,0)
 ;
"RTN","FHORX1B",62,0)
LHD S A1=S2-30\2 W:LAB=2 ! W !?A1,"***************************",!?A1,"*",?(A1+26),"*",!?A1,"*",?(A1+5),$P(H1," - ",2),?(A1+26),"*"
"RTN","FHORX1B",63,0)
 W !?A1,"*",?(A1+26),"*",!?A1,"***************************",! W:LAB=2 !! Q
"RTN","FHORX1B",64,0)
CUR S Y="" Q:X=""  S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHORX1B",65,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHORX1B",66,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORX1B",67,0)
 Q
"RTN","FHORX1B",68,0)
LL ;
"RTN","FHORX1B",69,0)
 S X1=TC S:NP BID=BID_" *"
"RTN","FHORX1B",70,0)
 D LAB^FHLABEL Q
"RTN","FHORX1C")
0^233^B11881645
"RTN","FHORX1C",1,0)
FHORX1C ; HISC/REL/NCA/RVD - List Dietetic Events ;11/15/00  14:38
"RTN","FHORX1C",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORX1C",3,0)
 ;
"RTN","FHORX1C",4,0)
 F TYP="L","D","M","I","T","O","P","S","F" I $D(PP(TYP)) S NXT="" F  S NXT=$O(PP(TYP,NXT)) Q:NXT=""  S ADM=$P(NXT,"~",1),FHORD=$P(NXT,"~",2),ACT=$P(PP(TYP,NXT),"^",1),TXT=$P(PP(TYP,NXT),"^",2),CLK=$P(PP(TYP,NXT),"^",3) D @TYP
"RTN","FHORX1C",5,0)
 Q
"RTN","FHORX1C",6,0)
L ; Location
"RTN","FHORX1C",7,0)
 S EVT=$S(ACT="A":"Admit to ",ACT="T":"Transfer from ",1:"Discharge from ")
"RTN","FHORX1C",8,0)
 I "DT"[ACT S X1=$P(TXT,"~",1) S:X1 X1=$P($G(^FH(119.6,X1,0)),"^",1) S EVT=EVT_X1 S X1=$P(TXT,"~",2) S:X1 X1=$P($G(^DG(405.4,X1,0)),"^",1) S:X1'="" EVT=EVT_" "_X1
"RTN","FHORX1C",9,0)
 S:ACT="T" EVT=EVT_" to "
"RTN","FHORX1C",10,0)
 I "AT"[ACT S X1=$P(TXT,"~",3) S:X1 X1=$P($G(^FH(119.6,X1,0)),"^",1) S EVT=EVT_X1 S X1=$P(TXT,"~",4) S:X1 X1=$P($G(^DG(405.4,X1,0)),"^",1) S:X1'="" EVT=EVT_" "_X1
"RTN","FHORX1C",11,0)
 G LNE
"RTN","FHORX1C",12,0)
D ; Diet
"RTN","FHORX1C",13,0)
 S X=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),COM=$G(^(1)) Q:X=""  D CUR S EVT="Diet: "_Y
"RTN","FHORX1C",14,0)
 I FHLD="" S X9=$P(X,"^",8) I X9'="",X9'=TC S EVT=EVT_"  ("_$S(X9="T":"Tray",X9="D":"Dining Room",1:"Cafe")_")"
"RTN","FHORX1C",15,0)
 S:COM'="" EVT=EVT_", "_COM D LNE
"RTN","FHORX1C",16,0)
 S X2="" F NX=0:0 S NX=$O(^FHPT(FHDFN,"A",ADM,"AC",NX)) Q:NX<1!(NX>TIM)  S X2=$P(^(NX,0),"^",2)
"RTN","FHORX1C",17,0)
 Q:X2=FHORD!(X2="")  S X=$G(^FHPT(FHDFN,"A",ADM,"DI",X2,0)) D CUR
"RTN","FHORX1C",18,0)
 S EVT="Old:  "_Y G LNE
"RTN","FHORX1C",19,0)
I ; Isolation
"RTN","FHORX1C",20,0)
 S EVT="IS: "_$P($G(^FH(119.4,FHORD,0)),"^",1)
"RTN","FHORX1C",21,0)
 S:ACT="C" EVT=EVT_" Cancelled" G LNE
"RTN","FHORX1C",22,0)
T ; Tubefeed
"RTN","FHORX1C",23,0)
 S EVT=""
"RTN","FHORX1C",24,0)
 F K1=0:0 S K1=$O(^FHPT(FHDFN,"A",ADM,"TF",FHORD,"P",K1)) Q:K1<1  S X3=$G(^(K1,0)),TUN=$P(X3,"^",1),XX=$G(^FH(118.2,TUN,0)) D CALC^FHORX3 S:EVT'="" EVT=EVT_", " S EVT=EVT_P2_" "_$P(XX,"^",1)
"RTN","FHORX1C",25,0)
 S COM=$P($G(^FHPT(FHDFN,"A",ADM,"TF",FHORD,0)),"^",5) I COM'="" S EVT=EVT_", "_COM
"RTN","FHORX1C",26,0)
 S EVT="TF: "_EVT S:ACT="C" EVT=EVT_" Cancelled"
"RTN","FHORX1C",27,0)
 G LNE
"RTN","FHORX1C",28,0)
O ; Additional Order
"RTN","FHORX1C",29,0)
 S Y=$P($G(^FHPT(FHDFN,"A",ADM,"OO",FHORD,0)),"^",3) Q:Y=""
"RTN","FHORX1C",30,0)
 S EVT="AO: "_Y S:ACT="C" EVT=EVT_" Cancelled" G LNE
"RTN","FHORX1C",31,0)
P ; Food Preferences
"RTN","FHORX1C",32,0)
 S EVT="FP: "_TXT D CLK G LNE
"RTN","FHORX1C",33,0)
M ; Message
"RTN","FHORX1C",34,0)
 S EVT="Msg: "_TXT G LNE
"RTN","FHORX1C",35,0)
F ; Suppl. feedings P30
"RTN","FHORX1C",36,0)
 S Z=$G(^FHPT(FHDFN,"A",ADM,"SF",+FHORD,0)) Q:Z=""  S SP=$P(Z,"^",4)
"RTN","FHORX1C",37,0)
 S EVT="SF: "_$P($G(^FH(118.1,+SP,0)),"^",1) S:ACT="C" EVT=EVT_" Cancelled" G LNE
"RTN","FHORX1C",38,0)
S ; Standing Orders
"RTN","FHORX1C",39,0)
 S Z=$G(^FHPT(FHDFN,"A",ADM,"SP",+FHORD,0)) Q:Z=""  S SP=$P(Z,"^",2),MEAL=$P(Z,"^",3),QTY=$P(Z,"^",8)
"RTN","FHORX1C",40,0)
 S EVT="SO: "_$S(QTY:QTY,1:1)_" "_$P($G(^FH(118.3,+SP,0)),"^",1)_" ("_MEAL_")" S:ACT="C" EVT=EVT_" Cancelled" G LNE
"RTN","FHORX1C",41,0)
CUR S Y="" Q:X=""  S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHORX1C",42,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHORX1C",43,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORX1C",44,0)
 Q
"RTN","FHORX1C",45,0)
CLK ; Get entered clerk
"RTN","FHORX1C",46,0)
 I CLK S EVT=EVT_" By: "_$P($G(^VA(200,+CLK,0)),"^",1)
"RTN","FHORX1C",47,0)
 Q
"RTN","FHORX1C",48,0)
LNE ; Break line if longer than 48 chars
"RTN","FHORX1C",49,0)
 I $Y>(IOSL-6) D HDR^FHORX1A W !
"RTN","FHORX1C",50,0)
 I $L(EVT)<49 G EX
"RTN","FHORX1C",51,0)
 F KK=49:-1:4 Q:$E(EVT,KK)?1P
"RTN","FHORX1C",52,0)
 I KK=4 S KK=48 W !?12,$E(EVT,1,48)
"RTN","FHORX1C",53,0)
 E  W !?12,$E(EVT,1,KK-1)
"RTN","FHORX1C",54,0)
 S EVT="    "_$E(EVT,KK+1,999) G LNE
"RTN","FHORX1C",55,0)
EX W !?12,EVT Q
"RTN","FHORX2")
0^234^B4235060
"RTN","FHORX2",1,0)
FHORX2 ; HISC/REL,RTK - List Patient Events ;8/2/94  10:07
"RTN","FHORX2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORX2",3,0)
 S FHALL=1 D ^FHOMDPA
"RTN","FHORX2",4,0)
 I 'DFN,'IEN200 G KIL
"RTN","FHORX2",5,0)
 G:FHDFN="" KIL D NOW^%DTC S DT=%\1
"RTN","FHORX2",6,0)
 I '$D(^FH(119.8,"AP",FHDFN)) W !!,"No Dietetic Events on File." G FHORX2
"RTN","FHORX2",7,0)
 D DT G:'SDT!('EDT) FHORX2 S EDT=EDT+.3
"RTN","FHORX2",8,0)
 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORX2",9,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORX2",FHLST="FHDFN^DFN^SDT^EDT" D EN2^FH G KIL
"RTN","FHORX2",10,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G FHORX2
"RTN","FHORX2",11,0)
Q1 ; Process List
"RTN","FHORX2",12,0)
 D HDR F KK=SDT-.1:0 S KK=$O(^FH(119.8,"AP",FHDFN,KK)) Q:KK>EDT!(KK<1)  F DA=0:0 S DA=$O(^FH(119.8,"AP",FHDFN,KK,DA)) Q:DA<1  D ^FHORX3
"RTN","FHORX2",13,0)
 G KIL
"RTN","FHORX2",14,0)
HDR I DFN S X="Dietetic Events for "_$P($G(^DPT(DFN,0)),"^",1) W:$E(IOST,1,2)="C-" @IOF W !?(80-$L(X)\2),X
"RTN","FHORX2",15,0)
 I 'DFN S X="Dietetic Events for "_$P($G(^VA(200,IEN200,0)),"^",1) W:$E(IOST,1,2)="C-" @IOF W !?(80-$L(X)\2),X
"RTN","FHORX2",16,0)
 W !!?26,"From " S D1=SDT D DTP^FHORX3 W " to " S D1=EDT\1 D DTP^FHORX3 W !
"RTN","FHORX2",17,0)
 Q
"RTN","FHORX2",18,0)
DT ; Get From/To Dates
"RTN","FHORX2",19,0)
D1 S (SDT,EDT)=0,%DT="AEPX",%DT("A")="Starting Date: " W ! D ^%DT S:$D(DTOUT) X="^" G D3:U[X,D1:Y<1 S SDT=+Y
"RTN","FHORX2",20,0)
 I SDT>DT W *7,"  [Cannot Start after Today!] " G D1
"RTN","FHORX2",21,0)
D2 S EDT=0,%DT="AEPX",%DT("A")=" Ending Date: ",%DT("B")="T" D ^%DT S:$D(DTOUT) X="^" G D3:U[X,D2:Y<1 S EDT=+Y
"RTN","FHORX2",22,0)
 I EDT>DT W *7,"  [Cannot End after Today!] " G D2
"RTN","FHORX2",23,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHORX2",24,0)
D3 K %DT Q
"RTN","FHORX2",25,0)
KIL G KILL^XUSCLEAN
"RTN","FHORX3")
0^235^B14764815
"RTN","FHORX3",1,0)
FHORX3 ; HISC/REL/NCA/RTK - List Dietetic Events ;2/23/01  09:17
"RTN","FHORX3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHORX3",3,0)
 S Z=$G(^FH(119.8,DA,0)) Q:Z=""  S D1=$P(Z,"^",2),FHDFN=$P(Z,"^",3),ADM=$P(Z,"^",4),TYP=$P(Z,"^",5),ACT=$P(Z,"^",6),FHORD=$P(Z,"^",7),TXT=$P(Z,"^",8),CLK=$P(Z,"^",9)
"RTN","FHORX3",4,0)
 I TYP="Z" D OUTPEV Q
"RTN","FHORX3",5,0)
 I "DITOS"[TYP,'FHORD Q
"RTN","FHORX3",6,0)
 G L:TYP="L",D:TYP="D",M:TYP="M",I:TYP="I",T:TYP="T",O:TYP="O",P:TYP="P",S:TYP="S",F:TYP="F" Q  ;P30
"RTN","FHORX3",7,0)
L ; Location
"RTN","FHORX3",8,0)
 S EVT=$S(ACT="A":"Admit to ",ACT="T":"Transfer from ",1:"Discharge from ")
"RTN","FHORX3",9,0)
 I "DT"[ACT S X1=$P(TXT,"~",1) S:X1 X1=$P($G(^FH(119.6,X1,0)),"^",1) S EVT=EVT_X1 S X1=$P(TXT,"~",2) S:X1 X1=$P($G(^DG(405.4,X1,0)),"^",1) S:X1'="" EVT=EVT_" "_X1
"RTN","FHORX3",10,0)
 S:ACT="T" EVT=EVT_" to "
"RTN","FHORX3",11,0)
 I "AT"[ACT S X1=$P(TXT,"~",3) S:X1 X1=$P($G(^FH(119.6,X1,0)),"^",1) S EVT=EVT_X1 S X1=$P(TXT,"~",4) S:X1 X1=$P($G(^DG(405.4,X1,0)),"^",1) S:X1'="" EVT=EVT_" "_X1
"RTN","FHORX3",12,0)
 G EX
"RTN","FHORX3",13,0)
D ; Diet
"RTN","FHORX3",14,0)
 Q:'FHORD  Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHORX3",15,0)
 D C2^FHORD7 S EVT="Diet: "_Y G:FHLD'="" EX
"RTN","FHORX3",16,0)
 S X9=$P(X,"^",8) S:X9'="" EVT=EVT_"  ("_$S(X9="T":"Tray",X9="D":"Dining Room",1:"Cafe")_")" G EX
"RTN","FHORX3",17,0)
I ; Isolation
"RTN","FHORX3",18,0)
 S EVT="Isolation: "_$P($G(^FH(119.4,FHORD,0)),"^",1)
"RTN","FHORX3",19,0)
 S:ACT="C" EVT=EVT_" Cancelled" G EX
"RTN","FHORX3",20,0)
T ; Tubefeed
"RTN","FHORX3",21,0)
 S EVT=""
"RTN","FHORX3",22,0)
 F K1=0:0 S K1=$O(^FHPT(FHDFN,"A",ADM,"TF",FHORD,"P",K1)) Q:K1<1  S X3=$G(^(K1,0)),TUN=$P(X3,"^",1),XX=$G(^FH(118.2,TUN,0)) D CALC S:EVT'="" EVT=EVT_", " S EVT=EVT_P2_" "_$P(XX,"^",1)
"RTN","FHORX3",23,0)
 S COM=$P($G(^FHPT(FHDFN,"A",ADM,"TF",FHORD,0)),"^",5) I COM'="" S EVT=EVT_", "_COM
"RTN","FHORX3",24,0)
 S EVT="TF: "_EVT S:ACT="C" EVT=EVT_" Cancelled" G EX
"RTN","FHORX3",25,0)
 Q
"RTN","FHORX3",26,0)
O ; Additional Order
"RTN","FHORX3",27,0)
 S Y=$P($G(^FHPT(FHDFN,"A",ADM,"OO",FHORD,0)),"^",3) Q:Y=""
"RTN","FHORX3",28,0)
 S EVT="Add. Order: "_Y S:ACT="C" EVT=EVT_" Cancelled" G EX
"RTN","FHORX3",29,0)
P ; Food Preferences
"RTN","FHORX3",30,0)
 S EVT="Pref: "_TXT_$S(CLK:" By: "_$P($G(^VA(200,+CLK,0)),"^",1),1:"") G EX
"RTN","FHORX3",31,0)
M ; Message
"RTN","FHORX3",32,0)
 S EVT="Msg: "_TXT G EX
"RTN","FHORX3",33,0)
S ; Standing Orders
"RTN","FHORX3",34,0)
 S Z=$G(^FHPT(FHDFN,"A",ADM,"SP",+FHORD,0)) Q:Z=""  S SP=$P(Z,"^",2),MEAL=$P(Z,"^",3),QTY=$P(Z,"^",8)
"RTN","FHORX3",35,0)
 S EVT="Std. Order: "_$S(QTY:QTY,1:1)_" "_$P($G(^FH(118.3,+SP,0)),"^",1)_" ("_MEAL_")" S:ACT="C" EVT=EVT_" Cancelled" G EX
"RTN","FHORX3",36,0)
 Q
"RTN","FHORX3",37,0)
F ; Suppl. feedings P30
"RTN","FHORX3",38,0)
 S Z=$G(^FHPT(FHDFN,"A",ADM,"SF",+FHORD,0)) Q:Z=""  S SP=$P(Z,"^",4)
"RTN","FHORX3",39,0)
 S EVT="Supp. Fdg. Menu: "_$P($G(^FH(118.1,+SP,0)),"^",1) S:ACT="C" EVT=EVT_" Cancelled" G EX
"RTN","FHORX3",40,0)
 Q
"RTN","FHORX3",41,0)
EX W ! D DTP W ?20,EVT Q
"RTN","FHORX3",42,0)
DTP ; Printable Date/Time
"RTN","FHORX3",43,0)
 Q:D1<1  W $J(+$E(D1,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(D1,4,5))_"-"_$E(D1,2,3)
"RTN","FHORX3",44,0)
 I D1["." S %=+$E(D1_"0",9,10) W $J($S(%>12:%-12,1:%),3)_":"_$E(D1_"000",11,12)_$S(%<12:"am",%<24:"pm",1:"m")
"RTN","FHORX3",45,0)
 K % Q
"RTN","FHORX3",46,0)
CALC ; Figure # of units for TF
"RTN","FHORX3",47,0)
 I $E($P(XX,"^",3),$L($P(XX,"^",3)))="G" D GRM Q
"RTN","FHORX3",48,0)
 S TU=$P(X3,"^",4)/$S(+$P(XX,"^",3):+$P(XX,"^",3),1:9999),TW=$P(X3,"^",5)
"RTN","FHORX3",49,0)
 I TW<6 S TU=TU+.75\1,P2=TU,P2=P2_" "_$S(P2>1:$P(XX,"^",2)_"S",1:$P(XX,"^",2)) Q
"RTN","FHORX3",50,0)
 S TU=TU+.2*4\1/4,P2=$S(TU<1:"",1:TU\1) I TU#1 S:P2 P2=P2_"-" S P3=TU#1,P2=P2_$S(P3<.3:"1/4",P3<.6:"1/2",1:"3/4")
"RTN","FHORX3",51,0)
 S P2=P2_" "_$S(P2>1:$P(XX,"^",2)_"S",1:$P(XX,"^",2))
"RTN","FHORX3",52,0)
 Q
"RTN","FHORX3",53,0)
GRM ; Calculate for Grams
"RTN","FHORX3",54,0)
 S X=$P(X3,"^",3) D FIX^FHORT10 S Z5="" F LL=1:1:$L(X) I $E(X,LL)'=" " S Z5=Z5_$E(X,LL)
"RTN","FHORX3",55,0)
 S Z5=$P(Z5,"/",2),Z5=$P(Z5,"X",2)
"RTN","FHORX3",56,0)
 I 'Z5 S Z5=$P("1,24,2,3,12,8,6,4",",",K) G G1
"RTN","FHORX3",57,0)
 I Z5'["F" S Z5=$S(K=1:1,K=2:Z5,K=3:2,K=4:3,K=5:Z5\2,K=6:Z5\3,K=7:Z5\4,1:Z5\6)
"RTN","FHORX3",58,0)
 E  S:K=1 Z5=1
"RTN","FHORX3",59,0)
G1 S TU=+$P(X3,"^",3)*Z5
"RTN","FHORX3",60,0)
 S TU=TU/$S(+$P(XX,"^",3):+$P(XX,"^",3),1:9999)
"RTN","FHORX3",61,0)
 S P2=$S(TU<1:"",1:TU\1) I P2="" S TU=TU+.95\1,P2=TU
"RTN","FHORX3",62,0)
 I TU#1 S:P2 P2=P2_"-" S TU=TU#1,P2=P2_$S(TU<.3:"1/4",TU<.6:"1/2",1:"3/4")
"RTN","FHORX3",63,0)
 S P2=P2_" "_$S(P2>1:$P(XX,"^",2)_"S",1:$P(XX,"^",2))
"RTN","FHORX3",64,0)
 Q
"RTN","FHORX3",65,0)
OUTPEV ; Display outpatient events
"RTN","FHORX3",66,0)
 S EVT=TXT D EX
"RTN","FHORX3",67,0)
 Q
"RTN","FHPATM")
0^237^B13051908
"RTN","FHPATM",1,0)
FHPATM ; HISC/REL/JH - Patient Movements ;4/2/98  14:53
"RTN","FHPATM",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPATM",3,0)
 S DAT=0 D HDR
"RTN","FHPATM",4,0)
P1 S %DT="AEXT",%DT("A")="START with DATE@TIME: " W ! D ^%DT G:Y<1 KIL S DAT=Y
"RTN","FHPATM",5,0)
 I DAT>NOW W "  [ Date cannot be in Future ]" G P1
"RTN","FHPATM",6,0)
 S X1=DT,X2=-5 D C^%DTC I DAT<X W "  [ DATE MORE THAN 5 DAYS IN PAST ]" G P1
"RTN","FHPATM",7,0)
 D DIVISION^VAUTOMA
"RTN","FHPATM",8,0)
P2 W ! K IOP S %ZIS="MQ",%ZIS("A")="Select LIST Printer: " D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPATM",9,0)
 I $D(IO("Q")) S FHPGM="F0^FHPATM",FHLST="DAT^DT^VAUTD*" D EN2^FH G KIL
"RTN","FHPATM",10,0)
 U IO D F0,NOTE D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPATM",11,0)
F0 D HDR W !!?5,"Name",?24,"ID#",?35,"Date/Time",?49,"FROM Ward-Bed",?65,"TO Ward-Bed"
"RTN","FHPATM",12,0)
 W !!?26,"--- A D M I S S I O N S ---",! S NOD="ATT1" D FND
"RTN","FHPATM",13,0)
 W !!?26,"--- D I S C H A R G E S ---",! S NOD="ATT3" D FND
"RTN","FHPATM",14,0)
 W !!?27,"--- T R A N S F E R S ---",! S NOD="ATT2" D FND W ! Q
"RTN","FHPATM",15,0)
HDR S H1="" I DAT S DTP=DAT D DTP^FH S H1=DTP_" to "
"RTN","FHPATM",16,0)
 W:$E(IOST,1,2)="C-" @IOF W !?23,"P A T I E N T   M O V E M E N T S"
"RTN","FHPATM",17,0)
 I $D(VAUTD) D
"RTN","FHPATM",18,0)
 . W !,"Division:  " I $D(VAUTD)=1 W "ALL" Q
"RTN","FHPATM",19,0)
 . N N F N=0:0 S N=$O(VAUTD(N)) Q:'N  W VAUTD(N)  W:$O(VAUTD(N))>0 ", "
"RTN","FHPATM",20,0)
 D NOW^%DTC S (DTP,NOW)=%,DT=NOW\1 D DTP^FH S H1=H1_DTP W !!?(80-$L(H1)\2),H1 Q
"RTN","FHPATM",21,0)
FND S NX=DAT-.0000005
"RTN","FHPATM",22,0)
F1 S NX=$O(^DGPM(NOD,NX)) Q:NX<1!(NX'<NOW)
"RTN","FHPATM",23,0)
 F DA=0:0 S DA=$O(^DGPM(NOD,NX,DA)) Q:DA=""  S X1=$G(^DGPM(DA,0)),NOWRD=0 D PRT
"RTN","FHPATM",24,0)
 G F1
"RTN","FHPATM",25,0)
PRT S DFN=+$P(X1,"^",3),ADM=$P(X1,"^",14),XT=$P(X1,"^",18) Q:ADM<1  D P0
"RTN","FHPATM",26,0)
 Q
"RTN","FHPATM",27,0)
P0 Q:'$D(^DPT(DFN,0))  S Y(0)=^(0) D PID^FHDPA I NOD="ATT1",XT=40 Q
"RTN","FHPATM",28,0)
 I NOD="ATT3",XT=41!(XT=42)!(XT=46)!(XT=47) Q
"RTN","FHPATM",29,0)
 S FH7R=0 D GET Q:NOD="ATT1"&TW=""  S:'FH7R FH7R=0 Q:'$G(VAUTD)&'$D(VAUTD(FH7R))
"RTN","FHPATM",30,0)
 W !,$E($P(Y(0),"^",1),1,21),?23,BID
"RTN","FHPATM",31,0)
 W ?32,$J(+$E(NX,6,7),2),"-",$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(NX,4,5))
"RTN","FHPATM",32,0)
 I NX#1 S I2=+$E(NX_"0",9,10) W $J($S(I2>12:I2-12,1:I2),3),":",$E(NX_"000",11,12),$S(I2>11:"pm",1:"am")
"RTN","FHPATM",33,0)
 W ?48,FW,?65,TW W:NOWRD="*" ?79,NOWRD Q
"RTN","FHPATM",34,0)
GET S (FW,FR)="" I NOD="ATT3" S (TW,TR)="" D LST G G1
"RTN","FHPATM",35,0)
 S TW=$P(X1,"^",6),TR=$P(X1,"^",7) I NOD="ATT1" Q:'TW  S NOWRD=$O(^FH(119.6,"AW",TW,0)) S:'NOWRD NOWRD="*" G G1
"RTN","FHPATM",36,0)
 S FW=TW,FR=TR
"RTN","FHPATM",37,0)
 I "^1^2^3^25^26^43^45^"[("^"_XT_"^") S TW=$S(XT=2!(XT=26):"AUTH LEAVE",XT=3!(XT=25):"UA LEAVE",XT=1:"ON PASS",XT=43!(XT=45):"ASIH OTHER",1:TW),TR=""
"RTN","FHPATM",38,0)
 I "^22^23^24^25^26^44^"[("^"_XT_"^") S FW=$S(XT=24!(XT=25):"AUTH LEAVE",XT=22!(XT=26):"UA LEAVE",XT=23:"PASS",XT=44:"ASIH OTHER",1:FW),FR=""
"RTN","FHPATM",39,0)
 I "^4^13^14^45^"[("^"_XT_"^") D LST
"RTN","FHPATM",40,0)
G1 S:FW FH7R=$P($G(^DIC(42,FW,0)),"^",11) I 'FH7R,TW S FH7R=$P($G(^DIC(42,TW,0)),"^",11)
"RTN","FHPATM",41,0)
 S:FW FW=$O(^FH(119.6,"AW",FW,0)) S:FW FW=$P($G(^FH(119.6,FW,0)),U) S SW=TW S:TW TW=$O(^FH(119.6,"AW",TW,0))
"RTN","FHPATM",42,0)
 I TW S TW=$P($G(^FH(119.6,TW,0)),U)
"RTN","FHPATM",43,0)
 E  S:SW TW=$P(^DIC(42,SW,0),U),NOWRD="*"
"RTN","FHPATM",44,0)
 S:FR FR=$P(^DG(405.4,FR,0),"^",1) S:TR TR=$P(^DG(405.4,TR,0),"^",1)
"RTN","FHPATM",45,0)
 S FW=FW_" "_FR,TW=TW_" "_TR Q  ;S FW=$E(FW,1,14-$L(FR))_" "_FR,TW=$E(TW,1,14-$L(TR))_" "_TR Q
"RTN","FHPATM",46,0)
LST S TRN=9999999.9999999-$E(NX,1,14)
"RTN","FHPATM",47,0)
 F TRN=TRN:0 S TRN=$O(^DGPM("APID",DFN,TRN)) Q:TRN=""  F T0=0:0 S T0=$O(^DGPM("APID",DFN,TRN,T0)) Q:T0=""  I T0'=DA S X=$G(^DGPM(T0,0)),FW=$P(X,"^",6),FR=$P(X,"^",7) G:FW L1
"RTN","FHPATM",48,0)
L1 S:"^43^45^"[("^"_$P(X,"^",18)_"^") FR="",FW="ASIH OTHER" Q
"RTN","FHPATM",49,0)
NOTE W !!,"* Denotes that there is no associated Ward in the Dietetic Ward File!" Q
"RTN","FHPATM",50,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRC")
0^238^B7181488
"RTN","FHPRC",1,0)
FHPRC ; HISC/REL - Menu Cycle Management ;5/10/95  08:29
"RTN","FHPRC",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC",3,0)
EN2 ; Enter/Edit Menu Cycles
"RTN","FHPRC",4,0)
 S (DIC,DIE)="^FH(116,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=116 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN2:Y<1
"RTN","FHPRC",5,0)
 S DA=+Y,DR=".01;2:99;1" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=116 D ^DIE K DA,DR,DIDEL,DIE,X,Y G EN2
"RTN","FHPRC",6,0)
EN3 ; Enter/Edit Meals
"RTN","FHPRC",7,0)
 S (DIC,DIE)="^FH(116.1,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=116.1 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN3:Y<1
"RTN","FHPRC",8,0)
 S (DA,M1)=+Y,DR=".01:99",DR(2,116.11)=".01;S L1=+X;2;1;S COD=X;3//^S X=$P($G(^FH(114,+L1,0)),U,7),X=$P($G(^FH(114.1,+X,0)),U,1);S REC=X;10"
"RTN","FHPRC",9,0)
 S DR(3,116.12)=".01;S CHK=+X;1//^S X=$S(REC=CHK:COD,1:"""")"
"RTN","FHPRC",10,0)
 S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=116.1 W ! D ^DIE K DIDEL G:'$D(DA)!($D(Y)) A2
"RTN","FHPRC",11,0)
A0 K DIC S DIC="^FH(116.1,",DIC(0)="AEQM",DIC("A")="Select ADD-ON Meal: " W ! D ^DIC K DIC,DIE G EN3:"^"[X!$D(DTOUT),A0:Y<1 S A1=+Y
"RTN","FHPRC",12,0)
 I '$D(^FH(116.1,M1,"RE",0)) S ^(0)="^116.11P^^"
"RTN","FHPRC",13,0)
 F K=0:0 S K=$O(^FH(116.1,A1,"RE",K)) Q:K<1  S L1=+^(K,0) D A1
"RTN","FHPRC",14,0)
A2 K CHK,COD,DA,DR,M1,X,Y,A1,K,L,L1,REC G EN3
"RTN","FHPRC",15,0)
A1 I $D(^FH(116.1,M1,"RE","B",L1)) W !,$P(^FH(114,L1,0),"^",1)," already part of meal" Q
"RTN","FHPRC",16,0)
 K DIC,DD,DO,DINUM S DIC="^FH(116.1,M1,""RE"",",DIC(0)="LM",DA(1)=M1,DLAYGO=116.1,X=L1 D FILE^DICN K DIC,DLAYGO
"RTN","FHPRC",17,0)
 S $P(^FH(116.1,M1,"RE",+Y,0),"^",2,3)=$P(^FH(116.1,A1,"RE",K,0),"^",2,3)
"RTN","FHPRC",18,0)
 G:'$D(^FH(116.1,A1,"RE",K,"D",0)) A3 S ^FH(116.1,M1,"RE",+Y,"D",0)=^FH(116.1,A1,"RE",K,"D",0)
"RTN","FHPRC",19,0)
 F L=0:0 S L=$O(^FH(116.1,A1,"RE",K,"D",L)) Q:L<1  S X=^(L,0),^FH(116.1,M1,"RE",+Y,"D",L,0)=X,^FH(116.1,M1,"RE",+Y,"D","B",+X,L)=""
"RTN","FHPRC",20,0)
A3 Q:'$D(^FH(116.1,A1,"RE",K,"R",0))  S ^FH(116.1,M1,"RE",+Y,"R",0)=^FH(116.1,A1,"RE",K,"R",0)
"RTN","FHPRC",21,0)
 F L=0:0 S L=$O(^FH(116.1,A1,"RE",K,"R",L)) Q:L<1  S X=^(L,0),^FH(116.1,M1,"RE",+Y,"R",L,0)=X,^FH(116.1,M1,"RE",+Y,"R","B",+X,L)=""
"RTN","FHPRC",22,0)
 Q
"RTN","FHPRC",23,0)
EN4 ; Enter/Edit Holiday Meals
"RTN","FHPRC",24,0)
 S (DIC,DIE)="^FH(116.3,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=116.3 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN4:Y<1
"RTN","FHPRC",25,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=116.3 D ^DIE K DA,DR,DIDEL,DIE,X,Y G EN4
"RTN","FHPRC",26,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRC1")
0^239^B9271367
"RTN","FHPRC1",1,0)
FHPRC1 ; HISC/REL/NCA - Menu Cycle Utilities ;3/28/95  08:16
"RTN","FHPRC1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC1",3,0)
EN1 ; Find current cycle & day
"RTN","FHPRC1",4,0)
 S %DT="X",X="T" D ^%DT S X1=+Y K %DT
"RTN","FHPRC1",5,0)
E1 ; Find based upon X1 date
"RTN","FHPRC1",6,0)
 S FHCY=-1 F K=0:0 S K=$O(^FH(116,"AB",K)) Q:K<1!(K>X1)  S FHCY=$O(^(K,0)),X2=K
"RTN","FHPRC1",7,0)
 Q:FHCY<1  S Y=^FH(116,FHCY,0),K1=$P(Y,"^",2) D ^%DTC K %T,%Y
"RTN","FHPRC1",8,0)
 S FHDA=X+1#K1 S:'FHDA FHDA=K1 Q
"RTN","FHPRC1",9,0)
EN2 ; Check validity of Production Code string in Menu
"RTN","FHPRC1",10,0)
 D TR^FH I $E(X,$L(X))=" " S X=$E(X,1,$L(X)-1)
"RTN","FHPRC1",11,0)
 S (X9,XX)="" I $E(X,1,3)="ALL" D V3 G KIL
"RTN","FHPRC1",12,0)
 F X4=1:1 Q:$P(X," ",X4,99)=""  S X6=0,X1=$P(X," ",X4) D V1 I 'X6 S:XX'="" XX=XX_" " S XX=XX_X1
"RTN","FHPRC1",13,0)
KIL D SRT S X=XX K:X="" X K X1,X2,X3,X4,X5,X6,X8,X9,XX Q
"RTN","FHPRC1",14,0)
V1 I X1="" S X6=1 Q
"RTN","FHPRC1",15,0)
 S X2=$P(X1,";",1) S:X2="" X2=";" I '$D(^FH(116.2,"C",X2)) W *7,!?5,X2," not a valid Production Diet code" S X6=1
"RTN","FHPRC1",16,0)
 I X9[X2 W *7,!?5,X2," code used more than once" S X6=1
"RTN","FHPRC1",17,0)
 S X9=X9_" "_X2,X8="*",X5=2,X2=$P(X1,";",X5) I X2'="" D V2 S X5=3,X2=$P(X1,";",X5) I X2'="" D V2 S X5=4
"RTN","FHPRC1",18,0)
 Q:$P(X1,";",X5,99)=""  W *7,!?5,"Extra specifications in ",X1 S X6=1 Q
"RTN","FHPRC1",19,0)
V2 S X3=$E(X2,1) I X3=""!("CT"'[X3) W *7,!?5,"Illegal Tray/Cafe specification in ",X1 S X6=1
"RTN","FHPRC1",20,0)
 I X8=X3 W *7,!?5,X3," Tray/Cafe used more than once" S X6=1
"RTN","FHPRC1",21,0)
 S X8=X3,X3=$E(X2,2,99)
"RTN","FHPRC1",22,0)
 I +X3'=X3!(X3>999)!(X3<0)!(X3?.E1"."2N.N) W *7,!?5,"Illegal percentage in ",X1 S X6=1
"RTN","FHPRC1",23,0)
 Q
"RTN","FHPRC1",24,0)
V3 I $E(X,4)="+" G ALL
"RTN","FHPRC1",25,0)
 I $E(X,5)="" S XX="" W !?5,"No + after ALL" Q
"RTN","FHPRC1",26,0)
 I $E(X,5)="+" G ALL
"RTN","FHPRC1",27,0)
 W !?5,"Invalid ALL statement" S XX="" Q
"RTN","FHPRC1",28,0)
ALL S (FHPD,XX)=""
"RTN","FHPRC1",29,0)
 F  S FHPD=$O(^FH(116.2,"C",FHPD)) Q:FHPD=""  F LP=0:0 S LP=$O(^FH(116.2,"C",FHPD,LP)) Q:LP<1  I '$D(^FH(116.2,LP,"I")) S:XX'="" XX=XX_" " S XX=XX_FHPD
"RTN","FHPRC1",30,0)
 K LP,FHPD
"RTN","FHPRC1",31,0)
 Q
"RTN","FHPRC1",32,0)
SRT ; Sort and store Production Diet Code in print order
"RTN","FHPRC1",33,0)
 K SR F LP=1:1 S CODE=$P(XX," ",LP) Q:CODE=""  S PD=$P(CODE,";",1) I PD'="" S Z=0,Z=$O(^FH(116.2,"C",PD,Z)) I Z D
"RTN","FHPRC1",34,0)
 .S Z1=$P($G(^FH(116.2,+Z,0)),"^",6),Z1=$S(Z1<1:99,Z1<10:"0"_Z1,1:Z1)
"RTN","FHPRC1",35,0)
 .S:'$D(SR(Z1_"~"_PD)) SR(Z1_"~"_PD)=CODE Q
"RTN","FHPRC1",36,0)
 S (PD,ZZ)="" F  S ZZ=$O(SR(ZZ)) Q:ZZ=""  S Z=$G(SR(ZZ)) I Z'="" Q:$L(PD_" "_Z)>200  S:PD'="" PD=PD_" " S PD=PD_Z
"RTN","FHPRC1",37,0)
 S XX=$S(PD'="":PD,1:"") K CODE,LP,PD,SR,Z,Z1,ZZ
"RTN","FHPRC1",38,0)
 Q
"RTN","FHPRC1",39,0)
EN3 ; Help Prompt for Production String
"RTN","FHPRC1",40,0)
 W !!,"List Production Diet Codes separated by a single space"
"RTN","FHPRC1",41,0)
 W !!,"Example:  LS;C25;T30 RG ME;T20.1 CR;C50"
"RTN","FHPRC1",42,0)
 W !,"          --            Production Diet Code"
"RTN","FHPRC1",43,0)
 W !,"             -          T = Tray or C = Cafeteria"
"RTN","FHPRC1",44,0)
 W !,"              --        % of T or C census receiving recipe (max. 1 dec. place)"
"RTN","FHPRC1",45,0)
 W !!,"Production Diets listed without a specification (e.g., RG)"
"RTN","FHPRC1",46,0)
 W !,"are assumed to be 100% of census.",!
"RTN","FHPRC1",47,0)
 W !,"ALL + will add all production diet codes.",! Q
"RTN","FHPRC10")
0^240^B19192455
"RTN","FHPRC10",1,0)
FHPRC10 ; HISC/NCA - Meal Analysis ;3/6/95  15:41
"RTN","FHPRC10",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC10",3,0)
 K ^TMP($J)
"RTN","FHPRC10",4,0)
GET W ! K DIC S DIC="^FHUM(",DIC(0)="AEQMZ",DIC("S")="I $P(^(0),U,5)",DIC("DR")=".01" D ^DIC K DLAYGO G KIL:U[X!$D(DTOUT),GET:Y<1 S MENU=+Y,MNAM="Menu: "_$P(Y,U,2) D RET^FHPRC14
"RTN","FHPRC10",5,0)
ED R !!,"Do you wish to EDIT this Menu? NO// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="N" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G ED
"RTN","FHPRC10",6,0)
 I YN?1"N".E W ! G R3
"RTN","FHPRC10",7,0)
E1 ; Enter/Edit Day
"RTN","FHPRC10",8,0)
 R !,"Select DAY #: ",DAY:DTIME G:'$T!(DAY["^") KIL
"RTN","FHPRC10",9,0)
 I DAY="" S X3=$O(^TMP($J,"RECIPES",0)) G KIL:X3="",R3
"RTN","FHPRC10",10,0)
 I DAY'?1N!(DAY<1)!(DAY>7) W *7,"  Enter a Day # from 1-7" G E1
"RTN","FHPRC10",11,0)
E2 ; Enter/Edit Meal #
"RTN","FHPRC10",12,0)
 R !,"Select MEAL #: ",MEAL:DTIME G:'$T!(MEAL["^") KIL
"RTN","FHPRC10",13,0)
 I MEAL="" S X3=$O(^TMP($J,"RECIPES",0)) G KIL:X3="",E1
"RTN","FHPRC10",14,0)
 I MEAL'?1N!(MEAL<1)!(MEAL>6) W *7,"  Enter a Meal # from 1-6" G E2
"RTN","FHPRC10",15,0)
R0 ; Edit Meal File
"RTN","FHPRC10",16,0)
 S S1=$G(^TMP($J,"RECIPES",DAY,MEAL,0))
"RTN","FHPRC10",17,0)
 K DIC S DIC="^FH(116.1,",DIC(0)="EQM"
"RTN","FHPRC10",18,0)
 W !,"Select Meal: ",$S($P($G(^FH(116.1,+S1,0)),"^",1)'="":$P(^FH(116.1,+S1,0),"^",1)_" // ",1:"") R X:DTIME G:'$T!(X["^") KIL
"RTN","FHPRC10",19,0)
 I X="@" K ^TMP($J,"RECIPES",DAY,MEAL) W "   Meal Deleted" G E2
"RTN","FHPRC10",20,0)
 I X="" S:S1'="" X=$P($G(^FH(116.1,+S1,0)),"^",1) I S1="" S X3=$O(^TMP($J,"RECIPES",0)) G KIL:X3="",E2
"RTN","FHPRC10",21,0)
 D ^DIC G:Y<1 R0 S M1=+Y K DIC
"RTN","FHPRC10",22,0)
S1 ; Edit Production Diet
"RTN","FHPRC10",23,0)
 K DIC S DIC="^FH(116.2,",DIC(0)="AEQMZ" S:$P(S1,"^",2) DIC("B")=$P($G(^FH(116.2,+$P(S1,"^",2),0)),"^",1) D ^DIC G KIL:U[X!$D(DTOUT),S1:Y<1 S PD=+Y,CODE=$P(Y(0),"^",2) K DIC
"RTN","FHPRC10",24,0)
 S ZZ=M1_"^"_PD I S1=ZZ G:$D(^TMP($J,"RECIPES",DAY,MEAL)) R1
"RTN","FHPRC10",25,0)
 S $P(S1,"^",2)=PD
"RTN","FHPRC10",26,0)
 D SRCH^FHPRC14
"RTN","FHPRC10",27,0)
R1 ; Edit Recipe and Portion
"RTN","FHPRC10",28,0)
 K DIC S DIC="^FH(114,",DIC(0)="EQM"
"RTN","FHPRC10",29,0)
 R !!,"Select Recipe: ",X:DTIME G KIL:'$T!(X["^"),E2:X=""
"RTN","FHPRC10",30,0)
 I X="?" D LIS^FHPRC14 G R1
"RTN","FHPRC10",31,0)
 D ^DIC G:Y<1 R1 K DIC S REC=+Y S:'$D(^TMP($J,"RECIPES",DAY,MEAL,REC)) ^TMP($J,"RECIPES",DAY,MEAL,REC)=1_"^"_$P($G(^FH(114,REC,0)),"^",14)
"RTN","FHPRC10",32,0)
R2 W !,"Serving Portion: ",+$G(^TMP($J,"RECIPES",DAY,MEAL,REC))_"// " R X:DTIME G:'$T!(X["^") KIL G:X="" R1
"RTN","FHPRC10",33,0)
 I X'?.N.1".".N!(X<0)!(X>9999) W *7,!,"Enter amount of serving portion.  Enter 0 to omit recipe;",!,"otherwise enter a number greater than 0 but less than 9999." G R2
"RTN","FHPRC10",34,0)
 S $P(^TMP($J,"RECIPES",DAY,MEAL,REC),"^",1)=X
"RTN","FHPRC10",35,0)
 G R1
"RTN","FHPRC10",36,0)
R3 ; Select RDA Category
"RTN","FHPRC10",37,0)
 K DIC S DIC="^FH(112.2,",DIC(0)="AEQM",DIC("A")="Select DRI Category: " W ! D ^DIC G:X[U!$D(DTOUT) KIL S RDA=$S(Y<1:0,1:+Y) K DIC
"RTN","FHPRC10",38,0)
 S (AGE,NAM,SEX)=""
"RTN","FHPRC10",39,0)
F1 S ALL=1 D ^FHDPA G PAT:X="*",S3:X="",KIL:'DFN S NAM=$P(Y(0),U,1),SEX=$P(Y(0),U,2),AGE=$P(Y(0),U,3) G:SEX=""!(AGE="") P1
"RTN","FHPRC10",40,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"  [ Patient has expired. ]" G KIL
"RTN","FHPRC10",41,0)
 S AGE=$E(DT,1,3)-$E(AGE,1,3)-($E(DT,4,7)<$E(AGE,4,7))
"RTN","FHPRC10",42,0)
S3 R !!,"Do you wish a detailed analysis? Y// ",SUM:DTIME G:'$T!(SUM["^") KIL S:SUM="" SUM="Y" S X=SUM D TR^FH S SUM=X I $P("YES",SUM,1)'="",$P("NO",SUM,1)'="" W *7,!,"  Answer YES or NO" G S3
"RTN","FHPRC10",43,0)
 S SUM=$E(SUM,1),SUM=SUM="N" K M
"RTN","FHPRC10",44,0)
 W !!,"The Analysis requires a 132 column printer.",!
"RTN","FHPRC10",45,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRC10",46,0)
 I $D(IO("Q")) D  G KIL
"RTN","FHPRC10",47,0)
 .K IO("Q"),ZTUCI,ZTDTH,ZTIO,ZTSAVE
"RTN","FHPRC10",48,0)
 .S ZTRTN="^FHPRC11",ZTREQ="@",ZSAVE("ZTREQ")="",ZTDESC=$P($G(XQY0),U,1)
"RTN","FHPRC10",49,0)
 .F G="AGE","DAY","MEAL","MNAM","NAM","^TMP($J,","RDA","SEX","SUM" S ZTSAVE(G)=""
"RTN","FHPRC10",50,0)
 .D ^%ZTLOAD D ^%ZISC U IO W !,"Request Queued",! K ZTSK Q
"RTN","FHPRC10",51,0)
 U IO X ^%ZOSF("BRK") D ^FHPRC11 X ^%ZOSF("NBRK") D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRC10",52,0)
PAT R !!,"Enter Patient's Name: ",NAM:DTIME G:'$T!("^"[NAM) KIL
"RTN","FHPRC10",53,0)
 I NAM["?"!(NAM'?.ANP)!(NAM["^") W *7,!?5,"Enter Patient's Name to be printed on the report." G PAT
"RTN","FHPRC10",54,0)
P1 R !,"Sex: ",SEX:DTIME G:'$T!("^"[SEX) KIL S X=SEX D TR^FH S SEX=X I $P("MALE",SEX,1)'="",$P("FEMALE",SEX,1)'="" W *7,"  Enter M or F" G P1
"RTN","FHPRC10",55,0)
 S SEX=$E(SEX,1)
"RTN","FHPRC10",56,0)
P2 R !,"Age: ",AGE:DTIME G:'$T!("^"[AGE) KIL I AGE'?1N.N!(AGE<6)!(AGE>124) W !?5,"Enter Age in years between 6 and 124" G P2
"RTN","FHPRC10",57,0)
 G S3
"RTN","FHPRC10",58,0)
KIL ; Kill all Used Variables
"RTN","FHPRC10",59,0)
 K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRC11")
0^241^B19510636
"RTN","FHPRC11",1,0)
FHPRC11 ; HISC/NCA - Meal Analysis (cont.) ;2/15/95  16:10 
"RTN","FHPRC11",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC11",3,0)
 D Q1^FHPRC14
"RTN","FHPRC11",4,0)
PRT ; Print Meal Analysis
"RTN","FHPRC11",5,0)
 D NOW^%DTC S DT=%,DTP=DT D DTP^FH S (DAY,PG)=0 G:SUM ^FHPRC12
"RTN","FHPRC11",6,0)
P1 S DAY=$O(^TMP($J,"R",DAY)) G:DAY="" ^FHPRC12 S MEAL=0,NEW=1
"RTN","FHPRC11",7,0)
P2 S MEAL=$O(^TMP($J,"R",DAY,MEAL)) G:MEAL="" P3
"RTN","FHPRC11",8,0)
 I 'NEW W !!,"Meal ",MEAL,! S X=$G(^TMP($J,"RECIPES",DAY,MEAL,0)) S Y=$E($P($G(^FH(116.1,+$P(X,"^",1),0)),"^",1),1,22) W Y,!,"Prod Diet: " S Y=$E($P($G(^FH(116.2,+$P(X,"^",2),0)),"^",1),1,14) W Y,!
"RTN","FHPRC11",9,0)
 D:NEW HEAD,HD1
"RTN","FHPRC11",10,0)
 S RNAM="" F  S RNAM=$O(^TMP($J,"R",DAY,MEAL,RNAM)) Q:RNAM=""  S X0=$G(^(RNAM,0)),X1=$G(^(1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)),SVG=+X0 D:$Y>(IOSL-8) HEAD,HD1 W !,$J(SVG,4)," ",RNAM,?24,$J($P(X0,"^",2),5,0) D LIS^FHNU2
"RTN","FHPRC11",11,0)
 D:$Y>(IOSL-10) HEAD,HD1 W !!?7,"Recipe Total",?29 S X1=$G(^TMP($J,"M",DAY,MEAL,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D LIS^FHNU2
"RTN","FHPRC11",12,0)
 W !?7,"% of Kcal",?36 S Z1=$P(X1,"^",4) S:'Z1 Z1=1 F KK=1,3,2 W $J($P(X1,"^",KK)*$S(KK=2:900,1:400)/Z1,7,0)
"RTN","FHPRC11",13,0)
 G P2
"RTN","FHPRC11",14,0)
P3 D:$Y>(IOSL-12) HEAD,HD1 W !!,"Daily Total",?29 S X1=$G(^TMP($J,"D",DAY,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D LIS^FHNU2
"RTN","FHPRC11",15,0)
 I RDA W !,"% DRI",?29 D RDA^FHNU9
"RTN","FHPRC11",16,0)
 W !,"% of Kcal",?36 S Z1=$P(X1,"^",4) S:'Z1 Z1=1 F KK=1,3,2 W $J($P(X1,"^",KK)*$S(KK=2:900,1:400)/Z1,7,0)
"RTN","FHPRC11",17,0)
 W:$P(X1,"^",1) !!,"Kcal:N Ratio = ",$J(6.25*$P(X1,"^",4)/$P(X1,"^",1),0,0),":1"
"RTN","FHPRC11",18,0)
P4 S MEAL=0,NEW=1
"RTN","FHPRC11",19,0)
P5 S MEAL=$O(^TMP($J,"R",DAY,MEAL)) G:MEAL="" P6
"RTN","FHPRC11",20,0)
 I 'NEW W !!,"Meal ",MEAL,! S X=$G(^TMP($J,"RECIPES",DAY,MEAL,0)) S Y=$E($P($G(^FH(116.1,+$P(X,"^",1),0)),"^",1),1,14) W Y,!,"PD: " S Y=$E($P($G(^FH(116.2,+$P(X,"^",2),0)),"^",1),1,11) W Y,!
"RTN","FHPRC11",21,0)
 D:NEW HEAD,HD2
"RTN","FHPRC11",22,0)
 S RNAM="" F  S RNAM=$O(^TMP($J,"R",DAY,MEAL,RNAM)) Q:RNAM=""  S X0=$G(^(RNAM,0)),X1=$G(^(1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)),SVG=+X0 D:$Y>(IOSL-8) HEAD,HD2 W !,$E(RNAM,1,10),?12 D LIS^FHNU2
"RTN","FHPRC11",23,0)
 D:$Y>(IOSL-9) HEAD,HD2 W !!?3,"Total",?12 S X1=$G(^TMP($J,"M",DAY,MEAL,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D LIS^FHNU2 G P5
"RTN","FHPRC11",24,0)
P6 D:$Y>(IOSL-10) HEAD,HD2 W !!,"Daily Total",?12 S X1=$G(^TMP($J,"D",DAY,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)) D LIS^FHNU2
"RTN","FHPRC11",25,0)
 I RDA W !,"% DRI",?12 D RDA^FHNU9
"RTN","FHPRC11",26,0)
 G P1
"RTN","FHPRC11",27,0)
HEAD ; Print Header
"RTN","FHPRC11",28,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 D:PG=1 SITE^FH G:NAM'="" HEAD1
"RTN","FHPRC11",29,0)
 W !,"Station #: ",SITE(1),?42,"A N A L Y S I S   O F   M E A L   P O R T I O N",?124,"Page ",PG
"RTN","FHPRC11",30,0)
 W !,"Station Name: ",SITE,?57,DTP W:RDA ?110,"DRI: ",$P(^FH(112.2,RDA,0),U,1)
"RTN","FHPRC11",31,0)
 W !?(132-$L(MNAM)\2),MNAM S NEW=0 Q
"RTN","FHPRC11",32,0)
HEAD1 W !?42,"A N A L Y S I S   O F   M E A L   P O R T I O N",?124,"Page ",PG,!?57,DTP
"RTN","FHPRC11",33,0)
 W !?(132-$L(MNAM)\2),MNAM S NEW=0
"RTN","FHPRC11",34,0)
 W !!,"Patient: ",NAM,?63,$S(SEX="M":"Male",1:"Female"),?124,"Age: ",AGE,! Q
"RTN","FHPRC11",35,0)
HD1 W !!,"Day ",DAY,!! W:MEAL'="" "Meal ",MEAL S:MEAL'="" X=$G(^TMP($J,"RECIPES",DAY,MEAL,0)) S Y=$S(MEAL'="":$E($P($G(^FH(116.1,+$P(X,"^",1),0)),"^",1),1,22),1:"") W !
"RTN","FHPRC11",36,0)
 W Y,?24,"Quant  Energ    Pro    CHO    Fat    Sod    Pot   Calc   Phos   Iron   Zinc    Mag    Man   Cop   Sel  DFib" S Y=$S(MEAL'="":$E($P($G(^FH(116.2,+$P(X,"^",2),0)),"^",1),1,14),1:"")
"RTN","FHPRC11",37,0)
 W ! W:MEAL'="" "Prod Diet: ",Y W ?27,"Gm   KCal     Gm     Gm     Gm     Mg     Mg     Mg     Mg     Mg     Mg     Mg     Mg    Mg   Mcg    Gm",!
"RTN","FHPRC11",38,0)
 ;NUT String contains 7 characters per nut: 1=node in ^FHNU,2-3=pos. in ^FHNU, 4=field size, 5=# decimals, 6-7=pos. of DRI in ^FH(112.2
"RTN","FHPRC11",39,0)
 S NUT="104700010171011037100102710011370191127020108701111170121097114114711511071131167218115621746661222376100" Q
"RTN","FHPRC11",40,0)
HD2 W !!,"Day ",DAY,!! W:MEAL'="" "Meal ",MEAL S:MEAL'="" X=$G(^TMP($J,"RECIPES",DAY,MEAL,0)) S Y=$S(MEAL'="":$E($P($G(^FH(116.1,+$P(X,"^",1),0)),"^",1),1,14),1:"") W !
"RTN","FHPRC11",41,0)
 W Y,?18,"K      A      C      E    Rib    Thi    Nia     B6    B12    Fol   Pant   Chol   18C2   18C3   Mono   PuFA   SaFa" S Y=$S(MEAL'="":$E($P($G(^FH(116.2,+$P(X,"^",2),0)),"^",1),1,11),1:"")
"RTN","FHPRC11",42,0)
 W ! W:MEAL'="" "PD: ",Y W ?16,"Mcg     RE     Mg     Mg     Mg     Mg     Mg     Mg    Mcg    Mcg     Mg     Mg     Gm     Gm     Gm     Gm     Gm",!
"RTN","FHPRC11",43,0)
 S NUT="46571262337002119710411771032217206120720522272072247208226721022572092237216229700022771002287100231710023271002307100" Q
"RTN","FHPRC12")
0^242^B10951820
"RTN","FHPRC12",1,0)
FHPRC12 ; HISC/NCA - Meal Analysis Summary ;2/15/95  16:11 
"RTN","FHPRC12",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC12",3,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 I PG=1 D SITE^FH
"RTN","FHPRC12",4,0)
 I NAM'="" W !?45,"M E A L   A N A L Y S I S   S U M M A R Y",?124,"Page ",PG,!?57,DTP,!?(132-$L(MNAM)\2),MNAM,!!,"Patient: ",NAM,?63,$S(SEX="M":"Male",1:"Female"),?124,"Age: ",AGE
"RTN","FHPRC12",5,0)
 I NAM="" W !,"Station #: ",SITE(1),?45,"M E A L   A N A L Y S I S   S U M M A R Y",?124,"Page ",PG
"RTN","FHPRC12",6,0)
 I NAM="" W !,"Station Name: ",SITE,?57,DTP W:RDA ?110,"DRI: ",$P(^FH(112.2,RDA,0),U,1)
"RTN","FHPRC12",7,0)
 I NAM="" W !?(132-$L(MNAM)\2),MNAM
"RTN","FHPRC12",8,0)
 S (T(1),T(2),T(3),T(4),T(5))="",NDAY=0
"RTN","FHPRC12",9,0)
 W !!,"Daily Totals",?20,"Energ    Pro    CHO    Fat    Sod    Pot   Calc   Phos   Iron   Zinc    Mag    Man    Cop    Sel   DFib      K"
"RTN","FHPRC12",10,0)
 W !?21,"KCal     Gm     Gm     Gm     Mg     Mg     Mg     Mg     Mg     Mg     Mg     Mg     Mg    Mcg     Gm    Mcg",!
"RTN","FHPRC12",11,0)
 S NUT="1047000101710110370001027000113701911270201087011111701210971141147115110711311672181157217466712223771004657126",DAY=0
"RTN","FHPRC12",12,0)
T1 S DAY=$O(^TMP($J,"D",DAY)) G:DAY="" T2 S X1=$G(^(DAY,1)),X2=$G(^(2)),X3=$G(^(3)),X4=$G(^(4)),X5=$G(^(5)),NDAY=NDAY+1
"RTN","FHPRC12",13,0)
 F K=1:1:20 S Z1=$P(X1,"^",K) I Z1 S $P(T(1),"^",K)=$P(T(1),"^",K)+Z1
"RTN","FHPRC12",14,0)
 F K=1:1:18 S Z1=$P(X2,"^",K) I Z1 S $P(T(2),"^",K)=$P(T(2),"^",K)+Z1
"RTN","FHPRC12",15,0)
 F K=9,10 S Z1=$P(X4,"^",K) I Z1 S $P(T(4),"^",K)=$P(T(4),"^",K)+Z1
"RTN","FHPRC12",16,0)
 F K=1:1:66 S:$P(X5,"^",K) $P(T(5),"^",K)=1
"RTN","FHPRC12",17,0)
 W !?3,"Day ",DAY,?19 D LIS G T1
"RTN","FHPRC12",18,0)
T2 D AVG W !!,"Daily Average",?19 S X1=T(1),X2=T(2),X4=T(4),X5=T(5) D LIS
"RTN","FHPRC12",19,0)
 I RDA W !,"Average % DRI",?18 D RDA^FHNU9
"RTN","FHPRC12",20,0)
 W !,"% of Kcal",?25 S Z1=$P(X1,"^",4) S:'Z1 Z1=1 F KK=1,3,2 W $J($P(X1,"^",KK)*$S(KK=2:900,1:400)/Z1,7,0)
"RTN","FHPRC12",21,0)
 W !!!!,"Daily Totals",?24,"A      C      E    Rib    Thi    Nia     B6    B12    Fol   Pant   Chol   18C2   18C3   Mono   PuFa   SaFa"
"RTN","FHPRC12",22,0)
 W !?23,"RE     Mg     Mg     Mg     Mg     Mg     Mg    Mcg    Mcg     Mg     Mg     Gm     Gm     Gm     Gm     Gm",!
"RTN","FHPRC12",23,0)
 S NUT="2338002119710411771032217206120720522272072247208226721022572092237216229700022771002287100231710023271002307100",DAY=0
"RTN","FHPRC12",24,0)
T3 S DAY=$O(^TMP($J,"D",DAY)) G:DAY="" T4 S X1=$G(^(DAY,1)),X2=$G(^(2)),X4=$G(^(4)),X5=$G(^(5))
"RTN","FHPRC12",25,0)
 W !?3,"Day ",DAY,?18 D LIS G T3
"RTN","FHPRC12",26,0)
T4 W !!,"Daily Average",?18 S X1=T(1),X2=T(2),X4=T(4),X5=T(5) D LIS
"RTN","FHPRC12",27,0)
 I RDA W !,"Average % DRI",?17 D RDA^FHNU9
"RTN","FHPRC12",28,0)
 W:$P(X1,"^",1) !!,"Kcal:N Ratio = ",$J(6.25*$P(X1,"^",4)/$P(X1,"^",1),0,0),":1"
"RTN","FHPRC12",29,0)
 W !!,"'+' following a daily value indicates that incomplete data exists.",! G KIL^FHPRC10
"RTN","FHPRC12",30,0)
LIS ; List nutrient values
"RTN","FHPRC12",31,0)
 S KK=1
"RTN","FHPRC12",32,0)
L1 S NODE=$E(NUT,KK) Q:'NODE  S ITM=+$E(NUT,KK+1,KK+2) Q:'ITM  S SIZ=$E(NUT,KK+3),DEC=$E(NUT,KK+4),KK=KK+7
"RTN","FHPRC12",33,0)
 S Z1=$S(NODE=1:$P(X1,"^",ITM),NODE=2:$P(X2,"^",ITM-20),NODE=3:$P(X3,"^",ITM-38),1:$P(X4,"^",ITM-56))
"RTN","FHPRC12",34,0)
 S Z1=$S(Z1'="":$J(Z1,SIZ-1,DEC),1:$J(Z1,SIZ-1))_$S($P(X5,"^",ITM):"+",1:" ") W Z1 G L1
"RTN","FHPRC12",35,0)
AVG ; Get averages
"RTN","FHPRC12",36,0)
 S:'NDAY NDAY=1 F K=1:1:20 S $P(T(1),"^",K)=$J($P(T(1),"^",K)/NDAY,0,3)
"RTN","FHPRC12",37,0)
 F K=1:1:18 S $P(T(2),"^",K)=$J($P(T(2),"^",K)/NDAY,0,3)
"RTN","FHPRC12",38,0)
 F K=9,10 S $P(T(4),"^",K)=$J($P(T(4),"^",K)/NDAY,0,3)
"RTN","FHPRC12",39,0)
 Q
"RTN","FHPRC13")
0^243^B21014482
"RTN","FHPRC13",1,0)
FHPRC13 ; HISC/NCA - Enter/Edit Recipe Menu ;3/13/95  11:16
"RTN","FHPRC13",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC13",3,0)
 K ^TMP($J)
"RTN","FHPRC13",4,0)
GET W ! K DIC S DIC="^FHUM(",DIC(0)="AEQLMZ",DIC("S")="I $P(^(0),U,5)",DIC("DR")=".01",DLAYGO=112.6 D ^DIC K DLAYGO G KIL:U[X!$D(DTOUT),GET:Y<1 S MENU=+Y,NEW=$P(Y,U,3)
"RTN","FHPRC13",5,0)
 I 'NEW S DIE=DIC K DIC S DA=MENU,DR=".01",DIDEL=112.6 D ^DIE K DIDEL G:'$D(^FHUM(MENU))!($D(Y)) KIL D PD^FHPRC14 G SEL
"RTN","FHPRC13",6,0)
 S %DT="X",X="T" D ^%DT S $P(^FHUM(MENU,0),U,2,5)="C"_"^"_Y_"^"_DUZ_"^"_1
"RTN","FHPRC13",7,0)
SEL S (DAY,MEAL)=0 K DIC I '$D(^FHUM(MENU,1,0)) S ^FHUM(MENU,1,0)="^112.61^^"
"RTN","FHPRC13",8,0)
S1 S DIC="^FHUM(MENU,1,",DIC(0)="EQLM",DIC("DR")="",DA(1)=MENU,DLAYGO=112.6
"RTN","FHPRC13",9,0)
 R !,"Select Day #: ",X:DTIME G:'$T!(X["^") KIL
"RTN","FHPRC13",10,0)
 I X="" W ! G STOR:$O(M(0))>0,E8
"RTN","FHPRC13",11,0)
 D ^DIC K DIC,DLAYGO G:Y<1 S1 S (DAY,DA)=+Y
"RTN","FHPRC13",12,0)
 K DR I '$D(^FHUM(MENU,1,DAY,1,0)) S ^FHUM(MENU,1,DAY,1,0)="^112.62^^"
"RTN","FHPRC13",13,0)
S2 S DIC="^FHUM(MENU,1,DAY,1,",DIC(0)="EQLM",DLAYGO=112.6
"RTN","FHPRC13",14,0)
 R !,"Select Meal #: ",X:DTIME G:'$T!(X["^") KIL
"RTN","FHPRC13",15,0)
 I X="" W ! G S1:$G(M(DAY))'="",E7
"RTN","FHPRC13",16,0)
 D ^DIC K DLAYGO G:Y<1 S2 S MEAL=+Y K DIC
"RTN","FHPRC13",17,0)
 S OLD=$S($G(M(DAY))'="":$P(M(DAY),"^",MEAL),1:""),M1=$P(OLD,";",1),P=$P(OLD,";",2),PD=+P,CODE=$P(P,"~",2),OLD=M1_"^"_CODE I 'NEW D OLD^FHPRC14
"RTN","FHPRC13",18,0)
S3 K DIC S DIC="^FH(116.1,",DIC(0)="EQM"
"RTN","FHPRC13",19,0)
 W !,"Select Meal: " W:M1'="" $S($G(^FH(116.1,M1,0))'="":$P(^FH(116.1,M1,0),"^",1)_" // ",1:"") R X:DTIME G:'$T!(X["^") KIL
"RTN","FHPRC13",20,0)
 I X="@" G DEL
"RTN","FHPRC13",21,0)
 I X="" S:M1'="" X=$P($G(^FH(116.1,M1,0)),"^",1) W ! G:M1="" E6
"RTN","FHPRC13",22,0)
 D ^DIC G:Y<1 S3 S M1=+Y K DIC
"RTN","FHPRC13",23,0)
S4 K DIC S DIC="^FH(116.2,",DIC(0)="EQMZ"
"RTN","FHPRC13",24,0)
 W !,"Select Production Diet: " W:PD $S($G(^FH(116.2,+PD,0))'="":$P(^FH(116.2,+PD,0),"^",1)_" // ",1:"") R X:DTIME G:'$T!(X["^") KIL
"RTN","FHPRC13",25,0)
 I X="@" I PD S PD=0 G S4
"RTN","FHPRC13",26,0)
 I X="@" I 'PD W *7,?27,"No Production Diet to Delete!" G S4
"RTN","FHPRC13",27,0)
 I X="" S:PD X=$P($G(^FH(116.2,+PD,0)),"^",1)
"RTN","FHPRC13",28,0)
 D ^DIC G:Y<1 S4 K DIC
"RTN","FHPRC13",29,0)
 S PD=+Y,CODE=$P(Y(0),"^",2),ZZ=M1_"^"_CODE
"RTN","FHPRC13",30,0)
 I $P(OLD,"^",1,2)=ZZ G:$D(^TMP($J,"RECIPES",DAY,MEAL)) R1
"RTN","FHPRC13",31,0)
 S S1=M1_";"_PD_"~"_CODE,$P(M(DAY),"^",MEAL)=S1
"RTN","FHPRC13",32,0)
 D SRCH^FHPRC14
"RTN","FHPRC13",33,0)
R1 ; Edit Recipe and Portion
"RTN","FHPRC13",34,0)
 K DIC S DIC="^FH(114,",DIC(0)="EQM"
"RTN","FHPRC13",35,0)
 R !!,"Select Recipe: ",X:DTIME G KIL:'$T!(X["^"),S2:X=""
"RTN","FHPRC13",36,0)
 I X="?" D LIS^FHPRC14 G R1
"RTN","FHPRC13",37,0)
 D ^DIC G:Y<1 R1 K DIC S REC=+Y S:'$D(^TMP($J,"RECIPES",DAY,MEAL,REC)) ^TMP($J,"RECIPES",DAY,MEAL,REC)=1_"^"_$P($G(^FH(114,REC,0)),"^",14)
"RTN","FHPRC13",38,0)
R2 W !,"Serving Portion: ",+$G(^TMP($J,"RECIPES",DAY,MEAL,REC))_"// " R X:DTIME G:'$T!(X["^") KIL G:X="" R1
"RTN","FHPRC13",39,0)
 I X'?.N.1".".N!(X<0)!(X>9999) W *7,!,"Enter amount of serving portion.  Enter 0 to omit recipe;",!,"otherwise enter a number greater than 0 but less than 9999." G R2
"RTN","FHPRC13",40,0)
 S $P(^TMP($J,"RECIPES",DAY,MEAL,REC),"^",1)=X
"RTN","FHPRC13",41,0)
 G R1
"RTN","FHPRC13",42,0)
STOR D L1^FHPRC14 R !!,"Okay to Save the Menu? YES// ",YN:DTIME G:'$T!(YN["^") KIL S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G STOR
"RTN","FHPRC13",43,0)
 I YN?1"Y".E W ! G E5
"RTN","FHPRC13",44,0)
 G SEL
"RTN","FHPRC13",45,0)
E5 W !,"...Storing Recipes and Food Nutrient"
"RTN","FHPRC13",46,0)
 F DAY=0:0 S DAY=$O(^TMP($J,"RECIPES",DAY)) Q:DAY<1  F MEAL=0:0 S MEAL=$O(^TMP($J,"RECIPES",DAY,MEAL)) Q:MEAL<1  D A1
"RTN","FHPRC13",47,0)
 W !,"...Done"
"RTN","FHPRC13",48,0)
 G KIL
"RTN","FHPRC13",49,0)
DEL ; Delete Meal
"RTN","FHPRC13",50,0)
 I '$D(^TMP($J,"RECIPES",DAY,MEAL)) W *7,?17,"No Meal to Delete!" G S2
"RTN","FHPRC13",51,0)
 K ^TMP($J,"RECIPES",DAY,MEAL)
"RTN","FHPRC13",52,0)
 G E6
"RTN","FHPRC13",53,0)
A1 S ZZ=$G(^TMP($J,"RECIPES",DAY,MEAL,0)),$P(^FHUM(MENU,1,DAY,1,MEAL,0),"^",2,3)=ZZ
"RTN","FHPRC13",54,0)
 I 'NEW,$D(^FHUM(MENU,1,DAY,1,MEAL,2,0)) K ^FHUM(MENU,1,DAY,1,MEAL,2),^FHUM(MENU,1,DAY,1,MEAL,1)
"RTN","FHPRC13",55,0)
 I '$D(^FHUM(MENU,1,DAY,1,MEAL,1,0)) S ^(0)="^112.63P^^"
"RTN","FHPRC13",56,0)
 I '$D(^FHUM(MENU,1,DAY,1,MEAL,2,0)) S ^(0)="^112.64P^^"
"RTN","FHPRC13",57,0)
 S K=0
"RTN","FHPRC13",58,0)
A2 S K=$O(^TMP($J,"RECIPES",DAY,MEAL,K)) Q:K<1  S L1=K,Y=$G(^(K)),QTY=+Y,NP=$P(Y,"^",2) G:'NP A2
"RTN","FHPRC13",59,0)
 S $P(^FHUM(MENU,1,DAY,1,MEAL,2,0),U,3,4)=L1_"^"_($P(^FHUM(MENU,1,DAY,1,MEAL,2,0),U,4)+1)
"RTN","FHPRC13",60,0)
 S ^FHUM(MENU,1,DAY,1,MEAL,2,L1,0)=L1_"^"_QTY
"RTN","FHPRC13",61,0)
 S $P(^FHUM(MENU,1,DAY,1,MEAL,1,0),U,3,4)=+NP_"^"_($P(^FHUM(MENU,1,DAY,1,MEAL,1,0),"^",4)+1)
"RTN","FHPRC13",62,0)
 S ^FHUM(MENU,1,DAY,1,MEAL,1,+NP,0)=+NP_"^"_QTY
"RTN","FHPRC13",63,0)
 G A2
"RTN","FHPRC13",64,0)
E6 I $D(^FHUM(MENU,1,DAY,1,MEAL)) K ^FHUM(MENU,1,DAY,1,MEAL) S $P(^FHUM(MENU,1,DAY,1,0),U,4)=$P(^FHUM(MENU,1,DAY,1,0),U,4)-1 S:$D(M(DAY)) $P(M(DAY),"^",MEAL)="" W !,"No Meal-Meal Deleted"
"RTN","FHPRC13",65,0)
E7 I $O(^FHUM(MENU,1,DAY,1,0))>0 G S2
"RTN","FHPRC13",66,0)
 K ^FHUM(MENU,1,DAY) W !,"No Meals Remains-Day Deleted"
"RTN","FHPRC13",67,0)
 S $P(^FHUM(MENU,1,0),U,4)=$P(^FHUM(MENU,1,0),U,4)-1 I $D(M(DAY)) K M(DAY)
"RTN","FHPRC13",68,0)
 I $O(^FHUM(MENU,1,0))>0 W ! G SEL
"RTN","FHPRC13",69,0)
E8 K DA,DIC,DIE,DIK S DIK="^FHUM(",DA=MENU D ^DIK W !,"...Menu Deleted"
"RTN","FHPRC13",70,0)
 W !
"RTN","FHPRC13",71,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRC14")
0^244^B16326822
"RTN","FHPRC14",1,0)
FHPRC14 ; HISC/NCA - Meal Analysis (cont.) ;4/11/95  15:57
"RTN","FHPRC14",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC14",3,0)
PD ; Store Meal and Production Diet of menu on Local Array
"RTN","FHPRC14",4,0)
 F K=0:0 S K=$O(^FHUM(MENU,1,K)) Q:K<1  F K1=0:0 S K1=$O(^FHUM(MENU,1,K,1,K1)) Q:K1<1  S Y=$G(^(K1,0)),M1=$P(Y,"^",2),PD=$P(Y,"^",3) D P1
"RTN","FHPRC14",5,0)
 Q
"RTN","FHPRC14",6,0)
P1 S $P(M(K),"^",K1)=$S(M1'="":+M1,1:"")_";"_$S(PD'="":+PD,1:"")_"~"_$P($G(^FH(116.2,+PD,0)),"^",2)
"RTN","FHPRC14",7,0)
 Q
"RTN","FHPRC14",8,0)
SRCH ; Search for Recipes of a Meal for a Production Diet
"RTN","FHPRC14",9,0)
 K ^TMP($J,"RECIPES",DAY,MEAL) Q:'M1  S ^TMP($J,"RECIPES",DAY,MEAL,0)=M1_"^"_PD
"RTN","FHPRC14",10,0)
 F REC=0:0 S REC=$O(^FH(116.1,M1,"RE",REC)) Q:REC<1  S Y=$G(^(REC,0)) D
"RTN","FHPRC14",11,0)
 .F CAT=0:0 S CAT=$O(^FH(116.1,M1,"RE",REC,"R",CAT)) Q:CAT<1  S MCA=$G(^(CAT,0)) D
"RTN","FHPRC14",12,0)
 ..S LIST=$P(MCA,"^",2) I LIST[CODE S ^TMP($J,"RECIPES",DAY,MEAL,+Y)=1_"^"_$P($G(^FH(114,+Y,0)),"^",14)
"RTN","FHPRC14",13,0)
 ..Q
"RTN","FHPRC14",14,0)
 .Q
"RTN","FHPRC14",15,0)
 Q
"RTN","FHPRC14",16,0)
LIS ; List Recipes in the Meal for a Production Diet
"RTN","FHPRC14",17,0)
 I $O(^TMP($J,"RECIPES",DAY,MEAL,0))="" W !!,"No Recipes in this Meal for this Production Diet" Q
"RTN","FHPRC14",18,0)
 K N S ANS="" F LL=0:0 S LL=$O(^TMP($J,"RECIPES",DAY,MEAL,LL)) Q:LL<1  S X=$P($G(^FH(114,+LL,0)),"^",1),N(X)=""
"RTN","FHPRC14",19,0)
 S CTR=0 W !! S LL="" F  S LL=$O(N(LL)) Q:LL=""  S CTR=CTR+1 W !,LL I CTR=20 D PAUSE Q:ANS="^"  S CTR=0
"RTN","FHPRC14",20,0)
 K N Q
"RTN","FHPRC14",21,0)
L1 ; List Meals of each day for the Menu
"RTN","FHPRC14",22,0)
 S CTR=0,ANS="" F L=0:0 S L=$O(M(L)) Q:L=""  S STR=$G(M(L)) W !!,"Day ",L,! S CTR=CTR+1 D L2 I CTR=2 D PAUSE Q:ANS="^"  S CTR=0
"RTN","FHPRC14",23,0)
 Q
"RTN","FHPRC14",24,0)
L2 F LL=1:1:6 S Y=$P(STR,"^",LL) I Y'="" W !,"Meal ",LL,?8,$S($P(Y,"~",2)'="":$P(Y,"~",2),1:""),?12,$S(+Y:$P($G(^FH(116.1,+Y,0)),"^",1),1:"")
"RTN","FHPRC14",25,0)
 Q
"RTN","FHPRC14",26,0)
OLD ; Get old Recipes and Food Nutrient stored
"RTN","FHPRC14",27,0)
 Q:'M1  S ^TMP($J,"RECIPES",DAY,MEAL,0)=M1_"^"_PD
"RTN","FHPRC14",28,0)
 F REC=0:0 S REC=$O(^FHUM(MENU,1,DAY,1,MEAL,2,REC)) Q:REC<1  S Y=$G(^(REC,0)),^TMP($J,"RECIPES",DAY,MEAL,+Y)=$P(Y,"^",2)_"^"_$P($G(^FH(114,+Y,0)),"^",14)
"RTN","FHPRC14",29,0)
 Q
"RTN","FHPRC14",30,0)
PAUSE ; Pause to Scroll
"RTN","FHPRC14",31,0)
 R !!,"Press RETURN to Continue ",X:DTIME W @IOF S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHPRC14",32,0)
 Q
"RTN","FHPRC14",33,0)
RET ; Retrieve the Stored Menu
"RTN","FHPRC14",34,0)
 F K=0:0 S K=$O(^FHUM(MENU,1,K)) Q:K<1  F K1=0:0 S K1=$O(^FHUM(MENU,1,K,1,K1)) Q:K1<1  S L1=$G(^FHUM(MENU,1,K,1,K1,0)) D A1
"RTN","FHPRC14",35,0)
 Q
"RTN","FHPRC14",36,0)
A1 S M1=$P(L1,"^",2),PD=$P(L1,"^",3) Q:'M1
"RTN","FHPRC14",37,0)
 S ^TMP($J,"RECIPES",K,K1,0)=M1_"^"_PD
"RTN","FHPRC14",38,0)
 S REC=0
"RTN","FHPRC14",39,0)
A2 S REC=$O(^FHUM(MENU,1,K,1,K1,2,REC)) Q:REC<1  S Y=$G(^(REC,0)),NP=$P($G(^FH(114,REC,0)),"^",14) G:'NP A2
"RTN","FHPRC14",40,0)
 I '$D(^FHUM(MENU,1,K,1,K1,1,NP,0)) G A2
"RTN","FHPRC14",41,0)
 S ^TMP($J,"RECIPES",K,K1,REC)=$P(Y,"^",2)_"^"_NP
"RTN","FHPRC14",42,0)
 G A2
"RTN","FHPRC14",43,0)
Q1 ; Process Meal Analysis
"RTN","FHPRC14",44,0)
 K ^TMP($J,"D"),^TMP($J,"M"),^TMP($J,"R") S DAY=0
"RTN","FHPRC14",45,0)
Q2 S DAY=$O(^TMP($J,"RECIPES",DAY)) Q:DAY<1  S M1=0,(D(1),D(2),D(3),D(4),D(5))=""
"RTN","FHPRC14",46,0)
Q3 S M1=$O(^TMP($J,"RECIPES",DAY,M1)) I M1<1 S ^TMP($J,"D",DAY,1)=D(1),^(2)=D(2),^(4)=D(4),^(5)=D(5) G Q2
"RTN","FHPRC14",47,0)
 S REC=0,(T(1),T(2),T(3),T(4))=""
"RTN","FHPRC14",48,0)
ANAL ; Analyze
"RTN","FHPRC14",49,0)
 K A S (AMT,PW)=0 F KK=1:1:66 S A(KK)=0
"RTN","FHPRC14",50,0)
 S REC=$O(^TMP($J,"RECIPES",DAY,M1,REC)) I REC<1 S ^TMP($J,"M",DAY,M1,1)=T(1),^(2)=T(2),^(4)=T(4) D ADD^FHNU9 G Q3
"RTN","FHPRC14",51,0)
 S S1=$G(^TMP($J,"RECIPES",DAY,M1,REC)),SVG=+S1
"RTN","FHPRC14",52,0)
 I '$D(^FH(114,REC,0))!('SVG) G ANAL
"RTN","FHPRC14",53,0)
 S RNAM=$E($P($G(^FH(114,REC,0)),"^",1),1,18),K1=$P(S1,"^",2) G:'K1 ANAL
"RTN","FHPRC14",54,0)
 S AMT=$P($G(^FHNU(K1,0)),"^",4) G:'AMT ANAL S AMT=AMT*SVG,PW=PW+AMT,AMT=AMT/100
"RTN","FHPRC14",55,0)
 S Y=$G(^FHNU(K1,1)) F K=1:1:20 S Z1=$P(Y,"^",K) S:Z1="" $P(D(5),"^",K)=1 I Z1 S A(K)=$J(Z1*AMT,0,3),$P(T(1),"^",K)=$P(T(1),"^",K)+A(K)
"RTN","FHPRC14",56,0)
 S Y=$G(^FHNU(K1,2)) F K=21:1:38 S Z1=$P(Y,"^",K-20) S:Z1="" $P(D(5),"^",K)=1 I Z1 S A(K)=$J(Z1*AMT,0,3),$P(T(2),"^",K-20)=$P(T(2),"^",K-20)+A(K)
"RTN","FHPRC14",57,0)
 S Y=$G(^FHNU(K1,4)) F K=65,66 S Z1=$P(Y,"^",K-56) S:Z1="" $P(D(5),"^",K)=1 I Z1 S A(K)=$J(Z1*AMT,0,3),$P(T(4),"^",K-56)=$P(T(4),"^",K-56)+A(K)
"RTN","FHPRC14",58,0)
 S:'$D(^TMP($J,"R",DAY,M1,RNAM,0)) (^(0),^(1),^(2),^(3),^(4))=""
"RTN","FHPRC14",59,0)
 S $P(^TMP($J,"R",DAY,M1,RNAM,0),"^",1,2)=SVG_"^"_PW
"RTN","FHPRC14",60,0)
 F K=1:1:20 S $P(^TMP($J,"R",DAY,M1,RNAM,1),"^",K)=A(K)
"RTN","FHPRC14",61,0)
 F K=21:1:38 S $P(^TMP($J,"R",DAY,M1,RNAM,2),"^",K-20)=A(K)
"RTN","FHPRC14",62,0)
 F K=65,66 S $P(^TMP($J,"R",DAY,M1,RNAM,4),"^",K-56)=A(K)
"RTN","FHPRC14",63,0)
 G ANAL
"RTN","FHPRC2")
0^245^B7470525
"RTN","FHPRC2",1,0)
FHPRC2 ; HISC/REL - List Weekly Menu ;1/23/98  16:09
"RTN","FHPRC2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC2",3,0)
F0 R !!,"Select PRODUCTION DIET (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHX1=0
"RTN","FHPRC2",4,0)
 E  K DIC S DIC="^FH(116.2,",DIC(0)="EQM" D ^DIC G:Y<1 F0 S FHX1=+Y
"RTN","FHPRC2",5,0)
F1 S %DT("A")="Select SUNDAY Date: ",%DT="AEX" D ^%DT Q:"^"[X!$D(DTOUT)  G:Y<1 F1
"RTN","FHPRC2",6,0)
 S (D1,X)=Y D DOW^%DTC I Y'=0 W *7,"  .. Not a Sunday" G F1
"RTN","FHPRC2",7,0)
L0 W !!,"The Menu requires a 132 column compressed printer.",!
"RTN","FHPRC2",8,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRC2",9,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRC2",FHLST="D1^FHX1" D EN2^FH G F0
"RTN","FHPRC2",10,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G F0
"RTN","FHPRC2",11,0)
Q1 ; Print Weekly Menu
"RTN","FHPRC2",12,0)
 D ^FHDEV S X=220 X ^%ZOSF("RM") K D S D(1)=D1 F K=2:1:7 S X1=D(K-1),X2=1 D C^%DTC S D(K)=X
"RTN","FHPRC2",13,0)
 S PG=0 I FHX1 D Q2 Q
"RTN","FHPRC2",14,0)
 F NN=0:0 S NN=$O(^FH(116.2,"AP",NN)) Q:NN<1  F FHX1=0:0 S FHX1=$O(^FH(116.2,"AP",NN,FHX1)) Q:FHX1<1  D Q2
"RTN","FHPRC2",15,0)
 Q
"RTN","FHPRC2",16,0)
Q2 S FHPD=$P(^FH(116.2,FHX1,0),"^",2) K ^TMP($J)
"RTN","FHPRC2",17,0)
 F KK=1:1:7 S X1=D(KK) D SET
"RTN","FHPRC2",18,0)
 Q:'$D(^TMP($J))  W @FHIO("P16") D HDR F K3=1:1:3 D PRT
"RTN","FHPRC2",19,0)
 W ! W @FHIO("P10") Q
"RTN","FHPRC2",20,0)
SET D E1^FHPRC1 S X2="" I FHCY>0,$D(^FH(116,FHCY,"DA",FHDA,0)) S X2=^(0)
"RTN","FHPRC2",21,0)
 I $D(^FH(116.3,+D(KK),0)) S X=^(0) F K3=2:1:4 I $P(X,"^",K3) S $P(X2,"^",K3)=$P(X,"^",K3)
"RTN","FHPRC2",22,0)
 F K3=1:1:3 S X=$P(X2,"^",K3+1) I X D S1
"RTN","FHPRC2",23,0)
 Q
"RTN","FHPRC2",24,0)
S1 K M F P1=0:0 S P1=$O(^FH(116.1,X,"RE",P1)) Q:P1<1  S L1=^(P1,0),L1=+L1,Y=^FH(114,L1,0) D
"RTN","FHPRC2",25,0)
 .F CAT=0:0 S CAT=$O(^FH(116.1,X,"RE",P1,"R",CAT)) Q:CAT<1  S MCA=$G(^(CAT,0)) I $P(MCA,"^",2)[FHPD D
"RTN","FHPRC2",26,0)
 ..S K4=+MCA,K4=$P($G(^FH(114.1,+K4,0)),"^",3) S K4=$S('K4:99,K4<10:"0"_K4,1:K4),M("A"_K4_$P(Y,"^",1))=""
"RTN","FHPRC2",27,0)
 ..Q
"RTN","FHPRC2",28,0)
 .Q
"RTN","FHPRC2",29,0)
 S P1=0,K4="" F L1=0:0 S K4=$O(M(K4)) Q:K4=""  S P1=P1+1,^TMP($J,K3,KK,P1)=$E(K4,4,99)
"RTN","FHPRC2",30,0)
 K M,Y Q
"RTN","FHPRC2",31,0)
PRT S P1=0
"RTN","FHPRC2",32,0)
P1 S P1=P1+1,C=0,Y="|" F KK=1:1:7 S X="" S:$D(^TMP($J,K3,KK,P1)) X=^(P1),C=1 S Y=Y_" "_$E(X_$J("",27),1,27)_" |"
"RTN","FHPRC2",33,0)
 I C W !,Y G P1
"RTN","FHPRC2",34,0)
 W ! F P1=1:1:211 W "-"
"RTN","FHPRC2",35,0)
 Q
"RTN","FHPRC2",36,0)
HDR S DTP=D1 D DTP^FH S Y=$P(^FH(116.2,FHX1,0),"^",1) W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHPRC2",37,0)
 W !?94,"W E E K L Y   M E N U",!!?(210-$L(Y)\2),Y,!!?96,"Week Of ",DTP
"RTN","FHPRC2",38,0)
 W !!?2,"S U N D A Y",?32,"M O N D A Y",?62,"T U E S D A Y",?92,"W E D N E S D A Y",?122,"T H U R S D A Y",?152,"F R I D A Y",?182,"S A T U R D A Y",!
"RTN","FHPRC2",39,0)
 F K=1:1:211 W "-"
"RTN","FHPRC2",40,0)
 Q
"RTN","FHPRC2",41,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRC3")
0^246^B6573528
"RTN","FHPRC3",1,0)
FHPRC3 ; HISC/REL - List Meal ;4/12/95  13:56
"RTN","FHPRC3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC3",3,0)
 S DIC="^FH(116.1,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:U[X!$D(DTOUT),FHPRC3:Y<1 S FHMN=+Y
"RTN","FHPRC3",4,0)
 K IOP S %ZIS="MQ",%ZIS("A")="Select Listing Device: ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRC3",5,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRC3",FHLST="FHMN" D EN2^FH G FHPRC3
"RTN","FHPRC3",6,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G FHPRC3
"RTN","FHPRC3",7,0)
Q1 ; Print Meal
"RTN","FHPRC3",8,0)
 S Y=^FH(116.1,FHMN,0),N1=$P(Y,"^",1) W:$E(IOST,1,2)="C-" @IOF
"RTN","FHPRC3",9,0)
 W !!?(77-$L(N1)\2),"Meal: ",N1,!!,"Recipe",?28,"Cat.",?34,"Production Diets"
"RTN","FHPRC3",10,0)
 K ^TMP($J)
"RTN","FHPRC3",11,0)
 F M=0:0 S M=$O(^FH(116.1,FHMN,"RE",M)) Q:M<1  S Y=$G(^(M,0)),L1=+Y D Q2
"RTN","FHPRC3",12,0)
 S K4="" F P0=0:0 S K4=$O(^TMP($J,K4)) Q:K4=""  F L1=0:0 S L1=$O(^TMP($J,K4,L1)) Q:L1<1  S X=^(L1) D Q3
"RTN","FHPRC3",13,0)
 W ! G KIL
"RTN","FHPRC3",14,0)
Q2 S X=$G(^FH(114,L1,0)),N1=$P(X,"^",1) Q:N1=""  S MCA=$O(^FH(116.1,FHMN,"RE",M,"R",0)),K4=$S(MCA:+$G(^FH(116.1,FHMN,"RE",M,"R",MCA,0)),1:99)
"RTN","FHPRC3",15,0)
 S K4=$S($D(^FH(114.1,+K4,0)):$P(^(0),"^",3),1:99)
"RTN","FHPRC3",16,0)
 S K4=$S(K4<1:99,K4<10:"0"_K4,1:K4)_$E(N1,1,28)
"RTN","FHPRC3",17,0)
 S ^TMP($J,K4,L1)=N1_"^"_M Q
"RTN","FHPRC3",18,0)
Q3 W !!,$E($P(X,"^",1),1,27) S M=$P(X,"^",2)
"RTN","FHPRC3",19,0)
 F CAT=0:0 S CAT=$O(^FH(116.1,FHMN,"RE",M,"R",CAT)) Q:CAT<1  S MCA=$G(^(CAT,0)),CODE=+MCA D
"RTN","FHPRC3",20,0)
 .S CODE=$P($G(^FH(114.1,+CODE,0)),"^",2) D SRT
"RTN","FHPRC3",21,0)
 .W ?29,$J(CODE,3) S X=$E(PD,1,200) D Q4 W !
"RTN","FHPRC3",22,0)
 .Q
"RTN","FHPRC3",23,0)
 G Q5
"RTN","FHPRC3",24,0)
Q4 I $L(X)<44 W ?34,X Q
"RTN","FHPRC3",25,0)
 F N1=44:-1:1 Q:$E(X,N1)=" "
"RTN","FHPRC3",26,0)
 W ?34,$E(X,1,N1-1) S X=$E(X,N1+1,999) I X'="" W ! G Q4
"RTN","FHPRC3",27,0)
 Q
"RTN","FHPRC3",28,0)
Q5 Q:'$D(^FH(116.1,FHMN,"RE",M,"D"))
"RTN","FHPRC3",29,0)
 F P1=0:0 S P1=$O(^FH(116.1,FHMN,"RE",M,"D",P1)) Q:P1<1  S X=^(P1,0),A1=$P(X,"^",2),X1=^FH(119.72,P1,0) D DP
"RTN","FHPRC3",30,0)
 Q
"RTN","FHPRC3",31,0)
DP I $G(^FH(119.72,P1,"I"))="Y" Q
"RTN","FHPRC3",32,0)
 S A2=$P(X1,"^",4) S:A2="" A2=$E($P(X1,"^",1),1,10) W !?3,A2
"RTN","FHPRC3",33,0)
 S A2=$P(X1,"^",2) W ?15,$S(A2["C":"Cafe",1:"Tray")," ",$S(A1="":100,1:A1),"% " Q
"RTN","FHPRC3",34,0)
SRT S FHPD=$P(MCA,"^",2) K SR
"RTN","FHPRC3",35,0)
 F LP=1:1 S FHX1=$P(FHPD," ",LP) Q:FHX1=""  S PD=$P(FHX1,";",1) I PD'="" S Z=0,Z=$O(^FH(116.2,"C",PD,Z)) I Z D
"RTN","FHPRC3",36,0)
 .S Z1=$P($G(^FH(116.2,+Z,0)),"^",6),Z1=$S(Z1<1:99,Z1<10:"0"_Z1,1:Z1)
"RTN","FHPRC3",37,0)
 .S:'$D(SR(Z1_"~"_PD)) SR(Z1_"~"_PD)=FHX1 Q
"RTN","FHPRC3",38,0)
 S (PD,XX)="" F  S XX=$O(SR(XX)) Q:XX=""  S Z=$G(SR(XX)) I Z'="" S:PD'="" PD=PD_" " S PD=PD_Z
"RTN","FHPRC3",39,0)
 Q
"RTN","FHPRC3",40,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRC4")
0^247^B2645185
"RTN","FHPRC4",1,0)
FHPRC4 ; HISC/REL - Menu Cycle Query ;4/27/93  13:44 
"RTN","FHPRC4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC4",3,0)
EN1 ; Menu Cycle Query
"RTN","FHPRC4",4,0)
 S %DT("A")="Select Date: ",%DT="AEX" W ! D ^%DT G KIL:"^"[X!$D(DTOUT),EN1:Y<1 S (X1,D1)=+Y
"RTN","FHPRC4",5,0)
 D E1^FHPRC1 I FHCY<1 W *7,!!,"No MENU CYCLE Defined for that Date!" G EN1
"RTN","FHPRC4",6,0)
 W !!?5,"Menu Cycle: ",$P(^FH(116,FHCY,0),"^",1),!?5,"Cycle Day:  ",FHDA
"RTN","FHPRC4",7,0)
 I '$D(^FH(116,FHCY,"DA",FHDA,0)) W *7,!!,"MENU CYCLE DAY Not Defined!" G EN1
"RTN","FHPRC4",8,0)
 S FHX1=^FH(116,FHCY,"DA",FHDA,0) G:'$D(^FH(116.3,D1,0)) N1
"RTN","FHPRC4",9,0)
 S X=^FH(116.3,D1,0) W !!,"Normal Cycle Suspended for Holiday: ",$P(X,"^",5)
"RTN","FHPRC4",10,0)
 F LL=2:1:4 I $P(X,"^",LL) S $P(FHX1,"^",LL)=$P(X,"^",LL)
"RTN","FHPRC4",11,0)
N1 W ! F K=1:1:3 S X=$P(FHX1,"^",K+1) W !?5,$P("Breakfast Noon Evening"," ",K)," Menu:" I X W ?23,$P($G(^FH(116.1,X,0)),"^",1)
"RTN","FHPRC4",12,0)
 G EN1
"RTN","FHPRC4",13,0)
EN2 ; Menu Cycle Time Line
"RTN","FHPRC4",14,0)
 W !!,"Effective Date",?25,"Menu Cycle",!
"RTN","FHPRC4",15,0)
 F K=0:0 S K=$O(^FH(116,"AB",K)) Q:K<1  S FHCY=$O(^(K,0)),DTP=K D DTP^FH W !?2,DTP,?25,$P($G(^FH(116,+FHCY,0)),"^",1)
"RTN","FHPRC4",16,0)
 G KIL
"RTN","FHPRC4",17,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRC5")
0^248^B2469527
"RTN","FHPRC5",1,0)
FHPRC5 ; HISC/REL - List Menu Cycle ;4/27/93  13:44 
"RTN","FHPRC5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC5",3,0)
 S DIC="^FH(116,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),FHPRC5:Y<1
"RTN","FHPRC5",4,0)
 S FHCY=+Y
"RTN","FHPRC5",5,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRC5",6,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRC5",FHLST="FHCY" D EN2^FH G KIL
"RTN","FHPRC5",7,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRC5",8,0)
Q1 ; List the Menu Cycle
"RTN","FHPRC5",9,0)
 D NOW^%DTC S NOW=%,N=$P($G(^FH(116,FHCY,0)),"^",2) Q:'N
"RTN","FHPRC5",10,0)
 S PG=0 D HDR F K=1:1:N D Q2
"RTN","FHPRC5",11,0)
 W ! Q
"RTN","FHPRC5",12,0)
Q2 D:$Y>(IOSL-11) HDR S X=$G(^FH(116,FHCY,"DA",K,0)) W !,$J(K,3)
"RTN","FHPRC5",13,0)
 S S1=-20 F L=2:1:4 S Z=$P(X,"^",L),S1=S1+25 I Z S Z=$P($G(^FH(116.1,Z,0)),"^",1) I Z'="" W ?S1,$E(Z,1,23)
"RTN","FHPRC5",14,0)
 Q
"RTN","FHPRC5",15,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=NOW D DTP^FH W !,DTP,?30,"M E N U   C Y C L E",?73,"Page ",PG
"RTN","FHPRC5",16,0)
 S Y=$P(^FH(116,FHCY,0),"^",1) W !!?(80-$L(Y)\2),Y
"RTN","FHPRC5",17,0)
 W !!,"Day",?5,"Breakfast",?30,"Noon",?55,"Evening"
"RTN","FHPRC5",18,0)
 W !,"-------------------------------------------------------------------------------",! Q
"RTN","FHPRC5",19,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRC6")
0^249^B7384532
"RTN","FHPRC6",1,0)
FHPRC6 ; HISC/REL/NCA - Edit Meal Production Diets ;2/26/96  10:04
"RTN","FHPRC6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC6",3,0)
R0 S DIC="^FH(116.1,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:U[X!$D(DTOUT),R0:Y<1 S D0=+Y
"RTN","FHPRC6",4,0)
R1 S DIC="^FH(116.1,D0,""RE"",",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:X[U!$D(DTOUT),R0:X="",R1:Y<1 S D1=+Y
"RTN","FHPRC6",5,0)
 Q:$O(^FH(116.1,D0,"RE",D1,"R",0))<1
"RTN","FHPRC6",6,0)
R11 S DIC="^FH(116.1,D0,""RE"",D1,""R"",",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:X[U!$D(DTOUT),R1:X="",R11:Y<1 S CAT=+Y
"RTN","FHPRC6",7,0)
 S OLD=$P(^FH(116.1,D0,"RE",D1,"R",CAT,0),"^",2)
"RTN","FHPRC6",8,0)
 I $E(OLD,$L(OLD))=" " S OLD=$E(OLD,1,$L(OLD)-1)
"RTN","FHPRC6",9,0)
 S NEW=OLD D IN
"RTN","FHPRC6",10,0)
R2 D LI R !!,"Action: ",Y:DTIME G:'$T KIL I "^"[Y S:OLD'=NEW $P(^FH(116.1,D0,"RE",D1,"R",CAT,0),"^",2)=NEW G R1
"RTN","FHPRC6",11,0)
 I Y["?" D IN G R2
"RTN","FHPRC6",12,0)
 S X=Y D TR^FH S Y=X
"RTN","FHPRC6",13,0)
 S Z=$E(Y,1),FLG=0 G AD:Z="+",DE:Z="-",MO
"RTN","FHPRC6",14,0)
 Q
"RTN","FHPRC6",15,0)
AD S FHX1=$E(Y,2,999) F LL=1:1 Q:$P(FHX1," ",LL,99)=""  S FHX2=$P(FHX1," ",LL),PD=$P(FHX2,";",1) D A1 Q:'$D(X)
"RTN","FHPRC6",16,0)
 W:'FLG "  ok"
"RTN","FHPRC6",17,0)
 G R2
"RTN","FHPRC6",18,0)
A1 D CK I X6<0 S FLG=1 Q
"RTN","FHPRC6",19,0)
 I X6 W *7,!?5,"  ",FHX2," already exists! Use Modify option." S FLG=1 Q
"RTN","FHPRC6",20,0)
 S X=NEW_" "_FHX2 S:$E(X,1)=" " X=$E(X,2,999) D EN2^FHPRC1 I $D(X) S NEW=X
"RTN","FHPRC6",21,0)
 Q
"RTN","FHPRC6",22,0)
DE S FHX1=$E(Y,2,999) F LL=1:1 Q:$P(FHX1," ",LL,99)=""  S FHX2=$P(FHX1," ",LL),PD=$P(FHX2,";",1) D D1
"RTN","FHPRC6",23,0)
 W:'FLG "  ok"
"RTN","FHPRC6",24,0)
 G R2
"RTN","FHPRC6",25,0)
D1 D CK I X6<0 S FLG=1 Q
"RTN","FHPRC6",26,0)
 I 'X6 W *7,!?5,"  ",FHX2," does not exist!" S FLG=1 Q
"RTN","FHPRC6",27,0)
 S X=$P(NEW," ",1,X6-1)_" "_$P(NEW," ",X6+1,999) S:$E(X,1)=" " X=$E(X,2,999) S:$E(X,$L(X))=" " X=$E(X,1,$L(X)-1)
"RTN","FHPRC6",28,0)
 D EN2^FHPRC1 I $D(X) S NEW=X
"RTN","FHPRC6",29,0)
 Q
"RTN","FHPRC6",30,0)
MO S PD=$E(Y,1,2) D CK G:X6<0 R2
"RTN","FHPRC6",31,0)
 I 'X6 W *7,"  ",PD," does not exist!" G R2
"RTN","FHPRC6",32,0)
 S X=NEW,$P(X," ",X6)=Y I $L(X)>200 W *7,!!?5,"String Length >200." K X G R2
"RTN","FHPRC6",33,0)
 D EN2^FHPRC1 I $D(X) S NEW=X W "  ok"
"RTN","FHPRC6",34,0)
 G R2
"RTN","FHPRC6",35,0)
CK S:PD'?1U1UN PD="---" I '$D(^FH(116.2,"C",PD)) W *7,!?5,"  ",PD," Not a valid Production Diet code!" S X6=-1 Q
"RTN","FHPRC6",36,0)
 S X6=0 F K=1:1 S Z=$P(NEW," ",K) Q:Z=""  I $E(Z,1,2)=PD S X6=K Q
"RTN","FHPRC6",37,0)
 Q
"RTN","FHPRC6",38,0)
E1 W *7,"  Illegal Production Diet code" G R2
"RTN","FHPRC6",39,0)
LI W !!,"Production Diets: " S X=NEW
"RTN","FHPRC6",40,0)
L1 I $L(X)<61 W ?19,X Q
"RTN","FHPRC6",41,0)
 F N1=61:-1:1 Q:$E(X,N1)=" "
"RTN","FHPRC6",42,0)
 W ?19,$E(X,1,N1-1) S X=$E(X,N1+1,999) Q:X=""  W ! G L1
"RTN","FHPRC6",43,0)
IN W !!?5,"Enter + to add (example: +RG;C50)"
"RTN","FHPRC6",44,0)
 W !?5,"Enter -Production Diet to delete (example: -RG)"
"RTN","FHPRC6",45,0)
 W !?5,"Enter new code to modify (example: LS;C30)" Q
"RTN","FHPRC6",46,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRC7")
0^250^B4333956
"RTN","FHPRC7",1,0)
FHPRC7 ; HISC/REL - Find Meals Containing a Recipe ;4/26/93  15:53 
"RTN","FHPRC7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC7",3,0)
 S (DIC,DIE)="^FH(114,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:U[X!$D(DTOUT),FHPRC7:Y<1 S FHX1=+Y
"RTN","FHPRC7",4,0)
L0 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRC7",5,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRC7",FHLST="FHX1" D EN2^FH G KIL
"RTN","FHPRC7",6,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRC7",7,0)
Q1 ; List Meals Containing a Recipe
"RTN","FHPRC7",8,0)
 K ^TMP($J) D NOW^%DTC S DTP=% D DTP^FH
"RTN","FHPRC7",9,0)
 F M1=0:0 S M1=$O(^FH(116.1,M1)) Q:M1<1  F R1=0:0 S R1=$O(^FH(116.1,M1,"RE",R1)) Q:R1<1  S X=+$G(^FH(116.1,M1,"RE",R1,0)) S:X=FHX1 ^TMP($J,"M",M1)=""
"RTN","FHPRC7",10,0)
 F C1=0:0 S C1=$O(^FH(116,C1)) Q:C1<1  F D1=0:0 S D1=$O(^FH(116,C1,"DA",D1)) Q:D1<1  D Q2
"RTN","FHPRC7",11,0)
 S N1=$P(^FH(114,FHX1,0),"^",1),PG=0,LN="",$P(LN,"-",80)="" D HDR,P0
"RTN","FHPRC7",12,0)
 W ! Q
"RTN","FHPRC7",13,0)
Q2 S X=$G(^FH(116,C1,"DA",D1,0)) Q:X=""
"RTN","FHPRC7",14,0)
 F K1=1:1:3 S Z=$P(X,"^",K1+1) I Z,$D(^TMP($J,"M",Z)) S ^TMP($J,"M",Z,"C",C1_"~"_D1_"~"_K1)=""
"RTN","FHPRC7",15,0)
 Q
"RTN","FHPRC7",16,0)
P0 F M1=0:0 S M1=$O(^TMP($J,"M",M1)) Q:M1<1  S X=$P($G(^FH(116.1,M1,0)),"^",1) I X'="" D:$Y>(IOSL-9) HDR W !,X D P1
"RTN","FHPRC7",17,0)
 Q
"RTN","FHPRC7",18,0)
P1 S A1="" F C1=0:0 S A1=$O(^TMP($J,"M",M1,"C",A1)) Q:A1=""  D P2
"RTN","FHPRC7",19,0)
 Q
"RTN","FHPRC7",20,0)
P2 S C1=+A1,D1=$P(A1,"~",2),K1=$P(A1,"~",3)
"RTN","FHPRC7",21,0)
 W ?31,$P(^FH(116,C1,0),"^",1),", Day ",D1,", ",$S(K1=1:"Breakfast",K1=2:"Noon",1:"Evening"),! D:$Y>(IOSL-6) HDR Q
"RTN","FHPRC7",22,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,DTP,?28,"R E C I P E   U S A G E",?73,"Page ",PG
"RTN","FHPRC7",23,0)
 W !!?(80-$L(N1)\2),N1
"RTN","FHPRC7",24,0)
 W !!,"Meal",?31,"Cycle",!,LN,! Q
"RTN","FHPRC7",25,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRC8")
0^251^B13521843
"RTN","FHPRC8",1,0)
FHPRC8 ; HISC/REL - Print Daily Diet Menus ;1/23/98  16:10
"RTN","FHPRC8",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC8",3,0)
 S FHP=$O(^FH(119.71,0)) I FHP'<1,$O(^FH(119.71,FHP))<1 G F1
"RTN","FHPRC8",4,0)
F0 R !!,"Select PRODUCTION FACILITY: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHPRC8",5,0)
 K DIC S DIC="^FH(119.71,",DIC(0)="EMQ" D ^DIC G:Y<1 F0 S FHP=+Y
"RTN","FHPRC8",6,0)
F1 S %DT("A")="Select Date: ",%DT="AEX" W ! D ^%DT G:"^"[X!$D(DTOUT) KIL G:Y<1 F1 S D1=+Y
"RTN","FHPRC8",7,0)
L0 W !!,"The Menu requires a 132 compressed printer.",!
"RTN","FHPRC8",8,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRC8",9,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRC8",FHLST="D1^FHP" D EN2^FH G F1
"RTN","FHPRC8",10,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G F1
"RTN","FHPRC8",11,0)
Q1 ; Print the Daily Menu
"RTN","FHPRC8",12,0)
 D ^FHDEV S X=220 X ^%ZOSF("RM") K ^TMP($J) S X1=D1 D SET
"RTN","FHPRC8",13,0)
 Q:'$D(^TMP($J))  D NOW^%DTC S NOW=%,PG=0,DTP=D1 D DTP^FH S DTE=DTP,DTP=NOW D DTP^FH
"RTN","FHPRC8",14,0)
 S X=D1 D DOW^%DTC S DTE=$P("Sun^Mon^Tues^Wednes^Thurs^Fri^Satur","^",Y+1)_"day  "_DTE
"RTN","FHPRC8",15,0)
 S TYP=$P($G(^FH(119.71,FHP,0)),"^",2) W @FHIO("P16") D PRT W @FHIO("P10") Q
"RTN","FHPRC8",16,0)
SET D E1^FHPRC1 S X2="" I FHCY>0,$D(^FH(116,FHCY,"DA",FHDA,0)) S X2=^(0)
"RTN","FHPRC8",17,0)
 I $D(^FH(116.3,D1,0)) S X=^(0) F K3=2:1:4 I $P(X,"^",K3) S $P(X2,"^",K3)=$P(X,"^",K3)
"RTN","FHPRC8",18,0)
 S RG=$P(^FH(116.2,1,0),"^",2)
"RTN","FHPRC8",19,0)
 K M,M1 F K=0:0 S K=$O(^FH(116.2,K)) Q:K<1  S X=^(K,0),PD=$P(X,"^",2) I PD'="",K=1!($P(X,"^",7)="Y") S K4=$P(X,"^",6),K4=$S(K4<1:99,K4<10:"0"_K4,1:K4) S M(PD)=K4_PD,M1(K4_PD)=K
"RTN","FHPRC8",20,0)
 S REG=M(RG)
"RTN","FHPRC8",21,0)
 F K3=1:1:3 S X=$P(X2,"^",K3+1) I X D S1
"RTN","FHPRC8",22,0)
 K M Q
"RTN","FHPRC8",23,0)
S1 K ^TMP($J,"R") F P1=0:0 S P1=$O(^FH(116.1,X,"RE",P1)) Q:P1<1  S Y0=^(P1,0) D S2
"RTN","FHPRC8",24,0)
 S P1=0,NX="" F K=0:0 S NX=$O(^TMP($J,"R",NX)) Q:NX=""  S X=^(NX) D S3
"RTN","FHPRC8",25,0)
 K Y,Y0 Q
"RTN","FHPRC8",26,0)
S2 S L1=+Y0,Y=$G(^FH(114,L1,0)) Q:Y=""
"RTN","FHPRC8",27,0)
 F CAT=0:0 S CAT=$O(^FH(116.1,X,"RE",P1,"R",CAT)) Q:CAT<1  S MCA=^(CAT,0) D
"RTN","FHPRC8",28,0)
 .S K4=+MCA,K4=$P($G(^FH(114.1,+K4,0)),"^",3)
"RTN","FHPRC8",29,0)
 .S K4=$S(K4<1:99,K4<10:"0"_K4,1:K4)_+MCA
"RTN","FHPRC8",30,0)
 .S ^TMP($J,"R","A"_K4_$P(Y,"^",1))=$P(Y,"^",1)_"^"_$P(MCA,"^",2)_"^"_$P(Y,"^",3) Q
"RTN","FHPRC8",31,0)
 Q
"RTN","FHPRC8",32,0)
S3 S L1=$P(X,"^",1),X1=$P(X,"^",2),P1=P1+1
"RTN","FHPRC8",33,0)
 S P0=0 I X1[RG S:'$D(^TMP($J,"X",K3,REG,0)) ^TMP($J,"X",K3,REG,0)=0 S P0=^(0)+1,^(0)=P0,^TMP($J,"X",K3,REG,P0)=L1_"^"_$P(X,"^",3)
"RTN","FHPRC8",34,0)
 F K4=1:1 S Z=$E($P(X1," ",K4),1,2) Q:Z=""  I Z'=RG S Z=$S($D(M(Z)):M(Z),1:"") I Z'="" S:'$D(^TMP($J,"X",K3,Z,0)) ^TMP($J,"X",K3,Z,0)=0 S P2=^(0)+1,^(0)=P2,^TMP($J,"X",K3,Z,P2)=L1_"^"_P0
"RTN","FHPRC8",35,0)
 Q
"RTN","FHPRC8",36,0)
PRT K M2 S N1=0,NX="" F K=0:0 S NX=$O(M1(NX)) Q:NX=""  I NX'=REG S N1=N1+1,M2(N1)=NX
"RTN","FHPRC8",37,0)
 S L2=0
"RTN","FHPRC8",38,0)
P0 Q:L2=N1  S L1=L2+1,L2=L1+4 S:L2>N1 L2=N1 D HDR F K3=1:1:3 S P1=0 D P1
"RTN","FHPRC8",39,0)
 W ! G P0
"RTN","FHPRC8",40,0)
P1 S P1=P1+1,C=0,Y="|",NX="" S X=$G(^TMP($J,"X",K3,REG,P1)) S:X'="" C=1 S:X'=""&(TYP'="Y") X=$J(P1,2)_" "_X S Y=Y_" "_$E($P(X,"^",1)_$J("",30),1,30)_" | "_$E($P(X,"^",2)_$J("",15),1,15)_" |"
"RTN","FHPRC8",41,0)
 F K4=L1:1:L2 S NX=M2(K4),X="",P2=0 S:$D(^TMP($J,"X",K3,NX,P1)) X=^(P1),P2=$P(X,"^",2),X=$P(X,"^",1),C=1 S:P2&(TYP'="Y") X=P2 S Y=Y_" "_$E(X_$J("",30),1,30)_" |"
"RTN","FHPRC8",42,0)
 I C W !,Y G P1
"RTN","FHPRC8",43,0)
 W !,LN Q
"RTN","FHPRC8",44,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,DTP,?90,"D A I L Y   D I E T   M E N U S",?210,"Page ",PG,!!?(216-$L(DTE)\2),DTE
"RTN","FHPRC8",45,0)
 W !!?2,"REGULAR",?35,"Portion Size" S KK=20 F K4=L1:1:L2 S NX=$E(M2(K4),3,4),NX=$O(^FH(116.2,"C",NX,0)),X=$P($G(^FH(116.2,+NX,0)),"^",1) S KK=KK+33 W ?KK,$E(X,1,30)
"RTN","FHPRC8",46,0)
 S LN="",$P(LN,"-",L2-L1+1*33+53)="" W !,LN Q
"RTN","FHPRC8",47,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRC9")
0^252^B10913177
"RTN","FHPRC9",1,0)
FHPRC9 ; HISC/NCA - Weekly Menu Blocks ;1/23/98  16:10
"RTN","FHPRC9",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRC9",3,0)
D0 K DIC W !! S DIC="^FH(114.1,",DIC(0)="AEQM",DIC("A")="Select RECIPE CATEGORY: " D ^DIC S:$D(DTOUT) X="^" G KIL:"^"[X,D0:Y<1 S FHX1=+Y
"RTN","FHPRC9",4,0)
F0 R !!,"Select PRODUCTION DIET (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHX2=0
"RTN","FHPRC9",5,0)
 E  K DIC S DIC="^FH(116.2,",DIC(0)="EQM" D ^DIC G KIL:$D(DTOUT),F0:Y<1 S FHX2=+Y
"RTN","FHPRC9",6,0)
F1 S %DT("A")="Select SUNDAY Date: ",%DT="AEX" D ^%DT S:$D(DTOUT) X="^" G KIL:"^"[X,F1:Y<1
"RTN","FHPRC9",7,0)
 S (D1,X)=Y D DOW^%DTC I Y'=0 W *7,"  .. Not a Sunday" G F1
"RTN","FHPRC9",8,0)
L0 W !!,"The Menu requires a 132 column compressed printer.",!
"RTN","FHPRC9",9,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRC9",10,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRC9",FHLST="D1^FHX1^FHX2" D EN2^FH G D0
"RTN","FHPRC9",11,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G D0
"RTN","FHPRC9",12,0)
Q1 ; Print Menu Block
"RTN","FHPRC9",13,0)
 D ^FHDEV S X=220 X ^%ZOSF("RM") S (T0,X1)=D1 D E1^FHPRC1 Q:FHCY'>0  S ST=X,WKS=$S(K1<7:7,1:K1) S ST=ST#WKS,WKS=WKS-ST S:WKS<7 WKS=$S(K1<7:7,1:K1)
"RTN","FHPRC9",14,0)
 S WKS=WKS/7 S:WKS#1 WKS=$S(WKS#1'<5:WKS+.95\1,1:WKS\1) S:WKS'<7 WKS=6
"RTN","FHPRC9",15,0)
 K D S X=T0 F J=1:1:WKS F K=1:1:7 S D(J,K)=X,X1=D(J,K),X2=1 D C^%DTC
"RTN","FHPRC9",16,0)
 S PG=0 I FHX2 D Q2 Q
"RTN","FHPRC9",17,0)
 F NN=0:0 S NN=$O(^FH(116.2,"AP",NN)) Q:NN<1  F FHX2=0:0 S FHX2=$O(^FH(116.2,"AP",NN,FHX2)) Q:FHX2<1  D Q2
"RTN","FHPRC9",18,0)
 Q
"RTN","FHPRC9",19,0)
Q2 S FHPD=$P(^FH(116.2,FHX2,0),"^",2) K ^TMP($J)
"RTN","FHPRC9",20,0)
 F XX=1:1:WKS F KK=1:1:7 S X1=D(XX,KK) D SET
"RTN","FHPRC9",21,0)
 Q:'$D(^TMP($J))
"RTN","FHPRC9",22,0)
 W @FHIO("P16") S N2=$P(^FH(116.2,FHX2,0),"^",1),N3=$P($G(^FH(114.1,FHX1,0)),"^",1) D HDR S X3=T0 F XX=1:1:WKS D:$Y+6>(IOSL-10) HDR D HDR1 S X1=X3,X2=7 D C^%DTC S X3=X F K3=1:1:3 D PRT
"RTN","FHPRC9",23,0)
 W ! W @FHIO("P10") Q
"RTN","FHPRC9",24,0)
SET D E1^FHPRC1 S X2="" I FHCY>0,$D(^FH(116,FHCY,"DA",FHDA,0)) S X2=^(0)
"RTN","FHPRC9",25,0)
 I $D(^FH(116.3,+D(XX,KK),0)) S X=^(0) F K3=2:1:4 I $P(X,"^",K3) S $P(X2,"^",K3)=$P(X,"^",K3)
"RTN","FHPRC9",26,0)
 F K3=1:1:3 S X=$P(X2,"^",K3+1) I X D S1
"RTN","FHPRC9",27,0)
 Q
"RTN","FHPRC9",28,0)
S1 K M F P1=0:0 S P1=$O(^FH(116.1,X,"RE",P1)) Q:P1<1  S L1=^(P1,0) D
"RTN","FHPRC9",29,0)
 .S L1=+L1,Y=$G(^FH(114,L1,0))
"RTN","FHPRC9",30,0)
 .F CAT=0:0 S CAT=$O(^FH(116.1,X,"RE",P1,"R",CAT)) Q:CAT<1  S MCA=^(CAT,0),K0=+MCA I K0 D S2
"RTN","FHPRC9",31,0)
 .Q
"RTN","FHPRC9",32,0)
 S P1=0,K4="" F L1=0:0 S K4=$O(M(K4)) Q:K4=""  S P1=P1+1,^TMP($J,XX,K3,KK,P1)=$E(K4,4,99)
"RTN","FHPRC9",33,0)
 K M,Y Q
"RTN","FHPRC9",34,0)
S2 I FHX1,FHX1'=K0 Q
"RTN","FHPRC9",35,0)
 I $P(MCA,"^",2)[FHPD S K4=$P($G(^FH(114.1,+K0,0)),"^",3),K4=$S('K4:99,K4<10:"0"_K4,1:K4),M("A"_K4_$P(Y,"^",1))=K0
"RTN","FHPRC9",36,0)
 Q
"RTN","FHPRC9",37,0)
PRT S P1=0
"RTN","FHPRC9",38,0)
P1 S P1=P1+1,C=0,Y="|" F KK=1:1:7 S X="" S:$D(^TMP($J,XX,K3,KK,P1)) X=^(P1),C=1 S Y=Y_" "_$E(X_$J("",27),1,27)_" |"
"RTN","FHPRC9",39,0)
 I C W !,Y G P1
"RTN","FHPRC9",40,0)
 W ! F P1=1:1:211 W "-"
"RTN","FHPRC9",41,0)
 Q
"RTN","FHPRC9",42,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !!!!?88,"W E E K L Y   M E N U   B L O C K S",!!?(210-$L(N2_"  "_N3)\2),N2,"  ",N3 Q
"RTN","FHPRC9",43,0)
HDR1 S DTP=X3 D DTP^FH
"RTN","FHPRC9",44,0)
 W !!!?96,"Week Of ",DTP
"RTN","FHPRC9",45,0)
 W !!?2,"S U N D A Y",?32,"M O N D A Y",?62,"T U E S D A Y",?92,"W E D N E S D A Y",?122,"T H U R S D A Y",?152,"F R I D A Y",?182,"S A T U R D A Y",!
"RTN","FHPRC9",46,0)
 F K=1:1:211 W "-"
"RTN","FHPRC9",47,0)
 Q
"RTN","FHPRC9",48,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRF")
0^255^B1869381
"RTN","FHPRF",1,0)
FHPRF ; HISC/REL - Forecasting ;2/13/95  14:27 
"RTN","FHPRF",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRF",3,0)
EN1 ; Production Diet Percentages
"RTN","FHPRF",4,0)
 W ! S DIC="^FH(119.72,",DIC(0)="AEQM" D ^DIC G KIL:"^"[X!$D(DTOUT),EN1:Y<1 S DA=+Y
"RTN","FHPRF",5,0)
 W ! S DIE="^FH(119.72,",DR="11",DR(2,119.7211)="10:16;W !" D ^DIE
"RTN","FHPRF",6,0)
 S DA(1)=DA,DIK="^FH(119.72,DA(1),""A""," F DA=0:0 S DA=$O(^FH(119.72,DA(1),"A",DA)) Q:DA'>0  I $P($G(^(DA,0)),"^",2,8)?."^" D ^DIK
"RTN","FHPRF",7,0)
 D KIL G EN1
"RTN","FHPRF",8,0)
EN2 ; Enter/Edit Other Meals
"RTN","FHPRF",9,0)
 W ! S DIC="^FH(119.72,",DIC(0)="AEQM" D ^DIC G KIL:"^"[X!$D(DTOUT),EN2:Y<1 S DA=+Y
"RTN","FHPRF",10,0)
 W ! S DIE="^FH(119.72,",DR=10,DR(2,119.721)="10:30;W !" D ^DIE
"RTN","FHPRF",11,0)
 S DA(1)=DA,DIK="^FH(119.72,DA(1),""B""," F DA=0:0 S DA=$O(^FH(119.72,DA(1),"B",DA)) Q:DA'>0  I $P($G(^(DA,0)),"^",2,22)?."^" D ^DIK
"RTN","FHPRF",12,0)
 D KIL G EN2
"RTN","FHPRF",13,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRF1")
0^256^B44967707
"RTN","FHPRF1",1,0)
FHPRF1 ; HISC/REL/RVD - Calculate Total Forecast ;1/23/98  16:10
"RTN","FHPRF1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRF1",3,0)
 ;
"RTN","FHPRF1",4,0)
 ;RVD 2/18/04 - Outpatient meals
"RTN","FHPRF1",5,0)
 ;
"RTN","FHPRF1",6,0)
 S %DT="X",X="T" D ^%DT S DT=+Y
"RTN","FHPRF1",7,0)
 D DIV^FHOMUTL G:'$D(FHSITE) KIL
"RTN","FHPRF1",8,0)
D1 R !!,"Forecast Date: ",X:DTIME G:'$T!("^"[X) KIL S %DT="EX" D ^%DT G KIL:"^"[X,D1:Y<1 S D1=+Y
"RTN","FHPRF1",9,0)
 S FHP=$O(^FH(119.71,0)) I FHP'<1,$O(^FH(119.71,FHP))<1 G R1
"RTN","FHPRF1",10,0)
R0 R !!,"Select PRODUCTION FACILITY: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHPRF1",11,0)
 K DIC S DIC="^FH(119.71,",DIC(0)="EMQ" D ^DIC G:Y<1 R0 S FHP=+Y
"RTN","FHPRF1",12,0)
R1 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRF1",13,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRF1",FHLST="D1^FHP^FHSITE^FHSITENM" D EN2^FH G KIL
"RTN","FHPRF1",14,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRF1",15,0)
Q1 ; Process Census Forecast
"RTN","FHPRF1",16,0)
 D Q2,Q3
"RTN","FHPRF1",17,0)
 ;get outpatient data
"RTN","FHPRF1",18,0)
 S FHD1SAV=D1
"RTN","FHPRF1",19,0)
 S:'$G(FHSITE) FHSITE=""
"RTN","FHPRF1",20,0)
 S:'$D(FHSITENM) FHSITENM="CONSOLIDATED"
"RTN","FHPRF1",21,0)
 D GETSM^FHOMRBLD(D1,FHSITE,"","")
"RTN","FHPRF1",22,0)
 D GETGM^FHOMRBL1(D1,FHSITE,"","")
"RTN","FHPRF1",23,0)
 S D1=D1-.000001
"RTN","FHPRF1",24,0)
 D GETRM^FHOMRBLD(D1,FHSITE,"","")
"RTN","FHPRF1",25,0)
 D PROSG   ;process recurring, special and guest meal from "OP" node
"RTN","FHPRF1",26,0)
 S D1=FHD1SAV
"RTN","FHPRF1",27,0)
 G ^FHPRF1A
"RTN","FHPRF1",28,0)
Q2 ; Calculate Service Point census forecast
"RTN","FHPRF1",29,0)
 S X="T",%DT="X" D ^%DT S DT=+Y
"RTN","FHPRF1",30,0)
 K ^TMP($J) S X=D1 D DOW^%DTC S DOW=Y+1 D BLD,DAT
"RTN","FHPRF1",31,0)
 F W1=0:0 S W1=$O(^TMP($J,"W",W1)) Q:W1<1  D WRD S ^TMP($J,"W",W1)=S1
"RTN","FHPRF1",32,0)
 K D,DC S X1=DT,X2=-1 D C^%DTC S D2=X
"RTN","FHPRF1",33,0)
 F P0=0:0 S P0=$O(^TMP($J,"S",P0)) Q:P0<1  D ADD S ^TMP($J,P0)=S1
"RTN","FHPRF1",34,0)
 Q
"RTN","FHPRF1",35,0)
Q3 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  S S1=^(P0) D PER S ^TMP($J,P0)=S0
"RTN","FHPRF1",36,0)
 F K=0:0 S K=$O(D(K)) Q:K<1  S ^TMP($J,0,K)=D(K)
"RTN","FHPRF1",37,0)
 K D,^TMP($J,"W"),^TMP($J,"S") Q
"RTN","FHPRF1",38,0)
WRD S (A,B,CT,S1,S2,S3,S4)=0 F K=1:1:9 S Y=$P($G(^DG(41.9,W1,"C",D(K),0)),"^",2) I Y S CT=CT+1,S0=10-K,S1=S1+S0,S2=S0*S0+S2,S3=S3+Y,S4=S0*Y+S4
"RTN","FHPRF1",39,0)
 G:'CT W1 I CT=1 S S1=S3 G W1
"RTN","FHPRF1",40,0)
 S S0=S1*S1/CT-S2,A=S1*S3/CT-S4/S0,B=S3/CT-(A*S1/CT)
"RTN","FHPRF1",41,0)
 S A=$J(A,0,3),B=$J(B,0,2),S1=10*A+B
"RTN","FHPRF1",42,0)
W1 S (N1,C2,C3)=0 F K=1:1:7 S Y0=$P($G(^DG(41.9,W1,"C",DC(K),0)),"^",2) I Y0 S N1=N1+1,C2=Y0-S1*(4-N1)+C2,C3=4-N1+C3 Q:N1=3
"RTN","FHPRF1",43,0)
 I N1 S C2=C2/C3,S1=S1+C2
"RTN","FHPRF1",44,0)
 S S1=$J(S1,0,0) Q
"RTN","FHPRF1",45,0)
ADD S (S1,CT)=0 F W1=0:0 S W1=$O(^TMP($J,"S",P0,W1)) Q:W1<1  S Z=^(W1),T0=$G(^TMP($J,"W",W1)),CT=CT+T0,S1=Z*T0/100+S1
"RTN","FHPRF1",46,0)
 S S1=$J(S1,0,0)
"RTN","FHPRF1",47,0)
 I '$D(^FH(119.72,P0,"C",D1,0)) S ^(0)=D1 I '$D(^FH(119.72,P0,"C",0)) S ^(0)="^119.722DA^^"
"RTN","FHPRF1",48,0)
 I D1'<DT S C2=$P(^FH(119.72,P0,"C",D1,0),"^",3),$P(^(0),"^",2,5)=CT_"^"_C2_"^"_S1_"^"_DT
"RTN","FHPRF1",49,0)
 Q:'$D(^FH(119.72,P0,"C",DT,0))  S C2=0
"RTN","FHPRF1",50,0)
 F W1=0:0 S W1=$O(^TMP($J,"S",P0,W1)) Q:W1<1  S C2=C2+$P($G(^DG(41.9,W1,"C",D2,0)),"^",2)
"RTN","FHPRF1",51,0)
 S:C2 $P(^FH(119.72,P0,"C",DT,0),"^",3)=C2 Q
"RTN","FHPRF1",52,0)
PER S S0=0 F K=0:0 S K=$O(^FH(119.72,P0,"A",K)) Q:K<1  S Z=$P($G(^(K,0)),"^",DOW+1),Z=$J(Z*S1/100,0,0) I Z S ^TMP($J,P0,K)=Z,S0=S0+Z,D(K)=$G(D(K))+Z
"RTN","FHPRF1",53,0)
 Q
"RTN","FHPRF1",54,0)
DAT ; Build list of dates
"RTN","FHPRF1",55,0)
 K D,DC S X1=D1,X2=-1 D C^%DTC S D2=X
"RTN","FHPRF1",56,0)
 F K=1:1:9 S X1=D2,X2=-7 D C^%DTC S D(K)=X,D2=X
"RTN","FHPRF1",57,0)
 S D2=D1 F K=1:1:7 S X1=D2,X2=-1 D C^%DTC S DC(K)=X,D2=X
"RTN","FHPRF1",58,0)
 Q
"RTN","FHPRF1",59,0)
BLD ; Build list of MAS wards and %'s for each Service Point
"RTN","FHPRF1",60,0)
 K ^TMP($J,"S"),^TMP($J,"W")
"RTN","FHPRF1",61,0)
 F P0=0:0 S P0=$O(^FH(119.72,P0)) Q:P0<1  S X=$G(^(P0,0)) I $P(X,"^",3)=FHP,$G(^FH(119.72,P0,"I"))'="Y" S ^TMP($J,"S",P0)=""
"RTN","FHPRF1",62,0)
 ;F K1=0:0 S K1=$O(^FH(119.6,K1)) Q:K1<1  S X=$G(^(K1,0)) D B1
"RTN","FHPRF1",63,0)
 F K1=0:0 S K1=$O(^FH(119.6,K1)) Q:K1<1  S X=$G(^(K1,0)) D B1:($P(X,U,8)=FHSITE!(FHSITE=0))
"RTN","FHPRF1",64,0)
 Q
"RTN","FHPRF1",65,0)
B1 S Z=$P(X,"^",5) I Z,$D(^TMP($J,"S",Z)) S Z1=$P(X,"^",17) S:$P(X,"^",7) Z1=Z1+$P(X,"^",19) S:'Z1 Z1=100 D B2
"RTN","FHPRF1",66,0)
 S Z=$P(X,"^",6) I Z,$D(^TMP($J,"S",Z)) S Z1=$P(X,"^",18) S:Z1="" Z1=100 D B2
"RTN","FHPRF1",67,0)
 Q
"RTN","FHPRF1",68,0)
B2 F L2=0:0 S L2=$O(^FH(119.6,K1,"W",L2)) Q:L2<1  S ZW=+$G(^(L2,0)) I ZW S ^TMP($J,"W",ZW)="",^TMP($J,"S",Z,ZW)=Z1
"RTN","FHPRF1",69,0)
 Q
"RTN","FHPRF1",70,0)
 ;
"RTN","FHPRF1",71,0)
PROSG ;process outpatient data from ^tmp($j global
"RTN","FHPRF1",72,0)
 S FHPLNM=""
"RTN","FHPRF1",73,0)
 S:$G(FHSITE) FHPLNM=$P($G(^FH(119.73,FHSITE,0)),U,1)
"RTN","FHPRF1",74,0)
RECUR ;recurring meals
"RTN","FHPRF1",75,0)
 S FHDT=D1+.999999
"RTN","FHPRF1",76,0)
 S FHTMPS="^TMP($J,""OP"",""R"")"
"RTN","FHPRF1",77,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHPRF1",78,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHPRF1",79,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>FHDT)  D
"RTN","FHPRF1",80,0)
 ..S (FHPDIET,FHLOC,FHSER,FHDIET)="***"
"RTN","FHPRF1",81,0)
 ..S FHIJKDAT=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHPRF1",82,0)
 ..Q:$P(FHIJKDAT,U,19)="C"   ;quit if status is cancelled.
"RTN","FHPRF1",83,0)
 ..S FHDIET=$P(FHIJKDAT,U,3),FHDIET=$O(^FH(111,"B",FHDIET,0))
"RTN","FHPRF1",84,0)
 ..I $G(FHDIET),$D(^FH(111,FHDIET,0)) S FHPDIET=$P(^FH(111,FHDIET,0),U,5)
"RTN","FHPRF1",85,0)
 ..S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHPRF1",86,0)
 ..S:$G(FHLOC) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,5)
"RTN","FHPRF1",87,0)
 ..S:'$G(FHSER) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHPRF1",88,0)
 ..S:'$G(FHSER) FHSER=$O(^FH(119.72,0))
"RTN","FHPRF1",89,0)
 ..I $D(^FH(119.72,FHSER,0)),$P(^FH(119.72,FHSER,0),U,3)'=FHP Q
"RTN","FHPRF1",90,0)
 ..S:$D(^TMP($J,FHSER)) ^TMP($J,FHSER)=^TMP($J,FHSER)+1
"RTN","FHPRF1",91,0)
 ..S:'$D(^TMP($J,FHSER)) ^TMP($J,FHSER)=1
"RTN","FHPRF1",92,0)
 ..I $D(^TMP($J,FHSER,FHPDIET)) D
"RTN","FHPRF1",93,0)
 ...S ^TMP($J,FHSER,FHPDIET)=^TMP($J,FHSER,FHPDIET)+1
"RTN","FHPRF1",94,0)
 ..I '$D(^TMP($J,FHSER,FHPDIET)) D
"RTN","FHPRF1",95,0)
 ...S ^TMP($J,FHSER,FHPDIET)=1
"RTN","FHPRF1",96,0)
 ..I $D(^TMP($J,0,FHPDIET)) S ^TMP($J,0,FHPDIET)=^TMP($J,0,FHPDIET)+1
"RTN","FHPRF1",97,0)
 ..I '$D(^TMP($J,0,FHPDIET)) S ^TMP($J,0,FHPDIET)=1
"RTN","FHPRF1",98,0)
 ;
"RTN","FHPRF1",99,0)
SPEC ;special meals
"RTN","FHPRF1",100,0)
 S FHTMPS="^TMP($J,""OP"",""S"")"
"RTN","FHPRF1",101,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHPRF1",102,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHPRF1",103,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>FHDT)  D
"RTN","FHPRF1",104,0)
 ..S (FHPDIET,FHLOC,FHSER,FHDIET)="***"
"RTN","FHPRF1",105,0)
 ..S FHIJKDAT=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHPRF1",106,0)
 ..S FHDIET=$P(FHIJKDAT,U,4),FHDIET=$O(^FH(111,"B",FHDIET,0))
"RTN","FHPRF1",107,0)
 ..S:$D(^FH(111,FHDIET,0)) FHPDIET=$P(^FH(111,FHDIET,0),U,5)
"RTN","FHPRF1",108,0)
 ..S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHPRF1",109,0)
 ..S:$G(FHLOC) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,5)
"RTN","FHPRF1",110,0)
 ..S:'$G(FHSER) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHPRF1",111,0)
 ..S:'$G(FHSER) FHSER=$O(^FH(119.72,0))
"RTN","FHPRF1",112,0)
 ..I $D(^FH(119.72,FHSER,0)),$P(^FH(119.72,FHSER,0),U,3)'=FHP Q
"RTN","FHPRF1",113,0)
 ..S:$D(^TMP($J,FHSER)) ^TMP($J,FHSER)=^TMP($J,FHSER)+1
"RTN","FHPRF1",114,0)
 ..S:'$D(^TMP($J,FHSER)) ^TMP($J,FHSER)=1
"RTN","FHPRF1",115,0)
 ..I $D(^TMP($J,FHSER,FHPDIET)) D
"RTN","FHPRF1",116,0)
 ...S ^TMP($J,FHSER,FHPDIET)=^TMP($J,FHSER,FHPDIET)+1
"RTN","FHPRF1",117,0)
 ..I '$D(^TMP($J,FHSER,FHPDIET)) D
"RTN","FHPRF1",118,0)
 ...S ^TMP($J,FHSER,FHPDIET)=1
"RTN","FHPRF1",119,0)
 ..I $D(^TMP($J,0,FHPDIET)) S ^TMP($J,0,FHPDIET)=^TMP($J,0,FHPDIET)+1
"RTN","FHPRF1",120,0)
 ..I '$D(^TMP($J,0,FHPDIET)) S ^TMP($J,0,FHPDIET)=1
"RTN","FHPRF1",121,0)
 ;
"RTN","FHPRF1",122,0)
GUEST ;guest meals
"RTN","FHPRF1",123,0)
 S FHTMPS="^TMP($J,""OP"",""G"")"
"RTN","FHPRF1",124,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHPRF1",125,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHPRF1",126,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>FHDT)  D
"RTN","FHPRF1",127,0)
 ..S (FHPDIET,FHLOC,FHSER,FHDIET)="***"
"RTN","FHPRF1",128,0)
 ..S FHIJKDAT=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHPRF1",129,0)
 ..S FHDIET=$P($G(^FH(119.9,1,0)),U,2)   ;default diet from 119.9
"RTN","FHPRF1",130,0)
 ..S FHDIETN=$P(FHIJKDAT,U,6)  ;diet from guest meal
"RTN","FHPRF1",131,0)
 ..S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHPRF1",132,0)
 ..S:$G(FHLOC) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,5)
"RTN","FHPRF1",133,0)
 ..S:'$G(FHSER) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHPRF1",134,0)
 ..S:'$G(FHSER) FHSER=$O(^FH(119.72,0))
"RTN","FHPRF1",135,0)
 ..I $D(^FH(119.72,FHSER,0)),$P(^FH(119.72,FHSER,0),U,3)'=FHP Q
"RTN","FHPRF1",136,0)
 ..S:$D(^TMP($J,FHSER)) ^TMP($J,FHSER)=^TMP($J,FHSER)+1
"RTN","FHPRF1",137,0)
 ..S:'$D(^TMP($J,FHSER)) ^TMP($J,FHSER)=1
"RTN","FHPRF1",138,0)
 ..I $G(FHDIETN),($D(^FH(111,FHDIETN,0))) D
"RTN","FHPRF1",139,0)
 ...S FHPDIET=$P(^FH(111,FHDIETN,0),U,5)
"RTN","FHPRF1",140,0)
 ..I $D(^TMP($J,FHSER,FHPDIET)) D
"RTN","FHPRF1",141,0)
 ...S ^TMP($J,FHSER,FHPDIET)=^TMP($J,FHSER,FHPDIET)+1
"RTN","FHPRF1",142,0)
 ..I '$D(^TMP($J,FHSER,FHPDIET)) D
"RTN","FHPRF1",143,0)
 ...S ^TMP($J,FHSER,FHPDIET)=1
"RTN","FHPRF1",144,0)
 ..I $D(^TMP($J,0,FHPDIET)) S ^TMP($J,0,FHPDIET)=^TMP($J,0,FHPDIET)+1
"RTN","FHPRF1",145,0)
 ..I '$D(^TMP($J,0,FHPDIET)) S ^TMP($J,0,FHPDIET)=1
"RTN","FHPRF1",146,0)
 Q
"RTN","FHPRF1",147,0)
 ;
"RTN","FHPRF1",148,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRF1A")
0^257^B6887397
"RTN","FHPRF1A",1,0)
FHPRF1A ; HISC/REL/RVD - Print Forecast ;4/25/93  16:48 
"RTN","FHPRF1A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRF1A",3,0)
 ;
"RTN","FHPRF1A",4,0)
STRT D NOW^%DTC S NOW=%
"RTN","FHPRF1A",5,0)
 S DTP=D1\1 D DTP^FH S TIM=$P("SUN^MON^TUES^WEDNES^THURS^FRI^SATUR","^",DOW)_"DAY  "_DTP
"RTN","FHPRF1A",6,0)
 S:'$D(FHSITENM) FHSITENM=""
"RTN","FHPRF1A",7,0)
 K S,D,N S L1=50
"RTN","FHPRF1A",8,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0'>0  S X=^FH(119.72,P0,0),N1=$P(X,"^",1),N2=$P(X,"^",2),N3=$P(X,"^",4) S:N3="" N3=$E(N1,1,6) S S(N3,P0)=$J(N3,8)_"^"_N2,L1=L1+8
"RTN","FHPRF1A",9,0)
 S:L1<80 L1=80
"RTN","FHPRF1A",10,0)
 S Z="F O R E C A S T E D   D I E T   C E N S U S"
"RTN","FHPRF1A",11,0)
 S DTP=NOW D DTP^FH W:$E(IOST,1,2)="C-" @IOF W !,DTP,?(L1-$L(Z)\2),Z
"RTN","FHPRF1A",12,0)
 S Z=$P(^FH(119.71,FHP,0),"^",1)
"RTN","FHPRF1A",13,0)
 W !,FHSITENM
"RTN","FHPRF1A",14,0)
 W !,?(L1-$L(Z)\2),Z,!!?(L1-$L(TIM)\2),TIM
"RTN","FHPRF1A",15,0)
 W !!?(L1-31\2),"P R O D U C T I O N   D I E T S",!!
"RTN","FHPRF1A",16,0)
 S X="",FHCNTX=0 F  S X=$O(S(X)) Q:X=""  S FHCNTX=FHCNTX+1
"RTN","FHPRF1A",17,0)
 S FHSP1=31
"RTN","FHPRF1A",18,0)
 S:FHCNTX=5 FHSP1=18
"RTN","FHPRF1A",19,0)
 S:FHCNTX=4 FHSP1=19
"RTN","FHPRF1A",20,0)
 S:FHCNTX=3 FHSP1=25
"RTN","FHPRF1A",21,0)
 S:FHCNTX=2 FHSP1=31
"RTN","FHPRF1A",22,0)
 S:FHCNTX=1 FHSP1=37
"RTN","FHPRF1A",23,0)
 S FHSP2=33
"RTN","FHPRF1A",24,0)
 S:FHCNTX=5 FHSP2=20
"RTN","FHPRF1A",25,0)
 S:FHCNTX=4 FHSP2=21
"RTN","FHPRF1A",26,0)
 S:FHCNTX=3 FHSP2=27
"RTN","FHPRF1A",27,0)
 S:FHCNTX=2 FHSP2=33
"RTN","FHPRF1A",28,0)
 S:FHCNTX=1 FHSP2=39
"RTN","FHPRF1A",29,0)
 W ?FHSP1
"RTN","FHPRF1A",30,0)
 ;
"RTN","FHPRF1A",31,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K=0:0 S K=$O(S(X,K)) Q:K=""  W $P(S(X,K),"^",1)
"RTN","FHPRF1A",32,0)
 W "    Tray  Cafe  Total"
"RTN","FHPRF1A",33,0)
 S:L1>80 L1=80 S LN="",$P(LN,"-",L1)="" W !,LN,! K LN
"RTN","FHPRF1A",34,0)
 F P1=0:0 S P1=$O(^FH(116.2,"AP",P1)) Q:P1<1  F K=0:0 S K=$O(^FH(116.2,"AP",P1,K)) Q:K<1  I $D(^TMP($J,0,K)) D PRO
"RTN","FHPRF1A",35,0)
 W !!,"TOTAL MEALS",?FHSP2 S (N("T"),N("C"),N("D"),N("G"))=""
"RTN","FHPRF1A",36,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K1=0:0 S K1=$O(S(X,K1)) Q:K1=""  S Z=$G(^TMP($J,K1)),TYP=$P(S(X,K1),"^",2) S:Z N(TYP)=N(TYP)+Z W $J(Z,6),"  "
"RTN","FHPRF1A",37,0)
 S:N("D") N("T")=N("T")+N("D") W $J(N("T"),6),$J(N("C"),6),$J(N("T")+N("C"),7) Q
"RTN","FHPRF1A",38,0)
 W !!!,"*** Includes other gratuitous/paid meals.",! K S,D,N,P Q
"RTN","FHPRF1A",39,0)
PRO S (N("T"),N("C"),N("D"),N("G"))="" W !,$E($P($G(^FH(116.2,K,0)),"^",1),1,20),?FHSP2
"RTN","FHPRF1A",40,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K1=0:0 S K1=$O(S(X,K1)) Q:K1=""  S Z=$G(^TMP($J,K1,K)),TYP=$P(S(X,K1),"^",2) S:Z N(TYP)=N(TYP)+Z W $J(Z,6),"  "
"RTN","FHPRF1A",41,0)
 S:N("D") N("T")=N("T")+N("D") W $J(N("T"),6),$J(N("C"),6),$J(N("T")+N("C"),7) Q
"RTN","FHPRF2")
0^258^B3976413
"RTN","FHPRF2",1,0)
FHPRF2 ; HISC/REL - Print Diet Percentages ;4/27/93  13:41 
"RTN","FHPRF2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRF2",3,0)
 S FHP=$O(^FH(119.72,0)) I FHP'<1,$O(^FH(119.72,FHP))<1 S FHP=0 G R1
"RTN","FHPRF2",4,0)
R0 R !!,"Select SERVICE POINT (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0
"RTN","FHPRF2",5,0)
 E  K DIC S DIC="^FH(119.72,",DIC(0)="EMQ" D ^DIC G:Y<1 R0 S FHP=+Y
"RTN","FHPRF2",6,0)
R1 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRF2",7,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRF2",FHLST="FHP" D EN2^FH G KIL
"RTN","FHPRF2",8,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRF2",9,0)
Q1 ; Print Production Diet Percentage
"RTN","FHPRF2",10,0)
 D NOW^%DTC S DTP=% D DTP^FH S PG=0
"RTN","FHPRF2",11,0)
 I FHP S P0=FHP D Q2 Q
"RTN","FHPRF2",12,0)
 F P0=0:0 S P0=$O(^FH(119.72,P0)) Q:P0<1  D Q2
"RTN","FHPRF2",13,0)
 Q
"RTN","FHPRF2",14,0)
Q2 ;
"RTN","FHPRF2",15,0)
 I $G(^FH(119.72,P0,"I"))="Y" Q
"RTN","FHPRF2",16,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?13,"P R O D U C T I O N   D I E T   P E R C E N T A G E S"
"RTN","FHPRF2",17,0)
 S X=$P(^FH(119.72,P0,0),"^",1) W !!?(79-$L(X)\2),X,!!?(79-$L(DTP)\2),DTP
"RTN","FHPRF2",18,0)
 W !!?3,"Diet",?28,"Sun     Mon     Tue     Wed     Thu     Fri     Sat",!
"RTN","FHPRF2",19,0)
 K S F L=1:1:7 S S(L)=0
"RTN","FHPRF2",20,0)
 F P1=0:0 S P1=$O(^FH(116.2,"AP",P1)) Q:P1<1  F NX=0:0 S NX=$O(^FH(116.2,"AP",P1,NX)) Q:NX<1  I $D(^FH(119.72,P0,"A",NX)) S X=^(NX,0) D PR
"RTN","FHPRF2",21,0)
 W !,"Not Eating",?23 F L=1:1:7 S Z=$S(S(L)<100:100-S(L),1:0),S(L)=S(L)+Z W $S('Z:$J("",8),1:$J(Z,8,1))
"RTN","FHPRF2",22,0)
 W !!?3,"Total Sum",?23 F L=1:1:7 W $J(S(L),8,1)
"RTN","FHPRF2",23,0)
 W ! Q
"RTN","FHPRF2",24,0)
PR S NAM=$P(^FH(116.2,NX,0),"^",1) W !,$E(NAM,1,23),?23
"RTN","FHPRF2",25,0)
 F L=1:1:7 S Z=$P(X,"^",L+1),S(L)=S(L)+Z W $S('Z:$J("",8),1:$J(Z,8,1))
"RTN","FHPRF2",26,0)
 Q
"RTN","FHPRF2",27,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRF4")
0^259^B2105934
"RTN","FHPRF4",1,0)
FHPRF4 ; HISC/REL - Print Other Meals ;4/27/93  13:41 
"RTN","FHPRF4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRF4",3,0)
R1 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRF4",4,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRF4",FHLST="" D EN2^FH G KIL
"RTN","FHPRF4",5,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRF4",6,0)
Q1 ; Print Other Meals
"RTN","FHPRF4",7,0)
 D NOW^%DTC S DTP=% D DTP^FH
"RTN","FHPRF4",8,0)
 W:$E(IOST,1,2)="C-" @IOF W !?29,"O T H E R   M E A L S"
"RTN","FHPRF4",9,0)
 W !!?(79-$L(DTP)\2),DTP
"RTN","FHPRF4",10,0)
 F P0=0:0 S P0=$O(^FH(119.72,P0)) Q:P0<1  S X1=0 F NX=0:0 S NX=$O(^FH(119.72,P0,"B",NX)) Q:NX<1  S X=^(NX,0) D PR
"RTN","FHPRF4",11,0)
 W ! Q
"RTN","FHPRF4",12,0)
PR I $G(^FH(119.72,P0,"I"))="Y" Q
"RTN","FHPRF4",13,0)
 G:X1 P1 S Y=$P(^FH(119.72,P0,0),"^",1),X1=1 W !!?(79-$L(Y)\2),Y
"RTN","FHPRF4",14,0)
 W !!,"Diet",?32,"Meal",?40,"Sun  Mon  Tue  Wed  Thu  Fri  Sat"
"RTN","FHPRF4",15,0)
P1 S NAM=$P(^FH(116.2,NX,0),"^",1) W !!,NAM
"RTN","FHPRF4",16,0)
 F L=1:1:3 W:L>1 ! W ?32,$P("Brk^Noon^Even","^",L),?38 F K=1:1:7 S Z=$P(X,"^",K*3-2+L) W $S('Z:$J("",5),1:$J(Z,5))
"RTN","FHPRF4",17,0)
 Q
"RTN","FHPRF4",18,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRI")
0^260^B4887366
"RTN","FHPRI",1,0)
FHPRI ; HISC/REL/NCA - Ingredient Management ;2/23/00  12:44
"RTN","FHPRI",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRI",3,0)
EN1 ; Enter/Edit Unit File
"RTN","FHPRI",4,0)
 S (DIC,DIE)="^FH(119.1,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=119.1 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
"RTN","FHPRI",5,0)
 I Y<11 W *7,!!,"Cannot edit this unit" G EN1
"RTN","FHPRI",6,0)
 S DA=+Y,DR=".01" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.1 D ^DIE,KIL G EN1
"RTN","FHPRI",7,0)
EN2 ; Enter/Edit Vendor File
"RTN","FHPRI",8,0)
 S (DIC,DIE)="^FH(113.2,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=113.2 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN2:Y<1
"RTN","FHPRI",9,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=113.2 D ^DIE,KIL G EN2
"RTN","FHPRI",10,0)
EN3 ; Enter/Edit Ingredients
"RTN","FHPRI",11,0)
 S (DIC,DIE)="^FHING(",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=113 W ! D ^DIC K DIC,DLAYGO G KIL:$D(DTOUT),E31:U[X,EN3:Y<1
"RTN","FHPRI",12,0)
 S DA=+Y,DR=".01;31;1;3;2;4;29//^S X=DT;8;6;5;7;23;S REC=X;24;28//^S X=$S(REC=""LB"":1,1:"""");27;11;26;20;99;25;S:X'=""Y"" Y=0;30//^S X=DT;10" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=113 D ^DIE,KIL G EN3
"RTN","FHPRI",13,0)
E31 K DIE D ^FHREC3 G KIL
"RTN","FHPRI",14,0)
EN4 ; Enter/Edit Storage Locations
"RTN","FHPRI",15,0)
 S (DIC,DIE)="^FH(113.1,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=113.1 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN4:Y<1
"RTN","FHPRI",16,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=113.1 D ^DIE,KIL G EN4
"RTN","FHPRI",17,0)
EN6 ; List Units
"RTN","FHPRI",18,0)
 W ! S L=0,DIC="^FH(119.1,",FLDS=".01",BY="NAME"
"RTN","FHPRI",19,0)
 S FR="",TO="",DHD="UNITS" D EN1^DIP,RSET Q
"RTN","FHPRI",20,0)
EN8 ; List Storage Locations
"RTN","FHPRI",21,0)
 W ! S L=0,DIC="^FH(113.1,",FLDS="[FHPSTO]",BY="PRINT ORDER,NAME"
"RTN","FHPRI",22,0)
 S FR="@",TO="",DHD="STORAGE LOCATIONS" D EN1^DIP,RSET Q
"RTN","FHPRI",23,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHPRI",24,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRI1")
0^261^B6393491
"RTN","FHPRI1",1,0)
FHPRI1 ; HISC/REL - Find Recipes with Ingredient ;4/27/93  13:31 
"RTN","FHPRI1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRI1",3,0)
 S (DIC,DIE)="^FHING(",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:U[X!$D(DTOUT),FHPRI1:Y<1 S FHX1=+Y
"RTN","FHPRI1",4,0)
L0 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRI1",5,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRI1",FHLST="FHX1" D EN2^FH G KIL
"RTN","FHPRI1",6,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRI1",7,0)
Q1 ; Print Recipes with selected Ingredient
"RTN","FHPRI1",8,0)
 K ^TMP($J) D NOW^%DTC S DTP=% D DTP^FH
"RTN","FHPRI1",9,0)
 F R1=0:0 S R1=$O(^FH(114,R1)) Q:R1<1  F I1=0:0 S I1=$O(^FH(114,R1,"I",I1)) Q:I1<1  S X=$G(^FH(114,R1,"I",I1,0)) I +X=FHX1 S ^TMP($J,"R",R1)=$P(X,"^",2)
"RTN","FHPRI1",10,0)
 F M1=0:0 S M1=$O(^FH(116.1,M1)) Q:M1<1  F I1=0:0 S I1=$O(^FH(116.1,M1,"RE",I1)) Q:I1<1  S R1=+$G(^FH(116.1,M1,"RE",I1,0)) I $D(^TMP($J,"R",R1)) S ^TMP($J,"R",R1,"M",M1)="" D Q2
"RTN","FHPRI1",11,0)
 S X2=^FHING(FHX1,0),N1=$P(X2,"^",1),UNT=$P(X2,"^",16)
"RTN","FHPRI1",12,0)
 S PG=0,LN="",$P(LN,"-",80)="" D HDR
"RTN","FHPRI1",13,0)
 F R1=0:0 S R1=$O(^TMP($J,"R",R1)) Q:R1<1  S Y=^(R1) D P0
"RTN","FHPRI1",14,0)
 W ! Q
"RTN","FHPRI1",15,0)
Q2 F C1=0:0 S C1=$O(^FH(116,C1)) Q:C1<1  F D1=0:0 S D1=$O(^FH(116,C1,"DA",D1)) Q:D1<1  D Q3
"RTN","FHPRI1",16,0)
 Q
"RTN","FHPRI1",17,0)
Q3 S X=$G(^FH(116,C1,"DA",D1,0)) Q:X=""
"RTN","FHPRI1",18,0)
 F K1=1:1:3 S Z=$P(X,"^",K1+1) I Z,$D(^TMP($J,"R",R1,"M",Z)) S ^TMP($J,"R",R1,"M",Z,"C",C1_"~"_D1_"~"_K1)=""
"RTN","FHPRI1",19,0)
 Q
"RTN","FHPRI1",20,0)
P0 D:$Y>(IOSL-6) HDR S R2=^FH(114,R1,0) D EN2^FHREC1
"RTN","FHPRI1",21,0)
 W !,$P(R2,"^",1),?32,$J($P(R2,"^",2),5),?45,Y
"RTN","FHPRI1",22,0)
 F M1=0:0 S M1=$O(^TMP($J,"R",R1,"M",M1)) Q:M1<1  S X=$P($G(^FH(116.1,M1,0)),"^",1) I X'="" D:$Y>(IOSL-6) HDR W !?3,"Meal:  ",X D P1
"RTN","FHPRI1",23,0)
 Q
"RTN","FHPRI1",24,0)
P1 S A1="" F C1=0:0 S A1=$O(^TMP($J,"R",R1,"M",M1,"C",A1)) Q:A1=""  D P2
"RTN","FHPRI1",25,0)
 Q
"RTN","FHPRI1",26,0)
P2 S C1=+A1,D1=$P(A1,"~",2),K1=$P(A1,"~",3) D:$Y>(IOSL-6) HDR
"RTN","FHPRI1",27,0)
 W !?6,"Cycle: ",$P(^FH(116,C1,0),"^",1),", Day ",D1,", ",$S(K1=1:"Breakfast",K1=2:"Noon",1:"Evening") Q
"RTN","FHPRI1",28,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,DTP,?24,"I N G R E D I E N T   U S A G E",?73,"Page ",PG
"RTN","FHPRI1",29,0)
 W !!?(80-$L(N1)\2),N1
"RTN","FHPRI1",30,0)
 W !!,"Recipe",?30,"# Portions",?45,"Amount",!,LN Q
"RTN","FHPRI1",31,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRI2")
0^262^B14177573
"RTN","FHPRI2",1,0)
FHPRI2 ; HISC/REL/NCA - Ingredient Lists ;3/6/95  16:04
"RTN","FHPRI2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRI2",3,0)
LIS1 ; List Ingredients - Recipe data
"RTN","FHPRI2",4,0)
 S FHX1=1 G L0
"RTN","FHPRI2",5,0)
LIS2 ; List Ingredients - Purchasing data
"RTN","FHPRI2",6,0)
 S FHX1=2 G L0
"RTN","FHPRI2",7,0)
LIS3 ; List Ingredients - Nutrient data
"RTN","FHPRI2",8,0)
 S FHX1=3 G L0
"RTN","FHPRI2",9,0)
L0 R !!,"Sort: (A=Alphabetically F=Food Group V=Vendor) F// ",FHX2:DTIME G:'$T!(FHX2="^") KIL S:FHX2="" FHX2="F" I "afv"[FHX2 S X=FHX2 D TR^FH S FHX2=X
"RTN","FHPRI2",10,0)
 I FHX2'?1U!("AFV"'[FHX2) W *7,"  Enter A, F or V" G L0
"RTN","FHPRI2",11,0)
L1 W !!,"The list requires a 132 column printer.",!
"RTN","FHPRI2",12,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRI2",13,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRI2",FHLST="FHX1^FHX2" D EN2^FH G KIL
"RTN","FHPRI2",14,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRI2",15,0)
Q1 ; List Ingredients
"RTN","FHPRI2",16,0)
 D NOW^%DTC S DTP=% D DTP^FH I FHX2'="A" G Q2
"RTN","FHPRI2",17,0)
 S PG=0 D HDR
"RTN","FHPRI2",18,0)
 S NX="" F K=0:0 S NX=$O(^FHING("B",NX)) Q:NX=""  F D0=0:0 S D0=$O(^FHING("B",NX,D0)) Q:D0<1  D P0
"RTN","FHPRI2",19,0)
 W ! Q
"RTN","FHPRI2",20,0)
Q2 S PG=0,OLD="" K ^TMP($J)
"RTN","FHPRI2",21,0)
 F K=0:0 S K=$O(^FHING(K)) Q:K<1  S X=^(K,0) D Q3
"RTN","FHPRI2",22,0)
 S GRP="" F K=0:0 S GRP=$O(^TMP($J,GRP)) Q:GRP=""  S NAM="" F NX=0:0 S NAM=$O(^TMP($J,GRP,NAM)) Q:NAM=""  F D0=0:0 S D0=$O(^TMP($J,GRP,NAM,D0)) Q:D0<1  D:GRP'=OLD H0 D P0
"RTN","FHPRI2",23,0)
 W ! Q
"RTN","FHPRI2",24,0)
Q3 S NAM=$P(X,"^",1) I FHX2="F" S GRP=$P(X,"^",13) S:GRP<1 GRP=9
"RTN","FHPRI2",25,0)
 E  S GRP=$P(X,"^",4) S:GRP GRP=$P($G(^FH(113.2,GRP,0)),"^",1) S:GRP="" GRP="~~~"
"RTN","FHPRI2",26,0)
 S ^TMP($J,GRP,$E(NAM,1,30),K)="" Q
"RTN","FHPRI2",27,0)
P0 D:$Y>(IOSL-8) HDR S X=$G(^FHING(D0,0))
"RTN","FHPRI2",28,0)
 G P1:FHX1=1,P2:FHX1=2,P3:FHX1=3 Q
"RTN","FHPRI2",29,0)
P1 W !,$P(X,"^",1) S Y=$P(X,"^",3),Y=$E(Y,$L(Y)-3,16) W:Y'="" ?53,Y
"RTN","FHPRI2",30,0)
 S Y=$P(X,"^",12),Y=$S(Y="":Y,$D(^FH(113.1,Y,0))#2:$P(^(0),"^",2),1:Y) W:Y'="" ?61,Y
"RTN","FHPRI2",31,0)
 W ?70,$P(X,"^",20),?75,$P(X,"^",5) S Y=$P(X,"^",8) W:Y'="" ?81,$J(+Y,10)
"RTN","FHPRI2",32,0)
 S Y=$P(X,"^",6) S Y=$S(Y="":Y,$D(^FH(119.1,Y,0))#2:$P(^(0),"^",1),1:Y) W:Y'="" ?94,$E(Y,1,15)
"RTN","FHPRI2",33,0)
 S Y=$P(X,"^",17) W:Y'="" ?113,$J(+Y,10)
"RTN","FHPRI2",34,0)
 S Y=$P(X,"^",16) W:Y'="" ?126,Y Q
"RTN","FHPRI2",35,0)
P2 W !,$E($P(X,"^",1),1,49),?50,$P(X,"^",2),?73,$P(X,"^",3),?92,$P(X,"^",13)
"RTN","FHPRI2",36,0)
 S Y=$P(X,"^",4) S Y=$S(Y="":Y,$D(^FH(113.2,Y,0))#2:$P(^(0),"^",1),1:Y) W:Y'="" ?95,$E(Y,1,17)
"RTN","FHPRI2",37,0)
 W ?114,$P(X,"^",5)
"RTN","FHPRI2",38,0)
 S Y=$P(X,"^",7) W:Y'="" ?117,$J(Y,6,0)
"RTN","FHPRI2",39,0)
 S Y=$P(X,"^",9) W:Y'="" ?123,$J(Y,8,3) Q
"RTN","FHPRI2",40,0)
P3 W !,$E($P(X,"^",1),1,50) S Y=$P(X,"^",21),Y=$S(Y="":Y,$D(^FHNU(Y,0))#2:$E($P(^(0),"^",1),1,40),1:Y) W:Y'="" ?53,Y
"RTN","FHPRI2",41,0)
 S Y=$P(X,"^",16) W:Y'="" ?110,Y
"RTN","FHPRI2",42,0)
 S Y=$P(X,"^",22) W:Y'="" ?120,$J(Y,7,3) Q
"RTN","FHPRI2",43,0)
H0 S OLD=GRP
"RTN","FHPRI2",44,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 G H1:FHX1=1,H2:FHX1=2,H3:FHX1=3 Q
"RTN","FHPRI2",45,0)
H1 W !,DTP,?44,"I N G R E D I E N T   R E C I P E   D A T A",?124,"Page ",PG
"RTN","FHPRI2",46,0)
 D:FHX2'="A" H5
"RTN","FHPRI2",47,0)
 W !!,"NAME",?53,"STOCK",?60,"LOC'N",?68,"THAW",?75,"U/P",?85,"ISS/UP",?94,"ISSUE",?116,"REC/ISS",?126,"REC" G H4
"RTN","FHPRI2",48,0)
H2 W !,DTP,?40,"I N G R E D I E N T   P U R C H A S I N G   D A T A",?124,"Page ",PG
"RTN","FHPRI2",49,0)
 D:FHX2'="A" H5
"RTN","FHPRI2",50,0)
 W !!,"NAME",?50,"SUPPLY DESCRIPTION",?73,"STOCK NUMBER",?91,"GRP VENDOR",?114,"U/P",?119,"MULT",?126,"PRICE" G H4
"RTN","FHPRI2",51,0)
H3 W !,DTP,?42,"I N G R E D I E N T   N U T R I E N T   D A T A",?124,"Page ",PG
"RTN","FHPRI2",52,0)
 D:FHX2'="A" H5
"RTN","FHPRI2",53,0)
 W !!,"NAME",?53,"NUTRIENT DATA REFERENCE",?108,"REC UNIT",?119,"WT IN LBS."
"RTN","FHPRI2",54,0)
H4 W !,"-----------------------------------------------------------------------------------------------------------------------------------",! Q
"RTN","FHPRI2",55,0)
H5 I FHX2="F" S Y="Food Group: "_$P("MEAT PRODUCTS^MILK PRODUCTS^FRUITS & VEGETABLES^BREADS^COMMERCIAL NUTRITION SUPPLEMENTS^MISCELLANEOUS^^^UNCLASSIFIED","^",GRP)
"RTN","FHPRI2",56,0)
 E  S Y="Vendor: "_$S(GRP'="~~~":GRP,1:"Unknown")
"RTN","FHPRI2",57,0)
 W !!?(131-$L(Y)\2),Y Q
"RTN","FHPRI2",58,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRI3")
0^263^B2620613
"RTN","FHPRI3",1,0)
FHPRI3 ; HISC/REL - List Vendors ;4/27/93  13:36 
"RTN","FHPRI3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRI3",3,0)
L1 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRI3",4,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRI3",FHLST="" D EN2^FH G KIL
"RTN","FHPRI3",5,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRI3",6,0)
Q1 ; Print Vendors List
"RTN","FHPRI3",7,0)
 D NOW^%DTC S DTP=% D DTP^FH S PG=0,Y="" D HDR
"RTN","FHPRI3",8,0)
 S NX="" F K=0:0 S NX=$O(^FH(113.2,"B",NX)) Q:NX=""!(Y="^")  F D0=0:0 S D0=$O(^FH(113.2,"B",NX,D0)) Q:D0<1!(Y="^")  D Q2
"RTN","FHPRI3",9,0)
 W ! Q
"RTN","FHPRI3",10,0)
Q2 S X=$G(^FH(113.2,D0,0)) Q:X=""  D:$Y>(IOSL-11) HDR Q:Y="^"
"RTN","FHPRI3",11,0)
 K A S N=0 F L=1:1:4 S A(L)="",Z=$P(X,"^",L+1) I Z'="" S N=N+1,A(N)=Z
"RTN","FHPRI3",12,0)
 S N=4 F L=5,6 S A(L)="",Z=$P(X,"^",L+1) I Z'="" S N=N+1,A(N)=Z
"RTN","FHPRI3",13,0)
 W !,$P(X,"^",1) W:A(1)'="" ?40,A(1)
"RTN","FHPRI3",14,0)
 I A(2)'=""!(A(5)'="") W ! W:A(5)'="" ?5,A(5) W:A(2)'="" ?40,A(2)
"RTN","FHPRI3",15,0)
 I A(3)'=""!(A(6)'="") W ! W:A(6)'="" ?5,A(6) W:A(3)'="" ?40,A(3)
"RTN","FHPRI3",16,0)
 W:A(4)'="" !?40,A(4) W ! Q
"RTN","FHPRI3",17,0)
HDR I PG,IOST?1"C".E W *7 R Y:DTIME S:'$T Y="^" Q:Y="^"
"RTN","FHPRI3",18,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","FHPRI3",19,0)
 S PG=PG+1 W !,DTP,?29,"V E N D O R   L I S T",?72,"Page ",PG
"RTN","FHPRI3",20,0)
 W !!,"NAME",?40,"ADDRESS"
"RTN","FHPRI3",21,0)
 W !,"-------------------------------------------------------------------------------",! Q
"RTN","FHPRI3",22,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRO")
0^264^B10200393
"RTN","FHPRO",1,0)
FHPRO ; HISC/REL/RTK - Food Production Manager ;3/8/95  13:28
"RTN","FHPRO",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRO",3,0)
EN2 ; Enter/Edit Nutrition Locations (Inpatient Wards/Outpatient Clinics)
"RTN","FHPRO",4,0)
 W ! K DIR,DIC S DIR("A")="Select WARD or OUTPATIENT Location: "
"RTN","FHPRO",5,0)
 S DIR(0)="SAO^W:Ward Location;O:Outpatient Location" D ^DIR Q:$D(DIRUT)
"RTN","FHPRO",6,0)
 I Y'=-1 S FHANS=Y
"RTN","FHPRO",7,0)
 I FHANS="W" D EN2WRD Q
"RTN","FHPRO",8,0)
 I FHANS="O" D EN2OL Q
"RTN","FHPRO",9,0)
 Q
"RTN","FHPRO",10,0)
 ;K DIC S (DIC,DIE)="^FH(119.6,",DIC(0)="AEQLM",DLAYGO=119.6
"RTN","FHPRO",11,0)
 ;S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN2:Y<1
"RTN","FHPRO",12,0)
 ;S DA=+Y,DR=".01:3;S:X="""" Y=4;3.5;4;S:X="""" Y=5;4.5;5;S:'X Y=6;5.5;6:29;103:106;99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.6 D ^DIE,KIL G EN2
"RTN","FHPRO",13,0)
EN2WRD ;Ward locations
"RTN","FHPRO",14,0)
 K DIC S (DIC,DIE)="^FH(119.6,",DIC(0)="AEQLM",DLAYGO=119.6
"RTN","FHPRO",15,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN2:Y<1
"RTN","FHPRO",16,0)
 S DA=+Y,DR=".01:2.5;3;S:X="""" Y=4;3.5;4;S:X="""" Y=5;4.5;5;S:'X Y=6;5.5;6:29;99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.6 D ^DIE,KIL G EN2
"RTN","FHPRO",17,0)
EN2OL ;Outpatient locations
"RTN","FHPRO",18,0)
 K DIC S (DIC,DIE)="^FH(119.6,",DIC(0)="AEQLM",DLAYGO=119.6
"RTN","FHPRO",19,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN2:Y<1
"RTN","FHPRO",20,0)
 S DA=+Y,DR=".01;2.6;3;S:X="""" Y=4;3.5;4;S:X="""" Y=5;4.5;5;S:'X Y=6;5.5;6;103:106;11;20:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.6 D ^DIE,KIL G EN2
"RTN","FHPRO",21,0)
EN3 ; Enter/Edit Production Diets
"RTN","FHPRO",22,0)
 K DIC S (DIC,DIE)="^FH(116.2,",DIC(0)="AEQLM",DLAYGO=116.2
"RTN","FHPRO",23,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN3:Y<1
"RTN","FHPRO",24,0)
 S DA=+Y,DR=$S(DA=1:"1:8",1:".01:7.5;10;S:X'=""Y"" Y=8;11;8;12:99") S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=116.2 D ^DIE I '$D(DA) D KIL G EN3
"RTN","FHPRO",25,0)
 S:$O(^FH(116.2,DA,"R",0))<1 $P(^FH(116.2,DA,0),"^",4)="N" D KIL G EN3
"RTN","FHPRO",26,0)
EN4 ; List Production Diets
"RTN","FHPRO",27,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHPRO",28,0)
 W ! S L=0,DIC="^FH(116.2,",FLDS="[FHPROD]",BY="8,.01"
"RTN","FHPRO",29,0)
 S FR="@",TO="",DHD="PRODUCTION DIETS" D EN1^DIP,RSET Q
"RTN","FHPRO",30,0)
EN5 ; Enter/Edit Production Facilities
"RTN","FHPRO",31,0)
 K DIC S (DIC,DIE)="^FH(119.71,",DIC(0)="AEQLM",DLAYGO=119.71
"RTN","FHPRO",32,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN5:Y<1
"RTN","FHPRO",33,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.71 D ^DIE,KIL G EN5
"RTN","FHPRO",34,0)
EN6 ; Enter/Edit Service Points
"RTN","FHPRO",35,0)
 K DIC S (DIC,DIE)="^FH(119.72,",DIC(0)="AEQLM",DLAYGO=119.72
"RTN","FHPRO",36,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN6:Y<1
"RTN","FHPRO",37,0)
 S DA=+Y S DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.72 D ^DIE I '$D(DA) D KIL G EN6
"RTN","FHPRO",38,0)
 S DA(1)=DA S DIK="^FH(119.72,DA(1),""A""," F DA=0:0 S DA=$O(^FH(119.72,DA(1),"A",DA)) Q:DA'>0  I $P($G(^(DA,0)),"^",2,8)?."^" D ^DIK
"RTN","FHPRO",39,0)
 S DIK="^FH(119.72,DA(1),""B""," F DA=0:0 S DA=$O(^FH(119.72,DA(1),"B",DA)) Q:DA'>0  I $P($G(^(DA,0)),"^",2,22)?."^" D ^DIK
"RTN","FHPRO",40,0)
 D KIL G EN6
"RTN","FHPRO",41,0)
EN7 ; Enter/Edit Communication Offices
"RTN","FHPRO",42,0)
 K DIC S (DIC,DIE)="^FH(119.73,",DIC(0)="AEQLM",DLAYGO=119.73
"RTN","FHPRO",43,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN7:Y<1
"RTN","FHPRO",44,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.73 D ^DIE,KIL G EN7
"RTN","FHPRO",45,0)
EN8 ; Enter/Edit Supplemental Feeding Sites
"RTN","FHPRO",46,0)
 K DIC S (DIC,DIE)="^FH(119.74,",DIC(0)="AEQLM",DLAYGO=119.74
"RTN","FHPRO",47,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN8:Y<1
"RTN","FHPRO",48,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.74 D ^DIE,KIL G EN8
"RTN","FHPRO",49,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHPRO",50,0)
KIL G KILL^XUSCLEAN
"RTN","FHPRO1")
0^265^B14807409
"RTN","FHPRO1",1,0)
FHPRO1 ; HISC/REL/RVD - Production Processing ;3/6/95  15:45
"RTN","FHPRO1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRO1",3,0)
 ;RVD 4/6/04 - outpatient meal.
"RTN","FHPRO1",4,0)
 ;
"RTN","FHPRO1",5,0)
 D DIV^FHOMUTL G:'$D(FHSITE) KIL
"RTN","FHPRO1",6,0)
 S FHP=$O(^FH(119.71,0)) I FHP'<1,$O(^FH(119.71,FHP))<1 G F1
"RTN","FHPRO1",7,0)
F0 R !!,"Select PRODUCTION FACILITY: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHPRO1",8,0)
 K DIC S DIC="^FH(119.71,",DIC(0)="EMQ" D ^DIC G:Y<1 F0 S FHP=+Y
"RTN","FHPRO1",9,0)
F1 S %DT("A")="Select Date: ",%DT="AEX" W ! D ^%DT G KIL:"^"[X!$D(DTOUT),F1:Y<1 S (X1,D1)=+Y
"RTN","FHPRO1",10,0)
 D E1^FHPRC1 I FHCY<1 W *7,!!,"No MENU CYCLE Defined for that Date!" G F1
"RTN","FHPRO1",11,0)
 I '$D(^FH(116,FHCY,"DA",FHDA,0)) W *7,!!,"MENU CYCLE DAY Not Defined for that Date!" G F1
"RTN","FHPRO1",12,0)
R1 R !!,"Select MEAL (B,N,E or ALL): ",MEAL:DTIME G:'$T!("^"[MEAL) KIL S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="A"
"RTN","FHPRO1",13,0)
 I "BNEA"'[MEAL!(MEAL'?1U) W *7,!,"Select B for Breakfast, N for Noon, or E for Evening or ALL for all meals" G R1
"RTN","FHPRO1",14,0)
 S FHDA=^FH(116,FHCY,"DA",FHDA,0)
"RTN","FHPRO1",15,0)
 I $D(^FH(116.3,D1,0)) S X=^(0) F LL=2:1:4 I $P(X,"^",LL) S $P(FHDA,"^",LL)=$P(X,"^",LL)
"RTN","FHPRO1",16,0)
 I MEAL'="A" S FHX1=$P(FHDA,"^",$F("BNE",MEAL)) I 'FHX1 W *7,!!,"*** NO MENU DEFINED FOR THIS MEAL ***" G KIL
"RTN","FHPRO1",17,0)
R2 R !!,"Do you want PRODUCTION Summary? (Y/N): ",FHP1:DTIME G:'$T!("^"[FHP1) KIL S X=FHP1 D TR^FH S FHP1=X I $P("YES",FHP1,1)'="",$P("NO",FHP1,1)'="" W *7,"  Enter YES or NO" G R2
"RTN","FHPRO1",18,0)
 S FHP1=$E(FHP1,1)
"RTN","FHPRO1",19,0)
R3 R !!,"Do you want MEAL SERVICE Summary? (Y/N): ",FHP2:DTIME G:'$T!("^"[FHP2) KIL S X=FHP2 D TR^FH S FHP2=X I $P("YES",FHP2,1)'="",$P("NO",FHP2,1)'="" W *7,"  Enter YES or NO" G R3
"RTN","FHPRO1",20,0)
 S FHP2=$E(FHP2,1)
"RTN","FHPRO1",21,0)
R4 R !!,"Do you want RECIPE PREPARATION Sheet? (Y/N): ",FHP3:DTIME G:'$T!("^"[FHP3) KIL S X=FHP3 D TR^FH S FHP3=X I $P("YES",FHP3,1)'="",$P("NO",FHP3,1)'="" W *7,"  Enter YES or NO" G R4
"RTN","FHPRO1",22,0)
 S FHP3=$E(FHP3,1)
"RTN","FHPRO1",23,0)
R5 R !!,"Do you want STOREROOM REQUISITION Sheet? (Y/N): ",FHP4:DTIME G:'$T!("^"[FHP4) KIL S X=FHP4 D TR^FH S FHP4=X I $P("YES",FHP4,1)'="",$P("NO",FHP4,1)'="" W *7,"  Enter YES or NO" G R5
"RTN","FHPRO1",24,0)
 S FHP4=$E(FHP4,1)
"RTN","FHPRO1",25,0)
R7 R !!,"Do you want PRINTED RECIPES? (Y/N) N// ",FHP5:DTIME G:'$T!(FHP5["^") KIL S:FHP5="" FHP5="N" S X=FHP5 D TR^FH S FHP5=X I $P("YES",FHP5,1)'="",$P("NO",FHP5,1)'="" W *7,"  Enter YES or NO" G R7
"RTN","FHPRO1",26,0)
 S FHP5=$E(FHP5,1)
"RTN","FHPRO1",27,0)
R8 R !!,"Use CENSUS or FORECAST? (C OR F): ",FHP6:DTIME G:'$T!("^"[FHP6) KIL S X=FHP6 D TR^FH S FHP6=X I $P("CENSUS",FHP6,1)'="",$P("FORECAST",FHP6,1)'="" W *7," Enter C or F" G R8
"RTN","FHPRO1",28,0)
 K M2 S FHP6=$E(FHP6,1),FHP6=$S(FHP6="C":"Census",1:"Forecast") G:FHP6["C" L0
"RTN","FHPRO1",29,0)
 W !!,"Forecasting ..." D Q2^FHPRF1
"RTN","FHPRO1",30,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  D C0 G:X="^" KIL
"RTN","FHPRO1",31,0)
L0 W !!,"The report requires a 132 column printer.",!
"RTN","FHPRO1",32,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRO1",33,0)
 I $D(IO("Q")) S FHPGM="^FHPRO2",FHLST="D1^MEAL^FHDA^FHP^FHP1^FHP2^FHP3^FHP4^FHP5^FHP6^M2(^FHSITE^FHSITENM" D EN2^FH G KIL
"RTN","FHPRO1",34,0)
 U IO D ^FHPRO2 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRO1",35,0)
C0 S S1=^TMP($J,P0)
"RTN","FHPRO1",36,0)
 W !!?5,"Service Point: ",$P(^FH(119.72,P0,0),"^",1)
"RTN","FHPRO1",37,0)
C1 W !?5,"Forecast Census: ",S1," // " R X:DTIME I '$T!(X["^") S X="^" Q
"RTN","FHPRO1",38,0)
 S:X="" X=S1 I X'?1N.N!(X>9999) W *7,"  Must be a number less than 9999" G C1
"RTN","FHPRO1",39,0)
 S M2(P0)=X Q
"RTN","FHPRO1",40,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRO2")
0^266^B30473092
"RTN","FHPRO2",1,0)
FHPRO2 ; HISC/REL/NCA/RVD - Forecast/Census Calculations ;1/23/98  16:10
"RTN","FHPRO2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRO2",3,0)
 S X=D1 D DOW^%DTC S DOW=Y+1 D NOW^%DTC S NOW=%,PG=0
"RTN","FHPRO2",4,0)
 I MEAL'="A" G Q2
"RTN","FHPRO2",5,0)
 F MEAL="B","N","E" D Q2
"RTN","FHPRO2",6,0)
 Q
"RTN","FHPRO2",7,0)
Q2 S K3=$F("BNE",MEAL)-1,FHX1=$P(FHDA,"^",K3+1) Q:'FHX1  D CEN:FHP6["C",FOR:FHP6["F",LIS
"RTN","FHPRO2",8,0)
 G ^FHPRO3
"RTN","FHPRO2",9,0)
FOR ; Calculate for Forecast
"RTN","FHPRO2",10,0)
 K ^TMP($J) F P0=0:0 S P0=$O(M2(P0)) Q:P0<1  S ^TMP($J,P0)=M2(P0)
"RTN","FHPRO2",11,0)
 K D F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  S S1=^(P0) D PER S ^TMP($J,P0)=S0
"RTN","FHPRO2",12,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  I $D(^FH(119.72,P0,"B")) D F1
"RTN","FHPRO2",13,0)
 F LL=0:0 S LL=$O(D(LL)) Q:LL<1  S ^TMP($J,0,LL)=D(LL)
"RTN","FHPRO2",14,0)
 K D Q
"RTN","FHPRO2",15,0)
F1 F LL=0:0 S LL=$O(^FH(119.72,P0,"B",LL)) Q:LL<1  S Y=$P(^(LL,0),"^",3*DOW-2+K3) I Y>0 S D(LL)=$G(D(LL))+Y,^TMP($J,P0)=^TMP($J,P0)+Y,^TMP($J,P0,LL)=$G(^TMP($J,P0,LL))+Y
"RTN","FHPRO2",16,0)
 Q
"RTN","FHPRO2",17,0)
PER S S0=0 F K=0:0 S K=$O(^FH(119.72,P0,"A",K)) Q:K<1  S Z=$P($G(^(K,0)),"^",DOW+1),Z=$J(Z*S1/100,0,0) I Z S ^TMP($J,P0,K)=Z,S0=S0+Z,D(K)=$G(D(K))+Z
"RTN","FHPRO2",18,0)
 Q
"RTN","FHPRO2",19,0)
LIS S DTP=D1\1 D DTP^FH S TIM=$P("SUN^MON^TUES^WEDNES^THURS^FRI^SATUR","^",DOW)_"DAY  "_DTP_"  "_$P("BREAKFAST^NOON^EVENING","^",K3),DTP=NOW D DTP^FH
"RTN","FHPRO2",20,0)
 K S,D,N S L1=38
"RTN","FHPRO2",21,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0=""  S X=^FH(119.72,P0,0),N1=$P(X,"^",1),N2=$P(X,"^",2),N3=$P(X,"^",4) S:N3="" N3=$E(N1,1,6) S S(N3,P0)=$J(N3,8)_"^"_N2,L1=L1+14
"RTN","FHPRO2",22,0)
 S:L1<80 L1=80
"RTN","FHPRO2",23,0)
 S Z=$S(FHP6["F":"F O R E C A S T E D",1:"A C T U A L")_"   D I E T   C E N S U S"
"RTN","FHPRO2",24,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHPRO2",25,0)
 S DTP=NOW D DTP^FH W !,DTP,?(L1-$L(Z)\2),Z,?(L1-7),"Page ",PG
"RTN","FHPRO2",26,0)
 ;W !,FHSITENM
"RTN","FHPRO2",27,0)
 S Z=$P(^FH(119.71,FHP,0),"^",1)
"RTN","FHPRO2",28,0)
 W !!?(L1-$L(Z)\2),Z,!!?(L1-$L(TIM)\2),TIM
"RTN","FHPRO2",29,0)
 W !!?(L1-31\2),"P R O D U C T I O N   D I E T S",!!?29
"RTN","FHPRO2",30,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K=0:0 S K=$O(S(X,K)) Q:K=""  W $P(S(X,K),"^",1)
"RTN","FHPRO2",31,0)
 W "    Total" S LN="",$P(LN,"-",L1+1)="" W !,LN,! K LN
"RTN","FHPRO2",32,0)
 F P1=0:0 S P1=$O(^FH(116.2,"AP",P1)) Q:P1<1  F K=0:0 S K=$O(^FH(116.2,"AP",P1,K)) Q:K<1  I $D(^TMP($J,0,K)) D PRO
"RTN","FHPRO2",33,0)
 I FHP6["C" W !?3,"N P O",?31 S K=.5 D P1 K NP(.5)
"RTN","FHPRO2",34,0)
 I FHP6["C" W !?3,"P A S S",?31 S K=.8 D P1 K NP(.8)
"RTN","FHPRO2",35,0)
 I FHP6["C" W !?3,"TF Only",?31 S K=.7 D P1 K NP(.7)
"RTN","FHPRO2",36,0)
 I FHP6["C" W !?3,"No Order",?31 S K=.6 D P1 K NP(.6)
"RTN","FHPRO2",37,0)
 W !!,"TOTAL MEALS",?31 S TOT=""
"RTN","FHPRO2",38,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K1=0:0 S K1=$O(S(X,K1)) Q:K1=""  S Z=$G(^TMP($J,K1)) S:Z TOT=TOT+Z W $J(Z,6),"  "
"RTN","FHPRO2",39,0)
 W $J(TOT,7) Q
"RTN","FHPRO2",40,0)
 W !!!,"*** Includes other gratuitous/paid meals.",! K S,D,N,P Q
"RTN","FHPRO2",41,0)
PRO W !,$P($G(^FH(116.2,K,0)),"^",1),?31
"RTN","FHPRO2",42,0)
P1 S (TOT,X)="" F  S X=$O(S(X)) Q:X=""  F K1=0:0 S K1=$O(S(X,K1)) Q:K1=""  S Z=$S(K>.9:$G(^TMP($J,K1,K)),1:$G(NP(K,K1))) S:Z TOT=TOT+Z W $J(Z,6),"  "
"RTN","FHPRO2",43,0)
 W $J(TOT,7) Q
"RTN","FHPRO2",44,0)
CEN ; Calculate for Census
"RTN","FHPRO2",45,0)
 S X=D1_"@"_$S(MEAL="B":"7AM",MEAL="N":"11AM",1:"4PM"),%DT="TX" D ^%DT S TIM=Y
"RTN","FHPRO2",46,0)
 K D,P F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  S X=^(WRD,0) D
"RTN","FHPRO2",47,0)
 .I '$G(FHSITE) D WRD^FHORD9 Q
"RTN","FHPRO2",48,0)
 .I $G(FHSITE),$P(X,U,8)=FHSITE D WRD^FHORD9
"RTN","FHPRO2",49,0)
 ;
"RTN","FHPRO2",50,0)
OUT ;process outpatient data
"RTN","FHPRO2",51,0)
 S FHTIM=D1-.000001
"RTN","FHPRO2",52,0)
 F FHIR=FHTIM:0 S FHIR=$O(^FHPT("RM",FHIR)) Q:(FHIR'>0)!(FHIR>(FHTIM+1))  F FHIDFN=0:0 S FHIDFN=$O(^FHPT("RM",FHIR,FHIDFN)) Q:FHIDFN'>0  D
"RTN","FHPRO2",53,0)
 .F FHIEN=0:0 S FHIEN=$O(^FHPT("RM",FHIR,FHIDFN,FHIEN)) Q:FHIEN'>0  D
"RTN","FHPRO2",54,0)
 ..S FHREDAT=$G(^FHPT(FHIDFN,"OP",FHIEN,0))
"RTN","FHPRO2",55,0)
 ..Q:$P(FHREDAT,U,4)'=MEAL
"RTN","FHPRO2",56,0)
 ..Q:$P(FHREDAT,U,15)="C"
"RTN","FHPRO2",57,0)
 ..S FHLOC=$P(FHREDAT,U,3) Q:'$G(FHLOC)
"RTN","FHPRO2",58,0)
 ..I $G(FHSITE),$P($G(^FH(119.6,FHLOC,0)),U,8)'=FHSITE Q
"RTN","FHPRO2",59,0)
 ..S FHRDIET=$P(FHREDAT,U,2) Q:'$G(FHRDIET)
"RTN","FHPRO2",60,0)
 ..S FHPDIET=$P($G(^FH(111,FHRDIET,0)),U,5)
"RTN","FHPRO2",61,0)
 ..S:$G(FHLOC) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,5)
"RTN","FHPRO2",62,0)
 ..S:'$G(FHSER) FHSER=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHPRO2",63,0)
 ..S:'$G(FHSER) FHSER=$O(^FH(119.72,0))
"RTN","FHPRO2",64,0)
 ..Q:'$G(FHSER)
"RTN","FHPRO2",65,0)
 ..I $D(^FH(119.72,FHSER,0)),$P(^FH(119.72,FHSER,0),U,3)'=FHP Q
"RTN","FHPRO2",66,0)
 ..S FHDIET=$P($G(^FH(119.9,1,0)),U,2)
"RTN","FHPRO2",67,0)
 ..S:'$D(P(FHPDIET,FHSER)) P(FHPDIET,FHSER)=0
"RTN","FHPRO2",68,0)
 ..S P(FHPDIET,FHSER)=P(FHPDIET,FHSER)+1
"RTN","FHPRO2",69,0)
 ..S:'$D(P(.6,FHSER)) P(.6,FHSER)=0 S P(.6,FHSER)=P(.6,FHSER)+1
"RTN","FHPRO2",70,0)
 ..;if tubefeeding and not cancelled, also count the TF data.
"RTN","FHPRO2",71,0)
 ..I $D(^FHPT(FHIDFN,"OP",FHIEN,"TF")) D
"RTN","FHPRO2",72,0)
 ...Q:$P(^FHPT(FHIDFN,"OP",FHIEN,3),U,5)="C"
"RTN","FHPRO2",73,0)
 ...I '$D(P(.7,FHSER)) S P(.7,FHSER)=1
"RTN","FHPRO2",74,0)
 ...E  S P(.7,FHSER)=P(.7,FHSER)+1
"RTN","FHPRO2",75,0)
 ...S:'$D(P(.6,FHSER)) P(.6,FHSER)=0 S P(.6,FHSER)=P(.6,FHSER)+1
"RTN","FHPRO2",76,0)
 ;
"RTN","FHPRO2",77,0)
 S:$G(FHSITE) FHPLNM=$P($G(^FH(119.73,FHSITE,0)),U,1)
"RTN","FHPRO2",78,0)
 S FHDT=D1+.999999
"RTN","FHPRO2",79,0)
 D GETSM^FHOMRBLD(FHTIM,FHSITE,"","")
"RTN","FHPRO2",80,0)
 D SPEC^FHORD9
"RTN","FHPRO2",81,0)
 D GETGM^FHOMRBL1(FHTIM,FHSITE,"","")
"RTN","FHPRO2",82,0)
 D GUEST^FHORD9
"RTN","FHPRO2",83,0)
 ;
"RTN","FHPRO2",84,0)
 K D,NP,T F LP=0:0 S LP=$O(P(.5,LP)) Q:LP<1  S:'$D(NP(.5,LP)) NP(.5,LP)=0 S NP(.5,LP)=NP(.5,LP)+P(.5,LP) S:'$D(D(LP)) D(LP)=0 S D(LP)=D(LP)+P(.5,LP)
"RTN","FHPRO2",85,0)
 K P(.5) F LP=0:0 S LP=$O(P(.7,LP)) Q:LP<1  S:'$D(NP(.7,LP)) NP(.7,LP)=0 S NP(.7,LP)=NP(.7,LP)+P(.7,LP) S:'$D(D(LP)) D(LP)=0 S D(LP)=D(LP)+P(.7,LP)
"RTN","FHPRO2",86,0)
 K P(.7) F LL=0:0 S LL=$O(P(.6,LL)) Q:LL<1  S:'$D(NP(.6,LL)) NP(.6,LL)=0 S NP(.6,LL)=NP(.6,LL)+P(.6,LL)
"RTN","FHPRO2",87,0)
 K P(.6) F LL=0:0 S LL=$O(P(.8,LL)) Q:LL<1  S:'$D(NP(.8,LL)) NP(.8,LL)=0 S NP(.8,LL)=NP(.8,LL)+P(.8,LL) S:'$D(D(LL)) D(LL)=0 S D(LL)=D(LL)+P(.8,LL)
"RTN","FHPRO2",88,0)
 K P(.8) F LL=0:0 S LL=$O(P(LL)) Q:LL<1  F P0=0:0 S P0=$O(P(LL,P0)) Q:P0<1  S:'$D(T(P0)) T(P0)=0 S T(P0)=T(P0)+P(LL,P0)
"RTN","FHPRO2",89,0)
 F LP=0:0 S LP=$O(NP(.6,LP)) Q:LP<1  S:$D(T(LP)) NP(.6,LP)=NP(.6,LP)-T(LP)-$G(D(LP)) S:'$D(D(LP)) D(LP)=0 S D(LP)=D(LP)+NP(.6,LP)
"RTN","FHPRO2",90,0)
 F P0=0:0 S P0=$O(^FH(119.72,P0)) Q:P0<1  I $P(^(P0,0),"^",3)=FHP I $D(^FH(119.72,P0,"B")) D D0
"RTN","FHPRO2",91,0)
 K ^TMP($J) F LL=0:0 S LL=$O(P(LL)) Q:LL<1  S P(LL,0)=0 F P0=0:0 S P0=$O(P(LL,P0)) Q:P0<1  S ^TMP($J,P0,LL)=P(LL,P0) S:'$D(D(P0)) D(P0)="" S D(P0)=D(P0)+P(LL,P0),P(LL,0)=P(LL,0)+P(LL,P0)
"RTN","FHPRO2",92,0)
 F P0=0:0 S P0=$O(D(P0)) Q:P0<1  S ^TMP($J,P0)=D(P0)
"RTN","FHPRO2",93,0)
 F LL=0:0 S LL=$O(P(LL)) Q:LL<1  I $G(P(LL,0)) S ^TMP($J,0,LL)=P(LL,0)
"RTN","FHPRO2",94,0)
 K P,D Q
"RTN","FHPRO2",95,0)
D0 ;
"RTN","FHPRO2",96,0)
 I $G(^FH(119.72,P0,"I"))="Y" Q
"RTN","FHPRO2",97,0)
 F LL=0:0 S LL=$O(^FH(119.72,P0,"B",LL)) Q:LL<1  S Y=$P(^(LL,0),"^",3*DOW-2+K3) I Y>0 S:'$D(P(LL,P0)) P(LL,P0)=0 S P(LL,P0)=P(LL,P0)+Y
"RTN","FHPRO2",98,0)
 Q
"RTN","FHPRO3")
0^267^B3558044
"RTN","FHPRO3",1,0)
FHPRO3 ; HISC/REL/RVD - Recipe Calculations ;4/14/95  08:05
"RTN","FHPRO3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRO3",3,0)
 ;RVD - Outpatient Meals.
"RTN","FHPRO3",4,0)
 K ^TMP($J,"T"),P,T
"RTN","FHPRO3",5,0)
 F L1=0:0 S L1=$O(^FH(116.2,L1)) Q:L1<1  S Z=$P($G(^(L1,0)),"^",2) I Z'="" S P(Z)=L1
"RTN","FHPRO3",6,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  S Z=$P($G(^FH(119.72,P0,0)),"^",2) I Z'="" S T(P0)=Z
"RTN","FHPRO3",7,0)
 D P1 G ^FHPRO4
"RTN","FHPRO3",8,0)
P1 F M=0:0 S M=$O(^FH(116.1,FHX1,"RE",M)) Q:M<1  S L1=^(M,0),L1=+L1 D P2
"RTN","FHPRO3",9,0)
 K M,P,T,Y,Z,Z1 Q
"RTN","FHPRO3",10,0)
P2 S N1=0,X=$G(^FH(114,L1,0)),K4=$P(X,"^",12),K4=$S($D(^FH(114.2,+K4,0)):$P(^(0),"^",3),1:99)
"RTN","FHPRO3",11,0)
 S MCA=$O(^FH(116.1,FHX1,"RE",M,"R",0)),LL=$S(MCA:+$G(^FH(116.1,FHX1,"RE",M,"R",MCA,0)),1:99)
"RTN","FHPRO3",12,0)
 S FHPD=$P(LL,"^",2),LL=+LL
"RTN","FHPRO3",13,0)
 S LL=$S($D(^FH(114.1,+LL,0)):$P(^(0),"^",3),1:99)
"RTN","FHPRO3",14,0)
 S K4=$S(K4<1:99,K4<10:"0"_K4,1:K4)_$S(LL<1:99,LL<10:"0"_LL,1:LL)_$E($P(X,"^",1),1,26)
"RTN","FHPRO3",15,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  D R1 I N2 S ^TMP($J,"T",K4,L1,P0)=N2
"RTN","FHPRO3",16,0)
 Q:'N1  S:'$G(^TMP($J,"T",K4,L1)) ^TMP($J,"T",K4,L1)=0 S ^(L1)=^(L1)+N1
"RTN","FHPRO3",17,0)
 Q
"RTN","FHPRO3",18,0)
R1 S Z1=$P($G(^FH(116.1,FHX1,"RE",M,"D",P0,0)),"^",2),N2=0
"RTN","FHPRO3",19,0)
 F CAT=0:0 S CAT=$O(^FH(116.1,FHX1,"RE",M,"R",CAT)) Q:CAT<1  S FHPD=$P($G(^(CAT,0)),"^",2) D
"RTN","FHPRO3",20,0)
 .F LL=1:1 S FHX2=$P(FHPD," ",LL) Q:FHX2=""  S X=$P(FHX2,";",1) I X'="",$D(P(X)) D P3
"RTN","FHPRO3",21,0)
 .Q
"RTN","FHPRO3",22,0)
 Q
"RTN","FHPRO3",23,0)
P3 S X1=$G(^TMP($J,P0,P(X))) Q:'X1
"RTN","FHPRO3",24,0)
 S Y=$P(FHX2,";",2) I Y="" S:Z1'="" X1=$J(Z1*X1/100,0,0) G P4
"RTN","FHPRO3",25,0)
 D P5 S Y=$P(FHX2,";",3) D:Y'="" P5
"RTN","FHPRO3",26,0)
P4 S N1=N1+X1,N2=N2+X1 S:X1 ^TMP($J,"T",K4,L1,P0)=X1 Q
"RTN","FHPRO3",27,0)
P5 S:$E(Y,1)=T(P0) X1=$J($E(Y,2,99)*X1/100,0,0) Q
"RTN","FHPRO4")
0^268^B9551925
"RTN","FHPRO4",1,0)
FHPRO4 ; HISC/REL/RVD - Production/Meal Service Summary ;4/13/95  15:28
"RTN","FHPRO4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRO4",3,0)
 S FHPAR=^FH(119.71,FHP,0) D:FHP1="Y" Q1 D:FHP2="Y" Q2 G ^FHPRO5
"RTN","FHPRO4",4,0)
Q1 D SES S P0=0,OLD="" I $P(FHPAR,"^",7)'="Y" S PG=0 D HDR1
"RTN","FHPRO4",5,0)
 S K4="" F LL=0:0 S K4=$O(^TMP($J,"T",K4)) Q:K4=""  F L1=0:0 S L1=$O(^TMP($J,"T",K4,L1)) Q:L1<1  S N1=^(L1),Y0=^FH(114,L1,0) D S1
"RTN","FHPRO4",6,0)
 D HDR3 D:$P(FHPAR,"^",5)="Y" ^FHPRO4A K P Q
"RTN","FHPRO4",7,0)
S1 I $P(FHPAR,"^",7)="Y",OLD'=$E(K4,1,2) S OLD=$E(K4,1,2),PG=0 D HDR1
"RTN","FHPRO4",8,0)
 D:$Y>(IOSL-6) HDR1 W !!,$P(Y0,"^",1)
"RTN","FHPRO4",9,0)
 I $P(FHPAR,"^",7)'="Y" S Z=$P(Y0,"^",12) S:Z Z=$P(^FH(114.2,Z,0),"^",2) W:Z'="" " (",Z,")"
"RTN","FHPRO4",10,0)
 W ?40,$P(Y0,"^",3) S X=$P(Y0,"^",6) S:X X=$G(^FH(114.3,X,0)) W ?50,X,?62
"RTN","FHPRO4",11,0)
 F K=1:1:N S P0=P(K),X=$G(^TMP($J,"T",K4,L1,P0)) W $J($S('X:"",1:X),6),"  "
"RTN","FHPRO4",12,0)
 W ?S2,$J(^TMP($J,"T",K4,L1),6) Q
"RTN","FHPRO4",13,0)
HDR1 S PG=PG+1 W @IOF,!,DTP,?(S1-35\2),"P R O D U C T I O N   S U M M A R Y",?(S1-6),"Page ",PG
"RTN","FHPRO4",14,0)
 W !?(S1-$L(FHP6)),FHP6
"RTN","FHPRO4",15,0)
 W ! D:$P(FHPAR,"^",7)="Y" PRE W ?(S1-$L(TIM)\2),TIM
"RTN","FHPRO4",16,0)
 W !!,"Recipe",?40,"Portion",?50,"Utensil",?62,PD," TOTAL"
"RTN","FHPRO4",17,0)
 S LN="",$P(LN,"-",S1+1)="" W !,LN Q
"RTN","FHPRO4",18,0)
PRE S Z=$P(Y0,"^",12) S:Z Z=$P($G(^FH(114.2,Z,0)),"^",1)
"RTN","FHPRO4",19,0)
 W:Z'="" Z Q
"RTN","FHPRO4",20,0)
SES K N,P,S S PD="",N=0
"RTN","FHPRO4",21,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  S Y=$P(^FH(119.72,P0,0),"^",4) S:Y="" Y=$E($P(^(0),"^",1),1,6) S S(Y_"~"_P0)=""
"RTN","FHPRO4",22,0)
 S Y="" F  S Y=$O(S(Y)) Q:Y=""  S N=N+1,P(N)=$P(Y,"~",2),PD=PD_$J($P(Y,"~",1),6)_"  "
"RTN","FHPRO4",23,0)
 K S S S2=62+$L(PD),S1=S2+6 Q
"RTN","FHPRO4",24,0)
Q2 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  D M1
"RTN","FHPRO4",25,0)
 Q
"RTN","FHPRO4",26,0)
M1 D SET Q:NX=""  S PG=0
"RTN","FHPRO4",27,0)
M2 S PD=$E(NX,1,53) Q:PD=""  S NX=$E(NX,55,999),S2=59+$L(PD),S1=S2+17 D HDR2
"RTN","FHPRO4",28,0)
 S K4="" F LL=0:0 S K4=$O(^TMP($J,"T",K4)) Q:K4=""  F L1=0:0 S L1=$O(^TMP($J,"T",K4,L1)) Q:L1<1  S N1=$G(^TMP($J,"T",K4,L1,P0)) D:N1 M3
"RTN","FHPRO4",29,0)
 D HDR3 G M2
"RTN","FHPRO4",30,0)
M3 S Y0=^FH(114,L1,0),Z=$J("",$L(PD)) D:$Y>(IOSL-6) HDR2
"RTN","FHPRO4",31,0)
 S K=$O(^FH(116.1,FHX1,"RE","B",L1,0))
"RTN","FHPRO4",32,0)
 F CAT=0:0 S CAT=$O(^FH(116.1,FHX1,"RE",+K,"R",CAT)) Q:CAT<1  S FHPD=$P($G(^(CAT,0)),"^",2) D
"RTN","FHPRO4",33,0)
 .F KK=1:1 S FHX2=$P(FHPD," ",KK) Q:FHX2=""  S X=$P(FHX2,";",1),X1=$F(PD,X) I X1>2 S Z=$E(Z,1,X1-3)_X_$E(Z,X1,999)
"RTN","FHPRO4",34,0)
 .Q
"RTN","FHPRO4",35,0)
 S X1=$P(Y0,"^",6) S:X1 X1=$G(^FH(114.3,X1,0))
"RTN","FHPRO4",36,0)
 W !!,$P(Y0,"^",1),?32,$P(Y0,"^",3),?44,X1,?56,Z,?S2,$J(N1,5) Q
"RTN","FHPRO4",37,0)
HDR2 S PG=PG+1 W @IOF,!,DTP,?(S1-39\2),"M E A L   S E R V I C E   S U M M A R Y",?(S1-6),"Page ",PG
"RTN","FHPRO4",38,0)
 W !?(S1-$L(FHP6)),FHP6
"RTN","FHPRO4",39,0)
 S X=$P(^FH(119.72,P0,0),"^",1) W !?(S1-$L(X)\2),X,!!?(S1-$L(TIM)\2),TIM
"RTN","FHPRO4",40,0)
 W !!,"Recipe",?32,"Portion",?44,"Utensil",?56,PD,?S2,"Total"
"RTN","FHPRO4",41,0)
 S LN="",$P(LN,"-",S1+1)="" W !,LN Q
"RTN","FHPRO4",42,0)
HDR3 W !!!,"*** Note: Does NOT include add-ons and specials!",! Q
"RTN","FHPRO4",43,0)
SET K N F K=0:0 S K=$O(^TMP($J,P0,K)) Q:K<1  S X=$P($G(^FH(116.2,K,0)),"^",6) S:X<1 X=99 S N(X)=K
"RTN","FHPRO4",44,0)
 S NX="" F K=0:0 S K=$O(N(K)) Q:K<1  S C0=$P($G(^FH(116.2,+N(K),0)),"^",2) S:C0="" C0="**" S NX=NX_C0_" "
"RTN","FHPRO4",45,0)
 K N Q
"RTN","FHPRO4",46,0)
T1 S K1=$O(^FH(116.2,"C",C0,0)) Q:K1<1  S X=$P(^FH(116.2,K1,0),"^",6)
"RTN","FHPRO4",47,0)
 S:X<1 X=99 S N(X)=C0 Q
"RTN","FHPRO4A")
0^269^B5495633
"RTN","FHPRO4A",1,0)
FHPRO4A ; HISC/REL/RVD - Meal Distribution Report ;7/7/94  09:18 
"RTN","FHPRO4A",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRO4A",3,0)
 ;RVD - Outpatient Meals.
"RTN","FHPRO4A",4,0)
Q1 D SES S P0=0,OLD="" I $P(FHPAR,"^",7)'="Y" S PG=0 D HDR1
"RTN","FHPRO4A",5,0)
 S K4="" F LL=0:0 S K4=$O(^TMP($J,"T",K4)) Q:K4=""  F L1=0:0 S L1=$O(^TMP($J,"T",K4,L1)) Q:L1<1  S N1=^(L1),Y0=^FH(114,L1,0) D S1
"RTN","FHPRO4A",6,0)
 K P D HDR2 Q
"RTN","FHPRO4A",7,0)
S1 I $P(FHPAR,"^",7)="Y",OLD'=$E(K4,1,2) S OLD=$E(K4,1,2),PG=0 D HDR1
"RTN","FHPRO4A",8,0)
 D:$Y>(IOSL-6) HDR1 S P=$P(Y0,"^",3) W !!,$P(Y0,"^",1)
"RTN","FHPRO4A",9,0)
 I $P(FHPAR,"^",7)'="Y" S Z=$P(Y0,"^",12) S:Z Z=$P(^FH(114.2,Z,0),"^",2) W:Z'="" " (",Z,")"
"RTN","FHPRO4A",10,0)
 W ?40,P K Q S P=$P(P," ",1),UNT=$S(P["EA":"EACH",P["FL":"GAL",1:"LB"),TOT=0
"RTN","FHPRO4A",11,0)
 S LL=41 F K=1:1:N S P0=P(K),N1=$G(^TMP($J,"T",K4,L1,P0)),LL=LL+11 I N1 W ?LL,N1," por" S Q(K)=N1,TOT=TOT+N1
"RTN","FHPRO4A",12,0)
 W ?S2,TOT," por",!
"RTN","FHPRO4A",13,0)
 S LL=41 F K=1:1:N S LL=LL+11 I $G(Q(K)) S Y=P*Q(K) D UNT W ?LL,Y
"RTN","FHPRO4A",14,0)
 S Y=P*TOT D UNT W ?S2,Y Q
"RTN","FHPRO4A",15,0)
UNT I UNT="EACH" S Y=$J(Y+.999\1,0,0)_" EA" Q
"RTN","FHPRO4A",16,0)
 I UNT="LB" S P1=Y/16,U1="#" G:P1>.125 U1 S Y=P1*16+.5\1,U1="OZ" G U2
"RTN","FHPRO4A",17,0)
 S P1=Y/128 F P0=1:1:5 S Z=$P("1,4,8,16,128",",",P0) Q:(P1*Z)>.875
"RTN","FHPRO4A",18,0)
 S U1=$P("GL QT PT CP OZ"," ",P0),P1=Z*P1
"RTN","FHPRO4A",19,0)
U1 S Y="" S:P1#1>.875 P1=P1+1\1 S:P1'<1 Y=P1\1,P1=P1#1
"RTN","FHPRO4A",20,0)
 I P1>.125 S:Y'="" Y=Y_"-" S Y=Y_$S(P1<.375:"1/4",P1<.625:"1/2",1:"3/4")
"RTN","FHPRO4A",21,0)
U2 S Y=Y_" "_U1 Q
"RTN","FHPRO4A",22,0)
SES K N,P,S S PD="",N=0
"RTN","FHPRO4A",23,0)
 F P0=0:0 S P0=$O(^TMP($J,P0)) Q:P0<1  S Y=$P(^FH(119.72,P0,0),"^",4) S:Y="" Y=$E($P(^(0),"^",1),1,6) S S(Y_"~"_P0)=""
"RTN","FHPRO4A",24,0)
 S Y="" F  S Y=$O(S(Y)) Q:Y=""  S N=N+1,P(N)=$P(Y,"~",2),PD=PD_$J($P(Y,"~",1),6)_"     "
"RTN","FHPRO4A",25,0)
 K S S S2=52+$L(PD),S1=S2+8 S:S1<73 S1=73 Q
"RTN","FHPRO4A",26,0)
HDR1 S PG=PG+1 W @IOF,!,DTP,?(S1-35\2),"M E A L   D I S T R I B U T I O N   R E P O R T",?(S1-6),"Page ",PG
"RTN","FHPRO4A",27,0)
 W !?(S1-$L(FHP6)),FHP6
"RTN","FHPRO4A",28,0)
 W ! D:$P(FHPAR,"^",7)="Y" PRE W ?(S1-$L(TIM)\2),TIM
"RTN","FHPRO4A",29,0)
 W !!,"Recipe",?40,"Portion",?52,PD," TOTAL"
"RTN","FHPRO4A",30,0)
 S LN="",$P(LN,"-",S1+1)="" W !,LN Q
"RTN","FHPRO4A",31,0)
PRE S Z=$P(Y0,"^",12) S:Z Z=$P($G(^FH(114.2,Z,0)),"^",1)
"RTN","FHPRO4A",32,0)
 W:Z'="" Z Q
"RTN","FHPRO4A",33,0)
HDR2 W !!!,"*** Note: Does NOT include add-ons and specials!",! Q
"RTN","FHPRO5")
0^270^B9414108
"RTN","FHPRO5",1,0)
FHPRO5 ; HISC/REL - Recipe Preparation ;7/18/94  16:39 
"RTN","FHPRO5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRO5",3,0)
 I FHP3="Y"!(FHP4="Y") D Q1 D:FHP3="Y" Q2 D:FHP4="Y" ^FHPRO6
"RTN","FHPRO5",4,0)
 D:FHP5="Y" ^FHPRO7 Q
"RTN","FHPRO5",5,0)
Q1 ; Set-up Recipe Prep and Storeroom scratch global
"RTN","FHPRO5",6,0)
 K R S K4="" F K=0:0 S K4=$O(^TMP($J,"T",K4)) Q:K4=""  F L1=0:0 S L1=$O(^TMP($J,"T",K4,L1)) Q:L1<1  S:'$D(R(L1)) R(L1)=0 S R(L1)=R(L1)+^(L1)
"RTN","FHPRO5",7,0)
G1 F K1=0:0 S K1=$O(R(K1)) Q:K1<1  D P3
"RTN","FHPRO5",8,0)
 G:$O(R(""))'="" G1
"RTN","FHPRO5",9,0)
 Q
"RTN","FHPRO5",10,0)
P3 S X0=$G(^FH(114,K1,0)),P1=R(K1),MUL=$P(X0,"^",2) K R(K1) Q:'MUL  S MUL=P1/MUL
"RTN","FHPRO5",11,0)
 S S1=$P(X0,"^",12) S:S1 S1=$P($G(^FH(114.2,S1,0)),"^",3)
"RTN","FHPRO5",12,0)
 S S1=$S(S1<1:99,S1<10:"0"_S1,1:S1)_$E($P(X0,"^",1),1,28)
"RTN","FHPRO5",13,0)
 I FHP3="Y" S:$D(^TMP($J,"I",S1,K1))#2=0 ^TMP($J,"I",S1,K1)=0 S ^(K1)=^(K1)+P1
"RTN","FHPRO5",14,0)
 F KK=0:0 S KK=$O(^FH(114,K1,"I",KK)) Q:KK<1  S Y=^(KK,0) D P4
"RTN","FHPRO5",15,0)
 F KK=0:0 S KK=$O(^FH(114,K1,"R",KK)) Q:KK<1  S Y=^(KK,0) D P6
"RTN","FHPRO5",16,0)
 Q
"RTN","FHPRO5",17,0)
P4 S X1=+Y,Q=$P(Y,"^",2)*MUL
"RTN","FHPRO5",18,0)
 S Y0=$G(^FHING(X1,0))
"RTN","FHPRO5",19,0)
 S S2=$P(Y0,"^",12) S:S2 S2=$P($G(^FH(113.1,S2,0)),"^",3)
"RTN","FHPRO5",20,0)
 S S2=$S(S2<1:99,S2<10:"0"_S2,1:S2)_$E($P(Y0,"^",1),1,28) G:FHP3'="Y" P5
"RTN","FHPRO5",21,0)
 S:'$D(^TMP($J,"I",S1,K1,S2,X1)) ^TMP($J,"I",S1,K1,S2,X1)=0 S ^(X1)=^(X1)+Q
"RTN","FHPRO5",22,0)
P5 Q:FHP4'="Y"
"RTN","FHPRO5",23,0)
 S:'$D(^TMP($J,"S",S2,X1,S1,K1)) ^TMP($J,"S",S2,X1,S1,K1)=0 S ^(K1)=^(K1)+Q Q
"RTN","FHPRO5",24,0)
P6 S P1=$P(Y,"^",2)*MUL S:'$D(R(+Y)) R(+Y)=0 S R(+Y)=R(+Y)+P1 Q
"RTN","FHPRO5",25,0)
Q2 ; Print Recipe Preparation
"RTN","FHPRO5",26,0)
 S OLD="",R1="" I $P(FHPAR,"^",4)'="Y" S PG=0 D HDR
"RTN","FHPRO5",27,0)
S1 S R1=$O(^TMP($J,"I",R1)) I R1="" W ! Q
"RTN","FHPRO5",28,0)
 F K1=0:0 S K1=$O(^TMP($J,"I",R1,K1)) Q:K1<1  S TOT=^(K1),FLG=0,R2="",X0=^FH(114,K1,0) D S2
"RTN","FHPRO5",29,0)
 G S1
"RTN","FHPRO5",30,0)
S2 I $P(FHPAR,"^",4)="Y",OLD'=$E(R1,1,2) S OLD=$E(R1,1,2),PG=0 D HDR
"RTN","FHPRO5",31,0)
S3 S R2=$O(^TMP($J,"I",R1,K1,R2)) Q:R2=""
"RTN","FHPRO5",32,0)
 F X1=0:0 S X1=$O(^TMP($J,"I",R1,K1,R2,X1)) Q:X1<1  D S4
"RTN","FHPRO5",33,0)
 G S3
"RTN","FHPRO5",34,0)
S4 D:$Y>(IOSL-7) HDR W ! G:FLG S5 W !,$P(X0,"^",1) S FLG=1
"RTN","FHPRO5",35,0)
 I $P(FHPAR,"^",4)'="Y" S Z=$P(X0,"^",12) S:Z Z=$P(^FH(114.2,Z,0),"^",2) W:Z'="" " (",Z,")"
"RTN","FHPRO5",36,0)
 W ?39,$J(TOT,5,0)
"RTN","FHPRO5",37,0)
S5 S (Y,I1)=^TMP($J,"I",R1,K1,R2,X1)
"RTN","FHPRO5",38,0)
 S Y(0)=$G(^FHING(X1,0)),UNT=$P(Y(0),"^",16) D EN2^FHREC1
"RTN","FHPRO5",39,0)
 W ?46,$E($P(Y(0),"^",1),1,42),?90,Y S I2=$P(Y(0),"^",17) Q:'I2  S I1=I1/I2 Q:'I1
"RTN","FHPRO5",40,0)
 S I1=+$J(I1,0,1) W ?113,I1," ",$P(Y(0),"^",6) Q
"RTN","FHPRO5",41,0)
B0 S LAB=$P(FHPAR,"^",10),R2=LAB=2*5+32
"RTN","FHPRO5",42,0)
 F KK=0:0 S KK=$O(^TMP($J,"I",KK)) Q:KK<1  F K1=0:0 S K1=$O(^TMP($J,"I",KK,K1)) Q:K1<1  D B1
"RTN","FHPRO5",43,0)
 F X1=1:1:18 W !
"RTN","FHPRO5",44,0)
 Q
"RTN","FHPRO5",45,0)
B1 F X1=0:0 S X1=$O(^TMP($J,"I",KK,K1,X1)) Q:X1<1  S (Y,I1)=^(X1) D B2
"RTN","FHPRO5",46,0)
 Q
"RTN","FHPRO5",47,0)
B2 S Y(0)=^FHING(X1,0),UNT=$P(Y(0),"^",16) D EN2^FHREC1
"RTN","FHPRO5",48,0)
 S I2=$P(Y(0),"^",17) Q:'I2  S I1=I1/I2
"RTN","FHPRO5",49,0)
 S I1=$S(I1<1:1,I1#1<.1:I1\1,1:I1+.9\1)
"RTN","FHPRO5",50,0)
 W !,$E($P(Y(0),"^",1),1,R2),!!,I1," ",$P(Y(0),"^",6),!!,$E($P(^FH(114,K1,0),"^",1),1,R2),! Q
"RTN","FHPRO5",51,0)
HDR S PG=PG+1 W @IOF,!,DTP,?48,"R E C I P E   P R E P A R A T I O N",?125,"Page ",PG
"RTN","FHPRO5",52,0)
 W !?(131-$L(FHP6)),FHP6
"RTN","FHPRO5",53,0)
 W ! D:$P(FHPAR,"^",4)="Y" PRE W ?(132-$L(TIM)\2),TIM
"RTN","FHPRO5",54,0)
 W !!,"Recipe",?40,"Port. Ingredient",?90,"Quantity",?113,"Storeroom Amount"
"RTN","FHPRO5",55,0)
 W ! F K=1:1:131 W "-"
"RTN","FHPRO5",56,0)
 Q
"RTN","FHPRO5",57,0)
PRE S K=$P(X0,"^",12) S:K K=$P($G(^FH(114.2,K,0)),"^",1)
"RTN","FHPRO5",58,0)
 W:K'="" K Q
"RTN","FHPRO6")
0^271^B3839506
"RTN","FHPRO6",1,0)
FHPRO6 ; HISC/REL - Storeroom Requisition ;4/25/93  15:59 
"RTN","FHPRO6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRO6",3,0)
 S OLD="",R2="" I $P(FHPAR,"^",6)'="Y" S PG=0 D HDR
"RTN","FHPRO6",4,0)
S1 S R2=$O(^TMP($J,"S",R2)) I R2="" W ! Q
"RTN","FHPRO6",5,0)
 F X1=0:0 S X1=$O(^TMP($J,"S",R2,X1)) Q:X1<1  D S2
"RTN","FHPRO6",6,0)
 G S1
"RTN","FHPRO6",7,0)
S2 S Y(0)=$G(^FHING(X1,0)),UNT=$P(Y(0),"^",16),(FLG,TOT)=0
"RTN","FHPRO6",8,0)
 I $P(FHPAR,"^",6)="Y",OLD'=$E(R2,1,2) S OLD=$E(R2,1,2),PG=0 D HDR
"RTN","FHPRO6",9,0)
 S R1="" F K4=0:0 S R1=$O(^TMP($J,"S",R2,X1,R1)) Q:R1=""  F K1=0:0 S K1=$O(^TMP($J,"S",R2,X1,R1,K1)) Q:K1<1  S TOT=TOT+^(K1)
"RTN","FHPRO6",10,0)
 S R1="" F K4=0:0 S R1=$O(^TMP($J,"S",R2,X1,R1)) Q:R1=""  F K1=0:0 S K1=$O(^TMP($J,"S",R2,X1,R1,K1)) Q:K1<1  S Y=^(K1) D S4
"RTN","FHPRO6",11,0)
 Q
"RTN","FHPRO6",12,0)
S4 D:$Y>(IOSL-7) HDR W ! G:FLG S5 W !,$P(Y(0),"^",1) S FLG=1 I $P(FHPAR,"^",6)'="Y",$E(R2,1,2)'=99 S Z=$P(Y(0),"^",12) S:Z Z=$P($G(^FH(113.1,Z,0)),"^",2) W:Z'="" " (",Z,")"
"RTN","FHPRO6",13,0)
 S I2=$P(Y(0),"^",17) G:'I2 S5 S I1=TOT/I2
"RTN","FHPRO6",14,0)
 S I1=$S(I1<1:1,I1#1<.1:I1\1,1:I1+.9\1) W ?60,I1," ",$P(Y(0),"^",6)
"RTN","FHPRO6",15,0)
S5 D EN2^FHREC1 W ?80,$P($G(^FH(114,K1,0)),"^",1),?112,$E(Y,1,19) Q
"RTN","FHPRO6",16,0)
HDR S PG=PG+1 W @IOF,!,DTP,?45,"S T O R E R O O M   R E Q U I S I T I O N",?125,"Page ",PG
"RTN","FHPRO6",17,0)
 W !?(131-$L(FHP6)),FHP6
"RTN","FHPRO6",18,0)
 W ! D:$P(FHPAR,"^",6)="Y" STO W ?(132-$L(TIM)\2),TIM
"RTN","FHPRO6",19,0)
 W !!,"Ingredient",?60,"Storeroom Amount",?80,"Recipe",?112,"Quantity"
"RTN","FHPRO6",20,0)
 W ! F K=1:1:131 W "-"
"RTN","FHPRO6",21,0)
 Q
"RTN","FHPRO6",22,0)
STO S K=$P(Y(0),"^",12) S:K K=$P($G(^FH(113.1,K,0)),"^",1)
"RTN","FHPRO6",23,0)
 W:K'="" K Q
"RTN","FHPRO7")
0^272^B2263724
"RTN","FHPRO7",1,0)
FHPRO7 ; HISC/REL - Print Recipes ;3/26/96  15:14
"RTN","FHPRO7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRO7",3,0)
 K N,R S K4="" F P0=0:0 S K4=$O(^TMP($J,"T",K4)) Q:K4=""  F L1=0:0 S L1=$O(^TMP($J,"T",K4,L1)) Q:L1<1  D C0
"RTN","FHPRO7",4,0)
R0 F K1=0:0 S K1=$O(N(K1)) Q:K1<1  K N(K1) D R1
"RTN","FHPRO7",5,0)
 G:$O(N(""))'="" R0
"RTN","FHPRO7",6,0)
 F R1=0:0 S R1=$O(R(R1)) Q:R1=""  I $G(^FH(114,R1,0))'="" D:$P(^FH(114,R1,0),"^",8)'="N" R3
"RTN","FHPRO7",7,0)
 S NX="" F KK=0:0 S NX=$O(^TMP($J,"R",NX)) Q:NX=""  F R1=0:0 S R1=$O(^TMP($J,"R",NX,R1)) Q:R1<1  S S1=R(R1) D EN1^FHREC2
"RTN","FHPRO7",8,0)
 Q
"RTN","FHPRO7",9,0)
R1 F KK=0:0 S KK=$O(^FH(114,K1,"R",KK)) Q:KK<1  S Y=^(KK,0) D R2
"RTN","FHPRO7",10,0)
 Q
"RTN","FHPRO7",11,0)
R2 S P1=R(K1),MUL=$P(^FH(114,K1,0),"^",2) Q:'MUL  S MUL=P1/MUL
"RTN","FHPRO7",12,0)
 S P1=$P(Y,"^",2)*MUL S:'$D(R(+Y)) R(+Y)=0 S R(+Y)=R(+Y)+P1 Q
"RTN","FHPRO7",13,0)
R3 S X=$G(^FH(114,R1,0)),K4=$P(X,"^",12),K4=$S($D(^FH(114.2,+K4,0)):$P(^(0),"^",3),1:99)
"RTN","FHPRO7",14,0)
 S K4="A"_$S(K4<10:"0"_K4,1:K4)_$E($P(X,"^",1),1,27),^TMP($J,"R",K4,R1)="" Q
"RTN","FHPRO7",15,0)
C0 S:'$D(R(L1)) R(L1)=0 S R(L1)=R(L1)+^TMP($J,"T",K4,L1),N(L1)="" Q
"RTN","FHPRR1")
0^273^B6264425
"RTN","FHPRR1",1,0)
FHPRR1 ; HISC/REL/RVD - Projected Usage ;3/6/95  16:07
"RTN","FHPRR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRR1",3,0)
 S FHP=$O(^FH(119.71,0)) I FHP'<1,$O(^FH(119.71,FHP))<1 G P1
"RTN","FHPRR1",4,0)
P0 R !!,"Select PRODUCTION FACILITY: ",X:DTIME G:'$T!("^"[X) KIL
"RTN","FHPRR1",5,0)
 K DIC S DIC="^FH(119.71,",DIC(0)="EMQ" D ^DIC G:Y<1 P0 S FHP=+Y
"RTN","FHPRR1",6,0)
P1 D DT G:"^"[X KIL
"RTN","FHPRR1",7,0)
 K M F P0=0:0 S P0=$O(^FH(119.72,P0)) Q:P0<1  I $P($G(^(P0,0)),"^",3)=FHP D C0 G:X="^" KIL
"RTN","FHPRR1",8,0)
R0 R !!,"Sort by Vendor Y// ",V0:DTIME G:'$T!(V0="^") KIL S:V0="" V0="Y" S X=V0 D TR^FH S V0=X I $P("YES",V0,1)'="",$P("NO",V0,1)'="" W *7,"  Answer YES or NO" G R0
"RTN","FHPRR1",9,0)
 S V0=V0?1"Y".E
"RTN","FHPRR1",10,0)
 W !!,"The report requires a 132 column compressed printer.",!
"RTN","FHPRR1",11,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRR1",12,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRR1",FHLST="FHP^SDT^EDT^V0^M(" D EN2^FH G KIL
"RTN","FHPRR1",13,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRR1",14,0)
Q1 ; Print Projected Usage
"RTN","FHPRR1",15,0)
 K ^TMP($J) F DOW=1:1:7 F K3=1:1:3 D FOR
"RTN","FHPRR1",16,0)
 G ^FHPRR2
"RTN","FHPRR1",17,0)
C0 I $G(^FH(119.72,P0,"I"))="Y" Q
"RTN","FHPRR1",18,0)
 W !!?5,"Service Point: ",$P(^FH(119.72,P0,0),"^",1)
"RTN","FHPRR1",19,0)
C1 W !?5,"Average Census: " R X:DTIME I '$T!(X["^") S X="^" Q
"RTN","FHPRR1",20,0)
 I X'?1N.N!(X>9999) W *7,"  Must be a number less than 9999" G C1
"RTN","FHPRR1",21,0)
 S M(P0)=X Q
"RTN","FHPRR1",22,0)
FOR F P0=0:0 S P0=$O(M(P0)) Q:P0<1  D F1
"RTN","FHPRR1",23,0)
 Q
"RTN","FHPRR1",24,0)
F1 S S1=M(P0),N0=$P(^FH(119.72,P0,0),"^",2)
"RTN","FHPRR1",25,0)
 F LL=0:0 S LL=$O(^FH(119.72,P0,"A",LL)) Q:LL<1  S S0=$P(^(LL,0),"^",DOW+1) D F2
"RTN","FHPRR1",26,0)
 F LL=0:0 S LL=$O(^FH(119.72,P0,"B",LL)) Q:LL<1  S Y=$P(^(LL,0),"^",3*DOW-2+K3) I Y>0 S C0=$P(^FH(116.2,LL,0),"^",2) D F3
"RTN","FHPRR1",27,0)
 Q
"RTN","FHPRR1",28,0)
F2 S Y=$J(S0*S1/100,0,0) Q:Y<1
"RTN","FHPRR1",29,0)
 S X=^FH(116.2,LL,0),C0=$P(X,"^",2)
"RTN","FHPRR1",30,0)
F3 S:'$D(^TMP($J,"P",DOW_K3,P0,C0,N0)) ^TMP($J,"P",DOW_K3,P0,C0,N0)=0 S ^(N0)=^(N0)+Y
"RTN","FHPRR1",31,0)
 S:'$D(^TMP($J,"M",DOW_K3,C0,N0)) ^TMP($J,"M",DOW_K3,C0,N0)=0 S ^(N0)=^(N0)+Y Q
"RTN","FHPRR1",32,0)
DT ; Get From/To Dates
"RTN","FHPRR1",33,0)
D1 S %DT="AEX",%DT("A")="Starting Date: " W ! D ^%DT Q:U[X!$D(DTOUT)  G:Y<1 D1 S SDT=+Y
"RTN","FHPRR1",34,0)
D2 S %DT="AEFX",%DT("A")=" Ending Date: " D ^%DT Q:U[X!$D(DTOUT)  G:Y<1 D2 S EDT=+Y
"RTN","FHPRR1",35,0)
 I EDT<SDT W *7,"  [End before Start?] " G D1
"RTN","FHPRR1",36,0)
 Q
"RTN","FHPRR1",37,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRR2")
0^274^B12967941
"RTN","FHPRR2",1,0)
FHPRR2 ; HISC/REL/RVD - Projected Usage (cont). ;1/23/98  16:11
"RTN","FHPRR2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRR2",3,0)
 ;RVD - Outpatient meals.
"RTN","FHPRR2",4,0)
 S T0=0 F P0=0:0 S P0=$O(M(P0)) Q:P0<1  S T0=T0+M(P0)
"RTN","FHPRR2",5,0)
 S DTP=SDT D DTP^FH S H1=DTP,DTP=EDT D DTP^FH S H1=H1_" to "_DTP
"RTN","FHPRR2",6,0)
 S X=SDT D DOW^%DTC S DOW=Y+1
"RTN","FHPRR2",7,0)
P0 S X1=SDT D E1^FHPRC1 G:FHCY<1 P1 G:'$D(^FH(116,FHCY,"DA",FHDA,0)) P1
"RTN","FHPRR2",8,0)
 S FHX1=^FH(116,FHCY,"DA",FHDA,0)
"RTN","FHPRR2",9,0)
 I $D(^FH(116.3,SDT,0)) S X=^(0) F LL=2:1:4 I $P(X,"^",LL) S $P(FHX1,"^",LL)=$P(X,"^",LL)
"RTN","FHPRR2",10,0)
 F K3=1:1:3 S MENU=$P(FHX1,"^",K3+1) D:MENU P2
"RTN","FHPRR2",11,0)
P1 S X1=SDT,X2=1 D C^%DTC S SDT=X I SDT>EDT G S0
"RTN","FHPRR2",12,0)
 S DOW=DOW+1 S:DOW=8 DOW=1 G P0
"RTN","FHPRR2",13,0)
P2 F L1=0:0 S L1=$O(^FH(116.1,MENU,"RE",L1)) Q:L1<1  S M=^(L1,0) D P3
"RTN","FHPRR2",14,0)
 K M,Y,Z Q
"RTN","FHPRR2",15,0)
P3 S N1=0,M=+M,X=$G(^FH(114,M,0))
"RTN","FHPRR2",16,0)
 F CAT=0:0 S CAT=$O(^FH(116.1,MENU,"RE",L1,"R",CAT)) Q:CAT<1  S FHPD=$P($G(^(CAT,0)),"^",2) D
"RTN","FHPRR2",17,0)
 .F LL=1:1 S FHX2=$P(FHPD," ",LL) Q:FHX2=""  D P4
"RTN","FHPRR2",18,0)
 .Q
"RTN","FHPRR2",19,0)
 Q:'N1  S:'$D(^TMP($J,"T",M)) ^TMP($J,"T",M)=0 S ^(M)=^(M)+N1 Q
"RTN","FHPRR2",20,0)
P4 S X=$P(FHX2,";",1)
"RTN","FHPRR2",21,0)
 S X1=$G(^TMP($J,"M",DOW_K3,X,"T")),X2=$G(^TMP($J,"M",DOW_K3,X,"C"))
"RTN","FHPRR2",22,0)
 S Y=$P(FHX2,";",2) I Y="" G P41:$O(^FH(116.1,MENU,"RE",L1,"D",0))="",P6
"RTN","FHPRR2",23,0)
 D P5 S Y=$P(FHX2,";",3) D:Y'="" P5
"RTN","FHPRR2",24,0)
P41 S N1=N1+X1+X2 Q
"RTN","FHPRR2",25,0)
P5 I $E(Y,1)="C" S X2=$J($E(Y,2,99)*X2/100,0,0) Q
"RTN","FHPRR2",26,0)
 S X1=$J($E(Y,2,99)*X1/100,0,0) Q
"RTN","FHPRR2",27,0)
P6 F P0=0:0 S P0=$O(^TMP($J,"P",DOW_K3,P0)) Q:P0<1  D P7
"RTN","FHPRR2",28,0)
 Q
"RTN","FHPRR2",29,0)
P7 S SRV=$P($G(^FH(119.72,P0,0)),"^",2)
"RTN","FHPRR2",30,0)
 I $E(SRV,1)="T" S X1=$G(^TMP($J,"P",DOW_K3,P0,X,"T"))
"RTN","FHPRR2",31,0)
 I $E(SRV,1)="C" S X1=$G(^TMP($J,"P",DOW_K3,P0,X,"C"))
"RTN","FHPRR2",32,0)
 S Z1=$G(^FH(116.1,MENU,"RE",L1,"D",P0,0))
"RTN","FHPRR2",33,0)
 S Y=$P(Z1,"^",2) I Y'="" S X1=$J(Y*X1/100,0,0)
"RTN","FHPRR2",34,0)
 S N1=N1+X1 Q
"RTN","FHPRR2",35,0)
S0 F K1=0:0 S K1=$O(^TMP($J,"T",K1)) Q:K1<1  D S1
"RTN","FHPRR2",36,0)
 G:$O(^TMP($J,"T",""))'="" S0
"RTN","FHPRR2",37,0)
 G LIS
"RTN","FHPRR2",38,0)
S1 S X0=$G(^FH(114,K1,0)),P1=^TMP($J,"T",K1),MUL=$P(X0,"^",2) K ^TMP($J,"T",K1) Q:'MUL  S MUL=P1/MUL
"RTN","FHPRR2",39,0)
 F KK=0:0 S KK=$O(^FH(114,K1,"I",KK)) Q:KK<1  S Y=^(KK,0) D S2
"RTN","FHPRR2",40,0)
 F KK=0:0 S KK=$O(^FH(114,K1,"R",KK)) Q:KK<1  S Y=^(KK,0) D S3
"RTN","FHPRR2",41,0)
 Q
"RTN","FHPRR2",42,0)
S2 S X1=+Y,Q=$P(Y,"^",2)*MUL
"RTN","FHPRR2",43,0)
 S Y0=$G(^FHING(X1,0))
"RTN","FHPRR2",44,0)
 S S1=$E($P(Y0,"^",1),1,30) Q:S1=""  I V0 S V1=$P(Y0,"^",4) S:V1 V1=$P($G(^FH(113.2,V1,0)),"^",1) S S1=$E(V1_$J("",30),1,30)_S1
"RTN","FHPRR2",45,0)
 S:'$D(^TMP($J,"S",S1,X1)) ^TMP($J,"S",S1,X1)=0 S ^(X1)=^(X1)+Q Q
"RTN","FHPRR2",46,0)
S3 S P1=$P(Y,"^",2)*MUL S:'$D(^TMP($J,"T",+Y)) ^TMP($J,"T",+Y)=0 S ^TMP($J,"T",+Y)=^TMP($J,"T",+Y)+P1 Q
"RTN","FHPRR2",47,0)
LIS D NOW^%DTC S NOW=%,DTP=NOW D DTP^FH S (PG,TOT)=0 D HDR
"RTN","FHPRR2",48,0)
 S (S1,V1)="" F K=0:0 S S1=$O(^TMP($J,"S",S1)) Q:S1=""  F L1=0:0 S L1=$O(^TMP($J,"S",S1,L1)) Q:L1<1  S X0=^(L1) D L0
"RTN","FHPRR2",49,0)
 W !!,"Total Cost",?77,$J(TOT,12,2),! Q
"RTN","FHPRR2",50,0)
L0 D:$Y>(IOSL-7) HDR S Y0=^FHING(L1,0) G:'V0 L1
"RTN","FHPRR2",51,0)
 S X1=$P(Y0,"^",4) S:X1 X1=$P($G(^FH(113.2,X1,0)),"^",1) I X1'=V1 S V1=X1 W !!?5,"Vendor: ",X1,!
"RTN","FHPRR2",52,0)
L1 S I1=$P(Y0,"^",17),X1=$S('I1:"",1:X0/I1)
"RTN","FHPRR2",53,0)
 S I1=$P(Y0,"^",8),X2=$S('I1:"",1:X1/I1),X3=$P(Y0,"^",9)*(X2+.99\1) S:'X3 X3="" I X3 S X3=$J(X3,0,2),TOT=TOT+X3,%=$L(X3) I %>6 S X3=$E(X3,1,%-6)_","_$E(X3,%-5,%)
"RTN","FHPRR2",54,0)
 S X=X0 D COM S X0=X,X=X1 D COM S X1=X,X=X2 D COM S X2=X
"RTN","FHPRR2",55,0)
 W !,$P(Y0,"^",1),?63,$J(X2,8)," ",$P(Y0,"^",5),?80,$J(X3,9),?93,$J(X1,8)," ",$P(Y0,"^",6),?118,$J(X0,8)," ",$P(Y0,"^",16) Q
"RTN","FHPRR2",56,0)
COM Q:X=""  S X=X+.99\1,%=$L(X) Q:%<4  S X=$E(X,1,%-3)_","_$E(X,%-2,%) Q
"RTN","FHPRR2",57,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,DTP,?51,"P R O J E C T E D   U S A G E ",?125,"Page ",PG
"RTN","FHPRR2",58,0)
 W !!,"Avg. Total Census = ",T0,?(131-$L(H1)\2),H1
"RTN","FHPRR2",59,0)
 W !!,"Ingredient",?64,"Purchase Qty",?84,"Cost",?97,"Issue Qty",?121,"Recipe Qty"
"RTN","FHPRR2",60,0)
 W ! F K=1:1:131 W "-"
"RTN","FHPRR2",61,0)
 Q
"RTN","FHPRW")
0^275^B20787507
"RTN","FHPRW",1,0)
FHPRW ;Hines OIFO/REL,RTK - List Dietetic Locations ;5/13/94  14:57 
"RTN","FHPRW",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRW",3,0)
F1 R !!,"Select LOCATION (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S WRD=0
"RTN","FHPRW",4,0)
 E  K DIC S DIC="^FH(119.6,",DIC(0)="EQM" D ^DIC K DIC G:Y<1 F1 S WRD=+Y
"RTN","FHPRW",5,0)
 I 'WRD W !!,"Verifying completeness of room-bed & ward assignments ..." D VER
"RTN","FHPRW",6,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRW",7,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRW",FHLST="WRD" D EN2^FH G KIL
"RTN","FHPRW",8,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRW",9,0)
Q1 ; Print Dietetic Ward Profile
"RTN","FHPRW",10,0)
 K ^TMP($J) D NOW^%DTC S NOW=%,PG=0 I WRD S K1=WRD D Q2 W ! Q
"RTN","FHPRW",11,0)
 F NX=0:0 S NX=$O(^FH(119.6,NX)) Q:NX<1  S X=$G(^(NX,0)),P0=$P(X,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0),WRDN=$P(X,"^",1),^TMP($J,"FHW",P0_"~"_WRDN)=NX
"RTN","FHPRW",12,0)
 S NX="" F  S NX=$O(^TMP($J,"FHW",NX)) Q:NX=""  S K1=+$G(^(NX)) I K1 D Q2
"RTN","FHPRW",13,0)
 W ! Q
"RTN","FHPRW",14,0)
Q2 S X=^FH(119.6,K1,0),NODE1=$G(^FH(119.6,K1,1)) D BLD,HDR
"RTN","FHPRW",15,0)
 W !!,"Print Order:",?22,$P(X,"^",4)
"RTN","FHPRW",16,0)
 W !,"Type of Location:",?22,$S($P(X,U,3)="O":"OUTPATIENT",1:"INPATIENT")
"RTN","FHPRW",17,0)
 W !,"Assigned Clinician:",?22 S Z=$P(X,"^",2) I Z W $P($G(^VA(200,Z,0)),"^",1)
"RTN","FHPRW",18,0)
 W !,"Tray Assembly:",?22 S Z=$P(X,"^",5) I Z W $P($G(^FH(119.72,Z,0)),"^",1) S Z=$P(X,"^",17) S:Z="" Z=100 W "   (",Z,"%)"
"RTN","FHPRW",19,0)
 W !,"Cafeteria:",?22 S Z=$P(X,"^",6) I Z W $P($G(^FH(119.72,Z,0)),"^",1) S Z=$P(X,"^",18) S:Z="" Z=100 W "   (",Z,"%)"
"RTN","FHPRW",20,0)
 W !,"Dining Room:",?22 S Z=$P(X,"^",7) I Z W "Yes" S Z=$P(X,"^",19) S:Z="" Z=100 W "   (",Z,"%)"
"RTN","FHPRW",21,0)
 W !,"Supplemental Fdgs.:",?22 S Z=$P(X,"^",9) I Z W $P($G(^FH(119.74,Z,0)),"^",1)
"RTN","FHPRW",22,0)
 W !,"Diet Communication:",?22 S Z=$P(X,"^",8) I Z W $P($G(^FH(119.73,Z,0)),"^",1)
"RTN","FHPRW",23,0)
 W !!,"Admission Diet:",?22 S Z=$P(X,"^",15) I Z W $P($G(^FH(111,Z,0)),"^",1)
"RTN","FHPRW",24,0)
 E  I $P(X,"^",16)="Y" W "NO ORDER"
"RTN","FHPRW",25,0)
 W !!,"Review Frequencies:"
"RTN","FHPRW",26,0)
 W !!?5,"NPO's:" S Z=$P(X,"^",11) W:Z ?19,$J(Z,3,0)," days"
"RTN","FHPRW",27,0)
 W ?45,"Admit Status:" S Z=$P(X,"^",14) W:Z ?59,$J(Z,3,0)," days"
"RTN","FHPRW",28,0)
 W !?5,"Tubefeedings:" S Z=$P(X,"^",12) W:Z ?19,$J(Z,3,0)," days"
"RTN","FHPRW",29,0)
 W ?45,"Supp. Fdgs.:" S Z=$P(X,"^",13) W:Z ?59,$J(Z,3,0)," days"
"RTN","FHPRW",30,0)
 W !!?5,"Status I:" S Z=$P(X,"^",20) W:Z ?19,$J(Z,3,0)," days"
"RTN","FHPRW",31,0)
 W ?45,"Status III:" S Z=$P(X,"^",22) W:Z ?59,$J(Z,3,0)," days"
"RTN","FHPRW",32,0)
 W !?5,"Status II:" S Z=$P(X,"^",21) W:Z ?19,$J(Z,3,0)," days"
"RTN","FHPRW",33,0)
 W ?45,"Status IV:" S Z=$P(X,"^",23) W:Z ?59,$J(Z,3,0)," days"
"RTN","FHPRW",34,0)
 S FHY=$P(X,"^",24) W !!,"Bulk Nourishment Orders:",!
"RTN","FHPRW",35,0)
 K P S N=0,NM="" F  S NM=$O(^TMP($J,"B",NM)) Q:NM=""  S N=N+1,P(N)=$J(^(NM),3,0)_" "_$P(NM,"~",1)
"RTN","FHPRW",36,0)
 I N S (Z,K)=N+1\2 F LL=1:1:Z W !?5,P(LL) S K=K+1 I $D(P(K)) W ?45,P(K)
"RTN","FHPRW",37,0)
 W !!,"Room-Beds Assigned:",!
"RTN","FHPRW",38,0)
 K P S N=0,NM="" F  S NM=$O(^TMP($J,"R",NM)) Q:NM=""  S N=N+1,P(N)=$P(NM,"~",1)
"RTN","FHPRW",39,0)
 I N S Z=N+3\4 S K(22)=Z,K(39)=2*Z,K(54)=3*Z F LL=1:1:Z W !?5,P(LL) F MM=22,39,54 S K(MM)=K(MM)+1 I $D(P(K(MM))) W ?MM,P(K(MM))
"RTN","FHPRW",40,0)
 W !!,"Default MAS Wards:",!
"RTN","FHPRW",41,0)
 K P S N=0,NM="" F  S NM=$O(^TMP($J,"W",NM)) Q:NM=""  S N=N+1,P(N)=$P(NM,"~",1)
"RTN","FHPRW",42,0)
 I N S (Z,K)=N+1\2 F LL=1:1:Z W !?5,P(LL) S K=K+1 I $D(P(K)) W ?45,P(K)
"RTN","FHPRW",43,0)
 W !!,"Print Cafeteria on Tray Tickets: ",$S(FHY="Y":"YES",1:"NO")
"RTN","FHPRW",44,0)
 S FHOL=$P(NODE1,U,1),FHOLFIL=$S(FHOL["SC(":44,FHOL["DIC(42":42,1:0)
"RTN","FHPRW",45,0)
 S FHOLNM="" I FHOLFIL D
"RTN","FHPRW",46,0)
 .S FHOLIEN=$P(FHOL,";",1)
"RTN","FHPRW",47,0)
 .I FHOLFIL=42 S FHOLNM=$P($G(^DIC(42,FHOLIEN,0)),U,1)
"RTN","FHPRW",48,0)
 .I FHOLFIL=44 S FHOLNM=$P($G(^SC(FHOLIEN,0)),U,1)
"RTN","FHPRW",49,0)
 .W !!,"Outpatient Location: ",FHOLNM,!
"RTN","FHPRW",50,0)
 W !,"Maximum # of Days to Schedule Recurring Meal: ",$P(NODE1,U,2)
"RTN","FHPRW",51,0)
 W !,"Number of Days  for Review of Recurring Meal: ",$P(NODE1,U,3)
"RTN","FHPRW",52,0)
 W !!,"Non-VA Facility? ",$S($P(NODE1,U,4)="Y":"YES",1:"NO")
"RTN","FHPRW",53,0)
 W ! Q
"RTN","FHPRW",54,0)
BLD ; Build temp files
"RTN","FHPRW",55,0)
 K ^TMP($J,"B"),^TMP($J,"R"),^TMP($J,"W")
"RTN","FHPRW",56,0)
 F LL=0:0 S LL=$O(^FH(119.6,K1,"BN",LL)) Q:LL<1  S Y=^(LL,0) D B1
"RTN","FHPRW",57,0)
 F LL=0:0 S LL=$O(^FH(119.6,K1,"W",LL)) Q:LL<1  S Y=^(LL,0) D B2
"RTN","FHPRW",58,0)
 F LL=0:0 S LL=$O(^FH(119.6,K1,"R",LL)) Q:LL<1  S Y=^(LL,0) D B3
"RTN","FHPRW",59,0)
 Q
"RTN","FHPRW",60,0)
B1 S N=+Y,Q=$P(Y,"^",2) Q:'N!('Q)  S N=$P($G(^FH(118,N,0)),"^",1) Q:N=""  S ^TMP($J,"B",N_"~"_(+Y))=Q Q
"RTN","FHPRW",61,0)
B2 S N=$P($G(^DIC(42,+Y,0)),"^",1) Q:N=""  S ^TMP($J,"W",N_"~"_(+Y))="" Q
"RTN","FHPRW",62,0)
B3 S N=$P($G(^DG(405.4,+Y,0)),"^",1) Q:N=""  S ^TMP($J,"R",N_"~"_(+Y))="" Q
"RTN","FHPRW",63,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=NOW D DTP^FH W !,$E(DTP,1,9),?19,"D I E T E T I C   L O C A T I O N   P R O F I L E",?73,"Page ",PG
"RTN","FHPRW",64,0)
 S Y=$P(X,"^",1) W !!?(78-$L(Y)\2),Y
"RTN","FHPRW",65,0)
 W !,"-------------------------------------------------------------------------------",! Q
"RTN","FHPRW",66,0)
VER ; Verify completeness of data base
"RTN","FHPRW",67,0)
 F LL=0:0 S LL=$O(^DG(405.4,LL)) Q:LL'>0  I '$D(^FH(119.6,"AR",LL)) W !,"Room ",$P(^DG(405.4,LL,0),"^",1)," not assigned to any Dietetic Ward"
"RTN","FHPRW",68,0)
 F LL=0:0 S LL=$O(^DIC(42,LL)) Q:LL'>0  I $G(^DIC(42,LL,"ORDER")),'$D(^FH(119.6,"AW",LL)) W !,"MAS Ward ",$P(^DIC(42,LL,0),"^",1)," not assigned to any Dietetics Ward"
"RTN","FHPRW",69,0)
 Q
"RTN","FHPRW",70,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRW1")
0^276^B5749467
"RTN","FHPRW1",1,0)
FHPRW1 ; HISC/REL - List Facilities ;4/27/93  13:34 
"RTN","FHPRW1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRW1",3,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHPRW1",4,0)
 I $D(IO("Q")) S FHPGM="Q1^FHPRW1",FHLST="" D EN2^FH G KIL
"RTN","FHPRW1",5,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHPRW1",6,0)
Q1 ; Print Facilities' Information
"RTN","FHPRW1",7,0)
 D NOW^%DTC S NOW=%,PG=0
"RTN","FHPRW1",8,0)
 F K1=0:0 S K1=$O(^FH(119.71,K1)) Q:K1'>0  D Q2
"RTN","FHPRW1",9,0)
 D ^FHPRW2,^FHPRW3,^FHPRW4 W ! Q
"RTN","FHPRW1",10,0)
Q2 S X=^FH(119.71,K1,0) D SVC,HDR
"RTN","FHPRW1",11,0)
 W !!,"Full Names on Daily Menu:",?40,$S($P(X,"^",2)="Y":"YES",1:"NO")
"RTN","FHPRW1",12,0)
 W !,"Print Meal Distribution:",?40,$S($P(X,"^",5)="Y":"YES",1:"NO")
"RTN","FHPRW1",13,0)
 W !,"Separate Production Summary Pages:",?40,$S($P(X,"^",7)="Y":"YES",1:"NO")
"RTN","FHPRW1",14,0)
 W !,"Separate Recipe Preparation Pages:",?40,$S($P(X,"^",4)="Y":"YES",1:"NO")
"RTN","FHPRW1",15,0)
 W !,"Separate Storeroom Pages:",?40,$S($P(X,"^",6)="Y":"YES",1:"NO")
"RTN","FHPRW1",16,0)
 I $D(^TMP($J,"T")) W !!,"Associated Tray Lines:",! S NX="" F  S NX=$O(^TMP($J,"T",NX)) Q:NX=""  W !?5,$P(NX,"~",1)
"RTN","FHPRW1",17,0)
 I $D(^TMP($J,"C")) W !!,"Associated Cafeterias:",! S NX="" F  S NX=$O(^TMP($J,"C",NX)) Q:NX=""  W !?5,$P(NX,"~",1)
"RTN","FHPRW1",18,0)
 I $D(^TMP($J,"S")) W !!,"Associated Supplemental Fdg. Sites:",! S NX="" F  S NX=$O(^TMP($J,"S",NX)) Q:NX=""  W !?5,$P(NX,"~",1)
"RTN","FHPRW1",19,0)
 W ! Q
"RTN","FHPRW1",20,0)
SVC ; Build Service temp file
"RTN","FHPRW1",21,0)
 K ^TMP($J)
"RTN","FHPRW1",22,0)
 F LL=0:0 S LL=$O(^FH(119.72,LL)) Q:LL<1  S Y=^(LL,0) I $P(Y,"^",3)=K1 S TYP=$P(Y,"^",2) D S1
"RTN","FHPRW1",23,0)
 F LL=0:0 S LL=$O(^FH(119.74,LL)) Q:LL<1  S Y=^(LL,0) I $P(Y,"^",3)=K1 S TYP="S" D S1
"RTN","FHPRW1",24,0)
 Q
"RTN","FHPRW1",25,0)
S1 I $G(^FH(119.72,LL,"I"))'="Y" S ^TMP($J,TYP,$P(Y,"^",1)_"~"_LL)="" Q
"RTN","FHPRW1",26,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=NOW D DTP^FH W !,$E(DTP,1,9),?21,"P R O D U C T I O N   F A C I L I T Y",?73,"Page ",PG
"RTN","FHPRW1",27,0)
 S Y=$P(X,"^",1) W !!?(78-$L(Y)\2),Y
"RTN","FHPRW1",28,0)
 W !,"-------------------------------------------------------------------------------",! Q
"RTN","FHPRW1",29,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHPRW2")
0^277^B5757118
"RTN","FHPRW2",1,0)
FHPRW2 ; HISC/REL - List Service Points ;4/25/93  14:24 
"RTN","FHPRW2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRW2",3,0)
 F K1=0:0 S K1=$O(^FH(119.72,K1)) Q:K1'>0  D Q3
"RTN","FHPRW2",4,0)
 Q
"RTN","FHPRW2",5,0)
Q3 I $G(^FH(119.72,K1,"I"))="Y" Q
"RTN","FHPRW2",6,0)
 S X=^FH(119.72,K1,0),TYP=$P(X,"^",2) D BLD,HDR
"RTN","FHPRW2",7,0)
 W !!,"Type of Service:",?25,$S(TYP="T":"Tray Line",TYP="C":"Cafeteria",1:"")
"RTN","FHPRW2",8,0)
 W !,"Short Name:",?25,$P(X,"^",4)
"RTN","FHPRW2",9,0)
 W !,"Production Facility:",?25 S Z=$P(X,"^",3) W:Z $P($G(^FH(119.71,Z,0)),"^",1)
"RTN","FHPRW2",10,0)
 D WRD G:$O(^FH(119.72,K1,"A",0))="" Q31
"RTN","FHPRW2",11,0)
 W !!,"Production Diet %:",?28,"Sun     Mon     Tue     Wed     Thu     Fri     Sat",!
"RTN","FHPRW2",12,0)
 K S F L=1:1:7 S S(L)=0
"RTN","FHPRW2",13,0)
 F NX=0:0 S NX=$O(^FH(119.72,K1,"A",NX)) Q:NX<1  S X=^(NX,0) D P2
"RTN","FHPRW2",14,0)
 W !?3,"Not Eating",?23 F L=1:1:7 S Z=$S(S(L)<100:100-S(L),1:0),S(L)=S(L)+Z W $S('Z:$J("",8),1:$J(Z,8,1))
"RTN","FHPRW2",15,0)
 W !?3,"Total Sum",?23 F L=1:1:7 W $J(S(L),8,1)
"RTN","FHPRW2",16,0)
Q31 Q:$O(^FH(119.72,K1,"B",0))=""
"RTN","FHPRW2",17,0)
 W !!,"Additional Meals:",?32,"Meal",?40,"Sun  Mon  Tue  Wed  Thu  Fri  Sat"
"RTN","FHPRW2",18,0)
 F NX=0:0 S NX=$O(^FH(119.72,K1,"B",NX)) Q:NX<1  S X=^(NX,0) D P1
"RTN","FHPRW2",19,0)
 W ! Q
"RTN","FHPRW2",20,0)
P1 S NAM=$P($G(^FH(116.2,NX,0)),"^",1) W !!?3,$E(NAM,1,26)
"RTN","FHPRW2",21,0)
 F L=1:1:3 W:L>1 ! W ?32,$P("Brk^Noon^Even","^",L),?38 F K=1:1:7 S Z=$P(X,"^",K*3-2+L) W $S('Z:$J("",5),1:$J(Z,5))
"RTN","FHPRW2",22,0)
 Q
"RTN","FHPRW2",23,0)
P2 S NAM=$P($G(^FH(116.2,NX,0)),"^",1) W !?3,$E(NAM,1,18),?23
"RTN","FHPRW2",24,0)
 F L=1:1:7 S Z=$P(X,"^",L+1),S(L)=S(L)+Z W $S('Z:$J("",8),1:$J(Z,8,1))
"RTN","FHPRW2",25,0)
 Q
"RTN","FHPRW2",26,0)
WRD W !!,"Associated Dietetic Wards:",!
"RTN","FHPRW2",27,0)
 K P S N=0,NM="" F  S NM=$O(^TMP($J,NM)) Q:NM=""  S N=N+1,P(N)=$P(NM,"~",1)
"RTN","FHPRW2",28,0)
 I N S (Z,K)=N+1\2 F LL=1:1:Z W !?5,P(LL) S K=K+1 I $D(P(K)) W ?45,P(K)
"RTN","FHPRW2",29,0)
 Q
"RTN","FHPRW2",30,0)
BLD ; Build temp files
"RTN","FHPRW2",31,0)
 K ^TMP($J) S Z=$S(TYP="T":5,TYP="C":6,1:0)
"RTN","FHPRW2",32,0)
 F LL=0:0 S LL=$O(^FH(119.6,LL)) Q:LL<1  S Y=^(LL,0) I $P(Y,"^",Z)=K1 D B1
"RTN","FHPRW2",33,0)
 Q
"RTN","FHPRW2",34,0)
B1 S ^TMP($J,$P(Y,"^",1)_"~"_LL)="" Q
"RTN","FHPRW2",35,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=NOW D DTP^FH W !,$E(DTP,1,9),?27,"S E R V I C E   P O I N T",?73,"Page ",PG
"RTN","FHPRW2",36,0)
 S Y=$P(X,"^",1) W !!?(78-$L(Y)\2),Y
"RTN","FHPRW2",37,0)
 W !,"-------------------------------------------------------------------------------",! Q
"RTN","FHPRW3")
0^278^B5689438
"RTN","FHPRW3",1,0)
FHPRW3 ; HISC/REL - List Communication Offices ;4/25/93  14:23 
"RTN","FHPRW3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRW3",3,0)
 F K1=0:0 S K1=$O(^FH(119.73,K1)) Q:K1'>0  D Q4
"RTN","FHPRW3",4,0)
 Q
"RTN","FHPRW3",5,0)
Q4 S X=^FH(119.73,K1,0) D BLD,HDR
"RTN","FHPRW3",6,0)
 S X1=$G(^FH(119.73,K1,1)),X2=$G(^(2))
"RTN","FHPRW3",7,0)
 F LL=1:1:6 S Y=$P(X2,"^",LL) I Y'="" D MIP^FHSYSP S $P(X2,"^",LL)=Y
"RTN","FHPRW3",8,0)
 W !!,"Provide Bagged Meals:",?25 S Z=$P(X2,"^",10) W $S(Z="Y":"YES",1:"NO")
"RTN","FHPRW3",9,0)
 W !!?44,"Breakfast     Noon     Evening",!
"RTN","FHPRW3",10,0)
 W !,?5,"Meal Time:" W ?46,$J($P(X2,"^",7),6),?57,$J($P(X2,"^",8),6),?67,$J($P(X2,"^",9),6)
"RTN","FHPRW3",11,0)
 W !!,?5,"Early Time 1:" W ?46,$J($P(X1,"^",1),6),?57,$J($P(X1,"^",7),6),?67,$J($P(X1,"^",13),6)
"RTN","FHPRW3",12,0)
 W !,?5,"Early Time 2:" W ?46,$J($P(X1,"^",2),6),?57,$J($P(X1,"^",8),6),?67,$J($P(X1,"^",14),6)
"RTN","FHPRW3",13,0)
 W !,?5,"Early Time 3:" W ?46,$J($P(X1,"^",3),6),?57,$J($P(X1,"^",9),6),?67,$J($P(X1,"^",15),6)
"RTN","FHPRW3",14,0)
 W !!,?5,"Late Time 1:" W ?46,$J($P(X1,"^",4),6),?57,$J($P(X1,"^",10),6),?67,$J($P(X1,"^",16),6)
"RTN","FHPRW3",15,0)
 W !,?5,"Late Time 2:" W ?46,$J($P(X1,"^",5),6),?57,$J($P(X1,"^",11),6),?67,$J($P(X1,"^",17),6)
"RTN","FHPRW3",16,0)
 W !,?5,"Late Time 3:" W ?46,$J($P(X1,"^",6),6),?57,$J($P(X1,"^",12),6),?67,$J($P(X1,"^",18),6)
"RTN","FHPRW3",17,0)
 W !!,?5,"Late Alarm Begin:" W ?46,$J($P(X2,"^",1),6),?57,$J($P(X2,"^",3),6),?67,$J($P(X2,"^",5),6)
"RTN","FHPRW3",18,0)
 W !,?5,"Late Alarm End:" W ?46,$J($P(X2,"^",2),6),?57,$J($P(X2,"^",4),6),?67,$J($P(X2,"^",6),6)
"RTN","FHPRW3",19,0)
 D WRD W ! Q
"RTN","FHPRW3",20,0)
WRD W !!,"Associated Dietetic Wards:",!
"RTN","FHPRW3",21,0)
 K P S N=0,NM="" F  S NM=$O(^TMP($J,NM)) Q:NM=""  S N=N+1,P(N)=$P(NM,"~",1)
"RTN","FHPRW3",22,0)
 I N S (Z,K)=N+1\2 F LL=1:1:Z W !?5,P(LL) S K=K+1 I $D(P(K)) W ?45,P(K)
"RTN","FHPRW3",23,0)
 Q
"RTN","FHPRW3",24,0)
BLD ; Build temp files
"RTN","FHPRW3",25,0)
 K ^TMP($J)
"RTN","FHPRW3",26,0)
 F LL=0:0 S LL=$O(^FH(119.6,LL)) Q:LL<1  S Y=^(LL,0) I $P(Y,"^",8)=K1 D B1
"RTN","FHPRW3",27,0)
 Q
"RTN","FHPRW3",28,0)
B1 S ^TMP($J,$P(Y,"^",1)_"~"_LL)="" Q
"RTN","FHPRW3",29,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=NOW D DTP^FH W !,$E(DTP,1,9),?20,"C O M M U N I C A T I O N   O F F I C E",?73,"Page ",PG
"RTN","FHPRW3",30,0)
 S Y=$P(X,"^",1) W !!?(78-$L(Y)\2),Y
"RTN","FHPRW3",31,0)
 W !,"-------------------------------------------------------------------------------",! Q
"RTN","FHPRW4")
0^279^B2683798
"RTN","FHPRW4",1,0)
FHPRW4 ; HISC/REL - List Supp. Fdg. Sites ;4/25/93  14:23 
"RTN","FHPRW4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHPRW4",3,0)
 F K1=0:0 S K1=$O(^FH(119.74,K1)) Q:K1'>0  D Q5
"RTN","FHPRW4",4,0)
 Q
"RTN","FHPRW4",5,0)
Q5 S X=^FH(119.74,K1,0) D BLD,HDR
"RTN","FHPRW4",6,0)
 W !!,"Short Name:",?25,$P(X,"^",2)
"RTN","FHPRW4",7,0)
 W !,"Separate Labels:",?25,$S($P(X,"^",4)="Y":"YES",1:"NO")
"RTN","FHPRW4",8,0)
 W !,"Items on Ward Lists:",?25,$S($P(X,"^",5)="Y":"YES",1:"NO")
"RTN","FHPRW4",9,0)
 W !,"Production Facility:",?25 S Z=$P(X,"^",3) W:Z $P($G(^FH(119.71,Z,0)),"^",1)
"RTN","FHPRW4",10,0)
 D WRD Q
"RTN","FHPRW4",11,0)
WRD W !!,"Associated Dietetic Wards:",!
"RTN","FHPRW4",12,0)
 K P S N=0,NM="" F  S NM=$O(^TMP($J,NM)) Q:NM=""  S N=N+1,P(N)=$P(NM,"~",1)
"RTN","FHPRW4",13,0)
 I N S (Z,K)=N+1\2 F LL=1:1:Z W !?5,P(LL) S K=K+1 I $D(P(K)) W ?45,P(K)
"RTN","FHPRW4",14,0)
 Q
"RTN","FHPRW4",15,0)
BLD ; Build temp files
"RTN","FHPRW4",16,0)
 K ^TMP($J)
"RTN","FHPRW4",17,0)
 F LL=0:0 S LL=$O(^FH(119.6,LL)) Q:LL<1  S Y=^(LL,0) I $P(Y,"^",9)=K1 D B1
"RTN","FHPRW4",18,0)
 Q
"RTN","FHPRW4",19,0)
B1 S ^TMP($J,$P(Y,"^",1)_"~"_LL)="" Q
"RTN","FHPRW4",20,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=NOW D DTP^FH W !,$E(DTP,1,9),?15,"S U P P L E M E N T A L   F E E D I N G   S I T E",?73,"Page ",PG
"RTN","FHPRW4",21,0)
 S Y=$P(X,"^",1) W !!?(78-$L(Y)\2),Y
"RTN","FHPRW4",22,0)
 W !,"-------------------------------------------------------------------------------",! Q
"RTN","FHREC")
0^282^B5543081
"RTN","FHREC",1,0)
FHREC ; HISC/REL - Recipe Management ;2/13/95  14:29 
"RTN","FHREC",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREC",3,0)
EN1 ; Enter/Edit Recipes
"RTN","FHREC",4,0)
 S (DIC,DIE)="^FH(114,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=114 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
"RTN","FHREC",5,0)
 S DA=+Y,DR="[FHINPR]" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=114 D ^DIE
"RTN","FHREC",6,0)
 I $D(DA) S REC=DA D ANAL^FHREC5
"RTN","FHREC",7,0)
 D KIL G EN1
"RTN","FHREC",8,0)
EN3 ; Enter/Edit Recipe Categories
"RTN","FHREC",9,0)
 S (DIC,DIE)="^FH(114.1,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=114.1 W ! D ^DIC K DIC,DLAYGO G KIL:"^"[X!$D(DTOUT),EN3:Y<1
"RTN","FHREC",10,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=114.1 D ^DIE,KIL G EN3
"RTN","FHREC",11,0)
EN4 ; List Recipe Categories
"RTN","FHREC",12,0)
 W ! S L=0,DIC="^FH(114.1,",FLDS="[FHRECC]",BY="2,.01"
"RTN","FHREC",13,0)
 S FR="@",TO="",DHD="RECIPE CATEGORIES" D EN1^DIP,RSET Q
"RTN","FHREC",14,0)
EN5 ; Enter/Edit Serving Utensils
"RTN","FHREC",15,0)
 S (DIC,DIE)="^FH(114.3,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=114.3 W ! D ^DIC K DIC,DLAYGO G KIL:"^"[X!$D(DTOUT),EN5:Y<1
"RTN","FHREC",16,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=114.3 D ^DIE,KIL G EN5
"RTN","FHREC",17,0)
EN6 ; List Serving Utensils
"RTN","FHREC",18,0)
 W ! S L=0,DIC="^FH(114.3,",FLDS="NAME",BY="NAME"
"RTN","FHREC",19,0)
 S (FR,TO)="",DHD="SERVING UTENSILS" D EN1^DIP,RSET Q
"RTN","FHREC",20,0)
EN7 ; Enter/Edit Equipment
"RTN","FHREC",21,0)
 S (DIC,DIE)="^FH(114.4,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=114.4 W ! D ^DIC K DIC,DLAYGO G KIL:"^"[X!$D(DTOUT),EN7:Y<1
"RTN","FHREC",22,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=114.4 D ^DIE,KIL G EN7
"RTN","FHREC",23,0)
EN8 ; List Equipment
"RTN","FHREC",24,0)
 W ! S L=0,DIC="^FH(114.4,",FLDS="NAME",BY="NAME"
"RTN","FHREC",25,0)
 S (FR,TO)="",DHD="EQUIPMENT" D EN1^DIP,RSET Q
"RTN","FHREC",26,0)
EN9 ; Enter/Edit Preparation Areas
"RTN","FHREC",27,0)
 S (DIC,DIE)="^FH(114.2,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=114.2 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN9:Y<1
"RTN","FHREC",28,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=114.2 D ^DIE,KIL G EN9
"RTN","FHREC",29,0)
EN10 ; List Preparation Areas
"RTN","FHREC",30,0)
 W ! S L=0,DIC="^FH(114.2,",FLDS="[FHPROP]",BY="PRINT ORDER,NAME"
"RTN","FHREC",31,0)
 S FR="@",TO="",DHD="PREPARATION AREAS" D EN1^DIP,RSET Q
"RTN","FHREC",32,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHREC",33,0)
KIL G KILL^XUSCLEAN
"RTN","FHREC1")
0^283^B7950704
"RTN","FHREC1",1,0)
FHREC1 ; HISC/REL - Units Conversion ;2/24/92  13:33 
"RTN","FHREC1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREC1",3,0)
EN1 ; Units Input - UNT=Recipe Unit, X=Input - Error if X undefined
"RTN","FHREC1",4,0)
 K A1 D TYP I TYP="E" S X=+X G:X'?1N.N!(X<1) F5 G KIL
"RTN","FHREC1",5,0)
 I X["#" F K=0:0 S A1=$F(X,"#") Q:'A1  S X=$E(X,0,A1-2)_"LBS"_$E(X,A1,99)
"RTN","FHREC1",6,0)
 I X["," F K=0:0 S A1=$F(X,",") Q:'A1  S X=$E(X,0,A1-2)_$E(X,A1,99)
"RTN","FHREC1",7,0)
 I X["-" F K=0:0 S A1=$F(X,"-") Q:'A1  S X=$E(X,0,A1-2)_" "_$E(X,A1,99)
"RTN","FHREC1",8,0)
F1 S A1=$P(X," ",1),X=$P(X," ",2,99) I A1="" G F4:X="",F1
"RTN","FHREC1",9,0)
 G:A1'?.E1U.E D1 F K=1:1:$L(A1) Q:$E(A1,K)?1U
"RTN","FHREC1",10,0)
 S A3=$E(A1,K,99),A1=$E(A1,0,K-1),A2="" G D3
"RTN","FHREC1",11,0)
D1 G:X="" F5 S A2=$P(X," ",1),X=$P(X," ",2,99) G:A2'?.E1U.E D2
"RTN","FHREC1",12,0)
 F K=1:1:$L(A2) Q:$E(A2,K)?1U
"RTN","FHREC1",13,0)
 S A3=$E(A2,K,99),A2=$E(A2,0,K-1) G D3
"RTN","FHREC1",14,0)
D2 G:X="" F5 S A3=$P(X," ",1),X=$P(X," ",2,99) G:A3'?1U.E F5
"RTN","FHREC1",15,0)
D3 S:A1?1N1"/"1N&(A2="") A2=A1,A1=0 I A1'?1N.N,A1'?.N1".".N G F5
"RTN","FHREC1",16,0)
 I A2'="" G:A2'?1N1"/"1N F5 S Y1=+A2,Y2=$E(A2,3) G:Y1=0!(Y1'<Y2) F5 S A1=A1+(Y1/Y2)
"RTN","FHREC1",17,0)
 S:A3["." A3=$P(A3,".",1) S A2=A3
"RTN","FHREC1",18,0)
 I TYP="W" S S1=$F("LBS OZ TBSP TSP",A2) G:'S1 F5 S S1=$S(S1<5:1,S1<8:2,S1<13:3,1:4) G F3
"RTN","FHREC1",19,0)
 S S1=$F("GALS QTS QUARTS PINTS PTS CUPS FLOZ TBSP TSP",A2) G:'S1 F5 S S1=$S(S1<6:1,S1<17:2,S1<27:3,S1<32:4,S1<37:5,S1<42:6,1:7)
"RTN","FHREC1",20,0)
F3 S:'$D(A1(S1)) A1(S1)=0 S A1(S1)=A1(S1)+A1 G F1
"RTN","FHREC1",21,0)
F4 D DIV S X=0 F K=1:1 S P1=$P(P0,",",K) Q:P1=""  S:$D(A1(K)) X=X+(A1(K)/P1)
"RTN","FHREC1",22,0)
 S X=$J(X,0,5),X=+X G KIL
"RTN","FHREC1",23,0)
F5 K X G KIL
"RTN","FHREC1",24,0)
TYP S TYP=$S(UNT="EACH":"E",UNT="LB":"W",1:"V") Q
"RTN","FHREC1",25,0)
DIV I TYP="W" S P0="1,16,32,96"
"RTN","FHREC1",26,0)
 E  S P0="1,4,8,16,128,256,768"
"RTN","FHREC1",27,0)
 Q
"RTN","FHREC1",28,0)
EN2 ; Units Output - UNT=Recipe Unit, Y=Amount - return Y
"RTN","FHREC1",29,0)
 D TYP I TYP="E" S Y=$J(Y,0,0)_" "_UNT G KIL
"RTN","FHREC1",30,0)
 S A2=$S(TYP="W":"LB OZ TBSP TSP",1:"GAL QTS PTS CUPS FLOZ TBSP TSP")
"RTN","FHREC1",31,0)
 D DIV F K=1:1 S P1=$P(P0,",",K) Q:P1=""!((Y*P1)'<1)
"RTN","FHREC1",32,0)
 S (Y1,Y2)="" S:P1="" K=K-1,P1=$P(P0,",",K) S P2=$P(P0,",",K+1)
"RTN","FHREC1",33,0)
 S U1=$P(A2," ",K),U2=$P(A2," ",K+1) I P2="" S P2=P1,P1="",U2=U1,U1="" G N1
"RTN","FHREC1",34,0)
 S A1=Y*P1 I A1\1 S Y1=A1\1,Y=Y-(A1\1/P1)
"RTN","FHREC1",35,0)
N1 S A1=Y*P2 S:A1#1>.875 A1=(A1+1)\1 I A1\1 S Y2=(A1\1),A1=A1#1
"RTN","FHREC1",36,0)
 I P1,Y2'<(P2/P1) S Y1=Y1+1,Y2=Y2-(P2/P1) S:'Y2 Y2=""
"RTN","FHREC1",37,0)
N2 S S1=$S(A1<.125:"",A1<.375:"1/4",A1<.625:"1/2",1:"3/4") I Y2'=""!(S1="") G N3
"RTN","FHREC1",38,0)
 G:'$P(P0,",",K+2) N3 S A1=A1*$P(P0,",",K+2)/P2+.5\1 G:'A1 N3
"RTN","FHREC1",39,0)
 I A1'<($P(P0,",",K+2)/P2) S Y2=Y2+1,S1="" G N3
"RTN","FHREC1",40,0)
 S Y2=A1,U2=$P(A2," ",K+2),S1=""
"RTN","FHREC1",41,0)
N3 I S1'="" S:Y2'="" Y2=Y2_"-" S Y2=Y2_S1
"RTN","FHREC1",42,0)
 I Y1'="" S Y1=Y1_" "_U1 S:Y2'="" Y1=Y1_", "
"RTN","FHREC1",43,0)
 S:Y2'="" Y2=Y2_" "_U2 S Y=Y1_Y2 S:Y="" Y="1/8 TSP" G KIL
"RTN","FHREC1",44,0)
EN3 ; Portion size input
"RTN","FHREC1",45,0)
 F K=1:1 S A1=$E(X,K) I A1'?1N,A1'?1"." Q
"RTN","FHREC1",46,0)
 S A1=+$E(X,1,K-1),A2=$E(X,K,99) I 'A1 K X G KIL
"RTN","FHREC1",47,0)
 S:$E(A2,1)'?1U A2=$E(A2,2,99) S A3=$P(A2," ",2,99),A2=$P(A2," ",1) I A2="" K X G KIL
"RTN","FHREC1",48,0)
 I $P("OZ",A2,1)'="",$P("EACH",A2,1)'="",$P("FLOZ",A2,1)'="" K X G KIL
"RTN","FHREC1",49,0)
 S X=A1_"-"_$S(A2?1"O".E:"OZ",A2?1"E".E:"EACH",1:"FLOZ") S:A3'="" X=X_" "_A3 G KIL
"RTN","FHREC1",50,0)
KIL K A1,A2,A3,P1,P2,P0,K,S1,TYP,U1,U2,Y1,Y2 Q
"RTN","FHREC2")
0^284^B7690308
"RTN","FHREC2",1,0)
FHREC2 ; HISC/REL - Adjust Recipe ;4/28/95  09:45
"RTN","FHREC2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREC2",3,0)
EN1 ; Adjust Recipe - R1 = Recipe File No., S1 = No. Portions
"RTN","FHREC2",4,0)
 S R0=^FH(114,R1,0),P1=$P(R0,"^",2) Q:P1<1!(S1<1)
"RTN","FHREC2",5,0)
 D DISP D LN S N=0,MUL=S1/P1 W !
"RTN","FHREC2",6,0)
N1 S N=$O(^FH(114,R1,"I",N)) G:N<1 N2 S X=^(N,0),I2=+$P(X,"^",1),Y=$P(X,"^",2)*MUL
"RTN","FHREC2",7,0)
 S Y(0)=$G(^FHING(I2,0)),UNT=$P(Y(0),"^",16) D EN2^FHREC1
"RTN","FHREC2",8,0)
 W !!,$P(Y(0),"^",1),?60,Y G N1
"RTN","FHREC2",9,0)
N2 F K=0:0 S K=$O(^FH(114,R1,"R",K)) Q:K<1  S Y(0)=^(K,0) I +Y(0) W !!,"*",$P(^FH(114,+Y(0),0),"^",1),?60,$J(MUL*$P(Y(0),"^",2),0,0)," Portions"
"RTN","FHREC2",10,0)
 D LN W ! F K=0:0 S K=$O(^FH(114,R1,"X",K)) Q:K<1  W !,^(K,0)
"RTN","FHREC2",11,0)
 D LN W ! Q:$G(^FH(114,R1,"DBX",0))=""
"RTN","FHREC2",12,0)
 S P="" W !,"Diabetic Exchange: "
"RTN","FHREC2",13,0)
 F K=0:0 S K=$O(^FH(114,R1,"DBX",K)) Q:K<1  S Z=^(K,0) S:P'="" P=P_", " S Z1=$S($P(Z,"^",2):$P(Z,"^",2),1:1)_" "_$P($G(^FH(114.1,+Z,0)),"^",1) D:$L(P)+$L(Z1)'<60 EX S P=P_Z1
"RTN","FHREC2",14,0)
 W:P'="" ?19,P,!
"RTN","FHREC2",15,0)
 D LN W ! Q
"RTN","FHREC2",16,0)
EX W ?19,P S P="" W !
"RTN","FHREC2",17,0)
 Q
"RTN","FHREC2",18,0)
DISP W:PG @IOF W !?25,"A D J U S T E D   R E C I P E",?71,$E(DTP,1,9)
"RTN","FHREC2",19,0)
 S N=$P(R0,"^",1) W !!?(80-$L(N)\2),N
"RTN","FHREC2",20,0)
 W !!,"Portion Size: ",$P(R0,"^",3),?40,"No. Portions: ",S1
"RTN","FHREC2",21,0)
 W !,"Prep. Time:   ",$P(R0,"^",4),?40,"Srv. Utensil: " S Z=$P(R0,"^",6) I Z W $P(^FH(114.3,Z,0),"^",1)
"RTN","FHREC2",22,0)
 W !,"Equipment:    " S N=$O(^FH(114,R1,"E",0)) I N>0 S Z=^(N,0) W $P(^FH(114.4,Z,0),"^",1)
"RTN","FHREC2",23,0)
 W ?40,"Category:     " S Z=$P(R0,"^",7) I Z W $P(^FH(114.1,Z,0),"^",1)
"RTN","FHREC2",24,0)
 I N>0 F N=N:0 S N=$O(^FH(114,R1,"E",N)) Q:N<1  S Z=^(N,0) W !?14,$P(^FH(114.4,Z,0),"^",1)
"RTN","FHREC2",25,0)
 Q
"RTN","FHREC2",26,0)
LN W !!,"-  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -" Q
"RTN","FHREC2",27,0)
EN2 ; Print adjusted recipe
"RTN","FHREC2",28,0)
 S X="T",%DT="X" D ^%DT K %DT S DTP=Y D DTP^FH
"RTN","FHREC2",29,0)
 K DIC S DIC="^FH(114,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),EN2:Y<1 S R1=+Y
"RTN","FHREC2",30,0)
R0 R !!,"Number of Portions: ",S1:DTIME G KIL:'$T!("^"[S1) I +S1'=S1!(S1<1)!(S1>5000) W *7,"  Enter a number from 1 to 5000" G R0
"RTN","FHREC2",31,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHREC2",32,0)
 I $D(IO("Q")) S FHPGM="R1^FHREC2",FHLST="R1^S1^DTP" D EN2^FH G EN2
"RTN","FHREC2",33,0)
 U IO D R1 D ^%ZISC K %ZIS,IOP G EN2
"RTN","FHREC2",34,0)
R1 ; Entry Point to Print adjusted recipe
"RTN","FHREC2",35,0)
 K R F K1=0:0 S K1=$O(^FH(114,R1,"R",K1)) Q:K1<1  S Y=^(K1,0) D R2
"RTN","FHREC2",36,0)
 S PG=0 D EN1 S PG=1
"RTN","FHREC2",37,0)
 F R1=0:0 S R1=$O(R(R1)) Q:R1=""  S S1=R(R1) D EN1
"RTN","FHREC2",38,0)
 Q
"RTN","FHREC2",39,0)
R2 S MUL=$P(^FH(114,R1,0),"^",2) Q:'MUL  S MUL=S1/MUL
"RTN","FHREC2",40,0)
 S P1=$P(Y,"^",2)*MUL S:'$D(R(+Y)) R(+Y)=0 S R(+Y)=R(+Y)+P1 Q
"RTN","FHREC2",41,0)
KIL G KILL^XUSCLEAN
"RTN","FHREC3")
0^285^B2392359
"RTN","FHREC3",1,0)
FHREC3 ; HISC/REL - Re-cost recipes ;5/14/93  14:53 
"RTN","FHREC3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREC3",3,0)
A1 R !!,"Do you want to re-cost recipes? (Y/N): ",X:DTIME G:'$T!(X="^") KIL S:X="" X="?" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G A1
"RTN","FHREC3",4,0)
 G:X'?1"Y".E KIL
"RTN","FHREC3",5,0)
 W !!,"Beginning re-costing of all recipes ..." S CNT=0
"RTN","FHREC3",6,0)
 F R1=0:0 S R1=$O(^FH(114,R1)) Q:R1<1  D REC S CNT=CNT+1 W:CNT#10=0 "."
"RTN","FHREC3",7,0)
 W !!,"Done ...",! G KIL
"RTN","FHREC3",8,0)
REC S CST=0 F N=0:0 S N=$O(^FH(114,R1,"I",N)) Q:N<1  S X=^(N,0) D I1
"RTN","FHREC3",9,0)
 F N=0:0 S N=$O(^FH(114,R1,"R",N)) Q:N<1  S X=^(N,0) D R1
"RTN","FHREC3",10,0)
 S POR=$P(^FH(114,R1,0),"^",2) Q:'POR  S CST=+$J(CST/POR,0,3)
"RTN","FHREC3",11,0)
 S:CST $P(^FH(114,R1,0),"^",13)=CST Q
"RTN","FHREC3",12,0)
I1 S I2=$P(X,"^",1),AMT=$P(X,"^",2) Q:'I2  S Y0=$G(^FHING(I2,0))
"RTN","FHREC3",13,0)
 S C=$P(Y0,"^",17) Q:'C  S AMT=AMT/C
"RTN","FHREC3",14,0)
 S C=$P(Y0,"^",8) Q:'C  S AMT=AMT/C
"RTN","FHREC3",15,0)
 S C=$P(Y0,"^",9),CST=C*AMT+CST Q
"RTN","FHREC3",16,0)
R1 S R2=$P(X,"^",1),AMT=$P(X,"^",2) Q:'R2  S C=$P($G(^FH(114,R2,0)),"^",13)
"RTN","FHREC3",17,0)
 S CST=C*AMT+CST Q
"RTN","FHREC3",18,0)
KIL K AMT,C,CNT,CST,I2,N,POR,R1,R2,X,Y0 Q
"RTN","FHREC4")
0^286^B4501508
"RTN","FHREC4",1,0)
FHREC4 ; HISC/REL - Recipe List ;3/6/95  15:50
"RTN","FHREC4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREC4",3,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHREC4",4,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHREC4",5,0)
 I $D(IO("Q")) S FHPGM="Q1^FHREC4",FHLST="" D EN2^FH G KIL
"RTN","FHREC4",6,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHREC4",7,0)
Q1 ; Print Recipe List
"RTN","FHREC4",8,0)
 D NOW^%DTC S DTP=% D DTP^FH
"RTN","FHREC4",9,0)
 K ^TMP($J) F D0=0:0 S D0=$O(^FH(114,D0)) Q:D0<1  S X=^(D0,0) D SET
"RTN","FHREC4",10,0)
 S PG=0 D HDR S CAT=";M:MIX;D:DEHYDRATED;F:FROZEN;C:CANNED;X:CONCENTRATED;S:SCRATCH;I:IND/R-T-S;P:PARTIALLY PREP;R:R-T-S;"
"RTN","FHREC4",11,0)
 S N2="" F K=0:0 S N2=$O(^TMP($J,N2)) Q:N2=""  S N1="" F L=0:0 S N1=$O(^TMP($J,N2,N1)) Q:N1=""  F D0=0:0 S D0=$O(^TMP($J,N2,N1,D0)) Q:D0<1  D LST
"RTN","FHREC4",12,0)
 W ! Q
"RTN","FHREC4",13,0)
LST D:$Y>(IOSL-8) HDR S X=$G(^FH(114,D0,0))
"RTN","FHREC4",14,0)
 W !,$P(X,"^",1),?31,$P(X,"^",9) W:N2'="*****" ?58,N2
"RTN","FHREC4",15,0)
 S Y=$P(X,"^",11) I Y'="" S %=$F(CAT,";"_Y_":") S:%>0 Y=$P($E(CAT,%,999),";",1)
"RTN","FHREC4",16,0)
 W ?74,Y,?93,$P(X,"^",10),?101,$S($P(X,"^",8)="N":"NO",1:"")
"RTN","FHREC4",17,0)
 S Y=$P(X,"^",13) W:Y ?107,$J(Y,6,3) Q
"RTN","FHREC4",18,0)
SET S N1=$P(X,"^",1),N2=$P(X,"^",7) I N2 S N2=$P($G(^FH(114.1,N2,0)),"^",1)
"RTN","FHREC4",19,0)
 S:N2="" N2="*****" S ^TMP($J,N2,N1,D0)="" Q
"RTN","FHREC4",20,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,DTP,?54,"R E C I P E   L I S T",?124,"Page ",PG
"RTN","FHREC4",21,0)
 W !!,"NAME",?31,"SYNONYM",?58,"CATEGORY",?74,"PRE-PREP STATE",?91,"E-PREP",?100,"PRINT    COST"
"RTN","FHREC4",22,0)
 W !,"----------------------------------------------------------------------------------------------------------------------------------",! Q
"RTN","FHREC4",23,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHREC5")
0^287^B4574625
"RTN","FHREC5",1,0)
FHREC5 ; HISC/REL - Recipe Analysis ;5/10/93  10:53
"RTN","FHREC5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREC5",3,0)
ALL ; Analyze all Recipes
"RTN","FHREC5",4,0)
 D ^FHIPST6 F REC=0:0 S REC=$O(^FH(114,REC)) Q:REC<1  D ANAL
"RTN","FHREC5",5,0)
 G KIL
"RTN","FHREC5",6,0)
ANAL ; Analyze
"RTN","FHREC5",7,0)
 K A S SUM=0 F KK=1:1:66 S A(KK)=0
"RTN","FHREC5",8,0)
 S POR=$P($G(^FH(114,REC,0)),"^",2) Q:'POR
"RTN","FHREC5",9,0)
 F KK=0:0 S KK=$O(^FH(114,REC,"R",KK)) Q:KK<1  S Y0=$G(^(KK,0)) D R1
"RTN","FHREC5",10,0)
 S MUL=1 F KK=0:0 S KK=$O(^FH(114,REC,"I",KK)) Q:KK<1  S Y0=$G(^(KK,0)) D I1
"RTN","FHREC5",11,0)
 I 'SUM Q
"RTN","FHREC5",12,0)
 F K=1:1:66 S A(K)=A(K)/SUM,A(K)=+$J(A(K),0,3)
"RTN","FHREC5",13,0)
 ; File Recipe
"RTN","FHREC5",14,0)
 S NAM=$E("*"_$P($G(^FH(114,REC,0)),"^",1),1,30),DA=$P($G(^FH(114,REC,0)),"^",14) G:DA A1
"RTN","FHREC5",15,0)
 K DIC,DD,DO,DINUM S (DIC,DIE)="^FHNU(",DIC(0)="L",DLAYGO=112,X=NAM D FILE^DICN K DIC,DLAYGO Q:Y<1  S DA=+Y
"RTN","FHREC5",16,0)
 S $P(^FH(114,REC,0),"^",14)=DA
"RTN","FHREC5",17,0)
 S $P(^FHNU(DA,0),"^",3)="svg.",$P(^(0),"^",7)="X"
"RTN","FHREC5",18,0)
A1 S (Z1,Z2,Z3,Z4)="" F K=1:1:20 S $P(Z1,"^",K)=A(K)
"RTN","FHREC5",19,0)
 F K=21:1:38 S $P(Z2,"^",K-20)=A(K)
"RTN","FHREC5",20,0)
 F K=39:1:56 S $P(Z3,"^",K-38)=A(K)
"RTN","FHREC5",21,0)
 F K=57:1:66 S $P(Z4,"^",K-56)=A(K)
"RTN","FHREC5",22,0)
 S $P(^FHNU(DA,0),"^",4)=$J(SUM/POR*100,0,0)
"RTN","FHREC5",23,0)
 S ^FHNU(DA,1)=Z1,^(2)=Z2 S:Z3'="" ^FHNU(DA,3)=Z3 S:Z4'="" ^FHNU(DA,4)=Z4
"RTN","FHREC5",24,0)
 Q
"RTN","FHREC5",25,0)
R1 ; Analyze embedded recipes
"RTN","FHREC5",26,0)
 S R1=+Y0 Q:'R1  S P1=$P(Y0,"^",2) Q:'P1  S MUL=$P($G(^FH(114,R1,0)),"^",2) Q:'MUL  S MUL=P1/MUL
"RTN","FHREC5",27,0)
 F LL=0:0 S LL=$O(^FH(114,R1,"I",LL)) Q:LL<1  S Y0=$G(^(LL,0)) D I1
"RTN","FHREC5",28,0)
 Q
"RTN","FHREC5",29,0)
I1 S K1=$P(Y0,"^",3) Q:'K1
"RTN","FHREC5",30,0)
 S AMT=$P(Y0,"^",4)*4.536*MUL Q:'AMT  S SUM=SUM+AMT
"RTN","FHREC5",31,0)
 S Y=$G(^FHNU(K1,1)) F K=1:1:20 S Z1=$P(Y,"^",K) I Z1'="" S A(K)=Z1*AMT+A(K)
"RTN","FHREC5",32,0)
 S Y=$G(^FHNU(K1,2)) F K=21:1:38 S Z1=$P(Y,"^",K-20) I Z1'="" S A(K)=Z1*AMT+A(K)
"RTN","FHREC5",33,0)
 S Y=$G(^FHNU(K1,3)) F K=39:1:56 S Z1=$P(Y,"^",K-38) I Z1'="" S A(K)=Z1*AMT+A(K)
"RTN","FHREC5",34,0)
 S Y=$G(^FHNU(K1,4)) F K=57:1:66 S Z1=$P(Y,"^",K-56) I Z1'="" S A(K)=Z1*AMT+A(K)
"RTN","FHREC5",35,0)
 Q
"RTN","FHREC5",36,0)
KIL G KILL^XUSCLEAN
"RTN","FHREC6")
0^288^B14015147
"RTN","FHREC6",1,0)
FHREC6 ; HISC/REL/NCA - Recipe Analysis Output ;7/30/93  15:05 
"RTN","FHREC6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREC6",3,0)
 K DIC S DIC="^FH(114,",DIC(0)="AEQM" W ! D ^DIC G:Y<1 KIL S REC=+Y
"RTN","FHREC6",4,0)
 S L1=$P($G(^FH(114,REC,0)),"^",14)
"RTN","FHREC6",5,0)
 I 'L1 W !!,"This Recipe has not been analyzed." G FHREC6
"RTN","FHREC6",6,0)
 K DIC S DIC="^FH(112.2,",DIC(0)="AEQM",DIC("A")="Select DRI Category: " W ! D ^DIC G:X["^"!$D(DTOUT) KIL S RDA=$S(Y<1:0,1:+Y) K DIC
"RTN","FHREC6",7,0)
 K IOP,%ZIS S %ZIS("A")="Print on Device: ",%ZIS="MQ" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHREC6",8,0)
 I $D(IO("Q")) S FHPGM="Q1^FHREC6",FHLST="L1^RDA^REC" D EN2^FH G FHREC6
"RTN","FHREC6",9,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G FHREC6
"RTN","FHREC6",10,0)
Q1 ; List Analysis
"RTN","FHREC6",11,0)
 S PW=$P($G(^FHNU(L1,0)),"^",4) Q:'PW
"RTN","FHREC6",12,0)
 S Y=$G(^FHNU(L1,1)) F K=1:1:20 S Z1=$P(Y,"^",K) I Z1'="" S A(K)=$J(Z1*PW/100,0,3)
"RTN","FHREC6",13,0)
 S Y=$G(^FHNU(L1,2)) F K=21:1:38 S Z1=$P(Y,"^",K-20) I Z1'="" S A(K)=$J(Z1*PW/100,0,3)
"RTN","FHREC6",14,0)
 S Y=$G(^FHNU(L1,3)) F K=39:1:56 S Z1=$P(Y,"^",K-38) I Z1'="" S A(K)=$J(Z1*PW/100,0,3)
"RTN","FHREC6",15,0)
 S Y=$G(^FHNU(L1,4)) F K=57:1:66 S Z1=$P(Y,"^",K-56) I Z1'="" S A(K)=$J(Z1*PW/100,0,3)
"RTN","FHREC6",16,0)
 S ZR=$S(RDA:^FH(112.2,RDA,1),1:""),TIT=$P($G(^FH(114,REC,0)),"^",1),ANS=""
"RTN","FHREC6",17,0)
 S Z1=4*A(1)+(9*A(2))+(4*A(3)) S:'Z1 Z1=1 F KK=1,3,2 S C(KK)=$J(A(KK)*$S(KK=2:900,1:400)/Z1,4,0)
"RTN","FHREC6",18,0)
 K B F KK=1:1:66 S B(KK)=0
"RTN","FHREC6",19,0)
 K M,N F KK=0:0 S KK=$O(^FH(114,REC,"R",KK)) Q:KK<1  S Y0=$G(^(KK,0)) D R1
"RTN","FHREC6",20,0)
 F KK=0:0 S KK=$O(^FH(114,REC,"I",KK)) Q:KK<1  S Y0=$G(^(KK,0)) I +Y0 S ER="A",NAM=$P($G(^FHING(+Y0,0)),"^",1) I NAM'="" D GET
"RTN","FHREC6",21,0)
 W:$E(IOST,1,2)="C-" @IOF W !?25,"--- Recipe Ingredient List ---",!!?(80-$L(TIT)\2),TIT
"RTN","FHREC6",22,0)
 W !!,"Number of Portions: ",$P($G(^FH(114,REC,0)),"^",2)
"RTN","FHREC6",23,0)
 W !!,"Ingredient",?34,"Amt In Lbs",?46,"Associated Nutrient",!
"RTN","FHREC6",24,0)
 S ER="A",CTR=0 D P1 Q:ANS="^"
"RTN","FHREC6",25,0)
 K M(ER) S R2="" F KK=0:0 S R2=$O(N(R2)) Q:R2=""  S ER=$G(N(R2)) W !!,"Embedded Recipe: ",R2,!!,"Ingredient",?34,"Amt In LBS",?46,"Associated Nutrient",! S CTR=CTR+1 D P1 Q:ANS="^"
"RTN","FHREC6",26,0)
 D PSE Q:ANS="^"  W @IOF,!?23,"--- Analysis of Recipe Portion ---",!!?(80-$L(TIT)\2),TIT,!!?34,"%",?39,"%",?76,"%",!
"RTN","FHREC6",27,0)
 W ?33,"DRI",?37,"Kcal",?75,"DRI",!
"RTN","FHREC6",28,0)
 F K=1:1:34 S Y=$T(COM+K^FHNU6),Z1=$P(Y,";",3) D LST
"RTN","FHREC6",29,0)
 D PSE Q:ANS="^"  F K=35:1:70 S Y=$T(COM+K^FHNU6),Z1=$P(Y,";",3) D LST
"RTN","FHREC6",30,0)
 W !!,"Grams/Portion: ",PW D PSE W ! Q
"RTN","FHREC6",31,0)
LST W:K#2 ! Q:'Z1  S T1=$S(K#2:0,1:42)
"RTN","FHREC6",32,0)
 W ?T1,$P(Y,";",4)," (",B(Z1),")" I B(Z1) W ?(T1+21),$J(A(Z1),7,$P(Y,";",6))," ",$P(Y,";",5)
"RTN","FHREC6",33,0)
 S Z2=$P(Y,";",7) I Z2,ZR'="",$D(A(Z1)) S Z2=A(Z1)/$P(ZR,U,Z2) W ?(T1+33),$J(Z2*100,3,0)
"RTN","FHREC6",34,0)
 I $D(C(Z1)) W ?(T1+37),C(Z1)
"RTN","FHREC6",35,0)
 Q
"RTN","FHREC6",36,0)
R1 ; Embedded Recipe List
"RTN","FHREC6",37,0)
 S R1=+Y0 Q:'R1  S R2=$P($G(^FH(114,R1,0)),"^",1) Q:R2=""  S ER=R1 S:'$D(N(R2)) N(R2)=R1
"RTN","FHREC6",38,0)
 F LL=0:0 S LL=$O(^FH(114,R1,"I",LL)) Q:LL<1  S Y0=$G(^(LL,0)) I +Y0 S NAM=$P($G(^FHING(+Y0,0)),"^",1) I NAM'="" D GET
"RTN","FHREC6",39,0)
 Q
"RTN","FHREC6",40,0)
GET ; Set Ingredient List
"RTN","FHREC6",41,0)
 S K1=+$P(Y0,"^",3)
"RTN","FHREC6",42,0)
 S:'$D(M(ER,NAM)) M(ER,NAM)=$E($P($G(^FHNU(K1,0)),"^",1),1,33)_"^"_$P(Y0,"^",4)
"RTN","FHREC6",43,0)
 S Y=$G(^FHNU(K1,1)) F K=1:1:20 S Z1=$P(Y,"^",K) I Z1'="" S B(K)=B(K)+1
"RTN","FHREC6",44,0)
 S Y=$G(^FHNU(K1,2)) F K=21:1:38 S Z1=$P(Y,"^",K-20) I Z1'="" S B(K)=B(K)+1
"RTN","FHREC6",45,0)
 S Y=$G(^FHNU(K1,3)) F K=39:1:56 S Z1=$P(Y,"^",K-38) I Z1'="" S B(K)=B(K)+1
"RTN","FHREC6",46,0)
 S Y=$G(^FHNU(K1,4)) F K=57:1:66 S Z1=$P(Y,"^",K-56) I Z1'="" S B(K)=B(K)+1
"RTN","FHREC6",47,0)
 Q
"RTN","FHREC6",48,0)
P1 S NAM=""
"RTN","FHREC6",49,0)
 F LL=0:0 S NAM=$O(M(ER,NAM)) Q:NAM=""  D  Q:ANS="^"
"RTN","FHREC6",50,0)
 .W !,$E(NAM,1,30),?32,$S($P(M(ER,NAM),"^",2):$J($P(M(ER,NAM),"^",2),10,3),1:$J("***",10)),?46,$S($P(M(ER,NAM),"^",1)'="":$P(M(ER,NAM),"^",1),1:"***")
"RTN","FHREC6",51,0)
 .S CTR=CTR+1 I CTR>18 D PSE S CTR=0
"RTN","FHREC6",52,0)
 .Q
"RTN","FHREC6",53,0)
 Q
"RTN","FHREC6",54,0)
PSE I IOST?1"C-".E R !!,"Press RETURN to Continue ",X:DTIME W ! S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PSE
"RTN","FHREC6",55,0)
 Q
"RTN","FHREC6",56,0)
KIL G KILL^XUSCLEAN
"RTN","FHREC7")
0^289^B2172371
"RTN","FHREC7",1,0)
FHREC7 ; HISC/NCA - Display Analyzed Recipes ;1/18/94  12:30 
"RTN","FHREC7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREC7",3,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHREC7",4,0)
 I $D(IO("Q")) S FHPGM="Q1^FHREC7",FHLST="" D EN2^FH G KIL
"RTN","FHREC7",5,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHREC7",6,0)
Q1 ; Print Analyzed Recipes
"RTN","FHREC7",7,0)
 D NOW^%DTC S DTP=% D DTP^FH S PG=0 D HDR
"RTN","FHREC7",8,0)
 S NX="" F  S NX=$O(^FH(114,"B",NX)) Q:NX=""  F D0=0:0 S D0=$O(^FH(114,"B",NX,D0)) Q:D0<1  D CHK
"RTN","FHREC7",9,0)
 D:$Y>(IOSL-10) HDR W !!,"'**' preceding a recipe name indicates recipe not analyzed.",! Q
"RTN","FHREC7",10,0)
CHK D:$Y>(IOSL-8) HDR S X=$G(^FH(114,D0,0))
"RTN","FHREC7",11,0)
 W ! W:'$P(X,"^",14) ?3,"** " W ?6,$P(X,"^",1)
"RTN","FHREC7",12,0)
 Q
"RTN","FHREC7",13,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,DTP,?20,"A N A L Y Z E D   R E C I P E   L I S T",?71,"Page ",PG
"RTN","FHREC7",14,0)
 W !!?17,"RECIPE NAME"
"RTN","FHREC7",15,0)
 W !,"--------------------------------------------------------------------------------",! Q
"RTN","FHREC7",16,0)
KIL G KILL^XUSCLEAN
"RTN","FHREP")
0^290^B6037745
"RTN","FHREP",1,0)
FHREP ; HISC/NCA - Inventory Worksheet and Report ;10/1/93  09:24
"RTN","FHREP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREP",3,0)
EN1 ; Enter/Edit the Current Inventory QOH
"RTN","FHREP",4,0)
 S OKAY=0,ANS="",CK=1 W ! K DIR S DIR(0)="YAO",DIR("A")="Want to enter Cost along with QOH (Y/N)? " D ^DIR G:$D(DIRUT)!($D(DIROUT)) KIL S:Y OKAY=1
"RTN","FHREP",5,0)
 W ! K DIR S DIR(0)="YAO",DIR("A")="Enter Current QOH by INDIVIDUAL Ingredient (Y/N)? " D ^DIR G:$D(DIRUT)!($D(DIROUT)) KIL K DIR,DIROUT,DIRUT
"RTN","FHREP",6,0)
 I Y=0 K Y S FHR="E" D F1 G:FHXX["^"!("^"[X) KIL D Q1^FHREP1 G REC:CK,KIL
"RTN","FHREP",7,0)
EDIT ; Enter/Edit the Current Inventory
"RTN","FHREP",8,0)
 K DIC,DIE S (DIC,DIE)="^FHING(",DIC(0)="AEQM",DIC("DR")=".01" W ! D ^DIC
"RTN","FHREP",9,0)
 K DIC G KIL:$D(DTOUT),REC:U[X,EDIT:Y<1
"RTN","FHREP",10,0)
 S Z=$P($G(^FHING(+Y,0)),"^",19) I Z'="Y" W *7,"   Inventory NOT specify." G EDIT
"RTN","FHREP",11,0)
 S ZZ=$G(^FHING(+Y,0)),FHD=$P(ZZ,"^",24) S DTP=FHD D:DTP'="" DTP^FH S FHD=DTP
"RTN","FHREP",12,0)
 S Z1=$P(ZZ,"^",9),Z2=$P(ZZ,"^",11)
"RTN","FHREP",13,0)
 W:FHD'="" !?27,"QOH LAST UPDATED ON ",FHD,!
"RTN","FHREP",14,0)
 S DA=+Y S:OKAY DR="8;S:X=Z1 Y=""@1"";29////"_DT_";@1;10;S:X=Z2 Y="""";30////"_DT S:'OKAY DR="10;S:X=Z2 Y="""";30////"_DT
"RTN","FHREP",15,0)
 D ^DIE K FHD,DA,DIC,DIE,DR G EDIT
"RTN","FHREP",16,0)
F1 ; Ask For Food Group or Storage
"RTN","FHREP",17,0)
 R !!,"Select by F=FOOD GROUPS or S=STORAGE: F// ",FHXX:DTIME I '$T!(FHXX["^") S FHXX="^" Q
"RTN","FHREP",18,0)
 S:FHXX="" FHXX="F" I "fs"[FHXX S X=FHXX D TR^FH S FHXX=X
"RTN","FHREP",19,0)
 I FHXX'?1U!("FS"'[FHXX) W *7," Enter return F or S" G F1
"RTN","FHREP",20,0)
 I FHXX="S" S SRT=$O(^FH(113.1,0)) I SRT'<1,$O(^FH(113.1,SRT))<1 S SRT=0  Q
"RTN","FHREP",21,0)
 I FHXX="S" G D2
"RTN","FHREP",22,0)
D1 ; Get a Food Group
"RTN","FHREP",23,0)
 R !!,"Select Food Group (or ALL): ",X:DTIME Q:'$T!("^"[X)  D:X="all" TR^FH I X="ALL" S SRT=0 Q
"RTN","FHREP",24,0)
 I X'?1N!(X<1)!(X>6) W *7,!?5,"Answer with a number 1 to 6 or ALL for all." G D1
"RTN","FHREP",25,0)
 S SRT=+X
"RTN","FHREP",26,0)
 Q
"RTN","FHREP",27,0)
D2 ; Get a Storage
"RTN","FHREP",28,0)
 R !!,"Select Storage Location (or ALL): ",X:DTIME Q:'$T!("^"[X)  D:X="all" TR^FH I X="ALL" S SRT=0 Q
"RTN","FHREP",29,0)
 I X'="ALL" K DIC S DIC="^FH(113.1,",DIC(0)="EMQ" D ^DIC G:Y<1 D2 S SRT=+Y
"RTN","FHREP",30,0)
 Q
"RTN","FHREP",31,0)
REC ; Re-Cost Recipes
"RTN","FHREP",32,0)
 D:OKAY ^FHREC3
"RTN","FHREP",33,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHREP1")
0^291^B20171462
"RTN","FHREP1",1,0)
FHREP1 ; HISC/NCA - Inventory Worksheet and Report ;3/9/95  08:28
"RTN","FHREP1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHREP1",3,0)
EN2 ; Print the Inventory Worksheet & Report
"RTN","FHREP1",4,0)
 S FHXX="F"
"RTN","FHREP1",5,0)
 R !!,"Select W=Worksheet or R=Report: ",FHR:DTIME G:'$T!("^"[FHR) KIL^FHREP
"RTN","FHREP1",6,0)
 I "wr"[FHR S X=FHR D TR^FH S FHR=X
"RTN","FHREP1",7,0)
 I FHR'?1U!("WR"'[FHR) W *7,"   Enter W or R" G EN2
"RTN","FHREP1",8,0)
E0 ; Read in Month and Year
"RTN","FHREP1",9,0)
 D NOW^%DTC S NOW=%\1
"RTN","FHREP1",10,0)
 K %DT W !!,"Enter Mth/Yr: "_+$E(NOW,4,5)_"/"_$E(NOW,2,3)_"// " R X:DTIME G:'$T!(X["^") KIL^FHREP
"RTN","FHREP1",11,0)
 I X="" S X=$E(NOW,1,5)_"00"
"RTN","FHREP1",12,0)
 D ^%DT I Y<1!($E(Y,1,5)>$E(NOW,1,5)) W *7,"  Answer Month and Yr as Mth/Yr or Mth Yr.",!?25,"   CANNOT be greater than now." G E0
"RTN","FHREP1",13,0)
 S MTH=+$E(Y,4,5),MTH=$P("January February March April May June July August September October November December"," ",MTH),YR=$E(Y,2,3),MTH=MTH_" "_YR
"RTN","FHREP1",14,0)
 I FHR="W" D F1^FHREP G:FHXX["^"!("^"[X) KIL^FHREP
"RTN","FHREP1",15,0)
 I FHR="R" D D1^FHREP G:"^"[X KIL^FHREP
"RTN","FHREP1",16,0)
E1 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL^FHREP
"RTN","FHREP1",17,0)
 I $D(IO("Q")) S FHPGM="Q0^FHREP1",FHLST="FHR^FHXX^MTH^SRT" D EN2^FH G KIL^FHREP
"RTN","FHREP1",18,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G KIL^FHREP
"RTN","FHREP1",19,0)
Q0 ; Process Printing worksheet or report
"RTN","FHREP1",20,0)
 D Q1 G KIL^FHREP
"RTN","FHREP1",21,0)
Q1 ; Loop through Ingredients
"RTN","FHREP1",22,0)
 K ^TMP($J) S ANS="",(K,GRDTOT,OLD,SUBTOT,TOTAL,PG)=0 D NOW^%DTC S DTP=% D DTP^FH S HD=DTP S CK=1
"RTN","FHREP1",23,0)
 F K=0:0 S K=$O(^FHING(K)) Q:K<1  S X=$P($G(^(K,0)),"^",19) I X="Y" S X=$G(^(0)) D LP S:OK ^TMP($J,P0_$S(FHXX="S":$E(L0,1,15),1:"FG"_P0),ING)=K_"^"_UP_"^"_COST_"^"_QOH_"^"_UDC_"^"_UDQ_"^"_$E(MIN,1,5)
"RTN","FHREP1",24,0)
 S REC=0
"RTN","FHREP1",25,0)
 S P0="" F L1=0:0 S P0=$O(^TMP($J,P0)) Q:P0=""!(ANS="^")  S ING="" F L2=0:0 S ING=$O(^TMP($J,P0,ING)) Q:ING=""  S XX=^(ING) D P1 Q:ANS="^"
"RTN","FHREP1",26,0)
 I FHR="R",ANS="",SRT W !!,?55,"TOTAL:   ",$J(SUBTOT,8,2)
"RTN","FHREP1",27,0)
 I FHR="R",ANS="",'SRT D SUB W !!?49,"GRAND TOTAL:   ",$J(GRDTOT,8,2)
"RTN","FHREP1",28,0)
 Q
"RTN","FHREP1",29,0)
LP ; Get Food Group or Storage
"RTN","FHREP1",30,0)
 S ING=$P(X,"^",1),UP=$P(X,"^",5),COST=$P(X,"^",9),QOH=$P(X,"^",11),UDC=$P(X,"^",23),UDQ=$P(X,"^",24),MIN=$P(X,"^",25),OK=1,L0=""
"RTN","FHREP1",31,0)
 S DTP=UDC D:DTP'="" DTP^FH S UDC=DTP,DTP=UDQ D:DTP'="" DTP^FH S UDQ=DTP
"RTN","FHREP1",32,0)
 I FHXX="F" S P0=$P(X,"^",13) S:P0<1!(P0>6) P0=7 S:SRT&(P0'=SRT) OK=0 Q
"RTN","FHREP1",33,0)
 S LOC=$P(X,"^",12),L0=$P($G(^FH(113.1,+LOC,0)),"^",1) S:L0="" L0="UNCLASSIFIED" S P0=$P($G(^FH(113.1,+LOC,0)),"^",3),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0) S:SRT&(LOC'=SRT) OK=0
"RTN","FHREP1",34,0)
 Q
"RTN","FHREP1",35,0)
P1 ; Loop to print or if FHR="E" edit QOH
"RTN","FHREP1",36,0)
 S K=$P(XX,"^",1),UP=$P(XX,"^",2),COST=$P(XX,"^",3),QOH=$P(XX,"^",4),UDC=$P(XX,"^",5),UDQ=$P(XX,"^",6),MIN=$P(XX,"^",7),REC=REC+1
"RTN","FHREP1",37,0)
 I FHR="E" D  Q
"RTN","FHREP1",38,0)
 .W !!,"Ingredient: ",$P(^FHING(K,0),"^",1)
"RTN","FHREP1",39,0)
 .W:UDQ'="" !?12,"QOH LAST UPDATED ON ",UDQ,!
"RTN","FHREP1",40,0)
 .K DIE S DIE="^FHING(",DA=K
"RTN","FHREP1",41,0)
 .S:OKAY DR="8;S:X=COST Y=""@1"";29////"_DT_";@1;10;S:X=QOH Y="""";30////"_DT
"RTN","FHREP1",42,0)
 .S:'OKAY DR="10;S:X=QOH Y="""";30////"_DT D ^DIE S:$D(DTOUT) CK=0 S:$D(Y)!$D(DTOUT) ANS="^" K DA,DIE,DR,DTOUT,Y
"RTN","FHREP1",43,0)
 .Q
"RTN","FHREP1",44,0)
 D CHK Q:ANS="^"
"RTN","FHREP1",45,0)
 D:$Y'<(IOSL-5) HD W ! Q:ANS="^"
"RTN","FHREP1",46,0)
 I $L(ING)'>30 D
"RTN","FHREP1",47,0)
 .W !,$J(MIN,5),?6,ING,?39,UP,?43,$J(COST,8,3)
"RTN","FHREP1",48,0)
 .I FHR="W" W ?53,UDC,?63,$J(QOH,8,2),?73,"_____" Q
"RTN","FHREP1",49,0)
 .W ?55,$J(QOH,8,2),?64,$J(TOTAL,8,2)
"RTN","FHREP1",50,0)
 .Q
"RTN","FHREP1",51,0)
 E  D
"RTN","FHREP1",52,0)
 .S L=$L($E(ING,1,30),",")
"RTN","FHREP1",53,0)
 .S:L=1 L=L+1 W !,$J(MIN,5),?6,$P(ING,",",1,L-1),","
"RTN","FHREP1",54,0)
 .W !?6,$P(ING,",",L,99),?39,UP,?43,$J(COST,8,3)
"RTN","FHREP1",55,0)
 .I FHR="W" W ?53,UDC,?63,$J(QOH,8,2),?73,"_____" Q
"RTN","FHREP1",56,0)
 .W ?55,$J(QOH,8,2),?64,$J(TOTAL,8,2)
"RTN","FHREP1",57,0)
 .Q
"RTN","FHREP1",58,0)
 Q
"RTN","FHREP1",59,0)
CHK ; Check the Food Group or Storage to do Subtotal & Grandtotal
"RTN","FHREP1",60,0)
 S P1=$S(FHXX="F":+P0,1:$E(P0,3,17))
"RTN","FHREP1",61,0)
 I REC=1 S OLD=P1 D HDR
"RTN","FHREP1",62,0)
 I OLD'=P1 D:FHR="R" SUB D HD
"RTN","FHREP1",63,0)
 S OLD=P1
"RTN","FHREP1",64,0)
 ; Calculate subtotal grand total
"RTN","FHREP1",65,0)
 Q:FHR'="R"
"RTN","FHREP1",66,0)
 S TOTAL=COST*QOH
"RTN","FHREP1",67,0)
 S SUBTOT=SUBTOT+TOTAL
"RTN","FHREP1",68,0)
 S GRDTOT=GRDTOT+TOTAL
"RTN","FHREP1",69,0)
 Q
"RTN","FHREP1",70,0)
SUB ; Write subtotal
"RTN","FHREP1",71,0)
 W !!,?52,"SUBTOTAL:   ",$J(SUBTOT,8,2)
"RTN","FHREP1",72,0)
 S SUBTOT=0
"RTN","FHREP1",73,0)
 Q
"RTN","FHREP1",74,0)
HD ; Check for end of page
"RTN","FHREP1",75,0)
 G:REC=1 HDR
"RTN","FHREP1",76,0)
 I IOST?1"C".E W:$X>1 ! W *7 K DIR S DIR(0)="E" D ^DIR I 'Y S ANS="^" Q
"RTN","FHREP1",77,0)
HDR ; Heading for the Inventory
"RTN","FHREP1",78,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHREP1",79,0)
 W !,HD,?70,"Page ",PG,!!?22,"I N V E N T O R Y   " W $S(FHR="W":"W O R K S H E E T",1:"R E P O R T"),!!
"RTN","FHREP1",80,0)
 W ?(80-$L(MTH)/2),MTH,!!
"RTN","FHREP1",81,0)
 I FHXX="F" S P2="FOOD GROUP: "_$P("MEAT PRODUCTS^MILK PRODUCTS^FRUITS & VEGETABLES^BREADS^COMMERCIAL NUTRITION SUPPLEMENTS^MISCELLANEOUS^UNCLASSIFIED","^",+P1)
"RTN","FHREP1",82,0)
 E  S P2=P1
"RTN","FHREP1",83,0)
 W ?(80-$L(P2)/2),P2,!!
"RTN","FHREP1",84,0)
 I FHR="W" W !?56,"DATE",!?47,"ITEM",?56,"LAST",?66,"QOH",?74,"QOH",!,"ITEM#",?20,"NAME",?38,"U/P",?47,"COST",?55,"UPDATE",?63,"LAST MTH",?72,"CURRENT",! Q
"RTN","FHREP1",85,0)
 W !?47,"ITEM",?58,"QOH",?67,"TOTAL",!,"ITEM#",?20,"NAME",?38,"U/P",?47,"COST",?56,"CURRENT",?68,"COST",!
"RTN","FHREP1",86,0)
 Q
"RTN","FHSEL1")
0^292^B19311390
"RTN","FHSEL1",1,0)
FHSEL1 ; HISC/REL/NCA/JH/RTK/FAI - Patient Preferences ;10/20/04  10:19
"RTN","FHSEL1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSEL1",3,0)
EN1 ; Enter/Edit Preference File entries
"RTN","FHSEL1",4,0)
 W ! S (DIC,DIE)="^FH(115.2,",DIC(0)="AEQLM",DIC("DR")=".01;1",DLAYGO=115.2 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
"RTN","FHSEL1",5,0)
 S (FHDA,DA)=+Y,DR=".01;1;S:X=""D"" Y=0;3;20;S:'X Y=99;21;99" D ^DIE K DA,DIE,DR
"RTN","FHSEL1",6,0)
 I $P($G(^FH(115.2,FHDA,0)),"^",2)'="D"!($D(Y)) G EN1
"RTN","FHSEL1",7,0)
TRAN R !!,"Do you want to import Recipes from another Food Preference? N // ",X:DTIME
"RTN","FHSEL1",8,0)
 G:'$T!(X["^") EN1
"RTN","FHSEL1",9,0)
 S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,!,"  Answer YES or NO" G TRAN
"RTN","FHSEL1",10,0)
 S ANS=X?1"Y".E G:'ANS DIS
"RTN","FHSEL1",11,0)
T1 W ! K DIC S DIC="^FH(115.2,",DIC(0)="AEMQ",DIC("S")="I $P(^(0),U,2)=""D""" D ^DIC K DIC
"RTN","FHSEL1",12,0)
 G KIL:"^"[X!($D(DTOUT)),T1:Y<1 S FHD=+Y
"RTN","FHSEL1",13,0)
 S:'$D(^FH(115.2,FHDA,"X",0)) ^(0)="^115.21P^^"
"RTN","FHSEL1",14,0)
 F DIS=0:0 S DIS=$O(^FH(115.2,FHD,"X",DIS)) Q:DIS<1  S L1=$G(^(DIS,0)) D ADD
"RTN","FHSEL1",15,0)
DIS S DA=FHDA,DIE="^FH(115.2,",DR="10;99" D ^DIE K DA,DIE,DR G EN1
"RTN","FHSEL1",16,0)
ADD ; Add dislikes recipes from another food preference
"RTN","FHSEL1",17,0)
 I $D(^FH(115.2,FHDA,"X","B",+L1)) Q
"RTN","FHSEL1",18,0)
A L +^FH(115.2,FHDA,"X",0)
"RTN","FHSEL1",19,0)
 S FHX1=$G(^FH(115.2,FHDA,"X",0)),FHX2=$P(FHX1,"^",3)+1
"RTN","FHSEL1",20,0)
 S $P(^FH(115.2,FHDA,"X",0),"^",3)=FHX2
"RTN","FHSEL1",21,0)
 L -^FH(115.2,FHDA,"X",0) I $D(^FH(115.2,FHDA,"X",FHX2,0)) G A
"RTN","FHSEL1",22,0)
 S $P(^FH(115.2,FHDA,"X",0),"^",4)=($P(FHX1,"^",4)+1)
"RTN","FHSEL1",23,0)
 S ^FH(115.2,FHDA,"X",FHX2,0)=+L1
"RTN","FHSEL1",24,0)
 S ^FH(115.2,FHDA,"X","B",+L1,FHX2)=""
"RTN","FHSEL1",25,0)
 Q
"RTN","FHSEL1",26,0)
EN2 ; List Preference File
"RTN","FHSEL1",27,0)
 W ! S L=0,DIC="^FH(115.2,",FLDS="[FHSELIST]",BY="LIKE OR DISLIKE,NAME"
"RTN","FHSEL1",28,0)
 S FR="@",TO="",DHD="PATIENT PREFERENCES" D EN1^DIP
"RTN","FHSEL1",29,0)
 K %ZIS S IOP="" D ^%ZIS G KIL
"RTN","FHSEL1",30,0)
EN3 ; Enter/Edit Patient Preferences
"RTN","FHSEL1",31,0)
 S FHALL=1 D ^FHOMDPA G:'FHDFN KIL D DISP S DA=FHDFN W !
"RTN","FHSEL1",32,0)
 K PP F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0),PP(+X)=$P(X,"^",2,3)
"RTN","FHSEL1",33,0)
 S DIE="^FHPT(",DR="[FHSEL]",DIE("NO^")="" D ^DIE K DIE S FLG=0
"RTN","FHSEL1",34,0)
 S:$D(Y) FLG=1
"RTN","FHSEL1",35,0)
 S STR="" F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) S:$P(X,"^",2)="" STR=STR_K_"," S:$P(X,"^",2)'="" $P(PP(+X),"^",3,4)=$P(X,"^",2)_"^"_$P(X,"^",3)
"RTN","FHSEL1",36,0)
 D N31 K PP
"RTN","FHSEL1",37,0)
 I FLG,STR'="" D
"RTN","FHSEL1",38,0)
 .S DA(1)=FHDFN F K=1:1 Q:'$P(STR,",",K)  S DA=$P(STR,",",K) D
"RTN","FHSEL1",39,0)
 ..S DIK="^FHPT("_DA(1)_",""P""," D ^DIK
"RTN","FHSEL1",40,0)
 ..Q
"RTN","FHSEL1",41,0)
 .W *7,!,"<Preference deleted>" K DIK,DA Q
"RTN","FHSEL1",42,0)
 G EN3
"RTN","FHSEL1",43,0)
N31 F K=0:0 S K=$O(PP(K)) Q:K<1  D N33
"RTN","FHSEL1",44,0)
 S KK=0,COM=""
"RTN","FHSEL1",45,0)
N32 S KK=$O(PP(KK)) I KK<1 Q:COM=""  S EVT="P^O^^"_$E(COM,2,999) D ^FHORX Q
"RTN","FHSEL1",46,0)
 I $L(COM)+$L(PP(KK))>120 S EVT="P^O^^"_$E(COM,2,999) D ^FHORX S COM=""
"RTN","FHSEL1",47,0)
 S COM=COM_" "_PP(KK) G N32
"RTN","FHSEL1",48,0)
N33 S X1=$P(PP(K),"^",1,2),X2=$P(PP(K),"^",3,4) I X1=X2 K PP(K) Q
"RTN","FHSEL1",49,0)
 S X1=$S(X1="^":"Add",X2="":"Del",1:"Mod"),Q=$P(X2,"^",2)
"RTN","FHSEL1",50,0)
 I X1["Mod" D
"RTN","FHSEL1",51,0)
 .S NOD=$O(^FHPT(FHDFN,"P","B",K,0)) Q:NOD<1
"RTN","FHSEL1",52,0)
 .S:$P($G(^FHPT(FHDFN,"P",NOD,0)),"^",4)="Y" $P(^FHPT(FHDFN,"P",NOD,0),"^",4)=""
"RTN","FHSEL1",53,0)
 .Q
"RTN","FHSEL1",54,0)
 S PP(K)=X1_" "_$S(X2="":"",Q:Q_" ",1:"1 ")_$P(^FH(115.2,K,0),"^",1) S:X2'="" PP(K)=PP(K)_" ("_$P(X2,"^",1)_")" Q
"RTN","FHSEL1",55,0)
EN4 ; Display Patient Preferences
"RTN","FHSEL1",56,0)
 S FHALL=1 D ^FHOMDPA G:'DFN KIL G:'FHDFN KIL D E41 G EN4
"RTN","FHSEL1",57,0)
E41 ; Display Patient Header and Food Preferences
"RTN","FHSEL1",58,0)
 D NOW^%DTC S NOW=%,DT=NOW\1
"RTN","FHSEL1",59,0)
 S Y(0)=^DPT(DFN,0),SEX=$P(Y(0),"^",2),DOB=$P(Y(0),"^",3) D PID^FHDPA
"RTN","FHSEL1",60,0)
 S AGE=$E(NOW,1,3)-$E(DOB,1,3)-($E(NOW,4,7)<$E(DOB,4,7))
"RTN","FHSEL1",61,0)
 W @IOF,!,PID,?17,$P(Y(0),"^",1),?49,$S(SEX="M":"Male",SEX="F":"Female",1:""),?55,"Age ",AGE
"RTN","FHSEL1",62,0)
DISP ; Display Food Preferences
"RTN","FHSEL1",63,0)
 W !!?21,"Likes",?54,"DisLikes",!
"RTN","FHSEL1",64,0)
 K P S P1=1 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D SP
"RTN","FHSEL1",65,0)
 W ! S (M,MM)="" F  S M=$O(P(M)) Q:M=""  I $D(P(M)) W $P(M,"~",2) D  S MM=M
"RTN","FHSEL1",66,0)
 .  S (P1,P2)=0 F  S:P1'="" P1=$O(P(M,"L",P1)) S X1=$S(P1>0:P(M,"L",P1),1:"") S:P2'="" P2=$O(P(M,"D",P2)) S X2=$S(P2>0:P(M,"D",P2),1:"") Q:P1=""&(P2="")  D P0  W:MM'=M !
"RTN","FHSEL1",67,0)
 .  Q
"RTN","FHSEL1",68,0)
 I $O(P(""))="" W !,"No Food Preferences on file",!
"RTN","FHSEL1",69,0)
 Q
"RTN","FHSEL1",70,0)
P0 I X1'="" W ?12 S X=X1 D P1 S X1=X
"RTN","FHSEL1",71,0)
 I X2'="" W ?46 S X=X2 D P1 S X2=X
"RTN","FHSEL1",72,0)
 Q:X1=""&(X2="")  W ! G P0
"RTN","FHSEL1",73,0)
P1 I $L(X)<34 W X S X="" Q
"RTN","FHSEL1",74,0)
 F KK=35:-1:1 Q:$E(X,KK-1,KK)=", "
"RTN","FHSEL1",75,0)
 W $E(X,1,KK-2) S X=$E(X,KK+1,999) Q
"RTN","FHSEL1",76,0)
SP Q:+X<1  S M1=$P(X,"^",2) Q:M1=""  S:M1="A" M1="BNE" S Z=$G(^FH(115.2,+X,0)) Q:$P(Z,U)=""!$P(Z,U,2)=""  S L1=$P(Z,"^",1),KK=$P(Z,"^",2),M="",DAS=$P(X,"^",4)
"RTN","FHSEL1",77,0)
 I KK="L" S Q=$P(X,"^",3),L1=$S(Q:Q,1:1)_" "_L1
"RTN","FHSEL1",78,0)
 I M1="BNE" S M="1~All Meals" G SP1
"RTN","FHSEL1",79,0)
 S Z1=$E(M1,1) I Z1'="" S M=$S(Z1="B":"2~Break",Z1="N":"3~Noon",1:"4~Even")
"RTN","FHSEL1",80,0)
 S Z1=$E(M1,2) I Z1'="" S M=M_","_$S(Z1="B":"Break",Z1="N":"Noon",1:"Even")
"RTN","FHSEL1",81,0)
SP1 S:'$D(P(M,KK,P1)) P(M,KK,P1)="" I $L(P(M,KK,P1))+$L(L1)<255 S P(M,KK,P1)=P(M,KK,P1)_$S(P(M,KK,P1)="":"",1:", ")_L1_$S(DAS="Y":" (D)",1:"")
"RTN","FHSEL1",82,0)
 E  S:'$D(P(M,KK,K)) P(M,KK,K)="" S P(M,KK,K)=L1_$S(DAS="Y":" (D)",1:"") S P1=K
"RTN","FHSEL1",83,0)
 Q
"RTN","FHSEL1",84,0)
KIL G KILL^XUSCLEAN
"RTN","FHSEL2")
0^293^B26687747
"RTN","FHSEL2",1,0)
FHSEL2 ; HISC/REL/NCA/FAI - Tabulate Patient Preferences ;10/29/04  7:19
"RTN","FHSEL2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSEL2",3,0)
 S X="T",%DT="X" D ^%DT S DT=+Y
"RTN","FHSEL2",4,0)
 S FHP=$O(^FH(119.72,0)) I FHP'<1,$O(^FH(119.72,FHP))<1 S FHP=0 G D1
"RTN","FHSEL2",5,0)
D0 R !!,"Select SERVICE POINT (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0
"RTN","FHSEL2",6,0)
 E  K DIC S DIC="^FH(119.72,",DIC(0)="EMQ" D ^DIC G:Y<1 D0 S FHP=+Y
"RTN","FHSEL2",7,0)
D1 R !!,"Tabulate By Menu Specific? N// ",D3:DTIME G:'$T!(D3="^") KIL
"RTN","FHSEL2",8,0)
 S:D3="" D3="N" S X=D3 D TR^FH S D3=X I $P("YES",D3,1)'="",$P("NO",D3,1)'="" W *7,"  Answer YES or NO" G D1
"RTN","FHSEL2",9,0)
 S D3=$E(D3,1) S:D3="Y" D3=D3="Y" I 'D3 S (D1,FHCY,FHDA)="" G R1
"RTN","FHSEL2",10,0)
F1 S %DT("A")="Select Date: ",%DT="AEX" W ! D ^%DT G KIL:"^"[X!$D(DTOUT),F1:Y<1 S (X1,D1)=+Y
"RTN","FHSEL2",11,0)
 I D1<DT W *7,"  [ Must NOT be before TODAY ]" G F1
"RTN","FHSEL2",12,0)
 D E1^FHPRC1 I FHCY<1 W *7,!!,"No MENU CYCLE Defined for that Date!" G F1
"RTN","FHSEL2",13,0)
 I '$D(^FH(116,FHCY,"DA",FHDA,0)) W *7,!!,"MENU CYCLE DAY Not Defined for that Date!" G F1
"RTN","FHSEL2",14,0)
R1 R !!,"Select MEAL (B,N,E or ALL): ",MEAL:DTIME G:'$T!("^"[MEAL) KIL S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="A"
"RTN","FHSEL2",15,0)
 I "BNEA"'[MEAL!(MEAL'?1U) W *7,!,"Select B for Breakfast, N for Noon, E for Evening or ALL for all meals" G R1
"RTN","FHSEL2",16,0)
R2 R !!,"Break Down By Production Diets? N// ",SRT:DTIME G:'$T!(SRT="^") KIL S:SRT="" SRT="N" S X=SRT D TR^FH S SRT=X I $P("YES",SRT,1)'="",$P("NO",SRT,1)'="" W *7,"  Answer YES or NO" G R2
"RTN","FHSEL2",17,0)
 S SRT=$E(SRT,1),SRT=SRT="Y"
"RTN","FHSEL2",18,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHSEL2",19,0)
 I $D(IO("Q")) S FHPGM="Q1^FHSEL2",FHLST="D1^D3^FHP^FHCY^FHDA^MEAL^SRT" D EN2^FH G KIL
"RTN","FHSEL2",20,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHSEL2",21,0)
Q1 ; Printing Tabulated Patient Preference
"RTN","FHSEL2",22,0)
 S FHMLSAV=MEAL
"RTN","FHSEL2",23,0)
 D NOW^%DTC S NOW=%,PG=0
"RTN","FHSEL2",24,0)
 I MEAL'="A" G Q2
"RTN","FHSEL2",25,0)
 F MEAL="B","N","E" D Q2
"RTN","FHSEL2",26,0)
 Q
"RTN","FHSEL2",27,0)
Q2 K ^TMP($J),D G:'D3 Q3
"RTN","FHSEL2",28,0)
 S FHX1=^FH(116,FHCY,"DA",FHDA,0)
"RTN","FHSEL2",29,0)
 I $D(^FH(116.3,D1,0)) S X=^(0) F LL=2:1:4 I $P(X,"^",LL) S $P(FHX1,"^",LL)=$P(X,"^",LL)
"RTN","FHSEL2",30,0)
 S FHX1=$P(FHX1,"^",$F("BNE",MEAL)) I 'FHX1 Q
"RTN","FHSEL2",31,0)
Q3 S:D1="" D1=NOW\1
"RTN","FHSEL2",32,0)
 S TIM=D1\1_$S(MEAL="B":".07",MEAL="N":".11",1:".17")
"RTN","FHSEL2",33,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  S X=^(WRD,0) D D2 I D2'="" S WRDN=$P(X,"^",1) D W2
"RTN","FHSEL2",34,0)
 ;process outpatient
"RTN","FHSEL2",35,0)
 ;next recurring
"RTN","FHSEL2",36,0)
 S FHD1=D1-1
"RTN","FHSEL2",37,0)
 F FHK1=FHD1:0 S FHK1=$O(^FHPT("RM",FHK1)) Q:(FHK1'>0)!(FHK1>D1)  D
"RTN","FHSEL2",38,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHK1,FHDFN)) Q:FHDFN'>0  D
"RTN","FHSEL2",39,0)
 ..F FHKD=0:0 S FHKD=$O(^FHPT("RM",FHK1,FHDFN,FHKD)) Q:FHKD'>0  D
"RTN","FHSEL2",40,0)
 ...S FHKDAT=^FHPT(FHDFN,"OP",FHKD,0)
"RTN","FHSEL2",41,0)
 ...S (W1,FHW1)=$P(FHKDAT,U,3)
"RTN","FHSEL2",42,0)
 ...S FHDIET=$P(FHKDAT,U,2),FHMEAL=$P(FHKDAT,U,4),FHSTAT=$P(FHKDAT,U,15)
"RTN","FHSEL2",43,0)
 ...S:FHDIET="" FHDIET=$P(FHKDAT,U,7) S:FHDIET="" FHDIET=$P(FHKDAT,U,8)
"RTN","FHSEL2",44,0)
 ...S:FHDIET="" FHDIET=$P(FHKDAT,U,9) S:FHDIET="" FHDIET=$P(FHKDAT,U,10)
"RTN","FHSEL2",45,0)
 ...S:FHDIET="" FHDIET=$P(FHKDAT,U,11)
"RTN","FHSEL2",46,0)
 ...I (FHMLSAV'="A"),(FHMEAL'=FHMLSAV) Q
"RTN","FHSEL2",47,0)
 ...I FHSTAT="C" Q
"RTN","FHSEL2",48,0)
 ...Q:'$D(^FH(119.6,FHW1,0))
"RTN","FHSEL2",49,0)
 ...D W44
"RTN","FHSEL2",50,0)
 ;next guest
"RTN","FHSEL2",51,0)
 F FHKD=D1:0 S FHKD=$O(^FHPT("GM",FHKD)) Q:(FHKD'>0)!(FHKD>(D1+1))  D
"RTN","FHSEL2",52,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHKD,FHDFN)) Q:FHDFN'>0  D
"RTN","FHSEL2",53,0)
 ..S FHKDAT=^FHPT(FHDFN,"GM",FHKD,0)
"RTN","FHSEL2",54,0)
 ..S (W1,FHW1)=$P(FHKDAT,U,5)
"RTN","FHSEL2",55,0)
 ..S FHDIET=$P(FHKDAT,U,6),FHMEAL=$P(FHKDAT,U,3)
"RTN","FHSEL2",56,0)
 ..I (FHMLSAV'="A"),(FHMEAL'=FHMLSAV) Q
"RTN","FHSEL2",57,0)
 ..Q:'$D(^FH(119.6,FHW1,0))
"RTN","FHSEL2",58,0)
 ..D W44
"RTN","FHSEL2",59,0)
 ;next SPECIAL
"RTN","FHSEL2",60,0)
 F FHKD=D1:0 S FHKD=$O(^FHPT("SM",FHKD)) Q:(FHKD'>0)!(FHKD>(D1+1))  D
"RTN","FHSEL2",61,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("SM",FHKD,FHDFN)) Q:FHDFN'>0  D
"RTN","FHSEL2",62,0)
 ..S FHKDAT=^FHPT(FHDFN,"SM",FHKD,0)
"RTN","FHSEL2",63,0)
 ..S (W1,FHW1)=$P(FHKDAT,U,3)
"RTN","FHSEL2",64,0)
 ..S FHDIET=$P(FHKDAT,U,4),FHMEAL=$P(FHKDAT,U,9),FHSTAT=$P(FHKDAT,U,2)
"RTN","FHSEL2",65,0)
 ..I (FHMLSAV'="A"),(FHMEAL'=FHMLSAV) Q
"RTN","FHSEL2",66,0)
 ..I (FHSTAT="C")!(FHSTAT="D") Q
"RTN","FHSEL2",67,0)
 ..Q:'$D(^FH(119.6,FHW1,0))
"RTN","FHSEL2",68,0)
 ..D W44
"RTN","FHSEL2",69,0)
 ;print report
"RTN","FHSEL2",70,0)
 G ^FHSEL3
"RTN","FHSEL2",71,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHSEL2",72,0)
W2 I $O(^FHPT("AW",WRD,0))<1 Q
"RTN","FHSEL2",73,0)
 F DFN=0:0 S DFN=$O(^FHPT("AW",WRD,DFN)) Q:DFN<1  S ADM=^(DFN) I ADM>0 D W3
"RTN","FHSEL2",74,0)
 Q
"RTN","FHSEL2",75,0)
W3 S K2=0 Q:'$D(^FHPT(DFN,"A",ADM,0))  S X0=^(0)
"RTN","FHSEL2",76,0)
 S FHORD=$P(X0,"^",2),X1=$P(X0,"^",3) I FHORD<1 S A1=$O(^FHPT(DFN,"A",ADM,"AC",0)) Q:A1=""!(A1>NOW)  D U1 Q:'FHORD  G W4
"RTN","FHSEL2",77,0)
 I X1>1,X1'>TIM D U1 Q:'FHORD
"RTN","FHSEL2",78,0)
 I '$D(^FHPT(DFN,"A",ADM,"DI",FHORD,0)) D U1 Q:'FHORD
"RTN","FHSEL2",79,0)
W4 S X=$G(^FHPT(DFN,"A",ADM,"DI",FHORD,0))
"RTN","FHSEL2",80,0)
 S TC=$P(X,"^",8) Q:TC=""  S PD=$P(X,"^",13) Q:PD=""  S:TC="D" TC="T" Q:'$D(S(TC))  S:D2[TC K2=1 S:K2 SP=S(TC)
"RTN","FHSEL2",81,0)
 S PD=$S('PD:"",$D(^FH(116.2,+PD,0)):$P(^(0),"^",2),1:"") Q:PD=""
"RTN","FHSEL2",82,0)
 I K2 F K=0:0 S K=$O(^FHPT(DFN,"P",K)) Q:K<1  S Z=^(K,0) D
"RTN","FHSEL2",83,0)
 .S FHMLZ2=$P(Z,U,2)
"RTN","FHSEL2",84,0)
 .I FHMLZ2'[MEAL Q
"RTN","FHSEL2",85,0)
 .S QTY=$P(Z,"^",3),Z=+Z
"RTN","FHSEL2",86,0)
 .Q:'$G(Z)
"RTN","FHSEL2",87,0)
 .S:'$D(^TMP($J,"P",Z,PD,SP)) ^TMP($J,"P",Z,PD,SP)=0 S ^(SP)=^(SP)+$S(QTY:QTY,1:1)
"RTN","FHSEL2",88,0)
 Q
"RTN","FHSEL2",89,0)
 ;sets tmp global for outpatient data.
"RTN","FHSEL2",90,0)
W44 S X=^FH(119.6,FHW1,0)
"RTN","FHSEL2",91,0)
 S (PD,TC)=""
"RTN","FHSEL2",92,0)
 S TC=$P(X,"^",5) S:TC="" TC=$P(X,U,6) Q:TC=""
"RTN","FHSEL2",93,0)
 I FHP,TC'=FHP Q
"RTN","FHSEL2",94,0)
 I $D(^FH(119.72,TC,0)) S SP=TC,TC=$P(^FH(119.72,TC,0),U,2)
"RTN","FHSEL2",95,0)
 S:$D(^FH(111,FHDIET,0)) PD=$P(^FH(111,FHDIET,0),U,5) Q:PD=""
"RTN","FHSEL2",96,0)
 S PD=$S('PD:"",$D(^FH(116.2,+PD,0)):$P(^(0),"^",2),1:"") Q:PD=""
"RTN","FHSEL2",97,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S Z=^(K,0) D
"RTN","FHSEL2",98,0)
 .S FHMLZ2=$P(Z,U,2)
"RTN","FHSEL2",99,0)
 .I FHMLZ2'[MEAL Q
"RTN","FHSEL2",100,0)
 .S QTY=$P(Z,"^",3),Z=+Z
"RTN","FHSEL2",101,0)
 .Q:'$G(Z)
"RTN","FHSEL2",102,0)
 .S:'$D(^TMP($J,"P",Z,PD,SP)) ^TMP($J,"P",Z,PD,SP)=0 S ^(SP)=^(SP)+$S(QTY:QTY,1:1)
"RTN","FHSEL2",103,0)
 Q
"RTN","FHSEL2",104,0)
D2 K S S D2=""
"RTN","FHSEL2",105,0)
 F L=5,6 S XX=$P(X,"^",L) I XX=FHP!('FHP) S:XX S($E("TC",L-4))=XX,D(XX)="",D2=D2_$E("TC",L-4)
"RTN","FHSEL2",106,0)
 Q
"RTN","FHSEL2",107,0)
U1 S (A1,FHORD)=0 F K=0:0 S K=$O(^FHPT(DFN,"A",ADM,"AC",K)) Q:K<1!(K>TIM)  S A1=K
"RTN","FHSEL2",108,0)
 Q:'A1  S X1=$P(^FHPT(DFN,"A",ADM,"AC",A1,0),"^",2) G U2:X1<1,U2:'$D(^FHPT(DFN,"A",ADM,"DI",X1,0)) S FHORD=X1 Q
"RTN","FHSEL2",109,0)
U2 S X1="",A1=0
"RTN","FHSEL2",110,0)
U3 S A1=$O(^FHPT(DFN,"A",ADM,"AC",A1)) G:A1="" U1 S X2=$P(^(A1,0),"^",2)
"RTN","FHSEL2",111,0)
 I X2<1 K ^FHPT(DFN,"A",ADM,"AC",A1) G U3
"RTN","FHSEL2",112,0)
 I '$D(^FHPT(DFN,"A",ADM,"DI",X2,0)) K ^FHPT(DFN,"A",ADM,"AC",A1) G U3
"RTN","FHSEL2",113,0)
 G U3
"RTN","FHSEL3")
0^294^B11655434
"RTN","FHSEL3",1,0)
FHSEL3 ; HISC/REL/NCA - Print Tabulated Preferences ;1/23/98  16:11
"RTN","FHSEL3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSEL3",3,0)
 K S S S1=38
"RTN","FHSEL3",4,0)
 F K=0:0 S K=$O(D(K)) Q:K=""  S X=^FH(119.72,K,0),N2=$P(X,"^",1),N3=$P(X,"^",4) S:N3="" N3=$E(N2,1,6) S S(N3,K)=$J(N3,8),S1=S1+8
"RTN","FHSEL3",5,0)
 S:S1<80 S1=80
"RTN","FHSEL3",6,0)
 F Z=0:0 S Z=$O(^TMP($J,"P",Z)) Q:Z<1  D C1
"RTN","FHSEL3",7,0)
 S DTP=NOW D DTP^FH S H1=DTP,X=TIM D DOW^%DTC S DOW=Y+1 D SES,HDR
"RTN","FHSEL3",8,0)
 I $D(^TMP($J,"L")) S TP="L" W !!?(S1-9\2),"L I K E S",! D L0
"RTN","FHSEL3",9,0)
 I $D(^TMP($J,"D")) S TP="D" W !!?(S1-15\2),"D I S L I K E S",! D L0
"RTN","FHSEL3",10,0)
KIL W ! Q
"RTN","FHSEL3",11,0)
L0 S CHK="" I 'SRT S LNOD="0" D L1 Q
"RTN","FHSEL3",12,0)
 S LNOD="0" F L1=0:0 S LNOD=$O(^TMP($J,TP,LNOD)) Q:LNOD=""  D L1
"RTN","FHSEL3",13,0)
 Q
"RTN","FHSEL3",14,0)
L1 S X1=""
"RTN","FHSEL3",15,0)
L2 S X1=$O(^TMP($J,TP,LNOD,X1)) Q:X1=""
"RTN","FHSEL3",16,0)
 D:$Y>(IOSL-6) HDR I SRT,CHK'=LNOD W !!,"Prod. Diet: ",LNOD,! S CHK=LNOD
"RTN","FHSEL3",17,0)
 W !,$P(X1,"~",1),?31 S TOT=0
"RTN","FHSEL3",18,0)
 S K1="" F  S K1=$O(S(K1)) Q:K1=""  F SP=0:0 S SP=$O(S(K1,SP)) Q:SP=""  S N1=$G(^TMP($J,TP,LNOD,X1,SP)) W $J($S('N1:"",1:N1),6),"  " S TOT=TOT+N1
"RTN","FHSEL3",19,0)
 W $J($S(TOT:TOT,1:""),6)
"RTN","FHSEL3",20,0)
 G L2
"RTN","FHSEL3",21,0)
SES S (PD,Y)="",P0=0
"RTN","FHSEL3",22,0)
 S P0="" F  S P0=$O(S(P0)) Q:P0=""  F K=0:0 S K=$O(S(P0,K)) Q:K<1  S Y=$G(S(P0,K)),PD=PD_Y
"RTN","FHSEL3",23,0)
 S PD=PD_"   TOTAL"
"RTN","FHSEL3",24,0)
 Q
"RTN","FHSEL3",25,0)
C1 S X=$G(^FH(115.2,Z,0)),TP=$P(X,"^",2)
"RTN","FHSEL3",26,0)
 I TP="L" S X1=+$P(X,"^",4) G C3:D3,C31
"RTN","FHSEL3",27,0)
 Q:TP'="D"  S PD="" F LL=0:0 S PD=$O(^TMP($J,"P",Z,PD)) Q:PD=""  D C2:D3,C22:'D3
"RTN","FHSEL3",28,0)
 Q
"RTN","FHSEL3",29,0)
C2 F KK=0:0 S KK=$O(^FH(115.2,Z,"X",KK)) Q:KK<1  S X1=+^(KK,0) D C21
"RTN","FHSEL3",30,0)
 Q
"RTN","FHSEL3",31,0)
C21 S X3=$O(^FH(116.1,FHX1,"RE","B",X1,0)) Q:X3<1
"RTN","FHSEL3",32,0)
 S X1=$P(^FH(114,X1,0),"^",1)_"~"_X1
"RTN","FHSEL3",33,0)
 F CAT=0:0 S CAT=$O(^FH(116.1,FHX1,"RE",X3,"R",CAT)) Q:CAT<1  S X=$P($G(^(CAT,0)),"^",2) D
"RTN","FHSEL3",34,0)
 .Q:X'[PD
"RTN","FHSEL3",35,0)
 .F SP=0:0 S SP=$O(^TMP($J,"P",Z,PD,SP)) Q:SP<1  D C4
"RTN","FHSEL3",36,0)
 .Q
"RTN","FHSEL3",37,0)
 Q
"RTN","FHSEL3",38,0)
C22 S X1=$P(^FH(115.2,Z,0),"^",1)_"~"_Z
"RTN","FHSEL3",39,0)
 F SP=0:0 S SP=$O(^TMP($J,"P",Z,PD,SP)) Q:SP<1  D C4
"RTN","FHSEL3",40,0)
 Q
"RTN","FHSEL3",41,0)
C3 S X3=$O(^FH(116.1,FHX1,"RE","B",X1,0)) I X3<1 K ^TMP($J,"P",Z) Q
"RTN","FHSEL3",42,0)
 S X1=$P(^FH(114,X1,0),"^",1)_"~"_X1
"RTN","FHSEL3",43,0)
 S PD="" F LL=0:0 S PD=$O(^TMP($J,"P",Z,PD)) Q:PD=""  D
"RTN","FHSEL3",44,0)
 .F CAT=0:0 S CAT=$O(^FH(116.1,FHX1,"RE",X3,"R",CAT)) Q:CAT<1  S X=$P($G(^(CAT,0)),"^",2) D
"RTN","FHSEL3",45,0)
 ..Q:X'[PD
"RTN","FHSEL3",46,0)
 ..F SP=0:0 S SP=$O(^TMP($J,"P",Z,PD,SP)) Q:SP<1  D C4
"RTN","FHSEL3",47,0)
 ..Q
"RTN","FHSEL3",48,0)
 .Q
"RTN","FHSEL3",49,0)
 Q
"RTN","FHSEL3",50,0)
C31 S X1=$P(^FH(115.2,Z,0),"^",1)_"~"_Z
"RTN","FHSEL3",51,0)
 S PD="" F LL=0:0 S PD=$O(^TMP($J,"P",Z,PD)) Q:PD=""  F SP=0:0 S SP=$O(^TMP($J,"P",Z,PD,SP)) Q:SP<1  D C4
"RTN","FHSEL3",52,0)
 Q
"RTN","FHSEL3",53,0)
C4 I $D(^TMP($J,"P",Z,PD,SP)) S X2=^(SP),CODE=$O(^FH(116.2,"C",PD,0)),CODE=$P($G(^FH(116.2,+CODE,0)),"^",1),LNOD=$S(SRT:$E(CODE,1,18),1:"0") S:'$D(^TMP($J,TP,LNOD,X1,SP)) ^TMP($J,TP,LNOD,X1,SP)=0 S ^(SP)=^(SP)+X2
"RTN","FHSEL3",54,0)
 Q
"RTN","FHSEL3",55,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,H1,?(S1-29\2),"M E A L   P R E F E R E N C E S",?(S1-8),"Page ",PG
"RTN","FHSEL3",56,0)
 I D3 W !!?(S1-14\2),"MENU SPECIFIC"
"RTN","FHSEL3",57,0)
 S DTP=TIM\1 D DTP^FH S X=$P("SUN^MON^TUES^WEDNES^THURS^FRI^SATUR","^",DOW)_"DAY  "_DTP_"  "_$S(MEAL="B":"BREAKFAST",MEAL="N":"NOON",1:"EVENING")
"RTN","FHSEL3",58,0)
 W:D3 ! W !?(S1+2-$L(X)\2),X
"RTN","FHSEL3",59,0)
 W !! W $S('D3:"Preference",1:"Recipe"),?29,PD,!
"RTN","FHSEL3",60,0)
 S LN="",$P(LN,"-",S1+1)="" W !,LN Q
"RTN","FHSEL4")
0^295^B10168431
"RTN","FHSEL4",1,0)
FHSEL4 ; HISC/REL/NCA - Tabulate Food Preferences ;4/27/93  13:09 
"RTN","FHSEL4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSEL4",3,0)
 S FHP=$O(^FH(119.73,0)) I FHP'<1,$O(^FH(119.73,FHP))<1 S FHP=0 G R1
"RTN","FHSEL4",4,0)
D0 R !!,"Select COMMUNICATION OFFICE (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0
"RTN","FHSEL4",5,0)
 E  K DIC S DIC="^FH(119.73,",DIC(0)="EMQ" D ^DIC G:Y<1 D0 S FHP=+Y
"RTN","FHSEL4",6,0)
R1 R !!,"Select MEAL (B,N,E or ALL): ",MEAL:DTIME G:'$T!("^"[MEAL) KIL S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="A"
"RTN","FHSEL4",7,0)
 I "BNEA"'[MEAL!(MEAL'?1U) W *7,!,"Select B for Breakfast, N for Noon, E for Evening or ALL for all meals" G R1
"RTN","FHSEL4",8,0)
D1 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHSEL4",9,0)
 I $D(IO("Q")) S FHPGM="Q1^FHSEL4",FHLST="FHP^MEAL" D EN2^FH G KIL
"RTN","FHSEL4",10,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHSEL4",11,0)
Q1 D NOW^%DTC S NOW=%,PG=0 K ^TMP($J)
"RTN","FHSEL4",12,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  S X=^(WRD,0),D2=+$P(X,"^",8) I D2,'FHP!(FHP=D2) S ^TMP($J,"W",D2,WRD)=""
"RTN","FHSEL4",13,0)
 F D2=0:0 S D2=$O(^TMP($J,"W",D2)) Q:D2<1  D W0
"RTN","FHSEL4",14,0)
 S DTP=NOW\1 D DTP^FH S H1=DTP D SES
"RTN","FHSEL4",15,0)
 I MEAL'="A" D Q2 Q
"RTN","FHSEL4",16,0)
 F MEAL="B","N","E" D Q2
"RTN","FHSEL4",17,0)
 Q
"RTN","FHSEL4",18,0)
Q2 K ^TMP($J,"L"),^TMP($J,"D") F Z=0:0 S Z=$O(^TMP($J,"P",MEAL,Z)) Q:Z<1  D C1
"RTN","FHSEL4",19,0)
 D HDR I $D(^TMP($J,"L")) S TP="L" W !!?(S1-9\2),"L I K E S",! D L0
"RTN","FHSEL4",20,0)
 I $D(^TMP($J,"D")) S TP="D" W !!?(S1-15\2),"D I S L I K E S",! D L0
"RTN","FHSEL4",21,0)
 W ! Q
"RTN","FHSEL4",22,0)
L0 S X1="" F LL=0:0 S X1=$O(^TMP($J,TP,X1)) Q:X1=""  S Z=^(X1) I $D(^TMP($J,"P",MEAL,Z)) D L1
"RTN","FHSEL4",23,0)
 Q
"RTN","FHSEL4",24,0)
L1 D:$Y>(IOSL-6) HDR S TOT=0 W !,$P(^FH(115.2,Z,0),"^",1)
"RTN","FHSEL4",25,0)
 F D2=0:0 S D2=$O(^TMP($J,"P",MEAL,Z,D2)) Q:D2<1  S N1=^(D2) W ?(30+P(D2)),$J(N1,6) S TOT=TOT+N1
"RTN","FHSEL4",26,0)
 W ?S2,$J(TOT,7) Q
"RTN","FHSEL4",27,0)
SES K N,P S PD="",P0=0,N=0
"RTN","FHSEL4",28,0)
 F K=2:11 S P0=$O(^TMP($J,"W",P0)) Q:P0<1  S Y=$E($P(^FH(119.73,P0,0),"^",1),1,9),PD=PD_$J(Y_$E("         ",1,10-$L(Y)\2),9)_"  ",P(P0)=K,N=N+1
"RTN","FHSEL4",29,0)
 S S2=31+$L(PD),S1=S2+7 Q
"RTN","FHSEL4",30,0)
C1 S X=$G(^FH(115.2,Z,0)),TP=$P(X,"^",2)
"RTN","FHSEL4",31,0)
 Q:TP=""  S ^TMP($J,TP,$P(X,"^",1)_Z)=Z Q
"RTN","FHSEL4",32,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,H1,?(S1-29\2),"M E A L   P R E F E R E N C E S",?(S1-6),"Page ",PG
"RTN","FHSEL4",33,0)
 S X=$S(MEAL="B":"B R E A K F A S T",MEAL="N":"N O O N",1:"E V E N I N G") W !!?(S1-$L(X)\2),X
"RTN","FHSEL4",34,0)
 W !!,"Preference",?32,PD,"  TOTAL"
"RTN","FHSEL4",35,0)
 S LN="",$P(LN,"-",S1+8)="" W !,LN Q
"RTN","FHSEL4",36,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHSEL4",37,0)
W0 F WRD=0:0 S WRD=$O(^TMP($J,"W",D2,WRD)) Q:WRD<1  D W2
"RTN","FHSEL4",38,0)
 Q
"RTN","FHSEL4",39,0)
W2 Q:$O(^FHPT("AW",WRD,0))<1  S WRDN=$P($G(^FH(119.6,WRD,0)),"^",1)
"RTN","FHSEL4",40,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN<1  S ADM=^FHPT("AW",WRD,FHDFN) I ADM>0 D W3
"RTN","FHSEL4",41,0)
 Q
"RTN","FHSEL4",42,0)
W3 Q:'$D(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHSEL4",43,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S Z=^(K,0),Z2=$P(Z,"^",2),QTY=$P(Z,"^",3),Z=+Z D W4
"RTN","FHSEL4",44,0)
 Q
"RTN","FHSEL4",45,0)
W4 I MEAL'="A" Q:Z2'[MEAL  S:'$D(^TMP($J,"P",MEAL,Z,D2)) ^TMP($J,"P",MEAL,Z,D2)=0 S ^(D2)=^(D2)+$S(QTY:QTY,1:1) Q
"RTN","FHSEL4",46,0)
 F LL="B","N","E" I Z2[LL S:'$D(^TMP($J,"P",LL,Z,D2)) ^TMP($J,"P",LL,Z,D2)=0 S ^(D2)=^(D2)+$S(QTY:QTY,1:1)
"RTN","FHSEL4",47,0)
 Q
"RTN","FHSP")
0^296^B1095426
"RTN","FHSP",1,0)
FHSP ; HISC/REL/NCA - Standing Orders ;2/13/95  14:30 
"RTN","FHSP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSP",3,0)
EN1 ; Enter/Edit Standing Orders
"RTN","FHSP",4,0)
 K DIC W ! S (DIC,DIE)="^FH(118.3,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=118.3 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
"RTN","FHSP",5,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=118.3 D ^DIE K DA,DIE,DIDEL,DR G EN1
"RTN","FHSP",6,0)
EN2 ; List Standing Orders
"RTN","FHSP",7,0)
 W ! S L=0,DIC="^FH(118.3,",FLDS=".01,99,1",BY="NAME"
"RTN","FHSP",8,0)
 S FR="",TO="",DHD="STANDING ORDERS" D EN1^DIP
"RTN","FHSP",9,0)
 K %ZIS S IOP="" D ^%ZIS G KIL
"RTN","FHSP",10,0)
KIL G KILL^XUSCLEAN
"RTN","FHSP1")
0^297^B25286206
"RTN","FHSP1",1,0)
FHSP1 ; HISC/NCA - Consolidated Standing Orders List ;7/28/94  12:59 
"RTN","FHSP1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSP1",3,0)
E1 ; Set Consolidated List flag
"RTN","FHSP1",4,0)
 S FHOPT=1 G E3
"RTN","FHSP1",5,0)
E2 ; Set Label flag
"RTN","FHSP1",6,0)
 S FHOPT=2
"RTN","FHSP1",7,0)
E3 S FHP=$O(^FH(119.72,0)) I FHP'<1,$O(^FH(119.72,FHP))<1 G D2
"RTN","FHSP1",8,0)
D0 R !!,"Select SERVICE POINT (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0
"RTN","FHSP1",9,0)
 E  K DIC S DIC="^FH(119.72,",DIC(0)="EMQ" D ^DIC G:Y<1 D0 S FHP=+Y
"RTN","FHSP1",10,0)
D2 R !!,"Select Meal (B,N,E,or ALL): ",MEAL:DTIME G:'$T!(U[MEAL) KIL S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="A"
"RTN","FHSP1",11,0)
 I "BNEA"'[MEAL!(MEAL'?1U) W *7,!,"Enter B for Breakfast, N for Noon, E for Evening or ALL for all meals" G D2
"RTN","FHSP1",12,0)
 S D3="" G:FHOPT=2 D5
"RTN","FHSP1",13,0)
D3 R !!,"Consolidated List Only? Y//",X:DTIME G:'$T!(X="^") KIL S:X="" X="Y" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Answer YES or NO" G D3
"RTN","FHSP1",14,0)
 S X=$E(X,1),D3=1 S:X="Y" D3=D3+1
"RTN","FHSP1",15,0)
D5 W ! K DIR,LABSTART S DIR(0)="NA^1:10",DIR("A")="If using laser label sheets, what row do you want to begin printing at? ",DIR("B")=1 D ^DIR
"RTN","FHSP1",16,0)
 Q:$D(DIRUT)  S LABSTART=Y
"RTN","FHSP1",17,0)
 W:'D3 !!,"Place Labels in Printer"
"RTN","FHSP1",18,0)
PR K IOP S %ZIS="MQ",%ZIS("A")="Select "_$S('D3:"LABEL",1:"LIST")_" Printer: " W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHSP1",19,0)
 I $D(IO("Q")) S FHPGM="Q1^FHSP1",FHLST="D3^FHOPT^FHP^MEAL^LABSTART" D EN2^FH G KIL
"RTN","FHSP1",20,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHSP1",21,0)
Q1 ; Print Standing Orders List or Labels
"RTN","FHSP1",22,0)
 K ^TMP($J),C,D,N S (CHK,N1,PG)=0 D NOW^%DTC S NOW=%,DT=%\1
"RTN","FHSP1",23,0)
 S COUNT=0,LINE=1,DTP=NOW D DTP^FH S DTR=DTP
"RTN","FHSP1",24,0)
 I FHOPT=2 S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1
"RTN","FHSP1",25,0)
 I MEAL="A" S MEAL="B" D Q2 S MEAL="N" D Q2 S MEAL="E"
"RTN","FHSP1",26,0)
 D Q2
"RTN","FHSP1",27,0)
 I $G(LAB)>2 D DPLL^FHLABEL Q
"RTN","FHSP1",28,0)
 F L=1:1:$S('D3:18,1:1) W !
"RTN","FHSP1",29,0)
 Q
"RTN","FHSP1",30,0)
Q2 S T0=NOW\1_$S(MEAL="B":".07",MEAL="N":".11",1:".17"),TT=0
"RTN","FHSP1",31,0)
 F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  D DP I DP'="" D P0 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  S ADM=^FHPT("AW",W1,FHDFN) D ADD
"RTN","FHSP1",32,0)
 G:FHOPT=2 ^FHSP11
"RTN","FHSP1",33,0)
 S DTP=DT D DTP^FH S DTE=DTP_" "_$S(MEAL="B":"Break",MEAL="N":"Noon",1:"Even")
"RTN","FHSP1",34,0)
 G:D3=2 CON
"RTN","FHSP1",35,0)
 K S F K=0:0 S K=$O(D(K)) Q:K=""  S X=$G(^FH(119.72,K,0)),N2=$P(X,"^",1),N3=$P(X,"^",4) S:N3="" N3=$E(N2,1,6) S S(N3,K)=$E(N3,1,6)
"RTN","FHSP1",36,0)
 S A1="" F  S A1=$O(S(A1)) Q:A1=""  F K=0:0 S K=$O(S(A1,K)) Q:K=""  S N2=$G(S(A1,K)) D LST
"RTN","FHSP1",37,0)
 K C,D,N Q
"RTN","FHSP1",38,0)
ADD Q:ADM<1
"RTN","FHSP1",39,0)
 D CHK I K2 F K2=0:0 S K2=$O(^FHPT("ASP",FHDFN,ADM,K2)) Q:K2<1  S Y=^FHPT(FHDFN,"A",ADM,"SP",K2,0) D A1
"RTN","FHSP1",40,0)
 Q
"RTN","FHSP1",41,0)
A1 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHSP1",42,0)
 S Y=$P(Y,"^",2,3)_"^"_$P(Y,"^",8) Q:Y?."^"  I FHOPT=2 S Y=Y_"^"_IS,RM=$G(^DPT(DFN,.101)),WRD=P0_$E(WRDN,1,27-$L(RM))_"/"_RM,^TMP($J,"SOL",SP,WRD,FHDFN,K2)=Y Q
"RTN","FHSP1",43,0)
 S FHORD=$P(Y,"^",1),M1=$P(Y,"^",2)
"RTN","FHSP1",44,0)
 I FHORD,M1[MEAL S:'$D(N(FHORD,SP)) N(FHORD,SP)=0 S Q=$P(Y,"^",3),N(FHORD,SP)=N(FHORD,SP)+$S(Q:Q,1:1) S:'$D(C(MEAL,SP)) C(MEAL,SP)=0 I TT'=FHDFN S C(MEAL,SP)=C(MEAL,SP)+1,TT=FHDFN
"RTN","FHSP1",45,0)
 Q
"RTN","FHSP1",46,0)
CHK S K2=0,X1=$G(^FHPT(FHDFN,"A",ADM,0)),FHORD=$P(X1,"^",2),IS=$P(X1,"^",10),X1=$P(X1,"^",3) G:FHORD<1 C1
"RTN","FHSP1",47,0)
 I IS S IS=$P($G(^FH(119.4,IS,0)),"^",3) S:IS'="N" IS=""
"RTN","FHSP1",48,0)
 I X1>1,X1'>T0 G C2
"RTN","FHSP1",49,0)
C0 I '$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) G C2
"RTN","FHSP1",50,0)
 S X1=$P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",8) I X1="" G C1
"RTN","FHSP1",51,0)
 S:X1="D" X1="T" Q:'$D(S(X1))  S:DP[X1 K2=1 S:K2 SP=S(X1)
"RTN","FHSP1",52,0)
C1 K FHORD,A1,K,X1 Q
"RTN","FHSP1",53,0)
C2 S A1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1!(K>T0)  S A1=K
"RTN","FHSP1",54,0)
 G:'A1 C1 S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2) G:FHORD'<1 C0 K ^FHPT(FHDFN,"A",ADM,"AC",A1) G C2
"RTN","FHSP1",55,0)
DP K S S DP=""
"RTN","FHSP1",56,0)
 F L=5,6 S X=$P($G(^FH(119.6,W1,0)),"^",L) I X=FHP!('FHP) S:X S($E("TC",L-4))=X,D(X)="",DP=DP_$E("TC",L-4)
"RTN","FHSP1",57,0)
 Q
"RTN","FHSP1",58,0)
P0 S X=^FH(119.6,W1,0),P0=$P(X,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0),WRDN=$P(X,"^",1) Q
"RTN","FHSP1",59,0)
LST D HDR1 S NX="" F  S NX=$O(^FH(118.3,"B",NX)) Q:NX=""  F KK=0:0 S KK=$O(^FH(118.3,"B",NX,KK)) Q:KK<1  S Z=$G(N(KK,K)) D:$Y>(IOSL-6) HDR1 I Z W !?(80-30\2),$J(Z,6)," ",$P(^FH(118.3,KK,0),"^",1)
"RTN","FHSP1",60,0)
 S N1=N1+$G(C(MEAL,K))
"RTN","FHSP1",61,0)
 D PP S N1=0 Q
"RTN","FHSP1",62,0)
CON K S S L1=36
"RTN","FHSP1",63,0)
 F K=0:0 S K=$O(D(K)) Q:K=""  S X=^FH(119.72,K,0),N2=$P(X,"^",1),N3=$P(X,"^",4) S:N3="" N3=$E(N2,1,6) S S(N3,K)=$J(N3,8),L1=L1+8
"RTN","FHSP1",64,0)
 S:L1<80 L1=80 D HDR
"RTN","FHSP1",65,0)
 S NX="" F  S NX=$O(^FH(118.3,"B",NX)) Q:NX=""  F KK=0:0 S KK=$O(^FH(118.3,"B",NX,KK)) Q:KK<1  I $D(N(KK)) D SOR
"RTN","FHSP1",66,0)
 W !!,"# OF PATIENTS",?31
"RTN","FHSP1",67,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K=0:0 S K=$O(S(X,K)) Q:K=""  S Z=$G(C(MEAL,K)) W $S(Z:$J(Z,6),1:$J("",6)),"  " S N1=N1+Z
"RTN","FHSP1",68,0)
 W $S(N1:$J(N1,6),1:$J("",6))
"RTN","FHSP1",69,0)
 S N1=0 K C,D,N Q
"RTN","FHSP1",70,0)
SOR D:$Y>(IOSL-6) HDR
"RTN","FHSP1",71,0)
 W !,$P($G(^FH(118.3,KK,0)),"^",1),?31
"RTN","FHSP1",72,0)
 S Z1=0,X="" F  S X=$O(S(X)) Q:X=""  F K=0:0 S K=$O(S(X,K)) Q:K=""  S Z=$G(N(KK,K)) W $S(Z:$J(Z,6),1:$J("",6)),"  " S Z1=Z1+Z
"RTN","FHSP1",73,0)
 W $S(Z1:$J(Z1,6),1:$J("",6))
"RTN","FHSP1",74,0)
 Q
"RTN","FHSP1",75,0)
PP W !!?(80-21\2),"**** PATIENTS = ",N1," ****",! Q
"RTN","FHSP1",76,0)
HDR ; Header for Consolidated List
"RTN","FHSP1",77,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHSP1",78,0)
 W !,DTR,?(L1-11),"Page ",PG,!!?(L1-55\2),"C O N S O L I D A T E D   S T A N D I N G   O R D E R S",!!?(L1-$L(DTE)\2),DTE,!!?29
"RTN","FHSP1",79,0)
 S X="" F  S X=$O(S(X)) Q:X=""  F K=0:0 S K=$O(S(X,K)) Q:K=""  W S(X,K)
"RTN","FHSP1",80,0)
 W "   TOTAL",! Q
"RTN","FHSP1",81,0)
HDR1 ; Header for Standing Order List
"RTN","FHSP1",82,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,DTR,?69,"Page ",PG,!!?20,"S T A N D I N G   O R D E R S   L I S T"
"RTN","FHSP1",83,0)
 W !?(80-$L(N2)\2),N2,!?(80-$L(DTE)\2),DTE,! Q
"RTN","FHSP1",84,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHSP11")
0^298^B6211120
"RTN","FHSP11",1,0)
FHSP11 ; HISC/NCA,RTK - Print Standing Orders Labels ;2/26/96  09:59
"RTN","FHSP11",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSP11",3,0)
 K ^TMP($J,"NAME") F NX=0:0 S NX=$O(^FH(118.3,NX)) Q:NX<1  S Y=^(NX,0),N1=$P(Y,"^",1) I '$D(^FH(118.3,NX,"I")) S ^TMP($J,"NAME",NX)=$P(Y,"^",1)
"RTN","FHSP11",4,0)
 D P1
"RTN","FHSP11",5,0)
 Q
"RTN","FHSP11",6,0)
P1 S DTP=DT D DTP^FH S DTE=DTP_" "_$S(MEAL="B":"BREAK",MEAL="N":"NOON",1:"EVEN"),S1=$S(LAB=1:6,1:9),S2=LAB=2*5+33
"RTN","FHSP11",7,0)
 F SP=0:0 S SP=$O(^TMP($J,"SOL",SP)) Q:SP<1  D P2
"RTN","FHSP11",8,0)
 Q
"RTN","FHSP11",9,0)
P2 S WRD="" F  S WRD=$O(^TMP($J,"SOL",SP,WRD)) Q:WRD=""  D P3
"RTN","FHSP11",10,0)
 Q
"RTN","FHSP11",11,0)
P3 F FHDFN=0:0 S FHDFN=$O(^TMP($J,"SOL",SP,WRD,FHDFN)) Q:FHDFN<1  D PID^FHDPA,P4
"RTN","FHSP11",12,0)
 Q
"RTN","FHSP11",13,0)
P4 F FHL=0:0 S FHL=$O(^TMP($J,"SOL",SP,WRD,FHDFN,FHL)) Q:FHL<1  D P5
"RTN","FHSP11",14,0)
 Q
"RTN","FHSP11",15,0)
P5 S Y=^(FHL)
"RTN","FHSP11",16,0)
 S IS=$P(Y,"^",4),FHORD=$P(Y,"^",1) Q:'FHORD  S M1=$P(Y,"^",2) Q:M1'[MEAL  S Q=$P(Y,"^",3) S:'Q Q=1
"RTN","FHSP11",17,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHSP11",18,0)
 Q:$P($G(^FH(118.3,+FHORD,0)),"^",2)'="Y"  S NAM=$P(^DPT(DFN,0),"^",1)
"RTN","FHSP11",19,0)
 I LAB>2 D LL Q
"RTN","FHSP11",20,0)
 W !,$E(NAM,1,S2-$L(WRD)),?(S2+2-$L(WRD)),$E(WRD,3,99),!?$S(LAB=1:3,1:0),BID W:IS'="" ?(S2-22),"*NURSE" W ?(S2-15),DTE S LN=2 I LAB=2 W !! S LN=4
"RTN","FHSP11",21,0)
 W !,$J(Q,2)," ",$S($D(^TMP($J,"NAME",FHORD)):$P(^TMP($J,"NAME",FHORD),"^",1),$D(^FH(118.3,+FHORD,0)):$P(^(0),"^",1),1:"") S LN=LN+1
"RTN","FHSP11",22,0)
 I LN<S1 F L=LN+1:1:S1 W !
"RTN","FHSP11",23,0)
 Q
"RTN","FHSP11",24,0)
LL ;
"RTN","FHSP11",25,0)
 S FHCOL=$S(LAB=3:3,1:2)
"RTN","FHSP11",26,0)
 I LABSTART>1 F FHLABST=1:1:(LABSTART-1)*FHCOL D  S LABSTART=1
"RTN","FHSP11",27,0)
 .I LAB=3 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6)="" D LL3^FHLABEL
"RTN","FHSP11",28,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6,PCL7,PCL8)="" D LL4^FHLABEL
"RTN","FHSP11",29,0)
 .Q
"RTN","FHSP11",30,0)
 S FHTAB=$S(LAB=3:24,1:37)
"RTN","FHSP11",31,0)
 S WRD1=$E(WRD,3,99)
"RTN","FHSP11",32,0)
 S NAM=$E(NAM,1,FHTAB-$L(WRD1)),BIDIS=BID I IS="N" S BIDIS=BID_" *NURSE"
"RTN","FHSP11",33,0)
 S LNA=NAM_$J(WRD1,FHTAB+1-$L(NAM)),LNB=BIDIS_$J(DTE,FHTAB+1-$L(BIDIS))
"RTN","FHSP11",34,0)
 S LNC=$J(Q,2)_" "_$P($G(^FH(118.3,+FHORD,0)),U,1)
"RTN","FHSP11",35,0)
 I LAB=3 S (PCL1,PCL4,PCL6)="",PCL2=LNA,PCL3=LNB,PCL5=LNC
"RTN","FHSP11",36,0)
 I LAB=4 S (PCL1,PCL2,PCL5,PCL7,PCL8)="",PCL3=LNA,PCL4=LNB,PCL6=LNC
"RTN","FHSP11",37,0)
 D:LAB=3 LL3^FHLABEL D:LAB=4 LL4^FHLABEL
"RTN","FHSP11",38,0)
 Q
"RTN","FHSPED")
0^299^B20565975
"RTN","FHSPED",1,0)
FHSPED ; HISC/REL/NCA - Enter/Cancel Standing Orders ;7/22/94  13:59 
"RTN","FHSPED",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSPED",3,0)
EN1 ; Enter Standing Orders for Patient
"RTN","FHSPED",4,0)
 D NOW^%DTC S NOW=% S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL
"RTN","FHSPED",5,0)
E1 W ! S NO=1 D LIS G:'LN N1
"RTN","FHSPED",6,0)
 K DIR W ! S DIR(0)="YA",DIR("A")="Edit a Standing Order? ",DIR("B")="YES" D ^DIR K DIR G:$D(DIRUT)!$D(DIROUT) EN1 G:Y<1 N1
"RTN","FHSPED",7,0)
N0 R !!,"Edit which Order #? ",X:DTIME G:'$T!("^"[X) EN1 I X'?1N.N!(X<1)!(X>LN) W *7," Enter # of Order to Edit" G N0
"RTN","FHSPED",8,0)
 S SP=$P(LS,",",+X),SP=$P($G(^FHPT(FHDFN,"A",ADM,"SP",+SP,0)),"^",2) I $D(P(+X,SP)) S LN=+X  G N1A
"RTN","FHSPED",9,0)
 W !!,"Standing Order ",$P($G(^FH(118.3,+SP,0)),"^",1)," added" S LN=LN+1,P(LN,SP)="" G N1A
"RTN","FHSPED",10,0)
N1 K DIC W ! S DIC="^FH(118.3,",DIC("A")="Enter Standing Order: ",DIC(0)="AEQM"
"RTN","FHSPED",11,0)
 D ^DIC K DIC,DLAYGO G EN1:"^"[X!$D(DTOUT),N1:Y<1 S SP=+Y
"RTN","FHSPED",12,0)
 W !!,"Standing Order ",$P($G(^FH(118.3,+SP,0)),"^",1)," added"
"RTN","FHSPED",13,0)
 S LN=LN+1,P(LN,SP)=""
"RTN","FHSPED",14,0)
N1A W !,"Standing Order: ",$P($G(^FH(118.3,+SP,0)),"^",1)_" // " R X:DTIME G KIL:'$T,FHSPED:X="^"
"RTN","FHSPED",15,0)
 I X="@" D EN3 W "  .. Done" G E1
"RTN","FHSPED",16,0)
 I X'="" W *7,!,"Press Return to take Default or ""@"" to Delete" G N1A
"RTN","FHSPED",17,0)
 S $P(P(LN,SP),"^",5)=SP
"RTN","FHSPED",18,0)
N2 W !,"Select Meal (B,N,E or ALL): ",$S($P(P(LN,SP),"^",3)'="":$P(P(LN,SP),"^",3)_" // ",1:"") R MEAL:DTIME G:'$T!(MEAL="^") KIL
"RTN","FHSPED",19,0)
 I MEAL="" G:$P(P(LN,SP),"^",3)="" KIL S MEAL=$P(P(LN,SP),"^",3),$P(P(LN,SP),"^",6)=MEAL G N2A
"RTN","FHSPED",20,0)
 I MEAL="@" S $P(P(LN,SP),"^",3)="" G N2
"RTN","FHSPED",21,0)
 S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="BNE" S X=MEAL,MEAL="" S:X["B" MEAL="B" S:X["N" MEAL=MEAL_"N" S:X["E" MEAL=MEAL_"E"
"RTN","FHSPED",22,0)
 I $L(X)'=$L(MEAL) W *7,!,"Select B for Breakfast, N for Noon, E for Evening or ALL for all meals",!,"Answer may be multiple meals, e.g., BN or NE" G N2
"RTN","FHSPED",23,0)
 S $P(P(LN,SP),"^",6)=MEAL
"RTN","FHSPED",24,0)
N2A W !,"Quantity:  ",$S($P(P(LN,SP),"^",4):$P(P(LN,SP),"^",4)_"// ",1:"1// ") R NUM:DTIME S:NUM="" NUM=$S($P(P(LN,SP),"^",4):$P(P(LN,SP),"^",4),1:1) G:'$T!(NUM="^") KIL
"RTN","FHSPED",25,0)
 I NUM="@" S $P(P(LN,SP),"^",4)="" G N2A
"RTN","FHSPED",26,0)
 I NUM'?1N!(NUM<1) W !,*7,"Enter a number from 1-9." G N2A
"RTN","FHSPED",27,0)
 S $P(P(LN,SP),"^",7)=NUM
"RTN","FHSPED",28,0)
 S C1=$P(P(LN,SP),"^",2,4),C2=$P(P(LN,SP),"^",5,7) G:C1=C2 E1
"RTN","FHSPED",29,0)
N3 W !!,"ADD this Order? Y// " R YN:DTIME G:'$T!(YN="^") KIL S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7,"  Answer YES or NO" G N3
"RTN","FHSPED",30,0)
 G:YN?1"N".E E1
"RTN","FHSPED",31,0)
 I C1'="^^" S OLD=$P(P(LN,SP),"^",1),$P(^FHPT(FHDFN,"A",ADM,"SP",OLD,0),"^",6,7)=NOW_"^"_DUZ K ^FHPT("ASP",FHDFN,ADM,OLD) S EVT="S^C^"_OLD D ^FHORX
"RTN","FHSPED",32,0)
 S $P(P(LN,SP),"^",2,4)="^^",$P(P(LN,SP),"^",2,4)=$P(P(LN,SP),"^",5,7),$P(P(LN,SP),"^",5,7)="^^"
"RTN","FHSPED",33,0)
ADD ; Add Standing Order
"RTN","FHSPED",34,0)
 L +^FHPT(FHDFN,"A",ADM,"SP",0)
"RTN","FHSPED",35,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"SP",0)) S ^FHPT(FHDFN,"A",ADM,"SP",0)="^115.08^^"
"RTN","FHSPED",36,0)
 S X=^FHPT(FHDFN,"A",ADM,"SP",0),NO=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_NO_"^"_($P(X,"^",4)+1)
"RTN","FHSPED",37,0)
 L -^FHPT(FHDFN,"A",ADM,"SP",0) I $D(^FHPT(FHDFN,"A",ADM,"SP",NO)) G ADD
"RTN","FHSPED",38,0)
 S ^FHPT(FHDFN,"A",ADM,"SP",NO,0)=NO_"^"_SP_"^"_MEAL_"^"_NOW_"^"_DUZ_"^^^"_NUM,^FHPT("ASP",FHDFN,ADM,NO)="",LS=LS_NO_","
"RTN","FHSPED",39,0)
 S $P(P(LN,SP),"^",1)=NO,EVT="S^O^"_NO D ^FHORX W "  .. done" G E1
"RTN","FHSPED",40,0)
EN2 ; Standing Order Inquiry
"RTN","FHSPED",41,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL S NO=0 D LIS G EN2
"RTN","FHSPED",42,0)
EN3 ; Cancel Standing Order
"RTN","FHSPED",43,0)
 S NO=$P($G(P(LN,SP)),"^",1) Q:'NO
"RTN","FHSPED",44,0)
 S $P(^FHPT(FHDFN,"A",ADM,"SP",NO,0),"^",6,7)=NOW_"^"_DUZ
"RTN","FHSPED",45,0)
 S X=^FHPT(FHDFN,"A",ADM,"SP",NO,0),SP=$P(X,"^",2),MEAL=$P(X,"^",3),NUM=""
"RTN","FHSPED",46,0)
 K ^FHPT("ASP",FHDFN,ADM,NO),P(LN,SP) S EVT="S^C^"_NO D ^FHORX Q
"RTN","FHSPED",47,0)
LIS S NAM=$P(^DPT(DFN,0),"^",1) D CUR^FHORD7
"RTN","FHSPED",48,0)
 W !!,NAM,"  " W:WARD'="" "( ",WARD," )"
"RTN","FHSPED",49,0)
 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHSPED",50,0)
 K N,P S CTR=0
"RTN","FHSPED",51,0)
 F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  S X=^FHPT(FHDFN,"A",ADM,"SP",K,0),M=$P(X,"^",3),M=$S(M="BNE":"A",1:$E(M,1)),N(M,K)=$P(X,"^",2,3)_"^"_$P(X,"^",8,9)
"RTN","FHSPED",52,0)
 S LN=0,LS="" I $O(N(""))="" W !!,"No Active Standing Orders" Q
"RTN","FHSPED",53,0)
 W !!,"Active Standing Orders ",!
"RTN","FHSPED",54,0)
 F M="A","B","N","E" D
"RTN","FHSPED",55,0)
 .F K=0:0 S K=$O(N(M,K)) Q:K<1  S Z=+N(M,K) I Z D
"RTN","FHSPED",56,0)
 ..S LN=LN+1,LS=LS_K_"," D L1 W ! W:NO $J(LN,2)
"RTN","FHSPED",57,0)
 ..S NUM=$P(N(M,K),"^",3)
"RTN","FHSPED",58,0)
 ..W ?5,M2,?18,$S(NUM:NUM,1:1)," ",$P(^FH(118.3,Z,0),"^",1)_$S($P(N(M,K),"^",4)'="Y":" (I)",1:"")
"RTN","FHSPED",59,0)
 ..;BREAK - NEXT LINE MAY BE IN A FUTURE PATCH (NOIS #FGH-0302-30384)
"RTN","FHSPED",60,0)
 ..;W ?5,M2,?18,$S(NUM:NUM,1:1)," ",$P(^FH(118.3,Z,0),"^",1)_$S($P(N(M,K),"^",4)'="Y":" (I)",1:"") I $G(^FH(118.3,Z,"I"))="Y" W "     (** INACTIVE **)"
"RTN","FHSPED",61,0)
 ..S P(LN,+Z)=K_"^"_$P(N(M,K),"^",1,3) Q
"RTN","FHSPED",62,0)
 .Q
"RTN","FHSPED",63,0)
 Q
"RTN","FHSPED",64,0)
L1 ; Store Standing Order By Meal
"RTN","FHSPED",65,0)
 S M1=$P(N(M,K),"^",2) I M1="BNE" S M2="All Meals" Q
"RTN","FHSPED",66,0)
 S L=$E(M1,1),M2=$S(L="B":"Break",L="N":"Noon",1:"Even")
"RTN","FHSPED",67,0)
 S L=$E(M1,2) Q:L=""  S M2=M2_","_$S(L="B":"Break",L="N":"Noon",1:"Even") Q
"RTN","FHSPED",68,0)
KIL G KILL^XUSCLEAN
"RTN","FHSPTAB")
0^300^B9025859
"RTN","FHSPTAB",1,0)
FHSPTAB ; HISC/REL/NCA - Tabulate Standing Orders ;4/27/93  13:07 
"RTN","FHSPTAB",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSPTAB",3,0)
 S FHP=$O(^FH(119.72,0)) I FHP'<1,$O(^FH(119.72,FHP))<1 S FHP=0 G R1
"RTN","FHSPTAB",4,0)
R0 R !!,"Select SERVICE POINT (or ALL): ",X:DTIME G:'$T!("^"[X) KIL D:X="all" TR^FH I X="ALL" S FHP=0
"RTN","FHSPTAB",5,0)
 E  K DIC S DIC="^FH(119.72,",DIC(0)="EMQ" D ^DIC G:Y<1 R0 S FHP=+Y
"RTN","FHSPTAB",6,0)
R1 R !!,"Select Meal (B,N,E or ALL): ",MEAL:DTIME G:'$T!("^"[MEAL) KIL S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="A"
"RTN","FHSPTAB",7,0)
 I "BNEA"'[MEAL!(MEAL'?1U) W *7,!,"Enter B for Breakfast, N for Noon , E for Evening or ALL for all meals" G R1
"RTN","FHSPTAB",8,0)
R3 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHSPTAB",9,0)
 I $D(IO("Q")) S FHPGM="Q1^FHSPTAB",FHLST="FHP^MEAL" D EN2^FH G KIL
"RTN","FHSPTAB",10,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHSPTAB",11,0)
Q1 ; Print the Tabulated List of Standing Orders
"RTN","FHSPTAB",12,0)
 D NOW^%DTC S NOW=%,PG=0 I MEAL'="A" G Q2
"RTN","FHSPTAB",13,0)
 F MEAL="B","N","E" D Q2
"RTN","FHSPTAB",14,0)
 Q
"RTN","FHSPTAB",15,0)
Q2 S T0=(NOW\1)_$S(MEAL="B":".07",MEAL="N":".11",1:".17")
"RTN","FHSPTAB",16,0)
 K N F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  D DP I DP'="" F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",W1,FHDFN)) Q:FHDFN<1  S ADM=^FHPT("AW",W1,FHDFN) D ADD
"RTN","FHSPTAB",17,0)
 D HDR S NX="" F K1=0:0 S NX=$O(^FH(118.3,"B",NX)) Q:NX=""  F K=0:0 S K=$O(^FH(118.3,"B",NX,K)) Q:K<1  I $D(N(K)) D:$Y>56 HDR W !,$J(N(K),6),"       ",$P(^FH(118.3,K,0),"^",1)
"RTN","FHSPTAB",18,0)
 W ! Q
"RTN","FHSPTAB",19,0)
ADD Q:ADM<1  D CHK I K2 F K2=0:0 S K2=$O(^FHPT("ASP",FHDFN,ADM,K2)) Q:K2<1  S X=^FHPT(FHDFN,"A",ADM,"SP",K2,0) D A1
"RTN","FHSPTAB",20,0)
 Q
"RTN","FHSPTAB",21,0)
A1 S FHORD=$P(X,"^",2),M1=$P(X,"^",3) I FHORD,M1[MEAL S:'$D(N(FHORD)) N(FHORD)=0 S Q=$P(X,"^",8),N(FHORD)=N(FHORD)+$S(Q:Q,1:1)
"RTN","FHSPTAB",22,0)
 Q
"RTN","FHSPTAB",23,0)
CHK S K2=0,X1=$G(^FHPT(FHDFN,"A",ADM,0)),FHORD=$P(X1,"^",2),X1=$P(X1,"^",3) G:FHORD<1 C1
"RTN","FHSPTAB",24,0)
 I X1>1,X1'>T0 G C2
"RTN","FHSPTAB",25,0)
C0 I '$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) G C2
"RTN","FHSPTAB",26,0)
 S X1=$P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",8) I X1="" G C1
"RTN","FHSPTAB",27,0)
 S:X1="D" X1="T" S:DP[X1 K2=1
"RTN","FHSPTAB",28,0)
C1 K FHORD,A1,K,X1 Q
"RTN","FHSPTAB",29,0)
C2 S A1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1!(K>T0)  S A1=K
"RTN","FHSPTAB",30,0)
 G:'A1 C1 S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2) G:FHORD'<1 C0 K ^FHPT(FHDFN,"A",ADM,"AC",A1) G C2
"RTN","FHSPTAB",31,0)
DP S DP="" I 'FHP S DP="TC" Q
"RTN","FHSPTAB",32,0)
 S X=$P($G(^FH(119.6,W1,0)),"^",5,6) S:$P(X,"^",1)=FHP DP="T" S:$P(X,"^",2)=FHP DP=DP_"C" Q
"RTN","FHSPTAB",33,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=NOW D DTP^FH W !,DTP,?25,"S T A N D I N G   O R D E R S",?74,"Page ",PG
"RTN","FHSPTAB",34,0)
 W !! W:FHP $P(^FH(119.72,FHP,0),"^",1) S Y=$S(MEAL="B":"BREAKFAST",MEAL="N":"NOON",1:"EVENING") W ?(80-$L(Y)\2),Y
"RTN","FHSPTAB",35,0)
 W !!,"Quantity     Order",! Q
"RTN","FHSPTAB",36,0)
KIL G KILL^XUSCLEAN
"RTN","FHSYSF")
0^301^B1170383
"RTN","FHSYSF",1,0)
FHSYSF ; HISC/REL - File Manager Search/Print ;7/8/93  13:34 
"RTN","FHSYSF",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSYSF",3,0)
PRNT ; File Manager Print
"RTN","FHSYSF",4,0)
 D DICRW Q:Y<1  S L=1 D EN1^DIP G KIL
"RTN","FHSYSF",5,0)
SRCH ; File Manager Search
"RTN","FHSYSF",6,0)
 D DICRW Q:Y<1  D EN^DIS G KIL
"RTN","FHSYSF",7,0)
DIC ; List Dictionary
"RTN","FHSYSF",8,0)
 W ! D ^DID G KIL
"RTN","FHSYSF",9,0)
INQ ; Inquire to File
"RTN","FHSYSF",10,0)
 D DICRW Q:Y<1  S DI=DIC,DPP(1)=+Y_"^^^@",DK=+Y
"RTN","FHSYSF",11,0)
 D B^DII G KIL
"RTN","FHSYSF",12,0)
DICRW ; Select File
"RTN","FHSYSF",13,0)
 K ^UTILITY($J),%,%ZIS,DTOUT,DC,O,N,R,BY,DA,DHD,DI,DIC,DPP,DK,DIQ,DIS,DUOUT,FR,L,TO
"RTN","FHSYSF",14,0)
 D NOW^%DTC S DT=%\1 K %,%H,%I
"RTN","FHSYSF",15,0)
 S DIC="^DIC(",DIC("S")="I +Y>109.99,+Y<120",DIC(0)="AEQM",DIC("A")="OUTPUT FROM WHAT FILE: "
"RTN","FHSYSF",16,0)
 W ! D ^DIC K DIC I $D(DTOUT)!(Y<1) Q
"RTN","FHSYSF",17,0)
 I $D(^DIC(+Y,0,"GL")) K DIC S DIC=^("GL") Q
"RTN","FHSYSF",18,0)
 K DIC S Y=-1 Q
"RTN","FHSYSF",19,0)
KIL ; Kill Variables
"RTN","FHSYSF",20,0)
 G KILL^XUSCLEAN
"RTN","FHSYSK")
0^302^B4790690
"RTN","FHSYSK",1,0)
FHSYSK ; HISC/REL - Purge Old Diet Activities ;2/13/95  13:34 
"RTN","FHSYSK",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSYSK",3,0)
 S X="T-400",%DT="X" D ^%DT S EDT=+Y
"RTN","FHSYSK",4,0)
D1 W !!,"Purge To: ",$E(EDT,4,5),"-",$E(EDT,6,7),"-",$E(EDT,2,3)," // " R X:DTIME Q:'$T!(X="^")  G:X="" D2 S %DT="EX" D ^%DT Q:U[X!$D(DTOUT)  G:Y<1 D1
"RTN","FHSYSK",5,0)
 I Y>EDT W *7,!!,"CANNOT PURGE DATA LATER THAN T-400 DAYS!" G D1
"RTN","FHSYSK",6,0)
 S EDT=+Y
"RTN","FHSYSK",7,0)
D2 K ZTUCI,ZTDTH,ZTIO,ZTSAVE S ZTRTN="Q1^FHSYSK",ZTREQ="@",ZTSAVE("ZTREQ")="",ZTSAVE("EDT")=""
"RTN","FHSYSK",8,0)
 W !!,"Request will be Queued."
"RTN","FHSYSK",9,0)
 S ZTIO="",ZTDESC="Purge Old Dietetic Activities" D ^%ZTLOAD K ZTSK Q
"RTN","FHSYSK",10,0)
Q1 ; Process Purge
"RTN","FHSYSK",11,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT(FHDFN)) Q:FHDFN<1  F ADM=0:0 S ADM=$O(^FHPT(FHDFN,"A",ADM)) Q:ADM<1  S X=$P($G(^DGPM(ADM,0)),"^",17) I X S X=$P($G(^DGPM(+X,0)),"^",1) I X,X<EDT D K0
"RTN","FHSYSK",12,0)
 F D1="ADLT","ADR","ADRU" S D2="" F K1=0:0 S D2=$O(^FHPT(D1,D2)) Q:D2=""  F FHDFN=0:0 S FHDFN=$O(^FHPT(D1,D2,FHDFN)) Q:FHDFN<1  F ADM=0:0 S ADM=$O(^FHPT(D1,D2,FHDFN,ADM)) Q:ADM<1  I '$D(^FHPT(FHDFN,"A",ADM)) K ^FHPT(D1,D2,FHDFN,ADM)
"RTN","FHSYSK",13,0)
 K %DT,ADM,D1,D2,FHDFN,DFN,EDT,K1,X,Y Q
"RTN","FHSYSK",14,0)
K0 K ^FHPT(FHDFN,"A",ADM),^FHPT("ADTF",FHDFN,ADM),^FHPT("AOO",FHDFN,ADM),^FHPT("ASP",FHDFN,ADM) Q
"RTN","FHSYSP")
0^303^B2630692
"RTN","FHSYSP",1,0)
FHSYSP ; HISC/REL - Site Parameter Edit ;3/20/95  07:53
"RTN","FHSYSP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHSYSP",3,0)
 S DA=1,DIE="^FH(119.9,"
"RTN","FHSYSP",4,0)
 I '$D(^FH(119.9,DA,0)) S DR=".01///"_DA D ^DIE
"RTN","FHSYSP",5,0)
 W ! S DR="3;22;4:18;25:39;100//Y;I X'=""Y"" S Y="""";99" D ^DIE G KIL
"RTN","FHSYSP",6,0)
EN1 ; Display Selected Lab Tests
"RTN","FHSYSP",7,0)
 W ! S L=0,DIC="^FH(119.9,",FLDS="[FHSYP1]",BY="@SITE"
"RTN","FHSYSP",8,0)
 S (FR,TO)=1,DHD="SELECTED LABORATORY TESTS" D EN1^DIP,RSET Q
"RTN","FHSYSP",9,0)
EN2 ; Display Selected Drug Classifications
"RTN","FHSYSP",10,0)
 W ! S L=0,DIC="^FH(119.9,",FLDS="[FHSYP2]",BY="@SITE"
"RTN","FHSYSP",11,0)
 S (FR,TO)=1,DHD="SELECTED DRUG CLASSIFICATIONS" D EN1^DIP,RSET Q
"RTN","FHSYSP",12,0)
EN3 ; Clinical Site Parameters
"RTN","FHSYSP",13,0)
 S DA=1,DIE="^FH(119.9,",DR="[FHSITEC1]" W ! D ^DIE G KIL
"RTN","FHSYSP",14,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHSYSP",15,0)
KIL G KILL^XUSCLEAN
"RTN","FHSYSP",16,0)
TIM ; Convert to printable time
"RTN","FHSYSP",17,0)
 I $L(X)>6!($L(X)<2) G ERR
"RTN","FHSYSP",18,0)
 I X'["A",X'["P" G ERR
"RTN","FHSYSP",19,0)
 S:$L(X)<4 X=$E(X,1,$L(X)-1)_"00"_$E(X,$L(X))
"RTN","FHSYSP",20,0)
 I X[":",X?1.2N1":"2N1"A"!(X?1.2N1":"2N1"P") S X=+$P(X,":",1)_$P(X,":",2) G 1
"RTN","FHSYSP",21,0)
 I X'[":",X?3.4N1"A"!(X?3.4N1"P") G 1
"RTN","FHSYSP",22,0)
ERR W *7,"  Enter time as 8:15A or 12:30P" K X Q
"RTN","FHSYSP",23,0)
1 I X#100>59!(X>1259)!(X<1) G ERR
"RTN","FHSYSP",24,0)
 I X<1000 S:$E(X,1) X="0"_X
"RTN","FHSYSP",25,0)
 S X=+$E(X,1,2)_":"_$E(X,3,4)_$S(X["A":"A",1:"P") Q
"RTN","FHSYSP",26,0)
MIL ; Check for AM or PM
"RTN","FHSYSP",27,0)
 S X1=$P(X,":",1)_$P(X,":",2),X1=+X1
"RTN","FHSYSP",28,0)
 I X["P",X1<1200 S X1=X1+1200
"RTN","FHSYSP",29,0)
 I X["A",X1>1200 S X1=X1-1200
"RTN","FHSYSP",30,0)
 Q
"RTN","FHSYSP",31,0)
MIP ; Get the printable time
"RTN","FHSYSP",32,0)
 S Z=$S(Y<1200:"A",1:"P") I Z="P",Y>1259 S Y=Y-1200
"RTN","FHSYSP",33,0)
 S Y=$E("000"_Y,$L(Y),$L(Y)+3),Y=+$E(Y,1,2)_":"_$E(Y,3,4)_Z Q
"RTN","FHVER")
0^304^B1886996
"RTN","FHVER",1,0)
FHVER ; HISC/REL - Dietetics Version ;2/15/95  15:45 
"RTN","FHVER",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHVER",3,0)
 S U="^" S:'$D(FHA1) FHA1=0 S:'$D(DTIME) DTIME=9999 D DT^DICRW
"RTN","FHVER",4,0)
 K %ZIS S IOP="" D ^%ZIS K %ZIS,IOP
"RTN","FHVER",5,0)
 I FHA1=1 W @IOF,!!?20,"D I E T E T I C S   M A N A G E M E N T",!! G VER
"RTN","FHVER",6,0)
 I FHA1=2 W @IOF,!!?22,"C L I N I C A L   D I E T E T I C S",!! G VER
"RTN","FHVER",7,0)
 I FHA1=3 W @IOF,!!?25,"D I E T E T I C   O R D E R S",!! G VER
"RTN","FHVER",8,0)
 I FHA1=4 W @IOF,!!?17,"D I E T E T I C   A D M I N I S T R A T I O N",!! G VER
"RTN","FHVER",9,0)
 I FHA1=5 W @IOF,!!?21,"C L I N I C A L   M A N A G E M E N T",!! G VER
"RTN","FHVER",10,0)
 I FHA1=6 W @IOF,!!?16,"D I E T E T I C   P A T I E N T   P R O F I L E",!! G VER
"RTN","FHVER",11,0)
 I FHA1=7 W @IOF,!!?25,"F O O D   P R O D U C T I O N",!! G VER
"RTN","FHVER",12,0)
 I FHA1=8 W @IOF,!!?5,"A N N U A L   D I E T E T I C   R E P O R T   M A N A G E M E N T",!! G VER
"RTN","FHVER",13,0)
 K FHA1,VER Q
"RTN","FHVER",14,0)
VER S VER=$P($T(FHVER+1),";",3) W ?34,"Version ",VER,!!! K VER,FHA1 Q
"RTN","FHWADM")
0^305^B10963798
"RTN","FHWADM",1,0)
FHWADM ; HISC/REL - Set up admission ;12/4/00  10:35
"RTN","FHWADM",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWADM",3,0)
 ; Changes necessary for new file #115 design:
"RTN","FHWADM",4,0)
 ; The .01 (1 piece of 0 node) for inpatients is now "P"_DFN (ie P7623)
"RTN","FHWADM",5,0)
 ; Therefore this file is no longer DINUMed to file #2.
"RTN","FHWADM",6,0)
 N FHWF S FHWF=$S($D(^ORD(101)):1,1:0)
"RTN","FHWADM",7,0)
 S FHZ115="P"_DFN D ADD^FHOMDPA
"RTN","FHWADM",8,0)
 I '$D(^FHPT(FHDFN,"A",0)) S ^FHPT(FHDFN,"A",0)="^115.01^^"
"RTN","FHWADM",9,0)
 D NOW^%DTC S (FHX3,X)=$S($D(^DGPM(ADM,0)):$P(^(0),"^",1),1:%)
"RTN","FHWADM",10,0)
 I $D(^FHPT(FHDFN,"A",ADM)) S $P(^(ADM,0),"^",1)=X G:$G(^DPT(DFN,.105))'=ADM KIL G UPD
"RTN","FHWADM",11,0)
 S $P(^FHPT(FHDFN,"A",0),"^",3)=ADM,$P(^(0),"^",4)=$P(^(0),"^",4)+1
"RTN","FHWADM",12,0)
 S ^FHPT(FHDFN,"A",ADM,0)=X_"^^^^^^^^"
"RTN","FHWADM",13,0)
 S FHX1=$G(^DPT(DFN,.108)),FHX2=""
"RTN","FHWADM",14,0)
 I FHX1 S FHX1=$O(^FH(119.6,"AR",FHX1,0))
"RTN","FHWADM",15,0)
 E  S FHX1=$G(^DPT(DFN,.1)) I FHX1'="" S FHX1=$O(^DIC(42,"B",FHX1,0)) S:FHX1 FHX1=$O(^FH(119.6,"AW",FHX1,0))
"RTN","FHWADM",16,0)
 S FHX1=$G(^FH(119.6,+FHX1,0))
"RTN","FHWADM",17,0)
 S FHX2=$P(FHX1,"^",16),FHX1=$P(FHX1,"^",15) I 'FHX1,FHX2'="Y" G UPD
"RTN","FHWADM",18,0)
 S X=$S(FHX3>%:FHX3,1:%)
"RTN","FHWADM",19,0)
 S ^FHPT(FHDFN,"A",ADM,"AC",X,0)=X_"^1",^FHPT(FHDFN,"A",ADM,"AC",0)="^115.14^"_X_"^1",^FHPT(FHDFN,"A",ADM,"DI",0)="^115.02A^1^1"
"RTN","FHWADM",20,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",2)=1
"RTN","FHWADM",21,0)
 I 'FHX1 S ^FHPT(FHDFN,"A",ADM,"DI",1,0)="1^^^^^^X^^"_X_"^^"_DUZ_"^"_% S EVT="D^O^1" D ^FHORX G UPD
"RTN","FHWADM",22,0)
 S FHX2=$P($G(^FH(111,FHX1,0)),"^",5)
"RTN","FHWADM",23,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",1,0)="1^"_FHX1_"^^^^^^T^"_X_"^^"_DUZ_"^"_%_"^"_FHX2
"RTN","FHWADM",24,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",5)="T" S EVT="D^O^1" D ^FHORX
"RTN","FHWADM",25,0)
 I 'FHWF S FHOR=FHX1_"^^^^" D ADD K FHOR G UPD
"RTN","FHWADM",26,0)
 S FHNEW="D;"_ADM_";"_1_";"_X_";;;;T;;"_FHX1_";;;;",D1=X,D2="" D NOW^%DTC S NOW=%,FHPV=DUZ,FHOR=FHX1_"^^^^" D DO^FHWOR2
"RTN","FHWADM",27,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",14)="" D WRD D MSG^XQOR("FH EVSEND OR",.MSG) K D1,D2,FHPV,FHNEW,MSG,NOW S $P(^FHPT(FHDFN,"A",ADM,"DI",1,0),"^",15)=6 D ADD K FHOR G KIL
"RTN","FHWADM",28,0)
UPD S $P(^FHPT(FHDFN,"A",ADM,0),"^",14)="" D WRD G KIL
"RTN","FHWADM",29,0)
WRD ; Update Room/Bed & Ward for current admission
"RTN","FHWADM",30,0)
 N FHWRD,FHRMB,WARD D DID^FHDPA Q:WARD=""  S ADM=$G(^DPT("CN",WARD,DFN)) Q:'ADM
"RTN","FHWADM",31,0)
 I '$D(^FHPT(FHDFN,"A",ADM,0)) Q
"RTN","FHWADM",32,0)
 S WARD=$P(^FHPT(FHDFN,"A",ADM,0),"^",8),EVT="L^"_$S(WARD:"T",1:"A")_"^^"_WARD_"~"_$P(^(0),"^",9) I WARD'=FHWRD G NEW
"RTN","FHWADM",33,0)
 I $P(^FHPT(FHDFN,"A",ADM,0),"^",9)'=FHRMB S $P(^(0),"^",9)=FHRMB S EVT=EVT_"~"_FHWRD_"~"_FHRMB D ^FHORX
"RTN","FHWADM",34,0)
 Q
"RTN","FHWADM",35,0)
NEW ; New Ward
"RTN","FHWADM",36,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",8,9)=FHWRD_"^"_FHRMB
"RTN","FHWADM",37,0)
 K:WARD ^FHPT("AW",WARD,FHDFN) I FHWRD S ^FHPT("AW",FHWRD,FHDFN)=ADM S EVT=EVT_"~"_FHWRD_"~"_FHRMB D ^FHORX
"RTN","FHWADM",38,0)
 ; Update Type of Service
"RTN","FHWADM",39,0)
 S FHX3=$P($G(^FH(119.6,+FHWRD,0)),"^",10) S:FHX3="" FHX3="TCD" I FHX3[$P(^FHPT(FHDFN,"A",ADM,0),"^",5) Q
"RTN","FHWADM",40,0)
 S FHX3=$S($L(FHX3)=1:FHX3,FHX3["D":"D",1:"C"),$P(^FHPT(FHDFN,"A",ADM,0),"^",5)=FHX3
"RTN","FHWADM",41,0)
 S FHX2=$P(^FHPT(FHDFN,"A",ADM,0),"^",2) I FHX2,$P($G(^FHPT(FHDFN,"A",ADM,"DI",+FHX2,0)),"^",8)'="" S $P(^(0),"^",8)=FHX3
"RTN","FHWADM",42,0)
 Q
"RTN","FHWADM",43,0)
ADD ; Add diet associated Diet Restriction
"RTN","FHWADM",44,0)
 D NOW^%DTC S NOW=%
"RTN","FHWADM",45,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHWADM",46,0)
 D UPD^FHMTK7
"RTN","FHWADM",47,0)
 K COM,DPAT,EVT,FP,L,LN,LP,LS,M,M1,M2,MEAL,N,NM,NO,NUM,NX,OPAT,P,PP,PNN,PNO,R1,SF,SP,X3,^TMP($J),Z
"RTN","FHWADM",48,0)
 Q
"RTN","FHWADM",49,0)
KIL K %,%H,%I,FHX1,FHX2,FHX3,FHRMB,FHWRD,X Q
"RTN","FHWDIS")
0^306^B21294067
"RTN","FHWDIS",1,0)
FHWDIS ; HISC/REL - Close out on discharge ;10/10/00  14:55
"RTN","FHWDIS",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWDIS",3,0)
 ; Updated for outpatient meals FHDFN/DFN
"RTN","FHWDIS",4,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWDIS",5,0)
 D NOW^%DTC S FHNOW=%,FHA0=$G(^FHPT(FHDFN,"A",ADM,0)),FHWF=$S($D(^ORD(101)):1,1:0) Q:FHA0=""  Q:$P(FHA0,"^",14)
"RTN","FHWDIS",6,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",14)=FHNOW
"RTN","FHWDIS",7,0)
 S FHWRD=$P(FHA0,"^",8),FHRMB=$P(FHA0,"^",9) I FHWRD K ^FHPT("AW",FHWRD,FHDFN) S $P(^FHPT(FHDFN,"A",ADM,0),"^",8,9)="^"
"RTN","FHWDIS",8,0)
 S EVT="L^D^^"_FHWRD_"~"_FHRMB D ^FHORX
"RTN","FHWDIS",9,0)
 ; Close out Additional Orders
"RTN","FHWDIS",10,0)
 F FHDR=0:0 S FHDR=$O(^FHPT("AOO",FHDFN,ADM,FHDR)) Q:FHDR<1  D AOO
"RTN","FHWDIS",11,0)
 ; Close out Consults
"RTN","FHWDIS",12,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"DR",FHDR)) Q:FHDR<1  S Y=^(FHDR,0) D CON
"RTN","FHWDIS",13,0)
 ; Close out standing orders
"RTN","FHWDIS",14,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"SP",FHDR)) Q:FHDR<1  S Y=^(FHDR,0) D SP
"RTN","FHWDIS",15,0)
 ; Cancel tubefeeding
"RTN","FHWDIS",16,0)
 S K=$P(FHA0,"^",4) I K D TF
"RTN","FHWDIS",17,0)
 ; Cancel future early/late trays
"RTN","FHWDIS",18,0)
 F FHDR=FHNOW:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"EL",FHDR)) Q:FHDR<1  D EL
"RTN","FHWDIS",19,0)
 ; Cancel supplemental feeding
"RTN","FHWDIS",20,0)
 S K=$P(FHA0,"^",7) I K D SF
"RTN","FHWDIS",21,0)
 ; Cancel isolation/precaution
"RTN","FHWDIS",22,0)
 S K=$P(FHA0,"^",10) I K D IS
"RTN","FHWDIS",23,0)
 ; Cancel diet/ place on no order
"RTN","FHWDIS",24,0)
 D DO
"RTN","FHWDIS",25,0)
 I $D(^DPT(DFN,.1)) D WRD^FHWADM
"RTN","FHWDIS",26,0)
 ; Delete Diet related Food Restrictions
"RTN","FHWDIS",27,0)
 F FHFP=0:0 S FHFP=$O(^FHPT(FHDFN,"P",FHFP)) Q:FHFP<1  S FHFP1=$G(^(FHFP,0)) I $P(FHFP1,"^",4)="Y" D FP
"RTN","FHWDIS",28,0)
KIL K %,%H,%I,%Y,EDT,A1,FHDR,K,FILL,FHNOW,FHO,FHA0,FHFP,FHFP1,FHORD,FHORN,FHPV,FHRMB,FHWRD,FHX,VAL,WKD,X,Y Q
"RTN","FHWDIS",29,0)
AOO Q:$P(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0),"^",5)="X"
"RTN","FHWDIS",30,0)
 S $P(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0),"^",5,7)="X^"_FHNOW_"^"_DUZ
"RTN","FHWDIS",31,0)
 K ^FHPT("AOO",FHDFN,ADM,FHDR)
"RTN","FHWDIS",32,0)
 S FHORN=$P(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0),"^",8) Q:'FHORN
"RTN","FHWDIS",33,0)
 Q:'$D(^OR(100,+FHORN))
"RTN","FHWDIS",34,0)
 S FILL="A"_";"_ADM-";"_FHDR_$P(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0),"^",3)
"RTN","FHWDIS",35,0)
 D SEND
"RTN","FHWDIS",36,0)
 Q
"RTN","FHWDIS",37,0)
CON Q:$P(Y,"^",8)'="A"  S $P(^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),"^",8,11)="X^"_FHNOW_"^"_DUZ_"^"
"RTN","FHWDIS",38,0)
 S K=$P(Y,"^",5)
"RTN","FHWDIS",39,0)
 K:K ^FHPT("ADRU",K,FHDFN,ADM,FHDR) Q
"RTN","FHWDIS",40,0)
SP Q:$P(Y,"^",6)  S $P(^FHPT(FHDFN,"A",ADM,"SP",FHDR,0),"^",6,7)=FHNOW_"^"_DUZ
"RTN","FHWDIS",41,0)
 K ^FHPT("ASP",FHDFN,ADM,FHDR) Q
"RTN","FHWDIS",42,0)
TF S $P(^FHPT(FHDFN,"A",ADM,0),"^",4)="" K ^FHPT("ADTF",FHDFN,ADM)
"RTN","FHWDIS",43,0)
 S $P(^FHPT(FHDFN,"A",ADM,"TF",K,0),"^",11,12)=FHNOW_"^"_DUZ
"RTN","FHWDIS",44,0)
 S FHX=$G(^FHPT(FHDFN,"A",ADM,"TF",K,0))
"RTN","FHWDIS",45,0)
 S FHORN=$P(FHX,"^",14) Q:'FHORN
"RTN","FHWDIS",46,0)
 Q:'$D(^OR(100,+FHORN))
"RTN","FHWDIS",47,0)
 S FILL="T"_";"_ADM_";"_K_";"_$P(FHX,"^",6)_";"_$P(FHX,"^",7)_";"_$P(FHX,"^",5)_";"
"RTN","FHWDIS",48,0)
 D SEND
"RTN","FHWDIS",49,0)
 Q
"RTN","FHWDIS",50,0)
EL S FHORN=$P(^FHPT(FHDFN,"A",ADM,"EL",FHDR,0),"^",7)
"RTN","FHWDIS",51,0)
 I FHORN D EL1
"RTN","FHWDIS",52,0)
 K ^FHPT(FHDFN,"A",ADM,"EL",FHDR),^FHPT("ADLT",FHDR,FHDFN,ADM)
"RTN","FHWDIS",53,0)
 S %=$P($G(^FHPT(FHDFN,"A",ADM,"EL",0)),"^",4)-1 S:%'<0 $P(^(0),"^",4)=% Q
"RTN","FHWDIS",54,0)
EL1 S EDT=FHDR,WKD="" D WKD^FHWOR31
"RTN","FHWDIS",55,0)
 S FHX=$G(^FHPT(FHDFN,"A",ADM,"EL",FHDR,0))
"RTN","FHWDIS",56,0)
 Q:'$D(^OR(100,+FHORN))
"RTN","FHWDIS",57,0)
 S FILL="E"_";"_ADM_";;"_FHDR_";"_FHDR_";"_WKD_";"_$P(FHX,"^",2)_";"_$P(FHX,"^",3)_";"_$P(FHX,"^",4)
"RTN","FHWDIS",58,0)
 D SEND Q
"RTN","FHWDIS",59,0)
SF S $P(^FHPT(FHDFN,"A",ADM,0),"^",7)=""
"RTN","FHWDIS",60,0)
 S $P(^FHPT(FHDFN,"A",ADM,"SF",K,0),"^",32,33)=FHNOW_"^"_DUZ Q
"RTN","FHWDIS",61,0)
IS S $P(^FHPT(FHDFN,"A",ADM,0),"^",10)="" K ^FHPT("AIS",FHDFN,ADM)
"RTN","FHWDIS",62,0)
 S FHORN=$P(FHA0,"^",13) Q:'FHORN
"RTN","FHWDIS",63,0)
 Q:'$D(^OR(100,+FHORN))
"RTN","FHWDIS",64,0)
 S FILL="I"_";"_ADM_";"_K D SEND
"RTN","FHWDIS",65,0)
 Q
"RTN","FHWDIS",66,0)
DO F A1=FHNOW:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1=""  K ^FHPT(FHDFN,"A",ADM,"AC",A1)
"RTN","FHWDIS",67,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"DI",FHDR)) Q:FHDR<1  D D1
"RTN","FHWDIS",68,0)
 S FHA0=$P(FHA0,"^",2) Q:'FHA0  S FHA0=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHA0,0)),"^",7) Q:FHA0="X"
"RTN","FHWDIS",69,0)
 D ORD^FHORD7 S ^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)=FHORD_"^^^^^^X^^"_FHNOW_"^^"_DUZ_"^"_FHNOW
"RTN","FHWDIS",70,0)
 S ^FHPT(FHDFN,"A",ADM,"AC",FHNOW,0)=FHNOW_"^"_FHORD
"RTN","FHWDIS",71,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",2,3)=FHORD_"^" Q
"RTN","FHWDIS",72,0)
D1 ; Get all filler fields for Diet
"RTN","FHWDIS",73,0)
 S FHORN=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHDR,0)),"^",14,15)
"RTN","FHWDIS",74,0)
 I +FHORN>0,$P(FHORN,"^",2)>2 S FHORN=+FHORN,$P(^FHPT(FHDFN,"A",ADM,"DI",FHDR,0),"^",15)=1 D D2
"RTN","FHWDIS",75,0)
 Q
"RTN","FHWDIS",76,0)
D2 S FHX=$G(^FHPT(FHDFN,"A",ADM,"DI",FHDR,0))
"RTN","FHWDIS",77,0)
 Q:$P(FHX,"^",7)="P"!($P(FHX,"^",7)="X")
"RTN","FHWDIS",78,0)
 S FHO=$P(FHX,"^",2,6),VAL="" D VAL^FHWORP(FHO,.VAL) Q:VAL=""
"RTN","FHWDIS",79,0)
 Q:'$D(^OR(100,+FHORN))
"RTN","FHWDIS",80,0)
 S FILL=$S($P(FHX,"^",7)="N":"N",1:"D")_";"_ADM_";"_FHDR_";"_$P(FHX,"^",9)_";"_$P(FHX,"^",10)_";"_$P(FHX,"^",7)_";"_$G(^FHPT(FHDFN,"A",ADM,"DI",FHDR,1))_";"_$P(FHX,"^",8)_";;"_VAL
"RTN","FHWDIS",81,0)
 D SEND Q
"RTN","FHWDIS",82,0)
FP K ^FHPT(FHDFN,"P",FHFP,0),^FHPT(FHDFN,"P","B",+FHFP1,FHFP)
"RTN","FHWDIS",83,0)
 S %=$P($G(^FHPT(FHDFN,"P",0)),"^",4)-1 S:%'<0 $P(^(0),"^",4)=% Q
"RTN","FHWDIS",84,0)
SEND ; Send MSG to OE/RR
"RTN","FHWDIS",85,0)
 D CODE D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) Q
"RTN","FHWDIS",86,0)
CODE ; Code Cancel For Discharge
"RTN","FHWDIS",87,0)
 K MSG S ACT="OC" D SITE^FH
"RTN","FHWDIS",88,0)
 ; code MSH
"RTN","FHWDIS",89,0)
 S MSG(1)="MSH|^~\&|DIETETICS|"_SITE(1)_"|||||ORM"
"RTN","FHWDIS",90,0)
 ; code PID
"RTN","FHWDIS",91,0)
 S MSG(2)="PID|||"_DFN_"||"_$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHWDIS",92,0)
 ; code ORC
"RTN","FHWDIS",93,0)
 S DATE=$$FMTHL7^XLFDT(FHNOW),FHPV=DUZ
"RTN","FHWDIS",94,0)
 S MSG(3)="ORC|"_ACT_"|"_FHORN_"^OR|"_FILL_"^FH|||||||||"_FHPV_"|||"_DATE_"|Dietetics Canceled Order."
"RTN","FHWDIS",95,0)
 K %,ACT,DATE,FILL,SITE Q
"RTN","FHWDISD")
0^307^B5371386
"RTN","FHWDISD",1,0)
FHWDISD ; HISC/REL - Delete Discharge ;2/2/95  10:14
"RTN","FHWDISD",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWDISD",3,0)
 D DID^FHDPA Q:WARD=""  S ADM=$G(^DPT("CN",WARD,DFN)) Q:'ADM
"RTN","FHWDISD",4,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWDISD",5,0)
 S A0=$G(^FHPT(FHDFN,"A",ADM,0)),FHWF=$S($D(^ORD(101)):1,1:0) Q:A0=""
"RTN","FHWDISD",6,0)
 S TIM=$P(A0,"^",14) Q:'TIM  S $P(^FHPT(FHDFN,"A",ADM,0),"^",14)="" Q
"RTN","FHWDISD",7,0)
 ; Re-instate Additional Orders
"RTN","FHWDISD",8,0)
 F FHDR=0:0 S FHDR=$O(^FHPT("AOO",FHDFN,ADM,FHDR)) Q:FHDR<1  S Y=$G(^(FHDR,0)) D AOO
"RTN","FHWDISD",9,0)
 ; Re-instate Consults
"RTN","FHWDISD",10,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"DR",FHDR)) Q:FHDR<1  S Y=$G(^(FHDR,0)) D CON
"RTN","FHWDISD",11,0)
 ; Re-instate Standing Orders
"RTN","FHWDISD",12,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"SP",FHDR)) Q:FHDR<1  S Y=^(FHDR,0) D SP
"RTN","FHWDISD",13,0)
 ; Re-instate Tubefeeding
"RTN","FHWDISD",14,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"TF",K)) Q:K<1  I $P($G(^(K,0)),"^",11)=TIM D TF
"RTN","FHWDISD",15,0)
 ; Re-instate Supplemental Feeding
"RTN","FHWDISD",16,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"SF",K)) Q:K<1  I $P($G(^(K,0)),"^",32)=TIM D SF
"RTN","FHWDISD",17,0)
 ; Re-instate Diet Order
"RTN","FHWDISD",18,0)
 D DO,WRD^FHWADM
"RTN","FHWDISD",19,0)
KIL K %,%H,%I,A0,A1,FHDR,K,TIM,FHORD,FHRMB,FHWRD,FHX1,FHX2,FHX3,X,Y Q
"RTN","FHWDISD",20,0)
AOO Q:$P(Y,"^",5,6)'=("X^"_TIM)
"RTN","FHWDISD",21,0)
 S $P(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0),"^",5,7)="A^^"
"RTN","FHWDISD",22,0)
 S ^FHPT("AOO",FHDFN,ADM,FHDR)="" Q
"RTN","FHWDISD",23,0)
CON Q:$P(Y,"^",8,9)'=("X^"_TIM)  S $P(^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),"^",8,11)="A^^^"
"RTN","FHWDISD",24,0)
 S K=$P(Y,"^",5) S:K ^FHPT("ADRU",K,FHDFN,ADM,FHDR)="" Q
"RTN","FHWDISD",25,0)
SP Q:$P(Y,"^",6)'=TIM  S $P(^FHPT(FHDFN,"A",ADM,"SP",FHDR,0),"^",6,7)="^"
"RTN","FHWDISD",26,0)
 S ^FHPT("ASP",FHDFN,ADM,FHDR)="" Q
"RTN","FHWDISD",27,0)
TF S $P(^FHPT(FHDFN,"A",ADM,0),"^",4)=K S ^FHPT("ADTF",FHDFN,ADM)=""
"RTN","FHWDISD",28,0)
 S $P(^FHPT(FHDFN,"A",ADM,"TF",K,0),"^",11,12)="^" Q
"RTN","FHWDISD",29,0)
SF S $P(^FHPT(FHDFN,"A",ADM,0),"^",7)=K
"RTN","FHWDISD",30,0)
 S $P(^FHPT(FHDFN,"A",ADM,"SF",K,0),"^",32,33)="^" Q
"RTN","FHWDISD",31,0)
DO S FHORD=$P($G(^FHPT(FHDFN,"A",ADM,"AC",TIM,0)),"^",2) Q:'FHORD
"RTN","FHWDISD",32,0)
 Q:$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),"^",7)'="X"
"RTN","FHWDISD",33,0)
 K ^FHPT(FHDFN,"A",ADM,"AC",TIM)
"RTN","FHWDISD",34,0)
 S FHORD="" F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1!(K>TIM)  S FHORD=$P(^(K,0),"^",2)
"RTN","FHWDISD",35,0)
 Q:'FHORD  S $P(^FHPT(FHDFN,"A",ADM,0),"^",2,3)=FHORD_"^" S EVT="D^O^"_FHORD D ^FHORX
"RTN","FHWDISD",36,0)
 Q
"RTN","FHWGMR")
0^308^B1375643
"RTN","FHWGMR",1,0)
FHWGMR ; HISC/NCA - Signed Reaction Event Filer ;2/16/96  11:37
"RTN","FHWGMR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWGMR",3,0)
EN1 ; File Entered Signed Reaction
"RTN","FHWGMR",4,0)
 Q:+$$VERSION^XPDUTL("GMRA")'=4
"RTN","FHWGMR",5,0)
 S FLG=1 D CHK G:'FLG KIL
"RTN","FHWGMR",6,0)
 S EVT="M^O^^"_"Allergy - "_ALG D FIL
"RTN","FHWGMR",7,0)
 G KIL
"RTN","FHWGMR",8,0)
CAN ; File Cancelled/Entered in Error Allergy
"RTN","FHWGMR",9,0)
 S FLG=1 D CHK G:'FLG KIL
"RTN","FHWGMR",10,0)
 S EVT="M^O^^"_"Allergy - "_ALG_" Cancelled" D FIL
"RTN","FHWGMR",11,0)
 G KIL
"RTN","FHWGMR",12,0)
FIL ; File Event
"RTN","FHWGMR",13,0)
 D ^FHORX Q
"RTN","FHWGMR",14,0)
KIL K %,%H,%I,ADM,ALG,DFN,FHSTR,FHTYP,FHWRD,FLG,X Q
"RTN","FHWGMR",15,0)
CHK ; Check Validity of Data Passed
"RTN","FHWGMR",16,0)
 I 'GMRAPA!($G(GMRAPA(0))="") G ERR
"RTN","FHWGMR",17,0)
 S FHSTR=$G(GMRAPA(0)),DFN=+FHSTR G:'DFN ERR
"RTN","FHWGMR",18,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" G ERR
"RTN","FHWGMR",19,0)
 S ALG=$P(FHSTR,"^",2) G:ALG="" ERR
"RTN","FHWGMR",20,0)
 G:'$D(^FHPT(FHDFN)) ERR S FHWRD=$G(^DPT(DFN,.1)) G:FHWRD="" ERR
"RTN","FHWGMR",21,0)
 S ADM=$G(^DPT("CN",FHWRD,DFN)) G:ADM<1 ERR
"RTN","FHWGMR",22,0)
 G:'$P(FHSTR,"^",12) ERR
"RTN","FHWGMR",23,0)
 S FHTYP=$P(FHSTR,"^",20) G:FHTYP'["F" ERR
"RTN","FHWGMR",24,0)
 Q
"RTN","FHWGMR",25,0)
ERR S FLG=0 Q
"RTN","FHWHEA")
0^309^B20254205
"RTN","FHWHEA",1,0)
FHWHEA ; HISC/REL - Health Summary ;7/16/96  15:47
"RTN","FHWHEA",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWHEA",3,0)
 S FH9=9999999,FHS1=$S(GMTS2<1:1,1:FH9-GMTS2),FHS2=$S(GMTS1<1:FH9,1:FH9-GMTS1)
"RTN","FHWHEA",4,0)
 K ^UTILITY($J) S (FHN1,FHN2,FHN3,FHN4)=0
"RTN","FHWHEA",5,0)
 ; Nutrition Status in inverse order
"RTN","FHWHEA",6,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWHEA",7,0)
 S FHL=0 F FHX1=GMTS1:0 S FHX1=$O(^FHPT(FHDFN,"S",FHX1)) Q:FHX1'>0!(FHX1>GMTS2)  I $D(^(FHX1,0)) S FHX2=^(0) D NS S ^UTILITY($J,"NS",FHX1,0)=$P(FHX2,"^",1)_"^"_FHY,FHL=FHL+1 I GMTSNDM=FHL Q
"RTN","FHWHEA",8,0)
 ; Dietetic Encounters
"RTN","FHWHEA",9,0)
 F FHX1=FHS1:0 S FHX1=$O(^FHEN("AP",DFN,FHX1)) Q:FHX1=""!(FHX1>FHS2)  F FHI=0:0 S FHI=$O(^FHEN("AP",DFN,FHX1,FHI)) Q:FHI<1  D EN
"RTN","FHWHEA",10,0)
 F FHADM=0:0 S FHADM=$O(^FHPT(FHDFN,"A",FHADM)) Q:FHADM'>0  D CHK
"RTN","FHWHEA",11,0)
 I GMTSNDM'>0 G KIL
"RTN","FHWHEA",12,0)
 I FHN1>GMTSNDM S FHL=0 F FHI=0:0 S FHI=$O(^UTILITY($J,"DI",FHI)) Q:FHI=""  S FHL=FHL+1 I FHL>GMTSNDM K ^UTILITY($J,"DI",FHI)
"RTN","FHWHEA",13,0)
 I FHN2>GMTSNDM S FHL=0 F FHI=0:0 S FHI=$O(^UTILITY($J,"TF",FHI)) Q:FHI=""  S FHL=FHL+1 I FHL>GMTSNDM K ^UTILITY($J,"TF",FHI)
"RTN","FHWHEA",14,0)
 I FHN3>GMTSNDM S FHL=0 F FHI=0:0 S FHI=$O(^UTILITY($J,"SF",FHI)) Q:FHI=""  S FHL=FHL+1 I FHL>GMTSNDM K ^UTILITY($J,"SF",FHI)
"RTN","FHWHEA",15,0)
 I FHN4>GMTSNDM S FHL=0 F FHI=0:0 S FHI=$O(^UTILITY($J,"EN",FHI)) Q:FHI=""  S FHL=FHL+1 I FHL>GMTSNDM K ^UTILITY($J,"EN",FHI)
"RTN","FHWHEA",16,0)
 G KIL
"RTN","FHWHEA",17,0)
CHK ;
"RTN","FHWHEA",18,0)
 S FHY=$P($G(^DGPM(FHADM,0)),"^",17) S:FHY>0 FHY=$P($G(^DGPM(+FHY,0)),"^",1)
"RTN","FHWHEA",19,0)
 I FHY,FHY<FHS1 Q
"RTN","FHWHEA",20,0)
 ; Diet Order in inverse order
"RTN","FHWHEA",21,0)
 S FHP="" F FHI=FHS1:0 S FHI=$O(^FHPT(FHDFN,"A",FHADM,"AC",FHI)) Q:FHI=""!(FHI>FHS2)  I $D(^(FHI,0)) S FHX=^(0) D DI S ^UTILITY($J,"DI",(FH9-FHI),0)=FHX,FHN1=FHN1+1 S:FHP $P(^UTILITY($J,"DI",FHP,0),"^",2)=FHI S FHP=FH9-FHI
"RTN","FHWHEA",22,0)
 ; Tubefeeding in inverse order
"RTN","FHWHEA",23,0)
 F FHI=0:0 S FHI=$O(^FHPT(FHDFN,"A",FHADM,"TF",FHI)) Q:FHI=""  I $D(^(FHI,0)) S FHX=^(0) D TF I FHX S ^UTILITY($J,"TF",(FH9-FHX1),0)=FHX,FHN2=FHN2+1
"RTN","FHWHEA",24,0)
 ; Supplemental feeding in inverse order
"RTN","FHWHEA",25,0)
 F FHI=0:0 S FHI=$O(^FHPT(FHDFN,"A",FHADM,"SF",FHI)) Q:FHI=""  I $D(^(FHI,0)) S FHX=^(0) D SF I FHX S ^UTILITY($J,"SF",FH9-FHX1,0)=FHX,FHN3=FHN3+1
"RTN","FHWHEA",26,0)
 Q
"RTN","FHWHEA",27,0)
DI ; Decode Diet Order
"RTN","FHWHEA",28,0)
 S FHX=^FHPT(FHDFN,"A",FHADM,"DI",$P(FHX,"^",2),0),FHX2=$G(^(1)),FHX3=""
"RTN","FHWHEA",29,0)
 S FHOR=$P(FHX,"^",2,6),FHLD=$P(FHX,"^",7),FHY=""
"RTN","FHWHEA",30,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") S:%>0 FHY=$P($E(FHDU,%,999),";",1) K % G D1
"RTN","FHWHEA",31,0)
 S FHY="" F FHK1=1:1:5 S FHL=$P(FHOR,"^",FHK1) I FHL S:FHY'="" FHY=FHY_", " S FHY=FHY_$P($G(^FH(111,FHL,0)),"^",7)
"RTN","FHWHEA",32,0)
 S FHX3=$P(FHX,"^",8) S:FHX3'="" FHX3=$S(FHX3="T":"Tray",FHX3="D":"Dining Room",1:"Cafeteria")
"RTN","FHWHEA",33,0)
D1 S FHX=FHI_"^"_$P(FHX,"^",10)_"^"_FHY_"^"_FHX2_"^"_FHX3 Q
"RTN","FHWHEA",34,0)
SF ; Decode Supp. Fdg.
"RTN","FHWHEA",35,0)
 S FHX1=$P(FHX,"^",2) I FHX1<FHS1!(FHX1>FHS2) S FHX="" Q
"RTN","FHWHEA",36,0)
 S FHL=4 F FHK1=1:1:3 S FHN(FHK1)="" F FHK2=1:1:4 S FHX2=$P(FHX,"^",FHL+1),FHX3=$P(FHX,"^",FHL+2),FHL=FHL+2 I FHX2 S:FHN(FHK1)'="" FHN(FHK1)=FHN(FHK1)_"; " S FHN(FHK1)=FHN(FHK1)_$S(FHX3:FHX3,1:1)_" "_$P($G(^FH(118,FHX2,0)),"^",1)
"RTN","FHWHEA",37,0)
 I $L(FHX1_"^"_$P(FHX,"^",32)_"^"_FHN(1)_"^"_FHN(2)_"^"_FHN(3))>240 D BRK
"RTN","FHWHEA",38,0)
 S FHX=(FHX1\1)_"^"_$P(FHX,"^",32)_"^"_FHN(1)_"^"_FHN(2)_"^"_FHN(3)
"RTN","FHWHEA",39,0)
 Q
"RTN","FHWHEA",40,0)
NS ; Decode Nut Status
"RTN","FHWHEA",41,0)
 S FHY=$P($G(^FH(115.4,+$P(FHX2,"^",2),0)),"^",2) Q
"RTN","FHWHEA",42,0)
TF ; Decode Tubefeeding
"RTN","FHWHEA",43,0)
 S FHX1=$P(FHX,"^",1) I FHX1<FHS1!(FHX1>FHS2) S FHX="" Q
"RTN","FHWHEA",44,0)
 S %=$O(^FHPT(FHDFN,"A",FHADM,"TF",FHI,"P",0)) S:% %=^(%,0)
"RTN","FHWHEA",45,0)
 S FHX2=$P(%,"^",1),FHX3=$P(%,"^",2),FHX4=$P(%,"^",3)
"RTN","FHWHEA",46,0)
 S:FHX2 FHX2=$S($D(^FH(118.2,FHX2,0)):$P(^(0),"^",1),1:" ")
"RTN","FHWHEA",47,0)
 S:FHX3 FHX3=$S(FHX3=4:"Full",FHX3=1:"1/4",FHX3=2:"1/2",1:"3/4")
"RTN","FHWHEA",48,0)
 S FHX=FHX1_"^"_$P(FHX,"^",11)_"^"_FHX2_"^"_FHX3_"^"_FHX4_"^"_$P(FHX,"^",6)_"^"_$P(FHX,"^",7)_"^"_$P(FHX,"^",5) Q
"RTN","FHWHEA",49,0)
EN ; Decode Dietetic Encounter
"RTN","FHWHEA",50,0)
 S FHX2=$G(^FHEN(FHI,0)),FHX3=$P(FHX2,"^",4) Q:'FHX3  S FHX3=$P($G(^FH(115.6,+FHX3,0)),"^",1)
"RTN","FHWHEA",51,0)
 S FHX=FHX1_"^"_FHX3_"^"_$P(FHX2,"^",11)_"^"_$P($G(^FHEN(FHI,"P",DFN,0)),"^",4)
"RTN","FHWHEA",52,0)
 S ^UTILITY($J,"EN",(FH9-FHX1),0)=FHX,FHN4=FHN4+1 Q
"RTN","FHWHEA",53,0)
 Q
"RTN","FHWHEA",54,0)
BRK ; Break Supplemental Feeding
"RTN","FHWHEA",55,0)
 S FHVAL=""
"RTN","FHWHEA",56,0)
 D STP(FHN(1),.FHVAL) S FHN(1)=FHVAL
"RTN","FHWHEA",57,0)
 D STP(FHN(2),.FHVAL) S FHN(2)=FHVAL
"RTN","FHWHEA",58,0)
 D STP(FHN(3),.FHVAL) S FHN(3)=FHVAL
"RTN","FHWHEA",59,0)
 Q
"RTN","FHWHEA",60,0)
STP(FHVAL1,FHVAL2) ; Strip Excess Spaces and truncate SF from 20 to 16 char
"RTN","FHWHEA",61,0)
 S FHVAL2=""
"RTN","FHWHEA",62,0)
 F FHK2=1:1:4 S FHP1=$P(FHVAL1,";",FHK2) I FHP1'="" S:$E(FHP1,1)=" " FHP1=$E(FHP1,2,$L(FHP1)) S:FHVAL2'="" FHVAL2=FHVAL2_";" S FHVAL2=FHVAL2_$E(FHP1,1,16)
"RTN","FHWHEA",63,0)
 Q
"RTN","FHWHEA",64,0)
KIL K %,FHADM,FHDU,FHI,FHK1,FHK2,FHL,FHLD,FHN,FHN1,FHN2,FHN3,FHN4,FHOR,FHP,FHP1,FHX,FHX1,FHX2,FHX3,FHX4,FHS1,FHS2,FH9,FHFHY,FHVAL,FHVAL1,FHVAL2 Q
"RTN","FHWMAS")
0^310^B1958777
"RTN","FHWMAS",1,0)
FHWMAS ; HISC/REL - Process MAS Events ;2/1/95  08:53
"RTN","FHWMAS",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWMAS",3,0)
 S FHMAS3=0
"RTN","FHWMAS",4,0)
 S FHZ115="P"_DFN D ADD^FHOMDPA I FHDFN="" Q
"RTN","FHWMAS",5,0)
 F FHMAS1=0:0 S FHMAS1=$O(^UTILITY("DGPM",$J,FHMAS1)) Q:FHMAS1=""!(FHMAS1>3)  D:'FHMAS3 A0 F FHMAS2=0:0 S FHMAS2=$O(^UTILITY("DGPM",$J,FHMAS1,FHMAS2)) Q:FHMAS2=""  S FHNEW=$G(^(FHMAS2,"A")),FHOLD=$G(^("P")) D A1
"RTN","FHWMAS",6,0)
 K A0,ADM,FHWF,WARD,FHMAS1,FHMAS2,FHMAS3,FHNEW,FHOLD,X Q
"RTN","FHWMAS",7,0)
A0 S FHMAS3=1 Q
"RTN","FHWMAS",8,0)
A1 I FHNEW="" G DEL
"RTN","FHWMAS",9,0)
 ; New/Edit actions
"RTN","FHWMAS",10,0)
 S ADM=$P(FHNEW,"^",14) Q:'ADM
"RTN","FHWMAS",11,0)
 I FHMAS1=1 Q:$P(FHNEW,"^",17)  G ^FHWADM
"RTN","FHWMAS",12,0)
 I FHMAS1=2 G ^FHWTRN
"RTN","FHWMAS",13,0)
 G ^FHWDIS
"RTN","FHWMAS",14,0)
DEL ; Delete actions
"RTN","FHWMAS",15,0)
 S ADM=$P(FHOLD,"^",14) Q:'ADM
"RTN","FHWMAS",16,0)
 I FHMAS1=1 G ^FHWDIS
"RTN","FHWMAS",17,0)
 I FHMAS1=2 G ^FHWTRN
"RTN","FHWMAS",18,0)
 G ^FHWDISD
"RTN","FHWOR")
0^311^B28923502
"RTN","FHWOR",1,0)
FHWOR ; HISC/NCA - Main Routine to Decode HL7 ;10/10/00  14:55
"RTN","FHWOR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR",3,0)
EN(MSG) ; Entry Point for OE/RR 3 and pass MSG in FHMSG
"RTN","FHWOR",4,0)
 N ACT,ADM,BID,COM,FHDFN,DFN,EDT,FHPV,FHMSG,FHWF,NOW,SDT,CHK,DA,DATA,DATE,DIET,DUR,FHC,FHD,FHD1,FHD2,FOR,FTYP,IEN,ITVL,LP,MEAL,NAM,PER,PID,SERV,TIM,TIME,TM,TXT,TYPC,WARD,X,XX,YR
"RTN","FHWOR",5,0)
 S TXT="",FHWF=2 ; FHWF=2 - Orders from OE/RR
"RTN","FHWOR",6,0)
 F L=0:0 S L=$O(MSG(L)) Q:L<1  S FHMSG(L)=$G(MSG(L))
"RTN","FHWOR",7,0)
 Q:'$D(FHMSG)
"RTN","FHWOR",8,0)
 ; Decode MSH
"RTN","FHWOR",9,0)
 S X=$G(FHMSG(1)) I $E(X,1,3)'="MSH" S TXT="MSH not first record" D GETOR G ERR
"RTN","FHWOR",10,0)
 ; Check PID
"RTN","FHWOR",11,0)
 S X=$G(FHMSG(2)) I $E(X,1,3)'="PID" S TXT="PID not second record" D GETOR G ERR
"RTN","FHWOR",12,0)
 S NAM=$P(X,"|",6),DFN=$P(X,"|",4)
"RTN","FHWOR",13,0)
 I '$D(^DPT("B",$E(NAM,1,30),DFN)) S TXT="Name/DFN not found" W !!,TXT,!! D GETOR G ERR
"RTN","FHWOR",14,0)
 S FHZ115="P"_DFN D ADD^FHOMDPA I FHDFN=""  S TXT="Patient not found in File #115" D GETOR G ERR
"RTN","FHWOR",15,0)
 D PID^VADPT6 S PID=$G(VA("PID")),BID=$G(VA("BID")) K VA
"RTN","FHWOR",16,0)
 S X=$G(FHMSG(3)) I $E(X,1,5)="ORC|Z" G PURGE
"RTN","FHWOR",17,0)
 ;Check for outpatient orders
"RTN","FHWOR",18,0)
 I $P(X,"|",3)="O" D ^FHOMWOR Q
"RTN","FHWOR",19,0)
 S WARD=$G(^DPT(DFN,.1)) I WARD="" D CHK^FHWORR G:CHK CANCEL S:'CHK TXT="Not an inpatient" D GETOR G ERR
"RTN","FHWOR",20,0)
 S ADM=$G(^DPT("CN",WARD,DFN)) I ADM<1 S TXT="Admission not found" D GETOR G ERR
"RTN","FHWOR",21,0)
 I '$D(^FHPT(FHDFN,"A",ADM,0)) I '$D(^DGPM(ADM,0)) S TXT="Admission not found" D GETOR G ERR
"RTN","FHWOR",22,0)
 I '$D(^FHPT(FHDFN,"A",ADM,0)) S DA=DFN D ^FHWADM
"RTN","FHWOR",23,0)
 ; Check PV1
"RTN","FHWOR",24,0)
 S X=$G(FHMSG(3)) G:$E(X,1,3)="ORC" CANCEL I $E(X,1,3)'="PV1" S TXT="Third message not ORC or PV1" D GETOR G ERR
"RTN","FHWOR",25,0)
 ; Decode ORC
"RTN","FHWOR",26,0)
 S X=$G(FHMSG(4)) I $E(X,1,3)'="ORC" S TXT="Message 4 not ORC as expected" D GETOR G ERR
"RTN","FHWOR",27,0)
 S ACT=$P(X,"|",2) I ACT'="NW" S TXT="Action not NW as expected" D GETOR G ERR
"RTN","FHWOR",28,0)
 S FHORN=$P(X,"|",3),DUR=$P(X,"|",8)
"RTN","FHWOR",29,0)
 S ITVL=$P(DUR,"^",2),SDT=$P(DUR,"^",4),EDT=$P(DUR,"^",5)
"RTN","FHWOR",30,0)
 S FHPV=$P(X,"|",13),NOW=$P(X,"|",16) I NOW="" S TXT="No Effective Date" G ERR
"RTN","FHWOR",31,0)
 S X=$G(FHMSG(5)) I $E(X,1,3)="ODT" D ^FHWOR3 G KIL
"RTN","FHWOR",32,0)
 I $E(X,1,3)="OBR" D ^FHWOR61 G KIL
"RTN","FHWOR",33,0)
 I $E(X,1,3)'="ODS" S TXT="Message 5 not ODT or ODS as expected" G ERR
"RTN","FHWOR",34,0)
 S TYPC=$P(X,"|",2) I TYPC="ZE" D ^FHWOR5 G KIL
"RTN","FHWOR",35,0)
 S DIET=$P(X,"|",4),DIET=$E(DIET,4,$L(DIET)),COM=$P(X,"|",5)
"RTN","FHWOR",36,0)
 I $E(DIET,1,4)="FH-5" D ^FHWOR4 G KIL
"RTN","FHWOR",37,0)
 I $E(DIET,1,4)="FH-6" D ^FHWOR1 G KIL
"RTN","FHWOR",38,0)
 D ^FHWOR2 G KIL
"RTN","FHWOR",39,0)
CANCEL ; Cancel/Discontinue
"RTN","FHWOR",40,0)
 S DATA=X,FOR=0
"RTN","FHWOR",41,0)
 S ACT=$P(DATA,"|",2)
"RTN","FHWOR",42,0)
 S FHORN=$P(DATA,"|",3),FILL=$P(DATA,"|",4),FTYP=$P(FILL,";",1)
"RTN","FHWOR",43,0)
 I ACT'="CA",ACT'="DC",ACT'="NA",ACT'="DE",ACT'="SS" S TXT="Action not CA, DC, NA, or DE as expected" G CERR
"RTN","FHWOR",44,0)
 I "ADEINT"'[FTYP G CSEND:ACT="CA"!(ACT="DC"),KIL
"RTN","FHWOR",45,0)
 S FOR=$S(FTYP="A":1,FTYP="D":2,FTYP="E":3,FTYP="N":4,FTYP="T":5,FTYP="I":6,1:0)
"RTN","FHWOR",46,0)
 I 'FOR G CSEND:ACT="CA"!(ACT="DC"),KIL
"RTN","FHWOR",47,0)
 I ACT="SS" G STATUS^FHWORR
"RTN","FHWOR",48,0)
 I ACT="NA" D NA K ACT,TXT K MSG Q
"RTN","FHWOR",49,0)
 I ACT="DE" K MSG G KIL
"RTN","FHWOR",50,0)
CAN ; Cancel Order From OE
"RTN","FHWOR",51,0)
 I FOR=1 D CAN^FHWOR1 G KIL
"RTN","FHWOR",52,0)
 I FOR=2 D CAN^FHWOR2 G KIL
"RTN","FHWOR",53,0)
 I FOR=3 D CAN^FHWOR3 G KIL
"RTN","FHWOR",54,0)
 I FOR=4 D CAN^FHWOR4 G KIL
"RTN","FHWOR",55,0)
 I FOR=5 D CAN^FHWOR5 G KIL
"RTN","FHWOR",56,0)
 I FOR=6 D CAN^FHWOR61 G KIL
"RTN","FHWOR",57,0)
 G KIL
"RTN","FHWOR",58,0)
PURGE ; Purge OE/RR Orders
"RTN","FHWOR",59,0)
 I $E(X,5,6)'="Z@" G KIL
"RTN","FHWOR",60,0)
 S FHORN=+$P(X,"|",3),FILL=$P(X,"|",4),FTYP=$P(FILL,";",1)
"RTN","FHWOR",61,0)
 S FHDR=+$P(FILL,";",3),ADM=+$P(FILL,";",2)
"RTN","FHWOR",62,0)
 I FTYP="A" S:$P($G(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0)),"^",8)=FHORN $P(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0),"^",8)=""
"RTN","FHWOR",63,0)
 I FTYP="D" S:$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHDR,0)),"^",14)=FHORN $P(^FHPT(FHDFN,"A",ADM,"DI",FHDR,0),"^",14)=""
"RTN","FHWOR",64,0)
 I FTYP="E" S SDT=$P(FILL,";",4),EDT=$P(FILL,";",5) S:EDT<SDT EDT=SDT D
"RTN","FHWOR",65,0)
 .F EL=SDT\1:0 S EL=$O(^FHPT(FHDFN,"A",ADM,"EL",EL)) Q:EL<1!(EL>EDT)  D
"RTN","FHWOR",66,0)
 ..S:$P($G(^FHPT(FHDFN,"A",ADM,"EL",EL,0)),"^",7)=FHORN $P(^FHPT(FHDFN,"A",ADM,"EL",EL,0),"^",7)=""
"RTN","FHWOR",67,0)
 ..Q
"RTN","FHWOR",68,0)
 .Q
"RTN","FHWOR",69,0)
 I FTYP="N" S:$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHDR,0)),"^",14)=FHORN $P(^FHPT(FHDFN,"A",ADM,"DI",FHDR,0),"^",14)=""
"RTN","FHWOR",70,0)
 I FTYP="T" S:$P($G(^FHPT(FHDFN,"A",ADM,"TF",FHDR,0)),"^",14)=FHORN $P(^FHPT(FHDFN,"A",ADM,"TF",FHDR,0),"^",14)=""
"RTN","FHWOR",71,0)
 I FTYP="I" S:$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",13)=FHORN $P(^FHPT(FHDFN,"A",ADM,0),"^",13)=""
"RTN","FHWOR",72,0)
 K EL,FHDR
"RTN","FHWOR",73,0)
 S $P(MSG(1),"|",9)="ORR",$P(MSG(3),"|",2)="ZR",$P(MSG(1),"|",3)="DIETETICS" G EVSEND
"RTN","FHWOR",74,0)
NA ; Number Assign
"RTN","FHWOR",75,0)
 I FOR=1 D NA^FHWOR1 G KIL
"RTN","FHWOR",76,0)
 I FOR=2 D NA^FHWOR2 G KIL
"RTN","FHWOR",77,0)
 I FOR=3 D NA^FHWOR3 G KIL
"RTN","FHWOR",78,0)
 I FOR=4 D NA^FHWOR4 G KIL
"RTN","FHWOR",79,0)
 I FOR=5 D NA^FHWOR5 G KIL
"RTN","FHWOR",80,0)
 I FOR=6 D NA^FHWOR61 G KIL
"RTN","FHWOR",81,0)
 Q
"RTN","FHWOR",82,0)
CVT ; Convert HL7 date to FM date
"RTN","FHWOR",83,0)
 Q:DATE=""  S DATE=$$HL7TFM^XLFDT(DATE)
"RTN","FHWOR",84,0)
 I $P(DATE,".",2)=24 S DATE=$$FMADD^XLFDT(DATE,0,0,1)
"RTN","FHWOR",85,0)
 Q
"RTN","FHWOR",86,0)
ERR ; Send error MSG
"RTN","FHWOR",87,0)
 K MSG D RMSH
"RTN","FHWOR",88,0)
 S $P(MSG(3),"|",1,2)="ORC"_"|"_$S($P($G(MSG(3)),"|",1)="ORC":"U"_$E($P($G(MSG(3)),"|",2),1),1:"OC"),$P(MSG(3),"|",3)=FHORN
"RTN","FHWOR",89,0)
 S $P(MSG(3),"|",4)=$S($P(FHMSG(3),"|",1)="ORC":$P(FHMSG(3),"|",4),1:"")
"RTN","FHWOR",90,0)
 S $P(MSG(3),"|",13)=$S($P(FHMSG(3),"|",1)="ORC":$P(FHMSG(3),"|",13),1:$P(FHMSG(4),"|",13))
"RTN","FHWOR",91,0)
 S $P(MSG(3),"|",16)=$S($P(FHMSG(3),"|",1)="ORC":$P(FHMSG(3),"|",16),1:$P(FHMSG(4),"|",16))
"RTN","FHWOR",92,0)
 S $P(MSG(3),"|",17)=TXT G EVSEND
"RTN","FHWOR",93,0)
SEND ; Send OK MSG to OERR
"RTN","FHWOR",94,0)
 K MSG D RMSH
"RTN","FHWOR",95,0)
 S MSG(3)="ORC|OK|"_FHORN_"|"_FILL_"^"_"FH" G EVSEND
"RTN","FHWOR",96,0)
CERR ; Send unable MSG
"RTN","FHWOR",97,0)
 K MSG D RMSH
"RTN","FHWOR",98,0)
 S MSG(3)="ORC|U"_$E(ACT,1)_"|"_FHORN_"|"_FILL_"|||||||||||||"_TXT G EVSEND
"RTN","FHWOR",99,0)
CSEND ; Send Canceled/Discontinued MSG to OERR
"RTN","FHWOR",100,0)
 K MSG D RMSH
"RTN","FHWOR",101,0)
 S MSG(3)="ORC|"_$E(ACT,1)_"R"_"|"_FHORN_"|"_FILL
"RTN","FHWOR",102,0)
EVSEND ; Send Message to OE/RR
"RTN","FHWOR",103,0)
 K ACT,FILL,FHORN,SITE,TXT D MSG^XQOR("FH EVSEND OR",.MSG) K MSG Q
"RTN","FHWOR",104,0)
MSH ; Code MSH message
"RTN","FHWOR",105,0)
 D MSH^FHWORR
"RTN","FHWOR",106,0)
 Q
"RTN","FHWOR",107,0)
RMSH ; Code MSH Return Message
"RTN","FHWOR",108,0)
 D SITE^FH
"RTN","FHWOR",109,0)
 S MSG(1)="MSH|^~\&|DIETETICS|"_SITE(1)_"|||||ORR"
"RTN","FHWOR",110,0)
 ; code PID
"RTN","FHWOR",111,0)
 S MSG(2)="PID|||"_DFN_"||"_$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHWOR",112,0)
 Q
"RTN","FHWOR",113,0)
GETOR ; Call to Get FHORN
"RTN","FHWOR",114,0)
 D GETOR^FHWORR Q
"RTN","FHWOR",115,0)
KIL ; Kill Variables
"RTN","FHWOR",116,0)
 K ACT,ADM,BID,COM,FHDFN,DFN,EDT,FHPV,FHMSG,FHWF,NOW,SDT,CHK,DA,DATA,DATE,DIET,DUR,FHC,FHD,FHD1,FHD2,FOR,FTYP,IEN,ITVL,LP,MEAL,NAM,PER,PID,SERV,TIM,TIME,TM,TXT,TYPC,WARD,X,XX,YR Q
"RTN","FHWOR1")
0^312^B3420812
"RTN","FHWOR1",1,0)
FHWOR1 ; HISC/REL/NCA - HL7 Additional Orders ;10/10/00  14:55
"RTN","FHWOR1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR1",3,0)
ADD ; Add new Order
"RTN","FHWOR1",4,0)
 S COM=$E(COM,1,160) D ORD^FHORO S $P(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0),"^",8)=+FHORN
"RTN","FHWOR1",5,0)
 S FILL="A"_";"_ADM_";"_FHDR_";"_COM K COM,FHDR
"RTN","FHWOR1",6,0)
 D SEND^FHWOR Q
"RTN","FHWOR1",7,0)
CAN ; Process Cancel/Discontinue Order from OE/RR
"RTN","FHWOR1",8,0)
 S FHDR=+$P(FILL,";",3) I 'FHDR S TXT="No Filler Number." D CERR^FHWOR Q
"RTN","FHWOR1",9,0)
 D GADM^FHWORR
"RTN","FHWOR1",10,0)
F0 I '$D(^FHPT(FHDFN,"A",+ADM,"OO",+FHDR,0)) S TXT="Additional Order not on file." D CERR^FHWOR Q
"RTN","FHWOR1",11,0)
 S Y=^FHPT(FHDFN,"A",ADM,"OO",FHDR,0)
"RTN","FHWOR1",12,0)
 I +FHORN'=$P(Y,"^",8) S TXT="Order Number Not Matching." D CERR^FHWOR Q
"RTN","FHWOR1",13,0)
 D NOW^%DTC S $P(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0),"^",5,7)="X^"_%_"^"_DUZ
"RTN","FHWOR1",14,0)
 K ^FHPT("AOO",FHDFN,ADM,FHDR) S EVT="O^C^"_FHDR D ^FHORX K %,FHDR,Y
"RTN","FHWOR1",15,0)
 D CSEND^FHWOR Q
"RTN","FHWOR1",16,0)
AO ; Code Additional Orders
"RTN","FHWOR1",17,0)
 K MSG S FILL="A"_";"_ADM_";"_FHDR_";"_COM
"RTN","FHWOR1",18,0)
 S SDT=NOW D SET
"RTN","FHWOR1",19,0)
 ; Code MSH, PID, and PV1
"RTN","FHWOR1",20,0)
 D MSH^FHWOR
"RTN","FHWOR1",21,0)
 ; code ORC
"RTN","FHWOR1",22,0)
 S MSG(4)="ORC|SN||"_FILL_"^FH||||^^^"_SDT_"|||"_DUZ_"||"_DUZ_"|||"_NOW
"RTN","FHWOR1",23,0)
 ; Code ODS
"RTN","FHWOR1",24,0)
 S MSG(5)="ODS|D||^^^FH-6^Additional Order^99OTH|"_COM
"RTN","FHWOR1",25,0)
 K FILL,FHWRD,HOSP,RM,SITE,SDT
"RTN","FHWOR1",26,0)
 Q
"RTN","FHWOR1",27,0)
SET ; Set Date/Time in HL7 format
"RTN","FHWOR1",28,0)
 S:SDT SDT=$$FMTHL7^XLFDT(SDT)
"RTN","FHWOR1",29,0)
 S:NOW NOW=$$FMTHL7^XLFDT(NOW)
"RTN","FHWOR1",30,0)
 Q
"RTN","FHWOR1",31,0)
NA ; OE/RR Number Assign
"RTN","FHWOR1",32,0)
 S FHDR=+$P(FILL,";",3) G:'FHDR KIL S:ADM'=$P(FILL,";",2) ADM=$P(FILL,";",2)
"RTN","FHWOR1",33,0)
 G:'+FHORN KIL
"RTN","FHWOR1",34,0)
 S $P(^FHPT(FHDFN,"A",ADM,"OO",FHDR,0),"^",8)=+FHORN
"RTN","FHWOR1",35,0)
KIL K FHDR,MSG,FHORN Q
"RTN","FHWOR2")
0^313^B19324793
"RTN","FHWOR2",1,0)
FHWOR2 ; HISC/NCA - HL7 Diet Order ;11/22/00  11:05
"RTN","FHWOR2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR2",3,0)
 S (DATE,D1)=SDT I DATE="" S TXT="No Start Date." D ERR^FHWOR Q
"RTN","FHWOR2",4,0)
 D NOW^%DTC D CVT^FHWOR S D1=DATE
"RTN","FHWOR2",5,0)
 S (DATE,D2)=EDT
"RTN","FHWOR2",6,0)
 I DATE D CVT^FHWOR S D2=DATE
"RTN","FHWOR2",7,0)
 I D2,D1>D2 S TXT="Wrong Stop Date." D ERR^FHWOR Q
"RTN","FHWOR2",8,0)
 S DATE=NOW D CVT^FHWOR S NOW=DATE
"RTN","FHWOR2",9,0)
 S FHRDER=+FHORN
"RTN","FHWOR2",10,0)
 I D1<% S D1=%
"RTN","FHWOR2",11,0)
 K DI S N1=0 F K=5:1 S X=$G(FHMSG(K)) Q:X=""  D
"RTN","FHWOR2",12,0)
 .I $E(X,1,3)'="ODS" S TXT="Msg Error." Q
"RTN","FHWOR2",13,0)
 .S TYP=$E($P(X,"|",2),2) I TYP="" S TXT="No Type of Service." Q
"RTN","FHWOR2",14,0)
 .I "TCD"'[TYP S TXT="Wrong Type of Tray." Q
"RTN","FHWOR2",15,0)
 .S DIET=$P(X,"|",4),Y=$P(DIET,"^",4),FILE=$P(DIET,"^",6),COM=$E($P(X,"|",5),1,80)
"RTN","FHWOR2",16,0)
 .I $E(FILE,1,5)'="99FHD" S TXT="Msg Error." Q
"RTN","FHWOR2",17,0)
 .S PREC=$P($G(^FH(111,+Y,0)),"^",4) I $D(DI(PREC)) S TXT="Msg Error." Q
"RTN","FHWOR2",18,0)
 .S N1=N1+1,DI(PREC)=Y_"^"_$G(^FH(111,+Y,0)) Q
"RTN","FHWOR2",19,0)
 I TXT'="" D ERR^FHWOR Q
"RTN","FHWOR2",20,0)
 I N1>1 D  I CHK S TXT="Can not order REGULAR with another Diet." D ERR^FHWOR Q
"RTN","FHWOR2",21,0)
 .S CHK=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  I +DI(D0)=1 S CHK=1 Q
"RTN","FHWOR2",22,0)
 I N1>5 S TXT="Can not order more than 5 Diets." D ERR^FHWOR Q
"RTN","FHWOR2",23,0)
 S D4=0,FHOR="^^^^",FHEVTX="",N1=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0<1  S N1=N1+1,$P(FHOR,"^",N1)=+DI(D0),FHEVTX=FHEVTX_", "_$P(DI(D0),"^",8) S:$P(DI(D0),"^",7)="Y" D4=1
"RTN","FHWOR2",24,0)
 S FHLD=""
"RTN","FHWOR2",25,0)
 I '$O(^FH(111.1,"AB",FHOR,0)),$P($G(^FH(119.9,1,4)),"^",2)="Y" S EVT="M^O^^No Diet Pattern ("_$E(FHEVTX,3,999)_")" D ^FHORX
"RTN","FHWOR2",26,0)
 ; Process PROC
"RTN","FHWOR2",27,0)
 D PROC^FHORD1
"RTN","FHWOR2",28,0)
 S CAN=$$CANCEL^ORCDFH(FHRDER)
"RTN","FHWOR2",29,0)
 I CAN S FHTF=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4) D:FHTF ORCAN^FHWOR5 K FHRDER
"RTN","FHWOR2",30,0)
 K FHRDER G KIL
"RTN","FHWOR2",31,0)
CAN ; Process Cancel or Discontinue
"RTN","FHWOR2",32,0)
 S FHORD=$P(FILL,";",3) I 'FHORD D CSEND^FHWOR Q
"RTN","FHWOR2",33,0)
 D GADM^FHWORR
"RTN","FHWOR2",34,0)
 S FHREA=$P(DATA,"|",17),FHREA=$P(FHREA,"^",5) I FHREA="Discharge" D DIS^FHWOR4,CSEND^FHWOR K FHREA Q
"RTN","FHWOR2",35,0)
 D NC
"RTN","FHWOR2",36,0)
 D CSEND^FHWOR
"RTN","FHWOR2",37,0)
 D KIL^FHORD3 Q
"RTN","FHWOR2",38,0)
NC ; Cancel Diet Order
"RTN","FHWOR2",39,0)
 D NOW^%DTC S NOW=% S OLD=""
"RTN","FHWOR2",40,0)
 I '$D(^FHPT(FHDFN,"A",+ADM,"DI",+FHORD,0)) Q
"RTN","FHWOR2",41,0)
 I $P($G(^FHPT(FHDFN,"A",ADM,"DI",+FHORD,0)),"^",19)'="" Q
"RTN","FHWOR2",42,0)
 S NSTR=0 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK'<NOW)  S NSTR=KK
"RTN","FHWOR2",43,0)
 F KK=NSTR-.000001:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1  I $P(^(KK,0),"^",2)=FHORD G F1
"RTN","FHWOR2",44,0)
 Q
"RTN","FHWOR2",45,0)
F1 D T0^FHORD3
"RTN","FHWOR2",46,0)
 Q
"RTN","FHWOR2",47,0)
DO ; Code Diet Orders
"RTN","FHWOR2",48,0)
 K MSG S FILL=$G(FHNEW)
"RTN","FHWOR2",49,0)
 S SDT=D1,DATE1="" D SET
"RTN","FHWOR2",50,0)
 ; Code MSH, PID, and PV1
"RTN","FHWOR2",51,0)
 D MSH^FHWOR
"RTN","FHWOR2",52,0)
 ; code ORC
"RTN","FHWOR2",53,0)
 S MSG(4)="ORC|SN||"_FILL_"^FH||||^^^"_SDT_"^"_DATE1_"|||"_DUZ_"||"_DUZ_"|||"_DATE
"RTN","FHWOR2",54,0)
 ; Code ODS
"RTN","FHWOR2",55,0)
 F A1=5:1 S A2=$P(FHOR,"^",A1-4) Q:'A2  D
"RTN","FHWOR2",56,0)
 .;S MSG(A1)="ODS|ZT||^^^"_A2_"^"_$P($G(^FH(111,+A2,0)),"^",1)_"^99FHD" Q
"RTN","FHWOR2",57,0)
 .I $G(TYP)="" S TYP="T"
"RTN","FHWOR2",58,0)
 .S MSG(A1)="ODS|Z"_TYP_"||^^^"_A2_"^"_$P($G(^FH(111,+A2,0)),"^",1)_"^99FHD" Q
"RTN","FHWOR2",59,0)
 K DATE,DATE1,FILL,FHWRD,HOSP,RM,SITE,SDT,VAL
"RTN","FHWOR2",60,0)
 Q
"RTN","FHWOR2",61,0)
SET ; Set Date/Time in HL7 format
"RTN","FHWOR2",62,0)
 S:SDT SDT=$$FMTHL7^XLFDT(SDT)
"RTN","FHWOR2",63,0)
 S:NOW DATE=$$FMTHL7^XLFDT(NOW)
"RTN","FHWOR2",64,0)
 S:D2 DATE1=$$FMTHL7^XLFDT(D2) S:'DATE1 DATE1=""
"RTN","FHWOR2",65,0)
 Q
"RTN","FHWOR2",66,0)
KIL ; Kill
"RTN","FHWOR2",67,0)
 G KIL^FHORD1
"RTN","FHWOR2",68,0)
CODE ; Code Cancel/Discontinue Diet Order Status Change
"RTN","FHWOR2",69,0)
 K MSG N ACT,FILL S FILL=$G(FHMSG1) S ACT=$S(FHSTS=6:"IP",FHSTS=8:"SC",FHSTS=1:"DC",1:"") Q:ACT=""  D SITE^FH
"RTN","FHWOR2",70,0)
 ; code MSH
"RTN","FHWOR2",71,0)
 S MSG(1)="MSH|^~\&|DIETETICS|"_SITE(1)_"|||||"_$S($D(FHORR):"ORR",1:"ORM")
"RTN","FHWOR2",72,0)
 ; code PID
"RTN","FHWOR2",73,0)
 S MSG(2)="PID|||"_DFN_"||"_$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHWOR2",74,0)
 ; code ORC
"RTN","FHWOR2",75,0)
 S DATE=$S(FHDAT'="":$P(FHDAT,"^",1),1:"")
"RTN","FHWOR2",76,0)
 I DATE S DATE=$$FMTHL7^XLFDT(DATE) S $P(FHDAT,"^",1)=DATE
"RTN","FHWOR2",77,0)
 S DATE=$S(FHDAT'="":$P(FHDAT,"^",2),1:"")
"RTN","FHWOR2",78,0)
 I DATE S DATE=$$FMTHL7^XLFDT(DATE) S $P(FHDAT,"^",2)=DATE
"RTN","FHWOR2",79,0)
 S MSG(3)="ORC|"_$S($D(FHORR):"SR",1:"SC")_"|"_FHORN_"^OR|"_FILL_"^FH||"_ACT
"RTN","FHWOR2",80,0)
 I FHDAT'="" S MSG(3)=MSG(3)_"||^^^"_FHDAT
"RTN","FHWOR2",81,0)
 I ACT="DC" S MSG(3)=MSG(3)_"|||"_$S($D(FHPV):FHPV,1:"")_"||"_$S($D(FHPV):FHPV,1:"")
"RTN","FHWOR2",82,0)
 K ACT,DATE,FHORR,FILL,SITE,WKDAYS Q
"RTN","FHWOR2",83,0)
NA ; OE/RR Number Assign
"RTN","FHWOR2",84,0)
 S FHORD=+$P(FILL,";",3) S:ADM'=$P(FILL,";",2) ADM=$P(FILL,";",2)
"RTN","FHWOR2",85,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",14)=+FHORN Q
"RTN","FHWOR2",86,0)
EL ; Late Trays HL7 to OE/RR
"RTN","FHWOR2",87,0)
 K MSG S WKDAYS="",(EDT,SDT)=DTE
"RTN","FHWOR2",88,0)
 S ITVL="ONCE",WKD="",SERV="L"
"RTN","FHWOR2",89,0)
 S FILL="E"_";"_ADM_";;"_SDT_";"_EDT_";"_WKD_";"_MEAL_";"_TIM_";"_BAG
"RTN","FHWOR2",90,0)
 D SET^FHWOR3
"RTN","FHWOR2",91,0)
 ; Code MSH, PID, and PV1
"RTN","FHWOR2",92,0)
 D MSH^FHWOR
"RTN","FHWOR2",93,0)
 ; code ORC
"RTN","FHWOR2",94,0)
 S MSG(4)="ORC|SN||"_FILL_"^FH||||^"_ITVL_"^^"_SDT_"^"_EDT_"|||"_DUZ_"||"_DUZ_"|||"_NOW
"RTN","FHWOR2",95,0)
 ; code ODT
"RTN","FHWOR2",96,0)
 S MSG(5)="ODT|"_$S(SERV="E":"EARLY",1:"LATE")_"|^^^"_MEAL_SERV_NUM_"^^99FHS|"_$S(BAG="Y":"bagged",1:"")
"RTN","FHWOR2",97,0)
 K FHWARD,FILL,HOSP,ITVL,FHORN,RM,SITE,WARD,WKDAYS,Z
"RTN","FHWOR2",98,0)
 Q
"RTN","FHWOR3")
0^314^B23638068
"RTN","FHWOR3",1,0)
FHWOR3 ; HISC/NCA - HL7 Early/Late Tray ;10/10/00  14:56
"RTN","FHWOR3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR3",3,0)
 S DATA=X
"RTN","FHWOR3",4,0)
 N BAG,CODE,DATE,DAY,DTE,DP,EL,K,L1,LP,LSTWD,MEAL,PER,PIECE,SERV,SP,W1,WKD,WKDAYS,Y
"RTN","FHWOR3",5,0)
 S:ITVL="" ITVL="ONCE"
"RTN","FHWOR3",6,0)
 I 'SDT S TXT="No Start Date." D ERR^FHWOR Q
"RTN","FHWOR3",7,0)
 S DATE=SDT D CVT^FHWOR S SDT=DATE\1
"RTN","FHWOR3",8,0)
 I EDT S DATE=EDT D CVT^FHWOR S EDT=DATE\1
"RTN","FHWOR3",9,0)
 I 'EDT S:ITVL="ONCE" EDT=SDT I 'EDT S TXT="No Stop Date." D ERR^FHWOR Q
"RTN","FHWOR3",10,0)
 S SERV=$P(DATA,"|",2)
"RTN","FHWOR3",11,0)
 I $P("EARLY",SERV,1)'="",$P("LATE",SERV,1)'="" S TXT="Wrong Type of Tray." D ERR^FHWOR Q
"RTN","FHWOR3",12,0)
 S PER=$P(DATA,"|",3),PER=$E(PER,4,$L(PER)),MEAL=$E(PER,1) I "BNE"'[MEAL S TXT="Wrong Service Period." D ERR^FHWOR Q
"RTN","FHWOR3",13,0)
 I $E(PER,2)'=$E(SERV,1) S TXT="Wrong Service Period." D ERR^FHWOR Q
"RTN","FHWOR3",14,0)
 S PIECE=$E(PER,3) I 'PIECE S TXT="No Time Specified." D ERR^FHWOR Q
"RTN","FHWOR3",15,0)
 S K=$S(MEAL="B":0,MEAL="N":6,1:12)+($E(PER,2)="L"*3)
"RTN","FHWOR3",16,0)
 S W1=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8),DP=$P($G(^FH(119.6,+W1,0)),"^",8)
"RTN","FHWOR3",17,0)
 K TM F L1=1:1:3 S TM(L1)=$P($G(^FH(119.73,+DP,1)),"^",K+L1)
"RTN","FHWOR3",18,0)
 S TIM=TM(PIECE) I TIM="" F L1=1:1:3  S:TM(L1)'="" TIM=TM(L1)
"RTN","FHWOR3",19,0)
 I TIM="" S TXT="No Early/Late Time on file." D ERR^FHWOR Q
"RTN","FHWOR3",20,0)
 S BAG="N" I $P(X,"|",4)="bagged" S BAG="Y"
"RTN","FHWOR3",21,0)
 S X=SDT_"@"_TIM,%DT="XT" D ^%DT S (SDT,FHDTIM)=Y,EDT=EDT+(SDT#1)
"RTN","FHWOR3",22,0)
 S (FHV1,FHV2)="" D CUR^FHWOR31(FHDFN,ADM,FHDTIM,.FHV1,.FHV2)
"RTN","FHWOR3",23,0)
 S (WKDAYS,WKD)=""
"RTN","FHWOR3",24,0)
 I SDT=EDT D  G:SP ERR G PROC
"RTN","FHWOR3",25,0)
 .S SP="" F K=SDT\1:0 S K=$O(^FHPT(FHDFN,"A",ADM,"EL",K)) Q:K<1!(K\1'=(SDT\1))  I $P(^(K,0),"^",2)=MEAL S SP=K Q
"RTN","FHWOR3",26,0)
 .I SP S TXT="Early/Late Meal Already Ordered for this Date." Q
"RTN","FHWOR3",27,0)
 .Q
"RTN","FHWOR3",28,0)
 F LP=1:1 S CODE=$P(ITVL,"~",LP) Q:CODE=""  D  Q:TXT'=""
"RTN","FHWOR3",29,0)
 .I CODE="ONCE" S TXT="ONCE is for one Day Only." Q
"RTN","FHWOR3",30,0)
 .I $E(CODE,1)'="Q" S TXT="Wrong Interval specification.  Use Only ONCE, QJ#, or Q1J#." Q
"RTN","FHWOR3",31,0)
 .I +$E(CODE,2)>1 S TXT="Wrong interval specification.  Use Only ONCE, QJ#, or Q1J#." Q
"RTN","FHWOR3",32,0)
 .S LSTWD=$E(CODE,$L(CODE))
"RTN","FHWOR3",33,0)
 .I LSTWD="J" S DAY=1 S WKD=WKD_$E("MTWRFSX",DAY) Q
"RTN","FHWOR3",34,0)
 .I LSTWD?1N,$E(CODE,$L(CODE)-1)="J" D  Q
"RTN","FHWOR3",35,0)
 ..S DAY=LSTWD I DAY<1!(DAY>7) S TXT="Wrong Day Specification." Q
"RTN","FHWOR3",36,0)
 ..S WKD=WKD_$E("MTWRFSX",DAY),WKDAYS=WKDAYS_DAY Q
"RTN","FHWOR3",37,0)
 .S TXT="Wrong interval specification.  Use Only ONCE, QJ#, or Q1J#."
"RTN","FHWOR3",38,0)
 .Q
"RTN","FHWOR3",39,0)
 I TXT'="" D ERR^FHWOR Q
"RTN","FHWOR3",40,0)
PROC ; Process Add E/L Trays
"RTN","FHWOR3",41,0)
 D PROC^FHWOR31
"RTN","FHWOR3",42,0)
EXIT ; Exit Process Kill.
"RTN","FHWOR3",43,0)
 K %,%H,%I,%DT,BAG,CODE,DATE,DAY,DTE,DP,EL,FHDAY,FHDTIM,FHV1,FHV2,K,L1,LP,LSTWD,MEAL,PER,PIECE,SERV,SP,W1,WKD,WKDAYS,X,Y Q
"RTN","FHWOR3",44,0)
ERR ; Send Error Message
"RTN","FHWOR3",45,0)
 D ERR^FHWOR Q
"RTN","FHWOR3",46,0)
CAN ; Process Cancel/Discontinue from OE/RR
"RTN","FHWOR3",47,0)
 D NOW^%DTC S NOW=%,CT=0
"RTN","FHWOR3",48,0)
 D GADM^FHWORR
"RTN","FHWOR3",49,0)
 F EL=%:0 S EL=$O(^FHPT(FHDFN,"A",+ADM,"EL",EL)) Q:EL<1!(EL>$P(FILL,";",5))  S X=$G(^(EL,0)) I $P(X,"^",7)=+FHORN K ^FHPT(FHDFN,"A",ADM,"EL",EL),^FHPT("ADLT",EL,FHDFN) S CT=CT+1
"RTN","FHWOR3",50,0)
 S %=$S($D(^FHPT(FHDFN,"A",ADM,"EL",0)):$P(^(0),"^",4),1:0)-CT S:%'<0 $P(^(0),"^",4)=%
"RTN","FHWOR3",51,0)
 K %,%H,%I,CT,EL D CSEND^FHWOR Q
"RTN","FHWOR3",52,0)
EL ; Code Early Late Tray
"RTN","FHWOR3",53,0)
 K MSG S WKDAYS=""
"RTN","FHWOR3",54,0)
 I SDT=EDT S ITVL="ONCE" G EL1
"RTN","FHWOR3",55,0)
 S ITVL="" F K=1:1 S Z=$E(WKD,K) Q:Z=""  S DAY=$F("MTWRFSX",Z),DAY=DAY-1 S:ITVL'="" ITVL=ITVL_"~" S ITVL=ITVL_"QJ"_DAY,WKDAYS=WKDAYS_DAY
"RTN","FHWOR3",56,0)
EL1 S FILL="E"_";"_ADM_";;"_SDT_";"_EDT_";"_WKD_";"_MEAL_";"_TIM_";"_BAG
"RTN","FHWOR3",57,0)
 D SET
"RTN","FHWOR3",58,0)
 ; Code MSH, PID, and PV1
"RTN","FHWOR3",59,0)
 D MSH^FHWOR
"RTN","FHWOR3",60,0)
 ; code ORC
"RTN","FHWOR3",61,0)
 S MSG(4)="ORC|SN||"_FILL_"^FH||||^"_ITVL_"^^"_SDT_"^"_EDT_"|||"_DUZ_"||"_DUZ_"|||"_NOW
"RTN","FHWOR3",62,0)
 ; code ODT
"RTN","FHWOR3",63,0)
 S MSG(5)="ODT|"_$S(SERV="E":"EARLY",1:"LATE")_"|^^^"_MEAL_SERV_NUM_"^^99FHS|"_$S(BAG="Y":"bagged",1:"")
"RTN","FHWOR3",64,0)
 K FHWARD,FILL,HOSP,ITVL,FHORN,RM,SITE,WARD,WKDAYS,Z Q
"RTN","FHWOR3",65,0)
CODE ; Code Cancel/Discontinue Early Late Tray
"RTN","FHWOR3",66,0)
 K MSG S ACT="OC",WKD="",CTR=0 D SITE^FH
"RTN","FHWOR3",67,0)
 S EDT="" F SK=0:0 S SK=$O(NN(FHORN,SK)) Q:SK<1  S CTR=CTR+1 S:CTR=1 SDT=SK S EDT=SK D WKD
"RTN","FHWOR3",68,0)
 S STR=$G(^FHPT(FHDFN,"A",ADM,"EL",EDT,0))
"RTN","FHWOR3",69,0)
 S FILL="E"_";"_ADM_";;"_SDT_";"_EDT_";"_WKD_";"_$P(STR,"^",2)_";"_$P(STR,"^",3)_";"_$P(STR,"^",4)
"RTN","FHWOR3",70,0)
 ; code MSH
"RTN","FHWOR3",71,0)
 S MSG(1)="MSH|^~\&|DIETETICS|"_SITE(1)_"|||||ORM"
"RTN","FHWOR3",72,0)
 ; code PID
"RTN","FHWOR3",73,0)
 S MSG(2)="PID|||"_DFN_"||"_$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHWOR3",74,0)
 ; code ORC
"RTN","FHWOR3",75,0)
 S DATE=$$FMTHL7^XLFDT(NOW)
"RTN","FHWOR3",76,0)
 S MSG(3)="ORC|"_ACT_"|"_FHORN_"^OR|"_FILL_"^FH|||||||||"_FHPV_"|||"_DATE_"|Dietetics Canceled Early/Late Tray order."
"RTN","FHWOR3",77,0)
 K %,%Y,ACT,DATE,EDT,FILL,FHORN,SDT,SK,SITE,STR,WKD Q
"RTN","FHWOR3",78,0)
WKD ; Get week days
"RTN","FHWOR3",79,0)
 D WKD^FHWOR31
"RTN","FHWOR3",80,0)
 Q
"RTN","FHWOR3",81,0)
SET ; Set Date/Time in HL7 format
"RTN","FHWOR3",82,0)
 D SET^FHWOR31
"RTN","FHWOR3",83,0)
 Q
"RTN","FHWOR3",84,0)
NA ; OE/RR Number Assign
"RTN","FHWOR3",85,0)
 S SDT=$P(FILL,";",4),EDT=$P(FILL,";",5),WKD=$P(FILL,";",6),MEAL=$P(FILL,";",7),TIM=$P(FILL,";",8),DTE=SDT
"RTN","FHWOR3",86,0)
 G:'+FHORN KIL
"RTN","FHWOR3",87,0)
 G:'$D(^FHPT(FHDFN,"A",ADM,"EL",SDT,0)) KIL
"RTN","FHWOR3",88,0)
 I WKD="" S $P(^FHPT(FHDFN,"A",ADM,"EL",SDT,0),"^",7)=+FHORN G KIL
"RTN","FHWOR3",89,0)
 F EL=SDT\1:0 S EL=$O(^FHPT(FHDFN,"A",ADM,"EL",EL)) Q:EL<1!(EL>EDT)  D
"RTN","FHWOR3",90,0)
 .Q:$P(^FHPT(FHDFN,"A",ADM,"EL",EL,0),"^",7)
"RTN","FHWOR3",91,0)
 .Q:$P(^FHPT(FHDFN,"A",ADM,"EL",EL,0),"^",2)'=MEAL
"RTN","FHWOR3",92,0)
 .Q:$P(^FHPT(FHDFN,"A",ADM,"EL",EL,0),"^",3)'=TIM
"RTN","FHWOR3",93,0)
 .S X=EL D H^%DTC S:%Y=0 %Y=7 Q:%Y<0
"RTN","FHWOR3",94,0)
 .S WKDAYS=$E("MTWRFSX",%Y) Q:WKDAYS=""
"RTN","FHWOR3",95,0)
 .S:"MTWRFSX"[WKDAYS $P(^FHPT(FHDFN,"A",ADM,"EL",EL,0),"^",7)=+FHORN
"RTN","FHWOR3",96,0)
 .Q
"RTN","FHWOR3",97,0)
KIL K %Y,DTE,EDT,EL,NUM,MEAL,MSG,FHORN,SDT,TIM,WKDAYS,WKD Q
"RTN","FHWOR31")
0^315^B2848231
"RTN","FHWOR31",1,0)
FHWOR31 ; HISC/NCA - HL7 Early/Late Tray (Cont.) ;10/10/00  14:56
"RTN","FHWOR31",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR31",3,0)
CUR(FHDFN,ADM,FHDTE,FHV1,FHV2) ; This fuction pass the variable FHORD and FHLD back.
"RTN","FHWOR31",4,0)
 N A1,FHN,KK,X
"RTN","FHWOR31",5,0)
 S A1=0,(FHV1,FHV2)="" F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK>FHDTE)  S A1=KK
"RTN","FHWOR31",6,0)
 Q:'A1  S FHN=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2),X=^FHPT(FHDFN,"A",ADM,"DI",FHN,0),FHV1=$P(X,"^",2,6),FHV2=$P(X,"^",7) Q
"RTN","FHWOR31",7,0)
PROC ; Process Add E/L Trays
"RTN","FHWOR31",8,0)
 D NOW^%DTC S NOW=%
"RTN","FHWOR31",9,0)
 I FHV2'="" S TXT="Patient is on a WITHHOLD ORDER at that time!" D ERR^FHWOR Q
"RTN","FHWOR31",10,0)
 I "^^^^"[FHV1 S TXT="Patient has NO DIET ORDER at that time!" D ERR^FHWOR Q
"RTN","FHWOR31",11,0)
 I SDT=EDT,SDT<NOW S TXT="Can Not Order a Meal for a Date/Time before now!" D ERR^FHWOR Q
"RTN","FHWOR31",12,0)
 S FILL="E"_";"_ADM_";;"_SDT_";"_EDT_";"_WKD_";"_MEAL_";"_TIM_";"_BAG
"RTN","FHWOR31",13,0)
 D ^FHORE1A
"RTN","FHWOR31",14,0)
 I 'FHDAY S TXT="Day of Week Not Within Start and Stop Date." D ERR^FHWOR G EXIT^FHWOR3
"RTN","FHWOR31",15,0)
 D SEND^FHWOR Q
"RTN","FHWOR31",16,0)
WKD ; Get week days
"RTN","FHWOR31",17,0)
 S X=EDT D H^%DTC S:%Y=0 %Y=7 Q:%Y<0
"RTN","FHWOR31",18,0)
 S WKD=WKD_$E("MTWRFSX",%Y)
"RTN","FHWOR31",19,0)
 Q
"RTN","FHWOR31",20,0)
SET ; Set Date/Time in HL7 format
"RTN","FHWOR31",21,0)
 S:SDT SDT=$$FMTHL7^XLFDT(SDT)
"RTN","FHWOR31",22,0)
 S:EDT EDT=$$FMTHL7^XLFDT(EDT)
"RTN","FHWOR31",23,0)
 S:NOW NOW=$$FMTHL7^XLFDT(NOW)
"RTN","FHWOR31",24,0)
 Q
"RTN","FHWOR4")
0^316^B13393906
"RTN","FHWOR4",1,0)
FHWOR4 ; HISC/NCA - HL7 NPO ;10/10/00  14:57
"RTN","FHWOR4",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR4",3,0)
 S (DATE,D1)=SDT I DATE="" S TXT="No Start Date." D ERR^FHWOR Q
"RTN","FHWOR4",4,0)
 D CVT^FHWOR S D1=DATE
"RTN","FHWOR4",5,0)
 S (DATE,D2)=$P(DUR,"^",5)
"RTN","FHWOR4",6,0)
 I DATE D CVT^FHWOR S D2=DATE
"RTN","FHWOR4",7,0)
 I D2,D1>D2 S TXT="Wrong Stop Date." D ERR^FHWOR Q
"RTN","FHWOR4",8,0)
 S DATE=NOW D CVT^FHWOR S NOW=DATE
"RTN","FHWOR4",9,0)
 S COM=$E($P(MSG(5),"|",5),1,80)
"RTN","FHWOR4",10,0)
 ; Process NPO
"RTN","FHWOR4",11,0)
 D F7^FHORD3
"RTN","FHWOR4",12,0)
 G KIL
"RTN","FHWOR4",13,0)
CAN ; process cancel or discontinue
"RTN","FHWOR4",14,0)
 S FHORD=$P(FILL,";",3) I 'FHORD D CSEND^FHWOR Q
"RTN","FHWOR4",15,0)
 D GADM^FHWORR
"RTN","FHWOR4",16,0)
 S FHREA=$P(DATA,"|",17),FHREA=$P(FHREA,"^",5) I FHREA="Discharge" D DIS,CSEND^FHWOR K FHREA Q
"RTN","FHWOR4",17,0)
 D NC
"RTN","FHWOR4",18,0)
 D CSEND^FHWOR G KIL
"RTN","FHWOR4",19,0)
NC ; Cancel NPO
"RTN","FHWOR4",20,0)
 D NOW^%DTC S NOW=% S OLD=""
"RTN","FHWOR4",21,0)
 I '$D(^FHPT(FHDFN,"A",+ADM,"DI",+FHORD,0)) Q
"RTN","FHWOR4",22,0)
 I $P($G(^FHPT(FHDFN,"A",ADM,"DI",+FHORD,0)),"^",19)'="" Q
"RTN","FHWOR4",23,0)
 S NSTR=0 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK'<NOW)  S NSTR=KK
"RTN","FHWOR4",24,0)
 F KK=NSTR-.000001:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1  I $P(^(KK,0),"^",2)=FHORD G F1
"RTN","FHWOR4",25,0)
 Q
"RTN","FHWOR4",26,0)
F1 D T0^FHORD3 Q
"RTN","FHWOR4",27,0)
KIL G KIL^FHORD3
"RTN","FHWOR4",28,0)
NPO ; Code NPO Order
"RTN","FHWOR4",29,0)
 K MSG S FILL=$G(FHNEW) Q:FILL=""
"RTN","FHWOR4",30,0)
 S SDT=D1,DATE1="" D SET
"RTN","FHWOR4",31,0)
 ; Code MSH, PID, and PV1
"RTN","FHWOR4",32,0)
 D MSH^FHWOR
"RTN","FHWOR4",33,0)
 ; code ORC
"RTN","FHWOR4",34,0)
 S MSG(4)="ORC|SN||"_FILL_"^FH||||^^^"_SDT_"^"_DATE1_"|||"_DUZ_"||"_DUZ_"|||"_DATE
"RTN","FHWOR4",35,0)
 ; Code ODS
"RTN","FHWOR4",36,0)
 S MSG(5)="ODS|D||^^^FH-5^NPO^99OTH|"_COM
"RTN","FHWOR4",37,0)
 K DATE,DATE1,FILL,FHWRD,HOSP,RM,SITE,SDT
"RTN","FHWOR4",38,0)
 Q
"RTN","FHWOR4",39,0)
SET ; Set Date/Time in HL7 format
"RTN","FHWOR4",40,0)
 S:SDT SDT=$$FMTHL7^XLFDT(SDT)
"RTN","FHWOR4",41,0)
 S:NOW DATE=$$FMTHL7^XLFDT(NOW)
"RTN","FHWOR4",42,0)
 S:D2 DATE1=$$FMTHL7^XLFDT(D2) S:'DATE1 DATE1=""
"RTN","FHWOR4",43,0)
 Q
"RTN","FHWOR4",44,0)
CODE ; Code Cancel/Discontinue NPO Order Status Change
"RTN","FHWOR4",45,0)
 K MSG N ACT,FILL S FILL=$G(FHMSG1) Q:FILL=""  S ACT=$S(FHSTS=6:"IP",FHSTS=8:"SC",FHSTS=1:"DC",1:"") Q:ACT=""  D SITE^FH
"RTN","FHWOR4",46,0)
 ; code MSH
"RTN","FHWOR4",47,0)
 S MSG(1)="MSH|^~\&|DIETETICS|"_SITE(1)_"|||||"_$S($D(FHORR):"ORR",1:"ORM")
"RTN","FHWOR4",48,0)
 ; code PID
"RTN","FHWOR4",49,0)
 S MSG(2)="PID|||"_DFN_"||"_$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHWOR4",50,0)
 ; code ORC
"RTN","FHWOR4",51,0)
 S DATE=$S(FHDAT'="":$P(FHDAT,"^",1),1:"")
"RTN","FHWOR4",52,0)
 I DATE S DATE=$$FMTHL7^XLFDT(DATE) S $P(FHDAT,"^",1)=DATE
"RTN","FHWOR4",53,0)
 S DATE=$S(FHDAT'="":$P(FHDAT,"^",2),1:"")
"RTN","FHWOR4",54,0)
 I DATE S DATE=$$FMTHL7^XLFDT(DATE) S $P(FHDAT,"^",2)=DATE
"RTN","FHWOR4",55,0)
 S MSG(3)="ORC|"_$S($D(FHORR):"SR",1:"SC")_"|"_FHORN_"^OR|"_FILL_"^FH||"_ACT
"RTN","FHWOR4",56,0)
 I FHDAT'="" S MSG(3)=MSG(3)_"||^^^"_FHDAT
"RTN","FHWOR4",57,0)
 I ACT="DC" S MSG(3)=MSG(3)_"|||"_$S($D(FHPV):FHPV,1:"")_"||"_$S($D(FHPV):FHPV,1:"")
"RTN","FHWOR4",58,0)
 K ACT,FHORR,FILL,SITE,WKDAYS Q
"RTN","FHWOR4",59,0)
NA ; OE/RR Number Assign
"RTN","FHWOR4",60,0)
 S FHORD=+$P(FILL,";",3) Q:'FHORD  S:ADM'=$P(FILL,";",2) ADM=$P(FILL,";",2)
"RTN","FHWOR4",61,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",14)=+FHORN Q
"RTN","FHWOR4",62,0)
DIS ; Process Cancel of Diet/NPO for Discharge
"RTN","FHWOR4",63,0)
 S FHGET=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHWOR4",64,0)
 I $P(FHGET,"^",14)>0,$P(FHGET,"^",15)>2 S $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",15)=1
"RTN","FHWOR4",65,0)
 D NOW^%DTC S NOW=%
"RTN","FHWOR4",66,0)
 F A1=NOW:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1=""  K ^FHPT(FHDFN,"A",ADM,"AC",A1)
"RTN","FHWOR4",67,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"DI",FHDR)) Q:FHDR<1  D D1
"RTN","FHWOR4",68,0)
 S FHGET=$G(^FHPT(FHDFN,"A",ADM,0)),FHGET=$P(FHGET,"^",2) Q:'FHGET
"RTN","FHWOR4",69,0)
 S FHX=$G(^FHPT(FHDFN,"A",ADM,"DI",FHGET,0))
"RTN","FHWOR4",70,0)
 Q:$P(FHX,"^",7)="X"
"RTN","FHWOR4",71,0)
 D ORD^FHORD7 S ^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)=FHORD_"^^^^^^X^^"_NOW_"^^"_DUZ_"^"_NOW
"RTN","FHWOR4",72,0)
 S ^FHPT(FHDFN,"A",ADM,"AC",NOW,0)=NOW_"^"_FHORD
"RTN","FHWOR4",73,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",2,3)=FHORD_"^" K A1,FHDR,FHGET,FHX,FHOX1 Q
"RTN","FHWOR4",74,0)
D1 ; Get all filler fields for Diet
"RTN","FHWOR4",75,0)
 S FHOX1=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHDR,0)),"^",14,15)
"RTN","FHWOR4",76,0)
 I +FHOX1>0,$P(FHOX1,"^",2)>2 S FHOX1=+FHOX1,$P(^FHPT(FHDFN,"A",ADM,"DI",FHDR,0),"^",15)=1
"RTN","FHWOR4",77,0)
 Q
"RTN","FHWOR5")
0^317^B19012473
"RTN","FHWOR5",1,0)
FHWOR5 ; HISC/NCA - HL7 Tubefeeding ;10/10/00  14:57
"RTN","FHWOR5",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR5",3,0)
 K TUN S (NO,TC,TK,TP,TW,S2)=0,CTR=5
"RTN","FHWOR5",4,0)
 F NUM=1:1:5 S DATA=$G(FHMSG(CTR)) Q:DATA=""  S CTR=CTR+1,DATA1=$G(FHMSG(CTR)) Q:DATA1=""  D ^FHWOR51 S CTR=CTR+1 Q:TXT'=""
"RTN","FHWOR5",5,0)
 I TXT'="" D ERR^FHWOR Q
"RTN","FHWOR5",6,0)
 S (TC,TK)=0 W !
"RTN","FHWOR5",7,0)
 F TT=0:0 S TT=$O(TUN(TT)) Q:TT<1  D
"RTN","FHWOR5",8,0)
 .S TC=TC+$P(TUN(TT),"^",4)+$P(TUN(TT),"^",5)
"RTN","FHWOR5",9,0)
 .S TK=TK+$P(TUN(TT),"^",6) Q
"RTN","FHWOR5",10,0)
 I TC>5000 S TXT="WARNING: Total amount exceeds 5000cc. " D ERR^FHWOR Q
"RTN","FHWOR5",11,0)
 S FHRDER=+FHORN,CAN=$$CANCEL^ORCDFH(FHRDER),FHRDER=FHORN
"RTN","FHWOR5",12,0)
 ; Process TF
"RTN","FHWOR5",13,0)
 S FHTF=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4) I FHTF D ORCAN
"RTN","FHWOR5",14,0)
 D ^FHORT11 S $P(^FHPT(FHDFN,"A",ADM,"TF",TF,0),"^",14)=+FHORN
"RTN","FHWOR5",15,0)
 S FILL="T"_";"_ADM_";"_TF_";"_TC_";"_TK_";"_TFCOM_";"_CAN D SEND^FHWOR
"RTN","FHWOR5",16,0)
 K %,A1,A2,A3,CAN,DATA,DATA1,DIET,DUR,DX,K,FHRDER,FHMSG,FHOL,FHSTR,FHY,QUA,S1,S2,T,TC,TF,TFCOM,TK,TP,TT,TUN,TW,TYP,X
"RTN","FHWOR5",17,0)
 Q
"RTN","FHWOR5",18,0)
ORCAN ; Cancel Tubefeeding when Order Comes From OE/RR
"RTN","FHWOR5",19,0)
 N FHORN,FILL,COM D NOW^%DTC S NOW=%
"RTN","FHWOR5",20,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",4)="" K ^FHPT("ADTF",FHDFN,ADM)
"RTN","FHWOR5",21,0)
 S $P(^FHPT(FHDFN,"A",ADM,"TF",FHTF,0),"^",11,12)=NOW_"^"_DUZ
"RTN","FHWOR5",22,0)
 S FHORN=$P(^FHPT(FHDFN,"A",ADM,"TF",FHTF,0),"^",14)
"RTN","FHWOR5",23,0)
 S FHSAV=$G(^FHPT(FHDFN,"A",ADM,"TF",FHTF,0))
"RTN","FHWOR5",24,0)
 K % S EVT="T^C^"_FHTF D ^FHORX I FHORN S FILL="T"_";"_ADM_";"_FHTF_";"_$P(FHSAV,"^",6)_";"_$P(FHSAV,"^",7)_";"_$P(FHSAV,"^",5)_";" D CODE D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG,FHSAV,FILL
"RTN","FHWOR5",25,0)
 Q
"RTN","FHWOR5",26,0)
CAN ; Process Cancel/Discontinue from OE/RR
"RTN","FHWOR5",27,0)
 S TF=$P(FILL,";",3) I 'TF D CSEND^FHWOR Q
"RTN","FHWOR5",28,0)
 D GADM^FHWORR
"RTN","FHWOR5",29,0)
 I '$D(^FHPT(FHDFN,"A",+ADM,"TF",+TF,0)) D CSEND^FHWOR Q
"RTN","FHWOR5",30,0)
 D NOW^%DTC S NOW=%
"RTN","FHWOR5",31,0)
 I $P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4)'=TF D CSEND^FHWOR Q
"RTN","FHWOR5",32,0)
 I $P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4)="" D CSEND^FHWOR Q
"RTN","FHWOR5",33,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",4)="" K ^FHPT("ADTF",FHDFN,ADM)
"RTN","FHWOR5",34,0)
 S $P(^FHPT(FHDFN,"A",ADM,"TF",TF,0),"^",11,12)=NOW_"^"_DUZ
"RTN","FHWOR5",35,0)
 S EVT="T^C^"_TF D ^FHORX K TF
"RTN","FHWOR5",36,0)
 S FHRDER=FHORN
"RTN","FHWOR5",37,0)
 D CSEND^FHWOR
"RTN","FHWOR5",38,0)
 D CUR^FHORD7 Q:Y=""
"RTN","FHWOR5",39,0)
 S FHCHK=$$RESUME^FHWORR(DFN) I 'FHCHK K FHDFN,FHRDER Q
"RTN","FHWOR5",40,0)
 S FHRES=$$RESUME^ORCDFH(FHRDER) I FHRES D RES K FHRES,FHRDER,FHCHK,FHDFN
"RTN","FHWOR5",41,0)
 Q
"RTN","FHWOR5",42,0)
RES ; Resume Current Tray Service From OE/RR.
"RTN","FHWOR5",43,0)
 N A2,KK,OLD D NOW^%DTC S NOW=%
"RTN","FHWOR5",44,0)
 S A2=0 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK'<NOW)  I $P(^(KK,0),"^",2)=FHORD S A2=KK
"RTN","FHWOR5",45,0)
 I 'A2 Q
"RTN","FHWOR5",46,0)
 S DT=$P(NOW,".",1),KK=A2,OLD=FHLD D T0^FHORD3
"RTN","FHWOR5",47,0)
 K %,%H,%I,A1,A2,C,D1,D2,D3,DA,KK,P2,FHDU,NOW,X1,X2,OLD,FHDR,FHORD,FHPAR,FHLD,FHWF,FHPV,FHOR,I,K9,ADM,ALL,COM,TFCOM,FHDFN,DFN,FHD,POP,PID,BID,DTP,QUA,STR,T,TF,TF2,TUN,WARD,X,X9,Y
"RTN","FHWOR5",48,0)
 Q
"RTN","FHWOR5",49,0)
TF ; Code Tubefeeding
"RTN","FHWOR5",50,0)
 K MSG S FILL="T"_";"_ADM_";"_TF_";"_TC_";"_TK_";"_TFCOM_";"_CAN S MNUM=3
"RTN","FHWOR5",51,0)
 S SDT=NOW D SET
"RTN","FHWOR5",52,0)
 ; Code MSH, PID, and PV1
"RTN","FHWOR5",53,0)
 D MSH^FHWOR
"RTN","FHWOR5",54,0)
 ; Code ORC
"RTN","FHWOR5",55,0)
 S MNUM=MNUM+1
"RTN","FHWOR5",56,0)
 S MSG(MNUM)="ORC|SN||"_FILL_"^FH||||^^^"_SDT_"|||"_DUZ_"||"_DUZ_"|||"_NOW
"RTN","FHWOR5",57,0)
 Q
"RTN","FHWOR5",58,0)
TF1 ; Code Multiple Products ODS and ZQT
"RTN","FHWOR5",59,0)
 S STR=$P(XX,"^",2),STR=$S(STR=1:"1/4",STR="2":"1/2",STR=3:"3/4",1:"FULL")_" STRENGTH"
"RTN","FHWOR5",60,0)
 S X=$P(XX,"^",3) D FIX^FHORT10 S QUA=X D DECOD
"RTN","FHWOR5",61,0)
 S QUA=A1_"&"_$E(A2,1),ITVL=A3,MNUM=MNUM+1
"RTN","FHWOR5",62,0)
 S MSG(MNUM)="ODS|ZE||^^^"_+XX_"-"_$P(XX,"^",2)_"^"_$P($G(^FH(118.2,+XX,0)),"^",1)_"^99FHT"_$S(TFCOM'="":"|"_TFCOM,1:"")
"RTN","FHWOR5",63,0)
 S MNUM=MNUM+1
"RTN","FHWOR5",64,0)
 S MSG(MNUM)="ZQT||"_QUA_"^"_ITVL_"^"_$S(FDG'="":FDG,1:"")_"^"_SDT
"RTN","FHWOR5",65,0)
 K A1,A2,A3,FDG,FILL,FHWRD,HOSP,ITVL,L,RM,QUA,SITE,STR,WARD,Z,Z1
"RTN","FHWOR5",66,0)
 Q
"RTN","FHWOR5",67,0)
DECOD ; Decode Tubefeeding to send
"RTN","FHWOR5",68,0)
 S Z1="" F L=1:1:$L(QUA) S Z=$E(QUA,L) I Z'=" " S Z1=Z1_Z
"RTN","FHWOR5",69,0)
 F L=1:1:$L(Z1) Q:$E(Z1,L)?1U
"RTN","FHWOR5",70,0)
 S A2=$E(Z1,L,99),A1=+$E(Z1,1,L-1)
"RTN","FHWOR5",71,0)
 S A3=$P(A2,"/",2),A2=$P(A2,"/",1)
"RTN","FHWOR5",72,0)
 I A3'["X" S FDG="" Q
"RTN","FHWOR5",73,0)
 S FDG=$P(A3,"X",2),FDG=$S($E(FDG,$L(FDG))="F":"X"_+FDG,1:"H"_+FDG),A3=$P(A3,"X",1)
"RTN","FHWOR5",74,0)
 Q
"RTN","FHWOR5",75,0)
CODE ; Code Discontinue TF
"RTN","FHWOR5",76,0)
 K MSG S ACT="OD" D SITE^FH
"RTN","FHWOR5",77,0)
 ; code MSH
"RTN","FHWOR5",78,0)
 S MSG(1)="MSH|^~\&|DIETETICS|"_SITE(1)_"|||||ORM"
"RTN","FHWOR5",79,0)
 ; code PID
"RTN","FHWOR5",80,0)
 S MSG(2)="PID|||"_DFN_"||"_$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHWOR5",81,0)
 ; code ORC
"RTN","FHWOR5",82,0)
 S DATE=$$FMTHL7^XLFDT(NOW)
"RTN","FHWOR5",83,0)
 S MSG(3)="ORC|"_ACT_"|"_FHORN_"^OR|"_FILL_"^FH|||||||||"_FHPV_"|||"_DATE_"|Dietetics Discontinued Tubefeeding order."
"RTN","FHWOR5",84,0)
 K ACT,DATE,FILL,SITE
"RTN","FHWOR5",85,0)
 Q
"RTN","FHWOR5",86,0)
SET ; Set Date/Time in HL7 format
"RTN","FHWOR5",87,0)
 S:SDT SDT=$$FMTHL7^XLFDT(SDT)
"RTN","FHWOR5",88,0)
 S:NOW NOW=$$FMTHL7^XLFDT(NOW)
"RTN","FHWOR5",89,0)
 Q
"RTN","FHWOR5",90,0)
NA ; OE/RR Number Assign
"RTN","FHWOR5",91,0)
 S TF=+$P(FILL,";",3) Q:'TF  S:ADM'=$P(FILL,";",2) ADM=$P(FILL,";",2)
"RTN","FHWOR5",92,0)
 G:'+FHORN KIL
"RTN","FHWOR5",93,0)
 S $P(^FHPT(FHDFN,"A",ADM,"TF",TF,0),"^",14)=+FHORN
"RTN","FHWOR5",94,0)
KIL K MSG,FHORN,TF Q
"RTN","FHWOR51")
0^318^B8838321
"RTN","FHWOR51",1,0)
FHWOR51 ; HISC/NCA - HL7 Tubefeeding (Cont.) ;6/28/96  16:28
"RTN","FHWOR51",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR51",3,0)
 I $E(DATA,1,3)'="ODS" S TXT="Message 5 not ODS as expected." Q
"RTN","FHWOR51",4,0)
 S TYP=$P(DATA,"|",2)
"RTN","FHWOR51",5,0)
 I TYP'="ZE" S TXT="Type of Diet Order not ZE as expected." Q
"RTN","FHWOR51",6,0)
 I $E(DATA1,1,3)'="ZQT" S TXT="Message not ZQT as expected." Q
"RTN","FHWOR51",7,0)
 S QUA=$P(DATA1,"|",3),A1=+QUA,A2=$E($P(QUA,"&",2),1),A3=$P(QUA,"^",2),FDG=$P(QUA,"^",3)
"RTN","FHWOR51",8,0)
 S (TC,TK,TP,TW)=0
"RTN","FHWOR51",9,0)
 S X=A1_A2_"/"_A3
"RTN","FHWOR51",10,0)
 I FDG'="","XH"'[$E(FDG,1) S FDG=""
"RTN","FHWOR51",11,0)
 S:'$E(FDG,2,99) FDG=""
"RTN","FHWOR51",12,0)
 I FDG'="" S X=X_$S($E(FDG,1)="H":"X"_$E(FDG,2,99),1:FDG_"F")
"RTN","FHWOR51",13,0)
 S QUA=X,A2=A2_"/"_$P(QUA,"/",2)
"RTN","FHWOR51",14,0)
 S DIET=$P(DATA,"|",4),DIET=$E(DIET,4,$L(DIET)),TFCOM=$E($P(DATA,"|",5),1,160)
"RTN","FHWOR51",15,0)
 S TT=+$P(DIET,"-",1) I 'TT S TXT="No internal entry number in coded identifier." Q
"RTN","FHWOR51",16,0)
 S STR=+$P(DIET,"-",2) I 'STR S TXT="No Tubefeeding Product Strength." Q
"RTN","FHWOR51",17,0)
 I $E($P(DIET,"^",3),1,5)'="99FHT" S TXT="No 99FHT code."
"RTN","FHWOR51",18,0)
 S T(0)=$G(^FH(118.2,+TT,0))
"RTN","FHWOR51",19,0)
 S A3=$P(A2,"/",2),A2=$P(A2,"/",1)
"RTN","FHWOR51",20,0)
 I $E($P(T(0),"^",3),$L($P(T(0),"^",3)))?1"G" S:$E(A2,1)'="G" A1=A1*+$P(T(0),"^",3),A2="GRAM"
"RTN","FHWOR51",21,0)
 F K=1:1:11 S S1=$P("KCAL CC ML OZ UNITS BOTTLES CANS PKG TBSP GMS GRAMS"," ",K) G:$P(S1,A2,1)="" F3
"RTN","FHWOR51",22,0)
 G ERR
"RTN","FHWOR51",23,0)
F3 S S1=$S(K=1:1,K<4:2,K=4:3,K=9:5,K>9:6,1:4),A2=$P(A3,"X",1),A3=$P(A3,"X",2)
"RTN","FHWOR51",24,0)
 G:A2'?1U.E ERR I $L(A2)=1,"DH"'[A2 G ERR
"RTN","FHWOR51",25,0)
 S S2=$F("DAY QD QH HOUR HR BID TID Q2H Q3H Q4H Q6H QID",A2) G:'S2 ERR S S2=$S(S2<8:1,S2<19:2,S2<23:3,S2<27:4,S2<31:5,S2<35:6,S2<39:7,1:8)
"RTN","FHWOR51",26,0)
 S QUA=A1_" "_$P("KCAL CC OZ UNITS TBSP GM"," ",S1),QUA=QUA_" "_$P($T(F6),";",S2+2)
"RTN","FHWOR51",27,0)
 S:A3'="" QUA=QUA_" X "_(+A3)_" "_$S(A3["F":"fdgs",1:"hrs")
"RTN","FHWOR51",28,0)
 I S1=1 S DX=$P(T(0),"^",4) G:'DX ERR  S TK=A1,TC=A1/DX*$S(STR=4:1,STR=3:1.333,STR=2:2,1:4)
"RTN","FHWOR51",29,0)
 I S1=4 S DX=+$P(T(0),"^",3) G:'DX ERR S TC=A1*DX*$S(STR=4:1,STR=3:1.333,STR=2:2,1:4)
"RTN","FHWOR51",30,0)
 S:S1=2 TC=A1 S:S1=3 TC=A1*29.5 S:S1=5 TC=A1*15 I S1=6 S TC=0,A3=0 G C1
"RTN","FHWOR51",31,0)
CC I 'A3 S A3=$P("1,24,2,3,12,8,6,4",",",S2) G C1
"RTN","FHWOR51",32,0)
 I A3'["F" S A3=$S(S2=1:1,S2=2:A3,S2=3:2,S2=4:3,S2=5:A3\2,S2=6:A3\3,S2=7:A3\4,1:A3\6)
"RTN","FHWOR51",33,0)
 E  S:S2=1 A3=1
"RTN","FHWOR51",34,0)
C1 S TC=$J(TC*A3,0,0)
"RTN","FHWOR51",35,0)
 I TC>5000 S TXT="WARNING: Total Amount should be between 0 to 5000 cc."  Q
"RTN","FHWOR51",36,0)
 S:TC'<1 TP=$S(STR=4:TC,STR=3:TC*.75,STR=2:TC/2,1:TC/4),TP=$J(TP,0,0),TW=TC-TP
"RTN","FHWOR51",37,0)
 I S1'=1!(S1'=6) S TK="",DX=$P(T(0),"^",4) I DX S TK=DX*TP,TK=$J(TK,0,0)
"RTN","FHWOR51",38,0)
 S $P(TUN(TT),"^",1,6)=TT_"^"_STR_"^"_QUA_"^"_TP_"^"_TW_"^"_TK,NO=NO+1
"RTN","FHWOR51",39,0)
 Q
"RTN","FHWOR51",40,0)
ERR S TXT="Wrong Interval/Duration." Q
"RTN","FHWOR51",41,0)
F6 ;;per Day;per Hour;Twice a Day;Three times a Day;Every 2 Hours;Every 3 Hours;Every 4 Hours;Every 6 Hours
"RTN","FHWOR5R")
0^319^B5365773
"RTN","FHWOR5R",1,0)
FHWOR5R ; HISC/NCA - HL7 Tubefeeding Function Call ;6/28/96  16:28
"RTN","FHWOR5R",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR5R",3,0)
QUAN(FHS,FHQ) ; Entry Point for OE to get Tubefeeding Quantity.
"RTN","FHWOR5R",4,0)
 N A1,A2,A3,DX,K,QUA,S1,S2,STR,T,TC,TK,TT,X,FDG
"RTN","FHWOR5R",5,0)
 S QUA=FHQ,A1=+QUA,A2=$E($P(QUA,"&",2),1),A3=$P(QUA,"^",2),FDG=$P(QUA,"^",3),TC=""
"RTN","FHWOR5R",6,0)
 S X=A1_A2_"/"_A3
"RTN","FHWOR5R",7,0)
 I FDG'="","XH"'[$E(FDG,1) S FDG=""
"RTN","FHWOR5R",8,0)
 S:'$E(FDG,2,99) FDG=""
"RTN","FHWOR5R",9,0)
 I FDG'="" S X=X_$S($E(FDG,1)="H":"X"_$E(FDG,2,99),1:FDG_"F")
"RTN","FHWOR5R",10,0)
 S QUA=X,A2=A2_"/"_$P(QUA,"/",2)
"RTN","FHWOR5R",11,0)
 S TT=+$P(FHS,"-",1) I 'TT G:'TT EXIT
"RTN","FHWOR5R",12,0)
 S STR=+$P(FHS,"-",2) Q:'STR
"RTN","FHWOR5R",13,0)
 S T(0)=$G(^FH(118.2,+TT,0))
"RTN","FHWOR5R",14,0)
 S A3=$P(A2,"/",2),A2=$P(A2,"/",1)
"RTN","FHWOR5R",15,0)
 I $E($P(T(0),"^",3),$L($P(T(0),"^",3)))?1"G" S:$E(A2,1)'="G" A1=A1*+$P(T(0),"^",3),A2="GRAM"
"RTN","FHWOR5R",16,0)
 F K=1:1:11 S S1=$P("KCAL CC ML OZ UNITS BOTTLES CANS PKG TBSP GMS GRAMS"," ",K) G:$P(S1,A2,1)="" F3
"RTN","FHWOR5R",17,0)
 G EXIT
"RTN","FHWOR5R",18,0)
F3 S S1=$S(K=1:1,K<4:2,K=4:3,K=9:5,K>9:6,1:4),A2=$P(A3,"X",1),A3=$P(A3,"X",2)
"RTN","FHWOR5R",19,0)
 G:A2'?1U.E EXIT I $L(A2)=1,"DH"'[A2 G EXIT
"RTN","FHWOR5R",20,0)
 S S2=$F("DAY QD QH HOUR HR BID TID Q2H Q3H Q4H Q6H QID",A2) G:'S2 EXIT S S2=$S(S2<8:1,S2<19:2,S2<23:3,S2<27:4,S2<31:5,S2<35:6,S2<39:7,1:8)
"RTN","FHWOR5R",21,0)
 S QUA=A1_" "_$P("KCAL CC OZ UNITS TBSP GM"," ",S1),QUA=QUA_" "_$P($T(F6),";",S2+2)
"RTN","FHWOR5R",22,0)
 S:A3'="" QUA=QUA_" X "_(+A3)_" "_$S(A3["F":"fdgs",1:"hrs")
"RTN","FHWOR5R",23,0)
 I S1=1 S DX=$P(T(0),"^",4) G:'DX EXIT  S TK=A1,TC=A1/DX*$S(STR=4:1,STR=3:1.333,STR=2:2,1:4)
"RTN","FHWOR5R",24,0)
 I S1=4 S DX=+$P(T(0),"^",3) G:'DX EXIT S TC=A1*DX*$S(STR=4:1,STR=3:1.333,STR=2:2,1:4)
"RTN","FHWOR5R",25,0)
 S:S1=2 TC=A1 S:S1=3 TC=A1*29.5 S:S1=5 TC=A1*15 I S1=6 S TC=0,A3=0 G C1
"RTN","FHWOR5R",26,0)
CC I 'A3 S A3=$P("1,24,2,3,12,8,6,4",",",S2) G C1
"RTN","FHWOR5R",27,0)
 I A3'["F" S A3=$S(S2=1:1,S2=2:A3,S2=3:2,S2=4:3,S2=5:A3\2,S2=6:A3\3,S2=7:A3\4,1:A3\6)
"RTN","FHWOR5R",28,0)
 E  S:S2=1 A3=1
"RTN","FHWOR5R",29,0)
C1 S TC=$J(TC*A3,0,0)
"RTN","FHWOR5R",30,0)
 ;S:TC'<1 TP=$S(STR=4:TC,STR=3:TC*.75,STR=2:TC/2,1:TC/4),TP=$J(TP,0,0),TW=TC-TP
"RTN","FHWOR5R",31,0)
 ;I S1'=1!(S1'=6) S TK="",DX=$P(T(0),"^",4) I DX S TK=DX*TP,TK=$J(TK,0,0)
"RTN","FHWOR5R",32,0)
EXIT Q TC
"RTN","FHWOR5R",33,0)
F6 ;;per Day;per Hour;Twice a Day;Three times a Day;Every 2 Hours;Every 3 Hours;Every 4 Hours;Every 6 Hours
"RTN","FHWOR6")
0^320^B17590294
"RTN","FHWOR6",1,0)
FHWOR6 ; HISC/NCA - Update Orderable Items For Master File ;5/2/00  10:07
"RTN","FHWOR6",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR6",3,0)
UPDATE ; Update Diet Orders and Tubefeedings
"RTN","FHWOR6",4,0)
 K MSG
"RTN","FHWOR6",5,0)
 I TYP="D" D CHKD
"RTN","FHWOR6",6,0)
 I TYP="T" D CHKT
"RTN","FHWOR6",7,0)
 K ACT,FILE,FILNM,K,NAM,N1,N2,PREC,STR,STR1,SYN,Z1
"RTN","FHWOR6",8,0)
 I $D(MSG) D SEND
"RTN","FHWOR6",9,0)
 Q
"RTN","FHWOR6",10,0)
CHKD ; Check which Diet Order transactions
"RTN","FHWOR6",11,0)
 S FILE="111",FILNM=$P($G(^FH(111,0)),"^",1)
"RTN","FHWOR6",12,0)
 I $P(IEN,"^",3) S CHK=1,IEN=+IEN D PROCD S CHK=0 D CHKI Q
"RTN","FHWOR6",13,0)
 S IEN=+IEN
"RTN","FHWOR6",14,0)
 I $G(^FH(111,IEN,0))="" S CHK=2 D PROCD Q
"RTN","FHWOR6",15,0)
 I NOD1'=$P($G(^FH(111,IEN,0)),"^",1,4) S CHK=3 D PROCD S CHK=0
"RTN","FHWOR6",16,0)
 S STR="" F IEN1=0:0 S IEN1=$O(^FH(111,IEN,"AN",IEN1)) Q:IEN1<1  S:STR'="" STR=STR_"," S STR=STR_IEN1
"RTN","FHWOR6",17,0)
 S STR1="" F IEN1=0:0 S IEN1=$O(^TMP($J,"FHNOD3",IEN1)) Q:IEN1<1  S:STR1'="" STR1=STR1_"," S STR1=STR1_IEN1
"RTN","FHWOR6",18,0)
 I $L(STR,",")'=$L(STR1,",") S CHK=3 D PROCD S CHK=0 D CHKI Q
"RTN","FHWOR6",19,0)
 I STR'=STR1 S CHK=3 D PROCD S CHK=0 D CHKI Q
"RTN","FHWOR6",20,0)
 F K=1:1 Q:$P(STR1,",",K)=""  S IEN1=$P(STR,",",K) D CHKD1
"RTN","FHWOR6",21,0)
CHKI I NOD2'="Y",$G(^FH(111,IEN,"I"))="Y" S CHK=4 D PROCD Q
"RTN","FHWOR6",22,0)
 I NOD2="Y",$G(^FH(111,IEN,"I"))'="Y" S CHK=5 D PROCD Q
"RTN","FHWOR6",23,0)
 Q
"RTN","FHWOR6",24,0)
CHKD1 I 'IEN1 S CHK=3 D PROCD S CHK=0 Q
"RTN","FHWOR6",25,0)
 I $G(^FH(111,IEN,"AN",IEN1,0))'=$G(^TMP($J,"FHNOD3",($P(STR1,",",K)))) S CHK=3 D PROCD S CHK=0
"RTN","FHWOR6",26,0)
 Q
"RTN","FHWOR6",27,0)
PROCD ; Process Diet Order Msg.
"RTN","FHWOR6",28,0)
 Q:'CHK
"RTN","FHWOR6",29,0)
 I REC D CODE^FHWORI S REC=0,N1=2
"RTN","FHWOR6",30,0)
 S Z1=$S($G(^FH(111,IEN,0))'="":$G(^FH(111,IEN,0)),1:$P(NOD1,"^",1,4))
"RTN","FHWOR6",31,0)
 G ADD:CHK=1,DLD:CHK=2,UPD:CHK=3,DCD:CHK=4,ACD:CHK=5
"RTN","FHWOR6",32,0)
 Q
"RTN","FHWOR6",33,0)
CHKT ; Check which Tubefeeding Transactions
"RTN","FHWOR6",34,0)
 S FILE="118.2",FILNM=$P($G(^FH(118.2,0)),"^",1)
"RTN","FHWOR6",35,0)
 I $P(IEN,"^",3) S CHK=1 S IEN=+IEN D PROCT S CHK=0 D CHKIN Q
"RTN","FHWOR6",36,0)
 S IEN=+IEN
"RTN","FHWOR6",37,0)
 I $G(^FH(118.2,IEN,0))="" S CHK=2 D PROCT Q
"RTN","FHWOR6",38,0)
 I NOD1'=$P($G(^FH(118.2,IEN,0)),"^",1) S CHK=3 D PROCT S CHK=0 D CHKIN Q
"RTN","FHWOR6",39,0)
 S STR="" F IEN1=0:0 S IEN1=$O(^FH(118.2,IEN,1,IEN1)) Q:IEN1<1  S:STR'="" STR=STR_"," S STR=STR_IEN1
"RTN","FHWOR6",40,0)
 S STR1="" F IEN1=0:0 S IEN1=$O(^TMP($J,"FHNOD2",IEN1)) Q:IEN1<1  S:STR1'="" STR1=STR1_"," S STR1=STR1_IEN1
"RTN","FHWOR6",41,0)
 I $L(STR,",")'=$L(STR1,",") S CHK=3 D PROCT S CHK=0 D CHKIN Q
"RTN","FHWOR6",42,0)
 I STR'=STR1 S CHK=3 D PROCT S CHK=0 D CHKIN Q
"RTN","FHWOR6",43,0)
 F K=1:1 Q:$P(STR1,",",K)=""  S IEN1=$P(STR,",",K) D CHKT1
"RTN","FHWOR6",44,0)
CHKIN ; Check if more than one transaction
"RTN","FHWOR6",45,0)
 I NOD3'="Y",$G(^FH(118.2,IEN,"I"))="Y" S CHK=4 D PROCT Q
"RTN","FHWOR6",46,0)
 I NOD3="Y",$G(^FH(118.2,IEN,"I"))'="Y" S CHK=5 D PROCT Q
"RTN","FHWOR6",47,0)
 Q
"RTN","FHWOR6",48,0)
CHKT1 I 'IEN1 S CHK=3 D PROCT S CHK=0 Q
"RTN","FHWOR6",49,0)
 I $G(^FH(118.2,IEN,1,IEN1,0))'=$G(^TMP($J,"FHNOD2",($P(STR1,",",K)))) S CHK=3 D PROCT S CHK=0
"RTN","FHWOR6",50,0)
 Q
"RTN","FHWOR6",51,0)
PROCT ; Process Tubefeeding Msg.
"RTN","FHWOR6",52,0)
 Q:'CHK
"RTN","FHWOR6",53,0)
 I REC D CODE^FHWORI S REC=0,N1=2
"RTN","FHWOR6",54,0)
 S Z1=$S($G(^FH(118.2,IEN,0))'="":$G(^FH(118.2,IEN,0)),1:NOD1)
"RTN","FHWOR6",55,0)
 G ADT:CHK=1,DLT:CHK=2,UPT:CHK=3,DCT:CHK=4,ACT:CHK=5
"RTN","FHWOR6",56,0)
 Q
"RTN","FHWOR6",57,0)
ADD ; Code Add Diet Order
"RTN","FHWOR6",58,0)
 S ACT="MAD" G DO
"RTN","FHWOR6",59,0)
DLD ; Code Delete Diet Order
"RTN","FHWOR6",60,0)
 S ACT="MDL" G DO
"RTN","FHWOR6",61,0)
UPD ; Code Update Diet Order
"RTN","FHWOR6",62,0)
 S ACT="MUP" G DO
"RTN","FHWOR6",63,0)
DCD ; Code Deactivate Diet Order
"RTN","FHWOR6",64,0)
 S ACT="MDC" G DO
"RTN","FHWOR6",65,0)
ACD ; Code Reactivate Deactivated Diet Order
"RTN","FHWOR6",66,0)
 S ACT="MAC" G DO
"RTN","FHWOR6",67,0)
ADT ; Code Add Tubefeeding
"RTN","FHWOR6",68,0)
 S ACT="MAD" G TF
"RTN","FHWOR6",69,0)
DLT ; Code Delete Tubefeeding
"RTN","FHWOR6",70,0)
 S ACT="MDL" G TF
"RTN","FHWOR6",71,0)
UPT ; Code Update Tubefeeding
"RTN","FHWOR6",72,0)
 S ACT="MUP" G TF
"RTN","FHWOR6",73,0)
DCT ; Code Deactive Tubefeeding
"RTN","FHWOR6",74,0)
 S ACT="MDC" G TF
"RTN","FHWOR6",75,0)
ACT ; Code Reactivate Deactivated Tubefeeding
"RTN","FHWOR6",76,0)
 S ACT="MAC" G TF
"RTN","FHWOR6",77,0)
DO ; Code Diet Order MFE, ZFH, and ZSY
"RTN","FHWOR6",78,0)
 S NAM=$P(Z1,"^",1) Q:NAM=""  S PREC=$P(Z1,"^",4) Q:'PREC
"RTN","FHWOR6",79,0)
 S SYN=$P(Z1,"^",2),N1=N1+1
"RTN","FHWOR6",80,0)
 S MSG(N1)="MFE|"_ACT_"|||^^^"_IEN_"^"_NAM_"^99FHD"
"RTN","FHWOR6",81,0)
 S N1=N1+1,MSG(N1)="ZFH|D|"_PREC_"||"_$P(Z1,"^",3)
"RTN","FHWOR6",82,0)
 I $G(^FH(111,IEN,0)) S FHK=0 D  Q
"RTN","FHWOR6",83,0)
 .F IEN1=0:0 S IEN1=$O(^TMP($J,"FHNOD3",IEN1)) Q:IEN1<1  S FHK=IEN1 D
"RTN","FHWOR6",84,0)
 ..S SYN1=$G(^TMP($J,"FHNOD3",IEN1)) I SYN1'="" S N1=N1+1,MSG(N1)="ZSY|"_IEN1_"|"_SYN1 Q
"RTN","FHWOR6",85,0)
 .I SYN'="" S N1=N1+1,MSG(N1)="ZSY|"_(FHK+1)_"|"_SYN
"RTN","FHWOR6",86,0)
 .Q
"RTN","FHWOR6",87,0)
 S FHK=0 F IEN1=0:0 S IEN1=$O(^FH(111,IEN,"AN",IEN1)) Q:IEN1<1  S SYN1=$G(^(IEN1,0)) D
"RTN","FHWOR6",88,0)
 .S FHK=IEN1,SYN1=$P(SYN1,"^",1) I SYN1'="" S N1=N1+1,MSG(N1)="ZSY|"_IEN1_"|"_SYN1 Q
"RTN","FHWOR6",89,0)
 I SYN'="" S N1=N1+1,MSG(N1)="ZSY|"_(FHK+1)_"|"_SYN
"RTN","FHWOR6",90,0)
 Q
"RTN","FHWOR6",91,0)
TF ; Code Tubefeeding MFE, ZFH, and ZSY
"RTN","FHWOR6",92,0)
 S NAM=$P(Z1,"^",1) Q:NAM=""  S N1=N1+1
"RTN","FHWOR6",93,0)
 S MSG(N1)="MFE|"_ACT_"|||^^^"_IEN_"^"_NAM_"^99FHT"
"RTN","FHWOR6",94,0)
 S N1=N1+1,MSG(N1)="ZFH|T|"
"RTN","FHWOR6",95,0)
 I $G(^FH(118.2,IEN,0))="" D  Q
"RTN","FHWOR6",96,0)
 .F IEN1=0:0 S IEN1=$O(^TMP($J,"FHNOD2",IEN1)) Q:IEN1<1  D
"RTN","FHWOR6",97,0)
 ..S SYN=$G(^TMP($J,"FHNOD2",IEN1)) I SYN'="" D
"RTN","FHWOR6",98,0)
 ..S N1=N1+1
"RTN","FHWOR6",99,0)
 ..S MSG(N1)="ZSY|"_IEN1_"|"_SYN Q
"RTN","FHWOR6",100,0)
 .Q
"RTN","FHWOR6",101,0)
 F IEN1=0:0 S IEN1=$O(^FH(118.2,IEN,1,IEN1)) Q:IEN1<1  S SYN=$G(^(IEN1,0)) D
"RTN","FHWOR6",102,0)
 .S SYN=$P(SYN,"^",1) Q:SYN=""  S N1=N1+1
"RTN","FHWOR6",103,0)
 .S MSG(N1)="ZSY|"_IEN1_"|"_SYN Q
"RTN","FHWOR6",104,0)
 Q
"RTN","FHWOR6",105,0)
SEND ; Send Message to OE/RR
"RTN","FHWOR6",106,0)
 D MSG^XQOR("FH ORDERABLE ITEM UPDATE",.MSG)
"RTN","FHWOR6",107,0)
 K MSG Q
"RTN","FHWOR61")
0^321^B7491076
"RTN","FHWOR61",1,0)
FHWOR61 ; HISC/JH - Dietetics Isolation/Precaution ;2/23/00  09:53
"RTN","FHWOR61",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR61",3,0)
GET ; Get OBR
"RTN","FHWOR61",4,0)
 N FHIS1
"RTN","FHWOR61",5,0)
 S OBR=$P(X,"|",13),(FHIS1,IS)=$P(OBR,"^",4)
"RTN","FHWOR61",6,0)
 I $P(^FHPT(FHDFN,"A",ADM,0),"^",10)'="" S FHIS=$P(^FHPT(FHDFN,"A",ADM,0),"^",10) D CAN^FHORD4 S FHHOLD=FHORN,FHORN=$P(^FHPT(FHDFN,"A",ADM,0),"^",13) D:FHORN>0 CODE^FHWOR61 S FHORN=FHHOLD,IS=FHIS K FHHOLD,FHIS
"RTN","FHWOR61",7,0)
 S IS=FHIS1 D FIL^FHORD4 S $P(^FHPT(FHDFN,"A",ADM,0),"^",13)=+FHORN,FILL="I"_";"_ADM_";"_IS D SEND^FHWOR
"RTN","FHWOR61",8,0)
 K OBR Q
"RTN","FHWOR61",9,0)
ISO ; Isolation/Precaution Order
"RTN","FHWOR61",10,0)
 K MSG D SETVAR^FHORD4
"RTN","FHWOR61",11,0)
 S MSG(1)="MSH|^~\&|DIETETICS|"_SITE(1)_"|||||ORM"
"RTN","FHWOR61",12,0)
 S MSG(2)="PID|||"_DFN_"||"_$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHWOR61",13,0)
 S WARD=$G(^DPT(DFN,.1)) Q:WARD=""  S FHWRD=$O(^DIC(42,"B",WARD,0)) Q:'FHWRD  S HOSP=+$P($G(^DIC(42,+FHWRD,44)),"^",1) Q:'HOSP  S RM=$G(^DPT(DFN,.108)) S:RM RM=$P($G(^DG(405.4,+RM,0)),"^",1)
"RTN","FHWOR61",14,0)
 S MSG(3)="PV1||I|"_HOSP_"^"_RM_"||||||||||||||||"
"RTN","FHWOR61",15,0)
 S MSG(4)="ORC|SN||"_FILL_"^FH||||^^^"_FHIDT_"|||"_DUZ_"||"_DUZ_"|||"_FHIDT
"RTN","FHWOR61",16,0)
 S MSG(5)="OBR||||||||||||^^^"_IS_"^"_$P(^FH(119.4,IS,0),"^")_"^99FHI"
"RTN","FHWOR61",17,0)
 K FHIDT,FILL,FHWRD,HOSP,RM,SITE,SDT
"RTN","FHWOR61",18,0)
 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHWOR61",19,0)
 Q
"RTN","FHWOR61",20,0)
CODE ; Cancelation From Dietetic
"RTN","FHWOR61",21,0)
 K MSG D SETVAR^FHORD4
"RTN","FHWOR61",22,0)
 S MSG(1)="MSH|^~\&|DIETETICS|"_SITE(1)_"|||||ORM"
"RTN","FHWOR61",23,0)
 S MSG(2)="PID|||"_DFN_"||"_$P($G(^DPT(DFN,0)),"^")
"RTN","FHWOR61",24,0)
 S MSG(3)="ORC|OC|"_FHORN_"^OR|"_FILL_"^FH|||||||||"_FHPV_"|||"_FHIDT_"|Dietetics Canceled Isolation/Precaution"
"RTN","FHWOR61",25,0)
 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHWOR61",26,0)
 Q
"RTN","FHWOR61",27,0)
CAN ; Cancel Isolation From Order Entry
"RTN","FHWOR61",28,0)
 S IS=+$P(FILL,";",3) I 'IS D CSEND^FHWOR Q
"RTN","FHWOR61",29,0)
 D GADM^FHWORR
"RTN","FHWOR61",30,0)
 I IS'=$P($G(^FHPT(FHDFN,"A",+ADM,0)),"^",10) D CSEND^FHWOR Q
"RTN","FHWOR61",31,0)
 I +FHORN'=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",13) D CSEND^FHWOR Q
"RTN","FHWOR61",32,0)
 D CAN^FHORD4,CSEND^FHWOR
"RTN","FHWOR61",33,0)
 K IS
"RTN","FHWOR61",34,0)
 Q
"RTN","FHWOR61",35,0)
NA ; If isolation store in Ditetics and Order/Entry
"RTN","FHWOR61",36,0)
 G:'$P(FILL,";",3) KILL
"RTN","FHWOR61",37,0)
 S:ADM'=$P(FILL,";",2) ADM=$P(ADM,";",2) ;Check if same admission
"RTN","FHWOR61",38,0)
 S OBR=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",10) I OBR=+$P(FILL,";",3) D
"RTN","FHWOR61",39,0)
 .I +FHORN>0 S $P(^FHPT(FHDFN,"A",ADM,0),"^",13)=+FHORN
"RTN","FHWOR61",40,0)
 .Q
"RTN","FHWOR61",41,0)
KILL K FHIDT,IS
"RTN","FHWOR61",42,0)
 Q
"RTN","FHWOR7")
0^322^B4949957
"RTN","FHWOR7",1,0)
FHWOR7 ; HISC/NCA - OE/RR Procedure Call ;2/17/95  10:28
"RTN","FHWOR7",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR7",3,0)
EN1 ; OE/RR passes the Patient DFN and the information is stored in ^TMP
"RTN","FHWOR7",4,0)
 K ^TMP($J,"FHTF"),^TMP($J,"FHSF"),^TMP($J,"FHPF")
"RTN","FHWOR7",5,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWOR7",6,0)
 S FHWRD=$G(^DPT(DFN,.1)) G:FHWRD="" KIL
"RTN","FHWOR7",7,0)
 S FHADM=$G(^DPT("CN",FHWRD,DFN)) G:FHADM<1 KIL
"RTN","FHWOR7",8,0)
 I '$D(^FHPT(FHDFN,"A",FHADM,0)) G KIL
"RTN","FHWOR7",9,0)
SF ; Get Current Supplemental Feeding order and store in ^TMP($J,"FHSF",1).
"RTN","FHWOR7",10,0)
 ; The information is stored in the following:
"RTN","FHWOR7",11,0)
 ;
"RTN","FHWOR7",12,0)
 ; ^TMP($J,"FHSF",1)=DATE ORDERED_"^"_10am fdg_"^"_2pm fdg_"^"_8pm fdg
"RTN","FHWOR7",13,0)
 ; Under each feeding it is stored as Quantity_" "_fdg name 1_";"_
"RTN","FHWOR7",14,0)
 ; Quantity_" "_fdg name 2... up to 4.
"RTN","FHWOR7",15,0)
 S FHNO=$P($G(^FHPT(FHDFN,"A",FHADM,0)),"^",7) G:'FHNO TF
"RTN","FHWOR7",16,0)
 S FHX=$G(^FHPT(FHDFN,"A",FHADM,"SF",FHNO,0)),FHX1=$P(FHX,"^",2)
"RTN","FHWOR7",17,0)
 S FHL=4 F FHK1=1:1:3 S FHN(FHK1)="" F FHK2=1:1:4 S FHX2=$P(FHX,"^",FHL+1),FHX3=$P(FHX,"^",FHL+2),FHL=FHL+2 I FHX2 S:FHN(FHK1)'="" FHN(FHK1)=FHN(FHK1)_";" S FHN(FHK1)=FHN(FHK1)_$S(FHX3:FHX3,1:1)_" "_$P($G(^FH(118,FHX2,0)),"^",1)
"RTN","FHWOR7",18,0)
 S FHX=FHX1_"^"_FHN(1)_"^"_FHN(2)_"^"_FHN(3)
"RTN","FHWOR7",19,0)
 S ^TMP($J,"FHSF",1)=FHX
"RTN","FHWOR7",20,0)
TF ; Get Tubefeeding total Kcal/Day and store in ^TMP($J,"FHTF",1).
"RTN","FHWOR7",21,0)
 S FHNO=$P($G(^FHPT(FHDFN,"A",FHADM,0)),"^",4) G:'FHNO FP
"RTN","FHWOR7",22,0)
 S FHX=$G(^FHPT(FHDFN,"A",FHADM,"TF",FHNO,0)) S FHX=$P(FHX,"^",7)
"RTN","FHWOR7",23,0)
 S ^TMP($J,"FHTF",1)=FHX
"RTN","FHWOR7",24,0)
FP ; Get Food Preferences and store all Likes in ^TMP($J,"FHFP","L")
"RTN","FHWOR7",25,0)
 ; and all Dislikes in ^TMP($J,"FHFP","D").  The information is store
"RTN","FHWOR7",26,0)
 ; in the following:
"RTN","FHWOR7",27,0)
 ;
"RTN","FHWOR7",28,0)
 ; ^TMP($J,"FHFP","L",1)=Quantity_" "_Food Preference name_"^"_Meal
"RTN","FHWOR7",29,0)
 ; ^TMP($J,"FHFP","D",1)=Food Preference name_"^"_Meals.
"RTN","FHWOR7",30,0)
 S (FHD,FHL)=0 F FHNO=0:0 S FHNO=$O(^FHPT(FHDFN,"P",FHNO)) Q:FHNO<1  S FHX=$G(^(FHNO,0)) D SP
"RTN","FHWOR7",31,0)
 G KIL
"RTN","FHWOR7",32,0)
SP S FHZ=$G(^FH(115.2,+FHX,0))
"RTN","FHWOR7",33,0)
 I $P(FHZ,"^",2)="L" S FHL=FHL+1,^TMP($J,"FHFP","L",FHL)=$S($P(FHX,"^",3):$P(FHX,"^",3),1:1)_" "_$P(FHZ,"^",1)_"^"_$P(FHX,"^",2) Q
"RTN","FHWOR7",34,0)
 E  S FHD=FHD+1,^TMP($J,"FHFP","D",FHD)=$P(FHZ,"^",1)_"^"_$P(FHX,"^",2)
"RTN","FHWOR7",35,0)
 Q
"RTN","FHWOR7",36,0)
KIL K FHADM,FHD,FHK1,FHK2,FHL,FHN,FHNO,FHX,FHX1,FHX2,FHX3,FHWRD,FHZ Q
"RTN","FHWOR71")
0^323^B28099245
"RTN","FHWOR71",1,0)
FHWOR71 ; HISC/CAH - Diet Profile for CPRS ;1/30/97  08:54
"RTN","FHWOR71",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR71",3,0)
P(DFN) ;Dietetics Profile for CPRS
"RTN","FHWOR71",4,0)
 ; INPUT:   DFN = Patient file #2 internal record number
"RTN","FHWOR71",5,0)
 ; OUTPUT:  -1^displayable error text   (if invalid DFN or no profile)
"RTN","FHWOR71",6,0)
 ;     with version 5.5 selection of outpatients is allowed
"RTN","FHWOR71",7,0)
 ;          1 if successful, and displayable data in
"RTN","FHWOR71",8,0)
 ;   ^TMP($J,"FHPROF",DFN,n) = line of text
"RTN","FHWOR71",9,0)
 ;          where n = sequential number
"RTN","FHWOR71",10,0)
 ;
"RTN","FHWOR71",11,0)
 I 'DFN Q "-1^Invalid patient selection"
"RTN","FHWOR71",12,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q "-1^Invalid patient selection"
"RTN","FHWOR71",13,0)
 N %,%H,%I,%T,%ZIS,A1,ADM,AGE,ALG,ALL,BAG,C,CAL,COM,CON,CT,D3,DA,DAS,FHDU,DOB,DTP,FHI,FHOR,FHLD,FHQ,I,IOP,K,K1,K2,KK,L,L1,LST,MEAL,N,NO,NOW,FHORD,FHWF,FHPV,FHX,FHY
"RTN","FHWOR71",14,0)
 N POP,Q,QUA,QT,QTY,RM,SEX,PID,BID,ST1,ST2,STR,TYP,TF,TF2,TIM,TQU,TUN,WARD,X,X1,X2,XY,Y,YN,Z,Z1
"RTN","FHWOR71",15,0)
 S FHQ=1 K ^TMP($J,"FHPROF",DFN) S FHX=0 D F0
"RTN","FHWOR71",16,0)
 Q FHQ
"RTN","FHWOR71",17,0)
F0 ; Display Diet
"RTN","FHWOR71",18,0)
 D NOW^%DTC S NOW=%,DT=NOW\1,QT=""
"RTN","FHWOR71",19,0)
 S WARD=$G(^DPT(DFN,.1)) I WARD="" D CPRS^FHOMPP Q
"RTN","FHWOR71",20,0)
 ;S WARD=$G(^DPT(DFN,.1)) I WARD="" S FHQ="-1^Not currently an inpatient" Q
"RTN","FHWOR71",21,0)
 S ADM=$G(^DPT("CN",WARD,DFN)) I ADM<1 S FHQ="-1^No current diet order" Q
"RTN","FHWOR71",22,0)
 I '$D(^FHPT(FHDFN,"A",ADM,0)) S FHQ="-1^No current diet order2" Q
"RTN","FHWOR71",23,0)
 K N S P1=1 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0),M=$P(X,"^",2) I M'="" S:M="A" M="BNE" D SP
"RTN","FHWOR71",24,0)
 I $O(N(""))="" S FHX=$$SPACNG(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="No Food Preferences on file" S FHX=$$SPACNG(0,FHX) G A0
"RTN","FHWOR71",25,0)
 S FHX=$$SPACNG(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Food Preferences Currently on file" S FHX=$$SPACNG(1,FHX)
"RTN","FHWOR71",26,0)
 K ST1 S $P(ST1," ",81)="",$E(ST1,27,32)="Likes",$E(ST1,59,67)="Dislikes" S ^TMP($J,"FHPROF",DFN,FHX)=ST1 S FHX=$$SPACNG(1,FHX)
"RTN","FHWOR71",27,0)
 S (M1,M2,MM)="",FHX=$$SPACNG(0,FHX) F  S M1=$O(N(M1)) Q:M1=""  I $D(N(M1)) S ^TMP($J,"FHPROF",DFN,FHX)=$P(M1,"~",2) D
"RTN","FHWOR71",28,0)
 .  S (P1,P2)=0 F  S:P1'="" P1=$O(N(M1,"L",P1)) S X1=$S(P1>0:N(M1,"L",P1),1:"") S:P2'="" P2=$O(N(M1,"D",P2)) S X2=$S(P2>0:N(M1,"D",P2),1:"") Q:P1=""&(P2="")  D W0 S:M2'=M1 FHX=$$SPACNG(0,FHX)
"RTN","FHWOR71",29,0)
 .  S M2=M1 Q
"RTN","FHWOR71",30,0)
 S FHX=$$SPACNG(0,FHX) K L,N,M,M1,M2,MM,P1,P2
"RTN","FHWOR71",31,0)
A0 S X(0)=^FHPT(FHDFN,"A",ADM,0),X=$P(X(0),"^",10) G:X="" F1
"RTN","FHWOR71",32,0)
 S FHX=$$SPACNG(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Isolation/Precaution Type is "_$P($G(^FH(119.4,X,0)),"^",1)
"RTN","FHWOR71",33,0)
F1 D CUR^FHORD7 S FHX=$$SPACNG(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Current Diet: "_$S(Y'="":Y,1:"No current order")
"RTN","FHWOR71",34,0)
 I Y'="",FHORD>0 I $D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) S COM=^(1) D
"RTN","FHWOR71",35,0)
 . I COM'="" S FHX=$$SPACNG(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Comment: "_COM
"RTN","FHWOR71",36,0)
 S TYP=$P(X,"^",8) I TYP'="" D
"RTN","FHWOR71",37,0)
 . S FHX=$$SPACNG(0,FHX)
"RTN","FHWOR71",38,0)
 . S ^TMP($J,"FHPROF",DFN,FHX)="Service: "_$S(TYP="T":"Tray",TYP="D":"Dining Room",1:"Cafeteria")
"RTN","FHWOR71",39,0)
 S DTP=$P(X(0),"^",3) I DTP D DTP^FH S FHX=$$SPACNG(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Expires: "_DTP
"RTN","FHWOR71",40,0)
 S TF=$P(X(0),"^",4) G:TF<1 F2
"RTN","FHWOR71",41,0)
 S Y=^FHPT(FHDFN,"A",ADM,"TF",TF,0)
"RTN","FHWOR71",42,0)
 S DTP=$P(Y,"^",1),COM=$P(Y,"^",5),TQU=$P(Y,"^",6),CAL=$P(Y,"^",7)
"RTN","FHWOR71",43,0)
 D DTP^FH S FHX=$$SPACNG(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Tubefeed Ordered: "_DTP
"RTN","FHWOR71",44,0)
 F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S XY=^(TF2,0) D LP
"RTN","FHWOR71",45,0)
 S FHX=$$SPACNG(0,FHX) K ST1 S ST1="Total Quantity: "_TQU_" cc",$E(ST1,43,(56+$L(CAL)))="Total KCAL: "_CAL S ^TMP($J,"FHPROF",DFN,FHX)=ST1
"RTN","FHWOR71",46,0)
 I COM'="" S FHX=$$SPACNG(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Comment: "_COM
"RTN","FHWOR71",47,0)
F2 S NO=$P(X(0),"^",7),Y=$S('NO:"",1:^FHPT(FHDFN,"A",ADM,"SF",NO,0))
"RTN","FHWOR71",48,0)
 S L=$P(Y,"^",4) S FHX=$$SPACNG(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Supplemental Feeding: "_$S('L:"No Order",1:$P(^FH(118.1,L,0),"^",1)) G:'NO F3
"RTN","FHWOR71",49,0)
 S DTP=$P(Y,"^",30) D DTP^FH S ^TMP($J,"FHPROF",DFN,FHX)=^(FHX)_"    Reviewed: "_DTP
"RTN","FHWOR71",50,0)
 S L=4 F K1=1:1:3 S K=0,N(K1)="" F K2=1:1:4 S Z=$P(Y,U,L+1),Q=$P(Y,U,L+2),L=L+2 I Z'="" S:'Q Q=1 S:N(K1)'="" N(K1)=N(K1)_"; " S N(K1)=N(K1)_Q_" "_$P(^FH(118,Z,0),"^",1)
"RTN","FHWOR71",51,0)
 S FHX=$$SPACNG(0,FHX) F K1=1:1:3 I N(K1)'="" S FHX=$$SPACNG(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)=$P("     10am;      2pm;      8pm",";",K1)_":    "_N(K1)
"RTN","FHWOR71",52,0)
F3 G ^FHWOR72
"RTN","FHWOR71",53,0)
LP S TUN=$P(XY,"^",1),STR=$P(XY,"^",2),QUA=$P(XY,"^",3)
"RTN","FHWOR71",54,0)
 S FHX=$$SPACNG(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Product: "_$P($G(^FH(118.2,TUN,0)),"^",1)_", "_$S(STR=4:"Full",STR=1:"1/4",STR=2:"1/2",1:"3/4")_" Str., "_QUA Q
"RTN","FHWOR71",55,0)
SP S Z=$G(^FH(115.2,+X,0)),L1=$P(Z,"^",1),KK=$P(Z,"^",2),M1="",DAS=$P(X,"^",4)
"RTN","FHWOR71",56,0)
 I KK="L" S Q=$P(X,"^",3),L1=$S(Q:Q,1:1)_" "_L1
"RTN","FHWOR71",57,0)
 I M="BNE" S M1="1~All Meals" G SP1
"RTN","FHWOR71",58,0)
 S Z1=$E(M,1) I Z1'="" S M1=$S(Z1="B":"2~Break",Z1="N":"3~Noon",1:"4~Even")
"RTN","FHWOR71",59,0)
 S Z1=$E(M,2) I Z1'="" S M1=M1_","_$S(Z1="B":"Break",Z1="N":"Noon",1:"Even")
"RTN","FHWOR71",60,0)
SP1 S:'$D(N(M1,KK,P1)) N(M1,KK,P1)="" I $L(N(M1,KK,P1))+$L(L1)<255 S N(M1,KK,P1)=N(M1,KK,P1)_$S(N(M1,KK,P1)="":"",1:", ")_L1_$S(DAS="Y":" (D)",1:"")
"RTN","FHWOR71",61,0)
 E  S:'$D(N(M1,KK,K)) N(M1,KK,K)="" S N(M1,KK,K)=L1_$S(DAS="Y":" (D)",1:"") S P1=K
"RTN","FHWOR71",62,0)
 Q
"RTN","FHWOR71",63,0)
W0 I X1'="" K ST2 S $P(ST2," ",13)="" S FHY=$G(^TMP($J,"FHPROF",DFN,FHX)) S ^TMP($J,"FHPROF",DFN,FHX)=FHY_$E(ST2,1,(11-$L(FHY))) S X=X1 D W1 S X1=X
"RTN","FHWOR71",64,0)
 I X2'="" K ST2 S $P(ST2," ",47)="" S FHY=$G(^TMP($J,"FHPROF",DFN,FHX)) S ^TMP($J,"FHPROF",DFN,FHX)=FHY_$E(ST2,1,(46-$L(FHY))) S X=X2 D W1 S X2=X
"RTN","FHWOR71",65,0)
 Q:X1=""&(X2="")  S FHX=$$SPACNG(0,FHX) G W0
"RTN","FHWOR71",66,0)
W1 I $L(X)<34 S FHY=$G(^TMP($J,"FHPROF",DFN,FHX)) S ^TMP($J,"FHPROF",DFN,FHX)=FHY_" "_X S X="" Q
"RTN","FHWOR71",67,0)
 F KK=35:-1:1 Q:$E(X,KK-1,KK)=", "
"RTN","FHWOR71",68,0)
 S ^TMP($J,"FHPROF",DFN,FHX)=^(FHX)_" "_$E(X,1,KK-2) S X=$E(X,KK+1,999)
"RTN","FHWOR71",69,0)
 Q
"RTN","FHWOR71",70,0)
SPACNG(FHI,FHX) ;Multiple spacing before next line of text in ^TMP global
"RTN","FHWOR71",71,0)
 N I F I=1:1:FHI S FHX=FHX+1 S ^TMP($J,"FHPROF",DFN,FHX)=" "
"RTN","FHWOR71",72,0)
 S FHX=FHX+1
"RTN","FHWOR71",73,0)
 Q FHX
"RTN","FHWOR71",74,0)
TEST ; FOR TESTING ONLY - DFN must be defined
"RTN","FHWOR71",75,0)
 S I="" F  S I=$O(^TMP($J,"FHPROF",DFN,I)) Q:I=""  W !,^TMP($J,"FHPROF",DFN,I)
"RTN","FHWOR71",76,0)
 Q
"RTN","FHWOR72")
0^324^B16706896
"RTN","FHWOR72",1,0)
FHWOR72 ; HISC/CAH - Diet Profile for CPRS (cont) ;3/13/01  15:15
"RTN","FHWOR72",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWOR72",3,0)
 S X1=NOW,X2=-1 D C^%DTC S LST=X,CT=0
"RTN","FHWOR72",4,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"OO",K)) Q:K<1  S X=^(K,0) I $P(X,"^",2)'<LST!($P(X,"^",5)="S"),$P(X,"^",5)'="X" D L1
"RTN","FHWOR72",5,0)
 S FHX=$$SPACNG^FHWOR71(0,FHX) S CT=0 F KK=NOW:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1  S FHORD=$P(^(KK,0),"^",2) D T1
"RTN","FHWOR72",6,0)
 I 'CT S FHX=$$SPACNG^FHWOR71(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="No future Diet Orders exist"
"RTN","FHWOR72",7,0)
F4 S FHX=$$SPACNG^FHWOR71(1,FHX) S CT=0 F K=NOW:0 S K=$O(^FHPT(FHDFN,"A",ADM,"EL",K)) Q:K<1  S CT=CT+1,Y=^(K,0) D EL
"RTN","FHWOR72",8,0)
 I 'CT S FHX=$$SPACNG^FHWOR71(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="No future Early or Late Trays ordered"
"RTN","FHWOR72",9,0)
 K N F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  S X=^FHPT(FHDFN,"A",ADM,"SP",K,0),M=$P(X,"^",3),M=$S(M="BNE":"A",1:$E(M,1)),N(M,K)=$P(X,"^",2,3),$P(N(M,K),"^",3)=$P(X,"^",8)
"RTN","FHWOR72",10,0)
 I $O(N(""))="" S FHX=$$SPACNG^FHWOR71(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="No Active Standing Orders" G F5
"RTN","FHWOR72",11,0)
 S FHX=$$SPACNG^FHWOR71(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Active Standing Orders:" S FHX=$$SPACNG^FHWOR71(0,FHX)
"RTN","FHWOR72",12,0)
 F M="A","B","N","E" F K=0:0 S K=$O(N(M,K)) Q:K<1  S Z=+N(M,K) I Z D
"RTN","FHWOR72",13,0)
 . D SP S QTY=$P(N(M,K),"^",3)
"RTN","FHWOR72",14,0)
 . S FHX=$$SPACNG^FHWOR71(0,FHX)
"RTN","FHWOR72",15,0)
 . K ST1 S ST1="     "_M2,$E(ST1,20,80)=$S(QTY:QTY,1:1)_" "_$P(^FH(118.3,Z,0),"^",1)
"RTN","FHWOR72",16,0)
 . S ^TMP($J,"FHPROF",DFN,FHX)=ST1
"RTN","FHWOR72",17,0)
 K L,N,M,M1,M2
"RTN","FHWOR72",18,0)
F5 S CT=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"DR",K)) Q:K<1  D CD
"RTN","FHWOR72",19,0)
 I 'CT S FHX=$$SPACNG^FHWOR71(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="No Active Consultations for this Admission"
"RTN","FHWOR72",20,0)
F6 S CT=0 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"MO","AC",KK)) Q:KK<1  F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"MO","AC",KK,K)) Q:K<1  D MO
"RTN","FHWOR72",21,0)
 I 'CT S FHX=$$SPACNG^FHWOR71(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="No Monitors for this Admission"
"RTN","FHWOR72",22,0)
 S FHX=$$SPACNG^FHWOR71(0,FHX) Q
"RTN","FHWOR72",23,0)
SP S M1=$P(N(M,K),"^",2) I M1="BNE" S M2="All Meals" Q
"RTN","FHWOR72",24,0)
 S L=$E(M1,1),M2=$S(L="B":"Break",L="N":"Noon",1:"Even")
"RTN","FHWOR72",25,0)
 S L=$E(M1,2) Q:L=""  S M2=M2_","_$S(L="B":"Break",L="N":"Noon",1:"Even") Q
"RTN","FHWOR72",26,0)
EL S MEAL=$P(Y,"^",2),TIM=$P(Y,"^",3),BAG=$P(Y,"^",4),DTP=K\1 D DTP^FH
"RTN","FHWOR72",27,0)
 S FHX=$$SPACNG^FHWOR71(0,FHX) K ST1 S ST1="Early/Late Meal:  "_DTP,$E(ST1,30,45)=$J(TIM,10),ST1=ST1_"   "_$S(MEAL="B":"Breakfast",MEAL="N":"  Noon ",1:" Evening") S:BAG="Y" ST1=ST1_"       Bagged Meal"
"RTN","FHWOR72",28,0)
 S ^TMP($J,"FHPROF",DFN,FHX)=ST1 Q
"RTN","FHWOR72",29,0)
CD S Y=^FHPT(FHDFN,"A",ADM,"DR",K,0) Q:$P(Y,"^",8)'="A"  S CT=CT+1
"RTN","FHWOR72",30,0)
 S CON=$P(Y,"^",2),DTP=$P(Y,"^",1),COM=$P(Y,"^",3)
"RTN","FHWOR72",31,0)
 S FHX=$$SPACNG^FHWOR71(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Consult: "_$P($G(^FH(119.5,CON,0)),"^",1)
"RTN","FHWOR72",32,0)
 I COM'="" S FHX=$$SPACNG^FHWOR71(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Comment: "_COM
"RTN","FHWOR72",33,0)
 D DTP^FH S FHX=$$SPACNG^FHWOR71(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Ordered: "_DTP Q
"RTN","FHWOR72",34,0)
L1 I 'CT S FHX=$$SPACNG^FHWOR71(1,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Additional Orders Saved or Last 24 Hours:" S FHX=$$SPACNG^FHWOR71(0,FHX) S CT=1
"RTN","FHWOR72",35,0)
 S DTP=$P(X,"^",2) D DTP^FH S FHX=$$SPACNG^FHWOR71(0,FHX) K ST1 S $P(ST1," ",21)="",ST1=ST1_DTP S $E(ST1,21,(21+$L($P(X,"^",3))))=$P(X,"^",3)
"RTN","FHWOR72",36,0)
 S ^TMP($J,"FHPROF",DFN,FHX)=ST1 Q
"RTN","FHWOR72",37,0)
T1 Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))  S DTP=KK D DTP^FH,C2^FHORD7
"RTN","FHWOR72",38,0)
 I 'CT S FHX=$$SPACNG^FHWOR71(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="Future Diet Orders:" S FHX=$$SPACNG^FHWOR71(0,FHX)
"RTN","FHWOR72",39,0)
 S CT=CT+1 S FHX=$$SPACNG^FHWOR71(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="     "_DTP_"  "_Y Q
"RTN","FHWOR72",40,0)
MO ; Monitors
"RTN","FHWOR72",41,0)
 S Y=$G(^FHPT(FHDFN,"A",ADM,"MO",K,0)) Q:Y=""  S CT=CT+1
"RTN","FHWOR72",42,0)
 S FHX=$$SPACNG^FHWOR71(1,FHX) S DTP=$P(Y,"^",2) D DTP^FH S ^TMP($J,"FHPROF",DFN,FHX)=$P(Y,"^",1)_", "_DTP
"RTN","FHWOR72",43,0)
 S COM=$P(Y,"^",3) I COM'="" S FHX=$$SPACNG^FHWOR71(0,FHX) S ^TMP($J,"FHPROF",DFN,FHX)="     Action: "_COM
"RTN","FHWOR72",44,0)
 Q
"RTN","FHWOR8")
0^325^B6318925
"RTN","FHWOR8",1,0)
FHWOR8 ; HISC/NCA - Dietetics Order Parameter ;2/24/95  07:56 ;
"RTN","FHWOR8",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005;
"RTN","FHWOR8",3,0)
EN(DFN,FHPAR) ; Get the Order Parameter by passing the DFN and Variable
"RTN","FHWOR8",4,0)
 ; array FHPAR(1)-FHPAR(3) is returned.
"RTN","FHWOR8",5,0)
 N WARD,ADM,DP,FHWRD
"RTN","FHWOR8",6,0)
 S FHPAR="",WARD=$G(^DPT(DFN,.1)) G:WARD="" EXIT
"RTN","FHWOR8",7,0)
 S ADM=$G(^DPT("CN",WARD,DFN)) G:ADM<1 EXIT
"RTN","FHWOR8",8,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWOR8",9,0)
 S FHWRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8),DP=$P($G(^FH(119.6,+FHWRD,0)),"^",8)
"RTN","FHWOR8",10,0)
 S FHPAR(1)=$G(^FH(119.73,+DP,1)),FHPAR(2)=$G(^FH(119.73,+DP,2))
"RTN","FHWOR8",11,0)
 S FHPAR(3)=$P($G(^FH(119.6,+FHWRD,0)),"^",10)
"RTN","FHWOR8",12,0)
EXIT Q
"RTN","FHWOR8",13,0)
 ;
"RTN","FHWOR8",14,0)
EN1(LOC,FHPAR) ; Get the Order Parameters by passing the WARD/HOSP LOCATION
"RTN","FHWOR8",15,0)
 ; array FHPAR(1)-FHPAR(3) is returned.
"RTN","FHWOR8",16,0)
 K FHPAR N DP,FHVPTR,FHLOC
"RTN","FHWOR8",17,0)
 S FHVPTR=$P(LOC,";",1)
"RTN","FHWOR8",18,0)
 I LOC["SC" S FHLOC=$O(^FH(119.6,"AL",FHVPTR,"")) I FHLOC="" D
"RTN","FHWOR8",19,0)
 .S FHVPTR=$G(^SC(FHVPTR,42)) Q:FHVPTR=""  S FHLOC=$O(^FH(119.6,"AW",FHVPTR,""))
"RTN","FHWOR8",20,0)
 I LOC'["SC" S FHLOC=$O(^FH(119.6,"AW",FHVPTR,"")) I FHLOC="" D
"RTN","FHWOR8",21,0)
 .S FHVPTR=$G(^DIC(42,FHVPTR,44)) Q:FHVPTR=""  S FHLOC=$O(^FH(119.6,"AL",FHVPTR,""))
"RTN","FHWOR8",22,0)
 I FHLOC="" Q
"RTN","FHWOR8",23,0)
 S DP=$P($G(^FH(119.6,+FHLOC,0)),"^",8) I DP="" Q
"RTN","FHWOR8",24,0)
 S FHPAR(1)=$G(^FH(119.73,+DP,1)),FHPAR(2)=$G(^FH(119.73,+DP,2))
"RTN","FHWOR8",25,0)
 S FHPAR(3)=$P($G(^FH(119.6,+FHLOC,0)),"^",10)
"RTN","FHWOR8",26,0)
 Q
"RTN","FHWOR8",27,0)
EN2(DFN,FHM,FHPAR) ; Get the list of meal dates by passing the DFN/MEAL
"RTN","FHWOR8",28,0)
 ; array FHPAR() is returned.
"RTN","FHWOR8",29,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWOR8",30,0)
 K FHPAR S FHINDX=0
"RTN","FHWOR8",31,0)
 D NOW^%DTC S FHNOW=X,X1=FHNOW,X2=-1 D C^%DTC S FHNOW=X
"RTN","FHWOR8",32,0)
 I '$O(^FHPT(FHDFN,"OP","B",FHNOW)) Q
"RTN","FHWOR8",33,0)
 F FHRM=FHNOW:0 S FHRM=$O(^FHPT(FHDFN,"OP","B",FHRM)) Q:FHRM'>0  D
"RTN","FHWOR8",34,0)
 .F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRM,FHRNUM)) Q:FHRNUM'>0  D
"RTN","FHWOR8",35,0)
 ..I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" Q
"RTN","FHWOR8",36,0)
 ..S FHMEAL1=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,4)
"RTN","FHWOR8",37,0)
 ..I FHM'="",FHM'=FHMEAL1 Q
"RTN","FHWOR8",38,0)
 ..S FHINDX=FHINDX+1
"RTN","FHWOR8",39,0)
 ..S FHPAR(FHINDX)=FHRM_"^"_FHMEAL1 Q
"RTN","FHWOR8",40,0)
 Q
"RTN","FHWOR8",41,0)
EN3(DFN,FHPAR) ; Get the list of recurring meal dates by passing the DFN
"RTN","FHWOR8",42,0)
 ; array FHPAR() is returned.
"RTN","FHWOR8",43,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWOR8",44,0)
 K FHPAR S FHINDX=0
"RTN","FHWOR8",45,0)
 D NOW^%DTC S FHNOW=X,X1=FHNOW,X2=-1 D C^%DTC S FHNOW=X
"RTN","FHWOR8",46,0)
 I '$O(^FHPT(FHDFN,"OP","B",FHNOW)) Q
"RTN","FHWOR8",47,0)
 F FHRM=FHNOW:0 S FHRM=$O(^FHPT(FHDFN,"OP","B",FHRM)) Q:FHRM'>0  D
"RTN","FHWOR8",48,0)
 .F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRM,FHRNUM)) Q:FHRNUM'>0  D
"RTN","FHWOR8",49,0)
 ..I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" Q
"RTN","FHWOR8",50,0)
 ..S FHMEAL1=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,4)
"RTN","FHWOR8",51,0)
 ..S FHINDX=FHINDX+1
"RTN","FHWOR8",52,0)
 ..S FHPAR(FHINDX)=FHRM_"^"_FHMEAL1 Q
"RTN","FHWOR8",53,0)
 Q
"RTN","FHWORA")
0^327^B19320980
"RTN","FHWORA",1,0)
FHWORA ; HISC/GJC - OE/RR Procedure Call (Assessments) ;11/6/97  15:35
"RTN","FHWORA",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWORA",3,0)
FHWORADT(DFN) ; Pass back the Assessment Dates for a particular patient.
"RTN","FHWORA",4,0)
 ;----------------------------------------------------------------------
"RTN","FHWORA",5,0)
 ; Input : DFN -> the ien of the patient
"RTN","FHWORA",6,0)
 ; Output: -1^error text -> no assessments passed back with reason being
"RTN","FHWORA",7,0)
 ;                          error text
"RTN","FHWORA",8,0)
 ;         1 -> Assessments for our patient have been found.  Data will
"RTN","FHWORA",9,0)
 ;              stored in:
"RTN","FHWORA",10,0)
 ;              ^TMP($J,"FHADT",DFN,inv internal dt/time)=ext dt/time
"RTN","FHWORA",11,0)
 ;----------------------------------------------------------------------
"RTN","FHWORA",12,0)
 Q:'$L(DFN) "-1^patient data missing"
"RTN","FHWORA",13,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q "-1^patient data missing"
"RTN","FHWORA",14,0)
 Q:'$D(^FHPT(FHDFN,0)) "-1^invalid patient (not in Dietetics Patient file)"
"RTN","FHWORA",15,0)
 Q:'+$O(^FHPT(FHDFN,"N",0)) "-1^No assessments on file"
"RTN","FHWORA",16,0)
 K ^TMP($J,"FHADT",DFN) N FH115A,I S I=0
"RTN","FHWORA",17,0)
 F  S I=$O(^FHPT(FHDFN,"N",I)) Q:I'>0  D
"RTN","FHWORA",18,0)
 . S FH115A=$G(^FHPT(FHDFN,"N",I,0))
"RTN","FHWORA",19,0)
 . S ^TMP($J,"FHADT",DFN,I)=$$FMTE^XLFDT($P(FH115A,"^"),1)
"RTN","FHWORA",20,0)
 . Q
"RTN","FHWORA",21,0)
 Q $S($D(^TMP($J,"FHADT",DFN)):1,1:"-1^No assessments on file")
"RTN","FHWORA",22,0)
 ;
"RTN","FHWORA",23,0)
FHWORASM(DFN,FHADTX) ; Store Assessment data so it can be displayed
"RTN","FHWORA",24,0)
 ;----------------------------------------------------------------------
"RTN","FHWORA",25,0)
 ; Input : DFN    -> ien of the patient
"RTN","FHWORA",26,0)
 ;         FHADTX -> Assessment Date (external format)
"RTN","FHWORA",27,0)
 ; Output: -1^error text, error text will be failure reason
"RTN","FHWORA",28,0)
 ;         1, no error data to be stored in:
"RTN","FHWORA",29,0)
 ;         ^TMP($J,"FHASM",DFN,seq #)="lines of text"
"RTN","FHWORA",30,0)
 ;----------------------------------------------------------------------
"RTN","FHWORA",31,0)
 Q:'$L(DFN) "-1^patient data missing"
"RTN","FHWORA",32,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q "-1^patient data missing"
"RTN","FHWORA",33,0)
 Q:'$L(FHADTX) "-1^patient assessment date missing"
"RTN","FHWORA",34,0)
 Q:+FHADTX=FHADTX "-1^expecting the external format for a date/time"
"RTN","FHWORA",35,0)
 Q:'$D(^FHPT(FHDFN,0)) "-1^invalid patient (not in Dietetics Patient file)"
"RTN","FHWORA",36,0)
 N FHADTI,FHADTINV D DT^DILF("T",FHADTX,.FHADTI)
"RTN","FHWORA",37,0)
 Q:FHADTI=-1 "-1^invalid assessment date"
"RTN","FHWORA",38,0)
 S FHADTINV=(9999999-FHADTI)
"RTN","FHWORA",39,0)
 Q:'$D(^FHPT(FHDFN,"N",FHADTINV,0)) "-1^No assessments on file for this date/time"
"RTN","FHWORA",40,0)
 K ^TMP($J,"FHASM",DFN)
"RTN","FHWORA",41,0)
 N ACIR,ACIRP,ADT,AGE,AMP,BFAMA,BFAMAP,BMI,BMIP,CCIR,CCIRP,CNT,DTP,DWGT
"RTN","FHWORA",42,0)
 N FHAPPER,FHASMNT,FHLAB,FHUNIT,FLD,FRM,HGP,HGT,I,IBW,KCAL,N,NAM,NB,PRO
"RTN","FHWORA",43,0)
 N RC,SCA,SCAP,SEX,STR,STR1,TAB,TSF,TSFP,UWGT,WGP,WGT,X,X1,X2,X3,XD,Y,Z
"RTN","FHWORA",44,0)
 S CNT=0
"RTN","FHWORA",45,0)
 ; Note: '^FH(119.9,1' is the Dietetics Site Parameter file!
"RTN","FHWORA",46,0)
 S FHUNIT=$P($G(^FH(119.9,1,3)),"^") ; Eng. or Metric units of measure
"RTN","FHWORA",47,0)
 S FHASMNT(0)=$G(^FHPT(FHDFN,"N",FHADTINV,0))
"RTN","FHWORA",48,0)
 F I=1:1:22 S @$P("ADT SEX AGE HGT HGP WGT WGP DWGT UWGT IBW FRM AMP X X X KCAL PRO FLD RC XD BMI BMIP"," ",I)=$P(FHASMNT(0),"^",I)
"RTN","FHWORA",49,0)
 S SIGN=$P(FHASMNT(0),U,23) S:SIGN'="" SIGN1="Entered by: "_$P($P(^VA(200,SIGN,0),U),",",2)_" "_$P($P(^VA(200,SIGN,0),U),",") K SIGN
"RTN","FHWORA",50,0)
 S NAM=$P(^DPT(DFN,0),"^"),NB=$P(FHASMNT(0),"^",25)
"RTN","FHWORA",51,0)
 S SEX=$S(SEX="M":"Male",SEX="F":"Female",1:"")
"RTN","FHWORA",52,0)
 S FHASMNT(1)=$G(^FHPT(FHDFN,"N",FHADTINV,1))
"RTN","FHWORA",53,0)
 F I=1:1:10 S @$P("TSF TSFP SCA SCAP ACIR ACIRP CCIR CCIRP BFAMA BFAMAP"," ",I)=$P(FHASMNT(1),"^",I)
"RTN","FHWORA",54,0)
 S FHAPPER=$G(^FHPT(FHDFN,"N",FHADTINV,2)),I=0
"RTN","FHWORA",55,0)
 F  S I=$O(^FHPT(FHDFN,"N",FHADTINV,"L",I)) Q:I'>0  S FHLAB(I)=$G(^(I,0))
"RTN","FHWORA",56,0)
 D SETUP^FHWORA1
"RTN","FHWORA",57,0)
 Q $S($D(^TMP($J,"FHASM",DFN)):1,1:"-1^No assessments on file for this date/time")
"RTN","FHWORA",58,0)
 ;
"RTN","FHWORA",59,0)
CNT(X) ; Increment our subscript
"RTN","FHWORA",60,0)
 S X=X+1 S CNT=X
"RTN","FHWORA",61,0)
 Q CNT
"RTN","FHWORA",62,0)
 ;
"RTN","FHWORA",63,0)
COMMENT ; Display the Nutritional Assessment comments.
"RTN","FHWORA",64,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" "
"RTN","FHWORA",65,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))="Comments"
"RTN","FHWORA",66,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" "
"RTN","FHWORA",67,0)
 Q:'+$O(^FHPT(FHDFN,"N",FHADTINV,"X",0))  ; quit if no comments
"RTN","FHWORA",68,0)
 N DIW,DIWF,DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,FHI,X
"RTN","FHWORA",69,0)
 S DIWF="",DIWL=1,DIWR=79 K ^UTILITY($J,"W",DIWL) S FHI=0
"RTN","FHWORA",70,0)
 F  S FHI=$O(^FHPT(FHDFN,"N",FHADTINV,"X",FHI)) Q:FHI'>0  D
"RTN","FHWORA",71,0)
 . S X=$G(^FHPT(FHDFN,"N",FHADTINV,"X",FHI,0)) D ^DIWP
"RTN","FHWORA",72,0)
 . Q
"RTN","FHWORA",73,0)
 S I=0 F  S I=$O(^UTILITY($J,"W",DIWL,I)) Q:I'>0  D
"RTN","FHWORA",74,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT(CNT))=$G(^UTILITY($J,"W",DIWL,I,0))
"RTN","FHWORA",75,0)
 . Q
"RTN","FHWORA",76,0)
 K ^UTILITY($J,"W",DIWL)
"RTN","FHWORA",77,0)
 Q
"RTN","FHWORA",78,0)
 ;
"RTN","FHWORA",79,0)
LAB(I) ; Display lab data for our patient.
"RTN","FHWORA",80,0)
 S X1=$P(FHLAB(I),"^",7) Q:X1=""  S DTP=X1\1 D DTP^FH
"RTN","FHWORA",81,0)
 S:'X3 ^TMP($J,"FHASM",DFN,$$CNT(CNT))=" " ; initial linefeed
"RTN","FHWORA",82,0)
 S X3=X3+1 ; lab data found? $S(X3>0:"Yes",1:"No")
"RTN","FHWORA",83,0)
 K STR S $P(STR," ",81)="",TAB=5
"RTN","FHWORA",84,0)
 S $E(STR,(TAB+1),(TAB+$L($P(FHLAB(I),"^"))))=$P(FHLAB(I),"^")
"RTN","FHWORA",85,0)
 S TAB=27
"RTN","FHWORA",86,0)
 S $E(STR,(TAB+1),(TAB+$L($P(FHLAB(I),"^",6))))=$P(FHLAB(I),"^",6)
"RTN","FHWORA",87,0)
 S TAB=40
"RTN","FHWORA",88,0)
 S $E(STR,(TAB+1),(TAB+$L($P(FHLAB(I),"^",4))))=$P(FHLAB(I),"^",4)
"RTN","FHWORA",89,0)
 S TAB=51
"RTN","FHWORA",90,0)
 S $E(STR,(TAB+1),(TAB+$L($P(FHLAB(I),"^",5))))=$P(FHLAB(I),"^",5)
"RTN","FHWORA",91,0)
 S TAB=65,$E(STR,(TAB+1),(TAB+$L(DTP)))=DTP
"RTN","FHWORA",92,0)
 S ^TMP($J,"FHASM",DFN,$$CNT(CNT))=STR
"RTN","FHWORA",93,0)
 Q
"RTN","FHWORA",94,0)
 ;
"RTN","FHWORA",95,0)
TRUNC(I) ; Set each node to no more than eighty (80) chars in length.
"RTN","FHWORA",96,0)
 N A,B,C S A=$L(I(0)),B=A\80
"RTN","FHWORA",97,0)
 F C=1:1:B S ^TMP($J,"FHASM",DFN,$$CNT(CNT))=$E(I(0),$S(C=1:1,1:((C-1)*80)),((C*80)-1))
"RTN","FHWORA",98,0)
 S ^TMP($J,"FHASM",DFN,$$CNT(CNT))=$E(I(0),(((80*B)+1)-1),A)
"RTN","FHWORA",99,0)
 Q
"RTN","FHWORA1")
0^328^B41936257
"RTN","FHWORA1",1,0)
FHWORA1 ; HISC/GJC/JH - OE/RR Procedure Call (Assessments) 2 of 2;1/31/97  12:56 ;11/6/97  15:28
"RTN","FHWORA1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWORA1",3,0)
SETUP ; Set up our ^TMP($J,"FHASM",DFN) global.  Called from FHWORA
"RTN","FHWORA1",4,0)
 S DTP=ADT D DTP^FH
"RTN","FHWORA1",5,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=$$CJ^XLFSTR("Date of Assessment: "_$E(DTP,1,9),80," ")
"RTN","FHWORA1",6,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" "
"RTN","FHWORA1",7,0)
 ;
"RTN","FHWORA1",8,0)
 S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:"")
"RTN","FHWORA1",9,0)
 S X2=+$J(HGT*2.54,0,0)_" cm" K STR S $P(STR," ",81)=""
"RTN","FHWORA1",10,0)
 S STR1="Height:       "_$S(FHUNIT'="M":X1,1:X2)_" ("_$S(FHUNIT'="M":X2,1:X1)_")",TAB=0
"RTN","FHWORA1",11,0)
 I HGP'="" S STR1=STR1_" "_$S(HGP="K":"knee hgt",HGP="S":"stated",1:"")
"RTN","FHWORA1",12,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",13,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",14,0)
 ;
"RTN","FHWORA1",15,0)
 S X1=WGT_" lbs",X2=+$J(WGT/2.2,0,1)_" kg"
"RTN","FHWORA1",16,0)
 S STR1="Weight:       "_$S(FHUNIT'="M":X1,1:X2)_" ("_$S(FHUNIT'="M":X2,1:X1)_")",TAB=0
"RTN","FHWORA1",17,0)
 I WGP'="" S STR1=STR1_" "_$S(WGP="A":"anthro",WGP="S":"stated",1:"")
"RTN","FHWORA1",18,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",19,0)
 S DTP=DWGT D DTP^FH S TAB=50,STR1="Weight Taken:    "_DTP
"RTN","FHWORA1",20,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",21,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",22,0)
 ;
"RTN","FHWORA1",23,0)
 S (X1,X2)="" I UWGT S X1=UWGT_" lbs",X2=+$J(UWGT/2.2,0,1)_" kg"
"RTN","FHWORA1",24,0)
 K STR S $P(STR," ",81)="",TAB=0,STR1="Usual Weight: "_$S(FHUNIT'="M":X1,1:X2)_" ("_$S(FHUNIT'="M":X2,1:X1)_")"
"RTN","FHWORA1",25,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",26,0)
 S STR1="Weight/Usual Wt:  "_$S(UWGT:($J(WGT/UWGT*100,3,0)_"%"),1:"")
"RTN","FHWORA1",27,0)
 S TAB=50 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",28,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",29,0)
 ;
"RTN","FHWORA1",30,0)
 S X1=IBW_" lbs",X2=+$J(IBW/2.2,0,1)_" kg"
"RTN","FHWORA1",31,0)
 K STR S $P(STR," ",81)="",TAB=0
"RTN","FHWORA1",32,0)
 S STR1="Ideal Weight: "_$S(FHUNIT'="M":X1,1:X2)_" ("_$S(FHUNIT'="M":X2,1:X1)_")"
"RTN","FHWORA1",33,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",34,0)
 S TAB=50,STR1="Weight/IBW:       "_$S(IBW:($J(WGT/IBW*100,3,0)_"%"),1:"")
"RTN","FHWORA1",35,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",36,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",37,0)
 ;
"RTN","FHWORA1",38,0)
 I AMP S TAB=6 K STR S $P(STR," ",81)="",STR1="Ideal weight adjusted for amputation",STR=$$STRING(STR,STR1,TAB),^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",39,0)
 ;
"RTN","FHWORA1",40,0)
 S TAB=0 K STR S $P(STR," ",81)=""
"RTN","FHWORA1",41,0)
 S STR1="Frame Size:   "_$S(FRM="S":"Small",FRM="M":"Medium",FRM="L":"Large",1:"")
"RTN","FHWORA1",42,0)
 S STR=$$STRING(STR,STR1,TAB),TAB=50
"RTN","FHWORA1",43,0)
 S STR1="Body Mass Index:  "_BMI S:BMIP'="" STR1=STR1_" ("_BMIP_"%)"
"RTN","FHWORA1",44,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",45,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",46,0)
 ;
"RTN","FHWORA1",47,0)
 I FHASMNT(1)]"" D
"RTN","FHWORA1",48,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" " K STR
"RTN","FHWORA1",49,0)
 . S $P(STR," ",81)="",TAB=26
"RTN","FHWORA1",50,0)
 . S STR1="Anthropometric Measurements"
"RTN","FHWORA1",51,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",52,0)
 . K STR S $P(STR," ",81)=""
"RTN","FHWORA1",53,0)
 . S TAB=35,STR1="%ile",STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",54,0)
 . S TAB=71,STR1="%ile",STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",55,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",56,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" "
"RTN","FHWORA1",57,0)
 . K STR S $P(STR," ",81)="",TAB=4
"RTN","FHWORA1",58,0)
 . S STR1="Triceps Skinfold (mm)",STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",59,0)
 . I TSF D
"RTN","FHWORA1",60,0)
 .. S TAB=31,STR1=$J(+TSF,3,0),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",61,0)
 .. S TAB=36,STR1=$J(TSFP,3),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",62,0)
 .. Q
"RTN","FHWORA1",63,0)
 . S TAB=43,STR1="Arm Circumference (cm)"
"RTN","FHWORA1",64,0)
 . S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",65,0)
 . I ACIR D
"RTN","FHWORA1",66,0)
 .. S TAB=67,STR1=$J(+ACIR,3,0),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",67,0)
 .. S TAB=72,STR1=$J(ACIRP,3),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",68,0)
 .. Q
"RTN","FHWORA1",69,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",70,0)
 . K STR S $P(STR," ",81)="",TAB=4,STR1="Subscapular Skinfold (mm)"
"RTN","FHWORA1",71,0)
 . S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",72,0)
 . I SCA D
"RTN","FHWORA1",73,0)
 .. S TAB=31,STR1=$J(+SCA,3,0),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",74,0)
 .. S TAB=36,STR1=$J(SCAP,3),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",75,0)
 .. Q
"RTN","FHWORA1",76,0)
 . S TAB=43,STR1="Bone-free AMA (cm2)"
"RTN","FHWORA1",77,0)
 . S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",78,0)
 . I BFAMA D
"RTN","FHWORA1",79,0)
 .. S TAB=67,STR1=$J(+BFAMA,3,0),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",80,0)
 .. S TAB=72,STR1=$J(BFAMAP,3),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",81,0)
 .. Q
"RTN","FHWORA1",82,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",83,0)
 . K STR S $P(STR," ",81)=""
"RTN","FHWORA1",84,0)
 . S TAB=4,STR1="Calf Circumference (cm)",STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",85,0)
 . I CCIR>0 D
"RTN","FHWORA1",86,0)
 .. S TAB=31,STR1=$J(+CCIR,3,0),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",87,0)
 .. S TAB=36,STR1=$J(CCIRP,3),STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",88,0)
 .. Q
"RTN","FHWORA1",89,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",90,0)
 . Q
"RTN","FHWORA1",91,0)
 ;
"RTN","FHWORA1",92,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" "
"RTN","FHWORA1",93,0)
 K STR S $P(STR," ",81)="",TAB=32,STR1="Laboratory Data"
"RTN","FHWORA1",94,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",95,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",96,0)
 K STR S $P(STR," ",81)="",TAB=5,STR1="Test",STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",97,0)
 S TAB=30,STR1="Result    units",STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",98,0)
 S TAB=51,STR1="Ref.   range",STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",99,0)
 S TAB=67,STR1="Date",STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",100,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",101,0)
 ;
"RTN","FHWORA1",102,0)
 S (I,X3)=0 F  S I=$O(FHLAB(I)) Q:I'>0  D LAB^FHWORA(I)
"RTN","FHWORA1",103,0)
 I 'X3 D
"RTN","FHWORA1",104,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" ",TAB=5
"RTN","FHWORA1",105,0)
 . K STR S $P(STR," ",81)=""
"RTN","FHWORA1",106,0)
 . S STR1="No laboratory data available last "_$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)_" days"
"RTN","FHWORA1",107,0)
 . S STR=$$STRING(STR,STR1,TAB),^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",108,0)
 . Q
"RTN","FHWORA1",109,0)
 ;
"RTN","FHWORA1",110,0)
 S N=PRO/6.25,^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" ",TAB=0
"RTN","FHWORA1",111,0)
 K STR S $P(STR," ",81)="",STR1="Energy Requirements:  "_KCAL_" Kcal/day"
"RTN","FHWORA1",112,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",113,0)
 I N D
"RTN","FHWORA1",114,0)
 . S TAB=50,STR1="Kcal:N  "_$J(KCAL/N,0,0)_":1"
"RTN","FHWORA1",115,0)
 . S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",116,0)
 . Q
"RTN","FHWORA1",117,0)
 I NB'="" D
"RTN","FHWORA1",118,0)
 . S TAB=67,STR1="N-Bal: "_NB
"RTN","FHWORA1",119,0)
 . S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",120,0)
 . Q
"RTN","FHWORA1",121,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",122,0)
 K STR S $P(STR," ",81)="",TAB=0,STR1="Protein Requirements: "_PRO_" gm/day"
"RTN","FHWORA1",123,0)
 S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",124,0)
 I N D
"RTN","FHWORA1",125,0)
 . S TAB=50,STR1="NPC:N   "_$J(KCAL-(PRO*4)/N,0,0)_":1"
"RTN","FHWORA1",126,0)
 . S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",127,0)
 . Q
"RTN","FHWORA1",128,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",129,0)
 ;
"RTN","FHWORA1",130,0)
 S:FLD'="" ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))="Fluid Requirements:   "_FLD_" ml/day"
"RTN","FHWORA1",131,0)
 ;
"RTN","FHWORA1",132,0)
 I FHAPPER]"" D
"RTN","FHWORA1",133,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" "
"RTN","FHWORA1",134,0)
 . K STR S $P(STR," ",81)="",TAB=0,STR1="Appearance: "
"RTN","FHWORA1",135,0)
 . S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",136,0)
 . S TAB=20,$E(STR,(TAB+1),(TAB+$L(FHAPPER)))=FHAPPER
"RTN","FHWORA1",137,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",138,0)
 . Q
"RTN","FHWORA1",139,0)
 I XD D
"RTN","FHWORA1",140,0)
 . N Y S Y=$L($P($G(^FH(115.3,XD,0)),"^"))
"RTN","FHWORA1",141,0)
 . S Y(0)=$P($G(^FH(115.3,XD,0)),"^")
"RTN","FHWORA1",142,0)
 . S TAB=0 K STR S $P(STR," ",81)="",STR1="Nutrition Class: "
"RTN","FHWORA1",143,0)
 . S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",144,0)
 . S TAB=20,$E(STR,(TAB+1),(TAB+Y))=Y(0)
"RTN","FHWORA1",145,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",146,0)
 . Q
"RTN","FHWORA1",147,0)
 I RC D
"RTN","FHWORA1",148,0)
 . N Y S Y=$L($P($G(^FH(115.4,RC,0)),"^",2))
"RTN","FHWORA1",149,0)
 . S Y(0)=$P($G(^FH(115.4,RC,0)),"^",2)
"RTN","FHWORA1",150,0)
 . S TAB=0 K STR S $P(STR," ",81)="",STR1="Nutrition Status: "
"RTN","FHWORA1",151,0)
 . S STR=$$STRING(STR,STR1,TAB)
"RTN","FHWORA1",152,0)
 . S TAB=20,$E(STR,(TAB+1),(TAB+Y))=Y(0)
"RTN","FHWORA1",153,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",154,0)
 . Q
"RTN","FHWORA1",155,0)
 D COMMENT^FHWORA ; display nutritional assessment comments
"RTN","FHWORA1",156,0)
 K STR S STR="" S:SIGN1'="" STR=SIGN1
"RTN","FHWORA1",157,0)
 K SIGN1 Q:STR=""
"RTN","FHWORA1",158,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=STR
"RTN","FHWORA1",159,0)
 Q
"RTN","FHWORA1",160,0)
STRING(STR,STR1,TAB) ; Build our data string
"RTN","FHWORA1",161,0)
 S $E(STR,(TAB+1),(TAB+$L(STR1)))=STR1
"RTN","FHWORA1",162,0)
 Q STR
"RTN","FHWORI")
0^329^B7351269
"RTN","FHWORI",1,0)
FHWORI ; HISC/NCA - Initial Master File Population ;10/1/96  13:12
"RTN","FHWORI",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWORI",3,0)
DO ; Code Diet Order
"RTN","FHWORI",4,0)
 S PKG=$O(^DIC(9.4,"C","FH",0)) Q:'PKG
"RTN","FHWORI",5,0)
 S VER=$P($G(^DIC(9.4,PKG,22,0)),"^",3) Q:'VER
"RTN","FHWORI",6,0)
 S VER=+$G(^DIC(9.4,PKG,22,VER,0))
"RTN","FHWORI",7,0)
 K ^TMP($J,"FHUPD"),MSG
"RTN","FHWORI",8,0)
 S FILE="111",FILNM=$P($G(^FH(111,0)),"^",1),EVENT="REP",ACT="MAD"
"RTN","FHWORI",9,0)
 F IEN=0:0 S IEN=$O(^FH(111,IEN)) Q:IEN<1  S X=$G(^(IEN,0)) S:$G(^("I"))="Y" ^TMP($J,"FHUPD",IEN)="" D CODE,D1
"RTN","FHWORI",10,0)
 K ACT,EVENT,FHK,FILE,FILNM,IEN,IEN1,NAM,N1,N2,PREC,SYN,SYN1,X
"RTN","FHWORI",11,0)
TF ; Code Tubefeeding
"RTN","FHWORI",12,0)
 K ^TMP($J,"FHUPT")
"RTN","FHWORI",13,0)
 S FILE="118.2",FILNM=$P($G(^FH(118.2,0)),"^",1),EVENT="REP",ACT="MAD" D CODE
"RTN","FHWORI",14,0)
 F IEN=0:0 S IEN=$O(^FH(118.2,IEN)) Q:IEN<1  S X=$G(^(IEN,0)) S:$G(^("I"))="Y" ^TMP($J,"FHUPT",IEN)="" D CODE,T1
"RTN","FHWORI",15,0)
 K ACT,EVENT,FILE,FILNM,IEN,IEN1,NAM,N1,N2,PKG,SYN,VER,X
"RTN","FHWORI",16,0)
INACTD ; Code Update Inactive Diet Orders
"RTN","FHWORI",17,0)
 G:'$D(^TMP($J,"FHUPD")) INACTT
"RTN","FHWORI",18,0)
 S FILE="111",FILNM=$P($G(^FH(111,0)),"^",1),EVENT="UPD",ACT="MDC" D CODE
"RTN","FHWORI",19,0)
 F IEN=0:0 S IEN=$O(^TMP($J,"FHUPD",IEN)) Q:IEN<1  S X=$G(^FH(111,IEN,0)) D CODE,D1
"RTN","FHWORI",20,0)
 K ^TMP($J,"FHUPD"),ACT,EVENT,FILE,FILNM,IEN,NAM,N1,N2,PREC,SYN,X
"RTN","FHWORI",21,0)
INACTT ; Code Update Inactive Tubefeedings
"RTN","FHWORI",22,0)
 Q:'$D(^TMP($J,"FHUPT"))
"RTN","FHWORI",23,0)
 S FILE="118.2",FILNM=$P($G(^FH(118.2,0)),"^",1),EVENT="UPD",ACT="MDC" D CODE
"RTN","FHWORI",24,0)
 F IEN=0:0 S IEN=$O(^TMP($J,"FHUPT",IEN)) Q:IEN<1  S X=$G(^FH(118.2,IEN,0)) D CODE,T1
"RTN","FHWORI",25,0)
 K ^TMP($J,"FHUPT"),ACT,EVENT,FILE,FILNM,IEN,IEN1,NAM,N1,N2,SYN,X
"RTN","FHWORI",26,0)
 Q
"RTN","FHWORI",27,0)
CODE ; Code MSH for Orderable Items
"RTN","FHWORI",28,0)
 S N1=1
"RTN","FHWORI",29,0)
 S MSG(N1)="MSH|^~\&|DIETETICS|"_^DD("SITE",1)_"|||||MFN"
"RTN","FHWORI",30,0)
 ; code MFI
"RTN","FHWORI",31,0)
 S N1=N1+1
"RTN","FHWORI",32,0)
 S MSG(N1)="MFI|"_FILE_"^"_FILNM_"^99DD||"_EVENT_"|||NE"
"RTN","FHWORI",33,0)
 Q
"RTN","FHWORI",34,0)
D1 ; Code MFE, ZFH, and ZSY for Diet Orders
"RTN","FHWORI",35,0)
 S NAM=$P(X,"^",1) Q:NAM=""  S PREC=$P(X,"^",4) Q:'PREC
"RTN","FHWORI",36,0)
 S SYN=$P(X,"^",2),N1=N1+1
"RTN","FHWORI",37,0)
 S MSG(N1)="MFE|"_ACT_"|||^^^"_IEN_"^"_NAM_"^99FHD"
"RTN","FHWORI",38,0)
 S N1=N1+1,MSG(N1)="ZFH|D|"_PREC_"||"_$P(X,"^",3)
"RTN","FHWORI",39,0)
 S FHK=0 F IEN1=0:0 S IEN1=$O(^FH(111,IEN,"AN",IEN1)) Q:IEN1<1  S SYN1=$G(^(IEN1,0)) D
"RTN","FHWORI",40,0)
 .S FHK=IEN1,SYN1=$P(SYN1,"^",1) Q:SYN1=""  S N1=N1+1
"RTN","FHWORI",41,0)
 .S MSG(N1)="ZSY|"_IEN1_"|"_SYN1 Q
"RTN","FHWORI",42,0)
 I SYN'="" S N1=N1+1,MSG(N1)="ZSY|"_(FHK+1)_"|"_SYN
"RTN","FHWORI",43,0)
 D SEND
"RTN","FHWORI",44,0)
 Q
"RTN","FHWORI",45,0)
T1 ; Code MFE, ZFH, and ZSY for Tubefeedings
"RTN","FHWORI",46,0)
 S NAM=$P(X,"^",1) Q:NAM=""  S N1=N1+1
"RTN","FHWORI",47,0)
 S MSG(N1)="MFE|"_ACT_"|||^^^"_IEN_"^"_NAM_"^99FHT"
"RTN","FHWORI",48,0)
 S N1=N1+1,MSG(N1)="ZFH|T"
"RTN","FHWORI",49,0)
 F IEN1=0:0 S IEN1=$O(^FH(118.2,IEN,1,IEN1)) Q:IEN1<1  S SYN=$G(^(IEN1,0)) D
"RTN","FHWORI",50,0)
 .S SYN=$P(SYN,"^",1) Q:SYN=""  S N1=N1+1
"RTN","FHWORI",51,0)
 .S MSG(N1)="ZSY|"_IEN1_"|"_SYN Q
"RTN","FHWORI",52,0)
 D SEND
"RTN","FHWORI",53,0)
 Q
"RTN","FHWORI",54,0)
SEND ; Send Message to OE/RR
"RTN","FHWORI",55,0)
 D MSG^XQOR("FH ORDERABLE ITEM UPDATE",.MSG)
"RTN","FHWORI",56,0)
 K MSG Q
"RTN","FHWORP")
0^330^B7665673
"RTN","FHWORP",1,0)
FHWORP ; HISC/NCA - Order Entry 3 Data Conversion ;7/1/97  16:45
"RTN","FHWORP",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWORP",3,0)
 I +$$VERSION^XPDUTL("OR")'=3 Q
"RTN","FHWORP",4,0)
 Q:'$D(^OR(100,0))  D NOW^%DTC S FHNOW=%
"RTN","FHWORP",5,0)
Q1 ; Process Converting Active Dietetics Orders
"RTN","FHWORP",6,0)
 F FHW1=0:0 S FHW1=$O(^FHPT("AW",FHW1)) Q:FHW1<1  F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",FHW1,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",FHW1,FHDFN)) D CVT
"RTN","FHWORP",7,0)
EXIT G KIL
"RTN","FHWORP",8,0)
CVT ; Start Converting the OE/RR Data
"RTN","FHWORP",9,0)
 Q:'$D(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHWORP",10,0)
 S FHX1=$G(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHWORP",11,0)
 S FHORD=$P(FHX1,"^",2) D:FHORD DO
"RTN","FHWORP",12,0)
 S TF=$P(FHX1,"^",4) D:TF TF
"RTN","FHWORP",13,0)
 S IS=$P(FHX1,"^",10) D:IS IS
"RTN","FHWORP",14,0)
 F FHAO=0:0 S FHAO=$O(^FHPT("AOO",FHDFN,ADM,FHAO)) Q:FHAO<1  S Y=$G(^FHPT(FHDFN,"A",ADM,"OO",FHAO,0)) D AO
"RTN","FHWORP",15,0)
 K N F EL=FHNOW:0 S EL=$O(^FHPT(FHDFN,"A",ADM,"EL",EL)) Q:EL<1  S Y=$G(^(EL,0)),FHORN=$P(Y,"^",7) I FHORN S:'$D(N(FHORN)) N(FHORN)=""
"RTN","FHWORP",16,0)
 F FHORN=0:0 S FHORN=$O(N(FHORN)) Q:FHORN<1  D EL
"RTN","FHWORP",17,0)
 Q
"RTN","FHWORP",18,0)
AO ; Convert Additional Orders
"RTN","FHWORP",19,0)
 S FHORN=$P(Y,"^",8) Q:'FHORN
"RTN","FHWORP",20,0)
 S VAL=$G(^OR(100,FHORN,4)),VAL1="" Q:VAL=""!($E(VAL,1)="A")  D VAL(VAL,.VAL1)
"RTN","FHWORP",21,0)
 S DATA="A;"_VAL1
"RTN","FHWORP",22,0)
 D FH^ORCONV3(FHORN,DATA)
"RTN","FHWORP",23,0)
 Q
"RTN","FHWORP",24,0)
DO ; Convert Current Diet Order or NPO
"RTN","FHWORP",25,0)
 S FHORN=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),"^",14) Q:'FHORN
"RTN","FHWORP",26,0)
 S TYP=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),"^",7) I 'TYP!(TYP="N") D DO1
"RTN","FHWORP",27,0)
 S SDT=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),"^",9)
"RTN","FHWORP",28,0)
 F FHKK=SDT:0 S FHKK=$O(^FHPT(FHDFN,"A",ADM,"AC",FHKK)) Q:FHKK<1  S Y=$G(^(FHKK,0)),FHORD=$P(Y,"^",2) D DO1
"RTN","FHWORP",29,0)
 Q
"RTN","FHWORP",30,0)
DO1 S FHORN=$P($G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)),"^",14) Q:'FHORN
"RTN","FHWORP",31,0)
 S VAL=$G(^OR(100,FHORN,4)),VAL1="" Q:VAL=""!($E(VAL,1)="D")!($E(VAL,1)="N")  D VAL(VAL,.VAL1)
"RTN","FHWORP",32,0)
 S DATA=$S(TYP="N":"N;",1:"D;")_VAL1
"RTN","FHWORP",33,0)
 D FH^ORCONV3(FHORN,DATA)
"RTN","FHWORP",34,0)
 Q
"RTN","FHWORP",35,0)
EL ; Convert Early/Late Tray
"RTN","FHWORP",36,0)
 S VAL=$G(^OR(100,FHORN,4)),VAL1="" Q:VAL=""!($E(VAL,1)="E")  D VAL(VAL,.VAL1)
"RTN","FHWORP",37,0)
 S DATA="E;"_VAL1
"RTN","FHWORP",38,0)
 D FH^ORCONV3(FHORN,DATA)
"RTN","FHWORP",39,0)
 Q
"RTN","FHWORP",40,0)
TF ; Convert Current Tubefeeding
"RTN","FHWORP",41,0)
 S FHORN=$P($G(^FHPT(FHDFN,"A",ADM,"TF",TF,0)),"^",14) Q:'FHORN
"RTN","FHWORP",42,0)
 S VAL=$G(^OR(100,FHORN,4)),VAL1="" Q:VAL=""!($E(VAL,1)="T")  D VAL(VAL,.VAL1)
"RTN","FHWORP",43,0)
 S DATA="T;"_VAL1
"RTN","FHWORP",44,0)
 D FH^ORCONV3(FHORN,DATA)
"RTN","FHWORP",45,0)
 Q
"RTN","FHWORP",46,0)
IS ; Convert Isolation/Precaution
"RTN","FHWORP",47,0)
 S FHORN=$P(FHX1,"^",13) Q:'FHORN
"RTN","FHWORP",48,0)
 S VAL=$G(^OR(100,FHORN,4)),VAL1="" Q:VAL=""!($E(VAL,1)="I")  D VAL(VAL,.VAL1)
"RTN","FHWORP",49,0)
 S DATA="I;"_VAL1
"RTN","FHWORP",50,0)
 D FH^ORCONV3(FHORN,DATA)
"RTN","FHWORP",51,0)
 Q
"RTN","FHWORP",52,0)
KIL K %,%DT,ADM,FHDFN,DATA,EL,FHAO,FHNOW,FHORD,FHORN,FHVAL,FHW1,FHX1,IS,FHKK,N,SDT,TF,TYP,VAL,VAL1,X4,XX,Y
"RTN","FHWORP",53,0)
 Q
"RTN","FHWORP",54,0)
VAL(VAL,FHVAL) ; Translate all up arrows to semicolons
"RTN","FHWORP",55,0)
 S FHVAL=$TR(VAL,"^",";")
"RTN","FHWORP",56,0)
 Q
"RTN","FHWORR")
0^331^B9467558
"RTN","FHWORR",1,0)
FHWORR ; HISC/NCA - Decode HL7 Utility (Cont.) ;1/30/97  14:22
"RTN","FHWORR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWORR",3,0)
GETOR ; Call to Get FHORN
"RTN","FHWORR",4,0)
 F FHD=0:0 S FHD=$O(FHMSG(FHD)) Q:FHD<1  S XX=$G(FHMSG(FHD)) S FHD1=$$RETURN(XX) I FHD1'="" Q
"RTN","FHWORR",5,0)
 S FHORN=FHD1
"RTN","FHWORR",6,0)
 Q
"RTN","FHWORR",7,0)
MSH ; Code MSH message
"RTN","FHWORR",8,0)
 D SITE^FH
"RTN","FHWORR",9,0)
 S MSG(1)="MSH|^~\&|DIETETICS|"_SITE(1)_"|||||ORM"
"RTN","FHWORR",10,0)
 ; code PID
"RTN","FHWORR",11,0)
 S MSG(2)="PID|||"_DFN_"||"_$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHWORR",12,0)
 ; code PV1
"RTN","FHWORR",13,0)
 S WARD=$G(^DPT(DFN,.1)) Q:WARD=""  S FHWRD=$O(^DIC(42,"B",WARD,0)) Q:'FHWRD  S HOSP=+$P($G(^DIC(42,+FHWRD,44)),"^",1) Q:'HOSP  S RM=$G(^DPT(DFN,.108)) S:RM RM=$P($G(^DG(405.4,+RM,0)),"^",1)
"RTN","FHWORR",14,0)
 S MSG(3)="PV1||I|"_HOSP_"^"_RM_"||||||||||||||||"
"RTN","FHWORR",15,0)
 Q
"RTN","FHWORR",16,0)
GADM ; Get the correct Admission number with order.
"RTN","FHWORR",17,0)
 S:ADM'=$P(FILL,";",2) ADM=+$P(FILL,";",2)
"RTN","FHWORR",18,0)
 Q
"RTN","FHWORR",19,0)
RETURN(FHDOR) ; Return FHORN
"RTN","FHWORR",20,0)
 S FHD2=""
"RTN","FHWORR",21,0)
 I $E(FHDOR,1,3)="ORC" S FHD2=$P(FHDOR,"|",3)
"RTN","FHWORR",22,0)
 Q FHD2
"RTN","FHWORR",23,0)
CHK ; Check if Cancelling Discharged
"RTN","FHWORR",24,0)
 S CHK=0 S FHC=$G(FHMSG(3)) I $E(FHC,1,3)'="ORC" Q
"RTN","FHWORR",25,0)
 I $P(FHC,"|",2)="DC"!($P(FHC,"|",2)="CA") S CHK=1,X=$G(FHMSG(3)),ADM=$P(X,"|",4),ADM=+$P(ADM,";",2)
"RTN","FHWORR",26,0)
 Q
"RTN","FHWORR",27,0)
STATUS ; Send Status As Requested
"RTN","FHWORR",28,0)
 I FOR=1 G KIL
"RTN","FHWORR",29,0)
 I FOR=2 D NOW^%DTC S NOW=% S FHORN1=+FHORN D OEU^FHORD71 G KIL
"RTN","FHWORR",30,0)
 I FOR=3 S FHSTS=$P(DATA,"|",6) I FHSTS="IP" S FHSTS="ZE" D STS G KIL
"RTN","FHWORR",31,0)
 I FOR=4 D NOW^%DTC S NOW=% S FHORN1=+FHORN D OEU^FHORD71 G KIL
"RTN","FHWORR",32,0)
 I FOR=5 G KIL
"RTN","FHWORR",33,0)
 G KIL
"RTN","FHWORR",34,0)
STS ; Send Early/Late Tray Status
"RTN","FHWORR",35,0)
 D MSH^FHWOR S $P(MSG(1),"|",9)="ORR"
"RTN","FHWORR",36,0)
 S MSG(3)="ORC|SR|"_FHORN_"|"_FILL_"^FH||"_FHSTS
"RTN","FHWORR",37,0)
 D MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHWORR",38,0)
 Q
"RTN","FHWORR",39,0)
RESUME(DFN) ; Check whether to prompt resume tray
"RTN","FHWORR",40,0)
 ; Return Null for No Current Diet Order in file
"RTN","FHWORR",41,0)
 ; Return 0 for not to prompt the user
"RTN","FHWORR",42,0)
 ; Return 1 to prompt the user
"RTN","FHWORR",43,0)
 ; Return 2 to prompt the user and notify that it's a WITHHOLD SERVICE
"RTN","FHWORR",44,0)
 N ADM,A1,A2,D1,D2,FHLD,FHOR,FHORD,K1,TIM,WARD,X,X1,X2,Y
"RTN","FHWORR",45,0)
 S Y=0 S WARD=$G(^DPT(DFN,.1)) G:WARD="" EXIT
"RTN","FHWORR",46,0)
 S ADM=$G(^DPT("CN",WARD,DFN)) G:ADM<1 EXIT
"RTN","FHWORR",47,0)
 ; Get Diet
"RTN","FHWORR",48,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWORR",49,0)
 S X1=^FHPT(FHDFN,"A",ADM,0),FHORD=$P(X1,"^",2),X1=$P(X1,"^",3),(FHLD,FHOR,X)="",Y=""
"RTN","FHWORR",50,0)
 G:'FHORD EXIT G:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) EXIT
"RTN","FHWORR",51,0)
 ; Set FHOR & FHLD variables
"RTN","FHWORR",52,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7),Y=0
"RTN","FHWORR",53,0)
 G:"^^^^"'[FHOR EXIT
"RTN","FHWORR",54,0)
 G:FHLD="" EXIT
"RTN","FHWORR",55,0)
 D NOW^%DTC S TIM=%
"RTN","FHWORR",56,0)
 S (D1,FHORD)=0 F K1=0:0 S K1=$O(^FHPT(FHDFN,"A",ADM,"AC",K1)) Q:K1<1!(K1>TIM)  S D1=K1
"RTN","FHWORR",57,0)
 G:'D1 EXIT
"RTN","FHWORR",58,0)
S0 ; Set AC cross-ref data field
"RTN","FHWORR",59,0)
 S X2=D1,D2=$O(^FHPT(FHDFN,"A",ADM,"AC",D1)) S:D2<1 D2=""
"RTN","FHWORR",60,0)
S1 S A2=0 F A1=0:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1<1!(A1'<X2)  S A2=A1
"RTN","FHWORR",61,0)
 I A2 S X2=A2,A2=$P(^FHPT(FHDFN,"A",ADM,"AC",A2,0),"^",2),X1=$P(^FHPT(FHDFN,"A",ADM,"DI",A2,0),"^",10) I X1'="",X1'>D1 G S1
"RTN","FHWORR",62,0)
 G:'A2 EXIT
"RTN","FHWORR",63,0)
 S X=$G(^FHPT(FHDFN,"A",ADM,"DI",A2,0)),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHWORR",64,0)
 I "^^^^"'[FHOR S Y=1 G EXIT
"RTN","FHWORR",65,0)
 I FHLD="N" S Y=2 G EXIT
"RTN","FHWORR",66,0)
EXIT Q Y
"RTN","FHWORR",67,0)
KIL D KIL^FHWOR K FHORN1,FHSTS Q
"RTN","FHWTRN")
0^332^B4252356
"RTN","FHWTRN",1,0)
FHWTRN ; HISC/REL - Process Transfers ;3/17/92  14:39
"RTN","FHWTRN",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHWTRN",3,0)
 I FHOLD="" G T0
"RTN","FHWTRN",4,0)
 ; Edit,Delete Transfers
"RTN","FHWTRN",5,0)
 I $P(FHOLD,"^",18)=$P(FHNEW,"^",18) G EX
"RTN","FHWTRN",6,0)
 S XT=$P(FHOLD,"^",18)
"RTN","FHWTRN",7,0)
 I "^1^2^3^"[("^"_XT_"^") D RET
"RTN","FHWTRN",8,0)
 I "^22^23^24^"[("^"_XT_"^") D PASS
"RTN","FHWTRN",9,0)
T0 S XT=$P(FHNEW,"^",18)
"RTN","FHWTRN",10,0)
 I "^1^2^3^"[("^"_XT_"^") D PASS
"RTN","FHWTRN",11,0)
 I "^22^23^24^"[("^"_XT_"^") D RET
"RTN","FHWTRN",12,0)
EX D WRD^FHWADM G KIL
"RTN","FHWTRN",13,0)
PASS ; Place on Pass
"RTN","FHWTRN",14,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWTRN",15,0)
 D SET Q:FHLD="P"  Q:'$D(^FHPT(FHDFN,"A",ADM))
"RTN","FHWTRN",16,0)
 S FHOR="^^^^",FHLD="P",TYP="",D1=X1,D2="",D4=0,COM="" D STR^FHORD7 Q
"RTN","FHWTRN",17,0)
RET ; Remove from Pass
"RTN","FHWTRN",18,0)
 D SET I FHLD'="P",FHLD'="X" Q
"RTN","FHWTRN",19,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),D1=$P(X,"^",9),D2=$S(D1'>X1:X1,1:D1)
"RTN","FHWTRN",20,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",10)=D2
"RTN","FHWTRN",21,0)
 S A2=0 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK>X1)  S A2=KK
"RTN","FHWTRN",22,0)
 Q:'A2  Q:$P(^FHPT(FHDFN,"A",ADM,"AC",A2,0),"^",2)'=FHORD
"RTN","FHWTRN",23,0)
 F K9=A2-.000001:0 S K9=$O(^FHPT(FHDFN,"A",ADM,"AC",K9)) Q:K9<1  I $P(^(K9,0),"^",2)=FHORD S D1=K9 D S0^FHORD3
"RTN","FHWTRN",24,0)
 D UPD^FHORD7 Q
"RTN","FHWTRN",25,0)
SET D NOW^%DTC S NOW=%,DT=%\1,FHPV=DUZ,FHWF=$S($D(^ORD(101)):1,1:0)
"RTN","FHWTRN",26,0)
 S X=$P($G(^DGPM(ADM,0)),"^",1),X1=$S(X'>NOW:NOW,1:X)
"RTN","FHWTRN",27,0)
 S A1=0,(FHOR,FHLD)="" F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK>X1)  S A1=KK
"RTN","FHWTRN",28,0)
 Q:'A1  S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2),X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7) Q
"RTN","FHWTRN",29,0)
KIL K %,%DT,A1,A2,COM,D1,D2,D4,FHDU,FHLD,FHOR,FHPV,FHX1,FHX2,FHX3,K,K9,KK,NOW,FHORD,TYP,X,X1,X2,X9 Q
"RTN","FHXCNV")
0^333^B4289580
"RTN","FHXCNV",1,0)
FHXCNV ; HISC/REL - Convert OE/RR to MAS 5 Admissions ;11/17/90  13:09
"RTN","FHXCNV",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXCNV",3,0)
 S CUT="",ORIFN=$O(^OR(100,0)) I ORIFN>0 S CUT=$P($G(^OR(100,ORIFN,0)),"^",7)
"RTN","FHXCNV",4,0)
 I CUT<1 W !!,"There do not appear to be any OE/RR orders. Conversion NOT necessary.",!! Q
"RTN","FHXCNV",5,0)
 S Y=CUT,CUT=CUT\1 X ^DD("DD") W !!,"The first OE/RR order was entered ",Y
"RTN","FHXCNV",6,0)
 W !,"Admissions not discharged before this date will be converted.",!
"RTN","FHXCNV",7,0)
 F FHDFN=.9:0 S FHDFN=$O(^FHPT(FHDFN)) Q:FHDFN<1  F ADM=0:0 S ADM=$O(^FHPT(FHDFN,"A",ADM)) Q:ADM<1  D ADM
"RTN","FHXCNV",8,0)
KIL K CUT,FHDFN,DFN,ADM,FHDR,ORIFN,Y Q
"RTN","FHXCNV",9,0)
ADM S Y=$P($G(^DGPM(ADM,0)),"^",17) S:Y>0 Y=$P($G(^DGPM(+Y,0)),"^",1)
"RTN","FHXCNV",10,0)
 I Y,Y<CUT Q
"RTN","FHXCNV",11,0)
 S ORIFN=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",13) I ORIFN>0 D SET
"RTN","FHXCNV",12,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"DI",FHDR)) Q:FHDR<1  S ORIFN=$P($G(^(FHDR,0)),"^",14) I ORIFN>0 D SET
"RTN","FHXCNV",13,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"OO",FHDR)) Q:FHDR<1  S ORIFN=$P($G(^(FHDR,0)),"^",8) I ORIFN>0 D SET
"RTN","FHXCNV",14,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"EL",FHDR)) Q:FHDR<1  S ORIFN=$P($G(^(FHDR,0)),"^",7) I ORIFN>0 D SET
"RTN","FHXCNV",15,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"DR",FHDR)) Q:FHDR<1  S ORIFN=$P($G(^(FHDR,0)),"^",13) I ORIFN>0 D SET
"RTN","FHXCNV",16,0)
 F FHDR=0:0 S FHDR=$O(^FHPT(FHDFN,"A",ADM,"TF",FHDR)) Q:FHDR<1  S ORIFN=$P($G(^(FHDR,0)),"^",14) I ORIFN>0 D SET
"RTN","FHXCNV",17,0)
 Q
"RTN","FHXCNV",18,0)
SET I $D(^OR(100,ORIFN,4)) S $P(^(4),"^",1)=ADM
"RTN","FHXCNV",19,0)
 Q
"RTN","FHXDB")
0^334^B19045456
"RTN","FHXDB",1,0)
FHXDB ; HISC/REL - Verify data base pointers ;5/14/93  15:50 
"RTN","FHXDB",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXDB",3,0)
PAT R !!,"Verify Patient data (ALL, INPATIENTS, NONE): ",PAT:DTIME G:'$T!("^"[PAT) KIL S X=PAT D TR^FH S PAT=X I $P("ALL",PAT,1)'="",$P("INPATIENTS",PAT,1)'="",$P("NONE",PAT,1)'="" W *7,"  Enter A, I or N" G PAT
"RTN","FHXDB",4,0)
 S PAT=$E(PAT,1)
"RTN","FHXDB",5,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP I POP G KIL
"RTN","FHXDB",6,0)
 I $D(IO("Q")) S FHPGM="Q1^FHXDB",FHLST="PAT" D EN2^FH G KIL
"RTN","FHXDB",7,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHXDB",8,0)
Q1 ; Process verifying pointer structures
"RTN","FHXDB",9,0)
 W:$E(IOST,1,2)="C-" @IOF W !!,"VERIFICATION OF DIETETIC POINTER STRUCTURES"
"RTN","FHXDB",10,0)
 W !!,"Verifying file 111 - Diets"
"RTN","FHXDB",11,0)
 F K=0:0 S K=$O(^FH(111,K)) Q:K<1  S N=$P(^(K,0),"^",5) I N,'$D(^FH(116.2,N,0))#2 W !?5,"Production diet ",N," missing from Diet ",K," - ",$P(^FH(111,K,0),"^",1)
"RTN","FHXDB",12,0)
 W !!,"Verifying file 112.6 - User Menu"
"RTN","FHXDB",13,0)
 F K=0:0 S K=$O(^FHUM(K)) Q:K<1  F L=0:0 S L=$O(^FHUM(K,1,L)) Q:L<1  D U0
"RTN","FHXDB",14,0)
 W !!,"Verifying file 115.2 - Food Preferences"
"RTN","FHXDB",15,0)
 F K=0:0 S K=$O(^FH(115.2,K)) Q:K<1  D FP
"RTN","FHXDB",16,0)
 W !!,"Verifying file 115.7 - Dietetic Encounters"
"RTN","FHXDB",17,0)
 F K=0:0 S K=$O(^FHEN(K)) Q:K<1  D EN
"RTN","FHXDB",18,0)
 W !!,"Verifying file 116.2 - Production Diets"
"RTN","FHXDB",19,0)
 F K=0:0 S K=$O(^FH(116.2,K)) Q:K<1  D P0
"RTN","FHXDB",20,0)
 W !!,"Verifying file 118 - Supplemental Feedings"
"RTN","FHXDB",21,0)
 F K=0:0 S K=$O(^FH(118,K)) Q:K<1  D:K'=1 S0
"RTN","FHXDB",22,0)
 W !!,"Verifying file 118.1 - Supplemental Feeding Menu"
"RTN","FHXDB",23,0)
 F K=0:0 S K=$O(^FH(118.1,K)) Q:K<1  D S1
"RTN","FHXDB",24,0)
 W !!,"Verifying file 118.2 - Tubefeeding"
"RTN","FHXDB",25,0)
 F K=0:0 S K=$O(^FH(118.2,K)) Q:K<1  D TF
"RTN","FHXDB",26,0)
 W !!,"Verifying file 119.6 - Dietetics Ward"
"RTN","FHXDB",27,0)
 F K=0:0 S K=$O(^FH(119.6,K)) Q:K<1  D W0
"RTN","FHXDB",28,0)
 G ^FHXDB1
"RTN","FHXDB",29,0)
S1 S X=$G(^FH(118.1,K,1))
"RTN","FHXDB",30,0)
 F L=1:2:23 S N=$P(X,"^",L) I N,'$D(^FH(118,N,0))#2 W !?5,"Supp. Feeding ",N," missing in Menu ",K," - ",$P(^FH(118,K,0),"^",1)
"RTN","FHXDB",31,0)
 Q
"RTN","FHXDB",32,0)
U0 F M=0:0 S M=$O(^FHUM(K,1,L,1,M)) Q:M<1  F N=0:0 S N=$O(^FHUM(K,1,L,1,M,1,N)) Q:N<1  S X=+^(N,0) I '$D(^FHNU(X,0))#2 W !?5,"Nutrient item ",X," missing in User Menu ",K," day ",L," meal ",M," - ",$P(^FHUM(K,0),"^",1)
"RTN","FHXDB",33,0)
 Q
"RTN","FHXDB",34,0)
FP S X=$P($G(^FH(115.2,K,0)),"^",4)
"RTN","FHXDB",35,0)
 I X,'$D(^FH(114,X,0))#2 W !?5,"Recipe ",X," missing in Food Preference ",K," - ",$P(^FH(115.2,K,0),"^",1)
"RTN","FHXDB",36,0)
 F L=0:0 S L=$O(^FH(115.2,K,"X",L)) Q:L<1  S N=+^(L,0) I '$D(^FH(114,N,0))#2 W !?5,"Recipe ",N," missing in Excluded Food Preference ",K," - ",$P(^FH(115.2,K,0),"^",1)
"RTN","FHXDB",37,0)
 Q
"RTN","FHXDB",38,0)
EN S X=$P($G(^FHEN(K,0)),"^",4)
"RTN","FHXDB",39,0)
 I X,'$D(^FH(115.6,X,0))#2 W !?5,"Encounter Type ",X," missing in Dietetic Encounters ",K
"RTN","FHXDB",40,0)
 Q
"RTN","FHXDB",41,0)
W0 S X=^FH(119.6,K,0) F L=5,6 S N=$P(X,"^",L) I N,'$D(^FH(119.72,N,0))#2 W !?5,"Service Point ",N," missing in Ward File ",K," - ",$P(^FH(119.6,K,0),"^",1)
"RTN","FHXDB",42,0)
 S N=$P(X,"^",9) I N,'$D(^FH(119.74,N,0))#2 W !?5,"Supplemental Fdg. Site ",N," missing in Ward File ",K," - ",$P(^FH(119.6,K,0),"^",1)
"RTN","FHXDB",43,0)
 S N=$P(X,"^",8) I N,'$D(^FH(119.73,N,0))#2 W !?5,"Communication Office ",N," missing in Ward File ",K," - ",$P(^FH(119.6,K,0),"^",1)
"RTN","FHXDB",44,0)
 S N=$P(X,"^",15) I N,'$D(^FH(111,N,0))#2 W !?5,"Diet ",N," missing from Ward File ",K," - ",$P(^FH(119.6,K,0),"^",1)
"RTN","FHXDB",45,0)
 F L=0:0 S L=$O(^FH(119.6,K,"BN",L)) Q:L<1  S N=+^(L,0) I '$D(^FH(118,N,0))#2 W !?5,"Supp. Feeding ",N,"missing in Ward File ",K," - ",$P(^FH(119.6,K,0),"^",1)
"RTN","FHXDB",46,0)
 Q
"RTN","FHXDB",47,0)
P0 F L=0:0 S L=$O(^FH(116.2,K,"R",L)) Q:L<1  S N=+^(L,0) I '$D(^FH(116.2,N,0))#2 W !?5,"Singular Production Diet ",N," missing in Prod. Diet ",K," - ",$P(^FH(116.2,K,0),"^",1)
"RTN","FHXDB",48,0)
 Q
"RTN","FHXDB",49,0)
S0 S X=$P($G(^FH(118,K,0)),"^",7)
"RTN","FHXDB",50,0)
 I '$D(^FH(114,+X,0))#2 W !?5,"Recipe ",X," missing in Supplemental Feeding ",K," - ",$P(^FH(118,K,0),"^",1)
"RTN","FHXDB",51,0)
 Q
"RTN","FHXDB",52,0)
TF S X=$P($G(^FH(118.2,K,0)),"^",7)
"RTN","FHXDB",53,0)
 I '$D(^FH(114,+X,0))#2 W !?5,"Recipe ",X," missing in Tubefeeding ",K," - ",$P(^FH(118.2,K,0),"^",1)
"RTN","FHXDB",54,0)
 Q
"RTN","FHXDB",55,0)
KIL G KILL^XUSCLEAN
"RTN","FHXDB1")
0^335^B20944830
"RTN","FHXDB1",1,0)
FHXDB1 ; HISC/REL/NCA - Verify data base pointers (cont.) ;12/13/91  14:00 
"RTN","FHXDB1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXDB1",3,0)
 W !!,"Verifying file 119.71 - Production Facility"
"RTN","FHXDB1",4,0)
 W !!,"Verifying file 119.72 - Service Point"
"RTN","FHXDB1",5,0)
 F K=0:0 S K=$O(^FH(119.7,K)) Q:K<1  D D0
"RTN","FHXDB1",6,0)
 W !!,"Verifying file 119.73 - Communication Office"
"RTN","FHXDB1",7,0)
 W !!,"Verifying file 119.74 - Supplemental Feeding Site"
"RTN","FHXDB1",8,0)
 F K=0:0 S K=$O(^FH(119.74,K)) Q:K<1  D SF
"RTN","FHXDB1",9,0)
 W !!,"Verifying file 119.9 - Site Paramaters"
"RTN","FHXDB1",10,0)
 W !!,"Verifying file 113 - Ingredients"
"RTN","FHXDB1",11,0)
 F K=0:0 S K=$O(^FHING(K)) Q:K<1  D I0
"RTN","FHXDB1",12,0)
 W !!,"Verifying file 114 - Recipes"
"RTN","FHXDB1",13,0)
 F K=0:0 S K=$O(^FH(114,K)) Q:K<1  D R1
"RTN","FHXDB1",14,0)
 W !!,"Verifying file 116 - Menu Cycle"
"RTN","FHXDB1",15,0)
 F K=0:0 S K=$O(^FH(116,K)) Q:K<1  D C0
"RTN","FHXDB1",16,0)
 W !!,"Verifying file 116.1 - Meals"
"RTN","FHXDB1",17,0)
 F K=0:0 S K=$O(^FH(116.1,K)) Q:K<1  D R2
"RTN","FHXDB1",18,0)
 W !!,"Verifying file 116.3 - Holiday Meals"
"RTN","FHXDB1",19,0)
 F K=0:0 S K=$O(^FH(116.3,K)) Q:K<1  D C1
"RTN","FHXDB1",20,0)
 G ^FHXDB2
"RTN","FHXDB1",21,0)
I0 S X=^FHING(K,0),N=$P(X,"^",4) I N,'$D(^FH(113.2,N,0))#2 W !?5,"Vendor ",N," missing from Ingredient ",K," - ",$P(X,"^",1)
"RTN","FHXDB1",22,0)
 S N=$P(X,"^",12) I N,'$D(^FH(113.1,N,0))#2 W !?5,"Storage Location ",N," missing from Ingredient ",K," - ",$P(X,"^",1)
"RTN","FHXDB1",23,0)
 ;S N=$P(X,"^",21) I N,'$D(^FH(112,N,0))#2 W !?5,"Default Nutrient ",N," missing from Ingredient ",K," - ",$P(X,"^",1)
"RTN","FHXDB1",24,0)
 Q
"RTN","FHXDB1",25,0)
C0 F L=0:0 S L=$O(^FH(116,K,"DA",L)) Q:L<1  S X=^(L,0) F M=2:1:4 S N=$P(X,"^",M) I N,'$D(^FH(116.1,N,0))#2 W !?5,"Meal ",N," missing in Cycle ",K," Day ",L," - ",$P(^FH(116,K,0),"^",1)
"RTN","FHXDB1",26,0)
 Q
"RTN","FHXDB1",27,0)
C1 S X=^FH(116.3,K,0) F L=2:1:4 S N=$P(X,"^",L) I N,'$D(^FH(116.1,N,0))#2 W !?5,"Meal ",N," missing in Holiday Meals ",$E(K,4,5),"/",$E(K,6,7),"/",$E(K,2,3)," - ",$P(^FH(116.3,K,0),"^",5)
"RTN","FHXDB1",28,0)
 Q
"RTN","FHXDB1",29,0)
D0 F L=0:0 S L=$O(^FH(119.72,K,"A",L)) Q:L<1  S N=+^(L,0) I '$D(^FH(116.2,N,0))#2 W !?5,"Prod. Diet ",N," missing from Service Point ",K," - ",$P(^FH(119.72,K,0),"^",1)
"RTN","FHXDB1",30,0)
 F L=0:0 S L=$O(^FH(119.72,K,"B",L)) Q:L<1  S N=+^(L,0) I '$D(^FH(116.2,N,0))#2 W !?5,"Prod. Diet ",N," missing from Service Point ",K," - ",$P(^FH(119.72,K,0),"^",1)
"RTN","FHXDB1",31,0)
 S X=$G(^FH(119.72,K,0))
"RTN","FHXDB1",32,0)
 S N=$P(X,"^",3) I N,'$D(^FH(119.71,N,0))#2 W !?5,"Production Facility ",N," missing from Service Point ",K," - ",$P(^FH(119.72,K,0),"^",1)
"RTN","FHXDB1",33,0)
 Q
"RTN","FHXDB1",34,0)
SF S N=$P(^FH(119.74,K,0),"^",3) I N,'$D(^FH(119.71,N,0))#2 W !?5,"Production Facility ",N," missing from Supplemental Fdg. Site ",K," - ",$P(^FH(119.74,K,0),"^",1)
"RTN","FHXDB1",35,0)
 Q
"RTN","FHXDB1",36,0)
R1 F L=0:0 S L=$O(^FH(114,K,"I",L)) Q:L<1  S N=+^(L,0) I '$D(^FHING(N,0))#2 W !?5,"Ingredient ",N," missing in Recipe ",K," - ",$P(^FH(114,K,0),"^",1)
"RTN","FHXDB1",37,0)
 F L=0:0 S L=$O(^FH(114,K,"R",L)) Q:L<1  S N=+^(L,0) I '$D(^FH(114,N,0))#2 W !?5,"Embedded recipe ",N," missing in Recipe ",K," - ",$P(^FH(114,K,0),"^",1)
"RTN","FHXDB1",38,0)
 S X=^FH(114,K,0)
"RTN","FHXDB1",39,0)
 F L=0:0 S L=$O(^FH(114,K,"E",L)) Q:L<1  S N=+^(L,0) I '$D(^FH(114.4,N,0))#2 W !?5,"Equipment ",N," missing in Recipe ",K," - ",$P(X,"^",1)
"RTN","FHXDB1",40,0)
 S N=$P(X,"^",6) I N,'$D(^FH(114.3,N,0))#2 W !?5,"Serving Utensil ",N," missing in Recipe ",K," - ",$P(X,"^",1)
"RTN","FHXDB1",41,0)
 S N=$P(X,"^",7) I N,'$D(^FH(114.1,N,0))#2 W !?5,"Recipe Category ",N," missing in Recipe ",K," - ",$P(X,"^",1)
"RTN","FHXDB1",42,0)
 S N=$P(X,"^",12) I N,'$D(^FH(114.2,N,0))#2 W !?5,"Preparation Area ",N," missing in Recipe ",K," - ",$P(X,"^",1)
"RTN","FHXDB1",43,0)
 Q
"RTN","FHXDB1",44,0)
R2 F L=0:0 S L=$O(^FH(116.1,K,"RE",L)) Q:L<1  S N=+^(L,0) D:$D(^FH(116.1,K,"RE",L,"D")) R3 I '$D(^FH(114,N,0))#2 W !?5,"Recipe ",N," missing in Meal ",K," - ",$P(^FH(116.1,K,0),"^",1)
"RTN","FHXDB1",45,0)
 Q
"RTN","FHXDB1",46,0)
R3 F X9=0:0 S X9=$O(^FH(116.1,K,"RE",L,"D",X9)) Q:X9<1  I '$D(^FH(119.72,X9)) W !?5,"Service Point ",X9," missing in Meal ",$P(^FH(116.1,K,0),"^",1),", Recipe ",$S($D(^FH(114,N,0)):$P(^(0),"^",1),1:N)
"RTN","FHXDB1",47,0)
 Q:'$D(^FH(116.1,K,"RE",L,"R"))
"RTN","FHXDB1",48,0)
 F CAT=0:0 S CAT=$O(^FH(116.1,K,"RE",L,"R",CAT)) Q:CAT<1  S MCA=+^(CAT,0) I '$D(^FH(114.1,MCA,0)) W !?5,"Recipe Category ",CAT," missing in Meal ",$P(^FH(116.1,K,0),"^",1),", Recipe ",$S($D(^FH(114,N,0)):$P(^(0),"^",1),1:N)
"RTN","FHXDB1",49,0)
 Q
"RTN","FHXDB2")
0^336^B12453403
"RTN","FHXDB2",1,0)
FHXDB2 ; HISC/REL - Verify patient data base ;11/27/91  13:00 
"RTN","FHXDB2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXDB2",3,0)
 D ALL:PAT="A",INP:PAT="I" W !!,"***** D O N E *****",! Q
"RTN","FHXDB2",4,0)
ALL W !!,"Verifying Patient data base ^FHPT for ALL Patients & Admissions",!
"RTN","FHXDB2",5,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT(FHDFN)) Q:FHDFN<1  D PATNAME^FHOMUTL Q:DFN=""  D PAT F ADM=0:0 S ADM=$O(^FHPT(FHDFN,"A",ADM)) Q:ADM<1  D ADM
"RTN","FHXDB2",6,0)
 Q
"RTN","FHXDB2",7,0)
INP W !!,"Verifying Patient data base ^FHPT for Current Inpatients Only",!
"RTN","FHXDB2",8,0)
 S WRD="" F M=0:0 S WRD=$O(^DPT("CN",WRD)) Q:WRD=""  F DFN=0:0 S DFN=$O(^DPT("CN",WRD,DFN)) Q:DFN<1  S FHZ115="P"_DFN D CHECK^FHOMDPA Q:FHDFN=""  D PAT S ADM=^DPT("CN",WRD,DFN) Q:ADM<1  D ADM
"RTN","FHXDB2",9,0)
 Q
"RTN","FHXDB2",10,0)
PAT S ERR=0
"RTN","FHXDB2",11,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=+^(K,0) I '$D(^FH(115.2,X,0))#2 W !,$P(^DPT(DFN,0),"^",1)," - missing Food Preference ",X
"RTN","FHXDB2",12,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"N",K)) Q:K<1  S X=^(K,0) D P1
"RTN","FHXDB2",13,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"S",K)) Q:K<1  S X=$P(^(K,0),"^",2) I X,'$D(^FH(115.4,X,0))#2 W !,$P(^DPT(DFN,0),"^",1)," - missing Nutrition Status ",X
"RTN","FHXDB2",14,0)
 Q
"RTN","FHXDB2",15,0)
P1 S N=$P(X,"^",19) I N,'$D(^FH(115.4,N,0))#2 W !,$P(^DPT(DFN,0),"^",1)," - missing Nutrition Status ",N
"RTN","FHXDB2",16,0)
 S N=$P(X,"^",20) I N,'$D(^FH(115.3,N,0))#2 W !,$P(^DPT(DFN,0),"^",1)," - missing Nutrition Classification ",N
"RTN","FHXDB2",17,0)
 Q
"RTN","FHXDB2",18,0)
ADM S ERR=0
"RTN","FHXDB2",19,0)
 S N=$P(^FHPT(FHDFN,"A",ADM,0),"^",10) I N,'$D(^FH(119.4,N,0))#2 D HDR W !?5,"Isolation ",N," missing."
"RTN","FHXDB2",20,0)
 S N=$P(^FHPT(FHDFN,"A",ADM,0),"^",8) I N,'$D(^FH(119.6,N,0))#2 D HDR W !?5,"Dietetic Ward ",N," missing."
"RTN","FHXDB2",21,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"DI",K)) Q:K<1  S X=^(K,0) D DI
"RTN","FHXDB2",22,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"SF",K)) Q:K<1  S X=^(K,0) D SF
"RTN","FHXDB2",23,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"TF",K)) Q:K<1  F L=0:0 S L=$O(^FHPT(FHDFN,"A",ADM,"TF",K,"P",L)) Q:L<1  S N=+^(L,0) D TF
"RTN","FHXDB2",24,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"SP",K)) Q:K<1  S N=+$P(^(K,0),"^",2) D SP
"RTN","FHXDB2",25,0)
 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"DR",K)) Q:K<1  S N=+$P(^(K,0),"^",2) D DR
"RTN","FHXDB2",26,0)
 Q
"RTN","FHXDB2",27,0)
HDR Q:ERR  W !,$P(^DPT(DFN,0),"^",1),?40,"Admission: ",ADM S ERR=1 Q
"RTN","FHXDB2",28,0)
DI F L=2:1:6 S N=$P(X,"^",L) I N,'$D(^FH(111,N,0))#2 D HDR W !?5,"Diet ",N," missing in Diet Order ",K
"RTN","FHXDB2",29,0)
 S N=$P(X,"^",13) I N,'$D(^FH(116.2,N,0))#2 D HDR W !?5,"Prod. Diet ",N," missing in Diet Order ",K
"RTN","FHXDB2",30,0)
 Q
"RTN","FHXDB2",31,0)
SF F L=5:2:27 S N=$P(X,"^",L) I N,'$D(^FH(118,N,0))#2 D HDR W !?5,"Supp. Feeding Item ",N," missing from SF Order ",K
"RTN","FHXDB2",32,0)
 S N=$P(X,"^",4) I N,'$D(^FH(118.1,N,0))#2 D HDR W !?5,"Supp. Feeding Menu ",N," missing from SF Order ",K
"RTN","FHXDB2",33,0)
 Q
"RTN","FHXDB2",34,0)
TF I '$D(^FH(118.2,N,0))#2 D HDR W !?5,"Tubefeeding Product ",N," missing from Tubefeeding Order ",K
"RTN","FHXDB2",35,0)
 Q
"RTN","FHXDB2",36,0)
SP I '$D(^FH(118.3,N,0))#2 D HDR W !?5,"Standing Order Item ",N," missing from Standing Order # ",K
"RTN","FHXDB2",37,0)
 Q
"RTN","FHXDB2",38,0)
DR I '$D(^FH(119.5,N,0))#2 D HDR W !?5,"Diet Consult ",N," missing from Consult Order # ",K
"RTN","FHXDB2",39,0)
 Q
"RTN","FHXIN")
0^337^B3430781
"RTN","FHXIN",1,0)
FHXIN ; HISC/REL - Create FHPT File ;2/23/00  09:54
"RTN","FHXIN",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXIN",3,0)
 S U="^" D DT^DICRW
"RTN","FHXIN",4,0)
 I '$D(^FH(119.9,1,0)) W !!,"Set up initial Site Parameter File" K DIC,DD,DO D SITE^FH S DIC="^FH(119.9,",DIC(0)="L",DLAYGO=119.9,X=SITE(1),DINUM=1 D FILE^DICN K DIC,DLAYGO,DINUM
"RTN","FHXIN",5,0)
 I $P(^FH(115.6,0),"^",3)<50 S $P(^(0),"^",3)=50
"RTN","FHXIN",6,0)
R6 K ADM,FHDFN,DFN,DIC,DINUM,DMAX,KK,KKK,WRD,X,Y Q
"RTN","FHXIN",7,0)
EN1 S WRD=""
"RTN","FHXIN",8,0)
F1 S WRD=$O(^DPT("CN",WRD)) I WRD="" W !!,"  ... done." K ADM,D,FHDFN,DFN,I,WRD,X,Y Q
"RTN","FHXIN",9,0)
 S DFN=""
"RTN","FHXIN",10,0)
F2 S DFN=$O(^DPT("CN",WRD,DFN)) G:DFN="" F1 S ADM=^(DFN) G:ADM<1 ERR
"RTN","FHXIN",11,0)
 G:'$D(^DGPM(ADM,0)) ERR S X=$P(^(0),"^",1)
"RTN","FHXIN",12,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHXIN",13,0)
 I '$D(^FHPT(FHDFN)) S ^FHPT(FHDFN,0)="P"_DFN,$P(^FHPT(FHDFN,0),U,3)=DFN,$P(^FHPT(0),"^",3)=FHDFN,$P(^FHPT(0),"^",4)=$P(^(0),"^",4)+1
"RTN","FHXIN",14,0)
 I '$D(^FHPT(FHDFN,"A",0)) S ^FHPT(FHDFN,"A",0)="^115.01^^"
"RTN","FHXIN",15,0)
 I $D(^FHPT(FHDFN,"A",ADM)) S $P(^(ADM,0),"^",1)=X G F2
"RTN","FHXIN",16,0)
 S $P(^FHPT(FHDFN,"A",0),"^",3)=ADM,$P(^(0),"^",4)=$P(^(0),"^",4)+1
"RTN","FHXIN",17,0)
 S ^FHPT(FHDFN,"A",ADM,0)=X_"^^^^^^^^^^^" D WRD^FHWADM G F2
"RTN","FHXIN",18,0)
ERR W !!,"Error for FHDFN ",FHDFN," - Admission not Found" G F2
"RTN","FHXMOV")
0^338^B13633003
"RTN","FHXMOV",1,0)
FHXMOV ; HISC/NCA - Process Annual Report Movement ;4/8/94  09:03
"RTN","FHXMOV",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXMOV",3,0)
EN1 ; Move Data for Facility Profile in all four qtrs
"RTN","FHXMOV",4,0)
 W !!,"Annual Report Data Conversion"
"RTN","FHXMOV",5,0)
 K FHN F PRE=0:0 S PRE=$O(^FH(117.3,PRE)) Q:PRE<1  S STG=$G(^(PRE,0)),STG1=$G(^(1)),STG2=$G(^(3)) D MOV
"RTN","FHXMOV",6,0)
 F FNOD=0:0 S FNOD=$O(FHN(FNOD)) Q:FNOD<1  F QTR=1:1:4 S PRE=FNOD_QTR_"00",STG=$G(^FH(117.3,PRE,0)),STG1=$G(^FH(117.3,PRE,1)),STG2=$G(^FH(117.3,PRE,3)) D CHK
"RTN","FHXMOV",7,0)
 W !!,"Removal of Dietetic Survey Entries"
"RTN","FHXMOV",8,0)
 K DA,DIK,DIU S DIU=117.334,DIU(0)="SD" D EN^DIU2 S DIK="^DD(117.3,",DA(1)=117.3,DA=34 D ^DIK
"RTN","FHXMOV",9,0)
 K DA,DIK,DIU S DIU=117.335,DIU(0)="SD" D EN^DIU2 S DIK="^DD(117.3,",DA(1)=117.3,DA=35 D ^DIK
"RTN","FHXMOV",10,0)
 K DA,DIK,DIU S DIU=117.336,DIU(0)="SD" D EN^DIU2 S DIK="^DD(117.3,",DA(1)=117.3,DA=36 D ^DIK
"RTN","FHXMOV",11,0)
 K DA,DIK,DIU S DIU=117.337,DIU(0)="SD" D EN^DIU2 S DIK="^DD(117.3,",DA(1)=117.3,DA=37 D ^DIK
"RTN","FHXMOV",12,0)
 K %,%H,%I,%T,DA,DIK,DIU,FHN,FNOD,I,J,K2,K3,LP,LST,PRE,STG,STG1,STG2,STR,TIT,TRN,QTR,X,XX,Z,Z1,ZZ Q
"RTN","FHXMOV",13,0)
MOV ; Process Moving Data
"RTN","FHXMOV",14,0)
 S FNOD=$E(PRE,1,4)
"RTN","FHXMOV",15,0)
 I "^^^^^^^^^^"'[$P(STG,"^",2,12) S FHN(FNOD,1)=STG
"RTN","FHXMOV",16,0)
 I "^^"'[$P(STG,"^",14,16) S FHN(FNOD,2)=$P(STG,"^",14,16)
"RTN","FHXMOV",17,0)
 I "^^^"'[$P(STG1,"^",14,17) S FHN(FNOD,3)=$P(STG1,"^",14,17)
"RTN","FHXMOV",18,0)
 I "^^^^^^"'[$P(STG2,"^",2,8) S FHN(FNOD,4)=$P(STG2,"^",2,8)
"RTN","FHXMOV",19,0)
 I $P(STG2,"^",1)'="" S FHN(FNOD,5)=$P(STG2,"^",1)
"RTN","FHXMOV",20,0)
 F TIT="AREA","DELV","EQUI","SPEC" D
"RTN","FHXMOV",21,0)
 .I $O(^FH(117.3,PRE,TIT,0))>0 D
"RTN","FHXMOV",22,0)
 ..I $O(FHN(FNOD,TIT,0))>0 K FHN(FNOD,TIT)
"RTN","FHXMOV",23,0)
 ..S STR="" F K2=0:0 S K2=$O(^FH(117.3,PRE,TIT,K2)) Q:K2<1  S STR=$G(^(K2,0)),FHN(FNOD,TIT,K2)=STR
"RTN","FHXMOV",24,0)
 ..Q
"RTN","FHXMOV",25,0)
 .Q
"RTN","FHXMOV",26,0)
 F LST="SURV1","TEMP" D
"RTN","FHXMOV",27,0)
 .S TRN=$S(LST="SURV1":"OVA",1:"TEM")
"RTN","FHXMOV",28,0)
 .Q:'$D(^FH(117.3,PRE,LST,0))
"RTN","FHXMOV",29,0)
 .F LP=0:0 S LP=$O(^FH(117.3,PRE,LST,LP)) Q:LP<1  S ZZ=$P($G(^(LP,0)),"^",2,25) I "^^^^^^^^^^^^^^^^^^^^^^^"'[ZZ D
"RTN","FHXMOV",30,0)
 ..I '$D(^FH(117.3,PRE,TRN,0)) S ^FH(117.3,PRE,TRN,0)=$S(TRN="TEM":"^117.31^^",1:"^117.366^^")
"RTN","FHXMOV",31,0)
 ..S XX=$TR(ZZ,"^"," "),J=1,Z1=""
"RTN","FHXMOV",32,0)
 ..F I=1:1:6 S:Z1'="" Z1=Z1_"^" S Z1=Z1_$S($P(XX," ",J):"V"_$P(XX," ",J),1:"")_$S($P(XX," ",J+1):" G"_$P(XX," ",J+1),1:"")_$S($P(XX," ",J+2):" F"_$P(XX," ",J+2),1:"")_$S($P(XX," ",J+3):" P"_$P(XX," ",J+3),1:"") S J=J+4
"RTN","FHXMOV",33,0)
 ..Q:$D(^FH(117.3,PRE,TRN,LP,0))
"RTN","FHXMOV",34,0)
 ..S Z=$G(^FH(117.3,PRE,TRN,0))
"RTN","FHXMOV",35,0)
 ..S $P(^FH(117.3,PRE,TRN,0),"^",3,4)=LP_"^"_($P(Z,"^",4)+1)
"RTN","FHXMOV",36,0)
 ..S ^FH(117.3,PRE,TRN,LP,0)=LP_"^"_Z1,^FH(117.3,PRE,TRN,"B",LP,LP)=""
"RTN","FHXMOV",37,0)
 ..Q
"RTN","FHXMOV",38,0)
 .Q
"RTN","FHXMOV",39,0)
 Q
"RTN","FHXMOV",40,0)
CHK ; Check to store Data Moved
"RTN","FHXMOV",41,0)
 I STG="" S $P(^FH(117.3,PRE,0),"^",1)=PRE,^FH(117.3,"B",PRE,PRE)="",Z=$G(^FH(117.3,0)),$P(^FH(117.3,0),"^",3,4)=PRE_"^"_($P(Z,"^",4)+1),$P(^FH(117.3,PRE,0),"^",2,26)=$P($G(FHN(FNOD,1)),"^",2,26)
"RTN","FHXMOV",42,0)
 I "^^"[$P(STG,"^",14,16) S $P(^FH(117.3,PRE,0),"^",14,16)=$G(FHN(FNOD,2))
"RTN","FHXMOV",43,0)
 I "^^^"[$P(STG1,"^",14,17) S $P(^FH(117.3,PRE,1),"^",14,17)=$G(FHN(FNOD,3))
"RTN","FHXMOV",44,0)
 I "^^^^^^"[$P(STG2,"^",2,8) S $P(^FH(117.3,PRE,3),"^",2,8)=$G(FHN(FNOD,4))
"RTN","FHXMOV",45,0)
 I $P(STG2,"^",1)="" S $P(^FH(117.3,PRE,3),"^",1)=$G(FHN(FNOD,5))
"RTN","FHXMOV",46,0)
 F TIT="AREA","DELV","EQUI","SPEC" D
"RTN","FHXMOV",47,0)
 .I $O(^FH(117.3,PRE,TIT,0))<1,$O(FHN(FNOD,TIT,0))>0 D
"RTN","FHXMOV",48,0)
 ..I '$D(^FH(117.3,PRE,TIT,0)) S ^FH(117.3,PRE,TIT,0)=$S(TIT="AREA":"^117.356S^^",TIT="DELV":"^117.313P^^",TIT="EQUI":"^117.338P^^",1:"^117.312P^^")
"RTN","FHXMOV",49,0)
 ..F K2=0:0 S K2=$O(FHN(FNOD,TIT,K2)) Q:K2<1  S K3=$G(FHN(FNOD,TIT,K2)) D
"RTN","FHXMOV",50,0)
 ...S ^FH(117.3,PRE,TIT,K2,0)=K3,^FH(117.3,PRE,TIT,"B",+K3,K2)="",Z=$G(^FH(117.3,PRE,TIT,0))
"RTN","FHXMOV",51,0)
 ...S $P(^FH(117.3,PRE,TIT,0),"^",3,4)=K2_"^"_($P(Z,"^",4)+1)
"RTN","FHXMOV",52,0)
 ...Q
"RTN","FHXMOV",53,0)
 ..Q
"RTN","FHXMOV",54,0)
 .Q
"RTN","FHXMOV",55,0)
 Q
"RTN","FHXOR")
0^339^B7181116
"RTN","FHXOR",1,0)
FHXOR ; HISC/REL - OE/RR Post-Init ;12/10/92  15:03
"RTN","FHXOR",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXOR",3,0)
 Q:'$D(^ORD(101,0))
"RTN","FHXOR",4,0)
 ; Clean up options and routines
"RTN","FHXOR",5,0)
 S DA(1)=$O(^ORD(101,"B","ORADD",0))
"RTN","FHXOR",6,0)
 S DA=$O(^ORD(101,"B","FHWM",0))
"RTN","FHXOR",7,0)
 I DA S DA=$O(^ORD(101,DA(1),10,"B",DA,0)) I DA S DIK="^ORD(101,DA(1),10," D ^DIK
"RTN","FHXOR",8,0)
 F FHX="FHWM","FHW1","FHW2","FHW3","FHW4","FHW5","FHW6","FHW7","FHW8","FHWMAS","FHWPRO1" S DA=$O(^DIC(19,"B",FHX,"")) I DA S DIK="^DIC(19," D ^DIK
"RTN","FHXOR",9,0)
 F FHX="FHWM","FHW5" S DA=$O(^ORD(101,"B",FHX,"")) I DA S DIK="^ORD(101," D ^DIK
"RTN","FHXOR",10,0)
 W !!,"Add Dietetic protocols to MAS OE/RR options ..."
"RTN","FHXOR",11,0)
 S X=" ;;DGPM MOVEMENT EVENTS;FHWMAS" D A2
"RTN","FHXOR",12,0)
 W !!,"Add Dietetic protocols to OE/RR protocols ..."
"RTN","FHXOR",13,0)
 F KK=1:1:2 S X=$T(ADD+KK) D A2
"RTN","FHXOR",14,0)
 Q:'$D(^ORD(100.98,0))  Q:$P(^(0),"^",1)'="DISPLAY GROUP"
"RTN","FHXOR",15,0)
 W !!,"Adding Dietetic Display Groups for OE/RR ..." K DIC,DIE,DA,DR
"RTN","FHXOR",16,0)
 F KK=1:1:4 S X=$T(DIS+KK) D A3
"RTN","FHXOR",17,0)
 F KK=1:1:4 S X=$T(SUB+KK) D A4
"RTN","FHXOR",18,0)
 K D0,DA,DIC,DIE,DLAYGO,DR,KK,ORBUF,X,Y Q
"RTN","FHXOR",19,0)
A2 S DA(1)=$O(^ORD(101,"B",$P(X,";",3),0)) I 'DA(1) K DA Q
"RTN","FHXOR",20,0)
 K DIC S:'$D(^ORD(101,DA(1),10,0)) ^(0)="^101.01PA^^"
"RTN","FHXOR",21,0)
 S DIC("DR")=$P(X,";",5,6)
"RTN","FHXOR",22,0)
 S DIC="^ORD(101,"_DA(1)_",10,",DIC(0)="L",DLAYGO=101,X=$P(X,";",4) D ^DIC
"RTN","FHXOR",23,0)
 I $P(Y,"^",3) W !?2,X," added as item to ",$P(^ORD(101,DA(1),0),"^",1),"."
"RTN","FHXOR",24,0)
 K DIC,DA Q
"RTN","FHXOR",25,0)
A3 S DIC="^ORD(100.98,",DIC(0)="L",DLAYGO=100.98,ORBUF="3///"_$P(X,";",5),X=$P(X,";",3) D ^DIC K DA,DR,DIE
"RTN","FHXOR",26,0)
 I $P(Y,"^",3) W !,X," added as new Display Group"
"RTN","FHXOR",27,0)
 I Y S DIE=DIC,DA=+Y,DR=ORBUF D ^DIE K DA,DIE,DIC,DR W "."
"RTN","FHXOR",28,0)
 Q
"RTN","FHXOR",29,0)
A4 Q:'$O(^ORD(100.98,"B",$P(X,";",4),0))
"RTN","FHXOR",30,0)
 S DA(1)=$O(^ORD(100.98,"B",$P(X,";",3),0)) I 'DA(1) K DA Q
"RTN","FHXOR",31,0)
 S:'$D(^ORD(100.98,DA(1),1,0)) ^(0)="^100.981P^^"
"RTN","FHXOR",32,0)
 S DIC="^ORD(100.98,"_DA(1)_",1,",DIC(0)="L",DLAYGO=100.98,X=$P(X,";",4) D ^DIC
"RTN","FHXOR",33,0)
 I $P(Y,"^",3) W !?2,X," added as subgroup to ",$P(^ORD(100.98,DA(1),0),"^",1),"."
"RTN","FHXOR",34,0)
 K DIC,DA Q
"RTN","FHXOR",35,0)
ADD ;;
"RTN","FHXOR",36,0)
 ;;ORADD;FHWMENU;2///DI;3///1
"RTN","FHXOR",37,0)
 ;;OROPRO;FHWPRO1;2///DI;3///1
"RTN","FHXOR",38,0)
DIS ;;NAME;PACKAGE;SHORT NAME
"RTN","FHXOR",39,0)
 ;;DIET ORDERS;DIETETICS;DO
"RTN","FHXOR",40,0)
 ;;TUBEFEEDINGS;DIETETICS;TF
"RTN","FHXOR",41,0)
 ;;DIETETIC CONSULTS;DIETETICS;D CON
"RTN","FHXOR",42,0)
 ;;DIET ADDITIONAL ORDERS;DIETETICS;D AO
"RTN","FHXOR",43,0)
 ;;EARLY/LATE TRAYS;DIETETICS;E/L T
"RTN","FHXOR",44,0)
 ;;DIETETICS;DIETETICS;DIET
"RTN","FHXOR",45,0)
SUB ;;PARENT;MEMBER ;10/7/89  20:52
"RTN","FHXOR",46,0)
 ;;DIETETICS;DIET ORDERS
"RTN","FHXOR",47,0)
 ;;DIETETICS;TUBEFEEDINGS
"RTN","FHXOR",48,0)
 ;;DIETETICS;DIETETIC CONSULTS
"RTN","FHXOR",49,0)
 ;;DIETETICS;DIET ADDITIONAL ORDERS
"RTN","FHXOR",50,0)
 ;;DIETETICS;EARLY/LATE TRAYS
"RTN","FHXOR",51,0)
 ;;ALL SERVICES;DIETETICS
"RTN","FHXOR3")
0^340^B9489372
"RTN","FHXOR3",1,0)
FHXOR3 ; HISC/NCA - Order Entry Post-Init ;6/17/96  15:36
"RTN","FHXOR3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXOR3",3,0)
 Q:'$D(^ORD(101,0))
"RTN","FHXOR3",4,0)
 ; Add OE/RR protocols
"RTN","FHXOR3",5,0)
 S FHX=$O(^ORD(101,"B","FH EVSEND OR",0)) I 'FHX S NAM="FH EVSEND OR",TXT="Dietetics Send Event Message To OR",TXT1="This protocol is used to send HL7 message to Order Entry 3 or higher from Dietetics." D PKG,AD
"RTN","FHXOR3",6,0)
 S FHX=$O(^ORD(101,"B","FH RECEIVE",0)) I 'FHX S NAM="FH RECEIVE",TXT="Dietetics Receive OR Event",ACT="D EN^FHWOR(.XQORMSG)",TXT1="This protocol is used to receive HL7 message from Order Entry 3 or higher." D PKG,AD1
"RTN","FHXOR3",7,0)
 S FHX=$O(^ORD(101,"B","FH ORDERABLE ITEM UPDATE",0))
"RTN","FHXOR3",8,0)
 I 'FHX S NAM="FH ORDERABLE ITEM UPDATE",TXT="Dietetics Send Orderable Item Update To OR",TXT1="This protocol is used to send orderable item updates HL7 messages to Order Entry 3 or higher from Dietetics." D PKG,AD
"RTN","FHXOR3",9,0)
 S X=" ;;FH EVSEND OR;OR RECEIVE" D AD2
"RTN","FHXOR3",10,0)
 S X=" ;;FH ORDERABLE ITEM UPDATE;OR ITEM RECEIVE" D AD2
"RTN","FHXOR3",11,0)
 S X=" ;;OR EVSEND FH;FH RECEIVE" D AD2
"RTN","FHXOR3",12,0)
KIL K ACT,DA,DIC,DIE,DIK,DLAYGO,DR,FHX,FHXA,LL,NAM,PKG,TXT,TXT1,TYP,X,Y
"RTN","FHXOR3",13,0)
 Q
"RTN","FHXOR3",14,0)
PKG S PKG=$O(^DIC(9.4,"C","FH",0)) Q
"RTN","FHXOR3",15,0)
AD ; Add extended protocols
"RTN","FHXOR3",16,0)
 W !?2,"Filing protocol ",NAM
"RTN","FHXOR3",17,0)
 K DIC S DIC="^ORD(101,",DIC(0)="L",DLAYGO=101,DIC("DR")="1///^S X=TXT;3.5///^S X=TXT1;4///X;12////^S X=PKG",X=NAM D ^DIC K DA,DIC,DLAYGO,X
"RTN","FHXOR3",18,0)
 Q
"RTN","FHXOR3",19,0)
AD1 ; Filing the Dietetics Protocols
"RTN","FHXOR3",20,0)
 W !?2,"Filing protocol ",NAM
"RTN","FHXOR3",21,0)
 K DIC S DIC="^ORD(101,",DIC(0)="L",DLAYGO=101,DIC("DR")="1///^S X=TXT;3.5///^S X=TXT1;4///A;12////^S X=PKG;20////^S X=ACT",X=NAM D ^DIC K DA,DIC,DLAYGO,X
"RTN","FHXOR3",22,0)
 Q
"RTN","FHXOR3",23,0)
AD2 ; Add Dietetic protocol to Order Entry 3
"RTN","FHXOR3",24,0)
 S DA(1)=$O(^ORD(101,"B",$P(X,";",3),0)) I 'DA(1) K DA Q
"RTN","FHXOR3",25,0)
 K DIC S:'$D(^ORD(101,DA(1),10,0)) ^(0)="^101.01PA^^"
"RTN","FHXOR3",26,0)
 S FHX=$O(^ORD(101,"B",$P(X,";",4),0)) I 'FHX Q
"RTN","FHXOR3",27,0)
 S FHXA=$O(^ORD(101,DA(1),10,"B",FHX,0)) I FHXA Q
"RTN","FHXOR3",28,0)
 S DIC("DR")="3///1"
"RTN","FHXOR3",29,0)
 S DIC="^ORD(101,"_DA(1)_",10,",DIC(0)="L",DLAYGO=101,X=$P(X,";",4) D ^DIC
"RTN","FHXOR3",30,0)
 K DA,DIC
"RTN","FHXOR3",31,0)
 Q
"RTN","FHXUTL")
0^341^B6215213
"RTN","FHXUTL",1,0)
FHXUTL ; HISC/NCA - OE/RR Post-Init Clean Up of 2.5 Protocols ;11/10/97  12:52
"RTN","FHXUTL",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXUTL",3,0)
 I +$$VERSION^XPDUTL("OR")'=3 W !,?10,"You do not have version 3 of Order Entry.",!,?10,"The Protocols will not be removed." Q
"RTN","FHXUTL",4,0)
 Q:'$D(^ORD(101,0))
"RTN","FHXUTL",5,0)
 S FHX="FHW"
"RTN","FHXUTL",6,0)
 S FHX=$O(^ORD(101,"B",FHX)) Q:FHX=""
"RTN","FHXUTL",7,0)
 S FHX1=$O(^ORD(101,"B",FHX,0)) Q:'FHX1
"RTN","FHXUTL",8,0)
 K ^TMP($J,"FHPRO")
"RTN","FHXUTL",9,0)
 ; Clean up protocols
"RTN","FHXUTL",10,0)
 W !!,"Clean up 2.5 Dietetics Protocols..."
"RTN","FHXUTL",11,0)
 S FHX="FHW" F  S FHX=$O(^ORD(101,"B",FHX)) Q:$E(FHX,1,3)'="FHW"  F FHX1=0:0 S FHX1=$O(^ORD(101,"B",FHX,FHX1)) Q:FHX1<1  S:FHX'="FHWMAS" ^TMP($J,"FHPRO",FHX1)=FHX
"RTN","FHXUTL",12,0)
 F FHX="OR" F  S FHX=$O(^ORD(101,"B",FHX)) Q:$E(FHX,1,2)'="OR"  F FHX1=0:0 S FHX1=$O(^ORD(101,"B",FHX,FHX1)) Q:FHX1<1  I $E($P($G(^ORD(101,FHX1,0)),"^",1),1,2)="OR" D REMOV
"RTN","FHXUTL",13,0)
 F FHX="FHW" F  S FHX=$O(^ORD(101,"B",FHX)) Q:$E(FHX,1,3)'="FHW"  F FHX1=0:0 S FHX1=$O(^ORD(101,"B",FHX,FHX1)) Q:FHX1<1  I $E($P($G(^ORD(101,FHX1,0)),"^",1),1,3)="FHW" D REMOV
"RTN","FHXUTL",14,0)
 F FHX=0:0 S FHX=$O(^TMP($J,"FHPRO",FHX)) Q:FHX<1  S DA=FHX I DA S DIK="^ORD(101," D ^DIK W !,"Protocol ",$G(^TMP($J,"FHPRO",FHX))," Removed"
"RTN","FHXUTL",15,0)
 W !,"...Done"
"RTN","FHXUTL",16,0)
 K ^TMP($J,"FHPRO"),DA,DIC,DIK,FHX,FHX1,FHX3
"RTN","FHXUTL",17,0)
 Q
"RTN","FHXUTL",18,0)
REMOV ; Check if FHW protocols is used as Items and delete them.
"RTN","FHXUTL",19,0)
 S DA(1)=FHX1
"RTN","FHXUTL",20,0)
 F FHX3=0:0 S FHX3=$O(^TMP($J,"FHPRO",FHX3)) Q:FHX3<1  S DA=$O(^ORD(101,DA(1),10,"B",FHX3,0)) I DA S DIK="^ORD(101,DA(1),10," D ^DIK W !,"Protocol ",$G(^TMP($J,"FHPRO",FHX3))," Removed From ",FHX
"RTN","FHXUTL",21,0)
 Q
"RTN","FHXWRD")
0^342^B5585424
"RTN","FHXWRD",1,0)
FHXWRD ; HISC/REL/NCA - Update Patient Dietetic Ward ;8/7/95  15:13
"RTN","FHXWRD",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHXWRD",3,0)
EN1 ; Ask user whether they want to update
"RTN","FHXWRD",4,0)
 R !!,"Update the Patient Dietetic Location? N// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="N" D TR^FH
"RTN","FHXWRD",5,0)
 I $P("YES",X,1)'="",$P("NO",X,1)'="" D MSG G EN1
"RTN","FHXWRD",6,0)
 I X?1"Y".E D E1 W !!,"....Done"
"RTN","FHXWRD",7,0)
 G KIL
"RTN","FHXWRD",8,0)
E1 ; Process Updating Patient Dietetic Ward
"RTN","FHXWRD",9,0)
 K ^FHPT("AW")
"RTN","FHXWRD",10,0)
 S NX="" F  S NX=$O(^DPT("CN",NX)) Q:NX=""  F DFN=0:0 S DFN=$O(^DPT("CN",NX,DFN)) Q:DFN'>0  S ADM=^(DFN) D SET
"RTN","FHXWRD",11,0)
 Q
"RTN","FHXWRD",12,0)
SET D DID^FHDPA
"RTN","FHXWRD",13,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHXWRD",14,0)
 Q:$D(^FHPT(FHDFN,"A",+ADM,0))#2=0
"RTN","FHXWRD",15,0)
 S Y=$P(^FHPT(FHDFN,"A",ADM,0),"^",8,9),$P(^(0),"^",8,9)=FHWRD_"^"_FHRMB
"RTN","FHXWRD",16,0)
 S:FHWRD ^FHPT("AW",FHWRD,FHDFN)=ADM
"RTN","FHXWRD",17,0)
 I (FHWRD_"^"_FHRMB)'=Y S EVT="L^T^^"_$P(Y,"^",1)_"~"_$P(Y,"^",2) S:FHWRD EVT=EVT_"~"_FHWRD_"~"_FHRMB S:'FHWRD $P(EVT,"^",2)="D" D ^FHORX
"RTN","FHXWRD",18,0)
 Q:'FHWRD
"RTN","FHXWRD",19,0)
 ; Update Type of Service
"RTN","FHXWRD",20,0)
 S FHX3=$P($G(^FH(119.6,+FHWRD,0)),"^",10) S:FHX3="" FHX3="TCD" I FHX3[$P(^FHPT(FHDFN,"A",ADM,0),"^",5) Q
"RTN","FHXWRD",21,0)
 S FHX3=$S($L(FHX3)=1:FHX3,FHX3["D":"D",1:"C"),$P(^FHPT(FHDFN,"A",ADM,0),"^",5)=FHX3
"RTN","FHXWRD",22,0)
 S FHX2=$P(^FHPT(FHDFN,"A",ADM,0),"^",2) I FHX2,$P($G(^FHPT(FHDFN,"A",ADM,"DI",+FHX2,0)),"^",8)'="" S $P(^(0),"^",8)=FHX3
"RTN","FHXWRD",23,0)
 Q
"RTN","FHXWRD",24,0)
KIL G KILL^XUSCLEAN
"RTN","FHXWRD",25,0)
MSG ; Write Error Message
"RTN","FHXWRD",26,0)
 W *7,!,"Answer YES or NO on whether you want to update the Dietetic"
"RTN","FHXWRD",27,0)
 W !,"locations for inpatients.  This will insert the proper location"
"RTN","FHXWRD",28,0)
 W !,"into the Dietetic Patient file for the appropriate admission."
"RTN","FHXWRD",29,0)
 W !,"NOTE: During installation, the Dietetic locations for inpatients"
"RTN","FHXWRD",30,0)
 W !,"have been updated already and this option will update them again."
"RTN","FHXWRD",31,0)
 Q
"RTN","FHZDOC")
0^343^B1268882
"RTN","FHZDOC",1,0)
FHZDOC ; HISC/REL - Produce Documentation ;5/16/91  09:24
"RTN","FHZDOC",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHZDOC",3,0)
 ;
"RTN","FHZDOC",4,0)
 ;
"RTN","FHZDOC",5,0)
OP K G F I=1:1 S A=$P($T(PGMS+I),";",3,99) Q:A=""  I @$P(A,";",2) S G($E(A,1,2))=A
"RTN","FHZDOC",6,0)
 W !! Q:$O(G(""))=""  S A="" F I=0:0 S A=$O(G(A)) Q:A=""  W !?6,$P(G(A),";",1)
"RTN","FHZDOC",7,0)
O1 R !!?6,"Select Option: ",A:DTIME Q:'$T!("^"[A)  I A'?2U W *7,"  Enter 2 Letters of Option" G O1
"RTN","FHZDOC",8,0)
 I '$D(G(A)) W *7,"  ??" G O1
"RTN","FHZDOC",9,0)
 S X=$P(G(A),";",3) K A,I,G D @X K X G OP
"RTN","FHZDOC",10,0)
PGMS ;;
"RTN","FHZDOC",11,0)
 ;;FL  First Line Listing;1;^FHZDOC1
"RTN","FHZDOC",12,0)
 ;;DM  Diagram Menus;1;^FHZDOC2
"RTN","FHZDOC",13,0)
 ;;FF  File List;1;EN1^FHZDOC3
"RTN","FHZDOC",14,0)
 ;;FS  File Security;1;EN2^FHZDOC3
"RTN","FHZDOC",15,0)
 ;;PD  Package Definition;1;EN3^FHZDOC3
"RTN","FHZDOC1")
0^344^B868405
"RTN","FHZDOC1",1,0)
FHZDOC1 ; HISC/REL - First Line Listing ;8/2/90  15:19 
"RTN","FHZDOC1",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHZDOC1",3,0)
 S X="N",%DT="XT" D ^%DT S DTP=Y D DTP^FH
"RTN","FHZDOC1",4,0)
 W !,"Routine First-line List",!!
"RTN","FHZDOC1",5,0)
GET W ! D ^%ZIS Q:POP  K %UTILITY D ^%RSEL
"RTN","FHZDOC1",6,0)
 S NAM="" G:$O(%UTILITY(NAM))="" DONE
"RTN","FHZDOC1",7,0)
 U IO W @IOF,!?22,"First line list of DIETETIC Programs",!?31,DTP,!!
"RTN","FHZDOC1",8,0)
GO S NAM=$O(%UTILITY(NAM)) G:NAM="" DONE
"RTN","FHZDOC1",9,0)
 X "ZL @NAM S X=$T(+1)" S N=$P(X,"-",2,99),N=$P(N,";",1) W $P(X," ",1),?10,N,! W:$Y>60 @IOF G GO
"RTN","FHZDOC1",10,0)
DONE U IO(0) S IOP="" D ^%ZIS Q
"RTN","FHZDOC2")
0^345^B14968710
"RTN","FHZDOC2",1,0)
FHZDOC2 ; HISC/REL - Diagram Menus ;3/12/89  20:56 
"RTN","FHZDOC2",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHZDOC2",3,0)
 W !! D INIT
"RTN","FHZDOC2",4,0)
 R "Select USER or OPTION name: ",X:DTIME S DIC=3,DIC(0)="EMZ",DIC("S")="I $D(^(201)),^(201)",FL="US" G:X=""!(X["^") END
"RTN","FHZDOC2",5,0)
RQUE D ^DIC I Y>0 S D0=+Y,MQ=$P(Y(0),U,1),Y=+^(201) I $D(^DIC(19,Y,0)) D E G:'FL QPU D GO Q
"RTN","FHZDOC2",6,0)
 S DIC=19,DIC(0)="QEMZ" K DIC("S") D ^DIC S FL="OP",D0=+Y I Y=-1 G FHZDOC2
"RTN","FHZDOC2",7,0)
 I $P(Y(0),U,4)'="M" W !,*7,"This is not a menu option and therefore cannot be diagrammed.",! G FHZDOC2
"RTN","FHZDOC2",8,0)
 D:Y>0 E G:'FL QPU Q
"RTN","FHZDOC2",9,0)
 ;
"RTN","FHZDOC2",10,0)
OP ;
"RTN","FHZDOC2",11,0)
 D INIT S Y=D0 D E:$D(^DIC(19,Y,0)) G GO
"RTN","FHZDOC2",12,0)
US ;
"RTN","FHZDOC2",13,0)
 D INIT Q:'$D(^VA(200,D0,201))  S XQDUZ=D0,Y=+^(201) Q:'$D(^DIC(19,Y,0))  D E
"RTN","FHZDOC2",14,0)
GO K X,XQV,DIC U IO S W=IOM\M-10,%="" S:W>33 W=33
"RTN","FHZDOC2",15,0)
 I W<10 D ^%ZISC W !,*7,"This menu contains too many levels to be diagrammed using this margin width." G FHZDOC2
"RTN","FHZDOC2",16,0)
 S X=^TMP($J,"XQM",1,0),Z=$P(X,"^",2)
"RTN","FHZDOC2",17,0)
 W @IOF,!!?(IOM-17-$L(Z)\2),"DIAGRAM OF MENU: ",Z
"RTN","FHZDOC2",18,0)
 K ^TMP($J,"XQM",1,0) W !,$P(X,U,3)," (",$P(X,U,2),")",!,"|",!,"|"
"RTN","FHZDOC2",19,0)
 F XQL=1:1 Q:'$D(^TMP($J,"XQM",XQL))  S XQT=M,L=1 K Z D L
"RTN","FHZDOC2",20,0)
 D END
"RTN","FHZDOC2",21,0)
Q Q
"RTN","FHZDOC2",22,0)
 ;
"RTN","FHZDOC2",23,0)
L G LL:'$D(^TMP($J,"XQM",XQL,L)) S Y=1,XQV=^(L) I $D(^(L,1)) S XQV(L)=^(1)
"RTN","FHZDOC2",24,0)
 E  S:$P(XQV,U,5)'="M" XQT=L
"RTN","FHZDOC2",25,0)
 S XQP=$P(XQV,U,1),XQP(L)=$E("-----",1,5-$L(XQP))_XQP,X=$P(XQV,U,3)_" ["_$P(XQV,U,2)_"]" D T I $P(XQV,U,4)]"" S X="**UNAVAILABLE**" D T G LL
"RTN","FHZDOC2",26,0)
 S XQV=$P(XQV,U,7) I XQV]"" S X="**LOCKED: "_XQV_"**" D T
"RTN","FHZDOC2",27,0)
LL S Y=0,L=L+1 G L:L'>M
"RTN","FHZDOC2",28,0)
Y S Y=Y+1,L=1 W ! G WL:$O(Z(0))>0 S Z=XQT-1
"RTN","FHZDOC2",29,0)
B I L=M Q:$D(XQV(Z))!'Z  S Z=Z-1,L=1 W !
"RTN","FHZDOC2",30,0)
 D D S L=L+1 G B
"RTN","FHZDOC2",31,0)
D Q:L'<XQT!'$D(XQV(L))  W ?W+10*(L-1)+10 I Y=1 W "|" K:XQV(L)=XQL XQV(L) F X=1:1 G Q:X=W!'$D(Z(L+1)) W "-"
"RTN","FHZDOC2",32,0)
 W "|" W:L<M ?W+4*L Q
"RTN","FHZDOC2",33,0)
WL I '$D(Z(L,Y)) D D G O
"RTN","FHZDOC2",34,0)
 S XQV=Z(L,Y) K Z(L,Y) S:Y=1 XQP=XQP(L) S:XQT'>L L=M I Y=1 F X=1:1 Q:W+10*(L-1)-1<$X  W "-"
"RTN","FHZDOC2",35,0)
 W:Y=1 ?W+10*(L-1),XQP W ?W+10*(L-1)+6,XQV
"RTN","FHZDOC2",36,0)
O S L=L+1 G Y:M<L,WL
"RTN","FHZDOC2",37,0)
 ;
"RTN","FHZDOC2",38,0)
T S D=""
"RTN","FHZDOC2",39,0)
W S Z=$P(X," ",1),X=$P(X," ",2,999) I $L(D)+$L(Z)>W,$L(D) S Z(L,Y)=D,D="",Y=Y+1
"RTN","FHZDOC2",40,0)
 I $L(Z)>W S Z(L,Y)=$E(Z,1,W),Z=$E(Z,W+1,99) S:$E(Z,1)=" " Z=$E(Z,2,99) S Y=Y+1
"RTN","FHZDOC2",41,0)
 S D=D_Z_" " G W:X]"" S Z(L,Y)=D,Y=Y+1 Q
"RTN","FHZDOC2",42,0)
 ;
"RTN","FHZDOC2",43,0)
X S Y=$P(XQB(L),U,XQBN(L)) Q:'$L($P(XQB(L),U,XQBN(L),99))  S XQBN(L)=XQBN(L)+1 I '$D(^DIC(19,+Y,0)) G X
"RTN","FHZDOC2",44,0)
E S Z=^(0),^TMP($J,"XQM",XQL,L)=$P(Y,";",2)_U_Z,XQV=$P(Z,U,6) S:L>1 ^TMP($J,"XQM",XQV(L-1),L-1,1)=XQL I $P(Z,U,4)'="M"!$S(XQV]""&$D(XQDUZ):'$D(^XUSEC(XQV,XQDUZ)),1:0)!($P(Z,U,3)]"") S XQL=XQL+1 G X
"RTN","FHZDOC2",45,0)
 S XQV(L)=XQL,L=L+1,X(L)="",(Y,DIC,DIC(L))=+Y S:M<L M=L
"RTN","FHZDOC2",46,0)
 I $S('$D(^XUTL("XQO",DIC,0)):1,'$D(^DIC(19,DIC,99)):1,1:^DIC(19,DIC,99)'=$P(^XUTL("XQO",DIC,0),U,2)) Q  ;S XQSY=Y,XQDIC=DIC D SET^XQ7 S Y=XQSY
"RTN","FHZDOC2",47,0)
 K XQA S XQJ=-1 F XQI=0:0 S XQJ=$O(^XUTL("XQO",Y,U,XQJ)) Q:XQJ=-1  S XQA($P(^(XQJ),U,2))=XQJ
"RTN","FHZDOC2",48,0)
 S XQB(L)="",XQBN(L)=1,XQJ=+^XUTL("XQO",Y,0) F XQI=1:1:XQJ S XQN=^XUTL("XQO",Y,0,XQI) F XQP=0:1 S XQB=$P(XQN,U,7*XQP+2) Q:'$L($P(XQN,U,7*XQP+2,99))  I $D(XQA(XQB)) S XQB(L)=XQB(L)_XQA(XQB)_";"_$P(XQN,U,7*XQP+1)_U K XQA(XQB)
"RTN","FHZDOC2",49,0)
 D X
"RTN","FHZDOC2",50,0)
 Q:L=1  S L=L-1,DIC=DIC(L) G X
"RTN","FHZDOC2",51,0)
 ;
"RTN","FHZDOC2",52,0)
INIT K ^TMP($J,"XQM"),X,IOP,XQDUZ,DIC S L=0,XQL=1,X(0)=0,M=1
"RTN","FHZDOC2",53,0)
 Q
"RTN","FHZDOC2",54,0)
QPU ;
"RTN","FHZDOC2",55,0)
 S %ZIS="QM" D ^%ZIS Q:POP
"RTN","FHZDOC2",56,0)
 I $D(IO("Q")) K IO("Q") S ZTRTN=FL_"^FHZDOC2",ZTSAVE("D0")="",ZTDESC="DIAGRAM MENUS" D ^%ZTLOAD K ZTSK G FHZDOC2
"RTN","FHZDOC2",57,0)
 D:IO["" GO
"RTN","FHZDOC2",58,0)
 G FHZDOC2
"RTN","FHZDOC2",59,0)
END K ^TMP($J,"XQM"),X,FL,IOP,XQDUZ,DIC D ^%ZISC
"RTN","FHZDOC2",60,0)
 I $D(ZTSK) K ^%ZTSK(ZTSK)
"RTN","FHZDOC2",61,0)
 Q
"RTN","FHZDOC3")
0^346^B1210093
"RTN","FHZDOC3",1,0)
FHZDOC3 ; HISC/REL - File Lists ;5/16/91  09:30
"RTN","FHZDOC3",2,0)
 ;;5.5;DIETETICS;;Jan 28, 2005
"RTN","FHZDOC3",3,0)
EN1 ; File List
"RTN","FHZDOC3",4,0)
 W ! S L=0,DIC="^DIC(",FLDS="NUMBER;S1;L5,.01;C8;L30,1;C38;L11,4;C51",BY="NUMBER"
"RTN","FHZDOC3",5,0)
 S FR=111,TO=119.999,DHD="FILE LIST" D EN1^DIP Q
"RTN","FHZDOC3",6,0)
EN2 ; Security List
"RTN","FHZDOC3",7,0)
 W ! S L=0,DIC="^DIC(",FLDS="NUMBER;L6,.01;C9;L30,31;C41;L6,32;C49;L6,33;C57;L6,34;C65;L6,35;C73;L6",BY="NUMBER"
"RTN","FHZDOC3",8,0)
 S FR=111,TO=119.999,DHD="FILE SECURITY" D EN1^DIP Q
"RTN","FHZDOC3",9,0)
EN3 ; Package Definition
"RTN","FHZDOC3",10,0)
 S DPK=$O(^DIC(9.4,"C","FH",0))
"RTN","FHZDOC3",11,0)
 S DIC=9.4,L=0,BY="@NUMBER",FR=DPK,TO=DPK,FLDS="[XU-PKG-DEFAULT-DEFINITION]" D EN1^DIP
"RTN","FHZDOC3",12,0)
 Q
"SEC","^DIC",111,111,0,"DD")
#
"SEC","^DIC",111,111,0,"DEL")
#f
"SEC","^DIC",111,111,0,"LAYGO")
#f
"SEC","^DIC",111,111,0,"RD")
#F
"SEC","^DIC",111,111,0,"WR")
#f
"SEC","^DIC",111.1,111.1,0,"AUDIT")
@
"SEC","^DIC",111.1,111.1,0,"DD")
@
"SEC","^DIC",111.1,111.1,0,"DEL")
@
"SEC","^DIC",111.1,111.1,0,"LAYGO")
@
"SEC","^DIC",111.1,111.1,0,"RD")
@
"SEC","^DIC",111.1,111.1,0,"WR")
@
"SEC","^DIC",112,112,0,"DD")
#
"SEC","^DIC",112,112,0,"DEL")
#f
"SEC","^DIC",112,112,0,"LAYGO")
#f
"SEC","^DIC",112,112,0,"RD")
#F
"SEC","^DIC",112,112,0,"WR")
#f
"SEC","^DIC",112.2,112.2,0,"DD")
#
"SEC","^DIC",112.2,112.2,0,"DEL")
#f
"SEC","^DIC",112.2,112.2,0,"LAYGO")
#f
"SEC","^DIC",112.2,112.2,0,"RD")
#F
"SEC","^DIC",112.2,112.2,0,"WR")
#f
"SEC","^DIC",112.6,112.6,0,"DD")
#
"SEC","^DIC",112.6,112.6,0,"DEL")
#F
"SEC","^DIC",112.6,112.6,0,"LAYGO")
#F
"SEC","^DIC",112.6,112.6,0,"RD")
#F
"SEC","^DIC",112.6,112.6,0,"WR")
#F
"SEC","^DIC",113,113,0,"DD")
#
"SEC","^DIC",113,113,0,"DEL")
#f
"SEC","^DIC",113,113,0,"LAYGO")
#f
"SEC","^DIC",113,113,0,"RD")
#F
"SEC","^DIC",113,113,0,"WR")
#f
"SEC","^DIC",113.1,113.1,0,"DD")
#
"SEC","^DIC",113.1,113.1,0,"DEL")
#f
"SEC","^DIC",113.1,113.1,0,"LAYGO")
#f
"SEC","^DIC",113.1,113.1,0,"RD")
#F
"SEC","^DIC",113.1,113.1,0,"WR")
#f
"SEC","^DIC",113.2,113.2,0,"DD")
#
"SEC","^DIC",113.2,113.2,0,"DEL")
#f
"SEC","^DIC",113.2,113.2,0,"LAYGO")
#f
"SEC","^DIC",113.2,113.2,0,"RD")
#F
"SEC","^DIC",113.2,113.2,0,"WR")
#f
"SEC","^DIC",114,114,0,"DD")
#
"SEC","^DIC",114,114,0,"DEL")
#f
"SEC","^DIC",114,114,0,"LAYGO")
#f
"SEC","^DIC",114,114,0,"RD")
#F
"SEC","^DIC",114,114,0,"WR")
#f
"SEC","^DIC",114.1,114.1,0,"DD")
#
"SEC","^DIC",114.1,114.1,0,"DEL")
#f
"SEC","^DIC",114.1,114.1,0,"LAYGO")
#f
"SEC","^DIC",114.1,114.1,0,"RD")
#F
"SEC","^DIC",114.1,114.1,0,"WR")
#f
"SEC","^DIC",114.2,114.2,0,"DD")
#
"SEC","^DIC",114.2,114.2,0,"DEL")
#f
"SEC","^DIC",114.2,114.2,0,"LAYGO")
#f
"SEC","^DIC",114.2,114.2,0,"RD")
#F
"SEC","^DIC",114.2,114.2,0,"WR")
#f
"SEC","^DIC",114.3,114.3,0,"DD")
#
"SEC","^DIC",114.3,114.3,0,"DEL")
#f
"SEC","^DIC",114.3,114.3,0,"LAYGO")
#f
"SEC","^DIC",114.3,114.3,0,"RD")
#F
"SEC","^DIC",114.3,114.3,0,"WR")
#f
"SEC","^DIC",114.4,114.4,0,"DD")
#
"SEC","^DIC",114.4,114.4,0,"DEL")
#f
"SEC","^DIC",114.4,114.4,0,"LAYGO")
#f
"SEC","^DIC",114.4,114.4,0,"RD")
#F
"SEC","^DIC",114.4,114.4,0,"WR")
#f
"SEC","^DIC",115,115,0,"DD")
#
"SEC","^DIC",115,115,0,"DEL")
#F
"SEC","^DIC",115,115,0,"LAYGO")
#F
"SEC","^DIC",115,115,0,"RD")
#F
"SEC","^DIC",115,115,0,"WR")
#F
"SEC","^DIC",115.2,115.2,0,"DD")
#
"SEC","^DIC",115.2,115.2,0,"DEL")
#f
"SEC","^DIC",115.2,115.2,0,"LAYGO")
#f
"SEC","^DIC",115.2,115.2,0,"RD")
#F
"SEC","^DIC",115.2,115.2,0,"WR")
#f
"SEC","^DIC",115.3,115.3,0,"DD")
#
"SEC","^DIC",115.3,115.3,0,"DEL")
#f
"SEC","^DIC",115.3,115.3,0,"LAYGO")
#f
"SEC","^DIC",115.3,115.3,0,"RD")
#F
"SEC","^DIC",115.3,115.3,0,"WR")
#f
"SEC","^DIC",115.4,115.4,0,"DD")
#
"SEC","^DIC",115.4,115.4,0,"DEL")
#f
"SEC","^DIC",115.4,115.4,0,"LAYGO")
#f
"SEC","^DIC",115.4,115.4,0,"RD")
#F
"SEC","^DIC",115.4,115.4,0,"WR")
#f
"SEC","^DIC",115.5,115.5,0,"DD")
#
"SEC","^DIC",115.5,115.5,0,"DEL")
#f
"SEC","^DIC",115.5,115.5,0,"LAYGO")
#f
"SEC","^DIC",115.5,115.5,0,"RD")
#F
"SEC","^DIC",115.5,115.5,0,"WR")
#f
"SEC","^DIC",115.6,115.6,0,"DD")
#
"SEC","^DIC",115.6,115.6,0,"DEL")
#f
"SEC","^DIC",115.6,115.6,0,"LAYGO")
#f
"SEC","^DIC",115.6,115.6,0,"RD")
#F
"SEC","^DIC",115.6,115.6,0,"WR")
#f
"SEC","^DIC",115.7,115.7,0,"DD")
#
"SEC","^DIC",115.7,115.7,0,"DEL")
#f
"SEC","^DIC",115.7,115.7,0,"LAYGO")
#f
"SEC","^DIC",115.7,115.7,0,"RD")
#F
"SEC","^DIC",115.7,115.7,0,"WR")
#f
"SEC","^DIC",116,116,0,"DD")
#
"SEC","^DIC",116,116,0,"DEL")
#f
"SEC","^DIC",116,116,0,"LAYGO")
#f
"SEC","^DIC",116,116,0,"RD")
#F
"SEC","^DIC",116,116,0,"WR")
#f
"SEC","^DIC",116.1,116.1,0,"DD")
#
"SEC","^DIC",116.1,116.1,0,"DEL")
#f
"SEC","^DIC",116.1,116.1,0,"LAYGO")
#f
"SEC","^DIC",116.1,116.1,0,"RD")
#F
"SEC","^DIC",116.1,116.1,0,"WR")
#f
"SEC","^DIC",116.2,116.2,0,"DD")
#
"SEC","^DIC",116.2,116.2,0,"DEL")
#f
"SEC","^DIC",116.2,116.2,0,"LAYGO")
#f
"SEC","^DIC",116.2,116.2,0,"RD")
#F
"SEC","^DIC",116.2,116.2,0,"WR")
#f
"SEC","^DIC",116.3,116.3,0,"DD")
#
"SEC","^DIC",116.3,116.3,0,"DEL")
#f
"SEC","^DIC",116.3,116.3,0,"LAYGO")
#f
"SEC","^DIC",116.3,116.3,0,"RD")
#F
"SEC","^DIC",116.3,116.3,0,"WR")
#f
"SEC","^DIC",117,117,0,"AUDIT")

"SEC","^DIC",117,117,0,"DD")
#
"SEC","^DIC",117,117,0,"DEL")
#F
"SEC","^DIC",117,117,0,"LAYGO")
#F
"SEC","^DIC",117,117,0,"RD")
#F
"SEC","^DIC",117,117,0,"WR")
#F
"SEC","^DIC",117.1,117.1,0,"AUDIT")
@
"SEC","^DIC",117.1,117.1,0,"DD")
#
"SEC","^DIC",117.1,117.1,0,"DEL")
#F
"SEC","^DIC",117.1,117.1,0,"LAYGO")
#F
"SEC","^DIC",117.1,117.1,0,"RD")
#F
"SEC","^DIC",117.1,117.1,0,"WR")
#F
"SEC","^DIC",117.2,117.2,0,"DD")
#
"SEC","^DIC",117.2,117.2,0,"DEL")
#F
"SEC","^DIC",117.2,117.2,0,"LAYGO")
#F
"SEC","^DIC",117.2,117.2,0,"RD")
#F
"SEC","^DIC",117.2,117.2,0,"WR")
#F
"SEC","^DIC",117.3,117.3,0,"DD")
#
"SEC","^DIC",117.3,117.3,0,"DEL")
#f
"SEC","^DIC",117.3,117.3,0,"LAYGO")
#f
"SEC","^DIC",117.3,117.3,0,"RD")
#F
"SEC","^DIC",117.3,117.3,0,"WR")
#f
"SEC","^DIC",117.4,117.4,0,"DD")
#
"SEC","^DIC",117.4,117.4,0,"DEL")
#f
"SEC","^DIC",117.4,117.4,0,"LAYGO")
#f
"SEC","^DIC",117.4,117.4,0,"RD")
#F
"SEC","^DIC",117.4,117.4,0,"WR")
#f
"SEC","^DIC",118,118,0,"DD")
#
"SEC","^DIC",118,118,0,"DEL")
#f
"SEC","^DIC",118,118,0,"LAYGO")
#f
"SEC","^DIC",118,118,0,"RD")
#F
"SEC","^DIC",118,118,0,"WR")
#f
"SEC","^DIC",118.1,118.1,0,"DD")
#
"SEC","^DIC",118.1,118.1,0,"DEL")
#f
"SEC","^DIC",118.1,118.1,0,"LAYGO")
#f
"SEC","^DIC",118.1,118.1,0,"RD")
#F
"SEC","^DIC",118.1,118.1,0,"WR")
#f
"SEC","^DIC",118.2,118.2,0,"DD")
#
"SEC","^DIC",118.2,118.2,0,"DEL")
#f
"SEC","^DIC",118.2,118.2,0,"LAYGO")
#f
"SEC","^DIC",118.2,118.2,0,"RD")
#F
"SEC","^DIC",118.2,118.2,0,"WR")
#f
"SEC","^DIC",118.3,118.3,0,"DD")
#
"SEC","^DIC",118.3,118.3,0,"DEL")
#f
"SEC","^DIC",118.3,118.3,0,"LAYGO")
#f
"SEC","^DIC",118.3,118.3,0,"RD")
#F
"SEC","^DIC",118.3,118.3,0,"WR")
#f
"SEC","^DIC",119,119,0,"AUDIT")
@
"SEC","^DIC",119,119,0,"DD")
#
"SEC","^DIC",119,119,0,"DEL")
#f
"SEC","^DIC",119,119,0,"LAYGO")
#f
"SEC","^DIC",119,119,0,"RD")
#F
"SEC","^DIC",119,119,0,"WR")
#f
"SEC","^DIC",119.1,119.1,0,"DD")
#
"SEC","^DIC",119.1,119.1,0,"DEL")
#f
"SEC","^DIC",119.1,119.1,0,"LAYGO")
#f
"SEC","^DIC",119.1,119.1,0,"RD")
#F
"SEC","^DIC",119.1,119.1,0,"WR")
#f
"SEC","^DIC",119.4,119.4,0,"DD")
#
"SEC","^DIC",119.4,119.4,0,"DEL")
#f
"SEC","^DIC",119.4,119.4,0,"LAYGO")
#f
"SEC","^DIC",119.4,119.4,0,"RD")
#F
"SEC","^DIC",119.4,119.4,0,"WR")
#f
"SEC","^DIC",119.5,119.5,0,"DD")
#
"SEC","^DIC",119.5,119.5,0,"DEL")
#f
"SEC","^DIC",119.5,119.5,0,"LAYGO")
#f
"SEC","^DIC",119.5,119.5,0,"RD")
#F
"SEC","^DIC",119.5,119.5,0,"WR")
#f
"SEC","^DIC",119.6,119.6,0,"DD")
#
"SEC","^DIC",119.6,119.6,0,"DEL")
#f
"SEC","^DIC",119.6,119.6,0,"LAYGO")
#f
"SEC","^DIC",119.6,119.6,0,"RD")
#F
"SEC","^DIC",119.6,119.6,0,"WR")
#f
"SEC","^DIC",119.71,119.71,0,"DD")
#
"SEC","^DIC",119.71,119.71,0,"DEL")
#f
"SEC","^DIC",119.71,119.71,0,"LAYGO")
#f
"SEC","^DIC",119.71,119.71,0,"RD")
#F
"SEC","^DIC",119.71,119.71,0,"WR")
#f
"SEC","^DIC",119.72,119.72,0,"DD")
#
"SEC","^DIC",119.72,119.72,0,"DEL")
#f
"SEC","^DIC",119.72,119.72,0,"LAYGO")
#f
"SEC","^DIC",119.72,119.72,0,"RD")
#F
"SEC","^DIC",119.72,119.72,0,"WR")
#f
"SEC","^DIC",119.73,119.73,0,"DD")
#
"SEC","^DIC",119.73,119.73,0,"DEL")
#f
"SEC","^DIC",119.73,119.73,0,"LAYGO")
#f
"SEC","^DIC",119.73,119.73,0,"RD")
#F
"SEC","^DIC",119.73,119.73,0,"WR")
#f
"SEC","^DIC",119.74,119.74,0,"DD")
#
"SEC","^DIC",119.74,119.74,0,"DEL")
#f
"SEC","^DIC",119.74,119.74,0,"LAYGO")
#f
"SEC","^DIC",119.74,119.74,0,"RD")
#F
"SEC","^DIC",119.74,119.74,0,"WR")
#f
"SEC","^DIC",119.8,119.8,0,"DD")
#
"SEC","^DIC",119.8,119.8,0,"DEL")
#f
"SEC","^DIC",119.8,119.8,0,"LAYGO")
#f
"SEC","^DIC",119.8,119.8,0,"RD")
#F
"SEC","^DIC",119.8,119.8,0,"WR")
#f
"SEC","^DIC",119.9,119.9,0,"DD")
#
"SEC","^DIC",119.9,119.9,0,"DEL")
#f
"SEC","^DIC",119.9,119.9,0,"LAYGO")
#f
"SEC","^DIC",119.9,119.9,0,"RD")
#F
"SEC","^DIC",119.9,119.9,0,"WR")
#f
"VER")
8.0^22
"^DD",111,111,0)
FIELD^^99^9
"^DD",111,111,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",111,111,0,"IX","AC",111,99)

"^DD",111,111,0,"IX","B",111,.01)

"^DD",111,111,0,"IX","B",111.01,.01)

"^DD",111,111,0,"IX","C",111,1)

"^DD",111,111,0,"IX","D",111.01,.01)

"^DD",111,111,0,"NM","DIETS")
 
"^DD",111,111,0,"PT",111.1,1)

"^DD",111,111,0,"PT",111.1,2)

"^DD",111,111,0,"PT",111.1,3)

"^DD",111,111,0,"PT",111.1,4)

"^DD",111,111,0,"PT",111.1,5)

"^DD",111,111,0,"PT",115.016,1)

"^DD",111,111,0,"PT",115.016,6)

"^DD",111,111,0,"PT",115.016,7)

"^DD",111,111,0,"PT",115.016,8)

"^DD",111,111,0,"PT",115.016,9)

"^DD",111,111,0,"PT",115.016,10)

"^DD",111,111,0,"PT",115.017,3)

"^DD",111,111,0,"PT",115.018,5)

"^DD",111,111,0,"PT",115.02,1)

"^DD",111,111,0,"PT",115.02,2)

"^DD",111,111,0,"PT",115.02,3)

"^DD",111,111,0,"PT",115.02,4)

"^DD",111,111,0,"PT",115.02,5)

"^DD",111,111,0,"PT",119.6,15)

"^DD",111,111,0,"PT",119.9,4)

"^DD",111,111,0,"PT",119.9,5)

"^DD",111,111,0,"PT",119.9,6)

"^DD",111,111,0,"PT",119.9,7)

"^DD",111,111,0,"PT",119.9,8)

"^DD",111,111,0,"PT",14100032,9)

"^DD",111,111,0,"PT",14100034.02,1)

"^DD",111,111,0,"PT",14100034.02,2)

"^DD",111,111,0,"PT",14100034.02,3)

"^DD",111,111,0,"PT",14100034.02,4)

"^DD",111,111,0,"PT",14100034.02,5)

"^DD",111,111,0,"PT",14100038.13,1)

"^DD",111,111,0,"PT",14100038.13,2)

"^DD",111,111,0,"PT",14100038.13,3)

"^DD",111,111,0,"PT",14100038.13,4)

"^DD",111,111,0,"PT",14100038.13,5)

"^DD",111,111,0,"SCR")
I '$D(^FH(111,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",111,111,0,"VRPK")
FH
"^DD",111,111,.01,0)
NAME^RFa^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",111,111,.01,1,0)
^.1
"^DD",111,111,.01,1,1,0)
111^B
"^DD",111,111,.01,1,1,1)
S ^FH(111,"B",$E(X,1,30),DA)=""
"^DD",111,111,.01,1,1,2)
K ^FH(111,"B",$E(X,1,30),DA)
"^DD",111,111,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",111,111,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",111,111,.01,3)
ANSWER MUST BE 3-30 CHARACTERS IN LENGTH
"^DD",111,111,.01,21,0)
^.001^2^2^3030219^^^
"^DD",111,111,.01,21,1,0)
This field contains the name of a diet or diet modification as
"^DD",111,111,.01,21,2,0)
it would normally be known to ward/medical personnel.
"^DD",111,111,.01,"AUDIT")
y
"^DD",111,111,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",111,111,.01,"DT")
2880108
"^DD",111,111,1,0)
SYNONYM^F^^0;2^K:$L(X)>12!($L(X)<1) X
"^DD",111,111,1,1,0)
^.1
"^DD",111,111,1,1,1,0)
111^C
"^DD",111,111,1,1,1,1)
S ^FH(111,"C",$E(X,1,30),DA)=""
"^DD",111,111,1,1,1,2)
K ^FH(111,"C",$E(X,1,30),DA)
"^DD",111,111,1,3)
ANSWER MUST BE 1-12 CHARACTERS IN LENGTH
"^DD",111,111,1,21,0)
^^2^2^2891120^^^
"^DD",111,111,1,21,1,0)
This field may contain a synonym for the diet name; the synonym
"^DD",111,111,1,21,2,0)
is generally terminology known and used by ward/medical personnel.
"^DD",111,111,1,"DT")
2850202
"^DD",111,111,2,0)
ASK EXPIRATION DATE?^S^Y:YES;N:NO;^0;3^Q
"^DD",111,111,2,21,0)
^^4^4^2880709^
"^DD",111,111,2,21,1,0)
This field, when answered YES, will result in the user
"^DD",111,111,2,21,2,0)
being prompted for a diet expiration date (as well as the
"^DD",111,111,2,21,3,0)
start date) whenever this diet is contained in a total
"^DD",111,111,2,21,4,0)
diet order.
"^DD",111,111,2,"DT")
2850608
"^DD",111,111,3,0)
DIET PRECEDENCE^RNJ2,0^^0;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",111,111,3,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99
"^DD",111,111,3,21,0)
^^6^6^2880709^
"^DD",111,111,3,21,1,0)
This is a numerical value which performs two functions:
"^DD",111,111,3,21,2,0)
no two diet modifications with the same precedence may be
"^DD",111,111,3,21,3,0)
selected. The same number can therefore be assigned to
"^DD",111,111,3,21,4,0)
mutually-exclusive diet modifications. Secondly, the diet
"^DD",111,111,3,21,5,0)
modifications will be listed in precedence order, from
"^DD",111,111,3,21,6,0)
low to high.
"^DD",111,111,3,"DT")
2850129
"^DD",111,111,4,0)
PRODUCTION DIET^R*P116.2'^FH(116.2,^0;5^S DIC("S")="I $P(^(0),""^"",4)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",111,111,4,12)
Include only non-combo production diets.
"^DD",111,111,4,12.1)
S DIC("S")="I $P(^(0),""^"",4)'=""Y"""
"^DD",111,111,4,21,0)
^^3^3^2880709^
"^DD",111,111,4,21,1,0)
This field contains the Production Diet entry (file 116.2) which
"^DD",111,111,4,21,2,0)
would be prepared for this diet modification were it to stand
"^DD",111,111,4,21,3,0)
alone from other diet modifications.
"^DD",111,111,4,"DT")
2870713
"^DD",111,111,5,0)
BULLETIN CLINICIAN?^S^Y:YES;N:NO;^0;6^Q
"^DD",111,111,5,21,0)
^^3^3^2950717^^
"^DD",111,111,5,21,1,0)
This field, if answered YES, will result in a bulletin being
"^DD",111,111,5,21,2,0)
sent to the clinician responsible for the ward on which the
"^DD",111,111,5,21,3,0)
patient resides any time this diet modification is ordered.
"^DD",111,111,5,"DT")
2850608
"^DD",111,111,6,0)
ABBREVIATED LABEL^RF^^0;7^K:$L(X)>12!($L(X)<1) X
"^DD",111,111,6,3)
ANSWER MUST BE 1-12 CHARACTERS IN LENGTH
"^DD",111,111,6,21,0)
^^3^3^2880709^
"^DD",111,111,6,21,1,0)
This is an abbreviated label title used on diet cards; the
"^DD",111,111,6,21,2,0)
terminology and abbreviations will normally be those used
"^DD",111,111,6,21,3,0)
by dietetic personnel.
"^DD",111,111,6,"DT")
2850202
"^DD",111,111,10,0)
ALTERNATE NAME^111.01^^AN;0
"^DD",111,111,10,21,0)
^^3^3^2880714^^
"^DD",111,111,10,21,1,0)
This field may be used for any number of alternate names for
"^DD",111,111,10,21,2,0)
the diet modification. These alternative names will normally
"^DD",111,111,10,21,3,0)
be those used by ward/medical personnel.
"^DD",111,111,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",111,111,99,1,0)
^.1
"^DD",111,111,99,1,1,0)
111^AC^MUMPS
"^DD",111,111,99,1,1,1)
K:X'="Y" ^FH(111,DA,"I")
"^DD",111,111,99,1,1,2)
K ^FH(111,DA,"I")
"^DD",111,111,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",111,111,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",111,111,99,1,1,"%D",2,0)
inactive entries.
"^DD",111,111,99,21,0)
^^2^2^2931116^^
"^DD",111,111,99,21,1,0)
This field, if answered YES, will prohibit further selection
"^DD",111,111,99,21,2,0)
of this diet modification by ward personnel.
"^DD",111,111,99,"DT")
2860813
"^DD",111,111.01,0)
ALTERNATE NAME SUB-FIELD^NL^.01^1
"^DD",111,111.01,0,"NM","ALTERNATE NAME")
 
"^DD",111,111.01,0,"UP")
111
"^DD",111,111.01,.01,0)
ALTERNATE NAME^MF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<1) X
"^DD",111,111.01,.01,1,0)
^.1
"^DD",111,111.01,.01,1,1,0)
111^D
"^DD",111,111.01,.01,1,1,1)
S ^FH(111,"D",$E(X,1,30),DA(1),DA)=""
"^DD",111,111.01,.01,1,1,2)
K ^FH(111,"D",$E(X,1,30),DA(1),DA)
"^DD",111,111.01,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",111,111.01,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the ALTERNATE NAME field.
"^DD",111,111.01,.01,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",111,111.01,.01,21,0)
^^1^1^2880714^
"^DD",111,111.01,.01,21,1,0)
This field contains an alternate name for the diet.
"^DD",111,111.01,.01,"DT")
2900510
"^DD",111.1,111.1,0)
FIELD^^99^16
"^DD",111.1,111.1,0,"DDA")
N
"^DD",111.1,111.1,0,"DT")
2950418
"^DD",111.1,111.1,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",111.1,111.1,0,"IX","AC",111.1,99)

"^DD",111.1,111.1,0,"IX","B",111.1,.01)

"^DD",111.1,111.1,0,"NM","DIET PATTERNS")

"^DD",111.1,111.1,0,"SCR")
I '$D(^FH(111.1,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",111.1,111.1,0,"VRPK")
FH
"^DD",111.1,111.1,.01,0)
NAME^RF^^0;1^K:$L(X)>70!($L(X)<3)!'(X'?1P.E) X
"^DD",111.1,111.1,.01,1,0)
^.1
"^DD",111.1,111.1,.01,1,1,0)
111.1^B
"^DD",111.1,111.1,.01,1,1,1)
S ^FH(111.1,"B",$E(X,1,30),DA)=""
"^DD",111.1,111.1,.01,1,1,2)
K ^FH(111.1,"B",$E(X,1,30),DA)
"^DD",111.1,111.1,.01,3)
Answer must be 3-70 characters in length.
"^DD",111.1,111.1,.01,21,0)
^^1^1^2940721^^^^
"^DD",111.1,111.1,.01,21,1,0)
This field contains the names of the diet or the diet modification ordered.
"^DD",111.1,111.1,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",111.1,111.1,.01,"DT")
2940103
"^DD",111.1,111.1,1,0)
DIET1^P111'^FH(111,^0;2^Q
"^DD",111.1,111.1,1,21,0)
^^2^2^2940526^^^^
"^DD",111.1,111.1,1,21,1,0)
This is the first diet modification selected from the Diets (111)
"^DD",111.1,111.1,1,21,2,0)
file.
"^DD",111.1,111.1,1,"DT")
2931130
"^DD",111.1,111.1,2,0)
DIET2^P111'^FH(111,^0;3^Q
"^DD",111.1,111.1,2,21,0)
^^2^2^2940526^^
"^DD",111.1,111.1,2,21,1,0)
This is the second diet modification selected from the Diets (111)
"^DD",111.1,111.1,2,21,2,0)
file.
"^DD",111.1,111.1,2,"DT")
2931130
"^DD",111.1,111.1,3,0)
DIET3^P111'^FH(111,^0;4^Q
"^DD",111.1,111.1,3,21,0)
^^2^2^2940526^
"^DD",111.1,111.1,3,21,1,0)
This is the third diet modification selected from the Diets (111)
"^DD",111.1,111.1,3,21,2,0)
file.
"^DD",111.1,111.1,3,"DT")
2931130
"^DD",111.1,111.1,4,0)
DIET4^P111'^FH(111,^0;5^Q
"^DD",111.1,111.1,4,21,0)
^^2^2^2940526^
"^DD",111.1,111.1,4,21,1,0)
This is the fourth diet modification selected from the Diets (111)
"^DD",111.1,111.1,4,21,2,0)
file.
"^DD",111.1,111.1,4,"DT")
2931130
"^DD",111.1,111.1,5,0)
DIET5^P111'^FH(111,^0;6^Q
"^DD",111.1,111.1,5,21,0)
^^2^2^2940526^
"^DD",111.1,111.1,5,21,1,0)
This is the fifth diet modification selected from the Diets (111)
"^DD",111.1,111.1,5,21,2,0)
file.
"^DD",111.1,111.1,5,"DT")
2931130
"^DD",111.1,111.1,10,0)
PRODUCTION DIET^P116.2'^FH(116.2,^0;7^Q
"^DD",111.1,111.1,10,21,0)
^^4^4^2950707^^
"^DD",111.1,111.1,10,21,1,0)
This is a pointer to the Production Diet (116.2) file and is the
"^DD",111.1,111.1,10,21,2,0)
outcome of the 'diet recoding' algorithm which is based upon the
"^DD",111.1,111.1,10,21,3,0)
diet modifications selected.  It is not present for NPO types of
"^DD",111.1,111.1,10,21,4,0)
orders.
"^DD",111.1,111.1,10,"DT")
2931130
"^DD",111.1,111.1,15,0)
BREAKFAST MODIFICATIONS^111.115P^^B;0
"^DD",111.1,111.1,15,21,0)
^^2^2^2950403^^^^
"^DD",111.1,111.1,15,21,1,0)
This multiple contains all the breakfast Recipe Categories selected
"^DD",111.1,111.1,15,21,2,0)
and their quantities.
"^DD",111.1,111.1,15.5,0)
ASSOCIATED STANDING ORDERS (B)^111.11P^^BS;0
"^DD",111.1,111.1,15.5,21,0)
^^2^2^2950717^^^^
"^DD",111.1,111.1,15.5,21,1,0)
This multiple contains all the Standing Orders selected from file
"^DD",111.1,111.1,15.5,21,2,0)
118.3 for breakfast.
"^DD",111.1,111.1,15.5,"DT")
2940721
"^DD",111.1,111.1,16,0)
NOON MODIFICATIONS^111.116P^^N;0
"^DD",111.1,111.1,16,21,0)
^^2^2^2940526^
"^DD",111.1,111.1,16,21,1,0)
This multiple contains all the noon Recipe Categories selected
"^DD",111.1,111.1,16,21,2,0)
and their quantities.
"^DD",111.1,111.1,16.5,0)
ASSOCIATED STANDING ORDERS (N)^111.12P^^NS;0
"^DD",111.1,111.1,16.5,21,0)
^^2^2^2940721^
"^DD",111.1,111.1,16.5,21,1,0)
This multiple contains all the Standing Orders selected from file 118.3
"^DD",111.1,111.1,16.5,21,2,0)
for noon.
"^DD",111.1,111.1,16.5,"DT")
2940721
"^DD",111.1,111.1,17,0)
EVENING MODIFICATIONS^111.117P^^E;0
"^DD",111.1,111.1,17,21,0)
^^2^2^2940526^^
"^DD",111.1,111.1,17,21,1,0)
This multiple contains all the evening Recipe Categories selected
"^DD",111.1,111.1,17,21,2,0)
and their quantities.
"^DD",111.1,111.1,17.5,0)
ASSOCIATED STANDING ORDERS (E)^111.13P^^ES;0
"^DD",111.1,111.1,17.5,21,0)
^^2^2^2950717^^
"^DD",111.1,111.1,17.5,21,1,0)
This multiple contains all the Standing Orders selected from file
"^DD",111.1,111.1,17.5,21,2,0)
118.3 for evening.
"^DD",111.1,111.1,17.5,"DT")
2940721
"^DD",111.1,111.1,18,0)
ASSOCIATED SF MENU^*P118.1'^FH(118.1,^0;8^S DIC("S")="I Y'=1" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",111.1,111.1,18,12)
Cannot enter INDIVIDUALIZED Supplemental Menu
"^DD",111.1,111.1,18,12.1)
S DIC("S")="I Y'=1"
"^DD",111.1,111.1,18,21,0)
^^3^3^2950717^^^^
"^DD",111.1,111.1,18,21,1,0)
This field will contain the Supplemental Feeding Menu, from file 118.1,
"^DD",111.1,111.1,18,21,2,0)
that will be added to the patient's supplemental feeding entry when
"^DD",111.1,111.1,18,21,3,0)
this diet or diet modification is ordered for the patient.
"^DD",111.1,111.1,18,"DT")
2940727
"^DD",111.1,111.1,19,0)
DIET RESTRICTION^111.119P^^RES;0
"^DD",111.1,111.1,19,12)
This screen allows the user to only select the dislikes from the Food Preference file.
"^DD",111.1,111.1,19,12.1)
S DIC("S")="I $P(^(0),U,2)=""D"""
"^DD",111.1,111.1,19,21,0)
^^2^2^2950403^^^
"^DD",111.1,111.1,19,21,1,0)
This multiple contains all the Diet restrictions associated to the
"^DD",111.1,111.1,19,21,2,0)
Diet modification.
"^DD",111.1,111.1,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",111.1,111.1,99,1,0)
^.1
"^DD",111.1,111.1,99,1,1,0)
111.1^AC^MUMPS
"^DD",111.1,111.1,99,1,1,1)
K:X'="Y" ^FH(111.1,DA,"I")
"^DD",111.1,111.1,99,1,1,2)
K ^FH(111.1,DA,"I")
"^DD",111.1,111.1,99,1,1,"%D",0)
^^2^2^3000202
"^DD",111.1,111.1,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",111.1,111.1,99,1,1,"%D",2,0)
inactive entries.
"^DD",111.1,111.1,99,21,0)
^^2^2^3000202
"^DD",111.1,111.1,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",111.1,111.1,99,21,2,0)
further selection of this entry.
"^DD",111.1,111.1,99,"DT")
3000223
"^DD",111.1,111.11,0)
ASSOCIATED STANDING ORDERS (B) SUB-FIELD^^1^2
"^DD",111.1,111.11,0,"DT")
2940722
"^DD",111.1,111.11,0,"IX","B",111.11,.01)

"^DD",111.1,111.11,0,"NM","ASSOCIATED STANDING ORDERS (B)")

"^DD",111.1,111.11,0,"UP")
111.1
"^DD",111.1,111.11,.01,0)
ASSOCIATED STANDING ORDERS (B)^MP118.3'^FH(118.3,^0;1^Q
"^DD",111.1,111.11,.01,1,0)
^.1
"^DD",111.1,111.11,.01,1,1,0)
111.11^B
"^DD",111.1,111.11,.01,1,1,1)
S ^FH(111.1,DA(1),"BS","B",$E(X,1,30),DA)=""
"^DD",111.1,111.11,.01,1,1,2)
K ^FH(111.1,DA(1),"BS","B",$E(X,1,30),DA)
"^DD",111.1,111.11,.01,21,0)
^^3^3^2950717^^^^
"^DD",111.1,111.11,.01,21,1,0)
The Standing Orders on this multiple will all be added to the patient's
"^DD",111.1,111.11,.01,21,2,0)
Standing Order entries for the meal breakfast when this diet or diet
"^DD",111.1,111.11,.01,21,3,0)
modification is ordered for the patient.
"^DD",111.1,111.11,.01,"DT")
2940721
"^DD",111.1,111.11,1,0)
QUANTITY^NJ1,0^^0;2^K:+X'=X!(X>9)!(X<1)!(X?.E1"."1N.N) X
"^DD",111.1,111.11,1,3)
Type a Number between 1 and 9, 0 Decimal Digits
"^DD",111.1,111.11,1,21,0)
^^1^1^2940722^^
"^DD",111.1,111.11,1,21,1,0)
This is the quantity of the Standing Order.
"^DD",111.1,111.11,1,"DT")
2940722
"^DD",111.1,111.115,0)
BREAKFAST MODIFICATIONS SUB-FIELD^^1^2
"^DD",111.1,111.115,0,"DT")
2940706
"^DD",111.1,111.115,0,"IX","B",111.115,.01)

"^DD",111.1,111.115,0,"NM","BREAKFAST MODIFICATIONS")

"^DD",111.1,111.115,0,"UP")
111.1
"^DD",111.1,111.115,.01,0)
BREAKFAST MODIFICATIONS^MP114.1'^FH(114.1,^0;1^Q
"^DD",111.1,111.115,.01,1,0)
^.1
"^DD",111.1,111.115,.01,1,1,0)
111.115^B
"^DD",111.1,111.115,.01,1,1,1)
S ^FH(111.1,DA(1),"B","B",$E(X,1,30),DA)=""
"^DD",111.1,111.115,.01,1,1,2)
K ^FH(111.1,DA(1),"B","B",$E(X,1,30),DA)
"^DD",111.1,111.115,.01,3)

"^DD",111.1,111.115,.01,21,0)
^^5^5^2950403^^^^
"^DD",111.1,111.115,.01,21,1,0)
This is the Recipe Category selected from file (114.1) for the
"^DD",111.1,111.115,.01,21,2,0)
breakfast meal for the selected diet modifications.  It determines
"^DD",111.1,111.115,.01,21,3,0)
which recipes each patient under the diet modifications will
"^DD",111.1,111.115,.01,21,4,0)
receive on the Tray Ticket.  This Recipe Category is also used
"^DD",111.1,111.115,.01,21,5,0)
in producing the Diet Cards.
"^DD",111.1,111.115,.01,"DT")
2940103
"^DD",111.1,111.115,1,0)
QUANTITY^RNJ4,2^^0;2^K:+X'=X!(X>9.99)!(X<0)!(X?.E1"."3N.N) X
"^DD",111.1,111.115,1,3)
Type a Number between 0 and 9.99, 2 Decimal Digits
"^DD",111.1,111.115,1,21,0)
^^3^3^2940722^^^^
"^DD",111.1,111.115,1,21,1,0)
This is the selected quantity for the Recipe Category.  This quantity
"^DD",111.1,111.115,1,21,2,0)
determines the amount of the recipe on the Tray Ticket.  If a zero
"^DD",111.1,111.115,1,21,3,0)
is entered, the recipe is omitted.
"^DD",111.1,111.115,1,"DT")
2940706
"^DD",111.1,111.116,0)
NOON MODIFICATIONS SUB-FIELD^^1^2
"^DD",111.1,111.116,0,"DT")
2940706
"^DD",111.1,111.116,0,"IX","B",111.116,.01)

"^DD",111.1,111.116,0,"NM","NOON MODIFICATIONS")

"^DD",111.1,111.116,0,"UP")
111.1
"^DD",111.1,111.116,.01,0)
NOON MODIFICATIONS^MP114.1'^FH(114.1,^0;1^Q
"^DD",111.1,111.116,.01,1,0)
^.1
"^DD",111.1,111.116,.01,1,1,0)
111.116^B
"^DD",111.1,111.116,.01,1,1,1)
S ^FH(111.1,DA(1),"N","B",$E(X,1,30),DA)=""
"^DD",111.1,111.116,.01,1,1,2)
K ^FH(111.1,DA(1),"N","B",$E(X,1,30),DA)
"^DD",111.1,111.116,.01,21,0)
^^5^5^2940526^^^
"^DD",111.1,111.116,.01,21,1,0)
This is the Recipe Category selected from the file (114.1) for the
"^DD",111.1,111.116,.01,21,2,0)
noon meal for the selected diet modifications.  It determines
"^DD",111.1,111.116,.01,21,3,0)
which recipes each patient under the diet modifications will
"^DD",111.1,111.116,.01,21,4,0)
receive on the Tray Ticket.  This Recipe Category is also used
"^DD",111.1,111.116,.01,21,5,0)
in producing the Diet Cards.
"^DD",111.1,111.116,.01,"DT")
2940103
"^DD",111.1,111.116,1,0)
QUANTITY^RNJ4,2^^0;2^K:+X'=X!(X>9.99)!(X<0)!(X?.E1"."3N.N) X
"^DD",111.1,111.116,1,3)
Type a Number between 0 and 9.99, 2 Decimal Digits
"^DD",111.1,111.116,1,21,0)
^^3^3^2940526^^
"^DD",111.1,111.116,1,21,1,0)
This is the selected quantity for the Recipe Category.  This quantity
"^DD",111.1,111.116,1,21,2,0)
determines the amount of the recipe on the Tray Ticket.  If a zero
"^DD",111.1,111.116,1,21,3,0)
is entered, the recipe is omitted.
"^DD",111.1,111.116,1,"DT")
2940706
"^DD",111.1,111.117,0)
EVENING MODIFICATIONS SUB-FIELD^^1^2
"^DD",111.1,111.117,0,"DT")
2940706
"^DD",111.1,111.117,0,"IX","B",111.117,.01)

"^DD",111.1,111.117,0,"NM","EVENING MODIFICATIONS")

"^DD",111.1,111.117,0,"UP")
111.1
"^DD",111.1,111.117,.01,0)
EVENING MODIFICATIONS^MP114.1'^FH(114.1,^0;1^Q
"^DD",111.1,111.117,.01,1,0)
^.1
"^DD",111.1,111.117,.01,1,1,0)
111.117^B
"^DD",111.1,111.117,.01,1,1,1)
S ^FH(111.1,DA(1),"E","B",$E(X,1,30),DA)=""
"^DD",111.1,111.117,.01,1,1,2)
K ^FH(111.1,DA(1),"E","B",$E(X,1,30),DA)
"^DD",111.1,111.117,.01,21,0)
^^5^5^2940526^^^
"^DD",111.1,111.117,.01,21,1,0)
This is the Recipe Category selected from the file (114.1) for the
"^DD",111.1,111.117,.01,21,2,0)
evening meal for the selected diet modifications.  It determines
"^DD",111.1,111.117,.01,21,3,0)
which recipes each patient under the diet modifications will
"^DD",111.1,111.117,.01,21,4,0)
receive on the Tray Ticket.  This Recipe Category is also used
"^DD",111.1,111.117,.01,21,5,0)
in producing the Diet Cards.
"^DD",111.1,111.117,.01,"DT")
2940103
"^DD",111.1,111.117,1,0)
QUANTITY^RNJ4,2^^0;2^K:+X'=X!(X>9.99)!(X<0)!(X?.E1"."3N.N) X
"^DD",111.1,111.117,1,3)
Type a Number between 0 and 9.99, 2 Decimal Digits
"^DD",111.1,111.117,1,21,0)
^^3^3^2940526^
"^DD",111.1,111.117,1,21,1,0)
This is the selected quantity for the Recipe Category.  This quantity
"^DD",111.1,111.117,1,21,2,0)
determines the amount of the recipe on the Tray Ticket.  If a zero
"^DD",111.1,111.117,1,21,3,0)
is entered, the recipe is omitted.
"^DD",111.1,111.117,1,"DT")
2940706
"^DD",111.1,111.119,0)
DIET RESTRICTION SUB-FIELD^^1^2
"^DD",111.1,111.119,0,"DT")
2950418
"^DD",111.1,111.119,0,"IX","B",111.119,.01)

"^DD",111.1,111.119,0,"NM","DIET RESTRICTION")

"^DD",111.1,111.119,0,"UP")
111.1
"^DD",111.1,111.119,.01,0)
DIET RESTRICTION^M*P115.2'^FH(115.2,^0;1^S DIC("S")="I $P(^(0),U,2)=""D""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",111.1,111.119,.01,1,0)
^.1
"^DD",111.1,111.119,.01,1,1,0)
111.119^B
"^DD",111.1,111.119,.01,1,1,1)
S ^FH(111.1,DA(1),"RES","B",$E(X,1,30),DA)=""
"^DD",111.1,111.119,.01,1,1,2)
K ^FH(111.1,DA(1),"RES","B",$E(X,1,30),DA)
"^DD",111.1,111.119,.01,12)
This screen allows the user to only select the dislikes from the Food Preference file.
"^DD",111.1,111.119,.01,12.1)
S DIC("S")="I $P(^(0),U,2)=""D"""
"^DD",111.1,111.119,.01,21,0)
^^1^1^2950403^^^^
"^DD",111.1,111.119,.01,21,1,0)
This is the dislike food preference from the file (115.2).
"^DD",111.1,111.119,.01,"DT")
2950403
"^DD",111.1,111.119,1,0)
MEALS^RFX^^0;2^S:$P("ALL",X,1)="" X="BNE" S %=X,X="" S:%["B" X="B" S:%["N" X=X_"N" S:%["E" X=X_"E" K:$L(%)'=$L(X) X K %
"^DD",111.1,111.119,1,3)
Answer should be a string of meals (e.g., B or BN or BNE) or A for all meals.
"^DD",111.1,111.119,1,21,0)
^^2^2^2950418^^^
"^DD",111.1,111.119,1,21,1,0)
This field contains the meals (B N and E) for which this diet
"^DD",111.1,111.119,1,21,2,0)
restriction is applicable.
"^DD",111.1,111.119,1,"DT")
2950418
"^DD",111.1,111.12,0)
ASSOCIATED STANDING ORDERS (N) SUB-FIELD^^1^2
"^DD",111.1,111.12,0,"DT")
2940722
"^DD",111.1,111.12,0,"IX","B",111.12,.01)

"^DD",111.1,111.12,0,"NM","ASSOCIATED STANDING ORDERS (N)")

"^DD",111.1,111.12,0,"UP")
111.1
"^DD",111.1,111.12,.01,0)
ASSOCIATED STANDING ORDERS (N)^MP118.3'^FH(118.3,^0;1^Q
"^DD",111.1,111.12,.01,1,0)
^.1
"^DD",111.1,111.12,.01,1,1,0)
111.12^B
"^DD",111.1,111.12,.01,1,1,1)
S ^FH(111.1,DA(1),"NS","B",$E(X,1,30),DA)=""
"^DD",111.1,111.12,.01,1,1,2)
K ^FH(111.1,DA(1),"NS","B",$E(X,1,30),DA)
"^DD",111.1,111.12,.01,21,0)
^^3^3^2950717^^
"^DD",111.1,111.12,.01,21,1,0)
The Standing Orders on this multiple will all be added to the patient's
"^DD",111.1,111.12,.01,21,2,0)
Standing Order entries for the meal noon when this diet or diet
"^DD",111.1,111.12,.01,21,3,0)
modification is ordered for the patient.
"^DD",111.1,111.12,.01,"DT")
2940721
"^DD",111.1,111.12,1,0)
QUANTITY^NJ1,0^^0;2^K:+X'=X!(X>9)!(X<1)!(X?.E1"."1N.N) X
"^DD",111.1,111.12,1,3)
Type a Number between 1 and 9, 0 Decimal Digits
"^DD",111.1,111.12,1,21,0)
^^1^1^2940722^
"^DD",111.1,111.12,1,21,1,0)
This is the quantity of the Standing Order.
"^DD",111.1,111.12,1,"DT")
2940722
"^DD",111.1,111.13,0)
ASSOCIATED STANDING ORDERS (E) SUB-FIELD^^1^2
"^DD",111.1,111.13,0,"DT")
2940722
"^DD",111.1,111.13,0,"IX","B",111.13,.01)

"^DD",111.1,111.13,0,"NM","ASSOCIATED STANDING ORDERS (E)")

"^DD",111.1,111.13,0,"UP")
111.1
"^DD",111.1,111.13,.01,0)
ASSOCIATED STANDING ORDERS (E)^MP118.3'^FH(118.3,^0;1^Q
"^DD",111.1,111.13,.01,1,0)
^.1
"^DD",111.1,111.13,.01,1,1,0)
111.13^B
"^DD",111.1,111.13,.01,1,1,1)
S ^FH(111.1,DA(1),"ES","B",$E(X,1,30),DA)=""
"^DD",111.1,111.13,.01,1,1,2)
K ^FH(111.1,DA(1),"ES","B",$E(X,1,30),DA)
"^DD",111.1,111.13,.01,21,0)
^^3^3^2950717^^
"^DD",111.1,111.13,.01,21,1,0)
The Standing Orders on this multiple will all be added to the patient's
"^DD",111.1,111.13,.01,21,2,0)
Standing Order entries for the evening meal when this diet or diet
"^DD",111.1,111.13,.01,21,3,0)
modification is ordered for the patient.
"^DD",111.1,111.13,.01,"DT")
2940721
"^DD",111.1,111.13,1,0)
QUANTITY^NJ1,0^^0;2^K:+X'=X!(X>9)!(X<1)!(X?.E1"."1N.N) X
"^DD",111.1,111.13,1,3)
Type a Number between 1 and 9, 0 Decimal Digits
"^DD",111.1,111.13,1,21,0)
^^1^1^2940722^
"^DD",111.1,111.13,1,21,1,0)
This is the quantity of the Standing Order.
"^DD",111.1,111.13,1,"DT")
2940722
"^DD",112,112,0)
FIELD^^99^76
"^DD",112,112,0,"DT")
2930520
"^DD",112,112,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",112,112,0,"IX","AC",112,4)

"^DD",112,112,0,"IX","AC",112,99)

"^DD",112,112,0,"IX","AD",112,4.2)

"^DD",112,112,0,"IX","AE",112,4.4)

"^DD",112,112,0,"IX","AQ",112,.01)

"^DD",112,112,0,"IX","B",112,.01)

"^DD",112,112,0,"IX","B",112,4.2)

"^DD",112,112,0,"IX","C",112,1)

"^DD",112,112,0,"NM","FOOD NUTRIENTS")

"^DD",112,112,0,"PT",112.63,.01)

"^DD",112,112,0,"PT",113,27)

"^DD",112,112,0,"PT",114,102)

"^DD",112,112,0,"PT",114.01,2)

"^DD",112,112,0,"SCR")
I '$D(^FH(112,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",112,112,0,"VRPK")
FH
"^DD",112,112,.01,0)
NAME^RF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>60!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",112,112,.01,1,0)
^.1
"^DD",112,112,.01,1,1,0)
112^B
"^DD",112,112,.01,1,1,1)
S ^FHNU("B",$E(X,1,30),DA)=""
"^DD",112,112,.01,1,1,2)
K ^FHNU("B",$E(X,1,30),DA)
"^DD",112,112,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",112,112,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",112,112,.01,1,2,0)
112^AQ^MUMPS
"^DD",112,112,.01,1,2,1)
I $D(^FHNU(DA,.6)),$P(^(.6),"^",1)="Y" S ^FHNU("AQ",$E(X,1,30),DA)=""
"^DD",112,112,.01,1,2,2)
K ^FHNU("AQ",$E(X,1,30),DA)
"^DD",112,112,.01,1,2,"%D",0)
^^2^2^2940824^
"^DD",112,112,.01,1,2,"%D",1,0)
If Field 4 is Yes, then the name is set under an "AQ" quick-list for
"^DD",112,112,.01,1,2,"%D",2,0)
rapid selection.
"^DD",112,112,.01,3)
ANSWER MUST BE 3-60 CHARACTERS IN LENGTH
"^DD",112,112,.01,21,0)
^^1^1^2880717^
"^DD",112,112,.01,21,1,0)
This field contains the name of the food nutrient item.
"^DD",112,112,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",112,112,.01,"DT")
2850406
"^DD",112,112,1,0)
CODE^F^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>6!($L(X)<1) X
"^DD",112,112,1,1,0)
^.1
"^DD",112,112,1,1,1,0)
112^C
"^DD",112,112,1,1,1,1)
S ^FHNU("C",$E(X,1,30),DA)=""
"^DD",112,112,1,1,1,2)
K ^FHNU("C",$E(X,1,30),DA)
"^DD",112,112,1,3)
ANSWER MUST BE 1-6 CHARACTERS IN LENGTH
"^DD",112,112,1,21,0)
^^3^3^2880717^
"^DD",112,112,1,21,1,0)
This field, if present, contains the USDA code of the food
"^DD",112,112,1,21,2,0)
nutrient item. It may be either a Revised Handbook 8 number
"^DD",112,112,1,21,3,0)
or a Handbook 456 number.
"^DD",112,112,2,0)
COMMON UNITS^F^^0;3^K:$L(X)>10!($L(X)<1) X
"^DD",112,112,2,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",112,112,2,21,0)
^^3^3^2880717^
"^DD",112,112,2,21,1,0)
This field represents the type of common units used (e.g., oz.,
"^DD",112,112,2,21,2,0)
serving, each) when quantities are to be represented in common
"^DD",112,112,2,21,3,0)
units.
"^DD",112,112,3,0)
GRAMS/COMMON UNIT^NJ8,3^^0;4^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,3,3)
TYPE A NUMBER BETWEEN 0 AND 9999
"^DD",112,112,3,21,0)
^^2^2^2930510^^
"^DD",112,112,3,21,1,0)
This field contains the number of grams in the common unit
"^DD",112,112,3,21,2,0)
specified for this nutrient.
"^DD",112,112,4,0)
ORIGINAL NAME ON QUICK LIST?^S^Y:YES;N:NO;^.6;1^Q
"^DD",112,112,4,1,0)
^.1
"^DD",112,112,4,1,1,0)
112^AC^MUMPS
"^DD",112,112,4,1,1,1)
I X="Y" S X1=$P(^FHNU(DA,0),U,1) S:X1'="" ^FHNU("AQ",$E(X1,1,30),DA)=""
"^DD",112,112,4,1,1,2)
S X1=$P(^FHNU(DA,0),U,1) K:X1'="" ^FHNU("AQ",$E(X1,1,30),DA)
"^DD",112,112,4,1,1,"%D",0)
^^2^2^2940824^
"^DD",112,112,4,1,1,"%D",1,0)
If Field is Yes, then Name (.01 Field) is set under "AQ" Quick List
"^DD",112,112,4,1,1,"%D",2,0)
for rapid selection.
"^DD",112,112,4,21,0)
^^3^3^2880717^
"^DD",112,112,4,21,1,0)
This field, when answered YES, means that the main name
"^DD",112,112,4,21,2,0)
of this nutrient will be on a Quick List for rapid look-up.
"^DD",112,112,4,21,3,0)
In short, this is a commonly used item.
"^DD",112,112,4,"DT")
2850615
"^DD",112,112,4.2,0)
ALTERNATE NAME^F^^.6;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>40!($L(X)<3) X
"^DD",112,112,4.2,1,0)
^.1
"^DD",112,112,4.2,1,1,0)
112^B^MNEMONIC
"^DD",112,112,4.2,1,1,1)
S:'$D(^FHNU("B",$E(X,1,30),DA)) ^(DA)=1
"^DD",112,112,4.2,1,1,2)
I $D(^FHNU("B",$E(X,1,30),DA)),^(DA) K ^(DA)
"^DD",112,112,4.2,1,1,"%D",0)
^^1^1^2911118^
"^DD",112,112,4.2,1,1,"%D",1,0)
This is the normal B cross-reference of the ALTERNATE NAME field.
"^DD",112,112,4.2,1,2,0)
112^AD^MUMPS
"^DD",112,112,4.2,1,2,1)
I $D(^FHNU(DA,.6)),$P(^(.6),U,3)="Y" S ^FHNU("AQ",$E(X,1,30),DA)=""
"^DD",112,112,4.2,1,2,2)
K ^FHNU("AQ",$E(X,1,30),DA)
"^DD",112,112,4.2,1,2,"%D",0)
^^2^2^2940824^
"^DD",112,112,4.2,1,2,"%D",1,0)
If Field 4.4 is Yes, then this Alternate Name is set under the "AQ"
"^DD",112,112,4.2,1,2,"%D",2,0)
Quick List for rapid selection.
"^DD",112,112,4.2,3)
ANSWER MUST BE 3-40 CHARACTERS IN LENGTH
"^DD",112,112,4.2,21,0)
^^1^1^2880717^
"^DD",112,112,4.2,21,1,0)
This field may contain an alternate name for the nutrient item.
"^DD",112,112,4.2,"DT")
2900510
"^DD",112,112,4.4,0)
ALT NAME QUICK LIST?^S^Y:YES;N:NO;^.6;3^Q
"^DD",112,112,4.4,1,0)
^.1
"^DD",112,112,4.4,1,1,0)
112^AE^MUMPS
"^DD",112,112,4.4,1,1,1)
I X="Y" S X1=$P(^FHNU(DA,.6),U,2) S:X1'="" ^FHNU("AQ",$E(X1,1,30),DA)=""
"^DD",112,112,4.4,1,1,2)
S X1=$P(^FHNU(DA,.6),U,2) K:X1'="" ^FHNU("AQ",$E(X1,1,30),DA)
"^DD",112,112,4.4,1,1,"%D",0)
^^2^2^2940824^
"^DD",112,112,4.4,1,1,"%D",1,0)
This field, when answered Yes, will result in the Alternate Name (Field
"^DD",112,112,4.4,1,1,"%D",2,0)
4.2) being placed under the "AQ" Quick List for rapid selection.
"^DD",112,112,4.4,21,0)
^^2^2^2880717^
"^DD",112,112,4.4,21,1,0)
This field, when answered YES, means that the alternate name
"^DD",112,112,4.4,21,2,0)
of this nutrient is also on the Quick List for rapid look-up.
"^DD",112,112,4.4,"DT")
2850615
"^DD",112,112,5,0)
% AS PURCHASED^NJ3,0^^0;5^K:+X'=X!(X>600)!(X<0)!(X?.E1"."1N.N) X
"^DD",112,112,5,3)
Type a Number between 0 and 600, 0 Decimal Digits
"^DD",112,112,5,21,0)
^^2^2^2930520^^^^
"^DD",112,112,5,21,1,0)
This field contains the percentage of the as purchased weight
"^DD",112,112,5,21,2,0)
that is present after preparation.
"^DD",112,112,5,"DT")
2930520
"^DD",112,112,6,0)
EDITABLE?^SI^Y:YES;N:NO;^0;6^Q
"^DD",112,112,6,3)
N means that entry cannot be edited (USDA data)
"^DD",112,112,6,21,0)
^^3^3^2880717^
"^DD",112,112,6,21,1,0)
This field, when answered NO, means that the item is an USDA
"^DD",112,112,6,21,2,0)
item and that the Handbook values for the various nutrients
"^DD",112,112,6,21,3,0)
cannot be edited by dietetic personnel.
"^DD",112,112,6,"DT")
2850322
"^DD",112,112,7,0)
TYPE^S^E:EDIBLE;R:RAW/RARE;X:RECIPE;^0;7^Q
"^DD",112,112,7,21,0)
^^3^3^2921111^^^^
"^DD",112,112,7,21,1,0)
This field, if E, will allow selection of edible foods for energy
"^DD",112,112,7,21,2,0)
analyses; if R, can be selected for recipe analyses.
"^DD",112,112,7,21,3,0)
If X, analysis is of a recipe in File 114 and cannot be selected.
"^DD",112,112,7,"DT")
2921111
"^DD",112,112,11,0)
PROTEIN; GM/100G^NJ9,3^^1;1^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,11,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,11,21,0)
^^1^1^2880710^
"^DD",112,112,11,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,12,0)
LIPIDS; GM/100G^NJ9,3^^1;2^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,12,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,12,21,0)
^^1^1^2930510^^
"^DD",112,112,12,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,13,0)
CARBOHYDRATE; GM/100G^NJ9,3^^1;3^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,13,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,13,21,0)
^^1^1^2880710^
"^DD",112,112,13,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,14,0)
FOOD ENERGY; KCAL/100G^NJ9,3^^1;4^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,14,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,14,21,0)
^^1^1^2880710^
"^DD",112,112,14,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,15,0)
WATER; GM/100G^NJ9,3^^1;5^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,15,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,15,21,0)
^^1^1^2880710^
"^DD",112,112,15,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,18,0)
CALCIUM; MG/100G^NJ9,3^^1;8^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,18,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,18,21,0)
^^1^1^2880710^
"^DD",112,112,18,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,19,0)
IRON; MG/100G^NJ9,3^^1;9^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,19,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,19,21,0)
^^1^1^2880710^
"^DD",112,112,19,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,20,0)
MAGNESIUM; MG/100G^NJ9,3^^1;10^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,20,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,20,21,0)
^^1^1^2880710^
"^DD",112,112,20,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,21,0)
PHOSPHORUS; MG/100G^NJ9,3^^1;11^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,21,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,21,21,0)
^^1^1^2880710^
"^DD",112,112,21,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,22,0)
POTASSIUM; MG/100G^NJ9,3^^1;12^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,22,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,22,21,0)
^^1^1^2880710^
"^DD",112,112,22,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,23,0)
SODIUM; MG/100G^NJ9,3^^1;13^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,23,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,23,21,0)
^^1^1^2880710^
"^DD",112,112,23,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,24,0)
ZINC; MG/100G^NJ9,3^^1;14^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,24,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,24,21,0)
^^1^1^2880710^
"^DD",112,112,24,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,25,0)
COPPER; MG/100G^NJ9,3^^1;15^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,25,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,25,21,0)
^^1^1^2880710^
"^DD",112,112,25,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,26,0)
MANGANESE; MG/100G^NJ9,3^^1;16^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,26,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,26,21,0)
^^1^1^2880710^
"^DD",112,112,26,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,27,0)
ALPHA TOCOPHEROL; MG/100G^NJ9,3^^1;17^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,27,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,27,21,0)
^^1^1^2880710^
"^DD",112,112,27,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,28,0)
VITAMIN A; IU/100G^NJ9,3^^1;18^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,28,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,28,21,0)
^^1^1^2880710^
"^DD",112,112,28,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,29,0)
ASCORBIC ACID; MG/100G^NJ9,3^^1;19^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,29,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,29,21,0)
^^1^1^2880710^
"^DD",112,112,29,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,30,0)
THIAMIN; MG/100G^NJ9,3^^1;20^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,30,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,30,21,0)
^^1^1^2880710^
"^DD",112,112,30,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,31,0)
RIBOFLAVIN; MG/100G^NJ9,3^^2;1^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,31,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,31,21,0)
^^1^1^2880710^
"^DD",112,112,31,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,32,0)
NIACIN; MG/100G^NJ9,3^^2;2^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,32,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,32,21,0)
^^1^1^2930510^^
"^DD",112,112,32,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,33,0)
PANTOTHENIC ACID; MG/100G^NJ9,3^^2;3^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,33,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,33,21,0)
^^1^1^2880710^
"^DD",112,112,33,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,34,0)
VITAMIN B6; MG/100G^NJ9,3^^2;4^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,34,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,34,21,0)
^^1^1^2880710^
"^DD",112,112,34,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,35,0)
FOLATE; MCG/100G^NJ9,3^^2;5^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,35,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,35,21,0)
^^1^1^2880710^
"^DD",112,112,35,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,36,0)
VITAMIN B12; MCG/100G^NJ9,3^^2;6^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,36,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,36,21,0)
^^1^1^2880710^
"^DD",112,112,36,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,37,0)
LINOLEIC ACID; GM/100G^NJ9,3^^2;7^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,37,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,37,21,0)
^^1^1^2880710^
"^DD",112,112,37,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,38,0)
LINOLENIC ACID; GM/100G^NJ9,3^^2;8^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,38,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,38,21,0)
^^1^1^2880710^
"^DD",112,112,38,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,39,0)
CHOLESTEROL; MG/100G^NJ9,3^^2;9^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,39,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,39,21,0)
^^1^1^2880710^
"^DD",112,112,39,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,40,0)
SATURATED FAT; GM/100G^NJ10,3^^2;10^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,40,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,40,21,0)
^^1^1^2880710^
"^DD",112,112,40,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,41,0)
MONOUNSATURATED FAT; GM/100G^NJ10,3^^2;11^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,41,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,41,21,0)
^^1^1^2880710^
"^DD",112,112,41,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,42,0)
POLYUNSATURATED FAT; GM/100G^NJ10,3^^2;12^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,42,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,42,21,0)
^^1^1^2880710^
"^DD",112,112,42,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,43,0)
VITAMIN A; RE/100G^NJ9,3^^2;13^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,43,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,43,21,0)
^^1^1^2880710^
"^DD",112,112,43,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,43,"DT")
2891204
"^DD",112,112,44,0)
ASH; GM/100G^NJ9,3^^2;14^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,44,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,44,21,0)
^^1^1^2880710^
"^DD",112,112,44,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,44,"DT")
2891204
"^DD",112,112,45,0)
ALCOHOL; GM/100G^NJ9,3^^2;15^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,45,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,45,21,0)
^^1^1^2880710^
"^DD",112,112,45,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,46,0)
CAFFEINE; MG/100G^NJ9,3^^2;16^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,46,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,46,21,0)
^^1^1^2880710^
"^DD",112,112,46,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,46,"DT")
2891204
"^DD",112,112,47,0)
TOTAL DIETARY FIBER; GM/100G^NJ9,3^^2;17^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,47,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,47,21,0)
^^1^1^2880710^
"^DD",112,112,47,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,48,0)
TOTAL TOCOPHEROL; MG/100G^NJ9,3^^2;18^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,48,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,48,21,0)
^^1^1^2880710^
"^DD",112,112,48,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,51,0)
TRYPTOPHAN; GM/100G^NJ9,3^^3;1^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,51,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,51,21,0)
^^1^1^2880710^
"^DD",112,112,51,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,52,0)
THREONINE; GM/100G^NJ9,3^^3;2^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,52,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,52,21,0)
^^1^1^2880710^
"^DD",112,112,52,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,53,0)
ISOLEUCINE; GM/100G^NJ9,3^^3;3^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,53,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,53,21,0)
^^1^1^2880710^
"^DD",112,112,53,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,54,0)
LEUCINE; GM/100G^NJ9,3^^3;4^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,54,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,54,21,0)
^^1^1^2880710^
"^DD",112,112,54,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,55,0)
LYSINE; GM/100G^NJ9,3^^3;5^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,55,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,55,21,0)
^^1^1^2880710^
"^DD",112,112,55,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,56,0)
METHIONINE; GM/100G^NJ9,3^^3;6^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,56,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,56,21,0)
^^1^1^2880710^
"^DD",112,112,56,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,57,0)
CYSTINE; GM/100G^NJ9,3^^3;7^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,57,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,57,21,0)
^^1^1^2880710^
"^DD",112,112,57,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,58,0)
PHENYLALANINE; GM/100G^NJ9,3^^3;8^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,58,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,58,21,0)
^^1^1^2880710^
"^DD",112,112,58,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,59,0)
TYROSINE; GM/100G^NJ9,3^^3;9^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,59,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,59,21,0)
^^1^1^2940802^^
"^DD",112,112,59,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,59,"DT")
2940802
"^DD",112,112,60,0)
VALINE; GM/100G^NJ9,3^^3;10^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,60,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,60,21,0)
^^1^1^2880710^
"^DD",112,112,60,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,61,0)
ARGININE; GM/100G^NJ9,3^^3;11^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,61,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,61,21,0)
^^1^1^2880710^
"^DD",112,112,61,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,62,0)
HISTIDINE; GM/100G^NJ9,3^^3;12^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,62,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,62,21,0)
^^1^1^2880710^
"^DD",112,112,62,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,63,0)
ALANINE; GM/100G^NJ9,3^^3;13^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,63,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,63,21,0)
^^1^1^2880710^
"^DD",112,112,63,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,64,0)
ASPARTIC ACID; GM/100G^NJ9,3^^3;14^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,64,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,64,21,0)
^^1^1^2880710^
"^DD",112,112,64,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,65,0)
GLUTAMIC ACID; GM/100G^NJ9,3^^3;15^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,65,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,65,21,0)
^^1^1^2880710^
"^DD",112,112,65,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,66,0)
GLYCINE; GM/100G^NJ9,3^^3;16^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,66,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,66,21,0)
^^1^1^2880710^
"^DD",112,112,66,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,67,0)
PROLINE; GM/100G^NJ9,3^^3;17^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,67,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,67,21,0)
^^1^1^2880710^
"^DD",112,112,67,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,68,0)
SERINE; GM/100G^NJ9,3^^3;18^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,68,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,68,21,0)
^^1^1^2880710^
"^DD",112,112,68,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,68,"DT")
2891204
"^DD",112,112,71,0)
CAPRIC ACID; GM/100G^NJ9,3^^4;1^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,71,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,71,21,0)
^^1^1^2880710^
"^DD",112,112,71,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,71,"DT")
2891205
"^DD",112,112,72,0)
LAURIC ACID; GM/100G^NJ9,3^^4;2^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,72,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,72,21,0)
^^1^1^2880710^
"^DD",112,112,72,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,73,0)
MYRISTIC ACID; GM/100G^NJ9,3^^4;3^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,73,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,73,21,0)
^^1^1^2880710^
"^DD",112,112,73,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,74,0)
PALMITIC ACID; GM/100G^NJ9,3^^4;4^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,74,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,74,21,0)
^^1^1^2880710^
"^DD",112,112,74,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,75,0)
PALMITOLEIC ACID; GM/100G^NJ9,3^^4;5^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,75,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,75,21,0)
^^1^1^2880710^
"^DD",112,112,75,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,76,0)
STEARIC ACID; GM/100G^NJ9,3^^4;6^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,76,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,76,21,0)
^^1^1^2880710^
"^DD",112,112,76,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,77,0)
OLEIC ACID; GM/100G^NJ9,3^^4;7^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,77,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,77,21,0)
^^1^1^2880710^
"^DD",112,112,77,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,78,0)
ARACHIDONIC ACID; GM/100G^NJ9,3^^4;8^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112,112,78,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,78,21,0)
^^1^1^2880710^
"^DD",112,112,78,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,79,0)
VITAMIN K; MCG/100G^NJ6,2^^4;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",112,112,79,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",112,112,79,21,0)
^^1^1^2921107^
"^DD",112,112,79,21,1,0)
This is the value per 100 gms. of this nutrient
"^DD",112,112,79,"DT")
2920704
"^DD",112,112,80,0)
SELENIUM; MCG/100G^NJ6,2^^4;10^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",112,112,80,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",112,112,80,21,0)
^^1^1^2921107^
"^DD",112,112,80,21,1,0)
This is the value per 100 gms. of this nutrient.
"^DD",112,112,80,"DT")
2920704
"^DD",112,112,98,0)
SOURCE OF DATA^F^^20;1^K:$L(X)>80!($L(X)<1) X
"^DD",112,112,98,3)
Type a Number between 0 and 99999, 3 Decimal Digits
"^DD",112,112,98,21,0)
^^1^1^2880710^
"^DD",112,112,98,21,1,0)
This is the value per 100 grams for this nutrient.
"^DD",112,112,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",112,112,99,1,0)
^.1
"^DD",112,112,99,1,1,0)
112^AC^MUMPS
"^DD",112,112,99,1,1,1)
K:X'="Y" ^FH(112,DA,"I")
"^DD",112,112,99,1,1,2)
K ^FH(112,DA,"I")
"^DD",112,112,99,1,1,"%D",0)
^^2^2^3000202
"^DD",112,112,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",112,112,99,1,1,"%D",2,0)
inactive entries.
"^DD",112,112,99,21,0)
^^2^2^3000202
"^DD",112,112,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",112,112,99,21,2,0)
further selection of this entry.
"^DD",112,112,99,"DT")
3000223
"^DD",112.2,112.2,0)
FIELD^^26^28
"^DD",112.2,112.2,0,"DDA")
N
"^DD",112.2,112.2,0,"DT")
3020415
"^DD",112.2,112.2,0,"IX","B",112.2,.01)

"^DD",112.2,112.2,0,"IX","C",112.2,.5)

"^DD",112.2,112.2,0,"NM","DRI VALUES")

"^DD",112.2,112.2,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",112.2,112.2,.01,1,0)
^.1
"^DD",112.2,112.2,.01,1,1,0)
112.2^B
"^DD",112.2,112.2,.01,1,1,1)
S ^FH(112.2,"B",$E(X,1,30),DA)=""
"^DD",112.2,112.2,.01,1,1,2)
K ^FH(112.2,"B",$E(X,1,30),DA)
"^DD",112.2,112.2,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",112.2,112.2,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",112.2,112.2,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",112.2,112.2,.01,21,0)
^^2^2^2880717^
"^DD",112.2,112.2,.01,21,1,0)
This field contains the name of a category of people for whom
"^DD",112.2,112.2,.01,21,2,0)
Recommended Dietary Allowance values have been published.
"^DD",112.2,112.2,.5,0)
MNEMONIC^F^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>8!($L(X)<1) X
"^DD",112.2,112.2,.5,1,0)
^.1
"^DD",112.2,112.2,.5,1,1,0)
112.2^C
"^DD",112.2,112.2,.5,1,1,1)
S ^FH(112.2,"C",$E(X,1,30),DA)=""
"^DD",112.2,112.2,.5,1,1,2)
K ^FH(112.2,"C",$E(X,1,30),DA)
"^DD",112.2,112.2,.5,3)
ANSWER MUST BE 1-8 CHARACTERS IN LENGTH
"^DD",112.2,112.2,.5,21,0)
^^2^2^2950221^^^
"^DD",112.2,112.2,.5,21,1,0)
This is a short name, or mnemonic, for the RDA category of
"^DD",112.2,112.2,.5,21,2,0)
persons.
"^DD",112.2,112.2,.5,"DT")
2950221
"^DD",112.2,112.2,1,0)
PROTEIN GM.^NJ5,1^^1;1^K:+X'=X!(X>100)!(X<0)!(X?.E1"."2N.N) X
"^DD",112.2,112.2,1,3)
TYPE A NUMBER BETWEEN 0 AND 100
"^DD",112.2,112.2,1,21,0)
^^2^2^2880717^^^
"^DD",112.2,112.2,1,21,1,0)
This field represents the recommended amount of Protein per
"^DD",112.2,112.2,1,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,2,0)
VITAMIN A RE^NJ4,0^^1;2^K:+X'=X!(X>3000)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,2,3)
Type a Number between 0 and 3000, 0 Decimal Digits
"^DD",112.2,112.2,2,21,0)
^^2^2^2891211^^^^
"^DD",112.2,112.2,2,21,1,0)
This field represents the recommended amount of Vitamin A in
"^DD",112.2,112.2,2,21,2,0)
Retinol Equivalents per day for this RDA group.
"^DD",112.2,112.2,2,"DT")
2891211
"^DD",112.2,112.2,3,0)
VITAMIN E MG^NJ3,0^^1;3^K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,3,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 100
"^DD",112.2,112.2,3,21,0)
^^2^2^2880717^^^
"^DD",112.2,112.2,3,21,1,0)
This field represents the recommended amount of Vitamin E per
"^DD",112.2,112.2,3,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,4,0)
VITAMIN C MG^NJ3,0^^1;4^K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,4,3)
Type a Number between 0 and 200, 0 Decimal Digits
"^DD",112.2,112.2,4,21,0)
^.001^2^2^3020408^^^
"^DD",112.2,112.2,4,21,1,0)
This field represents the recommended amount of Vitamin C per
"^DD",112.2,112.2,4,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,4,"DT")
3020408
"^DD",112.2,112.2,5,0)
THIAMIN MG^NJ3,1^^1;5^K:+X'=X!(X>3)!(X<0)!(X?.E1"."2N.N) X
"^DD",112.2,112.2,5,3)
TYPE A NUMBER BETWEEN 0 AND 3
"^DD",112.2,112.2,5,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,5,21,1,0)
This field represents the recommended amount of Thiamin per
"^DD",112.2,112.2,5,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,6,0)
RIBOFLAVIN MG^NJ3,1^^1;6^K:+X'=X!(X>3)!(X<0)!(X?.E1"."2N.N) X
"^DD",112.2,112.2,6,3)
TYPE A NUMBER BETWEEN 0 AND 3
"^DD",112.2,112.2,6,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,6,21,1,0)
This field represents the recommended amount of Riboflavin per
"^DD",112.2,112.2,6,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,7,0)
NIACIN MG^NJ2,0^^1;7^K:+X'=X!(X>50)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,7,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 50
"^DD",112.2,112.2,7,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,7,21,1,0)
This field represents the recommended amount of Niacin per
"^DD",112.2,112.2,7,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,8,0)
VITAMIN B6 MG^NJ3,1^^1;8^K:+X'=X!(X>5)!(X<0)!(X?.E1"."2N.N) X
"^DD",112.2,112.2,8,3)
TYPE A NUMBER BETWEEN 0 AND 5
"^DD",112.2,112.2,8,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,8,21,1,0)
This field represents the recommended amount of Vitamin B6 per
"^DD",112.2,112.2,8,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,9,0)
FOLATE MCG^NJ4,0^^1;9^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,9,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",112.2,112.2,9,21,0)
^^2^2^2891117^^^
"^DD",112.2,112.2,9,21,1,0)
This field represents the recommended amount of Folate per
"^DD",112.2,112.2,9,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,10,0)
VITAMIN B12 MCG^NJ3,1^^1;10^K:+X'=X!(X>5)!(X<0)!(X?.E1"."2N.N) X
"^DD",112.2,112.2,10,3)
Type a Number between 0 and 5, 1 Decimal Digit
"^DD",112.2,112.2,10,21,0)
^.001^2^2^3020409^^^^
"^DD",112.2,112.2,10,21,1,0)
This field represents the recommended amount of Vitamin B12 per
"^DD",112.2,112.2,10,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,10,"DT")
3020409
"^DD",112.2,112.2,11,0)
CALCIUM MG^NJ4,0^^1;11^K:+X'=X!(X>2000)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,11,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 2000
"^DD",112.2,112.2,11,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,11,21,1,0)
This field represents the recommended amount of Calcium per
"^DD",112.2,112.2,11,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,12,0)
PHOSPHORUS MG^NJ4,0^^1;12^K:+X'=X!(X>2000)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,12,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 2000
"^DD",112.2,112.2,12,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,12,21,1,0)
This field represents the recommended amount of Phosphorus per
"^DD",112.2,112.2,12,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,13,0)
MAGNESIUM MG^NJ4,0^^1;13^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,13,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",112.2,112.2,13,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,13,21,1,0)
This field represents the recommended amount of Magnesium per
"^DD",112.2,112.2,13,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,14,0)
IRON MG^NJ3,0^^1;14^K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,14,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 100
"^DD",112.2,112.2,14,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,14,21,1,0)
This field represents the recommended amount of Iron per
"^DD",112.2,112.2,14,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,15,0)
ZINC MG^NJ2,0^^1;15^K:+X'=X!(X>50)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,15,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 50
"^DD",112.2,112.2,15,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,15,21,1,0)
This field represents the recommended amount of Zinc per
"^DD",112.2,112.2,15,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,16,0)
PANTOTHENIC ACID MG^NJ4,1^^1;16^K:+X'=X!(X>20)!(X<0)!(X?.E1"."2N.N) X
"^DD",112.2,112.2,16,3)
TYPE A NUMBER BETWEEN 0 AND 20
"^DD",112.2,112.2,16,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,16,21,1,0)
This field represents the recommended amount of Pantothenic Acid per
"^DD",112.2,112.2,16,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,17,0)
COPPER MG^NJ4,2^^1;17^K:+X'=X!(X>9)!(X<0)!(X?.E1"."3N.N) X
"^DD",112.2,112.2,17,3)
Type a Number between 0 and 9, 2 Decimal Digits
"^DD",112.2,112.2,17,21,0)
^.001^2^2^3020410^^^^
"^DD",112.2,112.2,17,21,1,0)
This field represents the recommended amount of Copper per
"^DD",112.2,112.2,17,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,17,"DT")
3020410
"^DD",112.2,112.2,18,0)
MANGANESE MG^NJ5,2^^1;18^K:+X'=X!(X>20)!(X<0)!(X?.E1"."3N.N) X
"^DD",112.2,112.2,18,3)
TYPE A NUMBER BETWEEN 0 AND 20
"^DD",112.2,112.2,18,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,18,21,1,0)
This field represents the recommended amount of Manganese per
"^DD",112.2,112.2,18,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,19,0)
SODIUM MG^NJ4,0^^1;19^K:+X'=X!(X>5000)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,19,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 5000
"^DD",112.2,112.2,19,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,19,21,1,0)
This field represents the recommended amount of Sodium per
"^DD",112.2,112.2,19,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,20,0)
POTASSIUM MG^NJ5,0^^1;20^K:+X'=X!(X>20000)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,20,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 20000
"^DD",112.2,112.2,20,21,0)
^^2^2^2880717^^
"^DD",112.2,112.2,20,21,1,0)
This field represents the recommended amount of Potassium per
"^DD",112.2,112.2,20,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,21,0)
BIOTIN MCG^NJ2,0^^1;21^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,21,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",112.2,112.2,21,21,0)
^.001^2^2^3020404^^
"^DD",112.2,112.2,21,21,1,0)
This field represents the recommended amount of Biotin
"^DD",112.2,112.2,21,21,2,0)
per day for this DRI group.
"^DD",112.2,112.2,21,"DT")
3020404
"^DD",112.2,112.2,22,0)
SELENIUM MCG^NJ6,2^^1;22^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",112.2,112.2,22,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",112.2,112.2,22,21,0)
^.001^2^2^3020404^^^^
"^DD",112.2,112.2,22,21,1,0)
This field represents the recommended amount of Selenium
"^DD",112.2,112.2,22,21,2,0)
per day for this RDA group.
"^DD",112.2,112.2,22,"DT")
2920704
"^DD",112.2,112.2,23,0)
CHOLINE MG^NJ3,0^^1;23^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,23,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",112.2,112.2,23,21,0)
^^2^2^3020404^
"^DD",112.2,112.2,23,21,1,0)
This field represents the recommended amount of Choline per
"^DD",112.2,112.2,23,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,23,"DT")
3020404
"^DD",112.2,112.2,24,0)
VITAMIN D MCG^NJ2,0^^1;24^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",112.2,112.2,24,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",112.2,112.2,24,21,0)
^.001^2^2^3020404^^
"^DD",112.2,112.2,24,21,1,0)
This field represents the recommended amount of Vitamin D per
"^DD",112.2,112.2,24,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,24,"DT")
3020404
"^DD",112.2,112.2,25,0)
FLUORIDE MG^NJ5,2^^1;25^K:+X'=X!(X>99)!(X<0)!(X?.E1"."3N.N) X
"^DD",112.2,112.2,25,3)
Type a Number between 0 and 99, 2 Decimal Digits
"^DD",112.2,112.2,25,21,0)
^^2^2^3020404^
"^DD",112.2,112.2,25,21,1,0)
This field represents the recommended amount of Fluoride per
"^DD",112.2,112.2,25,21,2,0)
day for this RDA group.
"^DD",112.2,112.2,25,"DT")
3020404
"^DD",112.2,112.2,26,0)
VITAMIN K MCG^NJ6,2^^1;26^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",112.2,112.2,26,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",112.2,112.2,26,21,0)
^^2^2^3020415^
"^DD",112.2,112.2,26,21,1,0)
This field represents the recommended amount of Vitamin K
"^DD",112.2,112.2,26,21,2,0)
per day for this DRI group.
"^DD",112.2,112.2,26,"DT")
3020415
"^DD",112.6,112.6,0)
FIELD^^2^6
"^DD",112.6,112.6,0,"DT")
2931124
"^DD",112.6,112.6,0,"ID","WRIT")
D:$D(^("0")) EN^DDIOL($E($P(^("0"),U,3),4,5)_"-"_$E($P(^("0"),U,3),6,7)_"-"_$E($P(^("0"),U,3),2,3),"","?3")
"^DD",112.6,112.6,0,"IX","B",112.6,.01)

"^DD",112.6,112.6,0,"NM","USER MENU")

"^DD",112.6,112.6,0,"VRPK")
FH
"^DD",112.6,112.6,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",112.6,112.6,.01,1,0)
^.1
"^DD",112.6,112.6,.01,1,1,0)
112.6^B
"^DD",112.6,112.6,.01,1,1,1)
S ^FHUM("B",$E(X,1,30),DA)=""
"^DD",112.6,112.6,.01,1,1,2)
K ^FHUM("B",$E(X,1,30),DA)
"^DD",112.6,112.6,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",112.6,112.6,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",112.6,112.6,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",112.6,112.6,.01,21,0)
^^3^3^2880717^
"^DD",112.6,112.6,.01,21,1,0)
This field contains the name of a user menu. This is a list of
"^DD",112.6,112.6,.01,21,2,0)
food items, and amounts, that a user wishes to have analyzed
"^DD",112.6,112.6,.01,21,3,0)
for nutrient content.
"^DD",112.6,112.6,.01,"DT")
2850517
"^DD",112.6,112.6,.6,0)
UNITS^RS^C:COMMON;G:GRAMS;^0;2^Q
"^DD",112.6,112.6,.6,21,0)
^^2^2^2940616^^
"^DD",112.6,112.6,.6,21,1,0)
This field indicates whether common units are used in specifying
"^DD",112.6,112.6,.6,21,2,0)
quantities or whether grams are used throughout.
"^DD",112.6,112.6,.6,"DT")
2841102
"^DD",112.6,112.6,.7,0)
DATE ENTERED^D^^0;3^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",112.6,112.6,.7,21,0)
^^2^2^2880717^
"^DD",112.6,112.6,.7,21,1,0)
This field indicates the date on which this user menu was first
"^DD",112.6,112.6,.7,21,2,0)
created.
"^DD",112.6,112.6,.7,"DT")
2841102
"^DD",112.6,112.6,.8,0)
USER^P200'^VA(200,^0;4^Q
"^DD",112.6,112.6,.8,21,0)
^^1^1^2880717^
"^DD",112.6,112.6,.8,21,1,0)
This field indicates the person who first created the user menu.
"^DD",112.6,112.6,.8,"DT")
2841102
"^DD",112.6,112.6,1,0)
DAY NUMBER^112.61^^1;0
"^DD",112.6,112.6,1,21,0)
^^3^3^2931116^^^^
"^DD",112.6,112.6,1,21,1,0)
This field contains the sequence number, or day number, of the
"^DD",112.6,112.6,1,21,2,0)
days represented by this menu. It is normally 1 to the maximum
"^DD",112.6,112.6,1,21,3,0)
number of used entered.
"^DD",112.6,112.6,2,0)
RECIPE MENU?^S^1:YES;0:NO;^0;5^Q
"^DD",112.6,112.6,2,21,0)
^^2^2^2950221^^^^
"^DD",112.6,112.6,2,21,1,0)
This field, if answered yes, means this user menu is a recipe
"^DD",112.6,112.6,2,21,2,0)
menu else, if answered no, means it is not.
"^DD",112.6,112.6,2,"DT")
2931116
"^DD",112.6,112.61,0)
DAY NUMBER SUB-FIELD^NL^1^2
"^DD",112.6,112.61,0,"DT")
2931124
"^DD",112.6,112.61,0,"NM","DAY NUMBER")

"^DD",112.6,112.61,0,"UP")
112.6
"^DD",112.6,112.61,.01,0)
DAY NUMBER^MRNJ2,0X^^0;1^K:+X'=X!(X>7)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",112.6,112.61,.01,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 7
"^DD",112.6,112.61,.01,21,0)
^^1^1^2931117^^
"^DD",112.6,112.61,.01,21,1,0)
This is the day number for which meals will be entered.
"^DD",112.6,112.61,.01,"DT")
2931117
"^DD",112.6,112.61,1,0)
MEAL NUMBER^112.62^^1;0
"^DD",112.6,112.61,1,21,0)
^^4^4^2931117^^
"^DD",112.6,112.61,1,21,1,0)
This is the meal number for which food items will be entered.
"^DD",112.6,112.61,1,21,2,0)
It is merely a sequence number and individual meals, such as
"^DD",112.6,112.61,1,21,3,0)
breakfast, noon, and evening are not referenced as such since
"^DD",112.6,112.61,1,21,4,0)
meals may be snack times, or other eating times.
"^DD",112.6,112.62,0)
MEAL NUMBER SUB-FIELD^NL^4^5
"^DD",112.6,112.62,0,"DT")
2931124
"^DD",112.6,112.62,0,"NM","MEAL NUMBER")

"^DD",112.6,112.62,0,"UP")
112.61
"^DD",112.6,112.62,.01,0)
MEAL NUMBER^MRNJ1,0X^^0;1^K:+X'=X!(X>6)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",112.6,112.62,.01,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 6
"^DD",112.6,112.62,.01,21,0)
^^1^1^2931116^^
"^DD",112.6,112.62,.01,21,1,0)
This is the meal number for which food items will be entered.
"^DD",112.6,112.62,.01,"DT")
2931116
"^DD",112.6,112.62,1,0)
FOOD ITEM^112.63P^^1;0
"^DD",112.6,112.62,1,21,0)
^^2^2^2931117^^^
"^DD",112.6,112.62,1,21,1,0)
This multiple represents the food items, selected from the
"^DD",112.6,112.62,1,21,2,0)
Food Nutrient file, which are represented in the meal.
"^DD",112.6,112.62,2,0)
MEAL^P116.1'^FH(116.1,^0;2^Q
"^DD",112.6,112.62,2,21,0)
^^1^1^2931220^^^^
"^DD",112.6,112.62,2,21,1,0)
This field represents the meal file.
"^DD",112.6,112.62,2,"DT")
2931117
"^DD",112.6,112.62,3,0)
PRODUCTION DIET^P116.2^FH(116.2,^0;3^Q
"^DD",112.6,112.62,3,3)

"^DD",112.6,112.62,3,21,0)
^^2^2^2931124^^^^
"^DD",112.6,112.62,3,21,1,0)
This is a pointer to the Production Diet file (116.2) to indicate
"^DD",112.6,112.62,3,21,2,0)
the Production Diet which associates with the menu.
"^DD",112.6,112.62,3,"DT")
2931124
"^DD",112.6,112.62,4,0)
RECIPE^112.64P^^2;0
"^DD",112.6,112.62,4,21,0)
^^2^2^2931117^^
"^DD",112.6,112.62,4,21,1,0)
This multiple stores the selected recipes from the Recipe file
"^DD",112.6,112.62,4,21,2,0)
used for the Meal Analysis.
"^DD",112.6,112.63,0)
FOOD ITEM SUB-FIELD^NL^1^2
"^DD",112.6,112.63,0,"NM","FOOD ITEM")

"^DD",112.6,112.63,0,"UP")
112.62
"^DD",112.6,112.63,.01,0)
FOOD ITEM^MP112'X^FHNU(^0;1^S:$D(X) DINUM=X
"^DD",112.6,112.63,.01,21,0)
^^1^1^2931117^^^^
"^DD",112.6,112.63,.01,21,1,0)
This is the food item selected from the Food Nutrient file.
"^DD",112.6,112.63,.01,"DT")
2841114
"^DD",112.6,112.63,1,0)
AMOUNT^NJ9,3^^0;2^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4N.N) X
"^DD",112.6,112.63,1,3)
TYPE A NUMBER BETWEEN 0 AND 99999
"^DD",112.6,112.63,1,21,0)
^^3^3^2931117^^^^
"^DD",112.6,112.63,1,21,1,0)
This is the amount of the food item. If grams were selected as
"^DD",112.6,112.63,1,21,2,0)
the units type, then the amount is in grams. If common units
"^DD",112.6,112.63,1,21,3,0)
were selected, the amount is in terms of those common units.
"^DD",112.6,112.63,1,"DT")
2851127
"^DD",112.6,112.64,0)
RECIPE SUB-FIELD^^1^2
"^DD",112.6,112.64,0,"DT")
2931117
"^DD",112.6,112.64,0,"NM","RECIPE")

"^DD",112.6,112.64,0,"UP")
112.62
"^DD",112.6,112.64,.01,0)
RECIPE^MP114'X^FH(114,^0;1^S:$D(X) DINUM=X
"^DD",112.6,112.64,.01,1,0)
^.1^^0
"^DD",112.6,112.64,.01,21,0)
^^1^1^2931220^^^^
"^DD",112.6,112.64,.01,21,1,0)
This is the recipe selected from the Recipe file.
"^DD",112.6,112.64,.01,"DT")
2931123
"^DD",112.6,112.64,1,0)
SERVING PORTION^NJ6,1^^0;2^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."2N.N) X
"^DD",112.6,112.64,1,3)
Type a Number between 1 and 9999, 1 Decimal Digit
"^DD",112.6,112.64,1,21,0)
^^1^1^2931117^
"^DD",112.6,112.64,1,21,1,0)
This is the serving portion of the recipe.
"^DD",112.6,112.64,1,"DT")
2931117
"^DD",113,113,0)
FIELD^^99^23
"^DD",113,113,0,"DT")
2930211
"^DD",113,113,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",113,113,0,"IX","AC",113,99)

"^DD",113,113,0,"IX","B",113,.01)

"^DD",113,113,0,"IX","C",113,2)

"^DD",113,113,0,"NM","INGREDIENT")

"^DD",113,113,0,"PT",114.01,.01)

"^DD",113,113,0,"SCR")
I '$D(^FH(113,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",113,113,0,"VRPK")
FH
"^DD",113,113,.01,0)
NAME^RF^^0;1^K:$L(X)>50!($L(X)<3)!'(X'?1P.E) X
"^DD",113,113,.01,1,0)
^.1
"^DD",113,113,.01,1,1,0)
113^B
"^DD",113,113,.01,1,1,1)
S ^FHING("B",$E(X,1,30),DA)=""
"^DD",113,113,.01,1,1,2)
K ^FHING("B",$E(X,1,30),DA)
"^DD",113,113,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",113,113,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",113,113,.01,3)
ANSWER MUST BE 3-50 CHARACTERS IN LENGTH
"^DD",113,113,.01,21,0)
^^2^2^2880710^
"^DD",113,113,.01,21,1,0)
This is the name of the ingredient which is an ordered item
"^DD",113,113,.01,21,2,0)
generally and which is used in the preparation of recipes.
"^DD",113,113,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",113,113,1,0)
SUPPLY DESCRIPTION^RF^^0;2^K:$L(X)>21!($L(X)<3) X
"^DD",113,113,1,3)
ANSWER MUST BE 3-21 CHARACTERS IN LENGTH
"^DD",113,113,1,21,0)
^^2^2^2880710^
"^DD",113,113,1,21,1,0)
This is a short description which will be used on purchase
"^DD",113,113,1,21,2,0)
orders.
"^DD",113,113,1,"DT")
2880227
"^DD",113,113,2,0)
STOCK NUMBER^F^^0;3^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>16!($L(X)<1) X
"^DD",113,113,2,1,0)
^.1
"^DD",113,113,2,1,1,0)
113^C^MUMPS
"^DD",113,113,2,1,1,1)
S ^FHING("C",$E(X,$L(X)-3,$L(X)),DA)=""
"^DD",113,113,2,1,1,2)
K ^FHING("C",$E(X,$L(X)-3,$L(X)),DA)
"^DD",113,113,2,1,1,"%D",0)
^^2^2^2940824^
"^DD",113,113,2,1,1,"%D",1,0)
This cross-reference consists of the last 4 characters of the
"^DD",113,113,2,1,1,"%D",2,0)
Stock Number which has been entered.
"^DD",113,113,2,3)
ANSWER MUST BE 1-16 CHARACTERS IN LENGTH
"^DD",113,113,2,21,0)
^^3^3^2880710^
"^DD",113,113,2,21,1,0)
This is the Federal Stock Number (with hyphens) for items
"^DD",113,113,2,21,2,0)
obtained from VA Depots or DLA. It may be the local vendor's
"^DD",113,113,2,21,3,0)
number for other items.
"^DD",113,113,2,"DT")
2880227
"^DD",113,113,3,0)
VENDOR^P113.2^FH(113.2,^0;4^Q
"^DD",113,113,3,21,0)
^^2^2^2880710^
"^DD",113,113,3,21,1,0)
This field indicates the current vendor from whom the item
"^DD",113,113,3,21,2,0)
is procured.
"^DD",113,113,3,"DT")
2861023
"^DD",113,113,4,0)
UNIT OF PURCHASE (U/P)^RF^^0;5^K:$L(X)>2!($L(X)<2) X
"^DD",113,113,4,3)
ANSWER MUST BE 2 CHARACTERS IN LENGTH
"^DD",113,113,4,21,0)
^^3^3^2890208^^
"^DD",113,113,4,21,1,0)
This is a two-character abbreviation indicating the unit
"^DD",113,113,4,21,2,0)
of purchase and is such things as CN for can, PK for
"^DD",113,113,4,21,3,0)
package, CS for case, etc.
"^DD",113,113,4,"DT")
2890208
"^DD",113,113,5,0)
DIETETIC UNIT OF ISSUE^RP119.1X^FH(119.1,^0;6^I $D(X) S X=$P(^FH(119.1,+X,0),"^",1)
"^DD",113,113,5,21,0)
^^3^3^2920522^^^
"^DD",113,113,5,21,1,0)
This is the unit of issue that dietetic personnel or supply
"^DD",113,113,5,21,2,0)
personnel use for dispensing the item to ingredient control.
"^DD",113,113,5,21,3,0)
It is generally a #10-can or similar description.
"^DD",113,113,6,0)
ORDERING MULTIPLE (OF U/P)^NJ4,0^^0;7^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",113,113,6,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",113,113,6,21,0)
^^4^4^2880710^
"^DD",113,113,6,21,1,0)
If the vendor requires that the unit of purchase be bought
"^DD",113,113,6,21,2,0)
in some multiple, like 6 or 12 or 24, then that multiple
"^DD",113,113,6,21,3,0)
is indicated here. VA Depot is the most common vendor
"^DD",113,113,6,21,4,0)
requiring such multiples.
"^DD",113,113,6,"DT")
2880227
"^DD",113,113,7,0)
NO. OF ISSUE UNITS IN A U/P^RNJ9,4^^0;8^K:+X'=X!(X>9999)!(X<.0001)!(X?.E1"."5N.N) X
"^DD",113,113,7,3)
TYPE A NUMBER BETWEEN .0001 AND 9999
"^DD",113,113,7,21,0)
^^4^4^2880710^
"^DD",113,113,7,21,1,0)
This is the number of Dietetic issue units in a unit of
"^DD",113,113,7,21,2,0)
purchase. If the U/P (unit of Purchase) is a CS that
"^DD",113,113,7,21,3,0)
contains 6 #10-cans and the Dietetic Issue unit is
"^DD",113,113,7,21,4,0)
a #10-can then the value is 6.
"^DD",113,113,8,0)
PRICE/UNIT OF PURCHASE^NJ8,3^^0;9^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."4N.N) X
"^DD",113,113,8,1,0)
^.1^^0
"^DD",113,113,8,3)
Type a Number between 0 and 9999, 3 Decimal Digits
"^DD",113,113,8,21,0)
^^2^2^2920717^^^^
"^DD",113,113,8,21,1,0)
This field contains the most recent price of the unit
"^DD",113,113,8,21,2,0)
of purchase from the vendor.
"^DD",113,113,8,"AUDIT")
n
"^DD",113,113,8,"DT")
2920717
"^DD",113,113,9,0)
REORDER LEVEL (IN U/P)^NJ5,0^^0;10^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X
"^DD",113,113,9,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99999
"^DD",113,113,9,21,0)
^^3^3^2880710^
"^DD",113,113,9,21,1,0)
This field indicates that when the on-hand quantity drops
"^DD",113,113,9,21,2,0)
below this value (the re-order level), then additional
"^DD",113,113,9,21,3,0)
quantities should be ordered.
"^DD",113,113,9,"DT")
2930413
"^DD",113,113,10,0)
ON HAND (IN U/P)^NJ8,2^^0;11^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."3N.N) X
"^DD",113,113,10,3)
Type a Number between 0 and 99999, 2 Decimal Digits
"^DD",113,113,10,21,0)
^^1^1^2920720^^^^
"^DD",113,113,10,21,1,0)
This field contains the number of issue units that are on hand.
"^DD",113,113,10,"DT")
2930413
"^DD",113,113,11,0)
STORAGE LOCATION^P113.1'^FH(113.1,^0;12^Q
"^DD",113,113,11,21,0)
^^3^3^2880710^
"^DD",113,113,11,21,1,0)
This field indicates the storage location (File 113.1) where
"^DD",113,113,11,21,2,0)
dietetics normally stores the item and where the stockroom
"^DD",113,113,11,21,3,0)
requisition clerk will normally obtain it.
"^DD",113,113,20,0)
FOOD GROUP^RNJ1,0^^0;13^K:+X'=X!(X>6)!(X<1)!(X?.E1"."1N.N) X
"^DD",113,113,20,3)
Type a Number between 1 and 6, 0 Decimal Digits
"^DD",113,113,20,21,0)
^^2^2^2941214^^^
"^DD",113,113,20,21,1,0)
This field contains the food group designated by the VA
"^DD",113,113,20,21,2,0)
for this ingredient item.
"^DD",113,113,20,"DT")
2890712
"^DD",113,113,23,0)
RECIPE UNIT^RSX^LB:LB;GAL:GAL;EACH:EACH;^0;16^W *7,*7,!!,"BEWARE! a change in the RECIPE UNIT has considerable impact on the RECIPE data!" Q
"^DD",113,113,23,3)

"^DD",113,113,23,12)
Only Units valid as Recipe Units may be chosen
"^DD",113,113,23,12.1)
S DIC("S")="I Y<7"
"^DD",113,113,23,21,0)
^^9^9^2880710^
"^DD",113,113,23,21,1,0)
This field contains LB, GAL, or EACH and is used to indicate
"^DD",113,113,23,21,2,0)
whether weight (LB), volumetric (GAL) or each (EACH) units
"^DD",113,113,23,21,3,0)
are to be used in recipes to indicate the quantity required
"^DD",113,113,23,21,4,0)
of this item. Amounts are stored in that file in these units.
"^DD",113,113,23,21,5,0)
 
"^DD",113,113,23,21,6,0)
It is extremely important that this field NOT be changed unless
"^DD",113,113,23,21,7,0)
it is certain that no recipes use this ingredient. Changing
"^DD",113,113,23,21,8,0)
the field will invalidate the quantities shown in any recipe
"^DD",113,113,23,21,9,0)
using the item.
"^DD",113,113,23,"DT")
2871115
"^DD",113,113,24,0)
# OF REC UNITS/ISSUE UNIT^RNJ9,4^^0;17^K:+X'=X!(X>9999)!(X<.0001)!(X?.E1"."5N.N) X
"^DD",113,113,24,3)
TYPE A NUMBER BETWEEN .0001 AND 9999
"^DD",113,113,24,21,0)
^^2^2^2880710^
"^DD",113,113,24,21,1,0)
This field indicates the number of recipe units contained in
"^DD",113,113,24,21,2,0)
a Dietetic Issue unit.
"^DD",113,113,25,0)
INVENTORY?^S^Y:YES;N:NO;^0;19^Q
"^DD",113,113,25,21,0)
^^4^4^2920428^^
"^DD",113,113,25,21,1,0)
This field, when answered YES, will indicate that inventorying
"^DD",113,113,25,21,2,0)
of this item is desired. It is often NO for such items as
"^DD",113,113,25,21,3,0)
condiment packs in cases of 2000 which are replenished as
"^DD",113,113,25,21,4,0)
needed.
"^DD",113,113,25,"DT")
2871018
"^DD",113,113,26,0)
THAW DAYS^NJ1,0^^0;20^K:+X'=X!(X>3)!(X<0)!(X?.E1"."1N.N) X
"^DD",113,113,26,3)
Type a Number between 0 and 3, 0 Decimal Digits
"^DD",113,113,26,21,0)
^^2^2^2880710^
"^DD",113,113,26,21,1,0)
If this is a frozen item requiring thawing before use, then
"^DD",113,113,26,21,2,0)
the number of thaw days should be indicated.
"^DD",113,113,26,"DT")
2871018
"^DD",113,113,27,0)
NUTRIENT DATA REFERENCE^P112'^FHNU(^0;21^Q
"^DD",113,113,27,21,0)
^^4^4^2930331^^
"^DD",113,113,27,21,1,0)
This is a pointer to the nutrient in File 112 which most closely
"^DD",113,113,27,21,2,0)
approximates the cooked ingredient. It will be used as a default
"^DD",113,113,27,21,3,0)
nutrient when performing a nutrient analysis of a recipe containing
"^DD",113,113,27,21,4,0)
this ingredient.
"^DD",113,113,27,"DT")
2930331
"^DD",113,113,28,0)
WEIGHT OF RECIPE UNIT IN LBS.^NJ7,3^^0;22^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",113,113,28,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",113,113,28,21,0)
^^3^3^2911204^
"^DD",113,113,28,21,1,0)
This value represents the weight of the recipe unit in pounds and
"^DD",113,113,28,21,2,0)
is required in performing nutrient analyses of recipes containing
"^DD",113,113,28,21,3,0)
this ingredient.
"^DD",113,113,28,"DT")
2910821
"^DD",113,113,29,0)
DATE COST LAST UPDATED^D^^0;23^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",113,113,29,21,0)
^^1^1^2920813^^
"^DD",113,113,29,21,1,0)
This field contains the date the cost was last updated.
"^DD",113,113,29,"DT")
2920813
"^DD",113,113,30,0)
DATE QOH LAST UPDATED^D^^0;24^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",113,113,30,21,0)
^^1^1^2920813^^
"^DD",113,113,30,21,1,0)
This field contains the date the quantity on hand was last updated.
"^DD",113,113,30,"DT")
2920813
"^DD",113,113,31,0)
MASTER ITEM #^P441^PRC(441,^0;25^Q
"^DD",113,113,31,3)

"^DD",113,113,31,21,0)
^^1^1^2930211^^^^
"^DD",113,113,31,21,1,0)
This field contains the Master Item number for the ingredient.
"^DD",113,113,31,"DT")
2930211
"^DD",113,113,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",113,113,99,1,0)
^.1
"^DD",113,113,99,1,1,0)
113^AC^MUMPS
"^DD",113,113,99,1,1,1)
K:X'="Y" ^FHING(DA,"I")
"^DD",113,113,99,1,1,2)
K ^FHING(DA,"I")
"^DD",113,113,99,1,1,"%D",0)
^.101^2^2^3010926^^
"^DD",113,113,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",113,113,99,1,1,"%D",2,0)
inactive entries.
"^DD",113,113,99,1,1,"DT")
3010926
"^DD",113,113,99,21,0)
^^2^2^3000202
"^DD",113,113,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",113,113,99,21,2,0)
further selection of this entry.
"^DD",113,113,99,"DT")
3010926
"^DD",113.1,113.1,0)
FIELD^^99^4
"^DD",113.1,113.1,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",113.1,113.1,0,"IX","AC",113.1,99)

"^DD",113.1,113.1,0,"IX","B",113.1,.01)

"^DD",113.1,113.1,0,"IX","C",113.1,1)

"^DD",113.1,113.1,0,"NM","STORAGE LOCATION")

"^DD",113.1,113.1,0,"PT",113,11)

"^DD",113.1,113.1,0,"SCR")
I '$D(^FH(113.1,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",113.1,113.1,0,"VRPK")
FH
"^DD",113.1,113.1,.01,0)
NAME^RF^^0;1^K:$L(X)>15!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",113.1,113.1,.01,1,0)
^.1
"^DD",113.1,113.1,.01,1,1,0)
113.1^B
"^DD",113.1,113.1,.01,1,1,1)
S ^FH(113.1,"B",$E(X,1,30),DA)=""
"^DD",113.1,113.1,.01,1,1,2)
K ^FH(113.1,"B",$E(X,1,30),DA)
"^DD",113.1,113.1,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",113.1,113.1,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",113.1,113.1,.01,3)
ANSWER MUST BE 3-15 CHARACTERS IN LENGTH
"^DD",113.1,113.1,.01,21,0)
^^4^4^2920812^^
"^DD",113.1,113.1,.01,21,1,0)
This is the name of a storage location where ingredients are
"^DD",113.1,113.1,.01,21,2,0)
stored (e.g., particular freezers, dry goods rooms, etc.). It
"^DD",113.1,113.1,.01,21,3,0)
is used by the Ingredient file to indicate where the
"^DD",113.1,113.1,.01,21,4,0)
ingredient is stocked.
"^DD",113.1,113.1,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",113.1,113.1,1,0)
CODE^RF^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>5!($L(X)<1) X
"^DD",113.1,113.1,1,1,0)
^.1
"^DD",113.1,113.1,1,1,1,0)
113.1^C
"^DD",113.1,113.1,1,1,1,1)
S ^FH(113.1,"C",$E(X,1,30),DA)=""
"^DD",113.1,113.1,1,1,1,2)
K ^FH(113.1,"C",$E(X,1,30),DA)
"^DD",113.1,113.1,1,3)
ANSWER MUST BE 1-5 CHARACTERS IN LENGTH
"^DD",113.1,113.1,1,21,0)
^^2^2^2880709^
"^DD",113.1,113.1,1,21,1,0)
This is a short abbreviation used on various print-outs in lieu
"^DD",113.1,113.1,1,21,2,0)
of the longer full name. It should be unique.
"^DD",113.1,113.1,1,"DT")
2901119
"^DD",113.1,113.1,2,0)
PRINT ORDER^RNJ2,0^^0;3^K:+X'=X!(X>49)!(X<1)!(X?.E1"."1N.N) X
"^DD",113.1,113.1,2,3)
Type a Number between 1 and 49, 0 Decimal Digits
"^DD",113.1,113.1,2,21,0)
^^4^4^2920812^^^^
"^DD",113.1,113.1,2,21,1,0)
When ingredient pull lists are generated and sorted by storage
"^DD",113.1,113.1,2,21,2,0)
location, this field contains the print order of the various
"^DD",113.1,113.1,2,21,3,0)
storage locations. It is numeric and will print from low to
"^DD",113.1,113.1,2,21,4,0)
high.
"^DD",113.1,113.1,2,"DT")
2880328
"^DD",113.1,113.1,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",113.1,113.1,99,1,0)
^.1
"^DD",113.1,113.1,99,1,1,0)
113.1^AC^MUMPS
"^DD",113.1,113.1,99,1,1,1)
K:X'="Y" ^FH(113.1,DA,"I")
"^DD",113.1,113.1,99,1,1,2)
K ^FH(113.1,DA,"I")
"^DD",113.1,113.1,99,1,1,"%D",0)
^^2^2^3000202
"^DD",113.1,113.1,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",113.1,113.1,99,1,1,"%D",2,0)
inactive entries.
"^DD",113.1,113.1,99,21,0)
^^2^2^3000202
"^DD",113.1,113.1,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",113.1,113.1,99,21,2,0)
further selection of this entry.
"^DD",113.1,113.1,99,"DT")
3000223
"^DD",113.2,113.2,0)
FIELD^^99^8
"^DD",113.2,113.2,0,"DT")
2930312
"^DD",113.2,113.2,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",113.2,113.2,0,"IX","AC",113.2,99)

"^DD",113.2,113.2,0,"IX","B",113.2,.01)

"^DD",113.2,113.2,0,"NM","FH VENDOR")

"^DD",113.2,113.2,0,"PT",113,3)

"^DD",113.2,113.2,0,"SCR")
I '$D(^FH(113.2,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",113.2,113.2,0,"VRPK")
FH
"^DD",113.2,113.2,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",113.2,113.2,.01,1,0)
^.1
"^DD",113.2,113.2,.01,1,1,0)
113.2^B
"^DD",113.2,113.2,.01,1,1,1)
S ^FH(113.2,"B",$E(X,1,30),DA)=""
"^DD",113.2,113.2,.01,1,1,2)
K ^FH(113.2,"B",$E(X,1,30),DA)
"^DD",113.2,113.2,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",113.2,113.2,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",113.2,113.2,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",113.2,113.2,.01,21,0)
^^1^1^2880710^
"^DD",113.2,113.2,.01,21,1,0)
This is the name of a vendor from whom ingredients are ordered.
"^DD",113.2,113.2,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",113.2,113.2,.01,"DT")
2930312
"^DD",113.2,113.2,1,0)
1ST ADDRESS LINE^F^^0;2^K:$L(X)>30!($L(X)<1) X
"^DD",113.2,113.2,1,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",113.2,113.2,1,21,0)
^^2^2^2880710^
"^DD",113.2,113.2,1,21,1,0)
This field contains the first address line following the
"^DD",113.2,113.2,1,21,2,0)
vendor's name.
"^DD",113.2,113.2,1,"DT")
2850606
"^DD",113.2,113.2,2,0)
2ND ADDRESS LINE^F^^0;3^K:$L(X)>30!($L(X)<1) X
"^DD",113.2,113.2,2,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",113.2,113.2,2,21,0)
^^1^1^2880710^
"^DD",113.2,113.2,2,21,1,0)
This field may contain a second address line if necessary.
"^DD",113.2,113.2,2,"DT")
2850606
"^DD",113.2,113.2,3,0)
3RD ADDRESS LINE^F^^0;4^K:$L(X)>30!($L(X)<1) X
"^DD",113.2,113.2,3,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",113.2,113.2,3,21,0)
^^1^1^2880710^
"^DD",113.2,113.2,3,21,1,0)
This field may contain a third address line if necessary.
"^DD",113.2,113.2,3,"DT")
2850606
"^DD",113.2,113.2,4,0)
CITY, STATE ZIP^F^^0;5^K:$L(X)>30!($L(X)<1) X
"^DD",113.2,113.2,4,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",113.2,113.2,4,21,0)
^^2^2^2880710^
"^DD",113.2,113.2,4,21,1,0)
This field contains the last address line showing city, state
"^DD",113.2,113.2,4,21,2,0)
and zip code.
"^DD",113.2,113.2,4,"DT")
2850606
"^DD",113.2,113.2,6,0)
CONTACT^F^^0;6^K:$L(X)>30!($L(X)<1) X
"^DD",113.2,113.2,6,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",113.2,113.2,6,21,0)
^^2^2^2880710^
"^DD",113.2,113.2,6,21,1,0)
This is the name of person who is the usual contact person
"^DD",113.2,113.2,6,21,2,0)
with the vendor.
"^DD",113.2,113.2,6,"DT")
2850606
"^DD",113.2,113.2,7,0)
TELEPHONE^F^^0;7^K:$L(X)>20!($L(X)<1) X
"^DD",113.2,113.2,7,3)
ANSWER MUST BE 1-20 CHARACTERS IN LENGTH
"^DD",113.2,113.2,7,21,0)
^^2^2^2880710^
"^DD",113.2,113.2,7,21,1,0)
This field contains the telephone number of the vendor contact
"^DD",113.2,113.2,7,21,2,0)
person.
"^DD",113.2,113.2,7,"DT")
2850606
"^DD",113.2,113.2,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",113.2,113.2,99,1,0)
^.1
"^DD",113.2,113.2,99,1,1,0)
113.2^AC^MUMPS
"^DD",113.2,113.2,99,1,1,1)
K:X'="Y" ^FH(113.2,DA,"I")
"^DD",113.2,113.2,99,1,1,2)
K ^FH(113.2,DA,"I")
"^DD",113.2,113.2,99,1,1,"%D",0)
^^2^2^3000202
"^DD",113.2,113.2,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",113.2,113.2,99,1,1,"%D",2,0)
inactive entries.
"^DD",113.2,113.2,99,21,0)
^^2^2^3000202
"^DD",113.2,113.2,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",113.2,113.2,99,21,2,0)
further selection of this entry.
"^DD",113.2,113.2,99,"DT")
3000223
"^DD",114,114,0)
FIELD^^103^19
"^DD",114,114,0,"DT")
2950428
"^DD",114,114,0,"ID","WRITE")
I $D(^("Z")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",114,114,0,"IX","AC",114,99)

"^DD",114,114,0,"IX","B",114,.01)

"^DD",114,114,0,"IX","C",114,8)

"^DD",114,114,0,"NM","RECIPE")

"^DD",114,114,0,"PT",112.64,.01)

"^DD",114,114,0,"PT",114.03,.01)

"^DD",114,114,0,"PT",115.2,3)

"^DD",114,114,0,"PT",115.21,.01)

"^DD",114,114,0,"PT",116.11,.01)

"^DD",114,114,0,"PT",118,11)

"^DD",114,114,0,"PT",118.2,11)

"^DD",114,114,0,"SCR")
I '$D(^FH(114,+Y,"Z"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",114,114,0,"VRPK")
FH
"^DD",114,114,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",114,114,.01,1,0)
^.1
"^DD",114,114,.01,1,1,0)
114^B
"^DD",114,114,.01,1,1,1)
S ^FH(114,"B",$E(X,1,30),DA)=""
"^DD",114,114,.01,1,1,2)
K ^FH(114,"B",$E(X,1,30),DA)
"^DD",114,114,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",114,114,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",114,114,.01,3)
ANSWER MUST BE 3-30 CHARACTERS IN LENGTH
"^DD",114,114,.01,21,0)
^^3^3^2940701^^
"^DD",114,114,.01,21,1,0)
This is the name of the recipe. A recipe is anything served and
"^DD",114,114,.01,21,2,0)
may consist of a single ingredient which requires no
"^DD",114,114,.01,21,3,0)
preparation.
"^DD",114,114,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",114,114,.01,"DT")
2860102
"^DD",114,114,1,0)
INGREDIENT^114.01PA^^I;0
"^DD",114,114,1,21,0)
^^1^1^2880717^
"^DD",114,114,1,21,1,0)
This multiple contains the ingredients used in the recipe.
"^DD",114,114,1.5,0)
EMBEDDED RECIPE^114.03PA^^R;0
"^DD",114,114,1.5,21,0)
^^4^4^2881117^^^^
"^DD",114,114,1.5,21,1,0)
This field contains recipes which are 'embedded' in this recipe.
"^DD",114,114,1.5,21,2,0)
For example, a hot roast beef sandwich might contain bread
"^DD",114,114,1.5,21,3,0)
as an ingredient but roast beef as an embedded recipe and
"^DD",114,114,1.5,21,4,0)
perhaps even brown gravy as another embedded recipe.
"^DD",114,114,2,0)
NUMBER OF PORTIONS^RNJ4,0^^0;2^K:+X'=X!(X>1000)!(X<1)!(X?.E1"."1N.N) X
"^DD",114,114,2,3)
Type a Number between 1 and 1000, 0 Decimal Digits
"^DD",114,114,2,21,0)
^^3^3^2881117^^^
"^DD",114,114,2,21,1,0)
This is the yield, in terms of number of portions, of the
"^DD",114,114,2,21,2,0)
recipe. It should be within a factor of 10 of the normal quantity
"^DD",114,114,2,21,3,0)
needed and need not be 100.
"^DD",114,114,2,"DT")
2881117
"^DD",114,114,3,0)
PORTION SIZE^RFX^^0;3^K:$L(X)>8!($L(X)<1) X I $D(X) D EN3^FHREC1
"^DD",114,114,3,3)
ANSWER MUST BE A NUMBER FOLLOWED BY OZ, FLOZ OR EACH
"^DD",114,114,3,21,0)
^^2^2^2930916^^^^
"^DD",114,114,3,21,1,0)
This is a short description of the portion size, e.g., 3-oz. or
"^DD",114,114,3,21,2,0)
1 each. Size must be a number followed by OZ, EACH or FLOZ.
"^DD",114,114,3,"DT")
2880918
"^DD",114,114,4,0)
PREPARATION TIME^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",114,114,4,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",114,114,4,21,0)
^^2^2^2880717^
"^DD",114,114,4,21,1,0)
This field indicates the amount of preparation time this
"^DD",114,114,4,21,2,0)
recipe will require.
"^DD",114,114,5,0)
EQUIPMENT^114.05P^^E;0
"^DD",114,114,5,3)

"^DD",114,114,5,21,0)
^^2^2^2880919^
"^DD",114,114,5,21,1,0)
This multiple is used to indicate the various types of equipment
"^DD",114,114,5,21,2,0)
necessary to produce this recipe.
"^DD",114,114,5,"DT")
2871114
"^DD",114,114,6,0)
SERVING UTENSIL^P114.3'^FH(114.3,^0;6^Q
"^DD",114,114,6,3)

"^DD",114,114,6,21,0)
^^2^2^2930127^^
"^DD",114,114,6,21,1,0)
This field indicates the primary serving utensil which will be
"^DD",114,114,6,21,2,0)
required by tray line personnel or cafeteria line personnel.
"^DD",114,114,6,"DT")
2871114
"^DD",114,114,7,0)
DEFAULT CATEGORY^RP114.1'^FH(114.1,^0;7^Q
"^DD",114,114,7,3)

"^DD",114,114,7,21,0)
^^4^4^2880717^
"^DD",114,114,7,21,1,0)
This is the primary category of the recipe. Selection does not
"^DD",114,114,7,21,2,0)
prohibit the use of the recipe in other ways (e.g., a 'salad'
"^DD",114,114,7,21,3,0)
being used for dessert) but does influence the printing order
"^DD",114,114,7,21,4,0)
of the recipe in various lists.
"^DD",114,114,7,"DT")
2940120
"^DD",114,114,8,0)
SYNONYM^F^^0;9^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>25!($L(X)<3) X
"^DD",114,114,8,1,0)
^.1
"^DD",114,114,8,1,1,0)
114^C
"^DD",114,114,8,1,1,1)
S ^FH(114,"C",$E(X,1,30),DA)=""
"^DD",114,114,8,1,1,2)
K ^FH(114,"C",$E(X,1,30),DA)
"^DD",114,114,8,3)
ANSWER MUST BE 3-25 CHARACTERS IN LENGTH
"^DD",114,114,8,21,0)
^^2^2^2880717^
"^DD",114,114,8,21,1,0)
This field may contain a synonym, or alternate name, for the
"^DD",114,114,8,21,2,0)
recipe.
"^DD",114,114,8,"DT")
2861024
"^DD",114,114,9,0)
# DAYS PRE-PREP^NJ1,0^^0;10^K:+X'=X!(X>3)!(X<0)!(X?.E1"."1N.N) X
"^DD",114,114,9,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 3
"^DD",114,114,9,21,0)
^^3^3^2880717^
"^DD",114,114,9,21,1,0)
This field contains the number of days in advance that the recipe
"^DD",114,114,9,21,2,0)
must be prepared. It need be answered only when non-zero, that is,
"^DD",114,114,9,21,3,0)
when the recipe is prepared in advance of the serving day.
"^DD",114,114,9,"DT")
2861208
"^DD",114,114,10,0)
PRINT RECIPE^SO^Y:YES;N:NO;^0;8^Q
"^DD",114,114,10,2)
S Y(0)=Y S:Y="" Y="Y"
"^DD",114,114,10,2.1)
S:Y="" Y="Y"
"^DD",114,114,10,21,0)
^^5^5^2910506^^
"^DD",114,114,10,21,1,0)
This field, when answered NO, will inhibit the printing of the
"^DD",114,114,10,21,2,0)
recipe even when such printing is requested as part of the
"^DD",114,114,10,21,3,0)
production summary. It is generally used to inhibit printing
"^DD",114,114,10,21,4,0)
of one-ingredient recipes or those which require no
"^DD",114,114,10,21,5,0)
preparation.
"^DD",114,114,10,"DT")
2861024
"^DD",114,114,11,0)
PRE-PREP STATE^S^M:MIX;D:DEHYDRATED;F:FROZEN;C:CANNED;X:CONCENTRATED;S:SCRATCH;I:IND/R-T-S;P:PARTIALLY PREP;R:R-T-S;^0;11^Q
"^DD",114,114,11,21,0)
^^3^3^2880913^^
"^DD",114,114,11,21,1,0)
This field indicates the state of the recipe, i.e., whether
"^DD",114,114,11,21,2,0)
a canned item, dehydrated, partially prepared, ready-to-serve,
"^DD",114,114,11,21,3,0)
etc.
"^DD",114,114,11,"DT")
2880913
"^DD",114,114,12,0)
PREPARATION AREA^P114.2'^FH(114.2,^0;12^Q
"^DD",114,114,12,21,0)
^^2^2^2880717^
"^DD",114,114,12,21,1,0)
This field indicates the preparation area of the kitchen where
"^DD",114,114,12,21,2,0)
the recipe would normally be prepared.
"^DD",114,114,12,"DT")
2871017
"^DD",114,114,20,0)
DIRECTIONS^114.02^^X;0
"^DD",114,114,20,3)
ANSWER MUST BE 1-80 CHARACTERS IN LENGTH
"^DD",114,114,20,21,0)
^^7^7^2880717^^
"^DD",114,114,20,21,1,0)
This field contains the directions for the preparation of
"^DD",114,114,20,21,2,0)
the recipe. References to absolute quantities of an
"^DD",114,114,20,21,3,0)
ingredient should not be made since the recipe will normally
"^DD",114,114,20,21,4,0)
be printed in an 'adjusted' form -- that is, the number of
"^DD",114,114,20,21,5,0)
portions will be adjusted and hence the individual ingredient
"^DD",114,114,20,21,6,0)
amounts will vary from those entered for the yield of the
"^DD",114,114,20,21,7,0)
recipe.
"^DD",114,114,99,0)
INACTIVE?^S^Y:YES;N:NO;^Z;1^Q
"^DD",114,114,99,1,0)
^.1
"^DD",114,114,99,1,1,0)
114^AC^MUMPS
"^DD",114,114,99,1,1,1)
K:X'="Y" ^FH(114,DA,"Z")
"^DD",114,114,99,1,1,2)
K ^FH(114,DA,"Z")
"^DD",114,114,99,1,1,"%D",0)
^^2^2^3000202
"^DD",114,114,99,1,1,"%D",1,0)
This cross-reference is used to create an 'Z' node for
"^DD",114,114,99,1,1,"%D",2,0)
inactive entries.
"^DD",114,114,99,21,0)
^.001^2^2^3000414^
"^DD",114,114,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",114,114,99,21,2,0)
further selection of this entry.
"^DD",114,114,99,"DT")
3000223
"^DD",114,114,101,0)
COST/PORTION^NJ6,3^^0;13^K:+X'=X!(X>30)!(X<.001)!(X?.E1"."4N.N) X
"^DD",114,114,101,3)
Type a Number between .001 and 30, 3 Decimal Digits
"^DD",114,114,101,21,0)
^^2^2^2910506^^^^
"^DD",114,114,101,21,1,0)
This field contains the cost per portion of the recipe based upon
"^DD",114,114,101,21,2,0)
the current prices shown in the Ingredient file (113).
"^DD",114,114,101,"DT")
2871018
"^DD",114,114,102,0)
ASSOCIATED NUTRIENT ANALYSIS^P112'^FHNU(^0;14^Q
"^DD",114,114,102,21,0)
^^2^2^2930423^
"^DD",114,114,102,21,1,0)
This is a pointer to the Nutrient file (112) and contains the
"^DD",114,114,102,21,2,0)
nutrient analysis of this recipe.
"^DD",114,114,102,"DT")
2921111
"^DD",114,114,103,0)
DIABETIC EXCHANGE^114.0103P^^DBX;0
"^DD",114,114,103,21,0)
^^2^2^2950501^^^^
"^DD",114,114,103,21,1,0)
This multiple contains the Diabetic exchanges associated with this
"^DD",114,114,103,21,2,0)
recipe.  It is use to handle the Diabetic calculated diets.
"^DD",114,114.01,0)
INGREDIENT SUB-FIELD^NL^3^4
"^DD",114,114.01,0,"DT")
2921111
"^DD",114,114.01,0,"NM","INGREDIENT")

"^DD",114,114.01,0,"UP")
114
"^DD",114,114.01,.01,0)
INGREDIENT^MP113'X^FHING(^0;1^K:$D(^FHING(X,"I")) X Q
"^DD",114,114.01,.01,21,0)
^^2^2^2880717^
"^DD",114,114.01,.01,21,1,0)
This field contains the name of an ingredient used in the
"^DD",114,114.01,.01,21,2,0)
recipe.
"^DD",114,114.01,.01,"DT")
3010926
"^DD",114,114.01,1,0)
QUANTITY^RNJ7,2XO^^0;2^S I9=+^FH(114,D0,"I",D1,0),UNT=$P(^FHING(I9,0),U,16) D EN1^FHREC1 I $D(X) K:X<.00001!(X>5000) X
"^DD",114,114.01,1,2)
S Y(0)=Y S I9=+^FH(114,D0,"I",D1,0),UNT=$P(^FHING(I9,0),U,16) D:Y'="" EN2^FHREC1
"^DD",114,114.01,1,2.1)
S I9=+^FH(114,D0,"I",D1,0),UNT=$P(^FHING(I9,0),U,16) D:Y'="" EN2^FHREC1
"^DD",114,114.01,1,3)
Enter Quantity in proper units
"^DD",114,114.01,1,21,0)
^^3^3^2920113^^^^
"^DD",114,114.01,1,21,1,0)
This field contains the quantity of the ingredient required. The
"^DD",114,114.01,1,21,2,0)
units are the 'Recipe Unit' as contained in the Ingredient file
"^DD",114,114.01,1,21,3,0)
for this ingredient.
"^DD",114,114.01,1,"DT")
2860812
"^DD",114,114.01,2,0)
ASSOCIATED NUTRIENT^P112'^FHNU(^0;3^Q
"^DD",114,114.01,2,21,0)
^^3^3^2930423^
"^DD",114,114.01,2,21,1,0)
This field is a pointer to the Nutrient file (112) and indicates
"^DD",114,114.01,2,21,2,0)
the nutrient most closely associated with this ingredient after
"^DD",114,114.01,2,21,3,0)
preparation.
"^DD",114,114.01,2,"DT")
2921111
"^DD",114,114.01,3,0)
NUTRIENT AMOUNT IN LBS.^NJ10,5^^0;4^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."6N.N) X
"^DD",114,114.01,3,3)
Type a Number between 0 and 9999, 5 Decimal Digits
"^DD",114,114.01,3,21,0)
^^4^4^2930423^
"^DD",114,114.01,3,21,1,0)
This value is the amount of the ingredient, in pounds, for
"^DD",114,114.01,3,21,2,0)
Nutrient Analysis purposes after taking into account removal
"^DD",114,114.01,3,21,3,0)
of non-edible amounts of the ingredient and any expansion or
"^DD",114,114.01,3,21,4,0)
shrinkage due to preparation.
"^DD",114,114.01,3,"DT")
2921111
"^DD",114,114.0103,0)
DIABETIC EXCHANGE SUB-FIELD^^1^2
"^DD",114,114.0103,0,"DT")
2950428
"^DD",114,114.0103,0,"IX","B",114.0103,.01)

"^DD",114,114.0103,0,"NM","DIABETIC EXCHANGE")

"^DD",114,114.0103,0,"UP")
114
"^DD",114,114.0103,.01,0)
DIABETIC EXCHANGE^MP114.1'^FH(114.1,^0;1^Q
"^DD",114,114.0103,.01,1,0)
^.1
"^DD",114,114.0103,.01,1,1,0)
114.0103^B
"^DD",114,114.0103,.01,1,1,1)
S ^FH(114,DA(1),"DBX","B",$E(X,1,30),DA)=""
"^DD",114,114.0103,.01,1,1,2)
K ^FH(114,DA(1),"DBX","B",$E(X,1,30),DA)
"^DD",114,114.0103,.01,21,0)
^^2^2^2950428^^^^
"^DD",114,114.0103,.01,21,1,0)
This multiple contains the Diabetic exchanges associated with
"^DD",114,114.0103,.01,21,2,0)
this recipe.
"^DD",114,114.0103,.01,"DT")
2950428
"^DD",114,114.0103,1,0)
QUANTITY^RNJ1,0^^0;2^K:+X'=X!(X>5)!(X<1)!(X?.E1"."1N.N) X
"^DD",114,114.0103,1,3)
Type a Number between 1 and 5, 0 Decimal Digits
"^DD",114,114.0103,1,21,0)
^^3^3^2950501^^^^
"^DD",114,114.0103,1,21,1,0)
This is the quantity of the Diabetic exchange that needs to be
"^DD",114,114.0103,1,21,2,0)
omitted when the recipe is used in a meal for the Diabetic
"^DD",114,114.0103,1,21,3,0)
calculated diets.
"^DD",114,114.0103,1,"DT")
2950428
"^DD",114,114.02,0)
DIRECTIONS SUB-FIELD^NL^.01^1
"^DD",114,114.02,0,"NM","DIRECTIONS")

"^DD",114,114.02,0,"UP")
114
"^DD",114,114.02,.01,0)
DIRECTIONS^W^^0;1^Q
"^DD",114,114.02,.01,21,0)
^^2^2^2880717^
"^DD",114,114.02,.01,21,1,0)
This field contains the text of the recipe preparation
"^DD",114,114.02,.01,21,2,0)
instructions.
"^DD",114,114.02,.01,"DT")
2840822
"^DD",114,114.03,0)
EMBEDDED RECIPE SUB-FIELD^NL^1^2
"^DD",114,114.03,0,"NM","EMBEDDED RECIPE")

"^DD",114,114.03,0,"UP")
114
"^DD",114,114.03,.01,0)
EMBEDDED RECIPE^M*P114'X^FH(114,^0;1^S DIC("S")="I +Y'=D0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",114,114.03,.01,12)
Don't allow selection of current recipe
"^DD",114,114.03,.01,12.1)
S DIC("S")="I +Y'=D0"
"^DD",114,114.03,.01,21,0)
^^3^3^2880914^^
"^DD",114,114.03,.01,21,1,0)
This field contains the name of a recipe which is to be
"^DD",114,114.03,.01,21,2,0)
embedded in the present one. The embedded recipe cannot be
"^DD",114,114.03,.01,21,3,0)
the same as the present recipe.
"^DD",114,114.03,.01,"DT")
2860918
"^DD",114,114.03,1,0)
NO. OF PORTIONS^RNJ7,2^^0;2^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."3N.N) X
"^DD",114,114.03,1,3)
TYPE A NUMBER BETWEEN 0 AND 9999
"^DD",114,114.03,1,21,0)
^^2^2^2881117^^
"^DD",114,114.03,1,21,1,0)
This is the number of portions of the embedded recipe required
"^DD",114,114.03,1,21,2,0)
in the present recipe.
"^DD",114,114.03,1,"DT")
2851222
"^DD",114,114.05,0)
EQUIPMENT SUB-FIELD^^.01^1
"^DD",114,114.05,0,"IX","B",114.05,.01)

"^DD",114,114.05,0,"NM","EQUIPMENT")

"^DD",114,114.05,0,"UP")
114
"^DD",114,114.05,.01,0)
EQUIPMENT^MP114.4^FH(114.4,^0;1^Q
"^DD",114,114.05,.01,1,0)
^.1
"^DD",114,114.05,.01,1,1,0)
114.05^B
"^DD",114,114.05,.01,1,1,1)
S ^FH(114,DA(1),"E","B",$E(X,1,30),DA)=""
"^DD",114,114.05,.01,1,1,2)
K ^FH(114,DA(1),"E","B",$E(X,1,30),DA)
"^DD",114,114.05,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",114,114.05,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the EQUIPMENT field.
"^DD",114,114.05,.01,21,0)
^^3^3^2880919^
"^DD",114,114.05,.01,21,1,0)
This field contains a pointer to the Equipment file (114.4) and
"^DD",114,114.05,.01,21,2,0)
indicates an item of equipment used in the production of this
"^DD",114,114.05,.01,21,3,0)
recipe.
"^DD",114,114.05,.01,"DT")
2880914
"^DD",114.1,114.1,0)
FIELD^^99^4
"^DD",114.1,114.1,0,"DT")
2950428
"^DD",114.1,114.1,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",114.1,114.1,0,"IX","AC",114.1,99)

"^DD",114.1,114.1,0,"IX","B",114.1,.01)

"^DD",114.1,114.1,0,"IX","C",114.1,1)

"^DD",114.1,114.1,0,"NM","RECIPE CATEGORY")

"^DD",114.1,114.1,0,"PT",111.115,.01)

"^DD",114.1,114.1,0,"PT",111.116,.01)

"^DD",114.1,114.1,0,"PT",111.117,.01)

"^DD",114.1,114.1,0,"PT",114,7)

"^DD",114.1,114.1,0,"PT",114.0103,.01)

"^DD",114.1,114.1,0,"PT",116.11,3)

"^DD",114.1,114.1,0,"PT",116.12,.01)

"^DD",114.1,114.1,0,"SCR")
I '$D(^FH(114.1,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",114.1,114.1,0,"VRPK")
FH
"^DD",114.1,114.1,.01,0)
NAME^RF^^0;1^K:$L(X)>15!($L(X)<3)!'(X'?1P.E) X
"^DD",114.1,114.1,.01,1,0)
^.1
"^DD",114.1,114.1,.01,1,1,0)
114.1^B
"^DD",114.1,114.1,.01,1,1,1)
S ^FH(114.1,"B",$E(X,1,30),DA)=""
"^DD",114.1,114.1,.01,1,1,2)
K ^FH(114.1,"B",$E(X,1,30),DA)
"^DD",114.1,114.1,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",114.1,114.1,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",114.1,114.1,.01,3)
ANSWER MUST BE 3-15 CHARACTERS IN LENGTH
"^DD",114.1,114.1,.01,21,0)
^^3^3^2880709^
"^DD",114.1,114.1,.01,21,1,0)
This is the name of a category of recipes (e.g., beverages,
"^DD",114.1,114.1,.01,21,2,0)
condiments, entree meats, etc.) which are used to sort the
"^DD",114.1,114.1,.01,21,3,0)
recipe items on the various meal lists.
"^DD",114.1,114.1,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",114.1,114.1,1,0)
CODE^RFX^^0;2^K:X[""""!$A(X)=45 X I $D(X) D TR^FH K:X'?1U.1U1N.1"X" X I $D(X) S Y=$O(^FH(114.1,"C",X,0)) I Y>0,Y-DA W *7,"  Code used by ",$P(^FH(114.1,Y,0),"^",1) K X
"^DD",114.1,114.1,1,1,0)
^.1
"^DD",114.1,114.1,1,1,1,0)
114.1^C
"^DD",114.1,114.1,1,1,1,1)
S ^FH(114.1,"C",$E(X,1,30),DA)=""
"^DD",114.1,114.1,1,1,1,2)
K ^FH(114.1,"C",$E(X,1,30),DA)
"^DD",114.1,114.1,1,3)
ANSWER MUST BE ONE TO TWO CHARACTERS AND A NUMBER OR ONE TO TWO CHARACTERS, A NUMBER AND AN 'X' AT THE END.
"^DD",114.1,114.1,1,21,0)
^^3^3^2950502^^^^
"^DD",114.1,114.1,1,21,1,0)
This field represents a short code for the recipe category. It
"^DD",114.1,114.1,1,21,2,0)
consists of one to two characters and a number or one to two characters,
"^DD",114.1,114.1,1,21,3,0)
a number, and an 'X' used when printing tray assembly tickets.
"^DD",114.1,114.1,1,"DT")
2950428
"^DD",114.1,114.1,2,0)
MEAL PRINT ORDER^RNJ2,0^^0;3^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",114.1,114.1,2,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",114.1,114.1,2,21,0)
^^3^3^2880717^
"^DD",114.1,114.1,2,21,1,0)
This value is used to sort recipes for printing as meals. The
"^DD",114.1,114.1,2,21,2,0)
value indicates the relative print order, from low to high, of
"^DD",114.1,114.1,2,21,3,0)
recipes in this recipe category.
"^DD",114.1,114.1,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",114.1,114.1,99,1,0)
^.1
"^DD",114.1,114.1,99,1,1,0)
114.1^AC^MUMPS
"^DD",114.1,114.1,99,1,1,1)
K:X'="Y" ^FH(114.1,DA,"I")
"^DD",114.1,114.1,99,1,1,2)
K ^FH(114.1,DA,"I")
"^DD",114.1,114.1,99,1,1,"%D",0)
^^1^1^2940701^
"^DD",114.1,114.1,99,1,1,"%D",1,0)
This is a cross reference for Recipe Categories that are inactive.
"^DD",114.1,114.1,99,1,1,"DT")
2940701
"^DD",114.1,114.1,99,21,0)
^^2^2^2950221^^^^
"^DD",114.1,114.1,99,21,1,0)
This field, when answered YES, will prohibit further selection
"^DD",114.1,114.1,99,21,2,0)
of this Recipe Category.
"^DD",114.1,114.1,99,"DT")
2940701
"^DD",114.2,114.2,0)
FIELD^^99^4
"^DD",114.2,114.2,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",114.2,114.2,0,"IX","AC",114.2,99)

"^DD",114.2,114.2,0,"IX","B",114.2,.01)

"^DD",114.2,114.2,0,"NM","PREPARATION AREA")

"^DD",114.2,114.2,0,"PT",114,12)

"^DD",114.2,114.2,0,"SCR")
I '$D(^FH(114.2,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",114.2,114.2,0,"VRPK")
FH
"^DD",114.2,114.2,.01,0)
NAME^RF^^0;1^K:$L(X)>15!($L(X)<3)!'(X'?1P.E) X
"^DD",114.2,114.2,.01,1,0)
^.1
"^DD",114.2,114.2,.01,1,1,0)
114.2^B
"^DD",114.2,114.2,.01,1,1,1)
S ^FH(114.2,"B",$E(X,1,30),DA)=""
"^DD",114.2,114.2,.01,1,1,2)
K ^FH(114.2,"B",$E(X,1,30),DA)
"^DD",114.2,114.2,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",114.2,114.2,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",114.2,114.2,.01,3)
ANSWER MUST BE 3-15 CHARACTERS IN LENGTH
"^DD",114.2,114.2,.01,21,0)
^^2^2^2880709^
"^DD",114.2,114.2,.01,21,1,0)
This is the name of an area where recipes are prepared (e.g.,
"^DD",114.2,114.2,.01,21,2,0)
salad area, bakery, etc.).
"^DD",114.2,114.2,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",114.2,114.2,1,0)
CODE^RF^^0;2^K:$L(X)>5!($L(X)<2) X
"^DD",114.2,114.2,1,3)
ANSWER MUST BE 2-5 CHARACTERS IN LENGTH
"^DD",114.2,114.2,1,21,0)
^^3^3^2880709^
"^DD",114.2,114.2,1,21,1,0)
This is a short abbreviation for the preparation area. It is used
"^DD",114.2,114.2,1,21,2,0)
on various lists where it is not practical to print the longer
"^DD",114.2,114.2,1,21,3,0)
full name. It should be unique.
"^DD",114.2,114.2,2,0)
PRINT ORDER^RNJ2,0^^0;3^K:+X'=X!(X>49)!(X<1)!(X?.E1"."1N.N) X
"^DD",114.2,114.2,2,3)
Type a Number between 1 and 49, 0 Decimal Digits
"^DD",114.2,114.2,2,21,0)
^^3^3^2880709^
"^DD",114.2,114.2,2,21,1,0)
This is a numeric value indicating the print order (from low to
"^DD",114.2,114.2,2,21,2,0)
high) of various preparation areas when the list is sorted by
"^DD",114.2,114.2,2,21,3,0)
preparation area.
"^DD",114.2,114.2,2,"DT")
2880328
"^DD",114.2,114.2,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",114.2,114.2,99,1,0)
^.1
"^DD",114.2,114.2,99,1,1,0)
114.2^AC^MUMPS
"^DD",114.2,114.2,99,1,1,1)
K:X'="Y" ^FH(114.2,DA,"I")
"^DD",114.2,114.2,99,1,1,2)
K ^FH(114.2,DA,"I")
"^DD",114.2,114.2,99,1,1,"%D",0)
^^2^2^3000202
"^DD",114.2,114.2,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",114.2,114.2,99,1,1,"%D",2,0)
inactive entries.
"^DD",114.2,114.2,99,21,0)
^^2^2^3000202
"^DD",114.2,114.2,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",114.2,114.2,99,21,2,0)
further selection of this entry.
"^DD",114.2,114.2,99,"DT")
3000223
"^DD",114.3,114.3,0)
FIELD^^99^2
"^DD",114.3,114.3,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",114.3,114.3,0,"IX","AC",114.3,99)

"^DD",114.3,114.3,0,"IX","B",114.3,.01)

"^DD",114.3,114.3,0,"NM","SERVING UTENSIL")

"^DD",114.3,114.3,0,"PT",114,6)

"^DD",114.3,114.3,0,"SCR")
I '$D(^FH(114.3,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",114.3,114.3,0,"VRPK")
FH
"^DD",114.3,114.3,.01,0)
NAME^RF^^0;1^K:$L(X)>10!($L(X)<1) X
"^DD",114.3,114.3,.01,1,0)
^.1
"^DD",114.3,114.3,.01,1,1,0)
114.3^B
"^DD",114.3,114.3,.01,1,1,1)
S ^FH(114.3,"B",$E(X,1,30),DA)=""
"^DD",114.3,114.3,.01,1,1,2)
K ^FH(114.3,"B",$E(X,1,30),DA)
"^DD",114.3,114.3,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",114.3,114.3,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",114.3,114.3,.01,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",114.3,114.3,.01,21,0)
^^3^3^2880709^
"^DD",114.3,114.3,.01,21,1,0)
This is the name of a serving utensil. It is used by the recipe
"^DD",114.3,114.3,.01,21,2,0)
file to indicate the usual utensil used by tray line personnel
"^DD",114.3,114.3,.01,21,3,0)
or others to serve the recipe item.
"^DD",114.3,114.3,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",114.3,114.3,.01,"DT")
2871115
"^DD",114.3,114.3,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",114.3,114.3,99,1,0)
^.1
"^DD",114.3,114.3,99,1,1,0)
114.3^AC^MUMPS
"^DD",114.3,114.3,99,1,1,1)
K:X'="Y" ^FH(114.3,DA,"I")
"^DD",114.3,114.3,99,1,1,2)
K ^FH(114.3,DA,"I")
"^DD",114.3,114.3,99,1,1,"%D",0)
^^2^2^3000202
"^DD",114.3,114.3,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",114.3,114.3,99,1,1,"%D",2,0)
inactive entries.
"^DD",114.3,114.3,99,21,0)
^^2^2^3000202
"^DD",114.3,114.3,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",114.3,114.3,99,21,2,0)
further selection of this entry.
"^DD",114.3,114.3,99,"DT")
3000223
"^DD",114.4,114.4,0)
FIELD^^99^2
"^DD",114.4,114.4,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",114.4,114.4,0,"IX","AC",114.4,99)

"^DD",114.4,114.4,0,"IX","B",114.4,.01)

"^DD",114.4,114.4,0,"NM","EQUIPMENT")

"^DD",114.4,114.4,0,"PT",114.05,.01)

"^DD",114.4,114.4,0,"SCR")
I '$D(^FH(114.4,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",114.4,114.4,0,"VRPK")
FH
"^DD",114.4,114.4,.01,0)
NAME^RF^^0;1^K:$L(X)>21!($L(X)<3) X
"^DD",114.4,114.4,.01,1,0)
^.1
"^DD",114.4,114.4,.01,1,1,0)
114.4^B
"^DD",114.4,114.4,.01,1,1,1)
S ^FH(114.4,"B",$E(X,1,30),DA)=""
"^DD",114.4,114.4,.01,1,1,2)
K ^FH(114.4,"B",$E(X,1,30),DA)
"^DD",114.4,114.4,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",114.4,114.4,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",114.4,114.4,.01,3)
ANSWER MUST BE 3-21 CHARACTERS IN LENGTH
"^DD",114.4,114.4,.01,21,0)
^^3^3^2880709^
"^DD",114.4,114.4,.01,21,1,0)
This is the name of an equipment item (large kettle, convection
"^DD",114.4,114.4,.01,21,2,0)
oven, etc.) and is used by the recipe file to indicate the
"^DD",114.4,114.4,.01,21,3,0)
usual preparation equipment needed.
"^DD",114.4,114.4,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",114.4,114.4,.01,"DT")
2880117
"^DD",114.4,114.4,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",114.4,114.4,99,1,0)
^.1
"^DD",114.4,114.4,99,1,1,0)
114.4^AC^MUMPS
"^DD",114.4,114.4,99,1,1,1)
K:X'="Y" ^FH(114.4,DA,"I")
"^DD",114.4,114.4,99,1,1,2)
K ^FH(114.4,DA,"I")
"^DD",114.4,114.4,99,1,1,"%D",0)
^^2^2^3000202
"^DD",114.4,114.4,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",114.4,114.4,99,1,1,"%D",2,0)
inactive entries.
"^DD",114.4,114.4,99,21,0)
^^2^2^3000202
"^DD",114.4,114.4,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",114.4,114.4,99,21,2,0)
further selection of this entry.
"^DD",114.4,114.4,99,"DT")
3000223
"^DD",115,115,0)
FIELD^^20^12
"^DD",115,115,0,"DDA")
N
"^DD",115,115,0,"DT")
3041206
"^DD",115,115,0,"IX","ADLT",115.05,.01)

"^DD",115,115,0,"IX","ADR",115.03,.01)

"^DD",115,115,0,"IX","ADRU",115.03,4)

"^DD",115,115,0,"IX","ADRV",115.03,7)

"^DD",115,115,0,"IX","ADTF",115.01,1.3)

"^DD",115,115,0,"IX","AIS",115.01,9)

"^DD",115,115,0,"IX","AOO",115.06,4)

"^DD",115,115,0,"IX","ASP",115.08,1)

"^DD",115,115,0,"IX","ASP1",115.08,5)

"^DD",115,115,0,"IX","AW",115.01,13)

"^DD",115,115,0,"IX","B",115,.01)

"^DD",115,115,0,"IX","C",115.016,2)

"^DD",115,115,0,"IX","GM",115.018,.01)

"^DD",115,115,0,"IX","IP",115,19)

"^DD",115,115,0,"IX","OP",115.016,.01)

"^DD",115,115,0,"IX","RM",115.016,.01)

"^DD",115,115,0,"IX","SM",115.017,.01)

"^DD",115,115,0,"NM","NUTRITION PERSON")

"^DD",115,115,0,"PT",119.8,2)

"^DD",115,115,0,"VRPK")
FH
"^DD",115,115,.01,0)
NAME^RF^^0;1^K:$L(X)>7!($L(X)<2)!'(X?1"P"1.6N!(X?1"N"1.6N)) X
"^DD",115,115,.01,1,0)
^.1
"^DD",115,115,.01,1,1,0)
115^B
"^DD",115,115,.01,1,1,1)
S ^FHPT("B",$E(X,1,30),DA)=""
"^DD",115,115,.01,1,1,2)
K ^FHPT("B",$E(X,1,30),DA)
"^DD",115,115,.01,1,1,"%D",0)
^^2^2^3030219^
"^DD",115,115,.01,1,1,"%D",1,0)
A standard "B" cross-reference on the .01 field for file 115.
"^DD",115,115,.01,1,1,"%D",2,0)
Added 2/19/2003.
"^DD",115,115,.01,1,1,"DT")
3030219
"^DD",115,115,.01,3)
Answer must be 2-7 characters in length.
"^DD",115,115,.01,21,0)
^.001^14^14^3030918^^^^
"^DD",115,115,.01,21,1,0)
Beginning with the Outpatient Meals release this field will simply be a
"^DD",115,115,.01,21,2,0)
free text field.  This file will need to point to either File #2 or File #200
"^DD",115,115,.01,21,3,0)
and those pointer values will be stored in fields #14 & #15 respectively.
"^DD",115,115,.01,21,4,0)
Those 2 fields will be mutually exclusive, ie, each entry in this file must
"^DD",115,115,.01,21,5,0)
have a pointer value in EITHER field #14 OR field #15, BUT NOT BOTH.
"^DD",115,115,.01,21,6,0)

"^DD",115,115,.01,21,7,0)
Previously, this field was a pointer to the main ^DPT file and had the same
"^DD",115,115,.01,21,8,0)
internal number as that file. Thus, the patient's name was the ^DPT name.
"^DD",115,115,.01,21,9,0)
This was no longer feasible since it was necessary to point to file #200 also.
"^DD",115,115,.01,21,10,0)

"^DD",115,115,.01,21,11,0)
This field will now store either "P" followed by a pointer value to file #2
"^DD",115,115,.01,21,12,0)
or an "N" followed by a pointer value to #200.  For example, this field
"^DD",115,115,.01,21,13,0)
might store P27 for IEN #27 in file #2.  Or this field might store N1866 for
"^DD",115,115,.01,21,14,0)
IEN #1866 in file #200.
"^DD",115,115,.01,"DT")
3030219
"^DD",115,115,1,0)
ADMISSION^115.01D^^A;0
"^DD",115,115,1,21,0)
^.001^2^2^3040224^^^^
"^DD",115,115,1,21,1,0)
This multiple contains all dietetic information pertaining
"^DD",115,115,1,21,2,0)
to this particular admission.
"^DD",115,115,1,"DT")
2920103
"^DD",115,115,10,0)
FOOD PREFERENCES^115.09PA^^P;0
"^DD",115,115,10,21,0)
^.001^1^1^3030623^^^
"^DD",115,115,10,21,1,0)
This multiple contains the food preferences selected by the patient.
"^DD",115,115,11,0)
NUTRITION ASSESSMENT^115.011D^^N;0
"^DD",115,115,11,21,0)
^^2^2^2920520^^^^
"^DD",115,115,11,21,1,0)
This field contains Nutrition Assessments performed
"^DD",115,115,11,21,2,0)
for this patient.
"^DD",115,115,12,0)
NUTRITION STATUS^115.012D^^S;0
"^DD",115,115,12,21,0)
^.001^2^2^3031014^^^^
"^DD",115,115,12,21,1,0)
This multiple contains the nutrition assessment
"^DD",115,115,12,21,2,0)
statuses that have been entered for this patient.
"^DD",115,115,14,0)
PATIENT^P2'^DPT(^0;3^Q
"^DD",115,115,14,21,0)
^.001^4^4^3030416^^
"^DD",115,115,14,21,1,0)
This field, if populated, will contain a pointer to the Patient (#2) file,
"^DD",115,115,14,21,2,0)
if the Nutrition Person is a patient.  This field and field #15 are mutually
"^DD",115,115,14,21,3,0)
exclusive, in other words each entry in this file should have a value in
"^DD",115,115,14,21,4,0)
either this field or field #15.
"^DD",115,115,14,"DT")
3030210
"^DD",115,115,15,0)
NEW PERSON^P200'^VA(200,^0;4^Q
"^DD",115,115,15,21,0)
^.001^4^4^3030416^^
"^DD",115,115,15,21,1,0)
This field, if populated, will contain a pointer to the New Person (#200)
"^DD",115,115,15,21,2,0)
file, if the Nutrition Person is a NOT a patient.  This field and field #14
"^DD",115,115,15,21,3,0)
are mutually exclusive, in other words each entry in this file should have
"^DD",115,115,15,21,4,0)
a value in either this field or field #14.
"^DD",115,115,15,"DT")
3030210
"^DD",115,115,16,0)
RECURRING MEALS^115.016D^^OP;0
"^DD",115,115,16,21,0)
^.001^1^1^3041206^^^^
"^DD",115,115,16,21,1,0)
This multiple stores the recurring meals data.
"^DD",115,115,16,"DT")
3030417
"^DD",115,115,17,0)
SPECIAL MEALS^115.017D^^SM;0
"^DD",115,115,17,21,0)
^.001^1^1^3040608^^^^
"^DD",115,115,17,21,1,0)
This multiple stores special meals data.
"^DD",115,115,18,0)
GUEST MEALS^115.018D^^GM;0
"^DD",115,115,18,21,0)
^.001^1^1^3040224^^^^
"^DD",115,115,18,21,1,0)
This multiple stores the guest meals data.
"^DD",115,115,19,0)
ISOLATION/PRECAUTION (OUTPT)^P119.4'^FH(119.4,^0;5^Q
"^DD",115,115,19,1,0)
^.1
"^DD",115,115,19,1,1,0)
115^IP^MUMPS
"^DD",115,115,19,1,1,1)
S ^FHPT("IP",DA)=""
"^DD",115,115,19,1,1,2)
K ^FHPT("IP",DA)
"^DD",115,115,19,1,1,"%D",0)
^^1^1^3030923^
"^DD",115,115,19,1,1,"%D",1,0)
Cross reference for outpatient isolations/precautions.
"^DD",115,115,19,1,1,"DT")
3030923
"^DD",115,115,19,21,0)
^^4^4^3030918^
"^DD",115,115,19,21,1,0)
This field, if present, indicates that the outpatient is presently
"^DD",115,115,19,21,2,0)
on isolation or special precautions.  Note: this field is for outpatients
"^DD",115,115,19,21,3,0)
and is different from the isolation/precautions field for inpatients which
"^DD",115,115,19,21,4,0)
is associated with a specific admission.
"^DD",115,115,19,"DT")
3030923
"^DD",115,115,20,0)
IP OE/RR ORDER (OUTPT)^P100'^OR(100,^0;6^Q
"^DD",115,115,20,21,0)
^^1^1^3040122^
"^DD",115,115,20,21,1,0)
Pointer to File #100 for I/P's entered thru OE/RR.
"^DD",115,115,20,"DT")
3040122
"^DD",115,115.01,0)
ADMISSION SUB-FIELD^NL^90^24
"^DD",115,115.01,0,"DT")
3021030
"^DD",115,115.01,0,"NM","ADMISSION")

"^DD",115,115.01,0,"UP")
115
"^DD",115,115.01,.01,0)
ADMISSION^D^^0;1^S %DT="ETS" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,.01,21,0)
^^3^3^2911204^^^^
"^DD",115,115.01,.01,21,1,0)
This is the date/time of admission. The admission has the same
"^DD",115,115.01,.01,21,2,0)
date/time and internal number as the corresponding MAS
"^DD",115,115.01,.01,21,3,0)
admission stored in ^DPT.
"^DD",115,115.01,1.1,0)
CURRENT DIET ORDER^NJ5,0I^^0;2^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.01,1.1,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99999
"^DD",115,115.01,1.1,9)
^
"^DD",115,115.01,1.1,21,0)
^^2^2^2950613^^^^
"^DD",115,115.01,1.1,21,1,0)
This field is actually a pointer to the current diet order
"^DD",115,115.01,1.1,21,2,0)
stored in Field 3.
"^DD",115,115.01,1.1,"DT")
2880515
"^DD",115,115.01,1.2,0)
DIET ORDER EXPIRATION^DI^^0;3^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,1.2,9)
^
"^DD",115,115.01,1.2,21,0)
^^3^3^2950613^^^^
"^DD",115,115.01,1.2,21,1,0)
This field contains the date/time of expiration of the current
"^DD",115,115.01,1.2,21,2,0)
diet pointed to by Field 1.1. If null, the current diet has
"^DD",115,115.01,1.2,21,3,0)
no expiration date/time.
"^DD",115,115.01,1.2,"DT")
2880515
"^DD",115,115.01,1.3,0)
CURRENT TF ORDER^NJ5,0I^^0;4^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.01,1.3,1,0)
^.1
"^DD",115,115.01,1.3,1,1,0)
115^ADTF^MUMPS
"^DD",115,115.01,1.3,1,1,1)
S ^FHPT("ADTF",DA(1),DA)=""
"^DD",115,115.01,1.3,1,1,2)
K ^FHPT("ADTF",DA(1),DA)
"^DD",115,115.01,1.3,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.01,1.3,1,1,"%D",1,0)
This is a list of Patients by Admission who have a current
"^DD",115,115.01,1.3,1,1,"%D",2,0)
Tubefeeding Order.
"^DD",115,115.01,1.3,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99999
"^DD",115,115.01,1.3,9)
^
"^DD",115,115.01,1.3,21,0)
3^^3^3^2950613^^^
"^DD",115,115.01,1.3,21,1,0)
This field is actually a pointer to the current Tubefeeding Order
"^DD",115,115.01,1.3,21,2,0)
stored in Field 40. If null, no current tubefeeding order
"^DD",115,115.01,1.3,21,3,0)
exists.
"^DD",115,115.01,1.3,"DT")
2850718
"^DD",115,115.01,2.1,0)
CURRENT SERVICE^SI^C:CAFETERIA;T:TRAY;D:DINING ROOM;^0;5^Q
"^DD",115,115.01,2.1,21,0)
^^3^3^2920512^^^^
"^DD",115,115.01,2.1,21,1,0)
This field contains the most recent type of service (tray,
"^DD",115,115.01,2.1,21,2,0)
cafeteria or dining room) selected for the patient. It is
"^DD",115,115.01,2.1,21,3,0)
used as a default for future orders.
"^DD",115,115.01,2.1,"DT")
2880515
"^DD",115,115.01,3,0)
DIET^115.02A^^DI;0
"^DD",115,115.01,3,21,0)
^.001^2^2^3040224^^^^
"^DD",115,115.01,3,21,1,0)
This multiple contains the individual diet orders which have
"^DD",115,115.01,3,21,2,0)
been entered during this admission.
"^DD",115,115.01,4,0)
DIET SEQUENCE^115.14DA^^AC;0
"^DD",115,115.01,4,21,0)
^^5^5^2911223^^^
"^DD",115,115.01,4,21,1,0)
This multiple indicates the sequence in which the diet orders
"^DD",115,115.01,4,21,2,0)
actually become effective. Since orders entered later supercede
"^DD",115,115.01,4,21,3,0)
earlier orders, the sequence times may not be the same as those
"^DD",115,115.01,4,21,4,0)
of the original order. This multiple is the outcome of a
"^DD",115,115.01,4,21,5,0)
recursive templating schemata.
"^DD",115,115.01,6,0)
CURRENT SF ORDER^NJ4,0I^^0;7^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.01,6,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",115,115.01,6,21,0)
^^4^4^2880710^
"^DD",115,115.01,6,21,1,0)
This field is actually a pointer to the Supplemental Feeding
"^DD",115,115.01,6,21,2,0)
multiple (Field 20) and, if present, indicates which order
"^DD",115,115.01,6,21,3,0)
is presently in effect. It is updated any time any diet
"^DD",115,115.01,6,21,4,0)
activity involving supplemental feedings takes place.
"^DD",115,115.01,6,"DT")
2880515
"^DD",115,115.01,9,0)
ISOLATION/PRECAUTION^P119.4'^FH(119.4,^0;10^Q
"^DD",115,115.01,9,1,0)
^.1
"^DD",115,115.01,9,1,1,0)
115^AIS^MUMPS
"^DD",115,115.01,9,1,1,1)
S ^FHPT("AIS",DA(1),DA)=""
"^DD",115,115.01,9,1,1,2)
K ^FHPT("AIS",DA(1),DA)
"^DD",115,115.01,9,1,1,"%D",0)
^^1^1^2940824^
"^DD",115,115.01,9,1,1,"%D",1,0)
This cross-reference is a list of patients on isolation/precautions.
"^DD",115,115.01,9,3)

"^DD",115,115.01,9,21,0)
^.001^2^2^3030918^^
"^DD",115,115.01,9,21,1,0)
This field, if present, indicates that the patient is presently
"^DD",115,115.01,9,21,2,0)
on isolation or special precautions.
"^DD",115,115.01,9,"DT")
2871010
"^DD",115,115.01,10,0)
OE/RR ISOLATION ORDER^P100^OR(100,^0;13^Q
"^DD",115,115.01,10,21,0)
^^2^2^2890919^
"^DD",115,115.01,10,21,1,0)
This field contains the OE/RR file order pointer corresponding
"^DD",115,115.01,10,21,2,0)
to the current Isolation/Precautions.
"^DD",115,115.01,10,"DT")
2890919
"^DD",115,115.01,11,0)
LAST LABEL WARD^P119.6'I^FH(119.6,^0;11^Q
"^DD",115,115.01,11,3)

"^DD",115,115.01,11,21,0)
^^4^4^2930121^^
"^DD",115,115.01,11,21,1,0)
This field contains the internal number of the ward (from File 42)
"^DD",115,115.01,11,21,2,0)
for which the last diet card label was prepared. Whenever a
"^DD",115,115.01,11,21,3,0)
label run is made, this field is compared with the current ward
"^DD",115,115.01,11,21,4,0)
and, if different, a new label is prepared.
"^DD",115,115.01,11,"DT")
2860702
"^DD",115,115.01,12,0)
LAST LABEL ROOM^FI^^0;12^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.01,12,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",115,115.01,12,21,0)
^^4^4^2880710^
"^DD",115,115.01,12,21,1,0)
This field contains the room-bed for which the last diet card
"^DD",115,115.01,12,21,2,0)
label was prepared. Whenever a label run is made, this field
"^DD",115,115.01,12,21,3,0)
is compared with the current room-bed and, if different, a new
"^DD",115,115.01,12,21,4,0)
label is prepared.
"^DD",115,115.01,12,"DT")
2850826
"^DD",115,115.01,13,0)
DIETETIC WARD^P119.6'^FH(119.6,^0;8^Q
"^DD",115,115.01,13,1,0)
^.1
"^DD",115,115.01,13,1,1,0)
115^AW^MUMPS
"^DD",115,115.01,13,1,1,1)
S ^FHPT("AW",X,DA(1))=DA
"^DD",115,115.01,13,1,1,2)
K ^FHPT("AW",X,DA(1))
"^DD",115,115.01,13,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.01,13,1,1,"%D",1,0)
This is a cross-reference of Dietetic Ward by Patient. The
"^DD",115,115.01,13,1,1,"%D",2,0)
cross-reference is set to the admission number.
"^DD",115,115.01,13,1,1,"DT")
2930408
"^DD",115,115.01,13,21,0)
^^2^2^2911204^
"^DD",115,115.01,13,21,1,0)
This field indicates the Dietetic Ward on which the patient is currently
"^DD",115,115.01,13,21,2,0)
residing.
"^DD",115,115.01,13,"DT")
2930408
"^DD",115,115.01,14,0)
ROOM-BED^P405.4'^DG(405.4,^0;9^Q
"^DD",115,115.01,14,21,0)
^^2^2^2911204^
"^DD",115,115.01,14,21,1,0)
This field contains the free-text room-bed in which the patient is
"^DD",115,115.01,14,21,2,0)
currently residing.
"^DD",115,115.01,14,"DT")
2911023
"^DD",115,115.01,18,0)
DISCHARGE DATE/TIME^D^^0;14^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,18,21,0)
^^3^3^2911223^^
"^DD",115,115.01,18,21,1,0)
This is the date/time a discharge was processed. It may differ from the
"^DD",115,115.01,18,21,2,0)
date/time selected by the MAS clerk. It is used if the discharge is
"^DD",115,115.01,18,21,3,0)
deleted.
"^DD",115,115.01,18,"DT")
2911129
"^DD",115,115.01,20,0)
SUPPLEMENTAL FEEDING^115.07^^SF;0
"^DD",115,115.01,20,12)
Cannot select bulk nourishments
"^DD",115,115.01,20,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.01,20,21,0)
^^2^2^2910708^^^^
"^DD",115,115.01,20,21,1,0)
This multiple contains the various supplemental feeding orders
"^DD",115,115.01,20,21,2,0)
which have been entered for the patient.
"^DD",115,115.01,20,"DT")
2850604
"^DD",115,115.01,30,0)
STANDING ORDERS^115.08^^SP;0
"^DD",115,115.01,30,12)
Cannot select bulk nourishments
"^DD",115,115.01,30,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.01,30,21,0)
^^2^2^2950317^^^^
"^DD",115,115.01,30,21,1,0)
This field contains standing orders entered for the patient
"^DD",115,115.01,30,21,2,0)
during this admission.
"^DD",115,115.01,40,0)
TUBEFEEDING^115.04D^^TF;0
"^DD",115,115.01,40,21,0)
^.001^2^2^3021030^^^^
"^DD",115,115.01,40,21,1,0)
This multiple contains all tubefeeding orders entered during
"^DD",115,115.01,40,21,2,0)
this admission.
"^DD",115,115.01,50,0)
EARLY/LATE TRAY^115.05D^^EL;0
"^DD",115,115.01,50,21,0)
^.001^2^2^3030204^^^^
"^DD",115,115.01,50,21,1,0)
This multiple contains all early/late tray requests ordered
"^DD",115,115.01,50,21,2,0)
for this patient.
"^DD",115,115.01,80,0)
CONSULTATION^115.03IDA^^DR;0
"^DD",115,115.01,80,21,0)
^^2^2^2880909^^^
"^DD",115,115.01,80,21,1,0)
This multiple contains all of the dietetic consults ordered
"^DD",115,115.01,80,21,2,0)
during this admission.
"^DD",115,115.01,85,0)
ADDITIONAL ORDERS^115.06A^^OO;0
"^DD",115,115.01,85,21,0)
^.001^1^1^3021030^^^^
"^DD",115,115.01,85,21,1,0)
This multiple contains all Additional Orders entered during this admission.
"^DD",115,115.01,85,21,2,0)
admission.
"^DD",115,115.01,90,0)
Monitors^115.11^^MO;0
"^DD",115,115.01,99,0)
DATE/TIME TICKET LAST PRINTED^D^^0;15^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,99,21,0)
^^5^5^2950420^^^^
"^DD",115,115.01,99,21,1,0)
This is the date/time of the last Tray Ticket generated for this
"^DD",115,115.01,99,21,2,0)
patient.  It is used, when the user only want to print the ticket
"^DD",115,115.01,99,21,3,0)
for the patient when there is a diet order, supplemental feeding,
"^DD",115,115.01,99,21,4,0)
food preference, isolation, standing order, or location change after
"^DD",115,115.01,99,21,5,0)
this date/time.
"^DD",115,115.01,99,"DT")
2940926
"^DD",115,115.01,100,0)
DATE/TIME CARD LAST PRINTED^D^^0;16^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,100,21,0)
^^5^5^2950420^^^^
"^DD",115,115.01,100,21,1,0)
This is the date/time of the last diet card generated for this
"^DD",115,115.01,100,21,2,0)
patient.  It is used, when the user only want to print the card
"^DD",115,115.01,100,21,3,0)
for the patient when there is a diet order, supplemental feeding,
"^DD",115,115.01,100,21,4,0)
food preference, isolation, standing order, or location change after
"^DD",115,115.01,100,21,5,0)
this date/time.
"^DD",115,115.01,100,"DT")
2940926
"^DD",115,115.011,0)
NUTRITION ASSESSMENT SUB-FIELD^^102^35
"^DD",115,115.011,0,"IX","B",115.011,.01)

"^DD",115,115.011,0,"NM","NUTRITION ASSESSMENT")

"^DD",115,115.011,0,"UP")
115
"^DD",115,115.011,.01,0)
NUTRITION ASSESSMENT^D^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.011,.01,1,0)
^.1
"^DD",115,115.011,.01,1,1,0)
115.011^B
"^DD",115,115.011,.01,1,1,1)
S ^FHPT(DA(1),"N","B",$E(X,1,30),DA)=""
"^DD",115,115.011,.01,1,1,2)
K ^FHPT(DA(1),"N","B",$E(X,1,30),DA)
"^DD",115,115.011,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.011,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NUTRITION ASSESSMENT field.
"^DD",115,115.011,.01,21,0)
^^2^2^2891107^^^
"^DD",115,115.011,.01,21,1,0)
This field contains the date the nutrition assessment was
"^DD",115,115.011,.01,21,2,0)
performed.
"^DD",115,115.011,.01,"DT")
2891107
"^DD",115,115.011,1,0)
SEX^RS^M:MALE;F:FEMALE;^0;2^Q
"^DD",115,115.011,1,21,0)
^^2^2^2891121^
"^DD",115,115.011,1,21,1,0)
This field contains a M or F corresponding to the sex of
"^DD",115,115.011,1,21,2,0)
the subject.
"^DD",115,115.011,1,"DT")
2890702
"^DD",115,115.011,2,0)
AGE^RNJ6,2^^0;3^K:+X'=X!(X>140)!(X<0)!(X?.E1"."3N.N) X
"^DD",115,115.011,2,3)
Type a Number between 0 and 140, 2 Decimal Digits
"^DD",115,115.011,2,21,0)
^^2^2^2891121^
"^DD",115,115.011,2,21,1,0)
This field contains the age, in years, of the subject at the
"^DD",115,115.011,2,21,2,0)
time of the assessment.
"^DD",115,115.011,2,"DT")
2890702
"^DD",115,115.011,3,0)
HEIGHT^NJ4,1^^0;4^K:+X'=X!(X>96)!(X<12)!(X?.E1"."2N.N) X
"^DD",115,115.011,3,3)
Type a Number between 12 and 96, 1 Decimal Digit
"^DD",115,115.011,3,21,0)
^^1^1^2920521^^^
"^DD",115,115.011,3,21,1,0)
This field contains the height, in inches, of the subject.
"^DD",115,115.011,3,"DT")
2890705
"^DD",115,115.011,4,0)
HEIGHT PARAMETERS^S^S:STATED;K:KNEE HEIGHT;^0;5^Q
"^DD",115,115.011,4,3)
Answer must be 1-2 characters in length.
"^DD",115,115.011,4,9)
@
"^DD",115,115.011,4,21,0)
^^2^2^2920520^^^
"^DD",115,115.011,4,21,1,0)
This field contains parameters relating to height; in particular,
"^DD",115,115.011,4,21,2,0)
an S would mean stated rather than measured.
"^DD",115,115.011,4,"DT")
2900411
"^DD",115,115.011,5,0)
WEIGHT^NJ3,0^^0;6^K:+X'=X!(X>750)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,5,3)
Type a Number between 0 and 750, 0 Decimal Digits
"^DD",115,115.011,5,21,0)
^^1^1^2900411^^
"^DD",115,115.011,5,21,1,0)
This field contains the weight, in pounds, of the subject.
"^DD",115,115.011,5,"DT")
2900411
"^DD",115,115.011,6,0)
WEIGHT PARAMETERS^S^A:ANTHROPOMETRIC;S:STATED;^0;7^Q
"^DD",115,115.011,6,3)
Answer must be 1 character in length.
"^DD",115,115.011,6,21,0)
^^2^2^2900411^^
"^DD",115,115.011,6,21,1,0)
This field contains parameters relating to weight; in particular,
"^DD",115,115.011,6,21,2,0)
an S would mean stated rather than measured.
"^DD",115,115.011,6,"DT")
2900411
"^DD",115,115.011,7,0)
DATE WEIGHT TAKEN^D^^0;8^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.011,7,21,0)
^^1^1^2891121^
"^DD",115,115.011,7,21,1,0)
This is the date the weight was determined.
"^DD",115,115.011,7,"DT")
2890705
"^DD",115,115.011,8,0)
USUAL WEIGHT^NJ3,0^^0;9^K:+X'=X!(X>750)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,8,3)
Type a Number between 0 and 750, 0 Decimal Digits
"^DD",115,115.011,8,21,0)
^^1^1^2900411^^
"^DD",115,115.011,8,21,1,0)
This is the usual weight, in pounds, of the subject.
"^DD",115,115.011,8,"DT")
2900411
"^DD",115,115.011,9,0)
IDEAL BODY WEIGHT^NJ3,0^^0;10^K:+X'=X!(X>750)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,9,3)
Type a Number between 0 and 750, 0 Decimal Digits
"^DD",115,115.011,9,21,0)
^^1^1^2900411^^
"^DD",115,115.011,9,21,1,0)
This is the ideal body weight, in pounds, of the subject.
"^DD",115,115.011,9,"DT")
2900411
"^DD",115,115.011,10,0)
FRAME SIZE^S^S:SMALL;M:MEDIUM;L:LARGE;^0;11^Q
"^DD",115,115.011,10,21,0)
^^2^2^2891121^
"^DD",115,115.011,10,21,1,0)
This is the frame size of the individual, expressed as Small,
"^DD",115,115.011,10,21,2,0)
Medium or Large.
"^DD",115,115.011,10,"DT")
2890705
"^DD",115,115.011,11,0)
AMPUTATION %^NJ4,1^^0;12^K:+X'=X!(X>50)!(X<0)!(X?.E1"."2N.N) X
"^DD",115,115.011,11,3)
Type a Number between 0 and 50, 1 Decimal Digit
"^DD",115,115.011,11,21,0)
^^2^2^2891121^
"^DD",115,115.011,11,21,1,0)
This is the percentage of total body weight missing due to
"^DD",115,115.011,11,21,2,0)
amputations.
"^DD",115,115.011,11,"DT")
2890705
"^DD",115,115.011,15,0)
KCAL REQUIRED^NJ5,0^^0;16^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,15,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.011,15,21,0)
^^2^2^2891121^
"^DD",115,115.011,15,21,1,0)
This is the total energy needs of the patient expressed in
"^DD",115,115.011,15,21,2,0)
calories.
"^DD",115,115.011,15,"DT")
2890705
"^DD",115,115.011,16,0)
PROTEIN (GM) REQUIRED^NJ3,0^^0;17^K:+X'=X!(X>400)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,16,3)
Type a Number between 0 and 400, 0 Decimal Digits
"^DD",115,115.011,16,21,0)
^^1^1^2891121^
"^DD",115,115.011,16,21,1,0)
This is the protein requirements of the person.
"^DD",115,115.011,16,"DT")
2890705
"^DD",115,115.011,17,0)
FLUID (ML/DAY) REQUIRED^NJ5,0^^0;18^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,17,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.011,17,21,0)
^^1^1^2891121^^
"^DD",115,115.011,17,21,1,0)
This is the fluid requirements, in ml/day, of the person.
"^DD",115,115.011,17,"DT")
2890705
"^DD",115,115.011,18,0)
RISK CATEGORY^P115.4'^FH(115.4,^0;19^Q
"^DD",115,115.011,18,21,0)
^^2^2^2891121^
"^DD",115,115.011,18,21,1,0)
This is a pointer to the Nutrition Status file (115.4) indicating
"^DD",115,115.011,18,21,2,0)
the current status of the patient for this assessment.
"^DD",115,115.011,18,"DT")
2890705
"^DD",115,115.011,19,0)
NUTRITION PROBLEM^P115.3'^FH(115.3,^0;20^Q
"^DD",115,115.011,19,21,0)
^^3^3^2891121^
"^DD",115,115.011,19,21,1,0)
This is a pointer to the Nutrition Classification file (115.3)
"^DD",115,115.011,19,21,2,0)
indicating the current classification of the patient for
"^DD",115,115.011,19,21,3,0)
this assessment.
"^DD",115,115.011,19,"DT")
2890705
"^DD",115,115.011,20,0)
APPEARANCE^F^^2;1^K:$L(X)>60!($L(X)<1) X
"^DD",115,115.011,20,3)
Answer must be 1-60 characters in length.
"^DD",115,115.011,20,21,0)
^^3^3^2900411^^
"^DD",115,115.011,20,21,1,0)
This field is used to store the a free-text description of the
"^DD",115,115.011,20,21,2,0)
appearance of the patient when such notation may be of importance
"^DD",115,115.011,20,21,3,0)
in understanding or treating the patient.
"^DD",115,115.011,20,"DT")
2900411
"^DD",115,115.011,21,0)
BODY MASS INDEX^NJ4,1^^0;21^K:+X'=X!(X>50)!(X<10)!(X?.E1"."2N.N) X
"^DD",115,115.011,21,3)
Type a Number between 10 and 50, 1 Decimal Digit
"^DD",115,115.011,21,21,0)
^^2^2^2900404^
"^DD",115,115.011,21,21,1,0)
This field contains the Body Mass Index calculated from the
"^DD",115,115.011,21,21,2,0)
height and weight.
"^DD",115,115.011,21,"DT")
2900404
"^DD",115,115.011,22,0)
BODY MASS INDEX %^NJ2,0^^0;22^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,22,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,22,21,0)
^^2^2^2910506^^
"^DD",115,115.011,22,21,1,0)
This field contains the percentile rank of the Body Mass Index
"^DD",115,115.011,22,21,2,0)
value.
"^DD",115,115.011,22,"DT")
2900404
"^DD",115,115.011,23,0)
NITROGEN BALANCE^NJ2,0^^0;25^K:+X'=X!(X>99)!(X<-99)!(X?.E1"."1N.N) X
"^DD",115,115.011,23,3)
Type a Number between -99 and 99, 0 Decimal Digits
"^DD",115,115.011,23,21,0)
^^2^2^2900625^
"^DD",115,115.011,23,21,1,0)
This field contains the value of the Nitrogen Balance calculated
"^DD",115,115.011,23,21,2,0)
during the assessment.
"^DD",115,115.011,23,"DT")
2900622
"^DD",115,115.011,40,0)
TRICEPS SKIN FOLD (MM)^NJ3,0^^1;1^K:+X'=X!(X>100)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,40,3)
Type a Number between 1 and 100, 0 Decimal Digits
"^DD",115,115.011,40,21,0)
^^1^1^2900411^^^
"^DD",115,115.011,40,21,1,0)
This is the triceps skin fold measurement in mm.
"^DD",115,115.011,40,"DT")
2900411
"^DD",115,115.011,41,0)
TRICEPS %^NJ2,0^^1;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,41,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,41,21,0)
^^1^1^2900411^^^
"^DD",115,115.011,41,21,1,0)
This is the percentile rank of the triceps skin fold measurement.
"^DD",115,115.011,41,"DT")
2900411
"^DD",115,115.011,42,0)
SUBSCAPULAR SKINFOLD (MM)^NJ3,0^^1;3^K:+X'=X!(X>100)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,42,3)
Type a Number between 1 and 100, 0 Decimal Digits
"^DD",115,115.011,42,21,0)
1^^1^1^2900411^
"^DD",115,115.011,42,21,1,0)
This is the subscapular skin fold measurement in mm.
"^DD",115,115.011,42,"DT")
2900411
"^DD",115,115.011,43,0)
SUBSCAPULAR %^NJ2,0^^1;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,43,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,43,21,0)
^^1^1^2900411^^
"^DD",115,115.011,43,21,1,0)
This is the percentile rank of the subscapular skin fold measurement.
"^DD",115,115.011,43,"DT")
2900411
"^DD",115,115.011,44,0)
ARM CIRCUMFERENCE (CM)^NJ5,1^^1;5^K:+X'=X!(X>100)!(X<5)!(X?.E1"."2N.N) X
"^DD",115,115.011,44,3)
Type a Number between 5 and 100, 1 Decimal Digit
"^DD",115,115.011,44,21,0)
^^1^1^2891121^
"^DD",115,115.011,44,21,1,0)
This is the arm circumference in cm.
"^DD",115,115.011,44,"DT")
2891107
"^DD",115,115.011,45,0)
ARM CIRCUMFERENCE %^NJ2,0^^1;6^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,45,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,45,21,0)
^^1^1^2900411^^
"^DD",115,115.011,45,21,1,0)
This is the percentile rank of the arm circumference.
"^DD",115,115.011,45,"DT")
2900411
"^DD",115,115.011,46,0)
CALF CIRCUMFERENCE (CM)^NJ5,1^^1;7^K:+X'=X!(X>250)!(X<10)!(X?.E1"."2N.N) X
"^DD",115,115.011,46,3)
Type a Number between 10 and 250, 1 Decimal Digit
"^DD",115,115.011,46,21,0)
^^1^1^2891121^
"^DD",115,115.011,46,21,1,0)
This is the calf circumference in cm.
"^DD",115,115.011,46,"DT")
2891107
"^DD",115,115.011,47,0)
CALF CIRCUMFERENCE %^NJ2,0^^1;8^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,47,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,47,21,0)
^^1^1^2900411^^
"^DD",115,115.011,47,21,1,0)
This is the percentile rank of the calf circumference.
"^DD",115,115.011,47,"DT")
2900411
"^DD",115,115.011,48,0)
BONE-FREE AMA  (CM2)^NJ5,1^^1;9^K:+X'=X!(X>100)!(X<5)!(X?.E1"."2N.N) X
"^DD",115,115.011,48,3)
Type a Number between 5 and 100, 1 Decimal Digit
"^DD",115,115.011,48,21,0)
^^1^1^2900411^^
"^DD",115,115.011,48,21,1,0)
This is the calculated bone-free arm muscle area in sq. cm.
"^DD",115,115.011,48,"DT")
2900411
"^DD",115,115.011,49,0)
BONE-FREE AMA %^NJ2,0^^1;10^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,49,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,49,21,0)
^^1^1^2900411^^
"^DD",115,115.011,49,21,1,0)
This is the percentile rank of the bone-free AMA.
"^DD",115,115.011,49,"DT")
2900411
"^DD",115,115.011,70,0)
LAB DATA^115.021^^L;0
"^DD",115,115.011,70,21,0)
^^2^2^2891121^
"^DD",115,115.011,70,21,1,0)
This multiple contains laboratory data available for the
"^DD",115,115.011,70,21,2,0)
nutrition assessment.
"^DD",115,115.011,71,0)
COMMENTS^115.1171^^X;0
"^DD",115,115.011,71,21,0)
^^1^1^2891121^
"^DD",115,115.011,71,21,1,0)
This multiple contains comments relating to the assessment.
"^DD",115,115.011,101,0)
ENTERING CLINICIAN^RP200'^VA(200,^0;23^Q
"^DD",115,115.011,101,21,0)
^^2^2^2891121^
"^DD",115,115.011,101,21,1,0)
This field points to the person entering the nutrition
"^DD",115,115.011,101,21,2,0)
assessment.
"^DD",115,115.011,101,"DT")
2891108
"^DD",115,115.011,102,0)
DATE/TIME ENTERED^RD^^0;24^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.011,102,21,0)
^^2^2^2891121^
"^DD",115,115.011,102,21,1,0)
This field contains the date/time the assessment was actually
"^DD",115,115.011,102,21,2,0)
entered.
"^DD",115,115.011,102,"DT")
2891108
"^DD",115,115.012,0)
NUTRITION STATUS SUB-FIELD^^5^6
"^DD",115,115.012,0,"DT")
3031014
"^DD",115,115.012,0,"IX","B",115.012,.01)

"^DD",115,115.012,0,"NM","NUTRITION STATUS")

"^DD",115,115.012,0,"UP")
115
"^DD",115,115.012,.01,0)
STATUS DATE/TIME^DX^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X I $D(X) S DINUM=9999999-X
"^DD",115,115.012,.01,1,0)
^.1
"^DD",115,115.012,.01,1,1,0)
115.012^B
"^DD",115,115.012,.01,1,1,1)
S ^FHPT(DA(1),"S","B",$E(X,1,30),DA)=""
"^DD",115,115.012,.01,1,1,2)
K ^FHPT(DA(1),"S","B",$E(X,1,30),DA)
"^DD",115,115.012,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.012,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the STATUS DATE/TIME field.
"^DD",115,115.012,.01,21,0)
^^2^2^2891113^
"^DD",115,115.012,.01,21,1,0)
This field contains the date/time that a nutrition status
"^DD",115,115.012,.01,21,2,0)
assessment was entered.
"^DD",115,115.012,.01,"DT")
2891113
"^DD",115,115.012,1,0)
STATUS^RP115.4'^FH(115.4,^0;2^Q
"^DD",115,115.012,1,21,0)
^^2^2^2891121^^
"^DD",115,115.012,1,21,1,0)
This is a pointer to the Nutrition Status file (115.4) indicating
"^DD",115,115.012,1,21,2,0)
the current status of this patient.
"^DD",115,115.012,1,"DT")
2891113
"^DD",115,115.012,2,0)
ENTRY CLERK^RP200'^VA(200,^0;3^Q
"^DD",115,115.012,2,21,0)
^^2^2^2891121^^
"^DD",115,115.012,2,21,1,0)
This is a pointer indicating the person actually making the entry
"^DD",115,115.012,2,21,2,0)
of the status.
"^DD",115,115.012,2,"DT")
2891113
"^DD",115,115.012,3,0)
LAST REVIEW DATE/TIME^D^^0;4^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.012,3,21,0)
^^2^2^2911204^
"^DD",115,115.012,3,21,1,0)
This is the date/time that this Nutrition Status was last reviewed.
"^DD",115,115.012,3,21,2,0)
Further reviews are based upon this last review date/time.
"^DD",115,115.012,3,"DT")
2910430
"^DD",115,115.012,4,0)
REVIEW CLERK^P200'^VA(200,^0;5^Q
"^DD",115,115.012,4,21,0)
^^1^1^2911204^
"^DD",115,115.012,4,21,1,0)
This is a pointer to File 200 of the person entering the review.
"^DD",115,115.012,4,"DT")
2910430
"^DD",115,115.012,5,0)
DIETETIC WARD^P119.6'^FH(119.6,^0;6^Q
"^DD",115,115.012,5,21,0)
^^2^2^2921107^
"^DD",115,115.012,5,21,1,0)
This field is a pointer to the Dietetic Ward on which the patient
"^DD",115,115.012,5,21,2,0)
resided when the Nutrition Status was entered.
"^DD",115,115.012,5,"DT")
2920826
"^DD",115,115.016,0)
RECURRING MEALS SUB-FIELD^^25^33
"^DD",115,115.016,0,"DT")
3041206
"^DD",115,115.016,0,"IX","B",115.016,.01)

"^DD",115,115.016,0,"IX","C",115.016,5)

"^DD",115,115.016,0,"NM","RECURRING MEALS")

"^DD",115,115.016,0,"UP")
115
"^DD",115,115.016,.01,0)
RECURRING MEAL DATE/TIME^MDX^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,.01,1,0)
^.1
"^DD",115,115.016,.01,1,1,0)
115.016^B
"^DD",115,115.016,.01,1,1,1)
S ^FHPT(DA(1),"OP","B",$E(X,1,30),DA)=""
"^DD",115,115.016,.01,1,1,2)
K ^FHPT(DA(1),"OP","B",$E(X,1,30),DA)
"^DD",115,115.016,.01,1,2,0)
115^OP^MUMPS
"^DD",115,115.016,.01,1,2,1)
S ^FHPT("OP",DA(1),DA)=""
"^DD",115,115.016,.01,1,2,2)
K ^FHPT("OP",DA(1),DA)
"^DD",115,115.016,.01,1,2,"DT")
3030228
"^DD",115,115.016,.01,1,3,0)
115^RM
"^DD",115,115.016,.01,1,3,1)
S ^FHPT("RM",$E(X,1,30),DA(1),DA)=""
"^DD",115,115.016,.01,1,3,2)
K ^FHPT("RM",$E(X,1,30),DA(1),DA)
"^DD",115,115.016,.01,1,3,"%D",0)
^.101^1^1^3041215^^
"^DD",115,115.016,.01,1,3,"%D",1,0)
Cross reference the whole file by recurring meals date.
"^DD",115,115.016,.01,1,3,"DT")
3030702
"^DD",115,115.016,.01,21,0)
^.001^1^1^3040429^^^^
"^DD",115,115.016,.01,21,1,0)
This field will contain the date of the recurring meal.
"^DD",115,115.016,.01,"DT")
3040429
"^DD",115,115.016,.05,0)
RECURRING OE/RR ORDER^P100'^OR(100,^0;12^Q
"^DD",115,115.016,.05,21,0)
^^2^2^3031202^
"^DD",115,115.016,.05,21,1,0)
This field contains a pointer to the OE/RR file order corresponding to this
"^DD",115,115.016,.05,21,2,0)
order.
"^DD",115,115.016,.05,"DT")
3031202
"^DD",115,115.016,1,0)
DIET^P111'X^FH(111,^0;2^Q
"^DD",115,115.016,1,21,0)
^.001^3^3^3030403^^^^
"^DD",115,115.016,1,21,1,0)
This is the DIET ordered for this meal plan.  It contains a pointer to the
"^DD",115,115.016,1,21,2,0)
DIETS (#111) file.  It may contain any one of the 5 diets selected in the
"^DD",115,115.016,1,21,3,0)
Recurring Meals Diet Selection (1-5) site parameter.
"^DD",115,115.016,1,"DT")
3030224
"^DD",115,115.016,2,0)
OUTPATIENT LOCATION^P119.6'^FH(119.6,^0;3^Q
"^DD",115,115.016,2,1,0)
^.1
"^DD",115,115.016,2,1,1,0)
115^C
"^DD",115,115.016,2,1,1,1)
S ^FHPT("C",$E(X,1,30),DA(1),DA)=""
"^DD",115,115.016,2,1,1,2)
K ^FHPT("C",$E(X,1,30),DA(1),DA)
"^DD",115,115.016,2,1,1,"DT")
3030327
"^DD",115,115.016,2,21,0)
^.001^1^1^3030225^^^
"^DD",115,115.016,2,21,1,0)
Pointer to file #119.6 to store the location for this meal.
"^DD",115,115.016,2,"DT")
3030327
"^DD",115,115.016,3,0)
MEAL^S^B:Breakfast;N:Noon;E:Evening;^0;4^Q
"^DD",115,115.016,3,21,0)
^.001^1^1^3030527^^^^
"^DD",115,115.016,3,21,1,0)
This field indicated which meal(s) the recurring meal is ordered for.
"^DD",115,115.016,3,"DT")
3030527
"^DD",115,115.016,4,0)
BAGGED MEAL^S^Y:Yes;N:No;^0;5^Q
"^DD",115,115.016,4,21,0)
^^1^1^3030213^
"^DD",115,115.016,4,21,1,0)
This field indicates whether or not a bagged meal is desired.
"^DD",115,115.016,4,"DT")
3030213
"^DD",115,115.016,5,0)
MEAL PLAN ORDER NUMBER^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.016,5,1,0)
^.1
"^DD",115,115.016,5,1,1,0)
115.016^C
"^DD",115,115.016,5,1,1,1)
S ^FHPT(DA(1),"OP","C",$E(X,1,30),DA)=""
"^DD",115,115.016,5,1,1,2)
K ^FHPT(DA(1),"OP","C",$E(X,1,30),DA)
"^DD",115,115.016,5,1,1,"%D",0)
^^2^2^3030325^
"^DD",115,115.016,5,1,1,"%D",1,0)
This cross-reference will group together the meal plan dates for each
"^DD",115,115.016,5,1,1,"%D",2,0)
meal plan order if the patient has more than one meal plan.
"^DD",115,115.016,5,1,1,"DT")
3030325
"^DD",115,115.016,5,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",115,115.016,5,21,0)
^.001^2^2^3030416^^
"^DD",115,115.016,5,21,1,0)
This field will be used to tie a meal plan together and distinguish it from
"^DD",115,115.016,5,21,2,0)
other meal plans the person may have.
"^DD",115,115.016,5,"DT")
3030416
"^DD",115,115.016,6,0)
DIET1^P111'^FH(111,^0;7^Q
"^DD",115,115.016,6,21,0)
^.001^2^2^3030324^^
"^DD",115,115.016,6,21,1,0)
This field will store the first of the diet selections for outpatients
"^DD",115,115.016,6,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,6,"DT")
3030324
"^DD",115,115.016,7,0)
DIET2^P111'^FH(111,^0;8^Q
"^DD",115,115.016,7,21,0)
^^2^2^3030220^
"^DD",115,115.016,7,21,1,0)
This field will store the second of the diet selections for outpatients
"^DD",115,115.016,7,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,7,"DT")
3030324
"^DD",115,115.016,8,0)
DIET3^P111'^FH(111,^0;9^Q
"^DD",115,115.016,8,21,0)
^^2^2^3030220^
"^DD",115,115.016,8,21,1,0)
This field will store the third of the diet selections for outpatients
"^DD",115,115.016,8,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,8,"DT")
3030324
"^DD",115,115.016,9,0)
DIET4^P111'^FH(111,^0;10^Q
"^DD",115,115.016,9,21,0)
^^2^2^3030220^
"^DD",115,115.016,9,21,1,0)
This field will store the fourth of the diet selections for outpatients
"^DD",115,115.016,9,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,9,"DT")
3030324
"^DD",115,115.016,10,0)
DIET5^P111'^FH(111,^0;11^Q
"^DD",115,115.016,10,21,0)
^^2^2^3030220^
"^DD",115,115.016,10,21,1,0)
This field will store the fifth of the diet selections for outpatients
"^DD",115,115.016,10,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,10,"DT")
3030324
"^DD",115,115.016,11,0)
ADDITIONAL ORDERS TEXT^F^^1;1^K:$L(X)>160!($L(X)<1) X
"^DD",115,115.016,11,3)
Answer must be 1-160 characters in length.
"^DD",115,115.016,11,21,0)
^^1^1^3030520^
"^DD",115,115.016,11,21,1,0)
This field stores the text of the additional order.
"^DD",115,115.016,11,"DT")
3030520
"^DD",115,115.016,12,0)
ADDITIONAL ORDERS CLERK^P200'^VA(200,^1;2^Q
"^DD",115,115.016,12,21,0)
^^1^1^3030520^
"^DD",115,115.016,12,21,1,0)
This field stores the clerk who entered the additional order.
"^DD",115,115.016,12,"DT")
3030520
"^DD",115,115.016,13,0)
ADDITIONAL ORDERS DATE/TIME^D^^1;3^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,13,21,0)
^^1^1^3030520^
"^DD",115,115.016,13,21,1,0)
This field stores the date/time the additional order was entered.
"^DD",115,115.016,13,"DT")
3030520
"^DD",115,115.016,13.5,0)
ADDITIONAL ORDERS OE/RR ORDER^P100'^OR(100,^1;4^Q
"^DD",115,115.016,13.5,21,0)
^^2^2^3031202^
"^DD",115,115.016,13.5,21,1,0)
This field contains a pointer to the OE/RR file order corresponding to this
"^DD",115,115.016,13.5,21,2,0)
order.
"^DD",115,115.016,13.5,"DT")
3031202
"^DD",115,115.016,13.6,0)
ADDITIONAL ORDERS STATUS^S^C:Cancelled;O:Ordered;^1;5^Q
"^DD",115,115.016,13.6,21,0)
^.001^2^2^3040429^^
"^DD",115,115.016,13.6,21,1,0)
Additional orders which are cancelled will be flagged by setting this
"^DD",115,115.016,13.6,21,2,0)
field to C rather than deleting entries from the file.
"^DD",115,115.016,13.6,"DT")
3040429
"^DD",115,115.016,14,0)
EARLY/LATE TRAY TIME^F^^2;1^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.016,14,3)
Answer must be 1-10 characters in length.
"^DD",115,115.016,14,21,0)
^^1^1^3030522^
"^DD",115,115.016,14,21,1,0)
This field will store the time for the early/late tray.
"^DD",115,115.016,14,"DT")
3030522
"^DD",115,115.016,15,0)
EARLY/LATE TRAY BAGGED MEAL^S^N:NO;Y:YES;^2;2^Q
"^DD",115,115.016,15,21,0)
^^1^1^3030522^
"^DD",115,115.016,15,21,1,0)
This field will store whether or not the early/late tray is a bagged meal.
"^DD",115,115.016,15,"DT")
3030522
"^DD",115,115.016,16,0)
EARLY/LATE TRAY CLERK^P200'^VA(200,^2;3^Q
"^DD",115,115.016,16,21,0)
^^1^1^3030522^
"^DD",115,115.016,16,21,1,0)
This field will store the person who entered the early/late tray.
"^DD",115,115.016,16,"DT")
3030522
"^DD",115,115.016,17,0)
EARLY/LATE TRAY ENTRY DATE^D^^2;4^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,17,21,0)
^^1^1^3030522^
"^DD",115,115.016,17,21,1,0)
This field will store the date/time the early/late tray was entered.
"^DD",115,115.016,17,"DT")
3030522
"^DD",115,115.016,17.5,0)
EARLY/LATE TRAY OE/RR ORDER^P100'^OR(100,^2;5^Q
"^DD",115,115.016,17.5,21,0)
^^2^2^3031202^
"^DD",115,115.016,17.5,21,1,0)
This field contains a pointer to the OE/RR file order corresponding to this
"^DD",115,115.016,17.5,21,2,0)
order.
"^DD",115,115.016,17.5,"DT")
3031202
"^DD",115,115.016,17.6,0)
EARLY/LATE TRAY STATUS^S^C:Cancelled;O:Ordered;^2;6^Q
"^DD",115,115.016,17.6,21,0)
^^2^2^3040429^
"^DD",115,115.016,17.6,21,1,0)
Early/Late trays which are cancelled will be flagged by setting this
"^DD",115,115.016,17.6,21,2,0)
field to C rather than deleting entries from the file.
"^DD",115,115.016,17.6,"DT")
3040429
"^DD",115,115.016,18,0)
TUBEFEEDING COMMENT^F^^3;1^K:$L(X)>160!($L(X)<1) X
"^DD",115,115.016,18,3)
Answer must be 1-160 characters in length.
"^DD",115,115.016,18,21,0)
^^1^1^3030606^
"^DD",115,115.016,18,21,1,0)
This field stores the tubefeeding comment(s) for the recurring meal.
"^DD",115,115.016,18,"DT")
3030606
"^DD",115,115.016,19,0)
TUBEFEEDING PRODUCT^115.1619P^^TF;0
"^DD",115,115.016,19,21,0)
^.001^1^1^3030606^^
"^DD",115,115.016,19,21,1,0)
This multiple stores the tubefeeding product data for the recurring meal.
"^DD",115,115.016,20,0)
TUBEFEEDING TOTAL CC'S^NJ4,0^^3;2^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.016,20,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.016,20,21,0)
^^1^1^3030606^
"^DD",115,115.016,20,21,1,0)
This field stores the total cc's of the tubefeeding for the recurring meal.
"^DD",115,115.016,20,"DT")
3030606
"^DD",115,115.016,21,0)
TUBEFEEDING TOTAL KCALS/DAY^NJ4,0^^3;3^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.016,21,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.016,21,21,0)
^^1^1^3030606^
"^DD",115,115.016,21,21,1,0)
This field stores the total kcals/day of the tubefeeding for the recurring meal.
"^DD",115,115.016,21,"DT")
3030606
"^DD",115,115.016,21.5,0)
TUBEFEEDING OE/RR ORDER^P100'^OR(100,^3;4^Q
"^DD",115,115.016,21.5,21,0)
^^2^2^3031202^
"^DD",115,115.016,21.5,21,1,0)
This field contains a pointer to the OE/RR file order corresponding to this
"^DD",115,115.016,21.5,21,2,0)
order.
"^DD",115,115.016,21.5,"DT")
3031202
"^DD",115,115.016,21.6,0)
TUBEFEEDING STATUS^S^C:Cancelled;O:Ordered;^3;5^Q
"^DD",115,115.016,21.6,21,0)
^^2^2^3040429^
"^DD",115,115.016,21.6,21,1,0)
Tubefeedings which are cancelled will be flagged by setting this
"^DD",115,115.016,21.6,21,2,0)
field to C rather than deleting entries from the file.
"^DD",115,115.016,21.6,"DT")
3040429
"^DD",115,115.016,22,0)
DATE/TIME TICKET LAST PRINTED^D^^0;13^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,22,21,0)
^^2^2^3040224^
"^DD",115,115.016,22,21,1,0)
Stores the last date and time a tray ticket was printed for this
"^DD",115,115.016,22,21,2,0)
outpatient meal.
"^DD",115,115.016,22,"DT")
3040224
"^DD",115,115.016,23,0)
DATE/TIME CARD LAST PRINTED^D^^0;14^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,23,21,0)
^^2^2^3040224^
"^DD",115,115.016,23,21,1,0)
Stores the last date and time a diet card was printed for this
"^DD",115,115.016,23,21,2,0)
outpatient meal.
"^DD",115,115.016,23,"DT")
3040224
"^DD",115,115.016,24,0)
STATUS^S^C:Cancelled;O:Ordered;^0;15^Q
"^DD",115,115.016,24,21,0)
^^2^2^3040429^
"^DD",115,115.016,24,21,1,0)
Recurring meals which are cancelled will be flagged by setting this
"^DD",115,115.016,24,21,2,0)
field to C rather than deleting entries from the file.
"^DD",115,115.016,24,"DT")
3040429
"^DD",115,115.016,25,0)
DATE/TIME RM LAST EDITED^D^^0;16^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,25,21,0)
^^2^2^3041206^
"^DD",115,115.016,25,21,1,0)
This field stores the last date/time the recurring meal was edited for
"^DD",115,115.016,25,21,2,0)
use with printing the tray tickets.
"^DD",115,115.016,25,"DT")
3041206
"^DD",115,115.017,0)
SPECIAL MEALS SUB-FIELD^^10^15
"^DD",115,115.017,0,"DT")
3040608
"^DD",115,115.017,0,"IX","B",115.017,.01)

"^DD",115,115.017,0,"NM","SPECIAL MEALS")

"^DD",115,115.017,0,"UP")
115
"^DD",115,115.017,.01,0)
SPECIAL MEAL DATE/TIME^MDX^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X I D(X) S DINUM=X
"^DD",115,115.017,.01,1,0)
^.1
"^DD",115,115.017,.01,1,1,0)
115.017^B
"^DD",115,115.017,.01,1,1,1)
S ^FHPT(DA(1),"SM","B",$E(X,1,30),DA)=""
"^DD",115,115.017,.01,1,1,2)
K ^FHPT(DA(1),"SM","B",$E(X,1,30),DA)
"^DD",115,115.017,.01,1,2,0)
115^SM
"^DD",115,115.017,.01,1,2,1)
S ^FHPT("SM",$E(X,1,30),DA(1),DA)=""
"^DD",115,115.017,.01,1,2,2)
K ^FHPT("SM",$E(X,1,30),DA(1),DA)
"^DD",115,115.017,.01,1,2,"%D",0)
^.101^1^1^3030630^^
"^DD",115,115.017,.01,1,2,"%D",1,0)
Cross reference the whole file by special meals.
"^DD",115,115.017,.01,1,2,"DT")
3030421
"^DD",115,115.017,.01,3)

"^DD",115,115.017,.01,21,0)
^.001^1^1^3030429^^^^
"^DD",115,115.017,.01,21,1,0)
This field will contain the date/time of the special meal.
"^DD",115,115.017,.01,"DT")
3030514
"^DD",115,115.017,1,0)
STATUS^S^P:PENDING;C:CANCELLED;A:AUTHORIZED;D:DENIED;^0;2^Q
"^DD",115,115.017,1,1,0)
^.1^^0
"^DD",115,115.017,1,3)

"^DD",115,115.017,1,21,0)
^.001^2^2^3030417^^^^
"^DD",115,115.017,1,21,1,0)
This field will store the status of the special meal request.
"^DD",115,115.017,1,21,2,0)
The allowable statuses are PENDING, CANCELLED, AUTHORIZED or DENIED.
"^DD",115,115.017,1,"DT")
3030429
"^DD",115,115.017,2,0)
LOCATION^P119.6'^FH(119.6,^0;3^Q
"^DD",115,115.017,2,1,0)
^.1^^0
"^DD",115,115.017,2,3)

"^DD",115,115.017,2,21,0)
^.001^2^2^3030408^^^^
"^DD",115,115.017,2,21,1,0)
This field will store the location for a patient who has requested
"^DD",115,115.017,2,21,2,0)
a special "one-time" meal.
"^DD",115,115.017,2,"DT")
3030429
"^DD",115,115.017,3,0)
DIET^P111'^FH(111,^0;4^Q
"^DD",115,115.017,3,21,0)
^^2^2^3030408^
"^DD",115,115.017,3,21,1,0)
This field will store the diet entered for a patient who has requested
"^DD",115,115.017,3,21,2,0)
a special "one-time" meal.
"^DD",115,115.017,3,"DT")
3030429
"^DD",115,115.017,3.5,0)
MEAL^S^B:Breakfast;N:Noon;E:Evening;^0;9^Q
"^DD",115,115.017,3.5,21,0)
^^1^1^3030827^
"^DD",115,115.017,3.5,21,1,0)
This field will store the meal (breakfast/noon/evening) for the special meal.
"^DD",115,115.017,3.5,"DT")
3030827
"^DD",115,115.017,4,0)
REQUESTOR^P200'^VA(200,^0;5^Q
"^DD",115,115.017,4,3)

"^DD",115,115.017,4,21,0)
^.001^2^2^3030417^^^
"^DD",115,115.017,4,21,1,0)
This field will store the name of the person who has requested the
"^DD",115,115.017,4,21,2,0)
special meal.  This field is a pointer to the NEW PERSON (#200) file.
"^DD",115,115.017,4,"DT")
3030429
"^DD",115,115.017,5,0)
AUTHORIZOR^P200'^VA(200,^0;6^Q
"^DD",115,115.017,5,21,0)
^.001^2^2^3030417^^^
"^DD",115,115.017,5,21,1,0)
This field will store the name of the person who has authorized the
"^DD",115,115.017,5,21,2,0)
special meal.  This field is a pointer to the NEW PERSON (#200) file.
"^DD",115,115.017,5,"DT")
3030429
"^DD",115,115.017,6,0)
AUTHORIZE/DENY DATE/TIME^D^^0;7^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.017,6,21,0)
^.001^1^1^3030429^^
"^DD",115,115.017,6,21,1,0)
This field stores the date/time that the special meal was authorized or denied.
"^DD",115,115.017,6,"DT")
3030429
"^DD",115,115.017,7,0)
COMMENT^F^^0;8^K:$L(X)>80!($L(X)<1) X
"^DD",115,115.017,7,3)
Answer must be 1-80 characters in length.
"^DD",115,115.017,7,21,0)
^^2^2^3030508^
"^DD",115,115.017,7,21,1,0)
If the special meal request is denied the authorizor may enter the reason
"^DD",115,115.017,7,21,2,0)
why it was denied in this comment field.
"^DD",115,115.017,7,"DT")
3030508
"^DD",115,115.017,8,0)
EARLY/LATE TRAY TIME^F^^1;1^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.017,8,3)
Answer must be 1-10 characters in length.
"^DD",115,115.017,8,21,0)
^^1^1^3030915^
"^DD",115,115.017,8,21,1,0)
This field will store the time for the early/late tray.
"^DD",115,115.017,8,"DT")
3030915
"^DD",115,115.017,9,0)
EARLY/LATE TRAY BAGGED MEAL^S^Y:YES;N:NO;^1;2^Q
"^DD",115,115.017,9,21,0)
^^1^1^3030915^
"^DD",115,115.017,9,21,1,0)
This field will store whether or not the early/late tray is a bagged meal.
"^DD",115,115.017,9,"DT")
3030915
"^DD",115,115.017,10,0)
EARLY/LATE TRAY CLERK^P200'^VA(200,^1;3^Q
"^DD",115,115.017,10,21,0)
^^1^1^3030915^
"^DD",115,115.017,10,21,1,0)
This field will store the person who entered the early/late tray.
"^DD",115,115.017,10,"DT")
3030915
"^DD",115,115.017,12,0)
DATE/TIME TICKET LAST PRINTED^D^^0;10^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.017,12,21,0)
^^2^2^3040224^
"^DD",115,115.017,12,21,1,0)
Stores the last date and time a tray ticket was printed for this
"^DD",115,115.017,12,21,2,0)
outpatient meal.
"^DD",115,115.017,12,"DT")
3040224
"^DD",115,115.017,13,0)
DATE/TIME CARD LAST PRINTED^D^^0;11^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.017,13,21,0)
^^2^2^3040224^
"^DD",115,115.017,13,21,1,0)
Stores the last date and time a diet card was printed for this
"^DD",115,115.017,13,21,2,0)
outpatient meal.
"^DD",115,115.017,13,"DT")
3040224
"^DD",115,115.017,14,0)
SPECIAL OE/RR ORDER^P100'^OR(100,^0;12^Q
"^DD",115,115.017,14,21,0)
^^1^1^3040608^
"^DD",115,115.017,14,21,1,0)
Pointer to File #100 for Special Meals entered via OE/RR.
"^DD",115,115.017,14,"DT")
3040608
"^DD",115,115.018,0)
GUEST MEALS SUB-FIELD^^7^8
"^DD",115,115.018,0,"DT")
3040224
"^DD",115,115.018,0,"IX","B",115.018,.01)

"^DD",115,115.018,0,"NM","GUEST MEALS")

"^DD",115,115.018,0,"UP")
115
"^DD",115,115.018,.01,0)
GUEST MEAL DATE/TIME^MDX^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X I D(X) S DINUM=X
"^DD",115,115.018,.01,1,0)
^.1
"^DD",115,115.018,.01,1,1,0)
115.018^B
"^DD",115,115.018,.01,1,1,1)
S ^FHPT(DA(1),"GM","B",$E(X,1,30),DA)=""
"^DD",115,115.018,.01,1,1,2)
K ^FHPT(DA(1),"GM","B",$E(X,1,30),DA)
"^DD",115,115.018,.01,1,2,0)
115^GM
"^DD",115,115.018,.01,1,2,1)
S ^FHPT("GM",$E(X,1,30),DA(1),DA)=""
"^DD",115,115.018,.01,1,2,2)
K ^FHPT("GM",$E(X,1,30),DA(1),DA)
"^DD",115,115.018,.01,1,2,"%D",0)
^.101^1^1^3030702^^^
"^DD",115,115.018,.01,1,2,"%D",1,0)
Cross reference the whole file by the guest meals date
"^DD",115,115.018,.01,1,2,"DT")
3030701
"^DD",115,115.018,.01,21,0)
^.001^1^1^3030417^^
"^DD",115,115.018,.01,21,1,0)
This field will contain the date/time of the guest meal.
"^DD",115,115.018,.01,"DT")
3030701
"^DD",115,115.018,1,0)
CLASSIFICATION^S^E:EMPLOYEE;G:GRATUITOUS;O:OOD;P:PAID;V:VOLUNTEER;^0;2^Q
"^DD",115,115.018,1,21,0)
^^1^1^3030417^
"^DD",115,115.018,1,21,1,0)
This field will contain the classification type for the guest meal.
"^DD",115,115.018,1,"DT")
3030417
"^DD",115,115.018,2,0)
MEAL^S^B:Breakfast;N:Noon;E:Evening;^0;3^Q
"^DD",115,115.018,2,21,0)
^.001^1^1^3030827^^
"^DD",115,115.018,2,21,1,0)
This field will store the meal (breakfast/noon/evening) for the guest meal.
"^DD",115,115.018,2,"DT")
3030827
"^DD",115,115.018,3,0)
CHARGE^NJ6,2^^0;4^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",115,115.018,3,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",115,115.018,3,21,0)
^^1^1^3030630^
"^DD",115,115.018,3,21,1,0)
This field stores the charge amount for the guest meal.
"^DD",115,115.018,3,"DT")
3030630
"^DD",115,115.018,4,0)
LOCATION^P119.6'^FH(119.6,^0;5^Q
"^DD",115,115.018,4,21,0)
^.001^1^1^3040218^^
"^DD",115,115.018,4,21,1,0)
This field indicates the location for this guest meal request.
"^DD",115,115.018,4,"DT")
3040218
"^DD",115,115.018,5,0)
DIET^P111'^FH(111,^0;6^Q
"^DD",115,115.018,5,21,0)
^^2^2^3040219^
"^DD",115,115.018,5,21,1,0)
This is the Diet for the guest meal.  The diet will be stuffed from the
"^DD",115,115.018,5,21,2,0)
value set in the OUTPATIENT DIET1 site parameter in file #119.9.
"^DD",115,115.018,5,"DT")
3040219
"^DD",115,115.018,6,0)
DATE/TIME TICKET LAST PRINTED^D^^0;7^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.018,6,21,0)
^^2^2^3040224^
"^DD",115,115.018,6,21,1,0)
Stores the last date and time a diet card was printed for this
"^DD",115,115.018,6,21,2,0)
outpatient meal.
"^DD",115,115.018,6,"DT")
3040224
"^DD",115,115.018,7,0)
DATE/TIME CARD LAST PRINTED^D^^0;8^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.018,7,21,0)
^^2^2^3040224^
"^DD",115,115.018,7,21,1,0)
Stores the last date and time a diet card was printed for this
"^DD",115,115.018,7,21,2,0)
outpatient meal.
"^DD",115,115.018,7,"DT")
3040224
"^DD",115,115.02,0)
DIET SUB-FIELD^NL^21^23
"^DD",115,115.02,0,"DT")
2960628
"^DD",115,115.02,0,"NM","DIET")

"^DD",115,115.02,0,"UP")
115.01
"^DD",115,115.02,.01,0)
ORDER NUMBER^NJ5,0XI^^0;1^K:X'?1N.N X I $D(X) S DINUM=X
"^DD",115,115.02,.01,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99999
"^DD",115,115.02,.01,21,0)
^^2^2^2880710^
"^DD",115,115.02,.01,21,1,0)
This field is merely the sequence order in which the diets
"^DD",115,115.02,.01,21,2,0)
were ordered and has no further meaning.
"^DD",115,115.02,.01,"DT")
2880515
"^DD",115,115.02,1,0)
DIET1^P111'I^FH(111,^0;2^Q
"^DD",115,115.02,1,21,0)
^^2^2^2940526^^
"^DD",115,115.02,1,21,1,0)
This is the first diet modification selected from the Diets (111)
"^DD",115,115.02,1,21,2,0)
file.
"^DD",115,115.02,1,"DT")
2880514
"^DD",115,115.02,2,0)
DIET2^P111'I^FH(111,^0;3^Q
"^DD",115,115.02,2,21,0)
^^2^2^2880710^
"^DD",115,115.02,2,21,1,0)
This is the second diet modification selected from the Diets (111)
"^DD",115,115.02,2,21,2,0)
file.
"^DD",115,115.02,2,"DT")
2880514
"^DD",115,115.02,3,0)
DIET3^P111'I^FH(111,^0;4^Q
"^DD",115,115.02,3,21,0)
^^2^2^2880710^
"^DD",115,115.02,3,21,1,0)
This is the third diet modification selected from the Diets (111)
"^DD",115,115.02,3,21,2,0)
file.
"^DD",115,115.02,3,"DT")
2880514
"^DD",115,115.02,4,0)
DIET4^P111'I^FH(111,^0;5^Q
"^DD",115,115.02,4,21,0)
^^2^2^2880710^
"^DD",115,115.02,4,21,1,0)
This is the fourth diet modification selected from the Diets (111)
"^DD",115,115.02,4,21,2,0)
file.
"^DD",115,115.02,4,"DT")
2880514
"^DD",115,115.02,5,0)
DIET5^P111'I^FH(111,^0;6^Q
"^DD",115,115.02,5,21,0)
^^2^2^2880710^
"^DD",115,115.02,5,21,1,0)
This is the fifth diet modification selected from the Diets (111)
"^DD",115,115.02,5,21,2,0)
file.
"^DD",115,115.02,5,"DT")
2880514
"^DD",115,115.02,6,0)
WITHHOLD^SI^N:NPO;X:NO ORDER;P:PASS;^0;7^Q
"^DD",115,115.02,6,1,0)
^.1^^0
"^DD",115,115.02,6,21,0)
^^2^2^2880710^
"^DD",115,115.02,6,21,1,0)
This field, if not null, indicates that an NPO type of order
"^DD",115,115.02,6,21,2,0)
was entered.
"^DD",115,115.02,6,"DT")
2880514
"^DD",115,115.02,7,0)
TYPE OF SERVICE^SI^T:TRAY;C:CAFETERIA;D:DINING ROOM;^0;8^Q
"^DD",115,115.02,7,21,0)
^^4^4^2880710^
"^DD",115,115.02,7,21,1,0)
This field indicates the type of service requested for this diet
"^DD",115,115.02,7,21,2,0)
order. It is not present for NPO orders. When this order becomes
"^DD",115,115.02,7,21,3,0)
effective, this type of service will become the current type of
"^DD",115,115.02,7,21,4,0)
service and will be the default for future orders.
"^DD",115,115.02,7,"DT")
2880514
"^DD",115,115.02,8,0)
DATE/TIME EFFECTIVE^DI^^0;9^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,8,21,0)
^^1^1^2880710^
"^DD",115,115.02,8,21,1,0)
This is the date/time when this diet order takes effect.
"^DD",115,115.02,8,"DT")
2880514
"^DD",115,115.02,9,0)
DATE/TIME EXPIRES^DI^^0;10^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,9,21,0)
^^3^3^2880710^
"^DD",115,115.02,9,21,1,0)
This field indicates the date/time when this order is to expire.
"^DD",115,115.02,9,21,2,0)
If null, the order is 'open-ended' and will not expire until
"^DD",115,115.02,9,21,3,0)
superceded by another order.
"^DD",115,115.02,9,"DT")
2880514
"^DD",115,115.02,10,0)
CLERK^P200'^VA(200,^0;11^Q
"^DD",115,115.02,10,21,0)
^^1^1^2880718^^
"^DD",115,115.02,10,21,1,0)
This field is the person actually entering the order.
"^DD",115,115.02,10.5,0)
DATE/TIME ORDERED^D^^0;12^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,10.5,21,0)
^^3^3^2880710^
"^DD",115,115.02,10.5,21,1,0)
This is the date/time the order was actually entered and may bear
"^DD",115,115.02,10.5,21,2,0)
little relationship the effective and/or expiration date/times
"^DD",115,115.02,10.5,21,3,0)
of the actual order.
"^DD",115,115.02,11,0)
COMMENT^F^^1;1^K:$L(X)>80!($L(X)<1) X
"^DD",115,115.02,11,3)
Answer must be 1-80 characters in length.
"^DD",115,115.02,11,21,0)
^^2^2^2960628^^^
"^DD",115,115.02,11,21,1,0)
This is a comment field for any specialized comments concerning
"^DD",115,115.02,11,21,2,0)
this diet order.
"^DD",115,115.02,11,"DT")
2960628
"^DD",115,115.02,12,0)
PRODUCTION DIET^RP116.2'^FH(116.2,^0;13^Q
"^DD",115,115.02,12,21,0)
^^4^4^2880710^
"^DD",115,115.02,12,21,1,0)
This is a pointer to the Production Diet (116.2) file and is
"^DD",115,115.02,12,21,2,0)
the outcome of the 'diet recoding' algorithm which is based
"^DD",115,115.02,12,21,3,0)
upon the diet modifications selected. It is not present for
"^DD",115,115.02,12,21,4,0)
NPO types of orders.
"^DD",115,115.02,12,"DT")
2870713
"^DD",115,115.02,13,0)
OE/RR ORDER^P100^OR(100,^0;14^Q
"^DD",115,115.02,13,21,0)
^^2^2^2890918^
"^DD",115,115.02,13,21,1,0)
This field contains a pointer the the OE/RR file order corresponding
"^DD",115,115.02,13,21,2,0)
to this order.
"^DD",115,115.02,13,"DT")
2890918
"^DD",115,115.02,14,0)
CURRENT OE/RR STATUS^P100.01'^ORD(100.01,^0;15^Q
"^DD",115,115.02,14,21,0)
^^2^2^2891008^
"^DD",115,115.02,14,21,1,0)
This field contains the current OE/RR status as passed to OE/RR.
"^DD",115,115.02,14,21,2,0)
It is a pointer to the OE/RR Status file (100.01).
"^DD",115,115.02,14,"DT")
2891008
"^DD",115,115.02,15,0)
LAST REVIEW DATE/TIME^D^^0;16^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,15,21,0)
^^3^3^2911204^
"^DD",115,115.02,15,21,1,0)
This is the date/time that the diet order was last reviewed if necessary.
"^DD",115,115.02,15,21,2,0)
(Reviews are based upon the coded Production Diet). Further reviews are
"^DD",115,115.02,15,21,3,0)
based upon this last review date/time.
"^DD",115,115.02,15,"DT")
2910430
"^DD",115,115.02,16,0)
REVIEW CLERK^P200'^VA(200,^0;17^Q
"^DD",115,115.02,16,21,0)
^^1^1^2941110^^
"^DD",115,115.02,16,21,1,0)
This is a pointer to File 200 of the person entering the review.
"^DD",115,115.02,16,"DT")
2910430
"^DD",115,115.02,17,0)
CANCELLED DATE/TIME^D^^0;18^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,17,21,0)
^^1^1^2941110^^^
"^DD",115,115.02,17,21,1,0)
This field contains the Date/Time when the NPO was cancelled.
"^DD",115,115.02,17,"DT")
2920318
"^DD",115,115.02,18,0)
CANCELLING CLERK^P200'^VA(200,^0;19^Q
"^DD",115,115.02,18,21,0)
^^2^2^2920318^^
"^DD",115,115.02,18,21,1,0)
This field contains the user who cancelled the NPO and is
"^DD",115,115.02,18,21,2,0)
captured automatically at the time of cancellation.
"^DD",115,115.02,18,"DT")
2920318
"^DD",115,115.02,19,0)
INDIVIDUAL PATTERN^FI^^2;1^K:$L(X)>200!($L(X)<2) X
"^DD",115,115.02,19,3)
Answer must be 2-200 characters in length.
"^DD",115,115.02,19,21,0)
^^6^6^2940526^^^
"^DD",115,115.02,19,21,1,0)
This field is the individual meal pattern for the patient which
"^DD",115,115.02,19,21,2,0)
contains three strings of codes, each code separated by a space contains
"^DD",115,115.02,19,21,3,0)
the internal number of the recipe category and the quantity separated
"^DD",115,115.02,19,21,4,0)
by a comma for the three meals, breakfast, noon, and evening, each
"^DD",115,115.02,19,21,5,0)
separated by a semicolon.  The meal pattern will take precedence over
"^DD",115,115.02,19,21,6,0)
the diet pattern entered in the Diet Pattern file (111.1).
"^DD",115,115.02,19,"DT")
2941110
"^DD",115,115.02,20,0)
PATTERN CLERK^P200'^VA(200,^3;1^Q
"^DD",115,115.02,20,21,0)
^^2^2^2941110^
"^DD",115,115.02,20,21,1,0)
This is a pointer to File 200 of the person entering the patient's
"^DD",115,115.02,20,21,2,0)
individual Diet Pattern.
"^DD",115,115.02,20,"DT")
2941110
"^DD",115,115.02,21,0)
DATE/TIME PATTERN ENTERED^D^^3;2^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,21,21,0)
^^2^2^2941110^
"^DD",115,115.02,21,21,1,0)
This field contains the Date/Time when the Diet Pattern was
"^DD",115,115.02,21,21,2,0)
entered.
"^DD",115,115.02,21,"DT")
2941110
"^DD",115,115.021,0)
LAB DATA SUB-FIELD^^6^7
"^DD",115,115.021,0,"IX","B",115.021,.01)

"^DD",115,115.021,0,"NM","LAB DATA")

"^DD",115,115.021,0,"UP")
115.011
"^DD",115,115.021,.01,0)
TEST NAME^MF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",115,115.021,.01,1,0)
^.1
"^DD",115,115.021,.01,1,1,0)
115.021^B
"^DD",115,115.021,.01,1,1,1)
S ^FHPT(DA(2),"N",DA(1),"L","B",$E(X,1,30),DA)=""
"^DD",115,115.021,.01,1,1,2)
K ^FHPT(DA(2),"N",DA(1),"L","B",$E(X,1,30),DA)
"^DD",115,115.021,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.021,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the TEST NAME field.
"^DD",115,115.021,.01,3)
Answer must be 1-30 characters in length.
"^DD",115,115.021,.01,21,0)
^^1^1^2891121^
"^DD",115,115.021,.01,21,1,0)
This field contains the name of the lab test.
"^DD",115,115.021,.01,"DT")
2890705
"^DD",115,115.021,1,0)
LAB TEST^P60'^LAB(60,^0;2^Q
"^DD",115,115.021,1,21,0)
^^2^2^2910813^^^^
"^DD",115,115.021,1,21,1,0)
This field contains a pointer to the Lab Test file (60)
"^DD",115,115.021,1,21,2,0)
corresponding to this lab test.
"^DD",115,115.021,1,"DT")
2890705
"^DD",115,115.021,2,0)
SPECIMEN^NJ4,0^^0;3^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.021,2,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.021,2,21,0)
2
"^DD",115,115.021,2,21,1,0)
This field contains a pointer to the specimen type used
"^DD",115,115.021,2,21,2,0)
for the lab test.
"^DD",115,115.021,2,"DT")
2890705
"^DD",115,115.021,3,0)
UNITS^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.021,3,3)
Answer must be 1-10 characters in length.
"^DD",115,115.021,3,21,0)
1^^1^1^2901217^
"^DD",115,115.021,3,21,1,0)
This field indicates the units in which the result is expressed.
"^DD",115,115.021,3,"DT")
2890705
"^DD",115,115.021,4,0)
REF. RANGE^F^^0;5^K:$L(X)>11!($L(X)<4) X
"^DD",115,115.021,4,3)
Answer must be 4-11 characters in length.
"^DD",115,115.021,4,21,0)
^^2^2^2940616^
"^DD",115,115.021,4,21,1,0)
This field provides the low-high reference (or normal) range
"^DD",115,115.021,4,21,2,0)
for the lab test.
"^DD",115,115.021,4,"DT")
2890705
"^DD",115,115.021,5,0)
RESULT^F^^0;6^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.021,5,3)
Answer must be 1-10 characters in length.
"^DD",115,115.021,5,21,0)
^^1^1^2891121^
"^DD",115,115.021,5,21,1,0)
This field contains the lab test result.
"^DD",115,115.021,5,"DT")
2890705
"^DD",115,115.021,6,0)
DATE PERFORMED^D^^0;7^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.021,6,21,0)
^^1^1^2891121^
"^DD",115,115.021,6,21,1,0)
This field contains the date the lab test was performed.
"^DD",115,115.021,6,"DT")
2890705
"^DD",115,115.03,0)
CONSULTATION SUB-FIELD^NL^12^11
"^DD",115,115.03,0,"ID",1)
W:$D(^(0)) "   ",$S($D(^FH(119.5,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),@("$E("_DIC_"Y,0),0)")
"^DD",115,115.03,0,"NM","CONSULTATION")

"^DD",115,115.03,0,"UP")
115.01
"^DD",115,115.03,.01,0)
DATE/TIME ENTERED^RD^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.03,.01,1,0)
^.1
"^DD",115,115.03,.01,1,1,0)
115^ADR
"^DD",115,115.03,.01,1,1,1)
S ^FHPT("ADR",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",115,115.03,.01,1,1,2)
K ^FHPT("ADR",$E(X,1,30),DA(2),DA(1),DA)
"^DD",115,115.03,.01,3)

"^DD",115,115.03,.01,21,0)
^^2^2^2880710^
"^DD",115,115.03,.01,21,1,0)
This field contains the date/time the consult request was
"^DD",115,115.03,.01,21,2,0)
entered.
"^DD",115,115.03,.01,"DT")
2850512
"^DD",115,115.03,1,0)
CONSULT REQUEST^RP119.5'^FH(119.5,^0;2^Q
"^DD",115,115.03,1,21,0)
^^2^2^2880710^
"^DD",115,115.03,1,21,1,0)
This field contains the specific consult request drawn from
"^DD",115,115.03,1,21,2,0)
the Dietetic Consults file (119.5).
"^DD",115,115.03,1,"DT")
2850512
"^DD",115,115.03,2,0)
COMMENT^F^^0;3^K:$L(X)>80!($L(X)<1) X
"^DD",115,115.03,2,3)
ANSWER MUST BE 1-80 CHARACTERS IN LENGTH
"^DD",115,115.03,2,21,0)
^^1^1^2880718^^
"^DD",115,115.03,2,21,1,0)
This field allows the user to enter a comment as to the consult.
"^DD",115,115.03,2,"DT")
2850418
"^DD",115,115.03,4,0)
CLINICIAN^RP200'^VA(200,^0;5^Q
"^DD",115,115.03,4,1,0)
^.1
"^DD",115,115.03,4,1,1,0)
115^ADRU^MUMPS
"^DD",115,115.03,4,1,1,1)
S X9=$P(^FHPT(DA(2),"A",DA(1),"DR",DA,0),U,8) K:X9'="A" ^FHPT("ADRU",X,DA(2),DA(1),DA) S:X9="A" ^FHPT("ADRU",X,DA(2),DA(1),DA)=""
"^DD",115,115.03,4,1,1,2)
K:X ^FHPT("ADRU",X,DA(2),DA(1),DA)
"^DD",115,115.03,4,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.03,4,1,1,"%D",1,0)
This is a cross-reference by Clinician of all consultations with
"^DD",115,115.03,4,1,1,"%D",2,0)
an Active status.
"^DD",115,115.03,4,21,0)
^^4^4^2880710^
"^DD",115,115.03,4,21,1,0)
This field indicates the clinician currently assigned to the
"^DD",115,115.03,4,21,2,0)
consult. Initially, it will contain the clinician assigned
"^DD",115,115.03,4,21,3,0)
to the consult type, if one has been specified, otherwise, the
"^DD",115,115.03,4,21,4,0)
clinician assigned to the ward on which the patient resides.
"^DD",115,115.03,4,"DT")
2850506
"^DD",115,115.03,6,0)
CLERK^RP200'^VA(200,^0;7^Q
"^DD",115,115.03,6,21,0)
^^2^2^2880710^
"^DD",115,115.03,6,21,1,0)
This field contains the user entering the request and is
"^DD",115,115.03,6,21,2,0)
automatically captured at time of entry.
"^DD",115,115.03,6,"DT")
2850418
"^DD",115,115.03,7,0)
STATUS^RS^A:ACTIVE;C:COMPLETE;X:CANCELLED;^0;8^Q
"^DD",115,115.03,7,1,0)
^.1
"^DD",115,115.03,7,1,1,0)
115^ADRV^MUMPS
"^DD",115,115.03,7,1,1,1)
S X9=$P(^FHPT(DA(2),"A",DA(1),"DR",DA,0),U,5) S:X9&(X="A") ^FHPT("ADRU",X9,DA(2),DA(1),DA)="" K:X9&(X'="A") ^FHPT("ADRU",X9,DA(2),DA(1),DA)
"^DD",115,115.03,7,1,1,2)
S X9=$P(^FHPT(DA(2),"A",DA(1),"DR",DA,0),U,5) K:X9 ^FHPT("ADRU",X9,DA(2),DA(1),DA)
"^DD",115,115.03,7,1,1,"%D",0)
^^2^2^2940824^^
"^DD",115,115.03,7,1,1,"%D",1,0)
This is a cross-reference by Clinician (Field 4) of all consults
"^DD",115,115.03,7,1,1,"%D",2,0)
with an Active status.
"^DD",115,115.03,7,21,0)
^^1^1^2920611^^
"^DD",115,115.03,7,21,1,0)
This is the current status of the request.
"^DD",115,115.03,7,"DT")
2850506
"^DD",115,115.03,8,0)
DATE/TIME CLEARED^D^^0;9^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.03,8,21,0)
^^2^2^2880710^
"^DD",115,115.03,8,21,1,0)
This is the date/time the consult was cleared, either by
"^DD",115,115.03,8,21,2,0)
completion or cancellation.
"^DD",115,115.03,8,"DT")
2850506
"^DD",115,115.03,9,0)
CLERK CLEARING^P200'^VA(200,^0;10^Q
"^DD",115,115.03,9,21,0)
^^2^2^2880710^
"^DD",115,115.03,9,21,1,0)
This is the dietetic person who indicated that the consult
"^DD",115,115.03,9,21,2,0)
had been cleared.
"^DD",115,115.03,9,"DT")
2850506
"^DD",115,115.03,10,0)
INITIAL/FOLLOW-UP^S^I:INITIAL;F:FOLLOW-UP;^0;11^Q
"^DD",115,115.03,10,21,0)
^^3^3^2880710^
"^DD",115,115.03,10,21,1,0)
If follow-ups are associated with this consult type, then
"^DD",115,115.03,10,21,2,0)
this field will indicate whether the consult was an
"^DD",115,115.03,10,21,3,0)
initial one or a follow-up to a prior consult.
"^DD",115,115.03,10,"DT")
2850606
"^DD",115,115.03,11,0)
OE/RR ORDER^P100^OR(100,^0;13^Q
"^DD",115,115.03,11,21,0)
^^2^2^2890918^
"^DD",115,115.03,11,21,1,0)
This field contains a pointer to the OE/RR file order corresponding
"^DD",115,115.03,11,21,2,0)
to this order.
"^DD",115,115.03,11,"DT")
2890918
"^DD",115,115.03,12,0)
OE/RR ENTRY^P100'^OR(100,^0;13^Q
"^DD",115,115.03,12,"DT")
2880325
"^DD",115,115.04,0)
TUBEFEEDING SUB-FIELD^NL^15^11
"^DD",115,115.04,0,"DT")
3021029
"^DD",115,115.04,0,"NM","TUBEFEEDING")

"^DD",115,115.04,0,"UP")
115.01
"^DD",115,115.04,.01,0)
TUBEFEEDING^D^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.04,.01,21,0)
^^2^2^2910219^^^^
"^DD",115,115.04,.01,21,1,0)
This field contains the date/time the tubefeeding was ordered
"^DD",115,115.04,.01,21,2,0)
and will be effective.
"^DD",115,115.04,.01,"DT")
2850517
"^DD",115,115.04,3,0)
TF PRODUCT^115.1P^^P;0
"^DD",115,115.04,3,3)
ANSWER MUST BE 3-15 CHARACTERS IN LENGTH
"^DD",115,115.04,3,21,0)
^^1^1^2910509^^^^
"^DD",115,115.04,3,21,1,0)
This multiple contains the tubefeeding products selected.
"^DD",115,115.04,3,"DT")
2850714
"^DD",115,115.04,4,0)
COMMENT^F^^0;5^K:$L(X)>160!($L(X)<1) X
"^DD",115,115.04,4,3)
Answer must be 1-160 characters in length.
"^DD",115,115.04,4,21,0)
^.001^2^2^3021030^^^^
"^DD",115,115.04,4,21,1,0)
This field contains any free-text comment entered at time
"^DD",115,115.04,4,21,2,0)
of order entry.
"^DD",115,115.04,4,"DT")
3021029
"^DD",115,115.04,6,0)
TOTAL CC'S^NJ5,0^^0;6^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.04,6,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 10000
"^DD",115,115.04,6,21,0)
^^2^2^2880715^
"^DD",115,115.04,6,21,1,0)
This field contains the total daily cc's administered of
"^DD",115,115.04,6,21,2,0)
the prepared (diluted) product.
"^DD",115,115.04,6,"DT")
2850714
"^DD",115,115.04,7,0)
TOTAL KCALS/DAY^NJ5,0^^0;7^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.04,7,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 10000
"^DD",115,115.04,7,21,0)
^^2^2^2880715^
"^DD",115,115.04,7,21,1,0)
This field contains the total Kilocalories per day provided
"^DD",115,115.04,7,21,2,0)
by the tubefeeding.
"^DD",115,115.04,7,"DT")
2850714
"^DD",115,115.04,10,0)
ENTERING CLERK^RP200'^VA(200,^0;10^Q
"^DD",115,115.04,10,21,0)
^^2^2^2880715^
"^DD",115,115.04,10,21,1,0)
This field contains the user entering the tubefeeding order
"^DD",115,115.04,10,21,2,0)
and is automatically captured at time of entry.
"^DD",115,115.04,10,"DT")
2850714
"^DD",115,115.04,11,0)
CANCELLATION DATE/TIME^D^^0;11^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.04,11,21,0)
^^2^2^2920318^^
"^DD",115,115.04,11,21,1,0)
This field contains the date/time the tubefeeding order
"^DD",115,115.04,11,21,2,0)
was cancelled.
"^DD",115,115.04,11,"DT")
2850714
"^DD",115,115.04,12,0)
CANCELLING CLERK^P200'^VA(200,^0;12^Q
"^DD",115,115.04,12,21,0)
^^2^2^2920318^^
"^DD",115,115.04,12,21,1,0)
This field contains the user who cancelled the order and is
"^DD",115,115.04,12,21,2,0)
captured automatically at time of cancellation.
"^DD",115,115.04,12,"DT")
2850714
"^DD",115,115.04,13,0)
OE/RR ORDER^P100^OR(100,^0;14^Q
"^DD",115,115.04,13,21,0)
^^2^2^2890918^
"^DD",115,115.04,13,21,1,0)
This field contains a pointer to the OE/RR file order corresponding
"^DD",115,115.04,13,21,2,0)
to this order.
"^DD",115,115.04,13,"DT")
2890918
"^DD",115,115.04,14,0)
LAST REVIEW DATE/TIME^D^^0;15^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.04,14,21,0)
^^2^2^2911204^
"^DD",115,115.04,14,21,1,0)
This is the date/time that the Tubefeeding order was last reviewed.
"^DD",115,115.04,14,21,2,0)
Further reviews are based upon this last review date/time.
"^DD",115,115.04,14,"DT")
2910430
"^DD",115,115.04,15,0)
REVIEW CLERK^P200'^VA(200,^0;16^Q
"^DD",115,115.04,15,21,0)
^^1^1^2911204^
"^DD",115,115.04,15,21,1,0)
This is a pointer to File 200 of the person entering the review.
"^DD",115,115.04,15,"DT")
2910430
"^DD",115,115.05,0)
EARLY/LATE TRAY SUB-FIELD^NL^6^7
"^DD",115,115.05,0,"NM","EARLY/LATE TRAY")

"^DD",115,115.05,0,"UP")
115.01
"^DD",115,115.05,.01,0)
EARLY/LATE TRAY^DX^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X I $D(X) S DINUM=X
"^DD",115,115.05,.01,1,0)
^.1
"^DD",115,115.05,.01,1,1,0)
115^ADLT
"^DD",115,115.05,.01,1,1,1)
S ^FHPT("ADLT",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",115,115.05,.01,1,1,2)
K ^FHPT("ADLT",$E(X,1,30),DA(2),DA(1),DA)
"^DD",115,115.05,.01,21,0)
^.001^2^2^3030204^^^
"^DD",115,115.05,.01,21,1,0)
This field contains the date/time at which the early/late
"^DD",115,115.05,.01,21,2,0)
tray is to be delivered.
"^DD",115,115.05,.01,"DT")
2850525
"^DD",115,115.05,1,0)
MEAL^RS^B:BREAKFAST;N:NOON;E:EVENING;^0;2^Q
"^DD",115,115.05,1,21,0)
^^1^1^2880718^^
"^DD",115,115.05,1,21,1,0)
This field indicates for which meal the early or late tray is ordered.
"^DD",115,115.05,1,"DT")
2850608
"^DD",115,115.05,2,0)
TIME^F^^0;3^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.05,2,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",115,115.05,2,21,0)
^^2^2^2930428^^^^
"^DD",115,115.05,2,21,1,0)
This field contains a printable time for which the meal is to
"^DD",115,115.05,2,21,2,0)
delivered.
"^DD",115,115.05,2,"DT")
2850525
"^DD",115,115.05,3,0)
BAGGED MEAL?^S^Y:YES;N:NO;^0;4^Q
"^DD",115,115.05,3,21,0)
^^1^1^2880710^
"^DD",115,115.05,3,21,1,0)
If answered YES, this field indicates that a bagged meal is desired.
"^DD",115,115.05,3,"DT")
2850526
"^DD",115,115.05,4,0)
CLERK^RP200'^VA(200,^0;5^Q
"^DD",115,115.05,4,21,0)
^^2^2^2880710^
"^DD",115,115.05,4,21,1,0)
This field is automatically updated with the user entering
"^DD",115,115.05,4,21,2,0)
the order.
"^DD",115,115.05,4,"DT")
2850526
"^DD",115,115.05,5,0)
ENTRY DATE/TIME^RD^^0;6^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.05,5,21,0)
^^2^2^2910506^^
"^DD",115,115.05,5,21,1,0)
This field contains the date/time the order was actually
"^DD",115,115.05,5,21,2,0)
entered.
"^DD",115,115.05,5,"DT")
2850526
"^DD",115,115.05,6,0)
OE/RR ORDER^P100^OR(100,^0;7^Q
"^DD",115,115.05,6,21,0)
^^2^2^2890918^
"^DD",115,115.05,6,21,1,0)
This field contains a pointer to the OE/RR file order corresponding
"^DD",115,115.05,6,21,2,0)
to this order.
"^DD",115,115.05,6,"DT")
2890918
"^DD",115,115.06,0)
ADDITIONAL ORDERS SUB-FIELD^NL^7^8
"^DD",115,115.06,0,"DT")
3021030
"^DD",115,115.06,0,"NM","ADDITIONAL ORDERS")

"^DD",115,115.06,0,"UP")
115.01
"^DD",115,115.06,.01,0)
ORDER NUMBER^RNJ5,0X^^0;1^K:'X!(X'?1N.N) X I $D(X) S DINUM=X
"^DD",115,115.06,.01,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99999
"^DD",115,115.06,.01,21,0)
^^2^2^2880710^
"^DD",115,115.06,.01,21,1,0)
This field is merely the sequence number of the Additional
"^DD",115,115.06,.01,21,2,0)
Orders entered and has no meaning beyond that.
"^DD",115,115.06,.01,"DT")
2851126
"^DD",115,115.06,1,0)
DATE/TIME ENTERED^RD^^0;2^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.06,1,1,0)
^.1^^0
"^DD",115,115.06,1,21,0)
^^1^1^2880710^
"^DD",115,115.06,1,21,1,0)
This is the date/time the Additional Order was entered.
"^DD",115,115.06,1,"DT")
2851126
"^DD",115,115.06,2,0)
ORDER^F^^0;3^K:$L(X)>160!($L(X)<1) X
"^DD",115,115.06,2,3)
Answer must be 1-160 characters in length.
"^DD",115,115.06,2,21,0)
^.001^1^1^3021030^^^
"^DD",115,115.06,2,21,1,0)
This is the text of the order.
"^DD",115,115.06,2,"DT")
3021030
"^DD",115,115.06,3,0)
CLERK^RP200'^VA(200,^0;4^Q
"^DD",115,115.06,3,21,0)
^^2^2^2880710^
"^DD",115,115.06,3,21,1,0)
This is the clerk entering the order and is automatically
"^DD",115,115.06,3,21,2,0)
captured at time of entry.
"^DD",115,115.06,3,"DT")
2851126
"^DD",115,115.06,4,0)
STATUS^RS^A:ACTIVE;C:COMPLETE;S:SAVED;X:CANCELLED;^0;5^Q
"^DD",115,115.06,4,1,0)
^.1
"^DD",115,115.06,4,1,1,0)
115^AOO^MUMPS
"^DD",115,115.06,4,1,1,1)
S:X="A" ^FHPT("AOO",DA(2),DA(1),DA)="" K:X'="A" ^FHPT("AOO",DA(2),DA(1),DA)
"^DD",115,115.06,4,1,1,2)
K ^FHPT("AOO",DA(2),DA(1),DA)
"^DD",115,115.06,4,1,1,"%D",0)
^^1^1^2940824^
"^DD",115,115.06,4,1,1,"%D",1,0)
This cross-reference is a list of active orders only.
"^DD",115,115.06,4,21,0)
^^3^3^2920319^^^^
"^DD",115,115.06,4,21,1,0)
This is the status of the order. A saved order is one that has
"^DD",115,115.06,4,21,2,0)
been responded to but continues to display as it may require
"^DD",115,115.06,4,21,3,0)
further or on-going action.
"^DD",115,115.06,4,"DT")
2890514
"^DD",115,115.06,5,0)
DATE/TIME CLEARED^D^^0;6^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.06,5,21,0)
^^1^1^2880718^^
"^DD",115,115.06,5,21,1,0)
This is the date/time that the order was completed or saved.
"^DD",115,115.06,5,"DT")
2851126
"^DD",115,115.06,6,0)
CLERK CLEARING^P200'^VA(200,^0;7^Q
"^DD",115,115.06,6,21,0)
^^2^2^2880710^
"^DD",115,115.06,6,21,1,0)
This is the dietetic person clearing the order and is
"^DD",115,115.06,6,21,2,0)
automatically captured at time of entry.
"^DD",115,115.06,6,"DT")
2851126
"^DD",115,115.06,7,0)
OE/RR ORDER^P100^OR(100,^0;8^Q
"^DD",115,115.06,7,21,0)
^^2^2^2890918^
"^DD",115,115.06,7,21,1,0)
This field contains a pointer to the OE/RR file order corresponding
"^DD",115,115.06,7,21,2,0)
to this order.
"^DD",115,115.06,7,"DT")
2890918
"^DD",115,115.07,0)
SUPPLEMENTAL FEEDING SUB-FIELD^^44^34
"^DD",115,115.07,0,"DT")
2940722
"^DD",115,115.07,0,"NM","SUPPLEMENTAL FEEDING")

"^DD",115,115.07,0,"UP")
115.01
"^DD",115,115.07,.01,0)
SUPPLEMENTAL FEEDING^NJ4,0^^0;1^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.07,.01,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",115,115.07,.01,21,0)
^^2^2^2910708^^
"^DD",115,115.07,.01,21,1,0)
This field is merely the sequence in which the various orders
"^DD",115,115.07,.01,21,2,0)
were entered and has no meaning beyond that.
"^DD",115,115.07,.01,"DT")
2871018
"^DD",115,115.07,1,0)
DATE/TIME ORDERED^RD^^0;2^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.07,1,21,0)
^^2^2^2910612^^^
"^DD",115,115.07,1,21,1,0)
This is the date/time at which the order was entered and is
"^DD",115,115.07,1,21,2,0)
captured automatically.
"^DD",115,115.07,1,"DT")
2871018
"^DD",115,115.07,2,0)
ENTERING CLERK^RP200'^VA(200,^0;3^Q
"^DD",115,115.07,2,21,0)
^^2^2^2880710^
"^DD",115,115.07,2,21,1,0)
This is the person actually entering the order and is captured
"^DD",115,115.07,2,21,2,0)
automatically at time of entry.
"^DD",115,115.07,2,"DT")
2871018
"^DD",115,115.07,3,0)
SF MENU^RP118.1'^FH(118.1,^0;4^Q
"^DD",115,115.07,3,21,0)
^^4^4^2880718^^
"^DD",115,115.07,3,21,1,0)
This is the supplemental feeding menu of the
"^DD",115,115.07,3,21,2,0)
Supplemental Feeding Menu file (118.1) that was selected. If
"^DD",115,115.07,3,21,3,0)
other than 'Individualized', the items from the selected
"^DD",115,115.07,3,21,4,0)
menu were moved into this order.
"^DD",115,115.07,3,"DT")
2871018
"^DD",115,115.07,10,0)
10AM FEEDING #1^*P118'^FH(118,^0;5^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,10,12)
Cannot select bulk nourishments
"^DD",115,115.07,10,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,10,21,0)
^^2^2^2880710^
"^DD",115,115.07,10,21,1,0)
This is the first supplemental feeding ordered for the 10am
"^DD",115,115.07,10,21,2,0)
feeding.
"^DD",115,115.07,10,"DT")
2871018
"^DD",115,115.07,11,0)
10AM #1 QTY^NJ2,0^^0;6^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,11,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.07,11,21,0)
^^1^1^2880710^^^
"^DD",115,115.07,11,21,1,0)
This is the ordered quantity of the first 10am feeding.
"^DD",115,115.07,11,"DT")
2871018
"^DD",115,115.07,12,0)
10AM FEEDING #2^*P118'^FH(118,^0;7^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,12,12)
Cannot select bulk nourishments
"^DD",115,115.07,12,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,12,21,0)
^^2^2^2880710^
"^DD",115,115.07,12,21,1,0)
This is the second supplemental feeding ordered for the 10am
"^DD",115,115.07,12,21,2,0)
feeding.
"^DD",115,115.07,13,0)
10AM #2 QTY^NJ2,0^^0;8^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,13,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,13,21,0)
^^1^1^2880710^^
"^DD",115,115.07,13,21,1,0)
This is the ordered quantity for the second 10am feeding.
"^DD",115,115.07,14,0)
10AM FEEDING #3^*P118'^FH(118,^0;9^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,14,12)
Cannot select bulk nourishments
"^DD",115,115.07,14,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,14,21,0)
^^2^2^2880710^
"^DD",115,115.07,14,21,1,0)
This is the third supplemental feeding ordered for the 10am
"^DD",115,115.07,14,21,2,0)
feeding.
"^DD",115,115.07,15,0)
10AM #3 QTY^NJ2,0^^0;10^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,15,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,15,21,0)
^^1^1^2880710^^
"^DD",115,115.07,15,21,1,0)
This is the ordered quantity for the third 10am feeding.
"^DD",115,115.07,16,0)
10AM FEEDING #4^*P118'^FH(118,^0;11^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,16,12)
Cannot select bulk nourishments
"^DD",115,115.07,16,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,16,21,0)
^^2^2^2880710^
"^DD",115,115.07,16,21,1,0)
This is the fourth supplemental feeding ordered for the 10am
"^DD",115,115.07,16,21,2,0)
feeding.
"^DD",115,115.07,17,0)
10AM #4 QTY^NJ2,0^^0;12^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,17,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,17,21,0)
^^1^1^2880710^
"^DD",115,115.07,17,21,1,0)
This is the ordered quantity of the fourth 10am feeding.
"^DD",115,115.07,18,0)
2PM FEEDING #1^*P118'^FH(118,^0;13^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,18,12)
Cannot select bulk nourishments
"^DD",115,115.07,18,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,18,21,0)
^^2^2^2880710^
"^DD",115,115.07,18,21,1,0)
This is the first supplemental feeding ordered for the 2pm
"^DD",115,115.07,18,21,2,0)
feeding.
"^DD",115,115.07,19,0)
2PM #1 QTY^NJ2,0^^0;14^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,19,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,19,21,0)
^^1^1^2880710^
"^DD",115,115.07,19,21,1,0)
This is the ordered quantity of the first 2pm feeding.
"^DD",115,115.07,20,0)
2PM FEEDING #2^*P118'^FH(118,^0;15^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,20,12)
Cannot select bulk nourishments
"^DD",115,115.07,20,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,20,21,0)
^^2^2^2880710^
"^DD",115,115.07,20,21,1,0)
This is the second supplemental feeding ordered for the 2pm
"^DD",115,115.07,20,21,2,0)
feeding.
"^DD",115,115.07,21,0)
2PM #2 QTY^NJ2,0^^0;16^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,21,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,21,21,0)
^^1^1^2880710^
"^DD",115,115.07,21,21,1,0)
This is the ordered quantity of the second 2pm feeding.
"^DD",115,115.07,22,0)
2PM FEEDING #3^*P118'^FH(118,^0;17^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,22,12)
Cannot select bulk nourishments
"^DD",115,115.07,22,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,22,21,0)
^^2^2^2880710^
"^DD",115,115.07,22,21,1,0)
This is the third supplemental feeding ordered for the 2pm
"^DD",115,115.07,22,21,2,0)
feeding.
"^DD",115,115.07,23,0)
2PM #3 QTY^NJ2,0^^0;18^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,23,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,23,21,0)
^^1^1^2880710^
"^DD",115,115.07,23,21,1,0)
This is the ordered quantity of the third 2pm feeding.
"^DD",115,115.07,24,0)
2PM FEEDING #4^*P118'^FH(118,^0;19^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,24,12)
Cannot select bulk nourishments
"^DD",115,115.07,24,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,24,21,0)
^^2^2^2880710^
"^DD",115,115.07,24,21,1,0)
This is the fourth supplemental feeding ordered for the 2pm
"^DD",115,115.07,24,21,2,0)
feeding.
"^DD",115,115.07,25,0)
2PM #4 QTY^NJ2,0^^0;20^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,25,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,25,21,0)
^^1^1^2880710^
"^DD",115,115.07,25,21,1,0)
This is the ordered quantity of the fourth 2pm feeding.
"^DD",115,115.07,26,0)
8PM FEEDING #1^*P118'^FH(118,^0;21^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,26,12)
Cannot select bulk nourishments
"^DD",115,115.07,26,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,26,21,0)
^^2^2^2880710^
"^DD",115,115.07,26,21,1,0)
This is the first supplemental feeding ordered for the 8pm
"^DD",115,115.07,26,21,2,0)
feeding.
"^DD",115,115.07,27,0)
8PM #1 QTY^NJ2,0^^0;22^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,27,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,27,21,0)
^^1^1^2880710^
"^DD",115,115.07,27,21,1,0)
This is the ordered quantity of the first 8pm feeding.
"^DD",115,115.07,28,0)
8PM FEEDING #2^*P118'^FH(118,^0;23^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,28,12)
Cannot select bulk nourishments
"^DD",115,115.07,28,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,28,21,0)
^^2^2^2880710^
"^DD",115,115.07,28,21,1,0)
This is the second supplemental feeding ordered for the 8pm
"^DD",115,115.07,28,21,2,0)
feeding.
"^DD",115,115.07,29,0)
8PM #2 QTY^NJ2,0^^0;24^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,29,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,29,21,0)
^^1^1^2880710^
"^DD",115,115.07,29,21,1,0)
This is the ordered quantity of the second 8pm feeding.
"^DD",115,115.07,30,0)
8PM FEEDING #3^*P118'^FH(118,^0;25^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,30,12)
Cannot select bulk nourishments
"^DD",115,115.07,30,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,30,21,0)
^^2^2^2880710^
"^DD",115,115.07,30,21,1,0)
This is the third supplemental feeding ordered for the 8pm
"^DD",115,115.07,30,21,2,0)
feeding.
"^DD",115,115.07,31,0)
8PM #3 QTY^NJ2,0^^0;26^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,31,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,31,21,0)
^^1^1^2880710^
"^DD",115,115.07,31,21,1,0)
This is the ordered quantity of the third 8pm feeding.
"^DD",115,115.07,32,0)
8PM FEEDING #4^*P118'^FH(118,^0;27^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,32,12)
Cannot select bulk nourishments
"^DD",115,115.07,32,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,32,21,0)
^^2^2^2880710^
"^DD",115,115.07,32,21,1,0)
This is the fourth supplemental feeding ordered for the 8pm
"^DD",115,115.07,32,21,2,0)
feeding.
"^DD",115,115.07,33,0)
8PM #4 QTY^NJ2,0^^0;28^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,33,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,33,21,0)
^^1^1^2880710^
"^DD",115,115.07,33,21,1,0)
This is the ordered quantity of the fourth 8pm feeding.
"^DD",115,115.07,34,0)
DIETARY OR THERAPEUTIC^RS^D:DIETARY;T:THERAPEUTIC;^0;29^Q
"^DD",115,115.07,34,21,0)
^^2^2^2880710^
"^DD",115,115.07,34,21,1,0)
This field indicates whether the supplemental feeding was
"^DD",115,115.07,34,21,2,0)
ordered for dietary or therapeutic reasons.
"^DD",115,115.07,34,"DT")
2850928
"^DD",115,115.07,40,0)
DATE/TIME LAST REVIEW^D^^0;30^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.07,40,21,0)
^^2^2^2880710^
"^DD",115,115.07,40,21,1,0)
This is the date/time this supplemental feeding order was
"^DD",115,115.07,40,21,2,0)
last reviewed for appropriateness.
"^DD",115,115.07,40,"DT")
2871018
"^DD",115,115.07,41,0)
REVIEW CLERK^P200'^VA(200,^0;31^Q
"^DD",115,115.07,41,21,0)
^^2^2^2880710^
"^DD",115,115.07,41,21,1,0)
This is the person conducting the last review and is captured
"^DD",115,115.07,41,21,2,0)
automatically at time of review.
"^DD",115,115.07,41,"DT")
2871018
"^DD",115,115.07,42,0)
DATE/TIME CANCELLED^D^^0;32^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.07,42,21,0)
^^1^1^2880710^
"^DD",115,115.07,42,21,1,0)
This is the date/time this order was cancelled.
"^DD",115,115.07,42,"DT")
2871018
"^DD",115,115.07,43,0)
CANCELLING CLERK^P200'^VA(200,^0;33^Q
"^DD",115,115.07,43,21,0)
^^2^2^2880710^
"^DD",115,115.07,43,21,1,0)
This is the person cancelling the order and is captured
"^DD",115,115.07,43,21,2,0)
automatically at time of cancellation.
"^DD",115,115.07,43,"DT")
2871018
"^DD",115,115.07,44,0)
DIET ASSOCIATED?^S^Y:YES;N:NO;^0;34^Q
"^DD",115,115.07,44,21,0)
^^2^2^2940722^
"^DD",115,115.07,44,21,1,0)
This field, if answered Yes, means this Supplemental Feeding Menu
"^DD",115,115.07,44,21,2,0)
is associated with a diet order else if answered No, means it is not.
"^DD",115,115.07,44,"DT")
2940722
"^DD",115,115.08,0)
STANDING ORDERS SUB-FIELD^^8^9
"^DD",115,115.08,0,"DT")
2940722
"^DD",115,115.08,0,"NM","STANDING ORDERS")

"^DD",115,115.08,0,"UP")
115.01
"^DD",115,115.08,.01,0)
STANDING ORDERS^NJ4,0^^0;1^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.08,.01,1,0)
^.1^^0
"^DD",115,115.08,.01,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.08,.01,21,0)
^^2^2^2920103^^
"^DD",115,115.08,.01,21,1,0)
This field contains the sequence number of the standing order
"^DD",115,115.08,.01,21,2,0)
and has no meaning beyond that.
"^DD",115,115.08,.01,"DT")
2871108
"^DD",115,115.08,1,0)
ORDER^RP118.3'^FH(118.3,^0;2^Q
"^DD",115,115.08,1,1,0)
^.1
"^DD",115,115.08,1,1,1,0)
115^ASP^MUMPS
"^DD",115,115.08,1,1,1,1)
S ^FHPT("ASP",DA(2),DA(1),DA)=""
"^DD",115,115.08,1,1,1,2)
K ^FHPT("ASP",DA(2),DA(1),DA)
"^DD",115,115.08,1,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.08,1,1,1,"%D",1,0)
This creates an "ASP" cross-reference for active orders. It
"^DD",115,115.08,1,1,1,"%D",2,0)
is killed when the order is cancelled.
"^DD",115,115.08,1,21,0)
^^2^2^2920103^^^
"^DD",115,115.08,1,21,1,0)
This field contains the standing order (from the Standing Orders
"^DD",115,115.08,1,21,2,0)
file, 118.3).
"^DD",115,115.08,1,"DT")
2871111
"^DD",115,115.08,2,0)
MEALS^RFX^^0;3^S:$P("ALL",X,1)="" X="BNE" S %=X,X="" S:%["B" X="B" S:%["N" X=X_"N" S:%["E" X=X_"E" K:$L(%)'=$L(X) X K %
"^DD",115,115.08,2,3)
Answer should be a string of meals (e.g., B  or BN or BNE) or A for all meals
"^DD",115,115.08,2,21,0)
^^2^2^2880901^^
"^DD",115,115.08,2,21,1,0)
This field contains the meals to which this standing order
"^DD",115,115.08,2,21,2,0)
is applicable.
"^DD",115,115.08,2,"DT")
2880901
"^DD",115,115.08,3,0)
DATE/TIME ORDERED^RD^^0;4^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.08,3,21,0)
^^2^2^2880714^
"^DD",115,115.08,3,21,1,0)
This field contains the date/time at which the standing
"^DD",115,115.08,3,21,2,0)
order was entered.
"^DD",115,115.08,3,"DT")
2871111
"^DD",115,115.08,4,0)
ENTERING CLERK^RP200'^VA(200,^0;5^Q
"^DD",115,115.08,4,21,0)
^^2^2^2950317^^
"^DD",115,115.08,4,21,1,0)
This field contains the user who entered the order and is
"^DD",115,115.08,4,21,2,0)
automatically captured at the time of entry.
"^DD",115,115.08,4,"DT")
2871111
"^DD",115,115.08,5,0)
DATE/TIME CANCELLED^D^^0;6^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.08,5,1,0)
^.1
"^DD",115,115.08,5,1,1,0)
115^ASP1^MUMPS
"^DD",115,115.08,5,1,1,1)
K ^FHPT("ASP",DA(2),DA(1),DA)
"^DD",115,115.08,5,1,1,2)
S ^FHPT("ASP",DA(2),DA(1),DA)=""
"^DD",115,115.08,5,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.08,5,1,1,"%D",1,0)
This cross-reference will delete the "ASP" standing order
"^DD",115,115.08,5,1,1,"%D",2,0)
entry if the order is cancelled.
"^DD",115,115.08,5,21,0)
^^3^3^2911223^^
"^DD",115,115.08,5,21,1,0)
This field contains the date/time the standing order was
"^DD",115,115.08,5,21,2,0)
cancelled and is automatically captured at time of
"^DD",115,115.08,5,21,3,0)
cancellation.
"^DD",115,115.08,5,"DT")
2871111
"^DD",115,115.08,6,0)
CANCELLING CLERK^P200'^VA(200,^0;7^Q
"^DD",115,115.08,6,21,0)
^^2^2^2920320^^^
"^DD",115,115.08,6,21,1,0)
This field contains the user who entered the cancellation
"^DD",115,115.08,6,21,2,0)
and is automatically captured at time of cancellation.
"^DD",115,115.08,6,"DT")
2871111
"^DD",115,115.08,7,0)
QUANTITY^NJ1,0^^0;8^K:+X'=X!(X>9)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.08,7,3)
Type a Number between 1 and 9, 0 Decimal Digits
"^DD",115,115.08,7,21,0)
^^1^1^2920220^
"^DD",115,115.08,7,21,1,0)
This is the quantity of the Standing Order.
"^DD",115,115.08,7,"DT")
2920103
"^DD",115,115.08,8,0)
DIET ASSOCIATED?^S^Y:YES;N:NO;^0;9^Q
"^DD",115,115.08,8,21,0)
^^2^2^2940722^
"^DD",115,115.08,8,21,1,0)
This field, if answered Yes, means this Standing Order is associated
"^DD",115,115.08,8,21,2,0)
with a diet order else if answered No, means it is not.
"^DD",115,115.08,8,"DT")
2940722
"^DD",115,115.09,0)
FOOD PREFERENCES SUB-FIELD^^3^4
"^DD",115,115.09,0,"DT")
2950407
"^DD",115,115.09,0,"IX","B",115.09,.01)

"^DD",115,115.09,0,"IX","C",115.09,1)

"^DD",115,115.09,0,"NM","FOOD PREFERENCES")

"^DD",115,115.09,0,"UP")
115
"^DD",115,115.09,.01,0)
FOOD PREFERENCES^MP115.2'^FH(115.2,^0;1^Q
"^DD",115,115.09,.01,1,0)
^.1
"^DD",115,115.09,.01,1,1,0)
115.09^B
"^DD",115,115.09,.01,1,1,1)
S ^FHPT(DA(1),"P","B",$E(X,1,30),DA)=""
"^DD",115,115.09,.01,1,1,2)
K ^FHPT(DA(1),"P","B",$E(X,1,30),DA)
"^DD",115,115.09,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.09,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the FOOD PREFERENCES field.
"^DD",115,115.09,.01,21,0)
^^2^2^2881201^^
"^DD",115,115.09,.01,21,1,0)
This field contains the food preference selected from the
"^DD",115,115.09,.01,21,2,0)
Food Preferences file (115.2).
"^DD",115,115.09,.01,"DT")
2880831
"^DD",115,115.09,1,0)
MEALS^RFX^^0;2^S:$P("ALL",X,1)="" X="BNE" S %=X,X="" S:%["B" X="B" S:%["N" X=X_"N" S:%["E" X=X_"E" K:$L(%)'=$L(X) X K %
"^DD",115,115.09,1,1,0)
^.1
"^DD",115,115.09,1,1,1,0)
115.09^C
"^DD",115,115.09,1,1,1,1)
S ^FHPT(DA(1),"P","C",$E(X,1,30),DA)=""
"^DD",115,115.09,1,1,1,2)
K ^FHPT(DA(1),"P","C",$E(X,1,30),DA)
"^DD",115,115.09,1,1,1,"%D",0)
^^1^1^3030623^
"^DD",115,115.09,1,1,1,"%D",1,0)
Cross reference by meals so that they can be displayed by meal.
"^DD",115,115.09,1,1,1,"DT")
3030623
"^DD",115,115.09,1,3)
Answer should be a string of meals (e.g., B  or BN or BNE) or A for all meals
"^DD",115,115.09,1,21,0)
^^2^2^2950418^^^^
"^DD",115,115.09,1,21,1,0)
This field contains the meals (B N and E) for which this food
"^DD",115,115.09,1,21,2,0)
preference is applicable.
"^DD",115,115.09,1,22)

"^DD",115,115.09,1,"DT")
3030623
"^DD",115,115.09,2,0)
QUANTITY^NJ1,0^^0;3^K:+X'=X!(X>9)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.09,2,3)
Type a Number between 1 and 9, 0 Decimal Digits
"^DD",115,115.09,2,21,0)
^^2^2^2920220^
"^DD",115,115.09,2,21,1,0)
This is the quantity of the Food Preference applicable to this
"^DD",115,115.09,2,21,2,0)
patient.
"^DD",115,115.09,2,"DT")
2920103
"^DD",115,115.09,3,0)
DIET ASSOCIATED?^S^Y:YES;N:NO;^0;4^Q
"^DD",115,115.09,3,21,0)
^^3^3^2950407^
"^DD",115,115.09,3,21,1,0)
This field, if answered Yes, means this Food Preference is a Diet
"^DD",115,115.09,3,21,2,0)
restriction that is associated with a diet order else if answered No,
"^DD",115,115.09,3,21,3,0)
means it is not.
"^DD",115,115.09,3,"DT")
2950407
"^DD",115,115.1,0)
TF PRODUCT SUB-FIELD^^5^6
"^DD",115,115.1,0,"DT")
2950926
"^DD",115,115.1,0,"IX","B",115.1,.01)

"^DD",115,115.1,0,"NM","TF PRODUCT")

"^DD",115,115.1,0,"UP")
115.04
"^DD",115,115.1,.01,0)
TF PRODUCT^MRP118.2'^FH(118.2,^0;1^Q
"^DD",115,115.1,.01,1,0)
^.1
"^DD",115,115.1,.01,1,1,0)
115.1^B
"^DD",115,115.1,.01,1,1,1)
S ^FHPT(DA(3),"A",DA(2),"TF",DA(1),"P","B",$E(X,1,30),DA)=""
"^DD",115,115.1,.01,1,1,2)
K ^FHPT(DA(3),"A",DA(2),"TF",DA(1),"P","B",$E(X,1,30),DA)
"^DD",115,115.1,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.1,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the TF PRODUCT field.
"^DD",115,115.1,.01,1,1,"DT")
2910307
"^DD",115,115.1,.01,3)

"^DD",115,115.1,.01,21,0)
^^1^1^2920312^^^^
"^DD",115,115.1,.01,21,1,0)
This field contains the tubefeeding product to be administered.
"^DD",115,115.1,.01,"DT")
2910307
"^DD",115,115.1,1,0)
STRENGTH^RS^1:1/4;2:1/2;3:3/4;4:FULL;^0;2^Q
"^DD",115,115.1,1,3)

"^DD",115,115.1,1,21,0)
^^3^3^2920818^^^^
"^DD",115,115.1,1,21,1,0)
This field contains the quantity of the tubefeeding and may
"^DD",115,115.1,1,21,2,0)
be expressed in Kilocalories per day, cc's per hour, or
"^DD",115,115.1,1,21,3,0)
similar rates.
"^DD",115,115.1,1,"DT")
2910307
"^DD",115,115.1,2,0)
QUANTITY^RF^^0;3^K:$L(X)>50!($L(X)<3) X
"^DD",115,115.1,2,3)
Answer must be 3-50 characters in length.
"^DD",115,115.1,2,21,0)
^^2^2^2911204^^^^
"^DD",115,115.1,2,21,1,0)
This field contains the strength of the tubefeeding product
"^DD",115,115.1,2,21,2,0)
and the degree, if any, of dilution.
"^DD",115,115.1,2,"DT")
2950926
"^DD",115,115.1,3,0)
PRODUCT CC'S/DAY^NJ5,0^^0;4^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.1,3,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.1,3,21,0)
^^2^2^2911204^
"^DD",115,115.1,3,21,1,0)
This is the number of cc's of the TF product which are contained in
"^DD",115,115.1,3,21,2,0)
the order for a day (or less than a day if so indicated).
"^DD",115,115.1,3,"DT")
2910312
"^DD",115,115.1,4,0)
WATER CC'S/DAY^NJ5,0^^0;5^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.1,4,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.1,4,21,0)
^^2^2^2911204^
"^DD",115,115.1,4,21,1,0)
This is the number of cc's of water to be used to dilute the TF product
"^DD",115,115.1,4,21,2,0)
if indicated.
"^DD",115,115.1,4,"DT")
2910312
"^DD",115,115.1,5,0)
KCALS/DAY^NJ5,0^^0;6^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.1,5,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.1,5,21,0)
^^1^1^2911204^
"^DD",115,115.1,5,21,1,0)
This is the number of Kcal's contained in this TF product as prepared.
"^DD",115,115.1,5,"DT")
2910401
"^DD",115,115.11,0)
Monitors SUB-FIELD^^5^5
"^DD",115,115.11,0,"DT")
3010119
"^DD",115,115.11,0,"IX","AC",115.11,1)

"^DD",115,115.11,0,"IX","B",115.11,.01)

"^DD",115,115.11,0,"NM","Monitors")

"^DD",115,115.11,0,"UP")
115.01
"^DD",115,115.11,.01,0)
Monitors^F^^0;1^K:$L(X)>60!($L(X)<3) X
"^DD",115,115.11,.01,1,0)
^.1
"^DD",115,115.11,.01,1,1,0)
115.11^B
"^DD",115,115.11,.01,1,1,1)
S ^FHPT(DA(2),"A",DA(1),"MO","B",$E(X,1,30),DA)=""
"^DD",115,115.11,.01,1,1,2)
K ^FHPT(DA(2),"A",DA(1),"MO","B",$E(X,1,30),DA)
"^DD",115,115.11,.01,3)
Answer must be 3-60 characters in length.
"^DD",115,115.11,.01,21,0)
^^2^2^3010119^
"^DD",115,115.11,.01,21,1,0)
This field contains Performance Monitors occurring during
"^DD",115,115.11,.01,21,2,0)
this admission.
"^DD",115,115.11,.01,"DT")
3010119
"^DD",115,115.11,1,0)
DATE/TIME^RD^^0;2^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.11,1,1,0)
^.1
"^DD",115,115.11,1,1,1,0)
115.11^AC
"^DD",115,115.11,1,1,1,1)
S ^FHPT(DA(2),"A",DA(1),"MO","AC",$E(X,1,30),DA)=""
"^DD",115,115.11,1,1,1,2)
K ^FHPT(DA(2),"A",DA(1),"MO","AC",$E(X,1,30),DA)
"^DD",115,115.11,1,1,1,"%D",0)
^^1^1^3010313^
"^DD",115,115.11,1,1,1,"%D",1,0)
This cross-reference allows monitors to be retrieved in date/time order.
"^DD",115,115.11,1,1,1,"DT")
3010313
"^DD",115,115.11,1,21,0)
^^1^1^3010119^
"^DD",115,115.11,1,21,1,0)
|TAB|This is the date/time the monitor was entered.
"^DD",115,115.11,1,"DT")
3010313
"^DD",115,115.11,2,0)
COMMENT^F^^0;3^K:$L(X)>60!($L(X)<3) X
"^DD",115,115.11,2,3)
Answer must be 3-60 characters in length.
"^DD",115,115.11,2,21,0)
^^2^2^3010119^
"^DD",115,115.11,2,21,1,0)
This is a comment entered by the person clearing the monitor.
"^DD",115,115.11,2,21,2,0)
It should reflect the action taken.
"^DD",115,115.11,2,"DT")
3010119
"^DD",115,115.11,3,0)
CLEARED BY^P200'^VA(200,^0;4^Q
"^DD",115,115.11,3,21,0)
^^1^1^3010119^
"^DD",115,115.11,3,21,1,0)
This is a pointer to the person clearing the monitor.
"^DD",115,115.11,3,"DT")
3010119
"^DD",115,115.11,5,0)
DATE/TIME CLEARED^D^^0;5^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.11,5,21,0)
^^1^1^3010119^
"^DD",115,115.11,5,21,1,0)
This is the date/time the monitor was cleared.
"^DD",115,115.11,5,"DT")
3010119
"^DD",115,115.1171,0)
COMMENTS SUB-FIELD^^.01^1
"^DD",115,115.1171,0,"NM","COMMENTS")

"^DD",115,115.1171,0,"UP")
115.011
"^DD",115,115.1171,.01,0)
COMMENTS^W^^0;1^Q
"^DD",115,115.1171,.01,21,0)
^^2^2^2891121^
"^DD",115,115.1171,.01,21,1,0)
This is the text of the comments relating to the
"^DD",115,115.1171,.01,21,2,0)
nutrition assessment.
"^DD",115,115.1171,.01,"DT")
2890616
"^DD",115,115.14,0)
DIET SEQUENCE SUB-FIELD^^1^2
"^DD",115,115.14,0,"NM","DIET SEQUENCE")

"^DD",115,115.14,0,"UP")
115.01
"^DD",115,115.14,.01,0)
DIET SEQUENCE DATE/TIME^DIX^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X I $D(X) S DINUM=X
"^DD",115,115.14,.01,3)

"^DD",115,115.14,.01,21,0)
^^3^3^2880710^
"^DD",115,115.14,.01,21,1,0)
This field is the date/time that a diet order is to take effect;
"^DD",115,115.14,.01,21,2,0)
the order will remain in effect until the following date/time
"^DD",115,115.14,.01,21,3,0)
sequence entry.
"^DD",115,115.14,.01,"DT")
2880521
"^DD",115,115.14,1,0)
DIET ORDER #^RNJ5,0I^^0;2^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.14,1,3)
Type a Number between 1 and 99999, 0 Decimal Digits
"^DD",115,115.14,1,21,0)
^^2^2^2880710^
"^DD",115,115.14,1,21,1,0)
This is the order number, in Field 3, of the diet order that is
"^DD",115,115.14,1,21,2,0)
to become effective at the indicated date/time.
"^DD",115,115.14,1,"DT")
2880521
"^DD",115,115.1619,0)
TUBEFEEDING PRODUCT SUB-FIELD^^5^6
"^DD",115,115.1619,0,"DT")
3030606
"^DD",115,115.1619,0,"IX","B",115.1619,.01)

"^DD",115,115.1619,0,"NM","TUBEFEEDING PRODUCT")

"^DD",115,115.1619,0,"UP")
115.016
"^DD",115,115.1619,.01,0)
TUBEFEEDING PRODUCT^MP118.2'^FH(118.2,^0;1^Q
"^DD",115,115.1619,.01,1,0)
^.1
"^DD",115,115.1619,.01,1,1,0)
115.1619^B
"^DD",115,115.1619,.01,1,1,1)
S ^FHPT(DA(2),"OP",DA(1),"TF","B",$E(X,1,30),DA)=""
"^DD",115,115.1619,.01,1,1,2)
K ^FHPT(DA(2),"OP",DA(1),"TF","B",$E(X,1,30),DA)
"^DD",115,115.1619,.01,21,0)
^.001^1^1^3030606^^^
"^DD",115,115.1619,.01,21,1,0)
This multiple stores the tubefeeding product(s) for the recurring meal.
"^DD",115,115.1619,.01,"DT")
3030606
"^DD",115,115.1619,1,0)
STRENGTH^S^1:1/4;2:1/2;3:3/4;4:FULL;^0;2^Q
"^DD",115,115.1619,1,21,0)
^.001^1^1^3030606^^
"^DD",115,115.1619,1,21,1,0)
This field stores the strength of the tubefeeding for the recurring meal.
"^DD",115,115.1619,1,"DT")
3030606
"^DD",115,115.1619,2,0)
QUANTITY^F^^0;3^K:$L(X)>20!($L(X)<3) X
"^DD",115,115.1619,2,3)
Answer must be 3-20 characters in length.
"^DD",115,115.1619,2,21,0)
^^1^1^3030606^
"^DD",115,115.1619,2,21,1,0)
This field stores the quantity of the tubefeeding for the recurring meal.
"^DD",115,115.1619,2,"DT")
3030606
"^DD",115,115.1619,3,0)
PRODUCT CC'S/DAY^NJ4,0^^0;4^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1619,3,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.1619,3,21,0)
^.001^2^2^3030606^^^
"^DD",115,115.1619,3,21,1,0)
This field stores the product cc's per day of this tubefeeding product
"^DD",115,115.1619,3,21,2,0)
for the recurring meal.
"^DD",115,115.1619,3,"DT")
3030606
"^DD",115,115.1619,4,0)
WATER CC'S/DAY^NJ4,0^^0;5^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1619,4,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.1619,4,21,0)
^.001^2^2^3030606^^
"^DD",115,115.1619,4,21,1,0)
This field stores the water cc's per day of this tubefeeding product
"^DD",115,115.1619,4,21,2,0)
for the recurring meal.
"^DD",115,115.1619,4,"DT")
3030606
"^DD",115,115.1619,5,0)
KCALS/DAY^NJ4,0^^0;6^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1619,5,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.1619,5,21,0)
^.001^2^2^3030606^^
"^DD",115,115.1619,5,21,1,0)
This field stores the kcals per day of this tubefeeding product
"^DD",115,115.1619,5,21,2,0)
for the recurring meal.
"^DD",115,115.1619,5,"DT")
3030606
"^DD",115.2,115.2,0)
FIELD^^99^7
"^DD",115.2,115.2,0,"DT")
2940225
"^DD",115.2,115.2,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",115.2,115.2,0,"IX","AC",115.2,99)

"^DD",115.2,115.2,0,"IX","AD",115.2,1)

"^DD",115.2,115.2,0,"IX","B",115.2,.01)

"^DD",115.2,115.2,0,"NM","FOOD PREFERENCES")

"^DD",115.2,115.2,0,"PT",111.119,.01)

"^DD",115.2,115.2,0,"PT",115.09,.01)

"^DD",115.2,115.2,0,"SCR")
I '$D(^FH(115.2,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",115.2,115.2,0,"VRPK")
FH
"^DD",115.2,115.2,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",115.2,115.2,.01,1,0)
^.1
"^DD",115.2,115.2,.01,1,1,0)
115.2^B
"^DD",115.2,115.2,.01,1,1,1)
S ^FH(115.2,"B",$E(X,1,30),DA)=""
"^DD",115.2,115.2,.01,1,1,2)
K ^FH(115.2,"B",$E(X,1,30),DA)
"^DD",115.2,115.2,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115.2,115.2,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",115.2,115.2,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",115.2,115.2,.01,21,0)
^^2^2^2880901^
"^DD",115.2,115.2,.01,21,1,0)
This field contains the name of a selectable food preference, such
"^DD",115.2,115.2,.01,21,2,0)
as coffee or tea, or a generic preference, such as 'no liver'.
"^DD",115.2,115.2,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",115.2,115.2,1,0)
LIKE OR DISLIKE^RS^L:LIKE;D:DISLIKE;^0;2^Q
"^DD",115.2,115.2,1,1,0)
^.1
"^DD",115.2,115.2,1,1,1,0)
115.2^AD^MUMPS
"^DD",115.2,115.2,1,1,1,1)
K:X="L" ^FH(115.2,DA,"X") S:X="D" $P(^FH(115.2,DA,0),"^",4,6)="^^"
"^DD",115.2,115.2,1,1,1,2)
Q
"^DD",115.2,115.2,1,1,1,"DT")
3000914
"^DD",115.2,115.2,1,21,0)
^^2^2^2880913^^
"^DD",115.2,115.2,1,21,1,0)
This field indicates whether the item is a selectable item or
"^DD",115.2,115.2,1,21,2,0)
a food preference.
"^DD",115.2,115.2,1,"DT")
2880913
"^DD",115.2,115.2,3,0)
RECIPE^P114'^FH(114,^0;4^Q
"^DD",115.2,115.2,3,21,0)
^^2^2^2910506^^
"^DD",115.2,115.2,3,21,1,0)
In the case of a selectable item, this field points to the selection
"^DD",115.2,115.2,3,21,2,0)
in the Recipe file (114).
"^DD",115.2,115.2,10,0)
EXCLUDED RECIPES^115.21P^^X;0
"^DD",115.2,115.2,10,21,0)
^^3^3^2910506^^
"^DD",115.2,115.2,10,21,1,0)
In the case of a food preference, this multiple is the list of
"^DD",115.2,115.2,10,21,2,0)
excluded recipes contained in the Recipe file (114) which should
"^DD",115.2,115.2,10,21,3,0)
NOT be served to the patient.
"^DD",115.2,115.2,20,0)
BREAD/BEVERAGE DEFAULT?^S^1:YES;0:NO;^0;5^Q
"^DD",115.2,115.2,20,21,0)
^^3^3^2940419^^^^
"^DD",115.2,115.2,20,21,1,0)
This field, if answered Yes, means this food preference is the standard
"^DD",115.2,115.2,20,21,2,0)
default bread/beverage for the patients on the tray tickets else if
"^DD",115.2,115.2,20,21,3,0)
answered No, means it is not.
"^DD",115.2,115.2,20,"DT")
2940419
"^DD",115.2,115.2,21,0)
MEALS^FX^^0;6^S:$P("ALL",X,1)="" X="BNE" S %=X,X="" S:%["B" X="B" S:%["N" X=X_"N" S:%["E" X=X_"E" K:$L(%)'=$L(X) X K %
"^DD",115.2,115.2,21,3)
Answer should be a string of meals (e.g., B or BN or BNE) or A for all meals.
"^DD",115.2,115.2,21,21,0)
^^2^2^2940225^
"^DD",115.2,115.2,21,21,1,0)
This field contains the meals (B N and E) for which this standard
"^DD",115.2,115.2,21,21,2,0)
default food preference is applicable.
"^DD",115.2,115.2,21,"DT")
2940225
"^DD",115.2,115.2,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",115.2,115.2,99,1,0)
^.1
"^DD",115.2,115.2,99,1,1,0)
115.2^AC^MUMPS
"^DD",115.2,115.2,99,1,1,1)
K:X'="Y" ^FH(115.2,DA,"I")
"^DD",115.2,115.2,99,1,1,2)
K ^FH(115.2,DA,"I")
"^DD",115.2,115.2,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",115.2,115.2,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",115.2,115.2,99,1,1,"%D",2,0)
inactive entries.
"^DD",115.2,115.2,99,21,0)
^^2^2^2940225^^
"^DD",115.2,115.2,99,21,1,0)
This field, if answered YES, will prohibit further selection
"^DD",115.2,115.2,99,21,2,0)
of this preference unless the FHMGR key is held.
"^DD",115.2,115.2,99,"DT")
2900918
"^DD",115.2,115.21,0)
EXCLUDED RECIPES SUB-FIELD^^.01^1
"^DD",115.2,115.21,0,"IX","B",115.21,.01)

"^DD",115.2,115.21,0,"NM","EXCLUDED RECIPES")

"^DD",115.2,115.21,0,"UP")
115.2
"^DD",115.2,115.21,.01,0)
EXCLUDED RECIPES^MP114'^FH(114,^0;1^Q
"^DD",115.2,115.21,.01,1,0)
^.1
"^DD",115.2,115.21,.01,1,1,0)
115.21^B
"^DD",115.2,115.21,.01,1,1,1)
S ^FH(115.2,DA(1),"X","B",$E(X,1,30),DA)=""
"^DD",115.2,115.21,.01,1,1,2)
K ^FH(115.2,DA(1),"X","B",$E(X,1,30),DA)
"^DD",115.2,115.21,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115.2,115.21,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the EXCLUDED RECIPES field.
"^DD",115.2,115.21,.01,21,0)
^^3^3^2880901^
"^DD",115.2,115.21,.01,21,1,0)
This field is a pointer to the Recipe file (114) and is a recipe
"^DD",115.2,115.21,.01,21,2,0)
which should NOT be served to patients expressing this food
"^DD",115.2,115.21,.01,21,3,0)
preference.
"^DD",115.3,115.3,0)
FIELD^^101^3
"^DD",115.3,115.3,0,"DT")
2920501
"^DD",115.3,115.3,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",115.3,115.3,0,"IX","AC",115.3,99)

"^DD",115.3,115.3,0,"IX","B",115.3,.01)

"^DD",115.3,115.3,0,"IX","C",115.3,101)

"^DD",115.3,115.3,0,"NM","NUTRITION CLASSIFICATION")

"^DD",115.3,115.3,0,"PT",115.011,19)

"^DD",115.3,115.3,0,"SCR")
I '$D(^FH(115.3,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",115.3,115.3,0,"VRPK")
FH
"^DD",115.3,115.3,.01,0)
NAME^RF^^0;1^K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X
"^DD",115.3,115.3,.01,1,0)
^.1
"^DD",115.3,115.3,.01,1,1,0)
115.3^B
"^DD",115.3,115.3,.01,1,1,1)
S ^FH(115.3,"B",$E(X,1,30),DA)=""
"^DD",115.3,115.3,.01,1,1,2)
K ^FH(115.3,"B",$E(X,1,30),DA)
"^DD",115.3,115.3,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115.3,115.3,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",115.3,115.3,.01,1,2,0)
^^TRIGGER^115.3^101
"^DD",115.3,115.3,.01,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^FH(115.3,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y X ^DD(115.3,.01,1,2,1.1) X ^DD(115.3,.01,1,2,1.4)
"^DD",115.3,115.3,.01,1,2,1.1)
S X=DIV S X=DIV X "F %=1:1:$L(X) S:$E(X,%)?1L X=$E(X,0,%-1)_$C($A(X,%)-32)_$E(X,%+1,999)" S X=X,Y(1)=X S X=1,Y(2)=X S X=30,X=$E(Y(1),Y(2),X)
"^DD",115.3,115.3,.01,1,2,1.4)
S DIH=$S($D(^FH(115.3,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,2)=DIV,DIH=115.3,DIG=101 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",115.3,115.3,.01,1,2,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^FH(115.3,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X="" X ^DD(115.3,.01,1,2,2.4)
"^DD",115.3,115.3,.01,1,2,2.4)
S DIH=$S($D(^FH(115.3,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,2)=DIV,DIH=115.3,DIG=101 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",115.3,115.3,.01,1,2,"CREATE VALUE")
$E(UPPERCASE(NAME),1,30)
"^DD",115.3,115.3,.01,1,2,"DELETE VALUE")
@
"^DD",115.3,115.3,.01,1,2,"FIELD")
UPPERCASE NAME
"^DD",115.3,115.3,.01,3)
Answer must be 3-60 characters in length.
"^DD",115.3,115.3,.01,21,0)
^^1^1^2900713^^
"^DD",115.3,115.3,.01,21,1,0)
This field contains the name of a Dietetic Diagnosis.
"^DD",115.3,115.3,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",115.3,115.3,.01,"DT")
2900713
"^DD",115.3,115.3,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",115.3,115.3,99,1,0)
^.1
"^DD",115.3,115.3,99,1,1,0)
115.3^AC^MUMPS
"^DD",115.3,115.3,99,1,1,1)
K:X'="Y" ^FH(115.3,DA,"I")
"^DD",115.3,115.3,99,1,1,2)
K ^FH(115.3,DA,"I")
"^DD",115.3,115.3,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",115.3,115.3,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",115.3,115.3,99,1,1,"%D",2,0)
inactive entries.
"^DD",115.3,115.3,99,1,1,"DT")
2920501
"^DD",115.3,115.3,99,21,0)
^^2^2^2920501^
"^DD",115.3,115.3,99,21,1,0)
This field, if answered YES, will prohibit further selection
"^DD",115.3,115.3,99,21,2,0)
of this classification unless the FHMGR key is held.
"^DD",115.3,115.3,99,"DT")
2920501
"^DD",115.3,115.3,101,0)
UPPERCASE NAME^F^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<3) X
"^DD",115.3,115.3,101,1,0)
^.1
"^DD",115.3,115.3,101,1,1,0)
115.3^C
"^DD",115.3,115.3,101,1,1,1)
S ^FH(115.3,"C",$E(X,1,30),DA)=""
"^DD",115.3,115.3,101,1,1,2)
K ^FH(115.3,"C",$E(X,1,30),DA)
"^DD",115.3,115.3,101,3)
Answer must be 3-30 characters in length.
"^DD",115.3,115.3,101,5,1,0)
115.3^.01^2
"^DD",115.3,115.3,101,9)
^
"^DD",115.3,115.3,101,21,0)
^^1^1^2950613^^^
"^DD",115.3,115.3,101,21,1,0)
This is the name of the entry in uppercase text.
"^DD",115.3,115.3,101,"DT")
2891112
"^DD",115.4,115.4,0)
FIELD^^101^4
"^DD",115.4,115.4,0,"DDA")
N
"^DD",115.4,115.4,0,"DT")
2920106
"^DD",115.4,115.4,0,"ID","WRIT")
D EN^DDIOL($P(^(0),U,2),"","?3")
"^DD",115.4,115.4,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",115.4,115.4,0,"IX","AC",115.4,99)

"^DD",115.4,115.4,0,"IX","B",115.4,.01)

"^DD",115.4,115.4,0,"IX","C",115.4,101)

"^DD",115.4,115.4,0,"IX","D",115.4,1)

"^DD",115.4,115.4,0,"NM","NUTRITION STATUS")

"^DD",115.4,115.4,0,"PT",115.011,18)

"^DD",115.4,115.4,0,"PT",115.012,1)

"^DD",115.4,115.4,0,"SCR")
I '$D(^FH(115.4,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",115.4,115.4,0,"VRPK")
FH
"^DD",115.4,115.4,.01,0)
CATEGORY^RF^^0;1^K:$L(X)>3!($L(X)<1)!'(X'?1P.E) X
"^DD",115.4,115.4,.01,1,0)
^.1^^-1
"^DD",115.4,115.4,.01,1,1,0)
115.4^B
"^DD",115.4,115.4,.01,1,1,1)
S ^FH(115.4,"B",$E(X,1,30),DA)=""
"^DD",115.4,115.4,.01,1,1,2)
K ^FH(115.4,"B",$E(X,1,30),DA)
"^DD",115.4,115.4,.01,1,1,"%D",0)
^^1^1^2950405^^
"^DD",115.4,115.4,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the CATEGORY field.
"^DD",115.4,115.4,.01,3)
Answer must be 1-3 characters in length.
"^DD",115.4,115.4,.01,21,0)
^^1^1^2900203^^
"^DD",115.4,115.4,.01,21,1,0)
This field contains a nutrition status or risk category.
"^DD",115.4,115.4,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",115.4,115.4,.01,"DT")
2900203
"^DD",115.4,115.4,1,0)
STATUS TEXT (U/L CASE)^F^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<3) X
"^DD",115.4,115.4,1,1,0)
^.1
"^DD",115.4,115.4,1,1,1,0)
^^TRIGGER^115.4^101
"^DD",115.4,115.4,1,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^FH(115.4,D0,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y X ^DD(115.4,1,1,1,1.1) X ^DD(115.4,1,1,1,1.4)
"^DD",115.4,115.4,1,1,1,1.1)
S X=DIV S X=DIV X "F %=1:1:$L(X) S:$E(X,%)?1L X=$E(X,0,%-1)_$C($A(X,%)-32)_$E(X,%+1,999)" S X=X,Y(1)=X S X=1,Y(2)=X S X=30,X=$E(Y(1),Y(2),X)
"^DD",115.4,115.4,1,1,1,1.4)
S DIH=$S($D(^FH(115.4,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,3)=DIV,DIH=115.4,DIG=101 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",115.4,115.4,1,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^FH(115.4,D0,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X="" X ^DD(115.4,1,1,1,2.4)
"^DD",115.4,115.4,1,1,1,2.4)
S DIH=$S($D(^FH(115.4,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,3)=DIV,DIH=115.4,DIG=101 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",115.4,115.4,1,1,1,"CREATE VALUE")
$E(UPPERCASE(STATUS TEXT (U/L CASE)),1,30)
"^DD",115.4,115.4,1,1,1,"DELETE VALUE")
@
"^DD",115.4,115.4,1,1,1,"FIELD")
UPPER
"^DD",115.4,115.4,1,1,2,0)
115.4^D
"^DD",115.4,115.4,1,1,2,1)
S ^FH(115.4,"D",$E(X,1,30),DA)=""
"^DD",115.4,115.4,1,1,2,2)
K ^FH(115.4,"D",$E(X,1,30),DA)
"^DD",115.4,115.4,1,3)
Answer must be 3-30 characters in length.
"^DD",115.4,115.4,1,21,0)
^^2^2^2900403^^
"^DD",115.4,115.4,1,21,1,0)
This field contains the text name (upper/lower case) of a 
"^DD",115.4,115.4,1,21,2,0)
Nutrition Status or risk category.
"^DD",115.4,115.4,1,"DT")
2900403
"^DD",115.4,115.4,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",115.4,115.4,99,1,0)
^.1
"^DD",115.4,115.4,99,1,1,0)
115.4^AC^MUMPS
"^DD",115.4,115.4,99,1,1,1)
K:X'="Y" ^FH(115.4,DA,"I")
"^DD",115.4,115.4,99,1,1,2)
K ^FH(115.4,DA,"I")
"^DD",115.4,115.4,99,1,1,"%D",0)
^^2^2^3000202
"^DD",115.4,115.4,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",115.4,115.4,99,1,1,"%D",2,0)
inactive entries.
"^DD",115.4,115.4,99,21,0)
^^2^2^3000202
"^DD",115.4,115.4,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",115.4,115.4,99,21,2,0)
further selection of this entry.
"^DD",115.4,115.4,99,"DT")
3000223
"^DD",115.4,115.4,101,0)
UPPERCASE NAME^F^^0;3^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<3) X
"^DD",115.4,115.4,101,1,0)
^.1
"^DD",115.4,115.4,101,1,1,0)
115.4^C
"^DD",115.4,115.4,101,1,1,1)
S ^FH(115.4,"C",$E(X,1,30),DA)=""
"^DD",115.4,115.4,101,1,1,2)
K ^FH(115.4,"C",$E(X,1,30),DA)
"^DD",115.4,115.4,101,3)
Answer must be 3-30 characters in length.
"^DD",115.4,115.4,101,5,1,0)
115.4^1^1
"^DD",115.4,115.4,101,9)
^
"^DD",115.4,115.4,101,21,0)
^^1^1^2950613^^^^
"^DD",115.4,115.4,101,21,1,0)
This is the name of the status in uppercase text.
"^DD",115.4,115.4,101,"DT")
2891112
"^DD",115.5,115.5,0)
FIELD^^101^2
"^DD",115.5,115.5,0,"IX","B",115.5,.01)

"^DD",115.5,115.5,0,"IX","C",115.5,101)

"^DD",115.5,115.5,0,"NM","DIETETIC NUTRITION PLAN")

"^DD",115.5,115.5,.01,0)
NAME^RF^^0;1^K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X
"^DD",115.5,115.5,.01,1,0)
^.1
"^DD",115.5,115.5,.01,1,1,0)
115.5^B
"^DD",115.5,115.5,.01,1,1,1)
S ^FH(115.5,"B",$E(X,1,30),DA)=""
"^DD",115.5,115.5,.01,1,1,2)
K ^FH(115.5,"B",$E(X,1,30),DA)
"^DD",115.5,115.5,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115.5,115.5,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",115.5,115.5,.01,1,2,0)
^^TRIGGER^115.5^101
"^DD",115.5,115.5,.01,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^FH(115.5,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y X ^DD(115.5,.01,1,2,1.1) X ^DD(115.5,.01,1,2,1.4)
"^DD",115.5,115.5,.01,1,2,1.1)
S X=DIV S X=DIV X "F %=1:1:$L(X) S:$E(X,%)?1L X=$E(X,0,%-1)_$C($A(X,%)-32)_$E(X,%+1,999)" S X=X,Y(1)=X S X=1,Y(2)=X S X=30,X=$E(Y(1),Y(2),X)
"^DD",115.5,115.5,.01,1,2,1.4)
S DIH=$S($D(^FH(115.5,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,2)=DIV,DIH=115.5,DIG=101 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",115.5,115.5,.01,1,2,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^FH(115.5,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X="" X ^DD(115.5,.01,1,2,2.4)
"^DD",115.5,115.5,.01,1,2,2.4)
S DIH=$S($D(^FH(115.5,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,2)=DIV,DIH=115.5,DIG=101 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",115.5,115.5,.01,1,2,"CREATE VALUE")
$E(UPPERCASE(NAME),1,30)
"^DD",115.5,115.5,.01,1,2,"DELETE VALUE")
@
"^DD",115.5,115.5,.01,1,2,"FIELD")
UPPERCASE NAME
"^DD",115.5,115.5,.01,3)
Answer must be 3-60 characters in length.
"^DD",115.5,115.5,.01,21,0)
^^1^1^2950717^^^
"^DD",115.5,115.5,.01,21,1,0)
This is the text name of the nutrition plan entry.
"^DD",115.5,115.5,.01,"DT")
2891208
"^DD",115.5,115.5,101,0)
UPPERCASE NAME^F^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<3) X
"^DD",115.5,115.5,101,1,0)
^.1
"^DD",115.5,115.5,101,1,1,0)
115.5^C
"^DD",115.5,115.5,101,1,1,1)
S ^FH(115.5,"C",$E(X,1,30),DA)=""
"^DD",115.5,115.5,101,1,1,2)
K ^FH(115.5,"C",$E(X,1,30),DA)
"^DD",115.5,115.5,101,3)
Answer must be 3-30 characters in length.
"^DD",115.5,115.5,101,5,1,0)
115.5^.01^2
"^DD",115.5,115.5,101,9)
^
"^DD",115.5,115.5,101,21,0)
^^1^1^2950613^^^
"^DD",115.5,115.5,101,21,1,0)
This is the text of the plan entry in uppercase text.
"^DD",115.5,115.5,101,"DT")
2891112
"^DD",115.6,115.6,0)
FIELD^^101^11
"^DD",115.6,115.6,0,"DDA")
N
"^DD",115.6,115.6,0,"DT")
2920116
"^DD",115.6,115.6,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",115.6,115.6,0,"IX","AC",115.6,99)

"^DD",115.6,115.6,0,"IX","AX",115.6,101)

"^DD",115.6,115.6,0,"IX","B",115.6,.01)

"^DD",115.6,115.6,0,"NM","ENCOUNTER TYPES")

"^DD",115.6,115.6,0,"PT",115.7,3)

"^DD",115.6,115.6,0,"SCR")
I '$D(^FH(115.6,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",115.6,115.6,0,"VRPK")
FH
"^DD",115.6,115.6,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",115.6,115.6,.01,1,0)
^.1
"^DD",115.6,115.6,.01,1,1,0)
115.6^B
"^DD",115.6,115.6,.01,1,1,1)
S ^FH(115.6,"B",$E(X,1,30),DA)=""
"^DD",115.6,115.6,.01,1,1,2)
K ^FH(115.6,"B",$E(X,1,30),DA)
"^DD",115.6,115.6,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115.6,115.6,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",115.6,115.6,.01,3)
Answer must be 3-30 characters in length.
"^DD",115.6,115.6,.01,21,0)
^^1^1^2891121^
"^DD",115.6,115.6,.01,21,1,0)
This is the text of the name of the encounter type.
"^DD",115.6,115.6,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",115.6,115.6,.01,"DT")
2920116
"^DD",115.6,115.6,2,0)
INITIAL TIME^NJ3,0^^0;3^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",115.6,115.6,2,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",115.6,115.6,2,21,0)
^^1^1^2900112^^
"^DD",115.6,115.6,2,21,1,0)
This is the time units for an initial encounter of this type.
"^DD",115.6,115.6,2,"DT")
2900112
"^DD",115.6,115.6,3,0)
FOLLOW-UP TIME^NJ3,0^^0;4^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",115.6,115.6,3,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",115.6,115.6,3,21,0)
^^2^2^2891121^
"^DD",115.6,115.6,3,21,1,0)
This value, if defined, is the time units for a follow-up
"^DD",115.6,115.6,3,21,2,0)
encounter of this type.
"^DD",115.6,115.6,3,"DT")
2891107
"^DD",115.6,115.6,4,0)
ASK EVENT LOCATION?^S^Y:YES;N:NO;^0;5^Q
"^DD",115.6,115.6,4,21,0)
^^3^3^2891121^
"^DD",115.6,115.6,4,21,1,0)
This field, if YES, means that the event location will be asked
"^DD",115.6,115.6,4,21,2,0)
whenever an encounter of this type is entered into the
"^DD",115.6,115.6,4,21,3,0)
Encounter file (115.7).
"^DD",115.6,115.6,4,"DT")
2891107
"^DD",115.6,115.6,5,0)
INDIVIDUAL/GROUP/BOTH^S^I:INDIVIDUAL;G:GROUP;B:BOTH;^0;6^Q
"^DD",115.6,115.6,5,21,0)
^^2^2^2891121^
"^DD",115.6,115.6,5,21,1,0)
This field indicates whether the encounter type is an individual one,
"^DD",115.6,115.6,5,21,2,0)
a group one, or can be both.
"^DD",115.6,115.6,5,"DT")
2891107
"^DD",115.6,115.6,6,0)
ASK PATIENT NAME(S)?^S^Y:YES;N:NO;^0;7^Q
"^DD",115.6,115.6,6,21,0)
^^3^3^2891121^
"^DD",115.6,115.6,6,21,1,0)
This field, if answered YES, means that the clinician will be
"^DD",115.6,115.6,6,21,2,0)
prompted for patient names when an encounter of this type
"^DD",115.6,115.6,6,21,3,0)
is entered into the Encounter file (115.7).
"^DD",115.6,115.6,6,"DT")
2891107
"^DD",115.6,115.6,7,0)
ASK # COLLATERALS^S^Y:YES;N:NO;^0;8^Q
"^DD",115.6,115.6,7,21,0)
^^4^4^2891121^
"^DD",115.6,115.6,7,21,1,0)
This field, if answered YES, means that the clinician will be
"^DD",115.6,115.6,7,21,2,0)
prompted for the number of collaterals associated with each
"^DD",115.6,115.6,7,21,3,0)
patient when an encounter of this type is entered into the
"^DD",115.6,115.6,7,21,4,0)
Encounter file (115.7).
"^DD",115.6,115.6,7,"DT")
2891107
"^DD",115.6,115.6,8,0)
ASK FOR PATIENT COMMENT?^S^Y:YES;N:NO;^0;9^Q
"^DD",115.6,115.6,8,21,0)
^^4^4^2891121^
"^DD",115.6,115.6,8,21,1,0)
This field, if answered YES, means that the clinician will be
"^DD",115.6,115.6,8,21,2,0)
prompted for a comment to be associated with each patient
"^DD",115.6,115.6,8,21,3,0)
when an encounter of this type is entered into the
"^DD",115.6,115.6,8,21,4,0)
Encounter file (115.7).
"^DD",115.6,115.6,8,"DT")
2891107
"^DD",115.6,115.6,10,0)
CATEGORY^S^S:Screening;A:Assessment;E:Pat. Education;C:Community;N:Nutrition Inv.;F:Food Svc.;X:Administrative;^0;2^Q
"^DD",115.6,115.6,10,21,0)
^^1^1^2920107^^
"^DD",115.6,115.6,10,21,1,0)
The is the category of the Encounter Type.
"^DD",115.6,115.6,10,"DT")
2920107
"^DD",115.6,115.6,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",115.6,115.6,99,1,0)
^.1
"^DD",115.6,115.6,99,1,1,0)
115.6^AC^MUMPS
"^DD",115.6,115.6,99,1,1,1)
K:X'="Y" ^FH(115.6,DA,"I")
"^DD",115.6,115.6,99,1,1,2)
K ^FH(115.6,DA,"I")
"^DD",115.6,115.6,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",115.6,115.6,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",115.6,115.6,99,1,1,"%D",2,0)
inactive entries.
"^DD",115.6,115.6,99,21,0)
^^2^2^2950221^^
"^DD",115.6,115.6,99,21,1,0)
This field, when answered YES, will prohibit further
"^DD",115.6,115.6,99,21,2,0)
selection of this encounter type by dietetic personnel.
"^DD",115.6,115.6,99,"DT")
2891107
"^DD",115.6,115.6,101,0)
IDENT NUMBER^NJ2,0^^0;10^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115.6,115.6,101,1,0)
^.1
"^DD",115.6,115.6,101,1,1,0)
115.6^AX
"^DD",115.6,115.6,101,1,1,1)
S ^FH(115.6,"AX",$E(X,1,30),DA)=""
"^DD",115.6,115.6,101,1,1,2)
K ^FH(115.6,"AX",$E(X,1,30),DA)
"^DD",115.6,115.6,101,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115.6,115.6,101,21,0)
^^3^3^2900929^
"^DD",115.6,115.6,101,21,1,0)
This field is pre-set for some encounter types to uniquely
"^DD",115.6,115.6,101,21,2,0)
identify them for tabulation and other purposes. The number has
"^DD",115.6,115.6,101,21,3,0)
no meaning.
"^DD",115.6,115.6,101,"DT")
2901001
"^DD",115.7,115.7,0)
FIELD^^11^16
"^DD",115.7,115.7,0,"DDA")
N
"^DD",115.7,115.7,0,"DT")
3030602
"^DD",115.7,115.7,0,"IX","AP",115.701,.01)

"^DD",115.7,115.7,0,"IX","AT",115.7,1)

"^DD",115.7,115.7,0,"IX","B",115.7,.01)

"^DD",115.7,115.7,0,"IX","CO",115.7,11)

"^DD",115.7,115.7,0,"NM","DIETETIC ENCOUNTERS")

"^DD",115.7,115.7,0,"VRPK")
FH
"^DD",115.7,115.7,.01,0)
NUMBER^RNJ9,0X^^0;1^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",115.7,115.7,.01,1,0)
^.1
"^DD",115.7,115.7,.01,1,1,0)
115.7^B
"^DD",115.7,115.7,.01,1,1,1)
S ^FHEN("B",$E(X,1,30),DA)=""
"^DD",115.7,115.7,.01,1,1,2)
K ^FHEN("B",$E(X,1,30),DA)
"^DD",115.7,115.7,.01,1,1,"%D",0)
^^1^1^2931221^^
"^DD",115.7,115.7,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NUMBER field.
"^DD",115.7,115.7,.01,3)
Type a Number between 1 and 999999999, 0 Decimal Digits
"^DD",115.7,115.7,.01,21,0)
^^2^2^2891121^
"^DD",115.7,115.7,.01,21,1,0)
This field contains a sequential number assigned to the encounter
"^DD",115.7,115.7,.01,21,2,0)
and has no meaning.
"^DD",115.7,115.7,.01,"DT")
2890719
"^DD",115.7,115.7,1,0)
DATE/TIME OF ENCOUNTER^RD^^0;2^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",115.7,115.7,1,1,0)
^.1
"^DD",115.7,115.7,1,1,1,0)
115.7^AT
"^DD",115.7,115.7,1,1,1,1)
S ^FHEN("AT",$E(X,1,30),DA)=""
"^DD",115.7,115.7,1,1,1,2)
K ^FHEN("AT",$E(X,1,30),DA)
"^DD",115.7,115.7,1,3)

"^DD",115.7,115.7,1,21,0)
^.001^2^2^3030602^^^
"^DD",115.7,115.7,1,21,1,0)
This field contains the date and time at which the dietetic encounter
"^DD",115.7,115.7,1,21,2,0)
took place.
"^DD",115.7,115.7,1,"DT")
2911016
"^DD",115.7,115.7,2,0)
CLINICIAN^RP200'^VA(200,^0;3^Q
"^DD",115.7,115.7,2,21,0)
^^2^2^2891120^
"^DD",115.7,115.7,2,21,1,0)
This field contains a pointer to the clinician who provided the
"^DD",115.7,115.7,2,21,2,0)
service during the encounter.
"^DD",115.7,115.7,2,"DT")
2890719
"^DD",115.7,115.7,3,0)
ENCOUNTER TYPE^RP115.6'^FH(115.6,^0;4^Q
"^DD",115.7,115.7,3,21,0)
^^2^2^2920716^^
"^DD",115.7,115.7,3,21,1,0)
This field contains a pointer to the Encounter Type file (115.6)
"^DD",115.7,115.7,3,21,2,0)
indicating the type of encounter.
"^DD",115.7,115.7,3,"DT")
2920716
"^DD",115.7,115.7,4,0)
EVENT LOCATION^P44'^SC(^0;5^Q
"^DD",115.7,115.7,4,21,0)
^^2^2^2891120^
"^DD",115.7,115.7,4,21,1,0)
This optional field contains a pointer to the Hospital Location
"^DD",115.7,115.7,4,21,2,0)
file (44) indicating where the encounter took place.
"^DD",115.7,115.7,4,"DT")
2891107
"^DD",115.7,115.7,5,0)
INITIAL/FOLLOWUP^S^I:INITIAL;F:FOLLOWUP;^0;7^Q
"^DD",115.7,115.7,5,21,0)
^^2^2^2920421^^
"^DD",115.7,115.7,5,21,1,0)
This field indicates whether the encounter was an initial one
"^DD",115.7,115.7,5,21,2,0)
of this type or a follow-up.
"^DD",115.7,115.7,5,"DT")
2890719
"^DD",115.7,115.7,6,0)
TIME UNITS^NJ3,0^^0;8^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115.7,115.7,6,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",115.7,115.7,6,21,0)
^^2^2^2891120^
"^DD",115.7,115.7,6,21,1,0)
This field contains the number of time units earned by this
"^DD",115.7,115.7,6,21,2,0)
encounter.
"^DD",115.7,115.7,6,"DT")
2890719
"^DD",115.7,115.7,7,0)
GROUP/INDIVIDUAL^S^G:GROUP;I:INDIVIDUAL;^0;9^Q
"^DD",115.7,115.7,7,21,0)
^^2^2^2891120^
"^DD",115.7,115.7,7,21,1,0)
This field indicates whether the encounter was a group one or
"^DD",115.7,115.7,7,21,2,0)
an encounter with a single individual.
"^DD",115.7,115.7,7,"DT")
2890719
"^DD",115.7,115.7,8,0)
GROUP SIZE^NJ4,0^^0;10^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115.7,115.7,8,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115.7,115.7,8,21,0)
^^2^2^2891120^
"^DD",115.7,115.7,8,21,1,0)
This field contains the total number of persons involved,
"^DD",115.7,115.7,8,21,2,0)
including any collaterals.
"^DD",115.7,115.7,8,"DT")
2890719
"^DD",115.7,115.7,10,0)
EVENT COMMENT^F^^0;11^K:$L(X)>60!($L(X)<3) X
"^DD",115.7,115.7,10,3)
Answer must be 3-60 characters in length.
"^DD",115.7,115.7,10,21,0)
^^1^1^2891120^
"^DD",115.7,115.7,10,21,1,0)
This field may contain a short comment concerning the event.
"^DD",115.7,115.7,10,"DT")
2891107
"^DD",115.7,115.7,11,0)
COMMUNICATIONS OFFICE^RP119.73'^FH(119.73,^0;6^Q
"^DD",115.7,115.7,11,1,0)
^.1
"^DD",115.7,115.7,11,1,1,0)
115.7^CO
"^DD",115.7,115.7,11,1,1,1)
S ^FHEN("CO",$E(X,1,30),DA)=""
"^DD",115.7,115.7,11,1,1,2)
K ^FHEN("CO",$E(X,1,30),DA)
"^DD",115.7,115.7,11,1,1,"%D",0)
^^1^1^3030318^
"^DD",115.7,115.7,11,1,1,"%D",1,0)
Used to print encounters within Communications Offices
"^DD",115.7,115.7,11,1,1,"DT")
3030318
"^DD",115.7,115.7,11,3)
Communications Office is a required entry
"^DD",115.7,115.7,11,"DT")
3030602
"^DD",115.7,115.7,20,0)
PATIENT^115.701PA^^P;0
"^DD",115.7,115.7,20,21,0)
^^2^2^2910813^^
"^DD",115.7,115.7,20,21,1,0)
This field is a multiple containing data relating to patients
"^DD",115.7,115.7,20,21,2,0)
involved in the encounter.
"^DD",115.7,115.7,101,0)
ENTERING CLERK^RP200'^VA(200,^0;13^Q
"^DD",115.7,115.7,101,21,0)
^^2^2^2891121^
"^DD",115.7,115.7,101,21,1,0)
This field is a pointer indicating the person making the
"^DD",115.7,115.7,101,21,2,0)
encounter entry.
"^DD",115.7,115.7,101,"DT")
2891108
"^DD",115.7,115.7,102,0)
DATE/TIME ENTERED^RD^^0;14^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115.7,115.7,102,21,0)
^^2^2^2891121^
"^DD",115.7,115.7,102,21,1,0)
This field contains the date/time the encounter was actually
"^DD",115.7,115.7,102,21,2,0)
entered.
"^DD",115.7,115.7,102,"DT")
2891108
"^DD",115.7,115.7,103,0)
LAST REVIEW DATE/TIME^D^^0;15^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",115.7,115.7,103,21,0)
^^1^1^2960716^^
"^DD",115.7,115.7,103,21,1,0)
This is the date/time that the encounter was last reviewed.
"^DD",115.7,115.7,103,"DT")
2960716
"^DD",115.7,115.7,104,0)
REVIEW CLERK^P200'^VA(200,^0;16^Q
"^DD",115.7,115.7,104,21,0)
^^1^1^2960716^
"^DD",115.7,115.7,104,21,1,0)
This is a pointer to File 200 of the person entering the review.
"^DD",115.7,115.7,104,"DT")
2960716
"^DD",115.7,115.701,0)
PATIENT SUB-FIELD^^3^4
"^DD",115.7,115.701,0,"IX","B",115.701,.01)

"^DD",115.7,115.701,0,"NM","PATIENT")

"^DD",115.7,115.701,0,"UP")
115.7
"^DD",115.7,115.701,.01,0)
PATIENT^MP2'X^DPT(^0;1^I $D(X) S DINUM=X
"^DD",115.7,115.701,.01,1,0)
^.1
"^DD",115.7,115.701,.01,1,1,0)
115.701^B
"^DD",115.7,115.701,.01,1,1,1)
S ^FHEN(DA(1),"P","B",$E(X,1,30),DA)=""
"^DD",115.7,115.701,.01,1,1,2)
K ^FHEN(DA(1),"P","B",$E(X,1,30),DA)
"^DD",115.7,115.701,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115.7,115.701,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the PATIENT field.
"^DD",115.7,115.701,.01,1,2,0)
115.7^AP^MUMPS
"^DD",115.7,115.701,.01,1,2,1)
S X1=$P(^FHEN(DA(1),0),"^",2) S:X1 ^FHEN("AP",X,X1,DA(1))=""
"^DD",115.7,115.701,.01,1,2,2)
S X1=$P(^FHEN(DA(1),0),"^",2) K:X1 ^FHEN("AP",X,X1,DA(1))
"^DD",115.7,115.701,.01,1,2,"%D",0)
2^^2^2^2940824^
"^DD",115.7,115.701,.01,1,2,"%D",1,0)
This cross-reference creates an 'AP' node of a patient by date/time
"^DD",115.7,115.701,.01,1,2,"%D",2,0)
cross-reference.
"^DD",115.7,115.701,.01,21,0)
^^2^2^2910813^^
"^DD",115.7,115.701,.01,21,1,0)
This field contains a pointer to the Patient file (2) and indicates
"^DD",115.7,115.701,.01,21,2,0)
a patient involved in the encounter.
"^DD",115.7,115.701,.01,"DT")
2891113
"^DD",115.7,115.701,1,0)
LOCATION^P44'^SC(^0;2^Q
"^DD",115.7,115.701,1,21,0)
^^3^3^2891121^
"^DD",115.7,115.701,1,21,1,0)
This field contains a pointer to the Hospital Location
"^DD",115.7,115.701,1,21,2,0)
(file 44) for the patient. It is the patient location rather
"^DD",115.7,115.701,1,21,3,0)
than the event location.
"^DD",115.7,115.701,1,"DT")
2890719
"^DD",115.7,115.701,2,0)
# COLLATERALS^NJ1,0^^0;3^K:+X'=X!(X>9)!(X<0)!(X?.E1"."1N.N) X
"^DD",115.7,115.701,2,3)
Type a Number between 0 and 9, 0 Decimal Digits
"^DD",115.7,115.701,2,21,0)
^^2^2^2891121^
"^DD",115.7,115.701,2,21,1,0)
This field contains the number of collaterals seen with the
"^DD",115.7,115.701,2,21,2,0)
patient.
"^DD",115.7,115.701,2,"DT")
2891107
"^DD",115.7,115.701,3,0)
PATIENT COMMENT^F^^0;4^K:$L(X)>60!($L(X)<3) X
"^DD",115.7,115.701,3,3)
Answer must be 3-60 characters in length.
"^DD",115.7,115.701,3,21,0)
^^2^2^2891121^
"^DD",115.7,115.701,3,21,1,0)
This field may be used for a patient-specific comment
"^DD",115.7,115.701,3,21,2,0)
concerning the encounter.
"^DD",115.7,115.701,3,"DT")
2891107
"^DD",116,116,0)
FIELD^^3^4
"^DD",116,116,0,"IX","AB",116.02,.01)

"^DD",116,116,0,"IX","B",116,.01)

"^DD",116,116,0,"NM","MENU CYCLE")

"^DD",116,116,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(+X=X)!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",116,116,.01,1,0)
^.1
"^DD",116,116,.01,1,1,0)
116^B
"^DD",116,116,.01,1,1,1)
S ^FH(116,"B",$E(X,1,30),DA)=""
"^DD",116,116,.01,1,1,2)
K ^FH(116,"B",$E(X,1,30),DA)
"^DD",116,116,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",116,116,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",116,116,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",116,116,.01,21,0)
^^2^2^2880710^
"^DD",116,116,.01,21,1,0)
This is the name of a menu cycle, and is often 'Summer
"^DD",116,116,.01,21,2,0)
cycle' or 'Winter cycle.'
"^DD",116,116,1,0)
DAY^116.01^^DA;0
"^DD",116,116,1,21,0)
^^2^2^2880710^
"^DD",116,116,1,21,1,0)
This field contains the day number within the cycle and is
"^DD",116,116,1,21,2,0)
therefore 1 to the number of days in the cycle.
"^DD",116,116,2,0)
NO. DAYS IN CYCLE^RNJ3,0^^0;2^K:+X'=X!(X>365)!(X<1)!(X?.E1"."1N.N) X
"^DD",116,116,2,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 365
"^DD",116,116,2,21,0)
^^3^3^2880710^
"^DD",116,116,2,21,1,0)
This is the number of days in the cycle, after which it will
"^DD",116,116,2,21,2,0)
repeat. The day numbers in the Day Field (Field 1) should
"^DD",116,116,2,21,3,0)
run from 1 to this number.
"^DD",116,116,2,"DT")
2851213
"^DD",116,116,3,0)
EFFECTIVE DATE^116.02D^^DT;0
"^DD",116,116,3,21,0)
^^4^4^2880710^
"^DD",116,116,3,21,1,0)
This multiple contains dates upon which this cycle will become
"^DD",116,116,3,21,2,0)
effective and will continue until superceded by the effective
"^DD",116,116,3,21,3,0)
date of this or another cycle. The date becomes Day 1 of the
"^DD",116,116,3,21,4,0)
selected cycle.
"^DD",116,116.01,0)
DAY SUB-FIELD^NL^3^4
"^DD",116,116.01,0,"NM","DAY")

"^DD",116,116.01,0,"UP")
116
"^DD",116,116.01,.01,0)
DAY^MNJ3,0X^^0;1^K:+X'=X!(X>$P(^FH(116,DA(1),0),"^",2))!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",116,116.01,.01,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND THE # OF DAYS IN THE CYCLE
"^DD",116,116.01,.01,21,0)
^^1^1^2880710^
"^DD",116,116.01,.01,21,1,0)
This is the day number within the cycle.
"^DD",116,116.01,.01,"DT")
2860421
"^DD",116,116.01,1,0)
BREAKFAST MEAL^RP116.1'^FH(116.1,^0;2^Q
"^DD",116,116.01,1,21,0)
^^2^2^2880710^
"^DD",116,116.01,1,21,1,0)
This is the meal (File 116.1) which will be served for
"^DD",116,116.01,1,21,2,0)
breakfast on this cycle day.
"^DD",116,116.01,1,"DT")
2860818
"^DD",116,116.01,2,0)
NOON MEAL^RP116.1'^FH(116.1,^0;3^Q
"^DD",116,116.01,2,21,0)
^^2^2^2880710^
"^DD",116,116.01,2,21,1,0)
This is the meal (File 116.1) which will be served for
"^DD",116,116.01,2,21,2,0)
Noon or Lunch on this cycle day.
"^DD",116,116.01,2,"DT")
2860818
"^DD",116,116.01,3,0)
EVENING MEAL^RP116.1'^FH(116.1,^0;4^Q
"^DD",116,116.01,3,21,0)
^^2^2^2880710^
"^DD",116,116.01,3,21,1,0)
This is the meal (File 116.1) which will be served in
"^DD",116,116.01,3,21,2,0)
the evening of this cycle day.
"^DD",116,116.01,3,"DT")
2860818
"^DD",116,116.02,0)
EFFECTIVE DATE SUB-FIELD^^.01^1
"^DD",116,116.02,0,"NM","EFFECTIVE DATE")

"^DD",116,116.02,0,"UP")
116
"^DD",116,116.02,.01,0)
EFFECTIVE DATE^MD^^0;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",116,116.02,.01,1,0)
^.1
"^DD",116,116.02,.01,1,1,0)
116^AB
"^DD",116,116.02,.01,1,1,1)
S ^FH(116,"AB",$E(X,1,30),DA(1),DA)=""
"^DD",116,116.02,.01,1,1,2)
K ^FH(116,"AB",$E(X,1,30),DA(1),DA)
"^DD",116,116.02,.01,21,0)
^^1^1^2880710^
"^DD",116,116.02,.01,21,1,0)
This is the date upon which this cycle will become effective.
"^DD",116,116.02,.01,"DT")
2860818
"^DD",116.1,116.1,0)
FIELD^^99^3
"^DD",116.1,116.1,0,"DT")
2950329
"^DD",116.1,116.1,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",116.1,116.1,0,"IX","AC",116.1,99)

"^DD",116.1,116.1,0,"IX","B",116.1,.01)

"^DD",116.1,116.1,0,"NM","MEAL")

"^DD",116.1,116.1,0,"PT",112.62,2)

"^DD",116.1,116.1,0,"PT",116.01,1)

"^DD",116.1,116.1,0,"PT",116.01,2)

"^DD",116.1,116.1,0,"PT",116.01,3)

"^DD",116.1,116.1,0,"PT",116.3,2)

"^DD",116.1,116.1,0,"PT",116.3,3)

"^DD",116.1,116.1,0,"PT",116.3,4)

"^DD",116.1,116.1,0,"SCR")
I '$D(^FH(116.1,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",116.1,116.1,0,"VRPK")
FH
"^DD",116.1,116.1,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",116.1,116.1,.01,1,0)
^.1
"^DD",116.1,116.1,.01,1,1,0)
116.1^B
"^DD",116.1,116.1,.01,1,1,1)
S ^FH(116.1,"B",$E(X,1,30),DA)=""
"^DD",116.1,116.1,.01,1,1,2)
K ^FH(116.1,"B",$E(X,1,30),DA)
"^DD",116.1,116.1,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",116.1,116.1,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",116.1,116.1,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",116.1,116.1,.01,21,0)
^^3^3^2880710^
"^DD",116.1,116.1,.01,21,1,0)
This is the name of a meal which is a collection of all
"^DD",116.1,116.1,.01,21,2,0)
recipes which will be served at a given breakfast, noon
"^DD",116.1,116.1,.01,21,3,0)
or evening meal.
"^DD",116.1,116.1,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",116.1,116.1,.01,"DT")
2930224
"^DD",116.1,116.1,1,0)
RECIPE^116.11P^^RE;0
"^DD",116.1,116.1,1,21,0)
^^2^2^2931220^^^^
"^DD",116.1,116.1,1,21,1,0)
This multiple contains the various recipes which will be
"^DD",116.1,116.1,1,21,2,0)
served for the meal.
"^DD",116.1,116.1,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",116.1,116.1,99,1,0)
^.1
"^DD",116.1,116.1,99,1,1,0)
116.1^AC^MUMPS
"^DD",116.1,116.1,99,1,1,1)
K:X'="Y" ^FH(116.1,DA,"I")
"^DD",116.1,116.1,99,1,1,2)
K ^FH(116.1,DA,"I")
"^DD",116.1,116.1,99,1,1,"%D",0)
^^2^2^3000202
"^DD",116.1,116.1,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",116.1,116.1,99,1,1,"%D",2,0)
inactive entries.
"^DD",116.1,116.1,99,21,0)
^^2^2^3000202
"^DD",116.1,116.1,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",116.1,116.1,99,21,2,0)
further selection of this entry.
"^DD",116.1,116.1,99,"DT")
3000223
"^DD",116.1,116.11,0)
RECIPE SUB-FIELD^NL^10^5
"^DD",116.1,116.11,0,"DT")
2950329
"^DD",116.1,116.11,0,"IX","B",116.11,.01)

"^DD",116.1,116.11,0,"NM","RECIPE")

"^DD",116.1,116.11,0,"UP")
116.1
"^DD",116.1,116.11,.01,0)
RECIPE^MP114'^FH(114,^0;1^Q
"^DD",116.1,116.11,.01,1,0)
^.1
"^DD",116.1,116.11,.01,1,1,0)
116.11^B
"^DD",116.1,116.11,.01,1,1,1)
S ^FH(116.1,DA(1),"RE","B",$E(X,1,30),DA)=""
"^DD",116.1,116.11,.01,1,1,2)
K ^FH(116.1,DA(1),"RE","B",$E(X,1,30),DA)
"^DD",116.1,116.11,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",116.1,116.11,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the RECIPE field.
"^DD",116.1,116.11,.01,21,0)
^^1^1^2880710^
"^DD",116.1,116.11,.01,21,1,0)
This is the recipe (File 114) which will be served.
"^DD",116.1,116.11,.01,"DT")
2880919
"^DD",116.1,116.11,1,0)
PRODUCTION DIETS^RFX^^0;2^K:$L(X)>200!($L(X)<2) X I $D(X) D EN2^FHPRC1
"^DD",116.1,116.11,1,3)

"^DD",116.1,116.11,1,4)
D EN3^FHPRC1
"^DD",116.1,116.11,1,21,0)
^^4^4^2931222^^^^
"^DD",116.1,116.11,1,21,1,0)
This is a list of the production diets which will receive the
"^DD",116.1,116.11,1,21,2,0)
recipe. It is a syntactically complex field containing the
"^DD",116.1,116.11,1,21,3,0)
production diet code and any specialized tray and cafeteria %'s
"^DD",116.1,116.11,1,21,4,0)
associated with that production diet.
"^DD",116.1,116.11,1,"DT")
2851217
"^DD",116.1,116.11,2,0)
POPULARITY^116.112P^^D;0
"^DD",116.1,116.11,2,21,0)
^^2^2^2911212^^^
"^DD",116.1,116.11,2,21,1,0)
This mutiple contains popularity (or selection percentages) for
"^DD",116.1,116.11,2,21,2,0)
tray and cafeteria for each Service Point.
"^DD",116.1,116.11,3,0)
CATEGORY^RP114.1'^FH(114.1,^0;3^Q
"^DD",116.1,116.11,3,21,0)
^^1^1^2940412^^
"^DD",116.1,116.11,3,21,1,0)
This is the Recipe Category (File 114.1) for this recipe in this meal.
"^DD",116.1,116.11,3,"DT")
2940120
"^DD",116.1,116.11,10,0)
RECIPE CATEGORY^116.12PA^^R;0
"^DD",116.1,116.11,10,21,0)
^^3^3^2950605^^
"^DD",116.1,116.11,10,21,1,0)
This is a list of different recipe categories which may
"^DD",116.1,116.11,10,21,2,0)
characterize this recipe.  The multiple also contains the
"^DD",116.1,116.11,10,21,3,0)
production diets to which this category applies.
"^DD",116.1,116.112,0)
POPULARITY SUB-FIELD^^1^2
"^DD",116.1,116.112,0,"DT")
2911203
"^DD",116.1,116.112,0,"IX","B",116.112,.01)

"^DD",116.1,116.112,0,"NM","POPULARITY")

"^DD",116.1,116.112,0,"UP")
116.11
"^DD",116.1,116.112,.01,0)
SERVICE POINT^MP119.72'X^FH(119.72,^0;1^I $D(X) S DINUM=X
"^DD",116.1,116.112,.01,1,0)
^.1
"^DD",116.1,116.112,.01,1,1,0)
116.112^B
"^DD",116.1,116.112,.01,1,1,1)
S ^FH(116.1,DA(2),"RE",DA(1),"D","B",$E(X,1,30),DA)=""
"^DD",116.1,116.112,.01,1,1,2)
K ^FH(116.1,DA(2),"RE",DA(1),"D","B",$E(X,1,30),DA)
"^DD",116.1,116.112,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",116.1,116.112,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the SERVICE POINT field.
"^DD",116.1,116.112,.01,21,0)
^^2^2^2911118^^^^
"^DD",116.1,116.112,.01,21,1,0)
This is the Service Point for which popularity values are
"^DD",116.1,116.112,.01,21,2,0)
applicable.
"^DD",116.1,116.112,.01,"DT")
2911204
"^DD",116.1,116.112,1,0)
POPULARITY %^NJ5,1^^0;2^K:+X'=X!(X>200)!(X<0)!(X?.E1"."2N.N) X
"^DD",116.1,116.112,1,3)
Type a Number between 0 and 200, 1 Decimal Digit
"^DD",116.1,116.112,1,21,0)
^^2^2^2911203^^^
"^DD",116.1,116.112,1,21,1,0)
This is the percentage of orders for this Service Point
"^DD",116.1,116.112,1,21,2,0)
which will select, or have selected, this recipe.
"^DD",116.1,116.112,1,"DT")
2911203
"^DD",116.1,116.12,0)
RECIPE CATEGORY SUB-FIELD^^1^2
"^DD",116.1,116.12,0,"DT")
2950329
"^DD",116.1,116.12,0,"IX","B",116.12,.01)

"^DD",116.1,116.12,0,"NM","RECIPE CATEGORY")

"^DD",116.1,116.12,0,"UP")
116.11
"^DD",116.1,116.12,.01,0)
RECIPE CATEGORY^MRP114.1'^FH(114.1,^0;1^Q
"^DD",116.1,116.12,.01,1,0)
^.1
"^DD",116.1,116.12,.01,1,1,0)
116.12^B
"^DD",116.1,116.12,.01,1,1,1)
S ^FH(116.1,DA(2),"RE",DA(1),"R","B",$E(X,1,30),DA)=""
"^DD",116.1,116.12,.01,1,1,2)
K ^FH(116.1,DA(2),"RE",DA(1),"R","B",$E(X,1,30),DA)
"^DD",116.1,116.12,.01,21,0)
^^2^2^2950605^^
"^DD",116.1,116.12,.01,21,1,0)
This is the Recipe Category (File 114.1) for the associated
"^DD",116.1,116.12,.01,21,2,0)
Production Diets in this meal.
"^DD",116.1,116.12,.01,"DT")
2950329
"^DD",116.1,116.12,1,0)
PRODUCTION DIETS^RFX^^0;2^K:$L(X)>200!($L(X)<1) X I $D(X) D EN2^FHPRC1
"^DD",116.1,116.12,1,3)

"^DD",116.1,116.12,1,4)
D EN3^FHPRC1
"^DD",116.1,116.12,1,21,0)
^^4^4^2950329^^^^
"^DD",116.1,116.12,1,21,1,0)
This is a list of the production diets which will receive the
"^DD",116.1,116.12,1,21,2,0)
recipe. It is a syntactically complex field containing the
"^DD",116.1,116.12,1,21,3,0)
production diet code and any specialized tray and cafeteria %'s
"^DD",116.1,116.12,1,21,4,0)
associated with that production diet.
"^DD",116.1,116.12,1,"DT")
2950330
"^DD",116.2,116.2,0)
FIELD^^99^9
"^DD",116.2,116.2,0,"DT")
2950629
"^DD",116.2,116.2,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",116.2,116.2,0,"IX","AC",116.2,99)

"^DD",116.2,116.2,0,"IX","AD",116.2,99)

"^DD",116.2,116.2,0,"IX","AO",116.2,8)

"^DD",116.2,116.2,0,"IX","AP",116.2,7)

"^DD",116.2,116.2,0,"IX","AR",116.2,8)

"^DD",116.2,116.2,0,"IX","AR1",116.211,.01)

"^DD",116.2,116.2,0,"IX","B",116.2,.01)

"^DD",116.2,116.2,0,"IX","C",116.2,1)

"^DD",116.2,116.2,0,"NM","PRODUCTION DIET")

"^DD",116.2,116.2,0,"PT",111,4)

"^DD",116.2,116.2,0,"PT",111.1,10)

"^DD",116.2,116.2,0,"PT",112.62,3)

"^DD",116.2,116.2,0,"PT",115.02,12)

"^DD",116.2,116.2,0,"PT",116.211,.01)

"^DD",116.2,116.2,0,"PT",119.721,.01)

"^DD",116.2,116.2,0,"PT",119.7211,.01)

"^DD",116.2,116.2,0,"SCR")
I '$D(^FH(116.2,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",116.2,116.2,0,"VRPK")
FH
"^DD",116.2,116.2,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",116.2,116.2,.01,1,0)
^.1
"^DD",116.2,116.2,.01,1,1,0)
116.2^B
"^DD",116.2,116.2,.01,1,1,1)
S ^FH(116.2,"B",$E(X,1,30),DA)=""
"^DD",116.2,116.2,.01,1,1,2)
K ^FH(116.2,"B",$E(X,1,30),DA)
"^DD",116.2,116.2,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",116.2,116.2,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",116.2,116.2,.01,3)
Answer must be 3-30 characters in length.
"^DD",116.2,116.2,.01,21,0)
^^3^3^2950629^^
"^DD",116.2,116.2,.01,21,1,0)
This field contains the name of a production diet. This is a
"^DD",116.2,116.2,.01,21,2,0)
diet that is prepared in the kitchen (as compared to a clinical
"^DD",116.2,116.2,.01,21,3,0)
diet modification which is ordered).
"^DD",116.2,116.2,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",116.2,116.2,.01,"DT")
2950629
"^DD",116.2,116.2,1,0)
CODE^RF^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>2!($L(X)<2)!'(X?1U1UN) X I $D(X) S Y=$O(^FH(116.2,"C",X,0)) I Y>0,Y-DA W *7,"  Code used by ",$P(^FH(116.2,Y,0),"^",1) K X
"^DD",116.2,116.2,1,1,0)
^.1
"^DD",116.2,116.2,1,1,1,0)
116.2^C
"^DD",116.2,116.2,1,1,1,1)
S ^FH(116.2,"C",$E(X,1,30),DA)=""
"^DD",116.2,116.2,1,1,1,2)
K ^FH(116.2,"C",$E(X,1,30),DA)
"^DD",116.2,116.2,1,3)
ANSWER MUST BE 2 CHARACTERS (2 LETTERS OR LETTER-NUMBER) AND UNIQUE
"^DD",116.2,116.2,1,21,0)
^^2^2^2931116^^^^
"^DD",116.2,116.2,1,21,1,0)
This is a simple two-character code for the diet and is used
"^DD",116.2,116.2,1,21,2,0)
extensively in the production summary listings.
"^DD",116.2,116.2,1,"DT")
2851217
"^DD",116.2,116.2,3,0)
# DAYS TO REVIEW^NJ3,0^^0;8^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",116.2,116.2,3,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",116.2,116.2,3,21,0)
^^2^2^2920106^^
"^DD",116.2,116.2,3,21,1,0)
This field represents the number of days after which a patient on
"^DD",116.2,116.2,3,21,2,0)
this Production Diet should be reviewed.
"^DD",116.2,116.2,3,"DT")
2920106
"^DD",116.2,116.2,7,0)
PRINT ORDER^RNJ2,0X^^0;6^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X I $D(X) S Y=$O(^FH(116.2,"AP",X,0)) I Y>0,Y-DA W *7,"  Order used by ",$P(^FH(116.2,Y,0),"^",1) K X
"^DD",116.2,116.2,7,1,0)
^.1
"^DD",116.2,116.2,7,1,1,0)
116.2^AP
"^DD",116.2,116.2,7,1,1,1)
S ^FH(116.2,"AP",$E(X,1,30),DA)=""
"^DD",116.2,116.2,7,1,1,2)
K ^FH(116.2,"AP",$E(X,1,30),DA)
"^DD",116.2,116.2,7,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",116.2,116.2,7,21,0)
^^2^2^2880717^
"^DD",116.2,116.2,7,21,1,0)
This is the order in which this production diet will appear in lists,
"^DD",116.2,116.2,7,21,2,0)
from low print orders to high.
"^DD",116.2,116.2,7,"DT")
2871115
"^DD",116.2,116.2,7.5,0)
PRINT ON DAILY MENU?^RS^Y:YES;N:NO;^0;7^Q
"^DD",116.2,116.2,7.5,21,0)
^^2^2^2891006^^
"^DD",116.2,116.2,7.5,21,1,0)
This field, when answered YES, will result in the Production Diet
"^DD",116.2,116.2,7.5,21,2,0)
being listed on the Daily Menu sheets.
"^DD",116.2,116.2,7.5,"DT")
2891006
"^DD",116.2,116.2,8,0)
TALLY ORDER^RNJ2,0X^^0;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X I $D(X) S Y=$O(^FH(116.2,"AO",X,0)) I Y>0,Y-DA W *7,"  Order used by ",$P(^FH(116.2,Y,0),"^",1) K X
"^DD",116.2,116.2,8,1,0)
^.1
"^DD",116.2,116.2,8,1,1,0)
116.2^AO
"^DD",116.2,116.2,8,1,1,1)
S ^FH(116.2,"AO",$E(X,1,30),DA)=""
"^DD",116.2,116.2,8,1,1,2)
K ^FH(116.2,"AO",$E(X,1,30),DA)
"^DD",116.2,116.2,8,1,2,0)
116.2^AR^MUMPS
"^DD",116.2,116.2,8,1,2,1)
D SET^FHORDR
"^DD",116.2,116.2,8,1,2,2)
D SET^FHORDR
"^DD",116.2,116.2,8,1,2,"%D",0)
^^2^2^2940824^
"^DD",116.2,116.2,8,1,2,"%D",1,0)
This cross-reference rebuilds the 'AR' decoding string whenever
"^DD",116.2,116.2,8,1,2,"%D",2,0)
the tally order is changed.
"^DD",116.2,116.2,8,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99
"^DD",116.2,116.2,8,21,0)
^^5^5^2880717^
"^DD",116.2,116.2,8,21,1,0)
In recoding diets, this is the order in which the clinical
"^DD",116.2,116.2,8,21,2,0)
'default production diets' will be matched against this
"^DD",116.2,116.2,8,21,3,0)
production diet. Recoding will occur as soon as a match
"^DD",116.2,116.2,8,21,4,0)
occurs. Therefore, this field can be conceptualized as
"^DD",116.2,116.2,8,21,5,0)
representing the relative importance of the production diet.
"^DD",116.2,116.2,8,"DT")
2870714
"^DD",116.2,116.2,10,0)
IS THIS A COMBO DIET?^RS^Y:YES;N:NO;^0;4^Q
"^DD",116.2,116.2,10,21,0)
^^7^7^2891006^^
"^DD",116.2,116.2,10,21,1,0)
This field, when answered YES, indicates that this production
"^DD",116.2,116.2,10,21,2,0)
diet is a combination of other production diets (e.g., both
"^DD",116.2,116.2,10,21,3,0)
low sodium and calorie restricted). Since ALL production diets
"^DD",116.2,116.2,10,21,4,0)
in a combo must match the 'default production diets' of a 
"^DD",116.2,116.2,10,21,5,0)
clinical order, such combo production diets should have a tally
"^DD",116.2,116.2,10,21,6,0)
order less than any of the individual production diets
"^DD",116.2,116.2,10,21,7,0)
contained in the combo.
"^DD",116.2,116.2,10,"DT")
2891006
"^DD",116.2,116.2,11,0)
SINGULAR PRODUCTION DIETS^116.211P^^R;0
"^DD",116.2,116.2,11,21,0)
^^2^2^2880717^
"^DD",116.2,116.2,11,21,1,0)
This multiple contains a list of the production diets which
"^DD",116.2,116.2,11,21,2,0)
constitute the combo production diet.
"^DD",116.2,116.2,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",116.2,116.2,99,1,0)
^.1
"^DD",116.2,116.2,99,1,1,0)
116.2^AC^MUMPS
"^DD",116.2,116.2,99,1,1,1)
K:X'="Y" ^FH(116.2,DA,"I")
"^DD",116.2,116.2,99,1,1,2)
K ^FH(116.2,DA,"I")
"^DD",116.2,116.2,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",116.2,116.2,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",116.2,116.2,99,1,1,"%D",2,0)
inactive entries.
"^DD",116.2,116.2,99,1,1,"DT")
2920703
"^DD",116.2,116.2,99,1,2,0)
116.2^AD^MUMPS
"^DD",116.2,116.2,99,1,2,1)
D SET^FHORDR
"^DD",116.2,116.2,99,1,2,2)
D SET^FHORDR
"^DD",116.2,116.2,99,1,2,"%D",0)
^^3^3^2940818^
"^DD",116.2,116.2,99,1,2,"%D",1,0)
This cross-reference does not alter the global contents but
"^DD",116.2,116.2,99,1,2,"%D",2,0)
rather invokes a routine which removes inactive production
"^DD",116.2,116.2,99,1,2,"%D",3,0)
diets from the recording scheme.
"^DD",116.2,116.2,99,1,2,"DT")
2931105
"^DD",116.2,116.2,99,21,0)
^^2^2^2940701^^^
"^DD",116.2,116.2,99,21,1,0)
This field, when answered YES, will prohibit further selection
"^DD",116.2,116.2,99,21,2,0)
of this Production Diet.
"^DD",116.2,116.2,99,"DT")
2931105
"^DD",116.2,116.211,0)
SINGULAR PRODUCTION DIETS SUB-FIELD^^.01^1
"^DD",116.2,116.211,0,"IX","B",116.211,.01)

"^DD",116.2,116.211,0,"NM","SINGULAR PRODUCTION DIETS")

"^DD",116.2,116.211,0,"UP")
116.2
"^DD",116.2,116.211,.01,0)
SINGULAR PRODUCTION DIETS^M*P116.2'^FH(116.2,^0;1^S DIC("S")="I $P(^(0),""^"",4)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",116.2,116.211,.01,1,0)
^.1
"^DD",116.2,116.211,.01,1,1,0)
116.211^B
"^DD",116.2,116.211,.01,1,1,1)
S ^FH(116.2,DA(1),"R","B",$E(X,1,30),DA)=""
"^DD",116.2,116.211,.01,1,1,2)
K ^FH(116.2,DA(1),"R","B",$E(X,1,30),DA)
"^DD",116.2,116.211,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",116.2,116.211,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the SINGULAR PRODUCTION DIETS field.
"^DD",116.2,116.211,.01,1,2,0)
116.2^AR1^MUMPS
"^DD",116.2,116.211,.01,1,2,1)
D SET^FHORDR
"^DD",116.2,116.211,.01,1,2,2)
D SET^FHORDR
"^DD",116.2,116.211,.01,1,2,"%D",0)
^^2^2^2940824^
"^DD",116.2,116.211,.01,1,2,"%D",1,0)
This cross-reference will rebuild the 'AR' decoding string whenever
"^DD",116.2,116.211,.01,1,2,"%D",2,0)
a change is made to a combination production diet.
"^DD",116.2,116.211,.01,12)
Can only select singular production diets.
"^DD",116.2,116.211,.01,12.1)
S DIC("S")="I $P(^(0),""^"",4)'=""Y"""
"^DD",116.2,116.211,.01,21,0)
^^2^2^2880717^
"^DD",116.2,116.211,.01,21,1,0)
This is a production diet that is to be contained in the combo
"^DD",116.2,116.211,.01,21,2,0)
production diet. It itself must not also be a combo production diet.
"^DD",116.2,116.211,.01,"DT")
2870714
"^DD",116.3,116.3,0)
FIELD^^4^5
"^DD",116.3,116.3,0,"IX","B",116.3,.01)

"^DD",116.3,116.3,0,"NM","HOLIDAY MEALS")

"^DD",116.3,116.3,.01,0)
DATE^RD^^0;1^S %DT="EX" D ^%DT S X=Y,DINUM=X K:Y<1 X,DINUM
"^DD",116.3,116.3,.01,1,0)
^.1
"^DD",116.3,116.3,.01,1,1,0)
116.3^B
"^DD",116.3,116.3,.01,1,1,1)
S ^FH(116.3,"B",$E(X,1,30),DA)=""
"^DD",116.3,116.3,.01,1,1,2)
K ^FH(116.3,"B",$E(X,1,30),DA)
"^DD",116.3,116.3,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",116.3,116.3,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the DATE field.
"^DD",116.3,116.3,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",116.3,116.3,.01,21,0)
^^3^3^2880717^
"^DD",116.3,116.3,.01,21,1,0)
This is the date of a holiday. A holiday, for purposes of this
"^DD",116.3,116.3,.01,21,2,0)
program, is a date upon which one or more of the normal cycle
"^DD",116.3,116.3,.01,21,3,0)
meals are suspended and other special meals substituted.
"^DD",116.3,116.3,1,0)
HOLIDAY NAME^RF^^0;5^K:$L(X)>30!($L(X)<1) X
"^DD",116.3,116.3,1,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",116.3,116.3,1,21,0)
^^1^1^2880717^
"^DD",116.3,116.3,1,21,1,0)
This field represents the name of the holiday.
"^DD",116.3,116.3,1,"DT")
2861206
"^DD",116.3,116.3,2,0)
BREAKFAST MEAL^P116.1'^FH(116.1,^0;2^Q
"^DD",116.3,116.3,2,21,0)
^^2^2^2880717^
"^DD",116.3,116.3,2,21,1,0)
This field, if present, contains the meal which will override
"^DD",116.3,116.3,2,21,2,0)
the normal cycle breakfast meal.
"^DD",116.3,116.3,2,"DT")
2861206
"^DD",116.3,116.3,3,0)
NOON MEAL^P116.1'^FH(116.1,^0;3^Q
"^DD",116.3,116.3,3,21,0)
^^2^2^2880717^
"^DD",116.3,116.3,3,21,1,0)
This field, if present, contains the meal which will override
"^DD",116.3,116.3,3,21,2,0)
the normal cycle noon meal.
"^DD",116.3,116.3,3,"DT")
2861206
"^DD",116.3,116.3,4,0)
EVENING MEAL^P116.1'^FH(116.1,^0;4^Q
"^DD",116.3,116.3,4,21,0)
^^2^2^2880717^
"^DD",116.3,116.3,4,21,1,0)
This field, if present, contains the meal which will override
"^DD",116.3,116.3,4,21,2,0)
the normal cycle evening meal.
"^DD",116.3,116.3,4,"DT")
2861206
"^DD",117,117,0)
FIELD^^8^35
"^DD",117,117,0,"DDA")
N
"^DD",117,117,0,"DT")
3031014
"^DD",117,117,0,"IX","B",117,.01)

"^DD",117,117,0,"NM","MEALS SERVED")

"^DD",117,117,.01,0)
CENSUS DATE^RDX^^0;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",117,117,.01,1,0)
^.1
"^DD",117,117,.01,1,1,0)
117^B
"^DD",117,117,.01,1,1,1)
S ^FH(117,"B",$E(X,1,30),DA)=""
"^DD",117,117,.01,1,1,2)
K ^FH(117,"B",$E(X,1,30),DA)
"^DD",117,117,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",117,117,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the CENSUS DATE field.
"^DD",117,117,.01,3)

"^DD",117,117,.01,21,0)
^.001^2^2^3030225^^
"^DD",117,117,.01,21,1,0)
This is the date for which various dietetic census and performance
"^DD",117,117,.01,21,2,0)
standards data are entered.
"^DD",117,117,.01,"DT")
3030128
"^DD",117,117,1,0)
DOM MEMBERS^NJ4,0^^0;2^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,1,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,1,21,0)
^.001^2^2^3030424^^^
"^DD",117,117,1,21,1,0)
This field contains the number of Domiciliary members shown by MAS
"^DD",117,117,1,21,2,0)
as being admitted patients on the census date.
"^DD",117,117,2,0)
DOM ABSENCES^NJ4,0^^0;3^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,2,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,2,21,0)
^.001^2^2^3030424^^
"^DD",117,117,2,21,1,0)
This field contains the number of Domiciliary members on
"^DD",117,117,2,21,2,0)
authorized or unauthorized absence on the census date.
"^DD",117,117,4,0)
NHCU PATIENTS^NJ4,0^^0;4^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,4,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,4,21,0)
^^2^2^2880716^
"^DD",117,117,4,21,1,0)
This field contains the number of Nursing Home Care Unit patients
"^DD",117,117,4,21,2,0)
being shown by MAS as admitted patients on the census date.
"^DD",117,117,5,0)
NHCU ABSENCES^NJ4,0^^0;5^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,5,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,5,21,0)
^^2^2^2880716^
"^DD",117,117,5,21,1,0)
This field contains the number of Nursing Home Care Unit patients
"^DD",117,117,5,21,2,0)
on authorized or unauthorized absence on the census date.
"^DD",117,117,6,0)
COMM OFFICE^117.06P^^2;0
"^DD",117,117,7,0)
HOSP INPATIENTS^NJ4,0^^0;6^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,7,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,7,21,0)
^^2^2^2880716^
"^DD",117,117,7,21,1,0)
This field contains the number of Hospital inpatients being shown
"^DD",117,117,7,21,2,0)
by MAS as admitted patients on the census date.
"^DD",117,117,8,0)
HOSP ABSENCES^NJ4,0^^0;7^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,8,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,8,21,0)
^^2^2^2910625^^
"^DD",117,117,8,21,1,0)
This field contains the number of Hospital inpatients on
"^DD",117,117,8,21,2,0)
authorized or unauthorized absence on the census date.
"^DD",117,117,30,0)
OUTPATIENT BREAKFAST^NJ4,0^^1;1^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,30,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,30,21,0)
^^2^2^2880716^
"^DD",117,117,30,21,1,0)
This field contains the number of breakfast meals served to
"^DD",117,117,30,21,2,0)
outpatients on the census date.
"^DD",117,117,31,0)
OUTPATIENT NOON^NJ4,0^^1;2^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,31,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,31,21,0)
^^2^2^2880716^
"^DD",117,117,31,21,1,0)
This field contains the number of noon meals served to
"^DD",117,117,31,21,2,0)
outpatients on the census date.
"^DD",117,117,32,0)
OUTPATIENT EVENING^NJ4,0^^1;3^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,32,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,32,21,0)
^^2^2^2880716^
"^DD",117,117,32,21,1,0)
This field contains the number of evening meals served to
"^DD",117,117,32,21,2,0)
outpatients on the census date.
"^DD",117,117,33,0)
EMPLOYEE BREAKFAST^NJ4,0^^1;4^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,33,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,33,21,0)
^^2^2^2880716^
"^DD",117,117,33,21,1,0)
This field contains the number of breakfast meals served
"^DD",117,117,33,21,2,0)
under contract on the census date.
"^DD",117,117,33,"DT")
3040315
"^DD",117,117,34,0)
EMPLOYEE NOON^NJ4,0^^1;5^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,34,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,34,21,0)
^^2^2^2880716^
"^DD",117,117,34,21,1,0)
This field contains the number of noon meals served
"^DD",117,117,34,21,2,0)
under contract on the census date.
"^DD",117,117,34,"DT")
3040311
"^DD",117,117,35,0)
EMPLOYEE EVENING^NJ4,0^^1;6^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,35,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,35,21,0)
^^2^2^2880716^
"^DD",117,117,35,21,1,0)
This field contains the number of evening meals served
"^DD",117,117,35,21,2,0)
under contract on the census date.
"^DD",117,117,35,"DT")
3040311
"^DD",117,117,36,0)
PAID BREAKFAST^NJ4,0^^1;7^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,36,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,36,21,0)
^^2^2^2880716^^
"^DD",117,117,36,21,1,0)
This field contains the number of breakfast meals served
"^DD",117,117,36,21,2,0)
to other paid individuals on the census date.
"^DD",117,117,36,"DT")
3040315
"^DD",117,117,37,0)
PAID NOON^NJ4,0^^1;8^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,37,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,37,21,0)
^^2^2^2880716^
"^DD",117,117,37,21,1,0)
This field contains the number of noon meals served
"^DD",117,117,37,21,2,0)
to other paid individuals on the census date.
"^DD",117,117,37,"DT")
3040311
"^DD",117,117,38,0)
PAID EVENING^NJ4,0^^1;9^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,38,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,38,21,0)
^^2^2^2880716^
"^DD",117,117,38,21,1,0)
This field contains the number of evening meals served
"^DD",117,117,38,21,2,0)
to other paid individuals on the census date.
"^DD",117,117,38,"DT")
3040311
"^DD",117,117,39,0)
OOD BREAKFAST^NJ4,0^^1;10^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,39,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,39,21,0)
^^2^2^2880716^
"^DD",117,117,39,21,1,0)
This field contains the number of breakfast meals served
"^DD",117,117,39,21,2,0)
to OOD personnel on the census date.
"^DD",117,117,39,"DT")
3040315
"^DD",117,117,40,0)
OOD NOON^NJ4,0^^1;11^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,40,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,40,21,0)
^^2^2^2880716^
"^DD",117,117,40,21,1,0)
This field contains the number of noon meals served
"^DD",117,117,40,21,2,0)
to OOD personnel on the census date.
"^DD",117,117,41,0)
OOD EVENING^NJ4,0^^1;12^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,41,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,41,21,0)
^^2^2^2880716^
"^DD",117,117,41,21,1,0)
This field contains the number of evening meals served
"^DD",117,117,41,21,2,0)
to OOD personnel on the census date.
"^DD",117,117,42,0)
VOLUNTEER BREAKFAST^NJ4,0^^1;13^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,42,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,42,21,0)
^^2^2^2880716^
"^DD",117,117,42,21,1,0)
This field contains the number of breakfast meals served to
"^DD",117,117,42,21,2,0)
volunteers on the census date.
"^DD",117,117,42,"DT")
3040315
"^DD",117,117,43,0)
VOLUNTEER NOON^NJ4,0^^1;14^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,43,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,43,21,0)
^^2^2^2910612^^
"^DD",117,117,43,21,1,0)
This field contains the number of noon meals served to
"^DD",117,117,43,21,2,0)
volunteers on the census date.
"^DD",117,117,44,0)
VOLUNTEER EVENING^NJ4,0^^1;15^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,44,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,44,21,0)
^^2^2^2880716^
"^DD",117,117,44,21,1,0)
This field contains the number of evening meals served to
"^DD",117,117,44,21,2,0)
volunteers on the census date.
"^DD",117,117,45,0)
GRATUITOUS BREAKFAST^NJ4,0^^1;16^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,45,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,45,21,0)
^^2^2^2880716^
"^DD",117,117,45,21,1,0)
This field contains the number of breakfast meals served
"^DD",117,117,45,21,2,0)
gratuitously to others on the census date.
"^DD",117,117,45,"DT")
3040315
"^DD",117,117,46,0)
GRATUITOUS NOON^NJ4,0^^1;17^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,46,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,46,21,0)
^^2^2^2880716^
"^DD",117,117,46,21,1,0)
This field contains the number of noon meals served
"^DD",117,117,46,21,2,0)
gratuitously to others on the census date.
"^DD",117,117,46,"DT")
3040311
"^DD",117,117,47,0)
GRATUITOUS EVENING^NJ4,0^^1;18^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,47,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 9999
"^DD",117,117,47,21,0)
^^2^2^2880716^
"^DD",117,117,47,21,1,0)
This field contains the number of evening meals served
"^DD",117,117,47,21,2,0)
gratuitously to others on the census date.
"^DD",117,117,47,"DT")
3040311
"^DD",117,117,50,0)
CAFETERIA MEALS^NJ4,0^^1;19^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,50,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117,50,21,0)
^^2^2^2900325^
"^DD",117,117,50,21,1,0)
This field contains the number of cafeteria meals served
"^DD",117,117,50,21,2,0)
on the census date.
"^DD",117,117,50,"DT")
2900325
"^DD",117,117,51,0)
NPO MEALS^NJ4,0^^1;20^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,51,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117,51,21,0)
^^2^2^2910625^^
"^DD",117,117,51,21,1,0)
This field contains the number of NPO meals for the
"^DD",117,117,51,21,2,0)
census date.
"^DD",117,117,51,"DT")
2900325
"^DD",117,117,52,0)
# PATIENTS STATUS I^NJ4,0^^1;21^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,52,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117,52,21,0)
^^2^2^2911204^
"^DD",117,117,52,21,1,0)
This field represents the number of patients for which the Nutrition
"^DD",117,117,52,21,2,0)
Status was I on the given date.
"^DD",117,117,52,"DT")
2910610
"^DD",117,117,53,0)
# PATIENTS STATUS II^NJ4,0^^1;22^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,53,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117,53,21,0)
^^2^2^2911204^
"^DD",117,117,53,21,1,0)
This field represents the number of patients for which the Nutrition
"^DD",117,117,53,21,2,0)
Status was II on the given date.
"^DD",117,117,54,0)
# PATIENTS STATUS III^NJ4,0^^1;23^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,54,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117,54,21,0)
^^2^2^2911204^^
"^DD",117,117,54,21,1,0)
This field represents the number of patients for which the Nutrition
"^DD",117,117,54,21,2,0)
Status was III on the given date.
"^DD",117,117,55,0)
# PATIENTS STATUS IV^NJ4,0^^1;24^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,55,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117,55,21,0)
^^2^2^2911204^
"^DD",117,117,55,21,1,0)
This field represents the number of patients for which the Nutrition
"^DD",117,117,55,21,2,0)
Status was IV on the given date.
"^DD",117,117,56,0)
# PATIENTS STATUS UNC^NJ4,0^^1;25^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,56,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117,56,21,0)
^^2^2^2911204^
"^DD",117,117,56,21,1,0)
This field represents the number of patients for which the Nutrition
"^DD",117,117,56,21,2,0)
Status was not available, or invalid, on the given date.
"^DD",117,117,57,0)
# DAILY MODIFIED DIETS^NJ9,0^^1;26^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,57,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",117,117,57,21,0)
^^2^2^2930908^^^^
"^DD",117,117,57,21,1,0)
This is the number of modified (non-regular) diets served. It
"^DD",117,117,57,21,2,0)
also includes NPOs and Passes.
"^DD",117,117,57,"DT")
2920304
"^DD",117,117,58,0)
# OF TOTAL DIETS^NJ10,0^^1;27^K:+X'=X!(X>9999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117,58,3)
Type a Number between 0 and 9999999999, 0 Decimal Digits
"^DD",117,117,58,21,0)
^^1^1^2930908^^
"^DD",117,117,58,21,1,0)
This field contains the number of total Diets.
"^DD",117,117,58,"DT")
2920618
"^DD",117,117.06,0)
COMM OFFICE SUB-FIELD^^33^34
"^DD",117,117.06,0,"DT")
3031014
"^DD",117,117.06,0,"IX","B",117.06,.01)

"^DD",117,117.06,0,"NM","COMM OFFICE")

"^DD",117,117.06,0,"UP")
117
"^DD",117,117.06,.01,0)
COMM OFFICE^P119.73'^FH(119.73,^0;1^Q
"^DD",117,117.06,.01,1,0)
^.1
"^DD",117,117.06,.01,1,1,0)
117.06^B
"^DD",117,117.06,.01,1,1,1)
S ^FH(117,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",117,117.06,.01,1,1,2)
K ^FH(117,DA(1),2,"B",$E(X,1,30),DA)
"^DD",117,117.06,.01,3)
Enter Communication Office code
"^DD",117,117.06,.01,"DT")
3030423
"^DD",117,117.06,1,0)
OUTPATIENT BREAKFAST^NJ4,0^^0;2^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1.N) X
"^DD",117,117.06,1,3)
Type a number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,1,"DT")
3030131
"^DD",117,117.06,2,0)
OUTPATIENT NOON^NJ4,0^^0;3^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1.N) X
"^DD",117,117.06,2,3)
Type a number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,2,"DT")
3030131
"^DD",117,117.06,3,0)
OUTPATIENT EVENING^NJ4,0^^0;4^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1.N) X
"^DD",117,117.06,3,3)
Type a number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,3,"DT")
3030131
"^DD",117,117.06,4,0)
EMPLOYEE BREAKFAST^NJ4,0^^0;5^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1.N) X
"^DD",117,117.06,4,3)
Type a number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,4,"DT")
3040315
"^DD",117,117.06,5,0)
EMPLOYEE NOON^NJ4,0^^0;6^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,5,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,5,"DT")
3040315
"^DD",117,117.06,6,0)
EMPLOYEE EVENING^NJ4,0^^0;7^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,6,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,6,"DT")
3040315
"^DD",117,117.06,7,0)
PAID BREAKFAST^NJ4,0^^0;8^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,7,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,7,"DT")
3040315
"^DD",117,117.06,8,0)
PAID NOON^NJ4,0^^0;9^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,8,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,8,"DT")
3040315
"^DD",117,117.06,9,0)
PAID EVENING^NJ4,0^^0;10^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,9,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,9,"DT")
3040315
"^DD",117,117.06,10,0)
OOD BREAKFAST^NJ4,0^^0;11^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,10,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,10,"DT")
3040315
"^DD",117,117.06,11,0)
OOD NOON^NJ4,0^^0;12^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,11,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,11,"DT")
3030131
"^DD",117,117.06,12,0)
OOD EVENING^NJ4,0^^0;13^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,12,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,12,"DT")
3030131
"^DD",117,117.06,13,0)
VOLUNTEER BREAKFAST^NJ4,0^^0;14^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,13,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,13,"DT")
3040315
"^DD",117,117.06,14,0)
VOLUNTEER NOON^NJ4,0^^0;15^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,14,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,14,"DT")
3030131
"^DD",117,117.06,15,0)
VOLUNTEER EVENING^NJ4,0^^0;16^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,15,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,15,"DT")
3030131
"^DD",117,117.06,16,0)
GRATUITOUS BREAKFAST^NJ4,0^^0;17^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,16,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,16,"DT")
3040315
"^DD",117,117.06,17,0)
GRATUITOUS NOON^NJ4,0^^0;18^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,17,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,17,"DT")
3040315
"^DD",117,117.06,18,0)
GRATUITOUS EVENING^NJ4,0^^0;19^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,18,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,18,"DT")
3040315
"^DD",117,117.06,19,0)
CAFETERIA MEALS^NJ4,0^^0;20^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,19,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,19,"DT")
3030131
"^DD",117,117.06,20,0)
NPO MEALS^NJ4,0^^0;21^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,20,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,20,"DT")
3030131
"^DD",117,117.06,21,0)
DOM MEMBERS^NJ4,0^^1;1^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,21,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,21,"DT")
3030224
"^DD",117,117.06,22,0)
DOM ABSENCES^NJ4,0^^1;2^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,22,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,22,"DT")
3030225
"^DD",117,117.06,23,0)
NHCU PATIENTS^NJ4,0^^1;3^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,23,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,23,"DT")
3030225
"^DD",117,117.06,24,0)
NHCU ABSENCES^NJ4,0^^1;4^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,24,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,24,"DT")
3030225
"^DD",117,117.06,25,0)
HOSP INPATIENTS^NJ4,0^^1;5^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,25,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,25,"DT")
3030303
"^DD",117,117.06,26,0)
HOSP ABSENCES^NJ4,0^^1;6^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,26,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,26,"DT")
3030225
"^DD",117,117.06,27,0)
# PATIENTS STATUS I^NJ4,0^^0;22^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,27,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,27,"DT")
3031014
"^DD",117,117.06,28,0)
# PATIENTS STATUS II^NJ4,0^^0;23^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,28,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,28,"DT")
3031014
"^DD",117,117.06,29,0)
# PATIENTS STATUS III^NJ4,0^^0;24^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,29,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,29,"DT")
3031014
"^DD",117,117.06,30,0)
# PATIENTS STATUS IV^NJ4,0^^0;25^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,30,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,30,"DT")
3031014
"^DD",117,117.06,31,0)
# PATIENTS STATUS UNC^NJ4,0^^0;26^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,31,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117,117.06,31,"DT")
3031014
"^DD",117,117.06,32,0)
# DAILY MODIFIED DIETS^NJ9,0^^0;27^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,32,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",117,117.06,32,"DT")
3031014
"^DD",117,117.06,33,0)
# OF TOTAL DIETS^NJ9,0^^0;28^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117,117.06,33,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",117,117.06,33,"DT")
3031014
"^DD",117.1,117.1,0)
FIELD^^20^21
"^DD",117.1,117.1,0,"DDA")
N
"^DD",117.1,117.1,0,"DT")
3030423
"^DD",117.1,117.1,0,"IX","B",117.1,.01)

"^DD",117.1,117.1,0,"NM","STAFFING DATA")

"^DD",117.1,117.1,.01,0)
DATE^RDX^^0;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X I $D(X) S DINUM=X
"^DD",117.1,117.1,.01,1,0)
^.1
"^DD",117.1,117.1,.01,1,1,0)
117.1^B
"^DD",117.1,117.1,.01,1,1,1)
S ^FH(117.1,"B",$E(X,1,30),DA)=""
"^DD",117.1,117.1,.01,1,1,2)
K ^FH(117.1,"B",$E(X,1,30),DA)
"^DD",117.1,117.1,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",117.1,117.1,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the DATE field.
"^DD",117.1,117.1,.01,3)

"^DD",117.1,117.1,.01,21,0)
^^1^1^2910514^^
"^DD",117.1,117.1,.01,21,1,0)
This is the date for which staffing data is entered.
"^DD",117.1,117.1,1,0)
DAILY FTEE^NJ7,3^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",117.1,117.1,1,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.1,1,21,0)
^^2^2^2920129^^^^
"^DD",117.1,117.1,1,21,1,0)
This field contains the count of all personnel assigned to the
"^DD",117.1,117.1,1,21,2,0)
Dietetic Service and includes full-time and part-time employees.
"^DD",117.1,117.1,1,"DT")
2891120
"^DD",117.1,117.1,2,0)
CLINICAL FTEE^NJ7,3^^0;3^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4.N) X
"^DD",117.1,117.1,2,3)
Type a number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.1,2,21,0)
^^3^3^2950104^^^^
"^DD",117.1,117.1,2,21,1,0)
This field contains the FTEE of the clinical dietitians
"^DD",117.1,117.1,2,21,2,0)
and clinical technicians who work with the clinical
"^DD",117.1,117.1,2,21,3,0)
dietitians in patient care activities.
"^DD",117.1,117.1,2,"DT")
3030306
"^DD",117.1,117.1,3,0)
ADMINISTRATIVE FTEE^NJ7,3^^0;4^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",117.1,117.1,3,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.1,3,21,0)
5^^4^4^2950104^^
"^DD",117.1,117.1,3,21,1,0)
This field contains the FTEE of the Chief and Assistant Chief
"^DD",117.1,117.1,3,21,2,0)
of the Dietetic Service, Chief of the Administrative section,
"^DD",117.1,117.1,3,21,3,0)
Chief Clinical Section, administrative dietitians, internship,
"^DD",117.1,117.1,3,21,4,0)
education and staff development dietitians, and any QA dietitians.
"^DD",117.1,117.1,3,21,5,0)
QA dietitians.
"^DD",117.1,117.1,3,"DT")
2891120
"^DD",117.1,117.1,4,0)
SUPPORT STAFF FTEE^NJ7,3^^0;5^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",117.1,117.1,4,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.1,4,21,0)
^^3^3^2950222^^^^
"^DD",117.1,117.1,4,21,1,0)
This field contains the FTEE of all secretaries, clerk-typists,
"^DD",117.1,117.1,4,21,2,0)
cost accountants, and administrative technicians; it does not
"^DD",117.1,117.1,4,21,3,0)
include diet communications personnel.
"^DD",117.1,117.1,4,"DT")
2891120
"^DD",117.1,117.1,5,0)
CFWS FTEE^NJ7,3^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",117.1,117.1,5,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.1,5,21,0)
^^2^2^2930204^^^
"^DD",117.1,117.1,5,21,1,0)
This field contains the FTEE of Supervisory Cooks and Supervisory
"^DD",117.1,117.1,5,21,2,0)
Food Service workers.
"^DD",117.1,117.1,5,"DT")
2891120
"^DD",117.1,117.1,6,0)
DAYS OFF HOURS^NJ7,2^^0;7^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,6,3)
Type a Number between 0 and 9999, 2 Decimal Digits
"^DD",117.1,117.1,6,21,0)
^^2^2^2891121^^^
"^DD",117.1,117.1,6,21,1,0)
This field contains the count of hours not worked by measured
"^DD",117.1,117.1,6,21,2,0)
personnel.
"^DD",117.1,117.1,6,"DT")
2891121
"^DD",117.1,117.1,7,0)
LWOP & AWOL HOURS^NJ6,2^^0;8^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,7,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,7,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,7,21,1,0)
This field contains the number of LWOP and AWOL hours for
"^DD",117.1,117.1,7,21,2,0)
measured personnel.
"^DD",117.1,117.1,8,0)
OVERTIME HOURS^NJ6,2^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,8,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,8,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,8,21,1,0)
This field contains the number of overtime hours worked by
"^DD",117.1,117.1,8,21,2,0)
measured personnel.
"^DD",117.1,117.1,9,0)
UNSCHEDULED HOURS^NJ6,2^^0;10^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,9,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,9,21,0)
^^2^2^2921124^^^
"^DD",117.1,117.1,9,21,1,0)
This field contains the number of unscheduled hours worked by
"^DD",117.1,117.1,9,21,2,0)
measured personnel.
"^DD",117.1,117.1,10,0)
INTERMITTENT HOURS^NJ6,2^^0;11^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,10,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,10,21,0)
^^2^2^2921124^^
"^DD",117.1,117.1,10,21,1,0)
This field contains the number of intermittent hours worked by
"^DD",117.1,117.1,10,21,2,0)
measured personnel.
"^DD",117.1,117.1,11,0)
COP HOURS^NJ6,2^^0;12^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,11,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,11,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,11,21,1,0)
This field contains the number of Continuation-of-Pay hours by
"^DD",117.1,117.1,11,21,2,0)
measured personnel.
"^DD",117.1,117.1,12,0)
ANNUAL LEAVE HOURS^NJ6,2^^0;13^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,12,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,12,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,12,21,1,0)
This field contains the number of hours of annual leave taken
"^DD",117.1,117.1,12,21,2,0)
by measured personnel.
"^DD",117.1,117.1,13,0)
SICK LEAVE HOURS^NJ6,2^^0;14^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,13,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,13,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,13,21,1,0)
This field contains the number of hours of sick leave taken by
"^DD",117.1,117.1,13,21,2,0)
measured personnel.
"^DD",117.1,117.1,14,0)
OTHER LEAVE HOURS^NJ6,2^^0;15^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,14,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,14,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,14,21,1,0)
This field contains the number of hours of other types of leave
"^DD",117.1,117.1,14,21,2,0)
taken by measured personnel.
"^DD",117.1,117.1,15,0)
LOANED/UNION HOURS^NJ6,2^^0;16^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,15,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,15,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,15,21,1,0)
This field contains the number of hours worked in other services,
"^DD",117.1,117.1,15,21,2,0)
or on union affairs, by measured personnel.
"^DD",117.1,117.1,16,0)
COMP. HOURS^NJ6,2^^0;17^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,16,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,16,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,16,21,1,0)
This field contains the number of compensatory hours worked by
"^DD",117.1,117.1,16,21,2,0)
measured personnel.
"^DD",117.1,117.1,17,0)
TRAINEE HOURS^NJ6,2^^0;18^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,17,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,17,21,0)
^^1^1^2891120^
"^DD",117.1,117.1,17,21,1,0)
This field contains the number of hours worked by trainees.
"^DD",117.1,117.1,18,0)
VOLUNTEER HOURS^NJ6,2^^0;19^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,18,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,18,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,18,21,1,0)
This field contains the number of hours worked by uncompensated
"^DD",117.1,117.1,18,21,2,0)
volunteers.
"^DD",117.1,117.1,19,0)
BORROWED HOURS^NJ6,2^^0;20^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.1,117.1,19,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.1,19,21,0)
^^2^2^2891120^
"^DD",117.1,117.1,19,21,1,0)
This field contains the number of hours worked by employees borrowed
"^DD",117.1,117.1,19,21,2,0)
from other Services.
"^DD",117.1,117.1,20,0)
COMM OFFICE^117.11P^^1;0
"^DD",117.1,117.11,0)
COMM OFFICE SUB-FIELD^^20^20
"^DD",117.1,117.11,0,"DT")
3030423
"^DD",117.1,117.11,0,"IX","B",117.11,.01)

"^DD",117.1,117.11,0,"NM","COMM OFFICE")

"^DD",117.1,117.11,0,"UP")
117.1
"^DD",117.1,117.11,.01,0)
COMM OFFICE^P119.73'^FH(119.73,^0;1^Q
"^DD",117.1,117.11,.01,1,0)
^.1
"^DD",117.1,117.11,.01,1,1,0)
117.11^B
"^DD",117.1,117.11,.01,1,1,1)
S ^FH(117.1,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",117.1,117.11,.01,1,1,2)
K ^FH(117.1,DA(1),1,"B",$E(X,1,30),DA)
"^DD",117.1,117.11,.01,3)
This entry is required, enter Communications Office code  
"^DD",117.1,117.11,.01,"DT")
3030423
"^DD",117.1,117.11,2,0)
DAILY FTEE^NJ7,3^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4.N) X
"^DD",117.1,117.11,2,3)
Type a number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.11,2,"DT")
3030307
"^DD",117.1,117.11,3,0)
CLINICAL FTEE^NJ7,3^^0;3^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4.N) X
"^DD",117.1,117.11,3,3)
Type a number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.11,3,"DT")
3030307
"^DD",117.1,117.11,4,0)
ADMINISTRATIVE FTEE^NJ7,3^^0;4^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4.N) X
"^DD",117.1,117.11,4,3)
Type a number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.11,4,"DT")
3030307
"^DD",117.1,117.11,5,0)
SUPPORT STAFF FTEE^NJ7,3^^0;5^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4.N) X
"^DD",117.1,117.11,5,3)
Type a number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.11,5,"DT")
3030307
"^DD",117.1,117.11,6,0)
CFWS FTEE^NJ7,3^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4.N) X
"^DD",117.1,117.11,6,3)
Type a number between 0 and 999, 3 Decimal Digits
"^DD",117.1,117.11,6,"DT")
3030307
"^DD",117.1,117.11,7,0)
DAYS OFF HOURS^NJ7,2^^0;7^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,7,3)
Type a number between 0 and 9999, 2 Decimal Digits
"^DD",117.1,117.11,7,"DT")
3030307
"^DD",117.1,117.11,8,0)
LWOP & AWOL HOURS^NJ6,2^^0;8^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,8,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,8,"DT")
3030307
"^DD",117.1,117.11,9,0)
OVERTIME HOURS^NJ6,2^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,9,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,9,"DT")
3030307
"^DD",117.1,117.11,10,0)
UNSCHEDULED HOURS^NJ6,2^^0;10^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,10,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,10,"DT")
3030307
"^DD",117.1,117.11,11,0)
INTERMITTENT HOURS^NJ6,2^^0;11^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,11,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,11,"DT")
3030307
"^DD",117.1,117.11,12,0)
COP HOURS^NJ6,2^^0;12^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,12,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,12,"DT")
3030307
"^DD",117.1,117.11,13,0)
ANNUAL LEAVE HOURS^NJ6,2^^0;13^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,13,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,13,"DT")
3030307
"^DD",117.1,117.11,14,0)
SICK LEAVE HOURS^NJ6,2^^0;14^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,14,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,14,"DT")
3030307
"^DD",117.1,117.11,15,0)
OTHER LEAVE HOURS^NJ6,2^^0;15^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,15,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,15,"DT")
3030307
"^DD",117.1,117.11,16,0)
LOANED/UNION HOURS^NJ6,2^^0;16^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,16,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,16,"DT")
3030307
"^DD",117.1,117.11,17,0)
COMP. HOURS^NJ6,2^^0;17^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,17,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,17,"DT")
3030307
"^DD",117.1,117.11,18,0)
TRAINEE HOURS^NJ6,2^^0;18^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,18,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,18,"DT")
3030307
"^DD",117.1,117.11,19,0)
VOLUNTEER HOURS^NJ6,2^^0;19^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,19,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,19,"DT")
3030307
"^DD",117.1,117.11,20,0)
BORROWED HOURS^NJ6,2^^0;20^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3.N) X
"^DD",117.1,117.11,20,3)
Type a number between 0 and 999, 2 Decimal Digits
"^DD",117.1,117.11,20,"DT")
3030307
"^DD",117.2,117.2,0)
FIELD^^24^25
"^DD",117.2,117.2,0,"DDA")
N
"^DD",117.2,117.2,0,"DT")
2930618
"^DD",117.2,117.2,0,"IX","B",117.2,.01)

"^DD",117.2,117.2,0,"NM","DIETETIC COST OF MEALS")

"^DD",117.2,117.2,.01,0)
MONTH/YEAR^RDX^^0;1^S %DT="E" D ^%DT S X=$E(Y,1,5)_"00" K:Y<1 X I $D(X) S DINUM=X
"^DD",117.2,117.2,.01,1,0)
^.1
"^DD",117.2,117.2,.01,1,1,0)
117.2^B
"^DD",117.2,117.2,.01,1,1,1)
S ^FH(117.2,"B",$E(X,1,30),DA)=""
"^DD",117.2,117.2,.01,1,1,2)
K ^FH(117.2,"B",$E(X,1,30),DA)
"^DD",117.2,117.2,.01,1,1,"%D",0)
^^1^1^2931221^^
"^DD",117.2,117.2,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the MONTH/YEAR field.
"^DD",117.2,117.2,.01,3)
ENTER A MONTH AND A YEAR, ej. 1 92, 11-92, 3/92.
"^DD",117.2,117.2,.01,21,0)
^^1^1^2930621^^^^
"^DD",117.2,117.2,.01,21,1,0)
Enter Month and Year.
"^DD",117.2,117.2,.01,"DT")
2931027
"^DD",117.2,117.2,1,0)
BEG INV GRP 1^NJ6,0^^0;2^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,1,3)
Enter an Amount between 0 and 999999 for the Beg Inv Cost for Food Group I
"^DD",117.2,117.2,1,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,1,21,1,0)
Enter Beginning Inventory Cost for Food Group I.
"^DD",117.2,117.2,1,"DT")
2910517
"^DD",117.2,117.2,2,0)
BEG INV GRP 2^NJ6,0^^0;3^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,2,3)
Enter an Amount between 0 and 999999 for Beg Inv Cost of Food Group II
"^DD",117.2,117.2,2,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,2,21,1,0)
Enter Beginning Inventory Cost For Food Group II.
"^DD",117.2,117.2,2,"DT")
2910506
"^DD",117.2,117.2,3,0)
BEG INV GRP 3^NJ6,0^^0;4^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,3,3)
Enter an Amount between 0 and 999999 for the Beg Inv Cost of Food Group III
"^DD",117.2,117.2,3,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,3,21,1,0)
Enter the Beginning Inventory Cost of Food Group III.
"^DD",117.2,117.2,3,"DT")
2910506
"^DD",117.2,117.2,4,0)
BEG INV GRP 4^NJ6,0^^0;5^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,4,3)
Enter an Amount between 0 and 999999 for the Beg Inv Cost of Food Group IV
"^DD",117.2,117.2,4,21,0)
^^1^1^2920501^^^
"^DD",117.2,117.2,4,21,1,0)
Enter the Beginning Inventory Cost for Food Group IV.
"^DD",117.2,117.2,4,"DT")
2910506
"^DD",117.2,117.2,5,0)
BEG INV GRP 5^NJ6,0^^0;6^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,5,3)
Enter an Amount between 0 and 999999 for Beg Inv Cost of Food Group V
"^DD",117.2,117.2,5,21,0)
^^1^1^2911113^^
"^DD",117.2,117.2,5,21,1,0)
Enter the Beginning Inventory Cost for Food Group V.
"^DD",117.2,117.2,5,"DT")
2910506
"^DD",117.2,117.2,6,0)
BEG INV GRP 6^NJ6,0^^0;7^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,6,3)
Enter an Amount between 0 and 999999 for Beg Inv Cost of Food Group VI
"^DD",117.2,117.2,6,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,6,21,1,0)
Enter the Beginning Inventory Cost for Food Group VI.
"^DD",117.2,117.2,6,"DT")
2910506
"^DD",117.2,117.2,7,0)
ISSUE COST GRP 1^NJ7,0^^0;8^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,7,3)
Enter an Amount between 0 and 9999999 for the Issue Cost of Food Group I
"^DD",117.2,117.2,7,21,0)
^^1^1^2911113^^
"^DD",117.2,117.2,7,21,1,0)
Enter the Issue Cost For Food Group I.
"^DD",117.2,117.2,7,"DT")
2910517
"^DD",117.2,117.2,8,0)
ISSUE COST GRP 2^NJ7,0^^0;9^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,8,3)
Enter an Amount between 0 and 9999999 for Issue Cost of Food Group II
"^DD",117.2,117.2,8,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,8,21,1,0)
Enter The Issue Cost for Food Group II.
"^DD",117.2,117.2,8,"DT")
2910506
"^DD",117.2,117.2,9,0)
ISSUE COST GRP 3^NJ7,0^^0;10^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,9,3)
Enter an Amount between 0 and 9999999 for Issue Cost of Food Group III
"^DD",117.2,117.2,9,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,9,21,1,0)
Enter the Issue Cost for Food Group III.
"^DD",117.2,117.2,9,"DT")
2910506
"^DD",117.2,117.2,10,0)
ISSUE COST GRP 4^NJ7,0^^0;11^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,10,3)
Enter an Amount between 0 and 9999999 for Issue Cost of Food Group IV
"^DD",117.2,117.2,10,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,10,21,1,0)
Enter the Issue Cost for food Group IV.
"^DD",117.2,117.2,10,"DT")
2910506
"^DD",117.2,117.2,11,0)
ISSUE COST GRP 5^NJ7,0^^0;12^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,11,3)
Enter an Amount between 0 and 9999999 for Issue Cost of Food Group V
"^DD",117.2,117.2,11,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,11,21,1,0)
Enter the Issue Cost of Food Group V.
"^DD",117.2,117.2,11,"DT")
2910506
"^DD",117.2,117.2,12,0)
ISSUE COST GRP 6^NJ7,0^^0;13^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,12,3)
Enter an Amount between 0 and 9999999 for the Issue Cost of Food Group VI
"^DD",117.2,117.2,12,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,12,21,1,0)
Enter the Issue Cost of Food Group VI.
"^DD",117.2,117.2,12,"DT")
2910506
"^DD",117.2,117.2,13,0)
CLOS INV GRP 1^NJ6,0^^0;14^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,13,3)
Enter an Amount between 0 and 999999 for the Closing Inventory of Food Group I
"^DD",117.2,117.2,13,21,0)
^^1^1^2920501^^
"^DD",117.2,117.2,13,21,1,0)
Enter the Closing Inventory Cost for Food Group I.
"^DD",117.2,117.2,13,"DT")
2910506
"^DD",117.2,117.2,14,0)
CLOS INV GRP 2^NJ6,0^^0;15^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,14,3)
Enter an Amount between 0 and 999999 for Closing Inv Cost for Food Group II
"^DD",117.2,117.2,14,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,14,21,1,0)
Enter the Closing Inventory Cost for Food Group II.
"^DD",117.2,117.2,14,"DT")
2910506
"^DD",117.2,117.2,15,0)
CLOS INV GRP 3^NJ6,0^^0;16^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,15,3)
Enter an Amount between 0 and 999999 for the Closing Inv Cost of Food Group III
"^DD",117.2,117.2,15,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,15,21,1,0)
Enter the Closing Inventory Cost for Food Group III.
"^DD",117.2,117.2,15,"DT")
2910506
"^DD",117.2,117.2,16,0)
CLOS INV GRP 4^NJ6,0^^0;17^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,16,3)
Enter an Amount between 0 and 999999 for the Closing Inv Cost of Food Group IV
"^DD",117.2,117.2,16,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,16,21,1,0)
Enter the Closing Inventory Cost for Food Group IV.
"^DD",117.2,117.2,16,"DT")
2910506
"^DD",117.2,117.2,17,0)
CLOS INV GRP 5^NJ6,0^^0;18^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,17,3)
Enter an Amount between 0 and 999999 for Closing Inv Cost for Food Group V
"^DD",117.2,117.2,17,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,17,21,1,0)
Enter the Closing Inventory Cost for Food Group V.
"^DD",117.2,117.2,17,"DT")
2910506
"^DD",117.2,117.2,18,0)
CLOS INV GRP 6^NJ6,0^^0;19^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,18,3)
Enter an Amount between 0 and 999999 for the Closing Inv Cost of Food Group VI
"^DD",117.2,117.2,18,21,0)
^^1^1^2911113^
"^DD",117.2,117.2,18,21,1,0)
Enter the Closing Inventory Cost for Food Group VI.
"^DD",117.2,117.2,18,"DT")
2910506
"^DD",117.2,117.2,19,0)
% COST GRP 1^NJ2,0^^0;20^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,19,3)
Enter a Number between 1 and 99 for % Cost Recommended
"^DD",117.2,117.2,19,21,0)
^^1^1^2950217^^^^
"^DD",117.2,117.2,19,21,1,0)
The Percent Cost Recommended for Food Group I.
"^DD",117.2,117.2,19,"DT")
2910506
"^DD",117.2,117.2,20,0)
% COST GRP 2^NJ2,0^^0;21^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,20,3)
Enter a Number between 1 and 99 for % Cost Recommended of Food Group II
"^DD",117.2,117.2,20,21,0)
^^1^1^2950217^^^^
"^DD",117.2,117.2,20,21,1,0)
The Percent Cost Recommended for Food Group II.
"^DD",117.2,117.2,20,"DT")
2910506
"^DD",117.2,117.2,21,0)
% COST GRP 3^NJ2,0^^0;22^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,21,3)
Enter a Number between 1 and 99 for % Cost Recommended of Food Group III
"^DD",117.2,117.2,21,21,0)
^^1^1^2950217^^^^
"^DD",117.2,117.2,21,21,1,0)
The Percent Cost Recommended for Food Group III.
"^DD",117.2,117.2,21,"DT")
2910506
"^DD",117.2,117.2,22,0)
% COST GRP 4^NJ2,0^^0;23^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,22,3)
Enter a Number between 1 and 99 for % Cost Recommended of Food Group IV.
"^DD",117.2,117.2,22,21,0)
^^1^1^2950217^^^^
"^DD",117.2,117.2,22,21,1,0)
The Percent Cost Recommended for Food Group IV.
"^DD",117.2,117.2,22,"DT")
2910506
"^DD",117.2,117.2,23,0)
% COST GRP 5^NJ2,0^^0;24^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,23,3)
Enter a Number between 1 and 99 for % Cost Recommended of Food Group V
"^DD",117.2,117.2,23,21,0)
^^1^1^2950217^^^
"^DD",117.2,117.2,23,21,1,0)
The % Cost Recommended for Food Group V.
"^DD",117.2,117.2,23,"DT")
2910506
"^DD",117.2,117.2,24,0)
% COST GRP 6^NJ2,0^^0;25^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",117.2,117.2,24,3)
Enter a Number between 1 and 99 for % Cost Recommended of Food Group VI
"^DD",117.2,117.2,24,21,0)
^^1^1^2950217^^^
"^DD",117.2,117.2,24,21,1,0)
The % Cost Recommended for Food Group VI.
"^DD",117.2,117.2,24,"DT")
2910506
"^DD",117.3,117.3,0)
FIELD^^79^67
"^DD",117.3,117.3,0,"DDA")
N
"^DD",117.3,117.3,0,"DT")
3011009
"^DD",117.3,117.3,0,"IX","B",117.3,.01)

"^DD",117.3,117.3,0,"NM","ANNUAL REPORT")

"^DD",117.3,117.3,.01,0)
QTR/YR^RDX^^0;1^S %DT="E" D ^%DT S X=$E(Y,1,5)_"00" K:Y<1!($E(Y,4,5)>4)!($E(Y,2,3)<1) X I $D(X) S DINUM=X
"^DD",117.3,117.3,.01,1,0)
^.1
"^DD",117.3,117.3,.01,1,1,0)
117.3^B
"^DD",117.3,117.3,.01,1,1,1)
S ^FH(117.3,"B",$E(X,1,30),DA)=""
"^DD",117.3,117.3,.01,1,1,2)
K ^FH(117.3,"B",$E(X,1,30),DA)
"^DD",117.3,117.3,.01,1,1,"%D",0)
^^1^1^2931221^
"^DD",117.3,117.3,.01,1,1,"%D",1,0)
This is a normal B cross-reference of the QTR/YR field.
"^DD",117.3,117.3,.01,3)
ENTER A QTR AND A YEAR eg. 1/92, 2 92, 3-92, 04-92.
"^DD",117.3,117.3,.01,21,0)
^^1^1^2950223^^^^
"^DD",117.3,117.3,.01,21,1,0)
This field contains the Qtr/Yr of the Annual Report entry.
"^DD",117.3,117.3,.01,"DT")
2940104
"^DD",117.3,117.3,2,0)
REGION #^NJ1,0^^0;3^K:+X'=X!(X>7)!(X<1)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,2,3)
Type a Number between 1 and 7, 0 Decimal Digits
"^DD",117.3,117.3,2,21,0)
^^1^1^2920827^
"^DD",117.3,117.3,2,21,1,0)
This field contains the region number of the facility.
"^DD",117.3,117.3,2,"DT")
2920827
"^DD",117.3,117.3,3,0)
MULTI DIVISION FACILITY?^S^Y:YES;N:NO;^0;4^Q
"^DD",117.3,117.3,3,21,0)
^^1^1^2920827^
"^DD",117.3,117.3,3,21,1,0)
This field contains a Y or N if the facility is multi division.
"^DD",117.3,117.3,3,"DT")
2920827
"^DD",117.3,117.3,4,0)
RPM CLASSIFICATION^NJ1,0^^0;5^K:+X'=X!(X>6)!(X<1)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,4,3)
Type a Number between 1 and 6, 0 Decimal Digits
"^DD",117.3,117.3,4,21,0)
^^3^3^2920130^^^^
"^DD",117.3,117.3,4,21,1,0)
This field contains the RPM Classification which is number 1-6 used to
"^DD",117.3,117.3,4,21,2,0)
classify facilities by size, function, and specialty programs for
"^DD",117.3,117.3,4,21,3,0)
resource allocation purposes.
"^DD",117.3,117.3,4,"DT")
2920130
"^DD",117.3,117.3,5,0)
COMPLEXITY LEVEL^NJ1,0X^^0;6^K:+X'=X!(X>4)!(X<1)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,5,3)
Type a Number between 1 and 4, 0 Decimal Digits
"^DD",117.3,117.3,5,21,0)
^^3^3^2920130^
"^DD",117.3,117.3,5,21,1,0)
This field contains the Complexity Level which is number 1-4
"^DD",117.3,117.3,5,21,2,0)
that is determined by VACO criteria concerning size and complexity
"^DD",117.3,117.3,5,21,3,0)
and upon which grade structure is based.
"^DD",117.3,117.3,5,"DT")
2931230
"^DD",117.3,117.3,6,0)
VA SPON DIETETIC INTERNSHIP^S^Y:YES;N:NO;^0;7^Q
"^DD",117.3,117.3,6,21,0)
^^2^2^2950223^^
"^DD",117.3,117.3,6,21,1,0)
This field contains Y or N if there are VA Sponsored Dietetic
"^DD",117.3,117.3,6,21,2,0)
Internships.
"^DD",117.3,117.3,6,"DT")
2930202
"^DD",117.3,117.3,7,0)
AFFILIATED AP4?^S^Y:YES;N:NO;^0;8^Q
"^DD",117.3,117.3,7,21,0)
^^1^1^2920130^^
"^DD",117.3,117.3,7,21,1,0)
This field contains Y or N if there is Affiliated AP4.
"^DD",117.3,117.3,7,"DT")
2920130
"^DD",117.3,117.3,8,0)
AFFILIATED DIETETIC INTERN?^S^Y:YES;N:NO;^0;9^Q
"^DD",117.3,117.3,8,21,0)
^^1^1^2920130^^
"^DD",117.3,117.3,8,21,1,0)
This field contains Y or N if there is Affiliated Dietetic Internship.
"^DD",117.3,117.3,8,"DT")
2920130
"^DD",117.3,117.3,9,0)
AFFILIATED CUP?^S^Y:YES;N:NO;^0;10^Q
"^DD",117.3,117.3,9,21,0)
^^1^1^2920130^^
"^DD",117.3,117.3,9,21,1,0)
This field contains Y or N if there is Affiliated Cup.
"^DD",117.3,117.3,9,"DT")
2920130
"^DD",117.3,117.3,10,0)
VA SPONSORED AP4?^S^Y:YES;N:NO;^0;11^Q
"^DD",117.3,117.3,10,21,0)
^^1^1^2920130^^
"^DD",117.3,117.3,10,21,1,0)
This field contain Y or N if there is VA Sponsored AP4.
"^DD",117.3,117.3,10,"DT")
2920130
"^DD",117.3,117.3,11,0)
AFFILIATED DIETETIC TECH?^S^Y:YES;N:NO;^0;12^Q
"^DD",117.3,117.3,11,21,0)
^^1^1^2920130^^
"^DD",117.3,117.3,11,21,1,0)
This field contain Y or N if there is Affiliated Dietetic Technicians.
"^DD",117.3,117.3,11,"DT")
2920130
"^DD",117.3,117.3,12,0)
SPECIALIZED MEDICAL PROGRAMS^117.312P^^SPEC;0
"^DD",117.3,117.3,12,12)
SELECT ONLY THE SPECIALIZED MEDICAL PROGRAMS.
"^DD",117.3,117.3,12,12.1)
S DIC("S")="I $P(^(0),U,2)=""S"""
"^DD",117.3,117.3,12,21,0)
^^2^2^2930205^^^^
"^DD",117.3,117.3,12,21,1,0)
This multiple contains the categories of the Specialized Medical
"^DD",117.3,117.3,12,21,2,0)
Programs.
"^DD",117.3,117.3,13,0)
PRIMARY DELIVERY SYSTEM^117.313P^^DELV;0
"^DD",117.3,117.3,13,12)
SELECT ONLY THE PRIMARY DELIVERY SYSTEM.
"^DD",117.3,117.3,13,12.1)
S DIC("S")="I $P(^(0),U,2)=""D"""
"^DD",117.3,117.3,13,21,0)
^^1^1^2920916^^^^
"^DD",117.3,117.3,13,21,1,0)
This multiple contains the categories of the Primary Delivery System.
"^DD",117.3,117.3,15,0)
BEDSIDE TRAY^NJ4,0^^0;14^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,15,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117.3,117.3,15,21,0)
^^1^1^2920130^
"^DD",117.3,117.3,15,21,1,0)
This field contains the number of Bedside Tray Service.
"^DD",117.3,117.3,15,"DT")
2920303
"^DD",117.3,117.3,16,0)
CAFETERIA^NJ4,0^^0;15^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,16,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117.3,117.3,16,21,0)
^^1^1^2920130^
"^DD",117.3,117.3,16,21,1,0)
This field contains the number of Cafeteria Service.
"^DD",117.3,117.3,16,"DT")
2920303
"^DD",117.3,117.3,17,0)
DINING ROOM TRAY^NJ4,0^^0;16^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,17,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117.3,117.3,17,21,0)
^^2^2^2920130^
"^DD",117.3,117.3,17,21,1,0)
This field contains number of trays delivered to patients' table
"^DD",117.3,117.3,17,21,2,0)
in a dining Area.
"^DD",117.3,117.3,17,"DT")
2920303
"^DD",117.3,117.3,21,0)
OUTPATIENTS VISIT HOSP^NJ9,0^^1;1^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,21,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",117.3,117.3,21,21,0)
^^1^1^2950223^^^
"^DD",117.3,117.3,21,21,1,0)
This field contains the number of Inpatients being treated.
"^DD",117.3,117.3,21,"DT")
2920211
"^DD",117.3,117.3,23,0)
NUMBER OF SATELLITES^NJ1,0^^1;3^K:+X'=X!(X>5)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,23,3)
Type a Number between 0 and 5, 0 Decimal Digits
"^DD",117.3,117.3,23,21,0)
^^2^2^2950223^^
"^DD",117.3,117.3,23,21,1,0)
This field contains the number of Outpatients that visited the Satellite
"^DD",117.3,117.3,23,21,2,0)
Clinics.
"^DD",117.3,117.3,23,"DT")
2920211
"^DD",117.3,117.3,25,0)
SATELLITE LOC^117.325^^CLIN;0
"^DD",117.3,117.3,25,21,0)
^^2^2^2920130^
"^DD",117.3,117.3,25,21,1,0)
This multiple contains the Locations of the Satellite Clinics and
"^DD",117.3,117.3,25,21,2,0)
the number of Outpatients that visited them.
"^DD",117.3,117.3,26,0)
TOTAL MEALS SERVED^NJ9,0^^1;5^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,26,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",117.3,117.3,26,21,0)
^^1^1^2920130^
"^DD",117.3,117.3,26,21,1,0)
The Total Meals Served calculated.
"^DD",117.3,117.3,26,"DT")
2920130
"^DD",117.3,117.3,27,0)
TOTAL DAILY FTEE^NJ7,3^^1;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",117.3,117.3,27,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",117.3,117.3,27,21,0)
^^2^2^2920130^
"^DD",117.3,117.3,27,21,1,0)
This field contains the count of all personnel assigned to the Dietetic
"^DD",117.3,117.3,27,21,2,0)
Service and includes full-time and part-time employees.
"^DD",117.3,117.3,27,"DT")
2920130
"^DD",117.3,117.3,28,0)
CLINICAL FTEE^NJ7,3^^1;7^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",117.3,117.3,28,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",117.3,117.3,28,21,0)
^^3^3^2950104^^^^
"^DD",117.3,117.3,28,21,1,0)
This field contains the FTEE of the Clinical Dietitians
"^DD",117.3,117.3,28,21,2,0)
and Clinical Technicians who work with the Clinical
"^DD",117.3,117.3,28,21,3,0)
Dietitians in patient care activities.
"^DD",117.3,117.3,28,"DT")
2920130
"^DD",117.3,117.3,29,0)
ADMINISTRATIVE FTEE^NJ7,3^^1;8^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",117.3,117.3,29,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",117.3,117.3,29,21,0)
^^4^4^2950104^^^^
"^DD",117.3,117.3,29,21,1,0)
This field contains the FTEE of the Chief and Assistant Chief of
"^DD",117.3,117.3,29,21,2,0)
the Dietetic Service, Chief of the Administrative Section, Chief
"^DD",117.3,117.3,29,21,3,0)
Clinical Section, Administrative dietitians, internship,
"^DD",117.3,117.3,29,21,4,0)
education and staff development dietitians and any QA dietitians.
"^DD",117.3,117.3,29,"DT")
2920130
"^DD",117.3,117.3,30,0)
SUPPORT STAFF FTEE^NJ7,3^^1;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",117.3,117.3,30,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",117.3,117.3,30,21,0)
^^3^3^2950223^^^^
"^DD",117.3,117.3,30,21,1,0)
This field contains the FTEE of all secretaries, clerk-typists,
"^DD",117.3,117.3,30,21,2,0)
cost accountants and administrative technicians; it does not
"^DD",117.3,117.3,30,21,3,0)
include the diet communications personnel.
"^DD",117.3,117.3,30,"DT")
2920130
"^DD",117.3,117.3,31,0)
SUPERVISORY FTEE^NJ7,3^^1;10^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",117.3,117.3,31,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",117.3,117.3,31,21,0)
^^2^2^2950223^^^
"^DD",117.3,117.3,31,21,1,0)
This field contains the FTEE of all the supervisory cooks and the
"^DD",117.3,117.3,31,21,2,0)
supervisory food service workers.
"^DD",117.3,117.3,31,"DT")
2920130
"^DD",117.3,117.3,31.5,0)
MODIFIED DIET SNAPSHOT DATE^D^^1;12^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",117.3,117.3,31.5,21,0)
^^3^3^2920722^^^^
"^DD",117.3,117.3,31.5,21,1,0)
This field contains the Modified Diet Snapshot date for building the
"^DD",117.3,117.3,31.5,21,2,0)
list of dates in Tabulating the total Modified Diet and calculating
"^DD",117.3,117.3,31.5,21,3,0)
the average of a week for each quarter.
"^DD",117.3,117.3,31.5,"DT")
2920310
"^DD",117.3,117.3,31.6,0)
UNS/INT HOURS^NJ6,2^^1;13^K:+X'=X!(X>999)!(X<0)!(X?.E1"."3N.N) X
"^DD",117.3,117.3,31.6,3)
Type a Number between 0 and 999, 2 Decimal Digits
"^DD",117.3,117.3,31.6,21,0)
^^2^2^2921125^
"^DD",117.3,117.3,31.6,21,1,0)
This field contains both the number of unscheduled hours and
"^DD",117.3,117.3,31.6,21,2,0)
intermittent hours worked by measured personnel.
"^DD",117.3,117.3,31.6,"DT")
2921125
"^DD",117.3,117.3,32,0)
TOTAL COST PER DIEM^117.332^^COST;0
"^DD",117.3,117.3,32,21,0)
^^1^1^2920820^^^^
"^DD",117.3,117.3,32,21,1,0)
This multiple contains the Cost Per Diem and Cost Per Meal.
"^DD",117.3,117.3,32,"DT")
2920212
"^DD",117.3,117.3,38,0)
DIETETIC EQUIPMENT^117.338P^^EQUI;0
"^DD",117.3,117.3,38,12)
SELECT ONLY THE DIETETIC SERVICE EQUIPMENT.
"^DD",117.3,117.3,38,12.1)
S DIC("S")="I $P(^(0),U,2)=""E"""
"^DD",117.3,117.3,38,21,0)
^^1^1^2950223^^^^
"^DD",117.3,117.3,38,21,1,0)
This multiple contains the Dietetic Equipment available.
"^DD",117.3,117.3,38,"DT")
2920915
"^DD",117.3,117.3,39,0)
TOTAL CMR EQUIPMENT INV COST^NJ9,0^^3;1^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,39,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",117.3,117.3,39,21,0)
^^2^2^2930128^
"^DD",117.3,117.3,39,21,1,0)
This field is the total Consolidated Memorandum Report (CMR) Equipment
"^DD",117.3,117.3,39,21,2,0)
inventory Cost.
"^DD",117.3,117.3,39,"DT")
2930128
"^DD",117.3,117.3,40,0)
NUTRITIVE ANALYSIS DATE^D^^3;2^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",117.3,117.3,40,21,0)
^^2^2^2930128^^
"^DD",117.3,117.3,40,21,1,0)
This field contains the date the Nutritive Analysis Average for
"^DD",117.3,117.3,40,21,2,0)
one week regular menu was taken.
"^DD",117.3,117.3,40,"DT")
2930128
"^DD",117.3,117.3,41,0)
CALORIES^NJ4,0^^3;3^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,41,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",117.3,117.3,41,21,0)
^^2^2^2930128^
"^DD",117.3,117.3,41,21,1,0)
This field contains the amount of Calories taken from the Nutritive
"^DD",117.3,117.3,41,21,2,0)
Average of one week regular menu.
"^DD",117.3,117.3,41,"DT")
2930128
"^DD",117.3,117.3,42,0)
% CHO^NJ2,0^^3;4^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,42,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",117.3,117.3,42,21,0)
^^2^2^2930128^^
"^DD",117.3,117.3,42,21,1,0)
This field contains the percentage Carbohydrates taken from the
"^DD",117.3,117.3,42,21,2,0)
Nutritive Analysis Average of one week regular menu.
"^DD",117.3,117.3,42,"DT")
2930128
"^DD",117.3,117.3,43,0)
% PRO^NJ2,0^^3;5^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,43,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",117.3,117.3,43,21,0)
^^2^2^2930128^
"^DD",117.3,117.3,43,21,1,0)
This field contains the percentage Protein taken from the Nutritive
"^DD",117.3,117.3,43,21,2,0)
Analysis Average of one week regular menu.
"^DD",117.3,117.3,43,"DT")
2930128
"^DD",117.3,117.3,44,0)
% FAT^NJ2,0^^3;6^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,44,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",117.3,117.3,44,21,0)
^^2^2^2930128^
"^DD",117.3,117.3,44,21,1,0)
This field contains the percentage Fat taken from the Nutritive
"^DD",117.3,117.3,44,21,2,0)
Analysis Average of one week regular menu.
"^DD",117.3,117.3,44,"DT")
2930128
"^DD",117.3,117.3,45,0)
MG CHOL^NJ3,0^^3;7^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,45,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",117.3,117.3,45,21,0)
^^2^2^2930706^^^
"^DD",117.3,117.3,45,21,1,0)
This field contains the milligrams Cholesterol taken from the Nutritive
"^DD",117.3,117.3,45,21,2,0)
Analysis Average of one week regular menu.
"^DD",117.3,117.3,45,"DT")
2930706
"^DD",117.3,117.3,46,0)
MG NA^NJ5,0^^3;8^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,46,3)
Type a Number between 0 and 99999, 0 Decimal Digits
"^DD",117.3,117.3,46,21,0)
^^2^2^2930706^^^
"^DD",117.3,117.3,46,21,1,0)
This field contains the milligrams Sodium taken from Nutritive
"^DD",117.3,117.3,46,21,2,0)
Analysis Average.
"^DD",117.3,117.3,46,"DT")
2930706
"^DD",117.3,117.3,47,0)
STAFF CERT DIAB ED (CDE)^NJ2,0^^1;14^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,47,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",117.3,117.3,47,21,0)
^^2^2^2930129^^^^
"^DD",117.3,117.3,47,21,1,0)
This field contains the number of the Specialty Staff Certified Diabetes
"^DD",117.3,117.3,47,21,2,0)
Educators (CDE) at your facility.
"^DD",117.3,117.3,47,"DT")
2930129
"^DD",117.3,117.3,48,0)
STAFF CERT IN NUTR SUPP^NJ2,0^^1;15^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,48,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",117.3,117.3,48,21,0)
^^2^2^2930129^^^^
"^DD",117.3,117.3,48,21,1,0)
This field contains the number of Specialty Staff Certified in Nutrition
"^DD",117.3,117.3,48,21,2,0)
Support at your facility.
"^DD",117.3,117.3,48,"DT")
2930129
"^DD",117.3,117.3,49,0)
STAFF REG CLIN DIE TECH^NJ2,0^^1;16^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,49,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",117.3,117.3,49,21,0)
^^2^2^2930129^^
"^DD",117.3,117.3,49,21,1,0)
This field contains the number of Specialty Staff Registered
"^DD",117.3,117.3,49,21,2,0)
Clinical Dietetic Technicians at your facility.
"^DD",117.3,117.3,49,"DT")
2930129
"^DD",117.3,117.3,50,0)
STAFF W/CLIN PRIVILEGES^NJ2,0^^1;17^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.3,50,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",117.3,117.3,50,21,0)
^^2^2^2930129^
"^DD",117.3,117.3,50,21,1,0)
This field contains the number of Specialty Staff with Clinical
"^DD",117.3,117.3,50,21,2,0)
Privileges (not scope of practice).
"^DD",117.3,117.3,50,"DT")
2930129
"^DD",117.3,117.3,51,0)
DO YOU USE COOK CHILL FOODS?^S^Y:YES;N:NO;^0;21^Q
"^DD",117.3,117.3,51,21,0)
^^2^2^2930204^
"^DD",117.3,117.3,51,21,1,0)
This field contains a Y or N on whether the Dietitians use Cook
"^DD",117.3,117.3,51,21,2,0)
Chill Foods.
"^DD",117.3,117.3,51,"DT")
2930204
"^DD",117.3,117.3,52,0)
SELECT 1 OR 2^S^1:LESS AND EQUAL 25% OF MENU ITEMS;2:GREATER THAN 25% OF MENU ITEMS;^0;22^Q
"^DD",117.3,117.3,52,21,0)
^^3^3^2930204^
"^DD",117.3,117.3,52,21,1,0)
This field will be asked if the Dietitians use Cook Chill Foods.
"^DD",117.3,117.3,52,21,2,0)
It contains a 1 for less and equal to 25% of menu items cook
"^DD",117.3,117.3,52,21,3,0)
chilled or a 2 for greater than 25% of menu items cook chilled.
"^DD",117.3,117.3,52,"DT")
2930204
"^DD",117.3,117.3,53,0)
FUNDED NUTRITION RESEARCH?^S^Y:YES;N:NO;^0;23^Q
"^DD",117.3,117.3,53,21,0)
^^2^2^2930204^
"^DD",117.3,117.3,53,21,1,0)
This field contains a Y or N on whether the Dietitians have
"^DD",117.3,117.3,53,21,2,0)
Funded Nutrition Research.
"^DD",117.3,117.3,53,"DT")
2930204
"^DD",117.3,117.3,54,0)
ASSIGNED CLINICAL FTEE^NJ4,1^^0;24^K:+X'=X!(X>99.9)!(X<0)!(X?.E1"."2N.N) X
"^DD",117.3,117.3,54,3)
Type a Number between 0 and 99.9, 1 Decimal Digit
"^DD",117.3,117.3,54,21,0)
^^2^2^2930204^
"^DD",117.3,117.3,54,21,1,0)
This field contains the Assigned Clinical FTEE on the Funded
"^DD",117.3,117.3,54,21,2,0)
Nutrition Research.
"^DD",117.3,117.3,54,"DT")
2930204
"^DD",117.3,117.3,55,0)
UNFUNDED NUTRITION RESEARCH?^S^Y:YES;N:NO;^0;25^Q
"^DD",117.3,117.3,55,21,0)
^^2^2^2930204^
"^DD",117.3,117.3,55,21,1,0)
This field contains a Y or a N on whether the Dietitians have
"^DD",117.3,117.3,55,21,2,0)
Unfunded Nutrition Research.
"^DD",117.3,117.3,55,"DT")
2930204
"^DD",117.3,117.3,56,0)
AREAS OF RESEARCH^117.356S^^AREA;0
"^DD",117.3,117.3,56,21,0)
^^2^2^2930204^
"^DD",117.3,117.3,56,21,1,0)
This multiple contains a list of Areas of Research under the
"^DD",117.3,117.3,56,21,2,0)
Unfunded Nutrition Research.
"^DD",117.3,117.3,57,0)
ASSIGNED TOTAL CLINICAL FTEE^NJ5,1^^0;26^K:+X'=X!(X>999.9)!(X<0)!(X?.E1"."2N.N) X
"^DD",117.3,117.3,57,3)
Type a Number between 0 and 999.9, 1 Decimal Digit
"^DD",117.3,117.3,57,21,0)
^^3^3^2930204^
"^DD",117.3,117.3,57,21,1,0)
This field contains the Assigned Total Clinical FTEE of the
"^DD",117.3,117.3,57,21,2,0)
total of all the Areas of Research selected under the Unfunded
"^DD",117.3,117.3,57,21,3,0)
Nutrition Research.
"^DD",117.3,117.3,57,"DT")
2930204
"^DD",117.3,117.3,58,0)
OLD SURVEY - APPETIZING^117.358^^APP;0
"^DD",117.3,117.3,58,21,0)
^.001^3^3^3011003^^^^
"^DD",117.3,117.3,58,21,1,0)
This multiple contains the numbers surveyed in regards to the five
"^DD",117.3,117.3,58,21,2,0)
ratings, Very Good, Good, Average, Fair, and Poor, for question one
"^DD",117.3,117.3,58,21,3,0)
of the Dietetic Survey on whether the food looked attractive, appetizing.
"^DD",117.3,117.3,58,"DT")
3011003
"^DD",117.3,117.3,59,0)
OLD SURVEY - TASTE^117.359^^TAS;0
"^DD",117.3,117.3,59,21,0)
^^3^3^2931228^^
"^DD",117.3,117.3,59,21,1,0)
This multiple contains the numbers surveyed in regards to the five
"^DD",117.3,117.3,59,21,2,0)
ratings, Very Good, Good, Average, Fair, and Poor, for question two
"^DD",117.3,117.3,59,21,3,0)
of the Dietetic Survey on whether the food tastes good.
"^DD",117.3,117.3,59,"DT")
3011003
"^DD",117.3,117.3,60,0)
OLD SURVEY - TEMPERATURE^117.31^^TEM;0
"^DD",117.3,117.3,60,21,0)
^.001^3^3^3011004^^^^
"^DD",117.3,117.3,60,21,1,0)
This multiple contains the numbers surveyed in regards to the five
"^DD",117.3,117.3,60,21,2,0)
ratings, Very Good, Good, Average, Fair, and Poor, for question three
"^DD",117.3,117.3,60,21,3,0)
of the Dietetic Survey on the temperature of the food.
"^DD",117.3,117.3,60,22)

"^DD",117.3,117.3,60,"DT")
3011003
"^DD",117.3,117.3,61,0)
OLD SURVEY - VARIETY^117.361^^VAR;0
"^DD",117.3,117.3,61,21,0)
^^3^3^2931228^^
"^DD",117.3,117.3,61,21,1,0)
This multiple contains the numbers surveyed in regards to the five
"^DD",117.3,117.3,61,21,2,0)
ratings, Very Good, Good, Average, Fair, and Poor, for question
"^DD",117.3,117.3,61,21,3,0)
four of the Dietetic Survey on the variety of foods served.
"^DD",117.3,117.3,61,"DT")
3011003
"^DD",117.3,117.3,62,0)
OLD SURVEY - CLEANLINESS^117.362^^CLN;0
"^DD",117.3,117.3,62,21,0)
^^4^4^2931228^
"^DD",117.3,117.3,62,21,1,0)
This multiple contains the numbers surveyed in regards to the five
"^DD",117.3,117.3,62,21,2,0)
ratings, Very Good, Good, Average, Fair, and Poor, for question five
"^DD",117.3,117.3,62,21,3,0)
of the Dietetic Survey on whether the dishes, cups, and utensils
"^DD",117.3,117.3,62,21,4,0)
were clean.
"^DD",117.3,117.3,62,"DT")
3011003
"^DD",117.3,117.3,63,0)
OLD SURVEY - COURTEOUS^117.363^^CRS;0
"^DD",117.3,117.3,63,21,0)
^^4^4^2931228^
"^DD",117.3,117.3,63,21,1,0)
This multiple contains the number surveyed in regards to the five
"^DD",117.3,117.3,63,21,2,0)
ratings, Very Good, Good, Average, Fair, and Poor, for question
"^DD",117.3,117.3,63,21,3,0)
six of the Dietetic Survey on whether the Dietetic Service staff
"^DD",117.3,117.3,63,21,4,0)
were courteous.
"^DD",117.3,117.3,63,"DT")
3011003
"^DD",117.3,117.3,64,0)
OLD SURVEY - TIME^117.364^^TIM;0
"^DD",117.3,117.3,64,21,0)
^^3^3^2931228^^
"^DD",117.3,117.3,64,21,1,0)
This multiple contains the numbers surveyed in regards to the five
"^DD",117.3,117.3,64,21,2,0)
ratings, Very Good, Good, Average, Fair, and Poor, for question seven
"^DD",117.3,117.3,64,21,3,0)
of the Dietetic Survey on whether there was adequate time to eat.
"^DD",117.3,117.3,64,"DT")
3011003
"^DD",117.3,117.3,65,0)
OLD SURVEY - INFO^117.365^^INF;0
"^DD",117.3,117.3,65,21,0)
^^4^4^2931228^^
"^DD",117.3,117.3,65,21,1,0)
This multiple contains the numbers surveyed in regards to the five
"^DD",117.3,117.3,65,21,2,0)
ratings, Very Good, Good, Average, Fair, and Poor, for question eight
"^DD",117.3,117.3,65,21,3,0)
of the Dietetic Survey on the diet information given by the
"^DD",117.3,117.3,65,21,4,0)
dietitian/dietetic technician.
"^DD",117.3,117.3,65,"DT")
3011003
"^DD",117.3,117.3,66,0)
OLD SURVEY - OVERALL^117.366^^OVA;0
"^DD",117.3,117.3,66,21,0)
^^3^3^2931228^^^^
"^DD",117.3,117.3,66,21,1,0)
This multiple contains the numbers surveyed in regards to the five
"^DD",117.3,117.3,66,21,2,0)
ratings, Very Good, Good, Average, Fair, and Poor, for question nine
"^DD",117.3,117.3,66,21,3,0)
of the Dietetic Survey on the overall quality of the food service.
"^DD",117.3,117.3,66,"DT")
3011003
"^DD",117.3,117.3,70,0)
APPETIZING^117.37^^Q1AP;0
"^DD",117.3,117.3,70,21,0)
^.001^3^3^3011004^^^^
"^DD",117.3,117.3,70,21,1,0)
This multiple contains the numbers surveyed in regard to the five
"^DD",117.3,117.3,70,21,2,0)
ratings, Excellent, Very Good, Good, Fair and Unacceptable for question #1
"^DD",117.3,117.3,70,21,3,0)
of the Dietetic Survey on whether the food looked appealing and appetizing.
"^DD",117.3,117.3,71,0)
FOODS PREFERRED^117.371^^Q2FP;0
"^DD",117.3,117.3,71,21,0)
^.001^3^3^3011004^^^
"^DD",117.3,117.3,71,21,1,0)
This multiple contains the numbers surveyed in regard to the five
"^DD",117.3,117.3,71,21,2,0)
ratings, Excellent, Very Good, Good, Fair and Unacceptable for question #2
"^DD",117.3,117.3,71,21,3,0)
of the Dietetic Survey on whether the meals include preferred foods.
"^DD",117.3,117.3,72,0)
HOT ENOUGH^117.372^^Q3HF;0
"^DD",117.3,117.3,72,21,0)
^.001^3^3^3011004^^^^
"^DD",117.3,117.3,72,21,1,0)
This multiple contains the numbers surveyed in regard to the five
"^DD",117.3,117.3,72,21,2,0)
ratings, Excellent, Very Good, Good, Fair and Unacceptable for question #3
"^DD",117.3,117.3,72,21,3,0)
of the Dietetic Survey on whether the food was hot enough.
"^DD",117.3,117.3,73,0)
COLD ENOUGH^117.373^^Q4CF;0
"^DD",117.3,117.3,73,21,0)
^.001^4^4^3011004^^^^
"^DD",117.3,117.3,73,21,1,0)
This multiple contains the numbers surveyed in regard to the five
"^DD",117.3,117.3,73,21,2,0)
ratings, Excellent, Very Good, Good, Fair and Unacceptable for
"^DD",117.3,117.3,73,21,3,0)
question #4 of the Dietetic Survey on whether items such as juice,
"^DD",117.3,117.3,73,21,4,0)
milk and desserts were cold enough.
"^DD",117.3,117.3,74,0)
COURTEOUS^117.374^^Q5CR;0
"^DD",117.3,117.3,74,21,0)
^.001^3^3^3011004^^^
"^DD",117.3,117.3,74,21,1,0)
This multiple contains the numbers surveyed in regard to the five ratings,
"^DD",117.3,117.3,74,21,2,0)
Excellent, Very Good, Good, Fair and Unacceptable for question #5 of the
"^DD",117.3,117.3,74,21,3,0)
Dietetic Survey on whether NF&S employees were polite.
"^DD",117.3,117.3,75,0)
PREFERENCES DISCUSSED^117.375^^Q6PD;0
"^DD",117.3,117.3,75,21,0)
^.001^3^3^3011009^^^^
"^DD",117.3,117.3,75,21,1,0)
This multiple contains the numbers surveyed in regard to the five ratings,
"^DD",117.3,117.3,75,21,2,0)
Excellent, Very Good, Good, Fair and Unacceptable for question #6 of the
"^DD",117.3,117.3,75,21,3,0)
Dietetic Survey on whether patient's food likes and dislikes are discussed.
"^DD",117.3,117.3,76,0)
TIMELINESS^117.376^^Q7TI;0
"^DD",117.3,117.3,76,21,0)
^.001^3^3^3011009^^^^
"^DD",117.3,117.3,76,21,1,0)
This multiple contains the numbers surveyed in regard to the five ratings,
"^DD",117.3,117.3,76,21,2,0)
Excellent, Very Good, Good, Fair and Unacceptable for question #7 of the
"^DD",117.3,117.3,76,21,3,0)
Dietetic Survey on whether meals are served about the same time each day.
"^DD",117.3,117.3,77,0)
ENOUGH TIME^117.377^^Q8ET;0
"^DD",117.3,117.3,77,21,0)
^.001^3^3^3011009^^^^
"^DD",117.3,117.3,77,21,1,0)
This multiple contains the numbers surveyed in regard to the five
"^DD",117.3,117.3,77,21,2,0)
ratings, Excellent, Very Good, Good, Fair and Unacceptable for question #8
"^DD",117.3,117.3,77,21,3,0)
of the Dietetic Survey on whether the patient had enough time to eat.
"^DD",117.3,117.3,78,0)
NUTRITIONAL INFO^117.378^^Q9NI;0
"^DD",117.3,117.3,78,21,0)
^.001^4^4^3011009^^^^
"^DD",117.3,117.3,78,21,1,0)
This multiple contains the numbers surveyed in regard to the five ratings,
"^DD",117.3,117.3,78,21,2,0)
Excellent, Very Good, Good, Fair and Unacceptable for question #9 of the
"^DD",117.3,117.3,78,21,3,0)
Dietetic Survey on whether the patient received nutritional information 
"^DD",117.3,117.3,78,21,4,0)
or an individual diet plan.
"^DD",117.3,117.3,79,0)
OVERALL^117.379^^Q10V;0
"^DD",117.3,117.3,79,21,0)
^.001^3^3^3011009^^^^
"^DD",117.3,117.3,79,21,1,0)
This multiple contains the numbers surveyed in regard to the five ratings,
"^DD",117.3,117.3,79,21,2,0)
Excellent, Very Good, Good, Fair and Unacceptable for question #10 of the
"^DD",117.3,117.3,79,21,3,0)
Dietetic Survey on the overall quality of the N&FS.
"^DD",117.3,117.31,0)
OLD SURVEY - TEMPERATURE SUB-FIELD^^6^7
"^DD",117.3,117.31,0,"DT")
2931223
"^DD",117.3,117.31,0,"IX","B",117.31,.01)

"^DD",117.3,117.31,0,"NM","OLD SURVEY - TEMPERATURE")

"^DD",117.3,117.31,0,"UP")
117.3
"^DD",117.3,117.31,.01,0)
TEMPERATURE NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.31,.01,1,0)
^.1
"^DD",117.3,117.31,.01,1,1,0)
117.31^B
"^DD",117.3,117.31,.01,1,1,1)
S ^FH(117.3,DA(1),"TEM","B",$E(X,1,30),DA)=""
"^DD",117.3,117.31,.01,1,1,2)
K ^FH(117.3,DA(1),"TEM","B",$E(X,1,30),DA)
"^DD",117.3,117.31,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.31,.01,21,0)
^^2^2^2931223^
"^DD",117.3,117.31,.01,21,1,0)
This field contains a sequential number assigned to question three
"^DD",117.3,117.31,.01,21,2,0)
of the Dietetic Survey and has no meaning.
"^DD",117.3,117.31,.01,"DT")
2931223
"^DD",117.3,117.31,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.31,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.31,1,4)
D HEL^FHADR9
"^DD",117.3,117.31,1,21,0)
^^2^2^2931228^^^
"^DD",117.3,117.31,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the
"^DD",117.3,117.31,1,21,2,0)
ratings specified in front of them on question three of the survey.
"^DD",117.3,117.31,1,"DT")
2931230
"^DD",117.3,117.31,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.31,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.31,2,4)
D HEL^FHADR9
"^DD",117.3,117.31,2,21,0)
^^2^2^2931223^
"^DD",117.3,117.31,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the
"^DD",117.3,117.31,2,21,2,0)
ratings specified in front of them for question three of the survey.
"^DD",117.3,117.31,2,"DT")
2931230
"^DD",117.3,117.31,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.31,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.31,3,4)
D HEL^FHADR9
"^DD",117.3,117.31,3,21,0)
^^2^2^2931223^
"^DD",117.3,117.31,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the
"^DD",117.3,117.31,3,21,2,0)
ratings specified in front of them on question three of the survey.
"^DD",117.3,117.31,3,"DT")
2931230
"^DD",117.3,117.31,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.31,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.31,4,4)
D HEL^FHADR9
"^DD",117.3,117.31,4,21,0)
^^2^2^2931223^
"^DD",117.3,117.31,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the
"^DD",117.3,117.31,4,21,2,0)
ratings specified in front of them on question three of the survey.
"^DD",117.3,117.31,4,"DT")
2931230
"^DD",117.3,117.31,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.31,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.31,5,4)
D HEL^FHADR9
"^DD",117.3,117.31,5,21,0)
^^2^2^2931223^
"^DD",117.3,117.31,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the
"^DD",117.3,117.31,5,21,2,0)
ratings specified in front of them on question three of the survey.
"^DD",117.3,117.31,5,"DT")
2931230
"^DD",117.3,117.31,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.31,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.31,6,4)
D HEL^FHADR9
"^DD",117.3,117.31,6,21,0)
^^3^3^2931229^^
"^DD",117.3,117.31,6,21,1,0)
This is a rating string containing numbers surveyed in other service
"^DD",117.3,117.31,6,21,2,0)
with the ratings specified in front of them on question three of
"^DD",117.3,117.31,6,21,3,0)
the survey.
"^DD",117.3,117.31,6,"DT")
2931230
"^DD",117.3,117.312,0)
SPECIALIZED MEDICAL PROGRAMS SUB-FIELD^^1^2
"^DD",117.3,117.312,0,"DT")
2920915
"^DD",117.3,117.312,0,"IX","B",117.312,.01)

"^DD",117.3,117.312,0,"NM","SPECIALIZED MEDICAL PROGRAMS")

"^DD",117.3,117.312,0,"UP")
117.3
"^DD",117.3,117.312,.01,0)
SPECIALIZED MEDICAL PROGRAMS^M*P117.4'^FH(117.4,^0;1^S DIC("S")="I $P(^(0),U,2)=""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",117.3,117.312,.01,1,0)
^.1
"^DD",117.3,117.312,.01,1,1,0)
117.312^B
"^DD",117.3,117.312,.01,1,1,1)
S ^FH(117.3,DA(1),"SPEC","B",$E(X,1,30),DA)=""
"^DD",117.3,117.312,.01,1,1,2)
K ^FH(117.3,DA(1),"SPEC","B",$E(X,1,30),DA)
"^DD",117.3,117.312,.01,12)
SELECT ONLY THE SPECIALIZED MEDICAL PROGRAMS.
"^DD",117.3,117.312,.01,12.1)
S DIC("S")="I $P(^(0),U,2)=""S"""
"^DD",117.3,117.312,.01,21,0)
^^2^2^2920916^^^^
"^DD",117.3,117.312,.01,21,1,0)
This field points to the Dietetic Report Categories for the Specialized
"^DD",117.3,117.312,.01,21,2,0)
Medical Programs.
"^DD",117.3,117.312,.01,"DT")
2920915
"^DD",117.3,117.312,1,0)
ASSIGNED CLINICAL FTEE^NJ4,1^^0;2^K:+X'=X!(X>99.9)!(X<0)!(X?.E1"."2N.N) X
"^DD",117.3,117.312,1,3)
Type a Number between 0 and 99.9, 1 Decimal Digit
"^DD",117.3,117.312,1,21,0)
^^2^2^2920130^
"^DD",117.3,117.312,1,21,1,0)
This field contains the Assigned Clinical Ftee of the Specialized
"^DD",117.3,117.312,1,21,2,0)
Medical Programs.
"^DD",117.3,117.312,1,"DT")
2920130
"^DD",117.3,117.313,0)
PRIMARY DELIVERY SYSTEM SUB-FIELD^^.01^1
"^DD",117.3,117.313,0,"DT")
2920915
"^DD",117.3,117.313,0,"IX","B",117.313,.01)

"^DD",117.3,117.313,0,"NM","PRIMARY DELIVERY SYSTEM")

"^DD",117.3,117.313,0,"UP")
117.3
"^DD",117.3,117.313,.01,0)
PRIMARY DELIVERY SYSTEM^M*P117.4'^FH(117.4,^0;1^S DIC("S")="I $P(^(0),U,2)=""D""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",117.3,117.313,.01,1,0)
^.1
"^DD",117.3,117.313,.01,1,1,0)
117.313^B
"^DD",117.3,117.313,.01,1,1,1)
S ^FH(117.3,DA(1),"DELV","B",$E(X,1,30),DA)=""
"^DD",117.3,117.313,.01,1,1,2)
K ^FH(117.3,DA(1),"DELV","B",$E(X,1,30),DA)
"^DD",117.3,117.313,.01,12)
SELECT ONLY THE PRIMARY DELIVERY SYSTEM.
"^DD",117.3,117.313,.01,12.1)
S DIC("S")="I $P(^(0),U,2)=""D"""
"^DD",117.3,117.313,.01,21,0)
^^2^2^2920916^^^^
"^DD",117.3,117.313,.01,21,1,0)
This field points to the Dietetic Report Categories for the Primary
"^DD",117.3,117.313,.01,21,2,0)
Delivery System.
"^DD",117.3,117.313,.01,"DT")
2920915
"^DD",117.3,117.325,0)
SATELLITE LOC SUB-FIELD^^1^2
"^DD",117.3,117.325,0,"DT")
2920130
"^DD",117.3,117.325,0,"IX","B",117.325,.01)

"^DD",117.3,117.325,0,"NM","SATELLITE LOC")

"^DD",117.3,117.325,0,"UP")
117.3
"^DD",117.3,117.325,.01,0)
SATELLITE LOC^MF^^0;1^K:$L(X)>20!($L(X)<3) X
"^DD",117.3,117.325,.01,1,0)
^.1
"^DD",117.3,117.325,.01,1,1,0)
117.325^B
"^DD",117.3,117.325,.01,1,1,1)
S ^FH(117.3,DA(1),"CLIN","B",$E(X,1,30),DA)=""
"^DD",117.3,117.325,.01,1,1,2)
K ^FH(117.3,DA(1),"CLIN","B",$E(X,1,30),DA)
"^DD",117.3,117.325,.01,3)
Answer must be 3-20 characters in length.
"^DD",117.3,117.325,.01,21,0)
^^1^1^2920130^
"^DD",117.3,117.325,.01,21,1,0)
This field contains the Location of the Satellite Clinics.
"^DD",117.3,117.325,.01,"DT")
2920130
"^DD",117.3,117.325,1,0)
TOTAL # OF SAT OUTPAT VISITS^NJ9,0^^0;2^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",117.3,117.325,1,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",117.3,117.325,1,21,0)
^^1^1^2930126^^^
"^DD",117.3,117.325,1,21,1,0)
This field contains the number of Outpatients that visited the Clinics.
"^DD",117.3,117.325,1,"DT")
2930126
"^DD",117.3,117.332,0)
TOTAL COST PER DIEM SUB-FIELD^^7^8
"^DD",117.3,117.332,0,"DT")
2920323
"^DD",117.3,117.332,0,"IX","B",117.332,.01)

"^DD",117.3,117.332,0,"NM","TOTAL COST PER DIEM")

"^DD",117.3,117.332,0,"UP")
117.3
"^DD",117.3,117.332,.01,0)
830 REPORT OF COSTS^NJ13,2^^0;1^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999999)!(X<0) X
"^DD",117.3,117.332,.01,1,0)
^.1
"^DD",117.3,117.332,.01,1,1,0)
117.332^B
"^DD",117.3,117.332,.01,1,1,1)
S ^FH(117.3,DA(1),"COST","B",$E(X,1,30),DA)=""
"^DD",117.3,117.332,.01,1,1,2)
K ^FH(117.3,DA(1),"COST","B",$E(X,1,30),DA)
"^DD",117.3,117.332,.01,3)
Type a Dollar Amount between 0 and 9999999999, 2 Decimal Digits
"^DD",117.3,117.332,.01,21,0)
^^1^1^2920820^^^^
"^DD",117.3,117.332,.01,21,1,0)
This field contains the cumulative fiscal year totals on the 830 Report.
"^DD",117.3,117.332,.01,"DT")
2920325
"^DD",117.3,117.332,1,0)
TOTAL PERSONAL SERVICE^NJ13,2^^0;2^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999999)!(X<0) X
"^DD",117.3,117.332,1,3)
Type a Dollar Amount between 0 and 9999999999, 2 Decimal Digits
"^DD",117.3,117.332,1,21,0)
^^1^1^2920212^^^
"^DD",117.3,117.332,1,21,1,0)
This field contains the Total Personal Service.
"^DD",117.3,117.332,1,"DT")
2920323
"^DD",117.3,117.332,2,0)
PERSONAL SERVICE-TECH 1019^NJ13,2^^0;3^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999999)!(X<0) X
"^DD",117.3,117.332,2,3)
Type a Dollar Amount between 0 and 9999999999, 2 Decimal Digits
"^DD",117.3,117.332,2,21,0)
^^1^1^2920212^^
"^DD",117.3,117.332,2,21,1,0)
This field contains the Technicians Cost of Personal Service.
"^DD",117.3,117.332,2,"DT")
2930128
"^DD",117.3,117.332,3,0)
PERSONAL SERVICE-DIETITNS 1018^NJ13,2^^0;4^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999999)!(X<0) X
"^DD",117.3,117.332,3,3)
Type a Dollar Amount between 0 and 9999999999, 2 Decimal Digits
"^DD",117.3,117.332,3,21,0)
^^1^1^2920212^^
"^DD",117.3,117.332,3,21,1,0)
This field contains the Dietitians Cost of Personal Service.
"^DD",117.3,117.332,3,"DT")
2930128
"^DD",117.3,117.332,4,0)
PERSONAL SERVICE-WAGEBRD 1008^NJ13,2^^0;5^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999999)!(X<0) X
"^DD",117.3,117.332,4,3)
Type a Dollar Amount between 0 and 9999999999, 2 Decimal Digits
"^DD",117.3,117.332,4,21,0)
^^1^1^2920212^^
"^DD",117.3,117.332,4,21,1,0)
This field contains the Wageboard Cost of Personal Service.
"^DD",117.3,117.332,4,"DT")
2930128
"^DD",117.3,117.332,5,0)
PERSONAL SERVICE-CLERICAL 1002^NJ13,2^^0;6^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999999)!(X<0) X
"^DD",117.3,117.332,5,3)
Type a Dollar Amount between 0 and 9999999999, 2 Decimal Digits
"^DD",117.3,117.332,5,21,0)
^^1^1^2920212^^
"^DD",117.3,117.332,5,21,1,0)
This field contains the Clerical Cost of Personal Service.
"^DD",117.3,117.332,5,"DT")
2930128
"^DD",117.3,117.332,6,0)
SUBSISTENCE 2610^NJ13,2^^0;7^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999999)!(X<0) X
"^DD",117.3,117.332,6,3)
Type a Dollar Amount between 0 and 9999999999, 2 Decimal Digits
"^DD",117.3,117.332,6,21,0)
^^1^1^2920212^^
"^DD",117.3,117.332,6,21,1,0)
This field contains the Subsistence Cost.
"^DD",117.3,117.332,6,"DT")
2930128
"^DD",117.3,117.332,7,0)
OPERATING SUPPLIES 2660^NJ13,2^^0;8^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999999)!(X<0) X
"^DD",117.3,117.332,7,3)
Type a Dollar Amount between 0 and 9999999999, 2 Decimal Digits
"^DD",117.3,117.332,7,21,0)
^^1^1^2920212^^^
"^DD",117.3,117.332,7,21,1,0)
This field contains the Operating Supplies Cost.
"^DD",117.3,117.332,7,"DT")
2930128
"^DD",117.3,117.338,0)
DIETETIC EQUIPMENT SUB-FIELD^^1^2
"^DD",117.3,117.338,0,"DT")
2920915
"^DD",117.3,117.338,0,"IX","B",117.338,.01)

"^DD",117.3,117.338,0,"NM","DIETETIC EQUIPMENT")

"^DD",117.3,117.338,0,"UP")
117.3
"^DD",117.3,117.338,.01,0)
DIETETIC EQUIPMENT^M*P117.4'^FH(117.4,^0;1^S DIC("S")="I $P(^(0),U,2)=""E""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",117.3,117.338,.01,1,0)
^.1
"^DD",117.3,117.338,.01,1,1,0)
117.338^B
"^DD",117.3,117.338,.01,1,1,1)
S ^FH(117.3,DA(1),"EQUI","B",$E(X,1,30),DA)=""
"^DD",117.3,117.338,.01,1,1,2)
K ^FH(117.3,DA(1),"EQUI","B",$E(X,1,30),DA)
"^DD",117.3,117.338,.01,12)
SELECT ONLY THE DIETETIC SERVICE EQUIPMENT.
"^DD",117.3,117.338,.01,12.1)
S DIC("S")="I $P(^(0),U,2)=""E"""
"^DD",117.3,117.338,.01,21,0)
^^1^1^2920916^^^^
"^DD",117.3,117.338,.01,21,1,0)
This field contains the pointer to The Dietetic Report Category file.
"^DD",117.3,117.338,.01,"DT")
2920915
"^DD",117.3,117.338,1,0)
BRAND^F^^0;2^K:$L(X)>45!($L(X)<3) X
"^DD",117.3,117.338,1,3)
Answer must be 3-45 characters in length.
"^DD",117.3,117.338,1,21,0)
^^1^1^2920207^
"^DD",117.3,117.338,1,21,1,0)
This field contains the Brand of the Dietetic Equipment Service.
"^DD",117.3,117.338,1,"DT")
2920207
"^DD",117.3,117.356,0)
AREAS OF RESEARCH SUB-FIELD^^.01^1
"^DD",117.3,117.356,0,"DT")
2930204
"^DD",117.3,117.356,0,"IX","B",117.356,.01)

"^DD",117.3,117.356,0,"NM","AREAS OF RESEARCH")

"^DD",117.3,117.356,0,"UP")
117.3
"^DD",117.3,117.356,.01,0)
AREAS OF RESEARCH^MRS^1:CLINICAL;2:COMMUNITY;3:COST/BENEFIT;4:EDUCATION;5:MANAGEMENT;^0;1^Q
"^DD",117.3,117.356,.01,1,0)
^.1
"^DD",117.3,117.356,.01,1,1,0)
117.356^B
"^DD",117.3,117.356,.01,1,1,1)
S ^FH(117.3,DA(1),"AREA","B",$E(X,1,30),DA)=""
"^DD",117.3,117.356,.01,1,1,2)
K ^FH(117.3,DA(1),"AREA","B",$E(X,1,30),DA)
"^DD",117.3,117.356,.01,21,0)
^^2^2^2930204^
"^DD",117.3,117.356,.01,21,1,0)
This field contains Areas of Research under Unfunded Nutrition
"^DD",117.3,117.356,.01,21,2,0)
Research.
"^DD",117.3,117.356,.01,"DT")
2930204
"^DD",117.3,117.358,0)
OLD SURVEY - APPETIZING SUB-FIELD^^6^7
"^DD",117.3,117.358,0,"DT")
2931222
"^DD",117.3,117.358,0,"IX","B",117.358,.01)

"^DD",117.3,117.358,0,"NM","OLD SURVEY - APPETIZING")

"^DD",117.3,117.358,0,"UP")
117.3
"^DD",117.3,117.358,.01,0)
APPETIZING NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.358,.01,1,0)
^.1
"^DD",117.3,117.358,.01,1,1,0)
117.358^B
"^DD",117.3,117.358,.01,1,1,1)
S ^FH(117.3,DA(1),"APP","B",$E(X,1,30),DA)=""
"^DD",117.3,117.358,.01,1,1,2)
K ^FH(117.3,DA(1),"APP","B",$E(X,1,30),DA)
"^DD",117.3,117.358,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.358,.01,21,0)
^.001^2^2^3011003^^^^
"^DD",117.3,117.358,.01,21,1,0)
This field contains a sequential number assigned to the first question
"^DD",117.3,117.358,.01,21,2,0)
of the Dietetic Survey and has no meaning.
"^DD",117.3,117.358,.01,"DT")
2931221
"^DD",117.3,117.358,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.358,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.358,1,4)
D HEL^FHADR9
"^DD",117.3,117.358,1,21,0)
^.001^2^2^3011003^^^^
"^DD",117.3,117.358,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.358,1,21,2,0)
ratings specified in front of them on question one of the survey.
"^DD",117.3,117.358,1,"DT")
2931229
"^DD",117.3,117.358,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.358,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.358,2,4)
D HEL^FHADR9
"^DD",117.3,117.358,2,21,0)
^.001^2^2^3011003^^^^
"^DD",117.3,117.358,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the
"^DD",117.3,117.358,2,21,2,0)
ratings specified in front of them on question one of the survey.
"^DD",117.3,117.358,2,"DT")
2931229
"^DD",117.3,117.358,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.358,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.358,3,4)
D HEL^FHADR9
"^DD",117.3,117.358,3,21,0)
^.001^2^2^3011003^^^^
"^DD",117.3,117.358,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the
"^DD",117.3,117.358,3,21,2,0)
ratings specified in front of them on question one of the survey.
"^DD",117.3,117.358,3,"DT")
2931229
"^DD",117.3,117.358,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.358,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.358,4,4)
D HEL^FHADR9
"^DD",117.3,117.358,4,21,0)
^.001^2^2^3011003^^^^
"^DD",117.3,117.358,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the
"^DD",117.3,117.358,4,21,2,0)
ratings specified in front of them on question one of the survey.
"^DD",117.3,117.358,4,"DT")
2931229
"^DD",117.3,117.358,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.358,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.358,5,4)
D HEL^FHADR9
"^DD",117.3,117.358,5,21,0)
^.001^2^2^3011003^^^^
"^DD",117.3,117.358,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the
"^DD",117.3,117.358,5,21,2,0)
ratings specified in front of them on question one of the survey.
"^DD",117.3,117.358,5,"DT")
2931229
"^DD",117.3,117.358,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.358,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.358,6,4)
D HEL^FHADR9
"^DD",117.3,117.358,6,21,0)
^.001^2^2^3011003^^^^
"^DD",117.3,117.358,6,21,1,0)
This is a rating string containing numbers surveyed in other services with
"^DD",117.3,117.358,6,21,2,0)
ratings specified in front of them on question one of the survey.
"^DD",117.3,117.358,6,"DT")
2931229
"^DD",117.3,117.359,0)
OLD SURVEY - TASTE SUB-FIELD^^6^7
"^DD",117.3,117.359,0,"DT")
2931222
"^DD",117.3,117.359,0,"IX","B",117.359,.01)

"^DD",117.3,117.359,0,"NM","OLD SURVEY - TASTE")

"^DD",117.3,117.359,0,"UP")
117.3
"^DD",117.3,117.359,.01,0)
TASTE NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.359,.01,1,0)
^.1
"^DD",117.3,117.359,.01,1,1,0)
117.359^B
"^DD",117.3,117.359,.01,1,1,1)
S ^FH(117.3,DA(1),"TAS","B",$E(X,1,30),DA)=""
"^DD",117.3,117.359,.01,1,1,2)
K ^FH(117.3,DA(1),"TAS","B",$E(X,1,30),DA)
"^DD",117.3,117.359,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.359,.01,21,0)
^^2^2^2931222^^
"^DD",117.3,117.359,.01,21,1,0)
This field contains a sequential number assigned to question two
"^DD",117.3,117.359,.01,21,2,0)
of the Dietetic Survey and has no meaning.
"^DD",117.3,117.359,.01,"DT")
2931222
"^DD",117.3,117.359,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.359,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.359,1,4)
D HEL^FHADR9
"^DD",117.3,117.359,1,21,0)
^^2^2^2931222^
"^DD",117.3,117.359,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the
"^DD",117.3,117.359,1,21,2,0)
ratings specified in front of them on question two of the survey.
"^DD",117.3,117.359,1,"DT")
2931229
"^DD",117.3,117.359,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.359,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.359,2,4)
D HEL^FHADR9
"^DD",117.3,117.359,2,21,0)
^^2^2^2931222^^
"^DD",117.3,117.359,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the
"^DD",117.3,117.359,2,21,2,0)
ratings specified in front of them on question two of the survey.
"^DD",117.3,117.359,2,"DT")
2931229
"^DD",117.3,117.359,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.359,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.359,3,4)
D HEL^FHADR9
"^DD",117.3,117.359,3,21,0)
^^2^2^2931222^
"^DD",117.3,117.359,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the
"^DD",117.3,117.359,3,21,2,0)
ratings specified in front of them on question two of the survey.
"^DD",117.3,117.359,3,"DT")
2931229
"^DD",117.3,117.359,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.359,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.359,4,4)
D HEL^FHADR9
"^DD",117.3,117.359,4,21,0)
^^2^2^2931222^
"^DD",117.3,117.359,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the
"^DD",117.3,117.359,4,21,2,0)
ratings specified in front of them on question two of the survey.
"^DD",117.3,117.359,4,"DT")
2931229
"^DD",117.3,117.359,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.359,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.359,5,4)
D HEL^FHADR9
"^DD",117.3,117.359,5,21,0)
^^2^2^2931222^^
"^DD",117.3,117.359,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the
"^DD",117.3,117.359,5,21,2,0)
ratings specified in front of them on question two of the survey.
"^DD",117.3,117.359,5,"DT")
2931229
"^DD",117.3,117.359,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.359,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.359,6,4)
D HEL^FHADR9
"^DD",117.3,117.359,6,21,0)
^^2^2^2931222^
"^DD",117.3,117.359,6,21,1,0)
This is a rating string containing numbers surveyed in other service
"^DD",117.3,117.359,6,21,2,0)
with the ratings specified in front of them on question two of the survey.
"^DD",117.3,117.359,6,"DT")
2931229
"^DD",117.3,117.361,0)
OLD SURVEY - VARIETY SUB-FIELD^^6^7
"^DD",117.3,117.361,0,"DT")
2931223
"^DD",117.3,117.361,0,"IX","B",117.361,.01)

"^DD",117.3,117.361,0,"NM","OLD SURVEY - VARIETY")

"^DD",117.3,117.361,0,"UP")
117.3
"^DD",117.3,117.361,.01,0)
VARIETY NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.361,.01,1,0)
^.1
"^DD",117.3,117.361,.01,1,1,0)
117.361^B
"^DD",117.3,117.361,.01,1,1,1)
S ^FH(117.3,DA(1),"VAR","B",$E(X,1,30),DA)=""
"^DD",117.3,117.361,.01,1,1,2)
K ^FH(117.3,DA(1),"VAR","B",$E(X,1,30),DA)
"^DD",117.3,117.361,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.361,.01,21,0)
^^2^2^2931228^^
"^DD",117.3,117.361,.01,21,1,0)
This field contains a sequential number assigned to question four
"^DD",117.3,117.361,.01,21,2,0)
of the Dietetic Survey and has no meaning.
"^DD",117.3,117.361,.01,"DT")
2931228
"^DD",117.3,117.361,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.361,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.361,1,4)
D HEL^FHADR9
"^DD",117.3,117.361,1,21,0)
^^2^2^2931223^
"^DD",117.3,117.361,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the
"^DD",117.3,117.361,1,21,2,0)
ratings specified in front of them on question four of the survey.
"^DD",117.3,117.361,1,"DT")
2931230
"^DD",117.3,117.361,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.361,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.361,2,4)
D HEL^FHADR9
"^DD",117.3,117.361,2,21,0)
^^2^2^2931223^
"^DD",117.3,117.361,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the
"^DD",117.3,117.361,2,21,2,0)
ratings specified in front of them on question four of the survey.
"^DD",117.3,117.361,2,"DT")
2931230
"^DD",117.3,117.361,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.361,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.361,3,4)
D HEL^FHADR9
"^DD",117.3,117.361,3,21,0)
^^2^2^2931223^
"^DD",117.3,117.361,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the
"^DD",117.3,117.361,3,21,2,0)
ratings specified in front of them on question four of the survey.
"^DD",117.3,117.361,3,"DT")
2931230
"^DD",117.3,117.361,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.361,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.361,4,4)
D HEL^FHADR9
"^DD",117.3,117.361,4,21,0)
^^2^2^2931223^
"^DD",117.3,117.361,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the
"^DD",117.3,117.361,4,21,2,0)
ratings specified in front of them on question four of the survey.
"^DD",117.3,117.361,4,"DT")
2931230
"^DD",117.3,117.361,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.361,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.361,5,4)
D HEL^FHADR9
"^DD",117.3,117.361,5,21,0)
^^2^2^2931223^
"^DD",117.3,117.361,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the
"^DD",117.3,117.361,5,21,2,0)
ratings specified in front of them on question four of the survey.
"^DD",117.3,117.361,5,"DT")
2931230
"^DD",117.3,117.361,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.361,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.361,6,4)
D HEL^FHADR9
"^DD",117.3,117.361,6,21,0)
^^3^3^2931223^
"^DD",117.3,117.361,6,21,1,0)
This is a rating string containing numbers surveyed in other service
"^DD",117.3,117.361,6,21,2,0)
with the ratings specified in front of them on question four of the
"^DD",117.3,117.361,6,21,3,0)
survey.
"^DD",117.3,117.361,6,"DT")
2931230
"^DD",117.3,117.362,0)
OLD SURVEY - CLEANLINESS SUB-FIELD^^6^7
"^DD",117.3,117.362,0,"DT")
2931228
"^DD",117.3,117.362,0,"IX","B",117.362,.01)

"^DD",117.3,117.362,0,"NM","OLD SURVEY - CLEANLINESS")

"^DD",117.3,117.362,0,"UP")
117.3
"^DD",117.3,117.362,.01,0)
CLEANLINESS NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.362,.01,1,0)
^.1
"^DD",117.3,117.362,.01,1,1,0)
117.362^B
"^DD",117.3,117.362,.01,1,1,1)
S ^FH(117.3,DA(1),"CLN","B",$E(X,1,30),DA)=""
"^DD",117.3,117.362,.01,1,1,2)
K ^FH(117.3,DA(1),"CLN","B",$E(X,1,30),DA)
"^DD",117.3,117.362,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.362,.01,21,0)
^^2^2^2931228^^
"^DD",117.3,117.362,.01,21,1,0)
This field contains a sequential number assigned to question five of
"^DD",117.3,117.362,.01,21,2,0)
the Dietetic Survey and has no meaning.
"^DD",117.3,117.362,.01,"DT")
2931228
"^DD",117.3,117.362,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.362,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.362,1,4)
D HEL^FHADR9
"^DD",117.3,117.362,1,21,0)
^^2^2^2931228^
"^DD",117.3,117.362,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the
"^DD",117.3,117.362,1,21,2,0)
ratings specified in front of them on question five of the survey.
"^DD",117.3,117.362,1,"DT")
2931230
"^DD",117.3,117.362,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.362,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.362,2,4)
D HEL^FHADR9
"^DD",117.3,117.362,2,21,0)
^^2^2^2931228^
"^DD",117.3,117.362,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the
"^DD",117.3,117.362,2,21,2,0)
ratings specified in front of them on question five of the survey.
"^DD",117.3,117.362,2,"DT")
2931230
"^DD",117.3,117.362,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.362,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.362,3,4)
D HEL^FHADR9
"^DD",117.3,117.362,3,21,0)
^^3^3^2931228^
"^DD",117.3,117.362,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with
"^DD",117.3,117.362,3,21,2,0)
the ratings specified in front of them on question five of the
"^DD",117.3,117.362,3,21,3,0)
survey.
"^DD",117.3,117.362,3,"DT")
2931230
"^DD",117.3,117.362,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.362,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.362,4,4)
D HEL^FHADR9
"^DD",117.3,117.362,4,21,0)
^^2^2^2931228^
"^DD",117.3,117.362,4,21,1,0)
This is a rating string containing numbers surveyed in the DOM with
"^DD",117.3,117.362,4,21,2,0)
the ratings specified in front of them on question five of the survey.
"^DD",117.3,117.362,4,"DT")
2931230
"^DD",117.3,117.362,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.362,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.362,5,4)
D HEL^FHADR9
"^DD",117.3,117.362,5,21,0)
^^2^2^2931228^
"^DD",117.3,117.362,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the
"^DD",117.3,117.362,5,21,2,0)
ratings specified in front of them on question five of the survey.
"^DD",117.3,117.362,5,"DT")
2931230
"^DD",117.3,117.362,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.362,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.362,6,4)
D HEL^FHADR9
"^DD",117.3,117.362,6,21,0)
^^3^3^2931228^
"^DD",117.3,117.362,6,21,1,0)
This is a rating string containing numbers surveyed in other service
"^DD",117.3,117.362,6,21,2,0)
with the ratings specified in front of them on question five of the
"^DD",117.3,117.362,6,21,3,0)
survey.
"^DD",117.3,117.362,6,"DT")
2931230
"^DD",117.3,117.363,0)
OLD SURVEY - COURTEOUS SUB-FIELD^^6^7
"^DD",117.3,117.363,0,"DT")
2931228
"^DD",117.3,117.363,0,"IX","B",117.363,.01)

"^DD",117.3,117.363,0,"NM","OLD SURVEY - COURTEOUS")

"^DD",117.3,117.363,0,"UP")
117.3
"^DD",117.3,117.363,.01,0)
COURTEOUS NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.363,.01,1,0)
^.1
"^DD",117.3,117.363,.01,1,1,0)
117.363^B
"^DD",117.3,117.363,.01,1,1,1)
S ^FH(117.3,DA(1),"CRS","B",$E(X,1,30),DA)=""
"^DD",117.3,117.363,.01,1,1,2)
K ^FH(117.3,DA(1),"CRS","B",$E(X,1,30),DA)
"^DD",117.3,117.363,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.363,.01,21,0)
^^2^2^2931228^
"^DD",117.3,117.363,.01,21,1,0)
This field contains a sequential number assigned to question six of
"^DD",117.3,117.363,.01,21,2,0)
the Dietetic Survey and has no meaning.
"^DD",117.3,117.363,.01,"DT")
2931228
"^DD",117.3,117.363,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.363,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.363,1,4)
D HEL^FHADR9
"^DD",117.3,117.363,1,21,0)
^^2^2^2931228^
"^DD",117.3,117.363,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with
"^DD",117.3,117.363,1,21,2,0)
the ratings specified in front of them on question six of the survey.
"^DD",117.3,117.363,1,"DT")
2931230
"^DD",117.3,117.363,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.363,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.363,2,4)
D HEL^FHADR9
"^DD",117.3,117.363,2,21,0)
^^2^2^2931228^
"^DD",117.3,117.363,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the
"^DD",117.3,117.363,2,21,2,0)
ratings specified in front of them on question six of the survey.
"^DD",117.3,117.363,2,"DT")
2931230
"^DD",117.3,117.363,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.363,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.363,3,4)
D HEL^FHADR9
"^DD",117.3,117.363,3,21,0)
^^2^2^2931228^
"^DD",117.3,117.363,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with
"^DD",117.3,117.363,3,21,2,0)
the ratings specified in front of them on question six of the survey.
"^DD",117.3,117.363,3,"DT")
2931230
"^DD",117.3,117.363,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.363,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.363,4,4)
D HEL^FHADR9
"^DD",117.3,117.363,4,21,0)
^^2^2^2931228^
"^DD",117.3,117.363,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the
"^DD",117.3,117.363,4,21,2,0)
ratings specified in front of them on question six of the survey.
"^DD",117.3,117.363,4,"DT")
2931230
"^DD",117.3,117.363,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.363,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.363,5,4)
D HEL^FHADR9
"^DD",117.3,117.363,5,21,0)
^^2^2^2931228^
"^DD",117.3,117.363,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the
"^DD",117.3,117.363,5,21,2,0)
ratings specified in front of them on question six of the survey.
"^DD",117.3,117.363,5,"DT")
2931230
"^DD",117.3,117.363,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.363,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.363,6,4)
D HEL^FHADR9
"^DD",117.3,117.363,6,21,0)
^^3^3^2931228^
"^DD",117.3,117.363,6,21,1,0)
This is a rating string containing numbers surveyed in other service
"^DD",117.3,117.363,6,21,2,0)
with the ratings specified in front of them on question six of the
"^DD",117.3,117.363,6,21,3,0)
survey.
"^DD",117.3,117.363,6,"DT")
2931230
"^DD",117.3,117.364,0)
OLD SURVEY - TIME SUB-FIELD^^6^7
"^DD",117.3,117.364,0,"DT")
2931228
"^DD",117.3,117.364,0,"IX","B",117.364,.01)

"^DD",117.3,117.364,0,"NM","OLD SURVEY - TIME")

"^DD",117.3,117.364,0,"UP")
117.3
"^DD",117.3,117.364,.01,0)
TIME NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.364,.01,1,0)
^.1
"^DD",117.3,117.364,.01,1,1,0)
117.364^B
"^DD",117.3,117.364,.01,1,1,1)
S ^FH(117.3,DA(1),"TIM","B",$E(X,1,30),DA)=""
"^DD",117.3,117.364,.01,1,1,2)
K ^FH(117.3,DA(1),"TIM","B",$E(X,1,30),DA)
"^DD",117.3,117.364,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.364,.01,21,0)
^^2^2^2931228^
"^DD",117.3,117.364,.01,21,1,0)
This field contains a sequential number assigned to question seven
"^DD",117.3,117.364,.01,21,2,0)
of the Dietetic Survey and has no meaning.
"^DD",117.3,117.364,.01,"DT")
2931228
"^DD",117.3,117.364,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.364,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.364,1,4)
D HEL^FHADR9
"^DD",117.3,117.364,1,21,0)
^^2^2^2931228^
"^DD",117.3,117.364,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the
"^DD",117.3,117.364,1,21,2,0)
ratings specified in front of them on question seven of the survey.
"^DD",117.3,117.364,1,"DT")
2931230
"^DD",117.3,117.364,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.364,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.364,2,4)
D HEL^FHADR9
"^DD",117.3,117.364,2,21,0)
^^2^2^2931228^
"^DD",117.3,117.364,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the
"^DD",117.3,117.364,2,21,2,0)
ratings specified in front of them on question seven of the survey.
"^DD",117.3,117.364,2,"DT")
2931230
"^DD",117.3,117.364,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.364,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.364,3,4)
D HEL^FHADR9
"^DD",117.3,117.364,3,21,0)
^^3^3^2931228^
"^DD",117.3,117.364,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH
"^DD",117.3,117.364,3,21,2,0)
with the ratings specified in front of them on question seven
"^DD",117.3,117.364,3,21,3,0)
of the survey.
"^DD",117.3,117.364,3,"DT")
2931230
"^DD",117.3,117.364,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.364,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.364,4,4)
D HEL^FHADR9
"^DD",117.3,117.364,4,21,0)
^^2^2^2931228^
"^DD",117.3,117.364,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the
"^DD",117.3,117.364,4,21,2,0)
ratings specified in front of them on question seven of the survey.
"^DD",117.3,117.364,4,"DT")
2931230
"^DD",117.3,117.364,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.364,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.364,5,4)
D HEL^FHADR9
"^DD",117.3,117.364,5,21,0)
^^2^2^2931228^
"^DD",117.3,117.364,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the
"^DD",117.3,117.364,5,21,2,0)
ratings specified in front of them on question seven of the survey.
"^DD",117.3,117.364,5,"DT")
2931230
"^DD",117.3,117.364,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.364,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.364,6,4)
D HEL^FHADR9
"^DD",117.3,117.364,6,21,0)
^^3^3^2931228^
"^DD",117.3,117.364,6,21,1,0)
This is a rating string containing numbers surveyed in other services
"^DD",117.3,117.364,6,21,2,0)
with the ratings specified in front of them on question seven of the
"^DD",117.3,117.364,6,21,3,0)
survey.
"^DD",117.3,117.364,6,"DT")
2931230
"^DD",117.3,117.365,0)
OLD SURVEY - INFO SUB-FIELD^^6^7
"^DD",117.3,117.365,0,"DT")
2931228
"^DD",117.3,117.365,0,"IX","B",117.365,.01)

"^DD",117.3,117.365,0,"NM","OLD SURVEY - INFO")

"^DD",117.3,117.365,0,"UP")
117.3
"^DD",117.3,117.365,.01,0)
INFO NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.365,.01,1,0)
^.1
"^DD",117.3,117.365,.01,1,1,0)
117.365^B
"^DD",117.3,117.365,.01,1,1,1)
S ^FH(117.3,DA(1),"INF","B",$E(X,1,30),DA)=""
"^DD",117.3,117.365,.01,1,1,2)
K ^FH(117.3,DA(1),"INF","B",$E(X,1,30),DA)
"^DD",117.3,117.365,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.365,.01,21,0)
^^2^2^2931228^
"^DD",117.3,117.365,.01,21,1,0)
This field contains a sequential number assigned to question eight
"^DD",117.3,117.365,.01,21,2,0)
of the Dietetic Survey and has no meaning.
"^DD",117.3,117.365,.01,"DT")
2931228
"^DD",117.3,117.365,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.365,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.365,1,4)
D HEL^FHADR9
"^DD",117.3,117.365,1,21,0)
^^2^2^2931228^
"^DD",117.3,117.365,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the
"^DD",117.3,117.365,1,21,2,0)
ratings specified in front of them on question eight of the survey.
"^DD",117.3,117.365,1,"DT")
2931230
"^DD",117.3,117.365,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.365,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.365,2,4)
D HEL^FHADR9
"^DD",117.3,117.365,2,21,0)
^^2^2^2931228^
"^DD",117.3,117.365,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the
"^DD",117.3,117.365,2,21,2,0)
ratings specified in front of them on question eight of the survey.
"^DD",117.3,117.365,2,"DT")
2931230
"^DD",117.3,117.365,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.365,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.365,3,4)
D HEL^FHADR9
"^DD",117.3,117.365,3,21,0)
^^3^3^2931228^
"^DD",117.3,117.365,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with
"^DD",117.3,117.365,3,21,2,0)
the ratings specified in front of them on question eight of the
"^DD",117.3,117.365,3,21,3,0)
survey.
"^DD",117.3,117.365,3,"DT")
2931230
"^DD",117.3,117.365,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.365,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.365,4,4)
D HEL^FHADR9
"^DD",117.3,117.365,4,21,0)
^^2^2^2931228^
"^DD",117.3,117.365,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the
"^DD",117.3,117.365,4,21,2,0)
ratings specified in front of them on question eight of the survey.
"^DD",117.3,117.365,4,"DT")
2931230
"^DD",117.3,117.365,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X D C0^FHADR9
"^DD",117.3,117.365,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.365,5,4)
D HEL^FHADR9
"^DD",117.3,117.365,5,21,0)
^^2^2^2931228^
"^DD",117.3,117.365,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the
"^DD",117.3,117.365,5,21,2,0)
ratings specified in front of them on question eight of the survey.
"^DD",117.3,117.365,5,"DT")
2931230
"^DD",117.3,117.365,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.365,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.365,6,4)
D HEL^FHADR9
"^DD",117.3,117.365,6,21,0)
^^3^3^2931228^
"^DD",117.3,117.365,6,21,1,0)
This is a rating string containing numbers surveyed in other services
"^DD",117.3,117.365,6,21,2,0)
with the ratings specified in front of them on question eight of
"^DD",117.3,117.365,6,21,3,0)
the survey.
"^DD",117.3,117.365,6,"DT")
2931230
"^DD",117.3,117.366,0)
OLD SURVEY - OVERALL SUB-FIELD^^6^7
"^DD",117.3,117.366,0,"DT")
2931228
"^DD",117.3,117.366,0,"IX","B",117.366,.01)

"^DD",117.3,117.366,0,"NM","OLD SURVEY - OVERALL")

"^DD",117.3,117.366,0,"UP")
117.3
"^DD",117.3,117.366,.01,0)
OVERALL NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.366,.01,1,0)
^.1
"^DD",117.3,117.366,.01,1,1,0)
117.366^B
"^DD",117.3,117.366,.01,1,1,1)
S ^FH(117.3,DA(1),"OVA","B",$E(X,1,30),DA)=""
"^DD",117.3,117.366,.01,1,1,2)
K ^FH(117.3,DA(1),"OVA","B",$E(X,1,30),DA)
"^DD",117.3,117.366,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.366,.01,21,0)
^^2^2^2931228^
"^DD",117.3,117.366,.01,21,1,0)
This field contains a sequential number assigned to question nine
"^DD",117.3,117.366,.01,21,2,0)
of the Dietetic Survey and has no meaning.
"^DD",117.3,117.366,.01,"DT")
2931228
"^DD",117.3,117.366,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.366,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.366,1,4)
D HEL^FHADR9
"^DD",117.3,117.366,1,21,0)
^^2^2^2931228^
"^DD",117.3,117.366,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the
"^DD",117.3,117.366,1,21,2,0)
ratings specified in front of them on question nine of the survey.
"^DD",117.3,117.366,1,"DT")
2931230
"^DD",117.3,117.366,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.366,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.366,2,4)
D HEL^FHADR9
"^DD",117.3,117.366,2,21,0)
^^2^2^2931228^
"^DD",117.3,117.366,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the
"^DD",117.3,117.366,2,21,2,0)
ratings specified in front of them on question nine of the survey.
"^DD",117.3,117.366,2,"DT")
2931230
"^DD",117.3,117.366,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.366,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.366,3,4)
D HEL^FHADR9
"^DD",117.3,117.366,3,21,0)
^^2^2^2931228^
"^DD",117.3,117.366,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with
"^DD",117.3,117.366,3,21,2,0)
the ratings specified in front of them on question nine of the survey.
"^DD",117.3,117.366,3,"DT")
2931230
"^DD",117.3,117.366,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.366,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.366,4,4)
D HEL^FHADR9
"^DD",117.3,117.366,4,21,0)
^^2^2^2931228^
"^DD",117.3,117.366,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the
"^DD",117.3,117.366,4,21,2,0)
ratings specified in front of them on question nine of the survey.
"^DD",117.3,117.366,4,"DT")
2931230
"^DD",117.3,117.366,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.366,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.366,5,4)
D HEL^FHADR9
"^DD",117.3,117.366,5,21,0)
^^2^2^2931228^
"^DD",117.3,117.366,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the
"^DD",117.3,117.366,5,21,2,0)
ratings specified in front of them on question nine of the survey.
"^DD",117.3,117.366,5,"DT")
2931230
"^DD",117.3,117.366,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.366,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.366,6,4)
D HEL^FHADR9
"^DD",117.3,117.366,6,21,0)
^^3^3^2931228^
"^DD",117.3,117.366,6,21,1,0)
This is a rating string containing numbers surveyed in other services
"^DD",117.3,117.366,6,21,2,0)
with the ratings specified in front of them on question nine of the
"^DD",117.3,117.366,6,21,3,0)
survey.
"^DD",117.3,117.366,6,"DT")
2931230
"^DD",117.3,117.37,0)
APPETIZING SUB-FIELD^^6^7
"^DD",117.3,117.37,0,"DT")
3011003
"^DD",117.3,117.37,0,"IX","B",117.37,.01)

"^DD",117.3,117.37,0,"NM","APPETIZING")

"^DD",117.3,117.37,0,"UP")
117.3
"^DD",117.3,117.37,.01,0)
APPETIZING NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.37,.01,1,0)
^.1
"^DD",117.3,117.37,.01,1,1,0)
117.37^B
"^DD",117.3,117.37,.01,1,1,1)
S ^FH(117.3,DA(1),"Q1AP","B",$E(X,1,30),DA)=""
"^DD",117.3,117.37,.01,1,1,2)
K ^FH(117.3,DA(1),"Q1AP","B",$E(X,1,30),DA)
"^DD",117.3,117.37,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.37,.01,21,0)
^.001^2^2^3011004^^^
"^DD",117.3,117.37,.01,21,1,0)
This field contains a sequential number assigned to the first question
"^DD",117.3,117.37,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.37,.01,"DT")
3011003
"^DD",117.3,117.37,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.37,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.37,1,4)
D HEL^FHADR9
"^DD",117.3,117.37,1,21,0)
^.001^2^2^3011004^^^^
"^DD",117.3,117.37,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.37,1,21,2,0)
ratings specified in front of them, for question #1 of the survey.
"^DD",117.3,117.37,1,"DT")
3011003
"^DD",117.3,117.37,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.37,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.37,2,4)
D HEL^FHADR9
"^DD",117.3,117.37,2,21,0)
^.001^2^2^3011003^^^
"^DD",117.3,117.37,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.37,2,21,2,0)
ratings specified in front of them, for question #1 of the survey.
"^DD",117.3,117.37,2,"DT")
3011003
"^DD",117.3,117.37,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.37,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.37,3,4)
D HEL^FHADR9
"^DD",117.3,117.37,3,21,0)
^.001^2^2^3011003^^
"^DD",117.3,117.37,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.37,3,21,2,0)
ratings specified in front of them, for question #1 of the survey.
"^DD",117.3,117.37,3,"DT")
3011003
"^DD",117.3,117.37,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.37,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.37,4,4)
D HEL^FHADR9
"^DD",117.3,117.37,4,21,0)
^.001^2^2^3011003^^
"^DD",117.3,117.37,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.37,4,21,2,0)
ratings specified in front of them, for question #1 of the survey.
"^DD",117.3,117.37,4,"DT")
3011003
"^DD",117.3,117.37,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.37,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.37,5,4)
D HEL^FHADR9
"^DD",117.3,117.37,5,21,0)
^^2^2^3011003^
"^DD",117.3,117.37,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the 
"^DD",117.3,117.37,5,21,2,0)
ratings specified in front of them, for question #1 of the survey.
"^DD",117.3,117.37,5,"DT")
3011003
"^DD",117.3,117.37,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.37,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.37,6,4)
D HEL^FHADR9
"^DD",117.3,117.37,6,21,0)
^^2^2^3011003^
"^DD",117.3,117.37,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.37,6,21,2,0)
ratings specified in front of them, for question #1 of the survey.
"^DD",117.3,117.37,6,"DT")
3011003
"^DD",117.3,117.371,0)
FOODS PREFERRED SUB-FIELD^^6^7
"^DD",117.3,117.371,0,"DT")
3011003
"^DD",117.3,117.371,0,"IX","B",117.371,.01)

"^DD",117.3,117.371,0,"NM","FOODS PREFERRED")

"^DD",117.3,117.371,0,"UP")
117.3
"^DD",117.3,117.371,.01,0)
FOODS PREFERRED NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.371,.01,1,0)
^.1
"^DD",117.3,117.371,.01,1,1,0)
117.371^B
"^DD",117.3,117.371,.01,1,1,1)
S ^FH(117.3,DA(1),"Q2FP","B",$E(X,1,30),DA)=""
"^DD",117.3,117.371,.01,1,1,2)
K ^FH(117.3,DA(1),"Q2FP","B",$E(X,1,30),DA)
"^DD",117.3,117.371,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.371,.01,4)
D HEL^FHADR9
"^DD",117.3,117.371,.01,21,0)
^.001^2^2^3011003^^^^
"^DD",117.3,117.371,.01,21,1,0)
This field contains a sequential number assigned to the second question
"^DD",117.3,117.371,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.371,.01,"DT")
3011003
"^DD",117.3,117.371,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.371,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.371,1,4)
D HEL^FHADR9
"^DD",117.3,117.371,1,21,0)
2
"^DD",117.3,117.371,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.371,1,21,2,0)
ratings specified in front of them, for question #2 of the survey.
"^DD",117.3,117.371,1,"DT")
3011003
"^DD",117.3,117.371,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.371,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.371,2,4)
D HEL^FHADR9
"^DD",117.3,117.371,2,21,0)
^^2^2^3011003^
"^DD",117.3,117.371,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.371,2,21,2,0)
ratings specified in front of them, for question #2 of the survey.
"^DD",117.3,117.371,2,"DT")
3011003
"^DD",117.3,117.371,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.371,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.371,3,4)
D HEL^FHADR9
"^DD",117.3,117.371,3,21,0)
^^2^2^3011003^
"^DD",117.3,117.371,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.371,3,21,2,0)
ratings specified in front of them, for question #2 of the survey.
"^DD",117.3,117.371,3,"DT")
3011003
"^DD",117.3,117.371,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.371,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.371,4,4)
D HEL^FHADR9
"^DD",117.3,117.371,4,21,0)
^^2^2^3011003^
"^DD",117.3,117.371,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.371,4,21,2,0)
ratings specified in front of them, for question #2 of the survey.
"^DD",117.3,117.371,4,"DT")
3011003
"^DD",117.3,117.371,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.371,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.371,5,4)
D HEL^FHADR9
"^DD",117.3,117.371,5,21,0)
^^2^2^3011003^
"^DD",117.3,117.371,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the 
"^DD",117.3,117.371,5,21,2,0)
ratings specified in front of them, for question #2 of the survey.
"^DD",117.3,117.371,5,"DT")
3011003
"^DD",117.3,117.371,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.371,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.371,6,4)
D HEL^FHADR9
"^DD",117.3,117.371,6,21,0)
^^2^2^3011003^
"^DD",117.3,117.371,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.371,6,21,2,0)
ratings specified in front of them, for question #2 of the survey.
"^DD",117.3,117.371,6,"DT")
3011003
"^DD",117.3,117.372,0)
HOT ENOUGH SUB-FIELD^^6^7
"^DD",117.3,117.372,0,"DT")
3011004
"^DD",117.3,117.372,0,"IX","B",117.372,.01)

"^DD",117.3,117.372,0,"NM","HOT ENOUGH")

"^DD",117.3,117.372,0,"UP")
117.3
"^DD",117.3,117.372,.01,0)
HOT ENOUGH NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.372,.01,1,0)
^.1
"^DD",117.3,117.372,.01,1,1,0)
117.372^B
"^DD",117.3,117.372,.01,1,1,1)
S ^FH(117.3,DA(1),"Q3HF","B",$E(X,1,30),DA)=""
"^DD",117.3,117.372,.01,1,1,2)
K ^FH(117.3,DA(1),"Q3HF","B",$E(X,1,30),DA)
"^DD",117.3,117.372,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.372,.01,21,0)
^.001^2^2^3011004^^^^
"^DD",117.3,117.372,.01,21,1,0)
This field contains a sequential number assigned to the third question
"^DD",117.3,117.372,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.372,.01,"DT")
3011004
"^DD",117.3,117.372,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.372,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.372,1,4)
D HEL^FHADR9
"^DD",117.3,117.372,1,21,0)
^^2^2^3011004^
"^DD",117.3,117.372,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.372,1,21,2,0)
ratings specified in front of them, for question #3 of the survey.
"^DD",117.3,117.372,1,"DT")
3011004
"^DD",117.3,117.372,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.372,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.372,2,4)
D HEL^FHADR9
"^DD",117.3,117.372,2,21,0)
^^2^2^3011004^
"^DD",117.3,117.372,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.372,2,21,2,0)
ratings specified in front of them, for question #3 of the survey.
"^DD",117.3,117.372,2,"DT")
3011004
"^DD",117.3,117.372,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.372,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.372,3,4)
D HEL^FHADR9
"^DD",117.3,117.372,3,21,0)
^^2^2^3011004^
"^DD",117.3,117.372,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.372,3,21,2,0)
ratings specified in front of them, for question #3 of the survey.
"^DD",117.3,117.372,3,"DT")
3011004
"^DD",117.3,117.372,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.372,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.372,4,4)
D HEL^FHADR9
"^DD",117.3,117.372,4,21,0)
^^2^2^3011004^
"^DD",117.3,117.372,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.372,4,21,2,0)
ratings specified in front of them, for question #3 of the survey.
"^DD",117.3,117.372,4,"DT")
3011004
"^DD",117.3,117.372,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.372,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.372,5,4)
D HEL^FHADR9
"^DD",117.3,117.372,5,21,0)
^^2^2^3011004^
"^DD",117.3,117.372,5,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.372,5,21,2,0)
ratings specified in front of them, for question #3 of the survey.
"^DD",117.3,117.372,5,"DT")
3011004
"^DD",117.3,117.372,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.372,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.372,6,4)
D HEL^FHADR9
"^DD",117.3,117.372,6,21,0)
^^2^2^3011004^
"^DD",117.3,117.372,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.372,6,21,2,0)
ratings specified in front of them, for question #3 of the survey.
"^DD",117.3,117.372,6,"DT")
3011004
"^DD",117.3,117.373,0)
COLD ENOUGH SUB-FIELD^^6^7
"^DD",117.3,117.373,0,"DT")
3011004
"^DD",117.3,117.373,0,"IX","B",117.373,.01)

"^DD",117.3,117.373,0,"NM","COLD ENOUGH")

"^DD",117.3,117.373,0,"UP")
117.3
"^DD",117.3,117.373,.01,0)
COLD ENOUGH^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.373,.01,1,0)
^.1
"^DD",117.3,117.373,.01,1,1,0)
117.373^B
"^DD",117.3,117.373,.01,1,1,1)
S ^FH(117.3,DA(1),"Q4CF","B",$E(X,1,30),DA)=""
"^DD",117.3,117.373,.01,1,1,2)
K ^FH(117.3,DA(1),"Q4CF","B",$E(X,1,30),DA)
"^DD",117.3,117.373,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.373,.01,21,0)
^.001^2^2^3011004^^^
"^DD",117.3,117.373,.01,21,1,0)
This field contains a sequential number assigned to the fourth question
"^DD",117.3,117.373,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.373,.01,"DT")
3011004
"^DD",117.3,117.373,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.373,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.373,1,4)
D HEL^FHADR9
"^DD",117.3,117.373,1,21,0)
^.001^2^2^3011004^^^
"^DD",117.3,117.373,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.373,1,21,2,0)
ratings specified in front of them, for question #4 of the survey.
"^DD",117.3,117.373,1,"DT")
3011004
"^DD",117.3,117.373,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.373,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.373,2,4)
D HEL^FHADR9
"^DD",117.3,117.373,2,21,0)
^^2^2^3011004^
"^DD",117.3,117.373,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.373,2,21,2,0)
ratings specified in front of them, for question #4 of the survey.
"^DD",117.3,117.373,2,"DT")
3011004
"^DD",117.3,117.373,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.373,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.373,3,4)
D HEL^FHADR9
"^DD",117.3,117.373,3,21,0)
^^2^2^3011004^
"^DD",117.3,117.373,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.373,3,21,2,0)
ratings specified in front of them, for question #4 of the survey.
"^DD",117.3,117.373,3,"DT")
3011004
"^DD",117.3,117.373,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.373,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.373,4,4)
D HEL^FHADR9
"^DD",117.3,117.373,4,21,0)
^^2^2^3011004^
"^DD",117.3,117.373,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.373,4,21,2,0)
ratings specified in front of them, for question #4 of the survey.
"^DD",117.3,117.373,4,"DT")
3011004
"^DD",117.3,117.373,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.373,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.373,5,4)
D HEL^FHADR9
"^DD",117.3,117.373,5,21,0)
^^2^2^3011004^
"^DD",117.3,117.373,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the 
"^DD",117.3,117.373,5,21,2,0)
ratings specified in front of them, for question #4 of the survey.
"^DD",117.3,117.373,5,"DT")
3011004
"^DD",117.3,117.373,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.373,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.373,6,4)
D HEL^FHADR9
"^DD",117.3,117.373,6,21,0)
^^2^2^3011004^
"^DD",117.3,117.373,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.373,6,21,2,0)
ratings specified in front of them, for question #4 of the survey.
"^DD",117.3,117.373,6,"DT")
3011004
"^DD",117.3,117.374,0)
COURTEOUS SUB-FIELD^^6^7
"^DD",117.3,117.374,0,"DT")
3011004
"^DD",117.3,117.374,0,"IX","B",117.374,.01)

"^DD",117.3,117.374,0,"NM","COURTEOUS")

"^DD",117.3,117.374,0,"UP")
117.3
"^DD",117.3,117.374,.01,0)
COURTEOUS NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.374,.01,1,0)
^.1
"^DD",117.3,117.374,.01,1,1,0)
117.374^B
"^DD",117.3,117.374,.01,1,1,1)
S ^FH(117.3,DA(1),"Q5CR","B",$E(X,1,30),DA)=""
"^DD",117.3,117.374,.01,1,1,2)
K ^FH(117.3,DA(1),"Q5CR","B",$E(X,1,30),DA)
"^DD",117.3,117.374,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.374,.01,21,0)
^^2^2^3011004^
"^DD",117.3,117.374,.01,21,1,0)
This field contains a sequential number assigned to the fifth question
"^DD",117.3,117.374,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.374,.01,"DT")
3011004
"^DD",117.3,117.374,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.374,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.374,1,4)
D HEL^FHADR9
"^DD",117.3,117.374,1,21,0)
^^2^2^3011004^
"^DD",117.3,117.374,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.374,1,21,2,0)
ratings specified in front of them, for question #5 of the survey.
"^DD",117.3,117.374,1,"DT")
3011004
"^DD",117.3,117.374,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.374,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.374,2,4)
D HEL^FHADR9
"^DD",117.3,117.374,2,21,0)
^^2^2^3011004^
"^DD",117.3,117.374,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.374,2,21,2,0)
ratings specified in front of them, for question #5 of the survey.
"^DD",117.3,117.374,2,"DT")
3011004
"^DD",117.3,117.374,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.374,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.374,3,4)
D HEL^FHADR9
"^DD",117.3,117.374,3,21,0)
^^2^2^3011004^
"^DD",117.3,117.374,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.374,3,21,2,0)
ratings specified in front of them, for question #5 of the survey.
"^DD",117.3,117.374,3,"DT")
3011004
"^DD",117.3,117.374,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.374,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.374,4,4)
D HEL^FHADR9
"^DD",117.3,117.374,4,21,0)
^^2^2^3011004^
"^DD",117.3,117.374,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.374,4,21,2,0)
ratings specified in front of them, for question #5 of the survey.
"^DD",117.3,117.374,4,"DT")
3011004
"^DD",117.3,117.374,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.374,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.374,5,4)
D HEL^FHADR9
"^DD",117.3,117.374,5,21,0)
^^2^2^3011004^
"^DD",117.3,117.374,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the 
"^DD",117.3,117.374,5,21,2,0)
ratings specified in front of them, for question #5 of the survey.
"^DD",117.3,117.374,5,"DT")
3011004
"^DD",117.3,117.374,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.374,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.374,6,4)
D HEL^FHADR9
"^DD",117.3,117.374,6,21,0)
^^2^2^3011004^
"^DD",117.3,117.374,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.374,6,21,2,0)
ratings specified in front of them, for question #5 of the survey.
"^DD",117.3,117.374,6,"DT")
3011004
"^DD",117.3,117.375,0)
PREFERENCES DISCUSSED SUB-FIELD^^6^7
"^DD",117.3,117.375,0,"DT")
3011004
"^DD",117.3,117.375,0,"IX","B",117.375,.01)

"^DD",117.3,117.375,0,"NM","PREFERENCES DISCUSSED")

"^DD",117.3,117.375,0,"UP")
117.3
"^DD",117.3,117.375,.01,0)
PREFERENCES DISCUSSED NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.375,.01,1,0)
^.1
"^DD",117.3,117.375,.01,1,1,0)
117.375^B
"^DD",117.3,117.375,.01,1,1,1)
S ^FH(117.3,DA(1),"Q6PD","B",$E(X,1,30),DA)=""
"^DD",117.3,117.375,.01,1,1,2)
K ^FH(117.3,DA(1),"Q6PD","B",$E(X,1,30),DA)
"^DD",117.3,117.375,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.375,.01,21,0)
^^2^2^3011004^
"^DD",117.3,117.375,.01,21,1,0)
This field contains a sequential number assigned to the sixth question
"^DD",117.3,117.375,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.375,.01,"DT")
3011004
"^DD",117.3,117.375,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.375,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.375,1,4)
D HEL^FHADR9
"^DD",117.3,117.375,1,21,0)
^.001^2^2^3011009^^
"^DD",117.3,117.375,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.375,1,21,2,0)
ratings specified in front of them, for question #6 of the survey.
"^DD",117.3,117.375,1,"DT")
3011004
"^DD",117.3,117.375,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.375,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.375,2,4)
D HEL^FHADR9
"^DD",117.3,117.375,2,21,0)
^^2^2^3011004^
"^DD",117.3,117.375,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.375,2,21,2,0)
ratings specified in front of them, for question #6 of the survey.
"^DD",117.3,117.375,2,"DT")
3011004
"^DD",117.3,117.375,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.375,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.375,3,4)
D HEL^FHADR9
"^DD",117.3,117.375,3,21,0)
^^2^2^3011004^
"^DD",117.3,117.375,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.375,3,21,2,0)
ratings specified in front of them, for question #6 of the survey.
"^DD",117.3,117.375,3,"DT")
3011004
"^DD",117.3,117.375,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.375,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.375,4,4)
D HEL^FHADR9
"^DD",117.3,117.375,4,21,0)
^^2^2^3011004^
"^DD",117.3,117.375,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.375,4,21,2,0)
ratings specified in front of them, for question #6 of the survey.
"^DD",117.3,117.375,4,"DT")
3011004
"^DD",117.3,117.375,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.375,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.375,5,4)
D HEL^FHADR9
"^DD",117.3,117.375,5,21,0)
^^2^2^3011004^
"^DD",117.3,117.375,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the 
"^DD",117.3,117.375,5,21,2,0)
ratings specified in front of them, for question #6 of the survey.
"^DD",117.3,117.375,5,"DT")
3011004
"^DD",117.3,117.375,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.375,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.375,6,4)
D HEL^FHADR9
"^DD",117.3,117.375,6,21,0)
^^2^2^3011004^
"^DD",117.3,117.375,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.375,6,21,2,0)
ratings specified in front of them, for question #6 of the survey.
"^DD",117.3,117.375,6,"DT")
3011004
"^DD",117.3,117.376,0)
TIMELINESS SUB-FIELD^^6^7
"^DD",117.3,117.376,0,"DT")
3011004
"^DD",117.3,117.376,0,"IX","B",117.376,.01)

"^DD",117.3,117.376,0,"NM","TIMELINESS")

"^DD",117.3,117.376,0,"UP")
117.3
"^DD",117.3,117.376,.01,0)
TIMELINESS NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.376,.01,1,0)
^.1
"^DD",117.3,117.376,.01,1,1,0)
117.376^B
"^DD",117.3,117.376,.01,1,1,1)
S ^FH(117.3,DA(1),"Q7TI","B",$E(X,1,30),DA)=""
"^DD",117.3,117.376,.01,1,1,2)
K ^FH(117.3,DA(1),"Q7TI","B",$E(X,1,30),DA)
"^DD",117.3,117.376,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.376,.01,21,0)
^^2^2^3011004^
"^DD",117.3,117.376,.01,21,1,0)
This field contains a sequential number assigned to the seventh question
"^DD",117.3,117.376,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.376,.01,"DT")
3011004
"^DD",117.3,117.376,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.376,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.376,1,4)
D HEL^FHADR9
"^DD",117.3,117.376,1,21,0)
^^2^2^3011004^
"^DD",117.3,117.376,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.376,1,21,2,0)
ratings specified in front of them, for question #7 of the survey.
"^DD",117.3,117.376,1,"DT")
3011004
"^DD",117.3,117.376,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.376,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.376,2,4)
D HEL^FHADR9
"^DD",117.3,117.376,2,21,0)
^^2^2^3011004^
"^DD",117.3,117.376,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.376,2,21,2,0)
ratings specified in front of them, for question #7 of the survey.
"^DD",117.3,117.376,2,"DT")
3011004
"^DD",117.3,117.376,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.376,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.376,3,4)
D HEL^FHADR9
"^DD",117.3,117.376,3,21,0)
^^2^2^3011004^
"^DD",117.3,117.376,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.376,3,21,2,0)
ratings specified in front of them, for question #7 of the survey.
"^DD",117.3,117.376,3,"DT")
3011004
"^DD",117.3,117.376,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.376,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.376,4,4)
D HEL^FHADR9
"^DD",117.3,117.376,4,21,0)
^^2^2^3011004^
"^DD",117.3,117.376,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.376,4,21,2,0)
ratings specified in front of them, for question #7 of the survey.
"^DD",117.3,117.376,4,"DT")
3011004
"^DD",117.3,117.376,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.376,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.376,5,4)
D HEL^FHADR9
"^DD",117.3,117.376,5,21,0)
^^2^2^3011004^
"^DD",117.3,117.376,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the 
"^DD",117.3,117.376,5,21,2,0)
ratings specified in front of them, for question #7 of the survey.
"^DD",117.3,117.376,5,"DT")
3011004
"^DD",117.3,117.376,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.376,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.376,6,4)
D HEL^FHADR9
"^DD",117.3,117.376,6,21,0)
^^2^2^3011004^
"^DD",117.3,117.376,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.376,6,21,2,0)
ratings specified in front of them, for question #7 of the survey.
"^DD",117.3,117.376,6,"DT")
3011004
"^DD",117.3,117.377,0)
ENOUGH TIME SUB-FIELD^^6^7
"^DD",117.3,117.377,0,"DT")
3011009
"^DD",117.3,117.377,0,"IX","B",117.377,.01)

"^DD",117.3,117.377,0,"NM","ENOUGH TIME")

"^DD",117.3,117.377,0,"UP")
117.3
"^DD",117.3,117.377,.01,0)
ENOUGH TIME NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.377,.01,1,0)
^.1
"^DD",117.3,117.377,.01,1,1,0)
117.377^B
"^DD",117.3,117.377,.01,1,1,1)
S ^FH(117.3,DA(1),"Q8ET","B",$E(X,1,30),DA)=""
"^DD",117.3,117.377,.01,1,1,2)
K ^FH(117.3,DA(1),"Q8ET","B",$E(X,1,30),DA)
"^DD",117.3,117.377,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.377,.01,21,0)
^.001^2^2^3011009^^^
"^DD",117.3,117.377,.01,21,1,0)
This field contains a sequential number assigned to the eighth question
"^DD",117.3,117.377,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.377,.01,"DT")
3011009
"^DD",117.3,117.377,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.377,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.377,1,4)
D HEL^FHADR9
"^DD",117.3,117.377,1,21,0)
^^2^2^3011009^
"^DD",117.3,117.377,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.377,1,21,2,0)
ratings specified in front of them, for question #8 of the survey.
"^DD",117.3,117.377,1,"DT")
3011009
"^DD",117.3,117.377,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.377,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.377,2,4)
D HEL^FHADR9
"^DD",117.3,117.377,2,21,0)
^^2^2^3011009^
"^DD",117.3,117.377,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.377,2,21,2,0)
ratings specified in front of them, for question #8 of the survey.
"^DD",117.3,117.377,2,"DT")
3011009
"^DD",117.3,117.377,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.377,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.377,3,4)
D HEL^FHADR9
"^DD",117.3,117.377,3,21,0)
^.001^2^2^3011009^^
"^DD",117.3,117.377,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.377,3,21,2,0)
ratings specified in front of them, for question #8 of the survey.
"^DD",117.3,117.377,3,"DT")
3011009
"^DD",117.3,117.377,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.377,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.377,4,4)
D HEL^FHADR9
"^DD",117.3,117.377,4,21,0)
^^2^2^3011009^
"^DD",117.3,117.377,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.377,4,21,2,0)
ratings specified in front of them, for question #8 of the survey.
"^DD",117.3,117.377,4,"DT")
3011009
"^DD",117.3,117.377,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.377,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.377,5,4)
D HEL^FHADR9
"^DD",117.3,117.377,5,21,0)
^^2^2^3011009^
"^DD",117.3,117.377,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the 
"^DD",117.3,117.377,5,21,2,0)
ratings specified in front of them, for question #8 of the survey.
"^DD",117.3,117.377,5,"DT")
3011009
"^DD",117.3,117.377,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.377,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.377,6,4)
D HEL^FHADR9
"^DD",117.3,117.377,6,21,0)
^^2^2^3011009^
"^DD",117.3,117.377,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.377,6,21,2,0)
ratings specified in front of them, for question #8 of the survey.
"^DD",117.3,117.377,6,"DT")
3011009
"^DD",117.3,117.378,0)
NUTRITIONAL INFO SUB-FIELD^^6^7
"^DD",117.3,117.378,0,"DT")
3011009
"^DD",117.3,117.378,0,"IX","B",117.378,.01)

"^DD",117.3,117.378,0,"NM","NUTRITIONAL INFO")

"^DD",117.3,117.378,0,"UP")
117.3
"^DD",117.3,117.378,.01,0)
NUTRITIONAL INFO NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.378,.01,1,0)
^.1
"^DD",117.3,117.378,.01,1,1,0)
117.378^B
"^DD",117.3,117.378,.01,1,1,1)
S ^FH(117.3,DA(1),"Q9NI","B",$E(X,1,30),DA)=""
"^DD",117.3,117.378,.01,1,1,2)
K ^FH(117.3,DA(1),"Q9NI","B",$E(X,1,30),DA)
"^DD",117.3,117.378,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.378,.01,21,0)
^.001^2^2^3011009^^^
"^DD",117.3,117.378,.01,21,1,0)
This field contains a sequential number assigned to the ninth question
"^DD",117.3,117.378,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.378,.01,"DT")
3011009
"^DD",117.3,117.378,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.378,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.378,1,4)
D HEL^FHADR9
"^DD",117.3,117.378,1,21,0)
^^2^2^3011009^
"^DD",117.3,117.378,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.378,1,21,2,0)
ratings specified in front of them, for question #9 of the survey.
"^DD",117.3,117.378,1,"DT")
3011009
"^DD",117.3,117.378,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.378,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.378,2,4)
D HEL^FHADR9
"^DD",117.3,117.378,2,21,0)
^^2^2^3011009^
"^DD",117.3,117.378,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.378,2,21,2,0)
ratings specified in front of them, for question #9 of the survey.
"^DD",117.3,117.378,2,"DT")
3011009
"^DD",117.3,117.378,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.378,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.378,3,4)
D HEL^FHADR9
"^DD",117.3,117.378,3,21,0)
^^2^2^3011009^
"^DD",117.3,117.378,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.378,3,21,2,0)
ratings specified in front of them, for question #9 of the survey.
"^DD",117.3,117.378,3,"DT")
3011009
"^DD",117.3,117.378,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.378,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.378,4,4)
D HEL^FHADR9
"^DD",117.3,117.378,4,21,0)
^^2^2^3011009^
"^DD",117.3,117.378,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.378,4,21,2,0)
ratings specified in front of them, for question #9 of the survey.
"^DD",117.3,117.378,4,"DT")
3011009
"^DD",117.3,117.378,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.378,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.378,5,4)
D HEL^FHADR9
"^DD",117.3,117.378,5,21,0)
^^2^2^3011009^
"^DD",117.3,117.378,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the 
"^DD",117.3,117.378,5,21,2,0)
ratings specified in front of them, for question #9 of the survey.
"^DD",117.3,117.378,5,"DT")
3011009
"^DD",117.3,117.378,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.378,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.378,6,4)
D HEL^FHADR9
"^DD",117.3,117.378,6,21,0)
^^2^2^3011009^
"^DD",117.3,117.378,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.378,6,21,2,0)
ratings specified in front of them, for question #9 of the survey.
"^DD",117.3,117.378,6,"DT")
3011009
"^DD",117.3,117.379,0)
OVERALL SUB-FIELD^^6^7
"^DD",117.3,117.379,0,"DT")
3011009
"^DD",117.3,117.379,0,"IX","B",117.379,.01)

"^DD",117.3,117.379,0,"NM","OVERALL")

"^DD",117.3,117.379,0,"UP")
117.3
"^DD",117.3,117.379,.01,0)
OVERALL NUMBER^NJ3,0X^^0;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",117.3,117.379,.01,1,0)
^.1
"^DD",117.3,117.379,.01,1,1,0)
117.379^B
"^DD",117.3,117.379,.01,1,1,1)
S ^FH(117.3,DA(1),"Q10V","B",$E(X,1,30),DA)=""
"^DD",117.3,117.379,.01,1,1,2)
K ^FH(117.3,DA(1),"Q10V","B",$E(X,1,30),DA)
"^DD",117.3,117.379,.01,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",117.3,117.379,.01,21,0)
^.001^2^2^3011009^^^
"^DD",117.3,117.379,.01,21,1,0)
This field contains a sequential number assigned to the tenth question
"^DD",117.3,117.379,.01,21,2,0)
of the Patient Satisfaction Survey and has no meaning.
"^DD",117.3,117.379,.01,"DT")
3011009
"^DD",117.3,117.379,1,0)
GM&S^FX^^0;2^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.379,1,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.379,1,4)
D HEL^FHADR9
"^DD",117.3,117.379,1,21,0)
^^2^2^3011009^
"^DD",117.3,117.379,1,21,1,0)
This is a rating string containing numbers surveyed in GM&S with the 
"^DD",117.3,117.379,1,21,2,0)
ratings specified in front of them, for question #10 of the survey.
"^DD",117.3,117.379,1,"DT")
3011009
"^DD",117.3,117.379,2,0)
NHCU^FX^^0;3^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.379,2,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.379,2,4)
D HEL^FHADR9
"^DD",117.3,117.379,2,21,0)
^^2^2^3011009^
"^DD",117.3,117.379,2,21,1,0)
This is a rating string containing numbers surveyed in NHCU with the 
"^DD",117.3,117.379,2,21,2,0)
ratings specified in front of them, for question #10 of the survey.
"^DD",117.3,117.379,2,"DT")
3011009
"^DD",117.3,117.379,3,0)
PSYCH^FX^^0;4^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.379,3,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.379,3,4)
D HEL^FHADR9
"^DD",117.3,117.379,3,21,0)
^^2^2^3011009^
"^DD",117.3,117.379,3,21,1,0)
This is a rating string containing numbers surveyed in PSYCH with the 
"^DD",117.3,117.379,3,21,2,0)
ratings specified in front of them, for question #10 of the survey.
"^DD",117.3,117.379,3,"DT")
3011009
"^DD",117.3,117.379,4,0)
DOM^FX^^0;5^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.379,4,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.379,4,4)
D HEL^FHADR9
"^DD",117.3,117.379,4,21,0)
^^2^2^3011009^
"^DD",117.3,117.379,4,21,1,0)
This is a rating string containing numbers surveyed in DOM with the 
"^DD",117.3,117.379,4,21,2,0)
ratings specified in front of them, for question #10 of the survey.
"^DD",117.3,117.379,4,"DT")
3011009
"^DD",117.3,117.379,5,0)
SCI^FX^^0;6^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.379,5,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.379,5,4)
D HEL^FHADR9
"^DD",117.3,117.379,5,21,0)
^^2^2^3011009^
"^DD",117.3,117.379,5,21,1,0)
This is a rating string containing numbers surveyed in SCI with the 
"^DD",117.3,117.379,5,21,2,0)
ratings specified in front of them, for question #10 of the survey.
"^DD",117.3,117.379,5,"DT")
3011009
"^DD",117.3,117.379,6,0)
OTHER^FX^^0;7^K:$L(X)>35!($L(X)<2) X I $D(X) D C0^FHADR9
"^DD",117.3,117.379,6,3)
Answer must be 2-35 characters in length.
"^DD",117.3,117.379,6,4)
D HEL^FHADR9
"^DD",117.3,117.379,6,21,0)
^^2^2^3011009^
"^DD",117.3,117.379,6,21,1,0)
This is a rating string containing numbers surveyed in OTHER with the 
"^DD",117.3,117.379,6,21,2,0)
ratings specified in front of them, for question #10 of the survey.
"^DD",117.3,117.379,6,"DT")
3011009
"^DD",117.4,117.4,0)
FIELD^^101^4
"^DD",117.4,117.4,0,"DDA")
N
"^DD",117.4,117.4,0,"DT")
2920130
"^DD",117.4,117.4,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",117.4,117.4,0,"IX","AC",117.4,99)

"^DD",117.4,117.4,0,"IX","B",117.4,.01)

"^DD",117.4,117.4,0,"IX","C",117.4,101)

"^DD",117.4,117.4,0,"NM","DIETETIC REPORT CATEGORIES")

"^DD",117.4,117.4,0,"PT",117.312,.01)

"^DD",117.4,117.4,0,"PT",117.313,.01)

"^DD",117.4,117.4,0,"PT",117.338,.01)

"^DD",117.4,117.4,0,"SCR")
I '$D(^FH(117.4,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",117.4,117.4,0,"VRPK")
FH
"^DD",117.4,117.4,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",117.4,117.4,.01,1,0)
^.1
"^DD",117.4,117.4,.01,1,1,0)
117.4^B
"^DD",117.4,117.4,.01,1,1,1)
S ^FH(117.4,"B",$E(X,1,30),DA)=""
"^DD",117.4,117.4,.01,1,1,2)
K ^FH(117.4,"B",$E(X,1,30),DA)
"^DD",117.4,117.4,.01,1,2,0)
^^TRIGGER^117.4^101
"^DD",117.4,117.4,.01,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^FH(117.4,D0,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y X ^DD(117.4,.01,1,2,1.1) X ^DD(117.4,.01,1,2,1.4)
"^DD",117.4,117.4,.01,1,2,1.1)
S X=DIV S X=DIV X "F %=1:1:$L(X) S:$E(X,%)?1L X=$E(X,0,%-1)_$C($A(X,%)-32)_$E(X,%+1,999)" S X=X,Y(1)=X S X=1,Y(2)=X S X=30,X=$E(Y(1),Y(2),X)
"^DD",117.4,117.4,.01,1,2,1.4)
S DIH=$S($D(^FH(117.4,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,3)=DIV,DIH=117.4,DIG=101 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",117.4,117.4,.01,1,2,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^FH(117.4,D0,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X="" X ^DD(117.4,.01,1,2,2.4)
"^DD",117.4,117.4,.01,1,2,2.4)
S DIH=$S($D(^FH(117.4,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,3)=DIV,DIH=117.4,DIG=101 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",117.4,117.4,.01,1,2,"%D",0)
^^2^2^2911213^
"^DD",117.4,117.4,.01,1,2,"%D",1,0)
This trigger converts the upper/lower case name into all uppercase
"^DD",117.4,117.4,.01,1,2,"%D",2,0)
and stores it in field 101.
"^DD",117.4,117.4,.01,1,2,"CREATE VALUE")
$E(UPPERCASE(NAME),1,30)
"^DD",117.4,117.4,.01,1,2,"DELETE VALUE")
@
"^DD",117.4,117.4,.01,1,2,"DT")
2911213
"^DD",117.4,117.4,.01,1,2,"FIELD")
UPPER
"^DD",117.4,117.4,.01,3)
Answer must be 3-30 characters in length.
"^DD",117.4,117.4,.01,21,0)
^^2^2^2920130^
"^DD",117.4,117.4,.01,21,1,0)
This field contains the names of the categories used in the Annual
"^DD",117.4,117.4,.01,21,2,0)
Report.
"^DD",117.4,117.4,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",117.4,117.4,.01,"DT")
2911213
"^DD",117.4,117.4,1,0)
TYPE^RS^S:Specialized Medical Program;D:Primary Delivery System;P:Primary Production System;E:Dietetic Service Equipment;^0;2^Q
"^DD",117.4,117.4,1,21,0)
^^3^3^2920130^
"^DD",117.4,117.4,1,21,1,0)
This field contains the Type of Category. An "S" for Specialized
"^DD",117.4,117.4,1,21,2,0)
Medical Program, a "D" for Primary Delivery System, a "P" for
"^DD",117.4,117.4,1,21,3,0)
Primary Production System, and "E" for Dietetic Service Equipment.
"^DD",117.4,117.4,1,"DT")
2920130
"^DD",117.4,117.4,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",117.4,117.4,99,1,0)
^.1
"^DD",117.4,117.4,99,1,1,0)
117.4^AC^MUMPS
"^DD",117.4,117.4,99,1,1,1)
K:X'="Y" ^FH(117.4,DA,"I")
"^DD",117.4,117.4,99,1,1,2)
K ^FH(117.4,DA,"I")
"^DD",117.4,117.4,99,1,1,"%D",0)
^^2^2^3000202
"^DD",117.4,117.4,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",117.4,117.4,99,1,1,"%D",2,0)
inactive entries.
"^DD",117.4,117.4,99,21,0)
^^2^2^3000202
"^DD",117.4,117.4,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",117.4,117.4,99,21,2,0)
further selection of this entry.
"^DD",117.4,117.4,99,"DT")
3000223
"^DD",117.4,117.4,101,0)
UPPERCASE NAME^F^^0;3^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<3) X
"^DD",117.4,117.4,101,1,0)
^.1
"^DD",117.4,117.4,101,1,1,0)
117.4^C
"^DD",117.4,117.4,101,1,1,1)
S ^FH(117.4,"C",$E(X,1,30),DA)=""
"^DD",117.4,117.4,101,1,1,2)
K ^FH(117.4,"C",$E(X,1,30),DA)
"^DD",117.4,117.4,101,1,1,"%D",0)
^^1^1^2911213^
"^DD",117.4,117.4,101,1,1,"%D",1,0)
This is a cross-reference of all uppercase text of the name.
"^DD",117.4,117.4,101,1,1,"DT")
2911213
"^DD",117.4,117.4,101,3)
Answer must be 3-30 characters in length.
"^DD",117.4,117.4,101,5,1,0)
117.4^.01^2
"^DD",117.4,117.4,101,21,0)
^^1^1^2920130^^^
"^DD",117.4,117.4,101,21,1,0)
This is the name of the entry in uppercase text.
"^DD",117.4,117.4,101,"DT")
2911213
"^DD",118,118,0)
FIELD^^99^8
"^DD",118,118,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",118,118,0,"IX","AC",118,20)

"^DD",118,118,0,"IX","AD",118,99)

"^DD",118,118,0,"IX","B",118,.01)

"^DD",118,118,0,"IX","B",118.01,.01)

"^DD",118,118,0,"NM","SUPPLEMENTAL FEEDINGS")

"^DD",118,118,0,"PT",115.07,10)

"^DD",118,118,0,"PT",115.07,12)

"^DD",118,118,0,"PT",115.07,14)

"^DD",118,118,0,"PT",115.07,16)

"^DD",118,118,0,"PT",115.07,18)

"^DD",118,118,0,"PT",115.07,20)

"^DD",118,118,0,"PT",115.07,22)

"^DD",118,118,0,"PT",115.07,24)

"^DD",118,118,0,"PT",115.07,26)

"^DD",118,118,0,"PT",115.07,28)

"^DD",118,118,0,"PT",115.07,30)

"^DD",118,118,0,"PT",115.07,32)

"^DD",118,118,0,"PT",118.1,10)

"^DD",118,118,0,"PT",118.1,11)

"^DD",118,118,0,"PT",118.1,12)

"^DD",118,118,0,"PT",118.1,13)

"^DD",118,118,0,"PT",118.1,14)

"^DD",118,118,0,"PT",118.1,15)

"^DD",118,118,0,"PT",118.1,16)

"^DD",118,118,0,"PT",118.1,17)

"^DD",118,118,0,"PT",118.1,18)

"^DD",118,118,0,"PT",118.1,19)

"^DD",118,118,0,"PT",118.1,20)

"^DD",118,118,0,"PT",118.1,21)

"^DD",118,118,0,"PT",119.61,.01)

"^DD",118,118,0,"PT",14100032.015,.01)

"^DD",118,118,0,"SCR")
I '$D(^FH(118,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",118,118,0,"VRPK")
FH
"^DD",118,118,.01,0)
NAME^RF^^0;1^K:$L(X)>20!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",118,118,.01,1,0)
^.1
"^DD",118,118,.01,1,1,0)
118^B
"^DD",118,118,.01,1,1,1)
S ^FH(118,"B",$E(X,1,30),DA)=""
"^DD",118,118,.01,1,1,2)
K ^FH(118,"B",$E(X,1,30),DA)
"^DD",118,118,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",118,118,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",118,118,.01,3)
ANSWER MUST BE 3-20 CHARACTERS IN LENGTH
"^DD",118,118,.01,21,0)
^^1^1^2880717^
"^DD",118,118,.01,21,1,0)
This field contains the name of the Supplemental Feeding.
"^DD",118,118,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",118,118,.01,"DT")
2840812
"^DD",118,118,1,0)
SYNONYM^118.01^^S;0
"^DD",118,118,1,21,0)
^^2^2^2901217^
"^DD",118,118,1,21,1,0)
This field allows for a number of synonyms for the supplemental
"^DD",118,118,1,21,2,0)
feeding to be entered.
"^DD",118,118,5,0)
LABEL?^S^Y:YES;N:NO;^0;2^Q
"^DD",118,118,5,3)
Enter N if you do not want a separate label for this item
"^DD",118,118,5,21,0)
^^4^4^2930203^^
"^DD",118,118,5,21,1,0)
This field, when answered NO, means that a label will not
"^DD",118,118,5,21,2,0)
be produced for this item when separate supplemental feeding
"^DD",118,118,5,21,3,0)
labels for each item have been specified in the site
"^DD",118,118,5,21,4,0)
parameters.
"^DD",118,118,5,"DT")
2850320
"^DD",118,118,7,0)
VEHICLE FOR MEDS?^S^Y:YES;N:NO;^0;4^Q
"^DD",118,118,7,21,0)
^^2^2^2880717^
"^DD",118,118,7,21,1,0)
This field, when answered YES, means that the supplemental
"^DD",118,118,7,21,2,0)
feeding is typically used as a vehicle for meds.
"^DD",118,118,7,"DT")
2850606
"^DD",118,118,10,0)
BULK ONLY?^S^Y:YES;N:NO;^0;3^Q
"^DD",118,118,10,21,0)
^^3^3^2880717^
"^DD",118,118,10,21,1,0)
This field, when answered YES, means that this supplemental
"^DD",118,118,10,21,2,0)
feeding item can ONLY be selected as a bulk feeding for ward
"^DD",118,118,10,21,3,0)
delivery and may not be selected as an individual feeding item.
"^DD",118,118,10,"DT")
2850604
"^DD",118,118,11,0)
CORRESPONDING RECIPE^P114'^FH(114,^0;7^Q
"^DD",118,118,11,21,0)
^^3^3^2901217^
"^DD",118,118,11,21,1,0)
This field is a pointer to the recipe in file 114 (the Recipe file)
"^DD",118,118,11,21,2,0)
which contains the ingredients for this feeding. Cost and other data
"^DD",118,118,11,21,3,0)
for this feeding will be retrieved from the recipe file.
"^DD",118,118,11,"DT")
2900929
"^DD",118,118,20,0)
COST^CJ8,2^^ ; ^X ^DD(118,20,9.2) S X=$P(Y(118,20,101),U,13) S D0=Y(118,20,80) S X=$J(X,0,2)
"^DD",118,118,20,1,0)
^.1
"^DD",118,118,20,1,1,0)
118^AC^MUMPS
"^DD",118,118,20,1,1,1)
S $P(^FH(118,DA,0),"^",6)=DT
"^DD",118,118,20,1,1,2)
S $P(^FH(118,DA,0),"^",6)=""
"^DD",118,118,20,3)
TYPE A NUMBER BETWEEN 0 AND 20
"^DD",118,118,20,9)
^
"^DD",118,118,20,9.01)
114^101;118^11
"^DD",118,118,20,9.1)
CORRESPONDING RECIPE:COST/PORTION
"^DD",118,118,20,9.2)
S Y(118,20,80)=$S($D(D0):D0,1:""),Y(118,20,1)=$S($D(^FH(118,D0,0)):^(0),1:""),D0=$P(Y(118,20,1),U,7) S:'$D(^FH(114,+D0,0)) D0=-1 S Y(118,20,101)=$S($D(^FH(114,D0,0)):^(0),1:"")
"^DD",118,118,20,21,0)
^^3^3^2950613^^^^
"^DD",118,118,20,21,1,0)
This is the portion cost of the supplemental feeding and is a
"^DD",118,118,20,21,2,0)
computed field which obtains the value from the recipe file based
"^DD",118,118,20,21,3,0)
upon the 'Corresponding Recipe' pointer.
"^DD",118,118,20,"DT")
2860628
"^DD",118,118,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",118,118,99,1,0)
^.1
"^DD",118,118,99,1,1,0)
118^AD^MUMPS
"^DD",118,118,99,1,1,1)
K:X'="Y" ^FH(118,DA,"I")
"^DD",118,118,99,1,1,2)
K ^FH(118,DA,"I")
"^DD",118,118,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",118,118,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",118,118,99,1,1,"%D",2,0)
inactive entries.
"^DD",118,118,99,21,0)
^^2^2^2880717^
"^DD",118,118,99,21,1,0)
This field, when answered YES, means that further selection of
"^DD",118,118,99,21,2,0)
this item by dietetic personnel is prohibited.
"^DD",118,118,99,"DT")
2860813
"^DD",118,118.01,0)
SYNONYM SUB-FIELD^^.01^1
"^DD",118,118.01,0,"IX","B",118.01,.01)

"^DD",118,118.01,0,"NM","SYNONYM")

"^DD",118,118.01,0,"UP")
118
"^DD",118,118.01,.01,0)
SYNONYM^MF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<3) X
"^DD",118,118.01,.01,1,0)
^.1
"^DD",118,118.01,.01,1,1,0)
118.01^B
"^DD",118,118.01,.01,1,1,1)
S ^FH(118,DA(1),"S","B",$E(X,1,30),DA)=""
"^DD",118,118.01,.01,1,1,2)
K ^FH(118,DA(1),"S","B",$E(X,1,30),DA)
"^DD",118,118.01,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",118,118.01,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the SYNONYM field.
"^DD",118,118.01,.01,1,2,0)
118^B^MNEMONIC
"^DD",118,118.01,.01,1,2,1)
S:'$D(^FH(118,"B",$E(X,1,30),DA(1),DA)) ^(DA)=1
"^DD",118,118.01,.01,1,2,2)
I $D(^FH(118,"B",$E(X,1,30),DA(1),DA)),^(DA) K ^(DA)
"^DD",118,118.01,.01,1,2,"%D",0)
^^1^1^2911118^
"^DD",118,118.01,.01,1,2,"%D",1,0)
This is the normal B cross-reference of the SYNONYM field.
"^DD",118,118.01,.01,3)
Answer must be 3-30 characters in length.
"^DD",118,118.01,.01,21,0)
^^1^1^2901217^
"^DD",118,118.01,.01,21,1,0)
This field contains a synonym for the supplemental feeding.
"^DD",118,118.01,.01,"DT")
2900918
"^DD",118.1,118.1,0)
FIELD^^99^28
"^DD",118.1,118.1,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",118.1,118.1,0,"IX","AC",118.1,99)

"^DD",118.1,118.1,0,"IX","B",118.1,.01)

"^DD",118.1,118.1,0,"IX","C",118.1,1)

"^DD",118.1,118.1,0,"NM","SUPPLEMENTAL FEEDING MENU")

"^DD",118.1,118.1,0,"PT",111.1,18)

"^DD",118.1,118.1,0,"PT",115.07,3)

"^DD",118.1,118.1,0,"SCR")
I '$D(^FH(118.1,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",118.1,118.1,0,"VRPK")
FH
"^DD",118.1,118.1,.01,0)
NAME^RF^^0;1^K:$L(X)>27!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",118.1,118.1,.01,1,0)
^.1
"^DD",118.1,118.1,.01,1,1,0)
118.1^B
"^DD",118.1,118.1,.01,1,1,1)
S ^FH(118.1,"B",$E(X,1,30),DA)=""
"^DD",118.1,118.1,.01,1,1,2)
K ^FH(118.1,"B",$E(X,1,30),DA)
"^DD",118.1,118.1,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",118.1,118.1,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",118.1,118.1,.01,3)
ANSWER MUST BE 3-27 CHARACTERS IN LENGTH
"^DD",118.1,118.1,.01,21,0)
^^2^2^2880710^
"^DD",118.1,118.1,.01,21,1,0)
This is the name of the supplemental feeding menu, a pre-set
"^DD",118.1,118.1,.01,21,2,0)
collection of feeding items for the three feeding times.
"^DD",118.1,118.1,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",118.1,118.1,.01,"DT")
2850207
"^DD",118.1,118.1,1,0)
SYNONYM^F^^0;2^K:$L(X)>10!($L(X)<3) X
"^DD",118.1,118.1,1,1,0)
^.1
"^DD",118.1,118.1,1,1,1,0)
118.1^C
"^DD",118.1,118.1,1,1,1,1)
S ^FH(118.1,"C",$E(X,1,30),DA)=""
"^DD",118.1,118.1,1,1,1,2)
K ^FH(118.1,"C",$E(X,1,30),DA)
"^DD",118.1,118.1,1,3)
ANSWER MUST BE 3-10 CHARACTERS IN LENGTH
"^DD",118.1,118.1,1,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,1,21,1,0)
This field may contain a synonym for the feeding menu.
"^DD",118.1,118.1,1,"DT")
2850316
"^DD",118.1,118.1,3,0)
DIETARY OR THERAPEUTIC^RS^D:DIETARY;T:THERAPEUTIC;^1;25^Q
"^DD",118.1,118.1,3,21,0)
^^2^2^2880710^
"^DD",118.1,118.1,3,21,1,0)
This field indicates whether the menu is generally ordered
"^DD",118.1,118.1,3,21,2,0)
for dietary or therapeutic reasons.
"^DD",118.1,118.1,3,"DT")
2851003
"^DD",118.1,118.1,10,0)
10AM FEEDING #1^*P118'^FH(118,^1;1^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,10,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,10,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,10,21,0)
^^1^1^2880710^^
"^DD",118.1,118.1,10,21,1,0)
This is the first supplemental feeding item for the 10am feeding.
"^DD",118.1,118.1,10,"DT")
2850604
"^DD",118.1,118.1,10.5,0)
10AM #1 QTY^NJ2,0^^1;2^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,10.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,10.5,21,0)
^^1^1^2880710^^
"^DD",118.1,118.1,10.5,21,1,0)
This is the quantity of the first 10am feeding item.
"^DD",118.1,118.1,11,0)
10AM FEEDING #2^*P118'^FH(118,^1;3^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,11,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,11,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,11,21,0)
^^1^1^2880710^^
"^DD",118.1,118.1,11,21,1,0)
This is the second supplemental feeding item for the 10am feeding.
"^DD",118.1,118.1,11,"DT")
2850604
"^DD",118.1,118.1,11.5,0)
10AM #2 QTY^NJ2,0^^1;4^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,11.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,11.5,21,0)
^^1^1^2880710^^
"^DD",118.1,118.1,11.5,21,1,0)
This is the quantity of the second 10am feeding item.
"^DD",118.1,118.1,12,0)
10AM FEEDING #3^*P118'^FH(118,^1;5^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,12,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,12,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,12,21,0)
^^1^1^2880710^^^
"^DD",118.1,118.1,12,21,1,0)
This is the third supplemental feeding item for the 10am feeding.
"^DD",118.1,118.1,12.5,0)
10AM #3 QTY^NJ2,0^^1;6^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,12.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,12.5,21,0)
^^1^1^2880710^^^
"^DD",118.1,118.1,12.5,21,1,0)
This is the quantity of the third 10am feeding item.
"^DD",118.1,118.1,13,0)
10AM FEEDING #4^*P118'^FH(118,^1;7^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,13,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,13,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,13,21,0)
^^1^1^2880710^^
"^DD",118.1,118.1,13,21,1,0)
This is the fourth supplemental feeding item for the 10am feeding.
"^DD",118.1,118.1,13.5,0)
10AM #4 QTY^NJ2,0^^1;8^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,13.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,13.5,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,13.5,21,1,0)
This is the quantity of the fourth 10am feeding item.
"^DD",118.1,118.1,14,0)
2PM FEEDING #1^*P118'^FH(118,^1;9^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,14,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,14,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,14,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,14,21,1,0)
This is the first supplemental feeding item for the 2pm feeding.
"^DD",118.1,118.1,14.5,0)
2PM #1 QTY^NJ2,0^^1;10^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,14.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,14.5,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,14.5,21,1,0)
This is the quantity of the first 2pm feeding item.
"^DD",118.1,118.1,15,0)
2PM FEEDING #2^*P118'^FH(118,^1;11^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,15,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,15,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,15,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,15,21,1,0)
This is the second supplemental feeding item for the 2pm feeding.
"^DD",118.1,118.1,15.5,0)
2PM #2 QTY^NJ2,0^^1;12^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,15.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,15.5,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,15.5,21,1,0)
This is the quantity of the second 2pm feeding item.
"^DD",118.1,118.1,16,0)
2PM FEEDING #3^*P118'^FH(118,^1;13^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,16,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,16,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,16,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,16,21,1,0)
This is the third supplemental feeding item for the 2pm feeding.
"^DD",118.1,118.1,16.5,0)
2PM #3 QTY^NJ2,0^^1;14^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,16.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,16.5,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,16.5,21,1,0)
This is the quantity of the third 2pm feeding item.
"^DD",118.1,118.1,17,0)
2PM FEEDING #4^*P118'^FH(118,^1;15^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,17,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,17,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,17,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,17,21,1,0)
This is the fourth supplemental feeding item for the 2pm feeding.
"^DD",118.1,118.1,17.5,0)
2PM #4 QTY^NJ2,0^^1;16^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,17.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,17.5,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,17.5,21,1,0)
This is the quantity of the fourth 2pm feeding item.
"^DD",118.1,118.1,18,0)
8PM FEEDING #1^*P118'^FH(118,^1;17^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,18,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,18,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,18,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,18,21,1,0)
This is the first supplemental feeding item for the 8pm feeding.
"^DD",118.1,118.1,18.5,0)
8PM #1 QTY^NJ2,0^^1;18^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,18.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,18.5,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,18.5,21,1,0)
This is the quantity of the first 8pm feeding item.
"^DD",118.1,118.1,19,0)
8PM FEEDING #2^*P118'^FH(118,^1;19^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,19,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,19,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,19,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,19,21,1,0)
This is the second supplemental feeding item for the 8pm feeding.
"^DD",118.1,118.1,19.5,0)
8PM #2 QTY^NJ2,0^^1;20^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,19.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,19.5,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,19.5,21,1,0)
This is the quantity of the second 8pm feeding item.
"^DD",118.1,118.1,20,0)
8PM FEEDING #3^*P118'^FH(118,^1;21^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,20,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,20,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,20,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,20,21,1,0)
This is the third supplemental feeding item for the 8pm feeding.
"^DD",118.1,118.1,20.5,0)
8PM #3 QTY^NJ2,0^^1;22^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,20.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,20.5,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,20.5,21,1,0)
This is the quantity of the third 8pm feeding item.
"^DD",118.1,118.1,21,0)
8PM FEEDING #4^*P118'^FH(118,^1;23^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",118.1,118.1,21,12)
Cannot select bulk nourishments
"^DD",118.1,118.1,21,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",118.1,118.1,21,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,21,21,1,0)
This is the fourth supplemental feeding item for the 8pm feeding.
"^DD",118.1,118.1,21.5,0)
8PM #4 QTY^NJ2,0^^1;24^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",118.1,118.1,21.5,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",118.1,118.1,21.5,21,0)
^^1^1^2880710^
"^DD",118.1,118.1,21.5,21,1,0)
This is the quantity of the fourth 8pm feeding item.
"^DD",118.1,118.1,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",118.1,118.1,99,1,0)
^.1
"^DD",118.1,118.1,99,1,1,0)
118.1^AC^MUMPS
"^DD",118.1,118.1,99,1,1,1)
K:X'="Y" ^FH(118.1,DA,"I")
"^DD",118.1,118.1,99,1,1,2)
K ^FH(118.1,DA,"I")
"^DD",118.1,118.1,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",118.1,118.1,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",118.1,118.1,99,1,1,"%D",2,0)
inactive entries.
"^DD",118.1,118.1,99,21,0)
^^2^2^2880831^
"^DD",118.1,118.1,99,21,1,0)
This field, if answered YES, will prohibit further selection
"^DD",118.1,118.1,99,21,2,0)
of this Supplemental Feeding Menu by dietetic personnel.
"^DD",118.1,118.1,99,"DT")
2880831
"^DD",118.2,118.2,0)
FIELD^^99^8
"^DD",118.2,118.2,0,"DT")
2920928
"^DD",118.2,118.2,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",118.2,118.2,0,"IX","AC",118.2,99)

"^DD",118.2,118.2,0,"IX","B",118.2,.01)

"^DD",118.2,118.2,0,"IX","C",118.21,.01)

"^DD",118.2,118.2,0,"NM","TUBEFEEDING")

"^DD",118.2,118.2,0,"PT",115.1,.01)

"^DD",118.2,118.2,0,"PT",115.1619,.01)

"^DD",118.2,118.2,0,"SCR")
I '$D(^FH(118.2,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",118.2,118.2,0,"VRPK")
FH
"^DD",118.2,118.2,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",118.2,118.2,.01,1,0)
^.1
"^DD",118.2,118.2,.01,1,1,0)
118.2^B
"^DD",118.2,118.2,.01,1,1,1)
S ^FH(118.2,"B",$E(X,1,30),DA)=""
"^DD",118.2,118.2,.01,1,1,2)
K ^FH(118.2,"B",$E(X,1,30),DA)
"^DD",118.2,118.2,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",118.2,118.2,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",118.2,118.2,.01,3)
Answer must be 3-30 characters in length.
"^DD",118.2,118.2,.01,21,0)
^^2^2^2880710^
"^DD",118.2,118.2,.01,21,1,0)
This is the name of the tubefeeding product as it will appear
"^DD",118.2,118.2,.01,21,2,0)
on all lists and displays.
"^DD",118.2,118.2,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",118.2,118.2,.01,"DT")
2920116
"^DD",118.2,118.2,1,0)
DISPENSING UNIT^RF^^0;2^K:$L(X)>10!($L(X)<1) X
"^DD",118.2,118.2,1,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",118.2,118.2,1,21,0)
^^2^2^2920814^^^
"^DD",118.2,118.2,1,21,1,0)
This field contains a title for the dispensing unit such
"^DD",118.2,118.2,1,21,2,0)
as bottle, can or package.
"^DD",118.2,118.2,2,0)
AMT/UNIT^RFX^^0;3^S FHX1=$P(X," ",1) S:$E(FHX1,$L(FHX1))'?1U FHX1=+FHX1_$P(X," ",2) S:"CG"[$E(FHX1,$L(+FHX1)+1) X=+FHX1_$E(FHX1,$L(+FHX1)+1) K FHX1 K:$L(X)>10!($L(X)<2)!(+X>9999)!(+X<0)!("CG"'[$E(X,$L(X))) X
"^DD",118.2,118.2,2,3)
Enter amount in CC's or in Grams.  Amount cannot exceed 9999.  The following are examples of valid entries 22CC, 40GRAMS, 20 G, or 100 C.
"^DD",118.2,118.2,2,21,0)
^^3^3^2931109^^^^
"^DD",118.2,118.2,2,21,1,0)
This is the number of cc's or grams of product contained in the
"^DD",118.2,118.2,2,21,2,0)
dispensing unit. For products which require reconstitution
"^DD",118.2,118.2,2,21,3,0)
with water, it is the number of cc's after reconstitution.
"^DD",118.2,118.2,2,"DT")
2920928
"^DD",118.2,118.2,3,0)
KCAL/CC^RNJ7,2^^0;4^K:+X'=X!(X>1000)!(X<.1)!(X?.E1"."3N.N) X
"^DD",118.2,118.2,3,3)
Type a Number between .1 and 1000, 2 Decimal Digits
"^DD",118.2,118.2,3,21,0)
^^2^2^2930416^^^^
"^DD",118.2,118.2,3,21,1,0)
This field contains the number of KiloCalories per cc of
"^DD",118.2,118.2,3,21,2,0)
product.
"^DD",118.2,118.2,3,"DT")
2880304
"^DD",118.2,118.2,5,0)
COST^CJ8,2^^ ; ^X ^DD(118.2,5,9.2) S X=$P(Y(118.2,5,101),U,13) S D0=Y(118.2,5,80) S X=$J(X,0,2)
"^DD",118.2,118.2,5,3)
TYPE A NUMBER BETWEEN 0 AND 100
"^DD",118.2,118.2,5,9)
^
"^DD",118.2,118.2,5,9.01)
114^101;118.2^11
"^DD",118.2,118.2,5,9.1)
CORRESPONDING RECIPE:COST/PORTION
"^DD",118.2,118.2,5,9.2)
S Y(118.2,5,80)=$S($D(D0):D0,1:""),Y(118.2,5,1)=$S($D(^FH(118.2,D0,0)):^(0),1:""),D0=$P(Y(118.2,5,1),U,7) S:'$D(^FH(114,+D0,0)) D0=-1 S Y(118.2,5,101)=$S($D(^FH(114,D0,0)):^(0),1:"")
"^DD",118.2,118.2,5,21,0)
^^3^3^2950613^^^^
"^DD",118.2,118.2,5,21,1,0)
This is the portion cost of the tubefeeding and is a
"^DD",118.2,118.2,5,21,2,0)
computed field which obtains the value from the recipe file based
"^DD",118.2,118.2,5,21,3,0)
upon the 'Corresponding Recipe' pointer.
"^DD",118.2,118.2,5,"DT")
2850928
"^DD",118.2,118.2,10,0)
SYNONYM^118.21^^1;0
"^DD",118.2,118.2,10,21,0)
^^3^3^2920818^^
"^DD",118.2,118.2,10,21,1,0)
This multiple contains alternate names or synonyms for the
"^DD",118.2,118.2,10,21,2,0)
product. These names should include any names commonly known
"^DD",118.2,118.2,10,21,3,0)
or used by ward/medical personnel.
"^DD",118.2,118.2,11,0)
CORRESPONDING RECIPE^P114'^FH(114,^0;7^Q
"^DD",118.2,118.2,11,21,0)
^^3^3^2910411^^^
"^DD",118.2,118.2,11,21,1,0)
This field is a pointer to the recipe in file 114 (the Recipe file)
"^DD",118.2,118.2,11,21,2,0)
which contains the ingredients for this feeding. Cost and other data
"^DD",118.2,118.2,11,21,3,0)
for this feeding will be retrieved from the recipe file.
"^DD",118.2,118.2,11,"DT")
2900929
"^DD",118.2,118.2,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",118.2,118.2,99,1,0)
^.1
"^DD",118.2,118.2,99,1,1,0)
118.2^AC^MUMPS
"^DD",118.2,118.2,99,1,1,1)
K:X'="Y" ^FH(118.2,DA,"I")
"^DD",118.2,118.2,99,1,1,2)
K ^FH(118.2,DA,"I")
"^DD",118.2,118.2,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",118.2,118.2,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",118.2,118.2,99,1,1,"%D",2,0)
inactive entries.
"^DD",118.2,118.2,99,21,0)
^^2^2^2920818^^
"^DD",118.2,118.2,99,21,1,0)
This field, if answered YES, prohibits further selection of
"^DD",118.2,118.2,99,21,2,0)
this item by ward or dietetic personnel.
"^DD",118.2,118.2,99,"DT")
2860813
"^DD",118.2,118.21,0)
SYNONYM SUB-FIELD^NL^.01^1
"^DD",118.2,118.21,0,"NM","SYNONYM")

"^DD",118.2,118.21,0,"UP")
118.2
"^DD",118.2,118.21,.01,0)
SYNONYM^MF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>30!($L(X)<1) X
"^DD",118.2,118.21,.01,1,0)
^.1
"^DD",118.2,118.21,.01,1,1,0)
118.2^C
"^DD",118.2,118.21,.01,1,1,1)
S ^FH(118.2,"C",$E(X,1,30),DA(1),DA)=""
"^DD",118.2,118.21,.01,1,1,2)
K ^FH(118.2,"C",$E(X,1,30),DA(1),DA)
"^DD",118.2,118.21,.01,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",118.2,118.21,.01,21,0)
^^2^2^2880710^
"^DD",118.2,118.21,.01,21,1,0)
This field contains an alternate name or synonym for the
"^DD",118.2,118.21,.01,21,2,0)
tubefeeding product.
"^DD",118.2,118.21,.01,"DT")
2850709
"^DD",118.3,118.3,0)
FIELD^^99^3
"^DD",118.3,118.3,0,"DT")
2920504
"^DD",118.3,118.3,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",118.3,118.3,0,"IX","AC",118.3,99)

"^DD",118.3,118.3,0,"IX","B",118.3,.01)

"^DD",118.3,118.3,0,"NM","STANDING ORDERS")

"^DD",118.3,118.3,0,"PT",111.11,.01)

"^DD",118.3,118.3,0,"PT",111.12,.01)

"^DD",118.3,118.3,0,"PT",111.13,.01)

"^DD",118.3,118.3,0,"PT",115.08,1)

"^DD",118.3,118.3,0,"SCR")
I '$D(^FH(118.3,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",118.3,118.3,0,"VRPK")
FH
"^DD",118.3,118.3,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",118.3,118.3,.01,1,0)
^.1
"^DD",118.3,118.3,.01,1,1,0)
118.3^B
"^DD",118.3,118.3,.01,1,1,1)
S ^FH(118.3,"B",$E(X,1,30),DA)=""
"^DD",118.3,118.3,.01,1,1,2)
K ^FH(118.3,"B",$E(X,1,30),DA)
"^DD",118.3,118.3,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",118.3,118.3,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",118.3,118.3,.01,3)
ANSWER MUST BE 3-30 CHARACTERS IN LENGTH
"^DD",118.3,118.3,.01,21,0)
^^3^3^2880710^
"^DD",118.3,118.3,.01,21,1,0)
This field contains the name of a standing order. It may be
"^DD",118.3,118.3,.01,21,2,0)
such things as 'double portions', 'extra coffee', or even
"^DD",118.3,118.3,.01,21,3,0)
preferences such as 'no fish.'
"^DD",118.3,118.3,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",118.3,118.3,1,0)
LABEL?^S^Y:YES;N:NO;^0;2^Q
"^DD",118.3,118.3,1,21,0)
^^2^2^2920508^^
"^DD",118.3,118.3,1,21,1,0)
This field specifies whether the label should be printed or not for this
"^DD",118.3,118.3,1,21,2,0)
order.
"^DD",118.3,118.3,1,"DT")
2920504
"^DD",118.3,118.3,99,0)
INACTIVE?^SX^Y:YES;N:NO;^I;1^Q
"^DD",118.3,118.3,99,1,0)
^.1
"^DD",118.3,118.3,99,1,1,0)
118.3^AC^MUMPS
"^DD",118.3,118.3,99,1,1,1)
K:X'="Y" ^FH(118.3,DA,"I")
"^DD",118.3,118.3,99,1,1,2)
K ^FH(118.3,DA,"I")
"^DD",118.3,118.3,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",118.3,118.3,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",118.3,118.3,99,1,1,"%D",2,0)
inactive entries.
"^DD",118.3,118.3,99,21,0)
^.001^2^2^3040421^^^^
"^DD",118.3,118.3,99,21,1,0)
This field, if answered YES, will prohibit further selection of
"^DD",118.3,118.3,99,21,2,0)
this standing order by ward or dietetic personnel.
"^DD",118.3,118.3,99,"DT")
3040421
"^DD",119,119,0)
FIELD^^1^2
"^DD",119,119,0,"DT")
3010125
"^DD",119,119,0,"IX","B",119,.01)

"^DD",119,119,0,"IX","C",119.01,.01)

"^DD",119,119,0,"NM","DIETITIAN TICKLER FILE")

"^DD",119,119,.01,0)
DIETITIAN^RP200'X^VA(200,^0;1^I $D(X) S DINUM=X
"^DD",119,119,.01,1,0)
^.1
"^DD",119,119,.01,1,1,0)
119^B
"^DD",119,119,.01,1,1,1)
S ^FH(119,"B",$E(X,1,30),DA)=""
"^DD",119,119,.01,1,1,2)
K ^FH(119,"B",$E(X,1,30),DA)
"^DD",119,119,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119,119,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the DIETITIAN field.
"^DD",119,119,.01,3)

"^DD",119,119,.01,21,0)
^^1^1^2911204^
"^DD",119,119,.01,21,1,0)
This field is a pointer to the Dietitian in File 200.
"^DD",119,119,.01,"DT")
2910419
"^DD",119,119,1,0)
ITEM^119.01D^^I;0
"^DD",119,119,1,21,0)
^^1^1^2911204^
"^DD",119,119,1,21,1,0)
This field contains a free-text description of the item requiring action.
"^DD",119,119.01,0)
ITEM SUB-FIELD^^103^6
"^DD",119,119.01,0,"DT")
3010125
"^DD",119,119.01,0,"IX","C",119.01,101)

"^DD",119,119.01,0,"NM","ITEM")

"^DD",119,119.01,0,"UP")
119
"^DD",119,119.01,.01,0)
ITEM^MDX^^0;1^S %DT="EST" D ^%DT S X=Y K:Y<1 X I $D(X) S DINUM=X
"^DD",119,119.01,.01,1,0)
^.1
"^DD",119,119.01,.01,1,1,0)
119^C
"^DD",119,119.01,.01,1,1,1)
S ^FH(119,"C",$E(X,1,30),DA(1),DA)=""
"^DD",119,119.01,.01,1,1,2)
K ^FH(119,"C",$E(X,1,30),DA(1),DA)
"^DD",119,119.01,.01,1,1,"%D",0)
^^2^2^3020808^
"^DD",119,119.01,.01,1,1,"%D",1,0)
Cross reference by DATE (the .01 field of the ITEM multiple
"^DD",119,119.01,.01,1,1,"%D",2,0)
field).
"^DD",119,119.01,.01,1,1,"DT")
3020808
"^DD",119,119.01,.01,21,0)
^^2^2^2920323^^^
"^DD",119,119.01,.01,21,1,0)
This field contains the date/time at which the item
"^DD",119,119.01,.01,21,2,0)
has or will become active.
"^DD",119,119.01,.01,"DT")
3020808
"^DD",119,119.01,1,0)
ITEM TYPE^S^C:CONSULT;D:DIET REVIEW;S:SUPP. FDG. REVIEW;X:PERSONAL;T:TUBEFEED;N:NUT. STATUS;O:ADDITIONAL ORDER;M:MONITOR;^0;2^Q
"^DD",119,119.01,1,21,0)
^.001^1^1^3010125^^^^
"^DD",119,119.01,1,21,1,0)
This field indicates the nature of the item.
"^DD",119,119.01,1,"DT")
3010125
"^DD",119,119.01,2,0)
ITEM TEXT^F^^0;3^K:$L(X)>80!($L(X)<3) X
"^DD",119,119.01,2,3)
Answer must be 3-80 characters in length.
"^DD",119,119.01,2,21,0)
^^1^1^2911204^
"^DD",119,119.01,2,21,1,0)
This field contains a free-text description of the item.
"^DD",119,119.01,2,"DT")
2910419
"^DD",119,119.01,101,0)
PATIENT^P2'^DPT(^0;4^Q
"^DD",119,119.01,101,1,0)
^.1
"^DD",119,119.01,101,1,1,0)
119.01^C
"^DD",119,119.01,101,1,1,1)
S ^FH(119,DA(1),"I","C",$E(X,1,30),DA)=""
"^DD",119,119.01,101,1,1,2)
K ^FH(119,DA(1),"I","C",$E(X,1,30),DA)
"^DD",119,119.01,101,1,1,"%D",0)
^^1^1^3021015^
"^DD",119,119.01,101,1,1,"%D",1,0)
Cross reference the clinician's monitors by patient.
"^DD",119,119.01,101,1,1,"DT")
3021015
"^DD",119,119.01,101,21,0)
^^1^1^2911204^
"^DD",119,119.01,101,21,1,0)
This field is a pointer to the patient to which the item is applicable.
"^DD",119,119.01,101,"DT")
3021015
"^DD",119,119.01,102,0)
ADMISSION^P405'^DGPM(^0;5^Q
"^DD",119,119.01,102,21,0)
^^2^2^2911204^
"^DD",119,119.01,102,21,1,0)
This field is a pointer to the admission movement in File 405 to which
"^DD",119,119.01,102,21,2,0)
the item is applicable.
"^DD",119,119.01,102,"DT")
2910419
"^DD",119,119.01,103,0)
ENTRY #^NJ5,0^^0;6^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1N.N) X
"^DD",119,119.01,103,3)
Type a Number between 1 and 99999, 0 Decimal Digits
"^DD",119,119.01,103,21,0)
^^2^2^2911204^
"^DD",119,119.01,103,21,1,0)
This is a pointer to the order number for the appropriate Type of
"^DD",119,119.01,103,21,2,0)
Ticker File item.
"^DD",119,119.01,103,"DT")
2910419
"^DD",119.1,119.1,0)
FIELD^^.01^1
"^DD",119.1,119.1,0,"IX","B",119.1,.01)

"^DD",119.1,119.1,0,"NM","UNITS")

"^DD",119.1,119.1,0,"PT",113,5)

"^DD",119.1,119.1,.01,0)
NAME^RF^^0;1^K:$L(X)>12!($L(X)<2) X
"^DD",119.1,119.1,.01,1,0)
^.1
"^DD",119.1,119.1,.01,1,1,0)
119.1^B
"^DD",119.1,119.1,.01,1,1,1)
S ^FH(119.1,"B",$E(X,1,30),DA)=""
"^DD",119.1,119.1,.01,1,1,2)
K ^FH(119.1,"B",$E(X,1,30),DA)
"^DD",119.1,119.1,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.1,119.1,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",119.1,119.1,.01,3)
ANSWER MUST BE 2-12 CHARACTERS IN LENGTH
"^DD",119.1,119.1,.01,21,0)
^^2^2^2880709^
"^DD",119.1,119.1,.01,21,1,0)
This field contains the name of a unit which can be selected
"^DD",119.1,119.1,.01,21,2,0)
as the dietetic 'unit of issue' in the ingredient file.
"^DD",119.1,119.1,.01,"DT")
2880306
"^DD",119.4,119.4,0)
FIELD^^99^4
"^DD",119.4,119.4,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",119.4,119.4,0,"IX","AC",119.4,99)

"^DD",119.4,119.4,0,"IX","B",119.4,.01)

"^DD",119.4,119.4,0,"NM","ISOLATION/PRECAUTION TYPE")

"^DD",119.4,119.4,0,"PT",115,19)

"^DD",119.4,119.4,0,"PT",115.01,9)

"^DD",119.4,119.4,0,"SCR")
I '$D(^FH(119.4,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",119.4,119.4,0,"VRPK")
FH
"^DD",119.4,119.4,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",119.4,119.4,.01,1,0)
^.1
"^DD",119.4,119.4,.01,1,1,0)
119.4^B
"^DD",119.4,119.4,.01,1,1,1)
S ^FH(119.4,"B",$E(X,1,30),DA)=""
"^DD",119.4,119.4,.01,1,1,2)
K ^FH(119.4,"B",$E(X,1,30),DA)
"^DD",119.4,119.4,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.4,119.4,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",119.4,119.4,.01,3)
ANSWER MUST BE 3-30 CHARACTERS IN LENGTH
"^DD",119.4,119.4,.01,21,0)
^^2^2^2880709^
"^DD",119.4,119.4,.01,21,1,0)
This field contains the name of isolation/precaution type
"^DD",119.4,119.4,.01,21,2,0)
as it would normally be known to ward/medical personnel.
"^DD",119.4,119.4,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",119.4,119.4,1,0)
PAPER OR CHINA^RS^P:PAPER;C:CHINA;^0;2^Q
"^DD",119.4,119.4,1,21,0)
^^2^2^2880709^
"^DD",119.4,119.4,1,21,1,0)
This field indicates whether food is served on paper products
"^DD",119.4,119.4,1,21,2,0)
or china for this isolation type.
"^DD",119.4,119.4,2,0)
DELIVERED BY NURSE OR FSW^RS^N:NURSE;F:FSW;^0;3^Q
"^DD",119.4,119.4,2,21,0)
^^2^2^2880709^
"^DD",119.4,119.4,2,21,1,0)
This field indicates whether food tray delivery is done by
"^DD",119.4,119.4,2,21,2,0)
food service workers (FSW) or by ward personnel (NURSE).
"^DD",119.4,119.4,2,"DT")
2871110
"^DD",119.4,119.4,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",119.4,119.4,99,1,0)
^.1
"^DD",119.4,119.4,99,1,1,0)
119.4^AC^MUMPS
"^DD",119.4,119.4,99,1,1,1)
K:X'="Y" ^FH(119.4,DA,"I")
"^DD",119.4,119.4,99,1,1,2)
K ^FH(119.4,DA,"I")
"^DD",119.4,119.4,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",119.4,119.4,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",119.4,119.4,99,1,1,"%D",2,0)
inactive entries.
"^DD",119.4,119.4,99,21,0)
^^2^2^2880709^
"^DD",119.4,119.4,99,21,1,0)
This field, if answered YES, will inactivate an isolation
"^DD",119.4,119.4,99,21,2,0)
type and prohibit further selection by ward personnel.
"^DD",119.4,119.4,99,"DT")
2860813
"^DD",119.5,119.5,0)
FIELD^^99^7
"^DD",119.5,119.5,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",119.5,119.5,0,"IX","AC",119.5,99)

"^DD",119.5,119.5,0,"IX","B",119.5,.01)

"^DD",119.5,119.5,0,"NM","DIETETIC CONSULTS")

"^DD",119.5,119.5,0,"PT",115.03,1)

"^DD",119.5,119.5,0,"SCR")
I '$D(^FH(119.5,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",119.5,119.5,0,"VRPK")
FH
"^DD",119.5,119.5,.01,0)
NAME^RF^^0;1^K:$L(X)>50!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",119.5,119.5,.01,1,0)
^.1
"^DD",119.5,119.5,.01,1,1,0)
119.5^B
"^DD",119.5,119.5,.01,1,1,1)
S ^FH(119.5,"B",$E(X,1,30),DA)=""
"^DD",119.5,119.5,.01,1,1,2)
K ^FH(119.5,"B",$E(X,1,30),DA)
"^DD",119.5,119.5,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.5,119.5,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",119.5,119.5,.01,3)
ANSWER MUST BE 3-50 CHARACTERS IN LENGTH
"^DD",119.5,119.5,.01,21,0)
^^2^2^2880709^
"^DD",119.5,119.5,.01,21,1,0)
This is the name of the consultation as it would normally be
"^DD",119.5,119.5,.01,21,2,0)
known by ward/medical personnel.
"^DD",119.5,119.5,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",119.5,119.5,.01,"DT")
2850625
"^DD",119.5,119.5,1,0)
BRIEF NAME^RF^^0;2^K:$L(X)>10!($L(X)<1) X
"^DD",119.5,119.5,1,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",119.5,119.5,1,21,0)
^^1^1^2880717^
"^DD",119.5,119.5,1,21,1,0)
This is a short abbreviation of the dietetic consult type.
"^DD",119.5,119.5,2,0)
ASK INITIAL/FOLLOW-UP?^S^Y:YES;N:NO;^0;3^Q
"^DD",119.5,119.5,2,21,0)
^^3^3^2880709^
"^DD",119.5,119.5,2,21,1,0)
This field, if answered YES, will prompt the clinician completing
"^DD",119.5,119.5,2,21,2,0)
the consult to indicate whether it was an initial consultation
"^DD",119.5,119.5,2,21,3,0)
or a follow-up to prior consultations.
"^DD",119.5,119.5,2,"DT")
2850606
"^DD",119.5,119.5,3,0)
TU FOR INITIAL CONSULT^RNJ6,2^^0;4^K:+X'=X!(X>100)!(X<0)!(X?.E1"."3N.N) X
"^DD",119.5,119.5,3,3)
TYPE A NUMBER BETWEEN 0 AND 100
"^DD",119.5,119.5,3,21,0)
^^3^3^2880709^
"^DD",119.5,119.5,3,21,1,0)
This field contains the number of 'time-units' associated
"^DD",119.5,119.5,3,21,2,0)
with an initial consultation. The values of these 'time-units'
"^DD",119.5,119.5,3,21,3,0)
are left to local discretion.
"^DD",119.5,119.5,3,"DT")
2850618
"^DD",119.5,119.5,4,0)
TU FOR FOLLOW-UP^NJ6,2^^0;5^K:+X'=X!(X>100)!(X<0)!(X?.E1"."3N.N) X
"^DD",119.5,119.5,4,3)
TYPE A NUMBER BETWEEN 0 AND 100
"^DD",119.5,119.5,4,21,0)
^^4^4^2880709^
"^DD",119.5,119.5,4,21,1,0)
This field contains the number of 'time-units' associated
"^DD",119.5,119.5,4,21,2,0)
with a follow-up consultation and need be present only when
"^DD",119.5,119.5,4,21,3,0)
the follow-up prompt has been selected. The values of these
"^DD",119.5,119.5,4,21,4,0)
'time-units' is left to local discretion.
"^DD",119.5,119.5,4,"DT")
2850618
"^DD",119.5,119.5,5,0)
USER TO BULLETIN^P200'^VA(200,^0;6^Q
"^DD",119.5,119.5,5,21,0)
^^4^4^2880709^
"^DD",119.5,119.5,5,21,1,0)
If a bulletin to a designated clinician is desired whenever
"^DD",119.5,119.5,5,21,2,0)
this consult is ordered, the clinician should be selected.
"^DD",119.5,119.5,5,21,3,0)
An example might be a renal dialysis consult or a nutrition
"^DD",119.5,119.5,5,21,4,0)
support consult.
"^DD",119.5,119.5,5,"DT")
2850821
"^DD",119.5,119.5,99,0)
INACTIVE?^SX^Y:YES;N:NO;^I;1^Q
"^DD",119.5,119.5,99,1,0)
^.1
"^DD",119.5,119.5,99,1,1,0)
119.5^AC^MUMPS
"^DD",119.5,119.5,99,1,1,1)
K:X'="Y" ^FH(119.5,DA,"I")
"^DD",119.5,119.5,99,1,1,2)
K ^FH(119.5,DA,"I")
"^DD",119.5,119.5,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",119.5,119.5,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",119.5,119.5,99,1,1,"%D",2,0)
inactive entries.
"^DD",119.5,119.5,99,21,0)
^^2^2^2880709^
"^DD",119.5,119.5,99,21,1,0)
This field, when answered YES, will prohibit further selection
"^DD",119.5,119.5,99,21,2,0)
of this consult type by ward or dietetic personnel.
"^DD",119.5,119.5,99,"DT")
2871025
"^DD",119.6,119.6,0)
FIELD^^2.6^32
"^DD",119.6,119.6,0,"DDA")
N
"^DD",119.6,119.6,0,"DT")
3041109
"^DD",119.6,119.6,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",119.6,119.6,0,"IX","AC",119.6,99)

"^DD",119.6,119.6,0,"IX","AL",119.64,.01)

"^DD",119.6,119.6,0,"IX","AP",119.6,11)

"^DD",119.6,119.6,0,"IX","AR",119.62,.01)

"^DD",119.6,119.6,0,"IX","AS1",119.6,3)

"^DD",119.6,119.6,0,"IX","AS2",119.6,4)

"^DD",119.6,119.6,0,"IX","AS3",119.6,5)

"^DD",119.6,119.6,0,"IX","AW",119.63,.01)

"^DD",119.6,119.6,0,"IX","B",119.6,.01)

"^DD",119.6,119.6,0,"IX","CO",119.6,6)

"^DD",119.6,119.6,0,"NM","NUTRITION LOCATION")

"^DD",119.6,119.6,0,"PT",115.01,11)

"^DD",119.6,119.6,0,"PT",115.01,13)

"^DD",119.6,119.6,0,"PT",115.012,5)

"^DD",119.6,119.6,0,"PT",115.016,2)

"^DD",119.6,119.6,0,"PT",115.017,2)

"^DD",119.6,119.6,0,"PT",115.018,4)

"^DD",119.6,119.6,0,"SCR")
I '$D(^FH(119.6,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",119.6,119.6,0,"VRPK")
FH
"^DD",119.6,119.6,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",119.6,119.6,.01,1,0)
^.1
"^DD",119.6,119.6,.01,1,1,0)
119.6^B
"^DD",119.6,119.6,.01,1,1,1)
S ^FH(119.6,"B",$E(X,1,30),DA)=""
"^DD",119.6,119.6,.01,1,1,2)
K ^FH(119.6,"B",$E(X,1,30),DA)
"^DD",119.6,119.6,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.6,119.6,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",119.6,119.6,.01,3)
Answer must be 1-30 characters in length.
"^DD",119.6,119.6,.01,21,0)
^^1^1^2920507^^^^
"^DD",119.6,119.6,.01,21,1,0)
This is the name of a ward on which dietetic activity occurs.
"^DD",119.6,119.6,.01,21,2,0)
It is selected from a list of MAS wards.
"^DD",119.6,119.6,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",119.6,119.6,.01,"DT")
2911015
"^DD",119.6,119.6,1,0)
CLINICIAN^RP200'^VA(200,^0;2^Q
"^DD",119.6,119.6,1,21,0)
^.001^3^3^3020930^^^
"^DD",119.6,119.6,1,21,1,0)
This field contains the clinician assigned to the ward and the
"^DD",119.6,119.6,1,21,2,0)
one to whom dietetic consults will be routed and notification
"^DD",119.6,119.6,1,21,3,0)
made of special diet orders and tubefeedings.
"^DD",119.6,119.6,2,0)
ROOM-BED^119.62P^^R;0
"^DD",119.6,119.6,2,21,0)
^.001^2^2^3020930^^^^
"^DD",119.6,119.6,2,21,1,0)
This is a pointer to File 405.4 and indicates that that room-bed
"^DD",119.6,119.6,2,21,2,0)
is to be considered part of this Dietetic Ward.
"^DD",119.6,119.6,2.5,0)
ASSOCIATED MAS WARD^119.63P^^W;0
"^DD",119.6,119.6,2.5,21,0)
^.001^3^3^3040902^^^^
"^DD",119.6,119.6,2.5,21,1,0)
This is a list of MAS wards which are to be used as defaults to this
"^DD",119.6,119.6,2.5,21,2,0)
Dietetic ward for purposes of patient location when the room-bed is
"^DD",119.6,119.6,2.5,21,3,0)
unknown and for purposes of forecasting.
"^DD",119.6,119.6,2.6,0)
ASSOCIATED HOSPITAL LOCATION^119.64P^^L;0
"^DD",119.6,119.6,2.6,21,0)
^.001^2^2^3040902^^^^
"^DD",119.6,119.6,2.6,21,1,0)
This multiple contains the hospital location(s)/clinic(s) associated with
"^DD",119.6,119.6,2.6,21,2,0)
this outpatient nutrition location.
"^DD",119.6,119.6,3,0)
TRAY SERVICE POINT^*P119.72'^FH(119.72,^0;5^S DIC("S")="I $P(^(0),U,2)=""T""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",119.6,119.6,3,1,0)
^.1
"^DD",119.6,119.6,3,1,1,0)
119.6^AS1^MUMPS
"^DD",119.6,119.6,3,1,1,1)
S Y="" S:$P(^FH(119.6,DA,0),"^",5) Y=Y_"T" S:$P(^(0),"^",6) Y=Y_"C" S:$P(^(0),"^",7) Y=Y_"D" S $P(^(0),"^",10)=Y
"^DD",119.6,119.6,3,1,1,2)
D SPKS^FH
"^DD",119.6,119.6,3,1,1,"%D",0)
^.101^3^3^3020514^^^^
"^DD",119.6,119.6,3,1,1,"%D",1,0)
This cross-reference, along with that on Fields 4 and 5, is used to
"^DD",119.6,119.6,3,1,1,"%D",2,0)
set the Services Field. It is a string containing C, T, and/or D
"^DD",119.6,119.6,3,1,1,"%D",3,0)
indicating which services are available for this ward.
"^DD",119.6,119.6,3,1,1,"DT")
3020514
"^DD",119.6,119.6,3,12)
Allows selection only of tray lines
"^DD",119.6,119.6,3,12.1)
S DIC("S")="I $P(^(0),U,2)=""T"""
"^DD",119.6,119.6,3,21,0)
^.001^7^7^3040902^^^^
"^DD",119.6,119.6,3,21,1,0)
This field, if used, indicates that tray service is available to this
"^DD",119.6,119.6,3,21,2,0)
ward and is provided by the indicated Service Point. Note: if a Dining
"^DD",119.6,119.6,3,21,3,0)
Room is also available, then a Tray Service Point must be specified
"^DD",119.6,119.6,3,21,4,0)
as Dining Room trays are prepared there.
"^DD",119.6,119.6,3,21,5,0)

"^DD",119.6,119.6,3,21,6,0)
For outpatient nutrition locations this field indicates the tray Service
"^DD",119.6,119.6,3,21,7,0)
Point available for the location.
"^DD",119.6,119.6,3,"DT")
3020514
"^DD",119.6,119.6,3.5,0)
TRAY FORECAST %^NJ3,0^^0;17^K:+X'=X!(X>120)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,3.5,3)
Type a Number between 0 and 120, 0 Decimal Digits
"^DD",119.6,119.6,3.5,21,0)
^.001^1^1^3020930^^
"^DD",119.6,119.6,3.5,21,1,0)
This is the % of patients on the ward typically receiving tray service.
"^DD",119.6,119.6,3.5,"DT")
2911120
"^DD",119.6,119.6,4,0)
CAFETERIA SERVICE POINT^*P119.72'^FH(119.72,^0;6^S DIC("S")="I $P(^(0),U,2)=""C""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",119.6,119.6,4,1,0)
^.1
"^DD",119.6,119.6,4,1,1,0)
119.6^AS2^MUMPS
"^DD",119.6,119.6,4,1,1,1)
S Y="" S:$P(^FH(119.6,DA,0),"^",5) Y=Y_"T" S:$P(^(0),"^",6) Y=Y_"C" S:$P(^(0),"^",7) Y=Y_"D" S $P(^(0),"^",10)=Y
"^DD",119.6,119.6,4,1,1,2)
D SPKS^FH
"^DD",119.6,119.6,4,1,1,"%D",0)
^.101^3^3^3020514^^^
"^DD",119.6,119.6,4,1,1,"%D",1,0)
This cross-reference, along with that on Fields 3 and 5, is used to
"^DD",119.6,119.6,4,1,1,"%D",2,0)
set the Services Field. It is a string containing C, T, and/or D
"^DD",119.6,119.6,4,1,1,"%D",3,0)
indicating which services are available for this ward.
"^DD",119.6,119.6,4,1,1,"DT")
3020514
"^DD",119.6,119.6,4,12)
Allows selction only of cafeterias
"^DD",119.6,119.6,4,12.1)
S DIC("S")="I $P(^(0),U,2)=""C"""
"^DD",119.6,119.6,4,21,0)
^.001^5^5^3040902^^^^
"^DD",119.6,119.6,4,21,1,0)
This field, if used, indicates that cafeteria service is available
"^DD",119.6,119.6,4,21,2,0)
to this ward and is provided by the indicated Service Point.
"^DD",119.6,119.6,4,21,3,0)

"^DD",119.6,119.6,4,21,4,0)
For outpatient nutrition locations this field indicates the cafeteria
"^DD",119.6,119.6,4,21,5,0)
Service Point available for the location.
"^DD",119.6,119.6,4,"DT")
3020514
"^DD",119.6,119.6,4.5,0)
CAFETERIA FORECAST %^NJ3,0^^0;18^K:+X'=X!(X>120)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,4.5,3)
Type a Number between 0 and 120, 0 Decimal Digits
"^DD",119.6,119.6,4.5,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,4.5,21,1,0)
This is the % of patients on the ward typically receiving cafeteria
"^DD",119.6,119.6,4.5,21,2,0)
service.
"^DD",119.6,119.6,4.5,"DT")
2911120
"^DD",119.6,119.6,5,0)
DINING ROOM TRAY SERVICE?^S^1:YES;0:NO;^0;7^Q
"^DD",119.6,119.6,5,1,0)
^.1
"^DD",119.6,119.6,5,1,1,0)
119.6^AS3^MUMPS
"^DD",119.6,119.6,5,1,1,1)
S Y="" S:$P(^FH(119.6,DA,0),"^",5) Y=Y_"T" S:$P(^(0),"^",6) Y=Y_"C" S:$P(^(0),"^",7) Y=Y_"D" S $P(^(0),"^",10)=Y
"^DD",119.6,119.6,5,1,1,2)
D SPKS^FH
"^DD",119.6,119.6,5,1,1,"%D",0)
^.101^3^3^3020514^^^
"^DD",119.6,119.6,5,1,1,"%D",1,0)
This cross-reference, along with that on Fields 3 and 4, is used to
"^DD",119.6,119.6,5,1,1,"%D",2,0)
set the Services Field. It is a string containing C, T, and/or D
"^DD",119.6,119.6,5,1,1,"%D",3,0)
indicating which services are available for this ward.
"^DD",119.6,119.6,5,1,1,"DT")
3020514
"^DD",119.6,119.6,5,3)

"^DD",119.6,119.6,5,21,0)
^.001^4^4^3040902^^^^
"^DD",119.6,119.6,5,21,1,0)
A YES means that Dining Room tray service is available to this ward.
"^DD",119.6,119.6,5,21,2,0)

"^DD",119.6,119.6,5,21,3,0)
For outpatient nutrition locations a YES in this field indicates that
"^DD",119.6,119.6,5,21,4,0)
Dining Room tray service is available for this location.
"^DD",119.6,119.6,5,"DT")
3020514
"^DD",119.6,119.6,5.5,0)
DINING ROOM FORECAST %^NJ3,0^^0;19^K:+X'=X!(X>120)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,5.5,3)
Type a Number between 0 and 120, 0 Decimal Digits
"^DD",119.6,119.6,5.5,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,5.5,21,1,0)
This is the % of patients on the ward typically receiving dining room
"^DD",119.6,119.6,5.5,21,2,0)
service.
"^DD",119.6,119.6,5.5,"DT")
2911204
"^DD",119.6,119.6,6,0)
COMMUNICATION OFFICE^RP119.73'^FH(119.73,^0;8^Q
"^DD",119.6,119.6,6,1,0)
^.1
"^DD",119.6,119.6,6,1,1,0)
119.6^CO
"^DD",119.6,119.6,6,1,1,1)
S ^FH(119.6,"CO",$E(X,1,30),DA)=""
"^DD",119.6,119.6,6,1,1,2)
K ^FH(119.6,"CO",$E(X,1,30),DA)
"^DD",119.6,119.6,6,1,1,"%D",0)
^^1^1^3040420^
"^DD",119.6,119.6,6,1,1,"%D",1,0)
Cross reference locations by Communication Office.
"^DD",119.6,119.6,6,1,1,"DT")
3040420
"^DD",119.6,119.6,6,21,0)
^.001^2^2^3040902^^^^
"^DD",119.6,119.6,6,21,1,0)
This field indicates which Communication Office is responsible for
"^DD",119.6,119.6,6,21,2,0)
processing diet requests from this ward or outpatient location.
"^DD",119.6,119.6,6,"DT")
3040420
"^DD",119.6,119.6,7,0)
SUPP. FDG. SITE^P119.74'^FH(119.74,^0;9^Q
"^DD",119.6,119.6,7,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,7,21,1,0)
This field indicates which Supplemental Feeding Site is responsible for
"^DD",119.6,119.6,7,21,2,0)
preparing Supplemental Feedings and Bulk Nourishments for this ward.
"^DD",119.6,119.6,7,"DT")
2911204
"^DD",119.6,119.6,11,0)
PRINT ORDER^RNJ2,0^^0;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,11,1,0)
^.1
"^DD",119.6,119.6,11,1,1,0)
119.6^AP
"^DD",119.6,119.6,11,1,1,1)
S ^FH(119.6,"AP",$E(X,1,30),DA)=""
"^DD",119.6,119.6,11,1,1,2)
K ^FH(119.6,"AP",$E(X,1,30),DA)
"^DD",119.6,119.6,11,1,1,3)
This field is required
"^DD",119.6,119.6,11,1,1,"DT")
2911029
"^DD",119.6,119.6,11,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99
"^DD",119.6,119.6,11,21,0)
^.001^3^3^3020930^^^^
"^DD",119.6,119.6,11,21,1,0)
This field represents the print order of this ward. It is used
"^DD",119.6,119.6,11,21,2,0)
to sort the wards for delivery purposes which are then printed
"^DD",119.6,119.6,11,21,3,0)
from low print order to high print order.
"^DD",119.6,119.6,11,"DT")
2911029
"^DD",119.6,119.6,15,0)
DEFAULT ADMISSION DIET^P111'^FH(111,^0;15^Q
"^DD",119.6,119.6,15,21,0)
^.001^3^3^3020930^^^^
"^DD",119.6,119.6,15,21,1,0)
This field is optional. It may contain a diet from the Diets
"^DD",119.6,119.6,15,21,2,0)
file (111) and, if so, the diet will automatically be ordered
"^DD",119.6,119.6,15,21,3,0)
for each patient at the time of admission.
"^DD",119.6,119.6,15,"DT")
2850629
"^DD",119.6,119.6,16,0)
'NO ORDER' DIET ON ADMISSION^S^Y:YES;N:NO;^0;16^Q
"^DD",119.6,119.6,16,21,0)
^.001^3^3^3020930^^^^
"^DD",119.6,119.6,16,21,1,0)
This field is used to indicate whether a 'No Order' Diet
"^DD",119.6,119.6,16,21,2,0)
order should be generated upon admission; this field is
"^DD",119.6,119.6,16,21,3,0)
applicable only if no default admission diet is specified.
"^DD",119.6,119.6,16,"DT")
2880904
"^DD",119.6,119.6,20,0)
BULK NOURISHMENTS^119.61P^^BN;0
"^DD",119.6,119.6,20,21,0)
^.001^2^2^3020930^^^
"^DD",119.6,119.6,20,21,1,0)
This multiple represents bulk nourishments (supplemental feedings)
"^DD",119.6,119.6,20,21,2,0)
delivered to this ward.
"^DD",119.6,119.6,21,0)
# DAYS TO REVIEW NPO^NJ1,0^^0;11^K:+X'=X!(X>7)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,21,3)
Type a Number between 1 and 7, 0 Decimal Digits
"^DD",119.6,119.6,21,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,21,21,1,0)
This field indicates the number of days following an NPO order after
"^DD",119.6,119.6,21,21,2,0)
which the patient should be reviewed.
"^DD",119.6,119.6,21,"DT")
2910430
"^DD",119.6,119.6,22,0)
# DAYS TO REVIEW TF^NJ2,0^^0;12^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,22,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,22,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,22,21,1,0)
This field indicates the number of days following a Tubefeeding order
"^DD",119.6,119.6,22,21,2,0)
after which the patient should be reviewed.
"^DD",119.6,119.6,22,"DT")
2910430
"^DD",119.6,119.6,23,0)
# DAYS TO REVIEW SF^NJ2,0^^0;13^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,23,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,23,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,23,21,1,0)
This field indicates the number of days following a Supplemental Feeding
"^DD",119.6,119.6,23,21,2,0)
order after which the patient should be reviewed.
"^DD",119.6,119.6,23,"DT")
2910430
"^DD",119.6,119.6,24,0)
# DAYS FOR STATUS AFTER ADMIT^NJ2,0^^0;14^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,24,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,24,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,24,21,1,0)
This field indicates the number of days following admission after which
"^DD",119.6,119.6,24,21,2,0)
a Nutrition Status evaluation should have been performed.
"^DD",119.6,119.6,24,"DT")
2910517
"^DD",119.6,119.6,25,0)
# DAYS TO REVIEW STATUS I^NJ3,0^^0;20^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,25,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,25,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,25,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,25,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,25,"DT")
2930222
"^DD",119.6,119.6,26,0)
# DAYS TO REVIEW STATUS II^NJ3,0^^0;21^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,26,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,26,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,26,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,26,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,26,"DT")
2930222
"^DD",119.6,119.6,27,0)
# DAYS TO REVIEW STATUS III^NJ3,0^^0;22^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,27,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,27,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,27,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,27,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,27,"DT")
2930222
"^DD",119.6,119.6,28,0)
# DAYS TO REVIEW STATUS IV^NJ3,0^^0;23^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,28,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,28,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,28,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,28,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,28,"DT")
2930222
"^DD",119.6,119.6,29,0)
CAFETERIA ON TRAY TICKET^S^Y:YES;N:NO;^0;24^Q
"^DD",119.6,119.6,29,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,29,21,1,0)
This field is optional and it is used to indicate whether patients
"^DD",119.6,119.6,29,21,2,0)
that go to the cafeteria should be included on the tray ticket.
"^DD",119.6,119.6,29,"DT")
2940413
"^DD",119.6,119.6,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",119.6,119.6,99,1,0)
^.1
"^DD",119.6,119.6,99,1,1,0)
119.6^AC^MUMPS
"^DD",119.6,119.6,99,1,1,1)
K:X'="Y" ^FH(119.6,DA,"I")
"^DD",119.6,119.6,99,1,1,2)
K ^FH(119.6,DA,"I")
"^DD",119.6,119.6,99,1,1,"%D",0)
^^2^2^3000202
"^DD",119.6,119.6,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",119.6,119.6,99,1,1,"%D",2,0)
inactive entries.
"^DD",119.6,119.6,99,21,0)
^.001^2^2^3020930^
"^DD",119.6,119.6,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",119.6,119.6,99,21,2,0)
further selection of this entry.
"^DD",119.6,119.6,99,"DT")
3000223
"^DD",119.6,119.6,101,0)
SERVICES^F^^0;10^K:$L(X)>3!($L(X)<1) X
"^DD",119.6,119.6,101,3)
Answer must be 1-3 characters in length.
"^DD",119.6,119.6,101,21,0)
^.001^2^2^3020930^^^
"^DD",119.6,119.6,101,21,1,0)
This field contains one or more of the characters T, C or D indicating
"^DD",119.6,119.6,101,21,2,0)
tray service, cafeteria service, and/or dining room service is available.
"^DD",119.6,119.6,101,"DT")
2911031
"^DD",119.6,119.6,103,0)
MAX # OF DAYS^NJ3,0^^1;2^K:+X'=X!(X>365)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,103,3)
Type a Number between 1 and 365, 0 Decimal Digits
"^DD",119.6,119.6,103,21,0)
^.001^6^6^3040902^^^
"^DD",119.6,119.6,103,21,1,0)
This field is optional.  If used it will be set to the maximum number of
"^DD",119.6,119.6,103,21,2,0)
days ahead a recurring meal plan can be ordered, ie, if this field is set to
"^DD",119.6,119.6,103,21,3,0)
365 then when ordering a recurring meal it cannot be ordered past one year
"^DD",119.6,119.6,103,21,4,0)
from the ordering date.  If the field is left NULL then a default of 999
"^DD",119.6,119.6,103,21,5,0)
days is assumed.  This field will be checked upon entering the FROM/TO dates
"^DD",119.6,119.6,103,21,6,0)
in the Order/Edit Outpatient Meals option.
"^DD",119.6,119.6,103,"DT")
3030313
"^DD",119.6,119.6,104,0)
NUMBER OF DAYS FOR REVIEW^RNJ2,0^^1;3^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,104,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,104,21,0)
^.001^5^5^3041109^^^^
"^DD",119.6,119.6,104,21,1,0)
This field will be used for the Outpatient Meals Print Meal Plan Expiration
"^DD",119.6,119.6,104,21,2,0)
List option.  It may be set to a number of days which will be used for
"^DD",119.6,119.6,104,21,3,0)
review by the above option, ie, if this field is set to 7 then when the
"^DD",119.6,119.6,104,21,4,0)
Print Meal Plan Expiration List option is run it will check for recurring
"^DD",119.6,119.6,104,21,5,0)
meal plans that will be expiring within the next 7 days.
"^DD",119.6,119.6,104,"DT")
3041109
"^DD",119.6,119.6,105,0)
NON-VA FACILITY?^S^Y:Yes;N:No;^1;4^Q
"^DD",119.6,119.6,105,21,0)
^.001^6^6^3040902^^^
"^DD",119.6,119.6,105,21,1,0)
This will be an optional YES/NO field that may be set when setting up
"^DD",119.6,119.6,105,21,2,0)
new outpatient locations.  If the field is set to YES the Order/Edit
"^DD",119.6,119.6,105,21,3,0)
Recurring Meal option will use this flag to allow selection of up to 5
"^DD",119.6,119.6,105,21,4,0)
diets from any diet in the Diets (#111) file.  If the field is blank or
"^DD",119.6,119.6,105,21,5,0)
set to NO then the Order/Edit option will only allow selection of 1 diet
"^DD",119.6,119.6,105,21,6,0)
from the 5 allowable diets set up in the site parameters.
"^DD",119.6,119.6,105,"DT")
3030324
"^DD",119.6,119.6,106,0)
INPATIENT/OUTPATIENT^RS^I:Inpatient;O:Outpatient;^0;3^Q
"^DD",119.6,119.6,106,21,0)
^.001^6^6^3040902^^^
"^DD",119.6,119.6,106,21,1,0)
This field will serve as a flag to determine whether the location is an
"^DD",119.6,119.6,106,21,2,0)
inpatient or an outpatient location.  This will be required with the
"^DD",119.6,119.6,106,21,3,0)
Outpatient Meals functionality, since it will be necessary to store 
"^DD",119.6,119.6,106,21,4,0)
inpatient and outpatient locations in this file.
"^DD",119.6,119.6,106,21,5,0)

"^DD",119.6,119.6,106,21,6,0)
For all outpatient locations this field should be set to OUTPATIENT.
"^DD",119.6,119.6,106,"DT")
3030421
"^DD",119.6,119.61,0)
BULK NOURISHMENTS SUB-FIELD^NL^1^2
"^DD",119.6,119.61,0,"NM","BULK NOURISHMENTS")

"^DD",119.6,119.61,0,"UP")
119.6
"^DD",119.6,119.61,.01,0)
BULK NOURISHMENTS^MP118'^FH(118,^0;1^Q
"^DD",119.6,119.61,.01,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.61,.01,21,1,0)
This field contains the name of the bulk nourishment (supplemental
"^DD",119.6,119.61,.01,21,2,0)
feeding) item to be delivered to the ward.
"^DD",119.6,119.61,.01,"DT")
2850604
"^DD",119.6,119.61,1,0)
QUANTITY^RNJ2,0^^0;2^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.61,1,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99
"^DD",119.6,119.61,1,21,0)
^^2^2^2880717^
"^DD",119.6,119.61,1,21,1,0)
This field represents the quantity of the bulk nourishment
"^DD",119.6,119.61,1,21,2,0)
item to be delivered.
"^DD",119.6,119.61,1,"DT")
2850604
"^DD",119.6,119.62,0)
ROOM-BED SUB-FIELD^^1^2
"^DD",119.6,119.62,0,"DT")
2940127
"^DD",119.6,119.62,0,"IX","B",119.62,.01)

"^DD",119.6,119.62,0,"NM","ROOM-BED")

"^DD",119.6,119.62,0,"UP")
119.6
"^DD",119.6,119.62,.01,0)
ROOM-BED^MP405.4'X^DG(405.4,^0;1^I $D(X) S Y=$O(^FH(119.6,"AR",X,0)) I Y>0,Y-DA(1) W *7,"  Room already assigned to ",$P($G(^FH(119.6,+Y,0)),"^",1) K X
"^DD",119.6,119.62,.01,1,0)
^.1
"^DD",119.6,119.62,.01,1,1,0)
119.62^B
"^DD",119.6,119.62,.01,1,1,1)
S ^FH(119.6,DA(1),"R","B",$E(X,1,30),DA)=""
"^DD",119.6,119.62,.01,1,1,2)
K ^FH(119.6,DA(1),"R","B",$E(X,1,30),DA)
"^DD",119.6,119.62,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.6,119.62,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the ROOM-BED field.
"^DD",119.6,119.62,.01,1,2,0)
119.6^AR
"^DD",119.6,119.62,.01,1,2,1)
S ^FH(119.6,"AR",$E(X,1,30),DA(1),DA)=""
"^DD",119.6,119.62,.01,1,2,2)
K ^FH(119.6,"AR",$E(X,1,30),DA(1),DA)
"^DD",119.6,119.62,.01,1,2,"DT")
2911015
"^DD",119.6,119.62,.01,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.62,.01,21,1,0)
This field is a pointer to File 405.4 and indicates that this room-bed
"^DD",119.6,119.62,.01,21,2,0)
is to be considered part of this Dietetic Ward.
"^DD",119.6,119.62,.01,"DT")
2911030
"^DD",119.6,119.62,1,0)
DELIVERY ORDER^NJ2,0^^0;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.62,1,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",119.6,119.62,1,21,0)
^^3^3^2940127^
"^DD",119.6,119.62,1,21,1,0)
This value will be used to determine the order of printing labels
"^DD",119.6,119.62,1,21,2,0)
or tickets for items to be delivered.  Thus, the value represents
"^DD",119.6,119.62,1,21,3,0)
the order of delivery for beds on the ward.
"^DD",119.6,119.62,1,"DT")
2940127
"^DD",119.6,119.63,0)
ASSOCIATED MAS WARD SUB-FIELD^^.01^1
"^DD",119.6,119.63,0,"DT")
2911018
"^DD",119.6,119.63,0,"IX","B",119.63,.01)

"^DD",119.6,119.63,0,"NM","ASSOCIATED MAS WARD")

"^DD",119.6,119.63,0,"UP")
119.6
"^DD",119.6,119.63,.01,0)
ASSOCIATED MAS WARD^MP42'X^DIC(42,^0;1^I $D(X) S Y=$O(^FH(119.6,"AW",X,0)) I Y>0,Y-DA(1) W *7,"  Ward already assigned to ",$P($G(^FH(119.6,+Y,0)),"^",1) K X
"^DD",119.6,119.63,.01,1,0)
^.1
"^DD",119.6,119.63,.01,1,1,0)
119.63^B
"^DD",119.6,119.63,.01,1,1,1)
S ^FH(119.6,DA(1),"W","B",$E(X,1,30),DA)=""
"^DD",119.6,119.63,.01,1,1,2)
K ^FH(119.6,DA(1),"W","B",$E(X,1,30),DA)
"^DD",119.6,119.63,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.6,119.63,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the ASSOCIATED MAS WARD field.
"^DD",119.6,119.63,.01,1,2,0)
119.6^AW
"^DD",119.6,119.63,.01,1,2,1)
S ^FH(119.6,"AW",$E(X,1,30),DA(1),DA)=""
"^DD",119.6,119.63,.01,1,2,2)
K ^FH(119.6,"AW",$E(X,1,30),DA(1),DA)
"^DD",119.6,119.63,.01,1,2,"DT")
2911018
"^DD",119.6,119.63,.01,21,0)
^.001^5^5^3030903^^^
"^DD",119.6,119.63,.01,21,1,0)
This field indicates that (a) on admission, a patient with no room-bed,
"^DD",119.6,119.63,.01,21,2,0)
but assigned to this MAS ward, will be considered to be on this Dietetic
"^DD",119.6,119.63,.01,21,3,0)
Ward.
"^DD",119.6,119.63,.01,21,4,0)
(b) For forecasting purposes, the census of this MAS ward will be used
"^DD",119.6,119.63,.01,21,5,0)
in calculating the forecasted census for this Dietetic ward.
"^DD",119.6,119.63,.01,"DT")
2911030
"^DD",119.6,119.64,0)
ASSOCIATED HOSPITAL LOCATION SUB-FIELD^^.01^1
"^DD",119.6,119.64,0,"DT")
3030903
"^DD",119.6,119.64,0,"IX","B",119.64,.01)

"^DD",119.6,119.64,0,"NM","ASSOCIATED HOSPITAL LOCATION")

"^DD",119.6,119.64,0,"UP")
119.6
"^DD",119.6,119.64,.01,0)
ASSOCIATED HOSPITAL LOCATION^MP44'X^SC(^0;1^I $D(X) S Y=$O(^FH(119.6,"AL",X,0)) I Y>0,Y-DA(1) W "  Hospital location already assigned to ",$P($G(^FH(119.6,+Y,0)),"^",1) K X
"^DD",119.6,119.64,.01,1,0)
^.1
"^DD",119.6,119.64,.01,1,1,0)
119.64^B
"^DD",119.6,119.64,.01,1,1,1)
S ^FH(119.6,DA(1),"L","B",$E(X,1,30),DA)=""
"^DD",119.6,119.64,.01,1,1,2)
K ^FH(119.6,DA(1),"L","B",$E(X,1,30),DA)
"^DD",119.6,119.64,.01,1,2,0)
119.6^AL
"^DD",119.6,119.64,.01,1,2,1)
S ^FH(119.6,"AL",$E(X,1,30),DA(1),DA)=""
"^DD",119.6,119.64,.01,1,2,2)
K ^FH(119.6,"AL",$E(X,1,30),DA(1),DA)
"^DD",119.6,119.64,.01,1,2,"%D",0)
^^1^1^3030903^
"^DD",119.6,119.64,.01,1,2,"%D",1,0)
Cross reference the whole file by field #2.6.
"^DD",119.6,119.64,.01,1,2,"DT")
3030903
"^DD",119.6,119.64,.01,21,0)
^.001^2^2^3030903^^^
"^DD",119.6,119.64,.01,21,1,0)
This is a pointer to the Hospital Location file to store the hospital
"^DD",119.6,119.64,.01,21,2,0)
location(s) associated with this Nutrition Location.
"^DD",119.6,119.64,.01,"DT")
3030903
"^DD",119.71,119.71,0)
FIELD^^99^7
"^DD",119.71,119.71,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",119.71,119.71,0,"IX","AC",119.71,99)

"^DD",119.71,119.71,0,"IX","B",119.71,.01)

"^DD",119.71,119.71,0,"NM","PRODUCTION FACILITY")

"^DD",119.71,119.71,0,"PT",119.72,2)

"^DD",119.71,119.71,0,"PT",119.74,2)

"^DD",119.71,119.71,0,"SCR")
I '$D(^FH(119.71,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",119.71,119.71,0,"VRPK")
FH
"^DD",119.71,119.71,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",119.71,119.71,.01,1,0)
^.1
"^DD",119.71,119.71,.01,1,1,0)
119.71^B
"^DD",119.71,119.71,.01,1,1,1)
S ^FH(119.71,"B",$E(X,1,30),DA)=""
"^DD",119.71,119.71,.01,1,1,2)
K ^FH(119.71,"B",$E(X,1,30),DA)
"^DD",119.71,119.71,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.71,119.71,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",119.71,119.71,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",119.71,119.71,.01,21,0)
^^3^3^2911204^
"^DD",119.71,119.71,.01,21,1,0)
This is the name of the Production Facility. It is generally a main
"^DD",119.71,119.71,.01,21,2,0)
kitchen used for the preparation of bulk food to be served by a 
"^DD",119.71,119.71,.01,21,3,0)
Service Point.
"^DD",119.71,119.71,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",119.71,119.71,10,0)
FULL NAMES ON DAILY MENU?^S^Y:YES;N:NO;^0;2^Q
"^DD",119.71,119.71,10,21,0)
^^4^4^2881203^
"^DD",119.71,119.71,10,21,1,0)
This field, when answered YES, will result in full names of
"^DD",119.71,119.71,10,21,2,0)
recipes being used for modified diets on the Daily Diet
"^DD",119.71,119.71,10,21,3,0)
Menus. An answer of NO will result in items on the Regular
"^DD",119.71,119.71,10,21,4,0)
Menu being referenced by number.
"^DD",119.71,119.71,10,"DT")
2881203
"^DD",119.71,119.71,11,0)
SEP. PRODUCTION SUMMARY PAGES?^S^Y:YES;N:NO;^0;7^Q
"^DD",119.71,119.71,11,21,0)
^^3^3^2881120^
"^DD",119.71,119.71,11,21,1,0)
This field, when answered YES, will result in the Production
"^DD",119.71,119.71,11,21,2,0)
Summary and the Meal Distribution Report being printed on
"^DD",119.71,119.71,11,21,3,0)
separate pages for each Recipe Preparation area.
"^DD",119.71,119.71,11,"DT")
2881120
"^DD",119.71,119.71,12,0)
SEP. RECIPE PREPARATION PAGES?^S^Y:YES;N:NO;^0;4^Q
"^DD",119.71,119.71,12,21,0)
^^3^3^2881119^^
"^DD",119.71,119.71,12,21,1,0)
This field, when answered YES, means that the Recipe Preparation
"^DD",119.71,119.71,12,21,2,0)
pages produced by the Production Summary will be printed such
"^DD",119.71,119.71,12,21,3,0)
that each preparation area is on a separate page.
"^DD",119.71,119.71,12,"DT")
2871122
"^DD",119.71,119.71,13,0)
PRINT MEAL DISTRIBUTION?^S^Y:YES;N:NO;^0;5^Q
"^DD",119.71,119.71,13,21,0)
^^2^2^2881119^^
"^DD",119.71,119.71,13,21,1,0)
This field indicates whether a Meal Distribution Report
"^DD",119.71,119.71,13,21,2,0)
should be printed along with the Production Summary.
"^DD",119.71,119.71,13,"DT")
2881118
"^DD",119.71,119.71,14,0)
SEP. STOREROOM PAGES?^S^Y:YES;N:NO;^0;6^Q
"^DD",119.71,119.71,14,21,0)
^^3^3^2880716^
"^DD",119.71,119.71,14,21,1,0)
This field, when answered YES, means that the Storeroom
"^DD",119.71,119.71,14,21,2,0)
Requisition pages produced by the Production Summary will be
"^DD",119.71,119.71,14,21,3,0)
printed such that each storeroom is on a separate page.
"^DD",119.71,119.71,14,"DT")
2871122
"^DD",119.71,119.71,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",119.71,119.71,99,1,0)
^.1
"^DD",119.71,119.71,99,1,1,0)
119.71^AC^MUMPS
"^DD",119.71,119.71,99,1,1,1)
K:X'="Y" ^FH(119.71,DA,"I")
"^DD",119.71,119.71,99,1,1,2)
K ^FH(119.71,DA,"I")
"^DD",119.71,119.71,99,1,1,"%D",0)
^^2^2^3000202
"^DD",119.71,119.71,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",119.71,119.71,99,1,1,"%D",2,0)
inactive entries.
"^DD",119.71,119.71,99,21,0)
^^2^2^3000202
"^DD",119.71,119.71,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",119.71,119.71,99,21,2,0)
further selection of this entry.
"^DD",119.71,119.71,99,"DT")
3000223
"^DD",119.72,119.72,0)
FIELD^^200^8
"^DD",119.72,119.72,0,"DT")
2921016
"^DD",119.72,119.72,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",119.72,119.72,0,"IX","AC",119.72,99)

"^DD",119.72,119.72,0,"IX","B",119.72,.01)

"^DD",119.72,119.72,0,"IX","C",119.72,.5)

"^DD",119.72,119.72,0,"NM","SERVICE POINT")

"^DD",119.72,119.72,0,"PT",116.112,.01)

"^DD",119.72,119.72,0,"PT",119.6,3)

"^DD",119.72,119.72,0,"PT",119.6,4)

"^DD",119.72,119.72,0,"PT",14100032,3)

"^DD",119.72,119.72,0,"PT",14100032,4)

"^DD",119.72,119.72,0,"SCR")
I '$D(^FH(119.72,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",119.72,119.72,0,"VRPK")
FH
"^DD",119.72,119.72,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",119.72,119.72,.01,1,0)
^.1
"^DD",119.72,119.72,.01,1,1,0)
119.72^B
"^DD",119.72,119.72,.01,1,1,1)
S ^FH(119.72,"B",$E(X,1,30),DA)=""
"^DD",119.72,119.72,.01,1,1,2)
K ^FH(119.72,"B",$E(X,1,30),DA)
"^DD",119.72,119.72,.01,1,1,"%D",0)
^^1^1^2940721^^
"^DD",119.72,119.72,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",119.72,119.72,.01,3)
Answer must be 3-30 characters in length.
"^DD",119.72,119.72,.01,21,0)
^^2^2^2911204^
"^DD",119.72,119.72,.01,21,1,0)
This is the name of the Service Point. It is either a tray assembly
"^DD",119.72,119.72,.01,21,2,0)
line or a cafeteria. It provides food to a group of wards.
"^DD",119.72,119.72,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",119.72,119.72,.01,"DT")
2921016
"^DD",119.72,119.72,.5,0)
SHORT NAME^RF^^0;4^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>6!($L(X)<1) X
"^DD",119.72,119.72,.5,1,0)
^.1
"^DD",119.72,119.72,.5,1,1,0)
119.72^C
"^DD",119.72,119.72,.5,1,1,1)
S ^FH(119.72,"C",$E(X,1,30),DA)=""
"^DD",119.72,119.72,.5,1,1,2)
K ^FH(119.72,"C",$E(X,1,30),DA)
"^DD",119.72,119.72,.5,1,1,"DT")
2930427
"^DD",119.72,119.72,.5,3)
Answer must be 1-6 characters in length.
"^DD",119.72,119.72,.5,21,0)
^^2^2^2911204^
"^DD",119.72,119.72,.5,21,1,0)
This is a 6-character short-name to be used on various production
"^DD",119.72,119.72,.5,21,2,0)
reports.
"^DD",119.72,119.72,.5,"DT")
2930427
"^DD",119.72,119.72,1,0)
TYPE^RS^C:CAFETERIA;T:TRAY LINE;^0;2^Q
"^DD",119.72,119.72,1,21,0)
^^2^2^2920410^^
"^DD",119.72,119.72,1,21,1,0)
This indicates whether the Service Point is a Tray assembly point or
"^DD",119.72,119.72,1,21,2,0)
a Cafeteria.
"^DD",119.72,119.72,1,"DT")
2911203
"^DD",119.72,119.72,2,0)
PRODUCTION FACILITY^RP119.71'^FH(119.71,^0;3^Q
"^DD",119.72,119.72,2,21,0)
^^2^2^2911204^
"^DD",119.72,119.72,2,21,1,0)
This field indicates the Production Facility responsible for preparing
"^DD",119.72,119.72,2,21,2,0)
the food served by this Service Point.
"^DD",119.72,119.72,2,"DT")
2911108
"^DD",119.72,119.72,10,0)
ADDITIONAL MEALS^119.721P^^B;0
"^DD",119.72,119.72,10,21,0)
^^3^3^2911211^^
"^DD",119.72,119.72,10,21,1,0)
This multiple represents the number of additional meals, over
"^DD",119.72,119.72,10,21,2,0)
and above the forecast or inpatient census, which are to be
"^DD",119.72,119.72,10,21,3,0)
produced for each meal for each day of the week.
"^DD",119.72,119.72,11,0)
PRODUCTION DIET PERCENTAGE^119.7211P^^A;0
"^DD",119.72,119.72,11,21,0)
^^3^3^2880717^
"^DD",119.72,119.72,11,21,1,0)
This multiple contains the percentage of the total census
"^DD",119.72,119.72,11,21,2,0)
represented by each production diet for each day of the
"^DD",119.72,119.72,11,21,3,0)
week.
"^DD",119.72,119.72,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",119.72,119.72,99,1,0)
^.1
"^DD",119.72,119.72,99,1,1,0)
119.72^AC^MUMPS
"^DD",119.72,119.72,99,1,1,1)
K:X'="Y" ^FH(119.72,DA,"I")
"^DD",119.72,119.72,99,1,1,2)
K ^FH(119.72,DA,"I")
"^DD",119.72,119.72,99,1,1,"%D",0)
^^2^2^3000202
"^DD",119.72,119.72,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",119.72,119.72,99,1,1,"%D",2,0)
inactive entries.
"^DD",119.72,119.72,99,21,0)
^^2^2^3000202
"^DD",119.72,119.72,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",119.72,119.72,99,21,2,0)
further selection of this entry.
"^DD",119.72,119.72,99,"DT")
3000223
"^DD",119.72,119.72,200,0)
CENSUS DATE^119.722DA^^C;0
"^DD",119.72,119.72,200,21,0)
^^2^2^2920107^
"^DD",119.72,119.72,200,21,1,0)
This field contains the date for which various census forecast data
"^DD",119.72,119.72,200,21,2,0)
is available.
"^DD",119.72,119.721,0)
ADDITIONAL MEALS SUB-FIELD^^30^22
"^DD",119.72,119.721,0,"DT")
2911211
"^DD",119.72,119.721,0,"IX","B",119.721,.01)

"^DD",119.72,119.721,0,"NM","ADDITIONAL MEALS")

"^DD",119.72,119.721,0,"UP")
119.72
"^DD",119.72,119.721,.01,0)
ADD. MEALS PRODUCTION DIET^MP116.2'X^FH(116.2,^0;1^I $D(X) S DINUM=X
"^DD",119.72,119.721,.01,1,0)
^.1
"^DD",119.72,119.721,.01,1,1,0)
119.721^B
"^DD",119.72,119.721,.01,1,1,1)
S ^FH(119.72,DA(1),"B","B",$E(X,1,30),DA)=""
"^DD",119.72,119.721,.01,1,1,2)
K ^FH(119.72,DA(1),"B","B",$E(X,1,30),DA)
"^DD",119.72,119.721,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.72,119.721,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the PRODUCTION DIET field.
"^DD",119.72,119.721,.01,21,0)
^^2^2^2911211^^
"^DD",119.72,119.721,.01,21,1,0)
This is the name of the production diet for which additional meals
"^DD",119.72,119.721,.01,21,2,0)
are to be added.
"^DD",119.72,119.721,.01,"DT")
2911211
"^DD",119.72,119.721,10,0)
ADD. SUNDAY BREAKFAST^NJ4,0^^0;2^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,10,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,10,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,10,21,1,0)
This is the number of additional Sunday breakfast meals which are
"^DD",119.72,119.721,10,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,10,"DT")
2861126
"^DD",119.72,119.721,11,0)
ADD. SUNDAY NOON^NJ4,0^^0;3^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,11,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,11,21,0)
^^2^2^2880716^
"^DD",119.72,119.721,11,21,1,0)
This is the number of additional Sunday noon meals which are
"^DD",119.72,119.721,11,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,11,"DT")
2861126
"^DD",119.72,119.721,12,0)
ADD. SUNDAY EVENING^NJ4,0^^0;4^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,12,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,12,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,12,21,1,0)
This is the number of additional Sunday evening meals which are
"^DD",119.72,119.721,12,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,12,"DT")
2861126
"^DD",119.72,119.721,13,0)
ADD. MONDAY BREAKFAST^NJ4,0^^0;5^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,13,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,13,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,13,21,1,0)
This is the number of additional Monday breakfast meals which are
"^DD",119.72,119.721,13,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,13,"DT")
2861126
"^DD",119.72,119.721,14,0)
ADD. MONDAY NOON^NJ4,0^^0;6^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,14,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,14,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,14,21,1,0)
This is the number of additional Monday noon meals which are
"^DD",119.72,119.721,14,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,14,"DT")
2861126
"^DD",119.72,119.721,15,0)
ADD. MONDAY EVENING^NJ4,0^^0;7^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,15,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,15,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,15,21,1,0)
This is the number of additional Monday evening meals which are
"^DD",119.72,119.721,15,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,15,"DT")
2861126
"^DD",119.72,119.721,16,0)
ADD. TUESDAY BREAKFAST^NJ4,0^^0;8^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,16,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,16,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,16,21,1,0)
This is the number of additional Tuesday breakfast meals which are
"^DD",119.72,119.721,16,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,16,"DT")
2861126
"^DD",119.72,119.721,17,0)
ADD. TUESDAY NOON^NJ4,0^^0;9^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,17,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,17,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,17,21,1,0)
This is the number of additional Tuesday noon meals which are
"^DD",119.72,119.721,17,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,17,"DT")
2861126
"^DD",119.72,119.721,18,0)
ADD. TUESDAY EVENING^NJ4,0^^0;10^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,18,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,18,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,18,21,1,0)
This is the number of additional Tuesday evening meals which are
"^DD",119.72,119.721,18,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,18,"DT")
2861126
"^DD",119.72,119.721,19,0)
ADD. WEDNESDAY BREAKFAST^NJ4,0^^0;11^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,19,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,19,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,19,21,1,0)
This is the number of additional Wednesday breakfast meals which are
"^DD",119.72,119.721,19,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,19,"DT")
2861126
"^DD",119.72,119.721,20,0)
ADD. WEDNESDAY NOON^NJ4,0^^0;12^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,20,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,20,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,20,21,1,0)
This is the number of additional Wednesday noon meals which are
"^DD",119.72,119.721,20,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,21,0)
ADD. WEDNESDAY EVENING^NJ4,0^^0;13^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,21,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,21,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,21,21,1,0)
This is the number of additional Wednesday evening meals which are
"^DD",119.72,119.721,21,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,22,0)
ADD. THURSDAY BREAKFAST^NJ4,0^^0;14^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,22,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,22,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,22,21,1,0)
This is the number of additional Thursday breakfast meals which are
"^DD",119.72,119.721,22,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,23,0)
ADD. THURSDAY NOON^NJ4,0^^0;15^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,23,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,23,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,23,21,1,0)
This is the number of additional Thursday noon meals which are
"^DD",119.72,119.721,23,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,24,0)
ADD. THURSDAY EVENING^NJ4,0^^0;16^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,24,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,24,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,24,21,1,0)
This is the number of additional Thursday evening meals which are
"^DD",119.72,119.721,24,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,25,0)
ADD. FRIDAY BREAKFAST^NJ4,0^^0;17^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,25,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,25,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,25,21,1,0)
This is the number of additional Friday breakfast meals which are
"^DD",119.72,119.721,25,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,26,0)
ADD. FRIDAY NOON^NJ4,0^^0;18^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,26,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,26,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,26,21,1,0)
This is the number of additional Friday noon meals which are
"^DD",119.72,119.721,26,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,27,0)
ADD. FRIDAY EVENING^NJ4,0^^0;19^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,27,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,27,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,27,21,1,0)
This is the number of additional Friday evening meals which are
"^DD",119.72,119.721,27,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,28,0)
ADD. SATURDAY BREAKFAST^NJ4,0^^0;20^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,28,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,28,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,28,21,1,0)
This is the number of additional Saturday breakfast meals which are
"^DD",119.72,119.721,28,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,29,0)
ADD. SATURDAY NOON^NJ4,0^^0;21^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,29,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,29,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,29,21,1,0)
This is the number of additional Saturday noon meals which are
"^DD",119.72,119.721,29,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.721,30,0)
ADD. SATURDAY EVENING^NJ4,0^^0;22^K:+X'=X!(X>1000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.721,30,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 1000
"^DD",119.72,119.721,30,21,0)
^^2^2^2880716^^
"^DD",119.72,119.721,30,21,1,0)
This is the number of additional Saturday evening meals which are
"^DD",119.72,119.721,30,21,2,0)
to be added to the inpatient forecast.
"^DD",119.72,119.7211,0)
PRODUCTION DIET PERCENTAGE SUB-FIELD^^16^8
"^DD",119.72,119.7211,0,"DT")
2911112
"^DD",119.72,119.7211,0,"IX","B",119.7211,.01)

"^DD",119.72,119.7211,0,"NM","PRODUCTION DIET PERCENTAGE")

"^DD",119.72,119.7211,0,"UP")
119.72
"^DD",119.72,119.7211,.01,0)
FORECAST % PRODUCTION DIET^MP116.2'X^FH(116.2,^0;1^I $D(X) S DINUM=X
"^DD",119.72,119.7211,.01,1,0)
^.1
"^DD",119.72,119.7211,.01,1,1,0)
119.7211^B
"^DD",119.72,119.7211,.01,1,1,1)
S ^FH(119.72,DA(1),"A","B",$E(X,1,30),DA)=""
"^DD",119.72,119.7211,.01,1,1,2)
K ^FH(119.72,DA(1),"A","B",$E(X,1,30),DA)
"^DD",119.72,119.7211,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.72,119.7211,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the PRODUCTION DIET field.
"^DD",119.72,119.7211,.01,21,0)
^^2^2^2911211^^
"^DD",119.72,119.7211,.01,21,1,0)
This field is the production diet for which daily forecast percentages
"^DD",119.72,119.7211,.01,21,2,0)
are to be entered.
"^DD",119.72,119.7211,.01,"DT")
2911211
"^DD",119.72,119.7211,10,0)
SUNDAY CENSUS PERCENTAGE^NJ5,1^^0;2^K:+X'=X!(X>110)!(X<0)!(X?.E1"."2N.N) X
"^DD",119.72,119.7211,10,3)
TYPE A NUMBER BETWEEN 0 AND 110
"^DD",119.72,119.7211,10,21,0)
^^2^2^2880716^
"^DD",119.72,119.7211,10,21,1,0)
This field contains the % of total census on Sundays for which this
"^DD",119.72,119.7211,10,21,2,0)
production diet is to be forecast.
"^DD",119.72,119.7211,10,"DT")
2870716
"^DD",119.72,119.7211,11,0)
MONDAY CENSUS PERCENTAGE^NJ5,1^^0;3^K:+X'=X!(X>110)!(X<0)!(X?.E1"."2N.N) X
"^DD",119.72,119.7211,11,3)
TYPE A NUMBER BETWEEN 0 AND 110
"^DD",119.72,119.7211,11,21,0)
^^2^2^2880716^
"^DD",119.72,119.7211,11,21,1,0)
This field contains the % of total census on Mondays for which this
"^DD",119.72,119.7211,11,21,2,0)
production diet is to be forecast.
"^DD",119.72,119.7211,11,"DT")
2870716
"^DD",119.72,119.7211,12,0)
TUESDAY CENSUS PERCENTAGE^NJ5,1^^0;4^K:+X'=X!(X>110)!(X<0)!(X?.E1"."2N.N) X
"^DD",119.72,119.7211,12,3)
TYPE A NUMBER BETWEEN 0 AND 110
"^DD",119.72,119.7211,12,21,0)
^^2^2^2880716^
"^DD",119.72,119.7211,12,21,1,0)
This field contains the % of total census on Tuesdays for which this
"^DD",119.72,119.7211,12,21,2,0)
production diet is to be forecast.
"^DD",119.72,119.7211,12,"DT")
2870716
"^DD",119.72,119.7211,13,0)
WEDNESDAY CENSUS PERCENTAGE^NJ5,1^^0;5^K:+X'=X!(X>110)!(X<0)!(X?.E1"."2N.N) X
"^DD",119.72,119.7211,13,3)
TYPE A NUMBER BETWEEN 0 AND 110
"^DD",119.72,119.7211,13,21,0)
^^2^2^2880716^
"^DD",119.72,119.7211,13,21,1,0)
This field contains the % of total census on Wednesdays for which this
"^DD",119.72,119.7211,13,21,2,0)
production diet is to be forecast.
"^DD",119.72,119.7211,13,"DT")
2870716
"^DD",119.72,119.7211,14,0)
THURSDAY CENSUS PERCENTAGE^NJ5,1^^0;6^K:+X'=X!(X>110)!(X<0)!(X?.E1"."2N.N) X
"^DD",119.72,119.7211,14,3)
TYPE A NUMBER BETWEEN 0 AND 110
"^DD",119.72,119.7211,14,21,0)
^^2^2^2880716^
"^DD",119.72,119.7211,14,21,1,0)
This field contains the % of total census on Thursdays for which this
"^DD",119.72,119.7211,14,21,2,0)
production diet is to be forecast.
"^DD",119.72,119.7211,14,"DT")
2870716
"^DD",119.72,119.7211,15,0)
FRIDAY CENSUS PERCENTAGE^NJ5,1^^0;7^K:+X'=X!(X>110)!(X<0)!(X?.E1"."2N.N) X
"^DD",119.72,119.7211,15,3)
TYPE A NUMBER BETWEEN 0 AND 110
"^DD",119.72,119.7211,15,21,0)
^^2^2^2880716^
"^DD",119.72,119.7211,15,21,1,0)
This field contains the % of total census on Fridays for which this
"^DD",119.72,119.7211,15,21,2,0)
production diet is to be forecast.
"^DD",119.72,119.7211,15,"DT")
2870716
"^DD",119.72,119.7211,16,0)
SATURDAY CENSUS PERCENTAGE^NJ5,1^^0;8^K:+X'=X!(X>110)!(X<0)!(X?.E1"."2N.N) X
"^DD",119.72,119.7211,16,3)
TYPE A NUMBER BETWEEN 0 AND 110
"^DD",119.72,119.7211,16,21,0)
^^2^2^2880716^
"^DD",119.72,119.7211,16,21,1,0)
This field contains the % of total census on Saturdays for which this
"^DD",119.72,119.7211,16,21,2,0)
production diet is to be forecast.
"^DD",119.72,119.7211,16,"DT")
2870716
"^DD",119.72,119.722,0)
CENSUS DATE SUB-FIELD^^5^5
"^DD",119.72,119.722,0,"DT")
2920108
"^DD",119.72,119.722,0,"NM","CENSUS DATE")

"^DD",119.72,119.722,0,"UP")
119.72
"^DD",119.72,119.722,.01,0)
CENSUS DATE^DX^^0;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X I $D(X) S DINUM=X
"^DD",119.72,119.722,.01,1,0)
^.1^^0
"^DD",119.72,119.722,.01,21,0)
^^2^2^2920220^
"^DD",119.72,119.722,.01,21,1,0)
This is the date for which the forecast census and actual census
"^DD",119.72,119.722,.01,21,2,0)
are tabulated.
"^DD",119.72,119.722,.01,"DT")
2920108
"^DD",119.72,119.722,1,0)
FORECAST CENSUS^NJ4,0^^0;2^K:+X'=X!(X>5000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.722,1,3)
Type a Number between 0 and 5000, 0 Decimal Digits
"^DD",119.72,119.722,1,21,0)
^^4^4^2920108^
"^DD",119.72,119.722,1,21,1,0)
This is the calculated forecast census for wards served by this
"^DD",119.72,119.722,1,21,2,0)
Service Point. It should be noted that some of these wards may
"^DD",119.72,119.722,1,21,3,0)
have only a small percentage of their patients served by the
"^DD",119.72,119.722,1,21,4,0)
Service Point.
"^DD",119.72,119.722,1,"DT")
2920108
"^DD",119.72,119.722,2,0)
ACTUAL CENSUS^NJ4,0^^0;3^K:+X'=X!(X>5000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.722,2,3)
Type a Number between 0 and 5000, 0 Decimal Digits
"^DD",119.72,119.722,2,21,0)
^^2^2^2920108^
"^DD",119.72,119.722,2,21,1,0)
This field contains the actual census of the wards served by this
"^DD",119.72,119.722,2,21,2,0)
Service Point based upon the MAS ward census values.
"^DD",119.72,119.722,2,"DT")
2920108
"^DD",119.72,119.722,3,0)
CORRECTED FORECAST^NJ4,0^^0;4^K:+X'=X!(X>5000)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.72,119.722,3,3)
Type a Number between 0 and 5000, 0 Decimal Digits
"^DD",119.72,119.722,3,21,0)
^^3^3^2920108^
"^DD",119.72,119.722,3,21,1,0)
This field contains the corrected forecast which is the forecast
"^DD",119.72,119.722,3,21,2,0)
census corrected by applying the various percentages for tray,
"^DD",119.72,119.722,3,21,3,0)
cafeteria, and dining room utilization.
"^DD",119.72,119.722,3,"DT")
2920108
"^DD",119.72,119.722,5,0)
DATE OF LAST FORECAST^D^^0;5^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",119.72,119.722,5,21,0)
^^2^2^2920108^
"^DD",119.72,119.722,5,21,1,0)
This is the date on which the last forecast was made for this
"^DD",119.72,119.722,5,21,2,0)
census date.
"^DD",119.72,119.722,5,"DT")
2920108
"^DD",119.73,119.73,0)
FIELD^^102^32
"^DD",119.73,119.73,0,"DDA")
N
"^DD",119.73,119.73,0,"DT")
2921007
"^DD",119.73,119.73,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",119.73,119.73,0,"IX","AC",119.73,99)

"^DD",119.73,119.73,0,"IX","B",119.73,.01)

"^DD",119.73,119.73,0,"NM","COMMUNICATION OFFICE")

"^DD",119.73,119.73,0,"PT",115.7,11)

"^DD",119.73,119.73,0,"PT",117.06,.01)

"^DD",119.73,119.73,0,"PT",117.11,.01)

"^DD",119.73,119.73,0,"PT",119.6,6)

"^DD",119.73,119.73,0,"PT",14100032,6)

"^DD",119.73,119.73,0,"SCR")
I '$D(^FH(119.73,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",119.73,119.73,0,"VRPK")
FH
"^DD",119.73,119.73,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",119.73,119.73,.01,1,0)
^.1
"^DD",119.73,119.73,.01,1,1,0)
119.73^B
"^DD",119.73,119.73,.01,1,1,1)
S ^FH(119.73,"B",$E(X,1,30),DA)=""
"^DD",119.73,119.73,.01,1,1,2)
K ^FH(119.73,"B",$E(X,1,30),DA)
"^DD",119.73,119.73,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.73,119.73,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",119.73,119.73,.01,3)
Answer must be 3-30 characters in length.
"^DD",119.73,119.73,.01,21,0)
^^2^2^2911204^
"^DD",119.73,119.73,.01,21,1,0)
This is the name of the Communication Office. It is responsible for
"^DD",119.73,119.73,.01,21,2,0)
processing the diet orders from a group of Dietetic wards.
"^DD",119.73,119.73,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",119.73,119.73,.01,"DT")
2921007
"^DD",119.73,119.73,6,0)
BEGIN BREAKFAST WINDOW^RFX^^2;7^D TIM^FHSYSP
"^DD",119.73,119.73,6,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,6,21,0)
^^3^3^2880713^
"^DD",119.73,119.73,6,21,1,0)
This is the latest time for which breakfast orders will be accepted
"^DD",119.73,119.73,6,21,2,0)
and is used as the time associated with the use of the 'B' (for
"^DD",119.73,119.73,6,21,3,0)
breakfast) time in diet orders.
"^DD",119.73,119.73,6,"DT")
2850302
"^DD",119.73,119.73,7,0)
BEGIN NOON WINDOW^RFX^^2;8^D TIM^FHSYSP
"^DD",119.73,119.73,7,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,7,21,0)
^^3^3^2880713^
"^DD",119.73,119.73,7,21,1,0)
This is the latest time for which noon orders will be accepted
"^DD",119.73,119.73,7,21,2,0)
and is used as the time associated with the use of the 'N' (for
"^DD",119.73,119.73,7,21,3,0)
noon) time in diet orders.
"^DD",119.73,119.73,7,"DT")
2850302
"^DD",119.73,119.73,8,0)
BEGIN EVENING WINDOW^RFX^^2;9^D TIM^FHSYSP
"^DD",119.73,119.73,8,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,8,21,0)
^^3^3^2880713^
"^DD",119.73,119.73,8,21,1,0)
This is the latest time for which evening orders will be accepted
"^DD",119.73,119.73,8,21,2,0)
and is used as the time associated with the use of the 'E' (for
"^DD",119.73,119.73,8,21,3,0)
evening) time in diet orders.
"^DD",119.73,119.73,8,"DT")
2850302
"^DD",119.73,119.73,9,0)
PROVIDE BAGGED MEALS?^S^Y:YES;N:NO;^2;10^Q
"^DD",119.73,119.73,9,21,0)
^^2^2^2910612^^^
"^DD",119.73,119.73,9,21,1,0)
If answered YES, this field indicates that bagged meals can be
"^DD",119.73,119.73,9,21,2,0)
ordered as part of the early/late tray ordering process.
"^DD",119.73,119.73,9,"DT")
2880116
"^DD",119.73,119.73,10,0)
EARLY BREAKFAST TIME 1^FX^^1;1^D TIM^FHSYSP
"^DD",119.73,119.73,10,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,10,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,10,21,1,0)
This is the first delivery time for an early breakfast tray.
"^DD",119.73,119.73,10,"DT")
2850517
"^DD",119.73,119.73,11,0)
EARLY BREAKFAST TIME 2^FX^^1;2^D TIM^FHSYSP
"^DD",119.73,119.73,11,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,11,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,11,21,1,0)
This is the second delivery time for an early breakfast tray.
"^DD",119.73,119.73,11,"DT")
2850517
"^DD",119.73,119.73,12,0)
EARLY BREAKFAST TIME 3^FX^^1;3^D TIM^FHSYSP
"^DD",119.73,119.73,12,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,12,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,12,21,1,0)
This is the third delivery time for an early breakfast tray.
"^DD",119.73,119.73,12,"DT")
2850517
"^DD",119.73,119.73,13,0)
LATE BREAKFAST TIME 1^FX^^1;4^D TIM^FHSYSP
"^DD",119.73,119.73,13,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,13,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,13,21,1,0)
This is the first delivery time for a late breakfast tray.
"^DD",119.73,119.73,13,"DT")
2850517
"^DD",119.73,119.73,14,0)
LATE BREAKFAST TIME 2^FX^^1;5^D TIM^FHSYSP
"^DD",119.73,119.73,14,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,14,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,14,21,1,0)
This is the second delivery time for a late breakfast tray.
"^DD",119.73,119.73,14,"DT")
2850517
"^DD",119.73,119.73,15,0)
LATE BREAKFAST TIME 3^FX^^1;6^D TIM^FHSYSP
"^DD",119.73,119.73,15,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,15,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,15,21,1,0)
This is the third delivery time for a late breakfast tray.
"^DD",119.73,119.73,15,"DT")
2850517
"^DD",119.73,119.73,16,0)
EARLY NOON TIME 1^FX^^1;7^D TIM^FHSYSP
"^DD",119.73,119.73,16,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,16,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,16,21,1,0)
This is the first delivery time for an early noon tray.
"^DD",119.73,119.73,16,"DT")
2850517
"^DD",119.73,119.73,17,0)
EARLY NOON TIME 2^FX^^1;8^D TIM^FHSYSP
"^DD",119.73,119.73,17,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,17,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,17,21,1,0)
This is the second delivery time for an early noon tray.
"^DD",119.73,119.73,17,"DT")
2850517
"^DD",119.73,119.73,18,0)
EARLY NOON TIME 3^FX^^1;9^D TIM^FHSYSP
"^DD",119.73,119.73,18,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,18,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,18,21,1,0)
This is the third delivery time for an early noon tray.
"^DD",119.73,119.73,18,"DT")
2850517
"^DD",119.73,119.73,19,0)
LATE NOON TIME 1^FX^^1;10^D TIM^FHSYSP
"^DD",119.73,119.73,19,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,19,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,19,21,1,0)
This is the first delivery time for a late noon tray.
"^DD",119.73,119.73,19,"DT")
2850517
"^DD",119.73,119.73,20,0)
LATE NOON TIME 2^FX^^1;11^D TIM^FHSYSP
"^DD",119.73,119.73,20,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,20,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,20,21,1,0)
This is the second delivery time for a late noon tray.
"^DD",119.73,119.73,20,"DT")
2850517
"^DD",119.73,119.73,21,0)
LATE NOON TIME 3^FX^^1;12^D TIM^FHSYSP
"^DD",119.73,119.73,21,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,21,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,21,21,1,0)
This is the third delivery time for a late noon tray.
"^DD",119.73,119.73,21,"DT")
2850517
"^DD",119.73,119.73,22,0)
EARLY EVENING TIME 1^FX^^1;13^D TIM^FHSYSP
"^DD",119.73,119.73,22,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,22,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,22,21,1,0)
This is the first delivery time for an early evening tray.
"^DD",119.73,119.73,22,"DT")
2850517
"^DD",119.73,119.73,23,0)
EARLY EVENING TIME 2^FX^^1;14^D TIM^FHSYSP
"^DD",119.73,119.73,23,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,23,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,23,21,1,0)
This is the second delivery time for an early evening tray.
"^DD",119.73,119.73,23,"DT")
2850517
"^DD",119.73,119.73,24,0)
EARLY EVENING TIME 3^FX^^1;15^D TIM^FHSYSP
"^DD",119.73,119.73,24,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,24,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,24,21,1,0)
This is the third delivery time for an early evening tray.
"^DD",119.73,119.73,24,"DT")
2850517
"^DD",119.73,119.73,25,0)
LATE EVENING TIME 1^FX^^1;16^D TIM^FHSYSP
"^DD",119.73,119.73,25,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,25,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,25,21,1,0)
This is the first delivery time for a late evening tray.
"^DD",119.73,119.73,25,"DT")
2850517
"^DD",119.73,119.73,26,0)
LATE EVENING TIME 2^FX^^1;17^D TIM^FHSYSP
"^DD",119.73,119.73,26,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,26,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,26,21,1,0)
This is the second delivery time for a late evening tray.
"^DD",119.73,119.73,26,"DT")
2850517
"^DD",119.73,119.73,27,0)
LATE EVENING TIME 3^FX^^1;18^D TIM^FHSYSP
"^DD",119.73,119.73,27,3)
ANSWER MUST BE A TIME OF DAY
"^DD",119.73,119.73,27,21,0)
^^1^1^2880716^
"^DD",119.73,119.73,27,21,1,0)
This is the third delivery time for a late evening tray.
"^DD",119.73,119.73,27,"DT")
2850517
"^DD",119.73,119.73,28,0)
LATE BREAKFAST ALARM BEGIN^FXO^^2;1^D TIM^FHSYSP I $D(X) D MIL^FHSYSP S X=X1
"^DD",119.73,119.73,28,2)
S Y(0)=Y D MIP^FHSYSP
"^DD",119.73,119.73,28,2.1)
D MIP^FHSYSP
"^DD",119.73,119.73,28,3)
ANSWER MUST BE 1-7 CHARACTERS IN LENGTH
"^DD",119.73,119.73,28,21,0)
^^4^4^2880716^
"^DD",119.73,119.73,28,21,1,0)
This is the beginning of the late breakfast alarm period; that
"^DD",119.73,119.73,28,21,2,0)
is the time when persons entering diet orders will be reminded
"^DD",119.73,119.73,28,21,3,0)
that the normal cut-off time has passed and a late tray will
"^DD",119.73,119.73,28,21,4,0)
have to be ordered for breakfast if desired.
"^DD",119.73,119.73,28,"DT")
2871110
"^DD",119.73,119.73,29,0)
LATE BREAKFAST ALARM END^FXO^^2;2^D TIM^FHSYSP I $D(X) D MIL^FHSYSP S X=X1
"^DD",119.73,119.73,29,2)
S Y(0)=Y D MIP^FHSYSP
"^DD",119.73,119.73,29,2.1)
D MIP^FHSYSP
"^DD",119.73,119.73,29,3)
ANSWER MUST BE 1-7 CHARACTERS IN LENGTH
"^DD",119.73,119.73,29,21,0)
^^3^3^2880718^^
"^DD",119.73,119.73,29,21,1,0)
This is the end of the breakfast alarm period. It should be
"^DD",119.73,119.73,29,21,2,0)
one or two minutes earlier than the last breakfast late tray delivery
"^DD",119.73,119.73,29,21,3,0)
time.
"^DD",119.73,119.73,29,"DT")
2871110
"^DD",119.73,119.73,30,0)
LATE NOON ALARM BEGIN^FXO^^2;3^D TIM^FHSYSP I $D(X) D MIL^FHSYSP S X=X1
"^DD",119.73,119.73,30,2)
S Y(0)=Y D MIP^FHSYSP
"^DD",119.73,119.73,30,2.1)
D MIP^FHSYSP
"^DD",119.73,119.73,30,3)
ANSWER MUST BE 1-7 CHARACTERS IN LENGTH
"^DD",119.73,119.73,30,21,0)
^^3^3^2880716^
"^DD",119.73,119.73,30,21,1,0)
This is the beginning of the noon alarm period; persons entering
"^DD",119.73,119.73,30,21,2,0)
diet orders will be reminded that the noon cut-off has passed
"^DD",119.73,119.73,30,21,3,0)
and a late noon tray will have to be ordered if desired.
"^DD",119.73,119.73,30,"DT")
2871110
"^DD",119.73,119.73,31,0)
LATE NOON ALARM END^FXO^^2;4^D TIM^FHSYSP I $D(X) D MIL^FHSYSP S X=X1
"^DD",119.73,119.73,31,2)
S Y(0)=Y D MIP^FHSYSP
"^DD",119.73,119.73,31,2.1)
D MIP^FHSYSP
"^DD",119.73,119.73,31,3)
ANSWER MUST BE 1-7 CHARACTERS IN LENGTH
"^DD",119.73,119.73,31,21,0)
^^2^2^2880716^
"^DD",119.73,119.73,31,21,1,0)
This is the end of the noon alarm period and should be one or two
"^DD",119.73,119.73,31,21,2,0)
minutes earlier than the last noon late tray delivery time.
"^DD",119.73,119.73,31,"DT")
2871110
"^DD",119.73,119.73,32,0)
LATE EVENING ALARM BEGIN^FXO^^2;5^D TIM^FHSYSP I $D(X) D MIL^FHSYSP S X=X1
"^DD",119.73,119.73,32,2)
S Y(0)=Y D MIP^FHSYSP
"^DD",119.73,119.73,32,2.1)
D MIP^FHSYSP
"^DD",119.73,119.73,32,3)
ANSWER MUST BE 1-7 CHARACTERS IN LENGTH
"^DD",119.73,119.73,32,21,0)
^^4^4^2880716^
"^DD",119.73,119.73,32,21,1,0)
This is the beginning of the evening alarm period; that is the period
"^DD",119.73,119.73,32,21,2,0)
when persons entering diet orders will be reminded that the
"^DD",119.73,119.73,32,21,3,0)
evening cut-off has passed and a late evening tray will have
"^DD",119.73,119.73,32,21,4,0)
to be ordered if desired.
"^DD",119.73,119.73,32,"DT")
2871110
"^DD",119.73,119.73,33,0)
LATE EVENING ALARM END^FXO^^2;6^D TIM^FHSYSP I $D(X) D MIL^FHSYSP S X=X1
"^DD",119.73,119.73,33,2)
S Y(0)=Y D MIP^FHSYSP
"^DD",119.73,119.73,33,2.1)
D MIP^FHSYSP
"^DD",119.73,119.73,33,3)
ANSWER MUST BE 1-7 CHARACTERS IN LENGTH
"^DD",119.73,119.73,33,21,0)
^^3^3^2880716^
"^DD",119.73,119.73,33,21,1,0)
This is the end of the evening alarm period and should be one or
"^DD",119.73,119.73,33,21,2,0)
two minutes earlier than the last evening late tray delivery
"^DD",119.73,119.73,33,21,3,0)
time.
"^DD",119.73,119.73,33,"DT")
2871110
"^DD",119.73,119.73,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",119.73,119.73,99,1,0)
^.1
"^DD",119.73,119.73,99,1,1,0)
119.73^AC^MUMPS
"^DD",119.73,119.73,99,1,1,1)
K:X'="Y" ^FH(119.73,DA,"I")
"^DD",119.73,119.73,99,1,1,2)
K ^FH(119.73,DA,"I")
"^DD",119.73,119.73,99,1,1,"%D",0)
^^2^2^3000202
"^DD",119.73,119.73,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",119.73,119.73,99,1,1,"%D",2,0)
inactive entries.
"^DD",119.73,119.73,99,21,0)
^^2^2^3000202
"^DD",119.73,119.73,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",119.73,119.73,99,21,2,0)
further selection of this entry.
"^DD",119.73,119.73,99,"DT")
3000223
"^DD",119.73,119.73,101,0)
DATE/TIME LAST UPDATE^D^^0;2^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",119.73,119.73,101,21,0)
^^3^3^2950420^^^^
"^DD",119.73,119.73,101,21,1,0)
This is the date/time of the last Diet Activity report generated for
"^DD",119.73,119.73,101,21,2,0)
this Communication Office. It is used so that the following report
"^DD",119.73,119.73,101,21,3,0)
will show only changes after this date/time.
"^DD",119.73,119.73,101,"DT")
2911101
"^DD",119.73,119.73,102,0)
LAST LABEL UPDATE^D^^0;3^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",119.73,119.73,102,21,0)
^^2^2^2920822^
"^DD",119.73,119.73,102,21,1,0)
This is the last date/time the labels were generated for the
"^DD",119.73,119.73,102,21,2,0)
Diet Activity Report
"^DD",119.73,119.73,102,"DT")
2920822
"^DD",119.74,119.74,0)
FIELD^^99^6
"^DD",119.74,119.74,0,"DT")
2911203
"^DD",119.74,119.74,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",119.74,119.74,0,"IX","AC",119.74,99)

"^DD",119.74,119.74,0,"IX","B",119.74,.01)

"^DD",119.74,119.74,0,"IX","C",119.74,1)

"^DD",119.74,119.74,0,"NM","SUPPLEMENTAL FEEDING SITE")

"^DD",119.74,119.74,0,"PT",119.6,7)

"^DD",119.74,119.74,0,"PT",14100032,7)

"^DD",119.74,119.74,0,"SCR")
I '$D(^FH(119.74,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",119.74,119.74,0,"VRPK")
FH
"^DD",119.74,119.74,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",119.74,119.74,.01,1,0)
^.1
"^DD",119.74,119.74,.01,1,1,0)
119.74^B
"^DD",119.74,119.74,.01,1,1,1)
S ^FH(119.74,"B",$E(X,1,30),DA)=""
"^DD",119.74,119.74,.01,1,1,2)
K ^FH(119.74,"B",$E(X,1,30),DA)
"^DD",119.74,119.74,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",119.74,119.74,.01,21,0)
^^3^3^2911204^^
"^DD",119.74,119.74,.01,21,1,0)
This field contains the name of the Supplemental Feeding Site. It is
"^DD",119.74,119.74,.01,21,2,0)
responsible for the assembly and delivery of supplemental feedings
"^DD",119.74,119.74,.01,21,3,0)
to a group of Dietetic Wards.
"^DD",119.74,119.74,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",119.74,119.74,1,0)
SHORT NAME^F^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>6!($L(X)<1) X
"^DD",119.74,119.74,1,1,0)
^.1
"^DD",119.74,119.74,1,1,1,0)
119.74^C
"^DD",119.74,119.74,1,1,1,1)
S ^FH(119.74,"C",$E(X,1,30),DA)=""
"^DD",119.74,119.74,1,1,1,2)
K ^FH(119.74,"C",$E(X,1,30),DA)
"^DD",119.74,119.74,1,1,1,"DT")
2930427
"^DD",119.74,119.74,1,3)
Answer must be 1-6 characters in length.
"^DD",119.74,119.74,1,21,0)
^^2^2^2911204^
"^DD",119.74,119.74,1,21,1,0)
This field contains a short 6-character name to be used on various
"^DD",119.74,119.74,1,21,2,0)
reports.
"^DD",119.74,119.74,1,"DT")
2930427
"^DD",119.74,119.74,2,0)
PRODUCTION FACILITY^RP119.71'^FH(119.71,^0;3^Q
"^DD",119.74,119.74,2,21,0)
^^3^3^2950614^^
"^DD",119.74,119.74,2,21,1,0)
This field indicates the production facility that is responsible for
"^DD",119.74,119.74,2,21,2,0)
preparing the food used in the supplemental feedings distributed by
"^DD",119.74,119.74,2,21,3,0)
this site.
"^DD",119.74,119.74,2,"DT")
2911108
"^DD",119.74,119.74,20,0)
SEPARATE SUPP FDG LABELS?^S^Y:YES;N:NO;^0;4^Q
"^DD",119.74,119.74,20,21,0)
^^3^3^2930423^^
"^DD",119.74,119.74,20,21,1,0)
This field, if answered YES, indicates that each supplemental
"^DD",119.74,119.74,20,21,2,0)
feeding item should be on an individual label rather than having
"^DD",119.74,119.74,20,21,3,0)
all items on the item.
"^DD",119.74,119.74,20,"DT")
2930423
"^DD",119.74,119.74,21,0)
INGREDIENTS ON WARD LISTS?^S^Y:YES;N:NO;^0;5^Q
"^DD",119.74,119.74,21,21,0)
^^3^3^2880718^^
"^DD",119.74,119.74,21,21,1,0)
This field, if answered YES, will result in the Ward Supplemental
"^DD",119.74,119.74,21,21,2,0)
Feeding lists printing the consolidated ingredient requirements
"^DD",119.74,119.74,21,21,3,0)
following each ward.
"^DD",119.74,119.74,21,"DT")
2850308
"^DD",119.74,119.74,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",119.74,119.74,99,1,0)
^.1
"^DD",119.74,119.74,99,1,1,0)
119.74^AC^MUMPS
"^DD",119.74,119.74,99,1,1,1)
K:X'="Y" ^FH(119.74,DA,"I")
"^DD",119.74,119.74,99,1,1,2)
K ^FH(119.74,DA,"I")
"^DD",119.74,119.74,99,1,1,"%D",0)
^^2^2^3000202
"^DD",119.74,119.74,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",119.74,119.74,99,1,1,"%D",2,0)
inactive entries.
"^DD",119.74,119.74,99,21,0)
^^2^2^3000202
"^DD",119.74,119.74,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",119.74,119.74,99,21,2,0)
further selection of this entry.
"^DD",119.74,119.74,99,"DT")
3000223
"^DD",119.8,119.8,0)
FIELD^^8^9
"^DD",119.8,119.8,0,"DT")
3040518
"^DD",119.8,119.8,0,"IX","AD",119.8,1)

"^DD",119.8,119.8,0,"IX","AP",119.8,2)

"^DD",119.8,119.8,0,"IX","AP1",119.8,1)

"^DD",119.8,119.8,0,"IX","B",119.8,.01)

"^DD",119.8,119.8,0,"NM","NUTRITION EVENTS")

"^DD",119.8,119.8,.01,0)
NUMBER^RNJ9,0X^^0;1^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",119.8,119.8,.01,1,0)
^.1
"^DD",119.8,119.8,.01,1,1,0)
119.8^B
"^DD",119.8,119.8,.01,1,1,1)
S ^FH(119.8,"B",$E(X,1,30),DA)=""
"^DD",119.8,119.8,.01,1,1,2)
K ^FH(119.8,"B",$E(X,1,30),DA)
"^DD",119.8,119.8,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.8,119.8,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NUMBER field.
"^DD",119.8,119.8,.01,3)
Type a Number between 1 and 999999999, 0 Decimal Digits
"^DD",119.8,119.8,.01,21,0)
^^2^2^2921107^^^^
"^DD",119.8,119.8,.01,21,1,0)
This field contains a sequential number assigned to the event
"^DD",119.8,119.8,.01,21,2,0)
and has no meaning.
"^DD",119.8,119.8,.01,"DT")
2890719
"^DD",119.8,119.8,1,0)
DATE/TIME^RD^^0;2^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",119.8,119.8,1,1,0)
^.1
"^DD",119.8,119.8,1,1,1,0)
119.8^AD
"^DD",119.8,119.8,1,1,1,1)
S ^FH(119.8,"AD",$E(X,1,30),DA)=""
"^DD",119.8,119.8,1,1,1,2)
K ^FH(119.8,"AD",$E(X,1,30),DA)
"^DD",119.8,119.8,1,1,1,"DT")
2920704
"^DD",119.8,119.8,1,1,2,0)
119.8^AP1^MUMPS
"^DD",119.8,119.8,1,1,2,1)
S X1=$P(^FH(119.8,DA,0),U,3) I X1 S ^FH(119.8,"AP",X1,X,DA)=""
"^DD",119.8,119.8,1,1,2,2)
S X1=$P(^FH(119.8,DA,0),U,3) I X1 K ^FH(119.8,"AP",X1,X,DA)
"^DD",119.8,119.8,1,1,2,"%D",0)
^^2^2^2940823^^
"^DD",119.8,119.8,1,1,2,"%D",1,0)
This is a cross-reference of dietetic events by patient and date/time.
"^DD",119.8,119.8,1,1,2,"%D",2,0)
Field 2 is also used to set the cross-reference.
"^DD",119.8,119.8,1,1,2,"DT")
2920705
"^DD",119.8,119.8,1,21,0)
^^1^1^2921107^
"^DD",119.8,119.8,1,21,1,0)
This is the date/time at which the event occurred.
"^DD",119.8,119.8,1,"DT")
2920705
"^DD",119.8,119.8,2,0)
PATIENT^RP115'^FHPT(^0;3^Q
"^DD",119.8,119.8,2,1,0)
^.1
"^DD",119.8,119.8,2,1,1,0)
119.8^AP^MUMPS
"^DD",119.8,119.8,2,1,1,1)
S X1=$P(^FH(119.8,DA,0),U,2) I X1 S ^FH(119.8,"AP",X,X1,DA)=""
"^DD",119.8,119.8,2,1,1,2)
S X1=$P(^FH(119.8,DA,0),U,2) I X1 K ^FH(119.8,"AP",X,X1,DA)
"^DD",119.8,119.8,2,1,1,"%D",0)
^^2^2^2940823^
"^DD",119.8,119.8,2,1,1,"%D",1,0)
This is a cross-reference of dietetic events by patient and date/time.
"^DD",119.8,119.8,2,1,1,"%D",2,0)
Field 1 is also used to set the cross-reference.
"^DD",119.8,119.8,2,1,1,"DT")
2920705
"^DD",119.8,119.8,2,21,0)
^^2^2^2921107^
"^DD",119.8,119.8,2,21,1,0)
This is a pointer to the patient with which the event is
"^DD",119.8,119.8,2,21,2,0)
associated.
"^DD",119.8,119.8,2,"DT")
2920705
"^DD",119.8,119.8,3,0)
ADMISSION^RP405'^DGPM(^0;4^Q
"^DD",119.8,119.8,3,1,0)
^.1^^0
"^DD",119.8,119.8,3,21,0)
^^2^2^2921107^
"^DD",119.8,119.8,3,21,1,0)
This is a pointer to the admission (Movement) with which the
"^DD",119.8,119.8,3,21,2,0)
event is associated.
"^DD",119.8,119.8,3,"DT")
2920705
"^DD",119.8,119.8,4,0)
TYPE OF EVENT^RS^L:LOCATION;D:DIET;I:ISOLATION;T:T/F;O:OTHER;P:PREF.;S:STD. ORDERS;F:SUPP. FDG.;M:MESSAGE;Z:OUTPATIENT EVENT;^0;5^Q
"^DD",119.8,119.8,4,21,0)
^.001^1^1^3040518^^^^
"^DD",119.8,119.8,4,21,1,0)
This is a set of codes indicating the type of event.
"^DD",119.8,119.8,4,"DT")
3040518
"^DD",119.8,119.8,5,0)
ACTION^S^O:ORDERED;C:CANCELLED;A:ADMIT;T:TRANSFER;D:DISCHARGE;^0;6^Q
"^DD",119.8,119.8,5,21,0)
^^2^2^2930913^^
"^DD",119.8,119.8,5,21,1,0)
This is a set of codes indicating the type of action; A D T are
"^DD",119.8,119.8,5,21,2,0)
associated only with location changes.
"^DD",119.8,119.8,5,"DT")
2920705
"^DD",119.8,119.8,6,0)
ORDER #^RNJ7,0^^0;7^K:+X'=X!(X>9999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.8,119.8,6,3)
Type a Number between 1 and 9999999, 0 Decimal Digits
"^DD",119.8,119.8,6,21,0)
^^1^1^2921107^
"^DD",119.8,119.8,6,21,1,0)
This value corresponds to the associated Order for the event.
"^DD",119.8,119.8,6,"DT")
2920704
"^DD",119.8,119.8,7,0)
TEXT^F^^0;8^K:$L(X)>120!($L(X)<3) X
"^DD",119.8,119.8,7,3)
Answer must be 3-120 characters in length.
"^DD",119.8,119.8,7,21,0)
^^2^2^2921107^
"^DD",119.8,119.8,7,21,1,0)
This is the text of the order; for location changes it represents
"^DD",119.8,119.8,7,21,2,0)
the From-To Ward and Bed.
"^DD",119.8,119.8,7,"DT")
2920704
"^DD",119.8,119.8,8,0)
ENTERED CLERK^RP200'^VA(200,^0;9^Q
"^DD",119.8,119.8,8,21,0)
^^2^2^2950317^
"^DD",119.8,119.8,8,21,1,0)
This field contains the user who entered the order and is
"^DD",119.8,119.8,8,21,2,0)
automatically captured at the time of entry.
"^DD",119.8,119.8,8,"DT")
2950317
"^DD",119.9,119.9,0)
FIELD^^39^42
"^DD",119.9,119.9,0,"DDA")
N
"^DD",119.9,119.9,0,"DT")
3040223
"^DD",119.9,119.9,0,"IX","B",119.9,.01)

"^DD",119.9,119.9,0,"NM","FH SITE PARAMETERS")

"^DD",119.9,119.9,.01,0)
SITE^RNJ1,0X^^0;1^K:+X'=X!(X>1)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",119.9,119.9,.01,1,0)
^.1
"^DD",119.9,119.9,.01,1,1,0)
119.9^B
"^DD",119.9,119.9,.01,1,1,1)
S ^FH(119.9,"B",$E(X,1,30),DA)=""
"^DD",119.9,119.9,.01,1,1,2)
K ^FH(119.9,"B",$E(X,1,30),DA)
"^DD",119.9,119.9,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.9,119.9,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the SITE field.
"^DD",119.9,119.9,.01,3)
Type the Number 1
"^DD",119.9,119.9,.01,21,0)
^.001^1^1^3040223^^^^
"^DD",119.9,119.9,.01,21,1,0)
This value is always 1.
"^DD",119.9,119.9,.01,21,2,0)
Number of the File Manager.
"^DD",119.9,119.9,.01,"DT")
2890604
"^DD",119.9,119.9,3,0)
LABEL PRINTERS^119.93P^^D;0
"^DD",119.9,119.9,3,21,0)
^.001^1^1^3030214^^^^
"^DD",119.9,119.9,3,21,1,0)
This is a list of printers using label stock.
"^DD",119.9,119.9,4,0)
OUTPATIENT MEALS DIET1^P111'^FH(111,^0;2^Q
"^DD",119.9,119.9,4,21,0)
^.001^4^4^3040902^^^^
"^DD",119.9,119.9,4,21,1,0)
The outpatient meals will allow diet selection from 5 site parameter
"^DD",119.9,119.9,4,21,2,0)
fields to be set up at the individual site.  This field will be the first
"^DD",119.9,119.9,4,21,3,0)
allowable diet for ordering outpatient meals.  This first field will be
"^DD",119.9,119.9,4,21,4,0)
used as the default diet when ordering outpatient meals.
"^DD",119.9,119.9,4,"DT")
3030214
"^DD",119.9,119.9,5,0)
OUTPATIENT MEALS DIET2^P111'^FH(111,^0;3^Q
"^DD",119.9,119.9,5,21,0)
^.001^3^3^3040902^^^
"^DD",119.9,119.9,5,21,1,0)
The outpatient meals will allow diet selection from 5 site parameter
"^DD",119.9,119.9,5,21,2,0)
fields to be set up at the individual site.  This field will be the second
"^DD",119.9,119.9,5,21,3,0)
allowable diet for ordering outpatient meals.
"^DD",119.9,119.9,5,"DT")
3030214
"^DD",119.9,119.9,6,0)
OUTPATIENT MEALS DIET3^P111'^FH(111,^0;4^Q
"^DD",119.9,119.9,6,21,0)
^.001^3^3^3040902^^
"^DD",119.9,119.9,6,21,1,0)
The outpatient meals will allow diet selection from 5 site parameter
"^DD",119.9,119.9,6,21,2,0)
fields to be set up at the individual site.  This field will be the third
"^DD",119.9,119.9,6,21,3,0)
allowable diet for ordering outpatient meals.
"^DD",119.9,119.9,6,"DT")
3030214
"^DD",119.9,119.9,7,0)
OUTPATIENT MEALS DIET4^P111'^FH(111,^0;5^Q
"^DD",119.9,119.9,7,21,0)
^.001^3^3^3040902^^
"^DD",119.9,119.9,7,21,1,0)
The outpatient meals will allow diet selection from 5 site parameter
"^DD",119.9,119.9,7,21,2,0)
fields to be set up at the individual site.  This field will be the fourth
"^DD",119.9,119.9,7,21,3,0)
allowable diet for ordering outpatient meals.
"^DD",119.9,119.9,7,"DT")
3030214
"^DD",119.9,119.9,8,0)
OUTPATIENT MEALS DIET5^P111'^FH(111,^0;6^Q
"^DD",119.9,119.9,8,21,0)
^.001^3^3^3040902^^^
"^DD",119.9,119.9,8,21,1,0)
The outpatient meals will allow diet selection from 5 site parameter
"^DD",119.9,119.9,8,21,2,0)
fields to be set up at the individual site.  This field will be the fifth
"^DD",119.9,119.9,8,21,3,0)
allowable diet for ordering outpatient meals.
"^DD",119.9,119.9,8,"DT")
3030214
"^DD",119.9,119.9,9,0)
AUTHORIZOR 1^P200'^VA(200,^0;7^Q
"^DD",119.9,119.9,9,21,0)
^.001^5^5^3040902^^
"^DD",119.9,119.9,9,21,1,0)
This field will be used to store the name of the first authorizor for
"^DD",119.9,119.9,9,21,2,0)
special meals.  When a special meal is requested, if the requestor does
"^DD",119.9,119.9,9,21,3,0)
not have the authorization to print a special meal ticket, an alert will
"^DD",119.9,119.9,9,21,4,0)
be sent to the authorizors for action.  These 5 authorizors will also
"^DD",119.9,119.9,9,21,5,0)
need to be given the FHAUTH security key.
"^DD",119.9,119.9,9,"DT")
3030429
"^DD",119.9,119.9,10,0)
AUTHORIZOR 2^P200'^VA(200,^0;8^Q
"^DD",119.9,119.9,10,21,0)
^.001^5^5^3040902^^
"^DD",119.9,119.9,10,21,1,0)
This field will be used to store the name of the second authorizor for
"^DD",119.9,119.9,10,21,2,0)
special meals.  When a special meal is requested, if the requestor does
"^DD",119.9,119.9,10,21,3,0)
not have the authorization to print a special meal ticket, an alert will
"^DD",119.9,119.9,10,21,4,0)
be sent to the authorizors for action.  These 5 authorizors will also
"^DD",119.9,119.9,10,21,5,0)
need to be given the FHAUTH security key.
"^DD",119.9,119.9,10,"DT")
3030429
"^DD",119.9,119.9,11,0)
AUTHORIZOR 3^P200'^VA(200,^0;9^Q
"^DD",119.9,119.9,11,21,0)
^.001^5^5^3040902^^
"^DD",119.9,119.9,11,21,1,0)
This field will be used to store the name of the third authorizor for
"^DD",119.9,119.9,11,21,2,0)
special meals.  When a special meal is requested, if the requestor does
"^DD",119.9,119.9,11,21,3,0)
not have the authorization to print a special meal ticket, an alert will
"^DD",119.9,119.9,11,21,4,0)
be sent to the authorizors for action.  These 5 authorizors will also
"^DD",119.9,119.9,11,21,5,0)
need to be given the FHAUTH security key.
"^DD",119.9,119.9,11,"DT")
3030429
"^DD",119.9,119.9,12,0)
AUTHORIZOR 4^P200'^VA(200,^0;10^Q
"^DD",119.9,119.9,12,21,0)
^.001^5^5^3040902^^
"^DD",119.9,119.9,12,21,1,0)
This field will be used to store the name of the fourth authorizor for
"^DD",119.9,119.9,12,21,2,0)
special meals.  When a special meal is requested, if the requestor does
"^DD",119.9,119.9,12,21,3,0)
not have the authorization to print a special meal ticket, an alert will
"^DD",119.9,119.9,12,21,4,0)
be sent to the authorizors for action.  These 5 authorizors will also
"^DD",119.9,119.9,12,21,5,0)
need to be given the FHAUTH security key.
"^DD",119.9,119.9,12,"DT")
3030429
"^DD",119.9,119.9,13,0)
AUTHORIZOR 5^P200'^VA(200,^0;11^Q
"^DD",119.9,119.9,13,21,0)
^.001^5^5^3041015^^^
"^DD",119.9,119.9,13,21,1,0)
This field will be used to store the name of the fifth authorizor for
"^DD",119.9,119.9,13,21,2,0)
special meals.  When a special meal is requested, if the requestor does
"^DD",119.9,119.9,13,21,3,0)
not have the authorization to print a special meal ticket, an alert will
"^DD",119.9,119.9,13,21,4,0)
be sent to the authorizors for action.  These 5 authorizors will also
"^DD",119.9,119.9,13,21,5,0)
need to be given the FHAUTH security key.
"^DD",119.9,119.9,13,"DT")
3030429
"^DD",119.9,119.9,14,0)
EMPLOYEE CLASS^S^Y:YES;N:NO;^0;12^Q
"^DD",119.9,119.9,14,21,0)
^.001^2^2^3040909^^^^
"^DD",119.9,119.9,14,21,1,0)
This field stores whether or not the site assigns a charge to the
"^DD",119.9,119.9,14,21,2,0)
Employee Class.
"^DD",119.9,119.9,14,"DT")
3030630
"^DD",119.9,119.9,15,0)
PAID CLASS^S^Y:YES;N:NO;^0;13^Q
"^DD",119.9,119.9,15,21,0)
^.001^1^1^3040909^^^
"^DD",119.9,119.9,15,21,1,0)
This field stores whether or not the site assigns a charge to the Paid Class.
"^DD",119.9,119.9,15,"DT")
3040219
"^DD",119.9,119.9,16,0)
OOD CLASS^S^Y:YES;N:NO;^0;14^Q
"^DD",119.9,119.9,16,21,0)
^.001^2^2^3040909^^^
"^DD",119.9,119.9,16,21,1,0)
This field stores whether or not the site assigns a charge to the
"^DD",119.9,119.9,16,21,2,0)
OOD (Officer of the Day) Class.
"^DD",119.9,119.9,16,"DT")
3030630
"^DD",119.9,119.9,17,0)
VOLUNTEER CLASS^S^Y:YES;N:NO;^0;15^Q
"^DD",119.9,119.9,17,21,0)
^.001^2^2^3040909^^^
"^DD",119.9,119.9,17,21,1,0)
This field stores whether or not the site assigns a charge to the
"^DD",119.9,119.9,17,21,2,0)
Volunteer Class.
"^DD",119.9,119.9,17,"DT")
3040219
"^DD",119.9,119.9,18,0)
GRATUITOUS CLASS^S^Y:YES;N:NO;^0;16^Q
"^DD",119.9,119.9,18,21,0)
^.001^2^2^3040909^^^
"^DD",119.9,119.9,18,21,1,0)
This field stores whether or not the site assigns a charge to the
"^DD",119.9,119.9,18,21,2,0)
Gratuitous Class.
"^DD",119.9,119.9,18,"DT")
3040219
"^DD",119.9,119.9,22,0)
MULTIDIVISIONAL SITE?^S^Y:YES;N:NO;^0;20^Q
"^DD",119.9,119.9,22,21,0)
^^4^4^3031009^
"^DD",119.9,119.9,22,21,1,0)
This field will be used to determine if a site is multidivisional or not.
"^DD",119.9,119.9,22,21,2,0)
If set to YES, the multidivisional enhancements released in patch FH*5.0*39
"^DD",119.9,119.9,22,21,3,0)
will be used, which involves prompting for Communication Office.  If set to
"^DD",119.9,119.9,22,21,4,0)
NO, then the non-multidivisional routines, fields and files will be used.
"^DD",119.9,119.9,22,"DT")
3031009
"^DD",119.9,119.9,25,0)
EMPLOYEE BREAKFAST CHARGE^NJ6,2^^0;21^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,25,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,25,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,25,21,1,0)
This field stores the cost for the employee breakfast meal.
"^DD",119.9,119.9,25,"DT")
3040223
"^DD",119.9,119.9,26,0)
EMPLOYEE NOON CHARGE^NJ6,2^^0;22^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,26,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,26,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,26,21,1,0)
This field stores the cost for the employee noon meal.
"^DD",119.9,119.9,26,"DT")
3040223
"^DD",119.9,119.9,27,0)
EMPLOYEE EVENING CHARGE^NJ6,2^^0;23^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,27,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,27,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,27,21,1,0)
This field stores the cost for the employee evening meal.
"^DD",119.9,119.9,27,"DT")
3040223
"^DD",119.9,119.9,28,0)
PAID BREAKFAST CHARGE^NJ6,2^^0;24^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,28,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,28,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,28,21,1,0)
This field stores the cost for the paid breakfast meal.
"^DD",119.9,119.9,28,"DT")
3040223
"^DD",119.9,119.9,29,0)
PAID NOON CHARGE^NJ6,2^^0;25^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,29,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,29,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,29,21,1,0)
This field stores the cost for the paid noon meal.
"^DD",119.9,119.9,29,"DT")
3040223
"^DD",119.9,119.9,30,0)
PAID EVENING CHARGE^NJ6,2^^0;26^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,30,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,30,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,30,21,1,0)
This field stores the cost for the paid evening meal.
"^DD",119.9,119.9,30,"DT")
3040223
"^DD",119.9,119.9,31,0)
OOD BREAKFAST CHARGE^NJ6,2^^0;27^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,31,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,31,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,31,21,1,0)
This field stores the cost for the OOD breakfast meal.
"^DD",119.9,119.9,31,"DT")
3040223
"^DD",119.9,119.9,32,0)
OOD NOON CHARGE^NJ6,2^^0;28^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,32,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,32,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,32,21,1,0)
This field stores the cost for the OOD noon meal.
"^DD",119.9,119.9,32,"DT")
3040223
"^DD",119.9,119.9,33,0)
OOD EVENING MEAL^NJ6,2^^0;29^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,33,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,33,21,0)
^.001^1^1^3040223^^
"^DD",119.9,119.9,33,21,1,0)
This field stores the cost for the OOD evening meal.
"^DD",119.9,119.9,33,"DT")
3040223
"^DD",119.9,119.9,34,0)
VOLUNTEER BREAKFAST CHARGE^NJ6,2^^0;30^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,34,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,34,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,34,21,1,0)
This field stores the cost for the volunteer breakfast meal.
"^DD",119.9,119.9,34,"DT")
3040223
"^DD",119.9,119.9,35,0)
VOLUNTEER NOON CHARGE^NJ6,2^^0;31^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,35,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,35,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,35,21,1,0)
This field stores the cost for the volunteer noon meal.
"^DD",119.9,119.9,35,"DT")
3040223
"^DD",119.9,119.9,36,0)
VOLUNTEER EVENING CHARGE^NJ6,2^^0;32^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,36,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,36,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,36,21,1,0)
This field stores the cost for the volunteer evening meal.
"^DD",119.9,119.9,36,"DT")
3040223
"^DD",119.9,119.9,37,0)
GRATUITOUS BREAKFAST CHARGE^NJ6,2^^0;33^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,37,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,37,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,37,21,1,0)
This field stores the cost for the gratuitous breakfast meal.
"^DD",119.9,119.9,37,"DT")
3040223
"^DD",119.9,119.9,38,0)
GRATUITOUS NOON CHARGE^NJ6,2^^0;34^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,38,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,38,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,38,21,1,0)
This field stores the cost for the gratuitous noon meal.
"^DD",119.9,119.9,38,"DT")
3040223
"^DD",119.9,119.9,39,0)
GRATUITOUS EVENING CHARGE^NJ6,2^^0;35^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",119.9,119.9,39,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",119.9,119.9,39,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,39,21,1,0)
This field stores the cost for the gratuitous evening meal.
"^DD",119.9,119.9,39,"DT")
3040223
"^DD",119.9,119.9,70,0)
ASSESSMENT DEFAULT UNITS^S^E:ENGLISH;M:METRIC;^3;1^Q
"^DD",119.9,119.9,70,21,0)
^.001^2^2^3020927^^^
"^DD",119.9,119.9,70,21,1,0)
This field contains the default unit of measurement to be used
"^DD",119.9,119.9,70,21,2,0)
in performing Nutrition Assessments
"^DD",119.9,119.9,70,"DT")
2890604
"^DD",119.9,119.9,71,0)
# OF DAYS TO OBTAIN LAB DATA^NJ3,0^^3;2^K:+X'=X!(X>500)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.9,119.9,71,3)
Type a Number between 1 and 500, 0 Decimal Digits
"^DD",119.9,119.9,71,21,0)
^.001^3^3^3020927^^
"^DD",119.9,119.9,71,21,1,0)
This field contains the number of days backward for which a search
"^DD",119.9,119.9,71,21,2,0)
of laboratory data will be made. That is, only data obtained within
"^DD",119.9,119.9,71,21,3,0)
the last # of days will be displayed.
"^DD",119.9,119.9,71,"DT")
2890604
"^DD",119.9,119.9,74,0)
PRINT PROFILE AFTER SCREENING?^S^Y:YES;N:NO;A:ASK USER;^3;3^Q
"^DD",119.9,119.9,74,21,0)
^.001^4^4^3020927^^
"^DD",119.9,119.9,74,21,1,0)
This parameter determines whether the Nutrition Profile is printed
"^DD",119.9,119.9,74,21,2,0)
immediately following the printing of a screening form. If 'A' is
"^DD",119.9,119.9,74,21,3,0)
selected, the user will be asked to make a selection at the time
"^DD",119.9,119.9,74,21,4,0)
of printing screening forms.
"^DD",119.9,119.9,74,"DT")
2901015
"^DD",119.9,119.9,75,0)
OPTIONAL SCREENING LINE^F^^3;5^K:$L(X)>74!($L(X)<3) X
"^DD",119.9,119.9,75,3)
Answer must be 3-74 characters in length.
"^DD",119.9,119.9,75,21,0)
^.001^3^3^3020927^^
"^DD",119.9,119.9,75,21,1,0)
This field may contain a line of text which will be printed as
"^DD",119.9,119.9,75,21,2,0)
the last line of the S portion of the Nutrition Screening
"^DD",119.9,119.9,75,21,3,0)
form.
"^DD",119.9,119.9,75,"DT")
2891105
"^DD",119.9,119.9,80,0)
LAB TEST^119.9001P^^L;0
"^DD",119.9,119.9,80,21,0)
^.001^2^2^3030214^^^^
"^DD",119.9,119.9,80,21,1,0)
This multiple contains a list of laboratory tests which
"^DD",119.9,119.9,80,21,2,0)
are of interest to clinicians.
"^DD",119.9,119.9,85,0)
DRUG CLASSIFICATIONS^119.985P^^P;0
"^DD",119.9,119.9,85,21,0)
^.001^2^2^3030214^^^
"^DD",119.9,119.9,85,21,1,0)
This multiple contains drug classifications of interest
"^DD",119.9,119.9,85,21,2,0)
to clinicians.
"^DD",119.9,119.9,99,0)
HEADING ON BOTTOM OF TICKET?^S^Y:YES;N:NO;^4;1^Q
"^DD",119.9,119.9,99,21,0)
^.001^3^3^3020927^^
"^DD",119.9,119.9,99,21,1,0)
This field is optional and it is used to indicate whether the
"^DD",119.9,119.9,99,21,2,0)
heading should be printed on the bottom of the tray tickets and
"^DD",119.9,119.9,99,21,3,0)
diet cards.
"^DD",119.9,119.9,99,"DT")
2940926
"^DD",119.9,119.9,100,0)
WILL YOU USE TRAY TICKETS?^S^Y:YES;N:NO;^4;2^Q
"^DD",119.9,119.9,100,21,0)
^.001^8^8^3020927^^^^
"^DD",119.9,119.9,100,21,1,0)
This field is optional and it is used to indicate whether the user
"^DD",119.9,119.9,100,21,2,0)
wants to use the Tray Tickets or not.  If the answer is Yes, you will
"^DD",119.9,119.9,100,21,3,0)
be asked whether you want the heading for the Tray Tickets to
"^DD",119.9,119.9,100,21,4,0)
be printed on the bottom or not and also you will be receiving a
"^DD",119.9,119.9,100,21,5,0)
no diet pattern message on diet activity for patients that do
"^DD",119.9,119.9,100,21,6,0)
not have a diet pattern which is related to the tray tickets.
"^DD",119.9,119.9,100,21,7,0)
If the answer is No, you will not be asked the question and
"^DD",119.9,119.9,100,21,8,0)
receive the message.
"^DD",119.9,119.9,100,"DT")
2941028
"^DD",119.9,119.9,101,0)
OUTPATIENT MEALS INSTALLED^S^1:YES;0:NO;^CV;1^Q
"^DD",119.9,119.9,101,21,0)
^^1^1^3040223^
"^DD",119.9,119.9,101,21,1,0)
Field to note if outpatient meals build has been installed previously.
"^DD",119.9,119.9,101,"DT")
3040223
"^DD",119.9,119.9001,0)
LAB TEST SUB-FIELD^^5^6
"^DD",119.9,119.9001,0,"DT")
3001205
"^DD",119.9,119.9001,0,"IX","B",119.9001,.01)

"^DD",119.9,119.9001,0,"NM","LAB TEST")

"^DD",119.9,119.9001,0,"UP")
119.9
"^DD",119.9,119.9001,.01,0)
LAB TEST^M*P60'^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,5)[""CH"",""BO""[$P(^(0),U,3)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",119.9,119.9001,.01,1,0)
^.1
"^DD",119.9,119.9001,.01,1,1,0)
119.9001^B
"^DD",119.9,119.9001,.01,1,1,1)
S ^FH(119.9,DA(1),"L","B",$E(X,1,30),DA)=""
"^DD",119.9,119.9001,.01,1,1,2)
K ^FH(119.9,DA(1),"L","B",$E(X,1,30),DA)
"^DD",119.9,119.9001,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.9,119.9001,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the LAB TEST field.
"^DD",119.9,119.9001,.01,3)

"^DD",119.9,119.9001,.01,12)
Can only select Chemistry tests
"^DD",119.9,119.9001,.01,12.1)
S DIC("S")="I $P(^(0),U,5)[""CH"",""BO""[$P(^(0),U,3)"
"^DD",119.9,119.9001,.01,21,0)
^^2^2^2890709^
"^DD",119.9,119.9001,.01,21,1,0)
This field is a pointer to File 60, Lab Tests, and is a test
"^DD",119.9,119.9001,.01,21,2,0)
of interest to clinicians.
"^DD",119.9,119.9001,.01,"DT")
2890629
"^DD",119.9,119.9001,1,0)
SPECIMEN^RFXO^^0;2^K:$L(X)>10!($L(X)<1) X I $D(X) S P60=+^FH(119.9,1,"L",DA,0),DIC="^LAB(60,P60,1,",DIC(0)="QEM" D ^DIC S X=+Y K:Y<1 X K P60
"^DD",119.9,119.9001,1,2)
S Y(0)=Y S Y=$S($D(^LAB(61,+Y,0)):$P(^(0),"^",1),1:Y)
"^DD",119.9,119.9001,1,2.1)
S Y=$S($D(^LAB(61,+Y,0)):$P(^(0),"^",1),1:Y)
"^DD",119.9,119.9001,1,3)

"^DD",119.9,119.9001,1,4)
N DIC,DO,D,P60 S P60=+^FH(119.9,1,"L",DA,0),DIC="^LAB(60,P60,1,",DIC(0)="Q",D="B" K DO D DQ^DICQ S DIC=DIE
"^DD",119.9,119.9001,1,21,0)
^^2^2^2890709^
"^DD",119.9,119.9001,1,21,1,0)
This field points to the specimen/typology file and indicates which
"^DD",119.9,119.9001,1,21,2,0)
specimen of the selected lab test is desired.
"^DD",119.9,119.9001,1,"DT")
2890628
"^DD",119.9,119.9001,2,0)
PRINT ON ASSESSMENT?^S^Y:YES;N:NO;^0;3^Q
"^DD",119.9,119.9001,2,21,0)
^^2^2^2890709^
"^DD",119.9,119.9001,2,21,1,0)
This field, when answered YES, will permit printing of the lab
"^DD",119.9,119.9001,2,21,2,0)
results on the Nutrition Assessment form.
"^DD",119.9,119.9001,2,"DT")
2890709
"^DD",119.9,119.9001,3,0)
PRINT ON SCREENING?^S^Y:YES;N:NO;^0;4^Q
"^DD",119.9,119.9001,3,21,0)
^^2^2^2890709^
"^DD",119.9,119.9001,3,21,1,0)
This field, when answered YES, will permit printing of the lab
"^DD",119.9,119.9001,3,21,2,0)
results on the Nutrition Screening form.
"^DD",119.9,119.9001,3,"DT")
2890709
"^DD",119.9,119.9001,4,0)
PRINT ORDER^NJ2,0^^0;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.9,119.9001,4,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",119.9,119.9001,4,21,0)
^^9^9^3010312^
"^DD",119.9,119.9001,4,21,1,0)
This number, called Print Order:
"^DD",119.9,119.9001,4,21,2,0)
(a) will allow grouping of similar lab tests;
"^DD",119.9,119.9001,4,21,3,0)
(b) will allow selection of only the lab test with the latest value from
"^DD",119.9,119.9001,4,21,4,0)
among the group of tests with the same number;
"^DD",119.9,119.9001,4,21,5,0)
(c) will also specify the print order of the lab test  in Nutrition
"^DD",119.9,119.9001,4,21,6,0)
Profile report.
"^DD",119.9,119.9001,4,21,7,0)
If the value of Print Order is not defined for the test then the system
"^DD",119.9,119.9001,4,21,8,0)
first prints all numbered tests and then prints tests without numbers in
"^DD",119.9,119.9001,4,21,9,0)
order providing by Lab package.
"^DD",119.9,119.9001,4,"DT")
3010312
"^DD",119.9,119.9001,5,0)
SERUM ALBUMIN?^S^Y:YES;N:NO;^0;6^Q
"^DD",119.9,119.9001,5,21,0)
^.001^2^2^3001205^^
"^DD",119.9,119.9001,5,21,1,0)
This field, if answered YES, indicates that the lab test
"^DD",119.9,119.9001,5,21,2,0)
is a serum albumin test.
"^DD",119.9,119.9001,5,"DT")
3001205
"^DD",119.9,119.93,0)
LABEL PRINTERS SUB-FIELD^^1^2
"^DD",119.9,119.93,0,"DT")
3020927
"^DD",119.9,119.93,0,"IX","B",119.93,.01)

"^DD",119.9,119.93,0,"NM","LABEL PRINTERS")

"^DD",119.9,119.93,0,"UP")
119.9
"^DD",119.9,119.93,.01,0)
LABEL PRINTERS^MP3.5'X^%ZIS(1,^0;1^I $D(X) S DINUM=X
"^DD",119.9,119.93,.01,1,0)
^.1
"^DD",119.9,119.93,.01,1,1,0)
119.93^B
"^DD",119.9,119.93,.01,1,1,1)
S ^FH(119.9,DA(1),"D","B",$E(X,1,30),DA)=""
"^DD",119.9,119.93,.01,1,1,2)
K ^FH(119.9,DA(1),"D","B",$E(X,1,30),DA)
"^DD",119.9,119.93,.01,21,0)
^^3^3^2911204^
"^DD",119.9,119.93,.01,21,1,0)
This field is a pointer to the Device File and indicates a printer used
"^DD",119.9,119.93,.01,21,2,0)
for printing diet labels, tubefeeding labels, supplemental feeding labels
"^DD",119.9,119.93,.01,21,3,0)
or other labels.
"^DD",119.9,119.93,.01,"DT")
2911129
"^DD",119.9,119.93,1,0)
SIZE OF LABELS^S^1:3-1/2 x 15/16 (Single strip labels);2:4 x 1-7/16 (Single strip labels);3:2-5/8 x 1 (Laser labels - 30 labels per sheet);4:4 x 1-1/3 (Laser labels - 14 labels per sheet);^0;2^Q
"^DD",119.9,119.93,1,21,0)
^.001^7^7^3030214^^^^
"^DD",119.9,119.93,1,21,1,0)
This field indicates the size and type of label stock on the printer.
"^DD",119.9,119.93,1,21,2,0)
You may choose from the following selections:
"^DD",119.9,119.93,1,21,3,0)

"^DD",119.9,119.93,1,21,4,0)
1)  3-1/2 x 15/16 - Single strip track-fed labels.
"^DD",119.9,119.93,1,21,5,0)
2)  4 x 1-7/16    - Single strip track-fed labels.
"^DD",119.9,119.93,1,21,6,0)
3)  2-5/8 x 1 - Laser label sheets, ie AVERY 5160, 30 labels per sheet.
"^DD",119.9,119.93,1,21,7,0)
4)  4 x 1-1/3 - Laser label sheets, ie AVERY 5162, 14 labels per sheet.
"^DD",119.9,119.93,1,"DT")
3020927
"^DD",119.9,119.985,0)
DRUG CLASSIFICATIONS SUB-FIELD^^.01^1
"^DD",119.9,119.985,0,"IX","B",119.985,.01)

"^DD",119.9,119.985,0,"NM","DRUG CLASSIFICATIONS")

"^DD",119.9,119.985,0,"UP")
119.9
"^DD",119.9,119.985,.01,0)
DRUG CLASSIFICATIONS^MP50.605'^PS(50.605,^0;1^Q
"^DD",119.9,119.985,.01,1,0)
^.1
"^DD",119.9,119.985,.01,1,1,0)
119.985^B
"^DD",119.9,119.985,.01,1,1,1)
S ^FH(119.9,DA(1),"P","B",$E(X,1,30),DA)=""
"^DD",119.9,119.985,.01,1,1,2)
K ^FH(119.9,DA(1),"P","B",$E(X,1,30),DA)
"^DD",119.9,119.985,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.9,119.985,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the DRUG CLASSIFICATIONS field.
"^DD",119.9,119.985,.01,21,0)
^^2^2^2890709^
"^DD",119.9,119.985,.01,21,1,0)
This field is a pointer to File 50.605, VA Drug Classification
"^DD",119.9,119.985,.01,21,2,0)
and is a classification of interest to clinicians.
"^DD",119.9,119.985,.01,"DT")
2890709
"^DIC",111,111,0)
DIETS^111s
"^DIC",111,111,0,"GL")
^FH(111,
"^DIC",111,111,"%D",0)
^^5^5^2960328^^
"^DIC",111,111,"%D",1,0)
This file contains a list of all of the diet modifications allowed
"^DIC",111,111,"%D",2,0)
by the using facility. Associated with each diet are characteristics
"^DIC",111,111,"%D",3,0)
such as alternate names, an abbreviated name, whether a clinician
"^DIC",111,111,"%D",4,0)
is to be bulletined when ordered, and a diet precedence which
"^DIC",111,111,"%D",5,0)
is used to prevent diet conflicts and as a printing sequence order.
"^DIC",111,"B","DIETS",111)

"^DIC",111.1,111.1,0)
DIET PATTERNS^111.1
"^DIC",111.1,111.1,0,"GL")
^FH(111.1,
"^DIC",111.1,111.1,"%D",0)
^^2^2^2940121^
"^DIC",111.1,111.1,"%D",1,0)
This file contains diet patterns.  The entries for a specific pattern
"^DIC",111.1,111.1,"%D",2,0)
represent changes from the production diet for this particular pattern.
"^DIC",111.1,"B","DIET PATTERNS",111.1)

"^DIC",112,112,0)
FOOD NUTRIENTS^112
"^DIC",112,112,0,"GL")
^FHNU(
"^DIC",112,112,"%D",0)
^^3^3^2871124^
"^DIC",112,112,"%D",1,0)
This file contains both standard USDA nutrient data based upon
"^DIC",112,112,"%D",2,0)
Handbook 456 and Revised Handbook 8 as well as user entered data.
"^DIC",112,112,"%D",3,0)
The standard data includes 32 common nutrients.
"^DIC",112,"B","FOOD NUTRIENTS",112)

"^DIC",112.2,112.2,0)
DRI VALUES^112.2
"^DIC",112.2,112.2,0,"GL")
^FH(112.2,
"^DIC",112.2,112.2,"%D",0)
^1.001^6^6^3020408^^
"^DIC",112.2,112.2,"%D",1,0)
This file contains the values of the Dietary Reference Intakes (DRI). In
"^DIC",112.2,112.2,"%D",2,0)
1997, the Food and Nutrition Board began releasing updated recommendations
"^DIC",112.2,112.2,"%D",3,0)
for nutrient intake levels that apply to healthy individuals under a new
"^DIC",112.2,112.2,"%D",4,0)
framework called Dietary Reference Intakes.  For nutrients that have not
"^DIC",112.2,112.2,"%D",5,0)
yet been revised as DRI (protein for example) the 1989 RDA values are the
"^DIC",112.2,112.2,"%D",6,0)
most current recommendations and are used here.
"^DIC",112.2,"B","DRI VALUES",112.2)

"^DIC",112.6,112.6,0)
USER MENU^112.6I
"^DIC",112.6,112.6,0,"GL")
^FHUM(
"^DIC",112.6,112.6,"%D",0)
^^2^2^2871124^
"^DIC",112.6,112.6,"%D",1,0)
This file contains menus of food items, classified by day and meal,
"^DIC",112.6,112.6,"%D",2,0)
which are saved for nutrient analysis.
"^DIC",112.6,"B","USER MENU",112.6)

"^DIC",113,113,0)
INGREDIENT^113
"^DIC",113,113,0,"GL")
^FHING(
"^DIC",113,113,"%D",0)
^^6^6^2950221^^
"^DIC",113,113,"%D",1,0)
This file is the master list of ingredients used in preparing
"^DIC",113,113,"%D",2,0)
recipes. It contains purchasing information, such as stock number
"^DIC",113,113,"%D",3,0)
and vendor, issuance data such as the issuing unit, and various
"^DIC",113,113,"%D",4,0)
conversion factors. Nutritive data such as food group, poundage
"^DIC",113,113,"%D",5,0)
factors, and a pointer to the analogous food nutrient item in
"^DIC",113,113,"%D",6,0)
File 112 are also included.
"^DIC",113,"B","INGREDIENT",113)

"^DIC",113.1,113.1,0)
STORAGE LOCATION^113.1
"^DIC",113.1,113.1,0,"GL")
^FH(113.1,
"^DIC",113.1,113.1,"%D",0)
^^3^3^2880424^
"^DIC",113.1,113.1,"%D",1,0)
This is the file of storage locations where ingredients are
"^DIC",113.1,113.1,"%D",2,0)
stored by the dietetic service. It is primarily used to sort
"^DIC",113.1,113.1,"%D",3,0)
various ingredient pull lists.
"^DIC",113.1,"B","STORAGE LOCATION",113.1)

"^DIC",113.2,113.2,0)
FH VENDOR^113.2
"^DIC",113.2,113.2,0,"GL")
^FH(113.2,
"^DIC",113.2,113.2,"%D",0)
^^3^3^2880717^^
"^DIC",113.2,113.2,"%D",1,0)
This file contains basic data on the various vendors supplying
"^DIC",113.2,113.2,"%D",2,0)
ingredients to the Dietetic Service. It contains address, telephone
"^DIC",113.2,113.2,"%D",3,0)
numbers and name of contacts.
"^DIC",113.2,"B","FH VENDOR",113.2)

"^DIC",114,114,0)
RECIPE^114
"^DIC",114,114,0,"GL")
^FH(114,
"^DIC",114,114,"%D",0)
^^3^3^2950221^^
"^DIC",114,114,"%D",1,0)
This file contains all recipes necessary to build meals. Each
"^DIC",114,114,"%D",2,0)
recipe consists of basic data concerning the recipe, various
"^DIC",114,114,"%D",3,0)
ingredients, and may also contain 'embedded' recipes.
"^DIC",114,"B","RECIPE",114)

"^DIC",114.1,114.1,0)
RECIPE CATEGORY^114.1
"^DIC",114.1,114.1,0,"GL")
^FH(114.1,
"^DIC",114.1,114.1,"%D",0)
^^3^3^2880515^
"^DIC",114.1,114.1,"%D",1,0)
This file contains a basic list of categorizations which may
"^DIC",114.1,114.1,"%D",2,0)
be applied to recipes. It is primarily used to sort and/or
"^DIC",114.1,114.1,"%D",3,0)
determine the order in which lists of recipes will print.
"^DIC",114.1,"B","RECIPE CATEGORY",114.1)

"^DIC",114.2,114.2,0)
PREPARATION AREA^114.2
"^DIC",114.2,114.2,0,"GL")
^FH(114.2,
"^DIC",114.2,114.2,"%D",0)
^^5^5^2880515^
"^DIC",114.2,114.2,"%D",1,0)
This file contains a list of areas in which food is prepared.
"^DIC",114.2,114.2,"%D",2,0)
Recipes may be classified by preparation area and this file
"^DIC",114.2,114.2,"%D",3,0)
is used to sort recipes into the various preparation areas
"^DIC",114.2,114.2,"%D",4,0)
as well as determine the order in which various lists will
"^DIC",114.2,114.2,"%D",5,0)
print.
"^DIC",114.2,"B","PREPARATION AREA",114.2)

"^DIC",114.3,114.3,0)
SERVING UTENSIL^114.3
"^DIC",114.3,114.3,0,"GL")
^FH(114.3,
"^DIC",114.3,114.3,"%D",0)
^^4^4^2880515^
"^DIC",114.3,114.3,"%D",1,0)
This file contains a list of basic serving utensils. Recipes
"^DIC",114.3,114.3,"%D",2,0)
use this file to indicate the most appropriate serving utensil.
"^DIC",114.3,114.3,"%D",3,0)
The utensil name is printed on various reports for use by
"^DIC",114.3,114.3,"%D",4,0)
serving personnel.
"^DIC",114.3,"B","SERVING UTENSIL",114.3)

"^DIC",114.4,114.4,0)
EQUIPMENT^114.4
"^DIC",114.4,114.4,0,"GL")
^FH(114.4,
"^DIC",114.4,114.4,"%D",0)
^^3^3^2880515^
"^DIC",114.4,114.4,"%D",1,0)
This file contains a list of basic equipment used in the preparation
"^DIC",114.4,114.4,"%D",2,0)
of recipes. A recipe may point to this list to indicate the
"^DIC",114.4,114.4,"%D",3,0)
primary type of equipment used in the recipe preparation.
"^DIC",114.4,"B","EQUIPMENT",114.4)

"^DIC",115,115,0)
NUTRITION PERSON^115
"^DIC",115,115,0,"GL")
^FHPT(
"^DIC",115,115,"%D",0)
^1.001^7^7^3040212^^^^
"^DIC",115,115,"%D",1,0)
This file contains all dietetic orders for each admission of a
"^DIC",115,115,"%D",2,0)
patient. It includes diet orders, consult requests, supplemental
"^DIC",115,115,"%D",3,0)
feedings, early/late tray requests, and tubefeedings. It also
"^DIC",115,115,"%D",4,0)
contains any food allergies entered for the patient.
"^DIC",115,115,"%D",5,0)

"^DIC",115,115,"%D",6,0)
This file will also be used to store outpatient data for individuals
"^DIC",115,115,"%D",7,0)
served in the outpatient meals functionality.
"^DIC",115,"B","NUTRITION PERSON",115)

"^DIC",115.2,115.2,0)
FOOD PREFERENCES^115.2
"^DIC",115.2,115.2,0,"GL")
^FH(115.2,
"^DIC",115.2,115.2,"%D",0)
^^5^5^2950221^^^^
"^DIC",115.2,115.2,"%D",1,0)
This file contains the items which can be selected as patient
"^DIC",115.2,115.2,"%D",2,0)
preference items. It contains both items which can be selected,
"^DIC",115.2,115.2,"%D",3,0)
such as coffee or tea, as well as food preferences (such as 
"^DIC",115.2,115.2,"%D",4,0)
no liver) which will result in certain recipes being excluded
"^DIC",115.2,115.2,"%D",5,0)
for the patient.
"^DIC",115.2,"B","FOOD PREFERENCES",115.2)

"^DIC",115.3,115.3,0)
NUTRITION CLASSIFICATION^115.3
"^DIC",115.3,115.3,0,"GL")
^FH(115.3,
"^DIC",115.3,115.3,"%D",0)
^^2^2^2890709^^^^
"^DIC",115.3,115.3,"%D",1,0)
This file contains site-specific nutrition classifications used in
"^DIC",115.3,115.3,"%D",2,0)
nutrition assessment and screening.
"^DIC",115.3,"B","NUTRITION CLASSIFICATION",115.3)

"^DIC",115.4,115.4,0)
NUTRITION STATUS^115.4I
"^DIC",115.4,115.4,0,"GL")
^FH(115.4,
"^DIC",115.4,115.4,"%D",0)
^^2^2^2950919^^^^
"^DIC",115.4,115.4,"%D",1,0)
This file contains the four nutrition statuses of the established
"^DIC",115.4,115.4,"%D",2,0)
guidelines that are used in nutrition assessment and screening.
"^DIC",115.4,"B","NUTRITION STATUS",115.4)

"^DIC",115.5,115.5,0)
DIETETIC NUTRITION PLAN^115.5
"^DIC",115.5,115.5,0,"GL")
^FH(115.5,
"^DIC",115.5,115.5,"%D",0)
^^2^2^2890709^
"^DIC",115.5,115.5,"%D",1,0)
This file contains a list of nutrition plan actions which are
"^DIC",115.5,115.5,"%D",2,0)
listed on the Nutrition Screening form.
"^DIC",115.5,"B","DIETETIC NUTRITION PLAN",115.5)

"^DIC",115.6,115.6,0)
ENCOUNTER TYPES^115.6s
"^DIC",115.6,115.6,0,"GL")
^FH(115.6,
"^DIC",115.6,115.6,"%D",0)
^^3^3^2920623^^
"^DIC",115.6,115.6,"%D",1,0)
This file contains a list of types of dietetic encounters,
"^DIC",115.6,115.6,"%D",2,0)
or events, which are used to account for many of the professional
"^DIC",115.6,115.6,"%D",3,0)
activities of dietetic personnel.
"^DIC",115.6,"B","ENCOUNTER TYPES",115.6)

"^DIC",115.7,115.7,0)
DIETETIC ENCOUNTERS^115.7
"^DIC",115.7,115.7,0,"GL")
^FHEN(
"^DIC",115.7,115.7,"%",0)
^1.005^^
"^DIC",115.7,115.7,"%D",0)
^^4^4^2920623^^^
"^DIC",115.7,115.7,"%D",1,0)
This file contains the various dietetic encounters entered
"^DIC",115.7,115.7,"%D",2,0)
by dietetics personnel. It includes patient-related events,
"^DIC",115.7,115.7,"%D",3,0)
such as diet instructions, as well as non-patient-related
"^DIC",115.7,115.7,"%D",4,0)
events such as talks to the community.
"^DIC",115.7,"B","DIETETIC ENCOUNTERS",115.7)

"^DIC",116,116,0)
MENU CYCLE^116
"^DIC",116,116,0,"GL")
^FH(116,
"^DIC",116,116,"%D",0)
^^4^4^2880515^
"^DIC",116,116,"%D",1,0)
A menu cycle consists of some specified number of days each day
"^DIC",116,116,"%D",2,0)
of which is associated with a breakfast, noon, and evening meal.
"^DIC",116,116,"%D",3,0)
An effective date determines the start of the cycle and it will
"^DIC",116,116,"%D",4,0)
repeat until the effective date of another menu cycle begins.
"^DIC",116,"B","MENU CYCLE",116)

"^DIC",116.1,116.1,0)
MEAL^116.1
"^DIC",116.1,116.1,0,"GL")
^FH(116.1,
"^DIC",116.1,116.1,"%D",0)
^^6^6^2880515^
"^DIC",116.1,116.1,"%D",1,0)
This file contains the various meals served by the institution. A
"^DIC",116.1,116.1,"%D",2,0)
meal consists of all recipes prepared for a breakfast, noon, or
"^DIC",116.1,116.1,"%D",3,0)
evening meal as well as the production diets associated with
"^DIC",116.1,116.1,"%D",4,0)
each recipe. In turn, the production diet entry may indicate the
"^DIC",116.1,116.1,"%D",5,0)
percentage of that recipe that is to be served in a cafeteria
"^DIC",116.1,116.1,"%D",6,0)
or by tray.
"^DIC",116.1,"B","MEAL",116.1)

"^DIC",116.2,116.2,0)
PRODUCTION DIET^116.2
"^DIC",116.2,116.2,0,"GL")
^FH(116.2,
"^DIC",116.2,116.2,"%D",0)
^^3^3^2871124^
"^DIC",116.2,116.2,"%D",1,0)
This file contains a list of the production diets which are the
"^DIC",116.2,116.2,"%D",2,0)
basic diets actually prepared and from which the wide variety
"^DIC",116.2,116.2,"%D",3,0)
of clinical diet modifications are derived.
"^DIC",116.2,"B","PRODUCTION DIET",116.2)

"^DIC",116.3,116.3,0)
HOLIDAY MEALS^116.3
"^DIC",116.3,116.3,0,"GL")
^FH(116.3,
"^DIC",116.3,116.3,"%D",0)
^^5^5^2880515^
"^DIC",116.3,116.3,"%D",1,0)
This file consists of a list of holiday dates for which special
"^DIC",116.3,116.3,"%D",2,0)
meals are prepared. It consists of the holiday date, name, and
"^DIC",116.3,116.3,"%D",3,0)
allows for entry of a breakfast, noon, and/or evening meal
"^DIC",116.3,116.3,"%D",4,0)
which, if present, will override the normal menu cycle meals
"^DIC",116.3,116.3,"%D",5,0)
on that date.
"^DIC",116.3,"B","HOLIDAY MEALS",116.3)

"^DIC",117,117,0)
MEALS SERVED^117D
"^DIC",117,117,0,"GL")
^FH(117,
"^DIC",117,117,"%",0)
^1.005^^
"^DIC",117,117,"%D",0)
^^3^3^3030121^
"^DIC",117,117,"%D",1,0)
This file contains the statistical data necessary to prepare the
"^DIC",117,117,"%D",2,0)
Served Meals Report and the Staffing Data Report. Data
"^DIC",117,117,"%D",3,0)
is saved for each date.
"^DIC",117,"B","MEALS SERVED",117)

"^DIC",117.1,117.1,0)
STAFFING DATA^117.1D
"^DIC",117.1,117.1,0,"GL")
^FH(117.1,
"^DIC",117.1,117.1,"%",0)
^1.005^^
"^DIC",117.1,117.1,"%D",0)
^^2^2^3030306^
"^DIC",117.1,117.1,"%D",1,0)
This file contains the statistical data necessary to prepare the
"^DIC",117.1,117.1,"%D",2,0)
Staffing Data report. Data is saved for each date.
"^DIC",117.1,"B","STAFFING DATA",117.1)

"^DIC",117.2,117.2,0)
DIETETIC COST OF MEALS^117.2D
"^DIC",117.2,117.2,0,"GL")
^FH(117.2,
"^DIC",117.2,117.2,"%D",0)
^^4^4^2920623^^^^
"^DIC",117.2,117.2,"%D",1,0)
This file is used to store the monthly costs of the various
"^DIC",117.2,117.2,"%D",2,0)
food groups. Data is used to calculate the cost of meals
"^DIC",117.2,117.2,"%D",3,0)
served as well as ensure an adequate distribution of
"^DIC",117.2,117.2,"%D",4,0)
food across the food groups.
"^DIC",117.2,"B","DIETETIC COST OF MEALS",117.2)

"^DIC",117.3,117.3,0)
ANNUAL REPORT^117.3D
"^DIC",117.3,117.3,0,"GL")
^FH(117.3,
"^DIC",117.3,117.3,"%D",0)
^^4^4^2950223^^^^
"^DIC",117.3,117.3,"%D",1,0)
The Annual Dietetic Report is designed to facilitate data gathering
"^DIC",117.3,117.3,"%D",2,0)
and to eliminate information that has been discontinued or deemed
"^DIC",117.3,117.3,"%D",3,0)
irrelevant.  The report will be compiled manually and submitted to
"^DIC",117.3,117.3,"%D",4,0)
Central office Dietetics through regular mail.
"^DIC",117.3,"B","ANNUAL REPORT",117.3)

"^DIC",117.4,117.4,0)
DIETETIC REPORT CATEGORIES^117.4
"^DIC",117.4,117.4,0,"GL")
^FH(117.4,
"^DIC",117.4,117.4,"%D",0)
^^3^3^2920623^^
"^DIC",117.4,117.4,"%D",1,0)
This file contains the categories, Specialized Medical Programs,
"^DIC",117.4,117.4,"%D",2,0)
Primary Delivery System, Primary Production System, and the
"^DIC",117.4,117.4,"%D",3,0)
Dietetic Service Equipment.
"^DIC",117.4,"B","DIETETIC REPORT CATEGORIES",117.4)

"^DIC",118,118,0)
SUPPLEMENTAL FEEDINGS^118sI
"^DIC",118,118,0,"GL")
^FH(118,
"^DIC",118,118,"%D",0)
^^4^4^2871124^
"^DIC",118,118,"%D",1,0)
This file contains all items served as supplemental feedings.
"^DIC",118,118,"%D",2,0)
When appropriate, it may include combinations such as ice cream
"^DIC",118,118,"%D",3,0)
with spoon. Items designed for bulk delivery to the wards are
"^DIC",118,118,"%D",4,0)
also contained in this file.
"^DIC",118,"B","SUPPLEMENTAL FEEDINGS",118)

"^DIC",118.1,118.1,0)
SUPPLEMENTAL FEEDING MENU^118.1sI
"^DIC",118.1,118.1,0,"GL")
^FH(118.1,
"^DIC",118.1,118.1,"%D",0)
^^5^5^2871124^
"^DIC",118.1,118.1,"%D",1,0)
This file contains a pattern of supplemental feedings (up to four
"^DIC",118.1,118.1,"%D",2,0)
items for each of three time periods) which are often requested
"^DIC",118.1,118.1,"%D",3,0)
in common situations (e.g., a diabetic patient) and avoids the
"^DIC",118.1,118.1,"%D",4,0)
necessity of individually selecting the various items when
"^DIC",118.1,118.1,"%D",5,0)
ordering supplemental feedings.
"^DIC",118.1,"B","SUPPLEMENTAL FEEDING MENU",118.1)

"^DIC",118.2,118.2,0)
TUBEFEEDING^118.2sI
"^DIC",118.2,118.2,0,"GL")
^FH(118.2,
"^DIC",118.2,118.2,"%D",0)
^^3^3^2871124^
"^DIC",118.2,118.2,"%D",1,0)
This file contains the products commonly used for tube-feedings
"^DIC",118.2,118.2,"%D",2,0)
as well as their characteristics such as Kcals/cc, cost, and
"^DIC",118.2,118.2,"%D",3,0)
synonyms.
"^DIC",118.2,"B","TUBEFEEDING",118.2)

"^DIC",118.3,118.3,0)
STANDING ORDERS^118.3sI
"^DIC",118.3,118.3,0,"GL")
^FH(118.3,
"^DIC",118.3,118.3,"%D",0)
^^3^3^2871124^
"^DIC",118.3,118.3,"%D",1,0)
This is a list of the common standing orders (often called add-ons
"^DIC",118.3,118.3,"%D",2,0)
or specials) which may be ordered for a patient. It may include
"^DIC",118.3,118.3,"%D",3,0)
such things as 'double portions' or preferences such as 'no fish.'
"^DIC",118.3,"B","STANDING ORDERS",118.3)

"^DIC",119,119,0)
DIETITIAN TICKLER FILE^119P
"^DIC",119,119,0,"GL")
^FH(119,
"^DIC",119,119,"%D",0)
^^4^4^2910820^
"^DIC",119,119,"%D",1,0)
This file contains entries relating to required reviews for
"^DIC",119,119,"%D",2,0)
each dietitian response for a ward or group of wards. It can
"^DIC",119,119,"%D",3,0)
also be used to record personal or non-patient related
"^DIC",119,119,"%D",4,0)
entries.
"^DIC",119,"B","DIETITIAN TICKLER FILE",119)

"^DIC",119.1,119.1,0)
UNITS^119.1
"^DIC",119.1,119.1,0,"GL")
^FH(119.1,
"^DIC",119.1,119.1,"%D",0)
^^2^2^2880515^
"^DIC",119.1,119.1,"%D",1,0)
This file consists of a list of units used by the ingredient file
"^DIC",119.1,119.1,"%D",2,0)
to indicate the dietetic issue unit.
"^DIC",119.1,"B","UNITS",119.1)

"^DIC",119.4,119.4,0)
ISOLATION/PRECAUTION TYPE^119.4sI
"^DIC",119.4,119.4,0,"GL")
^FH(119.4,
"^DIC",119.4,119.4,"%D",0)
^^5^5^2871124^
"^DIC",119.4,119.4,"%D",1,0)
This file contains the list of isolation/precaution types, as
"^DIC",119.4,119.4,"%D",2,0)
commonly identified by medical personnel, and indicates the
"^DIC",119.4,119.4,"%D",3,0)
characteristics of those types important to the Dietetic
"^DIC",119.4,119.4,"%D",4,0)
Service such as type of china and appropriate tray delivery
"^DIC",119.4,119.4,"%D",5,0)
person.
"^DIC",119.4,"B","ISOLATION/PRECAUTION TYPE",119.4)

"^DIC",119.5,119.5,0)
DIETETIC CONSULTS^119.5sI
"^DIC",119.5,119.5,0,"GL")
^FH(119.5,
"^DIC",119.5,119.5,"%D",0)
^^3^3^2871124^
"^DIC",119.5,119.5,"%D",1,0)
This file contains the list of types of dietetic consultations
"^DIC",119.5,119.5,"%D",2,0)
performed as well as 'time-units' necessary to complete such
"^DIC",119.5,119.5,"%D",3,0)
consultations for workload purposes.
"^DIC",119.5,"B","DIETETIC CONSULTS",119.5)

"^DIC",119.6,119.6,0)
NUTRITION LOCATION^119.6P
"^DIC",119.6,119.6,0,"GL")
^FH(119.6,
"^DIC",119.6,119.6,"%",0)
^1.005^^
"^DIC",119.6,119.6,"%D",0)
^1.001^8^8^3040818^^^^
"^DIC",119.6,119.6,"%D",1,0)
This file is a list of wards in the hospital and associated room-beds
"^DIC",119.6,119.6,"%D",2,0)
and contains various dietetic specific information such
"^DIC",119.6,119.6,"%D",3,0)
as the assigned clinician, bulk nourishments for the ward, and
"^DIC",119.6,119.6,"%D",4,0)
which Service Point, Communication Office, and Supplemental Feeding
"^DIC",119.6,119.6,"%D",5,0)
Site is assigned responsibility for the ward.
"^DIC",119.6,119.6,"%D",6,0)

"^DIC",119.6,119.6,"%D",7,0)
This file will also be used to store outpatient locations necessary
"^DIC",119.6,119.6,"%D",8,0)
for the outpatient meals enhancement.
"^DIC",119.6,"B","NUTRITION LOCATION",119.6)

"^DIC",119.71,119.71,0)
PRODUCTION FACILITY^119.71
"^DIC",119.71,119.71,0,"GL")
^FH(119.71,
"^DIC",119.71,119.71,"%D",0)
^^3^3^2911204^
"^DIC",119.71,119.71,"%D",1,0)
This file is a list of Production Facilities and associated
"^DIC",119.71,119.71,"%D",2,0)
parameters. A Production Facility is generally a main kitchen where
"^DIC",119.71,119.71,"%D",3,0)
bulk food is prepared for use by Service Points.
"^DIC",119.71,"B","PRODUCTION FACILITY",119.71)

"^DIC",119.72,119.72,0)
SERVICE POINT^119.72
"^DIC",119.72,119.72,0,"GL")
^FH(119.72,
"^DIC",119.72,119.72,"%D",0)
^^3^3^2911204^
"^DIC",119.72,119.72,"%D",1,0)
This file is a list of Service Points and associated parameters.
"^DIC",119.72,119.72,"%D",2,0)
A Service Point is a tray assembly line or cafeteria where bulk
"^DIC",119.72,119.72,"%D",3,0)
food from a Production Facility is served.
"^DIC",119.72,"B","SERVICE POINT",119.72)

"^DIC",119.73,119.73,0)
COMMUNICATION OFFICE^119.73
"^DIC",119.73,119.73,0,"GL")
^FH(119.73,
"^DIC",119.73,119.73,"%",0)
^1.005^^
"^DIC",119.73,119.73,"%D",0)
^1.001^3^3^3030508^^
"^DIC",119.73,119.73,"%D",1,0)
This file is a list of Communication Offices and associated parameters.
"^DIC",119.73,119.73,"%D",2,0)
A Communication Office has responsibility for processing diet orders
"^DIC",119.73,119.73,"%D",3,0)
for a group of wards.
"^DIC",119.73,"B","COMMUNICATION OFFICE",119.73)

"^DIC",119.74,119.74,0)
SUPPLEMENTAL FEEDING SITE^119.74
"^DIC",119.74,119.74,0,"GL")
^FH(119.74,
"^DIC",119.74,119.74,"%D",0)
^^3^3^2911204^
"^DIC",119.74,119.74,"%D",1,0)
This file contains a list of Supplemental Feeding Sites and associated
"^DIC",119.74,119.74,"%D",2,0)
parameters. A Supplemental Feeding Site prepares orders for a 
"^DIC",119.74,119.74,"%D",3,0)
group of wards for which it is responsible.
"^DIC",119.74,"B","SUPPLEMENTAL FEEDING SITE",119.74)

"^DIC",119.8,119.8,0)
NUTRITION EVENTS^119.8
"^DIC",119.8,119.8,0,"GL")
^FH(119.8,
"^DIC",119.8,119.8,"%D",0)
^1.001^4^4^3050113^^^
"^DIC",119.8,119.8,"%D",1,0)
This file contains entries for all patient movements, diet changes,
"^DIC",119.8,119.8,"%D",2,0)
tubefeeding orders, additional orders, food preferences, standing
"^DIC",119.8,119.8,"%D",3,0)
orders, and patient isolation orders requiring action by the
"^DIC",119.8,119.8,"%D",4,0)
Dietetic Service.
"^DIC",119.8,"B","NUTRITION EVENTS",119.8)

"^DIC",119.9,119.9,0)
FH SITE PARAMETERS^119.9
"^DIC",119.9,119.9,0,"GL")
^FH(119.9,
"^DIC",119.9,119.9,"%D",0)
^1.001^3^3^3040223^^^
"^DIC",119.9,119.9,"%D",1,0)
This file contains an extensive set of site parameters designed to
"^DIC",119.9,119.9,"%D",2,0)
indicate characteristics of the Nutrition and Food Service and/or
"^DIC",119.9,119.9,"%D",3,0)
different methods by which the Service wishes the program to perform.
"^DIC",119.9,"B","FH SITE PARAMETERS",119.9)

**END**
**END**

KIDS Distribution saved on Jun 27, 2002@15:37:30
LTC & VETS WHO DECLINE TO PROVIDE INCOME
**KIDS**:EAS*1.0*16^DG*5.3*460^

**INSTALL NAME**
EAS*1.0*16
"BLD",3909,0)
EAS*1.0*16^ENROLLMENT APPLICATION SYSTEM^0^3020627^y
"BLD",3909,4,0)
^9.64PA^^
"BLD",3909,"ABPKG")
n
"BLD",3909,"KRN",0)
^9.67PA^8989.52^19
"BLD",3909,"KRN",.4,0)
.4
"BLD",3909,"KRN",.401,0)
.401
"BLD",3909,"KRN",.402,0)
.402
"BLD",3909,"KRN",.403,0)
.403
"BLD",3909,"KRN",.5,0)
.5
"BLD",3909,"KRN",.84,0)
.84
"BLD",3909,"KRN",3.6,0)
3.6
"BLD",3909,"KRN",3.8,0)
3.8
"BLD",3909,"KRN",9.2,0)
9.2
"BLD",3909,"KRN",9.8,0)
9.8
"BLD",3909,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",3909,"KRN",9.8,"NM",1,0)
EASECMT^^0^B33455699
"BLD",3909,"KRN",9.8,"NM",2,0)
EASEC100^^0^B57752067
"BLD",3909,"KRN",9.8,"NM","B","EASEC100",2)

"BLD",3909,"KRN",9.8,"NM","B","EASECMT",1)

"BLD",3909,"KRN",19,0)
19
"BLD",3909,"KRN",19.1,0)
19.1
"BLD",3909,"KRN",101,0)
101
"BLD",3909,"KRN",409.61,0)
409.61
"BLD",3909,"KRN",771,0)
771
"BLD",3909,"KRN",870,0)
870
"BLD",3909,"KRN",8989.51,0)
8989.51
"BLD",3909,"KRN",8989.52,0)
8989.52
"BLD",3909,"KRN",8994,0)
8994
"BLD",3909,"KRN","B",.4,.4)

"BLD",3909,"KRN","B",.401,.401)

"BLD",3909,"KRN","B",.402,.402)

"BLD",3909,"KRN","B",.403,.403)

"BLD",3909,"KRN","B",.5,.5)

"BLD",3909,"KRN","B",.84,.84)

"BLD",3909,"KRN","B",3.6,3.6)

"BLD",3909,"KRN","B",3.8,3.8)

"BLD",3909,"KRN","B",9.2,9.2)

"BLD",3909,"KRN","B",9.8,9.8)

"BLD",3909,"KRN","B",19,19)

"BLD",3909,"KRN","B",19.1,19.1)

"BLD",3909,"KRN","B",101,101)

"BLD",3909,"KRN","B",409.61,409.61)

"BLD",3909,"KRN","B",771,771)

"BLD",3909,"KRN","B",870,870)

"BLD",3909,"KRN","B",8989.51,8989.51)

"BLD",3909,"KRN","B",8989.52,8989.52)

"BLD",3909,"KRN","B",8994,8994)

"BLD",3909,"QUES",0)
^9.62^^
"BLD",3909,"REQB",0)
^9.611^1^1
"BLD",3909,"REQB",1,0)
EAS*1.0*7^2
"BLD",3909,"REQB","B","EAS*1.0*7",1)

"MBREQ")
0
"PKG",551,-1)
1^1
"PKG",551,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",551,20,0)
^9.402P^^0
"PKG",551,22,0)
^9.49I^1^1
"PKG",551,22,1,0)
1.0^3010315^3010523^66481
"PKG",551,22,1,"PAH",1,0)
16^3020627
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","EASEC100")
0^2^B57752067
"RTN","EASEC100",1,0)
EASEC100 ;ALB/BRM - Print 1010EC LTC Enrollment form ; 3/1/02 8:22am
"RTN","EASEC100",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,16**;Mar 15, 2001
"RTN","EASEC100",3,0)
 ;
"RTN","EASEC100",4,0)
 ; This routine is called by EASEC10E to gather veteran data to be
"RTN","EASEC100",5,0)
 ; printed in the 1010EC (Long Term Care) form.
"RTN","EASEC100",6,0)
 ;
"RTN","EASEC100",7,0)
GETDATA(EASDFN,EAINFO) ;get veterans LTC data to be printed
"RTN","EASEC100",8,0)
 ;Input:
"RTN","EASEC100",9,0)
 ;   EASDFN - DFN for the Patient file (#2)
"RTN","EASEC100",10,0)
 ;Output:
"RTN","EASEC100",11,0)
 ;   ^TMP("1010EC",$J
"RTN","EASEC100",12,0)
 ;
"RTN","EASEC100",13,0)
 N EASROOT,DGINC,DGINR,DGREL,DGDEP
"RTN","EASEC100",14,0)
 S EASROOT="^TMP(""1010EC"",$J,"_EASDFN_","
"RTN","EASEC100",15,0)
 ; data for section 1
"RTN","EASEC100",16,0)
 D DATA1(EASDFN,.EAINFO,EASROOT)
"RTN","EASEC100",17,0)
 ; data for section 2
"RTN","EASEC100",18,0)
 D DATA2(EASDFN,EASROOT)
"RTN","EASEC100",19,0)
 ; data for section 3
"RTN","EASEC100",20,0)
 D DATA3(EASDFN,.EAINFO,EASROOT,.DGINC)
"RTN","EASEC100",21,0)
 ; data for section 4 and part of section 5
"RTN","EASEC100",22,0)
 D DATA4(EASDFN,EASROOT,.DGINC)
"RTN","EASEC100",23,0)
 ; data for section 5
"RTN","EASEC100",24,0)
 D DATA5(EASDFN,EASROOT,.DGINC)
"RTN","EASEC100",25,0)
 ; data for section 6
"RTN","EASEC100",26,0)
 D DATA6(EASDFN,EASROOT,.DGINC)
"RTN","EASEC100",27,0)
 ; data for section 8
"RTN","EASEC100",28,0)
 D DATA8(EASROOT,.EAINFO)
"RTN","EASEC100",29,0)
 Q
"RTN","EASEC100",30,0)
 ;
"RTN","EASEC100",31,0)
DATA1(EASDFN,EAINFO,EASROOT) ;data for section 1
"RTN","EASEC100",32,0)
 N EASINS,INSTMP,MDATA,EASROOT1,MPA,MPB,MPADT,MPBDT,MCN
"RTN","EASEC100",33,0)
 S EASROOT1=EASROOT_"1)"
"RTN","EASEC100",34,0)
 S @EASROOT1@(1)=$G(EAINFO("VET"))                     ;name
"RTN","EASEC100",35,0)
 S @EASROOT1@(2)=$G(EAINFO("SSN"))                      ;ssn
"RTN","EASEC100",36,0)
 S @EASROOT1@(3)=$$GET1^DIQ(2,EASDFN_",",".381","E")   ;medicaid
"RTN","EASEC100",37,0)
 ; **  determine medicare info
"RTN","EASEC100",38,0)
 S EASINS=0,(MPA,MPB)="NO",(MPADT,MPBDT,MCN)=""
"RTN","EASEC100",39,0)
 S MDATA=$$GETWNR^IBCNSMM1    ;
"RTN","EASEC100",40,0)
 I +MDATA D  ;
"RTN","EASEC100",41,0)
 .F  S EASINS=$O(^DPT(EASDFN,.312,EASINS)) Q:'EASINS  D
"RTN","EASEC100",42,0)
 ..S INSTMP=$G(^DPT(EASDFN,.312,EASINS,0))
"RTN","EASEC100",43,0)
 ..Q:$P(INSTMP,"^")'=+MDATA
"RTN","EASEC100",44,0)
 ..I $P(INSTMP,"^",18)=$P(MDATA,"^",3) S MPA="YES",MPADT=$$FMTE^XLFDT($P(INSTMP,"^",8)),MCN=$P(INSTMP,"^",2) Q
"RTN","EASEC100",45,0)
 ..I $P(INSTMP,"^",18)=$P(MDATA,"^",5) S MPB="YES",MPBDT=$$FMTE^XLFDT($P(INSTMP,"^",8)),MCN=$P(INSTMP,"^",2) Q
"RTN","EASEC100",46,0)
 S @EASROOT1@(4)=MPA      ;medicare part a
"RTN","EASEC100",47,0)
 S @EASROOT1@(5)=MPADT    ;medicare part a effective date
"RTN","EASEC100",48,0)
 S @EASROOT1@(6)=MPB      ;medicare part b
"RTN","EASEC100",49,0)
 S @EASROOT1@(7)=MPBDT    ;medicare part b effective date
"RTN","EASEC100",50,0)
 S @EASROOT1@(8)=MCN      ;medicare claim number
"RTN","EASEC100",51,0)
 Q
"RTN","EASEC100",52,0)
DATA2(EASDFN,EASROOT) ;data for section 2
"RTN","EASEC100",53,0)
 N EASI,EASINS,X,Z,EASROOT2,EASINS,CNT,NUM,EASIN1I,GRPIEN,INSUR
"RTN","EASEC100",54,0)
 S EASROOT2=EASROOT_"2)"
"RTN","EASEC100",55,0)
 S @EASROOT2@(1)=$$GET1^DIQ(2,EASDFN_",",".3192","E")  ;covered by ins
"RTN","EASEC100",56,0)
 F X=2:1:22 S @EASROOT2@(X)=""
"RTN","EASEC100",57,0)
 F I=3,10,17 F Z=.111:.001:.116 S @EASROOT2@(I,Z)=""
"RTN","EASEC100",58,0)
 S EASI=0,CNT=2
"RTN","EASEC100",59,0)
 F  S EASI=$O(^DPT(EASDFN,.312,EASI)) Q:'EASI!(CNT>16)  D
"RTN","EASEC100",60,0)
 .S EASIN1I=EASI_","_EASDFN_","
"RTN","EASEC100",61,0)
 .D GETS^DIQ(2.312,EASIN1I,".01;.18;1;16;17;","IE","INSUR")
"RTN","EASEC100",62,0)
 .S @EASROOT2@(CNT+3)=$G(INSUR(2.312,EASIN1I,17,"E"))  ;insured name
"RTN","EASEC100",63,0)
 .S @EASROOT2@(CNT+4)=$G(INSUR(2.312,EASIN1I,16,"E"))  ;relationship
"RTN","EASEC100",64,0)
 .S @EASROOT2@(CNT+5)=$G(INSUR(2.312,EASIN1I,1,"E"))  ;policy #
"RTN","EASEC100",65,0)
 .S GRPIEN=$G(INSUR(2.312,EASIN1I,.18,"I"))  ;group ien/name
"RTN","EASEC100",66,0)
 .S:GRPIEN @EASROOT2@(CNT+6)=$$GET1^DIQ(355.3,GRPIEN_",",".03","E")
"RTN","EASEC100",67,0)
 .S EASINS=$G(INSUR(2.312,EASIN1I,.01,"I"))  ;pointer to insurance file #36
"RTN","EASEC100",68,0)
 .D INSDAT(EASINS,CNT)
"RTN","EASEC100",69,0)
 .S CNT=CNT+7
"RTN","EASEC100",70,0)
 Q
"RTN","EASEC100",71,0)
INSDAT(EASINS,CNT) ;obtain insurance information from the insurance file (#36)
"RTN","EASEC100",72,0)
 Q:'EASINS
"RTN","EASEC100",73,0)
 N X,INSDAT,ERR
"RTN","EASEC100",74,0)
 D GETS^DIQ(36,EASINS_",",".01;.111:.116;.131","E","INSDAT","ERR")
"RTN","EASEC100",75,0)
 Q:$D(ERR)
"RTN","EASEC100",76,0)
 S @EASROOT2@(CNT)=$G(INSDAT(36,EASINS_",",.01,"E"))  ;insurance name
"RTN","EASEC100",77,0)
 F X=.111:.001:.116 S @EASROOT2@((CNT+1),X)=$G(INSDAT(36,EASINS_",",X,"E"))  ;insurance address
"RTN","EASEC100",78,0)
 S @EASROOT2@(CNT+2)=$G(INSDAT(36,EASINS_",",.131,"E"))  ;ins. phone
"RTN","EASEC100",79,0)
 Q
"RTN","EASEC100",80,0)
DATA3(EASDFN,EAINFO,EASROOT,DGINC) ;data for section 3
"RTN","EASEC100",81,0)
 N INFO13,DEP1,DEP,X,I,EASROOT3,SSN
"RTN","EASEC100",82,0)
 S EASROOT3=EASROOT_"3)"
"RTN","EASEC100",83,0)
 F X=1:1:11 S @EASROOT3@(X)=""
"RTN","EASEC100",84,0)
 D ALL^EASECU21(EASDFN,"SCV",EAINFO("MTDT"),"IPR",$G(EAINFO("DGMTIEN")))
"RTN","EASEC100",85,0)
 D:$D(DGREL("S"))
"RTN","EASEC100",86,0)
 .S INFO13=$G(^DGPR(408.13,+$P(DGREL("S"),"^",2),0))
"RTN","EASEC100",87,0)
 .S @EASROOT3@(1)=$P(INFO13,"^")  ;Spouse Name
"RTN","EASEC100",88,0)
 .S SSN=$P(INFO13,"^",9)          ;Spouse SSN
"RTN","EASEC100",89,0)
 .S @EASROOT3@(3)=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","EASEC100",90,0)
 .S:$G(DGINR("V")) @EASROOT3@(2)=$$GET1^DIQ(408.22,DGINR("V"),".16","E")                               ;Spouse Residing in the Community?
"RTN","EASEC100",91,0)
 Q:'$D(DGREL("C"))
"RTN","EASEC100",92,0)
 S DEP=""
"RTN","EASEC100",93,0)
 F  S DEP=$O(DGREL("C",DEP)) Q:'DEP!(DEP>2)  D
"RTN","EASEC100",94,0)
 .Q:'$D(^DGPR(408.13,+$P(DGREL("C",DEP),"^",2),0))
"RTN","EASEC100",95,0)
 .S INFO13=$G(^DGPR(408.13,+$P(DGREL("C",DEP),"^",2),0))
"RTN","EASEC100",96,0)
 .S DEP1=$S(DEP=1:4,DEP=2:8)
"RTN","EASEC100",97,0)
 .S @EASROOT3@(DEP1)=$P(INFO13,"^")                   ;Dependent Name
"RTN","EASEC100",98,0)
 .S @EASROOT3@(DEP1+1)=$$FMTE^XLFDT($P(INFO13,"^",3))  ;Dependent DOB
"RTN","EASEC100",99,0)
 .S SSN=$P(INFO13,"^",9)                               ;Dependent SSN
"RTN","EASEC100",100,0)
 .S @EASROOT3@(DEP1+2)=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","EASEC100",101,0)
 .S:$G(DGINR("C",DEP)) @EASROOT3@(DEP1+3)=$$GET1^DIQ(408.22,DGINR("C",DEP),".16","E")                  ;Dependent Living in Community?
"RTN","EASEC100",102,0)
 Q
"RTN","EASEC100",103,0)
DATA4(EASDFN,EASROOT,DGINC) ;data for section 4 and the first part of 5
"RTN","EASEC100",104,0)
 N EASROOT4,EASROOT5,ASSET
"RTN","EASEC100",105,0)
 S EASROOT4=EASROOT_"4)"
"RTN","EASEC100",106,0)
 S EASROOT5=EASROOT_"5)"
"RTN","EASEC100",107,0)
 F I=1:1:4 S @EASROOT4@(I)=""
"RTN","EASEC100",108,0)
 F I=1:1:5 S @EASROOT5@(I)=""
"RTN","EASEC100",109,0)
 Q:'$G(DGINC("V"))
"RTN","EASEC100",110,0)
 D GETS^DIQ(408.21,DGINC("V"),"2.01;2.02;2.06:2.09","I","ASSET")
"RTN","EASEC100",111,0)
 S @EASROOT4@(1)=+$G(ASSET(408.21,DGINC("V")_",",2.06,"I")) ;Residence
"RTN","EASEC100",112,0)
 S @EASROOT4@(2)=+$G(ASSET(408.21,DGINC("V")_",",2.07,"I")) ;Land/Farm
"RTN","EASEC100",113,0)
 S @EASROOT4@(3)=+$G(ASSET(408.21,DGINC("V")_",",2.08,"I")) ;Vehicles
"RTN","EASEC100",114,0)
 S @EASROOT4@(4)=@EASROOT4@(1)+@EASROOT4@(2)+@EASROOT4@(3) ;Sub-total
"RTN","EASEC100",115,0)
 S @EASROOT5@(1)=+$G(ASSET(408.21,DGINC("V")_",",2.01,"I")) ;Cash
"RTN","EASEC100",116,0)
 S @EASROOT5@(2)=+$G(ASSET(408.21,DGINC("V")_",",2.02,"I")) ;Stocks
"RTN","EASEC100",117,0)
 S @EASROOT5@(3)=+$G(ASSET(408.21,DGINC("V")_",",2.09,"I")) ;Other
"RTN","EASEC100",118,0)
 S @EASROOT5@(4)=@EASROOT5@(1)+@EASROOT5@(2)+@EASROOT5@(3) ;Sub-total
"RTN","EASEC100",119,0)
 S @EASROOT5@(5)=@EASROOT4@(4)+@EASROOT5@(4)  ;Total Assets
"RTN","EASEC100",120,0)
 Q
"RTN","EASEC100",121,0)
DATA5(EASDFN,EASROOT,DGINC) ;data for section 5 (the rest of it)
"RTN","EASEC100",122,0)
 N EASROOT5,ASSETV,ASSETS,NUM,X,ASSETRT,IENS,I
"RTN","EASEC100",123,0)
 S EASROOT5=EASROOT_"5)"
"RTN","EASEC100",124,0)
 F I=6:1:35 S @EASROOT5@(I)=""
"RTN","EASEC100",125,0)
 F X="V","S" Q:'$D(DGINC(X))  D  ;
"RTN","EASEC100",126,0)
 .D GETS^DIQ(408.21,+DGINC(X),".06:.2","I","ASSET"_X)
"RTN","EASEC100",127,0)
 .S NUM=$S(X="V":6,X="S":7)
"RTN","EASEC100",128,0)
 .S IENS=+DGINC(X)_","
"RTN","EASEC100",129,0)
 .S ASSETRT="ASSET"_X_"(408.21,"_""""_IENS_""""_","
"RTN","EASEC100",130,0)
 .S @EASROOT5@(NUM)=+$G(@(ASSETRT_".14,""I"")"))    ;Gross Income
"RTN","EASEC100",131,0)
 .S @EASROOT5@(NUM+2)=+$G(@(ASSETRT_".08,""I"")"))  ;Soc. Security
"RTN","EASEC100",132,0)
 .S @EASROOT5@(NUM+4)=+$G(@(ASSETRT_".15,""I"")"))  ;Interest/Div
"RTN","EASEC100",133,0)
 .S @EASROOT5@(NUM+6)=+$G(@(ASSETRT_".06,""I"")"))  ;Retire/Pension
"RTN","EASEC100",134,0)
 .S @EASROOT5@(NUM+8)=+$G(@(ASSETRT_".09,""I"")"))  ;Civil Service
"RTN","EASEC100",135,0)
 .S @EASROOT5@(NUM+10)=+$G(@(ASSETRT_".1,""I"")"))  ;US Railroad
"RTN","EASEC100",136,0)
 .S @EASROOT5@(NUM+12)=+$G(@(ASSETRT_".07,""I"")"))  ;VA Pension
"RTN","EASEC100",137,0)
 .S @EASROOT5@(NUM+14)=+$G(@(ASSETRT_".19,""I"")"))  ;Spouse Disab
"RTN","EASEC100",138,0)
 .S @EASROOT5@(NUM+16)=+$G(@(ASSETRT_".12,""I"")"))  ;Unemployment
"RTN","EASEC100",139,0)
 .S @EASROOT5@(NUM+18)=+$G(@(ASSETRT_".16,""I"")"))  ;Workers Comp,etc
"RTN","EASEC100",140,0)
 .S @EASROOT5@(NUM+20)=+$G(@(ASSETRT_".11,""I"")"))  ;Military Retire
"RTN","EASEC100",141,0)
 .S @EASROOT5@(NUM+22)=+$G(@(ASSETRT_".13,""I"")"))  ;Other Retire
"RTN","EASEC100",142,0)
 .S @EASROOT5@(NUM+24)=+$G(@(ASSETRT_".2,""I"")"))  ;Court Mandated
"RTN","EASEC100",143,0)
 .S @EASROOT5@(NUM+26)=+$G(@(ASSETRT_".17,""I"")"))  ;Other Income
"RTN","EASEC100",144,0)
 .F I=NUM:2:NUM+26 S @EASROOT5@(NUM+28)=@EASROOT5@(NUM+28)+@EASROOT5@(I)  ;Total Income
"RTN","EASEC100",145,0)
 Q
"RTN","EASEC100",146,0)
DATA6(EASDFN,EASROOT,DGINC) ;
"RTN","EASEC100",147,0)
 N IENS,EXPRT,EASROOT6,EXPENSE
"RTN","EASEC100",148,0)
 S EASROOT6=EASROOT_"6)"
"RTN","EASEC100",149,0)
 F I=1:1:11 S @EASROOT6@(I)=""
"RTN","EASEC100",150,0)
 Q:'$G(DGINC("V"))
"RTN","EASEC100",151,0)
 D GETS^DIQ(408.21,+DGINC("V"),"1.01:1.1","I","EXPENSE")
"RTN","EASEC100",152,0)
 S IENS=+DGINC("V")_","
"RTN","EASEC100",153,0)
 S EXPRT="EXPENSE(408.21,"_""""_IENS_""""_","
"RTN","EASEC100",154,0)
 S @EASROOT6@(1)=+$G(@(EXPRT_"1.03,""I"")"))  ;Education
"RTN","EASEC100",155,0)
 S @EASROOT6@(2)=+$G(@(EXPRT_"1.02,""I"")"))  ;Funeral and Burial
"RTN","EASEC100",156,0)
 S @EASROOT6@(3)=+$G(@(EXPRT_"1.04,""I"")"))  ;Rent/Mortgage
"RTN","EASEC100",157,0)
 S @EASROOT6@(4)=+$G(@(EXPRT_"1.05,""I"")"))  ;Utilities
"RTN","EASEC100",158,0)
 S @EASROOT6@(5)=+$G(@(EXPRT_"1.06,""I"")"))  ;Car Payment
"RTN","EASEC100",159,0)
 S @EASROOT6@(6)=+$G(@(EXPRT_"1.07,""I"")"))  ;Food
"RTN","EASEC100",160,0)
 S @EASROOT6@(7)=+$G(@(EXPRT_"1.01,""I"")"))  ;Medical Expenses
"RTN","EASEC100",161,0)
 S @EASROOT6@(8)=+$G(@(EXPRT_"1.08,""I"")"))  ;Court-Ordered Payments
"RTN","EASEC100",162,0)
 S @EASROOT6@(9)=+$G(@(EXPRT_"1.09,""I"")"))  ;Insurance
"RTN","EASEC100",163,0)
 S @EASROOT6@(10)=+$G(@(EXPRT_"1.1,""I"")"))  ;Taxes (Income, etc)
"RTN","EASEC100",164,0)
 F I=1:1:10 S @EASROOT6@(11)=@EASROOT6@(11)+@EASROOT6@(I)  ;Total Expenses
"RTN","EASEC100",165,0)
 Q
"RTN","EASEC100",166,0)
DATA8(EASROOT,EAINFO) ;get the word processing field for section 8
"RTN","EASEC100",167,0)
 N LINE,X,EASROOT8,IENS,WP
"RTN","EASEC100",168,0)
 S EASROOT8=EASROOT_"8)",LINE=0
"RTN","EASEC100",169,0)
 Q:'EAINFO("DGMTIEN")
"RTN","EASEC100",170,0)
 S IENS=EAINFO("DGMTIEN")_","
"RTN","EASEC100",171,0)
 S X=$$GET1^DIQ(408.31,IENS,50,"","WP")
"RTN","EASEC100",172,0)
 F  S LINE=$O(WP(LINE)) Q:'LINE  S @EASROOT8@(LINE)=$G(WP(LINE))
"RTN","EASEC100",173,0)
 Q
"RTN","EASECMT")
0^1^B33455699
"RTN","EASECMT",1,0)
EASECMT ;ALB/LBD - Means Test for LTC Co-Pay exemption ; 27 DEC 2001
"RTN","EASECMT",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**7,16**;Mar 15, 2001
"RTN","EASECMT",3,0)
 ;
"RTN","EASECMT",4,0)
EN ; This is the entry point for the routine that will find the 
"RTN","EASECMT",5,0)
 ; financial test for a veteran that can be used to check if
"RTN","EASECMT",6,0)
 ; veteran's income is below the threshold and exempt from LTC
"RTN","EASECMT",7,0)
 ; co-payments.  If a financial test is not on file for the veteran
"RTN","EASECMT",8,0)
 ; it can be added through this process.
"RTN","EASECMT",9,0)
 ;  Input --      DFN = Patient IEN
"RTN","EASECMT",10,0)
 ;  Output --     DGEXMPT = 1 (exempt from LTC co-payments)
"RTN","EASECMT",11,0)
 ;                        = 0 or "" (not exempt from LTC co-payments)
"RTN","EASECMT",12,0)
 ;                DGOUT = 1 (user wants to exit from the process) 
"RTN","EASECMT",13,0)
 N DGMTI,DGMTDT,DGMTYPT,DGMTACT,DGL,DGCS,DGMSGF,DGREQF,DGDOM,DGDOM1,Y
"RTN","EASECMT",14,0)
 ; Does veteran have current LTC co-pay exemption test (type 4)?
"RTN","EASECMT",15,0)
 S Y=$$GETLTC4(DFN) I Y S DGEXMPT=$S($P(Y,U,3)="EXEMPT":1,1:0) Q
"RTN","EASECMT",16,0)
 ; Does veteran have current means test?
"RTN","EASECMT",17,0)
 S DGL=$$LST^DGMTU(DFN),DGMTI=+DGL,DGMTDT=$P(DGL,U,2),DGCS=$P(DGL,U,4)
"RTN","EASECMT",18,0)
 ; If last means test has status of Cat C or Pend. Adj. and vet agreed
"RTN","EASECMT",19,0)
 ; to pay MT copay, new means test is not required
"RTN","EASECMT",20,0)
 I ((DGCS="C")!(DGCS="P")),$P($G(^DGMT(408.31,DGMTI,0)),U,11)=1,DGMTDT>2991005 S DGEXMPT=0 D LTC4(DGMTI,DGEXMPT) Q
"RTN","EASECMT",21,0)
 ; If means test is required or more than a year old, do new means test
"RTN","EASECMT",22,0)
 I (DGCS="R")!($$OLD^DGMTU4(DGMTDT)) D  Q:$G(DGOUT)!(DGMTYPT=4)
"RTN","EASECMT",23,0)
 .S (DGADDF,DGMSGF)=1 D ^DGMTR S DGMTYPT=$S(DGREQF:1,1:4)
"RTN","EASECMT",24,0)
 .I '$$ASK(DGMTYPT) S DGOUT=1 Q
"RTN","EASECMT",25,0)
 .S DGMTACT="ADD" I DGMTYPT=1,$E(DGMTDT,1,3)=$E(DT,1,3) S DGMTACT="EDT"
"RTN","EASECMT",26,0)
 .I '$$MT(DFN,DGMTYPT,DGMTACT,.DGMTI) S DGOUT=1 Q
"RTN","EASECMT",27,0)
 .I DGMTYPT=4 D
"RTN","EASECMT",28,0)
 ..D DOM^DGMTR I '$G(DGDOM1) D COPYRX^DGMTR1(DFN,DGMTI)
"RTN","EASECMT",29,0)
 ..S Y=$$GETCODE^DGMTH($P($G(^DGMT(408.31,DGMTI,0)),U,3)),DGEXMPT=$S(Y=0:1,1:0)
"RTN","EASECMT",30,0)
 ; If no means test or means test is no longer required, check if
"RTN","EASECMT",31,0)
 ; there is an RX co-pay test, otherwise do new LTC co-pay exemption test
"RTN","EASECMT",32,0)
 I DGCS=""!(DGCS="N") D  Q:$G(DGOUT)!($G(DGMTYPT)=4)
"RTN","EASECMT",33,0)
 .S DGL=$$LST^DGMTU(DFN,DT,2),DGMTI=+DGL,DGMTDT=$P(DGL,U,2),DGCS=$P(DGL,U,4)
"RTN","EASECMT",34,0)
 .I DGMTI,'$$OLD^DGMTU4(DGMTDT),("^I^L^")'[("^"_DGCS_"^") Q
"RTN","EASECMT",35,0)
 .S DGMTYPT=4
"RTN","EASECMT",36,0)
 .I '$$ASK(DGMTYPT) S DGOUT=1 Q
"RTN","EASECMT",37,0)
 .I '$$MT(DFN,DGMTYPT,"ADD",.DGMTI) S DGOUT=1 Q
"RTN","EASECMT",38,0)
 .D DOM^DGMTR I '$G(DGDOM1) D COPYRX^DGMTR1(DFN,DGMTI)
"RTN","EASECMT",39,0)
 .S Y=$$GETCODE^DGMTH($P($G(^DGMT(408.31,DGMTI,0)),U,3))
"RTN","EASECMT",40,0)
 .S DGEXMPT=$S(Y=0:1,1:0)
"RTN","EASECMT",41,0)
 ; Check if veteran's income is below the pension threshold
"RTN","EASECMT",42,0)
 S DGEXMPT=$$THRES(DFN,DGMTDT)
"RTN","EASECMT",43,0)
 I DGEXMPT<0 W !!,"The income threshold check could not be completed due to an error." S DGOUT=1 Q
"RTN","EASECMT",44,0)
 ; Create LTC co-pay exemption test (type 4) by copying MT
"RTN","EASECMT",45,0)
 D LTC4(DGMTI,DGEXMPT)
"RTN","EASECMT",46,0)
 Q
"RTN","EASECMT",47,0)
 ;
"RTN","EASECMT",48,0)
THRES(DFN,DGMTDT) ; Is veteran's income below the pension threshold
"RTN","EASECMT",49,0)
 ; Input   -  DFN = Patient IEN
"RTN","EASECMT",50,0)
 ;            DGMTDT = Test date
"RTN","EASECMT",51,0)
 ; Output  -   = 1 (Below the threshold)
"RTN","EASECMT",52,0)
 ;             = 0 (Above the threshold)
"RTN","EASECMT",53,0)
 ;             = -1(Error)
"RTN","EASECMT",54,0)
 N DGDC,DGDEP,DGDET,DGERR,DGIN0,DGIN1,DGIN2,DGINI,DGINT,DGINTF,DGIRI
"RTN","EASECMT",55,0)
 N DGNC,DGND,DGNWT,DGNWTF,DGPRI,DGSP,DGVINI,DGVIR0,DGVIRI,DGTHRES
"RTN","EASECMT",56,0)
 ; Get current single veteran pension threshold amount
"RTN","EASECMT",57,0)
 S DGTHRES=$$THRES^IBARXEU1(DGMTDT,1,0) I '+DGTHRES Q -1
"RTN","EASECMT",58,0)
 ; Calculate veteran's income level and check against the threshold
"RTN","EASECMT",59,0)
 S DGPRI=$O(^DGPR(408.12,"C",DFN_";DPT(",0)) I 'DGPRI Q -1
"RTN","EASECMT",60,0)
 D GETIENS^DGMTU2(DFN,DGPRI,DGMTDT) I '$G(DGIRI),'$G(DGINI) Q -1
"RTN","EASECMT",61,0)
 S DGVIRI=DGIRI,DGVINI=DGINI
"RTN","EASECMT",62,0)
 D DEP^DGMTSCU2,INC^DGMTSCU3 I '$D(DGINT) Q -1
"RTN","EASECMT",63,0)
 ; If vet declined to provide financial info, return 0 (above threshold)
"RTN","EASECMT",64,0)
 I $P($G(^DGMT(408.31,+$G(DGMTI),0)),U,14) Q 0
"RTN","EASECMT",65,0)
 I (DGINT-DGDET)'>+DGTHRES Q 1
"RTN","EASECMT",66,0)
 Q 0
"RTN","EASECMT",67,0)
 ;
"RTN","EASECMT",68,0)
MT(DFN,TYPE,ACT,DGMTI) ; Complete a means test or LTC co-pay exemption test
"RTN","EASECMT",69,0)
 ; Input    -  DFN = Patient IEN
"RTN","EASECMT",70,0)
 ;             DGMTYPT = Type of test (1=MT; 4=LTC4)
"RTN","EASECMT",71,0)
 ;             ACT = Type of action (ADD or EDT)
"RTN","EASECMT",72,0)
 ;             DGMTI = If EDT action, IEN of test to be edited
"RTN","EASECMT",73,0)
 ; Output   -  EASECMT = 1 (MT completed)
"RTN","EASECMT",74,0)
 ;                     = 0 (MT not completed)
"RTN","EASECMT",75,0)
 ;             DGMTI = IEN of new test
"RTN","EASECMT",76,0)
 N DGMTYPT,DGMTACT,DGMTROU,DGMT0,DGSTA,EASECMT
"RTN","EASECMT",77,0)
 S EASECMT=0
"RTN","EASECMT",78,0)
 I $$LOCK^DGMTUTL(DFN) E  Q EASECMT
"RTN","EASECMT",79,0)
 S DGMTYPT=TYPE,DGMTACT=ACT
"RTN","EASECMT",80,0)
 S DGMTDT=$S(DGMTACT="EDT":+$G(^DGMT(408.31,DGMTI,0)),1:DT) G MT1:'DGMTDT
"RTN","EASECMT",81,0)
 I DGMTACT="ADD" D ADD^DGMTA G MT1:'$G(DGMTI)
"RTN","EASECMT",82,0)
 S DGMTROU="MT1^EASECMT"
"RTN","EASECMT",83,0)
 G EN^DGMTSC
"RTN","EASECMT",84,0)
MT1 I $G(DGMTI) D
"RTN","EASECMT",85,0)
 .S DGMT0=$G(^DGMT(408.31,DGMTI,0)),DGSTA=$$GETCODE^DGMTH($P(DGMT0,U,3))
"RTN","EASECMT",86,0)
 .I DGSTA'="","ACP01"[DGSTA,$P(DGMT0,U,7)]"" S EASECMT=1
"RTN","EASECMT",87,0)
 .I 'EASECMT,TYPE=4 D DEL  ;Delete incomplete LTC copay exemption test
"RTN","EASECMT",88,0)
 D UNLOCK^DGMTUTL(DFN)
"RTN","EASECMT",89,0)
 Q +$G(EASECMT)
"RTN","EASECMT",90,0)
 ;
"RTN","EASECMT",91,0)
LTC4(DGMT,DGEXMPT) ; Create or update LTC copay exemption test (type 4) by copying
"RTN","EASECMT",92,0)
 ; means test
"RTN","EASECMT",93,0)
 ; Input   -   DGMT = Annual Means Test IEN of test to be copied
"RTN","EASECMT",94,0)
 ;         -   DGEXMPT = LTC copayments exemption status (optional)
"RTN","EASECMT",95,0)
 Q:'DGMT
"RTN","EASECMT",96,0)
 N DGMT0,DGMT2,DA,DIC,DIK,DLAYGO,X,DFN,DGMTI
"RTN","EASECMT",97,0)
 N DGMTA,DGMTP,DGMTACT,DGMTINF,DGMTYPT
"RTN","EASECMT",98,0)
 ; Quit if this is a LTC copay exemption test (type 4)
"RTN","EASECMT",99,0)
 S DGMT0=$G(^DGMT(408.31,DGMT,0)) I $P(DGMT0,U,19)=4 Q
"RTN","EASECMT",100,0)
 S DGMT2=$G(^DGMT(408.31,DGMT,2))
"RTN","EASECMT",101,0)
 ; Add a new LTC 4 test or edit an existing LTC 4 test?
"RTN","EASECMT",102,0)
 S DGMTI=$O(^DGMT(408.31,"AT",DGMT,0))
"RTN","EASECMT",103,0)
 S DGMTACT=$S(DGMTI:"EDT",1:"ADD")
"RTN","EASECMT",104,0)
 S DGMTP="" I DGMTACT="EDT" S DGMTP=$G(^DGMT(408.31,DGMTI,0))
"RTN","EASECMT",105,0)
 ; Add new entry to Annual Means Test file (#408.31) for LTC 4 test
"RTN","EASECMT",106,0)
 I DGMTACT="ADD" D  Q:DGMTI'>0
"RTN","EASECMT",107,0)
 .S X=+DGMT0,(DIC,DIK)="^DGMT(408.31,",DIC(0)="L",DLAYGO=408.31
"RTN","EASECMT",108,0)
 .D FILE^DICN S DGMTI=+Y
"RTN","EASECMT",109,0)
 S DFN=$P(DGMT0,U,2)
"RTN","EASECMT",110,0)
 F I=.01,.02,.04,.05,.06,.11,.14,.15,.18,.23 S DATA(I)=$P(DGMT0,U,(I/.01))
"RTN","EASECMT",111,0)
 I '$D(DGEXMPT) S DGEXMPT=$$THRES(DFN,$P(DGMT0,U,1))
"RTN","EASECMT",112,0)
 S DATA(.03)=$S(DGEXMPT:15,1:14),DATA(.07)=DT
"RTN","EASECMT",113,0)
 S DATA(.019)=4,DATA(2.02)=$P(DGMT2,U,2),DATA(2.08)=DGMT
"RTN","EASECMT",114,0)
 S DATA(2.05)=$P(DGMT2,U,5)
"RTN","EASECMT",115,0)
 I $$UPD^DGENDBS(408.31,DGMTI,.DATA,.ERROR)
"RTN","EASECMT",116,0)
 K DATA,ERROR
"RTN","EASECMT",117,0)
 ; Update the LTC copay test (type 3), if status changed
"RTN","EASECMT",118,0)
 I DGMTACT="EDT" D UPLTC3(DGMTI)
"RTN","EASECMT",119,0)
 ; Update Audit file and IVM Patient file
"RTN","EASECMT",120,0)
 S DGMTYPT=4,DGMTINF=1 D AFTER^DGMTEVT
"RTN","EASECMT",121,0)
 D EN^DGMTAUD
"RTN","EASECMT",122,0)
 D EN^IVMPMTE
"RTN","EASECMT",123,0)
 Q
"RTN","EASECMT",124,0)
 ;
"RTN","EASECMT",125,0)
ASK(TYPE) ; Does user want to perform MT/LTC4 test now?
"RTN","EASECMT",126,0)
 ; Input   -   TYPE = Type of test, 1: MT; 4: LTC Copay Exemption
"RTN","EASECMT",127,0)
 ; Output  -   Y = 1 (YES)
"RTN","EASECMT",128,0)
 ;               = 0 (NO)
"RTN","EASECMT",129,0)
 N DIR,TST
"RTN","EASECMT",130,0)
 S TST=$S(TYPE=1:"Means Test",1:"LTC Copay Exemption Test")
"RTN","EASECMT",131,0)
 W !!,"The previous year's financial information is not on file for this veteran.",!,"A ",TST," is required."
"RTN","EASECMT",132,0)
 S DIR("A")="Do you wish to complete the "_TST_" at this time"
"RTN","EASECMT",133,0)
 S DIR("B")="NO",DIR(0)="Y"
"RTN","EASECMT",134,0)
 W ! D ^DIR
"RTN","EASECMT",135,0)
 Q +(Y)
"RTN","EASECMT",136,0)
 ;
"RTN","EASECMT",137,0)
GETLTC4(DFN,DGMTDT) ; Return last LTC co-pay exemption test (type 4),
"RTN","EASECMT",138,0)
 ; if less than a year old
"RTN","EASECMT",139,0)
 ; Input   -   DFN = Patient IEN
"RTN","EASECMT",140,0)
 ;             DGMTDT (optional) = Date of test
"RTN","EASECMT",141,0)
 ; Output  -   Y = Annual Means Test IEN^Date of Test^Status Name^
"RTN","EASECMT",142,0)
 ;                    Status Code^Source of Test
"RTN","EASECMT",143,0)
 ;               = "" (no current LTC co-pay exemption test)
"RTN","EASECMT",144,0)
 N Y
"RTN","EASECMT",145,0)
 S Y="" Q:'$G(DFN) Y I '$G(DGMTDT) S DGMTDT=DT
"RTN","EASECMT",146,0)
 S Y=$$LST^DGMTU(DFN,DGMTDT,4) I '(+Y) Q Y
"RTN","EASECMT",147,0)
 I $$OLD^DGMTU4($P(Y,U,2)) S Y=""
"RTN","EASECMT",148,0)
 Q Y
"RTN","EASECMT",149,0)
 ;
"RTN","EASECMT",150,0)
DEL ;Delete incomplete LTC Copay Exemption test (type 4)
"RTN","EASECMT",151,0)
 ; Input   -- DGMTI  LTC Copay Exemption test IEN
"RTN","EASECMT",152,0)
 N DA,DIK,DIE,DR,V
"RTN","EASECMT",153,0)
 Q:'$G(DGMTI)  Q:$P($G(^DGMT(408.31,DGMTI,0)),U,19)'=4
"RTN","EASECMT",154,0)
 ; Delete pointer in Income Relation file (#408.22)
"RTN","EASECMT",155,0)
 I $D(^DGMT(408.22,"AMT",DGMTI)) D
"RTN","EASECMT",156,0)
 .S DIE="^DGMT(408.22,",DR="31///@"
"RTN","EASECMT",157,0)
 .S V=$O(^DGMT(408.22,"AMT",DGMTI,0)) Q:'V
"RTN","EASECMT",158,0)
 .S IR=0 F  S IR=$O(^DGMT(408.22,"AMT",DGMTI,V,IR)) Q:'IR  S DA=$O(^(IR,0)) I DA D ^DIE
"RTN","EASECMT",159,0)
 ; Delete LTC Copay Exemption test from Annual Means Test file (#408.31)
"RTN","EASECMT",160,0)
 S DA=DGMTI,DIK="^DGMT(408.31,"
"RTN","EASECMT",161,0)
 D ^DIK
"RTN","EASECMT",162,0)
 Q
"RTN","EASECMT",163,0)
 ;
"RTN","EASECMT",164,0)
UPLTC3(DGMT4) ;If the status of a LTC Copay Exemption test (type 4) changes,
"RTN","EASECMT",165,0)
 ;update the status of the LTC Copay test (type 3), if necessary
"RTN","EASECMT",166,0)
 ;  Input   -- DGMT4  LTC Copay Exemption test IEN
"RTN","EASECMT",167,0)
 N DGMT3,DGMTS4,DGMTS3,DGS,DATA,ERROR
"RTN","EASECMT",168,0)
 Q:'DGMT4
"RTN","EASECMT",169,0)
 S DGMT3=$O(^DGMT(408.31,"AT",DGMT4,0)) Q:$G(^DGMT(408.31,+DGMT3,0))=""
"RTN","EASECMT",170,0)
 ; Get test status
"RTN","EASECMT",171,0)
 S DGMTS4=$$GETNAME^DGMTH($P(^DGMT(408.31,DGMT4,0),U,3))
"RTN","EASECMT",172,0)
 S DGMTS3=$$GETNAME^DGMTH($P(^DGMT(408.31,DGMT3,0),U,3))
"RTN","EASECMT",173,0)
 ; If test status is the same quit
"RTN","EASECMT",174,0)
 I DGMTS4=DGMTS3 Q
"RTN","EASECMT",175,0)
 ; If LTC copay test (type 3) is Exempt and the Reason for Exemption is
"RTN","EASECMT",176,0)
 ; anything other than 2 (Income Last Year Below Threshold), quit
"RTN","EASECMT",177,0)
 I DGMTS3="EXEMPT",$P($G(^DGMT(408.31,DGMT3,2)),U,7)'=2 Q
"RTN","EASECMT",178,0)
 ; Get IEN of Means Test Status and update LTC copay test
"RTN","EASECMT",179,0)
 S DGS="" F  S DGS=$O(^DG(408.32,"B",DGMTS4,DGS)) Q:'DGS  I $P(^DG(408.32,DGS,0),U,19)=3 Q
"RTN","EASECMT",180,0)
 S DATA(.03)=DGS,DATA(2.07)=$S(DGMTS4="EXEMPT":2,1:"@")
"RTN","EASECMT",181,0)
 I $$UPD^DGENDBS(408.31,DGMT3,.DATA,.ERROR)
"RTN","EASECMT",182,0)
 Q
"VER")
8.0^22
**INSTALL NAME**
DG*5.3*460
"BLD",3910,0)
DG*5.3*460^REGISTRATION^0^3020627^y
"BLD",3910,4,0)
^9.64PA^^
"BLD",3910,"ABPKG")
n
"BLD",3910,"KRN",0)
^9.67PA^8989.52^19
"BLD",3910,"KRN",.4,0)
.4
"BLD",3910,"KRN",.401,0)
.401
"BLD",3910,"KRN",.402,0)
.402
"BLD",3910,"KRN",.403,0)
.403
"BLD",3910,"KRN",.5,0)
.5
"BLD",3910,"KRN",.84,0)
.84
"BLD",3910,"KRN",3.6,0)
3.6
"BLD",3910,"KRN",3.8,0)
3.8
"BLD",3910,"KRN",9.2,0)
9.2
"BLD",3910,"KRN",9.8,0)
9.8
"BLD",3910,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3910,"KRN",9.8,"NM",1,0)
DGMTSCU2^^0^B8551850
"BLD",3910,"KRN",9.8,"NM","B","DGMTSCU2",1)

"BLD",3910,"KRN",19,0)
19
"BLD",3910,"KRN",19.1,0)
19.1
"BLD",3910,"KRN",101,0)
101
"BLD",3910,"KRN",409.61,0)
409.61
"BLD",3910,"KRN",771,0)
771
"BLD",3910,"KRN",870,0)
870
"BLD",3910,"KRN",8989.51,0)
8989.51
"BLD",3910,"KRN",8989.52,0)
8989.52
"BLD",3910,"KRN",8994,0)
8994
"BLD",3910,"KRN","B",.4,.4)

"BLD",3910,"KRN","B",.401,.401)

"BLD",3910,"KRN","B",.402,.402)

"BLD",3910,"KRN","B",.403,.403)

"BLD",3910,"KRN","B",.5,.5)

"BLD",3910,"KRN","B",.84,.84)

"BLD",3910,"KRN","B",3.6,3.6)

"BLD",3910,"KRN","B",3.8,3.8)

"BLD",3910,"KRN","B",9.2,9.2)

"BLD",3910,"KRN","B",9.8,9.8)

"BLD",3910,"KRN","B",19,19)

"BLD",3910,"KRN","B",19.1,19.1)

"BLD",3910,"KRN","B",101,101)

"BLD",3910,"KRN","B",409.61,409.61)

"BLD",3910,"KRN","B",771,771)

"BLD",3910,"KRN","B",870,870)

"BLD",3910,"KRN","B",8989.51,8989.51)

"BLD",3910,"KRN","B",8989.52,8989.52)

"BLD",3910,"KRN","B",8994,8994)

"BLD",3910,"QUES",0)
^9.62^^
"BLD",3910,"REQB",0)
^9.611^1^1
"BLD",3910,"REQB",1,0)
DG*5.3*433^2
"BLD",3910,"REQB","B","DG*5.3*433",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
460^3020627
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DGMTSCU2")
0^1^B8551850
"RTN","DGMTSCU2",1,0)
DGMTSCU2 ;ALB/RMO,CAW - Means Test Screen Variable Utilities ;6 FEB 1992 7:45 am
"RTN","DGMTSCU2",2,0)
 ;;5.3;Registration;**45,130,433,460**;Aug 13, 1993
"RTN","DGMTSCU2",3,0)
 ;
"RTN","DGMTSCU2",4,0)
SET ;Set required means test variables
"RTN","DGMTSCU2",5,0)
 ; Input  -- DFN      Patient file IEN
"RTN","DGMTSCU2",6,0)
 ;           DGMTDT   Date of Test
"RTN","DGMTSCU2",7,0)
 ;           DGMTYPT  Type of Test 1=MT 2=COPAY
"RTN","DGMTSCU2",8,0)
 ;           DGMTI    Annual Means Test IEN
"RTN","DGMTSCU2",9,0)
 ;           DGMTPAR  Annual Means Test Parameters
"RTN","DGMTSCU2",10,0)
 ;           DGVIRI   Veteran Income Relation IEN
"RTN","DGMTSCU2",11,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","DGMTSCU2",12,0)
 ; Output -- All output variables in tags DEP, INC^DGMTSCU3, CAT and STA
"RTN","DGMTSCU2",13,0)
 D DEP,INC^DGMTSCU3,CAT,STA
"RTN","DGMTSCU2",14,0)
 Q
"RTN","DGMTSCU2",15,0)
 ;
"RTN","DGMTSCU2",16,0)
DEP ;Determine dependent data
"RTN","DGMTSCU2",17,0)
 ; Input  -- DFN     Patient file IEN
"RTN","DGMTSCU2",18,0)
 ;           DGMTDT  Date of Test
"RTN","DGMTSCU2",19,0)
 ;           DGVIRI  Veteran Income Relation IEN
"RTN","DGMTSCU2",20,0)
 ; Output -- DGVIR0  Veteran Income Relation 0th node
"RTN","DGMTSCU2",21,0)
 ;           DGSP    Spouse 1=YES and 0=NO (mt income)
"RTN","DGMTSCU2",22,0)
 ;           DGDC    Dependent children 1=YES and 0=NO (mt income)
"RTN","DGMTSCU2",23,0)
 ;           DGNC    Number of dependent children
"RTN","DGMTSCU2",24,0)
 ;           DGND    Total number of dependents
"RTN","DGMTSCU2",25,0)
 N DGCNT,DGDEP,DGINR,DGREL,Y
"RTN","DGMTSCU2",26,0)
 S DGVIR0=$G(^DGMT(408.22,DGVIRI,0)) D ALL^DGMTU21(DFN,"SC",DGMTDT,"PR",$S($G(DGMTI):DGMTI,1:""))
"RTN","DGMTSCU2",27,0)
 S DGSP=$S('$P(DGVIR0,"^",5)!('$G(DGREL("S"))):0,$P(DGVIR0,"^",6):1,$P(DGVIR0,"^",7)>599:1,1:0)
"RTN","DGMTSCU2",28,0)
 S DGDC=+$P(DGVIR0,"^",8) I DGDC S (DGDC,DGCNT)=0 F  S DGCNT=$O(DGINR("C",DGCNT)) Q:'DGCNT!(DGDC)  D CHK S:Y DGDC=1
"RTN","DGMTSCU2",29,0)
 S DGNC=+$P(DGVIR0,"^",13)
"RTN","DGMTSCU2",30,0)
 S DGND=DGSP+DGNC
"RTN","DGMTSCU2",31,0)
 Q
"RTN","DGMTSCU2",32,0)
 ;
"RTN","DGMTSCU2",33,0)
CHK ;Check if child has income which is available to the veteran
"RTN","DGMTSCU2",34,0)
 S Y=0
"RTN","DGMTSCU2",35,0)
 I $D(^DGMT(408.22,+$G(DGINR("C",DGCNT)),0)),$P(^(0),"^",11),$P(^(0),"^",12) S Y=1
"RTN","DGMTSCU2",36,0)
 Q
"RTN","DGMTSCU2",37,0)
 ;
"RTN","DGMTSCU2",38,0)
CAT ;Determine means test thresholds and category
"RTN","DGMTSCU2",39,0)
 ; Input  -- DGMTDT   Date of Test
"RTN","DGMTSCU2",40,0)
 ;           DGND     Total number of dependents
"RTN","DGMTSCU2",41,0)
 ;           DGINT    Total income
"RTN","DGMTSCU2",42,0)
 ;           DGDET    Total deductible expenses
"RTN","DGMTSCU2",43,0)
 ;           DGMTPAR  Annual Means Test Parameters
"RTN","DGMTSCU2",44,0)
 ; Output -- DGTHA    Category A threshold
"RTN","DGMTSCU2",45,0)
 ;           DGTHB    Category B threshold
"RTN","DGMTSCU2",46,0)
 ;           DGCAT    Means/Copay test category code
"RTN","DGMTSCU2",47,0)
 N DGCOST,DGCOPS S DGCAT=""
"RTN","DGMTSCU2",48,0)
 ;  Added for LTC Copay Phase II - DG*5.3*433
"RTN","DGMTSCU2",49,0)
 I DGMTYPT=4 D  Q
"RTN","DGMTSCU2",50,0)
 .N Y S DGTHA=""
"RTN","DGMTSCU2",51,0)
 .I $D(DGREF1),$D(DGREF) S DGCAT=1 Q  ;Vet declined to give income info
"RTN","DGMTSCU2",52,0)
 .S Y=$$THRES^EASECMT(DFN,DGMTDT) Q:Y=-1
"RTN","DGMTSCU2",53,0)
 .S DGCAT=$S(Y:0,1:1)
"RTN","DGMTSCU2",54,0)
 I $$ACT^DGMTDD(4,DGMTDT) S DGTHA=$P(DGMTPAR,"^",2)+$S(DGND:$P(DGMTPAR,"^",3),1:0)+$S((DGND-1)>0:($P(DGMTPAR,"^",4)*(DGND-1)),1:0) S:(DGINT-DGDET)'>DGTHA DGCAT="A"
"RTN","DGMTSCU2",55,0)
 I $$ACT^DGMTDD(5,DGMTDT) S DGTHB=$P(DGMTPAR,"^",5)+$S(DGND:$P(DGMTPAR,"^",6),1:0)+$S((DGND-1)>0:($P(DGMTPAR,"^",7)*(DGND-1)),1:0) I DGCAT']"",(DGINT-DGDET)'>DGTHB S DGCAT="B"
"RTN","DGMTSCU2",56,0)
 I DGCAT']"",$$ACT^DGMTDD(6,DGMTDT) S DGCAT="C"
"RTN","DGMTSCU2",57,0)
 I $D(DGREF),DGMTYPT=1,$D(DGREF1) S DGCAT="C"
"RTN","DGMTSCU2",58,0)
 I DGMTYPT=2 D
"RTN","DGMTSCU2",59,0)
 .S DGCOST=DGMTDT_U_DFN_U_U_DGINT_U_DGNWT,$P(DGCOST,U,14)=$S($D(DGREF):1,1:0),$P(DGCOST,U,15)=DGDET,$P(DGCOST,U,18)=DGND,$P(DGCOST,U,19)=2
"RTN","DGMTSCU2",60,0)
 .S DGCOPS=$$INCDT^IBARXEU1(DGCOST)
"RTN","DGMTSCU2",61,0)
 .S DGCAT=$S(+DGCOPS=1:"E",+DGCOPS=2:"M",+DGCOPS=3:"P",1:"I")
"RTN","DGMTSCU2",62,0)
 .S (DGTHA,DGTHB)=""
"RTN","DGMTSCU2",63,0)
 Q
"RTN","DGMTSCU2",64,0)
 ;
"RTN","DGMTSCU2",65,0)
STA ;Determine means test status and type of care
"RTN","DGMTSCU2",66,0)
 ; Input  -- DGCAT   Means test category code
"RTN","DGMTSCU2",67,0)
 ;           DGMTYPT Type of Test 1=MT 2=COPAY
"RTN","DGMTSCU2",68,0)
 ; Output -- DGMTS   Means test status IEN
"RTN","DGMTSCU2",69,0)
 ;           DGTYC   Type of care
"RTN","DGMTSCU2",70,0)
 S DGMTS=+$O(^DG(408.32,"AC",DGMTYPT,DGCAT,0))
"RTN","DGMTSCU2",71,0)
 S DGTYC=$P($G(^DG(408.32,DGMTS,0)),"^",3)
"RTN","DGMTSCU2",72,0)
 Q
"VER")
8.0^22
**END**
**END**

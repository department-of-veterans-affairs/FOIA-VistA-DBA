$TXT Created by CURTIS,RICHARD L at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Friday, 06/03/05 at 15:34
=============================================================================
Run Date: AUG 24, 2005                     Designation: SD*5.3*444
Package : SD - SCHEDULING                     Priority: Mandatory
Version : 5.3       SEQ #351                    Status: Released
                  Compliance Date: SEP 24, 2005
=============================================================================

Associated patches: (v)SD*5.3*414  <<= must be installed BEFORE `SD*5.3*444'

Subject: UNDEFINED VARIABLE ERROR IN ROUTINE SDAMC

Category: 
  - Routine

Description:
============

 This patch will fix an undefined variable error that will occur if two 
 users are attempting to cancel the same appointment at the same time.
  
 ASSOCIATED REMEDY TICKET:
 =========================
 HD96781   $ZE= <UNDEFINED>CANQ+3^SDAMC
    Duplicate:  HD101494  Bad Code in SDAMC.  Getting hard errors in system.
                HD105977  Undefined error in SDAMC
                HD106837  CANQ+3^SDAMC
  
 ASSOCIATED E3R(S):
 ==================
 N/A
  
 PARTICIPATING TEST SITES:
 =========================
 El Paso,TX
 Salisbury,NC
 VA Greater Los Angeles HCS
 West Palm Beach,FL
  
  
 REMEDY TICKET OVERVIEW:
 =======================
 HD96781   $ZE= <UNDEFINED>CANQ+3^SDAMC
    Duplicate:  HD101494  Bad Code in SDAMC.  Getting hard errors in system.
                HD105977  Undefined error in SDAMC
                HD106837  CANQ+3^SDAMC
  
 Problem:
 --------
 An undefined variable error will occur in routine SDAMC if two users are 
 simultaneously trying to cancel the same appointment for the same 
 patient.  This occurs because the cross-references that indicate 
 appointment cancellation have not been updated yet.  Both users proceed 
 past the logic that checks for previous appointment cancellation, 
 resulting in a successful cancellation for one user, and an error for the 
 other.  If functioning properly, the logic would display an informative 
 screen message to the user indicating the appointment was already 
 cancelled, and the user would be returned to the Appointment management 
 screen.  
  
  
 Resolution:
 -----------
 A $Get will be added at the beginning of the line of code where the
 error occurs to insure the variable contains a value before using it.
 If not, the line of code will be ignored. The line of code that caused 
 the error will only be executed if the variable is defined with a valid
 value.
  
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;5.3;Scheduling;**[patch list]**;Aug 13, 1993
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  SDAMC                  6804279              6879302       20,28,32,46,263
                                                                414,444
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 Users can be on the system during the installation of this patch.
 Installation should take less than 2 minutes.
 Since overwriting the routine in this patch could cause errors at a site
 while it is being installed, the cancellation protocol should be disabled.
  
  
 1.  LOAD TRANSPORT GLOBAL
     ---------------------
     Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
  
 2.  START UP KIDS
     -------------
     Start up the Kernel Installation and Distribution System Menu
     [XPD MAIN]
  
           Edits and Distribution ...
           Utilities ...
           Installation ...
  
     Select Kernel Installation & Distribution System Option:  INStallation
                                                               ---
  
     1     Load a Distribution
     2     Verify Checksums in Transport Global
     3     Print Transport Global
     4     Compare Transport Global to Current System
     5     Backup a Transport Global
     6     Install Package(s)
           Restart Install of Package(s)
           Unload a Distribution
  
 3.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter SD*5.3*444):
  
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch.  It will NOT
         backup any other changes such as DDs or templates.
  
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch
         (routines, DDs, templates, etc.).
  
     c.  Verify Checksums in Transport Global - This option will ensure
         the integrity of the routines that are in the transport global.
  
     d.  Print Transport Global - This option will allow you to view
         the components of the KIDS build.
  
 4.  Use the Install Package(s) option and select the package SD*5.3*444.
  
     a.  When prompted "Want KIDS to INHIBIT LOGONS during the
         install? YES//" respond NO.
  
     b.  When prompted "Want to DISABLE Scheduled Options, Menu Options,
         and Protocols? YES//" respond YES
  
     c.  When prompted to select the options you would like to place out 
         of order, enter the following:
  
         SD CANCEL APPOINTMENT       Cancel Appointment

Routine Information:
====================

Routine Name:
  - SDAMC


Routine Checksum:

=============================================================================
User Information:
Entered By  : CURTIS,RICHARD                Date Entered  : JUN 02, 2005
Completed By: ILUSTRISIMO,LUCY              Date Completed: AUG 24, 2005
Released By : FRANCE,KATHI                  Date Released : AUG 24, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

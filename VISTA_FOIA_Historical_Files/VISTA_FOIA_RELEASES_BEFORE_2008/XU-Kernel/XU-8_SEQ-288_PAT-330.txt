$TXT Created by ORMSBY,SKIP  M at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on Tuesday, 04/20/04 at 06:00
=============================================================================
Run Date: SEP 20, 2004                     Designation: XU*8*330
Package : XU - KERNEL                         Priority: Mandatory
Version : 8       SEQ #288                      Status: Released
                  Compliance Date: OCT 21, 2004
=============================================================================

Associated patches: (v)XU*8*288    <<= must be installed BEFORE `XU*8*330'

Subject: Active User Cross Reference

Category: 
  - Data Dictionary
  - Routine

Description:
============

 This enhancement creates a new cross reference, "AUSER", on the NEW 
 PERSON(#200) file to speed up the building of a list of active users who 
 may be selected.  This patch also adds a new subfile, PERSONAL DIAGNOSES
 LIST(#351) to the NEW PERSON(#200) file for CPRS.
  
 ===========================
 New "AUSER" Cross Reference
 ===========================
 FILE: 200                               NAME: AUSER
   SHORT DESCRIPTION: Build cross reference of active users
   TYPE: MUMPS                           EXECUTION: RECORD
   ACTIVITY: IR                          ROOT TYPE: INDEX FILE
   ROOT FILE: 200                        USE: SORTING ONLY
  DESCRIPTION:   This is a cross reference of CPRS Active USERs (AUSER)
  and is set if: 
   a. the IEN is not less than 1 
   and 
   b. the Kernel API $$PROVIDER^XUSER(ien) is True; IA#: 2343 
   
   The cross reference is in the format: 
   ^VA(200,"AUSER",<NAME(#.01) value>,IEN)="" 
   SET LOGIC: I DA'<1,$$PROVIDER^XUSER(DA),X(1)]"" S ^VA(200,"AUSER",X(1),D
 A)=""                                   
   SET CONDITION CODE: Q
   KILL LOGIC: I ((DA'<1&X1(1)'=X2(1))!(DA'<1&X2(2)="")) K ^VA(200,"AUSER",
 X1(1),DA)                               
   KILL CONDITION CODE: Q
   KILL ENTIRE INDEX CODE: K ^VA(200,"AUSER")
 ORDER NUMBER: 1                         TYPE OF VALUE: FIELD
   FILE: 200                             FIELD: .01
   COLLATION: forwards
 ORDER NUMBER: 2                         TYPE OF VALUE: FIELD
   FILE: 200                             FIELD: 2
   COLLATION: forwards
  
 DBA Coordination
 ================
 Clearance - Dec 2, 2003
  
 Data Dictionary:
 ================ 
 CONDENSED DATA DICTIONARY---PERSONAL DIAGNOSES LIST FILE 
  
 STORED IN:                                         03/03/04    PAGE 1
 --------------------------------------------------------------------------
  
                                                   FILE SECURITY
                            DD SECURITY    :       DELETE SECURITY:
                            READ SECURITY  :       LAYGO SECURITY :
                            WRITE SECURITY : 
           (NOTE: Kernel's File Access Security has been installed in this 
 UCI.)
  
 CROSS REFERENCED BY:
       DIAGNOSIS(B) 
  
                                  FILE STRUCTURE
  
 FIELD     FIELD
 NUMBER    NAME
  
 .01       DIAGNOSIS (P80'), [0;1]
 1         DIAGNOSIS DESCRIPTION (CJ250), [ ; ]
 2         ACTIVE DIAGNOSIS INDICATOR (CJ10), [ ; ]
  
  
 DBA Coordination
 ================
 Clearance - March 2, 2004
  
 Blood Bank Clearance
 ====================
 Clearance - Apr 20, 2004
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch XU*8*330 contains 
 changes to a package referenced in VHA IO SEPG SOP 192-023 "Review of 
 VISTA Patches for Effects on VISTA Blood Bank Software . This patch does 
 not alter or modify any VistA Blood Bank software design safeguards or 
 safety critical elements functions.
  
 RISK ANALYSIS: Changes made by patch XU*8*330 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 NOIS
 ====
  None, request from HSD&D
  
 Thanks to Test Sites 
 ====================
  CLEVELAND, OH  System: VMS/CACHE
  CHARLESTON, SC  System: ALPHA/DSM
  EL PASO, TX  System: ALPHA/ISM (NT)
  LOMA LINDA, CA  System: VMS/CACHE
  NORTHERN CALIFORNIA HCS  System: ALPHA/DSM
  
 Routine Summary: 
 ================
  The following routines are included in this patch.  The second line of 
 these routines now look like: 
   
   <tab>;;8.0;KERNEL;**[patch list]**;Jul 10, 1995
   
 CHECK^XTSUMBLD results: 
   
   Routine Name   Before Patch    After Patch     Patch List 
   ============   ============    ===========     ==========
   XU8P330X       N/A             2110917         330
   XUSER          2773911         2979384         75,97,99,150,226,267
                                                  288,330
  
 *Note: the function of routine, XU8P330X, is exported for the purposes of 
 installing the new "AUSER" cross reference and creating the new cross
 reference values.  The routine, XU8P330X, will be deleted upon the
 completion of the installation of this patch, but the checksum is being 
 published as a courtesy for the sites.
  
 Installation Instructions: 
 ==========================
 This patch can be installed with VISTA users online.  However, it is 
 recommended that it be Queued for a time of generally least activity.  
 The length of the install time will vary depending on how many entries 
 there are in your NEW PERSON(#200) file.
  
 TaskMan does not need to be STOPPED or placed in a WAIT state and 
 installation should take less than a minute.
  
      1.  AXP/DSM sites: Review your mapped routine set.  If any of the 
 routine(s) listed in the ROUTINE SUMMARY section are mapped, they 
 should be removed from the mapped set at this time.  
  
      2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.  
 This option will load the KIDS package onto your system.  
  
      3.  The patch has now been loaded into a transport global on your 
 system. You now need to use KIDS to install the transport global.  
   
      4.  On the KIDS menu, under the 'Installation' menu, use the 
 following options: 
             Print Transport Global 
             Compare Transport Global to Current System 
             Verify Checksums in Transport Global 
             Backup a Transport Global 
  
      5.  On the KIDS menu, under the 'Installation' menu, use the 
 following option: 
             Select Installation Option: Install Package(s) 
             Select INSTALL NAME: XU*8.0*330
                                  ==========
         Answer 'NO' to 'Want KIDS to INHIBIT LOGONs during the install?
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
 and Protocols? 
  
      6.  AXP/DSM Sites - After the patch has been installed, rebuild your 
 map set, if necessary.  

Routine Information:
====================

Routine Name:
  - XUSER


Routine Checksum:

Routine Name:
  - XU8P330X


Routine Checksum:

=============================================================================
User Information:
Entered By  : ORMSBY,SKIP                   Date Entered  : NOV 26, 2003
Completed By: ALDERMAN,MATT S               Date Completed: SEP 07, 2004
Released By : TILLIS,LEWIS                  Date Released : SEP 20, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

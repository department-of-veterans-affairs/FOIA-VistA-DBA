$TXT Created by CURTIS,RICHARD L at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 03/31/05 at 10:52
=============================================================================
Run Date: MAY 03, 2005                     Designation: ECX*3*80
Package : ECX - DSS EXTRACTS                  Priority: Mandatory
Version : 3        SEQ #74                      Status: Released
                  Compliance Date: JUN 03, 2005
=============================================================================

Associated patches: (v)ECX*3*71    <<= must be installed BEFORE `ECX*3*80'

Subject: WRONG PRODUCTION DIVISION FOR LABORATORY EXTRACTS

Category: 
  - Routine

Description:
============

 This patch will correct a problem with the Laboratory and Laboratory 
 Results extracts where the Production Division being retrieved is 
 incorrect.  It will also fix a formatting problem with Clinics and DSS
 (Decision Support System) Stop Codes Print where the Clinic Name in the 
 first column is overlapping with the Stop Code in the second column.
  
  
 ASSOCIATED NOIS/REMEDY TICKET:
 ==============================
 1)  HD0000000055616   Division 885
  
 2)  HD0000000060275   Report printing problem since new field added   
  
     duplicates of HD0000000060275:
     HD0000000060340   Clinic Worksheet in Vista
     HD0000000060482   Worksheet for DSS Clinic Stops
  
 ASSOCIATED E3RS:
 ================
 N/A
  
 PARTICIPATING TEST SITES:
 =========================
 Hampton, VA
 Houston, TX
 N. Texas
 West Palm Beach, FL
  
 NOIS/REMEDY TICKET OVERVIEW:
 ============================
 1)  HD0000000055616   Division 885
  
     Problem:
     --------
     When running the Laboratory and Laboratory Results Extracts, the
     wrong Production Division is sometimes being associated with
     encounters.  This problem occurs in the routines for these two
     extracts (ECXLABN and ECXLABR), which both call extrinsic function
     $$RADDIV in routine ECXDEPT, passing the station number (variable
     ECINST) as the input parameter.  However, the function expects the
     input parameter to be the internal entry number (IEN) of the
     INSTITUTION file (#4), which is not DINUMed to the station number.
  
     Resolution:
     -----------
     New logic will be added to routines ECXLABN and ECXLABR just prior to
     calling extrinsic function $$RADDIV to insure the IEN from the
     INSTITUTION file (#4) is being passed as the input parameter.  The
     line of code, which is found in both routines, at GET+40 in ECXLABN
     and at START+42 in ECXLABR, will be changed as follows:
  
     FROM:
  
       ..N ECXPDIV S ECXPDIV=$$RADDIV^ECXDEPT(ECINST)
  
     TO:
  
       ..N ECXPDIV,ECXDIEN S ECXDIEN=$O(^DIC(4,"D",ECINST,"")),ECXPDIV=
     $$RADDIV^ECXDEPT(ECXDIEN)
       ..K ECXDIEN
  
 2)  HD0000000060275   Report printing problem since new field added
  
     Problem:
     --------
     Recently released patch ECX*3.0*71 added a new field to the Clinics
     and DSS Stop Codes Print and the new software code that was added
     is printing the first 28 characters of the Clinic Name in the first
     column then starting the second column, Stop Code, in position 27,
     which causes them to overlap when printing a clinic name that exceeds
     26 characters.
  
     Resolution:
     -----------
     The code in routine ECXSCLD will be changed to extract and print the
     first 25 characters of the Clinic Name.
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;3.0;DSS EXTRACTS;**[patch list]**;Dec 22, 1997
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  ECXLABN                7353419              7558244        1,11,8,13,28
                                                            24,30,31,32,33
                                                              39,42,46,70
                                                                 71,80
  ECXLABR                6550791              6802067        8,24,33,37,39
                                                                46,71,80
  ECXSCLD               18985716             18985586         2,8,24,30,71
                                                                  80
  
 INSTALLATION INSTRUCTIONS:
 ==========================
  
 Users are allowed on the system during the install. 
   
 If the patch is installed during the normal workday, it is recommended
 that the following menu options (File #19) and all their descendants be
 disabled to prevent possible conflicts while running the KIDS install.
 Other VISTA users will not be effected.
  
 Laboratory (LAB) Extract Audit   [ECX LAB SOURCE AUDIT (PATIENT)]
 Lab Extract                      [ECXLAB]
 Lab Results Extract              [ECXLABR]
 Clinics and DSS Stop Codes Print [ECXSCLIST]
  
 Installation will take less than 2 minutes.
  
 1.  LOAD TRANSPORT GLOBAL
     ---------------------
     Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
  
 2.  DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only)
     -----------------------
     Disable routine mapping on all systems for the routines listed in
     the routine summary.
  
     NOTE:  If the routines included in this patch are not currently in
     your mapped routine set, please skip this step.
  
 3.  START UP KIDS
     -------------
     Start up the Kernel Installation and Distribution System Menu
     [XPD MAIN]:
  
           Edits and Distribution ...
           Utilities ...
           Installation ...
  
     Select Kernel Installation & Distribution System Option:  INStallation
                                                               ---
  
     1     Load a Distribution
     2     Verify Checksums in Transport Global
     3     Print Transport Global
     4     Compare Transport Global to Current System
     5     Backup a Transport Global
     6     Install Package(s)
           Restart Install of Package(s)
           Unload a Distribution
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter ECX*3.0*80):
  
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any other changes such as DDs, or templates.
  
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch
         (routines, DDs, templates, etc.).
  
     c.  Verify Checksums in Transport Global - This option will ensure
         the integrity of the routines that are in the transport global.
  
     d.  Print Transport Global - This option will allow you to view
         the components of the KIDS build.
  
 5.  Use the Install Package(s) option and select the package ECX*3.0*80.
  
     a.  When prompted "Want KIDS to INHIBIT LOGONS during the
         install? YES//" respond NO.
  
     b.  When prompted "Want to DISABLE Scheduled Options, Menu
         Options, and Protocols? YES//" respond YES.
  
         1)  When prompted "Enter options you wish to mark as "Out of
             Order":" enter the following options:
  
             Laboratory (LAB) Extract Audit  [ECX LAB SOURCE AUDIT 
                                              (PATIENT)]
             Lab Extract                       [ECXLAB]
             Lab Results Extract               [ECXLABR]
             Clinics and DSS Stop Codes Print  [ECXSCLIST]
  
         2)  When prompted "Enter protocols you wish to mark as "Out of
             Order":" just press <return>.
  
 6.  REBUILD MAPPED ROUTINE(S)   (DSM for Open VMS sites only)
     =========================
     Optional - Include the routines distributed with this patch in
     the mapped routine set.
  
     NOTE:  This step is only necessary if you performed step 2 or if
     you wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - ECXLABN


Routine Checksum:

Routine Name:
  - ECXLABR


Routine Checksum:

Routine Name:
  - ECXSCLD


Routine Checksum:

=============================================================================
User Information:
Entered By  : CURTIS,RICHARD                Date Entered  : DEC 13, 2004
Completed By: TSAIMEUCHONG,BRENDA           Date Completed: APR 28, 2005
Released By : STRICKLAND,JOAN C             Date Released : MAY 03, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released GMRY*4*3 SEQ #3
Extracted from mail message
**KIDS**:GMRY*4.0*3^

**INSTALL NAME**
GMRY*4.0*3
"BLD",1887,0)
GMRY*4.0*3^GEN. MED. REC. - I/O^0^2990804^y
"BLD",1887,1,0)
^^2^2^2990804^^^
"BLD",1887,1,1,0)
Please see the patch description for GMRY*4*3 on FORUM for an
"BLD",1887,1,2,0)
explanation of this patch.
"BLD",1887,4,0)
^9.64PA^^
"BLD",1887,"KRN",0)
^9.67PA^19^18
"BLD",1887,"KRN",.4,0)
.4
"BLD",1887,"KRN",.401,0)
.401
"BLD",1887,"KRN",.402,0)
.402
"BLD",1887,"KRN",.403,0)
.403
"BLD",1887,"KRN",.5,0)
.5
"BLD",1887,"KRN",.84,0)
.84
"BLD",1887,"KRN",3.6,0)
3.6
"BLD",1887,"KRN",3.8,0)
3.8
"BLD",1887,"KRN",9.2,0)
9.2
"BLD",1887,"KRN",9.8,0)
9.8
"BLD",1887,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",1887,"KRN",9.8,"NM",1,0)
GMRYUT0^^0^B21609725
"BLD",1887,"KRN",9.8,"NM","B","GMRYUT0",1)

"BLD",1887,"KRN",19,0)
19
"BLD",1887,"KRN",19.1,0)
19.1
"BLD",1887,"KRN",101,0)
101
"BLD",1887,"KRN",409.61,0)
409.61
"BLD",1887,"KRN",771,0)
771
"BLD",1887,"KRN",869.2,0)
869.2
"BLD",1887,"KRN",870,0)
870
"BLD",1887,"KRN",8994,0)
8994
"BLD",1887,"KRN","B",.4,.4)

"BLD",1887,"KRN","B",.401,.401)

"BLD",1887,"KRN","B",.402,.402)

"BLD",1887,"KRN","B",.403,.403)

"BLD",1887,"KRN","B",.5,.5)

"BLD",1887,"KRN","B",.84,.84)

"BLD",1887,"KRN","B",3.6,3.6)

"BLD",1887,"KRN","B",3.8,3.8)

"BLD",1887,"KRN","B",9.2,9.2)

"BLD",1887,"KRN","B",9.8,9.8)

"BLD",1887,"KRN","B",19,19)

"BLD",1887,"KRN","B",19.1,19.1)

"BLD",1887,"KRN","B",101,101)

"BLD",1887,"KRN","B",409.61,409.61)

"BLD",1887,"KRN","B",771,771)

"BLD",1887,"KRN","B",869.2,869.2)

"BLD",1887,"KRN","B",870,870)

"BLD",1887,"KRN","B",8994,8994)

"BLD",1887,"QUES",0)
^9.62^^
"BLD",1887,"REQB",0)
^9.611^1^1
"BLD",1887,"REQB",1,0)
GMRY*4.0*2^2
"BLD",1887,"REQB","B","GMRY*4.0*2",1)

"MBREQ")
0
"PKG",332,-1)
1^1
"PKG",332,0)
GEN. MED. REC. - I/O^GMRY^Intake/Output Module of General Medical Record.
"PKG",332,22,0)
^9.49I^1^1
"PKG",332,22,1,0)
4.0^2970425^2970702^64
"PKG",332,22,1,"PAH",1,0)
3^2990804
"PKG",332,22,1,"PAH",1,1,0)
^^2^2^2990804
"PKG",332,22,1,"PAH",1,1,1,0)
Please see the patch description for GMRY*4*3 on FORUM for an
"PKG",332,22,1,"PAH",1,1,2,0)
explanation of this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","GMRYUT0")
0^1^B21609725
"RTN","GMRYUT0",1,0)
GMRYUT0 ;HIRMFO/YH-PATIENT I/O UTILITIES - PATIENT SEARCH AND IV DISPLAY ;2/12/91
"RTN","GMRYUT0",2,0)
 ;;4.0;Intake/Output;**3**;Apr 25, 1997
"RTN","GMRYUT0",3,0)
PATDAT ;SELECT PATIENT
"RTN","GMRYUT0",4,0)
 S DIC(0)="AEQMZ",DIC="^DPT(" D ^DIC K DIC S DFN=+Y I DFN'>0 S GMROUT=1 Q
"RTN","GMRYUT0",5,0)
PT D 1^VADPT S GMRWARD(1)=$S($D(GMRVWLO):GMRVWLO,1:$P(VAIN(4),"^",2)),GMRWARD=$P(VAIN(4),"^"),GMRVADM=$P(VAIN(7),"^",2),GMRAGE=$P(VADM(4),"^"),SSN=$P(VADM(2),"^",2),GMRDIAG=$P(VAIN(9),"^"),GMRBED=$P($P(VAIN(5),"^"),"-",1,2)
"RTN","GMRYUT0",6,0)
 S GMRSEX=$P(VADM(5),"^",2),GMRBTH=$P(VADM(3),"^",2),GMRNAM=$P(VADM(1),"^"),GMRHLOC=+$P(VAIN(4),"^") D KVAR^VADPT K VA I $D(^DIC(42,+GMRHLOC,44)) S GMRHLOC=+$P(^(44),"^") Q:GMRHLOC>0
"RTN","GMRYUT0",7,0)
 Q
"RTN","GMRYUT0",8,0)
HOSP S DIC("A")="Select Hospital Location: ",DIC=44,DIC(0)="AEMQ",DIC("S")="I $P(^(0),U,3)'=""Z""" D ^DIC K DIC I Y'>0 S GMROUT=1 Q
"RTN","GMRYUT0",9,0)
 S GMRHLOC=+Y Q
"RTN","GMRYUT0",10,0)
LISTIV ;LIST CURRENT IV LINES
"RTN","GMRYUT0",11,0)
 K GMRDATA S GMRVN=0,GN=0 F II=0:0 S GMRVN=$O(^GMR(126,DA,"IV","C",GMRVN)) Q:GMRVN'>0  D SAVEIV
"RTN","GMRYUT0",12,0)
 S GN(1)=GN I GN=0 W !!,"There is no IV running for this patient.",! G Q
"RTN","GMRYUT0",13,0)
Q K GTITR,GDATA,GMRVTYP,GMRVS Q
"RTN","GMRYUT0",14,0)
SAVEIV ;SAVE IV LINES IN ARRAY FOR SELECTION
"RTN","GMRYUT0",15,0)
 S GIV=0 F II=0:0 S GIV=$O(^GMR(126,DA,"IV","C",GMRVN,GIV)) Q:GIV'>0  I GMRDC=2!(GMRDC=0&($P($G(^GMR(126,DA,"IV",GIV,0)),"^",9)="")) S GDATA=^(0),GMRVTYP=$P(GDATA,"^",4),GMRVS=$P(GDATA,"^",2) I GMRVTYP'="",GMRVS'="" S GN=GN+1 D SET
"RTN","GMRYUT0",16,0)
 Q
"RTN","GMRYUT0",17,0)
SET S GMRDATA(GN)=9999999-GMRVN_"^"_GIV_"^"_GMRVTYP_"^"_GMRVS_"^"_$P(GDATA,"^",9)_"^"_$P(GDATA,"^",3)_"^"_$P(GDATA,"^",5)_"^"_$S($P(GDATA,"^",6)'="":"Started",1:$S($P(GDATA,"^",3)["LOCK":"Converted",1:"Added"))
"RTN","GMRYUT0",18,0)
 S GTITR=$P(GDATA,"^",12) I $D(^GMR(126,DA,"IV",GIV,"TITR","C")) D
"RTN","GMRYUT0",19,0)
 .S I=$O(^GMR(126,DA,"IV",GIV,"TITR","C",0)) I I>0 S I(1)=$O(^GMR(126,DA,"IV",GIV,"TITR","C",I,0)) S GTITR=$S($D(^GMR(126,DA,"IV",GIV,"TITR",I(1),0)):$P(^(0),"^",2),1:GTITR)
"RTN","GMRYUT0",20,0)
 K I S GMRDATA(GN)=GMRDATA(GN)_"^"_$S(GTITR>0:GTITR_" ml/hr",1:"")
"RTN","GMRYUT0",21,0)
 S GSITE=GMRVS,GSITE(GSITE)="" D FINDCA^GMRYCATH(.GSITE) S GMRDATA(GN)=GMRDATA(GN)_"^"_GSITE(GSITE)_"^"_$G(^GMR(126,DFN,"IV",GIV,3))
"RTN","GMRYUT0",22,0)
 Q
"RTN","GMRYUT0",23,0)
SETDT I '(GMRDT>GMREND) S GDA=$O(^GMR(126,DA(1),"IV",DA,"IN","B",GMRDT,0)) S GN=GN+1,GMRDATA(GN)=GMRDT_"^"_GDA_"^"_GIN(GDA)
"RTN","GMRYUT0",24,0)
 Q
"RTN","GMRYUT0",25,0)
WAIT ;
"RTN","GMRYUT0",26,0)
 L +^GMR(126,DFN):0 I '$T W !!,"This patient's I/O records are being updated by someone else",!,"please try this patient later",!! S GMROUT=1 Q
"RTN","GMRYUT0",27,0)
 Q
"RTN","GMRYUT0",28,0)
KILLV K GMRNO,GMRVNM,II,GMRVN,GMRDATA,GDTEND,GMRVP,GMRVS,GMRVSTP,GMRVSTR,GMRVL,GMRVTYP,GADDI,GBOTT,GSOL,GSTREN,GIV,GIVDT,GWRITE
"RTN","GMRYUT0",29,0)
 Q
"RTN","GMRYUT0",30,0)
SELIV ;LIST IV  FOR THE SELECTED IV LINE
"RTN","GMRYUT0",31,0)
 D IVINTK^GMRYUT8 I $D(GTOTAL) W !,?5,"Total amount absorbed: "_$S(GSTAR'="":GSTAR,1:($P(^GMR(126,DA(1),"IV",DA,0),"^",5)-GTOTAL)_" mls"),!!
"RTN","GMRYUT0",32,0)
 K GMRDATA S (GDCIV,GN)=0,GX="",GMRDEL="",GMRDC=1 I $D(^GMR(126,DA(1),"IV",DA,"IN",0)) S GMRDT=0 F  S GMRDT=$O(^GMR(126,DA(1),"IV",DA,"IN","B",GMRDT)) Q:GMRDT'>0  D SETDT
"RTN","GMRYUT0",33,0)
 S GN(1)=GN I '$D(GMRDATA) W !,?5,$C(7),"No intake records for this IV line within the last 48 hours" G DT
"RTN","GMRYUT0",34,0)
 I $D(GMRDATA) D SELECT^GMRYUT3 I $E(GX)="^" S DA=DFN G QIV
"RTN","GMRYUT0",35,0)
 D WARN I "Nn"[GX&(GX'="") S GX="" G DT
"RTN","GMRYUT0",36,0)
 I GX>0 S DA(2)=DA(1),DA(1)=DA,DA=+$P(GX,"^",2) G:DA'>0 QIV S GHLOC=$P($G(^GMR(126,DFN,"IV",DA(1),"IN",DA,0)),"^",5) D IV^GMRYUT8 S DA=DFN G QIV
"RTN","GMRYUT0",37,0)
DT S X="",GHLOC=GMRHLOC S %DT("A")="Please enter a new DATE/TIME: ",%DT="AETXRS",%DT(0)="-NOW" D ^%DT K %DT S (GX,X)=Y I Y<1 S X="" S DA=DFN G QIV
"RTN","GMRYUT0",38,0)
DC I '$D(^GMR(126,DA(1),"IV",DA,"IN",0)) S ^(0)="^126.313IDA^0^0"
"RTN","GMRYUT0",39,0)
 K DD S GSAVE=GMRVTYP,DLAYGO=126.313,X=GX,DA(2)=DA(1),DA(1)=DA,DIC="^GMR(126,"_DA(2)_",""IV"","_DA(1)_",""IN"",",DIC(0)="ML" D WAIT^GMRYUT0 D:'GMROUT FILE^DICN L:'GMROUT -^GMR(126,DFN)
"RTN","GMRYUT0",40,0)
 K DR,DIC,DLAYGO,DD S DA=+$G(Y),GMRVTYP=GSAVE I $G(Y)'>0 S GMROUT=1,DA=DA(1),DA(1)=DA(2) G QIV
"RTN","GMRYUT0",41,0)
 D IV^GMRYUT8
"RTN","GMRYUT0",42,0)
QIV W ! K GMRX,GHLOC,GX,GY,X,GMRDEL,GMRVOL,GMRDATA,GDATE,GMRDT,DIC,Y Q
"RTN","GMRYUT0",43,0)
WARN W !!,"If you modify your original remaining entry, (i.e. Amount Left),",!,"please check any other entries for possible inaccuracies",! Q
"VER")
8.0^21.0
**END**
**END**

$TXT Created by LEYVA,KATHRYN at DEVFEY.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 03/02/05 at 11:40
=============================================================================
Run Date: MAR 18, 2005                     Designation: ECX*3*78
Package : ECX - DSS EXTRACTS                  Priority: Mandatory
Version : 3        SEQ #71                      Status: Released
                  Compliance Date: APR 18, 2005
=============================================================================

Associated patches: (v)ECX*3*49    <<= must be installed BEFORE `ECX*3*78'

Subject: BLOOD BANK EXTRACT

Category: 
  - Enhancement (Mandatory)

Description:
============

 The Decision Support System (DSS) Blood Bank Extract project will provide a 
 means of exporting data from the VistA Blood Bank application and 
 transmitting it to a DSS database residing at the Austin Automated Center 
 (AAC). Data from the VistA Blood Bank package will be stored by the
 extract routine in an intermediate file, where it will be temporarily
 available for local site DSS review, and audit prior to running of the
 extract. The data will then be transmitted to the AAC, where it will be
 formatted and uploaded into other software products.
  
 The following updates to the DSS package will be delivered with this patch:
  
 1. Two new routines ECXLBB and ECXPLBB. ECXLBB performs the extract 
    process and seeds the Blood Bank data into the BLOOD BANK EXTRACT file.  
    ECXPLBB contains the algorithms that generate the Pre-Extract Audit 
    Report.
  
 2. The new BLOOD BANK EXTRACT (#727.829) file, which will hold the data 
    retrieved from the VistA Blood Bank database. Data retrieval is
    performed using the new Blood Bank Extract [ECXLBB] option. The data
    recorded in this file is built into an electronic message and exported
    to the AAC.
  
 3. Two new fields, LAST DATE LBB (#69) and LBB STATUS (#70), have been 
    added to the existing DSS EXTRACTS (#728) file. These fields are needed
    during the Blood Bank extract process.
  
 4. Two new options, Blood Bank Extract [ECXLBB] and LBB Pre-Extract Audit 
    Report [ECX LBB PRE-EXTRACT] that invoke the extract process and the 
    pre-extract process respectively.  
  
 5. The new mail group DSS-LBB has been created for the purpose of
    receiving messages after the extract has been run and when data has
    been transmitted to the AAC. Confirm that the DSS Site Manager, and
    others as deemed appropriate by the DSS Site Manager, are members of
    this DSS mail group.
  
 6. A new record entry has been added to the EXTRACT DEFINITIONS (#727.1)
    file that identifies the new Blood Bank extract. Since the EXTRACT 
    NAME field (#.01) and the FILE NUMBER field (#1) are national standard 
    entries, the new record entry needs to be exported with the patch.
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 20030108 - DSS Blood Bank Extract 
  
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 There are no Remedy tickets associated with this patch.
  
  
 Test Sites:
 -----------
 Portland
 Little Rock
 Minneapolis
 Cheyenne
  
  
 Documentation Retrieval
 -----------------------
  
  Sites may retrieve the software and documentation directly using FTP from
  the following Office of Information Field Offices (OIFOs):
  
  OIFO               FTP ADDRESS                  DIRECTORY
  --------------     ------------------------     ------------------
  Albany             ftp.fo-albany.med.va.gov     anonymous.software
  Hines              ftp.fo-hines.med.va.gov      anonymous.software
  Salt Lake City     ftp.fo-slc.med.va.gov        anonymous.software
  
  
  The following files will be available:
  
  FILE NAMES             FORMAT    DESCRIPTION
  ----------------       -------   -------------------------------------
  DSS_3_FY2005_EF.PDF    BINARY    Extract Format Guide
  DSS_3_FY2005_UM.PDF    BINARY    User Manual in PDF format
  DSS_3_FY2005_TM.PDF    BINARY    Technical Manual in PDF format
  
  
 Also, once the patch has been released nationally the documentation can be 
 accessed at: http://www.va.gov/vdl/Financial_Admin.asp?appID=35
    
  
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If installed during the normal workday, it is recommended that the 
 following selection(s) in the OPTION (#19) file, and all of their 
 descendants be disabled to prevent possible conflicts while running the 
 KIDS Install. Other VISTA users will not be affected.
  
    Maintenance        [ECX MAINTENANCE]                                
    Package Extracts   [ECXMENU]
  
 Install Time - less than 5 minutes
  
        
  
 1. LOAD TRANSPORT GLOBAL 
    ---------------------
    Choose the PackMan message containing this patch and invoke the 
    INSTALL/CHECK MESSAGE PackMan option.  
              
 2. DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only) 
    -----------------------
    Disable routine mapping on all systems for the routines listed in 
    step 3 below.  
       
    NOTE:  If the routines included in this patch are not currently in 
           your mapped routine set, please skip this step.
   
 3. COMPONENTS SENT WITH PATCH 
    --------------------------
    The following is a list of the routines included in this patch.  
    The second line of each of these routines now looks like: 
   
           ;;3.0; DSS EXTRACTS;**[patch list]**; Dec 22, 1997
   
                           CHECK^XTSUMBLD results
  
    Routine          Before Patch     After Patch    Patch List 
    -------          ------------     -----------    ----------
    ECXLBB               N/A           6664005          78
    ECXPLBB              N/A           8301788          78
    ECXUTL4            6802270         6853915       39,41,46,49,78
   
    Total number of routines - 3
  
  
  
    The following is a list of new fields included in this patch:
    -------------------------------------------------------------    
  
    Field Name (Number)                  File Name (Number)
    -------------------                  ------------------
    LAST DATE LBB  (#69)                 DSS EXTRACTS (#728) 
    LBB STATUS    (#70)                  DSS EXTRACTS (#728)
    SEQUENCE NUMBER (.01)                BLOOD BANK EXTRACT (#727.829)
    YEAR MONTH      (#1)                 BLOOD BANK EXTRACT (#727.829)
    EXTRACT NUMBER  (#2)                 BLOOD BANK EXTRACT (#727.829)
    FACILITY        (#3)                 BLOOD BANK EXTRACT (#727.829)
    PATIENT NO. - DFN (#4)               BLOOD BANK EXTRACT (#727.829)
    SSN              (#5)                BLOOD BANK EXTRACT (#727.829)
    NAME             (#6)                BLOOD BANK EXTRACT (#727.829)
    IN/OUT PATIENT INDICATOR (#7)        BLOOD BANK EXTRACT (#727.829)
    ENCOUNTER NUMBER  (#8)               BLOOD BANK EXTRACT (#727.829)
    DATE OF TRANSFUSION (#9)             BLOOD BANK EXTRACT (#727.829)
    TIME OF TRANSFUSION (#10)            BLOOD BANK EXTRACT (#727.829)
    COMPONENT           (#11)            BLOOD BANK EXTRACT (#727.829)
    COMPONENT ABBREVIATION (#12)         BLOOD BANK EXTRACT (#727.829)
    NUMBER OF UNITS (#13)                BLOOD BANK EXTRACT (#727.829)
    VOLUME  (#14)                        BLOOD BANK EXTRACT (#727.829)
    REACTION (#15)                       BLOOD BANK EXTRACT (#727.829)
    REACTION TYPE (#16)                  BLOOD BANK EXTRACT (#727.829)
    FEEDER LOCATION  (#17)               BLOOD BANK EXTRACT (#727.829)
    DSS PRODUCT DEPARTMENT  (#18)        BLOOD BANK EXTRACT (#727.829)
    DSS IP #   (#19)                     BLOOD BANK EXTRACT (#727.829)
  
                 
  
    The following is a list of options included in this patch:
    ----------------------------------------------------------
    Option Name                     File          New/Modified
    -----------                     ----          ------------ 
    LBB Pre-Extract Audit Report 
      [ECX LBB PRE-EXTRACT]         19            NEW
    Blood Bank Extract [ECXLBB]     19            NEW
    Package Extracts [ECXMENU]      19            MODIFIED
    Maintenance [ECX MAINTENANCE]   19            MODIFIED 
   
  
    The following is a list of files included in this patch:
    --------------------------------------------------------
                                  UP    SEND  DATA   USER
                                  DATE  SEC.  COMES  SITE   RSLV OVER
    FILE #  NAME                  DD    CODE  W/FILE DATA   PTS  RIDE
    -----------------------------------------------------------------
    727.1   EXTRACT DEFINITIONS   NO    NO    YES    OVER   NO  NO
         DATA SCREEN: I $P($G(^ECX(727.1,+Y,0)),U)="BLOOD BANK"   
    727.829 BLOOD BANK EXTRACT          YES   NO    NO
    728     DSS EXTRACTS                YES   NO    NO   
  
     
    The following mail group has been included with this patch:
    -----------------------------------------------------------
    Mail Group                    New/Modified
    ----------                    ------------
    DSS-LBB                       NEW               
  
           
 4. START UP KIDS 
    -------------
    Start up the Kernel Installation and Distribution System Menu
    [XPD MAIN]:
    
         Edits and Distribution ...  
         Utilities ...  
         Installation ...  
  
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
         Load a Distribution 
         Print Transport Global 
         Compare Transport Global to Current System 
         Verify Checksums in Transport Global 
         Install Package(s) 
         Restart Install of Package(s) 
         Unload a Distribution 
         Backup a Transport Global 
    
 Select Installation Option: 
    
 5. Select Installation Option: 
    ---------------------------
    NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
           NAME, enter ECX*3.0*78):
       
    a. Backup a Transport Global - This option will create a backup
       message of any routines exported with this patch. It will not
       backup any other changes such as DD's or templates.
    b. Compare Transport Global to Current System - This option will
       allow you to view all changes that will be made when this patch
       is installed.  It compares all components of this patch
       (routines, DD's, templates, etc.).
    c. Verify Checksums in Transport Global - This option will allow
       you to ensure the integrity of the routines that are in the
       transport global.
      
 6. Select Installation Option: Install Package(s) 
                                ------------------
    **This is the step to start the installation of this KIDS patch: 
    
    a. Choose the Install Package(s) option to start the patch install.
    b. When prompted 'Enter the Coordinator for Mail Group 'DSS-LBB':' 
       enter the name given by the DSS site manager (refer to item 4 in
       the patch description).
    c. When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of 
       Install? YES//' answer NO if the install is run during peak periods 
       since the Menu rebuild will significantly extend the length of 
       the install.  Consider rebuilding the Menu Trees at a later time 
       using the Kernel option:  XQBUILDTREE.      
    d. When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
       YES//' answer NO 
    e. When prompted 'Want to DISABLE Scheduled Options, Menu 
       Options, and Protocols? YES//' answer YES 
    f. When prompted 'Enter options you wish to mark as 'Out Of
       Order':'  Enter the following options:
   
           Maintenance        [ECX MAINTENANCE]                              
           Package Extracts   [ECXMENU]
  
    g. When prompted 'Enter protocols you wish to mark as 'Out Of Order':'
       press <return>.
  
 7. REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
    -------------------------
    Optional - Include the routines distributed with this patch
    in the mapped routine set.
      
    NOTE: This step is only necessary if you performed step 2 or 
          if you wish to include the routines in your mapped set.

Routine Information:
====================

=============================================================================
User Information:
Entered By  : LEYVA,KATHRYN                 Date Entered  : NOV 23, 2004
Completed By: ROBBINS,BRADLEY               Date Completed: MAR 16, 2005
Released By : STRICKLAND,JOAN C             Date Released : MAR 18, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

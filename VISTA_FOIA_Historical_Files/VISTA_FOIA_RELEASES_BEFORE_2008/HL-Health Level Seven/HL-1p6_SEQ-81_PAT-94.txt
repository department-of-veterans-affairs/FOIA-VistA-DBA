$TXT Created by ANDREASSEN,LARRY J at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on TUESDAY, 07/16/02 at 13:35
=============================================================================
Run Date: AUG 06, 2002                     Designation: HL*1.6*94
Package : HL - HEALTH LEVEL SEVEN     Priority: Mandatory
Version : 1.6        SEQ #81                    Status: Released
=============================================================================


Subject: Invalid NEWing of HLP array

Category: 
  - Routine

Description: 
============

 Test sites:    VA Greater Los Angeles Regional Healthcare System,
                Hines VAMC, VA Maryland Healthcare System
  
 NOIS:          None
  
 Note:          This patch requires that KIDS build HL*1.6*91 be
                installed.
  
 Three VistA HL7 application programmer interfaces (APIs) do not properly
 handle passed-by-reference data.  The affected APIs are:
  
   - DIRECT^HLMA
   - GENERATE^HLMA
   - GENACK^HLMA1
  
 These APIs have some required parameters, and some optional parameters.  
 (More information about these parameters can be found in chapter 12 of the
 VistA HL7 Site Manager & Developer manual.) The last parameter for all
 three APIs is a pass-by-reference parameter.  This parameter can contain
 the following entries:
  
   - HLP("CONTPTR")
   - HLP("NAMESPACE")      [Refer to patch HL*1.6*91]
   - HLP("SECURITY")
  
 (In this patch text, the HLP array is used.  However, since this is a 
 pass-by-reference array, any other array name can be used.)
  
 The array variables mentioned above should be stored in the MSH segment of
 any HL7 Message Administration file (#773) entries created.  These
 variables are stored properly in HL7 Message Text file (#772) entries, but
 were not stored in the HL7 Message Administration file (#773) prior to
 this patch. The reason for the error was invalid newing of the HLP
 array.  This patch resolves this problem, and now the data held in the HLP
 array is properly stored.
  
 The first and second line of the routine included in this patch is
 shown below.
  
 HLMA2   ;AISC/SAW-Message Administration Module ;09/20/2001  12:35
         ;;1.6;HEALTH LEVEL SEVEN;**19,43,57,58,64,65,76,82,91,94**;Oct 13
           , 1995
  
 The VA Kernel checksum for the routine included in this patch (calculated
 using CHECK^XTSUMBLD) is listed below.
  
                 Checksum        Checksum
 Routine Name  Before Patch    After Patch     Patch List
 ============  ============    ===========     =====================
 HLMA2         8331015         8589903         19,43,57,58,64,65,76,82,
                                               91,94
  
 Sites should use CHECK^XTSUMBLD to verify checksums after patch
 installation.
  
 Installation Instructions:
 ==========================
  
    NOTICE:  Do not proceed unless patch HL*1.6*91 has been installed.
  
    1.  Users are allowed to be on the system during the installation.
  
    2.  Install the KIDS build onto your system as follows:
  
        - Using Mailman, read the KIDS build message.
        - At the 'Enter message action' prompt, enter 'INSTALL/CHECK
          MESSAGE' and press RETURN.
        - At the 'OK to continue with Load?' prompt enter 'YES' and press
          RETURN.
        - You will be asked 'Want to continue with Load?' immediately
          before installation begins.  If you want to continue, enter 'YES'
          and press RETURN.  If you wish to stop, enter 'NO' and press
          RETURN.
    
    3.  Check the integrity of the just loaded build, and compare this
        build to the software on your system.  You will need to use the
        following options (which are all on the 'Installation [XPD 
        INSTALLATION MENU]' menu option):
  
         - VERIFY CHECKSUMS IN TRANSPORT GLOBAL - this option will allow
           you to ensure the integrity of the routine(s) that are in the
           transport global using calculated checksums for every routine.
           If the transport global checksums are incorrect, do not 
           continue with installation, and contact the patch developer
           for a new patch.  If the checksums are correct, continue to 
           the next step.
   
         - BACKUP A TRANSPORT GLOBAL - this option will create a backup
           message of any routines exported with the patch.  It will NOT
           backup any other changes such as DDs or templates.
   
         - COMPARE TRANSPORT GLOBAL TO CURRENT SYSTEM - this option will
           allow you to view all changes that will be made when the
           patch is installed.  It compares all components of the patch,
           including routines, data dictionaries, templates, etc.
   
         - PRINT TRANSPORT GLOBAL - this option will allow you to view the
           components of the KIDS build.
  
        If all the above steps have been done, continue to the following
        steps.
  
    4.  AXP/DSM SITES: Review your mapped routine set.  If the
        routine(s) listed in the ROUTINE SUMMARY section are mapped, they
        should be removed from the mapped set at this time.
  
    5.  Stop all background processes (logical links and incoming
        and outgoing filers) using the 'Filer and Link Management
        Option's 'Stop All Messaging Background Processes [HL STOP ALL]'
        menu option.
  
    6.  Stop the link manager using the 'TCP Link Manager Start/Stop
        [HL START/STOP LINK MANAGER]' menu option.
  
    7.  AXP/DSM SITES ONLY: Disable all HL7 UCX Services for this
        installation.
  
    8.  The patch is now loaded into a transport global on your
        system. The next step is to use KIDS to install the Transport
        global. This is done using the 'Installation' menu's 'Install
        Package(s) [XPD INSTALL BUILD]' menu option. When using this
        menu option to install the patch build, you will be asked
        several questions.  The questions, and the answers you should
        supply, are shown below.
  
        INSTALL NAME: <HL*1.6*94>
        Want KIDS to INHIBIT LOGONS during the install?  <NO>
        Want to DISABLE Scheduled Options, Menu Options,
          and Protocols?  <NO>
  
    9.  Start all background processes (logical links and incoming
        and outgoing filers) using the Filer and Link Management
        Option's 'Restart/Start All Links and Filers [HL TASK RESTART]'
        menu option.
  
        (Note that links that do not have "autostart" enabled will need
        to be restarted manually.)
  
   10. AXP/DSM SITES ONLY: If you previously disabled an HL7 UCX Service
       for this installation, you may enable it now.
  
   11.  AXP/DSM SITES ONLY: After the patch has been installed, rebuild
        your map set, if necessary.
  
   12.  Start the link manager using the 'TCP Link Manager Start/Stop
        [HL START/STOP LINK MANAGER]' menu option.

Routine Information:
====================

Routine Name:
  - HLMA2


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : ANDREASSEN,LARRY               Date Entered : MAY 07, 2002
Completed By: HERREN,CATHRYN                Date Completed: JUL 30, 2002
Released By : GAYFIELD,LISA                 Date Released : AUG 06, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT

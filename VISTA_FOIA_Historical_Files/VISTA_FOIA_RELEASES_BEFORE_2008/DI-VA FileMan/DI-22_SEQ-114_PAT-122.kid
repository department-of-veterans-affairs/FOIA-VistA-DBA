Released DI*22*122 SEQ #114
Extracted from mail message
**KIDS**:DI*22.0*122^

**INSTALL NAME**
DI*22.0*122
"BLD",482,0)
DI*22.0*122^VA FILEMAN^0^3030122^y
"BLD",482,1,0)
^^2^2^3030122^
"BLD",482,1,1,0)
See patch DI*22*122 in the National Patch Module on FORUM for complete
"BLD",482,1,2,0)
information on this patch.
"BLD",482,4,0)
^9.64PA^^
"BLD",482,"KRN",0)
^9.67PA^8989.52^19
"BLD",482,"KRN",.4,0)
.4
"BLD",482,"KRN",.401,0)
.401
"BLD",482,"KRN",.402,0)
.402
"BLD",482,"KRN",.403,0)
.403
"BLD",482,"KRN",.5,0)
.5
"BLD",482,"KRN",.84,0)
.84
"BLD",482,"KRN",3.6,0)
3.6
"BLD",482,"KRN",3.8,0)
3.8
"BLD",482,"KRN",9.2,0)
9.2
"BLD",482,"KRN",9.8,0)
9.8
"BLD",482,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",482,"KRN",9.8,"NM",1,0)
DIC1^^0^B33524054
"BLD",482,"KRN",9.8,"NM","B","DIC1",1)

"BLD",482,"KRN",19,0)
19
"BLD",482,"KRN",19.1,0)
19.1
"BLD",482,"KRN",101,0)
101
"BLD",482,"KRN",409.61,0)
409.61
"BLD",482,"KRN",771,0)
771
"BLD",482,"KRN",870,0)
870
"BLD",482,"KRN",8989.51,0)
8989.51
"BLD",482,"KRN",8989.52,0)
8989.52
"BLD",482,"KRN",8994,0)
8994
"BLD",482,"KRN","B",.4,.4)

"BLD",482,"KRN","B",.401,.401)

"BLD",482,"KRN","B",.402,.402)

"BLD",482,"KRN","B",.403,.403)

"BLD",482,"KRN","B",.5,.5)

"BLD",482,"KRN","B",.84,.84)

"BLD",482,"KRN","B",3.6,3.6)

"BLD",482,"KRN","B",3.8,3.8)

"BLD",482,"KRN","B",9.2,9.2)

"BLD",482,"KRN","B",9.8,9.8)

"BLD",482,"KRN","B",19,19)

"BLD",482,"KRN","B",19.1,19.1)

"BLD",482,"KRN","B",101,101)

"BLD",482,"KRN","B",409.61,409.61)

"BLD",482,"KRN","B",771,771)

"BLD",482,"KRN","B",870,870)

"BLD",482,"KRN","B",8989.51,8989.51)

"BLD",482,"KRN","B",8989.52,8989.52)

"BLD",482,"KRN","B",8994,8994)

"BLD",482,"PRE")
DIENVWRN
"BLD",482,"QUES",0)
^9.62^^
"BLD",482,"REQB",0)
^9.611^1^1
"BLD",482,"REQB",1,0)
DI*22.0*70^2
"BLD",482,"REQB","B","DI*22.0*70",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
VA FILEMAN^DI^FM INIT
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
22.0^2990330^3030110^41
"PKG",5,22,1,"PAH",1,0)
122^3030122
"PKG",5,22,1,"PAH",1,1,0)
^^2^2^3030122
"PKG",5,22,1,"PAH",1,1,1,0)
See patch DI*22*122 in the National Patch Module on FORUM for complete
"PKG",5,22,1,"PAH",1,1,2,0)
information on this patch.
"PRE")
DIENVWRN
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","DIC1")
0^1^B33524054
"RTN","DIC1",1,0)
DIC1 ;SFISC/GFT/TKW-READ X, SHOW CHOICES ;8:39 AM  22 Jan 2003
"RTN","DIC1",2,0)
 ;;22.0;VA FileMan;**1,4,17,20,31,48,78,86,70,122**;Mar 30, 1999
"RTN","DIC1",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","DIC1",4,0)
 K DUOUT,DTOUT N DD,DIY,DISUB,DIPRMT
"RTN","DIC1",5,0)
 D GETFA(.DIC,.DO)
"RTN","DIC1",6,0)
 N DIPRMT D GETPRMT^DIC11(.DIC,.DO,.DINDEX,.DIPRMT)
"RTN","DIC1",7,0)
B I $D(DIC("B")) D
"RTN","DIC1",8,0)
 . N B S B(1)=$G(DIC("B")) M B=DIC("B")
"RTN","DIC1",9,0)
 . N DIGBL,DINONULL S DIGBL=DIC_""""_DINDEX_"""",DINONULL=1
"RTN","DIC1",10,0)
 . F DISUB=1:1:DINDEX("#") D  S:B]"" DIY(DISUB)=B
"RTN","DIC1",11,0)
 . . S B=$G(B(DISUB)) I B="" S DINONULL=0 Q
"RTN","DIC1",12,0)
 . . S X="" S:DINONULL X=$O(@(DIGBL_",B)"))
"RTN","DIC1",13,0)
 . . S B=$S($D(^(B)):B,$F(X,B)-1=$L(B):X,$D(@(DIC_"B,0)")):$P(^(0),U),1:B)
"RTN","DIC1",14,0)
 . . N B1 S B1=B I "VPD"[DINDEX(DISUB,"TYPE") D
"RTN","DIC1",15,0)
 . . . I B D  Q:$D(DIY(DISUB,"EXT"))
"RTN","DIC1",16,0)
 . . . . N TYPE S TYPE=DINDEX(DISUB,"TYPE")
"RTN","DIC1",17,0)
 . . . . I TYPE="D" Q:B'?7N.1".".N
"RTN","DIC1",18,0)
 . . . . I TYPE="P" Q:B'?.N.1".".N
"RTN","DIC1",19,0)
 . . . . I TYPE="V" Q:B'?1.N.1".".N1";".E
"RTN","DIC1",20,0)
 . . . . S DIY(DISUB,"EXT")=$$EXT^DIC2(DINDEX(DISUB,"FILE"),DINDEX(DISUB,"FIELD"),B)
"RTN","DIC1",21,0)
 . . . . S:TYPE="P" B=DIY(DISUB,"EXT") Q
"RTN","DIC1",22,0)
 . . . D CHK^DIE(DINDEX(DISUB,"FILE"),DINDEX(DISUB,"FIELD"),"",B,.B1,"DIERROR") S:$G(DIERROR) B1=B
"RTN","DIC1",23,0)
 . . . K DIERROR,DIERR Q
"RTN","DIC1",24,0)
 . . S:DINONULL DIGBL=DIGBL_","_$S(+$P(B1,"E")=B1:B1,1:""""_B1_"""")
"RTN","DIC1",25,0)
 . . Q
"RTN","DIC1",26,0)
 . Q
"RTN","DIC1",27,0)
PROMPT ; Prompt user for lookup values
"RTN","DIC1",28,0)
 D PROMPT^DIC11
"RTN","DIC1",29,0)
 Q
"RTN","DIC1",30,0)
 ;
"RTN","DIC1",31,0)
 ;
"RTN","DIC1",32,0)
GETFA(DIC,DO) ; Get file attributes
"RTN","DIC1",33,0)
 ; DIC is open global reference, output same as documented in DO^DIC1.
"RTN","DIC1",34,0)
 D DO Q
"RTN","DIC1",35,0)
 ;
"RTN","DIC1",36,0)
DO ; GET FILE ATTR
"RTN","DIC1",37,0)
 Q:$D(DO)  I $D(@(DIC_"0)")) S DO=^(0)
"RTN","DIC1",38,0)
 E  S DO="0^-1" I $D(DIC("P")) S DO=U_DIC("P"),^(0)=DO
"RTN","DIC1",39,0)
DO2 S DO(2)=$P(DO,U,2) I DO?1"^".E S DO=$O(^DD(+DO(2),0,"NM",0))_DO
"RTN","DIC1",40,0)
 I DO(2)["s",$D(^DD(+DO(2),0,"SCR")) S DO("SCR")=^("SCR")
"RTN","DIC1",41,0)
 Q:$D(DIC("W"))  Q:DO(2)'["I"  Q:'$D(^DD(+DO(2),0,"ID"))
"RTN","DIC1",42,0)
 S DIC("W")=""
"RTN","DIC1",43,0)
P ; Add code to DIC("W") to display identifiers on pointed-to files
"RTN","DIC1",44,0)
 I DO(2)["P" D WOV,PTRID^DIC5(.DO,.DIC) Q
"RTN","DIC1",45,0)
 N % S %=0
"RTN","DIC1",46,0)
 ;
"RTN","DIC1",47,0)
W F  S %=$O(^DD(+DO(2),0,"ID",%)) D:%]""  Q:%=""
"RTN","DIC1",48,0)
 . N X S X=^DD(+DO(2),0,"ID",%) Q:X="W """""
"RTN","DIC1",49,0)
 . I $L(DIC("W"))+$L(X)>224 D WOV S %="" Q
"RTN","DIC1",50,0)
 . I DIC("W")="" S DIC("W")="N C,DINAME"
"RTN","DIC1",51,0)
 . S DIC("W")=DIC("W")_" W ""  "" "_X
"RTN","DIC1",52,0)
 . Q
"RTN","DIC1",53,0)
 Q
"RTN","DIC1",54,0)
 ;
"RTN","DIC1",55,0)
WOV S DIC("W")="N DIFILEI,DIEN,DIGBL S DIFILEI=+DO(2),DIEN=Y,DIGBL=DIC D WOV^DICQ1"
"RTN","DIC1",56,0)
 Q
"RTN","DIC1",57,0)
 ;
"RTN","DIC1",58,0)
RENUM ;
"RTN","DIC1",59,0)
 D GETFA(.DIC,.DO)
"RTN","DIC1",60,0)
 I '$D(DF),X?.NP,^DD(+DO(2),.01,0)["DINUM",$D(@(DIC_"X)")) D  Q:Y>0
"RTN","DIC1",61,0)
 . S Y=X D S^DIC3 I $T N DZ D ADDKEY^DIC3,GOT^DIC2 Q
"RTN","DIC1",62,0)
 . S Y=-1 Q
"RTN","DIC1",63,0)
 D F^DIC Q
"RTN","DIC1",64,0)
 ;
"RTN","DIC1",65,0)
DT S DST=DST_$$FMTE^DILIBF(%,"7S")
"RTN","DIC1",66,0)
 I '$D(DDS) W DST S DST=""
"RTN","DIC1",67,0)
 Q
"RTN","DIC1",68,0)
 ;
"RTN","DIC1",69,0)
Y ; Display a list of entries
"RTN","DIC1",70,0)
 N DD,DDD,DDC,DDH,DIOUT S DIY="",DIOUT=0,DD=DS("DD")
"RTN","DIC1",71,0)
 I DD=0,DIC(0)["T",DIC(0)["E" D DSPH^DIC0
"RTN","DIC1",72,0)
 F  S DD=$O(DS(DD)) Q:'DD  D  Q:DIOUT
"RTN","DIC1",73,0)
 . S DDH=DD-1,DIYX=0,DS("DD")=DD
"RTN","DIC1",74,0)
 . I DIC(0)["E" W:'$D(DDS) !?5,DD,?9 D
"RTN","DIC1",75,0)
 . . N Y S Y=+DS(DD)
"RTN","DIC1",76,0)
 . . D E Q
"RTN","DIC1",77,0)
 . I DIC(0)["Y" Q:DD<DS  D
"RTN","DIC1",78,0)
 . . F Y=DS:-1 Q:'DS(Y)  S Y(+DS(Y))=""
"RTN","DIC1",79,0)
 . . Q
"RTN","DIC1",80,0)
 . I DIC(0)'["E"!(DIC(0)["Y") S DS(0)="1^",DIOUT=1,DIY="" Q
"RTN","DIC1",81,0)
 . I DS>DD Q:DD#5
"RTN","DIC1",82,0)
 . S DIOUT=1
"RTN","DIC1",83,0)
 . I $D(DDS) S DDD=2,DDC=5 D LIST^DDSU K DDD,DDC
"RTN","DIC1",84,0)
 . I '$D(DDS) D
"RTN","DIC1",85,0)
 . . I DS>DD W !,"Press <RETURN> to see more, '^' to exit this list,"_$S(DIC(0)["T":" '^^' to exit all lists,",1:"")_" OR" ;**122**
"RTN","DIC1",86,0)
 . . W !,"CHOOSE "_$O(DS(0))_"-"_DD R ": ",DIY:$S($D(DTIME):DTIME,1:300) S:'$T DTOUT=1 Q
"RTN","DIC1",87,0)
 . I $G(DTOUT) W $C(7) S X="" Q
"RTN","DIC1",88,0)
 . I DIY[U!($G(DUOUT)) S DUOUT=1,X=U D  Q
"RTN","DIC1",89,0)
 . . I DIY?1"^^".E,DIC(0)["T" S DIROUT=1 Q
"RTN","DIC1",90,0)
 . . I DIY?1"^".E,DIC(0)["E",DIC(0)'["T" S DIROUT=1 Q
"RTN","DIC1",91,0)
 . Q
"RTN","DIC1",92,0)
 I DIY?1.N.1".".N D  I DIY,DIY'>DD,$G(DS(DIY)) S Y=+DS(DIY) D GOT S DS(0)=1_"^"_+Y Q
"RTN","DIC1",93,0)
 . S:($L($P(DIY,"."))>25!($L($P(DIY,".",2))>25)) DIY="-1" Q
"RTN","DIC1",94,0)
 I $L(DIY)>25 S DIY=-1
"RTN","DIC1",95,0)
 N I S I=$S($G(DUOUT):"1^U",$G(DTOUT):"1^T",DIY?1."?":"1^?",DIY:1,1:"")
"RTN","DIC1",96,0)
 I 'I,DIY]"",+$P(DIY,"E")'=DIY,'$G(DICR),DINDEX("#")=1 S I="2^"_DIY
"RTN","DIC1",97,0)
 Q:'I
"RTN","DIC1",98,0)
 S DS(0)=I,Y=-1
"RTN","DIC1",99,0)
 I DIY?1."?" D
"RTN","DIC1",100,0)
 . I (DIC(0)_$G(DICR(1,0)))'["A",$D(DICRS) Q
"RTN","DIC1",101,0)
 . N X,Y,DS D DSPHLP^DICQ(.DIC,.DIFILEI,.DINDEX,"?",1)
"RTN","DIC1",102,0)
 K DIY,DIYX Q
"RTN","DIC1",103,0)
 ;
"RTN","DIC1",104,0)
E S DST="" D
"RTN","DIC1",105,0)
 . Q:DIC(0)["U"
"RTN","DIC1",106,0)
 . I $O(DS(DD,0)) S DST=$$BLDDSP(.DS,DD) Q
"RTN","DIC1",107,0)
 . S %=$S($G(DILONGX):DICR(DICR,"ORG"),$G(DINDEX("IXTYPE"))'="S":$P(X,U),1:"")
"RTN","DIC1",108,0)
 . S %=%_$P(DS(DD),U,2,9)_$S($G(DIYX(DD)):DIY(DD),1:"")
"RTN","DIC1",109,0)
 . I ($G(DITRANX)!($G(DICRS))),$G(DINDEX(1,"TRANOUT"))]"",%]"" D  Q
"RTN","DIC1",110,0)
 . . N X S X=% X DINDEX(1,"TRANOUT") S DST=$G(X) Q
"RTN","DIC1",111,0)
 . I +$P(%,"E")=%,$D(DIDA) D DT Q
"RTN","DIC1",112,0)
 . I $G(DICRS),$G(DINDEX("IXTYPE"))="R" D
"RTN","DIC1",113,0)
 . . N F1,F2 S F1=$G(DINDEX(1,"FILE")),F2=$G(DINDEX(1,"FIELD"))
"RTN","DIC1",114,0)
 . . I F1,F2 S %=$$EXT^DIC2(F1,F2,%,"h")
"RTN","DIC1",115,0)
 . . Q
"RTN","DIC1",116,0)
 . S DST=% Q
"RTN","DIC1",117,0)
 I DIC(0)["s" S DIC(0)=$TR(DIC(0),"s")
"RTN","DIC1",118,0)
 I $D(DS(DD,"K")) S %=$G(DIX) M DIX=DS(DD) S DIX=%
"RTN","DIC1",119,0)
 S DIY=$S($G(DIYX(DD)):"",1:DIY(DD)) D WO^DIC2 Q
"RTN","DIC1",120,0)
 ;
"RTN","DIC1",121,0)
BLDDSP(DS,DD,DINDXFL,DIYX,DIY,DICRS) ; Build display of index values
"RTN","DIC1",122,0)
 N X,I S X=""
"RTN","DIC1",123,0)
 F I=0:0 S I=$O(DS(DD,I)) Q:'I  D
"RTN","DIC1",124,0)
 . I $L(X)+$L(DS(DD,I))>240 Q
"RTN","DIC1",125,0)
 . I I=1,$G(DINDXFL) S X=$P(DS(1),U,2,99)_$S($G(DIYX(1)):$G(DIY(1)),1:"") Q
"RTN","DIC1",126,0)
 . I I=1,$G(DICRS) Q
"RTN","DIC1",127,0)
 . S X=X_$P("  ^",U,I>1)_DS(DD,I) Q
"RTN","DIC1",128,0)
 Q X
"RTN","DIC1",129,0)
 ;
"RTN","DIC1",130,0)
GOT ; Set data for single entry selected by user.
"RTN","DIC1",131,0)
 N I,J,K
"RTN","DIC1",132,0)
 I DIY(DIY)="" S DIY(DIY)=$P($G(@(DIC_"Y,0)")),U)
"RTN","DIC1",133,0)
 S:$D(DDS) DST=X_$P(DS(DIY),U,2,9)_$S($G(DIYX(DIY)):$G(DIY(DIY)),1:"")
"RTN","DIC1",134,0)
 S K=$O(DIVPSEL("A"),-1) I K]"" S DIVPSEL(K)=Y
"RTN","DIC1",135,0)
 I $G(DIFINDR) D  Q
"RTN","DIC1",136,0)
 . S:$D(DDS) DS(0,"DST")=DST
"RTN","DIC1",137,0)
 . S DS(0,"Y")=+DS(DIY),DS(0,"X")=X_$P(DS(DIY),"^",2),DS(0,"DIYX")=$G(DIYX(DIY)),DS(0,"DIY")=DIY(DIY)
"RTN","DIC1",138,0)
 . M DS(0,1)=DS(DIY)
"RTN","DIC1",139,0)
 . Q
"RTN","DIC1",140,0)
 I $G(DIYX(DIY)) K DIYX S DIY(DIY)=$P($G(@(DIC_"Y,0)")),U)
"RTN","DIC1",141,0)
 D C^DIC2 Q
"RTN","DIC1",142,0)
 ;
"RTN","DIC1",143,0)
OK ;
"RTN","DIC1",144,0)
 S %=1 I $G(DS)=1 S DST="         ...OK" D Y^DICN W:'$D(DDS) !
"RTN","DIC1",145,0)
 I %>0 Q:%=1  D  S X=$G(DIX),Y=-1 Q  ;%=1=Yes, %=2=No ;22*70
"RTN","DIC1",146,0)
 . I $G(DICR) S DICR(DICR,31.2)=+Y ;Preserve IEN for future reference
"RTN","DIC1",147,0)
 . I +$G(DS) K DS S (DS,DS(0),DS("DD"))=0 ;ReInit Display array
"RTN","DIC1",148,0)
 . Q
"RTN","DIC1",149,0)
 I %=0 W !?4,$$EZBLD^DIALOG(8040),! G OK ;User asked for Help
"RTN","DIC1",150,0)
 I %=-1,$D(DTOUT) S DIROUT=1 ;User TIMED Out; DTOUT set in DICN
"RTN","DIC1",151,0)
 I %=-1,'$D(DTOUT) S (DUOUT,DIROUT)=1 ;User single up-arrowed out
"RTN","DIC1",152,0)
BAD S Y=-1
"RTN","DIC1",153,0)
 I $G(%Y)?1"^^".E S (DIROUT,DUOUT)=1
"RTN","DIC1",154,0)
 S DS(0)=$S($G(DTOUT):"1^T",$G(DUOUT):"1^U",$G(%)=-1:"1^U",1:"1^") Q
"RTN","DIC1",155,0)
MIX ;
"RTN","DIC1",156,0)
 N DID S DID=D_"^-1",DID(1)=2
"RTN","DIC1",157,0)
 N D S D=$P(DID,U)
"RTN","DIC1",158,0)
 G IX^DIC
"RTN","DIC1",159,0)
 ;
"RTN","DIC1",160,0)
 ;#8042  Select |filename|:
"RTN","DIC1",161,0)
 ;#8040   Answer with 'Yes' or 'No'
"RTN","DIENVWRN")
0^^B3680036
"RTN","DIENVWRN",1,0)
DIENVWRN ;IRMFO-SF/FM STAFF-ENVIRONMENT CHECK ROUTINE ;6:50 AM  24 Mar 2000
"RTN","DIENVWRN",2,0)
 ;;22.0;VA FileMan;;Mar 30, 1999
"RTN","DIENVWRN",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","DIENVWRN",4,0)
 ;
"RTN","DIENVWRN",5,0)
 ; Check XPDENV 0 = Loading; 1 = Installing
"RTN","DIENVWRN",6,0)
 I 'XPDENV Q  ; Loading Distribution - No Check
"RTN","DIENVWRN",7,0)
 ;
"RTN","DIENVWRN",8,0)
INSCHK ; Do Checks During Install Only
"RTN","DIENVWRN",9,0)
 W $C(7)
"RTN","DIENVWRN",10,0)
 D MES^XPDUTL("** Although Queuing is allowed - it is HIGHLY recommended that ALL Users and")
"RTN","DIENVWRN",11,0)
 D MES^XPDUTL("VISTA Background jobs be STOPPED before installation of this patch.  Failure")
"RTN","DIENVWRN",12,0)
 D MES^XPDUTL("to do so may result in 'source routine edited' error(s). Edits will be")
"RTN","DIENVWRN",13,0)
 D MES^XPDUTL("lost and record(s) may be left in an inconsistent state, for example,")
"RTN","DIENVWRN",14,0)
 D MES^XPDUTL("not all Cross-Referencing completed; which in turn may cause FUTURE")
"RTN","DIENVWRN",15,0)
 D MES^XPDUTL("VistA/FileMan Hard Errors or corrupted Data. **")
"RTN","DIENVWRN",16,0)
 ;
"RTN","DIENVWRN",17,0)
TMCHK ; Check to see if TaskMan is still running
"RTN","DIENVWRN",18,0)
 S X=$$TM^%ZTLOAD
"RTN","DIENVWRN",19,0)
 I X,'$D(^%ZTSCH("WAIT")) D
"RTN","DIENVWRN",20,0)
 . W $C(7)
"RTN","DIENVWRN",21,0)
 . D BMES^XPDUTL("* Warning TaskMan Has NOT Been Stopped or Placed in a WAIT State!")
"RTN","DIENVWRN",22,0)
 ;
"RTN","DIENVWRN",23,0)
LINH ; Check to see if Logons are Inhibited
"RTN","DIENVWRN",24,0)
 D GETENV^%ZOSV  ; $P(Y,"^",2) = Installing Volume
"RTN","DIENVWRN",25,0)
 S X=+$G(^%ZIS(14.5,"LOGON",$P(Y,"^",2)))
"RTN","DIENVWRN",26,0)
 I 'X D
"RTN","DIENVWRN",27,0)
 . W $C(7)
"RTN","DIENVWRN",28,0)
 . D BMES^XPDUTL("* Warning Logons are NOT Inhibited!")
"RTN","DIENVWRN",29,0)
 Q
"VER")
8.0^22.0
**END**
**END**

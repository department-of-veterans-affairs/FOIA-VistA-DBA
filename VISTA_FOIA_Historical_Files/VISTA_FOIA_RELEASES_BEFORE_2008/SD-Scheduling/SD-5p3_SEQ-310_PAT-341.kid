Released SD*5.3*341 SEQ #310
Extracted from mail message
**KIDS**:SD*5.3*341^

**INSTALL NAME**
SD*5.3*341
"BLD",5396,0)
SD*5.3*341^SCHEDULING^0^3040712^y
"BLD",5396,1,0)
^^1^1^3040220^
"BLD",5396,1,1,0)
Fix for 9020 Errors/MST for non-vets.
"BLD",5396,4,0)
^9.64PA^^
"BLD",5396,"ABPKG")
n
"BLD",5396,"INID")
^y
"BLD",5396,"INIT")
SC341PST
"BLD",5396,"KRN",0)
^9.67PA^8989.52^19
"BLD",5396,"KRN",.4,0)
.4
"BLD",5396,"KRN",.401,0)
.401
"BLD",5396,"KRN",.402,0)
.402
"BLD",5396,"KRN",.403,0)
.403
"BLD",5396,"KRN",.5,0)
.5
"BLD",5396,"KRN",.84,0)
.84
"BLD",5396,"KRN",3.6,0)
3.6
"BLD",5396,"KRN",3.8,0)
3.8
"BLD",5396,"KRN",9.2,0)
9.2
"BLD",5396,"KRN",9.8,0)
9.8
"BLD",5396,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5396,"KRN",9.8,"NM",1,0)
SCMSVUT1^^0^B64916387
"BLD",5396,"KRN",9.8,"NM","B","SCMSVUT1",1)

"BLD",5396,"KRN",19,0)
19
"BLD",5396,"KRN",19.1,0)
19.1
"BLD",5396,"KRN",101,0)
101
"BLD",5396,"KRN",409.61,0)
409.61
"BLD",5396,"KRN",771,0)
771
"BLD",5396,"KRN",870,0)
870
"BLD",5396,"KRN",8989.51,0)
8989.51
"BLD",5396,"KRN",8989.52,0)
8989.52
"BLD",5396,"KRN",8994,0)
8994
"BLD",5396,"KRN","B",.4,.4)

"BLD",5396,"KRN","B",.401,.401)

"BLD",5396,"KRN","B",.402,.402)

"BLD",5396,"KRN","B",.403,.403)

"BLD",5396,"KRN","B",.5,.5)

"BLD",5396,"KRN","B",.84,.84)

"BLD",5396,"KRN","B",3.6,3.6)

"BLD",5396,"KRN","B",3.8,3.8)

"BLD",5396,"KRN","B",9.2,9.2)

"BLD",5396,"KRN","B",9.8,9.8)

"BLD",5396,"KRN","B",19,19)

"BLD",5396,"KRN","B",19.1,19.1)

"BLD",5396,"KRN","B",101,101)

"BLD",5396,"KRN","B",409.61,409.61)

"BLD",5396,"KRN","B",771,771)

"BLD",5396,"KRN","B",870,870)

"BLD",5396,"KRN","B",8989.51,8989.51)

"BLD",5396,"KRN","B",8989.52,8989.52)

"BLD",5396,"KRN","B",8994,8994)

"BLD",5396,"QUES",0)
^9.62^^
"BLD",5396,"REQB",0)
^9.611^1^1
"BLD",5396,"REQB",1,0)
SD*5.3*321^2
"BLD",5396,"REQB","B","SD*5.3*321",1)

"INIT")
SC341PST
"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
341^3040712
"PKG",16,22,1,"PAH",1,1,0)
^^1^1^3040712
"PKG",16,22,1,"PAH",1,1,1,0)
Fix for 9020 Errors/MST for non-vets.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","SC341PST")
0^^B519941
"RTN","SC341PST",1,0)
SC341PST ;ALB/RLC - POST-INIT ROUTINE FOR PATCH 341;[Feb 20, 2004 8:40 am]
"RTN","SC341PST",2,0)
 ;;5.3;Scheduling;**341**;Aug 13, 1993
"RTN","SC341PST",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified
"RTN","SC341PST",4,0)
 ;
"RTN","SC341PST",5,0)
 ; This post-init routine adds a new parameter to the validation
"RTN","SC341PST",6,0)
 ; logic in file 409.76 for error code 9020
"RTN","SC341PST",7,0)
 ;
"RTN","SC341PST",8,0)
FILE N DA,DR,DIE
"RTN","SC341PST",9,0)
 S SCLOGIC="S RES=$$CLAVET^SCMSVUT1(DATA,DFN,TYPE,ENCPTR)",SCERR=9020
"RTN","SC341PST",10,0)
 S DA="",DA=$O(^SD(409.76,"B",SCERR,"")) Q:DA=""
"RTN","SC341PST",11,0)
 L +^SD(409.76,DA)
"RTN","SC341PST",12,0)
 S DIE="^SD(409.76,",DR="31///^S X=SCLOGIC" D ^DIE
"RTN","SC341PST",13,0)
 L -^SD(409.76,DA)
"RTN","SC341PST",14,0)
 K DA,DR,DIE,SCLOGIC,SCERR
"RTN","SC341PST",15,0)
 Q
"RTN","SCMSVUT1")
0^1^B64916387
"RTN","SCMSVUT1",1,0)
SCMSVUT1 ;ALB/JLU;validation utility routine;06/19/99 ; 4/30/03 11:58am
"RTN","SCMSVUT1",2,0)
 ;;5.3;Scheduling;**66,143,180,239,247,258,296,295,321,341**;AUG 13,1993
"RTN","SCMSVUT1",3,0)
 ;06/19/99 ACS - Added CPT Modifier API calls to PROCCOD(DATA)
"RTN","SCMSVUT1",4,0)
 ;
"RTN","SCMSVUT1",5,0)
SEGERR(DATA,HLFS) ;
"RTN","SCMSVUT1",6,0)
 ;INPUT DATA - This is a check for the segment errors of null
"RTN","SCMSVUT1",7,0)
 ;      HLFS - The string separator character
"RTN","SCMSVUT1",8,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",9,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",10,0)
 I $L(DATA,HLFS)'>2 Q 0
"RTN","SCMSVUT1",11,0)
 Q 1
"RTN","SCMSVUT1",12,0)
 ;
"RTN","SCMSVUT1",13,0)
DODA(DATA) ;
"RTN","SCMSVUT1",14,0)
 ;INPUT   DATA - The FM date of death.
"RTN","SCMSVUT1",15,0)
 ;
"RTN","SCMSVUT1",16,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",17,0)
 I DATA="" Q 1
"RTN","SCMSVUT1",18,0)
 N %DT,X,Y
"RTN","SCMSVUT1",19,0)
 S %DT="T",%DT(0)="-NOW",X=DATA
"RTN","SCMSVUT1",20,0)
 D ^%DT
"RTN","SCMSVUT1",21,0)
 Q $S(Y=-1:0,1:1)
"RTN","SCMSVUT1",22,0)
 ;
"RTN","SCMSVUT1",23,0)
DODB(DATA,ENCDT) ;
"RTN","SCMSVUT1",24,0)
 ;INPUT   DATA - The FM date of death
"RTN","SCMSVUT1",25,0)
 ;       ENCDT - The FM date of encounter
"RTN","SCMSVUT1",26,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",27,0)
 I DATA="" Q 1
"RTN","SCMSVUT1",28,0)
 N %DT,X,Y
"RTN","SCMSVUT1",29,0)
 S %DT="T",%DT(0)=ENCDT,X=DATA
"RTN","SCMSVUT1",30,0)
 D ^%DT
"RTN","SCMSVUT1",31,0)
 Q $S(Y=-1:0,1:1)
"RTN","SCMSVUT1",32,0)
 ;
"RTN","SCMSVUT1",33,0)
DODL(DATA,ENCDT) ;
"RTN","SCMSVUT1",34,0)
 ;INPUT  DATA - The FM date of death
"RTN","SCMSVUT1",35,0)
 ;      ENCDT - The FM date of the encounter
"RTN","SCMSVUT1",36,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",37,0)
 I '$D(ENCDT) Q 0
"RTN","SCMSVUT1",38,0)
 I DATA="" Q 1
"RTN","SCMSVUT1",39,0)
 I ENCDT<DATA Q 1
"RTN","SCMSVUT1",40,0)
 I ENCDT=DATA Q 1
"RTN","SCMSVUT1",41,0)
 N X1,X2,X
"RTN","SCMSVUT1",42,0)
 S X1=ENCDT,X2=DATA
"RTN","SCMSVUT1",43,0)
 D ^%DTC
"RTN","SCMSVUT1",44,0)
 I X>14 Q 0
"RTN","SCMSVUT1",45,0)
 Q 1
"RTN","SCMSVUT1",46,0)
 ;
"RTN","SCMSVUT1",47,0)
HOME(DATA) ;
"RTN","SCMSVUT1",48,0)
 ;INPUT   DATA - THe homeless indicator to be validated.
"RTN","SCMSVUT1",49,0)
 ;
"RTN","SCMSVUT1",50,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",51,0)
 I DATA'=1,DATA'=0 Q 0
"RTN","SCMSVUT1",52,0)
 Q 1
"RTN","SCMSVUT1",53,0)
 ;
"RTN","SCMSVUT1",54,0)
POW(DATA) ;
"RTN","SCMSVUT1",55,0)
 ;INPUT  DATA - The POW indicatort to be validated.
"RTN","SCMSVUT1",56,0)
 ;
"RTN","SCMSVUT1",57,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",58,0)
 I DATA="" Q 1
"RTN","SCMSVUT1",59,0)
 I DATA'="N",DATA'="U",DATA'="Y" Q 0
"RTN","SCMSVUT1",60,0)
 Q 1
"RTN","SCMSVUT1",61,0)
 ;
"RTN","SCMSVUT1",62,0)
TYPINS(DATA) ;
"RTN","SCMSVUT1",63,0)
 ;INPUT  DATA - Type if insurance indicator to be validated.
"RTN","SCMSVUT1",64,0)
 ;
"RTN","SCMSVUT1",65,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",66,0)
 I DATA="" Q 1
"RTN","SCMSVUT1",67,0)
 I DATA?.A Q 0
"RTN","SCMSVUT1",68,0)
 I DATA>-1,(DATA<13) Q 1
"RTN","SCMSVUT1",69,0)
 Q 0
"RTN","SCMSVUT1",70,0)
 ;
"RTN","SCMSVUT1",71,0)
PATCLSS(DATA) ;
"RTN","SCMSVUT1",72,0)
 ;INPUT  DATA - the patient's class
"RTN","SCMSVUT1",73,0)
 ;
"RTN","SCMSVUT1",74,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",75,0)
 I DATA'="O" Q 0
"RTN","SCMSVUT1",76,0)
 Q 1
"RTN","SCMSVUT1",77,0)
 ;
"RTN","SCMSVUT1",78,0)
POV(DATA) ;
"RTN","SCMSVUT1",79,0)
 ;INPUT DATA - the purpose of visit.
"RTN","SCMSVUT1",80,0)
 ;
"RTN","SCMSVUT1",81,0)
 N VAR
"RTN","SCMSVUT1",82,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",83,0)
 I $L(DATA)'=4 Q 0
"RTN","SCMSVUT1",84,0)
 I DATA?.A Q 0
"RTN","SCMSVUT1",85,0)
 S VAR=$E(DATA,1,2)
"RTN","SCMSVUT1",86,0)
 I VAR<1!(VAR>4) Q 0
"RTN","SCMSVUT1",87,0)
 S VAR=$E(DATA,3,4)
"RTN","SCMSVUT1",88,0)
 I VAR<1!(VAR>9) Q 0
"RTN","SCMSVUT1",89,0)
 Q 1
"RTN","SCMSVUT1",90,0)
 ;
"RTN","SCMSVUT1",91,0)
COMPGEN(DATA) ;
"RTN","SCMSVUT1",92,0)
 ;INPUT DATA - checking computer generated.
"RTN","SCMSVUT1",93,0)
 ;
"RTN","SCMSVUT1",94,0)
 N VAR
"RTN","SCMSVUT1",95,0)
 S VAR=$E(DATA,3,4)
"RTN","SCMSVUT1",96,0)
 I VAR=10 Q 0
"RTN","SCMSVUT1",97,0)
 Q 1
"RTN","SCMSVUT1",98,0)
 ;
"RTN","SCMSVUT1",99,0)
LOCVIS(DATA) ;
"RTN","SCMSVUT1",100,0)
 ;INPUT DATA - Location of visit
"RTN","SCMSVUT1",101,0)
 ;
"RTN","SCMSVUT1",102,0)
 I DATA'=1,DATA'=6 Q 0
"RTN","SCMSVUT1",103,0)
 Q 1
"RTN","SCMSVUT1",104,0)
 ;
"RTN","SCMSVUT1",105,0)
FACNMBR(DATA) ;
"RTN","SCMSVUT1",106,0)
 ;INPUT DATA - The facility number
"RTN","SCMSVUT1",107,0)
 ;
"RTN","SCMSVUT1",108,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",109,0)
 I DATA'?3N.AN Q 0
"RTN","SCMSVUT1",110,0)
 I '$D(^DIC(4,"D",DATA)) Q 0
"RTN","SCMSVUT1",111,0)
 Q 1
"RTN","SCMSVUT1",112,0)
 ;
"RTN","SCMSVUT1",113,0)
FACACT(DATA,ENCDT,DIV) ;
"RTN","SCMSVUT1",114,0)
 ;INPUT DATA - The active flag of the facility number.
"RTN","SCMSVUT1",115,0)
 ;
"RTN","SCMSVUT1",116,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",117,0)
 I '$D(ENCDT) Q 0
"RTN","SCMSVUT1",118,0)
 I '$D(DIV) Q 0
"RTN","SCMSVUT1",119,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",120,0)
 N SITE
"RTN","SCMSVUT1",121,0)
 I DIV]"" S SITE=$$SITE^VASITE(ENCDT,DIV)
"RTN","SCMSVUT1",122,0)
 I DIV']"" S SITE=$$SITE^VASITE(ENCDT)
"RTN","SCMSVUT1",123,0)
 I DATA'=$P(SITE,U,3) Q 0
"RTN","SCMSVUT1",124,0)
 Q 1
"RTN","SCMSVUT1",125,0)
 ;
"RTN","SCMSVUT1",126,0)
ENCDT(DATA) ;
"RTN","SCMSVUT1",127,0)
 ;INPUT DATA - The date/time of the encounter
"RTN","SCMSVUT1",128,0)
 ;
"RTN","SCMSVUT1",129,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",130,0)
 N %DT,X,Y
"RTN","SCMSVUT1",131,0)
 S %DT="T"
"RTN","SCMSVUT1",132,0)
 S X=DATA
"RTN","SCMSVUT1",133,0)
 D ^%DT
"RTN","SCMSVUT1",134,0)
 I Y=-1 Q 0
"RTN","SCMSVUT1",135,0)
 N VAR
"RTN","SCMSVUT1",136,0)
 S VAR=$$OKTOXMIT^SCDXFU04(DATA)
"RTN","SCMSVUT1",137,0)
 ;I +VAR=1 Q 1
"RTN","SCMSVUT1",138,0)
 I +VAR<4&(VAR'<0) Q 1  ;SD*5.3*247
"RTN","SCMSVUT1",139,0)
 Q 0
"RTN","SCMSVUT1",140,0)
 ;
"RTN","SCMSVUT1",141,0)
UNIQNMBR(DATA) ;
"RTN","SCMSVUT1",142,0)
 ;INPUT DATA - The unique number from PCE for the encounter
"RTN","SCMSVUT1",143,0)
 ;
"RTN","SCMSVUT1",144,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",145,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",146,0)
 I DATA=-1 Q 0
"RTN","SCMSVUT1",147,0)
 I DATA=0 Q 0
"RTN","SCMSVUT1",148,0)
 Q 1
"RTN","SCMSVUT1",149,0)
 ;
"RTN","SCMSVUT1",150,0)
SEGCHK(DATA,HLFS) ;
"RTN","SCMSVUT1",151,0)
 ;INPUT DATA - The segment to be checked.
"RTN","SCMSVUT1",152,0)
 ;      HLFS - The HL7 field separator
"RTN","SCMSVUT1",153,0)
 ;
"RTN","SCMSVUT1",154,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",155,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",156,0)
 I $L(DATA,HLFS)'>2 Q 0
"RTN","SCMSVUT1",157,0)
 Q 1
"RTN","SCMSVUT1",158,0)
 ;
"RTN","SCMSVUT1",159,0)
SEQNBR(DATA,SEQNBR) ;
"RTN","SCMSVUT1",160,0)
 ;INPUT DATA - The sequence number to be checked.
"RTN","SCMSVUT1",161,0)
 ;     SEQNBR - This is the previous seq number to compare to
"RTN","SCMSVUT1",162,0)
 ;
"RTN","SCMSVUT1",163,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",164,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",165,0)
 I +DATA'=+SEQNBR Q 0
"RTN","SCMSVUT1",166,0)
 S SEQNBR=SEQNBR+1
"RTN","SCMSVUT1",167,0)
 Q 1
"RTN","SCMSVUT1",168,0)
 ;
"RTN","SCMSVUT1",169,0)
DCODMTHD(DATA) ;
"RTN","SCMSVUT1",170,0)
 ;INPUT DATA - This is the coding method to be checked.
"RTN","SCMSVUT1",171,0)
 ;
"RTN","SCMSVUT1",172,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",173,0)
 I DATA'="I9" Q 0
"RTN","SCMSVUT1",174,0)
 Q 1
"RTN","SCMSVUT1",175,0)
 ;
"RTN","SCMSVUT1",176,0)
DIAGCOD(DATA,ENCDT) ;
"RTN","SCMSVUT1",177,0)
 ;INPUT DATA - This is the diagnosis code
"RTN","SCMSVUT1",178,0)
 ;     ENCDT - This is the encounter date
"RTN","SCMSVUT1",179,0)
 ;
"RTN","SCMSVUT1",180,0)
 N VAR
"RTN","SCMSVUT1",181,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",182,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",183,0)
 ;
"RTN","SCMSVUT1",184,0)
 ; CSV - change to use API
"RTN","SCMSVUT1",185,0)
 ;S VAR=$O(^ICD9("BA",DATA_" ",""))
"RTN","SCMSVUT1",186,0)
 ;I 'VAR Q 0
"RTN","SCMSVUT1",187,0)
 ;S VAR=$G(^ICD9(VAR,0))
"RTN","SCMSVUT1",188,0)
 ;I VAR']"" Q 0
"RTN","SCMSVUT1",189,0)
 ;this is the inactive flag
"RTN","SCMSVUT1",190,0)
 ;I $P(VAR,U,9)'=1 Q 1
"RTN","SCMSVUT1",191,0)
 ;S VAR=$P(VAR,U,11)
"RTN","SCMSVUT1",192,0)
 ;N %DT,X,Y
"RTN","SCMSVUT1",193,0)
 ;S %DT="ST",%DT(0)=-VAR,X=ENCDT
"RTN","SCMSVUT1",194,0)
 ;D ^%DT
"RTN","SCMSVUT1",195,0)
 ;Q $S(Y=-1:0,1:1)
"RTN","SCMSVUT1",196,0)
 Q $P($$ICDDX^ICDCODE(DATA,ENCDT),"^",10)
"RTN","SCMSVUT1",197,0)
 ;
"RTN","SCMSVUT1",198,0)
PRIOR(DATA) ;
"RTN","SCMSVUT1",199,0)
 ;INPUT DATA - The priority of the diagnosis found
"RTN","SCMSVUT1",200,0)
 ;
"RTN","SCMSVUT1",201,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",202,0)
 I DATA="" Q 1
"RTN","SCMSVUT1",203,0)
 I DATA=1 Q 1
"RTN","SCMSVUT1",204,0)
 Q 0
"RTN","SCMSVUT1",205,0)
 ;
"RTN","SCMSVUT1",206,0)
ELIGCODM(DATA) ;
"RTN","SCMSVUT1",207,0)
 ;INPUT DATA - The eligibility code
"RTN","SCMSVUT1",208,0)
 ;A CHECK FOR MISSING
"RTN","SCMSVUT1",209,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",210,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",211,0)
 I '$D(^DIC(8.1,DATA,0)) Q 0
"RTN","SCMSVUT1",212,0)
 Q 1
"RTN","SCMSVUT1",213,0)
 ;
"RTN","SCMSVUT1",214,0)
ELIGINCV(DATA) ;
"RTN","SCMSVUT1",215,0)
 ;INPUT DATA - Contains the eligibility code in the first piece and
"RTN","SCMSVUT1",216,0)
 ;the veteran status in the second.
"RTN","SCMSVUT1",217,0)
 ;
"RTN","SCMSVUT1",218,0)
 ;the following quit is to stop this edit check.
"RTN","SCMSVUT1",219,0)
 ;Per Austin 9/97 this is not needed.
"RTN","SCMSVUT1",220,0)
 Q 1
"RTN","SCMSVUT1",221,0)
 N VET,ELIG
"RTN","SCMSVUT1",222,0)
 S VET=$P(DATA,U,2)
"RTN","SCMSVUT1",223,0)
 S ELIG=$P(DATA,U,1)
"RTN","SCMSVUT1",224,0)
 I VET=1&((ELIG<1)!(ELIG>18)) Q 0
"RTN","SCMSVUT1",225,0)
 I VET=1,ELIG>5,ELIG<15 Q 0
"RTN","SCMSVUT1",226,0)
 I VET=0,ELIG<6 Q 0
"RTN","SCMSVUT1",227,0)
 I VET=0,ELIG=11 Q 0
"RTN","SCMSVUT1",228,0)
 I VET=0,ELIG>14,ELIG'=19 Q 0
"RTN","SCMSVUT1",229,0)
 Q 1
"RTN","SCMSVUT1",230,0)
 ;
"RTN","SCMSVUT1",231,0)
ELIGINCS(DATA) ;
"RTN","SCMSVUT1",232,0)
 ;INPUT DATA - Eligibility code
"RTN","SCMSVUT1",233,0)
 ;
"RTN","SCMSVUT1",234,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",235,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",236,0)
 I '$D(^DIC(8.1,DATA,0)) Q 0
"RTN","SCMSVUT1",237,0)
 I +$P(^DIC(8.1,DATA,0),U,7) Q 0
"RTN","SCMSVUT1",238,0)
 Q 1
"RTN","SCMSVUT1",239,0)
 ;
"RTN","SCMSVUT1",240,0)
VETSTAT(DATA) ;
"RTN","SCMSVUT1",241,0)
 ;INPUT DATA - The veteran status indicator
"RTN","SCMSVUT1",242,0)
 ;
"RTN","SCMSVUT1",243,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",244,0)
 I DATA'=0,DATA'=1 Q 0
"RTN","SCMSVUT1",245,0)
 Q 1
"RTN","SCMSVUT1",246,0)
 ;
"RTN","SCMSVUT1",247,0)
VETPOW(DATA,DFN) ;
"RTN","SCMSVUT1",248,0)
 ;INPUT DATA - veteran status to check with POW status.
"RTN","SCMSVUT1",249,0)
 ;       DFN - The DFN of the patient.
"RTN","SCMSVUT1",250,0)
 ;
"RTN","SCMSVUT1",251,0)
 N VAR,POW
"RTN","SCMSVUT1",252,0)
 I DATA=0 Q 1
"RTN","SCMSVUT1",253,0)
 S VAR=$G(^DPT(DFN,.52))
"RTN","SCMSVUT1",254,0)
 S POW=$S(VAR]"":$P(VAR,U,5),1:VAR)
"RTN","SCMSVUT1",255,0)
 I POW="" Q 1
"RTN","SCMSVUT1",256,0)
 I POW="Y"!(POW="N")!(POW="U") Q 1
"RTN","SCMSVUT1",257,0)
 Q 0
"RTN","SCMSVUT1",258,0)
 ;
"RTN","SCMSVUT1",259,0)
NMBRDEP(DATA) ;
"RTN","SCMSVUT1",260,0)
 ;INPUT DATA - the number of dependents
"RTN","SCMSVUT1",261,0)
 ;
"RTN","SCMSVUT1",262,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",263,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",264,0)
 I DATA="XX" Q 1
"RTN","SCMSVUT1",265,0)
 I DATA'?1.2N Q 0
"RTN","SCMSVUT1",266,0)
 I +DATA>99!(+DATA<0) Q 0
"RTN","SCMSVUT1",267,0)
 Q 1
"RTN","SCMSVUT1",268,0)
 ;
"RTN","SCMSVUT1",269,0)
PATINC(DATA) ;
"RTN","SCMSVUT1",270,0)
 ;INPUT DATA - The patient's income
"RTN","SCMSVUT1",271,0)
 ;
"RTN","SCMSVUT1",272,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",273,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",274,0)
 I DATA<0 Q 0
"RTN","SCMSVUT1",275,0)
 I DATA'?.N.1".".N Q 0
"RTN","SCMSVUT1",276,0)
 Q 1
"RTN","SCMSVUT1",277,0)
 ;
"RTN","SCMSVUT1",278,0)
MEANSTST(DATA) ;
"RTN","SCMSVUT1",279,0)
 ;INPUT DATA - The means test indicator
"RTN","SCMSVUT1",280,0)
 ;
"RTN","SCMSVUT1",281,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",282,0)
 S DATA=","_DATA_","
"RTN","SCMSVUT1",283,0)
 ; ** SD*296, added 'U' means test indicator to allowed list.
"RTN","SCMSVUT1",284,0)
 I ",AS,AN,N,X,C,G,U,"'[DATA Q 0
"RTN","SCMSVUT1",285,0)
 Q 1
"RTN","SCMSVUT1",286,0)
 ;
"RTN","SCMSVUT1",287,0)
DEPMEANS(DATA) ;
"RTN","SCMSVUT1",288,0)
 ;INPUT DATA - This variable contains the number of dependents in the
"RTN","SCMSVUT1",289,0)
 ;             first peice and the means test indicator in the second.
"RTN","SCMSVUT1",290,0)
 ;
"RTN","SCMSVUT1",291,0)
 N MT,DEP
"RTN","SCMSVUT1",292,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",293,0)
 S DEP=$P(DATA,U,1)
"RTN","SCMSVUT1",294,0)
 S MT=","_$P(DATA,U,2)_","
"RTN","SCMSVUT1",295,0)
 I DEP="XX",(",AS,N,X,U,"'[MT) Q 0
"RTN","SCMSVUT1",296,0)
 Q 1
"RTN","SCMSVUT1",297,0)
 ;
"RTN","SCMSVUT1",298,0)
CLASSQUE(DATA) ;
"RTN","SCMSVUT1",299,0)
 ;INPUT DATA - Classification question value.
"RTN","SCMSVUT1",300,0)
 ;
"RTN","SCMSVUT1",301,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",302,0)
 I DATA'=1,DATA'=0,DATA'="" Q 0
"RTN","SCMSVUT1",303,0)
 Q 1
"RTN","SCMSVUT1",304,0)
 ;
"RTN","SCMSVUT1",305,0)
CLAQUETY(DATA) ;
"RTN","SCMSVUT1",306,0)
 ;INPUT DATA - Outpatient classification type to be checked.
"RTN","SCMSVUT1",307,0)
 ;
"RTN","SCMSVUT1",308,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",309,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",310,0)
 I '$D(^SD(409.41,DATA,0)) Q 0
"RTN","SCMSVUT1",311,0)
 Q 1
"RTN","SCMSVUT1",312,0)
 ;
"RTN","SCMSVUT1",313,0)
CLAVET(DATA,DFN,TYPE,ENCPTR) ; SD*5.3*341 added parameter ENCPTR
"RTN","SCMSVUT1",314,0)
 ;INPUT DATA - Classification question information to compare to VET
"RTN","SCMSVUT1",315,0)
 ;             status
"RTN","SCMSVUT1",316,0)
 ;       DFN - The patient to compare this info to.
"RTN","SCMSVUT1",317,0)
 ;      TYPE - The classification type.
"RTN","SCMSVUT1",318,0)
 ;    ENCPTR - Pointer to Outpatient Encounter
"RTN","SCMSVUT1",319,0)
 ;
"RTN","SCMSVUT1",320,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",321,0)
 I '$D(DFN) Q 0
"RTN","SCMSVUT1",322,0)
 I '$D(TYPE) Q 0  ; SD*5.3*341
"RTN","SCMSVUT1",323,0)
 N VET,SDELG0,SDDT  ; SD*5.3*341 added 2 new variables
"RTN","SCMSVUT1",324,0)
 S ENCPTR=$G(ENCPTR)  ; SD*5.3*341 added this plus next 3 lines
"RTN","SCMSVUT1",325,0)
 S SDDT=+$G(^SCE(ENCPTR,0)) S:'SDDT SDDT=$$DT^XLFDT()
"RTN","SCMSVUT1",326,0)
 S SDELG0=$$EL^SDCO22(DFN,ENCPTR)
"RTN","SCMSVUT1",327,0)
 S VET=$P(SDELG0,U,5)
"RTN","SCMSVUT1",328,0)
 I VET="Y",DATA'=1,DATA'=0,DATA'="" Q 0
"RTN","SCMSVUT1",329,0)
 ;This edit check is per a mail message from austin
"RTN","SCMSVUT1",330,0)
 I TYPE=4,VET'="Y",DATA'="","^A^B^C^D^"'[("^"_($P($G(^DIC(21,+$P($G(^DPT(DFN,.32)),"^",3),0)),"^",3))_"^") Q 0
"RTN","SCMSVUT1",331,0)
 I VET'="Y",DATA'="" Q $$SCR^SDCO21(TYPE,DFN,SDDT,ENCPTR)  ; SD*5.3*341
"RTN","SCMSVUT1",332,0)
 Q 1
"RTN","SCMSVUT1",333,0)
 ;
"RTN","SCMSVUT1",334,0)
STPCOD(DATA) ;
"RTN","SCMSVUT1",335,0)
 ;INPUT DATA - stop code data to be checked
"RTN","SCMSVUT1",336,0)
 ;
"RTN","SCMSVUT1",337,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",338,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",339,0)
 I '$D(^DIC(40.7,"C",DATA)) Q 0
"RTN","SCMSVUT1",340,0)
 Q 1
"RTN","SCMSVUT1",341,0)
 ;
"RTN","SCMSVUT1",342,0)
ACTSTP(DATA,ENCDT) ;
"RTN","SCMSVUT1",343,0)
 ;INPUT  DATA - IEN of the stop code to be checked.
"RTN","SCMSVUT1",344,0)
 ;      ENCDT - the encounter date in question
"RTN","SCMSVUT1",345,0)
 ;
"RTN","SCMSVUT1",346,0)
 N STPCOD,%DT,X,Y
"RTN","SCMSVUT1",347,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",348,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",349,0)
 S STPCOD=$G(^DIC(40.7,DATA,0))
"RTN","SCMSVUT1",350,0)
 I STPCOD="" Q 0
"RTN","SCMSVUT1",351,0)
 I '$P(STPCOD,U,3) Q 1
"RTN","SCMSVUT1",352,0)
 S %DT(0)="-"_$P(STPCOD,U,3),%DT="T",X=ENCDT
"RTN","SCMSVUT1",353,0)
 D ^%DT
"RTN","SCMSVUT1",354,0)
 Q $S(Y=-1:0,1:1)
"RTN","SCMSVUT1",355,0)
 ;
"RTN","SCMSVUT1",356,0)
SERCON(DATA) ;
"RTN","SCMSVUT1",357,0)
 ;INPUT DATA - Service connection to be checked, missing or invalid
"RTN","SCMSVUT1",358,0)
 ;
"RTN","SCMSVUT1",359,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",360,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",361,0)
 I DATA'=1,DATA'=0 Q 0
"RTN","SCMSVUT1",362,0)
 Q 1
"RTN","SCMSVUT1",363,0)
 ;
"RTN","SCMSVUT1",364,0)
SCPER(DATA) ;
"RTN","SCMSVUT1",365,0)
 ;INPUT DATA - Service connected % to be tested
"RTN","SCMSVUT1",366,0)
 ;
"RTN","SCMSVUT1",367,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",368,0)
 I DATA="" Q 1
"RTN","SCMSVUT1",369,0)
 I DATA'?.N.1".".N Q 0
"RTN","SCMSVUT1",370,0)
 Q 1
"RTN","SCMSVUT1",371,0)
 ;
"RTN","SCMSVUT1",372,0)
PRDSER(DATA) ;
"RTN","SCMSVUT1",373,0)
 ;INPUT DATA - period of service to be tested.
"RTN","SCMSVUT1",374,0)
 ;
"RTN","SCMSVUT1",375,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",376,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",377,0)
 I '$D(^DIC(21,"D",DATA)) Q 0
"RTN","SCMSVUT1",378,0)
 Q 1
"RTN","SCMSVUT1",379,0)
 ;
"RTN","SCMSVUT1",380,0)
VIETSER1(DATA) ;
"RTN","SCMSVUT1",381,0)
 ;INPUT DATA - Vietnam service to be checked
"RTN","SCMSVUT1",382,0)
 ;
"RTN","SCMSVUT1",383,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",384,0)
 I DATA="" Q 1
"RTN","SCMSVUT1",385,0)
 I DATA'="Y",DATA'="N",DATA'="U" Q 0
"RTN","SCMSVUT1",386,0)
 Q 1
"RTN","SCMSVUT1",387,0)
 ;
"RTN","SCMSVUT1",388,0)
VIETSER2(DATA,DFN) ;
"RTN","SCMSVUT1",389,0)
 ;INPUT DATA - Vietnam service to be checked against vet status
"RTN","SCMSVUT1",390,0)
 ;
"RTN","SCMSVUT1",391,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",392,0)
 N VAR
"RTN","SCMSVUT1",393,0)
 S VAR=$G(^DPT(DFN,"VET"))
"RTN","SCMSVUT1",394,0)
 I DATA="",VAR'="Y" Q 1
"RTN","SCMSVUT1",395,0)
 I (DATA="Y"!(DATA="N")!(DATA="U")),VAR="Y" Q 1
"RTN","SCMSVUT1",396,0)
 Q 0
"RTN","SCMSVUT1",397,0)
 ;
"RTN","SCMSVUT1",398,0)
ACTPRD(DATA) ;
"RTN","SCMSVUT1",399,0)
 ;INPUT DATA - period of serivce indicator to be check to ensure active
"RTN","SCMSVUT1",400,0)
 ;
"RTN","SCMSVUT1",401,0)
 N VAR
"RTN","SCMSVUT1",402,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",403,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",404,0)
 S VAR=+$O(^DIC(21,"D",DATA,0))
"RTN","SCMSVUT1",405,0)
 S VAR=$P($G(^DIC(21,VAR,0)),U,8)
"RTN","SCMSVUT1",406,0)
 I VAR Q 0
"RTN","SCMSVUT1",407,0)
 Q 1
"RTN","SCMSVUT1",408,0)
 ;
"RTN","SCMSVUT1",409,0)
PCODMTHD(DATA) ;
"RTN","SCMSVUT1",410,0)
 ;INPUT DATA - The coding method to be checked.
"RTN","SCMSVUT1",411,0)
 ;
"RTN","SCMSVUT1",412,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",413,0)
 I DATA'="C4" Q 0
"RTN","SCMSVUT1",414,0)
 Q 1
"RTN","SCMSVUT1",415,0)
 ;
"RTN","SCMSVUT1",416,0)
PROCCOD(DATA,ENCDT)    ;
"RTN","SCMSVUT1",417,0)
 ;INPUT DATA - The procedure code to be checked.
"RTN","SCMSVUT1",418,0)
 ;This call makes the assumption that leading zeros are intact in the 
"RTN","SCMSVUT1",419,0)
 ;input.
"RTN","SCMSVUT1",420,0)
 ;
"RTN","SCMSVUT1",421,0)
 N VAR
"RTN","SCMSVUT1",422,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",423,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",424,0)
 ;S VAR=+$O(^ICPT("B",DATA,""))
"RTN","SCMSVUT1",425,0)
 ;I '$D(^ICPT(VAR,0)) Q 0
"RTN","SCMSVUT1",426,0)
 ;
"RTN","SCMSVUT1",427,0)
 ; CSV - pass encounter date to API
"RTN","SCMSVUT1",428,0)
 ;I $$CPT^ICPTCOD(DATA,,1)'>0 Q 0
"RTN","SCMSVUT1",429,0)
 I $$CPT^ICPTCOD(DATA,ENCDT,1)'>0 Q 0
"RTN","SCMSVUT1",430,0)
 Q 1
"RTN","SCMSVUT1",431,0)
 ;
"RTN","SCMSVUT1",432,0)
PROVCLS(DATA) ;
"RTN","SCMSVUT1",433,0)
 ;INPUT DATA - The practitioner class to be checked.
"RTN","SCMSVUT1",434,0)
 ;
"RTN","SCMSVUT1",435,0)
 I '$D(DATA) Q 0
"RTN","SCMSVUT1",436,0)
 I DATA="" Q 0
"RTN","SCMSVUT1",437,0)
 I $$CODE2TXT^XUA4A72(DATA)']"" Q 0
"RTN","SCMSVUT1",438,0)
 Q 1
"RTN","SCMSVUT1",439,0)
 ;
"VER")
8.0^22
**END**
**END**

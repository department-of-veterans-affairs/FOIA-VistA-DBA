Released EC*2*62 SEQ #56
Extracted from mail message
**KIDS**:EC*2.0*62^

**INSTALL NAME**
EC*2.0*62
"BLD",5428,0)
EC*2.0*62^EVENT CAPTURE^0^3040309^y
"BLD",5428,1,0)
^^2^2^3040309^
"BLD",5428,1,1,0)
This patch corrects the output for the Event Capture Provider (1-3) Summary
"BLD",5428,1,2,0)
Report.
"BLD",5428,4,0)
^9.64PA^^
"BLD",5428,"ABPKG")
n
"BLD",5428,"KRN",0)
^9.67PA^8989.52^19
"BLD",5428,"KRN",.4,0)
.4
"BLD",5428,"KRN",.401,0)
.401
"BLD",5428,"KRN",.402,0)
.402
"BLD",5428,"KRN",.403,0)
.403
"BLD",5428,"KRN",.5,0)
.5
"BLD",5428,"KRN",.84,0)
.84
"BLD",5428,"KRN",3.6,0)
3.6
"BLD",5428,"KRN",3.8,0)
3.8
"BLD",5428,"KRN",9.2,0)
9.2
"BLD",5428,"KRN",9.8,0)
9.8
"BLD",5428,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5428,"KRN",9.8,"NM",1,0)
ECPRSUM1^^0^B26471627
"BLD",5428,"KRN",9.8,"NM","B","ECPRSUM1",1)

"BLD",5428,"KRN",19,0)
19
"BLD",5428,"KRN",19.1,0)
19.1
"BLD",5428,"KRN",101,0)
101
"BLD",5428,"KRN",409.61,0)
409.61
"BLD",5428,"KRN",771,0)
771
"BLD",5428,"KRN",870,0)
870
"BLD",5428,"KRN",8989.51,0)
8989.51
"BLD",5428,"KRN",8989.52,0)
8989.52
"BLD",5428,"KRN",8994,0)
8994
"BLD",5428,"KRN","B",.4,.4)

"BLD",5428,"KRN","B",.401,.401)

"BLD",5428,"KRN","B",.402,.402)

"BLD",5428,"KRN","B",.403,.403)

"BLD",5428,"KRN","B",.5,.5)

"BLD",5428,"KRN","B",.84,.84)

"BLD",5428,"KRN","B",3.6,3.6)

"BLD",5428,"KRN","B",3.8,3.8)

"BLD",5428,"KRN","B",9.2,9.2)

"BLD",5428,"KRN","B",9.8,9.8)

"BLD",5428,"KRN","B",19,19)

"BLD",5428,"KRN","B",19.1,19.1)

"BLD",5428,"KRN","B",101,101)

"BLD",5428,"KRN","B",409.61,409.61)

"BLD",5428,"KRN","B",771,771)

"BLD",5428,"KRN","B",870,870)

"BLD",5428,"KRN","B",8989.51,8989.51)

"BLD",5428,"KRN","B",8989.52,8989.52)

"BLD",5428,"KRN","B",8994,8994)

"BLD",5428,"QUES",0)
^9.62^^
"BLD",5428,"REQB",0)
^9.611^1^1
"BLD",5428,"REQB",1,0)
EC*2.0*47^2
"BLD",5428,"REQB","B","EC*2.0*47",1)

"MBREQ")
0
"PKG",486,-1)
1^1
"PKG",486,0)
EVENT CAPTURE^EC^Event Capture Workload Capture System^
"PKG",486,20,0)
^9.402P^^
"PKG",486,22,0)
^9.49I^1^1
"PKG",486,22,1,0)
2.0^2960508^2981027^66481
"PKG",486,22,1,"PAH",1,0)
62^3040309
"PKG",486,22,1,"PAH",1,1,0)
^^2^2^3040309
"PKG",486,22,1,"PAH",1,1,1,0)
This patch corrects the output for the Event Capture Provider (1-3) Summary
"PKG",486,22,1,"PAH",1,1,2,0)
Report.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ECPRSUM1")
0^1^B26471627
"RTN","ECPRSUM1",1,0)
ECPRSUM1 ;BIR/DMA,RHK,JPW-Provider Summary (1, 2, and 3) ;27 Mar 96
"RTN","ECPRSUM1",2,0)
 ;;2.0; EVENT CAPTURE ;**5,18,33,47,62**;8 May 96
"RTN","ECPRSUM1",3,0)
 S DIC=200,DIC(0)="AQEMZ",DIC("A")="Select Provider: "
"RTN","ECPRSUM1",4,0)
 D ^DIC K DIC G END:Y<0 S ECU=+Y,ECUN=$P(Y,"^",2)
"RTN","ECPRSUM1",5,0)
 D REASON^ECRUTL ;* Prompt to include Procedure Reasons
"RTN","ECPRSUM1",6,0)
BDATE K %DT S %DT="AEX",%DT("A")="Starting with Date: "
"RTN","ECPRSUM1",7,0)
 D ^%DT G:Y<0 END S ECSD=Y
"RTN","ECPRSUM1",8,0)
EDATE K %DT S %DT="AEX",%DT("A")="Ending with Date: " D ^%DT G:Y<0 END
"RTN","ECPRSUM1",9,0)
 I Y<ECSD D  G EDATE
"RTN","ECPRSUM1",10,0)
 .W !!,"The ending date cannot be earlier than the starting date.  "
"RTN","ECPRSUM1",11,0)
 .W "Please re-enter",!,"the ending date.",!
"RTN","ECPRSUM1",12,0)
 S ECED=Y,ECDATE=ECSD_"^"_ECED
"RTN","ECPRSUM1",13,0)
DEV ;dev call
"RTN","ECPRSUM1",14,0)
 W !!,"This report is formatted for 132 column output.",!!
"RTN","ECPRSUM1",15,0)
 S %ZIS="Q",%ZIS("A")="Select Device: " D ^%ZIS G END:POP
"RTN","ECPRSUM1",16,0)
 I $D(IO("Q")) K ZTSAVE S (ZTSAVE("ECRY"),ZTSAVE("ECSD"),ZTSAVE("ECDATE"),ZTSAVE("ECED"),ZTSAVE("ECU"),ZTSAVE("ECUN"))="",ZTDESC="Event Capture Provider Summary",ZTRTN="EN^ECPRSUM1" D ^%ZTLOAD,HOME^%ZIS K ZTSK G END
"RTN","ECPRSUM1",17,0)
 ;
"RTN","ECPRSUM1",18,0)
EN ;QUEUED ENTRY POINT
"RTN","ECPRSUM1",19,0)
 N ECPG,ECGT,EC,ECCAT
"RTN","ECPRSUM1",20,0)
 U IO S (ECOUT,ECPG,ECGT(1),ECGT(2),ECGT(3))=0
"RTN","ECPRSUM1",21,0)
 K ^TMP($J) S ECOUT=0,ECSD=ECSD-.1,ECED=ECED+.3
"RTN","ECPRSUM1",22,0)
 F ECD=ECSD:0 S ECD=$O(^ECH("AC",ECD)) Q:'ECD  Q:ECD>ECED  F DA=0:0 S DA=$O(^ECH("AC",ECD,DA)) Q:'DA  S EC=$G(^ECH(DA,0)),A(1)=$P(EC,"^",11)=ECU,A(2)=$P(EC,"^",15)=ECU,A(3)=$P(EC,"^",17)=ECU I A(1)!A(2)!A(3) D
"RTN","ECPRSUM1",23,0)
 .S ECPAT=+$P(EC,"^",2),PA=$G(^DPT(ECPAT,0))
"RTN","ECPRSUM1",24,0)
 .S SS=$P(PA,"^",9)
"RTN","ECPRSUM1",25,0)
 .S PA=$S($P(PA,"^")]"":$P(PA,"^"),1:"UNKNOWN")
"RTN","ECPRSUM1",26,0)
 .S ECP=$P(EC,"^",9)
"RTN","ECPRSUM1",27,0)
 .Q:ECP']""
"RTN","ECPRSUM1",28,0)
 .S ECLOC=+$P(EC,U,4)
"RTN","ECPRSUM1",29,0)
 .S ECUNIT=+$P(EC,U,7)
"RTN","ECPRSUM1",30,0)
 .S ECCAT=+$P(EC,U,8)
"RTN","ECPRSUM1",31,0)
 .S ECPSY=+$O(^ECJ("AP",ECLOC,ECUNIT,ECCAT,ECP,""))
"RTN","ECPRSUM1",32,0)
 .S ECPSYN=$P($G(^ECJ(ECPSY,"PRO")),"^",2)
"RTN","ECPRSUM1",33,0)
 .S ECFILE=$P(ECP,";",2),ECFILE=$S($E(ECFILE)="I":81,$E(ECFILE)="E":725,1:"UNKNOWN")
"RTN","ECPRSUM1",34,0)
 .I ECFILE="UNKNOWN" S ECPN="UNKNOWN"
"RTN","ECPRSUM1",35,0)
 .I ECFILE=81 S ECPN=$S($P($G(^ICPT(+ECP,0)),"^",2)]"":$P(^(0),"^",2),1:"UNKNOWN")
"RTN","ECPRSUM1",36,0)
 .I ECFILE=725 S ECPN=$S($P($G(^EC(725,+ECP,0)),"^")]"":$P(^(0),"^"),1:"UNKNOWN")
"RTN","ECPRSUM1",37,0)
 .S ECCPT=$S(ECFILE=81:+ECP,1:$P($G(^EC(725,+ECP,0)),"^",5))
"RTN","ECPRSUM1",38,0)
 .I ECCPT'="" D
"RTN","ECPRSUM1",39,0)
 ..S ECCPT=$$GET1^DIQ(81,ECCPT,.01,"E")
"RTN","ECPRSUM1",40,0)
 ..I ECCPT'="" S ECCPT=ECCPT_" "
"RTN","ECPRSUM1",41,0)
 .S ECPTDS=ECCPT_ECPN_$S(ECPSYN]"":" ["_ECPSYN_"] ",1:"")
"RTN","ECPRSUM1",42,0)
 .;Get Procedure CPT modifiers
"RTN","ECPRSUM1",43,0)
 .S ECMODF=0 I $O(^ECH(DA,"MOD",0))'="" D
"RTN","ECPRSUM1",44,0)
 ..K ECMOD S ECMODF=$$MOD^ECUTL(DA,"I",.ECMOD)
"RTN","ECPRSUM1",45,0)
 .;
"RTN","ECPRSUM1",46,0)
 .;ALB/ESD - Get procedure reason from EC Patient file (#721) record
"RTN","ECPRSUM1",47,0)
 .S ECPRSN=""
"RTN","ECPRSUM1",48,0)
 .S ECLNK=+$P(EC,"^",23)
"RTN","ECPRSUM1",49,0)
 .I +ECLNK>0 DO
"RTN","ECPRSUM1",50,0)
 ..S ECPRSN=$P($G(^ECL(ECLNK,0)),"^",1)
"RTN","ECPRSUM1",51,0)
 ..S:+ECPRSN'>0 ECPRSN="REASON NOT DEFINED"
"RTN","ECPRSUM1",52,0)
 ..S:+ECPRSN>0 ECPRSN=$P(^ECR(ECPRSN,0),"^",1)
"RTN","ECPRSUM1",53,0)
 .S:+ECLNK'>0 ECPRSN="REASON NOT DEFINED"
"RTN","ECPRSUM1",54,0)
 .I '$D(ECRY) S ECPRSN="REASON NOT DEFINED"
"RTN","ECPRSUM1",55,0)
 .;
"RTN","ECPRSUM1",56,0)
 .;ALB/ESD - Add procedure reason to ^TMP array
"RTN","ECPRSUM1",57,0)
 . S PRO=ECCPT_ECPN I PRO]"" S V=+$P(EC,"^",10) D
"RTN","ECPRSUM1",58,0)
 ..F J=1,2,3 I A(J) S ^(J)=$G(^TMP($J,PRO,ECPRSN,PA_"^"_SS,J))+V D
"RTN","ECPRSUM1",59,0)
 ...I $G(^TMP($J,PRO))="" S ^TMP($J,PRO)=ECPTDS
"RTN","ECPRSUM1",60,0)
 ..;ALB/JAM - Add Procedure CPT modifier to ^TMP array
"RTN","ECPRSUM1",61,0)
 ..S MOD="" F  S MOD=$O(ECMOD(MOD)) Q:MOD=""  D
"RTN","ECPRSUM1",62,0)
 ...S ^TMP($J,PRO,ECPRSN,PA_"^"_SS,"MOD",MOD)=$G(^TMP($J,PRO,ECPRSN,PA_"^"_SS,"MOD",MOD))+V
"RTN","ECPRSUM1",63,0)
 K ECLNK,MOD,ECPTDS
"RTN","ECPRSUM1",64,0)
 ;
"RTN","ECPRSUM1",65,0)
PRINT ;print report
"RTN","ECPRSUM1",66,0)
 S ECSD=$P(ECDATE,"^"),ECED=$P(ECDATE,"^",2)
"RTN","ECPRSUM1",67,0)
 D HDR I '$D(^TMP($J)) W !!,?12,"No Event Capture Provider Summary for "_ECUN_" to report for the date range selected.",!! D PAGE G END
"RTN","ECPRSUM1",68,0)
 S (A(1),A(2),A(3))=0
"RTN","ECPRSUM1",69,0)
 S (ECREAS,PA,PR)=""
"RTN","ECPRSUM1",70,0)
 F  S PR=$O(^TMP($J,PR)),PA="" Q:PR=""  D  Q:ECOUT
"RTN","ECPRSUM1",71,0)
 .W !,^TMP($J,PR)
"RTN","ECPRSUM1",72,0)
 .F  S ECREAS=$O(^TMP($J,PR,ECREAS)) Q:ECREAS=""  D  Q:ECOUT
"RTN","ECPRSUM1",73,0)
 ..F  S PA=$O(^TMP($J,PR,ECREAS,PA)) D:PA="" TOT Q:PA=""  D  Q:ECOUT
"RTN","ECPRSUM1",74,0)
 ...S A=$G(^TMP($J,PR,ECREAS,PA,0))
"RTN","ECPRSUM1",75,0)
 ...W ! W:$D(ECRY) ?5,ECREAS
"RTN","ECPRSUM1",76,0)
 ...W ?37,$P(PA,"^"),?69,$P(PA,"^",2)
"RTN","ECPRSUM1",77,0)
 ...F J=1,2,3 S A=$G(^TMP($J,PR,ECREAS,PA,J)),A(J)=A(J)+A W ?10*J+70,$J(A,5,0) I J=3 I $Y+5>IOSL D PAGE Q:ECOUT  D HDR
"RTN","ECPRSUM1",78,0)
 ...;print CPT procedure modifiers
"RTN","ECPRSUM1",79,0)
 ...Q:ECOUT  S IEN=""
"RTN","ECPRSUM1",80,0)
 ...F  S IEN=$O(^TMP($J,PR,ECREAS,PA,"MOD",IEN)) Q:IEN=""  D  I ECOUT Q
"RTN","ECPRSUM1",81,0)
 ....S MOD=$$GET1^DIQ(81.3,IEN,.01,"E") I MOD="" Q
"RTN","ECPRSUM1",82,0)
 ....S MODESC=$$GET1^DIQ(81.3,IEN,.02,"E") I MODESC="" S MODESC="UNKNOWN"
"RTN","ECPRSUM1",83,0)
 ....S MODAMT=^TMP($J,PR,ECREAS,PA,"MOD",IEN)
"RTN","ECPRSUM1",84,0)
 ....W !?5,"- ",MOD," ",MODESC," (",MODAMT,")"
"RTN","ECPRSUM1",85,0)
 ....I ($Y+4)>IOSL D PAGE Q:ECOUT  D HDR
"RTN","ECPRSUM1",86,0)
 ...K MODESC,MOD,MODAMT
"RTN","ECPRSUM1",87,0)
 W !!,?81,"*************************",!,?35,"GRAND TOTAL - PROCEDURES"
"RTN","ECPRSUM1",88,0)
 F J=1,2,3 W ?10*J+70,$J(ECGT(J),5,0)
"RTN","ECPRSUM1",89,0)
 D:'ECOUT PAGE G END
"RTN","ECPRSUM1",90,0)
 ;
"RTN","ECPRSUM1",91,0)
PAGE ; end of page
"RTN","ECPRSUM1",92,0)
 I $E(IOST,1,2)="C-" S DIR(0)="E" D ^DIR K DIR I 'Y S ECOUT=1
"RTN","ECPRSUM1",93,0)
 Q
"RTN","ECPRSUM1",94,0)
HDR ;
"RTN","ECPRSUM1",95,0)
 W:$Y @IOF S ECPG=ECPG+1
"RTN","ECPRSUM1",96,0)
 W !!?33,"EVENT CAPTURE PROVIDER SUMMARY FOR ",ECUN,?118,"Page: ",ECPG,!,?33,"FOR THE DATE RANGE ",$$FMTE^XLFDT(ECSD)," TO ",$$FMTE^XLFDT(ECED),!!,"PROCEDURE",?85,"TOTALS AS PROVIDER #",!
"RTN","ECPRSUM1",97,0)
 W:$D(ECRY) "PROCEDURE REASON" W ?40,"PATIENT",?71,"SSN",?84,1,?94,2,?104,3
"RTN","ECPRSUM1",98,0)
 W !,?5,"CPT MODIFIER (Volume of modifiers use)",!
"RTN","ECPRSUM1",99,0)
 F RK=1:1:IOM W "-"
"RTN","ECPRSUM1",100,0)
 W !
"RTN","ECPRSUM1",101,0)
 Q
"RTN","ECPRSUM1",102,0)
 ;
"RTN","ECPRSUM1",103,0)
TOT W !,?81,"-------------------------",!,?35,"TOTAL PROCEDURES"
"RTN","ECPRSUM1",104,0)
 F J=1,2,3 W ?10*J+70,$J(A(J),5,0) S ECGT(J)=ECGT(J)+A(J)
"RTN","ECPRSUM1",105,0)
 W ! S (A(1),A(2),A(3))=0
"RTN","ECPRSUM1",106,0)
 Q
"RTN","ECPRSUM1",107,0)
 ;
"RTN","ECPRSUM1",108,0)
 ;
"RTN","ECPRSUM1",109,0)
END D ^ECKILL K ^TMP($J),ZTSK W @IOF
"RTN","ECPRSUM1",110,0)
 K ^TMP($J) Q:$D(ECGUI)
"RTN","ECPRSUM1",111,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","ECPRSUM1",112,0)
 D ^%ZISC
"RTN","ECPRSUM1",113,0)
 Q
"VER")
8.0^22
**END**
**END**

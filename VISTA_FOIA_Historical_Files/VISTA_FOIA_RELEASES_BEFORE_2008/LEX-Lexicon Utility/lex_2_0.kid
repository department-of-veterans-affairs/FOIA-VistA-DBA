KIDS Distribution saved on Oct 03, 1996@14:22:45
Lexicon Utility v 2.0
**KIDS**:LEXICON UTILITY 2.0^GMPL*2.0*7^

**INSTALL NAME**
LEXICON UTILITY 2.0
"BLD",88,0)
LEXICON UTILITY 2.0^LEXICON UTILITY^0^2960915^y
"BLD",88,1,0)
^^5^5^2960814^^^^
"BLD",88,1,1,0)
The Lexicon is a dictionary of medical and biomedical terminology.  This
"BLD",88,1,2,0)
terminology is represented by major concepts which can be expressed in 
"BLD",88,1,3,0)
numerous forms (concept, synonyms or lexical variants).  These terms are 
"BLD",88,1,4,0)
mapped to coding schemes such as ICD, SNOMED or CPT.  The Lexicon can be
"BLD",88,1,5,0)
searched by keywords or by code.
"BLD",88,4,0)
^9.64PA^757.41^19
"BLD",88,4,757,0)
757
"BLD",88,4,757,222)
y^y^f^^n^^n^^
"BLD",88,4,757.001,0)
757.001
"BLD",88,4,757.001,222)
y^y^f^^n^^n^^
"BLD",88,4,757.01,0)
757.01
"BLD",88,4,757.01,222)
y^y^f^^^^n^^
"BLD",88,4,757.011,0)
757.011
"BLD",88,4,757.011,222)
y^y^f^^^^n^^
"BLD",88,4,757.014,0)
757.014
"BLD",88,4,757.014,222)
y^y^f^^^^n^^
"BLD",88,4,757.02,0)
757.02
"BLD",88,4,757.02,222)
y^y^f^^^^n^^
"BLD",88,4,757.03,0)
757.03
"BLD",88,4,757.03,222)
y^y^f^^^^n^^
"BLD",88,4,757.04,0)
757.04
"BLD",88,4,757.04,222)
y^y^f^^^^n^^
"BLD",88,4,757.05,0)
757.05
"BLD",88,4,757.05,222)
y^y^f^^^^n^^
"BLD",88,4,757.06,0)
757.06
"BLD",88,4,757.06,222)
y^y^f^^^^n^^
"BLD",88,4,757.1,0)
757.1
"BLD",88,4,757.1,222)
y^y^f^^^^n^^
"BLD",88,4,757.11,0)
757.11
"BLD",88,4,757.11,222)
y^y^f^^^^n^^
"BLD",88,4,757.12,0)
757.12
"BLD",88,4,757.12,222)
y^y^f^^^^n^^
"BLD",88,4,757.2,0)
757.2
"BLD",88,4,757.2,222)
y^y^f^^n^^y^o^n
"BLD",88,4,757.21,0)
757.21
"BLD",88,4,757.21,222)
y^y^f^^^^n^^
"BLD",88,4,757.3,0)
757.3
"BLD",88,4,757.3,222)
y^y^f^^^^n^^
"BLD",88,4,757.31,0)
757.31
"BLD",88,4,757.31,222)
y^y^f^^^^n^^
"BLD",88,4,757.4,0)
757.4
"BLD",88,4,757.4,222)
y^y^f^^^^n^^
"BLD",88,4,757.41,0)
757.41
"BLD",88,4,757.41,222)
y^y^f^^^^n^^
"BLD",88,4,"B",757,757)

"BLD",88,4,"B",757.001,757.001)

"BLD",88,4,"B",757.01,757.01)

"BLD",88,4,"B",757.011,757.011)

"BLD",88,4,"B",757.014,757.014)

"BLD",88,4,"B",757.02,757.02)

"BLD",88,4,"B",757.03,757.03)

"BLD",88,4,"B",757.04,757.04)

"BLD",88,4,"B",757.05,757.05)

"BLD",88,4,"B",757.06,757.06)

"BLD",88,4,"B",757.1,757.1)

"BLD",88,4,"B",757.11,757.11)

"BLD",88,4,"B",757.12,757.12)

"BLD",88,4,"B",757.2,757.2)

"BLD",88,4,"B",757.21,757.21)

"BLD",88,4,"B",757.3,757.3)

"BLD",88,4,"B",757.31,757.31)

"BLD",88,4,"B",757.4,757.4)

"BLD",88,4,"B",757.41,757.41)

"BLD",88,"ABPKG")
n
"BLD",88,"INI")
PRE^LEXILG
"BLD",88,"INIT")
POST^LEXILG
"BLD",88,"KRN",0)
^9.67PA^8994^15
"BLD",88,"KRN",.4,0)
.4
"BLD",88,"KRN",.4,"NM",0)
^9.68A^^
"BLD",88,"KRN",.401,0)
.401
"BLD",88,"KRN",.401,"NM",0)
^9.68A^^
"BLD",88,"KRN",.402,0)
.402
"BLD",88,"KRN",.403,0)
.403
"BLD",88,"KRN",.5,0)
.5
"BLD",88,"KRN",.84,0)
.84
"BLD",88,"KRN",3.6,0)
3.6
"BLD",88,"KRN",9.2,0)
9.2
"BLD",88,"KRN",9.8,0)
9.8
"BLD",88,"KRN",9.8,"NM",0)
^9.68A^358^295
"BLD",88,"KRN",9.8,"NM",1)
^^^
"BLD",88,"KRN",9.8,"NM",1,0)
GMPTA^^1
"BLD",88,"KRN",9.8,"NM",2)
^^^
"BLD",88,"KRN",9.8,"NM",2,0)
GMPTA1^^1
"BLD",88,"KRN",9.8,"NM",3)
^^^
"BLD",88,"KRN",9.8,"NM",3,0)
GMPTA2^^1
"BLD",88,"KRN",9.8,"NM",4)
^^^
"BLD",88,"KRN",9.8,"NM",4,0)
GMPTA3^^1
"BLD",88,"KRN",9.8,"NM",5)
^^^
"BLD",88,"KRN",9.8,"NM",5,0)
GMPTA4^^1
"BLD",88,"KRN",9.8,"NM",6)
^^^
"BLD",88,"KRN",9.8,"NM",6,0)
GMPTA5^^1
"BLD",88,"KRN",9.8,"NM",7)
^^^
"BLD",88,"KRN",9.8,"NM",7,0)
GMPTAB^^1
"BLD",88,"KRN",9.8,"NM",8)
^^^
"BLD",88,"KRN",9.8,"NM",8,0)
GMPTABC^^1
"BLD",88,"KRN",9.8,"NM",9)
^^^
"BLD",88,"KRN",9.8,"NM",9,0)
GMPTAL^^1
"BLD",88,"KRN",9.8,"NM",10)
^^^
"BLD",88,"KRN",9.8,"NM",10,0)
GMPTAL2^^1
"BLD",88,"KRN",9.8,"NM",11)
^^^
"BLD",88,"KRN",9.8,"NM",11,0)
GMPTALK^^1
"BLD",88,"KRN",9.8,"NM",12)
^^^
"BLD",88,"KRN",9.8,"NM",12,0)
GMPTAM^^1
"BLD",88,"KRN",9.8,"NM",13)
^^^
"BLD",88,"KRN",9.8,"NM",13,0)
GMPTAR^^1
"BLD",88,"KRN",9.8,"NM",14)
^^^
"BLD",88,"KRN",9.8,"NM",14,0)
GMPTAR2^^1
"BLD",88,"KRN",9.8,"NM",15)
^^^
"BLD",88,"KRN",9.8,"NM",15,0)
GMPTAR3^^1
"BLD",88,"KRN",9.8,"NM",16)
^^^
"BLD",88,"KRN",9.8,"NM",16,0)
GMPTAR4^^1
"BLD",88,"KRN",9.8,"NM",17)
^^^
"BLD",88,"KRN",9.8,"NM",17,0)
GMPTAR5^^1
"BLD",88,"KRN",9.8,"NM",18)
^^^
"BLD",88,"KRN",9.8,"NM",18,0)
GMPTAR6^^1
"BLD",88,"KRN",9.8,"NM",19)
^^^
"BLD",88,"KRN",9.8,"NM",19,0)
GMPTAR7^^1
"BLD",88,"KRN",9.8,"NM",20)
^^^
"BLD",88,"KRN",9.8,"NM",20,0)
GMPTAS^^1
"BLD",88,"KRN",9.8,"NM",21)
^^^
"BLD",88,"KRN",9.8,"NM",21,0)
GMPTAS2^^1
"BLD",88,"KRN",9.8,"NM",22)
^^^
"BLD",88,"KRN",9.8,"NM",22,0)
GMPTAS3^^1
"BLD",88,"KRN",9.8,"NM",23)
^^^
"BLD",88,"KRN",9.8,"NM",23,0)
GMPTAS4^^1
"BLD",88,"KRN",9.8,"NM",24)
^^^
"BLD",88,"KRN",9.8,"NM",24,0)
GMPTAS5^^1
"BLD",88,"KRN",9.8,"NM",25)
^^^
"BLD",88,"KRN",9.8,"NM",25,0)
GMPTAS6^^1
"BLD",88,"KRN",9.8,"NM",26)
^^^
"BLD",88,"KRN",9.8,"NM",26,0)
GMPTAS7^^1
"BLD",88,"KRN",9.8,"NM",27)
^^^
"BLD",88,"KRN",9.8,"NM",27,0)
GMPTASC^^1
"BLD",88,"KRN",9.8,"NM",28)
^^^
"BLD",88,"KRN",9.8,"NM",28,0)
GMPTASO^^1
"BLD",88,"KRN",9.8,"NM",29)
^^^
"BLD",88,"KRN",9.8,"NM",29,0)
GMPTDCC^^1
"BLD",88,"KRN",9.8,"NM",30)
^^^
"BLD",88,"KRN",9.8,"NM",30,0)
GMPTDCCC^^1
"BLD",88,"KRN",9.8,"NM",31)
^^^
"BLD",88,"KRN",9.8,"NM",31,0)
GMPTDCCS^^1
"BLD",88,"KRN",9.8,"NM",32)
^^^
"BLD",88,"KRN",9.8,"NM",32,0)
GMPTDCX^^1
"BLD",88,"KRN",9.8,"NM",33)
^^^
"BLD",88,"KRN",9.8,"NM",33,0)
GMPTDCXS^^1
"BLD",88,"KRN",9.8,"NM",34)
^^^
"BLD",88,"KRN",9.8,"NM",34,0)
GMPTDD1^^1
"BLD",88,"KRN",9.8,"NM",35)
^^^
"BLD",88,"KRN",9.8,"NM",35,0)
GMPTDD2^^1
"BLD",88,"KRN",9.8,"NM",36)
^^^
"BLD",88,"KRN",9.8,"NM",36,0)
GMPTDD3^^1
"BLD",88,"KRN",9.8,"NM",37)
^^^
"BLD",88,"KRN",9.8,"NM",37,0)
GMPTDD4^^1
"BLD",88,"KRN",9.8,"NM",38)
^^^
"BLD",88,"KRN",9.8,"NM",38,0)
GMPTDDIS^^1
"BLD",88,"KRN",9.8,"NM",39)
^^^
"BLD",88,"KRN",9.8,"NM",39,0)
GMPTDDS^^1
"BLD",88,"KRN",9.8,"NM",40)
^^^
"BLD",88,"KRN",9.8,"NM",40,0)
GMPTDDSD^^1
"BLD",88,"KRN",9.8,"NM",41)
^^^
"BLD",88,"KRN",9.8,"NM",41,0)
GMPTDDSP^^1
"BLD",88,"KRN",9.8,"NM",42)
^^^
"BLD",88,"KRN",9.8,"NM",42,0)
GMPTDDSS^^1
"BLD",88,"KRN",9.8,"NM",43)
^^^
"BLD",88,"KRN",9.8,"NM",43,0)
GMPTDDT1^^1
"BLD",88,"KRN",9.8,"NM",44)
^^^
"BLD",88,"KRN",9.8,"NM",44,0)
GMPTDDT2^^1
"BLD",88,"KRN",9.8,"NM",45)
^^^
"BLD",88,"KRN",9.8,"NM",45,0)
GMPTDDT3^^1
"BLD",88,"KRN",9.8,"NM",46)
^^^
"BLD",88,"KRN",9.8,"NM",46,0)
GMPTDDT4^^1
"BLD",88,"KRN",9.8,"NM",47)
^^^
"BLD",88,"KRN",9.8,"NM",47,0)
GMPTDDTC^^1
"BLD",88,"KRN",9.8,"NM",48)
^^^
"BLD",88,"KRN",9.8,"NM",48,0)
GMPTDDTD^^1
"BLD",88,"KRN",9.8,"NM",49)
^^^
"BLD",88,"KRN",9.8,"NM",49,0)
GMPTDDTF^^1
"BLD",88,"KRN",9.8,"NM",50)
^^^
"BLD",88,"KRN",9.8,"NM",50,0)
GMPTDDTV^^1
"BLD",88,"KRN",9.8,"NM",51)
^^^
"BLD",88,"KRN",9.8,"NM",51,0)
GMPTDFL^^1
"BLD",88,"KRN",9.8,"NM",52)
^^^
"BLD",88,"KRN",9.8,"NM",52,0)
GMPTDFLC^^1
"BLD",88,"KRN",9.8,"NM",53)
^^^
"BLD",88,"KRN",9.8,"NM",53,0)
GMPTDFLS^^1
"BLD",88,"KRN",9.8,"NM",54)
^^^
"BLD",88,"KRN",9.8,"NM",54,0)
GMPTDFLT^^1
"BLD",88,"KRN",9.8,"NM",55)
^^^
"BLD",88,"KRN",9.8,"NM",55,0)
GMPTDFN^^1
"BLD",88,"KRN",9.8,"NM",56)
^^^
"BLD",88,"KRN",9.8,"NM",56,0)
GMPTDFN2^^1
"BLD",88,"KRN",9.8,"NM",57)
^^^
"BLD",88,"KRN",9.8,"NM",57,0)
GMPTDFSB^^1
"BLD",88,"KRN",9.8,"NM",58)
^^^
"BLD",88,"KRN",9.8,"NM",58,0)
GMPTDFSE^^1
"BLD",88,"KRN",9.8,"NM",59)
^^^
"BLD",88,"KRN",9.8,"NM",59,0)
GMPTDFSI^^1
"BLD",88,"KRN",9.8,"NM",60)
^^^
"BLD",88,"KRN",9.8,"NM",60,0)
GMPTDFSO^^1
"BLD",88,"KRN",9.8,"NM",61)
^^^
"BLD",88,"KRN",9.8,"NM",61,0)
GMPTDFSS^^1
"BLD",88,"KRN",9.8,"NM",62)
^^^
"BLD",88,"KRN",9.8,"NM",62,0)
GMPTDFST^^1
"BLD",88,"KRN",9.8,"NM",63)
^^^
"BLD",88,"KRN",9.8,"NM",63,0)
GMPTDGRP^^1
"BLD",88,"KRN",9.8,"NM",64)
^^^
"BLD",88,"KRN",9.8,"NM",64,0)
GMPTDIC1^^1
"BLD",88,"KRN",9.8,"NM",65)
^^^
"BLD",88,"KRN",9.8,"NM",65,0)
GMPTDIC2^^1
"BLD",88,"KRN",9.8,"NM",66)
^^^
"BLD",88,"KRN",9.8,"NM",66,0)
GMPTDIC3^^1
"BLD",88,"KRN",9.8,"NM",67)
^^^
"BLD",88,"KRN",9.8,"NM",67,0)
GMPTDIC4^^1
"BLD",88,"KRN",9.8,"NM",68)
^^^
"BLD",88,"KRN",9.8,"NM",68,0)
GMPTDIC5^^1
"BLD",88,"KRN",9.8,"NM",69)
^^^
"BLD",88,"KRN",9.8,"NM",69,0)
GMPTDISP^^1
"BLD",88,"KRN",9.8,"NM",70)
^^^
"BLD",88,"KRN",9.8,"NM",70,0)
GMPTDLIM^^1
"BLD",88,"KRN",9.8,"NM",71)
^^^
"BLD",88,"KRN",9.8,"NM",71,0)
GMPTDM^^1
"BLD",88,"KRN",9.8,"NM",72)
^^^
"BLD",88,"KRN",9.8,"NM",72,0)
GMPTDM2^^1
"BLD",88,"KRN",9.8,"NM",73)
^^^
"BLD",88,"KRN",9.8,"NM",73,0)
GMPTDM3^^1
"BLD",88,"KRN",9.8,"NM",74)
^^^
"BLD",88,"KRN",9.8,"NM",74,0)
GMPTDM4^^1
"BLD",88,"KRN",9.8,"NM",75)
^^^
"BLD",88,"KRN",9.8,"NM",75,0)
GMPTDMG^^1
"BLD",88,"KRN",9.8,"NM",76)
^^^
"BLD",88,"KRN",9.8,"NM",76,0)
GMPTDMGO^^1
"BLD",88,"KRN",9.8,"NM",77)
^^^
"BLD",88,"KRN",9.8,"NM",77,0)
GMPTDMGR^^1
"BLD",88,"KRN",9.8,"NM",78)
^^^
"BLD",88,"KRN",9.8,"NM",78,0)
GMPTDMGT^^1
"BLD",88,"KRN",9.8,"NM",79)
^^^
"BLD",88,"KRN",9.8,"NM",79,0)
GMPTDMGU^^1
"BLD",88,"KRN",9.8,"NM",80)
^^^
"BLD",88,"KRN",9.8,"NM",80,0)
GMPTDMGV^^1
"BLD",88,"KRN",9.8,"NM",81)
^^^
"BLD",88,"KRN",9.8,"NM",81,0)
GMPTDOVR^^1
"BLD",88,"KRN",9.8,"NM",82)
^^^
"BLD",88,"KRN",9.8,"NM",82,0)
GMPTDSV^^1
"BLD",88,"KRN",9.8,"NM",83)
^^^
"BLD",88,"KRN",9.8,"NM",83,0)
GMPTDTSK^^1
"BLD",88,"KRN",9.8,"NM",84)
^^^
"BLD",88,"KRN",9.8,"NM",84,0)
GMPTDUSR^^1
"BLD",88,"KRN",9.8,"NM",85)
^^^
"BLD",88,"KRN",9.8,"NM",85,0)
GMPTDVER^^1
"BLD",88,"KRN",9.8,"NM",86)
^^^
"BLD",88,"KRN",9.8,"NM",86,0)
GMPTDVO^^1
"BLD",88,"KRN",9.8,"NM",87)
^^^
"BLD",88,"KRN",9.8,"NM",87,0)
GMPTDVOC^^1
"BLD",88,"KRN",9.8,"NM",88)
^^^
"BLD",88,"KRN",9.8,"NM",88,0)
GMPTDVOS^^1
"BLD",88,"KRN",9.8,"NM",89)
^^^
"BLD",88,"KRN",9.8,"NM",89,0)
GMPTEDF1^^1
"BLD",88,"KRN",9.8,"NM",90)
^^^
"BLD",88,"KRN",9.8,"NM",90,0)
GMPTEDF2^^1
"BLD",88,"KRN",9.8,"NM",91)
^^^
"BLD",88,"KRN",9.8,"NM",91,0)
GMPTERF^^1
"BLD",88,"KRN",9.8,"NM",92)
^^^
"BLD",88,"KRN",9.8,"NM",92,0)
GMPTERI^^1
"BLD",88,"KRN",9.8,"NM",93)
^^^
"BLD",88,"KRN",9.8,"NM",93,0)
GMPTHLP^^1
"BLD",88,"KRN",9.8,"NM",155)
^^^
"BLD",88,"KRN",9.8,"NM",155,0)
GMPTLK^^1
"BLD",88,"KRN",9.8,"NM",156)
^^^
"BLD",88,"KRN",9.8,"NM",156,0)
GMPTLK2^^1
"BLD",88,"KRN",9.8,"NM",157)
^^^
"BLD",88,"KRN",9.8,"NM",157,0)
GMPTMTLU^^1
"BLD",88,"KRN",9.8,"NM",158)
^^^
"BLD",88,"KRN",9.8,"NM",158,0)
GMPTNDX1^^1
"BLD",88,"KRN",9.8,"NM",159)
^^^
"BLD",88,"KRN",9.8,"NM",159,0)
GMPTNDX2^^1
"BLD",88,"KRN",9.8,"NM",160)
^^^
"BLD",88,"KRN",9.8,"NM",160,0)
GMPTNDX3^^1
"BLD",88,"KRN",9.8,"NM",161)
^^^
"BLD",88,"KRN",9.8,"NM",161,0)
GMPTNDX4^^1
"BLD",88,"KRN",9.8,"NM",162)
^^^
"BLD",88,"KRN",9.8,"NM",162,0)
GMPTNDX5^^1
"BLD",88,"KRN",9.8,"NM",163)
^^^
"BLD",88,"KRN",9.8,"NM",163,0)
GMPTNDX6^^1
"BLD",88,"KRN",9.8,"NM",164)
^^^
"BLD",88,"KRN",9.8,"NM",164,0)
GMPTNTEG^^1
"BLD",88,"KRN",9.8,"NM",165)
^^^
"BLD",88,"KRN",9.8,"NM",165,0)
GMPTOLKN^^1
"BLD",88,"KRN",9.8,"NM",166)
^^^
"BLD",88,"KRN",9.8,"NM",166,0)
GMPTPRNT^^1
"BLD",88,"KRN",9.8,"NM",167)
^^^
"BLD",88,"KRN",9.8,"NM",167,0)
GMPTSC^^1
"BLD",88,"KRN",9.8,"NM",168)
^^^
"BLD",88,"KRN",9.8,"NM",168,0)
GMPTSC2^^1
"BLD",88,"KRN",9.8,"NM",169)
^^^
"BLD",88,"KRN",9.8,"NM",169,0)
GMPTSC3^^1
"BLD",88,"KRN",9.8,"NM",170)
^^^
"BLD",88,"KRN",9.8,"NM",170,0)
GMPTSEND^^1
"BLD",88,"KRN",9.8,"NM",172)
^^^
"BLD",88,"KRN",9.8,"NM",172,0)
GMPTSET2^^1
"BLD",88,"KRN",9.8,"NM",173)
^^^
"BLD",88,"KRN",9.8,"NM",173,0)
GMPTSET3^^1
"BLD",88,"KRN",9.8,"NM",174)
^^^
"BLD",88,"KRN",9.8,"NM",174,0)
GMPTSET4^^1
"BLD",88,"KRN",9.8,"NM",175)
^^^
"BLD",88,"KRN",9.8,"NM",175,0)
GMPTSET5^^1
"BLD",88,"KRN",9.8,"NM",177,0)
LEXA^^0^B18021273
"BLD",88,"KRN",9.8,"NM",178,0)
LEXA1^^0^B21427233
"BLD",88,"KRN",9.8,"NM",179,0)
LEXA2^^0^B508535
"BLD",88,"KRN",9.8,"NM",180,0)
LEXA3^^0^B7664283
"BLD",88,"KRN",9.8,"NM",181,0)
LEXA4^^0^B7326911
"BLD",88,"KRN",9.8,"NM",182,0)
LEXAB^^0^B8131417
"BLD",88,"KRN",9.8,"NM",183,0)
LEXABC^^0^B17931204
"BLD",88,"KRN",9.8,"NM",184,0)
LEXAFIL^^0^B205120
"BLD",88,"KRN",9.8,"NM",185,0)
LEXAL^^0^B25447890
"BLD",88,"KRN",9.8,"NM",186,0)
LEXAL2^^0^B12928118
"BLD",88,"KRN",9.8,"NM",187,0)
LEXALK^^0^B17237980
"BLD",88,"KRN",9.8,"NM",188,0)
LEXAM^^0^B15878015
"BLD",88,"KRN",9.8,"NM",189,0)
LEXAR^^0^B16670196
"BLD",88,"KRN",9.8,"NM",190,0)
LEXAR2^^0^B1018662
"BLD",88,"KRN",9.8,"NM",191,0)
LEXAR3^^0^B21249688
"BLD",88,"KRN",9.8,"NM",192,0)
LEXAR4^^0^B6929474
"BLD",88,"KRN",9.8,"NM",193,0)
LEXAR5^^0^B22901752
"BLD",88,"KRN",9.8,"NM",194,0)
LEXAR6^^0^B13302186
"BLD",88,"KRN",9.8,"NM",195,0)
LEXAR7^^0^B7921190
"BLD",88,"KRN",9.8,"NM",196,0)
LEXAS^^0^B6348389
"BLD",88,"KRN",9.8,"NM",197,0)
LEXAS2^^0^B10917713
"BLD",88,"KRN",9.8,"NM",198,0)
LEXAS3^^0^B4196429
"BLD",88,"KRN",9.8,"NM",199,0)
LEXAS4^^0^B8439698
"BLD",88,"KRN",9.8,"NM",200,0)
LEXAS5^^0^B14441583
"BLD",88,"KRN",9.8,"NM",201,0)
LEXAS6^^0^B6565185
"BLD",88,"KRN",9.8,"NM",202,0)
LEXAS7^^0^B18643877
"BLD",88,"KRN",9.8,"NM",203,0)
LEXASC^^0^B6355376
"BLD",88,"KRN",9.8,"NM",204,0)
LEXASO^^0^B10506342
"BLD",88,"KRN",9.8,"NM",205,0)
LEXCODE^^0^B6429849
"BLD",88,"KRN",9.8,"NM",206,0)
LEXDCC^^0^B4957812
"BLD",88,"KRN",9.8,"NM",207,0)
LEXDCCC^^0^B8352647
"BLD",88,"KRN",9.8,"NM",208,0)
LEXDCCS^^0^B12310875
"BLD",88,"KRN",9.8,"NM",209,0)
LEXDCX^^0^B4372991
"BLD",88,"KRN",9.8,"NM",210,0)
LEXDCXS^^0^B20695673
"BLD",88,"KRN",9.8,"NM",211,0)
LEXDD1^^0^B22014117
"BLD",88,"KRN",9.8,"NM",212,0)
LEXDD2^^0^B3129195
"BLD",88,"KRN",9.8,"NM",213,0)
LEXDD3^^0^B947330
"BLD",88,"KRN",9.8,"NM",214,0)
LEXDD4^^0^B14098487
"BLD",88,"KRN",9.8,"NM",215,0)
LEXDDS^^0^B2093495
"BLD",88,"KRN",9.8,"NM",216,0)
LEXDDSD^^0^B8702123
"BLD",88,"KRN",9.8,"NM",217,0)
LEXDDSP^^0^B14491280
"BLD",88,"KRN",9.8,"NM",218,0)
LEXDDSS^^0^B2858762
"BLD",88,"KRN",9.8,"NM",219,0)
LEXDDT1^^0^B5416359
"BLD",88,"KRN",9.8,"NM",220,0)
LEXDDT2^^0^B4317509
"BLD",88,"KRN",9.8,"NM",221,0)
LEXDDTC^^0^B1554828
"BLD",88,"KRN",9.8,"NM",222,0)
LEXDDTD^^0^B1846548
"BLD",88,"KRN",9.8,"NM",223,0)
LEXDDTF^^0^B13760824
"BLD",88,"KRN",9.8,"NM",224,0)
LEXDDTV^^0^B3335880
"BLD",88,"KRN",9.8,"NM",225,0)
LEXDFL^^0^B4960220
"BLD",88,"KRN",9.8,"NM",226,0)
LEXDFLC^^0^B795201
"BLD",88,"KRN",9.8,"NM",227,0)
LEXDFLS^^0^B14832359
"BLD",88,"KRN",9.8,"NM",228,0)
LEXDFLT^^0^B2054932
"BLD",88,"KRN",9.8,"NM",229,0)
LEXDFN^^0^B15072280
"BLD",88,"KRN",9.8,"NM",230,0)
LEXDFN2^^0^B10551696
"BLD",88,"KRN",9.8,"NM",231,0)
LEXDFSB^^0^B3384984
"BLD",88,"KRN",9.8,"NM",232,0)
LEXDFSE^^0^B11756941
"BLD",88,"KRN",9.8,"NM",233,0)
LEXDFSI^^0^B9333756
"BLD",88,"KRN",9.8,"NM",234,0)
LEXDFSO^^0^B6471992
"BLD",88,"KRN",9.8,"NM",235,0)
LEXDFSS^^0^B18377628
"BLD",88,"KRN",9.8,"NM",236,0)
LEXDFST^^0^B6173810
"BLD",88,"KRN",9.8,"NM",237,0)
LEXDM^^0^B14239136
"BLD",88,"KRN",9.8,"NM",238,0)
LEXDM2^^0^B12707166
"BLD",88,"KRN",9.8,"NM",239,0)
LEXDM3^^0^B2911195
"BLD",88,"KRN",9.8,"NM",240,0)
LEXDM4^^0^B22048012
"BLD",88,"KRN",9.8,"NM",241,0)
LEXDMG^^0^B10098170
"BLD",88,"KRN",9.8,"NM",242,0)
LEXDMGO^^0^B5510946
"BLD",88,"KRN",9.8,"NM",243,0)
LEXDMGT^^0^B13311302
"BLD",88,"KRN",9.8,"NM",244,0)
LEXDMGU^^0^B19106674
"BLD",88,"KRN",9.8,"NM",245,0)
LEXDMGV^^0^B12206347
"BLD",88,"KRN",9.8,"NM",246,0)
LEXDSV^^0^B5732630
"BLD",88,"KRN",9.8,"NM",247,0)
LEXDVO^^0^B4237055
"BLD",88,"KRN",9.8,"NM",248,0)
LEXDVOS^^0^B13847911
"BLD",88,"KRN",9.8,"NM",249,0)
LEXEDF1^^0^B13998485
"BLD",88,"KRN",9.8,"NM",250,0)
LEXEDF2^^0^B21442230
"BLD",88,"KRN",9.8,"NM",251,0)
LEXERF^^0^B6241374
"BLD",88,"KRN",9.8,"NM",252,0)
LEXERI^^0^B25688427
"BLD",88,"KRN",9.8,"NM",253,0)
LEXHLP^^0^B24101112
"BLD",88,"KRN",9.8,"NM",254,0)
LEXIENV^^0^B2220341
"BLD",88,"KRN",9.8,"NM",255,0)
LEXILG^^0^B3264267
"BLD",88,"KRN",9.8,"NM",256,0)
LEXILGD^^0^B6547962
"BLD",88,"KRN",9.8,"NM",257,0)
LEXILGO^^0^B7485420
"BLD",88,"KRN",9.8,"NM",258,0)
LEXILGP^^0^B6881976
"BLD",88,"KRN",9.8,"NM",259,0)
LEXILGU^^0^B6610815
"BLD",88,"KRN",9.8,"NM",260,0)
LEXILGX^^0^B7059394
"BLD",88,"KRN",9.8,"NM",261,0)
LEXLGM^^0^B24621990
"BLD",88,"KRN",9.8,"NM",262,0)
LEXLGM2^^0^B12066085
"BLD",88,"KRN",9.8,"NM",263,0)
LEXLGM3^^0^B7643286
"BLD",88,"KRN",9.8,"NM",264)
^^^
"BLD",88,"KRN",9.8,"NM",264,0)
LEXLGM4^^1^B22353576
"BLD",88,"KRN",9.8,"NM",265,0)
LEXLK^^0^B4258330
"BLD",88,"KRN",9.8,"NM",266,0)
LEXLK2^^0^B19490809
"BLD",88,"KRN",9.8,"NM",267,0)
LEXMTLU^^0^B4230043
"BLD",88,"KRN",9.8,"NM",268,0)
LEXNDX1^^0^B13157193
"BLD",88,"KRN",9.8,"NM",269,0)
LEXNDX2^^0^B17369617
"BLD",88,"KRN",9.8,"NM",270,0)
LEXNDX3^^0^B9214968
"BLD",88,"KRN",9.8,"NM",271,0)
LEXNDX4^^0^B20468165
"BLD",88,"KRN",9.8,"NM",272,0)
LEXNDX5^^0^B6805423
"BLD",88,"KRN",9.8,"NM",273,0)
LEXNDX6^^0^B7394894
"BLD",88,"KRN",9.8,"NM",274,0)
LEXPRNT^^0^B14926711
"BLD",88,"KRN",9.8,"NM",275,0)
LEXSC^^0^B3047995
"BLD",88,"KRN",9.8,"NM",276,0)
LEXSC2^^0^B8702305
"BLD",88,"KRN",9.8,"NM",277,0)
LEXSC3^^0^B9634238
"BLD",88,"KRN",9.8,"NM",278,0)
LEXSET^^0^B9924304
"BLD",88,"KRN",9.8,"NM",279,0)
LEXSET2^^0^B16589972
"BLD",88,"KRN",9.8,"NM",280,0)
LEXSET3^^0^B12060818
"BLD",88,"KRN",9.8,"NM",281,0)
LEXSET4^^0^B3072931
"BLD",88,"KRN",9.8,"NM",282,0)
LEXSET5^^0^B21360423
"BLD",88,"KRN",9.8,"NM",283,0)
LEXSRC^^0^B4572416
"BLD",88,"KRN",9.8,"NM",284,0)
LEXTOLKN^^0^B10362013
"BLD",88,"KRN",9.8,"NM",285,0)
LEXU^^0^B12675056
"BLD",88,"KRN",9.8,"NM",286,0)
GMPLBLDC^^0^B30113550
"BLD",88,"KRN",9.8,"NM",287,0)
GMPLENFM^^0^B11984760
"BLD",88,"KRN",9.8,"NM",288,0)
GMPLHIST^^0^B10811073
"BLD",88,"KRN",9.8,"NM",289,0)
GMPLUTL1^^0^B15027510
"BLD",88,"KRN",9.8,"NM",290,0)
GMPLX^^0^B22856107
"BLD",88,"KRN",9.8,"NM",291)
^^^
"BLD",88,"KRN",9.8,"NM",291,0)
LEXLGM5^^1^B2711877
"BLD",88,"KRN",9.8,"NM",292)
^^^
"BLD",88,"KRN",9.8,"NM",292,0)
GMPTI001^^1
"BLD",88,"KRN",9.8,"NM",293)
^^^
"BLD",88,"KRN",9.8,"NM",293,0)
GMPTI002^^1
"BLD",88,"KRN",9.8,"NM",294)
^^^
"BLD",88,"KRN",9.8,"NM",294,0)
GMPTI003^^1
"BLD",88,"KRN",9.8,"NM",295)
^^^
"BLD",88,"KRN",9.8,"NM",295,0)
GMPTI004^^1
"BLD",88,"KRN",9.8,"NM",296)
^^^
"BLD",88,"KRN",9.8,"NM",296,0)
GMPTI005^^1
"BLD",88,"KRN",9.8,"NM",297)
^^^
"BLD",88,"KRN",9.8,"NM",297,0)
GMPTI006^^1
"BLD",88,"KRN",9.8,"NM",298)
^^^
"BLD",88,"KRN",9.8,"NM",298,0)
GMPTI007^^1
"BLD",88,"KRN",9.8,"NM",299)
^^^
"BLD",88,"KRN",9.8,"NM",299,0)
GMPTI008^^1
"BLD",88,"KRN",9.8,"NM",300)
^^^
"BLD",88,"KRN",9.8,"NM",300,0)
GMPTI009^^1
"BLD",88,"KRN",9.8,"NM",301)
^^^
"BLD",88,"KRN",9.8,"NM",301,0)
GMPTI00A^^1
"BLD",88,"KRN",9.8,"NM",302)
^^^
"BLD",88,"KRN",9.8,"NM",302,0)
GMPTI00B^^1
"BLD",88,"KRN",9.8,"NM",303)
^^^
"BLD",88,"KRN",9.8,"NM",303,0)
GMPTI00C^^1
"BLD",88,"KRN",9.8,"NM",304)
^^^
"BLD",88,"KRN",9.8,"NM",304,0)
GMPTI00D^^1
"BLD",88,"KRN",9.8,"NM",305)
^^^
"BLD",88,"KRN",9.8,"NM",305,0)
GMPTI00E^^1
"BLD",88,"KRN",9.8,"NM",306)
^^^
"BLD",88,"KRN",9.8,"NM",306,0)
GMPTI00F^^1
"BLD",88,"KRN",9.8,"NM",307)
^^^
"BLD",88,"KRN",9.8,"NM",307,0)
GMPTI00G^^1
"BLD",88,"KRN",9.8,"NM",308)
^^^
"BLD",88,"KRN",9.8,"NM",308,0)
GMPTI00H^^1
"BLD",88,"KRN",9.8,"NM",309)
^^^
"BLD",88,"KRN",9.8,"NM",309,0)
GMPTI00I^^1
"BLD",88,"KRN",9.8,"NM",310)
^^^
"BLD",88,"KRN",9.8,"NM",310,0)
GMPTI00J^^1
"BLD",88,"KRN",9.8,"NM",311)
^^^
"BLD",88,"KRN",9.8,"NM",311,0)
GMPTI00K^^1
"BLD",88,"KRN",9.8,"NM",312)
^^^
"BLD",88,"KRN",9.8,"NM",312,0)
GMPTI00L^^1
"BLD",88,"KRN",9.8,"NM",313)
^^^
"BLD",88,"KRN",9.8,"NM",313,0)
GMPTI00M^^1
"BLD",88,"KRN",9.8,"NM",314)
^^^
"BLD",88,"KRN",9.8,"NM",314,0)
GMPTI00N^^1
"BLD",88,"KRN",9.8,"NM",315)
^^^
"BLD",88,"KRN",9.8,"NM",315,0)
GMPTI00O^^1
"BLD",88,"KRN",9.8,"NM",316)
^^^
"BLD",88,"KRN",9.8,"NM",316,0)
GMPTI00P^^1
"BLD",88,"KRN",9.8,"NM",317)
^^^
"BLD",88,"KRN",9.8,"NM",317,0)
GMPTI00Q^^1
"BLD",88,"KRN",9.8,"NM",318)
^^^
"BLD",88,"KRN",9.8,"NM",318,0)
GMPTI00R^^1
"BLD",88,"KRN",9.8,"NM",319)
^^^
"BLD",88,"KRN",9.8,"NM",319,0)
GMPTI00S^^1
"BLD",88,"KRN",9.8,"NM",320)
^^^
"BLD",88,"KRN",9.8,"NM",320,0)
GMPTI00T^^1
"BLD",88,"KRN",9.8,"NM",321)
^^^
"BLD",88,"KRN",9.8,"NM",321,0)
GMPTI00U^^1
"BLD",88,"KRN",9.8,"NM",322)
^^^
"BLD",88,"KRN",9.8,"NM",322,0)
GMPTI00V^^1
"BLD",88,"KRN",9.8,"NM",323)
^^^
"BLD",88,"KRN",9.8,"NM",323,0)
GMPTI00W^^1
"BLD",88,"KRN",9.8,"NM",324)
^^^
"BLD",88,"KRN",9.8,"NM",324,0)
GMPTI00X^^1
"BLD",88,"KRN",9.8,"NM",325)
^^^
"BLD",88,"KRN",9.8,"NM",325,0)
GMPTI00Y^^1
"BLD",88,"KRN",9.8,"NM",326)
^^^
"BLD",88,"KRN",9.8,"NM",326,0)
GMPTI00Z^^1
"BLD",88,"KRN",9.8,"NM",327)
^^^
"BLD",88,"KRN",9.8,"NM",327,0)
GMPTI010^^1
"BLD",88,"KRN",9.8,"NM",328)
^^^
"BLD",88,"KRN",9.8,"NM",328,0)
GMPTI011^^1
"BLD",88,"KRN",9.8,"NM",329)
^^^
"BLD",88,"KRN",9.8,"NM",329,0)
GMPTI012^^1
"BLD",88,"KRN",9.8,"NM",330)
^^^
"BLD",88,"KRN",9.8,"NM",330,0)
GMPTI013^^1
"BLD",88,"KRN",9.8,"NM",331)
^^^
"BLD",88,"KRN",9.8,"NM",331,0)
GMPTI014^^1
"BLD",88,"KRN",9.8,"NM",332)
^^^
"BLD",88,"KRN",9.8,"NM",332,0)
GMPTI015^^1
"BLD",88,"KRN",9.8,"NM",333)
^^^
"BLD",88,"KRN",9.8,"NM",333,0)
GMPTI016^^1
"BLD",88,"KRN",9.8,"NM",334)
^^^
"BLD",88,"KRN",9.8,"NM",334,0)
GMPTI017^^1
"BLD",88,"KRN",9.8,"NM",335)
^^^
"BLD",88,"KRN",9.8,"NM",335,0)
GMPTI018^^1
"BLD",88,"KRN",9.8,"NM",336)
^^^
"BLD",88,"KRN",9.8,"NM",336,0)
GMPTI019^^1
"BLD",88,"KRN",9.8,"NM",337)
^^^
"BLD",88,"KRN",9.8,"NM",337,0)
GMPTI01A^^1
"BLD",88,"KRN",9.8,"NM",338)
^^^
"BLD",88,"KRN",9.8,"NM",338,0)
GMPTI01B^^1
"BLD",88,"KRN",9.8,"NM",339)
^^^
"BLD",88,"KRN",9.8,"NM",339,0)
GMPTI01C^^1
"BLD",88,"KRN",9.8,"NM",340)
^^^
"BLD",88,"KRN",9.8,"NM",340,0)
GMPTI01D^^1
"BLD",88,"KRN",9.8,"NM",341)
^^^
"BLD",88,"KRN",9.8,"NM",341,0)
GMPTI01E^^1
"BLD",88,"KRN",9.8,"NM",342)
^^^
"BLD",88,"KRN",9.8,"NM",342,0)
GMPTI01F^^1
"BLD",88,"KRN",9.8,"NM",343)
^^^
"BLD",88,"KRN",9.8,"NM",343,0)
GMPTIENV^^1
"BLD",88,"KRN",9.8,"NM",344)
^^^
"BLD",88,"KRN",9.8,"NM",344,0)
GMPTINI1^^1
"BLD",88,"KRN",9.8,"NM",345)
^^^
"BLD",88,"KRN",9.8,"NM",345,0)
GMPTINI2^^1
"BLD",88,"KRN",9.8,"NM",346)
^^^
"BLD",88,"KRN",9.8,"NM",346,0)
GMPTINI3^^1
"BLD",88,"KRN",9.8,"NM",347)
^^^
"BLD",88,"KRN",9.8,"NM",347,0)
GMPTINI4^^1
"BLD",88,"KRN",9.8,"NM",348)
^^^
"BLD",88,"KRN",9.8,"NM",348,0)
GMPTINI5^^1
"BLD",88,"KRN",9.8,"NM",349)
^^^
"BLD",88,"KRN",9.8,"NM",349,0)
GMPTINIS^^1
"BLD",88,"KRN",9.8,"NM",350)
^^^
"BLD",88,"KRN",9.8,"NM",350,0)
GMPTINIT^^1
"BLD",88,"KRN",9.8,"NM",351)
^^^
"BLD",88,"KRN",9.8,"NM",351,0)
GMPTIPS2^^1
"BLD",88,"KRN",9.8,"NM",352)
^^^
"BLD",88,"KRN",9.8,"NM",352,0)
GMPTIPST^^1
"BLD",88,"KRN",9.8,"NM",353,0)
LEXPL^^0^B17717108
"BLD",88,"KRN",9.8,"NM",354,0)
LEXPLEM^^0^B19883260
"BLD",88,"KRN",9.8,"NM",355,0)
LEXPLIA^^0^B6493325
"BLD",88,"KRN",9.8,"NM",356,0)
LEXPLUP^^0^B5537091
"BLD",88,"KRN",9.8,"NM",357,0)
GMPTU^^0^B142417
"BLD",88,"KRN",9.8,"NM",358,0)
GMPTSET^^0^B97029
"BLD",88,"KRN",9.8,"NM","B","GMPLBLDC",286)

"BLD",88,"KRN",9.8,"NM","B","GMPLENFM",287)

"BLD",88,"KRN",9.8,"NM","B","GMPLHIST",288)

"BLD",88,"KRN",9.8,"NM","B","GMPLUTL1",289)

"BLD",88,"KRN",9.8,"NM","B","GMPLX",290)

"BLD",88,"KRN",9.8,"NM","B","GMPTA",1)

"BLD",88,"KRN",9.8,"NM","B","GMPTA1",2)

"BLD",88,"KRN",9.8,"NM","B","GMPTA2",3)

"BLD",88,"KRN",9.8,"NM","B","GMPTA3",4)

"BLD",88,"KRN",9.8,"NM","B","GMPTA4",5)

"BLD",88,"KRN",9.8,"NM","B","GMPTA5",6)

"BLD",88,"KRN",9.8,"NM","B","GMPTAB",7)

"BLD",88,"KRN",9.8,"NM","B","GMPTABC",8)

"BLD",88,"KRN",9.8,"NM","B","GMPTAL",9)

"BLD",88,"KRN",9.8,"NM","B","GMPTAL2",10)

"BLD",88,"KRN",9.8,"NM","B","GMPTALK",11)

"BLD",88,"KRN",9.8,"NM","B","GMPTAM",12)

"BLD",88,"KRN",9.8,"NM","B","GMPTAR",13)

"BLD",88,"KRN",9.8,"NM","B","GMPTAR2",14)

"BLD",88,"KRN",9.8,"NM","B","GMPTAR3",15)

"BLD",88,"KRN",9.8,"NM","B","GMPTAR4",16)

"BLD",88,"KRN",9.8,"NM","B","GMPTAR5",17)

"BLD",88,"KRN",9.8,"NM","B","GMPTAR6",18)

"BLD",88,"KRN",9.8,"NM","B","GMPTAR7",19)

"BLD",88,"KRN",9.8,"NM","B","GMPTAS",20)

"BLD",88,"KRN",9.8,"NM","B","GMPTAS2",21)

"BLD",88,"KRN",9.8,"NM","B","GMPTAS3",22)

"BLD",88,"KRN",9.8,"NM","B","GMPTAS4",23)

"BLD",88,"KRN",9.8,"NM","B","GMPTAS5",24)

"BLD",88,"KRN",9.8,"NM","B","GMPTAS6",25)

"BLD",88,"KRN",9.8,"NM","B","GMPTAS7",26)

"BLD",88,"KRN",9.8,"NM","B","GMPTASC",27)

"BLD",88,"KRN",9.8,"NM","B","GMPTASO",28)

"BLD",88,"KRN",9.8,"NM","B","GMPTDCC",29)

"BLD",88,"KRN",9.8,"NM","B","GMPTDCCC",30)

"BLD",88,"KRN",9.8,"NM","B","GMPTDCCS",31)

"BLD",88,"KRN",9.8,"NM","B","GMPTDCX",32)

"BLD",88,"KRN",9.8,"NM","B","GMPTDCXS",33)

"BLD",88,"KRN",9.8,"NM","B","GMPTDD1",34)

"BLD",88,"KRN",9.8,"NM","B","GMPTDD2",35)

"BLD",88,"KRN",9.8,"NM","B","GMPTDD3",36)

"BLD",88,"KRN",9.8,"NM","B","GMPTDD4",37)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDIS",38)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDS",39)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDSD",40)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDSP",41)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDSS",42)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDT1",43)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDT2",44)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDT3",45)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDT4",46)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDTC",47)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDTD",48)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDTF",49)

"BLD",88,"KRN",9.8,"NM","B","GMPTDDTV",50)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFL",51)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFLC",52)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFLS",53)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFLT",54)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFN",55)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFN2",56)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFSB",57)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFSE",58)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFSI",59)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFSO",60)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFSS",61)

"BLD",88,"KRN",9.8,"NM","B","GMPTDFST",62)

"BLD",88,"KRN",9.8,"NM","B","GMPTDGRP",63)

"BLD",88,"KRN",9.8,"NM","B","GMPTDIC1",64)

"BLD",88,"KRN",9.8,"NM","B","GMPTDIC2",65)

"BLD",88,"KRN",9.8,"NM","B","GMPTDIC3",66)

"BLD",88,"KRN",9.8,"NM","B","GMPTDIC4",67)

"BLD",88,"KRN",9.8,"NM","B","GMPTDIC5",68)

"BLD",88,"KRN",9.8,"NM","B","GMPTDISP",69)

"BLD",88,"KRN",9.8,"NM","B","GMPTDLIM",70)

"BLD",88,"KRN",9.8,"NM","B","GMPTDM",71)

"BLD",88,"KRN",9.8,"NM","B","GMPTDM2",72)

"BLD",88,"KRN",9.8,"NM","B","GMPTDM3",73)

"BLD",88,"KRN",9.8,"NM","B","GMPTDM4",74)

"BLD",88,"KRN",9.8,"NM","B","GMPTDMG",75)

"BLD",88,"KRN",9.8,"NM","B","GMPTDMGO",76)

"BLD",88,"KRN",9.8,"NM","B","GMPTDMGR",77)

"BLD",88,"KRN",9.8,"NM","B","GMPTDMGT",78)

"BLD",88,"KRN",9.8,"NM","B","GMPTDMGU",79)

"BLD",88,"KRN",9.8,"NM","B","GMPTDMGV",80)

"BLD",88,"KRN",9.8,"NM","B","GMPTDOVR",81)

"BLD",88,"KRN",9.8,"NM","B","GMPTDSV",82)

"BLD",88,"KRN",9.8,"NM","B","GMPTDTSK",83)

"BLD",88,"KRN",9.8,"NM","B","GMPTDUSR",84)

"BLD",88,"KRN",9.8,"NM","B","GMPTDVER",85)

"BLD",88,"KRN",9.8,"NM","B","GMPTDVO",86)

"BLD",88,"KRN",9.8,"NM","B","GMPTDVOC",87)

"BLD",88,"KRN",9.8,"NM","B","GMPTDVOS",88)

"BLD",88,"KRN",9.8,"NM","B","GMPTEDF1",89)

"BLD",88,"KRN",9.8,"NM","B","GMPTEDF2",90)

"BLD",88,"KRN",9.8,"NM","B","GMPTERF",91)

"BLD",88,"KRN",9.8,"NM","B","GMPTERI",92)

"BLD",88,"KRN",9.8,"NM","B","GMPTHLP",93)

"BLD",88,"KRN",9.8,"NM","B","GMPTI001",292)

"BLD",88,"KRN",9.8,"NM","B","GMPTI002",293)

"BLD",88,"KRN",9.8,"NM","B","GMPTI003",294)

"BLD",88,"KRN",9.8,"NM","B","GMPTI004",295)

"BLD",88,"KRN",9.8,"NM","B","GMPTI005",296)

"BLD",88,"KRN",9.8,"NM","B","GMPTI006",297)

"BLD",88,"KRN",9.8,"NM","B","GMPTI007",298)

"BLD",88,"KRN",9.8,"NM","B","GMPTI008",299)

"BLD",88,"KRN",9.8,"NM","B","GMPTI009",300)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00A",301)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00B",302)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00C",303)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00D",304)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00E",305)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00F",306)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00G",307)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00H",308)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00I",309)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00J",310)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00K",311)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00L",312)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00M",313)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00N",314)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00O",315)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00P",316)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00Q",317)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00R",318)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00S",319)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00T",320)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00U",321)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00V",322)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00W",323)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00X",324)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00Y",325)

"BLD",88,"KRN",9.8,"NM","B","GMPTI00Z",326)

"BLD",88,"KRN",9.8,"NM","B","GMPTI010",327)

"BLD",88,"KRN",9.8,"NM","B","GMPTI011",328)

"BLD",88,"KRN",9.8,"NM","B","GMPTI012",329)

"BLD",88,"KRN",9.8,"NM","B","GMPTI013",330)

"BLD",88,"KRN",9.8,"NM","B","GMPTI014",331)

"BLD",88,"KRN",9.8,"NM","B","GMPTI015",332)

"BLD",88,"KRN",9.8,"NM","B","GMPTI016",333)

"BLD",88,"KRN",9.8,"NM","B","GMPTI017",334)

"BLD",88,"KRN",9.8,"NM","B","GMPTI018",335)

"BLD",88,"KRN",9.8,"NM","B","GMPTI019",336)

"BLD",88,"KRN",9.8,"NM","B","GMPTI01A",337)

"BLD",88,"KRN",9.8,"NM","B","GMPTI01B",338)

"BLD",88,"KRN",9.8,"NM","B","GMPTI01C",339)

"BLD",88,"KRN",9.8,"NM","B","GMPTI01D",340)

"BLD",88,"KRN",9.8,"NM","B","GMPTI01E",341)

"BLD",88,"KRN",9.8,"NM","B","GMPTI01F",342)

"BLD",88,"KRN",9.8,"NM","B","GMPTIENV",343)

"BLD",88,"KRN",9.8,"NM","B","GMPTINI1",344)

"BLD",88,"KRN",9.8,"NM","B","GMPTINI2",345)

"BLD",88,"KRN",9.8,"NM","B","GMPTINI3",346)

"BLD",88,"KRN",9.8,"NM","B","GMPTINI4",347)

"BLD",88,"KRN",9.8,"NM","B","GMPTINI5",348)

"BLD",88,"KRN",9.8,"NM","B","GMPTINIS",349)

"BLD",88,"KRN",9.8,"NM","B","GMPTINIT",350)

"BLD",88,"KRN",9.8,"NM","B","GMPTIPS2",351)

"BLD",88,"KRN",9.8,"NM","B","GMPTIPST",352)

"BLD",88,"KRN",9.8,"NM","B","GMPTLK",155)

"BLD",88,"KRN",9.8,"NM","B","GMPTLK2",156)

"BLD",88,"KRN",9.8,"NM","B","GMPTMTLU",157)

"BLD",88,"KRN",9.8,"NM","B","GMPTNDX1",158)

"BLD",88,"KRN",9.8,"NM","B","GMPTNDX2",159)

"BLD",88,"KRN",9.8,"NM","B","GMPTNDX3",160)

"BLD",88,"KRN",9.8,"NM","B","GMPTNDX4",161)

"BLD",88,"KRN",9.8,"NM","B","GMPTNDX5",162)

"BLD",88,"KRN",9.8,"NM","B","GMPTNDX6",163)

"BLD",88,"KRN",9.8,"NM","B","GMPTNTEG",164)

"BLD",88,"KRN",9.8,"NM","B","GMPTOLKN",165)

"BLD",88,"KRN",9.8,"NM","B","GMPTPRNT",166)

"BLD",88,"KRN",9.8,"NM","B","GMPTSC",167)

"BLD",88,"KRN",9.8,"NM","B","GMPTSC2",168)

"BLD",88,"KRN",9.8,"NM","B","GMPTSC3",169)

"BLD",88,"KRN",9.8,"NM","B","GMPTSEND",170)

"BLD",88,"KRN",9.8,"NM","B","GMPTSET",358)

"BLD",88,"KRN",9.8,"NM","B","GMPTSET2",172)

"BLD",88,"KRN",9.8,"NM","B","GMPTSET3",173)

"BLD",88,"KRN",9.8,"NM","B","GMPTSET4",174)

"BLD",88,"KRN",9.8,"NM","B","GMPTSET5",175)

"BLD",88,"KRN",9.8,"NM","B","GMPTU",357)

"BLD",88,"KRN",9.8,"NM","B","LEXA",177)

"BLD",88,"KRN",9.8,"NM","B","LEXA1",178)

"BLD",88,"KRN",9.8,"NM","B","LEXA2",179)

"BLD",88,"KRN",9.8,"NM","B","LEXA3",180)

"BLD",88,"KRN",9.8,"NM","B","LEXA4",181)

"BLD",88,"KRN",9.8,"NM","B","LEXAB",182)

"BLD",88,"KRN",9.8,"NM","B","LEXABC",183)

"BLD",88,"KRN",9.8,"NM","B","LEXAFIL",184)

"BLD",88,"KRN",9.8,"NM","B","LEXAL",185)

"BLD",88,"KRN",9.8,"NM","B","LEXAL2",186)

"BLD",88,"KRN",9.8,"NM","B","LEXALK",187)

"BLD",88,"KRN",9.8,"NM","B","LEXAM",188)

"BLD",88,"KRN",9.8,"NM","B","LEXAR",189)

"BLD",88,"KRN",9.8,"NM","B","LEXAR2",190)

"BLD",88,"KRN",9.8,"NM","B","LEXAR3",191)

"BLD",88,"KRN",9.8,"NM","B","LEXAR4",192)

"BLD",88,"KRN",9.8,"NM","B","LEXAR5",193)

"BLD",88,"KRN",9.8,"NM","B","LEXAR6",194)

"BLD",88,"KRN",9.8,"NM","B","LEXAR7",195)

"BLD",88,"KRN",9.8,"NM","B","LEXAS",196)

"BLD",88,"KRN",9.8,"NM","B","LEXAS2",197)

"BLD",88,"KRN",9.8,"NM","B","LEXAS3",198)

"BLD",88,"KRN",9.8,"NM","B","LEXAS4",199)

"BLD",88,"KRN",9.8,"NM","B","LEXAS5",200)

"BLD",88,"KRN",9.8,"NM","B","LEXAS6",201)

"BLD",88,"KRN",9.8,"NM","B","LEXAS7",202)

"BLD",88,"KRN",9.8,"NM","B","LEXASC",203)

"BLD",88,"KRN",9.8,"NM","B","LEXASO",204)

"BLD",88,"KRN",9.8,"NM","B","LEXCODE",205)

"BLD",88,"KRN",9.8,"NM","B","LEXDCC",206)

"BLD",88,"KRN",9.8,"NM","B","LEXDCCC",207)

"BLD",88,"KRN",9.8,"NM","B","LEXDCCS",208)

"BLD",88,"KRN",9.8,"NM","B","LEXDCX",209)

"BLD",88,"KRN",9.8,"NM","B","LEXDCXS",210)

"BLD",88,"KRN",9.8,"NM","B","LEXDD1",211)

"BLD",88,"KRN",9.8,"NM","B","LEXDD2",212)

"BLD",88,"KRN",9.8,"NM","B","LEXDD3",213)

"BLD",88,"KRN",9.8,"NM","B","LEXDD4",214)

"BLD",88,"KRN",9.8,"NM","B","LEXDDS",215)

"BLD",88,"KRN",9.8,"NM","B","LEXDDSD",216)

"BLD",88,"KRN",9.8,"NM","B","LEXDDSP",217)

"BLD",88,"KRN",9.8,"NM","B","LEXDDSS",218)

"BLD",88,"KRN",9.8,"NM","B","LEXDDT1",219)

"BLD",88,"KRN",9.8,"NM","B","LEXDDT2",220)

"BLD",88,"KRN",9.8,"NM","B","LEXDDTC",221)

"BLD",88,"KRN",9.8,"NM","B","LEXDDTD",222)

"BLD",88,"KRN",9.8,"NM","B","LEXDDTF",223)

"BLD",88,"KRN",9.8,"NM","B","LEXDDTV",224)

"BLD",88,"KRN",9.8,"NM","B","LEXDFL",225)

"BLD",88,"KRN",9.8,"NM","B","LEXDFLC",226)

"BLD",88,"KRN",9.8,"NM","B","LEXDFLS",227)

"BLD",88,"KRN",9.8,"NM","B","LEXDFLT",228)

"BLD",88,"KRN",9.8,"NM","B","LEXDFN",229)

"BLD",88,"KRN",9.8,"NM","B","LEXDFN2",230)

"BLD",88,"KRN",9.8,"NM","B","LEXDFSB",231)

"BLD",88,"KRN",9.8,"NM","B","LEXDFSE",232)

"BLD",88,"KRN",9.8,"NM","B","LEXDFSI",233)

"BLD",88,"KRN",9.8,"NM","B","LEXDFSO",234)

"BLD",88,"KRN",9.8,"NM","B","LEXDFSS",235)

"BLD",88,"KRN",9.8,"NM","B","LEXDFST",236)

"BLD",88,"KRN",9.8,"NM","B","LEXDM",237)

"BLD",88,"KRN",9.8,"NM","B","LEXDM2",238)

"BLD",88,"KRN",9.8,"NM","B","LEXDM3",239)

"BLD",88,"KRN",9.8,"NM","B","LEXDM4",240)

"BLD",88,"KRN",9.8,"NM","B","LEXDMG",241)

"BLD",88,"KRN",9.8,"NM","B","LEXDMGO",242)

"BLD",88,"KRN",9.8,"NM","B","LEXDMGT",243)

"BLD",88,"KRN",9.8,"NM","B","LEXDMGU",244)

"BLD",88,"KRN",9.8,"NM","B","LEXDMGV",245)

"BLD",88,"KRN",9.8,"NM","B","LEXDSV",246)

"BLD",88,"KRN",9.8,"NM","B","LEXDVO",247)

"BLD",88,"KRN",9.8,"NM","B","LEXDVOS",248)

"BLD",88,"KRN",9.8,"NM","B","LEXEDF1",249)

"BLD",88,"KRN",9.8,"NM","B","LEXEDF2",250)

"BLD",88,"KRN",9.8,"NM","B","LEXERF",251)

"BLD",88,"KRN",9.8,"NM","B","LEXERI",252)

"BLD",88,"KRN",9.8,"NM","B","LEXHLP",253)

"BLD",88,"KRN",9.8,"NM","B","LEXIENV",254)

"BLD",88,"KRN",9.8,"NM","B","LEXILG",255)

"BLD",88,"KRN",9.8,"NM","B","LEXILGD",256)

"BLD",88,"KRN",9.8,"NM","B","LEXILGO",257)

"BLD",88,"KRN",9.8,"NM","B","LEXILGP",258)

"BLD",88,"KRN",9.8,"NM","B","LEXILGU",259)

"BLD",88,"KRN",9.8,"NM","B","LEXILGX",260)

"BLD",88,"KRN",9.8,"NM","B","LEXLGM",261)

"BLD",88,"KRN",9.8,"NM","B","LEXLGM2",262)

"BLD",88,"KRN",9.8,"NM","B","LEXLGM3",263)

"BLD",88,"KRN",9.8,"NM","B","LEXLGM4",264)

"BLD",88,"KRN",9.8,"NM","B","LEXLGM5",291)

"BLD",88,"KRN",9.8,"NM","B","LEXLK",265)

"BLD",88,"KRN",9.8,"NM","B","LEXLK2",266)

"BLD",88,"KRN",9.8,"NM","B","LEXMTLU",267)

"BLD",88,"KRN",9.8,"NM","B","LEXNDX1",268)

"BLD",88,"KRN",9.8,"NM","B","LEXNDX2",269)

"BLD",88,"KRN",9.8,"NM","B","LEXNDX3",270)

"BLD",88,"KRN",9.8,"NM","B","LEXNDX4",271)

"BLD",88,"KRN",9.8,"NM","B","LEXNDX5",272)

"BLD",88,"KRN",9.8,"NM","B","LEXNDX6",273)

"BLD",88,"KRN",9.8,"NM","B","LEXPL",353)

"BLD",88,"KRN",9.8,"NM","B","LEXPLEM",354)

"BLD",88,"KRN",9.8,"NM","B","LEXPLIA",355)

"BLD",88,"KRN",9.8,"NM","B","LEXPLUP",356)

"BLD",88,"KRN",9.8,"NM","B","LEXPRNT",274)

"BLD",88,"KRN",9.8,"NM","B","LEXSC",275)

"BLD",88,"KRN",9.8,"NM","B","LEXSC2",276)

"BLD",88,"KRN",9.8,"NM","B","LEXSC3",277)

"BLD",88,"KRN",9.8,"NM","B","LEXSET",278)

"BLD",88,"KRN",9.8,"NM","B","LEXSET2",279)

"BLD",88,"KRN",9.8,"NM","B","LEXSET3",280)

"BLD",88,"KRN",9.8,"NM","B","LEXSET4",281)

"BLD",88,"KRN",9.8,"NM","B","LEXSET5",282)

"BLD",88,"KRN",9.8,"NM","B","LEXSRC",283)

"BLD",88,"KRN",9.8,"NM","B","LEXTOLKN",284)

"BLD",88,"KRN",9.8,"NM","B","LEXU",285)

"BLD",88,"KRN",19,0)
19
"BLD",88,"KRN",19,"NM",0)
^9.68A^21^21
"BLD",88,"KRN",19,"NM",1,0)
LEX LOOK-UP^^0
"BLD",88,"KRN",19,"NM",2,0)
LEX MGR DEFAULTS^^0
"BLD",88,"KRN",19,"NM",3,0)
LEX MGR EDIT DEFN^^0
"BLD",88,"KRN",19,"NM",4,0)
LEX MGR EDIT LEXICON^^0
"BLD",88,"KRN",19,"NM",5,0)
LEX MGR EDIT SHORTCUTS^^0
"BLD",88,"KRN",19,"NM",6,0)
LEX MGR LIST DEFAULTS^^0
"BLD",88,"KRN",19,"NM",7,0)
LEX MGR USER DEFAULTS^^0
"BLD",88,"KRN",19,"NM",8,0)
LEX MGT MENU^^0
"BLD",88,"KRN",19,"NM",9,0)
LEX USER DEFAULT LIST^^0
"BLD",88,"KRN",19,"NM",10,0)
LEX USER DEFAULTS^^0
"BLD",88,"KRN",19,"NM",11,0)
LEX USER DISPLAY^^0
"BLD",88,"KRN",19,"NM",12,0)
LEX USER FILTER^^0
"BLD",88,"KRN",19,"NM",13,0)
LEX USER SHORTCUTS^^0
"BLD",88,"KRN",19,"NM",14,0)
LEX USER VOCABULARY^^0
"BLD",88,"KRN",19,"NM",15,0)
LEX UTILITY^^0
"BLD",88,"KRN",19,"NM",16,0)
GMPL USER LOOK-UP DEFAULTS^^0
"BLD",88,"KRN",19,"NM",17,0)
GMPL USER LOOK-UP DISPLAY^^0
"BLD",88,"KRN",19,"NM",18,0)
GMPL USER LOOK-UP FILTER^^0
"BLD",88,"KRN",19,"NM",19,0)
GMPL USER LOOK-UP LIST^^0
"BLD",88,"KRN",19,"NM",20,0)
GMPL USER LOOK-UP SHORTCUTS^^0
"BLD",88,"KRN",19,"NM",21,0)
GMPL USER LOOK-UP VOCABULARY^^0
"BLD",88,"KRN",19,"NM","B","GMPL USER LOOK-UP DEFAULTS",16)

"BLD",88,"KRN",19,"NM","B","GMPL USER LOOK-UP DISPLAY",17)

"BLD",88,"KRN",19,"NM","B","GMPL USER LOOK-UP FILTER",18)

"BLD",88,"KRN",19,"NM","B","GMPL USER LOOK-UP LIST",19)

"BLD",88,"KRN",19,"NM","B","GMPL USER LOOK-UP SHORTCUTS",20)

"BLD",88,"KRN",19,"NM","B","GMPL USER LOOK-UP VOCABULARY",21)

"BLD",88,"KRN",19,"NM","B","LEX LOOK-UP",1)

"BLD",88,"KRN",19,"NM","B","LEX MGR DEFAULTS",2)

"BLD",88,"KRN",19,"NM","B","LEX MGR EDIT DEFN",3)

"BLD",88,"KRN",19,"NM","B","LEX MGR EDIT LEXICON",4)

"BLD",88,"KRN",19,"NM","B","LEX MGR EDIT SHORTCUTS",5)

"BLD",88,"KRN",19,"NM","B","LEX MGR LIST DEFAULTS",6)

"BLD",88,"KRN",19,"NM","B","LEX MGR USER DEFAULTS",7)

"BLD",88,"KRN",19,"NM","B","LEX MGT MENU",8)

"BLD",88,"KRN",19,"NM","B","LEX USER DEFAULT LIST",9)

"BLD",88,"KRN",19,"NM","B","LEX USER DEFAULTS",10)

"BLD",88,"KRN",19,"NM","B","LEX USER DISPLAY",11)

"BLD",88,"KRN",19,"NM","B","LEX USER FILTER",12)

"BLD",88,"KRN",19,"NM","B","LEX USER SHORTCUTS",13)

"BLD",88,"KRN",19,"NM","B","LEX USER VOCABULARY",14)

"BLD",88,"KRN",19,"NM","B","LEX UTILITY",15)

"BLD",88,"KRN",19.1,0)
19.1
"BLD",88,"KRN",101,0)
101
"BLD",88,"KRN",409.61,0)
409.61
"BLD",88,"KRN",8994,0)
8994
"BLD",88,"KRN",8995,0)
8995
"BLD",88,"KRN","B",.4,.4)

"BLD",88,"KRN","B",.401,.401)

"BLD",88,"KRN","B",.402,.402)

"BLD",88,"KRN","B",.403,.403)

"BLD",88,"KRN","B",.5,.5)

"BLD",88,"KRN","B",.84,.84)

"BLD",88,"KRN","B",3.6,3.6)

"BLD",88,"KRN","B",9.2,9.2)

"BLD",88,"KRN","B",9.8,9.8)

"BLD",88,"KRN","B",19,19)

"BLD",88,"KRN","B",19.1,19.1)

"BLD",88,"KRN","B",101,101)

"BLD",88,"KRN","B",409.61,409.61)

"BLD",88,"KRN","B",8994,8994)

"BLD",88,"KRN","B",8995,8995)

"BLD",88,"PRE")
LEXIENV
"BLD",88,"QUES",0)
^9.62^^
"DATA",757.2,1,0)
Lexicon^WRD
"DATA",757.2,1,1)
^LEX(757.01,
"DATA",757.2,1,2)
XTLK^LEXHLP
"DATA",757.2,1,3)
XTLK^LEXPRNT
"DATA",757.2,1,5)
^^1^757^LEX
"DATA",757.2,1,100,0)
^^4^4^2960821^^^
"DATA",757.2,1,100,1,0)
This subset contains the entire Lexicon.  While it
"DATA",757.2,1,100,2,0)
is not a true subset (i.e., part of the whole), it is
"DATA",757.2,1,100,3,0)
defined here as the default when a more precise subset
"DATA",757.2,1,100,4,0)
has not been selected.
"DATA",757.2,2,0)
Nursing^NUR
"DATA",757.2,2,1)
^LEX(757.21,
"DATA",757.2,2,2)
XTLK^LEXHLP
"DATA",757.2,2,3)
XTLK^LEXPRNT
"DATA",757.2,2,4)
ICD/NAN/NIC/OMA
"DATA",757.2,2,100,0)
^^4^4^2950130^
"DATA",757.2,2,100,1,0)
This subset contains terminology from the North American
"DATA",757.2,2,100,2,0)
Nursing Diagnosis Association (NANDA), the Nursing 
"DATA",757.2,2,100,3,0)
Intervention Classification (NIC) and the Omaha Nursing
"DATA",757.2,2,100,4,0)
Diagnosis classification systems.
"DATA",757.2,3,0)
Social Work^SOC
"DATA",757.2,3,1)
^LEX(757.21,
"DATA",757.2,3,2)
XTLK^LEXHLP
"DATA",757.2,3,3)
XTLK^LEXPRNT
"DATA",757.2,3,4)
ICD/DS4/CPT/ICP
"DATA",757.2,3,100,0)
^^2^2^2960724^^^
"DATA",757.2,3,100,1,0)
This subset contains terminology relating to Social Work, 
"DATA",757.2,3,100,2,0)
and is taken from the SWIMS vocabulary.
"DATA",757.2,4,0)
Problem List
"DATA",757.2,4,1)
^LEX(757.01,
"DATA",757.2,4,2)
XTLK^LEXHLP
"DATA",757.2,4,3)
XTLK^LEXPRNT
"DATA",757.2,4,4)
ICD/ICP/CPT/DS4
"DATA",757.2,4,5)
PL1^WRD^1^9000011^GMPL^1^0^3
"DATA",757.2,4,6)
I $$SC^LEXU(Y,"BEH/DIS;999/64/66/73/74/77/82/169/170/171;ICD/ICP/CPT/DS4")
"DATA",757.2,4,7)
ICD/ICP/CPT/DS4
"DATA",757.2,5,0)
Int'l Class Dis/Diag (ICD)
"DATA",757.2,5,1)
^LEX(757.01,
"DATA",757.2,5,2)
XTLK^LEXHLP
"DATA",757.2,5,3)
XTLK^LEXPRNT
"DATA",757.2,5,4)
ICD/ICP
"DATA",757.2,5,5)
PL2^WRD^^^^1^1^2
"DATA",757.2,5,6)
I $$SO^LEXU(Y,"ICD")
"DATA",757.2,5,7)
ICD/ICP
"DATA",757.2,5,100,0)
^^4^4^2960721^^^^
"DATA",757.2,5,100,1,0)
This subset is artificially created through the use of a 
"DATA",757.2,5,100,2,0)
filter (not a physical subset), and contains only those 
"DATA",757.2,5,100,3,0)
expressions which are linked to an ICD classification code.
"DATA",757.2,5,100,4,0)

"DATA",757.2,9,0)
Immunologic^IMM
"DATA",757.2,9,1)
^LEX(757.21,
"DATA",757.2,9,2)
XTLK^LEXHLP
"DATA",757.2,9,3)
XTLK^LEXPRNT
"DATA",757.2,9,4)
ICD/ICP/CPT
"DATA",757.2,9,5)
^^^^^^1
"DATA",757.2,9,7)
ICD/ICP/CPT
"DATA",757.2,9,100,0)
^^3^3^2960721^^
"DATA",757.2,9,100,1,0)
This subset contains expressions relating to immunizations
"DATA",757.2,9,100,2,0)
and vaccines, including immunologic factors, indicators, 
"DATA",757.2,9,100,3,0)
reagents and pharmacologic substances.
"DATA",757.2,10,0)
Dental^DEN
"DATA",757.2,10,1)
^LEX(757.21,
"DATA",757.2,10,2)
XTLK^LEXHLP
"DATA",757.2,10,3)
XTLK^LEXPRNT
"DATA",757.2,10,100,0)
^^2^2^2950124^
"DATA",757.2,10,100,1,0)
This Subset only contains expressions found in the field of
"DATA",757.2,10,100,2,0)
dentistry, or that overlap general clinical specialities.
"DATA",757.2,11,0)
Nursing Interventions
"DATA",757.2,11,1)
^LEX(757.21,
"DATA",757.2,11,2)
XTLK^LEXHLP
"DATA",757.2,11,3)
XTLK^LEXPRNT
"DATA",757.2,11,4)
ICD/NAN/NIC/OMA
"DATA",757.2,11,5)
NIC^NUR^^^^^1
"DATA",757.2,11,6)
I $$SO^LEXU(Y,"NIC")
"DATA",757.2,11,7)
ICD/NAN/NIC/OMA
"DATA",757.2,12,0)
ICD Diagnosis
"DATA",757.2,12,1)
^LEX(757.01,
"DATA",757.2,12,2)
XTLK^LEXHLP
"DATA",757.2,12,3)
XTLK^LEXPRNT
"DATA",757.2,12,4)
ICD
"DATA",757.2,12,5)
ICD^WRD^0^80^ICD^0^1
"DATA",757.2,12,6)
I $L($$ICDONE^LEXU(+Y))
"DATA",757.2,12,7)
ICD
"DATA",757.2,12,100,0)
^^4^4^2960721^^^^
"DATA",757.2,12,100,1,0)
This subset is artifically created through the use of a
"DATA",757.2,12,100,2,0)
filter which will not permit the selection of a term
"DATA",757.2,12,100,3,0)
which does not have a valid ICD code assigned (ICD code
"DATA",757.2,12,100,4,0)
in the Lexicon is also in file 80, ICD Diagnosis).
"DATA",757.2,13,0)
CPT Procedures
"DATA",757.2,13,1)
^LEX(757.01,
"DATA",757.2,13,2)
XTLK^LEXHLP
"DATA",757.2,13,3)
XTLK^LEXPRNT
"DATA",757.2,13,4)
CPT
"DATA",757.2,13,5)
CPT^WRD^0^81^CPT^0^1
"DATA",757.2,13,6)
I $L($$CPTONE^LEXU(+Y))
"DATA",757.2,13,7)
CPT
"DATA",757.2,13,100,0)
^^4^4^2960507^^
"DATA",757.2,13,100,1,0)
This subset is artificially create through the use of a
"DATA",757.2,13,100,2,0)
filter which will not permit the selection of a term
"DATA",757.2,13,100,3,0)
which does not have a valid CPT code assigned (CPT code
"DATA",757.2,13,100,4,0)
in the Lexicon is also in file 81, CPT Procedures).
"DATA",757.2,14,0)
Mental Health (DSM)
"DATA",757.2,14,1)
^LEX(757.01,
"DATA",757.2,14,2)
XTLK^LEXHLP
"DATA",757.2,14,3)
XTLK^LEXPRNT
"DATA",757.2,14,4)
DS4/ICD
"DATA",757.2,14,5)
DSM^WRD^0^627.7^DSM^0^1
"DATA",757.2,14,6)
I $$SO^LEXU(Y,"DS4")
"DATA",757.2,14,7)
DS4/ICD
"DATA",757.2,14,100,0)
^^3^3^2960724^^^^
"DATA",757.2,14,100,1,0)
This subset is artifically created through the use of a
"DATA",757.2,14,100,2,0)
filter which will not permit the selection of a term
"DATA",757.2,14,100,3,0)
which does not have a DSM code assigned.
"DATA",757.2,15,0)
ICD, CPT and DSM Terminology
"DATA",757.2,15,1)
^LEX(757.01,
"DATA",757.2,15,2)
XTLK^LEXHLP
"DATA",757.2,15,3)
XTLK^LEXPRNT
"DATA",757.2,15,4)
ICD/ICP/CPT/DS4
"DATA",757.2,15,5)
VAC^WRD^0^757.03^VAC^0^1
"DATA",757.2,15,6)
I $$SO^LEXU(Y,"ICD/ICP/CPT/DS4")
"DATA",757.2,15,7)
ICD/ICP/CPT/DS4
"DATA",757.2,15,100,0)
^^4^4^2960724^^^^
"DATA",757.2,15,100,1,0)
This subset is artifically created through the use of a
"DATA",757.2,15,100,2,0)
filter which will limit the selection of a term to 
"DATA",757.2,15,100,3,0)
those classification systems commonly used by the VA.
"DATA",757.2,15,100,4,0)
These systems include ICD-9-CM, CPT-4, and DSM.
"FIA",757)
MAJOR CONCEPT MAP
"FIA",757,0)
^LEX(757,
"FIA",757,0,0)
757P
"FIA",757,0,1)
y^y^f^^n^^n^^
"FIA",757,0,10)

"FIA",757,0,11)

"FIA",757,0,"RLRO")

"FIA",757,0,"VR")
2.0^LEXICON UTILITY
"FIA",757,757)
0
"FIA",757.001)
CONCEPT USAGE
"FIA",757.001,0)
^LEX(757.001,
"FIA",757.001,0,0)
757.001P
"FIA",757.001,0,1)
y^y^f^^n^^n^^
"FIA",757.001,0,10)

"FIA",757.001,0,11)

"FIA",757.001,0,"RLRO")

"FIA",757.001,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.001,757.001)
0
"FIA",757.01)
EXPRESSIONS
"FIA",757.01,0)
^LEX(757.01,
"FIA",757.01,0,0)
757.01
"FIA",757.01,0,1)
y^y^f^^^^n^^
"FIA",757.01,0,10)

"FIA",757.01,0,11)

"FIA",757.01,0,"RLRO")

"FIA",757.01,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.01,757.01)
0
"FIA",757.01,757.016)
0
"FIA",757.01,757.17)
0
"FIA",757.01,757.18)
0
"FIA",757.011)
EXPRESSION TYPE
"FIA",757.011,0)
^LEX(757.011,
"FIA",757.011,0,0)
757.011I
"FIA",757.011,0,1)
y^y^f^^^^n^^
"FIA",757.011,0,10)

"FIA",757.011,0,11)

"FIA",757.011,0,"RLRO")

"FIA",757.011,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.011,757.011)
0
"FIA",757.014)
EXPRESSION FORM
"FIA",757.014,0)
^LEX(757.014,
"FIA",757.014,0,0)
757.014I
"FIA",757.014,0,1)
y^y^f^^^^n^^
"FIA",757.014,0,10)

"FIA",757.014,0,11)

"FIA",757.014,0,"RLRO")

"FIA",757.014,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.014,757.014)
0
"FIA",757.02)
CODES
"FIA",757.02,0)
^LEX(757.02,
"FIA",757.02,0,0)
757.02IP
"FIA",757.02,0,1)
y^y^f^^^^n^^
"FIA",757.02,0,10)

"FIA",757.02,0,11)

"FIA",757.02,0,"RLRO")

"FIA",757.02,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.02,757.02)
0
"FIA",757.03)
CODING SYSTEMS
"FIA",757.03,0)
^LEX(757.03,
"FIA",757.03,0,0)
757.03I
"FIA",757.03,0,1)
y^y^f^^^^n^^
"FIA",757.03,0,10)

"FIA",757.03,0,11)

"FIA",757.03,0,"RLRO")

"FIA",757.03,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.03,757.03)
0
"FIA",757.04)
EXCLUDED WORDS
"FIA",757.04,0)
^LEX(757.04,
"FIA",757.04,0,0)
757.04
"FIA",757.04,0,1)
y^y^f^^^^n^^
"FIA",757.04,0,10)

"FIA",757.04,0,11)

"FIA",757.04,0,"RLRO")

"FIA",757.04,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.04,757.04)
0
"FIA",757.05)
REPLACEMENT WORDS
"FIA",757.05,0)
^LEX(757.05,
"FIA",757.05,0,0)
757.05I
"FIA",757.05,0,1)
y^y^f^^^^n^^
"FIA",757.05,0,10)

"FIA",757.05,0,11)

"FIA",757.05,0,"RLRO")

"FIA",757.05,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.05,757.05)
0
"FIA",757.05,757.53)
0
"FIA",757.06)
UNRESOLVED NARRATIVES
"FIA",757.06,0)
^LEX(757.06,
"FIA",757.06,0,0)
757.06
"FIA",757.06,0,1)
y^y^f^^^^n^^
"FIA",757.06,0,10)

"FIA",757.06,0,11)

"FIA",757.06,0,"RLRO")

"FIA",757.06,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.06,757.06)
0
"FIA",757.1)
SEMANTIC MAP
"FIA",757.1,0)
^LEX(757.1,
"FIA",757.1,0,0)
757.1IP
"FIA",757.1,0,1)
y^y^f^^^^n^^
"FIA",757.1,0,10)

"FIA",757.1,0,11)

"FIA",757.1,0,"RLRO")

"FIA",757.1,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.1,757.1)
0
"FIA",757.11)
SEMANTIC CLASSES
"FIA",757.11,0)
^LEX(757.11,
"FIA",757.11,0,0)
757.11I
"FIA",757.11,0,1)
y^y^f^^^^n^^
"FIA",757.11,0,10)

"FIA",757.11,0,11)

"FIA",757.11,0,"RLRO")

"FIA",757.11,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.11,757.11)
0
"FIA",757.11,757.112)
0
"FIA",757.11,757.113)
0
"FIA",757.12)
SEMANTIC TYPES
"FIA",757.12,0)
^LEX(757.12,
"FIA",757.12,0,0)
757.12I
"FIA",757.12,0,1)
y^y^f^^^^n^^
"FIA",757.12,0,10)

"FIA",757.12,0,11)

"FIA",757.12,0,"RLRO")

"FIA",757.12,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.12,757.12)
0
"FIA",757.12,757.123)
0
"FIA",757.2)
SUBSET DEFINITIONS
"FIA",757.2,0)
^LEXT(757.2,
"FIA",757.2,0,0)
757.2
"FIA",757.2,0,1)
y^y^f^^n^^y^o^n
"FIA",757.2,0,10)

"FIA",757.2,0,11)

"FIA",757.2,0,"RLRO")

"FIA",757.2,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.2,757.2)
0
"FIA",757.2,757.201)
0
"FIA",757.2,757.22)
0
"FIA",757.21)
SUBSETS
"FIA",757.21,0)
^LEX(757.21,
"FIA",757.21,0,0)
757.21PI
"FIA",757.21,0,1)
y^y^f^^^^n^^
"FIA",757.21,0,10)

"FIA",757.21,0,11)

"FIA",757.21,0,"RLRO")

"FIA",757.21,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.21,757.21)
0
"FIA",757.3)
LOOK-UP SCREENS
"FIA",757.3,0)
^LEX(757.3,
"FIA",757.3,0,0)
757.3
"FIA",757.3,0,1)
y^y^f^^^^n^^
"FIA",757.3,0,10)

"FIA",757.3,0,11)

"FIA",757.3,0,"RLRO")

"FIA",757.3,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.3,757.3)
0
"FIA",757.3,757.305)
0
"FIA",757.3,757.36)
0
"FIA",757.31)
DISPLAYS
"FIA",757.31,0)
^LEX(757.31,
"FIA",757.31,0,0)
757.31
"FIA",757.31,0,1)
y^y^f^^^^n^^
"FIA",757.31,0,10)

"FIA",757.31,0,11)

"FIA",757.31,0,"RLRO")

"FIA",757.31,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.31,757.31)
0
"FIA",757.31,757.313)
0
"FIA",757.4)
SHORTCUTS
"FIA",757.4,0)
^LEX(757.4,
"FIA",757.4,0,0)
757.4P
"FIA",757.4,0,1)
y^y^f^^^^n^^
"FIA",757.4,0,10)

"FIA",757.4,0,11)

"FIA",757.4,0,"RLRO")

"FIA",757.4,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.4,757.4)
0
"FIA",757.4,757.401)
0
"FIA",757.41)
SHORTCUT CONTEXT
"FIA",757.41,0)
^LEX(757.41,
"FIA",757.41,0,0)
757.41
"FIA",757.41,0,1)
y^y^f^^^^n^^
"FIA",757.41,0,10)

"FIA",757.41,0,11)

"FIA",757.41,0,"RLRO")

"FIA",757.41,0,"VR")
2.0^LEXICON UTILITY
"FIA",757.41,757.41)
0
"FIA",757.41,757.411)
0
"INI")
PRE^LEXILG
"INIT")
POST^LEXILG
"KRN",19,3953,-1)
0^3
"KRN",19,3953,0)
LEX MGR EDIT DEFN^Edit Term Definition^^R^^^^^^^^LEXICON UTILITY^^
"KRN",19,3953,1,0)
^^2^2^2950705^^^^
"KRN",19,3953,1,1,0)
This option lets managers edit the definition of an expression.  This
"KRN",19,3953,1,2,0)
definition is accessable during searches using the Lexicon help routine.
"KRN",19,3953,20)

"KRN",19,3953,25)
LEXEDF1
"KRN",19,3953,"U")
EDIT TERM DEFINITION
"KRN",19,3954,-1)
0^10
"KRN",19,3954,0)
LEX USER DEFAULTS^User Defaults^^M^^^^^^^^LEXICON UTILITY^n^
"KRN",19,3954,1,0)
^^2^2^2950706^^^^
"KRN",19,3954,1,1,0)
This options lets a single user modify his/her defaults (including filter,
"KRN",19,3954,1,2,0)
display format, vocabulary and keywords).
"KRN",19,3954,10,0)
^19.01IP^5^5
"KRN",19,3954,10,1,0)
4639^4^4
"KRN",19,3954,10,1,"^")
LEX USER SHORTCUTS
"KRN",19,3954,10,2,0)
4640^3^3
"KRN",19,3954,10,2,"^")
LEX USER VOCABULARY
"KRN",19,3954,10,3,0)
4641^2^2
"KRN",19,3954,10,3,"^")
LEX USER DISPLAY
"KRN",19,3954,10,4,0)
4642^1^1
"KRN",19,3954,10,4,"^")
LEX USER FILTER
"KRN",19,3954,10,5,0)
4643^5^5
"KRN",19,3954,10,5,"^")
LEX USER DEFAULT LIST
"KRN",19,3954,10.1)
User Defaults
"KRN",19,3954,20)

"KRN",19,3954,25)

"KRN",19,3954,99)
56363,37893
"KRN",19,3954,"U")
USER DEFAULTS
"KRN",19,3955,-1)
0^7
"KRN",19,3955,0)
LEX MGR USER DEFAULTS^Edit User/User Group Defaults^^R^^^^^^^^LEXICON UTILITY^^
"KRN",19,3955,1,0)
^^2^2^2950706^^^
"KRN",19,3955,1,1,0)
This option allows a manager to modify user defaults for either a single
"KRN",19,3955,1,2,0)
user or a user group (based on service or location).
"KRN",19,3955,20)

"KRN",19,3955,25)
LEXDMG
"KRN",19,3955,"U")
EDIT USER/USER GROUP DEFAULTS
"KRN",19,3956,-1)
0^6
"KRN",19,3956,0)
LEX MGR LIST DEFAULTS^List User/User Group Defaults^^R^^^^^^^^LEXICON UTILITY^^
"KRN",19,3956,1,0)
^^2^2^2950705^^^
"KRN",19,3956,1,1,0)
This options allows a manager to list user defaults to a device for either
"KRN",19,3956,1,2,0)
a single user or a user group (based on service or location).
"KRN",19,3956,20)

"KRN",19,3956,25)
LEXDD1
"KRN",19,3956,"U")
LIST USER/USER GROUP DEFAULTS
"KRN",19,3957,-1)
0^15
"KRN",19,3957,0)
LEX UTILITY^Lexicon Utility^^M^^^^^^^^LEXICON UTILITY^^
"KRN",19,3957,1,0)
^^3^3^2950705^^^^
"KRN",19,3957,1,1,0)
This menu option contains two sub-options, "Lexicon Look-up" (to perform 
"KRN",19,3957,1,2,0)
simple searches of the Lexicon outside of an application) and "Lexicon 
"KRN",19,3957,1,3,0)
Look-up Defaults" (to edit a single user defaults).
"KRN",19,3957,10,0)
^19.01PI^2^2
"KRN",19,3957,10,1,0)
3961^1^1
"KRN",19,3957,10,1,"^")
LEX LOOK-UP
"KRN",19,3957,10,2,0)
3954^2^2
"KRN",19,3957,10,2,"^")
LEX USER DEFAULTS
"KRN",19,3957,20)

"KRN",19,3957,25)

"KRN",19,3957,99)
56363,37660
"KRN",19,3957,"U")
LEXICON UTILITY
"KRN",19,3958,-1)
0^8
"KRN",19,3958,0)
LEX MGT MENU^Lexicon Management Menu^^M^^^^^^^^LEXICON UTILITY
"KRN",19,3958,1,0)
^^4^4^2950705^^^^
"KRN",19,3958,1,1,0)
This menu option contains three sub-menus, including an edit menu (edit
"KRN",19,3958,1,2,0)
an expressions display text or definition), a user default menu (edit or
"KRN",19,3958,1,3,0)
list user defaults by a single user or a user group) and the Lexicon Utility
"KRN",19,3958,1,4,0)
menu (search the Lexicon and change a single user defaults).
"KRN",19,3958,10,0)
^19.01PI^8^3
"KRN",19,3958,10,6,0)
3957^3^3
"KRN",19,3958,10,6,"^")
LEX UTILITY
"KRN",19,3958,10,7,0)
3959^2^2
"KRN",19,3958,10,7,"^")
LEX MGR EDIT LEXICON
"KRN",19,3958,10,8,0)
3960^1^1
"KRN",19,3958,10,8,"^")
LEX MGR DEFAULTS
"KRN",19,3958,99)
56433,34204
"KRN",19,3958,99.1)
55865,34500
"KRN",19,3958,"U")
LEXICON MANAGEMENT MENU
"KRN",19,3959,-1)
0^4
"KRN",19,3959,0)
LEX MGR EDIT LEXICON^Edit Lexicon^^M^^^^^^^^LEXICON UTILITY
"KRN",19,3959,1,0)
^^2^2^2950705^^^^
"KRN",19,3959,1,1,0)
Very few fields in the Lexicon may be edited.  This menu option contains 
"KRN",19,3959,1,2,0)
sub-options which allows managers to edit those [few] fields.
"KRN",19,3959,10,0)
^19.01PI^3^2
"KRN",19,3959,10,2,0)
3953^1^1
"KRN",19,3959,10,2,"^")
LEX MGR EDIT DEFN
"KRN",19,3959,10,3,0)
4812^2^2
"KRN",19,3959,10,3,"^")
LEX MGR EDIT SHORTCUTS
"KRN",19,3959,99)
56363,37193
"KRN",19,3959,"U")
EDIT LEXICON
"KRN",19,3960,-1)
0^2
"KRN",19,3960,0)
LEX MGR DEFAULTS^Defaults^^M^^^^^^^^LEXICON UTILITY
"KRN",19,3960,1,0)
^^4^4^2951102^^^^
"KRN",19,3960,1,1,0)
This menu option contains two sub-options.  The first one is used to modify 
"KRN",19,3960,1,2,0)
user defaults (filter, display, vocabulary and keywords) for a single user or a
"KRN",19,3960,1,3,0)
user group.  The other sub-option is used to list the users defaults to a 
"KRN",19,3960,1,4,0)
device (for a single user or user group).
"KRN",19,3960,10,0)
^19.01PI^2^2
"KRN",19,3960,10,1,0)
3955^1^1
"KRN",19,3960,10,1,"^")
LEX MGR USER DEFAULTS
"KRN",19,3960,10,2,0)
3956^2^2
"KRN",19,3960,10,2,"^")
LEX MGR LIST DEFAULTS
"KRN",19,3960,99)
56363,37493
"KRN",19,3960,"U")
DEFAULTS
"KRN",19,3961,-1)
0^1
"KRN",19,3961,0)
LEX LOOK-UP^Look-up Term^^R^^^^^^^^LEXICON UTILITY
"KRN",19,3961,1,0)
^^4^4^2950705^^^^
"KRN",19,3961,1,1,0)
This option lets a user perform a simple look-up in the Lexicon (outside 
"KRN",19,3961,1,2,0)
of an application) and displays all the information known about the 
"KRN",19,3961,1,3,0)
expression selected (i.e., definitions, classification codes, semantic
"KRN",19,3961,1,4,0)
classifications, etc).
"KRN",19,3961,25)
LEXLK
"KRN",19,3961,"U")
LOOK-UP TERM
"KRN",19,3967,-1)
0^16
"KRN",19,3967,0)
GMPL USER LOOK-UP DEFAULTS^Problem Look-up Defaults^^M^^^^^^^^PROBLEM LIST^^^
"KRN",19,3967,1,0)
^^3^3^2960818^^^^
"KRN",19,3967,1,1,0)
This option allows an individual user to select their own default
"KRN",19,3967,1,2,0)
filter, display, vocabulary and shortcuts for use in searching the
"KRN",19,3967,1,3,0)
Lexicon for Problems.
"KRN",19,3967,10,0)
^19.01IP^5^5
"KRN",19,3967,10,1,0)
4887^1^1
"KRN",19,3967,10,1,"^")
GMPL USER LOOK-UP FILTER
"KRN",19,3967,10,2,0)
4888^2^2
"KRN",19,3967,10,2,"^")
GMPL USER LOOK-UP DISPLAY
"KRN",19,3967,10,3,0)
4889^3^3
"KRN",19,3967,10,3,"^")
GMPL USER LOOK-UP VOCABULARY
"KRN",19,3967,10,4,0)
4890^4^4
"KRN",19,3967,10,4,"^")
GMPL USER LOOK-UP SHORTCUTS
"KRN",19,3967,10,5,0)
4891^5^5
"KRN",19,3967,10,5,"^")
GMPL USER LOOK-UP LIST
"KRN",19,3967,15)

"KRN",19,3967,20)

"KRN",19,3967,25)

"KRN",19,3967,99)
56379,33479
"KRN",19,3967,99.1)
55727,32519
"KRN",19,3967,"U")
PROBLEM LOOK-UP DEFAULTS
"KRN",19,4639,-1)
0^13
"KRN",19,4639,0)
LEX USER SHORTCUTS^Shortcuts^^R^^^^^^^^LEXICON UTILITY
"KRN",19,4639,1,0)
^^2^2^2950706^^^^
"KRN",19,4639,1,1,0)
This option lets the user select a default set of shortcuts to use to rapidly
"KRN",19,4639,1,2,0)
access the Lexicon without the benefit of the special look-up.
"KRN",19,4639,10.1)
Shortcuts
"KRN",19,4639,25)
EN^LEXDCX
"KRN",19,4639,"U")
SHORTCUTS
"KRN",19,4640,-1)
0^14
"KRN",19,4640,0)
LEX USER VOCABULARY^Vocabulary^^R^^^^^^^^LEXICON UTILITY
"KRN",19,4640,1,0)
^^2^2^2950706^^^
"KRN",19,4640,1,1,0)
This option lets the user to select a default vocabulary (or subset) of the
"KRN",19,4640,1,2,0)
Lexicon to use during look-up (i.e., Nursing, Social Work, etc.).
"KRN",19,4640,10.1)
Vocabulary
"KRN",19,4640,25)
EN^LEXDVO
"KRN",19,4640,"U")
VOCABULARY
"KRN",19,4641,-1)
0^11
"KRN",19,4641,0)
LEX USER DISPLAY^Display^^R^^^^^^^^LEXICON UTILITY
"KRN",19,4641,1,0)
^^2^2^2950706^^^
"KRN",19,4641,1,1,0)
This will set the user default which formats the selection list during 
"KRN",19,4641,1,2,0)
searches of the Lexicon.
"KRN",19,4641,10.1)
Display
"KRN",19,4641,25)
EN^LEXDCC
"KRN",19,4641,"U")
DISPLAY
"KRN",19,4642,-1)
0^12
"KRN",19,4642,0)
LEX USER FILTER^Filter^^R^^^^^^^^LEXICON UTILITY
"KRN",19,4642,1,0)
^^3^3^2950706^^
"KRN",19,4642,1,1,0)
This option lets the user either select or create their own filter to use
"KRN",19,4642,1,2,0)
while conducting searches in the Lexicon.  This filter will limit the 
"KRN",19,4642,1,3,0)
response of the look-up based on the conditions found in the filter.
"KRN",19,4642,10.1)
Filter
"KRN",19,4642,25)
EN^LEXDFL
"KRN",19,4642,"U")
FILTER
"KRN",19,4643,-1)
0^9
"KRN",19,4643,0)
LEX USER DEFAULT LIST^List Defaults^^R^^^^^^^^LEXICON UTILITY
"KRN",19,4643,1,0)
^^2^2^2950706^^^
"KRN",19,4643,1,1,0)
This option lets the user list their current defaults to a device (terminal or
"KRN",19,4643,1,2,0)
printer).
"KRN",19,4643,25)
EN^LEXDDS
"KRN",19,4643,"U")
LIST DEFAULTS
"KRN",19,4812,-1)
0^5
"KRN",19,4812,0)
LEX MGR EDIT SHORTCUTS^Edit Shortcuts by Context^^R^^^^^^^^LEXICON UTILITY
"KRN",19,4812,1,0)
^^1^1^2950705^^
"KRN",19,4812,1,1,0)
This option lets managers add or delete shortcuts (by context).
"KRN",19,4812,25)
LEXSC
"KRN",19,4812,"U")
EDIT SHORTCUTS BY CONTEXT
"KRN",19,4887,-1)
0^18
"KRN",19,4887,0)
GMPL USER LOOK-UP FILTER^Filter^^R^^^^^^^^
"KRN",19,4887,1,0)
^^2^2^2960510^^^^
"KRN",19,4887,1,1,0)
This option lets the user either select or create a filter to use while
"KRN",19,4887,1,2,0)
searching the Lexicon.
"KRN",19,4887,25)
EN1^LEXDFL(4)
"KRN",19,4887,"U")
FILTER
"KRN",19,4888,-1)
0^17
"KRN",19,4888,0)
GMPL USER LOOK-UP DISPLAY^Display^^R^^^^^^^^
"KRN",19,4888,1,0)
^^2^2^2960510^^^
"KRN",19,4888,1,1,0)
This option lets the user either select or create a display format to be used
"KRN",19,4888,1,2,0)
in presenting the selection list during search of the Lexicon.
"KRN",19,4888,25)
EN1^LEXDCC(4)
"KRN",19,4888,"U")
DISPLAY
"KRN",19,4889,-1)
0^21
"KRN",19,4889,0)
GMPL USER LOOK-UP VOCABULARY^Vocabulary^^R^^^^^^^^
"KRN",19,4889,1,0)
^^2^2^2950706^^
"KRN",19,4889,1,1,0)
This option lets the user select a default vocabulary (subset) of the
"KRN",19,4889,1,2,0)
Lexicon to be used during searches (i.e., Nursing, Social Work, etc.).
"KRN",19,4889,25)
EN1^LEXDVO(4)
"KRN",19,4889,"U")
VOCABULARY
"KRN",19,4890,-1)
0^20
"KRN",19,4890,0)
GMPL USER LOOK-UP SHORTCUTS^Shortcuts^^R^^^^^^^^
"KRN",19,4890,1,0)
^^2^2^2950706^^
"KRN",19,4890,1,1,0)
This options lets the user select default set of shortcuts to use to rapidly
"KRN",19,4890,1,2,0)
access the Lexicon without conducting an extensive word search.
"KRN",19,4890,25)
EN1^LEXDCX(4)
"KRN",19,4890,"U")
SHORTCUTS
"KRN",19,4891,-1)
0^19
"KRN",19,4891,0)
GMPL USER LOOK-UP LIST^List Current Defaults^^R^^^^^^^^
"KRN",19,4891,1,0)
^^2^2^2950706^^^
"KRN",19,4891,1,1,0)
This option lets a user list their current look-up defaults to a device
"KRN",19,4891,1,2,0)
(terminal or printer).
"KRN",19,4891,25)
EN1^LEXDDS(4)
"KRN",19,4891,"U")
LIST CURRENT DEFAULTS
"ORD",0,9.8)
9.8;;1;RTNF^XPDTA;RTNE^XPDTA
"ORD",0,9.8,0)
ROUTINE
"ORD",14,19)
19;14;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",14,19,0)
OPTION
"PKG",167,-1)
1^1
"PKG",167,0)
LEXICON UTILITY^LEX^Medical and Biomedical Terminology System.
"PKG",167,1,0)
^^10^10^2960604^^^^
"PKG",167,1,1,0)
The Lexicon contains medical and biomedical major concepts.  Each major 
"PKG",167,1,2,0)
concept can be expressed in numerous forms (major concepts, and synonyms 
"PKG",167,1,3,0)
or lexical variants to the major concepts).  These expressions are updated
"PKG",167,1,4,0)
using VA terminology sources.  These sources include the various disciplines
"PKG",167,1,5,0)
not well represented to date (i.e., Social Work, Nursing, etc.) and the
"PKG",167,1,6,0)
Lexicon itself through the capturing of terms not found within the file.
"PKG",167,1,7,0)
 
"PKG",167,1,8,0)
Updates to the Lexicon will be simultaneously sent to all sites, providing
"PKG",167,1,9,0)
them with the ability to communicate medical concepts across disciplines 
"PKG",167,1,10,0)
and computer systems.
"PKG",167,5)
SLC IRM FLD OFFICE
"PKG",167,7)
SLC IRM FLD OFFICE^^I
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
2.0^2960915
"PKG",167,22,1,1,0)
^^5^5^2961003
"PKG",167,22,1,1,1,0)
The Lexicon is a dictionary of medical and biomedical terminology.  This
"PKG",167,22,1,1,2,0)
terminology is represented by major concepts which can be expressed in 
"PKG",167,22,1,1,3,0)
numerous forms (concept, synonyms or lexical variants).  These terms are 
"PKG",167,22,1,1,4,0)
mapped to coding schemes such as ICD, SNOMED or CPT.  The Lexicon can be
"PKG",167,22,1,1,5,0)
searched by keywords or by code.
"PKG",167,"DEV")

"PKG",167,"VERSION")
2.0
"PRE")
LEXIENV
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
295
"RTN","GMPLBLDC")
0^286^B30113550
"RTN","GMPLBLDC",1,0)
GMPLBLDC ; SLC/MKB -- Build Problem Selection Categories ;8/10/95  15:39
"RTN","GMPLBLDC",2,0)
 ;;2.0;Problem List;**3,7**;Aug 25, 1994
"RTN","GMPLBLDC",3,0)
EN ; -- main entry point for GMPL SELECTION GROUP BUILD
"RTN","GMPLBLDC",4,0)
 D EN^VALM("GMPL SELECTION GROUP BUILD")
"RTN","GMPLBLDC",5,0)
 Q
"RTN","GMPLBLDC",6,0)
 ;
"RTN","GMPLBLDC",7,0)
HDR ; -- header code
"RTN","GMPLBLDC",8,0)
 N NAME,NUM,DATE S NUM=+^TMP("GMPLST",$J,0)_" problem"_$S(+^TMP("GMPLST",$J,0)'=1:"s",1:"")
"RTN","GMPLBLDC",9,0)
 S DATE="Last Modified: "_$S(+$P(GMPLGRP,U,3):$$FMTE^XLFDT($P(GMPLGRP,U,3)),1:"<new category>")
"RTN","GMPLBLDC",10,0)
 S VALMHDR(1)=DATE_$J(NUM,79-$L(DATE))
"RTN","GMPLBLDC",11,0)
 S NAME=$P(GMPLGRP,U,2),VALMHDR(2)=$J(NAME,$L(NAME)\2+41)
"RTN","GMPLBLDC",12,0)
 Q
"RTN","GMPLBLDC",13,0)
 ;
"RTN","GMPLBLDC",14,0)
INIT ; -- init variables and list array
"RTN","GMPLBLDC",15,0)
 S GMPLGRP=$$GROUP^GMPLBLD2("L") I GMPLGRP="^" S VALMQUIT=1 Q
"RTN","GMPLBLDC",16,0)
 L +^GMPL(125.11,+GMPLGRP,0):1 I '$T D  G INIT
"RTN","GMPLBLDC",17,0)
 . W $C(7),!!,"This category is currently being edited by another user!",!
"RTN","GMPLBLDC",18,0)
 S GMPLMODE="E",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",19,0)
 D GETLIST,BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLDC",20,0)
 Q
"RTN","GMPLBLDC",21,0)
 ;
"RTN","GMPLBLDC",22,0)
GETLIST ; Build ^TMP("GMPLIST",$J,#) of problems
"RTN","GMPLBLDC",23,0)
 N SEQ,IFN,ITEM,PROB,CNT K ^TMP("GMPLIST",$J) S CNT=0
"RTN","GMPLBLDC",24,0)
 W !,"Searching for the problems ..."
"RTN","GMPLBLDC",25,0)
 F IFN=0:0 S IFN=$O(^GMPL(125.12,"B",+GMPLGRP,IFN)) Q:IFN'>0  D
"RTN","GMPLBLDC",26,0)
 . S ITEM=$G(^GMPL(125.12,IFN,0)),SEQ=$P(ITEM,U,2),PROB=$P(ITEM,U,3)
"RTN","GMPLBLDC",27,0)
 . S ^TMP("GMPLIST",$J,IFN)=$P(ITEM,U,2,5),CNT=CNT+1 ; seq ^ prob ^ text ^ code
"RTN","GMPLBLDC",28,0)
 . S (^TMP("GMPLIST",$J,"PROB",PROB),^TMP("GMPLIST",$J,"SEQ",SEQ))=IFN ; Xrefs
"RTN","GMPLBLDC",29,0)
 S ^TMP("GMPLIST",$J,0)=CNT
"RTN","GMPLBLDC",30,0)
 Q
"RTN","GMPLBLDC",31,0)
 ;
"RTN","GMPLBLDC",32,0)
BUILD(LIST,MODE) ; Build ^TMP("GMPLST",$J,) of current items in LIST for display
"RTN","GMPLBLDC",33,0)
 N SEQ,LCNT,NUM,PROB,TEXT,IFN,ITEM,CODE D CLEAN^VALM10
"RTN","GMPLBLDC",34,0)
 I $P($G(^TMP("GMPLIST",$J,0)),U,1)'>0 S ^TMP("GMPLST",$J,1,0)="   ",^TMP("GMPLST",$J,2,0)="No items available.",^TMP("GMPLST",$J,0)="0^2",VALMCNT=2 Q
"RTN","GMPLBLDC",35,0)
 S (LCNT,NUM,SEQ)=0
"RTN","GMPLBLDC",36,0)
 F  S SEQ=$O(^TMP("GMPLIST",$J,"SEQ",SEQ)) Q:SEQ'>0  D
"RTN","GMPLBLDC",37,0)
 . S IFN=^TMP("GMPLIST",$J,"SEQ",SEQ),LCNT=LCNT+1,NUM=NUM+1
"RTN","GMPLBLDC",38,0)
 . S PROB=$P(^TMP("GMPLIST",$J,IFN),U,2),TEXT=$P(^TMP("GMPLIST",$J,IFN),U,3),CODE=$P(^TMP("GMPLIST",$J,IFN),U,4)
"RTN","GMPLBLDC",39,0)
 . S ^TMP("GMPLST",$J,LCNT,0)=$S(MODE="I":$J("<"_SEQ_">",8),1:"        ")_$J(NUM,4)_" "_TEXT
"RTN","GMPLBLDC",40,0)
 . S:$L(CODE) ^TMP("GMPLST",$J,LCNT,0)=^TMP("GMPLST",$J,LCNT,0)_" ("_CODE_")"
"RTN","GMPLBLDC",41,0)
 . D CNTRL^VALM10(LCNT,9,5,IOINHI,IOINORM)
"RTN","GMPLBLDC",42,0)
 . S ^TMP("GMPLST",$J,"B",NUM)=IFN
"RTN","GMPLBLDC",43,0)
 S ^TMP("GMPLST",$J,0)=NUM_U_LCNT,VALMCNT=LCNT
"RTN","GMPLBLDC",44,0)
 Q
"RTN","GMPLBLDC",45,0)
 ;
"RTN","GMPLBLDC",46,0)
HELP ; -- help code
"RTN","GMPLBLDC",47,0)
 N X
"RTN","GMPLBLDC",48,0)
 W !!?4,"You may take a variety of actions from this prompt.  To update"
"RTN","GMPLBLDC",49,0)
 W !?4,"this category you may add new problems or remove an existing"
"RTN","GMPLBLDC",50,0)
 W !?4,"one; you may also change the text or code displayed, or the order"
"RTN","GMPLBLDC",51,0)
 W !?4,"in which each problem is displayed.  Select View w/wo Seq Numbers"
"RTN","GMPLBLDC",52,0)
 W !?4,"to toggle seeing the sequence number in addition to the display"
"RTN","GMPLBLDC",53,0)
 W !?4,"number per problem.  If necessary, the current category may be"
"RTN","GMPLBLDC",54,0)
 W !?4,"deleted; you may change to a different category to continue editing."
"RTN","GMPLBLDC",55,0)
 W !!,"Press <return> to continue ..." R X:DTIME
"RTN","GMPLBLDC",56,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLBLDC",57,0)
 Q
"RTN","GMPLBLDC",58,0)
 ;
"RTN","GMPLBLDC",59,0)
EXIT ; -- exit code
"RTN","GMPLBLDC",60,0)
 I $D(GMPLSAVE),$$CKSAVE^GMPLBLD2 D
"RTN","GMPLBLDC",61,0)
 . D SAVE^GMPLBLD2
"RTN","GMPLBLDC",62,0)
 . S ^GMPL(125.11,+GMPLGRP,0)=$P(GMPLGRP,U,2)_U_DT
"RTN","GMPLBLDC",63,0)
 L -^GMPL(125.11,+GMPLGRP,0)
"RTN","GMPLBLDC",64,0)
 K GMPLIST,GMPLST,GMPLMODE,GMPLGRP,GMPLSAVE,GMPREBLD,GMPQUIT,RT1,TMPITEM
"RTN","GMPLBLDC",65,0)
 K VALMBCK,VALMCNT,VALMSG,VALMHDR
"RTN","GMPLBLDC",66,0)
 K ^TMP("GMPLIST",$J),^TMP("GMPLST",$J)
"RTN","GMPLBLDC",67,0)
 Q
"RTN","GMPLBLDC",68,0)
 ;
"RTN","GMPLBLDC",69,0)
ADD ; Add new problem(s)
"RTN","GMPLBLDC",70,0)
 N X,Y,SEQ,CODE,IFN,GMPVOCAB,GMPQUIT,GMPREBLD S VALMBCK=""
"RTN","GMPLBLDC",71,0)
 S GMPVOCAB=$$VOCAB^GMPLX1 Q:GMPVOCAB="^"
"RTN","GMPLBLDC",72,0)
 F  D  Q:$D(GMPQUIT)  W !!
"RTN","GMPLBLDC",73,0)
 . S (X,Y)="" D SEARCH^GMPLX(.X,.Y,"PROBLEM: ","1",GMPVOCAB)
"RTN","GMPLBLDC",74,0)
 . I +Y'>0 S GMPQUIT=1 Q
"RTN","GMPLBLDC",75,0)
 . S X=$$TEXT^GMPLBLD1(X) I X="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",76,0)
 . S CODE=$$CODE^GMPLBLD1($G(Y(1))) I CODE="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",77,0)
 . S RT1="^TMP(""GMPLIST"",$J,""SEQ"",",SEQ=+$$LAST^GMPLBLD2(RT1)+1 ; dflt = next #
"RTN","GMPLBLDC",78,0)
 . S SEQ=$$SEQ^GMPLBLD1(SEQ) I SEQ="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",79,0)
 . S IFN=$$TMPIFN^GMPLBLD1,^TMP("GMPLIST",$J,0)=^TMP("GMPLIST",$J,0)+1
"RTN","GMPLBLDC",80,0)
 . S ^TMP("GMPLIST",$J,IFN)=SEQ_U_+Y_U_X_U_CODE ; seq ^ # ^ text ^ code
"RTN","GMPLBLDC",81,0)
 . S (^TMP("GMPLIST",$J,"PROB",+Y),^TMP("GMPLIST",$J,"SEQ",SEQ))=IFN,GMPREBLD=1
"RTN","GMPLBLDC",82,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLDC",83,0)
 S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",84,0)
 Q
"RTN","GMPLBLDC",85,0)
 ;
"RTN","GMPLBLDC",86,0)
REMOVE ; Remove problem from group
"RTN","GMPLBLDC",87,0)
 N NUM,IFN S VALMBCK=""
"RTN","GMPLBLDC",88,0)
 S NUM=$$SEL1^GMPLBLD1 G:NUM="^" RMQ
"RTN","GMPLBLDC",89,0)
 S IFN=$P($G(^TMP("GMPLST",$J,"B",NUM)),U,1) G:+IFN'>0 RMQ
"RTN","GMPLBLDC",90,0)
 I "@"[$G(^TMP("GMPLIST",$J,IFN)) W $C(7),!!,"Problem does not exist in this category!" H 2 G RMQ
"RTN","GMPLBLDC",91,0)
 I '$$SURE^GMPLX W !?5,"< Nothing removed! >" H 1 G RMQ
"RTN","GMPLBLDC",92,0)
 D DELETE^GMPLBLD1(IFN) S VALMBCK="R",GMPLSAVE=1
"RTN","GMPLBLDC",93,0)
 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLDC",94,0)
RMQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",95,0)
 Q
"RTN","GMPLBLDC",96,0)
 ;
"RTN","GMPLBLDC",97,0)
EDIT ; Edit problem text and code
"RTN","GMPLBLDC",98,0)
 N NUM,SEL,IFN,PIECE,CODE,PROB,PROBLEM,GMPQUIT,GMPREBLD S VALMBCK=""
"RTN","GMPLBLDC",99,0)
 S SEL=$$SEL^GMPLBLD1 G:SEL="^" EDQ
"RTN","GMPLBLDC",100,0)
 F PIECE=1:1:$L(SEL,",") D  Q:$D(GMPQUIT)  W !
"RTN","GMPLBLDC",101,0)
 . S NUM=$P(SEL,",",PIECE) Q:NUM'>0
"RTN","GMPLBLDC",102,0)
 . S IFN=$P($G(^TMP("GMPLST",$J,"B",NUM)),U,1) Q:IFN'>0
"RTN","GMPLBLDC",103,0)
 . I "@"[$G(^TMP("GMPLIST",$J,IFN)) W $C(7),!!,"Problem #"_NUM_" does not exist in this category!" H 2 Q
"RTN","GMPLBLDC",104,0)
 . W !!,">>>  Problem #"_NUM S PROBLEM=^TMP("GMPLIST",$J,IFN)
"RTN","GMPLBLDC",105,0)
 . W:$P(PROBLEM,U,2)>1 " = "_$G(^LEX(757.01,+$P(PROBLEM,U,2),0)) W ! ; KER
"RTN","GMPLBLDC",106,0)
 . S PROB=$$TEXT^GMPLBLD1($P(PROBLEM,U,3)) I PROB="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",107,0)
 . I PROB="@" D DELETE^GMPLBLD1(IFN) S GMPREBLD=1 Q
"RTN","GMPLBLDC",108,0)
 . S CODE=$$CODE^GMPLBLD1($P(PROBLEM,U,4)) I CODE="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",109,0)
 . S ^TMP("GMPLIST",$J,IFN)=$P(PROBLEM,U,1,2)_U_PROB_U_CODE,GMPREBLD=1
"RTN","GMPLBLDC",110,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLDC",111,0)
EDQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",112,0)
 Q
"RTN","GMPLENFM")
0^287^B11984760
"RTN","GMPLENFM",1,0)
GMPLENFM ; SLC/MKB -- Problem List Enc Form utilities ;12-15-95 12:07
"RTN","GMPLENFM",2,0)
 ;;2.0;Problem List;**3,4,7**;Aug 25, 1994
"RTN","GMPLENFM",3,0)
ACTIVE ; Entry point to build list of active problems for patient DFN in
"RTN","GMPLENFM",4,0)
 ;  ^TMP("IB",$J,"INTERFACES",DFN,"GMP PATIENT ACTIVE PROBLEMS",#) =
"RTN","GMPLENFM",5,0)
 ;      Piece 1:  Problem text
"RTN","GMPLENFM",6,0)
 ;            2:  ICD code
"RTN","GMPLENFM",7,0)
 ;            3:  Date of Onset, in 00/00/00 format
"RTN","GMPLENFM",8,0)
 ;            4:  SC/NSC/"" if problem is serv-conn/not sc/unknown
"RTN","GMPLENFM",9,0)
 ;            5:  Y/N/""    if problem is serv-conn/not sc/unknown
"RTN","GMPLENFM",10,0)
 ;            6:  A/R/C/"" if problem is flagged as from special exposure
"RTN","GMPLENFM",11,0)
 ;                         of Agent Orange/Radiation/Contaminants/none
"RTN","GMPLENFM",12,0)
 ;            7:  Special Exposure, full text of piece 6
"RTN","GMPLENFM",13,0)
 ;
"RTN","GMPLENFM",14,0)
 N IFN,PROB,CNT,GMPL0,GMPL1,SC,NUM,GMPLIST,GMPARAM,GMPLVIEW,GMPTOTAL,GMPDFN,NODE
"RTN","GMPLENFM",15,0)
 Q:$G(DFN)'>0  S GMPDFN=DFN,CNT=0,NODE=$G(^GMPL(125.99,1,0))
"RTN","GMPLENFM",16,0)
 S GMPARAM("VER")=$P(NODE,U,2),GMPARAM("REV")=$P(NODE,U,5)="R",GMPARAM("QUIET")=1
"RTN","GMPLENFM",17,0)
 S GMPLVIEW("ACT")="A",GMPLVIEW("PROV")=0,GMPLVIEW("VIEW")=""
"RTN","GMPLENFM",18,0)
 D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLENFM",19,0)
 F NUM=0:0 S NUM=$O(GMPLIST(NUM)) Q:NUM'>0  D
"RTN","GMPLENFM",20,0)
 . S IFN=GMPLIST(NUM) Q:IFN'>0
"RTN","GMPLENFM",21,0)
 . S GMPL0=$G(^AUPNPROB(IFN,0)),GMPL1=$G(^(1))
"RTN","GMPLENFM",22,0)
 . S PROB=$$PROBTEXT^GMPLX(IFN),CNT=CNT+1
"RTN","GMPLENFM",23,0)
 . I GMPARAM("VER"),$P(GMPL1,U,2)="T" S PROB="$"_PROB
"RTN","GMPLENFM",24,0)
 . S PROB=PROB_U_$P($G(^ICD9(+$P(GMPL0,U),0)),U)
"RTN","GMPLENFM",25,0)
 . S PROB=PROB_U_$$EXTDT^GMPLX($P(GMPL0,U,13)),SC=$P(GMPL1,U,10)
"RTN","GMPLENFM",26,0)
 . S PROB=PROB_U_$S(+SC:"SC^Y",SC=0:"NSC^N",1:"^")
"RTN","GMPLENFM",27,0)
 . S PROB=PROB_U_$S($P(GMPL1,U,11):"A^Agent Orange",$P(GMPL1,U,12):"R^Radiation",$P(GMPL1,U,13):"C^Contaminants",1:"^")
"RTN","GMPLENFM",28,0)
 . S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"GMP PATIENT ACTIVE PROBLEMS",CNT)=PROB
"RTN","GMPLENFM",29,0)
 S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"GMP PATIENT ACTIVE PROBLEMS",0)=CNT
"RTN","GMPLENFM",30,0)
 Q
"RTN","GMPLENFM",31,0)
 ;
"RTN","GMPLENFM",32,0)
SELECT ; Entry point to select common problems to list on form
"RTN","GMPLENFM",33,0)
 ; sets ^TMP("IB",$J,"INTERFACES","GMP SELECT CLINIC COMMON PROBLEMS")
"RTN","GMPLENFM",34,0)
 ;      = ptr to Clinical Lexicon ^ problem text ^ ICD Code (null if unk)
"RTN","GMPLENFM",35,0)
 N X,Y,DIC,PROB D CONFIG^LEXSET("ICD","ICD") ; KER
"RTN","GMPLENFM",36,0)
 K ^TMP("IB",$J,"INTERFACES","GMP SELECT CLINIC COMMON PROBLEMS")
"RTN","GMPLENFM",37,0)
 ; Set a screen here? -- allow only ICD coded problems ??
"RTN","GMPLENFM",38,0)
 S DIC("A")="Select PROBLEM: ",DIC(0)="AEQM",DIC="^LEX(757.01," ; KER
"RTN","GMPLENFM",39,0)
 D ^DIC Q:+Y<0
"RTN","GMPLENFM",40,0)
 S PROB=Y I +Y'>1 S PROB=+Y_U_X ; 'unresolved' -- use narrative
"RTN","GMPLENFM",41,0)
 S PROB=PROB_U_$G(Y(1)) ; Y(1)=ICD Code, if known
"RTN","GMPLENFM",42,0)
 S ^TMP("IB",$J,"INTERFACES","GMP SELECT CLINIC COMMON PROBLEMS")=PROB
"RTN","GMPLENFM",43,0)
 Q
"RTN","GMPLENFM",44,0)
 ;
"RTN","GMPLENFM",45,0)
DSELECT ; Entry point to build list of active problems for patient DFN in
"RTN","GMPLENFM",46,0)
 ;  ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",#) =
"RTN","GMPLENFM",47,0)
 ;      Piece 1:  Problem ien
"RTN","GMPLENFM",48,0)
 ;            2:  Problem text
"RTN","GMPLENFM",49,0)
 ;            3:  ICD code
"RTN","GMPLENFM",50,0)
 ;            4:  Date of Onset, in 00/00/00 format
"RTN","GMPLENFM",51,0)
 ;            5:  SC/NSC/"" if problem is serv-conn/not sc/unknown
"RTN","GMPLENFM",52,0)
 ;            6:  Y/N/""    if problem is serv-conn/not sc/unknown
"RTN","GMPLENFM",53,0)
 ;            7:  A/R/C/"" if problem is flagged as from special exposure
"RTN","GMPLENFM",54,0)
 ;                         of Agent Orange/Radiation/Contaminants/none
"RTN","GMPLENFM",55,0)
 ;            8:  Special Exposure, full text of piece 6
"RTN","GMPLENFM",56,0)
 ;
"RTN","GMPLENFM",57,0)
 ;
"RTN","GMPLENFM",58,0)
 N IFN,PROB,CNT,GMPL0,GMPL1,SC,NUM,GMPLIST,GMPARAM,GMPLVIEW,GMPTOTAL,GMPDFN,NODE
"RTN","GMPLENFM",59,0)
 Q:$G(DFN)'>0  S GMPDFN=DFN,CNT=0,NODE=$G(^GMPL(125.99,1,0))
"RTN","GMPLENFM",60,0)
 S GMPARAM("VER")=$P(NODE,U,2),GMPARAM("REV")=$P(NODE,U,5)="R",GMPARAM("QUIET")=1
"RTN","GMPLENFM",61,0)
 S GMPLVIEW("ACT")="A",GMPLVIEW("PROV")=0,GMPLVIEW("VIEW")=""
"RTN","GMPLENFM",62,0)
 D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLENFM",63,0)
 F NUM=0:0 S NUM=$O(GMPLIST(NUM)) Q:NUM'>0  D
"RTN","GMPLENFM",64,0)
 . S IFN=GMPLIST(NUM) Q:IFN'>0
"RTN","GMPLENFM",65,0)
 . S GMPL0=$G(^AUPNPROB(IFN,0)),GMPL1=$G(^(1))
"RTN","GMPLENFM",66,0)
 . S PROB=$$PROBTEXT^GMPLX(IFN),CNT=CNT+1
"RTN","GMPLENFM",67,0)
 . I GMPARAM("VER"),$P(GMPL1,U,2)="T" S PROB="$"_PROB
"RTN","GMPLENFM",68,0)
 . S PROB=IFN_U_PROB
"RTN","GMPLENFM",69,0)
 . S PROB=PROB_U_$P($G(^ICD9(+$P(GMPL0,U),0)),U)
"RTN","GMPLENFM",70,0)
 . S PROB=PROB_U_$$EXTDT^GMPLX($P(GMPL0,U,13)),SC=$P(GMPL1,U,10)
"RTN","GMPLENFM",71,0)
 . S PROB=PROB_U_$S(+SC:"SC^Y",SC=0:"NSC^N",1:"^")
"RTN","GMPLENFM",72,0)
 . S PROB=PROB_U_$S($P(GMPL1,U,11):"A^Agent Orange",$P(GMPL1,U,12):"R^Radiation",$P(GMPL1,U,13):"C^Contaminants",1:"^")
"RTN","GMPLENFM",73,0)
 . S ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",CNT)=PROB
"RTN","GMPLENFM",74,0)
 S ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",0)=CNT
"RTN","GMPLENFM",75,0)
 Q
"RTN","GMPLHIST")
0^288^B10811073
"RTN","GMPLHIST",1,0)
GMPLHIST ; SLC/MKB -- Problem List Historical data ;5/26/94  15:48
"RTN","GMPLHIST",2,0)
 ;;2.0;Problem List;**7**;Aug 25, 1994
"RTN","GMPLHIST",3,0)
DT ; -- add historical data (audit trail) to DT list
"RTN","GMPLHIST",4,0)
 ; Called from ^GMPLDISP, requires AIFN and adds to GMPDT()
"RTN","GMPLHIST",5,0)
 N NODE,DATE,FLD,PROV,OLD,NEW,ROOT,CHNGE
"RTN","GMPLHIST",6,0)
 S NODE=$G(^GMPL(125.8,AIFN,0)) Q:NODE=""
"RTN","GMPLHIST",7,0)
 S DATE=$$EXTDT^GMPLX($P(NODE,U,3)),FLD=+$P(NODE,U,2),PROV=+$P(NODE,U,8)
"RTN","GMPLHIST",8,0)
 S:'PROV PROV=$P(NODE,U,4) ; Who entered vs. provider
"RTN","GMPLHIST",9,0)
 S FLD=FLD_U_$$FLDNAME(+FLD),PROV=$P($G(^VA(200,PROV,0)),U)
"RTN","GMPLHIST",10,0)
 S OLD=$P(NODE,U,5),NEW=$P(NODE,U,6),LCNT=LCNT+1
"RTN","GMPLHIST",11,0)
 I +FLD=1101 D  Q
"RTN","GMPLHIST",12,0)
 . S NODE=$G(^GMPL(125.8,AIFN,1)) ; old note
"RTN","GMPLHIST",13,0)
 . S GMPDT(LCNT,0)=$J(DATE,10)_": NOTE "_$$EXTDT^GMPLX($P(NODE,U,5))_" removed by "_PROV
"RTN","GMPLHIST",14,0)
 . S LCNT=LCNT+1,GMPDT(LCNT,0)="            "_$P(NODE,U,3)
"RTN","GMPLHIST",15,0)
 I +FLD=1.02 D  Q
"RTN","GMPLHIST",16,0)
 . S CHNGE=$S(NEW="H":"removed",OLD="T":"verified",1:"placed back on list")
"RTN","GMPLHIST",17,0)
 . S GMPDT(LCNT,0)=$J(DATE,10)_": PROBLEM "_CHNGE_" by "_PROV
"RTN","GMPLHIST",18,0)
 S GMPDT(LCNT,0)=$J(DATE,10)_": "_$P(FLD,U,2)_" changed by "_PROV,LCNT=LCNT+1
"RTN","GMPLHIST",19,0)
 I +FLD=.12 S GMPDT(LCNT,0)=$J("from ",17)_$S(OLD="A":"ACTIVE",OLD="I":"INACTIVE",1:"UNKNOWN")_" to "_$S(NEW="A":"ACTIVE",NEW="I":"INACTIVE",1:"UNKNOWN") Q
"RTN","GMPLHIST",20,0)
 I (+FLD=.13)!(+FLD=1.07) S GMPDT(LCNT,0)=$J("from ",17)_$$EXTDT^GMPLX(OLD)_" to "_$$EXTDT^GMPLX(NEW) Q
"RTN","GMPLHIST",21,0)
 I +FLD=1.14 S GMPDT(LCNT,0)=$J("from ",17)_$S(OLD="A":"ACUTE",OLD="C":"CHRONIC",1:"UNSPECIFIED")_" to "_$S(NEW="A":"ACUTE",NEW="C":"CHRONIC",1:"UNSPECIFIED") Q
"RTN","GMPLHIST",22,0)
 I +FLD>1.09 S GMPDT(LCNT,0)=$J("from ",17)_$S(+OLD:"YES",OLD=0:"NO",1:"UNKNOWN")_" to "_$S(+NEW:"YES",NEW=0:"NO",1:"UNKNOWN") Q
"RTN","GMPLHIST",23,0)
 I "^.01^.05^1.01^1.04^1.05^1.06^1.08^"[(U_+FLD_U) D
"RTN","GMPLHIST",24,0)
 . S ROOT=$S(+FLD=.01:"ICD9(",+FLD=.05:"AUTNPOV(",+FLD=1.01:"LEX(757.01,",(+FLD=1.04)!(+FLD=1.05):"VA(200,",+FLD=1.06:"DIC(49,",+FLD=1.08:"SC(",1:"") Q:ROOT=""  ; KER
"RTN","GMPLHIST",25,0)
 . S GMPDT(LCNT,0)=$J("from ",17)_$S(OLD:$P(@(U_ROOT_OLD_",0)"),U),1:"UNSPECIFIED")
"RTN","GMPLHIST",26,0)
 . S LCNT=LCNT+1,GMPDT(LCNT,0)=$J("to ",17)_$S(NEW:$P(@(U_ROOT_NEW_",0)"),U),1:"UNSPECIFIED")
"RTN","GMPLHIST",27,0)
 Q
"RTN","GMPLHIST",28,0)
 ;
"RTN","GMPLHIST",29,0)
FLDNAME(NUM) ; Returns field name for display
"RTN","GMPLHIST",30,0)
 N NAME,NM1,NM2,I,J S J=0,NAME=""
"RTN","GMPLHIST",31,0)
 S NM1=".01^.05^.12^.13^1.01^1.02^1.04^1.05^1.06^1.07^1.08^1.09^1.1^1.11^1.12^1.13^1.14^1101"
"RTN","GMPLHIST",32,0)
 F I=1:1:$L(NM1,U) I +$P(NM1,U,I)=+NUM S J=I Q
"RTN","GMPLHIST",33,0)
 G:J'>0 FNQ
"RTN","GMPLHIST",34,0)
 S NM2="DIAGNOSIS^PROVIDER NARRATIVE^STATUS^DATE OF ONSET^PROBLEM^CONDITION^RECORDING PROVIDER^RESPONSIBLE PROVIDER^SERVICE^DATE RESOLVED^CLINIC^DATE RECORDED^SERVICE CONNECTED^AGENT ORANGE EXP^RADIATION EXP^ENV CONTAMINANTS EXP^PRIORITY^NOTE"
"RTN","GMPLHIST",35,0)
 S NAME=$P(NM2,U,J)
"RTN","GMPLHIST",36,0)
FNQ Q NAME
"RTN","GMPLUTL1")
0^289^B15027510
"RTN","GMPLUTL1",1,0)
GMPLUTL1 ; SLC/MKB -- Problem List utilities cont ;8/29/95  11:01
"RTN","GMPLUTL1",2,0)
 ;;2.0;Problem List;**3,8,7**;Aug 25, 1994
"RTN","GMPLUTL1",3,0)
 ;
"RTN","GMPLUTL1",4,0)
 ; *** The following expect PL("data item") from ^GMPLUTL:
"RTN","GMPLUTL1",5,0)
 ;
"RTN","GMPLUTL1",6,0)
DIAGNOSI ; -- ICD Diagnosis ptr
"RTN","GMPLUTL1",7,0)
 S:'$L($G(PL("DIAGNOSIS"))) PL("DIAGNOSIS")=$$NOS^GMPLX
"RTN","GMPLUTL1",8,0)
 Q:$D(^ICD9(+PL("DIAGNOSIS"),0))  ; ok
"RTN","GMPLUTL1",9,0)
 S GMPQUIT=1,PLY(0)="Invalid ICD Diagnosis"
"RTN","GMPLUTL1",10,0)
 Q
"RTN","GMPLUTL1",11,0)
 ;
"RTN","GMPLUTL1",12,0)
LEXICON ; -- Clinical Lexicon ptr
"RTN","GMPLUTL1",13,0)
 S:'$L($G(PL("LEXICON"))) PL("LEXICON")=1
"RTN","GMPLUTL1",14,0)
 Q:$D(^LEX(757.01,+PL("LEXICON"),0))  ; KER
"RTN","GMPLUTL1",15,0)
 S GMPQUIT=1,PLY(0)="Invalid Lexicon term"
"RTN","GMPLUTL1",16,0)
 Q
"RTN","GMPLUTL1",17,0)
DUPLICAT ;-- Problem already on list 
"RTN","GMPLUTL1",18,0)
 Q:$P($G(^GMPL(125.99,1,0)),U,6)>0  ;check not required  ; MC
"RTN","GMPLUTL1",19,0)
 S:'$L($G(PL("DIAGNOSIS"))) PL("DIAGNOSIS")=$$NOS^GMPLX
"RTN","GMPLUTL1",20,0)
 I '$D(^AUPNPROB("B",+PL("DIAGNOSIS")))!('$D(^AUPNPROB("AC",GMPDFN))) Q  ;no duplicate
"RTN","GMPLUTL1",21,0)
 F IFN=0:0 S IFN=$O(^AUPNPROB("AC",GMPDFN,IFN)) Q:IFN'>0  D  Q:$D(GMPQUIT)
"RTN","GMPLUTL1",22,0)
 . S (DUPL(1),DUPL(2))=0
"RTN","GMPLUTL1",23,0)
 . S NODE0=$G(^AUPNPROB(IFN,0)),NODE1=$G(^(1)) Q:$P(NODE1,U,2)="H"
"RTN","GMPLUTL1",24,0)
 . I +PL("DIAGNOSIS")=+NODE0 S DUPL(1)=IFN
"RTN","GMPLUTL1",25,0)
 . S:PL("NARRATIVE")=$$UP^XLFSTR($P(^AUTNPOV($P(NODE0,U,5),0),U)) DUPL(2)=IFN
"RTN","GMPLUTL1",26,0)
 . I DUPL(1)>0&DUPL(2)>0 S GMPQUIT=1,PLY(0)="Duplicate problem"
"RTN","GMPLUTL1",27,0)
 Q
"RTN","GMPLUTL1",28,0)
 ;
"RTN","GMPLUTL1",29,0)
LOCATION ; -- Hospital Location (clinic) ptr
"RTN","GMPLUTL1",30,0)
 S:'$D(PL("LOCATION")) PL("LOCATION")="" Q:'$L(PL("LOCATION"))
"RTN","GMPLUTL1",31,0)
 I $D(^SC(+PL("LOCATION"),0)),$P(^(0),U,3)="C" Q  ; ok
"RTN","GMPLUTL1",32,0)
 S GMPQUIT=1,PLY(0)="Invalid hospital location"
"RTN","GMPLUTL1",33,0)
 Q
"RTN","GMPLUTL1",34,0)
 ;
"RTN","GMPLUTL1",35,0)
PROVIDER ; -- Responsible Provider
"RTN","GMPLUTL1",36,0)
 S:'$D(PL("PROVIDER")) PL("PROVIDER")=""
"RTN","GMPLUTL1",37,0)
 Q:'$L(PL("PROVIDER"))  Q:$D(^VA(200,+PL("PROVIDER"),0))  ; ok
"RTN","GMPLUTL1",38,0)
 S GMPQUIT=1,PLY(0)="Invalid provider"
"RTN","GMPLUTL1",39,0)
 Q
"RTN","GMPLUTL1",40,0)
 ;
"RTN","GMPLUTL1",41,0)
STATUS ; -- Problem status
"RTN","GMPLUTL1",42,0)
 S:$G(PL("STATUS"))="" PL("STATUS")="A"
"RTN","GMPLUTL1",43,0)
 I "^A^I^a^i^"[(U_PL("STATUS")_U) S PL("STATUS")=$$UP^XLFSTR(PL("STATUS")) Q  ; ok
"RTN","GMPLUTL1",44,0)
 S GMPQUIT=1,PLY(0)="Invalid problem status"
"RTN","GMPLUTL1",45,0)
 Q
"RTN","GMPLUTL1",46,0)
 ;
"RTN","GMPLUTL1",47,0)
ONSET ; -- Date of Onset
"RTN","GMPLUTL1",48,0)
 N %DT,Y,X
"RTN","GMPLUTL1",49,0)
 S:'$D(PL("ONSET")) PL("ONSET")="" Q:'$L(PL("ONSET"))  ; ok
"RTN","GMPLUTL1",50,0)
 S %DT="P",%DT(0)="-NOW",X=PL("ONSET") D ^%DT
"RTN","GMPLUTL1",51,0)
 I Y>0 S PL("ONSET")=Y Q  ; ok
"RTN","GMPLUTL1",52,0)
 S GMPQUIT=1,PLY(0)="Invalid Date of Onset"
"RTN","GMPLUTL1",53,0)
 Q
"RTN","GMPLUTL1",54,0)
 ;
"RTN","GMPLUTL1",55,0)
RESOLVED ; -- Date Resolved (Requires STATUS, ONSET)
"RTN","GMPLUTL1",56,0)
 N %DT,Y,X
"RTN","GMPLUTL1",57,0)
 S:'$D(PL("RESOLVED")) PL("RESOLVED")="" Q:'$L(PL("RESOLVED"))  ; ok
"RTN","GMPLUTL1",58,0)
 S %DT="P",%DT(0)="-NOW",X=PL("RESOLVED") D ^%DT
"RTN","GMPLUTL1",59,0)
 I Y'>0 S GMPQUIT=1,PLY(0)="Invalid Date Resolved" Q
"RTN","GMPLUTL1",60,0)
 I PL("STATUS")="A" S GMPQUIT=1,PLY(0)="Active problems cannot have a Date Resolved" Q
"RTN","GMPLUTL1",61,0)
 I Y<PL("ONSET") S GMPQUIT=1,PLY(0)="Date Resolved cannot be prior to Date of Onset" Q
"RTN","GMPLUTL1",62,0)
 S PL("RESOLVED")=Y ; ok
"RTN","GMPLUTL1",63,0)
 Q
"RTN","GMPLUTL1",64,0)
 ;
"RTN","GMPLUTL1",65,0)
RECORDED ; -- Date Recorded (Requires ONSET)
"RTN","GMPLUTL1",66,0)
 N %DT,Y,X
"RTN","GMPLUTL1",67,0)
 S:'$D(PL("RECORDED")) PL("RECORDED")="" Q:'$L(PL("RECORDED"))  ; ok
"RTN","GMPLUTL1",68,0)
 S %DT="P",%DT(0)="-NOW",X=PL("RECORDED") D ^%DT
"RTN","GMPLUTL1",69,0)
 I Y'>0 S GMPQUIT=1,PLY(0)="Invalid Date Recorded" Q
"RTN","GMPLUTL1",70,0)
 I PL("RECORDED")<PL("ONSET") S GMPQUIT=1,PLY(0)="Date Recorded cannot be prior to Date of Onset" Q
"RTN","GMPLUTL1",71,0)
 S PL("RECORDED")=Y ; ok
"RTN","GMPLUTL1",72,0)
 Q
"RTN","GMPLUTL1",73,0)
 ;
"RTN","GMPLUTL1",74,0)
SC ; -- SC condition flag
"RTN","GMPLUTL1",75,0)
 S:'$D(PL("SC")) PL("SC")=""
"RTN","GMPLUTL1",76,0)
 I "^^1^0^"'[(U_PL("SC")_U) S GMPQUIT=1,PLY(0)="Invalid SC flag" Q
"RTN","GMPLUTL1",77,0)
 I 'GMPSC,+PL("SC") S GMPQUIT=1,PLY(0)="Invalid SC flag"
"RTN","GMPLUTL1",78,0)
 Q
"RTN","GMPLUTL1",79,0)
 ;
"RTN","GMPLUTL1",80,0)
AO ; -- AO exposure flag (Requires GMPAGTOR)
"RTN","GMPLUTL1",81,0)
 S:'$D(PL("AO")) PL("AO")=""
"RTN","GMPLUTL1",82,0)
 I "^^1^0^"'[(U_PL("AO")_U) S GMPQUIT=1,PLY(0)="Invalid AO flag" Q
"RTN","GMPLUTL1",83,0)
 I 'GMPAGTOR,+PL("AO") S GMPQUIT=1,PLY(0)="Invalid AO flag"
"RTN","GMPLUTL1",84,0)
 Q
"RTN","GMPLUTL1",85,0)
 ;
"RTN","GMPLUTL1",86,0)
IR ; -- IR exposure flag (Requires GMPION)
"RTN","GMPLUTL1",87,0)
 S:'$D(PL("IR")) PL("IR")=""
"RTN","GMPLUTL1",88,0)
 I "^^1^0^"'[(U_PL("IR")_U) S GMPQUIT=1,PLY(0)="Invalid IR flag" Q
"RTN","GMPLUTL1",89,0)
 I 'GMPION,+PL("IR") S GMPQUIT=1,PLY(0)="Invalid IR flag"
"RTN","GMPLUTL1",90,0)
 Q
"RTN","GMPLUTL1",91,0)
 ;
"RTN","GMPLUTL1",92,0)
EC ; -- EC exposure flag (Requires GMPGULF)
"RTN","GMPLUTL1",93,0)
 S:'$D(PL("EC")) PL("EC")=""
"RTN","GMPLUTL1",94,0)
 I "^^1^0^"'[(U_PL("EC")_U) S GMPQUIT=1,PLY(0)="Invalid EC flag" Q
"RTN","GMPLUTL1",95,0)
 I 'GMPGULF,+PL("EC") S GMPQUIT=1,PLY(0)="Invalid EC flag"
"RTN","GMPLUTL1",96,0)
 Q
"RTN","GMPLX")
0^290^B22856107
"RTN","GMPLX",1,0)
GMPLX ; SLC/MKB -- Problem List Problem Utilities ;6/9/94  09:10
"RTN","GMPLX",2,0)
 ;;2.0;Problem List;**7**;Aug 25, 1994
"RTN","GMPLX",3,0)
SEARCH(X,Y,PROMPT,UNRES,VIEW) ; Search CLU for problem, text in X
"RTN","GMPLX",4,0)
 N DIC S:'$L($G(VIEW)) VIEW="PL1"
"RTN","GMPLX",5,0)
 D CONFIG^LEXSET("GMPL",VIEW) ; KER
"RTN","GMPLX",6,0)
 S DIC("A")=$S($L($G(PROMPT)):PROMPT,1:"Select PROBLEM: ")
"RTN","GMPLX",7,0)
 S DIC="^LEX(757.01,",DIC(0)=$S('$L($G(X)):"A",1:"")_"EQM" ; KER
"RTN","GMPLX",8,0)
 S:'$G(UNRES) LEXUN=0 ; KER
"RTN","GMPLX",9,0)
 D ^DIC S:+Y>1 X=$P(Y,U,2)
"RTN","GMPLX",10,0)
 Q
"RTN","GMPLX",11,0)
 ;
"RTN","GMPLX",12,0)
PROVNARR(X,CL) ; Returns ifn ^ text of narrative in File #9999999.27
"RTN","GMPLX",13,0)
 N DIC,Y,DLAYGO,DD,DO,DA S:$L(X)>80 X=$E(X,1,80)
"RTN","GMPLX",14,0)
 S DIC="^AUTNPOV(",DIC(0)="L",DLAYGO=9999999.27,(DA,Y)=0
"RTN","GMPLX",15,0)
 F  S DA=$O(^AUTNPOV("B",$E(X,1,30),DA)) Q:DA'>0  I $P(^AUTNPOV(DA,0),U)=X S Y=DA_U_X Q
"RTN","GMPLX",16,0)
 I '(+Y) K DA,Y D FILE^DICN S:Y'>0 Y=U_X I Y>0,CL>1 S ^AUTNPOV(+Y,757)=CL
"RTN","GMPLX",17,0)
 Q $P(Y,U,1,2)
"RTN","GMPLX",18,0)
 ;
"RTN","GMPLX",19,0)
PROBTEXT(IFN) ; Returns display text of the problem
"RTN","GMPLX",20,0)
 N X,Y
"RTN","GMPLX",21,0)
 S Y=$P($G(^AUPNPROB(+IFN,0)),U,5),X=$P($G(^AUTNPOV(+Y,0)),U)
"RTN","GMPLX",22,0)
 Q X
"RTN","GMPLX",23,0)
 ;
"RTN","GMPLX",24,0)
WRAP(PROB,MAX,TEXT) ; splits text, sets into TEXT array
"RTN","GMPLX",25,0)
 N I,J S J=0 K TEXT
"RTN","GMPLX",26,0)
 I $L(PROB)'>MAX S J=J+1,TEXT(J)=PROB G WRQ
"RTN","GMPLX",27,0)
WR0 ; top of loop
"RTN","GMPLX",28,0)
 S I=$F(PROB," ") I ('I)!(I>(MAX+2)) S J=J+1,TEXT(J)=$E(PROB,1,MAX),PROB=$E(PROB,MAX+1,999)
"RTN","GMPLX",29,0)
 I $L(PROB)>MAX F I=(MAX+1):-1:1 I $E(PROB,I)=" " S J=J+1,TEXT(J)=$E(PROB,1,I-1),PROB=$E(PROB,I+1,999) Q
"RTN","GMPLX",30,0)
 G:$L(PROB)>MAX WR0 ; split remaining text again
"RTN","GMPLX",31,0)
 S:$L(PROB) J=J+1,TEXT(J)=PROB
"RTN","GMPLX",32,0)
WRQ S TEXT=J
"RTN","GMPLX",33,0)
 Q
"RTN","GMPLX",34,0)
 ;
"RTN","GMPLX",35,0)
NOS() ; Return ptr ^ 799.9 ICD code
"RTN","GMPLX",36,0)
 N X S X=$O(^ICD9("BA",799.9,0)) ; want 1st
"RTN","GMPLX",37,0)
 Q (+X_"^799.9")
"RTN","GMPLX",38,0)
 ;
"RTN","GMPLX",39,0)
SEL(HELP) ; Select list of problems
"RTN","GMPLX",40,0)
 N X,Y,DIR,MAX
"RTN","GMPLX",41,0)
 S MAX=+$G(^TMP("GMPL",$J,0)) I MAX'>0 Q "^"
"RTN","GMPLX",42,0)
 S DIR(0)="LAO^1:"_MAX,DIR("A")="Select Problem(s)"
"RTN","GMPLX",43,0)
 S:MAX>1 DIR("A")=DIR("A")_" (1-"_MAX_"): "
"RTN","GMPLX",44,0)
 S:MAX'>1 DIR("A")=DIR("A")_": ",DIR("B")=1
"RTN","GMPLX",45,0)
 S DIR("?")="Enter the problems you wish to "
"RTN","GMPLX",46,0)
 S DIR("?")=DIR("?")_$S($L(HELP):HELP,1:"act on")_", as a range or list of numbers"
"RTN","GMPLX",47,0)
 D ^DIR I $D(DTOUT)!(X="") S Y="^"
"RTN","GMPLX",48,0)
 Q Y
"RTN","GMPLX",49,0)
 ;
"RTN","GMPLX",50,0)
SEL1(HELP) ; Select 1 problem
"RTN","GMPLX",51,0)
 N X,Y,DIR,MAX
"RTN","GMPLX",52,0)
 S MAX=+$G(^TMP("GMPL",$J,0)) I MAX'>0 Q "^"
"RTN","GMPLX",53,0)
 S DIR(0)="NAO^1:"_MAX_":0",DIR("A")="Select Problem"
"RTN","GMPLX",54,0)
 S:MAX>1 DIR("A")=DIR("A")_" (1-"_MAX_"): "
"RTN","GMPLX",55,0)
 S:MAX'>1 DIR("A")=DIR("A")_": ",DIR("B")=1
"RTN","GMPLX",56,0)
 S DIR("?")="Enter the number of the problem you wish to "
"RTN","GMPLX",57,0)
 S DIR("?")=DIR("?")_$S($L(HELP):HELP,1:"act on")
"RTN","GMPLX",58,0)
 D ^DIR I $D(DTOUT)!(X="") S Y="^"
"RTN","GMPLX",59,0)
 Q Y
"RTN","GMPLX",60,0)
 ;
"RTN","GMPLX",61,0)
DUPL(DFN,TERM,TEXT) ; Check's patient's list for duplicate entries
"RTN","GMPLX",62,0)
 N DA,IFN,NODE0,NODE1 S DA=0,TEXT=$$UP^XLFSTR(TEXT)
"RTN","GMPLX",63,0)
 I '$D(^AUPNPROB("C",TERM))!('$D(^AUPNPROB("AC",DFN))) Q DA
"RTN","GMPLX",64,0)
 F IFN=0:0 S IFN=$O(^AUPNPROB("AC",DFN,IFN)) Q:IFN'>0  D  Q:DA>0
"RTN","GMPLX",65,0)
 . S NODE0=$G(^AUPNPROB(IFN,0)),NODE1=$G(^(1)) Q:$P(NODE1,U,2)="H"
"RTN","GMPLX",66,0)
 . I TERM>1 S:+NODE1=TERM DA=IFN Q
"RTN","GMPLX",67,0)
 . S:TEXT=$$UP^XLFSTR($P(^AUTNPOV($P(NODE0,U,5),0),U)) DA=IFN
"RTN","GMPLX",68,0)
 Q DA
"RTN","GMPLX",69,0)
 ;
"RTN","GMPLX",70,0)
DUPLOK(IFN) ; Sure you want to duplicate problem?
"RTN","GMPLX",71,0)
 N DIR,X,Y,GMPL0,GMPL1,DATE,PROV
"RTN","GMPLX",72,0)
 S DIR(0)="YA",GMPL0=$G(^AUPNPROB(IFN,0)),GMPL1=$G(^(1))
"RTN","GMPLX",73,0)
 S DIR("A")="Are you sure you want to continue? ",DIR("B")="NO"
"RTN","GMPLX",74,0)
 S DIR("?",1)="Enter YES if you want to duplicate this problem on this patient's list;",DIR("?")="press <return> to re-enter the problem name."
"RTN","GMPLX",75,0)
 W $C(7),!!,">>>  "_$$PROBTEXT(IFN),!?5,"is already an "
"RTN","GMPLX",76,0)
 W $S($P(GMPL0,U,12)="I":"IN",1:"")_"ACTIVE problem on this patient's list!",!
"RTN","GMPLX",77,0)
 S PROV=+$P(GMPL1,U,5) W:PROV !?5,"Provider: "_$P($G(^VA(200,PROV,0)),U)_" ("_$P($$SERVICE^GMPLX1(PROV),U,2)_")"
"RTN","GMPLX",78,0)
 I $P(GMPL0,U,12)="A" W !?8,"Onset: " S DATE=$P(GMPL0,U,13)
"RTN","GMPLX",79,0)
 I $P(GMPL0,U,12)="I" W !?5,"Resolved: " S DATE=$P(GMPL1,U,7)
"RTN","GMPLX",80,0)
 W $S(DATE>0:$$FMTE^XLFDT(DATE),1:"unspecified"),!
"RTN","GMPLX",81,0)
 D ^DIR W !
"RTN","GMPLX",82,0)
 Q +Y
"RTN","GMPLX",83,0)
 ;
"RTN","GMPLX",84,0)
LOCKED() ; Returns message that problem is locked
"RTN","GMPLX",85,0)
 Q "This problem is currently being edited by another user!"
"RTN","GMPLX",86,0)
 ;
"RTN","GMPLX",87,0)
SURE() ; Verify delete request, returns 1 if YES, else 0
"RTN","GMPLX",88,0)
 N DIR,X,Y
"RTN","GMPLX",89,0)
 S DIR(0)="YA",DIR("B")="NO"
"RTN","GMPLX",90,0)
 S DIR("?")="Enter YES to remove this value or NO to leave it unchanged."
"RTN","GMPLX",91,0)
 S DIR("A")="Are you sure you want to remove this value? " D ^DIR
"RTN","GMPLX",92,0)
 Q +Y
"RTN","GMPLX",93,0)
 ;
"RTN","GMPLX",94,0)
EXTDT(DATE) ; Formats date into MM/DD/YY
"RTN","GMPLX",95,0)
 N X,MM,DD,YY,YYY S X="",DATE=$P(DATE,".") Q:'DATE ""
"RTN","GMPLX",96,0)
 S MM=+$E(DATE,4,5),DD=+$E(DATE,6,7),YY=$E(DATE,2,3),YYY=$E(DATE,1,3)
"RTN","GMPLX",97,0)
 S:MM X=MM_"/" S:DD X=X_DD_"/" S X=$S($L(X):X_YY,1:1700+YYY)
"RTN","GMPLX",98,0)
 Q X
"RTN","GMPLX",99,0)
 ;
"RTN","GMPLX",100,0)
AUDIT(DATA,OLD) ; Makes entry in Audit file
"RTN","GMPLX",101,0)
 ; DATA = string for 0-node
"RTN","GMPLX",102,0)
 ; OLD  = string for 1-node = 0-node from reform/react problem
"RTN","GMPLX",103,0)
 N DA,DD,DO,DIC,X,Y,DIK,DLAYGO
"RTN","GMPLX",104,0)
 S DIC="^GMPL(125.8,",DIC(0)="L",X=$P(DATA,U),DLAYGO=125.8
"RTN","GMPLX",105,0)
 D FILE^DICN Q:+Y'>0  S DA=+Y,DIK="^GMPL(125.8,"
"RTN","GMPLX",106,0)
 S ^GMPL(125.8,DA,0)=DATA D IX1^DIK
"RTN","GMPLX",107,0)
 S:$L(OLD) ^GMPL(125.8,DA,1)=OLD
"RTN","GMPLX",108,0)
 Q
"RTN","GMPLX",109,0)
 ;
"RTN","GMPLX",110,0)
DTMOD(DA) ; Update Date Last Modified
"RTN","GMPLX",111,0)
 S $P(^AUPNPROB(DA,0),U,3)=DT
"RTN","GMPLX",112,0)
 Q
"RTN","GMPLX",113,0)
 ;
"RTN","GMPLX",114,0)
MSG() ; LMgr msg bar
"RTN","GMPLX",115,0)
 Q "+ Next Screen  - Prev Screen  ?? More actions"
"RTN","GMPLX",116,0)
 ;
"RTN","GMPLX",117,0)
KILL ; clean-up variables
"RTN","GMPLX",118,0)
 K X,Y,DIC,DIE,DR,DA,DUOUT,DTOUT,GMPQUIT,GMPRT,GMPSAVED,GMPIFN,GMPLNO,GMPLNUM,GMPLSEL,GMPREBLD,GMPI,GMPLSLST,GMPLJUMP
"RTN","GMPLX",119,0)
 Q
"RTN","GMPTA")
1^1
"RTN","GMPTA1")
1^2
"RTN","GMPTA2")
1^3
"RTN","GMPTA3")
1^4
"RTN","GMPTA4")
1^5
"RTN","GMPTA5")
1^6
"RTN","GMPTAB")
1^7
"RTN","GMPTABC")
1^8
"RTN","GMPTAL")
1^9
"RTN","GMPTAL2")
1^10
"RTN","GMPTALK")
1^11
"RTN","GMPTAM")
1^12
"RTN","GMPTAR")
1^13
"RTN","GMPTAR2")
1^14
"RTN","GMPTAR3")
1^15
"RTN","GMPTAR4")
1^16
"RTN","GMPTAR5")
1^17
"RTN","GMPTAR6")
1^18
"RTN","GMPTAR7")
1^19
"RTN","GMPTAS")
1^20
"RTN","GMPTAS2")
1^21
"RTN","GMPTAS3")
1^22
"RTN","GMPTAS4")
1^23
"RTN","GMPTAS5")
1^24
"RTN","GMPTAS6")
1^25
"RTN","GMPTAS7")
1^26
"RTN","GMPTASC")
1^27
"RTN","GMPTASO")
1^28
"RTN","GMPTDCC")
1^29
"RTN","GMPTDCCC")
1^30
"RTN","GMPTDCCS")
1^31
"RTN","GMPTDCX")
1^32
"RTN","GMPTDCXS")
1^33
"RTN","GMPTDD1")
1^34
"RTN","GMPTDD2")
1^35
"RTN","GMPTDD3")
1^36
"RTN","GMPTDD4")
1^37
"RTN","GMPTDDIS")
1^38
"RTN","GMPTDDS")
1^39
"RTN","GMPTDDSD")
1^40
"RTN","GMPTDDSP")
1^41
"RTN","GMPTDDSS")
1^42
"RTN","GMPTDDT1")
1^43
"RTN","GMPTDDT2")
1^44
"RTN","GMPTDDT3")
1^45
"RTN","GMPTDDT4")
1^46
"RTN","GMPTDDTC")
1^47
"RTN","GMPTDDTD")
1^48
"RTN","GMPTDDTF")
1^49
"RTN","GMPTDDTV")
1^50
"RTN","GMPTDFL")
1^51
"RTN","GMPTDFLC")
1^52
"RTN","GMPTDFLS")
1^53
"RTN","GMPTDFLT")
1^54
"RTN","GMPTDFN")
1^55
"RTN","GMPTDFN2")
1^56
"RTN","GMPTDFSB")
1^57
"RTN","GMPTDFSE")
1^58
"RTN","GMPTDFSI")
1^59
"RTN","GMPTDFSO")
1^60
"RTN","GMPTDFSS")
1^61
"RTN","GMPTDFST")
1^62
"RTN","GMPTDGRP")
1^63
"RTN","GMPTDIC1")
1^64
"RTN","GMPTDIC2")
1^65
"RTN","GMPTDIC3")
1^66
"RTN","GMPTDIC4")
1^67
"RTN","GMPTDIC5")
1^68
"RTN","GMPTDISP")
1^69
"RTN","GMPTDLIM")
1^70
"RTN","GMPTDM")
1^71
"RTN","GMPTDM2")
1^72
"RTN","GMPTDM3")
1^73
"RTN","GMPTDM4")
1^74
"RTN","GMPTDMG")
1^75
"RTN","GMPTDMGO")
1^76
"RTN","GMPTDMGR")
1^77
"RTN","GMPTDMGT")
1^78
"RTN","GMPTDMGU")
1^79
"RTN","GMPTDMGV")
1^80
"RTN","GMPTDOVR")
1^81
"RTN","GMPTDSV")
1^82
"RTN","GMPTDTSK")
1^83
"RTN","GMPTDUSR")
1^84
"RTN","GMPTDVER")
1^85
"RTN","GMPTDVO")
1^86
"RTN","GMPTDVOC")
1^87
"RTN","GMPTDVOS")
1^88
"RTN","GMPTEDF1")
1^89
"RTN","GMPTEDF2")
1^90
"RTN","GMPTERF")
1^91
"RTN","GMPTERI")
1^92
"RTN","GMPTHLP")
1^93
"RTN","GMPTI001")
1^292
"RTN","GMPTI002")
1^293
"RTN","GMPTI003")
1^294
"RTN","GMPTI004")
1^295
"RTN","GMPTI005")
1^296
"RTN","GMPTI006")
1^297
"RTN","GMPTI007")
1^298
"RTN","GMPTI008")
1^299
"RTN","GMPTI009")
1^300
"RTN","GMPTI00A")
1^301
"RTN","GMPTI00B")
1^302
"RTN","GMPTI00C")
1^303
"RTN","GMPTI00D")
1^304
"RTN","GMPTI00E")
1^305
"RTN","GMPTI00F")
1^306
"RTN","GMPTI00G")
1^307
"RTN","GMPTI00H")
1^308
"RTN","GMPTI00I")
1^309
"RTN","GMPTI00J")
1^310
"RTN","GMPTI00K")
1^311
"RTN","GMPTI00L")
1^312
"RTN","GMPTI00M")
1^313
"RTN","GMPTI00N")
1^314
"RTN","GMPTI00O")
1^315
"RTN","GMPTI00P")
1^316
"RTN","GMPTI00Q")
1^317
"RTN","GMPTI00R")
1^318
"RTN","GMPTI00S")
1^319
"RTN","GMPTI00T")
1^320
"RTN","GMPTI00U")
1^321
"RTN","GMPTI00V")
1^322
"RTN","GMPTI00W")
1^323
"RTN","GMPTI00X")
1^324
"RTN","GMPTI00Y")
1^325
"RTN","GMPTI00Z")
1^326
"RTN","GMPTI010")
1^327
"RTN","GMPTI011")
1^328
"RTN","GMPTI012")
1^329
"RTN","GMPTI013")
1^330
"RTN","GMPTI014")
1^331
"RTN","GMPTI015")
1^332
"RTN","GMPTI016")
1^333
"RTN","GMPTI017")
1^334
"RTN","GMPTI018")
1^335
"RTN","GMPTI019")
1^336
"RTN","GMPTI01A")
1^337
"RTN","GMPTI01B")
1^338
"RTN","GMPTI01C")
1^339
"RTN","GMPTI01D")
1^340
"RTN","GMPTI01E")
1^341
"RTN","GMPTI01F")
1^342
"RTN","GMPTIENV")
1^343
"RTN","GMPTINI1")
1^344
"RTN","GMPTINI2")
1^345
"RTN","GMPTINI3")
1^346
"RTN","GMPTINI4")
1^347
"RTN","GMPTINI5")
1^348
"RTN","GMPTINIS")
1^349
"RTN","GMPTINIT")
1^350
"RTN","GMPTIPS2")
1^351
"RTN","GMPTIPST")
1^352
"RTN","GMPTLK")
1^155
"RTN","GMPTLK2")
1^156
"RTN","GMPTMTLU")
1^157
"RTN","GMPTNDX1")
1^158
"RTN","GMPTNDX2")
1^159
"RTN","GMPTNDX3")
1^160
"RTN","GMPTNDX4")
1^161
"RTN","GMPTNDX5")
1^162
"RTN","GMPTNDX6")
1^163
"RTN","GMPTNTEG")
1^164
"RTN","GMPTOLKN")
1^165
"RTN","GMPTPRNT")
1^166
"RTN","GMPTSC")
1^167
"RTN","GMPTSC2")
1^168
"RTN","GMPTSC3")
1^169
"RTN","GMPTSEND")
1^170
"RTN","GMPTSET")
0^358^B97029
"RTN","GMPTSET",1,0)
GMPTSET ; SLC/KER Setup Appl/User Defaults for Look-up ; 05-15-96
"RTN","GMPTSET",2,0)
 ;;2.0T2;LEXICON UTILITY;;Aug 15, 1996
"RTN","GMPTSET",3,0)
 ;
"RTN","GMPTSET",4,0)
 ; Replaces Clinical Lexicon Utility v 1.0 GMPTSET and re-directs
"RTN","GMPTSET",5,0)
 ; call to Lexicon Utility v 2.0 LEXSET
"RTN","GMPTSET",6,0)
 Q
"RTN","GMPTSET",7,0)
CONFIG(LEXNS,LEXSS) ;  Redirect
"RTN","GMPTSET",8,0)
 D CONFIG^LEXSET($G(LEXNS),$G(LEXSS)) Q
"RTN","GMPTSET2")
1^172
"RTN","GMPTSET3")
1^173
"RTN","GMPTSET4")
1^174
"RTN","GMPTSET5")
1^175
"RTN","GMPTU")
0^357^B142417
"RTN","GMPTU",1,0)
GMPTU ; SLC/KER Miscellaneous Lexicon Utilities      ; 05-15-96
"RTN","GMPTU",2,0)
 ;;2.0T2;LEXICON UTILITY;;Aug 15, 1996
"RTN","GMPTU",3,0)
 ;
"RTN","GMPTU",4,0)
 ; Replaces Clinical Lexicon Utility v 1.0 GMPTU and re-directs
"RTN","GMPTU",5,0)
 ; call to Lexicon Utility v 2.0 LEXU
"RTN","GMPTU",6,0)
 ; 
"RTN","GMPTU",7,0)
ICDONE(LEX) ; Return one ICD code for an expression - LEX=IEN
"RTN","GMPTU",8,0)
 S LEX=$$ICDONE^LEXU(+($G(LEX))) Q LEX
"RTN","GMPTU",9,0)
ICD(LEX) ; Return all ICD codes for an expression - LEX=IEN
"RTN","GMPTU",10,0)
 S LEX=$$ICD^LEXU(+($G(LEX))) Q LEX
"RTN","LEXA")
0^177^B18021273
"RTN","LEXA",1,0)
LEXA ; ISL Look-up (Silent)                     ; 09-23-96
"RTN","LEXA",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXA",3,0)
 ;
"RTN","LEXA",4,0)
 ; Look-up  D LOOK^LEXA(LEXX,LEXAP,LEXLL,LEXSUB)
"RTN","LEXA",5,0)
 ;
"RTN","LEXA",6,0)
 ;         LEXX    user input         LEXAP     application,
"RTN","LEXA",7,0)
 ;         LEXLL   list length        LEXSUB    Mode/Subset
"RTN","LEXA",8,0)
 ;
"RTN","LEXA",9,0)
 ; 1.  Search parameters ^TMP("LEXSCH",$J,PAR)=VALUE
"RTN","LEXA",10,0)
 ; 2.  Expressions found ^TMP("LEXFND",$J,FQ,IEN)=DT
"RTN","LEXA",11,0)
 ; 3.  Review List       ^TMP("LEXHITS",$J,#)=IEN^DT
"RTN","LEXA",12,0)
 ; 4.  Display List      LEX("LIST",#)
"RTN","LEXA",13,0)
 ;
"RTN","LEXA",14,0)
 ;         LEX("LIST",0)=LAST^TOTAL
"RTN","LEXA",15,0)
 ;         LEX("LIST",#)=IEN^DT
"RTN","LEXA",16,0)
 ;
"RTN","LEXA",17,0)
LOOK(LEXX,LEXAP,LEXLL,LEXSUB) ; Search for LEXX
"RTN","LEXA",18,0)
 K DIERR,LEX,^TMP("LEXFND",$J),^TMP("LEXHIT",$J),^TMP("LEXSCH",$J)
"RTN","LEXA",19,0)
 I $D(DIC(0)) S:DIC(0)["L" DIC(0)=$P(DIC(0),"L",1)_$P(DIC(0),"L",2) S:DIC(0)["I" DIC(0)=$P(DIC(0),"I",1)_$P(DIC(0),"I",2)
"RTN","LEXA",20,0)
 S LEXQ=1,LEXX=$G(LEXX) I LEXX=""!(LEXX["^") D EN^LEXAR("^") K LEXAP G EXIT
"RTN","LEXA",21,0)
 S LEXAP=$$UP^XLFSTR($G(LEXAP)),LEXLL=+($G(LEXLL)),LEXSUB=$G(LEXSUB)
"RTN","LEXA",22,0)
 S ^TMP("LEXSCH",$J,"APP",0)=+($$AP^LEXDFN2($G(LEXAP)))
"RTN","LEXA",23,0)
 S:^TMP("LEXSCH",$J,"APP",0)=0 ^TMP("LEXSCH",$J,"APP",0)=1
"RTN","LEXA",24,0)
 S:LEXSUB="" LEXSUB=^TMP("LEXSCH",$J,"APP",0)
"RTN","LEXA",25,0)
 S:$L($G(DIC("S"))) ^TMP("LEXSCH",$J,"FIL",0)=DIC("S")
"RTN","LEXA",26,0)
 S:LEXLL=0 LEXLL=5 S ^TMP("LEXSCH",$J,"LEN",0)=LEXLL
"RTN","LEXA",27,0)
X ; Search for X
"RTN","LEXA",28,0)
 I '$L($G(LEXX)) D  G EXIT
"RTN","LEXA",29,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXA",30,0)
 . S LEX("ERR",LEX("ERR",0))="User input LEXX missing or invalid"
"RTN","LEXA",31,0)
APP ; Application
"RTN","LEXA",32,0)
 I +($G(^TMP("LEXSCH",$J,"APP",0)))=0!('$D(^LEXT(757.2,+($G(^TMP("LEXSCH",$J,"APP",0))),0))) D  G EXIT
"RTN","LEXA",33,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXA",34,0)
 . S LEX("ERR",LEX("ERR",0))="Calling application identification LEXAP missing or invalid"
"RTN","LEXA",35,0)
USR ; User
"RTN","LEXA",36,0)
 I +($G(DUZ))=0!('$D(^VA(200,+($G(DUZ)),0))) D  G EXIT
"RTN","LEXA",37,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXA",38,0)
 . S LEX("ERR",LEX("ERR",0))="User identification DUZ missing or invalid"
"RTN","LEXA",39,0)
 N LEXFND S LEXFND=0 S ^TMP("LEXSCH",$J,"USR",0)=+($G(DUZ))
"RTN","LEXA",40,0)
 S ^TMP("LEXSCH",$J,"NAR",0)=LEXX
"RTN","LEXA",41,0)
 S ^TMP("LEXSCH",$J,"SCH",0)=$$UP^XLFSTR(LEXX)
"RTN","LEXA",42,0)
DEF ; Defaults                     CONFIG^LEXSET
"RTN","LEXA",43,0)
 N LEXFIL,LEXDSP,LEXFILR S:$L($G(DIC("S"))) LEXFIL=DIC("S")
"RTN","LEXA",44,0)
 S:'$L($G(LEXFIL))&($L($G(^TMP("LEXSCH",$J,"FIL",0)))) LEXFIL=^TMP("LEXSCH",$J,"FIL",0)
"RTN","LEXA",45,0)
 N LEXNS,LEXSS S LEXNS=$$NS^LEXDFN2(LEXAP)
"RTN","LEXA",46,0)
 S LEXSS=$$MD^LEXDFN2(LEXSUB)
"RTN","LEXA",47,0)
 I +($G(^TMP("LEXSCH",$J,"ADF",0)))=0 D CONFIG^LEXSET(LEXNS,LEXSS)
"RTN","LEXA",48,0)
 S:'$L($G(LEXFIL))&($L($G(^TMP("LEXSCH",$J,"FIL",0)))) LEXFIL=^TMP("LEXSCH",$J,"FIL",0)
"RTN","LEXA",49,0)
 S:$L($G(LEXFIL)) LEXFIL=$$FIL(LEXFIL) S LEXFIL=$G(LEXFIL)
"RTN","LEXA",50,0)
 K ^TMP("LEXFND",$J),^TMP("LEXHIT",$J) D MAN I $D(LEX("ERR")) G EXIT
"RTN","LEXA",51,0)
 D SETUP^LEXAM($G(^TMP("LEXSCH",$J,"VOC",0))) I $D(LEX("ERR")) G EXIT
"RTN","LEXA",52,0)
LK ; Look-up
"RTN","LEXA",53,0)
IEN ; Look-up by IEN               SET^LEXAR4
"RTN","LEXA",54,0)
 I ^TMP("LEXSCH",$J,"NAR",0)?1"`"1N.N D  G:$D(LEX("SEL")) EXIT
"RTN","LEXA",55,0)
 . N LEXE,LEXUN S LEXE=+($E(^TMP("LEXSCH",$J,"NAR",0),2,$L(^TMP("LEXSCH",$J,"NAR",0)))) Q:LEXE=0
"RTN","LEXA",56,0)
 . S LEXUN=+($G(^TMP("LEXSCH",$J,"UNR",0)))
"RTN","LEXA",57,0)
 . Q:'$D(^LEX(757.01,LEXE,0))  D SET^LEXAR4(LEXE)
"RTN","LEXA",58,0)
 . S:LEXUN>0&($L($G(^TMP("LEXSCH",$J,"NAR",0)))) LEX("NAR")=$G(^TMP("LEXSCH",$J,"NAR",0))
"RTN","LEXA",59,0)
 . S:LEXUN>0&($L($G(^LEX(757.01,+($G(LEXE)),0)))) LEX("NAR")=$G(^LEX(757.01,+($G(LEXE)),0))
"RTN","LEXA",60,0)
SCT ; Look-up by Shortcuts         EN^LEXASC  
"RTN","LEXA",61,0)
 S:+($G(^TMP("LEXSCH",$J,"SCT",0)))>0&($D(^LEX(757.41,+($G(^TMP("LEXSCH",$J,"SCT",0)))))) LEXFND=$$EN^LEXASC(^TMP("LEXSCH",$J,"SCH",0),^TMP("LEXSCH",$J,"SCT",0))
"RTN","LEXA",62,0)
 G:+(LEXFND) EXIT
"RTN","LEXA",63,0)
CODE ; Look-up by Code              EN^LEXABC
"RTN","LEXA",64,0)
 S LEXFND=$$EN^LEXABC(^TMP("LEXSCH",$J,"SCH",0))
"RTN","LEXA",65,0)
 G:+(LEXFND) EXIT
"RTN","LEXA",66,0)
EXACT ; Look-up Exact Match          EN^LEXAB
"RTN","LEXA",67,0)
 S LEXFND=$$EN^LEXAB(^TMP("LEXSCH",$J,"SCH",0))
"RTN","LEXA",68,0)
 K:'(+(LEXFND)) ^TMP("LEXFND",$J) K ^TMP("LEXHIT",$J)
"RTN","LEXA",69,0)
KEYWRD ; Look-up by word              EN^LEXALK
"RTN","LEXA",70,0)
 D EN^LEXALK
"RTN","LEXA",71,0)
EXIT ; Clean-up and quit
"RTN","LEXA",72,0)
 K LEXQ,LEXDICS,LEXFIL,LEXFILR,LEXDSP,LEXSHOW,LEXSHCT,LEXSUB
"RTN","LEXA",73,0)
 K LEXOVR,LEXUN,LEXLKFL,LEXLKGL,LEXLKIX,LEXLKSH,LEXTKNS,LEXTKN
"RTN","LEXA",74,0)
 K LEXI D:$D(LEX("ERR")) CLN Q
"RTN","LEXA",75,0)
CLN ; Clean
"RTN","LEXA",76,0)
 K LEXQ,LEXTKNS,LEXTKN,LEXI,^TMP("LEXSCH",$J),^TMP("LEXHIT",$J),^TMP("LEXFND",$J) Q
"RTN","LEXA",77,0)
CLR ; Clear all (FOR TESTING ONLY)
"RTN","LEXA",78,0)
 K LEX,LEXQ,LEXTKNS,LEXTKN,LEXI,^TMP("LEXSCH"),^TMP("LEXHIT"),^TMP("LEXFND") Q
"RTN","LEXA",79,0)
MAN ; Mandatory variables
"RTN","LEXA",80,0)
 N LEXERR F LEXERR="SCH","VOC","APP","USR" D
"RTN","LEXA",81,0)
 . I '$L($G(^TMP("LEXSCH",$J,LEXERR,0))) D
"RTN","LEXA",82,0)
 . . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXA",83,0)
 . . S LEX("ERR",LEX("ERR",0))="Mandatory variable ^TMP(""LEXSCH"",$J,"""_LEXERR_""",0) missing or invalid"
"RTN","LEXA",84,0)
 Q
"RTN","LEXA",85,0)
FIL(X) ; Validate Filter
"RTN","LEXA",86,0)
 S X=$G(X) Q:'$L(X) X
"RTN","LEXA",87,0)
 D ^DIM S:'$D(X) X="" Q X
"RTN","LEXA",88,0)
 ;
"RTN","LEXA",89,0)
 ; D INFO^LEXA(IEN)
"RTN","LEXA",90,0)
 ;
"RTN","LEXA",91,0)
 ;    IEN   Internal Entry Number in file 757.01
"RTN","LEXA",92,0)
 ;
"RTN","LEXA",93,0)
 ; Returns array LEX("SEL") or null
"RTN","LEXA",94,0)
 ;
"RTN","LEXA",95,0)
 ;    LEX("SEL","EXP")   Expressions Concepts/Synonyms/Variants
"RTN","LEXA",96,0)
 ;    LEX("SEL","SIG")   Expression definition
"RTN","LEXA",97,0)
 ;    LEX("SEL","SRC")   Classification Codes
"RTN","LEXA",98,0)
 ;    LEX("SEL"."STY")   Semantic Class/Semantic Types
"RTN","LEXA",99,0)
 ;    LEX("SEL","VAS")   VA Classification Sources
"RTN","LEXA",100,0)
 ;
"RTN","LEXA",101,0)
INFO(X) ;
"RTN","LEXA",102,0)
 K LEX("SEL") S X=+($G(X)) Q:X=0  Q:'$D(^LEX(757.01,X,0))
"RTN","LEXA",103,0)
 D SET^LEXAR4(X)
"RTN","LEXA",104,0)
 Q
"RTN","LEXA1")
0^178^B21427233
"RTN","LEXA1",1,0)
LEXA1 ; ISL Look-up (Loud)                       ; 09-23-96
"RTN","LEXA1",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXA1",3,0)
 ;
"RTN","LEXA1",4,0)
EN ; Initialize
"RTN","LEXA1",5,0)
 D:$D(XRTL) T0^%ZOSV K LEX S LEXQ=0
"RTN","LEXA1",6,0)
 ;-------------------------------------------------------------
"RTN","LEXA1",7,0)
 ;
"RTN","LEXA1",8,0)
 ;
"RTN","LEXA1",9,0)
 ; LEXSUB  Special variable from version 1.0 specifying the
"RTN","LEXA1",10,0)
 ;         vocabulary subset to use during the search.  It is
"RTN","LEXA1",11,0)
 ;         a three character mnemonic taken from the Subset
"RTN","LEXA1",12,0)
 ;         Definition file #757.2.  The default is "WRD"
"RTN","LEXA1",13,0)
 ;
"RTN","LEXA1",14,0)
 S:'$L($G(LEXSUB)) LEXSUB="WRD"
"RTN","LEXA1",15,0)
 ;
"RTN","LEXA1",16,0)
 ; LEXAP   Special variable from version 1.0 specifying the
"RTN","LEXA1",17,0)
 ;         application using the Lexicon.  It is a pointer
"RTN","LEXA1",18,0)
 ;         value to the Subset Definition file #757.2.
"RTN","LEXA1",19,0)
 ;         The default is 1 (Lexicon)
"RTN","LEXA1",20,0)
 ;
"RTN","LEXA1",21,0)
 S:'$L($G(LEXAP))&($L($G(^TMP("LEXSCH",$J,"APP",0)))) LEXAP=^TMP("LEXSCH",$J,"APP",0)
"RTN","LEXA1",22,0)
 S:'$L($G(LEXAP)) LEXAP=1
"RTN","LEXA1",23,0)
 ;
"RTN","LEXA1",24,0)
 ; LEXLL  Special variable (new) specifying the length of the
"RTN","LEXA1",25,0)
 ;        displayable list the user is to select from.  Default
"RTN","LEXA1",26,0)
 ;        is 5 (display 5 at a time until the entire list has 
"RTN","LEXA1",27,0)
 ;        been reviewed)
"RTN","LEXA1",28,0)
 ;
"RTN","LEXA1",29,0)
 S:'$L($G(LEXLL)) LEXLL=5
"RTN","LEXA1",30,0)
 ;
"RTN","LEXA1",31,0)
 ; Check the DIC variables new LEXUR "user response"
"RTN","LEXA1",32,0)
 N LEXDICA,LEXDICB D CHK N LEXUR
"RTN","LEXA1",33,0)
 ;
"RTN","LEXA1",34,0)
 ; Save the value of X if "Ask" is not specified in DIC(0)
"RTN","LEXA1",35,0)
 ;
"RTN","LEXA1",36,0)
 I DIC(0)'["A",$L($G(X)) S LEXSAVE=X K X
"RTN","LEXA1",37,0)
 ;
"RTN","LEXA1",38,0)
 ; Save the prompt
"RTN","LEXA1",39,0)
 ;
"RTN","LEXA1",40,0)
 I $L($G(DIC("A"))) S LEXDICA=DIC("A")
"RTN","LEXA1",41,0)
 ;
"RTN","LEXA1",42,0)
 ; Continue to lookup until the dialog with the application 
"RTN","LEXA1",43,0)
 ; ends.  If there is nothing to lookup (X="") or an uparrow
"RTN","LEXA1",44,0)
 ; is detected, the Lexicon shuts down killing LEX.
"RTN","LEXA1",45,0)
 ;
"RTN","LEXA1",46,0)
 F  D LK Q:'$D(LEX)!($D(LEX("SEL")))
"RTN","LEXA1",47,0)
 ;
"RTN","LEXA1",48,0)
 G EXIT
"RTN","LEXA1",49,0)
 ;-------------------------------------------------------------
"RTN","LEXA1",50,0)
LK ; Start Look-up
"RTN","LEXA1",51,0)
 ; X not provided
"RTN","LEXA1",52,0)
 D:'$D(LEXSAVE) ASK
"RTN","LEXA1",53,0)
 ; X provided
"RTN","LEXA1",54,0)
 S:$D(LEXSAVE) X=LEXSAVE K LEXSAVE
"RTN","LEXA1",55,0)
 ; X was null with a default provided
"RTN","LEXA1",56,0)
 S:$D(DIC("B"))&($G(X)="") X=DIC("B")
"RTN","LEXA1",57,0)
 ; Lookup X
"RTN","LEXA1",58,0)
 W:$L(X) !,"Searching for ",X D LOOK^LEXA(X,LEXAP,LEXLL)
"RTN","LEXA1",59,0)
 ;
"RTN","LEXA1",60,0)
 ; If X was found begin user selection
"RTN","LEXA1",61,0)
 ;
"RTN","LEXA1",62,0)
 ; Continue to display the list until the dialog with the
"RTN","LEXA1",63,0)
 ; user is terminated.  The dialog with the user is 
"RTN","LEXA1",64,0)
 ; considered to be terminated if the selection list does
"RTN","LEXA1",65,0)
 ; not exist '$D(LEX("LIST"))
"RTN","LEXA1",66,0)
 ; 
"RTN","LEXA1",67,0)
 I $D(LEX("LIST")) F  Q:+($G(LEX))=0  D SELECT^LEXA2
"RTN","LEXA1",68,0)
 I '$D(LEX("SEL")),$D(^TMP("LEXSCH",$J)) D EN^LEXA4
"RTN","LEXA1",69,0)
 K DIC("B")
"RTN","LEXA1",70,0)
 Q
"RTN","LEXA1",71,0)
EXIT ; Kill variables
"RTN","LEXA1",72,0)
 S:$D(XRT0) XRTN=$T(+0) D:$D(XRT0) T1^%ZOSV
"RTN","LEXA1",73,0)
 S:$L($G(LEXDICA)) DIC("A")=LEXDICA S:$L($G(LEXDICB)) DIC("B")=LEXDICB
"RTN","LEXA1",74,0)
 ; Set Y, Y(0,0) Y(1) from LEX("SEL")
"RTN","LEXA1",75,0)
 S:'$D(LEX("SEL","EXP",1)) Y=-1 K Y(1)
"RTN","LEXA1",76,0)
 I $D(LEX("SEL","EXP",1)) S Y=LEX("SEL","EXP",1) D Y1,SSBR S:DIC(0)["Z" Y(0,0)=^LEX(757.01,+(LEX("SEL","EXP",1)),0)
"RTN","LEXA1",77,0)
 K LEX,LEXSUB,LEXAP,LEXLL
"RTN","LEXA1",78,0)
 Q
"RTN","LEXA1",79,0)
Y1 ; ICD in Y(1)
"RTN","LEXA1",80,0)
 N LEXVAS S LEXVAS=0,Y(1)=""
"RTN","LEXA1",81,0)
 F  S LEXVAS=$O(LEX("SEL","VAS","B",80,LEXVAS)) Q:+LEXVAS=0!(Y(1)'="")  D
"RTN","LEXA1",82,0)
 . S Y(1)=$P($G(LEX("SEL","VAS",LEXVAS)),"^",3)
"RTN","LEXA1",83,0)
 K:Y(1)="" Y(1)
"RTN","LEXA1",84,0)
 Q
"RTN","LEXA1",85,0)
ASK ; Get user input
"RTN","LEXA1",86,0)
 N DIR,DIRUT,DIROUT S:$L($G(LEXDICA)) DIC("A")=LEXDICA
"RTN","LEXA1",87,0)
 S DIR("A")=DIC("A") W:'$L($G(X))&('$L($G(LEXDICB))) !
"RTN","LEXA1",88,0)
 I '$L($G(X)),$L($G(LEXDICB)) S DIR("B")=LEXDICB
"RTN","LEXA1",89,0)
 S DIR("?")="Enter a ""free text"" description of a clinical concept or an ICD code."
"RTN","LEXA1",90,0)
 S DIR("??")="^D INPHLP^LEXA1" N Y S DIR(0)="FAO^0:245" K X
"RTN","LEXA1",91,0)
 D ^DIR
"RTN","LEXA1",92,0)
 K DIC("B") I X=" " D RSBR I X'=" " W " ",X
"RTN","LEXA1",93,0)
 F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEXA1",94,0)
 W:$D(DTOUT) !,"Try later.",! S:$D(DTOUT) X=""
"RTN","LEXA1",95,0)
 S:X[U DUOUT=1 K DIRUT,DIROUT Q
"RTN","LEXA1",96,0)
INPHLP ; Look-up help
"RTN","LEXA1",97,0)
 W !!,"Enter a ""free text"" description of a clinical concept or an ICD code."
"RTN","LEXA1",98,0)
 W !,"Best results occur using either one full word or two/three partial words"
"RTN","LEXA1",99,0)
 W !,"without a suffix (i.e., ""DIABETES"",""DIAB MELL"",""DIAB MELL INSUL"") or"
"RTN","LEXA1",100,0)
 W !,"or an ICD code (i.e. 250.0)"
"RTN","LEXA1",101,0)
 Q
"RTN","LEXA1",102,0)
CLR K ^TMP("LEXSCH"),^TMP("LEXHIT"),^TMP("LEXFND") Q
"RTN","LEXA1",103,0)
CHK ; Check Fileman look-up variables
"RTN","LEXA1",104,0)
 K DIC("DR"),DIC("P"),DIC("V"),DLAYGO,DINUM
"RTN","LEXA1",105,0)
 S:$L($G(X)) LEXSAVE=X S:$L($G(DIC("B"))) LEXDICB=DIC("B") K DIC("B")
"RTN","LEXA1",106,0)
 I $L($G(DIC(0))) D
"RTN","LEXA1",107,0)
 . F  Q:DIC(0)'["L"  S DIC(0)=$P(DIC(0),"L",1)_$P(DIC(0),"L",2)
"RTN","LEXA1",108,0)
 . F  Q:DIC(0)'["I"  S DIC(0)=$P(DIC(0),"I",1)_$P(DIC(0),"I",2)
"RTN","LEXA1",109,0)
 S:'$L($G(DIC(0))) DIC(0)="QEAMF" S:'$L($G(DIC)) DIC="^LEX(757.01,"
"RTN","LEXA1",110,0)
 S:'$L($G(DIC("A"))) DIC("A")="Enter Term/Concept:  "
"RTN","LEXA1",111,0)
 S LEXDICA=DIC("A")
"RTN","LEXA1",112,0)
 Q
"RTN","LEXA1",113,0)
SSBR ; Store data for Space Bar Return
"RTN","LEXA1",114,0)
 Q:'$L($G(DUZ))  Q:'$L($G(DIC))  Q:$G(DIC(0))'["F"
"RTN","LEXA1",115,0)
 I +Y>0,(DIC(0)["F") D
"RTN","LEXA1",116,0)
 . I DIC["757.01," D  Q
"RTN","LEXA1",117,0)
 . . I +Y>1 S ^DISV(DUZ,DIC)=+Y Q
"RTN","LEXA1",118,0)
 . . I +Y=1 S:$L($G(X)) ^DISV(DUZ,DIC)=+Y_"^"_X S:'$L($G(X)) ^DISV(DUZ,DIC)=+Y
"RTN","LEXA1",119,0)
 . S:+Y>0 ^DISV(DUZ,DIC)=+Y I +Y=1 S:$L($G(LEX("NAR"))) ^DISV(DUZ,DIC)=+Y_"^"_LEX("NAR") S:'$L($G(LEX("NAR"))) ^DISV(DUZ,DIC)=+Y
"RTN","LEXA1",120,0)
 Q
"RTN","LEXA1",121,0)
RSBR ; Retrieve on Space Bar Return
"RTN","LEXA1",122,0)
 Q:'$L($G(DUZ))  Q:'$L($G(DIC))  Q:$G(DIC(0))'["F"  Q:$E($G(X),1)'=" "
"RTN","LEXA1",123,0)
 I DIC["757.01," D  Q
"RTN","LEXA1",124,0)
 . I +($G(^DISV(DUZ,"^LEX(757.01,")))>0 D
"RTN","LEXA1",125,0)
 . . N LEXX S LEXX=$G(^DISV(DUZ,"^LEX(757.01,"))
"RTN","LEXA1",126,0)
 . . I +LEXX=1,$L($P(LEXX,"^",2)) S X=$P(LEXX,"^",2) Q
"RTN","LEXA1",127,0)
 . . S X=@("^LEX(757.01,"_+LEXX_",0)")
"RTN","LEXA1",128,0)
 I +($G(^DISV(DUZ,DIC))) S X=@(DIC_+($G(^DISV(DUZ,DIC)))_",0)")
"RTN","LEXA1",129,0)
 Q
"RTN","LEXA2")
0^179^B508535
"RTN","LEXA2",1,0)
LEXA2 ; ISL Look-up (Loud) Select                ; 09-23-96
"RTN","LEXA2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXA2",3,0)
 ;
"RTN","LEXA2",4,0)
SELECT ; Select from List
"RTN","LEXA2",5,0)
 ; Display Help                 DH^LEXA3
"RTN","LEXA2",6,0)
 D DH^LEXA3
"RTN","LEXA2",7,0)
 ; Display List                 DL^LEXA3
"RTN","LEXA2",8,0)
 D DL^LEXA3
"RTN","LEXA2",9,0)
 ; Display Prompt               DP^LEXA3
"RTN","LEXA2",10,0)
 D DP^LEXA3
"RTN","LEXA2",11,0)
 ; Ask user for selection       ASK^LEXA2
"RTN","LEXA2",12,0)
 D ASK
"RTN","LEXA2",13,0)
 ; Interpret user response      EN^LEXAR(user response)
"RTN","LEXA2",14,0)
 D EN^LEXAR(LEXUR)
"RTN","LEXA2",15,0)
 Q
"RTN","LEXA2",16,0)
ASK ; Get users response
"RTN","LEXA2",17,0)
 R LEXUR:300 I '$T S LEXUR="^"
"RTN","LEXA2",18,0)
 I $L($G(DIC("B"))),LEXUR="" D 
"RTN","LEXA2",19,0)
 . S LEXUR=DIC("B") W " ",LEXUR
"RTN","LEXA2",20,0)
 . I +($G(LEX))=1,$D(LEX("LIST",1)) D
"RTN","LEXA2",21,0)
 . . W "  ",$P(LEX("LIST",1),"^",2) S LEXUR=1
"RTN","LEXA2",22,0)
 . I +LEXUR K DIC("B")
"RTN","LEXA2",23,0)
 . K DIC("B")
"RTN","LEXA2",24,0)
 Q
"RTN","LEXA3")
0^180^B7664283
"RTN","LEXA3",1,0)
LEXA3 ; ISL Look-up (Loud) Functions             ; 09-23-96
"RTN","LEXA3",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXA3",3,0)
 ;
"RTN","LEXA3",4,0)
DH ; Display Help                 LEX("HLP")
"RTN","LEXA3",5,0)
 Q:'$D(LEX("HLP"))  N LEXI S LEXI=0
"RTN","LEXA3",6,0)
 W ! F  S LEXI=$O(LEX("HLP",LEXI)) Q:+LEXI=0  D
"RTN","LEXA3",7,0)
 . W !,"  ",LEX("HLP",LEXI)
"RTN","LEXA3",8,0)
 Q
"RTN","LEXA3",9,0)
DL ; Display List                 LEX("LIST")
"RTN","LEXA3",10,0)
 I +($G(LEX))=1,$D(LEX("LIST",1)) D ONE Q
"RTN","LEXA3",11,0)
 D MULTI Q
"RTN","LEXA3",12,0)
DP ; Display Prompt      Select 1-LEX("MAX") or Ok?
"RTN","LEXA3",13,0)
 N LEXPRMT
"RTN","LEXA3",14,0)
 I +($G(LEX))>1 D
"RTN","LEXA3",15,0)
 . S LEXPRMT="Type ""^"" to STOP or Select:  "
"RTN","LEXA3",16,0)
 . S:+($G(LEX("MAX")))>0 LEXPRMT="Type ""^"" to STOP or Select 1-"_LEX("MAX")_":  "
"RTN","LEXA3",17,0)
 I +($G(LEX))=1 S LEXPRMT="    Ok?  YES//  ",DIC("B")="YES" W:+($G(LEX))>1 !
"RTN","LEXA3",18,0)
 W !!,LEXPRMT Q
"RTN","LEXA3",19,0)
 ;
"RTN","LEXA3",20,0)
MULTI ; Multiple entries
"RTN","LEXA3",21,0)
 N LEXI,LEXT,LEXL,LEXP S LEXI=0,LEXL=70,LEXP=7 D MATCH
"RTN","LEXA3",22,0)
 W ! F  S LEXI=$O(LEX("LIST",LEXI)) Q:+LEXI=0  D
"RTN","LEXA3",23,0)
 . W !,$J(LEXI,4),?6
"RTN","LEXA3",24,0)
 . N Y S Y=+($G(LEX("LIST",LEXI))),Y(0,0)=$G(^LEX(757.01,+Y,0))
"RTN","LEXA3",25,0)
 . I $D(DIC("W")),DIC("W")'="" X DIC("W") Q
"RTN","LEXA3",26,0)
 . I $D(DIC("W")),DIC("W")="" W Y(0,0) Q
"RTN","LEXA3",27,0)
 . S LEXT=$P(LEX("LIST",LEXI),"^",2)
"RTN","LEXA3",28,0)
 . W:$L(LEXT)<(LEXL+1) ?LEXP,LEXT D:$L(LEXT)>LEXL LONG
"RTN","LEXA3",29,0)
 Q
"RTN","LEXA3",30,0)
MATCH ; Matches found
"RTN","LEXA3",31,0)
 I $D(LEX("MAT")) W !!,LEX("MAT") K LEX("MAT")
"RTN","LEXA3",32,0)
 Q
"RTN","LEXA3",33,0)
ONE ; One entry
"RTN","LEXA3",34,0)
 N LEXI,LEXT,LEXL,LEXP
"RTN","LEXA3",35,0)
 S LEXI=0,LEXL=75,LEXP=2,LEXT=$P(LEX("LIST",1),"^",2) W !!
"RTN","LEXA3",36,0)
 N Y S Y=+($G(LEX("LIST",LEXI))),Y(0,0)=$G(^LEX(757.01,+Y,0))
"RTN","LEXA3",37,0)
 I $D(DIC("W")),DIC("W")'="" W ?LEXP X DIC("W") Q
"RTN","LEXA3",38,0)
 I $D(DIC("W")),DIC("W")="" W ?LEXP,Y(0,0) Q
"RTN","LEXA3",39,0)
 I '$D(DIC("W")) W:$L(LEXT)<(LEXL+1) ?LEXP,LEXT D:$L(LEXT)>LEXL LONG
"RTN","LEXA3",40,0)
 Q
"RTN","LEXA3",41,0)
LONG ; Handle a long string
"RTN","LEXA3",42,0)
 N LEXOK,LEXCHR,LEXPSN,LEXSTO,LEXREM,LEXLNN,LEXOLD
"RTN","LEXA3",43,0)
 S LEXLNN=0,LEXOLD=LEXT
"RTN","LEXA3",44,0)
 F  Q:$L(LEXT)<(LEXL+1)  D PARSE Q:$L(LEXT)<(LEXL+1)
"RTN","LEXA3",45,0)
 S LEXLNN=LEXLNN+1
"RTN","LEXA3",46,0)
 W:LEXLNN>1 ! W ?LEXP,LEXT
"RTN","LEXA3",47,0)
 Q
"RTN","LEXA3",48,0)
PARSE ; Parse string
"RTN","LEXA3",49,0)
 S LEXOK=0,LEXCHR=""
"RTN","LEXA3",50,0)
 F LEXPSN=LEXL:-1:0 Q:+LEXOK=1  D  Q:+LEXOK=1
"RTN","LEXA3",51,0)
 . I $E(LEXT,LEXPSN)=" " S LEXCHR=" ",LEXOK=1 Q
"RTN","LEXA3",52,0)
 . I $E(LEXT,LEXPSN)="," S LEXCHR=",",LEXOK=1 Q
"RTN","LEXA3",53,0)
 . I $E(LEXT,LEXPSN)="/" S LEXCHR="/",LEXOK=1 Q
"RTN","LEXA3",54,0)
 I LEXCHR=" " S LEXSTO=$E(LEXT,1,LEXPSN-1),LEXREM=$E(LEXT,LEXPSN+1,$L(LEXT))
"RTN","LEXA3",55,0)
 I LEXCHR="," S LEXSTO=$E(LEXT,1,LEXPSN),LEXREM=$E(LEXT,(LEXPSN+1),$L(LEXT)) S:$E(LEXREM,1)=" " LEXREM=$E(LEXREM,2,$L(LEXREM))
"RTN","LEXA3",56,0)
 I LEXCHR="/" S LEXSTO=$E(LEXT,1,LEXPSN),LEXREM=$E(LEXT,(LEXPSN+1),$L(LEXT)) S:$E(LEXREM,1)=" " LEXREM=$E(LEXREM,2,$L(LEXREM))
"RTN","LEXA3",57,0)
 S LEXT=LEXREM
"RTN","LEXA3",58,0)
 S LEXLNN=LEXLNN+1
"RTN","LEXA3",59,0)
 W:LEXLNN>1 ! W ?LEXP,LEXSTO
"RTN","LEXA3",60,0)
 Q
"RTN","LEXA4")
0^181^B7326911
"RTN","LEXA4",1,0)
LEXA4 ; ISL Look-up (Loud) Unresolved Narr       ; 09-23-96
"RTN","LEXA4",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXA4",3,0)
 ;
"RTN","LEXA4",4,0)
EN ; User input was not found
"RTN","LEXA4",5,0)
 S LEX("NAR")=$G(LEX("NAR"))
"RTN","LEXA4",6,0)
 S LEX("EXM")=$G(LEX("EXM"))
"RTN","LEXA4",7,0)
 S LEX("UNR")=+($G(^TMP("LEXSCH",$J,"UNR",0)))
"RTN","LEXA4",8,0)
 ; Comment out next 2 lines to allow for unresolved narratives
"RTN","LEXA4",9,0)
 ; after the user enters an up-arrow ("^")
"RTN","LEXA4",10,0)
 ;    S LEX("RES")=$G(^TMP("LEXSCH",$J,"RES",0))
"RTN","LEXA4",11,0)
 ;    I LEX("RES")["^" K LEX("RES"),LEX("NAR"),LEX("UNR") Q
"RTN","LEXA4",12,0)
 S LEX("RES")=$G(^TMP("LEXSCH",$J,"RES",0))
"RTN","LEXA4",13,0)
 I LEX("RES")["^" K LEX("RES"),LEX("NAR"),LEX("UNR") Q
"RTN","LEXA4",14,0)
 ; Quit if:
"RTN","LEXA4",15,0)
 ;     User Narrative is NULL   LEX("NAR")=""   or
"RTN","LEXA4",16,0)
 ;     Unresolved not allowed   ^TMP("LEXSCH",$J,"UNR",0)=0
"RTN","LEXA4",17,0)
 I $G(LEX("NAR"))=""!($G(LEX("UNR"))=0) D EN^LEXAR("QUIT") Q
"RTN","LEXA4",18,0)
 N LEXN S LEXN=$$USE(LEX("NAR"))
"RTN","LEXA4",19,0)
 I LEXN["^" D EN^LEXAR(LEXN) Q
"RTN","LEXA4",20,0)
 I +LEXN=1,LEX("UNR")=1 D  Q
"RTN","LEXA4",21,0)
 . I $L($G(LEX("NAR"))),'$L($G(LEX("EXM"))),$L($G(DIC)),$L($G(DUZ)) D
"RTN","LEXA4",22,0)
 . . S:+LEXN>0&($G(DIC(0))["F") ^DISV(DUZ,DIC)=LEXN_"^"_LEX("NAR")
"RTN","LEXA4",23,0)
 . . S:DIC(0)["Z" Y(0,0)=$G(^LEX(757.01,1,0))
"RTN","LEXA4",24,0)
 . . K:'$L($G(Y(0,0))) Y(0,0)
"RTN","LEXA4",25,0)
 . . D EN^LEXAR(LEX("NAR")),SET^LEXAR4(1)
"RTN","LEXA4",26,0)
 . I $L($G(LEX("NAR"))),$L($G(LEX("EXM"))),$L($G(DIC)),$L($G(DUZ)) D
"RTN","LEXA4",27,0)
 . . S:+($G(LEX("EXM")))>2&($G(DIC(0))["F") ^DISV(DUZ,DIC)=+($G(LEX("EXM")))
"RTN","LEXA4",28,0)
 . . S:DIC(0)["Z" Y(0,0)=^LEX(757.01,+(LEX("EXM")),0)
"RTN","LEXA4",29,0)
 . . K:'$L($G(Y(0,0))) Y(0,0)
"RTN","LEXA4",30,0)
 . . D EN^LEXAR(+($G(LEX("EXM")))),SET^LEXAR4(+($G(LEX("EXM"))))
"RTN","LEXA4",31,0)
 Q
"RTN","LEXA4",32,0)
USE(X) ; Ask to use narrative
"RTN","LEXA4",33,0)
 W ! N LEXNARR,LEXANY,LEXPMT1,LEXPMT2,%,%Y S LEXANY="",LEXNARR=X
"RTN","LEXA4",34,0)
 D USEN Q X
"RTN","LEXA4",35,0)
USEN ; Use Narrative (anyway)
"RTN","LEXA4",36,0)
 I +($G(LEX("EXM")))=0 D
"RTN","LEXA4",37,0)
 . S LEXPMT1=">>>  You have not selected a term from the Lexicon"
"RTN","LEXA4",38,0)
 . S LEXPMT2=$S($L(LEXANY):">>>  ",1:"     ")_"Use "_LEXNARR_LEXANY
"RTN","LEXA4",39,0)
 I +($G(LEX("EXM")))>0 D
"RTN","LEXA4",40,0)
 . S LEXPMT1=">>>  Exact match found"
"RTN","LEXA4",41,0)
 . S LEXPMT2=$S($L(LEXANY):">>>  ",1:"     ")_"Use "_LEXNARR
"RTN","LEXA4",42,0)
 W:$L(LEXPMT1)&('$L(LEXANY)) !,LEXPMT1 W:$L(LEXANY) !
"RTN","LEXA4",43,0)
 W:$L(LEXPMT2) !,LEXPMT2
"RTN","LEXA4",44,0)
 S %=$S(+($G(LEX("EXM")))>2:1,1:2)
"RTN","LEXA4",45,0)
 D YN^DICN S:%Y["^" X="^" S:%Y["^^" X="^^" Q:X["^"  I %=-1 S X=0 Q
"RTN","LEXA4",46,0)
 I '%,+($G(LEX("EXM")))>0 D  G USEN
"RTN","LEXA4",47,0)
 . W !!,"An exact match was found in the Lexicon.  By answering"
"RTN","LEXA4",48,0)
 . W !,"""Yes"" you will be selecting the exact match found in"
"RTN","LEXA4",49,0)
 . W !,"Lexicon.",!
"RTN","LEXA4",50,0)
 I '%,+($G(LEX("EXM")))'>0 D  G USEN
"RTN","LEXA4",51,0)
 . W !!,"A suitable term was not found in the Lexicon.  By answering"
"RTN","LEXA4",52,0)
 . W !,"""Yes"" you will be keeping your exact text as typed rather than"
"RTN","LEXA4",53,0)
 . W !,"a term from the Lexicon"
"RTN","LEXA4",54,0)
 . S LEXANY=" anyway"
"RTN","LEXA4",55,0)
 I %=1 S X=% Q
"RTN","LEXA4",56,0)
 S X=0 Q
"RTN","LEXAB")
0^182^B8131417
"RTN","LEXAB",1,0)
LEXAB ; ISL Look-up Exact Match "B" index        ; 09-23-96
"RTN","LEXAB",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAB",3,0)
 ;
"RTN","LEXAB",4,0)
 ; Exact match  S X=$$EN^LEXAB("LEXSCH")
"RTN","LEXAB",5,0)
 ;
"RTN","LEXAB",6,0)
 ;         LEXSCH  User input string to search for
"RTN","LEXAB",7,0)
 ;
"RTN","LEXAB",8,0)
 ; 1.  If an exact match is found, it is placed at the top of the
"RTN","LEXAB",9,0)
 ;     selection list at ^TMP("LEXFND",$J)
"RTN","LEXAB",10,0)
 ;
"RTN","LEXAB",11,0)
 ; 2.  Returns
"RTN","LEXAB",12,0)
 ; 
"RTN","LEXAB",13,0)
 ;         0 - Exact match not found
"RTN","LEXAB",14,0)
 ;         1 - Exact match found
"RTN","LEXAB",15,0)
 ;
"RTN","LEXAB",16,0)
EN(LEXSCH) ; Check "B" index for exact match
"RTN","LEXAB",17,0)
 Q:'$L(LEXSCH) 0
"RTN","LEXAB",18,0)
 N LEXLKGL,LEXEM,LEXEMC S LEXLKGL=$G(^TMP("LEXSCH",$J,"GBL",0)),LEXEMC=0
"RTN","LEXAB",19,0)
 Q:$G(LEXLKGL)'["757.01" 0
"RTN","LEXAB",20,0)
 N LEXSHOW S LEXSHOW=$G(^TMP("LEXSCH",$J,"DIS",0))
"RTN","LEXAB",21,0)
 N LEXO,LEXE,LEXOK,LEXDES,LEXDSP
"RTN","LEXAB",22,0)
 S (LEXE,LEXOK)=0,LEXO=$$SCH(LEXSCH)
"RTN","LEXAB",23,0)
 F  S LEXO=$O(^LEX(757.01,"B",LEXO)) Q:LEXO=""!(LEXSCH'[LEXO)  D
"RTN","LEXAB",24,0)
 . S (LEXE,LEXOK)=0
"RTN","LEXAB",25,0)
 . F  S LEXE=$O(^LEX(757.01,"B",LEXO,LEXE)) Q:+LEXE=0  D
"RTN","LEXAB",26,0)
 . . Q:+($P($G(^LEX(757.01,LEXE,1)),"^",5))=1
"RTN","LEXAB",27,0)
 . . I $$UP^XLFSTR(LEXSCH)=$$UP^XLFSTR($G(^LEX(757.01,LEXE,0))) D
"RTN","LEXAB",28,0)
 . . . S LEXEMC=+($G(LEXEMC)),LEXEMC=LEXEMC+1,LEXEM=LEXE
"RTN","LEXAB",29,0)
 S:+($G(LEXEMC))=1 LEXOK=$G(LEXEM) S:+($G(LEXEMC))'=1 LEXOK=0
"RTN","LEXAB",30,0)
 ; Exact Match Found
"RTN","LEXAB",31,0)
 I +LEXOK>0 D
"RTN","LEXAB",32,0)
 . S LEXE=LEXOK
"RTN","LEXAB",33,0)
 . ; Filter
"RTN","LEXAB",34,0)
 . S LEXFILR=$$EN^LEXAFIL($G(LEXFIL),LEXE) Q:LEXFILR=0
"RTN","LEXAB",35,0)
 . ; Deactivated
"RTN","LEXAB",36,0)
 . Q:+($P($G(^LEX(757.01,LEXE,1)),"^",5))=1
"RTN","LEXAB",37,0)
 . S LEXDES=$$DES(LEXE)
"RTN","LEXAB",38,0)
 . S LEXDSP="" S:$L($G(LEXSHOW)) LEXDSP=$$DSP(LEXE,$G(LEXSHOW))
"RTN","LEXAB",39,0)
 . D ADDE^LEXAL(LEXE,LEXDES,LEXDSP)
"RTN","LEXAB",40,0)
 . S ^TMP("LEXSCH",$J,"EXM",0)=LEXE
"RTN","LEXAB",41,0)
 . S ^TMP("LEXSCH",$J,"EXM",1)=$G(^LEX(757.01,+LEXE,0))
"RTN","LEXAB",42,0)
 . I '$D(^LEX(757,"B",LEXE)) D
"RTN","LEXAB",43,0)
 . . N LEXME,LEXM S LEXM=+($G(^LEX(757.01,LEXE,1))) Q:LEXM=0
"RTN","LEXAB",44,0)
 . . S LEXME=+($G(^LEX(757,LEXM,0))) Q:LEXM=0  Q:LEXE=LEXME
"RTN","LEXAB",45,0)
 . . I +($G(^LEX(757.01,LEXME,1)))=LEXM D
"RTN","LEXAB",46,0)
 . . . S LEXDES=$$DES(LEXME),LEXDSP="" S:$L($G(LEXSHOW)) LEXDSP=$$DSP(LEXE,$G(LEXSHOW))
"RTN","LEXAB",47,0)
 . . . D ADDEM^LEXAL(LEXME,LEXDES,LEXDSP)
"RTN","LEXAB",48,0)
 . . . S ^TMP("LEXSCH",$J,"EXC",0)=LEXME
"RTN","LEXAB",49,0)
 . . . S ^TMP("LEXSCH",$J,"EXC",1)=$G(^LEX(757.01,+LEXME,0))
"RTN","LEXAB",50,0)
 Q:$D(^TMP("LEXFND",$J)) 1
"RTN","LEXAB",51,0)
 Q 0
"RTN","LEXAB",52,0)
DES(LEXX) ; Get description flag
"RTN","LEXAB",53,0)
 N LEXDES,LEXE,LEXM S LEXDES="",LEXE=+LEXX
"RTN","LEXAB",54,0)
 S LEXM=$P($G(^LEX(757.01,+($G(LEXX)),1)),"^",1)
"RTN","LEXAB",55,0)
 S LEXM=+($G(^LEX(757,+($G(LEXM)),0)))
"RTN","LEXAB",56,0)
 S:$D(^LEX(757.01,LEXM,3)) LEXDES="*"
"RTN","LEXAB",57,0)
 S LEXX=$G(LEXDES) Q LEXX
"RTN","LEXAB",58,0)
TERM(LEXX) ; Get expression
"RTN","LEXAB",59,0)
 Q $G(^LEX(757.01,LEXX,0))
"RTN","LEXAB",60,0)
DSP(LEXX,LEXDSP) ; Return displayable text
"RTN","LEXAB",61,0)
 N LEXMCE S LEXMCE=+($G(^LEX(757,+($G(^LEX(757.01,LEXX,1))),0)))
"RTN","LEXAB",62,0)
 I +LEXMCE>0,$D(^LEX(757.01,+LEXMCE,0)) S LEXX=$$SO^LEXASO(+LEXMCE,LEXDSP,1) Q LEXX
"RTN","LEXAB",63,0)
 S LEXX=$$SO^LEXASO(LEXX,LEXDSP,1) Q LEXX
"RTN","LEXAB",64,0)
SCH(LEXX) ; Search for LEXX a $Orderable variable
"RTN","LEXAB",65,0)
 S LEXX=$$UP^XLFSTR($E(LEXX,1,63))
"RTN","LEXAB",66,0)
 S LEXX=$E(LEXX,1,($L(LEXX)-1))_$C($A($E(LEXX,$L(LEXX)))-1)_"~" Q LEXX
"RTN","LEXABC")
0^183^B17931204
"RTN","LEXABC",1,0)
LEXABC ; ISL Look-up by Code                      ; 09-23-96
"RTN","LEXABC",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXABC",3,0)
 ;
"RTN","LEXABC",4,0)
 ; Lookup by code S X=$$EN^LEXABC(CODE)
"RTN","LEXABC",5,0)
 ;
"RTN","LEXABC",6,0)
 ;         CODE  is an ICD/CPT/DSM etc classification code
"RTN","LEXABC",7,0)
 ;
"RTN","LEXABC",8,0)
 ; 1.  Searches for all entries linked to a classification 
"RTN","LEXABC",9,0)
 ;     code which has CODE as the root (i.e., 493.0 would
"RTN","LEXABC",10,0)
 ;     find 493.0, 493.00, and 493.01)
"RTN","LEXABC",11,0)
 ;
"RTN","LEXABC",12,0)
 ; 2   If more than one expression is linked to a classification
"RTN","LEXABC",13,0)
 ;     code, only the one which is defined as the preferred term
"RTN","LEXABC",14,0)
 ;     of the classification system is placed on the selection 
"RTN","LEXABC",15,0)
 ;     list.
"RTN","LEXABC",16,0)
 ;
"RTN","LEXABC",17,0)
 ; 3.  Creates a list of expressions (file 757.01) as:
"RTN","LEXABC",18,0)
 ;
"RTN","LEXABC",19,0)
 ;         ^TMP("LEX",$J,"HITS",#)=IEN^RDT
"RTN","LEXABC",20,0)
 ;
"RTN","LEXABC",21,0)
 ;          #   is a sequencial number in list
"RTN","LEXABC",22,0)
 ;         IEN  is an Internal Entry Number file 757.01
"RTN","LEXABC",23,0)
 ;         RDT  is the Recommended Display Text to be
"RTN","LEXABC",24,0)
 ;              presented for the user to select from
"RTN","LEXABC",25,0)
 ;
"RTN","LEXABC",26,0)
 ; 4.  Sets LEX to the number of "HITS" on the list
"RTN","LEXABC",27,0)
 ;
"RTN","LEXABC",28,0)
 ; 5.  Builds an array of the first LEXLL "HITS" on the list
"RTN","LEXABC",29,0)
 ;
"RTN","LEXABC",30,0)
 ;         LEX("LIST",0)=LAST^TOTAL
"RTN","LEXABC",31,0)
 ;         LEX("LIST",#)=IEN^RDT
"RTN","LEXABC",32,0)
 ;
"RTN","LEXABC",33,0)
 ;         LAST   Last numbered entry in the array
"RTN","LEXABC",34,0)
 ;         TOTAL  Number of entries in the array
"RTN","LEXABC",35,0)
 ;         IEN    Internal entry number file #757.01
"RTN","LEXABC",36,0)
 ;         RDT    Recommended display text
"RTN","LEXABC",37,0)
 ;
"RTN","LEXABC",38,0)
 ; 6.  Returns
"RTN","LEXABC",39,0)
 ; 
"RTN","LEXABC",40,0)
 ;         0 - Exact match not found
"RTN","LEXABC",41,0)
 ;         1 - Exact match found
"RTN","LEXABC",42,0)
 ;
"RTN","LEXABC",43,0)
EN(LEXSH) ; Look-up by classification System code
"RTN","LEXABC",44,0)
 D CLR I $L($G(LEXSH))<2 D CLR G EXIT
"RTN","LEXABC",45,0)
 I '(+($$IN(LEXSH))) D CLR G EXIT
"RTN","LEXABC",46,0)
 N LEXSOC S LEXSOC=LEXSH_" "
"RTN","LEXABC",47,0)
 S:'$D(^LEX(757.02,"AVA",LEXSOC))&($D(^LEX(757.02,"AVA",(LEXSOC_".")))) LEXSOC=LEXSOC_"."
"RTN","LEXABC",48,0)
 ; Exact match return the preferred term to top of list
"RTN","LEXABC",49,0)
 I $D(^LEX(757.02,"AVA",LEXSOC)) D
"RTN","LEXABC",50,0)
 . K LEXLIST D BLD(LEXSOC)
"RTN","LEXABC",51,0)
 ; Contains/match return multiple preferred terms to list
"RTN","LEXABC",52,0)
 D MULTI K LEXLIST
"RTN","LEXABC",53,0)
 ; Begin list
"RTN","LEXABC",54,0)
 I $D(^TMP("LEXFND",$J)) D BEG^LEXAL G EXIT
"RTN","LEXABC",55,0)
 I '$D(^TMP("LEXFND",$J)) D  G EXIT
"RTN","LEXABC",56,0)
 . K LEX,^TMP("LEXFND",$J),^TMP("LEXHIT",$J) S LEX=0
"RTN","LEXABC",57,0)
 G EXIT
"RTN","LEXABC",58,0)
MULTI ; Multiple codes containing code LEXSH
"RTN","LEXABC",59,0)
 N LEXE,LEXMSO,LEXMSOC S LEXMSO=LEXSH K LEXLIST
"RTN","LEXABC",60,0)
 S LEXMSOC=($$SCH(LEXMSO))_" "
"RTN","LEXABC",61,0)
 F  S LEXMSOC=$O(^LEX(757.02,"AVA",LEXMSOC)) Q:LEXMSOC'[LEXMSO  D
"RTN","LEXABC",62,0)
 . Q:LEXMSOC=LEXSOC
"RTN","LEXABC",63,0)
 . D BLD(LEXMSOC)
"RTN","LEXABC",64,0)
 Q
"RTN","LEXABC",65,0)
EXIT ; Check if found
"RTN","LEXABC",66,0)
 S:$L($G(^TMP("LEXSCH",$J,"NAR",0))) LEX("NAR")=$G(^TMP("LEXSCH",$J,"NAR",0))
"RTN","LEXABC",67,0)
 K LEXLIST,LEXLUE
"RTN","LEXABC",68,0)
 Q:$D(^TMP("LEXHIT",$J)) 1
"RTN","LEXABC",69,0)
 Q 0
"RTN","LEXABC",70,0)
CLR ; Clear - Kill Temp Storage and Local Arrays
"RTN","LEXABC",71,0)
 K ^TMP("LEXFND",$J),^TMP("LEXHIT",$J),LEXLIST,LEXLUE
"RTN","LEXABC",72,0)
 Q
"RTN","LEXABC",73,0)
BLD(LEXBSOC) ; For each code build list
"RTN","LEXABC",74,0)
 N LEXE,LEXR,LEXSA,LEXDEA S LEXE=0
"RTN","LEXABC",75,0)
 F  S LEXE=$O(^LEX(757.02,"AVA",LEXBSOC,LEXE)) Q:+LEXE=0  D
"RTN","LEXABC",76,0)
 . ; Deactivated Term
"RTN","LEXABC",77,0)
 . Q:+($P($G(^LEX(757.01,LEXE,1)),"^",6))=1
"RTN","LEXABC",78,0)
 . ; Filter
"RTN","LEXABC",79,0)
 . S LEXFILR=$$EN^LEXAFIL($G(LEXFIL),LEXE) Q:LEXFILR=0
"RTN","LEXABC",80,0)
 . N LEXMCE S LEXMCE=+($G(^LEX(757.01,LEXE,1))) Q:+LEXMCE=0
"RTN","LEXABC",81,0)
 . S LEXMCE=+($G(^LEX(757,LEXMCE,0))) Q:+LEXMCE=0  Q:'$D(^LEX(757.01,LEXMCE))
"RTN","LEXABC",82,0)
 . Q:+($P($G(^LEX(757.01,LEXMCE,1)),"^",5))=1
"RTN","LEXABC",83,0)
 . S LEXSA="" F  S LEXSA=$O(^LEX(757.02,"AVA",LEXBSOC,LEXE,LEXSA)) Q:LEXSA=""  D
"RTN","LEXABC",84,0)
 . . S LEXR=0
"RTN","LEXABC",85,0)
 . . F  S LEXR=$O(^LEX(757.02,"AVA",LEXBSOC,LEXE,LEXSA,LEXR)) Q:+LEXR=0!($D(LEXLIST(LEXSA,1)))  D
"RTN","LEXABC",86,0)
 . . . ; Deactivated Code
"RTN","LEXABC",87,0)
 . . . Q:+($P($G(^LEX(757.02,LEXR,0)),"^",6))=1
"RTN","LEXABC",88,0)
 . . . S LEXLIST(LEXSA,+($P(^LEX(757.02,LEXR,0),"^",5)),LEXE)=""
"RTN","LEXABC",89,0)
 . . K:$D(LEXLIST(LEXSA,1)) LEXLIST(LEXSA,0)
"RTN","LEXABC",90,0)
 S LEXSA="" F  S LEXSA=$O(LEXLIST(LEXSA)) Q:LEXSA=""  D
"RTN","LEXABC",91,0)
 . N LEXPR S LEXPR=$O(LEXLIST(LEXSA,"")) Q:LEXPR'=0&(LEXPR'=1)
"RTN","LEXABC",92,0)
 . N LEXE S LEXE=0 F  S LEXE=$O(LEXLIST(LEXSA,LEXPR,LEXE)) Q:+LEXE=0  D
"RTN","LEXABC",93,0)
 . . I $D(LEXLIST(LEXE)) S LEXLIST(LEXE)=LEXLIST(LEXE)_"/"_LEXSA K LEXLIST(LEXSA,LEXPR,LEXE)
"RTN","LEXABC",94,0)
 . . I '$D(LEXLIST(LEXE)) S LEXLIST(LEXE)=LEXSA K LEXLIST(LEXSA,LEXPR,LEXE)
"RTN","LEXABC",95,0)
 S LEXE=0 F  S LEXE=$O(LEXLIST(LEXE)) Q:+LEXE=0  D
"RTN","LEXABC",96,0)
 . N LEXIEN,LEXDES,LEXDSP S LEXIEN=LEXE
"RTN","LEXABC",97,0)
 . S LEXDES=$$DES(LEXIEN)
"RTN","LEXABC",98,0)
 . S LEXDSP=$$DSP(LEXE,LEXLIST(LEXE))
"RTN","LEXABC",99,0)
 . I '$D(LEXLUE(LEXE)) D ADDC^LEXAL(LEXIEN,LEXDES,LEXDSP)
"RTN","LEXABC",100,0)
 . S LEXLUE(LEXE)=""
"RTN","LEXABC",101,0)
 Q
"RTN","LEXABC",102,0)
DES(LEXX) ; Get description flag
"RTN","LEXABC",103,0)
 N LEXDES,LEXM S LEXDES="",LEXE=+LEXX
"RTN","LEXABC",104,0)
 S LEXM=$P($G(^LEX(757.01,+($G(LEXX)),1)),"^",1)
"RTN","LEXABC",105,0)
 S LEXM=+($G(^LEX(757,+($G(LEXM)),0)))
"RTN","LEXABC",106,0)
 S:$D(^LEX(757.01,LEXM,3)) LEXDES="*"
"RTN","LEXABC",107,0)
 S LEXX=$G(LEXDES) Q LEXX
"RTN","LEXABC",108,0)
TERM(LEXX) ; Get expression
"RTN","LEXABC",109,0)
 Q $G(^LEX(757.01,LEXX,0))
"RTN","LEXABC",110,0)
DSP(LEXX,LEXDSP) ; Return displayable text
"RTN","LEXABC",111,0)
 S LEXDSP=$G(LEXDSP),LEXX=$G(LEXX),LEXX=$$SO^LEXASO(LEXX,LEXDSP,0) Q LEXX
"RTN","LEXABC",112,0)
IN(LEXX) ; LEXX  Flag - 1 is in/0 is not in file 757.02
"RTN","LEXABC",113,0)
 Q:$O(^LEX(757.02,"AVA",(($$SCH($E(LEXX,1,61)))_" ")))[LEXX 1
"RTN","LEXABC",114,0)
 Q 0
"RTN","LEXABC",115,0)
SCH(LEXX) ; $Orderable variable
"RTN","LEXABC",116,0)
 S LEXX=$E(LEXX,1,($L(LEXX)-1))_$C($A($E(LEXX,$L(LEXX)))-1)_"~" Q LEXX
"RTN","LEXAFIL")
0^184^B205120
"RTN","LEXAFIL",1,0)
LEXAFIL ; ISL Lookup Filter                        ; 09-23-96
"RTN","LEXAFIL",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAFIL",3,0)
 ;
"RTN","LEXAFIL",4,0)
 ; S LEXFILR=$$EN^LEXAFIL(LEXFIL,LEXE)
"RTN","LEXAFIL",5,0)
 ;
"RTN","LEXAFIL",6,0)
 ;   LEXE    Internal Entry Number (IEN) for an Expression in #757.01
"RTN","LEXAFIL",7,0)
 ;   LEXFIL  DIC("S")
"RTN","LEXAFIL",8,0)
 ;
"RTN","LEXAFIL",9,0)
 ; Returns 1 (true) or 0 (false)
"RTN","LEXAFIL",10,0)
 ;
"RTN","LEXAFIL",11,0)
EN(LEXFIL,Y) ; Process Search Filter
"RTN","LEXAFIL",12,0)
 S LEXFIL=$G(LEXFIL),Y=+($G(Y))
"RTN","LEXAFIL",13,0)
 Q:'$L(LEXFIL) 1 Q:Y=0 0 Q:'$D(^LEX(757.01,Y,0)) 0
"RTN","LEXAFIL",14,0)
 X LEXFIL S Y=$T Q Y
"RTN","LEXAL")
0^185^B25447890
"RTN","LEXAL",1,0)
LEXAL ; ISL Look-up List (Global)                ; 09-23-96
"RTN","LEXAL",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAL",3,0)
 ;
"RTN","LEXAL",4,0)
 ; Add to the list
"RTN","LEXAL",5,0)
ADDL(LEXA,LEXDS,LEXDP) ; Add
"RTN","LEXAL",6,0)
 S LEXA=+($G(LEXA)) Q:LEXA=0  Q:'$D(^LEX(757.01,LEXA))
"RTN","LEXAL",7,0)
 S LEXDS=$G(LEXDS),LEXDP=$G(LEXDP)
"RTN","LEXAL",8,0)
 N LEXF,LEXT,LEXL,LEXC
"RTN","LEXAL",9,0)
 S LEXT=$$DISP(LEXA,LEXDS,LEXDP)
"RTN","LEXAL",10,0)
 S LEXF=$$LSTN(LEXA,"A")
"RTN","LEXAL",11,0)
 S:'$D(^TMP("LEXFND",$J,-LEXF,LEXA)) ^TMP("LEXSCH",$J,"NUM",0)=$G(^TMP("LEXSCH",$J,"NUM",0))+1
"RTN","LEXAL",12,0)
 S ^TMP("LEXFND",$J,-LEXF,LEXA)=LEXT
"RTN","LEXAL",13,0)
 S:+LEXF'=0 ^TMP("LEXFND",$J,0)=LEXF
"RTN","LEXAL",14,0)
 S LEX=$G(^TMP("LEXSCH",$J,"NUM",0))
"RTN","LEXAL",15,0)
 Q
"RTN","LEXAL",16,0)
ADDN(LEXA,LEXDS,LEXDP) ; Near match
"RTN","LEXAL",17,0)
 S LEXA=+($G(LEXA)) Q:LEXA=0  Q:'$D(^LEX(757.01,LEXA))
"RTN","LEXAL",18,0)
 N LEXR,LEXN S LEXR=LEXA Q:$D(^TMP("LEXFND",$J,-99999997,LEXA))
"RTN","LEXAL",19,0)
 S LEXN=-99999997
"RTN","LEXAL",20,0)
 F  S LEXN=LEXN+1 Q:'$D(^TMP("LEXFND",$J,LEXN,0))
"RTN","LEXAL",21,0)
 I $P($G(^LEX(757.01,LEXA,1)),"^",2)'=1 D  Q:+LEXA=0
"RTN","LEXAL",22,0)
 . S LEXA=+($G(^LEX(757.01,LEXA,1))),LEXA=+($G(^LEX(757,LEXA,0)))
"RTN","LEXAL",23,0)
 S LEXDS=$G(LEXDS),LEXDP=$G(LEXDP)
"RTN","LEXAL",24,0)
 N LEXT S LEXT=$$DISP(LEXA,LEXDS,LEXDP)
"RTN","LEXAL",25,0)
 S:'$D(^TMP("LEXFND",$J,-LEXF,LEXA)) ^TMP("LEXSCH",$J,"NUM",0)=$G(^TMP("LEXSCH",$J,"NUM",0))+1
"RTN","LEXAL",26,0)
 S ^TMP("LEXFND",$J,LEXN,LEXA)=LEXT
"RTN","LEXAL",27,0)
 S:LEXN<$G(^TMP("LEXFND",$J,0)) ^TMP("LEXFND",$J,0)=LEXN
"RTN","LEXAL",28,0)
 S LEX=$G(^TMP("LEXSCH",$J,"NUM",0))
"RTN","LEXAL",29,0)
 Q
"RTN","LEXAL",30,0)
ADDE(LEXA,LEXDS,LEXDP) ; Exact match
"RTN","LEXAL",31,0)
 S LEXA=+($G(LEXA)) Q:LEXA=0  Q:'$D(^LEX(757.01,LEXA))  N LEXR,LEXT S LEXR=LEXA,LEXDS=$G(LEXDS),LEXDP=$G(LEXDP),LEXT=$$DISP(LEXA,LEXDS,LEXDP)
"RTN","LEXAL",32,0)
 S:'$D(^TMP("LEXFND",$J,-99999999,LEXA)) ^TMP("LEXSCH",$J,"NUM",0)=$G(^TMP("LEXSCH",$J,"NUM",0))+1
"RTN","LEXAL",33,0)
 S ^TMP("LEXFND",$J,-99999999,LEXA)=LEXT,^TMP("LEXFND",$J,0)=-99999999
"RTN","LEXAL",34,0)
 S LEX=$G(^TMP("LEXSCH",$J,"NUM",0))
"RTN","LEXAL",35,0)
 Q
"RTN","LEXAL",36,0)
ADDEM(LEXA,LEXDS,LEXDP) ; Exact match Major Concept
"RTN","LEXAL",37,0)
 S LEXA=+($G(LEXA)) Q:LEXA=0  Q:'$D(^LEX(757.01,LEXA))  N LEXR,LEXT S LEXR=LEXA Q:$P($G(^LEX(757.01,LEXA,1)),"^",2)'=1
"RTN","LEXAL",38,0)
 S LEXDS=$G(LEXDS),LEXDP=$G(LEXDP),LEXT=$$DISP(LEXA,LEXDS,LEXDP)
"RTN","LEXAL",39,0)
 S:'$D(^TMP("LEXFND",$J,-99999998,LEXA)) ^TMP("LEXSCH",$J,"NUM",0)=$G(^TMP("LEXSCH",$J,"NUM",0))+1
"RTN","LEXAL",40,0)
 S ^TMP("LEXFND",$J,-99999998,LEXA)=LEXT,^TMP("LEXFND",$J,0)=-99999998,LEX=$G(^TMP("LEXSCH",$J,"NUM",0))
"RTN","LEXAL",41,0)
 Q
"RTN","LEXAL",42,0)
ADDC(LEXA,LEXDS,LEXDP) ; Code
"RTN","LEXAL",43,0)
 S LEXA=+($G(LEXA)) Q:LEXA=0  Q:'$D(^LEX(757.01,LEXA))
"RTN","LEXAL",44,0)
 S LEXDS=$G(LEXDS),LEXDP=$G(LEXDP)
"RTN","LEXAL",45,0)
 N LEXT,LEXF,LEXC S LEXC=+($G(^LEX(757.01,LEXA,1))) Q:LEXC=0
"RTN","LEXAL",46,0)
 S LEXF=$G(^TMP("LEXFND",$J,0)) S:+LEXF=0 LEXF=-999999
"RTN","LEXAL",47,0)
 S LEXF=LEXF+1 S LEXT=$$DISP(LEXA,LEXDS,LEXDP)
"RTN","LEXAL",48,0)
 S:'$D(^TMP("LEXFND",$J,-LEXF,LEXA)) ^TMP("LEXSCH",$J,"NUM",0)=$G(^TMP("LEXSCH",$J,"NUM",0))+1
"RTN","LEXAL",49,0)
 S ^TMP("LEXFND",$J,LEXF,LEXA)=LEXT
"RTN","LEXAL",50,0)
 S ^TMP("LEXFND",$J,0)=LEXF
"RTN","LEXAL",51,0)
 S LEX=$G(^TMP("LEXSCH",$J,"NUM",0))
"RTN","LEXAL",52,0)
 Q
"RTN","LEXAL",53,0)
DISP(LEXX,LEXDS,LEXDP) ; Display Text
"RTN","LEXAL",54,0)
 S LEXX=$G(^LEX(757.01,LEXX,0))
"RTN","LEXAL",55,0)
 S:$L(LEXDS) LEXX=LEXX_" "_LEXDS
"RTN","LEXAL",56,0)
 S:$L(LEXDP) LEXX=LEXX_" "_LEXDP
"RTN","LEXAL",57,0)
 Q LEXX
"RTN","LEXAL",58,0)
BEG ; Begin List
"RTN","LEXAL",59,0)
 S:+($G(^TMP("LEXSCH",$J,"UNR",0)))>0&($L($G(^TMP("LEXSCH",$J,"NAR",0)))) LEX("NAR")=$G(^TMP("LEXSCH",$J,"NAR",0))
"RTN","LEXAL",60,0)
 Q:'$D(^TMP("LEXFND",$J))
"RTN","LEXAL",61,0)
 N LEXRL,LEXJ,LEXI,LEXA,LEXSTR,LEXDP
"RTN","LEXAL",62,0)
 S LEXRL=0,LEXLL=+($G(^TMP("LEXSCH",$J,"LEN",0)))
"RTN","LEXAL",63,0)
 S:+LEXLL=0 (LEXRL,LEXLL)=5 S LEXJ=0,LEXI=-9999999999
"RTN","LEXAL",64,0)
 ; Hit List      ^TMP("LEXHIT",$J,#)
"RTN","LEXAL",65,0)
 F  S LEXI=$O(^TMP("LEXFND",$J,LEXI)) Q:+LEXI=0  D
"RTN","LEXAL",66,0)
 . S LEXA=0
"RTN","LEXAL",67,0)
 . F  S LEXA=$O(^TMP("LEXFND",$J,LEXI,LEXA)) Q:+LEXA=0!(LEXJ=LEXLL)  D  Q:+LEXA=0!(LEXJ=LEXLL)
"RTN","LEXAL",68,0)
 . . S LEXJ=LEXJ+1,LEXDP=^TMP("LEXFND",$J,LEXI,LEXA)
"RTN","LEXAL",69,0)
 . . S ^TMP("LEXHIT",$J,0)=LEXJ
"RTN","LEXAL",70,0)
 . . S ^TMP("LEXHIT",$J,LEXJ)=LEXA_"^"_LEXDP
"RTN","LEXAL",71,0)
 . . S:+($G(^TMP("LEXSCH",$J,"EXM",0)))=+LEXA ^TMP("LEXSCH",$J,"EXM",2)=LEXJ_"^"_$G(^LEX(757.01,+LEXA,0))
"RTN","LEXAL",72,0)
 . . S:+($G(^TMP("LEXSCH",$J,"EXC",0)))=+LEXA ^TMP("LEXSCH",$J,"EXC",2)=LEXJ_"^"_$G(^LEX(757.01,+LEXA,0))
"RTN","LEXAL",73,0)
 . . K ^TMP("LEXFND",$J,LEXI,LEXA)
"RTN","LEXAL",74,0)
 ; List          LEX("LIST")
"RTN","LEXAL",75,0)
 I $D(^TMP("LEXSCH",$J,"NUM",0)) S LEX=+($G(^TMP("LEXSCH",$J,"NUM",0)))
"RTN","LEXAL",76,0)
 I LEXLL>0 D
"RTN","LEXAL",77,0)
 . N LEXI,LEXJ S (LEXJ,LEXI)=0
"RTN","LEXAL",78,0)
 . F  S LEXJ=$O(^TMP("LEXHIT",$J,LEXJ)) Q:+LEXJ=0!(+LEXI=LEXLL)  D  Q:+LEXI=LEXLL
"RTN","LEXAL",79,0)
 . . S LEXI=LEXI+1,LEX("LIST",LEXI)=^TMP("LEXHIT",$J,LEXJ)
"RTN","LEXAL",80,0)
 . . S LEX("LIST",0)=LEXI_"^"_LEXI
"RTN","LEXAL",81,0)
 . . S (LEX("MAX"),^TMP("LEXSCH",$J,"LST",0))=LEXI
"RTN","LEXAL",82,0)
 S ^TMP("LEXSCH",$J,"TOL",0)=0 S:$D(LEX("LIST",1)) ^TMP("LEXSCH",$J,"TOL",0)=1
"RTN","LEXAL",83,0)
 S LEX=+($G(^TMP("LEXSCH",$J,"NUM",0)))
"RTN","LEXAL",84,0)
 S:^TMP("LEXSCH",$J,"TOL",0)=1&(+($G(LEX))>0) LEX("MAT")=+LEX_" match"_$S(+LEX>1:"es",1:"")_" found"
"RTN","LEXAL",85,0)
 S:+($G(LEX("MAX")))>0 LEX("MIN")=1
"RTN","LEXAL",86,0)
 I $L($G(^TMP("LEXSCH",$J,"EXM",2))) S LEX("EXM")=^TMP("LEXSCH",$J,"EXM",2)
"RTN","LEXAL",87,0)
 I $L($G(^TMP("LEXSCH",$J,"EXC",2))) S LEX("EXC")=^TMP("LEXSCH",$J,"EXC",2)
"RTN","LEXAL",88,0)
 S:+($G(^TMP("LEXSCH",$J,"UNR",0)))>0&($L($G(^TMP("LEXSCH",$J,"NAR",0)))) LEX("NAR")=$G(^TMP("LEXSCH",$J,"NAR",0))
"RTN","LEXAL",89,0)
 Q:'$D(^TMP("LEXFND",$J))  K:+($G(LEXRL))>0 LEXLL
"RTN","LEXAL",90,0)
 Q
"RTN","LEXAL",91,0)
LSTN(LEXA,LEXM) ; List Number
"RTN","LEXAL",92,0)
 N LEXC,LEXL,LEXF,LEXK S LEXK=0
"RTN","LEXAL",93,0)
 S LEXC=+($G(^LEX(757.01,LEXA,1))) Q:LEXC=0 0
"RTN","LEXAL",94,0)
 S LEXL=$L($G(^LEX(757.01,LEXA,0))) Q:LEXL=0 0
"RTN","LEXAL",95,0)
 S LEXL=245-LEXL S:$L(LEXL)=1 LEXL="00"_LEXL
"RTN","LEXAL",96,0)
 S:$L(LEXL)=2 LEXL="0"_LEXL S LEXL=$E(LEXL,1,3)
"RTN","LEXAL",97,0)
 S LEXF=$O(^LEX(757.001,"B",LEXC,0))
"RTN","LEXAL",98,0)
 S:+LEXF>0&($L($G(^LEX(757.001,+LEXF,0)))) LEXF=(+($P($G(^LEX(757.001,LEXF,0)),"^",3))+1)
"RTN","LEXAL",99,0)
 S:+LEXF=0 LEXF=1 I +($G(LEXTKN(0)))>0 D
"RTN","LEXAL",100,0)
 . N LEXI S LEXI=0 F  S LEXI=$O(LEXTKN(LEXI)) Q:+LEXI=0  D
"RTN","LEXAL",101,0)
 . . I $$UP^XLFSTR($G(^LEX(757.01,LEXA,0)))[LEXTKN(LEXI) S:LEXK<8 LEXK=LEXK+1
"RTN","LEXAL",102,0)
 S LEXK=$E(LEXK,1),LEXM=LEXF_"."_LEXK_LEXL
"RTN","LEXAL",103,0)
 Q LEXM
"RTN","LEXAL2")
0^186^B12928118
"RTN","LEXAL2",1,0)
LEXAL2 ; ISL Look-up List (Array)                 ; 09-23-96
"RTN","LEXAL2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAL2",3,0)
 ;
"RTN","LEXAL2",4,0)
 ;  LEXL        Last on List
"RTN","LEXAL2",5,0)
 ;  LEXT/LEXF  List To/From
"RTN","LEXAL2",6,0)
 ;  LEXA        List position asked for
"RTN","LEXAL2",7,0)
 ;  "HOME"       Position at the begining of List
"RTN","LEXAL2",8,0)
 ;  "END"        Position at the end of List
"RTN","LEXAL2",9,0)
 ;  "PGDN"       Position down the list by #LEXLL
"RTN","LEXAL2",10,0)
 ;  "PGUP"       Position up the list by #LEXLL
"RTN","LEXAL2",11,0)
 ;
"RTN","LEXAL2",12,0)
LIST(LEXA) ; Continue to build list
"RTN","LEXAL2",13,0)
 N LEXC,LEXDSP,LEXF,LEXI,LEXIEN,LEXL,LEXLL,LEXO
"RTN","LEXAL2",14,0)
 N LEXT
"RTN","LEXAL2",15,0)
 I '$D(^TMP("LEXSCH",$J))!('$D(^TMP("LEXFND",$J)))!('$D(^TMP("LEXHIT",$J))) D EDA^LEXAR Q
"RTN","LEXAL2",16,0)
 ; Positional
"RTN","LEXAL2",17,0)
 S LEX=+($G(^TMP("LEXSCH",$J,"NUM",0))) S:LEXA="END" LEXA=+($G(^TMP("LEXSCH",$J,"NUM",0)))
"RTN","LEXAL2",18,0)
 S:LEXA="HOME" LEXA=1 I LEXA="PGDN" S LEXA=+($P($G(LEX("LIST",0)),"^",1))+(+($G(^TMP("LEXSCH",$J,"LEN",0)))) S:LEXA>LEX LEXA=LEX
"RTN","LEXAL2",19,0)
 I LEXA="PGUP" S LEXA=+($P($G(LEX("LIST",0)),"^",1))-(+($G(^TMP("LEXSCH",$J,"LEN",0)))) S:LEXA=0 LEXA=1
"RTN","LEXAL2",20,0)
 ; End listing
"RTN","LEXAL2",21,0)
 I +($G(LEXA))=0 D EDA^LEXAR Q
"RTN","LEXAL2",22,0)
 ; Make List
"RTN","LEXAL2",23,0)
 N LEXL,LEXC,LEXLL,LEXT,LEXF S LEXL=+($G(^TMP("LEXSCH",$J,"LST",0)))
"RTN","LEXAL2",24,0)
 S LEXLL=+($G(^TMP("LEXSCH",$J,"LEN",0))) S:LEXLL=0 LEXLL=5
"RTN","LEXAL2",25,0)
 Q:LEXA>LEX  D HILO Q:+($G(LEXF))>+($G(LEX))  Q:+($G(LEXA))>+($G(LEX))
"RTN","LEXAL2",26,0)
 D:LEXA>LEXL FWD D:LEXA'>LEXL BKW
"RTN","LEXAL2",27,0)
 I $D(LEX("LIST")) D LST^LEXAR
"RTN","LEXAL2",28,0)
 Q
"RTN","LEXAL2",29,0)
HILO ; List From LEXF - To LEXT
"RTN","LEXAL2",30,0)
 I +($G(LEXA))=0 S LEXF=1,LEXT=LEXLL Q
"RTN","LEXAL2",31,0)
 S (LEXA,LEXT)=+($G(LEXA)) Q:LEXT'>0!(LEXT>+($G(LEX)))
"RTN","LEXAL2",32,0)
 S LEXF=LEXT#LEXLL S:LEXF=0 LEXF=LEXLL S LEXF=LEXF-1,LEXF=LEXT-LEXF,LEXT=LEXF+(LEXLL-1)
"RTN","LEXAL2",33,0)
 Q
"RTN","LEXAL2",34,0)
FWD ; Build list Forward (User Response was Null or Jump Forward)
"RTN","LEXAL2",35,0)
 K LEX N LEXI,LEXIEN,LEXDSP S LEX=+($G(^TMP("LEXSCH",$J,"NUM",0)))
"RTN","LEXAL2",36,0)
 Q:LEXT'>0!(LEXF>+($G(LEX)))  D:'$D(^TMP("LEXHIT",$J,LEXT)) ADD D:$D(^TMP("LEXHIT",$J,LEXF)) BLD
"RTN","LEXAL2",37,0)
 Q
"RTN","LEXAL2",38,0)
ADD ; Add to Hit list
"RTN","LEXAL2",39,0)
 N LEXC,LEXI,LEXIEN S LEXC=LEXL,LEXI=-9999999999
"RTN","LEXAL2",40,0)
 F  S LEXI=$O(^TMP("LEXFND",$J,LEXI)) Q:+LEXI=0!(LEXC>LEXT)!(LEXC>LEX)  D  Q:LEXC>LEXT!(LEXC>LEX)  D
"RTN","LEXAL2",41,0)
 . S LEXIEN=0 F  S LEXIEN=$O(^TMP("LEXFND",$J,LEXI,LEXIEN)) Q:+LEXIEN=0!(LEXC>LEXT)!(LEXC>LEX)  D  Q:LEXC>LEXT!(LEXC>LEX)
"RTN","LEXAL2",42,0)
 . . S LEXC=LEXC+1 I LEXC'>LEXT D
"RTN","LEXAL2",43,0)
 . . . S LEXDSP=^TMP("LEXFND",$J,LEXI,LEXIEN),^TMP("LEXHIT",$J,0)=LEXC
"RTN","LEXAL2",44,0)
 . . . S ^TMP("LEXHIT",$J,LEXC)=LEXIEN_"^"_LEXDSP
"RTN","LEXAL2",45,0)
 . . . S:+($G(^TMP("LEXSCH",$J,"EXM",0)))=+LEXIEN ^TMP("LEXSCH",$J,"EXM",2)=LEXC_"^"_$G(^LEX(757.01,+LEXIEN,0))
"RTN","LEXAL2",46,0)
 . . . S:+($G(^TMP("LEXSCH",$J,"EXC",0)))=+LEXIEN ^TMP("LEXSCH",$J,"EXC",2)=LEXC_"^"_$G(^LEX(757.01,+LEXIEN,0))
"RTN","LEXAL2",47,0)
 . . . K ^TMP("LEXFND",$J,LEXI,LEXIEN) S ^TMP("LEXSCH",$J,"LST",0)=$G(^TMP("LEXSCH",$J,"LST",0))+1
"RTN","LEXAL2",48,0)
 Q
"RTN","LEXAL2",49,0)
BLD ; Build LEX("LIST")
"RTN","LEXAL2",50,0)
 S LEX=+($G(^TMP("LEXSCH",$J,"NUM",0))) S:'$D(^TMP("LEXHIT",$J)) LEX=0
"RTN","LEXAL2",51,0)
 N LEXC,LEXCTR S LEXCTR=0,LEXC=LEXF-1
"RTN","LEXAL2",52,0)
 F  S LEXC=$O(^TMP("LEXHIT",$J,LEXC)) Q:+LEXC=0!(+LEXC>LEXT)  D  Q:+LEXC>LEXT
"RTN","LEXAL2",53,0)
 . S LEXCTR=LEXCTR+1,LEX("LIST",LEXC)=^TMP("LEXHIT",$J,LEXC),LEX("LIST",0)=LEXC_"^"_LEXCTR
"RTN","LEXAL2",54,0)
 . S LEX("MIN")=1,LEX("MAX")=LEXC,(LEXL,^TMP("LEXSCH",$J,"LST",0))=LEXC
"RTN","LEXAL2",55,0)
 Q
"RTN","LEXAL2",56,0)
BKW ; Build list Backwards (User Response was Jump Backwards)
"RTN","LEXAL2",57,0)
 S LEXLL=+($G(LEXLL)),LEXF=+($G(LEXF)),LEXT=+($G(LEXT)) Q:LEXF=0  Q:LEXT=0  Q:LEXLL=0
"RTN","LEXAL2",58,0)
 Q:'$D(^TMP("LEXHIT",$J,LEXF))  N LEXCTR,LEXO,LEXC S LEXCTR=0,LEXO=LEXF-1,LEXC=0
"RTN","LEXAL2",59,0)
 K LEX("LIST") F  S LEXO=$O(^TMP("LEXHIT",$J,LEXO)) Q:+LEXO=0!(LEXC>LEXLL)  D  Q:LEXC>LEXLL
"RTN","LEXAL2",60,0)
 . S LEXCTR=LEXCTR+1,LEXC=LEXC+1
"RTN","LEXAL2",61,0)
 . I LEXC'>LEXLL S LEX("LIST",LEXO)=^TMP("LEXHIT",$J,LEXO),LEX("LIST",0)=LEXO_"^"_LEXCTR
"RTN","LEXAL2",62,0)
 Q
"RTN","LEXALK")
0^187^B17237980
"RTN","LEXALK",1,0)
LEXALK ; ISL Look-up by Words                     ; 09-23-96
"RTN","LEXALK",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXALK",3,0)
 ;
"RTN","LEXALK",4,0)
 ; Special Lookup variables
"RTN","LEXALK",5,0)
 ;
"RTN","LEXALK",6,0)
 ;   LEXSUB      Vocabulary
"RTN","LEXALK",7,0)
 ;   LEXSHCT     Shortcuts
"RTN","LEXALK",8,0)
 ;   LEXDICS     Screen - DIC("S") Format
"RTN","LEXALK",9,0)
 ;   LEXSHOW     Displayable codes
"RTN","LEXALK",10,0)
 ;   LEXLKFL     File Number
"RTN","LEXALK",11,0)
 ;   LEXLKGL     Global Root
"RTN","LEXALK",12,0)
 ;   LEXLKIX     Index to use during lookup
"RTN","LEXALK",13,0)
 ;   LEXLKSH     User Input (Search String)
"RTN","LEXALK",14,0)
 ;   LEXTKN(     Tolkens in order of frequency of use
"RTN","LEXALK",15,0)
 ;   LEXTKNS(    Tolkens in order of entry
"RTN","LEXALK",16,0)
 ;
"RTN","LEXALK",17,0)
EN ; Look-up user input
"RTN","LEXALK",18,0)
 N LEXSUB,LEXSHCT,LEXDICS,LEXSHOW,LEXLKFL,LEXLKGL
"RTN","LEXALK",19,0)
 N LEXLKIX,LEXLKSH
"RTN","LEXALK",20,0)
 S LEXLKSH=$G(^TMP("LEXSCH",$J,"SCH",0)) I $L(LEXLKSH)<2 D  Q
"RTN","LEXALK",21,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1,LEX("ERR",LEX("ERR",0))="User input missing or invalid"
"RTN","LEXALK",22,0)
 S LEXSUB=$G(^TMP("LEXSCH",$J,"VOC",0)) S:LEXSUB="" LEXSUB="WRD"
"RTN","LEXALK",23,0)
 S LEXLKIX=$G(^TMP("LEXSCH",$J,"IDX",0)) S:LEXLKIX="" LEXLKIX="AWRD"
"RTN","LEXALK",24,0)
 S LEXLKFL=$G(^TMP("LEXSCH",$J,"FLN",0)) I LEXLKFL'["757." D  Q
"RTN","LEXALK",25,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1,LEX("ERR",LEX("ERR",0))="File number missing or invalid"
"RTN","LEXALK",26,0)
 S LEXLKGL=$G(^TMP("LEXSCH",$J,"GBL",0)) I LEXLKGL'["LEX(757." D  Q
"RTN","LEXALK",27,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1,LEX("ERR",LEX("ERR",0))="Global location missing or invalid"
"RTN","LEXALK",28,0)
 S LEXSHOW=$G(^TMP("LEXSCH",$J,"DIS",0))
"RTN","LEXALK",29,0)
 D TOLKEN^LEXAM(LEXLKSH)
"RTN","LEXALK",30,0)
 N LEXOK,LEXDES,LEXDSP,LEXT,LEXO,LEXI,LEXE,LEXM,LEXME
"RTN","LEXALK",31,0)
 N LEXSS Q:$G(LEXLKFL)'["757."
"RTN","LEXALK",32,0)
 S LEXSS="" I $D(LEXTKNS(0)) D
"RTN","LEXALK",33,0)
 . N LEXI F LEXI=1:1:LEXTKNS(0) S LEXSS=LEXSS_" "_LEXTKNS(LEXI)
"RTN","LEXALK",34,0)
 . S LEXSS=$E(LEXSS,2,$L(LEXSS))
"RTN","LEXALK",35,0)
 W:+($G(LEXQ))=0 !,"Searching for ",LEXSS
"RTN","LEXALK",36,0)
 S ^TMP("LEXSCH",$J,"SCH",0)=$G(LEXSS)
"RTN","LEXALK",37,0)
 S LEXT=$G(LEXTKN(1)),LEXO=$$SCH(LEXT)
"RTN","LEXALK",38,0)
 I $G(LEXSHCT)="",$G(LEXTKN(0))=1,$D(^LEX(LEXLKFL,LEXLKIX,LEXT)) D  G END
"RTN","LEXALK",39,0)
 . D EXACT
"RTN","LEXALK",40,0)
 . I +($O(^LEX(757.01,"ASL",LEXT,0)))>500 Q
"RTN","LEXALK",41,0)
 . D TOLKEN
"RTN","LEXALK",42,0)
 D TOLKEN
"RTN","LEXALK",43,0)
END ; End look-up by word
"RTN","LEXALK",44,0)
 I $D(^TMP("LEXFND",$J)) D BEG^LEXAL
"RTN","LEXALK",45,0)
 I '$D(^TMP("LEXFND",$J)) D
"RTN","LEXALK",46,0)
 . K LEX,^TMP("LEXFND",$J),^TMP("LEXHIT",$J) S LEX=0
"RTN","LEXALK",47,0)
 S:+($G(^TMP("LEXSCH",$J,"UNR",0)))>0&($L($G(^TMP("LEXSCH",$J,"NAR",0)))) LEX("NAR")=$G(^TMP("LEXSCH",$J,"NAR",0))
"RTN","LEXALK",48,0)
 Q
"RTN","LEXALK",49,0)
EXACT ; Main loop throuth TOLKENS that equal LEXT
"RTN","LEXALK",50,0)
 F  S LEXO=$O(^LEX(LEXLKFL,LEXLKIX,LEXO)) Q:LEXO'=LEXT  D IEN
"RTN","LEXALK",51,0)
 Q
"RTN","LEXALK",52,0)
TOLKEN ; Main loop though TOLKENS containing LEXT
"RTN","LEXALK",53,0)
 F  S LEXO=$O(^LEX(LEXLKFL,LEXLKIX,LEXO)) Q:LEXO'[LEXT!(LEXO="")  D IEN
"RTN","LEXALK",54,0)
 Q
"RTN","LEXALK",55,0)
IEN ; Loop throuth Internal Entry Numbers
"RTN","LEXALK",56,0)
 S LEXI=0
"RTN","LEXALK",57,0)
 F  S LEXI=$O(^LEX(LEXLKFL,LEXLKIX,LEXO,LEXI)) Q:+LEXI=0  D CHK
"RTN","LEXALK",58,0)
 Q
"RTN","LEXALK",59,0)
CHK ; Check each tolken
"RTN","LEXALK",60,0)
 N LEXOK S LEXE=LEXI,LEXOK=1
"RTN","LEXALK",61,0)
 S:LEXLKGL'["757.01" LEXE=+(^LEX(LEXLKFL,LEXI,0))
"RTN","LEXALK",62,0)
 ; Filter
"RTN","LEXALK",63,0)
 S LEXFILR=$$EN^LEXAFIL($G(LEXFIL),LEXE) Q:LEXFILR=0
"RTN","LEXALK",64,0)
 ; Deactivated
"RTN","LEXALK",65,0)
 Q:+($P($G(^LEX(757.01,LEXE,1)),"^",5))=1
"RTN","LEXALK",66,0)
 S LEXM=+($G(^LEX(757.01,LEXE,1)))
"RTN","LEXALK",67,0)
 S LEXME=+($G(^LEX(757,LEXM,0)))
"RTN","LEXALK",68,0)
 ; Check not exact match
"RTN","LEXALK",69,0)
 I $L($G(^TMP("LEXSCH",$J,"EXM",0))),+(^TMP("LEXSCH",$J,"EXM",0))=LEXE Q
"RTN","LEXALK",70,0)
 I $L($G(^TMP("LEXSCH",$J,"EXC",0))),+(^TMP("LEXSCH",$J,"EXC",0))=LEXE Q
"RTN","LEXALK",71,0)
 ; Check tolkens
"RTN","LEXALK",72,0)
 S LEXOK=1 D CHKTKNS(LEXE) Q:'LEXOK
"RTN","LEXALK",73,0)
 ; Description (*)
"RTN","LEXALK",74,0)
 S LEXDES=$$DES^LEXASC(LEXE)
"RTN","LEXALK",75,0)
 ; Display of codes
"RTN","LEXALK",76,0)
 S LEXDSP=$$SO^LEXASO(LEXE,$G(LEXSHOW),1)
"RTN","LEXALK",77,0)
 D ADDL^LEXAL(LEXE,LEXDES,LEXDSP)
"RTN","LEXALK",78,0)
 Q
"RTN","LEXALK",79,0)
CHKTKNS(LEXE) ; Check tolkens
"RTN","LEXALK",80,0)
 N LEXM S LEXM=+($G(^LEX(757.01,LEXE,1))) Q:LEXM=0
"RTN","LEXALK",81,0)
 N LEXI,LEXOE,LEXC S LEXOE=LEXE,LEXI=1
"RTN","LEXALK",82,0)
 F  S LEXI=$O(LEXTKN(LEXI)) Q:+LEXI=0!('LEXOK)  D  Q:'LEXOK
"RTN","LEXALK",83,0)
 . N LEXT,LEXE S LEXT=LEXTKN(LEXI),LEXE=0,LEXOK=0
"RTN","LEXALK",84,0)
 . S LEXC=$$UP^XLFSTR(^LEX(757.01,LEXOE,0))
"RTN","LEXALK",85,0)
 . I LEXC[(" "_LEXT) S LEXOK=1 Q
"RTN","LEXALK",86,0)
 . I LEXC[("-"_LEXT) S LEXOK=1 Q
"RTN","LEXALK",87,0)
 . I LEXC[("("_LEXT) S LEXOK=1 Q
"RTN","LEXALK",88,0)
 . I LEXC[("/"_LEXT) S LEXOK=1 Q
"RTN","LEXALK",89,0)
 . I $E(LEXC,1,$L(LEXT))=LEXT S LEXOK=1 Q
"RTN","LEXALK",90,0)
 . F  S LEXE=$O(^LEX(757.01,"AMC",LEXM,LEXE)) Q:+LEXE=0!(LEXOK)  D  Q:LEXOK
"RTN","LEXALK",91,0)
 . . S LEXC=$$UP^XLFSTR(^LEX(757.01,LEXE,0))
"RTN","LEXALK",92,0)
 . . I LEXC[(" "_LEXT) S LEXOK=1 Q
"RTN","LEXALK",93,0)
 . . I LEXC[("-"_LEXT) S LEXOK=1 Q
"RTN","LEXALK",94,0)
 . . I LEXC[("("_LEXT) S LEXOK=1 Q
"RTN","LEXALK",95,0)
 . . I LEXC[("/"_LEXT) S LEXOK=1 Q
"RTN","LEXALK",96,0)
 . . I $E(LEXC,1,$L(LEXT))=LEXT S LEXOK=1 Q
"RTN","LEXALK",97,0)
 Q
"RTN","LEXALK",98,0)
DES(LEXX) ; Get description flag
"RTN","LEXALK",99,0)
 N LEXDES,LEXE,LEXM S LEXDES="",LEXE=+LEXX
"RTN","LEXALK",100,0)
 S LEXM=$P($G(^LEX(757.01,+($G(LEXX)),1)),"^",1)
"RTN","LEXALK",101,0)
 S LEXM=+($G(^LEX(757,+($G(LEXM)),0)))
"RTN","LEXALK",102,0)
 S:$D(^LEX(757.01,LEXM,3)) LEXDES="*"
"RTN","LEXALK",103,0)
 S LEXX=$G(LEXDES) Q LEXX
"RTN","LEXALK",104,0)
SCH(LEXX) ; Search for LEXX a $Orderable variable
"RTN","LEXALK",105,0)
 S LEXX=$E(LEXX,1,($L(LEXX)-1))_$C($A($E(LEXX,$L(LEXX)))-1)_"~" Q LEXX
"RTN","LEXALK",106,0)
 Q
"RTN","LEXAM")
0^188^B15878015
"RTN","LEXAM",1,0)
LEXAM ; ISL Look-up Misc (Setup/Parse)           ; 09-23-96
"RTN","LEXAM",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAM",3,0)
 ;
"RTN","LEXAM",4,0)
SETUP(LEXSUB) ; Set up search variables
"RTN","LEXAM",5,0)
 I '$L($G(LEXSUB)) D  Q
"RTN","LEXAM",6,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXAM",7,0)
 . S LEX("ERR",LEX("ERR",0))="Default Vocabulary missing or invalid"
"RTN","LEXAM",8,0)
 S ^TMP("LEXSCH",$J,"VOC",0)=LEXSUB
"RTN","LEXAM",9,0)
 I '$D(^LEXT(757.2,"AA",^TMP("LEXSCH",$J,"VOC",0))) D  Q
"RTN","LEXAM",10,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXAM",11,0)
 . S LEX("ERR",LEX("ERR",0))="Default Vocabulary missing or invalid"
"RTN","LEXAM",12,0)
 N LEXSUBS S LEXSUBS=$O(^LEXT(757.2,"AA",^TMP("LEXSCH",$J,"VOC",0),0))
"RTN","LEXAM",13,0)
 S ^TMP("LEXSCH",$J,"IDX",0)="A"_^TMP("LEXSCH",$J,"VOC",0)
"RTN","LEXAM",14,0)
 I $D(^LEXT(757.2,LEXSUBS,1)) D
"RTN","LEXAM",15,0)
 . S ^TMP("LEXSCH",$J,"GBL",0)=^LEXT(757.2,LEXSUBS,1)
"RTN","LEXAM",16,0)
 . S ^TMP("LEXSCH",$J,"FLN",0)=+($P(^TMP("LEXSCH",$J,"GBL",0),"(",2))
"RTN","LEXAM",17,0)
 . I +^TMP("LEXSCH",$J,"FLN",0)=0!('$D(^DD(+^TMP("LEXSCH",$J,"FLN",0)))) D  Q
"RTN","LEXAM",18,0)
 . . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXAM",19,0)
 . . S LEX("ERR",LEX("ERR",0))="File Number missing or invalid"
"RTN","LEXAM",20,0)
 . I '$D(^DIC(^TMP("LEXSCH",$J,"FLN",0),0,"GL")) D  Q
"RTN","LEXAM",21,0)
 . . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXAM",22,0)
 . . S LEX("ERR",LEX("ERR",0))="Global Location missing or invalid"
"RTN","LEXAM",23,0)
 . I $G(^DIC(^TMP("LEXSCH",$J,"FLN",0),0,"GL"))'=^TMP("LEXSCH",$J,"GBL",0) D  Q
"RTN","LEXAM",24,0)
 . . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXAM",25,0)
 . . S LEX("ERR",LEX("ERR",0))="Global Location missing or invalid"
"RTN","LEXAM",26,0)
 . I $D(^TMP("LEXFND",$J)) D
"RTN","LEXAM",27,0)
 . . N LEXI,LEXE S LEXI=-999999999,^TMP("LEXSCH",$J,"EXM",0)=""
"RTN","LEXAM",28,0)
 . . F  S LEXI=$O(^TMP("LEXFND",$J,LEXI)) Q:LEXI=0!(^TMP("LEXSCH",$J,"EXM",0)'="")  D
"RTN","LEXAM",29,0)
 . . . S ^TMP("LEXSCH",$J,"EXM",0)=$O(^TMP("LEXFND",$J,LEXI,0)) S:+(^TMP("LEXSCH",$J,"EXM",0))=0 ^TMP("LEXSCH",$J,"EXM",0)=""
"RTN","LEXAM",30,0)
 Q
"RTN","LEXAM",31,0)
 ;
"RTN","LEXAM",32,0)
 ; Entry      D TOLKEN^LEXAM("USER INPUT")
"RTN","LEXAM",33,0)
 ; Returns    LEXTKN(#)=TOLKEN LIST
"RTN","LEXAM",34,0)
 ; 
"RTN","LEXAM",35,0)
 ; LEXFOC(   Array by frequency of occurance
"RTN","LEXAM",36,0)
 ; LEXTKN(   Array by frequency
"RTN","LEXAM",37,0)
 ; LEXTKNS(  Array by input
"RTN","LEXAM",38,0)
 ;
"RTN","LEXAM",39,0)
 ; LEXLOOK   Flag for PTX^LEXTOLKN indicating parse for look-up
"RTN","LEXAM",40,0)
 ; LEXI      Incremental counter
"RTN","LEXAM",41,0)
 ; LEXF      Frequency of occurance
"RTN","LEXAM",42,0)
 ; LEXKEY    Key for spell check
"RTN","LEXAM",43,0)
 ; LEXK      Tolken
"RTN","LEXAM",44,0)
 ; LEXKF     Tolken found
"RTN","LEXAM",45,0)
 ; LEXNK     Next tolken
"RTN","LEXAM",46,0)
 ;
"RTN","LEXAM",47,0)
TOLKEN(LEXX) ; Return list of tolkens in ascending order of usage
"RTN","LEXAM",48,0)
 Q:'$L($G(LEXX))  D PARSE,ORD K ^TMP("LEXTKN",$J) Q
"RTN","LEXAM",49,0)
PARSE ; Parse user input into tolkens
"RTN","LEXAM",50,0)
 K ^TMP("LEXTKN",$J) N X,LEXLOOK S X=LEXX,LEXLOOK="" D PTX^LEXTOLKN Q
"RTN","LEXAM",51,0)
ORD ; tolken list in frequency order
"RTN","LEXAM",52,0)
 Q:'$D(^TMP("LEXTKN",$J,0))  K LEXFOC,LEXTKN N LEXKEY,LEXI,LEXF,LEXK,LEXCT
"RTN","LEXAM",53,0)
 ; Get possible key
"RTN","LEXAM",54,0)
 S (LEXCT,LEXI)=0 F  S LEXI=$O(^TMP("LEXTKN",$J,LEXI)) Q:+LEXI=0  D
"RTN","LEXAM",55,0)
 . S LEXK=$O(^TMP("LEXTKN",$J,LEXI,""))
"RTN","LEXAM",56,0)
 . I $D(^LEX(757.01,"ASL",LEXK)) S LEXF=$O(^LEX(757.01,"ASL",LEXK,0)),LEXKEY(LEXF)=LEXK
"RTN","LEXAM",57,0)
 I $D(LEXKEY) N LEXKF S LEXKF=$O(LEXKEY(0)),LEXKF=LEXKEY(LEXKF) K LEXKEY S LEXKEY=LEXKF
"RTN","LEXAM",58,0)
 S:'$D(LEXKEY) LEXKEY=""
"RTN","LEXAM",59,0)
 ; Order by frequency
"RTN","LEXAM",60,0)
 S (LEXCT,LEXI)=0 F  S LEXI=$O(^TMP("LEXTKN",$J,LEXI)) Q:+LEXI=0  D
"RTN","LEXAM",61,0)
 . S LEXK=$O(^TMP("LEXTKN",$J,LEXI,""))
"RTN","LEXAM",62,0)
 . I $D(^LEX(757.01,"ASL",LEXK)) D
"RTN","LEXAM",63,0)
 . . N LEXNK S LEXNK=$$EXP^LEXAS6(LEXK)
"RTN","LEXAM",64,0)
 . . I $D(^LEX(757.01,"ASL",LEXNK)),LEXNK[LEXK,$L(LEXNK)>$L(LEXK) S LEXK=LEXNK
"RTN","LEXAM",65,0)
 . . S LEXCT=LEXCT+1,LEXF=$O(^LEX(757.01,"ASL",LEXK,0))
"RTN","LEXAM",66,0)
 . . S LEXTKNS(LEXCT)=LEXK,LEXFOC(LEXF,LEXK)=""
"RTN","LEXAM",67,0)
 . . S LEXTKNS(0)=LEXCT
"RTN","LEXAM",68,0)
 . I '$D(^LEX(757.01,"ASL",LEXK)),$D(^LEX(757.01,"AWRD",LEXK)) D FRQ(LEXK) Q
"RTN","LEXAM",69,0)
 . I '$D(^LEX(757.01,"ASL",LEXK)),'$D(^LEX(757.01,"AWRD",LEXK)) D
"RTN","LEXAM",70,0)
 . . S LEXK=$$SPL^LEXAS(LEXK)
"RTN","LEXAM",71,0)
 . . I LEXK["^" D  Q
"RTN","LEXAM",72,0)
 . . . N LEXF,LEXT S LEXF=$P(LEXK,"^",1),LEXT=$P(LEXK,"^",2)
"RTN","LEXAM",73,0)
 . . . D FRQ(LEXF),FRQ(LEXT)
"RTN","LEXAM",74,0)
 . . D FRQ(LEXK)
"RTN","LEXAM",75,0)
 K ^TMP("LEXTKN",$J) Q:'$D(LEXFOC)  S LEXI=-999999999,LEXF=0
"RTN","LEXAM",76,0)
 F  S LEXI=$O(LEXFOC(LEXI)) Q:+LEXI=0  D
"RTN","LEXAM",77,0)
 . S LEXK="" F  S LEXK=$O(LEXFOC(LEXI,LEXK)) Q:LEXK=""  D
"RTN","LEXAM",78,0)
 . . S LEXF=LEXF+1,LEXTKN(LEXF)=LEXK K LEXFOC(LEXI,LEXK)
"RTN","LEXAM",79,0)
 S:LEXF>0 LEXTKN(0)=LEXF
"RTN","LEXAM",80,0)
 Q
"RTN","LEXAM",81,0)
FRQ(LEXK) ; Frequency
"RTN","LEXAM",82,0)
 I $D(^LEX(757.01,"ASL",LEXK)) D
"RTN","LEXAM",83,0)
 . S LEXCT=LEXCT+1,LEXF=$O(^LEX(757.01,"ASL",LEXK,0))
"RTN","LEXAM",84,0)
 . S LEXTKNS(LEXCT)=LEXK,LEXFOC(LEXF,LEXK)=""
"RTN","LEXAM",85,0)
 . S LEXTKNS(0)=LEXCT
"RTN","LEXAM",86,0)
 I '$D(^LEX(757.01,"ASL",LEXK)),$D(^LEX(757.01,"AWRD",LEXK)) D
"RTN","LEXAM",87,0)
 . S LEXCT=LEXCT+1 N LEXC,LEXI S (LEXC,LEXI)=0
"RTN","LEXAM",88,0)
 . F  S LEXI=$O(^LEX(757.01,"AWRD",LEXK,LEXI)) Q:+LEXI=0  S LEXC=LEXC+1
"RTN","LEXAM",89,0)
 . S LEXF=LEXC,LEXTKNS(LEXCT)=LEXK,LEXFOC(LEXF,LEXK)=""
"RTN","LEXAM",90,0)
 . S LEXTKNS(0)=LEXCT
"RTN","LEXAM",91,0)
 Q
"RTN","LEXAR")
0^189^B16670196
"RTN","LEXAR",1,0)
LEXAR ; ISL Look-up (Interpret User Response)    ; 09-23-96
"RTN","LEXAR",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAR",3,0)
 ;
"RTN","LEXAR",4,0)
 ; User Responses
"RTN","LEXAR",5,0)
 ;
"RTN","LEXAR",6,0)
 ; Numeric  -----------------------------------------------
"RTN","LEXAR",7,0)
 ;
"RTN","LEXAR",8,0)
 ; #             Select Entry
"RTN","LEXAR",9,0)
 ;
"RTN","LEXAR",10,0)
 ; Numeric^Comment ----------------------------------------
"RTN","LEXAR",11,0)
 ;
"RTN","LEXAR",12,0)
 ; IEN^COMMENT   Application comment about term
"RTN","LEXAR",13,0)
 ;
"RTN","LEXAR",14,0)
 ; Up-Arrow -----------------------------------------------
"RTN","LEXAR",15,0)
 ;
"RTN","LEXAR",16,0)
 ; ^#            Jump to # on list
"RTN","LEXAR",17,0)
 ; ^             End dialog with the user
"RTN","LEXAR",18,0)
 ; ^^            End dialog with the application
"RTN","LEXAR",19,0)
 ;
"RTN","LEXAR",20,0)
 ; Question -----------------------------------------------
"RTN","LEXAR",21,0)
 ;
"RTN","LEXAR",22,0)
 ; ?             Standard help in LEX("HLP")
"RTN","LEXAR",23,0)
 ; ??            Extended help in LEX("HLP")
"RTN","LEXAR",24,0)
 ; ?#            Definition for # in LEX("HLP")
"RTN","LEXAR",25,0)
 ;
"RTN","LEXAR",26,0)
 ; Null ---------------------------------------------------
"RTN","LEXAR",27,0)
 ;
"RTN","LEXAR",28,0)
 ;               Advance the selection list
"RTN","LEXAR",29,0)
 ;
"RTN","LEXAR",30,0)
 ; String -------------------------------------------------
"RTN","LEXAR",31,0)
 ;
"RTN","LEXAR",32,0)
 ; Narrative     Return and store Unresolved Narrative
"RTN","LEXAR",33,0)
 ;
"RTN","LEXAR",34,0)
 ; --------------------------------------------------------
"RTN","LEXAR",35,0)
EN(LEXUR) ; Interpret user response
"RTN","LEXAR",36,0)
 G:'$D(LEX) APN K LEX("HLP") N LEXLL,LEXMAX
"RTN","LEXAR",37,0)
 S:$D(LEX("LIST",0))&(+($G(^TMP("LEXSCH",$J,"NUM",0)))>0) LEX=+($G(^TMP("LEXSCH",$J,"NUM",0)))
"RTN","LEXAR",38,0)
 I LEXUR="END",+LEX>0 S LEXUR="^"_LEX
"RTN","LEXAR",39,0)
 S LEXLL=+($G(^TMP("LEXSCH",$J,"LEN",0))) S:LEXLL=0 LEXLL=5
"RTN","LEXAR",40,0)
 S LEXMAX=+($G(^TMP("LEXSCH",$J,"LST",0))) S LEXUR=$G(LEXUR)
"RTN","LEXAR",41,0)
 S (LEX("RES"),^TMP("LEXSCH",$J,"RES",0))=LEXUR,^TMP("LEXSCH",$J,"RES",1)="User Response"
"RTN","LEXAR",42,0)
 ; Timed out/Quit
"RTN","LEXAR",43,0)
 I LEXUR="DTOUT"!(LEXUR="QUIT") D EDA Q
"RTN","LEXAR",44,0)
 ; Yes/No response list has one entry
"RTN","LEXAR",45,0)
 I +($G(LEX))=1,+LEXUR=0,LEXUR'["^" D
"RTN","LEXAR",46,0)
 . I $E(LEXUR,1)="Y"!($E(LEXUR,1)="y") S LEXUR=1 Q
"RTN","LEXAR",47,0)
 . I LEXUR["?" D HLP^LEXAR3 Q
"RTN","LEXAR",48,0)
 . S LEXUR=""
"RTN","LEXAR",49,0)
 ; Null (Page Down)
"RTN","LEXAR",50,0)
 I LEXUR="" D NULL^LEXAR2 G END
"RTN","LEXAR",51,0)
 ; Minus (Page Up)
"RTN","LEXAR",52,0)
 I $E(LEXUR,1)="-" D LIST^LEXAL2("PGUP") G END
"RTN","LEXAR",53,0)
 ; Help
"RTN","LEXAR",54,0)
 I LEXUR["?" D HLP^LEXAR3 G END
"RTN","LEXAR",55,0)
 ; Up Arrow
"RTN","LEXAR",56,0)
 I LEXUR["^",$D(^TMP("LEXSCH",$J)) D UPA^LEXAR2(LEXUR) G END
"RTN","LEXAR",57,0)
 ; Select
"RTN","LEXAR",58,0)
 I +LEXUR>0,+LEXUR'>LEXMAX D SEL^LEXAR4(+LEXUR) G END
"RTN","LEXAR",59,0)
 ; User Unresolved Narrative
"RTN","LEXAR",60,0)
 I LEXUR=$G(^TMP("LEXSCH",$J,"NAR",0)),+($G(^TMP("LEXSCH",$J,"UNR",0)))=1 D  G END
"RTN","LEXAR",61,0)
 . D SAVE^LEXAR6
"RTN","LEXAR",62,0)
APN ; Application Unresolved Narrative
"RTN","LEXAR",63,0)
 I LEXUR["^",'$D(^TMP("LEXSCH",$J)),+(LEXUR)>0,$D(^LEX(757.01,+LEXUR,0)),$L($P(LEXUR,"^",2)) D  Q
"RTN","LEXAR",64,0)
 . K LEX D COM^LEXAR6(LEXUR)
"RTN","LEXAR",65,0)
 G END
"RTN","LEXAR",66,0)
 Q
"RTN","LEXAR",67,0)
END ; End of Interpretation of the Users Response
"RTN","LEXAR",68,0)
 S:$D(^TMP("LEXSCH",$J)) (LEX("RES"),^TMP("LEXSCH",$J,"RES",0))=LEXUR,^TMP("LEXSCH",$J,"RES",1)="User Response"
"RTN","LEXAR",69,0)
 S:$D(LEX("LIST",0))&(+($G(^TMP("LEXSCH",$J,"NUM",0)))>0) LEX=+($G(^TMP("LEXSCH",$J,"NUM",0)))
"RTN","LEXAR",70,0)
 Q
"RTN","LEXAR",71,0)
SEL ; Selection made
"RTN","LEXAR",72,0)
 K LEX("RES"),LEX("ERR"),LEX("LIST"),LEX("MIN"),LEX("MAX"),LEX("MAT"),LEX("HLP")
"RTN","LEXAR",73,0)
 D NAR,EMF,KLST,KSCH S:$D(LEX("SEL")) LEX=0 Q
"RTN","LEXAR",74,0)
EDU ; End Dialog with the User
"RTN","LEXAR",75,0)
 D NAR,EMF,KLST,KARL S LEX=0 Q
"RTN","LEXAR",76,0)
EDA ; End Dialog with the Application
"RTN","LEXAR",77,0)
 K LEX D KLST,KSCH Q
"RTN","LEXAR",78,0)
LST ; List exist
"RTN","LEXAR",79,0)
 D NAR,MAX,MIN,MAT,EML Q
"RTN","LEXAR",80,0)
 ;
"RTN","LEXAR",81,0)
KLST ; Kill Global List 
"RTN","LEXAR",82,0)
 ;      ^TMP("LEXFND",$J)
"RTN","LEXAR",83,0)
 ;      ^TMP("LEXHIT",$J)
"RTN","LEXAR",84,0)
 K ^TMP("LEXFND",$J),^TMP("LEXHIT",$J) Q
"RTN","LEXAR",85,0)
KSCH ; Kill Search Variables
"RTN","LEXAR",86,0)
 ;      ^TMP("LEXSCH",$J)
"RTN","LEXAR",87,0)
 K ^TMP("LEXSCH",$J) Q
"RTN","LEXAR",88,0)
KARL ; Kill Array List and supporting variables
"RTN","LEXAR",89,0)
 ;       LEX("LIST"),LEX("MAT"),LEX("MIN"),LEX("MAX")
"RTN","LEXAR",90,0)
 K LEX("LIST"),LEX("MAT"),LEX("MIN"),LEX("MAX") Q
"RTN","LEXAR",91,0)
LEX ; Set LEX to the number of entries on the list
"RTN","LEXAR",92,0)
 S:+($G(^TMP("LEXSCH",$J,"NUM",0)))>0 LEX=+($G(^TMP("LEXSCH",$J,"NUM",0))) Q
"RTN","LEXAR",93,0)
NAR ; Set LEX("NAR") to the user narrative
"RTN","LEXAR",94,0)
 K LEX("NAR") S:$L($G(^TMP("LEXSCH",$J,"NAR",0))) LEX("NAR")=$G(^TMP("LEXSCH",$J,"NAR",0)) Q
"RTN","LEXAR",95,0)
MAX ; Set LEX("MAX") to the last entry reviewed by the user
"RTN","LEXAR",96,0)
 K LEX("MAX") S:+($G(^TMP("LEXSCH",$J,"LST",0)))>0 LEX("MAX")=+($G(^TMP("LEXSCH",$J,"LST",0))) Q
"RTN","LEXAR",97,0)
MIN ; Set LEX("MIN") to the first entry reviewed by the user
"RTN","LEXAR",98,0)
 K LEX("MIN") S:+($G(LEX("MAX")))>0 LEX("MIN")=1 Q
"RTN","LEXAR",99,0)
EML ; Set LEX("EXM") post-selection IEN^Expression text
"RTN","LEXAR",100,0)
 K LEX("EXM") S:$L($G(^TMP("LEXSCH",$J,"EXM",2))) LEX("EXM")=$G(^TMP("LEXSCH",$J,"EXM",2)) Q
"RTN","LEXAR",101,0)
EMF ; Set LEX("EXM") pre-selection LIST#^Expression text
"RTN","LEXAR",102,0)
 K LEX("EXM") S:$L($G(^TMP("LEXSCH",$J,"EXM",0)))&($L($G(^TMP("LEXSCH",$J,"EXM",1)))) LEX("EXM")=$G(^TMP("LEXSCH",$J,"EXM",0))_"^"_$G(^TMP("LEXSCH",$J,"EXM",1)) Q
"RTN","LEXAR",103,0)
MAT ; Set "matches found" string and top of list flag
"RTN","LEXAR",104,0)
 ;       LEX("MAT")                 # Matches found
"RTN","LEXAR",105,0)
 ;       ^TMP("LEXSCH",$J,"TOL",0)  1 - Top of list
"RTN","LEXAR",106,0)
 ;                                   0 - Not top of list
"RTN","LEXAR",107,0)
 K LEX("MAT") I $D(LEX("SEL"))!('$D(^TMP("LEXSCH",$J)))!('$D(LEX("LIST"))) Q
"RTN","LEXAR",108,0)
 N LEXOL,LEXL S LEXOL=$G(^TMP("LEXSCH",$J,"TOL",0)),LEXL=$O(LEX("LIST",0))
"RTN","LEXAR",109,0)
 S:LEXOL'=0&(LEXL=1) ^TMP("LEXSCH",$J,"TOL",0)=1
"RTN","LEXAR",110,0)
 S:LEXOL'=0&(LEXL'=1) ^TMP("LEXSCH",$J,"TOL",0)=0
"RTN","LEXAR",111,0)
 S:LEXOL=1&($L($G(^TMP("LEXSCH",$J,"MAT",0)))) LEX("MAT")=$G(^TMP("LEXSCH",$J,"MAT",0))
"RTN","LEXAR",112,0)
 Q
"RTN","LEXAR2")
0^190^B1018662
"RTN","LEXAR2",1,0)
LEXAR2 ; ISL Look-up Response (up arrow/jump/null); 09-23-96
"RTN","LEXAR2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAR2",3,0)
 ;
"RTN","LEXAR2",4,0)
UPA(LEXUR) ; Up-Arrow Detected
"RTN","LEXAR2",5,0)
 I LEXUR="^^" S X=LEXUR D EDA^LEXAR Q
"RTN","LEXAR2",6,0)
 N LEXR S LEXR=$P(LEXUR,"^",2,299)
"RTN","LEXAR2",7,0)
 I +LEXR>0,+LEXR'>LEX D JMP Q
"RTN","LEXAR2",8,0)
 S LEXUR=$E(LEXUR,1) I LEXUR="^",+LEXR=0 S X=LEXUR D EDU^LEXAR Q
"RTN","LEXAR2",9,0)
 Q
"RTN","LEXAR2",10,0)
NULL ; Null response
"RTN","LEXAR2",11,0)
 N LEXEOA,LEXN S LEXEOA=+($P($G(LEX("LIST",0)),"^",1))
"RTN","LEXAR2",12,0)
 I LEXEOA=0 D EDA^LEXAR Q
"RTN","LEXAR2",13,0)
 S LEX=+($G(^TMP("LEXSCH",$J,"NUM",0))) I LEX=0 D EDA^LEXAR Q
"RTN","LEXAR2",14,0)
 I LEXEOA=LEX!(LEXEOA>LEX) D EDU^LEXAR Q
"RTN","LEXAR2",15,0)
 I LEXEOA'=LEX,LEXEOA<LEX D LIST^LEXAL2("PGDN")
"RTN","LEXAR2",16,0)
 Q
"RTN","LEXAR2",17,0)
JMP ; Jump to # on list
"RTN","LEXAR2",18,0)
 S LEXR=+($G(LEXR)) Q:LEXR'>0!(LEXR>LEX)
"RTN","LEXAR2",19,0)
 D LIST^LEXAL2(LEXR)
"RTN","LEXAR2",20,0)
 Q
"RTN","LEXAR3")
0^191^B21249688
"RTN","LEXAR3",1,0)
LEXAR3 ; ISL Look-up Response (Help, Def, MAX)    ; 09-23-96
"RTN","LEXAR3",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAR3",3,0)
 ;
"RTN","LEXAR3",4,0)
HLP ; Help
"RTN","LEXAR3",5,0)
 N LEXRP,LEXMAX K LEX("HLP")
"RTN","LEXAR3",6,0)
 S LEXMAX=+($G(^TMP("LEXSCH",$J,"LST",0)))
"RTN","LEXAR3",7,0)
 I LEXUR["??" D EXT Q
"RTN","LEXAR3",8,0)
 S LEXRP=+($P(LEXUR,"?",2,229))
"RTN","LEXAR3",9,0)
 I LEXRP>0,LEXRP'>LEXMAX D  Q
"RTN","LEXAR3",10,0)
 . S LEXRP=+($G(^TMP("LEXHIT",$J,LEXRP))) D DEF(LEXRP)
"RTN","LEXAR3",11,0)
 I LEXUR["?",LEXRP'["?",+LEXRP'>0 D STD
"RTN","LEXAR3",12,0)
 Q
"RTN","LEXAR3",13,0)
STD ; Standard Help   LEX("HLP",
"RTN","LEXAR3",14,0)
 I +($G(LEX))=1 D STD2 Q
"RTN","LEXAR3",15,0)
 N LEXC S LEXC=+($G(LEX("HLP",0))),LEXC=LEXC+1,LEX("HLP",0)=LEXC
"RTN","LEXAR3",16,0)
 S:LEX'>LEXMAX LEX("HLP",LEXC)="Select 1-"_LEXMAX_", ^ (quit), or ?# (help on a term)"
"RTN","LEXAR3",17,0)
 S:LEX>LEXMAX LEX("HLP",LEXC)="Select 1-"_LEXMAX_", ^ (quit), ^# (jump - "_LEX_"), ?# (term help), or <Return> for more"
"RTN","LEXAR3",18,0)
 D:$D(LEX("LIST")) LST^LEXAR
"RTN","LEXAR3",19,0)
 Q
"RTN","LEXAR3",20,0)
STD2 ; Standard Help   LEX("HLP",
"RTN","LEXAR3",21,0)
 K LEX("HLP") S LEXRP=+($G(^TMP("LEXHIT",$J,1))) D DEF(LEXRP)
"RTN","LEXAR3",22,0)
 N LEXC S LEXC=+($G(LEX("HLP",0))) I LEXC>0 S LEXC=LEXC+1,LEX("HLP",LEXC)="",LEX("HLP",0)=LEXC
"RTN","LEXAR3",23,0)
 S LEXC=LEXC+1,LEX("HLP",0)=LEXC,LEX("HLP",LEXC)="Enter ""Yes"" to select, ""No"" to ignore, ""^"" to quit or ""?"" for term help"
"RTN","LEXAR3",24,0)
 D:$D(LEX("LIST")) LST^LEXAR
"RTN","LEXAR3",25,0)
 Q
"RTN","LEXAR3",26,0)
EXT ; Extended Help   LEX("HLP",
"RTN","LEXAR3",27,0)
 I +($G(LEX))=1 D EXT2 Q
"RTN","LEXAR3",28,0)
 N LEXCP,LEXTP,LEXM S LEXTP=LEX\LEXLL S:LEX#LEXLL>0 LEXTP=LEXTP+1
"RTN","LEXAR3",29,0)
 S LEXCP=LEXMAX\LEXLL S:LEXMAX#LEXLL>0 LEXCP=LEXCP+1
"RTN","LEXAR3",30,0)
 S LEXM=$S(LEXTP>LEXCP:1,1:0) N LEXS,LEXE,LEXJ,LEXH,LEXR,LEXSTR,LEXC
"RTN","LEXAR3",31,0)
 S LEXC=+($G(LEX("HLP",0))) S LEXC=LEXC+1
"RTN","LEXAR3",32,0)
 S (LEXS,LEXE,LEXJ,LEXH,LEXR,LEXSTR)=""
"RTN","LEXAR3",33,0)
 S LEXS="You may select 1-"_LEXMAX
"RTN","LEXAR3",34,0)
 S LEXE="enter an ^ to quit" S:LEXM LEXJ="enter ^# to jump to another entry on the list (up to "_LEX_")"
"RTN","LEXAR3",35,0)
 S LEXH="enter ?# to display the definition of an entry marked with an asterisk (*)"
"RTN","LEXAR3",36,0)
 S:LEXM LEXR="or press <Return> to continue."
"RTN","LEXAR3",37,0)
 S:'LEXM LEXR="or press <Return> to quit without making a selection."
"RTN","LEXAR3",38,0)
 S LEXSTR=LEXS S:LEXE'="" LEXSTR=LEXSTR_", "_LEXE S:LEXJ'="" LEXSTR=LEXSTR_", "_LEXJ
"RTN","LEXAR3",39,0)
 S:LEXH'="" LEXSTR=LEXSTR_", "_LEXH S:LEXR'="" LEXSTR=LEXSTR_", "_LEXR
"RTN","LEXAR3",40,0)
 I $L(LEXSTR)>74 D
"RTN","LEXAR3",41,0)
 . F  Q:$L(LEXSTR)'>74  D
"RTN","LEXAR3",42,0)
 . . N LEXI F LEXI=74:-1:1 Q:$E(LEXSTR,LEXI)=" "
"RTN","LEXAR3",43,0)
 . . S LEX("HLP",LEXC)=$E(LEXSTR,1,(LEXI-1)),LEX("HLP",0)=LEXC
"RTN","LEXAR3",44,0)
 . . S LEXC=LEXC+1,LEXSTR=$E(LEXSTR,(LEXI+1),$L(LEXSTR))
"RTN","LEXAR3",45,0)
 . I $L(LEXSTR)>0,$L(LEXSTR)'>74 S LEXC=LEXC+1,LEX("HLP",LEXC)=LEXSTR,LEX("HLP",0)=LEXC
"RTN","LEXAR3",46,0)
 D:$D(LEX("LIST")) LST^LEXAR
"RTN","LEXAR3",47,0)
 Q
"RTN","LEXAR3",48,0)
EXT2 ; Extended help for one
"RTN","LEXAR3",49,0)
 N LEXS,LEXE,LEXH,LEXSTR,LEXC,LEXDEF,LEXRP
"RTN","LEXAR3",50,0)
 S (LEXS,LEXE,LEXJ,LEXC,LEXH,LEXR,LEXSTR)=""
"RTN","LEXAR3",51,0)
 S LEXRP=+($G(^TMP("LEXHIT",$J,1))) D DEF(LEXRP)
"RTN","LEXAR3",52,0)
 S LEXC=+($G(LEX("HLP",0))) I LEXC>0 S LEXC=LEXC+1,LEX("HLP",LEXC)="",LEX("HLP",0)=LEXC
"RTN","LEXAR3",53,0)
 S LEXC=LEXC+1
"RTN","LEXAR3",54,0)
 S LEXDEF=+($G(^TMP("LEXHIT",$J,1)))
"RTN","LEXAR3",55,0)
 S LEXDEF=$S($D(^LEX(757.01,+LEXDEF,3)):1,1:0)
"RTN","LEXAR3",56,0)
 S LEXS="There was only one term found.  Enter ""Yes"" to select, ""No"" to ignore"
"RTN","LEXAR3",57,0)
 S LEXE="or an ""^"" to quit"
"RTN","LEXAR3",58,0)
 S LEXH="" S:+LEXDEF>0 LEXH="""?"" to display the term definition"
"RTN","LEXAR3",59,0)
 S LEXSTR=LEXS
"RTN","LEXAR3",60,0)
 S:LEXH'="" LEXSTR=LEXSTR_", "_LEXH
"RTN","LEXAR3",61,0)
 S:LEXE'="" LEXSTR=LEXSTR_", "_LEXE
"RTN","LEXAR3",62,0)
 I $L(LEXSTR)>74 D
"RTN","LEXAR3",63,0)
 . F  Q:$L(LEXSTR)'>74  D
"RTN","LEXAR3",64,0)
 . . N LEXI F LEXI=74:-1:1 Q:$E(LEXSTR,LEXI)=" "
"RTN","LEXAR3",65,0)
 . . S LEX("HLP",LEXC)=$E(LEXSTR,1,(LEXI-1)),LEX("HLP",0)=LEXC
"RTN","LEXAR3",66,0)
 . . S LEXC=LEXC+1,LEXSTR=$E(LEXSTR,(LEXI+1),$L(LEXSTR))
"RTN","LEXAR3",67,0)
 . I $L(LEXSTR)>0,$L(LEXSTR)'>74 S LEXC=LEXC+1,LEX("HLP",LEXC)=LEXSTR,LEX("HLP",0)=LEXC
"RTN","LEXAR3",68,0)
 D:$D(LEX("LIST")) LST^LEXAR
"RTN","LEXAR3",69,0)
 Q
"RTN","LEXAR3",70,0)
DH ; Display help
"RTN","LEXAR3",71,0)
 N LEXI S LEXI=0
"RTN","LEXAR3",72,0)
 F  S LEXI=$O(LEX("HLP",LEXI)) Q:+LEXI=0  W !,"  ",LEX("HLP",LEXI)
"RTN","LEXAR3",73,0)
 Q
"RTN","LEXAR3",74,0)
DA ; Display help
"RTN","LEXAR3",75,0)
 Q
"RTN","LEXAR3",76,0)
 N LEXI S LEXI=0
"RTN","LEXAR3",77,0)
 F  S LEXI=$O(LEX("LIST",LEXI)) Q:+LEXI=0  W !,"  ",LEX("LIST",LEXI)
"RTN","LEXAR3",78,0)
 Q
"RTN","LEXAR3",79,0)
DEF(LEXIEN) ; Definition Help LEX("HLP",
"RTN","LEXAR3",80,0)
 N LEXR S (LEXR,LEXIEN)=+($G(LEXIEN))
"RTN","LEXAR3",81,0)
 D:$D(LEX("LIST")) LST^LEXAR Q:LEXIEN'>0
"RTN","LEXAR3",82,0)
 N LEXLN,LEXC S (LEXLN,LEXC)=0 K LEX("HLP")
"RTN","LEXAR3",83,0)
 I '$D(^LEX(757.01,LEXIEN,3,1)),$P($G(^LEX(757.01,LEXIEN,1)),"^",2)'=1 D
"RTN","LEXAR3",84,0)
 . S LEXIEN=+($G(^LEX(757.01,LEXIEN,1))),LEXIEN=+($G(^LEX(757,LEXIEN,0)))
"RTN","LEXAR3",85,0)
 I $D(^LEX(757.01,LEXIEN,0)),$L($G(^LEX(757.01,LEXIEN,3,1,0))) D
"RTN","LEXAR3",86,0)
 . S LEXC=1,LEX("HLP",LEXC)=$G(^LEX(757.01,LEXIEN,0)) S LEXC=LEXC+1
"RTN","LEXAR3",87,0)
 . S LEX("HLP",LEXC)="",LEXC("HLP",0)=LEXC
"RTN","LEXAR3",88,0)
 . F  S LEXLN=$O(^LEX(757.01,LEXIEN,3,LEXLN)) Q:+LEXLN=0  D
"RTN","LEXAR3",89,0)
 . . S LEXC=LEXC+1 S LEX("HLP",LEXC)=^LEX(757.01,LEXIEN,3,LEXLN,0),LEX("HLP",0)=LEXC
"RTN","LEXAR3",90,0)
 I '$D(LEX("HLP")) D
"RTN","LEXAR3",91,0)
 . K LEX("HLP") S:$L($G(^LEX(757.01,LEXR,0))) LEX("HLP",1)="No definition found for "_$C(34)_^LEX(757.01,LEXR,0)_$C(34)
"RTN","LEXAR3",92,0)
 . S:'$L($G(^LEX(757.01,LEXR,0))) LEX("HLP",1)="No definition found"
"RTN","LEXAR3",93,0)
 D:$D(LEX("LIST")) LST^LEXAR
"RTN","LEXAR3",94,0)
 Q
"RTN","LEXAR4")
0^192^B6929474
"RTN","LEXAR4",1,0)
LEXAR4 ; ISL Look-up Response (Select Entry)      ; 09-23-96
"RTN","LEXAR4",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAR4",3,0)
 ;
"RTN","LEXAR4",4,0)
SEL(LEXUR) ; Select # on list
"RTN","LEXAR4",5,0)
 K LEX("SEL") N LEXMAX,LEXLF S LEXLF=1,LEXMAX=+($G(^TMP("LEXSCH",$J,"LST",0)))
"RTN","LEXAR4",6,0)
 S LEX=+($G(LEX)),LEXUR=+($G(LEXUR))
"RTN","LEXAR4",7,0)
 I LEXMAX=0!(LEX=0) D EDA^LEXAR G SELQ
"RTN","LEXAR4",8,0)
 K LEX("ERR"),LEX("SEL") I LEXUR'>0!(LEXUR>LEXMAX) D  G SELQ
"RTN","LEXAR4",9,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXAR4",10,0)
 . S LEX("ERR",LEX("ERR",0))="User response out of range"
"RTN","LEXAR4",11,0)
 I '$D(^TMP("LEXHIT",$J,LEXUR)) D  G SELQ
"RTN","LEXAR4",12,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXAR4",13,0)
 . S LEX("ERR",LEX("ERR",0))="Selection is either out of range or invalid"
"RTN","LEXAR4",14,0)
 N LEXEXP S LEXEXP=+($P(^TMP("LEXHIT",$J,LEXUR),"^",1))
"RTN","LEXAR4",15,0)
 I '$D(^LEX(757.01,LEXEXP,0)) D  G SELQ
"RTN","LEXAR4",16,0)
 . S LEX("ERR",0)=+($G(LEX("ERR",0)))+1
"RTN","LEXAR4",17,0)
 . S LEX("ERR",LEX("ERR",0))="Selection not found in the Lexicon"
"RTN","LEXAR4",18,0)
 D SET(LEXEXP),EDU^LEXAR
"RTN","LEXAR4",19,0)
 G SELQ
"RTN","LEXAR4",20,0)
SET(LEXEXP) ; Set LEX("SEL") Nodes
"RTN","LEXAR4",21,0)
 K LEX("SEL") D SETEXP^LEXAR5(LEXEXP)
"RTN","LEXAR4",22,0)
 N LEXMC S LEXMC=+($P(^LEX(757.01,LEXEXP,1),"^",1))
"RTN","LEXAR4",23,0)
 ; If selected from the list increment frequency
"RTN","LEXAR4",24,0)
 D:$L($G(LEXMAX)) INC(LEXMC)
"RTN","LEXAR4",25,0)
 N LEXMCE S LEXMCE=+(^LEX(757,LEXMC,0))
"RTN","LEXAR4",26,0)
 D SETSRC^LEXAR5(LEXMCE),SETDEF^LEXAR5(LEXMCE)
"RTN","LEXAR4",27,0)
 D SETSTY^LEXAR5(LEXMC)
"RTN","LEXAR4",28,0)
 N LEXE S LEXE=0 F  S LEXE=$O(^LEX(757.01,"AMC",LEXMC,LEXE)) Q:+LEXE=0  D
"RTN","LEXAR4",29,0)
 . Q:LEXE=LEXEXP  D SETEXP^LEXAR5(LEXE),SETSRC^LEXAR5(LEXE)
"RTN","LEXAR4",30,0)
 G:+($G(LEXLF))=0 SELQ
"RTN","LEXAR4",31,0)
 Q
"RTN","LEXAR4",32,0)
INC(LEXMC) ; Increment frequency counter in ^LEX(757)
"RTN","LEXAR4",33,0)
 N LEXF,LEXFQ S LEXMC=+($G(LEXMC)) Q:LEXMC=0  Q:'$D(^LEX(757,LEXMC))
"RTN","LEXAR4",34,0)
 S ZTSAVE("LEXMC")="",ZTRTN="FQ^LEXAR4",ZTDESC="Updating Lexicon Frequencies",ZTIO="",ZTDTH=$H
"RTN","LEXAR4",35,0)
 D ^%ZTLOAD,HOME^%ZIS K Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN
"RTN","LEXAR4",36,0)
 Q
"RTN","LEXAR4",37,0)
FQ ; Edit Concept Frequency
"RTN","LEXAR4",38,0)
 N LEXA,LEXM,LEXQ,DA,DIC,DIE S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXAR4",39,0)
 S LEXM=+($G(LEXMC)) Q:LEXM=0  Q:'$D(^LEX(757,LEXM,0))
"RTN","LEXAR4",40,0)
 I '$D(^LEX(757.001,LEXM,0)) D AFQ G FQQ
"RTN","LEXAR4",41,0)
 ;  S LEXQ=+($G(LEXFQ)) S LEXQ=LEXQ+1,LEXA=0
"RTN","LEXAR4",42,0)
 S DA=+($G(LEXF)) Q:+DA=0  Q:'$D(^LEX(757.001,DA,0))
"RTN","LEXAR4",43,0)
 S LEXM=+($G(LEXMC)) Q:'$D(^LEX(757,LEXMC,0))  S LEXQ=+($G(LEXFQ)) S LEXQ=LEXQ+1,LEXA=0
"RTN","LEXAR4",44,0)
 S (DIC,DIE)="^LEX(757.001,",DR="2////^S X=LEXQ"
"RTN","LEXAR4",45,0)
EFQ ; Lock record and edit frequency record
"RTN","LEXAR4",46,0)
 L +^LEX(757.001,+DA):1 I '$T S LEXA=LEXA+1 H 2 G:LEXA<4 EFQ
"RTN","LEXAR4",47,0)
 D:LEXA<4 ^DIE L -^LEX(757.001,+DA)
"RTN","LEXAR4",48,0)
 G FQQ
"RTN","LEXAR4",49,0)
 Q
"RTN","LEXAR4",50,0)
AFQ ; Add frequency record
"RTN","LEXAR4",51,0)
 N DIC,DA S ^LEX(757.001,LEXM,0)=LEXM_"^0^0" S DIC="^LEX(757.001,",DA=LEXM D SET^LEXNDX2 Q
"RTN","LEXAR4",52,0)
 Q
"RTN","LEXAR4",53,0)
FQQ Q
"RTN","LEXAR4",54,0)
SELQ ; Quit
"RTN","LEXAR4",55,0)
 D:$D(LEX("SEL")) SEL^LEXAR
"RTN","LEXAR4",56,0)
 D:$D(LEX("LIST")) LST^LEXAR
"RTN","LEXAR4",57,0)
 Q
"RTN","LEXAR5")
0^193^B22901752
"RTN","LEXAR5",1,0)
LEXAR5 ; ISL Look-up Response (Select Entry)      ; 09-23-96
"RTN","LEXAR5",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAR5",3,0)
 ;
"RTN","LEXAR5",4,0)
SETEXP(LEXX) ; Set LEX("SEL","EXP")
"RTN","LEXAR5",5,0)
 S LEXX=+($G(LEXX)) Q:LEXX'>0  Q:'$D(^LEX(757.01,LEXX,0))
"RTN","LEXAR5",6,0)
 N LEXYPE S LEXYPE=$$TYPE(LEXX)
"RTN","LEXAR5",7,0)
 N LEXC S LEXC=+($G(LEX("SEL","EXP",0))),LEXC=LEXC+1
"RTN","LEXAR5",8,0)
 S LEX("SEL","EXP",LEXC)=LEXX_"^"_^LEX(757.01,LEXX,0),LEX("SEL","EXP",0)=LEXC
"RTN","LEXAR5",9,0)
 S LEX("SEL","EXP","B",LEXX,LEXC)=""
"RTN","LEXAR5",10,0)
 S:LEXYPE'="" LEX("SEL","EXP","C",LEXYPE,LEXC)=""
"RTN","LEXAR5",11,0)
 Q
"RTN","LEXAR5",12,0)
TYPE(LEXX) ; Expression Type
"RTN","LEXAR5",13,0)
 N LEXYPE S LEXYPE=$P($G(^LEX(757.01,LEXX,1)),"^",2)
"RTN","LEXAR5",14,0)
 I +LEXYPE'>0!('$D(^LEX(757.011,+LEXYPE,0))) S LEXYPE="OTH"
"RTN","LEXAR5",15,0)
 I +LEXYPE>0,$D(^LEX(757.011,+LEXYPE,0)) D
"RTN","LEXAR5",16,0)
 . S LEXYPE=$P($G(^LEX(757.011,+LEXYPE,0)),"^",1)
"RTN","LEXAR5",17,0)
 . S:$L(LEXYPE)<3 LEXYPE="OTH"
"RTN","LEXAR5",18,0)
 . S LEXYPE=$$UP^XLFSTR($E(LEXYPE,1,3))
"RTN","LEXAR5",19,0)
 S LEXX=LEXYPE Q LEXX
"RTN","LEXAR5",20,0)
SETDEF(LEXX) ; Set LEX("SEL","SIG")
"RTN","LEXAR5",21,0)
 S LEXX=+($G(LEXX)) Q:LEXX=0
"RTN","LEXAR5",22,0)
 Q:'$D(^LEX(757.01,LEXX,3,1,0))
"RTN","LEXAR5",23,0)
 N LEXC,LEXR S LEXR=0
"RTN","LEXAR5",24,0)
 F  S LEXR=$O(^LEX(757.01,LEXX,3,LEXR)) Q:+LEXR=0  D
"RTN","LEXAR5",25,0)
 . S LEXC=+($G(LEX("SEL","SIG",0))),LEXC=LEXC+1
"RTN","LEXAR5",26,0)
 . S LEX("SEL","SIG",LEXC)=$G(^LEX(757.01,LEXX,3,LEXR,0))
"RTN","LEXAR5",27,0)
 . S LEX("SEL","SIG",0)=LEXC
"RTN","LEXAR5",28,0)
 Q
"RTN","LEXAR5",29,0)
SETSTY(LEXX) ; Set LEX("SEL","STY")
"RTN","LEXAR5",30,0)
 S LEXX=+($G(LEXX)) Q:LEXX=0
"RTN","LEXAR5",31,0)
 Q:'$D(^LEX(757.1,"B",LEXX))
"RTN","LEXAR5",32,0)
 N LEXC,LEXR,LEXSC,LEXST S LEXR=0
"RTN","LEXAR5",33,0)
 F  S LEXR=$O(^LEX(757.1,"B",LEXX,LEXR)) Q:+LEXR=0  D
"RTN","LEXAR5",34,0)
 . S LEXSC=+($P($G(^LEX(757.1,LEXR,0)),"^",2)) Q:LEXSC=0  Q:'$D(^LEX(757.11,LEXSC))
"RTN","LEXAR5",35,0)
 . S LEXSC=$P($G(^LEX(757.11,LEXSC,0)),"^",2) Q:'$L(LEXSC)
"RTN","LEXAR5",36,0)
 . S LEXST=+($P($G(^LEX(757.1,LEXR,0)),"^",3)) Q:LEXST=0  Q:'$D(^LEX(757.12,LEXST))
"RTN","LEXAR5",37,0)
 . S LEXST=$P($G(^LEX(757.12,LEXST,0)),"^",2) Q:'$L(LEXST)
"RTN","LEXAR5",38,0)
 . S LEXC=+($G(LEX("SEL","STY",0))),LEXC=LEXC+1
"RTN","LEXAR5",39,0)
 . S LEX("SEL","STY",LEXC)=LEXSC_"^"_LEXST
"RTN","LEXAR5",40,0)
 . S LEX("SEL","STY",0)=LEXC
"RTN","LEXAR5",41,0)
 Q
"RTN","LEXAR5",42,0)
SETSRC(LEXX) ; Set LEX("SEL","SRC")
"RTN","LEXAR5",43,0)
 N LEXSO,LEXSRC,LEXS,LEXC S LEXS=0
"RTN","LEXAR5",44,0)
 F  S LEXS=$O(^LEX(757.02,"B",LEXX,LEXS)) Q:+LEXS=0  D
"RTN","LEXAR5",45,0)
 . Q:+($P($G(^LEX(757.02,LEXS,0)),"^",6))=1
"RTN","LEXAR5",46,0)
 . S LEXSO=$P(^LEX(757.02,LEXS,0),"^",2)
"RTN","LEXAR5",47,0)
 . Q:'$D(^LEX(757.02,"AVA",(LEXSO_" "),LEXX))
"RTN","LEXAR5",48,0)
 . S LEXSRC=+($P(^LEX(757.02,LEXS,0),"^",3)) Q:LEXSRC=0
"RTN","LEXAR5",49,0)
 . S LEXSRC=$P(^LEX(757.03,LEXSRC,0),"^",2) Q:'$L(LEXSRC)
"RTN","LEXAR5",50,0)
 . S LEXC=+($G(LEX("SEL","SRC",0))),LEXC=LEXC+1
"RTN","LEXAR5",51,0)
 . S LEX("SEL","SRC",LEXC)=LEXSRC_"^"_LEXSO_"^"_LEXX
"RTN","LEXAR5",52,0)
 . S LEX("SEL","SRC","B",LEXSRC,LEXC)=""
"RTN","LEXAR5",53,0)
 . S LEX("SEL","SRC","C",LEXSO,LEXC)=""
"RTN","LEXAR5",54,0)
 . S LEX("SEL","SRC","D",LEXX,LEXC)=""
"RTN","LEXAR5",55,0)
 . S LEX("SEL","SRC",0)=LEXC
"RTN","LEXAR5",56,0)
 D SETVAS(LEXX) Q
"RTN","LEXAR5",57,0)
SETVAS(LEXX) ; Find VA sources for LEX("SEL","VAS")
"RTN","LEXAR5",58,0)
 N LEXSAB,LEXRTN,LEXR,LEXVP F LEXSAB="ICD","ICP","CPT","DS4" D
"RTN","LEXAR5",59,0)
 . K LEXSRC S LEXRTN=LEXSAB_"^LEXAR5"
"RTN","LEXAR5",60,0)
 . D ALL^LEXSRC(LEXX,LEXSAB) I +($G(LEXSRC(0)))>0 D @LEXRTN
"RTN","LEXAR5",61,0)
 Q
"RTN","LEXAR5",62,0)
ICD ; Intl' Classification of Diseases (diagnosis)
"RTN","LEXAR5",63,0)
 N LEXI,LEXSO,LEXR,LEXVP S LEXI=0 F  S LEXI=$O(LEXSRC(LEXI)) Q:+LEXI=0  D
"RTN","LEXAR5",64,0)
 . S LEXSO=$G(LEXSRC(LEXI)) Q:LEXSO=""  Q:'$D(^ICD9("AB",(LEXSO_" ")))
"RTN","LEXAR5",65,0)
 . N LEXIVC S LEXIVC=$O(^ICD9("AB",(LEXSO_" "),0)) Q:+($P($G(^ICD9(LEXIVC,0)),"^",9))=1
"RTN","LEXAR5",66,0)
 . S LEXC=+($G(LEX("SEL","VAS",0))),LEXC=LEXC+1,LEXR=$O(^ICD9("AB",(LEXSO_" "),0)) Q:+LEXR'>0  S LEXVP=LEXR_";ICD9("
"RTN","LEXAR5",67,0)
 . D VAS("80",LEXSO,LEXX,LEXVP,LEXC)
"RTN","LEXAR5",68,0)
 Q
"RTN","LEXAR5",69,0)
ICP ; Intl' Classification of Diseases (procedures)
"RTN","LEXAR5",70,0)
 N LEXI,LEXSO,LEXR,LEXVP S LEXI=0 F  S LEXI=$O(LEXSRC(LEXI)) Q:+LEXI=0  D
"RTN","LEXAR5",71,0)
 . S LEXSO=$G(LEXSRC(LEXI)) Q:LEXSO=""  Q:'$D(^ICD0("AB",LEXSO))
"RTN","LEXAR5",72,0)
 . N LEXIVC S LEXIVC=$O(^ICD0("AB",LEXSO,0)) Q:+($P($G(^ICD0(LEXIVC,0)),"^",9))=1
"RTN","LEXAR5",73,0)
 . S LEXC=+($G(LEX("SEL","VAS",0))),LEXC=LEXC+1,LEXR=$O(^ICD0("AB",LEXSO,0)) Q:+LEXR'>0  S LEXVP=LEXR_";ICD0("
"RTN","LEXAR5",74,0)
 . D VAS("80.1",LEXSO,LEXX,LEXVP,LEXC)
"RTN","LEXAR5",75,0)
 Q
"RTN","LEXAR5",76,0)
CPT ; Current Procedural Terminology
"RTN","LEXAR5",77,0)
 N LEXI,LEXSO,LEXR,LEXVP S LEXI=0 F  S LEXI=$O(LEXSRC(LEXI)) Q:+LEXI=0  D
"RTN","LEXAR5",78,0)
 . S LEXSO=$G(LEXSRC(LEXI)) Q:LEXSO=""  Q:'$D(^ICPT("B",LEXSO))
"RTN","LEXAR5",79,0)
 . N LEXIVC S LEXIVC=$O(^ICPT("B",LEXSO,0)) Q:+($P($G(^ICPT(LEXIVC,0)),"^",4))=1
"RTN","LEXAR5",80,0)
 . S LEXC=+($G(LEX("SEL","VAS",0))),LEXC=LEXC+1,LEXR=$O(^ICPT("B",LEXSO,0)) Q:+LEXR'>0  S LEXVP=LEXR_";ICPT("
"RTN","LEXAR5",81,0)
 . D VAS("81",LEXSO,LEXX,LEXVP,LEXC)
"RTN","LEXAR5",82,0)
 Q
"RTN","LEXAR5",83,0)
DS4 ; Diagnostic and Statistical Manual of Mental Disorders
"RTN","LEXAR5",84,0)
 Q:'$D(LEXX)  S LEXX=+($G(LEXX)) Q:LEXX=0  Q:'$D(^LEX(757.01,LEXX,0))
"RTN","LEXAR5",85,0)
 N LEXEXP,LEXR,LEXVP,LEXI,LEXSO,LEXVA,LEXIEN,LEXC
"RTN","LEXAR5",86,0)
 S LEXEXP=$G(^LEX(757.01,LEXX,0)) Q:'$L(LEXEXP)
"RTN","LEXAR5",87,0)
 S LEXI=0 F  S LEXI=$O(LEXSRC(LEXI)) Q:+LEXI=0  D
"RTN","LEXAR5",88,0)
 . S LEXSO=$G(LEXSRC(LEXI)) Q:LEXSO=""
"RTN","LEXAR5",89,0)
 . Q:'$D(^YSD(627.7,"B",LEXSO))
"RTN","LEXAR5",90,0)
 . N LEXVA,LEXIEN S (LEXIEN,LEXVA)=0
"RTN","LEXAR5",91,0)
 . F  S LEXVA=$O(^YSD(627.7,"B",LEXSO,LEXVA)) Q:+LEXVA=0  D
"RTN","LEXAR5",92,0)
 . . I $$UP($G(^YSD(627.7,LEXVA,"D")))=$$UP(LEXEXP) S LEXIEN=LEXVA
"RTN","LEXAR5",93,0)
 . Q:LEXIEN=0  S LEXR=LEXIEN
"RTN","LEXAR5",94,0)
 . S LEXC=+($G(LEX("SEL","VAS",0))),LEXC=LEXC+1
"RTN","LEXAR5",95,0)
 . Q:+LEXR'>0  S LEXVP=LEXR_";YSD(627.7,"
"RTN","LEXAR5",96,0)
 . D VAS("627.7",LEXSO,LEXX,LEXVP,LEXC)
"RTN","LEXAR5",97,0)
 Q
"RTN","LEXAR5",98,0)
VAS(LEXFI,LEXSO,LEXIEN,LEXV,LEXCNT) ; Set LEX("SEL","VAS")
"RTN","LEXAR5",99,0)
 S LEX("SEL","VAS",LEXCNT)=LEXFI_"^"_LEXV_"^"_LEXSO_"^"_LEXIEN
"RTN","LEXAR5",100,0)
 S LEX("SEL","VAS","B",LEXFI,LEXCNT)=""
"RTN","LEXAR5",101,0)
 S LEX("SEL","VAS","C",LEXSO,LEXCNT)=""
"RTN","LEXAR5",102,0)
 S LEX("SEL","VAS","D",LEXIEN,LEXCNT)=""
"RTN","LEXAR5",103,0)
 S LEX("SEL","VAS","V",LEXV,LEXCNT)=""
"RTN","LEXAR5",104,0)
 S LEX("SEL","VAS",0)=LEXCNT
"RTN","LEXAR5",105,0)
 Q
"RTN","LEXAR5",106,0)
UP(X) Q $TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","LEXAR6")
0^194^B13302186
"RTN","LEXAR6",1,0)
LEXAR6 ; ISL Look-up Response (Unresolved Narr)   ; 09-23-96
"RTN","LEXAR6",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAR6",3,0)
 ;
"RTN","LEXAR6",4,0)
SAVE ; Save Unresolved Narrative
"RTN","LEXAR6",5,0)
 G:'$L($G(^TMP("LEXSCH",$J,"NAR",0))) SAVEQ
"RTN","LEXAR6",6,0)
 S ZTSAVE("^TMP(""LEXSCH"",$J,")=""
"RTN","LEXAR6",7,0)
 S ZTRTN="SV^LEXAR6",ZTDESC="Saving Unresolved Narrative"
"RTN","LEXAR6",8,0)
 S ZTIO="",ZTDTH=$H D ^%ZTLOAD,HOME^%ZIS
"RTN","LEXAR6",9,0)
 K Y,ZTSAVE,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN
"RTN","LEXAR6",10,0)
 D SET^LEXAR4(1)
"RTN","LEXAR6",11,0)
 G SAVEQ
"RTN","LEXAR6",12,0)
COM(LEXX) ; Save a comment as a Unresolved Narative
"RTN","LEXAR6",13,0)
 D KSCH^LEXAR
"RTN","LEXAR6",14,0)
 ; Internal Entry Number
"RTN","LEXAR6",15,0)
 S ^TMP("LEXSCH",$J,"IEN",0)=+($P(LEXX,"^",1))
"RTN","LEXAR6",16,0)
 G:+($G(^TMP("LEXSCH",$J,"IEN",0)))=0 SAVEQ
"RTN","LEXAR6",17,0)
 G:'$D(^LEX(757.01,+($G(^TMP("LEXSCH",$J,"IEN",0))),0)) SAVEQ
"RTN","LEXAR6",18,0)
 ; Expression
"RTN","LEXAR6",19,0)
 S ^TMP("LEXSCH",$J,"EXP",0)=$G(^LEX(757.01,+($G(^TMP("LEXSCH",$J,"IEN",0))),0))
"RTN","LEXAR6",20,0)
 G:'$L(^TMP("LEXSCH",$J,"EXP",0)) SAVEQ
"RTN","LEXAR6",21,0)
 ; Comment
"RTN","LEXAR6",22,0)
 S ^TMP("LEXSCH",$J,"COM",0)=$P(LEXX,"^",2)
"RTN","LEXAR6",23,0)
 G:'$L(^TMP("LEXSCH",$J,"COM",0)) SAVEQ
"RTN","LEXAR6",24,0)
 S ZTSAVE("^TMP(""LEXSCH"",$J,")=""
"RTN","LEXAR6",25,0)
 S ZTRTN="SV^LEXAR6",ZTDESC="Saving Unresolved Narrative Comment"
"RTN","LEXAR6",26,0)
 S ZTIO="",ZTDTH=$H D ^%ZTLOAD,HOME^%ZIS K Y,ZTSAVE,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN
"RTN","LEXAR6",27,0)
 K LEX,^TMP("LEXSCH",$J),^TMP("LEXHIT",$J),^TMP("LEXFND",$J)
"RTN","LEXAR6",28,0)
 G SAVEQ
"RTN","LEXAR6",29,0)
 Q
"RTN","LEXAR6",30,0)
SAVEQ ; End of Save
"RTN","LEXAR6",31,0)
 D EDA^LEXAR
"RTN","LEXAR6",32,0)
 Q
"RTN","LEXAR6",33,0)
SV ; Save an unresolved narrative in file 757.06
"RTN","LEXAR6",34,0)
 S ^TMP("LEXSEND",$J)=""
"RTN","LEXAR6",35,0)
 N %,%H,%I,LEXNAR,LEXDTG,LEXSCH,LEXNUM,LEXAPP,LEXIEN,LEXEXP
"RTN","LEXAR6",36,0)
 N LEXSVC,LEXLOC,LEXFLN,LEXIDX,LEXSCT,LEXFIL,LEXCOM
"RTN","LEXAR6",37,0)
 N DIC,DLAYGO D NOW^%DTC S LEXDTG=%
"RTN","LEXAR6",38,0)
 I '$D(^TMP("LEXSCH",$J,"COM",0)) D
"RTN","LEXAR6",39,0)
 . S LEXNAR=$TR($$UP^XLFSTR($E($G(^TMP("LEXSCH",$J,"NAR",0)),1,100)),";"," ") S:$L(LEXNAR)'>0 LEXNAR="UNKNOWN"
"RTN","LEXAR6",40,0)
 . S LEXSCH=$$UP^XLFSTR($E($G(^TMP("LEXSCH",$J,"SCH",0)),1,100)) S:$L(LEXSCH)'>0 LEXSCH="UNKNOWN"
"RTN","LEXAR6",41,0)
 . S LEXNUM=+($G(^TMP("LEXSCH",$J,"NUM",0)))
"RTN","LEXAR6",42,0)
 . S LEXAPP=$$UP^XLFSTR($E($G(^TMP("LEXSCH",$J,"APP",1)),1,63)) S:$L(LEXAPP)'>0 LEXAPP="UNKNOWN"
"RTN","LEXAR6",43,0)
 . S LEXSVC=$$UP^XLFSTR($E($G(^TMP("LEXSCH",$J,"SVC",0)),1,63)) S:$L(LEXSVC)'>0 LEXSVC="UNKNOWN"
"RTN","LEXAR6",44,0)
 . S LEXLOC=$$UP^XLFSTR($E($G(^TMP("LEXSCH",$J,"LOC",0)),1,63)) S:$L(LEXLOC)'>0 LEXLOC="UNKNOWN"
"RTN","LEXAR6",45,0)
 . S LEXFLN=$E($G(^TMP("LEXSCH",$J,"FLN",0)),1,7) S:$L(LEXFLN)'>0 LEXFLN="UNKNOWN"
"RTN","LEXAR6",46,0)
 . S LEXIDX=$E($$UP^XLFSTR($G(^TMP("LEXSCH",$J,"IDX",0))),1,8) S:$L(LEXIDX)'>0 LEXIDX="UNKNOWN"
"RTN","LEXAR6",47,0)
 . S LEXSCT=$$UP^XLFSTR($E($G(^TMP("LEXSCH",$J,"SCT",1)),1,63)) S:$L(LEXSCT)'>0 LEXSCT="NONE"
"RTN","LEXAR6",48,0)
 . S LEXFIL=$E($G(^TMP("LEXSCH",$J,"FIL",0)),1,245) S:$L(LEXFIL)'>0 LEXFIL="UNKNOWN"
"RTN","LEXAR6",49,0)
 . S DIC("DR")=".01///"_LEXNAR_";1///"_LEXDTG_";2///^S X=LEXSCH;3///^S X=LEXNUM;4///^S X=LEXAPP;5///^S X=LEXSVC;6///^S X=LEXLOC;7///^S X=LEXFLN;8///^S X=LEXIDX;9///^S X=LEXSCT;10///^S X=LEXFIL"
"RTN","LEXAR6",50,0)
 I $D(^TMP("LEXSCH",$J,"COM",0)) D
"RTN","LEXAR6",51,0)
 . S LEXNAR=$TR($$UP^XLFSTR($E($G(^TMP("LEXSCH",$J,"EXP",0)),1,100)),";"," ") S:$L(LEXNAR)'>0 LEXNAR="UNKNOWN"
"RTN","LEXAR6",52,0)
 . S LEXNUM=+($G(^TMP("LEXSCH",$J,"IEN",0)))
"RTN","LEXAR6",53,0)
 . S LEXSCH=$$UP^XLFSTR($E($G(^TMP("LEXSCH",$J,"COM",0)),1,200))
"RTN","LEXAR6",54,0)
 . S:$L(LEXSCH)'>0 LEXNAR=""
"RTN","LEXAR6",55,0)
 . S DIC("DR")=".01///"_LEXNAR_";1///"_LEXDTG_";11////^S X=LEXNUM;12///^S X=LEXSCH"
"RTN","LEXAR6",56,0)
 I $L($G(LEXNAR)) D
"RTN","LEXAR6",57,0)
 . K X,DD,DO S DIC="^LEX(757.06,",DIC(0)="L",DLAYGO=757.06,X=LEXNAR
"RTN","LEXAR6",58,0)
 . D FILE^DICN K DIC,DLAYGO
"RTN","LEXAR6",59,0)
 K DLAYGO,^TMP("LEXSCH",$J),^TMP("LEXSEND",$J) S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXAR6",60,0)
 D:+($P(^LEX(757.06,0),U,4))>49 SEND^LEXAR7
"RTN","LEXAR6",61,0)
 Q
"RTN","LEXAR7")
0^195^B7921190
"RTN","LEXAR7",1,0)
LEXAR7 ; ISL Look-up Response (MAIL)              ; 09-23-96
"RTN","LEXAR7",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAR7",3,0)
 ;
"RTN","LEXAR7",4,0)
 Q
"RTN","LEXAR7",5,0)
SEND ; Task MAILMAN to Send Unresolved Narratives to the ISC
"RTN","LEXAR7",6,0)
 G:$D(^TMP("LEXSEND")) SENDQ
"RTN","LEXAR7",7,0)
 I '$L($G(^LEX(757.06,0)))!(+($P($G(^LEX(757.06,0)),"^",4))<1) K ^TMP("LEXSEND") G SENDQ
"RTN","LEXAR7",8,0)
 S ZTRTN="ISC^LEXAR7",ZTDESC="Sending Narratives to ISC"
"RTN","LEXAR7",9,0)
 S ZTIO="",ZTDTH=$H
"RTN","LEXAR7",10,0)
 D ^%ZTLOAD,HOME^%ZIS K Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN
"RTN","LEXAR7",11,0)
SENDQ Q
"RTN","LEXAR7",12,0)
ISC ; Create MAILMAN Message for the ISC
"RTN","LEXAR7",13,0)
 N LEXCTR,LEXITEM S ^TMP("LEXSEND",$J,0)=0,DA=0,DIK="^LEX(757.06,",(LEXCTR,LEXITEM)=0
"RTN","LEXAR7",14,0)
 F  S DA=$O(^LEX(757.06,DA)) Q:+DA=0  D
"RTN","LEXAR7",15,0)
 . K LEXSTR S LEXYPE="UNR"
"RTN","LEXAR7",16,0)
 . I '$D(^LEX(757.06,DA,1)),'$D(^LEX(757.06,DA,2)),'$D(^LEX(757.06,DA,3)),$D(^LEX(757.06,DA,4)) S LEXYPE="COM"
"RTN","LEXAR7",17,0)
 . D ADD("   ",LEXYPE) S LEXITEM=LEXITEM+1
"RTN","LEXAR7",18,0)
 . ;D:$L($P($G(^LEX(757.06,DA,0)),U,2)) ADD("DTE",$P($G(^LEX(757.06,DA,0)),U,2))
"RTN","LEXAR7",19,0)
 . I $L($P($G(^LEX(757.06,DA,0)),U,1)) D
"RTN","LEXAR7",20,0)
 . . I LEXYPE="UNR" D ADD("NAR",$P($G(^LEX(757.06,DA,0)),U,1,2)) Q
"RTN","LEXAR7",21,0)
 . . D ADD("EXP",$P($G(^LEX(757.06,DA,0)),U,1)) Q
"RTN","LEXAR7",22,0)
 . D:$L($P($G(^LEX(757.06,DA,0)),U,3)) ADD("SCH",$P($G(^LEX(757.06,DA,0)),U,3))
"RTN","LEXAR7",23,0)
 . D:$L($P($G(^LEX(757.06,DA,0)),U,4)) ADD("FND",$P($G(^LEX(757.06,DA,0)),U,4))
"RTN","LEXAR7",24,0)
 . D:$L($P($G(^LEX(757.06,DA,1)),U,1)) ADD("APP",$P($G(^LEX(757.06,DA,1)),U,1))
"RTN","LEXAR7",25,0)
 . D:$L($P($G(^LEX(757.06,DA,1)),U,2)) ADD("SER",$P($G(^LEX(757.06,DA,1)),U,2))
"RTN","LEXAR7",26,0)
 . D:$L($P($G(^LEX(757.06,DA,1)),U,3)) ADD("LOC",$P($G(^LEX(757.06,DA,1)),U,3))
"RTN","LEXAR7",27,0)
 . D:$L($P($G(^LEX(757.06,DA,2)),U,1)) ADD("FLN",$P($G(^LEX(757.06,DA,2)),U,1))
"RTN","LEXAR7",28,0)
 . D:$L($P($G(^LEX(757.06,DA,2)),U,2)) ADD("IDX",$P($G(^LEX(757.06,DA,2)),U,2))
"RTN","LEXAR7",29,0)
 . D:$L($P($G(^LEX(757.06,DA,2)),U,3)) ADD("SCT",$P($G(^LEX(757.06,DA,2)),U,3))
"RTN","LEXAR7",30,0)
 . D:$L($G(^LEX(757.06,DA,3))) ADD("SCR",$G(^LEX(757.06,DA,3)))
"RTN","LEXAR7",31,0)
 . D:$L($P($G(^LEX(757.06,DA,4)),U,1)) ADD("IEN",$P($G(^LEX(757.06,DA,4)),U,1))
"RTN","LEXAR7",32,0)
 . D:$L($P($G(^LEX(757.06,DA,4)),U,2)) ADD("COM",$P($G(^LEX(757.06,DA,4)),U,2))
"RTN","LEXAR7",33,0)
 . D ^DIK
"RTN","LEXAR7",34,0)
 K DIK,DA,XMZ
"RTN","LEXAR7",35,0)
 ;S XMSUB="Test Lexicon v2 Unresolved Narratives"
"RTN","LEXAR7",36,0)
 N DIFROM S XMSUB="Unresolved Narratives - "_LEXITEM_" items"
"RTN","LEXAR7",37,0)
 S XMY("G.LEXICON@ISC-SLC.VA.GOV")=""
"RTN","LEXAR7",38,0)
 S XMTEXT="^TMP(""LEXSEND"",$J,",XMDUZ=.5 D ^XMD
"RTN","LEXAR7",39,0)
 K ^TMP("LEXSEND"),LEXCTR,XCNP,XMDUZ,XMY("G.LEXICON@ISC-SLC.VA.GOV")
"RTN","LEXAR7",40,0)
 K XMZ,XMSUB,XMY,XMTEXT,XMDUZ
"RTN","LEXAR7",41,0)
SLCQ S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXAR7",42,0)
 Q
"RTN","LEXAR7",43,0)
ADD(LEXI,LEXS) ; Add message text
"RTN","LEXAR7",44,0)
 S LEXCTR=+($G(^TMP("LEXSEND",$J,0)))+1,^TMP("LEXSEND",$J,0)=LEXCTR
"RTN","LEXAR7",45,0)
 S ^TMP("LEXSEND",$J,LEXCTR)=LEXI
"RTN","LEXAR7",46,0)
 S:$G(LEXS)'="" ^TMP("LEXSEND",$J,LEXCTR)=^TMP("LEXSEND",$J,LEXCTR)_"^"_LEXS
"RTN","LEXAR7",47,0)
 Q
"RTN","LEXAR7",48,0)
CLR ; Clear all narratives
"RTN","LEXAR7",49,0)
 N LEXN S LEXN=$P(^LEX(757.06,0),"^",1,2)_"^^"
"RTN","LEXAR7",50,0)
 K ^LEX(757.06) S ^LEX(757.06,0)=LEXN
"RTN","LEXAR7",51,0)
 Q
"RTN","LEXAS")
0^196^B6348389
"RTN","LEXAS",1,0)
LEXAS ; ISL Look-up Check Input                  ; 09-23-96
"RTN","LEXAS",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAS",3,0)
 ;
"RTN","LEXAS",4,0)
SPL(LEXX) ; Check word
"RTN","LEXAS",5,0)
 S LEXX=$G(LEXX) Q:LEXX="" LEXX
"RTN","LEXAS",6,0)
 N LEXFQ,LEXFQT,LEXT S LEXFQ=0,LEXFQT=""
"RTN","LEXAS",7,0)
 S LEXT=$$DBL^LEXAS4(LEXX) D COMP(LEXX,LEXT)
"RTN","LEXAS",8,0)
 S LEXT=$$REM^LEXAS4(LEXX) D COMP(LEXX,LEXT)
"RTN","LEXAS",9,0)
 S LEXT=$$LC^LEXAS7(LEXX) D COMP(LEXX,LEXT)
"RTN","LEXAS",10,0)
 S LEXT=$$TP^LEXAS6(LEXX) D COMP(LEXX,LEXT)
"RTN","LEXAS",11,0)
 S LEXT=$$ONE^LEXAS2(LEXX) D COMP(LEXX,LEXT)
"RTN","LEXAS",12,0)
 S LEXT=$$SHIFT^LEXAS3(LEXX) D COMP(LEXX,LEXT)
"RTN","LEXAS",13,0)
 S LEXT=$$SPLIT^LEXAS5(LEXX) D COMP(LEXX,LEXT)
"RTN","LEXAS",14,0)
 S LEXT=$$TRIM^LEXAS6(LEXX) D COMP(LEXX,LEXT)
"RTN","LEXAS",15,0)
 S LEXT=$$TC^LEXAS7(LEXX) D COMP(LEXX,LEXT)
"RTN","LEXAS",16,0)
 S:LEXFQT'="" LEXX=LEXFQT
"RTN","LEXAS",17,0)
 Q LEXX
"RTN","LEXAS",18,0)
COMP(LEXKN,LEXF) ; Compare words
"RTN","LEXAS",19,0)
 Q:'$L($G(LEXF))  N LEXOTKN,LEXCLEN,LEXLEN,LEXI,LEXC,LEXDIF
"RTN","LEXAS",20,0)
 S LEXOTKN=LEXF,LEXCLEN=$L(LEXKN)+$L(LEXF) S:LEXF["^" LEXCLEN=LEXCLEN-1 S LEXC=0
"RTN","LEXAS",21,0)
 S:LEXF'["^"&(+($$W(LEXF))) LEXC=1
"RTN","LEXAS",22,0)
 S:LEXF["^" LEXF=$TR(LEXF,"^"," ")
"RTN","LEXAS",23,0)
 S:$L(LEXKN)>$L(LEXF) LEXLEN=$L(LEXKN)-$L(LEXF) S:$L(LEXF)>$L(LEXKN) LEXLEN=$L(LEXF)-$L(LEXKN)
"RTN","LEXAS",24,0)
 S:$L(LEXF)=$L(LEXKN) LEXLEN=0 S LEXCLEN=LEXCLEN-LEXLEN
"RTN","LEXAS",25,0)
 I LEXKN'=LEXF D
"RTN","LEXAS",26,0)
 . I LEXOTKN'["^" S LEXC=LEXC+$$CNT(LEXKN,LEXF)
"RTN","LEXAS",27,0)
 . I LEXOTKN["^" D
"RTN","LEXAS",28,0)
 . . S LEXC=LEXC+$$CNT($P(LEXOTKN,"^",2),$E(LEXKN,(($L(LEXKN)-$L($P(LEXOTKN,"^",2)))+1),$L(LEXKN)))
"RTN","LEXAS",29,0)
 . . S LEXC=LEXC+($$CNT($P(LEXOTKN,"^",1),$E(LEXKN,1,$L($P(LEXOTKN,"^",1)))))
"RTN","LEXAS",30,0)
 N LEXMUL S LEXMUL=LEXCLEN*LEXC
"RTN","LEXAS",31,0)
 I LEXOTKN'["^",$D(^LEX(757.01,"AWRD",LEXOTKN)) S LEXMUL=LEXMUL*2
"RTN","LEXAS",32,0)
 I LEXOTKN["^",$D(^LEX(757.01,"AWRD",$P(LEXOTKN,"^",2))) S LEXMUL=LEXMUL*2
"RTN","LEXAS",33,0)
 S LEXMUL=0 I LEXC>0,LEXCLEN>0 S LEXMUL=LEXCLEN/LEXC
"RTN","LEXAS",34,0)
 S LEXDIF=0 S:LEXMUL'=0 LEXDIF=LEXCLEN+LEXC
"RTN","LEXAS",35,0)
 I LEXDIF>LEXFQ S LEXFQ=LEXDIF,LEXFQT=LEXOTKN
"RTN","LEXAS",36,0)
 Q
"RTN","LEXAS",37,0)
CNT(LEXX,LEXY) ; Count characters
"RTN","LEXAS",38,0)
 N LEXC,LEXL,LEXI,LEXU S LEXC=0
"RTN","LEXAS",39,0)
 F LEXI=1:1:$L(LEXY)  D
"RTN","LEXAS",40,0)
 . S LEXL=$E(LEXY,LEXI) Q:$D(LEXU(LEXL))  S:$E(LEXX,LEXI)=$E(LEXY,LEXI) LEXC=LEXC+1
"RTN","LEXAS",41,0)
 . I $L(LEXY)<$L(LEXX) S:$E(LEXX,(LEXI+1))=$E(LEXY,LEXI) LEXC=LEXC+1
"RTN","LEXAS",42,0)
 . I $L(LEXY)>$L(LEXX) S:$E(LEXX,(LEXI-1))=$E(LEXY,LEXI) LEXC=LEXC+1
"RTN","LEXAS",43,0)
 . S LEXU(LEXL)=""
"RTN","LEXAS",44,0)
 K LEXU S LEXX=LEXC Q LEXX
"RTN","LEXAS",45,0)
 Q
"RTN","LEXAS",46,0)
W(LEXX) ; Is LEXX a word
"RTN","LEXAS",47,0)
 Q:'$L($G(LEXX)) 0
"RTN","LEXAS",48,0)
 I $D(^LEX(757.01,"AWRD",LEXX)) Q 1
"RTN","LEXAS",49,0)
 Q 0
"RTN","LEXAS2")
0^197^B10917713
"RTN","LEXAS2",1,0)
LEXAS2 ; ISL Look-up Check Input (ONE)            ; 09-23-96
"RTN","LEXAS2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAS2",3,0)
 ;
"RTN","LEXAS2",4,0)
ONE(LEXX) ; One letter missing/incorrect
"RTN","LEXAS2",5,0)
 ;
"RTN","LEXAS2",6,0)
 ; LEXRIM  Trimmed string
"RTN","LEXAS2",7,0)
 ; LEXI    Character position
"RTN","LEXAS2",8,0)
 ; LEXF    First portion
"RTN","LEXAS2",9,0)
 ; LEXT    Trailing portion
"RTN","LEXAS2",10,0)
 ; LEXTL   Trailing letter
"RTN","LEXAS2",11,0)
 ; LEXNF   Strings found
"RTN","LEXAS2",12,0)
 ; LEXO    $O variable
"RTN","LEXAS2",13,0)
 ; LEXNT   Temporary string
"RTN","LEXAS2",14,0)
 ; LEXX    String returned
"RTN","LEXAS2",15,0)
 ;
"RTN","LEXAS2",16,0)
 N LEXI,LEXF,LEXT,LEXTL,LEXNF,LEXO,LEXNT,LEXRIM
"RTN","LEXAS2",17,0)
 S LEXTL=$E(LEXX,$L(LEXX)),LEXRIM=$$TRIM^LEXAS6(LEXX)
"RTN","LEXAS2",18,0)
 S LEXF=$E(LEXRIM,1,($L(LEXRIM)-1)),LEXNF="",LEXKEY=$G(LEXKEY)
"RTN","LEXAS2",19,0)
 F LEXI=1:1:$L(LEXX) D
"RTN","LEXAS2",20,0)
 . S LEXF=$E(LEXX,1,LEXI)
"RTN","LEXAS2",21,0)
 . S LEXT=$E(LEXX,(LEXI+1),$L(LEXX))
"RTN","LEXAS2",22,0)
 . S LEXO=$$SCH^LEXAS6(LEXF)
"RTN","LEXAS2",23,0)
 . F  S LEXO=$O(^LEX(757.01,"AWRD",LEXO)) Q:LEXO'[LEXF  D
"RTN","LEXAS2",24,0)
 . . S LEXO=$E(LEXO,1,($L(LEXF)+1))
"RTN","LEXAS2",25,0)
 . . Q:$L(LEXO)<($L(LEXF)+1)
"RTN","LEXAS2",26,0)
 . . S LEXNT=LEXO_LEXT
"RTN","LEXAS2",27,0)
 . . I $D(^LEX(757.01,"ASL",LEXNT)) D
"RTN","LEXAS2",28,0)
 . . . S LEXNF=LEXNF_"/"_LEXNT
"RTN","LEXAS2",29,0)
 . . S LEXNT=LEXO_$E(LEXT,2,$L(LEXT))
"RTN","LEXAS2",30,0)
 . . I $D(^LEX(757.01,"ASL",LEXNT)) D
"RTN","LEXAS2",31,0)
 . . . S LEXNF=LEXNF_"/"_LEXNT
"RTN","LEXAS2",32,0)
 . . S LEXO=LEXO_"~"
"RTN","LEXAS2",33,0)
 S:$E(LEXNF,1)="/" LEXNF=$E(LEXNF,2,$L(LEXNF))
"RTN","LEXAS2",34,0)
 I LEXNF'="",LEXNF["/" D PICK
"RTN","LEXAS2",35,0)
 I LEXNF'=""&(LEXNF'["/") S LEXRIM=LEXNF Q LEXRIM
"RTN","LEXAS2",36,0)
 S LEXRIM=$$TRIM^LEXAS6(LEXRIM) Q LEXRIM
"RTN","LEXAS2",37,0)
 Q LEXRIM
"RTN","LEXAS2",38,0)
 ;
"RTN","LEXAS2",39,0)
PICK ; Pick one string
"RTN","LEXAS2",40,0)
 ;
"RTN","LEXAS2",41,0)
 ; LEXNF   Strings found
"RTN","LEXAS2",42,0)
 ; LEXAN   Array of strings by frequency
"RTN","LEXAS2",43,0)
 ; LEXI    Position/Piece in string
"RTN","LEXAS2",44,0)
 ; LEXIN   Position/Piece in altered string
"RTN","LEXAS2",45,0)
 ; LEXEXP  Expression
"RTN","LEXAS2",46,0)
 ; LEXES   Expresseion segment/string
"RTN","LEXAS2",47,0)
 ; LEXKEY  Key for selecting string
"RTN","LEXAS2",48,0)
 ; LEXKEYO $Orderable KEY
"RTN","LEXAS2",49,0)
 ; LEXOK   Flag - Selection is OK
"RTN","LEXAS2",50,0)
 ; LEXC    Control string
"RTN","LEXAS2",51,0)
 ; LEXP    Character position in segment
"RTN","LEXAS2",52,0)
 ; LEXR    Record number for expression
"RTN","LEXAS2",53,0)
 ; LEXN    Altered string
"RTN","LEXAS2",54,0)
 ; LEXM    Maximum string length
"RTN","LEXAS2",55,0)
 ; LEXS    Shortest string length
"RTN","LEXAS2",56,0)
 ;
"RTN","LEXAS2",57,0)
 N LEXOK,LEXI,LEXC,LEXN,LEXS,LEXM S LEXI=0,LEXC=""
"RTN","LEXAS2",58,0)
 S LEXS=$P(LEXNF,"/",1)
"RTN","LEXAS2",59,0)
 F LEXI=1:1:$L(LEXNF,"/") D
"RTN","LEXAS2",60,0)
 . S LEXN=$P(LEXNF,"/",LEXI) I LEXC="" S LEXC=LEXN Q
"RTN","LEXAS2",61,0)
 . S LEXM=$S($L(LEXC)>$L(LEXN):$L(LEXC),1:$L(LEXN))
"RTN","LEXAS2",62,0)
 . N LEXP F LEXP=LEXM:-1:1 Q:$E(LEXC,1,LEXP)=$E(LEXN,1,LEXP)
"RTN","LEXAS2",63,0)
 . S:LEXP<$L(LEXS) LEXS=$E(LEXS,1,LEXP)
"RTN","LEXAS2",64,0)
 S LEXC=$E(LEXX,($L(LEXS)+2),$L(LEXX)),LEXN=""
"RTN","LEXAS2",65,0)
 ; Key supplied
"RTN","LEXAS2",66,0)
 I $L($G(LEXKEY)) S LEXOK=0 D  Q:LEXOK
"RTN","LEXAS2",67,0)
 . ; order through pieces
"RTN","LEXAS2",68,0)
 . N LEXAN,LEXI
"RTN","LEXAS2",69,0)
 . F LEXI=1:1:$L(LEXNF,"/") D  Q:LEXOK
"RTN","LEXAS2",70,0)
 . . S LEXN=$P(LEXNF,"/",LEXI)
"RTN","LEXAS2",71,0)
 . . ; order through expressions
"RTN","LEXAS2",72,0)
 . . N LEXR,LEXKEYO S LEXR=0,LEXKEYO=$$SCH^LEXAS6(LEXKEY)
"RTN","LEXAS2",73,0)
 . . F  S LEXKEYO=$O(^LEX(757.01,"AWRD",LEXKEYO)) Q:LEXKEYO=""!(LEXKEYO'[LEXKEY)!(LEXOK)  D
"RTN","LEXAS2",74,0)
 . . . F  S LEXR=$O(^LEX(757.01,"AWRD",LEXKEYO,LEXR)) Q:+LEXR=0!(LEXOK)  D
"RTN","LEXAS2",75,0)
 . . . . N LEXEXP S LEXEXP=$$UP^XLFSTR(^LEX(757.01,LEXR,0))
"RTN","LEXAS2",76,0)
 . . . . N LEXIN,LEXES F LEXIN=1:1:$L(LEXEXP," ") D  Q:LEXOK
"RTN","LEXAS2",77,0)
 . . . . . S LEXES=$P(LEXEXP," ",LEXIN)
"RTN","LEXAS2",78,0)
 . . . . . Q:$E(LEXES,1)'=$E(LEXN,1)
"RTN","LEXAS2",79,0)
 . . . . . Q:$E(LEXN,$L(LEXN))'=$E(LEXES,$L(LEXN))
"RTN","LEXAS2",80,0)
 . . . . . N LEXP,LEXC S LEXC=0 F LEXP=1:1:$L(LEXN) D  Q:LEXOK
"RTN","LEXAS2",81,0)
 . . . . . . I $E(LEXES,1,$L(LEXN))[$E(LEXN,LEXP) S LEXC=LEXC+1
"RTN","LEXAS2",82,0)
 . . . . . S:LEXC>0 LEXAN(-(LEXC))=LEXN
"RTN","LEXAS2",83,0)
 . S LEXN="" S:$O(LEXAN(-999999))<0 LEXN=$O(LEXAN(-999999)),LEXN=LEXAN(LEXN)
"RTN","LEXAS2",84,0)
 . I LEXN'="" S LEXNF=LEXN,LEXOK=1
"RTN","LEXAS2",85,0)
 ; No key supplied
"RTN","LEXAS2",86,0)
 F LEXI=1:1:$L(LEXNF,"/") D  Q:LEXN[LEXC
"RTN","LEXAS2",87,0)
 . S LEXN=$P(LEXNF,"/",LEXI)
"RTN","LEXAS2",88,0)
 . I LEXN[LEXC,$E(LEXN,$L(LEXN))=LEXTL S LEXNF=LEXN
"RTN","LEXAS2",89,0)
 Q
"RTN","LEXAS3")
0^198^B4196429
"RTN","LEXAS3",1,0)
LEXAS3 ; ISL Look-up Check Input (SHIFT)          ; 09-23-96
"RTN","LEXAS3",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAS3",3,0)
 ;
"RTN","LEXAS3",4,0)
SHIFT(LEXX) ; Letters are shifted out of position
"RTN","LEXAS3",5,0)
 ;
"RTN","LEXAS3",6,0)
 ; LEXORG( Array of characters in the ORiGinal string
"RTN","LEXAS3",7,0)
 ; LEXORD( Array of characters in the $O variable
"RTN","LEXAS3",8,0)
 ; LEXE    $E string
"RTN","LEXAS3",9,0)
 ; LEXL    Length
"RTN","LEXAS3",10,0)
 ; LEXD    Flag - Difference of strings
"RTN","LEXAS3",11,0)
 ; LEXOK   Flag - Shifted string is ok to use
"RTN","LEXAS3",12,0)
 ; LEXO    $O variable
"RTN","LEXAS3",13,0)
 ; LEXI    Incremental counter
"RTN","LEXAS3",14,0)
 ; LEXX    Returned value
"RTN","LEXAS3",15,0)
 ;
"RTN","LEXAS3",16,0)
 ;
"RTN","LEXAS3",17,0)
 Q:$L(LEXX)<5 LEXX
"RTN","LEXAS3",18,0)
 N LEXT,LEXE,LEXL,LEXO,LEXOK,LEXORG,LEXORD
"RTN","LEXAS3",19,0)
 S LEXT=LEXX,LEXOK=0
"RTN","LEXAS3",20,0)
 F LEXL=1:1:3 D SHF Q:LEXOK  S LEXT=$E(LEXT,1,($L(LEXT)-1))
"RTN","LEXAS3",21,0)
 K LEXORG,LEXORD
"RTN","LEXAS3",22,0)
 S LEXX=LEXT
"RTN","LEXAS3",23,0)
 Q LEXX
"RTN","LEXAS3",24,0)
 ;
"RTN","LEXAS3",25,0)
SHF ; Shift letters in arrays
"RTN","LEXAS3",26,0)
 K LEXORG D ORG(LEXT)
"RTN","LEXAS3",27,0)
 S LEXE=$E(LEXT,1,2),LEXO=$$SCH^LEXAS6(LEXE)
"RTN","LEXAS3",28,0)
 F  S LEXO=$O(^LEX(757.01,"AWRD",LEXO)) Q:LEXO=""!(LEXO'[LEXE)!(LEXOK)  D  Q:LEXOK
"RTN","LEXAS3",29,0)
 . Q:$L(LEXO)<$L(LEXT)!($L(LEXO)>($L(LEXT)+1))
"RTN","LEXAS3",30,0)
 . N LEXD D ORD(LEXO) S LEXD=$$COMP
"RTN","LEXAS3",31,0)
 . I LEXD S LEXOK=0 Q
"RTN","LEXAS3",32,0)
 . I 'LEXD S LEXT=LEXO,LEXOK=1 Q
"RTN","LEXAS3",33,0)
 Q
"RTN","LEXAS3",34,0)
 ;
"RTN","LEXAS3",35,0)
ORG(LEXX) ; Original tolken
"RTN","LEXAS3",36,0)
 K LEXORG N LEXI
"RTN","LEXAS3",37,0)
 F LEXI=1:1:$L(LEXX) D
"RTN","LEXAS3",38,0)
 . I $D(LEXORG($E(LEXX,LEXI))) D  Q
"RTN","LEXAS3",39,0)
 . . S LEXORG($E(LEXX,LEXI))=LEXORG($E(LEXX,LEXI))+1
"RTN","LEXAS3",40,0)
 . S LEXORG($E(LEXX,LEXI))=1
"RTN","LEXAS3",41,0)
 Q
"RTN","LEXAS3",42,0)
ORD(LEXO) ; Ordered tolken
"RTN","LEXAS3",43,0)
 K LEXORD N LEXI
"RTN","LEXAS3",44,0)
 F LEXI=1:1:$L(LEXO) D
"RTN","LEXAS3",45,0)
 . I $D(LEXORD($E(LEXO,LEXI))) D  Q
"RTN","LEXAS3",46,0)
 . . S LEXORD($E(LEXO,LEXI))=LEXORD($E(LEXO,LEXI))+1
"RTN","LEXAS3",47,0)
 . S LEXORD($E(LEXO,LEXI))=1
"RTN","LEXAS3",48,0)
 Q
"RTN","LEXAS3",49,0)
COMP(LEXX) ; Compare Original to Ordered
"RTN","LEXAS3",50,0)
 N LEXI,LEXD S LEXI="",LEXD=1
"RTN","LEXAS3",51,0)
 F  S LEXI=$O(LEXORG(LEXI)) Q:LEXI=""  D  Q:'LEXD
"RTN","LEXAS3",52,0)
 . I '$D(LEXORD(LEXI)) S LEXD=0 Q
"RTN","LEXAS3",53,0)
 . I LEXORG(LEXI)>LEXORD(LEXI) S LEXD=0
"RTN","LEXAS3",54,0)
 I LEXD=0 K LEXORD Q 1
"RTN","LEXAS3",55,0)
 S LEXI="",LEXD=1
"RTN","LEXAS3",56,0)
 F  S LEXI=$O(LEXORD(LEXI)) Q:LEXI=""  D  Q:'LEXD
"RTN","LEXAS3",57,0)
 . ;I '$D(LEXORG(LEXI)) Q
"RTN","LEXAS3",58,0)
 . I LEXORD(LEXI)>($G(LEXORG(LEXI))+1) S LEXD=0
"RTN","LEXAS3",59,0)
 I LEXD=0 K LEXORD Q 1
"RTN","LEXAS3",60,0)
 K LEXORD Q 0
"RTN","LEXAS4")
0^199^B8439698
"RTN","LEXAS4",1,0)
LEXAS4 ; ISL Look-up Check Input (DBL,REM)        ; 09-23-96
"RTN","LEXAS4",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAS4",3,0)
 ;
"RTN","LEXAS4",4,0)
DBL(LEXX) ; Excessive Double Characters
"RTN","LEXAS4",5,0)
 ;
"RTN","LEXAS4",6,0)
 ; LEXI    Incremental counter
"RTN","LEXAS4",7,0)
 ; LEXOK   Flag - found word yes/no
"RTN","LEXAS4",8,0)
 ; LEXT    Temporary word
"RTN","LEXAS4",9,0)
 ; LEXD    Temporary word (Double doubles)
"RTN","LEXAS4",10,0)
 ; LEXX    Return string
"RTN","LEXAS4",11,0)
 ;
"RTN","LEXAS4",12,0)
 N LEXI,LEXOK,LEXT,LEXD S LEXOK=0,LEXD=""
"RTN","LEXAS4",13,0)
 F LEXI=1:1:$L(LEXX) D  Q:LEXOK
"RTN","LEXAS4",14,0)
 . S LEXT=LEXX I $E(LEXX,LEXI)=$E(LEXX,(LEXI+1)) D
"RTN","LEXAS4",15,0)
 . . S LEXT=$E(LEXX,1,LEXI)_$E(LEXX,(LEXI+2),$L(LEXX))
"RTN","LEXAS4",16,0)
 . . I $D(^LEX(757.01,"ASL",LEXT)) S LEXX=LEXT,LEXOK=1 Q
"RTN","LEXAS4",17,0)
 . . Q:LEXI=1
"RTN","LEXAS4",18,0)
 . . S LEXT=$E(LEXX,1,(LEXI-1))_$E(LEXX,(LEXI+2),$L(LEXX))
"RTN","LEXAS4",19,0)
 . . I $D(^LEX(757.01,"ASL",LEXT)) S LEXX=LEXT,LEXOK=1 Q
"RTN","LEXAS4",20,0)
 I LEXOK Q LEXX
"RTN","LEXAS4",21,0)
 F LEXI=1:1:$L(LEXX) D
"RTN","LEXAS4",22,0)
 . I $E(LEXX,LEXI)'=$E(LEXX,(LEXI+1)) D
"RTN","LEXAS4",23,0)
 . . S LEXD=LEXD_$E(LEXX,LEXI)
"RTN","LEXAS4",24,0)
 I $D(^LEX(757.01,"ASL",LEXD)) S LEXX=LEXD
"RTN","LEXAS4",25,0)
 Q LEXX
"RTN","LEXAS4",26,0)
 ;
"RTN","LEXAS4",27,0)
REM(LEXX) ; Remove character
"RTN","LEXAS4",28,0)
 ;
"RTN","LEXAS4",29,0)
 ; LEXI    Incremental counter
"RTN","LEXAS4",30,0)
 ; LEXOK   Flag - found word yes/no
"RTN","LEXAS4",31,0)
 ; LEXF    First segment
"RTN","LEXAS4",32,0)
 ; LEXT    Trailing segment
"RTN","LEXAS4",33,0)
 ; LEXN    Altered tolken
"RTN","LEXAS4",34,0)
 ; LEXTN   Temporary altered tolken
"RTN","LEXAS4",35,0)
 ; LEXX    Return string
"RTN","LEXAS4",36,0)
 ;
"RTN","LEXAS4",37,0)
 N LEXI,LEXO,LEXCS,LEXCA,LEXTN,LEXOK,LEXF,LEXT,LEXN,LEXL
"RTN","LEXAS4",38,0)
 S LEXOK=0,LEXO=LEXX
"RTN","LEXAS4",39,0)
 F LEXI=2:1:$L(LEXO) D  Q:LEXOK
"RTN","LEXAS4",40,0)
 . S LEXF=$E(LEXO,1,(LEXI-1)),LEXT=$E(LEXO,(LEXI+1),$L(LEXO))
"RTN","LEXAS4",41,0)
 . I $D(^LEX(757.01,"AWRD",(LEXF_LEXT))),$O(^LEX(757.01,"ASL",(LEXF_LEXT),0))>1 D  Q
"RTN","LEXAS4",42,0)
 . . S LEXX=LEXF_LEXT,LEXOK=1
"RTN","LEXAS4",43,0)
 . S LEXN=$$REM2(LEXO,LEXI) I $D(^LEX(757.01,"AWRD",LEXN)) S LEXX=LEXN,LEXOK=1 Q
"RTN","LEXAS4",44,0)
 . Q:$D(^LEX(757.01,"ASL",$E(LEXO,1,LEXI)))
"RTN","LEXAS4",45,0)
 . S LEXF=$E(LEXO,1,(LEXI-1)),LEXT=$E(LEXO,(LEXI+1),$L(LEXO))
"RTN","LEXAS4",46,0)
 . I '$D(^LEX(757.01,"ASL",LEXF)),$O(^LEX(757.01,"ASL",LEXF,0))>1 D  Q
"RTN","LEXAS4",47,0)
 . . S LEXX=$E(LEXF,1,($L(LEXF)-1)),LEXOK=1
"RTN","LEXAS4",48,0)
 . S LEXCA=LEXF_LEXT
"RTN","LEXAS4",49,0)
 . S LEXCS=LEXF_$E(LEXT,1)
"RTN","LEXAS4",50,0)
 . I $D(^LEX(757.01,"ASL",LEXCS)),$O(^LEX(757.01,"ASL",LEXCS,0))>1 D
"RTN","LEXAS4",51,0)
 . . S LEXO=LEXCA,LEXI=LEXI+1 S:LEXI=$L(LEXO) LEXOK=1
"RTN","LEXAS4",52,0)
 . S LEXTN=$$SHIFT^LEXAS3(LEXO)
"RTN","LEXAS4",53,0)
 . I $D(^LEX(757.01,"AWRD",LEXTN)),$O(^LEX(757.01,"ASL",LEXTN,0))>1 S LEXX=LEXTN,LEXOK=1 Q
"RTN","LEXAS4",54,0)
 . I $D(^LEX(757.01,"ASL",LEXO)),$O(^LEX(757.01,"ASL",LEXO,0))>1 S LEXX=LEXO,LEXOK=1
"RTN","LEXAS4",55,0)
 Q LEXX
"RTN","LEXAS4",56,0)
REM2(LEXO,LEXI) ; Remove character at position LEXI
"RTN","LEXAS4",57,0)
 N LEXOK S LEXOK=0
"RTN","LEXAS4",58,0)
 S LEXF=$E(LEXO,1,LEXI)_$E(LEXO,(LEXI+2),(LEXI+3))
"RTN","LEXAS4",59,0)
 I $L(LEXF)>3 D
"RTN","LEXAS4",60,0)
 . N LEXT,LEXN,LEXP1,LEXP2 S LEXT=$E(LEXX,($L(LEXX)-4),$L(LEXX))
"RTN","LEXAS4",61,0)
 . S LEXN=$E(LEXF,1,($L(LEXF)-1))_$C($A($E(LEXF,$L(LEXF)))-1)_"~"
"RTN","LEXAS4",62,0)
 . F  S LEXN=$O(^LEX(757.01,"AWRD",LEXN)) Q:LEXN=""!($E(LEXN,1,$L(LEXF))'=LEXF)!(LEXOK)  D
"RTN","LEXAS4",63,0)
 . . S LEXP1=$E(LEXN,($L(LEXN)-($L(LEXT)-1)),$L(LEXN))
"RTN","LEXAS4",64,0)
 . . I $E(LEXN,($L(LEXN)-($L(LEXT)-1)),$L(LEXN))=LEXT S LEXO=LEXN,LEXOK=1
"RTN","LEXAS4",65,0)
 Q LEXO
"RTN","LEXAS5")
0^200^B14441583
"RTN","LEXAS5",1,0)
LEXAS5 ; ISL Look-up Check Input (SPLIT)          ; 09-23-96
"RTN","LEXAS5",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAS5",3,0)
 ;
"RTN","LEXAS5",4,0)
 ;
"RTN","LEXAS5",5,0)
SPLIT(LEXX) ; 2 tolkens/no space
"RTN","LEXAS5",6,0)
 ;
"RTN","LEXAS5",7,0)
 ; LEXI    Incremental counter
"RTN","LEXAS5",8,0)
 ; LEXOK   Flag - tolken found
"RTN","LEXAS5",9,0)
 ; LEXF    First segment
"RTN","LEXAS5",10,0)
 ; LEXFR   Remainder of First segment
"RTN","LEXAS5",11,0)
 ; LEXTT   2 Tolkens
"RTN","LEXAS5",12,0)
 ; LEXP1   First piece
"RTN","LEXAS5",13,0)
 ; LEXP2   Second piect
"RTN","LEXAS5",14,0)
 ; LEXX    Value returned
"RTN","LEXAS5",15,0)
 ;
"RTN","LEXAS5",16,0)
 Q:$D(^LEX(757.01,"ASL",LEXX)) LEXX
"RTN","LEXAS5",17,0)
 Q:$L(LEXX)<6 LEXX
"RTN","LEXAS5",18,0)
 N LEXF,LEXFR,LEXTT,LEXP1,LEXP2
"RTN","LEXAS5",19,0)
 ;
"RTN","LEXAS5",20,0)
 S LEXF=$$FS(LEXX)
"RTN","LEXAS5",21,0)
 S LEXFR="" S:$L($G(LEXF)) LEXFR=$$FR(LEXX,.LEXF)
"RTN","LEXAS5",22,0)
 S (LEXTT,LEXP1,LEXP2)=""
"RTN","LEXAS5",23,0)
 S LEXP1=LEXF
"RTN","LEXAS5",24,0)
 ;S:$L(LEXF)>2 LEXP1=$$REP(LEXF)
"RTN","LEXAS5",25,0)
 G:LEXP1="" END
"RTN","LEXAS5",26,0)
 S:$L(LEXFR)>3 LEXP2=LEXFR
"RTN","LEXAS5",27,0)
 G:LEXP2="" END
"RTN","LEXAS5",28,0)
 S LEXTT=LEXP1_"^"_LEXP2
"RTN","LEXAS5",29,0)
END ; Resolve first to a string, second to a tolken
"RTN","LEXAS5",30,0)
 K LEXKEY Q:$G(LEXTT)'["^" LEXX
"RTN","LEXAS5",31,0)
 S:$L(LEXTT) LEXX=LEXTT Q LEXX
"RTN","LEXAS5",32,0)
FS(LEXX) ; First segment
"RTN","LEXAS5",33,0)
 N LEXN,LEXE,LEXF,LEXT,LEXI,LEXOK S LEXN=$$TRIM^LEXAS6(LEXX),LEXOK=0
"RTN","LEXAS5",34,0)
 Q:'$L(LEXN) LEXX
"RTN","LEXAS5",35,0)
 F LEXI=2:1:$L(LEXN) D  Q:LEXOK
"RTN","LEXAS5",36,0)
 . S LEXF=$E(LEXX,1,LEXI) I $L(LEXF)>2,$D(^LEX(757.01,"ASL",LEXF)) S LEXX=LEXF,LEXOK=1 Q
"RTN","LEXAS5",37,0)
 . N LEXFI F LEXFI="757.04","757.041","757.05" D
"RTN","LEXAS5",38,0)
 . . Q:'$L(LEXF)  Q:'$L($P(LEXX,LEXF,2))
"RTN","LEXAS5",39,0)
 . . I $D(^LEX(LEXFI,"B",LEXF)) D
"RTN","LEXAS5",40,0)
 . . . I $D(^LEX(757.01,"AWRD",$P(LEXX,LEXF,2))) S LEXX=LEXF,LEXOK=1 Q
"RTN","LEXAS5",41,0)
 Q LEXX
"RTN","LEXAS5",42,0)
REP(LEXX) ; Replacement
"RTN","LEXAS5",43,0)
 N LEXR Q:'$D(^LEX(757.05,"B",LEXX)) LEXX
"RTN","LEXAS5",44,0)
 S LEXR=$O(^LEX(757.05,"B",LEXX,0)) Q:'$D(^LEX(757.05,LEXR,0)) LEXX
"RTN","LEXAS5",45,0)
 I $P(^LEX(757.05,LEXR,0),"^",3)="R" S LEXX=$P(^LEX(757.05,LEXR,0),"^",2)
"RTN","LEXAS5",46,0)
 Q LEXX
"RTN","LEXAS5",47,0)
FR(LEXX,LEXF) ; Remainder of first segment
"RTN","LEXAS5",48,0)
 N LEXFR,LEXN,LEXOK S LEXFR=$P(LEXX,LEXF,2)
"RTN","LEXAS5",49,0)
 I $L(LEXFR),'$D(^LEX(757.01,"AWRD",LEXFR)) D
"RTN","LEXAS5",50,0)
 . N LEXI,LEXT S LEXT=LEXFR,LEXOK=0 F LEXI=1:1:$L(LEXFR) D  Q:LEXOK
"RTN","LEXAS5",51,0)
 . . S LEXT=$E(LEXFR,LEXI,$L(LEXFR))
"RTN","LEXAS5",52,0)
 . . I $D(^LEX(757.01,"AWRD",LEXT)) D
"RTN","LEXAS5",53,0)
 . . . S LEXFR=LEXT,LEXOK=1
"RTN","LEXAS5",54,0)
 . . . I $P(LEXX,LEXFR,1)'="",$D(^LEX(757.01,"ASL",$P(LEXX,LEXFR,1))) S LEXF=$P(LEXX,LEXFR,1)
"RTN","LEXAS5",55,0)
 I $L(LEXFR),'$D(^LEX(757.01,"AWRD",LEXFR)) S LEXFR=$$COMP(LEXF,LEXFR)
"RTN","LEXAS5",56,0)
 Q:'$L(LEXFR) ""
"RTN","LEXAS5",57,0)
 I '$D(^LEX(757.01,"AWRD",LEXFR)),$L(LEXFR)>4 D
"RTN","LEXAS5",58,0)
 . S LEXN=$E(LEXFR,1,4)
"RTN","LEXAS5",59,0)
 . I $L(LEXN),$D(^LEX(757.01,"AWRD",LEXN)) S LEXFR=LEXN
"RTN","LEXAS5",60,0)
 I $L(LEXFR),$D(^LEX(757.01,"AWRD",LEXFR)) S LEXX=LEXFR Q LEXX
"RTN","LEXAS5",61,0)
 I $L(LEXFR),'$D(^LEX(757.01,"AWRD",LEXFR)) S LEXX="" Q LEXX
"RTN","LEXAS5",62,0)
 I '$L(LEXFR) S LEXX=""
"RTN","LEXAS5",63,0)
 Q LEXX
"RTN","LEXAS5",64,0)
COMP(LEXF,LEXS) ; Compare first segment to second segment
"RTN","LEXAS5",65,0)
 N LEXN,LEXT,LEXO S LEXO=LEXS
"RTN","LEXAS5",66,0)
 S LEXN=$$TP^LEXAS6(LEXO)
"RTN","LEXAS5",67,0)
 I $D(^LEX(757.01,"AWRD",LEXN)),+($$CHK(LEXF,LEXN)) S LEXS=LEXN Q LEXS
"RTN","LEXAS5",68,0)
 S LEXT=$$SHIFT^LEXAS3(LEXO)
"RTN","LEXAS5",69,0)
 I $D(^LEX(757.01,"AWRD",LEXT)),+($$CHK(LEXF,LEXT)) S LEXS=LEXT Q LEXS
"RTN","LEXAS5",70,0)
 S LEXN=$$TP^LEXAS6(LEXN)
"RTN","LEXAS5",71,0)
 I $D(^LEX(757.01,"AWRD",LEXN)),+($$CHK(LEXF,LEXN)) S LEXS=LEXN Q LEXS
"RTN","LEXAS5",72,0)
 S LEXN=$$ONE^LEXAS2(LEXN)
"RTN","LEXAS5",73,0)
 I $L(LEXN)>3,$D(^LEX(757.01,"AWRD",LEXN)),+($$CHK(LEXF,LEXN)) S LEXS=LEXN Q LEXS
"RTN","LEXAS5",74,0)
 Q ""
"RTN","LEXAS5",75,0)
CHK(LEX1,LEX2) ; Check first segment used with second segment
"RTN","LEXAS5",76,0)
 I '$L($G(LEX1))!('$L($G(LEX1))) Q 0
"RTN","LEXAS5",77,0)
 I '$D(^LEX(757.01,"ASL",LEX1))!('$D(^LEX(757.01,"ASL",LEX2))) Q 0
"RTN","LEXAS5",78,0)
 N LEXF1,LEXF2,LEXO,LEXC,LEXS,LEXOK S LEXOK=0
"RTN","LEXAS5",79,0)
 S LEXF1=$O(^LEX(757.01,"ASL",LEX1,0))
"RTN","LEXAS5",80,0)
 S LEXF2=$O(^LEX(757.01,"ASL",LEX2,0))
"RTN","LEXAS5",81,0)
 S:LEXF1<LEXF2 LEXO=$$SCH^LEXAS6(LEX1),LEXC=LEX2,LEXS=LEX1
"RTN","LEXAS5",82,0)
 S:LEXF1'<LEXF2 LEXO=$$SCH^LEXAS6(LEX2),LEXC=LEX1,LEXS=LEX2
"RTN","LEXAS5",83,0)
 F  S LEXO=$O(^LEX(757.01,"AWRD",LEXO)) Q:LEXO=""!(LEXO'[LEXS)!(LEXOK)  D
"RTN","LEXAS5",84,0)
 . N LEXR S LEXR=0
"RTN","LEXAS5",85,0)
 . F  S LEXR=$O(^LEX(757.01,"AWRD",LEXO,LEXR)) Q:+LEXR=0!(LEXOK)  D
"RTN","LEXAS5",86,0)
 . . N LEXE S LEXE=$$UP^XLFSTR($G(^LEX(757.01,LEXR,0)))
"RTN","LEXAS5",87,0)
 . . I LEXE[(" "_$$UP^XLFSTR(LEXC)) S LEXOK=1 Q
"RTN","LEXAS5",88,0)
 . . I $E(LEXE,1,$L(LEXC))=$$UP^XLFSTR(LEXC) S LEXOK=1
"RTN","LEXAS5",89,0)
 S LEX1=LEXOK
"RTN","LEXAS5",90,0)
 Q LEX1
"RTN","LEXAS6")
0^201^B6565185
"RTN","LEXAS6",1,0)
LEXAS6 ; ISL Look-up Check Input (TRIM,EXP,TP,SCH); 09-23-96
"RTN","LEXAS6",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAS6",3,0)
 ;
"RTN","LEXAS6",4,0)
TRIM(LEXX) ; Trim string
"RTN","LEXAS6",5,0)
 ;
"RTN","LEXAS6",6,0)
 ; LEXOK   Flag - string is OK
"RTN","LEXAS6",7,0)
 ; LEXF    Frequency
"RTN","LEXAS6",8,0)
 ; LEXI    Incremental counter
"RTN","LEXAS6",9,0)
 ; LEXT    Temporary string
"RTN","LEXAS6",10,0)
 ; LEXX    Return string
"RTN","LEXAS6",11,0)
 ;
"RTN","LEXAS6",12,0)
 N LEXI,LEXOK,LEXT,LEXF S LEXF=1,LEXOK=0,LEXT=LEXX
"RTN","LEXAS6",13,0)
 F  Q:$E(LEXX,1)'=" "  S LEXX=$E(LEXX,2,$L(LEXX))
"RTN","LEXAS6",14,0)
 F LEXI=$L(LEXX):-1:1 Q:LEXOK  D  Q:LEXOK
"RTN","LEXAS6",15,0)
 . S LEXT=$E(LEXT,1,($L(LEXT)-1))
"RTN","LEXAS6",16,0)
 . I $L(LEXT)<3 S LEXOK=1 Q
"RTN","LEXAS6",17,0)
 . I $D(^LEX(757.01,"ASL",LEXT)) S LEXF=$O(^LEX(757.01,"ASL",LEXT,0)) I +(LEXF)>1 S LEXOK=1
"RTN","LEXAS6",18,0)
 S LEXX=LEXT
"RTN","LEXAS6",19,0)
 Q LEXX
"RTN","LEXAS6",20,0)
 ;
"RTN","LEXAS6",21,0)
EXP3(LEXX) ; Expand string up to 3 characters
"RTN","LEXAS6",22,0)
 N LEXT S LEXT=LEXX
"RTN","LEXAS6",23,0)
 S LEXT=$$EXP(LEXT)
"RTN","LEXAS6",24,0)
 I $L(LEXT)-$L(LEXX)'>3 S LEXX=LEXT
"RTN","LEXAS6",25,0)
 Q LEXX
"RTN","LEXAS6",26,0)
EXP(LEXX) ; Expand string
"RTN","LEXAS6",27,0)
 ;
"RTN","LEXAS6",28,0)
 ; LEXF    String found
"RTN","LEXAS6",29,0)
 ; LEXC    Control string
"RTN","LEXAS6",30,0)
 ; LEXCK   Check for string
"RTN","LEXAS6",31,0)
 ; LEXI    Character position
"RTN","LEXAS6",32,0)
 ; LEXLTR  Letter at character position
"RTN","LEXAS6",33,0)
 ; LEXNT   Altered tolken
"RTN","LEXAS6",34,0)
 ; LEXOK   Flag - 1 quit 0 keep checking
"RTN","LEXAS6",35,0)
 ; LEXOKL  Flag - 1 add letter 0 do not add letter
"RTN","LEXAS6",36,0)
 ; LEXX    Return expanded string
"RTN","LEXAS6",37,0)
 ;
"RTN","LEXAS6",38,0)
 Q:$D(^LEX(757.01,"AWRD",LEXX)) LEXX
"RTN","LEXAS6",39,0)
 N LEXF,LEXC,LEXCK,LEXI,LEXLTR,LEXNT,LEXOK,LEXOKL
"RTN","LEXAS6",40,0)
 S (LEXF,LEXC)=LEXX,LEXOK=0
"RTN","LEXAS6",41,0)
 S LEXNT=$O(^LEX(757.01,"ASL",$$SCH(LEXF)))
"RTN","LEXAS6",42,0)
 F LEXI=1:1:63 Q:LEXOK  D  Q:LEXOK!(LEXNT'[LEXC)
"RTN","LEXAS6",43,0)
 . Q:LEXI'>$L(LEXC)
"RTN","LEXAS6",44,0)
 . S LEXNT=$O(^LEX(757.01,"ASL",LEXNT)) Q:LEXNT=LEXF
"RTN","LEXAS6",45,0)
 . S LEXLTR=$E(LEXNT,LEXI) Q:LEXLTR=""
"RTN","LEXAS6",46,0)
 . S LEXOKL=1,LEXCK=$$SCH(LEXNT)
"RTN","LEXAS6",47,0)
 . F  S LEXCK=$O(^LEX(757.01,"ASL",LEXCK)) Q:LEXCK=""!('LEXOKL)  D
"RTN","LEXAS6",48,0)
 . . I $E(LEXCK,LEXI)'="",$E(LEXCK,LEXI)'=LEXLTR S LEXOKL=0 Q
"RTN","LEXAS6",49,0)
 . . I LEXCK'[LEXC,$E(LEXCK,LEXI)'=LEXLTR S LEXCK="ZZZZ" Q
"RTN","LEXAS6",50,0)
 . S:LEXOKL LEXF=LEXF_LEXLTR S:'LEXOKL LEXOK=1
"RTN","LEXAS6",51,0)
 . S:$D(^LEX(757.01,"AWRD",LEXF)) LEXOK=1
"RTN","LEXAS6",52,0)
 S LEXX=LEXF Q LEXX
"RTN","LEXAS6",53,0)
 ;
"RTN","LEXAS6",54,0)
TP(LEXX) ; Transposed letters
"RTN","LEXAS6",55,0)
 ;
"RTN","LEXAS6",56,0)
 ; LEXF    Tolken found
"RTN","LEXAS6",57,0)
 ; LEXO    Original tolken
"RTN","LEXAS6",58,0)
 ; LEXN    Concatenated tolken
"RTN","LEXAS6",59,0)
 ; LEXT    Temporary tolken
"RTN","LEXAS6",60,0)
 ; LEXI    Character position
"RTN","LEXAS6",61,0)
 ; LEXX    Return string
"RTN","LEXAS6",62,0)
 ;
"RTN","LEXAS6",63,0)
 N LEXO,LEXN,LEXI,LEXF,LEXT S (LEXF,LEXN)="",LEXO=LEXX
"RTN","LEXAS6",64,0)
 F LEXI=2:1:$L(LEXX) Q:LEXF'=""  D  Q:LEXF'=""
"RTN","LEXAS6",65,0)
 . S LEXN=$E(LEXX,1,(LEXI-1))_$E(LEXX,(LEXI+1))_$E(LEXX,LEXI)_$E(LEXX,(LEXI+2),$L(LEXX))
"RTN","LEXAS6",66,0)
 . I $D(^LEX(757.01,"ASL",LEXN)) S LEXF=LEXN
"RTN","LEXAS6",67,0)
 . S LEXT=$$ONE^LEXAS2(LEXN)
"RTN","LEXAS6",68,0)
 . I $L(LEXT)=$L(LEXN),$D(^LEX(757.01,"ASL",LEXT)) S LEXF=LEXT
"RTN","LEXAS6",69,0)
 S:LEXF'="" LEXX=LEXF
"RTN","LEXAS6",70,0)
 S:LEXF="" LEXX=LEXO
"RTN","LEXAS6",71,0)
 Q LEXX
"RTN","LEXAS6",72,0)
SCH(LEXX) ; Create $O variable
"RTN","LEXAS6",73,0)
 ;
"RTN","LEXAS6",74,0)
 ; LEXX    Return $O variable
"RTN","LEXAS6",75,0)
 ;
"RTN","LEXAS6",76,0)
 S LEXX=$E(LEXX,1,($L(LEXX)-1))_$C($A($E(LEXX,$L(LEXX)))-1)_"~"
"RTN","LEXAS6",77,0)
 Q LEXX
"RTN","LEXAS7")
0^202^B18643877
"RTN","LEXAS7",1,0)
LEXAS7 ; ISL Look-up Check Input (LC,TC)          ; 09-23-96
"RTN","LEXAS7",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXAS7",3,0)
 ;
"RTN","LEXAS7",4,0)
LC(LEXX) ; Leading characters
"RTN","LEXAS7",5,0)
 ;
"RTN","LEXAS7",6,0)
 ; LEXX    Return string
"RTN","LEXAS7",7,0)
 ; LEXL    Letter
"RTN","LEXAS7",8,0)
 ; LEXG    Group of letters
"RTN","LEXAS7",9,0)
 ; LEXI    Incremental counter
"RTN","LEXAS7",10,0)
 ; LEXT    Temporary tolken
"RTN","LEXAS7",11,0)
 ; LEXOK   Flag - found tolken
"RTN","LEXAS7",12,0)
 ; LEXS    Swap character
"RTN","LEXAS7",13,0)
 ; LEXA    Add character
"RTN","LEXAS7",14,0)
 ;
"RTN","LEXAS7",15,0)
 N LEXT
"RTN","LEXAS7",16,0)
 S LEXT=$$LCS(LEXX) I LEXT'=LEXX,$D(^LEX(757.01,"ASL",LEXT)) S LEXX=LEXT Q LEXT
"RTN","LEXAS7",17,0)
 I $L(LEXT)'>5 Q LEXX
"RTN","LEXAS7",18,0)
 S LEXT=$$LCR(LEXX) I $D(^LEX(757.01,"AWRD",LEXT)) S LEXX=LEXT Q LEXX
"RTN","LEXAS7",19,0)
 I $L(LEXT)'>4 Q LEXX
"RTN","LEXAS7",20,0)
 S LEXT=$$LCR(LEXX) I $D(^LEX(757.01,"AWRD",LEXT)) S LEXX=LEXT Q LEXX
"RTN","LEXAS7",21,0)
 Q LEXX
"RTN","LEXAS7",22,0)
 ;
"RTN","LEXAS7",23,0)
LCS(LEXX) ; Swap
"RTN","LEXAS7",24,0)
 N LEXI,LEXF,LEXL,LEXG,LEXOK,LEXS,LEXA S LEXOK=0
"RTN","LEXAS7",25,0)
 S LEXF=$$FIRST(LEXX),LEXS=$$SECOND(LEXX)
"RTN","LEXAS7",26,0)
 I $D(^LEX(757.01,"ASL",LEXS)) S LEXX=LEXS Q LEXX
"RTN","LEXAS7",27,0)
 I $D(^LEX(757.01,"ASL",LEXF)) S LEXX=LEXF Q LEXX
"RTN","LEXAS7",28,0)
 S LEXF=$$FIRST(LEXS)
"RTN","LEXAS7",29,0)
 I $D(^LEX(757.01,"ASL",LEXF)) S LEXX=LEXF Q LEXX
"RTN","LEXAS7",30,0)
 Q LEXX
"RTN","LEXAS7",31,0)
LCR(LEXX) ; Remove/Shift
"RTN","LEXAS7",32,0)
 N LEXT
"RTN","LEXAS7",33,0)
 S LEXX=$E(LEXX,2,$L(LEXX))
"RTN","LEXAS7",34,0)
 S LEXT=$$SHIFT^LEXAS3(LEXX)
"RTN","LEXAS7",35,0)
 I $D(^LEX(757.01,"ASL",LEXT)) S LEXX=LEXT Q LEXX
"RTN","LEXAS7",36,0)
 Q LEXX
"RTN","LEXAS7",37,0)
SECOND(LEXX) ; Second letter (Swap)
"RTN","LEXAS7",38,0)
 N LEXL,LEXG,LEXOK,LEXI,LEXA,LEXS
"RTN","LEXAS7",39,0)
 S LEXL=$E(LEXX,2),LEXG=$$GRP(LEXL),LEXOK=0
"RTN","LEXAS7",40,0)
 F LEXI=1:1:$L(LEXG)  D  Q:LEXOK
"RTN","LEXAS7",41,0)
 . S LEXS=$E(LEXX,1)_$E(LEXG,LEXI)_$E(LEXX,3,$L(LEXX))
"RTN","LEXAS7",42,0)
 . I $D(^LEX(757.01,"ASL",LEXS)) S LEXX=LEXS,LEXOK=1 Q
"RTN","LEXAS7",43,0)
 . S LEXS=$$TP^LEXAS6(LEXS)
"RTN","LEXAS7",44,0)
 . I $D(^LEX(757.01,"ASL",LEXS)),$L(LEXS)=$L(LEXX) S LEXX=LEXS,LEXOK=1 Q
"RTN","LEXAS7",45,0)
 . S LEXS=$$ONE^LEXAS2(LEXS) Q:LEXS=""
"RTN","LEXAS7",46,0)
 . I $D(^LEX(757.01,"ASL",LEXS)),$L(LEXS)=$L(LEXX) S LEXX=LEXS,LEXOK=1 Q
"RTN","LEXAS7",47,0)
 Q:LEXOK LEXX
"RTN","LEXAS7",48,0)
 ; Second letter (Add)
"RTN","LEXAS7",49,0)
 S LEXOK=0 F LEXI=65:1:90 D  Q:LEXOK
"RTN","LEXAS7",50,0)
 . S LEXA=$E(LEXX,1)_$C(LEXI)_$E(LEXX,2,$L(LEXX))
"RTN","LEXAS7",51,0)
 . I $D(^LEX(757.01,"ASL",LEXA)) S LEXX=LEXA,LEXOK=1 Q
"RTN","LEXAS7",52,0)
 Q LEXX
"RTN","LEXAS7",53,0)
 ;
"RTN","LEXAS7",54,0)
FIRST(LEXX) ; First letter (Swap)
"RTN","LEXAS7",55,0)
 N LEXL,LEXG,LEXOK,LEXI,LEXA,LEXS
"RTN","LEXAS7",56,0)
 S LEXL=$E(LEXX,1),LEXG=$$GRP(LEXL),LEXOK=0
"RTN","LEXAS7",57,0)
 F LEXI=1:1:$L(LEXG)  D  Q:LEXOK
"RTN","LEXAS7",58,0)
 . S LEXS=$E(LEXG,LEXI)_$E(LEXX,2,$L(LEXX))
"RTN","LEXAS7",59,0)
 . I $D(^LEX(757.01,"ASL",LEXS)) S LEXX=LEXS,LEXOK=1 Q
"RTN","LEXAS7",60,0)
 . S LEXS=$$LF(LEXS)
"RTN","LEXAS7",61,0)
 . I $D(^LEX(757.01,"ASL",LEXS)) S LEXX=LEXS,LEXOK=1 Q
"RTN","LEXAS7",62,0)
 Q:LEXOK LEXX
"RTN","LEXAS7",63,0)
 ;
"RTN","LEXAS7",64,0)
 ; First letter (Add)
"RTN","LEXAS7",65,0)
 S LEXOK=0 F LEXI=65:1:90 D  Q:LEXOK
"RTN","LEXAS7",66,0)
 . S LEXA=$C(LEXI)_LEXX
"RTN","LEXAS7",67,0)
 . I $D(^LEX(757.01,"ASL",LEXA)) S LEXX=LEXA,LEXOK=1 Q
"RTN","LEXAS7",68,0)
 Q LEXX
"RTN","LEXAS7",69,0)
LF(LEXX) ;
"RTN","LEXAS7",70,0)
 Q:$L($G(LEXX))'>7 LEXX
"RTN","LEXAS7",71,0)
 N LEXN,LEXC,LEXT,LEXF,LEXO,LEXOK
"RTN","LEXAS7",72,0)
 S (LEXN,LEXC)=$E(LEXX,1,4) Q:'$D(^LEX(757.01,"ASL",LEXN)) LEXX
"RTN","LEXAS7",73,0)
 S LEXT=$P(LEXX,LEXN,2) Q:$L(LEXT)<4 LEXX
"RTN","LEXAS7",74,0)
 S LEXOK=0,LEXO=$$SCH^LEXAS6(LEXN)
"RTN","LEXAS7",75,0)
 S LEXT=$E(LEXT,($L(LEXT)-6),$L(LEXT))
"RTN","LEXAS7",76,0)
 F  S LEXO=$O(^LEX(757.01,"AWRD",LEXO)) Q:LEXO=""!(LEXO'[LEXC)!(LEXOK)  D
"RTN","LEXAS7",77,0)
 . S LEXF=$E(LEXO,($L(LEXO)-($L(LEXT)-1)),$L(LEXO))
"RTN","LEXAS7",78,0)
 . I LEXF=LEXT S LEXT=LEXO,LEXOK=1
"RTN","LEXAS7",79,0)
 I LEXOK S LEXX=LEXT
"RTN","LEXAS7",80,0)
 Q LEXX
"RTN","LEXAS7",81,0)
TC(LEXX) ; Trailing character
"RTN","LEXAS7",82,0)
 Q:$L(LEXX)<6 LEXX
"RTN","LEXAS7",83,0)
 N LEXC,LEXT,LEXLC,LEXO,LEXOK,LEXCL
"RTN","LEXAS7",84,0)
 S LEXCL=$L(LEXX),LEXC=$$TRIM^LEXAS6(LEXX),LEXC=$E(LEXC,1,($L(LEXC)-1))
"RTN","LEXAS7",85,0)
 S LEXLC=$E(LEXX,$L(LEXX)),LEXO=$$SCH^LEXAS6(LEXC),LEXOK=0,LEXT=""
"RTN","LEXAS7",86,0)
 ;
"RTN","LEXAS7",87,0)
 F  S LEXO=$O(^LEX(757.01,"AWRD",LEXO)) Q:LEXO=""!(LEXO'[LEXC)!(LEXOK)  D
"RTN","LEXAS7",88,0)
 . Q:$E(LEXO,$L(LEXO))'=LEXLC
"RTN","LEXAS7",89,0)
 . ; Exact
"RTN","LEXAS7",90,0)
 . I $E(LEXO,LEXCL)=LEXLC S LEXT=LEXO,LEXOK=1 Q
"RTN","LEXAS7",91,0)
 . ; 1 Less
"RTN","LEXAS7",92,0)
 . I $E(LEXO,(LEXCL-1))=LEXLC S LEXT=LEXO,LEXOK=1 Q
"RTN","LEXAS7",93,0)
 I LEXT'="",LEXOK S LEXX=LEXT
"RTN","LEXAS7",94,0)
 Q LEXX
"RTN","LEXAS7",95,0)
 ;
"RTN","LEXAS7",96,0)
GRP(LEXX) ; Letter groups (off the home row QWERTY)
"RTN","LEXAS7",97,0)
 N LEXG S LEXG=LEXX
"RTN","LEXAS7",98,0)
 S:LEXX="A" LEXG="QZOWSX" S:LEXX="B" LEXG="VGHNF"
"RTN","LEXAS7",99,0)
 S:LEXX="C" LEXG="XDVFS" S:LEXX="D" LEXG="ECXRFSWV"
"RTN","LEXAS7",100,0)
 S:LEXX="E" LEXG="RWIDFS" S:LEXX="F" LEXG="GBVDRCET"
"RTN","LEXAS7",101,0)
 S:LEXX="G" LEXG="FBTVRHYN" S:LEXX="H" LEXG="JGNYBUMT"
"RTN","LEXAS7",102,0)
 S:LEXX="I" LEXG="UOYEKJL" S:LEXX="J" LEXG="HNKUMYI"
"RTN","LEXAS7",103,0)
 S:LEXX="K" LEXG="IJLMOU" S:LEXX="L" LEXG="OKPI"
"RTN","LEXAS7",104,0)
 S:LEXX="M" LEXG="NJKH" S:LEXX="N" LEXG="MBJH"
"RTN","LEXAS7",105,0)
 S:LEXX="O" LEXG="LIPAK" S:LEXX="P" LEXG="OL"
"RTN","LEXAS7",106,0)
 S:LEXX="Q" LEXG="AWS" S:LEXX="R" LEXG="TEGFD"
"RTN","LEXAS7",107,0)
 S:LEXX="S" LEXG="XWADZE" S:LEXX="T" LEXG="RGFYH"
"RTN","LEXAS7",108,0)
 S:LEXX="U" LEXG="YHIJK" S:LEXX="V" LEXG="CBFDG"
"RTN","LEXAS7",109,0)
 S:LEXX="W" LEXG="QESAD" S:LEXX="X" LEXG="ZSACD"
"RTN","LEXAS7",110,0)
 S:LEXX="Y" LEXG="UHIJGT" S:LEXX="Z" LEXG="ASX"
"RTN","LEXAS7",111,0)
 S:LEXG'=LEXX LEXX=LEXG
"RTN","LEXAS7",112,0)
 Q LEXX
"RTN","LEXAS7",113,0)
 Q
"RTN","LEXASC")
0^203^B6355376
"RTN","LEXASC",1,0)
LEXASC ; ISL Look-up by Shortcuts                 ; 09-23-96
"RTN","LEXASC",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXASC",3,0)
 ;
"RTN","LEXASC",4,0)
 ; ^TMP("LEXFND",$J)  Entries found
"RTN","LEXASC",5,0)
 ; ^TMP("LEXHIT",$J)  Entries returned
"RTN","LEXASC",6,0)
 ;
"RTN","LEXASC",7,0)
 ; LEXSCH   User input string to search for
"RTN","LEXASC",8,0)
 ;
"RTN","LEXASC",9,0)
 ; LEXC     Pointer to Shortcut Context  in file 757.41
"RTN","LEXASC",10,0)
 ; LEXS     Pointer to Shortcut in file 757.4
"RTN","LEXASC",11,0)
 ; LEXE     Pointer to expression in 757.01
"RTN","LEXASC",12,0)
 ; LEXM     Pointer to Major Concept in 757.01
"RTN","LEXASC",13,0)
 ;
"RTN","LEXASC",14,0)
 ; LEXDSP   Source Display string
"RTN","LEXASC",15,0)
 ; LEXDES   Flag - has (*) or doesn't have () a description
"RTN","LEXASC",16,0)
 ; LEXSHOW  Display string from Application/User defaults
"RTN","LEXASC",17,0)
 ; LEXX     Returned variable from functions
"RTN","LEXASC",18,0)
 ;
"RTN","LEXASC",19,0)
EN(LEXSCH,LEXC) ; Check Shortcuts file 757.4 for LEXSCH
"RTN","LEXASC",20,0)
 S LEXC=+($G(LEXC))
"RTN","LEXASC",21,0)
 Q:'$L(LEXSCH)!(LEXC=0) 0
"RTN","LEXASC",22,0)
 Q:'$D(^LEX(757.41,LEXC)) 0
"RTN","LEXASC",23,0)
 Q:$L(LEXSCH)<2!($L(LEXSCH)>63) 0
"RTN","LEXASC",24,0)
 Q:'$D(^LEX(757.4,"ARA",LEXSCH,LEXC)) 0
"RTN","LEXASC",25,0)
 N LEXS S LEXS=0
"RTN","LEXASC",26,0)
 F  S LEXS=$O(^LEX(757.4,"ARA",LEXSCH,LEXC,LEXS)) Q:+LEXS=0  D
"RTN","LEXASC",27,0)
 . N LEXE,LEXDES,LEXDSP
"RTN","LEXASC",28,0)
 . S LEXE=+($G(^LEX(757.4,LEXS,0))) Q:LEXE'>0
"RTN","LEXASC",29,0)
 . ; Filter
"RTN","LEXASC",30,0)
 . S LEXFILR=$$EN^LEXAFIL($G(LEXFIL),LEXE) Q:LEXFILR=0
"RTN","LEXASC",31,0)
 . ; Deactivated Term
"RTN","LEXASC",32,0)
 . Q:+($P($G(^LEX(757.01,LEXE,1)),"^",5))=1
"RTN","LEXASC",33,0)
 . Q:+($$SUB(LEXE))=0
"RTN","LEXASC",34,0)
 . S LEXDES=$$DES(LEXE)
"RTN","LEXASC",35,0)
 . S LEXDSP="",LEXSHOW=$G(^TMP("LEXSCH",$J,"DIS",0)) S:$L($G(LEXSHOW)) LEXDSP=$$DSP(LEXE,$G(LEXSHOW))
"RTN","LEXASC",36,0)
 . D ADDL^LEXAL(LEXE,LEXDES,LEXDSP)
"RTN","LEXASC",37,0)
 I $D(^TMP("LEXFND",$J)) D BEG^LEXAL
"RTN","LEXASC",38,0)
 I '$D(^TMP("LEXFND",$J)) D
"RTN","LEXASC",39,0)
 . K LEX,^TMP("LEXFND",$J),^TMP("LEXHIT",$J) S LEX=0
"RTN","LEXASC",40,0)
 . S:+($G(^TMP("LEXSCH",$J,"UNR",0)))>0&($L($G(^TMP("LEXSCH",$J,"NAR",0)))) LEX("NAR")=$G(^TMP("LEXSCH",$J,"NAR",0))
"RTN","LEXASC",41,0)
 Q:$D(^TMP("LEXHIT",$J)) 1
"RTN","LEXASC",42,0)
 Q 0
"RTN","LEXASC",43,0)
DES(LEXX) ; Get description flag
"RTN","LEXASC",44,0)
 N LEXDES,LEXE,LEXM S LEXDES="",LEXE=+LEXX
"RTN","LEXASC",45,0)
 S LEXM=$P($G(^LEX(757.01,+($G(LEXX)),1)),"^",1)
"RTN","LEXASC",46,0)
 S LEXM=+($G(^LEX(757,+($G(LEXM)),0)))
"RTN","LEXASC",47,0)
 S:$D(^LEX(757.01,LEXM,3)) LEXDES="*"
"RTN","LEXASC",48,0)
 S LEXX=$G(LEXDES) Q LEXX
"RTN","LEXASC",49,0)
TERM(LEXX) ; Get expression
"RTN","LEXASC",50,0)
 Q $G(^LEX(757.01,LEXX,0))
"RTN","LEXASC",51,0)
DSP(LEXX,LEXDSP) ; Return displayable text
"RTN","LEXASC",52,0)
 S LEXX=$$SO^LEXASO(LEXX,LEXDSP,1) Q LEXX
"RTN","LEXASC",53,0)
SUB(LEXX) ;
"RTN","LEXASC",54,0)
 Q:$G(^TMP("LEXSCH",$J,"GBL",0))'="^LEX(757.21," 1
"RTN","LEXASC",55,0)
 Q:'$L($G(^TMP("LEXSCH",$J,"IDX",0))) 1
"RTN","LEXASC",56,0)
 N LEXIDX,LEXSS,LEXSN S LEXIDX=$G(^TMP("LEXSCH",$J,"IDX",0))
"RTN","LEXASC",57,0)
 S LEXSS=$E(LEXIDX,2,$L(LEXIDX))
"RTN","LEXASC",58,0)
 S LEXSN=$O(^LEXT(757.2,"AA",LEXSS,0))
"RTN","LEXASC",59,0)
 Q:+($G(LEXSN))=0 1
"RTN","LEXASC",60,0)
 N LEXOK,LEXR S (LEXR,LEXOK)=0
"RTN","LEXASC",61,0)
 F  S LEXR=$O(^LEX(757.21,"B",LEXX,LEXR)) Q:+LEXR=0  D
"RTN","LEXASC",62,0)
 . I $P($G(^LEX(757.21,LEXR,0)),"^",2)=LEXSN S LEXOK=1
"RTN","LEXASC",63,0)
 S LEXX=LEXOK Q LEXX
"RTN","LEXASO")
0^204^B10506342
"RTN","LEXASO",1,0)
LEXASO ; ISL Look-up Display String (Sources)     ; 09-23-96
"RTN","LEXASO",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXASO",3,0)
 ;
"RTN","LEXASO",4,0)
 ; Entry S X=$$SO^LEXASO(IEN,SAB,ALL)
"RTN","LEXASO",5,0)
 ;
"RTN","LEXASO",6,0)
 ;       IEN is an internal entry number in file 757.01
"RTN","LEXASO",7,0)
 ;           representing an expression
"RTN","LEXASO",8,0)
 ;
"RTN","LEXASO",9,0)
 ;       SAB is the source abbreviation of the classification
"RTN","LEXASO",10,0)
 ;           coding system, i.e., ICD, CPT, DSM, etc.
"RTN","LEXASO",11,0)
 ;
"RTN","LEXASO",12,0)
 ;       ALL is a flag 
"RTN","LEXASO",13,0)
 ;
"RTN","LEXASO",14,0)
 ;           0 - do not display all codes associated of the
"RTN","LEXASO",15,0)
 ;               major concept, display the codes only for the
"RTN","LEXASO",16,0)
 ;               expression
"RTN","LEXASO",17,0)
 ;
"RTN","LEXASO",18,0)
 ;           1 - display all codes associated for the major 
"RTN","LEXASO",19,0)
 ;               concept
"RTN","LEXASO",20,0)
 ;
"RTN","LEXASO",21,0)
 ; LEXCC(   Array of classification codes
"RTN","LEXASO",22,0)
 ;
"RTN","LEXASO",23,0)
 ; LEXA     Flag - 1 All codes, 0 only the expression codes
"RTN","LEXASO",24,0)
 ; LEXM     Flag - M Major Concept
"RTN","LEXASO",25,0)
 ;
"RTN","LEXASO",26,0)
 ; LEXC     Counter, # $Piece of string LEXSA (SAB)
"RTN","LEXASO",27,0)
 ;
"RTN","LEXASO",28,0)
 ; LEXMC    IEN in file 757      Major Concept
"RTN","LEXASO",29,0)
 ; LEXME    IEN in file 757.01   Major Concept Expression
"RTN","LEXASO",30,0)
 ; LEXEX    IEN in file 757.01   Expression
"RTN","LEXASO",31,0)
 ; LEXSO    IEN in file 757.02   Sources
"RTN","LEXASO",32,0)
 ;
"RTN","LEXASO",33,0)
 ; LEXSA    Source Abbreviation i.e., ICD or ICD/CPT
"RTN","LEXASO",34,0)
 ; LEXSC    Source Classification Code
"RTN","LEXASO",35,0)
 ; LEXSR    Source Abbreviation single only i.e., ICD, CPT
"RTN","LEXASO",36,0)
 ; LEXST    String of classification sources and codes
"RTN","LEXASO",37,0)
 ;
"RTN","LEXASO",38,0)
 ; LEXX     Return value
"RTN","LEXASO",39,0)
 ;
"RTN","LEXASO",40,0)
SO(LEXX,LEXSA,LEXA) ; Return string of source codes for LEXX SAB
"RTN","LEXASO",41,0)
 Q:+($G(LEXX))=0!('$L($G(LEXSA))) ""
"RTN","LEXASO",42,0)
 Q:'$L($G(^LEX(757.01,LEXX,0))) ""
"RTN","LEXASO",43,0)
 ;
"RTN","LEXASO",44,0)
 N LEXCC,LEXM,LEXC,LEXMC,LEXME,LEXEX,LEXSO,LEXSC,LEXSR,LEXST
"RTN","LEXASO",45,0)
 ;
"RTN","LEXASO",46,0)
 S LEXEX=+LEXX,LEXX="",LEXA=+($G(LEXA)),LEXMC=0
"RTN","LEXASO",47,0)
 S LEXM=$P($G(^LEX(757.01,LEXEX,1)),"^",2),LEXST=""
"RTN","LEXASO",48,0)
 ; Codes for an expression     D EXP
"RTN","LEXASO",49,0)
 I LEXM'=1!(+($G(LEXA))=0) D EXP G EXIT
"RTN","LEXASO",50,0)
 ; Codes for a major concept   D MAJ
"RTN","LEXASO",51,0)
 I LEXM=1 S LEXMC=LEXEX D MAJ
"RTN","LEXASO",52,0)
EXIT ; Clean up and quit
"RTN","LEXASO",53,0)
 Q LEXX
"RTN","LEXASO",54,0)
EXP ; Source string for an expression
"RTN","LEXASO",55,0)
 I LEXSA'["/" D CODES(LEXEX,LEXSA) S LEXX=$$ASSEM Q
"RTN","LEXASO",56,0)
 I LEXSA["/" D  S LEXX=$$ASSEM
"RTN","LEXASO",57,0)
 . N LEXC F LEXC=1:1:$L(LEXSA,"/") D CODES(LEXEX,$P(LEXSA,"/",LEXC))
"RTN","LEXASO",58,0)
 Q
"RTN","LEXASO",59,0)
MAJ ; Source string for a major concept
"RTN","LEXASO",60,0)
 S LEXMC=$P($G(^LEX(757.01,LEXEX,1)),"^",1),LEXEX=0
"RTN","LEXASO",61,0)
 S LEXEX=0 F  S LEXEX=$O(^LEX(757.02,"AMC",LEXMC,LEXEX)) Q:+LEXEX=0  D
"RTN","LEXASO",62,0)
 . N LEXME S LEXME=+($G(^LEX(757.02,LEXEX,0)))
"RTN","LEXASO",63,0)
 . I LEXSA'["/" D CODES(LEXME,LEXSA) Q
"RTN","LEXASO",64,0)
 . I LEXSA["/" D  Q
"RTN","LEXASO",65,0)
 . . N LEXC F LEXC=1:1:$L(LEXSA,"/") D
"RTN","LEXASO",66,0)
 . . . D CODES(LEXME,$P(LEXSA,"/",LEXC))
"RTN","LEXASO",67,0)
 S LEXX=$$ASSEM
"RTN","LEXASO",68,0)
 Q
"RTN","LEXASO",69,0)
CODES(LEXEX,LEXSA) ; Get Source Codes
"RTN","LEXASO",70,0)
 Q:$L($G(LEXSA))'=3
"RTN","LEXASO",71,0)
 N LEXSO,LEXSR,LEXST S LEXST=""
"RTN","LEXASO",72,0)
 S LEXSO=0 F  S LEXSO=$O(^LEX(757.02,"B",LEXEX,LEXSO)) Q:+LEXSO=0  D
"RTN","LEXASO",73,0)
 . Q:+($P($G(^LEX(757.02,LEXSO,0)),"^",6))=1
"RTN","LEXASO",74,0)
 . I $E($G(^LEX(757.03,$P($G(^LEX(757.02,LEXSO,0)),"^",3),0)),1,3)=LEXSA D
"RTN","LEXASO",75,0)
 . . S LEXSR=$P($G(^LEX(757.03,$P($G(^LEX(757.02,LEXSO,0)),"^",3),0)),"^",2)
"RTN","LEXASO",76,0)
 . . Q:$P($G(^LEX(757.02,LEXSO,0)),"^",2)=""
"RTN","LEXASO",77,0)
 . . S LEXCC(LEXSR,(($P($G(^LEX(757.02,LEXSO,0)),"^",2))_" "))=""
"RTN","LEXASO",78,0)
 Q
"RTN","LEXASO",79,0)
ASSEM(LEXX) ; Assemble display string  (SOURCE CODE/CODE/CODE)
"RTN","LEXASO",80,0)
 Q:'$D(LEXCC) ""
"RTN","LEXASO",81,0)
 Q:$O(LEXCC(""))="" ""
"RTN","LEXASO",82,0)
 N LEXSR,LEXST S LEXSR=""
"RTN","LEXASO",83,0)
 F  S LEXSR=$O(LEXCC(LEXSR)) Q:LEXSR=""  D
"RTN","LEXASO",84,0)
 . N LEXSC S LEXSC="",LEXST="("_LEXSR_" "
"RTN","LEXASO",85,0)
 . F  S LEXSC=$O(LEXCC(LEXSR,LEXSC)) Q:LEXSC=""  D
"RTN","LEXASO",86,0)
 . . S LEXST=LEXST_$$TRIM(LEXSC)_"/"
"RTN","LEXASO",87,0)
 . . K LEXCC(LEXSR,LEXSC)
"RTN","LEXASO",88,0)
 . S LEXCC(LEXSR)=$E(LEXST,1,($L(LEXST)-1))_")"
"RTN","LEXASO",89,0)
 S (LEXST,LEXSR)=""
"RTN","LEXASO",90,0)
 F  S LEXSR=$O(LEXCC(LEXSR)) Q:LEXSR=""  D
"RTN","LEXASO",91,0)
 . S LEXST=LEXST_" "_LEXCC(LEXSR)
"RTN","LEXASO",92,0)
 F  Q:$E(LEXST,1)'=" "  S LEXST=$E(LEXST,2,$L(LEXST))
"RTN","LEXASO",93,0)
 S LEXX=LEXST Q LEXX
"RTN","LEXASO",94,0)
TRIM(LEXX) ; Trim spaces
"RTN","LEXASO",95,0)
 F  Q:$E(LEXX,1)'=" "  S LEXX=$E(LEXX,2,$L(LEXX))
"RTN","LEXASO",96,0)
 F  Q:$E(LEXX,$L(LEXX))'=" "  S LEXX=$E(LEXX,1,($L(LEXX)-1))
"RTN","LEXASO",97,0)
 Q LEXX
"RTN","LEXCODE")
0^205^B6429849
"RTN","LEXCODE",1,0)
LEXCODE ; ISL Retrieval of IEN^Term based on Code  ; 09-23-96
"RTN","LEXCODE",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXCODE",3,0)
 ;
"RTN","LEXCODE",4,0)
 Q
"RTN","LEXCODE",5,0)
 ; EN^LEXCODE(X)
"RTN","LEXCODE",6,0)
 ;     Where X is a Code taken from a classification system
"RTN","LEXCODE",7,0)
 ;     listed in Coding Systems file #757.03
"RTN","LEXCODE",8,0)
 ; Returns Local Array
"RTN","LEXCODE",9,0)
 ;     LEXS(0)=X
"RTN","LEXCODE",10,0)
 ;     LEXS(SAB,0)=#
"RTN","LEXCODE",11,0)
 ;     LEXS(SAB,#)=IEN^TERM
"RTN","LEXCODE",12,0)
 ;
"RTN","LEXCODE",13,0)
 ; 3 character mnemonics for SAB (Source Abbreviation)
"RTN","LEXCODE",14,0)
 ;
"RTN","LEXCODE",15,0)
 ;     SAB   Nomenclature  Source
"RTN","LEXCODE",16,0)
 ;     -----------------------------------------------------------
"RTN","LEXCODE",17,0)
 ;     ICD     ICD-9-CM    Int'l Class of Disease (Diagnosis)
"RTN","LEXCODE",18,0)
 ;     ICP     ICD-9-CM    Int'l Class of Disease (Procedures)
"RTN","LEXCODE",19,0)
 ;     CPT     CPT-4       Current Procedural Terminology
"RTN","LEXCODE",20,0)
 ;     DSM     DSM-IIIR    Diag & Stat Manual of Mental Disorders
"RTN","LEXCODE",21,0)
 ;     SNM     SNOMED      Systematic Nomenclature for Medicine
"RTN","LEXCODE",22,0)
 ;     NAN     NANDA       North American Nursing Diagnosis Assoc
"RTN","LEXCODE",23,0)
 ;     NIC                 Nursing Intervention Classification
"RTN","LEXCODE",24,0)
 ;     OMA                 Omaha Nursing Diagnosis/Interventions
"RTN","LEXCODE",25,0)
 ;     ACR                 American College of Radiology (Diag)
"RTN","LEXCODE",26,0)
 ;     AIR     AI/RHEUM    National Library of Medicine source
"RTN","LEXCODE",27,0)
 ;     COS     COSTAR      Computer Stored Ambulatory Records
"RTN","LEXCODE",28,0)
 ;     CST     COSTART     Coding Sym Thes Adverse Reaction Terms
"RTN","LEXCODE",29,0)
 ;     DXP     DXPLAIN     Diagnostic Prompting System
"RTN","LEXCODE",30,0)
 ;     MCM                 McMaster University (Epidemiology)
"RTN","LEXCODE",31,0)
 ;     UMD                 Universal Medical Device Nomemclature
"RTN","LEXCODE",32,0)
 ;     CSP     CRISP    
"RTN","LEXCODE",33,0)
 ;     UWA                 University of Washington (Neuronames)
"RTN","LEXCODE",34,0)
 ;
"RTN","LEXCODE",35,0)
 ; Example returned array using code 309.24
"RTN","LEXCODE",36,0)
 ;
"RTN","LEXCODE",37,0)
 ;     LEXS(0)=309.24
"RTN","LEXCODE",38,0)
 ;     LEXS("DSM",0)=1
"RTN","LEXCODE",39,0)
 ;     LEXS("DSM",1)=3273^Adjustment disorder with anxious mood
"RTN","LEXCODE",40,0)
 ;     LEXS("ICD",0)=2
"RTN","LEXCODE",41,0)
 ;     LEXS("ICD",1)=268308^Adjustment reaction with anxious mood
"RTN","LEXCODE",42,0)
 ;     LEXS("ICD",2)=3273^Adjustment disorder with anxious mood
"RTN","LEXCODE",43,0)
 ;
"RTN","LEXCODE",44,0)
 Q
"RTN","LEXCODE",45,0)
EN(LEX) ; Get terms associated with a Code
"RTN","LEXCODE",46,0)
 K LEXS S LEX=$$UP^XLFSTR($G(LEX)) Q:'$L(LEX)
"RTN","LEXCODE",47,0)
 N LEXSRC,LEXSO,LEXO,LEXSAB,LEXDA,LEXPF,LEXINA
"RTN","LEXCODE",48,0)
 S LEXS(0)=LEX,LEXO=LEX_" ",LEXDA=0 Q:'$D(^LEX(757.02,"ACODE",LEXO))
"RTN","LEXCODE",49,0)
 F  S LEXDA=$O(^LEX(757.02,"ACODE",LEXO,LEXDA)) Q:+LEXDA=0  D CHK
"RTN","LEXCODE",50,0)
 D ASEM Q
"RTN","LEXCODE",51,0)
CHK ; Check if Valid
"RTN","LEXCODE",52,0)
 S LEXINA=+($P($G(^LEX(757.02,LEXDA,0)),"^",6)) Q:LEXINA>0
"RTN","LEXCODE",53,0)
 S LEXSRC=+($P($G(^LEX(757.02,LEXDA,0)),"^",3)) Q:LEXSRC'>0
"RTN","LEXCODE",54,0)
 S LEXSAB=$E($G(^LEX(757.03,+LEXSRC,0)),1,3) Q:$L(LEXSAB)'=3
"RTN","LEXCODE",55,0)
 S LEXSO=$P($G(^LEX(757.02,LEXDA,0)),"^",2) Q:LEXSO'=LEX
"RTN","LEXCODE",56,0)
 S LEXPF=+($P($G(^LEX(757.02,LEXDA,0)),"^",5))
"RTN","LEXCODE",57,0)
 S:LEXPF=1 LEXS(LEXSAB,"PRE")=LEXDA
"RTN","LEXCODE",58,0)
 S:LEXPF'=1 LEXS(LEXSAB,"OTH",LEXDA)=""
"RTN","LEXCODE",59,0)
 Q
"RTN","LEXCODE",60,0)
ASEM ; Assemble List
"RTN","LEXCODE",61,0)
 Q:'$D(LEXS)
"RTN","LEXCODE",62,0)
 N LEXSAB,LEXCT,LEXDA,LEXEX,LEXEXP,LEXY S LEXSAB=""
"RTN","LEXCODE",63,0)
 F  S LEXSAB=$O(LEXS(LEXSAB)) Q:LEXSAB=""  S LEXCT=0 D
"RTN","LEXCODE",64,0)
 . I $D(LEXS(LEXSAB,"PRE")) D LEXY
"RTN","LEXCODE",65,0)
 . S LEXDA=0
"RTN","LEXCODE",66,0)
 . F  S LEXDA=$O(LEXS(LEXSAB,"OTH",LEXDA)) Q:+LEXDA=0  D LEXY
"RTN","LEXCODE",67,0)
 . S:+LEXSAB'>0&(LEXSAB'="0") LEXS(LEXSAB,0)=LEXCT
"RTN","LEXCODE",68,0)
 Q
"RTN","LEXCODE",69,0)
LEXY ; Get IEN^TERM for Code X
"RTN","LEXCODE",70,0)
 S:$D(LEXS(LEXSAB,"PRE")) LEXDA=LEXS(LEXSAB,"PRE")
"RTN","LEXCODE",71,0)
 K:'$D(LEXS(LEXSAB,"PRE")) LEXS(LEXSAB,"OTH",LEXDA) K LEXS(LEXSAB,"PRE")
"RTN","LEXCODE",72,0)
 S LEXY="",LEXEX=+($P($G(^LEX(757.02,LEXDA,0)),"^",1))
"RTN","LEXCODE",73,0)
 Q:'$L($G(^LEX(757.01,+LEXEX,0)))
"RTN","LEXCODE",74,0)
 S LEXEXP=$G(^LEX(757.01,+LEXEX,0)),LEXCT=LEXCT+1,LEXY=LEXEX_"^"_LEXEXP
"RTN","LEXCODE",75,0)
 S LEXS(LEXSAB,LEXCT)=LEXY
"RTN","LEXCODE",76,0)
 Q
"RTN","LEXDCC")
0^206^B4957812
"RTN","LEXDCC",1,0)
LEXDCC ; ISL Default Display                      ; 09-23-96
"RTN","LEXDCC",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDCC",3,0)
 ;
"RTN","LEXDCC",4,0)
 ; Entry:  D EN^LEXDCC             LEXAP is unknown
"RTN","LEXDCC",5,0)
 ;
"RTN","LEXDCC",6,0)
 ; Entry:  D EN1^LEXDCC(LEXAP)    LEXAP is known
"RTN","LEXDCC",7,0)
 ;
"RTN","LEXDCC",8,0)
 ; Single user entry point - Saves Default Display in file 757.2
"RTN","LEXDCC",9,0)
 ;
"RTN","LEXDCC",10,0)
 ; Where 
"RTN","LEXDCC",11,0)
 ;
"RTN","LEXDCC",12,0)
 ;      LEXAP     Pointer to file 757.2
"RTN","LEXDCC",13,0)
 ;      LEXUSER   DUZ of user
"RTN","LEXDCC",14,0)
 ;      LEXCA     Action (modify/delete)
"RTN","LEXDCC",15,0)
 ;      LEXCM     Method (predefined/create)
"RTN","LEXDCC",16,0)
 ;
"RTN","LEXDCC",17,0)
EN ; Single user, LEXAP is unknown
"RTN","LEXDCC",18,0)
 N LEXAP S LEXAP=$$DFI^LEXDM4 Q:+LEXAP=0  W ! D EN1(LEXAP) Q
"RTN","LEXDCC",19,0)
EN1(LEXAP) ; Single user, LEXAP is known
"RTN","LEXDCC",20,0)
 N LEXUSER,LEXX S LEXUSER=$G(DUZ) Q:+LEXUSER'>0  Q:'$D(^VA(200,+LEXUSER))
"RTN","LEXDCC",21,0)
 ;
"RTN","LEXDCC",22,0)
 S LEXAP=$G(LEXAP) Q:LEXAP=""
"RTN","LEXDCC",23,0)
 I '$D(^LEXT(757.2,+LEXAP,0))&('$D(^LEXT(757.2,"B",LEXAP)))&('$D(^LEXT(757.2,"C",$$UP^XLFSTR(LEXAP))))&('$D(^LEXT(757.2,"AN",LEXAP))) Q
"RTN","LEXDCC",24,0)
 S:+LEXAP'>0 LEXAP=$$AP^LEXDFN2(LEXAP)
"RTN","LEXDCC",25,0)
 ;
"RTN","LEXDCC",26,0)
 Q:+($G(LEXAP))'>0  Q:+($P($G(^LEXT(757.2,+LEXAP,5)),"^",3))'>0
"RTN","LEXDCC",27,0)
 K LEXFIL N LEXCA,LEXCM,LEXDVAL,LEXDNAM,LEXFLD
"RTN","LEXDCC",28,0)
 S LEXFLD=2,LEXCA=$$MOD^LEXDM(2) Q:LEXCA=0!(LEXCA="^^")
"RTN","LEXDCC",29,0)
 D:LEXCA="@" KILL Q:LEXCA="@"  W ! S LEXCM=$$MTH^LEXDM(2) Q:LEXCM["^"
"RTN","LEXDCC",30,0)
 S:LEXCM=1 LEXDVAL=$$EN^LEXDCCS S:LEXCM=2 LEXDVAL=$$EN^LEXDCCC Q:LEXDVAL="^^"
"RTN","LEXDCC",31,0)
 S LEXDNAM=$P(LEXDVAL,"^",2),LEXDVAL=$P(LEXDVAL,"^",1) D SET
"RTN","LEXDCC",32,0)
 Q
"RTN","LEXDCC",33,0)
MGR(LEXX) ; Multi-user (for Manager options)
"RTN","LEXDCC",34,0)
 ; Do not save display, return value to manager option
"RTN","LEXDCC",35,0)
 N LEXCA,LEXCM,LEXDVAL S LEXCA=$$MOD^LEXDM(2) Q:LEXCA=0 "^" Q:(LEXCA="^^") "^^"
"RTN","LEXDCC",36,0)
 Q:LEXCA="@" "@^Delete display" W ! S LEXCM=$$MTH^LEXDM(2) Q:LEXCM["^" "^No display selected" Q:(LEXCM="^^") "^^"
"RTN","LEXDCC",37,0)
 S:LEXCM=1 LEXDVAL=$$EN^LEXDCCS S:LEXCM=2 LEXDVAL=$$EN^LEXDCCC Q:LEXDVAL="^^" "^^"
"RTN","LEXDCC",38,0)
 S LEXX=LEXDVAL Q LEXX
"RTN","LEXDCC",39,0)
SET ; Set default display
"RTN","LEXDCC",40,0)
 D SET^LEXDSV(LEXUSER,LEXAP,LEXDVAL,LEXDNAM,LEXFLD) Q
"RTN","LEXDCC",41,0)
KILL ; Kill default display
"RTN","LEXDCC",42,0)
 D SET^LEXDSV(LEXUSER,LEXAP,"@","Delete",LEXFLD) Q
"RTN","LEXDCCC")
0^207^B8352647
"RTN","LEXDCCC",1,0)
LEXDCCC ; ISL Default Display - Create             ; 09-23-96
"RTN","LEXDCCC",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDCCC",3,0)
 ;
"RTN","LEXDCCC",4,0)
 ; Entry:  S X=$$EN^LEXDCCC
"RTN","LEXDCCC",5,0)
 ;
"RTN","LEXDCCC",6,0)
 ; Function returns a two piece string
"RTN","LEXDCCC",7,0)
 ;  
"RTN","LEXDCCC",8,0)
 ; $P 1    String of classifications coding 
"RTN","LEXDCCC",9,0)
 ;         system mnemonics, i.e., "ICD/CPT",
"RTN","LEXDCCC",10,0)
 ;         and a legitimate value for LEXSHOW.
"RTN","LEXDCCC",11,0)
 ;         This will be null if input is "^"
"RTN","LEXDCCC",12,0)
 ;  
"RTN","LEXDCCC",13,0)
 ; $P 2    Name of display string selected i.e., 
"RTN","LEXDCCC",14,0)
 ;         "ICD/CPT only"  This will be null only
"RTN","LEXDCCC",15,0)
 ;         when user input is "^^"
"RTN","LEXDCCC",16,0)
 ;   
"RTN","LEXDCCC",17,0)
 ; LEXA   Answer to prompt (Yes 1 No 0)
"RTN","LEXDCCC",18,0)
 ; LEXC   Counter
"RTN","LEXDCCC",19,0)
 ; LEXI   Incremental Counter
"RTN","LEXDCCC",20,0)
 ; LEXS   Source, i.e., ICD94, NAN90, CPT89
"RTN","LEXDCCC",21,0)
 ; LEXSO  Source abbreviation, i.e., ICD, CPT, DSM
"RTN","LEXDCCC",22,0)
 ; LEXR   Internal Entry (Record) Number in #757.31
"RTN","LEXDCCC",23,0)
 ; 
"RTN","LEXDCCC",24,0)
 ; LEXFIL Flag, indicates that the 
"RTN","LEXDCCC",25,0)
 ;         classification codes selected are 
"RTN","LEXDCCC",26,0)
 ;         for building a filter - DIC("S")
"RTN","LEXDCCC",27,0)
 ;
"RTN","LEXDCCC",28,0)
T S X=$$EN W !!,X Q
"RTN","LEXDCCC",29,0)
EN(LEXX) ; Entry point S X=$$EN^LEXDCCC
"RTN","LEXDCCC",30,0)
BUILD ; Build the list to select from
"RTN","LEXDCCC",31,0)
 K ^TMP("LEXX",$J) W @IOF
"RTN","LEXDCCC",32,0)
 W:$D(LEXFIL) !,"Include terms linked to the following classification systems:",!!
"RTN","LEXDCCC",33,0)
 W:'$D(LEXFIL) !,"Display codes belonging to the following classification systems:",!!
"RTN","LEXDCCC",34,0)
 N LEXA,LEXC,LEXI,LEXSO,LEXR,LEXS
"RTN","LEXDCCC",35,0)
 S LEXS=""
"RTN","LEXDCCC",36,0)
 F  S LEXS=$O(^LEX(757.03,"B",LEXS)) Q:LEXS=""  D
"RTN","LEXDCCC",37,0)
 . Q:'$D(^LEX(757.02,"ASRC",$E(LEXS,1,3)))
"RTN","LEXDCCC",38,0)
 . S LEXSO=$E(LEXS,1,3) I LEXSO="UND" Q
"RTN","LEXDCCC",39,0)
 . S LEXR=$O(^LEX(757.03,"B",LEXS,0))
"RTN","LEXDCCC",40,0)
 . S LEXC=$S($D(^TMP("LEXX",$J,LEXSO)):LEXC+1,1:1)
"RTN","LEXDCCC",41,0)
 . S ^TMP("LEXX",$J,LEXSO,0)=LEXC
"RTN","LEXDCCC",42,0)
 . S ^TMP("LEXX",$J,LEXSO,LEXC)=$P(^LEX(757.03,LEXR,0),U,2,299)
"RTN","LEXDCCC",43,0)
LIST ; Display the list to select from
"RTN","LEXDCCC",44,0)
 S (LEXX,LEXA,LEXSO)=""
"RTN","LEXDCCC",45,0)
 F  S LEXSO=$O(^TMP("LEXX",$J,LEXSO)) Q:LEXSO=""!(LEXA[U)  D
"RTN","LEXDCCC",46,0)
 . W !,LEXSO F LEXI=1:1:^TMP("LEXX",$J,LEXSO,0) D
"RTN","LEXDCCC",47,0)
 . . W ?5,$P(^TMP("LEXX",$J,LEXSO,LEXI),U,2),!
"RTN","LEXDCCC",48,0)
ANS . ; Ask for user selection
"RTN","LEXDCCC",49,0)
 . W:'$D(LEXFIL) "Display these codes during look-up"
"RTN","LEXDCCC",50,0)
 . W:$D(LEXFIL) "Include terms linked to these codes during look-up"
"RTN","LEXDCCC",51,0)
 . S %=2 D YN^DICN S LEXA=%Y I %=2 W ! Q
"RTN","LEXDCCC",52,0)
 . I '%,'$D(LEXFIL) W !,"The codes from the selected coding systems may be displayed with the term.",! G ANS
"RTN","LEXDCCC",53,0)
 . I '%,$D(LEXFIL) W !,"Searches will display terms linked to the selected coding systems",! G ANS
"RTN","LEXDCCC",54,0)
 . I +($G(%))<0 S:%Y["^" LEXA="^" S:%Y["^^" LEXA="^^" W ! Q
"RTN","LEXDCCC",55,0)
 . S LEXX=LEXX_"/"_LEXSO W ! Q
"RTN","LEXDCCC",56,0)
 I $E(LEXX,1)="/" S LEXX=$E(LEXX,2,$L(LEXX))
"RTN","LEXDCCC",57,0)
 S:$D(LEXFIL) LEXX=LEXX_"^" I '$D(LEXFIL) D
"RTN","LEXDCCC",58,0)
 . N LEXNAM S LEXNAM=""
"RTN","LEXDCCC",59,0)
 . S:$P(LEXX,U,1)'="" LEXNAM=$$NAME^LEXDM3
"RTN","LEXDCCC",60,0)
 . S LEXX=LEXX_"^"_$S($L(LEXX):LEXNAM,1:"No display selected")
"RTN","LEXDCCC",61,0)
 S:LEXA["^^" LEXX="^^"
"RTN","LEXDCCC",62,0)
 K ^TMP("LEXX",$J),%,LEXA,LEXC,LEXI,LEXSO,LEXS,LEXR
"RTN","LEXDCCC",63,0)
 Q LEXX
"RTN","LEXDCCS")
0^208^B12310875
"RTN","LEXDCCS",1,0)
LEXDCCS ; ISL Default Display - Select             ; 09-23-96
"RTN","LEXDCCS",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDCCS",3,0)
 ;
"RTN","LEXDCCS",4,0)
 ; Special Look-up in file 757.31 Display formats
"RTN","LEXDCCS",5,0)
 ; Entry:  S X=$$EN^LEXDCCS
"RTN","LEXDCCS",6,0)
 ;
"RTN","LEXDCCS",7,0)
 ; Function returns a two piece string
"RTN","LEXDCCS",8,0)
 ;  
"RTN","LEXDCCS",9,0)
 ; $P 1    String of classifications coding 
"RTN","LEXDCCS",10,0)
 ;         system mnemonics, i.e., "ICD/CPT",
"RTN","LEXDCCS",11,0)
 ;         and a legitimate value for LEXSHOW.
"RTN","LEXDCCS",12,0)
 ;         This will be null if input is "^"
"RTN","LEXDCCS",13,0)
 ;  
"RTN","LEXDCCS",14,0)
 ; $P 2    Name of display string selected i.e., 
"RTN","LEXDCCS",15,0)
 ;         "ICD/CPT only"  This will be null only
"RTN","LEXDCCS",16,0)
 ;         when user input is "^^"
"RTN","LEXDCCS",17,0)
 ;   
"RTN","LEXDCCS",18,0)
 ; LEX    Array containing pointers to 757.31
"RTN","LEXDCCS",19,0)
 ; LEXA   Users answer to selection
"RTN","LEXDCCS",20,0)
 ; LEXC   Counter
"RTN","LEXDCCS",21,0)
 ; LEXD   Display
"RTN","LEXDCCS",22,0)
 ; LEXF   Re-display starting from #LEXF
"RTN","LEXDCCS",23,0)
 ; LEXI   Incremental Counter
"RTN","LEXDCCS",24,0)
 ; LEXL   Last entry displayed
"RTN","LEXDCCS",25,0)
 ; LEXLN  Line counter
"RTN","LEXDCCS",26,0)
 ; LEXR   Internal Entry Number (Record) in #757.31
"RTN","LEXDCCS",27,0)
 ; LEXS   Selection
"RTN","LEXDCCS",28,0)
 ; LEXT   Re-display up through #LEXT
"RTN","LEXDCCS",29,0)
 ;  
"RTN","LEXDCCS",30,0)
EN(LEXX) ; Select a predefined display string
"RTN","LEXDCCS",31,0)
 N X,Y,LEX,LEXC,LEXL,LEXR,LEXA,LEXD D TOT
"RTN","LEXDCCS",32,0)
 S LEXD="",(LEXA,LEXX,LEXC,LEXR)=0
"RTN","LEXDCCS",33,0)
 F  S LEXD=$O(^LEX(757.31,"B",LEXD)) Q:LEXD=""!(LEXA["^")!(+LEXX>0)  D
"RTN","LEXDCCS",34,0)
 . S LEXR=0
"RTN","LEXDCCS",35,0)
 . F  S LEXR=$O(^LEX(757.31,"B",LEXD,LEXR)) Q:+LEXR=0!(LEXA["^")!(+LEXX>0)  D
"RTN","LEXDCCS",36,0)
 . . S LEXC=LEXC+1,LEXL=LEXC
"RTN","LEXDCCS",37,0)
 . . S LEX(LEXC)=LEXR,LEX(0)=LEXC
"RTN","LEXDCCS",38,0)
 . . D W(LEXC,LEXR)
"RTN","LEXDCCS",39,0)
 . . I LEXC#5=0,+LEXX=0 S LEXA=$$SEL S:+LEXA>0&(+LEXA<(LEXC+1)) LEXX=+LEXA
"RTN","LEXDCCS",40,0)
 I +LEXX=0,LEXA'["^",LEXC#5'=0 S LEXA=$$SEL S:+LEXA>0&(+LEXA<(LEXC+1)) LEXX=+LEXA
"RTN","LEXDCCS",41,0)
 S LEXX=+LEXX S:LEXX'=0&($D(LEX(LEXX))) LEXX=LEX(LEXX) K LEX
"RTN","LEXDCCS",42,0)
 I +LEXX>0 S LEXX=$G(^LEX(757.31,+LEXX,1))_"^"_$P($G(^LEX(757.31,+LEXX,0)),"^",1) Q LEXX
"RTN","LEXDCCS",43,0)
 S:LEXA'["^^" LEXX="^No display selected" S:LEXA["^^" LEXX="^^"
"RTN","LEXDCCS",44,0)
 Q LEXX
"RTN","LEXDCCS",45,0)
SEL(LEXS) ; Select from the array
"RTN","LEXDCCS",46,0)
 S LEXS="" W ! N X,Y,DIRUT,DTOUT,DUOUT,DIROUT,DIR
"RTN","LEXDCCS",47,0)
 S DIR(0)="NAO^1:"_LEXC
"RTN","LEXDCCS",48,0)
 S DIR("A")="Select 1-"_LEXC_":  ",(DIR("?"),DIR("??"))="^D SH^LEXDCCS"
"RTN","LEXDCCS",49,0)
 D ^DIR W:$G(X)="" ! S LEXS=$S(X["^"&(X'["^^"):"^",X["^^":"^^",X'["^"&(+Y=0):"",1:+Y) Q LEXS
"RTN","LEXDCCS",50,0)
SH ; Show help
"RTN","LEXDCCS",51,0)
 I X'["?" D STD Q
"RTN","LEXDCCS",52,0)
 N LEXR S LEXR=+($E(X,2,$L(X))) I $E(X,1)="?",LEXR>0,LEXR<(LEX(0)+1) D
"RTN","LEXDCCS",53,0)
 . S LEXR=LEX(LEXR) D:'$D(^LEX(757.31,LEXR,2,1)) NODES,STD Q:'$D(^LEX(757.31,LEXR,2,1))  D DES
"RTN","LEXDCCS",54,0)
 D:$E(X,1)="?"&(LEXR<1!(LEXR>LEX(0))) STD D:$E(X,1)'="?" STD D RD
"RTN","LEXDCCS",55,0)
 Q
"RTN","LEXDCCS",56,0)
STD ; Standard Help
"RTN","LEXDCCS",57,0)
 W !!,"Enter 1-",LEXC," to select a Shortcut Context, or ""?"" for help, or ""?#"" for descriptive"
"RTN","LEXDCCS",58,0)
 W !,"help on an entry flagged with an ""*"", or ""^"" to exit or <Return> for more."
"RTN","LEXDCCS",59,0)
 Q
"RTN","LEXDCCS",60,0)
DES ; Description Help
"RTN","LEXDCCS",61,0)
 N LEXLN,LEXI S (LEXLN,LEXI)=0 W !!,?2,$P(^LEX(757.31,LEXR,0),"^",1),!
"RTN","LEXDCCS",62,0)
 F  S LEXI=$O(^LEX(757.31,LEXR,2,LEXI)) Q:+LEXI=0  D
"RTN","LEXDCCS",63,0)
 . W !,?4,^LEX(757.31,LEXR,2,LEXI,0) S LEXLN=LEXLN+1
"RTN","LEXDCCS",64,0)
 D:LEXLN>4 EOP W ! Q
"RTN","LEXDCCS",65,0)
NODES ; No Description Help Available
"RTN","LEXDCCS",66,0)
 W !!,?2,$P(^LEX(757.31,LEXR,0),"^",1)," does not have a description",! Q
"RTN","LEXDCCS",67,0)
RD ; Re-Display List
"RTN","LEXDCCS",68,0)
 N LEXF,LEXT S LEXT=+($G(LEXL)),LEXF=(+(LEXT#5)-1)
"RTN","LEXDCCS",69,0)
 S:LEXF<0 LEXF=4 S LEXF=LEXT-LEXF S LEXF=LEXF-1
"RTN","LEXDCCS",70,0)
 F  S LEXF=$O(LEX(LEXF)) Q:+LEXF=0!(LEXF'<(LEXT+1))  D
"RTN","LEXDCCS",71,0)
 . W:LEXF=1 ! D W(LEXF,LEX(LEXF))
"RTN","LEXDCCS",72,0)
 Q
"RTN","LEXDCCS",73,0)
W(LEXC,LEXR) ; Write entry
"RTN","LEXDCCS",74,0)
 W !,$J(LEXC,4),".  ",$P(^LEX(757.31,LEXR,0),"^",1)
"RTN","LEXDCCS",75,0)
 W $S($D(^LEX(757.31,LEXR,2,1)):"  *",1:"") Q
"RTN","LEXDCCS",76,0)
TOT ; Total displays
"RTN","LEXDCCS",77,0)
 N LEXD,LEXR,LEXC S LEXD="",LEXC=0
"RTN","LEXDCCS",78,0)
 F  S LEXD=$O(^LEX(757.31,"B",LEXD)) Q:LEXD=""  S LEXR=0 D
"RTN","LEXDCCS",79,0)
 . F  S LEXR=$O(^LEX(757.31,"B",LEXD,LEXR)) Q:+LEXR=0  S LEXC=LEXC+1
"RTN","LEXDCCS",80,0)
 W !!,LEXC," Displays found",!
"RTN","LEXDCCS",81,0)
 Q
"RTN","LEXDCCS",82,0)
EOP ; End of Page 
"RTN","LEXDCCS",83,0)
 W ! N X,Y,DIR,DTOUT,DUOUT,DIRUT,DIROUT S DIR(0)="E" D ^DIR S:X[U LEXA="^" W ! Q
"RTN","LEXDCX")
0^209^B4372991
"RTN","LEXDCX",1,0)
LEXDCX ; ISL Default Shortcut Context             ; 09-23-96
"RTN","LEXDCX",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDCX",3,0)
 ;
"RTN","LEXDCX",4,0)
 ; Entry:  D EN^LEXDCX              LEXAP is unknown
"RTN","LEXDCX",5,0)
 ;
"RTN","LEXDCX",6,0)
 ; Entry:  D EN1^LEXDCX(LEXAP)     LEXAP is known
"RTN","LEXDCX",7,0)
 ;
"RTN","LEXDCX",8,0)
 ; Single user entry point - Saves Default Shortcut 
"RTN","LEXDCX",9,0)
 ;                           Context in file 757.2
"RTN","LEXDCX",10,0)
 ;
"RTN","LEXDCX",11,0)
 ; Where 
"RTN","LEXDCX",12,0)
 ;
"RTN","LEXDCX",13,0)
 ;      LEXAP     Pointer to file 757.2
"RTN","LEXDCX",14,0)
 ;      LEXCA     Action (modify/delete)
"RTN","LEXDCX",15,0)
 ;      LEXDEL    Flag default for Deletion
"RTN","LEXDCX",16,0)
 ;      LEXDNAM   Default Name
"RTN","LEXDCX",17,0)
 ;      LEXDVAL   Default Value
"RTN","LEXDCX",18,0)
 ;      LEXFIL    Flag for Filter
"RTN","LEXDCX",19,0)
 ;      LEXFLD    Default field (1-4) in file 757.201
"RTN","LEXDCX",20,0)
 ;      LEXUSER   DUZ of user
"RTN","LEXDCX",21,0)
 ;      LEXX      Returned value
"RTN","LEXDCX",22,0)
 ;
"RTN","LEXDCX",23,0)
EN ; Single user, LEXAP is unknown
"RTN","LEXDCX",24,0)
 N LEXAP,X,Y S LEXAP=$$DFI^LEXDM4 Q:+LEXAP=0  W ! D EN1(LEXAP) Q
"RTN","LEXDCX",25,0)
EN1(LEXAP) ; Single user, LEXAP is known
"RTN","LEXDCX",26,0)
 N LEXUSER,LEXX S LEXUSER=$G(DUZ) Q:+LEXUSER'>0  Q:'$D(^VA(200,+LEXUSER))
"RTN","LEXDCX",27,0)
 ;
"RTN","LEXDCX",28,0)
 S LEXAP=$G(LEXAP) Q:LEXAP=""
"RTN","LEXDCX",29,0)
 I '$D(^LEXT(757.2,+LEXAP,0))&('$D(^LEXT(757.2,"B",LEXAP)))&('$D(^LEXT(757.2,"C",$$UP^XLFSTR(LEXAP))))&('$D(^LEXT(757.2,"AN",LEXAP))) Q
"RTN","LEXDCX",30,0)
 S:+LEXAP'>0 LEXAP=$$AP^LEXDFN2(LEXAP)
"RTN","LEXDCX",31,0)
 ;
"RTN","LEXDCX",32,0)
 Q:+($G(LEXAP))'>0  Q:+($P($G(^LEXT(757.2,+LEXAP,5)),"^",3))'>0
"RTN","LEXDCX",33,0)
 K LEXFIL N LEXDVAL,LEXDNAM,LEXFLD S LEXFLD=4
"RTN","LEXDCX",34,0)
 S LEXDVAL=$$EN^LEXDCXS Q:LEXDVAL="^^"
"RTN","LEXDCX",35,0)
 S LEXDNAM=$P(LEXDVAL,"^",2),LEXDVAL=$P(LEXDVAL,"^",1)
"RTN","LEXDCX",36,0)
 Q:LEXDVAL=""&(LEXDNAM="")  I LEXDVAL="",LEXDNAM'="" D  Q
"RTN","LEXDCX",37,0)
 . N LEXDEL S LEXDEL=$$EN^LEXDM2(LEXUSER,LEXAP,4) I +LEXDEL>0 D KILL
"RTN","LEXDCX",38,0)
 D SET
"RTN","LEXDCX",39,0)
 Q
"RTN","LEXDCX",40,0)
MGR(LEXX) ; Multi-user (for Manager options)
"RTN","LEXDCX",41,0)
 ; Do not save display, return value to manager option
"RTN","LEXDCX",42,0)
 N LEXCA,LEXDVAL S LEXCA=$$MOD^LEXDM(4) Q:LEXCA=0 "^" Q:(LEXCA="^^") "^^"
"RTN","LEXDCX",43,0)
 Q:LEXCA="@" "@^Delete Shortcut Context" W ! S LEXDVAL=$$EN^LEXDCXS Q:LEXDVAL="^^" "^^"
"RTN","LEXDCX",44,0)
 S LEXX=LEXDVAL Q LEXX
"RTN","LEXDCX",45,0)
SET ; Set default Shortcut Context
"RTN","LEXDCX",46,0)
 D SET^LEXDSV(LEXUSER,LEXAP,LEXDVAL,LEXDNAM,LEXFLD) Q
"RTN","LEXDCX",47,0)
KILL ; Kill default Shortcut Context
"RTN","LEXDCX",48,0)
 D SET^LEXDSV(LEXUSER,LEXAP,"@","Delete",LEXFLD) Q
"RTN","LEXDCXS")
0^210^B20695673
"RTN","LEXDCXS",1,0)
LEXDCXS ; ISL Default Context - Select             ; 09-23-96
"RTN","LEXDCXS",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDCXS",3,0)
 ;
"RTN","LEXDCXS",4,0)
 ; Special Look-up in file 757.41 Shortcut Context
"RTN","LEXDCXS",5,0)
 ;
"RTN","LEXDCXS",6,0)
 ; Entry:  S X=$$EN^LEXDCXS
"RTN","LEXDCXS",7,0)
 ;
"RTN","LEXDCXS",8,0)
 ; Function returns a two piece string
"RTN","LEXDCXS",9,0)
 ;  
"RTN","LEXDCXS",10,0)
 ; $P 1    Pointer to file 757.41, and a valid
"RTN","LEXDCXS",11,0)
 ;         value for LEXCTX (context user default)
"RTN","LEXDCXS",12,0)
 ;         This will be null if input is "^"
"RTN","LEXDCXS",13,0)
 ;  
"RTN","LEXDCXS",14,0)
 ; $P 2    Name of context selected.  This will
"RTN","LEXDCXS",15,0)
 ;         be null only when user input is "^^"
"RTN","LEXDCXS",16,0)
 ;   
"RTN","LEXDCXS",17,0)
 ; LEX    Array containing pointers to 757.41
"RTN","LEXDCXS",18,0)
 ; LEXA   Users answer to selection
"RTN","LEXDCXS",19,0)
 ; LEXC   Counter
"RTN","LEXDCXS",20,0)
 ; LEXE   Edit/non-edit Counter
"RTN","LEXDCXS",21,0)
 ; LEXF   Re-display starting from #LEXF
"RTN","LEXDCXS",22,0)
 ; LEXI   Incremental Counter
"RTN","LEXDCXS",23,0)
 ; LEXL   Last entry displayed
"RTN","LEXDCXS",24,0)
 ; LEXR   Internal Entry Number (Record) in #757.41
"RTN","LEXDCXS",25,0)
 ; LEXT   Re-display up through #LEXT
"RTN","LEXDCXS",26,0)
 ; LEXX   Returned value
"RTN","LEXDCXS",27,0)
 ;  
"RTN","LEXDCXS",28,0)
EN(LEXX) ; Entry:  S X=$$EN^LEXDCXS
"RTN","LEXDCXS",29,0)
 N X,Y,LEX,LEXC,LEXL,LEXR,LEXA,LEXE S LEXE=$$CNT D TOT
"RTN","LEXDCXS",30,0)
 S LEXA="",(LEXX,LEXC,LEXR)=0
"RTN","LEXDCXS",31,0)
 F  S LEXR=$O(^LEX(757.41,LEXR)) Q:+LEXR=0!(LEXA["^")!(+LEXX>0)  D
"RTN","LEXDCXS",32,0)
 . I $D(LEXEDIT),$P($G(^LEX(757.41,LEXR,0)),"^",2)'=1 Q
"RTN","LEXDCXS",33,0)
 . S LEXC=LEXC+1,LEXL=LEXC
"RTN","LEXDCXS",34,0)
 . S LEX(LEXC)=LEXR,LEX(0)=LEXC
"RTN","LEXDCXS",35,0)
 . D:LEXE>1 W(LEXC,LEXR)
"RTN","LEXDCXS",36,0)
 . D:LEXE=1 WO(LEXR)
"RTN","LEXDCXS",37,0)
 ; D ASK
"RTN","LEXDCXS",38,0)
 D ASK I LEXA["^" D UOUT Q LEXX
"RTN","LEXDCXS",39,0)
 D VAL Q LEXX
"RTN","LEXDCXS",40,0)
ASK ; Ask for user input
"RTN","LEXDCXS",41,0)
 Q:+LEXX>0  Q:LEXA["^"  Q:+LEXR>0&(LEXC#5'=0)
"RTN","LEXDCXS",42,0)
 Q:+LEXR=0&(LEXC#5=0)
"RTN","LEXDCXS",43,0)
 D SEL Q:+LEXA'>0  Q:LEXA>LEXE  S LEXX=$G(LEX(+LEXA))
"RTN","LEXDCXS",44,0)
 Q
"RTN","LEXDCXS",45,0)
SEL ; Select from list
"RTN","LEXDCXS",46,0)
 I LEXE=1 D ONE Q
"RTN","LEXDCXS",47,0)
 W ! N X,Y,DIR,DIRUT,DTOUT,DUOUT,DIROUT
"RTN","LEXDCXS",48,0)
 S DIR(0)="NAO^1:"_LEXC
"RTN","LEXDCXS",49,0)
 S DIR("A")="Select SHORTCUT CONTEXT 1-"_LEXC_":  //  "
"RTN","LEXDCXS",50,0)
 S (DIR("?"),DIR("??"))="^D SH^LEXDCXS"
"RTN","LEXDCXS",51,0)
 D ^DIR S LEXA=Y
"RTN","LEXDCXS",52,0)
 Q
"RTN","LEXDCXS",53,0)
ONE ;
"RTN","LEXDCXS",54,0)
 W ! N X,Y,DIR,DIRUT,DTOUT,DUOUT,DIROUT
"RTN","LEXDCXS",55,0)
 S DIR(0)="YAO"
"RTN","LEXDCXS",56,0)
 S DIR("A")="  Ok?  //  "
"RTN","LEXDCXS",57,0)
 S (DIR("?"),DIR("??"))="^D SO^LEXDCXS"
"RTN","LEXDCXS",58,0)
 D ^DIR S LEXA=$S(+Y>0:1,1:0)
"RTN","LEXDCXS",59,0)
 Q
"RTN","LEXDCXS",60,0)
UOUT ; Up Arrow detected
"RTN","LEXDCXS",61,0)
 S:LEXA="^^" LEXX="^"
"RTN","LEXDCXS",62,0)
 S:LEXA="^" LEXX="^No context selected"
"RTN","LEXDCXS",63,0)
 Q
"RTN","LEXDCXS",64,0)
VAL ; No Un Arrow (value)
"RTN","LEXDCXS",65,0)
 I +LEXX>0 D  Q
"RTN","LEXDCXS",66,0)
 . I $D(^LEX(757.41,+LEXX)) D  Q
"RTN","LEXDCXS",67,0)
 . . S LEXX=LEXX_"^"_$P($G(^LEX(757.41,+LEXX,0)),"^",1)
"RTN","LEXDCXS",68,0)
 . S LEXX="^No context selected"
"RTN","LEXDCXS",69,0)
 S LEXX="^No context selected"
"RTN","LEXDCXS",70,0)
 Q
"RTN","LEXDCXS",71,0)
SH ; Show help
"RTN","LEXDCXS",72,0)
 N LEXR S LEXR=+($E(X,2,$L(X)))
"RTN","LEXDCXS",73,0)
 I $E(X,1)="?",LEXR>0,LEXR<(LEX(0)+1) D
"RTN","LEXDCXS",74,0)
 . S LEXR=LEX(LEXR) D:'$D(^LEX(757.41,LEXR,1,1)) NODES,STD
"RTN","LEXDCXS",75,0)
 . Q:'$D(^LEX(757.41,LEXR,1,1))  D DES
"RTN","LEXDCXS",76,0)
 D:$E(X,1)="?"&(LEXR<1!(LEXR>LEX(0))) STD
"RTN","LEXDCXS",77,0)
 D:$E(X,1)'="?" STD D RD
"RTN","LEXDCXS",78,0)
 Q
"RTN","LEXDCXS",79,0)
SO ; Show one help
"RTN","LEXDCXS",80,0)
 N LEXR S LEXR=1
"RTN","LEXDCXS",81,0)
 I $E(X,1)="?",LEXR>0,LEXR<(LEX(0)+1) D
"RTN","LEXDCXS",82,0)
 . S LEXR=LEX(LEXR) D:'$D(^LEX(757.41,LEXR,1,1)) NODES,STDO
"RTN","LEXDCXS",83,0)
 . Q:'$D(^LEX(757.41,LEXR,1,1))  D DES
"RTN","LEXDCXS",84,0)
 D:$E(X,1)'="?" STDO D RDO
"RTN","LEXDCXS",85,0)
 Q
"RTN","LEXDCXS",86,0)
STD ; Standard Help
"RTN","LEXDCXS",87,0)
 W !!,"Enter 1-",LEXC," to select a Shortcut Context, "
"RTN","LEXDCXS",88,0)
 W "or ""?"" for help, or ""?#"" for descriptive"
"RTN","LEXDCXS",89,0)
 W !,"help on an entry flagged with an ""*"", or ""^"" "
"RTN","LEXDCXS",90,0)
 W "to exit or <Return> for more."
"RTN","LEXDCXS",91,0)
 Q
"RTN","LEXDCXS",92,0)
STDO ; Standard Help - One
"RTN","LEXDCXS",93,0)
 W !!,"One Shortcut Context available to edit, "
"RTN","LEXDCXS",94,0)
 W "enter ""Yes"" to select, or ""^"" to exit."
"RTN","LEXDCXS",95,0)
 Q
"RTN","LEXDCXS",96,0)
DES ; Description Help
"RTN","LEXDCXS",97,0)
 N LEXI S LEXI=0 W !!,?2,$P(^LEX(757.41,LEXR,0),"^",1),!
"RTN","LEXDCXS",98,0)
 F  S LEXI=$O(^LEX(757.41,LEXR,1,LEXI)) Q:+LEXI=0  D
"RTN","LEXDCXS",99,0)
 . W !,?4,^LEX(757.41,LEXR,1,LEXI,0)
"RTN","LEXDCXS",100,0)
 W ! Q
"RTN","LEXDCXS",101,0)
NODES ; No Description Available
"RTN","LEXDCXS",102,0)
 W !!,?2,$P(^LEX(757.41,LEXR,0),"^",1)
"RTN","LEXDCXS",103,0)
 W " does not have a description",! Q
"RTN","LEXDCXS",104,0)
RD ; Re-Display List (MULTIPLE)
"RTN","LEXDCXS",105,0)
 N LEXF,LEXT S LEXT=+($G(LEXL)),LEXF=(+(LEXT#5)-1)
"RTN","LEXDCXS",106,0)
 S:LEXF<0 LEXF=4 S LEXF=LEXT-LEXF,LEXF=LEXF-1
"RTN","LEXDCXS",107,0)
 F  S LEXF=$O(LEX(LEXF)) Q:+LEXF=0!(LEXF'<(LEXT+1))  D
"RTN","LEXDCXS",108,0)
 . W:LEXF=1 ! D W(LEXF,LEX(LEXF))
"RTN","LEXDCXS",109,0)
 Q
"RTN","LEXDCXS",110,0)
RDO ; Re-Display List (ONE)
"RTN","LEXDCXS",111,0)
 N LEXR S LEXR=LEX(1) W ! D WO(LEXR)
"RTN","LEXDCXS",112,0)
 Q
"RTN","LEXDCXS",113,0)
W(LEXC,LEXR) ; Write entry
"RTN","LEXDCXS",114,0)
 W !,$J(LEXC,4),".  ",$P(^LEX(757.41,LEXR,0),"^",1)
"RTN","LEXDCXS",115,0)
 W $S($D(^LEX(757.41,LEXR,1)):"  *",1:"") Q
"RTN","LEXDCXS",116,0)
WO(LEXR) ; Write one entry
"RTN","LEXDCXS",117,0)
 W !,$P(^LEX(757.41,LEXR,0),"^",1) W $S($D(^LEX(757.41,LEXR,1)):"  *",1:"") Q
"RTN","LEXDCXS",118,0)
TOT ; Total Context
"RTN","LEXDCXS",119,0)
 N LEXR,LEXC S (LEXR,LEXC)=0 F  S LEXR=$O(^LEX(757.41,LEXR)) Q:+LEXR=0  D
"RTN","LEXDCXS",120,0)
 . Q:$D(LEXEDIT)&($P($G(^LEX(757.41,LEXR,0)),"^",2)'=1)  S LEXC=LEXC+1
"RTN","LEXDCXS",121,0)
 I $D(LEXEDIT) D  Q
"RTN","LEXDCXS",122,0)
 . W:LEXC>1 !!,LEXC," SHORTCUT CONTEXT(s) found which can be edited",!
"RTN","LEXDCXS",123,0)
 . W:LEXC=1 !!,"Only ",LEXC," SHORTCUT CONTEXT found which can be edited",!
"RTN","LEXDCXS",124,0)
 W:LEXC>1 !!,LEXC," SHORTCUT CONTEXT(s) found",! W:LEXC=1 !!,"Only ",LEXC," SHORTCUT CONTEXT found",!
"RTN","LEXDCXS",125,0)
 Q
"RTN","LEXDCXS",126,0)
CNT(X) ; Count
"RTN","LEXDCXS",127,0)
 N LEXR,LEXC S (LEXR,LEXC)=0 F  S LEXR=$O(^LEX(757.41,LEXR)) Q:+LEXR=0  D
"RTN","LEXDCXS",128,0)
 . Q:$D(LEXEDIT)&($P($G(^LEX(757.41,LEXR,0)),"^",2)'=1)  S LEXC=LEXC+1
"RTN","LEXDCXS",129,0)
 S X=LEXC Q X
"RTN","LEXDD1")
0^211^B22014117
"RTN","LEXDD1",1,0)
LEXDD1 ; ISL Display Defaults                     ; 09-23-96
"RTN","LEXDD1",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDD1",3,0)
 ;
"RTN","LEXDD1",4,0)
SHOW ; Show user defaults
"RTN","LEXDD1",5,0)
 W @IOF
"RTN","LEXDD1",6,0)
 N LEXMODE,LEXUSER,LEXSERV
"RTN","LEXDD1",7,0)
SELUSR ; Select user/user group
"RTN","LEXDD1",8,0)
 K LEXD,LEXMODE
"RTN","LEXDD1",9,0)
 W !!,"Show User Defaults for"
"RTN","LEXDD1",10,0)
 W !!,"  1:  All users with defaults"
"RTN","LEXDD1",11,0)
 W !,"  2:  A Single User"
"RTN","LEXDD1",12,0)
 W !,"  3:  Users in a Service",!
"RTN","LEXDD1",13,0)
BYUSR ; Get response to user/user group
"RTN","LEXDD1",14,0)
 K ZTSAVE S LEXMODE=$$USR G:LEXMODE[U SHOWQ
"RTN","LEXDD1",15,0)
 I LEXMODE=1 D  G SELUSR
"RTN","LEXDD1",16,0)
 . S ZTRTN="ALL^LEXDD1" D DEV,HOME^%ZIS
"RTN","LEXDD1",17,0)
 I LEXMODE=2 D  G:+($G(LEXDUZ))'<1 SELUSR
"RTN","LEXDD1",18,0)
 . W ! S LEXDUZ=$$USER^LEXDM4,LEXDUZ=+LEXDUZ
"RTN","LEXDD1",19,0)
 . I +LEXDUZ'<1 D
"RTN","LEXDD1",20,0)
 . . S ZTRTN="ONE^LEXDD1"
"RTN","LEXDD1",21,0)
 . . S ZTSAVE("LEXDUZ")=""
"RTN","LEXDD1",22,0)
 . . D DEV,HOME^%ZIS
"RTN","LEXDD1",23,0)
 I LEXMODE=3 D  G SELUSR
"RTN","LEXDD1",24,0)
 . W ! S LEXSERV=$$SERV^LEXDM4
"RTN","LEXDD1",25,0)
 . I +LEXSERV>0 D
"RTN","LEXDD1",26,0)
 . . S ZTRTN="SERV^LEXDD1"
"RTN","LEXDD1",27,0)
 . . S ZTSAVE("LEXSERV")=""
"RTN","LEXDD1",28,0)
 . . D DEV,HOME^%ZIS
"RTN","LEXDD1",29,0)
 G SHOWQ
"RTN","LEXDD1",30,0)
 Q
"RTN","LEXDD1",31,0)
DEV ; Request a device
"RTN","LEXDD1",32,0)
 N LEXCNT,LEXLC,LEXC S (LEXCNT,LEXLC)=0,LEXC=""
"RTN","LEXDD1",33,0)
 S (ZTSAVE("LEXC"),ZTSAVE("LEXCNT"),ZTSAVE("LEXLC"))=""
"RTN","LEXDD1",34,0)
 N %ZIS,IOP S %ZIS="PQ" D ^%ZIS Q:POP  I $D(IO("Q")) D QUE Q
"RTN","LEXDD1",35,0)
NOQUE ; Local display
"RTN","LEXDD1",36,0)
 W @IOF D @ZTRTN,^%ZISC K ZTSAVE Q
"RTN","LEXDD1",37,0)
QUE ; Queue task to a selected device
"RTN","LEXDD1",38,0)
 N %,ZTDESC,ZTDTH,ZTIO,ZTSK Q:'$D(ZTRTN)  K IO("Q")
"RTN","LEXDD1",39,0)
 S ZTDESC="Lexicon Defaults",ZTIO=ION,ZTDTH=$H
"RTN","LEXDD1",40,0)
 D ^%ZTLOAD
"RTN","LEXDD1",41,0)
 W !,$S($D(ZTSK):"Request Queued",1:"Request Cancelled"),!
"RTN","LEXDD1",42,0)
 K ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE D ^%ZISC
"RTN","LEXDD1",43,0)
 Q
"RTN","LEXDD1",44,0)
ALL ; Display for all users
"RTN","LEXDD1",45,0)
 N LEXUSR,LEXDUZ,LEXITLE
"RTN","LEXDD1",46,0)
 S LEXUSR=""
"RTN","LEXDD1",47,0)
 S LEXITLE="Lexicon User Defaults (all users with defaults)"
"RTN","LEXDD1",48,0)
 W !,LEXITLE W:IOST["P-" !! S LEXLC=$S(IOST["P-":LEXLC+3,1:LEXLC+1)
"RTN","LEXDD1",49,0)
 F  S LEXUSR=$O(^LEXT(757.2,"AUD",LEXUSR)) Q:LEXUSR=""  D
"RTN","LEXDD1",50,0)
 . N LEXDUZ S LEXDUZ=0
"RTN","LEXDD1",51,0)
 . F  S LEXDUZ=$O(^LEXT(757.2,"AUD",LEXUSR,LEXDUZ)) Q:+LEXDUZ=0  D
"RTN","LEXDD1",52,0)
 . . I +LEXDUZ'<1 D
"RTN","LEXDD1",53,0)
 . . . S LEXOK=$$DEF I LEXOK D BUILD^LEXDD2 S LEXCNT=LEXCNT+1
"RTN","LEXDD1",54,0)
 I +LEXCNT=0 D
"RTN","LEXDD1",55,0)
 . W !!,"No users found with defaults set."
"RTN","LEXDD1",56,0)
 D ^%ZISC I $D(ZTQUEUED) S ZTREQ="@"
"RTN","LEXDD1",57,0)
 Q
"RTN","LEXDD1",58,0)
ONE ; Display for one user
"RTN","LEXDD1",59,0)
 Q:+($G(LEXDUZ))<1  N LEXITLE,LEXOK
"RTN","LEXDD1",60,0)
 S LEXITLE="Lexicon User Defaults (Single User)"
"RTN","LEXDD1",61,0)
 W !,LEXITLE W:IOST["P-" !! S LEXLC=$S(IOST["P-":LEXLC+3,1:LEXLC+1)
"RTN","LEXDD1",62,0)
 I LEXDUZ'<1,$D(^VA(200,+LEXDUZ)) D
"RTN","LEXDD1",63,0)
 . S LEXOK=$$DEF I LEXOK D BUILD^LEXDD2 S LEXCNT=LEXCNT+1
"RTN","LEXDD1",64,0)
 . I 'LEXOK D
"RTN","LEXDD1",65,0)
 . . I $P($G(^VA(200,LEXDUZ,0)),"^",1)'="" D
"RTN","LEXDD1",66,0)
 . . . N LEXNAME S LEXNAME=$P($G(^VA(200,LEXDUZ,0)),"^",1)
"RTN","LEXDD1",67,0)
 . . . S LEXNAME=$$FL^LEXDD4(LEXNAME)
"RTN","LEXDD1",68,0)
 . . . W !,LEXNAME," has no defaults set",!
"RTN","LEXDD1",69,0)
 . . I $P($G(^VA(200,LEXDUZ,0)),"^",1)="" D
"RTN","LEXDD1",70,0)
 . . . W !,"User has no defaults set",!
"RTN","LEXDD1",71,0)
 I LEXDUZ'<1,'$D(^VA(200,+LEXDUZ)) D
"RTN","LEXDD1",72,0)
 . W !,"User not found",!
"RTN","LEXDD1",73,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@" Q
"RTN","LEXDD1",74,0)
SERV ; Display for users in a Service
"RTN","LEXDD1",75,0)
 Q:'$D(LEXSERV)  N LEXITLE
"RTN","LEXDD1",76,0)
 S LEXSERV=+LEXSERV
"RTN","LEXDD1",77,0)
 S LEXITLE="Lexicon User Defaults in a Single Service ("_$P(^DIC(49,LEXSERV,0),U,1)_")"
"RTN","LEXDD1",78,0)
 W !,LEXITLE W:IOST["P-" !! S LEXLC=$S(IOST["P-":LEXLC+3,1:LEXLC+1)
"RTN","LEXDD1",79,0)
 S LEXUSR=""
"RTN","LEXDD1",80,0)
 F  S LEXUSR=$O(^LEXT(757.2,"AUD",LEXUSR)) Q:LEXUSR=""  D
"RTN","LEXDD1",81,0)
 . N LEXDUZ S LEXDUZ=0
"RTN","LEXDD1",82,0)
 . F  S LEXDUZ=$O(^LEXT(757.2,"AUD",LEXUSR,LEXDUZ)) Q:+LEXDUZ=0  D
"RTN","LEXDD1",83,0)
 . . I +LEXDUZ'<1 D
"RTN","LEXDD1",84,0)
 . . . I $P($G(^VA(200,LEXDUZ,5)),"^",1)=LEXSERV D
"RTN","LEXDD1",85,0)
 . . . . S LEXOK=$$DEF
"RTN","LEXDD1",86,0)
 . . . . I LEXOK D BUILD^LEXDD2 S LEXCNT=LEXCNT+1
"RTN","LEXDD1",87,0)
 I +LEXCNT=0 D
"RTN","LEXDD1",88,0)
 . W !!,"No users found with defaults set in the ",$P(^DIC(49,LEXSERV,0),U,1)," service."
"RTN","LEXDD1",89,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@" Q
"RTN","LEXDD1",90,0)
SHOWQ ; Quit SHOW
"RTN","LEXDD1",91,0)
 I IOST["P-" D ^%ZISC
"RTN","LEXDD1",92,0)
 K ZTSAVE,ZTRTN,ZTDESC,ZTDTH,ZTIO,ZTQUEUED,ZTREQ,ZTSK,X,Y
"RTN","LEXDD1",93,0)
 K DIR,DIC,DIC("S"),%,%ZIS,POP,IOP
"RTN","LEXDD1",94,0)
 K LEX,LEXA,LEXAP,LEXAPID,LEXC,LEXCNT,LEXCTR,LEXCTX,LEXD
"RTN","LEXDD1",95,0)
 K LEXDATA,LEXDICS,LEXDUZ,LEXFIL,LEXFN,LEXI,LEXIEN,LEXITL
"RTN","LEXDD1",96,0)
 K LEXITLE,LEXT,LEXLC,LEXLN,LEXMODE,LEXNAME,LEXOK,LEXSERV
"RTN","LEXDD1",97,0)
 K LEXSHOW,LEXSPC,LEXSTLN,LEXSTR,LEXSUB,LEXUSER,LEXUSR
"RTN","LEXDD1",98,0)
 Q
"RTN","LEXDD1",99,0)
DEF(X) ; Based on DUZ determines if there are defaults defined
"RTN","LEXDD1",100,0)
 S X=0 Q:+($G(LEXDUZ))=0 X N LEXAPID,LEXIEN S LEXAPID=0
"RTN","LEXDD1",101,0)
 ; Defaults by Application
"RTN","LEXDD1",102,0)
 F  S LEXAPID=$O(^LEXT(757.2,"ADEF",LEXAPID)) Q:+LEXAPID=0!(X)  D  Q:X
"RTN","LEXDD1",103,0)
 . S LEXIEN=0 F  S LEXIEN=$O(^LEXT(757.2,"ADEF",LEXAPID,LEXIEN)) Q:+LEXIEN=0!(X)  D  Q:X
"RTN","LEXDD1",104,0)
 . . S:$L($G(^LEXT(757.2,LEXIEN,200,LEXDUZ,1))) X=1 Q:X
"RTN","LEXDD1",105,0)
 . . S:$L($G(^LEXT(757.2,LEXIEN,200,LEXDUZ,2))) X=1 Q:X
"RTN","LEXDD1",106,0)
 . . S:$L($G(^LEXT(757.2,LEXIEN,200,LEXDUZ,3))) X=1 Q:X
"RTN","LEXDD1",107,0)
 . . S:$L($G(^LEXT(757.2,LEXIEN,200,LEXDUZ,4))) X=1 Q:X
"RTN","LEXDD1",108,0)
 Q X
"RTN","LEXDD1",109,0)
USR(X) ; Get response for user type/group
"RTN","LEXDD1",110,0)
 N Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","LEXDD1",111,0)
 S DIR("A")="Select (1-3):  ",DIR("B")=2
"RTN","LEXDD1",112,0)
 S DIR("?")="Answer must be from 1 to 3"
"RTN","LEXDD1",113,0)
 S DIR(0)="NAO^1:3:0" D ^DIR
"RTN","LEXDD1",114,0)
 S X=$S($D(DTOUT)!(X[U)!(X=""):U,1:X) K DIR Q X
"RTN","LEXDD2")
0^212^B3129195
"RTN","LEXDD2",1,0)
LEXDD2 ; ISL Display Defaults - Build List        ; 09-23-96
"RTN","LEXDD2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDD2",3,0)
 ;
"RTN","LEXDD2",4,0)
BUILD ; Display defaults
"RTN","LEXDD2",5,0)
 Q:+($G(LEXDUZ))<1  Q:'$D(^VA(200,LEXDUZ,0))
"RTN","LEXDD2",6,0)
 I '$D(LEXLC) N LEXLC S LEXLC=0
"RTN","LEXDD2",7,0)
 I '$D(LEXC) N LEXC S LEXC=""
"RTN","LEXDD2",8,0)
APPS ; Get applications authorizing user defaults
"RTN","LEXDD2",9,0)
 K LEXD S LEXD(0)=0 N LEXA,LEXAP
"RTN","LEXDD2",10,0)
 D BLANK^LEXDD4,BLANK^LEXDD4,NAME^LEXDD4,BLANK^LEXDD4
"RTN","LEXDD2",11,0)
 D SEV^LEXDD4,LOC^LEXDD4
"RTN","LEXDD2",12,0)
 S LEXA="" F  S LEXA=$O(^LEXT(757.2,"ADEF",LEXA)) Q:LEXA=""  D
"RTN","LEXDD2",13,0)
 . N LEXAP S LEXAP=0
"RTN","LEXDD2",14,0)
 . F  S LEXAP=$O(^LEXT(757.2,"ADEF",LEXA,LEXAP)) Q:+LEXAP=0  D
"RTN","LEXDD2",15,0)
 . . N LEXOK S LEXOK=$$FLD
"RTN","LEXDD2",16,0)
 . . I LEXOK D
"RTN","LEXDD2",17,0)
 . . . D BLANK^LEXDD4,APP^LEXDD4,BLANK^LEXDD4
"RTN","LEXDD2",18,0)
 . . . S LEXDICS=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,1))
"RTN","LEXDD2",19,0)
 . . . S LEXDICS(0)=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,1.5))
"RTN","LEXDD2",20,0)
 . . . S LEXSHOW=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,2))
"RTN","LEXDD2",21,0)
 . . . S LEXSHOW(0)=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,2.5))
"RTN","LEXDD2",22,0)
 . . . S LEXSUB=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,3))
"RTN","LEXDD2",23,0)
 . . . S LEXSUB(0)=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,3.5))
"RTN","LEXDD2",24,0)
 . . . S LEXCTX=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,4))
"RTN","LEXDD2",25,0)
 . . . S LEXCTX(0)=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,4.5))
"RTN","LEXDD2",26,0)
 . . . D DEF^LEXDD4
"RTN","LEXDD2",27,0)
 D DSPLY^LEXDD3
"RTN","LEXDD2",28,0)
 Q
"RTN","LEXDD2",29,0)
FLD(X) ;    User Defaults
"RTN","LEXDD2",30,0)
 N LEX1,LEX2,LEX3,LEX4 S X=0
"RTN","LEXDD2",31,0)
 S LEX1=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,1))
"RTN","LEXDD2",32,0)
 S LEX2=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,2))
"RTN","LEXDD2",33,0)
 S LEX3=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,3))
"RTN","LEXDD2",34,0)
 S LEX4=$G(^LEXT(757.2,LEXAP,200,LEXDUZ,4))
"RTN","LEXDD2",35,0)
 S:($L(LEX1)+$L(LEX2)+$L(LEX3)+$L(LEX4))>0 X=1
"RTN","LEXDD2",36,0)
 Q X
"RTN","LEXDD3")
0^213^B947330
"RTN","LEXDD3",1,0)
LEXDD3 ; ISL Display Defaults - Display List      ; 09-23-96
"RTN","LEXDD3",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDD3",3,0)
 ;
"RTN","LEXDD3",4,0)
DSPLY ; Display Defaults contained in LEXD(
"RTN","LEXDD3",5,0)
 Q:'$D(LEXD(0))
"RTN","LEXDD3",6,0)
 Q:$G(LEXC)[U
"RTN","LEXDD3",7,0)
 N LEXI F LEXI=1:1:LEXD(0) D  Q:$G(LEXC)[U
"RTN","LEXDD3",8,0)
 . W !,LEXD(LEXI) D LF Q:$G(LEXC)[U
"RTN","LEXDD3",9,0)
 K LEXD,LEXI Q
"RTN","LEXDD3",10,0)
LF ; Line Feed
"RTN","LEXDD3",11,0)
 Q:LEXI=LEXD(0)  S LEXLC=LEXLC+1
"RTN","LEXDD3",12,0)
 I IOST["P-",LEXLC>(IOSL-7) D CONT,HDR
"RTN","LEXDD3",13,0)
 I IOST'["P-",LEXLC>(IOSL-4) D CONT
"RTN","LEXDD3",14,0)
 Q
"RTN","LEXDD3",15,0)
CONT ; Page/Form Feed
"RTN","LEXDD3",16,0)
 S LEXLC=0 I IOST["P-" W @IOF Q
"RTN","LEXDD3",17,0)
 W ! S DIR("?")="  Additional information is available"
"RTN","LEXDD3",18,0)
 S LEXC="" N X,Y S DIR(0)="E" D ^DIR
"RTN","LEXDD3",19,0)
 S:$D(DTOUT)!(X[U) LEXC=U
"RTN","LEXDD3",20,0)
 K DIR,DTOUT,DUOUT,DIRUT,DIROUT W ! Q
"RTN","LEXDD3",21,0)
HDR ; Page Title
"RTN","LEXDD3",22,0)
 W !,LEXITLE,!! S LEXLC=3 Q
"RTN","LEXDD4")
0^214^B14098487
"RTN","LEXDD4",1,0)
LEXDD4 ; ISL Display Defaults - List Elements     ; 09-23-96
"RTN","LEXDD4",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDD4",3,0)
 ;
"RTN","LEXDD4",4,0)
 ; Create the Display for a user
"RTN","LEXDD4",5,0)
NAME ;     Name
"RTN","LEXDD4",6,0)
 S:'$D(LEXD(0)) LEXD(0)=0
"RTN","LEXDD4",7,0)
 N LEXDATA,LEXSPC S LEXSPC="",LEXDATA=$P(^VA(200,LEXDUZ,0),U,1)
"RTN","LEXDD4",8,0)
 N LEXLN,LEXFN
"RTN","LEXDD4",9,0)
 S LEXDATA=$$FL(LEXDATA)
"RTN","LEXDD4",10,0)
 K LEXITL D STRING
"RTN","LEXDD4",11,0)
 Q
"RTN","LEXDD4",12,0)
SEV ;     Service
"RTN","LEXDD4",13,0)
 N LEXDATA S LEXDATA=$P($G(^VA(200,LEXDUZ,5)),U,1),LEXDATA=+LEXDATA
"RTN","LEXDD4",14,0)
 Q:'LEXDATA  Q:$P($G(^DIC(49,LEXDATA,0)),U,1)=""
"RTN","LEXDD4",15,0)
 S LEXDATA=$P($G(^DIC(49,LEXDATA,0)),U,1)
"RTN","LEXDD4",16,0)
 I $L(LEXDATA) S LEXITL="    Service:   " D STRING
"RTN","LEXDD4",17,0)
 Q
"RTN","LEXDD4",18,0)
LOC ;     Hospital Location
"RTN","LEXDD4",19,0)
 N LEXDATA S LEXDATA=$P($G(^VA(200,LEXDUZ,100.1)),U,7)
"RTN","LEXDD4",20,0)
 S LEXDATA=+LEXDATA Q:'LEXDATA  Q:$P($G(^SC(LEXDATA,0)),U,1)=""
"RTN","LEXDD4",21,0)
 S LEXDATA=$P($G(^SC(LEXDATA,0)),U,1)
"RTN","LEXDD4",22,0)
 I $L(LEXDATA) S LEXITL="    Location:  " D STRING
"RTN","LEXDD4",23,0)
 Q
"RTN","LEXDD4",24,0)
APP ;     Application Name
"RTN","LEXDD4",25,0)
 Q:+($G(LEXAP))<1  Q:'$D(^LEXT(757.2,+LEXAP,0))
"RTN","LEXDD4",26,0)
 N LEXDATA,LEXSPC S LEXDATA=$P(^LEXT(757.2,LEXAP,0),U,1)
"RTN","LEXDD4",27,0)
 S LEXDATA=LEXDATA_":",LEXSPC="    " K LEXITL D STRING
"RTN","LEXDD4",28,0)
 Q
"RTN","LEXDD4",29,0)
DEF ; Defaults for user
"RTN","LEXDD4",30,0)
 D:$L($G(LEXSUB)) DEFS($G(LEXSUB),$G(LEXSUB(0)),3),BLANK
"RTN","LEXDD4",31,0)
 D:$L($G(LEXSHOW)) DEFS($G(LEXSHOW),$G(LEXSHOW(0)),2),BLANK
"RTN","LEXDD4",32,0)
 D:$L($G(LEXDICS)) DEFS($G(LEXDICS),$G(LEXDICS(0)),1),BLANK
"RTN","LEXDD4",33,0)
 D:$L($G(LEXCTX)) DEFS($G(LEXCTX),$G(LEXCTX(0)),4)
"RTN","LEXDD4",34,0)
 Q
"RTN","LEXDD4",35,0)
 ;
"RTN","LEXDD4",36,0)
DEFS(LEXV,LEXN,LEXO) ; Create local array
"RTN","LEXDD4",37,0)
 Q:'$L($G(LEXV))  N LEXITL,LEXA,LEXSTLN,LEXSTR
"RTN","LEXDD4",38,0)
 S:$G(LEXN)[" (" LEXN=$P(LEXN," (",1)
"RTN","LEXDD4",39,0)
 K LEX S LEX(0)=0 S LEXSTLN=56
"RTN","LEXDD4",40,0)
 S:$G(LEXO)=1 LEX(1)="        Filter:      "_$G(LEXN),LEX(0)=1
"RTN","LEXDD4",41,0)
 S:$G(LEXO)=2 LEX(1)="        Display:     "_$G(LEXN),LEX(0)=1
"RTN","LEXDD4",42,0)
 S:$G(LEXO)=3 LEX(1)="        Vocabulary:  "_$G(LEXN),LEX(0)=1
"RTN","LEXDD4",43,0)
 S:$G(LEXO)=4 LEX(1)="        Shortcuts:   "_$G(LEXN),LEX(0)=1
"RTN","LEXDD4",44,0)
 S LEXITL="" D:$G(LEX(1))'="" ARRAY K LEX S LEXITL=""
"RTN","LEXDD4",45,0)
 ;
"RTN","LEXDD4",46,0)
 S LEXITL="                     "
"RTN","LEXDD4",47,0)
 D:$G(LEXO)=1 DICS^LEXDDT1 D:$G(LEXO)=2 SHOW^LEXDDT1
"RTN","LEXDD4",48,0)
 D:$G(LEXO)=3 SUB^LEXDDT1 D:$G(LEXO)=4 CON^LEXDDT1
"RTN","LEXDD4",49,0)
 D:$G(LEX(1))'="" ARRAY K LEX
"RTN","LEXDD4",50,0)
 ;W !!
"RTN","LEXDD4",51,0)
 ;ZW
"RTN","LEXDD4",52,0)
 ;W !!
"RTN","LEXDD4",53,0)
 Q
"RTN","LEXDD4",54,0)
 ;
"RTN","LEXDD4",55,0)
 D:$G(LEXO)=1 FV^LEXDDT1 D:$G(LEXO)=2 DV^LEXDDT1
"RTN","LEXDD4",56,0)
 D:$G(LEXO)=3 VV^LEXDDT1 D:$G(LEXO)=4 CV^LEXDDT1
"RTN","LEXDD4",57,0)
 S LEXITL="                     " D:$D(LEX(0)) ARRAY K LEX
"RTN","LEXDD4",58,0)
 Q
"RTN","LEXDD4",59,0)
BLANK ;     Store a blank line
"RTN","LEXDD4",60,0)
 N LEXDATA,LEXSPC S (LEXDATA,LEXSPC)="" K LEXITL D STRING
"RTN","LEXDD4",61,0)
 Q
"RTN","LEXDD4",62,0)
STRING ;     Store a string LEXDATA
"RTN","LEXDD4",63,0)
 S:'$D(LEXD(0)) LEXD(0)=0 N LEXCTR,LEXFIL
"RTN","LEXDD4",64,0)
 S LEXCTR=LEXD(0) S:'$D(LEXSPC) LEXSPC="                     "
"RTN","LEXDD4",65,0)
 S:$D(LEXITL)&($D(LEXDATA)) LEXFIL=LEXITL
"RTN","LEXDD4",66,0)
 S:'$D(LEXITL)&($D(LEXDATA)) LEXFIL=LEXSPC
"RTN","LEXDD4",67,0)
 I $L($G(LEXFIL)) D
"RTN","LEXDD4",68,0)
 . S LEXCTR=LEXCTR+1,LEXD(LEXCTR)=LEXFIL_LEXDATA,LEXD(0)=LEXCTR
"RTN","LEXDD4",69,0)
 I '$L($G(LEXFIL)) D
"RTN","LEXDD4",70,0)
 . S LEXCTR=LEXCTR+1,LEXD(LEXCTR)=LEXDATA,LEXD(0)=LEXCTR
"RTN","LEXDD4",71,0)
 K LEXSPC,LEXDATA,LEXITL
"RTN","LEXDD4",72,0)
 Q
"RTN","LEXDD4",73,0)
ARRAY ;     Store local array LEX
"RTN","LEXDD4",74,0)
 S:'$D(LEXD(0)) LEXD(0)=0
"RTN","LEXDD4",75,0)
 N LEXI,LEXCTR,LEXSPC S LEXCTR=LEXD(0),LEXSPC="                     "
"RTN","LEXDD4",76,0)
 F LEXI=1:1:LEX(0) D
"RTN","LEXDD4",77,0)
 . S LEXCTR=LEXCTR+1
"RTN","LEXDD4",78,0)
 . I LEXI=1 S LEXD(LEXCTR)=LEXITL_LEX(LEXI) Q
"RTN","LEXDD4",79,0)
 . S LEXD(LEXCTR)=LEXSPC_LEX(LEXI)
"RTN","LEXDD4",80,0)
 S LEXD(0)=LEXCTR
"RTN","LEXDD4",81,0)
 Q
"RTN","LEXDD4",82,0)
FL(X) ; First and Last Name, Mixed Case
"RTN","LEXDD4",83,0)
 I X["," D  Q X
"RTN","LEXDD4",84,0)
 . N LEXLN,LEXFN
"RTN","LEXDD4",85,0)
 . S LEXLN=$P(X,",",1)
"RTN","LEXDD4",86,0)
 . S LEXLN=$$UP^XLFSTR($E(LEXLN,1))_$$LOW^XLFSTR($E(LEXLN,2,$L(LEXLN)))
"RTN","LEXDD4",87,0)
 . S LEXFN=$P($P(X,",",2)," ",1)
"RTN","LEXDD4",88,0)
 . S LEXFN=$$UP^XLFSTR($E(LEXFN,1))_$$LOW^XLFSTR($E(LEXFN,2,$L(LEXFN)))
"RTN","LEXDD4",89,0)
 . S X=LEXFN_" "_LEXLN
"RTN","LEXDD4",90,0)
 I X'[",",X[" " D  Q X
"RTN","LEXDD4",91,0)
 . N LEXLN,LEXFN
"RTN","LEXDD4",92,0)
 . S LEXLN=$P($P(X," ",2)," ",1)
"RTN","LEXDD4",93,0)
 . S LEXLN=$$UP^XLFSTR($E(LEXLN,1))_$$LOW^XLFSTR($E(LEXLN,2,$L(LEXLN)))
"RTN","LEXDD4",94,0)
 . S LEXFN=$P(X," ",1)
"RTN","LEXDD4",95,0)
 . S LEXFN=$$UP^XLFSTR($E(LEXFN,1))_$$LOW^XLFSTR($E(LEXFN,2,$L(LEXFN)))
"RTN","LEXDD4",96,0)
 . S X=LEXFN_" "_LEXLN
"RTN","LEXDD4",97,0)
 I X'[",",X'[" " D  Q X
"RTN","LEXDD4",98,0)
 . S X=$$UP^XLFSTR($E(X,1))_$$LOW^XLFSTR($E(X,2,$L(X)))
"RTN","LEXDD4",99,0)
 Q X
"RTN","LEXDDS")
0^215^B2093495
"RTN","LEXDDS",1,0)
LEXDDS ; ISL Display Defaults - Single User       ; 09-23-96
"RTN","LEXDDS",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDS",3,0)
 ;
"RTN","LEXDDS",4,0)
 ; Entry:  D EN^LEXDDS              LEXAP is unknown
"RTN","LEXDDS",5,0)
 ;
"RTN","LEXDDS",6,0)
 ; Entry:  D EN1^LEXDDS(LEXAP)     LEXAP is known
"RTN","LEXDDS",7,0)
 ;
"RTN","LEXDDS",8,0)
 ; Print/Display User Defaults - Single User
"RTN","LEXDDS",9,0)
 ;
"RTN","LEXDDS",10,0)
 ; Where 
"RTN","LEXDDS",11,0)
 ;
"RTN","LEXDDS",12,0)
 ;      LEXAP     Pointer to file 757.2
"RTN","LEXDDS",13,0)
 ;
"RTN","LEXDDS",14,0)
 ;
"RTN","LEXDDS",15,0)
EN ; Display Single User Defaults, LEXAP is unknown
"RTN","LEXDDS",16,0)
 N LEXAP,X,Y S LEXAP=$$DFI^LEXDM4 Q:+LEXAP=0  W ! D EN1(LEXAP) Q
"RTN","LEXDDS",17,0)
EN1(LEXAP) ; Display Single User Defaults, LEXAP is unknown
"RTN","LEXDDS",18,0)
 W ! D DEV,HOME^%ZIS
"RTN","LEXDDS",19,0)
 K ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE Q
"RTN","LEXDDS",20,0)
DEV ; Select a device
"RTN","LEXDDS",21,0)
 N %,%ZIS,IOP,ZTRTN,ZTSAVE,ZTDESC,ZTDTH,ZTIO,ZTSK
"RTN","LEXDDS",22,0)
 S ZTRTN="DISP^LEXDDSP",(ZTSAVE("LEXAP"),ZTSAVE("DUZ"))=""
"RTN","LEXDDS",23,0)
 S ZTDESC="LEXICON DEFAULTS FOR "_$P(^VA(200,DUZ,0),"^",1)
"RTN","LEXDDS",24,0)
 S ZTIO=ION,ZTDTH=$H,%ZIS="PQ" D ^%ZIS Q:POP  S ZTIO=ION
"RTN","LEXDDS",25,0)
 I $D(IO("Q")) D QUE,^%ZISC Q
"RTN","LEXDDS",26,0)
 D NOQUE Q
"RTN","LEXDDS",27,0)
NOQUE ; Do not que task
"RTN","LEXDDS",28,0)
 W @IOF W:IOST["P-"&('$D(IO("S"))) !,"< Not queued, printing user defaults >",!
"RTN","LEXDDS",29,0)
 H 2 U:IOST["P-" IO D @ZTRTN,^%ZISC Q
"RTN","LEXDDS",30,0)
QUE ; Task queued to print user defaults
"RTN","LEXDDS",31,0)
 K IO("Q") D ^%ZTLOAD
"RTN","LEXDDS",32,0)
 W !,$S($D(ZTSK):"Request Queued",1:"Request Cancelled"),! H 2 Q
"RTN","LEXDDSD")
0^216^B8702123
"RTN","LEXDDSD",1,0)
LEXDDSD ; ISL Display Defaults - Single User Disp  ; 09-23-96
"RTN","LEXDDSD",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDSD",3,0)
 ;
"RTN","LEXDDSD",4,0)
LEXSHOW ; Translate LEXSHOW
"RTN","LEXDDSD",5,0)
 D:$G(^LEXT(757.2,LEXAP,200,DUZ,2))'=""
"RTN","LEXDDSD",6,0)
 . D DIS^LEXDDSS($G(^LEXT(757.2,LEXAP,200,DUZ,2.5)))
"RTN","LEXDDSD",7,0)
 . D CODES(^LEXT(757.2,LEXAP,200,DUZ,2))
"RTN","LEXDDSD",8,0)
 D:$G(^LEXT(757.2,LEXAP,200,DUZ,2))=""
"RTN","LEXDDSD",9,0)
 . D DIS^LEXDDSS("No default display defined")
"RTN","LEXDDSD",10,0)
 Q
"RTN","LEXDDSD",11,0)
DICS ; Save filter in array LEX(
"RTN","LEXDDSD",12,0)
 N LEXID,LEXIC,LEXEC,LEXCLA
"RTN","LEXDDSD",13,0)
 N LEXCTR,LEXXI,LEXXE,LEXCT
"RTN","LEXDDSD",14,0)
 D LB^LEXDDSS("      Include:                           Exclude:")
"RTN","LEXDDSD",15,0)
 S LEXID="",(LEXIC,LEXEC)=0
"RTN","LEXDDSD",16,0)
 I $D(^TMP("LEXDIC",$J,"INC","CLASS")) D
"RTN","LEXDDSD",17,0)
 . F  S LEXID=$O(^TMP("LEXDIC",$J,"INC","CLASS",LEXID)) Q:LEXID=""  D
"RTN","LEXDDSD",18,0)
 . . Q:'$D(^LEX(757.11,"B",LEXID))
"RTN","LEXDDSD",19,0)
 . . S LEXCLA=$O(^LEX(757.11,"B",LEXID,0)),LEXIC=LEXIC+1
"RTN","LEXDDSD",20,0)
 . . S ^TMP("LEXDIC",$J,"INCLUDE",LEXIC,$P(^LEX(757.11,LEXCLA,0),U,2))=""
"RTN","LEXDDSD",21,0)
 I $D(^TMP("LEXDIC",$J,"INC","TYPE")) D
"RTN","LEXDDSD",22,0)
 . S LEXID=0
"RTN","LEXDDSD",23,0)
 . F  S LEXID=$O(^TMP("LEXDIC",$J,"INC","TYPE",LEXID)) Q:+LEXID=0  D
"RTN","LEXDDSD",24,0)
 . . S LEXIC=LEXIC+1
"RTN","LEXDDSD",25,0)
 . . S ^TMP("LEXDIC",$J,"INCLUDE",LEXIC,$P(^LEX(757.12,LEXID,0),U,2))=""
"RTN","LEXDDSD",26,0)
 I $D(^TMP("LEXDIC",$J,"EXC","CLASS")) D
"RTN","LEXDDSD",27,0)
 . F  S LEXID=$O(^TMP("LEXDIC",$J,"EXC","CLASS",LEXID)) Q:LEXID=""  D
"RTN","LEXDDSD",28,0)
 . . Q:'$D(^LEX(757.11,"B",LEXID))
"RTN","LEXDDSD",29,0)
 . . S LEXCLA=$O(^LEX(757.11,"B",LEXID,0)),LEXEC=LEXEC+1
"RTN","LEXDDSD",30,0)
 . . S ^TMP("LEXDIC",$J,"EXCLUDE",LEXEC,$P(^LEX(757.11,LEXCLA,0),U,2))=""
"RTN","LEXDDSD",31,0)
 I $D(^TMP("LEXDIC",$J,"EXC","TYPE")) D
"RTN","LEXDDSD",32,0)
 . S LEXID=0
"RTN","LEXDDSD",33,0)
 . F  S LEXID=$O(^TMP("LEXDIC",$J,"EXC","TYPE",LEXID)) Q:+LEXID=0  D
"RTN","LEXDDSD",34,0)
 . . S LEXEC=LEXEC+1
"RTN","LEXDDSD",35,0)
 . . S ^TMP("LEXDIC",$J,"EXCLUDE",LEXEC,$P(^LEX(757.12,LEXID,0),U,2))=""
"RTN","LEXDDSD",36,0)
 S LEXCTR=$S(LEXIC>LEXEC:LEXIC,1:LEXEC)
"RTN","LEXDDSD",37,0)
 N LEXXI,LEXXE F LEXCT=1:1:LEXCTR D
"RTN","LEXDDSD",38,0)
 . S (LEXXI,LEXXE)=""
"RTN","LEXDDSD",39,0)
 . S:$D(^TMP("LEXDIC",$J,"INCLUDE",LEXCT)) LEXXI=$E($O(^TMP("LEXDIC",$J,"INCLUDE",LEXCT,"")),1,35)
"RTN","LEXDDSD",40,0)
 . S:$D(^TMP("LEXDIC",$J,"EXCLUDE",LEXCT)) LEXXE=$E($O(^TMP("LEXDIC",$J,"EXCLUDE",LEXCT,"")),1,35)
"RTN","LEXDDSD",41,0)
 . D FIE^LEXDDSS(LEXXI,LEXXE)
"RTN","LEXDDSD",42,0)
 K ^TMP("LEXDIC",$J) Q
"RTN","LEXDDSD",43,0)
 Q
"RTN","LEXDDSD",44,0)
CODES(LEXSTR) ; Save contents of LEXSHOW in local array LEX(
"RTN","LEXDDSD",45,0)
 N LEXCT F LEXCT=1:1:$L(LEXSTR,"/") D DISE^LEXDDSS(($P(LEXSTR,"/",LEXCT)))
"RTN","LEXDDSD",46,0)
 D:$L(LEXSTR,"/")>0 BL^LEXDDSS Q
"RTN","LEXDDSD",47,0)
DP ; Display single user defaults in array LEX( continuous
"RTN","LEXDDSD",48,0)
 N LEXC Q:+($G(LEX(0)))=0  F LEXC=1:1:LEX(0) W !,LEX(LEXC)
"RTN","LEXDDSD",49,0)
 K LEX
"RTN","LEXDDSD",50,0)
 Q
"RTN","LEXDDSD",51,0)
DSPLY ; Display Defaults contained in LEX(
"RTN","LEXDDSD",52,0)
 Q:'$D(LEX(0))  N LEXC,LEXLC,LEXI S LEXC="",LEXLC=0
"RTN","LEXDDSD",53,0)
 F LEXI=1:1:LEX(0) D  Q:$G(LEXC)[U
"RTN","LEXDDSD",54,0)
 . W !,LEX(LEXI) D LF Q:$G(LEXC)[U
"RTN","LEXDDSD",55,0)
 D:LEXC'[U&(IOST["C-") CONT W:IOST["P-" @IOF
"RTN","LEXDDSD",56,0)
 K LEX Q
"RTN","LEXDDSD",57,0)
LF ; Line Feed
"RTN","LEXDDSD",58,0)
 Q:LEXI=LEX(0)  S LEXLC=LEXLC+1
"RTN","LEXDDSD",59,0)
 I IOST["P-",LEXLC>(IOSL-7) D CONT
"RTN","LEXDDSD",60,0)
 I IOST'["P-",LEXLC>(IOSL-4) D CONT
"RTN","LEXDDSD",61,0)
 Q
"RTN","LEXDDSD",62,0)
CONT ; Page/Form Feed
"RTN","LEXDDSD",63,0)
 S LEXLC=0 I IOST["P-" W @IOF Q
"RTN","LEXDDSD",64,0)
 W ! S DIR("?")="  Additional information is available"
"RTN","LEXDDSD",65,0)
 S LEXC="" N X,Y S DIR(0)="E" D ^DIR
"RTN","LEXDDSD",66,0)
 S:$D(DTOUT)!(X[U) LEXC=U
"RTN","LEXDDSD",67,0)
 K DIR,DTOUT,DUOUT,DIRUT,DIROUT W ! Q
"RTN","LEXDDSP")
0^217^B14491280
"RTN","LEXDDSP",1,0)
LEXDDSP ; ISL Display Defaults - Single User Parse ; 09-23-96
"RTN","LEXDDSP",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDSP",3,0)
 ;
"RTN","LEXDDSP",4,0)
 ;
"RTN","LEXDDSP",5,0)
DISP ; Display single user defaults
"RTN","LEXDDSP",6,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXDDSP",7,0)
 G:+($G(LEXAP))=0 EXIT S LEXAP=+LEXAP G:'$L($G(^LEXT(757.2,LEXAP,0))) EXIT
"RTN","LEXDDSP",8,0)
 G:$P($G(^LEXT(757.2,LEXAP,5)),U,3)'=1 EXIT K LEX
"RTN","LEXDDSP",9,0)
 D NAME,VOC,DIS,FIL,CTX,DSPLY^LEXDDSD
"RTN","LEXDDSP",10,0)
EXIT ; Cleanup/quit
"RTN","LEXDDSP",11,0)
 K LEX,LEXV,LEXN,DIR,DIROUT,DIRUT,DTOUT,DUOUT,LEX,^TMP("LEXDIC",$J) Q
"RTN","LEXDDSP",12,0)
 ;
"RTN","LEXDDSP",13,0)
NAME ; Name
"RTN","LEXDDSP",14,0)
 N LEXV,LEXN S LEXV=$P(^VA(200,DUZ,0),"^",1),LEXN=""
"RTN","LEXDDSP",15,0)
 I LEXV["," S LEXN=$P(LEXV,",",2),LEXV=$P(LEXV,",",1)
"RTN","LEXDDSP",16,0)
 S:LEXN'="" LEXN=$$MIXED(LEXN) S:LEXV'="" LEXV=$$MIXED(LEXV)
"RTN","LEXDDSP",17,0)
 D NAME^LEXDDSS((LEXN_" "_LEXV)) Q
"RTN","LEXDDSP",18,0)
 ;
"RTN","LEXDDSP",19,0)
VOC ; Vocabulary
"RTN","LEXDDSP",20,0)
 N LEXV,LEXN S LEXV=$G(^LEXT(757.2,LEXAP,200,DUZ,3)) S:LEXV="" LEXV="WRD"
"RTN","LEXDDSP",21,0)
 S:$D(^LEXT(757.2,"AA",LEXV)) LEXN=$P(^LEXT(757.2,+($O(^LEXT(757.2,"AA",LEXV,0))),0),"^",1)
"RTN","LEXDDSP",22,0)
 D VOC^LEXDDSS(LEXN)
"RTN","LEXDDSP",23,0)
 Q
"RTN","LEXDDSP",24,0)
 ;
"RTN","LEXDDSP",25,0)
DIS ; Display Format
"RTN","LEXDDSP",26,0)
 D LEXSHOW^LEXDDSD Q
"RTN","LEXDDSP",27,0)
 ;
"RTN","LEXDDSP",28,0)
FIL ;     Filter
"RTN","LEXDDSP",29,0)
 N LEXV D DICS($G(^LEXT(757.2,LEXAP,200,DUZ,1)))
"RTN","LEXDDSP",30,0)
 K ^TMP("LEXDIC",$J) W:IOST["C-" @IOF S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXDDSP",31,0)
 Q
"RTN","LEXDDSP",32,0)
 ;
"RTN","LEXDDSP",33,0)
DICS(LEXV) ; Translate filter
"RTN","LEXDDSP",34,0)
 Q:'$D(LEXV)  N LEXS,LEXSHOW,LEXIN,LEXEX
"RTN","LEXDDSP",35,0)
 I $G(LEXV)="" D FIL^LEXDDSS("No search filter defined") Q
"RTN","LEXDDSP",36,0)
 S LEXS=LEXV D PARSE S:LEXV["SO^" LEXSHOW=LEXS
"RTN","LEXDDSP",37,0)
 D FIL^LEXDDSS($G(^LEXT(757.2,LEXAP,200,DUZ,1.5)))
"RTN","LEXDDSP",38,0)
 I $G(LEXS)=""!(LEXV="I 1") D
"RTN","LEXDDSP",39,0)
 . N LEXDA S LEXDA=0
"RTN","LEXDDSP",40,0)
 . F  S LEXDA=$O(^LEX(757.11,LEXDA)) Q:+LEXDA=0  D
"RTN","LEXDDSP",41,0)
 . . S LEXS=LEXS_"/"_$P(^LEX(757.11,LEXDA,0),U,1)
"RTN","LEXDDSP",42,0)
 . S:$E(LEXS,1)="/" LEXS=$E(LEXS,2,$L(LEXS)) S LEXS=LEXS_";"
"RTN","LEXDDSP",43,0)
 I LEXV["SC^"!(LEXV="I 1") D
"RTN","LEXDDSP",44,0)
 . S:$L(LEXS,";")=3 LEXSHOW=$P(LEXS,";",3)
"RTN","LEXDDSP",45,0)
 . D LB^LEXDDSS("    Look-up filter will: ")
"RTN","LEXDDSP",46,0)
 . D INCEXC,DICS^LEXDDSD
"RTN","LEXDDSP",47,0)
 I $G(LEXSHOW)'="" D
"RTN","LEXDDSP",48,0)
 . I LEXV["SC^" D BLB^LEXDDSS("    Look-up filter will also include terms linked to:")
"RTN","LEXDDSP",49,0)
 . I LEXV["SO^" D LB^LEXDDSS("    Look-up filter will include terms linked to: ")
"RTN","LEXDDSP",50,0)
 . D CODES^LEXDDSD(LEXSHOW)
"RTN","LEXDDSP",51,0)
 K ^TMP("LEXDIC",$J) Q
"RTN","LEXDDSP",52,0)
PARSE ; Parse DIS("S") string into INCLUDE;EXCLUDE;LEXSHOW
"RTN","LEXDDSP",53,0)
 S (LEXIN,LEXEX)="" S:LEXS["," LEXS=$P(LEXS,",",2)
"RTN","LEXDDSP",54,0)
 S LEXS=$TR(LEXS,"()",""),LEXS=$TR(LEXS,"""","") Q
"RTN","LEXDDSP",55,0)
INCEXC ; Include/Exclude Components
"RTN","LEXDDSP",56,0)
 S LEXIN=$P(LEXS,";",1),LEXEX=$P(LEXS,";",2) K ^TMP("LEXDIC",$J)
"RTN","LEXDDSP",57,0)
 I $D(LEXIN),LEXIN'="",LEXIN["/" D
"RTN","LEXDDSP",58,0)
 . N LEXI F LEXI=1:1:$L(LEXIN,"/") D
"RTN","LEXDDSP",59,0)
 . . I +($P(LEXIN,"/",LEXI))=0 D
"RTN","LEXDDSP",60,0)
 . . . S ^TMP("LEXDIC",$J,"INC","CLASS",$P(LEXIN,"/",LEXI))=""
"RTN","LEXDDSP",61,0)
 . . I +($P(LEXIN,"/",LEXI))'=0 D
"RTN","LEXDDSP",62,0)
 . . . S ^TMP("LEXDIC",$J,"INC","TYPE",$P(LEXIN,"/",LEXI))=""
"RTN","LEXDDSP",63,0)
 I $D(LEXIN),LEXIN'="",LEXIN'["/" D
"RTN","LEXDDSP",64,0)
 . I +LEXIN=0 S ^TMP("LEXDIC",$J,"INC","CLASS",LEXIN)="" Q
"RTN","LEXDDSP",65,0)
 . S ^TMP("LEXDIC",$J,"INC","TYPE",LEXIN)=""
"RTN","LEXDDSP",66,0)
 I $D(LEXEX),LEXEX'="",LEXEX["/" D
"RTN","LEXDDSP",67,0)
 . N LEXI F LEXI=1:1:$L(LEXEX,"/") D
"RTN","LEXDDSP",68,0)
 . . I +($P(LEXEX,"/",LEXI))=0 D
"RTN","LEXDDSP",69,0)
 . . . S ^TMP("LEXDIC",$J,"EXC","CLASS",$P(LEXEX,"/",LEXI))=""
"RTN","LEXDDSP",70,0)
 . . I +($P(LEXEX,"/",LEXI))'=0 D
"RTN","LEXDDSP",71,0)
 . . . S ^TMP("LEXDIC",$J,"EXC","TYPE",$P(LEXEX,"/",LEXI))=""
"RTN","LEXDDSP",72,0)
 I $D(LEXEX),LEXEX'="",LEXEX'["/" D
"RTN","LEXDDSP",73,0)
 . I +LEXEX=0 S ^TMP("LEXDIC",$J,"EXC","CLASS",LEXEX)="" Q
"RTN","LEXDDSP",74,0)
 . S ^TMP("LEXDIC",$J,"EXC","TYPE",LEXEX)=""
"RTN","LEXDDSP",75,0)
 S LEXN="" F  S LEXN=$O(^LEX(757.11,"B",LEXN)) Q:LEXN=""  D
"RTN","LEXDDSP",76,0)
 . Q:LEXIN[LEXN  N LEXTT,LEXTI S LEXTI=1,LEXT=0
"RTN","LEXDDSP",77,0)
 . F  S LEXT=$O(^LEX(757.12,"C",LEXN,LEXT)) Q:+LEXT=0!(+LEXTI=0)  D
"RTN","LEXDDSP",78,0)
 . . I LEXIN[LEXT S LEXTI=0
"RTN","LEXDDSP",79,0)
 . I LEXTI S ^TMP("LEXDIC",$J,"EXC","CLASS",LEXN)=""
"RTN","LEXDDSP",80,0)
 Q
"RTN","LEXDDSP",81,0)
 ;
"RTN","LEXDDSP",82,0)
CTX ; Shortcut Context
"RTN","LEXDDSP",83,0)
 N LEXV S LEXV=$G(^LEXT(757.2,LEXAP,200,DUZ,4.5)) I LEXV="" D
"RTN","LEXDDSP",84,0)
 . N LEXN S LEXN=+($G(^LEXT(757.2,LEXAP,200,DUZ,4.5)))
"RTN","LEXDDSP",85,0)
 . Q:+LEXN'>0  Q:'$D(^LEX(757.41,+LEXN))
"RTN","LEXDDSP",86,0)
 . S LEXV=$P(^LEX(757.41,+LEXN,0),U,1)
"RTN","LEXDDSP",87,0)
 D CON^LEXDDSS(LEXV)
"RTN","LEXDDSP",88,0)
 Q
"RTN","LEXDDSP",89,0)
MIXED(LEXV) ; Convert UPPERCASE to Mixed case
"RTN","LEXDDSP",90,0)
 S LEXV=$E(LEXV,1)_$$LOW^XLFSTR($E(LEXV,2,$L(LEXV)))
"RTN","LEXDDSP",91,0)
 Q LEXV
"RTN","LEXDDSS")
0^218^B2858762
"RTN","LEXDDSS",1,0)
LEXDDSS ; ISL Display Defaults - Single User Save  ; 09-23-96
"RTN","LEXDDSS",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDSS",3,0)
 ;
"RTN","LEXDDSS",4,0)
 ; Saves default elements into the local array LEX
"RTN","LEXDDSS",5,0)
 ;
"RTN","LEXDDSS",6,0)
BLB(LEXX) ; General blank - line - blank
"RTN","LEXDDSS",7,0)
 N LEXS S LEXS=LEXX D BL,TL,BL Q
"RTN","LEXDDSS",8,0)
LB(LEXX) ; General line - blank
"RTN","LEXDDSS",9,0)
 N LEXS S LEXS=LEXX D TL,BL Q
"RTN","LEXDDSS",10,0)
NAME(LEXX) ; Name
"RTN","LEXDDSS",11,0)
 N LEXS S LEXS="User defaults for:  "_LEXX D BL,TL,BL Q
"RTN","LEXDDSS",12,0)
VOC(LEXX) ; Vocabulary name
"RTN","LEXDDSS",13,0)
 N LEXS S LEXS="1.  Vocabulary:  "_LEXX D TL,BL Q
"RTN","LEXDDSS",14,0)
DIS(LEXX) ; Display name
"RTN","LEXDDSS",15,0)
 N LEXS S LEXS="2.  Display:  "_LEXX D TL,BL Q
"RTN","LEXDDSS",16,0)
DISE(LEXX) ; Display element
"RTN","LEXDDSS",17,0)
 N LEXS,LEXCTL,LEXN S LEXCTL=LEXX
"RTN","LEXDDSS",18,0)
 F  S LEXCTL=$O(^LEX(757.03,"B",LEXCTL)) Q:LEXCTL=""!(LEXCTL'[LEXX)  D
"RTN","LEXDDSS",19,0)
 . S LEXN=$O(^LEX(757.03,"B",LEXCTL,0))
"RTN","LEXDDSS",20,0)
 . S LEXN=$E($P($G(^LEX(757.03,LEXN,0)),"^",3),1,63)
"RTN","LEXDDSS",21,0)
 . S LEXS="      "_LEXX_"  "_LEXN D TL
"RTN","LEXDDSS",22,0)
 Q
"RTN","LEXDDSS",23,0)
FIL(LEXX) ; Filter name
"RTN","LEXDDSS",24,0)
 N LEXS S LEXS="3.  Filter:  "_LEXX D TL,BL Q
"RTN","LEXDDSS",25,0)
FIE(LEXI,LEXE) ; Filter element (include/exclude)
"RTN","LEXDDSS",26,0)
 N LEXS,LEXSPC S LEXSPC="                                        "
"RTN","LEXDDSS",27,0)
 S LEXS="      "_$G(LEXI)
"RTN","LEXDDSS",28,0)
 I $L($G(LEXE)) S LEXS=LEXS_$E(LEXSPC,$L(LEXS),$L(LEXSPC))_LEXXE
"RTN","LEXDDSS",29,0)
 D TL Q
"RTN","LEXDDSS",30,0)
CON(LEXX) ; Shortcut Context name
"RTN","LEXDDSS",31,0)
 N LEXS S LEXS="4.  Shortcuts:  "_LEXX D TL,BL Q
"RTN","LEXDDSS",32,0)
TL Q:'$D(LEXS)  N LEXLN S LEXLN=+($G(LEX(0))),LEXLN=LEXLN+1,LEX(LEXLN)=LEXS,LEX(0)=LEXLN Q
"RTN","LEXDDSS",33,0)
BL N LEXLN S LEXLN=+($G(LEX(0))),LEXLN=LEXLN+1,LEX(LEXLN)="",LEX(0)=LEXLN Q
"RTN","LEXDDT1")
0^219^B5416359
"RTN","LEXDDT1",1,0)
LEXDDT1 ; ISL Display Defaults - Translate String  ; 09-23-96
"RTN","LEXDDT1",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDT1",3,0)
 ;
"RTN","LEXDDT1",4,0)
EN ; String Type
"RTN","LEXDDT1",5,0)
 K LEX,LEXTSTR I '$D(LEXSTLN) S LEXSTLN=56
"RTN","LEXDDT1",6,0)
 I $L($G(LEXDICS)),'$L($G(LEXSHOW)),'$L($G(LEXSUB)) D DICS G EXIT
"RTN","LEXDDT1",7,0)
 I '$L($G(LEXDICS)),'$L($G(LEXSUB)),$L($G(LEXSHOW)) D SHOW G EXIT
"RTN","LEXDDT1",8,0)
 I $L($G(LEXSUB)),'$L($G(LEXSHOW)) D SUB
"RTN","LEXDDT1",9,0)
 G EXIT
"RTN","LEXDDT1",10,0)
 Q
"RTN","LEXDDT1",11,0)
DICS ;        Filter String              LEXDICS
"RTN","LEXDDT1",12,0)
 N LEXTRTN S LEXTRTN=""
"RTN","LEXDDT1",13,0)
 I LEXDICS="I 1" S LEX(0)=1,LEX=LEXDICS,LEX(1)="Unfiltered" Q
"RTN","LEXDDT1",14,0)
 S:LEXDICS["$$SC^" LEXTRTN="SC^LEXDDTF"
"RTN","LEXDDT1",15,0)
 S:LEXDICS["$$SO^" LEXTRTN="SO^LEXDDTF"
"RTN","LEXDDT1",16,0)
 Q:$G(LEXTRTN)=""
"RTN","LEXDDT1",17,0)
 D @LEXTRTN
"RTN","LEXDDT1",18,0)
 Q
"RTN","LEXDDT1",19,0)
SUB ;        Sub-Set String             LEXSUB
"RTN","LEXDDT1",20,0)
 K LEX S LEX=LEXSUB D ^LEXDDTV
"RTN","LEXDDT1",21,0)
 Q
"RTN","LEXDDT1",22,0)
SHOW ;        Display Codes String       LEXSHOW
"RTN","LEXDDT1",23,0)
 K LEX S LEX=LEXSHOW D ^LEXDDTD
"RTN","LEXDDT1",24,0)
 Q
"RTN","LEXDDT1",25,0)
CON ;        Shortcut Context            LEXCTX
"RTN","LEXDDT1",26,0)
 K LEX S LEX=LEXCTX D ^LEXDDTC
"RTN","LEXDDT1",27,0)
 Q
"RTN","LEXDDT1",28,0)
 ; Values
"RTN","LEXDDT1",29,0)
VV ;        Vocabulary Value
"RTN","LEXDDT1",30,0)
 Q:'$L($G(LEXSUB))  K LEX S:'$D(LEXSTLN) LEXSTLN=56
"RTN","LEXDDT1",31,0)
 S LEX(0)=1,LEX(1)="Value:  "_LEXSUB
"RTN","LEXDDT1",32,0)
 Q
"RTN","LEXDDT1",33,0)
FV ;        Filter Value
"RTN","LEXDDT1",34,0)
 Q:'$L($G(LEXDICS))  K LEX  S:'$D(LEXSTLN) LEXSTLN=56
"RTN","LEXDDT1",35,0)
 N LEXTSTR,LEXTCTR S LEXTCTR=0,LEXTSTR="Value:  "_LEXDICS
"RTN","LEXDDT1",36,0)
 F  Q:$L(LEXTSTR)'>LEXSTLN  D CONV
"RTN","LEXDDT1",37,0)
 I $L(LEXTSTR) S LEXTCTR=LEXTCTR+1 S LEX(LEXTCTR)=LEXTSTR,LEX(0)=LEXTCTR
"RTN","LEXDDT1",38,0)
 Q
"RTN","LEXDDT1",39,0)
DV ;        Display Value
"RTN","LEXDDT1",40,0)
 Q:'$L($G(LEXSHOW))  K LEX  S:'$D(LEXSTLN) LEXSTLN=56
"RTN","LEXDDT1",41,0)
 N LEXTSTR,LEXTCTR S LEXTCTR=0,LEXTSTR="Value:  "_LEXSHOW
"RTN","LEXDDT1",42,0)
 F  Q:$L(LEXTSTR)'>LEXSTLN  D CONV
"RTN","LEXDDT1",43,0)
 I $L(LEXTSTR) S LEXTCTR=LEXTCTR+1 S LEX(LEXTCTR)=LEXTSTR,LEX(0)=LEXTCTR
"RTN","LEXDDT1",44,0)
 Q
"RTN","LEXDDT1",45,0)
CV ;        Vocabulary Value
"RTN","LEXDDT1",46,0)
 Q:'$L($G(LEXCTX))  K LEX S:'$D(LEXSTLN) LEXSTLN=56
"RTN","LEXDDT1",47,0)
 S LEX(0)=1,LEX(1)="Value:  "_LEXCTX
"RTN","LEXDDT1",48,0)
 Q
"RTN","LEXDDT1",49,0)
CONV ;        Concatenate VALUE
"RTN","LEXDDT1",50,0)
 N LEXTPSN S LEXTPSN=LEXSTLN
"RTN","LEXDDT1",51,0)
 F LEXTPSN=LEXSTLN:-1:1 Q:$E(LEXTSTR,LEXTPSN)="/"!($E(LEXTSTR,LEXTPSN)=";")
"RTN","LEXDDT1",52,0)
 I $E(LEXTSTR,LEXTPSN)="/" D
"RTN","LEXDDT1",53,0)
 . S LEXTCTR=LEXTCTR+1 S LEX(LEXTCTR)=$E(LEXTSTR,1,LEXTPSN),LEX(0)=LEXTCTR
"RTN","LEXDDT1",54,0)
 . S LEXTSTR=$E(LEXTSTR,(LEXTPSN+1),$L(LEXTSTR))
"RTN","LEXDDT1",55,0)
 Q
"RTN","LEXDDT1",56,0)
EXIT ; Kill all but the array LEX and the Default Variable
"RTN","LEXDDT1",57,0)
 K LEXSTLN
"RTN","LEXDDT1",58,0)
 Q
"RTN","LEXDDT2")
0^220^B4317509
"RTN","LEXDDT2",1,0)
LEXDDT2 ; ISL Display Defaults - Concatenate Text  ; 09-23-96
"RTN","LEXDDT2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDT2",3,0)
 ;
"RTN","LEXDDT2",4,0)
CONCAT ; Concatenation of Data Elements
"RTN","LEXDDT2",5,0)
 N LEXTI,LEXTL,LEXTP
"RTN","LEXDDT2",6,0)
PHRASE ; Get Phrase and Parse into Words
"RTN","LEXDDT2",7,0)
 I $D(LEX(LEXT,"H")) S LEXTP=LEX(LEXT,"H"),LEXTI=0 D WORD
"RTN","LEXDDT2",8,0)
 F LEXTI=1:1:LEX(LEXT,0) D
"RTN","LEXDDT2",9,0)
 . S LEXTP=LEX(LEXT,LEXTI)
"RTN","LEXDDT2",10,0)
 . S:LEXTP["/" LEXTP=$P(LEXTP,"/",1)_" or "_$P(LEXTP,"/",2),LEXTP=$$TRIM(LEXTP)
"RTN","LEXDDT2",11,0)
 . I LEXTI=LEX(LEXT,0),LEX(LEXT,0)>1 D
"RTN","LEXDDT2",12,0)
 . . S LEXTP="and "_LEXTP_"."
"RTN","LEXDDT2",13,0)
 . . S:$E(LEXTSTR,$L(LEXTSTR))["," LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1))
"RTN","LEXDDT2",14,0)
 . I LEXTI=LEX(LEXT,0),LEX(LEXT,0)'>1 D
"RTN","LEXDDT2",15,0)
 . . S LEXTP=LEXTP_"."
"RTN","LEXDDT2",16,0)
 . . S:$E(LEXTSTR,$L(LEXTSTR))["," LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1))
"RTN","LEXDDT2",17,0)
 . D WORD I $L(LEXTSTR)>LEXSTLN D SET S LEXTSTR=""
"RTN","LEXDDT2",18,0)
 I $D(LEX(LEXT,"T")) D
"RTN","LEXDDT2",19,0)
 . F  Q:$E(LEXTSTR,$L(LEXTSTR))'?1P  S LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1)) Q:$E(LEXTSTR,$L(LEXTSTR))'?1P 
"RTN","LEXDDT2",20,0)
 . S LEXTP=LEX(LEXT,"T"),LEXTI=0 D WORD
"RTN","LEXDDT2",21,0)
 S LEXTSTR=$$TRIM(LEXTSTR)
"RTN","LEXDDT2",22,0)
 Q
"RTN","LEXDDT2",23,0)
WORD ; Concatenate Word
"RTN","LEXDDT2",24,0)
 N LEXTW,LEXTD F LEXTD=1:1:$L(LEXTP," ") D
"RTN","LEXDDT2",25,0)
 . S LEXTW=$P(LEXTP," ",LEXTD),LEXTW=$$TRIM(LEXTW)
"RTN","LEXDDT2",26,0)
 . I LEXTD=$L(LEXTP," "),LEXTI>0 S LEXTW=LEXTW_","
"RTN","LEXDDT2",27,0)
 . I ($L(LEXTSTR)+$L(LEXTW)+1)'>LEXSTLN D  Q
"RTN","LEXDDT2",28,0)
 . . S LEXTSTR=LEXTSTR_" "_LEXTW
"RTN","LEXDDT2",29,0)
 . I ($L(LEXTSTR)+$L(LEXTW)+1)>LEXSTLN D
"RTN","LEXDDT2",30,0)
 . . D SET S LEXTSTR=LEXTW
"RTN","LEXDDT2",31,0)
 Q
"RTN","LEXDDT2",32,0)
EOC ; End of Concatenation
"RTN","LEXDDT2",33,0)
 F  Q:$E(LEXTSTR,$L(LEXTSTR))'=","  S LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1)) Q:$E(LEXTSTR,$L(LEXTSTR))'=","
"RTN","LEXDDT2",34,0)
 D SET
"RTN","LEXDDT2",35,0)
 Q
"RTN","LEXDDT2",36,0)
SET ; Set Array Node
"RTN","LEXDDT2",37,0)
 S LEXTCTR=LEXTCTR+1 S LEX(LEXTCTR)=$$TRIM(LEXTSTR),LEX(0)=LEXTCTR
"RTN","LEXDDT2",38,0)
 Q
"RTN","LEXDDT2",39,0)
TRIM(X) ; Remove Spaces
"RTN","LEXDDT2",40,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1)) Q:$E(X,$L(X))'=" "
"RTN","LEXDDT2",41,0)
 F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X)) Q:$E(X,1)'=" "
"RTN","LEXDDT2",42,0)
 Q X
"RTN","LEXDDTC")
0^221^B1554828
"RTN","LEXDDTC",1,0)
LEXDDTC ; ISL Display Defaults - Shortcut Context  ; 09-23-96
"RTN","LEXDDTC",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDTC",3,0)
 ;
"RTN","LEXDDTC",4,0)
CON ; Shortcut Context
"RTN","LEXDDTC",5,0)
 ; Required LEXCTX
"RTN","LEXDDTC",6,0)
 N LEXTCTR,LEXTD,LEXTI,LEXTIC,LEXTL,LEXTN,LEXTSTR,LEXT,LEXTV
"RTN","LEXDDTC",7,0)
 K LEX Q:'$L($G(LEXCTX))  S LEXCTX=+LEXCTX
"RTN","LEXDDTC",8,0)
 Q:LEXCTX'>0  Q:'$D(^LEX(757.41,LEXCTX))
"RTN","LEXDDTC",9,0)
 S LEX=LEXCTX S:'$D(LEXSTLN) LEXSTLN=56
"RTN","LEXDDTC",10,0)
 S LEXTI=0,(LEXTIC,LEXTN,LEXTV,LEXTD)="" D INT
"RTN","LEXDDTC",11,0)
 K:LEXSTLN=56 LEXSTLN Q
"RTN","LEXDDTC",12,0)
INT ; Interpret string
"RTN","LEXDDTC",13,0)
 ; LEXCTX
"RTN","LEXDDTC",14,0)
 S LEXTIC=1
"RTN","LEXDDTC",15,0)
 S LEXTN=LEXTN_$P($G(^LEX(757.41,+LEXCTX,0)),"^",1)
"RTN","LEXDDTC",16,0)
 S LEXTN=LEXTN_" shortcut set"
"RTN","LEXDDTC",17,0)
 ;     Build temporary phrase
"RTN","LEXDDTC",18,0)
 S LEX("V",1)="Use the "_LEXTN
"RTN","LEXDDTC",19,0)
 ;     Process phrase 
"RTN","LEXDDTC",20,0)
 S LEX("V",0)=1,LEXT="V",LEXTCTR=0,LEXTSTR=""
"RTN","LEXDDTC",21,0)
 D CONCAT^LEXDDT2 K LEX("V")
"RTN","LEXDDTC",22,0)
 I $E(LEXTSTR,$L(LEXTSTR))?1P S LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1))
"RTN","LEXDDTC",23,0)
 I $E(LEXTSTR,$L(LEXTSTR))?1P S LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1))
"RTN","LEXDDTC",24,0)
 D EOC^LEXDDT2
"RTN","LEXDDTC",25,0)
 Q
"RTN","LEXDDTD")
0^222^B1846548
"RTN","LEXDDTD",1,0)
LEXDDTD ; ISL Display Defaults - Display           ; 09-23-96
"RTN","LEXDDTD",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDTD",3,0)
 ;
"RTN","LEXDDTD",4,0)
DSO ; Display Sources
"RTN","LEXDDTD",5,0)
 ; Required LEXSHOW
"RTN","LEXDDTD",6,0)
 K LEX N LEXTCTR,LEXTI,LEXTIC,LEXTSTR,LEXT
"RTN","LEXDDTD",7,0)
 S:'$D(LEXSTLN) LEXSTLN=56
"RTN","LEXDDTD",8,0)
 D:'$L($G(LEXSHOW)) NONE D:$L($G(LEXSHOW)) SHOW
"RTN","LEXDDTD",9,0)
 Q
"RTN","LEXDDTD",10,0)
SHOW ; Show Classification Codes (sources)
"RTN","LEXDDTD",11,0)
 S LEX=LEXSHOW,LEXTCTR=0,LEX("L")=LEX
"RTN","LEXDDTD",12,0)
 S LEX("L","H")="Display codes from"
"RTN","LEXDDTD",13,0)
 S LEX("L","T")="coding system",LEXTCTR=0
"RTN","LEXDDTD",14,0)
 F LEXTI=1:1:$L(LEX("L"),"/") D
"RTN","LEXDDTD",15,0)
 . N LEXTIC S LEXTIC=$P(LEX("L"),"/",LEXTI) Q:LEXTIC="UND"
"RTN","LEXDDTD",16,0)
 . S LEXTCTR=LEXTCTR+1,LEX("L",LEXTCTR)=$$CN^LEXDDTF(LEXTIC)
"RTN","LEXDDTD",17,0)
 S:LEXTCTR>1 LEX("L","T")=LEX("L","T")_"s"
"RTN","LEXDDTD",18,0)
 S LEX("L","T")=LEX("L","T")_"."
"RTN","LEXDDTD",19,0)
 S LEX("L",0)=LEXTCTR
"RTN","LEXDDTD",20,0)
 S LEXTCTR=0,LEXTSTR="",LEXT="L"
"RTN","LEXDDTD",21,0)
 D:$G(LEX("L",0)) LNK^LEXDDTF
"RTN","LEXDDTD",22,0)
 D EOC^LEXDDT2
"RTN","LEXDDTD",23,0)
 Q
"RTN","LEXDDTD",24,0)
NONE ; LEXSHOW is Null (nothing to show)
"RTN","LEXDDTD",25,0)
 S LEX=LEXSHOW,LEX("L")=LEX,LEXTCTR=0,LEXTSTR="",LEXT="L"
"RTN","LEXDDTD",26,0)
 S LEX("L","H")="Do not display Classification Codes",LEX("L",0)=0
"RTN","LEXDDTD",27,0)
 D LNK^LEXDDTF,EOC^LEXDDT2
"RTN","LEXDDTD",28,0)
 Q
"RTN","LEXDDTF")
0^223^B13760824
"RTN","LEXDDTF",1,0)
LEXDDTF ; ISL Display Defaults - Filter            ; 09-23-96
"RTN","LEXDDTF",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDTF",3,0)
 ;
"RTN","LEXDDTF",4,0)
SC ; Filter by Semantic Classifications
"RTN","LEXDDTF",5,0)
 ; Required LEXDICS in the format I $$SC^LEXU...
"RTN","LEXDDTF",6,0)
 N LEXTC,LEXTCTR,LEXTI,LEXTIC,LEXTIE,LEXTSTR
"RTN","LEXDDTF",7,0)
 Q:'$L($G(LEXDICS))  Q:LEXDICS'["$$SC^LEXU"
"RTN","LEXDDTF",8,0)
 S LEX=$TR($P($P(LEXDICS,"Y,",2),")",1),"""","")
"RTN","LEXDDTF",9,0)
 S LEXTCTR=0,LEX("I")=$P(LEX,";",1)
"RTN","LEXDDTF",10,0)
 S LEX("E")=$P(LEX,";",2),LEX("L")=$P(LEX,";",3)
"RTN","LEXDDTF",11,0)
 S LEX("I","H")="Include expressions which relate to",LEXTCTR=0
"RTN","LEXDDTF",12,0)
 N LEXTIC,LEXTIE,LEXTI F LEXTI=1:1:$L(LEX("I"),"/") D
"RTN","LEXDDTF",13,0)
 . S LEXTIC=$P(LEX("I"),"/",LEXTI) Q:LEXTIC="UNK"
"RTN","LEXDDTF",14,0)
 . S LEXTCTR=LEXTCTR+1,LEX("I",LEXTCTR)=$$SN(LEXTIC)
"RTN","LEXDDTF",15,0)
 S LEX("I",0)=LEXTCTR
"RTN","LEXDDTF",16,0)
 S LEX("E","H")="Exclude expressions which relate to",LEXTCTR=0
"RTN","LEXDDTF",17,0)
 F LEXTI=1:1:$L(LEX("E"),"/") D
"RTN","LEXDDTF",18,0)
 . S LEXTIC=$P(LEX("E"),"/",LEXTI) Q:LEXTIC="UNK"
"RTN","LEXDDTF",19,0)
 . S LEXTCTR=LEXTCTR+1,LEX("E",LEXTCTR)=$$SN(LEXTIC)
"RTN","LEXDDTF",20,0)
 S LEX("E",0)=LEXTCTR
"RTN","LEXDDTF",21,0)
 S LEX("L","H")="Also include expressions which are linked to"
"RTN","LEXDDTF",22,0)
 S LEX("L","T")="coding system",LEXTCTR=0
"RTN","LEXDDTF",23,0)
 F LEXTI=1:1:$L(LEX("L"),"/") D
"RTN","LEXDDTF",24,0)
 . S LEXTIC=$P(LEX("L"),"/",LEXTI) Q:LEXTIC="UND"  S LEXTCTR=LEXTCTR+1,LEX("L",LEXTCTR)=$$CN(LEXTIC)
"RTN","LEXDDTF",25,0)
 S:LEXTCTR>1 LEX("L","T")=LEX("L","T")_"s"
"RTN","LEXDDTF",26,0)
 S LEX("L","T")=LEX("L","T")_"."
"RTN","LEXDDTF",27,0)
 S LEX("L",0)=LEXTCTR
"RTN","LEXDDTF",28,0)
 S:'$D(LEXSTLN) LEXSTLN=56 K LEX("T") S LEXTCTR=0 N LEXT,LEXTSTR
"RTN","LEXDDTF",29,0)
 D:$G(LEX("I",0)) INC
"RTN","LEXDDTF",30,0)
 D:$G(LEX("E",0)) EXC
"RTN","LEXDDTF",31,0)
 D:$G(LEX("L",0)) LNK
"RTN","LEXDDTF",32,0)
 D EOC^LEXDDT2
"RTN","LEXDDTF",33,0)
 Q
"RTN","LEXDDTF",34,0)
SO ; Filter by Sources
"RTN","LEXDDTF",35,0)
 ; Required LEXDICS in the format I $$SO^LEXU...
"RTN","LEXDDTF",36,0)
 N LEXTC,LEXTCTR,LEXTI,LEXTIC,LEXTIE,LEXTSTR
"RTN","LEXDDTF",37,0)
 Q:'$L($G(LEXDICS))  Q:LEXDICS'["$$SO^LEXU"
"RTN","LEXDDTF",38,0)
 S LEX=$TR($P($P(LEXDICS,"Y,",2),")",1),"""","")
"RTN","LEXDDTF",39,0)
 S LEXTCTR=0,LEX("L")=LEX
"RTN","LEXDDTF",40,0)
 S LEX("L","H")="Include expressions which are linked to"
"RTN","LEXDDTF",41,0)
 S LEX("L","T")="coding system",LEXTCTR=0
"RTN","LEXDDTF",42,0)
 F LEXTI=1:1:$L(LEX("L"),"/") D
"RTN","LEXDDTF",43,0)
 . S LEXTIC=$P(LEX("L"),"/",LEXTI) Q:LEXTIC="UND"  S LEXTCTR=LEXTCTR+1,LEX("L",LEXTCTR)=$$CN(LEXTIC)
"RTN","LEXDDTF",44,0)
 S:LEXTCTR>1 LEX("L","T")=LEX("L","T")_"s"
"RTN","LEXDDTF",45,0)
 S LEX("L","T")=LEX("L","T")_"."
"RTN","LEXDDTF",46,0)
 S LEX("L",0)=LEXTCTR
"RTN","LEXDDTF",47,0)
 S:'$D(LEXSTLN) LEXSTLN=56 K LEX("T") S LEXTCTR=0 N LEXT,LEXTSTR
"RTN","LEXDDTF",48,0)
 S LEXTSTR="" D:$G(LEX("L",0)) LNK
"RTN","LEXDDTF",49,0)
 D EOC^LEXDDT2
"RTN","LEXDDTF",50,0)
 Q
"RTN","LEXDDTF",51,0)
INC ; Inclusion Data Elements
"RTN","LEXDDTF",52,0)
 S LEXTSTR="",LEXT="I",LEXTCTR=0 D CONCAT^LEXDDT2 K LEX("I")
"RTN","LEXDDTF",53,0)
 Q
"RTN","LEXDDTF",54,0)
EXC ; Exclusion Data Elements
"RTN","LEXDDTF",55,0)
 S LEXT="E",LEXTCTR=+($G(LEX(0)))
"RTN","LEXDDTF",56,0)
 I $D(LEXTSTR) D
"RTN","LEXDDTF",57,0)
 . S:$E(LEXTSTR,$L(LEXTSTR))["," LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1))
"RTN","LEXDDTF",58,0)
 . I $L(LEXTSTR)'>(LEXSTLN+2) S LEXTSTR=LEXTSTR_" " Q
"RTN","LEXDDTF",59,0)
 . D SET^LEXDDT2
"RTN","LEXDDTF",60,0)
 . S LEXTSTR=""
"RTN","LEXDDTF",61,0)
 D CONCAT^LEXDDT2  K LEX("E")
"RTN","LEXDDTF",62,0)
 Q
"RTN","LEXDDTF",63,0)
LNK ; Linked Sources Data Elements
"RTN","LEXDDTF",64,0)
 S LEXT="L",LEXTCTR=+($G(LEX(0)))
"RTN","LEXDDTF",65,0)
 I $D(LEXTSTR) D
"RTN","LEXDDTF",66,0)
 . S:$E(LEXTSTR,$L(LEXTSTR))["," LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1))
"RTN","LEXDDTF",67,0)
 . I $L(LEXTSTR)'>(LEXSTLN+2) S LEXTSTR=LEXTSTR_"  " Q
"RTN","LEXDDTF",68,0)
 . D SET^LEXDDT2
"RTN","LEXDDTF",69,0)
 . S LEXTSTR=""
"RTN","LEXDDTF",70,0)
 D CONCAT^LEXDDT2  K LEX("L")
"RTN","LEXDDTF",71,0)
 Q
"RTN","LEXDDTF",72,0)
SN(LEXSTR) ; Get Semantic Data Element Name
"RTN","LEXDDTF",73,0)
 N LEXTEMP S LEXTEMP=LEXSTR I LEXTEMP?3U D
"RTN","LEXDDTF",74,0)
 . S LEXSTR=$O(^LEX(757.11,"B",LEXTEMP,0)) S:+LEXSTR=0 LEXSTR=""
"RTN","LEXDDTF",75,0)
 . S:+LEXSTR>0 LEXSTR=$P($G(^LEX(757.11,+LEXSTR,0)),"^",2)
"RTN","LEXDDTF",76,0)
 I LEXTEMP?1N.N D
"RTN","LEXDDTF",77,0)
 . S LEXSTR=+LEXTEMP
"RTN","LEXDDTF",78,0)
 . S LEXSTR=$S($D(^LEX(757.12,LEXSTR,0)):$P($G(^LEX(757.12,LEXSTR,0)),"^",2),1:"")
"RTN","LEXDDTF",79,0)
 Q LEXSTR
"RTN","LEXDDTF",80,0)
CN(LEXSTR) ; Get Classification System Data Element Name
"RTN","LEXDDTF",81,0)
 N LEXTEMP,LEXTC S LEXTC=LEXSTR,LEXTEMP=$E(LEXSTR,1,2)_$C($A($E(LEXSTR,3))-1)_"~"
"RTN","LEXDDTF",82,0)
 S LEXSTR=""
"RTN","LEXDDTF",83,0)
 F  S LEXTEMP=$O(^LEX(757.03,"B",LEXTEMP)) Q:LEXTEMP=""!(LEXSTR'="")  D  Q:LEXTEMP=""!(LEXSTR'="")
"RTN","LEXDDTF",84,0)
 . I LEXTEMP[LEXTC S LEXSTR=$O(^LEX(757.03,"B",LEXTEMP,0))
"RTN","LEXDDTF",85,0)
 S LEXSTR=+LEXSTR S:LEXSTR=0 LEXSTR=""
"RTN","LEXDDTF",86,0)
 I +LEXSTR>0,$D(^LEX(757.03,+LEXSTR)) S LEXSTR=$P($G(^LEX(757.03,+LEXSTR,0)),"^",2)
"RTN","LEXDDTF",87,0)
 Q LEXSTR
"RTN","LEXDDTV")
0^224^B3335880
"RTN","LEXDDTV",1,0)
LEXDDTV ; ISL Display Defaults - Vocabulary        ; 09-23-96
"RTN","LEXDDTV",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDDTV",3,0)
 ;
"RTN","LEXDDTV",4,0)
SUB ; Select between Logical and Physical Subsets
"RTN","LEXDDTV",5,0)
 ; Required LEXSUB  Optional LEXDICS
"RTN","LEXDDTV",6,0)
 N LEXTCTR,LEXTD,LEXTI,LEXTIC,LEXTL,LEXTN,LEXTSTR,LEXT,LEXTV
"RTN","LEXDDTV",7,0)
 K LEX S:'$L($G(LEXSUB)) LEX="WRD"
"RTN","LEXDDTV",8,0)
 S:$L($G(LEXSUB)) LEX=LEXSUB
"RTN","LEXDDTV",9,0)
 S:'$D(LEXSTLN) LEXSTLN=56
"RTN","LEXDDTV",10,0)
 S LEXTI=0,(LEXTIC,LEXTN,LEXTV,LEXTD)="" D INT
"RTN","LEXDDTV",11,0)
 K:LEXSTLN=56 LEXSTLN Q
"RTN","LEXDDTV",12,0)
INT ; Interpret string
"RTN","LEXDDTV",13,0)
 ;     LEXSUB is an Application Subset "AB"
"RTN","LEXDDTV",14,0)
 I $D(^LEXT(757.2,"AB",LEX)) D
"RTN","LEXDDTV",15,0)
 . S LEXTIC=$O(^LEXT(757.2,"AB",LEX,0))
"RTN","LEXDDTV",16,0)
 . S LEXTN=$P($G(^LEXT(757.2,+LEXTIC,0)),"^",1)
"RTN","LEXDDTV",17,0)
 . I +LEXTIC'=1 S LEXTN=LEXTN_" Subset"
"RTN","LEXDDTV",18,0)
 ;     LEXSUB is a Compiled Subset "AA"
"RTN","LEXDDTV",19,0)
 I $D(^LEXT(757.2,"AA",LEX)) D
"RTN","LEXDDTV",20,0)
 . S LEXTIC=$O(^LEXT(757.2,"AA",LEX,0))
"RTN","LEXDDTV",21,0)
 . S LEXTN=$P($G(^LEXT(757.2,+LEXTIC,0)),"^",1)
"RTN","LEXDDTV",22,0)
 . I +LEXTIC'=1 S LEXTN=LEXTN_" Subset"
"RTN","LEXDDTV",23,0)
 ;     View of a Subset - DIC("S") with LEXSUB
"RTN","LEXDDTV",24,0)
 I $L($G(LEXDICS)) D
"RTN","LEXDDTV",25,0)
 . S LEXTD=""
"RTN","LEXDDTV",26,0)
 . F  S LEXTD=$O(^LEXT(757.2,"AB",LEXTD)) Q:LEXTD=""!(LEXTV'="")  D
"RTN","LEXDDTV",27,0)
 . . S LEXTL=$O(^LEXT(757.2,"AB",LEXTD,0)) Q:+LEXTL'>0
"RTN","LEXDDTV",28,0)
 . . I $G(^LEXT(757.2,+LEXTL,6))=LEXDICS D
"RTN","LEXDDTV",29,0)
 . . . S LEXTV=$P($G(^LEXT(757.2,+LEXTL,0)),"^",1)
"RTN","LEXDDTV",30,0)
 ;     Build temporary phrase
"RTN","LEXDDTV",31,0)
 I LEXTV'="",LEXTN'="" S LEX("V",1)=LEXTV_" view of the "_LEXTN
"RTN","LEXDDTV",32,0)
 I LEXTV="",LEXTN'="" K LEX("V")
"RTN","LEXDDTV",33,0)
 ;     Process phrase 
"RTN","LEXDDTV",34,0)
 I $D(LEX("V",1)) D
"RTN","LEXDDTV",35,0)
 . S LEX("V",0)=1,LEXT="V",LEXTCTR=0,LEXTSTR=""
"RTN","LEXDDTV",36,0)
 . D CONCAT^LEXDDT2 K LEX("V")
"RTN","LEXDDTV",37,0)
 . I $E(LEXTSTR,$L(LEXTSTR))?1P S LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1))
"RTN","LEXDDTV",38,0)
 . I $E(LEXTSTR,$L(LEXTSTR))?1P S LEXTSTR=$E(LEXTSTR,1,($L(LEXTSTR)-1))
"RTN","LEXDDTV",39,0)
 . D EOC^LEXDDT2
"RTN","LEXDDTV",40,0)
 Q
"RTN","LEXDFL")
0^225^B4960220
"RTN","LEXDFL",1,0)
LEXDFL ; ISL Default Filter                       ; 09-23-96
"RTN","LEXDFL",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFL",3,0)
 ;
"RTN","LEXDFL",4,0)
 ; Entry:  D EN^LEXDFL             LEXAP is unknown
"RTN","LEXDFL",5,0)
 ;
"RTN","LEXDFL",6,0)
 ; Entry:  D EN1^LEXDFL(LEXAP)    LEXAP is known
"RTN","LEXDFL",7,0)
 ;
"RTN","LEXDFL",8,0)
 ; Single user entry point - Saves Filter in file 757.2
"RTN","LEXDFL",9,0)
 ;
"RTN","LEXDFL",10,0)
 ; Where 
"RTN","LEXDFL",11,0)
 ;
"RTN","LEXDFL",12,0)
 ;      LEXAP     Pointer to file 757.2
"RTN","LEXDFL",13,0)
 ;      LEXUSER   DUZ of user
"RTN","LEXDFL",14,0)
 ;      LEXCA     Action (modify/delete)
"RTN","LEXDFL",15,0)
 ;      LEXCM     Method (predefined/create)
"RTN","LEXDFL",16,0)
 ;
"RTN","LEXDFL",17,0)
EN ; Single user, LEXAP is unknown
"RTN","LEXDFL",18,0)
 N LEXAP S LEXAP=$$DFI^LEXDM4 Q:+LEXAP=0  W ! D EN1(LEXAP) Q
"RTN","LEXDFL",19,0)
EN1(LEXAP) ; Single user, LEXAP is known
"RTN","LEXDFL",20,0)
 N LEXUSER,LEXX S LEXUSER=$G(DUZ) Q:+LEXUSER'>0  Q:'$D(^VA(200,+LEXUSER))
"RTN","LEXDFL",21,0)
 ;
"RTN","LEXDFL",22,0)
 S LEXAP=$G(LEXAP) Q:LEXAP=""
"RTN","LEXDFL",23,0)
 I '$D(^LEXT(757.2,+LEXAP,0))&('$D(^LEXT(757.2,"B",LEXAP)))&('$D(^LEXT(757.2,"C",$$UP^XLFSTR(LEXAP))))&('$D(^LEXT(757.2,"AN",LEXAP))) Q
"RTN","LEXDFL",24,0)
 S:+LEXAP'>0 LEXAP=$$AP^LEXDFN2(LEXAP)
"RTN","LEXDFL",25,0)
 ;
"RTN","LEXDFL",26,0)
 Q:+($G(LEXAP))'>0  Q:+($P($G(^LEXT(757.2,+LEXAP,5)),"^",3))'>0
"RTN","LEXDFL",27,0)
 N LEXCA,LEXCM,LEXDVAL,LEXDNAM,LEXFLD,LEXFIL S LEXFIL=""
"RTN","LEXDFL",28,0)
 S LEXFLD=1,LEXCA=$$MOD^LEXDM(1) Q:LEXCA=0!(LEXCA="^^")
"RTN","LEXDFL",29,0)
 D:LEXCA="@" KILL Q:LEXCA="@"  W ! S LEXCM=$$MTH^LEXDM(1) Q:LEXCM["^"
"RTN","LEXDFL",30,0)
 S:LEXCM=1 LEXDVAL=$$EN^LEXDFLS
"RTN","LEXDFL",31,0)
 S:LEXCM=2 LEXDVAL=$$EN^LEXDFLC Q:LEXDVAL="^^"
"RTN","LEXDFL",32,0)
 S LEXDNAM=$P(LEXDVAL,"^",$L(LEXDVAL,"^")),LEXDVAL=$P(LEXDVAL,"^",1,($L(LEXDVAL,"^")-1))
"RTN","LEXDFL",33,0)
 D SET
"RTN","LEXDFL",34,0)
 Q
"RTN","LEXDFL",35,0)
M ; Test entry point MGR
"RTN","LEXDFL",36,0)
 S X=$$MGR W !!,X,!! Q
"RTN","LEXDFL",37,0)
MGR(LEXX) ; Multi-user (for Manager options)
"RTN","LEXDFL",38,0)
 ; Do not save filter, return value to manager option
"RTN","LEXDFL",39,0)
 N LEXCA,LEXCM,LEXDVAL S LEXX=""
"RTN","LEXDFL",40,0)
 S LEXCA=$$MOD^LEXDM(1) Q:LEXCA=0 "^" Q:(LEXCA="^^") "^^"
"RTN","LEXDFL",41,0)
 Q:LEXCA="@" "@^Delete filter"
"RTN","LEXDFL",42,0)
 W ! S LEXCM=$$MTH^LEXDM(1) S:LEXCM[U LEXX=U S:LEXCM["^^" LEXX="^^"
"RTN","LEXDFL",43,0)
 Q:LEXX["^" LEXX
"RTN","LEXDFL",44,0)
 S:LEXCM=1 LEXDVAL=$$EN^LEXDFLS S:LEXCM=2 LEXDVAL=$$EN^LEXDFLC
"RTN","LEXDFL",45,0)
 Q:LEXDVAL="^^" "^^"
"RTN","LEXDFL",46,0)
 S LEXX=LEXDVAL Q LEXX
"RTN","LEXDFL",47,0)
SET ; Set default filter
"RTN","LEXDFL",48,0)
 D SET^LEXDSV(LEXUSER,LEXAP,LEXDVAL,LEXDNAM,LEXFLD) Q
"RTN","LEXDFL",49,0)
KILL ; Kill default filter
"RTN","LEXDFL",50,0)
 D SET^LEXDSV(LEXUSER,LEXAP,"@","Delete",LEXFLD) Q
"RTN","LEXDFLC")
0^226^B795201
"RTN","LEXDFLC",1,0)
LEXDFLC ; ISL Default Filter - Create              ; 09-23-96
"RTN","LEXDFLC",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFLC",3,0)
 ;
"RTN","LEXDFLC",4,0)
 ; Entry:  S X=$$EN^LEXDFLC
"RTN","LEXDFLC",5,0)
 ;
"RTN","LEXDFLC",6,0)
 ; Function returns a multi piece string
"RTN","LEXDFLC",7,0)
 ;  
"RTN","LEXDFLC",8,0)
 ; $Piece  1-X
"RTN","LEXDFLC",9,0)
 ;
"RTN","LEXDFLC",10,0)
 ;         Executable MUMPS code to be used as
"RTN","LEXDFLC",11,0)
 ;         a filter (screen DIC("S") during
"RTN","LEXDFLC",12,0)
 ;         searches
"RTN","LEXDFLC",13,0)
 ;  
"RTN","LEXDFLC",14,0)
 ; $Piece  Last piece
"RTN","LEXDFLC",15,0)
 ;
"RTN","LEXDFLC",16,0)
 ;         Name of the filter selected i.e., 
"RTN","LEXDFLC",17,0)
 ;         "Problem List"  This will be null only
"RTN","LEXDFLC",18,0)
 ;         when user input is "^^"
"RTN","LEXDFLC",19,0)
 ;
"RTN","LEXDFLC",20,0)
EN(LEXX) ; Entry point S X=$$EN^LEXDFLC
"RTN","LEXDFLC",21,0)
 N LEXFLT S LEXFLT=$$EN^LEXDFLT,LEXX=""
"RTN","LEXDFLC",22,0)
 Q:LEXFLT["^^" "^^" Q:LEXFLT["^" "^"
"RTN","LEXDFLC",23,0)
 Q:LEXFLT=0 "^No filter created"
"RTN","LEXDFLC",24,0)
 S:LEXFLT=1 LEXX=$$EN^LEXDFST
"RTN","LEXDFLC",25,0)
 S:LEXFLT=2 LEXX=$$EN^LEXDFSO
"RTN","LEXDFLC",26,0)
 S:LEXFLT=3 LEXX=$$EN^LEXDFSS
"RTN","LEXDFLC",27,0)
 Q:LEXX["^^" "^No filter created"
"RTN","LEXDFLC",28,0)
 Q:LEXX="" "I 1^User Defined"
"RTN","LEXDFLC",29,0)
 Q LEXX
"RTN","LEXDFLS")
0^227^B14832359
"RTN","LEXDFLS",1,0)
LEXDFLS ; ISL Default Filter - Select              ; 09-23-96
"RTN","LEXDFLS",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFLS",3,0)
 ;
"RTN","LEXDFLS",4,0)
 ; Special Look-up in file 757.3 Screens
"RTN","LEXDFLS",5,0)
 ; Entry:  S X=$$EN^LEXDFLS
"RTN","LEXDFLS",6,0)
 ;
"RTN","LEXDFLS",7,0)
 ; Function returns a multi piece string
"RTN","LEXDFLS",8,0)
 ;  
"RTN","LEXDFLS",9,0)
 ; $Piece  1-X
"RTN","LEXDFLS",10,0)
 ;
"RTN","LEXDFLS",11,0)
 ;         Executable MUMPS code to be used as
"RTN","LEXDFLS",12,0)
 ;         a filter (screen DIC("S") during
"RTN","LEXDFLS",13,0)
 ;         searches
"RTN","LEXDFLS",14,0)
 ;  
"RTN","LEXDFLS",15,0)
 ; $Piece  Last piece
"RTN","LEXDFLS",16,0)
 ;
"RTN","LEXDFLS",17,0)
 ;         Name of the filter selected i.e., 
"RTN","LEXDFLS",18,0)
 ;         "Problem List"  This will be null only
"RTN","LEXDFLS",19,0)
 ;         when user input is "^^"
"RTN","LEXDFLS",20,0)
 ;   
"RTN","LEXDFLS",21,0)
 ; LEX    Array containing pointers to 757.3
"RTN","LEXDFLS",22,0)
 ; LEXA   Users answer to selection
"RTN","LEXDFLS",23,0)
 ; LEXC   Counter
"RTN","LEXDFLS",24,0)
 ; LEXD   Display
"RTN","LEXDFLS",25,0)
 ; LEXF   Re-display starting from #LEXF
"RTN","LEXDFLS",26,0)
 ; LEXI   Incremental Counter
"RTN","LEXDFLS",27,0)
 ; LEXL   Last entry displayed
"RTN","LEXDFLS",28,0)
 ; LEXLN  Line counter
"RTN","LEXDFLS",29,0)
 ; LEXR   Internal Entry Number (Record) in #757.3
"RTN","LEXDFLS",30,0)
 ; LEXS   Selection
"RTN","LEXDFLS",31,0)
 ; LEXT   Re-display up through #LEXT
"RTN","LEXDFLS",32,0)
 ;  
"RTN","LEXDFLS",33,0)
EN(LEXX) ; Select a predefined filter string
"RTN","LEXDFLS",34,0)
 N X,Y,LEX,LEXC,LEXL,LEXR,LEXA,LEXD D TOT
"RTN","LEXDFLS",35,0)
 S LEXD="",(LEXA,LEXX,LEXC,LEXR)=0
"RTN","LEXDFLS",36,0)
 F  S LEXD=$O(^LEX(757.3,"B",LEXD)) Q:LEXD=""!(LEXA["^")!(+LEXX>0)  D
"RTN","LEXDFLS",37,0)
 . S LEXR=0
"RTN","LEXDFLS",38,0)
 . F  S LEXR=$O(^LEX(757.3,"B",LEXD,LEXR)) Q:+LEXR=0!(LEXA["^")!(+LEXX>0)  D
"RTN","LEXDFLS",39,0)
 . . Q:$P($G(^LEX(757.3,LEXR,0)),"^",2)'="U"
"RTN","LEXDFLS",40,0)
 . . S LEXC=LEXC+1,LEXL=LEXC
"RTN","LEXDFLS",41,0)
 . . S LEX(LEXC)=LEXR,LEX(0)=LEXC
"RTN","LEXDFLS",42,0)
 . . D W(LEXC,LEXR)
"RTN","LEXDFLS",43,0)
 . . D ASK
"RTN","LEXDFLS",44,0)
 D ASK S LEXX=+LEXX K LEX
"RTN","LEXDFLS",45,0)
 I +LEXX>0 S LEXX=$G(^LEX(757.3,+LEXX,1))_"^"_$P($G(^LEX(757.3,+LEXX,0)),"^",1) Q LEXX
"RTN","LEXDFLS",46,0)
 S:LEXA'["^^" LEXX="^No filter selected" S:LEXA["^^" LEXX="^"
"RTN","LEXDFLS",47,0)
 Q LEXX
"RTN","LEXDFLS",48,0)
ASK ;
"RTN","LEXDFLS",49,0)
 ;I LEXC#5=0,+LEXX=0 S LEXA=$$SEL S:+LEXA>0&(+LEXA<(LEXC+1)) LEXX=+LEXA
"RTN","LEXDFLS",50,0)
 ;I +LEXX=0,LEXA'["^",LEXC#5'=0 S LEXA=$$SEL S:+LEXA>0&(+LEXA<(LEXC+1)) LEXX=+LEXA
"RTN","LEXDFLS",51,0)
 Q:+LEXX>0  Q:LEXA["^"  Q:+LEXR>0&(LEXC#5'=0)
"RTN","LEXDFLS",52,0)
 Q:+LEXR=0&(LEXC#5=0)
"RTN","LEXDFLS",53,0)
 D SEL Q:+LEXA'>0  Q:LEXA>LEXC  S LEXX=$G(LEX(+LEXA))
"RTN","LEXDFLS",54,0)
 Q
"RTN","LEXDFLS",55,0)
SEL ; Select from list
"RTN","LEXDFLS",56,0)
 W ! N X,Y,DIR,DIRUT,DTOUT,DUOUT,DIROUT
"RTN","LEXDFLS",57,0)
 S DIR(0)="NAO^1:"_LEXC
"RTN","LEXDFLS",58,0)
 S DIR("A")="Select FILTER 1-"_LEXC_":  "
"RTN","LEXDFLS",59,0)
 S (DIR("?"),DIR("??"))="^D SH^LEXDFLS"
"RTN","LEXDFLS",60,0)
 D ^DIR S LEXA=Y
"RTN","LEXDFLS",61,0)
 Q
"RTN","LEXDFLS",62,0)
UOUT ; Up Arrow detected
"RTN","LEXDFLS",63,0)
 S:LEXA="^^" LEXX="^"
"RTN","LEXDFLS",64,0)
 S:LEXA="^" LEXX="^No filter selected"
"RTN","LEXDFLS",65,0)
 Q
"RTN","LEXDFLS",66,0)
VAL ; No Un Arrow (value)
"RTN","LEXDFLS",67,0)
 I +LEXX>0 D  Q
"RTN","LEXDFLS",68,0)
 . I $D(^LEX(757.41,+LEXX)) D  Q
"RTN","LEXDFLS",69,0)
 . . S LEXX=LEXX_"^"_$P($G(^LEX(757.41,+LEXX,0)),"^",1)
"RTN","LEXDFLS",70,0)
 . S LEXX="^No filter selected"
"RTN","LEXDFLS",71,0)
 S LEXX="^No filter selected"
"RTN","LEXDFLS",72,0)
 Q
"RTN","LEXDFLS",73,0)
SH ; Show help
"RTN","LEXDFLS",74,0)
 N LEXR S LEXR=+($E(X,2,$L(X))) I $E(X,1)="?",LEXR>0,LEXR<(LEX(0)+1) D
"RTN","LEXDFLS",75,0)
 . S LEXR=LEX(LEXR) D:'$D(^LEX(757.3,LEXR,2,1)) NODES,STD Q:'$D(^LEX(757.3,LEXR,2,1))  D DES
"RTN","LEXDFLS",76,0)
 D:$E(X,1)="?"&(LEXR<1!(LEXR>LEX(0))) STD D:$E(X,1)'="?" STD D RD
"RTN","LEXDFLS",77,0)
 Q
"RTN","LEXDFLS",78,0)
STD ; Standard Help
"RTN","LEXDFLS",79,0)
 W !!,"Enter 1-",LEXC," to select a filter, or ""?"" for help, or ""?#"" for descriptive"
"RTN","LEXDFLS",80,0)
 W !,"help on an entry flagged with an ""*"", or ""^"" to exit or <Return> for more."
"RTN","LEXDFLS",81,0)
 Q
"RTN","LEXDFLS",82,0)
DES ; Description Help
"RTN","LEXDFLS",83,0)
 N LEXLN,LEXI S (LEXLN,LEXI)=0 W !!,?2,$P(^LEX(757.3,LEXR,0),"^",1),!
"RTN","LEXDFLS",84,0)
 F  S LEXI=$O(^LEX(757.3,LEXR,2,LEXI)) Q:+LEXI=0  D
"RTN","LEXDFLS",85,0)
 . W !,?4,^LEX(757.3,LEXR,2,LEXI,0) S LEXLN=LEXLN+1
"RTN","LEXDFLS",86,0)
 D:LEXLN>4 EOP W ! Q
"RTN","LEXDFLS",87,0)
NODES ; No Description Help Available
"RTN","LEXDFLS",88,0)
 W !!,?2,$P(^LEX(757.3,LEXR,0),"^",1)," does not have a description",! Q
"RTN","LEXDFLS",89,0)
RD ; Re-Display List
"RTN","LEXDFLS",90,0)
 N LEXF,LEXT S LEXT=+($G(LEXL)),LEXF=(+(LEXT#5)-1)
"RTN","LEXDFLS",91,0)
 S:LEXF<0 LEXF=4 S LEXF=LEXT-LEXF S LEXF=LEXF-1
"RTN","LEXDFLS",92,0)
 F  S LEXF=$O(LEX(LEXF)) Q:+LEXF=0!(LEXF'<(LEXT+1))  D
"RTN","LEXDFLS",93,0)
 . W:LEXF=1 ! D W(LEXF,LEX(LEXF))
"RTN","LEXDFLS",94,0)
 Q
"RTN","LEXDFLS",95,0)
TOT ; Total Filters
"RTN","LEXDFLS",96,0)
 N LEXD,LEXR,LEXC S LEXD="",LEXC=0
"RTN","LEXDFLS",97,0)
 F  S LEXD=$O(^LEX(757.3,"B",LEXD)) Q:LEXD=""  S LEXR=0 D
"RTN","LEXDFLS",98,0)
 . F  S LEXR=$O(^LEX(757.3,"B",LEXD,LEXR)) Q:+LEXR=0  D
"RTN","LEXDFLS",99,0)
 . . Q:$P($G(^LEX(757.3,LEXR,0)),"^",2)'="U"
"RTN","LEXDFLS",100,0)
 . . S LEXC=LEXC+1
"RTN","LEXDFLS",101,0)
 W !!,LEXC," Filters found",! Q
"RTN","LEXDFLS",102,0)
W(LEXC,LEXR) ; Write entry
"RTN","LEXDFLS",103,0)
 W !,$J(LEXC,4),".  ",$P(^LEX(757.3,LEXR,0),"^",1)
"RTN","LEXDFLS",104,0)
 W $S($D(^LEX(757.3,LEXR,2,1)):"  *",1:"") Q
"RTN","LEXDFLS",105,0)
EOP ; End of Page 
"RTN","LEXDFLS",106,0)
 W ! N X,Y,DIR,DTOUT,DUOUT,DIRUT,DIROUT S DIR(0)="E" D ^DIR S:X[U LEXA="^" W ! Q
"RTN","LEXDFLT")
0^228^B2054932
"RTN","LEXDFLT",1,0)
LEXDFLT ; ISL Default Filter - Filter Type         ; 09-23-96
"RTN","LEXDFLT",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFLT",3,0)
 ;
"RTN","LEXDFLT",4,0)
 ; Entry:  S X=$$EN^LEXDFLT
"RTN","LEXDFLT",5,0)
 ;
"RTN","LEXDFLT",6,0)
 ; Function returns
"RTN","LEXDFLT",7,0)
 ;
"RTN","LEXDFLT",8,0)
 ;     "^"     Up-arrow
"RTN","LEXDFLT",9,0)
 ;     "^^"    Double up-arrow
"RTN","LEXDFLT",10,0)
 ;      0      None
"RTN","LEXDFLT",11,0)
 ;      1      Filter by Semantic Types
"RTN","LEXDFLT",12,0)
 ;      2      Filter by Classification Codes
"RTN","LEXDFLT",13,0)
 ;      3      Filter by Semantic Types and Classification Codes
"RTN","LEXDFLT",14,0)
 ;
"RTN","LEXDFLT",15,0)
EN(LEXX) ;
"RTN","LEXDFLT",16,0)
 ;
"RTN","LEXDFLT",17,0)
 N DIR,X,Y,DIRUT,DTOUT,DUOUT,DIROUT
"RTN","LEXDFLT",18,0)
 S DIR("A",1)="Filter based on:"
"RTN","LEXDFLT",19,0)
 S DIR("A",3)="   1.  Semantic Types"
"RTN","LEXDFLT",20,0)
 S DIR("A",4)="   2.  Classification Coding Systems"
"RTN","LEXDFLT",21,0)
 S DIR("A",5)="   3.  Semantic Types and Classification Codes"
"RTN","LEXDFLT",22,0)
 S (DIR("A",2),DIR("A",6))="  "
"RTN","LEXDFLT",23,0)
 S DIR(0)="SAO^1:Filter on Semantic Types;2:Filter on Classification Codes;3:Filter on both Semantic Types and Classification Codes"
"RTN","LEXDFLT",24,0)
 S DIR("A")="Select:  "
"RTN","LEXDFLT",25,0)
 D ^DIR S LEXX=+X S:Y["^" LEXX=Y Q LEXX
"RTN","LEXDFN")
0^229^B15072280
"RTN","LEXDFN",1,0)
LEXDFN ; ISL Default Names                        ; 09-23-96
"RTN","LEXDFN",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFN",3,0)
 ;
"RTN","LEXDFN",4,0)
APPN(X) ; Application Name
"RTN","LEXDFN",5,0)
 N LEXT,LEXA S (LEXA,LEXT)="",X=$G(X)
"RTN","LEXDFN",6,0)
 I +X>0,$D(^LEXT(757.2,+X,0)) D
"RTN","LEXDFN",7,0)
 . S LEXA=$P($G(^LEXT(757.2,+X,5)),"^",4)
"RTN","LEXDFN",8,0)
 . Q:LEXA=""  Q:'$D(^LEXT(757.2,"APPS",LEXA))
"RTN","LEXDFN",9,0)
 . S LEXT=$P($G(^LEXT(757.2,+X,0)),"^",1)
"RTN","LEXDFN",10,0)
 S:X'=""&(LEXT="") X="Unknown Application" S:LEXT'="" X=LEXT Q X
"RTN","LEXDFN",11,0)
DISN(X) ; Display Name
"RTN","LEXDFN",12,0)
 N LEXT S LEXT="" S X=$G(X) I X'="" D
"RTN","LEXDFN",13,0)
 . N LEXO,LEXC,LEXR S LEXC=$E(X,1,63),LEXO=$E(LEXC,1,($L(LEXC)-1))_$C($A($E(LEXC,$L(LEXC)))-1)_"~"
"RTN","LEXDFN",14,0)
 . F  S LEXO=$O(^LEX(757.31,"ADSP",LEXO)) Q:LEXO=""!(LEXO'[LEXC)  D  Q:LEXT'=""
"RTN","LEXDFN",15,0)
 . . S LEXR=0 F  S LEXR=$O(^LEX(757.31,"ADSP",LEXO,LEXR)) Q:+LEXR=0  D  Q:LEXT'=""
"RTN","LEXDFN",16,0)
 . . . I $G(^LEX(757.31,LEXR,1))=X S LEXT=$P($G(^LEX(757.31,LEXR,0)),"^",1)
"RTN","LEXDFN",17,0)
 S:X'=""&(LEXT="") X="User Defined Display" S:LEXT'="" X=LEXT Q X
"RTN","LEXDFN",18,0)
FILN(X) ; Filter Name
"RTN","LEXDFN",19,0)
 N LEXT S LEXT="" S X=$G(X) I X'="" D
"RTN","LEXDFN",20,0)
 . N LEXO,LEXC,LEXR S LEXC=$E(X,1,63)
"RTN","LEXDFN",21,0)
 . S LEXO=$E(LEXC,1,($L(LEXC)-1))_$C($A($E(LEXC,$L(LEXC)))-1)_"~"
"RTN","LEXDFN",22,0)
 . F  S LEXO=$O(^LEX(757.3,"AS",LEXO)) Q:LEXT'=""!(LEXO'[LEXC)  D
"RTN","LEXDFN",23,0)
 . . S LEXR=0 F  S LEXR=$O(^LEX(757.3,"AS",LEXO,LEXR)) Q:+LEXR=0!(LEXT'="")  D  Q:LEXT'=""
"RTN","LEXDFN",24,0)
 . . . S:$G(^LEX(757.3,+LEXR,1))=X LEXT=$P($G(^LEX(757.3,+LEXR,0)),"^",1)
"RTN","LEXDFN",25,0)
 S:X'=""&(LEXT="") X="User Defined Filter" S:LEXT'="" X=LEXT Q X
"RTN","LEXDFN",26,0)
GBLN(X) ; Global Name
"RTN","LEXDFN",27,0)
 S X=$G(X) Q:X="" "Unknown Global" Q:X'["^" "Unknown Global"
"RTN","LEXDFN",28,0)
 Q:X'["(" "Unknown Global" N LEXT S LEXT=$G(@(X_"0)"))
"RTN","LEXDFN",29,0)
 S LEXT=$P(LEXT,"^",1) Q:LEXT="" "Unknown Global"
"RTN","LEXDFN",30,0)
 N LEXS,LEXK,LEXI S LEXS=""
"RTN","LEXDFN",31,0)
 F LEXI=1:1:$L(LEXT," ") D
"RTN","LEXDFN",32,0)
 . S LEXK=$$UP^XLFSTR($E($P(LEXT," ",LEXI),1))_$$LOW^XLFSTR($E($P(LEXT," ",LEXI),2,$L($P(LEXT," ",LEXI))))
"RTN","LEXDFN",33,0)
 . S LEXS=LEXS_" "_LEXK
"RTN","LEXDFN",34,0)
 S:$E(LEXS,1)=" " LEXS=$E(LEXS,2,$L(LEXS))
"RTN","LEXDFN",35,0)
 S LEXT=LEXS Q:LEXT="" "Unknown Global"
"RTN","LEXDFN",36,0)
 S X=LEXT_" Global" Q X
"RTN","LEXDFN",37,0)
IDXN(X) ;
"RTN","LEXDFN",38,0)
 S X=$G(X) Q:X="" "Unknown Index" N LEXT,LEXA S LEXT="",LEXA=$E(X,2,$L(X))
"RTN","LEXDFN",39,0)
 Q:LEXA="" "Unknown Index" Q:'$D(^LEXT(757.2,"AA",LEXA)) "Unknown Index"
"RTN","LEXDFN",40,0)
 N LEXR S LEXR=$O(^LEXT(757.2,"AA",LEXA,0))
"RTN","LEXDFN",41,0)
 Q:+LEXR=0 "Unknown Index" Q:'$D(^LEXT(757.2,+LEXR)) "Unknown Index"
"RTN","LEXDFN",42,0)
 S LEXT=$P($G(^LEXT(757.2,LEXR,0)),"^",1)
"RTN","LEXDFN",43,0)
 I +LEXR=1,LEXT'="" S X="Main "_LEXT_" word index" Q X
"RTN","LEXDFN",44,0)
 I +LEXR>1,LEXT'="" S X=LEXT_" subset word index" Q X
"RTN","LEXDFN",45,0)
 Q X
"RTN","LEXDFN",46,0)
OVRN(X) ; Overwrite
"RTN","LEXDFN",47,0)
 S X=+($G(X)) Q:X=0 "Do not overwrite user defaults"
"RTN","LEXDFN",48,0)
 Q "Overwrite user defaults"
"RTN","LEXDFN",49,0)
 ;
"RTN","LEXDFN",50,0)
SCTN(X) ; Shortcuts Context
"RTN","LEXDFN",51,0)
 N LEXT,LEXA S (LEXA,LEXT)="",X=$G(X)
"RTN","LEXDFN",52,0)
 I +X>0,$D(^LEX(757.41,+X,0)) D
"RTN","LEXDFN",53,0)
 . S LEXA=$P($G(^LEX(757.41,+X,0)),"^",1) Q:LEXA=""  S LEXT=LEXA
"RTN","LEXDFN",54,0)
 S:X'=""&(LEXT="") X="Unknown Shortcut Context" S:LEXT'="" X=LEXT Q X
"RTN","LEXDFN",55,0)
 ;
"RTN","LEXDFN",56,0)
UNRN(X) ; Overwrite
"RTN","LEXDFN",57,0)
 S X=+($G(X)) Q:X=0 "Do not use unresolved narratives"
"RTN","LEXDFN",58,0)
 Q "Use unresolved narratives"
"RTN","LEXDFN",59,0)
 ;
"RTN","LEXDFN",60,0)
VOCN(X) ; Vocabulary
"RTN","LEXDFN",61,0)
 N LEXT,LEXA,LEXR S LEXR=0,LEXT="",LEXA=X,X=""
"RTN","LEXDFN",62,0)
 I +LEXA>0,$D(^LEXT(757.2,+LEXA)) D
"RTN","LEXDFN",63,0)
 . S LEXT=$P($G(^LEXT(757.2,+LEXA,0)),"^",2) S:LEXT'="" LEXA=LEXT
"RTN","LEXDFN",64,0)
 . S LEXT=$P($G(^LEXT(757.2,+LEXA,5)),"^",2) S:LEXT'="" LEXA=LEXT
"RTN","LEXDFN",65,0)
 I $D(^LEXT(757.2,"AA",LEXA)) D  Q X
"RTN","LEXDFN",66,0)
 . S LEXR=$O(^LEXT(757.2,"AA",LEXA,0)) I +LEXR=0 S X="Unknown Vocabulary" Q
"RTN","LEXDFN",67,0)
 . S X=$P($G(^LEXT(757.2,+LEXR,0)),"^",1) I X="" S X="Unknown Vocabulary" Q
"RTN","LEXDFN",68,0)
 I $D(^LEXT(757.2,"AB",LEXA)) D  Q X
"RTN","LEXDFN",69,0)
 . S LEXR=$O(^LEXT(757.2,"AB",LEXA,0)) I +LEXR=0 S X="Unknown Vocabulary" Q
"RTN","LEXDFN",70,0)
 . S LEXA=$P($G(^LEXT(757.2,+LEXR,5)),"^",2)
"RTN","LEXDFN",71,0)
 . I LEXA="" S LEXA=$P($G(^LEXT(757.2,+LEXR,0)),"^",2)
"RTN","LEXDFN",72,0)
 . I LEXA'="",$D(^LEXT(757.2,"AA",LEXA)) D
"RTN","LEXDFN",73,0)
 . . S LEXR=$O(^LEXT(757.2,"AA",LEXA,0)) I +LEXR=0 S X="Unknown Vocabulary" Q
"RTN","LEXDFN",74,0)
 . . S X=$P($G(^LEXT(757.2,+LEXR,0)),"^",1) I X="" S X="Unknown Vocabulary" Q
"RTN","LEXDFN",75,0)
 . I X="" S X="Unknown Vocabulary"
"RTN","LEXDFN",76,0)
 S:X="" X="Unknown Vocabulary" Q X
"RTN","LEXDFN2")
0^230^B10551696
"RTN","LEXDFN2",1,0)
LEXDFN2 ; ISL Default Names                        ; 09-23-96
"RTN","LEXDFN2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFN2",3,0)
 ;
"RTN","LEXDFN2",4,0)
AP(X) ; Application Pointer
"RTN","LEXDFN2",5,0)
 S X=$G(X) S X=$$NS(X) Q:X="" 1
"RTN","LEXDFN2",6,0)
 N LEXIEN,LEXNS
"RTN","LEXDFN2",7,0)
 I $L($G(X)),$D(^LEXT(757.2,"AN",X)) S X=$O(^LEXT(757.2,"AN",X,0)) Q X
"RTN","LEXDFN2",8,0)
 I $L($G(X)),$D(^LEXT(757.2,"B",X)) D  I LEXNS'="" S X=LEXIEN Q X
"RTN","LEXDFN2",9,0)
 . S LEXIEN=$O(^LEXT(757.2,"B",X,0))
"RTN","LEXDFN2",10,0)
 . S LEXNS=$P($G(^LEXT(757.2,LEXIEN,5)),"^",5)
"RTN","LEXDFN2",11,0)
 I $L($G(X)),$D(^LEXT(757.2,"C",$$UP^XLFSTR(X))) D  I LEXNS'="" S X=LEXIEN Q X
"RTN","LEXDFN2",12,0)
 . S LEXIEN=$O(^LEXT(757.2,"C",$$UP^XLFSTR(X),0))
"RTN","LEXDFN2",13,0)
 . S LEXNS=$P($G(^LEXT(757.2,LEXIEN,5)),"^",5)
"RTN","LEXDFN2",14,0)
 I $L($G(X)),$D(^LEXT(757.2,"APPS",X)) D  I LEXNS'="" S X=LEXIEN Q X
"RTN","LEXDFN2",15,0)
 . S LEXIEN=$O(^LEXT(757.2,"APPS",X,0))
"RTN","LEXDFN2",16,0)
 . S LEXNS=$P($G(^LEXT(757.2,LEXIEN,5)),"^",5)
"RTN","LEXDFN2",17,0)
 Q 1
"RTN","LEXDFN2",18,0)
NS(X) ; Namespace
"RTN","LEXDFN2",19,0)
 S X=$G(X) Q:X="" "LEX"
"RTN","LEXDFN2",20,0)
 I +X>0,$D(^LEXT(757.2,+X)) S X=$P($G(^LEXT(757.2,+X,5)),"^",5) S:X="" X="LEX" Q X
"RTN","LEXDFN2",21,0)
 I X'="",$D(^LEXT(757.2,"AA",X)) D  S:X="" X="LEX" Q X
"RTN","LEXDFN2",22,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"AA",X,0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$P($G(^LEXT(757.2,+LEXR,5)),"^",5)
"RTN","LEXDFN2",23,0)
 I X'="",$D(^LEXT(757.2,"AB",X)) D  S:X="" X="LEX" Q X
"RTN","LEXDFN2",24,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"AB",X,0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$P($G(^LEXT(757.2,+LEXR,5)),"^",5)
"RTN","LEXDFN2",25,0)
 I X'="",$D(^LEXT(757.2,"APPS",X)) D  S:X="" X="LEX" Q X
"RTN","LEXDFN2",26,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"APPS",X,0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$P($G(^LEXT(757.2,+LEXR,5)),"^",5)
"RTN","LEXDFN2",27,0)
 I X'="",$D(^LEXT(757.2,"AN",X)) D  S:X="" X="LEX" Q X
"RTN","LEXDFN2",28,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"AN",X,0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$P($G(^LEXT(757.2,+LEXR,5)),"^",5)
"RTN","LEXDFN2",29,0)
 I X'="",$D(^LEXT(757.2,"C",$$UP^XLFSTR(X))) D  S:X="" X="LEX" Q X
"RTN","LEXDFN2",30,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"C",$$UP^XLFSTR(X),0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$P($G(^LEXT(757.2,+LEXR,5)),"^",5)
"RTN","LEXDFN2",31,0)
 Q "LEX"
"RTN","LEXDFN2",32,0)
MD(X) ; Mode/Subset
"RTN","LEXDFN2",33,0)
 S X=$G(X) Q:X="" "WRD"
"RTN","LEXDFN2",34,0)
 I $D(^LEXT(757.2,"AA",X)) D  S:X="" X="WRD" Q X
"RTN","LEXDFN2",35,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"AA",X,0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$$MODE(+LEXR)
"RTN","LEXDFN2",36,0)
 I $D(^LEXT(757.2,"AB",X)) D  S:X="" X="WRD" Q X
"RTN","LEXDFN2",37,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"AB",X,0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$$MODE(+LEXR)
"RTN","LEXDFN2",38,0)
 I $D(^LEXT(757.2,"APPS",X)) D  S:X="" X="WRD" Q X
"RTN","LEXDFN2",39,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"APPS",X,0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$$MODE(+LEXR)
"RTN","LEXDFN2",40,0)
 I $D(^LEXT(757.2,"AN",X)) D  S:X="" X="WRD" Q X
"RTN","LEXDFN2",41,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"AN",X,0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$$MODE(+LEXR)
"RTN","LEXDFN2",42,0)
 I $D(^LEXT(757.2,"C",$$UP^XLFSTR(X))) D  S:X="" X="WRD" Q X
"RTN","LEXDFN2",43,0)
 . N LEXR S LEXR=$O(^LEXT(757.2,"C",$$UP^XLFSTR(X),0)) I +LEXR>0,$D(^LEXT(757.2,+LEXR,0)) S X=$$MODE(+LEXR)
"RTN","LEXDFN2",44,0)
 I +X>0,$D(^LEXT(757.2,+X)) S X=$$MODE(+X) S:X="" X="WRD" Q X
"RTN","LEXDFN2",45,0)
 Q "WRD"
"RTN","LEXDFN2",46,0)
MODE(X) ;
"RTN","LEXDFN2",47,0)
 N LEXMD S X=+($G(X)) Q:X=0 "WRD"
"RTN","LEXDFN2",48,0)
 S LEXMD=$P($G(^LEXT(757.2,X,5)),"^",1) I LEXMD'="" S X=LEXMD Q X
"RTN","LEXDFN2",49,0)
 S LEXMD=$P($G(^LEXT(757.2,X,5)),"^",2) I LEXMD'="" S X=LEXMD Q X
"RTN","LEXDFN2",50,0)
 S LEXMD=$P($G(^LEXT(757.2,X,0)),"^",2) I LEXMD'="" S X=LEXMD Q X
"RTN","LEXDFN2",51,0)
 Q "WRD"
"RTN","LEXDFSB")
0^231^B3384984
"RTN","LEXDFSB",1,0)
LEXDFSB ; ISL Default Filter - Include/Exclude     ; 09-23-96
"RTN","LEXDFSB",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFSB",3,0)
 ;
"RTN","LEXDFSB",4,0)
 ; Entry:  S X=$$EN^LEXDFSB
"RTN","LEXDFSB",5,0)
 ;
"RTN","LEXDFSB",6,0)
 ; Functions returns the Include/Exclude string for filters
"RTN","LEXDFSB",7,0)
 ; which use the semantic class and types.
"RTN","LEXDFSB",8,0)
 ;
"RTN","LEXDFSB",9,0)
 ; String format:
"RTN","LEXDFSB",10,0)
 ;
"RTN","LEXDFSB",11,0)
 ;     INC/INC/INC/INC/...ETC;EXC/EXC/EXC/EXC/...EXC
"RTN","LEXDFSB",12,0)
 ;
"RTN","LEXDFSB",13,0)
 ;     Where INC is a semantic class or type to include
"RTN","LEXDFSB",14,0)
 ;     in searches, and EXC is a semantic class or type to
"RTN","LEXDFSB",15,0)
 ;     exclude from searches
"RTN","LEXDFSB",16,0)
 ;
"RTN","LEXDFSB",17,0)
 ; LEXC     Counter
"RTN","LEXDFSB",18,0)
 ; LEXI     Include String
"RTN","LEXDFSB",19,0)
 ; LEXE     Exclude String
"RTN","LEXDFSB",20,0)
 ; LEXA     Local array containing include/exclude parameters
"RTN","LEXDFSB",21,0)
 ; LEXX     Include;Exclude string to be returned
"RTN","LEXDFSB",22,0)
 ;
"RTN","LEXDFSB",23,0)
EN(LEXX) ; Create the Semantic Type String
"RTN","LEXDFSB",24,0)
 I +$G(LEXA(0))>0 S LEXX="" D SET K LEXA Q LEXX
"RTN","LEXDFSB",25,0)
 S LEXX=$$EN^LEXDFSI K:LEXX[U LEXA
"RTN","LEXDFSB",26,0)
 I LEXX[U D  Q LEXX
"RTN","LEXDFSB",27,0)
 . S:LEXX["^^" LEXX="^^" Q:LEXX["^^"  S:LEXX[U LEXX="^No filter selected" K LEXA
"RTN","LEXDFSB",28,0)
 I $P(LEXX,U,1)="" S LEXX="^No filter selected" K LEXA Q LEXX
"RTN","LEXDFSB",29,0)
 D:+$G(LEXA(0))>0 SET
"RTN","LEXDFSB",30,0)
 K LEXA Q LEXX
"RTN","LEXDFSB",31,0)
 ;
"RTN","LEXDFSB",32,0)
SET ; Create Semantic Include and Exclude strings from the array
"RTN","LEXDFSB",33,0)
 ;
"RTN","LEXDFSB",34,0)
 Q:+($G(LEXA(0)))=0
"RTN","LEXDFSB",35,0)
 N LEXC,LEXT,LEXI,LEXE S (LEXI,LEXE)=""
"RTN","LEXDFSB",36,0)
 F LEXC=1:1:LEXA(0) D
"RTN","LEXDFSB",37,0)
 . I LEXA(LEXC,2,0)<LEXA(LEXC,1,0)!(LEXA(LEXC,2,0)=0) S LEXI=LEXI_"/"_LEXA(LEXC,0)
"RTN","LEXDFSB",38,0)
 . I LEXA(LEXC,2,0)<LEXA(LEXC,1,0)&(LEXA(LEXC,2,0)'=0) D 
"RTN","LEXDFSB",39,0)
 . . F LEXT=1:1:LEXA(LEXC,2,0) D
"RTN","LEXDFSB",40,0)
 . . . S LEXE=LEXE_"/"_LEXA(LEXC,2,LEXT,0)
"RTN","LEXDFSB",41,0)
 . I LEXA(LEXC,2,0)'<LEXA(LEXC,1,0)&(LEXA(LEXC,2,0)'=0) D 
"RTN","LEXDFSB",42,0)
 . . F LEXT=1:1:LEXA(LEXC,1,0) D
"RTN","LEXDFSB",43,0)
 . . . S LEXI=LEXI_"/"_LEXA(LEXC,1,LEXT,0)
"RTN","LEXDFSB",44,0)
 S:LEXI'["UNK" LEXI=LEXI_"/UNK" S:$E(LEXI,1)="/" LEXI=$E(LEXI,2,$L(LEXI))
"RTN","LEXDFSB",45,0)
 S:$E(LEXE,1)="/" LEXE=$E(LEXE,2,$L(LEXE)) S LEXX=LEXI_";"_LEXE
"RTN","LEXDFSB",46,0)
 K LEXA Q
"RTN","LEXDFSE")
0^232^B11756941
"RTN","LEXDFSE",1,0)
LEXDFSE ; ISL Default Filter - Exclude Semantics   ; 09-23-96
"RTN","LEXDFSE",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFSE",3,0)
 ;
"RTN","LEXDFSE",4,0)
 ; Called from LEXDFSI (set the EXCLUDE string)
"RTN","LEXDFSE",5,0)
 ;
"RTN","LEXDFSE",6,0)
 ; LEXC      Counter
"RTN","LEXDFSE",7,0)
 ; LEXCCOK   Semantic Class OK (Y/N)
"RTN","LEXDFSE",8,0)
 ; LEXCCR    Semantic Class Pointer in # 757.11
"RTN","LEXDFSE",9,0)
 ; LEXCLS    Semantic Class
"RTN","LEXDFSE",10,0)
 ; LEXCMN    Semantic Class Mnemonic
"RTN","LEXDFSE",11,0)
 ; LEXCT     Semantic Type Mnemonic (IEN)
"RTN","LEXDFSE",12,0)
 ; LEXCTN    Semantic Type Counter
"RTN","LEXDFSE",13,0)
 ; LEXCTOK   Semantic Type OK (Y/N)
"RTN","LEXDFSE",14,0)
 ; LEXCTR    Semantic Type Pointer in # 757.12
"RTN","LEXDFSE",15,0)
 ; LEXF      Flag for user input
"RTN","LEXDFSE",16,0)
 ; LEXI      Incremental counter
"RTN","LEXDFSE",17,0)
 ; LEXLST    Array (list) of examples
"RTN","LEXDFSE",18,0)
 ; LEXMC     Pointer to Major Concept in # 757
"RTN","LEXDFSE",19,0)
 ; LEXS      Semantic Type Sources from #757.03
"RTN","LEXDFSE",20,0)
 ; LEXSPL    Sample Term of a Semantic Type
"RTN","LEXDFSE",21,0)
 ; LEXX      String returned to LEXDSTI
"RTN","LEXDFSE",22,0)
 ;
"RTN","LEXDFSE",23,0)
EN(LEXCCR) ; Exclude types
"RTN","LEXDFSE",24,0)
 N LEXF S LEXF=1 D TYPES(LEXCCR) Q
"RTN","LEXDFSE",25,0)
TYPES(LEXCCR) ; Semantic Types
"RTN","LEXDFSE",26,0)
 N LEXCTOK,LEXCT,LEXCTR,LEXCTN,LEXCMN,LEXCLS
"RTN","LEXDFSE",27,0)
 S LEXCTOK="",LEXCT=0,LEXCMN=$$MNEMONIC(LEXCCR)
"RTN","LEXDFSE",28,0)
 F  S (LEXCT,LEXCTR)=$O(^LEX(757.12,"C",LEXCMN,LEXCT)) Q:+LEXCT=0!(LEXCTOK[U)  D  Q:LEXCTOK[U
"RTN","LEXDFSE",29,0)
 . Q:'$D(^LEX(757.12,LEXCTR,1,"B"))
"RTN","LEXDFSE",30,0)
 . Q:'$D(^LEX(757.12,LEXCTR,0))  S LEXCTN=$S('$D(LEXCTN):1,1:LEXCTN+1)
"RTN","LEXDFSE",31,0)
 . W !!,"Semantic Type:  ",$P(^LEX(757.12,LEXCTR,0),U,2)
"RTN","LEXDFSE",32,0)
 . D STYPE(LEXCTR),EXAMPLE(LEXCTR) D:+($G(LEXF)) EXCLUDE
"RTN","LEXDFSE",33,0)
 Q
"RTN","LEXDFSE",34,0)
STYPE(LEXCTR) ; Sources of Semantic Type
"RTN","LEXDFSE",35,0)
 I '$D(^LEX(757.12,LEXCTR,1,"B")) D  Q
"RTN","LEXDFSE",36,0)
 . W !!,?5,"There are no terms with this Semantic Type in "
"RTN","LEXDFSE",37,0)
 . W "the Lexicon"
"RTN","LEXDFSE",38,0)
 W !!,?5,"This Semantic Type contains terms from, or mapped to,"
"RTN","LEXDFSE",39,0)
 W !,?5,"the following classification systems:  ",!
"RTN","LEXDFSE",40,0)
 N LEXS,LEXC S LEXS="",LEXC=0
"RTN","LEXDFSE",41,0)
 F  S LEXS=$O(^LEX(757.12,LEXCTR,1,"B",LEXS)) Q:LEXS=""  D
"RTN","LEXDFSE",42,0)
 . S LEXC=LEXC+1 W:LEXC=1 !,?9,LEXS W:LEXC=2 ?33,LEXS
"RTN","LEXDFSE",43,0)
 . W:LEXC=3 ?57,LEXS S:LEXC=3 LEXC=0
"RTN","LEXDFSE",44,0)
 Q
"RTN","LEXDFSE",45,0)
EXAMPLE(LEXX) ; List examples
"RTN","LEXDFSE",46,0)
 W !!,?5,"Examples of Semantic Type:   ",$$NAME(LEXX),!
"RTN","LEXDFSE",47,0)
 I '$D(^LEX(757.1,"ASTT",LEXX)) D  Q
"RTN","LEXDFSE",48,0)
 . W !,?8,"No examples found"
"RTN","LEXDFSE",49,0)
 N LEXI,LEXSPL,LEXMC,LEXC S LEXMC="",LEXC=0
"RTN","LEXDFSE",50,0)
 F LEXI=1:1:10 D  Q:+LEXC>2
"RTN","LEXDFSE",51,0)
 . S LEXMC=$O(^LEX(757.1,"ASTT",LEXX,LEXMC)) Q:+LEXMC'>0
"RTN","LEXDFSE",52,0)
 . S LEXSPL=$$SAMPLE(LEXMC)
"RTN","LEXDFSE",53,0)
 . I '$D(LEXLST($$UP^XLFSTR(LEXSPL))) D
"RTN","LEXDFSE",54,0)
 . . S LEXC=LEXC+1 W !,?5,$J(LEXC,2),": ",LEXSPL
"RTN","LEXDFSE",55,0)
 . S LEXLST($$UP^XLFSTR(LEXSPL))=""
"RTN","LEXDFSE",56,0)
 K LEXLST
"RTN","LEXDFSE",57,0)
 Q
"RTN","LEXDFSE",58,0)
MNEMONIC(LEXX) ; Semantic Class Mnemonic
"RTN","LEXDFSE",59,0)
 Q $P(^LEX(757.11,LEXX,0),U,1)
"RTN","LEXDFSE",60,0)
CLSNAME(LEXX) ; Semantic Class Name
"RTN","LEXDFSE",61,0)
 Q $P(^LEX(757.11,LEXX,0),U,2)
"RTN","LEXDFSE",62,0)
NAME(LEXX) ; Semantic Type Name
"RTN","LEXDFSE",63,0)
 Q $P($G(^LEX(757.12,LEXX,0)),"^",2)
"RTN","LEXDFSE",64,0)
SAMPLE(LEXX) ; Sample term of a Semantic Type
"RTN","LEXDFSE",65,0)
 N LEXS S LEXS=$E(^LEX(757.01,+(^LEX(757,LEXX,0)),0),1,70)
"RTN","LEXDFSE",66,0)
 S:LEXS[" (" LEXS=$P(LEXS," (",1)
"RTN","LEXDFSE",67,0)
 S:LEXS[" <" LEXS=$P(LEXS," <",1)
"RTN","LEXDFSE",68,0)
 S LEXX=LEXS Q LEXX
"RTN","LEXDFSE",69,0)
EXCLUDE ; Exclude Semantic Type?  (Y/N)
"RTN","LEXDFSE",70,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT W !
"RTN","LEXDFSE",71,0)
 S DIR("A")="Exclude this type:  "
"RTN","LEXDFSE",72,0)
 S DIR("B")="NO",(DIR("?"),DIR("??"))="^D EXH^LEXDFSE"
"RTN","LEXDFSE",73,0)
 S DIR(0)="YAO" D ^DIR K DIR S:Y["^" LEXCTOK=U
"RTN","LEXDFSE",74,0)
 S:Y["^^" (LEXCCOK,LEXCTOK)="^^" Q:Y["^^"  Q:LEXCTOK[U
"RTN","LEXDFSE",75,0)
 D:+Y>0 REM D:+Y'>0 SAV Q
"RTN","LEXDFSE",76,0)
EXH ; Exclude help
"RTN","LEXDFSE",77,0)
 W !!,?4,"Include semantic class:       "
"RTN","LEXDFSE",78,0)
 W $$MNEMONIC(LEXCCR)," - ",$$CLSNAME(LEXCCR)
"RTN","LEXDFSE",79,0)
 W !,?4,"Excluding the semantic type:  ",$$NAME(LEXCTR) Q
"RTN","LEXDFSE",80,0)
REM ; Remove Semantic Type from the list (excluded)
"RTN","LEXDFSE",81,0)
 Q:+($G(LEXA(0)))=0  S LEXCTOK=0
"RTN","LEXDFSE",82,0)
 N LEXC S LEXC=+($G(LEXA(0)))
"RTN","LEXDFSE",83,0)
 S LEXA(LEXC,2,0)=$S('$D(LEXA(LEXC,2,0)):1,1:LEXA(LEXC,2,0)+1)
"RTN","LEXDFSE",84,0)
 S LEXA(LEXC,2,LEXA(LEXC,2,0),0)=LEXCTR Q
"RTN","LEXDFSE",85,0)
SAV ; Save the Semantic Type (included)
"RTN","LEXDFSE",86,0)
 Q:+($G(LEXA(0)))=0  S LEXCTOK=1 D 
"RTN","LEXDFSE",87,0)
 N LEXC S LEXC=+($G(LEXA(0)))
"RTN","LEXDFSE",88,0)
 S LEXA(LEXC,1,0)=$S('$D(LEXA(LEXC,1,0)):1,1:LEXA(LEXC,1,0)+1)
"RTN","LEXDFSE",89,0)
 S LEXA(LEXC,1,LEXA(LEXC,1,0),0)=LEXCTR Q
"RTN","LEXDFSI")
0^233^B9333756
"RTN","LEXDFSI",1,0)
LEXDFSI ; ISL Default Filter - Include Semantics   ; 09-23-96
"RTN","LEXDFSI",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFSI",3,0)
 ;
"RTN","LEXDFSI",4,0)
 ;
"RTN","LEXDFSI",5,0)
 ; Called from LEXDFSB (set the INCLUDE/EXCLUDE string)
"RTN","LEXDFSI",6,0)
 ;
"RTN","LEXDFSI",7,0)
 ; LEXC      Counter
"RTN","LEXDFSI",8,0)
 ; LEXCC     Semantic Class Mnemonic
"RTN","LEXDFSI",9,0)
 ; LEXCCN    Semantic Class Counter
"RTN","LEXDFSI",10,0)
 ; LEXCCOK   Semantic Class OK (Y/N)
"RTN","LEXDFSI",11,0)
 ; LEXCCR    Semantic Class Pointer in #757.11
"RTN","LEXDFSI",12,0)
 ; LEXF      Flag for user input
"RTN","LEXDFSI",13,0)
 ; LEXS      Semantic Type Sources from #757.03
"RTN","LEXDFSI",14,0)
 ; LEXX      String returned to LEXDSTS
"RTN","LEXDFSI",15,0)
 ;
"RTN","LEXDFSI",16,0)
EN(LEXX) ; Semantic Type string INCLUDE/EXCLUDE
"RTN","LEXDFSI",17,0)
 K LEXA N LEXF S LEXX="",LEXF=1
"RTN","LEXDFSI",18,0)
 D CLASS Q LEXX
"RTN","LEXDFSI",19,0)
 ;
"RTN","LEXDFSI",20,0)
CLASS ; Semantic Classes
"RTN","LEXDFSI",21,0)
 N LEXCCOK,LEXCC,LEXCCR,LEXCCN S (LEXCCOK,LEXCC)=""
"RTN","LEXDFSI",22,0)
 F  S LEXCC=$O(^LEX(757.11,"B",LEXCC)) Q:LEXCC=""!(LEXCCOK[U)  D
"RTN","LEXDFSI",23,0)
 . S LEXCCOK=0 I LEXCC'="UNK" D  Q:LEXCCOK[U
"RTN","LEXDFSI",24,0)
 . . S LEXCCR=$$IEN(LEXCC),LEXCCN=+($G(LEXCCN))+1
"RTN","LEXDFSI",25,0)
 . . W !!,$J(LEXCCN,2),": ",$$CC(LEXCCR),"   ",$$NAME(LEXCCR),!
"RTN","LEXDFSI",26,0)
 . . D SY(LEXCCR),CAT(LEXCCR)
"RTN","LEXDFSI",27,0)
 . . D:+($G(LEXF)) INCLUDE I LEXCCOK D SAVE(LEXCCR)
"RTN","LEXDFSI",28,0)
 . Q:LEXCCOK["^"  I LEXCCOK D EXCLUDE
"RTN","LEXDFSI",29,0)
 I +($G(LEXF))>0 S LEXX=LEXCCOK
"RTN","LEXDFSI",30,0)
 Q
"RTN","LEXDFSI",31,0)
 ;
"RTN","LEXDFSI",32,0)
SY(LEXX) ; List Classification Systems
"RTN","LEXDFSI",33,0)
 N LEXS,LEXC Q:'$D(^LEX(757.11,LEXX,2,"B"))  S LEXS="",LEXC=0
"RTN","LEXDFSI",34,0)
 W !!,?4,"This Semantic Class contains terms from, or mapped to,"
"RTN","LEXDFSI",35,0)
 W !,?4,"the following classification systems:  ",!
"RTN","LEXDFSI",36,0)
 F  S LEXS=$O(^LEX(757.11,LEXX,2,"B",LEXS)) Q:LEXS=""  D
"RTN","LEXDFSI",37,0)
 . S LEXC=LEXC+1 W:LEXC=1 ! W:LEXC=1 ?8,LEXS
"RTN","LEXDFSI",38,0)
 . W:LEXC=2 ?32,LEXS W:LEXC=3 ?56,LEXS S:LEXC=3 LEXC=0
"RTN","LEXDFSI",39,0)
 W ! Q
"RTN","LEXDFSI",40,0)
CAT(LEXX) ; List semantic types
"RTN","LEXDFSI",41,0)
 N LEXC S LEXC=0 Q:'$D(^LEX(757.11,LEXX,1,0))
"RTN","LEXDFSI",42,0)
 W !!,?4,"Semantic Types:  ",!
"RTN","LEXDFSI",43,0)
 F  S LEXC=$O(^LEX(757.11,LEXX,1,LEXC)) Q:+LEXC=0  D
"RTN","LEXDFSI",44,0)
 . W !,?4,^LEX(757.11,LEXX,1,LEXC,0)
"RTN","LEXDFSI",45,0)
 Q
"RTN","LEXDFSI",46,0)
CC(LEXX) ; Semantic Class Mnemonic
"RTN","LEXDFSI",47,0)
 Q $P(^LEX(757.11,LEXX,0),U,1)
"RTN","LEXDFSI",48,0)
NAME(LEXX) ; Semantic Class Name
"RTN","LEXDFSI",49,0)
 Q $P(^LEX(757.11,LEXX,0),U,2)
"RTN","LEXDFSI",50,0)
IEN(LEXX) ; Internal Entry number based on Semantic Class
"RTN","LEXDFSI",51,0)
 S LEXX=$O(^LEX(757.11,"B",LEXX,0)) Q LEXX
"RTN","LEXDFSI",52,0)
 ;
"RTN","LEXDFSI",53,0)
INCLUDE ; Include a Semantic Classes
"RTN","LEXDFSI",54,0)
 W ! N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","LEXDFSI",55,0)
 S DIR("A")="Include this class:  "
"RTN","LEXDFSI",56,0)
 S (DIR("??"),DIR("?"))="^D INH^LEXDFSI"
"RTN","LEXDFSI",57,0)
 S DIR("B")="YES",DIR(0)="YAO"
"RTN","LEXDFSI",58,0)
 D ^DIR K DIR S LEXCCOK=Y Q
"RTN","LEXDFSI",59,0)
 ;
"RTN","LEXDFSI",60,0)
INH ; Include help
"RTN","LEXDFSI",61,0)
 W !!,"    Semantic Class:  "
"RTN","LEXDFSI",62,0)
 W $$CC(LEXCCR)," - ",$$NAME(LEXCCR) Q
"RTN","LEXDFSI",63,0)
 ;
"RTN","LEXDFSI",64,0)
EXCLUDE ; Exclude Semantic Types
"RTN","LEXDFSI",65,0)
 W ! N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","LEXDFSI",66,0)
 S DIR("A",1)="Do you want to ""exclude"" any of"
"RTN","LEXDFSI",67,0)
 S DIR("A")="the semantic types listed above:  "
"RTN","LEXDFSI",68,0)
 S DIR("B")="NO",(DIR("?"),DIR("??"))="^D EXH^LEXDFSI",DIR(0)="YAO"
"RTN","LEXDFSI",69,0)
 D ^DIR K DIR S LEXCCOK=0 S:Y["^^" LEXCCOK=Y D:+Y>0 EN^LEXDFSE(LEXCCR) Q
"RTN","LEXDFSI",70,0)
EXH ; Exclude help
"RTN","LEXDFSI",71,0)
 W !!,"By including the semantical class ",$$CC(LEXCCR)
"RTN","LEXDFSI",72,0)
 W " you will also be including"
"RTN","LEXDFSI",73,0)
 W !,"all of the semantical types contained within the class." Q
"RTN","LEXDFSI",74,0)
 ;
"RTN","LEXDFSI",75,0)
SAVE(LEXX) ; Save Semantic Class
"RTN","LEXDFSI",76,0)
 Q:LEXCCOK[U  N LEXC S LEXCCOK=1,LEXC=$G(LEXA(0))+1
"RTN","LEXDFSI",77,0)
 S LEXA(0)=LEXC,LEXA(LEXC,0)=$$CC(LEXX),LEXA(LEXC,1,0)=0,LEXA(LEXC,2,0)=0 Q
"RTN","LEXDFSO")
0^234^B6471992
"RTN","LEXDFSO",1,0)
LEXDFSO ; ISL Default Filter - Sources             ; 09-23-96
"RTN","LEXDFSO",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFSO",3,0)
 ;
"RTN","LEXDFSO",4,0)
 ; Entry:  S X=$$EN^LEXDFSO
"RTN","LEXDFSO",5,0)
 ;
"RTN","LEXDFSO",6,0)
 ; LEXFIL    Filter (executable)
"RTN","LEXDFSO",7,0)
 ; LEXNAM    Filter Name
"RTN","LEXDFSO",8,0)
 ; LEXPRO    Y/N response to proceed with building filter
"RTN","LEXDFSO",9,0)
 ; LEXSTR    Filter parameters (string)
"RTN","LEXDFSO",10,0)
 ; LEXX      Filter returned
"RTN","LEXDFSO",11,0)
 ;
"RTN","LEXDFSO",12,0)
EN(LEXX) ; Entry point S X=$$EN^LEXDFSO
"RTN","LEXDFSO",13,0)
 N LEXFIL,LEXPRO S LEXFIL=0 D INTRO S LEXPRO=$$PRO
"RTN","LEXDFSO",14,0)
 Q:LEXPRO["^" LEXPRO Q:LEXPRO'=1 "^No filter selected"
"RTN","LEXDFSO",15,0)
 S LEXX=$$EN^LEXDCCC S:LEXX="^" LEXX="^^"
"RTN","LEXDFSO",16,0)
 Q:LEXX["^^" "^^"
"RTN","LEXDFSO",17,0)
 Q:$P(LEXX,"^",1)="" "^No filter selected"
"RTN","LEXDFSO",18,0)
 D:$P(LEXX,"^",1)'="" ASSEM
"RTN","LEXDFSO",19,0)
 Q LEXX
"RTN","LEXDFSO",20,0)
INTRO ; Introduction/Proceed
"RTN","LEXDFSO",21,0)
 N LEXSAB D SAB
"RTN","LEXDFSO",22,0)
 W !!,"You will be provided with ",LEXSAB," classifications systems to either include"
"RTN","LEXDFSO",23,0)
 W !,"or exclude during Lexicon look-up.  If you select a classification system"
"RTN","LEXDFSO",24,0)
 W !,"(i.e., ICD) to be included, any terms which qualify during the search and are"
"RTN","LEXDFSO",25,0)
 W !,"linked to an ""included"" classification code (example ICD code) will be "
"RTN","LEXDFSO",26,0)
 W !,"included in the selection list."
"RTN","LEXDFSO",27,0)
 Q
"RTN","LEXDFSO",28,0)
SAB N LEXI S LEXI="",LEXSAB=0
"RTN","LEXDFSO",29,0)
 F  S LEXI=$O(^LEX(757.03,"B",LEXI)) Q:LEXI=""  D
"RTN","LEXDFSO",30,0)
 . Q:'$D(^LEX(757.02,"ASRC",$E(LEXI,1,3)))
"RTN","LEXDFSO",31,0)
 . S:'$D(^TMP("LEXTSAB",$J,$E(LEXI,1,3))) ^TMP("LEXTSAB",$J,$E(LEXI,1,3))="",LEXSAB=LEXSAB+1
"RTN","LEXDFSO",32,0)
 K ^TMP("LEXTSAB",$J)
"RTN","LEXDFSO",33,0)
 Q
"RTN","LEXDFSO",34,0)
PRO(LEXX) ; OK to proceed Y/N
"RTN","LEXDFSO",35,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT W !!
"RTN","LEXDFSO",36,0)
 S DIR("A")="Do you wish to continue:  ",DIR("B")="YES"
"RTN","LEXDFSO",37,0)
 S DIR("?")="Answer Yes or No",DIR("??")="^D PROH^LEXDFSO"
"RTN","LEXDFSO",38,0)
 S DIR(0)="YAO" D ^DIR S LEXX=Y Q LEXX
"RTN","LEXDFSO",39,0)
PROH ; Proceed help
"RTN","LEXDFSO",40,0)
 W !!,?2,"Answer"
"RTN","LEXDFSO",41,0)
 W !!,?4,"Yes     Continue to build a filter based on Classification Codes"
"RTN","LEXDFSO",42,0)
 W !,?4,"No      Exit without building a filter",! Q
"RTN","LEXDFSO",43,0)
ASSEM ; Assemble the return value FILTER^NAME
"RTN","LEXDFSO",44,0)
 N LEXNAM,LEXFIL S (LEXNAM,LEXFIL)="",LEXFIL=$P(LEXX,"^",1)
"RTN","LEXDFSO",45,0)
 I $L($G(LEXFIL)) S LEXFIL="I $$SO^LEXU(Y,"_""""_LEXFIL_""""_")"
"RTN","LEXDFSO",46,0)
 I LEXFIL[U S LEXNAM=$$NAME^LEXDM3 I LEXNAM="^^" S LEXX="^^"
"RTN","LEXDFSO",47,0)
 S:LEXX["^^" LEXFIL="",LEXNAM="^" S LEXX=LEXFIL_"^"_LEXNAM Q
"RTN","LEXDFSS")
0^235^B18377628
"RTN","LEXDFSS",1,0)
LEXDFSS ; ISL Default Filter - Semantics/Sources   ; 09-23-96
"RTN","LEXDFSS",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFSS",3,0)
 ;
"RTN","LEXDFSS",4,0)
 ; Entry:  S X=$$EN^LEXDFSS
"RTN","LEXDFSS",5,0)
 ;
"RTN","LEXDFSS",6,0)
 ; LEXFIL    Filter (executable)
"RTN","LEXDFSS",7,0)
 ; LEXNAM    Filter Name
"RTN","LEXDFSS",8,0)
 ; LEXPRO    Y/N response to proceed with building filter
"RTN","LEXDFSS",9,0)
 ; LEXSTR    Filter parameters (string)
"RTN","LEXDFSS",10,0)
 ; LEXSRC    Classification system (sources) portion of filter
"RTN","LEXDFSS",11,0)
 ; LEXSTY    Semantic Class/Type portion of filter
"RTN","LEXDFSS",12,0)
 ; LEXX      Filter returned
"RTN","LEXDFSS",13,0)
 ;
"RTN","LEXDFSS",14,0)
EN(LEXX) ; Entry point S X=$$EN^LEXDFSS
"RTN","LEXDFSS",15,0)
 N LEXSTY,LEXSRC,LEXFIL,LEXPRO
"RTN","LEXDFSS",16,0)
 S (LEXSTY,LEXSRC,LEXX)="",LEXFIL=0 D INTRO S LEXPRO=$$PRO
"RTN","LEXDFSS",17,0)
 Q:LEXPRO["^" LEXPRO Q:LEXPRO'=1 "^No filter selected"
"RTN","LEXDFSS",18,0)
 S LEXSTY=$$EN^LEXDFSB Q:LEXSTY["^^" "^^"
"RTN","LEXDFSS",19,0)
 S LEXFIL=0 S LEXSRC=$$EN^LEXDCCC Q:LEXSRC["^^" "^^"
"RTN","LEXDFSS",20,0)
 Q:$P(LEXSTY,"^",1)="" "^No filter selected"
"RTN","LEXDFSS",21,0)
 S LEXSTY=$P(LEXSTY,"^",1),LEXSRC=$P(LEXSRC,"^",1)
"RTN","LEXDFSS",22,0)
 Q:'$L((LEXSTY_LEXSRC)) "^No filter selected"
"RTN","LEXDFSS",23,0)
 S LEXFIL=1 I $L(LEXSTY),'$L(LEXSRC) D
"RTN","LEXDFSS",24,0)
 . N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT W !
"RTN","LEXDFSS",25,0)
 . S DIR("A",1)="You have selected semantic classes/types to Include/Exclude in your filter"
"RTN","LEXDFSS",26,0)
 . S DIR("A",2)="but have not selected any classification coding systems to include in the"
"RTN","LEXDFSS",27,0)
 . S DIR("A",3)="filter.  Do you want to contine to build the filter based solely on the"
"RTN","LEXDFSS",28,0)
 . S DIR("A")="semantic classes/types you selected?  "
"RTN","LEXDFSS",29,0)
 . S DIR("B")="YES",DIR("?")="Answer Yes or No",DIR(0)="YAO" D ^DIR
"RTN","LEXDFSS",30,0)
 . K DIR S LEXFIL=0,LEXX="^^" S:+Y>0 LEXFIL=+Y,LEXX=""
"RTN","LEXDFSS",31,0)
 D:LEXFIL ASSEM Q LEXX
"RTN","LEXDFSS",32,0)
INTRO ; Introduction/Proceed
"RTN","LEXDFSS",33,0)
 N LEXSAB D SAB W @IOF
"RTN","LEXDFSS",34,0)
 ;W !,"FILTER BY BOTH SEMANTIC CLASSES/TYPES AND CLASSIFICATION CODES"
"RTN","LEXDFSS",35,0)
 W !!,"This search filter is in two segments.  The first segment limits the search"
"RTN","LEXDFSS",36,0)
 W !,"based on the semantical classification of the terms.  The second segment "
"RTN","LEXDFSS",37,0)
 W !,"limits the search based on classification coding systems."
"RTN","LEXDFSS",38,0)
 W !!,"First, you will be provided with ",($P(^LEX(757.11,0),U,4))-1," semantic classes.  By selecting"
"RTN","LEXDFSS",39,0)
 W !,"a semantic class, each term which is found during a search of the "
"RTN","LEXDFSS",40,0)
 W !,"Lexicon, and belongs to that class, will be displayed for your selection."
"RTN","LEXDFSS",41,0)
 W !,"Additionally, each semantic class contains semantic types (or sub-categories)"
"RTN","LEXDFSS",42,0)
 W !,"which may be excluded during the search  Terms belonging to an ""included"" "
"RTN","LEXDFSS",43,0)
 W !,"semantic class will be displayed unless they also belong to an ""excluded"" "
"RTN","LEXDFSS",44,0)
 W !,"semantic type.  This segment is mandatory (can not be null)."
"RTN","LEXDFSS",45,0)
 ;
"RTN","LEXDFSS",46,0)
 W !!,"Secondly, you will be presented with ",LEXSAB," classification systems to include."
"RTN","LEXDFSS",47,0)
 W !,"By selecting a classification system to include (i.e., ICD), any term which"
"RTN","LEXDFSS",48,0)
 W !,"is linked to a code from that system will be displayed for selection.  "
"RTN","LEXDFSS",49,0)
 W !,"Inclusion by classification code will over ride ""exclusion by sematical"
"RTN","LEXDFSS",50,0)
 W !,"class or type"".  This segment is optional (may be null)."
"RTN","LEXDFSS",51,0)
  K LEXSAB
"RTN","LEXDFSS",52,0)
 Q
"RTN","LEXDFSS",53,0)
SAB N LEXI S LEXI="",LEXSAB=0
"RTN","LEXDFSS",54,0)
 F  S LEXI=$O(^LEX(757.03,"B",LEXI)) Q:LEXI=""  D
"RTN","LEXDFSS",55,0)
 . Q:'$D(^LEX(757.02,"ASRC",$E(LEXI,1,3)))
"RTN","LEXDFSS",56,0)
 . S:'$D(^TMP("LEXTSAB",$J,$E(LEXI,1,3))) ^TMP("LEXTSAB",$J,$E(LEXI,1,3))="",LEXSAB=LEXSAB+1
"RTN","LEXDFSS",57,0)
 K ^TMP("LEXTSAB",$J)
"RTN","LEXDFSS",58,0)
 Q
"RTN","LEXDFSS",59,0)
PRO(LEXX) ; OK to proceed Y/N
"RTN","LEXDFSS",60,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT W !!
"RTN","LEXDFSS",61,0)
 S DIR("A")="Do you wish to continue:  ",DIR("B")="YES"
"RTN","LEXDFSS",62,0)
 S DIR("?")="Answer Yes or No",DIR("??")="^D PROH^LEXDFSS"
"RTN","LEXDFSS",63,0)
 S DIR(0)="YAO" D ^DIR S LEXX=Y Q LEXX
"RTN","LEXDFSS",64,0)
PROH ; Proceed help
"RTN","LEXDFSS",65,0)
 W !!,?2,"Answer"
"RTN","LEXDFSS",66,0)
 W !!,?4,"Yes     Build a filter based Semantic Types and Classification Codes"
"RTN","LEXDFSS",67,0)
 W !,?4,"No      Exit without building a filter",! Q
"RTN","LEXDFSS",68,0)
ASSEM ; Assemble the return value FILTER^NAME
"RTN","LEXDFSS",69,0)
 N LEXSTR,LEXNAM,LEXFIL S (LEXNAM,LEXFIL)=""
"RTN","LEXDFSS",70,0)
 I $L($G(LEXSTY)),$D(LEXSRC) D
"RTN","LEXDFSS",71,0)
 . S LEXSTR=LEXSTY
"RTN","LEXDFSS",72,0)
 . I $L($G(LEXSRC)),$G(LEXSRC)'[U S LEXSTR=LEXSTY_";"_LEXSRC
"RTN","LEXDFSS",73,0)
 . S LEXFIL="I $$SC^LEXU(Y,"_""""_LEXSTR_""""_")"
"RTN","LEXDFSS",74,0)
 I LEXFIL[U S LEXNAM=$$NAME^LEXDM3 I LEXNAM="^^" S LEXX="^^"
"RTN","LEXDFSS",75,0)
 S:LEXX["^^" LEXFIL="",LEXNAM="^" S LEXX=LEXFIL_"^"_LEXNAM Q
"RTN","LEXDFST")
0^236^B6173810
"RTN","LEXDFST",1,0)
LEXDFST ; ISL Default Filter - Semantic Types      ; 09-23-96
"RTN","LEXDFST",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDFST",3,0)
 ;
"RTN","LEXDFST",4,0)
 ; Entry:  S X=$$EN^LEXDFST
"RTN","LEXDFST",5,0)
 ;
"RTN","LEXDFST",6,0)
 ; LEXFIL    Filter (executable)
"RTN","LEXDFST",7,0)
 ; LEXNAM    Filter Name
"RTN","LEXDFST",8,0)
 ; LEXPRO    Y/N response to proceed with building filter
"RTN","LEXDFST",9,0)
 ; LEXSTR    Filter parameters (string)
"RTN","LEXDFST",10,0)
 ; LEXX      Filter returned
"RTN","LEXDFST",11,0)
 ;
"RTN","LEXDFST",12,0)
EN(LEXX) ; Entry point S X=$$EN^LEXDFST
"RTN","LEXDFST",13,0)
 N LEXFIL,LEXPRO S LEXFIL=0 D INTRO S LEXPRO=$$PRO
"RTN","LEXDFST",14,0)
 Q:LEXPRO["^" LEXPRO Q:LEXPRO'=1 "^No filter selected"
"RTN","LEXDFST",15,0)
 S LEXX=$$EN^LEXDFSB Q:LEXX["^^" "^^"
"RTN","LEXDFST",16,0)
 Q:$P(LEXX,"^",1)="" "^No filter selected"
"RTN","LEXDFST",17,0)
 D:$P(LEXX,"^",1)'="" ASSEM
"RTN","LEXDFST",18,0)
 Q LEXX
"RTN","LEXDFST",19,0)
INTRO ; Introduction/Proceed
"RTN","LEXDFST",20,0)
 W @IOF
"RTN","LEXDFST",21,0)
 W !!,"You will be provided with ",($P(^LEX(757.11,0),U,4))-1," semantic classes.  By selecting a semantic"
"RTN","LEXDFST",22,0)
 W !,"class, each term which is found during a search of the Lexicon, and belongs"
"RTN","LEXDFST",23,0)
 W !,"to that class will be displayed for your selection.  Additionally, each"
"RTN","LEXDFST",24,0)
 W !,"semantic class contains semantic types (or sub-category) which may be excluded"
"RTN","LEXDFST",25,0)
 W !,"during the search.  Terms belonging to an ""included"" semantic class will be"
"RTN","LEXDFST",26,0)
 W !,"displayed unless they also belong to an ""excluded"" semantic type."
"RTN","LEXDFST",27,0)
 Q
"RTN","LEXDFST",28,0)
PRO(LEXX) ; OK to proceed Y/N
"RTN","LEXDFST",29,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT W !!
"RTN","LEXDFST",30,0)
 S DIR("A")="Do you wish to continue:  ",DIR("B")="YES"
"RTN","LEXDFST",31,0)
 S DIR("?")="Answer Yes or No",DIR("??")="^D PROH^LEXDFST"
"RTN","LEXDFST",32,0)
 S DIR(0)="YAO" D ^DIR S LEXX=Y Q LEXX
"RTN","LEXDFST",33,0)
PROH ; Proceed help
"RTN","LEXDFST",34,0)
 W !!,?2,"Answer"
"RTN","LEXDFST",35,0)
 W !!,?4,"Yes     Continue to build a filter based on Semantic Types"
"RTN","LEXDFST",36,0)
 W !,?4,"No      Exit without building a filter",! Q
"RTN","LEXDFST",37,0)
ASSEM ; Assemble the return value FILTER^NAME
"RTN","LEXDFST",38,0)
 N LEXNAM,LEXFIL S (LEXNAM,LEXFIL)="",LEXFIL=$P(LEXX,"^",1)
"RTN","LEXDFST",39,0)
 I $L($G(LEXFIL)) S LEXFIL="I $$SC^LEXU(Y,"_""""_LEXFIL_""""_")"
"RTN","LEXDFST",40,0)
 I LEXFIL[U S LEXNAM=$$NAME^LEXDM3 I LEXNAM="^^" S LEXX="^^"
"RTN","LEXDFST",41,0)
 S:LEXX["^^" LEXFIL="",LEXNAM="^" S LEXX=LEXFIL_"^"_LEXNAM Q
"RTN","LEXDM")
0^237^B14239136
"RTN","LEXDM",1,0)
LEXDM ; ISL Default Misc - Mod/Del Sel/Create    ; 09-23-96
"RTN","LEXDM",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDM",3,0)
 ;
"RTN","LEXDM",4,0)
 ; Entry:  S X=$$MOD^LEXDM(X)
"RTN","LEXDM",5,0)
 ; Input   X  1=Filter, 2=Display, 3=Vocabulary or 4=Context
"RTN","LEXDM",6,0)
 ; Returns  "^^" Double up-arrow, 0 no action taken, 1 Modify
"RTN","LEXDM",7,0)
 ;          default entry or "@" delete default entry
"RTN","LEXDM",8,0)
 ;
"RTN","LEXDM",9,0)
MOD(LEXX) ; Modify or Delete
"RTN","LEXDM",10,0)
 ;
"RTN","LEXDM",11,0)
 S LEXX=+($G(LEXX)) Q:LEXX<0 0 S LEXX=LEXX\1  Q:LEXX>4 0
"RTN","LEXDM",12,0)
 N DIR,X,Y,DIRUT,DTOUT,DUOUT,DIROUT
"RTN","LEXDM",13,0)
 S:LEXX=1 DIR("A",1)="search filter" S:LEXX=2 DIR("A",1)="display format"
"RTN","LEXDM",14,0)
 S:LEXX=3 DIR("A",1)="vocabulary" S:LEXX=4 DIR("A",1)="shortcut context"
"RTN","LEXDM",15,0)
 S:$L($G(DIR("A",1))) DIR("A",1)="User default "_DIR("A",1)
"RTN","LEXDM",16,0)
 S DIR("A",3)="  1  Modify",DIR("A",4)="  2  Delete"
"RTN","LEXDM",17,0)
 S (DIR("A",2),DIR("A",5))="  "
"RTN","LEXDM",18,0)
 S:LEXX=1 DIR(0)="SAO^1:Modify Default Filter;2:Delete Default Filter"
"RTN","LEXDM",19,0)
 S:LEXX=2 DIR(0)="SAO^1:Modify Default Display;2:Delete Default Display"
"RTN","LEXDM",20,0)
 S:LEXX=3 DIR(0)="SAO^1:Modify Default Vocabulary;2:Delete Default Vocabulary"
"RTN","LEXDM",21,0)
 S:LEXX=4 DIR(0)="SAO^1:Modify Default Shortcut Context;2:Delete Default Shortcut Context"
"RTN","LEXDM",22,0)
 S DIR("A")="Select:  ",DIR("B")="1"
"RTN","LEXDM",23,0)
 D ^DIR S LEXX=$S(X=1:1,X=2:"@",X="@":"@",1:0) S:Y="^^" LEXX=Y Q LEXX
"RTN","LEXDM",24,0)
 ;
"RTN","LEXDM",25,0)
 ;-----------------------------------------------------------------
"RTN","LEXDM",26,0)
 ; Entry:  S X=$$MTH^LEXDM(X)
"RTN","LEXDM",27,0)
 ; Input   X  1=Filter, 2=Display
"RTN","LEXDM",28,0)
 ; Returns "^^" Timeout or Double-uparrow, "^" Method not
"RTN","LEXDM",29,0)
 ;         selected, 1 Select default from a predefined list
"RTN","LEXDM",30,0)
 ;         or 2 Create a user defined default
"RTN","LEXDM",31,0)
 ;
"RTN","LEXDM",32,0)
 ; LEXM   Method of building string
"RTN","LEXDM",33,0)
 ; LEXF   Flag, indicates the default type
"RTN","LEXDM",34,0)
 ;
"RTN","LEXDM",35,0)
MTH(LEXX) ; Method - Select a predefined or Create new
"RTN","LEXDM",36,0)
 Q:'$L($G(LEXX)) "" Q:+LEXX'>0 "" Q:+LEXX'<3 ""
"RTN","LEXDM",37,0)
 N LEXF,LEXM S LEXF=+LEXX,LEXM=$$METH W:+LEXM=1!(+LEXM=2) !!
"RTN","LEXDM",38,0)
 S LEXX=LEXM S:"12"[LEXM LEXX=LEXM
"RTN","LEXDM",39,0)
 S:'$L($G(LEXM))!(LEXM="^") LEXX="^" S:LEXM="^^" LEXX="^^"
"RTN","LEXDM",40,0)
 Q LEXX
"RTN","LEXDM",41,0)
METH(LEXX) ; Select method
"RTN","LEXDM",42,0)
 N DIR,X,Y,DIRUT,DTOUT,DUOUT,DIROUT
"RTN","LEXDM",43,0)
 I +LEXF=1 D
"RTN","LEXDM",44,0)
 . S DIR("A",1)="Search filters (screens) to limit the response"
"RTN","LEXDM",45,0)
 . S DIR("A",3)="  1  Select from predefined filters"
"RTN","LEXDM",46,0)
 . S DIR("A",4)="  2  Create your own filter"
"RTN","LEXDM",47,0)
 . S DIR("??")="^D HF^LEXDM"
"RTN","LEXDM",48,0)
 I +LEXF=2 D
"RTN","LEXDM",49,0)
 . S DIR("A",1)="Display format to used during look-up"
"RTN","LEXDM",50,0)
 . S DIR("A",3)="  1  Select from predefined display formats"
"RTN","LEXDM",51,0)
 . S DIR("A",4)="  2  Create your own display format"
"RTN","LEXDM",52,0)
 . S DIR("??")="^D HD^LEXDM"
"RTN","LEXDM",53,0)
 S (DIR("A",2),DIR("A",5))="  "
"RTN","LEXDM",54,0)
 S DIR(0)="SAO^1:Predefined Set;2:Create your own set"
"RTN","LEXDM",55,0)
 S DIR("A")="Select:  ",DIR("B")="1"
"RTN","LEXDM",56,0)
 D ^DIR S LEXX=$S(+Y>0:+Y,1:Y) S:$D(DTOUT) LEXX="^^" Q LEXX
"RTN","LEXDM",57,0)
HF ; Help for filters - DIC("S")
"RTN","LEXDM",58,0)
 W !!,"When conducting searches in the Lexicon, you may find that many of the"
"RTN","LEXDM",59,0)
 W !,"expressions found are not reasonable in the context of intended use."
"RTN","LEXDM",60,0)
 W !,"Many of these ""unreasonable"" expressions can be filtered out during the"
"RTN","LEXDM",61,0)
 W !,"search, providing a much smaller and more meaningful list of expressions"
"RTN","LEXDM",62,0)
 W !,"to select from.  Several of these filters have been predefined and made "
"RTN","LEXDM",63,0)
 W !,"available.  You may select from this list of predefined filters or create"
"RTN","LEXDM",64,0)
 W !,"your own." Q
"RTN","LEXDM",65,0)
HD ; Help for display - LEXSHOW
"RTN","LEXDM",66,0)
 W !!,"When conducting searches in the Lexicon, you may alter the display format"
"RTN","LEXDM",67,0)
 W !,"of the selection list.  There are several commonly used displays which"
"RTN","LEXDM",68,0)
 W !,"have been predefined and made available.  You may select from this list or"
"RTN","LEXDM",69,0)
 W !,"create your own." Q
"RTN","LEXDM2")
0^238^B12707166
"RTN","LEXDM2",1,0)
LEXDM2 ; ISL Default Misc - Ask to delete         ; 09-23-96
"RTN","LEXDM2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDM2",3,0)
 ;
"RTN","LEXDM2",4,0)
 ; Entry:  S X=$$EN^LEXDM2(USER,AP,DEF)
"RTN","LEXDM2",5,0)
 ;
"RTN","LEXDM2",6,0)
 ; Input   
"RTN","LEXDM2",7,0)
 ;         USER    DUZ
"RTN","LEXDM2",8,0)
 ;         AP      Application
"RTN","LEXDM2",9,0)
 ;         DEF     Default (1 thru 4)
"RTN","LEXDM2",10,0)
 ;
"RTN","LEXDM2",11,0)
 ; Returns
"RTN","LEXDM2",12,0)
 ;         0       Do not Delete default
"RTN","LEXDM2",13,0)
 ;         1       Delete default
"RTN","LEXDM2",14,0)
 ;
"RTN","LEXDM2",15,0)
EN(LEXUSER,LEXAP,LEXDEF) ;
"RTN","LEXDM2",16,0)
 ; A few good reasons to quit
"RTN","LEXDM2",17,0)
 Q:+($G(LEXUSER))=0 0  Q:'$D(^VA(200,+($G(LEXUSER)))) 0
"RTN","LEXDM2",18,0)
 Q:+($G(LEXAP))=0 0  Q:'$D(^LEXT(757.2,+($G(LEXAP)))) 0
"RTN","LEXDM2",19,0)
 Q:+($P($G(^LEXT(757.2,+LEXAP,5)),"^",3))'>0 0
"RTN","LEXDM2",20,0)
 Q:+($G(LEXDEF))<1!(+($G(LEXDEF))>4) 0
"RTN","LEXDM2",21,0)
 ; Check for default
"RTN","LEXDM2",22,0)
 N LEXOV,LEXN S LEXN=""
"RTN","LEXDM2",23,0)
 S LEXOV=$G(^LEXT(757.2,LEXAP,200,LEXUSER,LEXDEF))
"RTN","LEXDM2",24,0)
 S LEXN=$G(^LEXT(757.2,LEXAP,200,LEXUSER,(LEXDEF+.5)))
"RTN","LEXDM2",25,0)
 Q:LEXOV="" 0 D:$L(LEXOV) ASK Q LEXDEF
"RTN","LEXDM2",26,0)
 ;
"RTN","LEXDM2",27,0)
ASK ; Ask to delete
"RTN","LEXDM2",28,0)
 W ! N LEXYPE,DIR,DTOUT,DUOUT,DIRUT,DIROUT,X,Y S LEXYPE=$S(LEXDEF=1:"filter",LEXDEF=2:"display",LEXDEF=3:"vocabulary",1:"shortcut context")
"RTN","LEXDM2",29,0)
 I LEXN="" S:LEXDEF=1 LEXN=$$N1(LEXOV) S:LEXDEF=2 LEXN=$$N2(LEXOV) S:LEXDEF=3 LEXN=$$N3(LEXOV) S:LEXDEF=4 LEXN=$$N4(LEXOV)
"RTN","LEXDM2",30,0)
 S DIR("A",1)="You did not select"_$S(LEXDEF=1:"/create",LEXDEF=2:"/create",1:"")_" a default "_$$UP^XLFSTR(LEXYPE)_", however you already"
"RTN","LEXDM2",31,0)
 S DIR("A",2)="have a default "_$$UP^XLFSTR(LEXYPE)_" on file.  Did you want to delete"
"RTN","LEXDM2",32,0)
 S DIR("A",3)="your current default?",DIR("A",4)="",DIR("A",5)="   "_LEXN,DIR("A",6)=""
"RTN","LEXDM2",33,0)
 S DIR("A")="Delete?  ",DIR("B")="NO",DIR(0)="YAO" D ^DIR K DIR S LEXDEF=+Y Q
"RTN","LEXDM2",34,0)
 ;
"RTN","LEXDM2",35,0)
 ; Get default names (N1, N2, N3, and N4)
"RTN","LEXDM2",36,0)
 ;
"RTN","LEXDM2",37,0)
 ;   Input   LEXX - The actual value for the default
"RTN","LEXDM2",38,0)
 ;   Returns LEXX - The name of the default value
"RTN","LEXDM2",39,0)
 ;
"RTN","LEXDM2",40,0)
N1(LEXX) ; Filter name
"RTN","LEXDM2",41,0)
 Q:'$L($G(LEXX)) "Unknown filter"
"RTN","LEXDM2",42,0)
 N LEXSS,LEXN,LEXSO,LEXI,LEXSP S LEXN="",LEXSP=0,LEXSS=$E(LEXX,1,63)
"RTN","LEXDM2",43,0)
 S LEXSO=$E(LEXSS,1,($L(LEXSS)-1))_$C($A($E(LEXSS,$L(LEXSS)))-1)_"~"
"RTN","LEXDM2",44,0)
 F  S LEXSO=$O(^LEX(757.3,"AS",LEXSO)) Q:+LEXSP!(LEXSO'[LEXSS)  D
"RTN","LEXDM2",45,0)
 . S LEXI=0 F  S LEXI=$O(^LEX(757.3,"AS",LEXSO,LEXI)) Q:+LEXI=0!(+LEXSP'=0)  D
"RTN","LEXDM2",46,0)
 . . S:$G(^LEX(757.3,+LEXI,1))=LEXX LEXSP=LEXI
"RTN","LEXDM2",47,0)
 . . S:+LEXSP>0 LEXN=$P($G(^LEX(757.3,+LEXSP,0)),"^",1)
"RTN","LEXDM2",48,0)
 S LEXX=$S($L(LEXN):LEXN,1:"User defined") Q LEXX
"RTN","LEXDM2",49,0)
N2(LEXX) ; Display name
"RTN","LEXDM2",50,0)
 Q:'$L($G(LEXX)) "Unknown display"
"RTN","LEXDM2",51,0)
 N LEXDP,LEXDS,LEXN S LEXDP=0,LEXN="",LEXDS=$E(LEXX,1,63)
"RTN","LEXDM2",52,0)
 S LEXDS=$E(LEXDS,1,($L(LEXDS)-1))_$C($A($E(LEXDS,1,$L(LEXDS)))-1)_"~"
"RTN","LEXDM2",53,0)
 F  S LEXDS=$O(^LEX(757.31,"ADSP",LEXDS)) Q:LEXDS'[LEXX!($L($G(LEXN)))  D
"RTN","LEXDM2",54,0)
 . S LEXDP=0 F  S LEXDP=$O(^LEX(757.31,"ADSP",LEXDS,LEXDP)) Q:+LEXDP=0!($L($G(LEXN)))  D
"RTN","LEXDM2",55,0)
 . . I ^LEX(757.31,+LEXDP,1)=LEXX S LEXN=$P(^LEX(757.31,+LEXDP,0),"^",1)
"RTN","LEXDM2",56,0)
 S LEXX=$S($L(LEXN):LEXN,1:"User defined") Q LEXX
"RTN","LEXDM2",57,0)
N3(LEXX) ; Vocabulary name
"RTN","LEXDM2",58,0)
 Q:'$L($G(LEXX)) "Unknown vocabulary"
"RTN","LEXDM2",59,0)
 Q:'$D(^LEXT(757.2,"AA",LEXX)) "Unknown vocabulary"
"RTN","LEXDM2",60,0)
 N LEXN S LEXN=$P($G(^LEXT(757.2,$O(^LEXT(757.2,"AA",LEXX,0)),0)),"^",1)
"RTN","LEXDM2",61,0)
 S LEXX=$S($L(LEXN):LEXN,1:"Unknown vocabulary") Q LEXX
"RTN","LEXDM2",62,0)
N4(LEXX) ; Context name
"RTN","LEXDM2",63,0)
 Q:'$L($G(LEXX)) "Unknown context" Q:+LEXX=0 "Unknown context"
"RTN","LEXDM2",64,0)
 Q:'$D(^LEX(757.41,LEXX)) "Unknown context" N LEXN S LEXN=$P($G(^LEX(757.41,+LEXX,0)),"^",1)
"RTN","LEXDM2",65,0)
 S LEXX=$S($L(LEXN):LEXN,1:"Unknown context") Q LEXX
"RTN","LEXDM3")
0^239^B2911195
"RTN","LEXDM3",1,0)
LEXDM3 ; ISL Default Misc - Name Default          ; 09-23-96
"RTN","LEXDM3",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDM3",3,0)
 ;
"RTN","LEXDM3",4,0)
 ; LEXFIL    Flag for Filter v.s. Display
"RTN","LEXDM3",5,0)
 ; LEXX      Value returned
"RTN","LEXDM3",6,0)
 ; LEXY      Local Value of Y
"RTN","LEXDM3",7,0)
 ;
"RTN","LEXDM3",8,0)
NAME(LEXX) ; Filter/Display name - S X=$$NAME^LEXDM3
"RTN","LEXDM3",9,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT W !!
"RTN","LEXDM3",10,0)
 S LEXX=$S($D(LEXFIL):"User defined filter",1:"User defined display")
"RTN","LEXDM3",11,0)
 S DIR("A")=$S($D(LEXFIL):"Filter name:  ",1:"Display name:  ")
"RTN","LEXDM3",12,0)
 S (DIR("?"),DIR("??"))="^D NH^LEXDM3"
"RTN","LEXDM3",13,0)
 S DIR(0)="FAO^2:30" D ^DIR,NR
"RTN","LEXDM3",14,0)
 Q LEXX
"RTN","LEXDM3",15,0)
NH ; Name Help
"RTN","LEXDM3",16,0)
 W !!,"You may give a name to the ",$S($D(LEXFIL):"filter",1:"display")," you have created.  This name is"
"RTN","LEXDM3",17,0)
 W !,"informational and will only be used if you elect to display your"
"RTN","LEXDM3",18,0)
 W !,"current defaults.  This name should represent the purpose of the"
"RTN","LEXDM3",19,0)
 W !,$S($D(LEXFIL):"filter",1:"display"),", and must be 2-30 characters in length."
"RTN","LEXDM3",20,0)
 Q
"RTN","LEXDM3",21,0)
NR ; Name Reformat
"RTN","LEXDM3",22,0)
 N LEXY S LEXY=Y S:Y["^^" LEXX=LEXY Q:LEXY[U
"RTN","LEXDM3",23,0)
 I $$UP^XLFSTR(Y)'[$$UP^XLFSTR(LEXX) D
"RTN","LEXDM3",24,0)
 . S LEXY=$$UP^XLFSTR($E(Y,1))_$$LOW^XLFSTR($E(Y,2,$L(Y)))
"RTN","LEXDM3",25,0)
 . S:LEXY'="" LEXX=LEXX_"/"_LEXY
"RTN","LEXDM3",26,0)
 Q
"RTN","LEXDM4")
0^240^B22048012
"RTN","LEXDM4",1,0)
LEXDM4 ; ISL Default Misc - Files/User/Svc/Loc    ; 09-23-96
"RTN","LEXDM4",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDM4",3,0)
 ;
"RTN","LEXDM4",4,0)
DFI(LEXX) ; Select one application
"RTN","LEXDM4",5,0)
 N D,DIC,DTOUT,DUOUT I $D(LEXX),LEXX'="" S X=LEXX,DIC(0)="QM"
"RTN","LEXDM4",6,0)
 I '$D(LEXX) S DIC(0)="AQEM" W !
"RTN","LEXDM4",7,0)
 S DIC("W")="W ?45,$P($G(^(5)),U,5)"
"RTN","LEXDM4",8,0)
 S DIC="^LEXT(757.2,",DIC("S")="I +($P($G(^(5)),U,3))>0"
"RTN","LEXDM4",9,0)
 S D="B^C^AN" S DIC("A")="Select application:  " D MIX^DIC1 K DIC
"RTN","LEXDM4",10,0)
 S LEXX=$S(+Y>0:+Y,1:0)
"RTN","LEXDM4",11,0)
 Q LEXX
"RTN","LEXDM4",12,0)
FI(LEXX) ; Select one or more applications
"RTN","LEXDM4",13,0)
FI2 W ! N LEXMAX,LEXI,LEXA,LEXAI,LEXAN,LEXC
"RTN","LEXDM4",14,0)
 K ^TMP("LEXIL",$J)
"RTN","LEXDM4",15,0)
 S ^TMP("LEXIL",$J,0)=0
"RTN","LEXDM4",16,0)
FIB ; Build the list of files/applications
"RTN","LEXDM4",17,0)
 S LEXAI=0,LEXC=0,(LEXAN,LEXA)=""
"RTN","LEXDM4",18,0)
 F  S LEXA=$O(^LEXT(757.2,"ADEF",LEXA)) Q:LEXA=""  D
"RTN","LEXDM4",19,0)
 . S LEXI=$O(^LEXT(757.2,"ADEF",LEXA,0))
"RTN","LEXDM4",20,0)
 . S LEXAN=$P(^LEXT(757.2,LEXI,0),U,1)
"RTN","LEXDM4",21,0)
 . Q:$D(^TMP("LEXIL",$J,"B",LEXAN))
"RTN","LEXDM4",22,0)
 . S LEXC=LEXC+1
"RTN","LEXDM4",23,0)
 . S ^TMP("LEXIL",$J,LEXC)=LEXAN_U_LEXI
"RTN","LEXDM4",24,0)
 . S ^TMP("LEXIL",$J,0)=^TMP("LEXIL",$J,0)+1
"RTN","LEXDM4",25,0)
 . S ^TMP("LEXIL",$J,"B",LEXAN)=LEXC
"RTN","LEXDM4",26,0)
 . S ^TMP("LEXIL",$J,"C",$$UP^XLFSTR(LEXAN))=LEXC
"RTN","LEXDM4",27,0)
FIP ; Prompt user
"RTN","LEXDM4",28,0)
 G:'$D(^TMP("LEXIL",$J)) FIQ
"RTN","LEXDM4",29,0)
 W !,"Applications"
"RTN","LEXDM4",30,0)
FIL ; Display the list
"RTN","LEXDM4",31,0)
 S LEXMAX=^TMP("LEXIL",$J,0) S:$D(LEXMGR) LEXMAX=LEXMAX+1
"RTN","LEXDM4",32,0)
 W ! F LEXI=1:1:^TMP("LEXIL",$J,0) W !,$J(LEXI,6),"   ",$E($P(^TMP("LEXIL",$J,LEXI),U,1),1,50)
"RTN","LEXDM4",33,0)
 W:$D(LEXMGR) !,$J(LEXMAX,6),"   All of the Above" S LEXX=$$FIS G:LEXX="" FIQ S LEXX=+LEXX I '$D(LEXMGR),+LEXX>0,+LEXX<LEXMAX+1 S LEXX=$P(^TMP("LEXIL",$J,LEXX),U,2) G FIQ
"RTN","LEXDM4",34,0)
 I $D(LEXMGR),+LEXX>0,+LEXX<LEXMAX D  G FIQ
"RTN","LEXDM4",35,0)
 . S ^TMP("LEXMGR",$J,"FI",0)=1
"RTN","LEXDM4",36,0)
 . S ^TMP("LEXMGR",$J,"FI",1)=$P(^TMP("LEXIL",$J,LEXX),U,2)_U_$S($P(^TMP("LEXIL",$J,LEXX),U,1)'[" (":$P(^TMP("LEXIL",$J,LEXX),U,1),1:$P($P(^TMP("LEXIL",$J,LEXX),U,1)," (",1))
"RTN","LEXDM4",37,0)
 . S LEXX=$P(^TMP("LEXIL",$J,LEXX),U,2)
"RTN","LEXDM4",38,0)
 I $D(LEXMGR),LEXX=LEXMAX S LEXX="" D  G FIQ
"RTN","LEXDM4",39,0)
 . F LEXI=1:1:^TMP("LEXIL",$J,0) D
"RTN","LEXDM4",40,0)
 . . S ^TMP("LEXMGR",$J,"FI",LEXI)=$P(^TMP("LEXIL",$J,LEXI),U,2)_U_$S($P(^TMP("LEXIL",$J,LEXI),U,1)'[" (":$P(^TMP("LEXIL",$J,LEXI),U,1),1:$P($P(^TMP("LEXIL",$J,LEXI),U,1)," (",1))
"RTN","LEXDM4",41,0)
 . . S LEXX=LEXX_";"_$P(^TMP("LEXIL",$J,LEXI),U,2)
"RTN","LEXDM4",42,0)
 . . S ^TMP("LEXMGR",$J,"FI",0)=LEXI
"RTN","LEXDM4",43,0)
 . I $E(LEXX,1)=";" S LEXX=$E(LEXX,2,$L(LEXX))
"RTN","LEXDM4",44,0)
 G FIP Q
"RTN","LEXDM4",45,0)
FIS(X) ; Select from the list
"RTN","LEXDM4",46,0)
 W ! N Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","LEXDM4",47,0)
 S DIR("A")="Select (1-"_LEXMAX_"):  "
"RTN","LEXDM4",48,0)
 S DIR("?")="^D FIHLP^LEXDM4",DIR(0)="NAO^1:"_LEXMAX_":0" D ^DIR S:$D(DTOUT)!($D(DUOUT)) X="" K DIR Q X
"RTN","LEXDM4",49,0)
FIHLP ; Help for selection
"RTN","LEXDM4",50,0)
 I $D(LEXMGR) D
"RTN","LEXDM4",51,0)
 . W !!,"User defaults for both the Lexicon and applications using the Lexicon"
"RTN","LEXDM4",52,0)
 . W !,"(by agreement) will be stored along with their application definitions"
"RTN","LEXDM4",53,0)
 . W !,"contained in the Subset Definition File."
"RTN","LEXDM4",54,0)
 . W !!,"You may set user defaults for one or all of the listed applications"
"RTN","LEXDM4",55,0)
 I '$D(LEXMGR) D
"RTN","LEXDM4",56,0)
 . W !!,"User defaults for the Lexicon may be set for individual applications."
"RTN","LEXDM4",57,0)
 . W !!!,"Select an application:"
"RTN","LEXDM4",58,0)
 S LEXMAX=^TMP("LEXIL",$J,0) S:$D(LEXMGR) LEXMAX=LEXMAX+1
"RTN","LEXDM4",59,0)
 W ! F LEXI=1:1:^TMP("LEXIL",$J,0) D
"RTN","LEXDM4",60,0)
 . W !,$J(LEXI,6),"   ",$E($P(^TMP("LEXIL",$J,LEXI),U,1),1,50)
"RTN","LEXDM4",61,0)
 W:$D(LEXMGR) !,$J(LEXMAX,6),"   All of the Above" Q
"RTN","LEXDM4",62,0)
FIQ ; Quit application selection
"RTN","LEXDM4",63,0)
 K ^TMP("LEXIL",$J),^TMP("LEXMGR",$J)
"RTN","LEXDM4",64,0)
 K LEXA,LEXAI,LEXAN,LEXC,LEXI,LEXMAX
"RTN","LEXDM4",65,0)
 Q LEXX
"RTN","LEXDM4",66,0)
SERV(LEXX) ; Select a service
"RTN","LEXDM4",67,0)
 S DIC="^DIC(49,",DIC("A")="Select users by service:  ",DIC(0)="AMEQ"
"RTN","LEXDM4",68,0)
 N LEXI S LEXI="" F  S LEXI=$O(^DIC(49,"B",LEXI)) Q:LEXI=""  D  Q:LEXI=""
"RTN","LEXDM4",69,0)
 . I LEXI["MEDI",((LEXI["GEN")!(LEXI["INTER")) S ^TMP("LEXSERV",$J,1)=$O(^DIC(49,"B",LEXI,0))
"RTN","LEXDM4",70,0)
 . I LEXI["AMBULAT" S ^TMP("LEXSERV",$J,2)=$O(^DIC(49,"B",LEXI,0))
"RTN","LEXDM4",71,0)
 . I LEXI["OUT",LEXI["PAT" S ^TMP("LEXSERV",$J,2)=$O(^DIC(49,"B",LEXI,0))
"RTN","LEXDM4",72,0)
 I $D(^TMP("LEXSERV",$J,1)) S DIC("B")=$P(^DIC(49,^TMP("LEXSERV",$J,1),0),U,1) K ^TMP("LEXSERV",$J)
"RTN","LEXDM4",73,0)
 I $D(^TMP("LEXSERV",$J,2)) S DIC("B")=$P(^DIC(49,^TMP("LEXSERV",$J,2),0),U,1)
"RTN","LEXDM4",74,0)
 K ^TMP("LEXSERV",$J) D ^DIC S LEXX=Y W:+Y'>0 "  No Service Selected"
"RTN","LEXDM4",75,0)
 S:X["^" LEXX="^" S:X["^^" LEXX="^^" K LEXI,Y,X,DIC,DIC("A"),DIC(0),DIC("B")
"RTN","LEXDM4",76,0)
 S:LEXX'[U&(+LEXX'>0) LEXX=""
"RTN","LEXDM4",77,0)
 Q LEXX
"RTN","LEXDM4",78,0)
LOC(LEXX) ; Select a Hospital Location
"RTN","LEXDM4",79,0)
 S DIC="^SC(",DIC("A")="Select users by Hospital Location:  ",DIC(0)="AMEQ"
"RTN","LEXDM4",80,0)
 D ^DIC S LEXX=Y W:+Y'>0 "  No Location Selected"
"RTN","LEXDM4",81,0)
 S:X["^" LEXX="^" S:X["^^" LEXX="^^" K Y,X,DIC,DIC("A"),DIC(0),DIC("B")
"RTN","LEXDM4",82,0)
 S:LEXX'[U&(+LEXX'>0) LEXX=""
"RTN","LEXDM4",83,0)
 Q LEXX
"RTN","LEXDM4",84,0)
USER(LEXX) ; Select a single user
"RTN","LEXDM4",85,0)
 K DIC N X,Y S DIC="^VA(200,",DIC("A")="Select a single user:  ",DIC(0)="AMEQ"
"RTN","LEXDM4",86,0)
 D ^DIC S LEXX=Y W:+Y'>0 "  No User Selected"
"RTN","LEXDM4",87,0)
 S:X["^" LEXX="^" S:X["^^" LEXX="^^" K Y,X,DIC,DIC("A"),DIC(0),DIC("B")
"RTN","LEXDM4",88,0)
 S:LEXX'[U&(+LEXX'>0) LEXX=""
"RTN","LEXDM4",89,0)
 Q LEXX
"RTN","LEXDMG")
0^241^B10098170
"RTN","LEXDMG",1,0)
LEXDMG ; ISL Defaults - Manager Options           ; 09-23-96
"RTN","LEXDMG",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDMG",3,0)
 ;
"RTN","LEXDMG",4,0)
 ; LEXDICS     Filter
"RTN","LEXDMG",5,0)
 ; LEXDICS(0)  Filter name
"RTN","LEXDMG",6,0)
 ; LEXSHOW     Display
"RTN","LEXDMG",7,0)
 ; LEXSHOW(0)  Display name
"RTN","LEXDMG",8,0)
 ; LEXSUB      Vocabulary
"RTN","LEXDMG",9,0)
 ; LEXSUB(0)   Vocabulary name
"RTN","LEXDMG",10,0)
 ; LEXCTX      Shortcut Context
"RTN","LEXDMG",11,0)
 ; LEXCTX(0)   Shortcut Context name
"RTN","LEXDMG",12,0)
 ;
"RTN","LEXDMG",13,0)
 ; LEXAP       Application
"RTN","LEXDMG",14,0)
 ; LEXCHG      Flag for 1) defaults changed 0) not changed
"RTN","LEXDMG",15,0)
 ; LEXDNAM     Default name
"RTN","LEXDMG",16,0)
 ; LEXDVAL     Default value
"RTN","LEXDMG",17,0)
 ; LEXGET      Executable code which gets the default values
"RTN","LEXDMG",18,0)
 ; LEXMAX      Maximum number of defaults
"RTN","LEXDMG",19,0)
 ; LEXMGR      Flag - Manager
"RTN","LEXDMG",20,0)
 ; LEXRTN      Routine name which sets the defaults values
"RTN","LEXDMG",21,0)
 ; LEXSEL      User input/selection
"RTN","LEXDMG",22,0)
 ;
"RTN","LEXDMG",23,0)
 W @IOF
"RTN","LEXDMG",24,0)
 N LEXDICS,LEXSHOW,LEXSUB,LEXCTX,LEXMAX
"RTN","LEXDMG",25,0)
 N LEXAP,LEXCHG,LEXDNAM,LEXDVAL,LEXGET
"RTN","LEXDMG",26,0)
 N LEXRTN,LEXSEL,LEXMGR
"RTN","LEXDMG",27,0)
 S (LEXMGR,LEXSEL,LEXDICS,LEXDICS(0),LEXSHOW,LEXSHOW(0))=""
"RTN","LEXDMG",28,0)
 S (LEXSUB,LEXSUB(0),LEXCTX,LEXCTX(0))="",LEXMAX=4
"RTN","LEXDMG",29,0)
APPS ; Defaults for an application
"RTN","LEXDMG",30,0)
 S LEXCHG=0
"RTN","LEXDMG",31,0)
APP ; Get the application(s) - $$FI^LEXDM4
"RTN","LEXDMG",32,0)
 S LEXAP=$$FI^LEXDM4
"RTN","LEXDMG",33,0)
 I LEXAP="" W !!,"No application(s) selected",! G EXIT
"RTN","LEXDMG",34,0)
 D DEFMENU G DEFOPT
"RTN","LEXDMG",35,0)
DEFMENU ; Edit Defaults Menu
"RTN","LEXDMG",36,0)
 W !!,"Lexicon Defaults:"
"RTN","LEXDMG",37,0)
 W !!,"  1   Filter     "
"RTN","LEXDMG",38,0)
 W $S($L($G(LEXDICS(0))):"- ",1:""),$G(LEXDICS(0))
"RTN","LEXDMG",39,0)
 W:'$L($G(LEXDICS(0))) "  Unselected"
"RTN","LEXDMG",40,0)
 W !,"  2   Display    "
"RTN","LEXDMG",41,0)
 W $S($L($G(LEXSHOW(0))):"- ",1:""),$G(LEXSHOW(0))
"RTN","LEXDMG",42,0)
 W:'$L($G(LEXSHOW(0))) "  Unselected"
"RTN","LEXDMG",43,0)
 W !,"  3   Vocabulary "
"RTN","LEXDMG",44,0)
 W $S($L($G(LEXSUB(0))):"- ",1:""),$G(LEXSUB(0))
"RTN","LEXDMG",45,0)
 W:'$L($G(LEXSUB(0))) "  Unselected"
"RTN","LEXDMG",46,0)
 W !,"  4   Shortcuts  "
"RTN","LEXDMG",47,0)
 W $S($L($G(LEXCTX(0))):"- ",1:""),$G(LEXCTX(0))
"RTN","LEXDMG",48,0)
 W:'$L($G(LEXCTX(0))) "  Unselected"
"RTN","LEXDMG",49,0)
 W ! Q
"RTN","LEXDMG",50,0)
DEFOPT ; Get user input LEXSEL from ^DIR
"RTN","LEXDMG",51,0)
 N DIR,DTOUT,DUOUT,DIRUT,DIROUT,X,Y
"RTN","LEXDMG",52,0)
 G:$G(LEXSEL)["^^" EXIT
"RTN","LEXDMG",53,0)
 S DIR("A")="Select default to modify (1-"_LEXMAX_"):  "
"RTN","LEXDMG",54,0)
 S DIR("?")="^D DEFHLP^LEXDMG"
"RTN","LEXDMG",55,0)
 S DIR(0)="NAO^1:"_LEXMAX_":0" D ^DIR
"RTN","LEXDMG",56,0)
 S LEXSEL=$S($D(DTOUT):"",X["^^":"^^",X[U&(X'["^^"):U,1:X) K DIR
"RTN","LEXDMG",57,0)
 G:LEXSEL=U APPS G:LEXSEL="^^" EXIT
"RTN","LEXDMG",58,0)
 G:+LEXSEL=0&(LEXCHG=0) EXIT G:+LEXSEL=0&(LEXCHG>0) USR
"RTN","LEXDMG",59,0)
 ; Get Filter - $$MGR^LEXDFL
"RTN","LEXDMG",60,0)
 I +LEXSEL=1 D  G DEFOPT
"RTN","LEXDMG",61,0)
 . D GETDEF("LEXDICS","LEXDICS(0)","$$MGR^LEXDFL")
"RTN","LEXDMG",62,0)
 ; Get Display - $$MGR^LEXDCC
"RTN","LEXDMG",63,0)
 I +LEXSEL=2 D  G DEFOPT
"RTN","LEXDMG",64,0)
 . D GETDEF("LEXSHOW","LEXSHOW(0)","$$MGR^LEXDCC")
"RTN","LEXDMG",65,0)
 ; Get Vocabulary - $$MGR^LEXDVO
"RTN","LEXDMG",66,0)
 I +LEXSEL=3 D  G DEFOPT
"RTN","LEXDMG",67,0)
 . D GETDEF("LEXSUB","LEXSUB(0)","$$MGR^LEXDVO")
"RTN","LEXDMG",68,0)
 ; Get Shortcut Context - $$MGR^LEXDCX
"RTN","LEXDMG",69,0)
 I +LEXSEL=4 D  G DEFOPT
"RTN","LEXDMG",70,0)
 . D GETDEF("LEXCTX","LEXCTX(0)","$$MGR^LEXDCX")
"RTN","LEXDMG",71,0)
 Q
"RTN","LEXDMG",72,0)
DEFHLP ; Help
"RTN","LEXDMG",73,0)
 W !!,"Enter 1-",LEXMAX," to modify defaults, ""^"" for previous menu,"
"RTN","LEXDMG",74,0)
 W:'LEXCHG " or ""^^""/<Return> to exit"
"RTN","LEXDMG",75,0)
 W:LEXCHG " ""^^"" to exit, or",!,"<Return> to continue."
"RTN","LEXDMG",76,0)
 D DEFMENU Q
"RTN","LEXDMG",77,0)
GETDEF(LEXDVAL,LEXDNAM,LEXRTN) ; Get the default values - X LEXGET
"RTN","LEXDMG",78,0)
 N LEXGET S LEXGET="S "_LEXDVAL_"="_LEXRTN X LEXGET
"RTN","LEXDMG",79,0)
 S:@LEXDVAL="^^" LEXSEL="^^"
"RTN","LEXDMG",80,0)
 S @LEXDNAM=$P(@LEXDVAL,U,$L(@LEXDVAL,U))
"RTN","LEXDMG",81,0)
 S @LEXDVAL=$P(@LEXDVAL,U,1,($L(@LEXDVAL,U)-1))
"RTN","LEXDMG",82,0)
 S:@LEXDVAL="" @LEXDNAM="No Change"
"RTN","LEXDMG",83,0)
 S:@LEXDVAL'="" LEXCHG=1 D:LEXSEL'["^^" DEFMENU Q
"RTN","LEXDMG",84,0)
USR ; Set defaults for a User or User Group - $$USER^LEXDMGU
"RTN","LEXDMG",85,0)
 S LEXSEL=$$USER^LEXDMGU
"RTN","LEXDMG",86,0)
 I $D(LEXSEL),LEXSEL=U D DEFMENU G DEFOPT
"RTN","LEXDMG",87,0)
EXIT ; Cleanup and quit
"RTN","LEXDMG",88,0)
 Q
"RTN","LEXDMGO")
0^242^B5510946
"RTN","LEXDMGO",1,0)
LEXDMGO ; ISL Defaults - Manager/Overwrite         ; 09-23-96
"RTN","LEXDMGO",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDMGO",3,0)
 ;
"RTN","LEXDMGO",4,0)
 ; LEXOVER     Flag - Overwrite user defaults (Y/N)
"RTN","LEXDMGO",5,0)
 ; LEXDNAM     Default name
"RTN","LEXDMGO",6,0)
 ; LEXDVAL     Default value
"RTN","LEXDMGO",7,0)
 ; LEXX        Return value
"RTN","LEXDMGO",8,0)
 ; 
"RTN","LEXDMGO",9,0)
OVER(LEXX) ; Replace existing defaults
"RTN","LEXDMGO",10,0)
 S LEXX=$$OVERW Q LEXX
"RTN","LEXDMGO",11,0)
OVERW(LEXX) ; Ask to overwrite (replace)
"RTN","LEXDMGO",12,0)
 W !
"RTN","LEXDMGO",13,0)
OVERP ; Get user response
"RTN","LEXDMGO",14,0)
 N DIR,DTOUT,DUOUT,DIRUT,DIROUT,X,Y
"RTN","LEXDMGO",15,0)
 S DIR("A")="Replace existing user defaults?  "
"RTN","LEXDMGO",16,0)
 S DIR("B")="No",DIR(0)="YAO",DIR("?")="^D OVRH^LEXDMGO"
"RTN","LEXDMGO",17,0)
 S DIR("??")="^D OVRH^LEXDMGO" D ^DIR K DIR I Y[U S LEXX=Y Q LEXX
"RTN","LEXDMGO",18,0)
 S LEXX=0 S:+Y>0 LEXX=1 Q LEXX
"RTN","LEXDMGO",19,0)
OVRH ; Overwrite help
"RTN","LEXDMGO",20,0)
 W !!,"  By answering No:"
"RTN","LEXDMGO",21,0)
 W !!,"    Existing defaults will have precedence over the selected changes"
"RTN","LEXDMGO",22,0)
 W !,"    Replacing or deleting existing defaults will not be allowed"
"RTN","LEXDMGO",23,0)
 W !,"    Adding defaults where none previously existed will be allowed"
"RTN","LEXDMGO",24,0)
 W !!,"  By answering Yes:"
"RTN","LEXDMGO",25,0)
 W !!,"    Selected changes will have precedence over existing defaults"
"RTN","LEXDMGO",26,0)
 W !,"    Adding defaults where none previously existed will be allowed",!
"RTN","LEXDMGO",27,0)
 D DISCHG Q
"RTN","LEXDMGO",28,0)
OVRCHG ; Display effects of overwrite changes
"RTN","LEXDMGO",29,0)
 I +($G(LEXOVER))>0 D  Q
"RTN","LEXDMGO",30,0)
 . W !,"Replace existing defaults:"
"RTN","LEXDMGO",31,0)
 . W "  Yes, existing defaults will be changed",! D DISCHG
"RTN","LEXDMGO",32,0)
 I +($G(LEXOVER))'>0 D  Q
"RTN","LEXDMGO",33,0)
 . W !!,"Replace existing defaults:"
"RTN","LEXDMGO",34,0)
 . W "  No, existing defaults will remain unaltered",!
"RTN","LEXDMGO",35,0)
 Q
"RTN","LEXDMGO",36,0)
DISCHG ; Display changes
"RTN","LEXDMGO",37,0)
 D CHG("LEXDICS","filter"),CHG("LEXSHOW","display")
"RTN","LEXDMGO",38,0)
 D CHG("LEXSUB","vocabulary"),CHG("LEXCTX","shortcuts")
"RTN","LEXDMGO",39,0)
 Q
"RTN","LEXDMGO",40,0)
CHG(LEXDVAL,LEXDNAM) ; Changes
"RTN","LEXDMGO",41,0)
 I $G(@LEXDVAL)="" D  Q
"RTN","LEXDMGO",42,0)
 . W !,"  No changes made to the default ",LEXDNAM
"RTN","LEXDMGO",43,0)
 I $G(@LEXDVAL)'="@" D  Q
"RTN","LEXDMGO",44,0)
 . W !,"  Existing ",LEXDNAM," will be replaced"
"RTN","LEXDMGO",45,0)
 I $G(@LEXDVAL)="@" D
"RTN","LEXDMGO",46,0)
 . W !,"  Existing ",LEXDNAM," will be deleted"
"RTN","LEXDMGO",47,0)
 Q
"RTN","LEXDMGT")
0^243^B13311302
"RTN","LEXDMGT",1,0)
LEXDMGT ; ISL Defaults - Manager/Update            ; 09-23-96
"RTN","LEXDMGT",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDMGT",3,0)
 Q
"RTN","LEXDMGT",4,0)
 ; LEXDICS     Filter
"RTN","LEXDMGT",5,0)
 ; LEXDICS(0)  Filter name
"RTN","LEXDMGT",6,0)
 ; LEXSHOW     Display
"RTN","LEXDMGT",7,0)
 ; LEXSHOW(0)  Display name
"RTN","LEXDMGT",8,0)
 ; LEXSUB      Vocabulary
"RTN","LEXDMGT",9,0)
 ; LEXSUB(0)   Vocabulary name
"RTN","LEXDMGT",10,0)
 ; LEXCTX      Shortcut Context
"RTN","LEXDMGT",11,0)
 ; LEXCTX(0)   Shortcut Context name
"RTN","LEXDMGT",12,0)
 ;
"RTN","LEXDMGT",13,0)
 ; LEXAP       Application
"RTN","LEXDMGT",14,0)
 ; LEXAPS      Multiple Applications
"RTN","LEXDMGT",15,0)
 ; LEXDCUR     Current default value (pre-edit)
"RTN","LEXDMGT",16,0)
 ; LEXDNAM     Default name
"RTN","LEXDMGT",17,0)
 ; LEXDVAL     Default value
"RTN","LEXDMGT",18,0)
 ; LEXFLD      Default field # in 757.201
"RTN","LEXDMGT",19,0)
 ; LEXC        Counter
"RTN","LEXDMGT",20,0)
 ; LEXL        User Location
"RTN","LEXDMGT",21,0)
 ; LEXS        User Service
"RTN","LEXDMGT",22,0)
 ; LEXUSER     DUZ of user to update defaults
"RTN","LEXDMGT",23,0)
 ;
"RTN","LEXDMGT",24,0)
 ; Needs:
"RTN","LEXDMGT",25,0)
 ;
"RTN","LEXDMGT",26,0)
 ; LEXAP       Application
"RTN","LEXDMGT",27,0)
 ; LEXOVER     Flag - Overwrite user defaults (Y/N)
"RTN","LEXDMGT",28,0)
 ; LEXLIM      Limits (parameter for LEXMETH)
"RTN","LEXDMGT",29,0)
 ; LEXMETH     Method, singel user, by service, by location,
"RTN","LEXDMGT",30,0)
 ;              by both service and location, or all users
"RTN","LEXDMGT",31,0)
 ;
"RTN","LEXDMGT",32,0)
UPDATE ; Update user defaults
"RTN","LEXDMGT",33,0)
 Q:'$L($G(LEXAP))  Q:'$L($G(LEXOVER))  Q:'$L($G(LEXMETH))  Q:'$L($G(LEXLIM))
"RTN","LEXDMGT",34,0)
 N ZTSAVE,ZTRTN,ZTDESC,ZTIO,ZTDTH,ZTSK,Y
"RTN","LEXDMGT",35,0)
 S (ZTSAVE("LEXOVER"),ZTSAVE("LEXAP"),ZTSAVE("LEXMETH"),ZTSAVE("LEXLIM"))=""
"RTN","LEXDMGT",36,0)
 S (ZTSAVE("LEXDICS"),ZTSAVE("LEXDICS(0)"),ZTSAVE("LEXSHOW"),ZTSAVE("LEXSHOW(0)"))=""
"RTN","LEXDMGT",37,0)
 S (ZTSAVE("LEXSUB"),ZTSAVE("LEXSUB(0)"),ZTSAVE("LEXCTX"),ZTSAVE("LEXCTX(0)"))=""
"RTN","LEXDMGT",38,0)
 S ZTRTN="UPDT^LEXDMGT",ZTDESC="Up-dating User Defaults"
"RTN","LEXDMGT",39,0)
 S ZTDTH=$H,ZTIO="" D ^%ZTLOAD
"RTN","LEXDMGT",40,0)
 W:$D(ZTSK) !!,"Task has been created to update user defaults"
"RTN","LEXDMGT",41,0)
 W:'$D(ZTSK) !!,"Unable to create a task to update user defaults"
"RTN","LEXDMGT",42,0)
 D HOME^%ZIS Q
"RTN","LEXDMGT",43,0)
UPDT ; TaskManager entry point to Update Defaults (tasked)
"RTN","LEXDMGT",44,0)
 N LEXUSER,LEXDVAL,LEXDNAM,LEXFLD
"RTN","LEXDMGT",45,0)
 S LEXMETH=$P(LEXMETH,U,1) Q:LEXMETH=""
"RTN","LEXDMGT",46,0)
ONE ; Single user
"RTN","LEXDMGT",47,0)
 I LEXMETH="ONE" S LEXUSER=+LEXLIM D  G UPDTQ
"RTN","LEXDMGT",48,0)
 . Q:$P(^VA(200,LEXUSER,0),U,1)=""  D BYAPPS
"RTN","LEXDMGT",49,0)
MULTI ; Multiple users
"RTN","LEXDMGT",50,0)
 S LEXUSER=+($O(^VA(200,1),-1))
"RTN","LEXDMGT",51,0)
 F  S LEXUSER=$O(^VA(200,LEXUSER)) Q:+LEXUSER=0  D
"RTN","LEXDMGT",52,0)
 . Q:$P($G(^VA(200,LEXUSER,0)),U,1)=""  D BYAPPS
"RTN","LEXDMGT",53,0)
 G UPDTQ
"RTN","LEXDMGT",54,0)
BYAPPS ; Process defaults by application
"RTN","LEXDMGT",55,0)
 I LEXAP'[";" S LEXAP=+LEXAP D:+LEXAP>0 BYUSR Q
"RTN","LEXDMGT",56,0)
 I LEXAP[";" D  Q
"RTN","LEXDMGT",57,0)
 . N LEXC,LEXAPS S LEXAPS=LEXAP
"RTN","LEXDMGT",58,0)
 . F LEXC=1:1:$L(LEXAPS,";") S LEXAP=$P(LEXAPS,";",LEXC) D BYUSR
"RTN","LEXDMGT",59,0)
 . S LEXAP=LEXAPS
"RTN","LEXDMGT",60,0)
BYUSR ; Process defaults by user
"RTN","LEXDMGT",61,0)
 N LEXS,LEXL
"RTN","LEXDMGT",62,0)
 S LEXS=$P($G(^VA(200,LEXUSER,5)),"^",1) S:LEXS="" LEXS=-1
"RTN","LEXDMGT",63,0)
 S LEXL=$P($G(^VA(200,LEXUSER,100.1)),"^",7) S:LEXL="" LEXL=-1
"RTN","LEXDMGT",64,0)
 D:LEXMETH="ALL"!(LEXMETH="ONE") UPUSR
"RTN","LEXDMGT",65,0)
 D:LEXMETH="SEV"&(+LEXLIM=+LEXS) UPUSR
"RTN","LEXDMGT",66,0)
 D:LEXMETH="LOC"&(+LEXLIM=+LEXL) UPUSR
"RTN","LEXDMGT",67,0)
 I LEXMETH="SAL" D
"RTN","LEXDMGT",68,0)
 . I +($P(LEXLIM,U,1))>0,+($P(LEXLIM,U,1))=+LEXS D
"RTN","LEXDMGT",69,0)
 . . I +($P(LEXLIM,U,2))>0,+($P(LEXLIM,U,2))=+LEXL D UPUSR
"RTN","LEXDMGT",70,0)
 Q
"RTN","LEXDMGT",71,0)
UPUSR ; Update user defaults for user LEXUSER
"RTN","LEXDMGT",72,0)
 N LEXDCUR,LEXDVAL,LEXDNAM,LEXFLD
"RTN","LEXDMGT",73,0)
UPDIC ; Filter LEXDICS
"RTN","LEXDMGT",74,0)
 S LEXFLD=1,LEXDCUR=$G(^LEXT(757.2,LEXAP,200,LEXUSER,LEXFLD))
"RTN","LEXDMGT",75,0)
 S LEXDVAL=$G(LEXDICS),LEXDNAM=$G(LEXDICS(0))
"RTN","LEXDMGT",76,0)
 G:LEXDCUR'=""&('LEXOVER) UPSHOW D:LEXDVAL'="" SAVE
"RTN","LEXDMGT",77,0)
 ;
"RTN","LEXDMGT",78,0)
UPSHOW ; Display LEXSHOW
"RTN","LEXDMGT",79,0)
 S LEXFLD=2,LEXDCUR=$G(^LEXT(757.2,LEXAP,200,LEXUSER,LEXFLD))
"RTN","LEXDMGT",80,0)
 S LEXDVAL=$G(LEXSHOW),LEXDNAM=$G(LEXSHOW(0))
"RTN","LEXDMGT",81,0)
 G:LEXDCUR'=""&('LEXOVER) UPSUB D:LEXDVAL'="" SAVE
"RTN","LEXDMGT",82,0)
 ;
"RTN","LEXDMGT",83,0)
UPSUB ; Vocabulary LEXSUB
"RTN","LEXDMGT",84,0)
 S LEXFLD=3,LEXDCUR=$G(^LEXT(757.2,LEXAP,200,LEXUSER,LEXFLD))
"RTN","LEXDMGT",85,0)
 S LEXDVAL=$G(LEXSUB),LEXDNAM=$G(LEXSUB(0))
"RTN","LEXDMGT",86,0)
 G:LEXDCUR'=""&('LEXOVER) UPCON D:LEXDVAL'="" SAVE
"RTN","LEXDMGT",87,0)
 ;
"RTN","LEXDMGT",88,0)
UPCON ; Shortcut Context LEXCTX
"RTN","LEXDMGT",89,0)
 S LEXFLD=4,LEXDCUR=$G(^LEXT(757.2,LEXAP,200,LEXUSER,LEXFLD))
"RTN","LEXDMGT",90,0)
 S LEXDVAL=$G(LEXCTX),LEXDNAM=$G(LEXCTX(0))
"RTN","LEXDMGT",91,0)
 G:LEXDCUR'=""&('LEXOVER) UPQ D:LEXDVAL'="" SAVE
"RTN","LEXDMGT",92,0)
 ;
"RTN","LEXDMGT",93,0)
UPQ ; Quit update
"RTN","LEXDMGT",94,0)
 Q
"RTN","LEXDMGT",95,0)
UPDTQ ; Quit update (tasked)
"RTN","LEXDMGT",96,0)
 S:$D(ZTQUEUED) ZTREQ="@" Q
"RTN","LEXDMGT",97,0)
 Q
"RTN","LEXDMGT",98,0)
SAVE ; Save default - SET^LEXDSV(DUZ,APPLICATION,VALUE,NAME,FIELD)
"RTN","LEXDMGT",99,0)
 I LEXDVAL'["@" D  Q
"RTN","LEXDMGT",100,0)
 . D SET^LEXDSV(LEXUSER,LEXAP,LEXDVAL,LEXDNAM,LEXFLD) Q
"RTN","LEXDMGT",101,0)
 ; Kill default - SET^LEXDSV(DUZ,APPLICATION,"@","",FIELD)
"RTN","LEXDMGT",102,0)
 D SET^LEXDSV(LEXUSER,LEXAP,"@","",LEXFLD) Q
"RTN","LEXDMGU")
0^244^B19106674
"RTN","LEXDMGU",1,0)
LEXDMGU ; ISL Defaults - Manager/User Group        ; 09-23-96
"RTN","LEXDMGU",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDMGU",3,0)
 ;
"RTN","LEXDMGU",4,0)
 ; LEXDICS(0)  Filter name
"RTN","LEXDMGU",5,0)
 ; LEXSHOW(0)  Display name
"RTN","LEXDMGU",6,0)
 ; LEXSUB(0)   Vocabulary name
"RTN","LEXDMGU",7,0)
 ; LEXCTX(0)   Shortcut Context name
"RTN","LEXDMGU",8,0)
 ;
"RTN","LEXDMGU",9,0)
 ; LEXC        Counter
"RTN","LEXDMGU",10,0)
 ; LEXI        Incremental counter
"RTN","LEXDMGU",11,0)
 ; LEXL        Location
"RTN","LEXDMGU",12,0)
 ; LEXS        Service
"RTN","LEXDMGU",13,0)
 ; LEXMORE     Flag - Select more users (Y/N)
"RTN","LEXDMGU",14,0)
 ; LEXOVER     Flag - Overwrite user defaults (Y/N)
"RTN","LEXDMGU",15,0)
 ; LEXSEL      User input/selection
"RTN","LEXDMGU",16,0)
 ; LEXUSR      Flag - User has been selected
"RTN","LEXDMGU",17,0)
 ; LEXVER      Flag - Default values are verified (Y/N)
"RTN","LEXDMGU",18,0)
 ; LEXX        Return value
"RTN","LEXDMGU",19,0)
 ;
"RTN","LEXDMGU",20,0)
 ; LEXLIM      Limits (parameter for LEXMETH)
"RTN","LEXDMGU",21,0)
 ; LEXMETH     Method, singel user, by service, by location,
"RTN","LEXDMGU",22,0)
 ;              by both service and location, or all users
"RTN","LEXDMGU",23,0)
 ;
"RTN","LEXDMGU",24,0)
USER(LEXX) ; User or user group by name or by type
"RTN","LEXDMGU",25,0)
 N LEXUSR,LEXMETH,LEXLIM,LEXMORE,LEXOVER,LEXVER
"RTN","LEXDMGU",26,0)
GRP ; Get user/user group
"RTN","LEXDMGU",27,0)
 K DIC,DIR S LEXX=""
"RTN","LEXDMGU",28,0)
 W ! D DM S (LEXX,LEXUSR)=$$USR I LEXX[U G EXIT
"RTN","LEXDMGU",29,0)
GETUSER ; Get user or user group type (Service/Location)
"RTN","LEXDMGU",30,0)
 S (LEXMETH,LEXLIM)=""
"RTN","LEXDMGU",31,0)
 I +LEXX=1 W ! S LEXLIM=$$USER^LEXDM4,LEXMETH="ONE"
"RTN","LEXDMGU",32,0)
 I +LEXX=2 W ! S LEXLIM=$$SERV^LEXDM4,LEXMETH="SEV"
"RTN","LEXDMGU",33,0)
 I +LEXX=3 W ! S LEXLIM=$$LOC^LEXDM4,LEXMETH="LOC"
"RTN","LEXDMGU",34,0)
 I +LEXX=4 D
"RTN","LEXDMGU",35,0)
 . N LEXS,LEXL W ! S LEXS=$$SERV^LEXDM4
"RTN","LEXDMGU",36,0)
 . I LEXS=U!(LEXS="^^")!(+LEXS'>0) S LEXLIM=LEXS Q
"RTN","LEXDMGU",37,0)
 . W ! S LEXL=$$LOC^LEXDM4
"RTN","LEXDMGU",38,0)
 . I LEXL=U!(LEXL="^^")!(+LEXL'>0) S LEXLIM=LEXL Q
"RTN","LEXDMGU",39,0)
 . S LEXLIM=LEXS_";"_LEXL,LEXMETH="SAL"
"RTN","LEXDMGU",40,0)
 I +LEXX=5 S LEXLIM=1,LEXMETH="ALL"
"RTN","LEXDMGU",41,0)
 D LIMIT,METHOD
"RTN","LEXDMGU",42,0)
 Q:+($G(LEXLIM))'>0 LEXLIM
"RTN","LEXDMGU",43,0)
 ; Check defaults - DEFCK^LEXDMGV
"RTN","LEXDMGU",44,0)
 D DEFCK^LEXDMGV
"RTN","LEXDMGU",45,0)
 ; Check user - USERCK^LEXDMGV
"RTN","LEXDMGU",46,0)
 D USERCK^LEXDMGV
"RTN","LEXDMGU",47,0)
 ; Ask to overwrite defaults - $$OVER^LEXDMGO
"RTN","LEXDMGU",48,0)
 S LEXOVER=$$OVER^LEXDMGO
"RTN","LEXDMGU",49,0)
 Q:LEXOVER["^^" "^^"
"RTN","LEXDMGU",50,0)
 ; Verify before setting global - $$VER^LEXDMGV
"RTN","LEXDMGU",51,0)
 S LEXVER=$$VER^LEXDMGV
"RTN","LEXDMGU",52,0)
 S:LEXVER[U LEXS=U S:LEXVER["^^" LEXX="^^" Q:LEXX[U LEXX
"RTN","LEXDMGU",53,0)
 D:+($G(LEXVER))>0 UPDATE^LEXDMGT
"RTN","LEXDMGU",54,0)
 ; More users
"RTN","LEXDMGU",55,0)
 S LEXMORE=0 I +($G(LEXUSR))>0,+($G(LEXUSR))<5 S LEXMORE=1
"RTN","LEXDMGU",56,0)
 I +($G(LEXMORE))>0,LEXX'["^^" D  G:+($G(LEXMORE))>0 GRP
"RTN","LEXDMGU",57,0)
 . S LEXMORE=$$MOREUSR
"RTN","LEXDMGU",58,0)
 Q LEXX
"RTN","LEXDMGU",59,0)
LIMIT ; Check search limits
"RTN","LEXDMGU",60,0)
 Q:+($G(LEXLIM))>0  S:LEXLIM["^^" LEXLIM="^^" Q:LEXLIM[U
"RTN","LEXDMGU",61,0)
 S LEXLIM=U Q
"RTN","LEXDMGU",62,0)
METHOD ; Check search method
"RTN","LEXDMGU",63,0)
 Q:+($G(LEXLIM))>0  S:LEXLIM[U!($G(LEXLIM)="") LEXMETH="" Q
"RTN","LEXDMGU",64,0)
EXIT ; Quit USER selection
"RTN","LEXDMGU",65,0)
 Q LEXX
"RTN","LEXDMGU",66,0)
MOREUSR(LEXX) ; Want to set the current defaults for more users?
"RTN","LEXDMGU",67,0)
 N DIR,DTOUT,DUOUT,DIRUT,DIROUT,X,Y
"RTN","LEXDMGU",68,0)
 S DIR("A",1)="Do you wish to set the currently selected user"
"RTN","LEXDMGU",69,0)
 S DIR("A")="defaults to another user or group of users?  "
"RTN","LEXDMGU",70,0)
 S DIR("B")="No",(DIR("?"),DIR("??"))="^D MOREHLP^LEXDMGU"
"RTN","LEXDMGU",71,0)
 S DIR(0)="YAO" D ^DIR K DIR S LEXX=+Y Q:$D(DTOUT) "^" S:X[U LEXX=U
"RTN","LEXDMGU",72,0)
 S:X["^^" LEXX="^^" Q:LEXX[U LEXX S LEXX=+Y Q LEXX
"RTN","LEXDMGU",73,0)
MOREHLP ; More user help
"RTN","LEXDMGU",74,0)
 D CD W !,"The defaults you selected may be applied to another user/user group",!
"RTN","LEXDMGU",75,0)
 Q
"RTN","LEXDMGU",76,0)
USR(LEXX) ; Get response for USER
"RTN","LEXDMGU",77,0)
 W ! N Y,DTOUT,DUOUT,DIRUT,DIROUT S DIR("A")="Select 1-5:  "
"RTN","LEXDMGU",78,0)
 S DIR("B")=1,(DIR("?"),DIR("??"))="^D USRHLP^LEXDMGU"
"RTN","LEXDMGU",79,0)
 S DIR(0)="NAO^1:5:0" D ^DIR K DIR S LEXX=+Y
"RTN","LEXDMGU",80,0)
 Q:$D(DTOUT) "^^" S:X[U LEXX=U S:X["^^" LEXX="^^" Q:LEXX[U LEXX
"RTN","LEXDMGU",81,0)
 S:+Y>0&(+Y<6) LEXX=+Y Q LEXX
"RTN","LEXDMGU",82,0)
 Q
"RTN","LEXDMGU",83,0)
USRHLP ; Help for respons to USER
"RTN","LEXDMGU",84,0)
 I X'["?",+X<1!(+X>5) D  Q
"RTN","LEXDMGU",85,0)
 . W !!,"Press <Return> to continue, "
"RTN","LEXDMGU",86,0)
 . W """^"" to exit or select (1-5)" D DM
"RTN","LEXDMGU",87,0)
 I '$L(($G(LEXDICS(0))_$G(LEXSHOW(0))_$G(LEXSUB(0))_$G(LEXCTX(0)))) D  Q
"RTN","LEXDMGU",88,0)
 . W !!,"Press <Return> to continue, "
"RTN","LEXDMGU",89,0)
 . W """^"" to exit or select (1-5)" D DM
"RTN","LEXDMGU",90,0)
 D CD W !,"The default selections listed above may be applied to either"
"RTN","LEXDMGU",91,0)
 W !,"a single user, a user group based on service/location, or all"
"RTN","LEXDMGU",92,0)
 W !,"users.  You may either select a user/user group (1-5), or "
"RTN","LEXDMGU",93,0)
 W !,"press <Return> to continue, or ""^"" to exit." D DM
"RTN","LEXDMGU",94,0)
 Q
"RTN","LEXDMGU",95,0)
CD ; Current defaults
"RTN","LEXDMGU",96,0)
 W !!,"Current default selections:",!
"RTN","LEXDMGU",97,0)
 W !,"    Filter     - "
"RTN","LEXDMGU",98,0)
 W $S($L($G(LEXDICS(0))):$G(LEXDICS(0)),1:"Not selected")
"RTN","LEXDMGU",99,0)
 W !,"    Display    - "
"RTN","LEXDMGU",100,0)
 W $S($L($G(LEXSHOW(0))):$G(LEXSHOW(0)),1:"Not selected")
"RTN","LEXDMGU",101,0)
 W !,"    Vocabulary - "
"RTN","LEXDMGU",102,0)
 W $S($L($G(LEXSUB(0))):$G(LEXSUB(0)),1:"Not selected")
"RTN","LEXDMGU",103,0)
 W !,"    Shortcuts  - "
"RTN","LEXDMGU",104,0)
 W $S($L($G(LEXCTX(0))):$G(LEXCTX(0)),1:"Not selected") W !
"RTN","LEXDMGU",105,0)
 Q
"RTN","LEXDMGU",106,0)
DM ; Display menu
"RTN","LEXDMGU",107,0)
 W !!,"User/User groups:",!
"RTN","LEXDMGU",108,0)
 N LEXC F LEXC=1:1:999 Q:$P($T(UM+LEXC^LEXDMGU),";",2)=""  D
"RTN","LEXDMGU",109,0)
 . W !,"   ",$J($P($T(UM+LEXC^LEXDMGU),";",2),2),"  "
"RTN","LEXDMGU",110,0)
 . W $P($T(UM+LEXC^LEXDMGU),";",3)
"RTN","LEXDMGU",111,0)
 Q
"RTN","LEXDMGU",112,0)
UM ;; User/user group menu data
"RTN","LEXDMGU",113,0)
 ;1;Single User
"RTN","LEXDMGU",114,0)
 ;2;Group based on Service
"RTN","LEXDMGU",115,0)
 ;3;Group based on Hospital Location
"RTN","LEXDMGU",116,0)
 ;4;Group based on both Service and Hospital Location
"RTN","LEXDMGU",117,0)
 ;5;All Users
"RTN","LEXDMGU",118,0)
 ;;
"RTN","LEXDMGV")
0^245^B12206347
"RTN","LEXDMGV",1,0)
LEXDMGV ; ISL Defaults - Manager/Verify            ; 09-23-96
"RTN","LEXDMGV",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDMGV",3,0)
 ;
"RTN","LEXDMGV",4,0)
 ; LEXDICS     Filter
"RTN","LEXDMGV",5,0)
 ; LEXDICS(0)  Filter name
"RTN","LEXDMGV",6,0)
 ; LEXDICS(1)  Filter - Add, Delete, No Change
"RTN","LEXDMGV",7,0)
 ; LEXSHOW     Display
"RTN","LEXDMGV",8,0)
 ; LEXSHOW(0)  Display name
"RTN","LEXDMGV",9,0)
 ; LEXSHOW(1)  Display - Add, Delete, No Change
"RTN","LEXDMGV",10,0)
 ; LEXSUB      Vocabulary
"RTN","LEXDMGV",11,0)
 ; LEXSUB(0)   Vocabulary name
"RTN","LEXDMGV",12,0)
 ; LEXSUB(1)   Vocabulary - Add, Delete, No Change
"RTN","LEXDMGV",13,0)
 ; LEXCTX      Shortcut Context
"RTN","LEXDMGV",14,0)
 ; LEXCTX(0)   Shortcut Context name
"RTN","LEXDMGV",15,0)
 ; LEXCTX(1)   Shortcut Context - Add, Delete, No Change
"RTN","LEXDMGV",16,0)
 ;
"RTN","LEXDMGV",17,0)
 ; LEXUSER     User (text, not pointer)
"RTN","LEXDMGV",18,0)
 ; LEXX        Returned value
"RTN","LEXDMGV",19,0)
 ; LEXLIM      Limits (parameter for LEXMETH)
"RTN","LEXDMGV",20,0)
 ; LEXMETH     Method, singel user, by service, by location,
"RTN","LEXDMGV",21,0)
 ;              by both service and location, or all users
"RTN","LEXDMGV",22,0)
 ;
"RTN","LEXDMGV",23,0)
VER(LEXX) ; Verify defaults before commiting to the global
"RTN","LEXDMGV",24,0)
 W @IOF
"RTN","LEXDMGV",25,0)
 D DDEF,DDU,OVRCHG^LEXDMGO
"RTN","LEXDMGV",26,0)
 W ! N DIR,DTOUT,DUOUT,DIRUT,DIROUT,X,Y
"RTN","LEXDMGV",27,0)
 S DIR("A")="Is this correct?  "
"RTN","LEXDMGV",28,0)
 S DIR("B")="Yes"
"RTN","LEXDMGV",29,0)
 S (DIR("?"),DIR("??"))="^D VERH^LEXDMGV"
"RTN","LEXDMGV",30,0)
 S DIR(0)="YAO" D ^DIR K DIR I X["^^" Q "^^"
"RTN","LEXDMGV",31,0)
 Q:X[U U S LEXX=+Y Q LEXX
"RTN","LEXDMGV",32,0)
VERH ; Verify help
"RTN","LEXDMGV",33,0)
 W !!,"By answering ""Yes"" you will be setting the look-up defaults for the Clinical"
"RTN","LEXDMGV",34,0)
 W !,"Lexicon for the selected applications and users."
"RTN","LEXDMGV",35,0)
 W !!,"Is this correct"
"RTN","LEXDMGV",36,0)
 Q
"RTN","LEXDMGV",37,0)
DDEF ; Display defaults
"RTN","LEXDMGV",38,0)
 N LEXC S LEXC=0
"RTN","LEXDMGV",39,0)
 I (+($$ACT)) D
"RTN","LEXDMGV",40,0)
 . W !,"Set user defaults:",!
"RTN","LEXDMGV",41,0)
 I $D(LEXDICS(1)) D
"RTN","LEXDMGV",42,0)
 . S LEXC=LEXC+1 W !,"  ",LEXC,"  Filter      ",LEXDICS(1)
"RTN","LEXDMGV",43,0)
 . W:$G(LEXDICS(1))["Add" ", ",$P($G(LEXDICS(0))," (",1)
"RTN","LEXDMGV",44,0)
 I $D(LEXSHOW(1)) D
"RTN","LEXDMGV",45,0)
 . S LEXC=LEXC+1 W !,"  ",LEXC,"  Display     ",$G(LEXSHOW(1))
"RTN","LEXDMGV",46,0)
 . W:$G(LEXSHOW(1))["Add" ", ",$P($G(LEXSHOW(0))," (",1)
"RTN","LEXDMGV",47,0)
 I $D(LEXSUB(1)) D
"RTN","LEXDMGV",48,0)
 . S LEXC=LEXC+1 W !,"  ",LEXC,"  Vocabulary  ",$G(LEXSUB(1))
"RTN","LEXDMGV",49,0)
 . W:$G(LEXSUB(1))["Add" ", ",$P($G(LEXSUB(0))," (",1)
"RTN","LEXDMGV",50,0)
 I $D(LEXCTX(1)) D
"RTN","LEXDMGV",51,0)
 . S LEXC=LEXC+1 W !,"  ",LEXC,"  Shortcuts   ",$G(LEXCTX(1))
"RTN","LEXDMGV",52,0)
 . W:$G(LEXCTX(1))["Add" ", ",$P($G(LEXCTX(0))," (",1)
"RTN","LEXDMGV",53,0)
 W:(+($$ACT)) !
"RTN","LEXDMGV",54,0)
 Q
"RTN","LEXDMGV",55,0)
ACT(LEXX) ; Check for Default Action
"RTN","LEXDMGV",56,0)
 I $D(LEXDICS(1))!($D(LEXSHOW(1))) Q 1
"RTN","LEXDMGV",57,0)
 I $D(LEXSUB(1))!($D(LEXCTX(1))) Q 1
"RTN","LEXDMGV",58,0)
 Q 0
"RTN","LEXDMGV",59,0)
NAM(LEXX) ; Check for Default Names
"RTN","LEXDMGV",60,0)
 I $D(LEXDICS(0))!($D(LEXSHOW(0))) Q 1
"RTN","LEXDMGV",61,0)
 I $D(LEXSUB(0))!($D(LEXCTX(0))) Q 1
"RTN","LEXDMGV",62,0)
 Q 0
"RTN","LEXDMGV",63,0)
VAL(LEXX) ; Check for Default Values
"RTN","LEXDMGV",64,0)
 I $D(LEXDICS)!($D(LEXSHOW)) Q 1
"RTN","LEXDMGV",65,0)
 I $D(LEXSUB)!($D(LEXCTX)) Q 1
"RTN","LEXDMGV",66,0)
 Q 0
"RTN","LEXDMGV",67,0)
DDU ; Display users
"RTN","LEXDMGV",68,0)
 Q:'$D(LEXMETH)  N LEXUSER S LEXUSER=$P(LEXMETH,U,2) Q:'$L(LEXUSER)
"RTN","LEXDMGV",69,0)
 W !,"For ",LEXUSER,! Q
"RTN","LEXDMGV",70,0)
DEFCK ; Check defaults
"RTN","LEXDMGV",71,0)
 S LEXDICS(1)=$S($G(LEXDICS)="":"No Change",$G(LEXDICS)="@":"Deleted",1:"Added")
"RTN","LEXDMGV",72,0)
 S LEXSHOW(1)=$S($G(LEXSHOW)="":"No Change",$G(LEXSHOW)="@":"Deleted",1:"Added")
"RTN","LEXDMGV",73,0)
 S LEXSUB(1)=$S($G(LEXSUB)="":"No Change",$G(LEXSUB)="@":"Deleted",1:"Added")
"RTN","LEXDMGV",74,0)
 S LEXCTX(1)=$S($G(LEXCTX)="":"No Change",$G(LEXCTX)="@":"Deleted",1:"Added")
"RTN","LEXDMGV",75,0)
 Q
"RTN","LEXDMGV",76,0)
USERCK ; Check user
"RTN","LEXDMGV",77,0)
 I LEXMETH="ONE",+LEXLIM>0 S $P(LEXMETH,U,2)="user:  "_$P(LEXLIM,U,2)
"RTN","LEXDMGV",78,0)
 I LEXMETH="SEV",+LEXLIM>0 S $P(LEXMETH,U,2)="users in Service/Section:  "_$P(LEXLIM,U,2)
"RTN","LEXDMGV",79,0)
 I LEXMETH="LOC",+LEXLIM>0 S $P(LEXMETH,U,2)="users in Hospital Location:  "_$P(LEXLIM,U,2)
"RTN","LEXDMGV",80,0)
 I LEXMETH="SAL",+LEXLIM>0 S $P(LEXMETH,U,2)="users in Service/Location:  "_$P($P(LEXLIM,";",1),U,2)_"/"_$P($P(LEXLIM,";",2),U,2)
"RTN","LEXDMGV",81,0)
 I LEXMETH="ALL",+LEXLIM>0 S $P(LEXMETH,U,2)="users:  All Users"
"RTN","LEXDMGV",82,0)
 Q
"RTN","LEXDSV")
0^246^B5732630
"RTN","LEXDSV",1,0)
LEXDSV ; ISL Defaults - Save                      ; 09-23-96
"RTN","LEXDSV",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDSV",3,0)
 Q
"RTN","LEXDSV",4,0)
 ;
"RTN","LEXDSV",5,0)
 ; Needs
"RTN","LEXDSV",6,0)
 ;
"RTN","LEXDSV",7,0)
 ;   Application      File DA, Subfile DA(1)  LEXAP
"RTN","LEXDSV",8,0)
 ;   User DUZ         Sub-file .01 DINUM      LEXDUZ
"RTN","LEXDSV",9,0)
 ;   Default value                            LEXDVAL
"RTN","LEXDSV",10,0)
 ;   Defualt name                             LEXDNAM
"RTN","LEXDSV",11,0)
 ;   Default location Sub-file field          LEXFLD
"RTN","LEXDSV",12,0)
 ;         
"RTN","LEXDSV",13,0)
 ; Sets ^LEXT(757.2,LEXAP,200,LEXDUZ,LEXFLD)=LEXDVAL
"RTN","LEXDSV",14,0)
 ; and  ^LEXT(757.2,LEXAP,200,LEXDUZ,(LEXFLD+.5))=LEXDNAM
"RTN","LEXDSV",15,0)
 ;
"RTN","LEXDSV",16,0)
 ;
"RTN","LEXDSV",17,0)
SET(LEXDUZ,LEXAP,LEXDVAL,LEXDNAM,LEXFLD) ; 
"RTN","LEXDSV",18,0)
 ;
"RTN","LEXDSV",19,0)
 Q:'$L($G(LEXDVAL))  S:LEXDVAL["@" LEXDVAL="@",LEXDNAM="@" S DIC("P")="757.201PA"
"RTN","LEXDSV",20,0)
 N LEXWARN S LEXWARN=0,(DIC,DIE)="^LEXT(757.2,"_LEXAP_",200,"
"RTN","LEXDSV",21,0)
 S DA(1)=LEXAP,DA=LEXDUZ
"RTN","LEXDSV",22,0)
 S DLAYGO=757.2,(DINUM,X)=LEXDUZ,DIC(0)="L"
"RTN","LEXDSV",23,0)
 S DIC("DR")=LEXFLD_"////^S X=LEXDVAL" K DD,DO D FILE^DICN
"RTN","LEXDSV",24,0)
EDIT ; Lock record and edit user default
"RTN","LEXDSV",25,0)
 L +^LEXT(757.2,+LEXAP,200):1
"RTN","LEXDSV",26,0)
 I '$T D  G EDIT
"RTN","LEXDSV",27,0)
 . W:'$D(ZTQUEUED)&('LEXWARN) !,"Another user is editing this entry, please wait"
"RTN","LEXDSV",28,0)
 . S LEXWARN=1 H 2
"RTN","LEXDSV",29,0)
 S DA(1)=LEXAP,DA=LEXDUZ,DR=LEXFLD_"////^S X=LEXDVAL"
"RTN","LEXDSV",30,0)
 D ^DIE I $L($G(LEXDNAM)) S DR=(LEXFLD+.5)_"////^S X=LEXDNAM" D ^DIE
"RTN","LEXDSV",31,0)
 K DA,DR,DIE,DIC
"RTN","LEXDSV",32,0)
 L -^LEXT(757.2,+LEXAP,200)
"RTN","LEXDSV",33,0)
 ;
"RTN","LEXDSV",34,0)
 ; Delete name if default is null
"RTN","LEXDSV",35,0)
 ;
"RTN","LEXDSV",36,0)
 N LEXX,LEXDEL S LEXX=0,LEXDEL=1
"RTN","LEXDSV",37,0)
 F  S LEXX=$O(^LEXT(757.2,LEXAP,200,LEXDUZ,LEXX)) Q:+LEXX=0  D
"RTN","LEXDSV",38,0)
 . I '$L($G(^LEXT(757.2,LEXAP,200,LEXDUZ,LEXX))) D
"RTN","LEXDSV",39,0)
 . . I $L($G(^LEXT(757.2,LEXAP,200,LEXDUZ,(LEXX+.5)))) D
"RTN","LEXDSV",40,0)
 . . . S LEXDVAL="@",DIC("P")="757.201PA"
"RTN","LEXDSV",41,0)
 . . . S (DIC,DIE)="^LEXT(757.2,"_LEXAP_",200,",DA(1)=LEXAP,DA=LEXDUZ
"RTN","LEXDSV",42,0)
 . . . S DLAYGO=757.2,(DINUM,X)=LEXDUZ,DIC(0)="L"
"RTN","LEXDSV",43,0)
 . . . L +^LEXT(757.2,+LEXAP,200):1 I '$T H 2 S LEXX=LEXX-.05 Q
"RTN","LEXDSV",44,0)
 . . . S DR=(LEXX+.5)_"////^S X=LEXDVAL"
"RTN","LEXDSV",45,0)
 . . . D ^DIE S LEXX=LEXX+.5 K DA,DR,DIE,DIC
"RTN","LEXDSV",46,0)
 . . . L -^LEXT(757.2,+LEXAP,200)
"RTN","LEXDSV",47,0)
 . . I '$L($G(^LEXT(757.2,LEXAP,200,LEXDUZ,(LEXX+.5)))) D
"RTN","LEXDSV",48,0)
 . . . K ^LEXT(757.2,LEXAP,200,LEXDUZ,LEXX),^LEXT(757.2,LEXAP,200,LEXDUZ,(LEXX+.5))
"RTN","LEXDSV",49,0)
 . I $L($G(^LEXT(757.2,LEXAP,200,LEXDUZ,LEXX))) S LEXDEL=0
"RTN","LEXDSV",50,0)
 ;
"RTN","LEXDSV",51,0)
 ; Delete record if all defaults are null
"RTN","LEXDSV",52,0)
 ;
"RTN","LEXDSV",53,0)
 I LEXDEL D
"RTN","LEXDSV",54,0)
 . S (DIC,DIE,DIK)="^LEXT(757.2,"_LEXAP_",200,"
"RTN","LEXDSV",55,0)
 . S DA(1)=LEXAP,DA=LEXDUZ D ^DIK
"RTN","LEXDSV",56,0)
 Q
"RTN","LEXDVO")
0^247^B4237055
"RTN","LEXDVO",1,0)
LEXDVO ; ISL Default Vocabulary                   ; 09-23-96
"RTN","LEXDVO",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDVO",3,0)
 ;
"RTN","LEXDVO",4,0)
 ; Entry:  D EN^LEXDVO              LEXAP is unknown
"RTN","LEXDVO",5,0)
 ;
"RTN","LEXDVO",6,0)
 ; Entry:  D EN1^LEXDVO(LEXAP)     LEXAP is known
"RTN","LEXDVO",7,0)
 ;
"RTN","LEXDVO",8,0)
 ; Single user entry point - Saves Default Vocabulary in file 757.2
"RTN","LEXDVO",9,0)
 ;
"RTN","LEXDVO",10,0)
 ; Where 
"RTN","LEXDVO",11,0)
 ;
"RTN","LEXDVO",12,0)
 ;      LEXAP     Pointer to file 757.2
"RTN","LEXDVO",13,0)
 ;      LEXCA     Action (modify/delete)
"RTN","LEXDVO",14,0)
 ;      LEXDEL    Flag default for Deletion
"RTN","LEXDVO",15,0)
 ;      LEXDNAM   Default Name
"RTN","LEXDVO",16,0)
 ;      LEXDVAL   Default Value
"RTN","LEXDVO",17,0)
 ;      LEXFIL    Flag for Filter
"RTN","LEXDVO",18,0)
 ;      LEXFLD    Default field (1-4) in file 757.201
"RTN","LEXDVO",19,0)
 ;      LEXUSER   DUZ of user
"RTN","LEXDVO",20,0)
 ;      LEXX      Returned value
"RTN","LEXDVO",21,0)
 ;
"RTN","LEXDVO",22,0)
EN ; Single user, LEXAP is unknown
"RTN","LEXDVO",23,0)
 N LEXAP S LEXAP=$$DFI^LEXDM4 Q:+LEXAP=0  W ! D EN1(LEXAP) Q
"RTN","LEXDVO",24,0)
EN1(LEXAP) ; Single user, LEXAP is known
"RTN","LEXDVO",25,0)
 N X,Y,LEXUSER,LEXX S LEXUSER=$G(DUZ) Q:+LEXUSER'>0  Q:'$D(^VA(200,+LEXUSER))
"RTN","LEXDVO",26,0)
 ;
"RTN","LEXDVO",27,0)
 S LEXAP=$G(LEXAP) Q:LEXAP=""
"RTN","LEXDVO",28,0)
 I '$D(^LEXT(757.2,+LEXAP,0))&('$D(^LEXT(757.2,"B",LEXAP)))&('$D(^LEXT(757.2,"C",$$UP^XLFSTR(LEXAP))))&('$D(^LEXT(757.2,"AN",LEXAP))) Q
"RTN","LEXDVO",29,0)
 S:+LEXAP'>0 LEXAP=$$AP^LEXDFN2(LEXAP)
"RTN","LEXDVO",30,0)
 ;
"RTN","LEXDVO",31,0)
 Q:+($G(LEXAP))'>0  Q:+($P($G(^LEXT(757.2,+LEXAP,5)),"^",3))'>0
"RTN","LEXDVO",32,0)
 K LEXFIL N LEXCA,LEXDVAL,LEXDNAM,LEXFLD S LEXFLD=3
"RTN","LEXDVO",33,0)
 S LEXDVAL=$$EN^LEXDVOS Q:LEXDVAL="^^"
"RTN","LEXDVO",34,0)
 S LEXDNAM=$P(LEXDVAL,"^",2),LEXDVAL=$P(LEXDVAL,"^",1)
"RTN","LEXDVO",35,0)
 Q:LEXDVAL=""&(LEXDNAM="")  I LEXDVAL="",LEXDNAM'="" D  Q
"RTN","LEXDVO",36,0)
 . N LEXDEL S LEXDEL=$$EN^LEXDM2(LEXUSER,LEXAP,3) I +LEXDEL>0 D KILL
"RTN","LEXDVO",37,0)
 D SET
"RTN","LEXDVO",38,0)
 Q
"RTN","LEXDVO",39,0)
MGR(LEXX) ; Multi-user (for Manager options)
"RTN","LEXDVO",40,0)
 ; Do not save vocabulary, return value to manager option
"RTN","LEXDVO",41,0)
 N LEXCA,LEXDVAL,LEXDNAM S LEXCA=$$MOD^LEXDM(3) Q:LEXCA=0 "^"
"RTN","LEXDVO",42,0)
 Q:(LEXCA="^^") "^^" Q:LEXCA="@" "@^Delete vocabulary"
"RTN","LEXDVO",43,0)
 W ! S LEXDVAL=$$EN^LEXDVOS Q:LEXDVAL="^^" "^^"
"RTN","LEXDVO",44,0)
 S LEXX=LEXDVAL Q LEXX
"RTN","LEXDVO",45,0)
SET ; Set default vocabulary
"RTN","LEXDVO",46,0)
 D SET^LEXDSV(LEXUSER,LEXAP,LEXDVAL,LEXDNAM,LEXFLD) Q
"RTN","LEXDVO",47,0)
KILL ; Kill default vocabulary
"RTN","LEXDVO",48,0)
 D SET^LEXDSV(LEXUSER,LEXAP,"@","Delete",LEXFLD) Q
"RTN","LEXDVOS")
0^248^B13847911
"RTN","LEXDVOS",1,0)
LEXDVOS ; ISL Default Vocabulary - Select          ; 09-23-96
"RTN","LEXDVOS",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXDVOS",3,0)
 ;
"RTN","LEXDVOS",4,0)
 ; Special Look-up in file 757.2 Subset Definitions
"RTN","LEXDVOS",5,0)
 ; Entry:  S X=$$EN^LEXDVOS
"RTN","LEXDVOS",6,0)
 ;
"RTN","LEXDVOS",7,0)
 ; Function returns a 2 piece string
"RTN","LEXDVOS",8,0)
 ;  
"RTN","LEXDVOS",9,0)
 ; $P 1    3 character subset mnemonic
"RTN","LEXDVOS",10,0)
 ;  
"RTN","LEXDVOS",11,0)
 ; $P 2    Name of the subset
"RTN","LEXDVOS",12,0)
 ;   
"RTN","LEXDVOS",13,0)
 ; LEX    Array containing pointers to 757.2
"RTN","LEXDVOS",14,0)
 ; LEXA   Users answer to selection
"RTN","LEXDVOS",15,0)
 ; LEXC   Counter
"RTN","LEXDVOS",16,0)
 ; LEXD   Display
"RTN","LEXDVOS",17,0)
 ; LEXF   Re-display starting from #LEXF
"RTN","LEXDVOS",18,0)
 ; LEXI   Incremental Counter
"RTN","LEXDVOS",19,0)
 ; LEXL   Last entry displayed
"RTN","LEXDVOS",20,0)
 ; LEXLN  Line counter
"RTN","LEXDVOS",21,0)
 ; LEXR   Internal Entry Number (Record) in #757.2
"RTN","LEXDVOS",22,0)
 ; LEXT   Re-display up through #LEXT
"RTN","LEXDVOS",23,0)
 ; LEXX   Return value
"RTN","LEXDVOS",24,0)
 ;
"RTN","LEXDVOS",25,0)
EN(LEXX) ; Select a Vocabulary/Subset
"RTN","LEXDVOS",26,0)
 N X,Y,LEX,LEXC,LEXL,LEXR,LEXA,LEXD D TOT
"RTN","LEXDVOS",27,0)
 S LEXD="",(LEXA,LEXX,LEXC,LEXR)=0
"RTN","LEXDVOS",28,0)
 F  S LEXD=$O(^LEXT(757.2,"AA",LEXD)) Q:LEXD=""!(LEXA["^")!(+LEXX>0)  D
"RTN","LEXDVOS",29,0)
 . S LEXR=0
"RTN","LEXDVOS",30,0)
 . F  S LEXR=$O(^LEXT(757.2,"AA",LEXD,LEXR)) Q:+LEXR=0!(LEXA["^")!(+LEXX>0)  D
"RTN","LEXDVOS",31,0)
 . . Q:$P($G(^LEXT(757.2,LEXR,0)),"^",2)=""
"RTN","LEXDVOS",32,0)
 . . Q:$L($P($G(^LEXT(757.2,LEXR,0)),"^",2))'=3
"RTN","LEXDVOS",33,0)
 . . S LEXC=LEXC+1,LEXL=LEXC
"RTN","LEXDVOS",34,0)
 . . S LEX(LEXC)=LEXR,LEX(0)=LEXC
"RTN","LEXDVOS",35,0)
 . . D W(LEXC,LEXR)
"RTN","LEXDVOS",36,0)
 . . D ASK
"RTN","LEXDVOS",37,0)
 D ASK S LEXX=+LEXX K LEX
"RTN","LEXDVOS",38,0)
 I +LEXX>0 S LEXX=$P($G(^LEXT(757.2,+LEXX,0)),"^",2)_"^"_$P($G(^LEXT(757.2,+LEXX,0)),"^",1) Q LEXX
"RTN","LEXDVOS",39,0)
 S:LEXA'["^^" LEXX="^No vocabulary selected" S:LEXA["^^" LEXX="^^"
"RTN","LEXDVOS",40,0)
 Q LEXX
"RTN","LEXDVOS",41,0)
ASK ; Ask for user input
"RTN","LEXDVOS",42,0)
 Q:+LEXX>0  Q:LEXA["^"  Q:+LEXR>0&(LEXC#5'=0)  Q:+LEXR=0&(LEXC#5=0)
"RTN","LEXDVOS",43,0)
 D SEL Q:+LEXA'>0  Q:LEXA>LEXC  S LEXX=$G(LEX(+LEXA))
"RTN","LEXDVOS",44,0)
 Q
"RTN","LEXDVOS",45,0)
SEL ; Select from list
"RTN","LEXDVOS",46,0)
 W ! N X,Y,DIR,DIRUT,DTOUT,DUOUT,DIROUT
"RTN","LEXDVOS",47,0)
 S DIR(0)="NAO^1:"_LEXC
"RTN","LEXDVOS",48,0)
 S DIR("A")="Select SUBSET 1-"_LEXC_":  "
"RTN","LEXDVOS",49,0)
 S (DIR("?"),DIR("??"))="^D SH^LEXDVOS"
"RTN","LEXDVOS",50,0)
 D ^DIR S LEXA=Y
"RTN","LEXDVOS",51,0)
 Q
"RTN","LEXDVOS",52,0)
UOUT ; Up Arrow detected
"RTN","LEXDVOS",53,0)
 S:LEXA["^^" LEXX="^^"
"RTN","LEXDVOS",54,0)
 S:LEXA="^" LEXX="^No vocabulary selected"
"RTN","LEXDVOS",55,0)
 Q
"RTN","LEXDVOS",56,0)
VAL ; No Un Arrow (value)
"RTN","LEXDVOS",57,0)
 I +LEXX>0 D  Q
"RTN","LEXDVOS",58,0)
 . I $D(^LEX(757.41,+LEXX)) D  Q
"RTN","LEXDVOS",59,0)
 . . S LEXX=LEXX_"^"_$P($G(^LEX(757.41,+LEXX,0)),"^",1)
"RTN","LEXDVOS",60,0)
 . S LEXX="^No vocabulary selected"
"RTN","LEXDVOS",61,0)
 S LEXX="^No vocabulary selected"
"RTN","LEXDVOS",62,0)
 Q
"RTN","LEXDVOS",63,0)
SH ; Show help
"RTN","LEXDVOS",64,0)
 N LEXR S LEXR=+($E(X,2,$L(X)))
"RTN","LEXDVOS",65,0)
 I $E(X,1)="?",LEXR>0,LEXR<(LEX(0)+1) D
"RTN","LEXDVOS",66,0)
 . S LEXR=LEX(LEXR) D:'$D(^LEXT(757.2,LEXR,100,1)) NODES,STD Q:'$D(^LEXT(757.2,LEXR,100,1))  D DES
"RTN","LEXDVOS",67,0)
 D:$E(X,1)="?"&(LEXR<1!(LEXR>LEX(0))) STD D:$E(X,1)'="?" STD D RD
"RTN","LEXDVOS",68,0)
 Q
"RTN","LEXDVOS",69,0)
STD ; Standard Help
"RTN","LEXDVOS",70,0)
 W !!,"Enter 1-",LEXC," to select a subset, or ""?"" for help, or ""?#"" for descriptive"
"RTN","LEXDVOS",71,0)
 W !,"help on an entry flagged with an ""*"", or ""^"" to exit or <Return> for more."
"RTN","LEXDVOS",72,0)
 Q
"RTN","LEXDVOS",73,0)
DES ; Description Help
"RTN","LEXDVOS",74,0)
 N LEXLN,LEXI S (LEXLN,LEXI)=0
"RTN","LEXDVOS",75,0)
 W !!,?2,$P(^LEXT(757.2,LEXR,0),"^",1),!
"RTN","LEXDVOS",76,0)
 F  S LEXI=$O(^LEXT(757.2,LEXR,100,LEXI)) Q:+LEXI=0  D
"RTN","LEXDVOS",77,0)
 . W !,?4,^LEXT(757.2,LEXR,100,LEXI,0) S LEXLN=LEXLN+1
"RTN","LEXDVOS",78,0)
 D:LEXLN>4 EOP W ! Q
"RTN","LEXDVOS",79,0)
NODES ; No Description Help Available
"RTN","LEXDVOS",80,0)
 W !!,?2,$P(^LEXT(757.2,LEXR,0),"^",1)," does not have a description",! Q
"RTN","LEXDVOS",81,0)
RD ; Re-Display List
"RTN","LEXDVOS",82,0)
 N LEXF,LEXT S LEXT=+($G(LEXL)),LEXF=(+(LEXT#5)-1)
"RTN","LEXDVOS",83,0)
 S:LEXF<0 LEXF=4 S LEXF=LEXT-LEXF S LEXF=LEXF-1
"RTN","LEXDVOS",84,0)
 F  S LEXF=$O(LEX(LEXF)) Q:+LEXF=0!(LEXF'<(LEXT+1))  D
"RTN","LEXDVOS",85,0)
 . W:LEXF=1 ! D W(LEXF,LEX(LEXF))
"RTN","LEXDVOS",86,0)
 Q
"RTN","LEXDVOS",87,0)
W(LEXC,LEXR) ; Write entry
"RTN","LEXDVOS",88,0)
 W !,$J(LEXC,4),".  ",$P(^LEXT(757.2,LEXR,0),"^",1)
"RTN","LEXDVOS",89,0)
 W $S($D(^LEXT(757.2,LEXR,100,1)):"  *",1:"") Q
"RTN","LEXDVOS",90,0)
TOT ; Total Subsets
"RTN","LEXDVOS",91,0)
 N LEXD,LEXR,LEXC S LEXD="",LEXC=0
"RTN","LEXDVOS",92,0)
 F  S LEXD=$O(^LEXT(757.2,"AA",LEXD)) Q:LEXD=""  S LEXR=0 D
"RTN","LEXDVOS",93,0)
 . F  S LEXR=$O(^LEXT(757.2,"AA",LEXD,LEXR)) Q:+LEXR=0  S LEXC=LEXC+1
"RTN","LEXDVOS",94,0)
 W !!,LEXC," Subsets found",!
"RTN","LEXDVOS",95,0)
 Q
"RTN","LEXDVOS",96,0)
EOP ; End of Page 
"RTN","LEXDVOS",97,0)
 W ! N X,Y,DIR,DTOUT,DUOUT,DIRUT,DIROUT S DIR(0)="E" D ^DIR S:X[U LEXA="^" W ! Q
"RTN","LEXEDF1")
0^249^B13998485
"RTN","LEXEDF1",1,0)
LEXEDF1 ; ISL Edit/Display a Definition (Part 1)   ; 09-23-96
"RTN","LEXEDF1",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXEDF1",3,0)
 ;
"RTN","LEXEDF1",4,0)
 N DIC,DIE,DIR,DIROUT,DIRUT,DLAYGO,DR,DTOUT,DUOUT,DA,X,Y
"RTN","LEXEDF1",5,0)
 N LEX,LEXAID,LEXC,LEXDIC0,LEXE,LEXI,LEXL,LEXLC
"RTN","LEXEDF1",6,0)
 N LEXMC,LEXME,LEXMP,LEXS,LEXSAV,LEXST,LEXTY,LEXX
"RTN","LEXEDF1",7,0)
 K X I $D(DUZ)#2=0 G EXIT
"RTN","LEXEDF1",8,0)
ASK ; Ask user to select an expression to edit the definition
"RTN","LEXEDF1",9,0)
 N LEXAP S DIC("A")="Enter a concept to edit definition:  "
"RTN","LEXEDF1",10,0)
 S:'$D(DIC(0)) DIC(0)="QEAM" S LEXAP=1 D ^LEXA1 I X=""!(+Y'>0) G EXIT
"RTN","LEXEDF1",11,0)
 I +Y<3,+Y>0 D  G EXIT
"RTN","LEXEDF1",12,0)
 . W !,"The definition for ",^LEX(757.01,+Y,0)," is not editable"
"RTN","LEXEDF1",13,0)
 S LEXE=$$EXP^LEXEDF2(+Y) G:'$D(LEXE) EXIT
"RTN","LEXEDF1",14,0)
 ;
"RTN","LEXEDF1",15,0)
 I LEXE="" D  G:'$D(LEXE) ASK G:LEXE="" EXIT
"RTN","LEXEDF1",16,0)
 . W !!,"No selection made, try again using the same concept"
"RTN","LEXEDF1",17,0)
AGAIN . ; Ask user to try again using the same expression
"RTN","LEXEDF1",18,0)
 . S %=2 D YN^DICN S DIC(0)=$S(%=1:"QEM",1:"QEAM")
"RTN","LEXEDF1",19,0)
 . S LEXE=$S(%=-1:"",%=2:"",1:%) K:LEXE=% LEXE W:%=1 ! Q:%'=0
"RTN","LEXEDF1",20,0)
 . I '% D  G AGAIN
"RTN","LEXEDF1",21,0)
 . . W !!,"You were given various forms of an expression "
"RTN","LEXEDF1",22,0)
 . . W "(concept, synonyms and"
"RTN","LEXEDF1",23,0)
 . . W !,"lexical variants) to select from.  "
"RTN","LEXEDF1",24,0)
 . . W "Do you wish to try again using"
"RTN","LEXEDF1",25,0)
 . . W !,"the same concept"
"RTN","LEXEDF1",26,0)
 D EDIT(LEXE) G EXIT
"RTN","LEXEDF1",27,0)
EDIT(LEXE) ; Edit the expression definition
"RTN","LEXEDF1",28,0)
 W !,$E(^LEX(757.01,LEXE,0),1,78),! K ^TMP("LEXDEF",$J)
"RTN","LEXEDF1",29,0)
 G:'$D(LEXE) EDITQ
"RTN","LEXEDF1",30,0)
 S LEXMP=0 I $D(^LEX(757.01,LEXE,3,0)) D
"RTN","LEXEDF1",31,0)
 . S ^TMP("LEXDEF",$J,4)="Old Definition:"
"RTN","LEXEDF1",32,0)
 . S ^TMP("LEXDEF",$J,5)=^LEX(757.01,LEXE,3,0),(LEXMP,LEXLC)=0
"RTN","LEXEDF1",33,0)
 . F  S LEXLC=$O(^LEX(757.01,LEXE,3,LEXLC)) Q:+LEXLC=0  D
"RTN","LEXEDF1",34,0)
 . . S LEXMP=LEXLC+5
"RTN","LEXEDF1",35,0)
 . . S ^TMP("LEXDEF",$J,LEXMP)=^LEX(757.01,LEXE,3,LEXLC,0)
"RTN","LEXEDF1",36,0)
 N LEXDIC0 S DA=+LEXE,DIE="^LEX(757.01,",DR="6"
"RTN","LEXEDF1",37,0)
 S:DIC(0)'["L" DIC(0)=DIC(0)_"L" S LEXDIC0=DIC(0),DLAYGO=757
"RTN","LEXEDF1",38,0)
 L +^LEX(757.01,LEXE):1
"RTN","LEXEDF1",39,0)
 I '$T D  G EDITQ
"RTN","LEXEDF1",40,0)
 . W !,"This record is being edited by "
"RTN","LEXEDF1",41,0)
 . W "another user, try again later"
"RTN","LEXEDF1",42,0)
 S LEXSAV=0 D SNAP^LEXEDF2(+LEXE),^DIE,SHOT^LEXEDF2(+LEXE)
"RTN","LEXEDF1",43,0)
 S LEX=$$CHANGE^LEXEDF2
"RTN","LEXEDF1",44,0)
 I +LEX>0 S LEXSAV=$$SAVE^LEXEDF2
"RTN","LEXEDF1",45,0)
 I 'LEXSAV,+LEX>0 D RESTORE^LEXEDF2(+LEXE)
"RTN","LEXEDF1",46,0)
 K DLAYGO,LEXDIC0 L -^LEX(757.01,LEXE) G:+LEX=0!(+LEXSAV=0) RESULTS
"RTN","LEXEDF1",47,0)
 I $D(^LEX(757.01,LEXE,3,0)) D
"RTN","LEXEDF1",48,0)
 . S ^TMP("LEXDEF",$J,1)="TXT:  "_^LEX(757.01,LEXE,0)
"RTN","LEXEDF1",49,0)
 . S ^TMP("LEXDEF",$J,2)="IFN:  "_LEXE,^TMP("LEXDEF",$J,3)=""
"RTN","LEXEDF1",50,0)
 S:LEXMP=0 LEXMP=2
"RTN","LEXEDF1",51,0)
 I $D(^LEX(757.01,LEXE,3,0)) D
"RTN","LEXEDF1",52,0)
 . S ^TMP("LEXDEF",$J,(LEXMP+1))=""
"RTN","LEXEDF1",53,0)
 . S ^TMP("LEXDEF",$J,LEXMP+2)="New Definition:"
"RTN","LEXEDF1",54,0)
 . S ^TMP("LEXDEF",$J,LEXMP+3)=^LEX(757.01,LEXE,3,0)
"RTN","LEXEDF1",55,0)
 . S LEXMP=LEXMP+4
"RTN","LEXEDF1",56,0)
 . S LEXLC=0 F  S LEXLC=$O(^LEX(757.01,LEXE,3,LEXLC)) Q:+LEXLC=0  D
"RTN","LEXEDF1",57,0)
 . . S ^TMP("LEXDEF",$J,LEXMP)=^LEX(757.01,LEXE,3,LEXLC,0)
"RTN","LEXEDF1",58,0)
 . . S LEXMP=LEXMP+1
"RTN","LEXEDF1",59,0)
 D:+LEX>0&(+LEXSAV>0) SENDDEF
"RTN","LEXEDF1",60,0)
RESULTS ; Display results of edit
"RTN","LEXEDF1",61,0)
 I +LEXSAV=0 D
"RTN","LEXEDF1",62,0)
 . I +LEX W !,"Changes to the definition were not saved" Q
"RTN","LEXEDF1",63,0)
 . W !,"No changes made"
"RTN","LEXEDF1",64,0)
 I +LEXSAV>0 W !,$P(LEX,U,2)
"RTN","LEXEDF1",65,0)
EDITQ ; Quit edit
"RTN","LEXEDF1",66,0)
 K DIC,DIE,DIR,DLAYGO,DR,LEX,LEXAID,LEXC,LEXDIC0
"RTN","LEXEDF1",67,0)
 K LEXE,LEXI,LEXL,LEXLC,LEXMC,LEXME,LEXMP,LEXS
"RTN","LEXEDF1",68,0)
 K LEXSAV,LEXST,LEXTY,LEXX,^TMP("LEXDEF",$J) Q
"RTN","LEXEDF1",69,0)
DISP(LEXX) ; Display a definition
"RTN","LEXEDF1",70,0)
 Q:+($G(LEXX))=0  I '$D(^LEX(757.01,LEXX,3,1,0)) Q
"RTN","LEXEDF1",71,0)
 N X S X=0 F  S X=$O(^LEX(757.01,LEXX,3,X)) Q:+X=0  D
"RTN","LEXEDF1",72,0)
 . W:X=1 !!,"Definition:  ",! W !,^LEX(757.01,LEXX,3,X,0)
"RTN","LEXEDF1",73,0)
 Q
"RTN","LEXEDF1",74,0)
EXIT ; Clean up and exit
"RTN","LEXEDF1",75,0)
 K DIC,DIE,DIR,DLAYGO,DR,DA,X,Y,LEX,LEXAID,LEXC,LEXDIC0
"RTN","LEXEDF1",76,0)
 K LEXE,LEXI,LEXL,LEXLC,LEXMC,LEXME,LEXMP,LEXS
"RTN","LEXEDF1",77,0)
 K LEXSAV,LEXST,LEXTY,LEXX,^TMP("LEXDEF",$J) Q
"RTN","LEXEDF1",78,0)
SENDDEF ; Send edited definition to ISC
"RTN","LEXEDF1",79,0)
 N DIFROM K XMZ Q:'$D(^TMP("LEXDEF",$J))
"RTN","LEXEDF1",80,0)
 S XMSUB=$P(LEX,U,2)_" in Expression File (#757.01)"
"RTN","LEXEDF1",81,0)
 S XMY("G.LEXICON@ISC-SLC.VA.GOV")=""
"RTN","LEXEDF1",82,0)
 S XMTEXT="^TMP(""LEXDEF"",$J,",XMDUZ=.5 D ^XMD
"RTN","LEXEDF1",83,0)
 K ^TMP("LEXDEF",$J),XCNP,XMDUZ,XMY("G.LEXICON@ISC-SLC.VA.GOV"),XMZ
"RTN","LEXEDF1",84,0)
 K XMSUB,XMY,XMTEXT
"RTN","LEXEDF1",85,0)
 Q
"RTN","LEXEDF2")
0^250^B21442230
"RTN","LEXEDF2",1,0)
LEXEDF2 ; ISL Edit/Display a Definition (Part 2)   ; 09-23-96
"RTN","LEXEDF2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXEDF2",3,0)
 ;
"RTN","LEXEDF2",4,0)
EXP(LEXX) ; Select an expression
"RTN","LEXEDF2",5,0)
 N Y,LEXS,LEXC,LEXMC,LEXE,LEXI,LEXME S Y=LEXX,(LEXS,LEXC)=0
"RTN","LEXEDF2",6,0)
 S LEXMC=$P($G(^LEX(757.01,+Y,1)),U,1),LEXME=$P(^LEX(757,LEXMC,0),U,1)
"RTN","LEXEDF2",7,0)
 S ^TMP("LEXE",$J,0)=1,^TMP("LEXE",$J,1)=LEXME,(LEXI,LEXE)=0
"RTN","LEXEDF2",8,0)
 F  S LEXI=$O(^LEX(757.01,"AMC",LEXMC,LEXI)) Q:+LEXI=0  D
"RTN","LEXEDF2",9,0)
 . I +($P($G(^LEX(757.01,LEXI,1)),U,2))>1,+($P($G(^LEX(757.01,LEXI,1)),U,2))<4 D
"RTN","LEXEDF2",10,0)
 . . S ^TMP("LEXE",$J,0)=^TMP("LEXE",$J,0)+1
"RTN","LEXEDF2",11,0)
 . . S ^TMP("LEXE",$J,^TMP("LEXE",$J,0))=LEXI
"RTN","LEXEDF2",12,0)
 W ! W $S(^TMP("LEXE",$J,0)>1:"",1:"Only "),^TMP("LEXE",$J,0)
"RTN","LEXEDF2",13,0)
 W $S(^TMP("LEXE",$J,0)>1:" expressions were ",1:" expression was ")
"RTN","LEXEDF2",14,0)
 W "found representing the selected concept:"
"RTN","LEXEDF2",15,0)
 W:^TMP("LEXE",$J,0)=1 !
"RTN","LEXEDF2",16,0)
 I $D(^TMP("LEXE",$J,0)),^TMP("LEXE",$J,0)>1 D
"RTN","LEXEDF2",17,0)
MULTI . ; Multiple expression found
"RTN","LEXEDF2",18,0)
 . K LEXE
"RTN","LEXEDF2",19,0)
 . F LEXC=1:1:^TMP("LEXE",$J,0) Q:((LEXS>0)&(LEXS<LEXC+1))  D
"RTN","LEXEDF2",20,0)
 . . W:LEXC#5=1 ! W !,$J(LEXC,4),": "
"RTN","LEXEDF2",21,0)
 . . N LEXTY S LEXTY=$$TYPE(^TMP("LEXE",$J,LEXC)) W LEXTY
"RTN","LEXEDF2",22,0)
 . . W $E(^LEX(757.01,^TMP("LEXE",$J,LEXC),0),1,64)
"RTN","LEXEDF2",23,0)
 . . W:LEXC#5=0 ! S:LEXC#5=0 LEXS=$$SEL
"RTN","LEXEDF2",24,0)
 . . I LEXS>0&(LEXS<LEXC+1) S LEXE=^TMP("LEXE",$J,LEXS) Q
"RTN","LEXEDF2",25,0)
 . I LEXC#5'=0,+LEXS=0 D
"RTN","LEXEDF2",26,0)
 . . W ! S LEXS=$$SEL
"RTN","LEXEDF2",27,0)
 . . I LEXS>0&(LEXS<LEXC+1) S LEXE=^TMP("LEXE",$J,LEXS)
"RTN","LEXEDF2",28,0)
 I $D(^TMP("LEXE",$J,0)),^TMP("LEXE",$J,0)=1 D
"RTN","LEXEDF2",29,0)
ONE . ; One expression found
"RTN","LEXEDF2",30,0)
 . K LEXE N LEXTY
"RTN","LEXEDF2",31,0)
 . S LEXTY=$$TYPE(^TMP("LEXE",$J,1)) W LEXTY
"RTN","LEXEDF2",32,0)
 . W $E(^LEX(757.01,^TMP("LEXE",$J,1),0),1,69)
"RTN","LEXEDF2",33,0)
 . W !," OK" S %=1 D YN^DICN D:'% EXPHLP G:'% ONE
"RTN","LEXEDF2",34,0)
 . S:%=1 LEXE=^TMP("LEXE",$J,1) S:%=-1!(%=2) LEXE="" K %,%Y
"RTN","LEXEDF2",35,0)
 S:'$D(LEXE) LEXE=0 K ^TMP("LEXE",$J),LEXC,LEXS,LEXMC
"RTN","LEXEDF2",36,0)
 S LEXX=LEXE Q LEXX
"RTN","LEXEDF2",37,0)
SEL(X) ; Select expression
"RTN","LEXEDF2",38,0)
 N Y,DTOUT,DUOUT,DIRUT,DIROUT S DIR("A")="Select 1-"_LEXC_":  "
"RTN","LEXEDF2",39,0)
 S DIR("?")="Answer must be from 1 to "_LEXC_", or <Return> to continue"
"RTN","LEXEDF2",40,0)
 S DIR("??")="^D EXPHLP^LEXEDF2"
"RTN","LEXEDF2",41,0)
 S DIR(0)="NAO^1:"_LEXC_":0" D ^DIR S:$D(DTOUT)!(X[U) X=U K DIR Q X
"RTN","LEXEDF2",42,0)
EXPHLP ; Selection help
"RTN","LEXEDF2",43,0)
 W !!,"There are several types of expressions "
"RTN","LEXEDF2",44,0)
 W "which can represent a concept:"
"RTN","LEXEDF2",45,0)
 W !!,"    Major Concept"
"RTN","LEXEDF2",46,0)
 W !,"    Synonym of the Concept"
"RTN","LEXEDF2",47,0)
 W !,"    Lexical Variant of the Concept"
"RTN","LEXEDF2",48,0)
 W !,"    Lexical Variant of a Synonym of the Concept"
"RTN","LEXEDF2",49,0)
 I $D(^TMP("LEXE",$J,0)),^TMP("LEXE",$J,0)>1 D
"RTN","LEXEDF2",50,0)
 . W !!,"You may edit any of these forms of expressions.",!
"RTN","LEXEDF2",51,0)
 . N LEXST,LEXI S:LEXC#5<1 LEXST=1
"RTN","LEXEDF2",52,0)
 . S:LEXC#5>0 LEXST=(((LEXC\5)*5)+1)
"RTN","LEXEDF2",53,0)
 . F LEXI=LEXST:1:LEXC D
"RTN","LEXEDF2",54,0)
 . . W !,$J(LEXI,4),": "
"RTN","LEXEDF2",55,0)
 . . N LEXTY S LEXTY=$$TYPE(^TMP("LEXE",$J,LEXI)) W LEXTY
"RTN","LEXEDF2",56,0)
 . . W $E(^LEX(757.01,^TMP("LEXE",$J,LEXI),0),1,64)
"RTN","LEXEDF2",57,0)
 I $D(^TMP("LEXE",$J,0)),^TMP("LEXE",$J,0)=1 D
"RTN","LEXEDF2",58,0)
 . W !!,"In this case, there are no Synonyms or "
"RTN","LEXEDF2",59,0)
 . W "Lexical Variants to select from,"
"RTN","LEXEDF2",60,0)
 . W !,"you can only edit the Concept",!
"RTN","LEXEDF2",61,0)
 Q
"RTN","LEXEDF2",62,0)
TYPE(LEXX) ; Expression type
"RTN","LEXEDF2",63,0)
 S LEXX=$P(^LEX(757.01,LEXX,1),U,2)
"RTN","LEXEDF2",64,0)
 S:LEXX=1 LEXX="Concept  - " S:LEXX=2 LEXX="Synonym  - " S:LEXX=3 LEXX="Variant  - "
"RTN","LEXEDF2",65,0)
 S:LEXX=991 LEXX="Related  - " S:LEXX=992 LEXX="Modified - " S:LEXX'["-" LEXX="Other    - "
"RTN","LEXEDF2",66,0)
 Q LEXX
"RTN","LEXEDF2",67,0)
SNAP(LEXX) ; Picture of definition before edit
"RTN","LEXEDF2",68,0)
 Q:+($G(LEXX))'>2  S LEXX=+LEXX
"RTN","LEXEDF2",69,0)
 S:'$D(LEXAID) LEXAID="SNAP" K LEX(LEXAID)
"RTN","LEXEDF2",70,0)
 I '$D(^LEX(757.01,LEXX,3,0)) K LEXAID Q
"RTN","LEXEDF2",71,0)
 N LEXC,LEXL S (LEXC,LEXL)=0
"RTN","LEXEDF2",72,0)
 S:$D(^LEX(757.01,LEXX,3,0)) LEX(LEXAID)=^LEX(757.01,LEXX,3,0)
"RTN","LEXEDF2",73,0)
 F  S LEXC=$O(^LEX(757.01,LEXX,3,LEXC)) Q:+LEXC=0  D
"RTN","LEXEDF2",74,0)
 . S LEXL=LEXL+1,LEX(LEXAID,LEXL)=^LEX(757.01,LEXX,3,LEXC,0)
"RTN","LEXEDF2",75,0)
 S:+LEXL>0 LEX(LEXAID,0)=LEXL K LEXAID
"RTN","LEXEDF2",76,0)
 Q
"RTN","LEXEDF2",77,0)
SHOT(LEXX) ; Picture of definition after edit
"RTN","LEXEDF2",78,0)
 S LEXAID="SHOT" D SNAP(LEXX) K LEXAID Q
"RTN","LEXEDF2",79,0)
CHANGE(LEXX) ; Detect change in definition before/after edit
"RTN","LEXEDF2",80,0)
 S LEXX=""
"RTN","LEXEDF2",81,0)
 I '$D(LEX("SNAP")),'$D(LEX("SHOT")) Q "0^Definition not Change"
"RTN","LEXEDF2",82,0)
 I '$D(LEX("SNAP")),$D(LEX("SHOT")) Q "1^Definition Added"
"RTN","LEXEDF2",83,0)
 I $D(LEX("SNAP")),'$D(LEX("SHOT")) Q "1^Definition Deleted"
"RTN","LEXEDF2",84,0)
 I LEX("SNAP",0)'=LEX("SHOT",0) Q "1^Definition Changed"
"RTN","LEXEDF2",85,0)
 N LEXC F LEXC=1:1:LEX("SNAP",0) Q:+LEXC=0!($L($G(LEXX),"^")>1)  D
"RTN","LEXEDF2",86,0)
 . I LEX("SNAP",LEXC)'=LEX("SHOT",LEXC) D
"RTN","LEXEDF2",87,0)
 . . S LEXX="1^Definition Changed"
"RTN","LEXEDF2",88,0)
 I $L($G(LEXX),"^")'>1 S LEXX="0^Definition not Changed"
"RTN","LEXEDF2",89,0)
 Q LEXX
"RTN","LEXEDF2",90,0)
RESTORE(LEXX) ; Restore original definition
"RTN","LEXEDF2",91,0)
 I '$D(LEX("SNAP")) K ^LEX(757.01,LEXX,3) Q
"RTN","LEXEDF2",92,0)
 N LEXC S LEXC=0 K ^LEX(757.01,LEXX,3)
"RTN","LEXEDF2",93,0)
 S ^LEX(757.01,LEXX,3,0)=LEX("SNAP")
"RTN","LEXEDF2",94,0)
 F  S LEXC=$O(LEX("SNAP",LEXC)) Q:+LEXC=0  D
"RTN","LEXEDF2",95,0)
 . S ^LEX(757.01,LEXX,3,LEXC,0)=LEX("SNAP",LEXC)
"RTN","LEXEDF2",96,0)
 Q
"RTN","LEXEDF2",97,0)
SAVE(LEXX) ; Save the edit
"RTN","LEXEDF2",98,0)
 N DTOUT,DUOUT,DIR S DIR(0)="Y^AO"
"RTN","LEXEDF2",99,0)
 S DIR("?",1)="By answering ""Yes"" the proposed changes you have made to"
"RTN","LEXEDF2",100,0)
 S DIR("?")="the definition during this edit session will be stored."
"RTN","LEXEDF2",101,0)
 S DIR("A")="Make changes permanent",DIR("B")="YES"
"RTN","LEXEDF2",102,0)
 D ^DIR K DIR S LEXX=+Y S:$D(DTOUT)!($D(DUOUT)) LEXX=0 Q LEXX
"RTN","LEXERF")
0^251^B6241374
"RTN","LEXERF",1,0)
LEXERF ; ISL Functions for Exc/Rep Words          ; 09-23-96
"RTN","LEXERF",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXERF",3,0)
 ;
"RTN","LEXERF",4,0)
EXIST(X) ; Boolean function returns:
"RTN","LEXERF",5,0)
 ;    0    If X will result in a unsuccessful search (not found)
"RTN","LEXERF",6,0)
 ;    1    If X will result in a successful search (found)
"RTN","LEXERF",7,0)
 ;   IFN   If X has an exact match (found)
"RTN","LEXERF",8,0)
 Q:'$D(X) 0 Q:X="" 0
"RTN","LEXERF",9,0)
 I $D(^LEX(757.01,"AB",$$UP^XLFSTR(X))) Q $O(^LEX(757.01,"AB",$$UP^XLFSTR(X),0))
"RTN","LEXERF",10,0)
 N LEXOK D PTX^LEXTOLKN S LEXOK=1
"RTN","LEXERF",11,0)
 I '$D(^TMP("LEXTKN",$J,0)) K ^TMP("LEXTKN"),LEXOK Q 0
"RTN","LEXERF",12,0)
 I ^TMP("LEXTKN",$J,0)<1 K ^TMP("LEXTKN"),LEXOK Q 0
"RTN","LEXERF",13,0)
 I ^TMP("LEXTKN",$J,0)=1 D  K ^TMP("LEXTKN"),LEXKEY,LEXKEY2 Q LEXOK
"RTN","LEXERF",14,0)
 . S LEXKEY=$O(^TMP("LEXTKN",$J,1,""))
"RTN","LEXERF",15,0)
 . S:$L(LEXKEY)>1 LEXKEY2=$E(LEXKEY,1,$L(LEXKEY)-1)_$C($A($E(LEXKEY,$L(LEXKEY)))-1)_"~"
"RTN","LEXERF",16,0)
 . S:$L(LEXKEY)=1 LEXKEY2=$C($A(LEXKEY)-1)_"~"
"RTN","LEXERF",17,0)
 . S:$G(LEXKEY2)="" LEXKEY2=""
"RTN","LEXERF",18,0)
 . S:LEXKEY="" LEXOK=0 Q:LEXKEY=""
"RTN","LEXERF",19,0)
 . I $O(^LEX(757.01,"AWRD",LEXKEY2))[LEXKEY S LEXOK=1 Q
"RTN","LEXERF",20,0)
 . S LEXOK=0
"RTN","LEXERF",21,0)
 N LEXKEY,LEXKEY2,LEXREC,LEXWRD,LEXOTH,LEXCNT
"RTN","LEXERF",22,0)
 S (LEXOK,LEXREC)=0,LEXKEY=$O(^TMP("LEXTKN",$J,1,""))
"RTN","LEXERF",23,0)
 S LEXKEY2=$S($L(LEXKEY)>1:$E(LEXKEY,1,$L(LEXKEY)-1)_$C($A($E(LEXKEY,$L(LEXKEY)))-1)_"~",$L(LEXKEY)=1:$C($A(LEXKEY)-1)_"~",1:"")
"RTN","LEXERF",24,0)
 I LEXKEY2="" K LEXKEY,LEXKEY2,LEXREC,LEXWRD,LEXOTH,LEXCNT Q 0
"RTN","LEXERF",25,0)
 F  S LEXKEY2=$O(^LEX(757.01,"AWRD",LEXKEY2)) Q:LEXKEY2'[LEXKEY!(LEXOK)  D
"RTN","LEXERF",26,0)
 . S LEXREC=0 F  S LEXREC=$O(^LEX(757.01,"AWRD",LEXKEY2,LEXREC)) Q:+LEXREC=0!(LEXOK)  D
"RTN","LEXERF",27,0)
 . . S (LEXCNT,LEXWRD)=1,LEXOTH="" F  S LEXWRD=$O(^TMP("LEXTKN",$J,LEXWRD)) Q:+LEXWRD=0  D
"RTN","LEXERF",28,0)
 . . . S LEXOTH=$O(^TMP("LEXTKN",$J,LEXWRD,""))
"RTN","LEXERF",29,0)
 . . . S:$$UP^XLFSTR($G(^LEX(757.01,LEXREC,0)))[$$UP^XLFSTR(LEXOTH) LEXCNT=LEXCNT+1
"RTN","LEXERF",30,0)
 . . . S:LEXCNT=^TMP("LEXTKN",$J,0) LEXOK=1 S:LEXCNT'=^TMP("LEXTKN",$J,0) LEXOK=0
"RTN","LEXERF",31,0)
 K ^TMP("LEXTKN"),LEXKEY,LEXWRD,LEXREC,LEXCNT,LEXOTH Q LEXOK
"RTN","LEXERF",32,0)
ADDEXC(X) ; Boolean function returns:
"RTN","LEXERF",33,0)
 ;    0    Not OK to add X to the Excluded Words file #757.04
"RTN","LEXERF",34,0)
 ;    1    OK to add X to the Excluded Words file #757.04
"RTN","LEXERF",35,0)
 Q:X="" 0
"RTN","LEXERF",36,0)
 I +(+($$ISEXC(X))+($$ISREP(X))+($$ISBY(X)))>0 Q 0
"RTN","LEXERF",37,0)
 Q 1
"RTN","LEXERF",38,0)
ISREP(X) ; Boolean function returns:
"RTN","LEXERF",39,0)
 ;    0    If X is not a "Replacement" word
"RTN","LEXERF",40,0)
 ;    1    If X is a "Replacement" word
"RTN","LEXERF",41,0)
 Q:X="" 0 Q:$D(^LEX(757.05,"AB",$$UP^XLFSTR(X))) 1 Q 0
"RTN","LEXERF",42,0)
ISBY(X) ; Boolean function returns:
"RTN","LEXERF",43,0)
 ;    0    If X is not a "Replacement" term
"RTN","LEXERF",44,0)
 ;    1    If X is a "Replacement" term
"RTN","LEXERF",45,0)
 Q:X="" 0 Q:$D(^LEX(757.04,"C",$$UP^XLFSTR(X))) 1 Q 0
"RTN","LEXERF",46,0)
ISEXC(X) ; Boolean function returns:
"RTN","LEXERF",47,0)
 ;    0    If X is not an "Excluded" word
"RTN","LEXERF",48,0)
 ;   IFN   If X is an "Excluded" word
"RTN","LEXERF",49,0)
 Q:X="" 0
"RTN","LEXERF",50,0)
 I $D(^LEX(757.04,"AB",$$UP^XLFSTR(X))) Q $O(^LEX(757.04,"AB",$$UP^XLFSTR(X),0))
"RTN","LEXERF",51,0)
 Q 0
"RTN","LEXERI")
0^252^B25688427
"RTN","LEXERI",1,0)
LEXERI ; ISL Exc/Rep Word Input Transformations   ; 09-23-96
"RTN","LEXERI",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXERI",3,0)
 Q
"RTN","LEXERI",4,0)
 ;
"RTN","LEXERI",5,0)
EXC ; Input transformation for ^LEX(757.04, - .01
"RTN","LEXERI",6,0)
 Q:'$D(X)  S LEXX=X
"RTN","LEXERI",7,0)
 I LEXX[" " D  K X Q
"RTN","LEXERI",8,0)
 . W !,$C(34),X,$C(34)," contains a space"
"RTN","LEXERI",9,0)
 S LEXX=$$CVT(LEXX)
"RTN","LEXERI",10,0)
 I $D(^LEX(757.04,"AB",$E(LEXX,1,40))) D  Q
"RTN","LEXERI",11,0)
 . N LEXDA S LEXDA=$G(DA) I +LEXDA>0,$D(^LEX(757.04,"AB",$E(LEXX,1,40),LEXDA)) Q
"RTN","LEXERI",12,0)
 . W !,$C(34),LEXX,$C(34)," is already defined as an excluded word" K X
"RTN","LEXERI",13,0)
 I $D(^LEX(757.05,"AB",$E(LEXX,1,40))) D  Q
"RTN","LEXERI",14,0)
 . W !,$C(34),LEXX,$C(34)," has been defined as a replacement word (file #757.05)"
"RTN","LEXERI",15,0)
 . W !!,"You can not exclude a word from a search which is to be replaced"
"RTN","LEXERI",16,0)
 . W !,"by another expression prior to performing the search"
"RTN","LEXERI",17,0)
 I $D(^LEX(757.05,"C",$E($$UP^XLFSTR(LEXX),1,40))) D  K X Q
"RTN","LEXERI",18,0)
 . W !,$C(34),LEXX,$C(34)," has been defined as a replacement word (file #757.05)"
"RTN","LEXERI",19,0)
 . W !!,"You can not exclude a word from a search which is to be inserted"
"RTN","LEXERI",20,0)
 . W !,"as replacement text prior to performing the search"
"RTN","LEXERI",21,0)
 S X=LEXX
"RTN","LEXERI",22,0)
 Q
"RTN","LEXERI",23,0)
REP ; Input Transformation for ^LEX(757.05, - .01
"RTN","LEXERI",24,0)
 Q:'$D(X)  S LEXX=X
"RTN","LEXERI",25,0)
 N LEXOK,LEXPSN S LEXOK=1 F LEXPSN=1:1:$L(LEXX) D
"RTN","LEXERI",26,0)
 . I $E(LEXX,LEXPSN)'?1A&($E(LEXX,LEXPSN)'="/") S LEXOK=0
"RTN","LEXERI",27,0)
 I 'LEXOK D  K X Q
"RTN","LEXERI",28,0)
 . W !,"Alpha-numeric expression.  The only punctuation allowed is the slash ""/"""
"RTN","LEXERI",29,0)
 S LEXX=$$CVT(LEXX)
"RTN","LEXERI",30,0)
 I $D(^LEX(757.04,"AB",$E(X,1,40))) N LEX S LEX=0 D  I 'LEX K X Q
"RTN","LEXERI",31,0)
 . W !!,$C(7),$C(34),LEXX,$C(34)," already exist in the Excluded Words file."
"RTN","LEXERI",32,0)
 . W !,"Do you want to delete it from the Excluded Words file"
"RTN","LEXERI",33,0)
 . W !,"and continue to add it as a replacement word?  No//  "
"RTN","LEXERI",34,0)
REP2 . R LEX:300 I '$T!(LEX="")!(LEX[U) S LEX=0 Q
"RTN","LEXERI",35,0)
 . I LEX["?" D  G REP2
"RTN","LEXERI",36,0)
 . . W !!,"Yes",!,"Add ",LEXX," to the Replacement Words file and delete it",!,"from the Excluded Words file"
"RTN","LEXERI",37,0)
 . . W !!,"No",!,"Do not add ",LEXX," to the Replacement Words file and ",!,"retain it in the Excluded Words file"
"RTN","LEXERI",38,0)
 . . W !!,"",!,"Delete?  No//  "
"RTN","LEXERI",39,0)
 . I $E(LEX,1)'="Y"&($E(LEX,1)'="N")&($E(LEX,1)'="y")&($E(LEX,1)'="n") W !!,"",!,"Delete?  No//  " G REP2
"RTN","LEXERI",40,0)
 . I $E(LEX,1)="Y"!($E(LEX,1)="y") S LEX=1 D  Q
"RTN","LEXERI",41,0)
 . . S ZTSAVE("X")="",ZTRTN="DEXC^LEXERI",ZTDESC="Deleting "_X_" from Excluded Words file #757.04"
"RTN","LEXERI",42,0)
 . . S ZTIO="",ZTDTH=$H D ^%ZTLOAD,HOME^%ZIS W:$D(ZTSK) !!,"Deleting "_X_" from Excluded Words file #757.04" K Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN
"RTN","LEXERI",43,0)
 . S LEX=0
"RTN","LEXERI",44,0)
 I $D(^LEX(757.05,"AB",$E(X,1,40))) D  K:+($G(LEX)) LEX,LEXR Q
"RTN","LEXERI",45,0)
 . I $O(^LEX(757.05,"AB",$E(X,1,40),0))=+DA Q
"RTN","LEXERI",46,0)
 . S (LEX,LEXR)=0 F  S LEXR=$O(^LEX(757.05,"AB",$E(X,1,40),LEXR)) D  Q:+LEXR=0
"RTN","LEXERI",47,0)
 . . I +LEXR>0,$D(^LEX(757.05,LEXR,0)),$P(^LEX(757.05,LEXR,0),"^",3)="R" D  S LEXR=0
"RTN","LEXERI",48,0)
 . . . W !!,$C(34),LEXX,$C(34)," already exist in the Replacement Words file (#757.05)"
"RTN","LEXERI",49,0)
 . . . W !,"as a (R)eplaced word.  You may alter the original entry to be a"
"RTN","LEXERI",50,0)
 . . . W !,"(L)inked word, but you can not (R)eplace ",$C(34),LEXX,$C(34)," with multiple"
"RTN","LEXERI",51,0)
 . . . W !,"expressions/concepts",!!
"RTN","LEXERI",52,0)
 . . . S LEX=1
"RTN","LEXERI",53,0)
 S X=LEXX
"RTN","LEXERI",54,0)
 Q
"RTN","LEXERI",55,0)
DEXC ; Delete entry from Excluded Words file #757.04
"RTN","LEXERI",56,0)
 Q:'$D(X)  Q:'$D(^LEX(757.04,"AB",$E(X,1,40)))  S DA=$O(^LEX(757.04,"AB",$E(X,1,40),0)),DIK="^LEX(757.04," D ^DIK K DA,DIK S:$D(ZTQUEUED) ZTREQ="@" Q
"RTN","LEXERI",57,0)
REPBY ; Input Transformation for ^LEX(757.05, - 1
"RTN","LEXERI",58,0)
 Q:'$D(X)  N LEXX S LEXX=$$CVT(X)
"RTN","LEXERI",59,0)
 Q:$D(^LEX(757.05,"C",$E(LEXX,1,40),DA))
"RTN","LEXERI",60,0)
 I '+($$EXIST^LEXERF(LEXX)) D  K X,LEXX Q
"RTN","LEXERI",61,0)
 . W !!,$C(34),LEXX,$C(34)," does not exist in the Lexicon.  You"
"RTN","LEXERI",62,0)
 . W !,"may not replace a word with text not found in the Lexicon,"
"RTN","LEXERI",63,0)
 . W !,"resulting in unsuccessful searches."
"RTN","LEXERI",64,0)
 N LEXOK,LEXJ,LEXI S (LEXOK,LEXJ)=1,LEXI=""
"RTN","LEXERI",65,0)
 F  S LEXI=$P(LEXX," ",LEXJ) D  S LEXJ=LEXJ+1 I 'LEXOK!($P(LEXX," ",LEXJ)="") Q
"RTN","LEXERI",66,0)
 . I $D(^LEX(757.05,"AB",$E(LEXI,1,40))) D
"RTN","LEXERI",67,0)
 . . N LEXR S LEXR=0 W !,LEXI
"RTN","LEXERI",68,0)
 . . F  S LEXR=$O(^LEX(757.05,"AB",$E(LEXI,1,40),LEXR)) D  Q:+LEXR=0
"RTN","LEXERI",69,0)
 . . . I +LEXR'=0,$D(^LEX(757.05,LEXR,0)),$P(^LEX(757.05,LEXR,0),"^",3)="R" D  S LEXR=0
"RTN","LEXERI",70,0)
 . . . . W !!,"WARNING:  Your input contains the word ",$C(34),LEXI,$C(34)," which is"
"RTN","LEXERI",71,0)
 . . . . W !,"already defined in the Replacement Words file (#757.05) as a (R)eplaced"
"RTN","LEXERI",72,0)
 . . . . W !,"word.  This may cause problems (i.e., circular definition of a word) "
"RTN","LEXERI",73,0)
 . . . . W !,"resulting in an unsuccessful search in the Lexicon."
"RTN","LEXERI",74,0)
 . . . . W !!,"   Example of a circular definition:"
"RTN","LEXERI",75,0)
 . . . . W !!,"        Replace:  CA        with   CANCER          and"
"RTN","LEXERI",76,0)
 . . . . W !,"        Replace:  CALCIUM   with   CA         ",!!
"RTN","LEXERI",77,0)
 . . . . W !!,"   Searching for ",$C(34),"CALCIUM",$C(34)," may result in a listing of CANCER's,"
"RTN","LEXERI",78,0)
 . . . . W !,"   depending on the order of replacement."
"RTN","LEXERI",79,0)
 . . . . S LEXOK=0
"RTN","LEXERI",80,0)
 S X=LEXX K:'LEXOK X K LEXOK,LEXI,LEXJ,LEXR,LEXX
"RTN","LEXERI",81,0)
 Q
"RTN","LEXERI",82,0)
CVT(LEXX) ; Convert Text
"RTN","LEXERI",83,0)
 S LEXX=$$UP^XLFSTR(LEXX) N LEXI,LEXJ S LEXJ="" F LEXI=1:1:$L(LEXX) D
"RTN","LEXERI",84,0)
 . I $A($E(LEXX,LEXI))=47!($A($E(LEXX,LEXI))>64&($A($E(LEXX,LEXI))<91)) S LEXJ=LEXJ_$E(LEXX,LEXI)
"RTN","LEXERI",85,0)
 . E  S LEXJ=LEXJ_" "
"RTN","LEXERI",86,0)
 S LEXX=LEXJ K LEXI,LEXJ Q LEXX
"RTN","LEXHLP")
0^253^B24101112
"RTN","LEXHLP",1,0)
LEXHLP ; ISL Help/input transformations           ; 09-23-96
"RTN","LEXHLP",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXHLP",3,0)
 ;
"RTN","LEXHLP",4,0)
EXC ; Excluded Word Help
"RTN","LEXHLP",5,0)
 I '$D(X) Q
"RTN","LEXHLP",6,0)
 S X=$$UP^XLFSTR(X) I $D(^LEX(757.05,"AB",$E(X,1,40))) D  Q
"RTN","LEXHLP",7,0)
 . W !!,$C(7),"""",X,""""," already exist in the Replacement Words file."
"RTN","LEXHLP",8,0)
 . W !,"You can not exclude a word which is to be replaced",!!
"RTN","LEXHLP",9,0)
 . K X
"RTN","LEXHLP",10,0)
 S X=$$UP^XLFSTR(X) I $D(^LEX(757.04,"C",$E(X,1,40))) D  Q
"RTN","LEXHLP",11,0)
 . W !!,$C(7),"""",X,""""," already exist in the Replacement Words file."
"RTN","LEXHLP",12,0)
 . W !,"You can not exclude a replacement word",!!
"RTN","LEXHLP",13,0)
 . K X
"RTN","LEXHLP",14,0)
 Q
"RTN","LEXHLP",15,0)
REP ; Replacement Words Help (replace)
"RTN","LEXHLP",16,0)
 I '$D(X) Q
"RTN","LEXHLP",17,0)
 S X=$$UP^XLFSTR(X) I $D(^LEX(757.04,"AB",$E(X,1,40))) D  Q
"RTN","LEXHLP",18,0)
 . W !!,$C(7),"""",X,""""," already exist in the Excluded Words file."
"RTN","LEXHLP",19,0)
 . W !,"You can not replace an excluded word.",!!
"RTN","LEXHLP",20,0)
 . K X
"RTN","LEXHLP",21,0)
 I $D(^LEX(757.01,"AWRD",X)) D  Q
"RTN","LEXHLP",22,0)
 . W !!,$C(7),"""",X,""""," is indexed as a key word for: ",!
"RTN","LEXHLP",23,0)
 . S LEXREC=0 F  S LEXREC=$O(^LEX(757.01,"AWRD",X,LEXREC)) Q:+LEXREC=0  D
"RTN","LEXHLP",24,0)
 . . W !,?2,^LEX(757.01,LEXREC,0)
"RTN","LEXHLP",25,0)
 . W !!,"You can not alter this keyword/term linkage.",!!
"RTN","LEXHLP",26,0)
 . K LEXREC,X
"RTN","LEXHLP",27,0)
 Q
"RTN","LEXHLP",28,0)
REPBY ; Replacement Words Help (insert)
"RTN","LEXHLP",29,0)
 I '$D(X) Q
"RTN","LEXHLP",30,0)
 S X=$$UP^XLFSTR(X) I $D(^LEX(757.04,"AB",$E(X,1,40))) D  Q
"RTN","LEXHLP",31,0)
 . W !!,$C(7),"""",X,""""," already exist in the Excluded Words file."
"RTN","LEXHLP",32,0)
 . W !,"You can not replace an excluded word.",!!
"RTN","LEXHLP",33,0)
 . K X
"RTN","LEXHLP",34,0)
 Q
"RTN","LEXHLP",35,0)
APPS(X) ; Input Help for ^LEX(757.2 field 8
"RTN","LEXHLP",36,0)
 N LEXOK S LEXOK=1
"RTN","LEXHLP",37,0)
 I '$D(X)!('$D(DA)) Q 0
"RTN","LEXHLP",38,0)
 I $L(X)>3!($L(X)<3) W !,"3 characters, please ",! Q 0
"RTN","LEXHLP",39,0)
 N LEXI,LEXC F LEXI=1:1:3 S LEXC=$A($E(X,LEXI)) D
"RTN","LEXHLP",40,0)
 . I ((LEXC>64)&(LEXC<91))!((LEXC>47)&(LEXC<58)) Q
"RTN","LEXHLP",41,0)
 . S LEXOK=0
"RTN","LEXHLP",42,0)
 K LEXI,LEXC
"RTN","LEXHLP",43,0)
 I 'LEXOK K LEXOK W !,"Invalid characters detected, use any combination of uppercase or numeric ",! Q 0
"RTN","LEXHLP",44,0)
 I X=$P(^LEXT(757.2,DA,0),"^",2) W !,"Cannot be the same as the Short TitLe",LEXOK,! Q 0
"RTN","LEXHLP",45,0)
 Q 1
"RTN","LEXHLP",46,0)
XTLK ; MTLY Help
"RTN","LEXHLP",47,0)
 ;      Uses ^TMP("XTLKHITS",$J), XTLKH, XTLKI, XTLKKSCH("DSPLY"),
"RTN","LEXHLP",48,0)
 ;      XTLKKSCH("GBL"), XTLKMULT, XTLKREF0 and XTLKREF1
"RTN","LEXHLP",49,0)
 N LEXHLPF S LEXHLPF=1
"RTN","LEXHLP",50,0)
 Q:'$D(XTLKHLP)  D XTLKONE:^TMP("XTLKHITS",$J)=1,XTLKSEL:^TMP("XTLKHITS",$J)>1 Q
"RTN","LEXHLP",51,0)
XTLKONE ; Help for a single entry on the selection list
"RTN","LEXHLP",52,0)
 N LEXMC,LEXLN
"RTN","LEXHLP",53,0)
 S LEXMC=$S(LEXSUB="WRD":$P(^LEX(757.01,XTLKI,1),U,1),1:$P(^LEX(757.01,+(@(DIC_XTLKI_",0)")),1),U,1))
"RTN","LEXHLP",54,0)
 S LEXEXP=0 S:+LEXMC>0 LEXEXP=+(^LEX(757,LEXMC,0))
"RTN","LEXHLP",55,0)
 I +LEXEXP'=0,$D(^LEX(757.01,LEXEXP,3,0)) D
"RTN","LEXHLP",56,0)
 . F LEXLN=1:1:$P(^LEX(757.01,LEXEXP,3,0),U,4) D
"RTN","LEXHLP",57,0)
 . . I $D(^LEX(757.01,LEXEXP,3,LEXLN,0)) W !,?2,^LEX(757.01,LEXEXP,3,LEXLN,0)
"RTN","LEXHLP",58,0)
 . . I '(+(LEXLN#5)) D XTLKCON
"RTN","LEXHLP",59,0)
 I $D(LEXLN),(+(LEXLN#5)) D XTLKCON W !
"RTN","LEXHLP",60,0)
 I +LEXEXP'=0,'$D(^LEX(757.01,LEXEXP,3,0)) W !,"Only one match found, select:  ",^LEX(757.01,$S(LEXSUB="WRD":XTLKI,1:+(@(DIC_XTLKI_",0)"))),0),!
"RTN","LEXHLP",61,0)
 K LEXEXP,LEXMC,LEXLN Q
"RTN","LEXHLP",62,0)
XTLKSEL ; Help for a multiple entries on the selection list
"RTN","LEXHLP",63,0)
 I X?1"?"1N.N!(X?2"?"1N.N) D XTLKDEF,XTLKEND W:XTLKH<6 !! Q
"RTN","LEXHLP",64,0)
 D XTLKEND,XTLKRED Q
"RTN","LEXHLP",65,0)
XTLKDEF ; Display an Expression Defintion as part of the Help
"RTN","LEXHLP",66,0)
 S X=$E(X,2,$L(X)) G:X["?" XTLKDEF I +X<1!(+X>XTLKH) Q
"RTN","LEXHLP",67,0)
 N LEXMC,LEXLN,LEXEXP
"RTN","LEXHLP",68,0)
 S LEXMC=$S(LEXSUB="WRD":$P(^LEX(757.01,^TMP("XTLKHITS",$J,+X),1),U,1),1:$P(^LEX(757.01,+(@(DIC_^TMP("XTLKHITS",$J,+X)_",0)")),1),U,1))
"RTN","LEXHLP",69,0)
 S LEXEXP=0 S:+LEXMC>0 LEXEXP=+(^LEX(757,LEXMC,0)) I +LEXEXP'=0,$D(^LEX(757.01,LEXEXP,3,0)) D
"RTN","LEXHLP",70,0)
 . F LEXLN=1:1:$P(^LEX(757.01,LEXEXP,3,0),U,4) D
"RTN","LEXHLP",71,0)
 . . I $D(^LEX(757.01,LEXEXP,3,LEXLN,0)) D
"RTN","LEXHLP",72,0)
 . . . W:LEXLN=1 ! W !,?2,^LEX(757.01,LEXEXP,3,LEXLN,0)
"RTN","LEXHLP",73,0)
 . . I '(+(LEXLN#5)) D XTLKCON
"RTN","LEXHLP",74,0)
 I $D(LEXLN),(+(LEXLN#5)) D XTLKCON
"RTN","LEXHLP",75,0)
 ; W !
"RTN","LEXHLP",76,0)
 K LEXMC,LEXLN,LEXEXP Q
"RTN","LEXHLP",77,0)
XTLKCON ; End of Page
"RTN","LEXHLP",78,0)
 Q:'$D(VALM)  W ! N X,Y,DTOUT,DUOUT,DIRUT,DIROUT,DIR
"RTN","LEXHLP",79,0)
 S DIR("A")="Press <Return> to continue  "
"RTN","LEXHLP",80,0)
 S DIR("?")="Press the <Return> key to continue  ",DIR(0)="EA" D ^DIR Q
"RTN","LEXHLP",81,0)
XTLKEND ; End of Help
"RTN","LEXHLP",82,0)
 W !!,"Answer with # (1-",XTLKH,"), ^ (quit), ^# (jump - ",^TMP("XTLKHITS",$J)," choices), or ?# (help on a term)" Q
"RTN","LEXHLP",83,0)
XTLKRED ; Post-Help, redisplay the last segment of the list
"RTN","LEXHLP",84,0)
 N LEXSTRT,LEXEND S LEXSTRT=(((XTLKH-1)\5)*5)+1,LEXEND=XTLKH
"RTN","LEXHLP",85,0)
 F XTLKH=LEXSTRT:1:LEXEND D
"RTN","LEXHLP",86,0)
 . S (Y,XTLKI)=^TMP("XTLKHITS",$J,XTLKH)
"RTN","LEXHLP",87,0)
 . S XTLKREF0=XTLKREF1_XTLKI_",0)" W:XTLKH=1 !!
"RTN","LEXHLP",88,0)
 . I $D(XTLKKSCH("DSPLY")) D @XTLKKSCH("DSPLY") Q
"RTN","LEXHLP",89,0)
 . W:XTLKMULT $J(XTLKH,4),": " W $P(@(XTLKREF1_"XTLKI,0)"),"^",1),!
"RTN","LEXHLP",90,0)
 W ! K LEXSTRT,LEXEND Q
"RTN","LEXHLP",91,0)
SUB(LEXS) ; Subset help
"RTN","LEXHLP",92,0)
 W ! N X,Y,LEXDICA,LEXDIC0,LEXDICW,LEXDIC S LEXS=""
"RTN","LEXHLP",93,0)
 S:$D(DIC)#2>0 LEXDIC=DIC S:$D(DIC(0)) LEXDIC0=DIC(0) S:$D(DIC("A")) LEXDICA=DIC("A") S:$D(DIC("W")) LEXDICW=DIC("W")
"RTN","LEXHLP",94,0)
 S DIC("A")="Enter the name of a vocabulary to use:  ",DIC("W")="",DIC(0)="AEQM",DIC="^LEXT(757.2," D ^DIC
"RTN","LEXHLP",95,0)
 I +Y>0,$D(^LEXT(757.2,+Y,0)) D
"RTN","LEXHLP",96,0)
 . I $P(^LEXT(757.2,+Y,0),"^",2)'="" S LEXS=$P(^LEXT(757.2,+Y,0),"^",2) Q
"RTN","LEXHLP",97,0)
 . I $D(^LEXT(757.2,+Y,5)),$P(^LEXT(757.2,+Y,5),"^",1)'="" S LEXS=$P(^LEXT(757.2,+Y,5),"^",1) Q
"RTN","LEXHLP",98,0)
 S:$D(LEXDIC) DIC=LEXDIC S:$D(LEXDICW) DIC("W")=LEXDICW S:$D(LEXDIC0) DIC(0)=LEXDIC0 S:$D(LEXDICA) DIC("A")=LEXDICA K:'$D(LEXDICA) DIC("A")
"RTN","LEXHLP",99,0)
 Q LEXS
"RTN","LEXIENV")
0^254^B2220341
"RTN","LEXIENV",1,0)
LEXIENV ; ISL Environment Check                    ; 09-23-96
"RTN","LEXIENV",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXIENV",3,0)
 ;
"RTN","LEXIENV",4,0)
EN N Y
"RTN","LEXIENV",5,0)
 I +($G(XPDENV))=0 D
"RTN","LEXIENV",6,0)
 . W !,"Update",?15,"Clinical Lexicon Utility v 1.0       Problem List v 2.0"
"RTN","LEXIENV",7,0)
 . W !,"To",?15,"Lexicon Utility v 2.0                Problem List v 2.0*7",!
"RTN","LEXIENV",8,0)
 I $S($D(DUZ)[0:1,$D(DUZ(0))[0:1,'DUZ:1,1:0) W !!,$C(7),">> DUZ and DUZ(0) must be defined as an active user to initialize." S XPDQUIT=2
"RTN","LEXIENV",9,0)
 I '$D(^LEX) W !!,$C(7),">> Cannot find Lexicon global, ^LEX must be loaded into or ",!,"   translated to this account" G ABRT
"RTN","LEXIENV",10,0)
 I +($G(XPDENV))>0 G END
"RTN","LEXIENV",11,0)
 W !
"RTN","LEXIENV",12,0)
END ;
"RTN","LEXIENV",13,0)
 Q
"RTN","LEXIENV",14,0)
RTN(X) ; is Routine X in this UCI
"RTN","LEXIENV",15,0)
 S X=$G(X) Q:'$L(X) 0 X ^%ZOSF("TEST") Q $T
"RTN","LEXIENV",16,0)
ABRT ; Abort
"RTN","LEXIENV",17,0)
 W ! S XPDQUIT=1 Q
"RTN","LEXILG")
0^255^B3264267
"RTN","LEXILG",1,0)
LEXILG ; ISL Env/Post for ^LEX and ^GMP           ; 09-23-96
"RTN","LEXILG",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXILG",3,0)
 Q
"RTN","LEXILG",4,0)
PRE ; Pre-Init
"RTN","LEXILG",5,0)
 ; Save User Defaults
"RTN","LEXILG",6,0)
 S U="^" W !,"Saving Lexicon v 1.0 User Defaults",! D:$D(^GMPT) SD^LEXILGU
"RTN","LEXILG",7,0)
 ; Remove Lexicon from MTLU
"RTN","LEXILG",8,0)
 W !,"Removing Lexicon v 1.0 from the Multi-Term Look-up Utility (MTLU)",!
"RTN","LEXILG",9,0)
 D EN^LEXILGX
"RTN","LEXILG",10,0)
 ; Save Lexicon Pointers
"RTN","LEXILG",11,0)
 W !,"Saving Lexicon v 1.0 Pointers",!
"RTN","LEXILG",12,0)
 D SP^LEXILGP
"RTN","LEXILG",13,0)
 ; Rename Lexicon Options
"RTN","LEXILG",14,0)
 W !,"Renaming Lexicon v 1.0 Options",!
"RTN","LEXILG",15,0)
 D:$O(^DIC(19,"B","GMPT "))["GMPT" RE^LEXILGO
"RTN","LEXILG",16,0)
 ; Delete Lexicon v 1.0 DDs
"RTN","LEXILG",17,0)
 W !!,"Deleting Lexicon v 1.0 Data Dictionaries",!
"RTN","LEXILG",18,0)
 D:$D(^DD(757)) DD^LEXILGD
"RTN","LEXILG",19,0)
 Q
"RTN","LEXILG",20,0)
POST ; Post-Init
"RTN","LEXILG",21,0)
 ; Restore User Defaults
"RTN","LEXILG",22,0)
 W !!,"Restoring Lexicon User Defaults for use with Lexicon v 2.0",!
"RTN","LEXILG",23,0)
 S U="^" D RD^LEXILGU,DF^LEXILGU
"RTN","LEXILG",24,0)
 ; Repoint to ^LEX
"RTN","LEXILG",25,0)
 W !,"Repointing Files/Fields for use with Lexicon v 2.0",!
"RTN","LEXILG",26,0)
 D:$D(^TMP("LEXPT")) PL^LEXILGP,DP^LEXILGP
"RTN","LEXILG",27,0)
 ; Check for GMPT Package file entry
"RTN","LEXILG",28,0)
 W !!,"Checking for GMPT Package file entry (not used in Lexicon v 2.0)",!
"RTN","LEXILG",29,0)
 D:$D(^DIC(9.4,"C","GMPT")) DG^LEXILGO
"RTN","LEXILG",30,0)
 ; Check for ^GMP or ^GMPT
"RTN","LEXILG",31,0)
 W !,"Checking for ^GMP or ^GMPT (not used in Lexicon v 2.0)",!
"RTN","LEXILG",32,0)
 D DG^LEXILGD
"RTN","LEXILG",33,0)
 I $D(IOST),IOST["C-" N LEXPOST W !,"  Press <Return> to continue   " R LEXPOST:660
"RTN","LEXILG",34,0)
 ; Mail
"RTN","LEXILG",35,0)
 D EN2^LEXLGM,EN^LEXPL
"RTN","LEXILG",36,0)
 Q
"RTN","LEXILGD")
0^256^B6547962
"RTN","LEXILGD",1,0)
LEXILGD ; ISL Delete Lexicon v 1.0                 ; 09-23-96
"RTN","LEXILGD",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXILGD",3,0)
 Q
"RTN","LEXILGD",4,0)
DD ; Remove Lexicon Version 1.0 Files (DD only)
"RTN","LEXILGD",5,0)
 N CNT,FI,GL,DIC,DIK,DIU S CNT=0
"RTN","LEXILGD",6,0)
 F FI=757,757.01,757.014,757.02,757.03,757.04,757.041,757.05,757.06,757.1,757.11,757.12,757.2,757.21,757.3 D
"RTN","LEXILGD",7,0)
 . S GL=$G(^DIC(FI,0,"GL")) Q:GL=""  Q:GL'["GMP"  S CNT=CNT+1
"RTN","LEXILGD",8,0)
 I +($G(CNT))>10 W !,"This might take quite a while, I've got ",+CNT," Data Dictionaries to Delete.",!
"RTN","LEXILGD",9,0)
 F FI=757,757.01,757.014,757.02,757.03,757.04,757.041,757.05,757.06,757.1,757.11,757.12,757.2,757.21,757.3 D
"RTN","LEXILGD",10,0)
 . S GL=$G(^DIC(FI,0,"GL")) Q:GL=""  Q:GL'["GMP"  D DF W ?4,$P(GL,",",1),") DD " W:'$D(^DD(FI)) "Deleted"
"RTN","LEXILGD",11,0)
 K FI,DIC,DIK,DIU,%,%H,B,DFL,DKP,DMRG,V,W,X,Y Q
"RTN","LEXILGD",12,0)
DF ; Delete Lexicon Version 1.0 Files (Data Dictionary/Data)
"RTN","LEXILGD",13,0)
 Q:'$D(FI)  Q:'$D(^DD(FI))  N DIU S (DIC,DIK)=$G(^DIC(FI,0,"GL")) Q:DIC=""  Q:DIC'["GMP"  S DIU=FI,DIU(0)="T" D EN^DIU2 Q
"RTN","LEXILGD",14,0)
 Q
"RTN","LEXILGD",15,0)
DG ; Remind user to manually delete the Lexicon v 1.0 globals
"RTN","LEXILGD",16,0)
 N LEXFI S LEXFI=756.9999
"RTN","LEXILGD",17,0)
 F  S LEXFI=$O(^DIC(LEXFI)) Q:$E(LEXFI,1,3)'="757"  D
"RTN","LEXILGD",18,0)
 . N LEXSC F LEXSC="AUDIT","DD","DEL","LAYGO","RD","WR" D
"RTN","LEXILGD",19,0)
 . . Q:$D(^DIC(LEXFI,0,LEXSC))  S ^DIC(LEXFI,0,LEXSC)="@"
"RTN","LEXILGD",20,0)
 N OK,FI,GL S OK=1
"RTN","LEXILGD",21,0)
 F FI=757,757.01,757.014,757.02,757.03,757.04,757.041,757.05,757.06,757.1,757.11,757.12,757.2,757.21,757.3 D
"RTN","LEXILGD",22,0)
 . S GL=$G(^DIC(FI,0,"GL")) S:$D(^GMP(FI)) OK=0 S:$D(^GMPT(FI)) OK=0
"RTN","LEXILGD",23,0)
 . Q:FI'=757.2&(GL'["^LEX(")  Q:FI=757.2&(GL'["^LEXT(")
"RTN","LEXILGD",24,0)
 . I GL["^GMP" S OK=0
"RTN","LEXILGD",25,0)
 I 'OK D  H 2 Q
"RTN","LEXILGD",26,0)
 . W:$D(^GMP) !,?4,"^GMP Global Found" W:$D(^GMPT) !,?4,"^GMPT Global Found" W:$D(^GMP)!($D(^GMPT)) !
"RTN","LEXILGD",27,0)
 . W !,?4,"Don't forget to delete the ^GMP and ^GMPT globals"
"RTN","LEXILGD",28,0)
 . W !,?4,"used by the Clinical Lexicon Utility, version 1.0",!
"RTN","LEXILGD",29,0)
 I OK D  H 2 Q
"RTN","LEXILGD",30,0)
 . W:'$D(^GMP) !,?4,"^GMP" W:'$D(^GMPT) " and ^GMPT" W:'$D(^GMP)!('$D(^GMPT)) " Global" W:'$D(^GMP)&('$D(^GMPT)) "s" W:'$D(^GMP)!('$D(^GMPT)) " were not found"
"RTN","LEXILGD",31,0)
 . W !!,?4,"^GMP and ^GMPT were used exclusive by the Clinical"
"RTN","LEXILGD",32,0)
 . W !,?4,"Lexicon Utility, version 1.0",!
"RTN","LEXILGD",33,0)
 Q
"RTN","LEXILGO")
0^257^B7485420
"RTN","LEXILGO",1,0)
LEXILGO ; ISL Rename Options                       ; 09-23-96
"RTN","LEXILGO",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXILGO",3,0)
 Q
"RTN","LEXILGO",4,0)
RE ; Entry point to rename GMPT Options to LEX namespace
"RTN","LEXILGO",5,0)
 N LEX,LEXR,LEXI,LEXT,LEXC,LEXON,LEXOD,LEXNN,LEXND,LEXNP,LEXNPE
"RTN","LEXILGO",6,0)
 I '$D(^DIC(9.4,"C","LEX")) D SPL,OPT,KPL Q
"RTN","LEXILGO",7,0)
OPT ; Rename Options
"RTN","LEXILGO",8,0)
 W !,?2,"Old Name",?40,"New Name"
"RTN","LEXILGO",9,0)
 S (LEXC,LEXNP)=0,LEXR="NAM"
"RTN","LEXILGO",10,0)
 F LEXI=1:1 S LEXT=$T(@LEXR+LEXI) Q:$P(LEXT,";",2)=""  D
"RTN","LEXILGO",11,0)
 . K LEXO S LEXO(99)=0,LEXO(1,0)=$P(LEXT,";",2),LEXO(1,1)=$P(LEXT,";",3),LEXO(2,0)=$P(LEXT,";",4),LEXO(2,1)=$P(LEXT,";",5)
"RTN","LEXILGO",12,0)
 . S LEXO(0)=$O(^DIC(19,"B",$E(LEXO(1,0),1,30),0)) S:LEXO(0)="" LEXO(0)=$O(^DIC(19,"B",$E(LEXO(2,0),1,30),0))
"RTN","LEXILGO",13,0)
 . Q:+($G(LEXO(0)))=0  S LEXO(3,0)=$P(^DIC(19,LEXO(0),0),"^",1),LEXO(3,1)=$P(^DIC(19,LEXO(0),0),"^",2)
"RTN","LEXILGO",14,0)
 . I $G(LEXO(1,0))=$G(LEXO(3,0)),$G(LEXO(1,1))=$G(LEXO(3,1)) S LEXO(99)=1
"RTN","LEXILGO",15,0)
 . I $G(LEXO(2,0))=$G(LEXO(3,0)),$G(LEXO(2,1))=$G(LEXO(3,1)) S LEXO(99)=2
"RTN","LEXILGO",16,0)
 . I $L($G(LEXOPT)),$E(LEXO(1,0),1,$L(LEXOPT))'=LEXOPT Q
"RTN","LEXILGO",17,0)
 . I LEXO(99)=1 D ED(LEXO(0),LEXO(1,0),LEXO(1,1),LEXO(2,0),LEXO(2,1))
"RTN","LEXILGO",18,0)
 . I LEXO(99)=2 D ED(LEXO(0),LEXO(2,0),LEXO(2,1),LEXO(1,0),LEXO(1,1))
"RTN","LEXILGO",19,0)
 K LEXO Q
"RTN","LEXILGO",20,0)
RP ; Rename GMPL only
"RTN","LEXILGO",21,0)
 S LEXOPT="GMPL" D OPT Q
"RTN","LEXILGO",22,0)
ED(LEXIEN,LEXON,LEXOD,LEXNN,LEXND) ; Edit Option file
"RTN","LEXILGO",23,0)
 S LEXC=+($G(LEXC))+1
"RTN","LEXILGO",24,0)
 W !!,?2,LEXON,?40,LEXNN
"RTN","LEXILGO",25,0)
 W !,?2,LEXOD,?40,LEXND
"RTN","LEXILGO",26,0)
 N DA,DR,DIE,DIC S (DIE,DIC)="^DIC(19,",DA=+LEXIEN Q:'$D(@(DIC_DA_",0)"))
"RTN","LEXILGO",27,0)
ED2 ; Record is Locked
"RTN","LEXILGO",28,0)
 L +^DIC(19,DA):1 I '$T W:'$D(ZTQUEUED) "." H 2 G ED2
"RTN","LEXILGO",29,0)
 S DR=".01///^S X=LEXNN;1///^S X=LEXND" D ^DIE L -^DIC(19,DA) Q
"RTN","LEXILGO",30,0)
SPL ; Set Temporary Package file entry for LEX
"RTN","LEXILGO",31,0)
 N DIE,DIC,DA,X,DR,LEX1,LEX2 K DD,DO S DIC="^DIC(9.4,",DIC(0)="EQLM",X="Lexicon Utility",LEX1="LEX",LEX2="Clinical/Non-Clinical Terminology System"
"RTN","LEXILGO",32,0)
 S DIC("DR")="1///^S X=LEX1;2///^S X=LEX2" D FILE^DICN S LEXNP=Y,LEXNPE=+Y Q
"RTN","LEXILGO",33,0)
KPL ; Kill Temporary Package file entry for LEX
"RTN","LEXILGO",34,0)
 S LEXNPE=+($G(LEXNPE)) Q:LEXNPE=0  N DIK,DIC,DA S (DIK,DIC)="^DIC(9.4,",DA=LEXNPE D ^DIK Q
"RTN","LEXILGO",35,0)
DG ; Delete GMPT Package Entry
"RTN","LEXILGO",36,0)
 N DA S DA=$O(^DIC(9.4,"C","GMPT",0))
"RTN","LEXILGO",37,0)
 I +DA>0,$D(^DIC(9.4,+(DA),0)) D  H 1 Q
"RTN","LEXILGO",38,0)
 . W !,?4,"GMPT Package File entry was found"
"RTN","LEXILGO",39,0)
 . W !!,?6,"The GMPT namespace was used by the Clinical Lexicon"
"RTN","LEXILGO",40,0)
 . W !,?6,"Utility version 1.0.  The GMPT Package File entry may"
"RTN","LEXILGO",41,0)
 . W !,?6,"be deleted.  ",!
"RTN","LEXILGO",42,0)
 I +DA=0!('$D(^DIC(9.4,+(DA),0))) D  H 1 Q
"RTN","LEXILGO",43,0)
 . W !,?4,"GMPT Package File entry was not found",!
"RTN","LEXILGO",44,0)
 ;N DIK,DIC S (DIK,DIC)="^DIC(9.4," D ^DIK
"RTN","LEXILGO",45,0)
 Q
"RTN","LEXILGO",46,0)
NAM ; Options - ;old name;old display text;new name;new display text
"RTN","LEXILGO",47,0)
 ;GMPT CLINICAL LEXICON MGT MENU;Clinical Lexicon Management Menu;LEX MGT MENU;Lexicon Management Menu
"RTN","LEXILGO",48,0)
 ;GMPT MGR EDIT TERM;Edit a term;LEX MGR EDIT LEXICON;Edit Lexicon
"RTN","LEXILGO",49,0)
 ;GMPT MGR DEFAULTS;Defaults;LEX MGR DEFAULTS;Defaults
"RTN","LEXILGO",50,0)
 ;GMPT CLINICAL LEXICON UTILITY;Clinical Lexicon Utility;LEX UTILITY;Lexicon Utility
"RTN","LEXILGO",51,0)
 ;GMPT CLINICAL LEXICON LOOK-UP;Clinical Lexicon Look-up;LEX LOOK-UP;Look-up Term
"RTN","LEXILGO",52,0)
 ;GMPT USER DEFAULTS;Lexicon Look-up Defaults;LEX USER DEFAULTS;User Defaults
"RTN","LEXILGO",53,0)
 ;GMPT MGR USER DEFAULTS;Edit User/User Group Defaults;LEX MGR USER DEFAULTS;Edit User/User Group Defaults
"RTN","LEXILGO",54,0)
 ;GMPT MGR LIST DEFAULTS;List User/User Group Defaults;LEX MGR LIST DEFAULTS;List User/User Group Defaults
"RTN","LEXILGO",55,0)
 ;GMPT MGR EDIT DEFN;Edit Term Definition;LEX MGR EDIT DEFN;Edit Term Definition
"RTN","LEXILGO",56,0)
 ;GMPL USER SCREEN;Problem Look-up Defaults;GMPL USER LOOK-UP DEFAULTS;Problem Look-up Defaults
"RTN","LEXILGO",57,0)
 ;;;
"RTN","LEXILGP")
0^258^B6881976
"RTN","LEXILGP",1,0)
LEXILGP ; ISL Save/Restore Pointers                ; 09-23-96
"RTN","LEXILGP",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXILGP",3,0)
 Q
"RTN","LEXILGP",4,0)
SP ; Save "Pointed to by"
"RTN","LEXILGP",5,0)
 N LEXQ,LEXC S LEXQ="^DD(757.01,0,""PT"")",LEXC="^DD(757.01,0,""PT""," F  S LEXQ=$Q(@LEXQ) Q:LEXQ'[LEXC  S ^TMP("LEXPT",757.01,LEXQ)=""
"RTN","LEXILGP",6,0)
 Q
"RTN","LEXILGP",7,0)
ST ; Set "Pointed to by"
"RTN","LEXILGP",8,0)
 N LEXPT S LEXPT="" F  S LEXPT=$O(^TMP("LEXPT",757.01,LEXPT)) Q:LEXPT=""  S @LEXPT=""
"RTN","LEXILGP",9,0)
 K ^TMP("LEXPT",757.01)
"RTN","LEXILGP",10,0)
 Q
"RTN","LEXILGP",11,0)
PL ; Point to LEX
"RTN","LEXILGP",12,0)
 D:'$D(^TMP("LEXPT",757.01)) SP D:$D(^TMP("LEXPT",757.01)) ST N LEXFI,LEXNAM,LEXQ,LEXC,LEXD S LEXFI=""
"RTN","LEXILGP",13,0)
 F  S LEXFI=$O(^DD(757.01,0,"PT",LEXFI)) Q:+LEXFI=0  D
"RTN","LEXILGP",14,0)
 . I '$D(^DD(LEXFI)) K ^DD(757.01,0,"PT",LEXFI) Q
"RTN","LEXILGP",15,0)
 . Q:$E(LEXFI,1,3)["757"  S LEXNAM=$$NM(LEXFI),LEXQ="^DD("_LEXFI_")",LEXC="^DD("_LEXFI_","
"RTN","LEXILGP",16,0)
 . W:$L($G(LEXNAM)) !,?4,LEXNAM F  S LEXQ=$Q(@LEXQ) Q:LEXQ'[LEXC  D
"RTN","LEXILGP",17,0)
 . . S LEXD=@LEXQ Q:LEXD'["GMP(757.01"&(LEXD'["^GMP^")
"RTN","LEXILGP",18,0)
 . . S:LEXD["GMP(757.01" LEXD=$$SW("GMP(757.01","LEX(757.01",LEXD)
"RTN","LEXILGP",19,0)
 . . S:LEXD["^GMP^" LEXD=$$SW("^GMP^","^LEX^",LEXD) S @LEXQ=LEXD
"RTN","LEXILGP",20,0)
 S LEXFI=0 F  S LEXFI=$O(^DD(757.01,0,"PT",LEXFI)) Q:+LEXFI=0  D
"RTN","LEXILGP",21,0)
 . Q:$E(LEXFI,1,3)="757"  K:'$D(^DD(LEXFI)) ^DD(757.01,0,"PT",LEXFI)
"RTN","LEXILGP",22,0)
 Q
"RTN","LEXILGP",23,0)
PG ; Point to GMP
"RTN","LEXILGP",24,0)
 D:'$D(^TMP("LEXPT",757.01)) SP D:$D(^TMP("LEXPT",757.01)) ST N LEXFI,LEXNAM,LEXQ,LEXC,LEXD S LEXFI=""
"RTN","LEXILGP",25,0)
 F  S LEXFI=$O(^DD(757.01,0,"PT",LEXFI)) Q:+LEXFI=0  D
"RTN","LEXILGP",26,0)
 . I '$D(^DD(LEXFI)) K ^DD(757.01,0,"PT",LEXFI) Q
"RTN","LEXILGP",27,0)
 . Q:$E(LEXFI,1,3)["757"  S LEXNAM=$$NM(LEXFI),LEXQ="^DD("_LEXFI_")",LEXC="^DD("_LEXFI_","
"RTN","LEXILGP",28,0)
 . W:$L($G(LEXNAM)) !,?4,LEXNAM F  S LEXQ=$Q(@LEXQ) Q:LEXQ'[LEXC  D
"RTN","LEXILGP",29,0)
 . . S LEXD=@LEXQ Q:LEXD'["LEX(757.01"&(LEXD'["^LEX^")
"RTN","LEXILGP",30,0)
 . . S:LEXD["LEX(757.01" LEXD=$$SW("LEX(757.01","GMP(757.01",LEXD)
"RTN","LEXILGP",31,0)
 . . S:LEXD["^LEX^" LEXD=$$SW("^LEX^","^GMP^",LEXD) S @LEXQ=LEXD
"RTN","LEXILGP",32,0)
 S LEXFI=0 F  S LEXFI=$O(^DD(757.01,0,"PT",LEXFI)) Q:+LEXFI=0  D
"RTN","LEXILGP",33,0)
 . Q:$E(LEXFI,1,3)="757"  K:'$D(^DD(LEXFI)) ^DD(757.01,0,"PT",LEXFI)
"RTN","LEXILGP",34,0)
 Q
"RTN","LEXILGP",35,0)
DP ; Delete pointers in temporary storage - ^TMP("LEXPT")
"RTN","LEXILGP",36,0)
 K ^TMP("LEXPT",757.01) Q
"RTN","LEXILGP",37,0)
SW(LEXF,LEXT,LEXS) ;
"RTN","LEXILGP",38,0)
 Q:'$L($G(LEXF)) "" Q:'$L($G(LEXT)) "" Q:'$L($G(LEXS)) ""
"RTN","LEXILGP",39,0)
 F  Q:LEXS'[LEXF  S LEXS=$P(LEXS,LEXF,1)_LEXT_$P(LEXS,LEXF,2)
"RTN","LEXILGP",40,0)
 Q LEXS
"RTN","LEXILGP",41,0)
NM(X) S X=+($G(X)) Q:X=0 "" Q:'$D(^DD(X,0,"NM")) "" Q $O(^DD(X,0,"NM",""))
"RTN","LEXILGP",42,0)
RT(X) ; Get RT
"RTN","LEXILGP",43,0)
 S:'$D(U) U="^" S X=$C(68),X=U_X_X_$C(40) Q X
"RTN","LEXILGU")
0^259^B6610815
"RTN","LEXILGU",1,0)
LEXILGU ; ISL Save/Restore User Defaults           ; 09-23-96
"RTN","LEXILGU",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXILGU",3,0)
 Q
"RTN","LEXILGU",4,0)
SD ; Save User Defaults from ^GMPT
"RTN","LEXILGU",5,0)
 Q:'$D(^GMPT(757.2))
"RTN","LEXILGU",6,0)
 K ^TMP("LEXDEF",757.01) N LEXDA,LEXN,LEXD,LEXTMP,LEXC,LEXQ
"RTN","LEXILGU",7,0)
 S (LEXTMP,LEXDA)=0 F  S LEXDA=$O(^GMPT(757.2,LEXDA)) Q:+LEXDA=0  D
"RTN","LEXILGU",8,0)
 . Q:'$D(^GMPT(757.2,LEXDA,200))  S LEXQ="^GMPT(757.2,"_LEXDA_",200)",LEXC="^GMPT(757.2,"_LEXDA_",200"
"RTN","LEXILGU",9,0)
 . F  S LEXQ=$Q(@LEXQ) Q:LEXQ'[LEXC  D
"RTN","LEXILGU",10,0)
 . . S LEXTMP=LEXTMP+1
"RTN","LEXILGU",11,0)
 . . S LEXN=LEXQ,LEXD=@LEXQ
"RTN","LEXILGU",12,0)
 . . S LEXN=$$SW("^GMPT(","^LEXT(",LEXN),LEXN=$$SW("GMP","LEX",LEXN)
"RTN","LEXILGU",13,0)
 . . S LEXD=$$SW("^GMPTU","^LEXU",LEXD),LEXD=$$SW("^GMPT","^LEXT",LEXD),LEXD=$$SW("GMP","LEX",LEXD)
"RTN","LEXILGU",14,0)
 . . S ^TMP("LEXDEF",757.01,LEXTMP,0)=LEXN,^TMP("LEXDEF",757.01,LEXTMP,1)=LEXD
"RTN","LEXILGU",15,0)
 S LEXQ="^GMPT(757.2,""AUD"")",LEXC="^GMPT(757.2,""AUD"""
"RTN","LEXILGU",16,0)
 F  S LEXQ=$Q(@LEXQ) Q:LEXQ'[LEXC  D
"RTN","LEXILGU",17,0)
 . S LEXTMP=LEXTMP+1
"RTN","LEXILGU",18,0)
 . S LEXN=LEXQ,LEXD=@LEXQ
"RTN","LEXILGU",19,0)
 . S LEXN=$$SW("^GMPT(","^LEXT(",LEXN),LEXN=$$SW("GMP","LEX",LEXN)
"RTN","LEXILGU",20,0)
 . S LEXD=$$SW("^GMPTU","^LEXU",LEXD),LEXD=$$SW("^GMPT","^LEXT",LEXD),LEXD=$$SW("GMP","LEX",LEXD)
"RTN","LEXILGU",21,0)
 . S ^TMP("LEXDEF",757.01,LEXTMP,0)=LEXN,^TMP("LEXDEF",757.01,LEXTMP,1)=LEXD
"RTN","LEXILGU",22,0)
 Q
"RTN","LEXILGU",23,0)
RD ; Restore User Defaults into ^LEXT
"RTN","LEXILGU",24,0)
 Q:'$D(^TMP("LEXDEF",757.01))  N LEXN,LEXD,LEXC S LEXC=0
"RTN","LEXILGU",25,0)
 F  S LEXC=$O(^TMP("LEXDEF",757.01,LEXC)) Q:+LEXC=0  D
"RTN","LEXILGU",26,0)
 . S LEXN=$G(^TMP("LEXDEF",757.01,LEXC,0)) Q:LEXN=""
"RTN","LEXILGU",27,0)
 . S LEXD=$G(^TMP("LEXDEF",757.01,LEXC,1)),@LEXN=LEXD
"RTN","LEXILGU",28,0)
 Q
"RTN","LEXILGU",29,0)
DF ; Delete user defaults in temporary storage - ^TMP("LEXDEF")
"RTN","LEXILGU",30,0)
 K ^TMP("LEXDEF",757.01) Q
"RTN","LEXILGU",31,0)
RI ; Re-index ^LEXT
"RTN","LEXILGU",32,0)
 Q:$D(^TMP("LEXIDX","STOP"))  N DA S DA=999999999 Q:+($O(^LEXT(757.2,DA)))'=0
"RTN","LEXILGU",33,0)
 F  S DA=$O(^LEXT(757.2,DA)) Q:DA=""!($D(^TMP("LEXIDX","STOP")))  K ^LEXT(757.2,DA)
"RTN","LEXILGU",34,0)
 N DA,LEXP3,LEXP4 S (LEXP3,LEXP4,DA)=0 F  S DA=$O(^LEXT(757.2,DA)) Q:+DA=0!($D(^TMP("LEXIDX","STOP")))  S LEXP3=DA,LEXP4=LEXP4+1,(DIK,DIC)="^LEXT(757.2," D IX1^DIK
"RTN","LEXILGU",35,0)
 I LEXP3>0,LEXP4>0,$D(^LEXT(757.2,0)) S $P(^LEXT(757.2,0),"^",3)=LEXP3,$P(^LEXT(757.2,0),"^",4)=LEXP4
"RTN","LEXILGU",36,0)
 Q
"RTN","LEXILGU",37,0)
SW(LEXF,LEXT,LEXS) ; Switch "GMPT" with "LEX"
"RTN","LEXILGU",38,0)
 Q:'$L($G(LEXF)) "" Q:'$L($G(LEXT)) "" Q:'$L($G(LEXS)) ""
"RTN","LEXILGU",39,0)
 F  Q:LEXS'[LEXF  S LEXS=$P(LEXS,LEXF,1)_LEXT_$P(LEXS,LEXF,2)
"RTN","LEXILGU",40,0)
 Q LEXS
"RTN","LEXILGX")
0^260^B7059394
"RTN","LEXILGX",1,0)
LEXILGX ; ISL Delete GMP from XTLK                 ; 09-23-96
"RTN","LEXILGX",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXILGX",3,0)
 Q
"RTN","LEXILGX",4,0)
EN ; Remove Clinical Lexicon Utility v 1.0 from the XT
"RTN","LEXILGX",5,0)
 N LEXP,LEXIN S LEXP="GMP",U="^"
"RTN","LEXILGX",6,0)
 S LEXIN=$$INST(LEXP) Q:'LEXIN  S:LEXP="GMP"&('$D(^GMP(757.01,0))) ^GMP(757.01,0)="EXPRESSIONS^757.01^^"
"RTN","LEXILGX",7,0)
 S:LEXP="LEX"&('$D(^LEX(757.01,0))) ^LEX(757.01,0)="EXPRESSIONS^757.01^^"
"RTN","LEXILGX",8,0)
 D:$D(^XT(8984.4,757.01)) REMOVE K:LEXP="GMP"&($D(^GMP(757.01,0)))&('$D(^GMP(757.01,1,0))) ^GMP(757.01,0)
"RTN","LEXILGX",9,0)
 K:LEXP="LEX"&($D(^LEX(757.01,0)))&('$D(^LEX(757.01,1,0))) ^LEX(757.01,0)
"RTN","LEXILGX",10,0)
 K ^DD(757.01,0,"PT",8984.1),^DD(757.01,0,"PT",8984.2),^DD(757.01,0,"PT",8984.4)
"RTN","LEXILGX",11,0)
 Q
"RTN","LEXILGX",12,0)
REMOVE ; Remove
"RTN","LEXILGX",13,0)
 D CHECK K %,%I,D0,DG,DICR,DIG,DIH,DIU,DIV,DIW,X,Y Q
"RTN","LEXILGX",14,0)
CHECK ; Check Files
"RTN","LEXILGX",15,0)
 Q:'$D(^XT(8984.4,757.01))  N LEXFI,LEXFN,LEXFL,LEXEN,LEXRT,LEXVP,DIC,DIK,DA
"RTN","LEXILGX",16,0)
 F LEXFI=8984.2,8984.3 D ENT
"RTN","LEXILGX",17,0)
 F LEXFI=8984.1,8984.2 D PTR
"RTN","LEXILGX",18,0)
 S LEXFN=$O(^DD(8984.4,0,"NM","")),(DIC,DIK)="^XT(8984.4,",DA=757.01 D ^DIK Q
"RTN","LEXILGX",19,0)
ENT ; Delete Entries
"RTN","LEXILGX",20,0)
 S LEXFN=$O(^DD(LEXFI,0,"NM","")) N LEXVP S LEXVP=LEXP_"(757.01,"
"RTN","LEXILGX",21,0)
 S (DIC,DIK,LEXRT)="^XT("_LEXFI_",",LEXFL=LEXVP,LEXEN=""
"RTN","LEXILGX",22,0)
 F  S LEXEN=$O(@(LEXRT_"""AC"","""_LEXFL_""","""_LEXEN_""")")) Q:LEXEN=""  D
"RTN","LEXILGX",23,0)
 . S DA=0 F  S DA=$O(@(LEXRT_"""AC"","""_LEXFL_""","""_LEXEN_""","_DA_")")) Q:+DA=0  D ^DIK K:'$D(@(LEXRT_DA_",0)")) @(LEXRT_"""AC"","""_LEXFL_""","""_LEXEN_""","_DA_")")
"RTN","LEXILGX",24,0)
 Q
"RTN","LEXILGX",25,0)
PTR ; Delete Pointers
"RTN","LEXILGX",26,0)
 N LEXNS S LEXNS="",LEXFN=$O(^DD(LEXFI,0,"NM","")) N LEXVP S LEXVP=LEXP_"(757.01,"
"RTN","LEXILGX",27,0)
 S DA=0 F  S DA=$O(^DD(LEXFI,.02,"V","B",757.01,DA)) Q:+DA=0  D
"RTN","LEXILGX",28,0)
 . S LEXNS=$P($G(^DD(LEXFI,.02,"V",DA,0)),"^",4) Q:LEXNS'=LEXP
"RTN","LEXILGX",29,0)
 . K ^DD(LEXFI,.02,"V",DA),^DD(LEXFI,.02,"V","B",757.01,DA),^DD(LEXFI,.02,"V","M","EXPRESSIONS",DA),^DD(LEXFI,.02,"V","O",DA) K:LEXNS'="" ^DD(LEXFI,.02,"V","P",LEXNS,DA)
"RTN","LEXILGX",30,0)
 Q
"RTN","LEXILGX",31,0)
INST(LEXP) ; Is GMP installed?  1 = Yes  0 = No
"RTN","LEXILGX",32,0)
 N LEXNS,LEXINST S LEXINST=0,LEXNS="" Q:'$D(^DD(8984.4)) 0 Q:'$D(^DD(8984.2))&('$D(^DD(8984.3))) 0
"RTN","LEXILGX",33,0)
 F  S LEXNS=$O(^DD(8984.2,.02,"V","P",LEXNS)) Q:LEXNS=""  I LEXNS=LEXP S LEXINST=1
"RTN","LEXILGX",34,0)
 F  S LEXNS=$O(^DD(8984.3,.02,"V","P",LEXNS)) Q:LEXNS=""  I LEXNS=LEXP S LEXINST=1
"RTN","LEXILGX",35,0)
 S LEXP=LEXINST Q LEXP
"RTN","LEXLGM")
0^261^B24621990
"RTN","LEXLGM",1,0)
LEXLGM ; ISL Lexicon Survey (Post Inst/Oper)     ; 09-23-96
"RTN","LEXLGM",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXLGM",3,0)
 ;
"RTN","LEXLGM",4,0)
EN ; Operational Task
"RTN","LEXLGM",5,0)
 K ^TMP("LEXMSG")
"RTN","LEXLGM",6,0)
 S ZTRTN="OPR^LEXLGM",ZTDESC="Lexicon Terms in Problem List",ZTIO="",ZTDTH=$H
"RTN","LEXLGM",7,0)
 D ^%ZTLOAD,HOME^%ZIS K %X,%Y,Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN Q
"RTN","LEXLGM",8,0)
 Q
"RTN","LEXLGM",9,0)
EN2 ; Post-Install Task
"RTN","LEXLGM",10,0)
 K ^TMP("LEXMSG")
"RTN","LEXLGM",11,0)
 S ZTRTN="POST^LEXLGM",ZTDESC="Lexicon Installation",ZTIO="",ZTDTH=$H
"RTN","LEXLGM",12,0)
 D ^%ZTLOAD,HOME^%ZIS K %X,%Y,Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN Q
"RTN","LEXLGM",13,0)
 Q
"RTN","LEXLGM",14,0)
OPR ; Operational Survey
"RTN","LEXLGM",15,0)
 K ^TMP("LEXMSG") N LEXTYPE S LEXTYPE="O"
"RTN","LEXLGM",16,0)
 N LEXQ,LEXVERS,LEXFI,LEXDT,LEXS
"RTN","LEXLGM",17,0)
 D DATE S:'$D(LEXDT) LEXDT="" S LEXVERS=$$VR
"RTN","LEXLGM",18,0)
 D PLT^LEXLGM3,ASOF^LEXLGM3,PLUR^LEXLGM3,SG,SEND
"RTN","LEXLGM",19,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXLGM",20,0)
 Q
"RTN","LEXLGM",21,0)
POST ; Post-Install Survey
"RTN","LEXLGM",22,0)
 K ^TMP("LEXMSG") N LEXTYPE,LEXQ,LEXVERS,LEXFI,LEXDT,LEXS
"RTN","LEXLGM",23,0)
 S LEXTYPE="P" D DATE S:'$D(LEXDT) LEXDT="" S LEXVERS=$$VR
"RTN","LEXLGM",24,0)
 D TITLE,INIT D:+LEXVERS>1 INST,ACCT,WHO D:+LEXVERS'>1 ATTPT,ACCT,WHO
"RTN","LEXLGM",25,0)
 D BL,POST^LEXLGM2,PLUR^LEXLGM3,VER,SG,SEND
"RTN","LEXLGM",26,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXLGM",27,0)
 Q
"RTN","LEXLGM",28,0)
SG ; Show TMP Global
"RTN","LEXLGM",29,0)
 N LEXI S LEXI=0 F  S LEXI=$O(^TMP("LEXMSG",LEXI)) Q:+LEXI=0  W:'$D(ZTQUEUED) !,^TMP("LEXMSG",LEXI)
"RTN","LEXLGM",30,0)
 Q
"RTN","LEXLGM",31,0)
SEND ; Create message to send to ISC-SLC
"RTN","LEXLGM",32,0)
 N DIFROM Q:'$D(ZTQUEUED)  Q:'$L($G(LEXTYPE))  N LEXT S LEXT=$G(LEXTYPE) Q:"OP"'[LEXT
"RTN","LEXLGM",33,0)
 K XMZ S:LEXT="P" XMSUB="Lexicon Installation" S:LEXT="O" XMSUB="Lexicon/Problem List Survey"
"RTN","LEXLGM",34,0)
 S XMY("G.LEXICON@ISC-SLC.VA.GOV")=""
"RTN","LEXLGM",35,0)
 S XMTEXT="^TMP(""LEXMSG"",",XMDUZ=.5 D ^XMD
"RTN","LEXLGM",36,0)
 K ^TMP("LEXMSG"),XCNP,XMDUZ,XMY,XMZ,XMSUB,XMTEXT,XMDUZ,LEXT
"RTN","LEXLGM",37,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXLGM",38,0)
 Q
"RTN","LEXLGM",39,0)
TITLE N LEXS,LEXVERS S LEXS="Lexicon Installation"
"RTN","LEXLGM",40,0)
 S LEXVERS=$P($G(^DD(757.01,0,"VR")),"^",1)
"RTN","LEXLGM",41,0)
 S:+LEXVERS>1 LEXS=LEXS_" v"_LEXVERS D SET($G(LEXS)) Q
"RTN","LEXLGM",42,0)
VER ; Verify
"RTN","LEXLGM",43,0)
 I +($G(LEXQ))>0 D  Q
"RTN","LEXLGM",44,0)
 . D BL S LEXS="Lexicon v 2.0 not completely installed"
"RTN","LEXLGM",45,0)
 . S LEXQ=1 D SET($G(LEXS))
"RTN","LEXLGM",46,0)
 D BL S LEXS="Lexicon v 2.0 installed" D SET($G(LEXS))
"RTN","LEXLGM",47,0)
 Q
"RTN","LEXLGM",48,0)
VR(LEXX) ; Version
"RTN","LEXLGM",49,0)
 S LEXX=$P($G(^DD(757.01,0,"VR")),"^",1) Q LEXX
"RTN","LEXLGM",50,0)
INIT ; Init/Install
"RTN","LEXLGM",51,0)
 N LEXS,LEXR,LEX1,LEX2,LEX4 I $L($T(+2^LEXLGM))>2 D
"RTN","LEXLGM",52,0)
 . S LEX1=$T(+2^LEXLGM)
"RTN","LEXLGM",53,0)
 . S LEX1=$P(LEX1,";",3),LEXR="^DD(",LEX4=1
"RTN","LEXLGM",54,0)
 . S LEX2="Lexicon Utility"
"RTN","LEXLGM",55,0)
 . D BL S LEXS="    Installing Version:" D SET($G(LEXS))
"RTN","LEXLGM",56,0)
 . S LEXS="    "_LEX1 D SET2($G(LEXS))
"RTN","LEXLGM",57,0)
 Q
"RTN","LEXLGM",58,0)
INST ; Installed on
"RTN","LEXLGM",59,0)
 N LEXS
"RTN","LEXLGM",60,0)
 I LEXDT'="" D  Q
"RTN","LEXLGM",61,0)
 . S LEXS="    Installed on:" D SET($G(LEXS))
"RTN","LEXLGM",62,0)
 . S LEXS="    "_LEXDT D SET2($G(LEXS))
"RTN","LEXLGM",63,0)
 D:$L($G(LEXS)) SET($G(LEXS)) Q
"RTN","LEXLGM",64,0)
ATTPT ; Attempted install on
"RTN","LEXLGM",65,0)
 N LEXS I $G(LEXDT)'="" D
"RTN","LEXLGM",66,0)
 . S LEXS="    Installation Attempted on:" D SET($G(LEXS))
"RTN","LEXLGM",67,0)
 . S LEXS=LEXDT D SET2($G(LEXS))
"RTN","LEXLGM",68,0)
 Q
"RTN","LEXLGM",69,0)
ACCT ; Account
"RTN","LEXLGM",70,0)
 N LEXS,LEXA X ^%ZOSF("UCI") S LEXA=Y
"RTN","LEXLGM",71,0)
 S:Y=^%ZOSF("PROD") LEXA=LEXA_" (Production)"
"RTN","LEXLGM",72,0)
 S:Y'=^%ZOSF("PROD") LEXA=LEXA_" (Test)"
"RTN","LEXLGM",73,0)
 S LEXS="    Installation in account:" D SET($G(LEXS))
"RTN","LEXLGM",74,0)
 S LEXS="    "_LEXA D SET2($G(LEXS))
"RTN","LEXLGM",75,0)
 Q
"RTN","LEXLGM",76,0)
WHO ; Installed by
"RTN","LEXLGM",77,0)
 N LEXDUZ,LEXPH S LEXDUZ=+($G(DUZ)) I +LEXDUZ<1 S LEXDUZ="UNKNOWN",LEXPH="" G W2
"RTN","LEXLGM",78,0)
 I '$D(^VA(200,LEXDUZ)) S LEXDUZ="UNKNOWN",LEXPH="" G W2
"RTN","LEXLGM",79,0)
 S LEXPH=$P($G(^VA(200,LEXDUZ,.13)),"^",2)
"RTN","LEXLGM",80,0)
 S:LEXPH="" LEXPH=$P($G(^VA(200,LEXDUZ,.13)),"^",1)
"RTN","LEXLGM",81,0)
 S:LEXPH="" LEXPH=$P($G(^VA(200,LEXDUZ,.13)),"^",3)
"RTN","LEXLGM",82,0)
 S:LEXPH="" LEXPH=$P($G(^VA(200,LEXDUZ,.13)),"^",4)
"RTN","LEXLGM",83,0)
 S LEXDUZ=$P(^VA(200,LEXDUZ,0),"^",1) S:LEXDUZ="" LEXDUZ="UNKNOWN"
"RTN","LEXLGM",84,0)
W2 S LEXS="    Installation by (POC):" D SET($G(LEXS))
"RTN","LEXLGM",85,0)
 S LEXS="    "_LEXDUZ S:LEXPH'="" LEXS=LEXS_"  ("_LEXPH_")"
"RTN","LEXLGM",86,0)
 D SET2($G(LEXS))
"RTN","LEXLGM",87,0)
 Q
"RTN","LEXLGM",88,0)
BL ; Blank Line
"RTN","LEXLGM",89,0)
 D SET("") Q
"RTN","LEXLGM",90,0)
SET(X) ; Set text in ^TMP (col 1)
"RTN","LEXLGM",91,0)
 S X=$G(X) N LEXLC S LEXLC=+($G(^TMP("LEXMSG",0))),LEXLC=LEXLC+1
"RTN","LEXLGM",92,0)
 S ^TMP("LEXMSG",0)=LEXLC,^TMP("LEXMSG",LEXLC)=X
"RTN","LEXLGM",93,0)
 Q
"RTN","LEXLGM",94,0)
SET2(X) ; Set text in ^TMP (col 2)
"RTN","LEXLGM",95,0)
 S X=$G(X) N LEXL,LEXLC,LEX1 S LEXL=32
"RTN","LEXLGM",96,0)
 S LEXLC=+($G(^TMP("LEXMSG",0))),LEX1=$G(^TMP("LEXMSG",LEXLC))
"RTN","LEXLGM",97,0)
 F  Q:$L(LEX1)=LEXL!($L(LEX1)>LEXL)  S LEX1=LEX1_" "
"RTN","LEXLGM",98,0)
 S X=$$TRIM(X),^TMP("LEXMSG",LEXLC)=LEX1_"  "_X
"RTN","LEXLGM",99,0)
 Q
"RTN","LEXLGM",100,0)
TRIM(X) ; Remove spaces from text
"RTN","LEXLGM",101,0)
 S X=$G(X) F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEXLGM",102,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","LEXLGM",103,0)
 Q X
"RTN","LEXLGM",104,0)
DATE ; Installation Date and Time
"RTN","LEXLGM",105,0)
 N %,%H,X,LEXP,LEXMO,LEXDA,LEXYR,LEXHR,LEXMN,LEXSC D NOW^%DTC Q:+($G(%))=0
"RTN","LEXLGM",106,0)
 N LEXP,LEXMO,LEXDA,LEXYR,LEXHR,LEXMN,LEXSC S LEXYR=1700+($E(%,1,3)),LEXP=+($E(%,4,5)),LEXDA=+($E(%,6,7)),LEXHR=$E($P(%,".",2),1,2),LEXMN=$E($P(%,".",2),3,4),LEXSC=$E($P(%,".",2),5,6)
"RTN","LEXLGM",107,0)
 S LEXMO=$S(+LEXP=1:"January",+LEXP=2:"February",+LEXP=3:"March",+LEXP=4:"April",+LEXP=5:"May",+LEXP=6:"June",+LEXP=7:"July",+LEXP=8:"August",+LEXP=9:"September",+LEXP=10:"October",+LEXP=11:"November",+LEXP=12:"December",1:"")
"RTN","LEXLGM",108,0)
 S:$L(LEXSC)=1 LEXSC=LEXSC_"0" I LEXMO'="" S LEXDT=LEXMO_" "_LEXDA_", "_LEXYR_" at "_LEXHR_":"_LEXMN_":"_LEXSC
"RTN","LEXLGM",109,0)
 Q
"RTN","LEXLGM2")
0^262^B12066085
"RTN","LEXLGM2",1,0)
LEXLGM2 ; ISL Lexicon Survey (GBL/DEF/XT/OPT/RTN) ; 09-23-96
"RTN","LEXLGM2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXLGM2",3,0)
 ;
"RTN","LEXLGM2",4,0)
 Q
"RTN","LEXLGM2",5,0)
POST D OGBL,NGBL,UDEF,MTLU,OOPT,NOPT,SPLL,PLRTN
"RTN","LEXLGM2",6,0)
 Q
"RTN","LEXLGM2",7,0)
OGBL ; Old Globals
"RTN","LEXLGM2",8,0)
 N LEXS S LEXS=""
"RTN","LEXLGM2",9,0)
 S:$D(^GMP(757.01,0)) LEXS="    ^GMP Global not Deleted"
"RTN","LEXLGM2",10,0)
 I $D(^GMPT(757.2,0)),LEXS="" D  Q
"RTN","LEXLGM2",11,0)
 . S LEXS="    ^GMPT Global not Deleted" D:$L($G(LEXS)) SET^LEXLGM($G(LEXS))
"RTN","LEXLGM2",12,0)
 I $D(^GMPT(757.2,0)),LEXS'="" D  Q
"RTN","LEXLGM2",13,0)
 . S LEXS="    ^GMP and ^GMPT not Deleted" D:$L($G(LEXS)) SET^LEXLGM($G(LEXS))
"RTN","LEXLGM2",14,0)
 I LEXS="" S LEXS="    Old Globals were Deleted"
"RTN","LEXLGM2",15,0)
 D:$L($G(LEXS)) SET^LEXLGM($G(LEXS)) Q
"RTN","LEXLGM2",16,0)
NGBL ; New Globals
"RTN","LEXLGM2",17,0)
 N LEXS S LEXS=""
"RTN","LEXLGM2",18,0)
 I $D(^LEX),$D(^LEXT) D  Q
"RTN","LEXLGM2",19,0)
 . S LEXS="    New Globals are Installed" D SET2^LEXLGM($G(LEXS))
"RTN","LEXLGM2",20,0)
 I $D(^LEX),'$D(^LEXT) D  Q
"RTN","LEXLGM2",21,0)
 . S LEXS="    Only ^LEX was Installed" D SET2^LEXLGM($G(LEXS))
"RTN","LEXLGM2",22,0)
 I '$D(^LEX),$D(^LEXT) D  Q
"RTN","LEXLGM2",23,0)
 . S LEXS="    Only ^LEXT was Installed" D SET2^LEXLGM($G(LEXS))
"RTN","LEXLGM2",24,0)
 I '$D(^LEX),'$D(^LEXT) D  Q
"RTN","LEXLGM2",25,0)
 . S LEXS="    New Globals were not Installed" D SET2^LEXLGM($G(LEXS))
"RTN","LEXLGM2",26,0)
 D:$L($G(LEXS)) SET2^LEXLGM($G(LEXS)) Q
"RTN","LEXLGM2",27,0)
 Q
"RTN","LEXLGM2",28,0)
UDEF ; User Defaults
"RTN","LEXLGM2",29,0)
 N LEXS S LEXS=""
"RTN","LEXLGM2",30,0)
 I $D(^LEXT(757.2,1,200))!($D(^LEXT(757.2,4,200))) D
"RTN","LEXLGM2",31,0)
 . S LEXS="    User Defaults Transferred" D SET^LEXLGM(LEXS)
"RTN","LEXLGM2",32,0)
 I LEXS="" S LEXS="    User Defaults not found" D SET^LEXLGM(LEXS)
"RTN","LEXLGM2",33,0)
 Q
"RTN","LEXLGM2",34,0)
 ;
"RTN","LEXLGM2",35,0)
MTLU ; Multi-Term Lookup Utility
"RTN","LEXLGM2",36,0)
 N LEXS S LEXS=""
"RTN","LEXLGM2",37,0)
 I $D(^XT(8984.4)),'$D(^XT(8984.4,757.01)) D  Q
"RTN","LEXLGM2",38,0)
 . S LEXS="    Lexicon removed from MTLU" D SET2^LEXLGM(LEXS)
"RTN","LEXLGM2",39,0)
 I $D(^XT(8984.4)),$D(^XT(8984.4,757.01)) D  Q
"RTN","LEXLGM2",40,0)
 . S LEXS="    Lexicon was not removed from MTLU" D SET2^LEXLGM(LEXS)
"RTN","LEXLGM2",41,0)
 S LEXS="    Status of MTLU Unknown" D SET2^LEXLGM(LEXS)
"RTN","LEXLGM2",42,0)
 Q
"RTN","LEXLGM2",43,0)
 ;
"RTN","LEXLGM2",44,0)
OOPT ; Old Options
"RTN","LEXLGM2",45,0)
 N LEXS S LEXS=""
"RTN","LEXLGM2",46,0)
 I $O(^DIC(19,"B","GMPT "))["GMPT " S LEXS="    Old Options were not Deleted" D:$L(LEXS) SET^LEXLGM(LEXS) Q
"RTN","LEXLGM2",47,0)
 I $O(^DIC(19,"B","GMPT "))'["GMPT " S LEXS="    Old Options were Deleted"
"RTN","LEXLGM2",48,0)
 D:$L(LEXS) SET^LEXLGM(LEXS) Q
"RTN","LEXLGM2",49,0)
 ;
"RTN","LEXLGM2",50,0)
NOPT ; New Options
"RTN","LEXLGM2",51,0)
 N LEXS S LEXS=""
"RTN","LEXLGM2",52,0)
 I $O(^DIC(19,"B","LEX "))["LEX " S LEXS="    New Options are Installed" D:$L(LEXS) SET2^LEXLGM(LEXS) Q
"RTN","LEXLGM2",53,0)
 I $O(^DIC(19,"B","LEX "))'["LEX " S LEXS="    New Options are not Installed"
"RTN","LEXLGM2",54,0)
 D:$L(LEXS) SET2^LEXLGM(LEXS) Q
"RTN","LEXLGM2",55,0)
 ;
"RTN","LEXLGM2",56,0)
SPLL ; Special Lookup
"RTN","LEXLGM2",57,0)
 N LEXS S LEXS="" S LEXS=$G(^DD(757.01,0,"DIC"))
"RTN","LEXLGM2",58,0)
 S:LEXS'="" LEXS="    Special Lookup is "_LEXS
"RTN","LEXLGM2",59,0)
 D:$L(LEXS) SET^LEXLGM(LEXS) Q
"RTN","LEXLGM2",60,0)
 ;
"RTN","LEXLGM2",61,0)
PLRTN ; Problem List Routines
"RTN","LEXLGM2",62,0)
 N LEXS,LEXCHK,LEXSTAT S LEXSTAT=""
"RTN","LEXLGM2",63,0)
 F LEXCHK="GMPLBLDC^LEX(757.01","GMPLENFM^LEX(757.01","GMPLHIST^LEX(757.01","GMPLUTL1^LEX(757.01","GMPLX^LEX(757.01" S LEXSTAT=LEXSTAT_$$CHKR(LEXCHK)
"RTN","LEXLGM2",64,0)
 S LEXS=$S(LEXSTAT="11111":"    Problem List calls ^LEX     ",1:"    Problem List calls ^GMP     ")
"RTN","LEXLGM2",65,0)
 D SET2^LEXLGM(LEXS) S:LEXSTAT'="11111" LEXQ=1 Q
"RTN","LEXLGM2",66,0)
CHKR(LEXCHK) ; Check routines for LEX
"RTN","LEXLGM2",67,0)
 N LEXRTN,LEXS,LEXI,LEXOK
"RTN","LEXLGM2",68,0)
 S LEXRTN=$P(LEXCHK,"^",1),LEXS=$P(LEXCHK,"^",2),LEXOK=0
"RTN","LEXLGM2",69,0)
 F LEXI=1:1 Q:'$L($T(+LEXI^@LEXRTN))  I $T(+LEXI^@LEXRTN)[LEXS S LEXOK=1
"RTN","LEXLGM2",70,0)
 S LEXCHK=LEXOK Q LEXCHK
"RTN","LEXLGM3")
0^263^B7643286
"RTN","LEXLGM3",1,0)
LEXLGM3 ; ISL Lexicon Survey (Terms in PL)        ; 09-23-96
"RTN","LEXLGM3",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXLGM3",3,0)
 ;
"RTN","LEXLGM3",4,0)
 Q
"RTN","LEXLGM3",5,0)
PLPL ; Problems in Problem List
"RTN","LEXLGM3",6,0)
 N LEXPLS S LEXPLS=$G(^AUPNPROB(0)),LEXPLS=+($P(LEXPLS,"^",4))
"RTN","LEXLGM3",7,0)
 S LEXS=LEXPLS_" "_$S(LEXPLS=1:"Problem",1:"Problems")_" Found"
"RTN","LEXLGM3",8,0)
 D SET2^LEXLGM(LEXS)
"RTN","LEXLGM3",9,0)
 Q
"RTN","LEXLGM3",10,0)
PLT ; Problem List Title
"RTN","LEXLGM3",11,0)
 N LEXV S LEXV=$G(LEXVERS)
"RTN","LEXLGM3",12,0)
 I +LEXV=0 S LEXS="Lexicon Terms in Problem List " D SET^LEXLGM(LEXS),BL^LEXLGM Q
"RTN","LEXLGM3",13,0)
 I +LEXV>0 S LEXS="Lexicon v"_LEXV_" Terms in Problem List " D SET^LEXLGM(LEXS),BL^LEXLGM Q
"RTN","LEXLGM3",14,0)
 Q
"RTN","LEXLGM3",15,0)
ASOF ; As of date
"RTN","LEXLGM3",16,0)
 I LEXDT'="" D  Q
"RTN","LEXLGM3",17,0)
 . S LEXS="    As of:" D SET^LEXLGM(LEXS)
"RTN","LEXLGM3",18,0)
 . S LEXS="    "_LEXDT D SET2^LEXLGM(LEXS)
"RTN","LEXLGM3",19,0)
 . D BL^LEXLGM
"RTN","LEXLGM3",20,0)
 Q
"RTN","LEXLGM3",21,0)
PLUR ; Problem List Survey of Lexicon Terms
"RTN","LEXLGM3",22,0)
 N LEXN0,LEXN1,LEXDA,LEXPL,LEXUN,LEXUC,LEXCO,LEXPT
"RTN","LEXLGM3",23,0)
 S (LEXDA,LEXPL,LEXUN,LEXUC,LEXCO,LEXPT)=0
"RTN","LEXLGM3",24,0)
 S LEXPT=$O(^ICD9("AB","799.9 ",LEXPT)) Q:LEXPT=0
"RTN","LEXLGM3",25,0)
 F  S LEXDA=$O(^AUPNPROB(LEXDA)) Q:+LEXDA=0  D
"RTN","LEXLGM3",26,0)
 . S LEXN0=$G(^AUPNPROB(LEXDA,0))
"RTN","LEXLGM3",27,0)
 . S LEXN1=$G(^AUPNPROB(LEXDA,1))
"RTN","LEXLGM3",28,0)
 . I +LEXN1>1,+LEXN0=LEXPT S LEXUC=LEXUC+1
"RTN","LEXLGM3",29,0)
 . I +LEXN1=1,+LEXN0=LEXPT S LEXUN=LEXUN+1
"RTN","LEXLGM3",30,0)
 . I +LEXN1>1,+LEXN0'=LEXPT S LEXCO=LEXCO+1
"RTN","LEXLGM3",31,0)
 . S LEXPL=LEXPL+1
"RTN","LEXLGM3",32,0)
 I $G(LEXTYPE)'="O" D  Q
"RTN","LEXLGM3",33,0)
 . S LEXS="    "_LEXPL_" "_$S(LEXPL=1:"Problem",1:"Problems")_" Found" D SET^LEXLGM(LEXS)
"RTN","LEXLGM3",34,0)
 . S LEXS="    "_LEXUN_" Unresolved "_$S(LEXUN=1:"Problem",1:"Problems") D SET2^LEXLGM(LEXS)
"RTN","LEXLGM3",35,0)
 . S LEXS="    "_LEXUC_" Uncoded "_$S(LEXUC=1:"Problem",1:"Problems") D SET^LEXLGM(LEXS)
"RTN","LEXLGM3",36,0)
 . S LEXS="    "_LEXCO_" Coded "_$S(LEXCO=1:"Problem",1:"Problems") D SET2^LEXLGM(LEXS)
"RTN","LEXLGM3",37,0)
 I $G(LEXTYPE)="O" D  Q
"RTN","LEXLGM3",38,0)
 . ; Problems found
"RTN","LEXLGM3",39,0)
 . S LEXS="    "_$S(LEXPL=1:"Problem",1:"Problems")_" Found" D SET^LEXLGM(LEXS)
"RTN","LEXLGM3",40,0)
 . S LEXS=$J(LEXPL,8) D SET2^LEXLGM(LEXS)
"RTN","LEXLGM3",41,0)
 . ; Unresolved
"RTN","LEXLGM3",42,0)
 . S LEXS="    Unresolved "_$S(LEXUN=1:"Problem",1:"Problems") D SET^LEXLGM(LEXS)
"RTN","LEXLGM3",43,0)
 . S LEXS=$J(LEXUN,8) D SET2^LEXLGM(LEXS)
"RTN","LEXLGM3",44,0)
 . ; Uncoded
"RTN","LEXLGM3",45,0)
 . S LEXS="    Uncoded "_$S(LEXUC=1:"Problem",1:"Problems") D SET^LEXLGM(LEXS)
"RTN","LEXLGM3",46,0)
 . S LEXS=$J(LEXUC,8) D SET2^LEXLGM(LEXS)
"RTN","LEXLGM3",47,0)
 . ; Coded
"RTN","LEXLGM3",48,0)
 . S LEXS="    Coded "_$S(LEXCO=1:"Problem",1:"Problems") D SET^LEXLGM(LEXS)
"RTN","LEXLGM3",49,0)
 . S LEXS=$J(LEXCO,8) D SET2^LEXLGM(LEXS)
"RTN","LEXLGM3",50,0)
 Q
"RTN","LEXLGM4")
1^264
"RTN","LEXLGM5")
1^291
"RTN","LEXLK")
0^265^B4258330
"RTN","LEXLK",1,0)
LEXLK ; ISL Demo Look Up                         ; 09-23-96
"RTN","LEXLK",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXLK",3,0)
 ;
"RTN","LEXLK",4,0)
EN ; Initialize variables
"RTN","LEXLK",5,0)
 W @IOF N LEXSF,LEXCONT,LEXCLAS,LEXDEF,LEXDIS,LEXEXP,LEXFORM
"RTN","LEXLK",6,0)
 N LEXFM,LEXMC,LEXCODE,LEXSRC,LEXSO,LEXLINE,LEXSPC,LEXNOM
"RTN","LEXLK",7,0)
 N LEXX,LEXY,LEXYPE,LEXEMP,LEXCHK,X,Y,LEXAP S LEXSF=1
"RTN","LEXLK",8,0)
 W @IOF D LOOK G EXIT
"RTN","LEXLK",9,0)
LOOK ; Look-up term
"RTN","LEXLK",10,0)
 W !! K X S LEXAP=1 D ^LEXA1 K DIC D:+($$Y) MORE
"RTN","LEXLK",11,0)
AGAIN ; Try again?
"RTN","LEXLK",12,0)
 W !,"Try another" S %=$S(+($$X):1,1:2)
"RTN","LEXLK",13,0)
 D YN^DICN I %=-1!(%=2) Q
"RTN","LEXLK",14,0)
 I '% W !!,"You have searched for a term in the Lexicon, do you want to" G AGAIN
"RTN","LEXLK",15,0)
 I +($$X)&(%=1) G LOOK
"RTN","LEXLK",16,0)
 I '+($$X)&(%=1) G LOOK
"RTN","LEXLK",17,0)
 I (+($$X)&(%=2))!('+($$X)&(%=1)) Q
"RTN","LEXLK",18,0)
 G LOOK Q
"RTN","LEXLK",19,0)
MORE ; Do you want more information?
"RTN","LEXLK",20,0)
 W !!,"Do you want more information" S %=1 D YN^DICN Q:%=-1
"RTN","LEXLK",21,0)
 I '% D  G MORE
"RTN","LEXLK",22,0)
 . W !!,"The Lexicon also contains definitions (on most major concepts),"
"RTN","LEXLK",23,0)
 . W !,"codes (from major coding systems, i.e., ICD, CPT, NANDA, etc.),"
"RTN","LEXLK",24,0)
 . W !,"synonyms, lexical variants, and semantic classifications for each"
"RTN","LEXLK",25,0)
 . W !,"term by class and type."
"RTN","LEXLK",26,0)
 Q:%=2  D:%=1 DISP
"RTN","LEXLK",27,0)
 Q
"RTN","LEXLK",28,0)
DISP ; If requested, get and display information
"RTN","LEXLK",29,0)
 Q:'+($$Y)  D GET^LEXLK2(Y) Q:'$G(LEX(0))
"RTN","LEXLK",30,0)
 D LIST^LEXLK2
"RTN","LEXLK",31,0)
 Q
"RTN","LEXLK",32,0)
EXIT ; Clean up environment and quit
"RTN","LEXLK",33,0)
 K %,DIC,DIR,DIROUT,DIRUT,DTOUT,DUOUT,LEX,LEXB,LEXC,LEXCHK,LEXCL
"RTN","LEXLK",34,0)
 K LEXCLAS,LEXCODE,LEXCT,LEXCONT,LEXDEF,LEXDIS,LEXE,LEXEMP
"RTN","LEXLK",35,0)
 K LEXEXP,LEXF,LEXFM,LEXFORM,LEXLC,LEXLINE,LEXLN,LEXMC,LEXMCE
"RTN","LEXLK",36,0)
 K LEXNOM,LEXSCP,LEXSF,LEXSO,LEXSPC,LEXSPCR,LEXSR,LEXSRC
"RTN","LEXLK",37,0)
 K LEXSTR,LEXT,LEXTT,LEXX,LEXY,LEXYPE,X,Y
"RTN","LEXLK",38,0)
 Q
"RTN","LEXLK",39,0)
X(LEX) ; Evaluate X
"RTN","LEXLK",40,0)
 Q:$L($G(X)) 1  Q 0
"RTN","LEXLK",41,0)
Y(LEX) ; Evaluate Y
"RTN","LEXLK",42,0)
 Q:+($G(Y))>1 1  Q 0
"RTN","LEXLK2")
0^266^B19490809
"RTN","LEXLK2",1,0)
LEXLK2 ; ISL Look Up - Expression Attributes      ; 09-23-96
"RTN","LEXLK2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXLK2",3,0)
 ;
"RTN","LEXLK2",4,0)
GET(Y) ; Build list in array LEX
"RTN","LEXLK2",5,0)
 N LEXSPC,LEXSPCR,LEXSTR,LEXDIS,LEXMC,LEXMCE,LEXEXP
"RTN","LEXLK2",6,0)
 S LEXSPC="                                          " K LEX
"RTN","LEXLK2",7,0)
 D MC,SY,LV,DEF,STY,SRC
"RTN","LEXLK2",8,0)
 K LEXC,LEXCODE,LEXCT,LEXDEF,LEXDIS,LEXEMP,LEXEXP,LEXF
"RTN","LEXLK2",9,0)
 K LEXFORM,LEXMC,LEXMCE,LEXNOM,LEXSCP,LEXSO,LEXSPC,LEXSPCR
"RTN","LEXLK2",10,0)
 K LEXSR,LEXSRC,LEXSTR
"RTN","LEXLK2",11,0)
 Q
"RTN","LEXLK2",12,0)
MC ;    Major Concept
"RTN","LEXLK2",13,0)
 S LEXMC=+(^LEX(757.01,+Y,1)),LEXMCE=+Y D BL,BL S LEXSTR="TERMS:" D TL,BL
"RTN","LEXLK2",14,0)
 S LEXSTR="  Concept:  "_$E(^LEX(757.01,+Y,0),1,66) D TL
"RTN","LEXLK2",15,0)
 S LEXDIS=$$T(+Y) S LEXSTR="            "_LEXDIS D TL
"RTN","LEXLK2",16,0)
 Q
"RTN","LEXLK2",17,0)
SY ;    Synonyms
"RTN","LEXLK2",18,0)
 N LEXEXP S LEXEXP=0
"RTN","LEXLK2",19,0)
 F  S LEXEXP=$O(^LEX(757.01,"AMC",+LEXMC,LEXEXP)) Q:+LEXEXP=0  D
"RTN","LEXLK2",20,0)
 . I $P(^LEX(757.01,LEXEXP,1),U,2)=2 D
"RTN","LEXLK2",21,0)
 . . S LEXDIS=$$T(LEXEXP) D BL
"RTN","LEXLK2",22,0)
 . . S LEXSTR="  Synonym:  "_$E(^LEX(757.01,LEXEXP,0),1,66) D TL
"RTN","LEXLK2",23,0)
 . . S LEXSTR="            "_LEXDIS D TL
"RTN","LEXLK2",24,0)
 Q
"RTN","LEXLK2",25,0)
LV ;    Lexical Variants
"RTN","LEXLK2",26,0)
 N LEXEXP S LEXEXP=0
"RTN","LEXLK2",27,0)
 F  S LEXEXP=$O(^LEX(757.01,"AMC",+LEXMC,LEXEXP)) Q:+LEXEXP=0  D
"RTN","LEXLK2",28,0)
 . I $P(^LEX(757.01,LEXEXP,1),U,2)=3 D
"RTN","LEXLK2",29,0)
 . . S LEXDIS=$$T(LEXEXP) D BL
"RTN","LEXLK2",30,0)
 . . S LEXSTR="  Variant:  "_$E(^LEX(757.01,LEXEXP,0),1,66) D TL
"RTN","LEXLK2",31,0)
 . . S LEXSTR="            "_LEXDIS D TL
"RTN","LEXLK2",32,0)
 Q
"RTN","LEXLK2",33,0)
DEF ;    Definition
"RTN","LEXLK2",34,0)
 D BL I $D(^LEX(757.01,+Y,3)) D  D BL
"RTN","LEXLK2",35,0)
 . S LEXSTR="DEFINITION:" D TL,BL N LEXDEF S LEXDEF=0
"RTN","LEXLK2",36,0)
 . F  S LEXDEF=$O(^LEX(757.01,+Y,3,LEXDEF)) Q:+LEXDEF=0  D
"RTN","LEXLK2",37,0)
 . . S LEXSTR="  "_^LEX(757.01,+Y,3,LEXDEF,0) D TL
"RTN","LEXLK2",38,0)
 Q
"RTN","LEXLK2",39,0)
STY ;    Semantic Classes/Types
"RTN","LEXLK2",40,0)
 S LEXSTR="SEMANTICS:" D TL,BL
"RTN","LEXLK2",41,0)
 S LEXSTR="  CLASS                                 TYPE" D TL,BL
"RTN","LEXLK2",42,0)
 N LEXC,LEXT,LEXCT,LEXTT S LEXC="",LEXT=0
"RTN","LEXLK2",43,0)
 F  S LEXC=$O(^LEX(757.1,"AMCC",LEXMC,LEXC)) Q:LEXC=""  D
"RTN","LEXLK2",44,0)
 . S LEXCT=$E($P(^LEX(757.11,+($O(^LEX(757.11,"B",LEXC,0))),0),U,2),1,38)
"RTN","LEXLK2",45,0)
 . S LEXSTR="  "_LEXCT
"RTN","LEXLK2",46,0)
 . S LEXT=0 F  S LEXT=$O(^LEX(757.1,"AMCC",LEXMC,LEXC,LEXT)) Q:+LEXT=0  D
"RTN","LEXLK2",47,0)
 . . S LEXTT=$E($P(^LEX(757.12,+($P(^LEX(757.1,LEXT,0),U,3)),0),U,2),1,38)
"RTN","LEXLK2",48,0)
 . . S LEXSPCR=$E(LEXSPC,1,(40-$L(LEXSTR)))
"RTN","LEXLK2",49,0)
 . . S LEXSTR=LEXSTR_LEXSPCR_LEXTT D TL S LEXSTR=""
"RTN","LEXLK2",50,0)
 Q
"RTN","LEXLK2",51,0)
SRC ;    Classification Systems/Codes
"RTN","LEXLK2",52,0)
 N LEXSR,LEXSO K LEXSRC S LEXSO=0
"RTN","LEXLK2",53,0)
 F  S LEXSO=$O(^LEX(757.02,"AMC",LEXMC,LEXSO)) Q:+LEXSO=0  D
"RTN","LEXLK2",54,0)
 . S LEXNOM=$P(^LEX(757.03,+($P(^LEX(757.02,LEXSO,0),U,3)),0),U,2)
"RTN","LEXLK2",55,0)
 . S LEXSR=$P(^LEX(757.03,+($P(^LEX(757.02,LEXSO,0),U,3)),0),U,3)
"RTN","LEXLK2",56,0)
 . S LEXSPC="" F LEXEMP=15:-1:$L(LEXNOM) S LEXSPC=LEXSPC_" "
"RTN","LEXLK2",57,0)
 . S LEXSR=LEXNOM_LEXSPC_LEXSR,LEXCODE=$P(^LEX(757.02,LEXSO,0),U,2)
"RTN","LEXLK2",58,0)
 . S LEXSRC(LEXSR,LEXCODE)=""
"RTN","LEXLK2",59,0)
 I $D(LEXSRC) D  K LEXSRC
"RTN","LEXLK2",60,0)
 . D BL S LEXSTR="CLASSIFICATION SYSTEMS/CODES:" D TL,BL
"RTN","LEXLK2",61,0)
 . S LEXSR="" F  S LEXSR=$O(LEXSRC(LEXSR)) Q:LEXSR=""  D
"RTN","LEXLK2",62,0)
 . . D BL S LEXSTR="  "_LEXSR D TL
"RTN","LEXLK2",63,0)
 . . S LEXEMP=0,(LEXSTR,LEXCODE)=""
"RTN","LEXLK2",64,0)
 . . F  S LEXCODE=$O(LEXSRC(LEXSR,LEXCODE)) Q:LEXCODE=""  D
"RTN","LEXLK2",65,0)
 . . . S LEXSTR=LEXSTR_"/"_LEXCODE
"RTN","LEXLK2",66,0)
 . . S:$E(LEXSTR,1)="/" LEXSTR=$E(LEXSTR,2,$L(LEXSTR))
"RTN","LEXLK2",67,0)
 . . S LEXSTR="                  "_LEXSTR
"RTN","LEXLK2",68,0)
 . . D:$L(LEXSTR)>18 TL
"RTN","LEXLK2",69,0)
 Q
"RTN","LEXLK2",70,0)
T(X) ; Get Term Type
"RTN","LEXLK2",71,0)
 N LEXSCP,LEXF S LEXF="",LEXFORM="" S LEXEXP=+X,X=""
"RTN","LEXLK2",72,0)
 S LEXSCP=$P(^LEX(757.01,LEXEXP,1),U,3)
"RTN","LEXLK2",73,0)
 S LEXSCP=$S(LEXSCP="D":"Directly Linked to Concept",LEXSCP="I":"Indirectly Linked (via Synonym)",LEXSCP="B":"Broader View of Concept",LEXSCP="N":"Narrower View of Concept",LEXSCP="O":"Other View of Concept",1:"")
"RTN","LEXLK2",74,0)
 S LEXF=$P(^LEX(757.01,LEXEXP,1),U,4) S:+LEXF=0 LEXF=""
"RTN","LEXLK2",75,0)
 S:+LEXF>0 LEXF=$P($G(^LEX(757.014,+LEXF,0)),U,2)
"RTN","LEXLK2",76,0)
 S X=LEXSCP_"/"_LEXF S:$P(X,"/",2)="" X=$P(X,"/",1)
"RTN","LEXLK2",77,0)
 S:$E(X,1)="/" X=$E(X,2,$L(X))
"RTN","LEXLK2",78,0)
 K LEXSCP,LEXF
"RTN","LEXLK2",79,0)
 Q X
"RTN","LEXLK2",80,0)
TL ; Create a Text Line
"RTN","LEXLK2",81,0)
 Q:'$L($G(LEXSTR))  N LEXC S LEXC=+($G(LEX(0))),LEXC=LEXC+1,LEX(LEXC)=LEXSTR,LEX(0)=LEXC Q
"RTN","LEXLK2",82,0)
BL ; Create a Blank Line
"RTN","LEXLK2",83,0)
 N LEXC S LEXC=+($G(LEX(0))),LEXC=LEXC+1,LEX(LEXC)="",LEX(0)=LEXC Q
"RTN","LEXLK2",84,0)
LIST ; List the contents of the LEX array
"RTN","LEXLK2",85,0)
 Q:'$G(LEX(0))  N LEXLC,LEXLN,LEXCONT,LEXCL,LEXE,LEXB
"RTN","LEXLK2",86,0)
 S (LEXLN,LEXLC)=0,LEXCONT=""
"RTN","LEXLK2",87,0)
 F  Q:LEXLN=LEX(0)!(LEXCONT["^")  D  Q:LEXLN=LEX(0)!(LEXCONT["^")
"RTN","LEXLK2",88,0)
 . S LEXB=LEXLN+1,LEXE=LEXB+(IOSL-3)
"RTN","LEXLK2",89,0)
 . F LEXCL=LEXB:1:LEXE I $D(LEX(LEXCL)) W !,LEX(LEXCL) S LEXLN=LEXCL,LEXLC=LEXLC+1
"RTN","LEXLK2",90,0)
 . I LEXLN'=LEX(0) D CONT Q
"RTN","LEXLK2",91,0)
 W ! S LEXLC=LEXLC+1 I LEXLC=(IOSL-3) D CONT
"RTN","LEXLK2",92,0)
 K LEXLC,LEXLN,LEXCONT,LEXCL,LEXE,LEXB
"RTN","LEXLK2",93,0)
 Q
"RTN","LEXLK2",94,0)
CONT ; Continue listing - Press <Return> to Continue
"RTN","LEXLK2",95,0)
 W ! N X,Y S DIR(0)="E" D ^DIR S LEXLC=0,LEXCONT=X
"RTN","LEXLK2",96,0)
 K DIR,DTOUT,DUOUT,DIRUT,DIROUT W !
"RTN","LEXLK2",97,0)
 Q
"RTN","LEXLK2",98,0)
K K LEX Q
"RTN","LEXMTLU")
0^267^B4230043
"RTN","LEXMTLU",1,0)
LEXMTLU ; ISL Setup Appl/User Defaults for Look-up ; 09-23-96
"RTN","LEXMTLU",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXMTLU",3,0)
 ;
"RTN","LEXMTLU",4,0)
EN ; X not set
"RTN","LEXMTLU",5,0)
 S X=$$TERM Q:X=""!(X["^")
"RTN","LEXMTLU",6,0)
 I $D(X),$G(X)'[U,$G(X)'="",$G(X)'=" " D XTLK
"RTN","LEXMTLU",7,0)
 Q
"RTN","LEXMTLU",8,0)
XTLK ;
"RTN","LEXMTLU",9,0)
 N LEXQ S LEXQ=0 D MTLU^LEXSET5
"RTN","LEXMTLU",10,0)
 I '$D(X)!($G(X)[U)!($G(X)="")!($G(X)=" ") S X=$$TERM
"RTN","LEXMTLU",11,0)
 Q:X=""!(X["^")  S XTLKX=X D ^XTLKKWL
"RTN","LEXMTLU",12,0)
 K DIC,LEXAP,LEXLL,LEXSHOW,LEXSUB,LEXUN
"RTN","LEXMTLU",13,0)
 K XTLKKSCH,XTLKSAY,XTLKWD2,XTLKX,XTLKHLP S:+Y'>0 X=""
"RTN","LEXMTLU",14,0)
 Q
"RTN","LEXMTLU",15,0)
TERM(X) ; Get expression
"RTN","LEXMTLU",16,0)
 N DIR,Y S DIR("A")="Enter an expression:  "
"RTN","LEXMTLU",17,0)
 S DIR("?")="Enter a ""free text"" description of a clinical concept, 2 to 245 characters"
"RTN","LEXMTLU",18,0)
 S DIR("??")="^D TERMHLP^LEXSET5" N Y S DIR(0)="FAO^2:245" D ^DIR
"RTN","LEXMTLU",19,0)
 S DIC="^LEX(757.01," S:X[U&(X'["^^") X=U S:X["^^" X="^^" Q:X[U "^"
"RTN","LEXMTLU",20,0)
 I X=" ",+($G(^DISV(DUZ,DIC)))>0 S X=@(DIC_+($G(^DISV(DUZ,DIC)))_",0)") W " ",X
"RTN","LEXMTLU",21,0)
 F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEXMTLU",22,0)
 W:$D(DTOUT) !,"Try later.",! S:$D(DTOUT) X=""
"RTN","LEXMTLU",23,0)
 S:X[U DUOUT=1 K DIR,DIRUT,DIROUT Q X
"RTN","LEXMTLU",24,0)
TERMHLP ; Look-up help
"RTN","LEXMTLU",25,0)
 W !!,"Enter a ""free text"" description of a clinical concept, 2 to 245 characters."
"RTN","LEXMTLU",26,0)
 W !,"Best results occur using either one full word or two/three partial words "
"RTN","LEXMTLU",27,0)
 W !,"without a suffix (i.e., ""DIABETES"",""DIAB MELL"",""DIAB MELL INSUL"")."
"RTN","LEXMTLU",28,0)
 Q
"RTN","LEXMTLU",29,0)
DD ; Display Defaults in ^TMP("LEXSCH",$J)
"RTN","LEXMTLU",30,0)
 N LEXNODE S LEXNODE="^TMP(""LEXSCH"","_$J_")"
"RTN","LEXMTLU",31,0)
 N LEXOK S LEXOK=1 F  S LEXNODE=$Q(@LEXNODE) Q:'LEXOK  D  Q:'LEXOK
"RTN","LEXMTLU",32,0)
 . I LEXNODE'["LEXSCH" S LEXOK=0 Q
"RTN","LEXMTLU",33,0)
 . I LEXNODE'[$J S LEXOK=0 Q
"RTN","LEXMTLU",34,0)
 . W !,LEXNODE,"=",@LEXNODE
"RTN","LEXMTLU",35,0)
 Q
"RTN","LEXNDX1")
0^268^B13157193
"RTN","LEXNDX1",1,0)
LEXNDX1 ; ISL Set/kill indexes (Part 1)            ; 09-23-96
"RTN","LEXNDX1",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXNDX1",3,0)
 ;
"RTN","LEXNDX1",4,0)
S ; Set Expression file (#757.01) word index node AWRD
"RTN","LEXNDX1",5,0)
 Q:'$D(X)!('$D(DA))  Q:$D(DIC)#2=0
"RTN","LEXNDX1",6,0)
 Q:'$D(@(DIC_DA_",0)"))  Q:'$D(@(DIC_DA_",1)"))  Q:+($P(@(DIC_DA_",1)"),U,1))=0
"RTN","LEXNDX1",7,0)
 N LEXIDX,LEXJ,LEXI,LEXTYPE,LEXT S LEXTYPE=+X Q:LEXTYPE'>0
"RTN","LEXNDX1",8,0)
 S LEXT=$P($G(^LEX(757.011,LEXTYPE,0)),"^",2) Q:+LEXT=0
"RTN","LEXNDX1",9,0)
 S LEXTYPE=$P($G(^LEX(757.011,LEXTYPE,0)),"^",1) D:LEXTYPE["DELETED" U
"RTN","LEXNDX1",10,0)
 S X=@(DIC_DA_",0)") S:X'="" ^LEX(757.01,"B",$$UP^XLFSTR($E(X,1,63)),DA)=""
"RTN","LEXNDX1",11,0)
 S LEXEX=$P(^LEX(757,$P(^LEX(757.01,DA,1),U,1),0),U,1),LEXIDX=""
"RTN","LEXNDX1",12,0)
 D PTX^LEXTOLKN
"RTN","LEXNDX1",13,0)
 I $D(^TMP("LEXTKN",$J,0)),^TMP("LEXTKN",$J,0)>0 S LEXI="" F LEXJ=1:1:^TMP("LEXTKN",$J,0) D
"RTN","LEXNDX1",14,0)
 . S LEXI=$O(^TMP("LEXTKN",$J,LEXJ,""))
"RTN","LEXNDX1",15,0)
 . I '$D(^LEX(757.01,"AWRD",LEXI,LEXEX)) D
"RTN","LEXNDX1",16,0)
 . . S:'$D(^LEX(757.01,DA,4,"B",LEXI)) ^LEX(757.01,"AWRD",LEXI,LEXEX,DA)=""
"RTN","LEXNDX1",17,0)
 D L K LEXIDX,LEXEX,LEXI,LEXTYPE,LEXT,LEXJ,^TMP("LEXTKN",$J,0),^TMP("LEXTKN",$J) Q
"RTN","LEXNDX1",18,0)
 ;
"RTN","LEXNDX1",19,0)
K ; Kill Expression file (#757.01) word index node AWRD
"RTN","LEXNDX1",20,0)
 Q:'$D(X)!('$D(DA))  D U
"RTN","LEXNDX1",21,0)
 Q:'$D(^LEX(757.01,DA,0))  Q:+($P(^LEX(757.01,DA,1),U,1))=0
"RTN","LEXNDX1",22,0)
 N LEXTYPE,LEXT S LEXTYPE=+X Q:LEXTYPE'>0
"RTN","LEXNDX1",23,0)
 S LEXT=$P($G(^LEX(757.011,LEXTYPE,0)),"^",2) Q:+LEXT=0
"RTN","LEXNDX1",24,0)
 N LEXIDX,LEXJ,LEXI S X=^LEX(757.01,DA,0),LEXIDX=""
"RTN","LEXNDX1",25,0)
 D PTX^LEXTOLKN I $D(^TMP("LEXTKN",$J,0)),^TMP("LEXTKN",$J,0)>0 S LEXI="" F LEXJ=1:1:^TMP("LEXTKN",$J,0) D
"RTN","LEXNDX1",26,0)
 . S LEXI=$O(^TMP("LEXTKN",$J,LEXJ,""))
"RTN","LEXNDX1",27,0)
 . K ^LEX(757.01,"AWRD",LEXI,DA)
"RTN","LEXNDX1",28,0)
 K LEXIDX,LEXTYPE,LEXI,LEXJ,^TMP("LEXTKN",$J,0),^TMP("LEXTKN",$J) Q
"RTN","LEXNDX1",29,0)
L ; Link words
"RTN","LEXNDX1",30,0)
 N DIC,LEXDEXP D KILL^LEXNDX2 S LEXDEXP=DA
"RTN","LEXNDX1",31,0)
 ;     For Subsets
"RTN","LEXNDX1",32,0)
 I $D(^LEX(757.21,"B",LEXDEXP)) D
"RTN","LEXNDX1",33,0)
 . S DA=0 F  S DA=$O(^LEX(757.21,"B",LEXDEXP,DA)) Q:+DA=0  D
"RTN","LEXNDX1",34,0)
 . . N X S X=$P(^LEX(757.21,DA,0),U,2) Q:+X<1  D SS^LEXNDX2
"RTN","LEXNDX1",35,0)
 ;     For Replacement Words
"RTN","LEXNDX1",36,0)
 I $D(^LEX(757.05,"AEXP",LEXDEXP)) D
"RTN","LEXNDX1",37,0)
 . S DA=0 F  S DA=$O(^LEX(757.05,"AEXP",LEXDEXP,DA)) Q:+DA=0  D
"RTN","LEXNDX1",38,0)
 . . N X,LEXMC S X=$P(^LEX(757.05,DA,0),U,1) Q:X=""
"RTN","LEXNDX1",39,0)
 . . S LEXMC=$P($G(^LEX(757.01,LEXDEXP,1)),U,1) Q:+LEXMC'>0
"RTN","LEXNDX1",40,0)
 . . S ^LEX(757.01,"AWRD",X,LEXDEXP,"LINKED")=""
"RTN","LEXNDX1",41,0)
 S DA=LEXDEXP
"RTN","LEXNDX1",42,0)
 Q
"RTN","LEXNDX1",43,0)
U ; Unlink words
"RTN","LEXNDX1",44,0)
 N DIC,LEXDEXP D KILL^LEXNDX2 S LEXDEXP=DA
"RTN","LEXNDX1",45,0)
 ;     For Subsets
"RTN","LEXNDX1",46,0)
 I $D(^LEX(757.21,"B",LEXDEXP)) D
"RTN","LEXNDX1",47,0)
 . S DA=0 F  S DA=$O(^LEX(757.21,"B",LEXDEXP,DA)) Q:+DA=0  D
"RTN","LEXNDX1",48,0)
 . . N X S X=$P(^LEX(757.21,DA,0),U,2) Q:+X<1  D SK^LEXNDX2
"RTN","LEXNDX1",49,0)
 ;     For Replacement Words
"RTN","LEXNDX1",50,0)
 I $D(^LEX(757.05,"AEXP",LEXDEXP)) D
"RTN","LEXNDX1",51,0)
 . S DA=0 F  S DA=$O(^LEX(757.05,"AEXP",LEXDEXP,DA)) Q:+DA=0  D
"RTN","LEXNDX1",52,0)
 . . N X,LEXMC S X=$P(^LEX(757.05,DA,0),U,1) Q:X=""
"RTN","LEXNDX1",53,0)
 . . S LEXMC=$P($G(^LEX(757.01,LEXDEXP,1)),U,1) Q:+LEXMC'>0
"RTN","LEXNDX1",54,0)
 . . K ^LEX(757.01,"AWRD",X,LEXDEXP,"LINKED")
"RTN","LEXNDX1",55,0)
 S DA=LEXDEXP
"RTN","LEXNDX1",56,0)
 Q
"RTN","LEXNDX1",57,0)
REIDXMC ; Re-Index Expression file word index AWRD
"RTN","LEXNDX1",58,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXNDX1",59,0)
 N LEXIDX,LEXREIX,DA,X S DA=0,X="",(LEXREIX,LEXIDX)="" K ^TMP("LEXSTOP","REIDXMC")
"RTN","LEXNDX1",60,0)
 F  S DA=$O(^LEX(757.01,DA)) Q:+DA=0!($D(^TMP("LEXSTOP","REIDXMC")))  D
"RTN","LEXNDX1",61,0)
 . S X=$P(^LEX(757.01,DA,1),U,2) D S
"RTN","LEXNDX1",62,0)
 K ^TMP("LEXSTOP","REIDXMC"),LEXIDX,DA,X
"RTN","LEXNDX1",63,0)
 Q
"RTN","LEXNDX1",64,0)
RMC ; Re-Index Expression file word index AWRD (Task Manager)
"RTN","LEXNDX1",65,0)
 S ZTRTN="REIDXMC^LEXNDX1"
"RTN","LEXNDX1",66,0)
 S ZTDESC="Re-Indexing Major Concept Words in ""AWRD"" index"
"RTN","LEXNDX1",67,0)
 S ZTIO="",ZTDTH=$H D ^%ZTLOAD,HOME^%ZIS W:$D(ZTSK) !!,"Re-Indexing Major Concept Words in ""AWRD"" index" W:'$D(ZTSK) !!,"Task to re-index Major Concept not created"
"RTN","LEXNDX1",68,0)
 K ZTDTH,ZTDESC,ZTIO,ZTRTN
"RTN","LEXNDX1",69,0)
 Q
"RTN","LEXNDX1",70,0)
RALL ; Re-Index entire file (needs DIC)
"RTN","LEXNDX1",71,0)
 S DIK=$G(DIC) Q:DIK=""  Q:'$D(@(DIK_"0)"))
"RTN","LEXNDX1",72,0)
 S ZTREQ="@",(ZTSAVE("ZTREQ"),ZTSAVE("DIK"))="",ZTRTN="IXALL^DIK"
"RTN","LEXNDX1",73,0)
 S ZTDESC="Re-Indexing "_DIK
"RTN","LEXNDX1",74,0)
 S ZTIO="",ZTDTH=$H D ^%ZTLOAD,HOME^%ZIS
"RTN","LEXNDX1",75,0)
 K ZTDTH,ZTDESC,ZTIO,ZTRTN,ZTREQ,ZTSAVE
"RTN","LEXNDX1",76,0)
 Q
"RTN","LEXNDX2")
0^269^B17369617
"RTN","LEXNDX2",1,0)
LEXNDX2 ; ISL Set/kill indexes (Part 2)            ; 09-23-96
"RTN","LEXNDX2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXNDX2",3,0)
 ;
"RTN","LEXNDX2",4,0)
SS ; Get (unique) text for an expression in the Subset file
"RTN","LEXNDX2",5,0)
 Q:'$D(X)!('$D(DA))
"RTN","LEXNDX2",6,0)
 N LEXEXP,LEXMC,LEXTEXP,LEXOLDX S LEXOLDX=X
"RTN","LEXNDX2",7,0)
 S LEXEXP=+(^LEX(757.21,DA,0)),LEXMC=$P(^LEX(757.01,LEXEXP,1),U,1)
"RTN","LEXNDX2",8,0)
 S LEXTEXP=0 F  S LEXTEXP=$O(^LEX(757.01,"AMC",LEXMC,LEXTEXP)) Q:+LEXTEXP=0  D
"RTN","LEXNDX2",9,0)
 . S X=^LEX(757.01,LEXTEXP,0) D SS2
"RTN","LEXNDX2",10,0)
 S X=LEXOLDX K LEXOLDX,LEXEXP,LEXMC,LEXTEXP Q
"RTN","LEXNDX2",11,0)
SS2 ; Parse text and set node for each word
"RTN","LEXNDX2",12,0)
 N LEXYPE,LEXT,LEXSIDX,LEXIDX,LEXD,LEXJ,LEXI S LEXIDX=""
"RTN","LEXNDX2",13,0)
 S LEXYPE=+($P($G(^LEX(757.01,LEXTEXP,1)),U,2)) Q:LEXYPE'>0
"RTN","LEXNDX2",14,0)
 S LEXT=+($P($G(^LEX(757.011,LEXYPE,0)),"^",2)) Q:LEXT=0
"RTN","LEXNDX2",15,0)
 S LEXSIDX="A"_$P(^LEXT(757.2,LEXOLDX,0),U,2)
"RTN","LEXNDX2",16,0)
 D PTX^LEXTOLKN
"RTN","LEXNDX2",17,0)
 I $D(^TMP("LEXTKN",$J,0)),^TMP("LEXTKN",$J,0)>0 S LEXI="" F LEXJ=1:1:^TMP("LEXTKN",$J,0) D
"RTN","LEXNDX2",18,0)
 . S LEXI=$O(^TMP("LEXTKN",$J,LEXJ,""))
"RTN","LEXNDX2",19,0)
 . S:'$D(^LEX(757.21,LEXSIDX,LEXI,DA)) ^LEX(757.21,LEXSIDX,LEXI,DA)=""
"RTN","LEXNDX2",20,0)
 K LEXSIDX,LEXIDX,LEXD,LEXI,LEXJ,^TMP("LEXTKN",$J,0),^TMP("LEXTKN",$J) Q
"RTN","LEXNDX2",21,0)
SK ; Get (all) text for an expression in the Subset file
"RTN","LEXNDX2",22,0)
 Q:'$D(X)!('$D(DA))
"RTN","LEXNDX2",23,0)
 N LEXEXP,LEXMC,LEXTEXP,LEXOLDX S LEXOLDX=X
"RTN","LEXNDX2",24,0)
 S LEXEXP=+(^LEX(757.21,DA,0)),LEXMC=$P(^LEX(757.01,LEXEXP,1),U,1)
"RTN","LEXNDX2",25,0)
 S LEXTEXP=0 F  S LEXTEXP=$O(^LEX(757.01,"AMC",LEXMC,LEXTEXP)) Q:+LEXTEXP=0  D
"RTN","LEXNDX2",26,0)
 . S X=^LEX(757.01,LEXTEXP,0) D SK2
"RTN","LEXNDX2",27,0)
 S X=LEXOLDX K LEXOLDX,LEXEXP,LEXMC,LEXTEXP Q
"RTN","LEXNDX2",28,0)
SK2 ; Parse text and kill node for each word
"RTN","LEXNDX2",29,0)
 N LEXSIDX,LEXIDX,LEXD,LEXJ,LEXI S LEXIDX=""
"RTN","LEXNDX2",30,0)
 S LEXSIDX="A"_$P(^LEXT(757.2,LEXOLDX,0),U,2)
"RTN","LEXNDX2",31,0)
 D PTX^LEXTOLKN
"RTN","LEXNDX2",32,0)
 I $D(^TMP("LEXTKN",$J,0)),^TMP("LEXTKN",$J,0)>0 S LEXI="" F LEXJ=1:1:^TMP("LEXTKN",$J,0) D
"RTN","LEXNDX2",33,0)
 . S LEXI=$O(^TMP("LEXTKN",$J,LEXJ,""))
"RTN","LEXNDX2",34,0)
 . K ^LEX(757.21,LEXSIDX,LEXI,DA)
"RTN","LEXNDX2",35,0)
 K LEXSIDX,LEXIDX,LEXD,LEXI,LEXJ,^TMP("LEXTKN",$J,0),^TMP("LEXTKN",$J) Q
"RTN","LEXNDX2",36,0)
SET ; Given DIC and DA set indexes
"RTN","LEXNDX2",37,0)
 Q:$D(DIC)#2=0!('$D(DA))  Q:DIC'["LEX("&(DIC'["LEX(")
"RTN","LEXNDX2",38,0)
 N LEXRT,LEXFN,LEXFL,LEXRIDX,LEXN,LEXP,X
"RTN","LEXNDX2",39,0)
 S LEXFN=+($P(DIC,"(",2)),LEXRT=$TR($P(DIC,"(",1),"^","")
"RTN","LEXNDX2",40,0)
 S LEXFL=0 F  S LEXFL=$O(^DD(LEXFN,LEXFL)) Q:+LEXFL=0  D
"RTN","LEXNDX2",41,0)
 . S LEXN=$P($P(^DD(LEXFN,LEXFL,0),U,4),";",1)
"RTN","LEXNDX2",42,0)
 . S LEXP=$P($P(^DD(LEXFN,LEXFL,0),U,4),";",2),LEXRIDX=0
"RTN","LEXNDX2",43,0)
 . F  S LEXRIDX=$O(^DD(LEXFN,LEXFL,1,LEXRIDX)) Q:+LEXRIDX=0  D
"RTN","LEXNDX2",44,0)
 . . I $L($P($G(@("^"_LEXRT_"("_LEXFN_","_DA_","_LEXN_")")),U,LEXP)) D
"RTN","LEXNDX2",45,0)
 . . . S X=$P($G(@("^"_LEXRT_"("_LEXFN_","_DA_","_LEXN_")")),U,LEXP)
"RTN","LEXNDX2",46,0)
 . . . X:X'="" ^DD(LEXFN,LEXFL,1,LEXRIDX,1)
"RTN","LEXNDX2",47,0)
 . . I DA>$P($G(@("^"_LEXRT_"("_LEXFN_",0)")),"^",3) S $P(@("^"_LEXRT_"("_LEXFN_",0)"),"^",3)=DA
"RTN","LEXNDX2",48,0)
 K LEXFN,LEXFL,LEXRIDX,LEXN,LEXP,X
"RTN","LEXNDX2",49,0)
 Q
"RTN","LEXNDX2",50,0)
KILL ; Given DIC and DA kill indexes
"RTN","LEXNDX2",51,0)
 Q:$D(DIC)#2=0!('$D(DA))  Q:DIC'["LEX("&(DIC'["LEX(")
"RTN","LEXNDX2",52,0)
 N LEXRT,LEXFN,LEXFL,LEXRIDX,LEXN,LEXP,X
"RTN","LEXNDX2",53,0)
 S LEXFN=+($P(DIC,"(",2)),LEXRT=$TR($P(DIC,"(",1),"^","")
"RTN","LEXNDX2",54,0)
 S LEXFL=0 F  S LEXFL=$O(^DD(LEXFN,LEXFL)) Q:+LEXFL=0  D
"RTN","LEXNDX2",55,0)
 . S LEXN=$P($P(^DD(LEXFN,LEXFL,0),U,4),";",1)
"RTN","LEXNDX2",56,0)
 . S LEXP=$P($P(^DD(LEXFN,LEXFL,0),U,4),";",2),LEXRIDX=0
"RTN","LEXNDX2",57,0)
 . F  S LEXRIDX=$O(^DD(LEXFN,LEXFL,1,LEXRIDX)) Q:+LEXRIDX=0  D
"RTN","LEXNDX2",58,0)
 . . I $L($P($G(@("^"_LEXRT_"("_LEXFN_","_DA_","_LEXN_")")),U,LEXP)) D
"RTN","LEXNDX2",59,0)
 . . . S X=$P($G(@("^"_LEXRT_"("_LEXFN_","_DA_","_LEXN_")")),U,LEXP)
"RTN","LEXNDX2",60,0)
 . . . X:X'="" ^DD(LEXFN,LEXFL,1,LEXRIDX,2)
"RTN","LEXNDX2",61,0)
 K LEXFN,LEXFL,LEXRIDX,LEXN,LEXP,X
"RTN","LEXNDX2",62,0)
 Q
"RTN","LEXNDX2",63,0)
SAPP ; Set application subset definition index
"RTN","LEXNDX2",64,0)
 I X'="" D
"RTN","LEXNDX2",65,0)
 . N LEXIDX S LEXIDX=$P(^LEXT(757.2,DA,0),U,2) I LEXIDX'="" D
"RTN","LEXNDX2",66,0)
 . . K ^LEXT(757.2,"AA",LEXIDX) S $P(^LEXT(757.2,DA,0),U,2)="" K LEXIDX
"RTN","LEXNDX2",67,0)
 . S ^LEXT(757.2,"AB",X,DA)=""
"RTN","LEXNDX2",68,0)
 Q
"RTN","LEXNDX2",69,0)
KAPP ; Kill application subset definition index
"RTN","LEXNDX2",70,0)
 K ^LEXT(757.2,"AB",X,DA) Q
"RTN","LEXNDX2",71,0)
SSM ; Set index for Subset Mnemonic
"RTN","LEXNDX2",72,0)
 S ^LEXT(757.2,"AA",X,DA)="" N LEXX,LEXLOW
"RTN","LEXNDX2",73,0)
 S LEXX=$P($G(^LEXT(757.2,DA,0)),U,1)
"RTN","LEXNDX2",74,0)
 S:$L(LEXX) ^LEXT(757.2,"AA",LEXX,DA)="",^LEXT(757.2,"AA",$$UP^XLFSTR(LEXX),DA)=""
"RTN","LEXNDX2",75,0)
 I $L(LEXX) D
"RTN","LEXNDX2",76,0)
 . N X,LEXI S X=LEXX,LEXLOW="" D PTX^LEXTOLKN
"RTN","LEXNDX2",77,0)
 . I +($G(^TMP("LEXTKN",$J,0)))>0 F LEXI=1:1:+($G(^TMP("LEXTKN",$J,0))) D
"RTN","LEXNDX2",78,0)
 . . S ^LEXT(757.2,"AA",$O(^TMP("LEXTKN",$J,LEXI,"")),DA)=""
"RTN","LEXNDX2",79,0)
 . . S ^LEXT(757.2,"AA",$$UP^XLFSTR($O(^TMP("LEXTKN",$J,LEXI,""))),DA)=""
"RTN","LEXNDX2",80,0)
 Q
"RTN","LEXNDX2",81,0)
KSM ; Kill index for Subset Mnemonic
"RTN","LEXNDX2",82,0)
 K ^LEXT(757.2,"AA",X,DA) N LEXX,LEXLOW
"RTN","LEXNDX2",83,0)
 S LEXX=$P($G(^LEXT(757.2,DA,0)),U,1)
"RTN","LEXNDX2",84,0)
 K:$L(LEXX) ^LEXT(757.2,"AA",LEXX,DA),^LEXT(757.2,"AA",$$UP^XLFSTR(LEXX),DA)
"RTN","LEXNDX2",85,0)
 I $L(LEXX) D
"RTN","LEXNDX2",86,0)
 . N X,LEXI S X=LEXX,LEXLOW="" D PTX^LEXTOLKN
"RTN","LEXNDX2",87,0)
 . I +($G(^TMP("LEXTKN",$J,0)))>0 F LEXI=1:1:+($G(^TMP("LEXTKN",$J,0))) D
"RTN","LEXNDX2",88,0)
 . . K ^LEXT(757.2,"AA",$O(^TMP("LEXTKN",$J,LEXI,"")),DA)
"RTN","LEXNDX2",89,0)
 . . K ^LEXT(757.2,"AA",$$UP^XLFSTR($O(^TMP("LEXTKN",$J,LEXI,""))),DA)
"RTN","LEXNDX2",90,0)
 Q
"RTN","LEXNDX3")
0^270^B9214968
"RTN","LEXNDX3",1,0)
LEXNDX3 ; ISL Set/kill indexes (Part 3) Link       ; 09-23-96
"RTN","LEXNDX3",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXNDX3",3,0)
 ;
"RTN","LEXNDX3",4,0)
S ; Set indexes for file 757.05
"RTN","LEXNDX3",5,0)
 Q:('$D(DA))!('$D(X))
"RTN","LEXNDX3",6,0)
 S DIC="^LEX(757.05,"
"RTN","LEXNDX3",7,0)
 N LEXREP,LEXBY,LEXOLDX,LEXEXCL,LEXCTR,LEXREC
"RTN","LEXNDX3",8,0)
 S LEXOLDX=X I X="R" D SREP Q
"RTN","LEXNDX3",9,0)
 S LEXREP=$P(@(DIC_DA_",0)"),U,1),LEXBY=$P(@(DIC_DA_",0)"),U,2)
"RTN","LEXNDX3",10,0)
 Q:LEXREP=""!(LEXBY="")
"RTN","LEXNDX3",11,0)
 I X="N" D UNLINK^LEXNDX4 Q
"RTN","LEXNDX3",12,0)
 I X="L",$D(^LEX(757.05,DA,1,1,0)) D RELINK^LEXNDX4 Q
"RTN","LEXNDX3",13,0)
 D EXCL^LEXNDX5 I 'LEXEXCL S LEXOLDX="L" D LINK^LEXNDX4
"RTN","LEXNDX3",14,0)
 I LEXEXCL,'$D(^LEX(757.01,"AWRD",LEXREP)) D ANYWAY^LEXNDX5 I 'LEXEXCL S LEXOLDX="L" D LINK^LEXNDX4
"RTN","LEXNDX3",15,0)
 S:LEXEXCL LEXOLDX="R" S X=LEXOLDX,$P(^LEX(757.05,DA,0),U,3)=X
"RTN","LEXNDX3",16,0)
 K LEXREP,LEXBY,LEXOLDX,LEXEXCL,LEXCTR,LEXREC
"RTN","LEXNDX3",17,0)
 Q
"RTN","LEXNDX3",18,0)
SREP ; Set indexes for Replacement Words
"RTN","LEXNDX3",19,0)
 N LEXEX,LEXRE S LEXEX=$P(^LEX(757.05,DA,0),U,2),LEXRE=$P(^LEX(757.05,DA,0),U,1) I LEXEX=""!(LEXRE="") K LEXRE,LEXEX Q
"RTN","LEXNDX3",20,0)
 I $D(^LEX(757.01,"B",LEXEX)) D
"RTN","LEXNDX3",21,0)
 . S LEXEXR=$O(^LEX(757.01,"B",LEXEX,0))
"RTN","LEXNDX3",22,0)
 . I +LEXEXR>0,$D(^LEX(757.01,LEXEXR)),+(^LEX(757,+(^LEX(757.01,LEXEXR,1)),0))'=LEXEXR D
"RTN","LEXNDX3",23,0)
 . . S X=LEXEX
"RTN","LEXNDX3",24,0)
 . . D PTX^LEXTOLKN
"RTN","LEXNDX3",25,0)
 . . I $D(^TMP("LEXTKN",$J,0)),^TMP("LEXTKN",$J,0)>0 S LEXI="" F LEXJ=1:1:^TMP("LEXTKN",$J,0) D
"RTN","LEXNDX3",26,0)
 . . . S LEXI=$O(^TMP("LEXTKN",$J,LEXJ,"")) I '$D(^LEX(757.01,"AWRD",LEXI,LEXEXR)) D
"RTN","LEXNDX3",27,0)
 . . . . N LEXYPE,LEXT S LEXYPE=+($P($G(^LEX(757.01,LEXEXR,1)),U,2)) Q:LEXYPE'>0
"RTN","LEXNDX3",28,0)
 . . . . S LEXT=+($P($G(^LEX(757.011,LEXYPE,0)),"^",2)) Q:LEXT=0
"RTN","LEXNDX3",29,0)
 . . . . S ^LEX(757.01,"AWRD",LEXI,LEXEXR,"LINKED")=""
"RTN","LEXNDX3",30,0)
 . . K LEXI,LEXJ,^TMP("LEXTKN",$J,0),^TMP("LEXTKN",$J)
"RTN","LEXNDX3",31,0)
 K LEXRE,LEXEX,LEXEXR
"RTN","LEXNDX3",32,0)
 Q
"RTN","LEXNDX3",33,0)
K ; Kill indexes for file 757.05
"RTN","LEXNDX3",34,0)
 Q:$D(DIC)#2=0!('$D(DA))!('$D(X))
"RTN","LEXNDX3",35,0)
 N LEXREP,LEXBY,LEXOLDX
"RTN","LEXNDX3",36,0)
 S LEXOLDX=X I X="R" D KREP Q
"RTN","LEXNDX3",37,0)
 S LEXREP=$P(@(DIC_DA_",0)"),U,1),LEXBY=$P(@(DIC_DA_",0)"),U,2)
"RTN","LEXNDX3",38,0)
 D UNLINK^LEXNDX4
"RTN","LEXNDX3",39,0)
 K LEXREP,LEXBY,LEXOLDX
"RTN","LEXNDX3",40,0)
 Q
"RTN","LEXNDX3",41,0)
KREP ; Kill indexes for Replacement Words
"RTN","LEXNDX3",42,0)
 N LEXEX,LEXRE S LEXEX=$P(^LEX(757.05,DA,0),U,2),LEXRE=$P(^LEX(757.05,DA,0),U,1) I LEXEX=""!(LEXRE="") K LEXRE,LEXEX Q
"RTN","LEXNDX3",43,0)
 I $D(^LEX(757.01,"B",LEXEX)) D
"RTN","LEXNDX3",44,0)
 . S LEXEXR=$O(^LEX(757.01,"B",LEXEX,0))
"RTN","LEXNDX3",45,0)
 . I +LEXEXR>0,$D(^LEX(757.01,LEXEXR)),+(^LEX(757,+(^LEX(757.01,LEXEXR,1)),0))'=LEXEXR D
"RTN","LEXNDX3",46,0)
 . . S X=LEXEX
"RTN","LEXNDX3",47,0)
 . . D PTX^LEXTOLKN
"RTN","LEXNDX3",48,0)
 . . I $D(^TMP("LEXTKN",$J,0)),^TMP("LEXTKN",$J,0)>0 S LEXI="" F LEXJ=1:1:^TMP("LEXTKN",$J,0) D
"RTN","LEXNDX3",49,0)
 . . . S LEXI=$O(^TMP("LEXTKN",$J,LEXJ,"")) I $D(^LEX(757.01,"AWRD",LEXI,LEXEXR)) D
"RTN","LEXNDX3",50,0)
 . . . . K ^LEX(757.01,"AWRD",LEXI,LEXEXR,"LINKED")
"RTN","LEXNDX3",51,0)
 . . K LEXI,LEXJ,^TMP("LEXTKN",$J,0),^TMP("LEXTKN",$J)
"RTN","LEXNDX3",52,0)
 K LEXRE,LEXEX,LEXEXR
"RTN","LEXNDX3",53,0)
 Q
"RTN","LEXNDX3",54,0)
RE ; Reindex (Kill/Set) Replacement Words
"RTN","LEXNDX3",55,0)
 N LEXDA,LEXDIC S LEXDA=0,LEXDIC="^LEX(757.05,"
"RTN","LEXNDX3",56,0)
 F  S LEXDA=$O(^LEX(757.05,LEXDA)) Q:+LEXDA=0  D
"RTN","LEXNDX3",57,0)
 . S DA=LEXDA,DIC=LEXDIC D KILL^LEXNDX2 S DA=LEXDA,DIC=LEXDIC D SET^LEXNDX2
"RTN","LEXNDX3",58,0)
 K LEXDA,LEXDIC,DA,DIC
"RTN","LEXNDX3",59,0)
 Q
"RTN","LEXNDX4")
0^271^B20468165
"RTN","LEXNDX4",1,0)
LEXNDX4 ; ISL Set/kill indexes (Part 4) Link       ; 09-23-96
"RTN","LEXNDX4",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXNDX4",3,0)
 ;
"RTN","LEXNDX4",4,0)
LINK ; Link a Keyword to an expression
"RTN","LEXNDX4",5,0)
 I $D(^LEX(757.05,DA,1,"B",1)) Q
"RTN","LEXNDX4",6,0)
 W !,"LINK" S X=LEXBY D PTX^LEXTOLKN
"RTN","LEXNDX4",7,0)
 I ^TMP("LEXTKN",$J,0)>0 S (LEXLINK,LEXKEY)="",LEXKEY=$O(^TMP("LEXTKN",$J,1,LEXKEY))
"RTN","LEXNDX4",8,0)
 S LEXREC=0 F  S LEXREC=$O(^LEX(757.01,"AWRD",LEXKEY,LEXREC)) Q:+LEXREC=0!(LEXLINK[U)  D
"RTN","LEXNDX4",9,0)
 . I ^TMP("LEXTKN",$J,0)=1 S LEXASK=1
"RTN","LEXNDX4",10,0)
 . I ^TMP("LEXTKN",$J,0)>1 S LEXASK=1 D
"RTN","LEXNDX4",11,0)
 . . F LEXA=2:1:^TMP("LEXTKN",$J,0) D
"RTN","LEXNDX4",12,0)
 . . . S LEXAKEY="",LEXAKEY=$O(^TMP("LEXTKN",$J,LEXA,LEXAKEY))
"RTN","LEXNDX4",13,0)
 . . . S LEXSRC=$$UP^XLFSTR(^LEX(757.01,LEXREC,0))
"RTN","LEXNDX4",14,0)
 . . . I LEXSRC'[$E(LEXAKEY,1,4) S LEXASK=0
"RTN","LEXNDX4",15,0)
 . S LEXLINK="" I LEXASK D
"RTN","LEXNDX4",16,0)
 . . I $D(^LEX(757.05,DA,1,"B",LEXREC)) Q
"RTN","LEXNDX4",17,0)
MOK . . ; Prompt to Map/Link a keyword to an expression
"RTN","LEXNDX4",18,0)
 . . W !!,"Map       ",^LEX(757.01,LEXREC,0),!,"To        ",LEXREP,!,"OK" S %=1 D YN^DICN S LEXLINK=% I %=-1 W ! S LEXLINK=U Q
"RTN","LEXNDX4",19,0)
 . . I '% W !!,"By answering ""Yes"", an index reference will be made to link the",!,"term to the key word ",LEXREP G MOK
"RTN","LEXNDX4",20,0)
 . I +LEXLINK=1 D
"RTN","LEXNDX4",21,0)
 . . N LEXYPE,LEXT S ^LEX(757.05,"ALINK",DA,LEXREC)=""
"RTN","LEXNDX4",22,0)
 . . S LEXYPE=+($P($G(^LEX(757.01,LEXREC,1)),U,2))
"RTN","LEXNDX4",23,0)
 . . S LEXT=+($P($G(^LEX(757.011,LEXYPE,0)),U,2))
"RTN","LEXNDX4",24,0)
 . . S:+LEXT>0 ^LEX(757.01,"AWRD",LEXREP,LEXREC,"LINKED")="" W !
"RTN","LEXNDX4",25,0)
 . . I $D(^LEX(757.05,DA,1,0)) D
"RTN","LEXNDX4",26,0)
 . . . S LEXSREC=0 F  S LEXSREC=$O(^LEX(757.05,DA,1,LEXSREC)) Q:+LEXSREC=0  D
"RTN","LEXNDX4",27,0)
 . . . . S ^LEX(757.05,DA,1,"B",^LEX(757.05,DA,1,LEXSREC,0),LEXSREC)=""
"RTN","LEXNDX4",28,0)
 . . . I '$D(^LEX(757.05,DA,1,"B",LEXREC)) D
"RTN","LEXNDX4",29,0)
 . . . . S LEXSREC=0  F  S LEXSREC=$O(^LEX(757.05,DA,1,LEXSREC)) Q:+LEXSREC=0  S LEXLNK=LEXSREC+1
"RTN","LEXNDX4",30,0)
 . . . . K LEXSREC S ^LEX(757.05,DA,1,LEXLNK,0)=LEXREC
"RTN","LEXNDX4",31,0)
 . . . . S ^LEX(757.05,DA,1,"B",LEXREC,LEXLNK)="",$P(^LEX(757.05,DA,1,0),U,4)=$P(^LEX(757.05,DA,1,0),U,4)+1
"RTN","LEXNDX4",32,0)
 . . . . S $P(^LEX(757.05,DA,1,0),U,3)=LEXLNK K LEXLNK
"RTN","LEXNDX4",33,0)
 . . I '$D(^LEX(757.05,DA,1,0)) S ^LEX(757.05,DA,1,1,0)=LEXREC,^LEX(757.05,DA,1,"B",LEXREC,1)="",^LEX(757.05,DA,1,0)="^757.53P^1^1"
"RTN","LEXNDX4",34,0)
 D VERIFY K ^TMP("LEXTKN",$J),^TMP("LEXTKN",$J,0),LEXSRC,LEXKEY,LEXA,LEXAKEY,LEXREC,LEXASK,LEXLINK
"RTN","LEXNDX4",35,0)
 Q
"RTN","LEXNDX4",36,0)
VERIFY ; Display linkages made for user verification
"RTN","LEXNDX4",37,0)
 Q:'$D(DA)
"RTN","LEXNDX4",38,0)
 I '$D(^LEX(757.05,DA,1,0)) W !,"No Word Linkages Created",! Q
"RTN","LEXNDX4",39,0)
 W !!,$P(^LEX(757.05,DA,0),"^",1)," has been linked to:  ",!
"RTN","LEXNDX4",40,0)
 N LEXSREC S LEXSREC=0
"RTN","LEXNDX4",41,0)
 F  S LEXSREC=$O(^LEX(757.05,DA,1,LEXSREC)) Q:+LEXSREC=0  D
"RTN","LEXNDX4",42,0)
 . W !,?4,$E(^LEX(757.01,^LEX(757.05,DA,1,LEXSREC,0),0),1,75)
"RTN","LEXNDX4",43,0)
 W ! I +$$OK D  K LEXSREC,LEXLNK Q
"RTN","LEXNDX4",44,0)
 . S LEXSREC=0  F  S LEXSREC=$O(^LEX(757.05,DA,1,LEXSREC)) Q:+LEXSREC=0  S LEXLNK=LEXSREC+1
"RTN","LEXNDX4",45,0)
 . K LEXSREC S ^LEX(757.05,DA,1,LEXLNK,0)=1,^LEX(757.05,DA,1,"B",1,LEXLNK)=""
"RTN","LEXNDX4",46,0)
 . S $P(^LEX(757.05,DA,1,0),U,4)=$P(^LEX(757.05,DA,1,0),U,4)+1
"RTN","LEXNDX4",47,0)
 . S $P(^LEX(757.05,DA,1,0),U,3)=LEXLNK K LEXLNK
"RTN","LEXNDX4",48,0)
 D UNLINK
"RTN","LEXNDX4",49,0)
 Q
"RTN","LEXNDX4",50,0)
OK(LEXOK) ; Get user response
"RTN","LEXNDX4",51,0)
OK1 ; Prompt "Is this correct"
"RTN","LEXNDX4",52,0)
 W !,"Is this correct" S %=1 D YN^DICN
"RTN","LEXNDX4",53,0)
 I %=-1!(%=2) K %,%Y Q 0
"RTN","LEXNDX4",54,0)
 I %=1 K %,%Y Q 1
"RTN","LEXNDX4",55,0)
 I '% D  G OK1
"RTN","LEXNDX4",56,0)
 . W !,"By confirming the word linkages displayed above, a look-up"
"RTN","LEXNDX4",57,0)
 . W !,"conducted on ",$P(^LEX(757.05,DA,0),"^",1)
"RTN","LEXNDX4",58,0)
 . W " will retrieve the linked terms."
"RTN","LEXNDX4",59,0)
 Q 0
"RTN","LEXNDX4",60,0)
RELINK ; Relink Keywords to expressions
"RTN","LEXNDX4",61,0)
 Q:'$D(DA)  Q:'$D(^LEX(757.05,DA,1,1,0))
"RTN","LEXNDX4",62,0)
 D SUB N LEXMC,LEXCTR,LEXSREC,LEXERM S (LEXCTR,LEXSREC)=0,LEXERM=$P(^LEX(757.05,DA,0),"^",1)
"RTN","LEXNDX4",63,0)
 F  S LEXSREC=$O(^LEX(757.05,DA,1,LEXSREC)) Q:+LEXSREC=0  D
"RTN","LEXNDX4",64,0)
 . S LEXCTR=LEXCTR+1
"RTN","LEXNDX4",65,0)
 . S ^LEX(757.05,DA,1,0)="^757.53P^"_LEXCTR_"^"_LEXCTR
"RTN","LEXNDX4",66,0)
 . S ^LEX(757.05,DA,1,"B",^LEX(757.05,DA,1,LEXSREC,0),LEXSREC)=""
"RTN","LEXNDX4",67,0)
 . I ^LEX(757.05,DA,1,LEXSREC,0)'=1 D
"RTN","LEXNDX4",68,0)
 . . S LEXMC=^LEX(757.05,DA,1,LEXSREC,0)
"RTN","LEXNDX4",69,0)
 . . N LEXYPE,LEXT S LEXYPE=+($P($G(^LEX(757.01,LEXMC,1)),U,2))
"RTN","LEXNDX4",70,0)
 . . S LEXT=+($P($G(^LEX(757.011,LEXYPE,0)),U,2))
"RTN","LEXNDX4",71,0)
 . . I +LEXT>0 D
"RTN","LEXNDX4",72,0)
 . . . S ^LEX(757.01,"AWRD",LEXERM,LEXMC,"LINKED")=""
"RTN","LEXNDX4",73,0)
 . . . N X S X=LEXERM D SSF^LEXNDX6
"RTN","LEXNDX4",74,0)
 . . S ^LEX(757.05,"ALINK",DA,LEXMC)=""
"RTN","LEXNDX4",75,0)
 K LEXSREC,LEXERM
"RTN","LEXNDX4",76,0)
 Q
"RTN","LEXNDX4",77,0)
UNLINK ; Unlink a Keyword from an expression
"RTN","LEXNDX4",78,0)
 Q:'$D(^LEX(757.05,DA,1,0))  N LEXMC,LEXLNK
"RTN","LEXNDX4",79,0)
 S LEXMC=0  F  S LEXMC=$O(^LEX(757.05,DA,1,"B",LEXMC)) Q:+LEXMC=0  D
"RTN","LEXNDX4",80,0)
 . S LEXLNK=0  F  S LEXLNK=$O(^LEX(757.05,DA,1,"B",LEXMC,LEXLNK)) Q:+LEXLNK=0  D
"RTN","LEXNDX4",81,0)
 . . S LEXWRD=$P(^LEX(757.05,DA,0),U,1)
"RTN","LEXNDX4",82,0)
 . . K ^LEX(757.01,"AWRD",LEXWRD,LEXMC,"LINKED")
"RTN","LEXNDX4",83,0)
 . . N X S X=LEXWRD D KSF^LEXNDX6
"RTN","LEXNDX4",84,0)
 . . K ^LEX(757.05,"ALINK",DA,LEXMC)
"RTN","LEXNDX4",85,0)
 . . I $D(X),X=0 K ^LEX(757.05,DA,1,LEXLNK,0),^LEX(757.05,DA,1,"B",LEXMC,LEXLNK),^LEX(757.05,DA,1,0)
"RTN","LEXNDX4",86,0)
 K LEXLNK,LEXMC
"RTN","LEXNDX4",87,0)
 Q
"RTN","LEXNDX4",88,0)
SUB ; Index linked words in sub-file before UNLINK and RELINK
"RTN","LEXNDX4",89,0)
 Q:'$D(DA)  I $D(^LEX(757.05,DA,1,1,0)) N LEXSREC,LEXMC S LEXSREC=0 F  S LEXSREC=$O(^LEX(757.05,DA,1,LEXSREC)) Q:+LEXSREC=0  S ^LEX(757.05,DA,1,"B",^LEX(757.05,DA,1,LEXSREC,0),LEXSREC)=""
"RTN","LEXNDX4",90,0)
 Q
"RTN","LEXNDX5")
0^272^B6805423
"RTN","LEXNDX5",1,0)
LEXNDX5 ; ISL Set/kill indexes (Part 5) Link       ; 09-23-96
"RTN","LEXNDX5",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXNDX5",3,0)
 ;
"RTN","LEXNDX5",4,0)
EXCL ; Is a term used with an "Exclusive" meaning?
"RTN","LEXNDX5",5,0)
 Q:'$D(LEXREP)!('$D(LEXBY))
"RTN","LEXNDX5",6,0)
 S LEXEXCL=1 I $D(^LEX(757.01,"AWRD",LEXREP)) D
"RTN","LEXNDX5",7,0)
 . W !,LEXREP," is used as follows:  ",!
"RTN","LEXNDX5",8,0)
 . S (LEXCTR,LEXREC)=0 F  S LEXREC=$O(^LEX(757.01,"AWRD",LEXREP,LEXREC)) Q:+LEXREC=0  D
"RTN","LEXNDX5",9,0)
 . . S LEXCTR=LEXCTR+1 W !,$J(LEXCTR,4),": ",^LEX(757.01,LEXREC,0)
"RTN","LEXNDX5",10,0)
 . . I LEXCTR#16=0 D CONT
"RTN","LEXNDX5",11,0)
ASKEX . ; Ask, "is it exclusive?"
"RTN","LEXNDX5",12,0)
 . W !!,"Based on the reference",$S(LEXCTR>1:"s",1:"")," shown above, does ",LEXREP
"RTN","LEXNDX5",13,0)
 . W !,"exclusively refer to ",LEXBY
"RTN","LEXNDX5",14,0)
ASKEX2 . ; Get response
"RTN","LEXNDX5",15,0)
 . S %=2 D YN^DICN S LEXEXCL=$S(%=2:0,%=-1:0,1:%) Q:%'=0
"RTN","LEXNDX5",16,0)
 . I '% D EXCLHLP G ASKEX2
"RTN","LEXNDX5",17,0)
 . G ASKEX
"RTN","LEXNDX5",18,0)
 Q
"RTN","LEXNDX5",19,0)
EXCLHLP ; Help to decide if the term use is "Exclusive"
"RTN","LEXNDX5",20,0)
 W !!,"If ",LEXREP," exclusively refers to ",LEXBY,", answer"
"RTN","LEXNDX5",21,0)
 W !,"""Yes"" and ",LEXREP," will always be replaced by",LEXBY,"."
"RTN","LEXNDX5",22,0)
 W !!,"If ",LEXREP," refers to concepts other than",LEXBY,", answer"
"RTN","LEXNDX5",23,0)
 W !,"""No"" and begin linking ",LEXREP," to ",LEXBY," (in each"
"RTN","LEXNDX5",24,0)
 W !,"occurrence where the two terms have the same meaning)"
"RTN","LEXNDX5",25,0)
 W !!,"Is ",LEXREP," used exclusively"
"RTN","LEXNDX5",26,0)
 Q
"RTN","LEXNDX5",27,0)
CONT ; Continue?
"RTN","LEXNDX5",28,0)
 W ! N X,Y,DTOUT,DUOUT,DIRUT,DIROUT S DIR("A")="Press <Return> to continue  ",DIR("?")="Additional information is available, press <Return> to continue ",DIR(0)="EA" D ^DIR K DIR W ! Q
"RTN","LEXNDX5",29,0)
ANYWAY ; Term was not found, ask to link the term anyway
"RTN","LEXNDX5",30,0)
 Q:'$D(LEXREP)!('$D(LEXBY))  Q:$D(^LEX(757.01,"AWRD",LEXREP))  N LEXANYW S LEXEXCL=0
"RTN","LEXNDX5",31,0)
 W !!,LEXREP," was not found in the Lexicon"
"RTN","LEXNDX5",32,0)
ANY2 ; Get response
"RTN","LEXNDX5",33,0)
 W !,"Do you wish to link ",LEXREP," to terms",!,"containing ",LEXBY
"RTN","LEXNDX5",34,0)
 S %=1,LEXEXCL=0 D YN^DICN S:%=-1!(%=2) LEXEXCL=1 Q:%'=0
"RTN","LEXNDX5",35,0)
 I '% D ANYHLP G ANY2
"RTN","LEXNDX5",36,0)
 W ! G ANY2
"RTN","LEXNDX5",37,0)
ANYHLP ; Help to decide whether to continue with the linkage
"RTN","LEXNDX5",38,0)
 W !!,"Linking ",LEXREP," to ",LEXREP," will cause the "
"RTN","LEXNDX5",39,0)
 W !,"look-up to include all linked occurences of ",LEXREP
"RTN","LEXNDX5",40,0)
 W !,"to be listed when searching for ",LEXREP,!
"RTN","LEXNDX5",41,0)
 Q
"RTN","LEXNDX6")
0^273^B7394894
"RTN","LEXNDX6",1,0)
LEXNDX6 ; ISL Set/kill indexes (Misc)              ; 09-23-96
"RTN","LEXNDX6",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXNDX6",3,0)
 ;
"RTN","LEXNDX6",4,0)
SRA ; Set Shortcut index
"RTN","LEXNDX6",5,0)
 Q:'$D(X)!('$D(DA))!('$D(DA(1)))  N LEXKW S LEXKW=$P($G(^LEX(757.4,DA(1),1,DA,0)),U,1) S:$L(LEXKW) ^LEX(757.4,"ARA",$E($$UP^XLFSTR(LEXKW),1,63),X,DA(1),DA)="" Q
"RTN","LEXNDX6",6,0)
 ;
"RTN","LEXNDX6",7,0)
KRA ; Kill Shortcut index
"RTN","LEXNDX6",8,0)
 Q:'$D(X)!('$D(DA))!('$D(DA(1)))  N LEXKW S LEXKW=$P($G(^LEX(757.4,DA(1),1,DA,0)),U,1) K:$L(LEXKW) ^LEX(757.4,"ARA",$E($$UP^XLFSTR(LEXKW),1,63),X,DA(1),DA) Q
"RTN","LEXNDX6",9,0)
 ;
"RTN","LEXNDX6",10,0)
SSF ; Set String Frequency
"RTN","LEXNDX6",11,0)
 Q:'$L($G(X))
"RTN","LEXNDX6",12,0)
 N LEXIDX,LEXE S LEXIDX="",LEXE=X,X=$$UP^XLFSTR(X) D PTX^LEXTOLKN
"RTN","LEXNDX6",13,0)
 I $D(^TMP("LEXTKN",$J,0)),^TMP("LEXTKN",$J,0)>0 D
"RTN","LEXNDX6",14,0)
 . N LEXNT,LEXT,LEXW,LEXI,LEXP,LEXS S LEXI=""
"RTN","LEXNDX6",15,0)
 . F LEXI=1:1:^TMP("LEXTKN",$J,0) D
"RTN","LEXNDX6",16,0)
 . . S LEXW=$O(^TMP("LEXTKN",$J,LEXI,""))
"RTN","LEXNDX6",17,0)
 . . I $L(LEXW) F LEXP=1:1:$L(LEXW) D
"RTN","LEXNDX6",18,0)
 . . . S LEXS=$E(LEXW,1,LEXP),LEXT=0
"RTN","LEXNDX6",19,0)
 . . . I $D(^LEX(757.01,"ASL",LEXS)) D
"RTN","LEXNDX6",20,0)
 . . . . S LEXT=$O(^LEX(757.01,"ASL",LEXS,0))
"RTN","LEXNDX6",21,0)
 . . . S LEXNT=LEXT+1,^LEX(757.01,"ASL",LEXS,LEXNT)=""
"RTN","LEXNDX6",22,0)
 . . . K ^LEX(757.01,"ASL",LEXS,LEXT)
"RTN","LEXNDX6",23,0)
 S X=LEXE K ^TMP("LEXTKN",$J)
"RTN","LEXNDX6",24,0)
 Q
"RTN","LEXNDX6",25,0)
 ;
"RTN","LEXNDX6",26,0)
KSF ; Kill String Frequency
"RTN","LEXNDX6",27,0)
 Q:'$L($G(X))
"RTN","LEXNDX6",28,0)
 N LEXIDX,LEXE S LEXIDX="",LEXE=X,X=$$UP^XLFSTR(X) D PTX^LEXTOLKN
"RTN","LEXNDX6",29,0)
 I $D(^TMP("LEXTKN",$J,0)),^TMP("LEXTKN",$J,0)>0 D
"RTN","LEXNDX6",30,0)
 . N LEXNT,LEXT,LEXW,LEXI,LEXP,LEXS S LEXI=""
"RTN","LEXNDX6",31,0)
 . F LEXI=1:1:^TMP("LEXTKN",$J,0) D
"RTN","LEXNDX6",32,0)
 . . S LEXW=$O(^TMP("LEXTKN",$J,LEXI,""))
"RTN","LEXNDX6",33,0)
 . . I $L(LEXW) F LEXP=1:1:$L(LEXW) D
"RTN","LEXNDX6",34,0)
 . . . S LEXS=$E(LEXW,1,LEXP),LEXT=0
"RTN","LEXNDX6",35,0)
 . . . I $D(^LEX(757.01,"ASL",LEXS)) D
"RTN","LEXNDX6",36,0)
 . . . . S LEXT=$O(^LEX(757.01,"ASL",LEXS,0))
"RTN","LEXNDX6",37,0)
 . . . S LEXNT=LEXT-1
"RTN","LEXNDX6",38,0)
 . . . S:LEXNT>0 ^LEX(757.01,"ASL",LEXS,LEXNT)=""
"RTN","LEXNDX6",39,0)
 . . . K:LEXNT'>0 ^LEX(757.01,"ASL",LEXS,LEXNT)
"RTN","LEXNDX6",40,0)
 . . . K ^LEX(757.01,"ASL",LEXS,LEXT)
"RTN","LEXNDX6",41,0)
 S X=LEXE K ^TMP("LEXTKN",$J)
"RTN","LEXNDX6",42,0)
 Q
"RTN","LEXNDX6",43,0)
SSUP ;
"RTN","LEXNDX6",44,0)
 N LEXX,LEXDA1,LEXDA,LEXMC
"RTN","LEXNDX6",45,0)
 S LEXX=$G(X) Q:'$L(LEXX)  S LEXDA1=+($G(DA(1)))
"RTN","LEXNDX6",46,0)
 Q:LEXDA1=0  S LEXDA=+($G(DA)) Q:LEXDA=0
"RTN","LEXNDX6",47,0)
 S LEXMC=$$MC(LEXDA1) Q:LEXMC=0
"RTN","LEXNDX6",48,0)
 S ^LEX(757.01,"AWRD",LEXX,LEXDA1,LEXMC,LEXDA)=""
"RTN","LEXNDX6",49,0)
 ;S ^LEX(757.01,"AWRD",LEXX,LEXMC,LEXDA1,LEXDA)=""
"RTN","LEXNDX6",50,0)
 Q
"RTN","LEXNDX6",51,0)
KSUP ;
"RTN","LEXNDX6",52,0)
 N LEXX,LEXDA1,LEXDA,LEXMC
"RTN","LEXNDX6",53,0)
 S LEXX=$G(X) Q:'$L(LEXX)  S LEXDA1=+($G(DA(1))) Q:LEXDA1=0  S LEXDA=+($G(DA)) Q:LEXDA=0
"RTN","LEXNDX6",54,0)
 S LEXMC=$$MC(LEXDA1) Q:LEXMC=0
"RTN","LEXNDX6",55,0)
 K ^LEX(757.01,"AWRD",LEXX,LEXDA1,LEXMC,LEXDA)
"RTN","LEXNDX6",56,0)
 ;K ^LEX(757.01,"AWRD",LEXX,LEXMC,LEXDA1,LEXDA)
"RTN","LEXNDX6",57,0)
 Q
"RTN","LEXNDX6",58,0)
MC(X) ; Major Concept IEN
"RTN","LEXNDX6",59,0)
 N LEXX S LEXX=+($G(X)) Q:LEXX=0 0
"RTN","LEXNDX6",60,0)
 S LEXX=+($G(^LEX(757.01,LEXX,1))) Q:LEXX=0 0
"RTN","LEXNDX6",61,0)
 S LEXX=+($G(^LEX(757,LEXX,0))) Q:LEXX=0 0
"RTN","LEXNDX6",62,0)
 S X=LEXX Q X
"RTN","LEXPL")
0^353^B17717108
"RTN","LEXPL",1,0)
LEXPL ; ISL Problem List Survey                 ; 09-23-96
"RTN","LEXPL",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXPL",3,0)
 ;
"RTN","LEXPL",4,0)
 ; Entry Points
"RTN","LEXPL",5,0)
 ;
"RTN","LEXPL",6,0)
 ;    EN^LEXPL   Task Survey and Sends Mailman Message to ISC-IRMFO
"RTN","LEXPL",7,0)
 ;    SV^LEXPL   Performs Survey (no task) and displays results
"RTN","LEXPL",8,0)
 ;
"RTN","LEXPL",9,0)
EN ; Tasked Survey
"RTN","LEXPL",10,0)
 S ZTRTN="SV^LEXPL",ZTDESC="Problem List Survey",ZTIO="",ZTDTH=$H D ^%ZTLOAD D HOME^%ZIS K %X,%Y,Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN Q
"RTN","LEXPL",11,0)
SV ; Operational Survey
"RTN","LEXPL",12,0)
 K ^TMP("LEXS") D UD,PLUR,SG,SEND K:'$D(ZTQUEUED) ^TMP("LEXS") S:$D(ZTQUEUED) ZTREQ="@" Q
"RTN","LEXPL",13,0)
UD ; UCI/Date
"RTN","LEXPL",14,0)
 N %,%H,%I,X,Y X ^%ZOSF("UCI") D SET("Problem List Survey"),BL S X="  UCI:  "_Y
"RTN","LEXPL",15,0)
 D:Y=$G(^%ZOSF("PROD")) SET((X_" (Production)")) D:Y'=$G(^%ZOSF("PROD")) SET((X_" (Test)"))
"RTN","LEXPL",16,0)
 S X=$$DT Q:X=""  D SET(("  ON:   "_$P(X,"^",1)_" at "_$P(X,"^",2))),BL Q
"RTN","LEXPL",17,0)
PLUR ; Survey
"RTN","LEXPL",18,0)
 N LEXD,LEXCE,LEXCI,LEXICD,LEXIIC,LEXLC,LEXPE,LEXLI,LEXLU,LEXPU,LEXUC,LEXUI,LEXCU,LEXUU,X
"RTN","LEXPL",19,0)
 S:$D(ZTQUEUED) LEXCE=$$EN2^LEXPLEM,LEXCI=$$EN2^LEXPLIA,LEXCU=$$EN2^LEXPLUP
"RTN","LEXPL",20,0)
 S (LEXD,LEXUU,LEXUI,LEXUC,LEXLU,LEXLI,LEXLC,LEXPU)=0
"RTN","LEXPL",21,0)
 S LEXPU=$O(^ICD9("AB","799.9 ",LEXPU)) Q:LEXPU=0
"RTN","LEXPL",22,0)
 F  S LEXD=$O(^AUPNPROB(LEXD)) Q:+LEXD=0  D
"RTN","LEXPL",23,0)
 . S LEXICD=+($G(^AUPNPROB(LEXD,0))),LEXPE=+($G(^AUPNPROB(LEXD,1)))
"RTN","LEXPL",24,0)
 . S LEXIIC=+($P($G(^ICD9(LEXICD,0)),"^",9))
"RTN","LEXPL",25,0)
 . S:LEXPE>1&(LEXICD=LEXPU) LEXLU=LEXLU+1
"RTN","LEXPL",26,0)
 . S:LEXPE=1&(LEXICD=LEXPU) LEXUU=LEXUU+1
"RTN","LEXPL",27,0)
 . S:LEXPE=1&(LEXICD'=LEXPU)&(LEXIIC=0) LEXUC=LEXUC+1
"RTN","LEXPL",28,0)
 . S:LEXPE>1&(LEXICD'=LEXPU)&(LEXIIC=0) LEXLC=LEXLC+1
"RTN","LEXPL",29,0)
 . S:LEXPE=1&(LEXICD'=LEXPU)&(LEXIIC=1) LEXUI=LEXUI+1
"RTN","LEXPL",30,0)
 . S:LEXPE>1&(LEXICD'=LEXPU)&(LEXIIC=1) LEXLI=LEXLI+1
"RTN","LEXPL",31,0)
 ;
"RTN","LEXPL",32,0)
 ; Titles
"RTN","LEXPL",33,0)
 ;
"RTN","LEXPL",34,0)
 D SET("    "),SET2(""),SET2("Inactive"),SET2("Active")
"RTN","LEXPL",35,0)
 D SET("    "),SET2("Uncoded"),SET2("ICD Code"),SET2("ICD Code"),SET2("Total"),BL
"RTN","LEXPL",36,0)
 ;
"RTN","LEXPL",37,0)
 ; Unresolved
"RTN","LEXPL",38,0)
 ;
"RTN","LEXPL",39,0)
 D SET("    Unresolved Narratives")
"RTN","LEXPL",40,0)
 D SET2(LEXUU) D SET2(LEXUI)
"RTN","LEXPL",41,0)
 D SET2(LEXUC) D SET2((LEXUU+LEXUC+LEXUI))
"RTN","LEXPL",42,0)
 ;
"RTN","LEXPL",43,0)
 ; Lexicon
"RTN","LEXPL",44,0)
 ;
"RTN","LEXPL",45,0)
 D SET("    Lexicon Terms")
"RTN","LEXPL",46,0)
 D SET2(LEXLU) D SET2(LEXLI)
"RTN","LEXPL",47,0)
 D SET2(LEXLC) D SET2((LEXLU+LEXLC+LEXLI))
"RTN","LEXPL",48,0)
 ;
"RTN","LEXPL",49,0)
 ; Total
"RTN","LEXPL",50,0)
 ;
"RTN","LEXPL",51,0)
 D SET("    ---------------------------------------------------------------------")
"RTN","LEXPL",52,0)
 D SET("    Total Problems")
"RTN","LEXPL",53,0)
 D SET2(LEXUU+LEXLU),SET2(LEXUI+LEXLI)
"RTN","LEXPL",54,0)
 D SET2(LEXUC+LEXLC),SET2((LEXUU+LEXUC+LEXUI+LEXLU+LEXLC+LEXLI))
"RTN","LEXPL",55,0)
 ;
"RTN","LEXPL",56,0)
 I +($G(LEXCE))>0!(+($G(LEXCI))>0)!(+($G(LEXCU))>0) D
"RTN","LEXPL",57,0)
 . D BL N LEXD S LEXCE=+($G(LEXCE)),LEXCI=+($G(LEXCI)),LEXCU=+($G(LEXCU))
"RTN","LEXPL",58,0)
 . S LEXD=$L(LEXCE) S:$L(LEXCI)>LEXD LEXD=$L(LEXCI) S:$L(LEXCU)>LEXD LEXD=$L(LEXCU) S LEXD=LEXD+1
"RTN","LEXPL",59,0)
 . I LEXCE>0 D SET(($J(LEXCE,LEXD)_" Exact match unresolved narratives resolved to to the Lexicon"))
"RTN","LEXPL",60,0)
 . I LEXCI>0 D SET(($J(LEXCI,LEXD)_" Inactive ICD codes/6 digit codes re-coded to an active ICD Code"))
"RTN","LEXPL",61,0)
 . I LEXCU>0 D SET(($J(LEXCU,LEXD)_" Uncoded Lexicon terms re-coded to an ICD code other than 799.9"))
"RTN","LEXPL",62,0)
 . D BL
"RTN","LEXPL",63,0)
 K LEXD,LEXCE,LEXCI,LEXICD,LEXIIC,LEXLC,LEXPE,LEXLI,LEXLU,LEXPU,LEXUC,LEXUI,LEXCU,LEXUU,X
"RTN","LEXPL",64,0)
 Q
"RTN","LEXPL",65,0)
SG ; Show survey
"RTN","LEXPL",66,0)
 Q:$D(ZTQUEUED)  N LEXD S LEXD=0
"RTN","LEXPL",67,0)
 F  S LEXD=$O(^TMP("LEXS",LEXD)) Q:+LEXD=0  W !,^TMP("LEXS",LEXD)
"RTN","LEXPL",68,0)
 W !! Q
"RTN","LEXPL",69,0)
SEND ; Mailman
"RTN","LEXPL",70,0)
 N DIFROM Q:'$D(ZTQUEUED)
"RTN","LEXPL",71,0)
 K XMZ S XMSUB="Lexicon/Problem List Survey"
"RTN","LEXPL",72,0)
 S XMY("G.LEXICON@ISC-SLC.VA.GOV")=""
"RTN","LEXPL",73,0)
 S XMTEXT="^TMP(""LEXS"",",XMDUZ=.5
"RTN","LEXPL",74,0)
 D ^XMD K ^TMP("LEXS"),XCNP,XMDUZ,XMY,XMZ,XMSUB,XMTEXT,XMDUZ
"RTN","LEXPL",75,0)
 S:$D(ZTQUEUED) ZTREQ="@" Q
"RTN","LEXPL",76,0)
BL ; Blank
"RTN","LEXPL",77,0)
 D SET("") Q
"RTN","LEXPL",78,0)
SET(X) ; Column 1
"RTN","LEXPL",79,0)
 S X=$G(X),^TMP("LEXS",0)=+($G(^TMP("LEXS",0)))+1,^TMP("LEXS",+($G(^TMP("LEXS",0))))=X Q
"RTN","LEXPL",80,0)
SET2(X) ; Column X
"RTN","LEXPL",81,0)
 S X=$G(X),X=$$L($G(^TMP("LEXS",+($G(^TMP("LEXS",0))))))_"    "_$J(X,8),^TMP("LEXS",+($G(^TMP("LEXS",0))))=X Q
"RTN","LEXPL",82,0)
L(X) ; Lengthen text
"RTN","LEXPL",83,0)
 F  Q:$L(X)=25!($L(X)>25)  S X=X_" "
"RTN","LEXPL",84,0)
 Q X
"RTN","LEXPL",85,0)
T(X) ; Trim text
"RTN","LEXPL",86,0)
 S X=$G(X) F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEXPL",87,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","LEXPL",88,0)
 Q X
"RTN","LEXPL",89,0)
DT(X) ; Date and time
"RTN","LEXPL",90,0)
 N %,%H,%I,X,Y D NOW^%DTC Q:+($G(X))=0 "" S X=$$FMTE^XLFDT(%,"1P") Q:$L(X," ")'=5 "" Q:$P(X," ",4)'[":" "" Q:$P(X," ",5)'["m" ""
"RTN","LEXPL",91,0)
 S X=$P(X," ",1,3)_"^"_$P($P(X," ",4),":",1,2)_" "_$P(X," ",5)
"RTN","LEXPL",92,0)
 Q X
"RTN","LEXPLEM")
0^354^B19883260
"RTN","LEXPLEM",1,0)
LEXPLEM ; ISL Problem List Exact Match URs           ; 09-23-96
"RTN","LEXPLEM",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXPLEM",3,0)
 ;
"RTN","LEXPLEM",4,0)
 ; Fixes unresolved narratives which have an exact match in the
"RTN","LEXPLEM",5,0)
 ; Lexicon by changing the Lexicon pointer from 1 (unresolved)
"RTN","LEXPLEM",6,0)
 ; to point to the exact match term.
"RTN","LEXPLEM",7,0)
 ;
"RTN","LEXPLEM",8,0)
 ; EN^LEXPLEM         Entry point to fix exact match unresolved 
"RTN","LEXPLEM",9,0)
 ;                    narratives
"RTN","LEXPLEM",10,0)
 ;
"RTN","LEXPLEM",11,0)
 ; EN2^LEXPLEM(X)     Entry point to fix exact match unresolved 
"RTN","LEXPLEM",12,0)
 ;                    narratives and return the number of exact
"RTN","LEXPLEM",13,0)
 ;                    match terms fixed.
"RTN","LEXPLEM",14,0)
 ;
"RTN","LEXPLEM",15,0)
 ; EN3^LEXPLEM        Entry point to to Task EN^LEXPLEM
"RTN","LEXPLEM",16,0)
 ;
"RTN","LEXPLEM",17,0)
 Q
"RTN","LEXPLEM",18,0)
EN ; Entry to fix exact match
"RTN","LEXPLEM",19,0)
 N LEXCNT S LEXCNT=0 D EM S:$D(ZTQUEUED) ZTREQ="@" Q
"RTN","LEXPLEM",20,0)
EN2(X) ; Entry to fix exact match and return # fixed
"RTN","LEXPLEM",21,0)
 N LEXCNT S LEXCNT=0 D EM S X=LEXCNT Q X
"RTN","LEXPLEM",22,0)
EN3 ; Task EN^LEXPLEM
"RTN","LEXPLEM",23,0)
 S ZTRTN="EN^LEXPLEM",ZTDESC="Exact Match URs in Prob List # 9000011",ZTIO="",ZTDTH=$H D ^%ZTLOAD,HOME^%ZIS K Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN Q
"RTN","LEXPLEM",24,0)
EM ; Exact match on a term
"RTN","LEXPLEM",25,0)
 N DA,DIC,DIE,DR,DTOUT,LEXAT,LEXDA,LEXEX,LEXEXM,LEXICD,LEXISO
"RTN","LEXPLEM",26,0)
 N LEXLEX,LEXNAR,LEXNIC,LEXNIP,LEXO,LEXOD,LEXOS,LEXPOV,LEXUNP
"RTN","LEXPLEM",27,0)
 N LEXX,LEXXU,X,Y
"RTN","LEXPLEM",28,0)
 S LEXEXM=0,LEXUNP=+($O(^ICD9("AB","799.9 ",0))) Q:LEXUNP=0  S DA=0
"RTN","LEXPLEM",29,0)
 F  S DA=$O(^AUPNPROB(DA)) Q:+DA=0  D
"RTN","LEXPLEM",30,0)
 . S LEXICD=$P($G(^AUPNPROB(DA,0)),"^",1),LEXISO=$P($G(^ICD9(+LEXICD,0)),"^",1)
"RTN","LEXPLEM",31,0)
 . S LEXLEX=$P($G(^AUPNPROB(DA,1)),"^",1) Q:LEXLEX'=1
"RTN","LEXPLEM",32,0)
 . S LEXPOV=+($P($G(^AUPNPROB(DA,0)),"^",5)) Q:LEXPOV=0
"RTN","LEXPLEM",33,0)
 . S LEXNAR=$P($G(^AUTNPOV(LEXPOV,0)),"^",1) Q:'$L(LEXNAR)
"RTN","LEXPLEM",34,0)
 . I LEXLEX=1,$D(^ICD9("AB",($E(LEXNAR,1,8)_" "))),+($P($G(^ICD9(+($O(^ICD9("AB",($E(LEXNAR,1,8)_" "),0))),0)),"^",9))=0 D  Q
"RTN","LEXPLEM",35,0)
 . . S LEXEXM=$$FC(LEXNAR) Q:+LEXEXM'>2  S LEXNIC=$$ICDONE^LEXU(+LEXEXM)
"RTN","LEXPLEM",36,0)
 . . S LEXNIP=0 S:$L(LEXNIC) LEXNIP=+($O(^ICD9("AB",(LEXNIC_" "),0)))
"RTN","LEXPLEM",37,0)
 . . I +LEXEXM>2,$D(^LEX(757.01,+LEXEXM,0)) D EDIT
"RTN","LEXPLEM",38,0)
 . S LEXEXM=$$FE(LEXNAR)
"RTN","LEXPLEM",39,0)
 . Q:+LEXEXM'>2  S LEXNIC=$$ICDONE^LEXU(+LEXEXM)
"RTN","LEXPLEM",40,0)
 . S LEXNIP=0 S:$L(LEXNIC) LEXNIP=+($O(^ICD9("AB",(LEXNIC_" "),0)))
"RTN","LEXPLEM",41,0)
 . I +LEXEXM>2,$D(^LEX(757.01,+LEXEXM,0)) D EDIT Q
"RTN","LEXPLEM",42,0)
 Q
"RTN","LEXPLEM",43,0)
EDIT ; Edit Problem
"RTN","LEXPLEM",44,0)
 N LEXAT S LEXAT=0,DA=+($G(DA))
"RTN","LEXPLEM",45,0)
 Q:'$D(^AUPNPROB(DA,0))  Q:'$D(^AUPNPROB(DA,1))
"RTN","LEXPLEM",46,0)
 S LEXEXM=+($G(LEXEXM))
"RTN","LEXPLEM",47,0)
 Q:'$D(^LEX(757.01,LEXEXM,0))
"RTN","LEXPLEM",48,0)
 S LEXNIP=+($G(LEXNIP))
"RTN","LEXPLEM",49,0)
 S (DIE,DIC)="^AUPNPROB(" S DR="1.01////^S X=LEXEXM"
"RTN","LEXPLEM",50,0)
 I +LEXNIP>0,$D(^ICD9(+LEXNIP,0)),LEXICD=LEXUNP S DR=".01////^S X=LEXNIP;1.01////^S X=LEXEXM"
"RTN","LEXPLEM",51,0)
ED2 ; Record is Locked
"RTN","LEXPLEM",52,0)
 L +^AUPNPROB(DA):1 I '$T,LEXAT'>5 S LEXAT=LEXAT+1 H 2 G ED2
"RTN","LEXPLEM",53,0)
 G:LEXAT>5 EDQ D ^DIE L -^AUPNPROB(DA)
"RTN","LEXPLEM",54,0)
EDQ ; Edit Quit
"RTN","LEXPLEM",55,0)
 I $P($G(^AUPNPROB(DA,0)),"^",1)=LEXNIP,$P($G(^AUPNPROB(DA,1)),"^",1)=LEXEXM S LEXCNT=+($G(LEXCNT))+1
"RTN","LEXPLEM",56,0)
 Q
"RTN","LEXPLEM",57,0)
FE(X) ; Find Exact Match on a term return IEN
"RTN","LEXPLEM",58,0)
 S X=$G(X) Q:'$L(X) -1  N LEXX S LEXX=$G(X),X=-1 Q:'$L(LEXX) -1
"RTN","LEXPLEM",59,0)
 N LEXO,LEXOD,LEXOS,LEXDA,LEXEX,LEXXU S X=-1,LEXXU=$$UP(LEXX),LEXOD=$$UP($E(LEXX,1,60)),LEXO=0 I $L(LEXOD) D
"RTN","LEXPLEM",60,0)
 . Q:'$D(^LEX(757.01,"B",LEXOD))&($E($O(^LEX(757.01,"B",LEXOD)),1,$L(LEXOD))'=LEXOD)  S LEXOS=$$SCH(LEXOD) F  S LEXOS=$O(^LEX(757.01,"B",LEXOS)) Q:LEXOS=""!($E(LEXOS,1,$L(LEXOD))'=LEXOD)  D
"RTN","LEXPLEM",61,0)
 . . S LEXDA=0 F  S LEXDA=$O(^LEX(757.01,"B",LEXOS,LEXDA)) Q:+LEXDA=0!($$UP($G(^LEX(757.01,+LEXDA,0)))'[LEXOD)  S LEXEX=$G(^LEX(757.01,+LEXDA,0)) I $$UP(LEXEX)=LEXXU S LEXO=LEXDA_"^"_LEXEX
"RTN","LEXPLEM",62,0)
 S LEXO=+($G(LEXO)) I LEXO>0 S:'$D(^LEX(757.01,LEXO,0)) X=-1 S:$D(^LEX(757.01,LEXO,0)) X=LEXO_"^"_$G(^LEX(757.01,LEXO,0))
"RTN","LEXPLEM",63,0)
 Q X
"RTN","LEXPLEM",64,0)
FC(X) ; Find Exact Match on an ICD Code return IEN
"RTN","LEXPLEM",65,0)
 S X=$G(X) Q:'$L(X) -1  N LEXX S LEXX=$E($G(X),1,9),X=-1 Q:'$L(LEXX) -1
"RTN","LEXPLEM",66,0)
 Q:'$D(^ICD9("AB",(LEXX_" "))) -1
"RTN","LEXPLEM",67,0)
 Q:+($P($G(^ICD9(+($O(^ICD9("AB",(LEXX_" "),0))),0)),"^",9))=1 -1
"RTN","LEXPLEM",68,0)
 ;
"RTN","LEXPLEM",69,0)
 N LEXSD,LEXEX,LEXI,LEXP
"RTN","LEXPLEM",70,0)
 S LEXSD=0
"RTN","LEXPLEM",71,0)
 F  S LEXSD=$O(^LEX(757.02,"ACODE",(LEXX_" "),LEXSD)) Q:+LEXSD=0  D
"RTN","LEXPLEM",72,0)
 . S LEXEX=+($P($G(^LEX(757.02,LEXSD,0)),"^",1)) Q:'$D(^LEX(757.01,LEXEX,0))
"RTN","LEXPLEM",73,0)
 . Q:$$ICDONE^LEXU(LEXEX)=""
"RTN","LEXPLEM",74,0)
 . Q:$P($G(^LEX(757.02,LEXSD,0)),"^",2)'=LEXX  Q:+($P($G(^LEX(757.02,LEXSD,0)),"^",3))'=1
"RTN","LEXPLEM",75,0)
 . S LEXI(0)=+($G(LEXI(0)))+1,LEXI(LEXI(0))=LEXEX
"RTN","LEXPLEM",76,0)
 . I +($P($G(^LEX(757.02,LEXSD,0)),"^",5))=1 D
"RTN","LEXPLEM",77,0)
 . . S LEXP(0)=+($G(LEXP(0)))+1,LEXP(LEXP(0))=LEXEX
"RTN","LEXPLEM",78,0)
 I $D(LEXP),+($G(LEXP(0)))=1 S LEXX=+($G(LEXP(1))) S:+LEXX>2&($D(^LEX(757.01,+LEXX,0))) X=LEXX Q X
"RTN","LEXPLEM",79,0)
 I $D(LEXI),+($G(LEXI(0)))=1 S LEXX=+($G(LEXI(1))) S:+LEXX>2&($D(^LEX(757.01,+LEXX,0))) X=LEXX Q X
"RTN","LEXPLEM",80,0)
 Q X
"RTN","LEXPLEM",81,0)
SCH(LEXX) ; Create $O variable
"RTN","LEXPLEM",82,0)
 S LEXX=$E(LEXX,1,($L(LEXX)-1))_$C($A($E(LEXX,$L(LEXX)))-1)_"~" Q LEXX
"RTN","LEXPLEM",83,0)
UP(LEXX) ; Uppercase
"RTN","LEXPLEM",84,0)
 Q $TR($G(LEXX),"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","LEXPLIA")
0^355^B6493325
"RTN","LEXPLIA",1,0)
LEXPLIA ; ISL Problem List In-Active ICD Codes       ; 09-23-96
"RTN","LEXPLIA",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXPLIA",3,0)
 ;
"RTN","LEXPLIA",4,0)
 ; Fixes ICD pointers in the Problem List to In-Active ICD Codes
"RTN","LEXPLIA",5,0)
 ; or 6 Digit ICD Codes where the Lexicon pointer is greater 
"RTN","LEXPLIA",6,0)
 ; than 2 (source of pointer is the Lexicon) to a valid ICD and
"RTN","LEXPLIA",7,0)
 ; active ICD Code.
"RTN","LEXPLIA",8,0)
 ;
"RTN","LEXPLIA",9,0)
 ; EN^LEXPLIA         Entry point to fix in-active ICD
"RTN","LEXPLIA",10,0)
 ;
"RTN","LEXPLIA",11,0)
 ; EN2^LEXPLIA(X)     Entry point to fix in-active ICD and
"RTN","LEXPLIA",12,0)
 ;                    return the number of in-active codes fixed
"RTN","LEXPLIA",13,0)
 ;
"RTN","LEXPLIA",14,0)
 ; EN3^LEXPLIA        Entry point to to Task EN^LEXPLIA
"RTN","LEXPLIA",15,0)
 ;
"RTN","LEXPLIA",16,0)
 Q
"RTN","LEXPLIA",17,0)
EN ; Entry to fix exact match
"RTN","LEXPLIA",18,0)
 N LEXCNT S LEXCNT=0 D EM S:$D(ZTQUEUED) ZTREQ="@" Q
"RTN","LEXPLIA",19,0)
EN2(X) ; Entry to fix exact match and return # fixed
"RTN","LEXPLIA",20,0)
 N LEXCNT S LEXCNT=0 D EM S X=LEXCNT Q X
"RTN","LEXPLIA",21,0)
EN3 ; Task EN^LEXPLIA
"RTN","LEXPLIA",22,0)
 S ZTRTN="EN^LEXPLIA",ZTDESC="In-Active ICD Codes in Prob List # 9000011",ZTIO="",ZTDTH=$H D ^%ZTLOAD,HOME^%ZIS K Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN Q
"RTN","LEXPLIA",23,0)
EM ; Exact match 
"RTN","LEXPLIA",24,0)
 N DA,DIC,DIE,DR,DTOUT,LEXAT,LEXICD,LEXIIA,LEXISO,LEXLEX,LEXNIC,LEXNIP
"RTN","LEXPLIA",25,0)
 S DA=0 F  S DA=$O(^AUPNPROB(DA)) Q:+DA=0  D
"RTN","LEXPLIA",26,0)
 . S LEXICD=+($P($G(^AUPNPROB(DA,0)),"^",1)) Q:LEXICD'>0  S LEXIIA=+($P($G(^ICD9(LEXICD,0)),"^",9)),LEXISO=$P($G(^ICD9(LEXICD,0)),"^",1) Q:'$L(LEXISO)  S LEXLEX=+($P($G(^AUPNPROB(DA,1)),"^",1)) Q:LEXLEX'>2
"RTN","LEXPLIA",27,0)
 . I $L($P(LEXISO,".",2))>2!(LEXIIA=1) S LEXNIC=$$ICDONE^LEXU(+LEXLEX) Q:LEXNIC=""  S LEXNIP=0 S:$L(LEXNIC) LEXNIP=+($O(^ICD9("AB",(LEXNIC_" "),0))) Q:LEXNIP=0  Q:+($P($G(^ICD9(LEXNIP,0)),"^",9))=1  D EDIT
"RTN","LEXPLIA",28,0)
 Q
"RTN","LEXPLIA",29,0)
EDIT ; Edit Problem
"RTN","LEXPLIA",30,0)
 N LEXAT S LEXAT=0 S DA=+($G(DA)) Q:'$D(^AUPNPROB(DA,0))  S LEXNIP=+($G(LEXNIP)) Q:'$D(^ICD9(LEXNIP,0))  S (DIE,DIC)="^AUPNPROB(",DR=".01////^S X=LEXNIP"
"RTN","LEXPLIA",31,0)
ED2 ; Record is Locked
"RTN","LEXPLIA",32,0)
 L +^AUPNPROB(DA):1 I '$T,LEXAT'>5 S LEXAT=LEXAT+1 H 2 G ED2
"RTN","LEXPLIA",33,0)
 G:LEXAT>5 EDQ D ^DIE L -^AUPNPROB(DA)
"RTN","LEXPLIA",34,0)
EDQ ; Edit Quit
"RTN","LEXPLIA",35,0)
 I $P($G(^AUPNPROB(DA,0)),"^",1)=LEXNIP S LEXCNT=+($G(LEXCNT))+1
"RTN","LEXPLIA",36,0)
 Q
"RTN","LEXPLUP")
0^356^B5537091
"RTN","LEXPLUP",1,0)
LEXPLUP ; ISL Problem List Update 799.9              ; 09-23-96
"RTN","LEXPLUP",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXPLUP",3,0)
 ;
"RTN","LEXPLUP",4,0)
 ; Fixes ICD code 799.9 for Problems which have a Lexicon pointer
"RTN","LEXPLUP",5,0)
 ; greater than 2, and which may have been updated in a later version
"RTN","LEXPLUP",6,0)
 ; (Lexicon term exported without ICD, and later assigned an ICD)
"RTN","LEXPLUP",7,0)
 ;
"RTN","LEXPLUP",8,0)
 ; EN^LEXPLUP         Entry point to fix updated 799.9s
"RTN","LEXPLUP",9,0)
 ;
"RTN","LEXPLUP",10,0)
 ; EN2^LEXPLUP(X)     Entry point to fix updated 799.9s and 
"RTN","LEXPLUP",11,0)
 ;                    returns the number of updated 799.9s fixed
"RTN","LEXPLUP",12,0)
 ;
"RTN","LEXPLUP",13,0)
 ; EN3^LEXPLUP        Entry point to to Task EN^LEXPLUP
"RTN","LEXPLUP",14,0)
 ;
"RTN","LEXPLUP",15,0)
 Q
"RTN","LEXPLUP",16,0)
EN ; Entry to fix exact match
"RTN","LEXPLUP",17,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEXPLUP",18,0)
 N LEXCNT S LEXCNT=0 D UP Q
"RTN","LEXPLUP",19,0)
EN2(X) ; Entry to fix exact match and return # fixed
"RTN","LEXPLUP",20,0)
 N LEXCNT S LEXCNT=0 D UP S X=LEXCNT Q X
"RTN","LEXPLUP",21,0)
EN3 ; Task EN^LEXPLUP
"RTN","LEXPLUP",22,0)
 S ZTRTN="EN^LEXPLUP",ZTDESC="Update 799.9s in Prob List # 9000011",ZTIO="",ZTDTH=$H D ^%ZTLOAD,HOME^%ZIS K Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN Q
"RTN","LEXPLUP",23,0)
UP ; Exact match 
"RTN","LEXPLUP",24,0)
 N DA,DIC,DIE,DR,DTOUT,LEXAT,LEXICD,LEXISO,LEXLEX,LEXNIC,LEXNIP,LEXUNP,X,Y
"RTN","LEXPLUP",25,0)
 S LEXUNP=+($O(^ICD9("AB","799.9 ",0))) Q:LEXUNP=0  S DA=0 F  S DA=$O(^AUPNPROB(DA)) Q:+DA=0  D
"RTN","LEXPLUP",26,0)
 . S LEXICD=$P($G(^AUPNPROB(DA,0)),"^",1) Q:LEXICD'=LEXUNP  S LEXISO=$P($G(^ICD9(LEXICD,0)),"^",1) Q:LEXISO'=799.9  S LEXLEX=$P($G(^AUPNPROB(DA,1)),"^",1) Q:LEXLEX'>2
"RTN","LEXPLUP",27,0)
 . S LEXNIC=$$ICDONE^LEXU(+LEXLEX) Q:LEXNIC=""  S LEXNIP=0 S:$L(LEXNIC) LEXNIP=+($O(^ICD9("AB",(LEXNIC_" "),0))) Q:LEXNIP=0
"RTN","LEXPLUP",28,0)
 . I +LEXLEX>2,$D(^LEX(757.01,+LEXLEX,0)),+LEXNIP>0,$D(^ICD9(+LEXNIP,0)) D EDIT
"RTN","LEXPLUP",29,0)
 Q
"RTN","LEXPLUP",30,0)
EDIT ; Edit Problem
"RTN","LEXPLUP",31,0)
 N LEXAT S LEXAT=0,DA=+($G(DA)) Q:'$D(^AUPNPROB(DA,0))  Q:'$D(^AUPNPROB(DA,1))  S LEXNIP=+($G(LEXNIP)) Q:'$D(^ICD9(LEXNIP,0))
"RTN","LEXPLUP",32,0)
 S (DIE,DIC)="^AUPNPROB(",DR=".01////^S X=LEXNIP"
"RTN","LEXPLUP",33,0)
ED2 ; Record is Locked
"RTN","LEXPLUP",34,0)
 L +^AUPNPROB(DA):1 I '$T,LEXAT'>5 S LEXAT=LEXAT+1 H 2 G ED2
"RTN","LEXPLUP",35,0)
 G:LEXAT>5 EDQ D ^DIE L -^AUPNPROB(DA)
"RTN","LEXPLUP",36,0)
EDQ ; Edit Quit
"RTN","LEXPLUP",37,0)
 I $P($G(^AUPNPROB(DA,0)),"^",1)=LEXNIP S LEXCNT=+($G(LEXCNT))+1
"RTN","LEXPLUP",38,0)
 Q
"RTN","LEXPRNT")
0^274^B14926711
"RTN","LEXPRNT",1,0)
LEXPRNT ; ISL Print Utilities for the Lexicon      ; 09-23-96
"RTN","LEXPRNT",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXPRNT",3,0)
 ;
"RTN","LEXPRNT",4,0)
XTLK ; XTLK  Display format for MTLU 
"RTN","LEXPRNT",5,0)
 ; Uses   XTLKH, XTLKMULT, XTLKREF0, LEXSHOW
"RTN","LEXPRNT",6,0)
 N LEXIFN,LEXEXP,LEXCODE,LEXSOID
"RTN","LEXPRNT",7,0)
 S LEXIFN=0,LEXEXP=-1 S:'$D(LEXSHOW) LEXSHOW=""
"RTN","LEXPRNT",8,0)
 S:'$D(LEXSUB) LEXSUB="WRD"
"RTN","LEXPRNT",9,0)
 S (LEXEXP,LEXIFN)=+($P(XTLKREF0,",",2)) G:+LEXIFN'>0 XTQ
"RTN","LEXPRNT",10,0)
 D:XTLKMULT MULTI
"RTN","LEXPRNT",11,0)
 D:'XTLKMULT ONE
"RTN","LEXPRNT",12,0)
XTQ K LEXCODE,LEXSOID,LEXIFN,LEXEXP
"RTN","LEXPRNT",13,0)
 Q
"RTN","LEXPRNT",14,0)
MULTI ; Multiple entries on the selection list 
"RTN","LEXPRNT",15,0)
 N LEXNUM,LEXSTR,LEXDP,LEXCCS,LEXL,LEXP
"RTN","LEXPRNT",16,0)
 S LEXNUM=XTLKH,(LEXSTR,LEXDP,LEXCCS)="",LEXL=70,LEXP=7
"RTN","LEXPRNT",17,0)
 D COMMON
"RTN","LEXPRNT",18,0)
 W:LEXNUM>1 ! W:LEXNUM>1&(LEXNUM#5=1) !
"RTN","LEXPRNT",19,0)
 W $J(LEXNUM,4),":" W:$L(LEXSTR)<(LEXL+1) ?LEXP,LEXSTR
"RTN","LEXPRNT",20,0)
 D:$L(LEXSTR)>LEXL LONG
"RTN","LEXPRNT",21,0)
 W:LEXNUM#5=0&(+($G(LEXHLPF))=0) !
"RTN","LEXPRNT",22,0)
 W:LEXNUM#5'=0&(LEXNUM=+($G(^TMP("XTLKHITS",$J))))&(+($G(LEXHLPF))=0) !
"RTN","LEXPRNT",23,0)
 Q
"RTN","LEXPRNT",24,0)
ONE ; One entry on the selection list
"RTN","LEXPRNT",25,0)
 N LEXSTR,LEXDP,LEXCCS,LEXL,LEXP
"RTN","LEXPRNT",26,0)
 S (LEXSTR,LEXDP,LEXCCS)="",LEXL=75,LEXP=2
"RTN","LEXPRNT",27,0)
 D COMMON
"RTN","LEXPRNT",28,0)
 W:$L(LEXSTR)<(LEXL+1) ?LEXP,LEXSTR
"RTN","LEXPRNT",29,0)
 D:$L(LEXSTR)>LEXL LONG
"RTN","LEXPRNT",30,0)
 Q
"RTN","LEXPRNT",31,0)
COMMON ; Parse LEXSHOW for both MULTI and ONE
"RTN","LEXPRNT",32,0)
 S:LEXSUB="WRD" LEXSTR=^LEX(757.01,LEXEXP,0)
"RTN","LEXPRNT",33,0)
 S:LEXSUB'="WRD" LEXSTR=^LEX(757.01,+(@(DIC_LEXEXP_",0)")),0)
"RTN","LEXPRNT",34,0)
 S LEXDP=$S($D(^LEX(757.01,$S(LEXSUB="WRD":LEXEXP,1:+(@(DIC_LEXEXP_",0)"))),3)):" *",1:"")
"RTN","LEXPRNT",35,0)
 I LEXSUB'="WRD" S LEXEXP=+(@(DIC_LEXEXP_",0)"))
"RTN","LEXPRNT",36,0)
 I $D(LEXSHOW),LEXSHOW'="" F LEXSOID=1:1:$L(LEXSHOW,"/") D
"RTN","LEXPRNT",37,0)
 . S LEXCODE=$P(LEXSHOW,"/",LEXSOID) N @LEXCODE S @LEXCODE=""
"RTN","LEXPRNT",38,0)
 . S @LEXCODE=$S(LEXSUB="WRD":$$CODE(LEXIFN,LEXCODE),1:$$CODE(LEXEXP,LEXCODE))
"RTN","LEXPRNT",39,0)
 . I @LEXCODE'="" S LEXCCS=LEXCCS_" ("_@LEXCODE_")"
"RTN","LEXPRNT",40,0)
 S LEXSTR=LEXSTR_LEXDP_LEXCCS
"RTN","LEXPRNT",41,0)
 Q
"RTN","LEXPRNT",42,0)
LONG ; Handle a long string
"RTN","LEXPRNT",43,0)
 N LEXOK,LEXCHR,LEXPSN,LEXSTO,LEXREM,LEXLNN,LEXOLD S LEXLNN=0,LEXOLD=LEXSTR
"RTN","LEXPRNT",44,0)
 F  Q:$L(LEXSTR)<(LEXL+1)  D PARSE Q:$L(LEXSTR)<(LEXL+1)
"RTN","LEXPRNT",45,0)
 S LEXLNN=LEXLNN+1
"RTN","LEXPRNT",46,0)
 W:LEXLNN>1 ! W ?LEXP,LEXSTR
"RTN","LEXPRNT",47,0)
 Q
"RTN","LEXPRNT",48,0)
PARSE ; Parse a long string into screen length strings
"RTN","LEXPRNT",49,0)
 S LEXOK=0,LEXCHR=""
"RTN","LEXPRNT",50,0)
 F LEXPSN=LEXL:-1:0 Q:+LEXOK=1  D  Q:+LEXOK=1
"RTN","LEXPRNT",51,0)
 . I $E(LEXSTR,LEXPSN)=" " S LEXCHR=" ",LEXOK=1 Q
"RTN","LEXPRNT",52,0)
 . I $E(LEXSTR,LEXPSN)="," S LEXCHR=",",LEXOK=1 Q
"RTN","LEXPRNT",53,0)
 . I $E(LEXSTR,LEXPSN)="/" S LEXCHR="/",LEXOK=1 Q
"RTN","LEXPRNT",54,0)
 . I $E(LEXSTR,LEXPSN)="-" S LEXCHR="-",LEXOK=1 Q
"RTN","LEXPRNT",55,0)
 I LEXCHR=" " S LEXSTO=$E(LEXSTR,1,LEXPSN-1),LEXREM=$E(LEXSTR,LEXPSN+1,$L(LEXSTR))
"RTN","LEXPRNT",56,0)
 I LEXCHR="," S LEXSTO=$E(LEXSTR,1,LEXPSN),LEXREM=$E(LEXSTR,(LEXPSN+1),$L(LEXSTR)) S:$E(LEXREM,1)=" " LEXREM=$E(LEXREM,2,$L(LEXREM))
"RTN","LEXPRNT",57,0)
 I LEXCHR="/" S LEXSTO=$E(LEXSTR,1,LEXPSN),LEXREM=$E(LEXSTR,(LEXPSN+1),$L(LEXSTR)) S:$E(LEXREM,1)=" " LEXREM=$E(LEXREM,2,$L(LEXREM))
"RTN","LEXPRNT",58,0)
 I LEXCHR="-" S LEXSTO=$E(LEXSTR,1,LEXPSN),LEXREM=$E(LEXSTR,(LEXPSN+1),$L(LEXSTR)) S:$E(LEXREM,1)=" " LEXREM=$E(LEXREM,2,$L(LEXREM))
"RTN","LEXPRNT",59,0)
 S LEXSTR=LEXREM
"RTN","LEXPRNT",60,0)
 S LEXLNN=LEXLNN+1
"RTN","LEXPRNT",61,0)
 W:LEXLNN>1 ! W ?LEXP,LEXSTO
"RTN","LEXPRNT",62,0)
 Q
"RTN","LEXPRNT",63,0)
CODE(LEXEX,LEXSO) ; Returns codes (defined in XTLK^LEXPRNT) for a Term
"RTN","LEXPRNT",64,0)
 N LEXMC,LEXCREC,LEXI,LEXCID S (LEXI,LEXCID)="",LEXCREC=0
"RTN","LEXPRNT",65,0)
 I '$D(^LEX(757.01,LEXEX)) Q LEXCID
"RTN","LEXPRNT",66,0)
 S LEXMC=$P(^LEX(757.01,LEXEX,1),U,1)
"RTN","LEXPRNT",67,0)
 I LEXSUB="WRD" D
"RTN","LEXPRNT",68,0)
 . F  S LEXCREC=$O(^LEX(757.02,"AMC",LEXMC,LEXCREC)) Q:+LEXCREC=0  D
"RTN","LEXPRNT",69,0)
 . . I $D(^LEX(757.02,"ASRC",LEXSO,LEXCREC)) D
"RTN","LEXPRNT",70,0)
 . . . S LEXI=$P(^LEX(757.02,LEXCREC,0),U,2)
"RTN","LEXPRNT",71,0)
 . . . I LEXI'="NOCODE",LEXI'?1"U"2"0"4N,LEXCID'[LEXI D
"RTN","LEXPRNT",72,0)
 . . . . S LEXCID=LEXCID_"/"_LEXI
"RTN","LEXPRNT",73,0)
 I LEXSUB'="WRD" D
"RTN","LEXPRNT",74,0)
 . F  S LEXCREC=$O(^LEX(757.02,"B",LEXEX,LEXCREC)) Q:+LEXCREC=0  D
"RTN","LEXPRNT",75,0)
 . . I $D(^LEX(757.02,"ASRC",LEXSO,LEXCREC)) S LEXI=$P(^LEX(757.02,LEXCREC,0),U,2) I LEXI'="NOCODE",LEXI'?1"U"2"0"4N,LEXCID'[LEXI S LEXCID=LEXCID_"/"_LEXI
"RTN","LEXPRNT",76,0)
 S:LEXCID'="" LEXCID=LEXSO_" "_$E(LEXCID,2,999)
"RTN","LEXPRNT",77,0)
 K LEXCREC,LEXMC,LEXI
"RTN","LEXPRNT",78,0)
 S LEXEX=LEXCID Q LEXEX
"RTN","LEXSC")
0^275^B3047995
"RTN","LEXSC",1,0)
LEXSC ; ISL Shortcuts Add/Delete                 ; 09-23-96
"RTN","LEXSC",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXSC",3,0)
 ;
"RTN","LEXSC",4,0)
EN N LEXCX,LEXCXN,LEXDICS,LEXEDIT,LEXRP,LEXE
"RTN","LEXSC",5,0)
CTX S LEXRP="",LEXEDIT=1,LEXE=$$CNT^LEXDCXS,LEXCX=$$EN^LEXDCXS
"RTN","LEXSC",6,0)
 S LEXCXN=$P(LEXCX,"^",2),LEXCX=+LEXCX Q:LEXCX=0
"RTN","LEXSC",7,0)
 W !! W:LEXCX>0 "Edit shortcuts for:  ",$P($G(^LEX(757.41,LEXCX,0)),"^",1),!
"RTN","LEXSC",8,0)
 S:$L($G(^LEX(757.41,LEXCX,2))) LEXDICS=^LEX(757.41,LEXCX,2)
"RTN","LEXSC",9,0)
 F  D EDIT Q:LEXRP[U
"RTN","LEXSC",10,0)
 G:LEXRP[U&(LEXRP'["^^")&(+($G(LEXE))>1) CTX
"RTN","LEXSC",11,0)
 K LEXEDIT,LEXEND,LEXERM,LEXRP,LEXSC,LEXCX,LEX
"RTN","LEXSC",12,0)
 Q
"RTN","LEXSC",13,0)
EDIT ;
"RTN","LEXSC",14,0)
 S LEXSC=$$SC^LEXSC2 Q:LEXRP[U  S LEXSC=$$UP^XLFSTR(LEXSC)
"RTN","LEXSC",15,0)
 I '$L($G(LEXSC))!('$L($G(LEXCX))) S LEXRP=U Q
"RTN","LEXSC",16,0)
 I $D(^LEX(757.4,"ARA",LEXSC,LEXCX)) D FND Q
"RTN","LEXSC",17,0)
 D ADD^LEXSC3
"RTN","LEXSC",18,0)
 Q
"RTN","LEXSC",19,0)
FND ;
"RTN","LEXSC",20,0)
 N LEXDEL,LEXERM,LEXSTR S LEXERM=$O(^LEX(757.4,"ARA",LEXSC,LEXCX,0))
"RTN","LEXSC",21,0)
 S LEXERM=+LEXERM S:LEXERM>0 LEXERM=+($G(^LEX(757.4,LEXERM,0)))
"RTN","LEXSC",22,0)
 S LEXERM=$S(+LEXERM=0:"",1:$G(^LEX(757.01,LEXERM,0)))
"RTN","LEXSC",23,0)
 S LEXSTR=""""_LEXSC_""" already exist as a shortcut "
"RTN","LEXSC",24,0)
 S LEXSTR=LEXSTR_"(in the context of "_LEXCXN_")"
"RTN","LEXSC",25,0)
 S:LEXERM'="" LEXSTR=LEXSTR_" pointing to the term """_LEXERM_""""
"RTN","LEXSC",26,0)
 D WRT^LEXSC2(LEXSTR)
"RTN","LEXSC",27,0)
 S LEXDEL=$$DELOK^LEXSC2 I +LEXDEL>0 D DELS^LEXSC3
"RTN","LEXSC",28,0)
 I '$D(^LEX(757.4,"ARA",LEXSC,LEXCX)) D ADD^LEXSC3
"RTN","LEXSC",29,0)
 Q
"RTN","LEXSC2")
0^276^B8702305
"RTN","LEXSC2",1,0)
LEXSC2 ; ISL Shortcuts Add/Delete                 ; 09-23-96
"RTN","LEXSC2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXSC2",3,0)
 ;
"RTN","LEXSC2",4,0)
WRT(LEXSTR) ;
"RTN","LEXSC2",5,0)
 W ! N LEXI,LEXLEN S LEXLEN=70 F  D  Q:$L(LEXSTR)<LEXLEN
"RTN","LEXSC2",6,0)
 . F LEXI=(LEXLEN+1):-1:0 Q:$E(LEXSTR,LEXI)=" "!(LEXI=0)
"RTN","LEXSC2",7,0)
 . I LEXI>0 W !,?2,$E(LEXSTR,1,(LEXI-1)) S LEXSTR=$E(LEXSTR,(LEXI+1),$L(LEXSTR)) Q
"RTN","LEXSC2",8,0)
 . I LEXI=0 W:$L(LEXSTR) !,?2,LEXSTR S LEXSTR=""
"RTN","LEXSC2",9,0)
 I $L(LEXSTR) W !,?2,LEXSTR
"RTN","LEXSC2",10,0)
 W !
"RTN","LEXSC2",11,0)
 Q
"RTN","LEXSC2",12,0)
DELOK(X) ; Ok to delete?
"RTN","LEXSC2",13,0)
 N DIR,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","LEXSC2",14,0)
 S DIR("A")="Delete current shortcut:  ",DIR("B")="NO",DIR(0)="YAO" D ^DIR
"RTN","LEXSC2",15,0)
 S:X[U LEXRP=U S:X["^^" LEXRP="^^" W ! S X=$S(+($G(Y))=1:1,1:0) Q X
"RTN","LEXSC2",16,0)
 Q
"RTN","LEXSC2",17,0)
ADDOK(X) ; Ok to add?
"RTN","LEXSC2",18,0)
 N DIR,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","LEXSC2",19,0)
 S DIR("A")="Add shortcut:  ",DIR("B")="NO",DIR(0)="YAO" D ^DIR
"RTN","LEXSC2",20,0)
 S:X[U LEXRP=U S:X["^^" LEXRP="^^" W ! S X=$S(+($G(Y))=1:1,1:0) Q X
"RTN","LEXSC2",21,0)
SC(X) ; Get shortcut
"RTN","LEXSC2",22,0)
 S DIR("A")="Enter shortcut keyword(s):  "
"RTN","LEXSC2",23,0)
 S DIR("?")="Enter one or more words (up to 63 characters) to use as a shortcut for a term"
"RTN","LEXSC2",24,0)
 S DIR("??")="^D SCHLP^LEXSC2" N Y S DIR(0)="FAO^2:63" D ^DIR
"RTN","LEXSC2",25,0)
 S:X="" LEXRP=U S:X[U LEXRP=U S:X["^^" LEXRP="^^" F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEXSC2",26,0)
 W:$D(DTOUT) !,"Try later.",! S:$D(DTOUT) X="",LEXRP=U
"RTN","LEXSC2",27,0)
 S:X[U DUOUT=1 K DIR,DIRUT,DIROUT
"RTN","LEXSC2",28,0)
 Q X
"RTN","LEXSC2",29,0)
SCHLP ; Look-up help
"RTN","LEXSC2",30,0)
 W !!,"Enter one or more words (up to 63 characters) to use as a shortcut to quickly"
"RTN","LEXSC2",31,0)
 W !,"locate a single term without conducting a word search.  This shortcut should"
"RTN","LEXSC2",32,0)
 W !,"be unique to the term as used in the context """,LEXCXN,""""
"RTN","LEXSC2",33,0)
 Q
"RTN","LEXSC2",34,0)
TERM(X) ; Get expression
"RTN","LEXSC2",35,0)
 N DIR,Y S DIR("A")="Select a term for the shortcut:  "
"RTN","LEXSC2",36,0)
 S DIR("?")="Enter a ""free text"" description of a clinical concept, 2 to 245 characters"
"RTN","LEXSC2",37,0)
 S DIR("??")="^D TERMHLP^LEXSC2" N Y S DIR(0)="FAO^2:245" D ^DIR
"RTN","LEXSC2",38,0)
 S DIC="^LEX(757.01," S:X[U LEXRP=U S:X["^^" LEXRP="^^" Q:LEXRP[U "^"
"RTN","LEXSC2",39,0)
 I X=" ",+($G(^DISV(DUZ,DIC)))>0 S X=@(DIC_+($G(^DISV(DUZ,DIC)))_",0)") W " ",X
"RTN","LEXSC2",40,0)
 F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEXSC2",41,0)
 W:$D(DTOUT) !,"Try later.",! S:$D(DTOUT) X=""
"RTN","LEXSC2",42,0)
 S:X[U DUOUT=1 K DIR,DIRUT,DIROUT Q X
"RTN","LEXSC2",43,0)
TERMHLP ; Look-up help
"RTN","LEXSC2",44,0)
 W !!,"Enter a ""free text"" description of a clinical concept, 2 to 245 characters."
"RTN","LEXSC2",45,0)
 W !,"Best results occur using either one full word or two/three partial words "
"RTN","LEXSC2",46,0)
 W !,"without a suffix (i.e., ""DIABETES"",""DIAB MELL"",""DIAB MELL INSUL"")."
"RTN","LEXSC2",47,0)
 Q
"RTN","LEXSC3")
0^277^B9634238
"RTN","LEXSC3",1,0)
LEXSC3 ; ISL Shortcuts Add/Delete                 ; 09-23-96
"RTN","LEXSC3",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXSC3",3,0)
 ;
"RTN","LEXSC3",4,0)
ADD ; Add a shortcut
"RTN","LEXSC3",5,0)
 N LEXADD,LEXERM
"RTN","LEXSC3",6,0)
ADD2 F  D  Q:$G(LEXRP)[U!(+($G(Y))>0)
"RTN","LEXSC3",7,0)
 . W ! S LEXERM=$$TERM^LEXSC2 Q:LEXRP[U
"RTN","LEXSC3",8,0)
 . D LK(LEXERM)
"RTN","LEXSC3",9,0)
 I LEXRP[U,LEXRP'["^^" W ! S LEXRP="" Q
"RTN","LEXSC3",10,0)
 Q:LEXRP["^^"  I +Y>0 D ASKADD I $G(LEXADD)>0 D ADDSC(+Y,LEXSC,LEXCX)
"RTN","LEXSC3",11,0)
 I LEXRP[U,LEXRP'["^^" S LEXRP="" G ADD2
"RTN","LEXSC3",12,0)
 Q
"RTN","LEXSC3",13,0)
ASKADD ;
"RTN","LEXSC3",14,0)
 N LEXERM,LEXSTR S LEXERM=+Y
"RTN","LEXSC3",15,0)
 S LEXERM=$S(+LEXERM'>0:"",1:$G(^LEX(757.01,LEXERM,0)))
"RTN","LEXSC3",16,0)
 S LEXSTR="Add """_LEXSC_""" as a short cut "
"RTN","LEXSC3",17,0)
 S LEXSTR=LEXSTR_"(in the context of "_LEXCXN_")"
"RTN","LEXSC3",18,0)
 S:LEXERM'="" LEXSTR=LEXSTR_" pointing to the term """_LEXERM_""""
"RTN","LEXSC3",19,0)
 D WRT^LEXSC2(LEXSTR) S LEXADD=$$ADDOK^LEXSC2
"RTN","LEXSC3",20,0)
 Q
"RTN","LEXSC3",21,0)
ADDSC(LEXEXP,LEXSC,LEXCX) ; Add shortcut
"RTN","LEXSC3",22,0)
 I '$D(^LEX(757.4,"B",LEXEXP)) D ADDR
"RTN","LEXSC3",23,0)
 I $D(^LEX(757.4,"B",LEXEXP)) D ADDS
"RTN","LEXSC3",24,0)
 Q
"RTN","LEXSC3",25,0)
ADDS ; Add Shortcut to sub-file
"RTN","LEXSC3",26,0)
 N DIC,DLAYGO,X,Y,DTOUT,DUOUT
"RTN","LEXSC3",27,0)
 N LEXR S LEXR=$O(^LEX(757.4,"B",LEXEXP,0)) Q:'$D(^LEX(757.4,LEXR,0))  K DD,DO S DA(1)=LEXR,X=LEXSC
"RTN","LEXSC3",28,0)
 S DLAYGO=757.401,DIC="^LEX(757.4,"_DA(1)_",1,",DIC(0)="AEMQL",DIC("P")="757.401",DIC("DR")="1////^S X=LEXCX" D FILE^DICN
"RTN","LEXSC3",29,0)
 Q
"RTN","LEXSC3",30,0)
ADDR ; Add record
"RTN","LEXSC3",31,0)
 N DIC,DLAYGO,X,Y,DTOUT,DUOUT
"RTN","LEXSC3",32,0)
 N LEXERM S LEXERM=$G(^LEX(757.01,LEXEXP,0))
"RTN","LEXSC3",33,0)
 K DD,DO S X=LEXEXP,DIC="^LEX(757.4,",DLAYGO=757.4,DIC(0)="AEMQL" D FILE^DICN
"RTN","LEXSC3",34,0)
 Q
"RTN","LEXSC3",35,0)
LK(X) ; Set up Lookup
"RTN","LEXSC3",36,0)
 S X=$G(X) K DLAYGO N DIC,DIPGM,DO G:X=""!(X["^") LKQ S:$L($G(LEXDICS)) DIC("S")=LEXDICS
"RTN","LEXSC3",37,0)
 S XTLKKSCH("INDEX")="AWRD",(DIC,XTLKGBL,XTLKKSCH("GBL"))="^LEX(757.01,"
"RTN","LEXSC3",38,0)
 S LEXSHOW="ICD/CPT/DSM/NAN/OMA/NIC"
"RTN","LEXSC3",39,0)
 S:$L($G(^LEXT(757.2,1,2))) XTLKHLP="D "_^LEXT(757.2,1,2)
"RTN","LEXSC3",40,0)
 S:$L($G(^LEXT(757.2,1,3))) XTLKKSCH("DSPLY")=^LEXT(757.2,1,3)
"RTN","LEXSC3",41,0)
 S:'$L($G(XTLKHLP)) XTLKHLP="D XTLK^LEXHLP" S:'$L($G(XTLKKSCH("DSPLY"))) XTLKKSCH="XTLK^LEXPRNT"
"RTN","LEXSC3",42,0)
 S (X,XTLKX)=$$UP^XLFSTR(LEXERM),DO=@(DIC_"0)"),DIC(0)="EMQ",XTLKSAY=0
"RTN","LEXSC3",43,0)
 W !,"Searching ...  "
"RTN","LEXSC3",44,0)
 D ^XTLKKWL K XTLKSAY,XTLKHLP S LEXRP=X
"RTN","LEXSC3",45,0)
LKQ ;
"RTN","LEXSC3",46,0)
 K LEXSUB,LEXU,LEXAP,LEXUN,LEXLST,LEXLL,LEXSHOW
"RTN","LEXSC3",47,0)
 K XTLKX,XTLKKSCH,XTLKHLP,XTLKSAY,XTLKGBL,XTLKWD2
"RTN","LEXSC3",48,0)
 Q
"RTN","LEXSC3",49,0)
DELS ;
"RTN","LEXSC3",50,0)
 N DIK,LEXC S LEXCX=+($G(LEXCX)) Q:'$L($G(LEXSC))  Q:LEXCX=0  N LEXR,LEXS
"RTN","LEXSC3",51,0)
 S LEXR=$O(^LEX(757.4,"ARA",$E($$UP^XLFSTR(LEXSC),1,63),LEXCX,0)) Q:+LEXR=0
"RTN","LEXSC3",52,0)
 S LEXS=$O(^LEX(757.4,"ARA",$E($$UP^XLFSTR(LEXSC),1,63),LEXCX,+LEXR,0)) Q:+LEXS=0
"RTN","LEXSC3",53,0)
 S DA(1)=+LEXR,DA=+LEXS,DIK="^LEX(757.4,"_DA(1)_",1," D ^DIK
"RTN","LEXSC3",54,0)
 S LEXC=$$CNT(LEXR) I LEXC'[U,+LEXC=0 D DELR(LEXR)
"RTN","LEXSC3",55,0)
 Q
"RTN","LEXSC3",56,0)
DELR(DA) ;
"RTN","LEXSC3",57,0)
 S DA=+($G(DA)) Q:DA=0  Q:'$D(^LEX(757.4,DA))  N DIK S DIK="^LEX(757.4," D ^DIK
"RTN","LEXSC3",58,0)
 Q
"RTN","LEXSC3",59,0)
CNT(X) ;
"RTN","LEXSC3",60,0)
 N LEXR,LEXC,LEXI S (LEXC,LEXI)=0,LEXR=+$G(X)
"RTN","LEXSC3",61,0)
 Q:'$L($G(^LEX(757.4,LEXR,0))) "^"
"RTN","LEXSC3",62,0)
 F  S LEXI=$O(^LEX(757.4,LEXR,1,LEXI)) Q:+LEXI=0  D
"RTN","LEXSC3",63,0)
 . S LEXC=LEXC+1
"RTN","LEXSC3",64,0)
 S X=LEXC Q X
"RTN","LEXSET")
0^278^B9924304
"RTN","LEXSET",1,0)
LEXSET ; ISL Setup Appl/User Defaults for Look-up ; 09-23-96
"RTN","LEXSET",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXSET",3,0)
 ;
"RTN","LEXSET",4,0)
EN ; Namespace/subset are not known
"RTN","LEXSET",5,0)
 N DTOUT,DUOUT,LEXNS,LEXSS,LEXDS,LEXDW,LEXDR,LEXDP,LEXDA,LEXDB,LEXD0,LEXD,LEXDX
"RTN","LEXSET",6,0)
 S LEXNS=$$NS^LEXSET4 Q:LEXNS[U!($D(DTOUT))!($D(DUOUT))
"RTN","LEXSET",7,0)
 S LEXSS=$$SS^LEXSET4(LEXNS) Q:LEXSS[U!($D(DTOUT))!($D(DUOUT))
"RTN","LEXSET",8,0)
 D CONFIG(LEXNS,LEXSS)
"RTN","LEXSET",9,0)
 Q
"RTN","LEXSET",10,0)
 ;
"RTN","LEXSET",11,0)
CONFIG(LEXNS,LEXSS) ;  Namespace/subset are known
"RTN","LEXSET",12,0)
 K LEXD,LEXSUB,LEXAP,LEXSHOW,LEXSCT,LEXUN
"RTN","LEXSET",13,0)
 N LEXA,LEXL,LEXS,LEXM,LEXD S LEXNS=$G(LEXNS),LEXSS=$G(LEXSS)
"RTN","LEXSET",14,0)
 S LEXQ=$S($D(LEXQ):+LEXQ,1:1) S:LEXNS="" LEXNS="LEX" S:LEXSS="" LEXSS="WRD"
"RTN","LEXSET",15,0)
 S:'$D(^LEXT(757.2,"AN",LEXNS)) LEXNS=$$NS^LEXDFN2(LEXNS)
"RTN","LEXSET",16,0)
 S:'$D(^LEXT(757.2,"AA",LEXSS))&('$D(^LEXT(757.2,"AB",LEXSS))) LEXSS=$$MD^LEXDFN2(LEXSS)
"RTN","LEXSET",17,0)
 N LEXUS,LEXO,LEXT
"RTN","LEXSET",18,0)
 S LEXA=$$NSIEN(LEXNS),LEXS=$$SSIEN(LEXSS)
"RTN","LEXSET",19,0)
 S LEXM=$$MDIEN(LEXSS),LEXL=$$ASIEN(LEXA)
"RTN","LEXSET",20,0)
 I +LEXA=0!(+LEXS=0) D DEF G SET
"RTN","LEXSET",21,0)
 D APP^LEXSET2(LEXA)
"RTN","LEXSET",22,0)
 I LEXM=0!(LEXM>0&(LEXM=LEXA)) D SUB^LEXSET2(LEXS)
"RTN","LEXSET",23,0)
 I LEXM>0,LEXM'=LEXA D MOD^LEXSET2(LEXM)
"RTN","LEXSET",24,0)
 D USR^LEXSET2(LEXA)
"RTN","LEXSET",25,0)
 D GEN^LEXSET2
"RTN","LEXSET",26,0)
 I +($G(LEXD("DF","OVR")))>0 D OVER^LEXSET3
"RTN","LEXSET",27,0)
 I +($G(LEXD("DF","OVR")))=0 D USER^LEXSET3
"RTN","LEXSET",28,0)
 D EN^LEXSET5 S:+($G(LEXQ))=1 ^TMP("LEXSCH",$J,"ADF",0)=1
"RTN","LEXSET",29,0)
SET ;K LEXD("UD"),LEXD("AP"),LEXD("SS")
"RTN","LEXSET",30,0)
 Q
"RTN","LEXSET",31,0)
DEF ; Defaults if LEXNS or LEXSS are invalid
"RTN","LEXSET",32,0)
 S LEXD("DF","DIS")="ICD/CPT",LEXD("DF","DSP")="XTLK^LEXPRNT"
"RTN","LEXSET",33,0)
 S LEXD("DF","FLN")=757.01,LEXD("DF","GBL")="^LEX(757.01,"
"RTN","LEXSET",34,0)
 S LEXD("DF","LEXAP")=1,LEXD("DF","UNR")=0
"RTN","LEXSET",35,0)
 S LEXD("DF","HLP")="D XTLK^LEXHLP",LEXD("DF","IDX")="AWRD"
"RTN","LEXSET",36,0)
 S LEXD("DF","NAM")="Lexicon",LEXD("DF","OVR")=0
"RTN","LEXSET",37,0)
 S LEXD("DF","SUB")="WRD"
"RTN","LEXSET",38,0)
 Q
"RTN","LEXSET",39,0)
ALTDEF ; Defaults if LEXNS or LEXSS are invalid
"RTN","LEXSET",40,0)
 S (DIC,XTLKGBL,XTLKKSCH("GBL"))="^LEX(757.01,"
"RTN","LEXSET",41,0)
 S XTLKKSCH("DSPLY")="XTLK^LEXPRNT",XTLKKSCH("INDEX")="AWRD",XTLKHLP="D XTLK^LEXHLP"
"RTN","LEXSET",42,0)
 S XTLKSAY=1 S:'$L($G(DIC(0))) DIC(0)="EQM" S:'$L($G(X))&(DIC(0)'["A") DIC(0)="A"_DIC(0)
"RTN","LEXSET",43,0)
 S:DIC(0)["L" DIC(0)=$P(DIC(0),"L",1)_$P(DIC(0),"L",2) S:DIC(0)["I" DIC(0)=$P(DIC(0),"I",1)_$P(DIC(0),"L",2)
"RTN","LEXSET",44,0)
 S LEXAP=1,LEXLL=5,LEXUN=0,LEXSUB="WRD",LEXSHOW="ICD/CPT"
"RTN","LEXSET",45,0)
 Q
"RTN","LEXSET",46,0)
NSIEN(LEX) ; Get IEN for application based on namespace
"RTN","LEXSET",47,0)
 Q:'$L($G(LEX)) 0 Q:$D(^LEXT(757.2,"AN",LEX)) $O(^LEXT(757.2,"AN",LEX,0)) Q 0
"RTN","LEXSET",48,0)
SSIEN(LEX) ; Get IEN for subset based on subset
"RTN","LEXSET",49,0)
 Q:'$L($G(LEX)) 0
"RTN","LEXSET",50,0)
 Q:$D(^LEXT(757.2,"AA",LEX)) $O(^LEXT(757.2,"AA",LEX,0))
"RTN","LEXSET",51,0)
 S:$D(^LEXT(757.2,"AB",LEX)) LEX=$O(^LEXT(757.2,"AB",LEX,0))
"RTN","LEXSET",52,0)
 I +LEX>0,$D(^LEXT(757.2,LEX,5)) S LEX=$P(^LEXT(757.2,LEX,5),"^",2)
"RTN","LEXSET",53,0)
 I LEX'="",$D(^LEXT(757.2,"AA",LEX)) Q $O(^LEXT(757.2,"AA",LEX,0))
"RTN","LEXSET",54,0)
 Q 0
"RTN","LEXSET",55,0)
MDIEN(LEX) ; Get IEN for mode based on subset
"RTN","LEXSET",56,0)
 Q:'$L($G(LEX)) 0
"RTN","LEXSET",57,0)
 I $D(^LEXT(757.2,"AB",LEX)) S LEX=$O(^LEXT(757.2,"AB",LEX,0)) S LEX=+LEX Q LEX
"RTN","LEXSET",58,0)
 Q 0
"RTN","LEXSET",59,0)
ASIEN(LEX) ;
"RTN","LEXSET",60,0)
 Q:+($G(LEX))=0 0
"RTN","LEXSET",61,0)
 S LEX=+LEX Q:'$L($P($G(^LEXT(757.2,LEX,5)),"^",2))&('$L($P($G(^LEXT(757.2,LEX,0)),"^",2))) 0
"RTN","LEXSET",62,0)
 S:$L($P($G(^LEXT(757.2,LEX,5)),"^",2)) LEX=$P($G(^LEXT(757.2,LEX,5)),"^",2)
"RTN","LEXSET",63,0)
 S:$L($P($G(^LEXT(757.2,LEX,0)),"^",2)) LEX=$P($G(^LEXT(757.2,LEX,0)),"^",2)
"RTN","LEXSET",64,0)
 Q:$D(^LEXT(757.2,"AA",LEX)) $O(^LEXT(757.2,"AA",LEX,0))
"RTN","LEXSET",65,0)
 Q 0
"RTN","LEXSET2")
0^279^B16589972
"RTN","LEXSET2",1,0)
LEXSET2 ; ISL Setup Appl/User Defaults for Look-up ; 09-23-96
"RTN","LEXSET2",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXSET2",3,0)
 ;
"RTN","LEXSET2",4,0)
APP(LEXA) ; Application
"RTN","LEXSET2",5,0)
 K LEXD("AP") N LEXT,LEXI S LEXA=+($G(LEXA))
"RTN","LEXSET2",6,0)
 Q:LEXA=0  Q:'$D(^LEXT(757.2,LEXA))  Q:$P($G(^LEXT(757.2,LEXA,5)),"^",5)=""
"RTN","LEXSET2",7,0)
 S LEXT="AP",LEXI=LEXA D COMMON
"RTN","LEXSET2",8,0)
 S:$L($G(^LEXT(757.2,LEXI,7))) LEXD(LEXT,"DIS")=$G(^LEXT(757.2,LEXI,7))
"RTN","LEXSET2",9,0)
 S LEXD(LEXT,"UNR")=+($P($G(^LEXT(757.2,LEXI,5)),"^",6))
"RTN","LEXSET2",10,0)
 S LEXD(LEXT,"DEF")=+($P($G(^LEXT(757.2,LEXI,5)),"^",3))
"RTN","LEXSET2",11,0)
 S LEXD(LEXT,"SCT")=+($P($G(^LEXT(757.2,LEXI,5)),"^",8))
"RTN","LEXSET2",12,0)
 K:+(LEXD(LEXT,"SCT"))=0 LEXD(LEXT,"SCT")
"RTN","LEXSET2",13,0)
 S LEXD(LEXT,"FIL")=$G(^LEXT(757.2,LEXI,6))
"RTN","LEXSET2",14,0)
 S LEXD("DF","UNR")=+($P($G(^LEXT(757.2,LEXI,5)),"^",6))
"RTN","LEXSET2",15,0)
 S LEXD(LEXT,"SUB")=$P($G(^LEXT(757.2,LEXI,5)),"^",2)
"RTN","LEXSET2",16,0)
 S:LEXD(LEXT,"SUB")="" LEXD(LEXT,"SUB")="WRD"
"RTN","LEXSET2",17,0)
 S LEXD(LEXT,"IDX")="A"_LEXD(LEXT,"SUB")
"RTN","LEXSET2",18,0)
 Q
"RTN","LEXSET2",19,0)
SUB(LEXS) ; Subset
"RTN","LEXSET2",20,0)
 K LEXD("SS") N LEXT,LEXI S LEXS=+($G(LEXS))
"RTN","LEXSET2",21,0)
 Q:LEXS=0  Q:'$D(^LEXT(757.2,LEXS))  Q:$P($G(^LEXT(757.2,LEXS,0)),"^",2)=""
"RTN","LEXSET2",22,0)
 S LEXT="SS",LEXI=LEXS D COMMON
"RTN","LEXSET2",23,0)
 S:$L($G(^LEXT(757.2,LEXI,4))) LEXD(LEXT,"DIS")=$G(^LEXT(757.2,LEXI,4))
"RTN","LEXSET2",24,0)
 S LEXD(LEXT,"SCT")=+($P($G(^LEXT(757.2,LEXI,5)),"^",8))
"RTN","LEXSET2",25,0)
 K:+(LEXD(LEXT,"SCT"))=0 LEXD(LEXT,"SCT")
"RTN","LEXSET2",26,0)
 S LEXD(LEXT,"FIL")=$G(^LEXT(757.2,LEXI,6))
"RTN","LEXSET2",27,0)
 S LEXD(LEXT,"SUB")=$P($G(^LEXT(757.2,LEXI,0)),"^",2)
"RTN","LEXSET2",28,0)
 S:LEXD(LEXT,"SUB")="" LEXD(LEXT,"SUB")="WRD"
"RTN","LEXSET2",29,0)
 S LEXD(LEXT,"IDX")="A"_LEXD(LEXT,"SUB")
"RTN","LEXSET2",30,0)
 Q
"RTN","LEXSET2",31,0)
GEN S LEXD("DF","OVR")=0 S:$G(LEXD("AP","OVR"))=1!($G(LEXD("SS","OVR"))=1) LEXD("DF","OVR")=1
"RTN","LEXSET2",32,0)
 Q
"RTN","LEXSET2",33,0)
MOD(LEXM) ; Mode
"RTN","LEXSET2",34,0)
 K LEXD("SS") N LEXT,LEXI S LEXM=+($G(LEXM))
"RTN","LEXSET2",35,0)
 Q:LEXM=0
"RTN","LEXSET2",36,0)
 Q:'$D(^LEXT(757.2,LEXM,5))
"RTN","LEXSET2",37,0)
 Q:$P(^LEXT(757.2,LEXM,5),"^",1)=""
"RTN","LEXSET2",38,0)
 Q:$P(^LEXT(757.2,LEXM,5),"^",5)'=""
"RTN","LEXSET2",39,0)
 Q:$P($G(^LEXT(757.2,LEXM,5)),"^",1)=""
"RTN","LEXSET2",40,0)
 S LEXT="SS",LEXI=LEXM D COMMON
"RTN","LEXSET2",41,0)
 S:$L($G(^LEXT(757.2,LEXI,7))) LEXD(LEXT,"DIS")=$G(^LEXT(757.2,LEXI,7))
"RTN","LEXSET2",42,0)
 S LEXD(LEXT,"FIL")=$G(^LEXT(757.2,LEXI,6))
"RTN","LEXSET2",43,0)
 S LEXD(LEXT,"SCT")=+($P($G(^LEXT(757.2,LEXI,5)),"^",8))
"RTN","LEXSET2",44,0)
 K:+(LEXD(LEXT,"SCT"))=0 LEXD(LEXT,"SCT")
"RTN","LEXSET2",45,0)
 S LEXD(LEXT,"SUB")=$P($G(^LEXT(757.2,LEXI,5)),"^",2)
"RTN","LEXSET2",46,0)
 S:LEXD(LEXT,"SUB")="" LEXD(LEXT,"SUB")="WRD"
"RTN","LEXSET2",47,0)
 S LEXD(LEXT,"IDX")="A"_LEXD(LEXT,"SUB")
"RTN","LEXSET2",48,0)
 Q
"RTN","LEXSET2",49,0)
IND ;
"RTN","LEXSET2",50,0)
 S LEXD("DF","XTLKSAY")=1 S:'$L($G(DIC(0))) DIC(0)="EQM" S:'$L($G(X))&(DIC(0)'["A") DIC(0)="A"_DIC(0)
"RTN","LEXSET2",51,0)
 S:DIC(0)["L" DIC(0)=$P(DIC(0),"L",1)_$P(DIC(0),"L",2) S:DIC(0)["I" DIC(0)=$P(DIC(0),"I",1)_$P(DIC(0),"L",2)
"RTN","LEXSET2",52,0)
 S LEXD("DF","DIC(0)")=DIC(0) K DIC(0)
"RTN","LEXSET2",53,0)
 Q
"RTN","LEXSET2",54,0)
COMMON ; Common Values
"RTN","LEXSET2",55,0)
 S LEXD(LEXT,"IEN")=LEXI S:LEXT="AP" LEXD("DF","LEXAP")=LEXI
"RTN","LEXSET2",56,0)
 S LEXD(LEXT,"NAM")=$P($G(^LEXT(757.2,LEXI,0)),"^",1)
"RTN","LEXSET2",57,0)
 S LEXD(LEXT,"GBL")=$G(^LEXT(757.2,LEXI,1))
"RTN","LEXSET2",58,0)
 S LEXD(LEXT,"OVR")=+($P($G(^LEXT(757.2,LEXI,5)),"^",7))
"RTN","LEXSET2",59,0)
 S:$G(^LEXT(757.2,LEXI,2))'="" LEXD(LEXT,"DSP")=$G(^LEXT(757.2,LEXI,3))
"RTN","LEXSET2",60,0)
 S:$G(^LEXT(757.2,LEXI,3))'="" LEXD(LEXT,"HLP")="D "_$G(^LEXT(757.2,LEXI,2))
"RTN","LEXSET2",61,0)
 Q
"RTN","LEXSET2",62,0)
USR(LEXI) ; User defaults
"RTN","LEXSET2",63,0)
 Q:+($G(LEXI))=0  Q:+($G(DUZ))=0  Q:'$D(^LEXT(757.2,+LEXI,200,DUZ))
"RTN","LEXSET2",64,0)
 N LEXEMP S LEXEMP=$G(^LEXT(757.2,+LEXI,200,DUZ,1)) S:LEXEMP'="" LEXD("UD","FIL")=LEXEMP
"RTN","LEXSET2",65,0)
 S LEXEMP=$G(^LEXT(757.2,+LEXI,200,DUZ,2)) S:LEXEMP'="" LEXD("UD","DIS")=LEXEMP
"RTN","LEXSET2",66,0)
 S LEXEMP=$G(^LEXT(757.2,+LEXI,200,DUZ,3)) S:LEXEMP'="" LEXD("UD","SUB")=LEXEMP,LEXD("UD","IDX")="A"_LEXEMP
"RTN","LEXSET2",67,0)
 S LEXEMP=$G(^LEXT(757.2,+LEXI,200,DUZ,4)) S:LEXEMP'="" LEXD("UD","SCT")=LEXEMP
"RTN","LEXSET2",68,0)
 I $L($G(LEXD("UD","SUB"))) D
"RTN","LEXSET2",69,0)
 . I $D(^LEXT(757.2,"AA",LEXD("UD","SUB"))) S LEXD("UD","IEN")=$O(^LEXT(757.2,"AA",LEXD("UD","SUB"),0))
"RTN","LEXSET2",70,0)
 . I $D(^LEXT(757.2,"AB",LEXD("UD","SUB"))) S LEXD("UD","IEN")=$O(^LEXT(757.2,"AB",LEXD("UD","SUB"),0))
"RTN","LEXSET2",71,0)
 . I +($G(LEXD("UD","IEN")))>0,$D(^LEXT(757.2,+($G(LEXD("UD","IEN"))))) D
"RTN","LEXSET2",72,0)
 . . S:$L($G(^LEXT(757.2,+($G(LEXD("UD","IEN"))),1))) LEXD("UD","GBL")=$G(^LEXT(757.2,+($G(LEXD("UD","IEN"))),1))
"RTN","LEXSET2",73,0)
 . . S:$L($G(^LEXT(757.2,+($G(LEXD("UD","IEN"))),2))) LEXD("UD","DSP")=$G(^LEXT(757.2,+($G(LEXD("UD","IEN"))),2))
"RTN","LEXSET2",74,0)
 . . S:$L($G(^LEXT(757.2,+($G(LEXD("UD","IEN"))),3))) LEXD("UD","HLP")=$G(^LEXT(757.2,+($G(LEXD("UD","IEN"))),3))
"RTN","LEXSET2",75,0)
 . I '$L($G(LEXD("UD","GBL"))) K LEXD("UD","SUB"),LEXD("UD","IDX")
"RTN","LEXSET2",76,0)
 Q
"RTN","LEXSET3")
0^280^B12060818
"RTN","LEXSET3",1,0)
LEXSET3 ; ISL Setup Appl/User Defaults for Look-up ; 09-23-96
"RTN","LEXSET3",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXSET3",3,0)
 ;
"RTN","LEXSET3",4,0)
OVER ;
"RTN","LEXSET3",5,0)
 N LEXT
"RTN","LEXSET3",6,0)
 S:LEXM=0&(LEXL=LEXS) LEXT="AP"
"RTN","LEXSET3",7,0)
 S:LEXM=0&(LEXL'=LEXS) LEXT="SS"
"RTN","LEXSET3",8,0)
 S:LEXM>0 LEXT="SS"
"RTN","LEXSET3",9,0)
 I $L($G(LEXD("AP","DEF"))),+($G(LEXD("AP","DEF")))=0 S LEXT="AP"
"RTN","LEXSET3",10,0)
 S:$L($G(LEXD(LEXT,"DIS"))) LEXD("DF","DIS")=LEXD(LEXT,"DIS")
"RTN","LEXSET3",11,0)
 S:$L($G(LEXD(LEXT,"DSP"))) LEXD("DF","DSP")=LEXD(LEXT,"DSP")
"RTN","LEXSET3",12,0)
 S:$L($G(LEXD(LEXT,"FIL"))) LEXD("DF","FIL")=LEXD(LEXT,"FIL")
"RTN","LEXSET3",13,0)
 S:$L($G(LEXD(LEXT,"GBL"))) LEXD("DF","GBL")=LEXD(LEXT,"GBL")
"RTN","LEXSET3",14,0)
 S:$L($G(LEXD(LEXT,"HLP"))) LEXD("DF","HLP")=LEXD(LEXT,"HLP")
"RTN","LEXSET3",15,0)
 S:$L($G(LEXD(LEXT,"IDX"))) LEXD("DF","IDX")=LEXD(LEXT,"IDX")
"RTN","LEXSET3",16,0)
 S:'$D(LEXD(LEXT,"IDX")) LEXD(LEXT,"IDX")="AWRD",LEXD(LEXT,"GBL")="^LEX(757.01,"
"RTN","LEXSET3",17,0)
 I '$D(LEXD(LEXT,"GBL")) D
"RTN","LEXSET3",18,0)
 . I $D(^LEX(757.01,LEXD(LEXT,"IDX"))) S LEXD(LEXT,"GBL")="^LEX(757.01," Q
"RTN","LEXSET3",19,0)
 . I $D(^LEX(757.21,LEXD(LEXT,"IDX"))) S LEXD(LEXT,"GBL")="^LEX(757.21," Q
"RTN","LEXSET3",20,0)
 . S LEXD(LEXT,"IDX")="AWRD",LEXD(LEXT,"GBL")="^LEX(757.01,"
"RTN","LEXSET3",21,0)
 S:$L($G(LEXD(LEXT,"NAM"))) LEXD("DF","NAM")=LEXD(LEXT,"NAM")
"RTN","LEXSET3",22,0)
 S LEXD("DF","SUB")=$E($G(LEXD(LEXT,"IDX")),2,$L($G(LEXD(LEXT,"IDX"))))
"RTN","LEXSET3",23,0)
 S LEXD("DF","FLN")=$P($P($G(LEXD(LEXT,"GBL")),"(",2),",",1)
"RTN","LEXSET3",24,0)
 I 'LEXD("DF","FLN") D
"RTN","LEXSET3",25,0)
 . S LEXD("DF","FLN")=757.01,LEXD("DF","GBL")="^LEX(757.01,"
"RTN","LEXSET3",26,0)
 . S LEXD("DF","IDX")="AWRD",LEXD("DF","SUB")="WRD"
"RTN","LEXSET3",27,0)
 S:$L($G(LEXD(LEXT,"SCT"))) LEXD("DF","SCT")=LEXD(LEXT,"SCT")
"RTN","LEXSET3",28,0)
 Q
"RTN","LEXSET3",29,0)
USER ;
"RTN","LEXSET3",30,0)
 N LEXT
"RTN","LEXSET3",31,0)
 S:LEXM=0&(LEXL=LEXS) LEXT="AP"
"RTN","LEXSET3",32,0)
 S:LEXM=0&(LEXL'=LEXS) LEXT="SS"
"RTN","LEXSET3",33,0)
 S:LEXM>0&(LEXM=LEXA) LEXT="AP"
"RTN","LEXSET3",34,0)
 S:LEXM>0&(LEXM'=LEXA) LEXT="SS"
"RTN","LEXSET3",35,0)
 S:$L($G(LEXD(LEXT,"DIS"))) LEXD("DF","DIS")=LEXD(LEXT,"DIS")
"RTN","LEXSET3",36,0)
 S:$L($G(LEXD(LEXT,"DSP"))) LEXD("DF","DSP")=LEXD(LEXT,"DSP")
"RTN","LEXSET3",37,0)
 S:$L($G(LEXD(LEXT,"FIL"))) LEXD("DF","FIL")=LEXD(LEXT,"FIL")
"RTN","LEXSET3",38,0)
 S:$L($G(LEXD(LEXT,"GBL"))) LEXD("DF","GBL")=LEXD(LEXT,"GBL")
"RTN","LEXSET3",39,0)
 S:$L($G(LEXD(LEXT,"HLP"))) LEXD("DF","HLP")=LEXD(LEXT,"HLP")
"RTN","LEXSET3",40,0)
 S:$L($G(LEXD(LEXT,"IDX"))) LEXD("DF","IDX")=LEXD(LEXT,"IDX")
"RTN","LEXSET3",41,0)
 S:'$D(LEXD(LEXT,"IDX")) LEXD(LEXT,"IDX")="AWRD",LEXD(LEXT,"GBL")="^LEX(757.01,"
"RTN","LEXSET3",42,0)
 I '$D(LEXD(LEXT,"GBL")) D
"RTN","LEXSET3",43,0)
 . I $D(^LEX(757.01,LEXD(LEXT,"IDX"))) S LEXD(LEXT,"GBL")="^LEX(757.01," Q
"RTN","LEXSET3",44,0)
 . I $D(^LEX(757.21,LEXD(LEXT,"IDX"))) S LEXD(LEXT,"GBL")="^LEX(757.21," Q
"RTN","LEXSET3",45,0)
 . S LEXD(LEXT,"IDX")="AWRD",LEXD(LEXT,"GBL")="^LEX(757.01,"
"RTN","LEXSET3",46,0)
 S:$L($G(LEXD(LEXT,"NAM"))) LEXD("DF","NAM")=LEXD(LEXT,"NAM")
"RTN","LEXSET3",47,0)
 S LEXD("DF","SUB")=$E($G(LEXD(LEXT,"IDX")),2,$L($G(LEXD(LEXT,"IDX"))))
"RTN","LEXSET3",48,0)
 S LEXD("DF","FLN")=$P($P($G(LEXD(LEXT,"GBL")),"(",2),",",1)
"RTN","LEXSET3",49,0)
 I LEXD("DF","FLN")="" D
"RTN","LEXSET3",50,0)
 . S LEXD("DF","FLN")=757.01,LEXD("DF","GBL")="^LEX(757.01,"
"RTN","LEXSET3",51,0)
 . S LEXD("DF","IDX")="AWRD",LEXD("DF","SUB")="WRD"
"RTN","LEXSET3",52,0)
 S:$L($G(LEXD("UD","DIS"))) LEXD("DF","DIS")=LEXD("UD","DIS")
"RTN","LEXSET3",53,0)
 S:$L($G(LEXD("UD","SCT"))) LEXD("DF","SCT")=LEXD("UD","SCT")
"RTN","LEXSET3",54,0)
 I LEXT="AP" D
"RTN","LEXSET3",55,0)
 . S:$L($G(LEXD("UD","FIL"))) LEXD("DF","FIL")=LEXD("UD","FIL")
"RTN","LEXSET3",56,0)
 . S:$L($G(LEXD("UD","DSP"))) LEXD("DF","DSP")=LEXD("UD","DSP")
"RTN","LEXSET3",57,0)
 . S:$L($G(LEXD("UD","HLP"))) LEXD("DF","HLP")=LEXD("UD","HLP")
"RTN","LEXSET3",58,0)
 . S:$L($G(LEXD("UD","IDX"))) LEXD("DF","IDX")=LEXD("UD","IDX")
"RTN","LEXSET3",59,0)
 . S:$L($G(LEXD("UD","SUB"))) LEXD("DF","SUB")=LEXD("UD","SUB")
"RTN","LEXSET3",60,0)
 I $L($G(LEXD("DF","IDX"))),$D(^LEX(757.01,LEXD("DF","IDX"))) S LEXD("DF","GBL")="^LEX(757.01,",LEXD("DF","FLN")="757.01"
"RTN","LEXSET3",61,0)
 I $L($G(LEXD("DF","IDX"))),$D(^LEX(757.21,LEXD("DF","IDX"))) S LEXD("DF","GBL")="^LEX(757.21,",LEXD("DF","FLN")="757.21"
"RTN","LEXSET3",62,0)
 Q
"RTN","LEXSET4")
0^281^B3072931
"RTN","LEXSET4",1,0)
LEXSET4 ; ISL Setup Functions                      ; 09-23-96
"RTN","LEXSET4",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXSET4",3,0)
 ;
"RTN","LEXSET4",4,0)
NS(LEX) ; Look-up application namespace
"RTN","LEXSET4",5,0)
 N D,DIC,DTOUT,DUOUT D:'$D(LEXSAVE) SAVE K DIC S DIC("A")="Select APPLICATION:  "
"RTN","LEXSET4",6,0)
 S DIC("W")="W ?35,$P($G(^LEXT(757.2,+Y,5)),U,5)"
"RTN","LEXSET4",7,0)
 S DIC="^LEXT(757.2,",DIC(0)="AEQM",D="AN"
"RTN","LEXSET4",8,0)
 S DIC("S")="I $L($P($G(^LEXT(757.2,Y,5)),U,5))"
"RTN","LEXSET4",9,0)
 D ^DIC S LEX="" S:+Y>0 LEX=$P($G(^LEXT(757.2,+Y,5)),U,5)
"RTN","LEXSET4",10,0)
 S:LEX="" LEX="LEX" K DIC,X,Y D:$D(LEXSAVE) RESTORE Q LEX
"RTN","LEXSET4",11,0)
SS(LEX) ; Look-up subset (vocabulary)
"RTN","LEXSET4",12,0)
 D:'$D(LEXSAVE) SAVE
"RTN","LEXSET4",13,0)
 S:'$D(DIC("B")) DIC("B")="Lexicon" S DIC("A")="Select VOCABULARY:  "
"RTN","LEXSET4",14,0)
 S DIC="^LEXT(757.2,",DIC(0)="AEQM",D="AA"
"RTN","LEXSET4",15,0)
 S DIC("S")="I $L($P($G(^LEXT(757.2,Y,0)),U,2))"
"RTN","LEXSET4",16,0)
 D ^DIC S LEX="" S:+Y>0 LEX=$P($G(^LEXT(757.2,+Y,0)),U,2)
"RTN","LEXSET4",17,0)
 S:LEX="" LEX="WRD" K DIC,X,Y D:$D(LEXSAVE) RESTORE Q LEX
"RTN","LEXSET4",18,0)
SAVE ; Save look-up variables
"RTN","LEXSET4",19,0)
 S LEXSAVE="" S:$L($G(X)) LEXDX=X S:$L($G(DIC("A"))) LEXDA=DIC("A")
"RTN","LEXSET4",20,0)
 S:$L($G(DIC("B"))) LEXDB=DIC("B") S:$L($G(DIC("W"))) LEXDW=DIC("W") S:$L($G(DIC(0))) LEXD0=DIC(0)
"RTN","LEXSET4",21,0)
 Q
"RTN","LEXSET4",22,0)
RESTORE ; Restore look-up variables
"RTN","LEXSET4",23,0)
 S:$L($G(LEXDX)) X=LEXDX K:'$L($G(LEXDX)) X S:$L($G(LEXD0)) DIC(0)=LEXD0 S:$L($G(LEXDA)) DIC("A")=LEXDA
"RTN","LEXSET4",24,0)
 S:$L($G(LEXDB)) DIC("B")=LEXDB S:$L($G(LEXDW)) DIC("W")=LEXDW K LEXDA,LEXD0,LEXDX,LEXDB,LEXDW,LEXSAVE
"RTN","LEXSET4",25,0)
 Q
"RTN","LEXSET5")
0^282^B21360423
"RTN","LEXSET5",1,0)
LEXSET5 ; ISL Setup Appl/User Defaults for Look-up ; 09-23-96
"RTN","LEXSET5",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXSET5",3,0)
 ;
"RTN","LEXSET5",4,0)
EN ; Set variables
"RTN","LEXSET5",5,0)
 D:+($G(LEXQ))=0 MTLU
"RTN","LEXSET5",6,0)
 D:+($G(LEXQ))=1 QUIET
"RTN","LEXSET5",7,0)
 K LEXD
"RTN","LEXSET5",8,0)
 Q
"RTN","LEXSET5",9,0)
QUIET ;
"RTN","LEXSET5",10,0)
 N LEXMP S LEXMP="" D DIC0
"RTN","LEXSET5",11,0)
 I $L($G(LEXD("DF","LEXAP"))) S ^TMP("LEXSCH",$J,"APP",0)=LEXD("DF","LEXAP"),^TMP("LEXSCH",$J,"APP",1)=$$APPN^LEXDFN(LEXD("DF","LEXAP"))
"RTN","LEXSET5",12,0)
 I $L($G(LEXD("DF","DIS"))) S ^TMP("LEXSCH",$J,"DIS",0)=LEXD("DF","DIS"),^TMP("LEXSCH",$J,"DIS",1)=$$DISN^LEXDFN(LEXD("DF","DIS"))
"RTN","LEXSET5",13,0)
 I $L($G(LEXD("DF","FIL"))) S ^TMP("LEXSCH",$J,"FIL",0)=LEXD("DF","FIL"),^TMP("LEXSCH",$J,"FIL",1)=$$FILN^LEXDFN(LEXD("DF","FIL"))
"RTN","LEXSET5",14,0)
 I $L($G(LEXD("DF","GBL"))) S (DIC,^TMP("LEXSCH",$J,"GBL",0))=LEXD("DF","GBL"),^TMP("LEXSCH",$J,"GBL",1)=$$GBLN^LEXDFN(LEXD("DF","GBL"))
"RTN","LEXSET5",15,0)
 I $L($G(LEXD("DF","IDX"))) S ^TMP("LEXSCH",$J,"IDX",0)=LEXD("DF","IDX"),^TMP("LEXSCH",$J,"IDX",1)=$$IDXN^LEXDFN(LEXD("DF","IDX"))
"RTN","LEXSET5",16,0)
 I $L($G(LEXD("DF","OVR"))) S ^TMP("LEXSCH",$J,"OVR",0)=LEXD("DF","OVR"),^TMP("LEXSCH",$J,"OVR",1)=$$OVRN^LEXDFN(LEXD("DF","OVR"))
"RTN","LEXSET5",17,0)
 I $L($G(LEXD("DF","SCT"))) S ^TMP("LEXSCH",$J,"SCT",0)=LEXD("DF","SCT"),^TMP("LEXSCH",$J,"SCT",1)=$$SCTN^LEXDFN(LEXD("DF","SCT"))
"RTN","LEXSET5",18,0)
 I $L($G(LEXD("DF","UNR"))) S ^TMP("LEXSCH",$J,"UNR",0)=LEXD("DF","UNR"),^TMP("LEXSCH",$J,"UNR",1)=$$UNRN^LEXDFN(LEXD("DF","UNR"))
"RTN","LEXSET5",19,0)
 I $L($G(LEXD("DF","VOC"))) S ^TMP("LEXSCH",$J,"VOC",0)=LEXD("DF","VOC"),^TMP("LEXSCH",$J,"VOC",1)=$$VOCN^LEXDFN(LEXD("DF","VOC"))
"RTN","LEXSET5",20,0)
 I '$L($G(LEXD("DF","VOC"))),$L($G(LEXD("DF","SUB"))) S ^TMP("LEXSCH",$J,"VOC",0)=LEXD("DF","SUB"),^TMP("LEXSCH",$J,"VOC",1)=$$VOCN^LEXDFN(LEXD("DF","SUB"))
"RTN","LEXSET5",21,0)
 I $L($G(LEXD("DF","FLN"))) S ^TMP("LEXSCH",$J,"FLN",0)=LEXD("DF","FLN"),^TMP("LEXSCH",$J,"FLN",1)="File Number"
"RTN","LEXSET5",22,0)
 I +($G(LEXLL))>0 S ^TMP("LEXSCH",$J,"LEN",0)=+LEXLL
"RTN","LEXSET5",23,0)
 I +($G(LEXLL))'>0 S ^TMP("LEXSCH",$J,"LEN",0)=5
"RTN","LEXSET5",24,0)
 S ^TMP("LEXSCH",$J,"LEN",1)="List Length"
"RTN","LEXSET5",25,0)
 N LEXLOC,LEXSVC S (LEXLOC,LEXSVC)=""
"RTN","LEXSET5",26,0)
 S DUZ=+($G(DUZ)) I DUZ>0,$D(^VA(200,DUZ)) D
"RTN","LEXSET5",27,0)
 . S LEXLOC=$P($G(^VA(200,DUZ,100.1)),U,7) S:+($G(LEXLOC))=0 LEXLOC=""
"RTN","LEXSET5",28,0)
 . S:$L($G(LEXLOC))&(+($G(LEXLOC))>0) LEXLOC=$P($G(^SC(LEXLOC,0)),U,1)
"RTN","LEXSET5",29,0)
 . S LEXSVC=$P($G(^VA(200,DUZ,5)),U,1) S:+($G(LEXSVC))=0 LEXSVC=""
"RTN","LEXSET5",30,0)
 . S:$L($G(LEXSVC))&(+($G(LEXSVC))>0) LEXSVC=$P($G(^DIC(49,LEXSVC,0)),U,1)
"RTN","LEXSET5",31,0)
 S ^TMP("LEXSCH",$J,"LOC",0)=$E(LEXLOC,1,40),^TMP("LEXSCH",$J,"LOC",1)="User Hospital Location"
"RTN","LEXSET5",32,0)
 S ^TMP("LEXSCH",$J,"SVC",0)=$E(LEXSVC,1,40),^TMP("LEXSCH",$J,"SVC",1)="User Service"
"RTN","LEXSET5",33,0)
 S ^TMP("LEXSCH",$J,"USR",0)=+($G(DUZ)),^TMP("LEXSCH",$J,"USR",1)="User"
"RTN","LEXSET5",34,0)
 Q
"RTN","LEXSET5",35,0)
 Q
"RTN","LEXSET5",36,0)
MTLU ; MTLU Defaults
"RTN","LEXSET5",37,0)
 K LEXSHOW,LEXSUB,XTLKGBL,XTLKKSCH S DIC=""
"RTN","LEXSET5",38,0)
 S:$L($G(LEXD("DF","GBL"))) (DIC,XTLKGBL,XTLKKSCH("GBL"))=LEXD("DF","GBL")
"RTN","LEXSET5",39,0)
 S:$L($G(LEXD("DF","DSP"))) XTLKKSCH("DSPLY")=LEXD("DF","DSP")
"RTN","LEXSET5",40,0)
 S:$L($G(LEXD("DF","IDX"))) XTLKKSCH("INDEX")=LEXD("DF","IDX")
"RTN","LEXSET5",41,0)
 S:$L($G(LEXD("DF","HLP"))) XTLKHLP=LEXD("DF","HLP")
"RTN","LEXSET5",42,0)
 S:$L($G(LEXD("DF","LEXAP"))) LEXAP=LEXD("DF","LEXAP")
"RTN","LEXSET5",43,0)
 S:$L($G(LEXD("DF","UNR"))) LEXUN=LEXD("DF","UNR")
"RTN","LEXSET5",44,0)
 S:$L($G(LEXD("DF","DIS"))) LEXSHOW=LEXD("DF","DIS")
"RTN","LEXSET5",45,0)
 S:$L($G(LEXD("DF","SUB"))) LEXSUB=LEXD("DF","SUB")
"RTN","LEXSET5",46,0)
 S:$L($G(LEXD("DF","FIL"))) DIC("S")=LEXD("DF","FIL")
"RTN","LEXSET5",47,0)
 I DIC=""!('$D(LEXSUB)) D
"RTN","LEXSET5",48,0)
 . S (DIC,XTLKGBL,XTLKKSCH("GBL"))="^LEX(757.01,"
"RTN","LEXSET5",49,0)
 . S XTLKKSCH("INDEX")="AWRD",XTLKKSCH("DSPLY")="XTLK^LEXPRNT"
"RTN","LEXSET5",50,0)
 . S XTLKHLP="D XTLK^LEXHLP",LEXAP=1,LEXLL=5,LEXUN=0
"RTN","LEXSET5",51,0)
 . S LEXSUB="WRD",LEXSHOW="ICD/CPT"
"RTN","LEXSET5",52,0)
 S XTLKSAY=0 D DIC0 S:$L($G(X)) XTLKX=X
"RTN","LEXSET5",53,0)
 Q
"RTN","LEXSET5",54,0)
DIC0 S:'$L($G(DIC(0))) DIC(0)="EQM"
"RTN","LEXSET5",55,0)
 S:'$L($G(X))&(DIC(0)'["A") DIC(0)="A"_DIC(0)
"RTN","LEXSET5",56,0)
 S:DIC(0)["L" DIC(0)=$P(DIC(0),"L",1)_$P(DIC(0),"L",2)
"RTN","LEXSET5",57,0)
 S:DIC(0)["I" DIC(0)=$P(DIC(0),"I",1)_$P(DIC(0),"L",2)
"RTN","LEXSET5",58,0)
 Q
"RTN","LEXSET5",59,0)
XTLK ; MTLU
"RTN","LEXSET5",60,0)
 N LEXQ S LEXQ=0 D MTLU
"RTN","LEXSET5",61,0)
 I '$D(X)!($G(X)[U)!($G(X)="")!($G(X)=" ") S X=$$TERM
"RTN","LEXSET5",62,0)
 Q:X=""!(X["^")  S XTLKX=X D ^XTLKKWL
"RTN","LEXSET5",63,0)
 K DIC,LEXAP,LEXLL,LEXSHOW,LEXSUB,LEXUN
"RTN","LEXSET5",64,0)
 K XTLKKSCH,XTLKSAY,XTLKWD2,XTLKX,XTLKHLP S:+Y'>0 X=""
"RTN","LEXSET5",65,0)
 Q
"RTN","LEXSET5",66,0)
TERM(X) ; Expression
"RTN","LEXSET5",67,0)
 N DIR,Y S DIR("A")="Enter an expression:  "
"RTN","LEXSET5",68,0)
 S DIR("?")="Enter a ""free text"" description of a clinical concept, 2 to 245 characters"
"RTN","LEXSET5",69,0)
 S DIR("??")="^D TERMHLP^LEXSET5" N Y S DIR(0)="FAO^2:245" D ^DIR
"RTN","LEXSET5",70,0)
 S DIC="^LEX(757.01," S:X[U&(X'["^^") X=U S:X["^^" X="^^" Q:X[U "^"
"RTN","LEXSET5",71,0)
 I X=" ",+($G(^DISV(DUZ,DIC)))>0 S X=@(DIC_+($G(^DISV(DUZ,DIC)))_",0)") W " ",X
"RTN","LEXSET5",72,0)
 F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEXSET5",73,0)
 W:$D(DTOUT) !,"Try later.",! S:$D(DTOUT) X=""
"RTN","LEXSET5",74,0)
 S:X[U DUOUT=1 K DIR,DIRUT,DIROUT Q X
"RTN","LEXSET5",75,0)
TERMHLP ; Help
"RTN","LEXSET5",76,0)
 W !!,"Enter a ""free text"" description of a clinical concept, 2 to 245 characters."
"RTN","LEXSET5",77,0)
 W !,"Best results occur using either one full word or two/three partial words "
"RTN","LEXSET5",78,0)
 W !,"without a suffix (i.e., ""DIABETES"",""DIAB MELL"",""DIAB MELL INSUL"")."
"RTN","LEXSET5",79,0)
 Q
"RTN","LEXSRC")
0^283^B4572416
"RTN","LEXSRC",1,0)
LEXSRC ; ISL Classification Code Source           ; 09-23-96
"RTN","LEXSRC",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXSRC",3,0)
 ;
"RTN","LEXSRC",4,0)
ONE(LEXI,LEXS) ; Return a single primary code of a source
"RTN","LEXSRC",5,0)
 S LEXI=+($G(LEXI)),LEXS=$G(LEXS) S LEXI=$$CODE(LEXI,LEXS) Q LEXI
"RTN","LEXSRC",6,0)
ALL(LEXI,LEXS) ; Return all codes of a source
"RTN","LEXSRC",7,0)
 S LEXI=+($G(LEXI)),LEXS=$G(LEXS)
"RTN","LEXSRC",8,0)
 D CODES(LEXI,LEXS)
"RTN","LEXSRC",9,0)
 Q
"RTN","LEXSRC",10,0)
CODE(LEXI,LEXS) ; Return a single primary code
"RTN","LEXSRC",11,0)
 N LEXSRC D CODES(LEXI,LEXS) S LEXI=$G(LEXSRC(1)) Q LEXI
"RTN","LEXSRC",12,0)
CODES(LEXI,LEXS) ; Build an array LEXSRC of codes
"RTN","LEXSRC",13,0)
 S LEXI=+($G(LEXI)) Q:LEXI=0  Q:'$D(^LEX(757.01,LEXI))
"RTN","LEXSRC",14,0)
 S LEXS=$G(LEXS) Q:'$D(^LEX(757.03,"ASAB",LEXS))
"RTN","LEXSRC",15,0)
 N LEXMC S LEXMC=+($G(^LEX(757.01,LEXI,1))) Q:'$D(^LEX(757,LEXMC,0))
"RTN","LEXSRC",16,0)
 N LEXMCE S LEXMCE=+($G(^LEX(757,LEXMC,0))) Q:'$D(^LEX(757.01,LEXMCE,0))
"RTN","LEXSRC",17,0)
 N LEXUNI,LEXSA,LEXN,LEXSAB,LEXINA,LEXPRI,LEXNOM,LEXCC,LEXX
"RTN","LEXSRC",18,0)
 S LEXSA=0
"RTN","LEXSRC",19,0)
 F  S LEXSA=$O(^LEX(757.02,"AMC",LEXMC,LEXSA)) Q:+LEXSA=0  D
"RTN","LEXSRC",20,0)
 . S LEXN=$G(^LEX(757.02,LEXSA,0))
"RTN","LEXSRC",21,0)
 . S LEXINA=+($P(LEXN,"^",6)) Q:LEXINA=1
"RTN","LEXSRC",22,0)
 . S LEXSAB=+($P(LEXN,"^",3)),LEXSAB=$E($G(^LEX(757.03,LEXSAB,0)),1,3) Q:LEXSAB'=LEXS
"RTN","LEXSRC",23,0)
 . S LEXPRI=+($P(LEXN,"^",7)),LEXCC=$P(LEXN,"^",2) Q:LEXCC=""
"RTN","LEXSRC",24,0)
 . D:LEXPRI>0 PRI(LEXCC) D:LEXPRI=0 NOM(LEXCC)
"RTN","LEXSRC",25,0)
 D COMP
"RTN","LEXSRC",26,0)
 Q
"RTN","LEXSRC",27,0)
PRI(LEXX) ; Primary Code
"RTN","LEXSRC",28,0)
 N LEXCC S LEXCC=$G(LEXX) Q:LEXCC=""  S LEXX=+($G(LEXPRI(0))),LEXX=LEXX+1
"RTN","LEXSRC",29,0)
 S LEXPRI(LEXX)=LEXCC,LEXPRI(0)=LEXX Q
"RTN","LEXSRC",30,0)
NOM(LEXX) ; Normal Code
"RTN","LEXSRC",31,0)
 N LEXCC S LEXCC=$G(LEXX) Q:LEXCC=""  S LEXX=+($G(LEXNOM(0))),LEXX=LEXX+1
"RTN","LEXSRC",32,0)
 S LEXNOM(LEXX)=LEXCC,LEXNOM(0)=LEXX Q
"RTN","LEXSRC",33,0)
COMP ; Compile array from Primary and Normal Codes
"RTN","LEXSRC",34,0)
 N LEXUNI,LEXCT,LEXNT S (LEXCT,LEXNT)=0
"RTN","LEXSRC",35,0)
 I $L($G(LEXPRI(1))) D
"RTN","LEXSRC",36,0)
 . S LEXCT=LEXCT+1,LEXSRC(LEXCT)=LEXPRI(1)
"RTN","LEXSRC",37,0)
 . S LEXSRC(0)=LEXCT,LEXUNI(LEXPRI(1))=""
"RTN","LEXSRC",38,0)
 F  S LEXNT=$O(LEXNOM(LEXNT)) Q:+LEXNT=0  D
"RTN","LEXSRC",39,0)
 . Q:$D(LEXUNI(LEXNOM(LEXNT)))
"RTN","LEXSRC",40,0)
 . I $L($G(LEXNOM(LEXNT))) D
"RTN","LEXSRC",41,0)
 . . S LEXCT=LEXCT+1,LEXSRC(LEXCT)=LEXNOM(LEXNT),LEXSRC(0)=LEXCT
"RTN","LEXSRC",42,0)
 K LEXPRI,LEXNOM,LEXUNI Q
"RTN","LEXTOLKN")
0^284^B10362013
"RTN","LEXTOLKN",1,0)
LEXTOLKN ; ISL Parse term into words                ; 09-23-96
"RTN","LEXTOLKN",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXTOLKN",3,0)
 ;
"RTN","LEXTOLKN",4,0)
 ; Returns ^TMP("LEXTKN",$J,#,WORD) containing words
"RTN","LEXTOLKN",5,0)
 ;
"RTN","LEXTOLKN",6,0)
 ; If LEXIDX is set, then the Excluded Words file is used to 
"RTN","LEXTOLKN",7,0)
 ; selectively exclude words from the indexing process.  If
"RTN","LEXTOLKN",8,0)
 ; LEXLOOK is set, then the Excluded Words file is used to 
"RTN","LEXTOLKN",9,0)
 ; selectively exclude words from the look-up process.  If 
"RTN","LEXTOLKN",10,0)
 ; LEXIDX and LEXLOOK do not exist then all words are parsed
"RTN","LEXTOLKN",11,0)
 ; parsed.
"RTN","LEXTOLKN",12,0)
 ;
"RTN","LEXTOLKN",13,0)
PT ; Entry point where DA is defined and X is unknown
"RTN","LEXTOLKN",14,0)
 Q:'$D(DA)  S X=^LEX(757.01,DA,0)
"RTN","LEXTOLKN",15,0)
PTX ; Entry point to parse string (X must exist)
"RTN","LEXTOLKN",16,0)
 N LEXOK,LEXTOKS,LEXTOKS2,LEXTOKI,LEXTOKW,LEXTOLKN
"RTN","LEXTOLKN",17,0)
 N LEXOKC,LEXOKN,LEXOKP
"RTN","LEXTOLKN",18,0)
 K ^TMP("LEXTKN",$J)
"RTN","LEXTOLKN",19,0)
 Q:'$L($G(X))  S LEXTOKS=$TR(X,"-"," ")
"RTN","LEXTOLKN",20,0)
 ; Remove leading blanks from string
"RTN","LEXTOLKN",21,0)
 F LEXOKP=1:1:$L(LEXTOKS) Q:$E(LEXTOKS,LEXOKP)'[" "
"RTN","LEXTOLKN",22,0)
 S LEXTOKS=$E(LEXTOKS,LEXOKP,$L(LEXTOKS))
"RTN","LEXTOLKN",23,0)
 ; Remove trailing blanks from string
"RTN","LEXTOLKN",24,0)
 F LEXOKP=$L(LEXTOKS):-1:1 Q:$E(LEXTOKS,LEXOKP)'[" "
"RTN","LEXTOLKN",25,0)
 S LEXTOKS=$E(LEXTOKS,1,LEXOKP)
"RTN","LEXTOLKN",26,0)
 ; Remove Punctuation (less slashes)
"RTN","LEXTOLKN",27,0)
 S LEXTOKS=$TR(LEXTOKS,"?`~!@#$%^&*()_-+={}[]\:;,<>","                            ")
"RTN","LEXTOLKN",28,0)
 ; Conditionally remove slashes
"RTN","LEXTOLKN",29,0)
 S:$D(LEXIDX) LEXTOKS=$TR(LEXTOKS,"/"," ")
"RTN","LEXTOLKN",30,0)
 S LEXTOKS=$TR(LEXTOKS,".","")
"RTN","LEXTOLKN",31,0)
 S LEXTOKS=$TR(LEXTOKS,"""","")
"RTN","LEXTOLKN",32,0)
 ; Swtich to UPPERCASE (lower case is not specified by LEXLOW)
"RTN","LEXTOLKN",33,0)
 S:'$D(LEXLOW) LEXTOKS=$$UP^XLFSTR(LEXTOKS)
"RTN","LEXTOLKN",34,0)
 ; Store in temporary array (based on space character)
"RTN","LEXTOLKN",35,0)
 S LEXOKC=0 F LEXTOKI=1:1:$L(LEXTOKS," ") D
"RTN","LEXTOLKN",36,0)
 . N LEXTOKW S LEXTOKW=$P(LEXTOKS," ",LEXTOKI) Q:LEXTOKW=""
"RTN","LEXTOLKN",37,0)
 . I LEXTOKW'["/" D
"RTN","LEXTOLKN",38,0)
 . . S LEXOKC=LEXOKC+1,LEXTOLKN(LEXOKC)=LEXTOKW
"RTN","LEXTOLKN",39,0)
 . . S LEXTOLKN(0)=LEXOKC
"RTN","LEXTOLKN",40,0)
 . I LEXTOKW["/"&($D(^LEX(757.05,"B",LEXTOKW))) D
"RTN","LEXTOLKN",41,0)
 . . N LEXOKR S LEXOKR=$O(^LEX(757.05,"B",LEXTOKW,0))
"RTN","LEXTOLKN",42,0)
 . . I $P($G(^LEX(757.05,LEXOKR,0)),U,3)="R" D
"RTN","LEXTOLKN",43,0)
 . . . S LEXOKC=LEXOKC+1,LEXTOLKN(LEXOKC)=LEXTOKW
"RTN","LEXTOLKN",44,0)
 . . . S LEXTOLKN(0)=LEXOKC
"RTN","LEXTOLKN",45,0)
 K LEXOKC,LEXOKR
"RTN","LEXTOLKN",46,0)
 I +($G(LEXTOLKN(0)))=0 K LEXTOLKN S ^TMP("LEXTKN",$J,0)=0 G EXIT
"RTN","LEXTOLKN",47,0)
 S LEXTOKW="",LEXOKN=0 F LEXTOKI=1:1:LEXTOLKN(0) D
"RTN","LEXTOLKN",48,0)
 . S LEXTOKW=$G(LEXTOLKN(LEXTOKI))
"RTN","LEXTOLKN",49,0)
 . ; Remove leading blanks
"RTN","LEXTOLKN",50,0)
 . F LEXOKP=1:1:$L(LEXTOKW) Q:$E(LEXTOKW,LEXOKP)'[" "
"RTN","LEXTOLKN",51,0)
 . S LEXTOKW=$E(LEXTOKW,LEXOKP,$L(LEXTOKW))
"RTN","LEXTOLKN",52,0)
 . ; Remove trailing blanks
"RTN","LEXTOLKN",53,0)
 . F LEXOKP=$L(LEXTOKW):-1:1 Q:$E(LEXTOKW,LEXOKP)'[" "
"RTN","LEXTOLKN",54,0)
 . S LEXTOKW=$E(LEXTOKW,1,LEXOKP)
"RTN","LEXTOLKN",55,0)
 . ; Leading numerics or Zero
"RTN","LEXTOLKN",56,0)
 . ;I +LEXTOKW>0 S LEXTOKW="" Q
"RTN","LEXTOLKN",57,0)
 . I $A($E(LEXTOKW,1))=48 S LEXTOKW="" Q
"RTN","LEXTOLKN",58,0)
 . ; Apostrophies and spaces
"RTN","LEXTOLKN",59,0)
 . S LEXTOKW=$TR(LEXTOKW,"'",""),LEXTOKW=$TR(LEXTOKW," ","")
"RTN","LEXTOLKN",60,0)
 . ; Numeric only
"RTN","LEXTOLKN",61,0)
 . ;S LEXOK=0 F LEXOKP=1:1:$L(LEXTOKW) S:$E(LEXTOKW,LEXOKP)?1U LEXOK=1 Q:LEXOK=1
"RTN","LEXTOLKN",62,0)
 . ;I 'LEXOK S LEXTOKW="" Q
"RTN","LEXTOLKN",63,0)
 . I $D(LEXIDX) D
"RTN","LEXTOLKN",64,0)
 . . I LEXTOKW'="" S:$D(^LEX(757.04,"ACTION",LEXTOKW,"I")) LEXTOKW=""
"RTN","LEXTOLKN",65,0)
 . . I LEXTOKW'="" S:$D(^LEX(757.04,"ACTION",LEXTOKW,"B")) LEXTOKW=""
"RTN","LEXTOLKN",66,0)
 . I $D(LEXLOOK) D
"RTN","LEXTOLKN",67,0)
 . . I LEXTOKW'="" S:$D(^LEX(757.04,"ACTION",LEXTOKW,"L")) LEXTOKW=""
"RTN","LEXTOLKN",68,0)
 . . I LEXTOKW'="" S:$D(^LEX(757.04,"ACTION",LEXTOKW,"B")) LEXTOKW=""
"RTN","LEXTOLKN",69,0)
 . I $D(LEXOKN),$D(LEXTOKW),LEXTOKW'="" D
"RTN","LEXTOLKN",70,0)
 . . S LEXOKN=+(LEXOKN)+1,^TMP("LEXTKN",$J,LEXOKN,LEXTOKW)=""
"RTN","LEXTOLKN",71,0)
 . S LEXTOKW=""
"RTN","LEXTOLKN",72,0)
 S ^TMP("LEXTKN",$J,0)=LEXOKN
"RTN","LEXTOLKN",73,0)
EXIT ; Clean up and quit
"RTN","LEXTOLKN",74,0)
 K LEXOK,LEXTOKI,LEXOKN,LEXOKP,LEXOKR,LEXTOKS,LEXTOKS2,LEXTOKW,LEXTOLKN
"RTN","LEXTOLKN",75,0)
 Q
"RTN","LEXU")
0^285^B12675056
"RTN","LEXU",1,0)
LEXU ; ISL Miscellaneous Lexicon Utilities      ; 09-23-96
"RTN","LEXU",2,0)
 ;;2.0;LEXICON UTILITY;;Sep 23, 1996
"RTN","LEXU",3,0)
 ;
"RTN","LEXU",4,0)
SC(LEX,LEXS) ; Filter by Semantic Class - LEX=IEN LEXS=Filter
"RTN","LEXU",5,0)
 N LEXINC,LEXEXC,LEXIC,LEXEC,LEXRREC
"RTN","LEXU",6,0)
 S LEXRREC=LEX I $G(DIC)["757.21"!($G(LEX("GBL"))["757.21") S LEXRREC=+(^LEX(757.21,+LEX,0))
"RTN","LEXU",7,0)
 I $L(LEXS,";")=3,$P(LEXS,";",3)'="" D  I LEXINC K LEXIC,LEXEXC,LEXS,LEXEC Q LEXINC
"RTN","LEXU",8,0)
 . S LEXINC=0 S LEXINC=$$SO(LEXRREC,$P(LEXS,";",3))
"RTN","LEXU",9,0)
 S LEXRREC=$P(^LEX(757.01,LEXRREC,1),U,1)
"RTN","LEXU",10,0)
 S LEXINC=0 F LEXIC=1:1:$L($P(LEXS,";",1),"/") D
"RTN","LEXU",11,0)
 . I $D(^LEX(757.1,"AMCC",LEXRREC,$P($P(LEXS,";",1),"/",LEXIC)))!($D(^LEX(757.1,"AMCT",LEXRREC,$P($P(LEXS,";",1),"/",LEXIC)))) S LEXINC=1,LEXIC=$L($P(LEXS,";",1),"/")+1
"RTN","LEXU",12,0)
 I LEXINC=0!($P(LEXS,";",2)="") K LEXIC,LEXS,LEXEC Q LEXINC
"RTN","LEXU",13,0)
 S LEXEXC=0 F LEXEC=1:1:$L($P(LEXS,";",2),"/") D
"RTN","LEXU",14,0)
 . I $D(^LEX(757.1,"AMCC",LEXRREC,$P($P(LEXS,";",2),"/",LEXEC)))!($D(^LEX(757.1,"AMCT",LEXRREC,$P($P(LEXS,";",2),"/",LEXEC)))) S LEXEXC=1,LEXEC=$L($P(LEXS,";",2),"/")+1
"RTN","LEXU",15,0)
 I LEXINC,'LEXEXC K LEXIC,LEXS,LEXEC Q 1
"RTN","LEXU",16,0)
 K LEXIC,LEXS,LEXEC Q 0
"RTN","LEXU",17,0)
SO(LEX,LEXS) ; Filter by Source - LEX=IEN LEXS=Filter
"RTN","LEXU",18,0)
 N LEXTREC S LEXTREC=+LEX
"RTN","LEXU",19,0)
 I $G(DIC)["757.21"!($G(LEX("GBL"))["757.21") D
"RTN","LEXU",20,0)
 . I $G(DIC("S"))["SO^LEXU"!($G(LEXDICS)["SO^LEXU") S LEXTREC=+(^LEX(757.21,+LEX,0))
"RTN","LEXU",21,0)
 N LEXFND S LEXFND=0,LEXTREC=+LEXTREC Q:'$D(^LEX(757.01,LEXTREC)) LEXFND
"RTN","LEXU",22,0)
 N LEXCODE,LEXSOID,LEXCREC,LEXSAB,LEXMC
"RTN","LEXU",23,0)
 S LEXMC=$P(^LEX(757.01,LEXTREC,1),U,1)
"RTN","LEXU",24,0)
 S LEXMCE=+(^LEX(757,+($P(^LEX(757.01,LEXTREC,1),U,1)),0))
"RTN","LEXU",25,0)
 ; Codes for an Expression   
"RTN","LEXU",26,0)
 I LEXTREC'=LEXMCE D  G SOQ
"RTN","LEXU",27,0)
 . S LEXFND=0 F LEXSOID=1:1:$L(LEXS,"/") Q:LEXFND  D
"RTN","LEXU",28,0)
 . . S LEXCODE=$P(LEXS,"/",LEXSOID),LEXCREC=0
"RTN","LEXU",29,0)
 . . F  S LEXCREC=$O(^LEX(757.02,"B",LEXTREC,LEXCREC)) Q:+LEXCREC=0!(LEXFND)  D
"RTN","LEXU",30,0)
 ; Codes for a Major Concept
"RTN","LEXU",31,0)
 I LEXTREC=LEXMCE D  G SOQ
"RTN","LEXU",32,0)
 . S LEXFND=0 F LEXSOID=1:1:$L(LEXS,"/") Q:LEXFND  D
"RTN","LEXU",33,0)
 . . S LEXCODE=$P(LEXS,"/",LEXSOID),LEXCREC=0
"RTN","LEXU",34,0)
 . . F  S LEXCREC=$O(^LEX(757.02,"AMC",LEXMC,LEXCREC)) Q:+LEXCREC=0!(LEXFND)  D
"RTN","LEXU",35,0)
 . . . S LEXSAB=+($P(^LEX(757.02,LEXCREC,0),U,3)) Q:'$D(^LEX(757.03,LEXSAB,0))  S LEXSAB=$E(^LEX(757.03,LEXSAB,0),1,3) I LEXSAB=LEXCODE S LEXFND=1
"RTN","LEXU",36,0)
SOQ K LEX,LEXTREC,LEXMC,LEXS,LEXCODE,LEXMCE,LEXSOID Q LEXFND
"RTN","LEXU",37,0)
DEF(LEX) ; Display expression definition - LEX=IEN
"RTN","LEXU",38,0)
 I $D(^LEX(757.01,LEX,3,0)) D
"RTN","LEXU",39,0)
 . N LEXLN F LEXLN=1:1:$P(^LEX(757.01,LEX,3,0),U,4) D
"RTN","LEXU",40,0)
 . . I $D(^LEX(757.01,LEX,3,LEXLN,0)) W !,?2,^LEX(757.01,LEX,3,LEXLN,0)
"RTN","LEXU",41,0)
 . K LEX,LEXLN W !
"RTN","LEXU",42,0)
 Q
"RTN","LEXU",43,0)
ID(LEX) ; ICD Diagnosis retained - ICD procedures ignored
"RTN","LEXU",44,0)
 Q:'$L($G(LEX)) "" Q:$L($P(LEX,".",1))<3 "" Q:'$D(^LEX(757.02,"AVA",(LEX_" "))) ""
"RTN","LEXU",45,0)
 N LEXO,LEXR S (LEXO,LEXR)=0 F  S LEXR=$O(^LEX(757.02,"AVA",(LEX_" "),LEXR)) Q:+LEXR=0  D  Q:LEXO=1
"RTN","LEXU",46,0)
 . I $D(^LEX(757.02,"AVA",(LEX_" "),LEXR,"ICD")) S LEXO=1
"RTN","LEXU",47,0)
 Q:'LEXO "" Q LEX
"RTN","LEXU",48,0)
ICDONE(LEX) ; Return one ICD code for an expression - LEX=IEN
"RTN","LEXU",49,0)
 S LEX=$$ONE^LEXSRC(LEX,"ICD") Q:'$D(^ICD9("AB",(LEX_" "))) ""
"RTN","LEXU",50,0)
 S:+($P($G(^ICD9(+($O(^ICD9("AB",(LEX_" "),0))),0)),"^",9))=1 LEX=""
"RTN","LEXU",51,0)
 Q LEX
"RTN","LEXU",52,0)
ICD(LEX) ; Return all ICD codes for an expression - LEX=IEN
"RTN","LEXU",53,0)
 N LEXSRC D ALL^LEXSRC(LEX,"ICD") Q:+($G(LEXSRC(0)))'>0 ""
"RTN","LEXU",54,0)
 N LEXI,LEXT,LEXS S LEXI=0,LEXT=""
"RTN","LEXU",55,0)
 F  S LEXI=$O(LEXSRC(LEXI)) Q:+LEXI=0  D
"RTN","LEXU",56,0)
 . S LEXS=LEXSRC(LEXI) Q:'$D(^ICD9("AB",(LEXS_" ")))
"RTN","LEXU",57,0)
 . Q:+($P($G(^ICD9(+($O(^ICD9("AB",(LEXS_" "),0))),0)),"^",9))=1
"RTN","LEXU",58,0)
 . Q:(LEXT_";")[(";"_LEXS_";")  S LEXT=LEXT_";"_LEXS
"RTN","LEXU",59,0)
 S:$E(LEXT,1)=";" LEXT=$E(LEXT,2,$L(LEXT)) S LEX=LEXT Q LEX
"RTN","LEXU",60,0)
CPTONE(LEX) ; Return one ICD code for an expression - LEX=IEN
"RTN","LEXU",61,0)
 S LEX=$$ONE^LEXSRC(LEX,"CPT") Q:LEX="" "" Q:'$D(^ICPT("B",LEX)) ""
"RTN","LEXU",62,0)
 S:+($P($G(^ICD9(+($O(^ICPT("B",LEX,0))),0)),"^",4))=1 LEX=""
"RTN","LEXU",63,0)
 Q LEX
"RTN","LEXU",64,0)
DSMONE(LEX) ; Return one DSM code for an expression - LEX=IEN
"RTN","LEXU",65,0)
 ; Check for DSM-IV first
"RTN","LEXU",66,0)
 S LEX=$$ONE^LEXSRC(LEX,"DS4") I LEX'="" Q LEX
"RTN","LEXU",67,0)
 ; If not DSM-IV, then check for DSM-III
"RTN","LEXU",68,0)
 S LEX=$$ONE^LEXSRC(LEX,"DS3") Q LEX
"SEC","^DIC",757,757,0,"AUDIT")
@
"SEC","^DIC",757,757,0,"DD")
@
"SEC","^DIC",757,757,0,"DEL")
@
"SEC","^DIC",757,757,0,"LAYGO")
@
"SEC","^DIC",757,757,0,"RD")
@
"SEC","^DIC",757,757,0,"WR")
@
"SEC","^DIC",757.001,757.001,0,"AUDIT")
@
"SEC","^DIC",757.001,757.001,0,"DD")
@
"SEC","^DIC",757.001,757.001,0,"DEL")
@
"SEC","^DIC",757.001,757.001,0,"LAYGO")
@
"SEC","^DIC",757.001,757.001,0,"RD")
@
"SEC","^DIC",757.001,757.001,0,"WR")
@
"SEC","^DIC",757.01,757.01,0,"AUDIT")
@
"SEC","^DIC",757.01,757.01,0,"DD")
@
"SEC","^DIC",757.01,757.01,0,"DEL")
@
"SEC","^DIC",757.01,757.01,0,"LAYGO")
@
"SEC","^DIC",757.01,757.01,0,"RD")
@
"SEC","^DIC",757.01,757.01,0,"WR")
@
"SEC","^DIC",757.011,757.011,0,"AUDIT")
@
"SEC","^DIC",757.011,757.011,0,"DD")
@
"SEC","^DIC",757.011,757.011,0,"DEL")
@
"SEC","^DIC",757.011,757.011,0,"LAYGO")
@
"SEC","^DIC",757.011,757.011,0,"RD")
@
"SEC","^DIC",757.011,757.011,0,"WR")
@
"SEC","^DIC",757.014,757.014,0,"AUDIT")
@
"SEC","^DIC",757.014,757.014,0,"DD")
@
"SEC","^DIC",757.014,757.014,0,"DEL")
@
"SEC","^DIC",757.014,757.014,0,"LAYGO")
@
"SEC","^DIC",757.014,757.014,0,"RD")
@
"SEC","^DIC",757.014,757.014,0,"WR")
@
"SEC","^DIC",757.02,757.02,0,"AUDIT")
@
"SEC","^DIC",757.02,757.02,0,"DD")
@
"SEC","^DIC",757.02,757.02,0,"DEL")
@
"SEC","^DIC",757.02,757.02,0,"LAYGO")
@
"SEC","^DIC",757.02,757.02,0,"RD")
@
"SEC","^DIC",757.02,757.02,0,"WR")
@
"SEC","^DIC",757.03,757.03,0,"AUDIT")
@
"SEC","^DIC",757.03,757.03,0,"DD")
@
"SEC","^DIC",757.03,757.03,0,"DEL")
@
"SEC","^DIC",757.03,757.03,0,"LAYGO")
@
"SEC","^DIC",757.03,757.03,0,"RD")
@
"SEC","^DIC",757.03,757.03,0,"WR")
@
"SEC","^DIC",757.04,757.04,0,"AUDIT")
@
"SEC","^DIC",757.04,757.04,0,"DD")
@
"SEC","^DIC",757.04,757.04,0,"DEL")
@
"SEC","^DIC",757.04,757.04,0,"LAYGO")
@
"SEC","^DIC",757.04,757.04,0,"RD")
@
"SEC","^DIC",757.04,757.04,0,"WR")
@
"SEC","^DIC",757.05,757.05,0,"AUDIT")
@
"SEC","^DIC",757.05,757.05,0,"DD")
@
"SEC","^DIC",757.05,757.05,0,"DEL")
@
"SEC","^DIC",757.05,757.05,0,"LAYGO")
@
"SEC","^DIC",757.05,757.05,0,"RD")
@
"SEC","^DIC",757.05,757.05,0,"WR")
@
"SEC","^DIC",757.06,757.06,0,"AUDIT")
@
"SEC","^DIC",757.06,757.06,0,"DD")
@
"SEC","^DIC",757.06,757.06,0,"DEL")
@
"SEC","^DIC",757.06,757.06,0,"LAYGO")
@
"SEC","^DIC",757.06,757.06,0,"RD")
@
"SEC","^DIC",757.06,757.06,0,"WR")
@
"SEC","^DIC",757.1,757.1,0,"AUDIT")
@
"SEC","^DIC",757.1,757.1,0,"DD")
@
"SEC","^DIC",757.1,757.1,0,"DEL")
@
"SEC","^DIC",757.1,757.1,0,"LAYGO")
@
"SEC","^DIC",757.1,757.1,0,"RD")
@
"SEC","^DIC",757.1,757.1,0,"WR")
@
"SEC","^DIC",757.11,757.11,0,"AUDIT")
@
"SEC","^DIC",757.11,757.11,0,"DD")
@
"SEC","^DIC",757.11,757.11,0,"DEL")
@
"SEC","^DIC",757.11,757.11,0,"LAYGO")
@
"SEC","^DIC",757.11,757.11,0,"RD")
@
"SEC","^DIC",757.11,757.11,0,"WR")
@
"SEC","^DIC",757.12,757.12,0,"AUDIT")
@
"SEC","^DIC",757.12,757.12,0,"DD")
@
"SEC","^DIC",757.12,757.12,0,"DEL")
@
"SEC","^DIC",757.12,757.12,0,"LAYGO")
@
"SEC","^DIC",757.12,757.12,0,"RD")
@
"SEC","^DIC",757.12,757.12,0,"WR")
@
"SEC","^DIC",757.2,757.2,0,"AUDIT")
@
"SEC","^DIC",757.2,757.2,0,"DD")
@
"SEC","^DIC",757.2,757.2,0,"DEL")
@
"SEC","^DIC",757.2,757.2,0,"LAYGO")
@
"SEC","^DIC",757.2,757.2,0,"RD")
@
"SEC","^DIC",757.2,757.2,0,"WR")
@
"SEC","^DIC",757.21,757.21,0,"AUDIT")
@
"SEC","^DIC",757.21,757.21,0,"DD")
@
"SEC","^DIC",757.21,757.21,0,"DEL")
@
"SEC","^DIC",757.21,757.21,0,"LAYGO")
@
"SEC","^DIC",757.21,757.21,0,"RD")
@
"SEC","^DIC",757.21,757.21,0,"WR")
@
"SEC","^DIC",757.3,757.3,0,"AUDIT")
@
"SEC","^DIC",757.3,757.3,0,"DD")
@
"SEC","^DIC",757.3,757.3,0,"DEL")
@
"SEC","^DIC",757.3,757.3,0,"LAYGO")
@
"SEC","^DIC",757.3,757.3,0,"RD")
@
"SEC","^DIC",757.3,757.3,0,"WR")
@
"SEC","^DIC",757.31,757.31,0,"AUDIT")
@
"SEC","^DIC",757.31,757.31,0,"DD")
@
"SEC","^DIC",757.31,757.31,0,"DEL")
@
"SEC","^DIC",757.31,757.31,0,"LAYGO")
@
"SEC","^DIC",757.31,757.31,0,"RD")
@
"SEC","^DIC",757.31,757.31,0,"WR")
@
"SEC","^DIC",757.4,757.4,0,"AUDIT")
@
"SEC","^DIC",757.4,757.4,0,"DD")
@
"SEC","^DIC",757.4,757.4,0,"DEL")
@
"SEC","^DIC",757.4,757.4,0,"LAYGO")
@
"SEC","^DIC",757.4,757.4,0,"RD")
@
"SEC","^DIC",757.4,757.4,0,"WR")
@
"SEC","^DIC",757.41,757.41,0,"AUDIT")
@
"SEC","^DIC",757.41,757.41,0,"DD")
@
"SEC","^DIC",757.41,757.41,0,"DEL")
@
"SEC","^DIC",757.41,757.41,0,"LAYGO")
@
"SEC","^DIC",757.41,757.41,0,"RD")
@
"SEC","^DIC",757.41,757.41,0,"WR")
@
"VER")
8.0^21.0
"^DD",757,757,0)
FIELD^^1^2
"^DD",757,757,0,"DDA")
N
"^DD",757,757,0,"DT")
2950726
"^DD",757,757,0,"IX","B",757,.01)

"^DD",757,757,0,"NM","MAJOR CONCEPT MAP")

"^DD",757,757,0,"PT",757.001,.01)

"^DD",757,757,0,"PT",757.01,1)

"^DD",757,757,0,"PT",757.02,3)

"^DD",757,757,0,"PT",757.1,.01)

"^DD",757,757,.01,0)
EXPRESSION^RP757.01'IO^LEX(757.01,^0;1^Q
"^DD",757,757,.01,.1)

"^DD",757,757,.01,1,0)
^.1^^-1
"^DD",757,757,.01,1,1,0)
757^B
"^DD",757,757,.01,1,1,1)
S ^LEX(757,"B",$E(X,1,30),DA)=""
"^DD",757,757,.01,1,1,2)
K ^LEX(757,"B",$E(X,1,30),DA)
"^DD",757,757,.01,1,1,"%D",0)
^^4^4^2940902^^^
"^DD",757,757,.01,1,1,"%D",1,0)
^LEX(757,"B",MCE,IEN) - where MCE is a pointer to the expression in the
"^DD",757,757,.01,1,1,"%D",2,0)
Expression file #757.01 which represents a clinical Major Concept Expression,
"^DD",757,757,.01,1,1,"%D",3,0)
and IEN is the Internal Entry Number in the Major Concept Map file #757 where
"^DD",757,757,.01,1,1,"%D",4,0)
this pointer is located.
"^DD",757,757,.01,1,1,"DT")
2921029
"^DD",757,757,.01,2)
S Y(0)=Y S Y=$P(^LEX(757.01,Y,1),U,1)
"^DD",757,757,.01,2.1)
S Y=$P(^LEX(757.01,Y,1),U,1)
"^DD",757,757,.01,3)

"^DD",757,757,.01,21,0)
^^2^2^2960812^^^^
"^DD",757,757,.01,21,1,0)
Pointer to the clinical expression in the Expression file (#757.01) which 
"^DD",757,757,.01,21,2,0)
represents the preferred term for the Major Concept.
"^DD",757,757,.01,"DT")
2930419
"^DD",757,757,1,0)
GROUP^P757.01'^LEX(757.01,^0;2^Q
"^DD",757,757,1,3)

"^DD",757,757,1,21,0)
^^2^2^2950726^^^
"^DD",757,757,1,21,1,0)
This field is intended to provide applications the ability to group terms by
"^DD",757,757,1,21,2,0)
categories, such as Cardiovascular, Pulmonary, etc.
"^DD",757,757,1,"DT")
2950726
"^DD",757.001,757.001,0)
FIELD^^2^3
"^DD",757.001,757.001,0,"DDA")
N
"^DD",757.001,757.001,0,"DT")
2950726
"^DD",757.001,757.001,0,"IX","AF",757.001,2)

"^DD",757.001,757.001,0,"IX","B",757.001,.01)

"^DD",757.001,757.001,0,"NM","CONCEPT USAGE")

"^DD",757.001,757.001,.01,0)
MAJOR CONCEPT^RP757'^LEX(757,^0;1^Q
"^DD",757.001,757.001,.01,1,0)
^.1
"^DD",757.001,757.001,.01,1,1,0)
757.001^B
"^DD",757.001,757.001,.01,1,1,1)
S ^LEX(757.001,"B",$E(X,1,30),DA)=""
"^DD",757.001,757.001,.01,1,1,2)
K ^LEX(757.001,"B",$E(X,1,30),DA)
"^DD",757.001,757.001,.01,1,1,"%D",0)
^^3^3^2960812^
"^DD",757.001,757.001,.01,1,1,"%D",1,0)
^LEX(757.001,"B",MC,IEN) - where MC is the pointer to the Major Concept in the
"^DD",757.001,757.001,.01,1,1,"%D",2,0)
Major Concept Map file #757 and IEN is the Internal Entry Number in the Concept
"^DD",757.001,757.001,.01,1,1,"%D",3,0)
Usage file #757.001 where the Major Concept is located.
"^DD",757.001,757.001,.01,3)

"^DD",757.001,757.001,.01,21,0)
^^2^2^2950726^
"^DD",757.001,757.001,.01,21,1,0)
This is a pointer to the Major Concept (file #757) and used to link the concept
"^DD",757.001,757.001,.01,21,2,0)
frequency of use back to the Major Concept.
"^DD",757.001,757.001,.01,"DT")
2950726
"^DD",757.001,757.001,1,0)
ORIGINATING VALUE^RNJ1,0^^0;2^K:+X'=X!(X>9)!(X<0)!(X?.E1"."1N.N) X
"^DD",757.001,757.001,1,3)
Type a Number between 0 and 9, 0 Decimal Digits
"^DD",757.001,757.001,1,21,0)
^^4^4^2951102^^
"^DD",757.001,757.001,1,21,1,0)
It was necessary to "seed" this file prior to export.  This field represents
"^DD",757.001,757.001,1,21,2,0)
the original (exported) value of the frequency of use (Usage, field #2).  To
"^DD",757.001,757.001,1,21,3,0)
obtain the actual frequency of use, this value must be subtracted from the 
"^DD",757.001,757.001,1,21,4,0)
Frequency field (#2).
"^DD",757.001,757.001,1,"DT")
2950726
"^DD",757.001,757.001,2,0)
FREQUENCY^RNJ10,0^^0;3^K:+X'=X!(X>9999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",757.001,757.001,2,1,0)
^.1
"^DD",757.001,757.001,2,1,1,0)
757.001^AF^MUMPS
"^DD",757.001,757.001,2,1,1,1)
S ^LEX(757.001,"AF",-(X-(+($P(^LEX(757.001,DA,0),U,2)))),DA)=""
"^DD",757.001,757.001,2,1,1,2)
K ^LEX(757.001,"AF",-(X-(+($P(^LEX(757.001,DA,0),U,2)))),DA)
"^DD",757.001,757.001,2,1,1,"%D",0)
^^4^4^2950726^^^
"^DD",757.001,757.001,2,1,1,"%D",1,0)
^LEX(757.001,"AF",FREQ,IEN) - where FREQ is either a zero or a negative numeric
"^DD",757.001,757.001,2,1,1,"%D",2,0)
value representing the frequency of use of a concept in decending order, and
"^DD",757.001,757.001,2,1,1,"%D",3,0)
IEN is the Internal Entery Number in the Concept Usage file #757.001 where this
"^DD",757.001,757.001,2,1,1,"%D",4,0)
frequency value is located.
"^DD",757.001,757.001,2,1,1,"DT")
2950726
"^DD",757.001,757.001,2,3)
Type a Number between 0 and 9999999999, 0 Decimal Digits
"^DD",757.001,757.001,2,21,0)
^^6^6^2951102^^^^
"^DD",757.001,757.001,2,21,1,0)
This value is incremented each time the user selects a concept from the Lexicon
"^DD",757.001,757.001,2,21,2,0)
using the Special Lookup Routines supplied with the Lexicon Utility.  Over time,
"^DD",757.001,757.001,2,21,3,0)
it will show the frequency of use of each of the concepts contained in the
"^DD",757.001,757.001,2,21,4,0)
Lexicon.  Additionally, it is used to order the selection list in the Special
"^DD",757.001,757.001,2,21,5,0)
Lookup Routines, placing the most frequently used concepts at the top of the
"^DD",757.001,757.001,2,21,6,0)
list.
"^DD",757.001,757.001,2,"DT")
2950726
"^DD",757.01,757.01,0)
FIELD^^9^10
"^DD",757.01,757.01,0,"ACT")
S:DIC(0)["L" DIC(0)=$P(DIC(0),"L",1)_$P(DIC(0),"L",2)
"^DD",757.01,757.01,0,"DDA")
N
"^DD",757.01,757.01,0,"DIC")
LEXA1
"^DD",757.01,757.01,0,"DT")
2950420
"^DD",757.01,757.01,0,"IX","ADC",757.01,9)

"^DD",757.01,757.01,0,"IX","AMC",757.01,1)

"^DD",757.01,757.01,0,"IX","ASL",757.01,.01)

"^DD",757.01,757.01,0,"IX","AWORD",757.18,.01)

"^DD",757.01,757.01,0,"IX","AWRD",757.01,2)

"^DD",757.01,757.01,0,"IX","B",757.01,.01)

"^DD",757.01,757.01,0,"NM","EXPRESSIONS")

"^DD",757.01,757.01,0,"PT",125.12,2)

"^DD",757.01,757.01,0,"PT",357.3,2.02)

"^DD",757.01,757.01,0,"PT",358.3,2.02)

"^DD",757.01,757.01,0,"PT",757,.01)

"^DD",757.01,757.01,0,"PT",757,1)

"^DD",757.01,757.01,0,"PT",757.02,.01)

"^DD",757.01,757.01,0,"PT",757.21,.01)

"^DD",757.01,757.01,0,"PT",757.4,.01)

"^DD",757.01,757.01,0,"PT",757.53,.01)

"^DD",757.01,757.01,0,"PT",8925.9,.04)

"^DD",757.01,757.01,0,"PT",9000010.07,.15)

"^DD",757.01,757.01,0,"PT",9000011,1.01)

"^DD",757.01,757.01,0,"PT",9999999.27,75701)

"^DD",757.01,757.01,.01,0)
DISPLAYABLE TEXT^RFX^^0;1^K:$A(X)=45 X I $D(X) K:$L(X)>240!($L(X)<2) X
"^DD",757.01,757.01,.01,1,0)
^.1
"^DD",757.01,757.01,.01,1,1,0)
757.01^B
"^DD",757.01,757.01,.01,1,1,1)
S ^LEX(757.01,"B",$E($$UP^XLFSTR(X),1,63),DA)=""
"^DD",757.01,757.01,.01,1,1,2)
K ^LEX(757.01,"B",$E($$UP^XLFSTR(X),1,63),DA)
"^DD",757.01,757.01,.01,1,1,"%D",0)
^^4^4^2940902^
"^DD",757.01,757.01,.01,1,1,"%D",1,0)
^LEX(757.01,"B",EXP,IEN) - where EXP is the expression (either a Major Concept,
"^DD",757.01,757.01,.01,1,1,"%D",2,0)
Synonym or a Lexical Variant) in the Expression file #757.01 and IEN is the
"^DD",757.01,757.01,.01,1,1,"%D",3,0)
Internal Entry Number in the Expression file #757.01 where this expression is
"^DD",757.01,757.01,.01,1,1,"%D",4,0)
located.
"^DD",757.01,757.01,.01,1,2,0)
757.01^ASL^MUMPS
"^DD",757.01,757.01,.01,1,2,1)
D SSF^LEXNDX6
"^DD",757.01,757.01,.01,1,2,2)
D KSF^LEXNDX6
"^DD",757.01,757.01,.01,1,2,"%D",0)
^^3^3^2950212^
"^DD",757.01,757.01,.01,1,2,"%D",1,0)
^LEX(757.01,"ASL",STR,FREQ) - Where STR is a string found in the Clinical
"^DD",757.01,757.01,.01,1,2,"%D",2,0)
Lexicon and FREQ is the number of times (frequency) it occurrs.  This is not
"^DD",757.01,757.01,.01,1,2,"%D",3,0)
an index.
"^DD",757.01,757.01,.01,1,2,"DT")
2950212
"^DD",757.01,757.01,.01,3)
Displayable Text must be 2-240 characters in length.
"^DD",757.01,757.01,.01,21,0)
^^2^2^2940902^^^
"^DD",757.01,757.01,.01,21,1,0)
This is the text which will be used to represent the expression (Major Concept,
"^DD",757.01,757.01,.01,21,2,0)
Synonym or Lexical Variant).
"^DD",757.01,757.01,.01,"DT")
2950212
"^DD",757.01,757.01,.01,"LAYGO",1,0)
I 0
"^DD",757.01,757.01,1,0)
MAJOR CONCEPT^RP757'I^LEX(757,^1;1^Q
"^DD",757.01,757.01,1,1,0)
^.1
"^DD",757.01,757.01,1,1,1,0)
757.01^AMC
"^DD",757.01,757.01,1,1,1,1)
S ^LEX(757.01,"AMC",$E(X,1,30),DA)=""
"^DD",757.01,757.01,1,1,1,2)
K ^LEX(757.01,"AMC",$E(X,1,30),DA)
"^DD",757.01,757.01,1,1,1,"%D",0)
^^3^3^2940902^^
"^DD",757.01,757.01,1,1,1,"%D",1,0)
^LEX(757.01,"AMC",MC,IEN) - where MC is the pointer to the Major Concept entry
"^DD",757.01,757.01,1,1,1,"%D",2,0)
in the Major Concept Map file #757 and IEN is the Internal Entry Number in the
"^DD",757.01,757.01,1,1,1,"%D",3,0)
Expression file #757.01 where this Major Concept pointer is Located.  
"^DD",757.01,757.01,1,1,1,"DT")
2930325
"^DD",757.01,757.01,1,21,0)
^^5^5^2950726^^^^
"^DD",757.01,757.01,1,21,1,0)
Pointer to the Major Concept (file #757).  If the expression is a major
"^DD",757.01,757.01,1,21,2,0)
concept, this pointer will be the same as the Expression pointer in the
"^DD",757.01,757.01,1,21,3,0)
Major Concept Map file (#757).  If it is a synonym or a lexical variant it
"^DD",757.01,757.01,1,21,4,0)
will point to it's parent major concept.  If it is a lexical variant of a
"^DD",757.01,757.01,1,21,5,0)
synonym, it will point to the parent major concept of the synonym.
"^DD",757.01,757.01,1,"DT")
2940902
"^DD",757.01,757.01,2,0)
TYPE^RP757.011'I^LEX(757.011,^1;2^Q
"^DD",757.01,757.01,2,1,0)
^.1^^-1
"^DD",757.01,757.01,2,1,2,0)
757.01^AWRD^MUMPS
"^DD",757.01,757.01,2,1,2,1)
D S^LEXNDX1
"^DD",757.01,757.01,2,1,2,2)
D K^LEXNDX1
"^DD",757.01,757.01,2,1,2,"%D",0)
^^8^8^2950626^^^
"^DD",757.01,757.01,2,1,2,"%D",1,0)
^LEX(757.01,"AWRD",WORD,MC,EXP) - where WORD is a clinical word parsed from the
"^DD",757.01,757.01,2,1,2,"%D",2,0)
expression (Major Concepts, Synonym or Lexical Variant), MC is the Internal
"^DD",757.01,757.01,2,1,2,"%D",3,0)
Entry Number in the Expression file #757.01 where the Major Concept of the
"^DD",757.01,757.01,2,1,2,"%D",4,0)
expression is located, and EXP is the Internal Entry Number in the Expression
"^DD",757.01,757.01,2,1,2,"%D",5,0)
file #757.01 where the expression containing the WORD is located.  Only Major
"^DD",757.01,757.01,2,1,2,"%D",6,0)
Concepts (M), Synonyms (S) and Lexical Variants (L) are indexed in the word 
"^DD",757.01,757.01,2,1,2,"%D",7,0)
index (AWRD).  Deleted Major Concepts (DM), Deleted Synonyms (DS) and Deleted 
"^DD",757.01,757.01,2,1,2,"%D",8,0)
Lexical Variants (DL) are ignored.
"^DD",757.01,757.01,2,1,2,"DT")
2950626
"^DD",757.01,757.01,2,3)

"^DD",757.01,757.01,2,21,0)
^^2^2^2950511^^^^
"^DD",757.01,757.01,2,21,1,0)
This is a pointer to the Expression Type file (#757.011).  Examples of
"^DD",757.01,757.01,2,21,2,0)
expression types include Major Concepts, Synonyms, Lexical Variants, etc.  
"^DD",757.01,757.01,2,"DT")
2950626
"^DD",757.01,757.01,3,0)
SCOPE^RSI^D:DIRECTLY LINKED;I:INDIRECTLY LINKED;B:BROADER VIEW;N:NARROWER VIEW;O:OTHER;R:RELATED VIEW;C:CONTROLLED VIEW;^1;3^Q
"^DD",757.01,757.01,3,9)
@
"^DD",757.01,757.01,3,21,0)
^^6^6^2940506^^
"^DD",757.01,757.01,3,21,1,0)
Scope - Demonstrates the relationship of the term to the Major Concept.
"^DD",757.01,757.01,3,21,2,0)
Major Concepts, Synonyms to Major Concepts and Lexical Variants to a Major
"^DD",757.01,757.01,3,21,3,0)
Concept are (D)irectly linked.  Lexical Variants to a Synonym of a Major
"^DD",757.01,757.01,3,21,4,0)
Concept are (I)ndirectly linked.  Related concepts are either (B)roader in
"^DD",757.01,757.01,3,21,5,0)
scope, (N)arrower in scope, or an (O)ther/undefined view of the Major
"^DD",757.01,757.01,3,21,6,0)
Concept.
"^DD",757.01,757.01,3,"DT")
2940506
"^DD",757.01,757.01,4,0)
FORM^RP757.014'I^LEX(757.014,^1;4^Q
"^DD",757.01,757.01,4,3)

"^DD",757.01,757.01,4,21,0)
^^4^4^2940902^^^
"^DD",757.01,757.01,4,21,1,0)
Pointer to the Expression Form (file 757.014) which describes the lexical 
"^DD",757.01,757.01,4,21,2,0)
style of an expression.  Major Concepts adopt the general form of "MAJ" while
"^DD",757.01,757.01,4,21,3,0)
all other expressions describe their forms as they relate to the Major 
"^DD",757.01,757.01,4,21,4,0)
Concept (i.e., plural, singular, acronym, etc.)
"^DD",757.01,757.01,4,"DT")
2931121
"^DD",757.01,757.01,5,0)
DISTINGUISHING TEXT^FIX^^2;1^K:$A(X)=45 X I $D(X) K:$L(X)>240!($L(X)<2) X
"^DD",757.01,757.01,5,1,0)
^.1^^0
"^DD",757.01,757.01,5,3)
Original Text must be 2-240 characters in length.
"^DD",757.01,757.01,5,21,0)
^^2^2^2950313^^^^
"^DD",757.01,757.01,5,21,1,0)
This is the text or portion of text that distinguishes this expression from
"^DD",757.01,757.01,5,21,2,0)
the Major Concept.  (null if the expression is the Major Concept)
"^DD",757.01,757.01,5,"DT")
2950313
"^DD",757.01,757.01,6,0)
DEFINITION^757.016^^3;0
"^DD",757.01,757.01,6,21,0)
^^1^1^2960812^^
"^DD",757.01,757.01,6,21,1,0)
Definition of an expression when available.
"^DD",757.01,757.01,7,0)
NEGATION^757.17^^4;0
"^DD",757.01,757.01,7,21,0)
^^4^4^2940904^^^
"^DD",757.01,757.01,7,21,1,0)
This field contains words which are negated within the expression, i.e, 
"^DD",757.01,757.01,7,21,2,0)
without mention of "complication", except "thumb", and other than an 
"^DD",757.01,757.01,7,21,3,0)
"open wound".  These type of negations will not be indexed in the word 
"^DD",757.01,757.01,7,21,4,0)
index, preventing erroneous search results.
"^DD",757.01,757.01,8,0)
SUPPLEMENTAL^757.18^^5;0
"^DD",757.01,757.01,8,21,0)
^^2^2^2940904^^
"^DD",757.01,757.01,8,21,1,0)
Supplemental words (not found in the expression) which should be indexed
"^DD",757.01,757.01,8,21,2,0)
to assist in look-up operations.
"^DD",757.01,757.01,9,0)
DEACTIVATION FLAG^S^1:DEACTIVATED;^1;5^Q
"^DD",757.01,757.01,9,1,0)
^.1
"^DD",757.01,757.01,9,1,1,0)
757.01^ADC^MUMPS
"^DD",757.01,757.01,9,1,1,1)
S:X=1 ^LEX(757.01,"ADC",X,DA)=""
"^DD",757.01,757.01,9,1,1,2)
K ^LEX(757.01,"ADC",X,DA)
"^DD",757.01,757.01,9,1,1,"%D",0)
^^3^3^2950410^
"^DD",757.01,757.01,9,1,1,"%D",1,0)
^LEX(757.01,"ADC",1,IEN) - This is an index of all deactivated terms in the
"^DD",757.01,757.01,9,1,1,"%D",2,0)
Expression file where IEN is the Internal Entry Number in the Expression file
"^DD",757.01,757.01,9,1,1,"%D",3,0)
(757.01) where the deactivated term is located.
"^DD",757.01,757.01,9,1,1,"DT")
2950410
"^DD",757.01,757.01,9,21,0)
^^2^2^2950410^^
"^DD",757.01,757.01,9,21,1,0)
This field indicates that a term formerly in use by the Lexicon has
"^DD",757.01,757.01,9,21,2,0)
been deactivated and should not be used in lookups or displays.
"^DD",757.01,757.01,9,"DT")
2950410
"^DD",757.01,757.016,0)
DEFINITION SUB-FIELD^^.01^1
"^DD",757.01,757.016,0,"DT")
2930324
"^DD",757.01,757.016,0,"NM","DEFINITION")

"^DD",757.01,757.016,0,"UP")
757.01
"^DD",757.01,757.016,.01,0)
DEFINITION^W^^0;1^Q
"^DD",757.01,757.016,.01,"DT")
2930324
"^DD",757.01,757.17,0)
NEGATION SUB-FIELD^^.01^1
"^DD",757.01,757.17,0,"DT")
2940328
"^DD",757.01,757.17,0,"IX","B",757.17,.01)

"^DD",757.01,757.17,0,"NM","NEGATION")

"^DD",757.01,757.17,0,"UP")
757.01
"^DD",757.01,757.17,.01,0)
NEGATION^MFI^^0;1^K:$L(X)>63!($L(X)<1) X
"^DD",757.01,757.17,.01,1,0)
^.1
"^DD",757.01,757.17,.01,1,1,0)
757.17^B
"^DD",757.01,757.17,.01,1,1,1)
S ^LEX(757.01,DA(1),4,"B",$E(X,1,30),DA)=""
"^DD",757.01,757.17,.01,1,1,2)
K ^LEX(757.01,DA(1),4,"B",$E(X,1,30),DA)
"^DD",757.01,757.17,.01,1,1,"%D",0)
^^5^5^2940928^^^^
"^DD",757.01,757.17,.01,1,1,"%D",1,0)
^LEX(757.01,EXP,4,"B",NEG,IEN) - where EXP is the Internal Entry Number of the
"^DD",757.01,757.17,.01,1,1,"%D",2,0)
expression in the Expression file #757.01 which contains negated words (words
"^DD",757.01,757.17,.01,1,1,"%D",3,0)
not to use during lookup), NEG is the negated word to exclude from lookup, 
"^DD",757.01,757.17,.01,1,1,"%D",4,0)
and IEN is the Internal Entry Number in the Negation Sub-file #757.17 where 
"^DD",757.01,757.17,.01,1,1,"%D",5,0)
the negated word is located.
"^DD",757.01,757.17,.01,3)
Answer must be 1-63 characters in length.
"^DD",757.01,757.17,.01,21,0)
^^2^2^2940904^
"^DD",757.01,757.17,.01,21,1,0)
This field contains a single word which is negated with in an expression and is
"^DD",757.01,757.17,.01,21,2,0)
excluded from indexing for this expression only.
"^DD",757.01,757.17,.01,"DT")
2940328
"^DD",757.01,757.18,0)
SUPPLEMENTAL SUB-FIELD^^.01^1
"^DD",757.01,757.18,0,"DT")
2940204
"^DD",757.01,757.18,0,"IX","B",757.18,.01)

"^DD",757.01,757.18,0,"NM","SUPPLEMENTAL")

"^DD",757.01,757.18,0,"UP")
757.01
"^DD",757.01,757.18,.01,0)
WORD^MFI^^0;1^K:$L(X)>63!($L(X)<1) X
"^DD",757.01,757.18,.01,1,0)
^.1
"^DD",757.01,757.18,.01,1,1,0)
757.18^B
"^DD",757.01,757.18,.01,1,1,1)
S ^LEX(757.01,DA(1),5,"B",$E(X,1,30),DA)=""
"^DD",757.01,757.18,.01,1,1,2)
K ^LEX(757.01,DA(1),5,"B",$E(X,1,30),DA)
"^DD",757.01,757.18,.01,1,1,"%D",0)
^^5^5^2940928^^
"^DD",757.01,757.18,.01,1,1,"%D",1,0)
^LEX(757.01,EXP,5,"B",WORD,IEN) - where EXP is the Internal Entry Number of the
"^DD",757.01,757.18,.01,1,1,"%D",2,0)
expression in the Expression file #757.01 which has supplemental keywords 
"^DD",757.01,757.18,.01,1,1,"%D",3,0)
used to assist in lookups, WORD is the supplemental keyword (not contained in
"^DD",757.01,757.18,.01,1,1,"%D",4,0)
the expression), and IEN is the Internal Entry Number of the Supplemental Word
"^DD",757.01,757.18,.01,1,1,"%D",5,0)
Sub-file #757.18 where the word is located.
"^DD",757.01,757.18,.01,1,2,0)
757.01^AWORD^MUMPS
"^DD",757.01,757.18,.01,1,2,1)
D SSUP^LEXNDX6
"^DD",757.01,757.18,.01,1,2,2)
D KSUP^LEXNDX6
"^DD",757.01,757.18,.01,1,2,"%D",0)
^^5^5^2960402^
"^DD",757.01,757.18,.01,1,2,"%D",1,0)
^LEX(757.01,"AWRD",WORD,MC,EXP,IEN) - where WORD is a Supplemental Keyword used
"^DD",757.01,757.18,.01,1,2,"%D",2,0)
during lookup, MC is the Internal Entry Number in file 757.01 where the Major
"^DD",757.01,757.18,.01,1,2,"%D",3,0)
Concept is located, EXP is the Internal Entry Number in file 757.01 where the
"^DD",757.01,757.18,.01,1,2,"%D",4,0)
Expression is located, and IEN is the Internal Entry Number in the Supplemental
"^DD",757.01,757.18,.01,1,2,"%D",5,0)
Word Sub-file 757.18 where the WORD is located.
"^DD",757.01,757.18,.01,1,2,"DT")
2960402
"^DD",757.01,757.18,.01,3)
Answer must be 1-63 characters in length.
"^DD",757.01,757.18,.01,21,0)
^^2^2^2940904^
"^DD",757.01,757.18,.01,21,1,0)
This field contains a single word not found within an expression which should
"^DD",757.01,757.18,.01,21,2,0)
be indexed for this expression only.
"^DD",757.01,757.18,.01,"DT")
2960402
"^DD",757.011,757.011,0)
FIELD^^1^2
"^DD",757.011,757.011,0,"DDA")
N
"^DD",757.011,757.011,0,"DT")
2950426
"^DD",757.011,757.011,0,"ID",1)
W "   ",@("$P($P($C(59)_$S($D(^DD(757.011,1,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,2)_"":"",2),$C(59),1)")
"^DD",757.011,757.011,0,"IX","B",757.011,.01)

"^DD",757.011,757.011,0,"IX","C",757.011,.01)

"^DD",757.011,757.011,0,"NM","EXPRESSION TYPE")

"^DD",757.011,757.011,0,"PT",757.01,2)

"^DD",757.011,757.011,.01,0)
TYPE^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",757.011,757.011,.01,1,0)
^.1
"^DD",757.011,757.011,.01,1,1,0)
757.011^B
"^DD",757.011,757.011,.01,1,1,1)
S ^LEX(757.011,"B",$E(X,1,30),DA)=""
"^DD",757.011,757.011,.01,1,1,2)
K ^LEX(757.011,"B",$E(X,1,30),DA)
"^DD",757.011,757.011,.01,1,1,"%D",0)
^^3^3^2950420^
"^DD",757.011,757.011,.01,1,1,"%D",1,0)
^LEX(757.011,"B",TYPE,IEN) - Where TYPE is a descriptive name for a type of
"^DD",757.011,757.011,.01,1,1,"%D",2,0)
expression in the Expression file (757.01) and IEN is the Internal Entry Number
"^DD",757.011,757.011,.01,1,1,"%D",3,0)
where the descriptive name is located in the Expression Type file (757.011).
"^DD",757.011,757.011,.01,1,2,0)
757.011^C^MUMPS
"^DD",757.011,757.011,.01,1,2,1)
S ^LEX(757.011,"C",$$UP^XLFSTR($E(X,1,30)),DA)=""
"^DD",757.011,757.011,.01,1,2,2)
K ^LEX(757.011,"C",$$UP^XLFSTR($E(X,1,30)),DA)
"^DD",757.011,757.011,.01,1,2,"%D",0)
^^3^3^2950426^
"^DD",757.011,757.011,.01,1,2,"%D",1,0)
^LEX(757.011,"C",UPPER,IEN) - This is an uppercase version of the B index where
"^DD",757.011,757.011,.01,1,2,"%D",2,0)
UPPER is the Type of Expression and IEN is the Internal Entry Number in the
"^DD",757.011,757.011,.01,1,2,"%D",3,0)
Expression Type file (757.011) where the Type is located.
"^DD",757.011,757.011,.01,1,2,"DT")
2950426
"^DD",757.011,757.011,.01,3)
Type must be 3-30 characters in length.
"^DD",757.011,757.011,.01,21,0)
^^2^2^2950420^
"^DD",757.011,757.011,.01,21,1,0)
This is a table of the types of expressions found in the Expression file
"^DD",757.011,757.011,.01,21,2,0)
(#757.01).
"^DD",757.011,757.011,.01,"DT")
2950426
"^DD",757.011,757.011,1,0)
WORD INDEX^RS^1:INDEX;0:DO NOT INDEX;^0;2^Q
"^DD",757.011,757.011,1,21,0)
^^2^2^2950426^
"^DD",757.011,757.011,1,21,1,0)
This field tells the indexing routines which types of terms are to be indexed
"^DD",757.011,757.011,1,21,2,0)
in the master word index.
"^DD",757.011,757.011,1,"DT")
2950426
"^DD",757.014,757.014,0)
FIELD^^1^2
"^DD",757.014,757.014,0,"DDA")
N
"^DD",757.014,757.014,0,"DT")
2931121
"^DD",757.014,757.014,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",757.014,757.014,0,"IX","B",757.014,.01)

"^DD",757.014,757.014,0,"NM","EXPRESSION FORM")

"^DD",757.014,757.014,0,"PT",757.01,4)

"^DD",757.014,757.014,.01,0)
MNEMONIC^RFXI^^0;1^S X=$$UP^XLFSTR(X) K:$L(X)>3!($L(X)<3)!'(X'?1P.E) X
"^DD",757.014,757.014,.01,1,0)
^.1
"^DD",757.014,757.014,.01,1,1,0)
757.014^B
"^DD",757.014,757.014,.01,1,1,1)
S ^LEX(757.014,"B",$E(X,1,30),DA)=""
"^DD",757.014,757.014,.01,1,1,2)
K ^LEX(757.014,"B",$E(X,1,30),DA)
"^DD",757.014,757.014,.01,1,1,"%D",0)
^^4^4^2940902^
"^DD",757.014,757.014,.01,1,1,"%D",1,0)
^LEX(757.014,"B",MNEM,IEN) - where MNEM is the Mnemonic for the expression form
"^DD",757.014,757.014,.01,1,1,"%D",2,0)
(i.e., ACR Acronym, ABR Abbreviation, etc.) and IEN is the Internal Entry
"^DD",757.014,757.014,.01,1,1,"%D",3,0)
Number in the Expression Form file #757.014 where the expression form is
"^DD",757.014,757.014,.01,1,1,"%D",4,0)
located.
"^DD",757.014,757.014,.01,3)
Form of Expression (mnemonic) must be 3 characters in length.
"^DD",757.014,757.014,.01,10)

"^DD",757.014,757.014,.01,21,0)
^^1^1^2960812^^^^
"^DD",757.014,757.014,.01,21,1,0)
Three character mnemonic for the form for which the expression takes.
"^DD",757.014,757.014,.01,"DT")
2931124
"^DD",757.014,757.014,1,0)
FORM^FI^^0;2^K:$L(X)>100!($L(X)<3) X
"^DD",757.014,757.014,1,3)
Form of Expression (descriptive) must be 3-100 characters in length.
"^DD",757.014,757.014,1,21,0)
^^3^3^2931121^
"^DD",757.014,757.014,1,21,1,0)
Describes the lexical style of an expression.  Major Concepts adopt the
"^DD",757.014,757.014,1,21,2,0)
general form of "MAJ" while all other expressions describe their forms as
"^DD",757.014,757.014,1,21,3,0)
they relate to the Major Concept (i.e., Plural, Singular, Acronym, etc,)
"^DD",757.014,757.014,1,"DT")
2931124
"^DD",757.02,757.02,0)
FIELD^^6^7
"^DD",757.02,757.02,0,"DDA")
N
"^DD",757.02,757.02,0,"DT")
2950823
"^DD",757.02,757.02,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",757.02,757.02,0,"ID",2)
S %I=Y,Y=$S('$D(^(0)):"",$D(^LEX(757.03,+$P(^(0),U,3),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(757.03,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",757.02,757.02,0,"IX","ACODE",757.02,1)

"^DD",757.02,757.02,0,"IX","ADC",757.02,5)

"^DD",757.02,757.02,0,"IX","AMC",757.02,3)

"^DD",757.02,757.02,0,"IX","ASRC",757.02,2)

"^DD",757.02,757.02,0,"IX","AVA",757.02,2)

"^DD",757.02,757.02,0,"IX","B",757.02,.01)

"^DD",757.02,757.02,0,"NM","CODES")

"^DD",757.02,757.02,.01,0)
EXPRESSION^RP757.01'I^LEX(757.01,^0;1^Q
"^DD",757.02,757.02,.01,1,0)
^.1
"^DD",757.02,757.02,.01,1,1,0)
757.02^B
"^DD",757.02,757.02,.01,1,1,1)
S ^LEX(757.02,"B",$E(X,1,30),DA)=""
"^DD",757.02,757.02,.01,1,1,2)
K ^LEX(757.02,"B",$E(X,1,30),DA)
"^DD",757.02,757.02,.01,1,1,"%D",0)
^^5^5^2940902^^
"^DD",757.02,757.02,.01,1,1,"%D",1,0)
^LEX(757.02,"B",EXP,IEN) - where EXP is a pointer to the expression in the
"^DD",757.02,757.02,.01,1,1,"%D",2,0)
Expression file (#757.01) which has been assigned a classification code and 
"^DD",757.02,757.02,.01,1,1,"%D",3,0)
IEN is the Internal Entry Number in the Codes file (#757.02) where this
"^DD",757.02,757.02,.01,1,1,"%D",4,0)
expression is located.  This index is used to retrieve all codes associated
"^DD",757.02,757.02,.01,1,1,"%D",5,0)
with an expression.
"^DD",757.02,757.02,.01,3)

"^DD",757.02,757.02,.01,21,0)
^^5^5^2940902^^^^
"^DD",757.02,757.02,.01,21,1,0)
Pointer to the expression in the Expression file #757.01 to which a
"^DD",757.02,757.02,.01,21,2,0)
classification code (i.e., ICD, CPT, DSM code) has been assigned.  This 
"^DD",757.02,757.02,.01,21,3,0)
pointer links the code to an expression.  This expression can be a Major 
"^DD",757.02,757.02,.01,21,4,0)
Concept, a Synonym or a Lexical Variant of either the Major Concept or the
"^DD",757.02,757.02,.01,21,5,0)
Synonym.
"^DD",757.02,757.02,.01,"DT")
2931124
"^DD",757.02,757.02,1,0)
CODE^RF^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>40!($L(X)<1) X
"^DD",757.02,757.02,1,1,0)
^.1
"^DD",757.02,757.02,1,1,1,0)
757.02^ACODE^MUMPS
"^DD",757.02,757.02,1,1,1,1)
S ^LEX(757.02,"ACODE",(X_" "),DA)=""
"^DD",757.02,757.02,1,1,1,2)
K ^LEX(757.02,"ACODE",(X_" "),DA)
"^DD",757.02,757.02,1,1,1,"%D",0)
^^5^5^2940902^^
"^DD",757.02,757.02,1,1,1,"%D",1,0)
^LEX(757.02,"ACODE",CODE,IEN) - where CODE is a Classification Code (i.e., ICD
"^DD",757.02,757.02,1,1,1,"%D",2,0)
code, CPT code, DSM code, etc) and IEN is the Internal Entry Number in the
"^DD",757.02,757.02,1,1,1,"%D",3,0)
Codes file (#757.02) where this code is located.  This is an index of all 
"^DD",757.02,757.02,1,1,1,"%D",4,0)
codes contained in this file and is used to check the existence of a code 
"^DD",757.02,757.02,1,1,1,"%D",5,0)
within the Lexicon.
"^DD",757.02,757.02,1,1,1,"DT")
2930325
"^DD",757.02,757.02,1,3)
Answer must be 1-40 characters in length.
"^DD",757.02,757.02,1,21,0)
^^2^2^2960812^^^
"^DD",757.02,757.02,1,21,1,0)
Classification Code as described by a controlled vocabulary (i.e., ICD, 
"^DD",757.02,757.02,1,21,2,0)
CPT, etc).
"^DD",757.02,757.02,1,"DT")
2960610
"^DD",757.02,757.02,2,0)
CLASSIFICATION SOURCE^RP757.03'I^LEX(757.03,^0;3^Q
"^DD",757.02,757.02,2,1,0)
^.1
"^DD",757.02,757.02,2,1,1,0)
757.02^ASRC^MUMPS
"^DD",757.02,757.02,2,1,1,1)
S ^LEX(757.02,"ASRC",$E(^LEX(757.03,X,0),1,3),DA)=""
"^DD",757.02,757.02,2,1,1,2)
K ^LEX(757.02,"ASRC",$E(^LEX(757.03,X,0),1,3),DA)
"^DD",757.02,757.02,2,1,1,"%D",0)
2^^5^5^2940902^
"^DD",757.02,757.02,2,1,1,"%D",1,0)
^LEX(757.02,"ASRC",SAB,IEN) - where SAB is the three chracter mnemonic of the 
"^DD",757.02,757.02,2,1,1,"%D",2,0)
Source Abbreviation (i.e., ICD, CPT, etc) from the Coding Systems file #757.03
"^DD",757.02,757.02,2,1,1,"%D",3,0)
and IEN is the Internal Entry Number where this type of code can be located.
"^DD",757.02,757.02,2,1,1,"%D",4,0)
This index is used extensively in filtering searches by type of code and used
"^DD",757.02,757.02,2,1,1,"%D",5,0)
to determin the type of code selected.
"^DD",757.02,757.02,2,1,1,"DT")
2930325
"^DD",757.02,757.02,2,1,2,0)
757.02^AVA^MUMPS
"^DD",757.02,757.02,2,1,2,1)
S SAB=$E(^LEX(757.03,X,0),1,3) S:"^ICD^ICP^CPT^DS4^NAN^NIC^SNM^OMA^"[SAB ^LEX(757.02,"AVA",($P(^LEX(757.02,DA,0),U,2)_" "),$P(^LEX(757.02,DA,0),U),SAB,DA)="" K SAB
"^DD",757.02,757.02,2,1,2,2)
S SAB=$E(^LEX(757.03,X,0),1,3) K ^LEX(757.02,"AVA",($P(^LEX(757.02,DA,0),U,2)_" "),$P(^LEX(757.02,DA,0),U),SAB,DA),SAB
"^DD",757.02,757.02,2,1,2,"%D",0)
^^6^6^2960724^^^^
"^DD",757.02,757.02,2,1,2,"%D",1,0)
^LEX(757.02,"AVA",CODE,SAB,IEN) - where CODE is the Classification Code from
"^DD",757.02,757.02,2,1,2,"%D",2,0)
field 1, SAB is the three character mnemonic for the source abbreviation in the
"^DD",757.02,757.02,2,1,2,"%D",3,0)
Coding Systems file #757.03 (i.e., ICD, CPT, etc) and IEN is the Internal Entry
"^DD",757.02,757.02,2,1,2,"%D",4,0)
Number in the Codes file #757.02 where the code is located.  This is an index
"^DD",757.02,757.02,2,1,2,"%D",5,0)
of only those codes frequently used by the VA (Source Abbreviation SAB is ICD, 
"^DD",757.02,757.02,2,1,2,"%D",6,0)
CPT, DSM, NAN, NIC, OMA, or SNM).
"^DD",757.02,757.02,2,1,2,"DT")
2960724
"^DD",757.02,757.02,2,21,0)
^^2^2^2940902^^
"^DD",757.02,757.02,2,21,1,0)
Pointer to the classification system (ICD/CPT/DSM etc) described in the
"^DD",757.02,757.02,2,21,2,0)
Coding Systems file (#757.03) from which the code (field 1) is derived.
"^DD",757.02,757.02,2,"DT")
2960724
"^DD",757.02,757.02,3,0)
MAJOR CONCEPT^RP757'I^LEX(757,^0;4^Q
"^DD",757.02,757.02,3,1,0)
^.1
"^DD",757.02,757.02,3,1,1,0)
757.02^AMC
"^DD",757.02,757.02,3,1,1,1)
S ^LEX(757.02,"AMC",$E(X,1,30),DA)=""
"^DD",757.02,757.02,3,1,1,2)
K ^LEX(757.02,"AMC",$E(X,1,30),DA)
"^DD",757.02,757.02,3,1,1,"%D",0)
^^4^4^2940902^^
"^DD",757.02,757.02,3,1,1,"%D",1,0)
^LEX(757.02,"AMC",MC,IEN) - where MC is a pointer to the Major Concept Map file
"^DD",757.02,757.02,3,1,1,"%D",2,0)
#757 and IEN is the Internal Entry Number of the Codes file #757.03 where this
"^DD",757.02,757.02,3,1,1,"%D",3,0)
Major Concept pointer is located.  Used to retrieve all codes associated with
"^DD",757.02,757.02,3,1,1,"%D",4,0)
a Major Concept.
"^DD",757.02,757.02,3,1,1,"DT")
2930325
"^DD",757.02,757.02,3,21,0)
^^4^4^2940902^^^
"^DD",757.02,757.02,3,21,1,0)
Pointer the the Major Concept in the Major Concept Map file #757 to which a
"^DD",757.02,757.02,3,21,2,0)
classification code (i.e., ICD, CPT, DSM code) has been assigned.  This pointer
"^DD",757.02,757.02,3,21,3,0)
links the code to the Major Concept of the expression defined in the .01 field
"^DD",757.02,757.02,3,21,4,0)
(Expression).
"^DD",757.02,757.02,3,"DT")
2931124
"^DD",757.02,757.02,4,0)
PREFERENCE FLAG^SI^1:PREFERRED TERM;0:OTHER THAN PREFERRED TERM;^0;5^Q
"^DD",757.02,757.02,4,21,0)
^^4^4^2940902^^
"^DD",757.02,757.02,4,21,1,0)
Some codes within a coding system are linked to multiple terms.  This flag
"^DD",757.02,757.02,4,21,2,0)
indicates the preferred term of a code (within a classification system),
"^DD",757.02,757.02,4,21,3,0)
providing a one-to-one relationship between codes and terms.  This field is 
"^DD",757.02,757.02,4,21,4,0)
only populated when a code is linked to multiple terms.
"^DD",757.02,757.02,4,"DT")
2940328
"^DD",757.02,757.02,5,0)
DEACTIVATION FLAG^S^1:DEACTIVATED CODE;^0;6^Q
"^DD",757.02,757.02,5,1,0)
^.1
"^DD",757.02,757.02,5,1,1,0)
757.02^ADC^MUMPS
"^DD",757.02,757.02,5,1,1,1)
S:X=1 ^LEX(757.02,"ADC",X,DA)=""
"^DD",757.02,757.02,5,1,1,2)
K ^LEX(757.02,"ADC",X,DA)
"^DD",757.02,757.02,5,1,1,"%D",0)
^^3^3^2950405^
"^DD",757.02,757.02,5,1,1,"%D",1,0)
^LEX(757.02,"ADC",1,IEN) - This is an index of all deactivated codes in the
"^DD",757.02,757.02,5,1,1,"%D",2,0)
code file where IEN is the Internal Entry Number in the CODES file (757.02)
"^DD",757.02,757.02,5,1,1,"%D",3,0)
where the deactivated code is located.
"^DD",757.02,757.02,5,1,1,"DT")
2950405
"^DD",757.02,757.02,5,21,0)
^^2^2^2950410^^
"^DD",757.02,757.02,5,21,1,0)
This field indicates that a code formerly in use by the Lexicon has
"^DD",757.02,757.02,5,21,2,0)
been deactivated and should not be used in lookups or displays.
"^DD",757.02,757.02,5,"DT")
2950405
"^DD",757.02,757.02,6,0)
PRIMARY FLAG^RS^0:SUPPLEMENTAL CODE;1:PRIMARY CODE;^0;7^Q
"^DD",757.02,757.02,6,21,0)
^^4^4^2950823^
"^DD",757.02,757.02,6,21,1,0)
If an expression has multiple codes from the same classification system
"^DD",757.02,757.02,6,21,2,0)
(i.e., ICD, CPT, etc) then one will be flagged as the primary code and the
"^DD",757.02,757.02,6,21,3,0)
others will be flagged as supplemental.  If there is only one code of a
"^DD",757.02,757.02,6,21,4,0)
specific classification system then it will be flagged as the primary code.
"^DD",757.02,757.02,6,"DT")
2950823
"^DD",757.03,757.03,0)
FIELD^^6^7
"^DD",757.03,757.03,0,"DDA")
N
"^DD",757.03,757.03,0,"DT")
2960415
"^DD",757.03,757.03,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",757.03,757.03,0,"IX","ASAB",757.03,.01)

"^DD",757.03,757.03,0,"IX","B",757.03,.01)

"^DD",757.03,757.03,0,"IX","C",757.03,1)

"^DD",757.03,757.03,0,"NM","CODING SYSTEMS")

"^DD",757.03,757.03,0,"PT",757.02,2)

"^DD",757.03,757.03,.01,0)
SOURCE ABBREVIATION^RF^^0;1^K:$L(X)>7!($L(X)<3) X
"^DD",757.03,757.03,.01,.1)
SAB
"^DD",757.03,757.03,.01,1,0)
^.1
"^DD",757.03,757.03,.01,1,1,0)
757.03^B
"^DD",757.03,757.03,.01,1,1,1)
S ^LEX(757.03,"B",$E(X,1,30),DA)=""
"^DD",757.03,757.03,.01,1,1,2)
K ^LEX(757.03,"B",$E(X,1,30),DA)
"^DD",757.03,757.03,.01,1,1,"%D",0)
^^3^3^2950922^^
"^DD",757.03,757.03,.01,1,1,"%D",1,0)
^LEX(757.03,"B",SAB,IEN) - where SAB is the Source Abbreviation and IEN is the
"^DD",757.03,757.03,.01,1,1,"%D",2,0)
Internal Entry Number in the Coding Systems file #757.03 where the Source is
"^DD",757.03,757.03,.01,1,1,"%D",3,0)
located.
"^DD",757.03,757.03,.01,1,2,0)
757.03^ASAB^MUMPS
"^DD",757.03,757.03,.01,1,2,1)
S ^LEX(757.03,"ASAB",$E(X,1,3),DA)=""
"^DD",757.03,757.03,.01,1,2,2)
K ^LEX(757.03,"ASAB",$E(X,1,3),DA)
"^DD",757.03,757.03,.01,1,2,"%D",0)
^^4^4^2960215^
"^DD",757.03,757.03,.01,1,2,"%D",1,0)
^LEX(757.03,"ASAB",SAB,IEN) - where SAB is a three representation of the 
"^DD",757.03,757.03,.01,1,2,"%D",2,0)
Source Abbreviation as used in the search filter DIC("S"), and IEN is the
"^DD",757.03,757.03,.01,1,2,"%D",3,0)
Internal Entry Number in the Coding Systems file #757.03 where the Source is
"^DD",757.03,757.03,.01,1,2,"%D",4,0)
located.
"^DD",757.03,757.03,.01,1,2,"DT")
2960215
"^DD",757.03,757.03,.01,3)
Answer must be 3-7 characters in length.
"^DD",757.03,757.03,.01,21,0)
^^4^4^2950110^^^^
"^DD",757.03,757.03,.01,21,1,0)
Three to six character identifier for the source of the classification
"^DD",757.03,757.03,.01,21,2,0)
code located in the Codes file (#757.02).  The normal format is a three
"^DD",757.03,757.03,.01,21,3,0)
character mnemonic for the classification source, appended with the year
"^DD",757.03,757.03,.01,21,4,0)
of publication of the source (i.e., ICD89).
"^DD",757.03,757.03,.01,"DT")
2960215
"^DD",757.03,757.03,1,0)
NOMENCLATURE^RF^^0;2^K:$L(X)>8!($L(X)<2) X
"^DD",757.03,757.03,1,1,0)
^.1
"^DD",757.03,757.03,1,1,1,0)
757.03^C
"^DD",757.03,757.03,1,1,1,1)
S ^LEX(757.03,"C",$E(X,1,30),DA)=""
"^DD",757.03,757.03,1,1,1,2)
K ^LEX(757.03,"C",$E(X,1,30),DA)
"^DD",757.03,757.03,1,1,1,"%D",1,0)
^LEX(757.03,"C",NOM,IEN) - Where NOM is the abbreviated nomenclature for a
"^DD",757.03,757.03,1,1,1,"%D",2,0)
specified coding or classification system and IEN is the Internal Entry Number
"^DD",757.03,757.03,1,1,1,"%D",3,0)
where the nomenclature is located.
"^DD",757.03,757.03,1,1,1,"DT")
2950922
"^DD",757.03,757.03,1,3)
Answer must be 2-8 characters in length.
"^DD",757.03,757.03,1,21,0)
^^2^2^2950919^^^^
"^DD",757.03,757.03,1,21,1,0)
Short title for the classification source.  This is the name normally used
"^DD",757.03,757.03,1,21,2,0)
to refer to the source (i.e., ICD-9, CPT-4, DSM-IIIR, SNOMED etc.)
"^DD",757.03,757.03,1,"DT")
2950922
"^DD",757.03,757.03,2,0)
SOURCE TITLE^RF^^0;3^K:$L(X)>52!($L(X)<2) X
"^DD",757.03,757.03,2,3)
Answer must be 2-52 characters in length.
"^DD",757.03,757.03,2,21,0)
^^2^2^2950920^^^
"^DD",757.03,757.03,2,21,1,0)
Full title of source.  Also includes edition/revision and year of
"^DD",757.03,757.03,2,21,2,0)
publication when available.
"^DD",757.03,757.03,2,"DT")
2950920
"^DD",757.03,757.03,3,0)
SOURCE^F^^0;4^K:$L(X)>50!($L(X)<2) X
"^DD",757.03,757.03,3,3)
Answer must be 2-50 characters in length.
"^DD",757.03,757.03,3,21,0)
^^1^1^2950919^
"^DD",757.03,757.03,3,21,1,0)
This is source of the named coding system.
"^DD",757.03,757.03,3,"DT")
2950919
"^DD",757.03,757.03,4,0)
ENTRIES^NJ10,0^^0;5^K:+X'=X!(X>9999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",757.03,757.03,4,3)
Type a Number between 0 and 9999999999, 0 Decimal Digits
"^DD",757.03,757.03,4,21,0)
^^3^3^2950919^
"^DD",757.03,757.03,4,21,1,0)
This is the number of coded entries found in the Lexicon (by classification
"^DD",757.03,757.03,4,21,2,0)
system) at the time of export.  NOTE:  This does not include deactivated
"^DD",757.03,757.03,4,21,3,0)
entries.
"^DD",757.03,757.03,4,"DT")
2950919
"^DD",757.03,757.03,5,0)
UNIQUE ENTRIES^NJ10,0^^0;6^K:+X'=X!(X>9999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",757.03,757.03,5,3)
Type a Number between 0 and 9999999999, 0 Decimal Digits
"^DD",757.03,757.03,5,21,0)
^^3^3^2950919^
"^DD",757.03,757.03,5,21,1,0)
This is the number of unique coded entries found in the Lexicon (by
"^DD",757.03,757.03,5,21,2,0)
classification system) at the time of export.  NOTE:  This does not include
"^DD",757.03,757.03,5,21,3,0)
deactivated entries.
"^DD",757.03,757.03,5,"DT")
2950919
"^DD",757.03,757.03,6,0)
INACTIVE VERSION^F^^0;7^K:$L(X)>20!($L(X)<1) X
"^DD",757.03,757.03,6,3)
Answer must be 1-20 characters in length.
"^DD",757.03,757.03,6,21,0)
^^2^2^2960415^
"^DD",757.03,757.03,6,21,1,0)
This represents the version number of the source file for which inactivated
"^DD",757.03,757.03,6,21,2,0)
codes are derived.
"^DD",757.03,757.03,6,"DT")
2960415
"^DD",757.04,757.04,0)
FIELD^^1^2
"^DD",757.04,757.04,0,"DDA")
N
"^DD",757.04,757.04,0,"IX","AB",757.04,.01)

"^DD",757.04,757.04,0,"IX","ACTION",757.04,1)

"^DD",757.04,757.04,0,"IX","B",757.04,.01)

"^DD",757.04,757.04,0,"NM","EXCLUDED WORDS")

"^DD",757.04,757.04,.01,0)
WORD^RFXI^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>40!($L(X)<1)!'(X?1U.UPN) X D EXC^LEXERI
"^DD",757.04,757.04,.01,1,0)
^.1
"^DD",757.04,757.04,.01,1,1,0)
757.04^B
"^DD",757.04,757.04,.01,1,1,1)
S ^LEX(757.04,"B",$E(X,1,30),DA)=""
"^DD",757.04,757.04,.01,1,1,2)
K ^LEX(757.04,"B",$E(X,1,30),DA)
"^DD",757.04,757.04,.01,1,1,"%D",0)
^^3^3^2940902^^
"^DD",757.04,757.04,.01,1,1,"%D",1,0)
^LEX(757.04,"B",WORD,IEN) - where WORD is the word to be excluded from either
"^DD",757.04,757.04,.01,1,1,"%D",2,0)
indexing, lookup or both indexing and lookup, and IEN is the Internal Entry
"^DD",757.04,757.04,.01,1,1,"%D",3,0)
Number in the Excluded Word file #757.04 where the word is located.
"^DD",757.04,757.04,.01,1,2,0)
757.04^AB^MUMPS
"^DD",757.04,757.04,.01,1,2,1)
S ^LEX(757.04,"AB",$E(X,1,40),DA)=""
"^DD",757.04,757.04,.01,1,2,2)
K ^LEX(757.04,"AB",$E(X,1,40),DA)
"^DD",757.04,757.04,.01,1,2,"%D",0)
^^5^5^2940902^^^
"^DD",757.04,757.04,.01,1,2,"%D",1,0)
^LEX(757.04,"AB",WORD,IEN) - where WORD is the word to be excluded from either
"^DD",757.04,757.04,.01,1,2,"%D",2,0)
indexing, lookup or both indexing and lookup, and IEN is the Internal Entry
"^DD",757.04,757.04,.01,1,2,"%D",3,0)
Number in the Excluded Word file #757.04 where the word is located.  This is
"^DD",757.04,757.04,.01,1,2,"%D",4,0)
similar to the "B" index, but has been extended to 40 characters (Word field
"^DD",757.04,757.04,.01,1,2,"%D",5,0)
.01 length) to speed word parsing, indexing and lookup routines.
"^DD",757.04,757.04,.01,1,2,"DT")
2930520
"^DD",757.04,757.04,.01,3)
Excluded Word, 1-40 long, and not in Replacement Word file (757.05).
"^DD",757.04,757.04,.01,21,0)
^^3^3^2960812^^^^
"^DD",757.04,757.04,.01,21,1,0)
The words contained in this field will be excluded from indexing or from
"^DD",757.04,757.04,.01,21,2,0)
the user's input prior to invoking the look-up utility, depending on the
"^DD",757.04,757.04,.01,21,3,0)
action indicated.
"^DD",757.04,757.04,.01,"DT")
2950803
"^DD",757.04,757.04,1,0)
EXCLUDE FROM^RSI^I:EXCLUDE FROM INDEXING ONLY;L:EXCLUDE FROM LOOKUP ONLY;B:EXCLUDE FROM BOTH INDEXING AND LOOKUP;^0;2^Q
"^DD",757.04,757.04,1,1,0)
^.1
"^DD",757.04,757.04,1,1,1,0)
757.04^ACTION^MUMPS
"^DD",757.04,757.04,1,1,1,1)
S ^LEX(757.04,"ACTION",$E($P(^LEX(757.04,DA,0),U,1),1,63),X,DA)=""
"^DD",757.04,757.04,1,1,1,2)
K ^LEX(757.04,"ACTION",$E($P(^LEX(757.04,DA,0),U,1),1,63),X,DA)
"^DD",757.04,757.04,1,1,1,"%D",0)
^^7^7^2940902^^
"^DD",757.04,757.04,1,1,1,"%D",1,0)
^LEX(757.04,"ACTION",WORD,EXC,IEN) - where WORD is the word to be excluded, 
"^DD",757.04,757.04,1,1,1,"%D",2,0)
EXC is the type of action (Exclude From field 1) to take when performing 
"^DD",757.04,757.04,1,1,1,"%D",3,0)
exclusions and IEN is the Internal Entry Number in the Excluded Word 
"^DD",757.04,757.04,1,1,1,"%D",4,0)
file #757.04 where the Word/Action combination is located.  This index is 
"^DD",757.04,757.04,1,1,1,"%D",5,0)
used to determine how the given word was meant to be excluded. (I = exclude 
"^DD",757.04,757.04,1,1,1,"%D",6,0)
from indexing, L = exclude from look-up, B = exclude from both indexing and 
"^DD",757.04,757.04,1,1,1,"%D",7,0)
look-up).
"^DD",757.04,757.04,1,1,1,"DT")
2930129
"^DD",757.04,757.04,1,9)
@
"^DD",757.04,757.04,1,21,0)
^^2^2^2940902^^
"^DD",757.04,757.04,1,21,1,0)
This field indicates the action to take with the excluded word, exclude
"^DD",757.04,757.04,1,21,2,0)
from (I)ndexing, (L)ook-up or (B)oth indexing and look-up.
"^DD",757.04,757.04,1,"DT")
2950803
"^DD",757.05,757.05,0)
FIELD^^3^4
"^DD",757.05,757.05,0,"DDA")
N
"^DD",757.05,757.05,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",757.05,757.05,0,"IX","AB",757.05,.01)

"^DD",757.05,757.05,0,"IX","AEXP",757.53,.01)

"^DD",757.05,757.05,0,"IX","ALINK",757.05,2)

"^DD",757.05,757.05,0,"IX","B",757.05,.01)

"^DD",757.05,757.05,0,"IX","C",757.05,1)

"^DD",757.05,757.05,0,"NM","REPLACEMENT WORDS")

"^DD",757.05,757.05,.01,0)
WORD^RFX^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>40!($L(X)<2)!'(X?1AN.E) X D REP^LEXERI
"^DD",757.05,757.05,.01,1,0)
^.1
"^DD",757.05,757.05,.01,1,1,0)
757.05^B
"^DD",757.05,757.05,.01,1,1,1)
S ^LEX(757.05,"B",$E(X,1,30),DA)=""
"^DD",757.05,757.05,.01,1,1,2)
K ^LEX(757.05,"B",$E(X,1,30),DA)
"^DD",757.05,757.05,.01,1,1,"%D",0)
^^3^3^2940902^
"^DD",757.05,757.05,.01,1,1,"%D",1,0)
^LEX(757.05,"B",WORD,IEN) - where WORD is the Word (.01) to be replaced during
"^DD",757.05,757.05,.01,1,1,"%D",2,0)
lookup and IEN is the Internal Entry Number in the Replacement Words file
"^DD",757.05,757.05,.01,1,1,"%D",3,0)
#757.05 where the word is located.
"^DD",757.05,757.05,.01,1,2,0)
757.05^AB^MUMPS
"^DD",757.05,757.05,.01,1,2,1)
S ^LEX(757.05,"AB",$E(X,1,40),DA)=""
"^DD",757.05,757.05,.01,1,2,2)
K ^LEX(757.05,"AB",$E(X,1,40),DA)
"^DD",757.05,757.05,.01,1,2,"%D",0)
^^5^5^2940902^^^
"^DD",757.05,757.05,.01,1,2,"%D",1,0)
^LEX(757.05,"AB",WORD,IEN) - where WORD is the Word (.01) to be replace during
"^DD",757.05,757.05,.01,1,2,"%D",2,0)
lookup and IEN is the Internal Entry Number in the Replacement Words file
"^DD",757.05,757.05,.01,1,2,"%D",3,0)
#757.05 where the word is located.  This is similar to the "B" index, but has
"^DD",757.05,757.05,.01,1,2,"%D",4,0)
been extended to 40 characters (Word field .01 length) to speed word parsing,
"^DD",757.05,757.05,.01,1,2,"%D",5,0)
indexing and lookup routines.
"^DD",757.05,757.05,.01,1,2,"DT")
2930608
"^DD",757.05,757.05,.01,3)
Word (to be replaced) must be 2-40 characters in length.
"^DD",757.05,757.05,.01,21,0)
^^3^3^2960812^^^
"^DD",757.05,757.05,.01,21,1,0)
This field contains words which are meant to be replaced (either
"^DD",757.05,757.05,.01,21,2,0)
physically or logically) prior to calling the look-up utility.
"^DD",757.05,757.05,.01,21,3,0)
This is a single word (no spaces, hypens or slashes).
"^DD",757.05,757.05,.01,"DT")
2940817
"^DD",757.05,757.05,1,0)
REPLACEMENT TERM^RFX^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>100!($L(X)<2) X D REPBY^LEXERI
"^DD",757.05,757.05,1,1,0)
^.1
"^DD",757.05,757.05,1,1,1,0)
757.05^C^MUMPS
"^DD",757.05,757.05,1,1,1,1)
S ^LEX(757.05,"C",$E($$UP^XLFSTR(X),1,40),DA)=""
"^DD",757.05,757.05,1,1,1,2)
K ^LEX(757.05,"C",$E($$UP^XLFSTR(X),1,40),DA)
"^DD",757.05,757.05,1,1,1,"%D",0)
^^7^7^2940902^^^
"^DD",757.05,757.05,1,1,1,"%D",1,0)
^LEX(757.05,"C",REP,IEN) - where REP is the uppercase form of the Replacement
"^DD",757.05,757.05,1,1,1,"%D",2,0)
Term (1) to use during word replacements/substitutions and IEN is the Internal
"^DD",757.05,757.05,1,1,1,"%D",3,0)
Entry Number in the Replacement Words file #757.05 where the Replacement Term
"^DD",757.05,757.05,1,1,1,"%D",4,0)
is located.  This index is used extensively in the input transformations for
"^DD",757.05,757.05,1,1,1,"%D",5,0)
both the Excluded Word file #757.04 and the Replacement Term file #757.05
"^DD",757.05,757.05,1,1,1,"%D",6,0)
(i.e., you can not replace word with a word which is to be excluded from
"^DD",757.05,757.05,1,1,1,"%D",7,0)
lookup and you can not exclude a word from lookup which is to be replaced).
"^DD",757.05,757.05,1,1,1,"DT")
2931129
"^DD",757.05,757.05,1,3)
Replacement term must be 2-100 characters in length.
"^DD",757.05,757.05,1,21,0)
^^2^2^2930608^
"^DD",757.05,757.05,1,21,1,0)
This word/multiple word term will either physically or logically replace
"^DD",757.05,757.05,1,21,2,0)
WORD (.01) when it is contained in the user's input.
"^DD",757.05,757.05,1,"DT")
2931129
"^DD",757.05,757.05,2,0)
ACTION^RS^R:REPLACEABLE WORD;L:LINKED WORD;N:NO ACTION TAKEN;^0;3^Q
"^DD",757.05,757.05,2,1,0)
^.1
"^DD",757.05,757.05,2,1,1,0)
757.05^ALINK^MUMPS
"^DD",757.05,757.05,2,1,1,1)
D S^LEXNDX3
"^DD",757.05,757.05,2,1,1,2)
D K^LEXNDX3
"^DD",757.05,757.05,2,1,1,"%D",0)
^^9^9^2940902^^^^
"^DD",757.05,757.05,2,1,1,"%D",1,0)
^LEX(757.05,"ALINK",WORD,EXP) - where WORD is the Internal Entry Number of the
"^DD",757.05,757.05,2,1,1,"%D",2,0)
location of the WORD (.01) in the Replacement Word file #757.05 to link to an
"^DD",757.05,757.05,2,1,1,"%D",3,0)
expression and EXP is the Internal Entry Number of the expression in the
"^DD",757.05,757.05,2,1,1,"%D",4,0)
Expresion file #757.01 which the Word is linked to.  Additionally, the index
"^DD",757.05,757.05,2,1,1,"%D",5,0)
node ^LEX(757.01,"AWRD",WORD,EXP,"LINKED") is set where WORD is the Word (.01)
"^DD",757.05,757.05,2,1,1,"%D",6,0)
in the Replacement Word file #757.05 to be linked to an expression and EXP is
"^DD",757.05,757.05,2,1,1,"%D",7,0)
the Internal Entry Number in the Expression file #757.01 where the expression
"^DD",757.05,757.05,2,1,1,"%D",8,0)
is located.  This creates a keyword linkage between the word and the
"^DD",757.05,757.05,2,1,1,"%D",9,0)
expression.
"^DD",757.05,757.05,2,1,1,"DT")
2930608
"^DD",757.05,757.05,2,9)
@
"^DD",757.05,757.05,2,21,0)
^^4^4^2930608^
"^DD",757.05,757.05,2,21,1,0)
Action indicates whether a WORD is physically (R)eplaced by the
"^DD",757.05,757.05,2,21,2,0)
REPLACEMENT TERM in the user's input, or (L)ogically replaced by linking
"^DD",757.05,757.05,2,21,3,0)
the WORD to each occurrence of the REPLACEMENT TERM which carries the same
"^DD",757.05,757.05,2,21,4,0)
meaning.
"^DD",757.05,757.05,2,"DT")
2930608
"^DD",757.05,757.05,3,0)
LINKAGES^757.53P^^1;0
"^DD",757.05,757.05,3,8.5)
^
"^DD",757.05,757.05,3,9)
^
"^DD",757.05,757.05,3,21,0)
^^8^8^2951013^^^
"^DD",757.05,757.05,3,21,1,0)
This is a series of pointers to expressions to which the WORD (.01) is
"^DD",757.05,757.05,3,21,2,0)
linked to.  When a word like "CANCER" is linked to an expression like
"^DD",757.05,757.05,3,21,3,0)
"CARCINOMA OF THE LUNG", the pointer of the expression is listed here and
"^DD",757.05,757.05,3,21,4,0)
a separate index node is created in the expression file (757.01) at
"^DD",757.05,757.05,3,21,5,0)
^LEX(757.01,"AWRD","CANCER",DA,"LINKED")=""  Subsequent searches for "LUNG
"^DD",757.05,757.05,3,21,6,0)
CANCER" will be able to retrieve "CARCINOMA OF THE LUNG."  During input,
"^DD",757.05,757.05,3,21,7,0)
editing of this multiple field will only occur if ACTION (2) is set to "L"
"^DD",757.05,757.05,3,21,8,0)
(linked words).
"^DD",757.05,757.53,0)
LINKAGES SUB-FIELD^^.01^1
"^DD",757.05,757.53,0,"IX","B",757.53,.01)

"^DD",757.05,757.53,0,"NM","LINKAGES")

"^DD",757.05,757.53,0,"UP")
757.05
"^DD",757.05,757.53,.01,0)
EXPRESSION^P757.01'^LEX(757.01,^0;1^Q
"^DD",757.05,757.53,.01,1,0)
^.1
"^DD",757.05,757.53,.01,1,1,0)
757.53^B
"^DD",757.05,757.53,.01,1,1,1)
S ^LEX(757.05,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",757.05,757.53,.01,1,1,2)
K ^LEX(757.05,DA(1),1,"B",$E(X,1,30),DA)
"^DD",757.05,757.53,.01,1,1,"%D",0)
^^5^5^2940902^^
"^DD",757.05,757.53,.01,1,1,"%D",1,0)
^LEX(757.05,WORD,1,"B",EXP,IEN) - where WORD is the Internal Entry Number in
"^DD",757.05,757.53,.01,1,1,"%D",2,0)
the Replacement Word file #757.05 where the linked Word (.01) is located, EXP
"^DD",757.05,757.53,.01,1,1,"%D",3,0)
is the Internal Entry Number in the Expression file #757.01 where the linked
"^DD",757.05,757.53,.01,1,1,"%D",4,0)
expression is located, and IEN is the Internal Entry Number of the Linkages
"^DD",757.05,757.53,.01,1,1,"%D",5,0)
Sub-file #757.53 where the Word-Expression linkage is located.
"^DD",757.05,757.53,.01,1,2,0)
757.05^AEXP^MUMPS
"^DD",757.05,757.53,.01,1,2,1)
S:+X>1 ^LEX(757.05,"AEXP",X,DA(1))=""
"^DD",757.05,757.53,.01,1,2,2)
K:+X>1 ^LEX(757.05,"AEXP",X,DA(1))
"^DD",757.05,757.53,.01,1,2,"%D",0)
^^5^5^2940902^^
"^DD",757.05,757.53,.01,1,2,"%D",1,0)
^LEX(757.05,"AEXP",EXP,IEN) - where EXP is the Internal Entry Number of the
"^DD",757.05,757.53,.01,1,2,"%D",2,0)
expression in the Expression file #757.01 which has been linked to a Word (.01)
"^DD",757.05,757.53,.01,1,2,"%D",3,0)
and IEN is the Internal Entry Number in the Replacement Word file #757.05 where
"^DD",757.05,757.53,.01,1,2,"%D",4,0)
the Word (1) which has been linked to an expression is located.  This index is
"^DD",757.05,757.53,.01,1,2,"%D",5,0)
created at the file (not sub-file) level.
"^DD",757.05,757.53,.01,1,2,"DT")
2931213
"^DD",757.05,757.53,.01,21,0)
^^2^2^2951013^^
"^DD",757.05,757.53,.01,21,1,0)
This is a pointer to an expression which will use WORD (.01) as a keyword
"^DD",757.05,757.53,.01,21,2,0)
during look-up.
"^DD",757.05,757.53,.01,"DT")
2951013
"^DD",757.06,757.06,0)
FIELD^^12^13
"^DD",757.06,757.06,0,"DDA")
N
"^DD",757.06,757.06,0,"DT")
2950315
"^DD",757.06,757.06,0,"IX","B",757.06,.01)

"^DD",757.06,757.06,0,"NM","UNRESOLVED NARRATIVES")

"^DD",757.06,757.06,.01,0)
NARRATIVE^RF^^0;1^K:$L(X)>100!($L(X)<1)!'(X'?1P.E) X
"^DD",757.06,757.06,.01,1,0)
^.1
"^DD",757.06,757.06,.01,1,1,0)
757.06^B
"^DD",757.06,757.06,.01,1,1,1)
S ^LEX(757.06,"B",$E(X,1,30),DA)=""
"^DD",757.06,757.06,.01,1,1,2)
K ^LEX(757.06,"B",$E(X,1,30),DA)
"^DD",757.06,757.06,.01,1,1,"%D",0)
^^3^3^2940902^
"^DD",757.06,757.06,.01,1,1,"%D",1,0)
^LEX(757.06,"B",NAR,IEN) - where NAR is the Narrative (1) and IEN is the
"^DD",757.06,757.06,.01,1,1,"%D",2,0)
Internal Entry Number in the Unresolved Narrative file #757.06 where the
"^DD",757.06,757.06,.01,1,1,"%D",3,0)
narrative is located.
"^DD",757.06,757.06,.01,3)
Narrative must be 1-100 characters in length.
"^DD",757.06,757.06,.01,21,0)
^^2^2^2950314^^^
"^DD",757.06,757.06,.01,21,1,0)
User input to the Lexicon look-up which could not be resolved 
"^DD",757.06,757.06,.01,21,2,0)
(no entries found or no entry selected).
"^DD",757.06,757.06,.01,"DT")
2930129
"^DD",757.06,757.06,1,0)
DATE-TIME^RF^^0;2^K:$L(X)>14!($L(X)<14)!'(X?7N1"."6N) X
"^DD",757.06,757.06,1,3)
Date-Time (CYYMMDD.HHMMSS) must be 14 characters in length.
"^DD",757.06,757.06,1,21,0)
^^2^2^2930518^
"^DD",757.06,757.06,1,21,1,0)
Date and Time that the unresolved user narrative was added to the file
"^DD",757.06,757.06,1,21,2,0)
(generated by LEXA1).
"^DD",757.06,757.06,1,"DT")
2930518
"^DD",757.06,757.06,2,0)
SEARCH STRING^F^^0;3^K:$L(X)>100!($L(X)<1) X
"^DD",757.06,757.06,2,3)
Search string must be 1-100 characters in length.
"^DD",757.06,757.06,2,21,0)
^^1^1^2950314^^
"^DD",757.06,757.06,2,21,1,0)
This is the actual string used to conduct the search in the Lexicon.
"^DD",757.06,757.06,2,"DT")
2950314
"^DD",757.06,757.06,3,0)
MATCHES^NJ5,0^^0;4^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X
"^DD",757.06,757.06,3,3)
Type a Number between 0 and 99999, 0 Decimal Digits
"^DD",757.06,757.06,3,21,0)
^^3^3^2950314^
"^DD",757.06,757.06,3,21,1,0)
This is the number of matches found during the search when the Unresolved
"^DD",757.06,757.06,3,21,2,0)
Narrative occurred.  It will distinguish a "no match found" condition from a
"^DD",757.06,757.06,3,21,3,0)
"user did select a term" condition.
"^DD",757.06,757.06,3,"DT")
2950314
"^DD",757.06,757.06,4,0)
APPLICATION^F^^1;1^K:$L(X)>63!($L(X)<1) X
"^DD",757.06,757.06,4,3)
Application must be 1-63 characters in length.
"^DD",757.06,757.06,4,21,0)
^^3^3^2950314^
"^DD",757.06,757.06,4,21,1,0)
This is the name of the application in use (if known) when the Unresolved
"^DD",757.06,757.06,4,21,2,0)
Narrative was added.  The application name may assist in the review process
"^DD",757.06,757.06,4,21,3,0)
when determining the disposition of the narrative (i.e., Problem List vs Lab).
"^DD",757.06,757.06,4,"DT")
2950314
"^DD",757.06,757.06,5,0)
SERVICE^F^^1;2^K:$L(X)>63!($L(X)<1) X
"^DD",757.06,757.06,5,3)
Service must be 1-63 characters in length.
"^DD",757.06,757.06,5,21,0)
^^3^3^2950314^
"^DD",757.06,757.06,5,21,1,0)
This is the service of the user who added the Unresolved Narrative.  The
"^DD",757.06,757.06,5,21,2,0)
service may assist in the review process when determining the disposition of
"^DD",757.06,757.06,5,21,3,0)
this narrative (i.e., Nursing vs Social Work).
"^DD",757.06,757.06,5,"DT")
2950314
"^DD",757.06,757.06,6,0)
LOCATION^F^^1;3^K:$L(X)>63!($L(X)<1) X
"^DD",757.06,757.06,6,3)
Location must be 1-63 characters in length.
"^DD",757.06,757.06,6,21,0)
^^3^3^2950314^
"^DD",757.06,757.06,6,21,1,0)
This is the hospital location of the user who added the Narrative.  The user
"^DD",757.06,757.06,6,21,2,0)
location may assist in the review process when determining the disposition of
"^DD",757.06,757.06,6,21,3,0)
this narrative (i.e., lab expression vs clinic).
"^DD",757.06,757.06,6,"DT")
2950314
"^DD",757.06,757.06,7,0)
FILE^F^^2;1^K:$L(X)>7!($L(X)<1) X
"^DD",757.06,757.06,7,3)
File must be 1-7 characters in length.
"^DD",757.06,757.06,7,21,0)
^^2^2^2950314^^
"^DD",757.06,757.06,7,21,1,0)
This is the file number where the search took place.  It will assist in
"^DD",757.06,757.06,7,21,2,0)
recreating the failed search which resulted in an Unresolved Narrative.
"^DD",757.06,757.06,7,"DT")
2950314
"^DD",757.06,757.06,8,0)
INDEX^F^^2;2^K:$L(X)>8!($L(X)<1) X
"^DD",757.06,757.06,8,3)
Index must be 1-8 characters in length.
"^DD",757.06,757.06,8,21,0)
^^2^2^2950314^^
"^DD",757.06,757.06,8,21,1,0)
This is the name of the index used during the search.  It will assist in
"^DD",757.06,757.06,8,21,2,0)
recreating the failed search which resulted in an Unresolved Narrative.
"^DD",757.06,757.06,8,"DT")
2950314
"^DD",757.06,757.06,9,0)
SHORTCUTS^F^^2;3^K:$L(X)>63!($L(X)<1) X
"^DD",757.06,757.06,9,3)
Shortcuts must be 1-63 characters in length.
"^DD",757.06,757.06,9,21,0)
^^3^3^2950314^
"^DD",757.06,757.06,9,21,1,0)
This is the name of the Shortcut Context used (if any) during the search.  It
"^DD",757.06,757.06,9,21,2,0)
will assist in recreating the failed search which resulted in an Unresolved
"^DD",757.06,757.06,9,21,3,0)
Narrative.
"^DD",757.06,757.06,9,"DT")
2950314
"^DD",757.06,757.06,10,0)
SCREEN^K^^3;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",757.06,757.06,10,3)
This is Standard MUMPS code.
"^DD",757.06,757.06,10,9)
@
"^DD",757.06,757.06,10,21,0)
^^2^2^2950314^
"^DD",757.06,757.06,10,21,1,0)
This is the screen used (if any) during the search.  It will assist in
"^DD",757.06,757.06,10,21,2,0)
recreating the failed search which resulted in an Unresolved Narrative.
"^DD",757.06,757.06,10,"DT")
2950314
"^DD",757.06,757.06,11,0)
EXPRESSION^NJ9,0^^4;1^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",757.06,757.06,11,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",757.06,757.06,11,21,0)
^^4^4^2950315^^^
"^DD",757.06,757.06,11,21,1,0)
This field is populated when an application discovers a problem with an
"^DD",757.06,757.06,11,21,2,0)
expression in the expression file, and returns a valid expression as an
"^DD",757.06,757.06,11,21,3,0)
Unresolved Narrative with a comment regarding the problem.  Note, the COMMENT
"^DD",757.06,757.06,11,21,4,0)
field will also be populated.
"^DD",757.06,757.06,11,"DT")
2950315
"^DD",757.06,757.06,12,0)
COMMENT^F^^4;2^K:$L(X)>200!($L(X)<1) X
"^DD",757.06,757.06,12,3)
Comment must be 1-200 characters in length.
"^DD",757.06,757.06,12,21,0)
^^4^4^2950315^^
"^DD",757.06,757.06,12,21,1,0)
This field is populated when an application discovers a problem with an
"^DD",757.06,757.06,12,21,2,0)
expression in the expression file (757.01), and returns a valid expression as
"^DD",757.06,757.06,12,21,3,0)
an Unresolved Narrative.  The comment should briefly state the problem (i.e.,
"^DD",757.06,757.06,12,21,4,0)
Codable diagnosis maps to ICD 799.9).
"^DD",757.06,757.06,12,"DT")
2950315
"^DD",757.1,757.1,0)
FIELD^^2^3
"^DD",757.1,757.1,0,"DDA")
N
"^DD",757.1,757.1,0,"DT")
2930212
"^DD",757.1,757.1,0,"ID",1)
S %I=Y,Y=$S('$D(^(0)):"",$D(^LEX(757.11,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(757.11,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",757.1,757.1,0,"ID",2)
S %I=Y,Y=$S('$D(^(0)):"",$D(^LEX(757.12,+$P(^(0),U,3),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(757.12,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",757.1,757.1,0,"IX","AMCC",757.1,1)

"^DD",757.1,757.1,0,"IX","AMCT",757.1,2)

"^DD",757.1,757.1,0,"IX","ASTT",757.1,2)

"^DD",757.1,757.1,0,"IX","B",757.1,.01)

"^DD",757.1,757.1,0,"NM","SEMANTIC MAP")

"^DD",757.1,757.1,.01,0)
MAJOR CONCEPT^RP757'^LEX(757,^0;1^Q
"^DD",757.1,757.1,.01,.1)
MC
"^DD",757.1,757.1,.01,1,0)
^.1
"^DD",757.1,757.1,.01,1,1,0)
757.1^B
"^DD",757.1,757.1,.01,1,1,1)
S ^LEX(757.1,"B",$E(X,1,30),DA)=""
"^DD",757.1,757.1,.01,1,1,2)
K ^LEX(757.1,"B",$E(X,1,30),DA)
"^DD",757.1,757.1,.01,1,1,"%D",0)
^^5^5^2940902^^
"^DD",757.1,757.1,.01,1,1,"%D",1,0)
^LEX(757.1,"B",MC,IEN) - where MC is the Internal Entry Number in the Major
"^DD",757.1,757.1,.01,1,1,"%D",2,0)
Concept Map file #757 where the Major Concept is located and IEN is the
"^DD",757.1,757.1,.01,1,1,"%D",3,0)
Internal Entry Number of the Semantic Map file #757.1 where the semantic
"^DD",757.1,757.1,.01,1,1,"%D",4,0)
classification of the Major Concept is located.  This index is used to obtain
"^DD",757.1,757.1,.01,1,1,"%D",5,0)
all of the semantic classes and type to which a Major Concept belongs.
"^DD",757.1,757.1,.01,3)

"^DD",757.1,757.1,.01,21,0)
^^4^4^2940302^
"^DD",757.1,757.1,.01,21,1,0)
This is a pointer to the Major Concept, linking the semantic
"^DD",757.1,757.1,.01,21,2,0)
classification with a concept.  Only Major Concepts are semantically
"^DD",757.1,757.1,.01,21,3,0)
classified.   Synonyms and Lexical Variants adopt the semantic
"^DD",757.1,757.1,.01,21,4,0)
classification of the parent Major Concept.
"^DD",757.1,757.1,.01,"DT")
2960807
"^DD",757.1,757.1,1,0)
SEMANTIC CLASS^RP757.11'^LEX(757.11,^0;2^Q
"^DD",757.1,757.1,1,1,0)
^.1^^-1
"^DD",757.1,757.1,1,1,2,0)
757.1^AMCC^MUMPS
"^DD",757.1,757.1,1,1,2,1)
S ^LEX(757.1,"AMCC",$P(^LEX(757.1,DA,0),U,1),$P(^LEX(757.11,X,0),U,1),DA)=""
"^DD",757.1,757.1,1,1,2,2)
K ^LEX(757.1,"AMCC",$P(^LEX(757.1,DA,0),U,1),$P(^LEX(757.11,X,0),U,1),DA)
"^DD",757.1,757.1,1,1,2,"%D",0)
^^6^6^2940902^^^
"^DD",757.1,757.1,1,1,2,"%D",1,0)
^LEX(757.1,"AMCC",MC,SC,IEN) - where MC is the Internal Entry Number in the
"^DD",757.1,757.1,1,1,2,"%D",2,0)
Major Concept Map file #757 of the Major Concept, SC is the mnemonic for the
"^DD",757.1,757.1,1,1,2,"%D",3,0)
Semantic Class (i.e., ORG organism, PRO procedures) to which the Major Concept
"^DD",757.1,757.1,1,1,2,"%D",4,0)
belongs and IEN is the Internal Entry Nunber in the Semantic Map file #757.1
"^DD",757.1,757.1,1,1,2,"%D",5,0)
where the Major Concept/Semantic Class combination is located.  This index is
"^DD",757.1,757.1,1,1,2,"%D",6,0)
used extensively for filtered searches based on semantic classes and types.
"^DD",757.1,757.1,1,1,2,"DT")
2930520
"^DD",757.1,757.1,1,3)

"^DD",757.1,757.1,1,21,0)
^^3^3^2940902^^
"^DD",757.1,757.1,1,21,1,0)
This is a pointer to the general semantic class defined in the Semantic Class
"^DD",757.1,757.1,1,21,2,0)
file #757.11 to which the Major Concept belongs.  An example of a semantic
"^DD",757.1,757.1,1,21,3,0)
class is ORG for concepts in the general class of Organisms.
"^DD",757.1,757.1,1,"DT")
2960807
"^DD",757.1,757.1,2,0)
SEMANTIC TYPE^RP757.12'^LEX(757.12,^0;3^Q
"^DD",757.1,757.1,2,1,0)
^.1
"^DD",757.1,757.1,2,1,1,0)
757.1^ASTT^MUMPS
"^DD",757.1,757.1,2,1,1,1)
S ^LEX(757.1,"ASTT",X,$P(^LEX(757.1,DA,0),U,1),DA)=""
"^DD",757.1,757.1,2,1,1,2)
K ^LEX(757.1,"ASTT",X,$P(^LEX(757.1,DA,0),U,1),DA)
"^DD",757.1,757.1,2,1,1,"%D",0)
^^7^7^2940902^^^^
"^DD",757.1,757.1,2,1,1,"%D",1,0)
^LEX(757.1,"ASTT",ST,MC,IEN) - where ST is the Internal Entry Number in the
"^DD",757.1,757.1,2,1,1,"%D",2,0)
Semantic Types file #757.12 where the semantic type of the concept is located,
"^DD",757.1,757.1,2,1,1,"%D",3,0)
MC is the Internal Entry Number in the Major Concept Map file #757 of the Major
"^DD",757.1,757.1,2,1,1,"%D",4,0)
Concept belonging the the semantic type, and IEN is the Internal Entry Number
"^DD",757.1,757.1,2,1,1,"%D",5,0)
in the Semantic Map file #757.1 where the Semantic Type/Major Concept
"^DD",757.1,757.1,2,1,1,"%D",6,0)
combination is located.  This index is used extensively for filtered searches
"^DD",757.1,757.1,2,1,1,"%D",7,0)
based on semantic classes and types.
"^DD",757.1,757.1,2,1,1,"DT")
2930520
"^DD",757.1,757.1,2,1,2,0)
757.1^AMCT^MUMPS
"^DD",757.1,757.1,2,1,2,1)
S ^LEX(757.1,"AMCT",$P(^LEX(757.1,DA,0),U,1),X,DA)=""
"^DD",757.1,757.1,2,1,2,2)
K ^LEX(757.1,"AMCT",$P(^LEX(757.1,DA,0),U,1),X,DA)
"^DD",757.1,757.1,2,1,2,"%D",0)
^^7^7^2940902^^
"^DD",757.1,757.1,2,1,2,"%D",1,0)
^LEX(757.1,"AMCT",MC,ST,IEN) - where MC is the Internal Entry Number in the
"^DD",757.1,757.1,2,1,2,"%D",2,0)
Major Concept Map file #757 of the Major Concept, ST is the Internal Entry
"^DD",757.1,757.1,2,1,2,"%D",3,0)
Number in the Semantic Types file #757.12 where the semantic type of the
"^DD",757.1,757.1,2,1,2,"%D",4,0)
concept is located, and IEN is the Internal Entry Number in the Semantic Map
"^DD",757.1,757.1,2,1,2,"%D",5,0)
file #757.1 where the Major Concept/Semantic Type combination is located.  This
"^DD",757.1,757.1,2,1,2,"%D",6,0)
index is used extensively for filtered searches based on semantic classes and
"^DD",757.1,757.1,2,1,2,"%D",7,0)
types.
"^DD",757.1,757.1,2,1,2,"DT")
2930520
"^DD",757.1,757.1,2,21,0)
^^5^5^2940902^^
"^DD",757.1,757.1,2,21,1,0)
This is a pointer to the specific semantic type defined in the Semantic Types
"^DD",757.1,757.1,2,21,2,0)
file #757.12 to which the Major Concept belongs.  Using the general semantic 
"^DD",757.1,757.1,2,21,3,0)
class ORG (Organism), examples of specific semantic types would be plants, 
"^DD",757.1,757.1,2,21,4,0)
alga, fungus, virus, rickettsia, bacterium, animal, intertebrate, vertebrate,
"^DD",757.1,757.1,2,21,5,0)
amphibian, bird, fish, reptile, mammal, human, and organism.
"^DD",757.1,757.1,2,"DT")
2960807
"^DD",757.11,757.11,0)
FIELD^^3^4
"^DD",757.11,757.11,0,"DDA")
N
"^DD",757.11,757.11,0,"DT")
2930504
"^DD",757.11,757.11,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",757.11,757.11,0,"IX","B",757.11,.01)

"^DD",757.11,757.11,0,"NM","SEMANTIC CLASSES")

"^DD",757.11,757.11,0,"PT",757.1,1)

"^DD",757.11,757.11,.01,0)
SEMANTIC CLASS^RFI^^0;1^K:$L(X)>3!($L(X)<3)!'(X?3U) X
"^DD",757.11,757.11,.01,1,0)
^.1
"^DD",757.11,757.11,.01,1,1,0)
757.11^B
"^DD",757.11,757.11,.01,1,1,1)
S ^LEX(757.11,"B",$E(X,1,30),DA)=""
"^DD",757.11,757.11,.01,1,1,2)
K ^LEX(757.11,"B",$E(X,1,30),DA)
"^DD",757.11,757.11,.01,1,1,"%D",0)
^^3^3^2940902^
"^DD",757.11,757.11,.01,1,1,"%D",1,0)
^LEX(757.11,"B",SC,IEN) - where SC is the three character mnemonic for a
"^DD",757.11,757.11,.01,1,1,"%D",2,0)
Semantic Class (.01) and IEN is the Internal Entry Number in the Semantic Class
"^DD",757.11,757.11,.01,1,1,"%D",3,0)
file #757.11 where the semantic class is located.
"^DD",757.11,757.11,.01,3)
Semantic Class must be 3 characters in length.
"^DD",757.11,757.11,.01,21,0)
^^2^2^2940902^^
"^DD",757.11,757.11,.01,21,1,0)
Three character (uppercase) mnemonic representing a semantical class.  For
"^DD",757.11,757.11,.01,21,2,0)
example, ORG - Organism, PRO - Procedures, ACT - Activities, etc.
"^DD",757.11,757.11,.01,"DT")
2931124
"^DD",757.11,757.11,1,0)
DESCRIPTIVE TITLE^RFI^^0;2^K:$L(X)>40!($L(X)<1)!'(X?1U.E) X
"^DD",757.11,757.11,1,3)
Title must be 1-40 characters in length.
"^DD",757.11,757.11,1,21,0)
^^2^2^2930518^
"^DD",757.11,757.11,1,21,1,0)
Full title (textual description, mixed case) representing a semantical
"^DD",757.11,757.11,1,21,2,0)
class.
"^DD",757.11,757.11,1,"DT")
2931124
"^DD",757.11,757.11,2,0)
CLASS CONTENTS^757.112^^1;0
"^DD",757.11,757.11,2,21,0)
^^2^2^2930518^
"^DD",757.11,757.11,2,21,1,0)
Textual description of the semantical class containing (as a minimum) the
"^DD",757.11,757.11,2,21,2,0)
semantical types included within the semantical class.
"^DD",757.11,757.11,3,0)
ASSOCIATED CODING SYSTEMS^757.113^^2;0
"^DD",757.11,757.11,3,21,0)
^^2^2^2930518^
"^DD",757.11,757.11,3,21,1,0)
This multiple field contains all of the classification systems (i.e., ICD,
"^DD",757.11,757.11,3,21,2,0)
CPT, DSM) which have terms included in this semantical class.
"^DD",757.11,757.112,0)
CLASS CONTENTS SUB-FIELD^^.01^1
"^DD",757.11,757.112,0,"DT")
2930210
"^DD",757.11,757.112,0,"NM","CLASS CONTENTS")

"^DD",757.11,757.112,0,"UP")
757.11
"^DD",757.11,757.112,.01,0)
CLASS CONTENTS^W^^0;1^Q
"^DD",757.11,757.112,.01,"DT")
2930210
"^DD",757.11,757.113,0)
ASSOCIATED CODING SYSTEMS SUB-FIELD^^.01^1
"^DD",757.11,757.113,0,"DT")
2930216
"^DD",757.11,757.113,0,"IX","B",757.113,.01)

"^DD",757.11,757.113,0,"NM","ASSOCIATED CODING SYSTEMS")

"^DD",757.11,757.113,0,"UP")
757.11
"^DD",757.11,757.113,.01,0)
ASSOCIATED CODING SYSTEMS^MFI^^0;1^K:$L(X)>20!($L(X)<2) X
"^DD",757.11,757.113,.01,1,0)
^.1
"^DD",757.11,757.113,.01,1,1,0)
757.113^B
"^DD",757.11,757.113,.01,1,1,1)
S ^LEX(757.11,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",757.11,757.113,.01,1,1,2)
K ^LEX(757.11,DA(1),2,"B",$E(X,1,30),DA)
"^DD",757.11,757.113,.01,1,1,"%D",0)
^^5^5^2940902^^
"^DD",757.11,757.113,.01,1,1,"%D",1,0)
^LEX(757.01,SC,2,"B",SYS,IEN) - where SC is the Internal Entry Number in the
"^DD",757.11,757.113,.01,1,1,"%D",2,0)
Semantic Class file #757.11 where the Semantic Class (.01) is located, SYS is
"^DD",757.11,757.113,.01,1,1,"%D",3,0)
the Associated Coding System belonging to the Semantic Class, and IEN is the
"^DD",757.11,757.113,.01,1,1,"%D",4,0)
Internal Entry Number of the Associated Coding System Sub-file #757.113 where
"^DD",757.11,757.113,.01,1,1,"%D",5,0)
the Associated Coding System (.01) is located.
"^DD",757.11,757.113,.01,3)
Coding System must be 2-20 characters in length.
"^DD",757.11,757.113,.01,"DT")
2950126
"^DD",757.12,757.12,0)
FIELD^^3^4
"^DD",757.12,757.12,0,"DDA")
N
"^DD",757.12,757.12,0,"DT")
2930216
"^DD",757.12,757.12,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",757.12,757.12,0,"IX","B",757.12,.01)

"^DD",757.12,757.12,0,"IX","C",757.12,2)

"^DD",757.12,757.12,0,"IX","D",757.12,1)

"^DD",757.12,757.12,0,"IX","E",757.12,1)

"^DD",757.12,757.12,0,"NM","SEMANTIC TYPES")

"^DD",757.12,757.12,0,"PT",757.1,2)

"^DD",757.12,757.12,.01,0)
UNIQUE IDENTIFIER^RFI^^0;1^K:$L(X)>4!($L(X)<4)!'(X?1"T"3N) X
"^DD",757.12,757.12,.01,.1)

"^DD",757.12,757.12,.01,1,0)
^.1
"^DD",757.12,757.12,.01,1,1,0)
757.12^B
"^DD",757.12,757.12,.01,1,1,1)
S ^LEX(757.12,"B",$E(X,1,30),DA)=""
"^DD",757.12,757.12,.01,1,1,2)
K ^LEX(757.12,"B",$E(X,1,30),DA)
"^DD",757.12,757.12,.01,1,1,"%D",0)
^^3^3^2960812^^
"^DD",757.12,757.12,.01,1,1,"%D",1,0)
^LEX(757.12,"B",TUI,IEN) - where TUI is the Semantic Type Unique Identifier
"^DD",757.12,757.12,.01,1,1,"%D",2,0)
and IEN is the Internal Entry Number of the Semantic Type file #757.12 
"^DD",757.12,757.12,.01,1,1,"%D",3,0)
where the Type Unique Identifier is located.
"^DD",757.12,757.12,.01,3)
Unique identifier must be 4 characters in length, T followed by 3 numerics.
"^DD",757.12,757.12,.01,21,0)
^^1^1^2960812^^^^
"^DD",757.12,757.12,.01,21,1,0)
The unique identifier is used for file maintenance.
"^DD",757.12,757.12,.01,"DT")
2950316
"^DD",757.12,757.12,1,0)
DESCRIPTIVE TITLE^RFI^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>200!($L(X)<2) X
"^DD",757.12,757.12,1,1,0)
^.1
"^DD",757.12,757.12,1,1,1,0)
757.12^D
"^DD",757.12,757.12,1,1,1,1)
S ^LEX(757.12,"D",$E(X,1,30),DA)=""
"^DD",757.12,757.12,1,1,1,2)
K ^LEX(757.12,"D",$E(X,1,30),DA)
"^DD",757.12,757.12,1,1,1,"%D",0)
^^3^3^2950914^^^
"^DD",757.12,757.12,1,1,1,"%D",1,0)
^LEX(757.12,"D",DT,IEN) - where DT is the Descriptive Title (1) of a semantic
"^DD",757.12,757.12,1,1,1,"%D",2,0)
type and IEN is the Internal Entry Number in the Semantic Types file #757.12
"^DD",757.12,757.12,1,1,1,"%D",3,0)
where the descriptive title of the semantic type is located.
"^DD",757.12,757.12,1,1,1,"DT")
2930517
"^DD",757.12,757.12,1,1,2,0)
757.12^E^MUMPS
"^DD",757.12,757.12,1,1,2,1)
S ^LEX(757.12,"E",$$UP^XLFSTR($E(X,1,30)),DA)=""
"^DD",757.12,757.12,1,1,2,2)
K ^LEX(757.12,"E",$$UP^XLFSTR($E(X,1,30)),DA)
"^DD",757.12,757.12,1,1,2,"%D",0)
^^3^3^2950914^
"^DD",757.12,757.12,1,1,2,"%D",1,0)
^LEX(757.12,"E",UDT,IEN) - where UDT is the Uppercase form of the Descriptive
"^DD",757.12,757.12,1,1,2,"%D",2,0)
Title (1) of the semantic type and IEN is the Internal Entry Number in the
"^DD",757.12,757.12,1,1,2,"%D",3,0)
Semantic Types file #757.12 where the descriptive title is located.
"^DD",757.12,757.12,1,1,2,"DT")
2950914
"^DD",757.12,757.12,1,3)
Descriptive Title must be 2-200 characters in length.
"^DD",757.12,757.12,1,21,0)
^^2^2^2930518^
"^DD",757.12,757.12,1,21,1,0)
Full title (textual description, mixed case) representing a semantical
"^DD",757.12,757.12,1,21,2,0)
type.
"^DD",757.12,757.12,1,"DT")
2950914
"^DD",757.12,757.12,2,0)
CLASS^RFXI^^0;3^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>3!($L(X)<3)!'(X?3U)!('$D(^LEX(757.11,"B",X))) X
"^DD",757.12,757.12,2,1,0)
^.1
"^DD",757.12,757.12,2,1,1,0)
757.12^C
"^DD",757.12,757.12,2,1,1,1)
S ^LEX(757.12,"C",$E(X,1,30),DA)=""
"^DD",757.12,757.12,2,1,1,2)
K ^LEX(757.12,"C",$E(X,1,30),DA)
"^DD",757.12,757.12,2,1,1,"%D",0)
^^3^3^2940902^^
"^DD",757.12,757.12,2,1,1,"%D",1,0)
^LEX(757.12,"C",SC,IEN) - where SC is a 3 character mnemonic representing a
"^DD",757.12,757.12,2,1,1,"%D",2,0)
semantic class to which the semantic type belongs and IEN is the Internal Entry
"^DD",757.12,757.12,2,1,1,"%D",3,0)
Number of the Semantic Type file #757.12 where the semantic class is located.
"^DD",757.12,757.12,2,1,1,"DT")
2930212
"^DD",757.12,757.12,2,3)
Class must be 3 UPPERCASE characters.
"^DD",757.12,757.12,2,21,0)
^^2^2^2931126^^^
"^DD",757.12,757.12,2,21,1,0)
Three character mnemonic representing the semantical class for which this
"^DD",757.12,757.12,2,21,2,0)
semantical type belongs.
"^DD",757.12,757.12,2,"DT")
2931124
"^DD",757.12,757.12,3,0)
ASSOCIATED CODING SYSTEMS^757.123^^1;0
"^DD",757.12,757.12,3,21,0)
^^2^2^2930518^
"^DD",757.12,757.12,3,21,1,0)
This multiple field contains all of the classification systems (i.e., ICD,
"^DD",757.12,757.12,3,21,2,0)
CPT, DSM) which have terms included in this semantical type.
"^DD",757.12,757.123,0)
ASSOCIATED CODING SYSTEMS SUB-FIELD^^.01^1
"^DD",757.12,757.123,0,"DT")
2930216
"^DD",757.12,757.123,0,"IX","B",757.123,.01)

"^DD",757.12,757.123,0,"NM","ASSOCIATED CODING SYSTEMS")

"^DD",757.12,757.123,0,"UP")
757.12
"^DD",757.12,757.123,.01,0)
ASSOCIATED CODING SYSTEMS^MF^^0;1^K:$L(X)>20!($L(X)<2) X
"^DD",757.12,757.123,.01,1,0)
^.1
"^DD",757.12,757.123,.01,1,1,0)
757.123^B
"^DD",757.12,757.123,.01,1,1,1)
S ^LEX(757.12,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",757.12,757.123,.01,1,1,2)
K ^LEX(757.12,DA(1),1,"B",$E(X,1,30),DA)
"^DD",757.12,757.123,.01,1,1,"%D",0)
^^5^5^2940902^
"^DD",757.12,757.123,.01,1,1,"%D",1,0)
^LEX(757.12,ST,1,"B",SYS,IEN) - where ST is the Internal Entry Number in the
"^DD",757.12,757.123,.01,1,1,"%D",2,0)
Semantic Types file #757.12 where the Semantic Type is located, SYS is the
"^DD",757.12,757.123,.01,1,1,"%D",3,0)
Associated Coding System belonging to the Semantic Type, and IEN is the
"^DD",757.12,757.123,.01,1,1,"%D",4,0)
Internal Entry Number of the Associated Coding System Sub-file #757.123 where
"^DD",757.12,757.123,.01,1,1,"%D",5,0)
the Associated Coding System (.01) is located.
"^DD",757.12,757.123,.01,3)
Coding System must be 2-20 characters in length.
"^DD",757.12,757.123,.01,"DT")
2950126
"^DD",757.2,757.2,0)
FIELD^^200^20
"^DD",757.2,757.2,0,"DDA")
N
"^DD",757.2,757.2,0,"DT")
2951102
"^DD",757.2,757.2,0,"IX","AA",757.2,1)

"^DD",757.2,757.2,0,"IX","AB",757.2,8)

"^DD",757.2,757.2,0,"IX","ADEF",757.2,13)

"^DD",757.2,757.2,0,"IX","AN",757.2,14)

"^DD",757.2,757.2,0,"IX","APPS",757.2,13)

"^DD",757.2,757.2,0,"IX","AUD",757.201,.01)

"^DD",757.2,757.2,0,"IX","B",757.2,.01)

"^DD",757.2,757.2,0,"IX","C",757.2,.01)

"^DD",757.2,757.2,0,"IX","D",757.2,.01)

"^DD",757.2,757.2,0,"NM","SUBSET DEFINITIONS")

"^DD",757.2,757.2,0,"PT",757.21,1)

"^DD",757.2,757.2,.01,0)
NAME^RF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>35!($L(X)<3)!'(X'?1P.E) X
"^DD",757.2,757.2,.01,.1)
DESCRIPTIVE TITLE
"^DD",757.2,757.2,.01,1,0)
^.1
"^DD",757.2,757.2,.01,1,1,0)
757.2^B
"^DD",757.2,757.2,.01,1,1,1)
S ^LEXT(757.2,"B",$E(X,1,30),DA)=""
"^DD",757.2,757.2,.01,1,1,2)
K ^LEXT(757.2,"B",$E(X,1,30),DA)
"^DD",757.2,757.2,.01,1,1,"%D",0)
^^3^3^2940902^^
"^DD",757.2,757.2,.01,1,1,"%D",1,0)
^LEXT(757.2,"B",NAME,IEN) - where NAME is the subset Name (.01) and IEN is the
"^DD",757.2,757.2,.01,1,1,"%D",2,0)
Internal Entry Number of the Subset Definition file #757.02 where the subset
"^DD",757.2,757.2,.01,1,1,"%D",3,0)
name is located.
"^DD",757.2,757.2,.01,1,2,0)
757.2^C^MUMPS
"^DD",757.2,757.2,.01,1,2,1)
S ^LEXT(757.2,"C",$E($$UP^XLFSTR(X),1,63),DA)=""
"^DD",757.2,757.2,.01,1,2,2)
K ^LEXT(757.2,"C",$E($$UP^XLFSTR(X),1,63),DA)
"^DD",757.2,757.2,.01,1,2,"%D",0)
^^3^3^2940902^^
"^DD",757.2,757.2,.01,1,2,"%D",1,0)
^LEXT(757.2,"C",NAME,IEN) - where NAME is an extended 63 character uppercase
"^DD",757.2,757.2,.01,1,2,"%D",2,0)
subset Name (.01) and IEN is the Internal Entry Number of the Subset Definition
"^DD",757.2,757.2,.01,1,2,"%D",3,0)
file #757.2 where the subset name is located.
"^DD",757.2,757.2,.01,1,2,"DT")
2940204
"^DD",757.2,757.2,.01,1,3,0)
757.2^D^MUMPS
"^DD",757.2,757.2,.01,1,3,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^LEXT(757.2,"D",I,DA)="",^LEXT(757.2,"D",$$UP^XLFSTR(I),DA)="",^LEXT(757.2,"D",$$LOW^XLFSTR(I),DA)=""
"^DD",757.2,757.2,.01,1,3,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^LEXT(757.2,"D",I,DA),^LEXT(757.2,"D",$$UP^XLFSTR(I),DA),^LEXT(757.2,"D",$$LOW^XLFSTR(I),DA)
"^DD",757.2,757.2,.01,1,3,"%D",0)
^^3^3^2960724^^
"^DD",757.2,757.2,.01,1,3,"%D",1,0)
^LEXT(757.2,"D",WORD,IEN) - This is a word index on the Subset name
"^DD",757.2,757.2,.01,1,3,"%D",2,0)
where WORD is a single uppercase/lowercase word parsed from the name
"^DD",757.2,757.2,.01,1,3,"%D",3,0)
and IEN is the Internal Entry Number where this word is located.
"^DD",757.2,757.2,.01,1,3,"DT")
2960724
"^DD",757.2,757.2,.01,3)
Descriptive title must be 3-35 characters in length.
"^DD",757.2,757.2,.01,21,0)
^^1^1^2940902^^^^
"^DD",757.2,757.2,.01,21,1,0)
Vocabulary subset name (i.e., "Nursing", "Social Work").
"^DD",757.2,757.2,.01,"DT")
2960724
"^DD",757.2,757.2,1,0)
SHORT TITLE^F^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>3!($L(X)<3)!'(X?3U) X
"^DD",757.2,757.2,1,1,0)
^.1
"^DD",757.2,757.2,1,1,1,0)
757.2^AA
"^DD",757.2,757.2,1,1,1,1)
S ^LEXT(757.2,"AA",$E(X,1,30),DA)=""
"^DD",757.2,757.2,1,1,1,2)
K ^LEXT(757.2,"AA",$E(X,1,30),DA)
"^DD",757.2,757.2,1,1,1,"%D",0)
^^5^5^2940902^^
"^DD",757.2,757.2,1,1,1,"%D",1,0)
^LEXT(757.2,"AA",ST,IEN) - where ST is the Short Title (1) of a subset and IEN
"^DD",757.2,757.2,1,1,1,"%D",2,0)
is the Internal Entry Number in the Subset Definition file #757.2 where the
"^DD",757.2,757.2,1,1,1,"%D",3,0)
Short Title is located.  The Short Title when when appended with a leading "A"
"^DD",757.2,757.2,1,1,1,"%D",4,0)
becomes the name of the index to use during look-up (i.e., NUR becomes "ANUR" 
"^DD",757.2,757.2,1,1,1,"%D",5,0)
for the Nursing subset index).
"^DD",757.2,757.2,1,1,1,"DT")
2940519
"^DD",757.2,757.2,1,3)
Short Title (index mnemonic) must be 3 characters in length.
"^DD",757.2,757.2,1,21,0)
^^3^3^2960812^^^^
"^DD",757.2,757.2,1,21,1,0)
Three character uppercase mnemonic representing the vocabulary subset.
"^DD",757.2,757.2,1,21,2,0)
This short title, when appended with the letter "A" (i.e. "A"_"NUR" to
"^DD",757.2,757.2,1,21,3,0)
"ANUR") becomes the name of the index to be used by the look-up utility.
"^DD",757.2,757.2,1,"DT")
2960425
"^DD",757.2,757.2,2,0)
GLOBAL REFERENCE^RF^^1;2^K:$L(X)>40!($L(X)<4) X
"^DD",757.2,757.2,2,3)
Global Reference (less ^) must be 4-40 characters in length, i.e., LEX(757,
"^DD",757.2,757.2,2,21,0)
^^1^1^2940902^^^^
"^DD",757.2,757.2,2,21,1,0)
Global root of the file containing the vocabulary subset.
"^DD",757.2,757.2,2,"DT")
2960401
"^DD",757.2,757.2,3,0)
HELP ROUTINE ENTRY POINT^RF^^2;1^K:$L(X)>8!($L(X)<1) X
"^DD",757.2,757.2,3,3)
Help Routine Entry Point must be 1-8 characters in length, i.e., XTLK
"^DD",757.2,757.2,3,21,0)
^^3^3^2940902^^
"^DD",757.2,757.2,3,21,1,0)
Contains the help routine's entry point (provided a separate help routine
"^DD",757.2,757.2,3,21,2,0)
has been written to support the vocabulary subset and the entry point of
"^DD",757.2,757.2,3,21,3,0)
this routine is other than the first line).
"^DD",757.2,757.2,3,"DT")
2960425
"^DD",757.2,757.2,4,0)
HELP ROUTINE^RF^^2;2^K:$L(X)>8!($L(X)<3) X
"^DD",757.2,757.2,4,3)
Help Routine must be 3-8 characters in length, i.e., LEXHLP
"^DD",757.2,757.2,4,21,0)
^^2^2^2960812^^^^
"^DD",757.2,757.2,4,21,1,0)
Contains the name of the help routine (provided a separate help routine
"^DD",757.2,757.2,4,21,2,0)
was written).  This help routine will be used by the look-up utility.
"^DD",757.2,757.2,4,"DT")
2960401
"^DD",757.2,757.2,5,0)
DISPLAY ROUTINE ENTRY POINT^RF^^3;1^K:$L(X)>8!($L(X)<1) X
"^DD",757.2,757.2,5,3)
Display Routine Entry Point must be 1-8 characters in length, i.e., XTLK
"^DD",757.2,757.2,5,21,0)
^^3^3^2940902^^
"^DD",757.2,757.2,5,21,1,0)
Contains the display routine's entry point (provided a separate display
"^DD",757.2,757.2,5,21,2,0)
routine has been written to support the vocabulary subset and the entry
"^DD",757.2,757.2,5,21,3,0)
point of this routine is other than the first line).
"^DD",757.2,757.2,5,"DT")
2960425
"^DD",757.2,757.2,6,0)
DISPLAY ROUTINE^RF^^3;2^K:$L(X)>8!($L(X)<3) X
"^DD",757.2,757.2,6,3)
Display Routine must be 3-8 characters in length, i.e., LEXPRNT
"^DD",757.2,757.2,6,21,0)
^^3^3^2960812^^^^
"^DD",757.2,757.2,6,21,1,0)
Contains the name of the display routine (provided a separate display
"^DD",757.2,757.2,6,21,2,0)
routine was written).  This display routine will be used by the 
"^DD",757.2,757.2,6,21,3,0)
look-up utility.
"^DD",757.2,757.2,6,"DT")
2960401
"^DD",757.2,757.2,7,0)
DISPLAY CODES^F^^4;1^K:$L(X)>100!($L(X)<3) X
"^DD",757.2,757.2,7,3)
Display Code String must be 3-100 characters in length, i.e., ICD/NAN/NIC
"^DD",757.2,757.2,7,21,0)
^^4^4^2940902^^^
"^DD",757.2,757.2,7,21,1,0)
This field contains a string of classification/coding systems (separated
"^DD",757.2,757.2,7,21,2,0)
by slashes) to be displayed during look-up (i.e., "ICD/CPT/DSM/NAN").
"^DD",757.2,757.2,7,21,3,0)
This string will not override the user's preferred code display stored in
"^DD",757.2,757.2,7,21,4,0)
^LEXT(757.2,D0,200,DUZ,2)
"^DD",757.2,757.2,7,"DT")
2960401
"^DD",757.2,757.2,8,0)
APPLICATION MNEMONIC^FX^^5;1^K:X[""""!($A(X)=45) X I $D(X) I '+($$APPS^LEXHLP(X)) K X
"^DD",757.2,757.2,8,1,0)
^.1
"^DD",757.2,757.2,8,1,1,0)
757.2^AB^MUMPS
"^DD",757.2,757.2,8,1,1,1)
D SAPP^LEXNDX2
"^DD",757.2,757.2,8,1,1,2)
D KAPP^LEXNDX2
"^DD",757.2,757.2,8,1,1,"%D",0)
^^4^4^2940902^^
"^DD",757.2,757.2,8,1,1,"%D",1,0)
^LEXT(757.2,"AB",AN,IEN) - where AN is the Application Mnemonic and IEN is the
"^DD",757.2,757.2,8,1,1,"%D",2,0)
Internal Entry Number of the Subset Definition file where the Application
"^DD",757.2,757.2,8,1,1,"%D",3,0)
Mnemonic is located.  This is an index of only those subsets which define an 
"^DD",757.2,757.2,8,1,1,"%D",4,0)
application.  (Note:  Subsets which define a vocabulary are indexed at "AA")
"^DD",757.2,757.2,8,1,1,"DT")
2930909
"^DD",757.2,757.2,8,3)
Application Mnemonic must be 3 characters in length, and cannot be the same as the Short Title (index identifier at field 1).
"^DD",757.2,757.2,8,21,0)
^^5^5^2940902^^
"^DD",757.2,757.2,8,21,1,0)
Unique 3 character mnemonic representing either the application using the
"^DD",757.2,757.2,8,21,2,0)
Lexicon or if an application has more than one set of defaults,
"^DD",757.2,757.2,8,21,3,0)
it will represent the applications preference.  For example, PL1 - Problem 
"^DD",757.2,757.2,8,21,4,0)
List Provider entry, PL2 - Problem List ICD only.  This field is populated 
"^DD",757.2,757.2,8,21,5,0)
by DB Integration Agreement only
"^DD",757.2,757.2,8,"DT")
2960401
"^DD",757.2,757.2,9,0)
APPLICATION INDEX^F^^5;2^K:$L(X)>3!($L(X)<3) X
"^DD",757.2,757.2,9,3)
Application Index must be 3 characters in length.
"^DD",757.2,757.2,9,21,0)
^^5^5^2940902^^
"^DD",757.2,757.2,9,21,1,0)
This is the index which the application will use during look-up.  This
"^DD",757.2,757.2,9,21,2,0)
index must be contained in the global defined in the Global Reference
"^DD",757.2,757.2,9,21,3,0)
(#2).  This index name will be appended with a leading "A" to create the
"^DD",757.2,757.2,9,21,4,0)
index name (i.e., "A"_NUR to "ANUR" to use the Nursing Index).  This field
"^DD",757.2,757.2,9,21,5,0)
is populated by DB Integration Agreement only.
"^DD",757.2,757.2,9,"DT")
2960401
"^DD",757.2,757.2,10,0)
APPLICATION FILTER^K^^6;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",757.2,757.2,10,1,0)
^.1^^0
"^DD",757.2,757.2,10,3)
Application Filter is Standard MUMPS code.
"^DD",757.2,757.2,10,9)
@
"^DD",757.2,757.2,10,21,0)
^^3^3^2940902^^^^
"^DD",757.2,757.2,10,21,1,0)
This is the filter to be used by the application during look-up.  It is in
"^DD",757.2,757.2,10,21,2,0)
the format of a valid IF statement without an action to perform when the
"^DD",757.2,757.2,10,21,3,0)
condition is true.  This field is populated by DB Integration Agreement only.
"^DD",757.2,757.2,10,"DT")
2960401
"^DD",757.2,757.2,11,0)
APPLICATION DISPLAY CODES^F^^7;1^K:$L(X)>210!($L(X)<3) X
"^DD",757.2,757.2,11,3)
Application Display Codes must be 3-210 characters in length, i.e., "ICD/CPT"
"^DD",757.2,757.2,11,21,0)
^^8^8^2940302^
"^DD",757.2,757.2,11,21,1,0)
This is a string of source abbreviations (separated by slashes) of the
"^DD",757.2,757.2,11,21,2,0)
source code to display for an application during look-up.  For example:
"^DD",757.2,757.2,11,21,3,0)
 
"^DD",757.2,757.2,11,21,4,0)
   ICD/CPT/DSM
"^DD",757.2,757.2,11,21,5,0)
 
"^DD",757.2,757.2,11,21,6,0)
   will display ICD-9, CPT-4 and DSM-3R codes with the term during look-up
"^DD",757.2,757.2,11,21,7,0)
 
"^DD",757.2,757.2,11,21,8,0)
This field is populated by DB Integration Agreement only.
"^DD",757.2,757.2,11,"DT")
2960401
"^DD",757.2,757.2,12,0)
APPLICATION USER DEFAULTS^S^1:USER DEFAULTS ALLOWED;0:USER DEFAULTS ARE NOT ALLOWED;^5;3^Q
"^DD",757.2,757.2,12,21,0)
^^2^2^2951102^^^
"^DD",757.2,757.2,12,21,1,0)
This is a flag indicating whether an application allows users to specify
"^DD",757.2,757.2,12,21,2,0)
defaults in field 200 of this file.
"^DD",757.2,757.2,12,"DT")
2960401
"^DD",757.2,757.2,13,0)
APPLICATION FILE NUMBER^NJ19,8^^5;4^K:+X'=X!(X>9999999999)!(X<1)!(X?.E1"."9N.N) X
"^DD",757.2,757.2,13,1,0)
^.1
"^DD",757.2,757.2,13,1,1,0)
757.2^ADEF^MUMPS
"^DD",757.2,757.2,13,1,1,1)
S:+($P($G(^LEXT(757.2,DA,5)),U,3))>0 ^LEXT(757.2,"ADEF",X,DA)=""
"^DD",757.2,757.2,13,1,1,2)
K ^LEXT(757.2,"ADEF",X,DA)
"^DD",757.2,757.2,13,1,1,"%D",0)
3^^5^5^2940902^
"^DD",757.2,757.2,13,1,1,"%D",1,0)
^LEXT(757.2,"ADEF",FI,IEN) - where FI is the Application File ID (13) and IEN is
"^DD",757.2,757.2,13,1,1,"%D",2,0)
the Internal Entry Number of the Subset Definition file #757.2 where the
"^DD",757.2,757.2,13,1,1,"%D",3,0)
Application File ID is located.  This index node is only set if Application
"^DD",757.2,757.2,13,1,1,"%D",4,0)
User Default flag (12) is set to 1, and provides an index of only those
"^DD",757.2,757.2,13,1,1,"%D",5,0)
applications who allow user defaults to be defined at the application level.
"^DD",757.2,757.2,13,1,1,"DT")
2940316
"^DD",757.2,757.2,13,1,2,0)
757.2^APPS
"^DD",757.2,757.2,13,1,2,1)
S ^LEXT(757.2,"APPS",$E(X,1,30),DA)=""
"^DD",757.2,757.2,13,1,2,2)
K ^LEXT(757.2,"APPS",$E(X,1,30),DA)
"^DD",757.2,757.2,13,1,2,"%D",0)
^^4^4^2940902^^
"^DD",757.2,757.2,13,1,2,"%D",1,0)
^LEXT(757.2,"APPS",FI,IEN) - where FI is the Application File ID (13) and IEN is
"^DD",757.2,757.2,13,1,2,"%D",2,0)
the Internal Entry Number of the Subset Definition file #757.2 where the
"^DD",757.2,757.2,13,1,2,"%D",3,0)
Application File ID is located.  This provides an index of all applications 
"^DD",757.2,757.2,13,1,2,"%D",4,0)
defined in this file (with or without user defined defaults).
"^DD",757.2,757.2,13,1,2,"DT")
2940316
"^DD",757.2,757.2,13,3)
Type a Number between 1 and 9999999999, 8 Decimal Digits
"^DD",757.2,757.2,13,21,0)
^^2^2^2951016^^^^
"^DD",757.2,757.2,13,21,1,0)
This is the file number from the application where the pointer to the
"^DD",757.2,757.2,13,21,2,0)
Expressions file (#757.01) will be stored.
"^DD",757.2,757.2,13,"DT")
2951016
"^DD",757.2,757.2,14,0)
APPLICATION NAMESPACE^F^^5;5^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>4!($L(X)<2) X
"^DD",757.2,757.2,14,1,0)
^.1
"^DD",757.2,757.2,14,1,1,0)
757.2^AN
"^DD",757.2,757.2,14,1,1,1)
S ^LEXT(757.2,"AN",$E(X,1,30),DA)=""
"^DD",757.2,757.2,14,1,1,2)
K ^LEXT(757.2,"AN",$E(X,1,30),DA)
"^DD",757.2,757.2,14,1,1,"%D",0)
^^4^4^2940902^^
"^DD",757.2,757.2,14,1,1,"%D",1,0)
^LEXT(757.2,"AN",AN,IEN) - where AN is an Application Namespace and IEN is the
"^DD",757.2,757.2,14,1,1,"%D",2,0)
Internal Entry Number of the Subset Definition file #757.2 where the
"^DD",757.2,757.2,14,1,1,"%D",3,0)
Application Namespace is located.  This index is used in both setting user 
"^DD",757.2,757.2,14,1,1,"%D",4,0)
defaults and setting up the special variables for Lexicon look-up.
"^DD",757.2,757.2,14,1,1,"DT")
2940520
"^DD",757.2,757.2,14,3)
Application Namespace must be 2-4 characters in length.
"^DD",757.2,757.2,14,4)
Q
"^DD",757.2,757.2,14,21,0)
^^3^3^2940902^^^
"^DD",757.2,757.2,14,21,1,0)
This is the unique namespace prefix assigned to the package/application
"^DD",757.2,757.2,14,21,2,0)
which is defined in this file.  It is used to extract application level
"^DD",757.2,757.2,14,21,3,0)
defaults (filter/display/vocabulary).
"^DD",757.2,757.2,14,"DT")
2960401
"^DD",757.2,757.2,15,0)
UNRESOLVED NARRATIVES^S^1:Use Unresolved Narratives;0:Do not use Unresolved Narratives;^5;6^Q
"^DD",757.2,757.2,15,21,0)
^^5^5^2940902^^
"^DD",757.2,757.2,15,21,1,0)
The Lexicon has the ability to capture user narratives which
"^DD",757.2,757.2,15,21,2,0)
result in unsuccessful searches.  These "Unresolved Narratives" are
"^DD",757.2,757.2,15,21,3,0)
returned to developers for consideration in future releases of the
"^DD",757.2,757.2,15,21,4,0)
Lexicon.  This flag indicates whether an application will use the
"^DD",757.2,757.2,15,21,5,0)
unresolved feature of the Lexicon.
"^DD",757.2,757.2,15,"DT")
2960401
"^DD",757.2,757.2,16,0)
OVERRIDE USER DEFAULTS^S^1:YES;0:NO;^5;7^Q
"^DD",757.2,757.2,16,21,0)
^^2^2^2960502^^^
"^DD",757.2,757.2,16,21,1,0)
Boolean flag for application definition to indicate if the application defaults
"^DD",757.2,757.2,16,21,2,0)
are to override the defaults set by the user.
"^DD",757.2,757.2,16,"DT")
2960401
"^DD",757.2,757.2,17,0)
SHORTCUT CONTEXT^P757.41'^LEX(757.41,^5;8^Q
"^DD",757.2,757.2,17,21,0)
^^2^2^2950211^^^
"^DD",757.2,757.2,17,21,1,0)
This points to the context describing the set of shortcuts to use during
"^DD",757.2,757.2,17,21,2,0)
searches of the Lexicon.
"^DD",757.2,757.2,17,"DT")
2950211
"^DD",757.2,757.2,100,0)
DESCRIPTION^757.22^^100;0
"^DD",757.2,757.2,100,21,0)
^^1^1^2950124^
"^DD",757.2,757.2,100,21,1,0)
Contains a description of the general make-up of the vocabulary/subset.
"^DD",757.2,757.2,200,0)
DEFAULTS BY USER^757.201PA^^200;0
"^DD",757.2,757.2,200,21,0)
^^2^2^2950211^^^^
"^DD",757.2,757.2,200,21,1,0)
This multiple contains user defaults for the search filter, display and
"^DD",757.2,757.2,200,21,2,0)
the vocabulary for a limited number of applications.
"^DD",757.2,757.201,0)
DEFAULTS BY USER SUB-FIELD^^4.5^9
"^DD",757.2,757.201,0,"DT")
2950120
"^DD",757.2,757.201,0,"IX","B",757.201,.01)

"^DD",757.2,757.201,0,"NM","DEFAULTS BY USER")

"^DD",757.2,757.201,0,"UP")
757.2
"^DD",757.2,757.201,.01,0)
USER^P200'X^VA(200,^0;1^S DINUM=X
"^DD",757.2,757.201,.01,1,0)
^.1
"^DD",757.2,757.201,.01,1,1,0)
757.201^B
"^DD",757.2,757.201,.01,1,1,1)
S ^LEXT(757.2,DA(1),200,"B",$E(X,1,30),DA)=""
"^DD",757.2,757.201,.01,1,1,2)
K ^LEXT(757.2,DA(1),200,"B",$E(X,1,30),DA)
"^DD",757.2,757.201,.01,1,1,"%D",0)
^^5^5^2940902^
"^DD",757.2,757.201,.01,1,1,"%D",1,0)
^LEX(757.1,SD,200,"B",USER,IEN) - where SD is the Internal Entry Number for a
"^DD",757.2,757.201,.01,1,1,"%D",2,0)
Subset Definition in the Subset Definition file #757.2, USER is a pointer the
"^DD",757.2,757.201,.01,1,1,"%D",3,0)
the New Person file #200 who has default defined, and IEN is the Internal Entry
"^DD",757.2,757.201,.01,1,1,"%D",4,0)
Number in the Defaults by User Sub-file #757.201 where the user defaults are
"^DD",757.2,757.201,.01,1,1,"%D",5,0)
located.
"^DD",757.2,757.201,.01,1,2,0)
757.2^AUD^MUMPS
"^DD",757.2,757.201,.01,1,2,1)
Q:+X<1  S:$L($G(^VA(200,+X,0))) ^LEXT(757.2,"AUD",$P($G(^VA(200,+X,0)),U,1),+X,DA(1),DA)=""
"^DD",757.2,757.201,.01,1,2,2)
K:+X'<1 ^LEXT(757.2,"AUD",$P($G(^VA(200,+X,0)),U,1),+X,DA(1),DA)
"^DD",757.2,757.201,.01,1,2,"%D",0)
^^7^7^2940902^^
"^DD",757.2,757.201,.01,1,2,"%D",1,0)
^LEXT(757.2,"AUD",NAME,USER,SD,IEN) - where NAME is the name of the user taken
"^DD",757.2,757.201,.01,1,2,"%D",2,0)
from the New Person file #200, USER (.01) is a pointer to the New Person file 
"^DD",757.2,757.201,.01,1,2,"%D",3,0)
#200, SD is the Internal Entry Number of the Subset Definition file #757.2
"^DD",757.2,757.201,.01,1,2,"%D",4,0)
where the Application Defaults are located, and IEN is the Internal Entry
"^DD",757.2,757.201,.01,1,2,"%D",5,0)
Number of the Defaults by User Sub-file #757.201 where the user defaults are
"^DD",757.2,757.201,.01,1,2,"%D",6,0)
located.  This is an index used to create alphabetical listings of users who 
"^DD",757.2,757.201,.01,1,2,"%D",7,0)
have defaults set for the application defined at SD.
"^DD",757.2,757.201,.01,1,2,"DT")
2940808
"^DD",757.2,757.201,.01,21,0)
^^2^2^2940902^^
"^DD",757.2,757.201,.01,21,1,0)
This is a pointer to the New Person file #200 of the user who has defined 
"^DD",757.2,757.201,.01,21,2,0)
the defaults.
"^DD",757.2,757.201,.01,"DT")
2940808
"^DD",757.2,757.201,1,0)
SEARCH FILTER^FX^^1;E1,245^K:$L(X)>245!($L(X)<3) X D:$D(X) ^DIM
"^DD",757.2,757.201,1,3)
Search Filter must be 3-245 characters in length, in the form of a valid MUMPS IF statement.
"^DD",757.2,757.201,1,21,0)
^^2^2^2940902^^^
"^DD",757.2,757.201,1,21,1,0)
This is the search filter - DIC("S") - which was either selected or
"^DD",757.2,757.201,1,21,2,0)
created by the user for conducting searches in the Lexicon.
"^DD",757.2,757.201,1,"DT")
2940825
"^DD",757.2,757.201,1.5,0)
SEARCH FILTER NAME^F^^1.5;1^K:$L(X)>200!($L(X)<1) X
"^DD",757.2,757.201,1.5,3)
Answer must be 1-200 characters in length.
"^DD",757.2,757.201,1.5,21,0)
^^1^1^2950120^
"^DD",757.2,757.201,1.5,21,1,0)
This is the name of the user default search filter.
"^DD",757.2,757.201,1.5,"DT")
2950120
"^DD",757.2,757.201,2,0)
DISPLAY^F^^2;1^K:$L(X)>210!($L(X)<3) X
"^DD",757.2,757.201,2,3)
Answer must be 3-210 characters in length.
"^DD",757.2,757.201,2,21,0)
^^3^3^2940902^^
"^DD",757.2,757.201,2,21,1,0)
This is a string of classification codes to display while conducting
"^DD",757.2,757.201,2,21,2,0)
searches in the Lexicon.  It is a series of 3 character
"^DD",757.2,757.201,2,21,3,0)
mnemonics (separated by slashes).  For example:  "ICD/CPT/DSM"
"^DD",757.2,757.201,2,"DT")
2940324
"^DD",757.2,757.201,2.5,0)
DISPLAY NAME^F^^2.5;1^K:$L(X)>200!($L(X)<1) X
"^DD",757.2,757.201,2.5,3)
Answer must be 1-200 characters in length.
"^DD",757.2,757.201,2.5,21,0)
^^1^1^2950120^
"^DD",757.2,757.201,2.5,21,1,0)
This is the name of the default user display format.
"^DD",757.2,757.201,2.5,"DT")
2950120
"^DD",757.2,757.201,3,0)
VOCABULARY^F^^3;1^K:$L(X)>3!($L(X)<3) X
"^DD",757.2,757.201,3,3)
Answer must be 3 characters in length.
"^DD",757.2,757.201,3,21,0)
^^5^5^2940902^^
"^DD",757.2,757.201,3,21,1,0)
This is a 3 character mnemonic that, when appended with a leading "A"
"^DD",757.2,757.201,3,21,2,0)
becomes the name of the index to use while searching the Lexicon.
"^DD",757.2,757.201,3,21,3,0)
For example the subset mnemonic WRD for the Lexicon is indexed at
"^DD",757.2,757.201,3,21,4,0)
"AWRD", SOC for the Social Work subset is indexed at "ASOC", and NUR for the 
"^DD",757.2,757.201,3,21,5,0)
Nursing subset is indexed a "ANUR".
"^DD",757.2,757.201,3,"DT")
2940324
"^DD",757.2,757.201,3.5,0)
VOCABULARY NAME^F^^3.5;1^K:$L(X)>200!($L(X)<1) X
"^DD",757.2,757.201,3.5,3)
Answer must be 1-200 characters in length.
"^DD",757.2,757.201,3.5,21,0)
^^1^1^2950120^
"^DD",757.2,757.201,3.5,21,1,0)
This the name of the user default vocabulary (or subset).
"^DD",757.2,757.201,3.5,"DT")
2950120
"^DD",757.2,757.201,4,0)
SHORTCUTS^P757.41'^LEX(757.41,^4;1^Q
"^DD",757.2,757.201,4,21,0)
^^3^3^2950211^^^
"^DD",757.2,757.201,4,21,1,0)
This is a pointer to the Shortcuts Context file #757.41 which determines
"^DD",757.2,757.201,4,21,2,0)
the group of shortcuts in the Shortcuts file #757.4 to be used during searches
"^DD",757.2,757.201,4,21,3,0)
of the Lexicon.
"^DD",757.2,757.201,4,"DT")
2950211
"^DD",757.2,757.201,4.5,0)
SHORTCUTS NAME^F^^4.5;1^K:$L(X)>200!($L(X)<1) X
"^DD",757.2,757.201,4.5,3)
Shortcut Context Name must be 1-200 characters in length.
"^DD",757.2,757.201,4.5,21,0)
^^2^2^2950211^^
"^DD",757.2,757.201,4.5,21,1,0)
This is the name of the user default context for the set of shortcuts to use
"^DD",757.2,757.201,4.5,21,2,0)
during searches of the Lexicon.
"^DD",757.2,757.201,4.5,"DT")
2950211
"^DD",757.2,757.22,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",757.2,757.22,0,"DT")
2950124
"^DD",757.2,757.22,0,"NM","DESCRIPTION")

"^DD",757.2,757.22,0,"UP")
757.2
"^DD",757.2,757.22,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",757.2,757.22,.01,21,0)
^^2^2^2950124^
"^DD",757.2,757.22,.01,21,1,0)
Contains a description of the general make-up of the vocabulary/subset, and
"^DD",757.2,757.22,.01,21,2,0)
may be used for help in special look-up in this file.
"^DD",757.2,757.22,.01,"DT")
2950124
"^DD",757.21,757.21,0)
FIELD^^1^2
"^DD",757.21,757.21,0,"DDA")
N
"^DD",757.21,757.21,0,"DT")
2930329
"^DD",757.21,757.21,0,"ID",1)
S %I=Y,Y=$S('$D(^(0)):"",$D(^LEXT(757.2,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(757.2,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",757.21,757.21,0,"IX","AA",757.21,1)

"^DD",757.21,757.21,0,"IX","B",757.21,.01)

"^DD",757.21,757.21,0,"IX","C",757.21,.01)

"^DD",757.21,757.21,0,"NM","SUBSETS")

"^DD",757.21,757.21,.01,0)
EXPRESSION^RP757.01'I^LEX(757.01,^0;1^Q
"^DD",757.21,757.21,.01,.1)
EXP
"^DD",757.21,757.21,.01,1,0)
^.1
"^DD",757.21,757.21,.01,1,1,0)
757.21^B
"^DD",757.21,757.21,.01,1,1,1)
S ^LEX(757.21,"B",$E(X,1,30),DA)=""
"^DD",757.21,757.21,.01,1,1,2)
K ^LEX(757.21,"B",$E(X,1,30),DA)
"^DD",757.21,757.21,.01,1,1,"%D",0)
^^3^3^2940902^
"^DD",757.21,757.21,.01,1,1,"%D",1,0)
^LEX(757.21,"B",EXP,IEN) - where EXP is the Expression (.01) pointer to the
"^DD",757.21,757.21,.01,1,1,"%D",2,0)
Expression file #757.01 and IEN is the Internal Entry Number of the Subsets
"^DD",757.21,757.21,.01,1,1,"%D",3,0)
file #757.21 where the expression pointer is located.
"^DD",757.21,757.21,.01,1,2,0)
757.21^C^MUMPS
"^DD",757.21,757.21,.01,1,2,1)
S ^LEX(757.21,"C",$E($$UP^XLFSTR(^LEX(757.01,X,0)),1,63),DA)=""
"^DD",757.21,757.21,.01,1,2,2)
K ^LEX(757.21,"C",$E($$UP^XLFSTR(^LEX(757.01,X,0)),1,63),DA)
"^DD",757.21,757.21,.01,1,2,"%D",0)
^^5^5^2940902^^
"^DD",757.21,757.21,.01,1,2,"%D",1,0)
^LEX(757.21,"C",EXP,IEN) - where EXP is a 63 character uppercase expression
"^DD",757.21,757.21,.01,1,2,"%D",2,0)
taken from the Expression file #757.01 Display Text (.01) and IEN is the
"^DD",757.21,757.21,.01,1,2,"%D",3,0)
Internal Entry Number of the Subsets file #757.21 where the expression pointer
"^DD",757.21,757.21,.01,1,2,"%D",4,0)
is located.  This index simulates the functionality of the B index in the 
"^DD",757.21,757.21,.01,1,2,"%D",5,0)
Expression file #757.01.
"^DD",757.21,757.21,.01,1,2,"DT")
2940302
"^DD",757.21,757.21,.01,3)

"^DD",757.21,757.21,.01,21,0)
^^3^3^2930518^
"^DD",757.21,757.21,.01,21,1,0)
Contains a pointer to an expression (file #757.01), however, that
"^DD",757.21,757.21,.01,21,2,0)
expression (not the pointer) is indexed in this file, thus creating the
"^DD",757.21,757.21,.01,21,3,0)
impression of a separate vocabulary.
"^DD",757.21,757.21,.01,"DT")
2940302
"^DD",757.21,757.21,1,0)
SUBSET^RP757.2'I^LEXT(757.2,^0;2^Q
"^DD",757.21,757.21,1,1,0)
^.1
"^DD",757.21,757.21,1,1,1,0)
757.21^AA^MUMPS
"^DD",757.21,757.21,1,1,1,1)
D SS^LEXNDX2
"^DD",757.21,757.21,1,1,1,2)
D SK^LEXNDX2
"^DD",757.21,757.21,1,1,1,"%D",0)
^^16^16^2951102^^^^
"^DD",757.21,757.21,1,1,1,"%D",1,0)
^LEX(757.21,IDX,WORD,IEN) - where IDX is the subset index (the letter "A"
"^DD",757.21,757.21,1,1,1,"%D",2,0)
appended to the Short Title of the subset taken from the Subset Definition 
"^DD",757.21,757.21,1,1,1,"%D",3,0)
file #757.2), WORD is a single word parsed from the Display Text of the
"^DD",757.21,757.21,1,1,1,"%D",4,0)
Expression file #757.01 pointed to by the expression (.01), and IEN is the
"^DD",757.21,757.21,1,1,1,"%D",5,0)
Internal Entry Number of the Subsets file #757.21 where the pointer of the
"^DD",757.21,757.21,1,1,1,"%D",6,0)
expression containing the WORD and the pointer to the Subset Definition are
"^DD",757.21,757.21,1,1,1,"%D",7,0)
located.  The "AA" index does not exist physically.  The indexing routine 
"^DD",757.21,757.21,1,1,1,"%D",8,0)
determines the vocabulary which is used (as pointed to in the Subset 
"^DD",757.21,757.21,1,1,1,"%D",9,0)
Definition file #757.2, i.e., NUR).  It then appends a leading "A" to the 
"^DD",757.21,757.21,1,1,1,"%D",10,0)
vocabulary mnemonic (Short Title) creating a composite index identifier 
"^DD",757.21,757.21,1,1,1,"%D",11,0)
(i.e., "ANUR").  Finally, it parses and indexes the words found in the 
"^DD",757.21,757.21,1,1,1,"%D",12,0)
expression (pointed to by the .01 field) using the composite index identifier.
"^DD",757.21,757.21,1,1,1,"%D",13,0)
For example, ^LEX(757.21,DA,0)= 262363^2, where 262363 points to the 
"^DD",757.21,757.21,1,1,1,"%D",14,0)
expression "ABUSED ADULT, POTENTIAL" and 2 points to the Subset definition 
"^DD",757.21,757.21,1,1,1,"%D",15,0)
"Nursing" with the vocabulary mnemonic "NUR", the words "ABUSED", "ADULT" and
"^DD",757.21,757.21,1,1,1,"%D",16,0)
"POTENTIAL" would be indexed at ^LEX(757.21,"ANUR",WORD,IEN).
"^DD",757.21,757.21,1,1,1,"DT")
2930909
"^DD",757.21,757.21,1,21,0)
^^4^4^2940322^
"^DD",757.21,757.21,1,21,1,0)
Pointer to the subset definitions (file 757.2).  This pointer indicates
"^DD",757.21,757.21,1,21,2,0)
how the expression is to be indexed (i.e., pointing to the Nursing subset
"^DD",757.21,757.21,1,21,3,0)
in the definition file creates an index of the expression with the
"^DD",757.21,757.21,1,21,4,0)
cross-reference of "ANUR")
"^DD",757.21,757.21,1,"DT")
2940322
"^DD",757.3,757.3,0)
FIELD^^6^7
"^DD",757.3,757.3,0,"DDA")
N
"^DD",757.3,757.3,0,"DT")
2951016
"^DD",757.3,757.3,0,"IX","APPS",757.3,3)

"^DD",757.3,757.3,0,"IX","AS",757.3,1)

"^DD",757.3,757.3,0,"IX","B",757.3,.01)

"^DD",757.3,757.3,0,"IX","C",757.3,.01)

"^DD",757.3,757.3,0,"IX","D",757.3,.01)

"^DD",757.3,757.3,0,"NM","LOOK-UP SCREENS")

"^DD",757.3,757.3,.01,0)
DESCRIPTIVE TITLE^RF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>63!($L(X)<3)!'(X'?1P.E) X
"^DD",757.3,757.3,.01,1,0)
^.1
"^DD",757.3,757.3,.01,1,1,0)
757.3^B
"^DD",757.3,757.3,.01,1,1,1)
S ^LEX(757.3,"B",$E(X,1,30),DA)=""
"^DD",757.3,757.3,.01,1,1,2)
K ^LEX(757.3,"B",$E(X,1,30),DA)
"^DD",757.3,757.3,.01,1,1,"%D",0)
^^3^3^2940902^
"^DD",757.3,757.3,.01,1,1,"%D",1,0)
^LEX(757.3,"B",DT,IEN) - where DT is the Descriptive Title (.01) and IEN is the
"^DD",757.3,757.3,.01,1,1,"%D",2,0)
Internal Entry Number in the Look-up Screens file #757.3 where the descriptive
"^DD",757.3,757.3,.01,1,1,"%D",3,0)
title of a screen is located.
"^DD",757.3,757.3,.01,1,2,0)
757.3^C^MUMPS
"^DD",757.3,757.3,.01,1,2,1)
S ^LEX(757.3,"C",$E(X,1,63),DA)=""
"^DD",757.3,757.3,.01,1,2,2)
K ^LEX(757.3,"C",$E(X,1,63),DA)
"^DD",757.3,757.3,.01,1,2,"%D",0)
^^3^3^2940902^^^
"^DD",757.3,757.3,.01,1,2,"%D",1,0)
^LEX(757.3,"C",DT,IEN) - where DT is an extended 63 character representation of
"^DD",757.3,757.3,.01,1,2,"%D",2,0)
the Descriptive Title (.01) and IEN is the Internal Entry Number in the Look-up
"^DD",757.3,757.3,.01,1,2,"%D",3,0)
Screens file #757.3 where the descriptive title of a screen is located.
"^DD",757.3,757.3,.01,1,2,"DT")
2930526
"^DD",757.3,757.3,.01,1,3,0)
757.3^D^MUMPS
"^DD",757.3,757.3,.01,1,3,1)
S ^LEX(757.3,"D",$$UP^XLFSTR(X),DA)=""
"^DD",757.3,757.3,.01,1,3,2)
K ^LEX(757.3,"D",$$UP^XLFSTR(X),DA)
"^DD",757.3,757.3,.01,1,3,"%D",0)
^^4^4^2940902^^^
"^DD",757.3,757.3,.01,1,3,"%D",1,0)
^LEX(757.3,"D",DT,IEN) - where DT is an extended 63 character, all uppercase
"^DD",757.3,757.3,.01,1,3,"%D",2,0)
representation of the Descriptive Title (.01) and IEN is the Internal Entry
"^DD",757.3,757.3,.01,1,3,"%D",3,0)
Number in the Look-up Screens file #757.3 where the descriptive title of a
"^DD",757.3,757.3,.01,1,3,"%D",4,0)
screen is located.
"^DD",757.3,757.3,.01,1,3,"DT")
2940302
"^DD",757.3,757.3,.01,3)
Answer must be 3-63 characters in length.
"^DD",757.3,757.3,.01,21,0)
^^1^1^2930903^^^^
"^DD",757.3,757.3,.01,21,1,0)
Descriptive title indicating the purpose of the screen.
"^DD",757.3,757.3,.01,"DT")
2940513
"^DD",757.3,757.3,1,0)
SCREEN^RK^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",757.3,757.3,1,1,0)
^.1
"^DD",757.3,757.3,1,1,1,0)
757.3^AS^MUMPS
"^DD",757.3,757.3,1,1,1,1)
S ^LEX(757.3,"AS",$E(X,1,63),DA)=""
"^DD",757.3,757.3,1,1,1,2)
K ^LEX(757.3,"AS",$E(X,1,63),DA)
"^DD",757.3,757.3,1,1,1,"%D",0)
^^3^3^2950123^^
"^DD",757.3,757.3,1,1,1,"%D",1,0)
^LEX(757.3,"AS",SCR,IEN) - Where SCR is a 63 character extraction of the
"^DD",757.3,757.3,1,1,1,"%D",2,0)
Screen, and IEN is the Internal Entry Number in file 757.3 where the screen is
"^DD",757.3,757.3,1,1,1,"%D",3,0)
stored.
"^DD",757.3,757.3,1,1,1,"DT")
2950123
"^DD",757.3,757.3,1,3)
This is Standard MUMPS code.
"^DD",757.3,757.3,1,9)
@
"^DD",757.3,757.3,1,21,0)
^^2^2^2940902^^
"^DD",757.3,757.3,1,21,1,0)
This string takes the form of a valid IF statement without an action to
"^DD",757.3,757.3,1,21,2,0)
perform.
"^DD",757.3,757.3,1,"DT")
2950123
"^DD",757.3,757.3,2,0)
TYPE OF SCREEN^RSI^U:USER PREFERENCE SCREEN;A:APPLICATION DEFINED SCREEN;^0;2^Q
"^DD",757.3,757.3,2,21,0)
^^8^8^2940302^
"^DD",757.3,757.3,2,21,1,0)
This is a flag used by the Lexicon to differentiate between
"^DD",757.3,757.3,2,21,2,0)
screens defined for users and screens defined specifically for an
"^DD",757.3,757.3,2,21,3,0)
application.  This flag also controls how an entry is indexed.
"^DD",757.3,757.3,2,21,4,0)
 
"^DD",757.3,757.3,2,21,5,0)
  U - User screen
"^DD",757.3,757.3,2,21,6,0)
  A - Application screen
"^DD",757.3,757.3,2,21,7,0)
 
"^DD",757.3,757.3,2,21,8,0)
This field is populated by DB Integration Agreement only.
"^DD",757.3,757.3,2,"DT")
2931124
"^DD",757.3,757.3,3,0)
APPLICATION IDENTIFICATION^FIX^^0;3^K:X[""""!($A(X)=45) X I $D(X) K:($L(X)>8!($L(X)<2))&'(X?1U.UN) X
"^DD",757.3,757.3,3,1,0)
^.1
"^DD",757.3,757.3,3,1,1,0)
757.3^APPS^MUMPS
"^DD",757.3,757.3,3,1,1,1)
S:$P(^LEX(757.3,DA,0),U,2)="A" ^LEX(757.3,"APPS",X,DA)=""
"^DD",757.3,757.3,3,1,1,2)
K ^LEX(757.3,"APPS",X,DA)
"^DD",757.3,757.3,3,1,1,"%D",0)
^^4^4^2940902^^
"^DD",757.3,757.3,3,1,1,"%D",1,0)
^LEX(757.3,"APPS",AP,IEN) - where AP is the Application Identification (3) and
"^DD",757.3,757.3,3,1,1,"%D",2,0)
IEN is the Internal Entry Number in the Look-up Screens file #757.3 where the
"^DD",757.3,757.3,3,1,1,"%D",3,0)
application identification is located.  This provides an index of only those 
"^DD",757.3,757.3,3,1,1,"%D",4,0)
screens defined by an application.
"^DD",757.3,757.3,3,1,1,"DT")
2930527
"^DD",757.3,757.3,3,3)
Application Identification (package/name space) must be 2-8 characters in length.
"^DD",757.3,757.3,3,21,0)
^^4^4^2940316^^
"^DD",757.3,757.3,3,21,1,0)
This is the application namespace (where type of screen = "A") for which
"^DD",757.3,757.3,3,21,2,0)
the screen was developed.
"^DD",757.3,757.3,3,21,3,0)
 
"^DD",757.3,757.3,3,21,4,0)
This field is populated by DB Integration Agreement only.
"^DD",757.3,757.3,3,"DT")
2931209
"^DD",757.3,757.3,4,0)
APPLICATION FILE NUMBER^NJ19,8^^0;4^K:+X'=X!(X>9999999999)!(X<1)!(X?.E1"."9N.N) X
"^DD",757.3,757.3,4,3)
Type a Number between 1 and 9999999999, 8 Decimal Digits
"^DD",757.3,757.3,4,21,0)
^^3^3^2951016^^^^
"^DD",757.3,757.3,4,21,1,0)
This is the file number where an application will store the pointer to the
"^DD",757.3,757.3,4,21,2,0)
Expressions file (#757.01).  This field should only contain data if the 
"^DD",757.3,757.3,4,21,3,0)
screen has been defined as the default screen for the application.
"^DD",757.3,757.3,4,"DT")
2951016
"^DD",757.3,757.3,5,0)
DESCRIPTION^757.305^^2;0
"^DD",757.3,757.3,5,21,0)
^^1^1^2950120^
"^DD",757.3,757.3,5,21,1,0)
Basic description of the intended use of the filter/screen.
"^DD",757.3,757.3,6,0)
ACCEPTABLE VOCABULARIES^757.36^^3;0
"^DD",757.3,757.3,6,21,0)
^^4^4^2950123^
"^DD",757.3,757.3,6,21,1,0)
Not all screens (filters) will work with all vocabularies.  For example,
"^DD",757.3,757.3,6,21,2,0)
the "Nursing Diagnosis only" screen used on the Dental vocabulary will
"^DD",757.3,757.3,6,21,3,0)
result in "No matches found".  This is a list of the vocabularies (the
"^DD",757.3,757.3,6,21,4,0)
vocabulary mnemonic) which the screen will work successfully with.
"^DD",757.3,757.305,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",757.3,757.305,0,"DT")
2950120
"^DD",757.3,757.305,0,"NM","DESCRIPTION")

"^DD",757.3,757.305,0,"UP")
757.3
"^DD",757.3,757.305,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",757.3,757.305,.01,21,0)
^^2^2^2950120^^
"^DD",757.3,757.305,.01,21,1,0)
Basic description of the intended use of the filter/screen.  This text may
"^DD",757.3,757.305,.01,21,2,0)
be used as help in the special look-up of file 757.3.
"^DD",757.3,757.305,.01,"DT")
2950120
"^DD",757.3,757.36,0)
ACCEPTABLE VOCABULARIES SUB-FIELD^^.01^1
"^DD",757.3,757.36,0,"DT")
2950123
"^DD",757.3,757.36,0,"IX","B",757.36,.01)

"^DD",757.3,757.36,0,"NM","ACCEPTABLE VOCABULARIES")

"^DD",757.3,757.36,0,"UP")
757.3
"^DD",757.3,757.36,.01,0)
VOCABULARY^MRF^^0;1^K:$L(X)>3!($L(X)<3) X
"^DD",757.3,757.36,.01,1,0)
^.1
"^DD",757.3,757.36,.01,1,1,0)
757.36^B
"^DD",757.3,757.36,.01,1,1,1)
S ^LEX(757.3,DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",757.3,757.36,.01,1,1,2)
K ^LEX(757.3,DA(1),3,"B",$E(X,1,30),DA)
"^DD",757.3,757.36,.01,1,1,"%D",0)
^^4^4^2950123^
"^DD",757.3,757.36,.01,1,1,"%D",1,0)
^LEX(757.3,SCR,3,"B",VOC,IEN) - Where SCR is the Internal Entry Number (IEN) in
"^DD",757.3,757.36,.01,1,1,"%D",2,0)
file 757.3, VOC is the three character mnemonic for the vocabulary, and IEN is
"^DD",757.3,757.36,.01,1,1,"%D",3,0)
the Internal Entry Number in the sub-file 757.36 where the vocabulary is
"^DD",757.3,757.36,.01,1,1,"%D",4,0)
stored.
"^DD",757.3,757.36,.01,3)
Answer must be 3 characters in length.
"^DD",757.3,757.36,.01,21,0)
^^2^2^2950123^^^
"^DD",757.3,757.36,.01,21,1,0)
This is the 3 character vocabulary mnemonic for the vocabulary.  This mnemonic,
"^DD",757.3,757.36,.01,21,2,0)
when appended with a leading "A", becomes the index to used during look-up.
"^DD",757.3,757.36,.01,"DT")
2950123
"^DD",757.31,757.31,0)
FIELD^^3^4
"^DD",757.31,757.31,0,"DDA")
N
"^DD",757.31,757.31,0,"DT")
2950110
"^DD",757.31,757.31,0,"IX","ADSP",757.31,2)

"^DD",757.31,757.31,0,"IX","B",757.31,.01)

"^DD",757.31,757.31,0,"IX","C",757.31,.01)

"^DD",757.31,757.31,0,"NM","DISPLAYS")

"^DD",757.31,757.31,.01,0)
TITLE^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",757.31,757.31,.01,1,0)
^.1
"^DD",757.31,757.31,.01,1,1,0)
757.31^B
"^DD",757.31,757.31,.01,1,1,1)
S ^LEX(757.31,"B",$E(X,1,30),DA)=""
"^DD",757.31,757.31,.01,1,1,2)
K ^LEX(757.31,"B",$E(X,1,30),DA)
"^DD",757.31,757.31,.01,1,1,"%D",0)
^^3^3^2950117^
"^DD",757.31,757.31,.01,1,1,"%D",1,0)
^LEX(757.31,"B",DES,IEN) - Where DES is a 30 character representation of the
"^DD",757.31,757.31,.01,1,1,"%D",2,0)
Description, and IEN is the Internal Entry Number in file 757.31 where the
"^DD",757.31,757.31,.01,1,1,"%D",3,0)
display is stored.
"^DD",757.31,757.31,.01,1,2,0)
757.31^C^MUMPS
"^DD",757.31,757.31,.01,1,2,1)
S ^LEX(757.31,"C",$$UP^XLFSTR($E(X,1,30)),DA)=""
"^DD",757.31,757.31,.01,1,2,2)
K ^LEX(757.31,"C",$$UP^XLFSTR($E(X,1,30)),DA)
"^DD",757.31,757.31,.01,1,2,"%D",0)
^^3^3^2950117^^
"^DD",757.31,757.31,.01,1,2,"%D",1,0)
^LEX(757.31,"C",UPPER,IEN) - Where UPPER is an uppercase 30 character
"^DD",757.31,757.31,.01,1,2,"%D",2,0)
representation of the Description, and IEN is the Internal Entry Number in file
"^DD",757.31,757.31,.01,1,2,"%D",3,0)
757.31 where the display is stored.
"^DD",757.31,757.31,.01,1,2,"DT")
2950110
"^DD",757.31,757.31,.01,3)
Description must be 3-30 characters in length.
"^DD",757.31,757.31,.01,21,0)
^^2^2^2950110^^
"^DD",757.31,757.31,.01,21,1,0)
This is a short descriptive title indicating the function or purpose of 
"^DD",757.31,757.31,.01,21,2,0)
the display.
"^DD",757.31,757.31,.01,"DT")
2950110
"^DD",757.31,757.31,1,0)
DISPLAY TYPE^RS^C:CLASSIFICATION CODES;S:SEMANTICS;F:FULL DISPLAY;^0;2^Q
"^DD",757.31,757.31,1,21,0)
^^1^1^2950110^
"^DD",757.31,757.31,1,21,1,0)
Display type indicates the print display method.
"^DD",757.31,757.31,1,"DT")
2950110
"^DD",757.31,757.31,2,0)
DISPLAY^RF^^1;1^K:$L(X)>240!($L(X)<2) X
"^DD",757.31,757.31,2,1,0)
^.1
"^DD",757.31,757.31,2,1,1,0)
757.31^ADSP^MUMPS
"^DD",757.31,757.31,2,1,1,1)
S ^LEX(757.31,"ADSP",$E(X,1,63),DA)=""
"^DD",757.31,757.31,2,1,1,2)
K ^LEX(757.31,"ADSP",$E(X,1,63),DA)
"^DD",757.31,757.31,2,1,1,"%D",0)
^^3^3^2950123^
"^DD",757.31,757.31,2,1,1,"%D",1,0)
^LEX(757.31,"ADSP",DSP,IEN) - Where DSP is a 63 character representation of the
"^DD",757.31,757.31,2,1,1,"%D",2,0)
display string and IEN is the Internal Entry Number in file 757.31 where the
"^DD",757.31,757.31,2,1,1,"%D",3,0)
display is stored.
"^DD",757.31,757.31,2,1,1,"DT")
2950123
"^DD",757.31,757.31,2,3)
Display must be 2-240 characters in length.
"^DD",757.31,757.31,2,21,0)
^^1^1^2950117^^
"^DD",757.31,757.31,2,21,1,0)
This string contains the instructions (parameters) for the display routines.
"^DD",757.31,757.31,2,"DT")
2950123
"^DD",757.31,757.31,3,0)
DESCRIPTION^757.313^^2;0
"^DD",757.31,757.31,3,21,0)
^^1^1^2950118^^^
"^DD",757.31,757.31,3,21,1,0)
Contains a detailed description of exactly what is to be displayed.
"^DD",757.31,757.313,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",757.31,757.313,0,"DT")
2950110
"^DD",757.31,757.313,0,"NM","DESCRIPTION")

"^DD",757.31,757.313,0,"UP")
757.31
"^DD",757.31,757.313,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",757.31,757.313,.01,21,0)
^^2^2^2950118^^^^
"^DD",757.31,757.313,.01,21,1,0)
This contains a detailed description of the display and may be used as
"^DD",757.31,757.313,.01,21,2,0)
help when using the look-up routine for this file.
"^DD",757.31,757.313,.01,"DT")
2950110
"^DD",757.4,757.4,0)
FIELD^^1^2
"^DD",757.4,757.4,0,"DDA")
N
"^DD",757.4,757.4,0,"DT")
2941229
"^DD",757.4,757.4,0,"IX","AB",757.401,.01)

"^DD",757.4,757.4,0,"IX","ARA",757.401,1)

"^DD",757.4,757.4,0,"IX","B",757.4,.01)

"^DD",757.4,757.4,0,"NM","SHORTCUTS")

"^DD",757.4,757.4,.01,0)
EXPRESSION^RP757.01'^LEX(757.01,^0;1^Q
"^DD",757.4,757.4,.01,1,0)
^.1
"^DD",757.4,757.4,.01,1,1,0)
757.4^B
"^DD",757.4,757.4,.01,1,1,1)
S ^LEX(757.4,"B",$E(X,1,30),DA)=""
"^DD",757.4,757.4,.01,1,1,2)
K ^LEX(757.4,"B",$E(X,1,30),DA)
"^DD",757.4,757.4,.01,1,1,"%D",0)
^^3^3^2950211^^
"^DD",757.4,757.4,.01,1,1,"%D",1,0)
^LEX(757.4,"B",EXP,IEN) - where EXP is a pointer to an expression in the
"^DD",757.4,757.4,.01,1,1,"%D",2,0)
expression file #757.01, and IEN is the Internal Entry Number in the 
"^DD",757.4,757.4,.01,1,1,"%D",3,0)
Shortcuts file #757.4 where the expression is stored.
"^DD",757.4,757.4,.01,3)

"^DD",757.4,757.4,.01,21,0)
^^2^2^2950211^^^^
"^DD",757.4,757.4,.01,21,1,0)
Pointer to an expression in file #757.01.  This expression will be returned if
"^DD",757.4,757.4,.01,21,2,0)
any of the context sensitive shortcuts are detected in the user input.
"^DD",757.4,757.4,.01,"DT")
2941229
"^DD",757.4,757.4,1,0)
SHORTCUTS^757.401^^1;0
"^DD",757.4,757.4,1,21,0)
^^1^1^2950211^^^^
"^DD",757.4,757.4,1,21,1,0)
This is a list of shortcuts by context.
"^DD",757.4,757.4,1,"DT")
2950211
"^DD",757.4,757.401,0)
SHORTCUTS SUB-FIELD^^1^2
"^DD",757.4,757.401,0,"DT")
2941229
"^DD",757.4,757.401,0,"IX","AB",757.401,.01)

"^DD",757.4,757.401,0,"IX","B",757.401,.01)

"^DD",757.4,757.401,0,"NM","SHORTCUTS")

"^DD",757.4,757.401,0,"UP")
757.4
"^DD",757.4,757.401,.01,0)
SHORTCUT^MF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>63!($L(X)<2) X
"^DD",757.4,757.401,.01,1,0)
^.1
"^DD",757.4,757.401,.01,1,1,0)
757.401^B
"^DD",757.4,757.401,.01,1,1,1)
S ^LEX(757.4,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",757.4,757.401,.01,1,1,2)
K ^LEX(757.4,DA(1),1,"B",$E(X,1,30),DA)
"^DD",757.4,757.401,.01,1,1,"%D",0)
^^3^3^2950211^^^^
"^DD",757.4,757.401,.01,1,1,"%D",1,0)
^LEX(757.4,SHCT,1,"B",SC,IEN) - where SHCT is the entry number in the Shortcuts
"^DD",757.4,757.401,.01,1,1,"%D",2,0)
file, SC is a 30 character representation of the shortcut, and IEN is the
"^DD",757.4,757.401,.01,1,1,"%D",3,0)
Internal Entry Number of the Shortcuts sub-file where the shortcut is stored.
"^DD",757.4,757.401,.01,1,2,0)
757.4^AB
"^DD",757.4,757.401,.01,1,2,1)
S ^LEX(757.4,"AB",$E(X,1,63),DA(1),DA)=""
"^DD",757.4,757.401,.01,1,2,2)
K ^LEX(757.4,"AB",$E(X,1,63),DA(1),DA)
"^DD",757.4,757.401,.01,1,2,"%D",0)
^^4^4^2950211^^^^
"^DD",757.4,757.401,.01,1,2,"%D",1,0)
^LEX(757.4,"AB",SC,SHCT,IEN) - Where SC is a 63 character representation of the
"^DD",757.4,757.401,.01,1,2,"%D",2,0)
shortcut to look for in the users input, SHCT is the Internal Entry Number in 
"^DD",757.4,757.401,.01,1,2,"%D",3,0)
the Shortcuts file #757.4, and IEN is the Internal Entry Number in the
"^DD",757.4,757.401,.01,1,2,"%D",4,0)
Shortcuts sub-file #757.401 where the keyword is stored.
"^DD",757.4,757.401,.01,1,2,"DT")
2941229
"^DD",757.4,757.401,.01,1,3,0)
757.401^AB
"^DD",757.4,757.401,.01,1,3,1)
S ^LEX(757.4,DA(1),1,"AB",$E(X,1,63),DA)=""
"^DD",757.4,757.401,.01,1,3,2)
K ^LEX(757.4,DA(1),1,"AB",$E(X,1,63),DA)
"^DD",757.4,757.401,.01,1,3,"%D",0)
^^5^5^2950211^^
"^DD",757.4,757.401,.01,1,3,"%D",1,0)
^LEX(757.4,SHCT,1,"AB",SC,IEN) - Where SHCT is the Internal Entry Number in 
"^DD",757.4,757.401,.01,1,3,"%D",2,0)
the Shortcuts file, SC is a 63 character of the shortcut to look for in the
"^DD",757.4,757.401,.01,1,3,"%D",3,0)
users input, and IEN is the Internal Entry Number in the Shortcuts sub-file
"^DD",757.4,757.401,.01,1,3,"%D",4,0)
#757.401 where the shortcut is stored.
"^DD",757.4,757.401,.01,1,3,"%D",5,0)

"^DD",757.4,757.401,.01,1,3,"DT")
2941229
"^DD",757.4,757.401,.01,3)
Shortcut must be 2-63 characters in length.
"^DD",757.4,757.401,.01,21,0)
^^2^2^2950211^^^^
"^DD",757.4,757.401,.01,21,1,0)
Shortcut to look for in the users input while searching the Expression file
"^DD",757.4,757.401,.01,21,2,0)
#757.01 of the Lexicon.
"^DD",757.4,757.401,.01,"DT")
2950211
"^DD",757.4,757.401,1,0)
CONTEXT^RP757.41'^LEX(757.41,^0;2^Q
"^DD",757.4,757.401,1,1,0)
^.1
"^DD",757.4,757.401,1,1,1,0)
757.4^ARA^MUMPS
"^DD",757.4,757.401,1,1,1,1)
D SRA^LEXNDX6
"^DD",757.4,757.401,1,1,1,2)
D KRA^LEXNDX6
"^DD",757.4,757.401,1,1,1,"%D",0)
^^6^6^2950211^^^^
"^DD",757.4,757.401,1,1,1,"%D",1,0)
^LEX(757.4,"ARA",SC,CXT,SHCT,IEN) - Where SC is the shortcut to look for in 
"^DD",757.4,757.401,1,1,1,"%D",2,0)
the users input, CXT is the context in which the shortcut is used (pointer to
"^DD",757.4,757.401,1,1,1,"%D",3,0)
#757.41), SHCT is the Internal Entry Number of the Shortcuts file #757.4 
"^DD",757.4,757.401,1,1,1,"%D",4,0)
where the Expression pointer is stored, and IEN is the Internal Entry Number
"^DD",757.4,757.401,1,1,1,"%D",5,0)
in the Shortcuts sub-file #757.401 where the shortcut/context combination
"^DD",757.4,757.401,1,1,1,"%D",6,0)
is stored.
"^DD",757.4,757.401,1,1,1,"DT")
2950117
"^DD",757.4,757.401,1,21,0)
^^6^6^2950211^^^^
"^DD",757.4,757.401,1,21,1,0)
Pointer to the Shortcut Context file.  The context of the shortcut set
"^DD",757.4,757.401,1,21,2,0)
is selectable as a user default.  This enables the same shortcut to
"^DD",757.4,757.401,1,21,3,0)
represent different expressions based on the context selected by the user.
"^DD",757.4,757.401,1,21,4,0)
During searches of the Lexicon, if the shortcut is found in the 
"^DD",757.4,757.401,1,21,5,0)
user's input (exact match), and the shortcut context is contained in the
"^DD",757.4,757.401,1,21,6,0)
user's defaults, then the expression pointed to will be returned immediately.
"^DD",757.4,757.401,1,"DT")
2950117
"^DD",757.41,757.41,0)
FIELD^^.02^4
"^DD",757.41,757.41,0,"DDA")
N
"^DD",757.41,757.41,0,"DT")
2950425
"^DD",757.41,757.41,0,"IX","B",757.41,.01)

"^DD",757.41,757.41,0,"IX","C",757.41,.01)

"^DD",757.41,757.41,0,"IX","D",757.41,.01)

"^DD",757.41,757.41,0,"NM","SHORTCUT CONTEXT")

"^DD",757.41,757.41,0,"PT",757.2,17)

"^DD",757.41,757.41,0,"PT",757.201,4)

"^DD",757.41,757.41,0,"PT",757.401,1)

"^DD",757.41,757.41,.01,0)
CONTEXT^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",757.41,757.41,.01,1,0)
^.1
"^DD",757.41,757.41,.01,1,1,0)
757.41^B
"^DD",757.41,757.41,.01,1,1,1)
S ^LEX(757.41,"B",$E(X,1,30),DA)=""
"^DD",757.41,757.41,.01,1,1,2)
K ^LEX(757.41,"B",$E(X,1,30),DA)
"^DD",757.41,757.41,.01,1,1,"%D",0)
^^2^2^2950118^^
"^DD",757.41,757.41,.01,1,1,"%D",1,0)
^LEX(757.41,"B",CON,IEN) - Where CON is the name of the context and IEN is the
"^DD",757.41,757.41,.01,1,1,"%D",2,0)
Internal Entry Number in file #757.41 where the context is stored.
"^DD",757.41,757.41,.01,1,2,0)
757.41^C^KWIC
"^DD",757.41,757.41,.01,1,2,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^LEX(757.41,"C",I,DA)=""
"^DD",757.41,757.41,.01,1,2,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^LEX(757.41,"C",I,DA)
"^DD",757.41,757.41,.01,1,2,"%D",0)
^^4^4^2950424^
"^DD",757.41,757.41,.01,1,2,"%D",1,0)
^LEX(757.41,"C",WRD,IEN) - Word index (mixed case) where WRD is a word
"^DD",757.41,757.41,.01,1,2,"%D",2,0)
contained in the Shortcut Context name and IEN is the Internal Entry Number
"^DD",757.41,757.41,.01,1,2,"%D",3,0)
in the Shortcut Context file (757.41) where the Shortcut Context name is 
"^DD",757.41,757.41,.01,1,2,"%D",4,0)
located.
"^DD",757.41,757.41,.01,1,2,"DT")
2950424
"^DD",757.41,757.41,.01,1,3,0)
757.41^D^KWIC
"^DD",757.41,757.41,.01,1,3,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^LEX(757.41,"D",$$UP^XLFSTR(I),DA)=""
"^DD",757.41,757.41,.01,1,3,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^LEX(757.41,"D",$$UP^XLFSTR(I),DA)
"^DD",757.41,757.41,.01,1,3,"%D",0)
^^3^3^2950424^
"^DD",757.41,757.41,.01,1,3,"%D",1,0)
^LEX(757.41,"D",WRD,IEN) - Word index (upper case) where WRD is a word
"^DD",757.41,757.41,.01,1,3,"%D",2,0)
contained in the Shortcut Context name and IEN is the Internal Entry Number in
"^DD",757.41,757.41,.01,1,3,"%D",3,0)
the Shortcut Context file (757.41) where the Shortcut Context name is located.
"^DD",757.41,757.41,.01,1,3,"DT")
2950424
"^DD",757.41,757.41,.01,3)
Context name must be 3-30 characters in length.
"^DD",757.41,757.41,.01,21,0)
^^2^2^2950211^^^^
"^DD",757.41,757.41,.01,21,1,0)
This is the name of the context in which shortcuts will be used.  It is a
"^DD",757.41,757.41,.01,21,2,0)
selectable user default.
"^DD",757.41,757.41,.01,"DT")
2950424
"^DD",757.41,757.41,.02,0)
ALLOW SITE EDIT^S^1:YES;^0;2^Q
"^DD",757.41,757.41,.02,21,0)
^^7^7^2950627^^
"^DD",757.41,757.41,.02,21,1,0)
This is a flag which indicates if a site should be allowed to edit the
"^DD",757.41,757.41,.02,21,2,0)
shortcuts.  Not all shortcut context should be editable at the site.  For
"^DD",757.41,757.41,.02,21,3,0)
example, it should not be permitted to add shortcuts to the context "Null,"
"^DD",757.41,757.41,.02,21,4,0)
which was designed to be void of shortcuts.  Some shortcut context may be
"^DD",757.41,757.41,.02,21,5,0)
provided by and controlled by applications, and should not be edited at the
"^DD",757.41,757.41,.02,21,6,0)
sites.  However, this is the exception and not the rule.  The majority of 
"^DD",757.41,757.41,.02,21,7,0)
the shortcuts will be site editable.
"^DD",757.41,757.41,.02,"DT")
2950425
"^DD",757.41,757.41,1,0)
CONTEXT DESCRIPTION^757.411^^1;0
"^DD",757.41,757.41,1,21,0)
^^1^1^2950106^^
"^DD",757.41,757.41,1,21,1,0)
This is a description of the intent of the context usage.
"^DD",757.41,757.41,2,0)
SCREEN^K^^2;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",757.41,757.41,2,3)
This is Standard MUMPS code.
"^DD",757.41,757.41,2,21,0)
^^5^5^2950109^
"^DD",757.41,757.41,2,21,1,0)
This is MUMPS code in the form of an IF statement without an action to 
"^DD",757.41,757.41,2,21,2,0)
perform, similar Fileman's to DIC("S").  It is used as a screen during look-up
"^DD",757.41,757.41,2,21,3,0)
in the expression file to return only those expressions which qualifiy in this
"^DD",757.41,757.41,2,21,4,0)
context.  For example, the context "ICD DIAGNOSIS/PROCEDURES" has a screen
"^DD",757.41,757.41,2,21,5,0)
which excludes all expressions not linked to an ICD-9 code.
"^DD",757.41,757.41,2,"DT")
2950109
"^DD",757.41,757.411,0)
CONTEXT DESCRIPTION SUB-FIELD^^.01^1
"^DD",757.41,757.411,0,"DT")
2941229
"^DD",757.41,757.411,0,"NM","CONTEXT DESCRIPTION")

"^DD",757.41,757.411,0,"UP")
757.41
"^DD",757.41,757.411,.01,0)
CONTEXT DESCRIPTION^W^^0;1^Q
"^DD",757.41,757.411,.01,21,0)
^^2^2^2950106^^
"^DD",757.41,757.411,.01,21,1,0)
This is a description of the intent of the context usage, and may be displayed
"^DD",757.41,757.411,.01,21,2,0)
during look-up.
"^DD",757.41,757.411,.01,"DT")
2941229
"^DIC",757,757,0)
MAJOR CONCEPT MAP^757P
"^DIC",757,757,0,"GL")
^LEX(757,
"^DIC",757,757,"%D",0)
^^7^7^2960812^^^^
"^DIC",757,757,"%D",1,0)
This file is a map of Major Concepts within the Lexicon Utility and
"^DIC",757,757,"%D",2,0)
contained in the expression file (#757.01).  While the primary purpose 
"^DIC",757,757,"%D",3,0)
of this file is for file maintenance, it also supports various other 
"^DIC",757,757,"%D",4,0)
functions such as the display of classification codes by linking concepts
"^DIC",757,757,"%D",5,0)
to codes and the ability to filter out unwanted search responses by linking
"^DIC",757,757,"%D",6,0)
concepts to semantic classes and types.  NOTE:  Data Entries in this file 
"^DIC",757,757,"%D",7,0)
should not be altered by the site.
"^DIC",757,"B","MAJOR CONCEPT MAP",757)

"^DIC",757.001,757.001,0)
CONCEPT USAGE^757.001
"^DIC",757.001,757.001,0,"GL")
^LEX(757.001,
"^DIC",757.001,757.001,"%D",0)
^^3^3^2950726^^
"^DIC",757.001,757.001,"%D",1,0)
This file records the usage of concepts by applications performing lookups
"^DIC",757.001,757.001,"%D",2,0)
using the Special Lookup Routines provided with the Lexicon Utility.  A listing
"^DIC",757.001,757.001,"%D",3,0)
of concept usage in decending order may be found at the "AF" index.
"^DIC",757.001,"B","CONCEPT USAGE",757.001)

"^DIC",757.01,757.01,0)
EXPRESSIONS^757.01
"^DIC",757.01,757.01,0,"GL")
^LEX(757.01,
"^DIC",757.01,757.01,"%D",0)
^^9^9^2951102^^^^
"^DIC",757.01,757.01,"%D",1,0)
This file contains all text pertaining to the Major Concepts, Concept
"^DIC",757.01,757.01,"%D",2,0)
Synonyms,  Concept Lexical Variants, Synonymous Lexical Variants,
"^DIC",757.01,757.01,"%D",3,0)
displayable text, original displayable text (if the display text has been
"^DIC",757.01,757.01,"%D",4,0)
altered), and the term definitions (when available).  Searches are
"^DIC",757.01,757.01,"%D",5,0)
conducted using the special look-up routine LEXA1.  NOTE:  With the
"^DIC",757.01,757.01,"%D",6,0)
exception of the Definition (6), the data entries in this file should not
"^DIC",757.01,757.01,"%D",7,0)
be altered by the site.  This file requires re-indexing to occur in a 
"^DIC",757.01,757.01,"%D",8,0)
specified sequence.  The complete re-indexing instructions are included 
"^DIC",757.01,757.01,"%D",9,0)
in the Technical Manual.
"^DIC",757.01,"B","EXPRESSIONS",757.01)

"^DIC",757.011,757.011,0)
EXPRESSION TYPE^757.011
"^DIC",757.011,757.011,0,"GL")
^LEX(757.011,
"^DIC",757.011,757.011,"%D",0)
^^3^3^2950511^
"^DIC",757.011,757.011,"%D",1,0)
This file contains the type of the expression (i.e., Major Concept, Synonyms,
"^DIC",757.011,757.011,"%D",2,0)
Lexical Variants).  NOTE:  Data entries in this file should not be altered by
"^DIC",757.011,757.011,"%D",3,0)
the site.
"^DIC",757.011,"B","EXPRESSION TYPE",757.011)

"^DIC",757.014,757.014,0)
EXPRESSION FORM^757.014
"^DIC",757.014,757.014,0,"GL")
^LEX(757.014,
"^DIC",757.014,757.014,"%D",0)
^^3^3^2940928^^^^
"^DIC",757.014,757.014,"%D",1,0)
This file contains the form of the expression (as taken from the Unified
"^DIC",757.014,757.014,"%D",2,0)
Medical Language System).  NOTE:  Data Entries in this file should not be
"^DIC",757.014,757.014,"%D",3,0)
altered by the site
"^DIC",757.014,"B","EXPRESSION FORM",757.014)

"^DIC",757.02,757.02,0)
CODES^757.02IP
"^DIC",757.02,757.02,0,"GL")
^LEX(757.02,
"^DIC",757.02,757.02,"%D",0)
^^14^14^2940901^^^^
"^DIC",757.02,757.02,"%D",1,0)
Contains the Classification Codes from the Intl' Classification of Diseases
"^DIC",757.02,757.02,"%D",2,0)
and Diagnosis (ICD), Current Procedural Terminology (CPT), Diagnostic and 
"^DIC",757.02,757.02,"%D",3,0)
Statistical Manual of Mental Disorders (DSM), Systematic Nomenclature of 
"^DIC",757.02,757.02,"%D",4,0)
Medicine (SNOMED), North American Nursing Diagnosis Association (NANDA), 
"^DIC",757.02,757.02,"%D",5,0)
Nursing Interventions (NIC), Omaha Nursing Diagnosis Set (OMA), AI/Rheum
"^DIC",757.02,757.02,"%D",6,0)
National Library of Medicine (AIR), American College of Radiology - Radiology
"^DIC",757.02,757.02,"%D",7,0)
Diagnosis (ACR), Computer Stored Ambulatory Records Term File (COSTAR), 
"^DIC",757.02,757.02,"%D",8,0)
Coding Symbol Thesaurus, Adverse Reaction Terms (COSTART), National Institute 
"^DIC",757.02,757.02,"%D",9,0)
of Health, Thesaurus (CRISP), Diagnostic Prompting System (DXPLAIN), 
"^DIC",757.02,757.02,"%D",10,0)
McMaster University List of Epidemiology Terms (MCM) and the Universal 
"^DIC",757.02,757.02,"%D",11,0)
Medical Device Nomenclature System (UMD).  NOTE:  Data Entries in this file
"^DIC",757.02,757.02,"%D",12,0)
should not be altered by the site This file requires re-indexing to occur 
"^DIC",757.02,757.02,"%D",13,0)
in a specified sequence.  The complete re-indexing instructions are included
"^DIC",757.02,757.02,"%D",14,0)
in the Technical Manual.
"^DIC",757.02,"B","CODES",757.02)

"^DIC",757.03,757.03,0)
CODING SYSTEMS^757.03I
"^DIC",757.03,757.03,0,"GL")
^LEX(757.03,
"^DIC",757.03,757.03,"%D",0)
^^3^3^2960905^^^^
"^DIC",757.03,757.03,"%D",1,0)
This file contains the discriptive titles for medical terminology and
"^DIC",757.03,757.03,"%D",2,0)
diagnosis and classification systems.  NOTE:  Data Entries in this file
"^DIC",757.03,757.03,"%D",3,0)
should not be altered by the site
"^DIC",757.03,"B","CODING SYSTEMS",757.03)

"^DIC",757.04,757.04,0)
EXCLUDED WORDS^757.04
"^DIC",757.04,757.04,0,"GL")
^LEX(757.04,
"^DIC",757.04,757.04,"%D",0)
^^5^5^2940901^^^^
"^DIC",757.04,757.04,"%D",1,0)
This file contains words which are meant to be excluded either from
"^DIC",757.04,757.04,"%D",2,0)
indexing, look-up, or both indexing and look-up.  NOTE:  Data Entries in 
"^DIC",757.04,757.04,"%D",3,0)
this file should not be altered by the site  This file requires re-indexing
"^DIC",757.04,757.04,"%D",4,0)
to occur in a specified sequence.  The complete re-indexing instructions
"^DIC",757.04,757.04,"%D",5,0)
are included in the Technical Manual.
"^DIC",757.04,"B","EXCLUDED WORDS",757.04)

"^DIC",757.05,757.05,0)
REPLACEMENT WORDS^757.05I
"^DIC",757.05,757.05,0,"GL")
^LEX(757.05,
"^DIC",757.05,757.05,"%D",0)
^^5^5^2940901^^^^
"^DIC",757.05,757.05,"%D",1,0)
If the user input contains one of the words (single word) in this file, it
"^DIC",757.05,757.05,"%D",2,0)
will be replaced by the corresponding term (one or more words).  NOTE:  Data
"^DIC",757.05,757.05,"%D",3,0)
Entries in this file should not be altered by the site.  This file requires
"^DIC",757.05,757.05,"%D",4,0)
re-indexing to occur in a specified sequence.  The complete re-indexing 
"^DIC",757.05,757.05,"%D",5,0)
instructions are included in the Technical Manual.
"^DIC",757.05,"B","REPLACEMENT WORDS",757.05)

"^DIC",757.06,757.06,0)
UNRESOLVED NARRATIVES^757.06
"^DIC",757.06,757.06,0,"GL")
^LEX(757.06,
"^DIC",757.06,757.06,"%D",0)
^^17^17^2950315^^^^
"^DIC",757.06,757.06,"%D",1,0)
This file provides feedback from the sites regarding the content of the 
"^DIC",757.06,757.06,"%D",2,0)
Lexicon.  This is done either by a user through a calling application
"^DIC",757.06,757.06,"%D",3,0)
(user unresolved narratives) or by the calling application (application
"^DIC",757.06,757.06,"%D",4,0)
unresolved narratives).  USER UNRESOLVED NARRATIVES occur when the user 
"^DIC",757.06,757.06,"%D",5,0)
searches the Lexicon and fails to find a suitable expression in 
"^DIC",757.06,757.06,"%D",6,0)
the Expression file (#757.01).  If the user select to use his/her original
"^DIC",757.06,757.06,"%D",7,0)
text, then user's input is temporarily stored in this file.  However, for a
"^DIC",757.06,757.06,"%D",8,0)
User Unresolved Narrative to be stored, the calling application must be 
"^DIC",757.06,757.06,"%D",9,0)
defined in the Subset Definition file (757.2) and have the Unresolved 
"^DIC",757.06,757.06,"%D",10,0)
Narrative flag set to 1.  APPLICATION UNRESOLVED NARRATIVE occur when an
"^DIC",757.06,757.06,"%D",11,0)
application detects a problem with an expression in the Expression file 
"^DIC",757.06,757.06,"%D",12,0)
(757.01).  The application can return the Internal Entry Number (IEN) of 
"^DIC",757.06,757.06,"%D",13,0)
that expression along with a short comment stating the problem. Periodically
"^DIC",757.06,757.06,"%D",14,0)
the entries in this file will be packed up into a mail message and sent 
"^DIC",757.06,757.06,"%D",15,0)
to G.LEXICON@ISC-SLC.VA.GOV for consideration for possible inclusion
"^DIC",757.06,757.06,"%D",16,0)
in the Lexicon.  After the mail message is sent the entries in this
"^DIC",757.06,757.06,"%D",17,0)
file are deleted.  NOTE:  This file is exported without data.
"^DIC",757.06,"B","UNRESOLVED NARRATIVES",757.06)

"^DIC",757.1,757.1,0)
SEMANTIC MAP^757.1IP
"^DIC",757.1,757.1,0,"GL")
^LEX(757.1,
"^DIC",757.1,757.1,"%D",0)
^^8^8^2950316^^^^
"^DIC",757.1,757.1,"%D",1,0)
This file maps semantic classes and semantic types to the major concept,
"^DIC",757.1,757.1,"%D",2,0)
providing contextual meaning to both the term as well as the words
"^DIC",757.1,757.1,"%D",3,0)
contained in the term.  This semantic meaning, when applied to the terms,
"^DIC",757.1,757.1,"%D",4,0)
is used as a filter during term file look-ups.  NOTE:  Semantic classes 
"^DIC",757.1,757.1,"%D",5,0)
are defined in file #757.11 and semantic types are defined in file #757.12.
"^DIC",757.1,757.1,"%D",6,0)
Data Entries in this file should not be altered at the sites.  This file 
"^DIC",757.1,757.1,"%D",7,0)
requires re-indexing to occur in a specified sequence.  The complete 
"^DIC",757.1,757.1,"%D",8,0)
re-indexing instructions are included in the Technical Manual.
"^DIC",757.1,"B","SEMANTIC MAP",757.1)

"^DIC",757.11,757.11,0)
SEMANTIC CLASSES^757.11
"^DIC",757.11,757.11,0,"GL")
^LEX(757.11,
"^DIC",757.11,757.11,"%D",0)
^^3^3^2950316^^^^
"^DIC",757.11,757.11,"%D",1,0)
This file contains the definitions of the semantical classes (groupings of
"^DIC",757.11,757.11,"%D",2,0)
related semantical types).  NOTE:  Data Entries in this file should not be
"^DIC",757.11,757.11,"%D",3,0)
altered at the sites.
"^DIC",757.11,"B","SEMANTIC CLASSES",757.11)

"^DIC",757.12,757.12,0)
SEMANTIC TYPES^757.12I
"^DIC",757.12,757.12,0,"GL")
^LEX(757.12,
"^DIC",757.12,757.12,"%D",0)
^^2^2^2960812^^^^
"^DIC",757.12,757.12,"%D",1,0)
This file contains the definitions of the semantical types.  NOTE:  Data 
"^DIC",757.12,757.12,"%D",2,0)
Entries in this file should not be altered at the sites.
"^DIC",757.12,"B","SEMANTIC TYPES",757.12)

"^DIC",757.2,757.2,0)
SUBSET DEFINITIONS^757.2
"^DIC",757.2,757.2,0,"GL")
^LEXT(757.2,
"^DIC",757.2,757.2,"%D",0)
^^10^10^2941012^^^^
"^DIC",757.2,757.2,"%D",1,0)
This file contains the definitions for vocabulary subsets in the Clinical
"^DIC",757.2,757.2,"%D",2,0)
Lexicon, application definitions and user defaults (by application).
"^DIC",757.2,757.2,"%D",3,0)
These vocabularies (defined primarily by the search filter and the index
"^DIC",757.2,757.2,"%D",4,0)
to be used while conducting searches) may be used during look-up in lieu
"^DIC",757.2,757.2,"%D",5,0)
of the main expression file (if indicated by either the application
"^DIC",757.2,757.2,"%D",6,0)
definition or the user's preferences).  NOTE:  With the exception of setting
"^DIC",757.2,757.2,"%D",7,0)
user defaults (#200) using the Lexicon utilities/options, data 
"^DIC",757.2,757.2,"%D",8,0)
entries in this file should not be altered at the sites.  This file requires
"^DIC",757.2,757.2,"%D",9,0)
re-indexing to occur in a specified sequence.  The complete re-indexing 
"^DIC",757.2,757.2,"%D",10,0)
instructions are included in the Technical Manual.
"^DIC",757.2,"B","SUBSET DEFINITIONS",757.2)

"^DIC",757.21,757.21,0)
SUBSETS^757.21PI
"^DIC",757.21,757.21,0,"GL")
^LEX(757.21,
"^DIC",757.21,757.21,"%",0)
^1.005^0^0
"^DIC",757.21,757.21,"%D",0)
^^8^8^2940901^^^^
"^DIC",757.21,757.21,"%D",1,0)
This file contains vocabulary subsets of the main Expressions file
"^DIC",757.21,757.21,"%D",2,0)
(#757.01).  Each sub-set is defined in file #757.2, and may contain
"^DIC",757.21,757.21,"%D",3,0)
[pointers to] terms which are exclusive to a discipline (i.e., Nursing), a
"^DIC",757.21,757.21,"%D",4,0)
device (i.e., Grid Pad), or an application (i.e., Order Checking,
"^DIC",757.21,757.21,"%D",5,0)
Encounter Form, etc).  NOTE:  Data Entries in this file should not be 
"^DIC",757.21,757.21,"%D",6,0)
altered at the sites.  This file requires re-indexing to occur in a 
"^DIC",757.21,757.21,"%D",7,0)
specified sequence.  The complete re-indexing instructions are included 
"^DIC",757.21,757.21,"%D",8,0)
in the Technical Manual.
"^DIC",757.21,"B","SUBSETS",757.21)

"^DIC",757.3,757.3,0)
LOOK-UP SCREENS^757.3
"^DIC",757.3,757.3,0,"GL")
^LEX(757.3,
"^DIC",757.3,757.3,"%D",0)
^^3^3^2940901^^^^
"^DIC",757.3,757.3,"%D",1,0)
This file contains some generic default screens in a DIC("S") format to be
"^DIC",757.3,757.3,"%D",2,0)
used while looking up terms in the Expression file.  NOTE:  Data Entries in 
"^DIC",757.3,757.3,"%D",3,0)
this file should not be altered at the sites.
"^DIC",757.3,"B","LOOK-UP SCREENS",757.3)

"^DIC",757.31,757.31,0)
DISPLAYS^757.31
"^DIC",757.31,757.31,0,"GL")
^LEX(757.31,
"^DIC",757.31,757.31,"%D",0)
^^3^3^2950117^
"^DIC",757.31,757.31,"%D",1,0)
This file contains some generic default display format to be used while
"^DIC",757.31,757.31,"%D",2,0)
looking up terms in the Expression File.  NOTE:  Data entries in this file
"^DIC",757.31,757.31,"%D",3,0)
should not be altered at the site.
"^DIC",757.31,"B","DISPLAYS",757.31)

"^DIC",757.4,757.4,0)
SHORTCUTS^757.4P
"^DIC",757.4,757.4,0,"GL")
^LEX(757.4,
"^DIC",757.4,757.4,"%D",0)
^^6^6^2950211^^^
"^DIC",757.4,757.4,"%D",1,0)
This file contains a list of expressions (pointers) from the expression file
"^DIC",757.4,757.4,"%D",2,0)
#757.01 and shortcuts by context.  The expression(s) pointed to will be returned
"^DIC",757.4,757.4,"%D",3,0)
immediately if any of the context sensitive shortcuts associated with that
"^DIC",757.4,757.4,"%D",4,0)
expression are detected (exact match) in the users input.  The context must be
"^DIC",757.4,757.4,"%D",5,0)
a default value stored in the user defaults in the Subset Definition file
"^DIC",757.4,757.4,"%D",6,0)
#757.2 to permit the use of the shortcuts.
"^DIC",757.4,"B","SHORTCUTS",757.4)

"^DIC",757.41,757.41,0)
SHORTCUT CONTEXT^757.41
"^DIC",757.41,757.41,0,"GL")
^LEX(757.41,
"^DIC",757.41,757.41,"%D",0)
7^^6^6^2950211^^^
"^DIC",757.41,757.41,"%D",1,0)
The Lexicon has the capability to maintain several
"^DIC",757.41,757.41,"%D",2,0)
sets of shortcuts to rapidly access the expression file.
"^DIC",757.41,757.41,"%D",3,0)
Each of these shortcut sets is named by the context for which
"^DIC",757.41,757.41,"%D",4,0)
the shortcut set was meant to have been used.  The user may
"^DIC",757.41,757.41,"%D",5,0)
select this shortcut set by it's context name as their default
"^DIC",757.41,757.41,"%D",6,0)
set of shortcuts to use while searching the Lexicon.
"^DIC",757.41,"B","SHORTCUT CONTEXT",757.41)

**INSTALL NAME**
GMPL*2.0*7
"BLD",131,0)
GMPL*2.0*7^PROBLEM LIST^0^^y
"BLD",131,1,0)
^^2^2^2960925^
"BLD",131,1,1,0)
This patch changes the namespace and global reference from the Clinical Lexicon
"BLD",131,1,2,0)
Utility v 1.0 (GMPT) to the Lexicon Utility v 2.0 (LEX).
"BLD",131,4,0)
^9.64PA^^
"BLD",131,"KRN",0)
^9.67PA^8994^15
"BLD",131,"KRN",.4,0)
.4
"BLD",131,"KRN",.401,0)
.401
"BLD",131,"KRN",.402,0)
.402
"BLD",131,"KRN",.403,0)
.403
"BLD",131,"KRN",.5,0)
.5
"BLD",131,"KRN",.84,0)
.84
"BLD",131,"KRN",3.6,0)
3.6
"BLD",131,"KRN",9.2,0)
9.2
"BLD",131,"KRN",9.8,0)
9.8
"BLD",131,"KRN",9.8,"NM",0)
^9.68A^5^5
"BLD",131,"KRN",9.8,"NM",1,0)
GMPLBLDC^^0^B30113550
"BLD",131,"KRN",9.8,"NM",2,0)
GMPLHIST^^0^B10811073
"BLD",131,"KRN",9.8,"NM",3,0)
GMPLENFM^^0^B11984760
"BLD",131,"KRN",9.8,"NM",4,0)
GMPLUTL1^^0^B15027510
"BLD",131,"KRN",9.8,"NM",5,0)
GMPLX^^0^B22856107
"BLD",131,"KRN",9.8,"NM","B","GMPLBLDC",1)

"BLD",131,"KRN",9.8,"NM","B","GMPLENFM",3)

"BLD",131,"KRN",9.8,"NM","B","GMPLHIST",2)

"BLD",131,"KRN",9.8,"NM","B","GMPLUTL1",4)

"BLD",131,"KRN",9.8,"NM","B","GMPLX",5)

"BLD",131,"KRN",19,0)
19
"BLD",131,"KRN",19.1,0)
19.1
"BLD",131,"KRN",101,0)
101
"BLD",131,"KRN",409.61,0)
409.61
"BLD",131,"KRN",8994,0)
8994
"BLD",131,"KRN",8995,0)
8995
"BLD",131,"KRN","B",.4,.4)

"BLD",131,"KRN","B",.401,.401)

"BLD",131,"KRN","B",.402,.402)

"BLD",131,"KRN","B",.403,.403)

"BLD",131,"KRN","B",.5,.5)

"BLD",131,"KRN","B",.84,.84)

"BLD",131,"KRN","B",3.6,3.6)

"BLD",131,"KRN","B",9.2,9.2)

"BLD",131,"KRN","B",9.8,9.8)

"BLD",131,"KRN","B",19,19)

"BLD",131,"KRN","B",19.1,19.1)

"BLD",131,"KRN","B",101,101)

"BLD",131,"KRN","B",409.61,409.61)

"BLD",131,"KRN","B",8994,8994)

"BLD",131,"KRN","B",8995,8995)

"BLD",131,"QUES",0)
^9.62^^
"OER",172,0)
172^GMPL^^ALL SERVICES
"OER",172,1,0)
^100.9951PA^15^15
"OER",172,1,1,0)
2759
"OER",172,1,1,1,0)
^100.99511PA^1^1
"OER",172,1,1,1,1,0)
2972
"OER",172,1,2,0)
2760
"OER",172,1,2,1,0)
^100.99511PA^1^1
"OER",172,1,2,1,1,0)
2972
"OER",172,1,3,0)
2764
"OER",172,1,3,1,0)
^100.99511PA^1^1
"OER",172,1,3,1,1,0)
2972
"OER",172,1,4,0)
2765
"OER",172,1,4,1,0)
^100.99511PA^1^1
"OER",172,1,4,1,1,0)
2972
"OER",172,1,5,0)
2783
"OER",172,1,5,1,0)
^100.99511PA^1^1
"OER",172,1,5,1,1,0)
2972
"OER",172,1,6,0)
2763
"OER",172,1,6,1,0)
^100.99511PA^1^1
"OER",172,1,6,1,1,0)
2972
"OER",172,1,7,0)
2762
"OER",172,1,7,1,0)
^100.99511PA^1^1
"OER",172,1,7,1,1,0)
2972
"OER",172,1,8,0)
2761
"OER",172,1,8,1,0)
^100.99511PA^1^1
"OER",172,1,8,1,1,0)
2972
"OER",172,1,9,0)
2768
"OER",172,1,9,1,0)
^100.99511PA^1^1
"OER",172,1,9,1,1,0)
2972
"OER",172,1,10,0)
2769
"OER",172,1,10,1,0)
^100.99511PA^1^1
"OER",172,1,10,1,1,0)
2972
"OER",172,1,11,0)
2773
"OER",172,1,11,1,0)
^100.99511PA^1^1
"OER",172,1,11,1,1,0)
2972
"OER",172,1,12,0)
2771
"OER",172,1,12,1,0)
^100.99511PA^1^1
"OER",172,1,12,1,1,0)
2972
"OER",172,1,13,0)
2767
"OER",172,1,13,1,0)
^100.99511PA^10^10
"OER",172,1,13,1,1,0)
2972
"OER",172,1,13,1,2,0)
2973
"OER",172,1,13,1,3,0)
2974
"OER",172,1,13,1,4,0)
2975
"OER",172,1,13,1,5,0)
2976
"OER",172,1,13,1,6,0)
2977
"OER",172,1,13,1,7,0)
2978
"OER",172,1,13,1,8,0)
2979
"OER",172,1,13,1,9,0)
2980
"OER",172,1,13,1,10,0)
2981
"OER",172,1,14,0)
2774
"OER",172,1,14,1,0)
^100.99511PA^1^1
"OER",172,1,14,1,1,0)
2972
"OER",172,1,15,0)
2775
"OER",172,1,15,1,0)
^100.99511PA^1^1
"OER",172,1,15,1,1,0)
2972
"PKG",172,-1)
1^1
"PKG",172,0)
PROBLEM LIST^GMPL^Automated Patient Problem List
"PKG",172,22,0)
^9.49I^1^1
"PKG",172,22,1,0)
2.0^2940825^2941103
"PKG",172,22,1,"PAH",1,0)
7
"PKG",172,22,1,"PAH",1,1,0)
^^2^2^2961003
"PKG",172,22,1,"PAH",1,1,1,0)
This patch changes the namespace and global reference from the Clinical Lexicon
"PKG",172,22,1,"PAH",1,1,2,0)
Utility v 1.0 (GMPT) to the Lexicon Utility v 2.0 (LEX).
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
5
"RTN","GMPLBLDC")
0^1^B30113550
"RTN","GMPLBLDC",1,0)
GMPLBLDC ; SLC/MKB -- Build Problem Selection Categories ;8/10/95  15:39
"RTN","GMPLBLDC",2,0)
 ;;2.0;Problem List;**3,7**;Aug 25, 1994
"RTN","GMPLBLDC",3,0)
EN ; -- main entry point for GMPL SELECTION GROUP BUILD
"RTN","GMPLBLDC",4,0)
 D EN^VALM("GMPL SELECTION GROUP BUILD")
"RTN","GMPLBLDC",5,0)
 Q
"RTN","GMPLBLDC",6,0)
 ;
"RTN","GMPLBLDC",7,0)
HDR ; -- header code
"RTN","GMPLBLDC",8,0)
 N NAME,NUM,DATE S NUM=+^TMP("GMPLST",$J,0)_" problem"_$S(+^TMP("GMPLST",$J,0)'=1:"s",1:"")
"RTN","GMPLBLDC",9,0)
 S DATE="Last Modified: "_$S(+$P(GMPLGRP,U,3):$$FMTE^XLFDT($P(GMPLGRP,U,3)),1:"<new category>")
"RTN","GMPLBLDC",10,0)
 S VALMHDR(1)=DATE_$J(NUM,79-$L(DATE))
"RTN","GMPLBLDC",11,0)
 S NAME=$P(GMPLGRP,U,2),VALMHDR(2)=$J(NAME,$L(NAME)\2+41)
"RTN","GMPLBLDC",12,0)
 Q
"RTN","GMPLBLDC",13,0)
 ;
"RTN","GMPLBLDC",14,0)
INIT ; -- init variables and list array
"RTN","GMPLBLDC",15,0)
 S GMPLGRP=$$GROUP^GMPLBLD2("L") I GMPLGRP="^" S VALMQUIT=1 Q
"RTN","GMPLBLDC",16,0)
 L +^GMPL(125.11,+GMPLGRP,0):1 I '$T D  G INIT
"RTN","GMPLBLDC",17,0)
 . W $C(7),!!,"This category is currently being edited by another user!",!
"RTN","GMPLBLDC",18,0)
 S GMPLMODE="E",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",19,0)
 D GETLIST,BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLDC",20,0)
 Q
"RTN","GMPLBLDC",21,0)
 ;
"RTN","GMPLBLDC",22,0)
GETLIST ; Build ^TMP("GMPLIST",$J,#) of problems
"RTN","GMPLBLDC",23,0)
 N SEQ,IFN,ITEM,PROB,CNT K ^TMP("GMPLIST",$J) S CNT=0
"RTN","GMPLBLDC",24,0)
 W !,"Searching for the problems ..."
"RTN","GMPLBLDC",25,0)
 F IFN=0:0 S IFN=$O(^GMPL(125.12,"B",+GMPLGRP,IFN)) Q:IFN'>0  D
"RTN","GMPLBLDC",26,0)
 . S ITEM=$G(^GMPL(125.12,IFN,0)),SEQ=$P(ITEM,U,2),PROB=$P(ITEM,U,3)
"RTN","GMPLBLDC",27,0)
 . S ^TMP("GMPLIST",$J,IFN)=$P(ITEM,U,2,5),CNT=CNT+1 ; seq ^ prob ^ text ^ code
"RTN","GMPLBLDC",28,0)
 . S (^TMP("GMPLIST",$J,"PROB",PROB),^TMP("GMPLIST",$J,"SEQ",SEQ))=IFN ; Xrefs
"RTN","GMPLBLDC",29,0)
 S ^TMP("GMPLIST",$J,0)=CNT
"RTN","GMPLBLDC",30,0)
 Q
"RTN","GMPLBLDC",31,0)
 ;
"RTN","GMPLBLDC",32,0)
BUILD(LIST,MODE) ; Build ^TMP("GMPLST",$J,) of current items in LIST for display
"RTN","GMPLBLDC",33,0)
 N SEQ,LCNT,NUM,PROB,TEXT,IFN,ITEM,CODE D CLEAN^VALM10
"RTN","GMPLBLDC",34,0)
 I $P($G(^TMP("GMPLIST",$J,0)),U,1)'>0 S ^TMP("GMPLST",$J,1,0)="   ",^TMP("GMPLST",$J,2,0)="No items available.",^TMP("GMPLST",$J,0)="0^2",VALMCNT=2 Q
"RTN","GMPLBLDC",35,0)
 S (LCNT,NUM,SEQ)=0
"RTN","GMPLBLDC",36,0)
 F  S SEQ=$O(^TMP("GMPLIST",$J,"SEQ",SEQ)) Q:SEQ'>0  D
"RTN","GMPLBLDC",37,0)
 . S IFN=^TMP("GMPLIST",$J,"SEQ",SEQ),LCNT=LCNT+1,NUM=NUM+1
"RTN","GMPLBLDC",38,0)
 . S PROB=$P(^TMP("GMPLIST",$J,IFN),U,2),TEXT=$P(^TMP("GMPLIST",$J,IFN),U,3),CODE=$P(^TMP("GMPLIST",$J,IFN),U,4)
"RTN","GMPLBLDC",39,0)
 . S ^TMP("GMPLST",$J,LCNT,0)=$S(MODE="I":$J("<"_SEQ_">",8),1:"        ")_$J(NUM,4)_" "_TEXT
"RTN","GMPLBLDC",40,0)
 . S:$L(CODE) ^TMP("GMPLST",$J,LCNT,0)=^TMP("GMPLST",$J,LCNT,0)_" ("_CODE_")"
"RTN","GMPLBLDC",41,0)
 . D CNTRL^VALM10(LCNT,9,5,IOINHI,IOINORM)
"RTN","GMPLBLDC",42,0)
 . S ^TMP("GMPLST",$J,"B",NUM)=IFN
"RTN","GMPLBLDC",43,0)
 S ^TMP("GMPLST",$J,0)=NUM_U_LCNT,VALMCNT=LCNT
"RTN","GMPLBLDC",44,0)
 Q
"RTN","GMPLBLDC",45,0)
 ;
"RTN","GMPLBLDC",46,0)
HELP ; -- help code
"RTN","GMPLBLDC",47,0)
 N X
"RTN","GMPLBLDC",48,0)
 W !!?4,"You may take a variety of actions from this prompt.  To update"
"RTN","GMPLBLDC",49,0)
 W !?4,"this category you may add new problems or remove an existing"
"RTN","GMPLBLDC",50,0)
 W !?4,"one; you may also change the text or code displayed, or the order"
"RTN","GMPLBLDC",51,0)
 W !?4,"in which each problem is displayed.  Select View w/wo Seq Numbers"
"RTN","GMPLBLDC",52,0)
 W !?4,"to toggle seeing the sequence number in addition to the display"
"RTN","GMPLBLDC",53,0)
 W !?4,"number per problem.  If necessary, the current category may be"
"RTN","GMPLBLDC",54,0)
 W !?4,"deleted; you may change to a different category to continue editing."
"RTN","GMPLBLDC",55,0)
 W !!,"Press <return> to continue ..." R X:DTIME
"RTN","GMPLBLDC",56,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLBLDC",57,0)
 Q
"RTN","GMPLBLDC",58,0)
 ;
"RTN","GMPLBLDC",59,0)
EXIT ; -- exit code
"RTN","GMPLBLDC",60,0)
 I $D(GMPLSAVE),$$CKSAVE^GMPLBLD2 D
"RTN","GMPLBLDC",61,0)
 . D SAVE^GMPLBLD2
"RTN","GMPLBLDC",62,0)
 . S ^GMPL(125.11,+GMPLGRP,0)=$P(GMPLGRP,U,2)_U_DT
"RTN","GMPLBLDC",63,0)
 L -^GMPL(125.11,+GMPLGRP,0)
"RTN","GMPLBLDC",64,0)
 K GMPLIST,GMPLST,GMPLMODE,GMPLGRP,GMPLSAVE,GMPREBLD,GMPQUIT,RT1,TMPITEM
"RTN","GMPLBLDC",65,0)
 K VALMBCK,VALMCNT,VALMSG,VALMHDR
"RTN","GMPLBLDC",66,0)
 K ^TMP("GMPLIST",$J),^TMP("GMPLST",$J)
"RTN","GMPLBLDC",67,0)
 Q
"RTN","GMPLBLDC",68,0)
 ;
"RTN","GMPLBLDC",69,0)
ADD ; Add new problem(s)
"RTN","GMPLBLDC",70,0)
 N X,Y,SEQ,CODE,IFN,GMPVOCAB,GMPQUIT,GMPREBLD S VALMBCK=""
"RTN","GMPLBLDC",71,0)
 S GMPVOCAB=$$VOCAB^GMPLX1 Q:GMPVOCAB="^"
"RTN","GMPLBLDC",72,0)
 F  D  Q:$D(GMPQUIT)  W !!
"RTN","GMPLBLDC",73,0)
 . S (X,Y)="" D SEARCH^GMPLX(.X,.Y,"PROBLEM: ","1",GMPVOCAB)
"RTN","GMPLBLDC",74,0)
 . I +Y'>0 S GMPQUIT=1 Q
"RTN","GMPLBLDC",75,0)
 . S X=$$TEXT^GMPLBLD1(X) I X="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",76,0)
 . S CODE=$$CODE^GMPLBLD1($G(Y(1))) I CODE="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",77,0)
 . S RT1="^TMP(""GMPLIST"",$J,""SEQ"",",SEQ=+$$LAST^GMPLBLD2(RT1)+1 ; dflt = next #
"RTN","GMPLBLDC",78,0)
 . S SEQ=$$SEQ^GMPLBLD1(SEQ) I SEQ="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",79,0)
 . S IFN=$$TMPIFN^GMPLBLD1,^TMP("GMPLIST",$J,0)=^TMP("GMPLIST",$J,0)+1
"RTN","GMPLBLDC",80,0)
 . S ^TMP("GMPLIST",$J,IFN)=SEQ_U_+Y_U_X_U_CODE ; seq ^ # ^ text ^ code
"RTN","GMPLBLDC",81,0)
 . S (^TMP("GMPLIST",$J,"PROB",+Y),^TMP("GMPLIST",$J,"SEQ",SEQ))=IFN,GMPREBLD=1
"RTN","GMPLBLDC",82,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLDC",83,0)
 S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",84,0)
 Q
"RTN","GMPLBLDC",85,0)
 ;
"RTN","GMPLBLDC",86,0)
REMOVE ; Remove problem from group
"RTN","GMPLBLDC",87,0)
 N NUM,IFN S VALMBCK=""
"RTN","GMPLBLDC",88,0)
 S NUM=$$SEL1^GMPLBLD1 G:NUM="^" RMQ
"RTN","GMPLBLDC",89,0)
 S IFN=$P($G(^TMP("GMPLST",$J,"B",NUM)),U,1) G:+IFN'>0 RMQ
"RTN","GMPLBLDC",90,0)
 I "@"[$G(^TMP("GMPLIST",$J,IFN)) W $C(7),!!,"Problem does not exist in this category!" H 2 G RMQ
"RTN","GMPLBLDC",91,0)
 I '$$SURE^GMPLX W !?5,"< Nothing removed! >" H 1 G RMQ
"RTN","GMPLBLDC",92,0)
 D DELETE^GMPLBLD1(IFN) S VALMBCK="R",GMPLSAVE=1
"RTN","GMPLBLDC",93,0)
 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLDC",94,0)
RMQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",95,0)
 Q
"RTN","GMPLBLDC",96,0)
 ;
"RTN","GMPLBLDC",97,0)
EDIT ; Edit problem text and code
"RTN","GMPLBLDC",98,0)
 N NUM,SEL,IFN,PIECE,CODE,PROB,PROBLEM,GMPQUIT,GMPREBLD S VALMBCK=""
"RTN","GMPLBLDC",99,0)
 S SEL=$$SEL^GMPLBLD1 G:SEL="^" EDQ
"RTN","GMPLBLDC",100,0)
 F PIECE=1:1:$L(SEL,",") D  Q:$D(GMPQUIT)  W !
"RTN","GMPLBLDC",101,0)
 . S NUM=$P(SEL,",",PIECE) Q:NUM'>0
"RTN","GMPLBLDC",102,0)
 . S IFN=$P($G(^TMP("GMPLST",$J,"B",NUM)),U,1) Q:IFN'>0
"RTN","GMPLBLDC",103,0)
 . I "@"[$G(^TMP("GMPLIST",$J,IFN)) W $C(7),!!,"Problem #"_NUM_" does not exist in this category!" H 2 Q
"RTN","GMPLBLDC",104,0)
 . W !!,">>>  Problem #"_NUM S PROBLEM=^TMP("GMPLIST",$J,IFN)
"RTN","GMPLBLDC",105,0)
 . W:$P(PROBLEM,U,2)>1 " = "_$G(^LEX(757.01,+$P(PROBLEM,U,2),0)) W ! ; KER
"RTN","GMPLBLDC",106,0)
 . S PROB=$$TEXT^GMPLBLD1($P(PROBLEM,U,3)) I PROB="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",107,0)
 . I PROB="@" D DELETE^GMPLBLD1(IFN) S GMPREBLD=1 Q
"RTN","GMPLBLDC",108,0)
 . S CODE=$$CODE^GMPLBLD1($P(PROBLEM,U,4)) I CODE="^" S GMPQUIT=1 Q
"RTN","GMPLBLDC",109,0)
 . S ^TMP("GMPLIST",$J,IFN)=$P(PROBLEM,U,1,2)_U_PROB_U_CODE,GMPREBLD=1
"RTN","GMPLBLDC",110,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLDC",111,0)
EDQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLDC",112,0)
 Q
"RTN","GMPLENFM")
0^3^B11984760
"RTN","GMPLENFM",1,0)
GMPLENFM ; SLC/MKB -- Problem List Enc Form utilities ;12-15-95 12:07
"RTN","GMPLENFM",2,0)
 ;;2.0;Problem List;**3,4,7**;Aug 25, 1994
"RTN","GMPLENFM",3,0)
ACTIVE ; Entry point to build list of active problems for patient DFN in
"RTN","GMPLENFM",4,0)
 ;  ^TMP("IB",$J,"INTERFACES",DFN,"GMP PATIENT ACTIVE PROBLEMS",#) =
"RTN","GMPLENFM",5,0)
 ;      Piece 1:  Problem text
"RTN","GMPLENFM",6,0)
 ;            2:  ICD code
"RTN","GMPLENFM",7,0)
 ;            3:  Date of Onset, in 00/00/00 format
"RTN","GMPLENFM",8,0)
 ;            4:  SC/NSC/"" if problem is serv-conn/not sc/unknown
"RTN","GMPLENFM",9,0)
 ;            5:  Y/N/""    if problem is serv-conn/not sc/unknown
"RTN","GMPLENFM",10,0)
 ;            6:  A/R/C/"" if problem is flagged as from special exposure
"RTN","GMPLENFM",11,0)
 ;                         of Agent Orange/Radiation/Contaminants/none
"RTN","GMPLENFM",12,0)
 ;            7:  Special Exposure, full text of piece 6
"RTN","GMPLENFM",13,0)
 ;
"RTN","GMPLENFM",14,0)
 N IFN,PROB,CNT,GMPL0,GMPL1,SC,NUM,GMPLIST,GMPARAM,GMPLVIEW,GMPTOTAL,GMPDFN,NODE
"RTN","GMPLENFM",15,0)
 Q:$G(DFN)'>0  S GMPDFN=DFN,CNT=0,NODE=$G(^GMPL(125.99,1,0))
"RTN","GMPLENFM",16,0)
 S GMPARAM("VER")=$P(NODE,U,2),GMPARAM("REV")=$P(NODE,U,5)="R",GMPARAM("QUIET")=1
"RTN","GMPLENFM",17,0)
 S GMPLVIEW("ACT")="A",GMPLVIEW("PROV")=0,GMPLVIEW("VIEW")=""
"RTN","GMPLENFM",18,0)
 D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLENFM",19,0)
 F NUM=0:0 S NUM=$O(GMPLIST(NUM)) Q:NUM'>0  D
"RTN","GMPLENFM",20,0)
 . S IFN=GMPLIST(NUM) Q:IFN'>0
"RTN","GMPLENFM",21,0)
 . S GMPL0=$G(^AUPNPROB(IFN,0)),GMPL1=$G(^(1))
"RTN","GMPLENFM",22,0)
 . S PROB=$$PROBTEXT^GMPLX(IFN),CNT=CNT+1
"RTN","GMPLENFM",23,0)
 . I GMPARAM("VER"),$P(GMPL1,U,2)="T" S PROB="$"_PROB
"RTN","GMPLENFM",24,0)
 . S PROB=PROB_U_$P($G(^ICD9(+$P(GMPL0,U),0)),U)
"RTN","GMPLENFM",25,0)
 . S PROB=PROB_U_$$EXTDT^GMPLX($P(GMPL0,U,13)),SC=$P(GMPL1,U,10)
"RTN","GMPLENFM",26,0)
 . S PROB=PROB_U_$S(+SC:"SC^Y",SC=0:"NSC^N",1:"^")
"RTN","GMPLENFM",27,0)
 . S PROB=PROB_U_$S($P(GMPL1,U,11):"A^Agent Orange",$P(GMPL1,U,12):"R^Radiation",$P(GMPL1,U,13):"C^Contaminants",1:"^")
"RTN","GMPLENFM",28,0)
 . S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"GMP PATIENT ACTIVE PROBLEMS",CNT)=PROB
"RTN","GMPLENFM",29,0)
 S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"GMP PATIENT ACTIVE PROBLEMS",0)=CNT
"RTN","GMPLENFM",30,0)
 Q
"RTN","GMPLENFM",31,0)
 ;
"RTN","GMPLENFM",32,0)
SELECT ; Entry point to select common problems to list on form
"RTN","GMPLENFM",33,0)
 ; sets ^TMP("IB",$J,"INTERFACES","GMP SELECT CLINIC COMMON PROBLEMS")
"RTN","GMPLENFM",34,0)
 ;      = ptr to Clinical Lexicon ^ problem text ^ ICD Code (null if unk)
"RTN","GMPLENFM",35,0)
 N X,Y,DIC,PROB D CONFIG^LEXSET("ICD","ICD") ; KER
"RTN","GMPLENFM",36,0)
 K ^TMP("IB",$J,"INTERFACES","GMP SELECT CLINIC COMMON PROBLEMS")
"RTN","GMPLENFM",37,0)
 ; Set a screen here? -- allow only ICD coded problems ??
"RTN","GMPLENFM",38,0)
 S DIC("A")="Select PROBLEM: ",DIC(0)="AEQM",DIC="^LEX(757.01," ; KER
"RTN","GMPLENFM",39,0)
 D ^DIC Q:+Y<0
"RTN","GMPLENFM",40,0)
 S PROB=Y I +Y'>1 S PROB=+Y_U_X ; 'unresolved' -- use narrative
"RTN","GMPLENFM",41,0)
 S PROB=PROB_U_$G(Y(1)) ; Y(1)=ICD Code, if known
"RTN","GMPLENFM",42,0)
 S ^TMP("IB",$J,"INTERFACES","GMP SELECT CLINIC COMMON PROBLEMS")=PROB
"RTN","GMPLENFM",43,0)
 Q
"RTN","GMPLENFM",44,0)
 ;
"RTN","GMPLENFM",45,0)
DSELECT ; Entry point to build list of active problems for patient DFN in
"RTN","GMPLENFM",46,0)
 ;  ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",#) =
"RTN","GMPLENFM",47,0)
 ;      Piece 1:  Problem ien
"RTN","GMPLENFM",48,0)
 ;            2:  Problem text
"RTN","GMPLENFM",49,0)
 ;            3:  ICD code
"RTN","GMPLENFM",50,0)
 ;            4:  Date of Onset, in 00/00/00 format
"RTN","GMPLENFM",51,0)
 ;            5:  SC/NSC/"" if problem is serv-conn/not sc/unknown
"RTN","GMPLENFM",52,0)
 ;            6:  Y/N/""    if problem is serv-conn/not sc/unknown
"RTN","GMPLENFM",53,0)
 ;            7:  A/R/C/"" if problem is flagged as from special exposure
"RTN","GMPLENFM",54,0)
 ;                         of Agent Orange/Radiation/Contaminants/none
"RTN","GMPLENFM",55,0)
 ;            8:  Special Exposure, full text of piece 6
"RTN","GMPLENFM",56,0)
 ;
"RTN","GMPLENFM",57,0)
 ;
"RTN","GMPLENFM",58,0)
 N IFN,PROB,CNT,GMPL0,GMPL1,SC,NUM,GMPLIST,GMPARAM,GMPLVIEW,GMPTOTAL,GMPDFN,NODE
"RTN","GMPLENFM",59,0)
 Q:$G(DFN)'>0  S GMPDFN=DFN,CNT=0,NODE=$G(^GMPL(125.99,1,0))
"RTN","GMPLENFM",60,0)
 S GMPARAM("VER")=$P(NODE,U,2),GMPARAM("REV")=$P(NODE,U,5)="R",GMPARAM("QUIET")=1
"RTN","GMPLENFM",61,0)
 S GMPLVIEW("ACT")="A",GMPLVIEW("PROV")=0,GMPLVIEW("VIEW")=""
"RTN","GMPLENFM",62,0)
 D GETPLIST^GMPLMGR1(.GMPLIST,.GMPTOTAL,.GMPLVIEW)
"RTN","GMPLENFM",63,0)
 F NUM=0:0 S NUM=$O(GMPLIST(NUM)) Q:NUM'>0  D
"RTN","GMPLENFM",64,0)
 . S IFN=GMPLIST(NUM) Q:IFN'>0
"RTN","GMPLENFM",65,0)
 . S GMPL0=$G(^AUPNPROB(IFN,0)),GMPL1=$G(^(1))
"RTN","GMPLENFM",66,0)
 . S PROB=$$PROBTEXT^GMPLX(IFN),CNT=CNT+1
"RTN","GMPLENFM",67,0)
 . I GMPARAM("VER"),$P(GMPL1,U,2)="T" S PROB="$"_PROB
"RTN","GMPLENFM",68,0)
 . S PROB=IFN_U_PROB
"RTN","GMPLENFM",69,0)
 . S PROB=PROB_U_$P($G(^ICD9(+$P(GMPL0,U),0)),U)
"RTN","GMPLENFM",70,0)
 . S PROB=PROB_U_$$EXTDT^GMPLX($P(GMPL0,U,13)),SC=$P(GMPL1,U,10)
"RTN","GMPLENFM",71,0)
 . S PROB=PROB_U_$S(+SC:"SC^Y",SC=0:"NSC^N",1:"^")
"RTN","GMPLENFM",72,0)
 . S PROB=PROB_U_$S($P(GMPL1,U,11):"A^Agent Orange",$P(GMPL1,U,12):"R^Radiation",$P(GMPL1,U,13):"C^Contaminants",1:"^")
"RTN","GMPLENFM",73,0)
 . S ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",CNT)=PROB
"RTN","GMPLENFM",74,0)
 S ^TMP("IB",$J,"INTERFACES","GMP SELECT PATIENT ACTIVE PROBLEMS",0)=CNT
"RTN","GMPLENFM",75,0)
 Q
"RTN","GMPLHIST")
0^2^B10811073
"RTN","GMPLHIST",1,0)
GMPLHIST ; SLC/MKB -- Problem List Historical data ;5/26/94  15:48
"RTN","GMPLHIST",2,0)
 ;;2.0;Problem List;**7**;Aug 25, 1994
"RTN","GMPLHIST",3,0)
DT ; -- add historical data (audit trail) to DT list
"RTN","GMPLHIST",4,0)
 ; Called from ^GMPLDISP, requires AIFN and adds to GMPDT()
"RTN","GMPLHIST",5,0)
 N NODE,DATE,FLD,PROV,OLD,NEW,ROOT,CHNGE
"RTN","GMPLHIST",6,0)
 S NODE=$G(^GMPL(125.8,AIFN,0)) Q:NODE=""
"RTN","GMPLHIST",7,0)
 S DATE=$$EXTDT^GMPLX($P(NODE,U,3)),FLD=+$P(NODE,U,2),PROV=+$P(NODE,U,8)
"RTN","GMPLHIST",8,0)
 S:'PROV PROV=$P(NODE,U,4) ; Who entered vs. provider
"RTN","GMPLHIST",9,0)
 S FLD=FLD_U_$$FLDNAME(+FLD),PROV=$P($G(^VA(200,PROV,0)),U)
"RTN","GMPLHIST",10,0)
 S OLD=$P(NODE,U,5),NEW=$P(NODE,U,6),LCNT=LCNT+1
"RTN","GMPLHIST",11,0)
 I +FLD=1101 D  Q
"RTN","GMPLHIST",12,0)
 . S NODE=$G(^GMPL(125.8,AIFN,1)) ; old note
"RTN","GMPLHIST",13,0)
 . S GMPDT(LCNT,0)=$J(DATE,10)_": NOTE "_$$EXTDT^GMPLX($P(NODE,U,5))_" removed by "_PROV
"RTN","GMPLHIST",14,0)
 . S LCNT=LCNT+1,GMPDT(LCNT,0)="            "_$P(NODE,U,3)
"RTN","GMPLHIST",15,0)
 I +FLD=1.02 D  Q
"RTN","GMPLHIST",16,0)
 . S CHNGE=$S(NEW="H":"removed",OLD="T":"verified",1:"placed back on list")
"RTN","GMPLHIST",17,0)
 . S GMPDT(LCNT,0)=$J(DATE,10)_": PROBLEM "_CHNGE_" by "_PROV
"RTN","GMPLHIST",18,0)
 S GMPDT(LCNT,0)=$J(DATE,10)_": "_$P(FLD,U,2)_" changed by "_PROV,LCNT=LCNT+1
"RTN","GMPLHIST",19,0)
 I +FLD=.12 S GMPDT(LCNT,0)=$J("from ",17)_$S(OLD="A":"ACTIVE",OLD="I":"INACTIVE",1:"UNKNOWN")_" to "_$S(NEW="A":"ACTIVE",NEW="I":"INACTIVE",1:"UNKNOWN") Q
"RTN","GMPLHIST",20,0)
 I (+FLD=.13)!(+FLD=1.07) S GMPDT(LCNT,0)=$J("from ",17)_$$EXTDT^GMPLX(OLD)_" to "_$$EXTDT^GMPLX(NEW) Q
"RTN","GMPLHIST",21,0)
 I +FLD=1.14 S GMPDT(LCNT,0)=$J("from ",17)_$S(OLD="A":"ACUTE",OLD="C":"CHRONIC",1:"UNSPECIFIED")_" to "_$S(NEW="A":"ACUTE",NEW="C":"CHRONIC",1:"UNSPECIFIED") Q
"RTN","GMPLHIST",22,0)
 I +FLD>1.09 S GMPDT(LCNT,0)=$J("from ",17)_$S(+OLD:"YES",OLD=0:"NO",1:"UNKNOWN")_" to "_$S(+NEW:"YES",NEW=0:"NO",1:"UNKNOWN") Q
"RTN","GMPLHIST",23,0)
 I "^.01^.05^1.01^1.04^1.05^1.06^1.08^"[(U_+FLD_U) D
"RTN","GMPLHIST",24,0)
 . S ROOT=$S(+FLD=.01:"ICD9(",+FLD=.05:"AUTNPOV(",+FLD=1.01:"LEX(757.01,",(+FLD=1.04)!(+FLD=1.05):"VA(200,",+FLD=1.06:"DIC(49,",+FLD=1.08:"SC(",1:"") Q:ROOT=""  ; KER
"RTN","GMPLHIST",25,0)
 . S GMPDT(LCNT,0)=$J("from ",17)_$S(OLD:$P(@(U_ROOT_OLD_",0)"),U),1:"UNSPECIFIED")
"RTN","GMPLHIST",26,0)
 . S LCNT=LCNT+1,GMPDT(LCNT,0)=$J("to ",17)_$S(NEW:$P(@(U_ROOT_NEW_",0)"),U),1:"UNSPECIFIED")
"RTN","GMPLHIST",27,0)
 Q
"RTN","GMPLHIST",28,0)
 ;
"RTN","GMPLHIST",29,0)
FLDNAME(NUM) ; Returns field name for display
"RTN","GMPLHIST",30,0)
 N NAME,NM1,NM2,I,J S J=0,NAME=""
"RTN","GMPLHIST",31,0)
 S NM1=".01^.05^.12^.13^1.01^1.02^1.04^1.05^1.06^1.07^1.08^1.09^1.1^1.11^1.12^1.13^1.14^1101"
"RTN","GMPLHIST",32,0)
 F I=1:1:$L(NM1,U) I +$P(NM1,U,I)=+NUM S J=I Q
"RTN","GMPLHIST",33,0)
 G:J'>0 FNQ
"RTN","GMPLHIST",34,0)
 S NM2="DIAGNOSIS^PROVIDER NARRATIVE^STATUS^DATE OF ONSET^PROBLEM^CONDITION^RECORDING PROVIDER^RESPONSIBLE PROVIDER^SERVICE^DATE RESOLVED^CLINIC^DATE RECORDED^SERVICE CONNECTED^AGENT ORANGE EXP^RADIATION EXP^ENV CONTAMINANTS EXP^PRIORITY^NOTE"
"RTN","GMPLHIST",35,0)
 S NAME=$P(NM2,U,J)
"RTN","GMPLHIST",36,0)
FNQ Q NAME
"RTN","GMPLUTL1")
0^4^B15027510
"RTN","GMPLUTL1",1,0)
GMPLUTL1 ; SLC/MKB -- Problem List utilities cont ;8/29/95  11:01
"RTN","GMPLUTL1",2,0)
 ;;2.0;Problem List;**3,8,7**;Aug 25, 1994
"RTN","GMPLUTL1",3,0)
 ;
"RTN","GMPLUTL1",4,0)
 ; *** The following expect PL("data item") from ^GMPLUTL:
"RTN","GMPLUTL1",5,0)
 ;
"RTN","GMPLUTL1",6,0)
DIAGNOSI ; -- ICD Diagnosis ptr
"RTN","GMPLUTL1",7,0)
 S:'$L($G(PL("DIAGNOSIS"))) PL("DIAGNOSIS")=$$NOS^GMPLX
"RTN","GMPLUTL1",8,0)
 Q:$D(^ICD9(+PL("DIAGNOSIS"),0))  ; ok
"RTN","GMPLUTL1",9,0)
 S GMPQUIT=1,PLY(0)="Invalid ICD Diagnosis"
"RTN","GMPLUTL1",10,0)
 Q
"RTN","GMPLUTL1",11,0)
 ;
"RTN","GMPLUTL1",12,0)
LEXICON ; -- Clinical Lexicon ptr
"RTN","GMPLUTL1",13,0)
 S:'$L($G(PL("LEXICON"))) PL("LEXICON")=1
"RTN","GMPLUTL1",14,0)
 Q:$D(^LEX(757.01,+PL("LEXICON"),0))  ; KER
"RTN","GMPLUTL1",15,0)
 S GMPQUIT=1,PLY(0)="Invalid Lexicon term"
"RTN","GMPLUTL1",16,0)
 Q
"RTN","GMPLUTL1",17,0)
DUPLICAT ;-- Problem already on list 
"RTN","GMPLUTL1",18,0)
 Q:$P($G(^GMPL(125.99,1,0)),U,6)>0  ;check not required  ; MC
"RTN","GMPLUTL1",19,0)
 S:'$L($G(PL("DIAGNOSIS"))) PL("DIAGNOSIS")=$$NOS^GMPLX
"RTN","GMPLUTL1",20,0)
 I '$D(^AUPNPROB("B",+PL("DIAGNOSIS")))!('$D(^AUPNPROB("AC",GMPDFN))) Q  ;no duplicate
"RTN","GMPLUTL1",21,0)
 F IFN=0:0 S IFN=$O(^AUPNPROB("AC",GMPDFN,IFN)) Q:IFN'>0  D  Q:$D(GMPQUIT)
"RTN","GMPLUTL1",22,0)
 . S (DUPL(1),DUPL(2))=0
"RTN","GMPLUTL1",23,0)
 . S NODE0=$G(^AUPNPROB(IFN,0)),NODE1=$G(^(1)) Q:$P(NODE1,U,2)="H"
"RTN","GMPLUTL1",24,0)
 . I +PL("DIAGNOSIS")=+NODE0 S DUPL(1)=IFN
"RTN","GMPLUTL1",25,0)
 . S:PL("NARRATIVE")=$$UP^XLFSTR($P(^AUTNPOV($P(NODE0,U,5),0),U)) DUPL(2)=IFN
"RTN","GMPLUTL1",26,0)
 . I DUPL(1)>0&DUPL(2)>0 S GMPQUIT=1,PLY(0)="Duplicate problem"
"RTN","GMPLUTL1",27,0)
 Q
"RTN","GMPLUTL1",28,0)
 ;
"RTN","GMPLUTL1",29,0)
LOCATION ; -- Hospital Location (clinic) ptr
"RTN","GMPLUTL1",30,0)
 S:'$D(PL("LOCATION")) PL("LOCATION")="" Q:'$L(PL("LOCATION"))
"RTN","GMPLUTL1",31,0)
 I $D(^SC(+PL("LOCATION"),0)),$P(^(0),U,3)="C" Q  ; ok
"RTN","GMPLUTL1",32,0)
 S GMPQUIT=1,PLY(0)="Invalid hospital location"
"RTN","GMPLUTL1",33,0)
 Q
"RTN","GMPLUTL1",34,0)
 ;
"RTN","GMPLUTL1",35,0)
PROVIDER ; -- Responsible Provider
"RTN","GMPLUTL1",36,0)
 S:'$D(PL("PROVIDER")) PL("PROVIDER")=""
"RTN","GMPLUTL1",37,0)
 Q:'$L(PL("PROVIDER"))  Q:$D(^VA(200,+PL("PROVIDER"),0))  ; ok
"RTN","GMPLUTL1",38,0)
 S GMPQUIT=1,PLY(0)="Invalid provider"
"RTN","GMPLUTL1",39,0)
 Q
"RTN","GMPLUTL1",40,0)
 ;
"RTN","GMPLUTL1",41,0)
STATUS ; -- Problem status
"RTN","GMPLUTL1",42,0)
 S:$G(PL("STATUS"))="" PL("STATUS")="A"
"RTN","GMPLUTL1",43,0)
 I "^A^I^a^i^"[(U_PL("STATUS")_U) S PL("STATUS")=$$UP^XLFSTR(PL("STATUS")) Q  ; ok
"RTN","GMPLUTL1",44,0)
 S GMPQUIT=1,PLY(0)="Invalid problem status"
"RTN","GMPLUTL1",45,0)
 Q
"RTN","GMPLUTL1",46,0)
 ;
"RTN","GMPLUTL1",47,0)
ONSET ; -- Date of Onset
"RTN","GMPLUTL1",48,0)
 N %DT,Y,X
"RTN","GMPLUTL1",49,0)
 S:'$D(PL("ONSET")) PL("ONSET")="" Q:'$L(PL("ONSET"))  ; ok
"RTN","GMPLUTL1",50,0)
 S %DT="P",%DT(0)="-NOW",X=PL("ONSET") D ^%DT
"RTN","GMPLUTL1",51,0)
 I Y>0 S PL("ONSET")=Y Q  ; ok
"RTN","GMPLUTL1",52,0)
 S GMPQUIT=1,PLY(0)="Invalid Date of Onset"
"RTN","GMPLUTL1",53,0)
 Q
"RTN","GMPLUTL1",54,0)
 ;
"RTN","GMPLUTL1",55,0)
RESOLVED ; -- Date Resolved (Requires STATUS, ONSET)
"RTN","GMPLUTL1",56,0)
 N %DT,Y,X
"RTN","GMPLUTL1",57,0)
 S:'$D(PL("RESOLVED")) PL("RESOLVED")="" Q:'$L(PL("RESOLVED"))  ; ok
"RTN","GMPLUTL1",58,0)
 S %DT="P",%DT(0)="-NOW",X=PL("RESOLVED") D ^%DT
"RTN","GMPLUTL1",59,0)
 I Y'>0 S GMPQUIT=1,PLY(0)="Invalid Date Resolved" Q
"RTN","GMPLUTL1",60,0)
 I PL("STATUS")="A" S GMPQUIT=1,PLY(0)="Active problems cannot have a Date Resolved" Q
"RTN","GMPLUTL1",61,0)
 I Y<PL("ONSET") S GMPQUIT=1,PLY(0)="Date Resolved cannot be prior to Date of Onset" Q
"RTN","GMPLUTL1",62,0)
 S PL("RESOLVED")=Y ; ok
"RTN","GMPLUTL1",63,0)
 Q
"RTN","GMPLUTL1",64,0)
 ;
"RTN","GMPLUTL1",65,0)
RECORDED ; -- Date Recorded (Requires ONSET)
"RTN","GMPLUTL1",66,0)
 N %DT,Y,X
"RTN","GMPLUTL1",67,0)
 S:'$D(PL("RECORDED")) PL("RECORDED")="" Q:'$L(PL("RECORDED"))  ; ok
"RTN","GMPLUTL1",68,0)
 S %DT="P",%DT(0)="-NOW",X=PL("RECORDED") D ^%DT
"RTN","GMPLUTL1",69,0)
 I Y'>0 S GMPQUIT=1,PLY(0)="Invalid Date Recorded" Q
"RTN","GMPLUTL1",70,0)
 I PL("RECORDED")<PL("ONSET") S GMPQUIT=1,PLY(0)="Date Recorded cannot be prior to Date of Onset" Q
"RTN","GMPLUTL1",71,0)
 S PL("RECORDED")=Y ; ok
"RTN","GMPLUTL1",72,0)
 Q
"RTN","GMPLUTL1",73,0)
 ;
"RTN","GMPLUTL1",74,0)
SC ; -- SC condition flag
"RTN","GMPLUTL1",75,0)
 S:'$D(PL("SC")) PL("SC")=""
"RTN","GMPLUTL1",76,0)
 I "^^1^0^"'[(U_PL("SC")_U) S GMPQUIT=1,PLY(0)="Invalid SC flag" Q
"RTN","GMPLUTL1",77,0)
 I 'GMPSC,+PL("SC") S GMPQUIT=1,PLY(0)="Invalid SC flag"
"RTN","GMPLUTL1",78,0)
 Q
"RTN","GMPLUTL1",79,0)
 ;
"RTN","GMPLUTL1",80,0)
AO ; -- AO exposure flag (Requires GMPAGTOR)
"RTN","GMPLUTL1",81,0)
 S:'$D(PL("AO")) PL("AO")=""
"RTN","GMPLUTL1",82,0)
 I "^^1^0^"'[(U_PL("AO")_U) S GMPQUIT=1,PLY(0)="Invalid AO flag" Q
"RTN","GMPLUTL1",83,0)
 I 'GMPAGTOR,+PL("AO") S GMPQUIT=1,PLY(0)="Invalid AO flag"
"RTN","GMPLUTL1",84,0)
 Q
"RTN","GMPLUTL1",85,0)
 ;
"RTN","GMPLUTL1",86,0)
IR ; -- IR exposure flag (Requires GMPION)
"RTN","GMPLUTL1",87,0)
 S:'$D(PL("IR")) PL("IR")=""
"RTN","GMPLUTL1",88,0)
 I "^^1^0^"'[(U_PL("IR")_U) S GMPQUIT=1,PLY(0)="Invalid IR flag" Q
"RTN","GMPLUTL1",89,0)
 I 'GMPION,+PL("IR") S GMPQUIT=1,PLY(0)="Invalid IR flag"
"RTN","GMPLUTL1",90,0)
 Q
"RTN","GMPLUTL1",91,0)
 ;
"RTN","GMPLUTL1",92,0)
EC ; -- EC exposure flag (Requires GMPGULF)
"RTN","GMPLUTL1",93,0)
 S:'$D(PL("EC")) PL("EC")=""
"RTN","GMPLUTL1",94,0)
 I "^^1^0^"'[(U_PL("EC")_U) S GMPQUIT=1,PLY(0)="Invalid EC flag" Q
"RTN","GMPLUTL1",95,0)
 I 'GMPGULF,+PL("EC") S GMPQUIT=1,PLY(0)="Invalid EC flag"
"RTN","GMPLUTL1",96,0)
 Q
"RTN","GMPLX")
0^5^B22856107
"RTN","GMPLX",1,0)
GMPLX ; SLC/MKB -- Problem List Problem Utilities ;6/9/94  09:10
"RTN","GMPLX",2,0)
 ;;2.0;Problem List;**7**;Aug 25, 1994
"RTN","GMPLX",3,0)
SEARCH(X,Y,PROMPT,UNRES,VIEW) ; Search CLU for problem, text in X
"RTN","GMPLX",4,0)
 N DIC S:'$L($G(VIEW)) VIEW="PL1"
"RTN","GMPLX",5,0)
 D CONFIG^LEXSET("GMPL",VIEW) ; KER
"RTN","GMPLX",6,0)
 S DIC("A")=$S($L($G(PROMPT)):PROMPT,1:"Select PROBLEM: ")
"RTN","GMPLX",7,0)
 S DIC="^LEX(757.01,",DIC(0)=$S('$L($G(X)):"A",1:"")_"EQM" ; KER
"RTN","GMPLX",8,0)
 S:'$G(UNRES) LEXUN=0 ; KER
"RTN","GMPLX",9,0)
 D ^DIC S:+Y>1 X=$P(Y,U,2)
"RTN","GMPLX",10,0)
 Q
"RTN","GMPLX",11,0)
 ;
"RTN","GMPLX",12,0)
PROVNARR(X,CL) ; Returns ifn ^ text of narrative in File #9999999.27
"RTN","GMPLX",13,0)
 N DIC,Y,DLAYGO,DD,DO,DA S:$L(X)>80 X=$E(X,1,80)
"RTN","GMPLX",14,0)
 S DIC="^AUTNPOV(",DIC(0)="L",DLAYGO=9999999.27,(DA,Y)=0
"RTN","GMPLX",15,0)
 F  S DA=$O(^AUTNPOV("B",$E(X,1,30),DA)) Q:DA'>0  I $P(^AUTNPOV(DA,0),U)=X S Y=DA_U_X Q
"RTN","GMPLX",16,0)
 I '(+Y) K DA,Y D FILE^DICN S:Y'>0 Y=U_X I Y>0,CL>1 S ^AUTNPOV(+Y,757)=CL
"RTN","GMPLX",17,0)
 Q $P(Y,U,1,2)
"RTN","GMPLX",18,0)
 ;
"RTN","GMPLX",19,0)
PROBTEXT(IFN) ; Returns display text of the problem
"RTN","GMPLX",20,0)
 N X,Y
"RTN","GMPLX",21,0)
 S Y=$P($G(^AUPNPROB(+IFN,0)),U,5),X=$P($G(^AUTNPOV(+Y,0)),U)
"RTN","GMPLX",22,0)
 Q X
"RTN","GMPLX",23,0)
 ;
"RTN","GMPLX",24,0)
WRAP(PROB,MAX,TEXT) ; splits text, sets into TEXT array
"RTN","GMPLX",25,0)
 N I,J S J=0 K TEXT
"RTN","GMPLX",26,0)
 I $L(PROB)'>MAX S J=J+1,TEXT(J)=PROB G WRQ
"RTN","GMPLX",27,0)
WR0 ; top of loop
"RTN","GMPLX",28,0)
 S I=$F(PROB," ") I ('I)!(I>(MAX+2)) S J=J+1,TEXT(J)=$E(PROB,1,MAX),PROB=$E(PROB,MAX+1,999)
"RTN","GMPLX",29,0)
 I $L(PROB)>MAX F I=(MAX+1):-1:1 I $E(PROB,I)=" " S J=J+1,TEXT(J)=$E(PROB,1,I-1),PROB=$E(PROB,I+1,999) Q
"RTN","GMPLX",30,0)
 G:$L(PROB)>MAX WR0 ; split remaining text again
"RTN","GMPLX",31,0)
 S:$L(PROB) J=J+1,TEXT(J)=PROB
"RTN","GMPLX",32,0)
WRQ S TEXT=J
"RTN","GMPLX",33,0)
 Q
"RTN","GMPLX",34,0)
 ;
"RTN","GMPLX",35,0)
NOS() ; Return ptr ^ 799.9 ICD code
"RTN","GMPLX",36,0)
 N X S X=$O(^ICD9("BA",799.9,0)) ; want 1st
"RTN","GMPLX",37,0)
 Q (+X_"^799.9")
"RTN","GMPLX",38,0)
 ;
"RTN","GMPLX",39,0)
SEL(HELP) ; Select list of problems
"RTN","GMPLX",40,0)
 N X,Y,DIR,MAX
"RTN","GMPLX",41,0)
 S MAX=+$G(^TMP("GMPL",$J,0)) I MAX'>0 Q "^"
"RTN","GMPLX",42,0)
 S DIR(0)="LAO^1:"_MAX,DIR("A")="Select Problem(s)"
"RTN","GMPLX",43,0)
 S:MAX>1 DIR("A")=DIR("A")_" (1-"_MAX_"): "
"RTN","GMPLX",44,0)
 S:MAX'>1 DIR("A")=DIR("A")_": ",DIR("B")=1
"RTN","GMPLX",45,0)
 S DIR("?")="Enter the problems you wish to "
"RTN","GMPLX",46,0)
 S DIR("?")=DIR("?")_$S($L(HELP):HELP,1:"act on")_", as a range or list of numbers"
"RTN","GMPLX",47,0)
 D ^DIR I $D(DTOUT)!(X="") S Y="^"
"RTN","GMPLX",48,0)
 Q Y
"RTN","GMPLX",49,0)
 ;
"RTN","GMPLX",50,0)
SEL1(HELP) ; Select 1 problem
"RTN","GMPLX",51,0)
 N X,Y,DIR,MAX
"RTN","GMPLX",52,0)
 S MAX=+$G(^TMP("GMPL",$J,0)) I MAX'>0 Q "^"
"RTN","GMPLX",53,0)
 S DIR(0)="NAO^1:"_MAX_":0",DIR("A")="Select Problem"
"RTN","GMPLX",54,0)
 S:MAX>1 DIR("A")=DIR("A")_" (1-"_MAX_"): "
"RTN","GMPLX",55,0)
 S:MAX'>1 DIR("A")=DIR("A")_": ",DIR("B")=1
"RTN","GMPLX",56,0)
 S DIR("?")="Enter the number of the problem you wish to "
"RTN","GMPLX",57,0)
 S DIR("?")=DIR("?")_$S($L(HELP):HELP,1:"act on")
"RTN","GMPLX",58,0)
 D ^DIR I $D(DTOUT)!(X="") S Y="^"
"RTN","GMPLX",59,0)
 Q Y
"RTN","GMPLX",60,0)
 ;
"RTN","GMPLX",61,0)
DUPL(DFN,TERM,TEXT) ; Check's patient's list for duplicate entries
"RTN","GMPLX",62,0)
 N DA,IFN,NODE0,NODE1 S DA=0,TEXT=$$UP^XLFSTR(TEXT)
"RTN","GMPLX",63,0)
 I '$D(^AUPNPROB("C",TERM))!('$D(^AUPNPROB("AC",DFN))) Q DA
"RTN","GMPLX",64,0)
 F IFN=0:0 S IFN=$O(^AUPNPROB("AC",DFN,IFN)) Q:IFN'>0  D  Q:DA>0
"RTN","GMPLX",65,0)
 . S NODE0=$G(^AUPNPROB(IFN,0)),NODE1=$G(^(1)) Q:$P(NODE1,U,2)="H"
"RTN","GMPLX",66,0)
 . I TERM>1 S:+NODE1=TERM DA=IFN Q
"RTN","GMPLX",67,0)
 . S:TEXT=$$UP^XLFSTR($P(^AUTNPOV($P(NODE0,U,5),0),U)) DA=IFN
"RTN","GMPLX",68,0)
 Q DA
"RTN","GMPLX",69,0)
 ;
"RTN","GMPLX",70,0)
DUPLOK(IFN) ; Sure you want to duplicate problem?
"RTN","GMPLX",71,0)
 N DIR,X,Y,GMPL0,GMPL1,DATE,PROV
"RTN","GMPLX",72,0)
 S DIR(0)="YA",GMPL0=$G(^AUPNPROB(IFN,0)),GMPL1=$G(^(1))
"RTN","GMPLX",73,0)
 S DIR("A")="Are you sure you want to continue? ",DIR("B")="NO"
"RTN","GMPLX",74,0)
 S DIR("?",1)="Enter YES if you want to duplicate this problem on this patient's list;",DIR("?")="press <return> to re-enter the problem name."
"RTN","GMPLX",75,0)
 W $C(7),!!,">>>  "_$$PROBTEXT(IFN),!?5,"is already an "
"RTN","GMPLX",76,0)
 W $S($P(GMPL0,U,12)="I":"IN",1:"")_"ACTIVE problem on this patient's list!",!
"RTN","GMPLX",77,0)
 S PROV=+$P(GMPL1,U,5) W:PROV !?5,"Provider: "_$P($G(^VA(200,PROV,0)),U)_" ("_$P($$SERVICE^GMPLX1(PROV),U,2)_")"
"RTN","GMPLX",78,0)
 I $P(GMPL0,U,12)="A" W !?8,"Onset: " S DATE=$P(GMPL0,U,13)
"RTN","GMPLX",79,0)
 I $P(GMPL0,U,12)="I" W !?5,"Resolved: " S DATE=$P(GMPL1,U,7)
"RTN","GMPLX",80,0)
 W $S(DATE>0:$$FMTE^XLFDT(DATE),1:"unspecified"),!
"RTN","GMPLX",81,0)
 D ^DIR W !
"RTN","GMPLX",82,0)
 Q +Y
"RTN","GMPLX",83,0)
 ;
"RTN","GMPLX",84,0)
LOCKED() ; Returns message that problem is locked
"RTN","GMPLX",85,0)
 Q "This problem is currently being edited by another user!"
"RTN","GMPLX",86,0)
 ;
"RTN","GMPLX",87,0)
SURE() ; Verify delete request, returns 1 if YES, else 0
"RTN","GMPLX",88,0)
 N DIR,X,Y
"RTN","GMPLX",89,0)
 S DIR(0)="YA",DIR("B")="NO"
"RTN","GMPLX",90,0)
 S DIR("?")="Enter YES to remove this value or NO to leave it unchanged."
"RTN","GMPLX",91,0)
 S DIR("A")="Are you sure you want to remove this value? " D ^DIR
"RTN","GMPLX",92,0)
 Q +Y
"RTN","GMPLX",93,0)
 ;
"RTN","GMPLX",94,0)
EXTDT(DATE) ; Formats date into MM/DD/YY
"RTN","GMPLX",95,0)
 N X,MM,DD,YY,YYY S X="",DATE=$P(DATE,".") Q:'DATE ""
"RTN","GMPLX",96,0)
 S MM=+$E(DATE,4,5),DD=+$E(DATE,6,7),YY=$E(DATE,2,3),YYY=$E(DATE,1,3)
"RTN","GMPLX",97,0)
 S:MM X=MM_"/" S:DD X=X_DD_"/" S X=$S($L(X):X_YY,1:1700+YYY)
"RTN","GMPLX",98,0)
 Q X
"RTN","GMPLX",99,0)
 ;
"RTN","GMPLX",100,0)
AUDIT(DATA,OLD) ; Makes entry in Audit file
"RTN","GMPLX",101,0)
 ; DATA = string for 0-node
"RTN","GMPLX",102,0)
 ; OLD  = string for 1-node = 0-node from reform/react problem
"RTN","GMPLX",103,0)
 N DA,DD,DO,DIC,X,Y,DIK,DLAYGO
"RTN","GMPLX",104,0)
 S DIC="^GMPL(125.8,",DIC(0)="L",X=$P(DATA,U),DLAYGO=125.8
"RTN","GMPLX",105,0)
 D FILE^DICN Q:+Y'>0  S DA=+Y,DIK="^GMPL(125.8,"
"RTN","GMPLX",106,0)
 S ^GMPL(125.8,DA,0)=DATA D IX1^DIK
"RTN","GMPLX",107,0)
 S:$L(OLD) ^GMPL(125.8,DA,1)=OLD
"RTN","GMPLX",108,0)
 Q
"RTN","GMPLX",109,0)
 ;
"RTN","GMPLX",110,0)
DTMOD(DA) ; Update Date Last Modified
"RTN","GMPLX",111,0)
 S $P(^AUPNPROB(DA,0),U,3)=DT
"RTN","GMPLX",112,0)
 Q
"RTN","GMPLX",113,0)
 ;
"RTN","GMPLX",114,0)
MSG() ; LMgr msg bar
"RTN","GMPLX",115,0)
 Q "+ Next Screen  - Prev Screen  ?? More actions"
"RTN","GMPLX",116,0)
 ;
"RTN","GMPLX",117,0)
KILL ; clean-up variables
"RTN","GMPLX",118,0)
 K X,Y,DIC,DIE,DR,DA,DUOUT,DTOUT,GMPQUIT,GMPRT,GMPSAVED,GMPIFN,GMPLNO,GMPLNUM,GMPLSEL,GMPREBLD,GMPI,GMPLSLST,GMPLJUMP
"RTN","GMPLX",119,0)
 Q
"VER")
8.0^21.0
**END**
**END**

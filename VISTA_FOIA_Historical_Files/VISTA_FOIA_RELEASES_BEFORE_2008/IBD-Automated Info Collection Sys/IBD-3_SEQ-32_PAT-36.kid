Released IBD*3*36 SEQ #32
Extracted from mail message
**KIDS**:IBD*3.0*36^

**INSTALL NAME**
IBD*3.0*36
"BLD",1807,0)
IBD*3.0*36^AUTOMATED INFO COLLECTION SYS^0^3001017^y
"BLD",1807,1,0)
^^3^3^3001017^^^^
"BLD",1807,1,1,0)
Patch IBD*3*36 adds the Military Sexual Trauma (MST) indicator to AICS
"BLD",1807,1,2,0)
encounter form blocks and AICS manual data entry processes.  See the
"BLD",1807,1,3,0)
NPM on FORUM for complete information.
"BLD",1807,4,0)
^9.64PA^358.98^7
"BLD",1807,4,358.1,0)
358.1
"BLD",1807,4,358.1,222)
y^n^f^^y^^y^o^n
"BLD",1807,4,358.2,0)
358.2
"BLD",1807,4,358.2,222)
y^n^f^^y^^y^o^n
"BLD",1807,4,358.5,0)
358.5
"BLD",1807,4,358.5,222)
y^n^f^^y^^y^o^n
"BLD",1807,4,358.6,0)
358.6
"BLD",1807,4,358.6,222)
y^n^f^^y^^y^o^n
"BLD",1807,4,358.91,0)
358.91
"BLD",1807,4,358.91,222)
y^n^f^^y^^y^o^n
"BLD",1807,4,358.93,0)
358.93
"BLD",1807,4,358.93,222)
y^n^f^^y^^y^o^n
"BLD",1807,4,358.98,0)
358.98
"BLD",1807,4,358.98,222)
y^n^f^^y^^y^o^n
"BLD",1807,4,"B",358.1,358.1)

"BLD",1807,4,"B",358.2,358.2)

"BLD",1807,4,"B",358.5,358.5)

"BLD",1807,4,"B",358.6,358.6)

"BLD",1807,4,"B",358.91,358.91)

"BLD",1807,4,"B",358.93,358.93)

"BLD",1807,4,"B",358.98,358.98)

"BLD",1807,"INI")
PRE^IBDY336
"BLD",1807,"INIT")
POST^IBDY336
"BLD",1807,"KRN",0)
^9.67PA^19^17
"BLD",1807,"KRN",.4,0)
.4
"BLD",1807,"KRN",.401,0)
.401
"BLD",1807,"KRN",.402,0)
.402
"BLD",1807,"KRN",.403,0)
.403
"BLD",1807,"KRN",.5,0)
.5
"BLD",1807,"KRN",.84,0)
.84
"BLD",1807,"KRN",3.6,0)
3.6
"BLD",1807,"KRN",3.8,0)
3.8
"BLD",1807,"KRN",9.2,0)
9.2
"BLD",1807,"KRN",9.8,0)
9.8
"BLD",1807,"KRN",9.8,"NM",0)
^9.68A^12^12
"BLD",1807,"KRN",9.8,"NM",1,0)
IBDFDE0^^0^B35808657
"BLD",1807,"KRN",9.8,"NM",2,0)
IBDFDE1^^0^B55163756
"BLD",1807,"KRN",9.8,"NM",3,0)
IBDFBK3^^0^B40561152
"BLD",1807,"KRN",9.8,"NM",4,0)
IBDFRPC4^^0^B16376153
"BLD",1807,"KRN",9.8,"NM",5,0)
IBDFN^^0^B49686357
"BLD",1807,"KRN",9.8,"NM",6,0)
IBDFN9^^0^B613468
"BLD",1807,"KRN",9.8,"NM",7,0)
IBDFDE7^^0^B45852937
"BLD",1807,"KRN",9.8,"NM",8,0)
IBDFN2^^0^B24200371
"BLD",1807,"KRN",9.8,"NM",9,0)
IBDECLN^^0^B91131302
"BLD",1807,"KRN",9.8,"NM",10,0)
IBDECLN2^^0^B26741519
"BLD",1807,"KRN",9.8,"NM",11,0)
IBDF18E0^^0^B38912434
"BLD",1807,"KRN",9.8,"NM",12,0)
IBDF18E1^^0^B48104521
"BLD",1807,"KRN",9.8,"NM","B","IBDECLN",9)

"BLD",1807,"KRN",9.8,"NM","B","IBDECLN2",10)

"BLD",1807,"KRN",9.8,"NM","B","IBDF18E0",11)

"BLD",1807,"KRN",9.8,"NM","B","IBDF18E1",12)

"BLD",1807,"KRN",9.8,"NM","B","IBDFBK3",3)

"BLD",1807,"KRN",9.8,"NM","B","IBDFDE0",1)

"BLD",1807,"KRN",9.8,"NM","B","IBDFDE1",2)

"BLD",1807,"KRN",9.8,"NM","B","IBDFDE7",7)

"BLD",1807,"KRN",9.8,"NM","B","IBDFN",5)

"BLD",1807,"KRN",9.8,"NM","B","IBDFN2",8)

"BLD",1807,"KRN",9.8,"NM","B","IBDFN9",6)

"BLD",1807,"KRN",9.8,"NM","B","IBDFRPC4",4)

"BLD",1807,"KRN",19,0)
19
"BLD",1807,"KRN",19.1,0)
19.1
"BLD",1807,"KRN",101,0)
101
"BLD",1807,"KRN",409.61,0)
409.61
"BLD",1807,"KRN",771,0)
771
"BLD",1807,"KRN",870,0)
870
"BLD",1807,"KRN",8994,0)
8994
"BLD",1807,"KRN","B",.4,.4)

"BLD",1807,"KRN","B",.401,.401)

"BLD",1807,"KRN","B",.402,.402)

"BLD",1807,"KRN","B",.403,.403)

"BLD",1807,"KRN","B",.5,.5)

"BLD",1807,"KRN","B",.84,.84)

"BLD",1807,"KRN","B",3.6,3.6)

"BLD",1807,"KRN","B",3.8,3.8)

"BLD",1807,"KRN","B",9.2,9.2)

"BLD",1807,"KRN","B",9.8,9.8)

"BLD",1807,"KRN","B",19,19)

"BLD",1807,"KRN","B",19.1,19.1)

"BLD",1807,"KRN","B",101,101)

"BLD",1807,"KRN","B",409.61,409.61)

"BLD",1807,"KRN","B",771,771)

"BLD",1807,"KRN","B",870,870)

"BLD",1807,"KRN","B",8994,8994)

"BLD",1807,"QUES",0)
^9.62^^
"BLD",1807,"REQB",0)
^9.611^4^4
"BLD",1807,"REQB",1,0)
IBD*3.0*38^1
"BLD",1807,"REQB",2,0)
IBD*3.0*14^1
"BLD",1807,"REQB",3,0)
IBD*3.0*29^1
"BLD",1807,"REQB",4,0)
PX*1.0*74^1
"BLD",1807,"REQB","B","IBD*3.0*14",2)

"BLD",1807,"REQB","B","IBD*3.0*29",3)

"BLD",1807,"REQB","B","IBD*3.0*38",1)

"BLD",1807,"REQB","B","PX*1.0*74",4)

"DATA",358.1,1,0)
BASIC DEMOGRAPHICS (MST)^^^0^0^47^12^^^1^^BUC^Data fields - contains patient name,dob,sex,pid,SC conditions (includes MST)^1
"DATA",358.1,2,0)
HIDDEN CLASSIFICATN (V2.1 MST)^^^0^0^51^2^^^2^^UC^Classifications for visit - not scannable (includes MST)^1
"DATA",358.1,3,0)
HIDDEN CLASSIFICATN (V3.0 MST)^^^0^0^90^10^^^1^CLASSIFICATION QUESTIONS^CR^Classifications for visit - scannable (includes MST)^1
"DATA",358.1,4,0)
HIDDEN SC TREATMNT QUEST (MST)^^^0^0^51^2^^^2^^UC^Data fields-questions on SC of treatment-displayed only if applicable (incl MST)^1
"DATA",358.1,5,0)
HIDDEN SC/MST CLASSIFICATIONS^^^0^0^50^2^^^2^^UC^SC/MST classifications for visit - not scannable^1
"DATA",358.1,6,0)
MST STATUS DISPLAY^^^0^0^51^7^^^1^MST STATUS^CR^Display MST status code and description^1
"DATA",358.1,7,0)
SC CONDITIONS (V2.1 MST)^^^0^0^91^12^^^1^SERVICE CONNECTED CONDITIONS^RC^SC conditions,indicators,classifications (includes MST),no classif applicable^1
"DATA",358.1,8,0)
SC/MST CLASSIFICATION^^^0^0^70^7^^^1^SC AND MST CLASSIFICATION QUESTIONS^CR^SC/MST classifications for visit - scannable^1
"DATA",358.2,1,0)
CLASSIFICATION QUESTIONS^3^^^^^2^0^^^10^0^^1^0
"DATA",358.2,1,2,0)
^358.22I^3^3
"DATA",358.2,1,2,1,0)
1^ ^65^1^2
"DATA",358.2,1,2,2,0)
2^YES^^2^^1^^1^1^0
"DATA",358.2,1,2,3,0)
3^NO^^2^^1^^1^2^0
"DATA",358.2,2,0)
SC CONDITIONS^7^^^^RC^2^0^^^13^0^^1^1
"DATA",358.2,2,1,0)
^358.21I^1^1
"DATA",358.2,2,1,1,0)
1^4^1^4
"DATA",358.2,2,2,0)
^358.22I^2^2
"DATA",358.2,2,2,1,0)
2^ ^40^1^1
"DATA",358.2,2,2,2,0)
1^ ^4^1^3
"DATA",358.2,3,0)
MST CLASSIFICATION^8^^^^^2^0^^^16^0^^1^0
"DATA",358.2,3,2,0)
^358.22I^3^3
"DATA",358.2,3,2,1,0)
1^ ^50^1^2
"DATA",358.2,3,2,2,0)
2^YES^^2^^1^^1^1^0
"DATA",358.2,3,2,3,0)
3^NO^^2^^1^^1^2^0
"DATA",358.5,1,0)
PATIENT NAME^1^1
"DATA",358.5,1,2,0)
^358.52^1^1
"DATA",358.5,1,2,1,0)
Patient Name:^^^1^1^1^15^30^1
"DATA",358.5,2,0)
PATIENT DOB^1^2
"DATA",358.5,2,2,0)
^358.52^1^1
"DATA",358.5,2,2,1,0)
DOB:^^^1^2^2^6^12^1
"DATA",358.5,3,0)
PID^1^3
"DATA",358.5,3,2,0)
^358.52^1^1
"DATA",358.5,3,2,1,0)
PID:^^^19^2^2^24^15^1
"DATA",358.5,4,0)
SC CONDITION 1^1^4^^1
"DATA",358.5,4,2,0)
^358.52^2^2
"DATA",358.5,4,2,1,0)
SC Conditions:^^U^1^4^5^1^40^1
"DATA",358.5,4,2,2,0)
%^^I^^^5^42^4^3
"DATA",358.5,5,0)
SC CONDITION 2^1^4^^2
"DATA",358.5,5,2,0)
^358.52^2^2
"DATA",358.5,5,2,1,0)
CONDITION^^I^^^6^1^40^1
"DATA",358.5,5,2,2,0)
%^^I^^^6^42^4^3
"DATA",358.5,6,0)
SC CONDITION 3^1^4^^3
"DATA",358.5,6,2,0)
^358.52^2^2
"DATA",358.5,6,2,1,0)
CONDITION^^I^^^7^1^40^1
"DATA",358.5,6,2,2,0)
%^^I^^^7^42^4^3
"DATA",358.5,7,0)
SC CONDITION 4^1^4^1^4
"DATA",358.5,7,2,0)
^358.52^2^2
"DATA",358.5,7,2,1,0)
CONDITION^^I^^^8^1^40^1
"DATA",358.5,7,2,2,0)
%^^I^^^8^42^4^3
"DATA",358.5,8,0)
SEX^1^5
"DATA",358.5,8,2,0)
^358.52^1^1
"DATA",358.5,8,2,1,0)
Sex:^^^40^2^2^45^1^2
"DATA",358.5,9,0)
ELIGIBILITY^1^6
"DATA",358.5,9,2,0)
^358.52^1^1
"DATA",358.5,9,2,1,0)
Eligibility:^^^1^3^3^14^30^1
"DATA",358.5,10,0)
MEANS TEST CATEGORY^1^7
"DATA",358.5,10,2,0)
^358.52^1^1
"DATA",358.5,10,2,1,0)
Means Test Cat:^^^29^4^4^45^1^3
"DATA",358.5,11,0)
SERVICE HISTORY DATA^1^8
"DATA",358.5,11,2,0)
^358.52^5^5
"DATA",358.5,11,2,1,0)
AO:^^^1^10^10^4^3^2
"DATA",358.5,11,2,2,0)
IR:^^^9^10^10^12^3^3
"DATA",358.5,11,2,3,0)
POW:^^^17^10^10^21^3^4
"DATA",358.5,11,2,4,0)
EC:^^^26^10^10^29^3^6
"DATA",358.5,11,2,5,0)
MST:^^^34^10^10^38^8^7
"DATA",358.5,12,0)
SC %^1^6
"DATA",358.5,12,2,0)
^358.52^3^2
"DATA",358.5,12,2,2,0)
SC%:^^^17^4^4^22^3^7
"DATA",358.5,12,2,3,0)
%^^^25^4
"DATA",358.5,13,0)
SC CONDITION 5^1^4^1^5
"DATA",358.5,13,2,0)
^358.52^2^2
"DATA",358.5,13,2,1,0)
CONDITION^^I^^^9^1^40^1
"DATA",358.5,13,2,2,0)
%^^I^^^9^42^4^3
"DATA",358.5,14,0)
SC TREATMENT QUESTIONS^2^9
"DATA",358.5,14,2,0)
^358.52^2^2
"DATA",358.5,14,2,1,0)
SERVICE CONNECTED?^^I^^^0^0^46^1
"DATA",358.5,14,2,2,0)
AO,IR,EC OR MST?^^I^^^1^0^50^5
"DATA",358.5,15,0)
SC TREATMENT QUESTIONS^4^9
"DATA",358.5,15,2,0)
^358.52^2^2
"DATA",358.5,15,2,1,0)
SERVICE CONNECTED?^^I^^^0^0^46^1
"DATA",358.5,15,2,2,0)
AO,IR,EC, OR MST?^^I^^^1^0^50^5
"DATA",358.5,16,0)
SC/MST CLASSIFICATION DISPLAY^5^9
"DATA",358.5,16,2,0)
^358.52^3^2
"DATA",358.5,16,2,1,0)
SERVICE CONNECTED?^^I^^^0^0^46^1
"DATA",358.5,16,2,3,0)
RELATED TO MST?^^I^^^1^0^42^6
"DATA",358.5,17,0)
MST STATUS DISPLAY^6^12
"DATA",358.5,17,2,0)
^358.52^2^2
"DATA",358.5,17,2,1,0)
MST Status^^U^1^3^5^5^1^1
"DATA",358.5,17,2,2,0)
Description^^U^23^3^5^16^33^2
"DATA",358.5,18,0)
INDICATORS^7^8^^^^^^^1
"DATA",358.5,18,2,0)
^358.52^5^5
"DATA",358.5,18,2,1,0)
AO:^^^44^2^2^47^3^2
"DATA",358.5,18,2,2,0)
IR:^^^52^2^2^55^3^3
"DATA",358.5,18,2,3,0)
POW:^^^60^2^2^64^3^4
"DATA",358.5,18,2,4,0)
EC:^^^69^2^2^72^3^6
"DATA",358.5,18,2,5,0)
MST:^^^77^2^2^81^8^7
"DATA",358.5,19,0)
SERVICE CONNECTED PERCENTAGE^7^6
"DATA",358.5,19,2,0)
^358.52^1^1
"DATA",358.5,19,2,1,0)
Service Connected Percentage:^^^1^2^2^31^3^7
"DATA",358.6,1,0)
DPT PATIENT'S NAME^VADPT^IBDFN^REGISTRATION^1^2^1^1^1^^^1^^^^
"DATA",358.6,1,1,0)
^^2^2^2930212^^^^
"DATA",358.6,1,1,1,0)
 
"DATA",358.6,1,1,2,0)
Patient's Name
"DATA",358.6,1,2)
Patient's Name^30^^^^^^^^^^^^^^^1
"DATA",358.6,1,3)
PATIENT NAME
"DATA",358.6,1,7,0)
^357.67^1^1
"DATA",358.6,1,7,1,0)
DFN
"DATA",358.6,1,15,0)
^357.615I^^0
"DATA",358.6,2,0)
DPT PATIENT'S DOB/AGE^VADPT^IBDFN^REGISTRATION^1^2^2^^1^^^1^^^^
"DATA",358.6,2,1,0)
^^2^2^2951023^
"DATA",358.6,2,1,1,0)
Patient's DOB in MM DD, YYYY format
"DATA",358.6,2,1,2,0)
Patient's age in years.
"DATA",358.6,2,2)
Patient's DOB^12^Patient's Age^3^^^^^^^^^^^^^1
"DATA",358.6,2,3)
PATIENT DOB AGE PIMS
"DATA",358.6,2,7,0)
^357.67^1^1
"DATA",358.6,2,7,1,0)
DFN
"DATA",358.6,2,15,0)
^357.615I^2^2
"DATA",358.6,2,15,2,0)
Patient's Age^3^2^
"DATA",358.6,3,0)
DPT PATIENT'S PID^VADPT^IBDFN^REGISTRATION^1^2^1^1^1^^^1^^^^
"DATA",358.6,3,1,0)
^^1^1^2931015^^
"DATA",358.6,3,1,1,0)
Used to display the patient identifier.
"DATA",358.6,3,2)
PATIENT IDENTIFIER^15^^^^^^^^^^^^^^^1
"DATA",358.6,3,3)
PATIENT IDENTIFIER PID
"DATA",358.6,3,7,0)
^357.67^1^1
"DATA",358.6,3,7,1,0)
DFN
"DATA",358.6,3,15,0)
^357.615I^^0
"DATA",358.6,4,0)
DPT PATIENT'S SC CONDITIONS^ELIG^IBDFN^REGISTRATION^1^2^4^1^1^^^1^^^1^
"DATA",358.6,4,1,0)
^^7^7^2951023^
"DATA",358.6,4,1,1,0)
Used to output a list of the patients service connected conditions,
"DATA",358.6,4,1,2,0)
along with the percentage ratings. Data returned:
"DATA",358.6,4,1,3,0)
  disability name
"DATA",358.6,4,1,4,0)
  disability percentage
"DATA",358.6,4,1,5,0)
  disability percentage with the label "%"
"DATA",358.6,4,1,6,0)
  disability percentage with the label "%SC"
"DATA",358.6,4,1,7,0)
  disability percentage with the label "% - SERVICE CONNECTED"
"DATA",358.6,4,2)
Disability Name^45^^^^^^^^^^^^^^^1
"DATA",358.6,4,3)
SERVICE CONNECTED CONDITIONS PATIENT MAS PIMS DISABILITY DISABILITIES
"DATA",358.6,4,7,0)
^357.67^1^1
"DATA",358.6,4,7,1,0)
DFN
"DATA",358.6,4,15,0)
^357.615I^5^5
"DATA",358.6,4,15,2,0)
Disability % (number only)^3^2^
"DATA",358.6,4,15,3,0)
Disability % (label=%)^4^3^
"DATA",358.6,4,15,4,0)
Disabilty % (label=%SC)^6^4^
"DATA",358.6,4,15,5,0)
Dis.%_"% - SERVICE CONNECTED"^24^5^
"DATA",358.6,5,0)
DPT PATIENT'S SEX^VADPT^IBDFN^REGISTRATION^1^2^2^^1^^^1^^^^
"DATA",358.6,5,1,0)
^^1^1^2931015^^^^
"DATA",358.6,5,1,1,0)
Patient's sex, either 'MALE' or 'FEMALE', or "M" or "F".
"DATA",358.6,5,2)
Patient's Sex^6^^^^^^^^^^^^^^^1
"DATA",358.6,5,3)
SEX
"DATA",358.6,5,7,0)
^357.67^1^1
"DATA",358.6,5,7,1,0)
DFN
"DATA",358.6,5,15,0)
^357.615I^2^2
"DATA",358.6,5,15,2,0)
Patient's Sex (Code)^1^2^
"DATA",358.6,6,0)
DPT PATIENT ELIGIBILITY DATA^ELIG^IBDFN^REGISTRATION^1^2^2^^1^^^1^^^^
"DATA",358.6,6,1,0)
^^8^8^2931015^^^^
"DATA",358.6,6,1,1,0)
Returns patient eligibility data. Data returned is:
"DATA",358.6,6,1,2,0)
   eligibility code in external form
"DATA",358.6,6,1,3,0)
   period of service
"DATA",358.6,6,1,4,0)
   service connected? YES/NO
"DATA",358.6,6,1,5,0)
   veteran? YES/NO
"DATA",358.6,6,1,6,0)
   eligible for care? YES/NO
"DATA",358.6,6,1,7,0)
   type of patient
"DATA",358.6,6,1,8,0)
   SC%
"DATA",358.6,6,2)
ELIGIBILTY CODE/EXTERNAL FORM^30^^^^^^^^^TYPE OF PATIENT^^^^^^1
"DATA",358.6,6,3)
ELIGIBLE ELIGIBILITY PATIENT PERIOD SERVICE CONNECTED VETERAN STATUS
"DATA",358.6,6,7,0)
^357.67^1^1
"DATA",358.6,6,7,1,0)
DFN
"DATA",358.6,6,15,0)
^357.615I^7^7
"DATA",358.6,6,15,2,0)
PERIOD OF SERVICE^25^2^
"DATA",358.6,6,15,3,0)
SERVICE CONNECTED?^3^3^
"DATA",358.6,6,15,4,0)
VETERAN?^3^4^
"DATA",358.6,6,15,5,0)
ELIGIBLE FOR CARE?^3^5^
"DATA",358.6,6,15,6,0)
TYPE OF PATIENT^20^6^
"DATA",358.6,6,15,7,0)
SC %^3^7^
"DATA",358.6,7,0)
DPT PATIENT'S MEANS TEST DATA^MT^IBDFN2^REGISTRATION^1^2^2^^1^^^1^^^^
"DATA",358.6,7,1,0)
^^5^5^2931015^^^
"DATA",358.6,7,1,1,0)
Returns the patient's current means test category and the date of the most
"DATA",358.6,7,1,2,0)
recent means test. Data returned:
"DATA",358.6,7,1,3,0)
  means test category
"DATA",358.6,7,1,4,0)
  means test code
"DATA",358.6,7,1,5,0)
  date of last means test
"DATA",358.6,7,2)
MEANS TEST CATEGORY^20^^^^^^^^^^^^^^^1
"DATA",358.6,7,3)
MEANS TEST CATEGORY PATIENT
"DATA",358.6,7,7,0)
^357.67^1^1
"DATA",358.6,7,7,1,0)
DFN
"DATA",358.6,7,15,0)
^357.615I^3^3
"DATA",358.6,7,15,2,0)
DATE OF LAST MEANS TEST^12^2^
"DATA",358.6,7,15,3,0)
MEANS TEST CODE^1^3^
"DATA",358.6,8,0)
DPT SERVICE HISTORY RELATED DATA (MST)^ELIGMST^IBDFN^REGISTRATION^1^2^2^0^1^^^1
"DATA",358.6,8,1,0)
^357.61^8^8^3001004^^^^
"DATA",358.6,8,1,1,0)
For displaying service history data. Data returned:
"DATA",358.6,8,1,2,0)
  Vietnam service? YES/NO
"DATA",358.6,8,1,3,0)
  Agent Orange exposure? YES/NO
"DATA",358.6,8,1,4,0)
  radiation exposure? YES/NO
"DATA",358.6,8,1,5,0)
  combat service? YES/NO
"DATA",358.6,8,1,6,0)
  POW? YES/NO
"DATA",358.6,8,1,7,0)
  environmental contaminants exposure? YES/NO
"DATA",358.6,8,1,8,0)
  MST? YES/NO/UNKNOWN/DECLINED
"DATA",358.6,8,2)
VIETNAM SERVICE?^3^^^^^^^^^^^^^^^1
"DATA",358.6,8,3)
PATIENT MAS VIETNAM SERVICE AGENT ORANGE RADIATION COMBAT POW HISTORY ENVIRONMENTAL CONTAMINANT PERSIAN MST
"DATA",358.6,8,7,0)
^357.67^1^1
"DATA",358.6,8,7,1,0)
DFN
"DATA",358.6,8,15,0)
^357.615I^7^6
"DATA",358.6,8,15,2,0)
AGENT ORANGE EXPOSURE?^3^2
"DATA",358.6,8,15,3,0)
RADIATION EXPOSURE?^3^3
"DATA",358.6,8,15,4,0)
POW?^3^4
"DATA",358.6,8,15,5,0)
COMBAT SERVICE?^3^5
"DATA",358.6,8,15,6,0)
ENVIRONMENTAL CONTAMINANTS?^3^6
"DATA",358.6,8,15,7,0)
MST?^8^7
"DATA",358.6,9,0)
DPT SC TREATMENT QUESTIONS (MST)^ELIGMST^IBDFN^REGISTRATION^1^2^2^0^1^^^1
"DATA",358.6,9,1,0)
^357.61^9^9^3000831^^^^
"DATA",358.6,9,1,1,0)
Prints questions concerning whether treatment was related to service.
"DATA",358.6,9,1,2,0)
Each question is printed only if it applies to the patient. Questions are:
"DATA",358.6,9,1,3,0)
 
"DATA",358.6,9,1,4,0)
Was treatment for a SC condition? __ YES __ NO
"DATA",358.6,9,1,5,0)
Was treatment related to exposure to Agent Orange? __ YES __ NO
"DATA",358.6,9,1,6,0)
Was treatment related to exposure to Ionization Radiation? __ YES __ NO
"DATA",358.6,9,1,7,0)
Was treatment related to exposure to Environmental Contaminants? __ YES __ NO
"DATA",358.6,9,1,8,0)
Was treatment related to MST? __ YES __ NO
"DATA",358.6,9,1,9,0)
Was treatment related to: AO __ IR __ EC __ MST __
"DATA",358.6,9,2)
RELATED TO SC CONDITION?^46^^^^^^^^^^^^^^^1
"DATA",358.6,9,3)
PATIENT TREATMENT QUESTIONS SERVICE CONNECTED EXPOSURE MST
"DATA",358.6,9,7,0)
^357.67^1^1
"DATA",358.6,9,7,1,0)
DFN
"DATA",358.6,9,15,0)
^357.615I^6^5
"DATA",358.6,9,15,2,0)
RELATED TO AO?^63^2
"DATA",358.6,9,15,3,0)
RELATED TO IR?^71^3
"DATA",358.6,9,15,4,0)
RELATED TO EC?^77^4^1
"DATA",358.6,9,15,5,0)
RELATED TO AO,IR,EC OR MST?^50^5^1
"DATA",358.6,9,15,6,0)
RELATED TO MST?^42^6^1
"DATA",358.6,10,0)
DPT SC HIDDEN TREATMENT QUESTIONS (MST)^ELIG2MST^IBDFN^REGISTRATION^1^3^4^0^1^0^^1^11^1
"DATA",358.6,10,1,0)
^357.61^10^10^3000905^^^^
"DATA",358.6,10,1,1,0)
Prints questions concerning whether treatment was related to service.
"DATA",358.6,10,1,2,0)
Each question is printed only if it applies to the patient.  Questions are:
"DATA",358.6,10,1,3,0)
 
"DATA",358.6,10,1,4,0)
    Was treatment for an SC condition?
"DATA",358.6,10,1,5,0)
    Was treatment related to exposure to Agent Orange?
"DATA",358.6,10,1,6,0)
    Was treatment related to exposure to Ionization Radiation?
"DATA",358.6,10,1,7,0)
    Was treatment related to exposure to Environmental Contaminants?
"DATA",358.6,10,1,8,0)
    Was treatment related to MST?  (Ask provider only)
"DATA",358.6,10,1,9,0)
 
"DATA",358.6,10,1,10,0)
Results are scannable!!!
"DATA",358.6,10,2)
CLASSIFICATION ABBREVIATION^2^^^^^^^^^^^^^^^0^0
"DATA",358.6,10,3)
PATIENT TREATMENT SCANNABLE QUESTIONS SERVICE CONNECTED EXPOSURE MST
"DATA",358.6,10,7,0)
^357.67^1^1
"DATA",358.6,10,7,1,0)
DFN
"DATA",358.6,10,13,0)
^357.613V^2^2
"DATA",358.6,10,13,1,0)
1;IBD(358.98,^^0
"DATA",358.6,10,13,2,0)
2;IBD(358.98,^^0
"DATA",358.6,10,15,0)
^357.615I^1^1
"DATA",358.6,10,15,1,0)
CLASSIFICATION QUESTION^65^2
"DATA",358.6,11,0)
PX INPUT SC TREATMENT QUESTIONS (MST)^ELIG2MST^IBDFN^REGISTRATION^1^1^^^1^^^1^^1^^S^^^1
"DATA",358.6,11,1,0)
^357.61^1^1^3000830^^^^
"DATA",358.6,11,1,1,0)
Used for inputting SC conditions.
"DATA",358.6,11,2)
^^^^^^^^^^^^^^^^^0
"DATA",358.6,11,3)
PATIENT TREATMENT SCANNABLE QUESTIONS SERVICE CONNECTED EXPOSURE MST
"DATA",358.6,11,12)
ENCOUNTER
"DATA",358.6,11,13,0)
^357.613V^2^2
"DATA",358.6,11,13,1,0)
1;IBD(358.98,^^0
"DATA",358.6,11,13,2,0)
2;IBD(358.98,^^0
"DATA",358.6,11,14)
S Y=$$DSPLYYN^IBDFN9(Y)
"DATA",358.6,11,16)
n^^^^n
"DATA",358.6,11,20)
1
"DATA",358.6,11,21)
S X=$$VARVAL^IBDFN9(Y)
"DATA",358.6,12,0)
DGMST STATUS^MSTSTAT^IBDFN2^REGISTRATION^1^2^2^1^1^0^^1^^^^^^^^^0
"DATA",358.6,12,1,0)
^357.61^1^1^3000613^^
"DATA",358.6,12,1,1,0)
This toolkit block will display the patient's MST status code and description.
"DATA",358.6,12,2)
MST STATUS^1^^^^^^^^^^^^^^MST Status^1^1
"DATA",358.6,12,3)
MST STATUS
"DATA",358.6,12,7,0)
^357.67^1^1
"DATA",358.6,12,7,1,0)
DFN
"DATA",358.6,12,15,0)
^357.615I^1^1
"DATA",358.6,12,15,1,0)
MST DESCRIPTION^33^2^^Description
"DATA",358.6,13,0)
DPT PATIENT'S SC CONDITIONS^ELIG^IBDFN^REGISTRATION^1^3^4^1^1^^^1^^1^^
"DATA",358.6,13,1,0)
^^7^7^2951023^
"DATA",358.6,13,1,1,0)
Used to output a list of the patients service connected conditions,
"DATA",358.6,13,1,2,0)
along with the percentage ratings. Data returned:
"DATA",358.6,13,1,3,0)
  disability name
"DATA",358.6,13,1,4,0)
  disability percentage
"DATA",358.6,13,1,5,0)
  disability percentage with the label "%"
"DATA",358.6,13,1,6,0)
  disability percentage with the label "%SC"
"DATA",358.6,13,1,7,0)
  disability percentage with the label "% - SERVICE CONNECTED"
"DATA",358.6,13,2)
Disability Name^45^^^^^^^^^^^^^^DISABILITY^1^0
"DATA",358.6,13,3)
SERVICE CONNECTED CONDITIONS PATIENT PIMS DISABILITY DISABILITIES
"DATA",358.6,13,7,0)
^357.67^1^1
"DATA",358.6,13,7,1,0)
DFN
"DATA",358.6,13,15,0)
^357.615I^5^4
"DATA",358.6,13,15,2,0)
Disability % (number only)^3^2
"DATA",358.6,13,15,3,0)
Disability % (label=%)^4^3
"DATA",358.6,13,15,4,0)
Disabilty % (label=%SC)^6^4
"DATA",358.6,13,15,5,0)
Dis.%_"% - SERVICE CONNECTED"^24^5
"DATA",358.6,14,0)
PX INPUT VISIT CLASSIFICATION^^^PATIENT CARE ENCOUNTER^^1^^^1^^^1^^^^MP
"DATA",358.6,14,1,0)
^357.61^4^4^3000901^^^^
"DATA",358.6,14,1,1,0)
Used for the input of visit classifications. Examples of classifications:
"DATA",358.6,14,1,2,0)
service connected, related to Agent Orange exposure, ionizing
"DATA",358.6,14,1,3,0)
radiation exposure,  environmental contaminants exposure,  
"DATA",358.6,14,1,4,0)
and military sexual trauma.
"DATA",358.6,14,2)
^^^^^^^^^^^^^^^^^1
"DATA",358.6,14,3)
CLASSIFICATIONS AGENT ORANGE IONIZING RADIATION PERSIAN GULF ENVIRONMENTAL CONTAMINANTS SERVICE CONNECTED MILITARY SEXUAL TRAUMA 
"DATA",358.6,14,10)
Enter a classification.
"DATA",358.6,14,12)
ENCOUNTER
"DATA",358.6,14,13,0)
^357.613V^5^5
"DATA",358.6,14,13,1,0)
3;IBD(358.98,^^0^^^^^
"DATA",358.6,14,13,2,0)
4;IBD(358.98,^^0^^^^^
"DATA",358.6,14,13,3,0)
5;IBD(358.98,^^0^^^^^
"DATA",358.6,14,13,4,0)
6;IBD(358.98,^^0^^^^^
"DATA",358.6,14,13,5,0)
7;IBD(358.98,^^0
"DATA",358.6,14,17)
D SLCTCLS^IBDFN12(PI,.X)
"DATA",358.6,14,20)
1
"DATA",358.6,14,21)
S X=$$VARVAL^IBDFN9(Y)
"DATA",358.6,15,0)
PX INPUT NO CLASSIFICATIONS^^^PATIENT CARE ENCOUNTER^^1^^^1^^^1^^^^MP^^^
"DATA",358.6,15,1,0)
^357.61^1^1^3001004^^^^
"DATA",358.6,15,1,1,0)
Used to select whether no classifications are applicable for the patient's visit.
"DATA",358.6,15,2)
^^^^^^^^^^^^^^^^^1
"DATA",358.6,15,3)
NO CLASSIFICATIONS
"DATA",358.6,15,10)
Use this if no classifications were applicable to the patient's visit.
"DATA",358.6,15,12)
IBD NOCLASSIFICATION^1^2^^3^
"DATA",358.6,15,13,0)
^357.613V^1^1
"DATA",358.6,15,13,1,0)
8;IBD(358.98,^^0
"DATA",358.6,15,20)
1
"DATA",358.6,16,0)
DGMST SELECT MST CLASSIFICATN^ASKMST^IBDFN2^REGISTRATION^1^3^2^0^1^0^^1^17^1
"DATA",358.6,16,1,0)
^357.61^1^1^3000831^^^^
"DATA",358.6,16,1,1,0)
Prints scannable Yes/No question asking whether treatment was related to SC and MST.
"DATA",358.6,16,2)
MST ABBREVIATION^3^^^^^^^^^^^^^^^0^0
"DATA",358.6,16,3)
 MST SERVICE CONNECTED SC
"DATA",358.6,16,7,0)
^357.67^1^1
"DATA",358.6,16,7,1,0)
DFN
"DATA",358.6,16,13,0)
^357.613V^2^2
"DATA",358.6,16,13,1,0)
1;IBD(358.98,^^0
"DATA",358.6,16,13,2,0)
2;IBD(358.98,^^0
"DATA",358.6,16,15,0)
^357.615I^1^1
"DATA",358.6,16,15,1,0)
MST CLASS QUESTION^50^2
"DATA",358.6,17,0)
DGMST INPUT MST CLASSIFICATION^ASKMST^IBDFN2^REGISTRATION^1^1^^^1^^^1^^1^^S^^^1
"DATA",358.6,17,1,0)
^357.61^1^1^3000901^^^^
"DATA",358.6,17,1,1,0)
Used for inputting Service Connected and MST classifications.
"DATA",358.6,17,2)
^^^^^^^^^^^^^^^^^0
"DATA",358.6,17,3)
MILITARY SEXUAL TRAUMA MST
"DATA",358.6,17,12)
ENCOUNTER
"DATA",358.6,17,13,0)
^357.613V^2^2
"DATA",358.6,17,13,1,0)
1;IBD(358.98,^^0
"DATA",358.6,17,13,2,0)
2;IBD(358.98,^^0
"DATA",358.6,17,14)
S Y=$$DSPLYYN^IBDFN9(Y)
"DATA",358.6,17,16)
n^^^^n
"DATA",358.6,17,20)
1
"DATA",358.6,17,21)
S X=$$VARVAL^IBDFN9(Y)
"DATA",358.91,1,0)
BUBBLE (use for scanning)^[ ]^1^1
"DATA",358.93,1,0)
CLASSIFICATIONS^Was the visit related to:^1^9^^14^^7^0
"DATA",358.93,1,1,0)
^358.931^5^5
"DATA",358.93,1,1,1,0)
SERVICE CONNECTED^28^9^^SC^31^9^SC^4
"DATA",358.93,1,1,2,0)
AGENT ORANGE RELATED^36^9^^AO^39^9^AO^5
"DATA",358.93,1,1,3,0)
ENVIRONMENTAL CONTAMINANTS RELATED^44^9^^EC^47^9^EC^3
"DATA",358.93,1,1,4,0)
IONIZING RADIATION RELATED^52^9^^IR^55^9^IR^6
"DATA",358.93,1,1,5,0)
MILITARY SEXUAL TRAUMA^60^9^^MST^64^9^MST^7
"DATA",358.93,2,0)
NO CLASSIFICATIONS^^31^10^^15^^7^2
"DATA",358.93,2,1,0)
^358.931^1^1
"DATA",358.93,2,1,1,0)
NOCLASS^44^10^^No classifications applicable to visit:^84^10^NOCL^8
"DATA",358.98,1,0)
YES^1^YES
"DATA",358.98,2,0)
NO^0^NO
"DATA",358.98,3,0)
ENVIRONMENTAL CONTAMINANTS RELATED^1^EC
"DATA",358.98,4,0)
SERVICE CONNECTED^1^SC
"DATA",358.98,5,0)
AGENT ORANGE RELATED^1^AO
"DATA",358.98,6,0)
IONIZING RADIATION RELATED^1^IR
"DATA",358.98,7,0)
MILITARY SEXUAL TRAUMA^1^MST
"DATA",358.98,8,0)
NO CLASSIFICATIONS^1^NO CLASSIF
"FIA",358.1)
IMP/EXP ENCOUNTER FORM BLOCK
"FIA",358.1,0)
^IBE(358.1,
"FIA",358.1,0,0)
358.1I
"FIA",358.1,0,1)
y^n^f^^y^^y^o^n
"FIA",358.1,0,10)

"FIA",358.1,0,11)

"FIA",358.1,0,"RLRO")

"FIA",358.1,0,"VR")
3.0^IBD
"FIA",358.1,358.1)
0
"FIA",358.1,358.11)
0
"FIA",358.2)
IMP/EXP SELECTION LIST
"FIA",358.2,0)
^IBE(358.2,
"FIA",358.2,0,0)
358.2I
"FIA",358.2,0,1)
y^n^f^^y^^y^o^n
"FIA",358.2,0,10)

"FIA",358.2,0,11)

"FIA",358.2,0,"RLRO")

"FIA",358.2,0,"VR")
3.0^IBD
"FIA",358.2,358.2)
0
"FIA",358.2,358.21)
0
"FIA",358.2,358.22)
0
"FIA",358.5)
IMP/EXP DATA FIELD
"FIA",358.5,0)
^IBE(358.5,
"FIA",358.5,0,0)
358.5I
"FIA",358.5,0,1)
y^n^f^^y^^y^o^n
"FIA",358.5,0,10)

"FIA",358.5,0,11)

"FIA",358.5,0,"RLRO")

"FIA",358.5,0,"VR")
3.0^IBD
"FIA",358.5,358.5)
0
"FIA",358.5,358.52)
0
"FIA",358.6)
IMP/EXP PACKAGE INTERFACE
"FIA",358.6,0)
^IBE(358.6,
"FIA",358.6,0,0)
358.6I
"FIA",358.6,0,1)
y^n^f^^y^^y^o^n
"FIA",358.6,0,10)

"FIA",358.6,0,11)

"FIA",358.6,0,"RLRO")

"FIA",358.6,0,"VR")
3.0^IBD
"FIA",358.6,358.6)
0
"FIA",358.6,358.61)
0
"FIA",358.6,358.613)
0
"FIA",358.6,358.615)
0
"FIA",358.6,358.66)
0
"FIA",358.6,358.67)
0
"FIA",358.91)
IMP/EXP MARKING AREA
"FIA",358.91,0)
^IBE(358.91,
"FIA",358.91,0,0)
358.91
"FIA",358.91,0,1)
y^n^f^^y^^y^o^n
"FIA",358.91,0,10)

"FIA",358.91,0,11)

"FIA",358.91,0,"RLRO")

"FIA",358.91,0,"VR")
3.0^IBD
"FIA",358.91,358.91)
0
"FIA",358.93)
IMP/EXP MULTIPLE CHOICE FIELD
"FIA",358.93,0)
^IBE(358.93,
"FIA",358.93,0,0)
358.93
"FIA",358.93,0,1)
y^n^f^^y^^y^o^n
"FIA",358.93,0,10)

"FIA",358.93,0,11)

"FIA",358.93,0,"RLRO")

"FIA",358.93,0,"VR")
3.0^IBD
"FIA",358.93,358.93)
0
"FIA",358.93,358.931)
0
"FIA",358.98)
IMP/EXP AICS DATA QUALIFIERS
"FIA",358.98,0)
^IBD(358.98,
"FIA",358.98,0,0)
358.98I
"FIA",358.98,0,1)
y^n^f^^y^^y^o^n
"FIA",358.98,0,10)

"FIA",358.98,0,11)

"FIA",358.98,0,"RLRO")

"FIA",358.98,0,"VR")
3.0^IBD
"FIA",358.98,358.98)
0
"FRV1",358.2,"1,2,2,0",6)
BUBBLE (use for scanning)
"FRV1",358.2,"1,2,2,0",6,"F")
;IBE(358.91,
"FRV1",358.2,"1,2,2,0",9)
YES
"FRV1",358.2,"1,2,2,0",9,"F")
;IBD(358.98,
"FRV1",358.2,"1,2,3,0",6)
BUBBLE (use for scanning)
"FRV1",358.2,"1,2,3,0",6,"F")
;IBE(358.91,
"FRV1",358.2,"1,2,3,0",9)
NO
"FRV1",358.2,"1,2,3,0",9,"F")
;IBD(358.98,
"FRV1",358.2,"3,2,2,0",6)
BUBBLE (use for scanning)
"FRV1",358.2,"3,2,2,0",6,"F")
;IBE(358.91,
"FRV1",358.2,"3,2,2,0",9)
YES
"FRV1",358.2,"3,2,2,0",9,"F")
;IBD(358.98,
"FRV1",358.2,"3,2,3,0",6)
BUBBLE (use for scanning)
"FRV1",358.2,"3,2,3,0",6,"F")
;IBE(358.91,
"FRV1",358.2,"3,2,3,0",9)
NO
"FRV1",358.2,"3,2,3,0",9,"F")
;IBD(358.98,
"FRV1",358.6,"10,0",13)
PX INPUT SC TREATMENT QUESTIONS (MST)
"FRV1",358.6,"10,0",13,"F")
;IBE(358.6,
"FRV1",358.6,"16,0",13)
DGMST INPUT MST CLASSIFICATION
"FRV1",358.6,"16,0",13,"F")
;IBE(358.6,
"FRV1",358.93,"1,0",6)
PX INPUT VISIT CLASSIFICATION
"FRV1",358.93,"1,0",6,"F")
;IBE(358.6,
"FRV1",358.93,"1,0",8)
SC CONDITIONS (V2.1 MST)
"FRV1",358.93,"1,0",8,"F")
;IBE(358.1,
"FRV1",358.93,"1,1,1,0",9)
SERVICE CONNECTED
"FRV1",358.93,"1,1,1,0",9,"F")
;IBD(358.98,
"FRV1",358.93,"1,1,2,0",9)
AGENT ORANGE RELATED
"FRV1",358.93,"1,1,2,0",9,"F")
;IBD(358.98,
"FRV1",358.93,"1,1,3,0",9)
ENVIRONMENTAL CONTAMINANTS RELATED
"FRV1",358.93,"1,1,3,0",9,"F")
;IBD(358.98,
"FRV1",358.93,"1,1,4,0",9)
IONIZING RADIATION RELATED
"FRV1",358.93,"1,1,4,0",9,"F")
;IBD(358.98,
"FRV1",358.93,"1,1,5,0",9)
MILITARY SEXUAL TRAUMA
"FRV1",358.93,"1,1,5,0",9,"F")
;IBD(358.98,
"FRV1",358.93,"2,0",6)
PX INPUT NO CLASSIFICATIONS
"FRV1",358.93,"2,0",6,"F")
;IBE(358.6,
"FRV1",358.93,"2,0",8)
SC CONDITIONS (V2.1 MST)
"FRV1",358.93,"2,0",8,"F")
;IBE(358.1,
"FRV1",358.93,"2,1,1,0",9)
NO CLASSIFICATIONS
"FRV1",358.93,"2,1,1,0",9,"F")
;IBD(358.98,
"INI")
PRE^IBDY336
"INIT")
POST^IBDY336
"MBREQ")
0
"PGL",358.22,0,6,.06)
MARKING AREA^P358.91'^IBE(358.91,^0;6^Q
"PGL",358.22,0,9,.09)
DATA QUALIFIER^P358.98'^IBD(358.98,^0;9^Q
"PGL",358.6,0,11,.11)
TYPE OF HEALTH SUMMARY^*P142'^GMT(142,^0;11^S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",358.6,0,13,.13)
PACKAGE INTERFACE FOR INPUT^*P358.6'^IBE(358.6,^0;13^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",358.6,16,2,16.2)
NARRATIVE DATA TYPE^P358.99'^IBE(358.99,^16;2^Q
"PGL",358.6,16,6,16.6)
PRIMARY VALUE DATA TYPE^P358.99'^IBE(358.99,^16;6^Q
"PGL",358.93,0,6,.06)
TYPE OF DATA^R*P358.6'X^IBE(358.6,^0;6^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$D(^(9))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",358.93,0,8,.08)
BLOCK^RP358.1'^IBE(358.1,^0;8^Q
"PGL",358.931,0,9,.09)
DATA QUALIFIER^*P358.98'^IBD(358.98,^0;9^S DIC("S")="I $$DQGOOD^IBDFU9($P($G(^IBE(358.93,DA(1),0)),""^"",6),Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PKG",311,-1)
1^1
"PKG",311,0)
AUTOMATED INFO COLLECTION SYS^IBD^The utilities for generating a paper encounter form.
"PKG",311,20,0)
^9.402P^^
"PKG",311,22,0)
^9.49I^1^1
"PKG",311,22,1,0)
3.0^2970212^3000222^11983
"PKG",311,22,1,"PAH",1,0)
36^3001017^11983
"PKG",311,22,1,"PAH",1,1,0)
^^3^3^3001017
"PKG",311,22,1,"PAH",1,1,1,0)
Patch IBD*3*36 adds the Military Sexual Trauma (MST) indicator to AICS
"PKG",311,22,1,"PAH",1,1,2,0)
encounter form blocks and AICS manual data entry processes.  See the
"PKG",311,22,1,"PAH",1,1,3,0)
NPM on FORUM for complete information.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
13
"RTN","IBDECLN")
0^9^B91131302
"RTN","IBDECLN",1,0)
IBDECLN ;ALB/AAS - Clean up Data Qualifiers and Package interfaces ; 23-JUN-97
"RTN","IBDECLN",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**14,36**;APR 24, 1997
"RTN","IBDECLN",3,0)
 ;
"RTN","IBDECLN",4,0)
UPDATE(TALK) ; -- update both qualifiers and package interface file
"RTN","IBDECLN",5,0)
 ; -- do the qualifiers first to rename bad ones
"RTN","IBDECLN",6,0)
 ;
"RTN","IBDECLN",7,0)
 ; -- input Talk, 1=send messages through mes^xpdutl (default is 1)
"RTN","IBDECLN",8,0)
 ;                0=no messages
"RTN","IBDECLN",9,0)
 ;
"RTN","IBDECLN",10,0)
 S:$G(TALK)="" TALK=1
"RTN","IBDECLN",11,0)
 S TALK=$TR(TALK,"yesnomaybe","YESNOMAYBE")
"RTN","IBDECLN",12,0)
 S:$G(TALK)="YES" TALK=1
"RTN","IBDECLN",13,0)
 S TALK=+$G(TALK)
"RTN","IBDECLN",14,0)
 D CLNQLF(TALK),CLNPI(TALK)
"RTN","IBDECLN",15,0)
 D CLNSEL^IBDECLN1(TALK)
"RTN","IBDECLN",16,0)
 Q
"RTN","IBDECLN",17,0)
 ;
"RTN","IBDECLN",18,0)
CLNPI(TALK) ;
"RTN","IBDECLN",19,0)
 ; -- update/delete Allowable Qualifiers in Package Interface file
"RTN","IBDECLN",20,0)
 N I,J,K,L,X,Y,CNT,CNT1,CNT2,CNT3,CNT4,ENTRY,PI,QLF,NODE,FILE
"RTN","IBDECLN",21,0)
 N IEN,PROBLEM,QLFNODE,DATA,QLFNUM,NNODE,ONODE,NLEN,TOT
"RTN","IBDECLN",22,0)
 K ^TMP($J,"IBDE CLN")
"RTN","IBDECLN",23,0)
 S (CNT,CNT1,CNT2,CNT3,CNT4)=0
"RTN","IBDECLN",24,0)
 ;
"RTN","IBDECLN",25,0)
 S (X(1),X(3))="  "
"RTN","IBDECLN",26,0)
 S X(2)=">>> Now checking the PACKAGE INTERFACE file for inappropriate data qualifiers."
"RTN","IBDECLN",27,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",28,0)
 ;
"RTN","IBDECLN",29,0)
 ; -- build array of input package interfaces and qualifiers
"RTN","IBDECLN",30,0)
 ;    sent out with version 3.0
"RTN","IBDECLN",31,0)
 S I=0
"RTN","IBDECLN",32,0)
 F I=1:1 S ENTRY=$P($T(OUTPUT+I^IBDECLN2),";;",2) Q:ENTRY=""  D
"RTN","IBDECLN",33,0)
 . I $E(ENTRY)="~" Q
"RTN","IBDECLN",34,0)
 . I $E(ENTRY)'="+" D  Q
"RTN","IBDECLN",35,0)
 .. S PI=$E($P(ENTRY,":",1),1,30)
"RTN","IBDECLN",36,0)
 .. S DATA=$P(ENTRY,":",2)
"RTN","IBDECLN",37,0)
 .. S ^TMP($J,"IBDE CLN",PI,12)=DATA
"RTN","IBDECLN",38,0)
 . I $E(ENTRY)="+" D  Q
"RTN","IBDECLN",39,0)
 .. S QLF=$E($P(ENTRY,":",1),2,99)
"RTN","IBDECLN",40,0)
 .. S QLFNUM=+$O(^IBD(357.98,"B",$E(QLF,1,30),0))
"RTN","IBDECLN",41,0)
 .. Q:QLFNUM=0
"RTN","IBDECLN",42,0)
 .. S DATA=QLFNUM_$P(ENTRY,":",2)
"RTN","IBDECLN",43,0)
 .. S ^TMP($J,"IBDE CLN",PI,"QLF",QLF)=DATA
"RTN","IBDECLN",44,0)
 ;
"RTN","IBDECLN",45,0)
 ; -- now go through the supported list of Package Interface entries
"RTN","IBDECLN",46,0)
 ;    and make sure that the main PCE DIM data is correct (node 12)
"RTN","IBDECLN",47,0)
 ;
"RTN","IBDECLN",48,0)
 S PI=""
"RTN","IBDECLN",49,0)
 F  S PI=$O(^TMP($J,"IBDE CLN",PI)) Q:PI=""  D
"RTN","IBDECLN",50,0)
 . S (J,K)=0
"RTN","IBDECLN",51,0)
 . F  S J=$O(^IBE(357.6,"B",PI,J)) Q:'J  D
"RTN","IBDECLN",52,0)
 .. S NNODE=$G(^TMP($J,"IBDE CLN",PI,12))
"RTN","IBDECLN",53,0)
 .. Q:NNODE=""
"RTN","IBDECLN",54,0)
 .. S ONODE=$G(^IBE(357.6,J,12))
"RTN","IBDECLN",55,0)
 .. S NLEN=$L(NNODE)
"RTN","IBDECLN",56,0)
 .. I $E(ONODE,1,NLEN)'=NNODE D DEL(TALK,PI,J,K,20,NNODE,ONODE)
"RTN","IBDECLN",57,0)
 ;
"RTN","IBDECLN",58,0)
 ; -- now go through the qualifiers for the package interface
"RTN","IBDECLN",59,0)
 ;    and make sure that only supported qualifiers are listed, 
"RTN","IBDECLN",60,0)
 ;    no duplicates, and that the data is correct.
"RTN","IBDECLN",61,0)
 ;
"RTN","IBDECLN",62,0)
 S PI=""
"RTN","IBDECLN",63,0)
 S (CNT1,CNT3)=0
"RTN","IBDECLN",64,0)
 F  S PI=$O(^TMP($J,"IBDE CLN",PI)) Q:PI=""  D
"RTN","IBDECLN",65,0)
 . S (J,K)=0
"RTN","IBDECLN",66,0)
 . F  S J=$O(^IBE(357.6,"B",PI,J)) Q:'J  D
"RTN","IBDECLN",67,0)
 .. N CNT1,ONODE,NNODE,PIQLF
"RTN","IBDECLN",68,0)
 .. S K=0
"RTN","IBDECLN",69,0)
 .. F  S K=$O(^IBE(357.6,J,13,K)) Q:K=""  D
"RTN","IBDECLN",70,0)
 ... ;
"RTN","IBDECLN",71,0)
 ... S ONODE=$G(^IBE(357.6,J,13,K,0)) Q:ONODE=""
"RTN","IBDECLN",72,0)
 ... S FILE=$P($P(ONODE,"^",1),";",2)
"RTN","IBDECLN",73,0)
 ... Q:FILE'="IBD(357.98,"
"RTN","IBDECLN",74,0)
 ... S IEN=+ONODE
"RTN","IBDECLN",75,0)
 ... S QLF=$P($G(^IBD(357.98,IEN,0),"UNKNOWN"),"^",1)
"RTN","IBDECLN",76,0)
 ... S PIQLF(QLF)=""
"RTN","IBDECLN",77,0)
 ... ;
"RTN","IBDECLN",78,0)
 ... ; -- now if there is a duplicate, delete the duplicate
"RTN","IBDECLN",79,0)
 ... S NNODE=$G(^TMP($J,"IBDE CLN",PI,"QLF",QLF))
"RTN","IBDECLN",80,0)
 ... I NNODE="" D DEL(TALK,PI,J,K,1) Q
"RTN","IBDECLN",81,0)
 ... S CNT1(PI,QLF)=$G(CNT1(PI,QLF))+1
"RTN","IBDECLN",82,0)
 ... I CNT1(PI,QLF)>1 D DEL(TALK,PI,J,K,2) Q
"RTN","IBDECLN",83,0)
 ... ;
"RTN","IBDECLN",84,0)
 ... S NLEN=$L(NNODE)
"RTN","IBDECLN",85,0)
 ... I $E(ONODE,1,NLEN)'=NNODE D DEL(TALK,PI,J,K,21,NNODE,ONODE)
"RTN","IBDECLN",86,0)
 .. ; --check to see if all allowable qualifiers exist if not, add
"RTN","IBDECLN",87,0)
 .. S QLF="" F  S QLF=$O(^TMP($J,"IBDE CLN",PI,"QLF",QLF)) Q:QLF']""  D
"RTN","IBDECLN",88,0)
 ... N FILE,DATA,IBDFDA,QLFNODE,NIEN,ERROR
"RTN","IBDECLN",89,0)
 ... Q:$D(PIQLF(QLF))
"RTN","IBDECLN",90,0)
 ... S FILE=357.613,IBDFDA(1)=J
"RTN","IBDECLN",91,0)
 ... S QLFNODE=$G(^TMP($J,"IBDE CLN",PI,"QLF",QLF))
"RTN","IBDECLN",92,0)
 ... S DATA(.01)=$P(QLFNODE,"^")
"RTN","IBDECLN",93,0)
 ... Q:DATA(.01)=""
"RTN","IBDECLN",94,0)
 ... S NIEN=$$ADD^IBDFDBS(FILE,.IBDFDA,.DATA,.ERROR)
"RTN","IBDECLN",95,0)
 ... D:+NIEN>0 DEL(TALK,PI,J,NIEN,22,QLFNODE)
"RTN","IBDECLN",96,0)
 ;
"RTN","IBDECLN",97,0)
 G:'TALK END
"RTN","IBDECLN",98,0)
 ;
"RTN","IBDECLN",99,0)
 ; -- Find out if Problem is in PCE DIM NODE in 357.6
"RTN","IBDECLN",100,0)
 ;    if so, then user is warned to contact customer service
"RTN","IBDECLN",101,0)
 ;    to be manually corrected
"RTN","IBDECLN",102,0)
 D PROBLEM^IBDECLN1(.PROBLEM)
"RTN","IBDECLN",103,0)
 I PROBLEM>0 D
"RTN","IBDECLN",104,0)
 . S X(1)="  ",X(2)=" >> WARNING: The following interfaces use the PROBLEM node to transmit data"
"RTN","IBDECLN",105,0)
 . D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",106,0)
 . S I=0 ;skip the zero node, contains PI stuff
"RTN","IBDECLN",107,0)
 . F  S I=$O(PROBLEM(I)) Q:I=""  D:TALK MES^XPDUTL("    Package Interface "_PROBLEM(I))
"RTN","IBDECLN",108,0)
 . D:TALK MES^XPDUTL("    Contact Customer Support for assistance updating the package interface file.")
"RTN","IBDECLN",109,0)
 ;
"RTN","IBDECLN",110,0)
 ;
"RTN","IBDECLN",111,0)
SUM ; -- summary of package interface file check
"RTN","IBDECLN",112,0)
 K X
"RTN","IBDECLN",113,0)
 S TOT=2
"RTN","IBDECLN",114,0)
 S X(1)=" "
"RTN","IBDECLN",115,0)
 S X(2)=" >> Summary of the Package Interface Check:"
"RTN","IBDECLN",116,0)
 ;
"RTN","IBDECLN",117,0)
 I CNT<1,CNT2<1,CNT3<1,CNT4<1 D
"RTN","IBDECLN",118,0)
 . S TOT=TOT+1,X(TOT)="    No required changes were found."
"RTN","IBDECLN",119,0)
 ;
"RTN","IBDECLN",120,0)
 I CNT>0 D
"RTN","IBDECLN",121,0)
 . S TOT=TOT+1
"RTN","IBDECLN",122,0)
 . S X(TOT)="    A total of "_CNT_" qualifier"_$S(CNT=1:" was",1:"s were")_" removed from Package Interface Entries."
"RTN","IBDECLN",123,0)
 ;
"RTN","IBDECLN",124,0)
 ;
"RTN","IBDECLN",125,0)
 I CNT2>0 D
"RTN","IBDECLN",126,0)
 . S TOT=TOT+1
"RTN","IBDECLN",127,0)
 . S X(TOT)="    The PCE DIM data fields for "_CNT2_" Package Interface"_$S(CNT2=1:" was",1:"s were")_" updated."
"RTN","IBDECLN",128,0)
 ;
"RTN","IBDECLN",129,0)
 I CNT3>0 D
"RTN","IBDECLN",130,0)
 . S TOT=TOT+1
"RTN","IBDECLN",131,0)
 . S X(TOT)="    The PCE DIM data fields for "_CNT3_" Allowable Qualifier"_$S(CNT3=1:" was",1:"s were")_" updated."
"RTN","IBDECLN",132,0)
 ;
"RTN","IBDECLN",133,0)
 I CNT4>0 D
"RTN","IBDECLN",134,0)
 . S TOT=TOT+1
"RTN","IBDECLN",135,0)
 . S X(TOT)="    A total of "_CNT4_" Allowable Qualifier"_$S(CNT4=1:" was",1:"s were")_" added."
"RTN","IBDECLN",136,0)
 I PROBLEM>0 D
"RTN","IBDECLN",137,0)
 . S TOT=TOT+1,X(TOT)="    Contact Customer Support for assistance updating the package interface file."
"RTN","IBDECLN",138,0)
 ;
"RTN","IBDECLN",139,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",140,0)
 ;
"RTN","IBDECLN",141,0)
END K ^TMP($J,"IBDE CLN")
"RTN","IBDECLN",142,0)
 Q
"RTN","IBDECLN",143,0)
 ;
"RTN","IBDECLN",144,0)
DEL(TALK,PI,J,K,REASON,NNODE,ONODE) ; -- delete inappropriate entries
"RTN","IBDECLN",145,0)
 ;
"RTN","IBDECLN",146,0)
 ;  reasons for deletion or warnings
"RTN","IBDECLN",147,0)
 ;  1- invalid qualifier
"RTN","IBDECLN",148,0)
 ;  2- duplicate qualifier
"RTN","IBDECLN",149,0)
 ;  9- bad qualifier, not deleted, user warned
"RTN","IBDECLN",150,0)
 ;  20-node ^IBE(357.6,IEN,12) not correct
"RTN","IBDECLN",151,0)
 ;  21-node ^IBE(357.6,IEN,13,allow qual,0) not correct
"RTN","IBDECLN",152,0)
 ;
"RTN","IBDECLN",153,0)
 N I,X,Y,DA,DIC,DIK
"RTN","IBDECLN",154,0)
 I (REASON=1!(REASON=2)) S CNT=CNT+1
"RTN","IBDECLN",155,0)
 S CNT(PI)=+$G(CNT(PI))+1
"RTN","IBDECLN",156,0)
 I CNT(PI)=1 D
"RTN","IBDECLN",157,0)
 . S X(1)=" ",X(2)="    The Package Interface "_PI_" had: "
"RTN","IBDECLN",158,0)
 . D:TALK MES^XPDUTL(.X) N X
"RTN","IBDECLN",159,0)
 D:(TALK&(REASON=1)) MES^XPDUTL("       an invalid qualifier of "_QLF_" deleted.")
"RTN","IBDECLN",160,0)
 D:(TALK&(REASON=2)) MES^XPDUTL("       a duplicate qualifier of "_QLF_" deleted.")
"RTN","IBDECLN",161,0)
 I TALK&(REASON=9) D MES^XPDUTL("       a bad qualifier of "_QLF_" not deleted, PCE DIM NODE='PROBLEM'") Q  ;don't delete, save for manual update
"RTN","IBDECLN",162,0)
 ;
"RTN","IBDECLN",163,0)
 I REASON<10 S DA=K,DA(1)=J,DIK="^IBE(357.6,"_DA(1)_",13," D ^DIK Q
"RTN","IBDECLN",164,0)
 ;
"RTN","IBDECLN",165,0)
 I TALK&(REASON=20) D
"RTN","IBDECLN",166,0)
 . N X
"RTN","IBDECLN",167,0)
 . S X(1)="       The PCE Device Interface Data Updated."
"RTN","IBDECLN",168,0)
 . S X(2)="          Old Data: "_ONODE
"RTN","IBDECLN",169,0)
 . S X(3)="          New Data: "_NNODE
"RTN","IBDECLN",170,0)
 . D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",171,0)
 . S CNT2=CNT2+1
"RTN","IBDECLN",172,0)
 . S ^IBE(357.6,J,12)=NNODE
"RTN","IBDECLN",173,0)
 ;
"RTN","IBDECLN",174,0)
 I TALK&(REASON=21) D
"RTN","IBDECLN",175,0)
 . N X
"RTN","IBDECLN",176,0)
 . S X(1)="       The PCE Device Interface Data for the Data Qualifier "_QLF_" was updated."
"RTN","IBDECLN",177,0)
 . S X(2)="          Old Data: "_ONODE
"RTN","IBDECLN",178,0)
 . S X(3)="          New Data: "_NNODE
"RTN","IBDECLN",179,0)
 . D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",180,0)
 . S CNT3=CNT3+1
"RTN","IBDECLN",181,0)
 . S ^IBE(357.6,J,13,K,0)=NNODE
"RTN","IBDECLN",182,0)
 ;
"RTN","IBDECLN",183,0)
 I TALK&(REASON=22) D
"RTN","IBDECLN",184,0)
 . S CNT4=CNT4+1
"RTN","IBDECLN",185,0)
 . D MES^XPDUTL("       "_QLF_" was added.")
"RTN","IBDECLN",186,0)
 . S ^IBE(357.6,J,13,K,0)=NNODE
"RTN","IBDECLN",187,0)
 Q
"RTN","IBDECLN",188,0)
 ;
"RTN","IBDECLN",189,0)
CLNQLF(TALK) ;
"RTN","IBDECLN",190,0)
 ; -- update codes in AICS DATA QUALIFIERS file (357.98)
"RTN","IBDECLN",191,0)
 ;    according to version 3.0
"RTN","IBDECLN",192,0)
 N I,J,K,L,X,Y,CNT,CNT1,CNT2,CNT3,ENTRY,NAME,CODE,NEWNAME,IBQUIT,DIC,DIE,DIK,DA,DR
"RTN","IBDECLN",193,0)
 S (CNT,CNT1)=0,CNT2=1
"RTN","IBDECLN",194,0)
 ;
"RTN","IBDECLN",195,0)
 S (X(1),X(3))="  "
"RTN","IBDECLN",196,0)
 S X(2)=">>> Now checking the AICS DATA QUALIFIERS file for inappropriate entries."
"RTN","IBDECLN",197,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",198,0)
 ;
"RTN","IBDECLN",199,0)
 ; -- Go through AICS Data Qualifiers and set up correctly
"RTN","IBDECLN",200,0)
 F I=1:1:28 S ENTRY=$P($T(DATA+I),";;",2) Q:ENTRY=""  D
"RTN","IBDECLN",201,0)
 . S CNT=CNT+1
"RTN","IBDECLN",202,0)
 . S NAME=$P(ENTRY,"^",1)
"RTN","IBDECLN",203,0)
 . S CODE=$P(ENTRY,"^",2)
"RTN","IBDECLN",204,0)
 . S J=""
"RTN","IBDECLN",205,0)
 . F  S J=$O(^IBD(357.98,"B",NAME,J)) Q:J=""  D
"RTN","IBDECLN",206,0)
 .. I $P($G(^IBD(357.98,J,0)),"^",2)=CODE Q
"RTN","IBDECLN",207,0)
 .. ;
"RTN","IBDECLN",208,0)
 .. ; -- don't change Active=1 and Inactive=0 if Problem
"RTN","IBDECLN",209,0)
 .. I $P($G(^IBE(357.6,J,12)),"^",1)="PROBLEM",NAME="ACTIVE"!(NAME="INACTIVE") D  Q:IBQUIT
"RTN","IBDECLN",210,0)
 ... S IBQUIT=0
"RTN","IBDECLN",211,0)
 ... I NAME="ACTIVE",($P($G(^IBD(357.98,J,0)),"^",2)=1) D
"RTN","IBDECLN",212,0)
 ....S IBQUIT=1
"RTN","IBDECLN",213,0)
 ....D MES^XPDUTL("    The qualifier ACTIVE with a code of 1 needs to be changed but is used.")
"RTN","IBDECLN",214,0)
 ... I NAME="INACTIVE",($P($G(^IBD(357.98,J,0)),"^",2)=0) D
"RTN","IBDECLN",215,0)
 ....S IBQUIT=1
"RTN","IBDECLN",216,0)
 ....D MES^XPDUTL("    The qualifier of INACTIVE with a code of 0 needs to be changed but is used.")
"RTN","IBDECLN",217,0)
 ..
"RTN","IBDECLN",218,0)
 .. ; -- keep track of what was changed
"RTN","IBDECLN",219,0)
 .. S CNT(NAME)=$G(CNT(NAME))+1
"RTN","IBDECLN",220,0)
 .. S CNT1=CNT1+1,CNT2=CNT2+1
"RTN","IBDECLN",221,0)
 .. S CNT3(CNT2)="    The Entry "_$G(^IBD(357.98,J,0))_" changed to ZZBAD-"_ENTRY
"RTN","IBDECLN",222,0)
 .. ;
"RTN","IBDECLN",223,0)
 .. ; -- see if it's used
"RTN","IBDECLN",224,0)
 .. S K=0 F  S K=$O(^IBE(357.6,K)) Q:'K  I $D(^IBE(357.6,K,13)) D
"RTN","IBDECLN",225,0)
 ... S L=0 F  S L=$O(^IBE(357.6,K,13,L)) Q:'L  I $P($G(^IBE(357.6,K,13,L,0)),"^",1)=(J_";IBD(357.98,") D
"RTN","IBDECLN",226,0)
 .... S CNT2=CNT2+1
"RTN","IBDECLN",227,0)
 .... S CNT3(CNT2)="       and was used by Package File entry "_$P($G(^IBE(357.6,K,0)),"^",1)
"RTN","IBDECLN",228,0)
 .. ;
"RTN","IBDECLN",229,0)
 .. ; -- finally, make the change
"RTN","IBDECLN",230,0)
 .. S NEWNAME=$E("ZZBAD-"_$P(^IBD(357.98,J,0),"^",1),1,30)
"RTN","IBDECLN",231,0)
 .. S DIE="^IBD(357.98,",DA=J,DR=".01////^S X=NEWNAME;.02////^S X=CODE"
"RTN","IBDECLN",232,0)
 .. N I,J,K,L,X,Y D ^DIE K DIE,DA,DR
"RTN","IBDECLN",233,0)
 ;
"RTN","IBDECLN",234,0)
 ;
"RTN","IBDECLN",235,0)
 ; -- reindex the file
"RTN","IBDECLN",236,0)
 S DIK="^IBD(357.98,"
"RTN","IBDECLN",237,0)
 D IXALL^DIK
"RTN","IBDECLN",238,0)
 ;
"RTN","IBDECLN",239,0)
 ; summary of the aics data qualifiers check
"RTN","IBDECLN",240,0)
 ;
"RTN","IBDECLN",241,0)
 K X
"RTN","IBDECLN",242,0)
 S X(1)=" ",X(2)=" >> Summary of the AICS Data Qualifiers Check:"
"RTN","IBDECLN",243,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",244,0)
 K X
"RTN","IBDECLN",245,0)
 I $G(CNT1)>0 M X=CNT3 S X(1)="    The number of changes made was "_CNT1
"RTN","IBDECLN",246,0)
 I CNT1=0 S X(1)="    No required changes were found.",X(2)=" "
"RTN","IBDECLN",247,0)
 I CNT1>1 S (X(CNT2+1),X(CNT2+3))=" ",X(CNT2+2)=" >> Done updating the AICS DATA QUALIFIERS file"
"RTN","IBDECLN",248,0)
 D:TALK MES^XPDUTL(.X)
"RTN","IBDECLN",249,0)
 Q
"RTN","IBDECLN",250,0)
 ;
"RTN","IBDECLN",251,0)
DATA ;;
"RTN","IBDECLN",252,0)
 ;;NONE APPLICABLE^ 
"RTN","IBDECLN",253,0)
 ;;PRIMARY^P^P
"RTN","IBDECLN",254,0)
 ;;SECONDARY^S^S
"RTN","IBDECLN",255,0)
 ;;ACTIVE^A^A
"RTN","IBDECLN",256,0)
 ;;INACTIVE^I^I
"RTN","IBDECLN",257,0)
 ;;HISTORICAL^H
"RTN","IBDECLN",258,0)
 ;;ADD TO PROBLEM LIST^1^ADD
"RTN","IBDECLN",259,0)
 ;;SERVICE CONNECTED^1^SC
"RTN","IBDECLN",260,0)
 ;;AGENT ORANGE RELATED^1^AO
"RTN","IBDECLN",261,0)
 ;;IONIZING RADIATION RELATED^1^IR
"RTN","IBDECLN",262,0)
 ;;ENVIRONMENTAL CONTAMINANTS RELATED^1^EC
"RTN","IBDECLN",263,0)
 ;;MILITARY SEXUAL TRAUMA^1^MST
"RTN","IBDECLN",264,0)
 ;;ABNORMAL RESULT^A^ABNORM
"RTN","IBDECLN",265,0)
 ;;NORMAL RESULT^N^NORM
"RTN","IBDECLN",266,0)
 ;;POOR UNDERSTANDING^1^POOR
"RTN","IBDECLN",267,0)
 ;;FAIR UNDERSTANDING^2^FAIR
"RTN","IBDECLN",268,0)
 ;;GOOD UNDERSTANDING^3^GOOD
"RTN","IBDECLN",269,0)
 ;;UNDERSTANDING NOT ASSESSED^4^N/A
"RTN","IBDECLN",270,0)
 ;;PATIENT ED REFUSED^5^REFUSED
"RTN","IBDECLN",271,0)
 ;;MINIMAL SEVERITY^M^MINIMAL
"RTN","IBDECLN",272,0)
 ;;MODERATE SEVERITY^MO^MODERATE
"RTN","IBDECLN",273,0)
 ;;HEAVY SEVERITY^H^SEVERE
"RTN","IBDECLN",274,0)
 ;;YES^1^YES
"RTN","IBDECLN",275,0)
 ;;NO^0^NO
"RTN","IBDECLN",276,0)
 ;;CONTRAINDICATED^1^CONTRA.
"RTN","IBDECLN",277,0)
 ;;GIVEN^0^GIV
"RTN","IBDECLN",278,0)
 ;;REFUSED^1^REFUSED
"RTN","IBDECLN",279,0)
 ;;NON-SERVICE CONNECTED^0^NSC
"RTN","IBDECLN",280,0)
 ;;NO CLASSIFICATIONS^1^NO CLASSIF
"RTN","IBDECLN",281,0)
 ;;
"RTN","IBDECLN2")
0^10^B26741519
"RTN","IBDECLN2",1,0)
IBDECLN2 ;ALB/AAS - Clean up Data Qualifiers and Package interfaces ; 23-JUN-97
"RTN","IBDECLN2",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**14,36**;APR 24, 1997
"RTN","IBDECLN2",3,0)
 ;
"RTN","IBDECLN2",4,0)
 ; -- This routine contains critical data for Package Interface File
"RTN","IBDECLN2",5,0)
 ;    that is used in formatting the data for transmission to scanning
"RTN","IBDECLN2",6,0)
 ;    
"RTN","IBDECLN2",7,0)
 ;    Format
"RTN","IBDECLN2",8,0)
 ;       Line 1, Package Interface Node:  File 357.6   (node,piece)
"RTN","IBDECLN2",9,0)
 ;               p1: Package Interface Name            (0;1)
"RTN","IBDECLN2",10,0)
 ;               p2: PCE Interface Node                (12;1)
"RTN","IBDECLN2",11,0)
 ;               p3: Value Piece                       (12;2)
"RTN","IBDECLN2",12,0)
 ;               p4: Narrative Piece                   (12;3)
"RTN","IBDECLN2",13,0)
 ;               p5: Header Piece                      (12;4)
"RTN","IBDECLN2",14,0)
 ;               p6: Qualifier Piece                   (12;5)
"RTN","IBDECLN2",15,0)
 ;               p7: Quantity Piece                    (12;6)
"RTN","IBDECLN2",16,0)
 ;       Subsequent Lines, for data qualifiers (357.631)
"RTN","IBDECLN2",17,0)
 ;               p1: Allowable Qualifier Name          (0;1)
"RTN","IBDECLN2",18,0)
 ;               p3: Independent Mapping               (0;3)
"RTN","IBDECLN2",19,0)
 ;               p4: PCE Interface Node                (0;4)
"RTN","IBDECLN2",20,0)
 ;               p5: Value Piece                       (0;5)
"RTN","IBDECLN2",21,0)
 ;               p7: Header Piece                      (0;7)
"RTN","IBDECLN2",22,0)
 ;               p8: Qualifier Piece                   (0;8)
"RTN","IBDECLN2",23,0)
 ;               
"RTN","IBDECLN2",24,0)
OUTPUT ;;
"RTN","IBDECLN2",25,0)
PROC ;;INPUT PROCEDURE CODE (CPT4):PROCEDURE^1^6^7^3^2
"RTN","IBDECLN2",26,0)
 ;;+PRIMARY:;IBD(357.98,^^0
"RTN","IBDECLN2",27,0)
 ;;+SECONDARY:;IBD(357.98,^^0
"RTN","IBDECLN2",28,0)
 ;;~~~
"RTN","IBDECLN2",29,0)
PROV ;;INPUT PROVIDER:ENCOUNTER^4^^^15
"RTN","IBDECLN2",30,0)
 ;;+PRIMARY:;IBD(357.98,^^0
"RTN","IBDECLN2",31,0)
 ;;+SECONDARY:;IBD(357.98,^^0
"RTN","IBDECLN2",32,0)
 ;;~~~
"RTN","IBDECLN2",33,0)
PROB ;;GMP INPUT CLINIC COMMON PROBLEMS:DIAGNOSIS/PROBLEM^3^13^14^2
"RTN","IBDECLN2",34,0)
 ;;+PRIMARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",35,0)
 ;;+SECONDARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",36,0)
 ;;+SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",37,0)
 ;;+AGENT ORANGE RELATED:;IBD(357.98,^^1^^^^^10
"RTN","IBDECLN2",38,0)
 ;;+IONIZING RADIATION RELATED:;IBD(357.98,^^1^^^^^11
"RTN","IBDECLN2",39,0)
 ;;+ENVIRONMENTAL CONTAMINANTS RELATED:;IBD(357.98,^^1^^^^^12
"RTN","IBDECLN2",40,0)
 ;;+ADD TO PROBLEM LIST:;IBD(357.98,^^1^^^^^5
"RTN","IBDECLN2",41,0)
 ;;+ACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",42,0)
 ;;+INACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",43,0)
 ;;+NON-SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",44,0)
 ;;~~~
"RTN","IBDECLN2",45,0)
DIAG ;;INPUT DIAGNOSIS CODE (ICD9):DIAGNOSIS/PROBLEM^1^13^14^2
"RTN","IBDECLN2",46,0)
 ;;+PRIMARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",47,0)
 ;;+SECONDARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",48,0)
 ;;+SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",49,0)
 ;;+ICD-9 DIAGNOSIS CODE:;IBD(359.1,^^0
"RTN","IBDECLN2",50,0)
 ;;+AGENT ORANGE RELATED:;IBD(357.98,^^1^^^^^10
"RTN","IBDECLN2",51,0)
 ;;+IONIZING RADIATION RELATED:;IBD(357.98,^^1^^^^^11
"RTN","IBDECLN2",52,0)
 ;;+ENVIRONMENTAL CONTAMINANTS RELATED:;IBD(357.98,^^1^^^^^12
"RTN","IBDECLN2",53,0)
 ;;+ADD TO PROBLEM LIST:;IBD(357.98,^^1^^^^^5
"RTN","IBDECLN2",54,0)
 ;;+ACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",55,0)
 ;;+INACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",56,0)
 ;;~~~
"RTN","IBDECLN2",57,0)
 ;;PX INPUT CHECKOUT TIME:ENCOUNTER^14
"RTN","IBDECLN2",58,0)
 ;;+CHECKOUT DATE@TIME:;IBD(359.1,^^0
"RTN","IBDECLN2",59,0)
 ;;+CHECKOUT TIME - DATE ASSUMED;IBD(359.1,^^0
"RTN","IBDECLN2",60,0)
 ;;~~~
"RTN","IBDECLN2",61,0)
 ;;PX INPUT EDUCATION TOPICS:PATIENT ED^1^^^2
"RTN","IBDECLN2",62,0)
 ;;+POOR UNDERSTANDING:;IBD(357.98,^^0
"RTN","IBDECLN2",63,0)
 ;;+FAIR UNDERSTANDING:;IBD(357.98,^^0
"RTN","IBDECLN2",64,0)
 ;;+GOOD UNDERSTANDING:;IBD(357.98,^^0
"RTN","IBDECLN2",65,0)
 ;;+UNDERSTANDING NOT ASSESSED:;IBD(357.98,^^0
"RTN","IBDECLN2",66,0)
 ;;+PATIENT ED REFUSED:;IBD(357.98,^^0
"RTN","IBDECLN2",67,0)
 ;;~~~
"RTN","IBDECLN2",68,0)
 ;;PX INPUT EXAMS:EXAM^1^^^2
"RTN","IBDECLN2",69,0)
 ;;+ABNORMAL RESULT:;IBD(357.98,^^0
"RTN","IBDECLN2",70,0)
 ;;+NORMAL RESULT:;IBD(357.98,^^0
"RTN","IBDECLN2",71,0)
 ;;~~~
"RTN","IBDECLN2",72,0)
 ;;PX INPUT HEALTH FACTORS:HEALTH FACTORS^1^^^2
"RTN","IBDECLN2",73,0)
 ;;+MINIMAL SEVERITY:;IBD(357.98,^^0
"RTN","IBDECLN2",74,0)
 ;;+MODERATE SEVERITY:;IBD(357.98,^^0
"RTN","IBDECLN2",75,0)
 ;;+HEAVY SEVERITY:;IBD(357.98,^^0
"RTN","IBDECLN2",76,0)
 ;;~~~
"RTN","IBDECLN2",77,0)
 ;;PX INPUT IMMUNIZATION:IMMUNIZATION^1^7
"RTN","IBDECLN2",78,0)
 ;;+CONTRAINDICATED:;IBD(357.98,^^1^IMMUNIZATION^1^^^5
"RTN","IBDECLN2",79,0)
 ;;+GIVEN:;IBD(357.98,^^1^IMMUNIZATION^1
"RTN","IBDECLN2",80,0)
 ;;+REFUSED:;IBD(357.98,^^1^IMMUNIZATION^1^^^8
"RTN","IBDECLN2",81,0)
 ;;~~~
"RTN","IBDECLN2",82,0)
 ;;PX INPUT PATIENT ACTIVE PROBLEM:DIAGNOSIS/PROBLEM^4^13^14^2
"RTN","IBDECLN2",83,0)
 ;;+PRIMARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",84,0)
 ;;+SECONDARY:;IBD(357.98,^^1^^^^^2
"RTN","IBDECLN2",85,0)
 ;;+SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",86,0)
 ;;+AGENT ORANGE RELATED:;IBD(357.98,^^1^^^^^10
"RTN","IBDECLN2",87,0)
 ;;+IONIZING RADIATION RELATED:;IBD(357.98,^^1^^^^^11
"RTN","IBDECLN2",88,0)
 ;;+ENVIRONMENTAL CONTAMINANTS RELATED:;IBD(357.98,^^1^^^^^12
"RTN","IBDECLN2",89,0)
 ;;+ACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",90,0)
 ;;+INACTIVE:;IBD(357.98,^^1^^^^^6
"RTN","IBDECLN2",91,0)
 ;;+NON-SERVICE CONNECTED:;IBD(357.98,^^1^^^^^9
"RTN","IBDECLN2",92,0)
 ;;~~~
"RTN","IBDECLN2",93,0)
 ;;PX INPUT SC TREATMENT QUESTIONS:ENCOUNTER
"RTN","IBDECLN2",94,0)
 ;;+YES:;IBD(357.98,^^0
"RTN","IBDECLN2",95,0)
 ;;+NO:;IBD(357.98,^^0
"RTN","IBDECLN2",96,0)
 ;;~~~
"RTN","IBDECLN2",97,0)
 ;;PX INPUT VISIT CLASSIFICATION:ENCOUNTER
"RTN","IBDECLN2",98,0)
 ;;+ENVIRONMENTAL CONTAMINANTS RELATED:;IBD(357.98,^^0
"RTN","IBDECLN2",99,0)
 ;;+SERVICE CONNECTED:;IBD(357.98,^^0
"RTN","IBDECLN2",100,0)
 ;;+AGENT ORANGE RELATED:;IBD(357.98,^^0
"RTN","IBDECLN2",101,0)
 ;;+IONIZING RADIATION RELATED:;IBD(357.98,^^0
"RTN","IBDECLN2",102,0)
 ;;+MILITARY SEXUAL TRAUMA:;IBD(357.98,^^0
"RTN","IBDECLN2",103,0)
 ;;~~~
"RTN","IBDECLN2",104,0)
 ;;PX INPUT SC TREATMENT QUESTION:ENCOUNTER
"RTN","IBDECLN2",105,0)
 ;;+YES:;IBD(357.98,^^0
"RTN","IBDECLN2",106,0)
 ;;+NO:;IBD(357.98,^^0
"RTN","IBDECLN2",107,0)
 ;;~~~
"RTN","IBDECLN2",108,0)
 ;;PX INPUT NO CLASSIFICATIONS:IBD NOCLASSIFICATION
"RTN","IBDECLN2",109,0)
 ;;+NO CLASSIFICATIONS:;IBD(357.98,^^0
"RTN","IBDECLN2",110,0)
 ;;~~~
"RTN","IBDECLN2",111,0)
 ;;PX INPUT SC TREATMENT QUESTION (MST):ENCOUNTER
"RTN","IBDECLN2",112,0)
 ;;+YES:;IBD(357.98,^^0
"RTN","IBDECLN2",113,0)
 ;;+NO:;IBD(357.98,^^0
"RTN","IBDECLN2",114,0)
 ;;~~~
"RTN","IBDECLN2",115,0)
 ;;DGMST INPUT MST CLASSIFICATION:ENCOUNTER
"RTN","IBDECLN2",116,0)
 ;;+YES:;IBD(357.98,^^0
"RTN","IBDECLN2",117,0)
 ;;+NO:;IBD(357.98,^^0
"RTN","IBDECLN2",118,0)
 ;;~~~
"RTN","IBDECLN2",119,0)
 ;;IBD INPUT CANCEL/NOSHOW^IBD-ABORT^1^2^3^4^5
"RTN","IBDECLN2",120,0)
 ;;~~~
"RTN","IBDECLN2",121,0)
 ;;INPUT VISIT TYPE:ENCOUNTER^5
"RTN","IBDECLN2",122,0)
 ;;~~~
"RTN","IBDECLN2",123,0)
 ;;INPUT SC RELATED?:ENCOUNTER^6^^^6
"RTN","IBDECLN2",124,0)
 ;;~~~
"RTN","IBDECLN2",125,0)
 ;;INPUT AO RELATED?:ENCOUNTER^7
"RTN","IBDECLN2",126,0)
 ;;~~~
"RTN","IBDECLN2",127,0)
 ;;INPUT IR RELATED?:ENCOUNTER^8^^^9
"RTN","IBDECLN2",128,0)
 ;;~~~
"RTN","IBDECLN2",129,0)
 ;;INPUT EC RELATED?:ENCOUNTER^^^^9
"RTN","IBDECLN2",130,0)
 ;;~~~
"RTN","IBDECLN2",131,0)
 ;;INPUT PROVIDER INDICATOR:ENCOUNTER^15
"RTN","IBDECLN2",132,0)
 ;;~~~
"RTN","IBDECLN2",133,0)
 ;;PX INPUT ATTENDING PHYSICIAN:ENCOUNTER^16
"RTN","IBDECLN2",134,0)
 ;;~~~
"RTN","IBDECLN2",135,0)
 ;;PX INPUT SKIN TESTS:SKIN TEST^1
"RTN","IBDECLN2",136,0)
 ;;~~~
"RTN","IBDECLN2",137,0)
 ;;PX INPUT VISIT TYPE:ENCOUNTER^5
"RTN","IBDECLN2",138,0)
 ;;~~~
"RTN","IBDECLN2",139,0)
 ;;
"RTN","IBDECLN2",140,0)
 ;;GMP SELECT PATIENT ACTIVE PROBLEMS^PRIMARY^SECONDARY
"RTN","IBDECLN2",141,0)
 ;;DG SELECT ICD-9 DIAGNOSIS CODES^PRIMARY^SECONDARY
"RTN","IBDECLN2",142,0)
 ;;DPT SC HIDDEN TREATMENT QUESTIONS^YES^NO
"RTN","IBDECLN2",143,0)
 ;;SD SELECT PROVIDER^PRIMARY^SECONDARY
"RTN","IBDF18E0")
0^11^B38912434
"RTN","IBDF18E0",1,0)
IBDF18E0 ;ALB/CJM - ENCOUNTER FORM - PCE DEVICE INTERFACE utilities ;04-OCT-94
"RTN","IBDF18E0",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**11,25,38,36**;APR 24, 1997
"RTN","IBDF18E0",3,0)
 ;
"RTN","IBDF18E0",4,0)
SETPXCA ;set values from TEMP() into the PXCA()
"RTN","IBDF18E0",5,0)
 ;
"RTN","IBDF18E0",6,0)
 N NODE,NUMBER,IBQUIT,Y,Y1,X
"RTN","IBDF18E0",7,0)
 S PROVIDER=+$P(PXCA("ENCOUNTER"),"^",4)
"RTN","IBDF18E0",8,0)
 I PROVIDER,"^P^S^"'[("^"_$P(PXCA("ENCOUNTER"),"^",15)_"^") S $P(PXCA("ENCOUNTER"),"^",15)="S" D LOGERR^IBDF18E2(3579603,.FORMID,"",PROVIDER)
"RTN","IBDF18E0",9,0)
 ;
"RTN","IBDF18E0",10,0)
 S NODE="" F  S NODE=$O(TEMP(NODE)) Q:NODE=""  S NUMBER=0,FID="" F  S FID=$O(TEMP(NODE,FID)) Q:FID=""  S ITEM="" F  S ITEM=$O(TEMP(NODE,FID,ITEM)) Q:ITEM=""  D
"RTN","IBDF18E0",11,0)
 .S IBQUIT=0
"RTN","IBDF18E0",12,0)
 .I NODE="PROCEDURE" S X=TEMP(NODE,FID,ITEM) D
"RTN","IBDF18E0",13,0)
 ..I $P(X,"^",2)="" S $P(X,"^",2)=1
"RTN","IBDF18E0",14,0)
 ..S Y=0 F  S Y=$O(PXCA(NODE,PROVIDER,Y)) Q:'Y!(IBQUIT)  D
"RTN","IBDF18E0",15,0)
 ...S Y1=$G(PXCA(NODE,PROVIDER,Y))
"RTN","IBDF18E0",16,0)
 ...I $P(X,"^")=$P(Y1,"^"),$P(X,"^",3,7)=$P(Y1,"^",3,7) S $P(PXCA(NODE,PROVIDER,Y),"^",2)=$P(PXCA(NODE,PROVIDER,Y),"^",2)+$P(X,"^",2),IBQUIT=1
"RTN","IBDF18E0",17,0)
 ..Q:IBQUIT
"RTN","IBDF18E0",18,0)
 ..S TEMP(NODE,FID,ITEM)=X
"RTN","IBDF18E0",19,0)
 .I IBQUIT K TEMP(NODE,FID,ITEM) Q
"RTN","IBDF18E0",20,0)
 .S NUMBER=NUMBER+1
"RTN","IBDF18E0",21,0)
 .S PXCA(NODE,PROVIDER,NUMBER)=TEMP(NODE,FID,ITEM)
"RTN","IBDF18E0",22,0)
 .I $D(TEMP(NODE,FID,ITEM,"MODIFIER")) D MODPXCA
"RTN","IBDF18E0",23,0)
 .K TEMP(NODE,FID,ITEM)
"RTN","IBDF18E0",24,0)
 ;
"RTN","IBDF18E0",25,0)
 ; -- default c/o date time to now if not passed
"RTN","IBDF18E0",26,0)
 I '$P($G(^IBD(357.09,1,1)),"^",2) D  ;cont only if s/p not answerred
"RTN","IBDF18E0",27,0)
 .I $D(PXCA("ENCOUNTER")) I $P(PXCA("ENCOUNTER"),"^",14)="" D  ;quit if we are already passing c/o date/time
"RTN","IBDF18E0",28,0)
 ..N SDOE S SDOE=$$FNDSDOE^IBDFDE($S(+$G(FORMID("DFN")):+$G(FORMID("DFN")),+$G(IBDF("DFN")):+$G(IBDF("DFN")),1:$G(DFN)),$S(+$G(FORMID("APPT")):+$G(FORMID("APPT")),+$G(IBDF("APPT")):+$G(IBDF("APPT")),1:$G(APPT)))
"RTN","IBDF18E0",29,0)
 ..Q:$$COMDT^SDCOU(+SDOE)  ;c/o already performed, don't overwrite
"RTN","IBDF18E0",30,0)
 ..N IBDDFN,IBDAPPT,IBDCLN,IBDCOST
"RTN","IBDF18E0",31,0)
 ..S IBDDFN=$S(+$G(FORMID("DFN")):+$G(FORMID("DFN")),+$G(IBDF("DFN")):+$G(IBDF("DFN")),1:$G(DFN))
"RTN","IBDF18E0",32,0)
 ..S IBDAPPT=$S(+$G(FORMID("APPT")):+$G(FORMID("APPT")),+$G(IBDF("APPT")):+$G(IBDF("APPT")),1:$G(APPT))
"RTN","IBDF18E0",33,0)
 ..S IBDCLN=$S(+$G(FORMID("CLINIC")):+$G(FORMID("CLINIC")),+$G(IBDF("CLINIC")):+$G(IBDF("CLINIC")),1:$G(CLN))
"RTN","IBDF18E0",34,0)
 ..S IBDCOST=$$STATUS^SDAM1(IBDDFN,IBDAPPT,IBDCLN,$G(^DPT(IBDDFN,0))) Q:$P(IBDCOST,";",5)
"RTN","IBDF18E0",35,0)
 ..S $P(PXCA("ENCOUNTER"),"^",14)=$E($$HTFM^XLFDT($H),1,12)
"RTN","IBDF18E0",36,0)
 ;
"RTN","IBDF18E0",37,0)
 D OTHRBUB
"RTN","IBDF18E0",38,0)
 Q
"RTN","IBDF18E0",39,0)
 ;
"RTN","IBDF18E0",40,0)
 ;
"RTN","IBDF18E0",41,0)
OTHRBUB ; -- check procedure and diagnosis node for other bubble, but no data
"RTN","IBDF18E0",42,0)
 N NODE,CODE
"RTN","IBDF18E0",43,0)
 S I=0 F  S I=$O(PXCA("PROCEDURE",I)) Q:I=""  S J=0 F  S J=$O(PXCA("PROCEDURE",I,J)) Q:J=""  D
"RTN","IBDF18E0",44,0)
 .I +$G(PXCA("PROCEDURE",I,J))<1 D  ;no code, may be treatment
"RTN","IBDF18E0",45,0)
 ..I $P($G(PXCA("PROCEDURE",I,J)),"^",6)["OTHER#" D  ;no code, narr=other
"RTN","IBDF18E0",46,0)
 ...D LOGERR^IBDF18E2(3579612,.FORMID)
"RTN","IBDF18E0",47,0)
 ...K PXCA("PROCEDURE",I,J)
"RTN","IBDF18E0",48,0)
 .I +$G(PXCA("PROCEDURE",I,J)),$P($G(PXCA("PROCEDURE",I,J)),"^",6)["OTHER#" D
"RTN","IBDF18E0",49,0)
 ..;; --change to api cpt ; dhh
"RTN","IBDF18E0",50,0)
 ..S CODE=$$CPT^ICPTCOD(CODE)
"RTN","IBDF18E0",51,0)
 ..S $P(PXCA("PROCEDURE",I,J),"^",6)=$S(+CODE'=-1:$E($P((CODE),"^",3),1,80),1:"")
"RTN","IBDF18E0",52,0)
 ;
"RTN","IBDF18E0",53,0)
 S I=0 F  S I=$O(PXCA("DIAGNOSIS/PROBLEM",I)) Q:I=""  S J=0 F  S J=$O(PXCA("DIAGNOSIS/PROBLEM",I,J)) Q:J=""  D
"RTN","IBDF18E0",54,0)
 .I $P($G(PXCA("DIAGNOSIS/PROBLEM",I,J)),"^",13)="" D
"RTN","IBDF18E0",55,0)
 ..S $P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",13)=$E($G(^ICD9(+PXCA("DIAGNOSIS/PROBLEM",I,J),1)),1,79)
"RTN","IBDF18E0",56,0)
 .I $P($G(PXCA("DIAGNOSIS/PROBLEM",I,J)),"^",13)["OTHER#" D
"RTN","IBDF18E0",57,0)
 ..S $P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",13)=$E($G(^ICD9(+PXCA("DIAGNOSIS/PROBLEM",I,J),1)),1,79)
"RTN","IBDF18E0",58,0)
 Q
"RTN","IBDF18E0",59,0)
 ;
"RTN","IBDF18E0",60,0)
PRO ; -- make sure diagnosis code is added to DIAGNOSIS/PROBLEM node
"RTN","IBDF18E0",61,0)
 S I=0 F  S I=$O(PXCA("DIAGNOSIS/PROBLEM",I)) Q:I=""  S J=0 F  S J=$O(PXCA("DIAGNOSIS/PROBLEM",I,J)) Q:J=""  D
"RTN","IBDF18E0",62,0)
 .I $TR($P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",5,8),"^","")']"",($P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",2)="") S $P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",2)="S" D
"RTN","IBDF18E0",63,0)
 ..D LOGERR^IBDF18E2(3579505,.FORMID,"",+PXCA("DIAGNOSIS/PROBLEM",I,J),"","","",$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",13))
"RTN","IBDF18E0",64,0)
 .Q:+$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^")
"RTN","IBDF18E0",65,0)
 .I +$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",3) D
"RTN","IBDF18E0",66,0)
 ..S IBX=$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",3) D
"RTN","IBDF18E0",67,0)
 ...I $D(^LEX)>1 S X="LEXU" X ^%ZOSF("TEST") I $T S IBX=$$ICDONE^LEXU(IBX) S:$L(IBX)<1 IBX=799.9 Q  ; clinical lexicon next version to be in ^LEX
"RTN","IBDF18E0",68,0)
 ...S X="GMPTU" X ^%ZOSF("TEST") I $T S IBX=$$ICDONE^GMPTU(IBX) S:$L(IBX)<1 IBX=799.9 Q
"RTN","IBDF18E0",69,0)
 ...S IBX=799.9
"RTN","IBDF18E0",70,0)
 ...Q
"RTN","IBDF18E0",71,0)
 ..S IBXI=+$O(^ICD9("BA",IBX_" ",0)) I +IBXI<1 S IBXI=+$O(^ICD9("BA",799.9_" ",0))
"RTN","IBDF18E0",72,0)
 ..I +IBXI<1 D LOGERR^IBDF18E2(3579506,.FORMID,"",$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",3),"","","",$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",13)) Q
"RTN","IBDF18E0",73,0)
 ..S $P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^")=IBXI
"RTN","IBDF18E0",74,0)
 ..Q
"RTN","IBDF18E0",75,0)
 .;
"RTN","IBDF18E0",76,0)
 .; -- set diagnosis code from problem list into piece 1 of array
"RTN","IBDF18E0",77,0)
 .I +$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",4) S $P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^")=$$PROBDIA^IBDFBK3(+$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",4))
"RTN","IBDF18E0",78,0)
 Q
"RTN","IBDF18E0",79,0)
 ;
"RTN","IBDF18E0",80,0)
CODES ; -- if addt'l codes to pass and qual is prim or sec, send 2nd code
"RTN","IBDF18E0",81,0)
 N VALUE,IBI
"RTN","IBDF18E0",82,0)
 Q:$G(QLFR)']""
"RTN","IBDF18E0",83,0)
 Q:"PRIMARYSECONDARY"'[$P($G(^IBD(357.98,QLFR,0)),"^")
"RTN","IBDF18E0",84,0)
 F IBI=3,4 S VALUE=$P($G(^IBD(357.95,FORMTYPE,1,BUB,2)),"^",IBI) Q:'$G(VALUE)  D
"RTN","IBDF18E0",85,0)
 .N QLFR S QLFR=$O(^IBD(357.98,"B","SECONDARY",0)),ITEM=ITEM_"."_IBI
"RTN","IBDF18E0",86,0)
 .D SETTEMP^IBDF18E1
"RTN","IBDF18E0",87,0)
 .S ITEM=$P(ITEM,".")
"RTN","IBDF18E0",88,0)
 Q
"RTN","IBDF18E0",89,0)
 ;
"RTN","IBDF18E0",90,0)
TRACKING(FORMID) ;get form tracking info,sets FORMID array, which should be passed by reference, return 0 if not found
"RTN","IBDF18E0",91,0)
 ;
"RTN","IBDF18E0",92,0)
 S NODE=$G(^IBD(357.96,FORMID,0))
"RTN","IBDF18E0",93,0)
 Q:NODE="" 0
"RTN","IBDF18E0",94,0)
 S FORMID("APPT")=$P(NODE,"^",3),FORMID("CLINIC")=$P(NODE,"^",10),FORMID("DFN")=$P(NODE,"^",2),FORMID("SOURCE")=$P(NODE,"^",7)
"RTN","IBDF18E0",95,0)
 Q 1
"RTN","IBDF18E0",96,0)
 ;
"RTN","IBDF18E0",97,0)
SC ; -- if SC answered yes then all other classifications = null
"RTN","IBDF18E0",98,0)
 I $P(PXCA("ENCOUNTER"),"^",6) S $P(PXCA("ENCOUNTER"),"^",7,9)="^^"
"RTN","IBDF18E0",99,0)
 ;
"RTN","IBDF18E0",100,0)
 ; - If 'no classifications' was bubbled in then all other
"RTN","IBDF18E0",101,0)
 ;   classifications = null
"RTN","IBDF18E0",102,0)
 I $P($G(PXCA("IBD NOCLASSIFICATION")),"^",3) S $P(PXCA("ENCOUNTER"),"^",6,10)="^^^^"
"RTN","IBDF18E0",103,0)
 Q
"RTN","IBDF18E0",104,0)
 ;
"RTN","IBDF18E0",105,0)
INPT(DFN,APPT) ; -- determine inpatient status
"RTN","IBDF18E0",106,0)
 N INPT
"RTN","IBDF18E0",107,0)
 S INPT=$P($G(^DPT(+$G(DFN),"S",+$G(APPT),0)),"^",2)="I"
"RTN","IBDF18E0",108,0)
 Q:'INPT
"RTN","IBDF18E0",109,0)
 ;
"RTN","IBDF18E0",110,0)
 ; -- kill erroneous warnings for inpatients
"RTN","IBDF18E0",111,0)
 I $G(PXCA("WARNING","ENCOUNTER",0,0,6))["SC flag is missing" K PXCA("WARNING","ENCOUNTER",0,0,6)
"RTN","IBDF18E0",112,0)
 I $G(PXCA("WARNING","ENCOUNTER",0,0,7))["AO flag is missing" K PXCA("WARNING","ENCOUNTER",0,0,7)
"RTN","IBDF18E0",113,0)
 I $G(PXCA("WARNING","ENCOUNTER",0,0,8))["IR flag is missing" K PXCA("WARNING","ENCOUNTER",0,0,8)
"RTN","IBDF18E0",114,0)
 I $G(PXCA("WARNING","ENCOUNTER",0,0,9))["EC flag is missing" K PXCA("WARNING","ENCOUNTER",0,0,9)
"RTN","IBDF18E0",115,0)
 Q
"RTN","IBDF18E0",116,0)
MODPXCA ; -- copy CPT Modifier information from TEMP to PXCA
"RTN","IBDF18E0",117,0)
 ;
"RTN","IBDF18E0",118,0)
 N MOD,MODX,MODNODE,CODE
"RTN","IBDF18E0",119,0)
 S CODE=$P($G(TEMP(NODE,FID,ITEM)),"^")
"RTN","IBDF18E0",120,0)
 S MOD=0 F  S MOD=$O(TEMP(NODE,FID,ITEM,"MODIFIER",MOD)) Q:MOD']""  D
"RTN","IBDF18E0",121,0)
 . S MODX=TEMP(NODE,FID,ITEM,"MODIFIER",MOD)
"RTN","IBDF18E0",122,0)
 . S MODNODE=$$MODP^ICPTMOD(CODE,MODX)
"RTN","IBDF18E0",123,0)
 . S:+MODNODE>0 PXCA(NODE,PROVIDER,NUMBER,MODX)=$$MOD^ICPTMOD(+MODNODE,"I")
"RTN","IBDF18E0",124,0)
 Q
"RTN","IBDF18E0",125,0)
VSTPXCA ; -- copy CPT Modifier information from TEMP to PXCA for Visit
"RTN","IBDF18E0",126,0)
 ;
"RTN","IBDF18E0",127,0)
 N I,J,MOD,MODX
"RTN","IBDF18E0",128,0)
 S I=0 F  S I=$O(TEMP("ENCOUNTER",I)) Q:I']""  D
"RTN","IBDF18E0",129,0)
 . S J=0 F  S J=$O(TEMP("ENCOUNTER",I,J)) Q:'J  D
"RTN","IBDF18E0",130,0)
 .. S MOD=0 F  S MOD=$O(TEMP("ENCOUNTER",I,J,"MODIFIER",MOD)) Q:MOD']""  D
"RTN","IBDF18E0",131,0)
 ... S MODX=TEMP("ENCOUNTER",I,J,"MODIFIER",MOD)
"RTN","IBDF18E0",132,0)
 ... S PXCA("ENCOUNTER","MODIFIER",MODX)=""
"RTN","IBDF18E0",133,0)
 K TEMP("ENCOUNTER")
"RTN","IBDF18E0",134,0)
 Q
"RTN","IBDF18E1")
0^12^B48104521
"RTN","IBDF18E1",1,0)
IBDF18E1 ;ALB/CJM - ENCOUNTER FORM - PCE DEVICE INTERFACE utilities ;04-OCT-94
"RTN","IBDF18E1",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**1,3,38,36**;APR 24, 1997
"RTN","IBDF18E1",3,0)
 ;
"RTN","IBDF18E1",4,0)
GETPI(PI,QLFR,TYPE) ; -- returns information about the package interface 
"RTN","IBDF18E1",5,0)
 ;                    needed to map data to PCE DEVICE INTERFACE
"RTN","IBDF18E1",6,0)
 ;
"RTN","IBDF18E1",7,0)
 ; -- input - PI := pointer to the package interface file
"RTN","IBDF18E1",8,0)
 ;                  MUST be passed by reference
"RTN","IBDF18E1",9,0)
 ;          QLFR := pointer to the data qualifier
"RTN","IBDF18E1",10,0)
 ;          TYPE := pointer to file 359.1, applies to hand print fields
"RTN","IBDF18E1",11,0)
 ;
"RTN","IBDF18E1",12,0)
 ; -- output  PI :="" if the mapping can not be determined
"RTN","IBDF18E1",13,0)
 ;            PI(PI,"NODE")
"RTN","IBDF18E1",14,0)
 ;            PI(PI,"VAL")
"RTN","IBDF18E1",15,0)
 ;            PI(PI,"TXT")
"RTN","IBDF18E1",16,0)
 ;            PI(PI,"HDR")
"RTN","IBDF18E1",17,0)
 ;            PI(PI,"QLFR")
"RTN","IBDF18E1",18,0)
 ;            PI(PI,"QTY")
"RTN","IBDF18E1",19,0)
 ;      - if QLFR is passed, also returns PI(PI,QLFR,"IND")
"RTN","IBDF18E1",20,0)
 ;      - if PI(PI,QLFR,"IND")=1,meaning there is independent mapping
"RTN","IBDF18E1",21,0)
 ;        info for this qualifier - then also returns PI(PI,QLFR,"NODE")=
"RTN","IBDF18E1",22,0)
 ;        <the node>,PI(PI,QLFR,"VAL")=<piece for the value>,
"RTN","IBDF18E1",23,0)
 ;        PI(PI,QLFR,"TXT")=<the piece for txt>,PI(PI,QLFR,"HDR")=
"RTN","IBDF18E1",24,0)
 ;        <piece for the hdr>,
"RTN","IBDF18E1",25,0)
 ;        PI(PI,QLFR,"QLFR")=<piece for the qualifier code>
"RTN","IBDF18E1",26,0)
 ;      - if TYPE is passed , also returns PI(PI,"TYPE",TYPE,"UNIT")=
"RTN","IBDF18E1",27,0)
 ;        <unit code> and PI(PI,"TYPE",TYPE,"VTYPE")=
"RTN","IBDF18E1",28,0)
 ;        <vitals type code>
"RTN","IBDF18E1",29,0)
 ;
"RTN","IBDF18E1",30,0)
 ;NOTE - it is assumed that entries in the PI() may be left hanging around,and if so they are valid
"RTN","IBDF18E1",31,0)
 ;
"RTN","IBDF18E1",32,0)
 N NODE,QNODE,PIECE,IEN
"RTN","IBDF18E1",33,0)
 I '$G(PI) S PI="" G GETPIQ
"RTN","IBDF18E1",34,0)
 ;
"RTN","IBDF18E1",35,0)
 ; -- type of package interface must be for input
"RTN","IBDF18E1",36,0)
 I $P($G(^IBE(357.6,PI,0)),"^",6)'=1 S PI="" G GETPIQ
"RTN","IBDF18E1",37,0)
 ;
"RTN","IBDF18E1",38,0)
 I '$D(PI(PI)) D  Q:'PI ""
"RTN","IBDF18E1",39,0)
 .S NODE=$G(^IBE(357.6,PI,12))
"RTN","IBDF18E1",40,0)
 .S PI(PI,"NODE")=$P(NODE,"^")
"RTN","IBDF18E1",41,0)
 .S PI(PI,"VAL")=$P(NODE,"^",2)
"RTN","IBDF18E1",42,0)
 .S PI(PI,"TXT")=$P(NODE,"^",3)
"RTN","IBDF18E1",43,0)
 .S PI(PI,"HDR")=$P(NODE,"^",4)
"RTN","IBDF18E1",44,0)
 .S PI(PI,"QLFR")=$P(NODE,"^",5)
"RTN","IBDF18E1",45,0)
 .S PI(PI,"QTY")=$P(NODE,"^",6)
"RTN","IBDF18E1",46,0)
 ;
"RTN","IBDF18E1",47,0)
 ; - if there is a 'PCE DIM PIECE, VARIABLE VALUE' node, execute code to
"RTN","IBDF18E1",48,0)
 ; - determine value for PCE DIM PIECE, VALUE (since it is variable, it
"RTN","IBDF18E1",49,0)
 ; - must be asked outside of the above dotted do
"RTN","IBDF18E1",50,0)
 S X="",Y=VALUE X $G(^IBE(357.6,PI,21)) I X S PI(PI,"VAL")=X
"RTN","IBDF18E1",51,0)
 ;
"RTN","IBDF18E1",52,0)
 ;special rules apply for the VITALS node
"RTN","IBDF18E1",53,0)
 I PI(PI,"NODE")="VITALS" D  Q:'PI ""
"RTN","IBDF18E1",54,0)
 .S PI(PI,"VAL")=2 ;the value for the VITALS node goes to piece 2
"RTN","IBDF18E1",55,0)
 .;
"RTN","IBDF18E1",56,0)
 .I 'TYPE D LOGERR^IBDF18E2(35791001,.FORMID,TYPE,$G(VALUE),PI) S PI(PI,"TYPE",+$G(TYPE),"VTYPE")="",PI(PI,"TYPE",+$G(TYPE),"UNIT")="" Q
"RTN","IBDF18E1",57,0)
 .;
"RTN","IBDF18E1",58,0)
 .;may have already gotten
"RTN","IBDF18E1",59,0)
 .I $D(PI(PI,"TYPE",TYPE)) Q
"RTN","IBDF18E1",60,0)
 .;
"RTN","IBDF18E1",61,0)
 .S IEN=$O(^IBE(357.6,PI,13,"B",TYPE_";IBE(359.1,",""))
"RTN","IBDF18E1",62,0)
 .I 'IEN D LOGERR^IBDF18E2(3576001,.FORMID,TYPE,$G(VALUE),PI) S PI(PI,"TYPE",TYPE,"VTYPE")="",PI(PI,"TYPE",TYPE,"UNIT")="" Q
"RTN","IBDF18E1",63,0)
 .S NODE=$G(^IBE(359.1,TYPE,0))
"RTN","IBDF18E1",64,0)
 .S PI(PI,"TYPE",TYPE,"UNIT")=$P(NODE,"^",13)
"RTN","IBDF18E1",65,0)
 .S PI(PI,"TYPE",TYPE,"VTYPE")=$P(NODE,"^",12)
"RTN","IBDF18E1",66,0)
 .S PI(PI,"TYPE",TYPE,"DATATYPE")=$P($G(^IBE(359.1,TYPE,10)),"^",1)
"RTN","IBDF18E1",67,0)
 ;
"RTN","IBDF18E1",68,0)
 ;if not VITALS, and there is a QLFR, get independent mapping info if not gotten previously
"RTN","IBDF18E1",69,0)
 I PI(PI,"NODE")'="VITALS",QLFR I '$D(PI(PI,QLFR,"IND")) D  Q:'PI ""
"RTN","IBDF18E1",70,0)
 .S PI(PI,QLFR,"CODE")=$P($G(^IBD(357.98,QLFR,0)),"^",2)
"RTN","IBDF18E1",71,0)
 .S IEN=$O(^IBE(357.6,PI,13,"B",QLFR_";IBD(357.98,",""))
"RTN","IBDF18E1",72,0)
 .I 'IEN D LOGERR^IBDF18E2(3576002,.FORMID,$G(TYPE),$G(VALUE),PI,$G(QLFR)) S PI(PI,QLFR,"IND")=0 Q
"RTN","IBDF18E1",73,0)
 .S NODE=$G(^IBE(357.6,PI,13,IEN,0))
"RTN","IBDF18E1",74,0)
 .S PI(PI,QLFR,"IND")=$P(NODE,"^",3)
"RTN","IBDF18E1",75,0)
 .Q:'PI(PI,QLFR,"IND")
"RTN","IBDF18E1",76,0)
 .S QNODE=$P(NODE,"^",4) S:QNODE="" QNODE=PI(PI,"NODE") S PI(PI,QLFR,"NODE")=QNODE
"RTN","IBDF18E1",77,0)
 .S PIECE=$P(NODE,"^",8) S:('PIECE)&(PI(PI,"NODE")=PI(PI,QLFR,"NODE")) PIECE=PI(PI,"QLFR") S PI(PI,QLFR,"QLFR")=PIECE
"RTN","IBDF18E1",78,0)
 .;
"RTN","IBDF18E1",79,0)
 .;if the node isn't different for the qualifier then the value,text,and header can not be mapped independently
"RTN","IBDF18E1",80,0)
 .I PI(PI,"NODE")=PI(PI,QLFR,"NODE") D
"RTN","IBDF18E1",81,0)
 ..S PI(PI,QLFR,"VAL")=PI(PI,"VAL"),PI(PI,QLFR,"TXT")=PI(PI,"TXT"),PI(PI,QLFR,"HDR")=PI(PI,"HDR")
"RTN","IBDF18E1",82,0)
 .E  S PI(PI,QLFR,"VAL")=$P(NODE,"^",5),PI(PI,QLFR,"TXT")=$P(NODE,"^",6),PI(PI,QLFR,"HDR")=$P(NODE,"^",7)
"RTN","IBDF18E1",83,0)
 .;must at least know the piece to place the returned value
"RTN","IBDF18E1",84,0)
 .I (PI(PI,QLFR,"NODE")="")!('PI(PI,QLFR,"VAL")) S PI=""
"RTN","IBDF18E1",85,0)
 ;
"RTN","IBDF18E1",86,0)
 ;must at least know the node and the piece to place the returned value
"RTN","IBDF18E1",87,0)
 I 'QLFR I (PI(PI,"NODE")="")!('PI(PI,"VAL")) S PI=""
"RTN","IBDF18E1",88,0)
GETPIQ Q PI
"RTN","IBDF18E1",89,0)
 ;
"RTN","IBDF18E1",90,0)
SETTEMP ; -- sets values for the field into TEMP()
"RTN","IBDF18E1",91,0)
 ;    values are merged for fields that consist of a collection
"RTN","IBDF18E1",92,0)
 ;
"RTN","IBDF18E1",93,0)
 ; -- Output   QCODE := <qualifier code>
"RTN","IBDF18E1",94,0)
 ;              PHDR := <header piece>
"RTN","IBDF18E1",95,0)
 ;              PVAL := <value piece>
"RTN","IBDF18E1",96,0)
 ;              PTXT := <text piece>
"RTN","IBDF18E1",97,0)
 ;             PQLFR := <qualifier piece>
"RTN","IBDF18E1",98,0)
 ;               SUB := <PCE GDI node>
"RTN","IBDF18E1",99,0)
 ;              NODE := <the value of the node>
"RTN","IBDF18E1",100,0)
 ;              PLEX := <clinical lexicon piece, for use with diag.>
"RTN","IBDF18E1",101,0)
 ;
"RTN","IBDF18E1",102,0)
 N QCODE,PHDR,PVAL,PTXT,PQLFR,SUB,NODE,PLEX,PQTY,SAVEPI
"RTN","IBDF18E1",103,0)
 S SAVEPI=PI
"RTN","IBDF18E1",104,0)
 Q:'PI
"RTN","IBDF18E1",105,0)
 S PI=$$GETPI(.PI,QLFR,TYPE) I 'PI D LOGERR^IBDF18E2(3576003,.FORMID,$G(TYPE),$G(VALUE),SAVEPI,$G(QLFR)) Q
"RTN","IBDF18E1",106,0)
 ;
"RTN","IBDF18E1",107,0)
 S QCODE=$S(QLFR:PI(PI,QLFR,"CODE"),1:"")
"RTN","IBDF18E1",108,0)
 ;
"RTN","IBDF18E1",109,0)
 ;determine if QCODE should be passed as VALUE
"RTN","IBDF18E1",110,0)
 I $P($G(^IBE(357.6,PI,20)),"^") N VALUE S VALUE=QCODE
"RTN","IBDF18E1",111,0)
 ;
"RTN","IBDF18E1",112,0)
 S PQTY=PI(PI,"QTY")
"RTN","IBDF18E1",113,0)
 ;mapping info could come from several different sources depending on whether or not a data qualifier is involved or the node=VITALS or ENCOUNTER
"RTN","IBDF18E1",114,0)
 I QLFR,PI(PI,"NODE")'="VITALS",PI(PI,"NODE")'="ENCOUNTER" I PI(PI,QLFR,"IND") D
"RTN","IBDF18E1",115,0)
 .S PHDR=PI(PI,QLFR,"HDR"),PVAL=PI(PI,QLFR,"VAL"),PTXT=PI(PI,QLFR,"TXT"),PQLFR=PI(PI,QLFR,"QLFR"),SUB=PI(PI,QLFR,"NODE")
"RTN","IBDF18E1",116,0)
 E  D
"RTN","IBDF18E1",117,0)
 .S PHDR=PI(PI,"HDR"),PVAL=PI(PI,"VAL"),PTXT=PI(PI,"TXT"),PQLFR=PI(PI,"QLFR"),SUB=PI(PI,"NODE")
"RTN","IBDF18E1",118,0)
 ;
"RTN","IBDF18E1",119,0)
 ;the ENCOUNTER node is treated differently, because there is always just one of them
"RTN","IBDF18E1",120,0)
 S:SUB'="ENCOUNTER" NODE=$G(TEMP(SUB,$P(FID,"("),+ITEM))
"RTN","IBDF18E1",121,0)
 S:SUB="ENCOUNTER" NODE=$G(PXCA("ENCOUNTER"))
"RTN","IBDF18E1",122,0)
 ;
"RTN","IBDF18E1",123,0)
 ; -- define clin lex pointer if from data enty  ($d(ibdf(item)))
"RTN","IBDF18E1",124,0)
 ;    if from scanning clin lex pointer defined in ibdf18e
"RTN","IBDF18E1",125,0)
 S PLEX=0 I SUB="DIAGNOSIS/PROBLEM" D
"RTN","IBDF18E1",126,0)
 .S PLEX=3
"RTN","IBDF18E1",127,0)
 .I $G(ITEM)'="" I $D(IBDF(ITEM)) S LEX=$P(IBDF(ITEM),"^",5)
"RTN","IBDF18E1",128,0)
 ;
"RTN","IBDF18E1",129,0)
 ;the VITALS node is also treated differently
"RTN","IBDF18E1",130,0)
 I SUB="VITALS" D
"RTN","IBDF18E1",131,0)
 .I $G(PI(PI,"TYPE",TYPE,"DATATYPE"))="f" S VALUE=+VALUE ; set floating point values to M values
"RTN","IBDF18E1",132,0)
 .S $P(NODE,"^")=PI(PI,"TYPE",TYPE,"VTYPE"),$P(NODE,"^",3)=PI(PI,"TYPE",TYPE,"UNIT"),$P(NODE,"^",2)=VALUE,$P(NODE,"^",4)=+$G(PXCA("ENCOUNTER"))
"RTN","IBDF18E1",133,0)
 ;these are nodes other than VITALS and ENCOUNTER
"RTN","IBDF18E1",134,0)
 E  D
"RTN","IBDF18E1",135,0)
 .;merge the data into the node
"RTN","IBDF18E1",136,0)
 .;
"RTN","IBDF18E1",137,0)
 .; -- for second provider entry put in provider node, always put
"RTN","IBDF18E1",138,0)
 .;    primary in encounter node
"RTN","IBDF18E1",139,0)
 .I SUB="ENCOUNTER",PVAL=4,$P(NODE,"^",4) D  Q
"RTN","IBDF18E1",140,0)
 ..I QCODE="P",$P(NODE,"^",15)'="P" S PXCA("PROVIDER",$P(NODE,"^",4))=$P(NODE,"^",15),$P(NODE,"^",4)=VALUE,$P(NODE,"^",15)=QCODE Q
"RTN","IBDF18E1",141,0)
 ..S PXCA("PROVIDER",VALUE)=QCODE Q
"RTN","IBDF18E1",142,0)
 .;
"RTN","IBDF18E1",143,0)
 .S NARR=+$G(NARR) ; define Narr for manual data entry
"RTN","IBDF18E1",144,0)
 .;
"RTN","IBDF18E1",145,0)
 .;  -- change to add modifiers to visit code selected
"RTN","IBDF18E1",146,0)
 .;
"RTN","IBDF18E1",147,0)
 .I $P(NODE,"^",PVAL)="" D
"RTN","IBDF18E1",148,0)
 .. S:$S(NARR=0:1,1:$P(FID,"(",2)'="N") $P(NODE,"^",PVAL)=VALUE
"RTN","IBDF18E1",149,0)
 .. ;D MODTEMP
"RTN","IBDF18E1",150,0)
 .I PTXT S:$P(FID,"(",2)="N"&NARR TEXT=VALUE I $S(NARR=0:$L($P(NODE,"^",PTXT))<$L(TEXT),$P(FID,"(",2)="N":TEXT'="",1:0) S $P(NODE,"^",PTXT)=TEXT
"RTN","IBDF18E1",151,0)
 .I PHDR I $L($P(NODE,"^",PHDR))<$L(HEADER) S $P(NODE,"^",PHDR)=HEADER
"RTN","IBDF18E1",152,0)
 .I PQTY S $P(NODE,"^",PQTY)=$G(QUANTITY)
"RTN","IBDF18E1",153,0)
 .;
"RTN","IBDF18E1",154,0)
 .; -- insert clin lex pointer into temp arry and re-initialize
"RTN","IBDF18E1",155,0)
 .I $G(PLEX),$G(LEX) S $P(NODE,"^",PLEX)=LEX
"RTN","IBDF18E1",156,0)
 .S LEX=0
"RTN","IBDF18E1",157,0)
 .;
"RTN","IBDF18E1",158,0)
 .I QCODE'="" S $P(NODE,"^",PQLFR)=$S($P(NODE,"^",PQLFR)'="":$P(NODE,"^",PQLFR)_","_QCODE,1:QCODE)
"RTN","IBDF18E1",159,0)
 ;
"RTN","IBDF18E1",160,0)
 ;- Prevent 'No classification' node from being set in TEMP array
"RTN","IBDF18E1",161,0)
 ;- (not dynamic)
"RTN","IBDF18E1",162,0)
 S:SUB'="ENCOUNTER"&(SUB'="IBD NOCLASSIFICATION") TEMP(SUB,$P(FID,"("),+ITEM)=NODE
"RTN","IBDF18E1",163,0)
 D:SUB="PROCEDURE" MODTEMP
"RTN","IBDF18E1",164,0)
 ;
"RTN","IBDF18E1",165,0)
 ;- Set Encounter and 'No classification' nodes into PXCA array
"RTN","IBDF18E1",166,0)
 S:SUB="ENCOUNTER"!(SUB="IBD NOCLASSIFICATION") PXCA(SUB)=NODE
"RTN","IBDF18E1",167,0)
 D:SUB="ENCOUNTER" MODTEMP
"RTN","IBDF18E1",168,0)
 Q
"RTN","IBDF18E1",169,0)
MODTEMP ;-- Set up TEMP(SUB,$P(FID,"("),+ITEM, "MODIFIER array
"RTN","IBDF18E1",170,0)
 ;   the CPT Modifier information is stored in the selection file(357.3)
"RTN","IBDF18E1",171,0)
 ;
"RTN","IBDF18E1",172,0)
 ;
"RTN","IBDF18E1",173,0)
 N MCOUNT,MOD
"RTN","IBDF18E1",174,0)
 I $D(^IBE(357.3,+$G(SLCTN),3)) D
"RTN","IBDF18E1",175,0)
 . S MCOUNT=0
"RTN","IBDF18E1",176,0)
 . F MOD=0:0 S MOD=$O(^IBE(357.3,SLCTN,3,MOD)) Q:'MOD  D
"RTN","IBDF18E1",177,0)
 .. S MCOUNT=MCOUNT+1
"RTN","IBDF18E1",178,0)
 ..S TEMP(SUB,$P(FID,"("),+ITEM,"MODIFIER",MCOUNT)=$P($G(^IBE(357.3,SLCTN,3,MOD,0)),"^")
"RTN","IBDF18E1",179,0)
 .S:MCOUNT>0 TEMP(SUB,$P(FID,"("),+ITEM,"MODIFIER",0)=MCOUNT
"RTN","IBDF18E1",180,0)
 I $D(IBDF(+ITEM,"MODIFIER")) D
"RTN","IBDF18E1",181,0)
 . S MCOUNT=+$G(TEMP(SUB,$P(FID,"("),+ITEM,"MODIFIER",0))
"RTN","IBDF18E1",182,0)
 . S MOD=0 F  S MOD=$O(IBDF(+ITEM,"MODIFIER",MOD)) Q:'MOD  D
"RTN","IBDF18E1",183,0)
 .. S MCOUNT=MCOUNT+1
"RTN","IBDF18E1",184,0)
 .. S TEMP(SUB,$P(FID,"("),+ITEM,"MODIFIER",MCOUNT)=IBDF(+ITEM,"MODIFIER",MOD)
"RTN","IBDF18E1",185,0)
 . S TEMP(SUB,$P(FID,"("),+ITEM,"MODIFIER",0)=MCOUNT
"RTN","IBDF18E1",186,0)
 Q
"RTN","IBDFBK3")
0^3^B40561152
"RTN","IBDFBK3",1,0)
IBDFBK3 ;ALB/AAS - AICS broker Utilities ;23-May-95
"RTN","IBDFBK3",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**12,38,36**;APR 24, 1997
"RTN","IBDFBK3",3,0)
 ;
"RTN","IBDFBK3",4,0)
LSTDATA(RESULT,PXCA,LCNT) ;
"RTN","IBDFBK3",5,0)
 ; -- expand the PXCA array data into human readable terms for
"RTN","IBDFBK3",6,0)
 ;    display on the workstation
"RTN","IBDFBK3",7,0)
 ;
"RTN","IBDFBK3",8,0)
 ;    Input : Result - (called by reference, see output)
"RTN","IBDFBK3",9,0)
 ;            PXCA   - (by referencethe array of data formated to
"RTN","IBDFBK3",10,0)
 ;                      the PCE device interface specification
"RTN","IBDFBK3",11,0)
 ;            lcnt   - (by reference) a counter for the result array
"RTN","IBDFBK3",12,0)
 ;    Output: RESULT - a new array element result(lcnt) will be
"RTN","IBDFBK3",13,0)
 ;                     created for each piece of data received
"RTN","IBDFBK3",14,0)
 ;
"RTN","IBDFBK3",15,0)
 N I,J,M,X,IBX
"RTN","IBDFBK3",16,0)
 ;
"RTN","IBDFBK3",17,0)
 ; -- noshow, cancel or reschedule checked
"RTN","IBDFBK3",18,0)
 I $D(PXCA("IBD-ABORT")) D
"RTN","IBDFBK3",19,0)
 .S I="" F  S I=$O(PXCA("IBD-ABORT",I)) Q:I=""  S J="" F  S J=$O(PXCA("IBD-ABORT",I,J)) Q:J=""  D
"RTN","IBDFBK3",20,0)
 ..S IBX=PXCA("IBD-ABORT",I,J)
"RTN","IBDFBK3",21,0)
 ..S X="The following Data was NOT Sent to PCE because "_$P(IBX,"^",2)_" was marked!"
"RTN","IBDFBK3",22,0)
 ..D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",23,0)
 .Q
"RTN","IBDFBK3",24,0)
 ;
"RTN","IBDFBK3",25,0)
 ; -- expand the encounter node
"RTN","IBDFBK3",26,0)
 I $D(PXCA("ENCOUNTER")) S IBX=PXCA("ENCOUNTER") D
"RTN","IBDFBK3",27,0)
 .I $P(IBX,"^",14) S X="Checkout Date/Time: "_$$FMTE^XLFDT($P(IBX,"^",14)) D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",28,0)
 .I $P(IBX,"^",4) S X=$S($P(IBX,"^",15)="P":"Primary ",$P(IBX,"^",15)="S":"Secondary ",1:"")_"Provider: "_$P($G(^VA(200,+$P(IBX,"^",4),0)),"^") D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",29,0)
 .;; --change to api cpt ; dhh
"RTN","IBDFBK3",30,0)
 .I $P(IBX,"^",5) S X=$P(IBX,"^",5) D
"RTN","IBDFBK3",31,0)
 .. I X'="" D
"RTN","IBDFBK3",32,0)
 ... N IBVST
"RTN","IBDFBK3",33,0)
 ... S X=$$CPT^ICPTCOD(X)
"RTN","IBDFBK3",34,0)
 ... S (X,IBVST)=$S(+X=-1:"",1:$P(X,"^",2))
"RTN","IBDFBK3",35,0)
 ... S X="Visit Type CPT: "_X D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",36,0)
 ... I $D(PXCA("ENCOUNTER","MODIFIER")) D
"RTN","IBDFBK3",37,0)
 .... S X="    Modifier(s): " D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",38,0)
 .... N IBM S IBM=0
"RTN","IBDFBK3",39,0)
 .... F  S IBM=$O(PXCA("ENCOUNTER","MODIFIER",IBM)) Q:IBM']""  D
"RTN","IBDFBK3",40,0)
 ..... N IBMDESC S IBMDESC=$$MODP^ICPTMOD(IBVST,IBM,"E") Q:+IBMDESC<0
"RTN","IBDFBK3",41,0)
 ..... S X="         "_IBM_"-"_$P(IBMDESC,"^",2)
"RTN","IBDFBK3",42,0)
 ..... D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",43,0)
 .; add sc,ao,ir,ec,mst,eligibility,credit stop (pieces 6-10,13,17)
"RTN","IBDFBK3",44,0)
 .I $P(IBX,"^",6) D NEWLINE(.RESULT,"Visit for SC Condition",.LCNT)
"RTN","IBDFBK3",45,0)
 .I $P(IBX,"^",7) D NEWLINE(.RESULT,"Visit for Agent Orange Condition",.LCNT)
"RTN","IBDFBK3",46,0)
 .I $P(IBX,"^",8) D NEWLINE(.RESULT,"Visit for Ionizing Radiation Condition",.LCNT)
"RTN","IBDFBK3",47,0)
 .I $P(IBX,"^",9) D NEWLINE(.RESULT,"Visit for Environmental Contaminates Condition",.LCNT)
"RTN","IBDFBK3",48,0)
 .I $P(IBX,"^",10) D NEWLINE(.RESULT,"Visit for MST",.LCNT)
"RTN","IBDFBK3",49,0)
 .I $P(IBX,"^",13) D NEWLINE(.RESULT,"Eligibility for Visit: "_$P($G(^DIC(8,+$P(IBX,"^",13),0)),"^"),.LCNT)
"RTN","IBDFBK3",50,0)
 .I $P(IBX,"^",17) D NEWLINE(.RESULT,"Additional Credit Stop: "_$P($G(^DIC(40.7,+$P(IBX,"^",17),0)),"^"),.LCNT)
"RTN","IBDFBK3",51,0)
 ;
"RTN","IBDFBK3",52,0)
 ; -- expand the other nodes
"RTN","IBDFBK3",53,0)
 F M="DIAGNOSIS/PROBLEM","PROVIDER","DIAGNOSIS","PROCEDURE","VITALS","PROBLEM","EXAM","IMMUNIZATION","HEALTH FACTORS","SKIN TEST","PATIENT ED","LOCAL" I $D(PXCA(M)) D
"RTN","IBDFBK3",54,0)
 .S I="" F  S I=$O(PXCA(M,I)) Q:I=""  D:M="PROVIDER" PROV S J="" F  S J=$O(PXCA(M,I,J)) Q:J=""  D
"RTN","IBDFBK3",55,0)
 ..K X S IBX=PXCA(M,I,J) D  D:$D(X) NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",56,0)
 ...;
"RTN","IBDFBK3",57,0)
 ...I M="DIAGNOSIS" S X=$S($P(IBX,"^",2)="P":"Primary",$P(IBX,"^",2)="S":"Secondary",1:"")_" Diagnosis: "_$P($G(^ICD9(+$P($G(IBX),"^"),0)),"^")_" - "_$P(IBX,"^",9)_" - "_$P(IBX,"^",8) Q
"RTN","IBDFBK3",58,0)
 ...;
"RTN","IBDFBK3",59,0)
 ...I M="PROCEDURE" D
"RTN","IBDFBK3",60,0)
 ....I +IBX D
"RTN","IBDFBK3",61,0)
 ..... S X=$$CPT^ICPTCOD(+IBX)
"RTN","IBDFBK3",62,0)
 ..... S X=$S(X=-1:"",1:$P(X,"^",2))
"RTN","IBDFBK3",63,0)
 ..... S X="Procedure: "_X_" - "_$P(IBX,"^",7)_" - "_$P(IBX,"^",6)_" - "_$S($P(IBX,"^",2)="P":"Primary ",$P(IBX,"^",2)="S":"Secondary ",1:"Quantity: "_+$P(IBX,"^",2))
"RTN","IBDFBK3",64,0)
 ..... Q
"RTN","IBDFBK3",65,0)
 ....I 'IBX S X="Treatment: "_$P(IBX,"^",6)
"RTN","IBDFBK3",66,0)
 ...;
"RTN","IBDFBK3",67,0)
 ...I M="VITALS" S X="Vital Sign: "_$$VTYPE($P(IBX,"^"))_": "_$P(IBX,"^",2) Q
"RTN","IBDFBK3",68,0)
 ...;
"RTN","IBDFBK3",69,0)
 ...I M="IMMUNIZATION" S X="Immunization: "_$$DSPLYIM^PXAPIIB(+IBX) I $P(IBX,"^",5) S X=X_" - Contraindicated" Q
"RTN","IBDFBK3",70,0)
 ...;
"RTN","IBDFBK3",71,0)
 ...I M="EXAM" S X="Exam: "_$$DSPLYEX^PXAPIIB(+IBX)_$S($P(IBX,"^",2)="A":" Abnormal",$P(IBX,"^",2)="N":" Normal",1:"") Q
"RTN","IBDFBK3",72,0)
 ...;
"RTN","IBDFBK3",73,0)
 ...I M="PROBLEM" S X="Problem List: "_$P(IBX,"^") Q
"RTN","IBDFBK3",74,0)
 ...;
"RTN","IBDFBK3",75,0)
 ...I M="HEALTH FACTORS" S X="Health Factor: "_$$DSPLYHF^PXAPIIB(+IBX) N Y S Y=$P(IBX,"^",2) I Y'="" S X=X_" Level/Severity: "_$S(Y="M":"Minimal",Y="MO":"Moderate",Y="H":"Heavy/Severe",1:"") Q
"RTN","IBDFBK3",76,0)
 ...;
"RTN","IBDFBK3",77,0)
 ...I M="SKIN TEST" S X="Skin Tests: "_$$DSPLYSK^PXAPIIB(+IBX) Q
"RTN","IBDFBK3",78,0)
 ...;
"RTN","IBDFBK3",79,0)
 ...I M="PATIENT ED" S X="Patient Eduction: "_$$DSPLYED^PXAPIIB(+IBX) I $P(IBX,"^",2) S X=X_" , Level of Understanding: "_$S(IBX=1:"Poor",IBX=2:"Fair",IBX=3:"Good",IBX=4:"N/A",IBX=5:"Refused",1:"") Q
"RTN","IBDFBK3",80,0)
 ...;
"RTN","IBDFBK3",81,0)
 ...I M="DIAGNOSIS/PROBLEM" D  S:X="" X="Diagnosis/Problem: unspecified"
"RTN","IBDFBK3",82,0)
 ....N Y S X=""
"RTN","IBDFBK3",83,0)
 ....S Y=$P(IBX,"^",2) S X=$S(Y="P":"Primary ",Y="S":"Secondary ",1:"")_"Diagnosis/Problem"
"RTN","IBDFBK3",84,0)
 ....;I $P(IBX,"^",4) S X=X_$S($P(IBX,"^",6)="I":", Inactive",1:", Active")
"RTN","IBDFBK3",85,0)
 ....I $P(IBX,"^",13)'="" S X=X_" '"_$P(IBX,"^",14)_$S($P(IBX,"^",14)'="":" ",1:"")_$P(IBX,"^",13)_"'"
"RTN","IBDFBK3",86,0)
 ....;I +$P(IBX,"^",3) S X=X_", Clinical Lexicon term: "_$P($G(^GMP(757.01,+$P(IBX,"^",3),0)),"^") ;clinical lexicon term passed
"RTN","IBDFBK3",87,0)
 ....I +$P(IBX,"^",3) S X=X_", Clinical Lexicon term: " D
"RTN","IBDFBK3",88,0)
 .....I $D(^LEX) S X=X_$P($G(^LEX(757.01,+$P(IBX,"^",3),0)),"^") Q
"RTN","IBDFBK3",89,0)
 .....S X=X_$P($G(^GMP(757.01,+$P(IBX,"^",3),0)),"^")
"RTN","IBDFBK3",90,0)
 ....I $P(IBX,"^",5) S X=X_", Added to Problem List "
"RTN","IBDFBK3",91,0)
 ....I +$P(IBX,"^",4) S X=X_", Patient Active Problem: "_$$PROBNAR($P(IBX,"^",4)) ;problem entry passed
"RTN","IBDFBK3",92,0)
 ....I +IBX S IBY=$P($G(^ICD9(+IBX,0)),"^") I IBX'[IBY S X=X_", ICD9: "_IBY
"RTN","IBDFBK3",93,0)
 ....I $P(IBX,"^",9) S X=X_" SC Condition "
"RTN","IBDFBK3",94,0)
 ....I $P(IBX,"^",10) S X=X_" AO Condition "
"RTN","IBDFBK3",95,0)
 ....I $P(IBX,"^",11) S X=X_" IR Condition "
"RTN","IBDFBK3",96,0)
 ....I $P(IBX,"^",12) S X=X_" EC Condition "
"RTN","IBDFBK3",97,0)
 ...I M="LOCAL" S X="Local Data Received: "_IBX Q
"RTN","IBDFBK3",98,0)
 ..I M="PROCEDURE",$D(PXCA(M,I,J)) D MODLIST
"RTN","IBDFBK3",99,0)
LSTQ Q
"RTN","IBDFBK3",100,0)
 ;
"RTN","IBDFBK3",101,0)
MODLIST ; -- expand the modifiers filed
"RTN","IBDFBK3",102,0)
 N IBM,X S IBM=0
"RTN","IBDFBK3",103,0)
 S X="    Modifier(s): " D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",104,0)
 F  S IBM=$O(PXCA(M,I,J,IBM)) Q:IBM']""  D
"RTN","IBDFBK3",105,0)
 . S X="         "_IBM_"-"_$P(PXCA(M,I,J,IBM),"^",3)
"RTN","IBDFBK3",106,0)
 . D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",107,0)
 Q
"RTN","IBDFBK3",108,0)
PROV ; -- expand the additional provider node
"RTN","IBDFBK3",109,0)
 S IBX=$G(PXCA(M,I))
"RTN","IBDFBK3",110,0)
 S X=$S($E(IBX,1)="P":"Primary ",$E(IBX,1)="S":"Secondary ",1:"")_"Provider: "_$P($G(^VA(200,I,0)),"^")_$S($P(IBX,"^",2)=1:" Attending",1:"")
"RTN","IBDFBK3",111,0)
 D NEWLINE(.RESULT,X,.LCNT)
"RTN","IBDFBK3",112,0)
 Q
"RTN","IBDFBK3",113,0)
 ;
"RTN","IBDFBK3",114,0)
NEWLINE(RESULT,X,LCNT) ;
"RTN","IBDFBK3",115,0)
 ; -- increment count and add new line to results array.
"RTN","IBDFBK3",116,0)
 S LCNT=LCNT+1
"RTN","IBDFBK3",117,0)
 S RESULT(LCNT)=X
"RTN","IBDFBK3",118,0)
 Q
"RTN","IBDFBK3",119,0)
 ;
"RTN","IBDFBK3",120,0)
VTYPE(X) ;
"RTN","IBDFBK3",121,0)
 ; -- Vital sign type from codes
"RTN","IBDFBK3",122,0)
 S X=$G(X)
"RTN","IBDFBK3",123,0)
 Q $S(X="BP":"Blood Pressure",X="HT":"Height",X="WT":"Weight",X="TMP":"Temperature",X="PU":"Pulse",1:"Other Vital")
"RTN","IBDFBK3",124,0)
 ;
"RTN","IBDFBK3",125,0)
PROBNAR(IEN) ; -- display problem narrative
"RTN","IBDFBK3",126,0)
 ;
"RTN","IBDFBK3",127,0)
 Q $P($G(^AUTNPOV(+$P($G(^AUPNPROB(+$G(IEN),0)),"^",5),0)),"^")
"RTN","IBDFBK3",128,0)
 ;
"RTN","IBDFBK3",129,0)
PROBDIA(IEN) ; -- return problem diagnosis code pointer
"RTN","IBDFBK3",130,0)
 Q +$P($G(^AUPNPROB(+$G(IEN),0)),"^")
"RTN","IBDFDE0")
0^1^B35808657
"RTN","IBDFDE0",1,0)
IBDFDE0 ;ALB/AAS - AICS Data Entry, Check out interview; 24-FEB-96
"RTN","IBDFDE0",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**29,36**;APR 24, 1997
"RTN","IBDFDE0",3,0)
 ;
"RTN","IBDFDE0",4,0)
% G ^IBDFDE
"RTN","IBDFDE0",5,0)
 ;
"RTN","IBDFDE0",6,0)
CHKOUT(SDOE) ; -- ask check out questions
"RTN","IBDFDE0",7,0)
 ; -- assumes forms are always for an appointment
"RTN","IBDFDE0",8,0)
 ;    does not require provider, cpt, or diag. to input data
"RTN","IBDFDE0",9,0)
 ;    acts same as input from scanned form.
"RTN","IBDFDE0",10,0)
 ;
"RTN","IBDFDE0",11,0)
 S IBQUIT=0
"RTN","IBDFDE0",12,0)
 W !!,">>> Check out interview..."
"RTN","IBDFDE0",13,0)
 ;
"RTN","IBDFDE0",14,0)
 ; -- can't check out future appointments
"RTN","IBDFDE0",15,0)
 I $E(IBDF("APPT"),1,7)>DT W "not available at this time." G CHKOUTQ
"RTN","IBDFDE0",16,0)
 ;
"RTN","IBDFDE0",17,0)
 ; -- get encounter if not already there (won't work unless appt exists)
"RTN","IBDFDE0",18,0)
 ;I 'SDOE S SDOE=$$GETAPT(DFN,IBDF("APPT"),IBDF("CLINIC"))
"RTN","IBDFDE0",19,0)
 ;
"RTN","IBDFDE0",20,0)
 ; -- see if already done, or needs to be done first
"RTN","IBDFDE0",21,0)
 S X=$$REQ(DFN,IBDF("APPT"),IBDF("CLINIC"),SDOE,$G(IBDCKOUT))
"RTN","IBDFDE0",22,0)
 I X<1 W $S(X=0:"no questions.",X=-2:"not required",X=-3:"already completed today",1:"already complete.") G CHKOUTQ
"RTN","IBDFDE0",23,0)
 W "required."
"RTN","IBDFDE0",24,0)
 ;
"RTN","IBDFDE0",25,0)
 ; -- ask eligibility/appt type ;not unless asked for
"RTN","IBDFDE0",26,0)
 ;S ELIG=$$ELAP^SDPCE(DFN,IBDF("APPT"))
"RTN","IBDFDE0",27,0)
 ;
"RTN","IBDFDE0",28,0)
 ; -- ask checkout Date
"RTN","IBDFDE0",29,0)
 S IBDPRE=$G(IBDCO("CO"))
"RTN","IBDFDE0",30,0)
 S X=$S($G(IBDCO("CO"))="":"NOW",1:$$FMTE^XLFDT(IBDCO("CO")))
"RTN","IBDFDE0",31,0)
 S IBDCO("CO")=$E($$ASKDT("Checkout Date: ",X,"",IBDF("APPT"),$$FMADD^XLFDT(DT,1)),1,12)
"RTN","IBDFDE0",32,0)
 I $G(IBDCO("CO"))="" K IBDCO W "   Checkout Deleted!" G CHKOUTQ
"RTN","IBDFDE0",33,0)
 I $G(IBDCO("CO"))<0 K:IBDPRE="" IBDCO("CO") W:IBDPRE="" "   Checkout Deleted!" S:IBDPRE IBDCO("CO")=IBDPRE S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",34,0)
 ;
"RTN","IBDFDE0",35,0)
 ; -- ask classifications
"RTN","IBDFDE0",36,0)
 I $$SC^SDCO22(DFN,+SDOE)!($D(IBDF("SC"))) S IBDCO("SC")=$$ASKYN("Was treatment for SC Condition",$G(IBDCO("SC")),"D SCCOND^IBDFN4") D
"RTN","IBDFDE0",37,0)
 .I $G(IBDCO("SC"))="" K IBDCO("SC") W "   Deleted!"
"RTN","IBDFDE0",38,0)
 I $G(IBDCO("SC"))<0 K IBDCO("SC") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",39,0)
 ;
"RTN","IBDFDE0",40,0)
 I $G(IBDCO("SC")) G CHKOUTQ ; if service connected others don't apply
"RTN","IBDFDE0",41,0)
 ;
"RTN","IBDFDE0",42,0)
 I $$AO^SDCO22(DFN,+SDOE)!($D(IBDF("AO"))) S IBDCO("AO")=$$ASKYN("Was treatment related to Agent Orange Exposure",$G(IBDCO("AO"))) D
"RTN","IBDFDE0",43,0)
 .I $G(IBDCO("AO"))="" K IBDCO("AO") W "   Deleted!"
"RTN","IBDFDE0",44,0)
 I $G(IBDCO("AO"))<0 K IBDCO("AO") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",45,0)
 ;
"RTN","IBDFDE0",46,0)
 I $$IR^SDCO22(DFN,+SDOE)!($D(IBDF("IR"))) S IBDCO("IR")=$$ASKYN("Was treatment related to  Ionizing Radiation Exposure",$G(IBDCO("IR"))) D
"RTN","IBDFDE0",47,0)
 .I $G(IBDCO("IR"))="" K IBDCO("IR") W "   Deleted!"
"RTN","IBDFDE0",48,0)
 I $G(IBDCO("IR"))<0 K IBDCO("IR") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",49,0)
 ;
"RTN","IBDFDE0",50,0)
 I $$EC^SDCO22(DFN,+SDOE)!($D(IBDF("EC"))) S IBDCO("EC")=$$ASKYN("Was treatment related to Environmental Contaminant Exposure",$G(IBDCO("EC"))) D
"RTN","IBDFDE0",51,0)
 .I $G(IBDCO("EC"))="" K IBDCO("EC") W "   Deleted!"
"RTN","IBDFDE0",52,0)
 I $G(IBDCO("EC"))<0 K IBDCO("EC") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",53,0)
 ;
"RTN","IBDFDE0",54,0)
 ;- Ask Military Sexual Trauma question (patch IBD*3*36)
"RTN","IBDFDE0",55,0)
 I $$MST^SDCO22(DFN,+SDOE)!($D(IBDF("MST"))) S IBDCO("MST")=$$ASKYN("Was treatment related to MST (Note: ask provider only)",$G(IBDCO("MST"))) D
"RTN","IBDFDE0",56,0)
 .I $G(IBDCO("MST"))="" K IBDCO("MST") W "   Deleted!"
"RTN","IBDFDE0",57,0)
 I $G(IBDCO("MST"))<0 K IBDCO("MST") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",58,0)
 ;
"RTN","IBDFDE0",59,0)
 I '$D(IBDCO) W "no questions."
"RTN","IBDFDE0",60,0)
CHKOUTQ I IBQUIT W !!,"Required information missing."
"RTN","IBDFDE0",61,0)
 K IBDPRE,SDFN
"RTN","IBDFDE0",62,0)
 Q
"RTN","IBDFDE0",63,0)
 ;
"RTN","IBDFDE0",64,0)
ASKYN(QUES,DEFLT,EXHELP) ; -- ask yes/no question
"RTN","IBDFDE0",65,0)
 N DIR,DIRUT,DUOUT,DTOUT
"RTN","IBDFDE0",66,0)
 I $G(EXHELP)'="" S DIR("??")="^"_EXHELP
"RTN","IBDFDE0",67,0)
 S DIR("A")=QUES,DIR(0)="YO",DIR("B")=$S($G(DEFLT):"Yes",1:"No") D ^DIR
"RTN","IBDFDE0",68,0)
 I $D(DIRUT),Y'="" S Y=-1 ;i y="" user typed "@"
"RTN","IBDFDE0",69,0)
 I $D(DTOUT)!($D(DUOUT)) S IBQUIT=1,Y=-1
"RTN","IBDFDE0",70,0)
 Q Y
"RTN","IBDFDE0",71,0)
 ;
"RTN","IBDFDE0",72,0)
ASKDT(QUES,DEFLT,PARAM,EARLY,LATEST,EXHELP) ; -- ask date questions
"RTN","IBDFDE0",73,0)
 N X,Y,DIR,DIRUT,DTOUT,DUOUT
"RTN","IBDFDE0",74,0)
 S DIR(0)="DOA^"_$E($G(EARLY),1,7)_":"_$G(LATEST)_":"_$S($G(PARAM)'="":PARAM,1:"AERX")
"RTN","IBDFDE0",75,0)
 I $G(QUES)'="" S DIR("A")=QUES
"RTN","IBDFDE0",76,0)
 I $G(DEFLT)'="" S DIR("B")=DEFLT
"RTN","IBDFDE0",77,0)
 I $L($G(EXHELP)) S DIR("??")="^"_EXHELP
"RTN","IBDFDE0",78,0)
 S DIR("?")="This response requires an appointment Date and Time"
"RTN","IBDFDE0",79,0)
 D ^DIR
"RTN","IBDFDE0",80,0)
 I $D(DIRUT),Y'="" S Y=-1 ;i y="" user typed "@"
"RTN","IBDFDE0",81,0)
 I $D(DTOUT)!($D(DUOUT)) S IBQUIT=1,Y=-1
"RTN","IBDFDE0",82,0)
 Q Y
"RTN","IBDFDE0",83,0)
 ;
"RTN","IBDFDE0",84,0)
REQ(DFN,APPT,CLINIC,SDOE,IBDC) ; is checkout interview required for this appt.
"RTN","IBDFDE0",85,0)
 N IBDY S IBDY=0
"RTN","IBDFDE0",86,0)
 I $$INP^SDAM2(DFN,APPT)="I" G REQQ ; inpatient appointment
"RTN","IBDFDE0",87,0)
 I '$$CLINIC^SDAMU(CLINIC) G REQQ ; not a clinic or non-count
"RTN","IBDFDE0",88,0)
 I $$REQ^SDM1A(APPT)'="CO" G REQQ ; checkout not required
"RTN","IBDFDE0",89,0)
 I $$EXCL(CLINIC,APPT) S IBDY=-2 G REQQ ; clinic stop codes are exempt
"RTN","IBDFDE0",90,0)
 I $$COMDT^SDCOU(+SDOE) S IBDY=-1 G REQQ ;process completed
"RTN","IBDFDE0",91,0)
 I $P($G(IBDC),".")=DT S IBDY=-3 G REQQ ;already checked out today
"RTN","IBDFDE0",92,0)
 S IBDY=1
"RTN","IBDFDE0",93,0)
REQQ K SDFN
"RTN","IBDFDE0",94,0)
 Q IBDY
"RTN","IBDFDE0",95,0)
 ;
"RTN","IBDFDE0",96,0)
EXCL(CL,DAT) ; -- are clinic stop codes exempt from classifications
"RTN","IBDFDE0",97,0)
 ; -- 1=yes, 0=no
"RTN","IBDFDE0",98,0)
 ;    original logic from exoe^sdcou2 except uses clinic stops rather
"RTN","IBDFDE0",99,0)
 ;    than outpatient encounter stops
"RTN","IBDFDE0",100,0)
 ;
"RTN","IBDFDE0",101,0)
 N SC1,SC2,EXMPT
"RTN","IBDFDE0",102,0)
 S SC1=$P($G(^SC(CL,0)),"^",7),SC2=$P($G(^SC(CL,0)),"^",18)
"RTN","IBDFDE0",103,0)
 I $$EX^SDCOU2(SC1,$G(DAT)) D
"RTN","IBDFDE0",104,0)
 .S EXMPT=1
"RTN","IBDFDE0",105,0)
 .I SC2,'$$EX^SDCOU2(SC2,$G(DAT)) S EXMPT=0
"RTN","IBDFDE0",106,0)
EXCLQ Q +$G(EXMPT)
"RTN","IBDFDE0",107,0)
 ;
"RTN","IBDFDE0",108,0)
WRITE(SDOE,CNT) ; -- print checkout interview
"RTN","IBDFDE0",109,0)
 W !?3,"Check out interview..."
"RTN","IBDFDE0",110,0)
 S X=$$REQ(DFN,IBDF("APPT"),IBDF("CLINIC"),SDOE)
"RTN","IBDFDE0",111,0)
 I X<1 W $S(X=0:"no questions.",1:"already complete.") G WRITEQ
"RTN","IBDFDE0",112,0)
 W "required."
"RTN","IBDFDE0",113,0)
 G:$D(IBDCO)'>1 WRITEQ
"RTN","IBDFDE0",114,0)
 ;D:$G(CNT)="" DISP
"RTN","IBDFDE0",115,0)
 D:$G(CNT)'="" LIST
"RTN","IBDFDE0",116,0)
 ;
"RTN","IBDFDE0",117,0)
WRITEQ Q
"RTN","IBDFDE0",118,0)
 ;
"RTN","IBDFDE0",119,0)
DISP ; -- display the old way
"RTN","IBDFDE0",120,0)
 I $D(IBDCO("CO")) W !,"                 Checkout Date: ",$$FMTE^XLFDT(IBDCO("CO"))
"RTN","IBDFDE0",121,0)
 I $D(IBDCO("SC")) W !,"    Treatment for SC Condition: ",$S(IBDCO("SC")=1:"YES",1:"NO")
"RTN","IBDFDE0",122,0)
 I $D(IBDCO("AO")) W !,"         Agent Orange Exposure: ",$S(IBDCO("AO")=1:"YES",1:"NO")
"RTN","IBDFDE0",123,0)
 I $D(IBDCO("IR")) W !,"   Ionizing Radiation Exposure: ",$S(IBDCO("IR")=1:"YES",1:"NO")
"RTN","IBDFDE0",124,0)
 I $D(IBDCO("EC")) W !,"    Environmental Contaminants: ",$S(IBDCO("EC")=1:"YES",1:"NO")
"RTN","IBDFDE0",125,0)
 I $D(IBDCO("MST")) W !,"                          MST: ",$S(IBDCO("MST")=1:"YES",1:"NO")
"RTN","IBDFDE0",126,0)
 Q
"RTN","IBDFDE0",127,0)
 ;
"RTN","IBDFDE0",128,0)
LIST ; -- display with a list
"RTN","IBDFDE0",129,0)
 I $D(IBDCO("CO")) S CNT=CNT+1 W !?3,CNT,?7,"Checkout Date ",?31,$$FMTE^XLFDT(IBDCO("CO"))
"RTN","IBDFDE0",130,0)
 I $D(IBDCO("SC")) S CNT=CNT+1 W !?3,CNT,?7,"SC Condition ",?31,$S(IBDCO("SC")=1:"YES",1:"NO")
"RTN","IBDFDE0",131,0)
 I $D(IBDCO("AO")) S CNT=CNT+1 W !?3,CNT,?7,"Agent Orange ",?31,$S(IBDCO("AO")=1:"YES",1:"NO")
"RTN","IBDFDE0",132,0)
 I $D(IBDCO("IR")) S CNT=CNT+1 W !?3,CNT,?7,"Ionizing Radiation ",?31,$S(IBDCO("IR")=1:"YES",1:"NO")
"RTN","IBDFDE0",133,0)
 I $D(IBDCO("EC")) S CNT=CNT+1 W !?3,CNT,?7,"Env. Contaminants ",?31,$S(IBDCO("EC")=1:"YES",1:"NO")
"RTN","IBDFDE0",134,0)
 I $D(IBDCO("MST")) S CNT=CNT+1 W !?3,CNT,?7,"MST ",?31,$S(IBDCO("MST")=1:"YES",1:"NO")
"RTN","IBDFDE0",135,0)
 Q
"RTN","IBDFDE1")
0^2^B55163756
"RTN","IBDFDE1",1,0)
IBDFDE1 ;ALB/AAS - AICS Data Entry, Final check; 24-FEB-96 [ 11/12/96  2:12 PM ]
"RTN","IBDFDE1",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**38,36**;APR 24, 1997
"RTN","IBDFDE1",3,0)
 ; -- calls IBDFRPC4 to pass data to pce
"RTN","IBDFDE1",4,0)
 ;
"RTN","IBDFDE1",5,0)
% G ^IBDFDE
"RTN","IBDFDE1",6,0)
 ;
"RTN","IBDFDE1",7,0)
FINAL ; -- display everything selected and check okay
"RTN","IBDFDE1",8,0)
 ; -- input IBDSEL :
"RTN","IBDFDE1",9,0)
 ;             $p1 := package interface ien (for input)
"RTN","IBDFDE1",10,0)
 ;             $p2 := code to send (may be internal or external)
"RTN","IBDFDE1",11,0)
 ;             $p3 := text to send
"RTN","IBDFDE1",12,0)
 ;             $p4 := hdr to send (optional)
"RTN","IBDFDE1",13,0)
 ;             $p5 := clinic lexicon pointer (optional) 
"RTN","IBDFDE1",14,0)
 ;             $p6 := qualifier (i.e. primary or secondary)
"RTN","IBDFDE1",15,0)
 ;             $P7 :=
"RTN","IBDFDE1",16,0)
 ;             $p8 :=
"RTN","IBDFDE1",17,0)
 ;             $p9 :=
"RTN","IBDFDE1",18,0)
 ;             $p10 := external value of code (optional)
"RTN","IBDFDE1",19,0)
 ;
"RTN","IBDFDE1",20,0)
 N I,X,DIR,DIRUT,DUOUT,DTOUT,PARAM,IBDCNT,MODSAVE,XX
"RTN","IBDFDE1",21,0)
 K IBDREDIT
"RTN","IBDFDE1",22,0)
 I $G(IBDSEL(0))<1,$G(IBDCO("CO"))="",$G(IBDCO("SC"))="",$G(IBDCO("AO"))="",$G(IBDCO("IR"))="",$G(IBDCO("EC"))="",$G(IBDCO("MST"))="" W !!,"Nothing Selected!!" S IBDF("NOTHING")=1 Q
"RTN","IBDFDE1",23,0)
 ;
"RTN","IBDFDE1",24,0)
 S (IBDCNT,IBQUIT)=0
"RTN","IBDFDE1",25,0)
 W !!,"You have entered the following:"
"RTN","IBDFDE1",26,0)
 D WRITE^IBDFDE0(IBDF("SDOE"),.IBDCNT)
"RTN","IBDFDE1",27,0)
 S I=0 F  S I=$O(IBDSEL(I)) Q:I=""  D
"RTN","IBDFDE1",28,0)
 . S IBDCNT=IBDCNT+1
"RTN","IBDFDE1",29,0)
 . K MODSAVE
"RTN","IBDFDE1",30,0)
 . D LINE(IBDCNT,IBDSEL(I)) D
"RTN","IBDFDE1",31,0)
 .. I $D(IBDSEL(I,"MODIFIER")) D MODLIST(I)
"RTN","IBDFDE1",32,0)
 S DIR(0)="Y",DIR("B")="No",DIR("A")="Is this Okay" D ^DIR
"RTN","IBDFDE1",33,0)
 I $D(DIRUT) S IBQUIT=1 W !!,"No action Taken",! G FINALQ
"RTN","IBDFDE1",34,0)
 I Y<1 D DEL S:'IBQUIT IBDREDIT=1 G FINALQ
"RTN","IBDFDE1",35,0)
 I Y'=1 G FINALQ
"RTN","IBDFDE1",36,0)
 M IBDF=IBDSEL
"RTN","IBDFDE1",37,0)
 ;I $G(^DPT(DFN,"S",IBDF("APPT"),0))="" D FNDAPPT I 'IBDOK W !!,"No action Taken",! Q
"RTN","IBDFDE1",38,0)
 I $G(IBDF("SAVE")) M ^TMP("IBD-SAVED",$J)=IBDF ;don't save checkout data
"RTN","IBDFDE1",39,0)
 M IBDF=IBDCO
"RTN","IBDFDE1",40,0)
 W !!,"Sending Data to PCE..."
"RTN","IBDFDE1",41,0)
 D SEND^IBDFRPC4(.RESULT,.IBDF)
"RTN","IBDFDE1",42,0)
 W $S($G(RESULT(0)):" Successful",1:" Unsuccessful"),!!
"RTN","IBDFDE1",43,0)
 I $D(IBDSTRT) S IBDFIN=$H S IBDTIME=$$HDIFF^XLFDT(IBDFIN,IBDSTRT,2)
"RTN","IBDFDE1",44,0)
 S PARAM=$P($G(^IBD(357.09,1,0)),"^",7)
"RTN","IBDFDE1",45,0)
 I PARAM=3 D DISP
"RTN","IBDFDE1",46,0)
 I PARAM,$D(PXCA("ERROR"))!($D(PXCA("WARNING"))) D ERR
"RTN","IBDFDE1",47,0)
 I $G(IBDTIME) D
"RTN","IBDFDE1",48,0)
 .W !!,"Elapsed time for data entry: ",IBDTIME," seconds.",!!
"RTN","IBDFDE1",49,0)
 .S IBDF("SECONDS")=IBDTIME,IBDF("USER")=DUZ
"RTN","IBDFDE1",50,0)
 .D ETIME^IBDFBK1(.RESULT,.IBDF)
"RTN","IBDFDE1",51,0)
 I '$G(IBDREDIT),$P($G(^IBD(357.09,1,0)),"^",6) D MAKAPPT
"RTN","IBDFDE1",52,0)
FINALQ K SDFN,ZTSK,SECONDS,LEX,ORVP,SEL1,PXCAVSIT,PXCA,PXCASTAT
"RTN","IBDFDE1",53,0)
 Q
"RTN","IBDFDE1",54,0)
 ;
"RTN","IBDFDE1",55,0)
DEL ; -- delete selected entry
"RTN","IBDFDE1",56,0)
 N I,J,DIR,DIRUT,DUOUT,DTOUT,CNT,CNTD,IBD,IBD1,IBDEL
"RTN","IBDFDE1",57,0)
 S CNT=0
"RTN","IBDFDE1",58,0)
 W !
"RTN","IBDFDE1",59,0)
 S DIR(0)="Y",DIR("B")="No",DIR("A")="Do you want to delete an item"
"RTN","IBDFDE1",60,0)
 S DIR("?")="Enter 'Yes' if you want to delete an item or 'No' to just add more items."
"RTN","IBDFDE1",61,0)
 D ^DIR K DIR
"RTN","IBDFDE1",62,0)
 I $D(DIRUT) S IBQUIT=1 Q
"RTN","IBDFDE1",63,0)
 Q:Y<1
"RTN","IBDFDE1",64,0)
 S IBD=0 F  S IBD=$O(IBDSEL(IBD)) Q:IBD=""  S CNT=CNT+1,IBDEL(CNT)=IBD D LINE(CNT,IBDSEL(IBD)) D
"RTN","IBDFDE1",65,0)
 . I $D(IBDSEL(IBD,"MODIFIER")) D MODLIST(IBD)
"RTN","IBDFDE1",66,0)
 Q:CNT<1
"RTN","IBDFDE1",67,0)
 S DIR(0)="L^1:"_CNT D ^DIR K DIR
"RTN","IBDFDE1",68,0)
 I $D(DIRUT) W !,"Nothing Deleted" Q
"RTN","IBDFDE1",69,0)
 F IBD1=1:1 S IBDEL=$P(Y,",",IBD1) Q:IBDEL=""  D
"RTN","IBDFDE1",70,0)
 .W !,"Deleting "_IBDEL
"RTN","IBDFDE1",71,0)
 .S QLFR=$P(IBDSEL(IBDEL(IBDEL)),"^",6)
"RTN","IBDFDE1",72,0)
 .I QLFR'="" K IBDPI(+IBDSEL(IBDEL(IBDEL)),QLFR)
"RTN","IBDFDE1",73,0)
 .K IBDPI(+IBDSEL(IBDEL(IBDEL)),IBDEL(IBDEL))
"RTN","IBDFDE1",74,0)
 .K IBDSEL(IBDEL(IBDEL))
"RTN","IBDFDE1",75,0)
 .K IBDEL(IBDEL)
"RTN","IBDFDE1",76,0)
 .S CNTD=$G(CNTD)+1
"RTN","IBDFDE1",77,0)
 I $G(CNTD)=CNT S IBDSEL(0)=0
"RTN","IBDFDE1",78,0)
 W !
"RTN","IBDFDE1",79,0)
DELQ Q
"RTN","IBDFDE1",80,0)
 ;
"RTN","IBDFDE1",81,0)
LINE(CNT,IBD) ; -- write one line of text
"RTN","IBDFDE1",82,0)
 W !,?3,CNT,?7,$S($P(IBD,"^",8)'="":$P(IBD,"^",8),1:$E($P($P($G(^IBE(357.6,+IBD,0)),"^"),"INPUT ",2),1,22)),?31,$E($P(IBD,"^",3),1,30)
"RTN","IBDFDE1",83,0)
 W ?62,$S($P(IBD,"^",10)'="":$P(IBD,"^",10),$P($G(^IBE(357.6,+IBD,0)),"^")="GMP INPUT CLINIC COMMON PROBLEMS":$$LEX($P(IBD,"^",2)),1:$P(IBD,"^",2))
"RTN","IBDFDE1",84,0)
 W ?70,$E($S($P(IBD,"^",9)'="":$P(IBD,"^",9),1:$P(IBD,"^",6)),1,10)
"RTN","IBDFDE1",85,0)
 S SLCTN=$P(IBD,"^",12) I SLCTN'="" D
"RTN","IBDFDE1",86,0)
 . ;list modifiers
"RTN","IBDFDE1",87,0)
 . N CODE
"RTN","IBDFDE1",88,0)
 . Q:'$D(^IBE(357.3,SLCTN,3))
"RTN","IBDFDE1",89,0)
 . S CODE=$P($G(^IBE(357.3,SLCTN,0)),"^") Q:CODE=""
"RTN","IBDFDE1",90,0)
 . W !?11,"Associated Modifier(s):    "
"RTN","IBDFDE1",91,0)
 . S MOD=0 F  S MOD=$O(^IBE(357.3,SLCTN,3,MOD)) Q:'MOD  D
"RTN","IBDFDE1",92,0)
 .. S MODSAVE=$P($G(^IBE(357.3,SLCTN,3,MOD,0)),"^")
"RTN","IBDFDE1",93,0)
 .. S MODSAVE(MODSAVE)=""
"RTN","IBDFDE1",94,0)
 .. S XX=$P($$MODP^ICPTMOD(CODE,MODSAVE,"E"),"^",2)
"RTN","IBDFDE1",95,0)
 .. W !,?15,MODSAVE,?20,XX
"RTN","IBDFDE1",96,0)
 Q
"RTN","IBDFDE1",97,0)
 ;
"RTN","IBDFDE1",98,0)
MODLIST(I) ; -- list modifiers if in array
"RTN","IBDFDE1",99,0)
 ;
"RTN","IBDFDE1",100,0)
 W !?11,"Selected during Data Entry Modifier(s):    "
"RTN","IBDFDE1",101,0)
 N CODE
"RTN","IBDFDE1",102,0)
 S CODE=$P($G(IBDSEL(I)),"^",2)
"RTN","IBDFDE1",103,0)
 S MOD=0 F  S MOD=$O(IBDSEL(I,"MODIFIER",MOD)) Q:'MOD  D
"RTN","IBDFDE1",104,0)
 .; --quitting if duplicate entry
"RTN","IBDFDE1",105,0)
 . Q:$D(MODSAVE(IBDSEL(I,"MODIFIER",MOD)))
"RTN","IBDFDE1",106,0)
 . S MODSAVE=IBDSEL(I,"MODIFIER",MOD)
"RTN","IBDFDE1",107,0)
 . S XX=$P($$MODP^ICPTMOD(CODE,MODSAVE,"E"),"^",2)
"RTN","IBDFDE1",108,0)
 . W !,?15,MODSAVE,?20,XX
"RTN","IBDFDE1",109,0)
 Q
"RTN","IBDFDE1",110,0)
LEX(VAL) ; -- get output of lexicon entry
"RTN","IBDFDE1",111,0)
 I $D(^LEX)>1 S X="LEXU" X ^%ZOSF("TEST") I $T S VAL=$$ICDONE^LEXU(VAL) S:$L(VAL)<1 VAL=799.9 Q VAL  ;clinical lexicon next version to be in ^LEX
"RTN","IBDFDE1",112,0)
 S X="GMPTU" X ^%ZOSF("TEST") I $T S VAL=$$ICDONE^GMPTU(VAL) S:$L(VAL)<1 VAL=799.9 Q VAL
"RTN","IBDFDE1",113,0)
 Q 799.9
"RTN","IBDFDE1",114,0)
 ;
"RTN","IBDFDE1",115,0)
MAKAPPT ; -- ask make appointment stuff
"RTN","IBDFDE1",116,0)
 N %I,%T,I,J,X,Y,DIC,DA,DIR,DIRUT,DUOUT,IBDFN,RTCLEX,SDALLE,SDATD,SDAV,SDCLN,SDDECOD,SDEC,SDEMP,SDFN,SDHX,SDLOCK,SDMADE,SDNOT,SDOEL,SDPL,SDRE,SDRT,SDSOH,SDT,SDTTM,SDY,VSITON,VSIT,XQXFLG
"RTN","IBDFDE1",117,0)
 ;
"RTN","IBDFDE1",118,0)
 I $G(IBDF("NOAPPT")) G MAKAPQ
"RTN","IBDFDE1",119,0)
 S DIR("?")="Enter 'Yes' to make another appointment for this patient or 'No' if no appointment is to be made."
"RTN","IBDFDE1",120,0)
 S DIR(0)="Y",DIR("A")="Do you wish to make a follow-up appointment for "_$P(^DPT(IBDF("DFN"),0),"^")
"RTN","IBDFDE1",121,0)
 D ^DIR K DIR
"RTN","IBDFDE1",122,0)
 I $D(DUOUT)!($D(DTOUT)) S IBQUIT=1 G MAKAPQ
"RTN","IBDFDE1",123,0)
 I Y<1 G MAKAPQ
"RTN","IBDFDE1",124,0)
 ;
"RTN","IBDFDE1",125,0)
 S (SDFN,IBDFN,DFN)=$G(IBDF("DFN")) ;use same patient, don't ask patient, ask clinic
"RTN","IBDFDE1",126,0)
 ;S SDCLN=IBDF("CLINIC") ;use same clinic, don't ask clinic
"RTN","IBDFDE1",127,0)
 D ^SDM
"RTN","IBDFDE1",128,0)
 S DFN=IBDFN K SDFN
"RTN","IBDFDE1",129,0)
MAKAPQ Q
"RTN","IBDFDE1",130,0)
 ;
"RTN","IBDFDE1",131,0)
ERR ; -- if processing of errors is on do display
"RTN","IBDFDE1",132,0)
 ;    ask if want to re-edit
"RTN","IBDFDE1",133,0)
 N I,J,ERR,LCNT,DIR,DIRUT,DUOUT
"RTN","IBDFDE1",134,0)
 S LCNT=0
"RTN","IBDFDE1",135,0)
 D EW^IBDFBK2(.ERR,.PXCA,.LCNT)
"RTN","IBDFDE1",136,0)
 ;
"RTN","IBDFDE1",137,0)
 W !!!,"The following Error(s) occurred while validating data in PCE for: ",$P($G(^DPT(IBDF("DFN"),0)),"^")
"RTN","IBDFDE1",138,0)
 S I=0 F  S I=$O(ERR(I)) Q:'I  W !?4,$E(ERR(I),1,75)  I $L(ERR(I))>75 W !?10,$E(ERR(I),76,140)
"RTN","IBDFDE1",139,0)
 W !
"RTN","IBDFDE1",140,0)
 Q:$G(IBDF("SAVE"))
"RTN","IBDFDE1",141,0)
 S DIR(0)="Y",DIR("B")="Yes",DIR("A")="Do you want to Re-Edit"
"RTN","IBDFDE1",142,0)
 D ^DIR K DIR
"RTN","IBDFDE1",143,0)
 I Y=1 D
"RTN","IBDFDE1",144,0)
 .S IBDREDIT=1
"RTN","IBDFDE1",145,0)
 .K IBDF("CO"),IBDF("IR"),IBDF("SC"),IBDF("EC"),IBDF("AO"),IBDF("MST")
"RTN","IBDFDE1",146,0)
 .S I=0 F  S I=$O(IBDF(I)) Q:'I  K IBDF(I)
"RTN","IBDFDE1",147,0)
 I $D(DIRUT) S IBQUIT=1
"RTN","IBDFDE1",148,0)
 Q
"RTN","IBDFDE1",149,0)
 ;
"RTN","IBDFDE1",150,0)
DISP ; -- display data based on pxca array
"RTN","IBDFDE1",151,0)
 N I,LST,LCNT
"RTN","IBDFDE1",152,0)
 S LCNT=0
"RTN","IBDFDE1",153,0)
 D LSTDATA^IBDFBK3(.LST,.PXCA,.LCNT)
"RTN","IBDFDE1",154,0)
 W !!!,"The following data was sent to PCE for: ",$P($G(^DPT(IBDF("DFN"),0)),"^")
"RTN","IBDFDE1",155,0)
 W !,?4,"Clinic: ",$P($G(^SC(+$P($G(PXCA("ENCOUNTER")),"^",3),0)),"^")," at ",$$FMTE^XLFDT(+$G(PXCA("ENCOUNTER")))
"RTN","IBDFDE1",156,0)
 S I=0 F  S I=$O(LST(I)) Q:'I  W !?4,$E(LST(I),1,75) I $L(LST(I))>75 W !?10,$E(LST(I),76,140)
"RTN","IBDFDE1",157,0)
 W !
"RTN","IBDFDE1",158,0)
 Q
"RTN","IBDFDE1",159,0)
 ;
"RTN","IBDFDE1",160,0)
FNDAPPT ; -- if form is not associated with an appointment see any in clinic
"RTN","IBDFDE1",161,0)
 I $G(IBDSAEOK) S IBDOK=1 G FNDQ
"RTN","IBDFDE1",162,0)
 N IBDI,IBDJ,X,NODE,CNT,IOINHI,IOINORM,NEWAPPT,CLNAM,FORMLST,DIR,DIRUT,DUOUT,DTOUT
"RTN","IBDFDE1",163,0)
 S X="IOINHI;IOINORM" D ENDR^%ZISS
"RTN","IBDFDE1",164,0)
 S IBDI=$E(IBDF("APPT"),1,7),IBDJ=IBDI+.24,CNT=0
"RTN","IBDFDE1",165,0)
 F  S IBDI=$O(^DPT(DFN,"S",IBDI)) Q:'IBDI!(IBDI>IBDJ)  D  G:CNT<1 FNDQ
"RTN","IBDFDE1",166,0)
 .S NODE=$G(^DPT(DFN,"S",IBDI,0))
"RTN","IBDFDE1",167,0)
 .Q:+NODE'=IBDF("CLINIC")
"RTN","IBDFDE1",168,0)
 .S CNT=CNT+1,CLNAM=$E($P(^SC(IBDF("CLINIC"),0),"^"),1,20),NEWAPPT(CNT)=IBDI
"RTN","IBDFDE1",169,0)
 .I CNT=1 W $C(7),!!,IOINHI,"Warning:","  You are about to create a stand alone visit for: ",IOINORM,!,$E($P(^DPT(DFN,0),"^"),1,25),?27,CLNAM,?49,$$FMTE^XLFDT(IBDF("APPT"))
"RTN","IBDFDE1",170,0)
 .S FORMLST=$$FINDID^IBDF18C(DFN,IBDI,"",1)
"RTN","IBDFDE1",171,0)
 .W !,IOINHI,"Patient has appointment in ",CLNAM,?49,$$FMTE^XLFDT(IBDI)," ID: ",$TR($E(FORMLST,1,($L(FORMLST)-1)),"^",","),IOINORM
"RTN","IBDFDE1",172,0)
 ;
"RTN","IBDFDE1",173,0)
 W ! S IBDOK=$$ASKYN^IBDFDE0("Okay to Create Stand Alone Encounter",0) W !
"RTN","IBDFDE1",174,0)
 I $G(IBDOK)<0 S IBDOK=0
"RTN","IBDFDE1",175,0)
 G:IBDOK FNDQ
"RTN","IBDFDE1",176,0)
 ;
"RTN","IBDFDE1",177,0)
 ; -- ask if want to use appt. date time
"RTN","IBDFDE1",178,0)
 I CNT=1 D
"RTN","IBDFDE1",179,0)
 .S IBDOK=$$ASKYN^IBDFDE0("Okay to use "_$$FMTE^XLFDT(NEWAPPT(1))_" appointment date/time",1) W !
"RTN","IBDFDE1",180,0)
 .I $G(IBDOK)<0 S IBDOK=0
"RTN","IBDFDE1",181,0)
 .I IBDOK S IBDF("APPT")=NEWAPPT(1)
"RTN","IBDFDE1",182,0)
 ;
"RTN","IBDFDE1",183,0)
 I CNT>1 D
"RTN","IBDFDE1",184,0)
 .S DIR("A")=""
"RTN","IBDFDE1",185,0)
 .S DIR(0)=""
"RTN","IBDFDE1",186,0)
FNDQ Q
"RTN","IBDFDE7")
0^7^B45852937
"RTN","IBDFDE7",1,0)
IBDFDE7 ;ALB/AAS - AICS Manual Data Entry, Entry point for Group Clinics ; 29-APR-96
"RTN","IBDFDE7",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**36**;APR 24, 1997
"RTN","IBDFDE7",3,0)
 ;
"RTN","IBDFDE7",4,0)
% N %,%H,C,I,J,X,Y,ADD,DEL,ASKOTHER,DIR,DIC,DA,CNT,DFN,DIRUT,DUOUT,DTOUT,POP,RTN,FRMDATA,IBDA,IBY,IBQUIT,IBDF,IBDOBJ,IBDPTSTI,IBDPTSTE,IBDPTNM,IBDPTDTI,SEL,IBD,IBDCKOUT
"RTN","IBDFDE7",5,0)
 N IBDPTDTE,IBDFMNME,IBDFMIEN,IBDFMSTI,IBDFMSTE,IBDFMIDI,IBDCLNME,IBFORM,IBDCLNPH,IBDPID,IBDPTPRI,IBDSEL,IBDPI,IBDCO,PXCA,SDCLST,PXCASTAT,PXKNODA,PXKNODB,IBDREDIT,IBDASK,IBDPRE,IBDX,ANS,CLNAME,CLSETUP,IBDSC,FORM,FORMLST,IBDFDT
"RTN","IBDFDE7",6,0)
 ;
"RTN","IBDFDE7",7,0)
 I '$D(DT) D DT^DICRW
"RTN","IBDFDE7",8,0)
 D HOME^%ZIS
"RTN","IBDFDE7",9,0)
 W !!,"Data Entry of Encounter Forms for Group Clinics",!
"RTN","IBDFDE7",10,0)
 ;
"RTN","IBDFDE7",11,0)
STRT ; -- ask for Clinic, appt. date/time
"RTN","IBDFDE7",12,0)
 ;    list patients, allow to deselect
"RTN","IBDFDE7",13,0)
 ;    find all forms for appt., then go through 1 at a time
"RTN","IBDFDE7",14,0)
 ;    then send data for each patient
"RTN","IBDFDE7",15,0)
 ;
"RTN","IBDFDE7",16,0)
 D END W !
"RTN","IBDFDE7",17,0)
 S IBQUIT=0
"RTN","IBDFDE7",18,0)
 S (IBDSC,IBDF("CLINIC"))=$$SELCL^IBDFDE6 G:IBQUIT STRTQ
"RTN","IBDFDE7",19,0)
 I IBDSC<1 S IBQUIT=1 G STRTQ
"RTN","IBDFDE7",20,0)
 S CLNAME=$P($G(^SC(+IBDSC,0)),"^")
"RTN","IBDFDE7",21,0)
 S CLSETUP=$G(^SD(409.95,+$O(^SD(409.95,"B",+IBDSC,0)),0))
"RTN","IBDFDE7",22,0)
 ;
"RTN","IBDFDE7",23,0)
OVER ;
"RTN","IBDFDE7",24,0)
 W !
"RTN","IBDFDE7",25,0)
 S IBQUIT=0
"RTN","IBDFDE7",26,0)
 S IBDFDT=$$SELAPT(.IBDF) G:IBQUIT STRTQ
"RTN","IBDFDE7",27,0)
 I IBDFDT<0 G STRT
"RTN","IBDFDE7",28,0)
 S IBDF("APPT")=IBDFDT
"RTN","IBDFDE7",29,0)
 ;
"RTN","IBDFDE7",30,0)
 D BLD
"RTN","IBDFDE7",31,0)
 I '$D(^TMP("IBD-PL",$J,IBDF("CLINIC"))) W !!,"No valid appointments at that Date/Time!",!! G STRTQ
"RTN","IBDFDE7",32,0)
 ;
"RTN","IBDFDE7",33,0)
 D HDR^IBDFDE6,LIST^IBDFDE6
"RTN","IBDFDE7",34,0)
 W !!
"RTN","IBDFDE7",35,0)
 D EXCLUD
"RTN","IBDFDE7",36,0)
 I IBQUIT=2 S IBQUIT=0 G STRTQ
"RTN","IBDFDE7",37,0)
 G:IBQUIT STRTQ
"RTN","IBDFDE7",38,0)
 ;
"RTN","IBDFDE7",39,0)
 ; -- get first patient, check form(s)
"RTN","IBDFDE7",40,0)
 ;   do data entry on form and if okay pass data for all patients
"RTN","IBDFDE7",41,0)
 S IBDSTRT=+$O(^TMP("IBD-PL",$J,IBDF("CLINIC"),0))
"RTN","IBDFDE7",42,0)
 S NODE=$G(^TMP("IBD-PL",$J,IBDF("CLINIC"),IBDSTRT))
"RTN","IBDFDE7",43,0)
 S (DFN,IBDFN)=+NODE
"RTN","IBDFDE7",44,0)
 S FORMLST=$$FINDID^IBDF18C(DFN,IBDF("APPT"),"",1)
"RTN","IBDFDE7",45,0)
 I FORMLST="" W !,"No forms Printed for first Patient" D ANYWAY^IBDFDE6
"RTN","IBDFDE7",46,0)
 I FORMLST="" G OVERQ
"RTN","IBDFDE7",47,0)
 S IBDF("SAVE")=1 ;save ibdsel(array)
"RTN","IBDFDE7",48,0)
 F IBDX=1:1 S IBDF("FORM")=$P(FORMLST,"^",IBDX) Q:IBDF("FORM")=""  I IBDF("FORM")'="" D EN^IBDFDE D
"RTN","IBDFDE7",49,0)
 .I $G(IBDF("NOTHING"))!(IBQUIT) W !! Q
"RTN","IBDFDE7",50,0)
 .D ALLPTS K IBDSEL,IBDPI Q:IBQUIT
"RTN","IBDFDE7",51,0)
 K IBDF("SAVE")
"RTN","IBDFDE7",52,0)
 ;
"RTN","IBDFDE7",53,0)
OVERQ G OVER
"RTN","IBDFDE7",54,0)
 ;
"RTN","IBDFDE7",55,0)
STRTQ D PAUSE^IBDFDE G:IBQUIT END
"RTN","IBDFDE7",56,0)
 G STRT
"RTN","IBDFDE7",57,0)
 ;
"RTN","IBDFDE7",58,0)
ALLPTS ; -- loop through all patients, merge ibdf=^tmp("ibd-save),
"RTN","IBDFDE7",59,0)
 ;    reset dfn, pass data to ibdfrpc4
"RTN","IBDFDE7",60,0)
 N PARAM,FORMID,IBX,NODE
"RTN","IBDFDE7",61,0)
 S FORMID=$P(^IBD(357.96,+IBDF("FORM"),0),"^",4)
"RTN","IBDFDE7",62,0)
 S PARAM=$P($G(^IBD(357.09,1,0)),"^",7)
"RTN","IBDFDE7",63,0)
 I $G(^TMP("IBD-SAVED",$J,"DYNAMIC")) W !!,"Form contains patient specific information, Not available for this option!",!! G ALLPTQ
"RTN","IBDFDE7",64,0)
 S IBDA=IBDSTRT
"RTN","IBDFDE7",65,0)
 F  S IBDA=$O(^TMP("IBD-PL",$J,IBDF("CLINIC"),IBDA)) Q:IBDA=""!(IBQUIT)  D
"RTN","IBDFDE7",66,0)
 .S IBX=IBDA
"RTN","IBDFDE7",67,0)
 .S NODE=$G(^TMP("IBD-PL",$J,IBDF("CLINIC"),IBX))
"RTN","IBDFDE7",68,0)
 .M IBDF=^TMP("IBD-SAVED",$J)
"RTN","IBDFDE7",69,0)
 .S (DFN,IBDF("DFN"))=+NODE
"RTN","IBDFDE7",70,0)
 .S IBDF("SDOE")=$P(NODE,"^",22)
"RTN","IBDFDE7",71,0)
 .S IBDF("FORM")=+$$FID^IBDF18C(DFN,IBDF("APPT"),1,FORMID,IBDF("CLINIC"))
"RTN","IBDFDE7",72,0)
 .W !!,"Check out interview for: ",$P($G(^DPT(DFN,0)),"^")
"RTN","IBDFDE7",73,0)
 .K IBDCO,IBDF("AO"),IBDF("SC"),IBDF("IR"),IBDF("EC"),IBDF("MST")
"RTN","IBDFDE7",74,0)
 .D CHKOUT^IBDFDE0(IBDF("SDOE"))
"RTN","IBDFDE7",75,0)
 .M IBDF=IBDCO
"RTN","IBDFDE7",76,0)
 .D SEND^IBDFRPC4(.RESULT,.IBDF)
"RTN","IBDFDE7",77,0)
 .I PARAM=3 D DISP^IBDFDE1
"RTN","IBDFDE7",78,0)
 .I PARAM,$D(PXCA("ERROR"))!($D(PXCA("WARNING"))) D ERR^IBDFDE1
"RTN","IBDFDE7",79,0)
 .I $P($G(^IBD(357.09,1,0)),"^",6) D MAKAPPT^IBDFDE1
"RTN","IBDFDE7",80,0)
 ;
"RTN","IBDFDE7",81,0)
 K ^TMP("IBD-SAVED",$J)
"RTN","IBDFDE7",82,0)
ALLPTQ Q
"RTN","IBDFDE7",83,0)
 ;
"RTN","IBDFDE7",84,0)
SELAPT(IBDF) ; -- select appointment date/time for a clinic
"RTN","IBDFDE7",85,0)
 N DIR,DA,DR,DIC,DIE,X,Y,ANS,DIRUT
"RTN","IBDFDE7",86,0)
 S ANS=-1
"RTN","IBDFDE7",87,0)
 S DIR(0)="DO^:NOW:AEXRT^D SCRN^IBDFDE7",DIR("A")="Appointment Date/Time"
"RTN","IBDFDE7",88,0)
 S DIR("?")="Enter the date/time for the clinic that you wish to enter encounter forms for.  Appointments must be present to enter the date time."
"RTN","IBDFDE7",89,0)
 S DIR("??")="^D APDT^IBDFDE7"
"RTN","IBDFDE7",90,0)
 D ^DIR K DIR
"RTN","IBDFDE7",91,0)
 I $D(DIRUT) G SELAPQ
"RTN","IBDFDE7",92,0)
 S ANS=+Y
"RTN","IBDFDE7",93,0)
SELAPQ Q ANS
"RTN","IBDFDE7",94,0)
 ;
"RTN","IBDFDE7",95,0)
SCRN ; -- input transform logic for selecting an appointment date/time
"RTN","IBDFDE7",96,0)
 I $G(IBDF("CLINIC"))="" K X
"RTN","IBDFDE7",97,0)
 I '$D(^SC(IBDF("CLINIC"),"S",Y,1)) W $C(7),"??  No appointments that time." K X
"RTN","IBDFDE7",98,0)
 Q
"RTN","IBDFDE7",99,0)
 ;
"RTN","IBDFDE7",100,0)
EXCLUD ; -- select patient(s) to process
"RTN","IBDFDE7",101,0)
 S RESULT=""
"RTN","IBDFDE7",102,0)
 S DIR("?")="Enter the number of the patient to exclude."
"RTN","IBDFDE7",103,0)
 S DIR("??")="^D LIST^IBDFDE6"
"RTN","IBDFDE7",104,0)
 S DIR(0)="FO^1:30",DIR("A")="Exclude Patient"
"RTN","IBDFDE7",105,0)
 I RESULT'="" S DIR("A")="Exclude Another Patient"
"RTN","IBDFDE7",106,0)
 D ^DIR K DIR
"RTN","IBDFDE7",107,0)
 I $D(DTOUT)!($D(DUOUT)) S IBQUIT=1 G EXCLUDQ
"RTN","IBDFDE7",108,0)
 S ANS=Y
"RTN","IBDFDE7",109,0)
 I ANS="" G EXCLUDQ
"RTN","IBDFDE7",110,0)
 I ANS'=+ANS W !,"You must select a number from the list."
"RTN","IBDFDE7",111,0)
 I ANS=+ANS,$D(^TMP("IBD-PL",$J,IBDF("CLINIC"),ANS)) D
"RTN","IBDFDE7",112,0)
 .S RESULT=^TMP("IBD-PL",$J,IBDF("CLINIC"),ANS)
"RTN","IBDFDE7",113,0)
 .K ^TMP("IBD-PL",$J,IBDF("CLINIC"),ANS),^TMP("IBD-PLN",$J,IBDF("CLINIC"),$P($G(^DPT(+RESULT,0)),"^"))
"RTN","IBDFDE7",114,0)
 .W "  ",$P($G(^DPT(+RESULT,0)),"^"),"   ","Excluded!"
"RTN","IBDFDE7",115,0)
 ;
"RTN","IBDFDE7",116,0)
 I '$D(^TMP("IBD-PL",$J,IBDF("CLINIC"))) W !!,"No patients left" S IBQUIT=2 G EXCLUDQ
"RTN","IBDFDE7",117,0)
 ;
"RTN","IBDFDE7",118,0)
 G EXCLUD
"RTN","IBDFDE7",119,0)
EXCLUDQ Q
"RTN","IBDFDE7",120,0)
 ;
"RTN","IBDFDE7",121,0)
BLD ; -- Find all appointments for a date
"RTN","IBDFDE7",122,0)
 K ^TMP("IBD-PL",$J),^TMP("IBD-PLN",$J)
"RTN","IBDFDE7",123,0)
 N SC,IBD,IBD1
"RTN","IBDFDE7",124,0)
 S IBD=IBDFDT,SC=IBDF("CLINIC"),CNT=0
"RTN","IBDFDE7",125,0)
 S IBD1=0 F  S IBD1=$O(^SC(SC,"S",IBD,1,IBD1)) Q:'IBD1  D
"RTN","IBDFDE7",126,0)
 .S NODE=$G(^SC(SC,"S",IBD,1,IBD1,0))
"RTN","IBDFDE7",127,0)
 .S SNODE=$G(^DPT(+NODE,"S",IBD,0))
"RTN","IBDFDE7",128,0)
 .S X=$P(SNODE,"^",2)
"RTN","IBDFDE7",129,0)
 .I X'="","CNAPCA"[X Q  ;inpatient appointments are okay
"RTN","IBDFDE7",130,0)
 .S (DFN,IBDF("DFN"))=+NODE
"RTN","IBDFDE7",131,0)
 .S CNT=CNT+1
"RTN","IBDFDE7",132,0)
 .S ^TMP("IBD-PL",$J,SC,CNT)=DFN_"^"_IBD_"^"_SNODE
"RTN","IBDFDE7",133,0)
 .S ^TMP("IBD-PLN",$J,SC,$P(^DPT(DFN,0),"^"))=DFN_"^"_IBD_"^"_SNODE
"RTN","IBDFDE7",134,0)
 Q
"RTN","IBDFDE7",135,0)
 ;
"RTN","IBDFDE7",136,0)
LIST ; -- print list of patients
"RTN","IBDFDE7",137,0)
 N IBD,IBJ,FORM,STATUS
"RTN","IBDFDE7",138,0)
 S IBD=0 F  S IBD=$O(^TMP("IBD-PL",$J,IBDF("CLINIC"),IBD)) Q:'IBD  D
"RTN","IBDFDE7",139,0)
 .S DFN=+$G(^TMP("IBD-PL",$J,IBDF("CLINIC"),IBD)),APPT=$P($G(^(IBD)),"^",2),SNODE=$P($G(^(IBD)),"^",3,99)
"RTN","IBDFDE7",140,0)
 .S FORM=+$$FINDID^IBDF18C(DFN,APPT,"",1),STATUS="NO FORM PRINTED"
"RTN","IBDFDE7",141,0)
 .I FORM S Y=$P($G(^IBD(357.96,+FORM,0)),"^",11),C=$P(^DD(357.96,.11,0),"^",2) D Y^DIQ S STATUS=Y
"RTN","IBDFDE7",142,0)
 .W !?2,IBD,?5,$E($P(^DPT(DFN,0),"^"),1,20),?29,$P($G(^DPT(DFN,.36)),"^",3),?43,$$FMTE^XLFDT(+APPT),?64,$E($G(STATUS),1,16)
"RTN","IBDFDE7",143,0)
 Q
"RTN","IBDFDE7",144,0)
 ;
"RTN","IBDFDE7",145,0)
APDT ; -- list last 30 days appointment dates in clinic
"RTN","IBDFDE7",146,0)
 S (X,Y)=$$FMADD^XLFDT(DT,-60),CNT=0
"RTN","IBDFDE7",147,0)
 F  S X=$O(^SC(IBDF("CLINIC"),"S",X)) Q:'X!(X>DT)  D
"RTN","IBDFDE7",148,0)
 .S Y=X,CNT=CNT+1
"RTN","IBDFDE7",149,0)
 .I CNT=1 W !!,"The following are valid Appointment date/times in the past 60 days:"
"RTN","IBDFDE7",150,0)
 .W:(CNT#3=1) !,?3,$$FMTE^XLFDT(Y)
"RTN","IBDFDE7",151,0)
 .W:(CNT#3=2) ?30,$$FMTE^XLFDT(Y)
"RTN","IBDFDE7",152,0)
 .W:(CNT#3=0) ?60,$$FMTE^XLFDT(Y)
"RTN","IBDFDE7",153,0)
 Q
"RTN","IBDFDE7",154,0)
 ;
"RTN","IBDFDE7",155,0)
HDR ; -- print Clinic header
"RTN","IBDFDE7",156,0)
 W @IOF
"RTN","IBDFDE7",157,0)
 W !,"      Clinic: ",$E(CLNAME,1,25) W ?40,"       Date: ",$$FMTE^XLFDT(IBDFDT)
"RTN","IBDFDE7",158,0)
 S FORM=$P(CLSETUP,"^",2),IBDFMNME=$P($G(^IBE(357,+FORM,0)),"^")
"RTN","IBDFDE7",159,0)
 W !,"  Basic Form: ",$E(IBDFMNME,1,25) ;W ?40,"Form Status: ",$E(IBDFMSTE,1,25)
"RTN","IBDFDE7",160,0)
 W !,$TR($J(" ",IOM)," ","=")
"RTN","IBDFDE7",161,0)
 Q
"RTN","IBDFDE7",162,0)
 ;
"RTN","IBDFDE7",163,0)
END K I,J,X,Y,DA,DR,DIC,DIE,DIR,DTOUT,DUOUT,DIRUT,IBDSEL,CHOICE,TEXT,TEXTU,RESULT,IBDPI,IBDCO,IBDF,IBDA,SDFN
"RTN","IBDFDE7",164,0)
 K ^TMP("IBD-PL",$J),^TMP("IBD-PLN",$J),^TMP("IBD-SAVED",$J),^TMP("IBD-MORE",$J),^TMP("IBD-PLCHK",$J),^TMP("IBD-PL4",$J),^TMP("IBD-PLB",$J)
"RTN","IBDFDE7",165,0)
 K ^TMP("IBD-ASK",$J),^TMP("IBD-LCODE",$J),^TMP("IBD-LST",$J),^TMP("IBD-LTEXT",$J),^TMP("IBD-OBJ",$J)
"RTN","IBDFDE7",166,0)
 Q
"RTN","IBDFN")
0^5^B49686357
"RTN","IBDFN",1,0)
IBDFN ;ALB/CJM - ENCOUNTER FORM - INTERFACE ROUTINES ;NOV 16,1992
"RTN","IBDFN",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**11,36**;APR 24, 1997
"RTN","IBDFN",3,0)
VADPT ;returns patient demographic data
"RTN","IBDFN",4,0)
 ;input variables - DFN
"RTN","IBDFN",5,0)
 N ARY
"RTN","IBDFN",6,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"",+$G(DFN))"
"RTN","IBDFN",7,0)
 D DEM^VADPT
"RTN","IBDFN",8,0)
 I VAERR S (@ARY@("DPT PATIENT'S NAME"),@ARY@("DPT PATIENT'S DOB/AGE"),@ARY@("DPT PATIENT'S SEX"),@ARY@("DPT PATIENT'S PID"),@ARY@("DPT PATIENT'S MARITAL STATUS"))=""  Q
"RTN","IBDFN",9,0)
 S @ARY@("DPT PATIENT'S NAME")=VADM(1),@ARY@("DPT PATIENT'S SEX")=$P(VADM(5),"^",2)_"^"_$E($P(VADM(5),"^",2)),@ARY@("DPT PATIENT'S DOB/AGE")=$P(VADM(3),"^",2)_"^"_VADM(4),@ARY@("DPT PATIENT'S PID")=VA("PID")
"RTN","IBDFN",10,0)
 S @ARY@("DPT PATIENT'S MARITAL STATUS")=$P(VADM(10),"^",2)
"RTN","IBDFN",11,0)
 S @ARY@("DPT PATIENT'S RACE")=$P(VADM(8),"^",2)
"RTN","IBDFN",12,0)
 S @ARY@("DPT PATIENT'S REMARKS")=$P($G(^DPT(+$G(DFN),0)),"^",10)
"RTN","IBDFN",13,0)
 K VADM,VA,VAERR,VAEL
"RTN","IBDFN",14,0)
 Q
"RTN","IBDFN",15,0)
EMPLMNT ;returns patient's employment status
"RTN","IBDFN",16,0)
 ;input variables - DFN
"RTN","IBDFN",17,0)
 D OPD^VADPT
"RTN","IBDFN",18,0)
 I VAERR S @IBARY=""  Q
"RTN","IBDFN",19,0)
 S @IBARY=$P(VAPD(7),"^",2)
"RTN","IBDFN",20,0)
 K VAPD,VA,VAERR,VAEL
"RTN","IBDFN",21,0)
 Q
"RTN","IBDFN",22,0)
 ;
"RTN","IBDFN",23,0)
DATE(Y) ; Y=date in FM form, this function translates the date to its 
"RTN","IBDFN",24,0)
 ;external form
"RTN","IBDFN",25,0)
 D DD^%DT
"RTN","IBDFN",26,0)
 Q Y
"RTN","IBDFN",27,0)
 Q
"RTN","IBDFN",28,0)
 ;
"RTN","IBDFN",29,0)
ELIG ;for output of eligibility information & service connected conditions
"RTN","IBDFN",30,0)
 N COUNT,ARY,VAEL,VAERR,NODE0,COND,DESCR,PERC,EC,VASV,DATA,I,SARY
"RTN","IBDFN",31,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"",+$G(DFN))"
"RTN","IBDFN",32,0)
 S SARY="^TMP(""IB"",$J,""INTERFACES"")"
"RTN","IBDFN",33,0)
 D ELIG^VADPT
"RTN","IBDFN",34,0)
 I VAERR F I=1:1:6 S VAEL(I)=""
"RTN","IBDFN",35,0)
 S PERC=$P(VAEL(3),"^",2),PERC=$S(PERC="":"",1:$J(PERC,3,0))
"RTN","IBDFN",36,0)
 S @ARY@("DPT PATIENT ELIGIBILITY DATA")=$P(VAEL(1),"^",2)_"^"_$P(VAEL(2),"^",2)_"^"_$S(VAEL(3):"YES",VAEL(3)=0:"NO",1:"")_"^"_$S(VAEL(4):"YES",VAEL(4)=0:"NO",1:"")_"^"_$S(VAEL(5):"YES",VAEL(5)=0:"NO",1:"")_"^"_$P(VAEL(6),"^",2)_"^"_PERC
"RTN","IBDFN",37,0)
 S @ARY@("DPT SC HIDDEN LABELS")=$S(((+VAEL(3))!($O(^DPT(DFN,.372,0)))):"%^% - SERVICE CONNECTED^SERVICE CONNECTED:^SC CONDITIONS:^S/C",1:"  ^  ^  ^  ^  ")
"RTN","IBDFN",38,0)
 I $O(^DPT(DFN,.372,0)),VAEL(4)!$$GET1^DIQ(391,+VAEL(6),.02) S (COUNT,COND)=0 F  S COND=$O(^DPT(DFN,.372,COND)) Q:COND=""  D
"RTN","IBDFN",39,0)
 .S NODE0=$G(^DPT(DFN,.372,COND,0)) Q:'$P(NODE0,"^",3)  S DESCR=$G(^DIC(31,+NODE0,0)),COUNT=COUNT+1
"RTN","IBDFN",40,0)
 .S PERC=$P(NODE0,"^",2),PERC=$S(PERC="":"",1:$J(PERC,3,0))
"RTN","IBDFN",41,0)
 .S @SARY@("DPT PATIENT'S SC CONDITIONS",COUNT)=$S($P(DESCR,"^",4)'="":$P(DESCR,"^",4),1:$P(DESCR,"^",1))_"^"_PERC_"^"_PERC_"%"_"^"_PERC_"%SC"_"^"_PERC_"% - SERVICE CONNECTED"
"RTN","IBDFN",42,0)
 ;
"RTN","IBDFN",43,0)
 ;get service data
"RTN","IBDFN",44,0)
 D SVC^VADPT
"RTN","IBDFN",45,0)
 I VAERR S DATA="^^^^"
"RTN","IBDFN",46,0)
 E  S DATA=$S(VASV(1):"YES",1:"NO")_"^"_$S(VASV(2):"YES",1:"NO")_"^"_$S(VASV(3):"YES",1:"NO")_"^"_$S(VASV(4):"YES",1:"NO")_"^"_$S(VASV(5):"YES",1:"NO")
"RTN","IBDFN",47,0)
 ;
"RTN","IBDFN",48,0)
 ;get the persian gulf indicator - not returned by VADPT
"RTN","IBDFN",49,0)
 S EC=$$EC^SDCO22(DFN,0)
"RTN","IBDFN",50,0)
 ;S EC=$P($G(^DPT(DFN,.322)),"^",13)
"RTN","IBDFN",51,0)
 S @ARY@("DPT SERVICE HISTORY RELATED DATA")=DATA_"^"_$S(EC=1:"YES",1:"NO")
"RTN","IBDFN",52,0)
 ;
"RTN","IBDFN",53,0)
 ;displays questions concerning treatment related to service only
"RTN","IBDFN",54,0)
 ;if they apply
"RTN","IBDFN",55,0)
 ;
"RTN","IBDFN",56,0)
 S DATA=$S(VAEL(3):"Was treatment for a SC condition? __ YES __ NO",1:"")_"^"
"RTN","IBDFN",57,0)
 S DATA=DATA_$S(VASV(2):"Was treatment related to exposure to Agent Orange? __ YES __ NO",1:"")_"^"
"RTN","IBDFN",58,0)
 S DATA=DATA_$S(VASV(3):"Was treatment related to exposure to Ionization Radiation? __ YES __ NO",1:"")
"RTN","IBDFN",59,0)
 S @ARY@("DPT SC TREATMENT QUESTIONS")=DATA
"RTN","IBDFN",60,0)
 ;
"RTN","IBDFN",61,0)
 ;note: must store the 4th question in an annex node
"RTN","IBDFN",62,0)
 S DATA="^^^"_$S(EC=1:"Was treatment related to exposure to Environmental Contaminants? __ YES __ NO",1:"")_"^"
"RTN","IBDFN",63,0)
 I VASV(2)!VASV(3)!(EC=1) D
"RTN","IBDFN",64,0)
 .S DATA=DATA_"Was treatment related to: "_$S(VASV(2):"AO __ ",1:"")_$S(VASV(3):"IR __ ",1:"")_$S(EC=1:"EC __ ",1:"")
"RTN","IBDFN",65,0)
 S @ARY@("DPT SC TREATMENT QUESTIONS",1)=DATA
"RTN","IBDFN",66,0)
 Q
"RTN","IBDFN",67,0)
 ;
"RTN","IBDFN",68,0)
BLANKS ;returns NOTHING for printing blank lines
"RTN","IBDFN",69,0)
 S @IBARY=""
"RTN","IBDFN",70,0)
 Q
"RTN","IBDFN",71,0)
LABELS ;returns NOTHING for printing labels only, ie, no data
"RTN","IBDFN",72,0)
 S @IBARY=""
"RTN","IBDFN",73,0)
 Q
"RTN","IBDFN",74,0)
ELIG1 ;for output of hidden service connected conditions
"RTN","IBDFN",75,0)
 N COUNT,ARY,VAEL,VAERR,VASV,EC
"RTN","IBDFN",76,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"")",COUNT=0
"RTN","IBDFN",77,0)
 D ELIG^VADPT
"RTN","IBDFN",78,0)
 I 'VAERR,(VAEL(3)) S COUNT=COUNT+1,@ARY@("DPT SC HIDDEN TREATMENT QUESTIONS",COUNT)="SC^Was treatment for an SC condition?"
"RTN","IBDFN",79,0)
 ;
"RTN","IBDFN",80,0)
 ;get service data
"RTN","IBDFN",81,0)
 D SVC^VADPT
"RTN","IBDFN",82,0)
 I 'VAERR D
"RTN","IBDFN",83,0)
 .I VASV(2) S COUNT=COUNT+1,@ARY@("DPT SC HIDDEN TREATMENT QUESTIONS",COUNT)="AO^Was treatment related to exposure to Agent Orange?"
"RTN","IBDFN",84,0)
 .I VASV(3) S COUNT=COUNT+1,@ARY@("DPT SC HIDDEN TREATMENT QUESTIONS",COUNT)="IR^Was treatment related to exposure to Ionization Radiation?"
"RTN","IBDFN",85,0)
 ;
"RTN","IBDFN",86,0)
 ;get the persian gulf indicator - not returned by VADPT
"RTN","IBDFN",87,0)
 ;S EC=$P($G(^DPT(DFN,.322)),"^",13)
"RTN","IBDFN",88,0)
 I $$EC^SDCO22(DFN,0) S COUNT=COUNT+1,@ARY@("DPT SC HIDDEN TREATMENT QUESTIONS",COUNT)="EC^Was treatment related to exposure to Environmental Contaminants?"
"RTN","IBDFN",89,0)
 Q
"RTN","IBDFN",90,0)
 ;
"RTN","IBDFN",91,0)
ELIG2 ; -- for output of hidden classification questions
"RTN","IBDFN",92,0)
 N COUNT,ARY
"RTN","IBDFN",93,0)
 I $G(IBCLINIC) I '$$REQ^IBDFDE0(DFN,IBAPPT,IBCLINIC,0) Q
"RTN","IBDFN",94,0)
 ;
"RTN","IBDFN",95,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"")",COUNT=0
"RTN","IBDFN",96,0)
 ;
"RTN","IBDFN",97,0)
 I $$SC^SDCO22(DFN,0) D SETARY(ARY,.COUNT,"SC^Was treatment for an SC condition?")
"RTN","IBDFN",98,0)
 I $$AO^SDCO22(DFN,0) D SETARY(ARY,.COUNT,"AO^Was treatment related to exposure to Agent Orange?")
"RTN","IBDFN",99,0)
 I $$IR^SDCO22(DFN,0) D SETARY(ARY,.COUNT,"IR^Was treatment related to exposure to Ionization Radiation?")
"RTN","IBDFN",100,0)
 I $$EC^SDCO22(DFN,0) D SETARY(ARY,.COUNT,"EC^Was treatment related to exposure to Environmental Contaminants?")
"RTN","IBDFN",101,0)
 ;
"RTN","IBDFN",102,0)
ELIG2Q Q
"RTN","IBDFN",103,0)
 ;
"RTN","IBDFN",104,0)
SETARY(ARY,CNT,TEXT) ; -- build array
"RTN","IBDFN",105,0)
 S CNT=CNT+1
"RTN","IBDFN",106,0)
 S @ARY@("DPT SC HIDDEN TREATMENT QUESTIONS",CNT)=TEXT
"RTN","IBDFN",107,0)
 Q
"RTN","IBDFN",108,0)
 ;
"RTN","IBDFN",109,0)
ELIGMST ;-- Adds the MST indicator to existing hidden classification questions
"RTN","IBDFN",110,0)
 ;   (patch IBD*3*36)
"RTN","IBDFN",111,0)
 ;
"RTN","IBDFN",112,0)
 N ARY,DATA,MST,MSTSTAT
"RTN","IBDFN",113,0)
 D ELIG
"RTN","IBDFN",114,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"",+$G(DFN))"
"RTN","IBDFN",115,0)
 S MST=$$MST^SDCO22(DFN,0)
"RTN","IBDFN",116,0)
 S MSTSTAT=$P($$GETSTAT^DGMSTAPI(DFN),"^",2),MSTSTAT=$S(MSTSTAT="Y":"YES",MSTSTAT="N":"NO",MSTSTAT="U":"UNKNOWN",MSTSTAT="D":"DECLINED",1:"")
"RTN","IBDFN",117,0)
 I $D(@ARY@("DPT SERVICE HISTORY RELATED DATA")) S @ARY@("DPT SERVICE HISTORY RELATED DATA (MST)")=$G(@ARY@("DPT SERVICE HISTORY RELATED DATA"))_"^"_MSTSTAT
"RTN","IBDFN",118,0)
 ;
"RTN","IBDFN",119,0)
 I $D(@ARY@("DPT SC TREATMENT QUESTIONS")) S @ARY@("DPT SC TREATMENT QUESTIONS (MST)")=$G(@ARY@("DPT SC TREATMENT QUESTIONS"))
"RTN","IBDFN",120,0)
 I $D(@ARY@("DPT SC TREATMENT QUESTIONS",1)) D
"RTN","IBDFN",121,0)
 . S DATA=$G(@ARY@("DPT SC TREATMENT QUESTIONS",1))
"RTN","IBDFN",122,0)
 . I MST D
"RTN","IBDFN",123,0)
 .. S DATA=DATA_$S($L($P(DATA,"^",5))>1:"MST __",1:"Was treatment related to: MST __")
"RTN","IBDFN",124,0)
 .. S $P(DATA,"^",6)=$S(MST:"Was treatment related to MST? __ YES __ NO",1:"")
"RTN","IBDFN",125,0)
 . S @ARY@("DPT SC TREATMENT QUESTIONS (MST)",1)=DATA
"RTN","IBDFN",126,0)
 Q
"RTN","IBDFN",127,0)
 ;
"RTN","IBDFN",128,0)
ELIG1MST ;-- Similar to ELIG1 but adds MST indicator (if applicable) to hidden classification questions array
"RTN","IBDFN",129,0)
 ;
"RTN","IBDFN",130,0)
 K ^TMP("IB",$J,"INTERFACES","DPT SC HIDDEN TREATMENT QUESTIONS")
"RTN","IBDFN",131,0)
 K ^TMP("IB",$J,"INTERFACES","DPT SC HIDDEN TREATMENT QUESTIONS (MST)")
"RTN","IBDFN",132,0)
 D ELIG1
"RTN","IBDFN",133,0)
 D ELIGSET
"RTN","IBDFN",134,0)
 Q
"RTN","IBDFN",135,0)
 ;
"RTN","IBDFN",136,0)
ELIG2MST ;-- Similar to ELIG2 but adds MST indicator (if applicable) to hidden classification questions array
"RTN","IBDFN",137,0)
 ;
"RTN","IBDFN",138,0)
 K ^TMP("IB",$J,"INTERFACES","DPT SC HIDDEN TREATMENT QUESTIONS")
"RTN","IBDFN",139,0)
 K ^TMP("IB",$J,"INTERFACES","DPT SC HIDDEN TREATMENT QUESTIONS (MST)")
"RTN","IBDFN",140,0)
 D ELIG2
"RTN","IBDFN",141,0)
 D ELIGSET
"RTN","IBDFN",142,0)
 Q
"RTN","IBDFN",143,0)
 ;
"RTN","IBDFN",144,0)
ELIGSET ;-- Checks for MST and adds MST question to hidden classification array
"RTN","IBDFN",145,0)
 ;
"RTN","IBDFN",146,0)
 N ARY,COUNT,I
"RTN","IBDFN",147,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"")"
"RTN","IBDFN",148,0)
 S (COUNT,I)=0
"RTN","IBDFN",149,0)
 M @ARY@("DPT SC HIDDEN TREATMENT QUESTIONS (MST)")=@ARY@("DPT SC HIDDEN TREATMENT QUESTIONS")
"RTN","IBDFN",150,0)
 I $$MST^SDCO22(DFN,0) D
"RTN","IBDFN",151,0)
 . F  S I=$O(@ARY@("DPT SC HIDDEN TREATMENT QUESTIONS (MST)",I)) Q:'I  S COUNT=I
"RTN","IBDFN",152,0)
 . S COUNT=COUNT+1,@ARY@("DPT SC HIDDEN TREATMENT QUESTIONS (MST)",COUNT)="MST^Was treatment related to MST?  (Ask provider only)"
"RTN","IBDFN",153,0)
 Q
"RTN","IBDFN2")
0^8^B24200371
"RTN","IBDFN2",1,0)
IBDFN2 ;ALB/CJM - ENCOUNTER FORM - INTERFACE ROUTINES ;NOV 16,1992
"RTN","IBDFN2",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**29,31,36**;APR 24, 1997
"RTN","IBDFN2",3,0)
APPT ;returns appt date@time^date^time
"RTN","IBDFN2",4,0)
 N Y
"RTN","IBDFN2",5,0)
 S Y="" I IBAPPT S Y=IBAPPT K %DT D DD^%DT
"RTN","IBDFN2",6,0)
 S @IBARY=Y_"^"_$P(Y,"@")_"^"_$P(Y,"@",2)
"RTN","IBDFN2",7,0)
 Q
"RTN","IBDFN2",8,0)
NOW ;returns date and time
"RTN","IBDFN2",9,0)
 ;FORMATS:
"RTN","IBDFN2",10,0)
 ; MMM DD, YYYY@HH:MM:SS at the "IB DATE@TIME" subscript
"RTN","IBDFN2",11,0)
 ; MMM DD,YYYY at the "IB DATE" subscript
"RTN","IBDFN2",12,0)
 ; HH:MM:SS at the "IB TIME" subscript      
"RTN","IBDFN2",13,0)
 N Y,%,%H,%I,X
"RTN","IBDFN2",14,0)
 D NOW^%DTC S Y=% K %DT D DD^%DT
"RTN","IBDFN2",15,0)
 S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"IB CURRENT DATE@TIME")=Y
"RTN","IBDFN2",16,0)
 S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"IB CURRENT TIME")=$P(Y,"@",2)
"RTN","IBDFN2",17,0)
 S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"IB CURRENT DATE")=$P(Y,"@")
"RTN","IBDFN2",18,0)
 Q
"RTN","IBDFN2",19,0)
 ;
"RTN","IBDFN2",20,0)
SPSEMPLR ;returns spouse's employer,address, telephone
"RTN","IBDFN2",21,0)
 ;input variables - DFN
"RTN","IBDFN2",22,0)
 N ARY,CNT S CNT=1
"RTN","IBDFN2",23,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"",+$G(DFN))"
"RTN","IBDFN2",24,0)
 S VAOA("A")=6 D OAD^VADPT
"RTN","IBDFN2",25,0)
 I VAERR S (@ARY@("DPT SPOUSE'S EMPLOYER NAME"),@ARY@("DPT SPOUSE'S EMPLOYER TELEPHONE"),@ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES"))=""  Q
"RTN","IBDFN2",26,0)
 I VAOA(1)'="" S @ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES",CNT)=VAOA(1),CNT=CNT+1
"RTN","IBDFN2",27,0)
 I VAOA(2)'="" S @ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES",CNT)=VAOA(2),CNT=CNT+1
"RTN","IBDFN2",28,0)
 I VAOA(3)'="" S @ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES",CNT)=VAOA(3),CNT=CNT+1
"RTN","IBDFN2",29,0)
 S @ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES",CNT)=VAOA(4)_", "_$P(VAOA(5),"^",2)_" "_VAOA(6)
"RTN","IBDFN2",30,0)
 S @ARY@("DPT SPOUSE'S EMPLOYER TELEPHONE")=VAOA(8)
"RTN","IBDFN2",31,0)
 S @ARY@("DPT SPOUSE'S EMPLOYER NAME")=VAOA(9)
"RTN","IBDFN2",32,0)
 K VAOA,VAERR
"RTN","IBDFN2",33,0)
 Q
"RTN","IBDFN2",34,0)
EMPLOYER ;returns employer,address, telephone
"RTN","IBDFN2",35,0)
 ;input variables - DFN
"RTN","IBDFN2",36,0)
 N ARY,CNT S CNT=1
"RTN","IBDFN2",37,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"",DFN)"
"RTN","IBDFN2",38,0)
 S VAOA("A")=5 D OAD^VADPT
"RTN","IBDFN2",39,0)
 I VAERR S (@ARY@("DPT PATIENT'S EMPLOYER NAME"),@ARY@("DPT PATIENT'S EMPLOYER TELEPHONE"),@ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES"))=""  Q
"RTN","IBDFN2",40,0)
 I VAOA(1)'="" S @ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES",CNT)=VAOA(1),CNT=CNT+1
"RTN","IBDFN2",41,0)
 I VAOA(2)'="" S @ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES",CNT)=VAOA(2),CNT=CNT+1
"RTN","IBDFN2",42,0)
 I VAOA(3)'="" S @ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES",CNT)=VAOA(3),CNT=CNT+1
"RTN","IBDFN2",43,0)
 S @ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES",CNT)=VAOA(4)_", "_$P(VAOA(5),"^",2)_" "_VAOA(6)
"RTN","IBDFN2",44,0)
 S @ARY@("DPT PATIENT'S EMPLOYER TELEPHONE")=VAOA(8)
"RTN","IBDFN2",45,0)
 S @ARY@("DPT PATIENT'S EMPLOYER NAME")=VAOA(9)
"RTN","IBDFN2",46,0)
 K VAOA,VAERR
"RTN","IBDFN2",47,0)
 Q
"RTN","IBDFN2",48,0)
MT ;returns means test data
"RTN","IBDFN2",49,0)
 N Y,RET,GET
"RTN","IBDFN2",50,0)
 S GET=$$LST^DGMTU(DFN)
"RTN","IBDFN2",51,0)
 S RET=$P(GET,"^",3)_"^"
"RTN","IBDFN2",52,0)
 S Y=$P(GET,"^",2) D DD^%DT
"RTN","IBDFN2",53,0)
 S RET=RET_Y_"^"_$P(GET,"^",4)
"RTN","IBDFN2",54,0)
 S @IBARY=RET
"RTN","IBDFN2",55,0)
 Q
"RTN","IBDFN2",56,0)
ALLERGY ;outputs a list of the patient's allergies
"RTN","IBDFN2",57,0)
 ;piece #1=allergy name,#2=type of allergy(FOOD/DRUG/OTHER),#3=type of allergy(F/D/O),#4=VERFIED?(YES/NO),#5=TRUE ALLERGEN(YES/NO)
"RTN","IBDFN2",58,0)
 N GMRA,GMRAL,NODE,I,COUNT,TYPE
"RTN","IBDFN2",59,0)
 D:$L($T(GMRADPT^GMRADPT)) ^GMRADPT
"RTN","IBDFN2",60,0)
 I GMRAL=0 S COUNT=1,@IBARY@(COUNT)="NKA" Q
"RTN","IBDFN2",61,0)
 S (COUNT,I)=0 F  S I=$O(GMRAL(I)) Q:'I  D
"RTN","IBDFN2",62,0)
 .S COUNT=COUNT+1
"RTN","IBDFN2",63,0)
 .S NODE=$G(GMRAL(I))
"RTN","IBDFN2",64,0)
 .S TYPE=$P(NODE,"^",3)
"RTN","IBDFN2",65,0)
 .S @IBARY@(COUNT)=$P(NODE,"^",2)_"^"_$S(TYPE="D":"DRUG",TYPE="F":"FOOD",TYPE="O":"OTHER",1:"")_"^"_TYPE_"^"_$S($P(NODE,"^",4)=1:"YES",1:"NO")_"^"_$S($P(NODE,"^",5)=0:"YES",$P(NODE,"^",5)=1:"NO",1:"")
"RTN","IBDFN2",66,0)
 Q
"RTN","IBDFN2",67,0)
 ;
"RTN","IBDFN2",68,0)
PRMT ; -- print a 1010f if required or will expire in 357.09;.1 days
"RTN","IBDFN2",69,0)
 ;    called from print manger
"RTN","IBDFN2",70,0)
 ;    requires dfn, ibappt=appointment date
"RTN","IBDFN2",71,0)
 ;
"RTN","IBDFN2",72,0)
 N IBDMT,IBDMT1,IBDMT2,DGMTI,DGMTDT,DGMTYPT,DGOPT
"RTN","IBDFN2",73,0)
 S IBDMT1=$$LST^DGMTU(DFN,DT,1) ; means test
"RTN","IBDFN2",74,0)
 S IBDMT2=$$LST^DGMTU(DFN,DT,2) ; copay test
"RTN","IBDFN2",75,0)
 I IBDMT2="",IBDMT1="" G PRMTQ
"RTN","IBDFN2",76,0)
 S IBDMT=$S(IBDMT2="":IBDMT1,IBDMT1="":IBDMT2,$P(IBDMT1,"^",2)'<$P(IBDMT2,"^",2):IBDMT1,1:IBDMT2)
"RTN","IBDFN2",77,0)
 S DGMTYPT=$S(IBDMT=IBDMT2:2,1:1) ; set type of test
"RTN","IBDFN2",78,0)
 S DGMTI=+IBDMT,DGMTDT=$P(IBDMT,"^",2)
"RTN","IBDFN2",79,0)
 S DGOPT=1 ;pretend were from registration, don't close device when done
"RTN","IBDFN2",80,0)
 S STATUS=$P(IBDMT,"^",4)
"RTN","IBDFN2",81,0)
 I $S(STATUS="R":0,STATUS="N":1,STATUS="L":1,STATUS="I":0,$$FMDIFF^XLFDT(IBAPPT,DGMTDT,1)>(365-$S($P($G(^IBD(357.09,1,0)),"^",10):$P(^(0),"^",10),1:30)):0,1:1) G PRMTQ ;not required within params
"RTN","IBDFN2",82,0)
 ;
"RTN","IBDFN2",83,0)
 I STATUS="R" D GETMT I IBDMT1="" Q
"RTN","IBDFN2",84,0)
 D START^DGMTP
"RTN","IBDFN2",85,0)
PRMTQ Q
"RTN","IBDFN2",86,0)
 ;
"RTN","IBDFN2",87,0)
GETMT ;Since status is required find last valid means test
"RTN","IBDFN2",88,0)
 ;
"RTN","IBDFN2",89,0)
 S IBDMT=$$LVMT^DGMTU(DFN,DT) ; means test
"RTN","IBDFN2",90,0)
 S DGMTYPT=1 ; set type of test
"RTN","IBDFN2",91,0)
 S DGMTI=+IBDMT,DGMTDT=$P(IBDMT,"^",2)
"RTN","IBDFN2",92,0)
 Q
"RTN","IBDFN2",93,0)
 ;
"RTN","IBDFN2",94,0)
 ;
"RTN","IBDFN2",95,0)
MSTSTAT ;-- Get patient's MST status for EF display block
"RTN","IBDFN2",96,0)
 ;     Input: 
"RTN","IBDFN2",97,0)
 ;       DFN
"RTN","IBDFN2",98,0)
 ;
"RTN","IBDFN2",99,0)
 ;    Output: 
"RTN","IBDFN2",100,0)
 ;       Calls API $$GETSTAT^DGMSTAPI(DFN):
"RTN","IBDFN2",101,0)
 ;         Piece 1 -- MST Status Code (Y, N, D, or U)
"RTN","IBDFN2",102,0)
 ;         Piece 2 -- MST Status Description
"RTN","IBDFN2",103,0)
 ;
"RTN","IBDFN2",104,0)
 N ARY,MST
"RTN","IBDFN2",105,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"",DFN)"
"RTN","IBDFN2",106,0)
 I '$G(DFN) Q
"RTN","IBDFN2",107,0)
 S MST=$$GETSTAT^DGMSTAPI(DFN)
"RTN","IBDFN2",108,0)
 I +MST=0!(+MST>0) S @ARY@("DGMST STATUS")=$P(MST,"^",2)_"^"_$S(+MST>0:$P(MST,"^",6),1:"Unknown, not screened")
"RTN","IBDFN2",109,0)
 Q
"RTN","IBDFN2",110,0)
 ;
"RTN","IBDFN2",111,0)
 ;
"RTN","IBDFN2",112,0)
ASKMST ;-- Ask if patient's treatment is related to SC and MST (if applicable)
"RTN","IBDFN2",113,0)
 ;
"RTN","IBDFN2",114,0)
 N ARY,COUNT
"RTN","IBDFN2",115,0)
 Q:'$G(DFN)
"RTN","IBDFN2",116,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"")"
"RTN","IBDFN2",117,0)
 S COUNT=1
"RTN","IBDFN2",118,0)
 I $$SC^SDCO22(DFN,0) S @ARY@("DGMST SELECT MST CLASSIFICATN",COUNT)="SC^Was treatment for an SC condition?",COUNT=COUNT+1
"RTN","IBDFN2",119,0)
 I $$MST^SDCO22(DFN,0) S @ARY@("DGMST SELECT MST CLASSIFICATN",COUNT)="MST^Was treatment related to MST?  (Ask provider only)"
"RTN","IBDFN2",120,0)
 Q
"RTN","IBDFN9")
0^6^B613468
"RTN","IBDFN9",1,0)
IBDFN9 ;ALB/CJM - ENCOUNTER FORM - output transforms for data ;MAY 10, 1995
"RTN","IBDFN9",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**38,36**;APR 24, 1997
"RTN","IBDFN9",3,0)
 ;
"RTN","IBDFN9",4,0)
DSPLYCPT(IEN) ;output transform for CPT codes (file #81)
"RTN","IBDFN9",5,0)
 ;example of use: S Y=$$DSPLYCPT^IBDFN9(Y)
"RTN","IBDFN9",6,0)
 ;;change to api cpt;dhh
"RTN","IBDFN9",7,0)
 N CODE
"RTN","IBDFN9",8,0)
 S CODE=$$CPT^ICPTCOD(IEN)
"RTN","IBDFN9",9,0)
 I +CODE=-1 S CODE=""
"RTN","IBDFN9",10,0)
 E  S CODE=$P(CODE,U,2)
"RTN","IBDFN9",11,0)
 Q CODE
"RTN","IBDFN9",12,0)
 ;
"RTN","IBDFN9",13,0)
DSPLYICD(IEN) ;output transform for ICD9 codes (file #80)
"RTN","IBDFN9",14,0)
 ;example of use: S Y=$$DSPLYICD^IBDFN9(Y)
"RTN","IBDFN9",15,0)
 Q $P($G(^ICD9(+$G(IEN),0)),"^")
"RTN","IBDFN9",16,0)
 ;
"RTN","IBDFN9",17,0)
DSPLYPRV(IEN) ;output transform for provider (file #200)
"RTN","IBDFN9",18,0)
 ;example of use: S Y=$$DSPLYPRV^IBDFN9(Y)
"RTN","IBDFN9",19,0)
 Q $P($G(^VA(200,+$G(IEN),0)),"^")
"RTN","IBDFN9",20,0)
 ;
"RTN","IBDFN9",21,0)
DSPLYYN(Y) ;changes 1 to YES and 0 or "" to NO
"RTN","IBDFN9",22,0)
 Q:Y=1 "YES"
"RTN","IBDFN9",23,0)
 Q:(Y=0)!(Y="") "NO"
"RTN","IBDFN9",24,0)
 Q " "
"RTN","IBDFN9",25,0)
VARVAL(Y) ;determines PCE DIM NODE VALUE
"RTN","IBDFN9",26,0)
 Q:'$D(Y) ""
"RTN","IBDFN9",27,0)
 Q $S(Y="SC":6,Y="AO":7,Y="IR":8,Y="EC":9,Y="MST":10,1:"")
"RTN","IBDFRPC4")
0^4^B16376153
"RTN","IBDFRPC4",1,0)
IBDFRPC4 ;ALB/AAS - AICS Pass data to PCE, Broker Call ; 24-FEB-96
"RTN","IBDFRPC4",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**38,36**;APR 24, 1997
"RTN","IBDFRPC4",3,0)
 ;
"RTN","IBDFRPC4",4,0)
 ; -- used by AICS Data Entry System, routine IBDFDE1
"RTN","IBDFRPC4",5,0)
 ;
"RTN","IBDFRPC4",6,0)
SEND(RESULT,IBDF) ; -- procedure
"RTN","IBDFRPC4",7,0)
 ; -- broker call to set data into pxca array and send to pce
"RTN","IBDFRPC4",8,0)
 ;    rpc  := IBD RECEIVE DATA
"RTN","IBDFRPC4",9,0)
 ;
"RTN","IBDFRPC4",10,0)
 ; -- input:      Result := passed by reference, see output
"RTN","IBDFRPC4",11,0)
 ;            ibdf(text) := contains data about visit, plus checkout defined as follows:
"RTN","IBDFRPC4",12,0)
 ;          ibdf("appt") := appointment data/time
"RTN","IBDFRPC4",13,0)
 ;        ibdf("clinic") := clinic, pointer to file 44
"RTN","IBDFRPC4",14,0)
 ;           ibdf("dfn") := patient, pointer to file 2
"RTN","IBDFRPC4",15,0)
 ;          ibdf("form") := encounter form ID, pointer to file 357.96
"RTN","IBDFRPC4",16,0)
 ;        ibdf("frmdef") := form definition, pointer to 357.95
"RTN","IBDFRPC4",17,0)
 ;       ibdf("foregnd") := pass data in foreground, show results
"RTN","IBDFRPC4",18,0)
 ;       ibdf("backgnd") := pass data in background, don't show results
"RTN","IBDFRPC4",19,0)
 ;
"RTN","IBDFRPC4",20,0)
 ;            ibdf("co") := check out date/time
"RTN","IBDFRPC4",21,0)
 ;            ibdf("sc") := is visit for service connected condition
"RTN","IBDFRPC4",22,0)
 ;            ibdf("ao") := is visit related to Agent orange
"RTN","IBDFRPC4",23,0)
 ;            ibdf("ir") := is visit related to ionizing radiation
"RTN","IBDFRPC4",24,0)
 ;            ibdf("ec") := is visit related to environmental contam.
"RTN","IBDFRPC4",25,0)
 ;            ibdf("mst"):= is visit related to Military Sexual Trauma
"RTN","IBDFRPC4",26,0)
 ;
"RTN","IBDFRPC4",27,0)
 ;               ibdf(n) := where n>0 are user selections as follows:
"RTN","IBDFRPC4",28,0)
 ;                   $p1 := package interface, pointer to file 357.6
"RTN","IBDFRPC4",29,0)
 ;                   $p2 := value to send
"RTN","IBDFRPC4",30,0)
 ;                   $p3 := display text
"RTN","IBDFRPC4",31,0)
 ;                   $p4 := header to send
"RTN","IBDFRPC4",32,0)
 ;                   $p5 := clin lexicon pointer
"RTN","IBDFRPC4",33,0)
 ;                   $p6 := qualifier
"RTN","IBDFRPC4",34,0)
 ;                   $p7 := ien of inteface
"RTN","IBDFRPC4",35,0)
 ;                   $p8 := vitals type (.01 field in 359.1)
"RTN","IBDFRPC4",36,0)
 ;                   $p9 := quantity
"RTN","IBDFRPC4",37,0)
 ;                      
"RTN","IBDFRPC4",38,0)
 N I,J,X,Y,D,D0,D1,D2,DA,DIC,DIE,DR,TNODE,FID,FORMID,NODE,VALUE,PI,TEXT,SUBHDR,HEADER,TYPE,QLFR,ITEM,PROVIDER,PXKDONE,STATUS,VSIT,QUANTITY,SDFN
"RTN","IBDFRPC4",39,0)
 S RESULT="-1^No data passed"
"RTN","IBDFRPC4",40,0)
 ;
"RTN","IBDFRPC4",41,0)
 K PXCA
"RTN","IBDFRPC4",42,0)
 S (PXCA,PXCASTAT)=""
"RTN","IBDFRPC4",43,0)
 ;
"RTN","IBDFRPC4",44,0)
 ; -- check form,frmdef and appt/clinic.  Need one or the other
"RTN","IBDFRPC4",45,0)
 S TNODE=$G(^IBD(357.96,+$G(IBDF("FORM")),0))
"RTN","IBDFRPC4",46,0)
 S:'$G(IBDF("DFN")) IBDF("DFN")=$P(TNODE,"^",2)
"RTN","IBDFRPC4",47,0)
 S:'$G(IBDF("APPT")) IBDF("APPT")=$P(TNODE,"^",3)
"RTN","IBDFRPC4",48,0)
 S:'$G(IBDF("FRMDEF")) IBDF("FRMDEF")=$P(TNODE,"^",4)
"RTN","IBDFRPC4",49,0)
 S:'$G(IBDF("CLINIC")) IBDF("CLINIC")=$P(TNODE,"^",10)
"RTN","IBDFRPC4",50,0)
 ;
"RTN","IBDFRPC4",51,0)
 I '$G(IBDF("DFN"))!('$G(IBDF("APPT")))!('$G(IBDF("CLINIC"))) D  G END
"RTN","IBDFRPC4",52,0)
 . I $G(IBDF("FORM")) S STATUS=$$FSCND^IBDF18C(+IBDF("FORM"),12)
"RTN","IBDFRPC4",53,0)
 . S RESULT="-1^Critical information for processing missing"
"RTN","IBDFRPC4",54,0)
 ;
"RTN","IBDFRPC4",55,0)
 ; -- log manual data entry attempt in form tracking
"RTN","IBDFRPC4",56,0)
 S STATUS=$$FSCND^IBDF18C(IBDF("FORM"),5)
"RTN","IBDFRPC4",57,0)
 ;
"RTN","IBDFRPC4",58,0)
 ; -- build the encounter node and source node from form tracking
"RTN","IBDFRPC4",59,0)
 S PXCA("ENCOUNTER")=$G(IBDF("APPT"))_"^"_$G(IBDF("DFN"))_"^"_$G(IBDF("CLINIC"))_"^^^"_$G(IBDF("SC"))_"^"_$G(IBDF("AO"))_"^"_$G(IBDF("IR"))_"^"_$G(IBDF("EC"))_"^"_$G(IBDF("MST"))_"^^^^"_$G(IBDF("CO"))
"RTN","IBDFRPC4",60,0)
 S PXCA("SOURCE")="1^"_DUZ_"^"_$G(IBDF("FRMDEF"))_"^^"_$G(IBDF("FORM"))
"RTN","IBDFRPC4",61,0)
 ;
"RTN","IBDFRPC4",62,0)
 ; -- process data in ibdf(n) nodes
"RTN","IBDFRPC4",63,0)
 S FORMID=IBDF("FORM")
"RTN","IBDFRPC4",64,0)
 S FID=0 F  S FID=$O(IBDF(FID)) Q:'FID  S NODE=$G(IBDF(FID)) D
"RTN","IBDFRPC4",65,0)
 .N VALUE,PI,TEXT,SUBHDR,HEADER,TYPE,QLFR,ITEM,DELEX,QUANTITY
"RTN","IBDFRPC4",66,0)
 .I NODE="" D LOGERR^IBDF18E2(3570002,.FORMID,FID) Q
"RTN","IBDFRPC4",67,0)
 .S PI=$P(NODE,"^")
"RTN","IBDFRPC4",68,0)
 .S VALUE=$$INPUT(PI,$P(NODE,"^",2))
"RTN","IBDFRPC4",69,0)
 .S TEXT=$P(NODE,"^",3)
"RTN","IBDFRPC4",70,0)
 .S (SUBHDR,HEADER)=$E($P(NODE,"^",4),1,80)
"RTN","IBDFRPC4",71,0)
 .I $L(SUBHDR),$L(SUBHDR)<2 S (SUBHDR,HEADER)=""
"RTN","IBDFRPC4",72,0)
 .;I $L(SUBHDR),($L(SUBHDR)+$L(TEXT)<80) S TEXT=SUBHDR_" "_TEXT
"RTN","IBDFRPC4",73,0)
 .S QLFR=$P(NODE,"^",6) S:QLFR'="" QLFR=$O(^IBD(357.98,"B",QLFR,0))
"RTN","IBDFRPC4",74,0)
 .S TYPE=+$$TYPE($P(NODE,"^",8))
"RTN","IBDFRPC4",75,0)
 .S ITEM=FID
"RTN","IBDFRPC4",76,0)
 .S DELEX=$P(NODE,"^",5)
"RTN","IBDFRPC4",77,0)
 .S QUANTITY=$P(NODE,"^",9)
"RTN","IBDFRPC4",78,0)
 .S SLCTN=$P(NODE,"^",12)
"RTN","IBDFRPC4",79,0)
 .D SETTEMP^IBDF18E1
"RTN","IBDFRPC4",80,0)
 .Q
"RTN","IBDFRPC4",81,0)
 ;
"RTN","IBDFRPC4",82,0)
 ; --added to copy visit modifiers
"RTN","IBDFRPC4",83,0)
 ;
"RTN","IBDFRPC4",84,0)
 D:$D(TEMP("ENCOUNTER")) VSTPXCA^IBDF18E0
"RTN","IBDFRPC4",85,0)
 ;
"RTN","IBDFRPC4",86,0)
 D SETPXCA^IBDF18E0,PRO^IBDF18E0
"RTN","IBDFRPC4",87,0)
 ;
"RTN","IBDFRPC4",88,0)
 S IBDF("PASSFLAG")=+$P($G(^IBD(357.09,1,0)),"^",7)
"RTN","IBDFRPC4",89,0)
 S IBD("AICS")=1 ;flag for IBDF PCE EVENT protocal
"RTN","IBDFRPC4",90,0)
 ;
"RTN","IBDFRPC4",91,0)
 ;I $G(IBDF("PASSFLAG"))<1 D BACKGND^PXCA(.PXCA,.PXCASTAT)
"RTN","IBDFRPC4",92,0)
 ;I $G(IBDF("PASSFLAG"))=1 D VALIDATE^PXCA(.PXCA) I '$D(PXCA("ERROR")) D BACKGND^PXCA(.PXCA,.PXCASTAT)
"RTN","IBDFRPC4",93,0)
 I $G(IBDF("PASSFLAG"))<2 D QUE^IBDF18E3
"RTN","IBDFRPC4",94,0)
 I $G(IBDF("PASSFLAG"))>1 D FOREGND^PXCA(.PXCA,.PXCASTAT)
"RTN","IBDFRPC4",95,0)
 K IBD("AICS")
"RTN","IBDFRPC4",96,0)
 ;
"RTN","IBDFRPC4",97,0)
 ; -- kill erroneous inpatient warnings
"RTN","IBDFRPC4",98,0)
 I $D(PXCA("WARNING","ENCOUNTER"))>0 D INPT^IBDF18E0($G(IBDF("DFN")),$G(IBDF("APPT")))
"RTN","IBDFRPC4",99,0)
 ;
"RTN","IBDFRPC4",100,0)
 ; -- set form tracking processing status, if okay=6, if error=7
"RTN","IBDFRPC4",101,0)
 I $G(IBDF("FORM")) S STATUS=$$FSCND^IBDF18C(IBDF("FORM"),$S(PXCASTAT=0:7,PXCASTAT=1:6,PXCASTAT=-1:7,PXCASTAT=-2:6,1:12),$S((PXCASTAT=0!(PXCASTAT=-1)):"PCE RETURNED AN ERROR",1:""))
"RTN","IBDFRPC4",102,0)
 ;
"RTN","IBDFRPC4",103,0)
 S RESULT(0)=PXCASTAT
"RTN","IBDFRPC4",104,0)
 I (PXCASTAT=1!(PXCASTAT=-2)),IBDF("PASSFLAG")<3 K PXCA,PXCASTAT
"RTN","IBDFRPC4",105,0)
END Q
"RTN","IBDFRPC4",106,0)
 ;
"RTN","IBDFRPC4",107,0)
INPUT(PI,X) ; -- convert external value to internal value
"RTN","IBDFRPC4",108,0)
 I $G(PI)=""!($G(X)="")
"RTN","IBDFRPC4",109,0)
 I $G(^IBE(357.6,+$G(PI),9))'="" X ^(9)
"RTN","IBDFRPC4",110,0)
VALQ Q $G(X)
"RTN","IBDFRPC4",111,0)
 ;
"RTN","IBDFRPC4",112,0)
TYPE(X) ; -- Change external to internal for hand print fields
"RTN","IBDFRPC4",113,0)
 N Y S Y=""
"RTN","IBDFRPC4",114,0)
 I X'="" S Y=$O(^IBE(359.1,"B",X,0))
"RTN","IBDFRPC4",115,0)
 Q Y
"RTN","IBDY336")
0^^B56262091
"RTN","IBDY336",1,0)
IBDY336 ;ALB/ESD - PRE AND POST INSTALL FOR PATCH IBD*3*36 ; AUG 1, 2000
"RTN","IBDY336",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**36**;APR 24, 1997
"RTN","IBDY336",3,0)
 ;
"RTN","IBDY336",4,0)
PRE ;- Create EF block list report and clear workspace before install
"RTN","IBDY336",5,0)
 D BLKLIST
"RTN","IBDY336",6,0)
 D CLWKSP
"RTN","IBDY336",7,0)
 Q
"RTN","IBDY336",8,0)
 ;
"RTN","IBDY336",9,0)
 ;
"RTN","IBDY336",10,0)
POST ;- Add toolkit blocks
"RTN","IBDY336",11,0)
 D TKBLKS
"RTN","IBDY336",12,0)
 Q
"RTN","IBDY336",13,0)
 ;
"RTN","IBDY336",14,0)
 ;
"RTN","IBDY336",15,0)
CLWKSP ;- Clear the AICS Import/Export Workspace (files in #358) before
"RTN","IBDY336",16,0)
 ;- loading new toolkit blocks
"RTN","IBDY336",17,0)
 ;
"RTN","IBDY336",18,0)
 D MES^XPDUTL("")
"RTN","IBDY336",19,0)
 D BMES^XPDUTL(">>> Clearing AICS Import/Export workspace...")
"RTN","IBDY336",20,0)
 D DLTALL^IBDE2
"RTN","IBDY336",21,0)
 D MES^XPDUTL(">>> ...completed.")
"RTN","IBDY336",22,0)
 Q
"RTN","IBDY336",23,0)
 ;
"RTN","IBDY336",24,0)
 ;
"RTN","IBDY336",25,0)
BLKLIST ;- List tool kit blocks, forms, div(s), and clinic(s) so that users can
"RTN","IBDY336",26,0)
 ;- find and change them to the new EF blocks containing MST indicator
"RTN","IBDY336",27,0)
 ;
"RTN","IBDY336",28,0)
 N ARRYVAL,BLKIEN,BLKNAM,BLOCK,CLINIC,CNT,DIV,DIVNAM,FORMIEN,FORM,LINE,LINECNT,MULTI
"RTN","IBDY336",29,0)
 K ^TMP("DILIST",$J),^TMP($J,"IBDCS"),^TMP($J,"IBDCN"),^TMP("IBD36",$J)
"RTN","IBDY336",30,0)
 ;
"RTN","IBDY336",31,0)
 ;- Display info msg to patch installer
"RTN","IBDY336",32,0)
 D USERMSG
"RTN","IBDY336",33,0)
 ;
"RTN","IBDY336",34,0)
 ;- Var used in CLINIC^IBDF15A call for multiple divs; must be defined
"RTN","IBDY336",35,0)
 S MULTI=0
"RTN","IBDY336",36,0)
 S LINECNT=19
"RTN","IBDY336",37,0)
 F LINE=1:1 S BLKNAM=$P($T(LIST+LINE),";;",2) Q:(BLKNAM="QUIT")  D
"RTN","IBDY336",38,0)
 . D FIND^DIC(357.1,"",".01;.02","",BLKNAM)
"RTN","IBDY336",39,0)
 . F CNT=0:0 S CNT=$O(^TMP("DILIST",$J,2,CNT)) Q:'CNT  D
"RTN","IBDY336",40,0)
 .. S BLKIEN=+$G(^TMP("DILIST",$J,2,CNT))
"RTN","IBDY336",41,0)
 .. ;
"RTN","IBDY336",42,0)
 .. ;- Get block and what form it's on
"RTN","IBDY336",43,0)
 .. S BLOCK=$P($G(^IBE(357.1,BLKIEN,0)),"^")
"RTN","IBDY336",44,0)
 .. S FORMIEN=+$P($G(^IBE(357.1,BLKIEN,0)),"^",2)
"RTN","IBDY336",45,0)
 .. S FORM=$P($G(^IBE(357,FORMIEN,0)),"^")
"RTN","IBDY336",46,0)
 .. ;
"RTN","IBDY336",47,0)
 .. ;- Don't list blocks on the Form tool kit
"RTN","IBDY336",48,0)
 .. Q:FORMIEN<1!(FORM="")!(FORM="TOOL KIT")!(FORM="TOOLKIT BLOCKS")
"RTN","IBDY336",49,0)
 .. ;
"RTN","IBDY336",50,0)
 .. ;- Get list of clinics and division(s) using form
"RTN","IBDY336",51,0)
 .. D CLINIC^IBDF15A(FORMIEN,FORM)
"RTN","IBDY336",52,0)
 .. S (CLINIC,DIVNAM)="",DIV=0
"RTN","IBDY336",53,0)
 .. F  S DIVNAM=$O(^TMP($J,"IBDCS",DIVNAM)) Q:DIVNAM=""  F  S DIV=$O(^TMP($J,"IBDCS",DIVNAM,DIV)) Q:'DIV  D
"RTN","IBDY336",54,0)
 ... F  S CLINIC=$O(^TMP($J,"IBDCS",DIVNAM,DIV,FORM,FORMIEN,CLINIC)) Q:CLINIC=""  D WRITELST(.LINECNT)
"RTN","IBDY336",55,0)
 ;
"RTN","IBDY336",56,0)
 ;- Briefly explain rpt and list old and new EF blocks
"RTN","IBDY336",57,0)
 D XMHDR
"RTN","IBDY336",58,0)
 I '$D(^TMP("IBD36",$J,19)) S ^TMP("IBD36",$J,19)="          No AICS encounter form information found"
"RTN","IBDY336",59,0)
 D XM
"RTN","IBDY336",60,0)
 D MES^XPDUTL(">>> ...completed.")
"RTN","IBDY336",61,0)
 K ^TMP("DILIST",$J),^TMP($J,"IBDCS"),^TMP($J,"IBDCN"),^TMP("IBD36",$J)
"RTN","IBDY336",62,0)
 Q
"RTN","IBDY336",63,0)
 ;
"RTN","IBDY336",64,0)
 ;
"RTN","IBDY336",65,0)
WRITELST(CNT) ;- Print block & form on 1st line, clinic & division on 2nd line
"RTN","IBDY336",66,0)
 N LINE
"RTN","IBDY336",67,0)
 S LINE=$$SETSTR^VALM1(" Block:  "_BLOCK,"",1,40),LINE=$$SETSTR^VALM1("      Form:  "_FORM,LINE,43,36)
"RTN","IBDY336",68,0)
 D INCR(.CNT)
"RTN","IBDY336",69,0)
 S LINE=$$SETSTR^VALM1("Clinic:  "_CLINIC,"",1,40),LINE=$$SETSTR^VALM1("  Division:  "_$E(DIVNAM,1,25),LINE,43,36)
"RTN","IBDY336",70,0)
 D INCR(.CNT)
"RTN","IBDY336",71,0)
 S LINE=$$SETSTR^VALM1(" ","",1,80)
"RTN","IBDY336",72,0)
 D INCR(.CNT)
"RTN","IBDY336",73,0)
 Q
"RTN","IBDY336",74,0)
 ;
"RTN","IBDY336",75,0)
 ;
"RTN","IBDY336",76,0)
INCR(CNT) ;- Create output array
"RTN","IBDY336",77,0)
 S ^TMP("IBD36",$J,CNT)=LINE
"RTN","IBDY336",78,0)
 S CNT=CNT+1
"RTN","IBDY336",79,0)
 Q
"RTN","IBDY336",80,0)
 ;
"RTN","IBDY336",81,0)
 ;
"RTN","IBDY336",82,0)
XM ;- Send mail message to patch installer
"RTN","IBDY336",83,0)
 N DIFROM,XMSUB,XMDUZ,XMTEXT,XMY
"RTN","IBDY336",84,0)
 S XMSUB="Patch IBD*3*36 Encounter Form Block Report"
"RTN","IBDY336",85,0)
 S XMDUZ=.5
"RTN","IBDY336",86,0)
 S XMY(DUZ)=""
"RTN","IBDY336",87,0)
 S XMY(XMDUZ)=""
"RTN","IBDY336",88,0)
 S XMTEXT="^TMP(""IBD36"",$J,"
"RTN","IBDY336",89,0)
 D ^XMD
"RTN","IBDY336",90,0)
 Q
"RTN","IBDY336",91,0)
 ;
"RTN","IBDY336",92,0)
 ;
"RTN","IBDY336",93,0)
XMHDR ;- Report header
"RTN","IBDY336",94,0)
 ;
"RTN","IBDY336",95,0)
 S ^TMP("IBD36",$J,1)=" Patch IBD*3*36 contains a number of encounter form blocks which were"
"RTN","IBDY336",96,0)
 S ^TMP("IBD36",$J,2)=" modified to include the MST classification indicator. These new"
"RTN","IBDY336",97,0)
 S ^TMP("IBD36",$J,3)=" encounter form blocks should replace the existing encounter form"
"RTN","IBDY336",98,0)
 S ^TMP("IBD36",$J,4)=" blocks on all applicable encounter forms."
"RTN","IBDY336",99,0)
 S ^TMP("IBD36",$J,5)=" "
"RTN","IBDY336",100,0)
 S ^TMP("IBD36",$J,6)=" This report will assist the user in replacing these blocks by listing the"
"RTN","IBDY336",101,0)
 S ^TMP("IBD36",$J,7)=" existing encounter form blocks, the encounter form(s) they are located on,"
"RTN","IBDY336",102,0)
 S ^TMP("IBD36",$J,8)=" and all clinic(s), and division(s) using the encounter form."
"RTN","IBDY336",103,0)
 S ^TMP("IBD36",$J,9)=" "
"RTN","IBDY336",104,0)
 S ^TMP("IBD36",$J,10)="    Old block                        New block"
"RTN","IBDY336",105,0)
 S ^TMP("IBD36",$J,11)="    =========                        ========="
"RTN","IBDY336",106,0)
 S ^TMP("IBD36",$J,12)=" "
"RTN","IBDY336",107,0)
 S ^TMP("IBD36",$J,13)="    HIDDEN CLASSICATIONS (V2.1)      HIDDEN CLASSIFICATN (V2.1 MST)"
"RTN","IBDY336",108,0)
 S ^TMP("IBD36",$J,14)="    HIDDEN CLASSIFICATIONS (V3.0)    HIDDEN CLASSIFICATN (V3.0 MST)"
"RTN","IBDY336",109,0)
 S ^TMP("IBD36",$J,15)="    SC CONDITIONS (V2.1)             SC CONDITIONS (V2.1 MST)"
"RTN","IBDY336",110,0)
 S ^TMP("IBD36",$J,16)="    HIDDEN SC TREATMENT QUESTIONS    HIDDEN SC TREATMNT QUEST (MST)"
"RTN","IBDY336",111,0)
 S ^TMP("IBD36",$J,17)="    BASIC DEMOGRAPHICS               BASIC DEMOGRAPHICS (MST)"
"RTN","IBDY336",112,0)
 S ^TMP("IBD36",$J,18)=" "
"RTN","IBDY336",113,0)
 Q
"RTN","IBDY336",114,0)
 ;
"RTN","IBDY336",115,0)
 ;
"RTN","IBDY336",116,0)
USERMSG ;- Info message displayed during patch install
"RTN","IBDY336",117,0)
 ;
"RTN","IBDY336",118,0)
 D BMES^XPDUTL(">>> Creating encounter form block report to aid user in finding existing")
"RTN","IBDY336",119,0)
 D MES^XPDUTL(">>> encounter form blocks and replacing them with blocks containing the")
"RTN","IBDY336",120,0)
 D MES^XPDUTL(">>> MST indicator.")
"RTN","IBDY336",121,0)
 D BMES^XPDUTL(">>> This report will be sent as a mail message to the patch installer")
"RTN","IBDY336",122,0)
 D MES^XPDUTL(">>> with the subject ""Patch IBD*3*36 Encounter Form Block Report"".")
"RTN","IBDY336",123,0)
 Q
"RTN","IBDY336",124,0)
 ;
"RTN","IBDY336",125,0)
 ;
"RTN","IBDY336",126,0)
TKBLKS ;- Add MST tool kit blocks to AICS Tool Kit
"RTN","IBDY336",127,0)
 ;
"RTN","IBDY336",128,0)
 N A,ARY,BLK,CNT,CNT1,CNTB,CNTF,EXCLUDE,FORM,FORMNM,NAME,IBDNM,IBDBLK,IBDX,IBTKBLK,NEWBLOCK,NEWFORM,NUM,ORD,SUMMARY,X,Y
"RTN","IBDY336",129,0)
 ;
"RTN","IBDY336",130,0)
 ;- Add all tool kit blocks
"RTN","IBDY336",131,0)
 S FORMNM="TOOL KIT"
"RTN","IBDY336",132,0)
 S (CNTB,CNTF)=0,NUM=1
"RTN","IBDY336",133,0)
 D BMES^XPDUTL(">>> Adding MST Tool Kit blocks to the AICS Tool Kit...")
"RTN","IBDY336",134,0)
 ;
"RTN","IBDY336",135,0)
 ;- Display error msg and exit if Tool Kit not found
"RTN","IBDY336",136,0)
 I '$O(^IBE(357,"B",FORMNM,0)) D TKERR Q
"RTN","IBDY336",137,0)
 ;
"RTN","IBDY336",138,0)
 ;- Get blocks from Imp/Exp EF Block file
"RTN","IBDY336",139,0)
 S ORD="" F  S ORD=$O(^IBE(358.1,"D",ORD)) Q:ORD=""  S BLK=0 F  S BLK=$O(^IBE(358.1,"D",ORD,BLK)) Q:'BLK  D
"RTN","IBDY336",140,0)
 . S NAME=$P($G(^IBE(358.1,+BLK,0)),"^")
"RTN","IBDY336",141,0)
 . ;
"RTN","IBDY336",142,0)
 . ;- Not a tool kit block
"RTN","IBDY336",143,0)
 . Q:$P($G(^IBE(358.1,BLK,0)),"^",14)'=1
"RTN","IBDY336",144,0)
 . ;
"RTN","IBDY336",145,0)
 . ;- Delete block if it already exists
"RTN","IBDY336",146,0)
 . S IBTKBLK=1
"RTN","IBDY336",147,0)
 . S IBDNM="" F  S IBDNM=$O(^IBE(357.1,"B",IBDNM)) Q:IBDNM=""  S IBDBLK=0 F  S IBDBLK=+$O(^IBE(357.1,"B",IBDNM,IBDBLK)) Q:'IBDBLK  D
"RTN","IBDY336",148,0)
 .. I $P($G(^IBE(357.1,IBDBLK,0)),"^")=NAME D DLTBLK^IBDFU3(IBDBLK,"",357.1)
"RTN","IBDY336",149,0)
 . S NEWBLOCK=$$COPYBLK^IBDFU2(BLK,$$TKFORM^IBDFU2C,358.1,357.1,"","",$$TKORDER^IBDF13)
"RTN","IBDY336",150,0)
 . S CNTB=CNTB+1
"RTN","IBDY336",151,0)
 . D:$G(NEWBLOCK) DLTBLK^IBDFU3(BLK,"",358.1)
"RTN","IBDY336",152,0)
 . ;
"RTN","IBDY336",153,0)
 . ;- Add block name to array (used in summary at end)
"RTN","IBDY336",154,0)
 . S SUMMARY(NUM)=NAME
"RTN","IBDY336",155,0)
 . S NUM=NUM+1
"RTN","IBDY336",156,0)
 . ;
"RTN","IBDY336",157,0)
 . ;- Display msg to user
"RTN","IBDY336",158,0)
 . D BMES^XPDUTL(">>> Moving encounter form block "_$G(NAME)_" from")
"RTN","IBDY336",159,0)
 . D MES^XPDUTL("    AICS Import/Export files to AICS Tool Kit.")
"RTN","IBDY336",160,0)
 ;
"RTN","IBDY336",161,0)
 ;- Clear workspace
"RTN","IBDY336",162,0)
 D DLTALL^IBDE2
"RTN","IBDY336",163,0)
 D BMES^XPDUTL("... completed.")
"RTN","IBDY336",164,0)
 ;
"RTN","IBDY336",165,0)
SUMM ;- EF block summary displayed to user
"RTN","IBDY336",166,0)
 D BMES^XPDUTL("Summary of Encounter Form Blocks Added to Tool Kit:")
"RTN","IBDY336",167,0)
 D MES^XPDUTL("===================================================")
"RTN","IBDY336",168,0)
 D MES^XPDUTL("")
"RTN","IBDY336",169,0)
 F IBDX=0:0 S IBDX=$O(SUMMARY(IBDX)) Q:'IBDX  D
"RTN","IBDY336",170,0)
 . D MES^XPDUTL($G(SUMMARY(IBDX)))
"RTN","IBDY336",171,0)
 I '$D(SUMMARY) D
"RTN","IBDY336",172,0)
 . D MES^XPDUTL(">>> ERROR: Missing data in IMP/EXP ENCOUNTER FORM BLOCK file (#358.1).")
"RTN","IBDY336",173,0)
 . D MES^XPDUTL(">>> No Encounter Form Blocks were installed. Please contact National")
"RTN","IBDY336",174,0)
 . D MES^XPDUTL(">>> Vista Support for assistance.")
"RTN","IBDY336",175,0)
 Q
"RTN","IBDY336",176,0)
 ;
"RTN","IBDY336",177,0)
 ;
"RTN","IBDY336",178,0)
TKERR ;- Display error msg if Tool Kit not found
"RTN","IBDY336",179,0)
 D BMES^XPDUTL(">>> ERROR: No AICS Tool Kit found.  New encounter form blocks can not be")
"RTN","IBDY336",180,0)
 D MES^XPDUTL(">>> installed.  Please contact National Vista Support for assistance.")
"RTN","IBDY336",181,0)
 Q
"RTN","IBDY336",182,0)
 ;
"RTN","IBDY336",183,0)
 ;
"RTN","IBDY336",184,0)
LIST ;- List of encounter form blocks
"RTN","IBDY336",185,0)
 ;;HIDDEN CLASSICATIONS
"RTN","IBDY336",186,0)
 ;;HIDDEN CLASSIFICATIONS
"RTN","IBDY336",187,0)
 ;;SC CONDITIONS
"RTN","IBDY336",188,0)
 ;;BASIC DEMOGRAPHICS
"RTN","IBDY336",189,0)
 ;;HIDDEN SC TREATMENT QUESTIONS
"RTN","IBDY336",190,0)
 ;;QUIT
"VER")
8.0^22.0
"^DD",358.1,358.1,0)
FIELD^^1^12
"^DD",358.1,358.1,0,"DT")
2930806
"^DD",358.1,358.1,0,"ID",.02)
W ""
"^DD",358.1,358.1,0,"IX","B",358.1,.01)

"^DD",358.1,358.1,0,"IX","C",358.1,.02)

"^DD",358.1,358.1,0,"IX","D",358.1,.14)

"^DD",358.1,358.1,0,"NM","IMP/EXP ENCOUNTER FORM BLOCK")

"^DD",358.1,358.1,0,"PT",358.2,.02)

"^DD",358.1,358.1,0,"PT",358.5,.02)

"^DD",358.1,358.1,0,"PT",358.7,.06)

"^DD",358.1,358.1,0,"PT",358.8,.02)

"^DD",358.1,358.1,0,"PT",358.93,.08)

"^DD",358.1,358.1,0,"VRPK")
IBD
"^DD",358.1,358.1,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",358.1,358.1,.01,1,0)
^.1
"^DD",358.1,358.1,.01,1,1,0)
358.1^B
"^DD",358.1,358.1,.01,1,1,1)
S ^IBE(358.1,"B",$E(X,1,30),DA)=""
"^DD",358.1,358.1,.01,1,1,2)
K ^IBE(358.1,"B",$E(X,1,30),DA)
"^DD",358.1,358.1,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",358.1,358.1,.01,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.01,21,1,0)
 
"^DD",358.1,358.1,.01,21,2,0)
The name of the block.
"^DD",358.1,358.1,.01,"DEL",1,0)
I '$G(IBLISTPR) W "...Encounter Form Blocks can only be deleted through the Encounter Form Utilities!"
"^DD",358.1,358.1,.02,0)
FORM^RP358'^IBE(358,^0;2^Q
"^DD",358.1,358.1,.02,1,0)
^.1
"^DD",358.1,358.1,.02,1,1,0)
358.1^C
"^DD",358.1,358.1,.02,1,1,1)
S ^IBE(358.1,"C",$E(X,1,30),DA)=""
"^DD",358.1,358.1,.02,1,1,2)
K ^IBE(358.1,"C",$E(X,1,30),DA)
"^DD",358.1,358.1,.02,1,1,"%D",0)
^^1^1^2921116^
"^DD",358.1,358.1,.02,1,1,"%D",1,0)
Used to find all the blocks belonging to a particular form.
"^DD",358.1,358.1,.02,1,1,"DT")
2921116
"^DD",358.1,358.1,.02,3)
What form should this block appear on?
"^DD",358.1,358.1,.02,21,0)
^^2^2^2930802^^
"^DD",358.1,358.1,.02,21,1,0)
 
"^DD",358.1,358.1,.02,21,2,0)
The form the block appears on.
"^DD",358.1,358.1,.02,"DT")
2930802
"^DD",358.1,358.1,.04,0)
BLOCK'S STARTING ROW^RNJ3,0XO^^0;4^S:+X=X X=X-1 K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.1,358.1,.04,.1)
WHAT ROW SHOULD THE BLOCK START IN?
"^DD",358.1,358.1,.04,2)
S Y(0)=Y S Y=(+Y)+1
"^DD",358.1,358.1,.04,2.1)
S Y=(+Y)+1
"^DD",358.1,358.1,.04,3)
What line should this block begin on?
"^DD",358.1,358.1,.04,21,0)
^^1^1^2930715^^^
"^DD",358.1,358.1,.04,21,1,0)
The row  on the encounter form that the block starts on.
"^DD",358.1,358.1,.04,23,0)
^^4^4^2930715^
"^DD",358.1,358.1,.04,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.1,358.1,.04,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.1,358.1,.04,23,3,0)
it is convenient to work with displacements fromt the top left-hand
"^DD",358.1,358.1,.04,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.1,358.1,.04,"DT")
2930715
"^DD",358.1,358.1,.05,0)
BLOCK'S STARTING COLUMN^RNJ3,0XO^^0;5^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.1,358.1,.05,.1)
WHAT COLUMN SHOULD THE BLOCK START IN?
"^DD",358.1,358.1,.05,2)
S Y(0)=Y S Y=(+Y)+1
"^DD",358.1,358.1,.05,2.1)
S Y=(+Y)+1
"^DD",358.1,358.1,.05,3)
What column should this block begin on?
"^DD",358.1,358.1,.05,21,0)
^^1^1^2930715^^
"^DD",358.1,358.1,.05,21,1,0)
The column on the encounter form that the block starts on.
"^DD",358.1,358.1,.05,23,0)
^^4^4^2930715^
"^DD",358.1,358.1,.05,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.1,358.1,.05,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.1,358.1,.05,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.1,358.1,.05,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.1,358.1,.05,"DT")
2930715
"^DD",358.1,358.1,.06,0)
WIDTH IN CHARACTERS^RNJ3,0^^0;6^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.1,358.1,.06,.1)
HOW MANY CHARACTERS WIDE SHOULD THE BLOCK BE?
"^DD",358.1,358.1,.06,3)
How many characters wide should this block be?
"^DD",358.1,358.1,.06,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.06,21,1,0)
 
"^DD",358.1,358.1,.06,21,2,0)
The width of the block, measured in the number of characters across.
"^DD",358.1,358.1,.06,"DT")
2930415
"^DD",358.1,358.1,.07,0)
HEIGHT IN LINES^RNJ3,0^^0;7^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.1,358.1,.07,.1)
HOW MANY LINES HIGH SHOULD THE BLOCK BE?
"^DD",358.1,358.1,.07,3)
How many lines high should this block be?
"^DD",358.1,358.1,.07,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.07,21,1,0)
 
"^DD",358.1,358.1,.07,21,2,0)
The height of the block, measured by the number of lines it takes up.
"^DD",358.1,358.1,.07,"DT")
2930415
"^DD",358.1,358.1,.1,0)
OUTLINE TYPE^RS^1:SOLID LINE;2:INVISIBLE;^0;10^Q
"^DD",358.1,358.1,.1,.1)
OUTLINE TYPE (SOLID/INVISIBLE)
"^DD",358.1,358.1,.1,3)
Enter '1' if the block should have a box around it, '2' if not.
"^DD",358.1,358.1,.1,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.1,21,1,0)
 
"^DD",358.1,358.1,.1,21,2,0)
How the block is outlined on the form.
"^DD",358.1,358.1,.1,"DT")
2930415
"^DD",358.1,358.1,.11,0)
BLOCK HEADER^F^^0;11^K:$L(X)>60!($L(X)<1) X
"^DD",358.1,358.1,.11,.1)
WHAT HEADER WOULD SHOULD APPEAR AT THE TOP OF THE BLOCK? (OPTIONAL)
"^DD",358.1,358.1,.11,3)
What text should appear at the top of the block?
"^DD",358.1,358.1,.11,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.11,21,1,0)
 
"^DD",358.1,358.1,.11,21,2,0)
The text appearing at the top of the block.
"^DD",358.1,358.1,.11,"DT")
2930415
"^DD",358.1,358.1,.12,0)
HEADER APPEARANCE^FX^^0;12^S X=$$UPPER^VALM1(X) K:$L(X)>3!("UBC"'[$E(X,1))!("UBC"'[$E(X,2))!("UBC"'[$E(X,3)) X
"^DD",358.1,358.1,.12,.1)
HOW SHOULD THE BLOCK HEADER APPEAR? CHOOSE FROM {U,B,C}
"^DD",358.1,358.1,.12,3)
B=bold, U=underline, C=center. You can enter any combination of {B,U,C}.
"^DD",358.1,358.1,.12,21,0)
^^2^2^2930607^
"^DD",358.1,358.1,.12,21,1,0)
 
"^DD",358.1,358.1,.12,21,2,0)
A description of the block's contents and use.
"^DD",358.1,358.1,.12,"DT")
2930616
"^DD",358.1,358.1,.13,0)
BRIEF DESCRIPTION^RF^^0;13^K:$L(X)>80!($L(X)<1) X
"^DD",358.1,358.1,.13,.1)
ENTER A BRIEF DESCRIPTION OF THE USE & CONTENTS OF THE BLOCK
"^DD",358.1,358.1,.13,3)
Answer must be 1-80 characters in length.
"^DD",358.1,358.1,.13,21,0)
^^2^2^2930607^
"^DD",358.1,358.1,.13,21,1,0)
 
"^DD",358.1,358.1,.13,21,2,0)
A brief description of the contents or use of the block.
"^DD",358.1,358.1,.13,"DT")
2930415
"^DD",358.1,358.1,.14,0)
TOOL KIT ORDER^NJ6,2^^0;14^K:+X'=X!(X>999.99)!(X<0)!(X?.E1"."3N.N) X
"^DD",358.1,358.1,.14,1,0)
^.1
"^DD",358.1,358.1,.14,1,1,0)
358.1^D
"^DD",358.1,358.1,.14,1,1,1)
S ^IBE(358.1,"D",$E(X,1,30),DA)=""
"^DD",358.1,358.1,.14,1,1,2)
K ^IBE(358.1,"D",$E(X,1,30),DA)
"^DD",358.1,358.1,.14,1,1,"%D",0)
^^2^2^2930108^
"^DD",358.1,358.1,.14,1,1,"%D",1,0)
This index is used to locate all the 'tool box' blocs that can be used 
"^DD",358.1,358.1,.14,1,1,"%D",2,0)
as templates to create a new block to be added to a form.
"^DD",358.1,358.1,.14,1,1,"DT")
2930108
"^DD",358.1,358.1,.14,3)
Enter a numeric value >0 if this block is part of the tool kit. The number will determine its listed order.
"^DD",358.1,358.1,.14,21,0)
^^4^4^2930607^
"^DD",358.1,358.1,.14,21,1,0)
 
"^DD",358.1,358.1,.14,21,2,0)
A value greater than 0 means that the block belongs to the tool kit. The
"^DD",358.1,358.1,.14,21,3,0)
value also determines the order that the block will be listed to the
"^DD",358.1,358.1,.14,21,4,0)
screen that displays the tool kit blocks.
"^DD",358.1,358.1,.14,"DT")
2930309
"^DD",358.1,358.1,1,0)
EXPORT NOTES^358.11^^1;0
"^DD",358.1,358.1,1,21,0)
^^2^2^2930806^
"^DD",358.1,358.1,1,21,1,0)
Should be give other sites information that will enable them to decide
"^DD",358.1,358.1,1,21,2,0)
whether or not they want to import the block. Only applies to tool kit blocks.
"^DD",358.1,358.11,0)
EXPORT NOTES SUB-FIELD^^.01^1
"^DD",358.1,358.11,0,"DT")
2930806
"^DD",358.1,358.11,0,"NM","EXPORT NOTES")

"^DD",358.1,358.11,0,"UP")
358.1
"^DD",358.1,358.11,.01,0)
EXPORT NOTES^W^^0;1^Q
"^DD",358.1,358.11,.01,3)
What should other sites know about this tool kit block before importing it?
"^DD",358.1,358.11,.01,"DT")
2930806
"^DD",358.2,358.2,0)
FIELD^^2^19
"^DD",358.2,358.2,0,"DDA")
N
"^DD",358.2,358.2,0,"DT")
2960123
"^DD",358.2,358.2,0,"ID",.02)
W ""
"^DD",358.2,358.2,0,"ID",.11)
W ""
"^DD",358.2,358.2,0,"IX","B",358.2,.01)

"^DD",358.2,358.2,0,"IX","C",358.2,.02)

"^DD",358.2,358.2,0,"NM","IMP/EXP SELECTION LIST")

"^DD",358.2,358.2,0,"PT",358.3,.03)

"^DD",358.2,358.2,0,"PT",358.4,.03)

"^DD",358.2,358.2,0,"VRPK")
IBD
"^DD",358.2,358.2,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",358.2,358.2,.01,1,0)
^.1
"^DD",358.2,358.2,.01,1,1,0)
358.2^B
"^DD",358.2,358.2,.01,1,1,1)
S ^IBE(358.2,"B",$E(X,1,30),DA)=""
"^DD",358.2,358.2,.01,1,1,2)
K ^IBE(358.2,"B",$E(X,1,30),DA)
"^DD",358.2,358.2,.01,3)
Answer must be 3-30 characters in length.
"^DD",358.2,358.2,.01,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.01,21,1,0)
 
"^DD",358.2,358.2,.01,21,2,0)
The name of the list.
"^DD",358.2,358.2,.01,"DEL",1,0)
I '$G(IBLISTPR) W "...Selection Lists can only be deleted through the Encounter Form Utilities!"
"^DD",358.2,358.2,.01,"DT")
2921119
"^DD",358.2,358.2,.02,0)
BLOCK^RP358.1'^IBE(358.1,^0;2^Q
"^DD",358.2,358.2,.02,1,0)
^.1
"^DD",358.2,358.2,.02,1,1,0)
358.2^C
"^DD",358.2,358.2,.02,1,1,1)
S ^IBE(358.2,"C",$E(X,1,30),DA)=""
"^DD",358.2,358.2,.02,1,1,2)
K ^IBE(358.2,"C",$E(X,1,30),DA)
"^DD",358.2,358.2,.02,1,1,"DT")
2921207
"^DD",358.2,358.2,.02,3)
Enter the block that the selection list should appear in.
"^DD",358.2,358.2,.02,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.02,21,1,0)
The block that the list appears on. The position of the selection list is
"^DD",358.2,358.2,.02,21,2,0)
relative to the block.
"^DD",358.2,358.2,.02,"DT")
2921207
"^DD",358.2,358.2,.04,0)
SUBCOLUMN HEADER APPEARANCE^FX^^0;4^S X=$$UPPER^VALM1(X) K:$L(X)>1!("R"'[$E(X,1)) X
"^DD",358.2,358.2,.04,.1)
HOW SHOULD THE SUBCOLUMN HEADERS APPEAR? ENTER 'R' FOR REVERSE PRINTING.
"^DD",358.2,358.2,.04,3)
R=Reverse Printing
"^DD",358.2,358.2,.04,"DT")
2940531
"^DD",358.2,358.2,.05,0)
COLUMN HEADER^F^^0;5^K:$L(X)>70!($L(X)<1) X
"^DD",358.2,358.2,.05,.1)
WHAT TEXT SHOULD APPEAR AT THE TOP OF EACH COLUMN? (OPTIONAL)
"^DD",358.2,358.2,.05,3)
This header will appear at the top of the column that contains the list. If there is more than one column it will appear at the top of each.
"^DD",358.2,358.2,.05,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.05,21,1,0)
 
"^DD",358.2,358.2,.05,21,2,0)
The text that appears at the top of each column (NOT subcolumn).
"^DD",358.2,358.2,.05,"DT")
2930415
"^DD",358.2,358.2,.06,0)
COLUMN HEADER APPEARANCE^FX^^0;6^S X=$$UPPER^VALM1(X) K:$L(X)>4!("UBRC"'[$E(X,1))!("UBRC"'[$E(X,2))!("UBRC"'[$E(X,3))!("UBRC"'[$E(X,4)) X
"^DD",358.2,358.2,.06,.1)
HOW SHOULD THE COLUMN HEADER APPEAR? CHOOSE FROM {U,B,R,C}
"^DD",358.2,358.2,.06,3)
B=bold,U=underline,R=reverse,C=center. You can enter any combination of {B,U,R,C}.
"^DD",358.2,358.2,.06,21,0)
^^2^2^2940531^^^
"^DD",358.2,358.2,.06,21,1,0)
 
"^DD",358.2,358.2,.06,21,2,0)
The column header can be give characteristics, such as centered and bold.
"^DD",358.2,358.2,.06,"DT")
2940531
"^DD",358.2,358.2,.07,0)
SUBCOLUMNS SEPARATED WITH?^RS^1:ONE SPACE;2:TWO SPACES;3:LINE;4:SPACE/LINE/SPACE;^0;7^Q
"^DD",358.2,358.2,.07,.1)
HOW SHOULD THE SUBCOLUMNS BE SEPARATED?
"^DD",358.2,358.2,.07,3)
How should the subcolumns be separated?
"^DD",358.2,358.2,.07,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.07,21,1,0)
 
"^DD",358.2,358.2,.07,21,2,0)
What characters are used to separate the subcolumns.
"^DD",358.2,358.2,.07,"DT")
2930415
"^DD",358.2,358.2,.08,0)
EXTRA LINES FOR SELECTIONS^NJ1,0^^0;8^K:+X'=X!(X>9)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.2,358.2,.08,.1)
NUMBER OF ADDITIONAL LINES FOR EACH ENTRY ON LIST?
"^DD",358.2,358.2,.08,3)
How many extra lines should be allocated for each selection, in addition to the 1 the selection will print on?
"^DD",358.2,358.2,.08,21,0)
^^4^4^2930527^
"^DD",358.2,358.2,.08,21,1,0)
 
"^DD",358.2,358.2,.08,21,2,0)
Each entry on the list prints on only one line. However, if you want
"^DD",358.2,358.2,.08,21,3,0)
extra space to appear below each entry on the list then this field should
"^DD",358.2,358.2,.08,21,4,0)
be set to the number of blank lines desired.
"^DD",358.2,358.2,.08,"DT")
2930427
"^DD",358.2,358.2,.09,0)
GROUP HEADER APPEARANCE^FX^^0;9^S X=$$UPPER^VALM1(X) K:$L(X)>4!("UBRC"'[$E(X,1))!("UBRC"'[$E(X,2))!("UBRC"'[$E(X,3))!("UBRC"'[$E(X,4)) X
"^DD",358.2,358.2,.09,.1)
HOW SHOULD THE HEADER FOR EACH GROUP OF ENTRIES APPEAR? CHOOSE FROM {U,B,R,C}
"^DD",358.2,358.2,.09,3)
B=bold,R=reverse,C=center,U=underline. You can use any combination of {B,R,C,U}
"^DD",358.2,358.2,.09,21,0)
^^1^1^2940527^^^^
"^DD",358.2,358.2,.09,21,1,0)
This field determines the appearance of the group headers.
"^DD",358.2,358.2,.09,"DT")
2940527
"^DD",358.2,358.2,.11,0)
SELECTION ROUTINE^R*P358.6'^IBE(358.6,^0;11^S DIC("S")="I $P(^(0),U,6)=3,$P(^(0),U,9)=1" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",358.2,358.2,.11,3)
Enter the package interface used to obtain this list.
"^DD",358.2,358.2,.11,12)
Allows only available selection routines.
"^DD",358.2,358.2,.11,12.1)
S DIC("S")="I $P(^(0),U,6)=3,$P(^(0),U,9)=1"
"^DD",358.2,358.2,.11,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.11,21,1,0)
 
"^DD",358.2,358.2,.11,21,2,0)
This identifies the Package Interface that is used to fill the list.
"^DD",358.2,358.2,.11,"DT")
2930115
"^DD",358.2,358.2,.12,0)
UNDERLINE SELECTIONS?^RS^0:NO;1:YES;^0;12^Q
"^DD",358.2,358.2,.12,.1)
SHOULD EACH ENTRY ON THE LIST BE UNDERLINED? (YES/NO)
"^DD",358.2,358.2,.12,3)
Should the items on the list be underlined?
"^DD",358.2,358.2,.12,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.12,21,1,0)
 
"^DD",358.2,358.2,.12,21,2,0)
Answer yes if each entry on the list should be underlined.
"^DD",358.2,358.2,.12,"DT")
2930414
"^DD",358.2,358.2,.13,0)
NUMBER OF COLUMNS^NJ2,0^^0;13^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.2,358.2,.13,.1)
HOW MANY COLUMNS OF LIST ENTRIES SHOULD THE LIST HAVE? (OPTIONAL)
"^DD",358.2,358.2,.13,3)

"^DD",358.2,358.2,.13,4)
D HELP5^IBDFU5
"^DD",358.2,358.2,.13,21,0)
^^6^6^2930527^
"^DD",358.2,358.2,.13,21,1,0)
 
"^DD",358.2,358.2,.13,21,2,0)
A selection list may be displayed in an area several columns wide. The
"^DD",358.2,358.2,.13,21,3,0)
starting position and height of each column may be specified. However, it
"^DD",358.2,358.2,.13,21,4,0)
is not necessary because defaults values will be used. The defaults used
"^DD",358.2,358.2,.13,21,5,0)
assume that nothing else is going in the block except the selection list
"^DD",358.2,358.2,.13,21,6,0)
and that the entire block should be filled.
"^DD",358.2,358.2,.13,"DT")
2930802
"^DD",358.2,358.2,.14,0)
DYNAMIC SELECTIONS^S^0:NO;1:YES;^0;14^Q
"^DD",358.2,358.2,.14,3)
Answer YES if the list of selecitons are created at print time.
"^DD",358.2,358.2,.14,"DT")
2950717
"^DD",358.2,358.2,.15,0)
PRINT COMPLETE^S^0:NO;1:YES;^0;15^Q
"^DD",358.2,358.2,.15,3)
If the data on the list won't fit on the form, should it be printed on a separate page?
"^DD",358.2,358.2,.15,21,0)
^^1^1^2950717^
"^DD",358.2,358.2,.15,21,1,0)
Applies only to dynamic selection lists.
"^DD",358.2,358.2,.15,"DT")
2950717
"^DD",358.2,358.2,.16,0)
NUMBER OF OTHER^NJ1,0^^0;16^K:+X'=X!(X>9)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.2,358.2,.16,3)
Allocate space for how many 'other' not found on the list?
"^DD",358.2,358.2,.16,21,0)
^^2^2^2950717^
"^DD",358.2,358.2,.16,21,1,0)
Space will be allocated at the bottom of the lsit for this number of items
"^DD",358.2,358.2,.16,21,2,0)
not found on the list.
"^DD",358.2,358.2,.16,"DT")
2950717
"^DD",358.2,358.2,.17,0)
WHAT TO ALLOCATE SPACE FOR^S^1:NARRATIVE ONLY;2:CODE ONLY;3:NARRATIVE AND CODE;^0;17^Q
"^DD",358.2,358.2,.17,3)
What should space be allocated for when making room for 'other'?
"^DD",358.2,358.2,.17,21,0)
^^2^2^2950803^^
"^DD",358.2,358.2,.17,21,1,0)
This field will determine what fields will be placed on the form for
"^DD",358.2,358.2,.17,21,2,0)
writting in other items not found on the list.
"^DD",358.2,358.2,.17,"DT")
2950717
"^DD",358.2,358.2,.18,0)
WHAT TO SEND TO PCE^S^1:NARRATIVE ONLY;2:CODE ONLY;3:NARRATIVE AND CODE;^0;18^Q
"^DD",358.2,358.2,.18,3)
WHAT DO YOU WANT ENTERED INTO THE DATABASE?
"^DD",358.2,358.2,.18,21,0)
^^2^2^2960123^
"^DD",358.2,358.2,.18,21,1,0)
This determines what is sent to PCE.  For example, some types of data
"^DD",358.2,358.2,.18,21,2,0)
may require that a code be sent, but the narrative may be optional.
"^DD",358.2,358.2,.18,"DT")
2960123
"^DD",358.2,358.2,.19,0)
CLINICAL REMINDER DISPLAY TYPE^S^1:DUE NOW ONLY;2:ALL REMINDERS;^0;19^Q
"^DD",358.2,358.2,.19,3)
This determines the clincial reminders that will print on an encounter form.  Choose either to see only those due now or all appropriate reminders.
"^DD",358.2,358.2,.19,21,0)
^^1^1^2980910^^^^
"^DD",358.2,358.2,.19,21,1,0)
This is the display type for this list of clinical reminders.
"^DD",358.2,358.2,.19,"DT")
2971027
"^DD",358.2,358.2,1,0)
LIST COLUMN^358.21I^^1;0
"^DD",358.2,358.2,1,21,0)
^^2^2^2940216^^^^
"^DD",358.2,358.2,1,21,1,0)
A column is a rectangular area that has the necessary width to display a
"^DD",358.2,358.2,1,21,2,0)
single item on the list.
"^DD",358.2,358.2,1,"DT")
2930802
"^DD",358.2,358.2,2,0)
SUBCOLUMN NUMBER^358.22I^^2;0
"^DD",358.2,358.2,2,21,0)
^^4^4^2941020^^^^
"^DD",358.2,358.2,2,21,1,0)
 
"^DD",358.2,358.2,2,21,2,0)
A subcolumn contains one field of the entry on the list. The subcolumn
"^DD",358.2,358.2,2,21,3,0)
order is the order, from left to right, that the subcolumns will appear
"^DD",358.2,358.2,2,21,4,0)
in.
"^DD",358.2,358.2,2,"DT")
2930413
"^DD",358.2,358.21,0)
LIST COLUMN SUB-FIELD^^.04^4
"^DD",358.2,358.21,0,"DT")
2930331
"^DD",358.2,358.21,0,"ID","WRITE")
D EN^DDIOL("   COLUMN #"_$P($G(^(0)),U),"","?0")
"^DD",358.2,358.21,0,"IX","B",358.21,.01)

"^DD",358.2,358.21,0,"NM","LIST COLUMN")

"^DD",358.2,358.21,0,"UP")
358.2
"^DD",358.2,358.21,.01,0)
LIST COLUMN NUMBER^MNJ1,0^^0;1^K:+X'=X!(X>4)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.2,358.21,.01,1,0)
^.1
"^DD",358.2,358.21,.01,1,1,0)
358.21^B
"^DD",358.2,358.21,.01,1,1,1)
S ^IBE(358.2,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",358.2,358.21,.01,1,1,2)
K ^IBE(358.2,DA(1),1,"B",$E(X,1,30),DA)
"^DD",358.2,358.21,.01,3)
You can specify the position and height of up to 4 columns. Defaults will be used where needed.
"^DD",358.2,358.21,.01,21,0)
^^2^2^2930722^^
"^DD",358.2,358.21,.01,21,1,0)
The order that the columns will be filled. Column 1 will first be filled
"^DD",358.2,358.21,.01,21,2,0)
with items, then column 2, etc.
"^DD",358.2,358.21,.01,"DT")
2930802
"^DD",358.2,358.21,.02,0)
LIST COLUMN'S STARTING ROW^NJ3,0XO^^0;2^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.2,358.21,.02,.1)
WHAT ROW SHOULD THE LIST COLUMN START IN? (OPTIONAL)
"^DD",358.2,358.21,.02,2)
S Y(0)=Y S:+Y=Y Y=+Y+1
"^DD",358.2,358.21,.02,2.1)
S:+Y=Y Y=+Y+1
"^DD",358.2,358.21,.02,3)
What row should the column begin in?
"^DD",358.2,358.21,.02,21,0)
^^2^2^2930715^^^
"^DD",358.2,358.21,.02,21,1,0)
The row, relative to the block, that the column should begin in. This is
"^DD",358.2,358.21,.02,21,2,0)
optional, since default values can be used.
"^DD",358.2,358.21,.02,23,0)
^^4^4^2930715^^
"^DD",358.2,358.21,.02,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.2,358.21,.02,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.2,358.21,.02,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.2,358.21,.02,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.2,358.21,.02,"DT")
2930802
"^DD",358.2,358.21,.03,0)
LIST COLUMN'S STARTING COLUMN^NJ3,0XO^^0;3^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.2,358.21,.03,.1)
WHAT BLOCK COLUMN SHOULD THE LIST COLUMN START IN? (OPTIONAL)
"^DD",358.2,358.21,.03,2)
S Y(0)=Y S:+Y=Y Y=+Y+1
"^DD",358.2,358.21,.03,2.1)
S:+Y=Y Y=+Y+1
"^DD",358.2,358.21,.03,3)
At what block column should the list column begin at? The first subcolumn of the list column will start one character to the right of this.
"^DD",358.2,358.21,.03,21,0)
^^4^4^2940216^
"^DD",358.2,358.21,.03,21,1,0)
 
"^DD",358.2,358.21,.03,21,2,0)
The column (# of characters to the right) that the list column should
"^DD",358.2,358.21,.03,21,3,0)
begin in, relative to the block. It is optional, since a default value can
"^DD",358.2,358.21,.03,21,4,0)
be used.
"^DD",358.2,358.21,.03,23,0)
^^4^4^2930715^
"^DD",358.2,358.21,.03,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.2,358.21,.03,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.2,358.21,.03,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.2,358.21,.03,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.2,358.21,.03,"DT")
2930930
"^DD",358.2,358.21,.04,0)
LIST COLUMN HEIGHT^NJ3,0^^0;4^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.2,358.21,.04,.1)
HOW MANY LINES HIGH SHOULD THE LIST COLUMN BE? (OPTIONAL)
"^DD",358.2,358.21,.04,3)
How many lines should the column cover?
"^DD",358.2,358.21,.04,21,0)
^^3^3^2930527^
"^DD",358.2,358.21,.04,21,1,0)
 
"^DD",358.2,358.21,.04,21,2,0)
The number of lines the column should occupy. This is optional - if not
"^DD",358.2,358.21,.04,21,3,0)
supplied the column will extend to the bottom of the block.
"^DD",358.2,358.21,.04,"DT")
2930802
"^DD",358.2,358.22,0)
SUBCOLUMN NUMBER SUB-FIELD^^.1^10
"^DD",358.2,358.22,0,"DT")
2960123
"^DD",358.2,358.22,0,"ID","WRITE")
D ID1^IBDFU5
"^DD",358.2,358.22,0,"IX","B",358.22,.01)

"^DD",358.2,358.22,0,"NM","SUBCOLUMN NUMBER")

"^DD",358.2,358.22,0,"UP")
358.2
"^DD",358.2,358.22,.01,0)
SUBCOLUMN NUMBER^MRNJ1,0X^^0;1^K:+X'=X!(X>6)!(X<1)!(X?.E1"."1N.N)!($D(^IBE(358.2,DA(1),2,"B",X))) X
"^DD",358.2,358.22,.01,.1)
Number of the subcolumn, subcolumns being numbered 1-6, left-to-right
"^DD",358.2,358.22,.01,1,0)
^.1
"^DD",358.2,358.22,.01,1,1,0)
358.22^B
"^DD",358.2,358.22,.01,1,1,1)
S ^IBE(358.2,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",358.2,358.22,.01,1,1,2)
K ^IBE(358.2,DA(1),2,"B",$E(X,1,30),DA)
"^DD",358.2,358.22,.01,3)
The SUBCOLUMN NUMBER determines the order in which the subcolumns will display. There are at most 6 subcolumns, numbered 1-6.
"^DD",358.2,358.22,.01,21,0)
^^2^2^2930527^
"^DD",358.2,358.22,.01,21,1,0)
 
"^DD",358.2,358.22,.01,21,2,0)
The order that the subcolumn will appear on the form.
"^DD",358.2,358.22,.01,"DT")
2930413
"^DD",358.2,358.22,.02,0)
SUBCOLUMN HEADER^F^^0;2^K:$L(X)>150!($L(X)<1) X
"^DD",358.2,358.22,.02,.1)
WHAT TEXT SHOULD APPEAR AT THE TOP OF THE SUBCOLUMN?
"^DD",358.2,358.22,.02,3)
What text should appear at the top of the subcolumn?
"^DD",358.2,358.22,.02,21,0)
^^2^2^2930527^
"^DD",358.2,358.22,.02,21,1,0)
 
"^DD",358.2,358.22,.02,21,2,0)
The text that will appear at the top of the subcolumn.
"^DD",358.2,358.22,.02,"DT")
2930414
"^DD",358.2,358.22,.03,0)
SUBCOLUMN WIDTH^NJ3,0^^0;3^K:+X'=X!(X>150)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.2,358.22,.03,.1)
HOW WIDE SHOULD THE SUBCOLUMN BE?
"^DD",358.2,358.22,.03,3)
How wide should the subcolumn be?
"^DD",358.2,358.22,.03,21,0)
^^3^3^2930527^
"^DD",358.2,358.22,.03,21,1,0)
 
"^DD",358.2,358.22,.03,21,2,0)
The width of the subcolumn. If the subcolumn contains a MARKING AREA then
"^DD",358.2,358.22,.03,21,3,0)
the width of the MARKING AREA overrides what ever this is.
"^DD",358.2,358.22,.03,"DT")
2930414
"^DD",358.2,358.22,.04,0)
TYPE OF SUBCOLUMN^RS^1:TEXT;2:MARKING;^0;4^Q
"^DD",358.2,358.22,.04,.1)
SUBCOLUMN CONTAINS TEXT, OR FOR MARKING? (TEXT/MARKING)
"^DD",358.2,358.22,.04,3)
Enter '1' if the subcolumn will contain text, '2' if it will be for the user to mark his selections.
"^DD",358.2,358.22,.04,21,0)
^^4^4^2930527^
"^DD",358.2,358.22,.04,21,1,0)
 
"^DD",358.2,358.22,.04,21,2,0)
The subcolumn can contain either text, derived from what is returned by
"^DD",358.2,358.22,.04,21,3,0)
the PACKAGE INTERFACE, or a MARKING AREA, which is meant to be written in
"^DD",358.2,358.22,.04,21,4,0)
to select an entry on the list.
"^DD",358.2,358.22,.04,"DT")
2930428
"^DD",358.2,358.22,.05,0)
SUBCOLUMN'S DATA^NJ1,0X^^0;5^K:+X'=X!(X>7)!(X<1)!(X?.E1"."1N.N)!($P($G(^IBE(358.6,+$P($G(^IBE(358.2,DA(1),0)),U,11),2)),U,(2*X)-1)="")!((X=1)&'$P($G(^IBE(358.6,+$P($G(^IBE(358.2,DA(1),0)),U,11),2)),U,17)) X
"^DD",358.2,358.22,.05,.1)
WHAT DATA SHOULD BE CONTAINED IN THE SUBCOLUMN?
"^DD",358.2,358.22,.05,3)
WHAT DATA SHOULD BE CONTAINED IN THE SUBCOLUMN?
"^DD",358.2,358.22,.05,4)
D HELP2^IBDFU5
"^DD",358.2,358.22,.05,21,0)
^^3^3^2940719^^
"^DD",358.2,358.22,.05,21,1,0)
 
"^DD",358.2,358.22,.05,21,2,0)
The Package Interface returns a record, which is composed of fields. This
"^DD",358.2,358.22,.05,21,3,0)
identifies which field goes in the subcolumn.
"^DD",358.2,358.22,.05,"DT")
2940719
"^DD",358.2,358.22,.06,0)
MARKING AREA^P358.91'^IBE(358.91,^0;6^Q
"^DD",358.2,358.22,.06,.1)
TYPE OF MARKING AREA
"^DD",358.2,358.22,.06,3)
What type of marking area should appear in the subcolumn?
"^DD",358.2,358.22,.06,21,0)
^^2^2^2930527^
"^DD",358.2,358.22,.06,21,1,0)
 
"^DD",358.2,358.22,.06,21,2,0)
This identifies which MARKING AREA should go in the subcolumn.
"^DD",358.2,358.22,.06,"DT")
2930414
"^DD",358.2,358.22,.07,0)
ALLOW EDITING OF TEXT?^S^0:NO;1:YES;^0;7^Q
"^DD",358.2,358.22,.07,.1)
ALLOW EDITING OF THE TEXT APPEARING IN THIS SUBCOLUMN? (YES/NO)
"^DD",358.2,358.22,.07,3)
Is it okey to edit the text appearing in this subcolumn?
"^DD",358.2,358.22,.07,21,0)
^^4^4^2930527^
"^DD",358.2,358.22,.07,21,1,0)
 
"^DD",358.2,358.22,.07,21,2,0)
This determines whether or not the user, when selecting items to appear on
"^DD",358.2,358.22,.07,21,3,0)
the list, will be able to edit the text appearing in the subcolum. This is
"^DD",358.2,358.22,.07,21,4,0)
ignored if the subcolumn contains a MARKING AREA.
"^DD",358.2,358.22,.07,"DT")
2930428
"^DD",358.2,358.22,.08,0)
DO NOT UNDERLINE MARKING AREA?^S^0:NO;1:YES;^0;8^Q
"^DD",358.2,358.22,.08,3)
Enter YES if you do NOT want this subcolumn underlined.
"^DD",358.2,358.22,.08,"DT")
2940607
"^DD",358.2,358.22,.09,0)
DATA QUALIFIER^P358.98'^IBD(358.98,^0;9^Q
"^DD",358.2,358.22,.09,"DT")
2941020
"^DD",358.2,358.22,.1,0)
SELECTION RULE^S^0:ANY NUMBER;1:EXACTLY ONE;2:AT MOST ONE (0 or 1);3:AT LEAST ONE (1 or more);^0;10^Q
"^DD",358.2,358.22,.1,3)
Which rule applies to the choices the user can make in this subcolumn?
"^DD",358.2,358.22,.1,21,0)
^^2^2^2960123^
"^DD",358.2,358.22,.1,21,1,0)
A selection rule can be applied to a subcolumn used to make selections,
"^DD",358.2,358.22,.1,21,2,0)
i.e., one that contains marking areas.
"^DD",358.2,358.22,.1,"DT")
2960123
"^DD",358.5,358.5,0)
FIELD^^2^13
"^DD",358.5,358.5,0,"DDA")
N
"^DD",358.5,358.5,0,"DT")
2930730
"^DD",358.5,358.5,0,"ID",.02)
W ""
"^DD",358.5,358.5,0,"ID",.03)
W ""
"^DD",358.5,358.5,0,"IX","B",358.5,.01)

"^DD",358.5,358.5,0,"IX","C",358.5,.02)

"^DD",358.5,358.5,0,"NM","IMP/EXP DATA FIELD")

"^DD",358.5,358.5,0,"VRPK")
IBD
"^DD",358.5,358.5,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",358.5,358.5,.01,1,0)
^.1
"^DD",358.5,358.5,.01,1,1,0)
358.5^B
"^DD",358.5,358.5,.01,1,1,1)
S ^IBE(358.5,"B",$E(X,1,30),DA)=""
"^DD",358.5,358.5,.01,1,1,2)
K ^IBE(358.5,"B",$E(X,1,30),DA)
"^DD",358.5,358.5,.01,3)
Answer must be 3-30 characters in length.
"^DD",358.5,358.5,.01,21,0)
^^3^3^2930419^^^
"^DD",358.5,358.5,.01,21,1,0)
 
"^DD",358.5,358.5,.01,21,2,0)
The name is used to identify the field within a block. It can be anything
"^DD",358.5,358.5,.01,21,3,0)
the designer of a form wants it to be.
"^DD",358.5,358.5,.01,"DT")
2930419
"^DD",358.5,358.5,.02,0)
BLOCK^RP358.1'^IBE(358.1,^0;2^Q
"^DD",358.5,358.5,.02,1,0)
^.1
"^DD",358.5,358.5,.02,1,1,0)
358.5^C
"^DD",358.5,358.5,.02,1,1,1)
S ^IBE(358.5,"C",$E(X,1,30),DA)=""
"^DD",358.5,358.5,.02,1,1,2)
K ^IBE(358.5,"C",$E(X,1,30),DA)
"^DD",358.5,358.5,.02,1,1,"DT")
2921118
"^DD",358.5,358.5,.02,3)
What block should this data field appear in?
"^DD",358.5,358.5,.02,21,0)
^^2^2^2930310^
"^DD",358.5,358.5,.02,21,1,0)
 
"^DD",358.5,358.5,.02,21,2,0)
The particular block the data field should appear in.
"^DD",358.5,358.5,.02,"DT")
2921118
"^DD",358.5,358.5,.03,0)
TYPE OF DATA^*P358.6'^IBE(358.6,^0;3^S DIC("S")="I $P(^(0),U,6)=2,$P(^(0),U,9)=1" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",358.5,358.5,.03,3)
What data should be displayed in this field?
"^DD",358.5,358.5,.03,4)

"^DD",358.5,358.5,.03,12)
Allows only available output routines
"^DD",358.5,358.5,.03,12.1)
S DIC("S")="I $P(^(0),U,6)=2,$P(^(0),U,9)=1"
"^DD",358.5,358.5,.03,21,0)
^^5^5^2930409^^
"^DD",358.5,358.5,.03,21,1,0)
 
"^DD",358.5,358.5,.03,21,2,0)
The particular interface that should be invoked to obtain the data for
"^DD",358.5,358.5,.03,21,3,0)
display. Some of the interfaces don't actually return data, but are
"^DD",358.5,358.5,.03,21,4,0)
instead 'dummy' interfaces for the purpose of printing things like blank
"^DD",358.5,358.5,.03,21,5,0)
lines.
"^DD",358.5,358.5,.03,"DT")
2930309
"^DD",358.5,358.5,.04,0)
LAST ITEM INDICATOR^S^1:YES;0:NO;^0;4^Q
"^DD",358.5,358.5,.04,.1)
IS THIS THE LAST ONE THAT WILL FIT ON THE FORM?
"^DD",358.5,358.5,.04,3)

"^DD",358.5,358.5,.04,4)
W "Enter YES if this is the last item that should print, else enter NO."
"^DD",358.5,358.5,.04,21,0)
^^4^4^2930408^^^^
"^DD",358.5,358.5,.04,21,1,0)
 
"^DD",358.5,358.5,.04,21,2,0)
This field is used to indicate which item on a list is the last to be
"^DD",358.5,358.5,.04,21,3,0)
printed to the form. The remaining items can be printed to a separate
"^DD",358.5,358.5,.04,21,4,0)
piece of paper.
"^DD",358.5,358.5,.04,"DT")
2930413
"^DD",358.5,358.5,.05,0)
NUMBER ON LIST^NJ3,0^^0;5^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.5,358.5,.05,.1)
WHICH ITEM ON THE LIST SHOULD BE DISPLAYED IN THIS FIELD?
"^DD",358.5,358.5,.05,3)
The data is a list of items. Which item on the list should be displayed?
"^DD",358.5,358.5,.05,21,0)
^^1^1^2930607^
"^DD",358.5,358.5,.05,21,1,0)
For data returned by the package interface that is in the form of a list, this field indicates which one of the items on the list should be displayed to this field.
"^DD",358.5,358.5,.05,"DT")
2930413
"^DD",358.5,358.5,.06,0)
TEXT LABEL^F^^0;6^K:$L(X)>150!($L(X)<1) X
"^DD",358.5,358.5,.06,.1)
WHAT LABEL SHOULD BEGIN THE TEXT (OPTIONAL)
"^DD",358.5,358.5,.06,2)
S Y(0)=Y S Y=+Y+1
"^DD",358.5,358.5,.06,2.1)
S Y=+Y+1
"^DD",358.5,358.5,.06,3)
You can optionally begin the text with a label of your choice.
"^DD",358.5,358.5,.06,21,0)
^^2^2^2930527^
"^DD",358.5,358.5,.06,21,1,0)
 
"^DD",358.5,358.5,.06,21,2,0)
The label that should precede the text.
"^DD",358.5,358.5,.06,"DT")
2930825
"^DD",358.5,358.5,.07,0)
TEXT LABEL APPEARANCE^FX^^0;7^S X=$$UPPER^VALM1(X) K:$L(X)>3!("UBR"'[$E(X,1))!("UBR"'[$E(X,2))!("UBR"'[$E(X,3)) X
"^DD",358.5,358.5,.07,.1)
HOW SHOULD THE LABEL APPEAR? CHOOSE FROM {B,U,R}
"^DD",358.5,358.5,.07,3)
B=bold,U=underline,R=reverse. You can enter BU to make the label bold and underlined.
"^DD",358.5,358.5,.07,21,0)
^^3^3^2940527^^^
"^DD",358.5,358.5,.07,21,1,0)
 
"^DD",358.5,358.5,.07,21,2,0)
The label can have characteristics, such as being underlined or
"^DD",358.5,358.5,.07,21,3,0)
emboldened.
"^DD",358.5,358.5,.07,"DT")
2940527
"^DD",358.5,358.5,.1,0)
TEXT STARTING COLUMN^NJ3,0XO^^0;10^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.5,358.5,.1,.1)
WHAT BLOCK COLUMN SHOULD THE TEXT START AT?
"^DD",358.5,358.5,.1,2)
S:Y=+Y Y=Y+1
"^DD",358.5,358.5,.1,2.1)
S Y=+Y+1
"^DD",358.5,358.5,.1,3)
What block column should the text start at?
"^DD",358.5,358.5,.1,21,0)
^^2^2^2930715^^
"^DD",358.5,358.5,.1,21,1,0)
This field determines what column the text should begin in.
"^DD",358.5,358.5,.1,21,2,0)
Applies only if the Package Interface returns a word-processing field.
"^DD",358.5,358.5,.1,23,0)
^^4^4^2930715^
"^DD",358.5,358.5,.1,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.5,358.5,.1,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.5,358.5,.1,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.5,358.5,.1,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.5,358.5,.1,"DT")
2940527
"^DD",358.5,358.5,.11,0)
TEXT STARTING ROW^NJ3,0XO^^0;11^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.5,358.5,.11,.1)
WHAT BLOCK ROW SHOULD THE TEXT START AT?
"^DD",358.5,358.5,.11,2)
S Y(0)=Y S:Y=+Y Y=Y+1
"^DD",358.5,358.5,.11,2.1)
S:Y=+Y Y=Y+1
"^DD",358.5,358.5,.11,3)
What block row should the text begin in?
"^DD",358.5,358.5,.11,21,0)
^^4^4^2930715^^
"^DD",358.5,358.5,.11,21,1,0)
 
"^DD",358.5,358.5,.11,21,2,0)
Determines which line on the form, relative to the block, the text area
"^DD",358.5,358.5,.11,21,3,0)
should begin at. Only applies if the package interface returns a
"^DD",358.5,358.5,.11,21,4,0)
word-processing field.
"^DD",358.5,358.5,.11,23,0)
^^4^4^2930715^
"^DD",358.5,358.5,.11,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.5,358.5,.11,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.5,358.5,.11,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.5,358.5,.11,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.5,358.5,.11,"DT")
2940527
"^DD",358.5,358.5,.12,0)
NUMBER OF FORM LINES FOR TEXT^NJ3,0^^0;12^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.5,358.5,.12,.1)
HOW MANY LINES OF THE FORM SHOULD BE ALLOCATED FOR THE TEXT?
"^DD",358.5,358.5,.12,3)
How many lines of the form should be allocated for the text?
"^DD",358.5,358.5,.12,21,0)
^^2^2^2930527^
"^DD",358.5,358.5,.12,21,1,0)
 
"^DD",358.5,358.5,.12,21,2,0)
The number of lines on the form that should be allocated for the text.
"^DD",358.5,358.5,.12,"DT")
2930414
"^DD",358.5,358.5,.13,0)
SPACING OF TEXT LINES^S^1:SINGLE SPACED;2:DOUBLE SPACED;3:SINGLE, BUT DOUBLE IF BLANK;^0;13^Q
"^DD",358.5,358.5,.13,.1)
HOW SHOULD THE TEXT LINES BE SPACED?
"^DD",358.5,358.5,.13,3)
How do you want the text lines to be spaced?
"^DD",358.5,358.5,.13,21,0)
^^2^2^2930527^
"^DD",358.5,358.5,.13,21,1,0)
 
"^DD",358.5,358.5,.13,21,2,0)
Determines the spacing between lines of text.
"^DD",358.5,358.5,.13,"DT")
2930414
"^DD",358.5,358.5,.14,0)
WIDTH OF TEXT LINES^NJ3,0^^0;14^K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.5,358.5,.14,.1)
HOW MANY CHARACTERS ACROSS SHOULD THE TEXT LINES BE?
"^DD",358.5,358.5,.14,3)
How many columns wide do you want the text?
"^DD",358.5,358.5,.14,21,0)
^^2^2^2930527^
"^DD",358.5,358.5,.14,21,1,0)
 
"^DD",358.5,358.5,.14,21,2,0)
Determines how many characters across should be allocated to the text.
"^DD",358.5,358.5,.14,"DT")
2930414
"^DD",358.5,358.5,2,0)
SUBFIELD^358.52I^^2;0
"^DD",358.5,358.5,2,21,0)
^^2^2^2940816^^^^
"^DD",358.5,358.5,2,21,1,0)
A data field can be composed of multiple subfields. Each subfield can have
"^DD",358.5,358.5,2,21,2,0)
a label and data.
"^DD",358.5,358.5,2,"DT")
2930323
"^DD",358.5,358.52,0)
SUBFIELD SUB-FIELD^^.09^8
"^DD",358.5,358.52,0,"DIK")
IBXF5
"^DD",358.5,358.52,0,"DT")
2930730
"^DD",358.5,358.52,0,"IX","B",358.52,.01)

"^DD",358.5,358.52,0,"NM","SUBFIELD")

"^DD",358.5,358.52,0,"UP")
358.5
"^DD",358.5,358.52,.01,0)
SUBFIELD LABEL^MF^^0;1^K:$L(X)>150!($L(X)<1) X
"^DD",358.5,358.52,.01,1,0)
^.1
"^DD",358.5,358.52,.01,1,1,0)
358.52^B
"^DD",358.5,358.52,.01,1,1,1)
S ^IBE(358.5,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",358.5,358.52,.01,1,1,2)
K ^IBE(358.5,DA(1),2,"B",$E(X,1,30),DA)
"^DD",358.5,358.52,.01,3)
What should the subfield be named? The label will print unless it is made invisible.
"^DD",358.5,358.52,.01,4)

"^DD",358.5,358.52,.01,21,0)
^^3^3^2931020^^^^
"^DD",358.5,358.52,.01,21,1,0)
 
"^DD",358.5,358.52,.01,21,2,0)
The name of the subfield. The label prints to the form unless it is made
"^DD",358.5,358.52,.01,21,3,0)
invisible.
"^DD",358.5,358.52,.01,"DT")
2930730
"^DD",358.5,358.52,.03,0)
SUBFIELD LABEL APPEARANCE^FX^^0;3^S X=$$UPPER^VALM1(X) K:$L(X)>4!("UBRI"'[$E(X,1))!("UBRI"'[$E(X,2))!("UBRI"'[$E(X,3))!("UBRI"'[$E(X,4)) X
"^DD",358.5,358.52,.03,.1)
HOW SHOULD THE LABEL APPEAR? CHOOSE FROM {U,B,R,I}
"^DD",358.5,358.52,.03,3)
B=bold,U=underline,R=reverse,I=invisible You can enter any combination of {B,U,R,I}. The label will not print if it is made invisible.
"^DD",358.5,358.52,.03,4)

"^DD",358.5,358.52,.03,21,0)
^^4^4^2940526^^^
"^DD",358.5,358.52,.03,21,1,0)
 
"^DD",358.5,358.52,.03,21,2,0)
The label can be made bold, underlined, or invisible. It can also be printed
"^DD",358.5,358.52,.03,21,3,0)
 in reverse, i.e., white on black. This field determines which of those
"^DD",358.5,358.52,.03,21,4,0)
 characteristics apply.
"^DD",358.5,358.52,.03,"DT")
2940816
"^DD",358.5,358.52,.04,0)
STARTING COLUMN FOR LABEL^NJ3,0XO^^0;4^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.5,358.52,.04,2)
S Y(0)=Y S:Y=+Y Y=Y+1
"^DD",358.5,358.52,.04,2.1)
S:Y=+Y Y=Y+1
"^DD",358.5,358.52,.04,3)
What block column should the label start in?
"^DD",358.5,358.52,.04,21,0)
^^2^2^2930715^^
"^DD",358.5,358.52,.04,21,1,0)
 
"^DD",358.5,358.52,.04,21,2,0)
The column, relative to the block, that the label should start at.
"^DD",358.5,358.52,.04,23,0)
^^4^4^2930715^
"^DD",358.5,358.52,.04,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.5,358.52,.04,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.5,358.52,.04,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.5,358.52,.04,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.5,358.52,.04,"DT")
2930617
"^DD",358.5,358.52,.05,0)
STARTING ROW FOR LABEL^NJ3,0XO^^0;5^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.5,358.52,.05,2)
S Y(0)=Y S:Y=+Y Y=Y+1
"^DD",358.5,358.52,.05,2.1)
S:Y=+Y Y=Y+1
"^DD",358.5,358.52,.05,3)
What block row should the label start in?
"^DD",358.5,358.52,.05,21,0)
^^2^2^2930608^
"^DD",358.5,358.52,.05,21,1,0)
 
"^DD",358.5,358.52,.05,21,2,0)
The row the label should be printed on.
"^DD",358.5,358.52,.05,23,0)
^^4^4^2930715^
"^DD",358.5,358.52,.05,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.5,358.52,.05,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.5,358.52,.05,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.5,358.52,.05,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.5,358.52,.05,"DT")
2930617
"^DD",358.5,358.52,.06,0)
STARTING ROW FOR DATA^NJ3,0XO^^0;6^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.5,358.52,.06,2)
S Y(0)=Y S:Y=+Y Y=Y+1
"^DD",358.5,358.52,.06,2.1)
S:Y=+Y Y=Y+1
"^DD",358.5,358.52,.06,3)
What block row should the data begin in?
"^DD",358.5,358.52,.06,21,0)
^^2^2^2930715^^
"^DD",358.5,358.52,.06,21,1,0)
 
"^DD",358.5,358.52,.06,21,2,0)
The row, relative to the block, that the data should print on.
"^DD",358.5,358.52,.06,23,0)
^^4^4^2930715^^
"^DD",358.5,358.52,.06,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.5,358.52,.06,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.5,358.52,.06,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.5,358.52,.06,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.5,358.52,.06,"DT")
2930617
"^DD",358.5,358.52,.07,0)
STARTING COLUMN FOR DATA^NJ3,0XO^^0;7^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.5,358.52,.07,2)
S Y(0)=Y S:Y=+Y Y=Y+1
"^DD",358.5,358.52,.07,2.1)
S:Y=+Y Y=Y+1
"^DD",358.5,358.52,.07,3)
What block column should the data begin in?
"^DD",358.5,358.52,.07,21,0)
^^2^2^2930608^
"^DD",358.5,358.52,.07,21,1,0)
 
"^DD",358.5,358.52,.07,21,2,0)
The column, relative to the block, that the data should print on.
"^DD",358.5,358.52,.07,23,0)
^^4^4^2930715^
"^DD",358.5,358.52,.07,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.5,358.52,.07,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.5,358.52,.07,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.5,358.52,.07,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.5,358.52,.07,"DT")
2930617
"^DD",358.5,358.52,.08,0)
LENGTH OF DATA^NJ3,0^^0;8^K:+X'=X!(X>150)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.5,358.52,.08,3)
How much space on the line should be allocated for the information to be displayed?
"^DD",358.5,358.52,.08,21,0)
^^3^3^2930527^
"^DD",358.5,358.52,.08,21,1,0)
 
"^DD",358.5,358.52,.08,21,2,0)
The amount of space, in terms of characters, that should be allocated
"^DD",358.5,358.52,.08,21,3,0)
to the data.
"^DD",358.5,358.52,.08,"DT")
2930322
"^DD",358.5,358.52,.09,0)
DATA^NJ1,0X^^0;9^K:+X'=X!(X>7)!(X<1)!(X?.E1"."1N.N)!($P($G(^IBE(358.6,+$P($G(^IBE(358.5,DA(1),0)),U,3),2)),U,(2*X)-1)="") X
"^DD",358.5,358.52,.09,.1)
WHAT DATA SHOULD BE DISPLAYED IN THIS SUBFIELD?
"^DD",358.5,358.52,.09,3)
WHAT DATA SHOULD BE DISPLAYED IN THIS SUBFIELD?
"^DD",358.5,358.52,.09,4)
D HELP1^IBDFU5
"^DD",358.5,358.52,.09,21,0)
^^4^4^2930527^
"^DD",358.5,358.52,.09,21,1,0)
 
"^DD",358.5,358.52,.09,21,2,0)
The package interface returns a record that may be composed of multiple
"^DD",358.5,358.52,.09,21,3,0)
fields. This identifies which of those fields should appear in this
"^DD",358.5,358.52,.09,21,4,0)
subfield.
"^DD",358.5,358.52,.09,"DT")
2930526
"^DD",358.6,358.6,0)
FIELD^^21^76
"^DD",358.6,358.6,0,"DDA")
N
"^DD",358.6,358.6,0,"DT")
3000124
"^DD",358.6,358.6,0,"ID",.06)
W ""
"^DD",358.6,358.6,0,"ID","WRITE")
N IBDWNAM S IBDWNAM=$E($P(^(0),U),1,40) D EN^DDIOL(IBDWNAM,"","!?0")
"^DD",358.6,358.6,0,"ID","WRITE1")
N IBDWTYPE S IBDWTYPE=$S($P(^(0),"^",6)=1:"INPUT",$P(^(0),"^",6)=2:"OUTPUT",$P(^(0),"^",6)=3:"SELECTION",1:"REPORT")_$S($P(^(0),U,6)=3&'$P(^(0),"^",13):"  ** NOT SCANNABLE **",1:"") D EN^DDIOL("TYPE="_IBDWTYPE,"","?45")
"^DD",358.6,358.6,0,"IX","B",358.6,.01)

"^DD",358.6,358.6,0,"IX","C",358.6,.04)

"^DD",358.6,358.6,0,"IX","D",358.6,3)

"^DD",358.6,358.6,0,"IX","E",358.6,.01)

"^DD",358.6,358.6,0,"NM","IMP/EXP PACKAGE INTERFACE")

"^DD",358.6,358.6,0,"PT",358.2,.11)

"^DD",358.6,358.6,0,"PT",358.5,.03)

"^DD",358.6,358.6,0,"PT",358.6,.13)

"^DD",358.6,358.6,0,"PT",358.93,.06)

"^DD",358.6,358.6,0,"VRPK")
IBD
"^DD",358.6,358.6,.01,0)
NAME^RF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",358.6,358.6,.01,1,0)
^.1
"^DD",358.6,358.6,.01,1,1,0)
358.6^B
"^DD",358.6,358.6,.01,1,1,1)
S ^IBE(358.6,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.6,.01,1,1,2)
K ^IBE(358.6,"B",$E(X,1,30),DA)
"^DD",358.6,358.6,.01,1,2,0)
358.6^E^MUMPS
"^DD",358.6,358.6,.01,1,2,1)
S ^IBE(358.6,"E",$E(X,$F(X," "),40),DA)=""
"^DD",358.6,358.6,.01,1,2,2)
K ^IBE(358.6,"E",$E(X,$F(X," "),40),DA)
"^DD",358.6,358.6,.01,1,2,"%D",0)
^^4^4^2940224^
"^DD",358.6,358.6,.01,1,2,"%D",1,0)
 
"^DD",358.6,358.6,.01,1,2,"%D",2,0)
For package interfaces that are output routines the name has the custodial
"^DD",358.6,358.6,.01,1,2,"%D",3,0)
package's name space as a prefix. This cross-reference removes that
"^DD",358.6,358.6,.01,1,2,"%D",4,0)
prefix. It is used to improve the display of output routines for the user.
"^DD",358.6,358.6,.01,1,2,"DT")
2930409
"^DD",358.6,358.6,.01,3)
Answer must be 3-40 characters in length. All entries with Action Type other than PRINT REPORT must be be prefixed with the namespace of the package that is responsible for the data.
"^DD",358.6,358.6,.01,21,0)
^^3^3^2950412^^^^
"^DD",358.6,358.6,.01,21,1,0)
 
"^DD",358.6,358.6,.01,21,2,0)
The name of the Package Interface. For interfaces returning data the name
"^DD",358.6,358.6,.01,21,3,0)
should be preceded with the namespace of the package.
"^DD",358.6,358.6,.01,23,0)
^^1^1^2950412^
"^DD",358.6,358.6,.01,23,1,0)
 
"^DD",358.6,358.6,.01,"DT")
2930409
"^DD",358.6,358.6,.02,0)
ENTRY POINT^F^^0;2^K:$L(X)>8!($L(X)<1) X
"^DD",358.6,358.6,.02,3)
What entry point into the routine does this package interface use?
"^DD",358.6,358.6,.02,21,0)
^^2^2^2941018^^
"^DD",358.6,358.6,.02,21,1,0)
 
"^DD",358.6,358.6,.02,21,2,0)
The entry point in the routine that should be called.
"^DD",358.6,358.6,.02,"DT")
2941018
"^DD",358.6,358.6,.03,0)
ROUTINE^F^^0;3^K:$L(X)>8!($L(X)<1) X
"^DD",358.6,358.6,.03,3)
What routine does this package interface use?
"^DD",358.6,358.6,.03,21,0)
^^2^2^2941018^^
"^DD",358.6,358.6,.03,21,1,0)
 
"^DD",358.6,358.6,.03,21,2,0)
The routine that should be called.
"^DD",358.6,358.6,.03,"DT")
2921125
"^DD",358.6,358.6,.04,0)
CUSTODIAL PACKAGE^F^^0;4^K:$L(X)>20!($L(X)<3) X
"^DD",358.6,358.6,.04,1,0)
^.1
"^DD",358.6,358.6,.04,1,1,0)
358.6^C
"^DD",358.6,358.6,.04,1,1,1)
S ^IBE(358.6,"C",$E(X,1,30),DA)=""
"^DD",358.6,358.6,.04,1,1,2)
K ^IBE(358.6,"C",$E(X,1,30),DA)
"^DD",358.6,358.6,.04,1,1,"DT")
2921229
"^DD",358.6,358.6,.04,3)
For Package Interfaces that return data the Custodial Package is the package that is providing the data. For Package Interfaces that print reports it is the package that is providing the report.
"^DD",358.6,358.6,.04,21,0)
^^2^2^2940217^
"^DD",358.6,358.6,.04,21,1,0)
This is a free text pointer to the package file. It serves only to
"^DD",358.6,358.6,.04,21,2,0)
document the custodial package of the data.
"^DD",358.6,358.6,.04,"DT")
2930726
"^DD",358.6,358.6,.05,0)
VARIABLE DATA?^S^0:NO;1:YES;^0;5^Q
"^DD",358.6,358.6,.05,.1)
DOES THE DATA VARY FROM PATIENT TO PATIENT?
"^DD",358.6,358.6,.05,3)
Enter YES if the data returned is variable, NO if the data is always the same.
"^DD",358.6,358.6,.05,21,0)
^^3^3^2930726^^^
"^DD",358.6,358.6,.05,21,1,0)
This field is used in the batch printing of encounter forms. The purpose
"^DD",358.6,358.6,.05,21,2,0)
is to avoid recomputing fields whose data does not change from patient to
"^DD",358.6,358.6,.05,21,3,0)
patient.
"^DD",358.6,358.6,.05,"DT")
2931124
"^DD",358.6,358.6,.06,0)
ACTION TYPE^RS^1:INPUT;2:DISPLAY;3:SELECTION;4:PRINT REPORT;^0;6^Q
"^DD",358.6,358.6,.06,3)
Is this interface for inputting data, displaying data to a form, for creating lists that will appear on a form, or for printing reports?
"^DD",358.6,358.6,.06,21,0)
^^9^9^2950825^
"^DD",358.6,358.6,.06,21,1,0)
                                                                   
"^DD",358.6,358.6,.06,21,2,0)
 
"^DD",358.6,358.6,.06,21,3,0)
Enter 1 for INPUT if the interface accepts data input from the user
"^DD",358.6,358.6,.06,21,4,0)
and transmits the data to the appropriate package. Enter 2 for DISPLAY
"^DD",358.6,358.6,.06,21,5,0)
if the interface retrieve data for display to a form. Enter 3 for
"^DD",358.6,358.6,.06,21,6,0)
SELECTION if the interface is for building a list to display
"^DD",358.6,358.6,.06,21,7,0)
to a form. Enter 4 if the interface is for printing a report. If
"^DD",358.6,358.6,.06,21,8,0)
the ACTION TYPE is SELECTION then the data type must be a record and the
"^DD",358.6,358.6,.06,21,9,0)
first piece must be the ID use to uniquely identify the selection.
"^DD",358.6,358.6,.06,"DT")
2950825
"^DD",358.6,358.6,.07,0)
DATA TYPE^S^1:SINGLE VALUE;2:RECORD;3:LIST OF SINGLE VALUES;4:LIST OF RECORDS;5:WORD PROCESSING;^0;7^Q
"^DD",358.6,358.6,.07,.1)
WHAT FORMAT WILL THE DATA BE IN?
"^DD",358.6,358.6,.07,3)
What format will the data be in?
"^DD",358.6,358.6,.07,21,0)
^^9^9^2950825^
"^DD",358.6,358.6,.07,21,1,0)
Only applies to selection or display interfaces, both of which retrieve
"^DD",358.6,358.6,.07,21,2,0)
data for display to a form. It is the type of format the data should be
"^DD",358.6,358.6,.07,21,3,0)
in.
"^DD",358.6,358.6,.07,21,4,0)
 
"^DD",358.6,358.6,.07,21,5,0)
A single value is a string without pieces. A record is a set of strings
"^DD",358.6,358.6,.07,21,6,0)
concatenated together with "^" separating the pieces. A list is an
"^DD",358.6,358.6,.07,21,7,0)
indefinite number of values, each numbered, each containing the same type
"^DD",358.6,358.6,.07,21,8,0)
of information. A word processing data type will be in FM format.
"^DD",358.6,358.6,.07,21,9,0)
If the ACTION TYPE is SELECTION then the data type must be record.
"^DD",358.6,358.6,.07,"DT")
2930726
"^DD",358.6,358.6,.08,0)
PRINT COMPLETE^S^0:NO;1:YES;^0;8^Q
"^DD",358.6,358.6,.08,3)
If there is insufficient room on the form to print the data, should it be re-printed in full on a separate page?
"^DD",358.6,358.6,.08,21,0)
^^4^4^2930527^
"^DD",358.6,358.6,.08,21,1,0)
 
"^DD",358.6,358.6,.08,21,2,0)
This field is used to determine what should happen if the data does not
"^DD",358.6,358.6,.08,21,3,0)
fit in the space allocated to it on the form. If answered YES the data
"^DD",358.6,358.6,.08,21,4,0)
will be printed on another page.
"^DD",358.6,358.6,.08,"DT")
2930507
"^DD",358.6,358.6,.09,0)
AVAILABLE? (Y/N)^RS^0:NO;1:YES;^0;9^Q
"^DD",358.6,358.6,.09,3)
Is this package interface now available for use?
"^DD",358.6,358.6,.09,21,0)
^^3^3^2930527^
"^DD",358.6,358.6,.09,21,1,0)
 
"^DD",358.6,358.6,.09,21,2,0)
This field should be set to YES if the interface is available, NO if it is
"^DD",358.6,358.6,.09,21,3,0)
not available. Interfaces that are not available are not called.
"^DD",358.6,358.6,.09,"DT")
2921213
"^DD",358.6,358.6,.1,0)
HEALTH SUMMARY?^S^0:NO;1:YES;^0;10^Q
"^DD",358.6,358.6,.1,.1)
ARE YOU REQUESTING A HEALTH SUMMARY?
"^DD",358.6,358.6,.1,2.1)
S:Y=+Y Y=Y+1
"^DD",358.6,358.6,.1,3)
 Are you requesting a HEALTH SUMMARY to print?
"^DD",358.6,358.6,.1,21,0)
^^7^7^2930616^
"^DD",358.6,358.6,.1,21,1,0)
 
"^DD",358.6,358.6,.1,21,2,0)
This field will determine how to go about printing the report or form. It
"^DD",358.6,358.6,.1,21,3,0)
applies only to Package Interfaces of ACTION TYPE = PRINT REPORT. Health
"^DD",358.6,358.6,.1,21,4,0)
Summaries use the field HEALTH SUMMARY to determine the type of Health
"^DD",358.6,358.6,.1,21,5,0)
Summary to print. The process of printing Health Summaries dos not use the
"^DD",358.6,358.6,.1,21,6,0)
fields ENTRY POINT or ROUTINE, since all Health Summaries are printed in
"^DD",358.6,358.6,.1,21,7,0)
the same way.
"^DD",358.6,358.6,.1,"DT")
2930616
"^DD",358.6,358.6,.11,0)
TYPE OF HEALTH SUMMARY^*P142'^GMT(142,^0;11^S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",358.6,358.6,.11,3)
Which Health Summary do you want printed?
"^DD",358.6,358.6,.11,12)
EXCLUDES AD HOC HEALTH SUMMARIES
"^DD",358.6,358.6,.11,12.1)
S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION"""
"^DD",358.6,358.6,.11,21,0)
^^4^4^2940224^
"^DD",358.6,358.6,.11,21,1,0)
 
"^DD",358.6,358.6,.11,21,2,0)
This identifies the Health Summary that should be printed when this
"^DD",358.6,358.6,.11,21,3,0)
Package Interface is invoked. It should be null unless the HEALTH SUMMARY?
"^DD",358.6,358.6,.11,21,4,0)
field #.1 is coded YES.
"^DD",358.6,358.6,.11,"DT")
2930617
"^DD",358.6,358.6,.12,0)
TOOLKIT MEMBER?^S^0:NO;1:YES;^0;12^Q
"^DD",358.6,358.6,.12,.1)
SHOULD THIS PACKAGE INTERFACE BE PART OF THE TOOLKIT?
"^DD",358.6,358.6,.12,3)
Enter YES if this PACKAGE INTERFACE was added by the package developers as part of the toolkit, enter NO otherwise.
"^DD",358.6,358.6,.12,21,0)
^^3^3^2950808^^
"^DD",358.6,358.6,.12,21,1,0)
 
"^DD",358.6,358.6,.12,21,2,0)
Package Interfaces that are developed for national use will be documented
"^DD",358.6,358.6,.12,21,3,0)
as being part of the toolkit.
"^DD",358.6,358.6,.12,"DT")
2950711
"^DD",358.6,358.6,.13,0)
PACKAGE INTERFACE FOR INPUT^*P358.6'^IBE(358.6,^0;13^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",358.6,358.6,.13,.1)
WHICH INTERFACE SHOULD THIS LIST USE FOR PASSING DATA TO THE DATA BASE?
"^DD",358.6,358.6,.13,3)
What interface should be used for inputting data entered on the selection list?
"^DD",358.6,358.6,.13,12)
Must be an available interfaces for accepting input from selection lists.
"^DD",358.6,358.6,.13,12.1)
S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S"""
"^DD",358.6,358.6,.13,21,0)
^^1^1^2950825^^^^
"^DD",358.6,358.6,.13,21,1,0)
Used to map scanned data to DHCP.
"^DD",358.6,358.6,.13,"DT")
2950825
"^DD",358.6,358.6,.14,0)
DYNAMIC SELECTIONS^S^0:NO;1:YES;^0;14^Q
"^DD",358.6,358.6,.14,3)
Only for selection routines. Enter YES if the Package Interface builds the selection list each time the form is printed.
"^DD",358.6,358.6,.14,21,0)
^^2^2^2950719^
"^DD",358.6,358.6,.14,21,1,0)
This is used to indicate whether the interface is used to build selection
"^DD",358.6,358.6,.14,21,2,0)
lists at print time.
"^DD",358.6,358.6,.14,"DT")
2941221
"^DD",358.6,358.6,.15,0)
DO NOT USE DFN AS A SUBSCRIPT^*S^0:NO;1:YES;^0;15^Q
"^DD",358.6,358.6,.15,3)
If the patient DFN should not be used as a subscript when passing data enter YES.
"^DD",358.6,358.6,.15,12)
If the action type is not OUTPUT ROUTINE then this field should not be set to NO.
"^DD",358.6,358.6,.15,12.1)
S DIC("S")="I (Y=1)!($P(^IBE(358.6,DA,0),U,6)=2)"
"^DD",358.6,358.6,.15,21,0)
^^6^6^2950413^^^^
"^DD",358.6,358.6,.15,21,1,0)
Originally, the patient DFN was used as a subscript when returning data
"^DD",358.6,358.6,.15,21,2,0)
for Package Interfaces of type output, but not for other types of
"^DD",358.6,358.6,.15,21,3,0)
interfaces. It is no longer necessary for any new Package Interface to use
"^DD",358.6,358.6,.15,21,4,0)
DFN as a subscript, but, to maintain compatibilty, output routines
"^DD",358.6,358.6,.15,21,5,0)
must set this field to YES if DFN is not to be used as a subscript. This
"^DD",358.6,358.6,.15,21,6,0)
field has no effect on other types of interfaces.
"^DD",358.6,358.6,.15,"DT")
2950413
"^DD",358.6,358.6,.16,0)
ALLOWED OBJECT USE^FX^^0;16^S X=$$UPPER^VALM1(X) K:$L(X)>4!("SMHP"'[$E(X,1))!("SMHP"'[$E(X,2))!("SMHP"'[$E(X,3))!("SMHP"'[$E(X,4)) X
"^DD",358.6,358.6,.16,3)

"^DD",358.6,358.6,.16,4)
D HELP7^IBDFU5A
"^DD",358.6,358.6,.16,21,0)
^^5^5^2950913^^^^
"^DD",358.6,358.6,.16,21,1,0)
This field applies only to package interfaces for input and is used to
"^DD",358.6,358.6,.16,21,2,0)
determine which package interfaces a particular type of form object may
"^DD",358.6,358.6,.16,21,3,0)
point to. Some combinations don't make sense. For example, it would not
"^DD",358.6,358.6,.16,21,4,0)
make sense to allow a multiple choice question to point to vitals, which
"^DD",358.6,358.6,.16,21,5,0)
is used to input data such as temperature and blood pressure.
"^DD",358.6,358.6,.16,"DT")
2950913
"^DD",358.6,358.6,.17,0)
ASK FOR ADDITIONAL NARRATIVE^S^0:NO;1:YES;^0;17^Q
"^DD",358.6,358.6,.17,3)
Answer yes or no.
"^DD",358.6,358.6,.17,21,0)
^^8^8^2960123^
"^DD",358.6,358.6,.17,21,1,0)
Enter whether users should be prompted for specifying the provider
"^DD",358.6,358.6,.17,21,2,0)
narrative that will be sent to PCE (and problem list) when creating a
"^DD",358.6,358.6,.17,21,3,0)
selection list.  If this is answered no and the narrative is sent to
"^DD",358.6,358.6,.17,21,4,0)
PCE then the text as it appears on the form will be used as the
"^DD",358.6,358.6,.17,21,5,0)
provider narrative.
"^DD",358.6,358.6,.17,21,6,0)
 
"^DD",358.6,358.6,.17,21,7,0)
Generally only diagnosis and clinical lexicon entries will want this
"^DD",358.6,358.6,.17,21,8,0)
field set to Yes.
"^DD",358.6,358.6,.17,"DT")
2960123
"^DD",358.6,358.6,.18,0)
ASK FOR CLINICAL LEXICON^S^0:NO;1:YES;^0;18^Q
"^DD",358.6,358.6,.18,3)
 Enter 'Yes' if you want to map entries from this interface to the clinical lexicon.
"^DD",358.6,358.6,.18,21,0)
^^10^10^2960205^
"^DD",358.6,358.6,.18,21,1,0)
If this field is answered 'Yes' then users who are editing or creating
"^DD",358.6,358.6,.18,21,2,0)
selection lists based on this interface will be asked to map each entry
"^DD",358.6,358.6,.18,21,3,0)
(thought it is optional) to a clinical lexicon entry.  This is highly
"^DD",358.6,358.6,.18,21,4,0)
recommended for user who are scanning diagnosis entries and trying to 
"^DD",358.6,358.6,.18,21,5,0)
add entries to the Patients Problem list.
"^DD",358.6,358.6,.18,21,6,0)
 
"^DD",358.6,358.6,.18,21,7,0)
The primary purpose of this field is to allow sites who have built selection
"^DD",358.6,358.6,.18,21,8,0)
lists using the ICD9 Diagnosis file to map each entry to the clinical lexicon.
"^DD",358.6,358.6,.18,21,9,0)
The Problem List EP has recommended that each problem added to the problem
"^DD",358.6,358.6,.18,21,10,0)
list be associated with a clinical lexicon entry.
"^DD",358.6,358.6,.18,"DT")
2960205
"^DD",358.6,358.6,.19,0)
DQ REQUIRED^S^1:YES;^0;19^Q
"^DD",358.6,358.6,.19,21,0)
^^2^2^2960212^
"^DD",358.6,358.6,.19,21,1,0)
Field used to determine if a data qualifier is required for this
"^DD",358.6,358.6,.19,21,2,0)
input interface.
"^DD",358.6,358.6,.19,"DT")
2960212
"^DD",358.6,358.6,.2,0)
ASK FOR CLINICAL REMINDERS^S^0:NO;1:YES;^0;20^Q
"^DD",358.6,358.6,.2,3)
If this package interface is for display of clinical reminders answer yes, otherwise answer no.
"^DD",358.6,358.6,.2,21,0)
^^2^2^2990122^^^^
"^DD",358.6,358.6,.2,21,1,0)
If this package interface is for display of clinical reminders answer yes, 
"^DD",358.6,358.6,.2,21,2,0)
otherwise answer no.
"^DD",358.6,358.6,.2,"DT")
2971015
"^DD",358.6,358.6,.21,0)
ASK FOR CPT MODIFIERS?^S^0:NO;1:YES;^0;21^Q
"^DD",358.6,358.6,.21,3)
If this package interface is to prompt for CPT Modifiers, answer yes, otherwise answer no.
"^DD",358.6,358.6,.21,21,0)
^^3^3^3000124^
"^DD",358.6,358.6,.21,21,1,0)
ASK FOR CPT MODIFIERS field will be used when selecting CPT codes.  If
"^DD",358.6,358.6,.21,21,2,0)
answered "YES" and data is a procedure, CPT Modifiers should be asked
"^DD",358.6,358.6,.21,21,3,0)
during Forms Design and Manual Data Entry.
"^DD",358.6,358.6,.21,"DT")
3000124
"^DD",358.6,358.6,1,0)
DESCRIPTION^358.61^^1;0
"^DD",358.6,358.6,1,21,0)
^^1^1^2950719^^^^
"^DD",358.6,358.6,1,21,1,0)
Should describe the data being exchanged by the package interface.
"^DD",358.6,358.6,2.01,0)
PIECE 1 DESCRIPTIVE NAME^F^^2;1^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.01,.1)
WHAT IS THE FIRST PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.01,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.01,21,0)
^^3^3^2930527^
"^DD",358.6,358.6,2.01,21,1,0)
 
"^DD",358.6,358.6,2.01,21,2,0)
Should be a descriptive name of the first field in the record returned by
"^DD",358.6,358.6,2.01,21,3,0)
the interface.
"^DD",358.6,358.6,2.01,"DT")
2930726
"^DD",358.6,358.6,2.02,0)
PIECE 1 MAXIMUM LENGTH^NJ3,0^^2;2^K:+X'=X!(X>210)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.02,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.02,3)
Type a Number between 0 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.02,21,0)
^^3^3^2930527^
"^DD",358.6,358.6,2.02,21,1,0)
 
"^DD",358.6,358.6,2.02,21,2,0)
The maximum length of the first field of the record returned by the
"^DD",358.6,358.6,2.02,21,3,0)
interface.
"^DD",358.6,358.6,2.02,"DT")
2930726
"^DD",358.6,358.6,2.03,0)
PIECE 2 DESCRIPTIVE NAME^F^^2;3^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.03,.1)
WHAT IS THE SECOND PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.03,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.03,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,2.03,21,1,0)
 
"^DD",358.6,358.6,2.03,21,2,0)
A descriptive name of the second field of the record returned by the
"^DD",358.6,358.6,2.03,21,3,0)
interface routine.
"^DD",358.6,358.6,2.03,"DT")
2930726
"^DD",358.6,358.6,2.04,0)
WHAT IS ITS MAXIMUM LENGTH?^NJ3,0^^2;4^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.04,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.04,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,2.04,21,1,0)
 
"^DD",358.6,358.6,2.04,21,2,0)
The maximum length of the second field of the record returned by the
"^DD",358.6,358.6,2.04,21,3,0)
interface routine.
"^DD",358.6,358.6,2.04,"DT")
2930726
"^DD",358.6,358.6,2.05,0)
PIECE 3 DESCRIPTIVE NAME^F^^2;5^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.05,.1)
WHAT IS THE THIRD PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.05,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.05,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,2.05,21,1,0)
 
"^DD",358.6,358.6,2.05,21,2,0)
A descriptive name of the third field of the record returned by the
"^DD",358.6,358.6,2.05,21,3,0)
interface routine.
"^DD",358.6,358.6,2.05,"DT")
2930726
"^DD",358.6,358.6,2.06,0)
PIECE 3 MAXIMUM LENGTH^NJ3,0^^2;6^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.06,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.06,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.06,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.06,21,1,0)
 
"^DD",358.6,358.6,2.06,21,2,0)
The maximum length of the 3rd field returned by the interface routine.
"^DD",358.6,358.6,2.06,"DT")
2930726
"^DD",358.6,358.6,2.07,0)
PIECE 4 DESCRIPTIVE NAME^F^^2;7^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.07,.1)
WHAT IS THE FOURTH PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.07,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.07,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.07,21,1,0)
 
"^DD",358.6,358.6,2.07,21,2,0)
A descriptive name of the 4th field returned by the interface routine.
"^DD",358.6,358.6,2.07,"DT")
2930726
"^DD",358.6,358.6,2.08,0)
PIECE 4 MAXIMUM LENGTH^NJ3,0^^2;8^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.08,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.08,3)
Type a Number between 1 and 200, 0 Decimal Digits
"^DD",358.6,358.6,2.08,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.08,21,1,0)
 
"^DD",358.6,358.6,2.08,21,2,0)
The maximum length of the 4th field returned by the interface routine.
"^DD",358.6,358.6,2.08,"DT")
2930726
"^DD",358.6,358.6,2.09,0)
PIECE 5 DESCRIPTIVE NAME^F^^2;9^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.09,.1)
WHAT IS THE FIFTH PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.09,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.09,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.09,21,1,0)
 
"^DD",358.6,358.6,2.09,21,2,0)
A descriptive name of the 5th field returned by the interface routine.
"^DD",358.6,358.6,2.09,"DT")
2930726
"^DD",358.6,358.6,2.1,0)
PIECE 5 MAXIMUM LENGTH^NJ3,0^^2;10^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.1,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.1,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.1,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.1,21,1,0)
 
"^DD",358.6,358.6,2.1,21,2,0)
The maximum length of the 5th field returned by the interface routine.
"^DD",358.6,358.6,2.1,"DT")
2930726
"^DD",358.6,358.6,2.11,0)
PIECE 6 DESCRIPTIVE NAME^F^^2;11^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.11,.1)
WHAT IS THE SIXTH PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.11,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.11,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.11,21,1,0)
 
"^DD",358.6,358.6,2.11,21,2,0)
A descriptive name fo the 6th field returned by the interface routine.
"^DD",358.6,358.6,2.11,"DT")
2930726
"^DD",358.6,358.6,2.12,0)
PIECE 6 MAXIMUM LENGTH^NJ3,0^^2;12^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.12,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.12,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.12,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.12,21,1,0)
 
"^DD",358.6,358.6,2.12,21,2,0)
The maximum length of the 6th field returned by the interface routine.
"^DD",358.6,358.6,2.12,"DT")
2930726
"^DD",358.6,358.6,2.13,0)
PIECE 7 DESCRIPTIVE NAME^F^^2;13^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.13,.1)
WHAT IS THE SEVENTH PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.13,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.13,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,2.13,21,1,0)
 
"^DD",358.6,358.6,2.13,21,2,0)
A descriptive name for the 7th field returned by the package interface
"^DD",358.6,358.6,2.13,21,3,0)
routine.
"^DD",358.6,358.6,2.13,"DT")
2930726
"^DD",358.6,358.6,2.14,0)
PIECE 7 MAXIMUM LENGTH^NJ3,0^^2;14^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.14,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.14,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.14,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.14,21,1,0)
 
"^DD",358.6,358.6,2.14,21,2,0)
The maximum length of the 7th field returned by the interface routine.
"^DD",358.6,358.6,2.14,"DT")
2930726
"^DD",358.6,358.6,2.16,0)
PIECE 1 RECOMMENDED HEADER^F^^2;16^K:$L(X)>20!($L(X)<1) X
"^DD",358.6,358.6,2.16,3)
Answer must be 1-20 characters in length.
"^DD",358.6,358.6,2.16,21,0)
^^1^1^2950719^
"^DD",358.6,358.6,2.16,21,1,0)
The recommended header will be used as the default when designing a form.
"^DD",358.6,358.6,2.16,"DT")
2950417
"^DD",358.6,358.6,2.17,0)
IS PIECE 1 DISPLAYABLE?^S^0:NO;1:YES;^2;17^Q
"^DD",358.6,358.6,2.17,.1)
CAN THIS FIELD BE DISPLAYED TO THE USER?
"^DD",358.6,358.6,2.17,3)
The first piece of the returned record is reserved for the unique id of the selection. Enter no if it should not be displayed, for example, if it is a pointer.
"^DD",358.6,358.6,2.17,21,0)
^^3^3^2950719^^
"^DD",358.6,358.6,2.17,21,1,0)
This is used only for selection type interfaces. If NO, then the value can
"^DD",358.6,358.6,2.17,21,2,0)
not be displayed to the encounter form.  The first piece must contain the
"^DD",358.6,358.6,2.17,21,3,0)
unique id of the selection.
"^DD",358.6,358.6,2.17,"DT")
2930810
"^DD",358.6,358.6,2.18,0)
EXPORT SELECTIONS/CHOICES?^S^0:NO;1:YES;^2;18^Q
"^DD",358.6,358.6,2.18,3)
Enter NO if the ID returned by the PACKAGE INTERFACE is not constant between sites, for example, if it is a pointer. Otherwise answer YES.
"^DD",358.6,358.6,2.18,21,0)
^^8^8^2950825^
"^DD",358.6,358.6,2.18,21,1,0)
 
"^DD",358.6,358.6,2.18,21,2,0)
 
"^DD",358.6,358.6,2.18,21,3,0)
Applies to selection and input routines. Determines whether
"^DD",358.6,358.6,2.18,21,4,0)
selections appearing on selection lists and choices in a multiple choice
"^DD",358.6,358.6,2.18,21,5,0)
field will be exported along with the form that they appear on. The
"^DD",358.6,358.6,2.18,21,6,0)
import/export utility will not resolve pointers, so if the id used by
"^DD",358.6,358.6,2.18,21,7,0)
the package interface is a pointer that differs between sites
"^DD",358.6,358.6,2.18,21,8,0)
this field should contain NO.
"^DD",358.6,358.6,2.18,"DT")
2950825
"^DD",358.6,358.6,3,0)
USER LOOKUP^F^^3;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>240!($L(X)<1) X
"^DD",358.6,358.6,3,.1)
LIST OF WORDS TO MAKE LOOK-UPS EASIER
"^DD",358.6,358.6,3,1,0)
^.1
"^DD",358.6,358.6,3,1,1,0)
358.6^D^KWIC
"^DD",358.6,358.6,3,1,1,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^IBE(358.6,"D",I,DA)=""
"^DD",358.6,358.6,3,1,1,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^IBE(358.6,"D",I,DA)
"^DD",358.6,358.6,3,1,1,"%D",0)
^^3^3^2930409^^
"^DD",358.6,358.6,3,1,1,"%D",1,0)
 
"^DD",358.6,358.6,3,1,1,"%D",2,0)
This index is meant to assist the user in locating the correct package
"^DD",358.6,358.6,3,1,1,"%D",3,0)
interface needed to display a particular item of data to a form.
"^DD",358.6,358.6,3,1,1,"DT")
2930309
"^DD",358.6,358.6,3,3)
Enter words separated with spaces. They will be indexed to assist in lookup.
"^DD",358.6,358.6,3,4)
D LOOKUP^IBDF16
"^DD",358.6,358.6,3,21,0)
^^4^4^2940217^
"^DD",358.6,358.6,3,21,1,0)
 
"^DD",358.6,358.6,3,21,2,0)
This field is used to create a KWIC index for this file. The purpose is to
"^DD",358.6,358.6,3,21,3,0)
assist the user in locating the package interface he needs to display a
"^DD",358.6,358.6,3,21,4,0)
particular item of data to a form.
"^DD",358.6,358.6,3,"DT")
2930726
"^DD",358.6,358.6,4.01,0)
ENTRY ACTION^K^^4;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,4.01,3)
This is Standard MUMPS code.
"^DD",358.6,358.6,4.01,9)
@
"^DD",358.6,358.6,4.01,21,0)
^^3^3^2930527^
"^DD",358.6,358.6,4.01,21,1,0)
 
"^DD",358.6,358.6,4.01,21,2,0)
This code will be executed after the PROTECTED VARIABLES are newed, but
"^DD",358.6,358.6,4.01,21,3,0)
before the interface routine is called.
"^DD",358.6,358.6,4.01,"DT")
2930521
"^DD",358.6,358.6,5.01,0)
EXIT ACTION^K^^5;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,5.01,3)
This is Standard MUMPS code.
"^DD",358.6,358.6,5.01,9)
@
"^DD",358.6,358.6,5.01,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,5.01,21,1,0)
 
"^DD",358.6,358.6,5.01,21,2,0)
This code will be executed after the interface routine is called.
"^DD",358.6,358.6,5.01,21,3,0)
The effect of the NEW done on the PROTECTED VARIABLES is still in effect.
"^DD",358.6,358.6,5.01,"DT")
2930518
"^DD",358.6,358.6,6,0)
PROTECTED LOCAL VARIABLES^358.66^^6;0
"^DD",358.6,358.6,6,21,0)
^^11^11^2950719^^^
"^DD",358.6,358.6,6,21,1,0)
 
"^DD",358.6,358.6,6,21,2,0)
This is a list of variables that should be newed before the entry action
"^DD",358.6,358.6,6,21,3,0)
or calling the interface routine. It is protection against interfaces that
"^DD",358.6,358.6,6,21,4,0)
alter or kill variables, or entry actions that do so. Note that REQUIRED
"^DD",358.6,358.6,6,21,5,0)
VARIABLES should not also be PROTECTED VARIABLES. If an interface routine
"^DD",358.6,358.6,6,21,6,0)
changes a required variable, however, there is a way to protect it.
"^DD",358.6,358.6,6,21,7,0)
Supposing, for example, DFN is killed by the interface. This will protect
"^DD",358.6,358.6,6,21,8,0)
it:
"^DD",358.6,358.6,6,21,9,0)
     PROTECTED VARIABLE:   IBDFN
"^DD",358.6,358.6,6,21,10,0)
     ENTRY ACTION:  S IBDFN=DFN
"^DD",358.6,358.6,6,21,11,0)
     EXIT ACTION:   S DFN=IBDFN
"^DD",358.6,358.6,7,0)
REQUIRED LOCAL VARIABLES^358.67^^7;0
"^DD",358.6,358.6,7,21,0)
^^4^4^2930528^
"^DD",358.6,358.6,7,21,1,0)
 
"^DD",358.6,358.6,7,21,2,0)
The interface may require inputs. This field is a list of the required
"^DD",358.6,358.6,7,21,3,0)
local variables. The interface will not be called unless the variables are
"^DD",358.6,358.6,7,21,4,0)
determined to exist.
"^DD",358.6,358.6,8.01,0)
PIECE 1 NODE^F^^8;1^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.01,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.01,"DT")
2931203
"^DD",358.6,358.6,8.02,0)
PIECE 2 NODE^F^^8;2^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.02,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.02,"DT")
2931203
"^DD",358.6,358.6,8.03,0)
PIECE 3 NODE^F^^8;3^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.03,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.03,"DT")
2931203
"^DD",358.6,358.6,8.04,0)
PIECE 4 NODE^F^^8;4^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.04,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.04,"DT")
2931203
"^DD",358.6,358.6,8.05,0)
PIECE 5 NODE^F^^8;5^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.05,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.05,"DT")
2931203
"^DD",358.6,358.6,8.06,0)
PIECE 6 NODE^F^^8;6^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.06,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.06,"DT")
2931203
"^DD",358.6,358.6,8.07,0)
PIECE 7 NODE^F^^8;7^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.07,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.07,"DT")
2931203
"^DD",358.6,358.6,9,0)
PCE DIM INPUT TRANSFORM^K^^9;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,9,3)
The input transform should transform X to the value that should be passed.
"^DD",358.6,358.6,9,9)
@
"^DD",358.6,358.6,9,21,0)
^^3^3^2960401^^^^
"^DD",358.6,358.6,9,21,1,0)
Used to transform X, the identifier stored with the form object, to the
"^DD",358.6,358.6,9,21,2,0)
form that should be passed to the PCE Device Interface Module (DIM). It may,
"^DD",358.6,358.6,9,21,3,0)
for example, transform a code to an ien.
"^DD",358.6,358.6,9,"DT")
2960401
"^DD",358.6,358.6,10,0)
HELP TEXT^F^^10;1^K:$L(X)>245!($L(X)<1) X
"^DD",358.6,358.6,10,3)
This should provide some help to the user who is trying to enter a value associated with a bubble.
"^DD",358.6,358.6,10,21,0)
^^2^2^2950817^^^
"^DD",358.6,358.6,10,21,1,0)
This should provide some help to the user who is trying to enter a value
"^DD",358.6,358.6,10,21,2,0)
associated with a bubble.
"^DD",358.6,358.6,10,"DT")
2950522
"^DD",358.6,358.6,11,0)
VALIDATOR^K^^11;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,11,3)
This is Standard MUMPS code will kill X if X no longer identifies a valid code.
"^DD",358.6,358.6,11,9)
@
"^DD",358.6,358.6,11,21,0)
^^7^7^2950825^
"^DD",358.6,358.6,11,21,1,0)
This field is used to validate codes currently on a form. The variable X
"^DD",358.6,358.6,11,21,2,0)
should be set to the identifier that was returned by the Package
"^DD",358.6,358.6,11,21,3,0)
Interface. For selection interfaces, the identifier is always piece 1 of
"^DD",358.6,358.6,11,21,4,0)
the 0 node of the entry in the selection list. Xecuting this field will
"^DD",358.6,358.6,11,21,5,0)
result in X being killed if the value is not valid. This is used by the
"^DD",358.6,358.6,11,21,6,0)
maintanance utility, for example, to find CPT codes that have been
"^DD",358.6,358.6,11,21,7,0)
inactivated.
"^DD",358.6,358.6,11,"DT")
2950908
"^DD",358.6,358.6,12.01,0)
PCE DIM NODE^F^^12;1^K:$L(X)>30!($L(X)<1) X
"^DD",358.6,358.6,12.01,3)
What node will be used to pass the data?
"^DD",358.6,358.6,12.01,21,0)
^^1^1^2960401^^
"^DD",358.6,358.6,12.01,21,1,0)
The node used to pass the data to PCE, using the PCE DEVICE INTERFACE MODULE.
"^DD",358.6,358.6,12.01,"DT")
2960401
"^DD",358.6,358.6,12.02,0)
PCE DIM PIECE, VALUE^NJ2,0^^12;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.02,3)
What piece should be used to pass the value?
"^DD",358.6,358.6,12.02,21,0)
^^1^1^2960401^^^
"^DD",358.6,358.6,12.02,21,1,0)
The piece in the PXCA node used to pass the input value.
"^DD",358.6,358.6,12.02,"DT")
2960401
"^DD",358.6,358.6,12.03,0)
PCE DIM PIECE, NARRATIVE^NJ2,0^^12;3^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.03,3)
What piece should be used to pass the text displayed on the form?
"^DD",358.6,358.6,12.03,21,0)
^^1^1^2960401^^^^
"^DD",358.6,358.6,12.03,21,1,0)
The piece in the PCXA node used to pass the text displayed on the form.
"^DD",358.6,358.6,12.03,"DT")
2960401
"^DD",358.6,358.6,12.04,0)
PCE DIM PIECE, HEADER^NJ2,0^^12;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.04,3)
What piece should be used to pass the header displayed on the form?
"^DD",358.6,358.6,12.04,21,0)
^^2^2^2960401^^
"^DD",358.6,358.6,12.04,21,1,0)
The piece on the node specified by the PCE Device Interface Module
"^DD",358.6,358.6,12.04,21,2,0)
that the header is mapped to.
"^DD",358.6,358.6,12.04,"DT")
2960401
"^DD",358.6,358.6,12.05,0)
PCE DIM PIECE, DATA QUALIFIER^NJ2,0^^12;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.05,3)
What piece should be used to pass the data qualifier?
"^DD",358.6,358.6,12.05,21,0)
^^1^1^2960401^^^
"^DD",358.6,358.6,12.05,21,1,0)
The piece of the PXCA node where the data modifier belongs.
"^DD",358.6,358.6,12.05,"DT")
2960401
"^DD",358.6,358.6,12.06,0)
PCE DIM PIECE, QUANTITY^NJ2,0^^12;6^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.06,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",358.6,358.6,12.06,21,0)
^^2^2^2961031^
"^DD",358.6,358.6,12.06,21,1,0)
An entry in this field indicates which piece of the array the quantity
"^DD",358.6,358.6,12.06,21,2,0)
should be passed on when sending data to PCE.
"^DD",358.6,358.6,12.06,"DT")
2961031
"^DD",358.6,358.6,13,0)
ALLOWABLE QUALIFIERS^358.613V^^13;0
"^DD",358.6,358.6,13,21,0)
^^2^2^2980928^^^^
"^DD",358.6,358.6,13,21,1,0)
This mulitiple contains the list of quailifiers that may apply to the
"^DD",358.6,358.6,13,21,2,0)
data.
"^DD",358.6,358.6,14,0)
PCE DIM OUTPUT TRANSFORM^K^^14;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,14,3)
This should change Y, the value to be passed, to a value suitable for display.
"^DD",358.6,358.6,14,9)
@
"^DD",358.6,358.6,14,21,0)
^^3^3^2960401^^
"^DD",358.6,358.6,14,21,1,0)
This transform should set Y, the value to be passed to the PCE 
"^DD",358.6,358.6,14,21,2,0)
Device Interface Module, to a value that is suitable for display.
"^DD",358.6,358.6,14,21,3,0)
It may, for example, change an ien to a code.
"^DD",358.6,358.6,14,"DT")
2960401
"^DD",358.6,358.6,15,0)
DATA DESCRIPTION^358.615I^^15;0
"^DD",358.6,358.6,15,21,0)
^^2^2^2950330^
"^DD",358.6,358.6,15,21,1,0)
For interfaces that return records, this multiple stores information on
"^DD",358.6,358.6,15,21,2,0)
the fields, other than the first field.
"^DD",358.6,358.6,16.1,0)
ALLOW INPUT OF NARRATIVE?^S^n:NO;o:OPTIONAL;r:REQUIRED;^16;1^Q
"^DD",358.6,358.6,16.1,3)
Should the user be allowed to enter a narrative? Answer n=NO, o=OPTIONAL, r=REQUIRED
"^DD",358.6,358.6,16.1,21,0)
^^2^2^2950719^
"^DD",358.6,358.6,16.1,21,1,0)
For input interfaces, this field determines whether a narrative is
"^DD",358.6,358.6,16.1,21,2,0)
allowed by the PCE Generic Device Interface.
"^DD",358.6,358.6,16.1,"DT")
2950421
"^DD",358.6,358.6,16.2,0)
NARRATIVE DATA TYPE^P358.99'^IBE(358.99,^16;2^Q
"^DD",358.6,358.6,16.2,3)
What data type definition describes the narrative?
"^DD",358.6,358.6,16.2,21,0)
^^2^2^2951018^^
"^DD",358.6,358.6,16.2,21,1,0)
This determines, among other things, how much space to allocate for the
"^DD",358.6,358.6,16.2,21,2,0)
narrative.
"^DD",358.6,358.6,16.2,"DT")
2951018
"^DD",358.6,358.6,16.3,0)
NARRATIVE HEADER^F^^16;3^K:$L(X)>40!($L(X)<1) X
"^DD",358.6,358.6,16.3,3)
Answer must be 1-40 characters in length.
"^DD",358.6,358.6,16.3,21,0)
^^1^1^2950825^
"^DD",358.6,358.6,16.3,21,1,0)
Used to label the narrative field.
"^DD",358.6,358.6,16.3,"DT")
2950815
"^DD",358.6,358.6,16.5,0)
ALLOW INPUT OF PRIMARY VALUE?^S^n:NO;o:OPTIONAL;r:REQUIRED;^16;5^Q
"^DD",358.6,358.6,16.5,3)
Should a code be entered? n=NO, o=OPTIONAL, r=REQUIRED
"^DD",358.6,358.6,16.5,21,0)
^^2^2^2950719^
"^DD",358.6,358.6,16.5,21,1,0)
This applies only to interfaces for input and determines whether a
"^DD",358.6,358.6,16.5,21,2,0)
value, other than a narrative, can be entered.
"^DD",358.6,358.6,16.5,"DT")
2950426
"^DD",358.6,358.6,16.6,0)
PRIMARY VALUE DATA TYPE^P358.99'^IBE(358.99,^16;6^Q
"^DD",358.6,358.6,16.6,3)
What type of data is the primary value?
"^DD",358.6,358.6,16.6,21,0)
^^2^2^2951018^^^
"^DD",358.6,358.6,16.6,21,1,0)
This applies only to interfaces for input and determines, among other
"^DD",358.6,358.6,16.6,21,2,0)
things, the data type of the value to be entered.
"^DD",358.6,358.6,16.6,"DT")
2950914
"^DD",358.6,358.6,16.7,0)
PRIMARY VALUE HEADER^F^^16;7^K:$L(X)>40!($L(X)<1) X
"^DD",358.6,358.6,16.7,3)
Answer must be 1-40 characters in length.
"^DD",358.6,358.6,16.7,21,0)
^^1^1^2950815^
"^DD",358.6,358.6,16.7,21,1,0)
Used to label the primary value field.
"^DD",358.6,358.6,16.7,"DT")
2950815
"^DD",358.6,358.6,16.8,0)
ALLOW MULTIPLIERS^S^1:YES;^16;8^Q
"^DD",358.6,358.6,16.8,3)
Enter yes if this interface will allow entry of quantity at form development time.
"^DD",358.6,358.6,16.8,21,0)
^^3^3^2961031^
"^DD",358.6,358.6,16.8,21,1,0)
For selection interfaces, this determines whether 'quantity' should be
"^DD",358.6,358.6,16.8,21,2,0)
asked at form development time to pass multiple occurrences of a selection
"^DD",358.6,358.6,16.8,21,3,0)
to PCE.
"^DD",358.6,358.6,16.8,"DT")
2961031
"^DD",358.6,358.6,16.9,0)
ALLOW INPUT OF MULTIPLE CODES?^S^1:YES;^16;9^Q
"^DD",358.6,358.6,16.9,3)
Enter a 1 for 'YES'.
"^DD",358.6,358.6,16.9,21,0)
^^4^4^2961031^
"^DD",358.6,358.6,16.9,21,1,0)
Enter a one in this field if the users will be allowed to add more than
"^DD",358.6,358.6,16.9,21,2,0)
one code to pass along to PCE when one entry is bubbled.
"^DD",358.6,358.6,16.9,21,3,0)
Data in this field REQUIRES that field 17 be populated with mumps code
"^DD",358.6,358.6,16.9,21,4,0)
that will allow selection of the code if the entry is edited.
"^DD",358.6,358.6,16.9,"DT")
2961031
"^DD",358.6,358.6,17,0)
SELECTOR^K^^17;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,17,3)
Enter mumps code that will allow the form designer to add a choice to a multiple choice field.
"^DD",358.6,358.6,17,9)
@
"^DD",358.6,358.6,17,21,0)
^^9^9^2950908^^
"^DD",358.6,358.6,17,21,1,0)
This field only applies to input interfaces. It is executed as by an input
"^DD",358.6,358.6,17,21,2,0)
transform when creating a multiple choice field. It should:
"^DD",358.6,358.6,17,21,3,0)
1) Kill X if an nothing is selected, otherwise set X to a value suitable
"^DD",358.6,358.6,17,21,4,0)
for display, perhaps the code.
"^DD",358.6,358.6,17,21,5,0)
2) Set IBLABEL to a suitable label for the choice.
"^DD",358.6,358.6,17,21,6,0)
3) Set IBID to an identifier. The identifier should ideally be exportable,
"^DD",358.6,358.6,17,21,7,0)
meaning the same from site to site. This usually means a coded value
"^DD",358.6,358.6,17,21,8,0)
rather than an ien. The identfier should match that of a corresponding
"^DD",358.6,358.6,17,21,9,0)
selection interface, if there is one.
"^DD",358.6,358.6,17,"DT")
2950908
"^DD",358.6,358.6,18,0)
MANUAL DATA ENTRY ROUTINE^K^^18;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,18,3)
Enter the code to be executed during manual data entry for this interface.  This is Standard MUMPS code.
"^DD",358.6,358.6,18,9)
@
"^DD",358.6,358.6,18,21,0)
^^7^7^2960123^
"^DD",358.6,358.6,18,21,1,0)
This field should only be completed for input package interfaces.  This
"^DD",358.6,358.6,18,21,2,0)
code will be executed to provide quick data entry for a user trying to
"^DD",358.6,358.6,18,21,3,0)
input data for a form.  It is expected that the output of this field will
"^DD",358.6,358.6,18,21,4,0)
be used to format the PXCA array prior to calling PCE to file the data
"^DD",358.6,358.6,18,21,5,0)
for the encounter.
"^DD",358.6,358.6,18,21,6,0)
Developers writing routines for this entry should provide a roll and
"^DD",358.6,358.6,18,21,7,0)
scroll interface for manual entry of items only on the form.
"^DD",358.6,358.6,18,"DT")
2960123
"^DD",358.6,358.6,19,0)
EXTERNAL DISPLAY VALUES^K^^19;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,19,3)
This is Standard MUMPS code.
"^DD",358.6,358.6,19,9)
@
"^DD",358.6,358.6,19,21,0)
^^5^5^2960214^
"^DD",358.6,358.6,19,21,1,0)
Executable code used to translate the internal value that is to
"^DD",358.6,358.6,19,21,2,0)
be passed to PCE into its external value for display purposes.  It
"^DD",358.6,358.6,19,21,3,0)
is used by the data validation routines to display the external
"^DD",358.6,358.6,19,21,4,0)
values and descriptions of the data to be passed, to the user
"^DD",358.6,358.6,19,21,5,0)
for verification.
"^DD",358.6,358.6,19,"DT")
2960214
"^DD",358.6,358.6,20,0)
PASS DQ AS VALUE^S^1:YES;^20;1^Q
"^DD",358.6,358.6,20,3)
Enter Yes if the Data Qualifier should be passed as the Value when sending data to PCE.
"^DD",358.6,358.6,20,21,0)
^^7^7^2961031^
"^DD",358.6,358.6,20,21,1,0)
If the value of the Data Qualifier shall be passed to PCE as the VALUE,
"^DD",358.6,358.6,20,21,2,0)
this field should be set to one.  Doing so will prevent the data in the
"^DD",358.6,358.6,20,21,3,0)
VALUE from populating the PCE DIM NODE, but instead, will allow the Data
"^DD",358.6,358.6,20,21,4,0)
Qualifier to pass as the VALUE.
"^DD",358.6,358.6,20,21,5,0)
This is used mostly for YES/NO Data Qualifiers, where the value may
"^DD",358.6,358.6,20,21,6,0)
be a question, and the Data Qualifier Value, if bubbled, is the value
"^DD",358.6,358.6,20,21,7,0)
that must be placed on the PCE DIM NODE.
"^DD",358.6,358.6,20,"DT")
2961031
"^DD",358.6,358.6,21,0)
PCE DIM PIECE, VARIABLE VALUE^K^^21;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,21,3)
This is Standard MUMPS code.
"^DD",358.6,358.6,21,9)
@
"^DD",358.6,358.6,21,21,0)
^^7^7^2961031^
"^DD",358.6,358.6,21,21,1,0)
This field should be populated when the PCE DIM PIECE VALUE is not
"^DD",358.6,358.6,21,21,2,0)
constant.  If the value of that field is dependent upon specific conditions,
"^DD",358.6,358.6,21,21,3,0)
those conditions may be evaluated by placing the MUMPS code in this
"^DD",358.6,358.6,21,21,4,0)
field.  Ultimately, the code should return a value that will be used as
"^DD",358.6,358.6,21,21,5,0)
the PCE DIM PIECE VALUE.  If the return value is null, the original
"^DD",358.6,358.6,21,21,6,0)
PCE DIM PIECE VALUE field will be used to determine the piece location
"^DD",358.6,358.6,21,21,7,0)
to pass the VALUE on.
"^DD",358.6,358.6,21,"DT")
2961031
"^DD",358.6,358.61,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",358.6,358.61,0,"DT")
2921119
"^DD",358.6,358.61,0,"NM","DESCRIPTION")

"^DD",358.6,358.61,0,"UP")
358.6
"^DD",358.6,358.61,.01,0)
/6^W^^0;1^Q
"^DD",358.6,358.61,.01,3)
Enter a description of the data being exchanged.
"^DD",358.6,358.61,.01,21,0)
^^1^1^2950719^^
"^DD",358.6,358.61,.01,21,1,0)
This should describe the data being exchanged b the package interface.
"^DD",358.6,358.61,.01,"DT")
2930210
"^DD",358.6,358.613,0)
ALLOWABLE QUALIFIERS SUB-FIELD^^.08^6
"^DD",358.6,358.613,0,"DT")
2950810
"^DD",358.6,358.613,0,"IX","B",358.613,.01)

"^DD",358.6,358.613,0,"NM","ALLOWABLE QUALIFIERS")

"^DD",358.6,358.613,0,"UP")
358.6
"^DD",358.6,358.613,.01,0)
ALLOWABLE QUALIFIERS^MV^^0;1^Q
"^DD",358.6,358.613,.01,1,0)
^.1
"^DD",358.6,358.613,.01,1,1,0)
358.613^B
"^DD",358.6,358.613,.01,1,1,1)
S ^IBE(358.6,DA(1),13,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.613,.01,1,1,2)
K ^IBE(358.6,DA(1),13,"B",$E(X,1,30),DA)
"^DD",358.6,358.613,.01,1,1,3)
Required Index for Variable Pointer
"^DD",358.6,358.613,.01,3)
Which qualifiers can apply to the data?
"^DD",358.6,358.613,.01,21,0)
^^1^1^2951018^^^^
"^DD",358.6,358.613,.01,21,1,0)
A qualifier that can be used by this package interface.
"^DD",358.6,358.613,.01,"DT")
2950426
"^DD",358.6,358.613,.01,"V",0)
^.12P^2^2
"^DD",358.6,358.613,.01,"V",1,0)
358.98^QUALIFIER^1^Q^n^n
"^DD",358.6,358.613,.01,"V",2,0)
358.99^DATA ELEMENT^2^D^n^n
"^DD",358.6,358.613,.03,0)
INDEPENDENT MAPPING INFO?^RS^0:NO;1:YES;^0;3^Q
"^DD",358.6,358.613,.03,3)
YES means that fields on the form associated with this qualifier will have its own rules for entering the data to the database.
"^DD",358.6,358.613,.03,21,0)
^^2^2^2950719^
"^DD",358.6,358.613,.03,21,1,0)
YES means that data can be mapped into the PCE Generic Device Interface
"^DD",358.6,358.613,.03,21,2,0)
based on the qualifier.
"^DD",358.6,358.613,.03,"DT")
2950426
"^DD",358.6,358.613,.04,0)
PCE GDI NODE^F^^0;4^K:$L(X)>30!($L(X)<1) X
"^DD",358.6,358.613,.04,3)
What node should the qualifier be placed on?
"^DD",358.6,358.613,.04,21,0)
^^1^1^2950719^
"^DD",358.6,358.613,.04,21,1,0)
The node where the data should be placed.
"^DD",358.6,358.613,.04,"DT")
2950710
"^DD",358.6,358.613,.05,0)
PCE GDI PIECE, VALUE^NJ2,0^^0;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.613,.05,3)
What piece should the primary value be located?
"^DD",358.6,358.613,.05,21,0)
^^1^1^2950719^
"^DD",358.6,358.613,.05,21,1,0)
The piece on the node where the value should be placed.
"^DD",358.6,358.613,.05,"DT")
2950426
"^DD",358.6,358.613,.07,0)
PCE GDI PIECE, HEADER^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.613,.07,3)
What piece should the header be located on?
"^DD",358.6,358.613,.07,21,0)
^^1^1^2950719^
"^DD",358.6,358.613,.07,21,1,0)
The piece on the node where the associated header should be placed.
"^DD",358.6,358.613,.07,"DT")
2950426
"^DD",358.6,358.613,.08,0)
PCE GDI PIECE, QUALIFIER^NJ2,0^^0;8^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.613,.08,3)
What piece should the qualifier be located on?
"^DD",358.6,358.613,.08,21,0)
^^1^1^2950719^
"^DD",358.6,358.613,.08,21,1,0)
The piece where the qualifier should go.
"^DD",358.6,358.613,.08,"DT")
2950426
"^DD",358.6,358.615,0)
DATA DESCRIPTION SUB-FIELD^^.05^5
"^DD",358.6,358.615,0,"DT")
2950417
"^DD",358.6,358.615,0,"ID","WRITE")
D EN^DDIOL("  PIECE="_$P(^(0),U,3),"","?0")
"^DD",358.6,358.615,0,"IX","B",358.615,.01)

"^DD",358.6,358.615,0,"IX","C",358.615,.03)

"^DD",358.6,358.615,0,"NM","DATA DESCRIPTION")

"^DD",358.6,358.615,0,"UP")
358.6
"^DD",358.6,358.615,.01,0)
DATA^MF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",358.6,358.615,.01,1,0)
^.1
"^DD",358.6,358.615,.01,1,1,0)
358.615^B
"^DD",358.6,358.615,.01,1,1,1)
S ^IBE(358.6,DA(1),15,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.615,.01,1,1,2)
K ^IBE(358.6,DA(1),15,"B",$E(X,1,30),DA)
"^DD",358.6,358.615,.01,3)
Enter a descriptive name for this data field, up to 30 characters.
"^DD",358.6,358.615,.01,21,0)
^^1^1^2950719^
"^DD",358.6,358.615,.01,21,1,0)
A descriptive name for the data.
"^DD",358.6,358.615,.01,"DT")
2950320
"^DD",358.6,358.615,.02,0)
MAXIMUM LENGTH^RNJ3,0^^0;2^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.615,.02,3)
What is the maximum length of this field?
"^DD",358.6,358.615,.02,21,0)
^^1^1^2950719^
"^DD",358.6,358.615,.02,21,1,0)
The maximum length of the data.
"^DD",358.6,358.615,.02,"DT")
2950320
"^DD",358.6,358.615,.03,0)
PIECE^NJ1,0X^^0;3^K:+X'=X!(X>8)!(X<2)!(X?.E1"."1N.N)!($D(^IBE(358.6,D0,15,"C",X))) X
"^DD",358.6,358.615,.03,1,0)
^.1
"^DD",358.6,358.615,.03,1,1,0)
358.615^C
"^DD",358.6,358.615,.03,1,1,1)
S ^IBE(358.6,DA(1),15,"C",$E(X,1,30),DA)=""
"^DD",358.6,358.615,.03,1,1,2)
K ^IBE(358.6,DA(1),15,"C",$E(X,1,30),DA)
"^DD",358.6,358.615,.03,1,1,"%D",0)
^^1^1^2950320^
"^DD",358.6,358.615,.03,1,1,"%D",1,0)
Indexes the field by piece.
"^DD",358.6,358.615,.03,1,1,"DT")
2950320
"^DD",358.6,358.615,.03,3)
In the returned record, which piece will this field be?
"^DD",358.6,358.615,.03,21,0)
^^1^1^2950719^
"^DD",358.6,358.615,.03,21,1,0)
The piece that the data will be returned as.
"^DD",358.6,358.615,.03,"DT")
2950407
"^DD",358.6,358.615,.04,0)
ANNEX NODE^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.615,.04,3)
You can optionally specify the subscript to store the data. Use this when the entire record won't fit on one node.
"^DD",358.6,358.615,.04,21,0)
^^2^2^2950719^
"^DD",358.6,358.615,.04,21,1,0)
In case all the returned data can not be returned on a single node an
"^DD",358.6,358.615,.04,21,2,0)
annex node can be specified.
"^DD",358.6,358.615,.04,"DT")
2950320
"^DD",358.6,358.615,.05,0)
RECOMMENDED HEADER^F^^0;5^K:$L(X)>40!($L(X)<1) X
"^DD",358.6,358.615,.05,3)
Answer must be 1-40 characters in length.
"^DD",358.6,358.615,.05,21,0)
^^1^1^2950719^^
"^DD",358.6,358.615,.05,21,1,0)
The recommended header will be used as the default when designing a form.
"^DD",358.6,358.615,.05,"DT")
2950417
"^DD",358.6,358.66,0)
PROTECTED LOCAL VARIABLES SUB-FIELD^^.01^1
"^DD",358.6,358.66,0,"DT")
2930608
"^DD",358.6,358.66,0,"IX","B",358.66,.01)

"^DD",358.6,358.66,0,"NM","PROTECTED LOCAL VARIABLES")

"^DD",358.6,358.66,0,"UP")
358.6
"^DD",358.6,358.66,.01,0)
PROTECTED LOCAL VARIABLES^MFX^^0;1^K:'$$VARIABLE^IBDFU5(X) X
"^DD",358.6,358.66,.01,1,0)
^.1
"^DD",358.6,358.66,.01,1,1,0)
358.66^B
"^DD",358.6,358.66,.01,1,1,1)
S ^IBE(358.6,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.66,.01,1,1,2)
K ^IBE(358.6,DA(1),6,"B",$E(X,1,30),DA)
"^DD",358.6,358.66,.01,3)
Enter variables that should be NEWED before the entry action or calling the interface.
"^DD",358.6,358.66,.01,21,0)
^^3^3^2950426^^
"^DD",358.6,358.66,.01,21,1,0)
 
"^DD",358.6,358.66,.01,21,2,0)
A list of variables that should be newed before the entry action or
"^DD",358.6,358.66,.01,21,3,0)
calling the interface.
"^DD",358.6,358.66,.01,"DT")
2930608
"^DD",358.6,358.67,0)
REQUIRED LOCAL VARIABLES SUB-FIELD^^.01^1
"^DD",358.6,358.67,0,"DT")
2930521
"^DD",358.6,358.67,0,"IX","B",358.67,.01)

"^DD",358.6,358.67,0,"NM","REQUIRED LOCAL VARIABLES")

"^DD",358.6,358.67,0,"UP")
358.6
"^DD",358.6,358.67,.01,0)
REQUIRED LOCAL VARIABLE^MFX^^0;1^K:'$$VARIABLE^IBDFU5(X) X
"^DD",358.6,358.67,.01,1,0)
^.1
"^DD",358.6,358.67,.01,1,1,0)
358.67^B
"^DD",358.6,358.67,.01,1,1,1)
S ^IBE(358.6,DA(1),7,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.67,.01,1,1,2)
K ^IBE(358.6,DA(1),7,"B",$E(X,1,30),DA)
"^DD",358.6,358.67,.01,3)
Enter any variables that must exist before the Package Interface routine is called.
"^DD",358.6,358.67,.01,21,0)
^^4^4^2930528^
"^DD",358.6,358.67,.01,21,1,0)
 
"^DD",358.6,358.67,.01,21,2,0)
A variable that is required input to the interface routine. The interface
"^DD",358.6,358.67,.01,21,3,0)
routine will not be called if all of the required variables are not
"^DD",358.6,358.67,.01,21,4,0)
defined.
"^DD",358.6,358.67,.01,"DT")
2930521
"^DD",358.91,358.91,0)
FIELD^^.04^4
"^DD",358.91,358.91,0,"DT")
2960123
"^DD",358.91,358.91,0,"IX","B",358.91,.01)

"^DD",358.91,358.91,0,"NM","IMP/EXP MARKING AREA")

"^DD",358.91,358.91,0,"PT",358.22,.06)

"^DD",358.91,358.91,0,"VRPK")
IBD
"^DD",358.91,358.91,.01,0)
NAME^RFX^^0;1^K:$L(X)>30 X
"^DD",358.91,358.91,.01,1,0)
^.1
"^DD",358.91,358.91,.01,1,1,0)
358.91^B
"^DD",358.91,358.91,.01,1,1,1)
S ^IBE(358.91,"B",$E(X,1,30),DA)=""
"^DD",358.91,358.91,.01,1,1,2)
K ^IBE(358.91,"B",$E(X,1,30),DA)
"^DD",358.91,358.91,.01,3)
NAME MUST BE UNDER 31 CHARACTERS
"^DD",358.91,358.91,.01,21,0)
^^1^1^2930608^
"^DD",358.91,358.91,.01,21,1,0)
The name should describe the appearance of the marking area on the form.
"^DD",358.91,358.91,.02,0)
DISPLAY STRING^F^^0;2^K:$L(X)>20!($L(X)<1) X
"^DD",358.91,358.91,.02,3)
Answer must be 1-20 characters in length.
"^DD",358.91,358.91,.02,21,0)
^^2^2^2930528^
"^DD",358.91,358.91,.02,21,1,0)
 
"^DD",358.91,358.91,.02,21,2,0)
The text that should be displayed in the MARKING AREA.
"^DD",358.91,358.91,.02,"DT")
2921207
"^DD",358.91,358.91,.03,0)
TOOL KIT MEMBER?^S^0:NO;1:YES;^0;3^Q
"^DD",358.91,358.91,.03,3)
Enter YES if the MARKING AREA is part of the tool kit, NO otherwise.
"^DD",358.91,358.91,.03,21,0)
^^2^2^2960123^
"^DD",358.91,358.91,.03,21,1,0)
Used to prevent local sites from editing MARKING AREAS that are part of the
"^DD",358.91,358.91,.03,21,2,0)
tool kit.
"^DD",358.91,358.91,.03,"DT")
2960123
"^DD",358.91,358.91,.04,0)
REQUIRES SPECIAL PROCEDURE?^S^0:NO;1:YES;^0;4^Q
"^DD",358.91,358.91,.04,3)
Answer NO if the Marking Area is just text, YES if it requires a special procedure to print.
"^DD",358.91,358.91,.04,21,0)
^^2^2^2960123^
"^DD",358.91,358.91,.04,21,1,0)
No means that the Marking Area is just text that can be printed.  YES 
"^DD",358.91,358.91,.04,21,2,0)
means that a special procedure must be called to print the Marking Area.
"^DD",358.91,358.91,.04,"DT")
2960123
"^DD",358.93,358.93,0)
FIELD^^1^9
"^DD",358.93,358.93,0,"DDA")
N
"^DD",358.93,358.93,0,"DT")
2960119
"^DD",358.93,358.93,0,"IX","A",358.931,.01)

"^DD",358.93,358.93,0,"IX","A1",358.931,.02)

"^DD",358.93,358.93,0,"IX","B",358.93,.01)

"^DD",358.93,358.93,0,"IX","C",358.93,.08)

"^DD",358.93,358.93,0,"NM","IMP/EXP MULTIPLE CHOICE FIELD")

"^DD",358.93,358.93,0,"VRPK")
IBD
"^DD",358.93,358.93,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",358.93,358.93,.01,1,0)
^.1
"^DD",358.93,358.93,.01,1,1,0)
358.93^B
"^DD",358.93,358.93,.01,1,1,1)
S ^IBE(358.93,"B",$E(X,1,30),DA)=""
"^DD",358.93,358.93,.01,1,1,2)
K ^IBE(358.93,"B",$E(X,1,30),DA)
"^DD",358.93,358.93,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",358.93,358.93,.01,21,0)
^^2^2^2930623^^^^
"^DD",358.93,358.93,.01,21,1,0)
 
"^DD",358.93,358.93,.01,21,2,0)
The division the setup is for.
"^DD",358.93,358.93,.01,"DT")
2930518
"^DD",358.93,358.93,.02,0)
QUESTION OR EXPLANATION ^F^^0;2^K:$L(X)>150!($L(X)<1) X
"^DD",358.93,358.93,.02,.1)
YOU CAN ENTER TEXT, SUCH AS A QUESTION, TO APPEAR ON THE FORM
"^DD",358.93,358.93,.02,3)
You may enter text, such as a question, to appear as part of the input field.
"^DD",358.93,358.93,.02,"DT")
2940721
"^DD",358.93,358.93,.03,0)
STARTING COLUMN FOR TEXT^NJ3,0XO^^0;3^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.93,358.93,.03,2)
S Y(0)=Y S Y=+Y+1
"^DD",358.93,358.93,.03,2.1)
S Y=+Y+1
"^DD",358.93,358.93,.03,3)
What block column shuld the label begin in?
"^DD",358.93,358.93,.03,"DT")
2940721
"^DD",358.93,358.93,.04,0)
STARTING ROW FOR TEXT^NJ3,0XO^^0;4^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.93,358.93,.04,2)
S Y(0)=Y S Y=+Y+1
"^DD",358.93,358.93,.04,2.1)
S Y=+Y+1
"^DD",358.93,358.93,.04,3)
What block row should the label start in?
"^DD",358.93,358.93,.04,"DT")
2940721
"^DD",358.93,358.93,.06,0)
TYPE OF DATA^R*P358.6'X^IBE(358.6,^0;6^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$D(^(9))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",358.93,358.93,.06,.1)
WHAT TYPE OF DATA WILL BE ENTERED TO THIS FIELD?
"^DD",358.93,358.93,.06,3)
What type of data will be entered to the field?
"^DD",358.93,358.93,.06,12)
Allows only available interfaces for passing data to DHCP.
"^DD",358.93,358.93,.06,12.1)
S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$D(^(9))"
"^DD",358.93,358.93,.06,21,0)
^^2^2^2950914^^^
"^DD",358.93,358.93,.06,21,1,0)
Points to the package interface file. That is where information about the
"^DD",358.93,358.93,.06,21,2,0)
data and how to map it to DHCP is stored.
"^DD",358.93,358.93,.06,"DT")
2950727
"^DD",358.93,358.93,.07,0)
TEXT APPEARANCE^FX^^0;7^S X=$$UPPER^VALM1(X) K:$L(X)>3!("UBR"'[$E(X,1))!("UBR"'[$E(X,2))!("UBR"'[$E(X,3)) X
"^DD",358.93,358.93,.07,.1)
HOW SHOULD THE TEXT APPEAR? CHOOSE FROM {U,B,R}
"^DD",358.93,358.93,.07,3)
B=bold,U=underline,R=reverse You can enter any combination of {B,U,R}.
"^DD",358.93,358.93,.07,"DT")
2940816
"^DD",358.93,358.93,.08,0)
BLOCK^RP358.1'^IBE(358.1,^0;8^Q
"^DD",358.93,358.93,.08,1,0)
^.1
"^DD",358.93,358.93,.08,1,1,0)
358.93^C
"^DD",358.93,358.93,.08,1,1,1)
S ^IBE(358.93,"C",$E(X,1,30),DA)=""
"^DD",358.93,358.93,.08,1,1,2)
K ^IBE(358.93,"C",$E(X,1,30),DA)
"^DD",358.93,358.93,.08,1,1,"%D",0)
^^1^1^2940720^
"^DD",358.93,358.93,.08,1,1,"%D",1,0)
Used to find all the input fields appearing in a block.
"^DD",358.93,358.93,.08,1,1,"DT")
2940720
"^DD",358.93,358.93,.08,3)
What block should this input field appear in?
"^DD",358.93,358.93,.08,"DT")
2940720
"^DD",358.93,358.93,.09,0)
SELECTION RULE^S^0:ANY NUMBER;1:EXACTLY ONE;2:AT MOST ONE (0 or 1);3:AT LEAST ONE (1 or more);^0;9^Q
"^DD",358.93,358.93,.09,3)
Which rule applies to the choices the user can makee?
"^DD",358.93,358.93,.09,"DT")
2941209
"^DD",358.93,358.93,1,0)
CHOICE^358.931^^1;0
"^DD",358.93,358.93,1,12)
Allows only package interfaces that print reports and that are available.
"^DD",358.93,358.93,1,12.1)
S DIC("S")="I $P(^(0),U,6)=4,$P(^(0),U,9)=1"
"^DD",358.93,358.93,1,21,0)
^^2^2^2930528^
"^DD",358.93,358.93,1,21,1,0)
 
"^DD",358.93,358.93,1,21,2,0)
The reports that should print.
"^DD",358.93,358.93,1,"DT")
2940721
"^DD",358.93,358.931,0)
CHOICE SUB-FIELD^^.09^9
"^DD",358.93,358.931,0,"DT")
2960119
"^DD",358.93,358.931,0,"IX","B",358.931,.01)

"^DD",358.93,358.931,0,"NM","CHOICE")

"^DD",358.93,358.931,0,"UP")
358.93
"^DD",358.93,358.931,.01,0)
CHOICE^MF^^0;1^K:$L(X)>68!($L(X)<1) X
"^DD",358.93,358.931,.01,.1)
LABEL APPEARING WITH THE BUBBLE
"^DD",358.93,358.931,.01,1,0)
^.1
"^DD",358.93,358.931,.01,1,1,0)
358.931^B
"^DD",358.93,358.931,.01,1,1,1)
S ^IBE(358.93,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",358.93,358.931,.01,1,1,2)
K ^IBE(358.93,DA(1),1,"B",$E(X,1,30),DA)
"^DD",358.93,358.931,.01,1,2,0)
358.93^A^MUMPS
"^DD",358.93,358.931,.01,1,2,1)
I $P($G(^IBE(358.93,DA(1),1,DA,0)),U,2) S ^IBE(358.93,"A",$P(^IBE(358.93,DA(1),0),U),$P(^IBE(358.93,DA(1),1,DA,0),U,2),X,DA(1),DA)=""
"^DD",358.93,358.931,.01,1,2,2)
I $P($G(^IBE(358.93,DA(1),1,DA,0)),U,2) K ^IBE(358.93,"A",$P(^IBE(358.93,DA(1),0),U),$P(^IBE(358.93,DA(1),1,DA,0),U,2),X,DA(1),DA)
"^DD",358.93,358.931,.01,1,2,"%D",0)
^^3^3^2960402^^^^
"^DD",358.93,358.931,.01,1,2,"%D",1,0)
 
"^DD",358.93,358.931,.01,1,2,"%D",2,0)
Used to find all the reports/forms that should be printed for the division
"^DD",358.93,358.931,.01,1,2,"%D",3,0)
under a particular condition.
"^DD",358.93,358.931,.01,1,2,"DT")
2960402
"^DD",358.93,358.931,.01,3)
Answer must be 1-68 characters in length.
"^DD",358.93,358.931,.01,12)
Allows only reports installed in the Package Interface file.
"^DD",358.93,358.931,.01,12.1)
S DIC("S")="I $P(^(0),U,6)=4,$P(^(0),U,9)=1"
"^DD",358.93,358.931,.01,21,0)
^^3^3^2960118^^
"^DD",358.93,358.931,.01,21,1,0)
 
"^DD",358.93,358.931,.01,21,2,0)
A report that should print. Only reports contained in the Package
"^DD",358.93,358.931,.01,21,3,0)
Interface file can be printed by the print manager.
"^DD",358.93,358.931,.01,"DT")
2960402
"^DD",358.93,358.931,.02,0)
STARTING COLUMN FOR LABEL^NJ3,0XO^^0;2^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.93,358.931,.02,1,0)
^.1
"^DD",358.93,358.931,.02,1,1,0)
358.93^A1^MUMPS
"^DD",358.93,358.931,.02,1,1,1)
S ^IBE(358.93,"A",$P($G(^IBE(358.93,DA(1),0)),U),X,$P($G(^IBE(358.93,DA(1),1,DA,0)),U),DA(1),DA)=""
"^DD",358.93,358.931,.02,1,1,2)
K ^IBE(358.93,"A",$P($G(^IBE(358.93,DA(1),0)),U),X,$P($G(^IBE(358.93,DA(1),1,DA,0)),U),DA(1),DA)
"^DD",358.93,358.931,.02,1,1,"%D",0)
^^3^3^2960402^^^^
"^DD",358.93,358.931,.02,1,1,"%D",1,0)
 
"^DD",358.93,358.931,.02,1,1,"%D",2,0)
Used to find all the reports/forms that should be printed for the entire
"^DD",358.93,358.931,.02,1,1,"%D",3,0)
division under a particular condition.
"^DD",358.93,358.931,.02,1,1,"DT")
2960402
"^DD",358.93,358.931,.02,2)
S Y(0)=Y S Y=+Y+1
"^DD",358.93,358.931,.02,2.1)
S Y=+Y+1
"^DD",358.93,358.931,.02,3)
What block column should the label begin in?
"^DD",358.93,358.931,.02,4)
D HELP6^IBDFU5A
"^DD",358.93,358.931,.02,21,0)
^^2^2^2930528^
"^DD",358.93,358.931,.02,21,1,0)
 
"^DD",358.93,358.931,.02,21,2,0)
The condition under which the report should print.
"^DD",358.93,358.931,.02,"DT")
2960402
"^DD",358.93,358.931,.03,0)
STARTING ROW FOR LABEL^NJ3,0XO^^0;3^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.93,358.931,.03,2)
S Y(0)=Y S Y=+Y+1
"^DD",358.93,358.931,.03,2.1)
S Y=+Y+1
"^DD",358.93,358.931,.03,3)
What block row should the label be in?
"^DD",358.93,358.931,.03,"DT")
2940720
"^DD",358.93,358.931,.04,0)
LABEL APPEARANCE^FX^^0;4^S X=$$UPPER^VALM1(X) K:$L(X)>4!("UBRI"'[$E(X,1))!("UBRI"'[$E(X,2))!("UBRI"'[$E(X,3))!("UBRI"'[$E(X,4)) X
"^DD",358.93,358.931,.04,.1)
HOW SHOULD THE LABEL APPEAR? CHOOSE FROM {U,B,R,I}
"^DD",358.93,358.931,.04,3)
B=bold,U=underline,R=reverse,I=invisible You can enter any combination of {B,U,R,I}. The label will not print if it is made invisible.
"^DD",358.93,358.931,.04,"DT")
2940816
"^DD",358.93,358.931,.05,0)
CHOICE LABEL^RF^^0;5^K:$L(X)>120!($L(X)<1) X
"^DD",358.93,358.931,.05,3)
Answer must be 1-120 characters in length.
"^DD",358.93,358.931,.05,21,0)
^^1^1^2960118^
"^DD",358.93,358.931,.05,21,1,0)
The label that is to appear with the choice.
"^DD",358.93,358.931,.05,"DT")
2960118
"^DD",358.93,358.931,.06,0)
STARTING COLUMN FOR BUBBLE^RNJ3,0XO^^0;6^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.93,358.931,.06,2)
S Y(0)=Y S Y=+Y+1
"^DD",358.93,358.931,.06,2.1)
S Y=+Y+1
"^DD",358.93,358.931,.06,3)
What block column should the bubble begin in?
"^DD",358.93,358.931,.06,"DT")
2940720
"^DD",358.93,358.931,.07,0)
STARTING ROW FOR BUBBLE^RNJ3,0XO^^0;7^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.93,358.931,.07,2)
S Y(0)=Y S Y=+Y+1
"^DD",358.93,358.931,.07,2.1)
S Y=+Y+1
"^DD",358.93,358.931,.07,3)
What block row should the bubble be in?
"^DD",358.93,358.931,.07,"DT")
2940720
"^DD",358.93,358.931,.08,0)
VALUE TO PASS^RFX^^0;8^S X=X
"^DD",358.93,358.931,.08,3)
What data should be entered into the database when this bubble is checked?
"^DD",358.93,358.931,.08,4)

"^DD",358.93,358.931,.08,22)
t
"^DD",358.93,358.931,.08,"DT")
2950901
"^DD",358.93,358.931,.09,0)
DATA QUALIFIER^*P358.98'^IBD(358.98,^0;9^S DIC("S")="I $$DQGOOD^IBDFU9($P($G(^IBE(358.93,DA(1),0)),""^"",6),Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",358.93,358.931,.09,3)
Does one of the qualifers appy to this choice?
"^DD",358.93,358.931,.09,12)
Allows only certain data qualifiers, dependent on the type of data.
"^DD",358.93,358.931,.09,12.1)
S DIC("S")="I $$DQGOOD^IBDFU9($P($G(^IBE(358.93,DA(1),0)),""^"",6),Y)"
"^DD",358.93,358.931,.09,"DT")
2941207
"^DD",358.98,358.98,0)
FIELD^^.03^3
"^DD",358.98,358.98,0,"DDA")
N
"^DD",358.98,358.98,0,"DT")
2950717
"^DD",358.98,358.98,0,"ID",.02)
W "   ",$P(^(0),U,2)
"^DD",358.98,358.98,0,"IX","B",358.98,.01)

"^DD",358.98,358.98,0,"NM","IMP/EXP AICS DATA QUALIFIERS")

"^DD",358.98,358.98,0,"PT",358.22,.09)

"^DD",358.98,358.98,0,"PT",358.613,.01)

"^DD",358.98,358.98,0,"PT",358.931,.09)

"^DD",358.98,358.98,0,"VRPK")
IBD
"^DD",358.98,358.98,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",358.98,358.98,.01,1,0)
^.1
"^DD",358.98,358.98,.01,1,1,0)
358.98^B
"^DD",358.98,358.98,.01,1,1,1)
S ^IBD(358.98,"B",$E(X,1,30),DA)=""
"^DD",358.98,358.98,.01,1,1,2)
K ^IBD(358.98,"B",$E(X,1,30),DA)
"^DD",358.98,358.98,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",358.98,358.98,.02,0)
CODE^RF^^0;2^K:$L(X)>3!($L(X)<1) X
"^DD",358.98,358.98,.02,3)
Answer must be 1-3 characters in length.
"^DD",358.98,358.98,.02,"DT")
2941018
"^DD",358.98,358.98,.03,0)
RECOMMENDED HEADER^F^^0;3^K:$L(X)>12!($L(X)<1) X
"^DD",358.98,358.98,.03,3)
Answer must be 1-12 characters in length.
"^DD",358.98,358.98,.03,21,0)
^^2^2^2950717^
"^DD",358.98,358.98,.03,21,1,0)
The recommended header will be used as the default header when designing a
"^DD",358.98,358.98,.03,21,2,0)
form.
"^DD",358.98,358.98,.03,"DT")
2950717
"^DIC",358.1,358.1,0)
IMP/EXP ENCOUNTER FORM BLOCK
"^DIC",358.1,358.1,0,"GL")
^IBE(358.1,
"^DIC",358.1,358.1,"%",0)
^1.005^^0
"^DIC",358.1,358.1,"%D",0)
^^4^4^2940217^
"^DIC",358.1,358.1,"%D",1,0)
 
"^DIC",358.1,358.1,"%D",2,0)
This file is nearly identical to file #357.1. It is used by the
"^DIC",358.1,358.1,"%D",3,0)
Import/Export Utility as a temporary staging area for data from that file
"^DIC",358.1,358.1,"%D",4,0)
that is being imported or exported.
"^DIC",358.1,"B","IMP/EXP ENCOUNTER FORM BLOCK",358.1)

"^DIC",358.2,358.2,0)
IMP/EXP SELECTION LIST
"^DIC",358.2,358.2,0,"GL")
^IBE(358.2,
"^DIC",358.2,358.2,"%D",0)
^^1^1^2940829^^^^
"^DIC",358.2,358.2,"%D",1,0)
Used by the import/export utility as a workspace.
"^DIC",358.2,358.2,"%D",2,0)
 
"^DIC",358.2,358.2,"%D",3,0)
 
"^DIC",358.2,358.2,"%D",4,0)
 
"^DIC",358.2,358.2,"%D",5,0)
 
"^DIC",358.2,358.2,"%D",6,0)
 
"^DIC",358.2,358.2,"%D",7,0)
 
"^DIC",358.2,358.2,"%D",8,0)
This file is nearly identical to file #357.2 . It is used by the
"^DIC",358.2,358.2,"%D",9,0)
Import/Export Utility as a temporary staging area for data from that file
"^DIC",358.2,358.2,"%D",10,0)
that is being imported or exported.
"^DIC",358.2,358.2,"%D",11,0)
provisions have been made to specify up to 4 columns per list.
"^DIC",358.2,"B","IMP/EXP SELECTION LIST",358.2)

"^DIC",358.5,358.5,0)
IMP/EXP DATA FIELD
"^DIC",358.5,358.5,0,"GL")
^IBE(358.5,
"^DIC",358.5,358.5,"%D",0)
^^1^1^2940829^^^^
"^DIC",358.5,358.5,"%D",1,0)
Used by the import/export utility as a workspace.
"^DIC",358.5,358.5,"%D",2,0)
 
"^DIC",358.5,358.5,"%D",3,0)
 
"^DIC",358.5,358.5,"%D",4,0)
This file is nearly identical to file #357.5. It is used by the
"^DIC",358.5,358.5,"%D",5,0)
Import/Export Utility as a temporary staging area for data from that file
"^DIC",358.5,358.5,"%D",6,0)
that is being imported or exported.
"^DIC",358.5,"B","IMP/EXP DATA FIELD",358.5)

"^DIC",358.6,358.6,0)
IMP/EXP PACKAGE INTERFACE^358.6I
"^DIC",358.6,358.6,0,"GL")
^IBE(358.6,
"^DIC",358.6,358.6,"%D",0)
^^1^1^2950927^^^^
"^DIC",358.6,358.6,"%D",1,0)
This file is used as a workspace by the import/export utility.
"^DIC",358.6,358.6,"%D",2,0)
Import/Export Utility as a temporary staging area for data from that file
"^DIC",358.6,358.6,"%D",3,0)
that is being imported or exported.
"^DIC",358.6,358.6,"%D",4,0)
 
"^DIC",358.6,358.6,"%D",5,0)
This file contains a description of all of the interfaces with other packages.
"^DIC",358.6,358.6,"%D",6,0)
The form will invoke the proper interface routines by doing a lookup on
"^DIC",358.6,358.6,"%D",7,0)
this file and then invoking the routine by indirection. The INPUT VARIABLE
"^DIC",358.6,358.6,"%D",8,0)
fields are for documentation purposes and to verify that the proper
"^DIC",358.6,358.6,"%D",9,0)
variables are defined. Data will be exchanged between the encounter form
"^DIC",358.6,358.6,"%D",10,0)
utilities and other packages by putting the data in a predefined location.
"^DIC",358.6,358.6,"%D",11,0)
The first part of the subscript is always be ^TMP("IB",$J,"INTERFACES".
"^DIC",358.6,358.6,"%D",12,0)
For output routines, but not selection routines, the fourth subscript is
"^DIC",358.6,358.6,"%D",13,0)
be the patient DFN. The next subscript is the name of the Package
"^DIC",358.6,358.6,"%D",14,0)
Interface. For single valued data and record valued data there is no
"^DIC",358.6,358.6,"%D",15,0)
additional subscript. For interfaces returning a list there is one
"^DIC",358.6,358.6,"%D",16,0)
additional subscript level, the number of the item on the list. For
"^DIC",358.6,358.6,"%D",17,0)
word processing type data the data will be in FM word-processing format,
"^DIC",358.6,358.6,"%D",18,0)
i.e., the final subscripts will be ...1,0),...2,0),...3,0), etc.
"^DIC",358.6,358.6,"%D",19,0)
these items of data can have its own entry in the Package Interface file,
"^DIC",358.6,358.6,"%D",20,0)
but by using the same entry point there is a savings because all of the
"^DIC",358.6,358.6,"%D",21,0)
data on that node can be obtained at once. The routines that invoke the
"^DIC",358.6,358.6,"%D",22,0)
entry point keep track of the entry points already invoked so they are
"^DIC",358.6,358.6,"%D",23,0)
not repeated.
"^DIC",358.6,"B","IMP/EXP PACKAGE INTERFACE",358.6)

"^DIC",358.91,358.91,0)
IMP/EXP MARKING AREA
"^DIC",358.91,358.91,0,"GL")
^IBE(358.91,
"^DIC",358.91,358.91,"%D",0)
^^4^4^2940217^
"^DIC",358.91,358.91,"%D",1,0)
 
"^DIC",358.91,358.91,"%D",2,0)
This file is nearly identical to file #357.91. It is used by the
"^DIC",358.91,358.91,"%D",3,0)
Import/Export Utility as a temporary staging area for data from that file
"^DIC",358.91,358.91,"%D",4,0)
that is being imported or exported.
"^DIC",358.91,"B","IMP/EXP MARKING AREA",358.91)

"^DIC",358.93,358.93,0)
IMP/EXP MULTIPLE CHOICE FIELD^358.93
"^DIC",358.93,358.93,0,"GL")
^IBE(358.93,
"^DIC",358.93,358.93,"%D",0)
^^2^2^2951024^^^
"^DIC",358.93,358.93,"%D",1,0)
This file is used as a work space for the import/export utility of the
"^DIC",358.93,358.93,"%D",2,0)
encounter form utilities.
"^DIC",358.93,"B","IMP/EXP MULTIPLE CHOICE FIELD",358.93)

"^DIC",358.98,358.98,0)
IMP/EXP AICS DATA QUALIFIERS^358.98I
"^DIC",358.98,358.98,0,"GL")
^IBD(358.98,
"^DIC",358.98,358.98,"%D",0)
^^1^1^2950927^^^
"^DIC",358.98,358.98,"%D",1,0)
Used by the import/export utility of the encounter forms as a workspace.
"^DIC",358.98,"B","IMP/EXP AICS DATA QUALIFIERS",358.98)

**END**
**END**

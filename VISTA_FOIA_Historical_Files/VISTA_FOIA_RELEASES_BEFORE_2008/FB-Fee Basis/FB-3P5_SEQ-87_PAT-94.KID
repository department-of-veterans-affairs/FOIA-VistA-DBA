Released FB*3.5*94 SEQ #87
Extracted from mail message
**KIDS**:FB*3.5*94^

**INSTALL NAME**
FB*3.5*94
"BLD",6407,0)
FB*3.5*94^FEE BASIS^0^3060328^y
"BLD",6407,1,0)
^^1^1^3060328^
"BLD",6407,1,1,0)
Incorrect date used to validate the DRG and/or ICD effective date.
"BLD",6407,4,0)
^9.64PA^^
"BLD",6407,"ABPKG")
n
"BLD",6407,"KRN",0)
^9.67PA^8989.52^19
"BLD",6407,"KRN",.4,0)
.4
"BLD",6407,"KRN",.401,0)
.401
"BLD",6407,"KRN",.402,0)
.402
"BLD",6407,"KRN",.403,0)
.403
"BLD",6407,"KRN",.5,0)
.5
"BLD",6407,"KRN",.84,0)
.84
"BLD",6407,"KRN",3.6,0)
3.6
"BLD",6407,"KRN",3.8,0)
3.8
"BLD",6407,"KRN",9.2,0)
9.2
"BLD",6407,"KRN",9.8,0)
9.8
"BLD",6407,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6407,"KRN",9.8,"NM",1,0)
FBCSV1^^0^B19921855
"BLD",6407,"KRN",9.8,"NM","B","FBCSV1",1)

"BLD",6407,"KRN",19,0)
19
"BLD",6407,"KRN",19.1,0)
19.1
"BLD",6407,"KRN",101,0)
101
"BLD",6407,"KRN",409.61,0)
409.61
"BLD",6407,"KRN",771,0)
771
"BLD",6407,"KRN",870,0)
870
"BLD",6407,"KRN",8989.51,0)
8989.51
"BLD",6407,"KRN",8989.52,0)
8989.52
"BLD",6407,"KRN",8994,0)
8994
"BLD",6407,"KRN","B",.4,.4)

"BLD",6407,"KRN","B",.401,.401)

"BLD",6407,"KRN","B",.402,.402)

"BLD",6407,"KRN","B",.403,.403)

"BLD",6407,"KRN","B",.5,.5)

"BLD",6407,"KRN","B",.84,.84)

"BLD",6407,"KRN","B",3.6,3.6)

"BLD",6407,"KRN","B",3.8,3.8)

"BLD",6407,"KRN","B",9.2,9.2)

"BLD",6407,"KRN","B",9.8,9.8)

"BLD",6407,"KRN","B",19,19)

"BLD",6407,"KRN","B",19.1,19.1)

"BLD",6407,"KRN","B",101,101)

"BLD",6407,"KRN","B",409.61,409.61)

"BLD",6407,"KRN","B",771,771)

"BLD",6407,"KRN","B",870,870)

"BLD",6407,"KRN","B",8989.51,8989.51)

"BLD",6407,"KRN","B",8989.52,8989.52)

"BLD",6407,"KRN","B",8994,8994)

"BLD",6407,"QUES",0)
^9.62^^
"BLD",6407,"REQB",0)
^9.611^1^1
"BLD",6407,"REQB",1,0)
FB*3.5*77^2
"BLD",6407,"REQB","B","FB*3.5*77",1)

"MBREQ")
0
"PKG",60,-1)
1^1
"PKG",60,0)
FEE BASIS^FB^Used to pay private vendors
"PKG",60,20,0)
^9.402P^1^1
"PKG",60,20,1,0)
2^^FBPMRG
"PKG",60,20,1,1)

"PKG",60,20,"B",2,1)

"PKG",60,22,0)
^9.49I^1^1
"PKG",60,22,1,0)
3.5^2950130^2950313
"PKG",60,22,1,"PAH",1,0)
94^3060328
"PKG",60,22,1,"PAH",1,1,0)
^^1^1^3060328
"PKG",60,22,1,"PAH",1,1,1,0)
Incorrect date used to validate the DRG and/or ICD effective date.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","FBCSV1")
0^1^B19921855^B18393988
"RTN","FBCSV1",1,0)
FBCSV1 ;WOIFO/SS-UTILITIES FOR CODE SET VERSIONING;4/7/2003
"RTN","FBCSV1",2,0)
 ;;3.5;FEE BASIS;**55,77,94**;JAN 30, 1995
"RTN","FBCSV1",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","FBCSV1",4,0)
 ;
"RTN","FBCSV1",5,0)
 ;wrapper for DRG^ICDGTDRG
"RTN","FBCSV1",6,0)
 ;to use instead of direct read of ^ICD(
"RTN","FBCSV1",7,0)
 ;FBIEN - ien of #80.2
"RTN","FBCSV1",8,0)
 ;FBDATE - date of service (optional)
"RTN","FBCSV1",9,0)
 ;returns (#.01) NAME of #80.2 or "" if invalid/error
"RTN","FBCSV1",10,0)
ICD(FBIEN,FBDATE) ;
"RTN","FBCSV1",11,0)
 N FBRET
"RTN","FBCSV1",12,0)
 S FBRET=$$DRG^ICDGTDRG($G(FBIEN),$S(+$G(FBDATE)=0:"",1:FBDATE))
"RTN","FBCSV1",13,0)
 Q:+FBRET<0 ""
"RTN","FBCSV1",14,0)
 Q $P(FBRET,"^",1)
"RTN","FBCSV1",15,0)
 ;
"RTN","FBCSV1",16,0)
 ;wrapper for ICDOP^ICDCODE
"RTN","FBCSV1",17,0)
 ;to use instead of direct read of ^ICD0(
"RTN","FBCSV1",18,0)
 ;FBIEN - ien of #80.1
"RTN","FBCSV1",19,0)
 ;FBDATE - date of service (optional)
"RTN","FBCSV1",20,0)
 ;returns (#.01) NAME of #80.1 or "" if invalid/error
"RTN","FBCSV1",21,0)
ICD0(FBIEN,FBDATE) ;
"RTN","FBCSV1",22,0)
 N FBRET
"RTN","FBCSV1",23,0)
 S FBRET=$$ICDOP^ICDCODE($G(FBIEN),$S(+$G(FBDATE)=0:"",1:FBDATE),,1)
"RTN","FBCSV1",24,0)
 Q:+FBRET<0 ""
"RTN","FBCSV1",25,0)
 Q $P(FBRET,"^",2)
"RTN","FBCSV1",26,0)
 ;
"RTN","FBCSV1",27,0)
 ;wrapper for ICDDX^ICDCODE
"RTN","FBCSV1",28,0)
 ;to use instead of direct read of ^ICD9(
"RTN","FBCSV1",29,0)
 ;FBIEN - ien of #80
"RTN","FBCSV1",30,0)
 ;FBDATE - date of service (optional)
"RTN","FBCSV1",31,0)
 ;returns (#.01) NAME of #80 or "" if invalid/error
"RTN","FBCSV1",32,0)
ICD9(FBIEN,FBDATE) ;
"RTN","FBCSV1",33,0)
 N FBRET
"RTN","FBCSV1",34,0)
 S FBRET=$$ICDDX^ICDCODE($G(FBIEN),$S(+$G(FBDATE)=0:"",1:FBDATE),,1)
"RTN","FBCSV1",35,0)
 Q:+FBRET<0 ""
"RTN","FBCSV1",36,0)
 Q $P(FBRET,"^",2)
"RTN","FBCSV1",37,0)
 ;
"RTN","FBCSV1",38,0)
 ;wrapper for ICDDX^ICDCODE with piece #
"RTN","FBCSV1",39,0)
 ;to use instead of direct read of ^ICD9(
"RTN","FBCSV1",40,0)
 ;FBIEN - ien of #80
"RTN","FBCSV1",41,0)
 ;FBPC - piece #
"RTN","FBCSV1",42,0)
 ;FBDATE (optional) - date of service
"RTN","FBCSV1",43,0)
 ;returns piece # FBPC of #80 or "" if invalid/error
"RTN","FBCSV1",44,0)
ICD9P(FBIEN,FBPC,FBDATE) ;
"RTN","FBCSV1",45,0)
 N FBRET
"RTN","FBCSV1",46,0)
 S FBRET=$$ICDDX^ICDCODE($G(FBIEN),$S(+$G(FBDATE)=0:"",1:FBDATE),,1)
"RTN","FBCSV1",47,0)
 Q:+FBRET<0 ""
"RTN","FBCSV1",48,0)
 Q $P(FBRET,"^",FBPC+1)
"RTN","FBCSV1",49,0)
 ;
"RTN","FBCSV1",50,0)
 ;extended wrapper for ICDDX^ICDCODE
"RTN","FBCSV1",51,0)
 ;to use instead of direct read of ^ICD9(
"RTN","FBCSV1",52,0)
 ;FBIEN - ien of #80
"RTN","FBCSV1",53,0)
 ;FBPC - piece #
"RTN","FBCSV1",54,0)
 ;FBEXTR - $E parameter
"RTN","FBCSV1",55,0)
 ;FBDATE (optional) - date of service
"RTN","FBCSV1",56,0)
 ;returns piece #FBPC and (#.01) NAME of #80 and or "" if invalid/error
"RTN","FBCSV1",57,0)
ICD9EX(FBIEN,FBPC,FBEXTR,FBDATE) ;
"RTN","FBCSV1",58,0)
 N FBRET
"RTN","FBCSV1",59,0)
 S FBRET=$$ICDDX^ICDCODE($G(FBIEN),$S(+$G(FBDATE)=0:"",1:FBDATE),,1)
"RTN","FBCSV1",60,0)
 Q:+FBRET<0 ""
"RTN","FBCSV1",61,0)
 Q $E($P(FBRET,"^",FBPC+1),1,FBEXTR)_" ("_$P(FBRET,"^",2)_")"
"RTN","FBCSV1",62,0)
 ;
"RTN","FBCSV1",63,0)
 ;get FROM date
"RTN","FBCSV1",64,0)
FRDTINV(FBDA) ;
"RTN","FBCSV1",65,0)
 N FBRETDT
"RTN","FBCSV1",66,0)
 S FBRETDT=$P($$B9DISCHG^FBAAV5(FBDA),"^",1) ; Discharge Date
"RTN","FBCSV1",67,0)
 I FBRETDT="" S FBRETDT=$P($G(^FBAAI(FBDA,0)),"^",7) ; Treatment To DT
"RTN","FBCSV1",68,0)
 I FBRETDT="" S FBRETDT=$P($G(^FBAAI(FBDA,0)),"^",6) ; Treatment Fr DT
"RTN","FBCSV1",69,0)
 Q FBRETDT
"RTN","FBCSV1",70,0)
 ;
"RTN","FBCSV1",71,0)
 ;if FBCODE="" returns FBNUM spaces
"RTN","FBCSV1",72,0)
 ;otherwise returns FBCODE
"RTN","FBCSV1",73,0)
SPACES(FBCODE,FBNUM) ;
"RTN","FBCSV1",74,0)
 I $L(FBCODE)=0 S $P(FBCODE," ",FBNUM)=" "
"RTN","FBCSV1",75,0)
 Q FBCODE
"RTN","FBCSV1",76,0)
 ;
"RTN","FBCSV1",77,0)
 ;EVALUATE (sometimes can be used instead of "$S")
"RTN","FBCSV1",78,0)
 ;if FBCODE="" returns FBRETV
"RTN","FBCSV1",79,0)
 ;otherwise returns FBCODE
"RTN","FBCSV1",80,0)
EV(FBCODE,FBRETV) ;
"RTN","FBCSV1",81,0)
 Q:$L(FBCODE)=0 FBRETV
"RTN","FBCSV1",82,0)
 Q FBCODE
"RTN","FBCSV1",83,0)
 ;
"RTN","FBCSV1",84,0)
 ;converts a date to fileman format
"RTN","FBCSV1",85,0)
DT2FMDT(FBDAT) ;
"RTN","FBCSV1",86,0)
 N X,Y
"RTN","FBCSV1",87,0)
 S X=$$TRIM^XLFSTR(FBDAT)
"RTN","FBCSV1",88,0)
 D ^%DT
"RTN","FBCSV1",89,0)
 Q +Y
"RTN","FBCSV1",90,0)
 ;
"RTN","FBCSV1",91,0)
 ;wrapper for ICDDX^ICDCODE
"RTN","FBCSV1",92,0)
 ;to use in prompts (and input templates)of file #162.5 to screen out 
"RTN","FBCSV1",93,0)
 ;  inactive/invalid codes
"RTN","FBCSV1",94,0)
 ;FBICD9 - ien of #80
"RTN","FBCSV1",95,0)
 ;FBINV - ien of the current #162.5 record
"RTN","FBCSV1",96,0)
 ;FBDATE - (optional) date of service
"RTN","FBCSV1",97,0)
 ;returns 0 if code is active, otherwise - nonzero value
"RTN","FBCSV1",98,0)
INPICD9(FBICD9,FBINV,FBDATE) ;
"RTN","FBCSV1",99,0)
 N FBRET
"RTN","FBCSV1",100,0)
 ;I '$G(FBDATE) S FBDATE=$$FRDTINV(+$G(FBINV))
"RTN","FBCSV1",101,0)
 S FBDATE=$$FRDTINV(+$G(FBINV))
"RTN","FBCSV1",102,0)
 S FBRET=$$ICDDX^ICDCODE($G(FBICD9),$S(+$G(FBDATE)=0:"",1:FBDATE))
"RTN","FBCSV1",103,0)
 I +FBRET<0 W " Invalid Code " Q 2
"RTN","FBCSV1",104,0)
 I $P(FBRET,"^",10)=0 W !," Code is inactive" W:$G(FBDATE)>0 " on "_$$FMTE^XLFDT(FBDATE) Q 1
"RTN","FBCSV1",105,0)
 Q 0
"RTN","FBCSV1",106,0)
 ;
"RTN","FBCSV1",107,0)
 ;wrapper for ICDOP^ICDCODE
"RTN","FBCSV1",108,0)
 ;checks if code is active on the date of service and
"RTN","FBCSV1",109,0)
 ;if active returns CODE NUMBER
"RTN","FBCSV1",110,0)
 ;is inactive returns "" and prints message "ICD O/P Code inactive ..."
"RTN","FBCSV1",111,0)
 ;is invalid/local returns "" and prints message "Invalid ICD O/P Code"
"RTN","FBCSV1",112,0)
CHKICD0(FBIEN,FBDATE) ;
"RTN","FBCSV1",113,0)
 N FBRET
"RTN","FBCSV1",114,0)
 S FBRET=$$ICDOP^ICDCODE($G(FBIEN),$S(+$G(FBDATE)=0:"",1:FBDATE))
"RTN","FBCSV1",115,0)
 I +FBRET<0 W " Invalid ICD O/P Code " Q ""
"RTN","FBCSV1",116,0)
 I $P(FBRET,"^",10)=0 D  Q ""
"RTN","FBCSV1",117,0)
 . W !," ICD O/P Code "_$P(FBRET,"^",2)_" inactive"
"RTN","FBCSV1",118,0)
 . W:$G(FBDATE) " on date of service (",$$FMTE^XLFDT(FBDATE),")"
"RTN","FBCSV1",119,0)
 Q $P(FBRET,"^",2)
"RTN","FBCSV1",120,0)
 ;
"RTN","FBCSV1",121,0)
 ;wrapper for ICDOP^ICDCODE
"RTN","FBCSV1",122,0)
 ;to use in prompts (and input templates)of file #162.5 to screen out 
"RTN","FBCSV1",123,0)
 ;  inactive/invalid codes
"RTN","FBCSV1",124,0)
 ;FBICD0 - ien of #80.1
"RTN","FBCSV1",125,0)
 ;FBINV - ien of the current #162.5 record
"RTN","FBCSV1",126,0)
 ;FBDATE - (optional) date of service
"RTN","FBCSV1",127,0)
 ;returns 0 if code is active, otherwise - nonzero value
"RTN","FBCSV1",128,0)
INPICD0(FBICD0,FBINV,FBDATE) ;
"RTN","FBCSV1",129,0)
 N FBRET
"RTN","FBCSV1",130,0)
 ;I '$G(FBDATE) S FBDATE=$$FRDTINV(+$G(FBINV))
"RTN","FBCSV1",131,0)
 S FBDATE=$$FRDTINV(+$G(FBINV))
"RTN","FBCSV1",132,0)
 S FBRET=$$ICDOP^ICDCODE($G(FBICD0),$S(+$G(FBDATE)=0:"",1:FBDATE))
"RTN","FBCSV1",133,0)
 I +FBRET<0 W " Invalid Code " Q 2
"RTN","FBCSV1",134,0)
 I $P(FBRET,"^",10)=0 W !," Code is inactive" W:$G(FBDATE)>0 " on "_$$FMTE^XLFDT(FBDATE) Q 1
"RTN","FBCSV1",135,0)
 Q 0
"RTN","FBCSV1",136,0)
 ;
"RTN","FBCSV1",137,0)
 ;wrapper for DRG^ICDGTDRG
"RTN","FBCSV1",138,0)
 ;to use in prompts (and input templates)of file #162.5 to screen out 
"RTN","FBCSV1",139,0)
 ;  inactive/invalid codes
"RTN","FBCSV1",140,0)
 ;FBICD - ien of #80.2
"RTN","FBCSV1",141,0)
 ;FBINV - ien of the current #162.5 record
"RTN","FBCSV1",142,0)
 ;FBDATE - (optional) date of service
"RTN","FBCSV1",143,0)
 ;returns 0 if code is active, otherwise - nonzero value
"RTN","FBCSV1",144,0)
INPICD(FBICD,FBINV,FBDATE) ;
"RTN","FBCSV1",145,0)
 N FBRET
"RTN","FBCSV1",146,0)
 ;I '$G(FBDATE) S FBDATE=$$FRDTINV(+$G(FBINV))
"RTN","FBCSV1",147,0)
 S FBDATE=$$FRDTINV(+$G(FBINV))
"RTN","FBCSV1",148,0)
 S FBRET=$$DRG^ICDGTDRG($G(FBICD),$S(+$G(FBDATE)=0:"",1:FBDATE))
"RTN","FBCSV1",149,0)
 I +FBRET<0 W " Invalid Code " Q 2
"RTN","FBCSV1",150,0)
 I $P(FBRET,"^",14)=0 W !," Code is inactive" W:$G(FBDATE)>0 " on "_$$FMTE^XLFDT(FBDATE) Q 1
"RTN","FBCSV1",151,0)
 Q 0
"RTN","FBCSV1",152,0)
 ;
"RTN","FBCSV1",153,0)
 ;wrapper for ICDDX^ICDCODE
"RTN","FBCSV1",154,0)
 ;checks if code is inactive on the date of service and 
"RTN","FBCSV1",155,0)
 ;if active returns CODE NUMBER
"RTN","FBCSV1",156,0)
 ;is inactive returns "" and prints message "ICD Dx Code inactive ..."
"RTN","FBCSV1",157,0)
 ;is invalid/local returns "" and prints message "Invalid ICD Dx Code"
"RTN","FBCSV1",158,0)
CHKICD9(FBIEN,FBDATE) ;
"RTN","FBCSV1",159,0)
 N FBRET
"RTN","FBCSV1",160,0)
 S FBRET=$$ICDDX^ICDCODE($G(FBIEN),$S(+$G(FBDATE)=0:"",1:FBDATE))
"RTN","FBCSV1",161,0)
 I +FBRET<0 W " Invalid ICD Dx Code " Q ""
"RTN","FBCSV1",162,0)
 I $P(FBRET,"^",10)=0 D  Q ""
"RTN","FBCSV1",163,0)
 . W !," ICD Dx Code "_$P(FBRET,"^",2)_" inactive"
"RTN","FBCSV1",164,0)
 . W:$G(FBDATE) " on date of service (",$$FMTE^XLFDT(FBDATE),")"
"RTN","FBCSV1",165,0)
 Q $P(FBRET,"^",2)
"RTN","FBCSV1",166,0)
 ;
"RTN","FBCSV1",167,0)
 ;
"RTN","FBCSV1",168,0)
 ;convert date as a string like "MMDDYYYY" into FM date like "YYYMMDD"
"RTN","FBCSV1",169,0)
STR2FBDT(FBDTSTR) ;
"RTN","FBCSV1",170,0)
 N X,Y S X=FBDTSTR D ^%DT
"RTN","FBCSV1",171,0)
 Q:Y=-1 ""
"RTN","FBCSV1",172,0)
 Q Y\1
"RTN","FBCSV1",173,0)
 ;
"RTN","FBCSV1",174,0)
 ;FBCSV1
"VER")
8.0^22.0
"BLD",6407,6)
^87
**END**
**END**

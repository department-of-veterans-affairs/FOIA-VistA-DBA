$TXT Created by THEROUX,JOHN at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 06/24/04 at 16:15
=============================================================================
Run Date: SEP 09, 2004                     Designation: DG*5.3*593
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #528                    Status: Released
                  Compliance Date: OCT 10, 2004
=============================================================================

Associated patches: (v)DG*5.3*222  <<= must be installed BEFORE `DG*5.3*593'
                    (v)DG*5.3*418  <<= must be installed BEFORE `DG*5.3*593'
                    (v)DG*5.3*578  <<= must be installed BEFORE `DG*5.3*593'

Subject: PATIENT FILE CLEANUP;UNDEF ERR

Category: 
  - Routine

Description:
============

 This patch provides a cleanup utility for the Patient file and prevents
 an undefined error while admitting a patient.
  
 ASSOCIATED NOISes:
 =================
 SAG-1103-42077    DG*5.3*543 Cleanup
 UNY-0204-10986    DPT XREF PROBLEM
 SDC-1103-60522    NAME COMPONENT CLEANUP
 SBY-1103-30884    DG*5.3*543 - NO NAME ON PATIENT FILE
 REN-0304-60611    UNDEFINED ERROR IN ^DGPMVDD
 MAR-0603-20956    PROBLEMS IN ~DPT
  
 ASSOCIATED E/3R's:
 ==================
 N/A
  
 PARTICIPATING TEST SITES:
 =========================
 Salisbury, NC, DSM 
 Upstate NY, Cache VMS 
 Fargo, ND, Cache NT 
 Maryland HCS, DSM   
  
 NOIS OVERVIEW:
 =============
 1) SAG-1103-42077    DG*5.3*543 Cleanup
    UNY-0204-10986    DPT XREF PROBLEM
  
 Problem:
 ========
 Patch DG*5.3*578 fixed a long-standing problem related to incomplete
 patient file records occasionally being created when registering 
 new patients. What little data these stub records contain is limited
 to what is generated when answering the file identifier prompts at
 the beginning of the registration process.
  
 Resolution:
 ===========
 The file cleanup utility will delete these records.  Our experience is
 that few, if any, such records exist at sites, but we recommend that you
 print the report (see Installation Instructions) first before doing the
 cleanup.
  
 These records will appear at the beginning of the report and will be 
 identified by DFN with the remark "Related to DG*5.3*578".
  
  
 2)  UNY-0204-10986   DPT XREF PROBLEM
     SDC-1103-60522   NAME COMPONENT CLEANUP
     SBY-1103-30884   DG*5.3*543 - NO NAME ON PATIENT FILE 
  
 Problem:
 ========
 Patch DG*5.3*222 released in 1999 included a Patient file cleanup for 
 records which had ONLY .3, .38, or .52 nodes.  It has come to light 
 that some few sites may not have allowed that cleanup routine to finish.
  
 (Please do not under any circumstance re-install that patch or attempt 
 to run routine DGENCLN1).
  
 Resolution:
 ===========
 The file cleanup utility will delete these records.  Our experience
 is that some sites may have several thousand such records,
 although none can be traced to any specific patient because
 no zero node exists.  But we recommend that you print the report
 (see Installation Instructions) first before doing the cleanup.
  
 These records will appear at the end of the report and will be 
 identified by DFN with the remark "Related to DG*5.3*222". 
  
 3)  REN-0304-60611     UNDEFINED ERROR IN ^DGPMVDD
  
 Problem:
 ========
 An undefined error occasionally occurs when admitting a patient.  
  
 Resolution:
 ===========
 Although we have been unable to determine the cause of the error or
 reproduce the problem, we have modified routine DGPMVDD to avoid 
 the undefined error and continue processing.
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;5.3;Registration;**[patch list]**;Aug 13,1993
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  DG53P593                   N/A              6682912             593
  DGPMVDD               11127311             11542576         418,593
  
  
 Pre-Installation Instructions:
 ==============================
 Prior to installing this patch the following VA Fileman search should be 
 run and used as a comparison tool against the output of the report that 
 will be run during the post-installation phase of this patch:
   
 Select OPTION: SEARCH FILE ENTRIES
   
 OUTPUT FROM WHAT FILE: PATIENT//
   
   -A- SEARCH FOR PATIENT FIELD: NAME
      1   NAME
      2   NAME COMPONENTS
 CHOOSE 1-2: 1  NAME
   -A- CONDITION: NULL
   
   -B- SEARCH FOR PATIENT FIELD:
   
 IF: A//     NAME NULL
   
 STORE RESULTS OF SEARCH IN TEMPLATE: DG593
   Are you adding 'DG593' as a new SORT TEMPLATE? No// Y  (Yes)
 DESCRIPTION:
   No existing text
   Edit? NO//
   
 SORT BY: NAME// NUMBER
 START WITH NUMBER: FIRST//
   WITHIN NUMBER, SORT BY:
 FIRST PRINT FIELD: [CAPTIONED
   
 Include COMPUTED fields:  (N/Y/R/B): NO// BOTH Computed Fields and Record
 Number
  (IEN)
 DISPLAY AUDIT TRAIL? No// YES
 Heading (S/C): PATIENT SEARCH// DG593 SEARCH
 DEVICE: queue
   
 Installation Instructions:
 =========================
   
 Installation will take less than 5 minutes. Users may be on the system 
 during the installation of this patch.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
     the KIDS distribution included with this message.
   
 NOTE:  If the required patches are not installed, the transport
        global will be removed.  If the transport global is
        removed you will need to install the required patch(s)
        and repeat this step.
   
 2.  Review your mapped set.  If any of the routines listed in the
     ROUTINE section are mapped, they should be removed from the mapped
     set at this time.
   
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
   
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter DG*5.3*593):
   
     a.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.)
     b.  Backup Transport Global - This option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any other changes such as DDs or templates.
     c.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
         the transport global.
     d.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
   
 5.  Use the Install Package(s) option and select the package DG*5.3*593.
   
 6.  When prompted ' Want KIDS to INHIBIT LOGONs during the install?
     YES//', respond NO.
   
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond YES.  When prompted to select the options
     you would like to place out of order, enter:
   
         ADMIT A PATIENT [DG ADMIT PATIENT]
   
 8.  If routines were unmapped as part of step 2, they should be returned
     to the mapped set once the installation has run to completion.
   
   
 Post-Installation Instructions:
 ===============================
   
 a.  Installing the patch will NOT do the file cleanup.  We recommend that 
     you first run REPORT^DG53P593 (queuing is advised) and verify that
     each record can be deleted. Global listings, Fileman searches, audit
     checks are some of the tools you can use in verifying.  
      
     If any of the records on the list have a national Internal Control
     Number (ICN), please file a NOIS with MPI and they will do the cleanup
     for that record. Please wait until the NOIS is resolved before doing
     the cleanup for the other records on the list. 
     
     Sample run of the report is below - The report output should be
     compared to the fileman search completed in the Pre-installation phase
     of this process:
   
 Sample of Report Run:
  
 Output sent to Terminal:
   
 >D REPORT^DG53P593
   
 This is a preliminary report by DFN of the Patient file
 records which would be deleted by the cleanup.
 DEVICE: HOME//   UCX    Right Margin: 80//
    
   
    
 Sep 08, 2004   DG*5.3*593 Patient File Cleanup Utility      Page:    1
 --------------------------------------------------------------------------
   DFN          Reason for Deletion
 --------------------------------------------------------------------------
   
   
 *** COUNT OF BAD PATIENT RECORDS: 1 ***
   
   24129        Related to DG*5.3*578
  
   
 b.  When you are ready to do the actual cleanup (assuming there are 
     records to delete), run CLEANUP^DG53P593. The utility routine will
     read through the entire Patient file.  However, as no active records
     should be involved in this process, the utility can be run anytime and
     no options need be placed out of order. Nonetheless, you may prefer to
     queue the routine during non-peak hours because of the heavy
     processing involved.  When the cleanup has completed, run
     REPORT^DG53P593 again. It should display "no records to report". You
     can then delete routine DG53P593.  Sample of actual Cleanup run below:
   
 Sample of Cleanup Run:
   
 VAH,ADT>D CLEANUP^DG53P593
   
 This is a one-time cleanup of the Patient File.
 Certain records which were created in error will be deleted.
 DEVICE: HOME//   UCX    Right Margin: 80//
    
   
 Sep 08, 2004   DG*5.3*593 Patient File Cleanup Utility          Page:    1
 --------------------------------------------------------------------------
   DFN          Reason for Deletion
 --------------------------------------------------------------------------
   
 *** COUNT OF BAD PATIENT RECORDS DELETED: 1 ***
   
   24129        Related to DG*5.3*578
   
   
 c.  Last, the report run in step a of the post-install instructions should
     be run again to validate the records that were expected to be cleaned
     up were indeed cleaned, sample below:
   
 >D REPORT^DG53P593
   
 This is a preliminary report by DFN of the Patient file
 records which would be deleted by the cleanup.
  
 DEVICE: HOME//   UCX    Right Margin: 80//
   
   
 Sep 08, 2004   DG*5.3*593 Patient File Cleanup Utility               
 --------------------------------------------------------------------------
   DFN          Reason for Deletion
 --------------------------------------------------------------------------
   
                     *** No records to report ***

Routine Information:
====================

Routine Name:
  - DGPMVDD


Routine Checksum:

Routine Name:
  - DG53P593


Routine Checksum:

=============================================================================
User Information:
Entered By  : THEROUX,JOHN                  Date Entered  : MAR 23, 2004
Completed By: BOWEN,MARY JANE               Date Completed: SEP 09, 2004
Released By : GROOMS,ANTHONY E              Date Released : SEP 09, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released IB*2*330 SEQ #289
Extracted from mail message
**KIDS**:IB*2.0*330^

**INSTALL NAME**
IB*2.0*330
"BLD",5788,0)
IB*2.0*330^INTEGRATED BILLING^0^3051115^y
"BLD",5788,1,0)
^^2^2^3051103^^^^
"BLD",5788,1,1,0)
THIS PATCH WILL CHANGE THE MEDICATION COPAY TO $8 AND THE ANNUAL CAP
"BLD",5788,1,2,0)
TO $960 EFFECTIVE JANUARY 1, 2006
"BLD",5788,4,0)
^9.64PA^^
"BLD",5788,"INID")
^n
"BLD",5788,"INIT")
IB20P330
"BLD",5788,"KRN",0)
^9.67PA^8989.52^19
"BLD",5788,"KRN",.4,0)
.4
"BLD",5788,"KRN",.401,0)
.401
"BLD",5788,"KRN",.402,0)
.402
"BLD",5788,"KRN",.403,0)
.403
"BLD",5788,"KRN",.5,0)
.5
"BLD",5788,"KRN",.84,0)
.84
"BLD",5788,"KRN",3.6,0)
3.6
"BLD",5788,"KRN",3.8,0)
3.8
"BLD",5788,"KRN",9.2,0)
9.2
"BLD",5788,"KRN",9.8,0)
9.8
"BLD",5788,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5788,"KRN",9.8,"NM",1,0)
IB20P330^^0^B8844022
"BLD",5788,"KRN",9.8,"NM","B","IB20P330",1)

"BLD",5788,"KRN",19,0)
19
"BLD",5788,"KRN",19,"NM",0)
^9.68A^^
"BLD",5788,"KRN",19.1,0)
19.1
"BLD",5788,"KRN",101,0)
101
"BLD",5788,"KRN",409.61,0)
409.61
"BLD",5788,"KRN",771,0)
771
"BLD",5788,"KRN",870,0)
870
"BLD",5788,"KRN",8989.51,0)
8989.51
"BLD",5788,"KRN",8989.52,0)
8989.52
"BLD",5788,"KRN",8994,0)
8994
"BLD",5788,"KRN","B",.4,.4)

"BLD",5788,"KRN","B",.401,.401)

"BLD",5788,"KRN","B",.402,.402)

"BLD",5788,"KRN","B",.403,.403)

"BLD",5788,"KRN","B",.5,.5)

"BLD",5788,"KRN","B",.84,.84)

"BLD",5788,"KRN","B",3.6,3.6)

"BLD",5788,"KRN","B",3.8,3.8)

"BLD",5788,"KRN","B",9.2,9.2)

"BLD",5788,"KRN","B",9.8,9.8)

"BLD",5788,"KRN","B",19,19)

"BLD",5788,"KRN","B",19.1,19.1)

"BLD",5788,"KRN","B",101,101)

"BLD",5788,"KRN","B",409.61,409.61)

"BLD",5788,"KRN","B",771,771)

"BLD",5788,"KRN","B",870,870)

"BLD",5788,"KRN","B",8989.51,8989.51)

"BLD",5788,"KRN","B",8989.52,8989.52)

"BLD",5788,"KRN","B",8994,8994)

"INIT")
IB20P330
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^2^1
"PKG",200,20,2,0)
2^^IBAXDR
"PKG",200,20,2,1)

"PKG",200,20,"B",2,2)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321
"PKG",200,22,1,"PAH",1,0)
330^3051115
"PKG",200,22,1,"PAH",1,1,0)
^^2^2^3051115
"PKG",200,22,1,"PAH",1,1,1,0)
THIS PATCH WILL CHANGE THE MEDICATION COPAY TO $8 AND THE ANNUAL CAP
"PKG",200,22,1,"PAH",1,1,2,0)
TO $960 EFFECTIVE JANUARY 1, 2006
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IB20P330")
0^1^B8844022
"RTN","IB20P330",1,0)
IB20P330 ;BPFO/OEC-POST INIT ROUTINE FOR IB*2*330 ; 11/15/05 11:21am
"RTN","IB20P330",2,0)
 ;;2.0;INTEGRATED BILLING;**330**;21-MAR-94
"RTN","IB20P330",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","IB20P330",4,0)
 ;
"RTN","IB20P330",5,0)
 ;
"RTN","IB20P330",6,0)
POST ; Post Init part of routine to add new rates to 350.2
"RTN","IB20P330",7,0)
 ;
"RTN","IB20P330",8,0)
 N DIC,DIK,DA,X,Y,IBX,IBA,IBT,IBY,DO,IBC,IBM,IBL,IBUP,IBY1
"RTN","IB20P330",9,0)
 ;
"RTN","IB20P330",10,0)
 S IBL=0 D M(""),M("  IB*2*330 Post-Install Starting ....."),M(""),MES^XPDUTL(.IBM) K IBM S (IBL,IBT)=0
"RTN","IB20P330",11,0)
 ;
"RTN","IB20P330",12,0)
 ; loop through entries to add (if needed)
"RTN","IB20P330",13,0)
RATE F IBX=1:1 S IBY=$P($T(RATES+IBX),";",3) Q:IBY=""  D
"RTN","IB20P330",14,0)
 . ;
"RTN","IB20P330",15,0)
 . ; see if it is there already
"RTN","IB20P330",16,0)
 . S IBA=$O(^IBE(350.1,"B",$P(IBY,"^",3),0))
"RTN","IB20P330",17,0)
 . I 'IBA D M(" ** Error: IB Action type "_$P(IBX,"^",3)_" not found !!!") Q
"RTN","IB20P330",18,0)
 . S $P(IBY,"^",3)=IBA
"RTN","IB20P330",19,0)
 . S IBC=$O(^IBE(350.2,"AIVDT",IBA,-$P(IBY,"^",2),0))
"RTN","IB20P330",20,0)
 . ;
"RTN","IB20P330",21,0)
 . ; add new entry
"RTN","IB20P330",22,0)
 . I 'IBC S DIC="^IBE(350.2,",DIC(0)="",X=$P(IBY,"^") K DO D FILE^DICN I $P(Y,"^",3) S $P(IBT,"^")=IBT+1,IBC=+Y
"RTN","IB20P330",23,0)
 . I 'IBC D M(" ** Error: Unable to add rate for "_$P(IBY,"^")) Q
"RTN","IB20P330",24,0)
 . ;
"RTN","IB20P330",25,0)
 . ; file data and xref
"RTN","IB20P330",26,0)
 . S ^IBE(350.2,+IBC,0)=IBY,DA=IBC,DIK="^IBE(350.2," D IX^DIK
"RTN","IB20P330",27,0)
 ;
"RTN","IB20P330",28,0)
 ;
"RTN","IB20P330",29,0)
 D M("  "_IBT_" rates added to IB ACTION CHARGE file."),M(" ")
"RTN","IB20P330",30,0)
 D MES^XPDUTL(.IBM) K IBM S IBL=0
"RTN","IB20P330",31,0)
 ;
"RTN","IB20P330",32,0)
 ;
"RTN","IB20P330",33,0)
 S IBT=0
"RTN","IB20P330",34,0)
 ;
"RTN","IB20P330",35,0)
 ; loop through entries to add (if needed)
"RTN","IB20P330",36,0)
CAP F IBX=1:1 S IBY=$P($T(CAPS+IBX),";",3) Q:IBY=""  D
"RTN","IB20P330",37,0)
 . ;
"RTN","IB20P330",38,0)
 . ; see if it is there already
"RTN","IB20P330",39,0)
 . S IBA=$O(^IBAM(354.75,"AC",$P(IBY,"^",3),$P(IBY,"^",2),0))
"RTN","IB20P330",40,0)
 . I IBA S IBC=$G(^IBAM(354.75,IBA,0)) I IBC=$P(IBY,"^",2,7) Q
"RTN","IB20P330",41,0)
 . ;
"RTN","IB20P330",42,0)
 . I IBA D M(" ** Error: Entry Number "_IBA_" in file 354.75 is incorrect !!!") Q
"RTN","IB20P330",43,0)
 . ;
"RTN","IB20P330",44,0)
 . ; add new entry
"RTN","IB20P330",45,0)
 . S DIC="^IBAM(354.75,",DIC(0)="",X=$P(IBY,"^",2) K DO D FILE^DICN S IBY1=+Y K D0
"RTN","IB20P330",46,0)
 . I Y<0 D M(" ** Error: Unable to add entry "_$P(IBY,"^")_" in file 354.75 !!!") Q
"RTN","IB20P330",47,0)
 . ;
"RTN","IB20P330",48,0)
 . ; file data and xref
"RTN","IB20P330",49,0)
 . S ^IBAM(354.75,IBY1,0)=$P(IBY,"^",2,7),DA=IBY1,DIK="^IBAM(354.75," D IX^DIK S IBT=IBT+1
"RTN","IB20P330",50,0)
 ;
"RTN","IB20P330",51,0)
 D M("  "_IBT_" caps added to IB COPAY CAPS file."),M(" ")
"RTN","IB20P330",52,0)
 D MES^XPDUTL(.IBM) K IBM,IBY1 S IBL=0
"RTN","IB20P330",53,0)
 ;
"RTN","IB20P330",54,0)
 D M("  IB*2*330 Post-Install Done .....")
"RTN","IB20P330",55,0)
 D MES^XPDUTL(.IBM)
"RTN","IB20P330",56,0)
 ;
"RTN","IB20P330",57,0)
 Q
"RTN","IB20P330",58,0)
 ;
"RTN","IB20P330",59,0)
M(Y) ; sets up messages
"RTN","IB20P330",60,0)
 ; Y = text to set up
"RTN","IB20P330",61,0)
 S IBL=IBL+1,IBM(IBL)=Y
"RTN","IB20P330",62,0)
 Q
"RTN","IB20P330",63,0)
 ;
"RTN","IB20P330",64,0)
RATES ; copay rates to add
"RTN","IB20P330",65,0)
 ;;RX1^3060101^PSO NSC RX COPAY NEW^8
"RTN","IB20P330",66,0)
 ;;RX3^3060101^PSO NSC RX COPAY CANCEL^8
"RTN","IB20P330",67,0)
 ;;RX4^3060101^PSO NSC RX COPAY UPDATE^8
"RTN","IB20P330",68,0)
 ;;RX2^3060101^PSO SC RX COPAY NEW^8
"RTN","IB20P330",69,0)
 ;;RX5^3060101^PSO SC RX COPAY CANCEL^8
"RTN","IB20P330",70,0)
 ;;RX6^3060101^PSO SC RX COPAY UPDATE^8
"RTN","IB20P330",71,0)
 ;;
"RTN","IB20P330",72,0)
CAPS ; copay caps to be installed (added) (same format as in 354.75 dd)
"RTN","IB20P330",73,0)
 ;;1^3060101^2^^960^^C
"RTN","IB20P330",74,0)
 ;;2^3060101^3^^960^^C
"RTN","IB20P330",75,0)
 ;;3^3060101^4^^960^^C
"RTN","IB20P330",76,0)
 ;;4^3060101^5^^960^^C
"RTN","IB20P330",77,0)
 ;;5^3060101^6^^960^^C
"VER")
8.0^22.0
"BLD",5788,6)
^SEQ #289
**END**
**END**

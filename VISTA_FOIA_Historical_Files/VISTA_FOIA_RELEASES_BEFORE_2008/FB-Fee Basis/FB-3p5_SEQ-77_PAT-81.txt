$TXT Created by HARTIN,JAMES at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 09/21/04 at 15:03
=============================================================================
Run Date: DEC 17, 2004                     Designation: FB*3.5*81
Package : FB - FEE BASIS                      Priority: Mandatory
Version : 3.5        SEQ #77                    Status: Released
                  Compliance Date: JAN 17, 2005
=============================================================================

Associated patches: (v)FB*3.5*77   <<= must be installed BEFORE `FB*3.5*81'

Subject: CORRECT BATCH AND INVOICE NUMBER ASSIGNMENT

Category: 
  - Routine
  - Data Dictionary

Description:
============

 This patch addresses two issues: one involving the assigning of FEE 
 BASIS BATCH numbers and the second involving the assignment of FEE BASIS 
 INVOICE numbers.
         
 ASSOCIATED E3R(s):
 -----------------
 N/A
     
 ASSOCIATED NOIS:
 ---------------
 1. ISW-0804-20108     $$CHKBI^FBAAUTL4 faults     
 
 PARTICIPATING TEST SITES:
 ------------------------
 Bay Pines,FL
 North Florida/South Georgia
 VA Greater Los Angeles HCS
 
 NOIS OVERVIEW:
 -------------
 1. ISW-0804-20108     $$CHKBI^FBAAUTL4 faults
   
 Problem:
 -------
 
 The same "utility call" is used to check both the BATCH and INVOICE 
 number assignment. The problem is not visible to the user. 
 
 1. The first issue is: before the next available BATCH value is 
 assigned the process checks to see if it is in use. The process checks the
 FEE BASIS BATCH file 161.7 file. If the number is not in use it continues 
 and also erroneously checks the FB PHARMACY INVOICE file 162.1 file and 
 the FEE BASIS INVOICE file 162.5 FILE .
  
 2. When called to check a new invoice number, the utility only checks
 two of the three invoice files. The software should also check file
 162 so the same invoice number can not be used on two different invoices.
 This will only become an issue when the next invoice number reaches the
 limit of 9999999 and resets back to 1.
 
 Resolution:
 ----------
 
 1. Check only the FEE BASIS BATCH file 161.7 file when assigning a BATCH 
 number.
 2. Add the additional check of the FEE BASIS PAYMENT file 162 file to the 
 process that checks if the new INVOICE number is in use. Remove the call 
 to CHKBI^FBAAUTL4 from the FEE BASIS PAYMENT, INVOICE NUMBER (162.03,14), 
 input transform. This is not required since the number is automatically
 assigned and not entered via input. This caused the number to be
 erroneously checked each time it was used and rejected as duplicate when 
 indeed it was checked against itself.
  
      
 ROUTINE SUMMARY
 ===============
 The following is a list of the routines included in this patch. The 
 second line of each of these routines now looks like: 
    
   <tab>;;3.5;FEE BASIS;**[PATCH LIST]**;JAN 30 1995
    
                        CHECK^XTSUMBLD results
   Routine name    Before Patch     After Patch    Patch List
   ------------    ------------     -----------    ----------
   FBAAUTL4        3964727          4096577        4,32,77,81
   FBXIP81E        N/A              3219115(deleted)       81 
   
  
 INSTALLATION INSTRUCTIONS
 =========================
  
 This patch can be loaded with users in the system.  Installation time
 will be less than 1 minute.
    
  1.  Choose the PackMan message containing this patch and invoke the 
      INSTALL/CHECK MESSAGE PackMan option.  
    
  2.  (DSM for Open VMS sites only) Disable routine mapping on all systems
      for the routines listed in the Routine Summary.
    
      NOTE:  If the routines included in this patch are not currently
      in your mapped routine set, please skip this step.
   
  3.  Start up the Kernel Installation and Distribution System Menu
      [XPD MAIN]: 
   
           Edits and Distribution ...  
           Utilities ...  
           Installation ...  
   
      Select Kernel Installation & Distribution System Option: Installation
                                                               ---
           1      Load a Distribution
           2      Verify Checksums in Transport Global
           3      Print Transport Global
           4      Compare Transport Global to Current System
           5      Backup a Transport Global
           6      Install Package(s)
                  Restart Install of Package(s)
                  Unload a Distribution
   
  4.  From this menu, you may elect to use the following options
      (When prompted for the INSTALL NAME, enter FB*3.5*81):
      
      a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will
          not backup any other changes such as DD's or templates.
      b.  Compare Transport Global to Current System - This option
          will allow you to view all changes that will be made when
          this patch is installed.  It compares all components of this
          patch (routines, DD's, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will
          allow you to ensure the integrity of the routines that are
          in the transport global.
   
  5.  Use the Install Package(s) option and select the package
      FB*3.5*81. 
  
       a.  When prompted 'Want KIDS to INHIBIT LOGONs during the
           install? YES//', answer NO.
   
       b.  When prompted 'Want to DISABLE Scheduled Options, Menu
           Options, and Protocols? YES//' answer NO.
        
    
  6.  (DSM for Open VMS sites only) Optional - Include the routines
      distributed with this patch in the mapped routine set.
   
      NOTE: This step is only necessary if you performed step 2 or if
      you wish to include the routines in your mapped set.
  
  NOTE: The post-install and enviornment check routine will be deleted 
  automatically after the patch is installed.

Routine Information:
====================

Routine Name:
  - FBAAUTL4


Routine Checksum:

=============================================================================
User Information:
Entered By  : HARTIN,JAMES                  Date Entered  : AUG 03, 2004
Completed By: ILUSTRISIMO,LUCY              Date Completed: DEC 16, 2004
Released By : BOTTINI,STEVE                 Date Released : DEC 17, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

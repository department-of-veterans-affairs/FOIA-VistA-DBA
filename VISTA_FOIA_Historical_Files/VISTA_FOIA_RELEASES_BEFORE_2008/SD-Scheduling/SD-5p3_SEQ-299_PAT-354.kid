Released SD*5.3*354 SEQ #299
Extracted from mail message
**KIDS**:SD*5.3*354^

**INSTALL NAME**
SD*5.3*354
"BLD",5479,0)
SD*5.3*354^SCHEDULING^0^3040629^y
"BLD",5479,1,0)
^^1^1^3040325^
"BLD",5479,1,1,0)
REMOVAL OF CHECK OUT PARAMETERS FOR CLINIC PROFILE.
"BLD",5479,4,0)
^9.64PA^^
"BLD",5479,"ABPKG")
n
"BLD",5479,"KRN",0)
^9.67PA^8989.52^19
"BLD",5479,"KRN",.4,0)
.4
"BLD",5479,"KRN",.401,0)
.401
"BLD",5479,"KRN",.402,0)
.402
"BLD",5479,"KRN",.403,0)
.403
"BLD",5479,"KRN",.5,0)
.5
"BLD",5479,"KRN",.84,0)
.84
"BLD",5479,"KRN",3.6,0)
3.6
"BLD",5479,"KRN",3.8,0)
3.8
"BLD",5479,"KRN",9.2,0)
9.2
"BLD",5479,"KRN",9.8,0)
9.8
"BLD",5479,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5479,"KRN",9.8,"NM",1,0)
SDCP^^0^B21063819
"BLD",5479,"KRN",9.8,"NM","B","SDCP",1)

"BLD",5479,"KRN",19,0)
19
"BLD",5479,"KRN",19.1,0)
19.1
"BLD",5479,"KRN",101,0)
101
"BLD",5479,"KRN",409.61,0)
409.61
"BLD",5479,"KRN",771,0)
771
"BLD",5479,"KRN",870,0)
870
"BLD",5479,"KRN",8989.51,0)
8989.51
"BLD",5479,"KRN",8989.52,0)
8989.52
"BLD",5479,"KRN",8994,0)
8994
"BLD",5479,"KRN","B",.4,.4)

"BLD",5479,"KRN","B",.401,.401)

"BLD",5479,"KRN","B",.402,.402)

"BLD",5479,"KRN","B",.403,.403)

"BLD",5479,"KRN","B",.5,.5)

"BLD",5479,"KRN","B",.84,.84)

"BLD",5479,"KRN","B",3.6,3.6)

"BLD",5479,"KRN","B",3.8,3.8)

"BLD",5479,"KRN","B",9.2,9.2)

"BLD",5479,"KRN","B",9.8,9.8)

"BLD",5479,"KRN","B",19,19)

"BLD",5479,"KRN","B",19.1,19.1)

"BLD",5479,"KRN","B",101,101)

"BLD",5479,"KRN","B",409.61,409.61)

"BLD",5479,"KRN","B",771,771)

"BLD",5479,"KRN","B",870,870)

"BLD",5479,"KRN","B",8989.51,8989.51)

"BLD",5479,"KRN","B",8989.52,8989.52)

"BLD",5479,"KRN","B",8994,8994)

"BLD",5479,"QUES",0)
^9.62^^
"BLD",5479,"REQB",0)
^9.611^1^1
"BLD",5479,"REQB",1,0)
SD*5.3*187^1
"BLD",5479,"REQB","B","SD*5.3*187",1)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
354^3040629
"PKG",16,22,1,"PAH",1,1,0)
^^1^1^3040629
"PKG",16,22,1,"PAH",1,1,1,0)
REMOVAL OF CHECK OUT PARAMETERS FOR CLINIC PROFILE.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SDCP")
0^1^B21063819
"RTN","SDCP",1,0)
SDCP ;BSN/GRR - CLINIC LIST ; 15 MAR 1999  4:10 PM ;
"RTN","SDCP",2,0)
 ;;5.3;Scheduling;**140,171,187,354**;Aug 13, 1993
"RTN","SDCP",3,0)
 D ASK2^SDDIV G:Y<0 END S VAUTNI=1 D CLINIC^VAUTOMA G:Y<0 END
"RTN","SDCP",4,0)
QUE N ZTSAVE F Y="VAUTD","VAUTD(","VAUTC","VAUTC(" S ZTSAVE(Y)=""
"RTN","SDCP",5,0)
 D EN^XUTMDEVQ("START^SDCP","Clinic Profile",.ZTSAVE) Q
"RTN","SDCP",6,0)
 ;
"RTN","SDCP",7,0)
START ;Print report
"RTN","SDCP",8,0)
 S END=0 D:'$D(DT) DT^SDUTL
"RTN","SDCP",9,0)
 S Y=DT D DTS^SDUTL S PDATE=Y,SCN=0 D TOF G:'VAUTC SOME
"RTN","SDCP",10,0)
 F  S SCN=$O(^SC("B",SCN)) Q:SCN=""!(END)  S SC=$O(^SC("B",SCN,0)) D:$$CHECK() SET0,SETSL,PRT
"RTN","SDCP",11,0)
 G END
"RTN","SDCP",12,0)
 ;
"RTN","SDCP",13,0)
SOME F  S SCN=$O(VAUTC(SCN)) Q:SCN=""!(END)  S SC=+VAUTC(SCN) D:$$CHECK() SET0,SETSL,PRT
"RTN","SDCP",14,0)
 G END
"RTN","SDCP",15,0)
 ;
"RTN","SDCP",16,0)
END W ! I $E(IOST)="C",'$G(END,1) N DIR S DIR(0)="E" D ^DIR
"RTN","SDCP",17,0)
 K ABBR,ALV,C,DAYS,DIC,DIPH,DOW,END,HCDB,I,J,L,LOC,LOP,M,NAME,ODM,PC,PDATE,POP,SC,SCSC,SDSC,SDMX,SDNO,SDNO,SDC,SDCR,SCSC,SCN,SDIN,SDPR,SDRE,STCD,STDAT,X,Y,SD,SDCNT,VAUTC,VAUTD,VAUTNI,STRING Q
"RTN","SDCP",18,0)
 ;
"RTN","SDCP",19,0)
SET0 S STRING=^SC(SC,0)
"RTN","SDCP",20,0)
 S NAME=$P(STRING,U,1),ABBR=$P(STRING,U,2),LOC=$P(STRING,U,11),(STCD,SDSC)=$P(STRING,U,7),SDCR=$P(STRING,U,18),SDCNT=$P(STRING,U,17)
"RTN","SDCP",21,0)
 S:$D(^SC(SC,"SDP")) SDMX=$P(^SC(SC,"SDP"),U,2) Q
"RTN","SDCP",22,0)
 ;
"RTN","SDCP",23,0)
SETSL S (LOP,HCDB,ALV,PC,ODM,DIPH,STDAT,STRING)="",STCD=$S(STCD="":" ",1:STCD),STCD=$S('$D(^DIC(40.7,+STCD,0)):"",1:$P(^(0),U,2)),SDSC=$S($D(^DIC(40.7,+SDSC,0)):'$P(^(0),U,3)!($P(^(0),U,3)>DT),1:0)
"RTN","SDCP",24,0)
 S SDPR=$S('$D(^SC(SC,"SDPROT")):"NO",'$L($P(^("SDPROT"),U)):"NO",1:"YES")
"RTN","SDCP",25,0)
 S SDCR=$S(SDCR="":" ",1:SDCR),SDCR=$S('$D(^DIC(40.7,+SDCR,0)):"",1:$P(^(0),U,2))
"RTN","SDCP",26,0)
 I $D(^SC(SC,"SL")) S STRING=^("SL"),LOP=$P(STRING,U,1),HCDB=$P(STRING,U,3),ALV=$S($P(STRING,U,2)["V":"YES",1:"NO")
"RTN","SDCP",27,0)
 I  S PC=$S($P(STRING,U,5)]"":$P(^SC($P(STRING,U,5),0),U,1),1:""),ODM=$P(STRING,U,7),DIPH=$S($P(STRING,U,6)=4:15,$P(STRING,U,6)=3:20,$P(STRING,U,6)=1:60,$P(STRING,U,6)=2:30,1:10)
"RTN","SDCP",28,0)
 S STDAT=$O(^SC(SC,"T",0)) S:STDAT<1 STDAT="UNKNOWN"
"RTN","SDCP",29,0)
 K DOW F L=0:1:6 F M=DT-.1:0 S M=$O(^SC(SC,"T"_L,M)) Q:M=""  I $D(^(M,1)) S:^(1)]"" DOW(L+1)="" Q:^(1)]""  K DOW(L+1)
"RTN","SDCP",30,0)
 F L=DT-.1:0 S L=$O(^SC(SC,"T",L)) Q:L=""  S X=L D DW^%DTC I '$D(DOW(Y+1)),$D(^SC(SC,"OST",L,1)),^(1)["[" S DOW(Y+1)=""
"RTN","SDCP",31,0)
 S DAYS="" F M=1:1:7 I $D(DOW(M)) S DAYS=DAYS_$S(DAYS'="":",",1:"")_$P("SU^MO^TU^WE^TH^FR^SA",U,M)
"RTN","SDCP",32,0)
 Q
"RTN","SDCP",33,0)
 ;
"RTN","SDCP",34,0)
L(SDT,SDCOL,SDVAL) ;Print field label
"RTN","SDCP",35,0)
 ;Input: SDT=field label
"RTN","SDCP",36,0)
 ;Input: SDCOL=column to line up to
"RTN","SDCP",37,0)
 ;Input: SDVAL=field value
"RTN","SDCP",38,0)
 W ?(SDCOL-$L(SDT)-2),SDT,": ",SDVAL Q
"RTN","SDCP",39,0)
 ;
"RTN","SDCP",40,0)
PRT I $Y+12>IOSL D:IOSL<25 SEEND:$E(IOST,1,2)="C-" Q:END  D TOF
"RTN","SDCP",41,0)
 S SDNO="" W ! D L("Clinic",19,NAME),L("Abbr.",62,ABBR)
"RTN","SDCP",42,0)
 W ! D L("Location",19,$E(LOC,1,30)),L("Telephone",62,$S($D(^SC(SC,99)):^SC(SC,99),1:""))
"RTN","SDCP",43,0)
 W ! D L("Days clinic meets",19,DAYS) I 'SDNO S Y=STDAT D:STDAT'="UNKNOWN" DTS^SDUTL
"RTN","SDCP",44,0)
 D L("Start date",62,$S(STDAT="UNKNOWN":"UNKNOWN",1:Y))
"RTN","SDCP",45,0)
 W ! D L("Increments",19,DIPH_" Minutes"),L("Hour display begins",62,$S(HCDB="":"8 AM",HCDB<13:HCDB_" AM",1:HCDB-12_" PM"))
"RTN","SDCP",46,0)
 W ! D L("Appt. length",19,LOP_" Minutes"),L("Variable length appts.",62,ALV)
"RTN","SDCP",47,0)
 W ! D L("Stop Code",19,STCD),L("Maximum overbooks per day",62,ODM)
"RTN","SDCP",48,0)
 W ! D L("Credit Stop Code",19,SDCR),L("Non-count clinic",62,$S(SDCNT="Y":"YES",1:"NO"))
"RTN","SDCP",49,0)
 W ! D L("Prohibit access",19,SDPR),L("Maximum days for future booking",62,$G(SDMX))
"RTN","SDCP",50,0)
 I PC]"" W ! D L("Principal clinic",19,PC)
"RTN","SDCP",51,0)
 I $D(^SC(SC,"I")) S SDRE=+$P(^("I"),U,2),SDIN=+^("I") I SDRE'=SDIN D:SDIN'>DT&(SDRE=0!(SDRE>DT)) INACT
"RTN","SDCP",52,0)
 I 'SDNO,$D(SDIN),SDIN>DT,SDRE'=SDIN W !!,?4,"**** Clinic will be inactive ",$S(SDRE:"from ",1:"as of ") S Y=SDIN D DTS^SDUTL W Y S Y=SDRE D:Y DTS^SDUTL W $S(SDRE:" to "_Y,1:"")," ****" K SDIN,SDRE
"RTN","SDCP",53,0)
 I 'SDSC W !!,?4,"*** INVALID OR INACTIVE STOP CODE ASSIGNED TO THIS CLINIC ***"
"RTN","SDCP",54,0)
 Q
"RTN","SDCP",55,0)
 ;
"RTN","SDCP",56,0)
INACT S Y=SDIN D DTS^SDUTL W !!,?4,"**** Clinic is inactive ",$S(SDRE:"from ",1:"as of "),Y S Y=SDRE D:Y DTS^SDUTL W $S(SDRE:" to "_Y,1:"")," ****" K SDIN,SDRE S SDNO=1
"RTN","SDCP",57,0)
 Q
"RTN","SDCP",58,0)
 ;
"RTN","SDCP",59,0)
SEEND W ! N DIR S DIR(0)="E" D ^DIR S END=Y'=1 Q:END
"RTN","SDCP",60,0)
TOF W @IOF,?22,"CLINIC PROFILES AS OF: ",PDATE,! Q
"RTN","SDCP",61,0)
 ;
"RTN","SDCP",62,0)
CHECK() ;Check location for inclusion
"RTN","SDCP",63,0)
 I $D(^SC(SC,0)),($P(^(0),U,3)="C"),$S(VAUTD:1,$D(VAUTD(+$P(^(0),U,15))):1,'$P(^(0),U,15)&($D(VAUTD($O(^DG(40.8,0))))):1,1:0) Q 1
"RTN","SDCP",64,0)
 Q 0
"RTN","SDCP",65,0)
 ;
"RTN","SDCP",66,0)
 ;
"RTN","SDCP",67,0)
PAUSE(LINE) ;
"RTN","SDCP",68,0)
 N Y S Y=1
"RTN","SDCP",69,0)
 I $E(IOST,1,2)="C-",(LINE+5)>IOSL D PAUSE^VALM1 S LINE=0
"RTN","SDCP",70,0)
 S LINE=LINE+1
"RTN","SDCP",71,0)
 Q Y
"VER")
8.0^22
**END**
**END**

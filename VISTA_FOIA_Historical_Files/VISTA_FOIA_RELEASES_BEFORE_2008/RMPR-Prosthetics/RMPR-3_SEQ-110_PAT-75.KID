Released RMPR*3*75 SEQ #110
Extracted from mail message
**KIDS**:RMPR*3.0*75^

**INSTALL NAME**
RMPR*3.0*75
"BLD",5641,0)
RMPR*3.0*75^PROSTHETICS^0^3070409^y
"BLD",5641,4,0)
^9.64PA^668^3
"BLD",5641,4,660,0)
660
"BLD",5641,4,660,2,0)
^9.641^660^1
"BLD",5641,4,660,2,660,0)
RECORD OF PROS APPLIANCE/REPAIR  (File-top level)
"BLD",5641,4,660,2,660,1,0)
^9.6411^72.5^2
"BLD",5641,4,660,2,660,1,4.92,0)
HIGH TECH ITEM
"BLD",5641,4,660,2,660,1,72.5,0)
FREE TEXT WO #
"BLD",5641,4,660,222)
y^n^p^^^^n^^n
"BLD",5641,4,660,224)

"BLD",5641,4,664.1,0)
664.1
"BLD",5641,4,664.1,2,0)
^9.641^664.16^2
"BLD",5641,4,664.1,2,664.1,0)
PROSTHETIC 2529-3  (File-top level)
"BLD",5641,4,664.1,2,664.1,1,0)
^9.6411^2^2
"BLD",5641,4,664.1,2,664.1,1,.05,0)
SUSPENSE RECORD
"BLD",5641,4,664.1,2,664.1,1,2,0)
SOURCE OF PROCUREMENT
"BLD",5641,4,664.1,2,664.16,0)
ITEM  (sub-file)
"BLD",5641,4,664.1,2,664.16,1,0)
^9.6411^13.2^1
"BLD",5641,4,664.1,2,664.16,1,13.2,0)
HIGH TECH ITEM
"BLD",5641,4,664.1,222)
y^n^p^^^^n^^n
"BLD",5641,4,664.1,224)

"BLD",5641,4,668,0)
668
"BLD",5641,4,668,2,0)
^9.641^668^1
"BLD",5641,4,668,2,668,0)
PROSTHETIC SUSPENSE  (File-top level)
"BLD",5641,4,668,2,668,1,0)
^9.6411^9^1
"BLD",5641,4,668,2,668,1,9,0)
TYPE OF REQUEST
"BLD",5641,4,668,222)
y^n^p^^^^n^^n
"BLD",5641,4,668,224)

"BLD",5641,4,"APDD",660,660)

"BLD",5641,4,"APDD",660,660,4.92)

"BLD",5641,4,"APDD",660,660,72.5)

"BLD",5641,4,"APDD",664.1,664.1)

"BLD",5641,4,"APDD",664.1,664.1,.05)

"BLD",5641,4,"APDD",664.1,664.1,2)

"BLD",5641,4,"APDD",664.1,664.16)

"BLD",5641,4,"APDD",664.1,664.16,13.2)

"BLD",5641,4,"APDD",668,668)

"BLD",5641,4,"APDD",668,668,9)

"BLD",5641,4,"B",660,660)

"BLD",5641,4,"B",664.1,664.1)

"BLD",5641,4,"B",668,668)

"BLD",5641,6)
17^
"BLD",5641,6.3)
25
"BLD",5641,"INI")
RMPRWOFX
"BLD",5641,"INIT")
RMPRP75
"BLD",5641,"KRN",0)
^9.67PA^8989.52^19
"BLD",5641,"KRN",.4,0)
.4
"BLD",5641,"KRN",.401,0)
.401
"BLD",5641,"KRN",.402,0)
.402
"BLD",5641,"KRN",.403,0)
.403
"BLD",5641,"KRN",.5,0)
.5
"BLD",5641,"KRN",.84,0)
.84
"BLD",5641,"KRN",3.6,0)
3.6
"BLD",5641,"KRN",3.8,0)
3.8
"BLD",5641,"KRN",9.2,0)
9.2
"BLD",5641,"KRN",9.8,0)
9.8
"BLD",5641,"KRN",9.8,"NM",0)
^9.68A^29^28
"BLD",5641,"KRN",9.8,"NM",1,0)
RMPR29CA^^0^B67346263
"BLD",5641,"KRN",9.8,"NM",2,0)
RMPR29GA^^0^B27172398
"BLD",5641,"KRN",9.8,"NM",3,0)
RMPR29GU^^0^B8685771
"BLD",5641,"KRN",9.8,"NM",4,0)
RMPR9CPP^^0^B1419829
"BLD",5641,"KRN",9.8,"NM",6,0)
RMPR29R^^0^B24256749
"BLD",5641,"KRN",9.8,"NM",7,0)
RMPR9LNP^^0^B10235375
"BLD",5641,"KRN",9.8,"NM",8,0)
RMPRP75^^0^B10554
"BLD",5641,"KRN",9.8,"NM",9,0)
RMPR29RG^^0^B61078341
"BLD",5641,"KRN",9.8,"NM",10,0)
RMPR9PU^^0^B63675853
"BLD",5641,"KRN",9.8,"NM",11,0)
RMPR29BG^^0^B9828158
"BLD",5641,"KRN",9.8,"NM",12,0)
RMPR29L2^^0^B3109839
"BLD",5641,"KRN",9.8,"NM",13,0)
RMPR29MG^^0^B20596253
"BLD",5641,"KRN",9.8,"NM",14,0)
RMPR29W1^^0^B17691968
"BLD",5641,"KRN",9.8,"NM",15,0)
RMPR29W2^^0^B6644737
"BLD",5641,"KRN",9.8,"NM",16,0)
RMPR29WO^^0^B18989581
"BLD",5641,"KRN",9.8,"NM",17,0)
RMPR121C^^0^B12618481
"BLD",5641,"KRN",9.8,"NM",18,0)
RMPR8PG^^0^B6481133
"BLD",5641,"KRN",9.8,"NM",19,0)
RMPR9S4^^0^B30605994
"BLD",5641,"KRN",9.8,"NM",20,0)
RMPR9LN1^^0^B7935718
"BLD",5641,"KRN",9.8,"NM",21,0)
RMPR29T^^0^B30847402
"BLD",5641,"KRN",9.8,"NM",22,0)
RMPR9S4E^^0^B42900080
"BLD",5641,"KRN",9.8,"NM",23,0)
RMPROWL^^0^B7693046
"BLD",5641,"KRN",9.8,"NM",24,0)
RMPR29CB^^0^B11728992
"BLD",5641,"KRN",9.8,"NM",25,0)
RMPR121B^^0^B16065280
"BLD",5641,"KRN",9.8,"NM",26,0)
RMPRPAT2^^0^B25940466
"BLD",5641,"KRN",9.8,"NM",27,0)
RMPRWOFX^^0^B615875
"BLD",5641,"KRN",9.8,"NM",28,0)
RMPREOSA^^0^B15578293
"BLD",5641,"KRN",9.8,"NM",29,0)
RMPRGULK^^0^B554567
"BLD",5641,"KRN",9.8,"NM","B","RMPR121B",25)

"BLD",5641,"KRN",9.8,"NM","B","RMPR121C",17)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29BG",11)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29CA",1)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29CB",24)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29GA",2)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29GU",3)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29L2",12)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29MG",13)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29R",6)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29RG",9)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29T",21)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29W1",14)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29W2",15)

"BLD",5641,"KRN",9.8,"NM","B","RMPR29WO",16)

"BLD",5641,"KRN",9.8,"NM","B","RMPR8PG",18)

"BLD",5641,"KRN",9.8,"NM","B","RMPR9CPP",4)

"BLD",5641,"KRN",9.8,"NM","B","RMPR9LN1",20)

"BLD",5641,"KRN",9.8,"NM","B","RMPR9LNP",7)

"BLD",5641,"KRN",9.8,"NM","B","RMPR9PU",10)

"BLD",5641,"KRN",9.8,"NM","B","RMPR9S4",19)

"BLD",5641,"KRN",9.8,"NM","B","RMPR9S4E",22)

"BLD",5641,"KRN",9.8,"NM","B","RMPREOSA",28)

"BLD",5641,"KRN",9.8,"NM","B","RMPRGULK",29)

"BLD",5641,"KRN",9.8,"NM","B","RMPROWL",23)

"BLD",5641,"KRN",9.8,"NM","B","RMPRP75",8)

"BLD",5641,"KRN",9.8,"NM","B","RMPRPAT2",26)

"BLD",5641,"KRN",9.8,"NM","B","RMPRWOFX",27)

"BLD",5641,"KRN",19,0)
19
"BLD",5641,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",5641,"KRN",19,"NM",1,0)
RMPR PURCHASE ORDER GUI^^0
"BLD",5641,"KRN",19,"NM","B","RMPR PURCHASE ORDER GUI",1)

"BLD",5641,"KRN",19.1,0)
19.1
"BLD",5641,"KRN",101,0)
101
"BLD",5641,"KRN",409.61,0)
409.61
"BLD",5641,"KRN",771,0)
771
"BLD",5641,"KRN",870,0)
870
"BLD",5641,"KRN",8989.51,0)
8989.51
"BLD",5641,"KRN",8989.52,0)
8989.52
"BLD",5641,"KRN",8994,0)
8994
"BLD",5641,"KRN",8994,"NM",0)
^9.68A^14^14
"BLD",5641,"KRN",8994,"NM",1,0)
RMPR CHECK PROS PATIENT^^0
"BLD",5641,"KRN",8994,"NM",2,0)
RMPR OWL PC PRINT^^0
"BLD",5641,"KRN",8994,"NM",3,0)
RMPR OWL SUSPENSE ACTIONS^^0
"BLD",5641,"KRN",8994,"NM",4,0)
RMPR OWL WORK ORDER LIST^^0
"BLD",5641,"KRN",8994,"NM",5,0)
RMPR CREATE WORK ORDER^^0
"BLD",5641,"KRN",8994,"NM",6,0)
RMPR PURCHASE ORDER CONTROL^^0
"BLD",5641,"KRN",8994,"NM",7,0)
RMPR OWL ADD ON LIST^^0
"BLD",5641,"KRN",8994,"NM",8,0)
RMPR OWL ENTER/EDIT ADD ON^^0
"BLD",5641,"KRN",8994,"NM",9,0)
RMPR OWL ENTER/EDIT HCPCS CODE^^0
"BLD",5641,"KRN",8994,"NM",10,0)
RMPR OWL ENTER/EDIT HRS/RATE^^0
"BLD",5641,"KRN",8994,"NM",11,0)
RMPR OWL ITEM LIST^^0
"BLD",5641,"KRN",8994,"NM",12,0)
RMPR OWL TECH/HOUR/RATE LIST^^0
"BLD",5641,"KRN",8994,"NM",13,0)
RMPR OWL VISTA PRINT^^0
"BLD",5641,"KRN",8994,"NM",14,0)
RMPR OWL LOCK FILE^^0
"BLD",5641,"KRN",8994,"NM","B","RMPR CHECK PROS PATIENT",1)

"BLD",5641,"KRN",8994,"NM","B","RMPR CREATE WORK ORDER",5)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL ADD ON LIST",7)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL ENTER/EDIT ADD ON",8)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL ENTER/EDIT HCPCS CODE",9)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL ENTER/EDIT HRS/RATE",10)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL ITEM LIST",11)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL LOCK FILE",14)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL PC PRINT",2)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL SUSPENSE ACTIONS",3)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL TECH/HOUR/RATE LIST",12)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL VISTA PRINT",13)

"BLD",5641,"KRN",8994,"NM","B","RMPR OWL WORK ORDER LIST",4)

"BLD",5641,"KRN",8994,"NM","B","RMPR PURCHASE ORDER CONTROL",6)

"BLD",5641,"KRN","B",.4,.4)

"BLD",5641,"KRN","B",.401,.401)

"BLD",5641,"KRN","B",.402,.402)

"BLD",5641,"KRN","B",.403,.403)

"BLD",5641,"KRN","B",.5,.5)

"BLD",5641,"KRN","B",.84,.84)

"BLD",5641,"KRN","B",3.6,3.6)

"BLD",5641,"KRN","B",3.8,3.8)

"BLD",5641,"KRN","B",9.2,9.2)

"BLD",5641,"KRN","B",9.8,9.8)

"BLD",5641,"KRN","B",19,19)

"BLD",5641,"KRN","B",19.1,19.1)

"BLD",5641,"KRN","B",101,101)

"BLD",5641,"KRN","B",409.61,409.61)

"BLD",5641,"KRN","B",771,771)

"BLD",5641,"KRN","B",870,870)

"BLD",5641,"KRN","B",8989.51,8989.51)

"BLD",5641,"KRN","B",8989.52,8989.52)

"BLD",5641,"KRN","B",8994,8994)

"BLD",5641,"QUES",0)
^9.62^^
"BLD",5641,"REQB",0)
^9.611^5^5
"BLD",5641,"REQB",1,0)
RMPR*3.0*34^2
"BLD",5641,"REQB",2,0)
RMPR*3.0*78^2
"BLD",5641,"REQB",3,0)
RMPR*3.0*80^2
"BLD",5641,"REQB",4,0)
RMPR*3.0*90^2
"BLD",5641,"REQB",5,0)
RMPR*3.0*99^2
"BLD",5641,"REQB","B","RMPR*3.0*34",1)

"BLD",5641,"REQB","B","RMPR*3.0*78",2)

"BLD",5641,"REQB","B","RMPR*3.0*80",3)

"BLD",5641,"REQB","B","RMPR*3.0*90",4)

"BLD",5641,"REQB","B","RMPR*3.0*99",5)

"FIA",660)
RECORD OF PROS APPLIANCE/REPAIR
"FIA",660,0)
^RMPR(660,
"FIA",660,0,0)
660IOD
"FIA",660,0,1)
y^n^p^^^^n^^n
"FIA",660,0,10)

"FIA",660,0,11)

"FIA",660,0,"RLRO")

"FIA",660,0,"VR")
3.0^RMPR
"FIA",660,660)
1
"FIA",660,660,4.92)

"FIA",660,660,72.5)

"FIA",664.1)
PROSTHETIC 2529-3
"FIA",664.1,0)
^RMPR(664.1,
"FIA",664.1,0,0)
664.1ID
"FIA",664.1,0,1)
y^n^p^^^^n^^n
"FIA",664.1,0,10)

"FIA",664.1,0,11)

"FIA",664.1,0,"RLRO")

"FIA",664.1,0,"VR")
3.0^RMPR
"FIA",664.1,664.1)
1
"FIA",664.1,664.1,.05)

"FIA",664.1,664.1,2)

"FIA",664.1,664.16)
1
"FIA",664.1,664.16,13.2)

"FIA",668)
PROSTHETIC SUSPENSE
"FIA",668,0)
^RMPR(668,
"FIA",668,0,0)
668ID
"FIA",668,0,1)
y^n^p^^^^n^^n
"FIA",668,0,10)

"FIA",668,0,11)

"FIA",668,0,"RLRO")

"FIA",668,0,"VR")
3.0^RMPR
"FIA",668,668)
1
"FIA",668,668,9)

"INI")
RMPRWOFX
"INIT")
RMPRP75
"KRN",19,16374,-1)
0^1
"KRN",19,16374,0)
RMPR PURCHASE ORDER GUI^PROSTHETICS PURCHASE ORDER GUI^^B^^^^^^^^PROSTHETICS
"KRN",19,16374,1,0)
^19.06^7^7^3050303^^^^
"KRN",19,16374,1,1,0)
'B' type option for use after installation of RMPR*3&90.
"KRN",19,16374,1,2,0)
For users to be able to use the Purchase Order GUI
"KRN",19,16374,1,3,0)
front-end, this option must be on either their primary
"KRN",19,16374,1,4,0)
placed on RMPR NPPD TOOLS to give users who have access
"KRN",19,16374,1,5,0)
to the current NPPD options, access to NPPD GUI Detail
"KRN",19,16374,1,6,0)
Display.  Note: 'B' type options are not visible to roll
"KRN",19,16374,1,7,0)
& scroll users.
"KRN",19,16374,99.1)
59324,42897
"KRN",19,16374,"RPC",0)
^19.05P^70^70
"KRN",19,16374,"RPC",1,0)
RMPR NPPD LIST
"KRN",19,16374,"RPC",2,0)
XWB GET VARIABLE VALUE
"KRN",19,16374,"RPC",5,0)
RMPR CLINIC ENROLLMENT
"KRN",19,16374,"RPC",6,0)
RMPR CLINIC LETTER DISPLAY
"KRN",19,16374,"RPC",7,0)
RMPR CLINIC LETTER LIST
"KRN",19,16374,"RPC",9,0)
RMPR LAST PT MOVEMENTS
"KRN",19,16374,"RPC",10,0)
RMPR PENDING APPOINTMENTS
"KRN",19,16374,"RPC",11,0)
RMPR TRANS LIST
"KRN",19,16374,"RPC",12,0)
RMPR TRANS HISA
"KRN",19,16374,"RPC",13,0)
RMPR PT ADD
"KRN",19,16374,"RPC",14,0)
RMPR PT DEM
"KRN",19,16374,"RPC",15,0)
RMPR TRANS HOME O2
"KRN",19,16374,"RPC",17,0)
RMPR CRITICAL COM
"KRN",19,16374,"RPC",19,0)
RMPR DIS LIST
"KRN",19,16374,"RPC",20,0)
RMPR OPEN PEN LIST
"KRN",19,16374,"RPC",21,0)
RMPR CPRS DISPLAY
"KRN",19,16374,"RPC",24,0)
RMPR TRANS LIST EXPANDED
"KRN",19,16374,"RPC",25,0)
DDR LISTER
"KRN",19,16374,"RPC",26,0)
DDR FINDER
"KRN",19,16374,"RPC",27,0)
DDR VALIDATOR
"KRN",19,16374,"RPC",28,0)
RMPR VIEW REQ
"KRN",19,16374,"RPC",29,0)
RMPR VIEW REQ DESC
"KRN",19,16374,"RPC",30,0)
RMPR VIEW REQ IA NOTE
"KRN",19,16374,"RPC",31,0)
RMPR VIEW REQ COMP NOTE
"KRN",19,16374,"RPC",32,0)
RMPR TRANS HOME O2 RX
"KRN",19,16374,"RPC",33,0)
RMPR DOR
"KRN",19,16374,"RPC",35,0)
DDR GETS ENTRY DATA
"KRN",19,16374,"RPC",36,0)
DDR FILER
"KRN",19,16374,"RPC",43,0)
RMPR CHECK PA AUTHORIZATION
"KRN",19,16374,"RPC",44,0)
RMPR PO CREATE VISTA IEN
"KRN",19,16374,"RPC",45,0)
RMPR SEND PURCHASE ORDER
"KRN",19,16374,"RPC",46,0)
RMPR ENCRYPT PCARD
"KRN",19,16374,"RPC",47,0)
DDR FIND1
"KRN",19,16374,"RPC",48,0)
RMPR LIST PCARD
"KRN",19,16374,"RPC",49,0)
RMPR LIST COST CENTER
"KRN",19,16374,"RPC",50,0)
RMPR LIST BOC
"KRN",19,16374,"RPC",51,0)
RMPR CREATE PO
"KRN",19,16374,"RPC",52,0)
RMPR SUSPENSE ACTIONS
"KRN",19,16374,"RPC",53,0)
RMPR MANAGER COMMENT
"KRN",19,16374,"RPC",54,0)
RMPR DELETE PO
"KRN",19,16374,"RPC",55,0)
RMPR CHECK FUND CONTROL POINT
"KRN",19,16374,"RPC",56,0)
RMPR PC PO PRINT
"KRN",19,16374,"RPC",57,0)
RMPR CHECK PROS PATIENT
"KRN",19,16374,"RPC",58,0)
RMPR CREATE WORK ORDER
"KRN",19,16374,"RPC",59,0)
RMPR OWL SUSPENSE ACTIONS
"KRN",19,16374,"RPC",60,0)
RMPR OWL PC PRINT
"KRN",19,16374,"RPC",61,0)
RMPR OWL WORK ORDER LIST
"KRN",19,16374,"RPC",62,0)
RMPR PURCHASE ORDER CONTROL
"KRN",19,16374,"RPC",63,0)
RMPR OWL TECH/HOUR/RATE LIST
"KRN",19,16374,"RPC",64,0)
RMPR OWL ITEM LIST
"KRN",19,16374,"RPC",65,0)
RMPR OWL ENTER/EDIT HRS/RATE
"KRN",19,16374,"RPC",66,0)
RMPR OWL ENTER/EDIT HCPCS CODE
"KRN",19,16374,"RPC",67,0)
RMPR OWL ENTER/EDIT ADD ON
"KRN",19,16374,"RPC",68,0)
RMPR OWL ADD ON LIST
"KRN",19,16374,"RPC",69,0)
RMPR OWL VISTA PRINT
"KRN",19,16374,"RPC",70,0)
RMPR OWL LOCK FILE
"KRN",19,16374,"U")
PROSTHETICS PURCHASE ORDER GUI
"KRN",8994,2349,-1)
0^1
"KRN",8994,2349,0)
RMPR CHECK PROS PATIENT^EN1^RMPR9CPP^2^S^0^^0
"KRN",8994,2349,1,0)
^8994.01^1^1^3051012^^^
"KRN",8994,2349,1,1,0)
 
"KRN",8994,2349,2,0)
^8994.02A^1^1
"KRN",8994,2349,2,1,0)
IEN^1^50^1^1
"KRN",8994,2349,2,1,1,0)
^8994.021^1^1^3051012^^^
"KRN",8994,2349,2,1,1,1,0)
 
"KRN",8994,2349,2,"B","IEN",1)

"KRN",8994,2349,2,"PARAMSEQ",1,1)

"KRN",8994,2349,3,0)
^8994.03^1^1^3051012^^^
"KRN",8994,2349,3,1,0)
 
"KRN",8994,2349,605001)
34018
"KRN",8994,2350,-1)
0^5
"KRN",8994,2350,0)
RMPR CREATE WORK ORDER^CR^RMPR29GU^2^S^0^^0
"KRN",8994,2350,1,0)
^8994.01^1^1^3051017^^^^
"KRN",8994,2350,1,1,0)
 
"KRN",8994,2350,2,0)
^8994.02A^2^2
"KRN",8994,2350,2,1,0)
RMPR9DA^1^50^1^1
"KRN",8994,2350,2,1,1,0)
^8994.021^1^1^3051017^^^^
"KRN",8994,2350,2,1,1,1,0)
IEN OF 664.1
"KRN",8994,2350,2,2,0)
SCR^1^50^1^2
"KRN",8994,2350,2,2,1,0)
^^1^1^3051017^
"KRN",8994,2350,2,2,1,1,0)
Source of Procurement
"KRN",8994,2350,2,"B","RMPR9DA",1)

"KRN",8994,2350,2,"B","SCR",2)

"KRN",8994,2350,2,"PARAMSEQ",1,1)

"KRN",8994,2350,2,"PARAMSEQ",2,2)

"KRN",8994,2350,3,0)
^8994.03^1^1^3051017^^^^
"KRN",8994,2350,3,1,0)
 
"KRN",8994,2350,605001)
34018
"KRN",8994,2351,-1)
0^3
"KRN",8994,2351,0)
RMPR OWL SUSPENSE ACTIONS^EN^RMPR29CA^2^R^0^^0
"KRN",8994,2351,1,0)
3^8994.01^3^3^3051109^^
"KRN",8994,2351,1,1,0)
Remote Procedure  for Work Order Actions.  The first 2 will be:
"KRN",8994,2351,1,2,0)
Post complete note
"KRN",8994,2351,1,3,0)
Post initial action
"KRN",8994,2351,2,0)
^8994.02A^1^1
"KRN",8994,2351,2,1,0)
RMPRTXT^2^1
"KRN",8994,2351,2,"B","RMPRTXT",1)

"KRN",8994,2351,605001)
34018
"KRN",8994,2352,-1)
0^4
"KRN",8994,2352,0)
RMPR OWL WORK ORDER LIST^EN^RMPR29WO^4^P^0^^1
"KRN",8994,2352,1,0)
^8994.01^2^2^3051208^
"KRN",8994,2352,1,1,0)
GUI Order controll processing.  Returns the list of all open pending 
"KRN",8994,2352,1,2,0)
Work Orders from file 664.1.
"KRN",8994,2352,3,0)
^^11^11^3051208^
"KRN",8994,2352,3,1,0)
The array format:
"KRN",8994,2352,3,2,0)
 
"KRN",8994,2352,3,3,0)
 
"KRN",8994,2352,3,4,0)
^TMP(543169513,file668ien)=Suspense Record 
"KRN",8994,2352,3,5,0)
create date^DFN^Patient Name^SSN no dash^SSN dashes^Suspense Record 
"KRN",8994,2352,3,6,0)
Type^Suspense Record Description^Status^Suspense Record IEN^664.1 
"KRN",8994,2352,3,7,0)
IEN^HCPCS Item number^Work Order Number^Requsting Official 
"KRN",8994,2352,3,8,0)
(PA)^Technician^Source of Procurement^Nppd Station official number^Npd 
"KRN",8994,2352,3,9,0)
Station official name^Requesting Station official number^requesting 
"KRN",8994,2352,3,10,0)
statio official name^receiving station official number^receiving station 
"KRN",8994,2352,3,11,0)
official name
"KRN",8994,2352,605001)
34018
"KRN",8994,2353,-1)
0^2
"KRN",8994,2353,0)
RMPR OWL PC PRINT^PRT^RMPR29RG^2^S^0^^0
"KRN",8994,2353,1,0)
^8994.01^2^2^3051212^^^^
"KRN",8994,2353,1,1,0)
Purchase Order Information to be printed from a PC Device Fax/Printer
"KRN",8994,2353,1,2,0)
 
"KRN",8994,2353,605001)
34018
"KRN",8994,2373,-1)
0^11
"KRN",8994,2373,0)
RMPR OWL ITEM LIST^EN^RMPR29W1^4^P^0^^1
"KRN",8994,2373,1,0)
^8994.01^2^2^3051208^
"KRN",8994,2373,1,1,0)
GUI Order controll processing.  Returns the list of all open pending 
"KRN",8994,2373,1,2,0)
Work Orders from file 664.1.
"KRN",8994,2373,3,0)
^^11^11^3051208^
"KRN",8994,2373,3,1,0)
The array format:
"KRN",8994,2373,3,2,0)
 
"KRN",8994,2373,3,3,0)
 
"KRN",8994,2373,3,4,0)
^TMP(543169513,file668ien)=Suspense Record 
"KRN",8994,2373,3,5,0)
create date^DFN^Patient Name^SSN no dash^SSN dashes^Suspense Record 
"KRN",8994,2373,3,6,0)
Type^Suspense Record Description^Status^Suspense Record IEN^664.1 
"KRN",8994,2373,3,7,0)
IEN^HCPCS Item number^Work Order Number^Requsting Official 
"KRN",8994,2373,3,8,0)
(PA)^Technician^Source of Procurement^Nppd Station official number^Npd 
"KRN",8994,2373,3,9,0)
Station official name^Requesting Station official number^requesting 
"KRN",8994,2373,3,10,0)
statio official name^receiving station official number^receiving station 
"KRN",8994,2373,3,11,0)
official name
"KRN",8994,2373,605001)
34018
"KRN",8994,2374,-1)
0^6
"KRN",8994,2374,0)
RMPR PURCHASE ORDER CONTROL^EN^RMPR9PU^4^P^0^^1
"KRN",8994,2374,1,0)
^8994.01^2^2^3060208^^^^
"KRN",8994,2374,1,1,0)
GUI Order controll processing.  Returns the list of all open pending 
"KRN",8994,2374,1,2,0)
consults from file 668.
"KRN",8994,2374,3,0)
^8994.03^4^4^3060208^^^^
"KRN",8994,2374,3,1,0)
Returns the list of all open pending consults from file 668.
"KRN",8994,2374,3,2,0)
The array format:
"KRN",8994,2374,3,3,0)
 
"KRN",8994,2374,3,4,0)
RMPR9EO(line number,0)=date^patient name^ssn^type^days^status^des
"KRN",8994,2374,605001)
34018
"KRN",8994,2375,-1)
0^7
"KRN",8994,2375,0)
RMPR OWL ADD ON LIST^EN^RMPR29W2^4^P^0^^1
"KRN",8994,2375,1,0)
^8994.01^3^3^3060221^
"KRN",8994,2375,1,1,0)
GUI Order controll processing.  Returns Add On's from material multiple 
"KRN",8994,2375,1,2,0)
of 664.2.
"KRN",8994,2375,1,3,0)
.
"KRN",8994,2375,3,0)
^^11^11^3051208^
"KRN",8994,2375,3,1,0)
The array format:
"KRN",8994,2375,3,2,0)
 
"KRN",8994,2375,3,3,0)
 
"KRN",8994,2375,3,4,0)
^TMP(543169513,file668ien)=Suspense Record 
"KRN",8994,2375,3,5,0)
create date^DFN^Patient Name^SSN no dash^SSN dashes^Suspense Record 
"KRN",8994,2375,3,6,0)
Type^Suspense Record Description^Status^Suspense Record IEN^664.1 
"KRN",8994,2375,3,7,0)
IEN^HCPCS Item number^Work Order Number^Requsting Official 
"KRN",8994,2375,3,8,0)
(PA)^Technician^Source of Procurement^Nppd Station official number^Npd 
"KRN",8994,2375,3,9,0)
Station official name^Requesting Station official number^requesting 
"KRN",8994,2375,3,10,0)
statio official name^receiving station official number^receiving station 
"KRN",8994,2375,3,11,0)
official name
"KRN",8994,2375,605001)
34018
"KRN",8994,2376,-1)
0^8
"KRN",8994,2376,0)
RMPR OWL ENTER/EDIT ADD ON^EN^RMPR29MG^2^P^0^^1
"KRN",8994,2376,1,0)
^8994.01^4^4^3060228^
"KRN",8994,2376,1,1,0)
GUI Order controll processing.  ENTER/EDIT
"KRN",8994,2376,1,2,0)
Add On's from material multiple
"KRN",8994,2376,1,3,0)
of 664.2.
"KRN",8994,2376,1,4,0)
.
"KRN",8994,2376,605001)
34018
"KRN",8994,2377,-1)
0^9
"KRN",8994,2377,0)
RMPR OWL ENTER/EDIT HCPCS CODE^EN^RMPR29BG^2^P^0^^1
"KRN",8994,2377,1,0)
^8994.01^4^4^3060302^
"KRN",8994,2377,1,1,0)
GUI Order controll processing.  ENTER/EDIT
"KRN",8994,2377,1,2,0)
Primary Items Base Codes multiple
"KRN",8994,2377,1,3,0)
of 664.1.
"KRN",8994,2377,1,4,0)
.
"KRN",8994,2377,605001)
34018
"KRN",8994,2378,-1)
0^10
"KRN",8994,2378,0)
RMPR OWL ENTER/EDIT HRS/RATE^EN2^RMPR29MG^2^P^0^^1
"KRN",8994,2378,1,0)
^8994.01^4^4^3060314^
"KRN",8994,2378,1,1,0)
GUI Order controll processing.  ENTER/EDIT
"KRN",8994,2378,1,2,0)
Technisions, Rate of Labor and Hours to 664.3 for the associated work 
"KRN",8994,2378,1,3,0)
order.
"KRN",8994,2378,1,4,0)
.
"KRN",8994,2378,605001)
34018
"KRN",8994,2379,-1)
0^12
"KRN",8994,2379,0)
RMPR OWL TECH/HOUR/RATE LIST^EN^RMPR29L2^4^P^0^^1
"KRN",8994,2379,1,0)
^^2^2^3060322^
"KRN",8994,2379,1,1,0)
GUI Order controll processing.  Returns Technision, Hours, Rate,664.2 
"KRN",8994,2379,1,2,0)
IEN,DUZ from file# 664.3. .
"KRN",8994,2379,3,0)
^^5^5^3060322^
"KRN",8994,2379,3,1,0)
The array format:
"KRN",8994,2379,3,2,0)
 
"KRN",8994,2379,3,3,0)
 
"KRN",8994,2379,3,4,0)
^TMP($J,"RMLH",DATE,CNT)=0(ZERO,GOOD 
"KRN",8994,2379,3,5,0)
RECORD)^DATE^TECHNICION^HOURS^RATE^664.2IEN^DUZ
"KRN",8994,2379,605001)
34018
"KRN",8994,2381,-1)
0^13
"KRN",8994,2381,0)
RMPR OWL VISTA PRINT^PRT^RMPR29RG^2^S^0^^0
"KRN",8994,2381,1,0)
^8994.01^2^2^3051212^^^^
"KRN",8994,2381,1,1,0)
Purchase Order Information to be printed from a PC Device Fax/Printer
"KRN",8994,2381,1,2,0)
 
"KRN",8994,2381,605001)
34018
"KRN",8994,2517,-1)
0^14
"KRN",8994,2517,0)
RMPR OWL LOCK FILE^OWLL^RMPRGULK^2^S^0^^0
"KRN",8994,2517,1,0)
^8994.01^1^1^3051012^^^
"KRN",8994,2517,1,1,0)
 
"KRN",8994,2517,2,0)
^8994.02A^1^1
"KRN",8994,2517,2,1,0)
IEN^1^50^1^1
"KRN",8994,2517,2,1,1,0)
^8994.021^1^1^3051012^^^
"KRN",8994,2517,2,1,1,1,0)
 
"KRN",8994,2517,2,"B","IEN",1)

"KRN",8994,2517,2,"PARAMSEQ",1,1)

"KRN",8994,2517,3,0)
^8994.03^1^1^3051012^^^
"KRN",8994,2517,3,1,0)
 
"KRN",8994,2517,605001)
34018
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",150,-1)
1^1
"PKG",150,0)
PROSTHETICS^RMPR^PROSTHETICS VERSION 3.0 ALPHA
"PKG",150,20,0)
^9.402P^^0
"PKG",150,22,0)
^9.49I^1^1
"PKG",150,22,1,0)
3.0^2960209^2960620
"PKG",150,22,1,"PAH",1,0)
75^3070409^34018
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
28
"RTN","RMPR121B")
0^25^B16065280^B17535480
"RTN","RMPR121B",1,0)
RMPR121B ;PHX/HNC -POST GUI PURCHASE ORDER TRANSACTION ;3/1/2003
"RTN","RMPR121B",2,0)
 ;;3.0;PROSTHETICS;**90,75**;FEB 09,1996;Build 25
"RTN","RMPR121B",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","RMPR121B",4,0)
A1(SIG,RMPRA,RMPRSITE) S RMPRGUI=1 G A2
"RTN","RMPR121B",5,0)
GUI(RESULT,SIG,RMPRA,RMPRSITE,RMPRPTR) ;
"RTN","RMPR121B",6,0)
A2 I (SIG="")!($E(SIG)="^") S RESULT=1_"^"_"Not Valid, Try Again..." Q
"RTN","RMPR121B",7,0)
 K RESULT D SIGN
"RTN","RMPR121B",8,0)
 Q
"RTN","RMPR121B",9,0)
 ;
"RTN","RMPR121B",10,0)
SIGN ; Validate /es/-code
"RTN","RMPR121B",11,0)
 ;
"RTN","RMPR121B",12,0)
 S X=SIG
"RTN","RMPR121B",13,0)
 S RMPRY=0
"RTN","RMPR121B",14,0)
 D HASH^XUSHSHP I X]"",(X=$P($G(^VA(200,+DUZ,20)),U,4)) S RMPRY=1
"RTN","RMPR121B",15,0)
 I RMPRY=0 S RESULT=1_"^"_"Checked signature Not Valid, Try Again..." Q
"RTN","RMPR121B",16,0)
 ;
"RTN","RMPR121B",17,0)
 S RMPRV=$P(^RMPR(664,RMPRA,0),U,4)
"RTN","RMPR121B",18,0)
 S RMPRPER=$P(^RMPR(664,RMPRA,2),U,6)/100
"RTN","RMPR121B",19,0)
 D GUIVAR
"RTN","RMPR121B",20,0)
 S PRCRMPR=1,X=1,PRCRMPR=1
"RTN","RMPR121B",21,0)
 D UP1^PRCH7PUC(.X,PRCA,PRCB,PRCC,PRCSITE,PRCVEN,PRCRMPR)
"RTN","RMPR121B",22,0)
 I X="^" G QUIT
"RTN","RMPR121B",23,0)
 S PRC442=$P(^RMPR(664,RMPRA,4),U,6)
"RTN","RMPR121B",24,0)
 I $P(^PRC(442,PRC442,7),U,1)'=6 G QUT
"RTN","RMPR121B",25,0)
 I $D(RMPRPSC) S $P(^RMPR(664,RMPRA,2),U,5)=RMPRPSC
"RTN","RMPR121B",26,0)
 S DA=RMPRA,DIK="^RMPR(664," D IX1^DIK
"RTN","RMPR121B",27,0)
 ;get AMIS grouper number
"RTN","RMPR121B",28,0)
 L +^RMPR(669.9,RMPRSITE,0):999 I $T=0 S RMPRG=DT_99 G GGC
"RTN","RMPR121B",29,0)
 S RMPRG=$P(^RMPR(669.9,RMPRSITE,0),U,7),RMPRG=RMPRG-1,$P(^(0),U,7)=RMPRG L -^RMPR(669.9,RMPRSITE,0)
"RTN","RMPR121B",30,0)
 ;
"RTN","RMPR121B",31,0)
GGC S B2=0
"RTN","RMPR121B",32,0)
 F  S B2=$O(^RMPR(664,RMPRA,1,B2)) Q:B2'>0  D R19^RMPR121C
"RTN","RMPR121B",33,0)
 K RMPRDP
"RTN","RMPR121B",34,0)
 ; Shipping Record
"RTN","RMPR121B",35,0)
 I +RMPRSH'>0 G NS
"RTN","RMPR121B",36,0)
 K DD,DO S X=DT,DIC="^RMPR(660,",DIC(0)="LZ" D FILE^DICN K DIC,D0 S (RMPR660,DA)=+Y
"RTN","RMPR121B",37,0)
 S RMPRTRN=$P(^RMPR(664,RMPRA,4),U,5)
"RTN","RMPR121B",38,0)
 S $P(^RMPR(660,RMPR660,4),U,3)=RMPRV
"RTN","RMPR121B",39,0)
 S ^RMPR(660,RMPR660,0)=DT_U_RMPRDFN_U_DT_"^X^^^^^"_U_RMPR("STA")_"^^^14"_U_RMPRS_"^^"_RMPRSH_"^"_RMPRSH_"^^^^^",^("AMS")=RMPRG,^("AM")=U_U_RMPRDIS_U_RMPRSC,$P(^(0),U,27)=DUZ
"RTN","RMPR121B",40,0)
 ; /SPS Removed the following 2 lines for 75 may re-use at a later time
"RTN","RMPR121B",41,0)
 ; I $D(RMPRWO),RMPRWO S $P(^("AM"),U,2)=1 D
"RTN","RMPR121B",42,0)
 ;.I $D(^RMPR(664.2,RMPRWO,0)) S $P(^(0),U,6)=$P(^(0),U,6)+RMPRSH
"RTN","RMPR121B",43,0)
 S:$D(RMPRDELN) ^RMPR(660,RMPR660,3)=RMPRDELN S ^(1)=RMPRTRN
"RTN","RMPR121B",44,0)
 S DIK="^RMPR(660," D IX1^DIK S $P(^RMPR(664,RMPRA,0),U,12)=RMPR660 K RMPRDP
"RTN","RMPR121B",45,0)
NS S $P(^RMPR(664,RMPRA,2),U,4)="2421PC"
"RTN","RMPR121B",46,0)
 S RESULT=0_"^"_"PO COMPLETE"
"RTN","RMPR121B",47,0)
 S ^TMP("SPS",0)=RMPRPTR
"RTN","RMPR121B",48,0)
 I RMPRPTR=0 D ^RMPR4P21
"RTN","RMPR121B",49,0)
 I +RMPRPTR>0 D EN1^RMPR4P21(RMPRPTR)
"RTN","RMPR121B",50,0)
 Q
"RTN","RMPR121B",51,0)
QUIT ; Quit where IFCAP encountered a problem
"RTN","RMPR121B",52,0)
 S RESULT=1_"^"_"**STAND BY**  Your IFCAP order may be canceled due to a lack of funds. If you can immediately get an increase of funds re-enter your e-sig and complete this PO.  IF YOU LEAVE THIS SCREEN YOUR PO WILL BE LOST"
"RTN","RMPR121B",53,0)
 Q
"RTN","RMPR121B",54,0)
QUT ;
"RTN","RMPR121B",55,0)
 S RESULT="1^IFCAP did not update your Purchase Order, Please Log out and start over."
"RTN","RMPR121B",56,0)
 Q
"RTN","RMPR121B",57,0)
GUIVAR ; Get variable setup from the GUI application
"RTN","RMPR121B",58,0)
 ; Setup Site Variables
"RTN","RMPR121B",59,0)
 D INF^RMPRSIT
"RTN","RMPR121B",60,0)
 ; Shipping info
"RTN","RMPR121B",61,0)
 S $P(^RMPR(664,RMPRA,0),U,14)=RMPR("STA")
"RTN","RMPR121B",62,0)
 S (R1,RMPRCT,RMPRQT,RMPRTO,RMPRI,RMPRR)=0
"RTN","RMPR121B",63,0)
 S RMPRSH=$S($P(^RMPR(664,RMPRA,0),U,10):$P(^(0),U,10),1:"")
"RTN","RMPR121B",64,0)
 F  S R1=$O(^RMPR(664,RMPRA,1,R1)) Q:R1'>0  D
"RTN","RMPR121B",65,0)
 .S RB=^RMPR(664,RMPRA,1,R1,0)
"RTN","RMPR121B",66,0)
 .S RMPRCT=$P(RB,U,3)
"RTN","RMPR121B",67,0)
 .S RMPRQT=$P(RB,U,4)
"RTN","RMPR121B",68,0)
 .S RMPRR=$P(RB,U,8) ;REMARKS
"RTN","RMPR121B",69,0)
 .S RMPRTO=RMPRTO+$J(RMPRCT*RMPRQT,0,2)
"RTN","RMPR121B",70,0)
 S RMPRTOTC=$P($G(^RMPR(664,RMPRA,4)),U,3)
"RTN","RMPR121B",71,0)
 S RMPRPCD=$P(^RMPR(664,RMPRA,4),U,1),$P(^RMPR(664,RMPRA,4),U,1)=$$ENC^RMPR4LI(RMPRPCD,DUZ,RMPRA)
"RTN","RMPR121B",72,0)
 S PRCA=RMPRA
"RTN","RMPR121B",73,0)
 S PRCB=$P(^RMPR(664,RMPRA,4),U,6)
"RTN","RMPR121B",74,0)
 S PRCC=RMPRTOTC
"RTN","RMPR121B",75,0)
 S PRCSITE=$P(^RMPR(664,RMPRA,0),U,14)
"RTN","RMPR121B",76,0)
 S PRCVEN=$P(^RMPR(664,RMPRA,0),U,4)
"RTN","RMPR121B",77,0)
 S RMPRDFN=$P(^RMPR(664,RMPRA,0),U,2)
"RTN","RMPR121B",78,0)
 S RMPRPPA=$P(^VA(200,DUZ,1),U,9)
"RTN","RMPR121B",79,0)
 ; Setup Delivery to Variables
"RTN","RMPR121B",80,0)
 S RMPRY(0)=$P($G(^RMPR(664,RMPRA,3)),U)
"RTN","RMPR121B",81,0)
TST S RMPRY=$S(RMPRY(0)="VETERAN":1,RMPRY(0)="PROSTHETICS":2,RMPRY(0)="OTHER LOCATION AT THIS SITE":3,RMPRY(0)="OTHER LOCATION NOT AT THIS SITE":4,1:"")
"RTN","RMPR121B",82,0)
 D DELIV^RMPR121A
"RTN","RMPR121B",83,0)
 Q
"RTN","RMPR121C")
0^17^B12618481^B10766286
"RTN","RMPR121C",1,0)
RMPR121C ;HINES-OI/HNC/SPS - IFCAP GUI TO 2319 ;3/1/2003
"RTN","RMPR121C",2,0)
 ;;3.0;PROSTHETICS;**90,75**;Feb 09, 1996;Build 25
"RTN","RMPR121C",3,0)
 ;
"RTN","RMPR121C",4,0)
R19 ;PASS RMPRA AS IEN OF 644, AND B2 AS ITEM MULTIPLE
"RTN","RMPR121C",5,0)
 ;S:$D(RMPRCONT) $P(^RMPR(664,RMPRA,1,B2,0),U,14)=RMPRCONT
"RTN","RMPR121C",6,0)
 S RMPRI=$P(^RMPR(664,RMPRA,1,B2,0),U,1),RMPRCT=$P(^(0),U,3)
"RTN","RMPR121C",7,0)
 S RMPRQT=$P(^RMPR(664,RMPRA,1,B2,0),U,4),RMPRDES=$P(^(0),U,2)
"RTN","RMPR121C",8,0)
 S RMPRPER=$P(^RMPR(664,RMPRA,2),U,6)/100
"RTN","RMPR121C",9,0)
 ;contract data
"RTN","RMPR121C",10,0)
 S RMPRCONT=""
"RTN","RMPR121C",11,0)
 S RMPRCONT=$P(^RMPR(664,RMPRA,1,B2,0),U,14)
"RTN","RMPR121C",12,0)
 ;TEMPORARY FIX FOR TRANSACTION TYPE AND PATIENT CATAGORY
"RTN","RMPR121C",13,0)
 S RMPRT=$P(^RMPR(664,RMPRA,1,B2,0),U,9),RMPRR=$P(^(0),U,8),RMPRDIS=$P(^(0),U,10),RMPRS=$P(^(0),U,12),UOI=$P(^(0),U,5),RMPRSLN=$P(^(0),U,15)
"RTN","RMPR121C",14,0)
 ;
"RTN","RMPR121C",15,0)
 I RMPRT="R" S $P(^RMPR(664,RMPRA,1,B2,0),U,9)="X",RMPRT="X"
"RTN","RMPR121C",16,0)
 I RMPRDIS=2 S $P(^RMPR(664,RMPRA,1,B2,0),U,10)=1,RMPRDIS=1
"RTN","RMPR121C",17,0)
 I RMPRDIS=3 S $P(^RMPR(664,RMPRA,1,B2,0),U,10)=4,RMPRDIS=4
"RTN","RMPR121C",18,0)
 S RMPRSC=$P(^RMPR(664,RMPRA,1,B2,0),U,11) ;Special catagory
"RTN","RMPR121C",19,0)
 S RMPRNOB=$P(^RMPR(664,RMPRA,1,B2,0),U,17) ;NUMBER OF BIDS
"RTN","RMPR121C",20,0)
 S RMPRHCPC=$P(^RMPR(664,RMPRA,1,B2,0),U,16) ;PSAS HCPCS
"RTN","RMPR121C",21,0)
 S RMPRMK=$P(^RMPR(664,RMPRA,1,B2,2),U,1),RMPRMD=$P(^(2),U,2),RMPRLTN=$P(^(2),U,3),RMPREW=$P(^(2),U,4) ;MAKE,MODEL,LOT,EXCLUDE/WAVER
"RTN","RMPR121C",22,0)
 S RMCPT=$P($G(^RMPR(664,RMPRA,1,B2,4)),U,2) ;CPT MODIFIER
"RTN","RMPR121C",23,0)
 K DD,DO S DIC="^RMPR(660,",DIC(0)="QL",X=DT,DLAYGO=660
"RTN","RMPR121C",24,0)
 D FILE^DICN K DLAYGO,DIC,D0 S (RMPR660,DA)=+Y
"RTN","RMPR121C",25,0)
 S $P(^RMPR(664,RMPRA,1,B2,0),U,13)=RMPR660
"RTN","RMPR121C",26,0)
 S DA=RMPRA,DIK="^RMPR(664," D IX1^DIK
"RTN","RMPR121C",27,0)
 S RMPRAMT=(RMPRQT*RMPRCT)
"RTN","RMPR121C",28,0)
 S RMPRDCT=RMPRAMT*RMPRPER
"RTN","RMPR121C",29,0)
 S RMPRTOTL=RMPRAMT-RMPRDCT
"RTN","RMPR121C",30,0)
 ;ctd is unit cost with percent discount applied.
"RTN","RMPR121C",31,0)
 S RMPRCTD=RMPRAMT-RMPRDCT/RMPRQT
"RTN","RMPR121C",32,0)
 ;
"RTN","RMPR121C",33,0)
 S ^RMPR(660,RMPR660,0)=DT_U_RMPRDFN_U_DT_U_RMPRT_U_U_U_RMPRQT_U_UOI_U_RMPRV_U_RMPR("STA")_U_U_U_"14"_U_RMPRS_U_U_$J(RMPRTOTL,0,2)_"^^^^^^"
"RTN","RMPR121C",34,0)
 ;SERIAL#,MAKE,MODEL,LOT#,EXCLUDE/WAVER
"RTN","RMPR121C",35,0)
 S $P(^RMPR(660,RMPR660,0),U,11)=RMPRSLN,$P(^(0),U,24)=RMPRLTN
"RTN","RMPR121C",36,0)
 S $P(^RMPR(660,RMPR660,9),U)=RMPRMK,$P(^(9),U,2)=RMPRMD
"RTN","RMPR121C",37,0)
 S $P(^RMPR(660,RMPR660,2),U,3)=RMPREW
"RTN","RMPR121C",38,0)
 ;CONTRACT #
"RTN","RMPR121C",39,0)
 S $P(^RMPR(660,RMPR660,2),U,9)=$P(^RMPR(664,RMPRA,1,B2,0),U,14)
"RTN","RMPR121C",40,0)
 ; ITEM
"RTN","RMPR121C",41,0)
 S $P(^RMPR(660,RMPR660,0),U,6)=RMPRI
"RTN","RMPR121C",42,0)
 ;NUMBER OF BIDS
"RTN","RMPR121C",43,0)
 S $P(^RMPR(660,RMPR660,2),U,10)=RMPRNOB
"RTN","RMPR121C",44,0)
 ;HCPCS code
"RTN","RMPR121C",45,0)
 S:RMPRHCPC $P(^RMPR(660,RMPR660,0),U,22)=$P(^RMPR(661.1,RMPRHCPC,0),U,4)
"RTN","RMPR121C",46,0)
 ;
"RTN","RMPR121C",47,0)
 S ^RMPR(660,RMPR660,"AMS")=RMPRG,^RMPR(660,RMPR660,"AM")=U_U_RMPRDIS_U_RMPRSC
"RTN","RMPR121C",48,0)
 ; /SPS removed below from above line for 75 may re-use later
"RTN","RMPR121C",49,0)
 ; I $D(RMPRWO),RMPRWO S $P(^("AM"),U,2)=1,$P(^RMPR(660,RMPR660,"LB"),U,5)=RMPRWO
"RTN","RMPR121C",50,0)
 S:$D(RMPRR) $P(^RMPR(660,RMPR660,0),U,18)=RMPRR
"RTN","RMPR121C",51,0)
 S RMPRTRN=$P(^RMPR(664,RMPRA,4),U,5)
"RTN","RMPR121C",52,0)
 S $P(^RMPR(660,RMPR660,0),U,27)=DUZ,^(1)=RMPRTRN_U_RMPRDES_"^^"_RMPRHCPC_"^^"_RMCPT
"RTN","RMPR121C",53,0)
 ;If work order and no count fields need to be set
"RTN","RMPR121C",54,0)
 I +$P(^RMPR(664,RMPRA,0),U,17)>0 D NCNT
"RTN","RMPR121C",55,0)
 ;note to supplier
"RTN","RMPR121C",56,0)
 ;
"RTN","RMPR121C",57,0)
 S RMPRNS=""
"RTN","RMPR121C",58,0)
 S (D1,RD)=0
"RTN","RMPR121C",59,0)
 F  S RD=$O(^RMPR(664,RMPRA,1,B2,1,RD)) Q:RD=""  D
"RTN","RMPR121C",60,0)
 .S ^RMPR(660,RMPR660,"DES",RD,0)=^RMPR(664,RMPRA,1,B2,1,RD,0)
"RTN","RMPR121C",61,0)
 .I $L(RMPRNS)>160 Q
"RTN","RMPR121C",62,0)
 .S RMPRNS=RMPRNS_" "_^RMPR(664,RMPRA,1,B2,1,RD,0)
"RTN","RMPR121C",63,0)
 .S D1=RD
"RTN","RMPR121C",64,0)
 S ^RMPR(660,RMPR660,"DES",0)="^660.028^"_D1_U_D1
"RTN","RMPR121C",65,0)
 S:$D(RMPRDELN) ^RMPR(660,RMPR660,3)=RMPRDELN
"RTN","RMPR121C",66,0)
 ;modified by #62
"RTN","RMPR121C",67,0)
 S ^TMP($J,"RMPRPCE",660,RMPR660)=RMPRG_"^"_$G(RMPRDFN)
"RTN","RMPR121C",68,0)
 ;set x-refs
"RTN","RMPR121C",69,0)
 S DIK="^RMPR(660,",DA=RMPR660 D IX1^DIK
"RTN","RMPR121C",70,0)
 K RMPRTRN
"RTN","RMPR121C",71,0)
 Q
"RTN","RMPR121C",72,0)
NCNT ; ADD NO ADMIN COUNT TO 660 FOR WORK ORDER
"RTN","RMPR121C",73,0)
 ;
"RTN","RMPR121C",74,0)
 S RMIE1=$P(^RMPR(664,RMPRA,0),U,17)
"RTN","RMPR121C",75,0)
 S RMRWO=$P(^RMPR(664.1,RMIE1,0),U,13)
"RTN","RMPR121C",76,0)
 S RMDAT(660,RMPR660_",",72.5)=RMRWO
"RTN","RMPR121C",77,0)
 S RMDAT(660,RMPR660_",",72)=RMIE1
"RTN","RMPR121C",78,0)
 S RMDAT(660,RMPR660_",",81)=1
"RTN","RMPR121C",79,0)
 S RMDAT(660,RMPR660_",",11)=14
"RTN","RMPR121C",80,0)
 S RMDAT(660,RMPR660_",",12)="C"
"RTN","RMPR121C",81,0)
 D FILE^DIE("","RMDAT","RMERROR")
"RTN","RMPR121C",82,0)
 I $D(RMERROR) S RESULT(0)=1_U_RMERROR G EXIT
"RTN","RMPR121C",83,0)
 Q
"RTN","RMPR121C",84,0)
EXIT ;
"RTN","RMPR121C",85,0)
 K RMIE1,RMRWO,RMPRA,RMPR660
"RTN","RMPR121C",86,0)
 Q
"RTN","RMPR29BG")
0^11^B9828158^n/a
"RTN","RMPR29BG",1,0)
RMPR29BG ;OI-HINES/SPS -OWL BASE HCPCS ENTER/EDIT/DELETE RPC;12/27/2004
"RTN","RMPR29BG",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29BG",3,0)
A1(RMAED,RMPRSITE,RMIE1,RMIE16,RMITM,RMQTY,RMUI,RMTT,RMPC,RMSN,RMHCPC,RMCPTM,RMVEN) ;roll and scroll entry point
"RTN","RMPR29BG",4,0)
 G A2
"RTN","RMPR29BG",5,0)
EN(RESULTS,RMAED,RMPRSITE,RMIE1,RMIE16,RMITM,RMQTY,RMUI,RMTT,RMPC,RMSN,RMHCPC,RMCPTM,RMVEN,RMBD,RMHTECH,RMPRTXT) ;RPC entry point
"RTN","RMPR29BG",6,0)
A2 ;
"RTN","RMPR29BG",7,0)
 N J,L,RESULTS,RMIE16C,RMIE16F
"RTN","RMPR29BG",8,0)
 S RESULTS(0)=""
"RTN","RMPR29BG",9,0)
 K ^TMP($J)
"RTN","RMPR29BG",10,0)
 ; If no Tech assigned then self assign here
"RTN","RMPR29BG",11,0)
 I +$P(^RMPR(664.1,RMIE1,0),U,16)'>0 S $P(^(0),U,16)=DUZ,$P(^(0),U,17)="A",$P(^(7),U,1)=DT,$P(^(7),U,3)=DUZ
"RTN","RMPR29BG",12,0)
 ;
"RTN","RMPR29BG",13,0)
 I RMAED="D" G DEL
"RTN","RMPR29BG",14,0)
 ;
"RTN","RMPR29BG",15,0)
 S RMERR=0
"RTN","RMPR29BG",16,0)
 S ^TMP("SPS",0)=RMAED_U_RMPRSITE_U_RMIE1_U_RMIE16_U_RMITM_U_RMQTY_U_RMUI_U_RMTT_U_RMPC_U_RMSN_U_RMHCPC_U_RMCPTM_U_RMVEN
"RTN","RMPR29BG",17,0)
 S RMIE16F=$O(^RMPR(664.1,RMIE1,2,0))
"RTN","RMPR29BG",18,0)
 I RMIE16F>0 S:RMIE16'=RMIE16F RMTT=$P(^RMPR(664.1,RMIE1,2,RMIE16F,0),U,7),RMPC=$P(^(0),U,8)
"RTN","RMPR29BG",19,0)
 I RMIE16=RMIE16F D:RMTT'=$P(^RMPR(664.1,RMIE1,2,RMIE16F,0),U,7)!(RMPC'=$P(^(0),U,8))
"RTN","RMPR29BG",20,0)
 . S RMIE16C="" F  S RMIE16C=$O(^RMPR(664.1,RMIE1,2,RMIE16C)) Q:RMIE16C=""  D
"RTN","RMPR29BG",21,0)
 .. Q:RMIE16C=RMIE16
"RTN","RMPR29BG",22,0)
 .. Q:'$D(^RMPR(664.1,RMIE1,2,RMIE16C,0))
"RTN","RMPR29BG",23,0)
 .. S $P(^RMPR(664.1,RMIE1,2,RMIE16C,0),U,7)=RMTT
"RTN","RMPR29BG",24,0)
 .. S $P(^RMPR(664.1,RMIE1,2,RMIE16C,0),U,8)=RMPC
"RTN","RMPR29BG",25,0)
 I RMIE16="" S RMIE16="+1,"_RMIE1
"RTN","RMPR29BG",26,0)
 E  S RMIE16E=RMIE16,RMIE16=RMIE16_","_RMIE1
"RTN","RMPR29BG",27,0)
 S RMDAT(664.16,RMIE16_",",.01)=RMITM
"RTN","RMPR29BG",28,0)
 S RMDAT(664.16,RMIE16_",",2)=RMQTY
"RTN","RMPR29BG",29,0)
 S RMDAT(664.16,RMIE16_",",3)=RMUI
"RTN","RMPR29BG",30,0)
 S RMDAT(664.16,RMIE16_",",6.5)=RMBD
"RTN","RMPR29BG",31,0)
 S RMDAT(664.16,RMIE16_",",8)=RMTT
"RTN","RMPR29BG",32,0)
 S RMDAT(664.16,RMIE16_",",9)=RMPC
"RTN","RMPR29BG",33,0)
 S RMDAT(664.16,RMIE16_",",12)=RMSN
"RTN","RMPR29BG",34,0)
 S RMDAT(664.16,RMIE16_",",13)=RMHCPC
"RTN","RMPR29BG",35,0)
 S RMDAT(664.16,RMIE16_",",13.1)=RMCPTM
"RTN","RMPR29BG",36,0)
 S RMDAT(664.16,RMIE16_",",13.2)=RMHTECH
"RTN","RMPR29BG",37,0)
 S RMDAT(664.16,RMIE16_",",15)=RMVEN
"RTN","RMPR29BG",38,0)
 D UPDATE^DIE("","RMDAT","RMIEN","RMERROR")
"RTN","RMPR29BG",39,0)
 L -^RMPR(664.1,RMIE1)
"RTN","RMPR29BG",40,0)
 I $D(RMERROR) S RMERR=1 G ERR
"RTN","RMPR29BG",41,0)
 S J=""
"RTN","RMPR29BG",42,0)
 F  S J=$O(RMPRTXT(J)) Q:J=""  D
"RTN","RMPR29BG",43,0)
 . S L=J+1,RMPRTXTF(L)=RMPRTXT(J)
"RTN","RMPR29BG",44,0)
 I '$D(RMIEN(1)) S RMIEN(1)=RMIE16E
"RTN","RMPR29BG",45,0)
 D WP^DIE(664.16,RMIEN(1)_","_RMIE1_",",7,,"RMPRTXTF","RMWPERR")
"RTN","RMPR29BG",46,0)
 I $D(RMWPERR) S ^TMP("SPS","WP")=RMWPERR("DIERR","1","TEXT","1")
"RTN","RMPR29BG",47,0)
 ;
"RTN","RMPR29BG",48,0)
 S RMPRDA=RMIE1 D INF^RMPRSIT,POST^RMPR29GA
"RTN","RMPR29BG",49,0)
QUIT K RMAED,RMBD,RMTECH,RMDAT,RMIE16E,RMIE2,RMPRDA,RMPRTXT,RMPRTXTF,RMERROR
"RTN","RMPR29BG",50,0)
 K RMERR,RMAED,RMPRSITE,RMIE1,RMIE16,RMIEN,RMITM,RMQTY,RMUI,RMTT,RMPC
"RTN","RMPR29BG",51,0)
 K RMSN,RMHCPC,RMCPTM,RMVEN,RMWPERR,RMHTK
"RTN","RMPR29BG",52,0)
 Q
"RTN","RMPR29BG",53,0)
ERR S RESUTLS(0)=1_RMERROR("DIERR",1,"TEXT",1)
"RTN","RMPR29BG",54,0)
 S ^TMP("SPS",1)=1_RMERROR("DIERR",1,"TEXT",1)
"RTN","RMPR29BG",55,0)
 G QUIT
"RTN","RMPR29BG",56,0)
 Q
"RTN","RMPR29BG",57,0)
DEL ;
"RTN","RMPR29BG",58,0)
 S DA=$P(^RMPR(664.1,RMIE1,2,RMIE16,0),U,5)
"RTN","RMPR29BG",59,0)
 S DIK="^RMPR(660," D ^DIK
"RTN","RMPR29BG",60,0)
 K DA,DIK
"RTN","RMPR29BG",61,0)
 S DA=$P(^RMPR(664.1,RMIE1,2,RMIE16,0),U,6)
"RTN","RMPR29BG",62,0)
 S DIK="^RMPR(664.2," D ^DIK
"RTN","RMPR29BG",63,0)
 K DA,DIK
"RTN","RMPR29BG",64,0)
 S DA(1)=RMIE1,DA=RMIE16,DIK="^RMPR(664.1,"_DA(1)_",2," D ^DIK
"RTN","RMPR29BG",65,0)
 K DA,DIK
"RTN","RMPR29BG",66,0)
 S RMPRDA=RMIE1 D INF^RMPRSIT,POST^RMPR29GA
"RTN","RMPR29BG",67,0)
 L -^RMPR(664.1,RMIE1)
"RTN","RMPR29BG",68,0)
 G QUIT
"RTN","RMPR29BG",69,0)
 Q
"RTN","RMPR29BG",70,0)
EN1(RESULTS,DA) ;Broker entry to kill WO
"RTN","RMPR29BG",71,0)
 ;DA is passed
"RTN","RMPR29BG",72,0)
 S DIK="^RMPR(664.1," D ^DIK
"RTN","RMPR29BG",73,0)
 K DIK
"RTN","RMPR29BG",74,0)
 Q
"RTN","RMPR29CA")
0^1^B67346263^n/a
"RTN","RMPR29CA",1,0)
RMPR29CA ;OI-HINES/HNC -WORK ORDER SUSPENSE RPC;12/27/2004
"RTN","RMPR29CA",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29CA",3,0)
A1(RMIE68,RMPRDUZ,RMSUSTAT,RMPR6641,RMPRTXT) ;roll and scroll entry point
"RTN","RMPR29CA",4,0)
 G A2
"RTN","RMPR29CA",5,0)
EN(RESULTS,RMIE68,RMPRDUZ,RMSUSTAT,RMPR6641,RMPRTXT) ;RPC entry point
"RTN","RMPR29CA",6,0)
A2 ;
"RTN","RMPR29CA",7,0)
 S RESULTS(0)=""
"RTN","RMPR29CA",8,0)
 K ^TMP($J)
"RTN","RMPR29CA",9,0)
 ;
"RTN","RMPR29CA",10,0)
CONT ;RMSUSTAT is status 1=complete or 0=initial note or 2=pending (incomplete)
"RTN","RMPR29CA",11,0)
 ;3=cancel or 4=cancel and clone 
"RTN","RMPR29CA",12,0)
 S RMIE=0
"RTN","RMPR29CA",13,0)
 F  S RMIE=$O(^RMPR(664.1,RMPR6641,2,RMIE)) Q:RMIE'>0  D
"RTN","RMPR29CA",14,0)
 .S RMIE60=$P(^RMPR(664.1,RMPR6641,2,RMIE,0),U,5)
"RTN","RMPR29CA",15,0)
 .S ^TMP($J,RMIE60)=""
"RTN","RMPR29CA",16,0)
 .D FD,UPD
"RTN","RMPR29CA",17,0)
 I RMSUSTAT=1 D CNOTE
"RTN","RMPR29CA",18,0)
 I RMSUSTAT=0 D INOTE,FD
"RTN","RMPR29CA",19,0)
 I RMSUSTAT=2 D ONOTE,FD
"RTN","RMPR29CA",20,0)
 I RMSUSTAT=3 D CANOTE^RMPR29CB
"RTN","RMPR29CA",21,0)
 I RMSUSTAT=4 D CANOTE^RMPR29CB
"RTN","RMPR29CA",22,0)
 ;set status
"RTN","RMPR29CA",23,0)
 Q
"RTN","RMPR29CA",24,0)
CNOTE ;(#12) COMPLETION NOTE
"RTN","RMPR29CA",25,0)
 ;set file 668
"RTN","RMPR29CA",26,0)
 ;^RMPR(668,D0,4,0)=^668.012^^
"RTN","RMPR29CA",27,0)
 ;if status is close, or 1
"RTN","RMPR29CA",28,0)
 ;RMPRTXT ;load into field #12
"RTN","RMPR29CA",29,0)
 ;^RMPR(668,D0,4,D1,0)
"RTN","RMPR29CA",30,0)
 ;
"RTN","RMPR29CA",31,0)
 ;Update file 664.1 on Close out
"RTN","RMPR29CA",32,0)
 I +$P(^RMPR(664.1,RMPR6641,0),U,16)'>0 S $P(^(0),U,16)=DUZ,$P(^(7),U,1)=DT,$P(^(7),U,3)=DUZ
"RTN","RMPR29CA",33,0)
 S DIE="^RMPR(664.1,",DA=RMPR6641
"RTN","RMPR29CA",34,0)
 S DR="16////^S X=""C"";22////^S X=DUZ;23///^S X=DT" D ^DIE
"RTN","RMPR29CA",35,0)
 K DR,DA,DIE
"RTN","RMPR29CA",36,0)
 S RMIE=0,DIE="^RMPR(664.2,"
"RTN","RMPR29CA",37,0)
 F  S RMIE=$O(^RMPR(664.1,RMPR6641,2,RMIE)) Q:RMIE'>0  D
"RTN","RMPR29CA",38,0)
 .S DA=$P(^RMPR(664.1,RMPR6641,2,RMIE,0),U,6)
"RTN","RMPR29CA",39,0)
 .S DR="8////^S X=DT;9////^S X=DUZ" D ^DIE
"RTN","RMPR29CA",40,0)
 .K DA,DR,DIE
"RTN","RMPR29CA",41,0)
 .S DIE="^RMPR(660,",DA=$P(^RMPR(664.1,RMPR6641,2,RMIE,0),U,5)
"RTN","RMPR29CA",42,0)
 .S DR="8.4////^S X=DT;10////^S X=DT;50////^S X=DT" D ^DIE
"RTN","RMPR29CA",43,0)
 K DA,DR,DIE
"RTN","RMPR29CA",44,0)
 S DA=RMIE68
"RTN","RMPR29CA",45,0)
 D NOW^%DTC S RMPREODT=%,GMRCAD=%
"RTN","RMPR29CA",46,0)
 S DIE="^RMPR(668,"
"RTN","RMPR29CA",47,0)
 	S DR="5////^S X=RMPREODT;6////^S X=DUZ;14///^S X=""C""" D ^DIE
"RTN","RMPR29CA",48,0)
 N RMPRC
"RTN","RMPR29CA",49,0)
 S L="",LN=0
"RTN","RMPR29CA",50,0)
 F  S L=$O(RMPRTXT(L)) Q:L=""  D
"RTN","RMPR29CA",51,0)
 . I 'LN D  Q:RMPRC=""  ;strip leading space from 1st line, ignore blank line
"RTN","RMPR29CA",52,0)
 .. S RMPRC=$E($TR(RMPRTXT(L)," ","")) ;1st non space char
"RTN","RMPR29CA",53,0)
 .. S:RMPRC'="" RMPRTXT(L)=$E(RMPRTXT(L),$F(RMPRTXT(L),RMPRC)-1,$L(RMPRTXT(L))) ;extract from 1st non space char to end of line
"RTN","RMPR29CA",54,0)
 .. Q
"RTN","RMPR29CA",55,0)
 . S LN=LN+1,^RMPR(668,RMIE68,4,LN,0)=RMPRTXT(L)
"RTN","RMPR29CA",56,0)
 . Q
"RTN","RMPR29CA",57,0)
 S $P(^RMPR(668,RMIE68,4,0),"^",3)=LN
"RTN","RMPR29CA",58,0)
 K L,LN
"RTN","RMPR29CA",59,0)
 ;S DA=RMIE68,DIK="^RMPR(668," D IX1^DIK
"RTN","RMPR29CA",60,0)
 I '$P(^RMPR(668,DA,0),U,9) D
"RTN","RMPR29CA",61,0)
 .S DIE="^RMPR(668,"
"RTN","RMPR29CA",62,0)
 .S DR="7///^S X=""See Completion Note for Initial Action Taken."""
"RTN","RMPR29CA",63,0)
 .D ^DIE
"RTN","RMPR29CA",64,0)
 .S DR="10////^S X=RMPREODT;16////^S X=DUZ" D ^DIE
"RTN","RMPR29CA",65,0)
 K RMPREODT
"RTN","RMPR29CA",66,0)
 S GMRCO=$P(^RMPR(668,RMIE68,0),U,15)
"RTN","RMPR29CA",67,0)
 I GMRCO="" S RESULTS(0)="0^Completed Manual Suspense Action.  Suspense status has been updated to CLOSED." Q
"RTN","RMPR29CA",68,0)
 S RMPRCOM=0
"RTN","RMPR29CA",69,0)
 F  S RMPRCOM=$O(^RMPR(668,RMIE68,4,RMPRCOM)) Q:RMPRCOM=""  D
"RTN","RMPR29CA",70,0)
 .S GMRCOM(RMPRCOM)=^RMPR(668,RMIE68,4,RMPRCOM,0)
"RTN","RMPR29CA",71,0)
 I $G(GMRCOM)="" S GMRCOM="Not Noted"
"RTN","RMPR29CA",72,0)
 S GMRCSF="U"
"RTN","RMPR29CA",73,0)
 S GMRCA=10
"RTN","RMPR29CA",74,0)
 S GMRCALF="N"
"RTN","RMPR29CA",75,0)
 S GMRCATO=""
"RTN","RMPR29CA",76,0)
 S (GMRCORNP,GMRCDUZ)=DUZ
"RTN","RMPR29CA",77,0)
 S BDC=$$SFILE^GMRCGUIB(.GMRCO,.GMRCA,.GMRCSF,.GMRCORNP,.GMRCDUZ,.GMRCOM,.GMRCALF,.GMRCATO,.GMRCAD)
"RTN","RMPR29CA",78,0)
 I +BDC=1 S RESULTS(0)=1_"^"_$P(BDC,U,2)
"RTN","RMPR29CA",79,0)
 K GMRCO,GMRCA,GMRCSF,GMRCORNP,GMRCDUZ,GMRCOM,GMRCALF,GMRCATO,GMRCAD
"RTN","RMPR29CA",80,0)
 I RESULTS(0)="" S RESULTS(0)="0^Completed Suspense Action, and Posted note to CPRS Consult.  Suspense status has been updated to CLOSED."
"RTN","RMPR29CA",81,0)
 Q
"RTN","RMPR29CA",82,0)
ONOTE ;Other note
"RTN","RMPR29CA",83,0)
 ;set file 668
"RTN","RMPR29CA",84,0)
 ;^RMPR(668,D0,4,0)=^668.012^^
"RTN","RMPR29CA",85,0)
 ;if status is pending, and already initial action note or 0
"RTN","RMPR29CA",86,0)
 ;^RMPR(668,D0,1,D1,0)= (#.01) ACTION DATE [1D] 
"RTN","RMPR29CA",87,0)
 ;RMPRTXT ;load into field #11, #1
"RTN","RMPR29CA",88,0)
 ;^RMPR(668,D0,1,D1,1,0)=^668.111^^  
"RTN","RMPR29CA",89,0)
 ;
"RTN","RMPR29CA",90,0)
 S RMPRDA1=RMIE68,DA(1)=RMIE68,DA=RMIE68
"RTN","RMPR29CA",91,0)
 D NOW^%DTC S X=%,GMRCWHN=%
"RTN","RMPR29CA",92,0)
 S DIC="^RMPR(668,"_RMIE68_",1,"
"RTN","RMPR29CA",93,0)
 S DIC(0)="CQL"
"RTN","RMPR29CA",94,0)
 S DIC("P")="668.011DA"
"RTN","RMPR29CA",95,0)
 S DLAYGO=668
"RTN","RMPR29CA",96,0)
 D ^DIC
"RTN","RMPR29CA",97,0)
 I Y=-1 S RESULTS(0)="1^Error Modifying Record!" Q
"RTN","RMPR29CA",98,0)
 ;S DIE=DIC K DIC
"RTN","RMPR29CA",99,0)
 S (DA,RMPRDA2)=+Y
"RTN","RMPR29CA",100,0)
 ;S DR="1" D ^DIE
"RTN","RMPR29CA",101,0)
 K DIE,DR,Y
"RTN","RMPR29CA",102,0)
 ;S ^RMPR(668,RMIE68,1,0)="^668.011DA^1^1"
"RTN","RMPR29CA",103,0)
 N RMPRC
"RTN","RMPR29CA",104,0)
 S L="",LN=0
"RTN","RMPR29CA",105,0)
 F  S L=$O(RMPRTXT(L)) Q:L=""  D
"RTN","RMPR29CA",106,0)
 . I 'LN D  Q:RMPRC=""  ;strip leading space from 1st line, ignore blank  line
"RTN","RMPR29CA",107,0)
 .. S RMPRC=$E($TR(RMPRTXT(L)," ","")) ;1st non space char
"RTN","RMPR29CA",108,0)
 .. S:RMPRC'="" RMPRTXT(L)=$E(RMPRTXT(L),$F(RMPRTXT(L),RMPRC)-1,$L(RMPRTXT(L))) ;extract from 1st non space char to end of line
"RTN","RMPR29CA",109,0)
 .. Q
"RTN","RMPR29CA",110,0)
 . S LN=LN+1,^RMPR(668,RMIE68,1,RMPRDA2,1,LN,0)=RMPRTXT(L)
"RTN","RMPR29CA",111,0)
 . Q
"RTN","RMPR29CA",112,0)
 S $P(^RMPR(668,RMIE68,1,RMPRDA2,1,0),"^",3)=LN
"RTN","RMPR29CA",113,0)
 K L,LN
"RTN","RMPR29CA",114,0)
 S GMRCO=$P(^RMPR(668,RMIE68,0),U,15)
"RTN","RMPR29CA",115,0)
 I GMRCO="" S RESULTS(0)="0^Completed Manual Suspense Action.  Suspense status has not changed." Q
"RTN","RMPR29CA",116,0)
 S RMPRCOM=0
"RTN","RMPR29CA",117,0)
 F  S RMPRCOM=$O(^RMPR(668,RMIE68,1,RMPRDA2,1,RMPRCOM)) Q:RMPRCOM=""  D
"RTN","RMPR29CA",118,0)
 .S GMRCOM(RMPRCOM)=^RMPR(668,RMIE68,1,RMPRDA2,1,RMPRCOM,0)
"RTN","RMPR29CA",119,0)
 D CMT^GMRCGUIB(.GMRCO,.GMRCOM,"",GMRCWHN,DUZ)
"RTN","RMPR29CA",120,0)
 K DA,RMPRDA1,RMPRDA2,RMPRCOM,GMRCOM,GMRCO,GMRCWHN
"RTN","RMPR29CA",121,0)
 S RESULTS(0)="0^Completed Suspense Action, and Posted note to CPRS Consult.  Suspense status has not changed."
"RTN","RMPR29CA",122,0)
 Q
"RTN","RMPR29CA",123,0)
INOTE ;initial action note
"RTN","RMPR29CA",124,0)
 ;set file 668
"RTN","RMPR29CA",125,0)
 ;^RMPR(668,D0,3,0)=^668.07^^
"RTN","RMPR29CA",126,0)
 ;if status is pending, or 0
"RTN","RMPR29CA",127,0)
 ;RMPRTXT ;load into field #7
"RTN","RMPR29CA",128,0)
 ;^RMPR(668,D0,3,0)=^668.07^^
"RTN","RMPR29CA",129,0)
 ;
"RTN","RMPR29CA",130,0)
 I $D(^RMPR(668,RMIE68,3,1,0)) S RESULTS(0)="1^Initial Action Note Already Posted!" Q
"RTN","RMPR29CA",131,0)
 D NOW^%DTC S RMPREODT=%
"RTN","RMPR29CA",132,0)
 N RMPRC
"RTN","RMPR29CA",133,0)
 S ^RMPR(668,RMIE68,3,0)="^^^"_DT_"^"
"RTN","RMPR29CA",134,0)
 S L="",LN=0
"RTN","RMPR29CA",135,0)
 F  S L=$O(RMPRTXT(L)) Q:L=""  D
"RTN","RMPR29CA",136,0)
 . I 'LN D  Q:RMPRC=""  ;strip leading space from 1st line, ignore blank  line
"RTN","RMPR29CA",137,0)
 .. S RMPRC=$E($TR(RMPRTXT(L)," ","")) ;1st non space char
"RTN","RMPR29CA",138,0)
 .. S:RMPRC'="" RMPRTXT(L)=$E(RMPRTXT(L),$F(RMPRTXT(L),RMPRC)-1,$L(RMPRTXT(L))) ;extract from 1st non space char to end of line
"RTN","RMPR29CA",139,0)
 .. Q
"RTN","RMPR29CA",140,0)
 . S LN=LN+1,^RMPR(668,RMIE68,3,LN,0)=RMPRTXT(L)
"RTN","RMPR29CA",141,0)
 . Q
"RTN","RMPR29CA",142,0)
 S $P(^RMPR(668,RMIE68,3,0),"^",3)=LN
"RTN","RMPR29CA",143,0)
 K L,LN
"RTN","RMPR29CA",144,0)
 S DIE="^RMPR(668,"
"RTN","RMPR29CA",145,0)
 S DA=RMIE68
"RTN","RMPR29CA",146,0)
 S DR="10////^S X=RMPREODT;16////^S X=DUZ;14///^S X=""P"""
"RTN","RMPR29CA",147,0)
 D ^DIE
"RTN","RMPR29CA",148,0)
 S GMRCO=$P(^RMPR(668,RMIE68,0),U,15)
"RTN","RMPR29CA",149,0)
 I GMRCO="" S RESULTS(0)="0^Completed Manual Suspense Action.  Suspense status has been updated to PENDING" Q
"RTN","RMPR29CA",150,0)
 S RMPRCMT=0
"RTN","RMPR29CA",151,0)
 F  S RMPRCMT=$O(^RMPR(668,RMIE68,3,RMPRCMT)) Q:RMPRCMT=""  D
"RTN","RMPR29CA",152,0)
 .S GMRCMT(RMPRCMT)=^RMPR(668,RMIE68,3,RMPRCMT,0)
"RTN","RMPR29CA",153,0)
 D CMT^GMRCGUIB(GMRCO,.GMRCMT,DUZ,RMPREODT,DUZ)
"RTN","RMPR29CA",154,0)
 K RMPREODT,GMRCO,RMGMRCO,GMRCMT,RMPRCMT
"RTN","RMPR29CA",155,0)
 S RESULTS(0)="0^Completed Suspense Action, and Posted note to CPRS Consult.  Suspense status has changed to PENDING."
"RTN","RMPR29CA",156,0)
 Q
"RTN","RMPR29CA",157,0)
 ;
"RTN","RMPR29CA",158,0)
FD ;file date
"RTN","RMPR29CA",159,0)
 N DIE,DIC,I,J,Y,RMDFN,RMI,RMDATE,RM680,RM6810,RMERROR,RM60L,RC
"RTN","RMPR29CA",160,0)
 N RMERR,RMCHK,DLAYGO,X,DR,RM668,RM60DAT,RMSTATUS
"RTN","RMPR29CA",161,0)
 N RM68CNT,RM60CNT,RMREQU,RMSI,RMSAMIS,RM68IEN,RM60IEN,RMSUS60,RMSUS68,RMD
"RTN","RMPR29CA",162,0)
 N RM68DATA,RM60TYP,RM68D,RM68TRAN,RMPRPRC,RM60IT,RMENTSUS,RMQUIT
"RTN","RMPR29CA",163,0)
 ;
"RTN","RMPR29CA",164,0)
 S RMERR=0
"RTN","RMPR29CA",165,0)
 S:RMSUSTAT="" RMSUSTAT=0
"RTN","RMPR29CA",166,0)
 L +^RMPR(660,RMIE60):2
"RTN","RMPR29CA",167,0)
 I $T=0 S RESULTS(0)="1^Someone else is Editing this entry!" G EXIT
"RTN","RMPR29CA",168,0)
 S RM680=$G(^RMPR(668,RMIE68,0))
"RTN","RMPR29CA",169,0)
 S RM688=$G(^RMPR(668,RMIE68,8))
"RTN","RMPR29CA",170,0)
 S RM6810=$G(^RMPR(668,RMIE68,10))
"RTN","RMPR29CA",171,0)
 S RMAMIS=$P($G(^RMPR(660,RMIE60,"AMS")),U,1)
"RTN","RMPR29CA",172,0)
 ;code here for 668 fields
"RTN","RMPR29CA",173,0)
 S RMDATE=$P(RM680,U,1)
"RTN","RMPR29CA",174,0)
 S RMCODT=$P(RM680,U,5)
"RTN","RMPR29CA",175,0)
 S RMINDT=$P(RM680,U,9)
"RTN","RMPR29CA",176,0)
 S RMPRCO=$P(RM680,U,15)
"RTN","RMPR29CA",177,0)
 S RMDWRT=$P(RM680,U,16)
"RTN","RMPR29CA",178,0)
 S RMSTAT=$P(RM680,U,7)
"RTN","RMPR29CA",179,0)
 S RMTRES=$P(RM680,U,8)
"RTN","RMPR29CA",180,0)
 S RMTYRE=$S(RMTRES=1:"ROUTINE",RMTRES=2:"EYEGLASS",RMTRES=3:"CONTACT LENS",RMTRES=4:"OXYGEN",RMTRES=5:"MANUAL",RMTRES=11:"LAB",1:"")
"RTN","RMPR29CA",181,0)
 S RMREQU=$P(RM680,U,11)
"RTN","RMPR29CA",182,0)
 S RMSERV=""
"RTN","RMPR29CA",183,0)
 I $G(RMREQU) D GETS^DIQ(200,RMREQU,"29","E","RMAA") S RMSERV=RMAA(200,RMREQU_",",29,"E")
"RTN","RMPR29CA",184,0)
 S RMPRDI=$E($P(RM688,U,2),1,16)
"RTN","RMPR29CA",185,0)
 S RMICD9=$P(RM688,U,3)
"RTN","RMPR29CA",186,0)
 ;
"RTN","RMPR29CA",187,0)
 S RMDAT(660,RMIE60_",",8.1)=RMDATE
"RTN","RMPR29CA",188,0)
 S RMDAT(660,RMIE60_",",8.2)=RMDWRT
"RTN","RMPR29CA",189,0)
 S RMDAT(660,RMIE60_",",8.3)=RMINDT
"RTN","RMPR29CA",190,0)
 S RMDAT(660,RMIE60_",",8.4)=RMCODT
"RTN","RMPR29CA",191,0)
 S RMDAT(660,RMIE60_",",8.5)=RMTYRE
"RTN","RMPR29CA",192,0)
 S RMDAT(660,RMIE60_",",8.6)=RMREQU
"RTN","RMPR29CA",193,0)
 S RMDAT(660,RMIE60_",",8.61)=RMSERV
"RTN","RMPR29CA",194,0)
 S RMDAT(660,RMIE60_",",8.7)=RMPRDI
"RTN","RMPR29CA",195,0)
 S RMDAT(660,RMIE60_",",8.8)=RMICD9
"RTN","RMPR29CA",196,0)
 S RMDAT(660,RMIE60_",",8.9)=RMPRCO
"RTN","RMPR29CA",197,0)
 S RMDAT(660,RMIE60_",",8.11)=RMSTAT
"RTN","RMPR29CA",198,0)
 I RMSUSTAT=2 S RMDAT(660,RMIE60_",",8.14)=0
"RTN","RMPR29CA",199,0)
 I RMSUSTAT'=2 S RMDAT(660,RMIE60_",",8.14)=RMSUSTAT
"RTN","RMPR29CA",200,0)
 D FILE^DIE("","RMDAT","RMERROR")
"RTN","RMPR29CA",201,0)
 L -^RMPR(660,RMIE60)
"RTN","RMPR29CA",202,0)
 I $D(RMERROR) S RMERR=1 D ERR
"RTN","RMPR29CA",203,0)
 ;
"RTN","RMPR29CA",204,0)
 Q
"RTN","RMPR29CA",205,0)
UPD ;update file 668 with 2319 records
"RTN","RMPR29CA",206,0)
 K DD,D0
"RTN","RMPR29CA",207,0)
 S DA(1)=RMIE68
"RTN","RMPR29CA",208,0)
 S DIC="^RMPR(668,"_DA(1)_","_"10,"
"RTN","RMPR29CA",209,0)
 S DIC(0)="L",DLAYGO=668,X=RMIE60
"RTN","RMPR29CA",210,0)
 D FILE^DICN
"RTN","RMPR29CA",211,0)
 S DA(1)=RMIE68
"RTN","RMPR29CA",212,0)
 S DIC="^RMPR(668,"_DA(1)_","_"11,"
"RTN","RMPR29CA",213,0)
 S X=RMAMIS
"RTN","RMPR29CA",214,0)
 D FILE^DICN
"RTN","RMPR29CA",215,0)
 K DIC,X,DLAYGO,D0
"RTN","RMPR29CA",216,0)
 Q
"RTN","RMPR29CA",217,0)
A3 G A4
"RTN","RMPR29CA",218,0)
EN1(RESULTS,DA) ;Broker entry to kill WO
"RTN","RMPR29CA",219,0)
 ;DA is passed
"RTN","RMPR29CA",220,0)
 S DIK="^RMPR(664.1," D ^DIK
"RTN","RMPR29CA",221,0)
 K DIK
"RTN","RMPR29CA",222,0)
A4 ;
"RTN","RMPR29CA",223,0)
 Q
"RTN","RMPR29CA",224,0)
ERR ;exit on error
"RTN","RMPR29CA",225,0)
EXIT ;
"RTN","RMPR29CA",226,0)
 K RMTYRE,RMTRES,RMSUSTAT,RMSTAT,RMSERV,RMEQU,RMPRTST,RMPRDUZ,RMPRDI,RMPRCO,RMPR6641,RMIE68
"RTN","RMPR29CA",227,0)
 K RMIE60,RMIE,RMICD9,RMDWRT,RMDAT,RMCODT,RMAMIS,RMAA,RM688,RMPRTXT
"RTN","RMPR29CA",228,0)
 K BDC,BAD,%,RMINDT,RMPREQU
"RTN","RMPR29CB")
0^24^B11728992^n/a
"RTN","RMPR29CB",1,0)
RMPR29CB ;OI-HINES/HNC/SPS -WORK ORDER SUSPENSE RPC CONT.;06/06/2006
"RTN","RMPR29CB",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29CB",3,0)
CANOTE ;(#12) CANCELLATION NOTE
"RTN","RMPR29CB",4,0)
 ;set file 668
"RTN","RMPR29CB",5,0)
 ;^RMPR(668,D0,4,0)=^668.012^^
"RTN","RMPR29CB",6,0)
 ;if status is cancelled, RMSUSTAT= 3 or 4
"RTN","RMPR29CB",7,0)
 ;RMPRTXT ;load into field #12
"RTN","RMPR29CB",8,0)
 ;^RMPR(668,D0,4,D1,0)
"RTN","RMPR29CB",9,0)
 ;
"RTN","RMPR29CB",10,0)
 S RMWONE=$P(^RMPR(664.1,RMPR6641,0),U,13)
"RTN","RMPR29CB",11,0)
 I RMSUSTAT=4 D EN2^RMPROWL(RMIE68,RMWONE)
"RTN","RMPR29CB",12,0)
 I $P(^RMPR(668,RMIE68,0),U,10)="C" S RESULTS(0)="0^This Suspense has already been Closed!"
"RTN","RMPR29CB",13,0)
 ;Update file 664.1 664.2 Delete 660 on Cancel out
"RTN","RMPR29CB",14,0)
 S DIE="^RMPR(664.1,",DA=RMPR6641
"RTN","RMPR29CB",15,0)
 S DR="16////^S X=""CA"";7////^S X=DUZ;8///^S X=DT" D ^DIE
"RTN","RMPR29CB",16,0)
 K DR,DA,DIE
"RTN","RMPR29CB",17,0)
 S RMIE=0,DIK="^RMPR(660,"
"RTN","RMPR29CB",18,0)
 F  S RMIE=$O(^RMPR(664.1,RMPR6641,2,RMIE)) Q:RMIE'>0  D
"RTN","RMPR29CB",19,0)
 .S DA=$P(^RMPR(664.1,RMPR6641,2,RMIE,0),U,5) D ^DIK
"RTN","RMPR29CB",20,0)
 .S $P(^RMPR(664.1,RMPR6641,2,RMIE,0),U,5)=""
"RTN","RMPR29CB",21,0)
 .S RMPRIE2=$P($G(^RMPR(664.1,RMPR6641,2,RMIE,0)),U,6)
"RTN","RMPR29CB",22,0)
 .I +RMPRIE2>0 S $P(^RMPR(664.2,RMPRIE2,0),U,2)=""
"RTN","RMPR29CB",23,0)
 .K ^RMPR(664.2,"C",DA)
"RTN","RMPR29CB",24,0)
 K DIK
"RTN","RMPR29CB",25,0)
 S DA=RMIE68
"RTN","RMPR29CB",26,0)
 D NOW^%DTC S RMPREODT=%,GMRCAD=%
"RTN","RMPR29CB",27,0)
 S DIE="^RMPR(668,"
"RTN","RMPR29CB",28,0)
 S DR="18////^S X=RMPREODT;17////^S X=DUZ;14///^S X=""X""" D ^DIE
"RTN","RMPR29CB",29,0)
 N RMPRC
"RTN","RMPR29CB",30,0)
 S L="",LN=0
"RTN","RMPR29CB",31,0)
 F  S L=$O(RMPRTXT(L)) Q:L=""  D
"RTN","RMPR29CB",32,0)
 . I 'LN D  Q:RMPRC=""  ;strip leading space from 1st line, ignore blank line
"RTN","RMPR29CB",33,0)
 .. S RMPRC=$E($TR(RMPRTXT(L)," ","")) ;1st non space char
"RTN","RMPR29CB",34,0)
 .. S:RMPRC'="" RMPRTXT(L)=$E(RMPRTXT(L),$F(RMPRTXT(L),RMPRC)-1,$L(RMPRTXT(L))) ;extract from 1st non space char to end of line
"RTN","RMPR29CB",35,0)
 .. Q
"RTN","RMPR29CB",36,0)
 . S LN=LN+1,^RMPR(668,RMIE68,4,LN,0)=RMPRTXT(L)
"RTN","RMPR29CB",37,0)
 . Q
"RTN","RMPR29CB",38,0)
 S $P(^RMPR(668,RMIE68,4,0),"^",3)=LN
"RTN","RMPR29CB",39,0)
 K L,LN
"RTN","RMPR29CB",40,0)
 ;S DA=RMIE68,DIK="^RMPR(668," D IX1^DIK
"RTN","RMPR29CB",41,0)
 I '$P(^RMPR(668,DA,0),U,9) D
"RTN","RMPR29CB",42,0)
 .S DIE="^RMPR(668,"
"RTN","RMPR29CB",43,0)
 .S DR="7///^S X=""See Completion Note for Initial Action Taken."""
"RTN","RMPR29CB",44,0)
 .D ^DIE
"RTN","RMPR29CB",45,0)
 .S DR="10////^S X=RMPREODT;16////^S X=DUZ" D ^DIE
"RTN","RMPR29CB",46,0)
 K RMPREODT
"RTN","RMPR29CB",47,0)
 S GMRCO=$P(^RMPR(668,RMIE68,0),U,15)
"RTN","RMPR29CB",48,0)
 I GMRCO="" S RESULTS(0)="0^Completed Manual Suspense Action.  Suspense status has been updated to CANCELLED." Q
"RTN","RMPR29CB",49,0)
 S RMPRCOM=0
"RTN","RMPR29CB",50,0)
 F  S RMPRCOM=$O(^RMPR(668,RMIE68,4,RMPRCOM)) Q:RMPRCOM=""  D
"RTN","RMPR29CB",51,0)
 .S GMRCOM(RMPRCOM)=^RMPR(668,RMIE68,4,RMPRCOM,0)
"RTN","RMPR29CB",52,0)
 I $G(GMRCOM)="" S GMRCOM="Not Noted"
"RTN","RMPR29CB",53,0)
 S GMRCSF="U"
"RTN","RMPR29CB",54,0)
 S GMRCA=19
"RTN","RMPR29CB",55,0)
 S GMRCALF="N"
"RTN","RMPR29CB",56,0)
 S GMRCATO=""
"RTN","RMPR29CB",57,0)
 S (GMRCORNP,GMRCDUZ)=DUZ
"RTN","RMPR29CB",58,0)
 S BDC=$$SFILE^GMRCGUIB(.GMRCO,.GMRCA,.GMRCSF,.GMRCORNP,.GMRCDUZ,.GMRCOM,.GMRCALF,.GMRCATO,.GMRCAD)
"RTN","RMPR29CB",59,0)
 I +BDC=1 S RESULTS(0)=1_"^"_$P(BDC,U,2)
"RTN","RMPR29CB",60,0)
 K GMRCO,GMRCA,GMRCSF,GMRCORNP,GMRCDUZ,GMRCOM,GMRCALF,GMRCATO,GMRCAD
"RTN","RMPR29CB",61,0)
 I RESULTS(0)="" S RESULTS(0)="0^Completed Suspense Action, and Posted note to CPRS Consult.  Suspense status has been updated to CANCELLED."
"RTN","RMPR29CB",62,0)
 Q
"RTN","RMPR29CB",63,0)
EXIT K RMTYRE,RMTRES,RMSUSTAT,RMSTAT,RMSERV,RMEQU,RMPRTST,RMPRDUZ,RMPRDI,RMPRCO,RMPR6641,RMIE68
"RTN","RMPR29CB",64,0)
 K RMIE60,RMIE,RMICD9,RMDWRT,RMDAT,RMCODT,RMAMIS,RMAA,RM688,RMPRTXT
"RTN","RMPR29CB",65,0)
 K BDC,BAD,%,RMINDT,RMPREQU,RMPRCOM,RMWONE,RMPRIE2
"RTN","RMPR29GA")
0^2^B27172398^n/a
"RTN","RMPR29GA",1,0)
RMPR29GA ;PHX/JLT,RVD,SPS-RMPR29 CONTINUED [ 09/29/94  11:22 AM ]
"RTN","RMPR29GA",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29GA",3,0)
 ; Developed form RMPR29A for the GUI application
"RTN","RMPR29GA",4,0)
POST ;POST 2529-3 TO APPLIANCE/REPAIR FILE #660
"RTN","RMPR29GA",5,0)
 I '$D(RMPRDA)!('$D(^RMPR(664.1,RMPRDA,2,0))) Q
"RTN","RMPR29GA",6,0)
 S NOAC=$P(^RMPR(664.1,RMPRDA,0),U,23),NOLC=$P(^(0),U,20),RMPR("REF")=$P(^(0),U,4),RMPRG=$P(^(0),U,14)
"RTN","RMPR29GA",7,0)
 I NOLC=1 S RMHRWO=$P(^RMPR(664.1,RMPRDA,0),U,13)
"RTN","RMPR29GA",8,0)
 I RMPRG G GGC
"RTN","RMPR29GA",9,0)
 L +^RMPR(669.9,RMPRSITE,0):999 I $T=0 S RMPRG=DT_99 G GGC
"RTN","RMPR29GA",10,0)
 S RMPRG=$P(^RMPR(669.9,RMPRSITE,0),U,7),RMPRG=RMPRG-1,$P(^RMPR(669.9,RMPRSITE,0),U,7)=RMPRG L -^RMPR(669.9,RMPRSITE,0)
"RTN","RMPR29GA",11,0)
GGC I 'NOAC W !!,?5,"Updating Patient's 10-2319"
"RTN","RMPR29GA",12,0)
 S RMPRDT=$P(^RMPR(664.1,RMPRDA,0),U,1),RMPRDFN=$P(^(0),U,2),SRC=$P(^(0),U,11),TO=$P(^(0),U,15) K RNEW
"RTN","RMPR29GA",13,0)
 F RA=0:0 S RA=$O(^RMPR(664.1,RMPRDA,2,RA)) Q:RA'>0  I $D(^(RA,0)) S IT=$P(^(0),U,1),QTY=$P(^(0),U,2),UN=$P(^(0),U,3),RDA=$P(^(0),U,5),TYP=$P(^(0),U,7),ELS=$P(^(0),U,8),SCAT=$P(^(0),U,9),SER=$P(^(0),U,12) D
"RTN","RMPR29GA",14,0)
 .S HCPCS=$P($G(^RMPR(664.1,RMPRDA,2,RA,2)),U,1),RMCPT=$P($G(^(2)),U,2),RMHTECH=$P($G(^(2)),U,3)
"RTN","RMPR29GA",15,0)
 .;Changed .01 and 1 fields to create date DT below 5/25/06 for 75 SPS
"RTN","RMPR29GA",16,0)
 .I 'RDA S DIC="^RMPR(660,",DLAYGO=660,DIC(0)="LZ",X=DT D FILE^DICN K DLAYGO Q:+Y'>0  S RDA=+Y,RNEW=$P(Y,U,3) S $P(^RMPR(660,RDA,0),U,1)=DT,$P(^(0),U,2)=RMPRDFN,$P(^(0),U,3)=DT
"RTN","RMPR29GA",17,0)
DR .K DR
"RTN","RMPR29GA",18,0)
 .S DR="2///^S X=TYP;4.5////^S X=$G(HCPCS);5///^S X=QTY;9///^S X=SER;78///^S X=UN;8////^S X=RMPR(""STA"");11///^S X=4;62///^S X=ELS;63///^S X=SCAT;68///^S X=RMPRG;4.1////^S X=$P(^RMPR(661.1,HCPCS,0),U,4);4.7////^S X=RMCPT;4.92////^S X=RMHTECH"
"RTN","RMPR29GA",19,0)
 .S DIE="^RMPR(660,",DA=RDA D ^DIE S RIT=$P(^RMPR(660,RDA,0),U,6) K ^RMPR(660,"AD",+RIT,RDA)
"RTN","RMPR29GA",20,0)
 .S $P(^RMPR(660,RDA,0),U,6)=IT
"RTN","RMPR29GA",21,0)
 .I $P(^RMPR(660,RDA,0),U,27)="" S $P(^(0),U,27)=DUZ
"RTN","RMPR29GA",22,0)
 .S $P(^RMPR(660,RDA,"LB"),U,1)=RMPR("REF"),$P(^("LB"),U,3)=SRC,$P(^("LB"),U,4)=TO,$P(^("LB"),U,14)=NOLC,$P(^RMPR(660,RDA,"AM"),U,2)=NOAC
"RTN","RMPR29GA",23,0)
 .I NOLC=1 S $P(^RMPR(660,RDA,"LB"),U,2)=RMHRWO
"RTN","RMPR29GA",24,0)
 .I $D(^RMPR(664.1,RMPRDA,2,RA,1)),$O(^RMPR(664.1,RMPRDA,2,RA,1,0)) D
"RTN","RMPR29GA",25,0)
 ..K ^RMPR(660,RDA,"DES") F RW=0:0 S RW=$O(^RMPR(664.1,RMPRDA,2,RA,1,RW)) Q:RW'>0  S RN=RW S ^RMPR(660,RDA,"DES",RW,0)=^RMPR(664.1,RMPRDA,2,RA,1,RW,0)
"RTN","RMPR29GA",26,0)
 .I $D(RN) S ^RMPR(660,RDA,"DES",0)="^660.028^"_RN_U_RN_U_DT_"^^"
"RTN","RMPR29GA",27,0)
 .S DIK="^RMPR(660,",DA=RDA D:'$D(RNEW) IX^DIK D:$D(RNEW) IX1^DIK K RNEW
"RTN","RMPR29GA",28,0)
 .S $P(^RMPR(664.1,RMPRDA,2,RA,0),U,5)=RDA S $P(^RMPR(660,DA,"LB"),U,10)=RMPRDA,$P(^RMPR(660,DA,0),U,14)="V" S $P(^RMPR(664.1,RMPRDA,0),U,14)=RMPRG
"RTN","RMPR29GA",29,0)
 S DA=RMPRDA,DIK="^RMPR(664.1," D IX^DIK I $P(^RMPR(664.1,RMPRDA,0),U,15)=RMPR("STA") D EN4^RMPR29U(RMPRDA)
"RTN","RMPR29GA",30,0)
 Q
"RTN","RMPR29GA",31,0)
END L:+$G(RMPRDA) -^RMPR(664.1,+RMPRDA,0) K ^UTILITY("DIQ1",$J)
"RTN","RMPR29GA",32,0)
 W !! S DIR(0)="Y",DIR("B")="YES",DIR("A")="Would you like to Process another 2529-3" D ^DIR G:+Y=1 PRC^RMPR29S
"RTN","RMPR29GA",33,0)
 N RMPR,RMPRSITE D KILL^XUSCLEAN Q
"RTN","RMPR29GA",34,0)
ITM ;EDIT 2529-3 ITEM
"RTN","RMPR29GA",35,0)
 W ! K DIC,Y,RDA S DA=RMPRDA,DIC="^RMPR(664.1,"_RMPRDA_",2,",DIC("P")="664.16PA",DA(1)=RMPRDA,DIC(0)="AEQML",DIC("W")="S RA=$P(^(0),U,1) W ?16,$$ITM^RMPR31U(RA)" D ^DIC G:+Y'>0 PT
"RTN","RMPR29GA",36,0)
 S (IEN,DA)=+Y,RNEW=$P(Y,U,3) S RY=$P(Y,U,2) D ITA^RMPR29U(RY)
"RTN","RMPR29GA",37,0)
 S RDA(+Y)=^RMPR(664.1,RMPRDA,2,+Y,0) K RMPRPU I $P(RDA(IEN),U,5),$D(^RMPR(664.2,"AF",$P(RDA(IEN),U,5))) W $C(7),!!,?5,"A 2421 HAS BEEN INITIATED FOR THIS ITEM" S RMPRPU=1
"RTN","RMPR29GA",38,0)
 I $P(RDA(IEN),U,5),$D(^RMPR(664.2,"AR4",$P(RDA(IEN),U,5))) W $C(7),!!,?5,"A 2529-3 HAS BEEN INITIATED FOR THIS ITEM" S RMPRPU=1
"RTN","RMPR29GA",39,0)
 S DIE=DIC,DR=$S($D(RMPRPU):"",1:".01R")
"RTN","RMPR29GA",40,0)
 S DR=DR_";8R;S RMTYPE=$P(^RMPR(664.1,RMPRDA,2,DA,0),U,7);9R;13;2R;3R;7;12"
"RTN","RMPR29GA",41,0)
 D ^DIE I $D(DA),'$D(Y(0)) S RY=$P(^RMPR(664.1,DA(1),2,DA,0),U) D ITA^RMPR29U(RY)
"RTN","RMPR29GA",42,0)
 I $D(DA),^RMPR(664.1,DA(1),2,DA,0)'=RDA(DA) S REDIT=1,RDATA=RMTYPE_"^"_RMPRDA_"^"_DA D CHKCPT^RMPR29U(RDATA) K RDATA,RMTYPE,RMCPT
"RTN","RMPR29GA",43,0)
 I $D(DA) I $P(^RMPR(664.1,DA(1),2,DA,0),U)=""!($P(^(0),U,2)="")!($P(^(0),U,3)="")!($P(^(0),U,7)="")!($P(^(0),U,8)="") S DIK=DIE D ^DIK D
"RTN","RMPR29GA",44,0)
 .K DA W !!,?5,$C(7),"ITEM INFORMATION IS MISSING",!!,?5,"Deleted..."
"RTN","RMPR29GA",45,0)
 I '$D(DA) S DA=$P(RDA(IEN),U,5),DIK="^RMPR(660," I +DA D ^DIK S DA=$O(^RMPR(664.2,"C",+$P(RDA(IEN),U,5),0)) I +DA S DIK="^RMPR(664.2," D ^DIK D
"RTN","RMPR29GA",46,0)
 .F DA=0:0 S DA=$O(^RMPR(664.3,"C",$P(RDA(IEN),U,5),DA)) Q:DA'>0  S DIK="^RMPR(664.3," D ^DIK
"RTN","RMPR29GA",47,0)
 K FLGG,DR,Y I $P($G(^RMPR(664.1,RMPRDA,2,0)),U,3)=""!($P($G(^(0)),U,4)="") D
"RTN","RMPR29GA",48,0)
 .W !!,$C(7),?5,"2529-3 HAS BEEN RETURNED CANCELLED" S DIE="^RMPR(664.1,",DA=RMPRDA,DR="19///@;.09///@;15///@;16///^S X=""CA""" D ^DIE S $P(^RMPR(664.1,DA,0),U,20)="",FLGG=1
"RTN","RMPR29GA",49,0)
 K DR S RDC=$G(^RMPR(664.1,RMPRDA,2,IEN,0)) I (+RDC'=+RDA(IEN)),'RNEW D  I $D(FLGG) G END
"RTN","RMPR29GA",50,0)
 .D NOW^%DTC S (NX,X)=% K %
"RTN","RMPR29GA",51,0)
 .S DIC("P")="664.129DA",DA(1)=RMPRDA
"RTN","RMPR29GA",52,0)
 .S DIC="^RMPR(664.1,"_RMPRDA_",8,",DIC(0)="LZ"
"RTN","RMPR29GA",53,0)
 .S DLAYGO=664.1 D FILE^DICN K DLAYGO
"RTN","RMPR29GA",54,0)
 .I +Y S DIE="^RMPR(664.1,"_RMPRDA_",8,",DA(1)=RMPRDA,DA=+Y,DR=".01///^S X=NX;1///^S X=$$ITM^RMPR31U(+RDA(IEN));2///^S X=$$ITM^RMPR31U(+RDC);3////^S X=DUZ;W $C(7),!!,?5,""ITEM/JOB HAS BEEN CHANGED OR DELETED"";4~AUDIT REMARKS" D ^DIE
"RTN","RMPR29GA",55,0)
 G ITM
"RTN","RMPR29GA",56,0)
PT D:$D(REDIT) POST K DA,DR,REDIT G DISP^RMPR29D
"RTN","RMPR29GA",57,0)
 Q
"RTN","RMPR29GA",58,0)
 K DIE,DIK,DIR,ELS,HCPCS,IEN,IT,NOAC,NOLC,NX,QTY,RA,RDC,RIT,RMHRWO
"RTN","RMPR29GA",59,0)
 K RMHTECH,RMPRDA,RMPRDFN,RMPRDT,RMPRG,RN,RW,RY,SCAT,SER,SRC,TO,TYP,UN,X
"RTN","RMPR29GU")
0^3^B8685771^n/a
"RTN","RMPR29GU",1,0)
RMPR29GU ;HOIFO/SPS-CREATE 2529-3 GUI [ 10/17/05  8:55 AM ]
"RTN","RMPR29GU",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29GU",3,0)
 ;
"RTN","RMPR29GU",4,0)
A1(RMPRDA,RMPRSITE,RMPR668,RMPRPTR) ;
"RTN","RMPR29GU",5,0)
 D IN
"RTN","RMPR29GU",6,0)
 Q
"RTN","RMPR29GU",7,0)
CR(RESULTS,RMPRDA,RMPRSITE,RMPR668,RMPRPTR) ;CREATE WORK ORDER
"RTN","RMPR29GU",8,0)
IN D INF^RMPRSIT
"RTN","RMPR29GU",9,0)
 S SCR=$P(^RMPR(664.1,RMPRDA,0),U,11)
"RTN","RMPR29GU",10,0)
 K RMPRTMP I $P(^RMPR(664.1,RMPRDA,0),U,15)'=RMPR("STA") S RMPRTMP=1
"RTN","RMPR29GU",11,0)
 N DIC,Y,DIR S RMPRWO=1 D FQ^RMPRDT Q:'$D(RMPRFY)!('$D(RMPRQTR))  S:'$D(RMPRTMP) RMPRWO=$$STAN^RMPR31U(RMPR("STA"))_"-"_RMPRFY_"-"_RMPRQTR I $D(RMPRTMP) D
"RTN","RMPR29GU",12,0)
 .S RMPRWO=$$STAN^RMPR31U($P(^RMPR(664.1,RMPRDA,0),U,15))_"T-"_RMPRFY_"-"_RMPRQTR
"RTN","RMPR29GU",13,0)
 I '$D(^RMPR(669.1,"B",RMPRWO)) K DD,D0 S DIC="^RMPR(669.1,",DLAYGO=669.1,DIC(0)="LZ",X=RMPRWO D FILE^DICN K DLAYGO,D0
"RTN","RMPR29GU",14,0)
 S RDA=$O(^RMPR(669.1,"B",RMPRWO,0)) Q:'RDA
"RTN","RMPR29GU",15,0)
 L +^RMPR(669.1,RDA,0):1 I '$T S RESULTS(0)="1^Someone is editing this record!" G EXIT
"RTN","RMPR29GU",16,0)
 S RN=$P(^RMPR(669.1,RDA,0),U,2)+1 F I=1:1:4-$L(RN) S RN="0"_RN
"RTN","RMPR29GU",17,0)
 S RMPRWO=RMPRWO_"-"_SCR_"-"_RN
"RTN","RMPR29GU",18,0)
 S $P(^RMPR(669.1,RDA,0),U,2)=RN L -^RMPR(669.1,RDA,0)
"RTN","RMPR29GU",19,0)
 S $P(^RMPR(664.1,RMPRDA,0),U,13)=$G(RMPRWO)
"RTN","RMPR29GU",20,0)
 ;set no admin count/no lab count
"RTN","RMPR29GU",21,0)
 I $P(^RMPR(664.1,RMPRDA,0),U,15)=RMPR("STA")&($P(^(0),U,4)'=RMPR("STA")) S $P(^(0),U,23)=1
"RTN","RMPR29GU",22,0)
 I $P(^RMPR(664.1,RMPRDA,0),U,15)'=RMPR("STA") S $P(^(0),U,20)=1 S:$D(RMPR25) $P(^RMPR(664.1,RMPRDA,0),U,23)=1 S DIE="^RMPR(664.1,",DA=RMPRDA,DR="16///^S X=""PC""" D ^DIE
"RTN","RMPR29GU",23,0)
 I '$P(^RMPR(664.1,RMPRDA,0),U,20) S DIE="^RMPR(664.1,",DA=RMPRDA,DR="16///^S X=""P""" D ^DIE
"RTN","RMPR29GU",24,0)
 S RMDAT(664.1,RMPRDA_",",13)=DUZ
"RTN","RMPR29GU",25,0)
 S RMDAT(664.1,RMPRDA_",",17)=DT
"RTN","RMPR29GU",26,0)
 S RMDAT(664.1,RMPRDA_",",.05)=RMPR668
"RTN","RMPR29GU",27,0)
 D FILE^DIE("","RMDAT","RMERROR")
"RTN","RMPR29GU",28,0)
 I $D(RMERROR) S RMERR=1 D ERR
"RTN","RMPR29GU",29,0)
 D IN5^VADPT S VAINDT=$P($G(VAIP(3)),U) D INP^VADPT
"RTN","RMPR29GU",30,0)
 I VAIN(1) S DR="12//^S X=$P(VAIN(4),U,2)" D ^DIE
"RTN","RMPR29GU",31,0)
 S RMSOP=$S($P(^RMPR(664.1,RMPRDA,0),U,11)="O":11,$P(^(0),U,11)="E":11,$P(^(0),U,11)="R":11,$P(^(0),U,11)="W":11,1:"")
"RTN","RMPR29GU",32,0)
 I +RMSOP>0 D
"RTN","RMPR29GU",33,0)
 .L +^RMPR(668,RMPR668):2
"RTN","RMPR29GU",34,0)
 .I $T=0 S RESULTS(0)="1^Someone else is Editing this entry!" G EXIT
"RTN","RMPR29GU",35,0)
 .S RMDAT(668,RMPR668_",",9)=RMSOP
"RTN","RMPR29GU",36,0)
 .D FILE^DIE("","RMDAT","RMERROR")
"RTN","RMPR29GU",37,0)
 .L -^RMPR(668,RMPR668)
"RTN","RMPR29GU",38,0)
 .I $D(RMERROR) S RMERR=1 G ERR
"RTN","RMPR29GU",39,0)
 D ^RMPR29GA
"RTN","RMPR29GU",40,0)
 S RESULTS(0)=0_"^"_"Work Order Created:  "_RMPRWO
"RTN","RMPR29GU",41,0)
 ;ADD PRINT HERE.  
"RTN","RMPR29GU",42,0)
 I RMPRPTR=0 D PRT^RMPR29R
"RTN","RMPR29GU",43,0)
 I +RMPRPTR D EN1^RMPR29R(RMPRPTR)
"RTN","RMPR29GU",44,0)
 Q
"RTN","RMPR29GU",45,0)
ERR ;QUIT ON ERROR
"RTN","RMPR29GU",46,0)
 S RESULTS(0)="1^The following error has occured "_RMERROR
"RTN","RMPR29GU",47,0)
 Q
"RTN","RMPR29GU",48,0)
EXIT ;
"RTN","RMPR29GU",49,0)
 K DA,DIE,DR,I,RDA,RMDAT,RMERR,RMERROR,RMPR,RMPR25,RMPRFY,RMPRQTR,RMPRWO
"RTN","RMPR29GU",50,0)
 K RMSOP,RN,SCR,VAIN,VAINDT,VAIP,X
"RTN","RMPR29GU",51,0)
 Q
"RTN","RMPR29L2")
0^12^B3109839^n/a
"RTN","RMPR29L2",1,0)
RMPR29L2 ;HOIFO/SPS -  WORK ORDER HRS/RATE GRID OWL PROGRAM ;11/8/05  07:12
"RTN","RMPR29L2",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29L2",3,0)
 ;
"RTN","RMPR29L2",4,0)
 ;
"RTN","RMPR29L2",5,0)
A1(RMPR6642) ;entry point for testing
"RTN","RMPR29L2",6,0)
 D A2
"RTN","RMPR29L2",7,0)
 Q
"RTN","RMPR29L2",8,0)
EN(RESULT,RMPR6642) ; -- Broker callback to get list to display
"RTN","RMPR29L2",9,0)
A2 ;
"RTN","RMPR29L2",10,0)
 S DATE=2010101,CNT=0
"RTN","RMPR29L2",11,0)
 K ^TMP($J)
"RTN","RMPR29L2",12,0)
 I '$D(^RMPR(664.2,RMPR6642,0)) Q
"RTN","RMPR29L2",13,0)
 S RM660=$P(^RMPR(664.2,RMPR6642,0),U,2)
"RTN","RMPR29L2",14,0)
 I +RM660'>0 S RESULTS=1_"No Appliance/Repair record for this work order" Q
"RTN","RMPR29L2",15,0)
 D REC
"RTN","RMPR29L2",16,0)
 G EXIT
"RTN","RMPR29L2",17,0)
 Q
"RTN","RMPR29L2",18,0)
 K DATE,RESULTS,RM660,RMDTE
"RTN","RMPR29L2",19,0)
REC ;records to grid
"RTN","RMPR29L2",20,0)
 ;
"RTN","RMPR29L2",21,0)
 ;
"RTN","RMPR29L2",22,0)
 N DIC,DIQ,DR,STOPDT
"RTN","RMPR29L2",23,0)
 ;
"RTN","RMPR29L2",24,0)
 ;Get Work Order Labor Data and add to array
"RTN","RMPR29L2",25,0)
 S RMIE3="",RMIE33=0
"RTN","RMPR29L2",26,0)
 F  S RMIE3=$O(^RMPR(664.3,"C",RM660,RMIE3)) Q:RMIE3=""  D
"RTN","RMPR29L2",27,0)
 . Q:'$D(^RMPR(664.3,RMIE3,0))
"RTN","RMPR29L2",28,0)
 . S RMDT=$P(^RMPR(664.3,RMIE3,0),U)
"RTN","RMPR29L2",29,0)
 . S RMDTE=$$DAT2^RMPRUTL1(RMDT)
"RTN","RMPR29L2",30,0)
 . S CNT=0
"RTN","RMPR29L2",31,0)
 . F  S RMIE33=$O(^RMPR(664.3,RMIE3,1,RMIE33)) Q:RMIE33=""  D
"RTN","RMPR29L2",32,0)
 .. Q:'$D(^RMPR(664.3,RMIE3,1,RMIE33,0))
"RTN","RMPR29L2",33,0)
 .. S RMPAI=$P(^RMPR(664.3,RMIE3,1,RMIE33,0),U,1)
"RTN","RMPR29L2",34,0)
 .. S RMPAE=$$EXTERNAL^DILFD(664.33,.01,"",RMPAI)
"RTN","RMPR29L2",35,0)
 .. S RMHR=$P(^RMPR(664.3,RMIE3,1,RMIE33,0),U,2),RMRT=$P(^(0),U,3)
"RTN","RMPR29L2",36,0)
 .. S CNT=CNT+1
"RTN","RMPR29L2",37,0)
 .. S ^TMP($J,"RMLH",RMDT,CNT)=0_U_RMDTE_U_RMPAE_U_RMHR_U_RMRT_U_RMPR6642_U_RMPAI_U_RMIE3_U_RMIE33
"RTN","RMPR29L2",38,0)
 K CNT,RMIE3,RMIE33,RMDT,RMPAI,RMPAE,RMHR,RMRT
"RTN","RMPR29L2",39,0)
 ;PUT RESULTS IN GLOBAL!!
"RTN","RMPR29L2",40,0)
 Q
"RTN","RMPR29L2",41,0)
EXIT ;common exit point
"RTN","RMPR29L2",42,0)
 S RESULT=$NA(^TMP($J))
"RTN","RMPR29L2",43,0)
 Q
"RTN","RMPR29MG")
0^13^B20596253^n/a
"RTN","RMPR29MG",1,0)
RMPR29MG ;OI-HINES/SPS -OWL MATERIAL LABOR/HRS ENTER/EDIT RPC;12/27/2004
"RTN","RMPR29MG",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29MG",3,0)
A1(RMAED,RMPRSITE,RMIE1,RMIE2,RMIE22,RMMAT,RMQTY,RMMCOST,RMVC,RMVEN,RMUI,RMSN,RMPST,RMPRTXT) ;roll and scroll entry point
"RTN","RMPR29MG",4,0)
 G A2
"RTN","RMPR29MG",5,0)
 ;Material entry
"RTN","RMPR29MG",6,0)
EN(RESULTS,RMAED,RMIE1,RMIE2,RMIE22,RMMAT,RMQTY,RMMCOST,RMVC,RMVEN,RMUI,RMSN,RMPST,RMPRTXT) ;RPC entry point
"RTN","RMPR29MG",7,0)
A2 ;
"RTN","RMPR29MG",8,0)
 S RESULTS(0)="",RMPRWO=RMIE2
"RTN","RMPR29MG",9,0)
 K ^TMP($J)
"RTN","RMPR29MG",10,0)
 ;
"RTN","RMPR29MG",11,0)
 ; If no Tech assigned then self assign here
"RTN","RMPR29MG",12,0)
 I +$P(^RMPR(664.1,RMIE1,0),U,16)'>0 S $P(^(0),U,16)=DUZ,$P(^(0),U,17)="A",$P(^(7),U,1)=DT,$P(^(7),U,3)=DUZ
"RTN","RMPR29MG",13,0)
 I RMAED="D" D DEL Q
"RTN","RMPR29MG",14,0)
 ;
"RTN","RMPR29MG",15,0)
 S DA660=+$P(^RMPR(664.2,RMPRWO,0),U,2)
"RTN","RMPR29MG",16,0)
 S RMERR=0
"RTN","RMPR29MG",17,0)
 I RMIE22="" S RMIE22="+1,"_RMIE2
"RTN","RMPR29MG",18,0)
 E  S RMIE22E=RMIE22,RMIE22=RMIE22_","_RMIE2
"RTN","RMPR29MG",19,0)
 S RMDAT(664.22,RMIE22_",",.01)=RMMAT
"RTN","RMPR29MG",20,0)
 S RMDAT(664.22,RMIE22_",",1)=RMQTY
"RTN","RMPR29MG",21,0)
 S RMDAT(664.22,RMIE22_",",2)=RMMCOST
"RTN","RMPR29MG",22,0)
 S RMDAT(664.22,RMIE22_",",3)=RMVC
"RTN","RMPR29MG",23,0)
 S RMDAT(664.22,RMIE22_",",5)=RMVEN
"RTN","RMPR29MG",24,0)
 S RMDAT(664.22,RMIE22_",",6)=RMUI
"RTN","RMPR29MG",25,0)
 S RMDAT(664.22,RMIE22_",",7)=RMSN
"RTN","RMPR29MG",26,0)
 S RMDAT(664.22,RMIE22_",",13)=RMPST
"RTN","RMPR29MG",27,0)
 D UPDATE^DIE("","RMDAT","RMIEN","RMERROR")
"RTN","RMPR29MG",28,0)
 S J=""
"RTN","RMPR29MG",29,0)
 F  S J=$O(RMPRTXT(J)) Q:J=""  D
"RTN","RMPR29MG",30,0)
 . S L=J+1,RMPRTXTF(L)=RMPRTXT(J)
"RTN","RMPR29MG",31,0)
 I '$D(RMIEN(1)) S RMIEN(1)=RMIE22E
"RTN","RMPR29MG",32,0)
 D WP^DIE(664.22,RMIEN(1)_","_RMIE2_",",9,,"RMPRTXTF","RMWPERR")
"RTN","RMPR29MG",33,0)
 L -^RMPR(664.1,RMIE1)
"RTN","RMPR29MG",34,0)
 I $D(RMERROR) S RMERR=1 G ERR
"RTN","RMPR29MG",35,0)
QUIT D POST^RMPR29U
"RTN","RMPR29MG",36,0)
EXIT K DA660,RESULTS,RMERROR,RMERR,RMIEN,RMIE1,RMIE2,RMIE22,RMIE22E,RMMAT,RMPRTXT,RMPRTXTF,RMQTY,RMMCOST,RMVC,RMVEN,RMUI,RMSN,RMPST,RMPRWO,RMWPERR
"RTN","RMPR29MG",37,0)
 Q
"RTN","RMPR29MG",38,0)
 K J,L,RESULTS(0),RMAMIS,RMDAT,RMIE60,RMIE68,RMNST
"RTN","RMPR29MG",39,0)
 ; Labor/Hours entry
"RTN","RMPR29MG",40,0)
AH(RMAED,RMIE1,RMIE2,RMLD,RMHR,RMPRT,RMTECH) ;
"RTN","RMPR29MG",41,0)
 G AJ
"RTN","RMPR29MG",42,0)
EN2(RESULTS,RMAED,RMIE1,RMIE2,RMLD,RMHR,RMPRT,RMTECH,RMIE3,RMIE33) ;ENTRY FOR TECH/LABOR/HR
"RTN","RMPR29MG",43,0)
AJ ;
"RTN","RMPR29MG",44,0)
 ; If no Tech assigned then self assign here
"RTN","RMPR29MG",45,0)
 I +$P(^RMPR(664.1,RMIE1,0),U,16)'>0 S $P(^(0),U,16)=DUZ,$P(^(0),U,17)="A",$P(^(7),U,1)=DT,$P(^(7),U,3)=DUZ
"RTN","RMPR29MG",46,0)
 S X=RMLD D ^%DT S RMLD=Y K X,Y
"RTN","RMPR29MG",47,0)
 I RMTECH="" S RMTECH=DUZ
"RTN","RMPR29MG",48,0)
 S RESULTS(0)="",RMPRWO=RMIE2
"RTN","RMPR29MG",49,0)
 K ^TMP($J)
"RTN","RMPR29MG",50,0)
 S DA660=+$P(^RMPR(664.2,RMIE2,0),U,2)
"RTN","RMPR29MG",51,0)
 S RMNST=$P(^RMPR(664.2,RMIE2,0),U,3)
"RTN","RMPR29MG",52,0)
 I RMAED="E" G EDIT
"RTN","RMPR29MG",53,0)
 S (RMIE3,RMIE33,J)="",RMFND=0
"RTN","RMPR29MG",54,0)
 I RMAED="A" D
"RTN","RMPR29MG",55,0)
 . F  S J=$O(^RMPR(664.3,"B",RMLD,J)) Q:(J="")!(RMFND=1)  D
"RTN","RMPR29MG",56,0)
 .. I '$D(^RMPR(664.3,J,0)) Q
"RTN","RMPR29MG",57,0)
 .. I $P(^RMPR(664.3,J,0),U,2)'=DA660 Q 
"RTN","RMPR29MG",58,0)
 .. S RMIE3=J
"RTN","RMPR29MG",59,0)
 .. S:$D(^RMPR(664.3,RMIE3,1,"B",RMTECH)) RESULTS(0)="1^You already have Hours and Labor for this date. Please use the Detail/Edit instead of the Add Labor option.",RMFND=1 Q
"RTN","RMPR29MG",60,0)
 I RMFND=1 Q
"RTN","RMPR29MG",61,0)
 I RMAED="D" G DEL2
"RTN","RMPR29MG",62,0)
 S (RMIE3,RMIE33,J)="",RMFND=0
"RTN","RMPR29MG",63,0)
 F  S J=$O(^RMPR(664.3,"B",RMLD,J)) Q:(J="")!(RMFND=1)  D
"RTN","RMPR29MG",64,0)
 . I '$D(^RMPR(664.3,J,0)) Q
"RTN","RMPR29MG",65,0)
 . I $P(^RMPR(664.3,J,0),U,2)=DA660 S RMIE3=J,RMFND=1 Q
"RTN","RMPR29MG",66,0)
 I RMFND=1 S:$D(^RMPR(664.3,RMIE3,1,"B",RMTECH)) RMIE33=$O(^RMPR(664.3,RMIE3,1,"B",RMTECH,0))
"RTN","RMPR29MG",67,0)
EDIT I RMIE3="" S RMIE3="+1"
"RTN","RMPR29MG",68,0)
 I RMIE33="" S RMIE33="+2,"_RMIE3
"RTN","RMPR29MG",69,0)
 E  S RMIE33=RMIE33_","_RMIE3
"RTN","RMPR29MG",70,0)
 S RMDAT(664.3,RMIE3_",",.01)=RMLD
"RTN","RMPR29MG",71,0)
 S RMDAT(664.3,RMIE3_",",1)=DA660
"RTN","RMPR29MG",72,0)
 S RMDAT(664.3,RMIE3_",",2)=RMNST
"RTN","RMPR29MG",73,0)
 S RMDAT(664.33,RMIE33_",",.01)=RMTECH
"RTN","RMPR29MG",74,0)
 S RMDAT(664.33,RMIE33_",",1)=RMHR
"RTN","RMPR29MG",75,0)
 S RMDAT(664.33,RMIE33_",",2)=RMPRT
"RTN","RMPR29MG",76,0)
 D UPDATE^DIE("","RMDAT","RMIEN","RMERROR")
"RTN","RMPR29MG",77,0)
 L -^RMPR(664.1,RMIE1)
"RTN","RMPR29MG",78,0)
 I $D(RMERROR) S RMERR=1 G ERR
"RTN","RMPR29MG",79,0)
 ;
"RTN","RMPR29MG",80,0)
 W !!,"TO POST" D POST^RMPR29U
"RTN","RMPR29MG",81,0)
EXITL ;
"RTN","RMPR29MG",82,0)
 K RMAED,RMIE2,RMLD,RMHR,RMPRT,RMTECH,RMWO,RM660,RMIE3,RMIE33,RMFND,RMIEN
"RTN","RMPR29MG",83,0)
 Q
"RTN","RMPR29MG",84,0)
ERR S RESUTLS(0)=1_U_RMERROR("DIERR",1,"TEXT",1)
"RTN","RMPR29MG",85,0)
 S ^TMP("SPS",1)=0_RMERROR("DIERR",1,"TEXT",1)
"RTN","RMPR29MG",86,0)
 I $D(RMIE3) D EXITL
"RTN","RMPR29MG",87,0)
 I $D(RMIE2) D EXIT
"RTN","RMPR29MG",88,0)
 Q
"RTN","RMPR29MG",89,0)
DEL ;
"RTN","RMPR29MG",90,0)
 S DA(1)=RMIE2,DA=RMIE22,DIK="^RMPR(664.2,"_DA(1)_",1," D ^DIK
"RTN","RMPR29MG",91,0)
 K DA,DIK
"RTN","RMPR29MG",92,0)
 L -^RMPR(664.1,RMIE1)
"RTN","RMPR29MG",93,0)
 D POST^RMPR29U
"RTN","RMPR29MG",94,0)
 Q
"RTN","RMPR29MG",95,0)
DEL2 ;
"RTN","RMPR29MG",96,0)
 S (RMIE3,RMIE33,J)="",RMFND=0
"RTN","RMPR29MG",97,0)
 F  S J=$O(^RMPR(664.3,"B",RMLD,J)) Q:(J="")!(RMFND=1)  D
"RTN","RMPR29MG",98,0)
 . I '$D(^RMPR(664.3,J,0)) Q
"RTN","RMPR29MG",99,0)
 . I $P(^RMPR(664.3,J,0),U,2)=DA660 S RMIE3=J,RMFND=1 Q
"RTN","RMPR29MG",100,0)
 I RMFND=1 S:$D(^RMPR(664.3,RMIE3,1,"B",RMTECH)) RMIE33=$O(^(RMTECH,0))
"RTN","RMPR29MG",101,0)
 E  S RESULTS(0)="1^There was not a record for this Technician on this date." G EXITL
"RTN","RMPR29MG",102,0)
 S DA(1)=RMIE3,DA=RMIE33,DIK="^RMPR(664.3,"_DA(1)_",1," D ^DIK
"RTN","RMPR29MG",103,0)
 K DA,DIK
"RTN","RMPR29MG",104,0)
 L -^RMPR(664.1,RMIE1)
"RTN","RMPR29MG",105,0)
 D POST^RMPR29U
"RTN","RMPR29MG",106,0)
 Q
"RTN","RMPR29MG",107,0)
UPD ;update file 668 with 2319 records
"RTN","RMPR29MG",108,0)
 K DD,D0
"RTN","RMPR29MG",109,0)
 S DA(1)=RMIE68
"RTN","RMPR29MG",110,0)
 S DIC="^RMPR(668,"_DA(1)_","_"10,"
"RTN","RMPR29MG",111,0)
 S DIC(0)="L",DLAYGO=668,X=RMIE60
"RTN","RMPR29MG",112,0)
 D FILE^DICN
"RTN","RMPR29MG",113,0)
 K DD,DO
"RTN","RMPR29MG",114,0)
 S DA(1)=RMIE68
"RTN","RMPR29MG",115,0)
 S DIC="^RMPR(668,"_DA(1)_","_"11,"
"RTN","RMPR29MG",116,0)
 S X=RMAMIS
"RTN","RMPR29MG",117,0)
 D FILE^DICN
"RTN","RMPR29MG",118,0)
 K DIC,X,DLAYGO,D0
"RTN","RMPR29MG",119,0)
 Q
"RTN","RMPR29R")
0^6^B24256749^B23318305
"RTN","RMPR29R",1,0)
RMPR29R ;PHX/JLT,RVD-PRINT 2529-3 [ 10/01/94  5:39 AM ]
"RTN","RMPR29R",2,0)
 ;;3.0;PROSTHETICS;**9,23,34,75**;Feb 09, 1996;Build 25
"RTN","RMPR29R",3,0)
 ;get basic info, system variables
"RTN","RMPR29R",4,0)
 D DIV4^RMPRSIT G:$D(X) EXIT
"RTN","RMPR29R",5,0)
 K DIC S DIC=664.1,DIC(0)="AEQMZ"
"RTN","RMPR29R",6,0)
 S DIC("A")="Select Patient Name or Date: "
"RTN","RMPR29R",7,0)
 S DIC("S")="I $P(^(0),U,3)=RMPR(""STA"")&($P(^(0),U,17)'=""D""&($P(^(0),U,17)'=""C""))"
"RTN","RMPR29R",8,0)
 S DIC("W")="D EN3^RMPRD1"
"RTN","RMPR29R",9,0)
 D ^DIC G:+Y'>0 EXIT  S RMPRDA=+Y K DIC D PRT,EXIT Q
"RTN","RMPR29R",10,0)
EN1(RMPRPTR) ;
"RTN","RMPR29R",11,0)
PRT ;PRINT 2529-3 PASS RMPRDA
"RTN","RMPR29R",12,0)
 ;CALLED BY RMPR29,RMPR29T
"RTN","RMPR29R",13,0)
 ;REQUIRED VARIABLES: RMPRDA - ENTRY NUMBER IN FILE 664.1
"RTN","RMPR29R",14,0)
 ;                    RMPRSITE - SITE OFSTATION PROCESSING 2529-3
"RTN","RMPR29R",15,0)
 S DIC=4,DIC(0)="QXZN",X=$P(^RMPR(664.1,RMPRDA,0),U,15)
"RTN","RMPR29R",16,0)
 D ^DIC G:+Y'>0 EXIT
"RTN","RMPR29R",17,0)
 K IOP,X N RC
"RTN","RMPR29R",18,0)
 S RMPRINS=+Y,RC=0
"RTN","RMPR29R",19,0)
 S RMPRST=$S($D(^DIC(5,+$P(Y(0),U,2),0)):$P(^(0),U),1:"")
"RTN","RMPR29R",20,0)
 I $D(^DIC(4,RMPRINS,1)) S RMPRAD(1)=$P(^(1),U,1),RMPRAD(2)=$P(^(1),U,2),RMPRCT=$P(^(1),U,3),RMPR9P=$P(^(1),U,4)
"RTN","RMPR29R",21,0)
 S DIOBEG="S DFN=$P(^RMPR(664.1,RMPRDA,0),U,2),VAPA(""P"")=1,VAHOW=2 D ALL^VADPT"
"RTN","RMPR29R",22,0)
 D:'$D(IOP) GETP
"RTN","RMPR29R",23,0)
 ;
"RTN","RMPR29R",24,0)
 I $P(^RMPR(664.1,RMPRDA,0),U,11)="N" N RMPRFCTR D
"RTN","RMPR29R",25,0)
 .;national footwear center address in RMPRFCTR array used in print
"RTN","RMPR29R",26,0)
 .;template RMPR 25293
"RTN","RMPR29R",27,0)
 .S RMPRFCTR(1)="179TH ST & LINDEN BLVD."
"RTN","RMPR29R",28,0)
 .S RMPRFCTR(2)="ST. ALBANS, NY 11425"
"RTN","RMPR29R",29,0)
 ;
"RTN","RMPR29R",30,0)
 S L=0,DIC="^RMPR(664.1,",FLDS="[RMPR 25293]",BY="@NUMBER",(FR,TO)=RMPRDA D EN1^DIP D KVAR^VADPT Q
"RTN","RMPR29R",31,0)
EXIT ;common exit point
"RTN","RMPR29R",32,0)
 K RMPRINS,RMPRST,RMPRAD,DIC,BY,DFN,DIOBEG,DIOEND,FLDS,FR,IOP,L,PNODE
"RTN","RMPR29R",33,0)
 K RA,RB,RFL,RMPRCT,RMPRI,RMPRSC,RMPRWO,RMPR9P,SRC,TO,X,Y
"RTN","RMPR29R",34,0)
 Q
"RTN","RMPR29R",35,0)
INQ ;INQUIRE 2529-3 STATUS
"RTN","RMPR29R",36,0)
 D DIV4^RMPRSIT G:$D(X) EXIT
"RTN","RMPR29R",37,0)
 K DIC,DIR
"RTN","RMPR29R",38,0)
 S DIC=664.1,DIC(0)="AEQMZ"
"RTN","RMPR29R",39,0)
 S DIC("S")="I $P(^(0),U,3)=RMPR(""STA"")"
"RTN","RMPR29R",40,0)
 S DIC("W")="D EN3^RMPRD1" D ^DIC G:+Y'>0 EXIT  S RMPRDA=+Y
"RTN","RMPR29R",41,0)
 S L=0,DIC="^RMPR(664.1,",FLDS="[RMPR 2529-3 STATUS]"
"RTN","RMPR29R",42,0)
 S BY="@NUMBER",(FR,TO)=RMPRDA
"RTN","RMPR29R",43,0)
 S DIOEND="I IOST[""C"" X ""I $Y<21 F  W ! Q:$Y>21"" S DIR(0)=""E"" D ^DIR K DIR"
"RTN","RMPR29R",44,0)
 D EN1^DIP G EXIT
"RTN","RMPR29R",45,0)
STAT ;DISPLAY STATUS 2529-3
"RTN","RMPR29R",46,0)
 D:'$D(RMPR) DIV4^RMPRSIT Q:$D(X)
"RTN","RMPR29R",47,0)
 S STA=$G(DUZ(2))
"RTN","RMPR29R",48,0)
 I $D(^XUSEC("RMPR LAB MENU",DUZ)) S RP=0 D  I RP>0  W !!,?5,$C(7),"There are '"_RP_"' 2529-3's Pending Assignment"
"RTN","RMPR29R",49,0)
 .F RI=0:0 S RI=$O(^RMPR(664.1,"E","P",RI)) Q:RI'>0  I $D(^RMPR(664.1,RI,0)),$P(^(0),U,3)=STA S RP=RP+1
"RTN","RMPR29R",50,0)
 I $D(^XUSEC("RMPR LAB MENU",DUZ)) S RP=0 D  I RP>0  W !!,?5,$C(7),"There are '"_RP_"' 2529-3's that have been Returned"
"RTN","RMPR29R",51,0)
 .F RI=0:0 S RI=$O(^RMPR(664.1,"E","R",RI)) Q:RI'>0  I $D(^RMPR(664.1,RI,0)),$P(^(0),U,3)=STA S RP=RP+1
"RTN","RMPR29R",52,0)
 I $D(^XUSEC("RMPR LAB SUPERVISOR",DUZ)) S RP=0 D  I RP>0  W !!,?5,$C(7),"There are '"_RP_"' Local 2529-3's Pending Completion"
"RTN","RMPR29R",53,0)
 .F RI=0:0 S RI=$O(^RMPR(664.1,"E","PC",RI)) Q:RI'>0  I $D(^RMPR(664.1,RI,0)),$P(^(0),U,3)=STA,$P(^(0),U,15)=STA S RP=RP+1
"RTN","RMPR29R",54,0)
 S (RP,RI)=0
"RTN","RMPR29R",55,0)
 I $D(^XUSEC("RMPR LAB MENU",DUZ)) S RP=0 D  I RP>0  W !!,?5,$C(7),"There are '"_RP_"' Remote 2529-3's Pending Completion"
"RTN","RMPR29R",56,0)
 .;count remote pending
"RTN","RMPR29R",57,0)
 .F RI=0:0 S RI=$O(^RMPR(664.1,"E","PC",RI)) Q:RI'>0  I $D(^RMPR(664.1,RI,0)),$P(^(0),U,15)'=STA S RP=RP+1
"RTN","RMPR29R",58,0)
 I $D(^XUSEC("RMPR LAB MENU",DUZ)) S RP=0 D  I RP>0  W !!,?5,$C(7),"There are '"_RP_"' Lab Stock Issue Pending Completion"
"RTN","RMPR29R",59,0)
 .F RI=0:0 S RI=$O(^RMPR(664.1,"E","S",RI)) Q:RI'>0  I $D(^RMPR(664.1,RI,0)),$P(^(0),U,3)=STA,$P(^(0),U,15)=STA S RP=RP+1
"RTN","RMPR29R",60,0)
 K RI,RP,STA Q
"RTN","RMPR29R",61,0)
ZDSP ;DISPLAY WORK ORDER LIST
"RTN","RMPR29R",62,0)
 F RMPRI=0:0 S RMPRI=$O(^RMPR(664.2,RMPRWO,1,RMPRI)) Q:RMPRI'>0  S RA=$P(^(RMPRI,0),U,1) I '$P(^(0),U,11) W !,?5,$$ITM1^RMPR31U(RA),?10,$$ITM^RMPR31U(RA)
"RTN","RMPR29R",63,0)
 I $D(RFL) D
"RTN","RMPR29R",64,0)
 .W ! S X="?",DIC="^RMPR(661,",DIC(0)="EQM"
"RTN","RMPR29R",65,0)
 .S DIC("S")="S RA=$P(^(0),U,1) I $D(^PRCP(445,""AE"",RA,PRCP(""I"")))&($P(^RMPR(664.1,RMPRDA,0),U,17)'=""D""&($P(^(0),U,17)'=""C""))"
"RTN","RMPR29R",66,0)
 .S DIC("W")="W ?10,$P(^PRC(441,$P(^(0),U,1),0),U,2)" D ^DIC K RFL
"RTN","RMPR29R",67,0)
 Q
"RTN","RMPR29R",68,0)
DSP ;DISPLAY 2529-3
"RTN","RMPR29R",69,0)
 ;CALLED BY RMPR29
"RTN","RMPR29R",70,0)
 ;REQUIRED VARIABLE: RMPRDA - ENTRY INF FILE 664.1
"RTN","RMPR29R",71,0)
 N DFN S DFN=$P(^RMPR(664.1,RMPRDA,0),U,2) D DEM^VADPT
"RTN","RMPR29R",72,0)
 S L=0,DIC="^RMPR(664.1,",FLDS="[RMPR 2529 EDT]",BY="@NUMBER",(FR,TO)=RMPRDA,IOP="HOME" D EN1^DIP
"RTN","RMPR29R",73,0)
 Q
"RTN","RMPR29R",74,0)
LOC ;Display Request Location
"RTN","RMPR29R",75,0)
 ;CALLED BY RMPR29
"RTN","RMPR29R",76,0)
 ;REQUIRED VARIABLE: RMPRDA - ENTRY NUMBER IN FILE 664.1
"RTN","RMPR29R",77,0)
 S RB=^RMPR(664.1,RMPRDA,0),RMPRSC=$P(RB,U,11) K RB
"RTN","RMPR29R",78,0)
 S RA="O:ORTHOTIC LAB;R:RESTORATION LAB;S:SHOE LAST CLINIC;W:WHEELCHAIR REPAIR SHOP;N:NATIONAL FOOT CENTER;D:DDC;"
"RTN","RMPR29R",79,0)
 W !!,?5,"2529-3 Request Sent to ",$E($P($P(RA,RMPRSC_":",2),";",1),1,25)
"RTN","RMPR29R",80,0)
 Q
"RTN","RMPR29R",81,0)
GETP ;GET CORRECT PRINTER FOR 2529-3
"RTN","RMPR29R",82,0)
 ;ADDED PIECE 1 TO 669.9,DEV NODE FOR PRINTER FOR EYE CLINIC FOR 75
"RTN","RMPR29R",83,0)
 N SRC,PNODE S SRC=$P($G(^RMPR(664.1,RMPRDA,0)),U,11),PNODE=$P($G(^RMPR(669.9,RMPRSITE,"DEV")),U,1,99)
"RTN","RMPR29R",84,0)
 I $D(RMPRPTR),+RMPRPTR>0 S X=RMPRPTR
"RTN","RMPR29R",85,0)
 E  S X=$S(SRC="N"!(SRC="D"):$P($G(^RMPR(669.9,RMPRSITE,0)),U,5),SRC="E":$P(PNODE,U),SRC="O":$P(PNODE,U,2),SRC="R":$P(PNODE,U,3),SRC="S":$P(PNODE,U,4),SRC="W":$P(PNODE,U,5),1:"")
"RTN","RMPR29R",86,0)
 ;see internal notes
"RTN","RMPR29R",87,0)
 S DIC="^%ZIS(1,",DIC(0)="NZ" D ^DIC I +Y>0 S IOP="Q;"_Y(0,0),DQTIME="NOW" W !!,$C(7),?5,"2529-3 Printout has been sent to Device "_Y(0,0),!!
"RTN","RMPR29R",88,0)
 Q
"RTN","RMPR29RG")
0^9^B61078341^n/a
"RTN","RMPR29RG",1,0)
RMPR29RG ;HIOFO/SPS-OWL WINDOWS PRINTER [ 12/01/05  5:39 AM ]
"RTN","RMPR29RG",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29RG",3,0)
 ;get basic info, system variables
"RTN","RMPR29RG",4,0)
 ;WINDOW FAX/PRINT 2529-3 PASS RMPRA
"RTN","RMPR29RG",5,0)
 ;REQUIRED VARIABLES: RMPRDA - ENTRY NUMBER IN FILE 664.1
"RTN","RMPR29RG",6,0)
 ;                    RMPRSITE - SITE OFSTATION PROCESSING 2529-3
"RTN","RMPR29RG",7,0)
 ;                    RMPRPTR - "WINDOWS"
"RTN","RMPR29RG",8,0)
IN(RMPRA,RMPRSITE,RMPRPTR) ;
"RTN","RMPR29RG",9,0)
 ;TEST ENTRY
"RTN","RMPR29RG",10,0)
 D IN2
"RTN","RMPR29RG",11,0)
 Q
"RTN","RMPR29RG",12,0)
 K CNT,I,K,L,LCN,LNM,LSSN,LSTN,R643,RDO,RDI,RHDA,RI,RIDA,RIDES,RMPR,RMPR0
"RTN","RMPR29RG",13,0)
 K RMPR21,RMPRAOF,RMPRCDT,RMPRCSZ,RMPRD,RMPRDA,RMPREXT,RMPRINM,RMPRINSN
"RTN","RMPR29RG",14,0)
 K RMPRL,RMPRODT,RMPRRDT,RMPRROF,RMPRS,RMPRSOP,RMPRSTN,RMPGIP,RPHCPC
"RTN","RMPR29RG",15,0)
 K RD0,RD1,RPGIP,RPSAITEM,RPSALOC,SPACE,VA,VADM,VAEL,VAPA
"RTN","RMPR29RG",16,0)
PRT(RESULTS,RMPRA,RMPRSITE,RMPRPTR) ;GUI ENTRY
"RTN","RMPR29RG",17,0)
IN2 I RMPRPTR'="WINDOWS" S RMPRDA=RMPRA G PRT^RMPR29R
"RTN","RMPR29RG",18,0)
 K ^TMP($J,"RMPRT"),RESULTS
"RTN","RMPR29RG",19,0)
 S DIC=4,DIC(0)="QZN",X=$P(^RMPR(664.1,RMPRA,0),U,15)
"RTN","RMPR29RG",20,0)
 D ^DIC G:+Y'>0 EXIT
"RTN","RMPR29RG",21,0)
 N RC
"RTN","RMPR29RG",22,0)
 S RMPRINS=+Y,RC=0,RMPRINSN=$P(^DIC(4,RMPRINS,99),U)
"RTN","RMPR29RG",23,0)
 S RMPRST=$S($D(^DIC(5,+$P(Y(0),U,2),0)):$P(^(0),U),1:"")
"RTN","RMPR29RG",24,0)
 S (RMPRAD(1),RMPRAD(2),RMPRCT,RMPR9P)=""
"RTN","RMPR29RG",25,0)
 I $D(^DIC(4,RMPRINS,1)) S RMPRAD(1)=$P(^(1),U,1),RMPRAD(2)=$P(^(1),U,2),RMPRCT=$P(^(1),U,3),RMPR9P=$P(^(1),U,4)
"RTN","RMPR29RG",26,0)
 S DFN=$P(^RMPR(664.1,RMPRA,0),U,2) D ALL^VADPT
"RTN","RMPR29RG",27,0)
 ;
"RTN","RMPR29RG",28,0)
 I $P(^RMPR(664.1,RMPRA,0),U,11)="N" N RMPRFCTR D
"RTN","RMPR29RG",29,0)
 .;national footwear center address in RMPRFCTR array used in print
"RTN","RMPR29RG",30,0)
 .;template RMPR 25293
"RTN","RMPR29RG",31,0)
 .S RMPRFCTR(1)="179TH ST & LINDEN BLVD."
"RTN","RMPR29RG",32,0)
 .S RMPRFCTR(2)="ST. ALBANS, NY 11425"
"RTN","RMPR29RG",33,0)
 ;
"RTN","RMPR29RG",34,0)
 S RMPR0=^RMPR(664.1,RMPRA,0)
"RTN","RMPR29RG",35,0)
 S RMPRRDT=$$EXTERNAL^DILFD(664.1,17,,$P(RMPR0,U,18))
"RTN","RMPR29RG",36,0)
 S RMPRCDT=$$EXTERNAL^DILFD(664.1,23,,$P(RMPR0,U,26))
"RTN","RMPR29RG",37,0)
 S RMPRROF=$$EXTERNAL^DILFD(664.1,13,,$P(RMPR0,U,5))
"RTN","RMPR29RG",38,0)
 S RMPRAOF=$$EXTERNAL^DILFD(664.1,14,,$P(RMPR0,U,7))
"RTN","RMPR29RG",39,0)
 S RMPRODT=$$EXTERNAL^DILFD(664.1,.01,,$P(RMPR0,U,1))
"RTN","RMPR29RG",40,0)
 S (RMPRL,RMPRD,RMPRS)="",$P(RMPRL,"_",81)="",$P(RMPRD,"-",81)=""
"RTN","RMPR29RG",41,0)
 S ^TMP($J,"RMPRT",0)="           REQUEST AND RECEIPT FOR PROSTHETIC APPLIANCES OR SERVICES           "
"RTN","RMPR29RG",42,0)
 S ^TMP($J,"RMPRT",1)=RMPRL
"RTN","RMPR29RG",43,0)
 S ^TMP($J,"RMPRT",2)="                                   SECTION I"
"RTN","RMPR29RG",44,0)
 S ^TMP($J,"RMPRT",3)=RMPRD
"RTN","RMPR29RG",45,0)
 S RMPRSOP=$$EXTERNAL^DILFD(664.1,2,,$P(RMPR0,U,11))
"RTN","RMPR29RG",46,0)
 S ^TMP($J,"RMPRT",4)="TO: | "_RMPRSOP
"RTN","RMPR29RG",47,0)
 S L=$L(RMPRSOP),L=L+38,$P(RMPRS," ",80-L)=""
"RTN","RMPR29RG",48,0)
 S (L,RMPRS)="",L=$L(RMPRSOP),L=L+6,$P(RMPRS," ",(45-L))=""
"RTN","RMPR29RG",49,0)
 S ^TMP($J,"RMPRT",4)=^TMP($J,"RMPRT",4)_RMPRS_"1. VETERANS NAME (LAST,FIRST,M.I.)"
"RTN","RMPR29RG",50,0)
 S ^TMP($J,"RMPRT",5)="      "_$$EXTERNAL^DILFD(664.1,.11,,$P(RMPR0,U,15))
"RTN","RMPR29RG",51,0)
 S (L,RMPRS)="",L=$L($$EXTERNAL^DILFD(664.1,.11,,$P(RMPR0,U,15))),L=L+6,$P(RMPRS," ",(49-L))=""
"RTN","RMPR29RG",52,0)
 S ^TMP($J,"RMPRT",5)=^TMP($J,"RMPRT",5)_RMPRS_VADM(1)
"RTN","RMPR29RG",53,0)
 I RMPRAD(1)'="" S ^TMP($J,"RMPRT",6)="      "_$E(RMPRAD(1),1,30)
"RTN","RMPR29RG",54,0)
 I RMPRAD(2)'="" S ^TMP($J,"RMPRT",7)="      "_$E(RMPRAD(2),1,30)
"RTN","RMPR29RG",55,0)
 S ^TMP($J,"RMPRT",8)="      "_RMPRCT_", "_RMPRST_" "_RMPR9P
"RTN","RMPR29RG",56,0)
 S ^TMP($J,"RMPRT",9)=RMPRD
"RTN","RMPR29RG",57,0)
 S ^TMP($J,"RMPRT",10)="2. VETERANS ADDRESS             3. CLAIM NO.     4. SSN          5. STATION NO."
"RTN","RMPR29RG",58,0)
 S LNM=$L(VADM(1)),LCN=$L(VAEL(7)),LSSN=$L(VA("PID")),LSTN=$L(RMPRINSN)
"RTN","RMPR29RG",59,0)
 S (L,RMPRS)="",L=$L(VADM(1)),L=L+3,$P(RMPRS," ",(36-L))=""
"RTN","RMPR29RG",60,0)
 S ^TMP($J,"RMPRT",11)="   "_VADM(1)_RMPRS_VAEL(7)
"RTN","RMPR29RG",61,0)
 S (L,RMPRS)="",L=L+$L(VAEL(7)),$P(RMPRS," ",(17-L))=""
"RTN","RMPR29RG",62,0)
 S ^TMP($J,"RMPRT",11)=^TMP($J,"RMPRT",11)_RMPRS_VA("PID")_"      "_RMPRINSN
"RTN","RMPR29RG",63,0)
 S ^TMP($J,"RMPRT",12)="   "_VAPA(1)
"RTN","RMPR29RG",64,0)
 I VAPA(2)'="" S ^TMP($J,"RMPRT",13)="   "_VAPA(2)
"RTN","RMPR29RG",65,0)
 I VAPA(3)'="" S ^TMP($J,"RMPRT",14)="   "_VAPA(3)
"RTN","RMPR29RG",66,0)
 S RMPRCSZ=$P(VAPA(4),U,1)_","_$P(VAPA(5),U,2)_"  "_VAPA(6)
"RTN","RMPR29RG",67,0)
 S L=$L(RMPRCSZ),L=50-L,SPACE="",$P(SPACE," ",L)=""
"RTN","RMPR29RG",68,0)
 S (L,RMPRS)="",L=L+$L(RMPRCSZ),$P(RMPRS," ",(50-L))=""
"RTN","RMPR29RG",69,0)
 S K="" F  S K=$O(^TMP($J,"RMPRT",K)) Q:K=""  S CNT=K
"RTN","RMPR29RG",70,0)
 S ^TMP($J,"RMPRT",CNT+1)="   "_RMPRCSZ_RMPRS_"VETERANS PHONE: "_VAPA(8)
"RTN","RMPR29RG",71,0)
 S K="" F  S K=$O(^TMP($J,"RMPRT",K)) Q:K=""  S CNT=K
"RTN","RMPR29RG",72,0)
 S ^TMP($J,"RMPRT",CNT+1)=RMPRD
"RTN","RMPR29RG",73,0)
 S ^TMP($J,"RMPRT",CNT+2)="6. AUTHORITY FOR ISSUANCE       7. ELIGIBILITY STATUS           8. DATE REQUIRED"
"RTN","RMPR29RG",74,0)
 S ^TMP($J,"RMPRT",CNT+3)="   CFR 17.115                       "_$S($P(VAEL(3),U,1)=1:"SC",1:"NSC")
"RTN","RMPR29RG",75,0)
 ;S ^TMP($J,"RMPRT",CNT+4)="    9. DISABILITY CODE:"
"RTN","RMPR29RG",76,0)
 S ^TMP($J,"RMPRT",CNT+5)=RMPRD
"RTN","RMPR29RG",77,0)
 S ^TMP($J,"RMPRT",CNT+6)="             10.TYPES AND QUANTITIES OF APPLIANCES AND/OR SERVICES REQUESTED"
"RTN","RMPR29RG",78,0)
 S ^TMP($J,"RMPRT",CNT+7)=RMPRD
"RTN","RMPR29RG",79,0)
 S ^TMP($J,"RMPRT",CNT+8)="                                                              *UNIT     *TOTAL"
"RTN","RMPR29RG",80,0)
 S ^TMP($J,"RMPRT",CNT+9)="     ITEM #   NOMENCLATURE               QTY          UNIT     COST      COST"
"RTN","RMPR29RG",81,0)
 S ^TMP($J,"RMPRT",CNT+10)=RMPRD
"RTN","RMPR29RG",82,0)
 ; Item Multiple
"RTN","RMPR29RG",83,0)
 S K="" F  S K=$O(^TMP($J,"RMPRT",K)) Q:K=""  S CNT=K
"RTN","RMPR29RG",84,0)
 S RI=""
"RTN","RMPR29RG",85,0)
 F  S RI=$O(^RMPR(664.1,RMPRA,2,RI)) Q:RI=""  D
"RTN","RMPR29RG",86,0)
 .Q:'$D(^RMPR(664.1,RMPRA,2,RI,0))
"RTN","RMPR29RG",87,0)
 .S CNT=CNT+1
"RTN","RMPR29RG",88,0)
 .S RMPR21=$G(^RMPR(664.1,RMPRA,2,RI,0))
"RTN","RMPR29RG",89,0)
 .I RMPR21="" S RESULTS="1^No item multiple found"
"RTN","RMPR29RG",90,0)
 .F I=1:1:11 S RMPR21(I)=""
"RTN","RMPR29RG",91,0)
 .S RMPR21(1)=$P(RMPR21,U,1),RMPR21(2)=$P(RMPR21,U,2)
"RTN","RMPR29RG",92,0)
 .S RMPR21(3)=$$EXTERNAL^DILFD(664.16,3,,$P(RMPR21,U,3))
"RTN","RMPR29RG",93,0)
 .S RMPRINM=$$EXTERNAL^DILFD(664.16,.01,,$P(RMPR21,U)),RMPRINM=$E(RMPRINM,1,24)
"RTN","RMPR29RG",94,0)
 .S RMPR21(4)=$S($P(RMPR21,U,4)>0:$P(RMPR21,U,4),1:"0.00")
"RTN","RMPR29RG",95,0)
 .S RMPR21(11)=$S($P(RMPR21,U,11)>0:$P(RMPR21,U,11),1:"0.00")
"RTN","RMPR29RG",96,0)
 .S (L,RMPRS)="",L=L+6,L=L+$L(RMPR21(1)),$P(RMPRS," ",(15-L))=""
"RTN","RMPR29RG",97,0)
 .S ^TMP($J,"RMPRT",CNT)="      "_RMPR21(1)_RMPRS_RMPRINM
"RTN","RMPR29RG",98,0)
 .S (L,RMPRS)="",L=L+$L(RMPRINM),$P(RMPRS," ",(29-L))=""
"RTN","RMPR29RG",99,0)
 .S ^TMP($J,"RMPRT",CNT)=^TMP($J,"RMPRT",CNT)_RMPRS_RMPR21(2)
"RTN","RMPR29RG",100,0)
 .S (L,RMPRS)="",L=L+$L(RMPR21(2)),$P(RMPRS," ",(14-L))=""
"RTN","RMPR29RG",101,0)
 .S ^TMP($J,"RMPRT",CNT)=^TMP($J,"RMPRT",CNT)_RMPRS_RMPR21(3)
"RTN","RMPR29RG",102,0)
 .S (L,RMPRS)="",L=L+$L(RMPR21(3)),$P(RMPRS," ",(8-L))=""
"RTN","RMPR29RG",103,0)
 .S ^TMP($J,"RMPRT",CNT)=^TMP($J,"RMPRT",CNT)_RMPRS_RMPR21(4)_RMPRS_RMPR21(11)
"RTN","RMPR29RG",104,0)
 .S RMPREXT=0
"RTN","RMPR29RG",105,0)
 .F  S RMPREXT=$O(^RMPR(664.1,RMPRA,2,RI,1,RMPREXT)) Q:RMPREXT=""  D
"RTN","RMPR29RG",106,0)
 ..S CNT=CNT+1
"RTN","RMPR29RG",107,0)
 ..S ^TMP($J,"RMPRT",CNT)=^RMPR(664.1,RMPRA,2,RI,1,RMPREXT,0)
"RTN","RMPR29RG",108,0)
 .D HCP
"RTN","RMPR29RG",109,0)
 S K="" F  S K=$O(^TMP($J,"RMPRT",K)) Q:K=""  S CNT=K
"RTN","RMPR29RG",110,0)
 S ^TMP($J,"RMPRT",CNT+1)=RMPRD
"RTN","RMPR29RG",111,0)
 S ^TMP($J,"RMPRT",CNT+2)="11. PROCUREMENT SOURCE: "_RMPRSOP
"RTN","RMPR29RG",112,0)
 S ^TMP($J,"RMPRT",CNT+3)=RMPRD
"RTN","RMPR29RG",113,0)
 S ^TMP($J,"RMPRT",CNT+4)="12. SIGNATURE AND TITLE OF   13. DATE    14. SIGNATURE AND TITLE OF   15. DATE"
"RTN","RMPR29RG",114,0)
 S ^TMP($J,"RMPRT",CNT+5)="    REQUESTING OFFICIAL      "_RMPRRDT_"    APPROVING OFFICIAL"
"RTN","RMPR29RG",115,0)
 S (L,RMPRS)="",L=+$L(RMPRROF),$P(RMPRS," ",(46-L))=""
"RTN","RMPR29RG",116,0)
 S ^TMP($J,"RMPRT",CNT+6)="    "_RMPRROF_RMPRS_RMPRAOF
"RTN","RMPR29RG",117,0)
 S ^TMP($J,"RMPRT",CNT+7)=RMPRD
"RTN","RMPR29RG",118,0)
 S ^TMP($J,"RMPRT",CNT+8)="                             SECTION III"
"RTN","RMPR29RG",119,0)
 S ^TMP($J,"RMPRT",CNT+9)=RMPRL
"RTN","RMPR29RG",120,0)
 S ^TMP($J,"RMPRT",CNT+10)="16. ORDER NUMBER             17. DATE OF ORDER        18. DATE ITEM RECIEVED"
"RTN","RMPR29RG",121,0)
 S (L,RMPRS)="",L=$L($P(RMPR0,U,13)),$P(RMPRS," ",(30-L))=""
"RTN","RMPR29RG",122,0)
 S ^TMP($J,"RMPRT",CNT+11)="    "_$P(RMPR0,U,13)_RMPRS_RMPRODT
"RTN","RMPR29RG",123,0)
 S ^TMP($J,"RMPRT",CNT+12)=RMPRD
"RTN","RMPR29RG",124,0)
 S ^TMP($J,"RMPRT",CNT+13)="19. DATE DELIVERED                         20. SIGNATURE OF INSPECTING OFFICIAL"
"RTN","RMPR29RG",125,0)
 S ^TMP($J,"RMPRT",CNT+14)=""
"RTN","RMPR29RG",126,0)
 S ^TMP($J,"RMPRT",CNT+15)=RMPRD
"RTN","RMPR29RG",127,0)
 S ^TMP($J,"RMPRT",CNT+16)="21. CERTIFICATE OF RECEIPT OR DELIVERY (Check One)"
"RTN","RMPR29RG",128,0)
 S ^TMP($J,"RMPRT",CNT+17)=RMPRD
"RTN","RMPR29RG",129,0)
 S ^TMP($J,"RMPRT",CNT+18)="[ ] I certify that I have received the items listed above"
"RTN","RMPR29RG",130,0)
 S ^TMP($J,"RMPRT",CNT+19)="[ ] I certify that the above item(s) have been sent to"
"RTN","RMPR29RG",131,0)
 S ^TMP($J,"RMPRT",CNT+20)="     the Veteran or the requesting field station"
"RTN","RMPR29RG",132,0)
 S ^TMP($J,"RMPRT",CNT+21)=RMPRD
"RTN","RMPR29RG",133,0)
 S ^TMP($J,"RMPRT",CNT+22)="22. SIGNATURE OF VETERAN OR VA OFFICIAL"
"RTN","RMPR29RG",134,0)
 S ^TMP($J,"RMPRT",CNT+23)=""
"RTN","RMPR29RG",135,0)
 S ^TMP($J,"RMPRT",CNT+24)=RMPRD
"RTN","RMPR29RG",136,0)
 S ^TMP($J,"RMPRT",CNT+25)="23 SIGNATURE OF DESIGNATED EMPLOYEE        24. DATE       25. STATION NO."
"RTN","RMPR29RG",137,0)
 S RMPRSTN="" I $D(RMPR("STA")) S RMPRSTN=$P($G(^DIC(4,+RMPR("STA"),99)),U)
"RTN","RMPR29RG",138,0)
 S ^TMP($J,"RMPRT",CNT+26)="                                            "_RMPRCDT_"                   "_RMPRSTN
"RTN","RMPR29RG",139,0)
 S ^TMP($J,"RMPRT",CNT+27)=RMPRD
"RTN","RMPR29RG",140,0)
 S ^TMP($J,"RMPRT",CNT+28)="ADP FORM 2529-3"
"RTN","RMPR29RG",141,0)
 M RESULTS=^TMP($J,"RMPRT")
"RTN","RMPR29RG",142,0)
 G EXIT
"RTN","RMPR29RG",143,0)
 Q
"RTN","RMPR29RG",144,0)
HCP ;print HCPCS and GIP or Pros Inventory in -3.
"RTN","RMPR29RG",145,0)
 Q:RI'>0
"RTN","RMPR29RG",146,0)
 S RD0=RMPRA,RD1=RI
"RTN","RMPR29RG",147,0)
 Q:'$D(^RMPR(664.1,RD0,2,RD1,0))
"RTN","RMPR29RG",148,0)
 S R643=$G(^RMPR(664.1,RD0,2,RD1,3))
"RTN","RMPR29RG",149,0)
 S RPSAITEM=$P(R643,U,3),RPSALOC=$P(R643,U,4)
"RTN","RMPR29RG",150,0)
 S RPHCPC=$P($G(^RMPR(664.1,RD0,2,RD1,2)),U,1)
"RTN","RMPR29RG",151,0)
 Q:'$G(RPHCPC)
"RTN","RMPR29RG",152,0)
 Q:'$D(^RMPR(661.1,RPHCPC,0))
"RTN","RMPR29RG",153,0)
 S RPGIP=$P($G(^RMPR(664.1,RD0,2,RD1,0)),U,13)
"RTN","RMPR29RG",154,0)
 S ^TMP($J,"RMPRT",CNT+1)="          HCPCS: "_$P(^RMPR(661.1,RPHCPC,0),U,1)
"RTN","RMPR29RG",155,0)
 I $G(RPSALOC),RPSAITEM'="",$D(^RMPR(661.3,RPSALOC,0)) D
"RTN","RMPR29RG",156,0)
 .S RHDA=$O(^RMPR(661.3,RPSALOC,1,"B",RPHCPC,0)) Q:'$G(RHDA)
"RTN","RMPR29RG",157,0)
 .S RIDA=$O(^RMPR(661.3,RPSALOC,1,RHDA,1,"B",RPSAITEM,0))
"RTN","RMPR29RG",158,0)
 .S RIDES=$P($G(^RMPR(661.3,RPSALOC,1,RHDA,1,RIDA,0)),U,8)
"RTN","RMPR29RG",159,0)
 .S ^TMP($J,"RMPRT",CNT+1)=^TMP($J,"RMPRT",CNT+1)_"   RIDES"
"RTN","RMPR29RG",160,0)
 I $G(RPSALOC) S ^TMP($J,"RMPRT",CNT+2)="*** Pros Inventory ***    Location: "
"RTN","RMPR29RG",161,0)
 I $G(RPSALOC) S:$D(^RMPR(661.3,RPSALOC,0)) ^TMP($J,"RMPRT",CNT+2)=^TMP($J,"RMPRT",CNT+2)_$P(^RMPR(661.3,RPSALOC,0),U,1)
"RTN","RMPR29RG",162,0)
 I '$G(RPSALOC),$G(RPGIP) S ^TMP($J,"RMPRT",CNT+2)="         *** GIP ***"
"RTN","RMPR29RG",163,0)
 I '$G(RPSALOC),'$G(RPGIP) S ^TMP($J,"RMPRT",CNT+2)="         *** OTHER ***"
"RTN","RMPR29RG",164,0)
 Q
"RTN","RMPR29RG",165,0)
EXIT ;common exit point
"RTN","RMPR29RG",166,0)
 K RMPRA,RMPRSITE,RMPRPTR,RMPRINS,RMPRST,RMPRAD,DIC,DFN
"RTN","RMPR29RG",167,0)
 K RA,RB,RFL,RMPRCT,RMPRI,RMPRSC,RMPRWO,RMPR9P,SRC,TO,X,Y
"RTN","RMPR29RG",168,0)
 D KVAR^VADPT
"RTN","RMPR29RG",169,0)
 Q
"RTN","RMPR29T")
0^21^B30847402^B37837792
"RTN","RMPR29T",1,0)
RMPR29T ;PHX/JLT-PROCESSING 2529-3 ACTION ;01/04/95 3:56 PM
"RTN","RMPR29T",2,0)
 ;;3.0;PROSTHETICS;**78,75**;Feb 09, 1996;Build 25
"RTN","RMPR29T",3,0)
 ;
"RTN","RMPR29T",4,0)
 ;RMS 08/25/03 Patch #78 - Add shipment date for
"RTN","RMPR29T",5,0)
 ;Billing Awareness project
"RTN","RMPR29T",6,0)
 ;SPS 06/06/06 Patch #75 - Removed shipment date
"RTN","RMPR29T",7,0)
 ;
"RTN","RMPR29T",8,0)
ASK ;ASK TYPE OF PROCESSING ACTION
"RTN","RMPR29T",9,0)
 ;CALLED BY RMPR29T
"RTN","RMPR29T",10,0)
 ;VARIABLES REQUIRED: RMPRDA - ENTRY IN FILE 664.1
"RTN","RMPR29T",11,0)
 ;                    RMPR ARRAY - AN ARRAY SET UP BY CALL TO 
"RTN","RMPR29T",12,0)
 ;                                 DIV4^RMPRSIT
"RTN","RMPR29T",13,0)
 ;
"RTN","RMPR29T",14,0)
 I $Y<17 F  W ! Q:$Y>17
"RTN","RMPR29T",15,0)
 W !,RMPR("L") K DIR S DIR("A")="Select Processing Action",DIR("A")=$S($D(HLD):DIR("A")_" or press 'return' to view more items: ",1:DIR("A")_": ") G:$D(PSM) AMP G:$D(PASS) ASP G:$D(PAC) ACK G:$D(PNK) ANK
"RTN","RMPR29T",16,0)
 S DIR(0)="SAO^1:EDIT 2529-3 ITEM;2:PROCESS JOB SECTION  ;3:INITIATE PROCUREMENT;4:PRINT 2529-3     ;5:RE-DISPLAY SCREEN    ;6:CANCEL 2529-3",DIR("?")="^D HELP^RMPR29W W !,$C(7),?5,""Enter a number 1-6""" D HELP^RMPR29W
"RTN","RMPR29T",17,0)
 D ^DIR I (X=""&$D(HLD)) S PAGE=PAGE+1 D HD^RMPR29W G:$D(^UTILITY($J,"W"))!$O(^UTILITY("DIQ1",$J,664.16,+RI,7,0)) EXT^RMPR29D G ITD^RMPR29D
"RTN","RMPR29T",18,0)
 G:$D(DTOUT) END^RMPR29A G:+Y=1 ITM^RMPR29A G:+Y=2 ^RMPR29B G:+Y=3 ^RMPR29P G:+Y=5 DISP^RMPR29D G:+Y=6 CA^RMPR29C
"RTN","RMPR29T",19,0)
 I +Y=4 D PRT^RMPR29R G DISP^RMPR29D
"RTN","RMPR29T",20,0)
 I $D(^XUSEC("RMPR LAB SUPERVISOR",DUZ)) G COM
"RTN","RMPR29T",21,0)
 K DIR S DIR(0)="Y",DIR("A")="Ready for Supervisor Inspection",DIR("B")="NO" D ^DIR I +Y=1 W !!,?5,$C(7),"Request Ready Inspection" S DIE="^RMPR(664.1,",DA=RMPRDA,DR="16///^S X=""PC""" D ^DIE
"RTN","RMPR29T",22,0)
 ;I +Y=0 G END^RMPR29A
"RTN","RMPR29T",23,0)
 G END^RMPR29A
"RTN","RMPR29T",24,0)
 ; D ^RMPR4E23 ADDED BY RMS
"RTN","RMPR29T",25,0)
ASP ;ASK TYPE OF ASSIGNMENT ACTION
"RTN","RMPR29T",26,0)
 S DIR(0)="SAO^1:EDIT 2529-3 ITEM;2:ASSIGN 2529-3 TO TECH;3:CANCEL 2529-3;4:PRINT 2529-3",DIR("?")="^D HELP^RMPR29W" D HELP^RMPR29W
"RTN","RMPR29T",27,0)
 D ^DIR I (X=""&$D(HLD)) S PAGE=PAGE+1 D HD^RMPR29W G:$D(^UTILITY($J,"W"))!$O(^UTILITY("DIQ1",$J,664.16,+RI,7,0)) EXT^RMPR29D G ITD^RMPR29D
"RTN","RMPR29T",28,0)
 G:$D(DTOUT) EXIT^RMPR29S G:+Y=1 ITM^RMPR29A G:+Y=2 ATCH^RMPR29S G:+Y=3 CA^RMPR29C
"RTN","RMPR29T",29,0)
 I +Y=4 D PRT^RMPR29R G DISP^RMPR29D
"RTN","RMPR29T",30,0)
 G EXIT^RMPR29S
"RTN","RMPR29T",31,0)
ACK ;ASK TYPE OF COMPLETION ACTION
"RTN","RMPR29T",32,0)
 S DIR(0)="SAO^1:EDIT 2529-3 ITEM     ;2:COMPLETE JOB SECTION;3:RETURN 2529-3 TO LAB;4:PRINT 2529-3         ;5:RE-DISPLAY SCREEN   ;6:CANCEL 2529-3",DIR("?")="^D HELP^RMPR29W W !,$C(7),?5,""Enter a Number 1-6""" D HELP^RMPR29W
"RTN","RMPR29T",33,0)
 D ^DIR I (X=""&$D(HLD)) S PAGE=PAGE+1 D HD^RMPR29W G:$D(^UTILITY($J,"W"))!($O(^UTILITY("DIQ1",$J,664.16,+RI,7,0))) EXT^RMPR29D G ITD^RMPR29D
"RTN","RMPR29T",34,0)
 G:$D(DTOUT) END^RMPR29A G:+Y=1 ITM^RMPR29A G:+Y=2 ^RMPR29B G:+Y=3 RT^RMPR29C G:+Y=5 DISP^RMPR29D G:+Y=6 CA^RMPR29C
"RTN","RMPR29T",35,0)
 I +Y=4 D PRT^RMPR29R G DISP^RMPR29D
"RTN","RMPR29T",36,0)
COM ;COMPLETE 2529-3
"RTN","RMPR29T",37,0)
 K DIR S DIR(0)="Y",DIR("A")="Complete and Post 2529-3",DIR("B")="NO" D ^DIR I +Y=0 G END^RMPR29A
"RTN","RMPR29T",38,0)
 D CHK I $D(RFL) G END^RMPR29A
"RTN","RMPR29T",39,0)
 K DA,Y,DIC,X S DA=RMPRDA,DR="24",DIE="^RMPR(664.1," D ^DIE I $D(DTOUT)!($D(Y)) D MESS G END^RMPR29A
"RTN","RMPR29T",40,0)
 I $P(^RMPR(664.1,RMPRDA,0),U,27)=3 W !!,$C(7),?5,"2529-3 cannot be completed until issued to Veteran" G END^RMPR29A
"RTN","RMPR29T",41,0)
 S DA=RMPRDA,DR="33;20R",DIE="^RMPR(664.1," D ^DIE I $D(DTOUT)!($D(Y)) D MESS G END^RMPR29A
"RTN","RMPR29T",42,0)
 S:'$P(^RMPR(664.1,RMPRDA,0),U,25) $P(^RMPR(664.1,RMPRDA,0),U,25)=DUZ S $P(^RMPR(664.1,RMPRDA,0),U,26)=DT
"RTN","RMPR29T",43,0)
 W !!,?5,$C(7),"Request Completed and Posted!!!" S DIE="^RMPR(664.1,",DR="16///^S X=""C""",DA=RMPRDA D ^DIE
"RTN","RMPR29T",44,0)
 G END^RMPR29A
"RTN","RMPR29T",45,0)
ANK ;ASK TYPE OF CLOSE OUT ACTION
"RTN","RMPR29T",46,0)
 S DIR(0)="SAO^1:EDIT 2529-3 ITEM     ;2:PRINT 2529-3         ;3:RE-DISPLAY SCREEN   ;4:CANCEL 2529-3       ;5:CLOSE OUT A 2529-3",DIR("?")="^D HELP^RMPR29W W !,$C(7),?5,""Enter a Number 1-5""" D HELP^RMPR29W
"RTN","RMPR29T",47,0)
 D ^DIR I (X=""&$D(HLD)) S PAGE=PAGE+1 D HDC^RMPR29W G:$D(^UTILITY($J,"W"))!($O(^UTILITY("DIQ1",$J,664.16,+RI,7,0))) EXT^RMPR29D G ITD^RMPR29D
"RTN","RMPR29T",48,0)
 G:+Y=1 ITM^RMPR29A G:+Y=3 DISP^RMPR29D G:+Y=4 CA^RMPR29C
"RTN","RMPR29T",49,0)
 I +Y=2 D PRT^RMPR29R G DISP^RMPR29D
"RTN","RMPR29T",50,0)
 ;K DIR S DIR(0)="Y",DIR("A")="Close out 2529-3",DIR("B")="NO" D ^DIR I +Y=0 D MESS G EXIT^RMPR29C
"RTN","RMPR29T",51,0)
 I +Y=5 D  G EXIT^RMPR29C
"RTN","RMPR29T",52,0)
 .K DA,Y,DIC,X
"RTN","RMPR29T",53,0)
 .S DA=RMPRDA,DIE="^RMPR(664.1,",DR="4;33;20R"
"RTN","RMPR29T",54,0)
 .D ^DIE
"RTN","RMPR29T",55,0)
 .I $D(DTOUT)!$D(Y) D MESS Q
"RTN","RMPR29T",56,0)
 .W !!,?5,$C(7),"Request Closed out and Posted!!!"
"RTN","RMPR29T",57,0)
 .I $P(^RMPR(664.1,RMPRDA,0),U,20),$P(^(0),U,23) D DEL^RMPR29P(RMPRDA),PST^RMPR29P(RMPRDA)
"RTN","RMPR29T",58,0)
 .N RMPRDL S RMPRDL=$P($G(^RMPR(664.1,RMPRDA,7)),U,2)
"RTN","RMPR29T",59,0)
 .F RI=0:0 S RI=$O(^RMPR(664.1,RMPRDA,2,RI)) Q:RI'>0  I $D(^(RI,0)) S DA=$P(^(0),U,5) I +DA>0,RMPRDL S DIE="^RMPR(660,",DR="10///@;10///^S X=RMPRDL" D ^DIE
"RTN","RMPR29T",60,0)
 .S:'$P(^RMPR(664.1,RMPRDA,0),U,25) $P(^RMPR(664.1,RMPRDA,0),U,25)=DUZ S $P(^RMPR(664.1,RMPRDA,0),U,26)=DT
"RTN","RMPR29T",61,0)
 .S DIE="^RMPR(664.1,",DA=RMPRDA,DR="16///^S X=""C""" D ^DIE
"RTN","RMPR29T",62,0)
 Q
"RTN","RMPR29T",63,0)
CHK ;CHK TO SEE IF JOB SECTION IS COMPLETE
"RTN","RMPR29T",64,0)
 K RFL F RI=0:0 S RI=$O(^RMPR(664.1,RMPRDA,2,RI)) Q:RI'>0  I $D(^(RI,0)) S RDA=^(0),RA=$P(RDA,U,5) D
"RTN","RMPR29T",65,0)
 .;see internal notes
"RTN","RMPR29T",66,0)
 .S (RZP,DA)=$O(^RMPR(664.2,"C",RA,0))
"RTN","RMPR29T",67,0)
 .S RMPRCD=$P($G(^RMPR(664.2,+DA,0)),U,10) I 'RMPRCD S RFL=1 W !!,$C(7),"Date Completed has not been entered for JOB "
"RTN","RMPR29T",68,0)
 I $D(RFL) W !!,$C(7),?5,"2529-3 Job Section is Incomplete!!"
"RTN","RMPR29T",69,0)
 Q
"RTN","RMPR29T",70,0)
AMP ;ASK TYPE OF MULTIPLE ASSIGMENT ACTION
"RTN","RMPR29T",71,0)
 S DIR(0)="SAO^1:EDIT 2529-3 ITEM;2:ASSIGN 2529-3 TO TECH;3:CANCEL 2529-3;4:PRINT 2529-3    ;5:NEXT ENTRY           ;6:PREVIOUS ENTRY",DIR("?")="^D HELP^RMPR29W" D HELP^RMPR29W
"RTN","RMPR29T",72,0)
 D ^DIR I (X=""&$D(HLD)) S PAGE=PAGE+1 D HD^RMPR29W G:$D(^UTILITY($J,"W"))!$O(^UTILITY("DIQ1",$J,664.16,+RI,7,0)) EXT^RMPR29D G ITD^RMPR29D
"RTN","RMPR29T",73,0)
 G:$D(DTOUT) EXIT^RMPR29S G:+Y=1 ITM^RMPR29A G:+Y=2 ATCH^RMPR29S G:+Y=3 CA^RMPR29C G:+Y=5 NEXT^RMPR29S G:+Y=6 PREV^RMPR29S
"RTN","RMPR29T",74,0)
 I +Y=4 D PRT^RMPR29R G DISP^RMPR29D
"RTN","RMPR29T",75,0)
 G EXIT^RMPR29S
"RTN","RMPR29T",76,0)
MESS ;MESSAGE IF DTOUT OR $D(Y)
"RTN","RMPR29T",77,0)
 W !!,$C(7),?5,"2529-3 has not been completed!!" Q
"RTN","RMPR29T",78,0)
 Q
"RTN","RMPR29W1")
0^14^B17691968^n/a
"RTN","RMPR29W1",1,0)
RMPR29W1 ;HOIFO/SPS -  WORK ORDER ADD ON GRID OWL PROGRAM ;11/8/05  07:12
"RTN","RMPR29W1",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29W1",3,0)
 ;
"RTN","RMPR29W1",4,0)
 ;
"RTN","RMPR29W1",5,0)
A1(RMPR6641) ;entry point for testing
"RTN","RMPR29W1",6,0)
 D A2
"RTN","RMPR29W1",7,0)
 Q
"RTN","RMPR29W1",8,0)
EN(RESULT,RMPR6641) ; -- Broker callback to get list to display
"RTN","RMPR29W1",9,0)
A2 N STRING,CLREND,COLUMN,ON,OFF
"RTN","RMPR29W1",10,0)
 S DATE=2010101
"RTN","RMPR29W1",11,0)
 K ^TMP($J)
"RTN","RMPR29W1",12,0)
 N RMPRA,CDATE,X
"RTN","RMPR29W1",13,0)
 K ADATE,PDAY,RMPRCD
"RTN","RMPR29W1",14,0)
 S (CNT,VALMCNT)=0,RRX=""
"RTN","RMPR29W1",15,0)
 ;S (PPDAY,PPD,PPD1,PPD2,PPD3,PPD4,PPD5)=0
"RTN","RMPR29W1",16,0)
 ;S (PPDDAY,PPDD1,PPDD2,PPDD3,PPDD4,PPDD5)=0
"RTN","RMPR29W1",17,0)
 I '$D(^RMPR(664.1,RMPR6641,0)) Q
"RTN","RMPR29W1",18,0)
 I $P(^RMPR(664.1,RMPR6641,0),U,13)="" Q
"RTN","RMPR29W1",19,0)
 S WO66410=^RMPR(664.1,RMPR6641,0)
"RTN","RMPR29W1",20,0)
 ;W !!,RMPR6641,"  ",WO66410
"RTN","RMPR29W1",21,0)
 S RMPRA=$P(WO66410,U,8) Q:RMPRA'>0  D
"RTN","RMPR29W1",22,0)
 .S STN=$P(^RMPR(668,RMPRA,0),U,7)
"RTN","RMPR29W1",23,0)
 .S STNX=$$STATN^RMPRUTIL(STN)
"RTN","RMPR29W1",24,0)
 .S STS=$P(^RMPR(668,RMPRA,0),U,10)
"RTN","RMPR29W1",25,0)
 .;Q:STS'["P"
"RTN","RMPR29W1",26,0)
 .S DFN=$P(^RMPR(668,RMPRA,0),U,2)
"RTN","RMPR29W1",27,0)
 .D DEM^VADPT
"RTN","RMPR29W1",28,0)
 .S SSNEN=$E($P(VADM(2),"^",2),10,11)
"RTN","RMPR29W1",29,0)
 .K SSNEN,VADM
"RTN","RMPR29W1",30,0)
 .D REC
"RTN","RMPR29W1",31,0)
 G EXIT
"RTN","RMPR29W1",32,0)
 Q
"RTN","RMPR29W1",33,0)
 K CDAY,DNT,DATE,DFN,LINKED,PPD,PPDAY,RMPRAON,RMPRHCSN,RMPRII,RMPRMI
"RTN","RMPR29W1",34,0)
 K RMPRPCE,RMPRPCI,RMPRPHCE,RMPRPHCI,RMPRTC,RMPRTTE,RMPRTTI,RMPRUI
"RTN","RMPR29W1",35,0)
 K RMPRUIE,RRX,STN,STNX,STS,VALMCNT,WO66410,WRKDAY
"RTN","RMPR29W1",36,0)
REC ;records to grid
"RTN","RMPR29W1",37,0)
 ;stop date, init action date
"RTN","RMPR29W1",38,0)
 ;check ien, patch 77
"RTN","RMPR29W1",39,0)
 ;
"RTN","RMPR29W1",40,0)
 ;Q:$D(^TMP($J,RMPRA))
"RTN","RMPR29W1",41,0)
 ;
"RTN","RMPR29W1",42,0)
 N DIC,DIQ,DR,STOPDT
"RTN","RMPR29W1",43,0)
 ;S DA=RMPRA
"RTN","RMPR29W1",44,0)
 ;S DIC=668,DIQ="RE",DR=10,DIQ(0)="EN" D EN^DIQ1
"RTN","RMPR29W1",45,0)
 S STOPDT=$P($G(^RMPR(668,RMPRA,0)),U,9),STOPDT=$$DAT2^RMPRUTL1(STOPDT)
"RTN","RMPR29W1",46,0)
 S CDATE=$P(^RMPR(668,RMPRA,0),U,1),CDATE=$$DAT2^RMPRUTL1(CDATE)
"RTN","RMPR29W1",47,0)
 S DFN=$P(^RMPR(668,RMPRA,0),U,2) Q:DFN=""
"RTN","RMPR29W1",48,0)
 N VA,VADM
"RTN","RMPR29W1",49,0)
 D DEM^VADPT
"RTN","RMPR29W1",50,0)
 S WHO=VADM(1)
"RTN","RMPR29W1",51,0)
 S SSN=VADM(2)
"RTN","RMPR29W1",52,0)
 D KVAR^VADPT
"RTN","RMPR29W1",53,0)
 ;type
"RTN","RMPR29W1",54,0)
 S TYPE=$$TYPE^RMPREOU(RMPRA,8)
"RTN","RMPR29W1",55,0)
 Q:TYPE'["LAB"
"RTN","RMPR29W1",56,0)
 ;W !,"AFTER",RMPRA,"   ",WO66410
"RTN","RMPR29W1",57,0)
 ;display description if manual
"RTN","RMPR29W1",58,0)
 S DES=$$DES^RMPREOU(RMPRA,22)
"RTN","RMPR29W1",59,0)
 S DES=$TR(DES,"^","*")
"RTN","RMPR29W1",60,0)
 S DES=$TR(DES,"""","'")
"RTN","RMPR29W1",61,0)
 ;init action date
"RTN","RMPR29W1",62,0)
 S ADATE="",PDAY="",WRKDAY=""
"RTN","RMPR29W1",63,0)
 S ADATE=$P(^RMPR(668,RMPRA,0),U,9)
"RTN","RMPR29W1",64,0)
 ;PPD=1 for previous pending
"RTN","RMPR29W1",65,0)
 I ADATE'="" S CDAY=$$PDAY^RMPREOU(RMPRA)
"RTN","RMPR29W1",66,0)
 ;
"RTN","RMPR29W1",67,0)
 S STATUS=$$STATUS^RMPREOU(RMPRA)
"RTN","RMPR29W1",68,0)
 I STATUS["PENDING" D
"RTN","RMPR29W1",69,0)
 .I ADATE'=""&(ADATE<DATE) S PPD=1
"RTN","RMPR29W1",70,0)
 .S PPDAY=$$PWRKDAY^RMPREOU(RMPRA)
"RTN","RMPR29W1",71,0)
 S LINKED=$P($G(^RMPR(668,RMPRA,10,0)),U,4)
"RTN","RMPR29W1",72,0)
 I LINKED="" S LINKED=0
"RTN","RMPR29W1",73,0)
 ;
"RTN","RMPR29W1",74,0)
 ;Get Work Order Data and add to array
"RTN","RMPR29W1",75,0)
 S RMPRAON="" F  S RMPRAON=$O(^RMPR(664.1,RMPR6641,2,RMPRAON)) Q:RMPRAON=""  D
"RTN","RMPR29W1",76,0)
 . Q:'$D(^RMPR(664.1,RMPR6641,2,RMPRAON,0))
"RTN","RMPR29W1",77,0)
 . ;Change to send only item 1
"RTN","RMPR29W1",78,0)
 . ;Q:RMPRAON>1
"RTN","RMPR29W1",79,0)
 . S CNT=CNT+1
"RTN","RMPR29W1",80,0)
 . S RMPRII=^RMPR(664.1,RMPR6641,2,RMPRAON,0)
"RTN","RMPR29W1",81,0)
 . ;S RMPR6642=$P(RMPRII,U,6)
"RTN","RMPR29W1",82,0)
 . ;Internal and external item
"RTN","RMPR29W1",83,0)
 . ;S RMPRSOI=$P(RMPRII,U),RMPRSOIE=$$EXTERNAL^DILFD(664.16,.01,"",RMPRSOI)
"RTN","RMPR29W1",84,0)
 . ;Chose to display 661.1 short description instead. left for PFU.
"RTN","RMPR29W1",85,0)
 . ;Internal/external unit of issue
"RTN","RMPR29W1",86,0)
 . S RMPRUI=$P(RMPRII,U,3),RMPRUIE=$$EXTERNAL^DILFD(664.16,3,"",RMPRUI)
"RTN","RMPR29W1",87,0)
 . ;Internal/external Type of Transaction
"RTN","RMPR29W1",88,0)
 . S RMPRTTI=$P(RMPRII,U,7),RMPRTTE=$$EXTERNAL^DILFD(664.16,8,"",RMPRTTI)
"RTN","RMPR29W1",89,0)
 . ;Internal/external patient category
"RTN","RMPR29W1",90,0)
 . S RMPRPCI=$P(RMPRII,U,8),RMPRPCE=$$EXTERNAL^DILFD(664.16,9,"",RMPRPCI)
"RTN","RMPR29W1",91,0)
 . ;Internal/External HCPCS
"RTN","RMPR29W1",92,0)
 . S RMPRPHCI=$P($G(^RMPR(664.1,RMPR6641,2,RMPRAON,2)),U,1),RMPRPHCE=$$EXTERNAL^DILFD(661.1,1,"",RMPRPHCI)
"RTN","RMPR29W1",93,0)
 . ;HCPCS SHORT NAME
"RTN","RMPR29W1",94,0)
 . I +RMPRPHCI>0 S RMPRHCSN=$P($G(^RMPR(661.1,RMPRPHCI,0)),U,2)
"RTN","RMPR29W1",95,0)
 . E  S RMPRHCSN="UNKNOWN HCPCS NAME"
"RTN","RMPR29W1",96,0)
 . ;Internal/External CPT Modifier
"RTN","RMPR29W1",97,0)
 . S RMPRMI=$P($G(^RMPR(664.1,RMPR6641,2,RMPRAON,2)),U,2)
"RTN","RMPR29W1",98,0)
 . S RMPRTC=$P(RMPRII,U,11)
"RTN","RMPR29W1",99,0)
 . S ^TMP($J,RMPRA,CNT)=0_U_RMPRAON_U_RMPRHCSN_U_$P(RMPRII,U,2)_U_RMPRUIE_U_$P(RMPRII,U,4)_U_$P(RMPRII,U,5)
"RTN","RMPR29W1",100,0)
 . S ^TMP($J,RMPRA,CNT)=^TMP($J,RMPRA,CNT)_U_$P(RMPRII,U,6)_U_RMPRTTE_U_RMPRPCE
"RTN","RMPR29W1",101,0)
 . S ^TMP($J,RMPRA,CNT)=^TMP($J,RMPRA,CNT)_U_RMPRPHCE_U_RMPRMI_U_RMPRTC
"RTN","RMPR29W1",102,0)
 K CDATE,WHO,SSN,TYPE,DES,PDAY,STATUS,ADATE
"RTN","RMPR29W1",103,0)
 ;PUT RESULTS IN GLOBAL!!
"RTN","RMPR29W1",104,0)
 Q
"RTN","RMPR29W1",105,0)
EXIT ;common exit point
"RTN","RMPR29W1",106,0)
 S RESULT=$NA(^TMP($J))
"RTN","RMPR29W1",107,0)
 Q
"RTN","RMPR29W2")
0^15^B6644737^n/a
"RTN","RMPR29W2",1,0)
RMPR29W2 ;HOIFO/SPS -  WORK ORDER MATERIAL GRID OWL PROGRAM ;11/8/05  07:12
"RTN","RMPR29W2",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29W2",3,0)
 ;
"RTN","RMPR29W2",4,0)
 ;
"RTN","RMPR29W2",5,0)
A1(RMPR6642) ;entry point for testing
"RTN","RMPR29W2",6,0)
 D A2
"RTN","RMPR29W2",7,0)
 Q
"RTN","RMPR29W2",8,0)
EN(RESULT,RMPR6642) ; -- Broker callback to get list to display
"RTN","RMPR29W2",9,0)
A2 N STRING,CLREND,COLUMN,ON,OFF
"RTN","RMPR29W2",10,0)
 S DATE=2010101
"RTN","RMPR29W2",11,0)
 ;S SITE="ALL",START=00,STOP=99
"RTN","RMPR29W2",12,0)
 K ^TMP($J)
"RTN","RMPR29W2",13,0)
 N RMPRA,CDATE,X
"RTN","RMPR29W2",14,0)
 S (CNT,VALMCNT)=0,RRX=""
"RTN","RMPR29W2",15,0)
 I '$D(^RMPR(664.2,RMPR6642,0)) Q
"RTN","RMPR29W2",16,0)
 D REC
"RTN","RMPR29W2",17,0)
 G EXIT
"RTN","RMPR29W2",18,0)
 Q
"RTN","RMPR29W2",19,0)
REC ;records to grid
"RTN","RMPR29W2",20,0)
 ;stop date, init action date
"RTN","RMPR29W2",21,0)
 ;check ien, patch 77
"RTN","RMPR29W2",22,0)
 ;
"RTN","RMPR29W2",23,0)
 ;
"RTN","RMPR29W2",24,0)
 N DIC,DIQ,DR,STOPDT
"RTN","RMPR29W2",25,0)
 ;
"RTN","RMPR29W2",26,0)
 ;Get Work Order Data and add to array
"RTN","RMPR29W2",27,0)
 S RMPRAON="" F  S RMPRAON=$O(^RMPR(664.2,RMPR6642,1,RMPRAON)) Q:RMPRAON=""  D
"RTN","RMPR29W2",28,0)
 . Q:'$D(^RMPR(664.2,RMPR6642,1,RMPRAON,0))
"RTN","RMPR29W2",29,0)
 . S CNT=CNT+1
"RTN","RMPR29W2",30,0)
 . S RMPRII=^RMPR(664.2,RMPR6642,1,RMPRAON,0)
"RTN","RMPR29W2",31,0)
 . ;Internal and external Material
"RTN","RMPR29W2",32,0)
 . S RMPRMI=$P(RMPRII,U),RMPRSME=$$EXTERNAL^DILFD(664.22,.01,"",RMPRMI)
"RTN","RMPR29W2",33,0)
 . ;Internal/external unit of issue
"RTN","RMPR29W2",34,0)
 . S RMPRUI=$P(RMPRII,U,7),RMPRUIE=$$EXTERNAL^DILFD(664.22,6,"",RMPRUI)
"RTN","RMPR29W2",35,0)
 . ;Internal/external Vendor
"RTN","RMPR29W2",36,0)
 . S RMPRVI=$P(RMPRII,U,6),RMPRVE=$$EXTERNAL^DILFD(664.22,5,"",RMPRVI)
"RTN","RMPR29W2",37,0)
 . ;Internal/external patient category
"RTN","RMPR29W2",38,0)
 . ;S RMPRPCI=$P(RMPRII,U,8),RMPRPCE=$$EXTERNAL^DILFD(664.16,9,"",RMPRPCI)
"RTN","RMPR29W2",39,0)
 . ;Internal/External HCPCS
"RTN","RMPR29W2",40,0)
 . ;S RMPRPHCI=$P($G(^RMPR(664.1,RMPR6641,2,RMPRAON,2)),U,1),RMPRPHCE=$$EXTERNAL^DILFD(661.1,1,"",RMPRPHCI)
"RTN","RMPR29W2",41,0)
 . ;Internal/External CPT Modifier
"RTN","RMPR29W2",42,0)
 . ;S RMPRMI=$P($G(^RMPR(664.1,RMPR6641,2,RMPRAON,2)),U,2)
"RTN","RMPR29W2",43,0)
 . ;,RMPRPHCE=$$EXTERNAL^DILFD(81.3,"",RMPRME)
"RTN","RMPR29W2",44,0)
 . S ^TMP($J,"RMPRM",CNT)=0_U_RMPRAON_U_RMPRSME_U_$P(RMPRII,U,2)_U_$P(RMPRII,U,3)_U_$P(RMPRII,U,4)_U_RMPRVE_U_RMPRUIE
"RTN","RMPR29W2",45,0)
 . S ^TMP($J,"RMPRM",CNT)=^TMP($J,"RMPRM",CNT)_U_$P(RMPRII,U,8)_U_$P(RMPRII,U,11)_U_$P(RMPRII,U,12)
"RTN","RMPR29W2",46,0)
 K CDATE,WHO,SSN,TYPE,DES,PDAY,STATUS,ADATE
"RTN","RMPR29W2",47,0)
 ;PUT RESULTS IN GLOBAL!!
"RTN","RMPR29W2",48,0)
 Q
"RTN","RMPR29W2",49,0)
 K DNT,DATE,RMPRAON,RMPRII,RMPRMI,RMPRSME,RMPRUI,RMPRUIE,RMPRVE,RMPRVI,RRX,VALMCNT
"RTN","RMPR29W2",50,0)
EXIT ;common exit point
"RTN","RMPR29W2",51,0)
 S RESULT=$NA(^TMP($J))
"RTN","RMPR29W2",52,0)
 Q
"RTN","RMPR29WO")
0^16^B18989581^n/a
"RTN","RMPR29WO",1,0)
RMPR29WO ;HOIFO/SPS -  WORK ORDER GRID OWL PROGRAM ;11/8/05  07:12
"RTN","RMPR29WO",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR29WO",3,0)
 ;
"RTN","RMPR29WO",4,0)
 ;SORT - STATUS OF 664.1, if CA change to X to check.
"RTN","RMPR29WO",5,0)
 ;
"RTN","RMPR29WO",6,0)
A1(SORT) ;entry point for testing
"RTN","RMPR29WO",7,0)
 D A2
"RTN","RMPR29WO",8,0)
 Q
"RTN","RMPR29WO",9,0)
EN(RESULT,SORT) ; -- Broker callback to get list to display
"RTN","RMPR29WO",10,0)
A2 N STRING,CLREND,COLUMN,ON,OFF
"RTN","RMPR29WO",11,0)
 S DATE=2010101
"RTN","RMPR29WO",12,0)
 S SITE="ALL",START=00,STOP=99
"RTN","RMPR29WO",13,0)
 K ^TMP($J)
"RTN","RMPR29WO",14,0)
 N RMPRA,CDATE,X
"RTN","RMPR29WO",15,0)
 K ADATE,PDAY,RMPRCD
"RTN","RMPR29WO",16,0)
 S (CNT,VALMCNT)=0,(RMPR6641,RRX)=""
"RTN","RMPR29WO",17,0)
 F  S RMPR6641=$O(^RMPR(664.1,RMPR6641)) Q:RMPR6641=""  D
"RTN","RMPR29WO",18,0)
 .I '$D(^RMPR(664.1,RMPR6641,0)) Q
"RTN","RMPR29WO",19,0)
 .I $P(^RMPR(664.1,RMPR6641,0),U,13)="" Q
"RTN","RMPR29WO",20,0)
 .S WO66410=^RMPR(664.1,RMPR6641,0)
"RTN","RMPR29WO",21,0)
 .S RMSTS=$P(WO66410,U,17)
"RTN","RMPR29WO",22,0)
 .I RMSTS="CA" S RMSTS="X"
"RTN","RMPR29WO",23,0)
 .I SORT'[RMSTS Q
"RTN","RMPR29WO",24,0)
 .I RMSTS="X" S RMSTS="CA"
"RTN","RMPR29WO",25,0)
 .S RMSTS=$$EXTERNAL^DILFD(664.1,16,"",RMSTS)
"RTN","RMPR29WO",26,0)
 .S RMRDTI=$P(WO66410,U,9)
"RTN","RMPR29WO",27,0)
 .S RMPRA=$P(WO66410,U,8) Q:RMPRA'>0  D
"RTN","RMPR29WO",28,0)
 ..S STN=$P(^RMPR(668,RMPRA,0),U,7)
"RTN","RMPR29WO",29,0)
 ..S STNX=$$STATN^RMPRUTIL(STN)
"RTN","RMPR29WO",30,0)
 ..;ssn range filter
"RTN","RMPR29WO",31,0)
 ..S DFN=$P(^RMPR(668,RMPRA,0),U,2)
"RTN","RMPR29WO",32,0)
 ..D DEM^VADPT
"RTN","RMPR29WO",33,0)
 ..S SSNEN=$E($P(VADM(2),"^",2),10,11)
"RTN","RMPR29WO",34,0)
 ..I SSNEN>STOP Q
"RTN","RMPR29WO",35,0)
 ..I SSNEN<START Q
"RTN","RMPR29WO",36,0)
 ..K SSNEN,VADM
"RTN","RMPR29WO",37,0)
 ..D REC
"RTN","RMPR29WO",38,0)
 S I=""
"RTN","RMPR29WO",39,0)
 F  S I=$O(^TMP($J,I)) Q:I'>0  D
"RTN","RMPR29WO",40,0)
 .Q:'$D(^TMP($J,I))
"RTN","RMPR29WO",41,0)
 .S ^TMP($J,"RMPRWO",CNT)=^TMP($J,I)
"RTN","RMPR29WO",42,0)
 .S CNT=CNT-1
"RTN","RMPR29WO",43,0)
 G EXIT
"RTN","RMPR29WO",44,0)
 Q
"RTN","RMPR29WO",45,0)
REC ;records to grid
"RTN","RMPR29WO",46,0)
 ;stop date, init action date
"RTN","RMPR29WO",47,0)
 ;check ien, patch 77
"RTN","RMPR29WO",48,0)
 ;
"RTN","RMPR29WO",49,0)
 N DIC,DIQ,DR,STOPDT
"RTN","RMPR29WO",50,0)
 S STOPDT=$P($G(^RMPR(668,RMPRA,0)),U,9),STOPDT=$$DAT2^RMPRUTL1(STOPDT)
"RTN","RMPR29WO",51,0)
 I $D(RMRDTI) S RMRDTE=$$DAT2^RMPRUTL1(RMRDTI)
"RTN","RMPR29WO",52,0)
 S CDATE=$P(^RMPR(668,RMPRA,0),U,1),CDATE=$$DAT2^RMPRUTL1(CDATE)
"RTN","RMPR29WO",53,0)
 S WDATE=$P(^RMPR(664.1,RMPR6641,0),U,1),WDATE=$$DAT2^RMPRUTL1(WDATE)
"RTN","RMPR29WO",54,0)
 S RMWDTI=$P(^RMPR(664.1,RMPR6641,0),U,1)
"RTN","RMPR29WO",55,0)
 S DFN=$P(^RMPR(668,RMPRA,0),U,2) Q:DFN=""
"RTN","RMPR29WO",56,0)
 N VA,VADM
"RTN","RMPR29WO",57,0)
 D DEM^VADPT
"RTN","RMPR29WO",58,0)
 S WHO=VADM(1)
"RTN","RMPR29WO",59,0)
 S SSN=VADM(2)
"RTN","RMPR29WO",60,0)
 D KVAR^VADPT
"RTN","RMPR29WO",61,0)
 ;type
"RTN","RMPR29WO",62,0)
 S TYPE=$$TYPE^RMPREOU(RMPRA,8)
"RTN","RMPR29WO",63,0)
 Q:TYPE'["LAB"
"RTN","RMPR29WO",64,0)
 S CNT=CNT+1
"RTN","RMPR29WO",65,0)
 ;display description if manual
"RTN","RMPR29WO",66,0)
 S DES=$$DES^RMPREOU(RMPRA,22)
"RTN","RMPR29WO",67,0)
 S DES=$TR(DES,"^","*")
"RTN","RMPR29WO",68,0)
 S DES=$TR(DES,"""","'")
"RTN","RMPR29WO",69,0)
 ;init action date
"RTN","RMPR29WO",70,0)
 S ADATE="",PDAY="",WRKDAY=""
"RTN","RMPR29WO",71,0)
 S ADATE=$P(^RMPR(668,RMPRA,0),U,9)
"RTN","RMPR29WO",72,0)
 ;PPD=1 for previous pending
"RTN","RMPR29WO",73,0)
 I ADATE'="" S CDAY=$$PDAY^RMPREOU(RMPRA)
"RTN","RMPR29WO",74,0)
 ;
"RTN","RMPR29WO",75,0)
 S LINKED=$P($G(^RMPR(668,RMPRA,10,0)),U,4)
"RTN","RMPR29WO",76,0)
 I LINKED="" S LINKED=0
"RTN","RMPR29WO",77,0)
 ;
"RTN","RMPR29WO",78,0)
 ; Note for list the Variable SSN is in the format NNNNNNNNN^NNN-NN-NNNN
"RTN","RMPR29WO",79,0)
 ; Thus making up 2 pieces of the data string below.
"RTN","RMPR29WO",80,0)
 S ^TMP($J,RMPR6641)=CDATE_U_DFN_U_WHO_U_SSN_U_TYPE_U_DES
"RTN","RMPR29WO",81,0)
 S ^TMP($J,RMPR6641)=^TMP($J,RMPR6641)_U_RMSTS_U_RMPRA_U_RMPR6641
"RTN","RMPR29WO",82,0)
 ;Get Work Order Data and add to array
"RTN","RMPR29WO",83,0)
 S RMPRPHCI=$P($G(^RMPR(664.1,RMPR6641,2,1,0)),U,1),RMPRPHCE=$$EXTERNAL^DILFD(661.1,1,"",RMPRPHCI)
"RTN","RMPR29WO",84,0)
 S RMPRWN=$P(WO66410,U,13)
"RTN","RMPR29WO",85,0)
 S RMPRROFF=$$EXTERNAL^DILFD(664.1,13,"",$P(WO66410,U,5))
"RTN","RMPR29WO",86,0)
 S RMPRTECH=$$EXTERNAL^DILFD(664.1,13,"",$P(WO66410,U,16))
"RTN","RMPR29WO",87,0)
 S RMPRSOPI=$P(WO66410,U,11),RMPRSOPE=$$EXTERNAL^DILFD(664.1,2,"",RMPRSOPI)
"RTN","RMPR29WO",88,0)
 S RMNPPDSI=$P(WO66410,U,3),RMNPPDSE=$$EXTERNAL^DILFD(664.1,.03,"",RMNPPDSI),RMNPPDSN=$$STATN^RMPRUTIL(RMNPPDSI)
"RTN","RMPR29WO",89,0)
 S RMPRSITE=$O(^RMPR(669.9,"C",RMNPPDSI,0))
"RTN","RMPR29WO",90,0)
 S RMREQSTI=$P(WO66410,U,4),RMREQSTE=$$EXTERNAL^DILFD(664.1,.04,"",RMREQSTI),RMREQSTN=$$STATN^RMPRUTIL(RMREQSTI)
"RTN","RMPR29WO",91,0)
 S RMRECSTI=$P(WO66410,U,15),RMRECSTE=$$EXTERNAL^DILFD(664.1,.11,"",RMRECSTI),RMRECSTN=$$STATN^RMPRUTIL(RMRECSTI)
"RTN","RMPR29WO",92,0)
 S ^TMP($J,RMPR6641)=^TMP($J,RMPR6641)_U_RMPRPHCE_U_RMPRWN_U_RMPRROFF_U_RMPRTECH_U_RMPRSOPE_U_RMNPPDSN_U_RMNPPDSE_U_RMREQSTN_U_RMREQSTE_U_RMRECSTN_U_RMRECSTE_U_RMPRSITE_U_WDATE_U_RMRDTE
"RTN","RMPR29WO",93,0)
 K CDATE,WHO,SSN,TYPE,DES,PDAY,STATUS,ADATE,RMRDTE
"RTN","RMPR29WO",94,0)
 ;PUT RESULTS IN GLOBAL!!
"RTN","RMPR29WO",95,0)
 Q
"RTN","RMPR29WO",96,0)
 K CDAY,CNT,DATE,DFN,I,LINKED,RMNPPDSE,RMNPPDSI,RMNPPDSN,RMPR6641
"RTN","RMPR29WO",97,0)
 K RMPRPHCE,RMPRPHCI,RMPRROFF,RMPRSITE,RMPRSOPE,RMPRSOPI,RMPRTECH
"RTN","RMPR29WO",98,0)
 K RMPRWN,RMPRDTI,RMRECSTE,RMRECSTI,RMRECSTN,RMREQSTE,RMREQSTI
"RTN","RMPR29WO",99,0)
 K RMREQSTN,RMSTS,RMWDTI,RRX,SITE,START,STN,STNX,STOP,VALMCNT,WDATE,WO66410,WRKDAY
"RTN","RMPR29WO",100,0)
EXIT ;common exit point
"RTN","RMPR29WO",101,0)
 S RESULT=$NA(^TMP($J,"RMPRWO"))
"RTN","RMPR29WO",102,0)
 Q
"RTN","RMPR8PG")
0^18^B6481133^B5769823
"RTN","RMPR8PG",1,0)
RMPR8PG ;PHX,HOIFO/JLT,SPS-PURGE 668 SUSPENSE FILE ;8/29/1994
"RTN","RMPR8PG",2,0)
 ;;3.0;PROSTHETICS;**5,75**;Feb 09, 1996;Build 25
"RTN","RMPR8PG",3,0)
 ;
"RTN","RMPR8PG",4,0)
 ;02/03/06 Added code to delete the pointer in 664.1 field .05 when a 
"RTN","RMPR8PG",5,0)
 ;record is purged.
"RTN","RMPR8PG",6,0)
 ;
"RTN","RMPR8PG",7,0)
EN D DIV4^RMPRSIT Q:$D(X)
"RTN","RMPR8PG",8,0)
EN2 K %ZIS,IOP,ZTIO S %ZIS="MQ",%ZIS("B")="" D ^%ZIS G:POP END
"RTN","RMPR8PG",9,0)
 ;I IOST["C-" W !,$C(7),"YOU MAY NOT SELECT YOUR TERMINAL" G EN2
"RTN","RMPR8PG",10,0)
 I $D(IO("Q")) S ZTRTN="EN1^RMPR8PG",ZTDESC="PURGE 668 SUSPENSE FILE" F RD="I","RMPRIEN","RMPRDT","ION","RMPR(","RMPRSITE" S ZTSAVE(RD)=""
"RTN","RMPR8PG",11,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"<REQUEST QUEUED!>" G EXIT
"RTN","RMPR8PG",12,0)
EN1 S (I,RMPRIEN,RDEL)=0,RMPRDT=$P(^RMPR(669.9,RMPRSITE,0),U,8) G:RMPRDT'>89 END
"RTN","RMPR8PG",13,0)
 S X1=DT,X2=-RMPRDT D C^%DTC S RMPRDT=X I RMPRDT<$O(^RMPR(668,"B",""))!('$O(^RMPR(668,0))) G END
"RTN","RMPR8PG",14,0)
 S DIS(0)="I $P(^RMPR(668,D0,0),U,7)=RMPR(""STA"")",IOP=ION,DIC="^RMPR(668,",FLDS=".01;C1,1;C20;L17,2,3,6;C45;L15,5;C65,4;C1,7;C1",BY="5",FR=$S($D(^RMPR(668,"B")):$O(^RMPR(668,"B","")),1:2890101)
"RTN","RMPR8PG",15,0)
 S TO=RMPRDT,DHD="Purge Suspense File Entries from Station/Division "_RMPR("STA") D EN1^DIP
"RTN","RMPR8PG",16,0)
 F  S RMPRIEN=$O(^RMPR(668,RMPRIEN)) Q:RMPRIEN'>0  I $P($G(^RMPR(668,RMPRIEN,0)),U,7)=RMPR("STA") I ($P(^RMPR(668,RMPRIEN,0),U,5))&($P(^(0),U,5)<RMPRDT) S DA=RMPRIEN,DIC="^RMPR(668," S DA=RMPRIEN,DIK=DIC D ^DIK D  S RDEL=RDEL+1
"RTN","RMPR8PG",17,0)
 . F  S RMPR6641=$O(^RMPR(664.1,"SUS",DA,RMPR6641)) Q:RMPR6641'>0  D
"RTN","RMPR8PG",18,0)
 .. I $D(^RMPR(664.1,RMPR6641,0)) S $P(^(0),U,8)=""
"RTN","RMPR8PG",19,0)
END I $G(RDEL)<1 W !!,"No Suspense entries purged."
"RTN","RMPR8PG",20,0)
 I $G(RDEL)>1 W !!,RDEL," Suspense entries purged."
"RTN","RMPR8PG",21,0)
 I $G(RDEL)=1 W !!,RDEL,"Suspense entry purged. "
"RTN","RMPR8PG",22,0)
EXIT ;common exit point
"RTN","RMPR8PG",23,0)
 K I,RD,X,DIS,%ZIS,X1,X2,RMPRIEN,RMPRDT,RDEL,DIC,DIK,DA,RL,BY,DHD,DHIT,FLDS,FR,TO D ^%ZISC Q
"RTN","RMPR9CPP")
0^4^B1419829^n/a
"RTN","RMPR9CPP",1,0)
RMPR9CPP ;HOIFO/SPS - CHECK IF PATIENT IN FILE 665  ;JAN 2003
"RTN","RMPR9CPP",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR9CPP",3,0)
 ;
"RTN","RMPR9CPP",4,0)
 Q
"RTN","RMPR9CPP",5,0)
B1(RMPRDFN) G B2
"RTN","RMPR9CPP",6,0)
EN1(RESULTS,RMPRDFN) ;broker entry point
"RTN","RMPR9CPP",7,0)
B2 ;
"RTN","RMPR9CPP",8,0)
 ;S RMPRDFN=$P(^RMPR(668,RMPR668,0),U,2)
"RTN","RMPR9CPP",9,0)
 I '$D(^RMPR(665,RMPRDFN,0)) S RESULTS(0)="1^Patient not defined in PROSTHETICS PATIENT FILE please use the option: AP     Add/Edit Patient to Prosthetics and try again." Q
"RTN","RMPR9CPP",10,0)
 E  S RESULTS(0)=0
"RTN","RMPR9CPP",11,0)
 Q
"RTN","RMPR9CPP",12,0)
 ;END
"RTN","RMPR9LN1")
0^20^B7935718^B7433014
"RTN","RMPR9LN1",1,0)
RMPR9LN1 ;HOIFO/HNC -  FLEX FIELD SORT;9/18/02 11:38
"RTN","RMPR9LN1",2,0)
 ;;3.0;PROSTHETICS;**90,75**;Feb 09, 1996;Build 25
"RTN","RMPR9LN1",3,0)
 ;SPS - Patch 75 added fields 72.5 and 81 to list.
"RTN","RMPR9LN1",4,0)
EN(RESULT) ;
"RTN","RMPR9LN1",5,0)
 ;RESULT passed to broker in ^TMP($J,
"RTN","RMPR9LN1",6,0)
 ;delimited by "^"
"RTN","RMPR9LN1",7,0)
 K ^TMP($J)
"RTN","RMPR9LN1",8,0)
 N RMPRII,RMPRLN
"RTN","RMPR9LN1",9,0)
 S CNT=0
"RTN","RMPR9LN1",10,0)
 F RMPRII=1:1 S RMPRLN=$P($T(HLST+RMPRII),";",4) Q:RMPRLN=""  D
"RTN","RMPR9LN1",11,0)
 .S RMPRFLD=$P($T(HLST+RMPRII),";",3)
"RTN","RMPR9LN1",12,0)
 .S CNT=CNT+1
"RTN","RMPR9LN1",13,0)
 .S ^TMP($J,"RMPR",CNT)=RMPRLN_U_RMPRFLD
"RTN","RMPR9LN1",14,0)
 S RESULT=$NA(^TMP($J))
"RTN","RMPR9LN1",15,0)
 Q
"RTN","RMPR9LN1",16,0)
HLST ;pick list
"RTN","RMPR9LN1",17,0)
 ;;0;*** COMMON/PURCHASING ***
"RTN","RMPR9LN1",18,0)
 ;;1;Date Item Added To PO
"RTN","RMPR9LN1",19,0)
 ;;2;Type Of Transaction
"RTN","RMPR9LN1",20,0)
 ;;4;Billing Item
"RTN","RMPR9LN1",21,0)
 ;;10;Delivery Date
"RTN","RMPR9LN1",22,0)
 ;;11;Form
"RTN","RMPR9LN1",23,0)
 ;;12;Souce
"RTN","RMPR9LN1",24,0)
 ;;14;Total Cost
"RTN","RMPR9LN1",25,0)
 ;;16;Remarks
"RTN","RMPR9LN1",26,0)
 ;;23;Transaction Number or PO Number
"RTN","RMPR9LN1",27,0)
 ;;24;Brief Description
"RTN","RMPR9LN1",28,0)
 ;;25;Deliver To
"RTN","RMPR9LN1",29,0)
 ;;27;Initiator
"RTN","RMPR9LN1",30,0)
 ;;38.1;Exclude/Waiver
"RTN","RMPR9LN1",31,0)
 ;;38.7;Contract #
"RTN","RMPR9LN1",32,0)
 ;;62;Patient Category
"RTN","RMPR9LN1",33,0)
 ;;63;Special Category
"RTN","RMPR9LN1",34,0)
 ;;78;Unit Of Issue
"RTN","RMPR9LN1",35,0)
 ;;89;Saved Item Description
"RTN","RMPR9LN1",36,0)
 ;;0;*** INVENTORY ***
"RTN","RMPR9LN1",37,0)
 ;;4.6;Stock Issue Date
"RTN","RMPR9LN1",38,0)
 ;;37;PIP Item Description
"RTN","RMPR9LN1",39,0)
 ;;38;HCPCS PIP Description
"RTN","RMPR9LN1",40,0)
 ;;0;*** PRODUCT INFORMATION ***
"RTN","RMPR9LN1",41,0)
 ;;4.9;Coding Error Flag
"RTN","RMPR9LN1",42,0)
 ;;4.91;Coding Flag Date
"RTN","RMPR9LN1",43,0)
 ;;8.12;PCE
"RTN","RMPR9LN1",44,0)
 ;;8.13;PCE Date
"RTN","RMPR9LN1",45,0)
 ;;9;Serial Number
"RTN","RMPR9LN1",46,0)
 ;;9.1;Product Description
"RTN","RMPR9LN1",47,0)
 ;;9.2;Product Model
"RTN","RMPR9LN1",48,0)
 ;;21;Lot Number
"RTN","RMPR9LN1",49,0)
 ;;35;Who Edit 2319
"RTN","RMPR9LN1",50,0)
 ;;36;Date of Edit 2319
"RTN","RMPR9LN1",51,0)
 ;;0;*** SUSPENSE ***
"RTN","RMPR9LN1",52,0)
 ;;8.1;Suspense Date
"RTN","RMPR9LN1",53,0)
 ;;8.11;Suspense Station
"RTN","RMPR9LN1",54,0)
 ;;8.14;Suspense Status
"RTN","RMPR9LN1",55,0)
 ;;8.2;Date RX Written
"RTN","RMPR9LN1",56,0)
 ;;8.3;Initial Action Date
"RTN","RMPR9LN1",57,0)
 ;;8.4;Completion Date
"RTN","RMPR9LN1",58,0)
 ;;8.5;Type of Request
"RTN","RMPR9LN1",59,0)
 ;;8.6;Suspense Requestor
"RTN","RMPR9LN1",60,0)
 ;;8.61;Consult Request Service
"RTN","RMPR9LN1",61,0)
 ;;8.7;Provisional Diagnosis
"RTN","RMPR9LN1",62,0)
 ;;8.8;Suspense ICD9
"RTN","RMPR9LN1",63,0)
 ;;8.9;Consult Date
"RTN","RMPR9LN1",64,0)
 ;;0;*** RETURNED ITEMS ***
"RTN","RMPR9LN1",65,0)
 ;;13;Action
"RTN","RMPR9LN1",66,0)
 ;;17;Returned Status
"RTN","RMPR9LN1",67,0)
 ;;17.5;Retruned Status Date
"RTN","RMPR9LN1",68,0)
 ;;0;*** ORTHO LAB ***
"RTN","RMPR9LN1",69,0)
 ;;40;Lab Requesting Station
"RTN","RMPR9LN1",70,0)
 ;;45;Total Lab Labor Hours
"RTN","RMPR9LN1",71,0)
 ;;46;Total Lab Labor Cost
"RTN","RMPR9LN1",72,0)
 ;;47;Total Lab Material Cost
"RTN","RMPR9LN1",73,0)
 ;;48;Total Lab Cost
"RTN","RMPR9LN1",74,0)
 ;;50;Lab Completion Date
"RTN","RMPR9LN1",75,0)
 ;;51;Lab Remarks
"RTN","RMPR9LN1",76,0)
 ;;69;Source of Procurement
"RTN","RMPR9LN1",77,0)
 ;;70;Receiving Station
"RTN","RMPR9LN1",78,0)
 ;;71;Work Order Number
"RTN","RMPR9LN1",79,0)
 ;;72;2529-3 Date
"RTN","RMPR9LN1",80,0)
 ;;4.92;HIGH TECH ITEM
"RTN","RMPR9LN1",81,0)
 ;;72.5;FREE TEXT WO #
"RTN","RMPR9LN1",82,0)
 ;;80;Lab Work for Other Station
"RTN","RMPR9LN1",83,0)
 ;;81;NO ADMIN COUNT
"RTN","RMPR9LN1",84,0)
 ;END
"RTN","RMPR9LNP")
0^7^B10235375^B7775450
"RTN","RMPR9LNP",1,0)
RMPR9LNP ;Hines OIFO/HNC - REMOTE PROCEDURE, LIST NPPD DATA ;9/8/03  07:23
"RTN","RMPR9LNP",2,0)
 ;;3.0;PROSTHETICS;**71,77,90,75**;Feb 09, 1996;Build 25
"RTN","RMPR9LNP",3,0)
 ;
"RTN","RMPR9LNP",4,0)
 ;    HNC - Sept 2, 2003 - patch 77 remove the " for Excel CSV
"RTN","RMPR9LNP",5,0)
 ;    HNC - Feb 14, 2005 - patch 90 add flex field to GUI display
"RTN","RMPR9LNP",6,0)
 ;    HNC - Nov 15, 2005 - patch 75 add 2 additional flex field to gui
"RTN","RMPR9LNP",7,0)
 ;
"RTN","RMPR9LNP",8,0)
 ;RESULTS passed to broker in ^TMP($J,
"RTN","RMPR9LNP",9,0)
 ;delimited by "^"
"RTN","RMPR9LNP",10,0)
 ;piece 1 = ENTRY DATE
"RTN","RMPR9LNP",11,0)
 ;piece 2 = PATIENT NAME
"RTN","RMPR9LNP",12,0)
 ;piece 3 = PSAS HCPCS with * if hcpcs has Calculation Flag
"RTN","RMPR9LNP",13,0)
 ;piece 4 = QTY
"RTN","RMPR9LNP",14,0)
 ;piece 5 = VENDOR
"RTN","RMPR9LNP",15,0)
 ;piece 6 = INITIAL ACTION DATE
"RTN","RMPR9LNP",16,0)
 ;piece 7 = TOTAL COST
"RTN","RMPR9LNP",17,0)
 ;piece 8 = DESCRIPTION
"RTN","RMPR9LNP",18,0)
 ;piece 9 = INITIATOR
"RTN","RMPR9LNP",19,0)
 ;piece 10 = NPPD LINE BEFORE GROUPER
"RTN","RMPR9LNP",20,0)
 ;piece 11 = STATION
"RTN","RMPR9LNP",21,0)
 ;piece 12 = GROUPER NUMBER
"RTN","RMPR9LNP",22,0)
 ;piece 13 = FORM REQUESTED ON
"RTN","RMPR9LNP",23,0)
 ;piece 14 = TYPE OF TRANSACTION
"RTN","RMPR9LNP",24,0)
 ;piece 15 = SSN
"RTN","RMPR9LNP",25,0)
 ;piece 16 = IEN TO FILE 660
"RTN","RMPR9LNP",26,0)
 ;piece 17 = HCPCS SHORT DESCRIPTION
"RTN","RMPR9LNP",27,0)
 ;piece 18 = SOURCE
"RTN","RMPR9LNP",28,0)
 ;piece 19 = Optional Flex Field
"RTN","RMPR9LNP",29,0)
 ;piece 20 = Optional Flex Field
"RTN","RMPR9LNP",30,0)
 ;piece 21 = Optional Flex Field
"RTN","RMPR9LNP",31,0)
 Q
"RTN","RMPR9LNP",32,0)
 ;
"RTN","RMPR9LNP",33,0)
EN(RESULT,DATE1,DATE2,FLEXF,FLEX2,FLEX3) ;broker entry point
"RTN","RMPR9LNP",34,0)
 ;
"RTN","RMPR9LNP",35,0)
 K ^TMP($J)
"RTN","RMPR9LNP",36,0)
 I '$D(DATE1)!('$D(DATE2)) G EXIT
"RTN","RMPR9LNP",37,0)
 S DATE=DATE1-1
"RTN","RMPR9LNP",38,0)
 F  S DATE=$O(^RMPR(660,"B",DATE)) Q:(DATE="")!($P(DATE,".",1)>DATE2)  D
"RTN","RMPR9LNP",39,0)
 .S RMPRB=0
"RTN","RMPR9LNP",40,0)
 .F  S RMPRB=$O(^RMPR(660,"B",DATE,RMPRB)) Q:RMPRB=""  D
"RTN","RMPR9LNP",41,0)
 ..Q:$P(^RMPR(660,RMPRB,0),U,15)["*"
"RTN","RMPR9LNP",42,0)
 ..S PHCPCS=$P($G(^RMPR(660,RMPRB,1)),U,4)
"RTN","RMPR9LNP",43,0)
 ..Q:PHCPCS=""
"RTN","RMPR9LNP",44,0)
 ..Q:PHCPCS'>0
"RTN","RMPR9LNP",45,0)
 ..S HDES=$P(^RMPR(661.1,PHCPCS,0),U,2)
"RTN","RMPR9LNP",46,0)
 ..S TYPE=$P($G(^RMPR(660,RMPRB,0)),U,4)
"RTN","RMPR9LNP",47,0)
 ..I TYPE'="X" S LINE=$P(^RMPR(661.1,PHCPCS,0),U,7)
"RTN","RMPR9LNP",48,0)
 ..I TYPE="X" S LINE=$P(^RMPR(661.1,PHCPCS,0),U,6)
"RTN","RMPR9LNP",49,0)
 ..S CAL=$P(^RMPR(661.1,PHCPCS,0),U,8)
"RTN","RMPR9LNP",50,0)
 ..I CAL'="" S CAL="*"
"RTN","RMPR9LNP",51,0)
 ..S DFN=$P(^RMPR(660,RMPRB,0),U,2)
"RTN","RMPR9LNP",52,0)
 ..D DEM^VADPT
"RTN","RMPR9LNP",53,0)
 ..D DATA
"RTN","RMPR9LNP",54,0)
 S RESULT=$NA(^TMP($J))
"RTN","RMPR9LNP",55,0)
 K DATE,DFN,HDES,LINE,PHCPCS,RMPRB,RMPRFLD,TYPE,B
"RTN","RMPR9LNP",56,0)
 Q
"RTN","RMPR9LNP",57,0)
 ;
"RTN","RMPR9LNP",58,0)
DATA ;
"RTN","RMPR9LNP",59,0)
 S B=RMPRB
"RTN","RMPR9LNP",60,0)
 I FLEXF'="" S RMPRFLD=".01;.02;4.5;5;7;8;8.3;11;12;14;24;27;68;"_FLEXF
"RTN","RMPR9LNP",61,0)
 I FLEXF="" S RMPRFLD=".01;.02;4.5;5;7;8;8.3;11;12;14;24;27;68"
"RTN","RMPR9LNP",62,0)
 I FLEX2'="" S RMPRFLD=RMPRFLD_";"_FLEX2
"RTN","RMPR9LNP",63,0)
 I FLEX3'="" S RMPRFLD=RMPRFLD_";"_FLEX3
"RTN","RMPR9LNP",64,0)
 D GETS^DIQ(660,B,RMPRFLD,"","RMXM")
"RTN","RMPR9LNP",65,0)
 S $P(^TMP($J,B),U,1)=$G(RMXM(660,B_",",.01))
"RTN","RMPR9LNP",66,0)
 S $P(^TMP($J,B),U,2)=$G(RMXM(660,B_",",.02))
"RTN","RMPR9LNP",67,0)
 S $P(^TMP($J,B),U,3)=$G(RMXM(660,B_",",4.5))_CAL
"RTN","RMPR9LNP",68,0)
 S $P(^TMP($J,B),U,4)=$G(RMXM(660,B_",",5))
"RTN","RMPR9LNP",69,0)
 S $P(^TMP($J,B),U,5)=$G(RMXM(660,B_",",7))
"RTN","RMPR9LNP",70,0)
 S $P(^TMP($J,B),U,6)=$G(RMXM(660,B_",",8.3))
"RTN","RMPR9LNP",71,0)
 S $P(^TMP($J,B),U,7)=$G(RMXM(660,B_",",14))
"RTN","RMPR9LNP",72,0)
 ;patch 77 remove the " for Excel CSV
"RTN","RMPR9LNP",73,0)
 S $P(^TMP($J,B),U,8)=$TR($G(RMXM(660,B_",",24)),"""","'")
"RTN","RMPR9LNP",74,0)
 S $P(^TMP($J,B),U,9)=$G(RMXM(660,B_",",27))
"RTN","RMPR9LNP",75,0)
 S $P(^TMP($J,B),U,10)=LINE
"RTN","RMPR9LNP",76,0)
 S $P(^TMP($J,B),U,11)=$G(RMXM(660,B_",",8))
"RTN","RMPR9LNP",77,0)
 S $P(^TMP($J,B),U,12)=$G(RMXM(660,B_",",68))
"RTN","RMPR9LNP",78,0)
 S $P(^TMP($J,B),U,13)=$G(RMXM(660,B_",",11))
"RTN","RMPR9LNP",79,0)
 S $P(^TMP($J,B),U,14)=TYPE
"RTN","RMPR9LNP",80,0)
 S $P(^TMP($J,B),U,15)=$P(VADM(2),U,2)
"RTN","RMPR9LNP",81,0)
 S $P(^TMP($J,B),U,16)=B
"RTN","RMPR9LNP",82,0)
 S $P(^TMP($J,B),U,17)=HDES
"RTN","RMPR9LNP",83,0)
 S $P(^TMP($J,B),U,18)=$E($G(RMXM(660,B_",",12)),0,1)
"RTN","RMPR9LNP",84,0)
 I FLEXF'="" S $P(^TMP($J,B),U,19)=$G(RMXM(660,B_",",FLEXF))
"RTN","RMPR9LNP",85,0)
 I FLEXF="" S $P(^TMP($J,B),U,19)=""
"RTN","RMPR9LNP",86,0)
 I FLEX2'="" S $P(^TMP($J,B),U,20)=$G(RMXM(660,B_",",FLEX2))
"RTN","RMPR9LNP",87,0)
 I FLEX2="" S $P(^TMP($J,B),U,20)=""
"RTN","RMPR9LNP",88,0)
 I FLEX3'="" S $P(^TMP($J,B),U,21)=$G(RMXM(660,B_",",FLEX3))
"RTN","RMPR9LNP",89,0)
 I FLEX3="" S $P(^TMP($J,B),U,21)=""
"RTN","RMPR9LNP",90,0)
 K RMXM,VADM,CAL
"RTN","RMPR9LNP",91,0)
 Q
"RTN","RMPR9LNP",92,0)
EXIT ;common exit point
"RTN","RMPR9LNP",93,0)
 Q
"RTN","RMPR9LNP",94,0)
 ;END
"RTN","RMPR9PU")
0^10^B63675853^n/a
"RTN","RMPR9PU",1,0)
RMPR9PU ;HOIFO/HNC/SPS - PURCHASE ORDER CONROL PROCESSING-REMOTE PROCEDURE ;9/8/03  07:12
"RTN","RMPR9PU",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPR9PU",3,0)
 ;
"RTN","RMPR9PU",4,0)
 ;CLONED AND EDITED FROM RMPR9DO TO SEPERATE DELAYED ORDER REPORT
"RTN","RMPR9PU",5,0)
 ;
"RTN","RMPR9PU",6,0)
EN(RESULT,DUZ,START,STOP,SITE,SORT,DATE,RMPRPRSN) ; -- Broker callback to get list to display
"RTN","RMPR9PU",7,0)
 ;entry to send to PCM, WHAT=ALL or S for Summary Only
"RTN","RMPR9PU",8,0)
 ;RMPRPRSN=P for Purchasing D for Delayed Order Report
"RTN","RMPR9PU",9,0)
 S (WHO,RMPRSC)=""
"RTN","RMPR9PU",10,0)
 I RMPRPRSN="P" S RMPRSC=$O(^RMPR(669.9,"PA",DUZ,RMPRSC)) Q:(RMPRSC="")!(WHO'="")  D
"RTN","RMPR9PU",11,0)
 . I '$D(^RMPR(669.9,RMPRSC,0)) Q
"RTN","RMPR9PU",12,0)
 . I '$D(^RMPR(669.9,RMPRSC,5,"B",DUZ)) Q
"RTN","RMPR9PU",13,0)
 . S WHO=$O(^RMPR(669.9,RMPRSC,5,"B",DUZ,""))
"RTN","RMPR9PU",14,0)
 . I START="" S START=$P(^RMPR(669.9,RMPRSC,5,WHO,0),U,2)
"RTN","RMPR9PU",15,0)
 . I STOP="" S STOP=$P(^RMPR(669.9,RMPRSC,5,WHO,0),U,3)
"RTN","RMPR9PU",16,0)
A2 N STRING,CLREND,COLUMN,ON,OFF
"RTN","RMPR9PU",17,0)
 Q:SORT=""
"RTN","RMPR9PU",18,0)
 Q:DATE=""
"RTN","RMPR9PU",19,0)
 Q:START=""
"RTN","RMPR9PU",20,0)
 Q:STOP=""
"RTN","RMPR9PU",21,0)
 Q:SITE=""
"RTN","RMPR9PU",22,0)
 I SITE'="ALL" S SITE=$P(^RMPR(669.9,SITE,0),U,2)
"RTN","RMPR9PU",23,0)
 K ^TMP($J)
"RTN","RMPR9PU",24,0)
 N RMPRA,CDATE,X
"RTN","RMPR9PU",25,0)
 K ADATE,PDAY,RMPRCD
"RTN","RMPR9PU",26,0)
 S VALMCNT=0,RRX=""
"RTN","RMPR9PU",27,0)
 ;if sort for open or pending include all regardless of date
"RTN","RMPR9PU",28,0)
 ;if sort for cancelled or closed include from date passed forward
"RTN","RMPR9PU",29,0)
 ;
"RTN","RMPR9PU",30,0)
 ;PPD# status=pending before date, total days create to 1st action
"RTN","RMPR9PU",31,0)
 ;MHD# manual totals days create to 1st action
"RTN","RMPR9PU",32,0)
 ;CHD# consult totals days create to 1st action
"RTN","RMPR9PU",33,0)
 ;PPDD# status=pending before date, total days in pending state, 1st
"RTN","RMPR9PU",34,0)
 ;      action to current date
"RTN","RMPR9PU",35,0)
 ;
"RTN","RMPR9PU",36,0)
 S (LINE,MHD1,MHD2,MHD3,MHD4,MHD5,CHD1,CHD2,CHD3,CHD4,CHD5,CLNK,MLNK)=0
"RTN","RMPR9PU",37,0)
 S (PPDAY,PPD,PPD1,PPD2,PPD3,PPD4,PPD5)=0
"RTN","RMPR9PU",38,0)
 S (PPDDAY,PPDD1,PPDD2,PPDD3,PPDD4,PPDD5)=0
"RTN","RMPR9PU",39,0)
 I SORT["O"!(SORT["P") D ALL
"RTN","RMPR9PU",40,0)
 I SORT["C"!(SORT["X") D DTFWD
"RTN","RMPR9PU",41,0)
 S ^TMP($J,"A1")="^^^^^^^^"_MHD1_U_MHD2_U_MHD3_U_MHD4_U_MHD5_"^^^^"_MLNK_U_0
"RTN","RMPR9PU",42,0)
 S ^TMP($J,"A2")="^^^^^^^^"_CHD1_U_CHD2_U_CHD3_U_CHD4_U_CHD5_"^^^^"_CLNK_U_1
"RTN","RMPR9PU",43,0)
 S ^TMP($J,"A3")="^^^^^^^^"_PPDD1_U_PPDD2_U_PPDD3_U_PPDD4_U_PPDD5_"^^^^^"_2
"RTN","RMPR9PU",44,0)
 S ^TMP($J,"A4")="^^^^^^^^"_PPD1_U_PPD2_U_PPD3_U_PPD4_U_PPD5_"^^^^^"_3
"RTN","RMPR9PU",45,0)
 G EXIT
"RTN","RMPR9PU",46,0)
 Q
"RTN","RMPR9PU",47,0)
ALL ;all open pending records regardless of date passed
"RTN","RMPR9PU",48,0)
 S RMPRI1=0
"RTN","RMPR9PU",49,0)
 F RMPRI1=START:1:STOP D
"RTN","RMPR9PU",50,0)
 .I $L(RMPRI1)=1 S RMPRI=0_RMPRI1
"RTN","RMPR9PU",51,0)
 .E  S RMPRI=RMPRI1
"RTN","RMPR9PU",52,0)
 .S RMPRST=""
"RTN","RMPR9PU",53,0)
 .F  S RMPRST=$O(^RMPR(668,"L1",RMPRI,RMPRST)) Q:RMPRST=""  D
"RTN","RMPR9PU",54,0)
 . .Q:RMPRST="X"
"RTN","RMPR9PU",55,0)
 . .Q:RMPRST="C"
"RTN","RMPR9PU",56,0)
 . .I SORT'["P"&(RMPRST="P") Q
"RTN","RMPR9PU",57,0)
 . .S RMPRA=0
"RTN","RMPR9PU",58,0)
 . .F  S RMPRA=$O(^RMPR(668,"L1",RMPRI,RMPRST,RMPRA)) Q:RMPRA'>0  D
"RTN","RMPR9PU",59,0)
 . . .S STN=$P(^RMPR(668,RMPRA,0),U,7)
"RTN","RMPR9PU",60,0)
 . . .I SITE'="ALL"&(SITE'=STN) Q
"RTN","RMPR9PU",61,0)
 . . .S STNX=$$STATN^RMPRUTIL(STN)
"RTN","RMPR9PU",62,0)
 . . .I $G(WHAT)="S" S VISNX=$P($G(^RMPR(669.9,STN1,"INV")),U,2)
"RTN","RMPR9PU",63,0)
 . . .S STS=$P(^RMPR(668,RMPRA,0),U,10)
"RTN","RMPR9PU",64,0)
 . . .Q:STS["X"
"RTN","RMPR9PU",65,0)
 . . .Q:STS["C"
"RTN","RMPR9PU",66,0)
 . . .I SORT'["O"&(STS="O") Q
"RTN","RMPR9PU",67,0)
 . . .I SORT'["P"&(STS="P") Q
"RTN","RMPR9PU",68,0)
 . . .D REC
"RTN","RMPR9PU",69,0)
 Q
"RTN","RMPR9PU",70,0)
DTFWD ;from date passed forward
"RTN","RMPR9PU",71,0)
 S RMPRI1=0
"RTN","RMPR9PU",72,0)
 F RMPRI1=START:1:STOP D
"RTN","RMPR9PU",73,0)
 .I $L(RMPRI1)=1 S RMPRI=0_RMPRI1
"RTN","RMPR9PU",74,0)
 .E  S RMPRI=RMPRI1
"RTN","RMPR9PU",75,0)
 .S RMPRDTM=""
"RTN","RMPR9PU",76,0)
 .F  S RMPRDTM=$O(^RMPR(668,"L",RMPRI,RMPRDTM)) Q:RMPRDTM=""  D
"RTN","RMPR9PU",77,0)
 ..Q:RMPRDTM=""
"RTN","RMPR9PU",78,0)
 ..Q:RMPRDTM<DATE
"RTN","RMPR9PU",79,0)
 ..S RMPRST=""
"RTN","RMPR9PU",80,0)
 ..F  S RMPRST=$O(^RMPR(668,"L",RMPRI,RMPRDTM,RMPRST)) Q:RMPRST=""  D
"RTN","RMPR9PU",81,0)
 .. .Q:RMPRST="O"
"RTN","RMPR9PU",82,0)
 .. .Q:RMPRST="P"
"RTN","RMPR9PU",83,0)
 .. .I SORT'["X"&(RMPRST="X") Q
"RTN","RMPR9PU",84,0)
 .. .I SORT'["C"&(RMPRST="C") Q
"RTN","RMPR9PU",85,0)
 .. .S RMPRA=0
"RTN","RMPR9PU",86,0)
 .. .F  S RMPRA=$O(^RMPR(668,"L",RMPRI,RMPRDTM,RMPRST,RMPRA)) Q:RMPRA'>0  D
"RTN","RMPR9PU",87,0)
 .. . .Q:RMPRA=""
"RTN","RMPR9PU",88,0)
 .. . .S STN=$P(^RMPR(668,RMPRA,0),U,7)
"RTN","RMPR9PU",89,0)
 .. . .I SITE'="ALL"&(SITE'=STN) Q
"RTN","RMPR9PU",90,0)
 .. . .S STNX=$$STATN^RMPRUTIL(STN)
"RTN","RMPR9PU",91,0)
 .. . .I $G(WHAT)'="" S VISNX=$P($G(^RMPR(669.9,SITE,"INV")),U,2)
"RTN","RMPR9PU",92,0)
 .. . .S STS=$P(^RMPR(668,RMPRA,0),U,10)
"RTN","RMPR9PU",93,0)
 .. . .Q:STS["O"
"RTN","RMPR9PU",94,0)
 .. . .Q:STS["P"
"RTN","RMPR9PU",95,0)
 .. . .I SORT'["C"&(STS="C") Q
"RTN","RMPR9PU",96,0)
 .. . .I SORT'["X"&(STS="X") Q
"RTN","RMPR9PU",97,0)
 .. . .D REC
"RTN","RMPR9PU",98,0)
 S RMPRDTC=$P(DATE,".",1)
"RTN","RMPR9PU",99,0)
 F  S RMPRDTC=$O(^RMPR(668,"CD",RMPRDTC)) Q:RMPRDTC=""  D
"RTN","RMPR9PU",100,0)
 .Q:RMPRDTC<DATE
"RTN","RMPR9PU",101,0)
 .S RMPRDYS=0
"RTN","RMPR9PU",102,0)
 .F  S RMPRDYS=$O(^RMPR(668,"CD",RMPRDTC,RMPRDYS)) Q:RMPRDYS=""  D
"RTN","RMPR9PU",103,0)
 . .Q:RMPRDYS'>5
"RTN","RMPR9PU",104,0)
 . .S RMPRA=0
"RTN","RMPR9PU",105,0)
 . .F  S RMPRA=$O(^RMPR(668,"CD",RMPRDTC,RMPRDYS,RMPRA)) Q:RMPRA'>0  D
"RTN","RMPR9PU",106,0)
 . . .;check site
"RTN","RMPR9PU",107,0)
 . . .S STN=$P(^RMPR(668,RMPRA,0),U,7)
"RTN","RMPR9PU",108,0)
 . . .I SITE'="ALL"&(SITE'=STN) Q
"RTN","RMPR9PU",109,0)
 . . .S STNX=$$STATN^RMPRUTIL(STN)
"RTN","RMPR9PU",110,0)
 . . .;check status
"RTN","RMPR9PU",111,0)
 . . .S STS=$P(^RMPR(668,RMPRA,0),U,10)
"RTN","RMPR9PU",112,0)
 . . .I SORT'["O"&(STS="O") Q
"RTN","RMPR9PU",113,0)
 . . .I SORT'["P"&(STS="P") Q
"RTN","RMPR9PU",114,0)
 . . .I SORT'["C"&(STS="C") Q
"RTN","RMPR9PU",115,0)
 . . .I SORT'["X"&(STS="X") Q
"RTN","RMPR9PU",116,0)
 . . .;ssn range filter
"RTN","RMPR9PU",117,0)
 . . .S DFN=$P(^RMPR(668,RMPRA,0),U,2)
"RTN","RMPR9PU",118,0)
 . . .D DEM^VADPT
"RTN","RMPR9PU",119,0)
 . . .S SSNEN=$E($P(VADM(2),"^",2),10,11)
"RTN","RMPR9PU",120,0)
 . . .I SSNEN>STOP Q
"RTN","RMPR9PU",121,0)
 . . .I SSNEN<START Q
"RTN","RMPR9PU",122,0)
 . . .K SSNEN,VADM
"RTN","RMPR9PU",123,0)
 . . .D REC
"RTN","RMPR9PU",124,0)
 Q
"RTN","RMPR9PU",125,0)
REC ;records to grid
"RTN","RMPR9PU",126,0)
 ;stop date, init action date
"RTN","RMPR9PU",127,0)
 ;check ien, patch 77
"RTN","RMPR9PU",128,0)
 ;
"RTN","RMPR9PU",129,0)
 Q:$D(^TMP($J,RMPRA))
"RTN","RMPR9PU",130,0)
 ;
"RTN","RMPR9PU",131,0)
 N DIC,DIQ,DR,STOPDT
"RTN","RMPR9PU",132,0)
 S DA=RMPRA
"RTN","RMPR9PU",133,0)
 S DIC=668,DIQ="RE",DR=10,DIQ(0)="EN" D EN^DIQ1
"RTN","RMPR9PU",134,0)
 S STOPDT=$P($G(^RMPR(668,RMPRA,0)),U,9),STOPDT=$$DAT2^RMPRUTL1(STOPDT)
"RTN","RMPR9PU",135,0)
 S LINE=LINE+1
"RTN","RMPR9PU",136,0)
 S CDATE=$P(^RMPR(668,RMPRA,0),U,1),CDATE=$$DAT2^RMPRUTL1(CDATE)
"RTN","RMPR9PU",137,0)
 S DFN=$P(^RMPR(668,RMPRA,0),U,2) Q:DFN=""
"RTN","RMPR9PU",138,0)
 N VA,VADM
"RTN","RMPR9PU",139,0)
 D DEM^VADPT
"RTN","RMPR9PU",140,0)
 S WHO=VADM(1)
"RTN","RMPR9PU",141,0)
 S SSN=VADM(2)
"RTN","RMPR9PU",142,0)
 D KVAR^VADPT
"RTN","RMPR9PU",143,0)
 ;type
"RTN","RMPR9PU",144,0)
 S TYPE=$$TYPE^RMPREOU(RMPRA,8)
"RTN","RMPR9PU",145,0)
 ;display description if manual
"RTN","RMPR9PU",146,0)
 S DES=$$DES^RMPREOU(RMPRA,22)
"RTN","RMPR9PU",147,0)
 S DES=$TR(DES,"^","*")
"RTN","RMPR9PU",148,0)
 S DES=$TR(DES,"""","'")
"RTN","RMPR9PU",149,0)
 ;init action date
"RTN","RMPR9PU",150,0)
 S ADATE="",PDAY="",WRKDAY=""
"RTN","RMPR9PU",151,0)
 S ADATE=$P(^RMPR(668,RMPRA,0),U,9)
"RTN","RMPR9PU",152,0)
 ;PPD=1 for previous pending
"RTN","RMPR9PU",153,0)
 I ADATE'="" S (PDAY,WRKDAY)=$$WRKDAY^RMPREOU(RMPRA)
"RTN","RMPR9PU",154,0)
 I ADATE="" S (PDAY,WRKDAY)=$$CWRKDAY^RMPREOU(RMPRA)
"RTN","RMPR9PU",155,0)
 I ADATE'="" S CDAY=$$PDAY^RMPREOU(RMPRA)
"RTN","RMPR9PU",156,0)
 ;
"RTN","RMPR9PU",157,0)
 S STATUS=$$STATUS^RMPREOU(RMPRA)
"RTN","RMPR9PU",158,0)
 I STATUS["PENDING" D
"RTN","RMPR9PU",159,0)
 .I ADATE'=""&(ADATE<DATE) S PPD=1
"RTN","RMPR9PU",160,0)
 .S PPDAY=$$PWRKDAY^RMPREOU(RMPRA)
"RTN","RMPR9PU",161,0)
 S LINKED=$P($G(^RMPR(668,RMPRA,10,0)),U,4)
"RTN","RMPR9PU",162,0)
 I LINKED="" S LINKED=0
"RTN","RMPR9PU",163,0)
 ;
"RTN","RMPR9PU",164,0)
 ;If work order get ien of 664.1,WO#,Assigned Tech DUZ
"RTN","RMPR9PU",165,0)
 S (RMPR6641,RMPRWON)="",RMATECH=""
"RTN","RMPR9PU",166,0)
 S RMPR6641=$O(^RMPR(664.1,"SUS",RMPRA,0))
"RTN","RMPR9PU",167,0)
 I +RMPR6641>0 S:$D(^RMPR(664.1,RMPR6641,0)) RMATECH=$P(^RMPR(664.1,RMPR6641,0),U,16),RMPRWON=$P(^(0),U,13)
"RTN","RMPR9PU",168,0)
 S ^TMP($J,RMPRA)=CDATE_U_WHO_U_SSN_U_TYPE_U_DES_U
"RTN","RMPR9PU",169,0)
 ;look at pday and parse
"RTN","RMPR9PU",170,0)
 S (HD1,HD2,HD3,HD4,HD5,DH6)=""
"RTN","RMPR9PU",171,0)
 ;SD Working Days in Pending Status
"RTN","RMPR9PU",172,0)
 S (SD1,SD2,SD3,SD4,SD5)=0
"RTN","RMPR9PU",173,0)
 I (PDAY>0)&(PDAY<6)!(PDAY=0) S HD1=PDAY,DH6="NO"
"RTN","RMPR9PU",174,0)
 I (PPDAY>0)&(PPDAY<6)!(PPDAY=0) S SD1=PPDAY
"RTN","RMPR9PU",175,0)
 I (PDAY>0)&(PDAY<6)&(TYPE["MANUAL")!(PDAY=0)&(TYPE["MANUAL") S MHD1=MHD1+1
"RTN","RMPR9PU",176,0)
 I (PDAY>0)&(PDAY<6)&(TYPE'["MANUAL")!(PDAY=0)&(TYPE'["MANUAL") S CHD1=CHD1+1
"RTN","RMPR9PU",177,0)
 I (PPDAY>0)&(PPDAY<6)&(STATUS["PENDING") S PPDD1=PPDD1+1
"RTN","RMPR9PU",178,0)
 I (PDAY>0)&(PDAY<6)&(PPD=1) S PPD1=PPD1+1
"RTN","RMPR9PU",179,0)
 I HD1=""  S HD1=0
"RTN","RMPR9PU",180,0)
 I (PDAY>5)&(PDAY<10) S HD2=PDAY,DH6="YES"
"RTN","RMPR9PU",181,0)
 I (PPDAY>5)&(PPDAY<10) S SD2=PPDAY
"RTN","RMPR9PU",182,0)
 I (PDAY>5)&(PDAY<10)&(TYPE["MANUAL") S MHD2=MHD2+1
"RTN","RMPR9PU",183,0)
 I (PDAY>5)&(PDAY<10)&(TYPE'["MANUAL") S CHD2=CHD2+1
"RTN","RMPR9PU",184,0)
 I (PPDAY>5)&(PPDAY<10)&(STATUS["PENDING") S PPDD2=PPDD2+1
"RTN","RMPR9PU",185,0)
 I (PDAY>5)&(PDAY<10)&(PPD=1) S PPD2=PPD2+1
"RTN","RMPR9PU",186,0)
 I HD2="" S HD2=0
"RTN","RMPR9PU",187,0)
 I (PDAY>9)&(PDAY<30) S HD3=PDAY,DH6="YES"
"RTN","RMPR9PU",188,0)
 I (PPDAY>9)&(PPDAY<30) S SD3=PPDAY
"RTN","RMPR9PU",189,0)
 I (PDAY>9)&(PDAY<30)&(TYPE["MANUAL") S MHD3=MHD3+1
"RTN","RMPR9PU",190,0)
 I (PDAY>9)&(PDAY<30)&(TYPE'["MANUAL") S CHD3=CHD3+1
"RTN","RMPR9PU",191,0)
 I (PPDAY>9)&(PPDAY<30)&(STATUS["PENDING") S PPDD3=PPDD3+1
"RTN","RMPR9PU",192,0)
 I (PDAY>9)&(PDAY<30)&(PPD=1) S PPD3=PPD3+1
"RTN","RMPR9PU",193,0)
 I HD3="" S HD3=0
"RTN","RMPR9PU",194,0)
 I (PDAY>29)&(PDAY<90) S HD4=PDAY,DH6="YES"
"RTN","RMPR9PU",195,0)
 I (PPDAY>29)&(PPDAY<90) S SD4=PPDAY
"RTN","RMPR9PU",196,0)
 I (PDAY>29)&(PDAY<90)&(TYPE["MANUAL") S MHD4=MHD4+1
"RTN","RMPR9PU",197,0)
 I (PDAY>29)&(PDAY<90)&(TYPE'["MANUAL") S CHD4=CHD4+1
"RTN","RMPR9PU",198,0)
 I (PPDAY>29)&(PPDAY<90)&(STATUS["PENDING") S PPDD4=PPDD4+1
"RTN","RMPR9PU",199,0)
 I (PDAY>29)&(PDAY<90)&(PPD=1) S PPD4=PPD4+1
"RTN","RMPR9PU",200,0)
 I HD4="" S HD4=0
"RTN","RMPR9PU",201,0)
 I PDAY>89 S HD5=PDAY,DH6="YES"
"RTN","RMPR9PU",202,0)
 I PPDAY>89 S SD5=PPDAY
"RTN","RMPR9PU",203,0)
 I (PDAY>89)&(TYPE["MANUAL") S MHD5=MHD5+1
"RTN","RMPR9PU",204,0)
 I (PDAY>89)&(TYPE'["MANUAL") S CHD5=CHD5+1
"RTN","RMPR9PU",205,0)
 I (PPDAY>89)&(STATUS["PENDING") S PPDD5=PPDD5+1
"RTN","RMPR9PU",206,0)
 I (PDAY>89)&(PPD=1) S PPD5=PPD5+1
"RTN","RMPR9PU",207,0)
 I HD5="" S HD5=0
"RTN","RMPR9PU",208,0)
 S (PPD,PPDAY)=0
"RTN","RMPR9PU",209,0)
 I LINKED'=0&(TYPE["MANUAL") S MLNK=MLNK+1
"RTN","RMPR9PU",210,0)
 I LINKED'=0&(TYPE'["MANUAL") S CLNK=CLNK+1
"RTN","RMPR9PU",211,0)
 S ^TMP($J,RMPRA)=^TMP($J,RMPRA)_STOPDT_U_DH6_U_HD1_U_HD2_U_HD3_U_HD4_U_HD5
"RTN","RMPR9PU",212,0)
 S ^TMP($J,RMPRA)=^TMP($J,RMPRA)_U_STATUS_U_RMPRA_U_STNX_U_LINKED
"RTN","RMPR9PU",213,0)
 S ^TMP($J,RMPRA)=^TMP($J,RMPRA)_U_U_SD1_U_SD2_U_SD3_U_SD4_U_SD5_U_DFN
"RTN","RMPR9PU",214,0)
 S ^TMP($J,RMPRA)=^TMP($J,RMPRA)_U_RMPR6641_U_RMPRWON_U_RMATECH
"RTN","RMPR9PU",215,0)
 K CDATE,WHO,SSN,TYPE,DES,PDAY,STATUS,ADATE
"RTN","RMPR9PU",216,0)
 ;PUT RESULTS IN GLOBAL!!
"RTN","RMPR9PU",217,0)
 Q
"RTN","RMPR9PU",218,0)
 K CDAY,CHD1,CHD2,CHD3,CHD4,CHD5,CLNK,DA,DFN,DH6,HD1,HD2,HD3,HD4,HD5,LINE
"RTN","RMPR9PU",219,0)
 K LINKED,MHD1,MHD2,MHD3,MHD4,MHD5,MLNK,PPD,PPD1,PPD2,PPD3,PPD4,PPD5
"RTN","RMPR9PU",220,0)
 K PPDAY,PPDD1,PPDD2,PPDD3,PPDD4,PPDD5,PPDDAY,RMPR6641,RMPRDTC,RMPRDTM
"RTN","RMPR9PU",221,0)
 K RMPRDYS,RMPRI,RMPRI1,RMPRSC,RMPRST,RMPRWON,RRX,SD1,SD2,SD3,SD4,SD5,STN,STN1,STNX,STS,VALMCNT,VISNX,WHAT,WRKDAY
"RTN","RMPR9PU",222,0)
EXIT ;common exit point
"RTN","RMPR9PU",223,0)
 S RESULT=$NA(^TMP($J))
"RTN","RMPR9PU",224,0)
 Q
"RTN","RMPR9S4")
0^19^B30605994^B29702431
"RTN","RMPR9S4",1,0)
RMPR9S4 ;HOIFO/HNC - GUI 2319 ITEM TRANSACTIONS LIST ;9/10/02  08:42
"RTN","RMPR9S4",2,0)
 ;;3.0;PROSTHETICS;**59,99,90,75**;Feb 09, 1996;Build 25
"RTN","RMPR9S4",3,0)
 ;IEN = INTERNAL ENTRY NUMBER OF FILE 668
"RTN","RMPR9S4",4,0)
 Q
"RTN","RMPR9S4",5,0)
A1(IEN) G A2
"RTN","RMPR9S4",6,0)
EN(RESULTS,IEN) ;broker
"RTN","RMPR9S4",7,0)
A2 S (RA,AN,ANS,RK,RZ)=0 K ^TMP($J,"TT"),^TMP($J,"AG"),IT
"RTN","RMPR9S4",8,0)
 K ^TMP($J,"RMPRB")
"RTN","RMPR9S4",9,0)
 K ^TMP($J,"RMPRC"),RMPRLPRO
"RTN","RMPR9S4",10,0)
 ;IT IS RESULTS
"RTN","RMPR9S4",11,0)
 ;0;2 DFN in 668
"RTN","RMPR9S4",12,0)
 S RMPRDFN=$P($G(^RMPR(668,IEN,0)),U,2)
"RTN","RMPR9S4",13,0)
 I RMPRDFN="" S ^TMP($J,"RMPRB",1)="PATIENT NOT KNOWN" Q
"RTN","RMPR9S4",14,0)
 MERGE ^TMP($J,"TT")=^RMPR(660,"AC",RMPRDFN)
"RTN","RMPR9S4",15,0)
 S B=0
"RTN","RMPR9S4",16,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPR9S4",17,0)
 . S BC=0
"RTN","RMPR9S4",18,0)
 . F  S BC=$O(^TMP($J,"TT",B,BC)) Q:BC'>0  D
"RTN","RMPR9S4",19,0)
 . .;Q:$P($G(^RMPR(660,BC,0)),U,10)'=RMPR("STA")
"RTN","RMPR9S4",20,0)
 . .S GN=$P($G(^RMPR(660,BC,"AMS")),U,1)
"RTN","RMPR9S4",21,0)
 . .S ND=$P($G(^RMPR(660,BC,1)),U,4)
"RTN","RMPR9S4",22,0)
 . .I ND S ND=$P(^RMPR(661.1,ND,0),U,8)
"RTN","RMPR9S4",23,0)
 . .S:ND="" ND=2
"RTN","RMPR9S4",24,0)
 . .S:GN="" GN=BC
"RTN","RMPR9S4",25,0)
 . .S ^TMP($J,"AG",GN,ND,BC)=B
"RTN","RMPR9S4",26,0)
 S B=""
"RTN","RMPR9S4",27,0)
 F  S B=$O(^TMP($J,"AG",B)) Q:B'>0  D
"RTN","RMPR9S4",28,0)
 .S BC=""
"RTN","RMPR9S4",29,0)
 .F  S BC=$O(^TMP($J,"AG",B,BC)) Q:BC'>0  D
"RTN","RMPR9S4",30,0)
 . .Q:BC=2
"RTN","RMPR9S4",31,0)
 . .MERGE ^TMP($J,"AGG")=^TMP($J,"AG",B)
"RTN","RMPR9S4",32,0)
 . .S HC="",GTCST=0
"RTN","RMPR9S4",33,0)
 . .K HCC1
"RTN","RMPR9S4",34,0)
 . .F  S HC=$O(^TMP($J,"AGG",HC)) Q:HC'>0  D
"RTN","RMPR9S4",35,0)
 . . .S HCC=0
"RTN","RMPR9S4",36,0)
 . . .;changes for Surgical Implants
"RTN","RMPR9S4",37,0)
 . . .S BDC=""
"RTN","RMPR9S4",38,0)
 . . .F BDC=1:1 S HCC=$O(^TMP($J,"AGG",HC,HCC)) Q:HCC'>0  D
"RTN","RMPR9S4",39,0)
 . . . .S GTCST=GTCST+$P(^RMPR(660,HCC,0),U,16)
"RTN","RMPR9S4",40,0)
 . . . .I BDC=1&(HC'=2) S HCC1=HCC
"RTN","RMPR9S4",41,0)
 . . . .I BDC'=1 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPR9S4",42,0)
 . . . .I HC=2 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPR9S4",43,0)
 . .I $G(HCC1) S $P(^TMP($J,"TT",^TMP($J,"AGG",1,HCC1),HCC1),U,3)=GTCST K HCC1
"RTN","RMPR9S4",44,0)
 . .K GTCST,^TMP($J,"AGG")
"RTN","RMPR9S4",45,0)
 K ^TMP($J,"AG"),BDC
"RTN","RMPR9S4",46,0)
 S B=0,RC=1
"RTN","RMPR9S4",47,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPR9S4",48,0)
 .S RK=0
"RTN","RMPR9S4",49,0)
 .F  S RK=$O(^TMP($J,"TT",B,RK)) Q:RK'>0  D
"RTN","RMPR9S4",50,0)
 . .Q:$D(^RMPO(665.72,"AC",RK))
"RTN","RMPR9S4",51,0)
 . .S ^TMP($J,"RMPRC",RC)=RK
"RTN","RMPR9S4",52,0)
 . .I $P(^TMP($J,"TT",B,RK),U,3) S $P(^TMP($J,"RMPRC",RC),U,3)=$P(^TMP($J,"TT",B,RK),U,3)
"RTN","RMPR9S4",53,0)
 . .S RC=RC+1
"RTN","RMPR9S4",54,0)
 S RK=0,RZ=0
"RTN","RMPR9S4",55,0)
 K ^TMP($J,"TT"),B
"RTN","RMPR9S4",56,0)
 ;
"RTN","RMPR9S4",57,0)
 G:'$D(^TMP($J,"RMPRC")) END
"RTN","RMPR9S4",58,0)
 ;
"RTN","RMPR9S4",59,0)
DIS ;format data string - ALL
"RTN","RMPR9S4",60,0)
 S RC=""
"RTN","RMPR9S4",61,0)
 S RK=0
"RTN","RMPR9S4",62,0)
 F  S RK=$O(^TMP($J,"RMPRC",RK)) Q:RK=""  D
"RTN","RMPR9S4",63,0)
 .S AN=+^TMP($J,"RMPRC",RK)
"RTN","RMPR9S4",64,0)
 .S RMPRY=$G(^RMPR(660,AN,0))
"RTN","RMPR9S4",65,0)
 .I RMPRY'="" D PRT
"RTN","RMPR9S4",66,0)
 .Q
"RTN","RMPR9S4",67,0)
 ;
"RTN","RMPR9S4",68,0)
 ;
"RTN","RMPR9S4",69,0)
END I RC=0 S ^TMP($J,"RMPRB",1)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S4",70,0)
 ;
"RTN","RMPR9S4",71,0)
 ;
"RTN","RMPR9S4",72,0)
EXIT ;common exit point
"RTN","RMPR9S4",73,0)
 ;pass to broker
"RTN","RMPR9S4",74,0)
 K ^TMP($J,"RMPRC")
"RTN","RMPR9S4",75,0)
 ;S RESULT=$NA(^TMP($J))
"RTN","RMPR9S4",76,0)
 M RESULTS=^TMP($J,"RMPRB")
"RTN","RMPR9S4",77,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9S4",78,0)
 K I,J,L,R0,RA
"RTN","RMPR9S4",79,0)
 Q
"RTN","RMPR9S4",80,0)
PRT ;
"RTN","RMPR9S4",81,0)
 S DATE=$P(RMPRY,U,3),TYPE=$P(RMPRY,U,6),QTY=$P(RMPRY,U,7)
"RTN","RMPR9S4",82,0)
 S VEN=$P(RMPRY,U,9),TRANS=$P(RMPRY,U,4),STA=$P(RMPRY,U,10),SN=$P(RMPRY,U,11)
"RTN","RMPR9S4",83,0)
 S DEL=$P(RMPRY,U,12)
"RTN","RMPR9S4",84,0)
 S CST=$S($P(RMPRY,U,16)'="":$P(RMPRY,U,16),$D(^RMPR(660,AN,"LB")):$P(^RMPR(660,AN,"LB"),U,9),1:"")
"RTN","RMPR9S4",85,0)
 ;lab source of procurement
"RTN","RMPR9S4",86,0)
 I $D(^RMPR(660,AN,"LB")) S RMPRLPRO=$P(^("LB"),U,3) D
"RTN","RMPR9S4",87,0)
 .I RMPRLPRO="O" S RMPRLPRO="ORTHOTIC" Q
"RTN","RMPR9S4",88,0)
 .I RMPRLPRO="R" S RMPRLPRO="RESTORATION" Q
"RTN","RMPR9S4",89,0)
 .I RMPRLPRO="S" S RMPRLPRO="SHOE" Q
"RTN","RMPR9S4",90,0)
 .I RMPRLPRO="W" S RMPRLPRO="WHEELCHAIR" Q
"RTN","RMPR9S4",91,0)
 .I RMPRLPRO="N" S RMPRLPRO="FOOT CENTER" Q
"RTN","RMPR9S4",92,0)
 .I RMPRLPRO="D" S RMPRLPRO="DDC" Q
"RTN","RMPR9S4",93,0)
 .I RMPRLPRO="E" S RMPRLPRO="EYE GLASS" Q
"RTN","RMPR9S4",94,0)
 .I RMPRLPRO="" K RMPRLPRO
"RTN","RMPR9S4",95,0)
 ;form requested on
"RTN","RMPR9S4",96,0)
 S FRM=$P(RMPRY,U,13)
"RTN","RMPR9S4",97,0)
 S RMPRNC=$P($G(^RMPR(660,AN,"AM")),U,2)
"RTN","RMPR9S4",98,0)
 S DATE=$$DAT2^RMPRUTL1(DATE)
"RTN","RMPR9S4",99,0)
 S TYPE=$P($G(^RMPR(660,AN,1)),U,4)
"RTN","RMPR9S4",100,0)
 ;S TYPE=$S(TYPE="":"",$D(^RMPR(661,TYPE,0)):$P(^(0),U,1),1:"")
"RTN","RMPR9S4",101,0)
 S AMIS=$P(RMPRY,U,15),VEN=$S(VEN="":"",$D(^PRC(440,VEN,0)):$P(^(0),U,1),1:"")
"RTN","RMPR9S4",102,0)
 I $D(^RMPR(660.1,"AC",AN)),$P(^RMPR(660.1,$O(^RMPR(660.1,"AC",AN,0)),0),U,11)]"" S AMIS=AMIS_"+"
"RTN","RMPR9S4",103,0)
 S TRANS=$S(TRANS]"":TRANS,1:""),TRANS1="" S:TRANS="X" TRANS1=TRANS,TRANS=""
"RTN","RMPR9S4",104,0)
 S DEL=$E(DEL,4,5)_"/"_$E(DEL,6,7)_"/"_$E(DEL,2,3) S:DEL="//" DEL=""
"RTN","RMPR9S4",105,0)
 ;
"RTN","RMPR9S4",106,0)
 ;set results array
"RTN","RMPR9S4",107,0)
 ;
"RTN","RMPR9S4",108,0)
 S HTYPE=""
"RTN","RMPR9S4",109,0)
 I $D(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),"HST")) S HTYPE=$E(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),"HST"),1,15)
"RTN","RMPR9S4",110,0)
 S ITEM=AMIS_$S(TYPE'="":$P($G(^RMPR(661.1,TYPE,0)),U,2),$P(RMPRY,U,26)="D":"DELIVERY",$P(RMPRY,U,26)="P":"PICKUP",$P(RMPRY,U,17):"SHIPPING",HTYPE'="":HTYPE,1:"")
"RTN","RMPR9S4",111,0)
 K HTYPE
"RTN","RMPR9S4",112,0)
 ;
"RTN","RMPR9S4",113,0)
 S HCPCS=$P($G(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),1)),U,4)
"RTN","RMPR9S4",114,0)
 I HCPCS'="" S HCPCS=$P($G(^RMPR(661.1,HCPCS,0)),U,1)
"RTN","RMPR9S4",115,0)
 ;
"RTN","RMPR9S4",116,0)
 S ^TMP($J,"RMPRB",RK)=$P(^TMP($J,"RMPRC",RK),U,1)_U_DATE_U_QTY_U_ITEM
"RTN","RMPR9S4",117,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_HCPCS_U_TRANS_TRANS1
"RTN","RMPR9S4",118,0)
 ;
"RTN","RMPR9S4",119,0)
 ;display source of procurement for 2529-3 under vendor header
"RTN","RMPR9S4",120,0)
 I $D(RMPRLPRO) S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_RMPRLPRO
"RTN","RMPR9S4",121,0)
 E  S:VEN'="" ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$E(VEN,1,10)
"RTN","RMPR9S4",122,0)
 I VEN=""&'$D(RMPRLPRO) S:'$D(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),"HST")) ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$E(VEN,1,10)
"RTN","RMPR9S4",123,0)
 I VEN=""&'$D(RMPRLPRO) S:$D(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),"HST")) ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$E($P(^RMPR(660,$P(^TMP($J,"RMPRC",RK),U,1),"HST"),U,3),1,10)
"RTN","RMPR9S4",124,0)
 ;
"RTN","RMPR9S4",125,0)
 I STA'="" S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_$P($G(^DIC(4,STA,99)),U,1)
"RTN","RMPR9S4",126,0)
 I STA="" S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_"UNKNOWN"
"RTN","RMPR9S4",127,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_SN_U_DEL
"RTN","RMPR9S4",128,0)
 I $P(^TMP($J,"RMPRC",RK),U,3) S CST=$P(^TMP($J,"RMPRC",RK),U,3)
"RTN","RMPR9S4",129,0)
 S COST=$J($FN($S(CST'="":CST,$P(RMPRY,U,17):$P(RMPRY,U,17),1:""),"T",2),9)
"RTN","RMPR9S4",130,0)
 ;
"RTN","RMPR9S4",131,0)
 S ^TMP($J,"RMPRB",RK)=^TMP($J,"RMPRB",RK)_U_COST_U_RMPRNC
"RTN","RMPR9S4",132,0)
 ;
"RTN","RMPR9S4",133,0)
 I $P(^TMP($J,"RMPRC",RK),U,2)="" S $P(^TMP($J,"RMPRC",RK),U,2)=RZ
"RTN","RMPR9S4",134,0)
 K DATE,QTY,ITEM,HCPSC,RMPRLPRO,VEN,SN,DEL,COST,REM
"RTN","RMPR9S4",135,0)
 ;
"RTN","RMPR9S4",136,0)
 Q
"RTN","RMPR9S4",137,0)
 ;END
"RTN","RMPR9S4E")
0^22^B42900080^B41319639
"RTN","RMPR9S4E",1,0)
RMPR9S4E ;HOIFO/SPS-GUI 2319 Extended Display Transaction screen 4 ;12/17/02  09:35
"RTN","RMPR9S4E",2,0)
 ;;3.0;PROSTHETICS;**59,92,99,90,75**;Feb 09, 1996;Build 25
"RTN","RMPR9S4E",3,0)
 ;
"RTN","RMPR9S4E",4,0)
 ;         (IEN)=ien of file 660
"RTN","RMPR9S4E",5,0)
 ;
"RTN","RMPR9S4E",6,0)
 ;AAC Patch 92 08/04/04 - Code Set Versioning (CSV)
"RTN","RMPR9S4E",7,0)
 ;Used API=ICDDX^ICDCODE to replace direct calls to global ICD9(80)
"RTN","RMPR9S4E",8,0)
 ;
"RTN","RMPR9S4E",9,0)
 ;
"RTN","RMPR9S4E",10,0)
 ;display detailed record
"RTN","RMPR9S4E",11,0)
A1(IEN) G A2
"RTN","RMPR9S4E",12,0)
EN(RESULTS,IEN) ;Broker
"RTN","RMPR9S4E",13,0)
A2 ;
"RTN","RMPR9S4E",14,0)
 I +IEN'>0 S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S4E",15,0)
 I '$D(^RMPR(660,IEN)) S RESULTS(0)="NOTHING TO REPORT" G EXIT
"RTN","RMPR9S4E",16,0)
 N DIC,DIQ,DR,DA,RMPRV,RMPRDA,RV
"RTN","RMPR9S4E",17,0)
 S DIC=660,DIQ="R19",DR=".01:96",DIQ(0)="EN"
"RTN","RMPR9S4E",18,0)
 S (RMPRDA,DA)=(IEN)
"RTN","RMPR9S4E",19,0)
 D EN^DIQ1
"RTN","RMPR9S4E",20,0)
 S DIQ="R19",DR=72,DIQ(0)="I" D EN^DIQ1
"RTN","RMPR9S4E",21,0)
 ;get vendor info
"RTN","RMPR9S4E",22,0)
 S DA=$P(^RMPR(660,RMPRDA,0),U,9)
"RTN","RMPR9S4E",23,0)
 I DA D
"RTN","RMPR9S4E",24,0)
 .S DIC=440,DIQ="RV",DR=".01:6",DIQ(0)="EN"
"RTN","RMPR9S4E",25,0)
 .S (RMPRV,DA)=$P(^RMPR(660,RMPRDA,0),U,9)
"RTN","RMPR9S4E",26,0)
 .D EN^DIQ1
"RTN","RMPR9S4E",27,0)
 ;
"RTN","RMPR9S4E",28,0)
 ;array defined for record in following format:
"RTN","RMPR9S4E",29,0)
 ;R19(filenumber,ien,field,E)=external form of data
"RTN","RMPR9S4E",30,0)
 ;RV(filenumber,ien,field,E)=external form of data
"RTN","RMPR9S4E",31,0)
 ;example:
"RTN","RMPR9S4E",32,0)
 ;R19(660,100,.01,"E")=APR 27, 1995
"RTN","RMPR9S4E",33,0)
 ;R19(660,100,.02,"E")=NAME,PATIENT
"RTN","RMPR9S4E",34,0)
 ;RV(440,131,.01,"E")=ORTHOTIC LAB
"RTN","RMPR9S4E",35,0)
 S RMPRDFN=$P(^RMPR(660,RMPRDA,0),U,2)
"RTN","RMPR9S4E",36,0)
 S RMPRNAM=$P(^DPT(RMPRDFN,0),U),RMPRSSN=$P(^(0),U,9),RMPRDOB=$P(^(0),U,3)
"RTN","RMPR9S4E",37,0)
 ;
"RTN","RMPR9S4E",38,0)
 D HDR
"RTN","RMPR9S4E",39,0)
 ; "TYPE OF FORM: ",
"RTN","RMPR9S4E",40,0)
 S RESULTS(5)=$G(R19(660,RMPRDA,11,"E"))
"RTN","RMPR9S4E",41,0)
 ; "INITIATOR: ",
"RTN","RMPR9S4E",42,0)
 S RESULTS(6)=$G(R19(660,RMPRDA,27,"E"))
"RTN","RMPR9S4E",43,0)
 ; "DATE: ",
"RTN","RMPR9S4E",44,0)
 S RESULTS(7)=$G(R19(660,RMPRDA,1,"E"))
"RTN","RMPR9S4E",45,0)
 ; "DELIVER TO: ",
"RTN","RMPR9S4E",46,0)
 S RESULTS(8)=$G(R19(660,RMPRDA,25,"E"))
"RTN","RMPR9S4E",47,0)
 ; "TYPE TRANS: ",
"RTN","RMPR9S4E",48,0)
 S RESULTS(9)=$G(R19(660,RMPRDA,2,"E"))
"RTN","RMPR9S4E",49,0)
 ; "QTY: ",
"RTN","RMPR9S4E",50,0)
 S RESULTS(10)=$G(R19(660,RMPRDA,5,"E"))
"RTN","RMPR9S4E",51,0)
 ; "INVENTORY POINT: "
"RTN","RMPR9S4E",52,0)
 S RESULTS(11)=$G(R19(660,RMPRDA,29,"E"))
"RTN","RMPR9S4E",53,0)
 ; "SOURCE: ",
"RTN","RMPR9S4E",54,0)
 S RESULTS(12)=$G(R19(660,RMPRDA,12,"E"))
"RTN","RMPR9S4E",55,0)
 ;vendor tracking number
"RTN","RMPR9S4E",56,0)
 S (RESULTS(13),RESULTS(14))=""
"RTN","RMPR9S4E",57,0)
 I $G(R19(660,RMPRDA,11,"E"))="VISA" D
"RTN","RMPR9S4E",58,0)
 .; "VENDOR TRACKING: ",
"RTN","RMPR9S4E",59,0)
 .S RESULTS(13)=$G(R19(660,RMPRDA,4.2,"E"))
"RTN","RMPR9S4E",60,0)
 .; "BANK AUTHORIZATION: ",
"RTN","RMPR9S4E",61,0)
 .S RESULTS(14)=$G(R19(660,RMPRDA,38.7,"E"))
"RTN","RMPR9S4E",62,0)
 ; "VENDOR: ",
"RTN","RMPR9S4E",63,0)
 S RESULTS(15)=$G(R19(660,RMPRDA,7,"E"))
"RTN","RMPR9S4E",64,0)
 ; VENDOR PHONE AND ADDRESS INFO
"RTN","RMPR9S4E",65,0)
 F I=16:1:20 S RESULTS(I)=""
"RTN","RMPR9S4E",66,0)
 I $D(RV) D
"RTN","RMPR9S4E",67,0)
 .; "VENDOR PHONE: and Address ",
"RTN","RMPR9S4E",68,0)
 .S RESULTS(16)=$G(RV(440,RMPRV,5,"E"))
"RTN","RMPR9S4E",69,0)
 .S RESULTS(17)=$G(RV(440,RMPRV,1,"E"))
"RTN","RMPR9S4E",70,0)
 .S RESULTS(18)=$G(RV(440,RMPRV,4.2,"E"))
"RTN","RMPR9S4E",71,0)
 .S RESULTS(19)=$G(RV(440,RMPRV,4.4,"E"))
"RTN","RMPR9S4E",72,0)
 .S RESULTS(20)=$G(RV(440,RMPRV,4.6,"E"))
"RTN","RMPR9S4E",73,0)
 ; "DELIVERY DATE: "
"RTN","RMPR9S4E",74,0)
 S RESULTS(21)=$G(R19(660,RMPRDA,10,"E"))
"RTN","RMPR9S4E",75,0)
 ; "TOTAL COST: "
"RTN","RMPR9S4E",76,0)
 S RESULTS(22)=0.00
"RTN","RMPR9S4E",77,0)
 I $G(R19(660,RMPRDA,14,"E"))'="" S RESULTS(22)="$"_$FN(R19(660,RMPRDA,14,"E"),"T",2)
"RTN","RMPR9S4E",78,0)
 I $G(R19(660,RMPRDA,14,"E"))="" S RESULTS(22)=$S($G(R19(660,RMPRDA,6,"E"))'="":"$"_$FN(R19(660,RMPRDA,6,"E"),"T",2),$G(R19(660,RMPRDA,48,"E"))'="":"$"_$FN(R19(660,RMPRDA,48,"E"),"T",2),1:"")
"RTN","RMPR9S4E",79,0)
 ; "OBL: ",
"RTN","RMPR9S4E",80,0)
 S RESULTS(23)=$G(R19(660,RMPRDA,23,"E"))
"RTN","RMPR9S4E",81,0)
 ;
"RTN","RMPR9S4E",82,0)
 ;lab data
"RTN","RMPR9S4E",83,0)
 F I=24:1:32 S RESULTS(I)=""
"RTN","RMPR9S4E",84,0)
 I $D(^RMPR(660,RMPRDA,"LB")) D
"RTN","RMPR9S4E",85,0)
 .N DIC,DIQ,DR,L19,DA
"RTN","RMPR9S4E",86,0)
 .S (DA,RMPRLA)=$P(^RMPR(660,RMPRDA,"LB"),U,10)
"RTN","RMPR9S4E",87,0)
 .Q:DA=""
"RTN","RMPR9S4E",88,0)
 .S DIC=664.1,DIQ="L19",DR="15",DIQ(0)="E"
"RTN","RMPR9S4E",89,0)
 .D EN^DIQ1
"RTN","RMPR9S4E",90,0)
 .; "WORK ORDER: ",
"RTN","RMPR9S4E",91,0)
 .S RESULTS(24)=$G(R19(660,RMPRDA,71,"E"))
"RTN","RMPR9S4E",92,0)
 .I $P(^RMPR(660,RMPRDA,"AM"),U,2)=1 S RESULTS(24)=$G(R19(660,RMPRDA,72.5,"E"))
"RTN","RMPR9S4E",93,0)
 .I $P(^RMPR(660,RMPRDA,"LB"),U,14)=1 S RESULTS(24)=$G(R19(660,RMPRDA,72.5,"E"))
"RTN","RMPR9S4E",94,0)
 .; "RECEIVING STATION: ",
"RTN","RMPR9S4E",95,0)
 .S RESULTS(25)=$G(R19(660,RMPRDA,70,"E"))
"RTN","RMPR9S4E",96,0)
 .; "TECHNICIAN: ",
"RTN","RMPR9S4E",97,0)
 .S RESULTS(26)=$G(L19(664.1,RMPRLA,15,"E"))
"RTN","RMPR9S4E",98,0)
 .; "TOTAL LABOR HOURS: ",
"RTN","RMPR9S4E",99,0)
 .S RESULTS(27)=$G(R19(660,RMPRDA,45,"E"))
"RTN","RMPR9S4E",100,0)
 .; "TOTAL LABOR COST: ",
"RTN","RMPR9S4E",101,0)
 .S RESULTS(28)=$G(R19(660,RMPRDA,46,"E"))
"RTN","RMPR9S4E",102,0)
 .; "TOTAL MATERIAL COST: ",
"RTN","RMPR9S4E",103,0)
 .S RESULTS(29)=$G(R19(660,RMPRDA,47,"E"))
"RTN","RMPR9S4E",104,0)
 .; "TOTAL LAB COST: ",
"RTN","RMPR9S4E",105,0)
 .S RESULTS(30)=$G(R19(660,RMPRDA,48,"E"))
"RTN","RMPR9S4E",106,0)
 .; "COMPLETION DATE: ",
"RTN","RMPR9S4E",107,0)
 .S RESULTS(31)=$G(R19(660,RMPRDA,50,"E"))
"RTN","RMPR9S4E",108,0)
 .; "LAB REMARKS: ",
"RTN","RMPR9S4E",109,0)
 .S RESULTS(32)=$G(R19(660,RMPRDA,51,"E"))
"RTN","RMPR9S4E",110,0)
 ; "REMARKS: ",
"RTN","RMPR9S4E",111,0)
 S RESULTS(33)=$G(R19(660,RMPRDA,16,"E"))
"RTN","RMPR9S4E",112,0)
 ; "RETURN STATUS: ",
"RTN","RMPR9S4E",113,0)
 S RESULTS(34)=$G(R19(660,RMPRDA,17.5,"E"))
"RTN","RMPR9S4E",114,0)
 ;
"RTN","RMPR9S4E",115,0)
 ; CoreFLS Data used to be/and same as historical data
"RTN","RMPR9S4E",116,0)
 F I=35:1:42 S RESULTS(I)=""
"RTN","RMPR9S4E",117,0)
 I $G(R19(660,RMPRDA,15,"E"))["*" D
"RTN","RMPR9S4E",118,0)
 .;include records that have been merged
"RTN","RMPR9S4E",119,0)
 .; "COREFLS/HISTORICAL DATA",!
"RTN","RMPR9S4E",120,0)
 .Q:'$D(R19(660,RMPRDA,89))
"RTN","RMPR9S4E",121,0)
 .; "ITEM: ",
"RTN","RMPR9S4E",122,0)
 .S RESULTS(35)=$G(R19(660,RMPRDA,89,"E"))
"RTN","RMPR9S4E",123,0)
 .; "STATION: ",
"RTN","RMPR9S4E",124,0)
 .S RESULTS(36)=$G(R19(660,RMPRDA,90,"E"))
"RTN","RMPR9S4E",125,0)
 .; "VENDOR: ",
"RTN","RMPR9S4E",126,0)
 .S RESULTS(37)=$G(R19(660,RMPRDA,91,"E"))
"RTN","RMPR9S4E",127,0)
 .; "   PHONE: ",
"RTN","RMPR9S4E",128,0)
 .S RESULTS(38)=$G(R19(660,RMPRDA,92,"E"))
"RTN","RMPR9S4E",129,0)
 .; " STREET
"RTN","RMPR9S4E",130,0)
 .S RESULTS(39)=$G(R19(660,RMPRDA,93,"E"))
"RTN","RMPR9S4E",131,0)
 .; CITY
"RTN","RMPR9S4E",132,0)
 .S RESULTS(40)=$G(R19(660,RMPRDA,94,"E"))
"RTN","RMPR9S4E",133,0)
 .; STATE
"RTN","RMPR9S4E",134,0)
 .S RESULTS(41)=$G(R19(660,RMPRDA,95,"E"))
"RTN","RMPR9S4E",135,0)
 .; ZIP
"RTN","RMPR9S4E",136,0)
 .S RESULTS(42)=$G(R19(660,RMPRDA,96,"E"))
"RTN","RMPR9S4E",137,0)
 ;put in lab display here fields 45,46,47,48 and 51
"RTN","RMPR9S4E",138,0)
 ;lab amis
"RTN","RMPR9S4E",139,0)
 F I=43:1:44 S RESULTS(I)=""
"RTN","RMPR9S4E",140,0)
 I $G(R19(660,RMPRDA,73,"E")) D
"RTN","RMPR9S4E",141,0)
 .; "ORTHOTICS LAB CODE: "
"RTN","RMPR9S4E",142,0)
 .S RESULTS(43)=$S($D(R19(660,RMPRDA,74,"E")):R19(660,RMPRDA,74,"E"),$D(R19(660,RMPRDA,75,"E")):R19(660,RMPRDA,75,"E"),1:"")
"RTN","RMPR9S4E",143,0)
 .; "RESTORATIONS LAB CODE: "
"RTN","RMPR9S4E",144,0)
 .S RESULTS(44)=$S($D(R19(660,RMPRDA,76,"E")):R19(660,RMPRDA,76,"E"),$D(R19(660,RMPRDA,77,"E")):R19(660,RMPRDA,77,"E"),1:"")
"RTN","RMPR9S4E",145,0)
 ;purchasing and issue from stock amis
"RTN","RMPR9S4E",146,0)
 ; "DISABILITY SERVED: ",
"RTN","RMPR9S4E",147,0)
 S RESULTS(45)=$G(R19(660,RMPRDA,62,"E"))
"RTN","RMPR9S4E",148,0)
 ;appliance/item information
"RTN","RMPR9S4E",149,0)
 ; "APPLIANCE: ",
"RTN","RMPR9S4E",150,0)
 ;S RESULTS(46)=$G(R19(660,RMPRDA,4,"E"))
"RTN","RMPR9S4E",151,0)
 S RESULTS(46)=$G(R19(660,RMPRDA,89,"E"))
"RTN","RMPR9S4E",152,0)
 ; "PSAS HCPCS: ",
"RTN","RMPR9S4E",153,0)
 S RESULTS(47)=$G(R19(660,RMPRDA,4.5,"E"))
"RTN","RMPR9S4E",154,0)
 ; "PSAS HCPCS DESC.
"RTN","RMPR9S4E",155,0)
 S RESULTS(48)=""
"RTN","RMPR9S4E",156,0)
 I $P($G(^RMPR(660,RMPRDA,1)),U,4) S RESULTS(48)=$P($G(^RMPR(661.1,$P(^RMPR(660,RMPRDA,1),U,4),0)),U,2)
"RTN","RMPR9S4E",157,0)
 ;added by #69
"RTN","RMPR9S4E",158,0)
 ;
"RTN","RMPR9S4E",159,0)
 ; Patch 92 - Code Set Versioning (CSV) changes below inserted afer the line above for #69
"RTN","RMPR9S4E",160,0)
 ; AAC - 08/04/04
"RTN","RMPR9S4E",161,0)
 ;
"RTN","RMPR9S4E",162,0)
 S (RMPRICD,RMPRIC0,RMPRCOD,RMPRIC9,RESULTS(49))="" S RMPRERR=0
"RTN","RMPR9S4E",163,0)
 S RMPRDAT=$G(R19(660,RMPRDA,.01,"E"))
"RTN","RMPR9S4E",164,0)
 I $D(^RMPR(660,RMPRDA,10)) S RMPRIC9=$P(^RMPR(660,RMPRDA,10),U,8)
"RTN","RMPR9S4E",165,0)
 I RMPRIC9'=""  D
"RTN","RMPR9S4E",166,0)
 .S RMPRICD=$$ICDDX^ICDCODE(RMPRIC9,RMPRDAT)
"RTN","RMPR9S4E",167,0)
 .S RMPRERR=$P(RMPRICD,U,1)
"RTN","RMPR9S4E",168,0)
 .I RMPRERR<0 S RESULTS(49)=$P(RMPRICD,U,2)
"RTN","RMPR9S4E",169,0)
ZZ ;
"RTN","RMPR9S4E",170,0)
 I RMPRERR>0 S RESULTS(49)=$P(RMPRICD,U,2)_" "_$E($P(RMPRICD,U,4),1,55) I $P(RMPRICD,U,10)'>0 S RESULTS(49)=RESULTS(49)_" "_"** Inactive ** Date: " S Y=$P(RMPRICD,U,12) D DD^%DT S RESULTS(49)=RESULTS(49)_" "_Y
"RTN","RMPR9S4E",171,0)
 ; "ICD-9 Code: ",
"RTN","RMPR9S4E",172,0)
 ; S RESULTS(49)=RMPRICC_"    "_$E($G(^ICD9(RMPRIC9,1)),1,55)
"RTN","RMPR9S4E",173,0)
 ;
"RTN","RMPR9S4E",174,0)
 ; End Patch 92
"RTN","RMPR9S4E",175,0)
 ;
"RTN","RMPR9S4E",176,0)
 ; "CPT MODIFIER: ",
"RTN","RMPR9S4E",177,0)
 S RESULTS(50)=$G(R19(660,RMPRDA,38.1,"E"))
"RTN","RMPR9S4E",178,0)
 ; "DESCRIPTION: ",
"RTN","RMPR9S4E",179,0)
 S RESULTS(51)=$G(R19(660,RMPRDA,24,"E"))
"RTN","RMPR9S4E",180,0)
 ; ,"EXTENDED DESCRIPTION: ",!
"RTN","RMPR9S4E",181,0)
 N R28
"RTN","RMPR9S4E",182,0)
 I $D(R19(660,RMPRDA,28)) D
"RTN","RMPR9S4E",183,0)
 .;command part of new standards
"RTN","RMPR9S4E",184,0)
 .MERGE R28=R19(660,RMPRDA,28)
"RTN","RMPR9S4E",185,0)
 S LN=0,CNT=52
"RTN","RMPR9S4E",186,0)
 F  S LN=$O(R28(LN)) Q:LN'>0  D
"RTN","RMPR9S4E",187,0)
 .S RESULTS(CNT)=R28(LN)
"RTN","RMPR9S4E",188,0)
 .S CNT=CNT+1
"RTN","RMPR9S4E",189,0)
 G EXIT
"RTN","RMPR9S4E",190,0)
 ;
"RTN","RMPR9S4E",191,0)
HDR ;display heading
"RTN","RMPR9S4E",192,0)
 S RESULTS(1)=RMPRNAM
"RTN","RMPR9S4E",193,0)
 ; " SSN: "
"RTN","RMPR9S4E",194,0)
 S RESULTS(2)=$E(RMPRSSN,1,3)_"-"_$E(RMPRSSN,4,5)_"-"_$E(RMPRSSN,6,10)
"RTN","RMPR9S4E",195,0)
 S RESULTS(3)=$G(R19(660,RMPRDA,8,"E"))
"RTN","RMPR9S4E",196,0)
 ; "DOB: "
"RTN","RMPR9S4E",197,0)
 S RESULTS(4)=$S(RMPRDOB:$E(RMPRDOB,4,5)_"-"_$E(RMPRDOB,6,7)_"-"_(1700+$E(RMPRDOB,1,3)),1:"Unknown")
"RTN","RMPR9S4E",198,0)
 Q
"RTN","RMPR9S4E",199,0)
EXIT ;common exit point
"RTN","RMPR9S4E",200,0)
 I '$D(RESULTS) S RESULTS(0)="NOTHING TO REPORT"
"RTN","RMPR9S4E",201,0)
 K R19,RV,RMPRICC,RMPRICD,RMPRIC9,RMPRCOD,RMPRDAT,RMPRERR,RMPRIC0,Y
"RTN","RMPR9S4E",202,0)
 Q
"RTN","RMPR9S4E",203,0)
 ;end
"RTN","RMPREOSA")
0^28^B15578293^B13692945
"RTN","RMPREOSA",1,0)
RMPREOSA ;HINES-IOFO/HNC - Clone, Auto Adaptive, Clothing Allowance ;10/31/03  14:17
"RTN","RMPREOSA",2,0)
 ;;3.0;PROSTHETICS;**80,75**;Feb 09, 1996;Build 25
"RTN","RMPREOSA",3,0)
EN ;Add Auto Adaptive Suspense
"RTN","RMPREOSA",4,0)
 ;
"RTN","RMPREOSA",5,0)
 D NOW^%DTC S X=%
"RTN","RMPREOSA",6,0)
 S DIC="^RMPR(668,",DIC(0)="AEQLM",DLAYGO=668
"RTN","RMPREOSA",7,0)
 S DIC("DR")="1////^S X=RMPRDFN;22R;14////^S X=""O"";8////^S X=DUZ;9////^S X=8;3////^S X=9;2////^S X=RMPR(""STA"")"
"RTN","RMPREOSA",8,0)
 K DINUM,D0,DD,DO D FILE^DICN K DLAYGO G:Y'>0 EX S (RDA,DA)=+Y
"RTN","RMPREOSA",9,0)
 S DIE="^RMPR(668,",DR="13;4"
"RTN","RMPREOSA",10,0)
 L +^RMPR(668,RDA,0):1 I $T=0 W $C(7),?5,!,"Someone else is editing this record" G EX
"RTN","RMPREOSA",11,0)
 D ^DIE L -^RMPR(668,RDA,0)
"RTN","RMPREOSA",12,0)
 I '$P(^RMPR(668,RDA,0),U,3) S DA=RDA,DIK="^RMPR(668," D ^DIK W !,$C(7),?5,"Deleted..."
"RTN","RMPREOSA",13,0)
EX K X,DIC,DIE,DR,Y
"RTN","RMPREOSA",14,0)
 Q
"RTN","RMPREOSA",15,0)
 ;
"RTN","RMPREOSA",16,0)
EN1 ;Add Clothing Allowance Suspense
"RTN","RMPREOSA",17,0)
 ;
"RTN","RMPREOSA",18,0)
 D NOW^%DTC S X=%
"RTN","RMPREOSA",19,0)
 S DIC="^RMPR(668,",DIC(0)="AEQLM",DLAYGO=668
"RTN","RMPREOSA",20,0)
 S DIC("DR")="1////^S X=RMPRDFN;22R;14////^S X=""O"";8////^S X=DUZ;9////^ S X=6;3////^S X=9;2////^S X=RMPR(""STA"")"
"RTN","RMPREOSA",21,0)
 K DINUM,D0,DD,DO D FILE^DICN K DLAYGO G:Y'>0 EX S (RDA,DA)=+Y
"RTN","RMPREOSA",22,0)
 S DIE="^RMPR(668,",DR="13;4"
"RTN","RMPREOSA",23,0)
 L +^RMPR(668,RDA,0):1 I $T=0 W $C(7),?5,!,"Someone else is editing this  record" G EX
"RTN","RMPREOSA",24,0)
 D ^DIE L -^RMPR(668,RDA,0)
"RTN","RMPREOSA",25,0)
 I '$P(^RMPR(668,RDA,0),U,3) S DA=RDA,DIK="^RMPR(668," D ^DIK W !,$C(7),?5,"Deleted..."
"RTN","RMPREOSA",26,0)
 K X,DIC,DIE,DR,Y
"RTN","RMPREOSA",27,0)
 Q
"RTN","RMPREOSA",28,0)
EN2 ;Create Clone CPRS Suspense
"RTN","RMPREOSA",29,0)
 ;
"RTN","RMPREOSA",30,0)
 N RMPR9
"RTN","RMPREOSA",31,0)
 S RMPR9=$P(^RMPR(668,DA,0),U,8)
"RTN","RMPREOSA",32,0)
 I $P(^RMPR(668,DA,0),U,8)>4&(RMPR9'=9)&(RMPR9'=11) W !!!,"Only CPRS Suspense Can Be Cloned!",!! H 2 Q
"RTN","RMPREOSA",33,0)
 I $P(^RMPR(668,DA,0),U,8)=11&($P($G(^RMPR(668,DA,0)),U,15)'>0) W !!!,"This was a Manual Request, not a CPRS Suspense.  Please create another Manual.",!! H 2 Q
"RTN","RMPREOSA",34,0)
ST2 S RMPRH=DA
"RTN","RMPREOSA",35,0)
 S (RMPRFLD,RMPRFI,RMPRFW)=0
"RTN","RMPREOSA",36,0)
 D GETS^DIQ(668,RMPRH,"**","I","OUT")
"RTN","RMPREOSA",37,0)
 Q:'$D(OUT)
"RTN","RMPREOSA",38,0)
 ;create new record
"RTN","RMPREOSA",39,0)
 D NOW^%DTC S X=%
"RTN","RMPREOSA",40,0)
 S DIC="^RMPR(668,",DIC(0)="L"
"RTN","RMPREOSA",41,0)
 K DD,DO D FILE^DICN
"RTN","RMPREOSA",42,0)
 S RMPRA=+Y
"RTN","RMPREOSA",43,0)
 M R6681(668,RMPRA_",")=OUT(668,RMPRH_",")
"RTN","RMPREOSA",44,0)
 F  S RMPRFLD=$O(R6681(668,RMPRA_",",RMPRFLD)) Q:RMPRFLD'>0  D
"RTN","RMPREOSA",45,0)
 . F  S RMPRFI=$O(R6681(668,RMPRA_",",RMPRFLD,RMPRFI)) Q:RMPRFI=""  D
"RTN","RMPREOSA",46,0)
 .. I RMPRFI="I" S R668(668,RMPRA_",",RMPRFLD)=R6681(668,RMPRA_",",RMPRFLD,RMPRFI) Q
"RTN","RMPREOSA",47,0)
 .. S R668(668,RMPRA_",",RMPRFLD,RMPRFI)=R6681(668,RMPRA_",",RMPRFLD,RMPRFI)
"RTN","RMPREOSA",48,0)
 S RMPRC=RMPRA_","
"RTN","RMPREOSA",49,0)
 S R668(668,RMPRA_",",4)="R668(668,"_""""_RMPRC_""""_",4)"
"RTN","RMPREOSA",50,0)
 I $D(R668(668,RMPRA_",",7)) S R668(668,RMPRA_",",7)="R668(668,"_""""_RMPRC_""""_",7)"
"RTN","RMPREOSA",51,0)
 K OUT
"RTN","RMPREOSA",52,0)
 ;
"RTN","RMPREOSA",53,0)
 ;don't set the following fields
"RTN","RMPREOSA",54,0)
 K R668(668,RMPRA_",",.01)
"RTN","RMPREOSA",55,0)
 ;urgency
"RTN","RMPREOSA",56,0)
 K R668(668,RMPRA_",",2.3)
"RTN","RMPREOSA",57,0)
 ;completion date
"RTN","RMPREOSA",58,0)
 K R668(668,RMPRA_",",5)
"RTN","RMPREOSA",59,0)
 ;completed by
"RTN","RMPREOSA",60,0)
 K R668(668,RMPRA_",",6)
"RTN","RMPREOSA",61,0)
 ;initial action note
"RTN","RMPREOSA",62,0)
 K R668(668,RMPRA_",",7)
"RTN","RMPREOSA",63,0)
 ;suspended by
"RTN","RMPREOSA",64,0)
 S R668(668,RMPRA_",",8)=DUZ
"RTN","RMPREOSA",65,0)
 ;patient 2319
"RTN","RMPREOSA",66,0)
 K R668(668,RMPRA_",",8.1)
"RTN","RMPREOSA",67,0)
 ;amis grouper
"RTN","RMPREOSA",68,0)
 K R668(668,RMPRA_",",8.2)
"RTN","RMPREOSA",69,0)
 ;init action date
"RTN","RMPREOSA",70,0)
 K R668(668,RMPRA_",",10)
"RTN","RMPREOSA",71,0)
 ;completion note
"RTN","RMPREOSA",72,0)
 K R668(668,RMPRA_",",12)
"RTN","RMPREOSA",73,0)
 ;initial action by
"RTN","RMPREOSA",74,0)
 K R668(668,RMPRA_",",16)
"RTN","RMPREOSA",75,0)
 ;cancelled by
"RTN","RMPREOSA",76,0)
 K R668(668,RMPRA_",",17)
"RTN","RMPREOSA",77,0)
 ;cancel date
"RTN","RMPREOSA",78,0)
 K R668(668,RMPRA_",",18)
"RTN","RMPREOSA",79,0)
 ;CPRS order may be purged, remobe
"RTN","RMPREOSA",80,0)
 K R668(668,RMPRA_",",19)
"RTN","RMPREOSA",81,0)
 ;cancel note
"RTN","RMPREOSA",82,0)
 K R668(668,RMPRA_",",21)
"RTN","RMPREOSA",83,0)
 ;date rx written, keep same per Karen 9/15/03
"RTN","RMPREOSA",84,0)
 ;K R668(668,RMPRA_",",22)
"RTN","RMPREOSA",85,0)
 ;consult service
"RTN","RMPREOSA",86,0)
 K R668(668,RMPRA_",",23)
"RTN","RMPREOSA",87,0)
 ;consult needed for display set to orig pointer
"RTN","RMPREOSA",88,0)
 S R668(668,RMPRA_",",20)=$P(^RMPR(668,RMPRH,0),U,15)
"RTN","RMPREOSA",89,0)
 ;forwarded by
"RTN","RMPREOSA",90,0)
 K R668(668,RMPRA_",",24)
"RTN","RMPREOSA",91,0)
 ;consult visit
"RTN","RMPREOSA",92,0)
 K R668(668,RMPRA_",",30)
"RTN","RMPREOSA",93,0)
 ;set status to open
"RTN","RMPREOSA",94,0)
 S R668(668,RMPRA_",",14)="O"
"RTN","RMPREOSA",95,0)
 ;set type to clone
"RTN","RMPREOSA",96,0)
 S R668(668,RMPRA_",",9)=7
"RTN","RMPREOSA",97,0)
 ;will automatically set the Billing Fields as needed IF NO DUPLICATES!
"RTN","RMPREOSA",98,0)
 ;32,32.1,32.2,33,33.1,33.2,33.3
"RTN","RMPREOSA",99,0)
 S DIC="^RMPR(668,",DIC(0)="AEQM"
"RTN","RMPREOSA",100,0)
 D FILE^DIE("K","R668","ERROR")
"RTN","RMPREOSA",101,0)
 I $D(ERROR) W !,ERROR("DIERR",1,"TEXT",1),!,"Could NOT CLONE DUE TO BAD DATA!" H 2 K ERROR,R668 G KILL
"RTN","RMPREOSA",102,0)
 ;file field #1 Veteran
"RTN","RMPREOSA",103,0)
 ;S DA=RMPRA
"RTN","RMPREOSA",104,0)
 ;S DIE="^RMPR(668,"
"RTN","RMPREOSA",105,0)
 ;S DR="1////^S X=RMPRDFN"
"RTN","RMPREOSA",106,0)
 ;L +^RMPR(668,RMPRA,0):1 I $T=0 W $C(7),?5,!,"Someone else is editing this record" G EX
"RTN","RMPREOSA",107,0)
 ;D ^DIE L -^RMPR(668,RMPRA,0)
"RTN","RMPREOSA",108,0)
 ;print view request, ask for device
"RTN","RMPREOSA",109,0)
 W !!,"Done... Please select a device to print the new SUSPENSE Record."
"RTN","RMPREOSA",110,0)
 S DA=RMPRA
"RTN","RMPREOSA",111,0)
 S L=0
"RTN","RMPREOSA",112,0)
 S DIC="^RMPR(668,",FLDS="[RMPR VIEW REQUEST]"
"RTN","RMPREOSA",113,0)
 S BY="@NUMBER",(FR,TO)=DA
"RTN","RMPREOSA",114,0)
 D EN1^DIP
"RTN","RMPREOSA",115,0)
 N DIR S DIR(0)="E" D ^DIR
"RTN","RMPREOSA",116,0)
 W @IOF
"RTN","RMPREOSA",117,0)
 S DA=^TMP($J,"RMPREOEE",XDA,0)
"RTN","RMPREOSA",118,0)
 D VALL^RMPREO24(DA,.L) Q:L="^"
"RTN","RMPREOSA",119,0)
 K RMPRA,RMPRC,DFN,DA,DIC,X,Y
"RTN","RMPREOSA",120,0)
 Q
"RTN","RMPREOSA",121,0)
KILL ;get rid of new clone if error
"RTN","RMPREOSA",122,0)
 S DA=RMPRA,DIK=668 D ^DIK
"RTN","RMPREOSA",123,0)
 Q
"RTN","RMPREOSA",124,0)
 ;END
"RTN","RMPRGULK")
0^29^B554567^n/a
"RTN","RMPRGULK",1,0)
RMPRGULK ;HOIFO/SPS - PROSTHETICS FILE CHECK/LOCK  ;OCT 2006
"RTN","RMPRGULK",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPRGULK",3,0)
 ;
"RTN","RMPRGULK",4,0)
B1(RMIE1) G B2
"RTN","RMPRGULK",5,0)
OWLL(RESULTS,RMIE1) ;broker entry point
"RTN","RMPRGULK",6,0)
B2 ;
"RTN","RMPRGULK",7,0)
 L
"RTN","RMPRGULK",8,0)
 L +^RMPR(664.1,RMIE1):2
"RTN","RMPRGULK",9,0)
 I $T=0 S RESULTS(0)="1^Someone else is Editing this record, Please try later!" G EXIT
"RTN","RMPRGULK",10,0)
 E  S RESULTS(0)=0
"RTN","RMPRGULK",11,0)
 Q
"RTN","RMPRGULK",12,0)
OWLU(RESULTS,RMIE1) ;
"RTN","RMPRGULK",13,0)
 L -^RMPR(664.1,RMIE1)
"RTN","RMPRGULK",14,0)
 S RESULTS(0)=0
"RTN","RMPRGULK",15,0)
 Q
"RTN","RMPRGULK",16,0)
EXIT Q
"RTN","RMPRGULK",17,0)
 ;END
"RTN","RMPROWL")
0^23^B7693046^n/a
"RTN","RMPROWL",1,0)
RMPROWL ;VACO/HNC- CLONE OWL SUSPENSE IN FILE 668 ;5/24/06
"RTN","RMPROWL",2,0)
 ;;3.0;PROSTHETICS;**75**;Feb 09, 1996;Build 25
"RTN","RMPROWL",3,0)
 ;
"RTN","RMPROWL",4,0)
 ; Passed parameter DA - Prosthetics Consult Record from ^RMPR(668
"RTN","RMPROWL",5,0)
 ;
"RTN","RMPROWL",6,0)
 ; Passed parameter RMPRW - Work Order Number, external format
"RTN","RMPROWL",7,0)
 ;
"RTN","RMPROWL",8,0)
 ; Return RESULT(1)=ERROR STRING, OR Message ALL IS OKAY
"RTN","RMPROWL",9,0)
 Q
"RTN","RMPROWL",10,0)
 ;
"RTN","RMPROWL",11,0)
EN2(DA,RMPRW)      ;Create OWL Clone in Suspense
"RTN","RMPROWL",12,0)
 G EN3
"RTN","RMPROWL",13,0)
EN(RESULT,DA,RMPRW) ;GUI entry point
"RTN","RMPROWL",14,0)
 ;
"RTN","RMPROWL",15,0)
EN3 ;
"RTN","RMPROWL",16,0)
 N RMP9 S RMP9=$P($G(^RMPR(668,DA,0)),U,8)
"RTN","RMPROWL",17,0)
 I RMP9="" S RESULT(1)="No Suspense Available to Clone!" G EXIT
"RTN","RMPROWL",18,0)
 I (RMP9'=11) S RESULT(1)="Only LAB Can be CLONED" G EXIT
"RTN","RMPROWL",19,0)
 S RMPRH=DA
"RTN","RMPROWL",20,0)
 S (RMPRFLD,RMPRFI,RMPRFW)=0
"RTN","RMPROWL",21,0)
 D GETS^DIQ(668,RMPRH,"**","I","OUT")
"RTN","RMPROWL",22,0)
 Q:'$D(OUT)
"RTN","RMPROWL",23,0)
 ;create new record
"RTN","RMPROWL",24,0)
 D NOW^%DTC S X=%
"RTN","RMPROWL",25,0)
 S DIC="^RMPR(668,",DIC(0)="L"
"RTN","RMPROWL",26,0)
 K DD,DO D FILE^DICN
"RTN","RMPROWL",27,0)
 S RMPRA=+Y
"RTN","RMPROWL",28,0)
 M R6681(668,RMPRA_",")=OUT(668,RMPRH_",")
"RTN","RMPROWL",29,0)
 F  S RMPRFLD=$O(R6681(668,RMPRA_",",RMPRFLD)) Q:RMPRFLD'>0  D
"RTN","RMPROWL",30,0)
 . F  S RMPRFI=$O(R6681(668,RMPRA_",",RMPRFLD,RMPRFI)) Q:RMPRFI=""  D
"RTN","RMPROWL",31,0)
 .. I RMPRFI="I" S R668(668,RMPRA_",",RMPRFLD)=R6681(668,RMPRA_",",RMPRFLD,RMPRFI) Q
"RTN","RMPROWL",32,0)
 .. S R668(668,RMPRA_",",RMPRFLD,RMPRFI)=R6681(668,RMPRA_",",RMPRFLD,RMPRFI)
"RTN","RMPROWL",33,0)
 S RMPRC=RMPRA_","
"RTN","RMPROWL",34,0)
 S R668(668,RMPRA_",",4)="R668(668,"_""""_RMPRC_""""_",4)"
"RTN","RMPROWL",35,0)
 I $D(R668(668,RMPRA_",",7)) S R668(668,RMPRA_",",7)="R668(668,"_""""_RMPRC_""""_",7)"
"RTN","RMPROWL",36,0)
 K OUT
"RTN","RMPROWL",37,0)
 ;
"RTN","RMPROWL",38,0)
 ;don't set the following fields
"RTN","RMPROWL",39,0)
 K R668(668,RMPRA_",",.01)
"RTN","RMPROWL",40,0)
 ;urgency
"RTN","RMPROWL",41,0)
 K R668(668,RMPRA_",",2.3)
"RTN","RMPROWL",42,0)
 ;completion date
"RTN","RMPROWL",43,0)
 K R668(668,RMPRA_",",5)
"RTN","RMPROWL",44,0)
 ;completed by
"RTN","RMPROWL",45,0)
 K R668(668,RMPRA_",",6)
"RTN","RMPROWL",46,0)
 ;initial action note
"RTN","RMPROWL",47,0)
 K R668(668,RMPRA_",",7)
"RTN","RMPROWL",48,0)
 ;suspended by
"RTN","RMPROWL",49,0)
 S R668(668,RMPRA_",",8)=DUZ
"RTN","RMPROWL",50,0)
 ;patient 2319
"RTN","RMPROWL",51,0)
 K R668(668,RMPRA_",",8.1)
"RTN","RMPROWL",52,0)
 ;amis grouper
"RTN","RMPROWL",53,0)
 K R668(668,RMPRA_",",8.2)
"RTN","RMPROWL",54,0)
 ;init action date
"RTN","RMPROWL",55,0)
 K R668(668,RMPRA_",",10)
"RTN","RMPROWL",56,0)
 ;completion note
"RTN","RMPROWL",57,0)
 K R668(668,RMPRA_",",12)
"RTN","RMPROWL",58,0)
 ;initial action by
"RTN","RMPROWL",59,0)
 K R668(668,RMPRA_",",16)
"RTN","RMPROWL",60,0)
 ;cancelled by
"RTN","RMPROWL",61,0)
 K R668(668,RMPRA_",",17)
"RTN","RMPROWL",62,0)
 ;cancel date
"RTN","RMPROWL",63,0)
 K R668(668,RMPRA_",",18)
"RTN","RMPROWL",64,0)
 ;CPRS order may be purged, remobe
"RTN","RMPROWL",65,0)
 K R668(668,RMPRA_",",19)
"RTN","RMPROWL",66,0)
 ;cancel note
"RTN","RMPROWL",67,0)
 K R668(668,RMPRA_",",21)
"RTN","RMPROWL",68,0)
 ;date rx written, keep same per Karen 9/15/03
"RTN","RMPROWL",69,0)
 ;K R668(668,RMPRA_",",22)
"RTN","RMPROWL",70,0)
 ;consult service
"RTN","RMPROWL",71,0)
 K R668(668,RMPRA_",",23)
"RTN","RMPROWL",72,0)
 ;consult needed for display set to orig pointer
"RTN","RMPROWL",73,0)
 S R668(668,RMPRA_",",20)=$P(^RMPR(668,RMPRH,0),U,15)
"RTN","RMPROWL",74,0)
 ;forwarded by
"RTN","RMPROWL",75,0)
 K R668(668,RMPRA_",",24)
"RTN","RMPROWL",76,0)
 ;consult visit
"RTN","RMPROWL",77,0)
 K R668(668,RMPRA_",",30)
"RTN","RMPROWL",78,0)
 ;set status to open
"RTN","RMPROWL",79,0)
 S R668(668,RMPRA_",",14)="O"
"RTN","RMPROWL",80,0)
 ;set type to clone
"RTN","RMPROWL",81,0)
 S R668(668,RMPRA_",",9)=7
"RTN","RMPROWL",82,0)
 ;will automatically set the Billing Fields as needed IF NO DUPLICATES!
"RTN","RMPROWL",83,0)
 ;32,32.1,32.2,33,33.1,33.2,33.3
"RTN","RMPROWL",84,0)
 S DIC="^RMPR(668,",DIC(0)="AEQM"
"RTN","RMPROWL",85,0)
 D FILE^DIE("K","R668","ERROR")
"RTN","RMPROWL",86,0)
 I $D(ERROR) S RESULT(1)="COULD NOT CLONE DUE TO BAD DATA IN SUSPENSE!" D KILL
"RTN","RMPROWL",87,0)
EXIT ;exit
"RTN","RMPROWL",88,0)
 K R6681,RMPRA,RMPRC,RMPRFLD,RMPRFI,RMPRFW,RMPRH
"RTN","RMPROWL",89,0)
 S RESULT(1)="New Clone Suspense Created."
"RTN","RMPROWL",90,0)
 Q
"RTN","RMPROWL",91,0)
 K DIC,DIK,ERROR,R668,X,Y
"RTN","RMPROWL",92,0)
KILL ;get rid of new clone if error
"RTN","RMPROWL",93,0)
 S DA=RMPRA,DIK=668 D ^DIK
"RTN","RMPROWL",94,0)
 G EXIT
"RTN","RMPROWL",95,0)
 Q
"RTN","RMPROWL",96,0)
 ;
"RTN","RMPRP75")
0^8^B10554^n/a
"RTN","RMPRP75",1,0)
RMPRP75 ;HOIFO/SPS - POST INIT PROSTHETICS UTILITY ;10/20/05
"RTN","RMPRP75",2,0)
 ;;3.0;Prosthetics;**75**;Feb 09, 1996;Build 25
"RTN","RMPRP75",3,0)
 D ^RMPR112P
"RTN","RMPRP75",4,0)
 Q
"RTN","RMPRPAT2")
0^26^B25940466^B25980530
"RTN","RMPRPAT2",1,0)
RMPRPAT2 ;PHX/RFM/JLT/HNC-DISPLAY PATIENT ITEM ACTIVITY ;10/19/1993
"RTN","RMPRPAT2",2,0)
 ;;3.0;PROSTHETICS;**32,34,29,44,99,75**;Feb 09, 1996;Build 25
"RTN","RMPRPAT2",3,0)
 D HDR
"RTN","RMPRPAT2",4,0)
 S (RA,AN,ANS,RK,RZ)=0 K ^TMP($J,"TT"),^TMP($J,"AG"),IT
"RTN","RMPRPAT2",5,0)
 MERGE ^TMP($J,"TT")=^RMPR(660,"AC",RMPRDFN)
"RTN","RMPRPAT2",6,0)
 S B=0
"RTN","RMPRPAT2",7,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPRPAT2",8,0)
 . S BC=0
"RTN","RMPRPAT2",9,0)
 . F  S BC=$O(^TMP($J,"TT",B,BC)) Q:BC'>0  D
"RTN","RMPRPAT2",10,0)
 . .Q:$P($G(^RMPR(660,BC,0)),U,10)'=RMPR("STA")
"RTN","RMPRPAT2",11,0)
 . .S GN=$P($G(^RMPR(660,BC,"AMS")),U,1)
"RTN","RMPRPAT2",12,0)
 . .S ND=$P($G(^RMPR(660,BC,1)),U,4)
"RTN","RMPRPAT2",13,0)
 . .I ND S ND=$P(^RMPR(661.1,ND,0),U,8)
"RTN","RMPRPAT2",14,0)
 . .S:ND="" ND=2
"RTN","RMPRPAT2",15,0)
 . .S:GN="" GN=BC
"RTN","RMPRPAT2",16,0)
 . .S ^TMP($J,"AG",GN,ND,BC)=B
"RTN","RMPRPAT2",17,0)
 S B=""
"RTN","RMPRPAT2",18,0)
 F  S B=$O(^TMP($J,"AG",B)) Q:B'>0  D
"RTN","RMPRPAT2",19,0)
 .S BC=""
"RTN","RMPRPAT2",20,0)
 .F  S BC=$O(^TMP($J,"AG",B,BC)) Q:BC'>0  D
"RTN","RMPRPAT2",21,0)
 . .Q:BC=2
"RTN","RMPRPAT2",22,0)
 . .MERGE ^TMP($J,"AGG")=^TMP($J,"AG",B)
"RTN","RMPRPAT2",23,0)
 . .S HC="",GTCST=0
"RTN","RMPRPAT2",24,0)
 . .K HCC1
"RTN","RMPRPAT2",25,0)
 . .F  S HC=$O(^TMP($J,"AGG",HC)) Q:HC'>0  D
"RTN","RMPRPAT2",26,0)
 . . .S HCC=0
"RTN","RMPRPAT2",27,0)
 . . .;changes for Surgical Implants
"RTN","RMPRPAT2",28,0)
 . . .S BDC=""
"RTN","RMPRPAT2",29,0)
 . . .F BDC=1:1 S HCC=$O(^TMP($J,"AGG",HC,HCC)) Q:HCC'>0  D
"RTN","RMPRPAT2",30,0)
 . . . .S GTCST=GTCST+$P(^RMPR(660,HCC,0),U,16)
"RTN","RMPRPAT2",31,0)
 . . . .I BDC=1&(HC'=2) S HCC1=HCC
"RTN","RMPRPAT2",32,0)
 . . . .I BDC'=1 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPRPAT2",33,0)
 . . . .I HC=2 K ^TMP($J,"TT",^TMP($J,"AGG",HC,HCC),HCC)
"RTN","RMPRPAT2",34,0)
 . .I $G(HCC1) S $P(^TMP($J,"TT",^TMP($J,"AGG",1,HCC1),HCC1),U,3)=GTCST K HCC1
"RTN","RMPRPAT2",35,0)
 . .K GTCST,^TMP($J,"AGG")
"RTN","RMPRPAT2",36,0)
 K ^TMP($J,"AG"),BDC
"RTN","RMPRPAT2",37,0)
 S B=0,RC=1
"RTN","RMPRPAT2",38,0)
 F  S B=$O(^TMP($J,"TT",B)) Q:B'>0  D
"RTN","RMPRPAT2",39,0)
 .S RK=0
"RTN","RMPRPAT2",40,0)
 .F  S RK=$O(^TMP($J,"TT",B,RK)) Q:RK'>0  D
"RTN","RMPRPAT2",41,0)
 . .Q:$D(^RMPO(665.72,"AC",RK))
"RTN","RMPRPAT2",42,0)
 . .S IT(RC)=RK
"RTN","RMPRPAT2",43,0)
 . .I $P(^TMP($J,"TT",B,RK),U,3) S $P(IT(RC),U,3)=$P(^TMP($J,"TT",B,RK),U,3)
"RTN","RMPRPAT2",44,0)
 . .S RC=RC+1
"RTN","RMPRPAT2",45,0)
 S RK=0,RZ=0
"RTN","RMPRPAT2",46,0)
 K ^TMP($J,"TT"),B
"RTN","RMPRPAT2",47,0)
 ;
"RTN","RMPRPAT2",48,0)
 G:'$D(IT) END
"RTN","RMPRPAT2",49,0)
DIS ;DISPLAY APPLIANCES OR REPAIRS
"RTN","RMPRPAT2",50,0)
 I $G(RK)="" S RK="",RC=""
"RTN","RMPRPAT2",51,0)
 I (RK+1'>RC)&($G(IT(RK+1))) S RK=RK+1 S AN=+IT(RK),Y=^RMPR(660,AN,0) D PRT,OVER:((IOSL-4)<$Y) G:'$D(ANS)!(ANS=U)!($D(DUOUT))!($D(DTOUT)) EXIT G DIS
"RTN","RMPRPAT2",52,0)
END I RC=0 W !,"No Appliances or Repairs exist for this veteran!",!! H 3 G EXIT
"RTN","RMPRPAT2",53,0)
 ;
"RTN","RMPRPAT2",54,0)
 I RC>0 W !!,"End of Appliance/Repair records for this veteran!" D OVER I $G(RK)+1'>$G(RC)&($G(IT($G(RK)+1))) D DIS
"RTN","RMPRPAT2",55,0)
 ;
"RTN","RMPRPAT2",56,0)
EXIT K I,J,L,R0,IT,RA
"RTN","RMPRPAT2",57,0)
 Q:'$D(RMPRDFN)
"RTN","RMPRPAT2",58,0)
 W !
"RTN","RMPRPAT2",59,0)
 I $D(DUOUT)!($D(DTOUT)) G ASK1^RMPRPAT
"RTN","RMPRPAT2",60,0)
 S FL=4 G ASK2^RMPRPAT
"RTN","RMPRPAT2",61,0)
 Q
"RTN","RMPRPAT2",62,0)
PRT S DATE=$P(Y,U,3),TYPE=$P(Y,U,6),QTY=$P(Y,U,7)
"RTN","RMPRPAT2",63,0)
 S VEN=$P(Y,U,9),TRANS=$P(Y,U,4),STA=$P(Y,U,10),SN=$P(Y,U,11)
"RTN","RMPRPAT2",64,0)
 S DEL=$P(Y,U,12)
"RTN","RMPRPAT2",65,0)
 S CST=$S($P(Y,U,16)'="":$P(Y,U,16),$D(^RMPR(660,AN,"LB")):$P(^RMPR(660,AN,"LB"),U,9),1:"")
"RTN","RMPRPAT2",66,0)
 ;lab source of procurement
"RTN","RMPRPAT2",67,0)
 I $D(^RMPR(660,AN,"LB")) S RMPRLPRO=$P(^("LB"),U,3) D
"RTN","RMPRPAT2",68,0)
 .I RMPRLPRO="O" S RMPRLPRO="ORTHOTIC" Q
"RTN","RMPRPAT2",69,0)
 .I RMPRLPRO="R" S RMPRLPRO="RESTORATION" Q
"RTN","RMPRPAT2",70,0)
 .I RMPRLPRO="S" S RMPRLPRO="SHOE" Q
"RTN","RMPRPAT2",71,0)
 .I RMPRLPRO="W" S RMPRLPRO="WHEELCHAIR" Q
"RTN","RMPRPAT2",72,0)
 .I RMPRLPRO="N" S RMPRLPRO="FOOT CENTER" Q
"RTN","RMPRPAT2",73,0)
 .I RMPRLPRO="D" S RMPRLPRO="DDC" Q
"RTN","RMPRPAT2",74,0)
 ;form requested on
"RTN","RMPRPAT2",75,0)
 S FRM=$P(Y,U,13),REM=$P(Y,U,18)
"RTN","RMPRPAT2",76,0)
 S DATE=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3)
"RTN","RMPRPAT2",77,0)
 S TYPE=$P($G(^RMPR(660,AN,1)),U,4)
"RTN","RMPRPAT2",78,0)
 ;S TYPE=$S(TYPE="":"",$D(^RMPR(661,TYPE,0)):$P(^(0),U,1),1:"")
"RTN","RMPRPAT2",79,0)
 S AMIS=$P(Y,U,15),VEN=$S(VEN="":"",$D(^PRC(440,VEN,0)):$P(^(0),U,1),1:"")
"RTN","RMPRPAT2",80,0)
 I $D(^RMPR(660.1,"AC",AN)),$P(^RMPR(660.1,$O(^RMPR(660.1,"AC",AN,0)),0),U,11)]"" S AMIS=AMIS_"+"
"RTN","RMPRPAT2",81,0)
 S TRANS=$S(TRANS]"":TRANS,1:""),TRANS1="" S:TRANS="X" TRANS1=TRANS,TRANS=""
"RTN","RMPRPAT2",82,0)
 S DEL=$E(DEL,4,5)_"/"_$E(DEL,6,7)_"/"_$E(DEL,2,3) S:DEL="//" DEL=""
"RTN","RMPRPAT2",83,0)
 W !,RK,". ",DATE,?13,QTY,?17
"RTN","RMPRPAT2",84,0)
 ;W AMIS_$S(TYPE'="":$E($P(^PRC(441,TYPE,0),U,2),1,10),$P(Y,U,26)="D":"DELIVERY",$P(Y,U,26)="P":"PICKUP",$P(Y,U,17):"SHIPPING",1:"")
"RTN","RMPRPAT2",85,0)
 W AMIS_$S(TYPE'="":$E($P($G(^RMPR(661.1,TYPE,0)),U,2),1,10),$P(Y,U,26)="D":"DELIVERY",$P(Y,U,26)="P":"PICKUP",$P(Y,U,17):"SHIPPING",1:"")
"RTN","RMPRPAT2",86,0)
 ;historical item
"RTN","RMPRPAT2",87,0)
 I TYPE=""&($D(^RMPR(660,$P(IT(RK),U,1),"HST"))) W $E($P(^("HST"),U,1),1,10)
"RTN","RMPRPAT2",88,0)
 W ?30,TRANS,?31,TRANS1
"RTN","RMPRPAT2",89,0)
 ;display source of procurement for 2529-3 under vendor header
"RTN","RMPRPAT2",90,0)
 I $D(RMPRLPRO) W ?33,RMPRLPRO
"RTN","RMPRPAT2",91,0)
 ;I '$D(RMPRLPRO),VEN'="" W ?33,$E(VEN,1,10)
"RTN","RMPRPAT2",92,0)
 I VEN'="" W ?33,$E(VEN,1,10)
"RTN","RMPRPAT2",93,0)
 K RMPRLPRO
"RTN","RMPRPAT2",94,0)
 ;historical vendor
"RTN","RMPRPAT2",95,0)
 W:$D(^RMPR(660,$P(IT(RK),U,1),"HST")) $E($P(^("HST"),U,3),1,10)
"RTN","RMPRPAT2",96,0)
 W:STA'="" ?45,$P(^DIC(4,STA,99),U,1)
"RTN","RMPRPAT2",97,0)
 W ?50,$E(SN,1,9),?60,DEL
"RTN","RMPRPAT2",98,0)
 I $P(IT(RK),U,3) S CST=$P(IT(RK),U,3)
"RTN","RMPRPAT2",99,0)
 W ?71,$J($FN($S(CST'="":CST,$P(Y,U,17):$P(Y,U,17),1:""),"T",2),9)
"RTN","RMPRPAT2",100,0)
 W:REM]"" !,?3,REM
"RTN","RMPRPAT2",101,0)
 I $P(IT(RK),U,2)="" S $P(IT(RK),U,2)=RZ
"RTN","RMPRPAT2",102,0)
 Q
"RTN","RMPRPAT2",103,0)
OVER ;
"RTN","RMPRPAT2",104,0)
 N ANS
"RTN","RMPRPAT2",105,0)
 S RZ=RK W !,"+=Turned-In  *=Historical Data  I=Initial  X=Repair  S=Spare  R=Replacement",!,"Enter 1-",RK," to show full entry, '^' to exit or `return` to continue.  " R ANS:DTIME S:'$T ANS="^"
"RTN","RMPRPAT2",106,0)
 I ANS="^^" S ANS="^" G ASK1^RMPRPAT Q
"RTN","RMPRPAT2",107,0)
 I ANS="^" G ASK1^RMPRPAT Q
"RTN","RMPRPAT2",108,0)
 I ANS="",RK+1'>RC&($G(IT(RK+1))) D HDR Q
"RTN","RMPRPAT2",109,0)
 I ANS="" Q
"RTN","RMPRPAT2",110,0)
 I ANS'?1N.N!(ANS>RK)!(+ANS=0)!(+ANS'=ANS) W $C(7),!," Must be between 1 and ",RK," to be valid" G OVER
"RTN","RMPRPAT2",111,0)
 I ANS>0,(ANS<(RK+1)) S AN=ANS,RZ=RK D ^RMPRPAT3
"RTN","RMPRPAT2",112,0)
 S RK=$P(IT(ANS),U,2)
"RTN","RMPRPAT2",113,0)
 Q
"RTN","RMPRPAT2",114,0)
HDR ;Print Header, Screen 4
"RTN","RMPRPAT2",115,0)
 W @IOF
"RTN","RMPRPAT2",116,0)
 S PAGE=3
"RTN","RMPRPAT2",117,0)
 W !,$E(RMPRNAM,1,20),?23,"SSN: "
"RTN","RMPRPAT2",118,0)
 W $E(RMPRSSN,1,3)_"-"_$E(RMPRSSN,4,5)_"-"_$E(RMPRSSN,6,10)
"RTN","RMPRPAT2",119,0)
 W ?42,"DOB: "
"RTN","RMPRPAT2",120,0)
 S Y=RMPRDOB X ^DD("DD") W Y K Y
"RTN","RMPRPAT2",121,0)
 W ?61,"CLAIM# ",$G(RMPRCNUM)
"RTN","RMPRPAT2",122,0)
 W !?4,"Date",?12,"Qty",?19,"HCPCS",?28,"Type",?34,"Vendor",?45,"Sta",?50,"Serial",?58,"Delivery Date",?72,"Tot Cost"
"RTN","RMPRPAT2",123,0)
 Q
"RTN","RMPRWOFX")
0^27^B615875^n/a
"RTN","RMPRWOFX",1,0)
RMPRWOFX ;HOIFO/SPS - PRE-INIT PROSTHETICS WO FILE FIX ;08/24/06
"RTN","RMPRWOFX",2,0)
 ;;3.0;Prosthetics;**75**;Feb 09, 1996;Build 25
"RTN","RMPRWOFX",3,0)
 ;
"RTN","RMPRWOFX",4,0)
 ; Fix to check for installation of patch 75 then delete 
"RTN","RMPRWOFX",5,0)
 ; erroneous data in file 664.1 8th piece that might have been
"RTN","RMPRWOFX",6,0)
 ; left over from 1994-95
"RTN","RMPRWOFX",7,0)
EN ;
"RTN","RMPRWOFX",8,0)
 N RMPRP,RMPRIEN
"RTN","RMPRWOFX",9,0)
 S RMPRP=$$PATCH^XPDUTL("RMPR*3.0*75")
"RTN","RMPRWOFX",10,0)
 I RMPRP=1 Q  ;Stop if 75 is installed
"RTN","RMPRWOFX",11,0)
 ;
"RTN","RMPRWOFX",12,0)
 S RMPRIEN=""
"RTN","RMPRWOFX",13,0)
 F  S RMPRIEN=$O(^RMPR(664.1,RMPRIEN)) Q:RMPRIEN=""  D
"RTN","RMPRWOFX",14,0)
 .Q:'$D(^RMPR(664.1,RMPRIEN,0))
"RTN","RMPRWOFX",15,0)
 .Q:+$P(^RMPR(664.1,RMPRIEN,0),U)>2961231
"RTN","RMPRWOFX",16,0)
 .I $P(^RMPR(664.1,RMPRIEN,0),U,8)'="" S $P(^(0),U,8)=""
"RTN","RMPRWOFX",17,0)
 Q
"UP",664.1,664.16,-1)
664.1^2
"UP",664.1,664.16,0)
664.16
"VER")
8.0^22.0
"^DD",660,660,4.92,0)
HIGH TECH ITEM^S^1:YES;0:NO;^1;13^Q
"^DD",660,660,4.92,21,0)
^.001^3^3^3060331^^
"^DD",660,660,4.92,21,1,0)
This is the determination by the Prosthetics Laboratory Technician.
"^DD",660,660,4.92,21,2,0)
1=YES
"^DD",660,660,4.92,21,3,0)
0=NO
"^DD",660,660,4.92,"DT")
3060331
"^DD",660,660,72.5,0)
FREE TEXT WO #^F^^LB;2^K:$L(X)>20!($L(X)<14) X
"^DD",660,660,72.5,3)
Answer must be 14-20 characters in length.
"^DD",660,660,72.5,21,0)
^^2^2^3060420^
"^DD",660,660,72.5,21,1,0)
This is the actual human readable Work Order Number for NPPD 
"^DD",660,660,72.5,21,2,0)
identification purposes.
"^DD",660,660,72.5,"DT")
3060420
"^DD",664.1,664.1,.05,0)
SUSPENSE RECORD^P668'^RMPR(668,^0;8^Q
"^DD",664.1,664.1,.05,1,0)
^.1
"^DD",664.1,664.1,.05,1,1,0)
664.1^SUS
"^DD",664.1,664.1,.05,1,1,1)
S ^RMPR(664.1,"SUS",$E(X,1,30),DA)=""
"^DD",664.1,664.1,.05,1,1,2)
K ^RMPR(664.1,"SUS",$E(X,1,30),DA)
"^DD",664.1,664.1,.05,1,1,"%D",0)
^^2^2^3060615^
"^DD",664.1,664.1,.05,1,1,"%D",1,0)
Index on the pointer to file 668 Prosthetics Suspense Record initially
"^DD",664.1,664.1,.05,1,1,"%D",2,0)
created for the GUI Work Order.
"^DD",664.1,664.1,.05,1,1,"DT")
3060203
"^DD",664.1,664.1,.05,21,0)
^^2^2^3060615^
"^DD",664.1,664.1,.05,21,1,0)
Pointer to the Prosthetics Suspense Record file #668 that is associated
"^DD",664.1,664.1,.05,21,2,0)
with this work order.
"^DD",664.1,664.1,.05,"DT")
3060615
"^DD",664.1,664.1,2,0)
SOURCE OF PROCUREMENT^S^O:ORTHOTICS/PROSTHETICS;R:RESTORATION LAB;S:SHOE LAST CLINIC;W:WHEELCHAIR REPAIR SHOP;N:NATIONAL FOOT CENTER;D:DDC;E:EYEGLASS;^0;11^Q
"^DD",664.1,664.1,2,1,0)
^.1
"^DD",664.1,664.1,2,1,1,0)
664.1^H
"^DD",664.1,664.1,2,1,1,1)
S ^RMPR(664.1,"H",$E(X,1,30),DA)=""
"^DD",664.1,664.1,2,1,1,2)
K ^RMPR(664.1,"H",$E(X,1,30),DA)
"^DD",664.1,664.1,2,1,1,"%D",0)
^^2^2^2960124^
"^DD",664.1,664.1,2,1,1,"%D",1,0)
This will allow lookup by the Source of Procurement.  An example might
"^DD",664.1,664.1,2,1,1,"%D",2,0)
be the user only wanted to select form the Orthotic Lab, 2529-3's.
"^DD",664.1,664.1,2,1,1,"DT")
2950719
"^DD",664.1,664.1,2,3)
Enter the correct code for the Source of Procurement.
"^DD",664.1,664.1,2,10)

"^DD",664.1,664.1,2,11,0)
^.2LAP
"^DD",664.1,664.1,2,21,0)
^.001^1^1^3051014^^^^
"^DD",664.1,664.1,2,21,1,0)
Known sources from which Prosthetics Items are acquired within the VA.
"^DD",664.1,664.1,2,"DT")
3051014
"^DD",664.1,664.16,13.2,0)
HIGH TECH ITEM^S^1:YES;2:NO;^2;3^Q
"^DD",664.1,664.16,13.2,21,0)
^^2^2^3060331^
"^DD",664.1,664.16,13.2,21,1,0)
This is a determination by the Prosthetics Laboratory Technician.  1=YES 
"^DD",664.1,664.16,13.2,21,2,0)
this is a High Tech Item.
"^DD",664.1,664.16,13.2,"DT")
3060331
"^DD",668,668,9,0)
TYPE OF REQUEST^S^1:ROUTINE PROSTHETICS;2:EYEGLASS;3:CONTACT LENS;4:OXYGEN;5:MANUAL  NON CPRS;6:CLOTHING ALLOWANCE;7:CLONE;8:AUTO ADAPTIVE;9:PROSTHETICS IFC;10:DISCONTINUED;11:LAB;^0;8^Q
"^DD",668,668,9,21,0)
^.001^2^2^3060928^^^^
"^DD",668,668,9,21,1,0)
This is the type of order from CPRS Consult Tracking Module, or VBA.  It also
"^DD",668,668,9,21,2,0)
records MANUAL for paper orders received.
"^DD",668,668,9,"DT")
3060131
"BLD",5641,6)
^110
**END**
**END**

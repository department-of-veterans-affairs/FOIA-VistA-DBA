Released XT*7.3*98 SEQ #78
Extracted from mail message
**KIDS**:XT*7.3*98^

**INSTALL NAME**
XT*7.3*98
"BLD",884,0)
XT*7.3*98^TOOLKIT^0^3050915^y
"BLD",884,1,0)
^^2^2^3050725^
"BLD",884,1,1,0)
Kernel Toolkit patch XT*7.3.*98 VistA Patch Monitor. Please refer to
"BLD",884,1,2,0)
the Description in Forum Patch Module for details.
"BLD",884,4,0)
^9.64PA^9.95^2
"BLD",884,4,9.9,0)
9.9
"BLD",884,4,9.9,222)
y^y^f^^^^n
"BLD",884,4,9.95,0)
9.95
"BLD",884,4,9.95,222)
y^y^f^^^^n
"BLD",884,4,"B",9.9,9.9)

"BLD",884,4,"B",9.95,9.95)

"BLD",884,"ABPKG")
n
"BLD",884,"INI")
MERGE^XT73P98
"BLD",884,"INID")
^y^n
"BLD",884,"INIT")
EN^XT73P98
"BLD",884,"KRN",0)
^9.67PA^8989.52^19
"BLD",884,"KRN",.4,0)
.4
"BLD",884,"KRN",.4,"NM",0)
^9.68A^2^2
"BLD",884,"KRN",.4,"NM",1,0)
XTPM COMPLETE PATCH HISTORY    FILE #9.9^9.9^0
"BLD",884,"KRN",.4,"NM",2,0)
XTPM UNINSTALLED BY COMPLIANCE    FILE #9.9^9.9^0
"BLD",884,"KRN",.4,"NM","B","XTPM COMPLETE PATCH HISTORY    FILE #9.9",1)

"BLD",884,"KRN",.4,"NM","B","XTPM UNINSTALLED BY COMPLIANCE    FILE #9.9",2)

"BLD",884,"KRN",.401,0)
.401
"BLD",884,"KRN",.401,"NM",0)
^9.68A^2^2
"BLD",884,"KRN",.401,"NM",1,0)
XTPM COMPLETE PATCH HISTORY    FILE #9.9^9.9^0
"BLD",884,"KRN",.401,"NM",2,0)
XTPM UNINSTALLED BY COMPLIANCE    FILE #9.9^9.9^0
"BLD",884,"KRN",.401,"NM","B","XTPM COMPLETE PATCH HISTORY    FILE #9.9",1)

"BLD",884,"KRN",.401,"NM","B","XTPM UNINSTALLED BY COMPLIANCE    FILE #9.9",2)

"BLD",884,"KRN",.402,0)
.402
"BLD",884,"KRN",.402,"NM",0)
^9.68A^3^3
"BLD",884,"KRN",.402,"NM",1,0)
XTPM COMPLETE NON-KIDS PATCH    FILE #9.9^9.9^0
"BLD",884,"KRN",.402,"NM",2,0)
XTPM EDIT PATCH    FILE #9.9^9.9^0
"BLD",884,"KRN",.402,"NM",3,0)
XTPM EDIT PATCH MONITOR PARAMS    FILE #9.95^9.95^0
"BLD",884,"KRN",.402,"NM","B","XTPM COMPLETE NON-KIDS PATCH    FILE #9.9",1)

"BLD",884,"KRN",.402,"NM","B","XTPM EDIT PATCH    FILE #9.9",2)

"BLD",884,"KRN",.402,"NM","B","XTPM EDIT PATCH MONITOR PARAMS    FILE #9.95",3)

"BLD",884,"KRN",.403,0)
.403
"BLD",884,"KRN",.5,0)
.5
"BLD",884,"KRN",.84,0)
.84
"BLD",884,"KRN",3.6,0)
3.6
"BLD",884,"KRN",3.8,0)
3.8
"BLD",884,"KRN",3.8,"NM",0)
^9.68A^2^2
"BLD",884,"KRN",3.8,"NM",1,0)
XTPM PATCH MONITOR^^0
"BLD",884,"KRN",3.8,"NM",2,0)
XTPM PATCH MONITOR USER^^0
"BLD",884,"KRN",3.8,"NM","B","XTPM PATCH MONITOR",1)

"BLD",884,"KRN",3.8,"NM","B","XTPM PATCH MONITOR USER",2)

"BLD",884,"KRN",9.2,0)
9.2
"BLD",884,"KRN",9.8,0)
9.8
"BLD",884,"KRN",9.8,"NM",0)
^9.68A^6^6
"BLD",884,"KRN",9.8,"NM",1,0)
XTPMKPCF^^0^9835752
"BLD",884,"KRN",9.8,"NM",2,0)
XTPMKPP^^0^2125851
"BLD",884,"KRN",9.8,"NM",3,0)
XTPMKPTC^^0^75338501
"BLD",884,"KRN",9.8,"NM",4,0)
XTPMNEX7^^0^12374893
"BLD",884,"KRN",9.8,"NM",5,0)
XTPMSTA2^^0^20410283
"BLD",884,"KRN",9.8,"NM",6,0)
XTPMSTAT^^0^31021874
"BLD",884,"KRN",9.8,"NM","B","XTPMKPCF",1)

"BLD",884,"KRN",9.8,"NM","B","XTPMKPP",2)

"BLD",884,"KRN",9.8,"NM","B","XTPMKPTC",3)

"BLD",884,"KRN",9.8,"NM","B","XTPMNEX7",4)

"BLD",884,"KRN",9.8,"NM","B","XTPMSTA2",5)

"BLD",884,"KRN",9.8,"NM","B","XTPMSTAT",6)

"BLD",884,"KRN",19,0)
19
"BLD",884,"KRN",19,"NM",0)
^9.68A^19^19
"BLD",884,"KRN",19,"NM",1,0)
XTPM COMPLETE A NON-KIDS PATCH^^0
"BLD",884,"KRN",19,"NM",2,0)
XTPM COMPLETE PATCH HISTORY^^0
"BLD",884,"KRN",19,"NM",3,0)
XTPM EDIT PATCH^^0
"BLD",884,"KRN",19,"NM",4,0)
XTPM EDIT PATCH MONITOR PARAMS^^0
"BLD",884,"KRN",19,"NM",5,0)
XTPM NIGHTLY PATCH MONITOR^^0
"BLD",884,"KRN",19,"NM",6,0)
XTPM PAST DUE PATCH REPORT^^0
"BLD",884,"KRN",19,"NM",7,0)
XTPM PATCH INQUIRY^^0
"BLD",884,"KRN",19,"NM",8,0)
XTPM PATCH MANAGEMENT^^0
"BLD",884,"KRN",19,"NM",9,0)
XTPM PATCH MONITOR MAIN MENU^^0
"BLD",884,"KRN",19,"NM",10,0)
XTPM PATCH PROCESSING^^0
"BLD",884,"KRN",19,"NM",11,0)
XTPM PATCH REPORTS^^0
"BLD",884,"KRN",19,"NM",12,0)
XTPM PATCH SERVER^^0
"BLD",884,"KRN",19,"NM",13,0)
XTPM PATCH STATISTICS^^0
"BLD",884,"KRN",19,"NM",14,0)
XTPM PATCH STATS BY COMPLIANCE^^0
"BLD",884,"KRN",19,"NM",15,0)
XTPM PATCHES DUE NEXT 7 DAYS^^0
"BLD",884,"KRN",19,"NM",16,0)
XTPM RERUN NIGHTLY^^0
"BLD",884,"KRN",19,"NM",17,0)
XTPM UNINSTALLED BY COMPLIANCE^^0
"BLD",884,"KRN",19,"NM",18,0)
XTPM UNINSTALLED PATCH BULLETI^^0
"BLD",884,"KRN",19,"NM",19,0)
XTPM UNINSTALLED PATCHES^^0
"BLD",884,"KRN",19,"NM","B","XTPM COMPLETE A NON-KIDS PATCH",1)

"BLD",884,"KRN",19,"NM","B","XTPM COMPLETE PATCH HISTORY",2)

"BLD",884,"KRN",19,"NM","B","XTPM EDIT PATCH",3)

"BLD",884,"KRN",19,"NM","B","XTPM EDIT PATCH MONITOR PARAMS",4)

"BLD",884,"KRN",19,"NM","B","XTPM NIGHTLY PATCH MONITOR",5)

"BLD",884,"KRN",19,"NM","B","XTPM PAST DUE PATCH REPORT",6)

"BLD",884,"KRN",19,"NM","B","XTPM PATCH INQUIRY",7)

"BLD",884,"KRN",19,"NM","B","XTPM PATCH MANAGEMENT",8)

"BLD",884,"KRN",19,"NM","B","XTPM PATCH MONITOR MAIN MENU",9)

"BLD",884,"KRN",19,"NM","B","XTPM PATCH PROCESSING",10)

"BLD",884,"KRN",19,"NM","B","XTPM PATCH REPORTS",11)

"BLD",884,"KRN",19,"NM","B","XTPM PATCH SERVER",12)

"BLD",884,"KRN",19,"NM","B","XTPM PATCH STATISTICS",13)

"BLD",884,"KRN",19,"NM","B","XTPM PATCH STATS BY COMPLIANCE",14)

"BLD",884,"KRN",19,"NM","B","XTPM PATCHES DUE NEXT 7 DAYS",15)

"BLD",884,"KRN",19,"NM","B","XTPM RERUN NIGHTLY",16)

"BLD",884,"KRN",19,"NM","B","XTPM UNINSTALLED BY COMPLIANCE",17)

"BLD",884,"KRN",19,"NM","B","XTPM UNINSTALLED PATCH BULLETI",18)

"BLD",884,"KRN",19,"NM","B","XTPM UNINSTALLED PATCHES",19)

"BLD",884,"KRN",19.1,0)
19.1
"BLD",884,"KRN",19.1,"NM",0)
^9.68A^1^1
"BLD",884,"KRN",19.1,"NM",1,0)
XTPM PATCH MONITOR MGR^^0
"BLD",884,"KRN",19.1,"NM","B","XTPM PATCH MONITOR MGR",1)

"BLD",884,"KRN",101,0)
101
"BLD",884,"KRN",409.61,0)
409.61
"BLD",884,"KRN",771,0)
771
"BLD",884,"KRN",870,0)
870
"BLD",884,"KRN",8989.51,0)
8989.51
"BLD",884,"KRN",8989.52,0)
8989.52
"BLD",884,"KRN",8994,0)
8994
"BLD",884,"KRN","B",.4,.4)

"BLD",884,"KRN","B",.401,.401)

"BLD",884,"KRN","B",.402,.402)

"BLD",884,"KRN","B",.403,.403)

"BLD",884,"KRN","B",.5,.5)

"BLD",884,"KRN","B",.84,.84)

"BLD",884,"KRN","B",3.6,3.6)

"BLD",884,"KRN","B",3.8,3.8)

"BLD",884,"KRN","B",9.2,9.2)

"BLD",884,"KRN","B",9.8,9.8)

"BLD",884,"KRN","B",19,19)

"BLD",884,"KRN","B",19.1,19.1)

"BLD",884,"KRN","B",101,101)

"BLD",884,"KRN","B",409.61,409.61)

"BLD",884,"KRN","B",771,771)

"BLD",884,"KRN","B",870,870)

"BLD",884,"KRN","B",8989.51,8989.51)

"BLD",884,"KRN","B",8989.52,8989.52)

"BLD",884,"KRN","B",8994,8994)

"BLD",884,"QUES",0)
^9.62^^
"FIA",9.9)
PATCH MONITOR
"FIA",9.9,0)
^XPD(9.9,
"FIA",9.9,0,0)
9.9
"FIA",9.9,0,1)
y^y^f^^^^n
"FIA",9.9,0,10)

"FIA",9.9,0,11)

"FIA",9.9,0,"RLRO")

"FIA",9.9,0,"VR")
7.3^XT
"FIA",9.9,9.9)
0
"FIA",9.95)
PATCH MONITOR PARAMETER
"FIA",9.95,0)
^XPD(9.95,
"FIA",9.95,0,0)
9.95
"FIA",9.95,0,1)
y^y^f^^^^n
"FIA",9.95,0,10)

"FIA",9.95,0,11)

"FIA",9.95,0,"RLRO")

"FIA",9.95,0,"VR")
7.3^XT
"FIA",9.95,9.95)
0
"FIA",9.95,9.951)
0
"FIA",9.95,9.954)
0
"FIA",9.95,9.9541)
0
"INI")
MERGE^XT73P98
"INIT")
EN^XT73P98
"KRN",.4,137,-1)
0^1
"KRN",.4,137,0)
XTPM COMPLETE PATCH HISTORY^3050721.0806^@^9.9^^@^3050811
"KRN",.4,137,"DCL","9.9^.01")
!
"KRN",.4,137,"DXS",1,9)
X DXS(1,9.2) S DIP(4)=$G(X) S X=DIP(5),X=$S(DIP(2):DIP(3),DIP(4):X) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"KRN",.4,137,"DXS",1,9.2)
X "N I,Y "_$P(^DD(9.9,9,0),U,5,99) S DIP(5)=X S DIP(1)=$S($D(^XPD(9.9,D0,0)):^(0),1:"") S X=$P(DIP(1),U,11)]"",DIP(2)=$G(X) S X=$P(DIP(1),U,11),DIP(3)=$G(X) S X=1
"KRN",.4,137,"F",1)

"KRN",.4,137,"F",2)
S DIP(1)=$S($D(^XPD(9.9,D0,0)):^(0),1:"") S X=$P(DIP(1),U,9) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) W X K DIP;L8;"COMPLIANCE DATE";Z;"NUMDATE(COMPLIANCE DATE)"~
"KRN",.4,137,"F",3)
X DXS(1,9) W X K DIP;"DATE INSTALLED";L8;Z;"NUMDATE($S(NON-KIDS INSTALL DATE]"":NON-KIDS INSTALL DATE,1:DATE INSTALLED))"~.01;L15~6;L40;"SUBJECT"~
"KRN",.4,137,"H")
COMPLETE PATCH INSTALLATION HISTORY
"KRN",.4,138,-1)
0^2
"KRN",.4,138,0)
XTPM UNINSTALLED BY COMPLIANCE^3050721.093^@^9.9^^@^3050811
"KRN",.4,138,"DCL","9.9^.01")
!
"KRN",.4,138,"F",1)

"KRN",.4,138,"F",2)
S DIP(1)=$S($D(^XPD(9.9,D0,0)):^(0),1:"") S X=$P(DIP(1),U,9) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) W X K DIP;"COMPLIANCE DATE";L8;Z;"NUMDATE(COMPLIANCE DATE)"~
"KRN",.4,138,"F",3)
.01;L15;"PATCH NUMBER"~
"KRN",.4,138,"F",4)
S DIP(1)=$S($D(^XPD(9.9,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) W X K DIP;L8;"DATE RCV";Z;"NUMDATE(DATE OF RECEIPT)"~
"KRN",.4,138,"F",5)
6;L40~
"KRN",.4,138,"H")
UNINSTALLED PATCHES BY COMPLIANCE DATE
"KRN",.401,92,-1)
0^1
"KRN",.401,92,0)
XTPM COMPLETE PATCH HISTORY^3050721.0802^@^9.9^^@^3050811
"KRN",.401,92,2,0)
^.4014^2^2
"KRN",.401,92,2,1,0)
9.9^8^COMPLIANCE DATE^@^;S1^^^^^1
"KRN",.401,92,2,1,"GET")
S DISX(1)=$P($G(^XPD(9.9,D0,0)),U,9)
"KRN",.401,92,2,1,"IX")
^XPD(9.9,"D",^XPD(9.9,^2
"KRN",.401,92,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,92,2,1,"SER")
0.0000^0.0000
"KRN",.401,92,2,1,"TXT")
COMPLIANCE DATE not null
"KRN",.401,92,2,2,0)
9.9^.01^PATCH NAME^^^^^^^4
"KRN",.401,92,2,2,"GET")
S DISX(2)=$P($G(^XPD(9.9,D0,0)),U)
"KRN",.401,92,2,2,"IX")
^XPD(9.9,"B",^XPD(9.9,^2
"KRN",.401,92,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,92,2,2,"SER")
0^0
"KRN",.401,92,2,2,"TXT")
PATCH NAME not null
"KRN",.401,92,2,"B",9.9,1)

"KRN",.401,92,2,"B",9.9,2)

"KRN",.401,92,"%D",0)
^^1^1^3050721^
"KRN",.401,92,"%D",1,0)
Prints a complete patch installation history.
"KRN",.401,93,-1)
0^2
"KRN",.401,93,0)
XTPM UNINSTALLED BY COMPLIANCE^3050721.0927^@^9.9^^@^3050823
"KRN",.401,93,2,0)
^.4014^3^3
"KRN",.401,93,2,1,0)
9.9^8^COMPLIANCE DATE^@^;S^^^^^1
"KRN",.401,93,2,1,"F")
2010100.999999^Jan 1,1901^Jan 1,1901
"KRN",.401,93,2,1,"GET")
S DISX(1)=$P($G(^XPD(9.9,D0,0)),U,9)
"KRN",.401,93,2,1,"IX")
^XPD(9.9,"D",^XPD(9.9,^2
"KRN",.401,93,2,1,"QCON")
I (DISX(1)]]2010100.999999)&(DISX(1)']]7991231.24)
"KRN",.401,93,2,1,"T")
7991231.24^Dec 31,2499@2400^Dec 31,2499@24:00
"KRN",.401,93,2,1,"TXT")
COMPLIANCE DATE from Jan 1,1901 to Dec 31,2499@24:00
"KRN",.401,93,2,2,0)
9.9^.01^PATCH NAME^^^^^^^4
"KRN",.401,93,2,2,"GET")
S DISX(2)=$P($G(^XPD(9.9,D0,0)),U)
"KRN",.401,93,2,2,"IX")
^XPD(9.9,"B",^XPD(9.9,^2
"KRN",.401,93,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,93,2,2,"TXT")
PATCH NAME not null
"KRN",.401,93,2,3,0)
9.9^^$S(NON-KIDS PATCH?="YES":NON-KIDS INSTALL DATE,1:DATE INSTALLED)=""^"@B^;L1^^^^^4
"KRN",.401,93,2,3,3,0)
^.401419^2^2
"KRN",.401,93,2,3,3,1,0)
OVF0^9.2
"KRN",.401,93,2,3,3,1,"OVF0")
X "N I,Y "_$P(^DD(9.9,9,0),U,5,99) S Y(6)=X S Y(2)=$C(59)_$P($G(^DD(9.9,11,0)),U,3),Y(1)=$S($D(^XPD(9.9,D0,0)):^(0),1:"")
"KRN",.401,93,2,3,3,2,0)
OVF0^9.3
"KRN",.401,93,2,3,3,2,"OVF0")
X DPP(3,"OVF0",9.2) S X=$P($P(Y(2),$C(59)_$P(Y(1),U,10)_":",2),$C(59))="YES",Y(3)=$G(X) S X=$P(Y(1),U,11),Y(4)=$G(X) S X=1,Y(5)=$G(X) S X=Y(6)
"KRN",.401,93,2,3,3,"B","OVF0",1)

"KRN",.401,93,2,3,3,"B","OVF0",2)

"KRN",.401,93,2,3,"CM")
X DPP(3,"OVF0",9.3) S X=$S(Y(3):Y(4),Y(5):X)="" I D0>0 S DISX(3)=X
"KRN",.401,93,2,3,"F")
0
"KRN",.401,93,2,3,"GET")
X DPP(3,"OVF0",9.3) S X=$S(Y(3):Y(4),Y(5):X)="" I D0>0 S DISX(3)=X
"KRN",.401,93,2,3,"QCON")
I DISX(3)
"KRN",.401,93,2,3,"T")
1
"KRN",.401,93,2,3,"TXT")
$S(NON-KIDS PATCH?=""YES"":NON-KIDS INSTALL DATE,1:DATE INSTALLED)=""""
"KRN",.401,93,2,"B",9.9,1)

"KRN",.401,93,2,"B",9.9,2)

"KRN",.401,93,2,"B",9.9,3)

"KRN",.401,93,"%D",0)
^^1^1^3050721^
"KRN",.401,93,"%D",1,0)
Uninstalled patches by compliance date.
"KRN",.402,85,-1)
0^1
"KRN",.402,85,0)
XTPM COMPLETE NON-KIDS PATCH^3050721.0643^@^9.9^^@^3050804
"KRN",.402,85,"DIAB",1,0,9.9,0)
12;"DATE COMPLETED"
"KRN",.402,85,"DIAB",1,0,9.9,1)
13//USER("N")
"KRN",.402,85,"DR",1,9.9)
12DATE COMPLETED~;I X']"" S Y="@1";Q;
"KRN",.402,85,"DR",1,9.9,1)
13//^X DR(99,1,9.2) S %=$S($D(^VA(200,+DUZ,0)):^(0),1:""),X=$S('DUZ:"??",X="#":DUZ,X="N":$P(%,U,1),X="I":$P(%,U,2),X="T":$S($D(^DIC(3.1,+$P(%,U,9),0)):$P(^(0),U,1),1:""),X="NN":$S($D(^VA(200,+DUZ,.1)):$P(^(.1),U,4),1:""),1:"??") K %;
"KRN",.402,85,"DR",1,9.9,2)
S Y="@2";@1;12///@;13///@;@2;
"KRN",.402,85,"DR",99,1,9.2)
S X="N"
"KRN",.402,86,-1)
0^2
"KRN",.402,86,0)
XTPM EDIT PATCH^3050721.0757^@^9.9^^@^3050803
"KRN",.402,86,"DIAB",1,0,9.9,1)
13//USER("N")
"KRN",.402,86,"DIAB",4,0,9.9,0)
12;"DATE COMPLETED"
"KRN",.402,86,"DR",1,9.9)
8;11;I X'=1 S Y="@1";12DATE COMPLETED~;Q;
"KRN",.402,86,"DR",1,9.9,1)
13//^X DR(99,1,9.2) S %=$S($D(^VA(200,+DUZ,0)):^(0),1:""),X=$S('DUZ:"??",X="#":DUZ,X="N":$P(%,U,1),X="I":$P(%,U,2),X="T":$S($D(^DIC(3.1,+$P(%,U,9),0)):$P(^(0),U,1),1:""),X="NN":$S($D(^VA(200,+DUZ,.1)):$P(^(.1),U,4),1:""),1:"??") K %;
"KRN",.402,86,"DR",1,9.9,2)
S Y="@2";@1;12///@;13///@;@2;
"KRN",.402,86,"DR",99,1,9.2)
S X="N"
"KRN",.402,87,-1)
0^3
"KRN",.402,87,0)
XTPM EDIT PATCH MONITOR PARAMS^3050721.1146^@^9.95^^@^3050809
"KRN",.402,87,"DIAB",1,1,9.951,0)
ALL
"KRN",.402,87,"DIAB",1,1,9.954,0)
ALL
"KRN",.402,87,"DR",1,9.95)
.01;1;2;3;4;
"KRN",.402,87,"DR",2,9.951)
.01
"KRN",.402,87,"DR",2,9.954)
.01:1
"KRN",.402,87,"DR",3,9.9541)
.01
"KRN",3.8,38,-1)
0^1
"KRN",3.8,38,0)
XTPM PATCH MONITOR^PU^^^^^
"KRN",3.8,38,2,0)
^3.801^1^1^3050811^^^^
"KRN",3.8,38,2,1,0)
This mail group receives the delinquent patch notices.
"KRN",3.8,38,3)

"KRN",3.8,38,5,0)
^3.811P
"KRN",3.8,38,6,0)
^3.812^^0
"KRN",3.8,39,-1)
0^2
"KRN",3.8,39,0)
XTPM PATCH MONITOR USER^PU^^^^0^
"KRN",3.8,39,2,0)
^3.801^1^1^3050811^^^^
"KRN",3.8,39,2,1,0)
The regular patch monitor user.
"KRN",3.8,39,3)

"KRN",19,1129,-1)
0^12
"KRN",19,1129,0)
XTPM PATCH SERVER^Patch Monitor Server^^S^^^^^^^^TOOLKIT
"KRN",19,1129,1,0)
^19.06^2^2^3050727^^^
"KRN",19,1129,1,1,0)
Server to unload patch messages into file 9.9, the PATCH MONITOR
"KRN",19,1129,1,2,0)
file.
"KRN",19,1129,25)
SRVR^XTPMKPTC
"KRN",19,1129,220)
^R^^N^Y^N^0
"KRN",19,1129,"U")
PATCH MONITOR SERVER
"KRN",19,1130,-1)
0^5
"KRN",19,1130,0)
XTPM NIGHTLY PATCH MONITOR^Nightly Patch Monitor^^R^^^^^^^^TOOLKIT
"KRN",19,1130,1,0)
^19.06^3^3^3050727^^^^
"KRN",19,1130,1,1,0)
This is a Taskman routine that will check file 9.9 for delinquent 
"KRN",19,1130,1,2,0)
patches.  It will generate a mail message to the mail group G.PATCH 
"KRN",19,1130,1,3,0)
MONITOR.
"KRN",19,1130,25)
NIGHT^XTPMKPTC
"KRN",19,1130,"U")
NIGHTLY PATCH MONITOR
"KRN",19,1131,-1)
0^6
"KRN",19,1131,0)
XTPM PAST DUE PATCH REPORT^Past Due Patch Report^^R^^^^^^^^TOOLKIT^^^1
"KRN",19,1131,1,0)
^19.06^1^1^3050727^^^^
"KRN",19,1131,1,1,0)
Provides a quick report for delinquent patches for a site.
"KRN",19,1131,15)
W $C(7),!!,"Press ENTER to end  " R XTBANS:DTIME K XTBANS
"KRN",19,1131,25)
PASTDUE^XTPMKPTC
"KRN",19,1131,"U")
PAST DUE PATCH REPORT
"KRN",19,1132,-1)
0^9
"KRN",19,1132,0)
XTPM PATCH MONITOR MAIN MENU^Patch Monitor Main Menu^^M^^^^^^^^TOOLKIT^^^^^
"KRN",19,1132,1,0)
^19.06^2^2^3050802^^
"KRN",19,1132,1,1,0)
This is the main menu that has all the options for the package.  The 
"KRN",19,1132,1,2,0)
nightly job is locked with the XTPM PATCH MONITOR MGR key.
"KRN",19,1132,10,0)
^19.01IP^3^3
"KRN",19,1132,10,1,0)
1143^1
"KRN",19,1132,10,1,"^")
XTPM PATCH PROCESSING
"KRN",19,1132,10,2,0)
1144^2
"KRN",19,1132,10,2,"^")
XTPM PATCH REPORTS
"KRN",19,1132,10,3,0)
1145^3
"KRN",19,1132,10,3,"^")
XTPM PATCH MANAGEMENT
"KRN",19,1132,20)

"KRN",19,1132,26)

"KRN",19,1132,99)
60107,19048
"KRN",19,1132,99.1)
60157,38602
"KRN",19,1132,"U")
PATCH MONITOR MAIN MENU
"KRN",19,1133,-1)
0^18
"KRN",19,1133,0)
XTPM UNINSTALLED PATCH BULLETI^Uninstalled Patch Bulletin^^R^^^^^^^^TOOLKIT
"KRN",19,1133,1,0)
^19.06^1^1^3050727^^^^
"KRN",19,1133,1,1,0)
Daily bulletin for IRM to keep them up to date on uninstalled patches.
"KRN",19,1133,25)
REG^XTPMKPTC
"KRN",19,1133,"U")
UNINSTALLED PATCH BULLETIN
"KRN",19,1134,-1)
0^19
"KRN",19,1134,0)
XTPM UNINSTALLED PATCHES^Uninstalled Patch Listing - Alphabetical^^R^^^^^^^^TOOLKIT^^^1
"KRN",19,1134,1,0)
^19.06^1^1^3050727^^^^
"KRN",19,1134,1,1,0)
Gives a list of all uninstalled patches for a site.
"KRN",19,1134,15)
W $C(7),!!,"Press ENTER to end  " R XTBANS:DTIME K XTBANS
"KRN",19,1134,25)
RPT^XTPMKPTC
"KRN",19,1134,"U")
UNINSTALLED PATCH LISTING - AL
"KRN",19,1135,-1)
0^15
"KRN",19,1135,0)
XTPM PATCHES DUE NEXT 7 DAYS^Patches Due in the Next Seven Days^^R^^^^^^^^TOOLKIT^^^
"KRN",19,1135,1,0)
^19.06^1^1^3050727^^^^
"KRN",19,1135,1,1,0)
Uninstalled patches, due within the next seven days.
"KRN",19,1135,15)

"KRN",19,1135,25)
XTPMNEX7
"KRN",19,1135,200.9)
y
"KRN",19,1135,"U")
PATCHES DUE IN THE NEXT SEVEN 
"KRN",19,1136,-1)
0^17
"KRN",19,1136,0)
XTPM UNINSTALLED BY COMPLIANCE^Uninstalled Patches by Compliance Date^^P^^^^^^^^TOOLKIT^^^1
"KRN",19,1136,1,0)
^19.06^1^1^3050727^^^^
"KRN",19,1136,1,1,0)
Uninstalled patches by compliance date.
"KRN",19,1136,15)
W $C(7),!!,"Press RETURN to continue  " R ANS:DTIME K ANS
"KRN",19,1136,60)
XPD(9.9,
"KRN",19,1136,62)
0
"KRN",19,1136,63)
[XTPM UNINSTALLED BY COMPLIANCE]
"KRN",19,1136,64)
[XTPM UNINSTALLED BY COMPLIANCE]
"KRN",19,1136,65)

"KRN",19,1136,66)

"KRN",19,1136,72)
W:IOST?1"C".E @IOF
"KRN",19,1136,"U")
UNINSTALLED PATCHES BY COMPLIA
"KRN",19,1137,-1)
0^2
"KRN",19,1137,0)
XTPM COMPLETE PATCH HISTORY^Complete Patch Installation History^^P^^^^^^^^TOOLKIT^^^1
"KRN",19,1137,1,0)
^19.06^1^1^3050727^^^^
"KRN",19,1137,1,1,0)
Gives a complete patch installation history.
"KRN",19,1137,15)
W $C(7),!!,"Press ENTER to end  " R XTBANS:DTIME K XTBANS
"KRN",19,1137,60)
XPD(9.9,
"KRN",19,1137,62)
0
"KRN",19,1137,63)
[XTPM COMPLETE PATCH HISTORY]
"KRN",19,1137,64)
[XTPM COMPLETE PATCH HISTORY]
"KRN",19,1137,65)

"KRN",19,1137,66)

"KRN",19,1137,72)
W @IOF
"KRN",19,1137,73)

"KRN",19,1137,"U")
COMPLETE PATCH INSTALLATION HI
"KRN",19,1138,-1)
0^7
"KRN",19,1138,0)
XTPM PATCH INQUIRY^Patch Inquiry^^R^^^^^^^^TOOLKIT^^^^^
"KRN",19,1138,1,0)
^19.06^2^2^3050727^^^
"KRN",19,1138,1,1,0)
Gives an inquiry from the Patch Monitor file 9.9, including 
"KRN",19,1138,1,2,0)
computed fields.
"KRN",19,1138,15)

"KRN",19,1138,20)

"KRN",19,1138,25)
INQUIRE^XTPMKPCF
"KRN",19,1138,26)

"KRN",19,1138,"U")
PATCH INQUIRY
"KRN",19,1139,-1)
0^1
"KRN",19,1139,0)
XTPM COMPLETE A NON-KIDS PATCH^Mark a Non-Kids Patch as Complete^^E^^^^^^^^TOOLKIT^^^^^
"KRN",19,1139,1,0)
^19.06^3^3^3050727^^^^
"KRN",19,1139,1,1,0)
This option allows the completion of a non-kids patch, which is defined 
"KRN",19,1139,1,2,0)
as not having any KIDs installs but rather a .zip or .exe or other type 
"KRN",19,1139,1,3,0)
patch.  An example of an 'other' patch is a DBA patch.
"KRN",19,1139,20)

"KRN",19,1139,26)

"KRN",19,1139,30)
XPD(9.9,
"KRN",19,1139,31)
AEMQ
"KRN",19,1139,34)
I $P(^(0),U,10)=1
"KRN",19,1139,35)

"KRN",19,1139,50)
XPD(9.9,
"KRN",19,1139,51)
[XTPM COMPLETE NON-KIDS PATCH]
"KRN",19,1139,"U")
MARK A NON-KIDS PATCH AS COMPL
"KRN",19,1140,-1)
0^3
"KRN",19,1140,0)
XTPM EDIT PATCH^Edit Patch Information^^E^^^^^^^^TOOLKIT^^^1^^
"KRN",19,1140,1,0)
^19.06^7^7^3050727^^^^
"KRN",19,1140,1,1,0)
This option will allow you to edit the fields:
"KRN",19,1140,1,2,0)
 
"KRN",19,1140,1,3,0)
                8   Compliance date
"KRN",19,1140,1,4,0)
               11   Non-Kids patch?
"KRN",19,1140,1,5,0)
               12   Non-Kids Install Date
"KRN",19,1140,1,6,0)
 Only fields that are not extracted from the patch message or are not
"KRN",19,1140,1,7,0)
computed fields may be edited.
"KRN",19,1140,15)
W @IOF,!
"KRN",19,1140,20)

"KRN",19,1140,26)

"KRN",19,1140,30)
XPD(9.9,
"KRN",19,1140,31)
AEMQ
"KRN",19,1140,50)
XPD(9.9,
"KRN",19,1140,51)
[XTPM EDIT PATCH]
"KRN",19,1140,"U")
EDIT PATCH INFORMATION
"KRN",19,1141,-1)
0^13
"KRN",19,1141,0)
XTPM PATCH STATISTICS^Patch Statistics by Reporting Group^^R^^^^^^^^TOOLKIT
"KRN",19,1141,1,0)
^19.06^3^3^3050727^^^
"KRN",19,1141,1,1,0)
This is a statistical report that gives information about patch 
"KRN",19,1141,1,2,0)
installation timliness.  It is activated by setting up groups of packages 
"KRN",19,1141,1,3,0)
to monitor in the parameter file.
"KRN",19,1141,25)
XTPMSTAT
"KRN",19,1141,"U")
PATCH STATISTICS BY REPORTING 
"KRN",19,1142,-1)
0^4
"KRN",19,1142,0)
XTPM EDIT PATCH MONITOR PARAMS^Edit the Patch Monitor Parameter File^^E^^^^^^^^TOOLKIT^^1^1
"KRN",19,1142,1,0)
^19.06^1^1^3050727^^^^
"KRN",19,1142,1,1,0)
Edits the parameter file for the Patch Monitor.
"KRN",19,1142,15)
W @IOF,!!
"KRN",19,1142,20)
W @IOF,!,"Edit the Patch Monitor Parameter File",!!!!
"KRN",19,1142,30)
XPD(9.95,
"KRN",19,1142,31)
AEMQL
"KRN",19,1142,50)
XPD(9.95,
"KRN",19,1142,51)
[XTPM EDIT PATCH MONITOR PARAMS]
"KRN",19,1142,"U")
EDIT THE PATCH MONITOR PARAMET
"KRN",19,1143,-1)
0^10
"KRN",19,1143,0)
XTPM PATCH PROCESSING^Patch Processing^^M^^^^^^^^TOOLKIT^^^^^
"KRN",19,1143,1,0)
^19.06^1^1^3050727^^^
"KRN",19,1143,1,1,0)
Patch processing menu.  Has all necessary to process patches.
"KRN",19,1143,10,0)
^19.01IP^3^3
"KRN",19,1143,10,1,0)
1138^1
"KRN",19,1143,10,1,"^")
XTPM PATCH INQUIRY
"KRN",19,1143,10,2,0)
1140^2
"KRN",19,1143,10,2,"^")
XTPM EDIT PATCH
"KRN",19,1143,10,3,0)
1139^3
"KRN",19,1143,10,3,"^")
XTPM COMPLETE A NON-KIDS PATCH
"KRN",19,1143,26)

"KRN",19,1143,99)
60107,19047
"KRN",19,1143,"U")
PATCH PROCESSING
"KRN",19,1144,-1)
0^11
"KRN",19,1144,0)
XTPM PATCH REPORTS^Patch Reports^^M^^^^^^^^TOOLKIT^^^^^
"KRN",19,1144,1,0)
^19.06^1^1^3050802^^^^
"KRN",19,1144,1,1,0)
Patch monitor reporting menu.
"KRN",19,1144,10,0)
^19.01IP^7^7
"KRN",19,1144,10,1,0)
1137^1
"KRN",19,1144,10,1,"^")
XTPM COMPLETE PATCH HISTORY
"KRN",19,1144,10,2,0)
1136^2
"KRN",19,1144,10,2,"^")
XTPM UNINSTALLED BY COMPLIANCE
"KRN",19,1144,10,3,0)
1134^3
"KRN",19,1144,10,3,"^")
XTPM UNINSTALLED PATCHES
"KRN",19,1144,10,4,0)
1135^4
"KRN",19,1144,10,4,"^")
XTPM PATCHES DUE NEXT 7 DAYS
"KRN",19,1144,10,5,0)
1131^5
"KRN",19,1144,10,5,"^")
XTPM PAST DUE PATCH REPORT
"KRN",19,1144,10,6,0)
1141^6
"KRN",19,1144,10,6,"^")
XTPM PATCH STATISTICS
"KRN",19,1144,10,7,0)
1147^7
"KRN",19,1144,10,7,"^")
XTPM PATCH STATS BY COMPLIANCE
"KRN",19,1144,26)

"KRN",19,1144,99)
60107,19048
"KRN",19,1144,"U")
PATCH REPORTS
"KRN",19,1145,-1)
0^8
"KRN",19,1145,0)
XTPM PATCH MANAGEMENT^Patch Monitor Management^^M^^^^^^^^TOOLKIT^^^^^
"KRN",19,1145,1,0)
^19.06^1^1^3050720^^
"KRN",19,1145,1,1,0)
Patch monitor management menu.
"KRN",19,1145,10,0)
^19.01IP^2^2
"KRN",19,1145,10,1,0)
1142^1
"KRN",19,1145,10,1,"^")
XTPM EDIT PATCH MONITOR PARAMS
"KRN",19,1145,10,2,0)
1146^2
"KRN",19,1145,10,2,"^")
XTPM RERUN NIGHTLY
"KRN",19,1145,26)

"KRN",19,1145,99)
60108,42540
"KRN",19,1145,99.1)
60157,38602
"KRN",19,1145,"U")
PATCH MONITOR MANAGEMENT
"KRN",19,1146,-1)
0^16
"KRN",19,1146,0)
XTPM RERUN NIGHTLY^Rerun the Nightly Patch Monitor^^R^^XTPM PATCH MONITOR MGR^^^^^^TOOLKIT
"KRN",19,1146,1,0)
^19.06^3^3^3050727^^^
"KRN",19,1146,1,1,0)
This is a Taskman routine that will check file 9.9 for delinquent 
"KRN",19,1146,1,2,0)
patches.  It will generate a mail message to the mail group G.PATCH 
"KRN",19,1146,1,3,0)
MONITOR.
"KRN",19,1146,25)
NIGHT^XTPMKPTC
"KRN",19,1146,99.1)
60135,49709
"KRN",19,1146,"U")
RERUN THE NIGHTLY PATCH MONITO
"KRN",19,1147,-1)
0^14
"KRN",19,1147,0)
XTPM PATCH STATS BY COMPLIANCE^Patch Statistics by Compliance Date^^R^^^^^^^^TOOLKIT
"KRN",19,1147,1,0)
^19.06^1^1^3050727^^^
"KRN",19,1147,1,1,0)
This prints statistics by compliance date.
"KRN",19,1147,25)
XTPMSTA2
"KRN",19,1147,"U")
PATCH STATISTICS BY COMPLIANCE
"KRN",19.1,88,-1)
0^1
"KRN",19.1,88,0)
XTPM PATCH MONITOR MGR^Patch Monitor Manager Key
"KRN",19.1,88,1,0)
^^1^1^3050727^
"KRN",19.1,88,1,1,0)
Locks the nightly patch monitor job for security.
"MBREQ")
0
"ORD",3,19.1)
19.1;3;1;;KEY^XPDTA1;;;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1;;MAILGDEL^XPDIA1(%)
"ORD",11,3.8,0)
MAIL GROUP
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",6,-1)
1^1
"PKG",6,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP^
"PKG",6,20,0)
^9.402P^^0
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.3^3040428^2970513^2
"PKG",6,22,1,"PAH",1,0)
98^3050915^82
"PKG",6,22,1,"PAH",1,1,0)
^^2^2^3050915
"PKG",6,22,1,"PAH",1,1,1,0)
Kernel Toolkit patch XT*7.3.*98 VistA Patch Monitor. Please refer to
"PKG",6,22,1,"PAH",1,1,2,0)
the Description in Forum Patch Module for details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","XT73P98")
0^^B4375863
"RTN","XT73P98",1,0)
XT73P98 ;OAK/BP - POST INIT OF XT*7.3*98; [8/15/05 4:25am]
"RTN","XT73P98",2,0)
 ;;7.3;TOOLKIT;**98**; Apr 25, 1995
"RTN","XT73P98",3,0)
 Q
"RTN","XT73P98",4,0)
 ;
"RTN","XT73P98",5,0)
EN ; 
"RTN","XT73P98",6,0)
 D REMOFILE,DISOPT,REMORTN,SETOPT
"RTN","XT73P98",7,0)
 Q
"RTN","XT73P98",8,0)
 ;
"RTN","XT73P98",9,0)
MERGE ; merge files
"RTN","XT73P98",10,0)
 Q:$O(^XPD(9.9,0))>0
"RTN","XT73P98",11,0)
 Q:$D(^AWC(177100.6,0))'>0
"RTN","XT73P98",12,0)
 M ^XPD(9.9)=^AWC(177100.6)
"RTN","XT73P98",13,0)
 Q:$O(^XPD(9.95,0))>0
"RTN","XT73P98",14,0)
 Q:$D(^AWC(177100.7,0))'>0
"RTN","XT73P98",15,0)
 M ^XPD(9.95)=^AWC(177100.7)
"RTN","XT73P98",16,0)
 Q
"RTN","XT73P98",17,0)
 ;
"RTN","XT73P98",18,0)
REMOFILE ; remove files
"RTN","XT73P98",19,0)
 Q:$D(^AWC(177100.6,0))'>0
"RTN","XT73P98",20,0)
 N DA,DIK S DIK="^DIC(",DA=177100.6 D ^DIK
"RTN","XT73P98",21,0)
 K ^AWC(177100.6)
"RTN","XT73P98",22,0)
 Q:$D(^AWC(177100.7,0))'>0
"RTN","XT73P98",23,0)
 N DA,DIK S DIK="^DIC(",DA=177100.7 D ^DIK
"RTN","XT73P98",24,0)
 K ^AWC(177100.7)
"RTN","XT73P98",25,0)
 ;
"RTN","XT73P98",26,0)
 Q
"RTN","XT73P98",27,0)
DISOPT ; remove options
"RTN","XT73P98",28,0)
 N XTI,XTJ,XTTEXT
"RTN","XT73P98",29,0)
 F XTI=1:1:19 S XTTEXT=$T(OPT+XTI),XTTEXT=$P(XTTEXT,";;",2) D
"RTN","XT73P98",30,0)
 . S XTJ=+$$FIND1^DIC(19,"","MX",XTTEXT,"","","ERR")
"RTN","XT73P98",31,0)
 . I XTJ N DA,DIK S DIK="^DIC(19,",DA=XTJ D ^DIK
"RTN","XT73P98",32,0)
 ;
"RTN","XT73P98",33,0)
OPT ;
"RTN","XT73P98",34,0)
 ;;AWB COMPLETE A NON-KIDS PATCH
"RTN","XT73P98",35,0)
 ;;AWB COMPLETE PATCH HISTORY
"RTN","XT73P98",36,0)
 ;;AWB EDIT PATCH
"RTN","XT73P98",37,0)
 ;;AWB EDIT PATCH MONITOR PARAMS
"RTN","XT73P98",38,0)
 ;;AWB NIGHTLY PATCH MONITOR
"RTN","XT73P98",39,0)
 ;;AWB PAST DUE PATCH REPORT
"RTN","XT73P98",40,0)
 ;;AWB PATCH INQUIRY
"RTN","XT73P98",41,0)
 ;;AWB PATCH MANAGEMENT
"RTN","XT73P98",42,0)
 ;;AWB PATCH MONITOR MAIN MENU
"RTN","XT73P98",43,0)
 ;;AWB PATCH PROCESSING
"RTN","XT73P98",44,0)
 ;;AWB PATCH REPORTS
"RTN","XT73P98",45,0)
 ;;AWB PATCH SERVER
"RTN","XT73P98",46,0)
 ;;AWB PATCH STATISTICS
"RTN","XT73P98",47,0)
 ;;AWB PATCH STATS BY COMPLIANCE
"RTN","XT73P98",48,0)
 ;;AWB PATCHES DUE NEXT 7 DAYS
"RTN","XT73P98",49,0)
 ;;AWB RERUN NIGHTLY
"RTN","XT73P98",50,0)
 ;;AWB UNINSTALLED BY COMPLIANCE
"RTN","XT73P98",51,0)
 ;;AWB UNINSTALLED PATCH BULLETIN
"RTN","XT73P98",52,0)
 ;;AWB UNINSTALLED PATCHES
"RTN","XT73P98",53,0)
 Q
"RTN","XT73P98",54,0)
REMORTN ;remove the routines
"RTN","XT73P98",55,0)
 N X
"RTN","XT73P98",56,0)
 F X="AWBCKPTC","AWBCKPP","AWBCKPCF","AWBPSTAT","AWBNEX7","AWBPSTA2" X ^%ZOSF("DEL")
"RTN","XT73P98",57,0)
 Q
"RTN","XT73P98",58,0)
SETOPT ;put the option under KIDS menu
"RTN","XT73P98",59,0)
 N XTI,XTY S XTI="XPD MAIN",XTY="XTPM PATCH MONITOR MAIN MENU"
"RTN","XT73P98",60,0)
 S X=$$ADD^XPDMENU(XTI,XTY,"","")
"RTN","XT73P98",61,0)
 Q
"RTN","XTPMKPCF")
0^1^B9835752
"RTN","XTPMKPCF",1,0)
XTPMKPCF ;OAK/BP - COMPUTED FIELDS AND OTHER ODDITIES FOR PATCH MONITOR; [8/9/05 9:23am]
"RTN","XTPMKPCF",2,0)
 ;;7.3;TOOLKIT;**98**; Apr 25, 1995
"RTN","XTPMKPCF",3,0)
 ;
"RTN","XTPMKPCF",4,0)
 ; computed fields
"RTN","XTPMKPCF",5,0)
INSTALL ; returns the patch installation information from the INSTALL file.
"RTN","XTPMKPCF",6,0)
 ; note: Fileman variables are NOT killed because they are used in output.
"RTN","XTPMKPCF",7,0)
 ; read the index backwards and select the last patch reference because TEST
"RTN","XTPMKPCF",8,0)
 ;   patches may be involved.  If a test patch, null the pointer, like nothing is there.
"RTN","XTPMKPCF",9,0)
 S X=$P($G(^XPD(9.9,D0,0)),U,8) Q:X=""
"RTN","XTPMKPCF",10,0)
 S X=$O(^XPD(9.7,"B",X,9999999999),-1) I $G(^XPD(9.7,+X,2))["TEST v" S X=""
"RTN","XTPMKPCF",11,0)
 S X=$P($G(^XPD(9.7,+X,1)),U,3)
"RTN","XTPMKPCF",12,0)
 S X=$E(X,1,7)
"RTN","XTPMKPCF",13,0)
 Q
"RTN","XTPMKPCF",14,0)
 ;
"RTN","XTPMKPCF",15,0)
WHO ; returns who installed the patch
"RTN","XTPMKPCF",16,0)
 S X=$P($G(^XPD(9.9,D0,0)),U,8) Q:X=""
"RTN","XTPMKPCF",17,0)
 S X=$O(^XPD(9.7,"B",X,9999999999),-1)  I $G(^XPD(9.7,+X,2))["TEST v" S X=""
"RTN","XTPMKPCF",18,0)
 S X=$P($G(^XPD(9.7,+X,0)),U,11)
"RTN","XTPMKPCF",19,0)
 S X=$P($G(^VA(200,+X,0)),U)
"RTN","XTPMKPCF",20,0)
 Q
"RTN","XTPMKPCF",21,0)
 ;
"RTN","XTPMKPCF",22,0)
 ; other utility items
"RTN","XTPMKPCF",23,0)
 ; patch inquiry
"RTN","XTPMKPCF",24,0)
INQUIRE S IOP="HOME" D ^%ZIS K IOP S $P(DASH,"-",75)=""
"RTN","XTPMKPCF",25,0)
 S HD="Patch Inquiry for "_^DD("SITE")
"RTN","XTPMKPCF",26,0)
 W @IOF,!,HD,!!! K DIC,X,Y
"RTN","XTPMKPCF",27,0)
 S DIC("A")="Enter PATCH NAME: ",DIC="^XPD(9.9,",DIC(0)="AEQM"
"RTN","XTPMKPCF",28,0)
 D ^DIC G:Y<0 EXITI S DA=+Y
"RTN","XTPMKPCF",29,0)
 ;
"RTN","XTPMKPCF",30,0)
LOOKUP W @IOF,! S DR="0:9",DIQ(0)="C"
"RTN","XTPMKPCF",31,0)
 S DA=+Y W @IOF,HD,!!!!!,DASH D EN1^DIQ W DASH
"RTN","XTPMKPCF",32,0)
 ;
"RTN","XTPMKPCF",33,0)
CONT W !!!,"Press RETURN to continue or '^' to exit  " R ANS:DTIME G:'$T EXITI
"RTN","XTPMKPCF",34,0)
 G:ANS[U EXITI
"RTN","XTPMKPCF",35,0)
 G INQUIRE
"RTN","XTPMKPCF",36,0)
 ;
"RTN","XTPMKPCF",37,0)
EXITI I IOST?1"C-".E W @IOF,!
"RTN","XTPMKPCF",38,0)
 ; clean up FM vars left
"RTN","XTPMKPCF",39,0)
 K %,%X,A,ANS,D0,D1,D2,DA,DIC,DIK,DL,DX,HD
"RTN","XTPMKPCF",40,0)
 K I,POP,S,DASH,DR,X,Y,DK,DIQ,IOP
"RTN","XTPMKPCF",41,0)
 Q
"RTN","XTPMKPCF",42,0)
 ;
"RTN","XTPMKPCF",43,0)
PKGLOOK ; used for free-text lookup in monitoring of namespaces
"RTN","XTPMKPCF",44,0)
 N DIC,Y,D0,DO,DA,DICR
"RTN","XTPMKPCF",45,0)
 S DIC(0)="EQM",DIC="^DIC(9.4," D ^DIC
"RTN","XTPMKPCF",46,0)
 I Y<0 K X Q
"RTN","XTPMKPCF",47,0)
 S X=$P($G(^DIC(9.4,+Y,0)),U,2) ; get package prefix
"RTN","XTPMKPCF",48,0)
 Q
"RTN","XTPMKPCF",49,0)
CMPDTCG ; Compliance Date change
"RTN","XTPMKPCF",50,0)
 K XTBCMDCG
"RTN","XTPMKPCF",51,0)
 S XTBMLN1=$G(^XMB(3.9,XMZ,0)) I XTBMLN1["COMPLIANCE DATE CHANGE" DO
"RTN","XTPMKPCF",52,0)
 .F XTBX=0:0 S XTBX=$O(^XMB(3.9,XMZ,2,XTBX)) Q:XTBX=""!(+XTBX=0)  S XTBY=$G(^XMB(3.9,XMZ,2,XTBX,0)) DO
"RTN","XTPMKPCF",53,0)
 ..I XTBY["PATCH " S XTBDESG=$P($P(XTBY,"PATCH ",2)," ",1) Q
"RTN","XTPMKPCF",54,0)
 ..I $D(XTBDESG),XTBY["The Compliance Date for patch"&(XTBY["has been changed to") DO
"RTN","XTPMKPCF",55,0)
 ...S XTBTCMPD=$P(XTBY,"has been changed to ",2)
"RTN","XTPMKPCF",56,0)
 ...S DIC(0)="M",(DIC,DIE)="^XPD(9.9,",X=XTBDESG D ^DIC I Y<0 S XTBX=9999999 Q
"RTN","XTPMKPCF",57,0)
 ...S DA=+Y,DR="8///"_XTBTCMPD D ^DIE
"RTN","XTPMKPCF",58,0)
 ...S XTBCMDCG=1
"RTN","XTPMKPCF",59,0)
 .K DR,DIC,DIE,DA,X,Y,XTBDESG,XTBTCMPD
"RTN","XTPMKPCF",60,0)
 Q
"RTN","XTPMKPCF",61,0)
 ;
"RTN","XTPMKPCF",62,0)
EXITA D ^%ZISC
"RTN","XTPMKPCF",63,0)
 K ^TMP($J)
"RTN","XTPMKPCF",64,0)
 K XTBDESG,XTBI,XTBINST,XTBINSTX,XTBPKG,XTBPRIO,XTBSEQ,XTBSUB,%ZIS,XTBANS,XTBCOMPD,XTBPURGI
"RTN","XTPMKPCF",65,0)
 K XTBVER,XTBX,XTBY,XTBZ,DIC,DIE,DO,DD,X,XMB,XMER,XMREC,XMRG,XX,XTBXX,XTBHDR,PG,POP,XTBMLN1
"RTN","XTPMKPCF",66,0)
 K XTBDA,XTBLIMIT,XTBLN,XTBPTNM,XTBRECPT,XTBRUNDT,XTBSUBJ,ZTDESC,XTBCNT
"RTN","XTPMKPCF",67,0)
 K XTBX,XTBDTA,XTBDTA,X1,X2,XMDUZ,XMSUB,XMTEXT,XMY,XMZ,Y,XTBRCPDT,XTBMG,XTBMGN
"RTN","XTPMKPCF",68,0)
 K XTBINSDA,XTBISTAT,NOFILE,XTBPTYPE,XTBPLVER,XTBPKGPT,XTBPCTVR,YY1
"RTN","XTPMKPCF",69,0)
 K XTBX1,XTBZ,NIGHT,XTBCMPDT,ZTSK,ZTIO,ZTRTN,ZTSAVE
"RTN","XTPMKPCF",70,0)
 Q
"RTN","XTPMKPP")
0^2^B2125851
"RTN","XTPMKPP",1,0)
XTPMKPP ;OAK/BP - PATCH MONITOR PURGING; [8/2/05 6:41am]
"RTN","XTPMKPP",2,0)
 ;;7.3;TOOLKIT;**98**; Apr 25, 1995
"RTN","XTPMKPP",3,0)
 ;
"RTN","XTPMKPP",4,0)
EN D DT^DICRW
"RTN","XTPMKPP",5,0)
 ; number of days to keep data in param file
"RTN","XTPMKPP",6,0)
 Q:+$P($G(^XPD(9.95,1,0)),U,3)=0  ; quit if not keeping records on file
"RTN","XTPMKPP",7,0)
 S XTBPDAYS=$P($G(^XPD(9.95,1,0)),U,2)
"RTN","XTPMKPP",8,0)
 I +XTBPDAYS=0 S XTBPDAYS=365 ; minimum of 365 days
"RTN","XTPMKPP",9,0)
 S X1=DT,X2=-XTBPDAYS D C^%DTC S XTBEND=X+.2359,XTBX=""
"RTN","XTPMKPP",10,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPP",11,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)) Q:XTBDTA=""
"RTN","XTPMKPP",12,0)
 .S XTBINST=$P(XTBDTA,U,8) ; install name
"RTN","XTPMKPP",13,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,0),-1) Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)'=3  ; not installed
"RTN","XTPMKPP",14,0)
 .S XTBCMPDT=$P(XTBDTA,U,9) ; compliance date
"RTN","XTPMKPP",15,0)
 .I XTBCMPDT<XTBEND S DIK="^XPD(9.9,",DA=XTBDA D ^DIK
"RTN","XTPMKPP",16,0)
 K XTBPDAYS,X1,X2,XTBEND,XTBX,XTBXX,XTBDA,XTBCMPDT,DIK,DA,XTBINST,XTBDTA,X
"RTN","XTPMKPP",17,0)
 Q
"RTN","XTPMKPTC")
0^3^B75338501
"RTN","XTPMKPTC",1,0)
XTPMKPTC ;OAK/BP - PATCH MONITOR FUNCTIONS ; [8/3/05 11:48am]
"RTN","XTPMKPTC",2,0)
 ;;7.3;TOOLKIT;**98**; Apr 25, 1995
"RTN","XTPMKPTC",3,0)
 ;
"RTN","XTPMKPTC",4,0)
SRVR N XMB X XMREC
"RTN","XTPMKPTC",5,0)
 S XTBMLN1=$G(^XMB(3.9,XMZ,0))
"RTN","XTPMKPTC",6,0)
 I XTBMLN1["COMPLIANCE DATE CHANGE" G CKCMPDT
"RTN","XTPMKPTC",7,0)
 ;
"RTN","XTPMKPTC",8,0)
CHECK I XTBMLN1["TEST" G EXIT
"RTN","XTPMKPTC",9,0)
 I XTBMLN1["COMPLIANCE DATE CHANGE" G CKCMPDT
"RTN","XTPMKPTC",10,0)
 I XTBMLN1["Entered in error patch" DO  I $D(OUT) K OUT G EXIT
"RTN","XTPMKPTC",11,0)
 .F XTBX=1:1:8 S XTBY=$G(^XMB(3.9,XMZ,2,+XTBX,0)) I XTBY["The patch is" DO  Q:$D(OUT)
"RTN","XTPMKPTC",12,0)
 ..K OUT S X=$P(XTBY,"'",2),DIC(0)="QLM",DIC="^XPD(9.9," D ^DIC I Y<0 S OUT=1 Q
"RTN","XTPMKPTC",13,0)
 ..S DIK=DIC,DA=+Y D ^DIK K DIC,DIK,DA,XTBX,XTBY,Y,X S OUT=1 Q
"RTN","XTPMKPTC",14,0)
 I XTBMLN1'["SEQ #"!(XTBMLN1'["National Patch Module") G EXIT
"RTN","XTPMKPTC",15,0)
 ;
"RTN","XTPMKPTC",16,0)
CKCMPDT D CMPDTCG^XTPMKPCF I $D(XTBCMDCG) K XTBCMDCG G EXIT ;compliance date chg check
"RTN","XTPMKPTC",17,0)
 S XTBPTYPE=1 ;assume NON-KIDS until verified
"RTN","XTPMKPTC",18,0)
 F XTBX=0:0 S XTBX=$O(^XMB(3.9,XMZ,2,XTBX)) Q:XTBX=""!(+XTBX=0)  S XTBY=$G(^XMB(3.9,XMZ,2,XTBX,0)) I XTBY["$KID" DO
"RTN","XTPMKPTC",19,0)
 .S XTBZ=$O(^XMB(3.9,XMZ,2,XTBX)) I $G(^XMB(3.9,XMZ,2,XTBZ,0))["**INSTALL NAME**" S XTBPTYPE="",XTBX=9999999 Q
"RTN","XTPMKPTC",20,0)
 ;
"RTN","XTPMKPTC",21,0)
EXTINFO S (XTBDESG,XTBPKG,XTBPRIO,XTBVER,XTBSEQ,XTBSUB)=""
"RTN","XTPMKPTC",22,0)
 F  X XMREC Q:XMER<0!(XMRG["Description")  DO  Q:$D(NOFILE)
"RTN","XTPMKPTC",23,0)
 .K NOFILE
"RTN","XTPMKPTC",24,0)
 .Q:XMRG["====="
"RTN","XTPMKPTC",25,0)
 .I XMRG["Designation" S (XTBDESG,XTBINST)=$P(XMRG,"Designation: ",2) Q:$D(NOFILE)  DO
"RTN","XTPMKPTC",26,0)
 ..S XTBY=$P(XTBDESG,"*",2) I XTBY'?1.2N1".".N S XTBY=XTBY_".0",$P(XTBINST,"*",2)=XTBY
"RTN","XTPMKPTC",27,0)
 .I XTBDESG="" S NOFILE=1 Q
"RTN","XTPMKPTC",28,0)
 .I $D(^XPD(9.9,"B",XTBDESG)) S NOFILE=1 Q  ; already done
"RTN","XTPMKPTC",29,0)
 .I XMRG["Package" DO
"RTN","XTPMKPTC",30,0)
 ..S XTBPKG=$P(XMRG,"Package : ",2),XTBPKG=$P(XTBPKG,"Priority: ",1),XTBPKG=$E(XTBPKG,1,35)
"RTN","XTPMKPTC",31,0)
 ..S XTBX=$L(XTBPKG)
"RTN","XTPMKPTC",32,0)
 ..F XX=XTBX:-1 S XTBY=$E(XTBPKG,XX,XX) Q:($A(XTBY)>64)!(XTBY="")  I $A(XTBY)=32 S $E(XTBPKG,XX,XX)="z"
"RTN","XTPMKPTC",33,0)
 ..I XTBPKG["z" S XTBPKG=$P(XTBPKG,"z",1)
"RTN","XTPMKPTC",34,0)
 .I XMRG["Priority" S XTBPRIO=$P(XMRG,"Priority: ",2) DO
"RTN","XTPMKPTC",35,0)
 ..S XTBPRIO=$P(XTBPRIO," ",1) S X=XTBPRIO X ^%ZOSF("UPPERCASE") S XTBPRIO=X
"RTN","XTPMKPTC",36,0)
 .I XMRG["Version" S XTBVER=$P(XMRG,"Version: ",1) DO
"RTN","XTPMKPTC",37,0)
 ..S XTBSEQ=$P(XTBVER,"#",2),XTBSEQ=$P(XTBSEQ," ",1)
"RTN","XTPMKPTC",38,0)
 ..S XTBVER=$P(XTBVER,"Version : ",2),XTBVER=+XTBVER
"RTN","XTPMKPTC",39,0)
 .I XMRG["Compliance Date:" S XTBCMPDT=$P(XMRG,"Compliance Date: ",2)
"RTN","XTPMKPTC",40,0)
 .I XMRG["Subject" S XTBSUB=$P(XMRG,"Subject: ",2),XTBSUB=$E(XTBSUB,1,50),XTBSUB=$TR(XTBSUB,":;","--")
"RTN","XTPMKPTC",41,0)
 G:$D(NOFILE) EXIT
"RTN","XTPMKPTC",42,0)
 ;
"RTN","XTPMKPTC",43,0)
FILE K DO,DD S (DIC,DIE)="^XPD(9.9,",DIC(0)="M",X=XTBDESG
"RTN","XTPMKPTC",44,0)
 S XTBRCPDT=$G(^XMB(3.9,XMZ,.6)) I XTBRCPDT="" S XTBRCPDT=DT
"RTN","XTPMKPTC",45,0)
 S DIC("DR")="1////"_XTBRCPDT_";2///"_XTBPRIO_";3///"_XTBPKG_";4////"_XTBSEQ_";5////"_XTBVER_";6///"_XTBSUB_";7///"_XTBINST_";8///"_XTBCMPDT_";11////"_XTBPTYPE
"RTN","XTPMKPTC",46,0)
 D FILE^DICN
"RTN","XTPMKPTC",47,0)
 ;
"RTN","XTPMKPTC",48,0)
EXIT G EXITA^XTPMKPCF
"RTN","XTPMKPTC",49,0)
 ;
"RTN","XTPMKPTC",50,0)
NIGHT S XTBPURGI=$P($G(^XPD(9.95,1,0)),U,3) ;purge y/n
"RTN","XTPMKPTC",51,0)
 K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",52,0)
 S NIGHT=1 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",53,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",54,0)
 .K XTBKILLD
"RTN","XTPMKPTC",55,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)) Q:XTBDTA=""
"RTN","XTPMKPTC",56,0)
 .S XTBINST=$P(XTBDTA,U,8) Q:XTBINST=""
"RTN","XTPMKPTC",57,0)
 .S XTBPTYPE=$P(XTBDTA,U,10)
"RTN","XTPMKPTC",58,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",59,0)
 .I $P($G(^XPD(9.7,+XTBXX,0)),U,9)=3!(XTBPTYPE=1&($P(XTBDTA,U,11)]"")),XTBPURGI=1 DO  Q:$D(XTBKILLD)  ; installed, check purge flag
"RTN","XTPMKPTC",60,0)
 ..S DA=XTBDA,DIK="^XPD(9.9," D ^DIK S XTBKILLD=1 K DA,DIK Q
"RTN","XTPMKPTC",61,0)
 .I XTBXX]"",XTBPTYPE=1 S XTBPTYPE="",$P(^XPD(9.9,XTBDA,0),U,10)="" ;found In INSTALL
"RTN","XTPMKPTC",62,0)
 .Q:XTBPTYPE=1&($P(XTBDTA,U,11)]"")  ;non-kids, has install date  
"RTN","XTPMKPTC",63,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",64,0)
 .I (DT>$P(XTBDTA,U,9)) D SET
"RTN","XTPMKPTC",65,0)
 I '$D(^TMP($J,9,0)) K ^TMP($J) S ^TMP($J,3,0)="",^TMP($J,4,0)="    No Delinquent Patches were found."
"RTN","XTPMKPTC",66,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",67,0)
 I XTBCNT>0 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",68,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",69,0)
 S XMSUB="Patch Monitor Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",70,0)
 N DUZ S XMDUZ=.5,XMTEXT="^TMP($J,",XMY("G.XTPM PATCH MONITOR")="",XMY(.5)="" D ^XMD
"RTN","XTPMKPTC",71,0)
 ; purge old data
"RTN","XTPMKPTC",72,0)
 I +XTBPURGI=0 D ^XTPMKPP
"RTN","XTPMKPTC",73,0)
 G EXIT
"RTN","XTPMKPTC",74,0)
 ;
"RTN","XTPMKPTC",75,0)
SET S XTBPTNM=$P(XTBDTA,U,1),XTBSUBJ=$E($P(XTBDTA,U,7),1,20)
"RTN","XTPMKPTC",76,0)
 S X=$P(XTBDTA,U,3),XTBPRIO=$S(X="m":"Mandatory",X="e":"Emergency",1:"Unknown")
"RTN","XTPMKPTC",77,0)
 S (X1,Y)=$P(XTBDTA,U,2) X ^DD("DD") S XTBRECPT=Y
"RTN","XTPMKPTC",78,0)
 S (Y,YY1)=$P(XTBDTA,U,9) X ^DD("DD") S XTBINSTX=Y ; compliance date
"RTN","XTPMKPTC",79,0)
 I YY1<DT,'$D(NIGHT) S XTBINSTX=Y_" *"
"RTN","XTPMKPTC",80,0)
 S XTBPKG=$P(XTBPTNM,"*",1),XTBPKGPT=$O(^DIC(9.4,"C",XTBPKG,0))
"RTN","XTPMKPTC",81,0)
 S XTBPCTVR=+$P(XTBPTNM,"*",2),XTBPLVER=+$G(^DIC(9.4,+XTBPKGPT,"VERSION"))
"RTN","XTPMKPTC",82,0)
 I XTBPCTVR>XTBPLVER,XTBPLVER>0 S XTBINSTX="Future Version"
"RTN","XTPMKPTC",83,0)
 I XTBPCTVR>XTBPLVER,XTBPLVER=0 S $P(^XPD(9.9,XTBDA,0),U,10)=1,XTBINSTX="CompleteByHand"
"RTN","XTPMKPTC",84,0)
 I XTBPCTVR=999 S XTBINSTX="CompleteByHand" ;mainly new Mailman domains
"RTN","XTPMKPTC",85,0)
 I XTBINSTX="Future Version"&($D(NIGHT)) Q
"RTN","XTPMKPTC",86,0)
 I XTBINSTX="Future Version"&($D(XTBPSTD)) Q
"RTN","XTPMKPTC",87,0)
 S XTBLN=XTBLN+1 ; first line=9
"RTN","XTPMKPTC",88,0)
 S XTBCNT=XTBCNT+1
"RTN","XTPMKPTC",89,0)
 S XTBDTA=""
"RTN","XTPMKPTC",90,0)
 S $E(XTBDTA,1)=XTBPTNM,$E(XTBDTA,15)=XTBSUBJ,$E(XTBDTA,38)=XTBPRIO,$E(XTBDTA,51)=XTBRECPT,$E(XTBDTA,64)=XTBINSTX
"RTN","XTPMKPTC",91,0)
 S ^TMP($J,XTBLN,0)=XTBDTA,XTBLN=XTBLN+1
"RTN","XTPMKPTC",92,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",93,0)
 Q
"RTN","XTPMKPTC",94,0)
 ;
"RTN","XTPMKPTC",95,0)
TEXT S ^TMP($J,1,0)=""
"RTN","XTPMKPTC",96,0)
 S ^TMP($J,2,0)="The following patches are not installed at this site and are past the"
"RTN","XTPMKPTC",97,0)
 S ^TMP($J,3,0)="designated installation time:"
"RTN","XTPMKPTC",98,0)
 S ^TMP($J,4,0)=""
"RTN","XTPMKPTC",99,0)
 S ^TMP($J,5,0)="                                                               Compliance"
"RTN","XTPMKPTC",100,0)
 S ^TMP($J,6,0)="Patch #       Subject                Priority     Recpt Date   Date"
"RTN","XTPMKPTC",101,0)
 S ^TMP($J,7,0)="-------       -------                --------     ----- ----   ----------"
"RTN","XTPMKPTC",102,0)
 S ^TMP($J,8,0)=""
"RTN","XTPMKPTC",103,0)
 Q
"RTN","XTPMKPTC",104,0)
 ;
"RTN","XTPMKPTC",105,0)
REG ; regular notification
"RTN","XTPMKPTC",106,0)
 K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",107,0)
 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",108,0)
 S ^TMP($J,2,0)="The following patches are uninstalled at this site:" K ^TMP($J,3,0)
"RTN","XTPMKPTC",109,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",110,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8)
"RTN","XTPMKPTC",111,0)
 .Q:XTBDTA=""!(XTBINST="")  ;no data or no install name
"RTN","XTPMKPTC",112,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",113,0)
 .Q:$P(XTBDTA,U,10)=1&($P(XTBDTA,U,11)]"")  ;non-kids
"RTN","XTPMKPTC",114,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",115,0)
 .D SET
"RTN","XTPMKPTC",116,0)
 I '$D(^TMP($J,9,0)) G EXIT
"RTN","XTPMKPTC",117,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",118,0)
 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",119,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",120,0)
 S XMSUB="Uninstalled Patch Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",121,0)
 N DUZ K XMY
"RTN","XTPMKPTC",122,0)
 S XMDUZ=.5,XMTEXT="^TMP($J," D MG,^XMD
"RTN","XTPMKPTC",123,0)
 G EXIT
"RTN","XTPMKPTC",124,0)
 ;
"RTN","XTPMKPTC",125,0)
RPT W @IOF,!,"Complete Uninstalled Patch Report for "_^DD("SITE"),!!!
"RTN","XTPMKPTC",126,0)
 S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMKPTC",127,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE="",ZTRTN="RPT1^XTPMKPTC",ZTDESC="Uninstalled Patch Report"
"RTN","XTPMKPTC",128,0)
 I  D ^%ZTLOAD W:$D(ZTSK) !,"Queued as task# ",ZTSK,!! H 2 G EXIT
"RTN","XTPMKPTC",129,0)
 ;
"RTN","XTPMKPTC",130,0)
RPT1 U IO K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",131,0)
 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",132,0)
 K ^TMP($J,2,0),^TMP($J,3,0)
"RTN","XTPMKPTC",133,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",134,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8) Q:XTBDTA=""!(XTBINST="")  ; no data or no install name
"RTN","XTPMKPTC",135,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",136,0)
 .Q:$P(XTBDTA,U,10)=1&($P(XTBDTA,U,11)]"")  ;non-kids
"RTN","XTPMKPTC",137,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",138,0)
 .D SET
"RTN","XTPMKPTC",139,0)
 I '$D(^TMP($J,9,0)) S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1,^TMP($J,XTBLN,0)="     Nothing to report",XTBLN=XTBLN+1
"RTN","XTPMKPTC",140,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",141,0)
 I XTBCNT>0 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",142,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",143,0)
 S PG=1,XTBHDR="Uninstalled Patch Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",144,0)
 W:IOST?1"C-".E @IOF W !,XTBHDR,?(IOM-12),"Page: ",PG,!
"RTN","XTPMKPTC",145,0)
 F XTBLN=0:0 S XTBLN=$O(^TMP($J,XTBLN)) Q:XTBLN=""  W ^TMP($J,XTBLN,0),! I $Y>(IOSL-5) S PG=PG+1 D PAUSE W @IOF,!,XTBHDR,?(IOM-12),"Page: ",PG,!!
"RTN","XTPMKPTC",146,0)
 G EXIT
"RTN","XTPMKPTC",147,0)
 ;
"RTN","XTPMKPTC",148,0)
PASTDUE W @IOF,!,"Past Due Patch Report for "_^DD("SITE"),!!!
"RTN","XTPMKPTC",149,0)
 S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMKPTC",150,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE="",ZTRTN="PASTD1^XTPMKPTC",ZTDESC="Past Due Patch Report"
"RTN","XTPMKPTC",151,0)
 I  D ^%ZTLOAD W:$D(ZTSK) !,"Queued as task# ",ZTSK,!! H 2 G EXIT
"RTN","XTPMKPTC",152,0)
 ;
"RTN","XTPMKPTC",153,0)
PASTD1 U IO K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",154,0)
 S XTBPSTD=1
"RTN","XTPMKPTC",155,0)
 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",156,0)
 K ^TMP($J,2,0),^TMP($J,3,0)
"RTN","XTPMKPTC",157,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",158,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8) Q:XTBDTA=""!(XTBINST="")
"RTN","XTPMKPTC",159,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",160,0)
 .Q:$P(XTBDTA,U,10)=1&($P(XTBDTA,U,11)]"")  ;non-kids
"RTN","XTPMKPTC",161,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",162,0)
 .S XTBCOMPD=$P(XTBDTA,U,9) Q:XTBCOMPD'<DT
"RTN","XTPMKPTC",163,0)
 .D SET
"RTN","XTPMKPTC",164,0)
 I '$D(^TMP($J,9,0)) S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1,^TMP($J,XTBLN,0)="     Nothing to report",XTBLN=XTBLN+1
"RTN","XTPMKPTC",165,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",166,0)
 I XTBCNT>0 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",167,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",168,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",169,0)
 S PG=1,XTBHDR="Past Due Patch Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",170,0)
 W:IOST?1"C-".E @IOF W !,XTBHDR,?(IOM-12),"Page: ",PG,!
"RTN","XTPMKPTC",171,0)
 F XTBLN=0:0 S XTBLN=$O(^TMP($J,XTBLN)) Q:XTBLN=""  W ^TMP($J,XTBLN,0),! I $Y>(IOSL-5) S PG=PG+1 D PAUSE W @IOF,!,XTBHDR,?(IOM-12),"Page: ",PG,!!
"RTN","XTPMKPTC",172,0)
 K XTBPSTD G EXIT
"RTN","XTPMKPTC",173,0)
 ;
"RTN","XTPMKPTC",174,0)
PAUSE W !,"Press RETURN to continue or '^' to exit: " R XTBANS:DTIME
"RTN","XTPMKPTC",175,0)
 I XTBANS["^" S XTBLN=9999
"RTN","XTPMKPTC",176,0)
 Q
"RTN","XTPMKPTC",177,0)
 ;
"RTN","XTPMKPTC",178,0)
MG F XTBMG=0:0 S XTBMG=$O(^XPD(9.95,1,1,"B",XTBMG)) Q:XTBMG=""  DO
"RTN","XTPMKPTC",179,0)
 .S XTBMGN=$P(^XMB(3.8,XTBMG,0),U)
"RTN","XTPMKPTC",180,0)
 .S XMY("G."_XTBMGN)=""
"RTN","XTPMKPTC",181,0)
 S XMY("G.XTPM PATCH MONITOR USER")="",XMY(.5)=""
"RTN","XTPMKPTC",182,0)
 Q
"RTN","XTPMNEX7")
0^4^B12374893
"RTN","XTPMNEX7",1,0)
XTPMNEX7 ;OAK/BP - PATCHES DUE IN NEXT 7 DAYS ; [8/2/05 7:36am]
"RTN","XTPMNEX7",2,0)
 ;;7.3;TOOLKIT;**98**; Apr 25, 1995
"RTN","XTPMNEX7",3,0)
 ;
"RTN","XTPMNEX7",4,0)
RPT S XTBHDR="Patches Due Within Seven Days for "_^DD("SITE")
"RTN","XTPMNEX7",5,0)
 S XTBBDT=3010101,X="T+7",%DT="" D ^%DT S XTBEDT=Y
"RTN","XTPMNEX7",6,0)
 W @IOF,!,XTBHDR,!!! S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMNEX7",7,0)
 I $D(IO("Q")) S ZTIO=ION,ZTRTN="RPT1^XTPMNEX7",ZTDESC=XTBHDR,ZTSAVE("XTB*")=""
"RTN","XTPMNEX7",8,0)
 I  D ^%ZTLOAD W:$D(ZTSK) !,"Queued as task# ",ZTSK,!! H 2 G EXIT
"RTN","XTPMNEX7",9,0)
 ;
"RTN","XTPMNEX7",10,0)
RPT1 U IO K ^TMP($J) S XTBX="",(XTBCNT,XTBLN)=0
"RTN","XTPMNEX7",11,0)
 S XTBUP="I $Y>(IOSL-5) S PG=PG+1 D PAUSE W @IOF,!,XTBHDR,?(IOM-12),""Page: "",PG,!!"
"RTN","XTPMNEX7",12,0)
 S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMNEX7",13,0)
 F XTBX=XTBBDT:0 S XTBX=$O(^XPD(9.9,"D",XTBX)) Q:XTBX=""!(XTBX>XTBEDT)  DO
"RTN","XTPMNEX7",14,0)
 .F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"D",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMNEX7",15,0)
 ..S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8) Q:XTBDTA=""!(XTBINST="")  ; no data or no install name
"RTN","XTPMNEX7",16,0)
 ..Q:$P(XTBDTA,U,11)]""  ; non-kids install date
"RTN","XTPMNEX7",17,0)
 ..S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))["TEST" S XTBXX=""
"RTN","XTPMNEX7",18,0)
 ..Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3  ; 3 = installed
"RTN","XTPMNEX7",19,0)
 ..D SET
"RTN","XTPMNEX7",20,0)
 S PG=0 D HDR S (XTBCPLDT,XTBPTNM,OLXTBCPL)=""
"RTN","XTPMNEX7",21,0)
 I '$D(^TMP($J)) W !!,?10,"Nothing to report",! G PREXIT
"RTN","XTPMNEX7",22,0)
 F  S XTBCPLDT=$O(^TMP($J,XTBCPLDT)) Q:XTBCPLDT=""  DO
"RTN","XTPMNEX7",23,0)
 .F  S XTBPTNM=$O(^TMP($J,XTBCPLDT,XTBPTNM)) Q:XTBPTNM=""  DO
"RTN","XTPMNEX7",24,0)
 ..F XTBLN=0:0 S XTBLN=$O(^TMP($J,XTBCPLDT,XTBPTNM,XTBLN)) Q:XTBLN=""  DO
"RTN","XTPMNEX7",25,0)
 ...S XTBDTA=^TMP($J,XTBCPLDT,XTBPTNM,XTBLN)
"RTN","XTPMNEX7",26,0)
 ...S XTBSUBJ=$P(XTBDTA,U),XTBPRIO=$P(XTBDTA,U,2),XTBRECPT=$P(XTBDTA,U,3)
"RTN","XTPMNEX7",27,0)
 ...I OLXTBCPL'=XTBCPLDT W !
"RTN","XTPMNEX7",28,0)
 ...S Y=XTBCPLDT X ^DD("DD") S XTBCPLD1=Y
"RTN","XTPMNEX7",29,0)
 ...W XTBCPLD1,?13,XTBPTNM,?27,XTBSUBJ,?55,XTBPRIO,?67,XTBRECPT,! S XTBCNT=XTBCNT+1
"RTN","XTPMNEX7",30,0)
 ...S OLXTBCPL=XTBCPLDT
"RTN","XTPMNEX7",31,0)
 ...X XTBUP
"RTN","XTPMNEX7",32,0)
 X XTBUP
"RTN","XTPMNEX7",33,0)
 ;
"RTN","XTPMNEX7",34,0)
PREXIT W !!,"Number of patches: ",XTBCNT,!
"RTN","XTPMNEX7",35,0)
 I IOST?1"C-".E W !,"Press RETURN to end  " R ANS:DTIME
"RTN","XTPMNEX7",36,0)
 ;
"RTN","XTPMNEX7",37,0)
EXIT D ^%ZISC
"RTN","XTPMNEX7",38,0)
 K ^TMP($J),%ZIS,ANS,XTBANS,XTBCNT,XTBCPLDT,XTBDA,XTBINST,XTBLN,XTBPKG,XTBPRIO,XTBPTNM
"RTN","XTPMNEX7",39,0)
 K XTBRECPT,XTBRUNDT,XTBSUBJ,XTBX,XTBXX,XTBDTA,XTBHDR,OLXTBCPL,PG,XTBPKFLV,XTBPKPTR,POP,XTBPTCVR,X,X1
"RTN","XTPMNEX7",40,0)
 K Y,YY1,ZTDESC,ZTSK,ZTIO,ZTRTN,ZTSAVE,XTBCPLD1,%DT,XTBBDT,XTBEDT,XTBPSITE,XTBUP,IOP,XMY
"RTN","XTPMNEX7",41,0)
 Q
"RTN","XTPMNEX7",42,0)
 ;
"RTN","XTPMNEX7",43,0)
SET S XTBPTNM=$P(XTBDTA,U,1),XTBSUBJ=$E($P(XTBDTA,U,7),1,26)
"RTN","XTPMNEX7",44,0)
 S X=$P(XTBDTA,U,3),XTBPRIO=$S(X="m":"Mandatory",X="e":"Emergency",1:"Unknown")
"RTN","XTPMNEX7",45,0)
 S Y=$P(XTBDTA,U,2) X ^DD("DD") S XTBRECPT=Y
"RTN","XTPMNEX7",46,0)
 S XTBCPLDT=$P(XTBDTA,U,9) ; compliance date
"RTN","XTPMNEX7",47,0)
 S XTBLN=XTBLN+1,^TMP($J,XTBCPLDT,XTBPTNM,XTBLN)=XTBSUBJ_U_XTBPRIO_U_XTBRECPT
"RTN","XTPMNEX7",48,0)
 Q
"RTN","XTPMNEX7",49,0)
 ;
"RTN","XTPMNEX7",50,0)
HDR I PG<1,IOST?1"C-".E W @IOF
"RTN","XTPMNEX7",51,0)
 S PG=PG+1
"RTN","XTPMNEX7",52,0)
 W:PG>1 @IOF W !,XTBHDR,?(IOM-12),"Page: ",PG,!,"Run date: "_XTBRUNDT,!!!
"RTN","XTPMNEX7",53,0)
 W "Compliance",!,"Date",?13,"Patch #",?27,"Subject",?55,"Priority",?67,"Recpt Date",!
"RTN","XTPMNEX7",54,0)
 W "----------",?13,"-------",?27,"-------",?55,"--------",?67,"----- ----",!
"RTN","XTPMNEX7",55,0)
 Q
"RTN","XTPMNEX7",56,0)
 ;
"RTN","XTPMNEX7",57,0)
PAUSE W !,"Press RETURN to continue or '^' to exit: " R XTBANS:DTIME
"RTN","XTPMNEX7",58,0)
 I XTBANS["^" S XTBLN=9999
"RTN","XTPMNEX7",59,0)
 Q
"RTN","XTPMNEX7",60,0)
 ;
"RTN","XTPMNEX7",61,0)
SITETSK ;compile a list from sites
"RTN","XTPMNEX7",62,0)
 S XTBPSITE=1,IOP="P-MESSAGE;80;60",XMY("TRAN.BA@NXT.KERNEL.FO-OAKLAND.MED.VA.GO")=""
"RTN","XTPMNEX7",63,0)
 S XTBHDR="Patches Due Within Eight Days for "_^DD("SITE")
"RTN","XTPMNEX7",64,0)
 S XTBBDT=3010101,X="T+8",%DT="" D ^%DT S XTBEDT=Y
"RTN","XTPMNEX7",65,0)
 G RPT1
"RTN","XTPMSTA2")
0^5^B20410283
"RTN","XTPMSTA2",1,0)
XTPMSTA2 ;OAK/BP - PRINT PATCH STATISTICS BY COMPLIANCE DATE; [8/2/05 7:33am]
"RTN","XTPMSTA2",2,0)
 ;;7.3;TOOLKIT;**98**; Apr 25, 1995
"RTN","XTPMSTA2",3,0)
 ;
"RTN","XTPMSTA2",4,0)
 S IOP="HOME" D ^%ZIS K IOP
"RTN","XTPMSTA2",5,0)
EN W @IOF,"Patch Monitor Statistics By Compliance Date",!!!
"RTN","XTPMSTA2",6,0)
 ;
"RTN","XTPMSTA2",7,0)
DATE W ! S %DT="AEP"
"RTN","XTPMSTA2",8,0)
 S %DT("A")="Enter BEGINNING Compliance date: " D ^%DT G:Y<0 EXIT S XTBBDT=Y X ^DD("DD") S XTBBDT1=Y
"RTN","XTPMSTA2",9,0)
 S %DT="AE",%DT("A")="     and ENDING Compliance date: " D ^%DT G:Y<0 EXIT S XTBEDT=Y X ^DD("DD") S XTBEDT1=Y
"RTN","XTPMSTA2",10,0)
 I XTBEDT<XTBBDT W !!,$C(7),"Starting date is later than ending date.",!! H 2 G DATE
"RTN","XTPMSTA2",11,0)
 W !!,"Do you want to see the patch data" S %=2 D YN^DICN S XTBVIEW=%
"RTN","XTPMSTA2",12,0)
 ;
"RTN","XTPMSTA2",13,0)
DEV W !! S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMSTA2",14,0)
 I $D(IO("Q")) S ZTIO=ION,ZTRTN="SORT^XTPMSTA2",ZTSAVE("XTB*")="",ZTDESC="Patch Monitor Statistics By Compliance Date" D ^%ZTLOAD
"RTN","XTPMSTA2",15,0)
 I  W:$D(ZTSK) !,"Queued as task #",ZTSK H 2 G EXIT
"RTN","XTPMSTA2",16,0)
 ;
"RTN","XTPMSTA2",17,0)
 ; sort patches by compliance date
"RTN","XTPMSTA2",18,0)
SORT U IO K ^TMP($J)
"RTN","XTPMSTA2",19,0)
 F XTBCPLDT=(XTBBDT-.0001):0 S XTBCPLDT=$O(^XPD(9.9,"D",XTBCPLDT)) Q:XTBCPLDT=""!(XTBCPLDT>XTBEDT)  DO
"RTN","XTPMSTA2",20,0)
 .F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"D",XTBCPLDT,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMSTA2",21,0)
 ..S XTBDTA=$G(^XPD(9.9,XTBDA,0)) Q:XTBDTA=""
"RTN","XTPMSTA2",22,0)
 ..S XTBPTNAM=$P(XTBDTA,U,1),XTBNMSP=$P($P(XTBDTA,U,4)," - ",1) Q:XTBNMSP=""  ;parent package missing in file
"RTN","XTPMSTA2",23,0)
 ..S XTBRELDT=$P(XTBDTA,U,2),XTBPRIOR=$P(XTBDTA,U,3)
"RTN","XTPMSTA2",24,0)
 ..S ^TMP($J,XTBCPLDT,XTBPTNAM,XTBDA)=XTBRELDT_U_XTBPRIOR
"RTN","XTPMSTA2",25,0)
PRINT ; 
"RTN","XTPMSTA2",26,0)
 S Y=DT X ^DD("DD") S XTBCURDT=Y
"RTN","XTPMSTA2",27,0)
 K XTBLINE S $P(XTBLINE,"-",(IOM-2))="-"
"RTN","XTPMSTA2",28,0)
 S PG=0 D HDR ; first header
"RTN","XTPMSTA2",29,0)
 S XTBPTNAM="",(XTBTPTCH,XTBTLATE)=0
"RTN","XTPMSTA2",30,0)
 F XTBCPLDT=0:0 S XTBCPLDT=$O(^TMP($J,XTBCPLDT)) Q:XTBCPLDT=""  F  S XTBPTNAM=$O(^TMP($J,XTBCPLDT,XTBPTNAM)) Q:XTBPTNAM=""  DO  Q:$D(XTBOUT)
"RTN","XTPMSTA2",31,0)
 .F XTBDA=0:0 S XTBDA=$O(^TMP($J,XTBCPLDT,XTBPTNAM,XTBDA)) Q:XTBDA=""  DO  Q:$D(XTBOUT)
"RTN","XTPMSTA2",32,0)
 ..S XTBTPTCH=XTBTPTCH+1
"RTN","XTPMSTA2",33,0)
 ..S XTBDTA=^TMP($J,XTBCPLDT,XTBPTNAM,XTBDA)
"RTN","XTPMSTA2",34,0)
 ..S XTBRELDT=$P(XTBDTA,U),XTBPRIOR=$P(XTBDTA,U,2)
"RTN","XTPMSTA2",35,0)
 ..S XTBRCVDT=$P($G(^XPD(9.9,XTBDA,0)),U,2)
"RTN","XTPMSTA2",36,0)
 ..S XTBPTYPE=$P($G(^XPD(9.9,XTBDA,0)),U,10)
"RTN","XTPMSTA2",37,0)
 ..I +XTBPTYPE=0 S D0=XTBDA D ^XTPMKPCF S XTBINSDT=X K D0
"RTN","XTPMSTA2",38,0)
 ..I +XTBPTYPE=1 S XTBINSDT=$P($G(^XPD(9.9,XTBDA,0)),U,11)
"RTN","XTPMSTA2",39,0)
 ..I XTBINSDT]"" S X1=XTBINSDT,X2=XTBCPLDT D ^%DTC S XTBDAYLT=X
"RTN","XTPMSTA2",40,0)
 ..I XTBINSDT="" S X1=DT,X2=XTBCPLDT D ^%DTC S XTBDAYLT=X
"RTN","XTPMSTA2",41,0)
 ..S Y=XTBINSDT X ^DD("DD") S XTBINSDT=Y
"RTN","XTPMSTA2",42,0)
 ..S Y=XTBCPLDT X ^DD("DD") S XTBCPLDX=Y
"RTN","XTPMSTA2",43,0)
 ..S Y=XTBRELDT X ^DD("DD") S XTBRELDT=Y
"RTN","XTPMSTA2",44,0)
 ..S XTBPRIOR=$S(XTBPRIOR="m":"Mandatory",XTBPRIOR="e":"Emergency",1:"Unknown")
"RTN","XTPMSTA2",45,0)
 ..I XTBVIEW=1 W XTBCPLDX,?14,XTBPTNAM,?27,XTBRELDT,?41,XTBINSDT,?55,XTBPRIOR
"RTN","XTPMSTA2",46,0)
 ..I XTBVIEW=1,XTBDAYLT>0 W ?67,$J(XTBDAYLT,3,0)_$S(XTBDAYLT>1:" days",1:" day")
"RTN","XTPMSTA2",47,0)
 ..I XTBDAYLT>0 S XTBTLATE=XTBTLATE+1
"RTN","XTPMSTA2",48,0)
 ..I XTBVIEW=1 W ! I $Y>(IOSL-6),IOST?1"C-".E D PAUSE Q:$D(XTBOUT)
"RTN","XTPMSTA2",49,0)
 ..I XTBVIEW=1 I $Y>(IOSL-6) D HDR
"RTN","XTPMSTA2",50,0)
 G:$D(XTBOUT) EXIT
"RTN","XTPMSTA2",51,0)
 I $Y>(IOSL-6),IOST?1"C-".E D HDR
"RTN","XTPMSTA2",52,0)
 W !!?6,"Totals patches received for date range: ",XTBTPTCH,!
"RTN","XTPMSTA2",53,0)
 W "Total patches installed past compliance date: ",XTBTLATE,!!
"RTN","XTPMSTA2",54,0)
 S XTBDIVOK=0 I XTBTPTCH>0 S XTBDIVOK=1
"RTN","XTPMSTA2",55,0)
 W ?25,"Delinquent patch % : ",$S(XTBDIVOK=1:$J((XTBTLATE/XTBTPTCH*100),6,2),1:100)_" %",!
"RTN","XTPMSTA2",56,0)
 W ?25,"      Compliance % : ",$S(XTBDIVOK=1:$J(100-(XTBTLATE/XTBTPTCH*100),6,2),1:100)," %",!
"RTN","XTPMSTA2",57,0)
 I IOST?1"C-".E K XTBANS W !!,"Press ENTER to end " R XTBANS:DTIME
"RTN","XTPMSTA2",58,0)
 ;
"RTN","XTPMSTA2",59,0)
EXIT I IOST?1"C-".E W @IOF,!
"RTN","XTPMSTA2",60,0)
 D ^%ZISC
"RTN","XTPMSTA2",61,0)
 K %,%DT,%ZIS,XTBNMSP,XTBANS,XTBBDT,XTBBDT1,XTBCPLDT,XTBCPLDX,XTBDA,XTBEDT,XTBEDT1,XTBDAYLT
"RTN","XTPMSTA2",62,0)
 K XTBINSDT,XTBLINE,XTBNMSP,XTBOLDNM,XTBNMSP,XTBPTNAM,XTBPTYPE,XTBDTA,XTBGPDA
"RTN","XTPMSTA2",63,0)
 K XTBRCVDT,XTBTLATE,XTBTPTCH,D0,DIC,PG,POP,X,X1,X2,Y,ZTDESC,ZTIO,ZTRTN,ZTSAVE,%T,%Y
"RTN","XTPMSTA2",64,0)
 K ^TMP($J),XTBOUT,XTBPGF,XTBOLGRP,ZTSK,XTBRELDT,XTBPRIOR,XTBCURDT,XTBDIVOK,XTBVIEW
"RTN","XTPMSTA2",65,0)
 Q
"RTN","XTPMSTA2",66,0)
 ;
"RTN","XTPMSTA2",67,0)
HDR S PG=PG+1 I IOST?1"P-".E,PG>1 W @IOF
"RTN","XTPMSTA2",68,0)
 I IOST?1"C-".E W @IOF
"RTN","XTPMSTA2",69,0)
 W XTBCURDT S X="Patch Statistical Report for "_^DD("SITE")
"RTN","XTPMSTA2",70,0)
 W ?(IOM-$L(X)\2),X,?(IOM-12),"Page: ",PG,!,?31,"By Compliance Date",!
"RTN","XTPMSTA2",71,0)
 S X="Date range: "_XTBBDT1_" to "_XTBEDT1 W ?(IOM-$L(X)\2),X,!
"RTN","XTPMSTA2",72,0)
 W !,"Compliance",?14,"Patch",?27,"Release",?41,"Install",?67,"# Days",!
"RTN","XTPMSTA2",73,0)
 W "Date",?14,"Number",?27,"Date",?41,"Date",?55,"Priority",?67,"Delinquent",!,XTBLINE,!
"RTN","XTPMSTA2",74,0)
 Q
"RTN","XTPMSTA2",75,0)
 ;
"RTN","XTPMSTA2",76,0)
PAUSE Q:IOST'?1"C-".E
"RTN","XTPMSTA2",77,0)
 K XTBANS,XTBOUT W !!,"Press ENTER to continue or '^' to end " R XTBANS:DTIME
"RTN","XTPMSTA2",78,0)
 I XTBANS[U!('$T) S (XTBNMSP,XTBPTNAM,XTBCPLDT,XTBDA)="99999999",XTBOUT=1
"RTN","XTPMSTA2",79,0)
 Q
"RTN","XTPMSTAT")
0^6^B31021874
"RTN","XTPMSTAT",1,0)
XTPMSTAT ;OAK/BP - PRINT PATCH STATISTICS BY REPORT GROUP; [8/2/05 7:35am]
"RTN","XTPMSTAT",2,0)
 ;;7.3;TOOLKIT;**98**; Apr 25, 1995
"RTN","XTPMSTAT",3,0)
 ;
"RTN","XTPMSTAT",4,0)
 S IOP="HOME" D ^%ZIS K IOP
"RTN","XTPMSTAT",5,0)
EN W @IOF,"Patch Monitor Statistics",!!!
"RTN","XTPMSTAT",6,0)
 W "Please select the REPORTING GROUP.  You may select as many groups as you",!
"RTN","XTPMSTAT",7,0)
 W "wish for each report.  Each group will be reported in a separate section.",!!!
"RTN","XTPMSTAT",8,0)
 K TMP("XTBGRP"),TMP("XTBPKG")
"RTN","XTPMSTAT",9,0)
 N DIC,DA S DIC(0)="AEQM",DIC="^XPD(9.95," D ^DIC S DA(1)=+Y
"RTN","XTPMSTAT",10,0)
 I DA(1)>0 N DIC S DIC(0)="AEQM",DIC="^XPD(9.95,DA(1),2," F  D ^DIC Q:Y<0  DO
"RTN","XTPMSTAT",11,0)
 .I $D(TMP("XTBGRP",$P(Y,U,2))) W $C(7),". . . You already have that one" Q
"RTN","XTPMSTAT",12,0)
 .S TMP("XTBGRP",$P(Y,U,2))=+Y
"RTN","XTPMSTAT",13,0)
 G:X[U EXIT
"RTN","XTPMSTAT",14,0)
 G:'$D(TMP("XTBGRP")) EXIT
"RTN","XTPMSTAT",15,0)
 W !!,"Do you want a new form/screen between REPORTING GROUPS" S %=1 D YN^DICN S XTBPGF=%
"RTN","XTPMSTAT",16,0)
 ;
"RTN","XTPMSTAT",17,0)
DATE W ! S %DT="AEP"
"RTN","XTPMSTAT",18,0)
 S %DT("A")="Enter BEGINNING Compliance date: " D ^%DT G:Y<0 EXIT S XTBBDT=Y X ^DD("DD") S XTBBDT1=Y
"RTN","XTPMSTAT",19,0)
 S %DT="AE",%DT("A")="     and ENDING Compliance date: " D ^%DT G:Y<0 EXIT S XTBEDT=Y X ^DD("DD") S XTBEDT1=Y
"RTN","XTPMSTAT",20,0)
 I XTBEDT<XTBBDT W !!,$C(7),"Starting date is later than ending date.",!! H 2 G DATE
"RTN","XTPMSTAT",21,0)
 ;
"RTN","XTPMSTAT",22,0)
DEV W !! S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMSTAT",23,0)
 I $D(IO("Q")) S ZTIO=ION,ZTRTN="SORT^XTPMSTAT",ZTSAVE("XTB*")="",ZTSAVE("TMP*")="",ZTDESC="Patch Monitor Statistics" D ^%ZTLOAD
"RTN","XTPMSTAT",24,0)
 I  W:$D(ZTSK) !,"Queued as task #",ZTSK H 2 G EXIT
"RTN","XTPMSTAT",25,0)
 ;
"RTN","XTPMSTAT",26,0)
 ; sort patches by compliance date
"RTN","XTPMSTAT",27,0)
SORT U IO F XTBCPLDT=(XTBBDT-.0001):0 S XTBCPLDT=$O(^XPD(9.9,"D",XTBCPLDT)) Q:XTBCPLDT=""!(XTBCPLDT>XTBEDT)  DO
"RTN","XTPMSTAT",28,0)
 .F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"D",XTBCPLDT,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMSTAT",29,0)
 ..S XTBDTA=$G(^XPD(9.9,XTBDA,0)) Q:XTBDTA=""
"RTN","XTPMSTAT",30,0)
 ..S XTBPTNAM=$P(XTBDTA,U,1),XTBNMSP=$P($P(XTBDTA,U,4)," - ",1) Q:XTBNMSP=""  ;parent package missing in file
"RTN","XTPMSTAT",31,0)
 ..S XTBRELDT=$P(XTBDTA,U,2),XTBPRIOR=$P(XTBDTA,U,3)
"RTN","XTPMSTAT",32,0)
 ..S TMP("XTBPKG",XTBNMSP,XTBCPLDT,XTBPTNAM,XTBDA)=XTBRELDT_U_XTBPRIOR
"RTN","XTPMSTAT",33,0)
PRINT ; read and print sorted groups
"RTN","XTPMSTAT",34,0)
 S Y=DT X ^DD("DD") S XTBCURDT=Y
"RTN","XTPMSTAT",35,0)
 K XTBLINE S $P(XTBLINE,"-",(IOM-2))="-"
"RTN","XTPMSTAT",36,0)
 S PG=0,XTBGRP="",XTBGRP=$O(TMP("XTBGRP",XTBGRP)) G:XTBGRP="" EXIT D HDR ; first header
"RTN","XTPMSTAT",37,0)
 S (XTBGRP,XTBNMSP,XTBPTNAM,XTBOLDNM,XTBOLGRP)="",(XTBTPTCH,XTBTLATE)=0
"RTN","XTPMSTAT",38,0)
 F  S XTBGRP=$O(TMP("XTBGRP",XTBGRP)) Q:XTBGRP=""  S XTBGPDA=TMP("XTBGRP",XTBGRP)  DO  Q:$D(XTBOUT)
"RTN","XTPMSTAT",39,0)
 .; read param file for monitored groups
"RTN","XTPMSTAT",40,0)
 .F  S XTBNMSP=$O(^XPD(9.95,1,2,XTBGPDA,1,"B",XTBNMSP)) Q:XTBNMSP=""  I $D(TMP("XTBPKG",XTBNMSP)) DO  Q:$D(XTBOUT)
"RTN","XTPMSTAT",41,0)
 ..; read sorted namespaces
"RTN","XTPMSTAT",42,0)
 ..F XTBCPLDT=0:0 S XTBCPLDT=$O(TMP("XTBPKG",XTBNMSP,XTBCPLDT)) Q:XTBCPLDT=""  F  S XTBPTNAM=$O(TMP("XTBPKG",XTBNMSP,XTBCPLDT,XTBPTNAM)) Q:XTBPTNAM=""  DO  Q:$D(XTBOUT)
"RTN","XTPMSTAT",43,0)
 ...F XTBDA=0:0 S XTBDA=$O(TMP("XTBPKG",XTBNMSP,XTBCPLDT,XTBPTNAM,XTBDA)) Q:XTBDA=""  DO  Q:$D(XTBOUT)
"RTN","XTPMSTAT",44,0)
 ....S XTBTPTCH=XTBTPTCH+1
"RTN","XTPMSTAT",45,0)
 ....S XTBDTA=TMP("XTBPKG",XTBNMSP,XTBCPLDT,XTBPTNAM,XTBDA)
"RTN","XTPMSTAT",46,0)
 ....S XTBRELDT=$P(XTBDTA,U),XTBPRIOR=$P(XTBDTA,U,2)
"RTN","XTPMSTAT",47,0)
 ....S XTBRCVDT=$P($G(^XPD(9.9,XTBDA,0)),U,2)
"RTN","XTPMSTAT",48,0)
 ....S XTBPTYPE=$P($G(^XPD(9.9,XTBDA,0)),U,10)
"RTN","XTPMSTAT",49,0)
 ....I +XTBPTYPE=0 S D0=XTBDA D ^XTPMKPCF S XTBINSDT=X K D0
"RTN","XTPMSTAT",50,0)
 ....I +XTBPTYPE=1 S XTBINSDT=$P($G(^XPD(9.9,XTBDA,0)),U,11)
"RTN","XTPMSTAT",51,0)
 ....I XTBINSDT]"" S X1=XTBINSDT,X2=XTBCPLDT D ^%DTC S XTBDAYLT=X
"RTN","XTPMSTAT",52,0)
 ....I XTBINSDT="" S X1=DT,X2=XTBCPLDT D ^%DTC S XTBDAYLT=X
"RTN","XTPMSTAT",53,0)
 ....S XTBGRPHD="Report group: "_XTBGRP
"RTN","XTPMSTAT",54,0)
 ....I XTBOLGRP="",PG=1 W XTBGRPHD,!!
"RTN","XTPMSTAT",55,0)
 ....I XTBOLDNM'="",XTBNMSP'=XTBOLDNM W !
"RTN","XTPMSTAT",56,0)
 ....I XTBOLDNM'="",XTBGRP'=XTBOLGRP,XTBPGF=1 D:IOST?1"C-".E PAUSE Q:$D(XTBOUT)  D HDR W XTBGRPHD,!!
"RTN","XTPMSTAT",57,0)
 ....I XTBOLDNM'="",XTBGRP'=XTBOLGRP,XTBPGF=0 W !,XTBGRPHD,!!
"RTN","XTPMSTAT",58,0)
 ....I $Y>(IOSL-6),IOST?1"C-".E D PAUSE Q:$D(XTBOUT)  D HDR I XTBGRP'=XTBOLGRP W XTBGRPHD,!!
"RTN","XTPMSTAT",59,0)
 ....S Y=XTBINSDT X ^DD("DD") S XTBINSDT=Y
"RTN","XTPMSTAT",60,0)
 ....S Y=XTBCPLDT X ^DD("DD") S XTBCPLDX=Y
"RTN","XTPMSTAT",61,0)
 ....S Y=XTBRELDT X ^DD("DD") S XTBRELDT=Y
"RTN","XTPMSTAT",62,0)
 ....S XTBPRIOR=$S(XTBPRIOR="m":"Mandatory",XTBPRIOR="e":"Emergency",1:"Unknown")
"RTN","XTPMSTAT",63,0)
 ....W XTBCPLDX,?14,XTBPTNAM,?27,XTBRELDT,?41,XTBINSDT,?55,XTBPRIOR
"RTN","XTPMSTAT",64,0)
 ....I XTBDAYLT>0 W ?67,$J(XTBDAYLT,3,0)_$S(XTBDAYLT>1:" days",1:" day") S XTBTLATE=XTBTLATE+1
"RTN","XTPMSTAT",65,0)
 ....W ! S XTBOLDNM=XTBNMSP,XTBOLGRP=XTBGRP
"RTN","XTPMSTAT",66,0)
 ....I $Y>(IOSL-6),IOST?1"C-".E D PAUSE Q:$D(XTBOUT)
"RTN","XTPMSTAT",67,0)
 ....I $Y>(IOSL-6) D HDR I XTBGRP'=XTBOLGRP W XTBGRPHD,!!
"RTN","XTPMSTAT",68,0)
 G:$D(XTBOUT) EXIT
"RTN","XTPMSTAT",69,0)
 I $Y>(IOSL-6),IOST?1"C-".E D HDR
"RTN","XTPMSTAT",70,0)
 W !!?6,"Totals patches received for date range: ",XTBTPTCH,!
"RTN","XTPMSTAT",71,0)
 W "Total patches installed past compliance date: ",XTBTLATE,!!
"RTN","XTPMSTAT",72,0)
 S XTBDIVOK=0 I XTBTPTCH>0 S XTBDIVOK=1
"RTN","XTPMSTAT",73,0)
 W ?25,"Delinquent patch % : ",$S(XTBDIVOK=1:$J((XTBTLATE/XTBTPTCH*100),6,2),1:0)_" %",!
"RTN","XTPMSTAT",74,0)
 W ?25,"      Compliance % : ",$S(XTBDIVOK=1:$J(100-(XTBTLATE/XTBTPTCH*100),6,2),1:0)," %",!
"RTN","XTPMSTAT",75,0)
 I IOST?1"C-".E K XTBANS W !!,"Press ENTER to end " R XTBANS:DTIME
"RTN","XTPMSTAT",76,0)
 ;
"RTN","XTPMSTAT",77,0)
EXIT I IOST?1"C-".E W @IOF,!
"RTN","XTPMSTAT",78,0)
 D ^%ZISC
"RTN","XTPMSTAT",79,0)
 K %,%DT,%ZIS,XTBNMSP,XTBANS,XTBBDT,XTBBDT1,XTBCPLDT,XTBCPLDX,XTBDA,XTBEDT,XTBEDT1,XTBDAYLT,TMP
"RTN","XTPMSTAT",80,0)
 K XTBGRPDA,XTBGRP,XTBINSDT,XTBLINE,XTBNMSP,XTBOLDNM,XTBNMSP,XTBPTNAM,XTBPTYPE,XTBDTA,XTBGPDA
"RTN","XTPMSTAT",81,0)
 K XTBRCVDT,XTBTLATE,XTBTPTCH,D0,DIC,PG,POP,X,X1,X2,Y,ZTDESC,ZTIO,ZTRTN,ZTSAVE,%T,%Y,XTBGRPHD
"RTN","XTPMSTAT",82,0)
 K TMP("XTBGRP"),TMP("XTBPKG"),XTBOUT,XTBPGF,XTBOLGRP,ZTSK,XTBRELDT,XTBPRIOR,XTBCURDT,XTBDIVOK
"RTN","XTPMSTAT",83,0)
 Q
"RTN","XTPMSTAT",84,0)
 ;
"RTN","XTPMSTAT",85,0)
HDR S PG=PG+1 I IOST?1"P-".E,PG>1 W @IOF
"RTN","XTPMSTAT",86,0)
 I IOST?1"C-".E W @IOF
"RTN","XTPMSTAT",87,0)
 W XTBCURDT S X="Patch Statistical Report for "_^DD("SITE")
"RTN","XTPMSTAT",88,0)
 W ?(IOM-$L(X)\2),X,?(IOM-12),"Page: ",PG,!
"RTN","XTPMSTAT",89,0)
 S X="Date range: "_XTBBDT1_" to "_XTBEDT1 W ?(IOM-$L(X)\2),X,!
"RTN","XTPMSTAT",90,0)
 W !,"Compliance",?14,"Patch",?27,"Release",?41,"Install",?67,"# Days",!
"RTN","XTPMSTAT",91,0)
 W "Date",?14,"Number",?27,"Date",?41,"Date",?55,"Priority",?67,"Delinquent",!,XTBLINE,!
"RTN","XTPMSTAT",92,0)
 Q
"RTN","XTPMSTAT",93,0)
 ;
"RTN","XTPMSTAT",94,0)
PAUSE Q:IOST'?1"C-".E
"RTN","XTPMSTAT",95,0)
 K XTBANS,XTBOUT W !!,"Press ENTER to continue or '^' to end " R XTBANS:DTIME
"RTN","XTPMSTAT",96,0)
 I XTBANS[U!('$T) S (XTBNMSP,XTBPTNAM,XTBCPLDT,XTBDA)="ZZZZZZ",XTBOUT=1
"RTN","XTPMSTAT",97,0)
 Q
"SEC","^DIC",9.9,9.9,0,"AUDIT")
#
"SEC","^DIC",9.9,9.9,0,"DD")
@ 
"SEC","^DIC",9.9,9.9,0,"DEL")
@ 
"SEC","^DIC",9.9,9.9,0,"LAYGO")
@ 
"SEC","^DIC",9.9,9.9,0,"RD")
#
"SEC","^DIC",9.9,9.9,0,"WR")
@ 
"SEC","^DIC",9.95,9.95,0,"AUDIT")
#
"SEC","^DIC",9.95,9.95,0,"DD")
@
"SEC","^DIC",9.95,9.95,0,"DEL")
@
"SEC","^DIC",9.95,9.95,0,"LAYGO")
@
"SEC","^DIC",9.95,9.95,0,"RD")
#
"SEC","^DIC",9.95,9.95,0,"WR")
@
"VER")
8.0^22.0
"^DD",9.9,9.9,0)
FIELD^^13^14
"^DD",9.9,9.9,0,"DDA")
N
"^DD",9.9,9.9,0,"DT")
3050802
"^DD",9.9,9.9,0,"IX","B",9.9,.01)

"^DD",9.9,9.9,0,"IX","C",9.9,1)

"^DD",9.9,9.9,0,"IX","D",9.9,8)

"^DD",9.9,9.9,0,"IX","E",9.9,12)

"^DD",9.9,9.9,0,"NM","PATCH MONITOR")

"^DD",9.9,9.9,0,"VRPK")
XT
"^DD",9.9,9.9,.01,0)
PATCH NAME^RF^^0;1^K:$L(X)>20!($L(X)<3)!'(X'?1P.E) X
"^DD",9.9,9.9,.01,1,0)
^.1
"^DD",9.9,9.9,.01,1,1,0)
9.9^B
"^DD",9.9,9.9,.01,1,1,1)
S ^XPD(9.9,"B",$E(X,1,30),DA)=""
"^DD",9.9,9.9,.01,1,1,2)
K ^XPD(9.9,"B",$E(X,1,30),DA)
"^DD",9.9,9.9,.01,3)
Answer must be 3-20 characters in length.
"^DD",9.9,9.9,.01,21,0)
^^4^4^3050721^
"^DD",9.9,9.9,.01,21,1,0)
This is the name of the patch as it comes in the mail message. 
"^DD",9.9,9.9,.01,21,2,0)
 
"^DD",9.9,9.9,.01,21,3,0)
Examples: RMIM*1*1
"^DD",9.9,9.9,.01,21,4,0)
          DG*5.3*211
"^DD",9.9,9.9,.01,"DT")
3050721
"^DD",9.9,9.9,1,0)
DATE OF RECEIPT^D^^0;2^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",9.9,9.9,1,1,0)
^.1
"^DD",9.9,9.9,1,1,1,0)
9.9^C
"^DD",9.9,9.9,1,1,1,1)
S ^XPD(9.9,"C",$E(X,1,30),DA)=""
"^DD",9.9,9.9,1,1,1,2)
K ^XPD(9.9,"C",$E(X,1,30),DA)
"^DD",9.9,9.9,1,1,1,"%D",0)
^^1^1^3050721^
"^DD",9.9,9.9,1,1,1,"%D",1,0)
Index by Date of Receipt.
"^DD",9.9,9.9,1,1,1,"DT")
3050721
"^DD",9.9,9.9,1,3)
The date the patch was received in-house.
"^DD",9.9,9.9,1,21,0)
^^1^1^3050721^
"^DD",9.9,9.9,1,21,1,0)
This is the date the patch was received in-house.
"^DD",9.9,9.9,1,"DT")
3050721
"^DD",9.9,9.9,2,0)
PRIORITY^S^m:MANDATORY;e:EMERGENCY;^0;3^Q
"^DD",9.9,9.9,2,3)
Enter the priority of the patch. Type ? for help.
"^DD",9.9,9.9,2,21,0)
^^1^1^3050721^
"^DD",9.9,9.9,2,21,1,0)
The priority assigned to this patch.  Typical is "mandatory".
"^DD",9.9,9.9,2,"DT")
3050721
"^DD",9.9,9.9,3,0)
PARENT PACKAGE^F^^0;4^K:$L(X)>35!($L(X)<3) X
"^DD",9.9,9.9,3,3)
The parent package of the patch.
"^DD",9.9,9.9,3,21,0)
^^4^4^3050721^
"^DD",9.9,9.9,3,21,1,0)
This is the package for which the patch was issued.
"^DD",9.9,9.9,3,21,2,0)
 
"^DD",9.9,9.9,3,21,3,0)
This field must be free text because of the possibility of having a patch 
"^DD",9.9,9.9,3,21,4,0)
issued for a new package without the package having been installed yet.
"^DD",9.9,9.9,3,"DT")
3050721
"^DD",9.9,9.9,4,0)
SEQUENCE NUMBER^NJ12,0^^0;5^K:+X'=X!(X>999999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",9.9,9.9,4,3)
The sequence number of the patch.
"^DD",9.9,9.9,4,21,0)
^^2^2^3050721^
"^DD",9.9,9.9,4,21,1,0)
This is the sequence number assigned to the patch by the National Patch 
"^DD",9.9,9.9,4,21,2,0)
Module.
"^DD",9.9,9.9,4,"DT")
3050721
"^DD",9.9,9.9,5,0)
PACKAGE VERSION^F^^0;6^K:$L(X)>10!($L(X)<1) X
"^DD",9.9,9.9,5,3)
The version assignment of the parent package.
"^DD",9.9,9.9,5,21,0)
^^2^2^3050721^
"^DD",9.9,9.9,5,21,1,0)
This is the version of the parent package for which a patch is sent.  It 
"^DD",9.9,9.9,5,21,2,0)
is determined from the patch information in the message.
"^DD",9.9,9.9,5,"DT")
3050721
"^DD",9.9,9.9,6,0)
PATCH SUBJECT^F^^0;7^K:$L(X)>50!($L(X)<3) X
"^DD",9.9,9.9,6,3)
Answer must be 3-50 characters in length.
"^DD",9.9,9.9,6,21,0)
^^1^1^3050721^
"^DD",9.9,9.9,6,21,1,0)
This is the subject of the patch.
"^DD",9.9,9.9,6,"DT")
3050721
"^DD",9.9,9.9,7,0)
INSTALL NAME^F^^0;8^K:$L(X)>35!($L(X)<3) X
"^DD",9.9,9.9,7,3)
Answer must be 3-35 characters in length.
"^DD",9.9,9.9,7,21,0)
^^6^6^3050721^
"^DD",9.9,9.9,7,21,1,0)
The installation information may or may not be in the INSTALL file for a 
"^DD",9.9,9.9,7,21,2,0)
patch.  This may be because of:
"^DD",9.9,9.9,7,21,3,0)
 
"^DD",9.9,9.9,7,21,4,0)
        a.  The package is new and may not yet be loaded
"^DD",9.9,9.9,7,21,5,0)
            but already has patches issued.
"^DD",9.9,9.9,7,21,6,0)
        b.  The patch is a non-kids patch for executables, etc.
"^DD",9.9,9.9,7,"DT")
3050721
"^DD",9.9,9.9,8,0)
COMPLIANCE DATE^D^^0;9^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",9.9,9.9,8,1,0)
^.1
"^DD",9.9,9.9,8,1,1,0)
9.9^D
"^DD",9.9,9.9,8,1,1,1)
S ^XPD(9.9,"D",$E(X,1,30),DA)=""
"^DD",9.9,9.9,8,1,1,2)
K ^XPD(9.9,"D",$E(X,1,30),DA)
"^DD",9.9,9.9,8,1,1,"%D",0)
^^1^1^3050721^
"^DD",9.9,9.9,8,1,1,"%D",1,0)
Index by Compliance Date.
"^DD",9.9,9.9,8,1,1,"DT")
3050721
"^DD",9.9,9.9,8,3)
This is the date the patch must be installed by.
"^DD",9.9,9.9,8,21,0)
^.001^1^1^3050721^^
"^DD",9.9,9.9,8,21,1,0)
This is the date by which the patch must be installed.
"^DD",9.9,9.9,8,"DT")
3050721
"^DD",9.9,9.9,9,0)
DATE INSTALLED^CJ^^ ; ^D ^XTPMKPCF
"^DD",9.9,9.9,9,9)
^
"^DD",9.9,9.9,9,9.01)

"^DD",9.9,9.9,9,9.1)
D ^XTPMKPCF
"^DD",9.9,9.9,9,21,0)
^^7^7^3050721^
"^DD",9.9,9.9,9,21,1,0)
This is a computed field, driven by a mumps routine AWBCKPCF.  This is a 
"^DD",9.9,9.9,9,21,2,0)
special routine to calculate the date installed from the INSTALL file.  
"^DD",9.9,9.9,9,21,3,0)
It reads the index backwards to find the last installed version by taking
"^DD",9.9,9.9,9,21,4,0)
the $O(^XPD(9.7,"B",[INSTALL NAME],9999999999),-1)
"^DD",9.9,9.9,9,21,5,0)
 
"^DD",9.9,9.9,9,21,6,0)
This is done because there may be several test versions on file in 
"^DD",9.9,9.9,9,21,7,0)
INSTALL file which may affect the true installation date determination
"^DD",9.9,9.9,9,"DT")
3050802
"^DD",9.9,9.9,10,0)
INSTALLED BY^CJ30^^ ; ^D WHO^XTPMKPCF
"^DD",9.9,9.9,10,9)
^
"^DD",9.9,9.9,10,9.01)

"^DD",9.9,9.9,10,9.1)
D WHO^XTPMKPCF
"^DD",9.9,9.9,10,21,0)
^^2^2^3050721^
"^DD",9.9,9.9,10,21,1,0)
This is a computed field driven also by the routine AWBCKPCF at entry 
"^DD",9.9,9.9,10,21,2,0)
point WHO.  It tells who installed the patch.
"^DD",9.9,9.9,10,"DT")
3050802
"^DD",9.9,9.9,11,0)
NON-KIDS PATCH?^S^1:YES;^0;10^Q
"^DD",9.9,9.9,11,3)
Enter 1 if a Non-KIDS patch.
"^DD",9.9,9.9,11,21,0)
^^4^4^3050721^
"^DD",9.9,9.9,11,21,1,0)
This field determines what happens in various areas of the package.  A 
"^DD",9.9,9.9,11,21,2,0)
patch can be KIDs or non-KIDs.  The data on a patch record can be either 
"^DD",9.9,9.9,11,21,3,0)
NULL (KIDs patch) or 1 (Non-KIDs patch).  The field can actually be only 
"^DD",9.9,9.9,11,21,4,0)
set to a 1 or the information deleted (NULL).
"^DD",9.9,9.9,11,"DT")
3050721
"^DD",9.9,9.9,12,0)
NON-KIDS INSTALL DATE^D^^0;11^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",9.9,9.9,12,1,0)
^.1
"^DD",9.9,9.9,12,1,1,0)
9.9^E
"^DD",9.9,9.9,12,1,1,1)
S ^XPD(9.9,"E",$E(X,1,30),DA)=""
"^DD",9.9,9.9,12,1,1,2)
K ^XPD(9.9,"E",$E(X,1,30),DA)
"^DD",9.9,9.9,12,1,1,"%D",0)
^^1^1^3050721^
"^DD",9.9,9.9,12,1,1,"%D",1,0)
ndex by Non-Kids Install Date.
"^DD",9.9,9.9,12,1,1,"DT")
3050721
"^DD",9.9,9.9,12,3)
Enter the date this NON-KIDS patch was completed.
"^DD",9.9,9.9,12,21,0)
^^11^11^3050721^
"^DD",9.9,9.9,12,21,1,0)
Non-KIDs patches are those which do not have an accompanying KIDs install 
"^DD",9.9,9.9,12,21,2,0)
in the Packman message because:
"^DD",9.9,9.9,12,21,3,0)
 
"^DD",9.9,9.9,12,21,4,0)
        o  It may have an accompanying host file (too large for a mail 
"^DD",9.9,9.9,12,21,5,0)
           message) or
"^DD",9.9,9.9,12,21,6,0)
 
"^DD",9.9,9.9,12,21,7,0)
        o  It may be a patch message referring to a .zip, .exe or other
"^DD",9.9,9.9,12,21,8,0)
           file which will not put an entry into the INSTALL file.
"^DD",9.9,9.9,12,21,9,0)
 
"^DD",9.9,9.9,12,21,10,0)
Because of this, there is no install record to extract the install date 
"^DD",9.9,9.9,12,21,11,0)
and it must be entered (i.e., completed) by filling in this field.
"^DD",9.9,9.9,12,"DT")
3050721
"^DD",9.9,9.9,13,0)
NON-KIDS PATCH COMPLETED BY^P200'^VA(200,^0;12^Q
"^DD",9.9,9.9,13,3)
This is the name of the person who completed the non-KIDs patch.
"^DD",9.9,9.9,13,21,0)
^^1^1^3050721^
"^DD",9.9,9.9,13,21,1,0)
This is a pointer to file 200 to record who completed the non-KIDs patch.
"^DD",9.9,9.9,13,"DT")
3050721
"^DD",9.95,9.95,0)
FIELD^^4^5
"^DD",9.95,9.95,0,"DDA")
N
"^DD",9.95,9.95,0,"DT")
3050721
"^DD",9.95,9.95,0,"IX","B",9.95,.01)

"^DD",9.95,9.95,0,"NM","PATCH MONITOR PARAMETER")

"^DD",9.95,9.95,0,"VRPK")
XT
"^DD",9.95,9.95,.01,0)
SITE NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",9.95,9.95,.01,1,0)
^.1
"^DD",9.95,9.95,.01,1,1,0)
9.95^B
"^DD",9.95,9.95,.01,1,1,1)
S ^XPD(9.95,"B",$E(X,1,30),DA)=""
"^DD",9.95,9.95,.01,1,1,2)
K ^XPD(9.95,"B",$E(X,1,30),DA)
"^DD",9.95,9.95,.01,3)
Enter the name of your site.
"^DD",9.95,9.95,.01,21,0)
^^1^1^3050721^
"^DD",9.95,9.95,.01,21,1,0)
The free text name of the facility that is tracking the patches.
"^DD",9.95,9.95,.01,"DT")
3050721
"^DD",9.95,9.95,1,0)
MAIL GROUPS^9.951P^^1;0
"^DD",9.95,9.95,1,21,0)
^^2^2^3050721^
"^DD",9.95,9.95,1,21,1,0)
This is a multiple field that has all the mail groups you wish to send an 
"^DD",9.95,9.95,1,21,2,0)
uninstalled patch bulletin to.
"^DD",9.95,9.95,2,0)
NUMBER OF DAYS TO KEEP DATA^NJ5,0^^0;2^K:+X'=X!(X>99999)!(X<7)!(X?.E1"."1N.N) X
"^DD",9.95,9.95,2,3)
Enter a number from 7 to 99999 for the number of days to keep data, if you are not deleting when patches are installed.
"^DD",9.95,9.95,2,21,0)
^^4^4^3050721^
"^DD",9.95,9.95,2,21,1,0)
If the site wishes to keep the data recording patch isntallations on 
"^DD",9.95,9.95,2,21,2,0)
file, this field keeps the number of days the site wishes to keep on 
"^DD",9.95,9.95,2,21,3,0)
file.  This field is not used if field 3, DELETE INSTALLED PATCHES? is 
"^DD",9.95,9.95,2,21,4,0)
answered 1 or YES.
"^DD",9.95,9.95,2,"DT")
3050721
"^DD",9.95,9.95,3,0)
DELETE INSTALLED PATCHES?^S^0:No;1:Yes;^0;3^Q
"^DD",9.95,9.95,3,3)
Enter 1 or YES to allow the night-time job to remove installed patches, or 0 or NO to leave them for future tracking.
"^DD",9.95,9.95,3,21,0)
^^6^6^3050721^
"^DD",9.95,9.95,3,21,1,0)
If the site wishes, patches that are installed may be deleted by the 
"^DD",9.95,9.95,3,21,2,0)
night time job.  This is only if they wish NOT to track timely 
"^DD",9.95,9.95,3,21,3,0)
installation.
"^DD",9.95,9.95,3,21,4,0)
 
"^DD",9.95,9.95,3,21,5,0)
If this field is answered 1 or YES, field 2, NUMBER OF DAYS TO KEEP DATA 
"^DD",9.95,9.95,3,21,6,0)
is ignored.
"^DD",9.95,9.95,3,"DT")
3050721
"^DD",9.95,9.95,4,0)
REPORTING GROUP^9.954^^2;0
"^DD",9.95,9.951,0)
MAIL GROUPS SUB-FIELD^^.01^1
"^DD",9.95,9.951,0,"DT")
3050721
"^DD",9.95,9.951,0,"IX","B",9.951,.01)

"^DD",9.95,9.951,0,"NM","MAIL GROUPS")

"^DD",9.95,9.951,0,"UP")
9.95
"^DD",9.95,9.951,.01,0)
MAIL GROUPS^MP3.8'^XMB(3.8,^0;1^Q
"^DD",9.95,9.951,.01,1,0)
^.1
"^DD",9.95,9.951,.01,1,1,0)
9.951^B
"^DD",9.95,9.951,.01,1,1,1)
S ^XPD(9.95,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",9.95,9.951,.01,1,1,2)
K ^XPD(9.95,DA(1),1,"B",$E(X,1,30),DA)
"^DD",9.95,9.951,.01,21,0)
^^2^2^3050721^
"^DD",9.95,9.951,.01,21,1,0)
The name of a mail group that wishes to receive uninstalled patch 
"^DD",9.95,9.951,.01,21,2,0)
bulletins.
"^DD",9.95,9.951,.01,"DT")
3050721
"^DD",9.95,9.954,0)
REPORTING GROUP SUB-FIELD^^1^2
"^DD",9.95,9.954,0,"DT")
3050721
"^DD",9.95,9.954,0,"IX","B",9.954,.01)

"^DD",9.95,9.954,0,"NM","REPORTING GROUP")

"^DD",9.95,9.954,0,"UP")
9.95
"^DD",9.95,9.954,.01,0)
REPORTING GROUP^MF^^0;1^K:$L(X)>15!($L(X)<3) X
"^DD",9.95,9.954,.01,1,0)
^.1
"^DD",9.95,9.954,.01,1,1,0)
9.954^B
"^DD",9.95,9.954,.01,1,1,1)
S ^XPD(9.95,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",9.95,9.954,.01,1,1,2)
K ^XPD(9.95,DA(1),2,"B",$E(X,1,30),DA)
"^DD",9.95,9.954,.01,3)
Enter the name of a reporting group for statistics. [3-15 characters]
"^DD",9.95,9.954,.01,21,0)
^^1^1^3050721^
"^DD",9.95,9.954,.01,21,1,0)
Statistical reporting group name.
"^DD",9.95,9.954,.01,"DT")
3050721
"^DD",9.95,9.954,1,0)
NAME SPACE^9.9541^^1;0
"^DD",9.95,9.9541,0)
NAME SPACE SUB-FIELD^^.01^1
"^DD",9.95,9.9541,0,"DT")
3050721
"^DD",9.95,9.9541,0,"IX","B",9.9541,.01)

"^DD",9.95,9.9541,0,"NM","NAME SPACE")

"^DD",9.95,9.9541,0,"UP")
9.954
"^DD",9.95,9.9541,.01,0)
NAME SPACE^MFX^^0;1^K:$L(X)>4!($L(X)<2) X D:$D(X) PKGLOOK^XTPMKPCF
"^DD",9.95,9.9541,.01,1,0)
^.1
"^DD",9.95,9.9541,.01,1,1,0)
9.9541^B
"^DD",9.95,9.9541,.01,1,1,1)
S ^XPD(9.95,DA(2),2,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",9.95,9.9541,.01,1,1,2)
K ^XPD(9.95,DA(2),2,DA(1),1,"B",$E(X,1,30),DA)
"^DD",9.95,9.9541,.01,3)
Enter the name space to report.  This is cross-checked against the Package file (#9.4). [2-4 characters]
"^DD",9.95,9.9541,.01,"DT")
3050802
"^DIC",9.9,9.9,0)
PATCH MONITOR^9.9
"^DIC",9.9,9.9,0,"GL")
^XPD(9.9,
"^DIC",9.9,9.9,"%",0)
^1.005^^0
"^DIC",9.9,9.9,"%D",0)
^1.001^21^21^3050721^^
"^DIC",9.9,9.9,"%D",1,0)
This file contains VistA patch information which is stored by a server 
"^DIC",9.9,9.9,"%D",2,0)
option when a patch arrives to G.PATCHES at a site.  The server extracts 
"^DIC",9.9,9.9,"%D",3,0)
certain information and stores it here.
"^DIC",9.9,9.9,"%D",4,0)
 
"^DIC",9.9,9.9,"%D",5,0)
A night-time program will then check the file, match it against the 
"^DIC",9.9,9.9,"%D",6,0)
install file.  If the current date is past the compliance date for patch
"^DIC",9.9,9.9,"%D",7,0)
installation (typically 30 days for regular patches, three days for
"^DIC",9.9,9.9,"%D",8,0)
emergency patches) it will do one of two things:
"^DIC",9.9,9.9,"%D",9,0)
 
"^DIC",9.9,9.9,"%D",10,0)
        1.  If the patch has been installed since last run and the 
"^DIC",9.9,9.9,"%D",11,0)
parameter file is set in field 3 to delete installed patches, it will
"^DIC",9.9,9.9,"%D",12,0)
delete the entry from this file, regardless of the number of days in 
"^DIC",9.9,9.9,"%D",13,0)
field 2.  If the parameter file is set to leave patches, it is not 
"^DIC",9.9,9.9,"%D",14,0)
deleted.
"^DIC",9.9,9.9,"%D",15,0)
 
"^DIC",9.9,9.9,"%D",16,0)
        2.  If the patch has NOT been installed, its information will be 
"^DIC",9.9,9.9,"%D",17,0)
saved and reported via a mail message to a group.
"^DIC",9.9,9.9,"%D",18,0)
 
"^DIC",9.9,9.9,"%D",19,0)
The person(s) who are in charge of monitoring patches at the site or
"^DIC",9.9,9.9,"%D",20,0)
perhaps for the VISN will be responsible for following up on delinquent
"^DIC",9.9,9.9,"%D",21,0)
patches.
"^DIC",9.9,"B","PATCH MONITOR",9.9)

"^DIC",9.95,9.95,0)
PATCH MONITOR PARAMETER^9.95
"^DIC",9.95,9.95,0,"GL")
^XPD(9.95,
"^DIC",9.95,9.95,"%D",0)
^^19^19^3050721^
"^DIC",9.95,9.95,"%D",1,0)
This is the parameter file that controls certain functions of the Patch 
"^DIC",9.95,9.95,"%D",2,0)
Monitor software:
"^DIC",9.95,9.95,"%D",3,0)
 
"^DIC",9.95,9.95,"%D",4,0)
   .01          SITE NAME
"^DIC",9.95,9.95,"%D",5,0)
   1            MAIL GROUPS  (multiple)
"^DIC",9.95,9.95,"%D",6,0)
   2            NUMBER OF DAYS TO KEEP DATA
"^DIC",9.95,9.95,"%D",7,0)
   3            DELETE INSTALLED PATCHES?
"^DIC",9.95,9.95,"%D",8,0)
 
"^DIC",9.95,9.95,"%D",9,0)
Site name: Free text name of the facility.
"^DIC",9.95,9.95,"%D",10,0)
 
"^DIC",9.95,9.95,"%D",11,0)
Mail groups: groups that wish to receive the uninstalled bulletin.
"^DIC",9.95,9.95,"%D",12,0)
 
"^DIC",9.95,9.95,"%D",13,0)
Number of days to keep data: number of days to allow data to remain, 
"^DIC",9.95,9.95,"%D",14,0)
provided field 3 is answered NO.  If field 3 is answered YES, this field 
"^DIC",9.95,9.95,"%D",15,0)
is ignored.
"^DIC",9.95,9.95,"%D",16,0)
 
"^DIC",9.95,9.95,"%D",17,0)
Delete installed patches? - YES allows the nightly job to remove patches 
"^DIC",9.95,9.95,"%D",18,0)
shown as installed.  NO does not remove them.  If this field is answered 
"^DIC",9.95,9.95,"%D",19,0)
YES, field 2 is ignored.
"^DIC",9.95,"B","PATCH MONITOR PARAMETER",9.95)

"BLD",884,6)
^SEQ #78
**END**
**END**

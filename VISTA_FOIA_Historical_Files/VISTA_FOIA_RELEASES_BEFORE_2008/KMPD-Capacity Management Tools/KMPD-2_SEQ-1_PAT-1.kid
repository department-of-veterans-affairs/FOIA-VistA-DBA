Released KMPD*2*1 SEQ #1
Extracted from mail message
**KIDS**:KMPD*2.0*1^

**INSTALL NAME**
KMPD*2.0*1
"BLD",5457,0)
KMPD*2.0*1^CAPACITY MANAGEMENT TOOLS^0^3040422^y
"BLD",5457,1,0)
^^1^1^3040402^
"BLD",5457,1,1,0)
Patch KMPD*2.0*1 for Capacity Management Tools
"BLD",5457,4,0)
^9.64PA^8973^1
"BLD",5457,4,8973,0)
8973
"BLD",5457,4,8973,222)
y^y^f^^^^n
"BLD",5457,4,"B",8973,8973)

"BLD",5457,"ABPKG")
n
"BLD",5457,"INIT")
KMPDPOST
"BLD",5457,"KRN",0)
^9.67PA^8989.52^19
"BLD",5457,"KRN",.4,0)
.4
"BLD",5457,"KRN",.401,0)
.401
"BLD",5457,"KRN",.402,0)
.402
"BLD",5457,"KRN",.403,0)
.403
"BLD",5457,"KRN",.5,0)
.5
"BLD",5457,"KRN",.84,0)
.84
"BLD",5457,"KRN",3.6,0)
3.6
"BLD",5457,"KRN",3.8,0)
3.8
"BLD",5457,"KRN",9.2,0)
9.2
"BLD",5457,"KRN",9.8,0)
9.8
"BLD",5457,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",5457,"KRN",9.8,"NM",1,0)
KMPDPOST^^0^B1811914
"BLD",5457,"KRN",9.8,"NM",2,0)
KMPDTM^^0^B21631702
"BLD",5457,"KRN",9.8,"NM",3,0)
KMPDUTL^^0^B9901200
"BLD",5457,"KRN",9.8,"NM",4,0)
KMPDSSA^^0^B53432017
"BLD",5457,"KRN",9.8,"NM","B","KMPDPOST",1)

"BLD",5457,"KRN",9.8,"NM","B","KMPDSSA",4)

"BLD",5457,"KRN",9.8,"NM","B","KMPDTM",2)

"BLD",5457,"KRN",9.8,"NM","B","KMPDUTL",3)

"BLD",5457,"KRN",19,0)
19
"BLD",5457,"KRN",19,"NM",0)
^9.68A^^0
"BLD",5457,"KRN",19.1,0)
19.1
"BLD",5457,"KRN",101,0)
101
"BLD",5457,"KRN",409.61,0)
409.61
"BLD",5457,"KRN",771,0)
771
"BLD",5457,"KRN",870,0)
870
"BLD",5457,"KRN",8989.51,0)
8989.51
"BLD",5457,"KRN",8989.52,0)
8989.52
"BLD",5457,"KRN",8994,0)
8994
"BLD",5457,"KRN","B",.4,.4)

"BLD",5457,"KRN","B",.401,.401)

"BLD",5457,"KRN","B",.402,.402)

"BLD",5457,"KRN","B",.403,.403)

"BLD",5457,"KRN","B",.5,.5)

"BLD",5457,"KRN","B",.84,.84)

"BLD",5457,"KRN","B",3.6,3.6)

"BLD",5457,"KRN","B",3.8,3.8)

"BLD",5457,"KRN","B",9.2,9.2)

"BLD",5457,"KRN","B",9.8,9.8)

"BLD",5457,"KRN","B",19,19)

"BLD",5457,"KRN","B",19.1,19.1)

"BLD",5457,"KRN","B",101,101)

"BLD",5457,"KRN","B",409.61,409.61)

"BLD",5457,"KRN","B",771,771)

"BLD",5457,"KRN","B",870,870)

"BLD",5457,"KRN","B",8989.51,8989.51)

"BLD",5457,"KRN","B",8989.52,8989.52)

"BLD",5457,"KRN","B",8994,8994)

"BLD",5457,"PRE")
KMPDENV
"BLD",5457,"QUES",0)
^9.62^^
"BLD",5457,"REQB",0)
^9.611^^0
"FIA",8973)
CP PARAMETERS
"FIA",8973,0)
^KMPD(8973,
"FIA",8973,0,0)
8973P
"FIA",8973,0,1)
y^y^f^^^^n
"FIA",8973,0,10)

"FIA",8973,0,11)

"FIA",8973,0,"RLRO")

"FIA",8973,0,"VR")
2.0^KMPD
"FIA",8973,8973)
0
"FIA",8973,8973.201)
0
"INIT")
KMPDPOST
"MBREQ")
0
"PKG",556,-1)
1^1
"PKG",556,0)
CAPACITY MANAGEMENT TOOLS^KMPD^Capacity Management Tools
"PKG",556,22,0)
^9.49I^1^1
"PKG",556,22,1,0)
2.0^3040331^3040315^10292
"PKG",556,22,1,"PAH",1,0)
1^3040422^10292
"PKG",556,22,1,"PAH",1,1,0)
^^1^1^3040422
"PKG",556,22,1,"PAH",1,1,1,0)
Patch KMPD*2.0*1 for Capacity Management Tools
"PRE")
KMPDENV
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
5
"RTN","KMPDENV")
0^^B706424
"RTN","KMPDENV",1,0)
KMPDENV ;OAK/RAK - CM Tools Environmnet Check ;4/21/04
"RTN","KMPDENV",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;**1**;Mar 22, 2002
"RTN","KMPDENV",3,0)
 ;
"RTN","KMPDENV",4,0)
EN ;-entry point
"RTN","KMPDENV",5,0)
 ; if version 2.0
"RTN","KMPDENV",6,0)
 I $P($$VERSION^KMPDUTL,U)="2.0" D  Q
"RTN","KMPDENV",7,0)
 .D MES^XPDUTL("     Version 2.0 detected. Environment check successful!")
"RTN","KMPDENV",8,0)
 ; if not version 2.0
"RTN","KMPDENV",9,0)
 S XPDQUIT=1
"RTN","KMPDENV",10,0)
 D MES^XPDUTL("     Must have Version 2.0 installed.  Install can not continue!")
"RTN","KMPDENV",11,0)
 Q
"RTN","KMPDPOST")
0^1^B1811914
"RTN","KMPDPOST",1,0)
KMPDPOST ;OAK/RAK - CM Tools Post Install ;4/2/04  08:55
"RTN","KMPDPOST",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;**1**;Mar 22, 2002
"RTN","KMPDPOST",3,0)
 ;
"RTN","KMPDPOST",4,0)
EN ;-entry point
"RTN","KMPDPOST",5,0)
 D SITE,PKG
"RTN","KMPDPOST",6,0)
 D MES^XPDUTL("     Complete!")
"RTN","KMPDPOST",7,0)
 Q
"RTN","KMPDPOST",8,0)
 ;
"RTN","KMPDPOST",9,0)
SITE ;-- check site number
"RTN","KMPDPOST",10,0)
 N ERROR,FDA,IEN,SITE,SITE2
"RTN","KMPDPOST",11,0)
 D MES^XPDUTL("     Checking Site Number in file #8973 - CP PARAMETERS...")
"RTN","KMPDPOST",12,0)
 S SITE=+$$SITE^VASITE,SITE2=$P($G(^KMPD(8973,1,0)),U)
"RTN","KMPDPOST",13,0)
 Q:SITE=SITE2
"RTN","KMPDPOST",14,0)
 S FDA($J,8973,"1,",.01)=+SITE
"RTN","KMPDPOST",15,0)
 D FILE^DIE("","FDA($J)","ERROR")
"RTN","KMPDPOST",16,0)
 ; if error abort install
"RTN","KMPDPOST",17,0)
 I $D(ERROR) D MSG^DIALOG("W","",60,10,"ERROR")
"RTN","KMPDPOST",18,0)
 Q
"RTN","KMPDPOST",19,0)
 ;
"RTN","KMPDPOST",20,0)
PKG ;-- check for correct package name
"RTN","KMPDPOST",21,0)
 N ERROR,FDA,IEN
"RTN","KMPDPOST",22,0)
 D MES^XPDUTL("     Checking for 'CAPACITY MANAGEMENT TOOLS' in PACKAGE file...")
"RTN","KMPDPOST",23,0)
 ; quit if correct package name
"RTN","KMPDPOST",24,0)
 Q:$O(^DIC(9.4,"B","CAPACITY MANAGEMENT TOOLS",0))
"RTN","KMPDPOST",25,0)
 S IEN=$O(^DIC(9.4,"B","CM TOOLS",0)) Q:'IEN
"RTN","KMPDPOST",26,0)
 S FDA($J,9.4,IEN_",",.01)="CAPACITY MANAGEMENT TOOLS"
"RTN","KMPDPOST",27,0)
 D FILE^DIE("","FDA($J)","ERROR")
"RTN","KMPDPOST",28,0)
 ; if error abort install
"RTN","KMPDPOST",29,0)
 I $D(ERROR) D MSG^DIALOG("W","",60,10,"ERROR")
"RTN","KMPDPOST",30,0)
 Q
"RTN","KMPDSSA")
0^4^B53432017
"RTN","KMPDSSA",1,0)
KMPDSSA ;OAK/RAK - CM Tools Status ;4/2/04  09:18
"RTN","KMPDSSA",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;**1**;Mar 22, 2002
"RTN","KMPDSSA",3,0)
 ;
"RTN","KMPDSSA",4,0)
DISPLAY ;-display environment data
"RTN","KMPDSSA",5,0)
 ;
"RTN","KMPDSSA",6,0)
 N HDR,HDR2,TMP
"RTN","KMPDSSA",7,0)
 ;
"RTN","KMPDSSA",8,0)
 D FORMAT
"RTN","KMPDSSA",9,0)
 D HDR^KMPDUTL4(HDR,HDR2)
"RTN","KMPDSSA",10,0)
 D DISPLAY^KMPDUT5("TMP(",4)
"RTN","KMPDSSA",11,0)
 ;
"RTN","KMPDSSA",12,0)
 Q
"RTN","KMPDSSA",13,0)
 ;
"RTN","KMPDSSA",14,0)
FORMAT ;-format text for dislay
"RTN","KMPDSSA",15,0)
 ;
"RTN","KMPDSSA",16,0)
 N LN,VERSION S LN=0 K TMP
"RTN","KMPDSSA",17,0)
 ;
"RTN","KMPDSSA",18,0)
 ; if no kmpdutl routine
"RTN","KMPDSSA",19,0)
 S X="KMPDUTL" X ^%ZOSF("TEST") I '$T D  Q
"RTN","KMPDSSA",20,0)
 .D SET(.LN,"The CM Tools Package is not installed!")
"RTN","KMPDSSA",21,0)
 ;
"RTN","KMPDSSA",22,0)
 W !," formatting..."
"RTN","KMPDSSA",23,0)
 ; version data
"RTN","KMPDSSA",24,0)
 S VERSION=$$VERSION^KMPDUTL
"RTN","KMPDSSA",25,0)
 ; header text
"RTN","KMPDSSA",26,0)
 S HDR="CM Tools v"_$P(VERSION,U)
"RTN","KMPDSSA",27,0)
 ; patches
"RTN","KMPDSSA",28,0)
 S HDR2=$P(VERSION,U,2)
"RTN","KMPDSSA",29,0)
 W "."
"RTN","KMPDSSA",30,0)
 ; option data
"RTN","KMPDSSA",31,0)
 D OPT
"RTN","KMPDSSA",32,0)
 W "."
"RTN","KMPDSSA",33,0)
 ; bacground data
"RTN","KMPDSSA",34,0)
 D BKGRND
"RTN","KMPDSSA",35,0)
 W "."
"RTN","KMPDSSA",36,0)
 ; file data
"RTN","KMPDSSA",37,0)
 D FILES
"RTN","KMPDSSA",38,0)
 W "."
"RTN","KMPDSSA",39,0)
 ; routine version check
"RTN","KMPDSSA",40,0)
 D ROUCHK("D")
"RTN","KMPDSSA",41,0)
 W "."
"RTN","KMPDSSA",42,0)
 ; node/cpu data
"RTN","KMPDSSA",43,0)
 D CPU
"RTN","KMPDSSA",44,0)
 W "."
"RTN","KMPDSSA",45,0)
 ; legend
"RTN","KMPDSSA",46,0)
 D LEGEND
"RTN","KMPDSSA",47,0)
 ;
"RTN","KMPDSSA",48,0)
 Q
"RTN","KMPDSSA",49,0)
 ;
"RTN","KMPDSSA",50,0)
OPT ;-- option data
"RTN","KMPDSSA",51,0)
 ;
"RTN","KMPDSSA",52,0)
 N DIR,KMPDX,KMPDX1,TEXT,X,Y
"RTN","KMPDSSA",53,0)
 ;
"RTN","KMPDSSA",54,0)
 ; if background option is missing
"RTN","KMPDSSA",55,0)
 I '$O(^DIC(19,"B","KMPD BACKGROUND DRIVER",0)) D 
"RTN","KMPDSSA",56,0)
 .D SET(.LN,"   The 'CM Tools Background Driver' option [KMPD BACKGROUND DRIVER] is missing!")
"RTN","KMPDSSA",57,0)
 ; background option is present
"RTN","KMPDSSA",58,0)
 E  D 
"RTN","KMPDSSA",59,0)
 .S KMPDX=+$O(^DIC(19,"B","KMPD BACKGROUND DRIVER",0))
"RTN","KMPDSSA",60,0)
 .S KMPDX=+$O(^DIC(19.2,"B",KMPDX,0))
"RTN","KMPDSSA",61,0)
 .; if not scheduled or no task id
"RTN","KMPDSSA",62,0)
 .I 'KMPDX!('$G(^DIC(19.2,+KMPDX,1))) D  Q:'Y
"RTN","KMPDSSA",63,0)
 ..K DIR S DIR(0)="YO",DIR("B")="YES"
"RTN","KMPDSSA",64,0)
 ..S DIR("A")="Do you want to queue this option to run each night at 1:30am"
"RTN","KMPDSSA",65,0)
 ..W ! D ^DIR I 'Y D  Q
"RTN","KMPDSSA",66,0)
 ...D SET(.LN,"   The 'CM Tools Background Driver' [KMPD BACKGROUND DRIVER] is not scheduled")
"RTN","KMPDSSA",67,0)
 ...D SET(.LN,"   to run!"),SET(.LN,"")
"RTN","KMPDSSA",68,0)
 ..D QUEBKG^KMPDUTL("KMPD BACKGROUND DRIVER","T+1@0130","1D",0)
"RTN","KMPDSSA",69,0)
 .S KMPDX=+$O(^DIC(19,"B","KMPD BACKGROUND DRIVER",0))
"RTN","KMPDSSA",70,0)
 .S KMPDX=+$O(^DIC(19.2,"B",KMPDX,0))
"RTN","KMPDSSA",71,0)
 .S KMPDX=$G(^DIC(19.2,KMPDX,0)),KMPDX1=$G(^(1))
"RTN","KMPDSSA",72,0)
 .S $P(KMPDX,U,2)=$$FMTE^XLFDT($P(KMPDX,U,2))
"RTN","KMPDSSA",73,0)
 .D SET(.LN,"   CM Tools Background Driver..: KMPD BACKGROUND DRIVER")
"RTN","KMPDSSA",74,0)
 .D SET(.LN,"   QUEUED TO RUN AT............: "_$P(KMPDX,U,2))
"RTN","KMPDSSA",75,0)
 .D SET(.LN,"   RESCHEDULING FREQUENCY......: "_$P(KMPDX,U,6))
"RTN","KMPDSSA",76,0)
 .D SET(.LN,"   TASK ID.....................: "_+KMPDX1)
"RTN","KMPDSSA",77,0)
 .; user info.
"RTN","KMPDSSA",78,0)
 .S KMPDX1=$G(^%ZTSK(+KMPDX1,0))
"RTN","KMPDSSA",79,0)
 .S TEXT="   QUEUED BY...................: "_$P($G(^VA(200,+$P(KMPDX1,U,3),0)),U)
"RTN","KMPDSSA",80,0)
 .; if user
"RTN","KMPDSSA",81,0)
 .I (+$P(KMPDX1,U,3)) D 
"RTN","KMPDSSA",82,0)
 ..; user 'active' or 'terminated'
"RTN","KMPDSSA",83,0)
 ..S KMPDX1=$$ACTIVE^XUSER(+$P(KMPDX1,U,3))
"RTN","KMPDSSA",84,0)
 ..S TEXT=TEXT_"  ("_$S($P(KMPDX1,U,2)["TERMINATED":"Terminated - "_$$FMTE^XLFDT($P(KMPDX1,U,3),2),1:"Active")_")"
"RTN","KMPDSSA",85,0)
 .D SET(.LN,TEXT)
"RTN","KMPDSSA",86,0)
 ;
"RTN","KMPDSSA",87,0)
 Q
"RTN","KMPDSSA",88,0)
 ;
"RTN","KMPDSSA",89,0)
BKGRND ; hl7 background info
"RTN","KMPDSSA",90,0)
 ;
"RTN","KMPDSSA",91,0)
 N DATA,DELTA,ENDT,STAT,STDT
"RTN","KMPDSSA",92,0)
 ;
"RTN","KMPDSSA",93,0)
 D PARAMS^KMPDUT("DATA") Q:'$D(DATA)
"RTN","KMPDSSA",94,0)
 S DATA(3)=$G(DATA(3)),DATA(4)=$G(DATA(4))
"RTN","KMPDSSA",95,0)
 S STDT=$P(DATA(3),U,5),ENDT=$P(DATA(3),U,6),DELTA=$P(DATA(3),U,7)
"RTN","KMPDSSA",96,0)
 S:$E(DELTA)=" " $E(DELTA)="0"
"RTN","KMPDSSA",97,0)
 D SET(.LN,"")
"RTN","KMPDSSA",98,0)
 D SET(.LN,"   Hl7 Dly Bckgrnd Last Start..: "_$$FMTE^XLFDT(STDT))
"RTN","KMPDSSA",99,0)
 D SET(.LN,"   HL7 Dly Bckgrnd Last Stop...: "_$$FMTE^XLFDT(ENDT))
"RTN","KMPDSSA",100,0)
 D SET(.LN,"   HL7 Dly Bkgrnd Total Time...: "_DELTA)
"RTN","KMPDSSA",101,0)
 S STDT=$P(DATA(3),U,8),ENDT=$P(DATA(3),U,9),DELTA=$P(DATA(3),U,10)
"RTN","KMPDSSA",102,0)
 S:$E(DELTA)=" " $E(DELTA)="0"
"RTN","KMPDSSA",103,0)
 D SET(.LN,"   HL7 Wkly Backgrnd Last Start: "_$$FMTE^XLFDT(STDT))
"RTN","KMPDSSA",104,0)
 D SET(.LN,"   HL7 Wkly Bckgrnd Last Stop..: "_$$FMTE^XLFDT(ENDT))
"RTN","KMPDSSA",105,0)
 D SET(.LN,"   HL7 Wkly Bckgrnd Total Time.: "_DELTA)
"RTN","KMPDSSA",106,0)
 D SET(.LN,"   HL7 Purge Data After........: "_$P(DATA(3),U,11)_" weeks")
"RTN","KMPDSSA",107,0)
 D SET(.LN,"")
"RTN","KMPDSSA",108,0)
 ; timing background info - if available
"RTN","KMPDSSA",109,0)
 I $D(DATA(4)) D 
"RTN","KMPDSSA",110,0)
 .S STAT=$G(^KMPTMP("KMPD-CPRS"))
"RTN","KMPDSSA",111,0)
 .D SET(.LN,"   TMG Collection Status.......: "_$S(STAT:"Running",1:"STOPPED!"))
"RTN","KMPDSSA",112,0)
 .S STDT=$P(DATA(4),U,5),ENDT=$P(DATA(4),U,6),DELTA=$P(DATA(4),U,7)
"RTN","KMPDSSA",113,0)
 .S:$E(DELTA)=" " $E(DELTA)="0"
"RTN","KMPDSSA",114,0)
 .D SET(.LN,"   TMG Dly Bckgrnd Last Start..: "_$$FMTE^XLFDT(STDT))
"RTN","KMPDSSA",115,0)
 .D SET(.LN,"   TMG Dly Bckgrnd Last Stop...: "_$$FMTE^XLFDT(ENDT))
"RTN","KMPDSSA",116,0)
 .D SET(.LN,"   TMG Dly Bkgrnd Total Time...: "_DELTA)
"RTN","KMPDSSA",117,0)
 .S STDT=$P(DATA(4),U,8),ENDT=$P(DATA(4),U,9),DELTA=$P(DATA(4),U,10)
"RTN","KMPDSSA",118,0)
 .S:$E(DELTA)=" " $E(DELTA)="0"
"RTN","KMPDSSA",119,0)
 .D SET(.LN,"   TMG Wkly Backgrnd Last Start: "_$$FMTE^XLFDT(STDT))
"RTN","KMPDSSA",120,0)
 .D SET(.LN,"   TMG Wkly Bckgrnd Last Stop..: "_$$FMTE^XLFDT(ENDT))
"RTN","KMPDSSA",121,0)
 .D SET(.LN,"   TMG Wkly Bckgrnd Total Time.: "_DELTA)
"RTN","KMPDSSA",122,0)
 .D SET(.LN,"   TMG Purge Data After........: "_$P(DATA(4),U,11)_" weeks")
"RTN","KMPDSSA",123,0)
 .D SET(.LN,"")
"RTN","KMPDSSA",124,0)
 ;
"RTN","KMPDSSA",125,0)
 Q
"RTN","KMPDSSA",126,0)
 ;
"RTN","KMPDSSA",127,0)
CPU ;-- cpu/node data
"RTN","KMPDSSA",128,0)
 ;
"RTN","KMPDSSA",129,0)
 N COUNT,DATA,I,LEN,TEXT
"RTN","KMPDSSA",130,0)
 ;
"RTN","KMPDSSA",131,0)
 D CPUGET^KMPDUTL6(.DATA)
"RTN","KMPDSSA",132,0)
 Q:'$D(DATA)
"RTN","KMPDSSA",133,0)
 D SET(.LN,"")
"RTN","KMPDSSA",134,0)
 S TEXT="   Node/CPU Data............: "
"RTN","KMPDSSA",135,0)
 S (COUNT,I,LEN)=0
"RTN","KMPDSSA",136,0)
 F  S I=$O(DATA(I)) Q:'I  D 
"RTN","KMPDSSA",137,0)
 .S COUNT=COUNT+1,DATA=$G(DATA(I,0)) Q:DATA=""
"RTN","KMPDSSA",138,0)
 .; length of node name
"RTN","KMPDSSA",139,0)
 .S:'LEN LEN=$L($P(DATA,U))+2
"RTN","KMPDSSA",140,0)
 .S TEXT=$S(COUNT=1:TEXT,1:$J(" ",30))_$P(DATA,U)
"RTN","KMPDSSA",141,0)
 .S TEXT=TEXT_$J(" ",30-$L(TEXT)+LEN)_$P(DATA,U,2)_" ("_$P(DATA,U,3)_")"
"RTN","KMPDSSA",142,0)
 .D SET(.LN,TEXT)
"RTN","KMPDSSA",143,0)
 ;
"RTN","KMPDSSA",144,0)
 Q
"RTN","KMPDSSA",145,0)
 ;
"RTN","KMPDSSA",146,0)
FILES ;-- file data
"RTN","KMPDSSA",147,0)
 ;
"RTN","KMPDSSA",148,0)
 N TEXT,X
"RTN","KMPDSSA",149,0)
 ;
"RTN","KMPDSSA",150,0)
 D SET(.LN,$J(" ",35)_" # of     Oldest     Recent")
"RTN","KMPDSSA",151,0)
 D SET(.LN,"   File"_$J(" ",28)_"Entries    Date       Date")
"RTN","KMPDSSA",152,0)
 D SET(.LN,"   -------------------------       -------   -------   -------")
"RTN","KMPDSSA",153,0)
 ; cm hl7 data
"RTN","KMPDSSA",154,0)
 ; file name
"RTN","KMPDSSA",155,0)
 S TEXT="   8973.1 - "_$P($G(^DIC(8973.1,0)),U)
"RTN","KMPDSSA",156,0)
 ; number of entries
"RTN","KMPDSSA",157,0)
 S TEXT=TEXT_$J(" ",35-$L(TEXT))_$J($FN($P($G(^KMPD(8973.1,0)),U,4),",",0),7)
"RTN","KMPDSSA",158,0)
 ; oldest date
"RTN","KMPDSSA",159,0)
 S X=$$FMTE^XLFDT(+$O(^KMPD(8973.1,"B",0)),2)
"RTN","KMPDSSA",160,0)
 S X=$S(X=0:"---",1:X)
"RTN","KMPDSSA",161,0)
 S TEXT=TEXT_$J(" ",45-$L(TEXT))_X
"RTN","KMPDSSA",162,0)
 ; current date
"RTN","KMPDSSA",163,0)
 S X=$$FMTE^XLFDT(+$O(^KMPD(8973.1,"B","A"),-1),2)
"RTN","KMPDSSA",164,0)
 S X=$S(X=0:"---",1:X)
"RTN","KMPDSSA",165,0)
 S TEXT=TEXT_$J(" ",55-$L(TEXT))_X
"RTN","KMPDSSA",166,0)
 D SET(.LN,TEXT)
"RTN","KMPDSSA",167,0)
 ;
"RTN","KMPDSSA",168,0)
 ; cm timing data - if available
"RTN","KMPDSSA",169,0)
 I $D(^KMPD(8973.2,0)) D 
"RTN","KMPDSSA",170,0)
 .; file name
"RTN","KMPDSSA",171,0)
 .S TEXT="   8973.2 - "_$P($G(^DIC(8973.2,0)),U)
"RTN","KMPDSSA",172,0)
 .; number of entries
"RTN","KMPDSSA",173,0)
 .S TEXT=TEXT_$J(" ",35-$L(TEXT))_$J($FN($P($G(^KMPD(8973.2,0)),U,4),",",0),7)
"RTN","KMPDSSA",174,0)
 .; oldest date
"RTN","KMPDSSA",175,0)
 .S X=$$FMTE^XLFDT($P(+$O(^KMPD(8973.2,"ASTDTTM",0)),"."),2)
"RTN","KMPDSSA",176,0)
 .S X=$S(X=0:"---",1:X)
"RTN","KMPDSSA",177,0)
 .S TEXT=TEXT_$J(" ",45-$L(TEXT))_X
"RTN","KMPDSSA",178,0)
 .; most recent date
"RTN","KMPDSSA",179,0)
 .S X=$$FMTE^XLFDT($P(+$O(^KMPD(8973.2,"ASTDTTM","A"),-1),"."),2)
"RTN","KMPDSSA",180,0)
 .S X=$S(X=0:"---",1:X)
"RTN","KMPDSSA",181,0)
 .S TEXT=TEXT_$J(" ",55-$L(TEXT))_X
"RTN","KMPDSSA",182,0)
 .D SET(.LN,TEXT)
"RTN","KMPDSSA",183,0)
 ;
"RTN","KMPDSSA",184,0)
 Q
"RTN","KMPDSSA",185,0)
 ;
"RTN","KMPDSSA",186,0)
LEGEND ;-- display legend
"RTN","KMPDSSA",187,0)
 ;
"RTN","KMPDSSA",188,0)
 D SET(.LN,""),SET(.LN,"")
"RTN","KMPDSSA",189,0)
 D SET(.LN,"     HL7 = Health Level Seven")
"RTN","KMPDSSA",190,0)
 D SET(.LN,"     TMG = Timing Data")
"RTN","KMPDSSA",191,0)
 ;
"RTN","KMPDSSA",192,0)
 Q
"RTN","KMPDSSA",193,0)
 ;
"RTN","KMPDSSA",194,0)
ROUCHK(KMPDPKG) ;--display routine version info
"RTN","KMPDSSA",195,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSSA",196,0)
 ; KMPDPKG... CM Package:
"RTN","KMPDSSA",197,0)
 ;            "D" - CM Tools
"RTN","KMPDSSA",198,0)
 ;            "R" - RUM
"RTN","KMPDSSA",199,0)
 ;            "S" - SAGG
"RTN","KMPDSSA",200,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSSA",201,0)
 ;
"RTN","KMPDSSA",202,0)
 Q:$G(KMPDPKG)=""
"RTN","KMPDSSA",203,0)
 Q:KMPDPKG'="D"&(KMPDPKG'="R")&(KMPDPKG'="S")
"RTN","KMPDSSA",204,0)
 ;
"RTN","KMPDSSA",205,0)
 N I,TEXT,X
"RTN","KMPDSSA",206,0)
 ;
"RTN","KMPDSSA",207,0)
 ; routine check
"RTN","KMPDSSA",208,0)
 D VERPTCH^KMPDUTL1(KMPDPKG,.X)
"RTN","KMPDSSA",209,0)
 D SET(.LN,"")
"RTN","KMPDSSA",210,0)
 D SET(.LN,"")
"RTN","KMPDSSA",211,0)
 S TEXT="   "_$S(KMPDPKG="D":"CM TOOLS",KMPDPKG="R":"RUM",1:"SAGG")_" routines"
"RTN","KMPDSSA",212,0)
 S TEXT=TEXT_$$REPEAT^XLFSTR(".",28-$L(TEXT))_": "
"RTN","KMPDSSA",213,0)
 I '$P($G(X(0)),U,3) D SET(.LN,TEXT_+X(0)_" Routines - No Problems") Q
"RTN","KMPDSSA",214,0)
 D SET(.LN,TEXT)
"RTN","KMPDSSA",215,0)
 D SET(.LN,$J(" ",20)_"Current Version"_$J(" ",20)_"Should be")
"RTN","KMPDSSA",216,0)
 S I=0 F  S I=$O(X(I)) Q:I=""  I $P(X(I),U) D 
"RTN","KMPDSSA",217,0)
 .S TEXT="   "_I
"RTN","KMPDSSA",218,0)
 .S TEXT=TEXT_$J(" ",20-$L(TEXT))_$P(X(I),U,4)
"RTN","KMPDSSA",219,0)
 .S:$P(X(I),U,5)]"" TEXT=TEXT_" - "_$P(X(I),U,5)
"RTN","KMPDSSA",220,0)
 .S TEXT=TEXT_$J(" ",55-$L(TEXT))_$P(X(I),U,2)
"RTN","KMPDSSA",221,0)
 .S:$P(X(I),U,3)]"" TEXT=TEXT_" - "_$P(X(I),U,3)
"RTN","KMPDSSA",222,0)
 .D SET(.LN,TEXT)
"RTN","KMPDSSA",223,0)
 ;
"RTN","KMPDSSA",224,0)
 Q
"RTN","KMPDSSA",225,0)
 ;
"RTN","KMPDSSA",226,0)
SET(KMPDLN,KMPDATA) ;-set data into tmp( array
"RTN","KMPDSSA",227,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSSA",228,0)
 ; KMPDLN.... Line number (passed by reference) to be incremented by 1
"RTN","KMPDSSA",229,0)
 ; KMPDATA... Free text data to be stored
"RTN","KMPDSSA",230,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSSA",231,0)
 ;
"RTN","KMPDSSA",232,0)
 S KMPDLN=$G(KMPDLN)+1,TMP(KMPDLN,0)=$G(KMPDATA)
"RTN","KMPDSSA",233,0)
 ;
"RTN","KMPDSSA",234,0)
 Q
"RTN","KMPDTM")
0^2^B21631702
"RTN","KMPDTM",1,0)
KMPDTM ;OAK/RAK - CM Tools Timing Monitor ;4/2/04  08:54
"RTN","KMPDTM",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;**1**;Mar 22, 2002
"RTN","KMPDTM",3,0)
 ;
"RTN","KMPDTM",4,0)
EN ;-- entry point
"RTN","KMPDTM",5,0)
 ;
"RTN","KMPDTM",6,0)
 N DIR,X,Y
"RTN","KMPDTM",7,0)
 ;
"RTN","KMPDTM",8,0)
 D HDR^KMPDUTL4(" Timing Data Monitor ")
"RTN","KMPDTM",9,0)
 ;
"RTN","KMPDTM",10,0)
 ; if no data
"RTN","KMPDTM",11,0)
 I $O(^KMPTMP("KMPDT","ORWCV",""))="" D  Q
"RTN","KMPDTM",12,0)
 .W !!?7,"*** There is currently no data in global ^KMPTMP(""KMPDT"",""ORWCV"") ***"
"RTN","KMPDTM",13,0)
 ;
"RTN","KMPDTM",14,0)
 W !
"RTN","KMPDTM",15,0)
 W !?7,"This option displays CPRS Coversheet time-to-load data, as a"
"RTN","KMPDTM",16,0)
 W !?7,"bar graph, for the current day.  This option can be left"
"RTN","KMPDTM",17,0)
 W !?7,"running on a terminal (if desired).  The monitor is updated"
"RTN","KMPDTM",18,0)
 W !?7,"every 10 minutes (site configurable through the [KMPD PARAM"
"RTN","KMPDTM",19,0)
 W !?7,"EDIT] Edit CP Parameters File option), and displays current"
"RTN","KMPDTM",20,0)
 W !?7,"average time-to-load data starting at midnight.  An alarm"
"RTN","KMPDTM",21,0)
 W !?7,"message is displayed if the average time-to-load exceeds 30"
"RTN","KMPDTM",22,0)
 W !?7,"seconds (site configurable through the [KMPD PARAM EDIT] Edit"
"RTN","KMPDTM",23,0)
 W !?7,"CP Parameters File option)."
"RTN","KMPDTM",24,0)
 W !
"RTN","KMPDTM",25,0)
 S DIR(0)="YO",DIR("A")="Continue",DIR("B")="YES"
"RTN","KMPDTM",26,0)
 W ! D ^DIR Q:Y'=1
"RTN","KMPDTM",27,0)
 ;
"RTN","KMPDTM",28,0)
 ;
"RTN","KMPDTM",29,0)
 W !!,"Compiling timing stats..."
"RTN","KMPDTM",30,0)
 D EN1
"RTN","KMPDTM",31,0)
 ;
"RTN","KMPDTM",32,0)
 Q
"RTN","KMPDTM",33,0)
 ;
"RTN","KMPDTM",34,0)
EN1 ;-- main loop
"RTN","KMPDTM",35,0)
 ;
"RTN","KMPDTM",36,0)
 N KMPUALRT,KMPUTIME,KMPUTMP,OUT
"RTN","KMPDTM",37,0)
 ;
"RTN","KMPDTM",38,0)
 S KMPUALRT=0,KMPUTIME=$$NOW^XLFDT
"RTN","KMPDTM",39,0)
 S OUT=0
"RTN","KMPDTM",40,0)
 F  D  Q:OUT
"RTN","KMPDTM",41,0)
 .D DATA
"RTN","KMPDTM",42,0)
 .D GRAPH
"RTN","KMPDTM",43,0)
 .S OUT=$$FTR Q:OUT
"RTN","KMPDTM",44,0)
 .D EXIT
"RTN","KMPDTM",45,0)
 Q
"RTN","KMPDTM",46,0)
 ;
"RTN","KMPDTM",47,0)
DATA ;-- compile data
"RTN","KMPDTM",48,0)
 ;
"RTN","KMPDTM",49,0)
 N DATA,DATA1,DATE,DELTA,DOT,HOURS,HR,I
"RTN","KMPDTM",50,0)
 ;
"RTN","KMPDTM",51,0)
 K KMPUTMP
"RTN","KMPDTM",52,0)
 S DOT=1,DATE=$$DT^XLFDT
"RTN","KMPDTM",53,0)
 ; array with hours
"RTN","KMPDTM",54,0)
 S HOURS=$$RLTMHR^KMPDTU11(1,0) Q:HOURS=""
"RTN","KMPDTM",55,0)
 F HR=1:1 Q:$P(HOURS,",",HR)=""  S KMPUTMP(HR,0)=""
"RTN","KMPDTM",56,0)
 S I=""
"RTN","KMPDTM",57,0)
 F  S I=$O(^KMPTMP("KMPDT","ORWCV",I)) Q:I=""  S DATA=^(I) I DATA]"" D 
"RTN","KMPDTM",58,0)
 .S DOT=DOT+1 W:('(DOT#1000)) "."
"RTN","KMPDTM",59,0)
 .; start/end date/time in fileman format
"RTN","KMPDTM",60,0)
 .S DATE(1)=$$HTFM^XLFDT($P(DATA,U)),DATE(2)=$$HTFM^XLFDT($P(DATA,U,2))
"RTN","KMPDTM",61,0)
 .Q:'DATE(1)!('DATE(2))
"RTN","KMPDTM",62,0)
 .S DELTA=$$FMDIFF^XLFDT(DATE(2),DATE(1),2)
"RTN","KMPDTM",63,0)
 .S:DELTA<0 DELTA=""
"RTN","KMPDTM",64,0)
 .; determine hour
"RTN","KMPDTM",65,0)
 .S HR=+$E($P(DATE(1),".",2),1,2) Q:HR=""  ;HR="0"
"RTN","KMPDTM",66,0)
 .;Q:'HR
"RTN","KMPDTM",67,0)
 .; quit if not in HOUR() array
"RTN","KMPDTM",68,0)
 .;Q:'$D(HOUR(HR))
"RTN","KMPDTM",69,0)
 .S DATA1="^^^"_DELTA_"^"_$P(DATA,U,3)_"^"_$P(DATA,U,4)_"^^^"_$P($P(I," ",2),"-")
"RTN","KMPDTM",70,0)
 .;
"RTN","KMPDTM",71,0)
 .; quit if no delta
"RTN","KMPDTM",72,0)
 .Q:$P(DATA1,U,4)=""
"RTN","KMPDTM",73,0)
 .; hour
"RTN","KMPDTM",74,0)
 .S $P(KMPUTMP(HR,0),U)=HR
"RTN","KMPDTM",75,0)
 .; total delta
"RTN","KMPDTM",76,0)
 .S $P(KMPUTMP(HR,0),U,2)=$P(KMPUTMP(HR,0),U,2)+$P(DATA1,U,4)
"RTN","KMPDTM",77,0)
 .; count
"RTN","KMPDTM",78,0)
 .S $P(KMPUTMP(HR,0),U,3)=$P(KMPUTMP(HR,0),U,3)+1
"RTN","KMPDTM",79,0)
 ;
"RTN","KMPDTM",80,0)
 ; average
"RTN","KMPDTM",81,0)
 F HR=1:1 S I=$P(HOURS,",",HR) Q:I=""  I $P($G(KMPUTMP(I,0)),U,2) D 
"RTN","KMPDTM",82,0)
 .S $P(KMPUTMP(I,0),U,2)=$FN($P(KMPUTMP(I,0),U,2)/$P(KMPUTMP(I,0),U,3),"",1)
"RTN","KMPDTM",83,0)
 ;
"RTN","KMPDTM",84,0)
 Q
"RTN","KMPDTM",85,0)
 ;
"RTN","KMPDTM",86,0)
FTR() ;-- extrinsic function - footer
"RTN","KMPDTM",87,0)
 N OUT,PROMPT,UTIME,X
"RTN","KMPDTM",88,0)
 ; update time - how often graph will refress itself
"RTN","KMPDTM",89,0)
 S UTIME=$P($G(^KMPD(8973,1,19)),U)
"RTN","KMPDTM",90,0)
 ; value is in minutes and is converted to seconds for timed read
"RTN","KMPDTM",91,0)
 S UTIME=$S(UTIME:UTIME,1:10)*60
"RTN","KMPDTM",92,0)
 S PROMPT="[Q]uit, [U]pdate: "
"RTN","KMPDTM",93,0)
 S OUT=0
"RTN","KMPDTM",94,0)
 F  D  Q:OUT
"RTN","KMPDTM",95,0)
 .S DX=(IOM-$L(PROMPT)\2),DY=(IOSL-1) X IOXY
"RTN","KMPDTM",96,0)
 .W PROMPT R X:UTIME
"RTN","KMPDTM",97,0)
 .S X=$$UP^XLFSTR(X)
"RTN","KMPDTM",98,0)
 .I X="Q"!(X="^")!(X="U")!('$T) S OUT=1
"RTN","KMPDTM",99,0)
 .E  W $C(7) S DY=(IOSL-1) F DX=1:1:IOM W " " X IOXY
"RTN","KMPDTM",100,0)
 W $S(X="Q":"uit",X="^":"Quit",X="U":"pdate",1:"Update")
"RTN","KMPDTM",101,0)
 Q $S(X="Q"!(X="^"):1,1:0)
"RTN","KMPDTM",102,0)
 ;
"RTN","KMPDTM",103,0)
GRAPH ;-- display graph
"RTN","KMPDTM",104,0)
 Q:'$D(KMPUTMP)
"RTN","KMPDTM",105,0)
 N ALERT,DATA,LOADTM,NOW,TITLE,TXT,UPDATE
"RTN","KMPDTM",106,0)
 ; alert time in seconds - if average time-to-load is not less than this
"RTN","KMPDTM",107,0)
 ;                         value an alert will appear on screen
"RTN","KMPDTM",108,0)
 S NOW=$$NOW^XLFDT
"RTN","KMPDTM",109,0)
 S DATA=$G(^KMPD(8973,1,19))
"RTN","KMPDTM",110,0)
 ; if no ALERT set default to 30 seconds
"RTN","KMPDTM",111,0)
 S ALERT=$S($P(DATA,U,2):$P(DATA,U,2),1:30)
"RTN","KMPDTM",112,0)
 ; if not UPDATE default to 10 minutes
"RTN","KMPDTM",113,0)
 S UPDATE=$S($P(DATA,U):$P(DATA,U),1:10)
"RTN","KMPDTM",114,0)
 ; current hour
"RTN","KMPDTM",115,0)
 S HR=+$E($P(NOW,".",2),1,2)
"RTN","KMPDTM",116,0)
 ; current time-to-load value
"RTN","KMPDTM",117,0)
 S:HR&($D(KMPUTMP(HR))) LOADTM=$P(KMPUTMP(HR,0),U,2)
"RTN","KMPDTM",118,0)
 ; determine if is now an alert condition
"RTN","KMPDTM",119,0)
 S KMPUALRT=$S(LOADTM>ALERT:1,1:0)
"RTN","KMPDTM",120,0)
 ;
"RTN","KMPDTM",121,0)
 ; if load time is greater than alert time
"RTN","KMPDTM",122,0)
 I KMPUALRT S TXT(1,0)=$C(7)_"ALERT!!! - Current Average Time-To-Load exceeds '"_ALERT_" seconds'"
"RTN","KMPDTM",123,0)
 ; else
"RTN","KMPDTM",124,0)
 E  S TXT(1,0)=""
"RTN","KMPDTM",125,0)
 ;
"RTN","KMPDTM",126,0)
 S TXT(2,0)=""
"RTN","KMPDTM",127,0)
 S TXT(3,0)="Last Updated: "_$P($$FMTE^XLFDT(NOW),"@",2)_"  > "
"RTN","KMPDTM",128,0)
 S TXT(3,0)=TXT(3,0)_"Monitor will be updated every "_UPDATE_" min."
"RTN","KMPDTM",129,0)
 I $G(KMPUTIME) D 
"RTN","KMPDTM",130,0)
 .S TXT(4,0)="Running Time: "_$$FMDIFF^XLFDT(NOW,KMPUTIME,3)_"  > "
"RTN","KMPDTM",131,0)
 .S TXT(4,0)=TXT(4,0)_"ALERT will display if Load Time exceeds "_ALERT_" sec."
"RTN","KMPDTM",132,0)
 S TITLE="Timing Data Monitor^CPRS Coversheet^Load Time (Sec)^Hour"
"RTN","KMPDTM",133,0)
 ;
"RTN","KMPDTM",134,0)
 D EN^KMPDUG("KMPUTMP",TITLE,"DV","","TXT",1,40)
"RTN","KMPDTM",135,0)
 ;
"RTN","KMPDTM",136,0)
 Q
"RTN","KMPDTM",137,0)
 ;
"RTN","KMPDTM",138,0)
EXIT ;-- cleanup on exit
"RTN","KMPDTM",139,0)
 D ^%ZISC
"RTN","KMPDTM",140,0)
 Q
"RTN","KMPDUTL")
0^3^B9901200
"RTN","KMPDUTL",1,0)
KMPDUTL ;OAK/RAK - CM Tools Utility ;2/17/04  10:50
"RTN","KMPDUTL",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;**1**;Mar 22, 2002
"RTN","KMPDUTL",3,0)
 ;
"RTN","KMPDUTL",4,0)
QUEBKG(KMPDOPT,KMPDTIME,KMPDFREQ,KMPDDEL) ;-- queue background job
"RTN","KMPDUTL",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL",6,0)
 ; KMPDOPT.... Option name to queue (free text name in .01 field of 
"RTN","KMPDUTL",7,0)
 ;                                   OPTION file)
"RTN","KMPDUTL",8,0)
 ; KMPDTIME... Date/time to queue option (T@1400, etc)
"RTN","KMPDUTL",9,0)
 ; KMPDFREQ... Scheduling frequency (1D, etc)
"RTN","KMPDUTL",10,0)
 ; KMPDDEL.... Delete option if it already exists in file 19.2
"RTN","KMPDUTL",11,0)
 ;              0 - do not delete (quit if already scheduled)
"RTN","KMPDUTL",12,0)
 ;              1 - delete if already in file 19.2
"RTN","KMPDUTL",13,0)
 ;
"RTN","KMPDUTL",14,0)
 ; This API will queue an option from file #19 (OPTION) to run in file
"RTN","KMPDUTL",15,0)
 ; 19.2 (OPTION SCHEDULE).
"RTN","KMPDUTL",16,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL",17,0)
 Q:$G(KMPDOPT)=""
"RTN","KMPDUTL",18,0)
 Q:$G(KMPDTIME)=""
"RTN","KMPDUTL",19,0)
 Q:$G(KMPDFREQ)=""
"RTN","KMPDUTL",20,0)
 S KMPDDEL=+$G(KMPDDEL)
"RTN","KMPDUTL",21,0)
 N DA,DIFROM,DIK,FDA,ERROR,IEN,IEN1,IENZ,TEXT,X,Y,Z
"RTN","KMPDUTL",22,0)
 ; Newing DIFROM will force reschedule when installing from KIDS
"RTN","KMPDUTL",23,0)
 S:'$G(DT) DT=$$DT^XLFDT
"RTN","KMPDUTL",24,0)
 ; change to internal format
"RTN","KMPDUTL",25,0)
 D FMDTI^KMPDU(.Z,KMPDTIME)
"RTN","KMPDUTL",26,0)
 Q:Z(0)="^"!(Z(0)="")
"RTN","KMPDUTL",27,0)
 S KMPDTIME=Z(0) K Z
"RTN","KMPDUTL",28,0)
 S TEXT=KMPDOPT
"RTN","KMPDUTL",29,0)
 ; quit if not in file 19
"RTN","KMPDUTL",30,0)
 S IEN=$O(^DIC(19,"B",TEXT,0)) Q:'IEN
"RTN","KMPDUTL",31,0)
 S IEN1=$O(^DIC(19.2,"B",IEN,0))
"RTN","KMPDUTL",32,0)
 ; quit if already in file 19.2 and not KMPDDEL
"RTN","KMPDUTL",33,0)
 Q:IEN1&('KMPDDEL)
"RTN","KMPDUTL",34,0)
 ; delete if in file 19.2
"RTN","KMPDUTL",35,0)
 I IEN1 S DIK="^DIC(19.2,",DA=IEN1 D ^DIK
"RTN","KMPDUTL",36,0)
 ; add entry
"RTN","KMPDUTL",37,0)
 S FDA($J,19.2,"+1,",.01)=IEN
"RTN","KMPDUTL",38,0)
 ; queued to run at what time
"RTN","KMPDUTL",39,0)
 S FDA($J,19.2,"+1,",2)=KMPDTIME
"RTN","KMPDUTL",40,0)
 ; rescheduling frequency.
"RTN","KMPDUTL",41,0)
 S FDA($J,19.2,"+1,",6)=KMPDFREQ
"RTN","KMPDUTL",42,0)
 D UPDATE^DIE("","FDA($J)",.IENZ,"ERROR")
"RTN","KMPDUTL",43,0)
 I $D(ERROR) D MSG^DIALOG("W","",60,10,"ERROR")
"RTN","KMPDUTL",44,0)
 S IEN1=$O(^DIC(19.2,"B",IEN,0))
"RTN","KMPDUTL",45,0)
 I '$G(^DIC(19.2,+IEN1,1)) D 
"RTN","KMPDUTL",46,0)
 .D MES^XPDUTL("     ERROR - Not able to reschedule "_KMPDOPT)
"RTN","KMPDUTL",47,0)
 .D MES^XPDUTL("     Use 'Schedule/Unschedule Options' [XUTM SCHEDULE] to reschedule.")
"RTN","KMPDUTL",48,0)
 ;
"RTN","KMPDUTL",49,0)
 Q
"RTN","KMPDUTL",50,0)
 ;
"RTN","KMPDUTL",51,0)
VERSION() ;-- extrinsic - return current version.
"RTN","KMPDUTL",52,0)
 Q $P($T(+2^KMPDUTL),";",3)_"^"_$P($T(+2^KMPDUTL),";",5)
"RTN","KMPDUTL",53,0)
 ;
"RTN","KMPDUTL",54,0)
VRSNGET(KMPDAPPL) ;-- extrinsic function - get version^patches
"RTN","KMPDUTL",55,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL",56,0)
 ; KMPDAPPL... application:
"RTN","KMPDUTL",57,0)
 ;              0 - CM Tools
"RTN","KMPDUTL",58,0)
 ;              1 - SAGG
"RTN","KMPDUTL",59,0)
 ;              2 - RUM
"RTN","KMPDUTL",60,0)
 ;
"RTN","KMPDUTL",61,0)
 ; Return: Version^Patch^VersionInstallDate^PatchInstallDate
"RTN","KMPDUTL",62,0)
 ;         null = no application
"RTN","KMPDUTL",63,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL",64,0)
 ;
"RTN","KMPDUTL",65,0)
 Q:$G(KMPDAPPL)="" ""
"RTN","KMPDUTL",66,0)
 Q:KMPDAPPL<0!(KMPDAPPL>2) ""
"RTN","KMPDUTL",67,0)
 ;
"RTN","KMPDUTL",68,0)
 N DATA,VERSION S VERSION=""
"RTN","KMPDUTL",69,0)
 ;
"RTN","KMPDUTL",70,0)
 ; cm tools
"RTN","KMPDUTL",71,0)
 I KMPDAPPL=0 D 
"RTN","KMPDUTL",72,0)
 .S DATA=$G(^KMPD(8973,1,KMPDAPPL))
"RTN","KMPDUTL",73,0)
 .S VERSION=$P(DATA,U,2)_U_$P(DATA,U,4)_U_$P(DATA,U,3)_U_$P(DATA,U,5)
"RTN","KMPDUTL",74,0)
 ;
"RTN","KMPDUTL",75,0)
 ; all other applications
"RTN","KMPDUTL",76,0)
 E  D 
"RTN","KMPDUTL",77,0)
 .S DATA=$G(^KMPD(8973,1,KMPDAPPL))
"RTN","KMPDUTL",78,0)
 .S VERSION=$P(DATA,U)_U_$P(DATA,U,3)_U_$P(DATA,U,2)_U_$P(DATA,U,4)
"RTN","KMPDUTL",79,0)
 ;
"RTN","KMPDUTL",80,0)
 Q VERSION
"RTN","KMPDUTL",81,0)
 ;
"RTN","KMPDUTL",82,0)
PTCHINFO ; -- patch information: routine name ^ current version ^ current patch(es)
"RTN","KMPDUTL",83,0)
 ;;KMPDBD01^2.0
"RTN","KMPDUTL",84,0)
 ;;KMPDHU01^2.0
"RTN","KMPDUTL",85,0)
 ;;KMPDHU02^2.0
"RTN","KMPDUTL",86,0)
 ;;KMPDHU03^2.0
"RTN","KMPDUTL",87,0)
 ;;KMPDHUA^2.0
"RTN","KMPDUTL",88,0)
 ;;KMPDSS^2.0
"RTN","KMPDUTL",89,0)
 ;;KMPDSSA^2.0^**1**
"RTN","KMPDUTL",90,0)
 ;;KMPDTM^2.0^**1**
"RTN","KMPDUTL",91,0)
 ;;KMPDTP1^2.0
"RTN","KMPDUTL",92,0)
 ;;KMPDTP2^2.0
"RTN","KMPDUTL",93,0)
 ;;KMPDTP3^2.0
"RTN","KMPDUTL",94,0)
 ;;KMPDTP4^2.0
"RTN","KMPDUTL",95,0)
 ;;KMPDTP5^2.0
"RTN","KMPDUTL",96,0)
 ;;KMPDTP6^2.0
"RTN","KMPDUTL",97,0)
 ;;KMPDTP7^2.0
"RTN","KMPDUTL",98,0)
 ;;KMPDTU01^2.0
"RTN","KMPDUTL",99,0)
 ;;KMPDTU02^2.0
"RTN","KMPDUTL",100,0)
 ;;KMPDTU10^2.0
"RTN","KMPDUTL",101,0)
 ;;KMPDTU11^2.0
"RTN","KMPDUTL",102,0)
 ;;KMPDU^2.0
"RTN","KMPDUTL",103,0)
 ;;KMPDU1^2.0
"RTN","KMPDUTL",104,0)
 ;;KMPDU2^2.0
"RTN","KMPDUTL",105,0)
 ;;KMPDU3^2.0
"RTN","KMPDUTL",106,0)
 ;;KMPDU4^2.0
"RTN","KMPDUTL",107,0)
 ;;KMPDU5^2.0
"RTN","KMPDUTL",108,0)
 ;;KMPDU6^2.0
"RTN","KMPDUTL",109,0)
 ;;KMPDU11^2.0
"RTN","KMPDUTL",110,0)
 ;;KMPDUG^2.0
"RTN","KMPDUTL",111,0)
 ;;KMPDUG1^2.0
"RTN","KMPDUTL",112,0)
 ;;KMPDUG2^2.0
"RTN","KMPDUTL",113,0)
 ;;KMPDUGV^2.0
"RTN","KMPDUTL",114,0)
 ;;KMPDUT^2.0
"RTN","KMPDUTL",115,0)
 ;;KMPDUT2^2.0
"RTN","KMPDUTL",116,0)
 ;;KMPDUT4^2.0
"RTN","KMPDUTL",117,0)
 ;;KMPDUT4A^2.0
"RTN","KMPDUTL",118,0)
 ;;KMPDUT4B^2.0
"RTN","KMPDUTL",119,0)
 ;;KMPDUT4C^2.0
"RTN","KMPDUTL",120,0)
 ;;KMPDUT5^2.0
"RTN","KMPDUTL",121,0)
 ;;KMPDUTL^2.0^**1**
"RTN","KMPDUTL",122,0)
 ;;KMPDUTL1^2.0
"RTN","KMPDUTL",123,0)
 ;;KMPDUTL2^2.0
"RTN","KMPDUTL",124,0)
 ;;KMPDUTL3^2.0
"RTN","KMPDUTL",125,0)
 ;;KMPDUTL4^2.0
"RTN","KMPDUTL",126,0)
 ;;KMPDUTL5^2.0
"RTN","KMPDUTL",127,0)
 ;;KMPDUTL6^2.0
"SEC","^DIC",8973,8973,0,"AUDIT")
@
"SEC","^DIC",8973,8973,0,"DD")
@
"SEC","^DIC",8973,8973,0,"DEL")
@
"SEC","^DIC",8973,8973,0,"LAYGO")
@
"SEC","^DIC",8973,8973,0,"RD")
@
"SEC","^DIC",8973,8973,0,"WR")
@
"VER")
8.0^22.0
"^DD",8973,8973,0)
FIELD^^20^68
"^DD",8973,8973,0,"DDA")
N
"^DD",8973,8973,0,"DT")
3040213
"^DD",8973,8973,0,"IX","B",8973,.01)

"^DD",8973,8973,0,"NM","CP PARAMETERS")

"^DD",8973,8973,0,"VRPK")
KMPD
"^DD",8973,8973,.01,0)
NAME^R*P4'^DIC(4,^0;1^S DIC("S")="I '$O(^KMPD(8973,0))" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",8973,8973,.01,1,0)
^.1
"^DD",8973,8973,.01,1,1,0)
8973^B
"^DD",8973,8973,.01,1,1,1)
S ^KMPD(8973,"B",$E(X,1,30),DA)=""
"^DD",8973,8973,.01,1,1,2)
K ^KMPD(8973,"B",$E(X,1,30),DA)
"^DD",8973,8973,.01,3)
Pointer to the Institution file (#4)
"^DD",8973,8973,.01,12)
Allow only one entry in file.
"^DD",8973,8973,.01,12.1)
S DIC("S")="I '$O(^KMPD(8973,0))"
"^DD",8973,8973,.01,"DEL",.01,0)
I 1
"^DD",8973,8973,.01,"DT")
3040401
"^DD",8973,8973,.02,0)
CM TOOLS CURRENT VERSION^F^^0;2^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,.02,3)
Current version of CAPACITY MANGEMENT TOOLS. Answer must be 1-10 characters in length
"^DD",8973,8973,.02,"DT")
3040401
"^DD",8973,8973,.03,0)
CM TOOLS CURRENT VERSION INST^D^^0;3^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,.03,3)
Installation date of the current version of CAPACITY MANAGEMENT TOOLS.
"^DD",8973,8973,.03,"DT")
3040401
"^DD",8973,8973,.04,0)
CM TOOLS CURRENT PATCH^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,.04,3)
Current patch number for the CAPACITY MANAGEMNT TOOLS package. Answer must be 1-10 characters in length
"^DD",8973,8973,.04,"DT")
3040401
"^DD",8973,8973,.05,0)
CM TOOLS CURRENT PATCH INST^D^^0;5^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,.05,3)
Installation Date of the current CAPACITY MANAGEMENT TOOLS patch.
"^DD",8973,8973,.05,"DT")
3040401
"^DD",8973,8973,1.01,0)
SAGG CURRENT VERSION^F^^1;1^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.01,3)
Current version of the SAGG package. Answer must be 1-10 characters in length
"^DD",8973,8973,1.01,"DT")
3040401
"^DD",8973,8973,1.02,0)
SAGG CURRENT VERSION INSTALL^D^^1;2^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.02,3)
Installation Date for the current SAGG package.
"^DD",8973,8973,1.02,"DT")
3040401
"^DD",8973,8973,1.03,0)
SAGG CURRENT PATCH^F^^1;3^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,1.03,3)
Current SAGG patch number(s). Answer must be 1-20 characters in length
"^DD",8973,8973,1.03,"DT")
3040401
"^DD",8973,8973,1.04,0)
SAGG CURRENT PATCH INSTALL^D^^1;4^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.04,3)
Installation Date for current SAGG patch.
"^DD",8973,8973,1.04,"DT")
3040401
"^DD",8973,8973,1.05,0)
SAGG DLY BKG START^D^^1;5^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.05,3)
Most recent Start Time for the SAGG daily background job.
"^DD",8973,8973,1.05,"DT")
3040401
"^DD",8973,8973,1.06,0)
SAGG DLY BKG STOP^D^^1;6^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.06,3)
Most recent Stop Time for the SAGG daily background job.
"^DD",8973,8973,1.06,"DT")
3040401
"^DD",8973,8973,1.07,0)
SAGG DLY BKG DELTA^F^^1;7^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.07,3)
Most recent Delta for the SAGG daily background job.
"^DD",8973,8973,1.07,"DT")
3040401
"^DD",8973,8973,1.08,0)
SAGG WKY BKG START^D^^1;8^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.08,3)
Most recent Start Time for the SAGG weekly background job.
"^DD",8973,8973,1.08,"DT")
3040401
"^DD",8973,8973,1.09,0)
SAGG WKY BKG STOP^D^^1;9^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.09,3)
Most recent Stop Time for the SAGG weekly background job. 
"^DD",8973,8973,1.09,"DT")
3040401
"^DD",8973,8973,1.1,0)
SAGG WKY BKG DELTA^F^^1;10^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.1,3)
Most recent Delta for the SAGG weekly background job. 
"^DD",8973,8973,1.1,"DT")
3040401
"^DD",8973,8973,1.11,0)
SAGG WEEKS TO KEEP DATA^NJ3,0^^1;11^K:+X'=X!(X>100)!(X<0)!(X?.E1"."1.N) X
"^DD",8973,8973,1.11,3)
Type a number between 0 and 100, 0 Decimal Digits
"^DD",8973,8973,1.11,"DT")
3040401
"^DD",8973,8973,1.12,0)
SAGG DLY PURGE START^D^^1;12^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.12,3)
(No range limit on date)
"^DD",8973,8973,1.12,"DT")
3031121
"^DD",8973,8973,1.13,0)
SAGG DLY PURGE STOP^D^^1;13^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.13,3)
(No range limit on date)
"^DD",8973,8973,1.13,"DT")
3031121
"^DD",8973,8973,1.14,0)
SAGG DLY PURGE DELTA^F^^1;14^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.14,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,1.14,"DT")
3031121
"^DD",8973,8973,1.15,0)
SAGG WKY PURGE START^D^^1;15^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.15,3)
(No range limit on date)
"^DD",8973,8973,1.15,"DT")
3031121
"^DD",8973,8973,1.16,0)
SAGG WKY PURGE STOP^D^^1;16^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.16,3)
(No range limit on date)
"^DD",8973,8973,1.16,"DT")
3031121
"^DD",8973,8973,1.17,0)
SAGG WKY PURGE DELTA^F^^1;17^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.17,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,1.17,"DT")
3031121
"^DD",8973,8973,2.01,0)
RUM CURRENT VERSION^F^^2;1^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,2.01,3)
Current version of the RESOURCE USAGE MONITOR package. Answer must be 1-10 characters in length
"^DD",8973,8973,2.01,"DT")
3040401
"^DD",8973,8973,2.02,0)
RUM CURRENT VERSION INSTALL^D^^2;2^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.02,3)
Installation Date of the current RESOURCE USAGE MONITOR package.
"^DD",8973,8973,2.02,"DT")
3040401
"^DD",8973,8973,2.03,0)
RUM CURRENT PATCH^F^^2;3^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,2.03,3)
Current patch number(s) for the RESOURCE USAGE MONITOR package. Answer must be 1-10 characters in length
"^DD",8973,8973,2.03,"DT")
3040401
"^DD",8973,8973,2.04,0)
RUM CURRENT PATCH INSTALL^D^^2;4^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.04,3)
Installation Date of the current patch for the RESOURCE USAGE MONITOR package.
"^DD",8973,8973,2.04,"DT")
3040401
"^DD",8973,8973,2.05,0)
RUM DLY BKG START^D^^2;5^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.05,3)
Most recent Start Time for the RUM daily background job. 
"^DD",8973,8973,2.05,"DT")
3040401
"^DD",8973,8973,2.06,0)
RUM DLY BKG STOP^D^^2;6^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.06,3)
Most recent Stop Time for the RUM daily background job.
"^DD",8973,8973,2.06,"DT")
3040401
"^DD",8973,8973,2.07,0)
RUM DLY BKG DELTA^F^^2;7^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,2.07,3)
Most recent Delta for the RUM daily background job.
"^DD",8973,8973,2.07,"DT")
3040401
"^DD",8973,8973,2.08,0)
RUM WKY BKG START^D^^2;8^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.08,3)
Most recent Start Time for the RUM weekly background job.
"^DD",8973,8973,2.08,"DT")
3040401
"^DD",8973,8973,2.09,0)
RUM WKY BKG STOP^D^^2;9^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.09,3)
Most recent Stop Time for the RUM weekly background job.  
"^DD",8973,8973,2.09,"DT")
3040401
"^DD",8973,8973,2.1,0)
RUM WKY BKG DELTA^F^^2;10^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,2.1,3)
Most recent Delta for the RUM weekly background job.
"^DD",8973,8973,2.1,"DT")
3040401
"^DD",8973,8973,2.11,0)
RUM WEEKS TO KEEP DATA^NJ2,0^^2;11^K:+X'=X!(X>20)!(X<2)!(X?.E1"."1.N) X
"^DD",8973,8973,2.11,3)
This is the number of weeks that RUM data will be retained in file #8971.1 before purging.  It is recommended that 2 weeks of data be retained.
"^DD",8973,8973,2.11,"DT")
3040401
"^DD",8973,8973,2.12,0)
RUM DLY PURGE START^D^^2;12^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.12,3)
(No range limit on date)
"^DD",8973,8973,2.12,"DT")
3031121
"^DD",8973,8973,2.13,0)
RUM DLY PURGE STOP^D^^2;13^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.13,3)
(No range limit on date)
"^DD",8973,8973,2.13,"DT")
3031121
"^DD",8973,8973,2.14,0)
RUM DLY PURGE DELTA^F^^2;14^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,2.14,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,2.14,"DT")
3031121
"^DD",8973,8973,2.15,0)
RUM WKY PURGE START^D^^2;15^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.15,3)
(No range limit on date)
"^DD",8973,8973,2.15,"DT")
3031121
"^DD",8973,8973,2.16,0)
RUM WKY PURGE STOP^D^^2;16^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.16,3)
(No range limit on date)
"^DD",8973,8973,2.16,"DT")
3031121
"^DD",8973,8973,2.17,0)
RUM WKY PURGE DELTA^F^^2;17^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,2.17,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,2.17,"DT")
3031121
"^DD",8973,8973,3.05,0)
HL7 DLY BKG START^D^^3;5^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.05,3)
Most recent Start Time for the HL7 daily background job.  
"^DD",8973,8973,3.05,"DT")
3040401
"^DD",8973,8973,3.06,0)
HL7 DLY BKG STOP^D^^3;6^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.06,3)
Most recent Stop Time for the HL7 daily background job.  
"^DD",8973,8973,3.06,"DT")
3040401
"^DD",8973,8973,3.07,0)
HL7 DLY BKG DELTA^F^^3;7^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,3.07,3)
Most recent Delta for the Timing daily background job.
"^DD",8973,8973,3.07,"DT")
3040401
"^DD",8973,8973,3.08,0)
HL7 WKY BKG START^D^^3;8^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.08,3)
Most recent Start Time for the HL7 weekly background job.
"^DD",8973,8973,3.08,"DT")
3040401
"^DD",8973,8973,3.09,0)
HL7 WKY BKG STOP^D^^3;9^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.09,3)
Most recent Stop Time for the HL7 weekly background job.
"^DD",8973,8973,3.09,"DT")
3040401
"^DD",8973,8973,3.1,0)
HL7 WKY BKG DELTA^F^^3;10^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,3.1,3)
Most recent Delta for the HL7 weekly background job.
"^DD",8973,8973,3.1,"DT")
3040401
"^DD",8973,8973,3.11,0)
HL7 WEEKS TO KEEP DATA^NJ2,0^^3;11^K:+X'=X!(X>20)!(X<2)!(X?.E1"."1.N) X
"^DD",8973,8973,3.11,3)
This is the number of weeks that HL7 data will be retained in file #8973.1 before purging.  It is recommended that 2 weeks of data be retained.
"^DD",8973,8973,3.11,"DT")
3040401
"^DD",8973,8973,3.12,0)
HL7 DLY PURGE START^D^^3;12^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.12,3)
(No range limit on date)
"^DD",8973,8973,3.12,"DT")
3031121
"^DD",8973,8973,3.13,0)
HL7 DLY PURGE END^D^^3;13^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.13,3)
(No range limit on date)
"^DD",8973,8973,3.13,"DT")
3031121
"^DD",8973,8973,3.14,0)
HL7 DLY PURGE DELTA^F^^3;14^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,3.14,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,3.14,"DT")
3031121
"^DD",8973,8973,3.15,0)
HL7 WKY PURGE START^D^^3;15^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.15,3)
(No range limit on date)
"^DD",8973,8973,3.15,"DT")
3031121
"^DD",8973,8973,3.16,0)
HL7 WKY PURGE END^D^^3;16^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.16,3)
(No range limit on date)
"^DD",8973,8973,3.16,"DT")
3031121
"^DD",8973,8973,3.17,0)
HL7 WKY PURGE DELTA^F^^3;17^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,3.17,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,3.17,"DT")
3031121
"^DD",8973,8973,4.05,0)
TIMING DLY BKG START^D^^4;5^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.05,3)
Most recent Start Time for the Timing daily background job.
"^DD",8973,8973,4.05,"DT")
3040401
"^DD",8973,8973,4.06,0)
TIMING DLY BKG STOP^D^^4;6^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.06,3)
Most recent Stop Time for the Timing daily background job.
"^DD",8973,8973,4.06,"DT")
3040401
"^DD",8973,8973,4.07,0)
TIMING DLY BKG DELTA^F^^4;7^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,4.07,3)
Most recent Delat for the Timing daily background job.
"^DD",8973,8973,4.07,"DT")
3040401
"^DD",8973,8973,4.08,0)
TIMING WKY BKG START^D^^4;8^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.08,3)
Most recent Start Time for the Timing weekly background job.
"^DD",8973,8973,4.08,"DT")
3040401
"^DD",8973,8973,4.09,0)
TIMING WKY BKG STOP^D^^4;9^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.09,3)
Most recent Stop Time for the Timing weekly background job.
"^DD",8973,8973,4.09,"DT")
3040401
"^DD",8973,8973,4.1,0)
TIMING WKY BKG DELTA^F^^4;10^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,4.1,3)
Most recent Delta for the Timing weekly background job.
"^DD",8973,8973,4.1,"DT")
3040401
"^DD",8973,8973,4.11,0)
TIMING WEEKS TO KEEP DATA^NJ2,0^^4;11^K:+X'=X!(X>40)!(X<2)!(X?.E1"."1.N) X
"^DD",8973,8973,4.11,3)
This is the number of weeks that Timing data will be retained in file #8973.2 before purging.  It is recommended that 4 weeks of data be retained.             
"^DD",8973,8973,4.11,"DT")
3031211
"^DD",8973,8973,4.12,0)
TIMING DLY PURGE START^D^^4;12^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.12,3)
(No range limit on date)
"^DD",8973,8973,4.12,"DT")
3031121
"^DD",8973,8973,4.13,0)
TIMING DLY PURGE END^D^^4;13^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.13,3)
(No range limit on date)
"^DD",8973,8973,4.13,"DT")
3031121
"^DD",8973,8973,4.14,0)
TIMING DLY PURGE DELTA^F^^4;14^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,4.14,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,4.14,"DT")
3031121
"^DD",8973,8973,4.15,0)
TIMING WKY PURGE START^D^^4;15^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.15,3)
(No range limit on date)
"^DD",8973,8973,4.15,"DT")
3031121
"^DD",8973,8973,4.16,0)
TIMING WKY PURGE END^D^^4;16^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.16,3)
(No range limit on date)
"^DD",8973,8973,4.16,"DT")
3031121
"^DD",8973,8973,4.17,0)
TIMING WKY PURGE DELTA^F^^4;17^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,4.17,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,4.17,"DT")
3031121
"^DD",8973,8973,19.01,0)
MONITOR UPDATE RATE - MINUTES^NJ2,0^^19;1^K:+X'=X!(X>60)!(X<5)!(X?.E1"."1.N) X
"^DD",8973,8973,19.01,3)
When the Timing Monitor is running, this is the number of minutes between automatic updates. (Type a number between 5 and 60)
"^DD",8973,8973,19.01,"DT")
3040213
"^DD",8973,8973,19.02,0)
MONITOR ALERT - SECONDS^NJ3,0^^19;2^K:+X'=X!(X>999)!(X<10)!(X?.E1"."1.N) X
"^DD",8973,8973,19.02,3)
When the Timing Monitor is running, if the average time-to-load a CPRS Coversheet exceeds this value, an alert will appear on the Timing Monitor screen. (Type a number between 10 and 999)
"^DD",8973,8973,19.02,"DT")
3040213
"^DD",8973,8973,20,0)
CPU^8973.201^^20;0
"^DD",8973,8973,20,21,0)
^^1^1^3040401^
"^DD",8973,8973,20,21,1,0)
Current CPU/Node data.
"^DD",8973,8973.201,0)
CPU SUB-FIELD^^.05^5
"^DD",8973,8973.201,0,"DT")
3031125
"^DD",8973,8973.201,0,"IX","B",8973.201,.01)

"^DD",8973,8973.201,0,"NM","CPU")

"^DD",8973,8973.201,0,"UP")
8973
"^DD",8973,8973.201,.01,0)
NODE^F^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",8973,8973.201,.01,1,0)
^.1
"^DD",8973,8973.201,.01,1,1,0)
8973.201^B
"^DD",8973,8973.201,.01,1,1,1)
S ^KMPD(8973,DA(1),20,"B",$E(X,1,30),DA)=""
"^DD",8973,8973.201,.01,1,1,2)
K ^KMPD(8973,DA(1),20,"B",$E(X,1,30),DA)
"^DD",8973,8973.201,.01,3)
Node name. Answer must be 1-30 characters in length
"^DD",8973,8973.201,.01,"DT")
3040401
"^DD",8973,8973.201,.02,0)
TYPE OF CPU^F^^0;2^K:$L(X)>60!($L(X)<1) X
"^DD",8973,8973.201,.02,3)
Type of CPU for this node. Answer must be 1-60 characters in length
"^DD",8973,8973.201,.02,"DT")
3040401
"^DD",8973,8973.201,.03,0)
NUMBER OF PROCESSORS^NJ3,0^^0;3^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1.N) X
"^DD",8973,8973.201,.03,3)
Number of processors for this node. Type a number between 0 and 999, 0 Decimal Digits
"^DD",8973,8973.201,.03,"DT")
3040401
"^DD",8973,8973.201,.04,0)
PROCESSOR SPEED^F^^0;4^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973.201,.04,3)
Processor speed for this node. Answer must be 1-20 characters in length
"^DD",8973,8973.201,.04,"DT")
3040401
"^DD",8973,8973.201,.05,0)
AMOUNT OF MEMORY^F^^0;5^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973.201,.05,3)
Amount of memory for this node. Answer must be 1-20 characters in length
"^DD",8973,8973.201,.05,"DT")
3040401
"^DIC",8973,8973,0)
CP PARAMETERS^8973
"^DIC",8973,8973,0,"GL")
^KMPD(8973,
"^DIC",8973,8973,"%",0)
^1.005^^0
"^DIC",8973,8973,"%D",0)
^^5^5^3040401^
"^DIC",8973,8973,"%D",1,0)
This file keeps track of all editable parameters for Capacity Planning 
"^DIC",8973,8973,"%D",2,0)
packages.  It also stores Start, Stop and Delta times for background 
"^DIC",8973,8973,"%D",3,0)
jobs, as well as CPU Node data.  There is only one entry allowed in this 
"^DIC",8973,8973,"%D",4,0)
file, and is a pointer to the Institution file taken from the first piece 
"^DIC",8973,8973,"%D",5,0)
of the $$SITE^VASITE extrinsic function.
"^DIC",8973,"B","CP PARAMETERS",8973)

**END**
**END**

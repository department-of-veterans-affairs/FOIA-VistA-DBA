$TXT Created by OGI,MICHAEL at FM22-PATCH.FO-OAKLAND.MED.VA.GOV  (KIDS) on Wednesday, 01/29/03 at 12:57
=============================================================================
Run Date: MAR 13, 2003                     Designation: XU*8*240
Package : XU - KERNEL                          Priority: Mandatory
Version : 8       SEQ #237                       Status: Released
                  Compliance Date: APR 13, 2003
=============================================================================

Associated patches: (v)XU*8*134    <<= must be installed BEFORE `XU*8*240'
                    (v)XU*8*211    <<= must be installed BEFORE `XU*8*240'

Subject: STDNAME~XLFNAME: CHECK FOR SUFFIXES IMMEDIATELY AFTER COMMA

Category: 
  - Routine

Description: 
============

 Routine: XLFNAME, XLFNAME1
 --------------------------
 1. Bug fixed: STDNAME^XLFNAME was not accounting for suffixes (except DR)
 immediately after the comma in the passed name. For example, if the name
 is:
  
     SMITH,JR JOHN
  
 STDNAME^XLFNAME was interpreting "JR" as the Given (First) Name and "JOHN"
 as the Middle Name.
  
 With this patch, STDNAME^XLFNAME looks for the suffixes JR, SR, DR, MD,
 ESQ, DDS, RN, and 1ST through 10th immediately after the first comma of
 the passed name. If it finds any of those suffixes before the given name,
 they are moved to the end, and STDNAME^XLFNAME returns AUDIT("SUFFIX")="".
  
 2. Bug fixed: If you made a call to NAMECOMP^XLFNAME, and passed in a name
 that has DR immediately after the first comma, before the given name, an
 undefined XUNM("SUFFIX") error would occur. For example:
  
    >S ZZNAME="SMITH,DR JOHN" D NAMECOMP^XLFNAME(.ZZNAME)
    
    %DSM-E-UNDEF, undefined variable XUNM("SUFFIX")
    -DSM-I-ECODE, MUMPS error code: M6
    %DSM-I-ATLABEL, N2+7^XLFNAME:1  . S
    XUNM("SUFFIX")=$$JOIN(XUNM("SUFFIX"),"DR")
  
 3. Bug fixed: If you make a call to STDNAME^XLFNAME and pass in a name 
 part that contains only punctuation:
  
    a. That name part would be returned as one of the name components; 
    b. Some of the other name components may fail to be returned.
    
 This patch changes the behavior so that name parts that consist only of 
 punctuation are removed from both the standard name and the name 
 components returned by the call.
  
 Example 1:
  
    >S NAME="SMITH,!@# JOHN" D STDNAME^XLFNAME(.NAME,"C") ZW NAME
  
    Before patch:                After patch:
    ------------                 -----------
    NAME=SMITH,JOHN              NAME=SMITH,JOHN
    NAME("FAMILY")=SMITH         NAME("FAMILY")=SMITH
    NAME("GIVEN")=!@#            NAME("GIVEN")=JOHN
    NAME("MIDDLE")=              NAME("MIDDLE")=
    NAME("SUFFIX")=              NAME("SUFFIX")=
  
 Example 2:
    
    >S NAME="(DEC)." D STDNAME^XLFNAME(.NAME,"CP") ZW NAME
    
    Before patch:                After patch:
    ------------                 -----------
    NAME=                        NAME=
    NAME("FAMILY")=.             NAME("FAMILY")=
    NAME("GIVEN")=               NAME("GIVEN")=
    NAME("MIDDLE")=              NAME("MIDDLE")=
    NAME("SUFFIX")=              NAME("SUFFIX")=
  
  
 Blood Bank Team Coordination:
 ============================
 Clearance - June 13, 2002
    
  
 Thanks to Test Sites:
 ====================
 Battle Creek, MI
 Bay Pines, FL
 Bay Pines OIFO
 Charleston, SC
 Clarksburg, WV
 Dublin, GA
 Grand Junction, CO
 Miami, FL
 Northern California HCS
 Reno, NV
 Tennessee Valley HCS
   
   
 Routine Summary:
 ===============
 The following routine is included in this patch. The second line of the
 routine now looks like:
  
   <tab>;;8.0;KERNEL;**[patch list]**;Jul 10, 1995
  
 CHECK^XTSUMBLD results:
  
   Routine Name   Before Patch    After Patch     Patch List
   ============   ============    ===========     ==========
     XLFNAME        7393126         8601347       134,211,240
     XLFNAME1       8772051         8898987       134,240
  
  
 Installation Instructions:
 =========================
 This patch can be installed with VISTA users online. However, it is
 recommended that it be installed or queued for install during non-peak
 times.
  
 TaskMan does not need to be STOPPED or placed in a WAIT state.
  
 The installation of this patch (step 3, below) should take less than one
 minute.
  
   1.  AXP/DSM sites: Review your mapped routine set. If any of the
 routine(s) listed in the ROUTINE SUMMARY section are mapped, they should
 be removed from the mapped set at this time.
  
   2.  Use the "INSTALL/CHECK MESSAGE" option on the PackMan menu. This
 option loads the patch into a Transport Global on your system.
  
   3.  On the KIDS menu, select the "Installation" menu, and use the
 following options to install the Transport Global:
  
        Verify Checksums in Transport Global
        Print Transport Global
        Compare Transport Global to Current System
        Backup a Transport Global
        Install Package(s)
  
        Select INSTALL NAME: XU*8.0*240
                             ==========
        Want KIDS to INHIBIT LOGONs during the install? NO
                                                        ==
        Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO
                                                                        ==
  
   4.  AXP/DSM sites: Answer NO to the question "Want to MOVE routines to
 other CPUs?"
  
   5.  AXP/DSM sites: After the patch has been installed, if any routines
 were removed from the mapped set in Step 1 above, rebuild your map set.

Routine Information:
====================

Routine Name:
  - XLFNAME


Routine Checksum:

Routine Name:
  - XLFNAME1


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : OGI,MICHAEL                    Date Entered : JUN 07, 2002
Completed By: SINGH,GURBIR                  Date Completed: MAR 11, 2003
Released By : TILLIS,LEWIS                  Date Released : MAR 13, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

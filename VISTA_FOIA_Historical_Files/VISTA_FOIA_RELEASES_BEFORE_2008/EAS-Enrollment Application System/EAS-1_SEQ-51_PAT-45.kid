Released EAS*1*45 SEQ #51
Extracted from mail message
**KIDS**:EAS*1.0*45^

**INSTALL NAME**
EAS*1.0*45
"BLD",5389,0)
EAS*1.0*45^ENROLLMENT APPLICATION SYSTEM^0^3050105^y
"BLD",5389,4,0)
^9.64PA^^
"BLD",5389,"KRN",0)
^9.67PA^8989.52^19
"BLD",5389,"KRN",.4,0)
.4
"BLD",5389,"KRN",.401,0)
.401
"BLD",5389,"KRN",.402,0)
.402
"BLD",5389,"KRN",.403,0)
.403
"BLD",5389,"KRN",.5,0)
.5
"BLD",5389,"KRN",.84,0)
.84
"BLD",5389,"KRN",3.6,0)
3.6
"BLD",5389,"KRN",3.8,0)
3.8
"BLD",5389,"KRN",9.2,0)
9.2
"BLD",5389,"KRN",9.8,0)
9.8
"BLD",5389,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",5389,"KRN",9.8,"NM",1,0)
EASEC100^^0^B71551393
"BLD",5389,"KRN",9.8,"NM",2,0)
EASECSC2^^0^B4646116
"BLD",5389,"KRN",9.8,"NM","B","EASEC100",1)

"BLD",5389,"KRN",9.8,"NM","B","EASECSC2",2)

"BLD",5389,"KRN",19,0)
19
"BLD",5389,"KRN",19.1,0)
19.1
"BLD",5389,"KRN",101,0)
101
"BLD",5389,"KRN",409.61,0)
409.61
"BLD",5389,"KRN",771,0)
771
"BLD",5389,"KRN",870,0)
870
"BLD",5389,"KRN",8989.51,0)
8989.51
"BLD",5389,"KRN",8989.52,0)
8989.52
"BLD",5389,"KRN",8994,0)
8994
"BLD",5389,"KRN","B",.4,.4)

"BLD",5389,"KRN","B",.401,.401)

"BLD",5389,"KRN","B",.402,.402)

"BLD",5389,"KRN","B",.403,.403)

"BLD",5389,"KRN","B",.5,.5)

"BLD",5389,"KRN","B",.84,.84)

"BLD",5389,"KRN","B",3.6,3.6)

"BLD",5389,"KRN","B",3.8,3.8)

"BLD",5389,"KRN","B",9.2,9.2)

"BLD",5389,"KRN","B",9.8,9.8)

"BLD",5389,"KRN","B",19,19)

"BLD",5389,"KRN","B",19.1,19.1)

"BLD",5389,"KRN","B",101,101)

"BLD",5389,"KRN","B",409.61,409.61)

"BLD",5389,"KRN","B",771,771)

"BLD",5389,"KRN","B",870,870)

"BLD",5389,"KRN","B",8989.51,8989.51)

"BLD",5389,"KRN","B",8989.52,8989.52)

"BLD",5389,"KRN","B",8994,8994)

"BLD",5389,"QUES",0)
^9.62^^
"BLD",5389,"REQB",0)
^9.611^3^3
"BLD",5389,"REQB",1,0)
EAS*1.0*40^2
"BLD",5389,"REQB",2,0)
IB*2.0*267^2
"BLD",5389,"REQB",3,0)
DG*5.3*570^2
"BLD",5389,"REQB","B","DG*5.3*570",3)

"BLD",5389,"REQB","B","EAS*1.0*40",1)

"BLD",5389,"REQB","B","IB*2.0*267",2)

"MBREQ")
0
"PKG",189,-1)
1^1
"PKG",189,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",189,20,0)
^9.402P^1^1
"PKG",189,20,1,0)
2^^EASXDR
"PKG",189,20,1,1)
 
"PKG",189,20,"B",2,1)

"PKG",189,22,0)
^9.49I^1^1
"PKG",189,22,1,0)
1.0^3010315^3010321^66481
"PKG",189,22,1,"PAH",1,0)
45^3050105
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","EASEC100")
0^1^B71551393
"RTN","EASEC100",1,0)
EASEC100 ;ALB/BRM,LBD - Print 1010EC LTC Enrollment form ; 3/1/02 8:22am
"RTN","EASEC100",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,16,40,45**;Mar 15, 2001
"RTN","EASEC100",3,0)
 ;
"RTN","EASEC100",4,0)
 ; This routine is called by EASEC10E to gather veteran data to be
"RTN","EASEC100",5,0)
 ; printed in the 1010EC (Long Term Care) form.
"RTN","EASEC100",6,0)
 ;
"RTN","EASEC100",7,0)
GETDATA(EASDFN,EAINFO) ;get veterans LTC data to be printed
"RTN","EASEC100",8,0)
 ;Input:
"RTN","EASEC100",9,0)
 ;   EASDFN - DFN for the Patient file (#2)
"RTN","EASEC100",10,0)
 ;Output:
"RTN","EASEC100",11,0)
 ;   ^TMP("1010EC",$J
"RTN","EASEC100",12,0)
 ;
"RTN","EASEC100",13,0)
 N EASROOT,DGINC,DGINR,DGREL,DGDEP
"RTN","EASEC100",14,0)
 S EASROOT="^TMP(""1010EC"",$J,"_EASDFN_","
"RTN","EASEC100",15,0)
 ; data for section 1
"RTN","EASEC100",16,0)
 D DATA1(EASDFN,.EAINFO,EASROOT)
"RTN","EASEC100",17,0)
 ; data for section 2
"RTN","EASEC100",18,0)
 D DATA2(EASDFN,EASROOT)
"RTN","EASEC100",19,0)
 ; data for section 3
"RTN","EASEC100",20,0)
 D DATA3(EASDFN,.EAINFO,EASROOT,.DGINC)
"RTN","EASEC100",21,0)
 ; data for section 4 and part of section 5
"RTN","EASEC100",22,0)
 D DATA4(EASDFN,EASROOT,.DGINC)
"RTN","EASEC100",23,0)
 ; data for section 5
"RTN","EASEC100",24,0)
 D DATA5(EASDFN,EASROOT,.DGINC)
"RTN","EASEC100",25,0)
 ; data for section 6
"RTN","EASEC100",26,0)
 D DATA6(EASDFN,EASROOT,.DGINC)
"RTN","EASEC100",27,0)
 ; data for section 8
"RTN","EASEC100",28,0)
 D DATA8(EASROOT,.EAINFO)
"RTN","EASEC100",29,0)
 Q
"RTN","EASEC100",30,0)
 ;
"RTN","EASEC100",31,0)
DATA1(EASDFN,EAINFO,EASROOT) ;data for section 1
"RTN","EASEC100",32,0)
 N EASINS,INSTMP,MDATA,EASROOT1,MPA,MPB,MPADT,MPBDT,MCN
"RTN","EASEC100",33,0)
 S EASROOT1=EASROOT_"1)"
"RTN","EASEC100",34,0)
 S @EASROOT1@(1)=$G(EAINFO("VET"))                     ;name
"RTN","EASEC100",35,0)
 S @EASROOT1@(2)=$G(EAINFO("SSN"))                      ;ssn
"RTN","EASEC100",36,0)
 S @EASROOT1@(3)=$$GET1^DIQ(2,EASDFN_",",".381","E")   ;medicaid
"RTN","EASEC100",37,0)
 ; **  determine medicare info
"RTN","EASEC100",38,0)
 S EASINS=0,(MPA,MPB)="NO",(MPADT,MPBDT,MCN)=""
"RTN","EASEC100",39,0)
 N EAX,INSUR
"RTN","EASEC100",40,0)
 I $$INSUR^IBBAPI(EASDFN,,"RA",.EAX,"*") ; Retrieve all active insurance
"RTN","EASEC100",41,0)
 I $D(EAX) D
"RTN","EASEC100",42,0)
 . M INSUR=EAX("IBBAPI","INSUR")
"RTN","EASEC100",43,0)
 . S EASINS=0
"RTN","EASEC100",44,0)
 . F  S EASINS=$O(INSUR(EASINS)) Q:'EASINS  D
"RTN","EASEC100",45,0)
 . . Q:$P(INSUR(EASINS,1),U,2)'["MEDICARE (WNR)"  ; Look for MEDICARE insurance 
"RTN","EASEC100",46,0)
 . . I $P(INSUR(EASINS,8),U,2)="PART A" S MPA="YES",MPADT=$$FMTE^XLFDT(INSUR(EASINS,10)),MCN=INSUR(EASINS,14) Q  ; If Policy Name is "PART A", set the Part A variables
"RTN","EASEC100",47,0)
 . . I $P(INSUR(EASINS,8),U,2)="PART B" S MPB="YES",MPBDT=$$FMTE^XLFDT(INSUR(EASINS,10)),MCN=INSUR(EASINS,14) Q  ; If Policy Name is "PART B", set the Part B variables
"RTN","EASEC100",48,0)
 S @EASROOT1@(4)=MPA      ;medicare part a
"RTN","EASEC100",49,0)
 S @EASROOT1@(5)=MPADT    ;medicare part a effective date
"RTN","EASEC100",50,0)
 S @EASROOT1@(6)=MPB      ;medicare part b
"RTN","EASEC100",51,0)
 S @EASROOT1@(7)=MPBDT    ;medicare part b effective date
"RTN","EASEC100",52,0)
 S @EASROOT1@(8)=MCN      ;medicare claim number
"RTN","EASEC100",53,0)
 Q
"RTN","EASEC100",54,0)
DATA2(EASDFN,EASROOT) ;data for section 2
"RTN","EASEC100",55,0)
 N EASI,EASINS,X,Z,EASROOT2,EASINS,CNT,NUM,EASIN1I,GRPIEN,INSUR,DGX
"RTN","EASEC100",56,0)
 S EASROOT2=EASROOT_"2)"
"RTN","EASEC100",57,0)
 S @EASROOT2@(1)=$$GET1^DIQ(2,EASDFN_",",".3192","E")  ;covered by ins
"RTN","EASEC100",58,0)
 ; Set up array by defining "null" palce holders
"RTN","EASEC100",59,0)
 F X=2:1:22 S @EASROOT2@(X)=""
"RTN","EASEC100",60,0)
 F I=3,10,17 F Z=.111:.001:.116 S @EASROOT2@(I,Z)=""
"RTN","EASEC100",61,0)
 ;
"RTN","EASEC100",62,0)
 S EASI=0,CNT=2
"RTN","EASEC100",63,0)
 I $$INSUR^IBBAPI(EASDFN,"","ARB",.DGX,"*") ; Call Insurance API for data
"RTN","EASEC100",64,0)
 M INSUR=DGX("IBBAPI","INSUR") ; Reformat insurance array into more friendly format
"RTN","EASEC100",65,0)
 F  S EASI=$O(INSUR(EASI)) Q:'EASI!(CNT>16)  D  ; Print out only first 3 entries found.
"RTN","EASEC100",66,0)
 . S @EASROOT2@(CNT+3)=$G(INSUR(EASI,13)) ; SUBSCRIBER NAME
"RTN","EASEC100",67,0)
 . S @EASROOT2@(CNT+4)=$P($G(INSUR(EASI,19)),U,2) ;relationship
"RTN","EASEC100",68,0)
 . S @EASROOT2@(CNT+5)=$G(INSUR(EASI,14)) ;policy # (SUBSCRIBER ID)
"RTN","EASEC100",69,0)
 . S @EASROOT2@(CNT+6)=$P($G(INSUR(EASI,8)),U,2) ; GROUP NAME
"RTN","EASEC100",70,0)
 .; Set Insurance Company Information
"RTN","EASEC100",71,0)
 . S @EASROOT2@(CNT)=$P($G(INSUR(EASI,1)),U,2) ; Insurance Co. Name
"RTN","EASEC100",72,0)
 . S @EASROOT2@(CNT+2)=$G(INSUR(EASI,6)) ; ins. phone
"RTN","EASEC100",73,0)
 . S @EASROOT2@((CNT+1),.111)=$G(INSUR(EASI,2)) ; INS. ADDRESS
"RTN","EASEC100",74,0)
 . S @EASROOT2@((CNT+1),.114)=$G(INSUR(EASI,3)) ; INS. CITY
"RTN","EASEC100",75,0)
 . S @EASROOT2@((CNT+1),.115)=$P($G(INSUR(EASI,4)),U,2) ; INS. STATE
"RTN","EASEC100",76,0)
 . S @EASROOT2@((CNT+1),.116)=$G(INSUR(EASI,5)) ; INS. ZIP
"RTN","EASEC100",77,0)
 .S CNT=CNT+7
"RTN","EASEC100",78,0)
 Q
"RTN","EASEC100",79,0)
INSDAT(EASINS,CNT) ;obtain insurance information from the insurance file (#36)
"RTN","EASEC100",80,0)
 Q:'EASINS
"RTN","EASEC100",81,0)
 N X,INSDAT,ERR
"RTN","EASEC100",82,0)
 D GETS^DIQ(36,EASINS_",",".01;.111:.116;.131","E","INSDAT","ERR")
"RTN","EASEC100",83,0)
 Q:$D(ERR)
"RTN","EASEC100",84,0)
 S @EASROOT2@(CNT)=$G(INSDAT(36,EASINS_",",.01,"E"))  ;insurance name
"RTN","EASEC100",85,0)
 F X=.111:.001:.116 S @EASROOT2@((CNT+1),X)=$G(INSDAT(36,EASINS_",",X,"E"))  ;insurance address
"RTN","EASEC100",86,0)
 S @EASROOT2@(CNT+2)=$G(INSDAT(36,EASINS_",",.131,"E"))  ;ins. phone
"RTN","EASEC100",87,0)
 Q
"RTN","EASEC100",88,0)
DATA3(EASDFN,EAINFO,EASROOT,DGINC) ;data for section 3
"RTN","EASEC100",89,0)
 N INFO13,DEP1,DEP,X,I,EASROOT3,SSN
"RTN","EASEC100",90,0)
 S EASROOT3=EASROOT_"3)"
"RTN","EASEC100",91,0)
 F X=0:1:11 S @EASROOT3@(X)=""
"RTN","EASEC100",92,0)
 D ALL^EASECU21(EASDFN,"SCV",EAINFO("MTDT"),"IPR",$G(EAINFO("DGMTIEN")))
"RTN","EASEC100",93,0)
 ;Marital Status added for LTC Phase IV (EAS*1*40)
"RTN","EASEC100",94,0)
 S @EASROOT3@(0)=$$GET1^DIQ(2,EASDFN,".05","E")
"RTN","EASEC100",95,0)
 S:$$GET1^DIQ(408.22,+$G(DGINR("V")),".17","I") @EASROOT3@(0)="LEGALLY SEPARATED"
"RTN","EASEC100",96,0)
 D:$D(DGREL("S"))
"RTN","EASEC100",97,0)
 .S INFO13=$G(^DGPR(408.13,+$P(DGREL("S"),"^",2),0))
"RTN","EASEC100",98,0)
 .S @EASROOT3@(1)=$P(INFO13,"^")  ;Spouse Name
"RTN","EASEC100",99,0)
 .S SSN=$P(INFO13,"^",9)          ;Spouse SSN
"RTN","EASEC100",100,0)
 .S @EASROOT3@(3)=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","EASEC100",101,0)
 .S:$G(DGINR("V")) @EASROOT3@(2)=$$GET1^DIQ(408.22,DGINR("V"),".16","E")                               ;Spouse Residing in the Community?
"RTN","EASEC100",102,0)
 Q:'$D(DGREL("C"))
"RTN","EASEC100",103,0)
 S DEP=""
"RTN","EASEC100",104,0)
 F  S DEP=$O(DGREL("C",DEP)) Q:'DEP!(DEP>2)  D
"RTN","EASEC100",105,0)
 .Q:'$D(^DGPR(408.13,+$P(DGREL("C",DEP),"^",2),0))
"RTN","EASEC100",106,0)
 .S INFO13=$G(^DGPR(408.13,+$P(DGREL("C",DEP),"^",2),0))
"RTN","EASEC100",107,0)
 .S DEP1=$S(DEP=1:4,DEP=2:8)
"RTN","EASEC100",108,0)
 .S @EASROOT3@(DEP1)=$P(INFO13,"^")                   ;Dependent Name
"RTN","EASEC100",109,0)
 .S @EASROOT3@(DEP1+1)=$$FMTE^XLFDT($P(INFO13,"^",3))  ;Dependent DOB
"RTN","EASEC100",110,0)
 .S SSN=$P(INFO13,"^",9)                               ;Dependent SSN
"RTN","EASEC100",111,0)
 .S @EASROOT3@(DEP1+2)=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","EASEC100",112,0)
 .S:$G(DGINR("C",DEP)) @EASROOT3@(DEP1+3)=$$GET1^DIQ(408.22,DGINR("C",DEP),".16","E")                  ;Dependent Living in Community?
"RTN","EASEC100",113,0)
 Q
"RTN","EASEC100",114,0)
DATA4(EASDFN,EASROOT,DGINC) ;data for section 4 and the first part of 5
"RTN","EASEC100",115,0)
 N EASROOT4,EASROOT5,ASSETV,ASSETS,NUM,X,ASSETRT,IENS,I
"RTN","EASEC100",116,0)
 S EASROOT4=EASROOT_"4)"
"RTN","EASEC100",117,0)
 S EASROOT5=EASROOT_"5)"
"RTN","EASEC100",118,0)
 ;Add subscripts to array to store assets for spouse (needed for new
"RTN","EASEC100",119,0)
 ;10-10EC form).  LTC Phase IV (EAS*1*40)
"RTN","EASEC100",120,0)
 F I=1:.5:4.5 S @EASROOT4@(I)=""
"RTN","EASEC100",121,0)
 F I=1:.5:5.5 S @EASROOT5@(I)=""
"RTN","EASEC100",122,0)
 F X="V","S" Q:'$D(DGINC(X))  D
"RTN","EASEC100",123,0)
 .D GETS^DIQ(408.21,+DGINC(X),"2.01;2.02;2.06:2.09","I","ASSET"_X)
"RTN","EASEC100",124,0)
 .S NUM=$S(X="V":1,1:1.5)
"RTN","EASEC100",125,0)
 .S IENS=+DGINC(X)_","
"RTN","EASEC100",126,0)
 .S ASSETRT="ASSET"_X_"(408.21,"_""""_IENS_""""_","
"RTN","EASEC100",127,0)
 .;Fixed Assets
"RTN","EASEC100",128,0)
 .S @EASROOT4@(NUM)=+$G(@(ASSETRT_"2.06,""I"")")) ;Residence
"RTN","EASEC100",129,0)
 .S @EASROOT4@(NUM+1)=+$G(@(ASSETRT_"2.07,""I"")")) ;Land/Farm
"RTN","EASEC100",130,0)
 .S @EASROOT4@(NUM+2)=+$G(@(ASSETRT_"2.08,""I"")")) ;Vehicles
"RTN","EASEC100",131,0)
 .;Liquid Assets
"RTN","EASEC100",132,0)
 .S @EASROOT5@(NUM)=+$G(@(ASSETRT_"2.01,""I"")")) ;Cash
"RTN","EASEC100",133,0)
 .S @EASROOT5@(NUM+1)=+$G(@(ASSETRT_"2.02,""I"")")) ;Stocks
"RTN","EASEC100",134,0)
 .S @EASROOT5@(NUM+2)=+$G(@(ASSETRT_"2.09,""I"")")) ;Other
"RTN","EASEC100",135,0)
 .;Subtotals
"RTN","EASEC100",136,0)
 .F I=NUM:1:(NUM+2) S @EASROOT4@(NUM+3)=@EASROOT4@(NUM+3)+@EASROOT4@(I),@EASROOT5@(NUM+3)=@EASROOT5@(NUM+3)+@EASROOT5@(I) ;Sub-totals
"RTN","EASEC100",137,0)
 S @EASROOT5@(5)=@EASROOT4@(4)+@EASROOT5@(4)  ;Total Assets Vet
"RTN","EASEC100",138,0)
 S @EASROOT5@(5.5)=@EASROOT4@(4.5)+@EASROOT5@(4.5)  ;Total Assets Spouse
"RTN","EASEC100",139,0)
 Q
"RTN","EASEC100",140,0)
DATA5(EASDFN,EASROOT,DGINC) ;data for section 5 (the rest of it)
"RTN","EASEC100",141,0)
 N EASROOT5,ASSETV,ASSETS,NUM,X,ASSETRT,IENS,I
"RTN","EASEC100",142,0)
 S EASROOT5=EASROOT_"5)"
"RTN","EASEC100",143,0)
 F I=6:1:35 S @EASROOT5@(I)=""
"RTN","EASEC100",144,0)
 F X="V","S" Q:'$D(DGINC(X))  D  ;
"RTN","EASEC100",145,0)
 .D GETS^DIQ(408.21,+DGINC(X),".06:.2","I","ASSET"_X)
"RTN","EASEC100",146,0)
 .S NUM=$S(X="V":6,X="S":7)
"RTN","EASEC100",147,0)
 .S IENS=+DGINC(X)_","
"RTN","EASEC100",148,0)
 .S ASSETRT="ASSET"_X_"(408.21,"_""""_IENS_""""_","
"RTN","EASEC100",149,0)
 .S @EASROOT5@(NUM)=+$G(@(ASSETRT_".14,""I"")"))    ;Gross Income
"RTN","EASEC100",150,0)
 .S @EASROOT5@(NUM+2)=+$G(@(ASSETRT_".08,""I"")"))  ;Soc. Security
"RTN","EASEC100",151,0)
 .S @EASROOT5@(NUM+4)=+$G(@(ASSETRT_".15,""I"")"))  ;Interest/Div
"RTN","EASEC100",152,0)
 .S @EASROOT5@(NUM+6)=+$G(@(ASSETRT_".06,""I"")"))  ;Retire/Pension
"RTN","EASEC100",153,0)
 .S @EASROOT5@(NUM+8)=+$G(@(ASSETRT_".09,""I"")"))  ;Civil Service
"RTN","EASEC100",154,0)
 .S @EASROOT5@(NUM+10)=+$G(@(ASSETRT_".1,""I"")"))  ;US Railroad
"RTN","EASEC100",155,0)
 .S @EASROOT5@(NUM+12)=+$G(@(ASSETRT_".07,""I"")"))  ;VA Pension
"RTN","EASEC100",156,0)
 .S @EASROOT5@(NUM+14)=+$G(@(ASSETRT_".19,""I"")"))  ;Spouse Disab
"RTN","EASEC100",157,0)
 .S @EASROOT5@(NUM+16)=+$G(@(ASSETRT_".12,""I"")"))  ;Unemployment
"RTN","EASEC100",158,0)
 .S @EASROOT5@(NUM+18)=+$G(@(ASSETRT_".16,""I"")"))  ;Workers Comp,etc
"RTN","EASEC100",159,0)
 .S @EASROOT5@(NUM+20)=+$G(@(ASSETRT_".11,""I"")"))  ;Military Retire
"RTN","EASEC100",160,0)
 .S @EASROOT5@(NUM+22)=+$G(@(ASSETRT_".13,""I"")"))  ;Other Retire
"RTN","EASEC100",161,0)
 .S @EASROOT5@(NUM+24)=+$G(@(ASSETRT_".2,""I"")"))  ;Court Mandated
"RTN","EASEC100",162,0)
 .S @EASROOT5@(NUM+26)=+$G(@(ASSETRT_".17,""I"")"))  ;Other Income
"RTN","EASEC100",163,0)
 .F I=NUM:2:NUM+26 S @EASROOT5@(NUM+28)=@EASROOT5@(NUM+28)+@EASROOT5@(I)  ;Total Income
"RTN","EASEC100",164,0)
 Q
"RTN","EASEC100",165,0)
DATA6(EASDFN,EASROOT,DGINC) ;
"RTN","EASEC100",166,0)
 N IENS,EXPRT,EASROOT6,EXPENSE
"RTN","EASEC100",167,0)
 S EASROOT6=EASROOT_"6)"
"RTN","EASEC100",168,0)
 F I=1:1:11 S @EASROOT6@(I)=""
"RTN","EASEC100",169,0)
 Q:'$G(DGINC("V"))
"RTN","EASEC100",170,0)
 D GETS^DIQ(408.21,+DGINC("V"),"1.01:1.1","I","EXPENSE")
"RTN","EASEC100",171,0)
 S IENS=+DGINC("V")_","
"RTN","EASEC100",172,0)
 S EXPRT="EXPENSE(408.21,"_""""_IENS_""""_","
"RTN","EASEC100",173,0)
 S @EASROOT6@(1)=+$G(@(EXPRT_"1.03,""I"")"))  ;Education
"RTN","EASEC100",174,0)
 S @EASROOT6@(2)=+$G(@(EXPRT_"1.02,""I"")"))  ;Funeral and Burial
"RTN","EASEC100",175,0)
 S @EASROOT6@(3)=+$G(@(EXPRT_"1.04,""I"")"))  ;Rent/Mortgage
"RTN","EASEC100",176,0)
 S @EASROOT6@(4)=+$G(@(EXPRT_"1.05,""I"")"))  ;Utilities
"RTN","EASEC100",177,0)
 S @EASROOT6@(5)=+$G(@(EXPRT_"1.06,""I"")"))  ;Car Payment
"RTN","EASEC100",178,0)
 S @EASROOT6@(6)=+$G(@(EXPRT_"1.07,""I"")"))  ;Food
"RTN","EASEC100",179,0)
 S @EASROOT6@(7)=+$G(@(EXPRT_"1.01,""I"")"))  ;Medical Expenses
"RTN","EASEC100",180,0)
 S @EASROOT6@(8)=+$G(@(EXPRT_"1.08,""I"")"))  ;Court-Ordered Payments
"RTN","EASEC100",181,0)
 S @EASROOT6@(9)=+$G(@(EXPRT_"1.09,""I"")"))  ;Insurance
"RTN","EASEC100",182,0)
 S @EASROOT6@(10)=+$G(@(EXPRT_"1.1,""I"")"))  ;Taxes (Income, etc)
"RTN","EASEC100",183,0)
 F I=1:1:10 S @EASROOT6@(11)=@EASROOT6@(11)+@EASROOT6@(I)  ;Total Expenses
"RTN","EASEC100",184,0)
 Q
"RTN","EASEC100",185,0)
DATA8(EASROOT,EAINFO) ;get the word processing field for section 8
"RTN","EASEC100",186,0)
 N LINE,X,EASROOT8,IENS,WP
"RTN","EASEC100",187,0)
 S EASROOT8=EASROOT_"8)",LINE=0
"RTN","EASEC100",188,0)
 Q:'EAINFO("DGMTIEN")
"RTN","EASEC100",189,0)
 S IENS=EAINFO("DGMTIEN")_","
"RTN","EASEC100",190,0)
 S X=$$GET1^DIQ(408.31,IENS,50,"","WP")
"RTN","EASEC100",191,0)
 F  S LINE=$O(WP(LINE)) Q:'LINE  S @EASROOT8@(LINE)=$G(WP(LINE))
"RTN","EASEC100",192,0)
 Q
"RTN","EASECSC2")
0^2^B4646116
"RTN","EASECSC2",1,0)
EASECSC2 ;ALB/PHH,LBD - LTC Copay Test Screen Insurance Information ;18 AUG 2001
"RTN","EASECSC2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,40,45**;Mar 15, 2001
"RTN","EASECSC2",3,0)
 ;
"RTN","EASECSC2",4,0)
 ; Input  -- DFN      Patient IEN
"RTN","EASECSC2",5,0)
 ;           DGMTACT  LTC Co-Pay Test Action
"RTN","EASECSC2",6,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","EASECSC2",7,0)
 ;           DGVIRI   Veteran Income Relation IEN
"RTN","EASECSC2",8,0)
 ;           DGVPRI   Veteran Patient Relation IEN
"RTN","EASECSC2",9,0)
 ; Output -- None
"RTN","EASECSC2",10,0)
 ;
"RTN","EASECSC2",11,0)
 ; ** For LTC Phase IV (EAS*1*40) this routine has been modified to
"RTN","EASECSC2",12,0)
 ;    display the patient's insurance information instead of 
"RTN","EASECSC2",13,0)
 ;    eligibility
"RTN","EASECSC2",14,0)
 ;
"RTN","EASECSC2",15,0)
EN ;Entry point
"RTN","EASECSC2",16,0)
 D ^DGRPV
"RTN","EASECSC2",17,0)
 D EASECRP5
"RTN","EASECSC2",18,0)
 S X="^3"
"RTN","EASECSC2",19,0)
 S:$$PAUSE(0) X="^"
"RTN","EASECSC2",20,0)
 K DGRP,DGRPCM,DGRPLAST,DGRPNA,DGRPS,DGRPSCE1,DGRPTYPE,DGRPU,DGRPV,DGRPVV,DGRPW,DGRPX,Z1
"RTN","EASECSC2",21,0)
 G EN1^EASECSCR
"RTN","EASECSC2",22,0)
 Q
"RTN","EASECSC2",23,0)
PAUSE(RESP) ; Prompt user for next page or quit
"RTN","EASECSC2",24,0)
 N DIR,DIRUT,DUOUT,DTOUT,I,X,Y
"RTN","EASECSC2",25,0)
 F I=$Y:1:20 W !
"RTN","EASECSC2",26,0)
 S DIR(0)="E"
"RTN","EASECSC2",27,0)
 D ^DIR
"RTN","EASECSC2",28,0)
 I 'Y S RESP=1
"RTN","EASECSC2",29,0)
 Q RESP
"RTN","EASECSC2",30,0)
 ;
"RTN","EASECSC2",31,0)
EASECRP5 ; Display the screen
"RTN","EASECSC2",32,0)
 ; Note: This section was copied from ^DGRP5 and modified specifically
"RTN","EASECSC2",33,0)
 ;       to work with LTC.
"RTN","EASECSC2",34,0)
 ;
"RTN","EASECSC2",35,0)
 S DGRPW=1,(DGRPS,DGMTSCI)=2 D HD^EASECSCU S Z=1 D WW W " Covered by Health Insurance: " S Z=$S($D(^DPT(DFN,.31)):$P(^(.31),"^",11),1:""),Z=$S(Z="Y":"YES",Z="N":"NO",Z="U":"UNKNOWN",1:"NOT ANSWERED"),Z1=15 D WW1^DGRPV
"RTN","EASECSC2",36,0)
 W ! D DISP^DGIBDSP
"RTN","EASECSC2",37,0)
 W ! S DGRPX=$G(^DPT(DFN,.38)),Z=2 D WW W " Eligible for MEDICAID: ",$S(+DGRPX:"YES",$P(DGRPX,"^",1)=0:"NO",1:DGRPU)
"RTN","EASECSC2",38,0)
 S Y=$P(DGRPX,"^",2) I Y X ^DD("DD") W "   [last updated ",Y,"]"
"RTN","EASECSC2",39,0)
 ;; *** Added for Medicaid information
"RTN","EASECSC2",40,0)
 W ! S Z=3 D WW W " Medicaid Number: ",$P(DGRPX,U,3) ;previous $S($P(DGRPX,U,3)>0:$P(DGRPX,U,3),1:"")
"RTN","EASECSC2",41,0)
 Q
"RTN","EASECSC2",42,0)
IN Q  ; 
"RTN","EASECSC2",43,0)
 ;
"RTN","EASECSC2",44,0)
WW ;Write number on screens for display and/or edit (Z=number)
"RTN","EASECSC2",45,0)
 ; NOTE: This section was copied from WW^DGRPV and modified specifically
"RTN","EASECSC2",46,0)
 ;       for LTC.  The code calling ^DGRPV has been redirected here.
"RTN","EASECSC2",47,0)
 W:DGRPW !
"RTN","EASECSC2",48,0)
 Q
"VER")
8.0^22.0
**END**
**END**

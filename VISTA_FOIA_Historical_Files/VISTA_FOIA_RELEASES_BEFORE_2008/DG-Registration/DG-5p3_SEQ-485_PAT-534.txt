$TXT Created by HOUTCHENS,THOMAS at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Friday, 10/03/03 at 09:12
=============================================================================
Run Date: DEC 18, 2003                     Designation: DG*5.3*534
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #485                    Status: Released
                  Compliance Date: JAN 18, 2004
=============================================================================


Subject: INPUT TRANSFORM/SCREEN MODIFICATON FOR MED CTR DIV FILE, INSTITUTION FIELD.

Category: 
  - Data Dictionary

Description:
============

 This Patch will modify the INPUT TRANSFORM and SCREEN on the
 INSTITUTION field (.07) of the MEDICAL CENTER DIVISION file,
 (#40.8). 
  
 ASSOCIATED E3R(S):
 ==================
  
   N/A
  
 ASSOCIATED NOIS:
 ================
  
 1. ISL-0603-50368       MEDICAL CENTER DIVISION file - ADV x-ref
  
 PARTICIPATING TEST SITES:
 =========================
 Anchorage, AK
 Charleston, SC 
 El Paso, TX
 Fayetteville, NC
 Syracuse (Upstate NY) 
  
 NOIS OVERVIEW:
 ==============
  
 1. ISL-0603-50368       MEDICAL CENTER DIVISION file - ADV x-ref
  
         PROBLEM:
         --------
  
         In a TIU patch currently at an alpha test site (TIU*1*113), an
         environment check routine which utilizes DBIA #3437 to determine
         if all entries in the MEDICAL CENTER DIVISION file have data
         in the INSTITUTION FILE POINTER field and verify that the 'ADV'
         cross reference exists has failed.
  
         During testing of a TIU patch (TIU*1*113), one of the test sites
         failed the environment check due to the failure to set the 'ADV'
         cross reference. This cross-reference was generated from entries
         in the INSTITUTION file (#4) which will require a re-indexing 
         of the MEDICAL CENTER DIVISION file (#40.8).
  
         RESOLUTION:
         -----------
  
         A modification to both the INPUT TRANSFORM and SCREEN on the
         INSTITUTION FILE POINTER field (.07) of the MEDICAL CENTER
         DIVISION file (40.8) will permit the user to select the
         correct INSTITUTION and create the appropriate 'ADV' cross
         reference.
  
         In order for TIU patch (TIU*1*113) to pass the environment check 
         routine and NOIS ISL-0603-50368 to be resolved the SCREEN and 
         INPUT TRANSFORM on field .07 of the MEDICAL CENTER DIVISION file
         (#40.8) required modification to comply with current data 
         requirements of the INSTITUTION file (#4).
         This modification removed the reference to the ^DD("SITE") and (+)
         function of the input variable.
         The INPUT TRANSFORM was also modified to correct the DIC("S") 
         screen imbedded within the INPUT TRANSFORM which requires that the 
         INSTITUTION selected equal site parameter in ^DD("SITE",1).
  
 TECHNICAL:
 ==========
 A modification of the INPUT TRANSFORM and DIC("S") SCREEN on the
 INSTITUTION File pointer field (.07) of the MEDICAL CENTER DIVISION file
 (40.8), which will permit the user to select the correct INSTITUTION and  
 create the "ADV" cross reference.
  
 ROUTINE SUMMARY:
 ================
  
         N/A
  
 FILE SUMMARY:
 =============
  
         The following file is being modified to correct a problem with a 
         setting the 'ADV' cross reference of the INSTITUTION POINTER field
         (.07) of the MEDICAL CENTER DIVISION file (40.8).
  
         BEFORE:
         =======
  
         STANDARD DATA DICTIONARY #40.8 -- MEDICAL CENTER DIVISION FILE   
  
  
 DATA          NAME                  GLOBAL        DATA
 ELEMENT       TITLE                 LOCATION      TYPE
 --------------------------------------------------------------------------
  
  
 40.8,.07      INSTITUTION FILE POINTER 0;7 POINTER TO INSTITUTION FILE 
               (#4)
                                  (Required)
  
               INPUT TRANSFORM:  S DGDD=$S($D(^DD("SITE",1)):^(1),1,0),
                                 DIC("S")="I +$$GET1^DIQ(4,+Y,99)=+DGDD
                                 D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
                                 I $D(X),$D(^DG(40.8,"AD",X)) W !,"Enter
                                 a unique pointer." K X
  
  
               LAST EDITED:      AUG 11, 2000 
               HELP-PROMPT:      Enter the institution in file #4 to which 
                                 this corresponds.
               DESCRIPTION:      Enter the entry in the institution file 
                                 that corresponds to this division. It is
                                 IMPERATIVE that you respond to this prompt
                                 properly as this affects transmission of
                                 data to Austin as well as many other
                                 statistical reports.
    
  
               SCREEN:           S DIC("S")="I +$$GET1^DIQ(4,+Y,99)=+DGDD"
               EXPLANATION:      ONLY SITES WITH APPROPRIATE STATION NUMBER
               EXECUTABLE HELP:  W !,"Each entry in the Medical Center 
                                 Division file should point to a unique
                                 entry in entry in the Institution file."
               NOTES:            XXXX--CAN'T BE ALTERED EXCEPT BY 
                                 PROGRAMMER
  
               CROSS-REFERENCE:  40.8^ADV^MUMPS 
                                 1)= S ^DG(40.8,"ADV",DA)=X
                                 2)= K ^DG(40.8,"ADV",DA)
  
               CROSS-REFERENCE:  40.8^AD 
                                 1)= S ^DG(40.8,"AD",$E(X,1,30),DA)=""
                                 2)= K ^DG(40.8,"AD",$E(X,1,30),DA)
  
  
  
       FILES POINTED TO                      FIELDS
  
 INSTITUTION (#4)                  INSTITUTION FILE POINTER (#.07)
  
         AFTER:
         ======
  
         File # 40.8             MEDICAL CENTER DIVISION
  
         STANDARD DATA DICTIONARY #40.8 -- MEDICAL CENTER DIVISION FILE   
  
         DATA          NAME                  GLOBAL        DATA
         ELEMENT       TITLE                 LOCATION      TYPE
         
 --------------------------------------------------------------------------
  
  
  
         40.8,.07      INSTITUTION FILE POINTER 0;7 POINTER TO INSTITUTION 
                       FILE (#4)
                                  (Required)
  
               INPUT TRANSFORM:  D ^DIC S X=+Y Q:$P(^DG(40.8,DA,0),U,7)=+Y
                                 K:Y<0 X I $D(X),$D(^DG(40.8,"AD",X)) W !,
                                 "Enter a unique pointer." K X
  
               LAST EDITED:      AUG 11, 2000 
               HELP-PROMPT:      Enter the institution in file #4 to 
                                 which this corresponds.
  
  
               DESCRIPTION:      Enter the entry in the institution file 
                                 that corresponds to this division. It is
                                 IMPERATIVE that you respond to this
                                 to this prompt properly as this affects
                                 transmission of data to Austin as
                                 well as many other statistical reports.
     
  
 --------------------------------------------------------------------------
  
    
               SCREEN:           S DIC("S")="I +$$GET1^DIQ(4,+Y,99)"
               EXPLANATION:      ONLY SITES WITH APPROPRIATE STATION NUMBER
               EXECUTABLE HELP:  W !,"Each entry in the Medical Center 
                                 Division file should point to a unique 
                                 entry in the Institution file." 
  
                               
               NOTES:            XXXX--CAN'T BE ALTERED EXCEPT BY 
                                 PROGRAMMER
  
               CROSS-REFERENCE:  40.8^ADV^MUMPS 
                                 1)= S ^DG(40.8,"ADV",DA)=X
                                 2)= K ^DG(40.8,"ADV",DA)
  
               CROSS-REFERENCE:  40.8^AD
                                 1)= S ^DG(40.8,"AD",$E(X,1,30),DA)=""
                                 2)= K ^DG(40.8,"AD",$E(X,1,30),DA)
  
         FILES POINTED TO                       FIELDS
  
     INSTITUTION (#4)            INSTITUTION FILE POINTER (#.07)
  
  
 DISTRIBUTION:
 =============
  
 This patch is exported using KIDS.
  
  
 INSTALLATION INSTRUCTIONS
 =========================
  
 This patch can be installed with users on the system, 
 however, entries or modifications to the MEDICAL CENTER
 DIVISION file (40.8) should not be permitted. Install
 time will be less than 1 minute.
  
                 Installation Steps:
                 ===================
  
                 1. Use the INSTALL/CHECK MESSAGE option on the PackMan
                    menu to unload the KIDS distribution included with
                    this message.
  
  
                 2. From the Kernel Installation and Distribution System
                    menu, select the Installation menu.
  
                 3. From this menu, you may elect to use the following
                    options (when prompted for INSTALL NAME, enter 
                    DG*5.3*534):
                
                    a.  Backup a Transport Global - This option will create
                        a backup message of any routines exported with this
                        patch. It will not backup any other changes such as
                        DD's or templates.
                    b.  Compare Transport Global to Current System - This 
                        option will allow you to view all changes that will
                        be made whenthis patch is installed.  It compares
                        all components of this patch (routines, DD's, 
                        templates, etc.).
                    c.  Verify Checksums in Transport Global - This option 
                        will allow you to ensure the integrity of the 
                        routines that are in the transport global.
                    d.  Print Transport Global - this option will allow
                        you to view the components of the KIDS build.
  
                 4. Use the Install Package(s) option and select the
                    package DG*5.3*534.
  
                 5. When prompted 'Want KIDS to INHIBIT LOGON's during
                    the install? YES//', respond NO.
  
                 6. When prompted 'Want to DISABLE Scheduled Options and
                    Menu Options and Protocols? YES//', respond NO.
  
 Post Installation Instructions
 ==============================
  
 The following procedure for post installation is recommended in order to
 verify that INSTITUTION POINTER entries which do not have valid STATION
 NUMBERS,(field 99 of the INSTITUTION file #4), are not pointed to by the
 INSTITUTION POINTER field of the MEDICAL CENTER DIVISION file (40.8), 
 field (.07).
 
 *********************************** NOTE *******************************
 All entries for your Site with the exception of local INSTITUTION's should
 have valid STATION numbers.
 ************************************************************************
 
         STEPS
         =====
  
         1. In VA FileMan select the   PRINT FILE ENTRIES 
  
         Example:
  
         Select OPTION: 2  PRINT FILE ENTRIES
  
         OUTPUT FROM WHAT FILE: INSTITUTION// 
         SORT BY: NAME//           
         START WITH NAME: FIRST// LOMA LINDA
         GO TO NAME: LAST// LOMA MAAA
         WITHIN NAME, SORT BY:       
         FIRST PRINT FIELD: INSTITUTION NAME  NAME
         THEN PRINT FIELD: STATION NUMBER  
         THEN PRINT FIELD: 
         Heading (S/C): INSTITUTION LIST// 
        START AT PAGE: 1// 
        DEVICE:   VIRTUAL CONNECTION    Right Margin: 80// 
       INSTITUTION LIST                          OCT  9,2003  21:17    PAGE 1
                                     STATION
      NAME                            NUMBER
      -------------------------------------------------------------------------
  
      LOMA LINDA                      605
      LOMA LINDA                      6059AA
      LOMA LINDA                      605DS
      LOMA LINDA COMMUNITY HOSPITAL   
      LOMA LINDA UNIVERSITY MED. CEN  
      LOMA LINDA VA HBGA1 CLINIC      
      LOMA LINDA VA OPERATING ROOM    
      LOMA LINDA VA PT CLINIC         
      LOMA LINDA VA PULMONARY CLINIC  
      LOMA LINDA VA RENAL LAB     
  
      2. Review the list and confirm that the INSTITUTIONS have
         valid STATION NUMBERS.
  
      3. If a STATION is either missing and not valid it must be corrected 
        before RE-INDEXing the MEDICAL CENTER DIVISION file.
  
      4. After verification that the INSTITUTION POINTER field (.07)
            of the MEDICAL CENTER DIVISION file (40.8) is correct it is
            suggested that this field be RE-INDEXED following the 
            proceed below.
  
                 Select OPTION:    UTILITY FUNCTIONS
                 Select UTILITY OPTION: RE-INDEX FILE  
  
                 MODIFY WHAT FILE: 40.8  MEDICAL CENTER DIVISION
                                               (23 entries)
  
                 THERE ARE 9 INDICES WITHIN THIS FILE
                 DO YOU WISH TO RE-CROSS-REFERENCE ON PARICULAR INDEX? 
                 No// YES (Yes) 
   
                 Select FIELD: .07  INSTITUTION FILE POINTER
  
  
                 CURRENT CROSS-REFERENCES:
                   1     MUMPS 'ADV' INDEX OF FILE
                   2     REGULAR 'AD' INDEX OF FILE 
                 WANT TO RE-CROSS-REFERENCE ONE OF THEM? No// Y  (Yes)
                 WHICH NUMBER: 1
                 ARE YOU SURE YOU WANT TO DELETE AND RE-CROSS-REFERENCE
                 THE 'ADV' INDEX? No// YES
  
                 ...EXCUSE ME, I'M WORKING AS FAST AS I CAN...
                 ...SORRY, LET ME PUT YOU ON 'HOLD' FOR A SECOND...DONE!
  

Routine Information:
====================

=============================================================================
User Information:
Entered By  : HOUTCHENS,THOMAS              Date Entered  : JUN 25, 2003
Completed By: BAUMAN,HELENE                 Date Completed: DEC 11, 2003
Released By : WASHINGTON,JANET P            Date Released : DEC 18, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

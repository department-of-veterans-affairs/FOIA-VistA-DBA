Released ECX*3*9 SEQ #9
Extracted from mail message
**KIDS**:ECX*3.0*9^

**INSTALL NAME**
ECX*3.0*9
"BLD",1315,0)
ECX*3.0*9^DSS EXTRACTS^0^^y
"BLD",1315,1,0)
^^1^1^2980715^
"BLD",1315,1,1,0)
See the Patch description for ECX*3*9 on the patch module.
"BLD",1315,4,0)
^9.64PA^727.826^3
"BLD",1315,4,727,0)
727
"BLD",1315,4,727,2,0)
^9.641^727^1
"BLD",1315,4,727,2,727,0)
DSS EXTRACT LOG  (File-top level)
"BLD",1315,4,727,2,727,1,0)
^9.6411^15^1
"BLD",1315,4,727,2,727,1,15,0)
DIVISION
"BLD",1315,4,727,222)
y^y^p^^^^n
"BLD",1315,4,727.826,0)
727.826
"BLD",1315,4,727.826,222)
y^y^f^^^^n
"BLD",1315,4,728,0)
728
"BLD",1315,4,728,2,0)
^9.641^728.059^2
"BLD",1315,4,728,2,728,0)
DSS EXTRACTS  (File-top level)
"BLD",1315,4,728,2,728,1,0)
^9.6411^60^1
"BLD",1315,4,728,2,728,1,60,0)
PROSTHETICS
"BLD",1315,4,728,2,728.059,0)
LAST DATE PROSTHETICS  (sub-file)
"BLD",1315,4,728,2,728.059,1,0)
^9.6411^^0
"BLD",1315,4,728,222)
y^y^p^^^^n
"BLD",1315,4,"APDD",727,727)

"BLD",1315,4,"APDD",727,727,15)

"BLD",1315,4,"APDD",728,728)

"BLD",1315,4,"APDD",728,728,60)

"BLD",1315,4,"APDD",728,728.059)

"BLD",1315,4,"B",727,727)

"BLD",1315,4,"B",727.826,727.826)

"BLD",1315,4,"B",728,728)

"BLD",1315,"ABPKG")
n
"BLD",1315,"INIT")
EN^ECX3P9PT
"BLD",1315,"KRN",0)
^9.67PA^19^18
"BLD",1315,"KRN",.4,0)
.4
"BLD",1315,"KRN",.401,0)
.401
"BLD",1315,"KRN",.402,0)
.402
"BLD",1315,"KRN",.403,0)
.403
"BLD",1315,"KRN",.5,0)
.5
"BLD",1315,"KRN",.84,0)
.84
"BLD",1315,"KRN",3.6,0)
3.6
"BLD",1315,"KRN",3.8,0)
3.8
"BLD",1315,"KRN",3.8,"NM",0)
^9.68A^1^1
"BLD",1315,"KRN",3.8,"NM",1,0)
DSS-PRO^^0
"BLD",1315,"KRN",3.8,"NM","B","DSS-PRO",1)

"BLD",1315,"KRN",9.2,0)
9.2
"BLD",1315,"KRN",9.8,0)
9.8
"BLD",1315,"KRN",9.8,"NM",0)
^9.68A^13^13
"BLD",1315,"KRN",9.8,"NM",1,0)
ECXPUTL^^0^B8535585
"BLD",1315,"KRN",9.8,"NM",2,0)
ECXUTL1^^0^B7432853
"BLD",1315,"KRN",9.8,"NM",3,0)
ECXTRAC^^0^B42797432
"BLD",1315,"KRN",9.8,"NM",4,0)
ECXTRANS^^0^B30235549
"BLD",1315,"KRN",9.8,"NM",5,0)
ECXPURG^^0^B14311934
"BLD",1315,"KRN",9.8,"NM",6,0)
ECXPURG1^^0^B31699725
"BLD",1315,"KRN",9.8,"NM",7,0)
ECXPRO^^0^B19836615
"BLD",1315,"KRN",9.8,"NM",8,0)
ECXPRO1^^0^B34005114
"BLD",1315,"KRN",9.8,"NM",9,0)
ECXPRO2^^0^B11331769
"BLD",1315,"KRN",9.8,"NM",10,0)
ECXAPRO^^0^B33153031
"BLD",1315,"KRN",9.8,"NM",11,0)
ECXAPRO1^^0^B74869312
"BLD",1315,"KRN",9.8,"NM",12,0)
ECXKILL^^0^B12037001
"BLD",1315,"KRN",9.8,"NM",13,0)
ECXAPRO2^^0^B26323865
"BLD",1315,"KRN",9.8,"NM","B","ECXAPRO",10)

"BLD",1315,"KRN",9.8,"NM","B","ECXAPRO1",11)

"BLD",1315,"KRN",9.8,"NM","B","ECXAPRO2",13)

"BLD",1315,"KRN",9.8,"NM","B","ECXKILL",12)

"BLD",1315,"KRN",9.8,"NM","B","ECXPRO",7)

"BLD",1315,"KRN",9.8,"NM","B","ECXPRO1",8)

"BLD",1315,"KRN",9.8,"NM","B","ECXPRO2",9)

"BLD",1315,"KRN",9.8,"NM","B","ECXPURG",5)

"BLD",1315,"KRN",9.8,"NM","B","ECXPURG1",6)

"BLD",1315,"KRN",9.8,"NM","B","ECXPUTL",1)

"BLD",1315,"KRN",9.8,"NM","B","ECXTRAC",3)

"BLD",1315,"KRN",9.8,"NM","B","ECXTRANS",4)

"BLD",1315,"KRN",9.8,"NM","B","ECXUTL1",2)

"BLD",1315,"KRN",19,0)
19
"BLD",1315,"KRN",19,"NM",0)
^9.68A^4^4
"BLD",1315,"KRN",19,"NM",1,0)
ECXPRO^^0
"BLD",1315,"KRN",19,"NM",2,0)
ECXMENU^^2
"BLD",1315,"KRN",19,"NM",3,0)
ECX PRO SOURCE AUDIT^^0
"BLD",1315,"KRN",19,"NM",4,0)
ECX SOURCE AUDITS^^2
"BLD",1315,"KRN",19,"NM","B","ECX PRO SOURCE AUDIT",3)

"BLD",1315,"KRN",19,"NM","B","ECX SOURCE AUDITS",4)

"BLD",1315,"KRN",19,"NM","B","ECXMENU",2)

"BLD",1315,"KRN",19,"NM","B","ECXPRO",1)

"BLD",1315,"KRN",19.1,0)
19.1
"BLD",1315,"KRN",101,0)
101
"BLD",1315,"KRN",409.61,0)
409.61
"BLD",1315,"KRN",771,0)
771
"BLD",1315,"KRN",869.2,0)
869.2
"BLD",1315,"KRN",870,0)
870
"BLD",1315,"KRN",8994,0)
8994
"BLD",1315,"KRN","B",.4,.4)

"BLD",1315,"KRN","B",.401,.401)

"BLD",1315,"KRN","B",.402,.402)

"BLD",1315,"KRN","B",.403,.403)

"BLD",1315,"KRN","B",.5,.5)

"BLD",1315,"KRN","B",.84,.84)

"BLD",1315,"KRN","B",3.6,3.6)

"BLD",1315,"KRN","B",3.8,3.8)

"BLD",1315,"KRN","B",9.2,9.2)

"BLD",1315,"KRN","B",9.8,9.8)

"BLD",1315,"KRN","B",19,19)

"BLD",1315,"KRN","B",19.1,19.1)

"BLD",1315,"KRN","B",101,101)

"BLD",1315,"KRN","B",409.61,409.61)

"BLD",1315,"KRN","B",771,771)

"BLD",1315,"KRN","B",869.2,869.2)

"BLD",1315,"KRN","B",870,870)

"BLD",1315,"KRN","B",8994,8994)

"BLD",1315,"QUES",0)
^9.62^^
"BLD",1315,"REQB",0)
^9.611^2^2
"BLD",1315,"REQB",1,0)
ECX*3.0*2^2
"BLD",1315,"REQB",2,0)
XU*8.0*97^2
"BLD",1315,"REQB","B","ECX*3.0*2",1)

"BLD",1315,"REQB","B","XU*8.0*97",2)

"FIA",727)
DSS EXTRACT LOG
"FIA",727,0)
^ECX(727,
"FIA",727,0,0)
727I
"FIA",727,0,1)
y^y^p^^^^n
"FIA",727,0,10)

"FIA",727,0,11)

"FIA",727,0,"RLRO")

"FIA",727,0,"VR")
3.0^ECX
"FIA",727,727)
1
"FIA",727,727,15)

"FIA",727.826)
PROSTHETICS EXTRACT
"FIA",727.826,0)
^ECX(727.826,
"FIA",727.826,0,0)
727.826
"FIA",727.826,0,1)
y^y^f^^^^n
"FIA",727.826,0,10)

"FIA",727.826,0,11)

"FIA",727.826,0,"RLRO")

"FIA",727.826,0,"VR")
3.0^ECX
"FIA",727.826,727.826)
0
"FIA",728)
DSS EXTRACTS
"FIA",728,0)
^ECX(728,
"FIA",728,0,0)
728P
"FIA",728,0,1)
y^y^p^^^^n
"FIA",728,0,10)

"FIA",728,0,11)

"FIA",728,0,"RLRO")

"FIA",728,0,"VR")
3.0^ECX
"FIA",728,728)
1
"FIA",728,728,59)

"FIA",728,728,60)

"FIA",728,728.059)
0
"INIT")
EN^ECX3P9PT
"KRN",3.8,215,-1)
0^1
"KRN",3.8,215,0)
DSS-PRO^PU^n^^^^
"KRN",3.8,215,2,0)
^^2^2^2980715^^^^
"KRN",3.8,215,2,1,0)
This Mail Group contains users responsible for DSS Extracts in general
"KRN",3.8,215,2,2,0)
and (specifically) the prosthetics extract.
"KRN",3.8,215,3)

"KRN",19,10119,-1)
2^2
"KRN",19,10119,0)
ECXMENU^Package Extracts^^M^11714^ECXMGR^^^^^^513
"KRN",19,10119,10,0)
^19.01PI^21^21
"KRN",19,10119,10,21,0)
10854^PRO^63
"KRN",19,10119,10,21,"^")
ECXPRO
"KRN",19,10119,"U")
PACKAGE EXTRACTS
"KRN",19,10149,-1)
2^4
"KRN",19,10149,0)
ECX SOURCE AUDITS^Extract Audit Reports Menu^^M^11714^^^^^^^513
"KRN",19,10149,10,0)
^19.01PI^13^13
"KRN",19,10149,10,13,0)
10855^PRO^48
"KRN",19,10149,10,13,"^")
ECX PRO SOURCE AUDIT
"KRN",19,10149,"U")
EXTRACT AUDIT REPORTS MENU
"KRN",19,10854,-1)
0^1
"KRN",19,10854,0)
ECXPRO^Prosthetics Extract^^R^^^^^^^^DSS EXTRACTS
"KRN",19,10854,1,0)
^^1^1^2980715^
"KRN",19,10854,1,1,0)
This option will execute the Prosthetics extract.
"KRN",19,10854,10.1)
Prosthetics Extract
"KRN",19,10854,25)
BEG^ECXPRO
"KRN",19,10854,"U")
PROSTHETICS EXTRACT
"KRN",19,10855,-1)
0^3
"KRN",19,10855,0)
ECX PRO SOURCE AUDIT^Prosthetics (PRO) Extract Audit^^R^^^^^^^^DSS EXTRACTS
"KRN",19,10855,1,0)
^^2^2^2980715^
"KRN",19,10855,1,1,0)
This option will generate an audit report of the prosthetics information
"KRN",19,10855,1,2,0)
that has been extracted.
"KRN",19,10855,10.1)
PRO Extract Audit
"KRN",19,10855,25)
BEGIN^ECXAPRO
"KRN",19,10855,"U")
PROSTHETICS (PRO) EXTRACT AUDI
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1
"ORD",11,3.8,0)
MAIL GROUP
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",513,-1)
1^1
"PKG",513,0)
DSS EXTRACTS^ECX^Decision Support System. (DSS)
"PKG",513,20,0)
^9.402P^^
"PKG",513,22,0)
^9.49I^1^1
"PKG",513,22,1,0)
3.0^2971222^2980112^11714
"PKG",513,22,1,"PAH",1,0)
9^2980928^11713
"PKG",513,22,1,"PAH",1,1,0)
^^1^1^2980928
"PKG",513,22,1,"PAH",1,1,1,0)
See the Patch description for ECX*3*9 on the patch module.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
14
"RTN","ECX3P9PT")
0^^B310131
"RTN","ECX3P9PT",1,0)
ECX3P9PT ;ALB/GTS - PATCH ECX*3*9 Post-Install ; July 16, 1998
"RTN","ECX3P9PT",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECX3P9PT",3,0)
 ;
"RTN","ECX3P9PT",4,0)
EN ;Entry point
"RTN","ECX3P9PT",5,0)
 ;
"RTN","ECX3P9PT",6,0)
 N ECXDIV,ECXDIVLP
"RTN","ECX3P9PT",7,0)
 S ECXDIV=$P(^ECX(728,1,0),"^",1)
"RTN","ECX3P9PT",8,0)
 S ECXDIVLP=0
"RTN","ECX3P9PT",9,0)
 F  S ECXDIVLP=$O(^ECX(727,ECXDIVLP)) Q:(+ECXDIVLP=0)  DO
"RTN","ECX3P9PT",10,0)
 .S $P(^ECX(727,ECXDIVLP,"DIV"),"^",1)=ECXDIV
"RTN","ECX3P9PT",11,0)
 Q
"RTN","ECXAPRO")
0^10^B33153031
"RTN","ECXAPRO",1,0)
ECXAPRO ;ALB/GTS - PRO Extract Audit Report ; July 20, 1998
"RTN","ECXAPRO",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXAPRO",3,0)
 ;
"RTN","ECXAPRO",4,0)
MSG(ECXGRP,ECXBDT,ECXEDT,ECXEBDT,ECXEEDT,ECINST,EC23,QFLG,ECSTAT) ;Send bulletin after extract completes
"RTN","ECXAPRO",5,0)
 ;
"RTN","ECXAPRO",6,0)
 ; Input
"RTN","ECXAPRO",7,0)
 ;  ECXGRP    - Mail Group to send bulletin to
"RTN","ECXAPRO",8,0)
 ;  ECXBDT    - FM formated Beginning Date (Set by ECXTRAC)
"RTN","ECXAPRO",9,0)
 ;  ECXEDT    - FM formated End Date (Set by ECXTRAC)
"RTN","ECXAPRO",10,0)
 ;  ECXEBDT   - Externally formated Start Date (Set by ECXTRAC)
"RTN","ECXAPRO",11,0)
 ;  ECXEEDT   - Externally formated End Date (Set by ECXTRAC)
"RTN","ECXAPRO",12,0)
 ;  ECXINST   - IEN of division (Set by ECXTRAC)
"RTN","ECXAPRO",13,0)
 ;  EC23      - 2ND & 3RD pieces of ^ECX(727.826,DA,0) (Set by ECXTRAC)
"RTN","ECXAPRO",14,0)
 ;  QFLG      - Flag (1 indicates TaskMan stop, 0 indicates continue)
"RTN","ECXAPRO",15,0)
 ;  ECSTAT    - Station number (Set by ECXTRAC)
"RTN","ECXAPRO",16,0)
 ;
"RTN","ECXAPRO",17,0)
 ; Output
"RTN","ECXAPRO",18,0)
 ;  ECXSXS    - 1 for a successful message; 0 for unsuccessful message
"RTN","ECXAPRO",19,0)
 ;
"RTN","ECXAPRO",20,0)
 N ECXSXS,ECXBUL
"RTN","ECXAPRO",21,0)
 S ECXSXS=0
"RTN","ECXAPRO",22,0)
 S ECXBUL=1
"RTN","ECXAPRO",23,0)
 D BEGIN ;* Start the HCPCS cost report bulletin generation
"RTN","ECXAPRO",24,0)
 K XMY S XMY(ECXGRP_"@"_^XMB("NETNAME"))=""
"RTN","ECXAPRO",25,0)
 S XMDUZ="DSS SYSTEM"
"RTN","ECXAPRO",26,0)
 S XMSUB=ECSTAT_" Prosthetics DSS Extract HCPCS Cost Report Message"
"RTN","ECXAPRO",27,0)
 S XMN=0
"RTN","ECXAPRO",28,0)
 S XMTEXT="^TMP(""ECX-PRO"",$J,"
"RTN","ECXAPRO",29,0)
 D ^XMD
"RTN","ECXAPRO",30,0)
 S:(+XMZ>0) ECXSXS=1
"RTN","ECXAPRO",31,0)
 K ^TMP("ECX-PRO",$J),XMDUZ,XMSUB,XMTEXT,XMY
"RTN","ECXAPRO",32,0)
 Q ECXSXS
"RTN","ECXAPRO",33,0)
 ;
"RTN","ECXAPRO",34,0)
BEGIN ;* Start the reporting process
"RTN","ECXAPRO",35,0)
 ;
"RTN","ECXAPRO",36,0)
 ; Input
"RTN","ECXAPRO",37,0)
 ;  ECXBUL    - If defined, date range is not prompted
"RTN","ECXAPRO",38,0)
 ;               (Optional - Set by MSG^ECXAPRO)
"RTN","ECXAPRO",39,0)
 ;  ECXBDT    - FM formated Beginning Date (Optional)
"RTN","ECXAPRO",40,0)
 ;               (May be passed from ECXTRAC - Prompted if not)
"RTN","ECXAPRO",41,0)
 ;  ECXEDT    - FM formated End Date (Optional)
"RTN","ECXAPRO",42,0)
 ;               (May be passed from ECXTRAC - Prompted if not)
"RTN","ECXAPRO",43,0)
 ;  ECXEBDT   - Externally formated Start Date (Optional)
"RTN","ECXAPRO",44,0)
 ;               (May be passed from ECXTRAC - Prompted if not)
"RTN","ECXAPRO",45,0)
 ;  ECXEEDT   - Externally formated End Date (Optional)
"RTN","ECXAPRO",46,0)
 ;               (May be passed from ECXTRAC - Prompted if not)
"RTN","ECXAPRO",47,0)
 ;  ECINST    - Division being extracted (Optional)
"RTN","ECXAPRO",48,0)
 ;               (May be set by ECXTRAC - Prompted if not)
"RTN","ECXAPRO",49,0)
 ;  ECXINST   - Division IEN being extracted (Optional)
"RTN","ECXAPRO",50,0)
 ;               (May be set by ECXTRAC - Prompted if not)
"RTN","ECXAPRO",51,0)
 ;  EC23      - YEARMONTH (YYYYMM) ^ Extract # (Optional)
"RTN","ECXAPRO",52,0)
 ;               (May be set by ECXTRAC)
"RTN","ECXAPRO",53,0)
 ;  QFLG      - TaskMan stop flag (Optional - may be set by ECXTRAC)
"RTN","ECXAPRO",54,0)
 ;
"RTN","ECXAPRO",55,0)
 ; Output
"RTN","ECXAPRO",56,0)
 ;  ^TMP("ECX-PRO",$J - Global if report is sent in a message (Optional)
"RTN","ECXAPRO",57,0)
 ;
"RTN","ECXAPRO",58,0)
 N ECXRNG,ECXERR
"RTN","ECXAPRO",59,0)
 S ECXPGCT=0
"RTN","ECXAPRO",60,0)
 I '$D(ECXBUL) DO
"RTN","ECXAPRO",61,0)
 .S ECXRNG=$$DTRNG^ECXUTL1()
"RTN","ECXAPRO",62,0)
 .I +ECXRNG>0 DO
"RTN","ECXAPRO",63,0)
 ..S ECXBDT=+ECXRNG
"RTN","ECXAPRO",64,0)
 ..S ECXEDT=$P(ECXRNG,"^",2)
"RTN","ECXAPRO",65,0)
 ..S ECXEBDT=$$FMTE^XLFDT(ECXBDT)
"RTN","ECXAPRO",66,0)
 ..S ECXEEDT=$$FMTE^XLFDT(ECXEDT)
"RTN","ECXAPRO",67,0)
 ..S (ECXINST,ECINST)=$$PDIV^ECXPUTL()
"RTN","ECXAPRO",68,0)
 ..S:'ECINST ECXERR=1
"RTN","ECXAPRO",69,0)
 .I +ECXRNG'>0 S ECXERR=1
"RTN","ECXAPRO",70,0)
 ;
"RTN","ECXAPRO",71,0)
 Q:($D(ECXERR))  ;*QUIT out of the middle if user doesn't answer prompts
"RTN","ECXAPRO",72,0)
 ;
"RTN","ECXAPRO",73,0)
 S ECXFYDTS=$$CYFY^ECXUTL1(ECXBDT)
"RTN","ECXAPRO",74,0)
 S ECXEBFY=$$FMTE^XLFDT($P(ECXFYDTS,"^",3))
"RTN","ECXAPRO",75,0)
 K ECXDIC S DA=ECXINST,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01"
"RTN","ECXAPRO",76,0)
 D EN^DIQ1 S ECXDIV=$G(ECXDIC(4,DA,.01,"I")) K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXAPRO",77,0)
 S:('$D(QFLG)) QFLG=0
"RTN","ECXAPRO",78,0)
 ;
"RTN","ECXAPRO",79,0)
 ;* Get Station Number
"RTN","ECXAPRO",80,0)
 I '$D(ECSTAT) DO
"RTN","ECXAPRO",81,0)
 .K ECXDIC S DA=ECXINST,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01;99"
"RTN","ECXAPRO",82,0)
 .D EN^DIQ1 S ECSTAT=$G(ECXDIC(4,DA,99,"I")) K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXAPRO",83,0)
 ;
"RTN","ECXAPRO",84,0)
 I '$D(ECXBUL) DO
"RTN","ECXAPRO",85,0)
 .S ECXRPHD1="                      Prosthetics Extract HCPCS Cost Report"
"RTN","ECXAPRO",86,0)
 .S ECXRPHD2="                      Division: "_ECXDIV
"RTN","ECXAPRO",87,0)
 .S ECXRPHD3="                      Date Range: "_ECXEBDT_" to "_ECXEEDT
"RTN","ECXAPRO",88,0)
 .S ECXETDDT=$$FMTE^XLFDT(DT)
"RTN","ECXAPRO",89,0)
 .S ECXRPHD4="                      Date Report Run: "_ECXETDDT
"RTN","ECXAPRO",90,0)
 S ECXHD1A="                      PERIOD COSTS "_ECXEBDT_" to "_ECXEEDT
"RTN","ECXAPRO",91,0)
 S ECXHD1B="                                                       Lab      Lab       Lab"
"RTN","ECXAPRO",92,0)
 S ECXHD1C="                                                       Avg      Avg       Avg"
"RTN","ECXAPRO",93,0)
 S ECXHD1D="                            Tot        Tot     Avg     Labor    Matrl     Comb"
"RTN","ECXAPRO",94,0)
 S ECXHD1E="HCPCS Code                  Qty        Cost    Cost    Cost     Cost      Cost"
"RTN","ECXAPRO",95,0)
 ;
"RTN","ECXAPRO",96,0)
 S ECXHD2A="             YEAR TO DATE COSTS "_ECXEBFY_" to "_ECXEEDT
"RTN","ECXAPRO",97,0)
 S ECXHD2B="                                                       YTD      YTD       YTD"
"RTN","ECXAPRO",98,0)
 S ECXHD2C="                                                       Lab      Lab       Lab"
"RTN","ECXAPRO",99,0)
 S ECXHD2D="                            YTD        YTD     YTD     Avg      Avg       Avg"
"RTN","ECXAPRO",100,0)
 S ECXHD2E="                            Tot        Tot     Avg     Labor    Matrl     Comb"
"RTN","ECXAPRO",101,0)
 S ECXHD2F="HCPCS Code                  Qty        Cost    Cost    Cost     Cost      Cost"
"RTN","ECXAPRO",102,0)
 I $D(ECXBUL) DO
"RTN","ECXAPRO",103,0)
 .S ^TMP("ECX-PRO",$J,1)="The DSS Prosthetic Extract #"_$P(EC23,"^",2)_" for "_ECXEBDT_" through "_ECXEEDT
"RTN","ECXAPRO",104,0)
 .S ^TMP("ECX-PRO",$J,2)=" has completed.  The following is provided for the HCPCS costs."
"RTN","ECXAPRO",105,0)
 .S ^TMP("ECX-PRO",$J,3)=" "
"RTN","ECXAPRO",106,0)
 .S ^TMP("ECX-PRO",$J,4)=ECXHD1A
"RTN","ECXAPRO",107,0)
 .S ^TMP("ECX-PRO",$J,5)=" "
"RTN","ECXAPRO",108,0)
 .S ^TMP("ECX-PRO",$J,6)=ECXHD1B
"RTN","ECXAPRO",109,0)
 .S ^TMP("ECX-PRO",$J,7)=ECXHD1C
"RTN","ECXAPRO",110,0)
 .S ^TMP("ECX-PRO",$J,8)=ECXHD1D
"RTN","ECXAPRO",111,0)
 .S ^TMP("ECX-PRO",$J,9)=ECXHD1E
"RTN","ECXAPRO",112,0)
 .S ECXTMPCT=10
"RTN","ECXAPRO",113,0)
 .;
"RTN","ECXAPRO",114,0)
 .D DTRNGRPT^ECXAPRO2 ;* Report Date Range information
"RTN","ECXAPRO",115,0)
 .;
"RTN","ECXAPRO",116,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=" "
"RTN","ECXAPRO",117,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",118,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=" "
"RTN","ECXAPRO",119,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",120,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=ECXHD2A
"RTN","ECXAPRO",121,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",122,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=" "
"RTN","ECXAPRO",123,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",124,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=" "
"RTN","ECXAPRO",125,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",126,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=ECXHD2B
"RTN","ECXAPRO",127,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",128,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=ECXHD2C
"RTN","ECXAPRO",129,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",130,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=ECXHD2D
"RTN","ECXAPRO",131,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",132,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=ECXHD2E
"RTN","ECXAPRO",133,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",134,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=ECXHD2F
"RTN","ECXAPRO",135,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",136,0)
 .S ^TMP("ECX-PRO",$J,ECXTMPCT)=" "
"RTN","ECXAPRO",137,0)
 .S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO",138,0)
 .;
"RTN","ECXAPRO",139,0)
 .D YTDRPT^ECXAPRO1
"RTN","ECXAPRO",140,0)
 .;
"RTN","ECXAPRO",141,0)
 .D VARKIL^ECXAPRO1
"RTN","ECXAPRO",142,0)
 ;
"RTN","ECXAPRO",143,0)
 I '$D(ECXBUL) DO
"RTN","ECXAPRO",144,0)
 .S %ZIS="AEQ"
"RTN","ECXAPRO",145,0)
 .S %ZIS("A")="Output device: "
"RTN","ECXAPRO",146,0)
 .D ^%ZIS
"RTN","ECXAPRO",147,0)
 .I POP D VARKIL^ECXAPRO1
"RTN","ECXAPRO",148,0)
 .I 'POP DO
"RTN","ECXAPRO",149,0)
 ..I $D(IO("Q")) DO
"RTN","ECXAPRO",150,0)
 ...S ZTRTN="ECXARPT^ECXAPRO1",ZTIO=ION
"RTN","ECXAPRO",151,0)
 ...S ZTDESC="DSS Prosthetics HCPCS Cost Report"
"RTN","ECXAPRO",152,0)
 ...N ECXI
"RTN","ECXAPRO",153,0)
 ...F ECXI="ECSTAT","ECXFYDTS","ECXEBFY","ECXRPHD*","ECXETDDT","ECXHD*","ECXDIV","ECINST","ECXINST","ECXBDT","ECXEDT","ECXEBDT","ECXEEDT","ECXBFY","ECXPGCT","QFLG" S ZTSAVE(ECXI)=""
"RTN","ECXAPRO",154,0)
 ...D ^%ZTLOAD
"RTN","ECXAPRO",155,0)
 ...I $D(ZTSK) W !!,"HCPCS Report Queued",!! K ZTSK
"RTN","ECXAPRO",156,0)
 ..I '$D(IO("Q")) DO ECXARPT^ECXAPRO1
"RTN","ECXAPRO",157,0)
 .D ^%ZISC
"RTN","ECXAPRO",158,0)
 Q
"RTN","ECXAPRO1")
0^11^B74869312
"RTN","ECXAPRO1",1,0)
ECXAPRO1 ;ALB/GTS -  PRO Extract Audit Report (Cont) ; July 20, 1998
"RTN","ECXAPRO1",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXAPRO1",3,0)
 ;
"RTN","ECXAPRO1",4,0)
DTRGHD ;* Output the date range report heading
"RTN","ECXAPRO1",5,0)
 ; Input
"RTN","ECXAPRO1",6,0)
 ;  ECXRPHD1
"RTN","ECXAPRO1",7,0)
 ;  ECXRPHD2
"RTN","ECXAPRO1",8,0)
 ;  ECXRPHD3
"RTN","ECXAPRO1",9,0)
 ;  ECXRPHD4  - Intro heading lines for Date Range Report (not bulletin)
"RTN","ECXAPRO1",10,0)
 ;
"RTN","ECXAPRO1",11,0)
 ; Output
"RTN","ECXAPRO1",12,0)
 ;  ECXPGCT - Page counter value
"RTN","ECXAPRO1",13,0)
 ;
"RTN","ECXAPRO1",14,0)
 I $E(IOST)="C" D
"RTN","ECXAPRO1",15,0)
 .S SS=22-$Y F JJ=1:1:SS W !
"RTN","ECXAPRO1",16,0)
 .I ECXPGCT>0 S DIR(0)="E" W ! D ^DIR K DIR S:'Y QFLG=1
"RTN","ECXAPRO1",17,0)
 I QFLG=0 DO
"RTN","ECXAPRO1",18,0)
 .W:$Y!($E(IOST)="C") @IOF
"RTN","ECXAPRO1",19,0)
 .S ECXPGCT=ECXPGCT+1
"RTN","ECXAPRO1",20,0)
 .W !,?68,"Page: ",ECXPGCT,!
"RTN","ECXAPRO1",21,0)
 .W !,ECXRPHD1
"RTN","ECXAPRO1",22,0)
 .W !,ECXRPHD2
"RTN","ECXAPRO1",23,0)
 .W !,ECXRPHD3
"RTN","ECXAPRO1",24,0)
 .W !,ECXRPHD4,!!
"RTN","ECXAPRO1",25,0)
 .W !,ECXHD1A,!
"RTN","ECXAPRO1",26,0)
 .W !,ECXHD1B
"RTN","ECXAPRO1",27,0)
 .W !,ECXHD1C
"RTN","ECXAPRO1",28,0)
 .W !,ECXHD1D
"RTN","ECXAPRO1",29,0)
 .W !,ECXHD1E,!
"RTN","ECXAPRO1",30,0)
 Q
"RTN","ECXAPRO1",31,0)
 ;
"RTN","ECXAPRO1",32,0)
DTRGRPT(ECXLINE) ;* Report a line of Date Range text
"RTN","ECXAPRO1",33,0)
 ;
"RTN","ECXAPRO1",34,0)
 ; Input
"RTN","ECXAPRO1",35,0)
 ;  ECXLINE - A line of text to report
"RTN","ECXAPRO1",36,0)
 ;
"RTN","ECXAPRO1",37,0)
 D:($Y+2)>IOSL DTRGHD
"RTN","ECXAPRO1",38,0)
 W !,ECXLINE
"RTN","ECXAPRO1",39,0)
 Q
"RTN","ECXAPRO1",40,0)
 ;
"RTN","ECXAPRO1",41,0)
YTDLINE(ECXLINE) ;* Report a line of YTD text
"RTN","ECXAPRO1",42,0)
 ;
"RTN","ECXAPRO1",43,0)
 ; Input
"RTN","ECXAPRO1",44,0)
 ;  ECXLINE - A line of text to report
"RTN","ECXAPRO1",45,0)
 ;
"RTN","ECXAPRO1",46,0)
 D:($Y+2)>IOSL YTDHD
"RTN","ECXAPRO1",47,0)
 W !,ECXLINE
"RTN","ECXAPRO1",48,0)
 Q
"RTN","ECXAPRO1",49,0)
 ;
"RTN","ECXAPRO1",50,0)
TMP(ECXLINE) ;* Add a line to the TMP global for the HCPCS cost report bulletin
"RTN","ECXAPRO1",51,0)
 ;
"RTN","ECXAPRO1",52,0)
 ; Input
"RTN","ECXAPRO1",53,0)
 ;  ECXLINE  - A line of output for the HCPCS Cost report bulletin
"RTN","ECXAPRO1",54,0)
 ;  ECXTMPCT - The value of the current line for the TMP global
"RTN","ECXAPRO1",55,0)
 ;
"RTN","ECXAPRO1",56,0)
 ; Output
"RTN","ECXAPRO1",57,0)
 ;  ^TMP("ECX-PRO",$J - Global for HCPCS report bulletin
"RTN","ECXAPRO1",58,0)
 ;  ECXTMPCT - The value of the next line in the TMP global
"RTN","ECXAPRO1",59,0)
 ;
"RTN","ECXAPRO1",60,0)
 S ^TMP("ECX-PRO",$J,ECXTMPCT)=ECXLINE
"RTN","ECXAPRO1",61,0)
 S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO1",62,0)
 Q
"RTN","ECXAPRO1",63,0)
 ;
"RTN","ECXAPRO1",64,0)
YTDRPT ;* Create a report/bulletin of fiscal year to date prosthetics work
"RTN","ECXAPRO1",65,0)
 ;
"RTN","ECXAPRO1",66,0)
 ; Input
"RTN","ECXAPRO1",67,0)
 ;  ECXBUL    - If defined, date range is not prompted
"RTN","ECXAPRO1",68,0)
 ;               (Optional - Set by MSG^ECXAPRO)
"RTN","ECXAPRO1",69,0)
 ;  ECXFYDTS  - FM formated Calendar & Fiscal year beginning & end dates
"RTN","ECXAPRO1",70,0)
 ;  ECXEBFY   - Externally formated Begin Date (KILLed by calling rtn)
"RTN","ECXAPRO1",71,0)
 ;  ECXEDT    - FM formated End Date (KILLed by calling rtn)
"RTN","ECXAPRO1",72,0)
 ;  ECXEBDT   - Externally formated Start Date
"RTN","ECXAPRO1",73,0)
 ;  ECXEEDT   - Externally formated End Date (KILLed by calling rtn)
"RTN","ECXAPRO1",74,0)
 ;  ECXTMPCT  - Set if a bulletin is to be sent (KILLed by calling rtn)
"RTN","ECXAPRO1",75,0)
 ;  ECSTAT    - Station number of selected division to report
"RTN","ECXAPRO1",76,0)
 ;  QFLG      - TaskMan stop flag
"RTN","ECXAPRO1",77,0)
 ;  ^TMP("ECX-PRO",$J - Global if report is sent in a message (Optional)
"RTN","ECXAPRO1",78,0)
 ;
"RTN","ECXAPRO1",79,0)
 ; Output
"RTN","ECXAPRO1",80,0)
 ;  ^TMP("ECX-PRO",$J - Global if report is sent in a message (Optional)
"RTN","ECXAPRO1",81,0)
 ;
"RTN","ECXAPRO1",82,0)
 N ECXINFO
"RTN","ECXAPRO1",83,0)
 I QFLG=0 DO
"RTN","ECXAPRO1",84,0)
 .I '$D(ECXBUL) S ECX1ST="" D YTDHD K ECX1ST
"RTN","ECXAPRO1",85,0)
 .N ECXLPGRP,ECXLPPCE,ECXPRDA,ECXCPTDA,ECXCPT,ECXN0
"RTN","ECXAPRO1",86,0)
 .N ECXQTY,ECXCTRA,ECXLLC,ECXLMC,ECXPRDA,ECXLINE,ECXSPC1,ECXSPC2,ECXSPC3
"RTN","ECXAPRO1",87,0)
 .N ECXSPC4,ECXSPC5,ECXSPC6,ECXLAMC,ECXLALC,ECXLPEND,ECXCGRPR
"RTN","ECXAPRO1",88,0)
 .;
"RTN","ECXAPRO1",89,0)
 .;*Total the HCPCS costs for reporting
"RTN","ECXAPRO1",90,0)
 .S ECXLPDT=$$ECXYM^ECXUTL($P(ECXFYDTS,"^",3))
"RTN","ECXAPRO1",91,0)
 .S ECXLPDT=$$ECXDATE^ECXUTL($P(ECXFYDTS,"^",3),ECXLPDT)-1
"RTN","ECXAPRO1",92,0)
 .S ECXLPEND=$$ECXYM^ECXUTL(ECXEDT)
"RTN","ECXAPRO1",93,0)
 .S ECXLPEND=$$ECXDATE^ECXUTL(ECXEDT,ECXLPEND)
"RTN","ECXAPRO1",94,0)
 .F  S ECXLPDT=$O(^ECX(727.826,"AG",ECXLPDT)) Q:(ECXLPDT>ECXLPEND)  Q:(+ECXLPDT=0)  Q:(QFLG=1)  DO
"RTN","ECXAPRO1",95,0)
 ..S ECXLPGRP=""
"RTN","ECXAPRO1",96,0)
 ..F  S ECXLPGRP=$O(^ECX(727.826,"AG",ECXLPDT,ECXLPGRP)) Q:(ECXLPGRP="")  Q:(QFLG=1)  DO
"RTN","ECXAPRO1",97,0)
 ...S ECXLPPCE=""
"RTN","ECXAPRO1",98,0)
 ...F  S ECXLPPCE=$O(^ECX(727.826,"AG",ECXLPDT,ECXLPGRP,ECXLPPCE)) Q:(ECXLPPCE="")  Q:(QFLG=1)  DO
"RTN","ECXAPRO1",99,0)
 ....S ECXPRDA=""
"RTN","ECXAPRO1",100,0)
 ....F  S ECXPRDA=$O(^ECX(727.826,"AG",ECXLPDT,ECXLPGRP,ECXLPPCE,ECXPRDA)) Q:(+ECXPRDA=0)  Q:(QFLG=1)  DO
"RTN","ECXAPRO1",101,0)
 .....S ECXN0=$G(^ECX(727.826,ECXPRDA,0))
"RTN","ECXAPRO1",102,0)
 .....I ECSTAT=$E($$STRIP^ECXUTL1($P(ECXN0,"^",4),5,"B"),1,3) DO
"RTN","ECXAPRO1",103,0)
 ......S ECXINFO=1
"RTN","ECXAPRO1",104,0)
 ......S ECXCPT=$$STRIP^ECXUTL1(ECXLPPCE,8,"B") ;* Remove blanks
"RTN","ECXAPRO1",105,0)
 ......S ECXCPTDA=$O(^ICPT("B",ECXCPT,""))
"RTN","ECXAPRO1",106,0)
 ......;
"RTN","ECXAPRO1",107,0)
 ......;*Set up variables of data to report
"RTN","ECXAPRO1",108,0)
 ......S ECXCDNME=$P(^ICPT(ECXCPTDA,0),"^",1)_" "_$P(^ICPT(ECXCPTDA,0),"^",2)
"RTN","ECXAPRO1",109,0)
 ......S ECXQTY=$$STRIP^ECXUTL1($P(ECXN0,"^",12),4,"F")
"RTN","ECXAPRO1",110,0)
 ......S ECXCTRA=$$STRIP^ECXUTL1($P(ECXN0,"^",21),9,"F")
"RTN","ECXAPRO1",111,0)
 ......S ECXLLC=$$STRIP^ECXUTL1($P(ECXN0,"^",22),7,"F")
"RTN","ECXAPRO1",112,0)
 ......S ECXLMC=$$STRIP^ECXUTL1($P(ECXN0,"^",23),7,"F")
"RTN","ECXAPRO1",113,0)
 ......;
"RTN","ECXAPRO1",114,0)
 ......;*Total Quantity, Pros. cost, Lab Labor cost and Lab Mat. cost
"RTN","ECXAPRO1",115,0)
 ......I $D(^TMP("ECX-HCPCS",$J,ECXCDNME,"QTY")) DO
"RTN","ECXAPRO1",116,0)
 .......S ^TMP("ECX-HCPCS",$J,ECXCDNME,"QTY")=^TMP("ECX-HCPCS",$J,ECXCDNME,"QTY")+ECXQTY
"RTN","ECXAPRO1",117,0)
 ......I '$D(^TMP("ECX-HCPCS",$J,ECXCDNME,"QTY")) DO
"RTN","ECXAPRO1",118,0)
 .......S ^TMP("ECX-HCPCS",$J,ECXCDNME,"QTY")=ECXQTY
"RTN","ECXAPRO1",119,0)
 ......I $D(^TMP("ECX-HCPCS",$J,ECXCDNME,"TRAN COST")) DO
"RTN","ECXAPRO1",120,0)
 .......S ^TMP("ECX-HCPCS",$J,ECXCDNME,"TRAN COST")=^TMP("ECX-HCPCS",$J,ECXCDNME,"TRAN COST")+ECXCTRA
"RTN","ECXAPRO1",121,0)
 ......I '$D(^TMP("ECX-HCPCS",$J,ECXCDNME,"TRAN COST")) DO
"RTN","ECXAPRO1",122,0)
 .......S ^TMP("ECX-HCPCS",$J,ECXCDNME,"TRAN COST")=ECXCTRA
"RTN","ECXAPRO1",123,0)
 ......I $D(^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB LABOR")) DO
"RTN","ECXAPRO1",124,0)
 .......S ^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB LABOR")=^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB LABOR")+ECXLLC
"RTN","ECXAPRO1",125,0)
 ......I '$D(^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB LABOR")) DO
"RTN","ECXAPRO1",126,0)
 .......S ^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB LABOR")=ECXLLC
"RTN","ECXAPRO1",127,0)
 ......I $D(^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB MAT")) DO
"RTN","ECXAPRO1",128,0)
 .......S ^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB MAT")=^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB MAT")+ECXLMC
"RTN","ECXAPRO1",129,0)
 ......I '$D(^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB MAT")) DO
"RTN","ECXAPRO1",130,0)
 .......S ^TMP("ECX-HCPCS",$J,ECXCDNME,"LAB MAT")=ECXLMC
"RTN","ECXAPRO1",131,0)
 ......I $D(ZTQUEUED),$$S^%ZTLOAD S ZTSTOP=1 K ZTREQ S QFLG=1
"RTN","ECXAPRO1",132,0)
 ;
"RTN","ECXAPRO1",133,0)
 ;*Report YTD totals
"RTN","ECXAPRO1",134,0)
 I QFLG=0 DO
"RTN","ECXAPRO1",135,0)
 .N ECXAVCT,ECXLALC,ECXLAMC,ECXLACCT,ECXCDNLP
"RTN","ECXAPRO1",136,0)
 .S ECXCDNLP=""
"RTN","ECXAPRO1",137,0)
 .F  S ECXCDNLP=$O(^TMP("ECX-HCPCS",$J,ECXCDNLP)) Q:(ECXCDNLP="")  Q:(QFLG=1)  DO
"RTN","ECXAPRO1",138,0)
 ..S ECXQTY=^TMP("ECX-HCPCS",$J,ECXCDNLP,"QTY")
"RTN","ECXAPRO1",139,0)
 ..S ECXCTRA=^TMP("ECX-HCPCS",$J,ECXCDNLP,"TRAN COST")
"RTN","ECXAPRO1",140,0)
 ..S ECXLLC=^TMP("ECX-HCPCS",$J,ECXCDNLP,"LAB LABOR")
"RTN","ECXAPRO1",141,0)
 ..S ECXLMC=^TMP("ECX-HCPCS",$J,ECXCDNLP,"LAB MAT")
"RTN","ECXAPRO1",142,0)
 ..;
"RTN","ECXAPRO1",143,0)
 ..;Get Average Total Cost
"RTN","ECXAPRO1",144,0)
 ..S:(ECXQTY>0) ECXAVCT=$S(+$P((ECXCTRA/ECXQTY),".",1)>0:$P((ECXCTRA/ECXQTY),".",1),1:"0")_"."_$E($P((ECXCTRA/ECXQTY),".",2),1,2)
"RTN","ECXAPRO1",145,0)
 ..S:(ECXQTY=0) ECXAVCT="0.00"
"RTN","ECXAPRO1",146,0)
 ..S:($L($P(ECXAVCT,".",2))<2) $P(ECXAVCT,".",2)=$$PAD^ECXUTL1($P(ECXAVCT,".",2),2,"B","0")
"RTN","ECXAPRO1",147,0)
 ..;
"RTN","ECXAPRO1",148,0)
 ..;*Get Lab Average Labor Cost
"RTN","ECXAPRO1",149,0)
 ..S:(ECXQTY>0) ECXLALC=$S(+$P((ECXLLC/ECXQTY),".",1)>0:$P((ECXLLC/ECXQTY),".",1),1:"0")_"."_$E($P((ECXLLC/ECXQTY),".",2),1,2)
"RTN","ECXAPRO1",150,0)
 ..S:(ECXQTY=0) ECXLALC="0.00"
"RTN","ECXAPRO1",151,0)
 ..S:($L($P(ECXLALC,".",2))<2) $P(ECXLALC,".",2)=$$PAD^ECXUTL1($P(ECXLALC,".",2),2,"B","0")
"RTN","ECXAPRO1",152,0)
 ..;
"RTN","ECXAPRO1",153,0)
 ..;*Get Lab Average Material Cost
"RTN","ECXAPRO1",154,0)
 ..S:(ECXQTY>0) ECXLAMC=$S(+$P((ECXLMC/ECXQTY),".",1)>0:$P((ECXLMC/ECXQTY),".",1),1:"0")_"."_$E($P((ECXLMC/ECXQTY),".",2),1,2)
"RTN","ECXAPRO1",155,0)
 ..S:(ECXQTY=0) ECXLAMC="0.00"
"RTN","ECXAPRO1",156,0)
 ..S:($L($P(ECXLAMC,".",2))<2) $P(ECXLAMC,".",2)=$$PAD^ECXUTL1($P(ECXLAMC,".",2),2,"B","0")
"RTN","ECXAPRO1",157,0)
 ..;
"RTN","ECXAPRO1",158,0)
 ..;*Get Lab Average Combined Cost
"RTN","ECXAPRO1",159,0)
 ..S:(ECXQTY>0) ECXLACCT=$S(+$P(((ECXLLC+ECXLMC)/ECXQTY),".",1)>0:$P(((ECXLLC+ECXLMC)/ECXQTY),".",1),1:"0")_"."_$E($P(((ECXLLC+ECXLMC)/ECXQTY),".",2),1,2)
"RTN","ECXAPRO1",160,0)
 ..S:(ECXQTY=0) ECXLACCT="0.00"
"RTN","ECXAPRO1",161,0)
 ..S:($L($P(ECXLACCT,".",2))<2) $P(ECXLACCT,".",2)=$$PAD^ECXUTL1($P(ECXLACCT,".",2),2,"B","0")
"RTN","ECXAPRO1",162,0)
 ..;
"RTN","ECXAPRO1",163,0)
 ..;*Format Total Cost
"RTN","ECXAPRO1",164,0)
 ..S:(ECXCTRA=0) ECXCTRA="0.00"
"RTN","ECXAPRO1",165,0)
 ..S:(+ECXCTRA>0) ECXCTRA=$S(+$P(ECXCTRA,".",1)>0:$P(ECXCTRA,".",1),1:"0")_"."_$E($P(ECXCTRA,".",2),1,2)
"RTN","ECXAPRO1",166,0)
 ..S:($L($P(ECXCTRA,".",2))<2) $P(ECXCTRA,".",2)=$$PAD^ECXUTL1($P(ECXCTRA,".",2),2,"B","0")
"RTN","ECXAPRO1",167,0)
 ..;
"RTN","ECXAPRO1",168,0)
 ..;*Set up a Line of text to report
"RTN","ECXAPRO1",169,0)
 ..S ECXCDNME=$E(ECXCDNLP,1,25)
"RTN","ECXAPRO1",170,0)
 ..S (ECXSPC1,ECXSPC2,ECXSPC3,ECXSPC4,ECXSPC5,ECXSPC6)=""
"RTN","ECXAPRO1",171,0)
 ..S $P(ECXSPC1," ",((28-$L(ECXCDNME))+(4-$L(ECXQTY))))=""
"RTN","ECXAPRO1",172,0)
 ..S $P(ECXSPC2," ",(13-$L(ECXCTRA)))=""
"RTN","ECXAPRO1",173,0)
 ..S $P(ECXSPC3," ",(10-$L(ECXAVCT)))=""
"RTN","ECXAPRO1",174,0)
 ..S $P(ECXSPC4," ",(9-$L(ECXLALC)))=""
"RTN","ECXAPRO1",175,0)
 ..S $P(ECXSPC5," ",(10-$L(ECXLAMC)))=""
"RTN","ECXAPRO1",176,0)
 ..S $P(ECXSPC6," ",(10-$L(ECXLACCT)))=""
"RTN","ECXAPRO1",177,0)
 ..S ECXLINE=ECXCDNME_ECXSPC1_ECXQTY_ECXSPC2_ECXCTRA_ECXSPC3_ECXAVCT_ECXSPC4_ECXLALC_ECXSPC5_ECXLAMC_ECXSPC6_ECXLACCT
"RTN","ECXAPRO1",178,0)
 ..;
"RTN","ECXAPRO1",179,0)
 ..;*Output the line
"RTN","ECXAPRO1",180,0)
 ..D:($D(ECXBUL)) TMP(ECXLINE)
"RTN","ECXAPRO1",181,0)
 ..D:('$D(ECXBUL)) YTDLINE(ECXLINE)
"RTN","ECXAPRO1",182,0)
 ..I $D(ZTQUEUED),$$S^%ZTLOAD S ZTSTOP=1 K ZTREQ S QFLG=1
"RTN","ECXAPRO1",183,0)
 ;
"RTN","ECXAPRO1",184,0)
 ;* Output message when Queued report is aborted
"RTN","ECXAPRO1",185,0)
 I QFLG=1 DO
"RTN","ECXAPRO1",186,0)
 .I $D(ECXBUL) DO
"RTN","ECXAPRO1",187,0)
 ..S ^TMP("ECX-PRO",$J,ECXTMPCT)=" "
"RTN","ECXAPRO1",188,0)
 ..S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO1",189,0)
 ..S ^TMP("ECX-PRO",$J,ECXTMPCT)=" Year to Date Report was aborted"
"RTN","ECXAPRO1",190,0)
 ..S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO1",191,0)
 .I '$D(ECXBUL) DO
"RTN","ECXAPRO1",192,0)
 ..W !!," Year to Date Report was aborted",!
"RTN","ECXAPRO1",193,0)
 ;
"RTN","ECXAPRO1",194,0)
 ;*Output Nothing to Report message when appropriate
"RTN","ECXAPRO1",195,0)
 I '$D(ECXINFO),(QFLG=0) DO
"RTN","ECXAPRO1",196,0)
 .I $D(ECXBUL) DO
"RTN","ECXAPRO1",197,0)
 ..S ^TMP("ECX-PRO",$J,ECXTMPCT)=" "
"RTN","ECXAPRO1",198,0)
 ..S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO1",199,0)
 ..S ^TMP("ECX-PRO",$J,ECXTMPCT)=" Nothing to Report"
"RTN","ECXAPRO1",200,0)
 ..S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO1",201,0)
 .I '$D(ECXBUL) W !!," Nothing to Report"
"RTN","ECXAPRO1",202,0)
 I $E(IOST)="C" D
"RTN","ECXAPRO1",203,0)
 .S SS=22-$Y F JJ=1:1:SS W !
"RTN","ECXAPRO1",204,0)
 .I ECXPGCT>0 S DIR(0)="E" W ! D ^DIR K DIR S:'Y QFLG=1
"RTN","ECXAPRO1",205,0)
 W:'$D(ECXBUL) @IOF
"RTN","ECXAPRO1",206,0)
 K ^TMP("ECX-HCPCS",$J)
"RTN","ECXAPRO1",207,0)
 Q
"RTN","ECXAPRO1",208,0)
 ;
"RTN","ECXAPRO1",209,0)
YTDHD ;* Output the report header for the Year to Date report
"RTN","ECXAPRO1",210,0)
 ;
"RTN","ECXAPRO1",211,0)
 ; Input
"RTN","ECXAPRO1",212,0)
 ;  ECXHD2A
"RTN","ECXAPRO1",213,0)
 ;  ECXHD2B
"RTN","ECXAPRO1",214,0)
 ;  ECXHD2C
"RTN","ECXAPRO1",215,0)
 ;  ECXHD2D
"RTN","ECXAPRO1",216,0)
 ;  ECXHD2E
"RTN","ECXAPRO1",217,0)
 ;  ECXHD2F  - Intro heading lines for Date Range Report (not bulletin)
"RTN","ECXAPRO1",218,0)
 ;  ECXPGCT  - Page counter value
"RTN","ECXAPRO1",219,0)
 ;
"RTN","ECXAPRO1",220,0)
 ; Output
"RTN","ECXAPRO1",221,0)
 ;  ECXPGCT  - Page counter value
"RTN","ECXAPRO1",222,0)
 ;
"RTN","ECXAPRO1",223,0)
 I $E(IOST)="C",'$D(ECX1ST) D
"RTN","ECXAPRO1",224,0)
 .S SS=22-$Y F JJ=1:1:SS W !
"RTN","ECXAPRO1",225,0)
 .I ECXPGCT>0 S DIR(0)="E" W ! D ^DIR K DIR S:'Y QFLG=1
"RTN","ECXAPRO1",226,0)
 I QFLG=0 DO
"RTN","ECXAPRO1",227,0)
 .W:$Y!($E(IOST)="C") @IOF
"RTN","ECXAPRO1",228,0)
 .S ECXPGCT=ECXPGCT+1
"RTN","ECXAPRO1",229,0)
 .W !,?68,"Page: ",ECXPGCT,!
"RTN","ECXAPRO1",230,0)
 .W !,ECXHD2A,!!
"RTN","ECXAPRO1",231,0)
 .W !,ECXHD2B
"RTN","ECXAPRO1",232,0)
 .W !,ECXHD2C
"RTN","ECXAPRO1",233,0)
 .W !,ECXHD2D
"RTN","ECXAPRO1",234,0)
 .W !,ECXHD2E
"RTN","ECXAPRO1",235,0)
 .W !,ECXHD2F,!
"RTN","ECXAPRO1",236,0)
 Q
"RTN","ECXAPRO1",237,0)
 ;
"RTN","ECXAPRO1",238,0)
ECXARPT ;* HCPCS Cost Report control tag
"RTN","ECXAPRO1",239,0)
 D DTRNGRPT^ECXAPRO2
"RTN","ECXAPRO1",240,0)
 I $E(IOST)="C",('QFLG) D
"RTN","ECXAPRO1",241,0)
 .S SS=22-$Y F JJ=1:1:SS W !
"RTN","ECXAPRO1",242,0)
 .I ECXPGCT>0 S DIR(0)="E" W ! D ^DIR K DIR S:'Y QFLG=1
"RTN","ECXAPRO1",243,0)
 D YTDRPT
"RTN","ECXAPRO1",244,0)
 D VARKIL
"RTN","ECXAPRO1",245,0)
 Q
"RTN","ECXAPRO1",246,0)
 ;
"RTN","ECXAPRO1",247,0)
VARKIL ;* Cleanup the variables from the report
"RTN","ECXAPRO1",248,0)
 K ECXFYDTS,ECXEBFY,ECXRPHD1,ECXRPHD2,ECXRPHD3,ECXPGCT
"RTN","ECXAPRO1",249,0)
 K ECXETDDT,ECXRPHD4,ECXHD1A,ECXHD1B,ECXHD1C,ECXHD2A,ECXHD2B,ECXHD2C
"RTN","ECXAPRO1",250,0)
 K ECXDIV,ECXHD,ECXHD1D,ECXHD1E,ECXHD2D,ECXHD2E,ECXHD2F
"RTN","ECXAPRO1",251,0)
 I '$D(ECXBUL) K ECINST,ECXBDT,ECXEDT,ECXEBDT,ECXEEDT,QFLG,ECSTAT
"RTN","ECXAPRO1",252,0)
 Q
"RTN","ECXAPRO2")
0^13^B26323865
"RTN","ECXAPRO2",1,0)
ECXAPRO2 ;ALB/GTS - PRO Extract Audit Report ; July 20, 1998
"RTN","ECXAPRO2",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXAPRO2",3,0)
 ;
"RTN","ECXAPRO2",4,0)
DTRNGRPT ;* Report Date range information
"RTN","ECXAPRO2",5,0)
 ;
"RTN","ECXAPRO2",6,0)
 ; Input
"RTN","ECXAPRO2",7,0)
 ;  ECXBUL    - Indicates a bulletin to be sent (KILLed by calling rtn)
"RTN","ECXAPRO2",8,0)
 ;  ECXBDT    - FM formated Beginning Date (KILLed by calling rtn)
"RTN","ECXAPRO2",9,0)
 ;  ECXEDT    - FM formated End Date (KILLed by calling rtn)
"RTN","ECXAPRO2",10,0)
 ;  ECXTMPCT  - Set if a bulletin is to be sent (KILLed by calling rtn)
"RTN","ECXAPRO2",11,0)
 ;  ECSTAT    - Station number of extract records to report
"RTN","ECXAPRO2",12,0)
 ;  ^TMP("ECX-PRO",$J - Global if report is sent in a message (Optional)
"RTN","ECXAPRO2",13,0)
 ;
"RTN","ECXAPRO2",14,0)
 ; Output
"RTN","ECXAPRO2",15,0)
 ;  ^TMP("ECX-PRO",$J - Global if report is sent in a message (Optional)
"RTN","ECXAPRO2",16,0)
 ;
"RTN","ECXAPRO2",17,0)
 N ECXINFO,ECXLPDT,ECXLPGRP,ECXLPPCE,ECXCDNME,ECXCPTDA,ECXCPT,ECXN0
"RTN","ECXAPRO2",18,0)
 N ECXQTY,ECXCTRA,ECXLLC,ECXLMC,ECXPRDA,ECXLINE,ECXSPC1,ECXSPC2,ECXSPC3
"RTN","ECXAPRO2",19,0)
 N ECXSPC4,ECXSPC5,ECXSPC6,ECXLAMC,ECXLALC,ECXLPEND,ECXCGRPR
"RTN","ECXAPRO2",20,0)
 I '$D(ECXBUL) DO
"RTN","ECXAPRO2",21,0)
 .U IO
"RTN","ECXAPRO2",22,0)
 .D DTRGHD^ECXAPRO1
"RTN","ECXAPRO2",23,0)
 S ECXCGRPR=""
"RTN","ECXAPRO2",24,0)
 S ECXLPDT=$$ECXYM^ECXUTL(ECXBDT)
"RTN","ECXAPRO2",25,0)
 S ECXLPDT=$$ECXDATE^ECXUTL(ECXBDT,ECXLPDT)-1
"RTN","ECXAPRO2",26,0)
 S ECXLPEND=$$ECXYM^ECXUTL(ECXEDT)
"RTN","ECXAPRO2",27,0)
 S ECXLPEND=$$ECXDATE^ECXUTL(ECXEDT,ECXLPEND)
"RTN","ECXAPRO2",28,0)
 F  S ECXLPDT=$O(^ECX(727.826,"AG",ECXLPDT)) Q:(ECXLPDT>ECXLPEND)  Q:(+ECXLPDT=0)  Q:(QFLG=1)  DO
"RTN","ECXAPRO2",29,0)
 .S ECXLPGRP=""
"RTN","ECXAPRO2",30,0)
 .F  S ECXLPGRP=$O(^ECX(727.826,"AG",ECXLPDT,ECXLPGRP)) Q:(ECXLPGRP="")  Q:(QFLG=1)  DO
"RTN","ECXAPRO2",31,0)
 ..S ECXLPPCE=""
"RTN","ECXAPRO2",32,0)
 ..F  S ECXLPPCE=$O(^ECX(727.826,"AG",ECXLPDT,ECXLPGRP,ECXLPPCE)) Q:(ECXLPPCE="")  Q:(QFLG=1)  DO
"RTN","ECXAPRO2",33,0)
 ...S ECXPRDA=""
"RTN","ECXAPRO2",34,0)
 ...F  S ECXPRDA=$O(^ECX(727.826,"AG",ECXLPDT,ECXLPGRP,ECXLPPCE,ECXPRDA)) Q:(+ECXPRDA=0)  Q:(QFLG=1)  DO
"RTN","ECXAPRO2",35,0)
 ....S ECXN0=$G(^ECX(727.826,ECXPRDA,0))
"RTN","ECXAPRO2",36,0)
 ....I ECSTAT=$E($$STRIP^ECXUTL1($P(ECXN0,"^",4),5,"B"),1,3) DO
"RTN","ECXAPRO2",37,0)
 .....S ECXINFO=1
"RTN","ECXAPRO2",38,0)
 .....S ECXCPT=$$STRIP^ECXUTL1(ECXLPPCE,8,"B") ;* Remove blanks
"RTN","ECXAPRO2",39,0)
 .....S ECXCPTDA=$O(^ICPT("B",ECXCPT,""))
"RTN","ECXAPRO2",40,0)
 .....I ECXLPGRP'=ECXCGRPR DO
"RTN","ECXAPRO2",41,0)
 ......S ECXCGRPR=ECXLPGRP
"RTN","ECXAPRO2",42,0)
 ......D:($D(ECXBUL)) TMP^ECXAPRO1(" ")
"RTN","ECXAPRO2",43,0)
 ......D:('$D(ECXBUL)) DTRGRPT^ECXAPRO1(" ")
"RTN","ECXAPRO2",44,0)
 .....I QFLG=0 DO
"RTN","ECXAPRO2",45,0)
 ......;
"RTN","ECXAPRO2",46,0)
 ......;*Set up variables of data to report
"RTN","ECXAPRO2",47,0)
 ......S ECXCDNME=$P(^ICPT(ECXCPTDA,0),"^",1)_" "_$P(^ICPT(ECXCPTDA,0),"^",2)
"RTN","ECXAPRO2",48,0)
 ......S ECXQTY=$$STRIP^ECXUTL1($P(ECXN0,"^",12),4,"F")
"RTN","ECXAPRO2",49,0)
 ......S ECXCTRA=$$STRIP^ECXUTL1($P(ECXN0,"^",21),9,"F")
"RTN","ECXAPRO2",50,0)
 ......S ECXLLC=$$STRIP^ECXUTL1($P(ECXN0,"^",22),7,"F")
"RTN","ECXAPRO2",51,0)
 ......S ECXLMC=$$STRIP^ECXUTL1($P(ECXN0,"^",23),7,"F")
"RTN","ECXAPRO2",52,0)
 ......;
"RTN","ECXAPRO2",53,0)
 ......;Get Average Total Cost
"RTN","ECXAPRO2",54,0)
 ......S:(ECXQTY>0) ECXAVCT=$S(+$P((ECXCTRA/ECXQTY),".",1)>0:$P((ECXCTRA/ECXQTY),".",1),1:"0")_"."_$E($P((ECXCTRA/ECXQTY),".",2),1,2)
"RTN","ECXAPRO2",55,0)
 ......S:(ECXQTY=0) ECXAVCT="0.00"
"RTN","ECXAPRO2",56,0)
 ......S:($L($P(ECXAVCT,".",2))<2) $P(ECXAVCT,".",2)=$$PAD^ECXUTL1($P(ECXAVCT,".",2),2,"B","0")
"RTN","ECXAPRO2",57,0)
 ......;
"RTN","ECXAPRO2",58,0)
 ......;*Get Lab Average Labor Cost
"RTN","ECXAPRO2",59,0)
 ......S:(ECXQTY>0) ECXLALC=$S(+$P((ECXLLC/ECXQTY),".",1)>0:$P((ECXLLC/ECXQTY),".",1),1:"0")_"."_$E($P((ECXLLC/ECXQTY),".",2),1,2)
"RTN","ECXAPRO2",60,0)
 ......S:(ECXQTY=0) ECXLALC="0.00"
"RTN","ECXAPRO2",61,0)
 ......S:($L($P(ECXLALC,".",2))<2) $P(ECXLALC,".",2)=$$PAD^ECXUTL1($P(ECXLALC,".",2),2,"B","0")
"RTN","ECXAPRO2",62,0)
 ......;
"RTN","ECXAPRO2",63,0)
 ......;*Get Lab Average Material Cost
"RTN","ECXAPRO2",64,0)
 ......S:(ECXQTY>0) ECXLAMC=$S(+$P((ECXLMC/ECXQTY),".",1)>0:$P((ECXLMC/ECXQTY),".",1),1:"0")_"."_$E($P((ECXLMC/ECXQTY),".",2),1,2)
"RTN","ECXAPRO2",65,0)
 ......S:(ECXQTY=0) ECXLAMC="0.00"
"RTN","ECXAPRO2",66,0)
 ......S:($L($P(ECXLAMC,".",2))<2) $P(ECXLAMC,".",2)=$$PAD^ECXUTL1($P(ECXLAMC,".",2),2,"B","0")
"RTN","ECXAPRO2",67,0)
 ......;
"RTN","ECXAPRO2",68,0)
 ......;*Get Lab Average Combined Cost
"RTN","ECXAPRO2",69,0)
 ......S:(ECXQTY>0) ECXLACCT=$S(+$P(((ECXLLC+ECXLMC)/ECXQTY),".",1)>0:$P(((ECXLLC+ECXLMC)/ECXQTY),".",1),1:"0")_"."_$E($P(((ECXLLC+ECXLMC)/ECXQTY),".",2),1,2)
"RTN","ECXAPRO2",70,0)
 ......S:(ECXQTY=0) ECXLACCT="0.00"
"RTN","ECXAPRO2",71,0)
 ......S:($L($P(ECXLACCT,".",2))<2) $P(ECXLACCT,".",2)=$$PAD^ECXUTL1($P(ECXLACCT,".",2),2,"B","0")
"RTN","ECXAPRO2",72,0)
 ......;
"RTN","ECXAPRO2",73,0)
 ......;*Format Total Cost
"RTN","ECXAPRO2",74,0)
 ......S:(ECXCTRA=0) ECXCTRA="0.00"
"RTN","ECXAPRO2",75,0)
 ......S:(+ECXCTRA>0) ECXCTRA=$S(+$P(ECXCTRA,".",1)>0:$P(ECXCTRA,".",1),1:"0")_"."_$E($P(ECXCTRA,".",2),1,2)
"RTN","ECXAPRO2",76,0)
 ......S:($L($P(ECXCTRA,".",2))<2) $P(ECXCTRA,".",2)=$$PAD^ECXUTL1($P(ECXCTRA,".",2),2,"B","0")
"RTN","ECXAPRO2",77,0)
 ......;
"RTN","ECXAPRO2",78,0)
 ......;*Set up a Line of text to report
"RTN","ECXAPRO2",79,0)
 ......S ECXCDNME=$E(ECXCDNME,1,25)
"RTN","ECXAPRO2",80,0)
 ......S (ECXSPC1,ECXSPC2,ECXSPC3,ECXSPC4,ECXSPC5,ECXSPC6)=""
"RTN","ECXAPRO2",81,0)
 ......S $P(ECXSPC1," ",((28-$L(ECXCDNME))+(4-$L(ECXQTY))))=""
"RTN","ECXAPRO2",82,0)
 ......S $P(ECXSPC2," ",(13-$L(ECXCTRA)))=""
"RTN","ECXAPRO2",83,0)
 ......S $P(ECXSPC3," ",(10-$L(ECXAVCT)))=""
"RTN","ECXAPRO2",84,0)
 ......S $P(ECXSPC4," ",(9-$L(ECXLALC)))=""
"RTN","ECXAPRO2",85,0)
 ......S $P(ECXSPC5," ",(10-$L(ECXLAMC)))=""
"RTN","ECXAPRO2",86,0)
 ......S $P(ECXSPC6," ",(10-$L(ECXLACCT)))=""
"RTN","ECXAPRO2",87,0)
 ......S ECXLINE=ECXCDNME_ECXSPC1_ECXQTY_ECXSPC2_ECXCTRA_ECXSPC3_ECXAVCT_ECXSPC4_ECXLALC_ECXSPC5_ECXLAMC_ECXSPC6_ECXLACCT
"RTN","ECXAPRO2",88,0)
 ......;
"RTN","ECXAPRO2",89,0)
 ......;*Output the line
"RTN","ECXAPRO2",90,0)
 ......D:($D(ECXBUL)) TMP^ECXAPRO1(ECXLINE)
"RTN","ECXAPRO2",91,0)
 ......D:('$D(ECXBUL)) DTRGRPT^ECXAPRO1(ECXLINE)
"RTN","ECXAPRO2",92,0)
 ......I $D(ZTQUEUED),$$S^%ZTLOAD S ZTSTOP=1 K ZTREQ S QFLG=1
"RTN","ECXAPRO2",93,0)
 ;
"RTN","ECXAPRO2",94,0)
 ;*Output message when queued report is aborted
"RTN","ECXAPRO2",95,0)
 I QFLG=1 DO
"RTN","ECXAPRO2",96,0)
 .I $D(ECXBUL) DO
"RTN","ECXAPRO2",97,0)
 ..S ^TMP("ECX-PRO",$J,ECXTMPCT)=" "
"RTN","ECXAPRO2",98,0)
 ..S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO2",99,0)
 ..S ^TMP("ECX-PRO",$J,ECXTMPCT)=" Period Report was aborted"
"RTN","ECXAPRO2",100,0)
 ..S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO2",101,0)
 .I '$D(ECXBUL) DO
"RTN","ECXAPRO2",102,0)
 ..W !!," Period Report was aborted",!
"RTN","ECXAPRO2",103,0)
 ;
"RTN","ECXAPRO2",104,0)
 ;*Output Nothing to Report message when appropriate
"RTN","ECXAPRO2",105,0)
 I '$D(ECXINFO) DO
"RTN","ECXAPRO2",106,0)
 .I $D(ECXBUL) DO
"RTN","ECXAPRO2",107,0)
 ..S ^TMP("ECX-PRO",$J,ECXTMPCT)=" "
"RTN","ECXAPRO2",108,0)
 ..S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO2",109,0)
 ..S ^TMP("ECX-PRO",$J,ECXTMPCT)=" Nothing to Report"
"RTN","ECXAPRO2",110,0)
 ..S ECXTMPCT=ECXTMPCT+1
"RTN","ECXAPRO2",111,0)
 .I '$D(ECXBUL) DO
"RTN","ECXAPRO2",112,0)
 ..W !!," Nothing to Report"
"RTN","ECXAPRO2",113,0)
 ..I $E(IOST)="C" D
"RTN","ECXAPRO2",114,0)
 ...S SS=22-$Y F JJ=1:1:SS W !
"RTN","ECXAPRO2",115,0)
 ...S DIR(0)="E" W ! D ^DIR K DIR S:'Y QFLG=1
"RTN","ECXAPRO2",116,0)
 Q
"RTN","ECXKILL")
0^12^B12037001
"RTN","ECXKILL",1,0)
ECXKILL ;BIR/DMA,PTD-Kill Local Variables ; 02/06/97 10:25 [ 03/27/97  12:43 PM ]
"RTN","ECXKILL",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXKILL",3,0)
 K %,%DT,%Y,%ZIS,A,A1,A2,ABR,B,BY,D,D0,D1,DA,DAT,DATA,DATA1,DATA2,DATA6,DATAOP,DD,DFN,DHDH,DIC,DIE,DIK,DINUM,DIQ
"RTN","ECXKILL",4,0)
 K DIR,DIRUT,DO,DOB,DR,DTOUT,DUOUT,EC,EC0,EC1,EC10,EC11,EC16,EC2,EC23,EC2NODE,EC3,EC42,EC50,EC6,EC7,ECA,ECAC,ECACA,ECAD,ECADM,ECALL
"RTN","ECXKILL",5,0)
 K ECANE,ECAO,ECARG,ECAS,ECAT,ECATSV,ECB,ECC,ECCA,ECCAN,ECCAT,ECCH,ECCN,ECCNT,ECCS,ECCSC,ECD,ECD0,ECD1,ECDA,ECDAL,ECDAT
"RTN","ECXKILL",6,0)
 K ECDATA,ECDATA1,ECDATE,ECDEN,ECDEX,ECDF,ECDFN,ECDFN0,ECDI,ECDIA,ECDIF,ECDIV,ECDL,ECDN,ECDNEW,ECDO,ECDOC,ECDR,ECDRG,ECDS,ECDSSU,ECDT,ECDTTM
"RTN","ECXKILL",7,0)
 K ECDU,ECEC0,ECED,ECED1,ECEDN,ECEDNEW,ECF,ECF1,ECFD,ECFDT,ECFILE,ECFK,ECFL,ECFR,ECGRP,ECH,ECHD,ECHEAD,ECI,ECID,ECIEN,ECIFN,ECIN
"RTN","ECXKILL",8,0)
 K ECINST,ECINV,ECIV,ECJ,ECK,ECL,ECL1,ECLAN,ECLAST,ECLDT,ECLINK,ECLIST,ECLL,ECLN,ECLOC,ECLRN,ECLX,ECLY,ECM,ECMAX,ECMIN
"RTN","ECXKILL",9,0)
 K ECXMISS,ECMN,ECMOD,ECMODS,ECMORE,ECMS,ECMSG,ECMSN,ECMT,ECMW,ECMY,ECN,ECNA,ECNDC,ECNDF,ECNFC,ECNL,ECNO,ECNODE,ECNOGO
"RTN","ECXKILL",10,0)
 K ECNT,ECO,ECO0,ECO1,ECO2,ECOB,ECODE,ECODE0,ECODE1,ECOLD,ECONE,ECOPAY,ECOPAYT,ECORTY,ECOS,ECP,ECPACK,ECPCE,ECPCE1,ECPCE2,ECPCE3,ECPCE4,ECPCE5,ECPCE6,ECPCE7,ECPIECE,ECPN,ECPRC,ECPRO
"RTN","ECXKILL",11,0)
 K ECPROF,ECPT,ECPTF,ECPTPR,ECPTTM,ECQ,ECQT,ECQTY,ECRD,ECRE,ECRED,ECREF,ECRFL,ECRN,ECROU,ECRR,ECRS,ECRSD,ECRTN,ECRX,ECS,ECSA,ECSC
"RTN","ECXKILL",12,0)
 K ECSD,ECSD1,ECSDN,ECSN,ECSR,ECSS,ECST,ECSTOP,ECSU,ECT,ECT1,ECTD,ECTD1,ECTEMP,ECTM,ECTNTL,ECTOTAL,ECTREAT,ECTRT,ECTS,ECTY,ECU,ECU2,ECU2A
"RTN","ECXKILL",13,0)
 K ECU3,ECU3A,ECUD,ECUI,ECUN,ECUN1,ECUNIT,ECURG,ECUT,ECUT2,ECUT3,ECV,ECW,ECWC,ECWD,ECX,ECXB,ECXLNCNT,ECXMDA,ECXMDT,ECXNOW,ECXQUEUE,ECXS,ECXSTART
"RTN","ECXKILL",14,0)
 K ECY,ECYM,ECZ,ECZNODE,ELIG,ENL,FAC,FLDS,FR,I,ID,IOP,J,K,L,LOC,LOS,LRDFN,NAM,OPC,P,P1,P11,P2,P3,POP,Q,RACE,RD,RESP,QFLG
"RTN","ECXKILL",15,0)
 K SC,SRDA,SRNM,SSN,STC,SU,TEN,TES,TIME,TO,TOT,VAERR,VAIP,VET,W,WTO,X,X1,X2,XMDUZ,XMER,XMFROM,XMREC,XMRG,XMSER,XMSUB
"RTN","ECXKILL",16,0)
 K XMTEXT,XMY,XMZ,XQMSG,XQSOP,XQSUB,XX,Y,ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE,ZTSK,ECSTA,ECCTY,STATE,COUNTY,ECVER
"RTN","ECXKILL",17,0)
 K ECCPT,ECEKG,ECICD,ECPROV,ECREC,ECVAL,ECVIS,NCNTR,PTADT,STOP,ECIVRM,ECOR,ECWK,ECWKLD,LREDT,LRSDT,FD,ECHL,ECARSC
"RTN","ECXKILL",18,0)
 K ECDTST,ECLTST,ECODE2,ECORDT,ECORTM,ECRDDT,ECRDTM,ECRES,ECWCDA,ECXINST,ECX2TME
"RTN","ECXKILL",19,0)
 ;
"RTN","ECXKILL",20,0)
AUDIT ;kill audit report variables
"RTN","ECXKILL",21,0)
 K ECX,ECXARRAY,ECXACC,ECXALL,ECXAUD,ECXD,ECXDEF,ECXDESC,ECXDIV
"RTN","ECXKILL",22,0)
 K ECXEND,ECXERR,ECXEXT,ECXHEAD,ECXLOC,ECXPGM,ECXRUN,ECXSAVE,ECXSTART
"RTN","ECXKILL",23,0)
 K IO("Q"),POP,DIR,DIC,DIE,DA,DR,DO,DIRUT,DUOUT,DTOUT
"RTN","ECXKILL",24,0)
 K ^TMP($J,"ECXORDER"),^TMP($J,"ECXWARD"),^TMP($J,"ECXAUD"),^TMP($J,"MOV"),^TMP($J,"TL"),^TMP($J,"ECXPROC"),^TMP($J,"ECXTS"),^TMP($J,"ECXFL"),^TMP($J,"ECXSPEC"),^TMP($J,"ECXPATS")
"RTN","ECXKILL",25,0)
 Q
"RTN","ECXPRO")
0^7^B19836615
"RTN","ECXPRO",1,0)
ECXPRO ;ALB/GTS - Prosthetics Extract for DSS ; July 16, 1998
"RTN","ECXPRO",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXPRO",3,0)
BEG ;entry point from option
"RTN","ECXPRO",4,0)
 D SETUP
"RTN","ECXPRO",5,0)
 I +ECINST>0 D ^ECXTRAC
"RTN","ECXPRO",6,0)
 D ^ECXKILL
"RTN","ECXPRO",7,0)
 Q
"RTN","ECXPRO",8,0)
 ;
"RTN","ECXPRO",9,0)
START ;start package specific extract
"RTN","ECXPRO",10,0)
 ;
"RTN","ECXPRO",11,0)
 ; Input
"RTN","ECXPRO",12,0)
 ;  ECSD1   - FM formated Beginning Date (Set by ECXTRAC)
"RTN","ECXPRO",13,0)
 ;  ECED    - FM formated End Date (Set by ECXTRAC)
"RTN","ECXPRO",14,0)
 ;  ECSDN   - Externally formated Start Date (Set by ECXTRAC)
"RTN","ECXPRO",15,0)
 ;  ECEDN   - Externally formated End Date (Set by ECXTRAC)
"RTN","ECXPRO",16,0)
 ;  EC      - IEN from file #727 (Set by ECXTRAC)
"RTN","ECXPRO",17,0)
 ;  ECXYM   - Year and Month of extract (YYYYMM)
"RTN","ECXPRO",18,0)
 ;  ECXINST - IEN for division of selected institution
"RTN","ECXPRO",19,0)
 ;  ECINST  - Station number of selected division
"RTN","ECXPRO",20,0)
 ;
"RTN","ECXPRO",21,0)
 N ECXLNE,ECXCT,ECXDACT,ECX0,ECXLB,ECXED1,ECINSTSV,ECXLNSTR
"RTN","ECXPRO",22,0)
 D ECXBUL^ECXPRO2(.ECXLNE,ECSDN,ECEDN,EC)
"RTN","ECXPRO",23,0)
 S ECXLNSTR=ECXLNE
"RTN","ECXPRO",24,0)
 S ECXED1=ECED+.9999
"RTN","ECXPRO",25,0)
 S ECXCT=ECSD1
"RTN","ECXPRO",26,0)
 F  S ECXCT=$O(^RMPR(660,"CT",ECXCT)) Q:(ECXCT>ECXED1)  Q:(+ECXCT=0)  Q:(QFLG=1)  DO
"RTN","ECXPRO",27,0)
 .S ECXDACT=0
"RTN","ECXPRO",28,0)
 .F  S ECXDACT=$O(^RMPR(660,"CT",ECXCT,ECXDACT)) Q:(+ECXDACT=0)  Q:(QFLG=1)  DO
"RTN","ECXPRO",29,0)
 ..S ECX0=$G(^RMPR(660,ECXDACT,0))
"RTN","ECXPRO",30,0)
 ..S ECXLB=$G(^RMPR(660,ECXDACT,"LB"))
"RTN","ECXPRO",31,0)
 ..I $$NTEG^ECXPRO1(.ECXLNE,ECXDACT,ECX0,ECXLB,ECINST) DO
"RTN","ECXPRO",32,0)
 ...D PROSINFO^ECXPRO1(ECXDACT,ECXLB,ECX0) ;*Prosthetics Info
"RTN","ECXPRO",33,0)
 ...D PATINFO^ECXPRO1(ECXCT) ;*Patient Info
"RTN","ECXPRO",34,0)
 ...D FEEDINFO^ECXPRO2(ECXSRCE,ECXHCPCS,ECXTYPE,ECXSTAT,ECXRQST,ECXRCST,ECXFORM) ;*Feeder Info
"RTN","ECXPRO",35,0)
 ...;
"RTN","ECXPRO",36,0)
 ...S ECINSTSV=$$PAD^ECXUTL1(ECXSTAT,5,"B"," ")
"RTN","ECXPRO",37,0)
 ...S ECXNA=$$PAD^ECXUTL1(ECXNA,4,"B"," ")
"RTN","ECXPRO",38,0)
 ...S ECXDTSVC=$$ECXDATE^ECXUTL(ECXDTSVC,ECXYM)
"RTN","ECXPRO",39,0)
 ...S ECXQTY=$$PAD^ECXUTL1(ECXQTY,4,"F"," ")
"RTN","ECXPRO",40,0)
 ...S ECXPCT=$$PAD^ECXUTL1(ECXPCT,10,"F"," ")
"RTN","ECXPRO",41,0)
 ...S:(+ECXPCP>0) ECXPCP=$$PAD^ECXUTL1("2"_ECXPCP,11,"F"," ")
"RTN","ECXPRO",42,0)
 ...S:(+ECXPCP=0) ECXPCP="           "
"RTN","ECXPRO",43,0)
 ...S ECXHCPCS=$$PAD^ECXUTL1(ECXHCPCS,8,"B"," ")
"RTN","ECXPRO",44,0)
 ...S ECXRQST=$$PAD^ECXUTL1(ECXRQST,5,"B"," ")
"RTN","ECXPRO",45,0)
 ...S ECXRCST=$$PAD^ECXUTL1(ECXRCST,5,"B"," ")
"RTN","ECXPRO",46,0)
 ...S ECXELIG=$$PAD^ECXUTL1(ECXELIG,3,"F"," ")
"RTN","ECXPRO",47,0)
 ...S ECXDOB=$$ECXDOB^ECXUTL(ECXDOB)
"RTN","ECXPRO",48,0)
 ...S ECXCTAMT=$$PAD^ECXUTL1(ECXCTAMT,9,"F"," ")
"RTN","ECXPRO",49,0)
 ...S ECXLLC=$$PAD^ECXUTL1(ECXLLC,7,"F"," ")
"RTN","ECXPRO",50,0)
 ...S ECXLMC=$$PAD^ECXUTL1(ECXLMC,7,"F"," ")
"RTN","ECXPRO",51,0)
 ...S ECXFELOC=$$PAD^ECXUTL1(ECXFELOC,9,"B"," ")
"RTN","ECXPRO",52,0)
 ...S ECXFEKEY=$$PAD^ECXUTL1(ECXFEKEY,20,"B"," ")
"RTN","ECXPRO",53,0)
 ...;
"RTN","ECXPRO",54,0)
 ...;* Set the Placeholder variables
"RTN","ECXPRO",55,0)
 ...S (ECXICD9,ECXPCHD1,ECXMPI,ECXPCNPI,ECXDEPT)=""
"RTN","ECXPRO",56,0)
 ...;
"RTN","ECXPRO",57,0)
 ...;* Set the NODE variables (ECODE and ECODE1)
"RTN","ECXPRO",58,0)
 ...S ECODE=ECINSTSV_"^"_DFN_"^"_ECXSSN_"^"_ECXNA_"^"_ECXIOPT_"^"_ECXDTSVC_"^"_ECXFELOC_"^"
"RTN","ECXPRO",59,0)
 ...S ECODE=ECODE_ECXFEKEY_"^"_ECXQTY_"^"_ECXPCT_"^"_ECXPCP_"^"_ECXHCPCS_"^"_ECXICD9_"^"
"RTN","ECXPRO",60,0)
 ...S ECODE=ECODE_ECXAO_"^"_ECXRE_"^"_ECXEC_"^"_ECXELIG_"^"_ECXCTAMT_"^"_ECXLLC_"^"_ECXLMC_"^"
"RTN","ECXPRO",61,0)
 ...S ECODE=ECODE_ECXBILST_"^"_ECXVET_"^"_ECXTYPE_"^"_ECXRQST_"^"_ECXRCST_"^"_ECXPCHD1
"RTN","ECXPRO",62,0)
 ...S ECODE1=ECXZIP_"^"_ECXDOB_"^"_ECXSEX_"^"_ECXGRPR_"^"_ECXPCNPI_"^"_ECXMPI_"^"_ECXDEPT
"RTN","ECXPRO",63,0)
 ...S EC7=-$O(^ECX(ECFILE,"AINV",""))
"RTN","ECXPRO",64,0)
 ...F  S EC7=EC7+1 Q:'$D(^ECX(ECFILE,EC7))
"RTN","ECXPRO",65,0)
 ...S ^ECX(ECFILE,EC7,0)=EC7_"^"_EC23_"^"_ECODE
"RTN","ECXPRO",66,0)
 ...S ^ECX(ECFILE,EC7,1)=ECODE1
"RTN","ECXPRO",67,0)
 ...S ECRN=ECRN+1
"RTN","ECXPRO",68,0)
 ...S DA=EC7,DIK="^ECX("_ECFILE_"," D IX^DIK K DIK,DA
"RTN","ECXPRO",69,0)
 ...I $D(ZTQUEUED),(ECRN>499),'(ECRN#500),$$S^%ZTLOAD S QFLG=1
"RTN","ECXPRO",70,0)
 ...;
"RTN","ECXPRO",71,0)
 ...;* Reinitialize variables
"RTN","ECXPRO",72,0)
 ...S (DFN,ECXNA,ECXSSN,ECXSTAT,ECXDTSVC,ECXTYPE,ECXSRCE,ECXHCPCS,ECXRQST)=""
"RTN","ECXPRO",73,0)
 ...S (ECXRCST,ECXFORM,ECXCTAMT,ECXLLC,ECXLMC,ECXGRPR,ECXBILST,ECXQTY,ECODE)=""
"RTN","ECXPRO",74,0)
 ...S (ECXFELOC,ECXFEKEY,ECODE1,ECXSEX)=""
"RTN","ECXPRO",75,0)
 ...S (ECXIOPT,ECXPCT,ECXPCP,ECXAO,ECXRE,ECXEC,ECXELIG,ECXVET,ECXZIP,ECXDOB)=""
"RTN","ECXPRO",76,0)
 ;
"RTN","ECXPRO",77,0)
 ;* Send the Exception message
"RTN","ECXPRO",78,0)
 I ECXLNSTR<ECXLNE DO
"RTN","ECXPRO",79,0)
 .K XMY S XMY("G.DSS-"_ECGRP_"@"_^XMB("NETNAME"))=""
"RTN","ECXPRO",80,0)
 .S XMDUZ=.5
"RTN","ECXPRO",81,0)
 .S XMSUB=ECINST_" - Prosthetics DSS Exception Message",XMN=0
"RTN","ECXPRO",82,0)
 .S XMTEXT="^TMP(""ECX-PRO EXC"",$J,"
"RTN","ECXPRO",83,0)
 .D ^XMD
"RTN","ECXPRO",84,0)
 K ^TMP("ECX-PRO EXC",$J),XMDUZ,XMSUB,XMTEXT,XMY
"RTN","ECXPRO",85,0)
 ;
"RTN","ECXPRO",86,0)
CLEAN ;* Cleanup variables
"RTN","ECXPRO",87,0)
 K DFN,ECXNA,ECXSSN,ECXSTAT,ECXDTSVC,ECXTYPE,ECXSRCE,ECXHCPCS,ECXRQST
"RTN","ECXPRO",88,0)
 K ECXRCST,ECXFORM,ECXCTAMT,ECXLLC,ECXLMC,ECXGRPR,ECXBILST,ECXQTY
"RTN","ECXPRO",89,0)
 K ECXFELOC,ECXFEKEY,ECODE1,ECXICD9,ECXPCHD1,ECXMPI,ECXPCNPI,ECXDEPT,DFN
"RTN","ECXPRO",90,0)
 K ECXIOPT,ECXPCT,ECXPCP,ECXAO,ECXRE,ECXEC,ECXELIG,ECXVET,ECXZIP,ECXDOB
"RTN","ECXPRO",91,0)
 K ECXSEX
"RTN","ECXPRO",92,0)
 Q
"RTN","ECXPRO",93,0)
 ;
"RTN","ECXPRO",94,0)
SETUP ;Set required input for ECXTRAC
"RTN","ECXPRO",95,0)
 S ECPACK="Prosthetics"
"RTN","ECXPRO",96,0)
 S ECPIECE=23
"RTN","ECXPRO",97,0)
 S ECRTN="START^ECXPRO"
"RTN","ECXPRO",98,0)
 S (ECHEAD,ECGRP)="PRO"
"RTN","ECXPRO",99,0)
 S ECFILE=727.826
"RTN","ECXPRO",100,0)
 S ECVER=7
"RTN","ECXPRO",101,0)
 S ECINST=$$PDIV^ECXPUTL
"RTN","ECXPRO",102,0)
 Q
"RTN","ECXPRO",103,0)
 ;
"RTN","ECXPRO",104,0)
 ;**Note: LOCAL and QUE are carry over from protocols set by other
"RTN","ECXPRO",105,0)
 ;        routines.
"RTN","ECXPRO",106,0)
LOCAL ;to extract nightly for local use not to be transmitted to TSI
"RTN","ECXPRO",107,0)
 ;QUEUE with 1D frequency
"RTN","ECXPRO",108,0)
 D SETUP,^ECXTLOCL,^ECXKILL Q
"RTN","ECXPRO",109,0)
 ;
"RTN","ECXPRO",110,0)
QUE ; entry point for the background requeuing handled by ECXTAUTO
"RTN","ECXPRO",111,0)
 D SETUP,QUE^ECXTAUTO,^ECXKILL Q
"RTN","ECXPRO1")
0^8^B34005114
"RTN","ECXPRO1",1,0)
ECXPRO1 ;ALB/GTS - Prosthetics Extract for DSS (Continued) ; July 16, 1998
"RTN","ECXPRO1",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXPRO1",3,0)
 ;
"RTN","ECXPRO1",4,0)
NTEG(ECXLNE,ECXPIEN,ECXN0,ECXNLB,ECINST) ;** Check for required fields
"RTN","ECXPRO1",5,0)
 ;
"RTN","ECXPRO1",6,0)
 ;   Input
"RTN","ECXPRO1",7,0)
 ;    ECXLNE   - The line number variable (passed by reference)
"RTN","ECXPRO1",8,0)
 ;    ECXPIEN  - The IEN for the Prosthetics record
"RTN","ECXPRO1",9,0)
 ;    ECXN0    - The zero node of the Prosthetics record
"RTN","ECXPRO1",10,0)
 ;    ECXNLB   - The LB node of the Prosthetics record
"RTN","ECXPRO1",11,0)
 ;    ECINST   - The Station number being extracted
"RTN","ECXPRO1",12,0)
 ;
"RTN","ECXPRO1",13,0)
 ;   Output (to be KILLed by calling routine)
"RTN","ECXPRO1",14,0)
 ;    ^TMP("ECX-PRO EXC",$J) - Array for the exception message       
"RTN","ECXPRO1",15,0)
 ;    ECXLNE                 - The number of the next line in the msg
"RTN","ECXPRO1",16,0)
 ;    DFN                    - Patient's IEN in the Patient file
"RTN","ECXPRO1",17,0)
 ;    ECXNA                  - 1st four character of patient's last name
"RTN","ECXPRO1",18,0)
 ;    ECXSSN                 - Patients Social Security number
"RTN","ECXPRO1",19,0)
 ;    ECXSTAT                - Patient Station Number
"RTN","ECXPRO1",20,0)
 ;    ECXDTSVC               - Delivery Date of Prosthesis
"RTN","ECXPRO1",21,0)
 ;    ECXTYPE                - Type of Transaction work performed
"RTN","ECXPRO1",22,0)
 ;    ECXSRCE                - Source of prosthesis
"RTN","ECXPRO1",23,0)
 ;    ECXHCPCS               - HCPCS code for prosthesis
"RTN","ECXPRO1",24,0)
 ;    ECXRQST                - Requesting Station
"RTN","ECXPRO1",25,0)
 ;    ECXRCST                - Receiving Station
"RTN","ECXPRO1",26,0)
 ;    ECXFORM                - The Form Requested On
"RTN","ECXPRO1",27,0)
 ;
"RTN","ECXPRO1",28,0)
 ;   Output (KILLed by NTEG)
"RTN","ECXPRO1",29,0)
 ;    ECXMIS                 - 1 indicates missing information
"RTN","ECXPRO1",30,0)
 ;
"RTN","ECXPRO1",31,0)
 N ECXGOOD,ECXMISS
"RTN","ECXPRO1",32,0)
 S (ECXRCST,ECXRQST)=""
"RTN","ECXPRO1",33,0)
 S ECXMISS=""
"RTN","ECXPRO1",34,0)
 S ECXGOOD=1
"RTN","ECXPRO1",35,0)
 ;
"RTN","ECXPRO1",36,0)
 ;* Get Facility Station Number
"RTN","ECXPRO1",37,0)
 S ECXSTAT=$P(ECXN0,"^",10)
"RTN","ECXPRO1",38,0)
 I ECXSTAT]"" DO
"RTN","ECXPRO1",39,0)
 .K ECXDIC S DA=ECXSTAT,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01;99"
"RTN","ECXPRO1",40,0)
 .D EN^DIQ1 S ECXSTAT=$G(ECXDIC(4,DA,99,"I")) K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXPRO1",41,0)
 ;
"RTN","ECXPRO1",42,0)
 ;** Screen out records
"RTN","ECXPRO1",43,0)
 S:($P(ECXN0,"^",17)'="") ECXGOOD=0 ;*SHIP/DEL is not NULL
"RTN","ECXPRO1",44,0)
 S:($P(ECXN0,"^",26)'="") ECXGOOD=0 ;*PICKUP/DEL is not NULL
"RTN","ECXPRO1",45,0)
 S:(+($P($G(^RMPR(660,ECXPIEN,"AM")),"^",2))=1) ECXGOOD=0 ;*NO ADMIN CT=1
"RTN","ECXPRO1",46,0)
 S:(($P(ECXN0,"^",15))'="") ECXGOOD=0 ;*HISTORICAL DATA is not NULL
"RTN","ECXPRO1",47,0)
 ;
"RTN","ECXPRO1",48,0)
 S DFN=$P(ECXN0,"^",2)
"RTN","ECXPRO1",49,0)
 S ECXSSN=$P($G(^DPT(+DFN,0)),"^",9)
"RTN","ECXPRO1",50,0)
 S ECXNA=$E($P($P($G(^DPT(+DFN,0)),"^"),",")_"    ",1,4)
"RTN","ECXPRO1",51,0)
 S ECXDTSVC=$P(ECXN0,"^",12)
"RTN","ECXPRO1",52,0)
 S ECXTYPE=$P(ECXN0,"^",4)
"RTN","ECXPRO1",53,0)
 S ECXSRCE=$P(ECXN0,"^",14)
"RTN","ECXPRO1",54,0)
 S ECXHCPCS=$P($G(^ICPT(+$P(ECXN0,"^",22),0)),"^",1)
"RTN","ECXPRO1",55,0)
 S ECXFORM=$P(ECX0,"^",13)
"RTN","ECXPRO1",56,0)
 ;
"RTN","ECXPRO1",57,0)
 ;* Get Requesting Station Number
"RTN","ECXPRO1",58,0)
 I +ECXFORM=4 DO
"RTN","ECXPRO1",59,0)
 .S ECXRQST=$P(ECXNLB,"^",1)
"RTN","ECXPRO1",60,0)
 .I ECXRQST]"" DO
"RTN","ECXPRO1",61,0)
 ..S DA=ECXRQST,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01;99"
"RTN","ECXPRO1",62,0)
 ..D EN^DIQ1 S ECXRQST=$G(ECXDIC(4,DA,99,"I")) K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXPRO1",63,0)
 S:(+ECXFORM'=4) ECXRQST=""
"RTN","ECXPRO1",64,0)
 ;
"RTN","ECXPRO1",65,0)
 ;* Screen out records
"RTN","ECXPRO1",66,0)
 S:(+ECXFORM=13) ECXGOOD=0 ;*FORM REQUESTED ON = 13
"RTN","ECXPRO1",67,0)
 ;
"RTN","ECXPRO1",68,0)
 ;* Get Receiving Station Number
"RTN","ECXPRO1",69,0)
 I +ECXFORM=4 DO
"RTN","ECXPRO1",70,0)
 .S ECXRCST=$P(ECXNLB,"^",4)
"RTN","ECXPRO1",71,0)
 .I ECXRCST]"" DO
"RTN","ECXPRO1",72,0)
 ..S DA=ECXRCST,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01;99"
"RTN","ECXPRO1",73,0)
 ..D EN^DIQ1 S ECXRCST=$G(ECXDIC(4,DA,99,"I")) K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXPRO1",74,0)
 S:(+ECXFORM'=4) ECXRCST=""
"RTN","ECXPRO1",75,0)
 ;
"RTN","ECXPRO1",76,0)
 ;** Check for integrity and set up the problem variable if right DIV
"RTN","ECXPRO1",77,0)
 I ECXGOOD DO
"RTN","ECXPRO1",78,0)
 .I ECXSTAT']"" DO
"RTN","ECXPRO1",79,0)
 ..S ECXMISS="1"
"RTN","ECXPRO1",80,0)
 ..D CHK ;* Set ECXGOOD
"RTN","ECXPRO1",81,0)
 .I ECXSTAT]"" DO
"RTN","ECXPRO1",82,0)
 ..S:(ECINST'=$E(ECXSTAT,1,3)) ECXGOOD=0 ;*Screen for incorrect Station
"RTN","ECXPRO1",83,0)
 ..D:(ECXGOOD=1) CHK ;* Set ECXGOOD
"RTN","ECXPRO1",84,0)
 Q ECXGOOD
"RTN","ECXPRO1",85,0)
 ;
"RTN","ECXPRO1",86,0)
CHK ;*Check variables
"RTN","ECXPRO1",87,0)
 ;
"RTN","ECXPRO1",88,0)
 ; Input
"RTN","ECXPRO1",89,0)
 ;  Variables set in and Output from NTEG^ECXPRO1
"RTN","ECXPRO1",90,0)
 ;
"RTN","ECXPRO1",91,0)
 ; Output
"RTN","ECXPRO1",92,0)
 ;  ^TMP("ECX-PRO EXC",$J,   - Global of records with integrity problems
"RTN","ECXPRO1",93,0)
 ;
"RTN","ECXPRO1",94,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",95,0)
 I DFN']"" S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",96,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",97,0)
 I ECXSSN']"" S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",98,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",99,0)
 I ECXNA="    " S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",100,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",101,0)
 I ECXDTSVC']"" S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",102,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",103,0)
 I ECXTYPE']"" S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",104,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",105,0)
 I ECXSRCE']"" S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",106,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",107,0)
 I ECXHCPCS']"" S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",108,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",109,0)
 I +ECXFORM=4 DO
"RTN","ECXPRO1",110,0)
 .I ECXRQST']"" S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",111,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",112,0)
 I ECXFORM']"" S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",113,0)
 S ECXMISS=ECXMISS_"^"
"RTN","ECXPRO1",114,0)
 I +ECXFORM=4 DO
"RTN","ECXPRO1",115,0)
 .I ECXRCST']"" S ECXMISS=ECXMISS_"1"
"RTN","ECXPRO1",116,0)
 I ECXMISS'="^^^^^^^^^^" DO
"RTN","ECXPRO1",117,0)
 .S ECXGOOD=0
"RTN","ECXPRO1",118,0)
 .D ECXMISLN^ECXPRO2(ECXMISS,.ECXLNE,ECXPIEN)
"RTN","ECXPRO1",119,0)
 Q
"RTN","ECXPRO1",120,0)
 ;
"RTN","ECXPRO1",121,0)
PROSINFO(ECXDA,ECXLB,ECX0) ;*Get Prosthetics Information
"RTN","ECXPRO1",122,0)
 ;
"RTN","ECXPRO1",123,0)
 ;  Input
"RTN","ECXPRO1",124,0)
 ;    ECDA    - The IEN for the Prosthetics record
"RTN","ECXPRO1",125,0)
 ;    ECX0    - The zero node of the Prosthetics record
"RTN","ECXPRO1",126,0)
 ;    ECXLB   - The LB node of the Prosthetics record
"RTN","ECXPRO1",127,0)
 ;    ECXFORM - The Form Requested On (to determine Lab transactions)
"RTN","ECXPRO1",128,0)
 ;
"RTN","ECXPRO1",129,0)
 ;  Output (to be KILLed by calling routine)
"RTN","ECXPRO1",130,0)
 ;    ECXCTAMT   - The Cost of Transaction
"RTN","ECXPRO1",131,0)
 ;    ECXLLC     - The Lab Labor Cost
"RTN","ECXPRO1",132,0)
 ;    ECXLMC     - The Lab Material Cost
"RTN","ECXPRO1",133,0)
 ;    ECXGRPR    - The AMIS Grouper number
"RTN","ECXPRO1",134,0)
 ;    ECXBILST   - The Billing Status
"RTN","ECXPRO1",135,0)
 ;    ECXQTY     - The Quantity
"RTN","ECXPRO1",136,0)
 ;
"RTN","ECXPRO1",137,0)
 S (ECXLLC,ECXLMC,ECXCTAMT)=""
"RTN","ECXPRO1",138,0)
 S ECXBILST=$P($G(^RMPR(660,ECXDA,"AM")),"^",3)
"RTN","ECXPRO1",139,0)
 S ECXQTY=$P(ECX0,"^",7)
"RTN","ECXPRO1",140,0)
 S:(+ECXQTY=0) ECXQTY=1
"RTN","ECXPRO1",141,0)
 S ECXGRPR=$P($G(^RMPR(660,ECXDA,"AMS")),"^",1)
"RTN","ECXPRO1",142,0)
 I +ECXFORM>0,(+ECXFORM<4) S ECXCTAMT=$P(ECX0,"^",16)
"RTN","ECXPRO1",143,0)
 I +ECXFORM>4,(+ECXFORM<13) S ECXCTAMT=$P(ECX0,"^",16)
"RTN","ECXPRO1",144,0)
 I +ECXFORM=14 S ECXCTAMT=$P(ECX0,"^",16)
"RTN","ECXPRO1",145,0)
 I +ECXFORM=4 DO
"RTN","ECXPRO1",146,0)
 .S ECXCTAMT=$P(ECXLB,"^",9)
"RTN","ECXPRO1",147,0)
 .S ECXLLC=$P(ECXLB,"^",7)
"RTN","ECXPRO1",148,0)
 .S ECXLMC=$P(ECXLB,"^",8)
"RTN","ECXPRO1",149,0)
 I ECXCTAMT="" S ECXCTAMT="0.00"
"RTN","ECXPRO1",150,0)
 I ECXLLC="" S ECXLLC="0.00"
"RTN","ECXPRO1",151,0)
 I ECXLMC="" S ECXLMC="0.00"
"RTN","ECXPRO1",152,0)
 ;
"RTN","ECXPRO1",153,0)
 ;* Add decimals if needed
"RTN","ECXPRO1",154,0)
 S:(ECXCTAMT'[".") ECXCTAMT=ECXCTAMT_".00"
"RTN","ECXPRO1",155,0)
 S:($L($P(ECXCTAMT,".",2))<2) $P(ECXCTAMT,".",2)=$$PAD^ECXUTL1($P(ECXCTAMT,".",2),2,"B","0")
"RTN","ECXPRO1",156,0)
 S:(ECXLLC'[".") ECXLLC=ECXLLC_".00"
"RTN","ECXPRO1",157,0)
 S:($L($P(ECXLLC,".",2))<2) $P(ECXLLC,".",2)=$$PAD^ECXUTL1($P(ECXLLC,".",2),2,"B","0")
"RTN","ECXPRO1",158,0)
 S:(ECXLMC'[".") ECXLMC=ECXLMC_".00"
"RTN","ECXPRO1",159,0)
 S:($L($P(ECXLMC,".",2))<2) $P(ECXLMC,".",2)=$$PAD^ECXUTL1($P(ECXLMC,".",2),2,"B","0")
"RTN","ECXPRO1",160,0)
 Q
"RTN","ECXPRO1",161,0)
 ;
"RTN","ECXPRO1",162,0)
PATINFO(ECXDELDT) ;* Get Patient Information
"RTN","ECXPRO1",163,0)
 ;
"RTN","ECXPRO1",164,0)
 ;  Input
"RTN","ECXPRO1",165,0)
 ;    ECXDELDT - The Delivery of the Prosthesis
"RTN","ECXPRO1",166,0)
 ;
"RTN","ECXPRO1",167,0)
 ;  Output (to be KILLed by calling routine)
"RTN","ECXPRO1",168,0)
 ;    ECXIOPT    - The In/Outpatient indicator
"RTN","ECXPRO1",169,0)
 ;    ECXPCT     - The Primary Care Team
"RTN","ECXPRO1",170,0)
 ;    ECXPCP     - The Primary Care Providor
"RTN","ECXPRO1",171,0)
 ;    ECXAO      - The Agent Orange indicator
"RTN","ECXPRO1",172,0)
 ;    ECXRE      - The Radiation Exposure indicator
"RTN","ECXPRO1",173,0)
 ;    ECXEC      - The Environmental Contaminants indicator
"RTN","ECXPRO1",174,0)
 ;    ECXELIG    - The veteran's eligibility
"RTN","ECXPRO1",175,0)
 ;    ECXVET     - The Vet/Non-Vet status
"RTN","ECXPRO1",176,0)
 ;    ECXZIP     - ZIP or ZIP+4
"RTN","ECXPRO1",177,0)
 ;    ECXDOB     - The patient's birth date
"RTN","ECXPRO1",178,0)
 ;    ECXSEX     - The Patient's Gender
"RTN","ECXPRO1",179,0)
 ;
"RTN","ECXPRO1",180,0)
 ;* Determine the In/Outpatient status
"RTN","ECXPRO1",181,0)
 S ECXDELDT=$P(ECXDELDT,".",1)
"RTN","ECXPRO1",182,0)
 S ECXIOPT=1
"RTN","ECXPRO1",183,0)
 K VAIP
"RTN","ECXPRO1",184,0)
 S VAIP("D")=ECXDELDT
"RTN","ECXPRO1",185,0)
 D IN5^VADPT
"RTN","ECXPRO1",186,0)
 I +VAIP(1)>0 S ECXIOPT=3
"RTN","ECXPRO1",187,0)
 K VAIP,VAERR
"RTN","ECXPRO1",188,0)
 ;
"RTN","ECXPRO1",189,0)
 ;* Determine primary care team/provider and eligibility
"RTN","ECXPRO1",190,0)
 I $T(OUTPTPR^SDUTL3)[",SCDATE" D
"RTN","ECXPRO1",191,0)
 .S ECXPCT=+$$OUTPTTM^SDUTL3(DFN,ECXDELDT)
"RTN","ECXPRO1",192,0)
 .S:(+ECXPCT=0) ECXPCT=""
"RTN","ECXPRO1",193,0)
 .S ECXPCP=+$$OUTPTPR^SDUTL3(DFN,ECXDELDT)
"RTN","ECXPRO1",194,0)
 .S:(+ECXPCP=0) ECXPCP=""
"RTN","ECXPRO1",195,0)
 I $T(OUTPTPR^SDUTL3)'[",SCDATE" D
"RTN","ECXPRO1",196,0)
 .S ECXPCT=+$$OUTPTTM^SDUTL3(DFN)
"RTN","ECXPRO1",197,0)
 .S:ECXPCT=0 ECXPCT=""
"RTN","ECXPRO1",198,0)
 .S ECXPCP=+$$OUTPTPR^SDUTL3(DFN)
"RTN","ECXPRO1",199,0)
 .S:ECXPCP=0 ECXPCP=""
"RTN","ECXPRO1",200,0)
 S ECXELIG=$P($G(^DIC(8,+$G(^DPT(DFN,.36)),0)),"^",9)
"RTN","ECXPRO1",201,0)
 I ECXELIG S ECXELIG=$C(ECXELIG+64)
"RTN","ECXPRO1",202,0)
 ;
"RTN","ECXPRO1",203,0)
 ;* Determine Agent Orange, Radiation Exposure and Environment Contmnts
"RTN","ECXPRO1",204,0)
 S ECXAO=$P($G(^DPT(DFN,.321)),"^",2)
"RTN","ECXPRO1",205,0)
 S ECXRE=$P($G(^DPT(DFN,.321)),"^",3)
"RTN","ECXPRO1",206,0)
 S ECXEC=$P($G(^DPT(DFN,.322)),"^",13)
"RTN","ECXPRO1",207,0)
 ;
"RTN","ECXPRO1",208,0)
 ;* Get patient's Sex, Date of Birth, Zip Code and Vet/Non-Vet status
"RTN","ECXPRO1",209,0)
 S ECXSEX=$P(^DPT(DFN,0),"^",2)
"RTN","ECXPRO1",210,0)
 S:ECXSEX="" ECXSEX="U"
"RTN","ECXPRO1",211,0)
 S ECXDOB=$P(^DPT(DFN,0),"^",3)
"RTN","ECXPRO1",212,0)
 S ECXVET=$P($G(^DPT(DFN,"VET")),"^",1)
"RTN","ECXPRO1",213,0)
 S VAPA("P")=""
"RTN","ECXPRO1",214,0)
 D ADD^VADPT
"RTN","ECXPRO1",215,0)
 S ECXZIP=$P($G(VAPA(11)),"^",2)
"RTN","ECXPRO1",216,0)
 K VAPA
"RTN","ECXPRO1",217,0)
 Q
"RTN","ECXPRO2")
0^9^B11331769
"RTN","ECXPRO2",1,0)
ECXPRO2 ;ALB/GTS - Prosthetics Extract for DSS (Continued) ; July 16, 1998
"RTN","ECXPRO2",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXPRO2",3,0)
 ;
"RTN","ECXPRO2",4,0)
ECXBUL(ECXLNE,ECXEBDT,ECXEEDT,ECNUM) ;* Set up the header for the exception msg
"RTN","ECXPRO2",5,0)
 ;
"RTN","ECXPRO2",6,0)
 ;   Input
"RTN","ECXPRO2",7,0)
 ;    ECXLNE  - The line number variable (passed by reference)
"RTN","ECXPRO2",8,0)
 ;    ECXEBDT - The Externally formated beginning date
"RTN","ECXPRO2",9,0)
 ;    ECXEEDT - The Externally formated ending date
"RTN","ECXPRO2",10,0)
 ;    ECNUM   - The Extract reference number
"RTN","ECXPRO2",11,0)
 ;
"RTN","ECXPRO2",12,0)
 ;   Output
"RTN","ECXPRO2",13,0)
 ;    ^TMP("ECX-PRO EXC",$J) - Array for the exception message
"RTN","ECXPRO2",14,0)
 ;    ECXLNE                 - The number of the next line in the msg
"RTN","ECXPRO2",15,0)
 ;
"RTN","ECXPRO2",16,0)
 S ^TMP("ECX-PRO EXC",$J,1)=" "
"RTN","ECXPRO2",17,0)
 S ^TMP("ECX-PRO EXC",$J,2)="The DSS-Prosthetic extract (#"_ECNUM_") for "_ECXEBDT_" through "_ECXEEDT
"RTN","ECXPRO2",18,0)
 S ^TMP("ECX-PRO EXC",$J,3)="has completed.  The following is a list of extract records that were NOT"
"RTN","ECXPRO2",19,0)
 S ^TMP("ECX-PRO EXC",$J,4)="created due to missing information in the Record of Pros Appliance/Repair"
"RTN","ECXPRO2",20,0)
 S ^TMP("ECX-PRO EXC",$J,5)="file (#660).  The Prosthetics record should be reviewed and the missing"
"RTN","ECXPRO2",21,0)
 S ^TMP("ECX-PRO EXC",$J,6)="information completed.  Once the missing information has been entered, it"
"RTN","ECXPRO2",22,0)
 S ^TMP("ECX-PRO EXC",$J,7)="will be necessary to re-generate the Prosthetics Extract for the above noted"
"RTN","ECXPRO2",23,0)
 S ^TMP("ECX-PRO EXC",$J,8)="time period.  To avoid duplicate records in the Prosthetics Extract, you"
"RTN","ECXPRO2",24,0)
 S ^TMP("ECX-PRO EXC",$J,9)="should purge the Prosthetics Extract before re-generating."
"RTN","ECXPRO2",25,0)
 S ^TMP("ECX-PRO EXC",$J,10)=" "
"RTN","ECXPRO2",26,0)
 S ^TMP("ECX-PRO EXC",$J,11)=" "
"RTN","ECXPRO2",27,0)
 S ^TMP("ECX-PRO EXC",$J,12)=" PROSTHETICS FILE (#660)         MISSING DATA"
"RTN","ECXPRO2",28,0)
 S ^TMP("ECX-PRO EXC",$J,13)="       IEN                         ELEMENTS"
"RTN","ECXPRO2",29,0)
 S ^TMP("ECX-PRO EXC",$J,14)=" "
"RTN","ECXPRO2",30,0)
 S ECXLNE=15
"RTN","ECXPRO2",31,0)
 Q
"RTN","ECXPRO2",32,0)
 ;
"RTN","ECXPRO2",33,0)
ECXMISLN(ECXMISS,ECXLNE,ECXPIEN) ;** Report Missing Lines
"RTN","ECXPRO2",34,0)
 N ECXPCE,ECXFIRST,ECXFIELD
"RTN","ECXPRO2",35,0)
 S ECXFIRST=1
"RTN","ECXPRO2",36,0)
 F ECXPCE=1:1:11 DO
"RTN","ECXPRO2",37,0)
 .I +$P(ECXMISS,"^",ECXPCE) DO
"RTN","ECXPRO2",38,0)
 ..S ECXFIELD=$P($T(ECXFLD+ECXPCE),";;",2)
"RTN","ECXPRO2",39,0)
 ..I 'ECXFIRST S ^TMP("ECX-PRO EXC",$J,ECXLNE)="                                   "_ECXFIELD
"RTN","ECXPRO2",40,0)
 ..I ECXFIRST DO
"RTN","ECXPRO2",41,0)
 ...S ^TMP("ECX-PRO EXC",$J,ECXLNE)="       "_ECXPIEN_"                          "_ECXFIELD
"RTN","ECXPRO2",42,0)
 ...S ECXFIRST=0
"RTN","ECXPRO2",43,0)
 ..S ECXLNE=ECXLNE+1
"RTN","ECXPRO2",44,0)
 S ^TMP("ECX-PRO EXC",$J,ECXLNE)=" "
"RTN","ECXPRO2",45,0)
 S ECXLNE=ECXLNE+1
"RTN","ECXPRO2",46,0)
 Q
"RTN","ECXPRO2",47,0)
 ;
"RTN","ECXPRO2",48,0)
ECXFLD ;* Missing Required fields
"RTN","ECXPRO2",49,0)
 ;;STATION
"RTN","ECXPRO2",50,0)
 ;;PATIENT NAME (In Prosthetics)
"RTN","ECXPRO2",51,0)
 ;;SSN
"RTN","ECXPRO2",52,0)
 ;;NAME (In Patient file - #2)
"RTN","ECXPRO2",53,0)
 ;;DELIVERY DATE
"RTN","ECXPRO2",54,0)
 ;;TYPE OF TRANSACTION
"RTN","ECXPRO2",55,0)
 ;;SOURCE
"RTN","ECXPRO2",56,0)
 ;;HCPCS
"RTN","ECXPRO2",57,0)
 ;;REQUESTING STATION
"RTN","ECXPRO2",58,0)
 ;;FORM REQUESTED ON
"RTN","ECXPRO2",59,0)
 ;;RECEIVING STATION
"RTN","ECXPRO2",60,0)
 Q
"RTN","ECXPRO2",61,0)
 ;
"RTN","ECXPRO2",62,0)
FEEDINFO(ECXSRCE,ECXHCPCS,ECXTYPE,ECXSTAT,ECXRQST,ECXRCST,ECXFORM) ;* FDRs
"RTN","ECXPRO2",63,0)
 ;Get Feeder Key and Feeder Location
"RTN","ECXPRO2",64,0)
 ;  
"RTN","ECXPRO2",65,0)
 ;   Input
"RTN","ECXPRO2",66,0)
 ;    ECXSTAT   - Station Number for extract
"RTN","ECXPRO2",67,0)
 ;    ECXTYPE   - Type of Transaction work performed
"RTN","ECXPRO2",68,0)
 ;    ECXSRCE   - Source of prosthesis
"RTN","ECXPRO2",69,0)
 ;    ECXHCPCS  - HCPCS code for prosthesis
"RTN","ECXPRO2",70,0)
 ;    ECXRQST   - Requesting Station
"RTN","ECXPRO2",71,0)
 ;    ECXRCST   - Receiving Station
"RTN","ECXPRO2",72,0)
 ;    ECXFORM   - Form Requested on 
"RTN","ECXPRO2",73,0)
 ;
"RTN","ECXPRO2",74,0)
 ;   Output (to be KILLed by calling routine)
"RTN","ECXPRO2",75,0)
 ;    ECXFELOC  - Feeder Location
"RTN","ECXPRO2",76,0)
 ;    ECXFEKEY  - Feeder Key
"RTN","ECXPRO2",77,0)
 ;
"RTN","ECXPRO2",78,0)
 ;* NOTE: If a Station # <> Requesting Station
"RTN","ECXPRO2",79,0)
 ;*         AND
"RTN","ECXPRO2",80,0)
 ;*       Station # <> Receiving Station
"RTN","ECXPRO2",81,0)
 ;*  The Feeder Location will be NULL.  This may indicate a Prosthetics
"RTN","ECXPRO2",82,0)
 ;*   data entry Problem per conversation with Helen Corkwell.
"RTN","ECXPRO2",83,0)
 ;
"RTN","ECXPRO2",84,0)
 S ECXFELOC=""
"RTN","ECXPRO2",85,0)
 S ECXFEKEY=ECXHCPCS_$S(ECXTYPE="X":"X",1:"N")_ECXSRCE
"RTN","ECXPRO2",86,0)
 ;
"RTN","ECXPRO2",87,0)
 ;* If processing a Lab Transaction
"RTN","ECXPRO2",88,0)
 I +ECXFORM=4 DO
"RTN","ECXPRO2",89,0)
 .I (ECXSTAT=ECXRCST),(ECXSTAT'=ECXRQST) DO
"RTN","ECXPRO2",90,0)
 ..S ECXFELOC=ECXRCST_"LAB"
"RTN","ECXPRO2",91,0)
 ..S ECXFEKEY=ECXFEKEY_ECXRQST_"REQ"
"RTN","ECXPRO2",92,0)
 .I ECXSTAT=ECXRQST DO
"RTN","ECXPRO2",93,0)
 ..S ECXFELOC=ECXRQST_"ORD"
"RTN","ECXPRO2",94,0)
 ..S ECXFEKEY=ECXFEKEY_ECXRCST_"REC"
"RTN","ECXPRO2",95,0)
 ;
"RTN","ECXPRO2",96,0)
 ;* If processing a Non-Lab Transaction
"RTN","ECXPRO2",97,0)
 I +ECXFORM'=4 S ECXFELOC=ECXSTAT_"NONL"
"RTN","ECXPRO2",98,0)
 Q
"RTN","ECXPURG")
0^5^B14311934
"RTN","ECXPURG",1,0)
ECXPURG ;BIR/CML-Driver for Purge of DSS Data from Local Extract & Holding Files ; [ 12/03/96  5:19 PM ]
"RTN","ECXPURG",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXPURG",3,0)
EN ;entry point from option
"RTN","ECXPURG",4,0)
 W @IOF,!!,"This option will allow you to purge:"
"RTN","ECXPURG",5,0)
 W !,"1. individual or a range of DSS extracts, or"
"RTN","ECXPURG",6,0)
 W !,"2. data that resides in the ""holding files"" for the IVP and UDP extracts."
"RTN","ECXPURG",7,0)
 W !!,"Care must be taken for several reasons:"
"RTN","ECXPURG",8,0)
 W !!,"-  You can purge ANY existing extract.  This includes transmitted and non-"
"RTN","ECXPURG",9,0)
 W !,"   transmitted extracts as well as extracts that did not run to completion"
"RTN","ECXPURG",10,0)
 W !,"   due to errors or system problems."
"RTN","ECXPURG",11,0)
 W !,"-  Choosing a range of extracts (or a broad date range for the ""holding"
"RTN","ECXPURG",12,0)
 W !,"   files"") could mean an excessively large number of records and be very"
"RTN","ECXPURG",13,0)
 W !,"   CPU intensive.  Please be sure to queue this purge for off-hours and"
"RTN","ECXPURG",14,0)
 W !,"   limit the number of extracts to be purged per a single queued session."
"RTN","ECXPURG",15,0)
 W !,"-  The IVP and UDP ""holding"" files are intermediate files that are"
"RTN","ECXPURG",16,0)
 W !,"   populated ""realtime"" by inpatient pharmacy activity.  These files are"
"RTN","ECXPURG",17,0)
 W !,"   then used to generate the IVP and UDP extracts and CANNOT be recreated."
"RTN","ECXPURG",18,0)
 W !,"   Once they are purged for a date range, extracts can no longer be"
"RTN","ECXPURG",19,0)
 W !,"   generated for that time period."
"RTN","ECXPURG",20,0)
 ;
"RTN","ECXPURG",21,0)
 K DIR W !
"RTN","ECXPURG",22,0)
 S DIR(0)="SAM^E:Extract Files;I:IVP Holding File;U:UDP Holding File"
"RTN","ECXPURG",23,0)
 S DIR("A")="Purge (E)xtract files, (I)VP data, or (U)DP data? "
"RTN","ECXPURG",24,0)
 D ^DIR K DIR G:$D(DIRUT) QUIT S ECY=Y
"RTN","ECXPURG",25,0)
 I ECY="E" D ^ECXPURG1 I $D(ECLOC) S ZTSAVE("ECLOC(")="",ZTIO="",ZTRTN="PUR1^ECXPURG",ZTDESC="DSS - Purge of Extract Files" D QUE
"RTN","ECXPURG",26,0)
 I ECY="I" D DATES^ECXPURG1 I $D(ECBDT)&($D(ECEDT)) S (ZTSAVE("ECBDT"),ZTSAVE("ECEDT"))="",ZTIO="",ZTRTN="PUR2^ECXPURG",ZTDESC="DSS - Purge of IVP Holding File" D QUE
"RTN","ECXPURG",27,0)
 I ECY="U" D DATES^ECXPURG1 I $D(ECBDT)&($D(ECEDT)) S (ZTSAVE("ECBDT"),ZTSAVE("ECEDT"))="",ZTIO="",ZTRTN="PUR3^ECXPURG",ZTDESC="DSS - Purge of UDP Holding File" D QUE
"RTN","ECXPURG",28,0)
QUIT ;
"RTN","ECXPURG",29,0)
 K %X,%Y,EC,ECBDT,ECDATE,ECDT,ECEDT,ECEX,ECFR,ECLOC,ECRC,ECTO,ECTRN,ECTYP,ECY,HDT,HI,JJ,LN,LO,PG,QFLG,SS,X,Y,ZTSK
"RTN","ECXPURG",30,0)
 K ECXDIV
"RTN","ECXPURG",31,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","ECXPURG",32,0)
 Q
"RTN","ECXPURG",33,0)
QUE W $C(7),$C(7),!!?3,"<<This purge should be queued to run during non-peak hours.>>",!
"RTN","ECXPURG",34,0)
 D ^%ZTLOAD
"RTN","ECXPURG",35,0)
 I $D(ZTSK) W !,"Request queued as Task #",ZTSK,".",!
"RTN","ECXPURG",36,0)
 Q
"RTN","ECXPURG",37,0)
 ;
"RTN","ECXPURG",38,0)
PUR1 ; entry point for queued purge job of extract files
"RTN","ECXPURG",39,0)
 S ECDA=0 F  S ECDA=$O(ECLOC(ECDA)) Q:'ECDA  S ECFILE=^ECX(727,ECDA,"FILE") D
"RTN","ECXPURG",40,0)
 .S ECJ=0 F  S ECJ=$O(^ECX(ECFILE,"AC",ECDA,ECJ)) Q:'ECJ  S DIK="^ECX("_ECFILE_",",DA=ECJ D ^DIK K DIK,DA
"RTN","ECXPURG",41,0)
 .S ^ECX(727,ECDA,"PURG")=DT
"RTN","ECXPURG",42,0)
 G QUIT
"RTN","ECXPURG",43,0)
PUR2 ; entry point for queued purge job of IVP holding file (#728.113)
"RTN","ECXPURG",44,0)
 F ECDT=ECBDT-1:0 S ECDT=$O(^ECX(728.113,"A",ECDT)) Q:'ECDT  Q:ECDT>ECEDT  S ECPT=0 F  S ECPT=$O(^ECX(728.113,"A",ECDT,ECPT)) Q:'ECPT  D
"RTN","ECXPURG",45,0)
 .S ECOR=0 F  S ECOR=$O(^ECX(728.113,"A",ECDT,ECPT,ECOR)) Q:'ECOR  D
"RTN","ECXPURG",46,0)
 ..S ECREC=0 F  S ECREC=$O(^ECX(728.113,"A",ECDT,ECPT,ECOR,ECREC)) Q:'ECREC  D
"RTN","ECXPURG",47,0)
 ...S DIK="^ECX(728.113,",DA=ECREC D ^DIK K DIK,DA
"RTN","ECXPURG",48,0)
 G QUIT
"RTN","ECXPURG",49,0)
PUR3 ; entry point for queued purge job of UDP holding file (#728.904)
"RTN","ECXPURG",50,0)
 F ECDT=ECBDT-1:0 S ECDT=$O(^ECX(728.904,"A",ECDT)) Q:'ECDT  Q:ECDT>ECEDT  D
"RTN","ECXPURG",51,0)
 .S ECREC=0 F  S ECREC=$O(^ECX(728.904,"A",ECDT,ECREC)) Q:'ECREC  D
"RTN","ECXPURG",52,0)
 ..S DIK="^ECX(728.904,",DA=ECREC D ^DIK K DIK,DA
"RTN","ECXPURG",53,0)
 G QUIT
"RTN","ECXPURG1")
0^6^B31699725
"RTN","ECXPURG1",1,0)
ECXPURG1 ;BIR/CML-Purge of DSS Extract Files (CONTINUED) ; [ 12/05/96  11:58 AM ]
"RTN","ECXPURG1",2,0)
 ;;3.0;DSS EXTRACTS;**2,9**;Dec 22, 1997
"RTN","ECXPURG1",3,0)
GET ;compile list of purgable extracts
"RTN","ECXPURG1",4,0)
 K HI,LO,ECBDT,ECEDT,ECLOC,^TMP("ECXPURG",$J)
"RTN","ECXPURG1",5,0)
 S QFLG=1 W !!,"...one moment please"
"RTN","ECXPURG1",6,0)
 S ECEX=0 F  S ECEX=$O(^ECX(727,ECEX)) Q:'ECEX  I '$G(^ECX(727,ECEX,"PURG")),$D(^ECX(727,ECEX,0)) S EC=^(0) D
"RTN","ECXPURG1",7,0)
 .S ^TMP("ECXPURG",$J,$P(EC,"^",3),ECEX)="",ECLOC(ECEX)=$P(EC,"^",3)_"^"_$P(EC,"^",4,5)
"RTN","ECXPURG1",8,0)
 I '$D(^TMP("ECXPURG",$J)) W !!,"There are no extracts that can be purged at this time." G DONE
"RTN","ECXPURG1",9,0)
ASK1 ;ask for print
"RTN","ECXPURG1",10,0)
 W !
"RTN","ECXPURG1",11,0)
 K DIR S DIR(0)="Y",DIR("A")="Do you want to print a list of extracts that can be purged",DIR("B")="NO"
"RTN","ECXPURG1",12,0)
 D ^DIR K DIR I $D(DIRUT) K ECLOC G DONE
"RTN","ECXPURG1",13,0)
 G:'Y ASK2
"RTN","ECXPURG1",14,0)
 W !!,"The right margin for this report is 80.",!!
"RTN","ECXPURG1",15,0)
 K ZTSAVE S ZTSAVE("^TMP(""ECXPURG"",$J,")=""
"RTN","ECXPURG1",16,0)
 D EN^XUTMDEVQ("PRT^ECXPURG1","DSS - Print Purgable Extracts",.ZTSAVE) I 'POP G ASK2
"RTN","ECXPURG1",17,0)
 W !,"NO DEVICE SELECTED OR REPORT PRINTED!!"
"RTN","ECXPURG1",18,0)
ASK2 ;ask for extract range
"RTN","ECXPURG1",19,0)
 ;
"RTN","ECXPURG1",20,0)
 ;** Check divisions for purging
"RTN","ECXPURG1",21,0)
 N ECCHK,ECTMP
"RTN","ECXPURG1",22,0)
 S ECCHK=$$DIV4^XUSER(.ECTMP,DUZ)
"RTN","ECXPURG1",23,0)
 I 'ECCHK DO
"RTN","ECXPURG1",24,0)
 .W !,"You do not have any divisions defined in your user set up and can not purge."
"RTN","ECXPURG1",25,0)
 .S DIR(0)="FAO^1:1",DIR("A")="Hit Return to continue." D ^DIR K DIR,X,Y
"RTN","ECXPURG1",26,0)
 .K ECLOC
"RTN","ECXPURG1",27,0)
 ;
"RTN","ECXPURG1",28,0)
 I 'ECCHK G DONE  ;** (essentially) QUIT out of middle
"RTN","ECXPURG1",29,0)
 ;
"RTN","ECXPURG1",30,0)
 W !,"You will not be able to select an extract that is not from your division.",!
"RTN","ECXPURG1",31,0)
 S LO=$O(ECLOC(0)),HI=$O(ECLOC(" "),-1)
"RTN","ECXPURG1",32,0)
 S DIR(0)="L^"_LO_":"_HI_"",DIR("A")="Select extracts to be purged"
"RTN","ECXPURG1",33,0)
 S DIR("?",1)="Choose the number (or numbers) of the extracts you wish to purge,",DIR("?")="(E.g., 1-3,17,20 to choose 1 thru 3 and 17 and 20)."
"RTN","ECXPURG1",34,0)
 W ! D ^DIR K DIR I $D(DIRUT) K ECLOC G DONE
"RTN","ECXPURG1",35,0)
 S JJ=0,Y=","_Y F  S JJ=$O(ECLOC(JJ)) Q:'JJ  S JZ=","_JJ_"," I Y'[JZ K ECLOC(JJ)
"RTN","ECXPURG1",36,0)
 D DIVCHK(.ECLOC,.ECTMP)
"RTN","ECXPURG1",37,0)
 I '$D(ECLOC) W !!,"You have not chosen a valid extract number.  Try again." G GET
"RTN","ECXPURG1",38,0)
ASK3 W !!,"I will purge the following extract(s):"
"RTN","ECXPURG1",39,0)
 S JJ=0 F  S JJ=$O(ECLOC(JJ)) Q:'JJ  D
"RTN","ECXPURG1",40,0)
 .W !?5,"#",JJ," - ",$P(ECLOC(JJ),"^")
"RTN","ECXPURG1",41,0)
 .W ?47,$TR($$FMTE^XLFDT($P(ECLOC(JJ),"^",2),"5DF")," ","0")," to ",$TR($$FMTE^XLFDT($P(ECLOC(JJ),"^",3),"5DF")," ","0")
"RTN","ECXPURG1",42,0)
 W !! K DIR S DIR(0)="Y",DIR("A")="Is this OK",DIR("B")="NO"
"RTN","ECXPURG1",43,0)
 S DIR("?",1)="    Enter:"
"RTN","ECXPURG1",44,0)
 S DIR("?",2)="      ""YES"" if you agree with this list and would like to proceed,"
"RTN","ECXPURG1",45,0)
 S DIR("?",3)="       ""NO"" if you would like to make a different selection, or"
"RTN","ECXPURG1",46,0)
 S DIR("?")="        ""^"" to exit option."
"RTN","ECXPURG1",47,0)
 D ^DIR K DIR I $D(DIRUT) K ECLOC G DONE
"RTN","ECXPURG1",48,0)
 I 'Y G GET
"RTN","ECXPURG1",49,0)
 ; at this point, the local array ECLOC( is passed back to ^ECXPURG
"RTN","ECXPURG1",50,0)
 G DONE
"RTN","ECXPURG1",51,0)
QUIT ;
"RTN","ECXPURG1",52,0)
 I $E(IOST)="C"&('QFLG) S DIR(0)="E" D  D ^DIR K DIR
"RTN","ECXPURG1",53,0)
 .S SS=22-$Y F JJ=1:1:SS W !
"RTN","ECXPURG1",54,0)
 W:$E(IOST)'="C" @IOF D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","ECXPURG1",55,0)
DONE K ^TMP("ECXPURG",$J),ZTSK Q
"RTN","ECXPURG1",56,0)
PRT ;print list of extracts
"RTN","ECXPURG1",57,0)
 S (PG,QFLG)=0,$P(LN,"-",81)="" D NOW^%DTC S Y=$E(%,1,12) X ^DD("DD") S HDT=Y D HDR
"RTN","ECXPURG1",58,0)
 S ECTYP="" F  S ECTYP=$O(^TMP("ECXPURG",$J,ECTYP)) Q:ECTYP=""  Q:QFLG  D:$Y+4>IOSL HDR Q:QFLG  W !!,ECTYP D
"RTN","ECXPURG1",59,0)
 .S ECEX=0 F  S ECEX=$O(^TMP("ECXPURG",$J,ECTYP,ECEX)) Q:'ECEX  Q:QFLG  I $D(^ECX(727,ECEX,0)) S EC=^(0) D
"RTN","ECXPURG1",60,0)
 ..S ECDT=$$FMTE^XLFDT($P(EC,"^",2),"D")
"RTN","ECXPURG1",61,0)
 ..S ECFR=$TR($$FMTE^XLFDT($P(EC,"^",4),"5DF")," ","0")
"RTN","ECXPURG1",62,0)
 ..S ECTO=$TR($$FMTE^XLFDT($P(EC,"^",5),"5DF")," ","0")
"RTN","ECXPURG1",63,0)
 ..S ECRC=$P(EC,"^",6) S:ECRC="" ECRC="Incomplete"
"RTN","ECXPURG1",64,0)
 ..S ECTRN=$$FMTE^XLFDT($G(^ECX(727,ECEX,"TR")),"D")
"RTN","ECXPURG1",65,0)
 ..S ECXDIV=$P($G(^ECX(727,ECEX,"DIV")),"^",1)
"RTN","ECXPURG1",66,0)
 ..K ECXDIC S DA=ECXDIV,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01;99"
"RTN","ECXPURG1",67,0)
 ..D EN^DIQ1 S ECXDIV=$G(ECXDIC(4,DA,99,"I")) K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXPURG1",68,0)
 ..D:$Y+3>IOSL HDR Q:QFLG
"RTN","ECXPURG1",69,0)
 ..W !?1,ECEX,?11,ECDT,?25,ECFR,"-",ECTO,?48,$J(ECRC,9),?60,ECTRN,?75,ECXDIV
"RTN","ECXPURG1",70,0)
 G QUIT
"RTN","ECXPURG1",71,0)
HDR ;HEADER
"RTN","ECXPURG1",72,0)
 I $E(IOST)="C" S SS=22-$Y F JJ=1:1:SS W !
"RTN","ECXPURG1",73,0)
 I $E(IOST)="C",PG>0 S DIR(0)="E" W ! D ^DIR K DIR I 'Y S QFLG=1 Q
"RTN","ECXPURG1",74,0)
 S PG=PG+1 W:$Y!($E(IOST)="C") @IOF W !,"PURGABLE EXTRACTS",?72,"Page: ",PG,!,"Printed on ",HDT,!
"RTN","ECXPURG1",75,0)
 W !,"FEEDER SYS",?12,"EXTRACT,",!,"EXTRACT #",?12,"DATE",?33,"FROM-TO",?48,"RECORD CNT",?60,"TRANSMIT DATE",?75,"DIV",!,LN
"RTN","ECXPURG1",76,0)
 Q
"RTN","ECXPURG1",77,0)
DATES ;ask for date range for purge of holding files
"RTN","ECXPURG1",78,0)
 K HI,LO,ECBDT,ECEDT
"RTN","ECXPURG1",79,0)
 I ECY="I" D
"RTN","ECXPURG1",80,0)
 .I '$O(^ECX(728.113,0)) W !!,"You have no data in the IVP holding file (file #728.113) to purge." Q
"RTN","ECXPURG1",81,0)
 .S LO=$O(^ECX(728.113,"A",0)),HI=$O(^ECX(728.113,"A"," "),-1)
"RTN","ECXPURG1",82,0)
 I ECY="U" D
"RTN","ECXPURG1",83,0)
 .I '$O(^ECX(728.904,0)) W !!,"You have no data in the UDP holding file (file #728.904) to purge." Q
"RTN","ECXPURG1",84,0)
 .S LO=$O(^ECX(728.904,"A",0)),HI=$O(^ECX(728.904,"A"," "),-1)
"RTN","ECXPURG1",85,0)
 Q:$G(LO)=""
"RTN","ECXPURG1",86,0)
 W @IOF,!!,"This file currently holds ",$S(ECY="I":"IVP",1:"UDP")," data from <",$$FMTE^XLFDT(LO,"D"),"> to <",$$FMTE^XLFDT(HI,"D"),">."
"RTN","ECXPURG1",87,0)
 W ! K DIR S DIR(0)="DA^"_LO_":"_HI_":EPX",DIR("A")="Beginning date for purge: " D ^DIR K DIR I $D(DIRUT) K HI,LO Q
"RTN","ECXPURG1",88,0)
 S ECBDT=+Y
"RTN","ECXPURG1",89,0)
 K DIR S DIR(0)="DA^"_ECBDT_":"_HI_":EPX",DIR("A")="Ending date for purge: " D ^DIR K DIR I $D(DIRUT) K HI,LO,ECBDT Q
"RTN","ECXPURG1",90,0)
 S ECEDT=+Y
"RTN","ECXPURG1",91,0)
ASK4 ; ask to confirm date range
"RTN","ECXPURG1",92,0)
 W !!,"I will purge the ",$S(ECY="I":"IVP",1:"UDP")," holding file from <",$$FMTE^XLFDT(ECBDT,"D"),"> to <",$$FMTE^XLFDT(ECEDT,"D"),">."
"RTN","ECXPURG1",93,0)
 W $C(7),$C(7),!!?3,"** REMEMBER - Once this data is purged it CANNOT be recreated. **"
"RTN","ECXPURG1",94,0)
 W !! K DIR S DIR(0)="Y",DIR("A")="Is this OK",DIR("B")="NO"
"RTN","ECXPURG1",95,0)
 S DIR("?",1)="    Enter:"
"RTN","ECXPURG1",96,0)
 S DIR("?",2)="      ""YES"" if you agree with this date range and wish to proceed,"
"RTN","ECXPURG1",97,0)
 S DIR("?",3)="       ""NO"" if you would like to make a different selection, or"
"RTN","ECXPURG1",98,0)
 S DIR("?")="        ""^"" to exit option."
"RTN","ECXPURG1",99,0)
 D ^DIR K DIR I $D(DIRUT) K ECBDT,ECEDT Q 
"RTN","ECXPURG1",100,0)
 I 'Y G DATES
"RTN","ECXPURG1",101,0)
 ; at this point, ECBDT and ECEDT are passed back to ^ECXPURG
"RTN","ECXPURG1",102,0)
 Q
"RTN","ECXPURG1",103,0)
 ;
"RTN","ECXPURG1",104,0)
DIVCHK(ECLOC,ECTMP) ;**Remove extracts from ECLOC that are for user's div.
"RTN","ECXPURG1",105,0)
 N ECLPDA
"RTN","ECXPURG1",106,0)
 S ECLPDA=0
"RTN","ECXPURG1",107,0)
 F  S ECLPDA=$O(ECLOC(ECLPDA)) Q:(+ECLPDA=0)  DO
"RTN","ECXPURG1",108,0)
 .I '$D(ECTMP($P(^ECX(727,ECLPDA,"DIV"),"^",1))) KILL ECLOC(ECLPDA)
"RTN","ECXPURG1",109,0)
 Q
"RTN","ECXPUTL")
0^1^B8535585
"RTN","ECXPUTL",1,0)
ECXPUTL ;ALB/GTS - Utilities for DSS Prosthetics Extract ;July 15, 1998
"RTN","ECXPUTL",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXPUTL",3,0)
 ;
"RTN","ECXPUTL",4,0)
PDIV() ; Prompt the user for a division and return its IEN
"RTN","ECXPUTL",5,0)
 ;
"RTN","ECXPUTL",6,0)
 ; Output:
"RTN","ECXPUTL",7,0)
 ;  ECXDIV
"RTN","ECXPUTL",8,0)
 ;     Successful  - Institution file IEN for the selected division
"RTN","ECXPUTL",9,0)
 ;   Unsuccessful  - 0
"RTN","ECXPUTL",10,0)
 ;
"RTN","ECXPUTL",11,0)
 N ECXDIV,ECTMP,ECDIVCT,ECDIVSXS,ECDIVLP
"RTN","ECXPUTL",12,0)
 S ECXDIV=0
"RTN","ECXPUTL",13,0)
 S ECDIVSXS=$$DIV4^XUSER(.ECTMP,DUZ) ;**Set up array of user divisions
"RTN","ECXPUTL",14,0)
 ;
"RTN","ECXPUTL",15,0)
 ;** If the user doesn't have divisions setup
"RTN","ECXPUTL",16,0)
 I 'ECDIVSXS DO
"RTN","ECXPUTL",17,0)
 .S DIR(0)="FAO^1:1"
"RTN","ECXPUTL",18,0)
 .S DIR("A",1)="You do not have any divisions defined in your user set up."
"RTN","ECXPUTL",19,0)
 .S DIR("A",2)="Contact an ADPAC or IRM for assistance."
"RTN","ECXPUTL",20,0)
 .S DIR("A")="Hit Return to continue."
"RTN","ECXPUTL",21,0)
 .D ^DIR K DIR,X,Y
"RTN","ECXPUTL",22,0)
 ;
"RTN","ECXPUTL",23,0)
 ;** If the user does have divisions setup
"RTN","ECXPUTL",24,0)
 I ECDIVSXS DO
"RTN","ECXPUTL",25,0)
 .S (ECDIVCT,ECDIVLP)=0
"RTN","ECXPUTL",26,0)
 .F  S ECDIVLP=$O(ECTMP(ECDIVLP)) Q:(+ECDIVLP=0)  DO
"RTN","ECXPUTL",27,0)
 ..I $D(^RMPR(669.9,"C",ECDIVLP)) S ECDIVCT=ECDIVCT+1
"RTN","ECXPUTL",28,0)
 ..I '$D(^RMPR(669.9,"C",ECDIVLP)) K ECTMP(ECDIVLP)
"RTN","ECXPUTL",29,0)
 .I 'ECDIVCT DO
"RTN","ECXPUTL",30,0)
 ..S DIR(0)="FAO^1:1"
"RTN","ECXPUTL",31,0)
 ..S DIR("A",1)="Your division is not set up as a prosthetic division."
"RTN","ECXPUTL",32,0)
 ..S DIR("A")="Hit Return to continue."
"RTN","ECXPUTL",33,0)
 ..D ^DIR K DIR,X,Y
"RTN","ECXPUTL",34,0)
 .I ECDIVCT=1 DO
"RTN","ECXPUTL",35,0)
 ..S ECXDIV=$O(ECTMP(""))
"RTN","ECXPUTL",36,0)
 ..K ECXDIC S DA=ECXDIV,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01;99"
"RTN","ECXPUTL",37,0)
 ..D EN^DIQ1 S ECXSNUM=$G(ECXDIC(4,DA,99,"I"))
"RTN","ECXPUTL",38,0)
 ..S ECXSNAME=$G(ECXDIC(4,DA,.01,"I"))
"RTN","ECXPUTL",39,0)
 ..K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXPUTL",40,0)
 ..I $L(ECXSNUM)>3 DO
"RTN","ECXPUTL",41,0)
 ...K ECTMP(ECXDIV)
"RTN","ECXPUTL",42,0)
 ...S DIR(0)="FAO^1:1"
"RTN","ECXPUTL",43,0)
 ...S DIR("A",1)="Your division ("_ECXSNUM_") is not a prosthetic primary division."
"RTN","ECXPUTL",44,0)
 ...S DIR("A",2)="Note that the Station Number ("_ECXSNUM_") is longer than 3 characters"
"RTN","ECXPUTL",45,0)
 ...S DIR("A",3)=" for the Station "_ECXSNAME_"."
"RTN","ECXPUTL",46,0)
 ...S DIR("A",4)="Check with IRM to identify the primary division and add it to your New Person"
"RTN","ECXPUTL",47,0)
 ...S DIR("A",5)=" file entry."
"RTN","ECXPUTL",48,0)
 ...S DIR("A")="Hit Return to continue."
"RTN","ECXPUTL",49,0)
 ...D ^DIR K DIR,X,Y
"RTN","ECXPUTL",50,0)
 ...S ECXDIV=0
"RTN","ECXPUTL",51,0)
 ..K ECXSNUM,ECXSNAME
"RTN","ECXPUTL",52,0)
 .I ECDIVCT>1 DO
"RTN","ECXPUTL",53,0)
 ..S DIC("A")="Select Prosthetic Division: ",DIC(0)="AEQM",DIC="^DIC(4,"
"RTN","ECXPUTL",54,0)
 ..S DIC("S")="I $D(ECTMP(+Y))&(+$L($P($G(^DIC(4,+Y,99)),""^"",1))=3)" D ^DIC
"RTN","ECXPUTL",55,0)
 ..I '$D(DTOUT),'$D(DUOUT),Y>0 S ECXDIV=+Y
"RTN","ECXPUTL",56,0)
 ..I $D(DTOUT)!($D(DUOUT))!(Y<1) DO
"RTN","ECXPUTL",57,0)
 ...S DIR(0)="FAO^1:1"
"RTN","ECXPUTL",58,0)
 ...S DIR("A",1)="You did not select a prosthetic division."
"RTN","ECXPUTL",59,0)
 ...S DIR("A")="Hit Return to continue."
"RTN","ECXPUTL",60,0)
 ...D ^DIR K DIR,X,Y
"RTN","ECXPUTL",61,0)
 ...S ECXDIV=0
"RTN","ECXPUTL",62,0)
 Q ECXDIV
"RTN","ECXTRAC")
0^3^B42797432
"RTN","ECXTRAC",1,0)
ECXTRAC ;BIR/DMA,CML-Package Extracts for DSS ; 11/08/96 15:37
"RTN","ECXTRAC",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXTRAC",3,0)
 ;Date range, queuing and message sending for package extracts
"RTN","ECXTRAC",4,0)
 ;Input ECPACK   printed name of package (e.g. Lab, Prescriptions)
"RTN","ECXTRAC",5,0)
 ;      ECNODE   in file 728 where last date is stored
"RTN","ECXTRAC",6,0)
 ;      ECPIECE  piece of node where last date is stored
"RTN","ECXTRAC",7,0)
 ;      ECRTN    in the form of START^ROUTINE
"RTN","ECXTRAC",8,0)
 ;      ECGRP    name of local mail group to receive summary message
"RTN","ECXTRAC",9,0)
 ;               (MUST BE 1 TO 5 UPPER CASE ALPHA - NO SPACES)
"RTN","ECXTRAC",10,0)
 ;      ECFILE   file number of the local editing file
"RTN","ECXTRAC",11,0)
 ; generates EC23=2nd and 3rd piece of zero node in local editing file
"RTN","ECXTRAC",12,0)
 ;               =YYMM of end date^pointer to 727
"RTN","ECXTRAC",13,0)
 ;
"RTN","ECXTRAC",14,0)
BEG ;
"RTN","ECXTRAC",15,0)
 I '$D(ECNODE) S ECNODE=7
"RTN","ECXTRAC",16,0)
 I '$D(ECHEAD) S ECHEAD=" "
"RTN","ECXTRAC",17,0)
 I $P($G(^ECX(728,1,ECNODE+.1)),"^",ECPIECE)]"" W !!,$C(7),ECPACK," extract is already scheduled to run",!! Q
"RTN","ECXTRAC",18,0)
 W @IOF,!,"Extract ",ECPACK," Information for DSS",!!
"RTN","ECXTRAC",19,0)
 S:'$D(ECINST) ECINST=+$P(^ECX(728,1,0),"^")
"RTN","ECXTRAC",20,0)
 S:('$D(ECX2TME)) ECXINST=ECINST
"RTN","ECXTRAC",21,0)
 S ECX2TME=""
"RTN","ECXTRAC",22,0)
 K ECXDIC S DA=ECINST,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01;99"
"RTN","ECXTRAC",23,0)
 D EN^DIQ1 S ECINST=$G(ECXDIC(4,DA,99,"I")) K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXTRAC",24,0)
 ;
"RTN","ECXTRAC",25,0)
 ;* Get LAST DATE for all extracts EXCEPT Prosthetics
"RTN","ECXTRAC",26,0)
 I ECGRP'="PRO" DO
"RTN","ECXTRAC",27,0)
 .S ECLDT=$S($D(^ECX(728,1,ECNODE)):$P(^(ECNODE),"^",ECPIECE),1:2610624)
"RTN","ECXTRAC",28,0)
 .S:ECLDT="" ECLDT=2610624
"RTN","ECXTRAC",29,0)
 ;
"RTN","ECXTRAC",30,0)
 ;* Get LAST DATE for Prosthetics
"RTN","ECXTRAC",31,0)
 I ECGRP="PRO" DO
"RTN","ECXTRAC",32,0)
 .N ECXDA1
"RTN","ECXTRAC",33,0)
 .S ECXDA1=$O(^ECX(728,0))
"RTN","ECXTRAC",34,0)
 .I $D(^ECX(728,ECXDA1,1,ECXINST,0)) DO
"RTN","ECXTRAC",35,0)
 ..S ECLDT=$P(^ECX(728,ECXDA1,1,ECXINST,0),"^",2)
"RTN","ECXTRAC",36,0)
 .I '$D(^ECX(728,ECXDA1,1,ECXINST,0)) DO
"RTN","ECXTRAC",37,0)
 ..S DA(1)=ECXDA1
"RTN","ECXTRAC",38,0)
 ..S DIC(0)="L" K ECXDD
"RTN","ECXTRAC",39,0)
 ..D FIELD^DID(728,59,,"SPECIFIER","ECXDD")
"RTN","ECXTRAC",40,0)
 ..S DIC("P")=ECXDD("SPECIFIER") K ECXDD
"RTN","ECXTRAC",41,0)
 ..S DIC="^ECX(728,"_DA(1)_",1,",X=ECXINST,DINUM=X
"RTN","ECXTRAC",42,0)
 ..K DD,DO D FILE^DICN
"RTN","ECXTRAC",43,0)
 ..K DIC,X,DINUM,Y,DA
"RTN","ECXTRAC",44,0)
 ..S ECLDT=2610624
"RTN","ECXTRAC",45,0)
 ;
"RTN","ECXTRAC",46,0)
 K %DT S %DT="AEX",%DT("A")="Starting with Date: " D ^%DT G:Y<0 END S ECSD=Y
"RTN","ECXTRAC",47,0)
EDATE K %DT S %DT="AEX",%DT("A")="Ending with Date: " D ^%DT G:Y<0 END
"RTN","ECXTRAC",48,0)
 I Y<ECSD W !!,"The ending date cannot be earlier than the starting date.  Please re-enter",!,"the ending date.",! G EDATE
"RTN","ECXTRAC",49,0)
 I $E(Y,1,5)'=$E(ECSD,1,5) W !!,"Beginning and ending dates must be in the same month and year",!! R "Type return to continue ",X:10 K X G BEG
"RTN","ECXTRAC",50,0)
 S ECED=Y
"RTN","ECXTRAC",51,0)
 I ECLDT'<ECSD W !!,"The ",ECPACK," information has already been extracted through ",$$FMTE^XLFDT(ECLDT),".",!,"Please enter a new date range.",!!,"Press <RET> to continue  " R X:DTIME G BEG
"RTN","ECXTRAC",52,0)
 K ECX2TME
"RTN","ECXTRAC",53,0)
QUE ; queue extract
"RTN","ECXTRAC",54,0)
 ;If the extract is IVP (i.e., file=727.819), check to see which feeder key format to use
"RTN","ECXTRAC",55,0)
 ;If there is data in the intermediate file (#728.113) for the START DATE the user selects OR there is data for a date prior to the START DATE use new format
"RTN","ECXTRAC",56,0)
 I ECFILE=727.819,$O(^ECX(728.113,"A",ECED+1),-1) D  G:CHKFLG END
"RTN","ECXTRAC",57,0)
 .D CHK Q:CHKFLG
"RTN","ECXTRAC",58,0)
 .D CHK2 Q:CHKFLG
"RTN","ECXTRAC",59,0)
 .S ECRTN="START^ECXPIVDN",ECVER=7
"RTN","ECXTRAC",60,0)
 I '$D(ECNODE) S ECNODE=7
"RTN","ECXTRAC",61,0)
 I '$D(ECHEAD) S ECHEAD=""
"RTN","ECXTRAC",62,0)
 S ECSDN=$$FMTE^XLFDT(ECSD),ECEDN=$$FMTE^XLFDT(ECED),ECSD1=ECSD-.1
"RTN","ECXTRAC",63,0)
 K ZTSAVE S (ZTSAVE("ECINST"),ZTSAVE("ECED"),ZTSAVE("ECSD"),ZTSAVE("ECSD1"),ZTSAVE("ECEDN"),ZTSAVE("ECSDN"),ZTSAVE("ECPACK"),ZTSAVE("ECPIECE"),ZTSAVE("ECRTN"),ZTSAVE("ECGRP"),ZTSAVE("ECNODE"),ZTSAVE("ECFILE"),ZTSAVE("ECHEAD"),ZTSAVE("ECVER"))=""
"RTN","ECXTRAC",64,0)
 S ZTSAVE("ECXINST")=""
"RTN","ECXTRAC",65,0)
 S ZTDESC=ECPACK_" EXTRACT: "_ECSDN_" TO "_ECEDN,ZTRTN="START^ECXTRAC",ZTIO="" D ^%ZTLOAD
"RTN","ECXTRAC",66,0)
 I $D(ZTSK) S $P(^ECX(728,1,ECNODE+.1),"^",ECPIECE)="R" W !,"Request queued as Task #",ZTSK,".",!
"RTN","ECXTRAC",67,0)
END D ^ECXKILL
"RTN","ECXTRAC",68,0)
 Q
"RTN","ECXTRAC",69,0)
START ; entry when queued
"RTN","ECXTRAC",70,0)
 S QFLG=0
"RTN","ECXTRAC",71,0)
 L +^ECX(727,0) S EC=$P(^ECX(727,0),"^",3)+1,$P(^(0),"^",3,4)=EC_"^"_EC L -^ECX(727,0)
"RTN","ECXTRAC",72,0)
 S ^ECX(727,EC,0)=EC_"^"_DT_"^"_ECPACK_"^"_ECSD_"^"_$E(ECED,1,7)
"RTN","ECXTRAC",73,0)
 S ^ECX(727,EC,"HEAD")=ECHEAD
"RTN","ECXTRAC",74,0)
 S ^ECX(727,EC,"FILE")=ECFILE
"RTN","ECXTRAC",75,0)
 S ^ECX(727,EC,"GRP")=ECGRP
"RTN","ECXTRAC",76,0)
 I $D(ECVER) S ^ECX(727,EC,"VER")=ECVER
"RTN","ECXTRAC",77,0)
 S ^ECX(727,EC,"DIV")=ECXINST
"RTN","ECXTRAC",78,0)
 S DA=EC,DIK="^ECX(727," D IX^DIK K DIK,DA
"RTN","ECXTRAC",79,0)
 S ECRN=0,ECXYM=$$ECXYM^ECXUTL(ECED),EC23=ECXYM_"^"_EC
"RTN","ECXTRAC",80,0)
EXTRACT ;do specific extract
"RTN","ECXTRAC",81,0)
 S ECXSTART=$P($$HTE^XLFDT($H),":",1,2),ECXNOW=$H
"RTN","ECXTRAC",82,0)
 D @ECRTN
"RTN","ECXTRAC",83,0)
 ;if task gets stop request, set ztstop and quit
"RTN","ECXTRAC",84,0)
 I QFLG S $P(^ECX(728,1,ECNODE+.1),"^",ECPIECE)="",ZTSTOP=1 Q
"RTN","ECXTRAC",85,0)
 ;
"RTN","ECXTRAC",86,0)
 ;* Set LAST DATE for all extracts EXCEPT Prosthetics
"RTN","ECXTRAC",87,0)
 S:(ECGRP'="PRO") $P(^ECX(728,1,ECNODE),"^",ECPIECE)=$P(ECED,".")
"RTN","ECXTRAC",88,0)
 ;
"RTN","ECXTRAC",89,0)
 ;* Set LAST DATE for Prosthetics
"RTN","ECXTRAC",90,0)
 I ECGRP="PRO" DO
"RTN","ECXTRAC",91,0)
 .N ECXDA1
"RTN","ECXTRAC",92,0)
 .S ECXDA1=$O(^ECX(728,0))
"RTN","ECXTRAC",93,0)
 .S $P(^ECX(728,ECXDA1,1,ECXINST,0),"^",2)=$P(ECED,".")
"RTN","ECXTRAC",94,0)
 ;
"RTN","ECXTRAC",95,0)
 S TIME=$P($$HTE^XLFDT($H),":",1,2)
"RTN","ECXTRAC",96,0)
 S $P(^ECX(727,$P(EC23,"^",2),0),"^",6)=ECRN
"RTN","ECXTRAC",97,0)
 S ECLAST=-$O(^ECX(ECFILE,"AINV","")),ECTOTAL=$P(^ECX(ECFILE,0),"^",4)+ECRN,$P(^(0),"^",3,4)=ECLAST_"^"_ECTOTAL K ECLAST,ECTOTAL
"RTN","ECXTRAC",98,0)
 ;set piece 3 and 4 of the zero node
"RTN","ECXTRAC",99,0)
 ;
"RTN","ECXTRAC",100,0)
MSG ; send message to mail group 'DSS-ECGRP'
"RTN","ECXTRAC",101,0)
 N ECSXS
"RTN","ECXTRAC",102,0)
 I ECPACK="Prosthetics" DO
"RTN","ECXTRAC",103,0)
 .S ECSXS=$$MSG^ECXAPRO("G.DSS-"_ECGRP,ECSD,ECED,ECSDN,ECEDN,ECXINST,EC23,QFLG,ECINST)
"RTN","ECXTRAC",104,0)
 S XMSUB=ECINST_" - "_ECPACK_" EXTRACT FOR DSS",XMDUZ="DSS SYSTEM"
"RTN","ECXTRAC",105,0)
 K XMY S XMY("G.DSS-"_ECGRP_"@"_^XMB("NETNAME"))=""
"RTN","ECXTRAC",106,0)
 S ECMSG(1,0)="The DSS-"_ECPACK_" extract (#"_$P(EC23,"^",2)_") for "_ECSDN,ECMSG(2,0)="through "_ECEDN_" was begun on "_$P(ECXSTART,"@")_" at "_$P(ECXSTART,"@",2)
"RTN","ECXTRAC",107,0)
 S ECMSG(3,0)="and completed on "_$P(TIME,"@")_" at "_$P(TIME,"@",2)_"."
"RTN","ECXTRAC",108,0)
 S ECMSG(4,0)=" ",ECMSG(5,0)="A total of "_ECRN_" records were written."
"RTN","ECXTRAC",109,0)
 S ECMSG(6,0)=" ",ECMSG(7,0)="Extract time was [HH:MM:SS] "_$$HDIFF^XLFDT($H,ECXNOW,3),ECMSG(8,0)=" "
"RTN","ECXTRAC",110,0)
 I $D(ECSXS),('ECSXS) DO
"RTN","ECXTRAC",111,0)
 .S ECMSG(9,0)="There was a problem sending the HCPCS cost bulletin."
"RTN","ECXTRAC",112,0)
 .S ECMSG(10,0)=" "
"RTN","ECXTRAC",113,0)
 S XMTEXT="ECMSG(" D ^XMD
"RTN","ECXTRAC",114,0)
 S $P(^ECX(728,1,ECNODE+.1),"^",ECPIECE)="" D ^ECXKILL
"RTN","ECXTRAC",115,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","ECXTRAC",116,0)
 Q
"RTN","ECXTRAC",117,0)
 ;
"RTN","ECXTRAC",118,0)
CHK ; called from IVP extract and IV room options to check for existence
"RTN","ECXTRAC",119,0)
 ; of necessary files for "division" functionality
"RTN","ECXTRAC",120,0)
 S CHKFLG=0
"RTN","ECXTRAC",121,0)
 I '$O(^PS(59.5,0)) W !,"The IV Room file (#59.5) does not exist!" S CHKFLG=1 Q
"RTN","ECXTRAC",122,0)
 I '$D(^ECX(728.113,0)) W $C(7),!!,"Your facility appears to be running a version of Inpatient Medications prior to",!,"the version 4.5 that is necessary to use this option." S CHKFLG=1 Q
"RTN","ECXTRAC",123,0)
 K TEST1 D FIELD^DID(59.5,.02,"","TYPE","TEST1")
"RTN","ECXTRAC",124,0)
 I '$D(TEST1) W $C(7),!!,"The Inpatient Medications Patch PSJ*4.5*27 has not yet been installed!",!,"It must be loaded before you can proceed with this option." S CHKFLG=1 Q
"RTN","ECXTRAC",125,0)
 Q
"RTN","ECXTRAC",126,0)
CHK2 ; check for all active IV rooms to have a "division"
"RTN","ECXTRAC",127,0)
 S EC=0 F  S EC=$O(^PS(59.5,EC)) Q:'EC  I '$P(^PS(59.5,EC,0),"^",4) D  I CHKFLG D MSG2 Q
"RTN","ECXTRAC",128,0)
 .S CHKFLG=$S('$G(^PS(59.5,EC,"I")):1,$G(^PS(59.5,EC,"I"))>DT:1,1:0)
"RTN","ECXTRAC",129,0)
 Q
"RTN","ECXTRAC",130,0)
MSG2 ;
"RTN","ECXTRAC",131,0)
 W !!,"All active IV Rooms in the IV Room file (#59.5) must have a ""DIVISION""",!,"assigned to run this extract!"
"RTN","ECXTRAC",132,0)
 W !!,"This information can be entered using the DSS Extract Manager's Maintenance ",!,"option ""Enter/Edit IV Room Division""." Q
"RTN","ECXTRANS")
0^4^B30235549
"RTN","ECXTRANS",1,0)
ECXTRANS ;BIR/DMA-Extract from Local Editing Files and Transmit ; [ 11/26/96  2:13 PM ]
"RTN","ECXTRANS",2,0)
 ;;3.0;DSS EXTRACTS;**2,9**;Dec 22, 1997
"RTN","ECXTRANS",3,0)
EN ;entry point from option
"RTN","ECXTRANS",4,0)
 I $G(^ECX(728,1,"QUEUE"))'?1"DM"1U W !,"You have not defined a proper transmission queue",!,"for entry number 1 in file 728",!,"No transmissions allowed" Q
"RTN","ECXTRANS",5,0)
 S ECXQUEUE=$G(^ECX(728,1,"QUEUE"))
"RTN","ECXTRANS",6,0)
 ;
"RTN","ECXTRANS",7,0)
 ;** Check divisions for transmission
"RTN","ECXTRANS",8,0)
 N ECCHK
"RTN","ECXTRANS",9,0)
 S ECCHK=$$DIV4^XUSER(.ECTMP,DUZ)
"RTN","ECXTRANS",10,0)
 I 'ECCHK DO
"RTN","ECXTRANS",11,0)
 .W !,"You do not have any divisions defined in your user set up and can not transmit."
"RTN","ECXTRANS",12,0)
 .S DIR(0)="FAO^1:1",DIR("A")="Hit Return to continue." D ^DIR K DIR,X,Y
"RTN","ECXTRANS",13,0)
 ;
"RTN","ECXTRANS",14,0)
 I 'ECCHK Q  ;**QUIT out of middle
"RTN","ECXTRANS",15,0)
 ;
"RTN","ECXTRANS",16,0)
 W !!,"Your user setup will only allow you to transmit extracts from the"
"RTN","ECXTRANS",17,0)
 W !," following divisions:",!
"RTN","ECXTRANS",18,0)
 N ECDIVVR S ECDIVVR=""
"RTN","ECXTRANS",19,0)
 F  S ECDIVVR=$O(ECTMP(ECDIVVR)) Q:'(+ECDIVVR)  DO
"RTN","ECXTRANS",20,0)
 .K ECXDIC S DA=ECDIVVR,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01"
"RTN","ECXTRANS",21,0)
 .D EN^DIQ1 W !,"   ",$G(ECXDIC(4,DA,.01,"I")) K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXTRANS",22,0)
 W !!,"If you can't select an extract, it is probably from another division.",!
"RTN","ECXTRANS",23,0)
 ;
"RTN","ECXTRANS",24,0)
 W ! S ECRE="",DIC=727,DIC(0)="AEQM",DIC("A")="Transmit which extract: "
"RTN","ECXTRANS",25,0)
 S DIC("S")="I '$D(^ECX(727,+Y,""L"")),'$D(^ECX(727,+Y,""PURG"")),$D(ECTMP(+$P($G(^ECX(727,+Y,""DIV"")),""^"",1)))"
"RTN","ECXTRANS",26,0)
 D ^DIC K DIC G END:Y<0
"RTN","ECXTRANS",27,0)
 I $G(^ECX(727,+Y,"PURG")) S ECX=^("PURG") W !,"Data for this extract was purged on ",$TR($$FMTE^XLFDT(ECX,"5DF")," ","0") K ECX G ECXTRANS
"RTN","ECXTRANS",28,0)
 S ECDA=+Y I $G(^ECX(727,ECDA,"TR")) S ECX=^("TR") W !,"This extract was transmitted on ",$TR($$FMTE^XLFDT(ECX,"5DF")," ","0") K ECX S DIR(0)="Y",DIR("A")="Do you want to retransmit " D ^DIR K DIR G ECXTRANS:'Y K ^ECX(727,ECDA,"TR") S ECRE="re"
"RTN","ECXTRANS",29,0)
 S ZTSK=$G(^ECX(727,ECDA,"Q")) I ZTSK D STAT^%ZTLOAD I ZTSK(0) I ZTSK(1)<3 W !!,"Task ",ZTSK," is already queued to transmit this extract",!! K ZTSK G ECXTRANS
"RTN","ECXTRANS",30,0)
 S ZTSAVE("ECDA")="",ZTSAVE("ECXQUEUE")="",ZTSAVE("ECRE")="",ZTRTN="START^ECXTRANS",ZTIO="",ZTDESC="Transmission of extract # "_ECDA D ^%ZTLOAD
"RTN","ECXTRANS",31,0)
 I $D(ZTSK) W !,"Request queued as Task #",ZTSK,".",! S ^ECX(727,ECDA,"Q")=ZTSK K ZTSK
"RTN","ECXTRANS",32,0)
END ;exit
"RTN","ECXTRANS",33,0)
 K ECDA,ECRE,X,Y,ECTMP Q
"RTN","ECXTRANS",34,0)
 Q
"RTN","ECXTRANS",35,0)
 ;
"RTN","ECXTRANS",36,0)
START ; entry point
"RTN","ECXTRANS",37,0)
 S:$P(^ECX(727,ECDA,0),"^",3)'="Prosthetics" ECINST=$P(^ECX(728,1,0),"^")
"RTN","ECXTRANS",38,0)
 S:$P(^ECX(727,ECDA,0),"^",3)="Prosthetics" ECINST=$P(^("DIV"),"^")
"RTN","ECXTRANS",39,0)
 K ECXDIC S DA=ECINST,DIC="^DIC(4,",DIQ(0)="I",DIQ="ECXDIC",DR=".01;99"
"RTN","ECXTRANS",40,0)
 D EN^DIQ1 S ECINST=$G(ECXDIC(4,DA,99,"I")) K DIC,DIQ,DA,DR,ECXDIC
"RTN","ECXTRANS",41,0)
 S ECF=^ECX(727,ECDA,"FILE"),ECHEAD=^("HEAD"),ECGRP=^("GRP"),ECED=$P(^(0),"^",5),ECPACK=$P(^(0),"^",3),ECVER=$G(^("VER")) S:'ECVER ECVER=1 S ECVER=$$RJ^XLFSTR(ECVER,3,0)
"RTN","ECXTRANS",42,0)
 I ECPACK["(setup)" S ECXQUEUE="DMU"
"RTN","ECXTRANS",43,0)
 ;all setup extracts for all sites to go to queue DMU - Judy Sine 2/16/95
"RTN","ECXTRANS",44,0)
 I ECHEAD="LAR",+ECED<2971001 S ECXQUEUE="DMW"
"RTN","ECXTRANS",45,0)
 ;all LAR extracts for fy96/fy97 for test sites go to queue DMW;BTSO/AAC 11/18/97
"RTN","ECXTRANS",46,0)
 K ^TMP($J) S ECHD(1)=ECINST_ECHEAD_$$ECXYM^ECXUTL(ECED)_ECVER,ECRN=0,ECMSN=1,ECMIN=2,ECMAX=200,ECLN=ECMIN
"RTN","ECXTRANS",47,0)
 I ECHEAD="PRO" S ECMAX=150
"RTN","ECXTRANS",48,0)
 ;
"RTN","ECXTRANS",49,0)
 ;* Check for and concat nodes 0 and 1 into one message line
"RTN","ECXTRANS",50,0)
 I ECHEAD="ECQ"!(ECHEAD="ECS") DO
"RTN","ECXTRANS",51,0)
 .F J=0:0 S J=$O(^ECX(ECF,"AC",ECDA,J)) Q:'J  Q:$$S^%ZTLOAD  I $D(^ECX(ECF,J,0)) DO
"RTN","ECXTRANS",52,0)
 ..F JJ=1:1:6 S FIELD(JJ)=$P($G(^ECX(ECF,J,1)),"^",JJ)
"RTN","ECXTRANS",53,0)
 ..S ^TMP($J,ECMSN,ECLN,0)=$P(^ECX(ECF,J,0),"^",4,37)_"^"_FIELD(2)
"RTN","ECXTRANS",54,0)
 ..I $D(^ECX(ECF,J,1)) S ^TMP($J,ECMSN,ECLN,0)=^TMP($J,ECMSN,ECLN,0)_"^"_FIELD(1)_"^"_FIELD(3)_"^"_FIELD(4)_"^"_FIELD(5)_"^"_FIELD(6)
"RTN","ECXTRANS",55,0)
 ..S ^TMP($J,ECMSN,ECLN,0)=^TMP($J,ECMSN,ECLN,0)_"^~"
"RTN","ECXTRANS",56,0)
 ..S ECLN=ECLN+1,ECRN=ECRN+1 I ECLN>ECMAX,$O(^ECX(ECF,"AC",ECDA,J)) S ECLN=ECMIN,ECMSN=ECMSN+1
"RTN","ECXTRANS",57,0)
 I ECHEAD'="ECQ"&(ECHEAD'="ECS") DO
"RTN","ECXTRANS",58,0)
 .F J=0:0 S J=$O(^ECX(ECF,"AC",ECDA,J)) Q:'J  Q:$$S^%ZTLOAD  I $D(^ECX(ECF,J,0)) DO
"RTN","ECXTRANS",59,0)
 ..S ^TMP($J,ECMSN,ECLN,0)=$P(^ECX(ECF,J,0),"^",4,100)
"RTN","ECXTRANS",60,0)
 ..I $D(^ECX(ECF,J,1)) S ^TMP($J,ECMSN,ECLN,0)=^TMP($J,ECMSN,ECLN,0)_"^"_$P(^ECX(ECF,J,1),"^",1,100)
"RTN","ECXTRANS",61,0)
 ..S ^TMP($J,ECMSN,ECLN,0)=^TMP($J,ECMSN,ECLN,0)_"^~"
"RTN","ECXTRANS",62,0)
 ..S ECLN=ECLN+1,ECRN=ECRN+1 I ECLN>ECMAX,$O(^ECX(ECF,"AC",ECDA,J)) S ECLN=ECMIN,ECMSN=ECMSN+1
"RTN","ECXTRANS",63,0)
 ;
"RTN","ECXTRANS",64,0)
 ;*Next line is OLD CODE
"RTN","ECXTRANS",65,0)
 ;F J=0:0 S J=$O(^ECX(ECF,"AC",ECDA,J)) Q:'J  I $D(^ECX(ECF,J,0)) S ^TMP($J,ECMSN,ECLN,0)=$P(^ECX(ECF,J,0),"^",4,100)_"^~",ECLN=ECLN+1,ECRN=ECRN+1 I ECLN>ECMAX,$O(^ECX(ECF,"AC",ECDA,J)) S ECLN=ECMIN,ECMSN=ECMSN+1 I $$S^%ZTLOAD Q
"RTN","ECXTRANS",66,0)
 I $$S^%ZTLOAD G CLEAN
"RTN","ECXTRANS",67,0)
 ;
"RTN","ECXTRANS",68,0)
 S TIME=$P($$HTE^XLFDT($H),":",1,2)
"RTN","ECXTRANS",69,0)
 ; send message to mail group 'DSS-ECGRP'
"RTN","ECXTRANS",70,0)
 S ECXLNCNT=7
"RTN","ECXTRANS",71,0)
 F ECMS=1:1:ECMSN D SEND
"RTN","ECXTRANS",72,0)
 S XMSUB=ECINST_" - "_ECPACK_" EXTRACT FOR DSS",XMDUZ="DSS SYSTEM"
"RTN","ECXTRANS",73,0)
 K XMY S XMY("G.DSS-"_ECGRP_"@"_^XMB("NETNAME"))=""
"RTN","ECXTRANS",74,0)
 S ^TMP($J,"LOC",1,0)="The DSS "_ECPACK_" extract (#"_ECDA_") was "_ECRE_"transmitted on "_$P(TIME,"@")_" at "_$P(TIME,"@",2)_". ",^TMP($J,"LOC",3,0)=" ",^TMP($J,"LOC",4,0)="A total of "_ECRN_" records were written."
"RTN","ECXTRANS",75,0)
 S ^TMP($J,"LOC",5,0)="A total of "_ECMSN_" messages were sent.",^TMP($J,"LOC",6,0)="    Message numbers :"
"RTN","ECXTRANS",76,0)
 S XMTEXT="^TMP($J,""LOC""," D ^XMD S ^ECX(727,ECDA,"TR")=DT
"RTN","ECXTRANS",77,0)
CLEAN ;
"RTN","ECXTRANS",78,0)
 S ZTREQ="@" K ^TMP($J),^ECX(727,ECDA,"Q") D ^ECXKILL
"RTN","ECXTRANS",79,0)
 I $$S^%ZTLOAD K ZTREQ S ZTSTOP=1
"RTN","ECXTRANS",80,0)
 Q
"RTN","ECXTRANS",81,0)
 ;
"RTN","ECXTRANS",82,0)
SEND ;send individual messages
"RTN","ECXTRANS",83,0)
 S XMSUB="("_ECGRP_") "_ECINST_" - "_ECPACK_" DSS EXTRACT, MESSAGE "_ECMS_" OF "_ECMSN,XMDUZ="DSS SYSTEM"
"RTN","ECXTRANS",84,0)
 F J=1:1:ECMIN-1 S ^TMP($J,ECMS,J,0)=ECHD(J)
"RTN","ECXTRANS",85,0)
 K XMY
"RTN","ECXTRANS",86,0)
 S XMY("XXX@Q-"_ECXQUEUE_".VA.GOV")=""
"RTN","ECXTRANS",87,0)
 S XMTEXT="^TMP($J,ECMS," D ^XMD S ^TMP($J,"LOC",ECXLNCNT,0)=XMZ,ECXLNCNT=ECXLNCNT+1
"RTN","ECXTRANS",88,0)
SETM S DA(1)=ECDA,DIC(0)="L" K ECXDD D FIELD^DID(727,301,,"SPECIFIER","ECXDD") S DIC("P")=ECXDD("SPECIFIER") K ECXDD S DIC="^ECX(727,"_DA(1)_",1,",X=XMZ,DINUM=X K DD,DO D FILE^DICN
"RTN","ECXTRANS",89,0)
 Q
"RTN","ECXTRANS",90,0)
 ;
"RTN","ECXUTL1")
0^2^B7432853
"RTN","ECXUTL1",1,0)
ECXUTL1 ;ALB/GTS - Utilities for DSS Extracts ;July 16, 1998
"RTN","ECXUTL1",2,0)
 ;;3.0;DSS EXTRACTS;**9**;Dec 22, 1997
"RTN","ECXUTL1",3,0)
 ;
"RTN","ECXUTL1",4,0)
CYFY(ECXFMDT) ;** Return the calandar and fiscal years for a FM date
"RTN","ECXUTL1",5,0)
 ;
"RTN","ECXUTL1",6,0)
 ; Input
"RTN","ECXUTL1",7,0)
 ;   ECXFMDT - Fileman formated date
"RTN","ECXUTL1",8,0)
 ;
"RTN","ECXUTL1",9,0)
 ; Output
"RTN","ECXUTL1",10,0)
 ;   X - CY begin date^ CY end date^ FY begin date^ FY end date
"RTN","ECXUTL1",11,0)
 ;
"RTN","ECXUTL1",12,0)
 N X,Y,Y2
"RTN","ECXUTL1",13,0)
 S X=""
"RTN","ECXUTL1",14,0)
 S ECXFMDT=$G(ECXFMDT)\1
"RTN","ECXUTL1",15,0)
 I ECXFMDT?7N DO
"RTN","ECXUTL1",16,0)
 .S (Y,Y2)=$E(ECXFMDT,1,3)
"RTN","ECXUTL1",17,0)
 .I $E(ECXFMDT,4,5)>9 S Y2=Y+1
"RTN","ECXUTL1",18,0)
 .S X=Y_"0101^"_Y_"1231^"_(Y2-1)_"1001^"_Y2_"0930"
"RTN","ECXUTL1",19,0)
 Q X
"RTN","ECXUTL1",20,0)
 ;
"RTN","ECXUTL1",21,0)
DTRNG() ;** Prompt the user for a date range
"RTN","ECXUTL1",22,0)
 ;
"RTN","ECXUTL1",23,0)
 N ECXBEG,ECXEND,ECXRNG,ENDRNG
"RTN","ECXUTL1",24,0)
 S ECXRNG=0
"RTN","ECXUTL1",25,0)
 ;
"RTN","ECXUTL1",26,0)
 ;* Prompt for beginning date
"RTN","ECXUTL1",27,0)
 W ! S DIR(0)="DA^:DT:EX",DIR("A")="Enter Start Date: "
"RTN","ECXUTL1",28,0)
 S DIR("?")="^W ""*** Future dates are not allowed ***"",! D HELP^%DTC"
"RTN","ECXUTL1",29,0)
 D ^DIR K DIR
"RTN","ECXUTL1",30,0)
 S:'$D(DIRUT) ECXBEG=+Y
"RTN","ECXUTL1",31,0)
 K %DT,Y,DTOUT,DUOUT,DIRUT
"RTN","ECXUTL1",32,0)
 ;
"RTN","ECXUTL1",33,0)
 ;* Prompt for ending date
"RTN","ECXUTL1",34,0)
 I $G(ECXBEG) DO
"RTN","ECXUTL1",35,0)
 .S ENDRNG=$$CYFY(ECXBEG)
"RTN","ECXUTL1",36,0)
 .S ENDRNG=$S($P(ENDRNG,"^",4)<DT:$P(ENDRNG,"^",4),1:DT)
"RTN","ECXUTL1",37,0)
 .W ! S DIR(0)="DA^"_ECXBEG_":"_ENDRNG_":EX"
"RTN","ECXUTL1",38,0)
 .S DIR("A")="Enter End date: "
"RTN","ECXUTL1",39,0)
 .S DIR("?")="^W ""Future dates and dates after the beginning date's FY end are not allowed."",! D HELP^%DTC"
"RTN","ECXUTL1",40,0)
 .D ^DIR
"RTN","ECXUTL1",41,0)
 .S ECXEND=+Y
"RTN","ECXUTL1",42,0)
 .S:'$D(DIRUT) ECXRNG=ECXBEG_"^"_ECXEND
"RTN","ECXUTL1",43,0)
 .K DIR,%DT,Y,DIRUT,DTOUT,DUOUT
"RTN","ECXUTL1",44,0)
 Q ECXRNG
"RTN","ECXUTL1",45,0)
 ;
"RTN","ECXUTL1",46,0)
STRIP(ECXFIELD,ECXLGTH,ECXPOS) ;* Strip blanks from a padded field
"RTN","ECXUTL1",47,0)
 ;
"RTN","ECXUTL1",48,0)
 ; Input
"RTN","ECXUTL1",49,0)
 ;  ECXFIELD - Data to remove blanks from
"RTN","ECXUTL1",50,0)
 ;  ECXLGTH  - Total length of padded field
"RTN","ECXUTL1",51,0)
 ;  ECXPOS   - Front or Back indicator ('F' or 'B')
"RTN","ECXUTL1",52,0)
 ;
"RTN","ECXUTL1",53,0)
 ; Output
"RTN","ECXUTL1",54,0)
 ;  ECXVAL   - Field with blanks removed
"RTN","ECXUTL1",55,0)
 ;
"RTN","ECXUTL1",56,0)
 N ECXPVAL,QVAL
"RTN","ECXUTL1",57,0)
 S:ECXPOS="B" ECXPVAL=ECXLGTH
"RTN","ECXUTL1",58,0)
 S:ECXPOS="F" ECXPVAL=1
"RTN","ECXUTL1",59,0)
 S QVAL=0
"RTN","ECXUTL1",60,0)
 F  Q:QVAL  DO
"RTN","ECXUTL1",61,0)
 .I ECXPOS="B" DO
"RTN","ECXUTL1",62,0)
 ..S:($E(ECXFIELD,ECXPVAL)'=" ") QVAL=1
"RTN","ECXUTL1",63,0)
 ..S:($E(ECXFIELD,ECXPVAL)=" ") ECXFIELD=$E(ECXFIELD,1,ECXPVAL-1)
"RTN","ECXUTL1",64,0)
 ..S ECXPVAL=ECXPVAL-1
"RTN","ECXUTL1",65,0)
 ..S:(ECXPVAL<1) QVAL=1
"RTN","ECXUTL1",66,0)
 .I ECXPOS="F" DO
"RTN","ECXUTL1",67,0)
 ..S:($E(ECXFIELD,1)'=" ") QVAL=1
"RTN","ECXUTL1",68,0)
 ..S:($E(ECXFIELD,1)=" ") ECXFIELD=$E(ECXFIELD,2,ECXLGTH-(ECXPVAL-1))
"RTN","ECXUTL1",69,0)
 ..S ECXPVAL=ECXPVAL+1
"RTN","ECXUTL1",70,0)
 ..S:(ECXPVAL>ECXLGTH) QVAL=1
"RTN","ECXUTL1",71,0)
 Q ECXFIELD
"RTN","ECXUTL1",72,0)
 ;
"RTN","ECXUTL1",73,0)
PAD(ECXVAL,ECXLGTH,ECXFB,ECXCHAR) ;* Pad the value passed in with ECXCHAR
"RTN","ECXUTL1",74,0)
 ;
"RTN","ECXUTL1",75,0)
 ;   ECXVAL   - The value to pad
"RTN","ECXUTL1",76,0)
 ;   ECXLGTH  - The maximum length
"RTN","ECXUTL1",77,0)
 ;   ECXFB    - 'F': Pad on front; 'B' Pad on back
"RTN","ECXUTL1",78,0)
 ;   ECXCHAR  - The character to pad ECXVAL with
"RTN","ECXUTL1",79,0)
 ;
"RTN","ECXUTL1",80,0)
 ; Output
"RTN","ECXUTL1",81,0)
 ;   ECXVAR   - The padded result
"RTN","ECXUTL1",82,0)
 ;
"RTN","ECXUTL1",83,0)
 N ECXLPCT,ECXVAR
"RTN","ECXUTL1",84,0)
 I $D(ECXVAL),($D(ECXLGTH)),($D(ECXFB)),($D(ECXCHAR)) DO
"RTN","ECXUTL1",85,0)
 .S (ECXVAL,ECXVAR)=$E(ECXVAL,1,ECXLGTH)
"RTN","ECXUTL1",86,0)
 .F ECXLPCT=1:1:ECXLGTH-$L($E(ECXVAR,1,ECXLGTH)) DO
"RTN","ECXUTL1",87,0)
 ..S:ECXFB="B" ECXVAL=ECXVAL_ECXCHAR
"RTN","ECXUTL1",88,0)
 ..S:ECXFB="F" ECXVAL=ECXCHAR_ECXVAL
"RTN","ECXUTL1",89,0)
 I '$D(ECXVAL) S ECXVAL=""
"RTN","ECXUTL1",90,0)
 Q ECXVAL
"SEC","^DIC",727.826,727.826,0,"AUDIT")
@
"SEC","^DIC",727.826,727.826,0,"DD")
@
"SEC","^DIC",727.826,727.826,0,"DEL")
@
"SEC","^DIC",727.826,727.826,0,"LAYGO")
@
"SEC","^DIC",727.826,727.826,0,"RD")
@
"SEC","^DIC",727.826,727.826,0,"WR")
@
"UP",728,728.059,-1)
728^1
"UP",728,728.059,0)
728.059
"VER")
8.0^21.0
"^DD",727,727,15,0)
DIVISION^RP4'^DIC(4,^DIV;1^Q
"^DD",727,727,15,.1)
Division
"^DD",727,727,15,3)
Enter the division of the user that completed the extract.
"^DD",727,727,15,10)
The DSS Extract software (ECXTRAC).
"^DD",727,727,15,21,0)
^^3^3^2980805^^^
"^DD",727,727,15,21,1,0)
This field indicates the division of the user that generated the extract.
"^DD",727,727,15,21,2,0)
This field will also indicate the division from which information was
"^DD",727,727,15,21,3,0)
extracted for prosthetics extracts.
"^DD",727,727,15,23,0)
^^4^4^2980805^^
"^DD",727,727,15,23,1,0)
ECXTRAC defines the value of this field.  To address the divisional
"^DD",727,727,15,23,2,0)
considerations at some hospitals with prosthetic services, this field
"^DD",727,727,15,23,3,0)
was added and will indicated the division for which the prosthetic
"^DD",727,727,15,23,4,0)
extract contains information.
"^DD",727,727,15,"DT")
2980715
"^DD",727.826,727.826,0)
FIELD^^35^36
"^DD",727.826,727.826,0,"DDA")
N
"^DD",727.826,727.826,0,"DT")
2980715
"^DD",727.826,727.826,0,"IX","AC",727.826,2)

"^DD",727.826,727.826,0,"IX","AG1",727.826,8)

"^DD",727.826,727.826,0,"IX","AG2",727.826,14)

"^DD",727.826,727.826,0,"IX","AG3",727.826,32)

"^DD",727.826,727.826,0,"IX","AINV",727.826,.01)

"^DD",727.826,727.826,0,"IX","B",727.826,.01)

"^DD",727.826,727.826,0,"NM","PROSTHETICS EXTRACT")

"^DD",727.826,727.826,0,"VRPK")
ECX
"^DD",727.826,727.826,.01,0)
SEQUENCE NUMBER^RNJ9,0X^^0;1^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X S:$D(X) DINUM=X
"^DD",727.826,727.826,.01,.1)
Sequence Number
"^DD",727.826,727.826,.01,1,0)
^.1
"^DD",727.826,727.826,.01,1,1,0)
727.826^B
"^DD",727.826,727.826,.01,1,1,1)
S ^ECX(727.826,"B",$E(X,1,30),DA)=""
"^DD",727.826,727.826,.01,1,1,2)
K ^ECX(727.826,"B",$E(X,1,30),DA)
"^DD",727.826,727.826,.01,1,2,0)
727.826^AINV^MUMPS
"^DD",727.826,727.826,.01,1,2,1)
S ^ECX(727.826,"AINV",-X,DA)=""
"^DD",727.826,727.826,.01,1,2,2)
K ^ECX(727.826,"AINV",-X,DA)
"^DD",727.826,727.826,.01,1,2,3)
DO NOT DELETE.
"^DD",727.826,727.826,.01,1,2,"%D",0)
^^3^3^2980714^
"^DD",727.826,727.826,.01,1,2,"%D",1,0)
This is an inverse entry cross reference.  It is used to find the last
"^DD",727.826,727.826,.01,1,2,"%D",2,0)
entry in the file.  It is essential for the management of the extract
"^DD",727.826,727.826,.01,1,2,"%D",3,0)
and the purge of the extract data.
"^DD",727.826,727.826,.01,1,2,"DT")
2980714
"^DD",727.826,727.826,.01,3)
Enter a Number between 1 and 999999999, 0 Decimal Digits.
"^DD",727.826,727.826,.01,10)
Software generated for each individual record in the extract.
"^DD",727.826,727.826,.01,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,.01,21,1,0)
The Record Number for this extract entry.  Included in the Header for the
"^DD",727.826,727.826,.01,21,2,0)
extract.  The file is DINUMed on this field.
"^DD",727.826,727.826,.01,23,0)
^^1^1^2980714^^
"^DD",727.826,727.826,.01,23,1,0)
The Internal Entry Number (IEN) for this record.  The entry is DINUMed.
"^DD",727.826,727.826,.01,"DT")
2980714
"^DD",727.826,727.826,1,0)
YEAR MONTH^FO^^0;2^K:$L(X)>6!($L(X)<6)!'(X?6N) X
"^DD",727.826,727.826,1,.1)
Year Month
"^DD",727.826,727.826,1,2)
S Y(0)=Y S Y=$$ECXYMX^ECXUTL(Y)
"^DD",727.826,727.826,1,2.1)
S Y=$$ECXYMX^ECXUTL(Y)
"^DD",727.826,727.826,1,3)
Answer must be six characters in length.
"^DD",727.826,727.826,1,10)
Software generated for all records in the extracted year and month.
"^DD",727.826,727.826,1,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,1,21,1,0)
Six digit textual number representing the year and month the extract was
"^DD",727.826,727.826,1,21,2,0)
completed.  Included in the Header for the extract.
"^DD",727.826,727.826,1,23,0)
^^1^1^2980714^^
"^DD",727.826,727.826,1,23,1,0)
Generated by the extract software (ECXTRAC and ECXPRO).
"^DD",727.826,727.826,1,"DT")
2980714
"^DD",727.826,727.826,2,0)
EXTRACT NUMBER^P727'^ECX(727,^0;3^Q
"^DD",727.826,727.826,2,.1)
Extract Number
"^DD",727.826,727.826,2,1,0)
^.1
"^DD",727.826,727.826,2,1,1,0)
727.826^AC
"^DD",727.826,727.826,2,1,1,1)
S ^ECX(727.826,"AC",$E(X,1,30),DA)=""
"^DD",727.826,727.826,2,1,1,2)
K ^ECX(727.826,"AC",$E(X,1,30),DA)
"^DD",727.826,727.826,2,1,1,3)
DO NOT DELETE!
"^DD",727.826,727.826,2,1,1,"%D",0)
^^2^2^2980722^
"^DD",727.826,727.826,2,1,1,"%D",1,0)
This cross reference is essential for purging and managing data in this
"^DD",727.826,727.826,2,1,1,"%D",2,0)
file.
"^DD",727.826,727.826,2,1,1,"DT")
2980722
"^DD",727.826,727.826,2,3)
Enter the extract number for this extract.
"^DD",727.826,727.826,2,10)
Software generated from the associated entry in the Extract Log file.
"^DD",727.826,727.826,2,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,2,21,1,0)
Corresponding entry in the DSS Extract Log file (#727) for this extract.
"^DD",727.826,727.826,2,21,2,0)
Used to identify the header in the extract transmission.
"^DD",727.826,727.826,2,23,0)
^^1^1^2980714^
"^DD",727.826,727.826,2,23,1,0)
Generated by the extract software (ECXTRAC and ECXPRO).
"^DD",727.826,727.826,2,"DT")
2980722
"^DD",727.826,727.826,3,0)
FACILITY^RFX^^0;4^K:($L(X)'=5!(X'?3N.AN." ")) X
"^DD",727.826,727.826,3,.1)
Facility
"^DD",727.826,727.826,3,3)
Enter the Station number of the facility completing the transaction.
"^DD",727.826,727.826,3,10)
Station field (#8) in the RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,3,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,3,21,1,0)
The Station Number of the Facility where the Prosthetics transaction is
"^DD",727.826,727.826,3,21,2,0)
completed.
"^DD",727.826,727.826,3,23,0)
^^4^4^2980714^
"^DD",727.826,727.826,3,23,1,0)
If the Station Number is longer than 5 characters, the first 5 characters
"^DD",727.826,727.826,3,23,2,0)
will be stored in this field.  If the Station Number is less than 5
"^DD",727.826,727.826,3,23,3,0)
characters, blanks will be padded at the end of the number.  This field
"^DD",727.826,727.826,3,23,4,0)
is required for creation of the extract record.
"^DD",727.826,727.826,3,"DT")
2980714
"^DD",727.826,727.826,4,0)
PATIENT NO. DFN^RP2'^DPT(^0;5^Q
"^DD",727.826,727.826,4,.1)
Patient No. DFN
"^DD",727.826,727.826,4,3)
Enter the name of the patient for this extract record.
"^DD",727.826,727.826,4,10)
PATIENT NAME (#.02) of the RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,4,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,4,21,1,0)
PATIENT NO. DFN is the DFN of the patient for whom the prosthetic device
"^DD",727.826,727.826,4,21,2,0)
is provided.  This field is required for creation of the extract record.
"^DD",727.826,727.826,4,23,0)
^^4^4^2980714^
"^DD",727.826,727.826,4,23,1,0)
PATIENT NAME field (#.02) of the RECORD OF PROS APPLIANCE/REPAIR file
"^DD",727.826,727.826,4,23,2,0)
(#660).  This in turns points to the NAME field (#.01) of the PROSTHETICS
"^DD",727.826,727.826,4,23,3,0)
PROSTHETICS PATIENT file (#665).  This then points to the NAME field (.01)
"^DD",727.826,727.826,4,23,4,0)
of the PATIENT file (#2).
"^DD",727.826,727.826,4,"DT")
2980714
"^DD",727.826,727.826,5,0)
SSN^RFX^^0;6^K:$L(X)>10!($L(X)<9)!'(X?9N!X?9N1"P") X
"^DD",727.826,727.826,5,.1)
Social Security Number
"^DD",727.826,727.826,5,3)
Enter the Patient's Social Security Number.
"^DD",727.826,727.826,5,10)
Derived from the patient in the RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,5,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,5,21,1,0)
The patient's Social Security Number.  This field is required for creation
"^DD",727.826,727.826,5,21,2,0)
of the extract record.
"^DD",727.826,727.826,5,23,0)
^^4^4^2980714^
"^DD",727.826,727.826,5,23,1,0)
SSN is derived from the PATIENT NAME field (#.02) of the RECORD OF PROS
"^DD",727.826,727.826,5,23,2,0)
APPLIANCE/REPAIR file (#660).  This in turn points to the NAME field (#.01)
"^DD",727.826,727.826,5,23,3,0)
of the PROSTHETICS PATIENT file (#665).  This then points to the SSN field
"^DD",727.826,727.826,5,23,4,0)
(#.09) of the PATIENT file (#2).
"^DD",727.826,727.826,5,"DT")
2980714
"^DD",727.826,727.826,6,0)
NAME^RF^^0;7^K:$L(X)>4!($L(X)<4) X
"^DD",727.826,727.826,6,.1)
Name
"^DD",727.826,727.826,6,3)
Enter the first four characters of the patient's last name.
"^DD",727.826,727.826,6,10)
Derived from the patient in the RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,6,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,6,21,1,0)
The first four characters of the patient's last name.  This field is
"^DD",727.826,727.826,6,21,2,0)
required for creation of the extract record.
"^DD",727.826,727.826,6,23,0)
^^4^4^2980714^
"^DD",727.826,727.826,6,23,1,0)
NAME is derived from the PATIENT NAME field (#.02) of the RECORD OF PROS
"^DD",727.826,727.826,6,23,2,0)
APPLIANCE/REPAIR file (#660).  This in turn points to the NAME field
"^DD",727.826,727.826,6,23,3,0)
(#.01) of the PROSTHETICS PATIENT file (#665).  If the patient's last 
"^DD",727.826,727.826,6,23,4,0)
name is shorter than 4 characters, spaces will pad the end of the field.
"^DD",727.826,727.826,6,"DT")
2980714
"^DD",727.826,727.826,7,0)
IN OUTPATIENT INDICATOR^RP40.9'^DIC(40.9,^0;8^Q
"^DD",727.826,727.826,7,.1)
IN Outpatient Indicator
"^DD",727.826,727.826,7,3)
Enter 1 (Clinic) to indicate outpatient and 3 (Ward) to indicate inpatient.
"^DD",727.826,727.826,7,10)
Initialized to 1.  If IN5^VADPT returns a patient movement number, the value is 3.
"^DD",727.826,727.826,7,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,7,21,1,0)
Indicates whether the patient was an inpatient or an outpatient for the
"^DD",727.826,727.826,7,21,2,0)
Prosthetic service extracted.
"^DD",727.826,727.826,7,23,0)
^^4^4^2980714^
"^DD",727.826,727.826,7,23,1,0)
The field is initiatlized to 1, indicating an outpatient status.  If a call
"^DD",727.826,727.826,7,23,2,0)
to IN5^VADPT (using the patient IEN and the event date) returns a patient
"^DD",727.826,727.826,7,23,3,0)
movement number, then the field is set to 3 (indicating an inpatient
"^DD",727.826,727.826,7,23,4,0)
status).
"^DD",727.826,727.826,7,"DT")
2980714
"^DD",727.826,727.826,8,0)
DATE OF SERVICE^RFO^^0;9^K:$L(X)>8!($L(X)<8)!'(X?8N) X
"^DD",727.826,727.826,8,.1)
Date of Service
"^DD",727.826,727.826,8,1,0)
^.1
"^DD",727.826,727.826,8,1,1,0)
727.826^AG1^MUMPS
"^DD",727.826,727.826,8,1,1,1)
N ND,ND1 S ND=$G(^ECX(727.826,DA,0)) S ND1=$G(^ECX(727.826,DA,1)) S ^ECX(727.826,"AG",$E(X,1,30),$P(ND1,"^",4),$P(ND,"^",15),DA)=""
"^DD",727.826,727.826,8,1,1,2)
N ND,ND1 S ND=$G(^ECX(727.826,DA,0)) S ND1=$G(^ECX(727.826,DA,1)) K ^ECX(727.826,"AG",$E(X,1,30),$P(ND1,"^",4),$P(ND,"^",15),DA)
"^DD",727.826,727.826,8,1,1,3)
Required for Prosthetics Extract Audit Reporting
"^DD",727.826,727.826,8,1,1,"%D",0)
^^6^6^2980722^^^^
"^DD",727.826,727.826,8,1,1,"%D",1,0)
This Cross Reference is used to organize prosthesis parts combined to
"^DD",727.826,727.826,8,1,1,"%D",2,0)
create a prosthetic device.
"^DD",727.826,727.826,8,1,1,"%D",3,0)
 
"^DD",727.826,727.826,8,1,1,"%D",4,0)
"AG" is formated as follows:
"^DD",727.826,727.826,8,1,1,"%D",5,0)
 
"^DD",727.826,727.826,8,1,1,"%D",6,0)
 ^ECX(727.826,"AG",DATE OF SERVICE,AMIS GROUPER,PCE CPT/HCPCS CODE,DA)
"^DD",727.826,727.826,8,1,1,"DT")
2980722
"^DD",727.826,727.826,8,2)
S Y(0)=Y S Y=$$ECXDATEX^ECXUTL(Y)
"^DD",727.826,727.826,8,2.1)
S Y=$$ECXDATEX^ECXUTL(Y)
"^DD",727.826,727.826,8,3)
Enter the delivery date of the patient's prosthetic record.
"^DD",727.826,727.826,8,10)
The DELIVERY DATE (#10) in the RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,8,21,0)
^^4^4^2980714^^
"^DD",727.826,727.826,8,21,1,0)
DATE OF SERVICE is defined as the Delivery Date of the patient's prosthetic
"^DD",727.826,727.826,8,21,2,0)
record and is used as the determining date range when generating the
"^DD",727.826,727.826,8,21,3,0)
Prosthetics Extract.  This field is required for creation of the extract
"^DD",727.826,727.826,8,21,4,0)
record.
"^DD",727.826,727.826,8,23,0)
^^2^2^2980714^
"^DD",727.826,727.826,8,23,1,0)
DATE OF SERVICE is derived from the DELIVERY DATE (#10) in the RECORD OF
"^DD",727.826,727.826,8,23,2,0)
PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,8,"DT")
2980722
"^DD",727.826,727.826,9,0)
FEEDER LOCATION (FDR LOC)^RF^^0;10^K:$L(X)>9!($L(X)<9) X
"^DD",727.826,727.826,9,.1)
Feeder Location (FDR LOC)
"^DD",727.826,727.826,9,3)
Answer must be 9 characters in length.
"^DD",727.826,727.826,9,10)
Data in the RECORD OF PROS APPLIANCE/REPAIR file (#660).  See Technical Description.
"^DD",727.826,727.826,9,21,0)
^^46^46^2980804^
"^DD",727.826,727.826,9,21,1,0)
If this is a Lab Transaction and the extract header and/or Prosthetic
"^DD",727.826,727.826,9,21,2,0)
    Station is equal to the Receiving Station, the FEEDER LOCATION is
"^DD",727.826,727.826,9,21,3,0)
    constructed as follows:
"^DD",727.826,727.826,9,21,4,0)
1) 3-digit station number of the Receiving Station, concatenated with LAB. 
"^DD",727.826,727.826,9,21,5,0)
    An example is XXXLAB, where XXX is the Receiving Station number, or
"^DD",727.826,727.826,9,21,6,0)
2) 5-digit station number of the Receiving Station  (includes the 2-letter
"^DD",727.826,727.826,9,21,7,0)
    division suffix)  concatenated with LAB.  An example is XXXXXLAB, where
"^DD",727.826,727.826,9,21,8,0)
    XXXXX is the Receiving Station number.
"^DD",727.826,727.826,9,21,9,0)
3) If Receiving Station is only the 3-digit station number, pad with
"^DD",727.826,727.826,9,21,10,0)
    blanks so that the total field length equals 9.  The padding shall be
"^DD",727.826,727.826,9,21,11,0)
    placed at the end of the field.
"^DD",727.826,727.826,9,21,12,0)
4) If Receiving Station is the 5-digit station number (includes the
"^DD",727.826,727.826,9,21,13,0)
    2-letter division suffix), pad with blanks so that the total field
"^DD",727.826,727.826,9,21,14,0)
    length equals 9.  The padding shall be placed at the end of the field.
"^DD",727.826,727.826,9,21,15,0)
 
"^DD",727.826,727.826,9,21,16,0)
If this is a Lab Transaction and the extract header and/or Prosthetic
"^DD",727.826,727.826,9,21,17,0)
    Station is equal to the Requesting Station, the FEEDER LOCATION is
"^DD",727.826,727.826,9,21,18,0)
    constructed as follows:
"^DD",727.826,727.826,9,21,19,0)
1) 3-digit station number of the Requesting Station, concatenated with ORD.
"^DD",727.826,727.826,9,21,20,0)
    An example is XXXORD, where XXX is the Requesting Station number, or
"^DD",727.826,727.826,9,21,21,0)
2) 5-digit station number of the Requesting Station (includes the 2-letter
"^DD",727.826,727.826,9,21,22,0)
    division suffix) concatenated with ORD.  An example is XXXXXORD, where
"^DD",727.826,727.826,9,21,23,0)
    XXXXX is the Requesting Station number.
"^DD",727.826,727.826,9,21,24,0)
3) If the Requesting Station is only the 3-digit station number, pad with
"^DD",727.826,727.826,9,21,25,0)
    blanks so that the total field length equals 9.  The padding shall be
"^DD",727.826,727.826,9,21,26,0)
    placed at the end of the field.
"^DD",727.826,727.826,9,21,27,0)
4) If the Requesting Station is the 5-digit station number (includes the
"^DD",727.826,727.826,9,21,28,0)
    2-letter division suffix), pad with blanks so that the total field
"^DD",727.826,727.826,9,21,29,0)
    length equals 9.  The padding shall be placed at the end of the field.
"^DD",727.826,727.826,9,21,30,0)
 
"^DD",727.826,727.826,9,21,31,0)
If this is not a Lab Transaction, the FEEDER LOCATION is constructed as
"^DD",727.826,727.826,9,21,32,0)
    follows:
"^DD",727.826,727.826,9,21,33,0)
1) 3-digit Station number concatenated with NONL.  An example is XXXNONL,
"^DD",727.826,727.826,9,21,34,0)
    where XXX is the Station number, or
"^DD",727.826,727.826,9,21,35,0)
2) 5-digit Station number (includes the 2-letter division suffix),
"^DD",727.826,727.826,9,21,36,0)
    concatenated with NONL.  An example is XXXXXNONL, where XXXXX is the
"^DD",727.826,727.826,9,21,37,0)
    Station number.
"^DD",727.826,727.826,9,21,38,0)
3) If Station number is only the 3-digit station number, pad with blanks so
"^DD",727.826,727.826,9,21,39,0)
    that the total field length equals 9.  The padding shall be placed at
"^DD",727.826,727.826,9,21,40,0)
    the end of the field.
"^DD",727.826,727.826,9,21,41,0)
4) If the Station number is the 5-digit station number (includes the
"^DD",727.826,727.826,9,21,42,0)
    2-letter division suffix), it will not be necessary to pad with blanks
"^DD",727.826,727.826,9,21,43,0)
    to make the field length equal to 9.  The combination of the 5-digit
"^DD",727.826,727.826,9,21,44,0)
    station number and the NONL equal a field length of 9.
"^DD",727.826,727.826,9,21,45,0)
 
"^DD",727.826,727.826,9,21,46,0)
This field is required for creation of the extract record.
"^DD",727.826,727.826,9,23,0)
^^9^9^2980804^
"^DD",727.826,727.826,9,23,1,0)
Data for the FEEDER LOCATION (FDR LOC) is derived from the RECORD OF PROS
"^DD",727.826,727.826,9,23,2,0)
    APPLIANCE/REPAIR file (#660).  Depending how the FEEDER LOCATION is
"^DD",727.826,727.826,9,23,3,0)
    constructed, data is derived from the following fields in the RECORD OF
"^DD",727.826,727.826,9,23,4,0)
    PROS APPLIANCE/REPAIR file (#660):
"^DD",727.826,727.826,9,23,5,0)
1) RECEIVING STATION (#70).  RECEIVING STATION is a pointer to the
"^DD",727.826,727.826,9,23,6,0)
    INSTITUTION file (#4).
"^DD",727.826,727.826,9,23,7,0)
2) REQUESTING STATION (#40).  RECEIVING STATION is a pointer to the
"^DD",727.826,727.826,9,23,8,0)
    INSTITUTION file (#4).
"^DD",727.826,727.826,9,23,9,0)
3) STATION (#8).  STATION is a pointer to the INSTITUTION file (#4).
"^DD",727.826,727.826,9,"DT")
2980714
"^DD",727.826,727.826,10,0)
FEEDER KEY^RF^^0;11^K:$L(X)>20!($L(X)<20) X
"^DD",727.826,727.826,10,.1)
Feeder Key
"^DD",727.826,727.826,10,3)
Enter the Feeder Key that uniquely identifies the product.
"^DD",727.826,727.826,10,10)
Data in the RECORD OF PROS APPLIANCE/REPAIR file (#660).  See Technical Description.
"^DD",727.826,727.826,10,21,0)
^^48^48^2980804^
"^DD",727.826,727.826,10,21,1,0)
FEEDER KEY is the concatenation of the following elements.  They are listed
"^DD",727.826,727.826,10,21,2,0)
    in the order they are to appear in the FEEDER KEY.
"^DD",727.826,727.826,10,21,3,0)
 
"^DD",727.826,727.826,10,21,4,0)
1) HCPCS Code - This is the 5-digit HCPCS Code in the patient's prosthetic
"^DD",727.826,727.826,10,21,5,0)
    record.
"^DD",727.826,727.826,10,21,6,0)
 
"^DD",727.826,727.826,10,21,7,0)
2) Type of Transaction - This is the Type of Transaction code in the
"^DD",727.826,727.826,10,21,8,0)
      patient's prosthetic record.
"^DD",727.826,727.826,10,21,9,0)
   (a) If Type of Transaction in the patient's prosthetic record is "X"
"^DD",727.826,727.826,10,21,10,0)
       (Repair), the Type of Transaction code in the FEEDER KEY is X.
"^DD",727.826,727.826,10,21,11,0)
   (b) If the Type of Transaction in the patient's prosthetic record is 
"^DD",727.826,727.826,10,21,12,0)
       "I" (Initial Issue),  "R" (Replace) or "S" (Spare), the Type of
"^DD",727.826,727.826,10,21,13,0)
       Transaction code in the FEEDER KEY is N.
"^DD",727.826,727.826,10,21,14,0)
   (c) Type of Transaction is considered the first suffix of the FEEDER
"^DD",727.826,727.826,10,21,15,0)
       KEY.
"^DD",727.826,727.826,10,21,16,0)
 
"^DD",727.826,727.826,10,21,17,0)
3) Source - This is the Source in the patient's prosthetic record.
"^DD",727.826,727.826,10,21,18,0)
   (a) If Source in the patient's prosthetic record is VA, the Source code
"^DD",727.826,727.826,10,21,19,0)
       in the FEEDER KEY is V (VA).
"^DD",727.826,727.826,10,21,20,0)
   (b) If Source in the patient's prosthetic record is Commercial, the
"^DD",727.826,727.826,10,21,21,0)
       Source code in the FEEDER KEY is C (Commercial).
"^DD",727.826,727.826,10,21,22,0)
   (c) Source is considered the second suffix of the FEEDER KEY.
"^DD",727.826,727.826,10,21,23,0)
 
"^DD",727.826,727.826,10,21,24,0)
4) Station - If this is a Lab Transaction, the station is either the
"^DD",727.826,727.826,10,21,25,0)
      Requesting or Receiving Station.  
"^DD",727.826,727.826,10,21,26,0)
   (a) 3-digit Receiving Station concatenated with REC if the FEEDER
"^DD",727.826,727.826,10,21,27,0)
       LOCATION ends in ORD, or
"^DD",727.826,727.826,10,21,28,0)
   (b) 5-digit Receiving Station (includes the 2-letter division suffix)
"^DD",727.826,727.826,10,21,29,0)
       concatenated with REC if the FEEDER LOCATION ends in ORD, or
"^DD",727.826,727.826,10,21,30,0)
   (c) 3-digit Requesting Station concatenated with REQ if the FEEDER
"^DD",727.826,727.826,10,21,31,0)
       LOCATION ends in LAB, or
"^DD",727.826,727.826,10,21,32,0)
   (d) 5-digit Requesting Station (includes the 2-letter division suffix)
"^DD",727.826,727.826,10,21,33,0)
       concatenated with REQ if the FEEDER LOCATION ends in LAB.
"^DD",727.826,727.826,10,21,34,0)
   (e) If station number is only 3 digits, pad with blanks so that the
"^DD",727.826,727.826,10,21,35,0)
       total field length equals 20.  The padding shall be placed at the
"^DD",727.826,727.826,10,21,36,0)
       end of the field.
"^DD",727.826,727.826,10,21,37,0)
   (f) If the station number is the 5-digit station number (includes the
"^DD",727.826,727.826,10,21,38,0)
       2-letter division suffix), pad with blanks so that the total field
"^DD",727.826,727.826,10,21,39,0)
       length equals 20.  The padding shall be placed at the end of the
"^DD",727.826,727.826,10,21,40,0)
       field.
"^DD",727.826,727.826,10,21,41,0)
   (g) Station is considered the third suffix of the FEEDER KEY.
"^DD",727.826,727.826,10,21,42,0)
 
"^DD",727.826,727.826,10,21,43,0)
5) If this is a Non-Lab Transaction, there is no third suffix for the
"^DD",727.826,727.826,10,21,44,0)
      FEEDER KEY.
"^DD",727.826,727.826,10,21,45,0)
 
"^DD",727.826,727.826,10,21,46,0)
This field is required for creation of the extract record.  If the length
"^DD",727.826,727.826,10,21,47,0)
of this field is less than 20 characters, blanks will pad the end of the
"^DD",727.826,727.826,10,21,48,0)
field.
"^DD",727.826,727.826,10,23,0)
^^13^13^2980804^
"^DD",727.826,727.826,10,23,1,0)
Data for the FEEDER KEY is derived from the RECORD OF PROS APPLIANCE/REPAIR
"^DD",727.826,727.826,10,23,2,0)
    file (#660).  Depending how the FEEDER KEY is constructed, the
"^DD",727.826,727.826,10,23,3,0)
    components for the FEEDER KEY are derived from the following fields in
"^DD",727.826,727.826,10,23,4,0)
    the RECORD OF PROS APPLIANCE/REPAIR file (#660):
"^DD",727.826,727.826,10,23,5,0)
1) HCPCS (#4.1) - HCPCS is a pointer to the CPT CODE field (#.01) of the
"^DD",727.826,727.826,10,23,6,0)
    CPT file (#81)
"^DD",727.826,727.826,10,23,7,0)
2) TYPE OF TRANSACTION (#2)
"^DD",727.826,727.826,10,23,8,0)
3) SOURCE (#12)
"^DD",727.826,727.826,10,23,9,0)
4) RECEIVING STATION (#70).  RECEIVING STATION is a pointer to the
"^DD",727.826,727.826,10,23,10,0)
    INSTITUTION file (#4).
"^DD",727.826,727.826,10,23,11,0)
5) REQUESTING STATION (#40).  REQUESTING STATION is a pointer to the
"^DD",727.826,727.826,10,23,12,0)
    INSTITUTION file (#4).
"^DD",727.826,727.826,10,23,13,0)
6) STATION (#8).  STATION is a pointer to the INSTITUTION file (#4).
"^DD",727.826,727.826,10,"DT")
2980714
"^DD",727.826,727.826,11,0)
QUANTITY^F^^0;12^K:$L(X)>4!($L(X)<4)!'(X?.3" "1.4N) X
"^DD",727.826,727.826,11,.1)
Quantity
"^DD",727.826,727.826,11,3)
Answer must be 4 characters in length.
"^DD",727.826,727.826,11,10)
QUANTITY is derived from the QTY (#5) in RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,11,21,0)
^^2^2^2980714^^^^
"^DD",727.826,727.826,11,21,1,0)
QUANTITY is defined as the number of units issues or repaired as indicated
"^DD",727.826,727.826,11,21,2,0)
in the patient's prosthetic record.
"^DD",727.826,727.826,11,23,0)
^^5^5^2980714^^^
"^DD",727.826,727.826,11,23,1,0)
Derived from the QTY field (#5) in the RECORD OF PROS APPLIANCE/REPAIR
"^DD",727.826,727.826,11,23,2,0)
file (#660).  If the quantity is not known, a default value of 1 will
"^DD",727.826,727.826,11,23,3,0)
be assigned to the extract record.  Quantities that are less than four
"^DD",727.826,727.826,11,23,4,0)
character numbers will be padded on their beginning with blanks to fill
"^DD",727.826,727.826,11,23,5,0)
four spaces.
"^DD",727.826,727.826,11,"DT")
2980714
"^DD",727.826,727.826,12,0)
PRIMARY CARE TEAM^F^^0;13^K:$L(X)>10!($L(X)<10) X
"^DD",727.826,727.826,12,.1)
Primary Care Team
"^DD",727.826,727.826,12,3)
Enter the IEN from the TEAM file (405.51) for this Prosthetics service.
"^DD",727.826,727.826,12,10)
OUTPTTM^SDUTL3 returns the teams IEN from the Team file (404.51).
"^DD",727.826,727.826,12,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,12,21,1,0)
PRIMARY CARE TEAM indicates the primary care team entry assigned to the
"^DD",727.826,727.826,12,21,2,0)
patient for whom the prosthetic service is provided.
"^DD",727.826,727.826,12,23,0)
^^6^6^2980714^
"^DD",727.826,727.826,12,23,1,0)
From the DATE OF SERVICE field and the patient's DFN, OUTPTTM^SDUTL3
"^DD",727.826,727.826,12,23,2,0)
returns the teams IEN from the TEAM file (404.51).  This pointer is
"^DD",727.826,727.826,12,23,3,0)
transmitted to Austin.  If the Primary Care Team is not known, the field
"^DD",727.826,727.826,12,23,4,0)
will be padded with all blanks.  If the IEN for the Primary Care Team
"^DD",727.826,727.826,12,23,5,0)
is less than a 10 character numeric, blanks will be padded on the beginning
"^DD",727.826,727.826,12,23,6,0)
of the number to fill up 10 characters.
"^DD",727.826,727.826,12,"DT")
2980714
"^DD",727.826,727.826,13,0)
PRIMARY CARE PROVIDER^F^^0;14^K:$L(X)>11!($L(X)<11) X
"^DD",727.826,727.826,13,.1)
Primary Care Provider
"^DD",727.826,727.826,13,3)
Enter '2' then New Person file IEN for the provider completing the prosthesis.
"^DD",727.826,727.826,13,10)
OUTPTPR^SDUTL3 returns the providers IEN from the New Person file.
"^DD",727.826,727.826,13,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,13,21,1,0)
PRIMARY CARE PROVIDER is the primary care provider of the patient for
"^DD",727.826,727.826,13,21,2,0)
whom the prosthetic service is provided.
"^DD",727.826,727.826,13,23,0)
^^5^5^2980714^
"^DD",727.826,727.826,13,23,1,0)
From the DATE OF SERVICE field and the patient's DFN, OUTPTPR^SDUTL3
"^DD",727.826,727.826,13,23,2,0)
returns the provider's New Person file record IEN.  The New Person IEN
"^DD",727.826,727.826,13,23,3,0)
is transmitted to Austin with "2" concatonated on the front.  If the
"^DD",727.826,727.826,13,23,4,0)
Primary Care Provider IEN is less than 11 numeric characters, blanks
"^DD",727.826,727.826,13,23,5,0)
will be padded in its beginning to fill a field length of 11 characters.
"^DD",727.826,727.826,13,"DT")
2980714
"^DD",727.826,727.826,14,0)
PCE CPT/HCPCS CODE^RF^^0;15^K:$L(X)>8!($L(X)<8) X
"^DD",727.826,727.826,14,.1)
PCE CPT/HCPCS Code
"^DD",727.826,727.826,14,1,0)
^.1
"^DD",727.826,727.826,14,1,1,0)
727.826^AG2^MUMPS
"^DD",727.826,727.826,14,1,1,1)
N ND,ND1 S ND=$G(^ECX(727.826,DA,0)) S ND1=$G(^ECX(727.826,DA,1)) S ^ECX(727.826,"AG",$P(ND,"^",9),$P(ND1,"^",4),$E(X,1,30),DA)=""
"^DD",727.826,727.826,14,1,1,2)
N ND,ND1 S ND=$G(^ECX(727.826,DA,0)) S ND1=$G(^ECX(727.826,DA,1)) K ^ECX(727.826,"AG",$P(ND,"^",9),$P(ND1,"^",4),$E(X,1,30),DA)
"^DD",727.826,727.826,14,1,1,3)
Required for Prosthetics Extract Audit Reporting
"^DD",727.826,727.826,14,1,1,"%D",0)
^^6^6^2980722^^
"^DD",727.826,727.826,14,1,1,"%D",1,0)
This Cross Reference is used to organize prosthesis parts combined to
"^DD",727.826,727.826,14,1,1,"%D",2,0)
create a prosthetic device.
"^DD",727.826,727.826,14,1,1,"%D",3,0)
   
"^DD",727.826,727.826,14,1,1,"%D",4,0)
"AG" is formated as follows:
"^DD",727.826,727.826,14,1,1,"%D",5,0)
 
"^DD",727.826,727.826,14,1,1,"%D",6,0)
 ^ECX(727.826,"AG",DATE OF SERVICE,AMIS GROUPER,PCE CPT/HCPCS CODE,DA) 
"^DD",727.826,727.826,14,1,1,"DT")
2980722
"^DD",727.826,727.826,14,3)
Enter the Prosthetics HCPCS CPT code padding blanks at the end to 8 characters.
"^DD",727.826,727.826,14,10)
Derived from the HCPCS field (4.1) in the RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,14,21,0)
^^2^2^2980714^^^
"^DD",727.826,727.826,14,21,1,0)
The CPT code identified by the Prosthesis HCPCS.  This field is required
"^DD",727.826,727.826,14,21,2,0)
for creation of the extract record.
"^DD",727.826,727.826,14,23,0)
^^3^3^2980714^^
"^DD",727.826,727.826,14,23,1,0)
PCE CPT/HCPCS CODE is derived from the HCPCS (#4.1) field in the RECORD
"^DD",727.826,727.826,14,23,2,0)
OF PROS APPLIANCE/REPAIR file (#660).  HCPCS (4.1) is a pointer to the
"^DD",727.826,727.826,14,23,3,0)
respective CPT CODE field (#.01) in the CPT file (#81).
"^DD",727.826,727.826,14,"DT")
2980722
"^DD",727.826,727.826,15,0)
ICD-9 CODE^F^^0;16^K:$L(X)>7!($L(X)<1) X
"^DD",727.826,727.826,15,.1)
ICD-9 Code
"^DD",727.826,727.826,15,3)
Enter the Prosthetics ICD-9 code.
"^DD",727.826,727.826,15,10)
No source currently exists in Prosthetics.  This field will be populated at a future time.
"^DD",727.826,727.826,15,21,0)
^^1^1^2980714^^
"^DD",727.826,727.826,15,21,1,0)
ICD-9 CODE is the diagnostic code for the patient's prosthetic record.
"^DD",727.826,727.826,15,23,0)
^^2^2^2980714^
"^DD",727.826,727.826,15,23,1,0)
This field is not yet used by the Prosthetics Extract as the ICD-9 field
"^DD",727.826,727.826,15,23,2,0)
is not available in Prosthetics.
"^DD",727.826,727.826,15,"DT")
2980714
"^DD",727.826,727.826,16,0)
AGENT ORANGE STATUS^S^Y:Agent Orange exposure claimed;N:Agent Orange exposure not claimed;U:Agent Orange exposure not known;^0;17^Q
"^DD",727.826,727.826,16,.1)
Agent Orange Status
"^DD",727.826,727.826,16,3)
Enter Y - Agent Orange exposure; N - No Agent Orange exposure; U - Agent Orange Exposure is unknown
"^DD",727.826,727.826,16,10)
AGENT ORANGE EXPOS. INDICATED field (#.32102) from the Patient file (#2) as derived from DFN.
"^DD",727.826,727.826,16,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,16,21,1,0)
AGENT ORANGE STATUS indicates if the prosthetics patient claims exposure
"^DD",727.826,727.826,16,21,2,0)
to Agent Orange.
"^DD",727.826,727.826,16,23,0)
^^4^4^2980714^
"^DD",727.826,727.826,16,23,1,0)
This field is derived from the AGENT ORANGE EXPOS. INDICATED field
"^DD",727.826,727.826,16,23,2,0)
(#.32102) in the Patient file (#2) using the patient's DFN.  The field will
"^DD",727.826,727.826,16,23,3,0)
have a NULL value if the Patient file (#2) record does not indicate a
"^DD",727.826,727.826,16,23,4,0)
status.
"^DD",727.826,727.826,16,"DT")
2980714
"^DD",727.826,727.826,17,0)
RADIATION EXPOSURE STATUS^S^Y:Radiation Exposure claimed;N:Radiation Exposure not claimed;U:Radiation Exposure not known;^0;18^Q
"^DD",727.826,727.826,17,.1)
Radiation Exposure Status
"^DD",727.826,727.826,17,3)
Enter Y - Radiation exposure; N - No Radiation exposure; U - Radiation Exposure is unknown
"^DD",727.826,727.826,17,10)
RADIATION EXPOSURE INDICATED field (#.32103) from the Patient file (#2) as derived from DFN.
"^DD",727.826,727.826,17,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,17,21,1,0)
RADIATION EXPOSURE STATUS indicates if the prosthetics patient claims
"^DD",727.826,727.826,17,21,2,0)
exposure to radiation.
"^DD",727.826,727.826,17,23,0)
^^3^3^2980714^
"^DD",727.826,727.826,17,23,1,0)
This field is derived from the RADIATION EXPOSURE INDICATED field (#.32103)
"^DD",727.826,727.826,17,23,2,0)
in the Patient file (#2) using the patient's DFN.  This field will have
"^DD",727.826,727.826,17,23,3,0)
a NULL value if the Patient file (#2) record does not indicate a status.
"^DD",727.826,727.826,17,"DT")
2980714
"^DD",727.826,727.826,18,0)
ENVIRONMENT CONTAMINANTS STAT^S^Y:Environmental Contaminants exposure claimed;N:Environmental Contaminants exposure not claimed;U:Environmental Contaminants exposure not known;^0;19^Q
"^DD",727.826,727.826,18,.1)
Environmental Contaminants Status
"^DD",727.826,727.826,18,3)
Enter Y - Environmental Contaminants exposure; N - No Environmental Contaminants exposure; U - Environmental Contaminants exposure is unknown
"^DD",727.826,727.826,18,10)
ENVIRONMENTAL CONTAMINANTS field (#.322013) from the Patient file (#2) as derived from DFN.
"^DD",727.826,727.826,18,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,18,21,1,0)
ENVIRONMENT CONTAMINANTS STAT indicates if the prosthetics patient
"^DD",727.826,727.826,18,21,2,0)
claims exposure to Environmental Contaminants.
"^DD",727.826,727.826,18,23,0)
^^3^3^2980714^
"^DD",727.826,727.826,18,23,1,0)
This field is derived from the ENVIRONMENTAL CONTAMINANTS field (#.322013)
"^DD",727.826,727.826,18,23,2,0)
in the Patient file (#2) using the patient's DFN.  The field will have
"^DD",727.826,727.826,18,23,3,0)
a NULL value if the Patient file (#2) record does not indicate a status.
"^DD",727.826,727.826,18,"DT")
2980714
"^DD",727.826,727.826,19,0)
PATIENT ELIGIBILITY^F^^0;20^K:$L(X)>3!($L(X)<3) X
"^DD",727.826,727.826,19,.1)
Patient Eligibility
"^DD",727.826,727.826,19,3)
Enter the Primary Eligibility code of the patient
"^DD",727.826,727.826,19,10)
PATIENT ELIGIBILITY field (#.361) from the Patient file (#2) as derived from DFN.
"^DD",727.826,727.826,19,21,0)
^^1^1^2980715^^^^
"^DD",727.826,727.826,19,21,1,0)
PATIENT ELIGIBILITY is the patient's primary eligibility code.
"^DD",727.826,727.826,19,23,0)
^^12^12^2980715^^
"^DD",727.826,727.826,19,23,1,0)
PATIENT ELIGIBILITY is derived from the PRIMARY ELIGIBILITY CODE field
"^DD",727.826,727.826,19,23,2,0)
(#.361) in the Patient file (#2).  The value of the PRIMARY ELIGIBILITY
"^DD",727.826,727.826,19,23,3,0)
CODE is a pointer to the ELIGIBILITY CODE file (#8).  This pointer is
"^DD",727.826,727.826,19,23,4,0)
stored in the Prosthetics Extract PATIENT ELIGIBILITY field as an
"^DD",727.826,727.826,19,23,5,0)
alphabetic character.  The alpha character derived from the pointer
"^DD",727.826,727.826,19,23,6,0)
is converted via $C(PATIENT ELIGIBILITY + 64).  Therefore, a pointer
"^DD",727.826,727.826,19,23,7,0)
value of 1 will equal 'A', 2 will equal 'B', etc.
"^DD",727.826,727.826,19,23,8,0)
 
"^DD",727.826,727.826,19,23,9,0)
If the PATIENT ELIGIBILITY is not known, the field will be populated with
"^DD",727.826,727.826,19,23,10,0)
three blanks to fill the field.  If the value of the field has a length
"^DD",727.826,727.826,19,23,11,0)
less than 3 characters, blanks will pad the beginning of the field so
"^DD",727.826,727.826,19,23,12,0)
its length equals three characters.
"^DD",727.826,727.826,19,"DT")
2980714
"^DD",727.826,727.826,20,0)
COST OF TRANSACTION^F^^0;21^K:$L(X)>9!($L(X)<9)!'(X?0.5" "1.6N1"."2N) X
"^DD",727.826,727.826,20,.1)
Cost of Transaction
"^DD",727.826,727.826,20,3)
Enter the cost of the prosthetics transaction preceded by spaces to equal 9 characters
"^DD",727.826,727.826,20,10)
TOTAL COST (#14) or TOTAL LAB COST (#48) from the RECORD OF PROS APPLIANCE/REPAIR file.
"^DD",727.826,727.826,20,21,0)
^^27^27^2980804^
"^DD",727.826,727.826,20,21,1,0)
COST OF TRANSACTION is the value found in TOTAL COST in the patient's
"^DD",727.826,727.826,20,21,2,0)
    prosthetic record when the Form Requested On is one of the following.
"^DD",727.826,727.826,20,21,3,0)
    These forms designate commercial acquisition methods:
"^DD",727.826,727.826,20,21,4,0)
1)  PSC, represented by 1.
"^DD",727.826,727.826,20,21,5,0)
2)  2421, represented by 2.
"^DD",727.826,727.826,20,21,6,0)
3)  2237, represented by 3.
"^DD",727.826,727.826,20,21,7,0)
4)  2529-7, represented by 5.
"^DD",727.826,727.826,20,21,8,0)
5)  2474, represented by 6.
"^DD",727.826,727.826,20,21,9,0)
6)  2431, represented by 7.
"^DD",727.826,727.826,20,21,10,0)
7)  2914, represented by 8.
"^DD",727.826,727.826,20,21,11,0)
8)  OTHER, represented by 9.
"^DD",727.826,727.826,20,21,12,0)
9)  2520, represented by 10.
"^DD",727.826,727.826,20,21,13,0)
10) VISA, represented by 14
"^DD",727.826,727.826,20,21,14,0)
 
"^DD",727.826,727.826,20,21,15,0)
COST OF TRANSACTION is the value found in TOTAL LAB COST in the patient's
"^DD",727.826,727.826,20,21,16,0)
    prosthetic record when the Form Requested On is the following
"^DD",727.826,727.826,20,21,17,0)
    (designating a Lab Transaction): 
"^DD",727.826,727.826,20,21,18,0)
1)  2529-3, represented by 4.
"^DD",727.826,727.826,20,21,19,0)
 
"^DD",727.826,727.826,20,21,20,0)
COST OF TRANSACTION has a value of zero when the Form Requested On is one
"^DD",727.826,727.826,20,21,21,0)
    of the following, which designates a stock or inventory issue:
"^DD",727.826,727.826,20,21,22,0)
1)  STOCK ISSUE, represented by 11.
"^DD",727.826,727.826,20,21,23,0)
2)  INVENTORY ISSUE, represented by 12.
"^DD",727.826,727.826,20,21,24,0)
 
"^DD",727.826,727.826,20,21,25,0)
If the length of this field is less than 9 characters, blanks will be
"^DD",727.826,727.826,20,21,26,0)
padded at its beginning so the total length is 9 characters.  The decimal
"^DD",727.826,727.826,20,21,27,0)
is required on all entries to this field.
"^DD",727.826,727.826,20,23,0)
^^7^7^2980804^
"^DD",727.826,727.826,20,23,1,0)
COST OF TRANSACTION is derived from the RECORD OF PROS APPLIANCE/REPAIR
"^DD",727.826,727.826,20,23,2,0)
    file (#660).  Depending on how the COST OF TRANSACTION is constructed,
"^DD",727.826,727.826,20,23,3,0)
    data is derived from the following fields in the RECORD OF PROS
"^DD",727.826,727.826,20,23,4,0)
    APPLIANCE/REPAIR file (#660):
"^DD",727.826,727.826,20,23,5,0)
1) TOTAL COST (#14)
"^DD",727.826,727.826,20,23,6,0)
2) TOTAL LAB COST (#48)
"^DD",727.826,727.826,20,23,7,0)
3) FORM REQUESTED ON (#11)
"^DD",727.826,727.826,20,"DT")
2980714
"^DD",727.826,727.826,21,0)
LAB LABOR COST^F^^0;22^K:$L(X)>7!($L(X)<7)!'(X?0.3" "1.4N1"."2N) X
"^DD",727.826,727.826,21,.1)
Lab Labor Cost
"^DD",727.826,727.826,21,3)
Enter the labor cost of the Prosthetics transaction
"^DD",727.826,727.826,21,10)
TOTAL LABOR COST (#46) in the RECORD OF PROS APPLIANCE/REPAIR file.
"^DD",727.826,727.826,21,21,0)
^^1^1^2980714^^^
"^DD",727.826,727.826,21,21,1,0)
The LAB LABOR COST is the total cost of labor to perform the job.
"^DD",727.826,727.826,21,23,0)
^^17^17^2980714^^
"^DD",727.826,727.826,21,23,1,0)
LAB LABOR COST is derived from the TOTAL LABOR COST (#46) in the RECORD
"^DD",727.826,727.826,21,23,2,0)
OF PROS APPLIANCE/REPAIR file.  The following algorithm is defined:
"^DD",727.826,727.826,21,23,3,0)
 
"^DD",727.826,727.826,21,23,4,0)
a) If the patient's prosthetic record indicates a Lab Transaction, the
"^DD",727.826,727.826,21,23,5,0)
   value of LAB LABOR COST is equal to the value found for TOTAL LABOR
"^DD",727.826,727.826,21,23,6,0)
   COST.
"^DD",727.826,727.826,21,23,7,0)
 
"^DD",727.826,727.826,21,23,8,0)
b) If the patient's prosthetic record is not a Lab Transaction, the value
"^DD",727.826,727.826,21,23,9,0)
   of LAB LABOR COST is zero.
"^DD",727.826,727.826,21,23,10,0)
 
"^DD",727.826,727.826,21,23,11,0)
c) If LAB LABOR COST is not known, and the patient's prosthetic record
"^DD",727.826,727.826,21,23,12,0)
   indicates a Lab Transaction, a zero value is assigned to the extract
"^DD",727.826,727.826,21,23,13,0)
   record.
"^DD",727.826,727.826,21,23,14,0)
 
"^DD",727.826,727.826,21,23,15,0)
If the length of this field is less than 7 characters, blanks will be
"^DD",727.826,727.826,21,23,16,0)
padded at its beginning so the total length is 7 characters.  The decimal
"^DD",727.826,727.826,21,23,17,0)
is required on all entries to this field.
"^DD",727.826,727.826,21,"DT")
2980714
"^DD",727.826,727.826,22,0)
LAB MATERIAL COST^F^^0;23^K:$L(X)>7!($L(X)<7)!'(X?0.3" "1.4N1"."2N) X
"^DD",727.826,727.826,22,.1)
Lab Material Cost
"^DD",727.826,727.826,22,3)
Enter the material cost of the prosthetic transaction
"^DD",727.826,727.826,22,10)
TOTAL MATERIAL COST (#47) in the RECORD OF PROS APPLIANCE/REPAIR file.
"^DD",727.826,727.826,22,21,0)
^^2^2^2980714^^
"^DD",727.826,727.826,22,21,1,0)
LAB MATERIAL COST is the cost of all materials required to complete the
"^DD",727.826,727.826,22,21,2,0)
prosthesis.
"^DD",727.826,727.826,22,23,0)
^^21^21^2980714^
"^DD",727.826,727.826,22,23,1,0)
The LAB MATERIAL COST is derived from the RECORD OF PROS APPLIANCE/REPAIR
"^DD",727.826,727.826,22,23,2,0)
according to the following algorithm:
"^DD",727.826,727.826,22,23,3,0)
a) If the patient's prosthetic record indicates a Lab Transaction, the
"^DD",727.826,727.826,22,23,4,0)
   value of LAB MATERIAL COST is equal to the value found for TOTAL
"^DD",727.826,727.826,22,23,5,0)
   MATERIAL COST.
"^DD",727.826,727.826,22,23,6,0)
 
"^DD",727.826,727.826,22,23,7,0)
b) If the patient's prosthetic record is not a Lab Transaction, the value
"^DD",727.826,727.826,22,23,8,0)
   of LAB MATERIAL COST is zero.
"^DD",727.826,727.826,22,23,9,0)
 
"^DD",727.826,727.826,22,23,10,0)
c) If LAB MATERIAL COST is not known, and the patient's prosthetic record
"^DD",727.826,727.826,22,23,11,0)
   indicates a Lab Transaction, a zero value is assigned to the extract
"^DD",727.826,727.826,22,23,12,0)
   record.
"^DD",727.826,727.826,22,23,13,0)
 
"^DD",727.826,727.826,22,23,14,0)
d) LAB MATERIAL COST shall allow for values which are reported in dollars
"^DD",727.826,727.826,22,23,15,0)
   and cents.  The actual value shall be extracted, including the decimal
"^DD",727.826,727.826,22,23,16,0)
   point.
"^DD",727.826,727.826,22,23,17,0)
 
"^DD",727.826,727.826,22,23,18,0)
If the length of this field is less than 7 characters, blanks will be
"^DD",727.826,727.826,22,23,19,0)
padded at its beginning so the total length is 7 characters.  The decimal 
"^DD",727.826,727.826,22,23,20,0)
is required on all entries to this field.
"^DD",727.826,727.826,22,23,21,0)
 
"^DD",727.826,727.826,22,"DT")
2980714
"^DD",727.826,727.826,23,0)
BILLING STATUS^S^1:SC/OP (Service Connected Outpatient);2:SC/IP (Service Connected Inpatient);3:NSC/IP (Non Service Connected Inpatient);4:NSC/OP (Non Service Connected Outpatient);5:Other (Patient Category unknown);^0;24^Q
"^DD",727.826,727.826,23,.1)
Billing Status
"^DD",727.826,727.826,23,3)
Enter the Prosthetic Patient Category for utilization.
"^DD",727.826,727.826,23,10)
BILLING STATUS is derived from PATIENT CATEGORY in the RECORD OF PROS APPLIANCE/REPAIR file (#660)
"^DD",727.826,727.826,23,21,0)
^^1^1^2980715^^
"^DD",727.826,727.826,23,21,1,0)
BILLING STATUS is the prosthetics utilization status.
"^DD",727.826,727.826,23,23,0)
^^3^3^2980715^
"^DD",727.826,727.826,23,23,1,0)
BILLING STATUS is derived from the PATIENT CATEGORY field (#62) in the
"^DD",727.826,727.826,23,23,2,0)
RECORD OF PROS APPLIANCE/REPAIR file (#660) for the prosthetic device
"^DD",727.826,727.826,23,23,3,0)
record extracted.
"^DD",727.826,727.826,23,"DT")
2980715
"^DD",727.826,727.826,24,0)
VET/NON VET^S^Y:Patient is a veteran;N:Patient is not a veteran;^0;25^Q
"^DD",727.826,727.826,24,.1)
Vet/Non Vet
"^DD",727.826,727.826,24,3)
Enter Y to indicate the patient is a veteran and N to indicate the patient is not a veteran.
"^DD",727.826,727.826,24,10)
VET/NON VET is derived from the VETERAN (Y/N) field in the Patient file using DFN.
"^DD",727.826,727.826,24,21,0)
^^1^1^2980715^^
"^DD",727.826,727.826,24,21,1,0)
VET/NON VET indicates if the patient is a veteran.
"^DD",727.826,727.826,24,23,0)
^^3^3^2980715^
"^DD",727.826,727.826,24,23,1,0)
VET/NON VET is pulled from the VETERAN (Y/N) field (#1901) in the Patient
"^DD",727.826,727.826,24,23,2,0)
file (#2).  If the veteran's status is not known, a NULL value will be
"^DD",727.826,727.826,24,23,3,0)
assigned to the the VET/NON VET field.
"^DD",727.826,727.826,24,"DT")
2980715
"^DD",727.826,727.826,25,0)
TYPE OF TRANSACTION^S^I:Initial issue;R:Replacement;S:Spare;X:Repair;^0;26^Q
"^DD",727.826,727.826,25,.1)
Type of Transaction
"^DD",727.826,727.826,25,3)
Enter I to indicate an initial prosthetic issue, R for replacement, S for a spare prosthesis and X for a repaired prosthesis.
"^DD",727.826,727.826,25,10)
TYPE OF TRANSACTION field (#2) in the RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,25,21,0)
^^2^2^2980715^^
"^DD",727.826,727.826,25,21,1,0)
TYPE OF TRANSACTION is the code that best describes the prosthetic
"^DD",727.826,727.826,25,21,2,0)
transaction.
"^DD",727.826,727.826,25,23,0)
^^3^3^2980715^
"^DD",727.826,727.826,25,23,1,0)
The TYPE OF TRANSACTION is derived from the TYPE OF TRANSACTION field (#2)
"^DD",727.826,727.826,25,23,2,0)
in the RECORD OF PROS APPLIANCE/REPAIR file (#660).  If the TYPE OF
"^DD",727.826,727.826,25,23,3,0)
TRANSACTION is not known, NULL is assigned to the field.
"^DD",727.826,727.826,25,"DT")
2980715
"^DD",727.826,727.826,26,0)
REQUESTING STATION^F^^0;27^K:$L(X)>5!($L(X)<5)!'(X?3N.AN." ") X
"^DD",727.826,727.826,26,.1)
Requesting Station
"^DD",727.826,727.826,26,3)
Enter the Station Number of the facility requesting the prosthetic.
"^DD",727.826,727.826,26,10)
STATION NUMBER (#99) in the INSTITUTION file pointed to by REQESTING STATION in file #660.
"^DD",727.826,727.826,26,21,0)
^^2^2^2980715^^^
"^DD",727.826,727.826,26,21,1,0)
REQUESTING STATION is the facility that initiates the request for a Lab
"^DD",727.826,727.826,26,21,2,0)
prosthetic.
"^DD",727.826,727.826,26,23,0)
^^7^7^2980715^^
"^DD",727.826,727.826,26,23,1,0)
REQUESTING STATION is derived by pulling the STATION NUMBER in the
"^DD",727.826,727.826,26,23,2,0)
INSTITUTION file (#4) as pointed to by the REQUESTING STATION (#40) in the
"^DD",727.826,727.826,26,23,3,0)
RECORD OF PROS APPLIANCE/REPAIR (#660).  Only the first five characters
"^DD",727.826,727.826,26,23,4,0)
of the STATION NUMBER will be extracted.  If the STATION NUMBER is less
"^DD",727.826,727.826,26,23,5,0)
than 5 characters, blanks will be padded at the end of the REQUESTING
"^DD",727.826,727.826,26,23,6,0)
STATION field to a length of 5.  If the REQUESTING STATION is not known,
"^DD",727.826,727.826,26,23,7,0)
the field will be populated with 5 blanks.
"^DD",727.826,727.826,26,"DT")
2980715
"^DD",727.826,727.826,27,0)
RECEIVING STATION^F^^0;28^K:$L(X)>5!($L(X)<5)!'(X?3N.AN." ") X
"^DD",727.826,727.826,27,.1)
Receiving Station
"^DD",727.826,727.826,27,3)
Enter the Station Number of the facility receiving the prosthetic request.
"^DD",727.826,727.826,27,10)
STATION NUMBER (#99) in the INSTITUTION file pointed to by RECEIVING STATION in file #660.
"^DD",727.826,727.826,27,21,0)
^^2^2^2980715^^
"^DD",727.826,727.826,27,21,1,0)
RECEIVING STATION is the Lab facility filling the Lab request and providing
"^DD",727.826,727.826,27,21,2,0)
the prosthetic to the REQUESTING STATION.
"^DD",727.826,727.826,27,23,0)
^^7^7^2980715^
"^DD",727.826,727.826,27,23,1,0)
RECEIVING STATION is derived by pulling the STATION NUMBER in the 
"^DD",727.826,727.826,27,23,2,0)
INSTITUTION file (#4) as pointed to by the RECEIVING STATION (#70) in the
"^DD",727.826,727.826,27,23,3,0)
RECORD OF PROS APPLIANCE/REPAIR (#660).  Only the first five characters
"^DD",727.826,727.826,27,23,4,0)
of the STATION NUMBER will be extracted.  If the STATION NUMBER is less 
"^DD",727.826,727.826,27,23,5,0)
than 5 characters, blanks will be padded at the end of the RECEIVING
"^DD",727.826,727.826,27,23,6,0)
STATION field to a length of 5.  If the RECEIVING STATION is not known, 
"^DD",727.826,727.826,27,23,7,0)
the field will be populated with 5 blanks.
"^DD",727.826,727.826,27,"DT")
2980715
"^DD",727.826,727.826,28,0)
PLACEHOLDER 1^F^^0;29^K:$L(X)>15!($L(X)<1) X
"^DD",727.826,727.826,28,3)
Answer must be 1-15 characters in length.
"^DD",727.826,727.826,28,10)
Not yet defined.
"^DD",727.826,727.826,28,21,0)
^^2^2^2980715^^
"^DD",727.826,727.826,28,21,1,0)
PLACEHOLDER 1 was added to the Prosthetics extract file for use at a
"^DD",727.826,727.826,28,21,2,0)
later time.
"^DD",727.826,727.826,28,23,0)
^^2^2^2980715^
"^DD",727.826,727.826,28,23,1,0)
The use of this field has not been determined.  It is added to the Data
"^DD",727.826,727.826,28,23,2,0)
Dictionary for use at a later time.
"^DD",727.826,727.826,28,"DT")
2980715
"^DD",727.826,727.826,29,0)
ZIP CODE^F^^1;1^K:$L(X)>10!($L(X)<5) X
"^DD",727.826,727.826,29,.1)
ZIP Code
"^DD",727.826,727.826,29,3)
Enter the ZIP or ZIP+4 for the prosthetics patient.
"^DD",727.826,727.826,29,10)
ZIP+4 (.1112) in the Patient file (#2) as referenced by DFN.
"^DD",727.826,727.826,29,21,0)
^^2^2^2980715^^
"^DD",727.826,727.826,29,21,1,0)
ZIP CODE is the patient ZIP+4 as indicated in the patient's Patient file
"^DD",727.826,727.826,29,21,2,0)
(#2) record.
"^DD",727.826,727.826,29,23,0)
^^3^3^2980715^
"^DD",727.826,727.826,29,23,1,0)
ZIP CODE is derived from the ZIP+4 field in the Patient file for the
"^DD",727.826,727.826,29,23,2,0)
record indicated by the (prosthetics patient) DFN.  The value of ZIP CODE
"^DD",727.826,727.826,29,23,3,0)
may be either the 5 digit ZIP CODE or the ZIP+4 code.
"^DD",727.826,727.826,29,"DT")
2980715
"^DD",727.826,727.826,30,0)
DATE OF BIRTH^FO^^1;2^K:$L(X)>8!($L(X)<8) X
"^DD",727.826,727.826,30,.1)
Date of Birth
"^DD",727.826,727.826,30,2)
S Y(0)=Y S Y=$$ECXDATEX^ECXUTL(Y)
"^DD",727.826,727.826,30,2.1)
S Y=$$ECXDATEX^ECXUTL(Y)
"^DD",727.826,727.826,30,3)
Enter the patient's birthday in the format YYYYMMDD.
"^DD",727.826,727.826,30,10)
DATE OF BIRTH (#.03) in the Patient file.
"^DD",727.826,727.826,30,21,0)
^^1^1^2980715^^
"^DD",727.826,727.826,30,21,1,0)
The patient data of birth.
"^DD",727.826,727.826,30,23,0)
^^3^3^2980715^
"^DD",727.826,727.826,30,23,1,0)
DATE OF BIRTH is derived from the DATE OF BIRTH field (#.03) in the
"^DD",727.826,727.826,30,23,2,0)
Patient file (#2) referenced by the patient's DFN.  DATE OF BIRTH will be
"^DD",727.826,727.826,30,23,3,0)
stored in the format YYYYMMDD.
"^DD",727.826,727.826,30,"DT")
2980715
"^DD",727.826,727.826,31,0)
GENDER^S^M:Male;F:Female;O:Other;U:Unknown;^1;3^Q
"^DD",727.826,727.826,31,.1)
Gender
"^DD",727.826,727.826,31,3)
Enter the patient's gender.
"^DD",727.826,727.826,31,10)
SEX (.02) in the Patient file (#2) as referenced by DFN.
"^DD",727.826,727.826,31,21,0)
^^1^1^2980715^^
"^DD",727.826,727.826,31,21,1,0)
Gender is the patient's sex.
"^DD",727.826,727.826,31,23,0)
^^2^2^2980715^
"^DD",727.826,727.826,31,23,1,0)
GENDER is derived from the SEX field (#.02) in the Patient file (#2)
"^DD",727.826,727.826,31,23,2,0)
record referenced by the patient's DFN.
"^DD",727.826,727.826,31,"DT")
2980715
"^DD",727.826,727.826,32,0)
AMIS GROUPER^NJ8,0^^1;4^K:+X'=X!(X>99999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",727.826,727.826,32,.1)
AMIS Grouper
"^DD",727.826,727.826,32,1,0)
^.1
"^DD",727.826,727.826,32,1,1,0)
727.826^AG3^MUMPS
"^DD",727.826,727.826,32,1,1,1)
N ND S ND=$G(^ECX(727.826,DA,0)) S ^ECX(727.826,"AG",$P(ND,"^",9),$E(X,1,30),$P(ND,"^",15),DA)=""
"^DD",727.826,727.826,32,1,1,2)
N ND S ND=$G(^ECX(727.826,DA,0)) K ^ECX(727.826,"AG",$P(ND,"^",9),$E(X,1,30),$P(ND,"^",15),DA)
"^DD",727.826,727.826,32,1,1,3)
Required for Prosthetics Extract Audit Reporting
"^DD",727.826,727.826,32,1,1,"%D",0)
^^6^6^2980722^^
"^DD",727.826,727.826,32,1,1,"%D",1,0)
This Cross Reference is used to organize prosthesis parts combined to
"^DD",727.826,727.826,32,1,1,"%D",2,0)
create a prosthetic device.
"^DD",727.826,727.826,32,1,1,"%D",3,0)
   
"^DD",727.826,727.826,32,1,1,"%D",4,0)
"AG" is formated as follows:
"^DD",727.826,727.826,32,1,1,"%D",5,0)
 
"^DD",727.826,727.826,32,1,1,"%D",6,0)
 ^ECX(727.826,"AG",DATE OF SERVICE,AMIS GROUPER,PCE CPT/HCPCS CODE,DA)
"^DD",727.826,727.826,32,1,1,"DT")
2980722
"^DD",727.826,727.826,32,3)
Enter the specific grouper number that is used to indicate what parts combine to create a prosthetic device.
"^DD",727.826,727.826,32,10)
AMIS GROUPER field (#68) of the RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DD",727.826,727.826,32,21,0)
^^2^2^2980715^^^
"^DD",727.826,727.826,32,21,1,0)
AMIS GROUPER holds the AMIS Grouper number that indicates what items
"^DD",727.826,727.826,32,21,2,0)
combine to create a prosthetic device.
"^DD",727.826,727.826,32,23,0)
^^3^3^2980715^^
"^DD",727.826,727.826,32,23,1,0)
AMIS GROUPER is derived from the AMIS GROUPER field (#68) in the RECORD OF
"^DD",727.826,727.826,32,23,2,0)
PROS APPLIANCE/REPAIR file (#660).  The field is used to sort prosthetic
"^DD",727.826,727.826,32,23,3,0)
items that combine to create a prosthesis.  Decimals are not allowed.
"^DD",727.826,727.826,32,"DT")
2980722
"^DD",727.826,727.826,33,0)
PRIMARY CARE PROVIDER NPI^F^^1;5^K:$L(X)>8!($L(X)<1) X
"^DD",727.826,727.826,33,.1)
Primary Care Provider NPI
"^DD",727.826,727.826,33,3)
Enter the National Provider Index for the Primary Care Provider.
"^DD",727.826,727.826,33,10)
Not yet available.
"^DD",727.826,727.826,33,21,0)
^^2^2^2980715^^
"^DD",727.826,727.826,33,21,1,0)
This field is a placeholder that will be populated when the NPI becomes
"^DD",727.826,727.826,33,21,2,0)
available.
"^DD",727.826,727.826,33,23,0)
^^1^1^2980715^
"^DD",727.826,727.826,33,23,1,0)
The National Provider Index is not yet available.
"^DD",727.826,727.826,33,"DT")
2980715
"^DD",727.826,727.826,34,0)
MASTER PATIENT INDEX^F^^1;6^K:$L(X)>10!($L(X)<1) X
"^DD",727.826,727.826,34,.1)
Master Patient Index
"^DD",727.826,727.826,34,3)
Enter the Master Patient Index for the prosthetics patient.
"^DD",727.826,727.826,34,10)
Not yet available.
"^DD",727.826,727.826,34,21,0)
^^2^2^2980715^^
"^DD",727.826,727.826,34,21,1,0)
This field is a placeholder that will be populated when the MPI becomes
"^DD",727.826,727.826,34,21,2,0)
available.
"^DD",727.826,727.826,34,23,0)
^^1^1^2980715^
"^DD",727.826,727.826,34,23,1,0)
The data for this field is not yet available.
"^DD",727.826,727.826,34,"DT")
2980715
"^DD",727.826,727.826,35,0)
DSS DEPT^F^^1;7^K:$L(X)>10!($L(X)<1) X
"^DD",727.826,727.826,35,.1)
DSS Department
"^DD",727.826,727.826,35,3)
Enter the DSS Department for the product team completing the prosthetics work.
"^DD",727.826,727.826,35,10)
Not yet available.
"^DD",727.826,727.826,35,21,0)
^^2^2^2980715^^
"^DD",727.826,727.826,35,21,1,0)
This field is a placeholder that will be populated when the DSS Department
"^DD",727.826,727.826,35,21,2,0)
becomes available.
"^DD",727.826,727.826,35,23,0)
^^1^1^2980715^
"^DD",727.826,727.826,35,23,1,0)
The data for this field is not yet available.
"^DD",727.826,727.826,35,"DT")
2980715
"^DD",728,728,59,0)
LAST DATE PROSTHETICS^728.059P^^1;0
"^DD",728,728,59,10)
The routine ^ECXTRAC adds entries as new Prosthetics Divisions are encountered.
"^DD",728,728,59,21,0)
^^2^2^2980722^^^
"^DD",728,728,59,21,1,0)
This sub-file/field contains DSS Prosthetics divisions and their
"^DD",728,728,59,21,2,0)
respective LAST DATE(s) extracted.
"^DD",728,728,59,23,0)
^^7^7^2980722^^^
"^DD",728,728,59,23,1,0)
This sub-file/field(s) are populated by the ECXTRAC routine.  The routine
"^DD",728,728,59,23,2,0)
looks for a given division as a Prosthetics extract processes.  If the
"^DD",728,728,59,23,3,0)
division is not an entry in this sub-file, it is added.  The respecitive
"^DD",728,728,59,23,4,0)
LAST DATE processed is also updated in this sub-file.
"^DD",728,728,59,23,5,0)
 
"^DD",728,728,59,23,6,0)
This sub-file is DINUMed on the pointer to the Institution file (#4) in
"^DD",728,728,59,23,7,0)
the .01 field.
"^DD",728,728,60,0)
PROSTHETICS^S^R:RUNNING;^7.1;23^Q
"^DD",728,728,60,21,0)
^^1^1^2980706^
"^DD",728,728,60,21,1,0)
This field contains data if the PROSTHETICS extract is currently running.
"^DD",728,728,60,23,0)
^^2^2^2980706^
"^DD",728,728,60,23,1,0)
This data is set by the extract routine.  It must not be manipulated
"^DD",728,728,60,23,2,0)
via VA FileMan.
"^DD",728,728,60,"DT")
2980706
"^DD",728,728.059,0)
LAST DATE PROSTHETICS SUB-FIELD^^1^2
"^DD",728,728.059,0,"DT")
2980722
"^DD",728,728.059,0,"IX","B",728.059,.01)

"^DD",728,728.059,0,"NM","LAST DATE PROSTHETICS")

"^DD",728,728.059,0,"UP")
728
"^DD",728,728.059,.01,0)
DIVISION^P4^DIC(4,^0;1^Q
"^DD",728,728.059,.01,.1)
Division
"^DD",728,728.059,.01,1,0)
^.1
"^DD",728,728.059,.01,1,1,0)
728.059^B
"^DD",728,728.059,.01,1,1,1)
S ^ECX(728,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",728,728.059,.01,1,1,2)
K ^ECX(728,DA(1),1,"B",$E(X,1,30),DA)
"^DD",728,728.059,.01,3)
Enter the Division for the Prosthetics extract
"^DD",728,728.059,.01,10)
Routine ECXTRAC populates this field as a Prosthetics extract processes.
"^DD",728,728.059,.01,21,0)
^^2^2^2980722^^^
"^DD",728,728.059,.01,21,1,0)
This field indicates the division for which Prosthetics information has
"^DD",728,728.059,.01,21,2,0)
been extracted.
"^DD",728,728.059,.01,23,0)
^^6^6^2980722^^
"^DD",728,728.059,.01,23,1,0)
This field is populated by ^ECXTRAC.  If the Prosthetics division that
"^DD",728,728.059,.01,23,2,0)
the Prosthetics extract is processing is not an entry in this file, it
"^DD",728,728.059,.01,23,3,0)
is added.
"^DD",728,728.059,.01,23,4,0)
 
"^DD",728,728.059,.01,23,5,0)
This field is a pointer to the Institution file (#4) and the IEN for the
"^DD",728,728.059,.01,23,6,0)
sub-file is DINUMed on this value.
"^DD",728,728.059,.01,"DT")
2980722
"^DD",728,728.059,1,0)
LAST DATE^D^^0;2^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",728,728.059,1,3)
Enter the last date that information was extracted for Prosthetics.
"^DD",728,728.059,1,10)
ECXTRAC populates this field during the Prosthetics extract process.
"^DD",728,728.059,1,21,0)
^^2^2^2980722^^
"^DD",728,728.059,1,21,1,0)
The LAST DATE field indicates the last date that the prosthetics extract
"^DD",728,728.059,1,21,2,0)
was completed for the division indicated in the Division (.01) field.
"^DD",728,728.059,1,23,0)
^^3^3^2980722^
"^DD",728,728.059,1,23,1,0)
This field is populated by ^ECXTRAC when the DSS Prosthetics extract is
"^DD",728,728.059,1,23,2,0)
processing.  It is the end date the user enters when generating the
"^DD",728,728.059,1,23,3,0)
Prosthetics extract.
"^DD",728,728.059,1,"DT")
2980722
"^DIC",727.826,727.826,0)
PROSTHETICS EXTRACT^727.826
"^DIC",727.826,727.826,0,"GL")
^ECX(727.826,
"^DIC",727.826,727.826,"%",0)
^1.005^1^1
"^DIC",727.826,727.826,"%",1,0)
ECX
"^DIC",727.826,727.826,"%","B","ECX",1)

"^DIC",727.826,727.826,"%D",0)
^^24^24^2980714^^
"^DIC",727.826,727.826,"%D",1,0)
This file contains the data elements as specified by the Decision Support
"^DIC",727.826,727.826,"%D",2,0)
System (DSS) Program Office for the Prosthetics extract from existing
"^DIC",727.826,727.826,"%D",3,0)
VISTA files.  Entries into this file are made by extracting data that
"^DIC",727.826,727.826,"%D",4,0)
originates in the Prosthetics RECORD OF PROS APPLIANCE/REPAIR file (#660).
"^DIC",727.826,727.826,"%D",5,0)
Information respective to the patient for which Prosthetic information
"^DIC",727.826,727.826,"%D",6,0)
is extracted is pulled from the PIMS Patient file (#2).  Once the extracts
"^DIC",727.826,727.826,"%D",7,0)
(making up the records in this file) are approved by the extract manager,
"^DIC",727.826,727.826,"%D",8,0)
entries in this file are loaded into mail messages and transmitted to
"^DIC",727.826,727.826,"%D",9,0)
the commercial vendor.  This file is intended to be used for validation
"^DIC",727.826,727.826,"%D",10,0)
purposes only.  Entries in this file should be made only by the extract
"^DIC",727.826,727.826,"%D",11,0)
load routine.
"^DIC",727.826,727.826,"%D",12,0)
 
"^DIC",727.826,727.826,"%D",13,0)
Since validation techniques will be determined by the local site, it
"^DIC",727.826,727.826,"%D",14,0)
is intended that the site add whatever cross references are deemed
"^DIC",727.826,727.826,"%D",15,0)
necessary to support validation.  HOWEVER, this file contains three
"^DIC",727.826,727.826,"%D",16,0)
nationally controlled cross references.  'AINV' and 'B' are on the
"^DIC",727.826,727.826,"%D",17,0)
SEQUENCE NUMBER field (#.01) and are required to look up and sort the
"^DIC",727.826,727.826,"%D",18,0)
entries in this file in ascending and descending order.  The "AG" cross
"^DIC",727.826,727.826,"%D",19,0)
reference is on the DATE OF SERVICE field (#8), AMIS GROUPER (#32)
"^DIC",727.826,727.826,"%D",20,0)
PCE CPT/HCPCS CODE (#14).  "AG" is used to report the date range HCPCS
"^DIC",727.826,727.826,"%D",21,0)
report and bulletin.  These cross references are essential to the proper
"^DIC",727.826,727.826,"%D",22,0)
functioning of the Prosthetics extract.
"^DIC",727.826,727.826,"%D",23,0)
 
"^DIC",727.826,727.826,"%D",24,0)
This file should not be modified directly using VA FileMan.
"^DIC",727.826,"B","PROSTHETICS EXTRACT",727.826)

**END**
**END**

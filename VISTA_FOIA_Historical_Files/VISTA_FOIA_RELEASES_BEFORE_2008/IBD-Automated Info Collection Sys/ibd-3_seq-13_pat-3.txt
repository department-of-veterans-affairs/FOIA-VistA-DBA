$TXT Created by SKINNER,ALAN at MNTVBB.ISC-ALBANY.VA.GOV  (KIDS) on TUESDAY, 12/30/97 at 15:30
=============================================================================
Run Date: JAN 21, 1998                     Designation: IBD*3*3
Package : IBD - AUTOMATED INFO  SYSPriority: Mandatory
Version : 3        SEQ #13                      Status: Released
=============================================================================

Associated patches: (v)IBD*3*1     <<= must be installed BEFORE `IBD*3*3'
                    (v)IBD*3*6     <<= must be installed BEFORE `IBD*3*3'

Subject: Scanning Problem Corrections

Category: 
  - Routine
  - Other
  - Enhancement (Mandatory)
  - Print Template
  - Sort Template

Description: 
============

 NOTE: There are 2 steps to install this patch. The first step is to install
       the server (VISTA) software released as a KIDS build and the second
       step is to install the client software. The patch MUST be installed
       in this order.
  
 This patch contains a number of enhancements and fixes to both the client
 workstation and server (VISTA) side of the Automated Information Collection
 System (AICS).  It is necessary to install both the server portion of this
 patch (a KIDS build) on the VISTA server system and to install the new 
 executable on the workstation. THE PATCH TO THE SERVER SOFTWARE RELEASED AS
 A KIDS BUILD MUST BE INSTALLED PRIOR TO INSTALLING THE CLIENT SOFTWARE.
 The KIDS build should be installed even if your site is not scanning yet. 
 FORMS PRINTED PRIOR TO INSTALLATION OF THIS PATCH WILL NO LONGER BE
 SCANNABLE ONCE THE CLIENT PORTION OF THIS PATCH IS INSTALLED.  If you are
 currently scanning, you will want to leave a workstation available to
 complete scanning of the outstanding forms, prior to installing the new
 workstation software.  Conversely, the forms printed after the KIDS portion
 of this patch is installed can not be scanned unless the new client
 software is installed.  Additionally, forms printed prior to the VISTA
 patch (IBD*3.0*3), and then reprinted after installation of the
 patch will need to be input through manual methods.
 
 The client software can be retrieved using FTP from the Albany, Hines, and 
 Salt Lake CIO Field office software directories as file IBD_30_3.exe.
 Remember to pull this file in Binary.  Running this file will install the
 necessary components in the required directories.  
  
 The primary enhancement of this patch is to simplify the process of
 calibrating the scanning equipment, and in many cases, eliminate the need
 to calibrate the scanner entirely. 
  
 A second enhancement makes the tracking and correction of errors from
 the workstation easier.  The following is a complete list of enhancements
 and fixes.
 
    Eliminating Calibration:
    ------------------------
    One of the most complicated aspects of AICS v3.0 was the need to
    calibrate the scanners to locate what are referred to as "Anchors" on
    the form.  This patch redesigns this functionality.  The old corner 
    angles printed in the corners of each encounter form are replaced by
    VA logos.  The area that could be searched on a form for the angle 
    marks needed to be small so that the corner of the page or the corner
    of a block wasn't mistaken for an anchor.  Using the VA logos as anchors
    allows us to search a larger area for the anchor.  Also included with 
    this change are major improvements to the auto rotation of forms scanned
    upside down.  In addition the online help has been updated to reflect
    this change.  (NOIS WLA-0697-61981)
 
    Improve Hand Print Field Recognition:
    -------------------------------------
    A number of changes have been made to improve hand print field
    recognition.  A field in the Paperkey.ini file has been set to allow
    paper keyboard to read characters that stray outside of the designated
    input areas. Also, a change made to the AICS DATA ELEMENTS (#359.1) file
    will eliminate the minus sign as an allowable character value for most
    entries.
 
    List Errors Enhancement:
    ------------------------
    The List Errors form on the Options menu has been modified to display 
    a check mark next to those errors that have been edited and corrected 
    thus giving you a visible display of which errors are still unresolved.
    To assist in determining if further input is needed on an error, a 
    listing of data stored in PCE from the encounter is available on this
    form by clicking on the new tabs at the bottom of the form.  In 
    addition the ability to find the data stored in PCE for any form is 
    available as a new item on the options menu.
 
    Manual Data Entry Enhancement:
    -----------------------------
    During manual data entry, if an encounter has already been checked out
    a warning is given and the user is asked if they want to continue.  At
    this prompt, a user can now type "??" (two question marks) and see the
    data on display in PCE for this encounter.
 
    Unattended Mode Enhancement:
    ---------------------------
    When the workstation is running in unattended mode, if the anchors or 
    scannable page block can not be found on the initial attempt, the 
    system will now automatically rotate the form and try to read it 
    again (in case the form has been fed in upside down).
 
    When the workstation is running in unattended mode, it stops 
    recognizing a form if it finds it is not a scannable form (cannot 
    find a scannable page mark or cannot locate the anchors on the form).
    The image log will now specify whether it is having trouble 
    finding the anchors or the scannable page block.  This can help in 
    determining if the form is indeed non-scannable (no scannable page 
    block) or the anchors were not found.
 
    Getting Ready for PK97
    ----------------------
    Because this install requires that all form spec files be deleted and
    new master form specs be loaded as well as recompilation of all 
    existing form spec files, we are taking this opportunity to move all 
    form spec files to the C:\VISTA\AICS\FORMSPEC directory.  Our current
    plans call for the purchase of a new version of Paper Keyboard (PK97)
    which is compatible with Windows NT.  Because PK97 uses a different
    directory structure, we are taking this opportunity to move these files
    to a location that is compatible with this new product.
 
    Fixes:
    ------
       A.  When attempting to log on to the AICS workstation, if a user
           does not have the AICS Scanning Workstation [IBD SCANNING
           WORKSTATION] menu option or XUPROGMODE security key assigned to
           them, an error is no longer encountered.
 
       B.  When defining a form with a scannable handprint field narrative
           whose length exceeds the width allowed on the form, the
           narrative is split into multiple lines to accommodate the 
           entire field. When the form spec was generated for this type of
           field, both lines were assigned the same name and this caused 
           an error in Paper Keyboard. The lines are now assigned unique 
           names containing the text LINE n. (NOIS ISH-0597-42534) 
   
       C.  If a form has a handprint field whose definition specifies that
           both the code and narrative should be passed to PCE, an error 
           was being generated in PCE.  Now, if the code and narrative are
           to be passed to PCE, and a handprint narrative has been entered,
           that narrative is passed with the code without generating an
           error.  (NOIS BYN-0997-10024)
   
       D.  When scanning in unattended mode, hand print fields containing 
           data were being ignored and recognition continued. This has been
           corrected so that if a hand print field has data entered in it,
           the form will automatically be saved to the directory for forms 
           needing operator verification and the data will no longer be 
           ignored.  Although this change affects the GUI/Workstation side
           of AICS V3.0, the actual code change that fixes this problem was
           done in a MUMPS routine.  (NOIS HOU-0797-70221)
   
       E.  While using handprint fields with bubbles, when the handprint
           field was compiled and loaded, it caused a Paper Keyboard
           error (max # DDE Links exceeded) due to a misplaced semi-colon.
           This has been fixed. (NOIS SDC-0597-62192) 
       
       F.  The field level image processing for hand print fields was not
           working due to errors in the form spec generator routines.
           This software change will now clean up stray marks in the hand
           print fields.
   
       G.  Changes made to the preferences on the AICS workstation would
           default to their original values under certain circumstances.
           This patch will assure that changes to the preferences are filed
           and restored as they were saved.  (NOIS HOU-0897-71564)
  
       H.  Timer Warning errors were occurring sporadically during the
           scanning process.  This patch resolves the issues with the timer,
           ultimately eliminating the errors incurred.
           (NOIS messages: DAY-0897-40034 and PHO-0997-60255)
  
 This patch should be loaded with NO AICS users on the system.
  
 If installed during the normal work day it is recommended that the
 following menu options (File #19) and all of their descendants be
 disabled to prevent possible conflicts while running the Init.
 Other DHCP users will not be affected.
  
         IBD*         (all options starting with IBD)
  
 Installation will take from a minute to 15 minutes, depending on the
 number of scannable forms that already exist on your system.  
  
 ************************VISTA INSTALLATION INSTRUCTIONS*********************
  
 1.  LOAD TRANSPORT GLOBAL
     ---------------------
     Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
  
 2.  DISABLE ROUTINE MAPPING (AXP sites only)
     ----------------------------------------
     Disable routine mapping on all systems for the routines listed in Step 3
     below.
  
     NOTE:  If the routines included in this patch are not currently in your
     mapped routine set, please skip this step.
  
 3.  ROUTINE(S) SENT WITH PATCH
     --------------------------
     The following is a list of the routine(s) included in this patch.  The
     second line of each of these routine(s) will look like:
  
      <tab>;;3.0;AUTOMATED INFO COLLECTION SYS;**[patch list]**;APR 24, 1997 
  
                             CHECK^XTSUMBLD results
  
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  IBDF18E            11340277              12059232              3
  IBDF18E1           10928323              10786734            1,3
  IBDF1B1            11709608              11710207              3
  IBDF2F             14953767              15154566              3
  IBDF2F1             6492541               6298603              3
  IBDF2F2               N/A                 4539691              3
  IBDFBKS1            5830972               7584949              3
  IBDFBKS2           14974345              15192248              3
  IBDFBKS4            8554663               8860994              3
  IBDFDE             28292527              28694127              3
  IBDFRPC3            5266853               5788375            6,3
  IBDFRPC5              N/A                 4234564              3
  IBDFRPC6              N/A                12300793              3
  IBDY303               N/A                 2792755              3
  IBDY303E              N/A                 2152738              3
 
 Total number of routines: 15
  
 4.  START UP KIDS
     -------------
     Start up the Kernel Installation and Distribution System Menu
     [XPD MAIN]:
  
          Edits and Distribution ...
          Utilities ...
          Installation ...
  
     Select Kernel Installation & Distribution System Option:  INStallation
                                                               ---
  
     1      Load a Distribution
     2      Verify Checksums in Transport Global
     3      Print Transport Global
     4      Compare Transport Global to Current System
     5      Backup a Transport Global
     6      Install Package(s)
            Restart Install of Package(s)
            Unload a Distribution
  
  
     Select Installation Option:
  
 5.  SELECT INSTALLATION OPTION
     --------------------------
     NOTE: The following are OPTIONAL (When prompted for the INSTALL NAME,
           enter IBD*3.0*3):
  
     a.  Backup a Transport Global - This option will create a backup message
         of any routines exported with this patch. It will not backup any
         other changes such as DD's or templates.
  
     b.  Compare Transport Global to Current System - This option will allow
         you to view all changes that will be made when this patch is
         installed.  It compares all components of this patch (routines,
         DD's, templates, etc.).
  
     c.  Verify Checksums in Transport Global - This option will allow you
         to ensure the integrity of the routines that are in the transport
         global.
  
 6.  INSTALL KIDS PATCH
     ------------------
     a.  Choose the Install Package(s) option of the Installation menu to
         start the patch install.
  
     b.  When prompted 'Want to DISABLE Scheduled Options and Menu Options?
         YES//', take the default (YES).
  
     c.  When prompted "Enter options you wish to mark as 'Out of Order':",
         enter the following options:
  
         IBD*         (all options starting with IBD)
  
     d.  When prompted 'Enter protocols you wish to mark as 'Out of Order':',
         press return.
  
 7.  DELETE PRE AND POST INITIALIZATION ROUTINES
     -------------------------------------------
     Delete the following routines from your system after successful
     installation of this patch:
  
         IBDY303
         IBDY303E
  
 8.  REBUILD MAPPED ROUTINE(S) (AXP sites only)
     ------------------------------------------
     Optional - Include the routines distributed with this patch in the
     mapped routine set.
      
     NOTE: This step is only necessary if you performed step 2 or if
     you wish to include the routines in your mapped set.
 
 *******************CLIENT INSTALLATION INSTRUCTIONS************************
                           
 FILES RETRIEVAL: 
    
 The client software and the documentation files are available
 on the following CIO Field Offices' Anonymous.Software directories.
 Use the appropriate FTP capability to retrieve the files.
   
   
    CIO FIELD OFFICE      FTP ADDRESS          DIRECTORY
    
       HINES             152.129.1.110     anonymous.software
       ALBANY            152.127.1.5       anonymous.software
       SALT LAKE         152.131.2.1       anonymous.software
   
     FILE NAMES           DESCRIPTION
  
     IBD_30_3.exe         Client software
     IBD_3_3U.pdf         User manual
     IBD_3_3C.pdf         User manual, appendix C
     IBD_3_3D.pdf         Install guide, appendix D
     IBD_3_3R.pdf         Release notes, appendix
     IBD_3_3L.pdf         Replacement page list
  
 The client installation will replace the scanning workstation executable 
 (IBDSCAN.EXE) and the on-line HELP file (IBDSCAN.HLP) on your AICS Scanning
 Workstations.  It also deletes all form specs whose names start with EF
 currently residing in your PAPERKEY directory. This is done so that the new,
 updated form spec definitions are pulled from the VISTA software when the
 next set of forms are scanned.  You will be prompted to indicate whether
 you would like to create backup copies of all files replaced as an option
 during the installation.  When installing this patch, the AICS Scanning 
 Workstation application MUST NOT be running on the workstation.  
  
 **NOTE:  The Client software is all-inclusive.  It includes all previously
          released workstation patches.  The IBD_30_3.EXE file may be run on
          new workstations or on top of a pre-existing version of the
          software.
   
                           
  1.  Get the IBD_30_3.EXE file using FTP. This must be obtained from the 
      appropriate anonymous software directory.   Make sure to set transfer 
      as BINARY. Depending on the FTP software, this file might be placed in 
      the c:\WINDOWS, c:\, or some other directory.  Careful attention to 
      the FTP client's setup should show where downloaded files will be 
      placed. If you cannot find it, use WFW 3.11 File Manager's Search 
      functionality or Win 95's Find File or Folder functionality.  
   
   
  2.  Copy the file IBD_30_3.EXE file into an empty (temporary or scratch) 
      directory.  
   
  3.  Run the IBD_30_3.EXE   This starts the AICS installation. 
   
   
         WIN 95: Double click on the file name from within EXPLORER or use 
                 the RUN option on the START menu and type IBD_30_3.EXE 
       WFW 3.11: Double click on the file name from within File Manager or 
                 use the File/Run option in Program Manager and type 
                 c:\xxx\IBD_30_3.EXE 
   
      Take all the default prompts unless they were overridden during the 
      original install of AICS V3.0 on the workstation.  The actual 
      install should take less than one minute.  When finished, you can 
      safely delete the IBD_30_3.EXE file from the workstation.  
 
  4.  Start Paper Keyboard from the Start menu (windows 95) or from program
      manager (win 3.11).
 
  5.  Select Edit/Scanner settings and check the following settings: 
      a.  The scanner is set to the correct scanner (HP Scanjet or Kofax for
          the Bell & Howell scanner).
      b.  Brightness: This may need to be adjusted after installation of this
          patch, see 'ADJUSTING THE SCANNER BRIGHTNESS' section (next
          section).
      c.  Sheet feeder should be selected unless you are not using the sheet
          feeder.
      d.  Double Sided should be selected only for the Bell & Howell if you
          are using it as a double sided scanner.
      e.  Alternate Rot'n should not be checked.
      f.  Stop when Empty should be checked.
      g.  Under Rotation, the right side up A should be checked.
      h.  Under Resolution, the resolution should be 300 DPI.
      i.  Under Calibrated Scale, both the vertical and horizontal should be
          zero initially.  This may need to be adjusted, particularly on the
          Bell and Howell scanners, see the instructions below.
      j.  Under Offset Units, both vertical and horizontal should be zero.  
      k.  Save settings by clicking on the SAVE button.
 
 ************************************************************************
 The following sections are not part of the patch installation process,
 but may be referred to later if problems arise during scanning:
  
 ADJUSTING THE SCANNER BRIGHTNESS
   If during the scanning process, you note that bubbles are being missed,
   or that stray marks are being interpreted as bubbled marks on a form,
   it may be necessary to adjust the scanner brightness.  To do so:
      a.  Start the AICS software and log on to the the Vista system.
      b.  Click the PK button on the bottom bar and maximize the PK
          window.
      c.  Under FILE, Open Form Spec for C:\vista\aics\formspec\AICSMSTR.FS.
  
          NOTE: You must use the AICSMSTR.FS file in this directory,
          not the one it defaults to.
  
          The AICS master form spec removes the very small dots that
          make up bubbles and hand print fields.
      d.  Under Edit/Preferences check Inspect Each Field, click okay but
          do not save. This will cause the Field Value box to come up and
          hold the image on the screen for inspection.
      e.  From within Paper Keyboard scan in a form by clicking the scanner
          icon, then click the R icon to recognize.
      f.  Click and drag the Field Value box out of the way. Look over the
          form by moving it around. If you see pieces of bubbles left after
          the first recognition (the very small dots appear to have run
          together) set the brightness lighter (move to the right).
  
          NOTE: For Bell and Howell the range is only -4 to 4. Only move
          an increment of "1" at a time as it has a more dramatic change
          than a move of "1" on the HP.
      g.  If you do NOT see pieces of bubble, but are having trouble
          recognizing valid marks, set the brightness darker (to the left).
      h.  Click Cancel in the Field Value Box, then click DISCARD to the
          Warning.
      i.  Generally, you want the darkest scan you can achieve and still
          remove all of the small dots. This may take some experimentation.
   
 CALIBRATING THE SCANNER
   Only perform calibration if you CONSISTENTLY cannot locate anchors
   when scanning.  There is no need to attempt calibration initially.
   This patch should allow for considerable latitude in placement of
   VA Logos.  It is only under extreme circumstances that calibration
   will be necessary (i.e. badly aligned camera on the scanner, etc.)
      a.  Print out a form (with the new VA Logos), preferably one that has
          areas to be scanned near the top and bottom of one page, or use one
          that has already been printed as long as it has the VA logos for
          anchors.
      b.  From the AICS workstation screen, go to File/Get Form Spec option,
          retrieve the form spec (type in the form spec number -#) for the
          form you printed in the previous step.
      c.  Exit from the AICS workstation software.
      d.  Start Paper Keyboard from the start menu (WIN95) or program manager
          (WIN 3.11).
      e.  Under File/Open Form Spec open file C:\vista\aics\formspec\EF<#>.fs
      f.  Under Edit/Preferences turn on Inspect Each Field but don't
          save this setting.
      g.  Under View make sure that Show Bounds is checked.
      h.  From within Paper Keyboard scan in a form by clicking the scanner
          icon, then click the R icon to recognize.
      i.  After recognizing the Form ID and the page, you should see the red
          outline of the scannable areas. Drag the Field Value box out of the
          way and check the top and bottom of the form. Cancel Field value
          box and then click DISCARD to warning.
  
          For example, if the red boxes don't exactly match the fields, under
          Edit/Scanner Settings change the value in the calibrated scale. If
          the red boxes appear lower than the actual location, enter a
          negative number in the vertical calibrated scale. Try increments of
          2 or 3.
      j.  Save the settings.
      k.  Repeat the steps until you are satisfied with the alignment.
 

Routine Information:
====================

Routine Name:
  - IBDF18E


Routine Checksum:

Routine Name:
  - IBDF18E1


Routine Checksum:

Routine Name:
  - IBDF1B1


Routine Checksum:

Routine Name:
  - IBDF2F


Routine Checksum:

Routine Name:
  - IBDF2F1


Routine Checksum:

Routine Name:
  - IBDF2F2


Routine Checksum:

Routine Name:
  - IBDFBKS1


Routine Checksum:

Routine Name:
  - IBDFBKS2


Routine Checksum:

Routine Name:
  - IBDFBKS4


Routine Checksum:

Routine Name:
  - IBDFDE


Routine Checksum:

Routine Name:
  - IBDFRPC3


Routine Checksum:

Routine Name:
  - IBDFRPC5


Routine Checksum:

Routine Name:
  - IBDFRPC6


Routine Checksum:

Routine Name:
  - IBDY303


Routine Checksum:

Routine Name:
  - IBDY303E


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : PASCUCCI,TERRY M              Date Entered : MAY 20, 1997
Completed By: SURI,ASHWANI                  Date Completed: JAN 21, 1998
Released By : BOTTINI,STEVE                 Date Released : JAN 21, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

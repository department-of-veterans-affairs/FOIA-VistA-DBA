EMERGENCY Released OR*3*131 SEQ #122
Extracted from mail message
**KIDS**:OR*3.0*131^

**INSTALL NAME**
OR*3.0*131
"BLD",15166,0)
OR*3.0*131^ORDER ENTRY/RESULTS REPORTING^0^3020208^y
"BLD",15166,4,0)
^9.64PA^^
"BLD",15166,"INI")
PRE^ORY131
"BLD",15166,"INIT")
POST^ORY131
"BLD",15166,"KRN",0)
^9.67PA^8989.52^19
"BLD",15166,"KRN",.4,0)
.4
"BLD",15166,"KRN",.401,0)
.401
"BLD",15166,"KRN",.402,0)
.402
"BLD",15166,"KRN",.403,0)
.403
"BLD",15166,"KRN",.5,0)
.5
"BLD",15166,"KRN",.84,0)
.84
"BLD",15166,"KRN",3.6,0)
3.6
"BLD",15166,"KRN",3.8,0)
3.8
"BLD",15166,"KRN",9.2,0)
9.2
"BLD",15166,"KRN",9.8,0)
9.8
"BLD",15166,"KRN",9.8,"NM",0)
^9.68A^9^9
"BLD",15166,"KRN",9.8,"NM",1,0)
ORCDPS2^^0^B63227375
"BLD",15166,"KRN",9.8,"NM",2,0)
ORQQCN2^^0^B31607274
"BLD",15166,"KRN",9.8,"NM",3,0)
ORWDPS2^^0^B49768470
"BLD",15166,"KRN",9.8,"NM",4,0)
ORWDPS4^^0^B9952247
"BLD",15166,"KRN",9.8,"NM",5,0)
ORWDX^^0^B70311882
"BLD",15166,"KRN",9.8,"NM",6,0)
ORWDXR^^0^B25444838
"BLD",15166,"KRN",9.8,"NM",7,0)
ORWDXM3^^0^B21198849
"BLD",15166,"KRN",9.8,"NM",8,0)
ORWDXM1^^0^B61794540
"BLD",15166,"KRN",9.8,"NM",9,0)
ORWUL^^0^B45508889
"BLD",15166,"KRN",9.8,"NM","B","ORCDPS2",1)

"BLD",15166,"KRN",9.8,"NM","B","ORQQCN2",2)

"BLD",15166,"KRN",9.8,"NM","B","ORWDPS2",3)

"BLD",15166,"KRN",9.8,"NM","B","ORWDPS4",4)

"BLD",15166,"KRN",9.8,"NM","B","ORWDX",5)

"BLD",15166,"KRN",9.8,"NM","B","ORWDXM1",8)

"BLD",15166,"KRN",9.8,"NM","B","ORWDXM3",7)

"BLD",15166,"KRN",9.8,"NM","B","ORWDXR",6)

"BLD",15166,"KRN",9.8,"NM","B","ORWUL",9)

"BLD",15166,"KRN",19,0)
19
"BLD",15166,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",15166,"KRN",19,"NM",1,0)
OR CPRS GUI CHART^^0
"BLD",15166,"KRN",19,"NM","B","OR CPRS GUI CHART",1)

"BLD",15166,"KRN",19.1,0)
19.1
"BLD",15166,"KRN",101,0)
101
"BLD",15166,"KRN",409.61,0)
409.61
"BLD",15166,"KRN",771,0)
771
"BLD",15166,"KRN",870,0)
870
"BLD",15166,"KRN",8989.51,0)
8989.51
"BLD",15166,"KRN",8989.52,0)
8989.52
"BLD",15166,"KRN",8994,0)
8994
"BLD",15166,"KRN",8994,"NM",0)
^9.68A^6^6
"BLD",15166,"KRN",8994,"NM",1,0)
ORQQCN SVC W/SYNONYMS^^0
"BLD",15166,"KRN",8994,"NM",2,0)
ORWDPS2 CHKGRP^^0
"BLD",15166,"KRN",8994,"NM",3,0)
ORWDPS2 CHKPI^^0
"BLD",15166,"KRN",8994,"NM",4,0)
ORWDXR GTORITM^^0
"BLD",15166,"KRN",8994,"NM",5,0)
ORWDPS2 QOGRP^^0
"BLD",15166,"KRN",8994,"NM",6,0)
ORWDXR GETPKG^^0
"BLD",15166,"KRN",8994,"NM","B","ORQQCN SVC W/SYNONYMS",1)

"BLD",15166,"KRN",8994,"NM","B","ORWDPS2 CHKGRP",2)

"BLD",15166,"KRN",8994,"NM","B","ORWDPS2 CHKPI",3)

"BLD",15166,"KRN",8994,"NM","B","ORWDPS2 QOGRP",5)

"BLD",15166,"KRN",8994,"NM","B","ORWDXR GETPKG",6)

"BLD",15166,"KRN",8994,"NM","B","ORWDXR GTORITM",4)

"BLD",15166,"KRN","B",.4,.4)

"BLD",15166,"KRN","B",.401,.401)

"BLD",15166,"KRN","B",.402,.402)

"BLD",15166,"KRN","B",.403,.403)

"BLD",15166,"KRN","B",.5,.5)

"BLD",15166,"KRN","B",.84,.84)

"BLD",15166,"KRN","B",3.6,3.6)

"BLD",15166,"KRN","B",3.8,3.8)

"BLD",15166,"KRN","B",9.2,9.2)

"BLD",15166,"KRN","B",9.8,9.8)

"BLD",15166,"KRN","B",19,19)

"BLD",15166,"KRN","B",19.1,19.1)

"BLD",15166,"KRN","B",101,101)

"BLD",15166,"KRN","B",409.61,409.61)

"BLD",15166,"KRN","B",771,771)

"BLD",15166,"KRN","B",870,870)

"BLD",15166,"KRN","B",8989.51,8989.51)

"BLD",15166,"KRN","B",8989.52,8989.52)

"BLD",15166,"KRN","B",8994,8994)

"BLD",15166,"QUES",0)
^9.62^^
"BLD",15166,"REQB",0)
^9.611^1^1
"BLD",15166,"REQB",1,0)
OR*3.0*125^2
"BLD",15166,"REQB","B","OR*3.0*125",1)

"INI")
PRE^ORY131
"INIT")
POST^ORY131
"KRN",19,10082,-1)
0^1
"KRN",19,10082,0)
OR CPRS GUI CHART^CPRSChart version 1.0.18.8^^B^^^^^^^^
"KRN",19,10082,1,0)
^19.06^2^2^3011231^^^^
"KRN",19,10082,1,1,0)
This option is required by the Kernel Broker to give access to the
"KRN",19,10082,1,2,0)
RPCs used by the CPRS GUI (CPRSChart.EXE).
"KRN",19,10082,99.1)
58841,46004
"KRN",19,10082,"RPC",0)
^19.05P^1766^1766
"KRN",19,10082,"RPC",1,0)
GMRC LIST CONSULT REQUESTS
"KRN",19,10082,"RPC",218,0)
XWB GET VARIABLE VALUE
"KRN",19,10082,"RPC",219,0)
TIU AUTHORIZATION
"KRN",19,10082,"RPC",220,0)
TIU CAN CHANGE COSIGNER?
"KRN",19,10082,"RPC",221,0)
TIU CREATE ADDENDUM RECORD
"KRN",19,10082,"RPC",222,0)
TIU CREATE RECORD
"KRN",19,10082,"RPC",223,0)
TIU DELETE RECORD
"KRN",19,10082,"RPC",224,0)
TIU DETAILED DISPLAY
"KRN",19,10082,"RPC",225,0)
TIU DOCUMENTS BY CONTEXT
"KRN",19,10082,"RPC",226,0)
TIU GET ADDITIONAL SIGNERS
"KRN",19,10082,"RPC",227,0)
TIU GET ALERT INFO
"KRN",19,10082,"RPC",228,0)
TIU GET DOCUMENT PARAMETERS
"KRN",19,10082,"RPC",229,0)
TIU GET DS TITLES
"KRN",19,10082,"RPC",230,0)
TIU GET DS URGENCIES
"KRN",19,10082,"RPC",231,0)
TIU GET PERSONAL PREFERENCES
"KRN",19,10082,"RPC",232,0)
TIU GET PN TITLES
"KRN",19,10082,"RPC",233,0)
TIU GET RECORD TEXT
"KRN",19,10082,"RPC",234,0)
TIU IDENTIFY CONSULTS CLASS
"KRN",19,10082,"RPC",235,0)
TIU IS THIS A CONSULT?
"KRN",19,10082,"RPC",236,0)
TIU JUSTIFY DELETE?
"KRN",19,10082,"RPC",237,0)
TIU LOAD BOILERPLATE TEXT
"KRN",19,10082,"RPC",238,0)
TIU LOAD RECORD FOR EDIT
"KRN",19,10082,"RPC",239,0)
TIU LOCK RECORD
"KRN",19,10082,"RPC",240,0)
TIU LONG LIST CONSULT TITLES
"KRN",19,10082,"RPC",241,0)
TIU LONG LIST OF TITLES
"KRN",19,10082,"RPC",242,0)
TIU NOTES
"KRN",19,10082,"RPC",243,0)
TIU NOTES 16 BIT
"KRN",19,10082,"RPC",244,0)
TIU NOTES BY VISIT
"KRN",19,10082,"RPC",245,0)
TIU PERSONAL TITLE LIST
"KRN",19,10082,"RPC",246,0)
TIU PRINT RECORD
"KRN",19,10082,"RPC",247,0)
TIU REQUIRES COSIGNATURE
"KRN",19,10082,"RPC",248,0)
TIU SIGN RECORD
"KRN",19,10082,"RPC",249,0)
TIU SUMMARIES
"KRN",19,10082,"RPC",250,0)
TIU SUMMARIES BY VISIT
"KRN",19,10082,"RPC",251,0)
TIU UNLOCK RECORD
"KRN",19,10082,"RPC",252,0)
TIU UPDATE ADDITIONAL SIGNERS
"KRN",19,10082,"RPC",253,0)
TIU UPDATE RECORD
"KRN",19,10082,"RPC",254,0)
TIU WHICH SIGNATURE ACTION
"KRN",19,10082,"RPC",1032,0)
ORB DELETE ALERT
"KRN",19,10082,"RPC",1033,0)
ORB FOLLOW-UP ARRAY
"KRN",19,10082,"RPC",1034,0)
ORB FOLLOW-UP STRING
"KRN",19,10082,"RPC",1035,0)
ORB FOLLOW-UP TYPE
"KRN",19,10082,"RPC",1036,0)
ORB SORT METHOD
"KRN",19,10082,"RPC",1037,0)
ORK TRIGGER
"KRN",19,10082,"RPC",1038,0)
ORQ NULL LIST
"KRN",19,10082,"RPC",1039,0)
ORQOR DETAIL
"KRN",19,10082,"RPC",1040,0)
TIU TEMPLATE CHECK BOILERPLATE
"KRN",19,10082,"RPC",1041,0)
TIU TEMPLATE CREATE/MODIFY
"KRN",19,10082,"RPC",1042,0)
TIU TEMPLATE DELETE
"KRN",19,10082,"RPC",1045,0)
TIU TEMPLATE GETPROOT
"KRN",19,10082,"RPC",1049,0)
TIU TEMPLATE LISTOWNR
"KRN",19,10082,"RPC",1050,0)
TIU TEMPLATE SET ITEMS
"KRN",19,10082,"RPC",1051,0)
TIU GET LIST OF OBJECTS
"KRN",19,10082,"RPC",1052,0)
ORQOR LIST
"KRN",19,10082,"RPC",1053,0)
ORQORB SORT
"KRN",19,10082,"RPC",1054,0)
ORQPT ATTENDING/PRIMARY
"KRN",19,10082,"RPC",1055,0)
ORQPT CLINIC PATIENTS
"KRN",19,10082,"RPC",1056,0)
ORQPT CLINICS
"KRN",19,10082,"RPC",1057,0)
ORQPT DEFAULT LIST SOURCE
"KRN",19,10082,"RPC",1058,0)
ORQPT DEFAULT PATIENT LIST
"KRN",19,10082,"RPC",1059,0)
ORQPT PATIENT TEAM PROVIDERS
"KRN",19,10082,"RPC",1060,0)
ORQPT PROVIDER PATIENTS
"KRN",19,10082,"RPC",1061,0)
ORQPT PROVIDERS
"KRN",19,10082,"RPC",1062,0)
ORQPT SPECIALTIES
"KRN",19,10082,"RPC",1063,0)
ORQPT SPECIALTY PATIENTS
"KRN",19,10082,"RPC",1064,0)
ORQPT TEAM PATIENTS
"KRN",19,10082,"RPC",1065,0)
ORQPT TEAMS
"KRN",19,10082,"RPC",1066,0)
ORQPT WARD PATIENTS
"KRN",19,10082,"RPC",1067,0)
ORQPT WARDRMBED
"KRN",19,10082,"RPC",1068,0)
ORQPT WARDS
"KRN",19,10082,"RPC",1069,0)
ORQQAL DETAIL
"KRN",19,10082,"RPC",1070,0)
ORQQAL LIST
"KRN",19,10082,"RPC",1071,0)
ORQQAL LIST REPORT
"KRN",19,10082,"RPC",1072,0)
ORQQCN ADDCMT
"KRN",19,10082,"RPC",1073,0)
ORQQCN ADMIN COMPLETE
"KRN",19,10082,"RPC",1074,0)
ORQQCN DETAIL
"KRN",19,10082,"RPC",1075,0)
ORQQCN DISCONTINUE
"KRN",19,10082,"RPC",1076,0)
ORQQCN FIND CONSULT
"KRN",19,10082,"RPC",1077,0)
ORQQCN FORWARD
"KRN",19,10082,"RPC",1078,0)
ORQQCN GET CONSULT
"KRN",19,10082,"RPC",1079,0)
ORQQCN GET ORDER NUMBER
"KRN",19,10082,"RPC",1080,0)
ORQQCN GET PROC SVCS
"KRN",19,10082,"RPC",1081,0)
ORQQCN LIST
"KRN",19,10082,"RPC",1082,0)
ORQQCN LOAD FOR EDIT
"KRN",19,10082,"RPC",1083,0)
ORQQCN MED RESULTS
"KRN",19,10082,"RPC",1084,0)
ORQQCN PRINT SF513
"KRN",19,10082,"RPC",1085,0)
ORQQCN RECEIVE
"KRN",19,10082,"RPC",1086,0)
ORQQCN RESUBMIT
"KRN",19,10082,"RPC",1087,0)
ORQQCN SET ACT MENUS
"KRN",19,10082,"RPC",1088,0)
ORQQCN SHOW SF513
"KRN",19,10082,"RPC",1089,0)
ORQQCN SIGFIND
"KRN",19,10082,"RPC",1090,0)
ORQQCN STATUS
"KRN",19,10082,"RPC",1091,0)
ORQQCN SVCLIST
"KRN",19,10082,"RPC",1092,0)
ORQQCN SVCTREE
"KRN",19,10082,"RPC",1093,0)
ORQQCN URGENCIES
"KRN",19,10082,"RPC",1094,0)
ORQQCN2 GET CONTEXT
"KRN",19,10082,"RPC",1095,0)
ORQQCN2 SAVE CONTEXT
"KRN",19,10082,"RPC",1096,0)
ORQQLR DETAIL
"KRN",19,10082,"RPC",1097,0)
ORQQLR SEARCH RANGE INPT
"KRN",19,10082,"RPC",1098,0)
ORQQLR SEARCH RANGE OUTPT
"KRN",19,10082,"RPC",1099,0)
ORQQPL ADD SAVE
"KRN",19,10082,"RPC",1100,0)
ORQQPL AUDIT HIST
"KRN",19,10082,"RPC",1101,0)
ORQQPL CHECK DUP
"KRN",19,10082,"RPC",1102,0)
ORQQPL CLIN FILTER LIST
"KRN",19,10082,"RPC",1103,0)
ORQQPL CLIN SRCH
"KRN",19,10082,"RPC",1104,0)
ORQQPL DELETE
"KRN",19,10082,"RPC",1105,0)
ORQQPL DETAIL
"KRN",19,10082,"RPC",1106,0)
ORQQPL EDIT LOAD
"KRN",19,10082,"RPC",1107,0)
ORQQPL EDIT SAVE
"KRN",19,10082,"RPC",1108,0)
ORQQPL INACTIVATE
"KRN",19,10082,"RPC",1109,0)
ORQQPL INIT PT
"KRN",19,10082,"RPC",1110,0)
ORQQPL INIT USER
"KRN",19,10082,"RPC",1111,0)
ORQQPL LIST
"KRN",19,10082,"RPC",1112,0)
ORQQPL PROB COMMENTS
"KRN",19,10082,"RPC",1113,0)
ORQQPL PROBLEM LEX SEARCH
"KRN",19,10082,"RPC",1114,0)
ORQQPL PROBLEM LIST
"KRN",19,10082,"RPC",1115,0)
ORQQPL PROV FILTER LIST
"KRN",19,10082,"RPC",1116,0)
ORQQPL PROVIDER LIST
"KRN",19,10082,"RPC",1117,0)
ORQQPL REPLACE
"KRN",19,10082,"RPC",1118,0)
ORQQPL SAVEVIEW
"KRN",19,10082,"RPC",1119,0)
ORQQPL SERV FILTER LIST
"KRN",19,10082,"RPC",1120,0)
ORQQPL SRVC SRCH
"KRN",19,10082,"RPC",1121,0)
ORQQPL UPDATE
"KRN",19,10082,"RPC",1122,0)
ORQQPL USER PROB CATS
"KRN",19,10082,"RPC",1123,0)
ORQQPL USER PROB LIST
"KRN",19,10082,"RPC",1124,0)
ORQQPL VERIFY
"KRN",19,10082,"RPC",1125,0)
ORQQPP LIST
"KRN",19,10082,"RPC",1126,0)
ORQQPS DETAIL
"KRN",19,10082,"RPC",1127,0)
ORQQPS LIST
"KRN",19,10082,"RPC",1133,0)
ORQQPX REMINDER DETAIL
"KRN",19,10082,"RPC",1135,0)
ORQQPX REMINDERS LIST
"KRN",19,10082,"RPC",1136,0)
ORQQVI NOTEVIT
"KRN",19,10082,"RPC",1137,0)
ORQQVI VITALS
"KRN",19,10082,"RPC",1138,0)
ORQQVI VITALS FOR DATE RANGE
"KRN",19,10082,"RPC",1139,0)
ORQQVI1 DETAIL
"KRN",19,10082,"RPC",1140,0)
ORQQVI1 GRID
"KRN",19,10082,"RPC",1141,0)
ORQQVI2 VITALS HELP
"KRN",19,10082,"RPC",1142,0)
ORQQVI2 VITALS RATE CHECK
"KRN",19,10082,"RPC",1144,0)
ORQQVI2 VITALS VAL & STORE
"KRN",19,10082,"RPC",1145,0)
ORQQVI2 VITALS VALIDATE
"KRN",19,10082,"RPC",1146,0)
ORQQVI2 VITALS VALIDATE TYPE
"KRN",19,10082,"RPC",1147,0)
ORQQVS DETAIL NOTES
"KRN",19,10082,"RPC",1148,0)
ORQQVS DETAIL SUMMARY
"KRN",19,10082,"RPC",1149,0)
ORQQVS VISITS/APPTS
"KRN",19,10082,"RPC",1150,0)
ORQQXMB MAIL GROUPS
"KRN",19,10082,"RPC",1151,0)
ORQQXQA PATIENT
"KRN",19,10082,"RPC",1152,0)
ORQQXQA USER
"KRN",19,10082,"RPC",1153,0)
ORWCH LOADALL
"KRN",19,10082,"RPC",1154,0)
ORWCH LOADSIZ
"KRN",19,10082,"RPC",1155,0)
ORWCH SAVEALL
"KRN",19,10082,"RPC",1156,0)
ORWCH SAVESIZ
"KRN",19,10082,"RPC",1157,0)
ORWCS LIST OF CONSULT REPORTS
"KRN",19,10082,"RPC",1158,0)
ORWCS PRINT REPORT
"KRN",19,10082,"RPC",1159,0)
ORWCS REPORT TEXT
"KRN",19,10082,"RPC",1160,0)
ORWCV DTLVST
"KRN",19,10082,"RPC",1161,0)
ORWCV LAB
"KRN",19,10082,"RPC",1162,0)
ORWCV POLL
"KRN",19,10082,"RPC",1163,0)
ORWCV START
"KRN",19,10082,"RPC",1164,0)
ORWCV STOP
"KRN",19,10082,"RPC",1165,0)
ORWCV VST
"KRN",19,10082,"RPC",1166,0)
ORWD DEF
"KRN",19,10082,"RPC",1167,0)
ORWD DT
"KRN",19,10082,"RPC",1168,0)
ORWD FORMID
"KRN",19,10082,"RPC",1169,0)
ORWD GET4EDIT
"KRN",19,10082,"RPC",1170,0)
ORWD KEY
"KRN",19,10082,"RPC",1171,0)
ORWD OI
"KRN",19,10082,"RPC",1172,0)
ORWD PROVKEY
"KRN",19,10082,"RPC",1173,0)
ORWD SAVE
"KRN",19,10082,"RPC",1174,0)
ORWD SAVEACT
"KRN",19,10082,"RPC",1175,0)
ORWD SIGN
"KRN",19,10082,"RPC",1176,0)
ORWD VALIDACT
"KRN",19,10082,"RPC",1177,0)
ORWD1 PARAM
"KRN",19,10082,"RPC",1178,0)
ORWD1 PRINTGUI
"KRN",19,10082,"RPC",1179,0)
ORWD1 RVPRINT
"KRN",19,10082,"RPC",1180,0)
ORWD2 DEVINFO
"KRN",19,10082,"RPC",1181,0)
ORWD2 MANUAL
"KRN",19,10082,"RPC",1182,0)
ORWDAL32 ALLERGY MATCH
"KRN",19,10082,"RPC",1183,0)
ORWDAL32 DEF
"KRN",19,10082,"RPC",1184,0)
ORWDAL32 SYMPTOMS
"KRN",19,10082,"RPC",1185,0)
ORWDCN32 DEF
"KRN",19,10082,"RPC",1186,0)
ORWDCN32 ORDRMSG
"KRN",19,10082,"RPC",1187,0)
ORWDCN32 PROCEDURES
"KRN",19,10082,"RPC",1188,0)
ORWDCSLT DEF
"KRN",19,10082,"RPC",1189,0)
ORWDCSLT LOOK200
"KRN",19,10082,"RPC",1190,0)
ORWDFH ADDLATE
"KRN",19,10082,"RPC",1191,0)
ORWDFH ATTR
"KRN",19,10082,"RPC",1192,0)
ORWDFH CURISO
"KRN",19,10082,"RPC",1193,0)
ORWDFH DIETS
"KRN",19,10082,"RPC",1194,0)
ORWDFH FINDTYP
"KRN",19,10082,"RPC",1195,0)
ORWDFH ISOIEN
"KRN",19,10082,"RPC",1196,0)
ORWDFH ISOLIST
"KRN",19,10082,"RPC",1197,0)
ORWDFH PARAM
"KRN",19,10082,"RPC",1198,0)
ORWDFH QTY2CC
"KRN",19,10082,"RPC",1199,0)
ORWDFH TFPROD
"KRN",19,10082,"RPC",1200,0)
ORWDFH TXT
"KRN",19,10082,"RPC",1201,0)
ORWDGX LOAD
"KRN",19,10082,"RPC",1202,0)
ORWDGX VMDEF
"KRN",19,10082,"RPC",1203,0)
ORWDLR ABBSPEC
"KRN",19,10082,"RPC",1204,0)
ORWDLR ALLSAMP
"KRN",19,10082,"RPC",1205,0)
ORWDLR DEF
"KRN",19,10082,"RPC",1206,0)
ORWDLR LOAD
"KRN",19,10082,"RPC",1207,0)
ORWDLR OIPARAM
"KRN",19,10082,"RPC",1208,0)
ORWDLR STOP
"KRN",19,10082,"RPC",1209,0)
ORWDLR32 ABBSPEC
"KRN",19,10082,"RPC",1210,0)
ORWDLR32 ALLSAMP
"KRN",19,10082,"RPC",1211,0)
ORWDLR32 ALLSPEC
"KRN",19,10082,"RPC",1212,0)
ORWDLR32 DEF
"KRN",19,10082,"RPC",1213,0)
ORWDLR32 IC DEFAULT
"KRN",19,10082,"RPC",1214,0)
ORWDLR32 IC VALID
"KRN",19,10082,"RPC",1215,0)
ORWDLR32 IMMED COLLECT
"KRN",19,10082,"RPC",1216,0)
ORWDLR32 LAB COLL TIME
"KRN",19,10082,"RPC",1217,0)
ORWDLR32 LOAD
"KRN",19,10082,"RPC",1218,0)
ORWDLR32 MAXDAYS
"KRN",19,10082,"RPC",1219,0)
ORWDLR32 ONE SAMPLE
"KRN",19,10082,"RPC",1220,0)
ORWDLR32 ONE SPECIMEN
"KRN",19,10082,"RPC",1221,0)
ORWDLR32 STOP
"KRN",19,10082,"RPC",1222,0)
ORWDOR VMSLCT
"KRN",19,10082,"RPC",1227,0)
ORWDPS32 ALLROUTE
"KRN",19,10082,"RPC",1228,0)
ORWDPS32 AUTH
"KRN",19,10082,"RPC",1229,0)
ORWDPS32 DLGSLCT
"KRN",19,10082,"RPC",1230,0)
ORWDPS32 DOSES
"KRN",19,10082,"RPC",1231,0)
ORWDPS32 DRUGMSG
"KRN",19,10082,"RPC",1232,0)
ORWDPS32 FORMALT
"KRN",19,10082,"RPC",1233,0)
ORWDPS32 ISSPLY
"KRN",19,10082,"RPC",1234,0)
ORWDPS32 IVAMT
"KRN",19,10082,"RPC",1235,0)
ORWDPS32 MEDISIV
"KRN",19,10082,"RPC",1236,0)
ORWDPS32 OISLCT
"KRN",19,10082,"RPC",1237,0)
ORWDPS32 SCSTS
"KRN",19,10082,"RPC",1238,0)
ORWDPS32 VALQTY
"KRN",19,10082,"RPC",1239,0)
ORWDPS32 VALRATE
"KRN",19,10082,"RPC",1240,0)
ORWDPS32 VALSCH
"KRN",19,10082,"RPC",1241,0)
ORWDRA DEF
"KRN",19,10082,"RPC",1242,0)
ORWDRA32 APPROVAL
"KRN",19,10082,"RPC",1243,0)
ORWDRA32 DEF
"KRN",19,10082,"RPC",1244,0)
ORWDRA32 IMTYPSEL
"KRN",19,10082,"RPC",1245,0)
ORWDRA32 ISOLATN
"KRN",19,10082,"RPC",1246,0)
ORWDRA32 LOCTYPE
"KRN",19,10082,"RPC",1247,0)
ORWDRA32 PROCMSG
"KRN",19,10082,"RPC",1248,0)
ORWDRA32 RADSRC
"KRN",19,10082,"RPC",1249,0)
ORWDRA32 RAORDITM
"KRN",19,10082,"RPC",1250,0)
ORWDX AGAIN
"KRN",19,10082,"RPC",1251,0)
ORWDX DGRP
"KRN",19,10082,"RPC",1252,0)
ORWDX DISMSG
"KRN",19,10082,"RPC",1253,0)
ORWDX DLGDEF
"KRN",19,10082,"RPC",1254,0)
ORWDX DLGID
"KRN",19,10082,"RPC",1255,0)
ORWDX DLGQUIK
"KRN",19,10082,"RPC",1256,0)
ORWDX FORMID
"KRN",19,10082,"RPC",1257,0)
ORWDX LOADRSP
"KRN",19,10082,"RPC",1258,0)
ORWDX LOCK
"KRN",19,10082,"RPC",1259,0)
ORWDX MSG
"KRN",19,10082,"RPC",1260,0)
ORWDX ORDITM
"KRN",19,10082,"RPC",1261,0)
ORWDX SAVE
"KRN",19,10082,"RPC",1262,0)
ORWDX SEND
"KRN",19,10082,"RPC",1263,0)
ORWDX SENDP
"KRN",19,10082,"RPC",1264,0)
ORWDX UNLOCK
"KRN",19,10082,"RPC",1265,0)
ORWDX WRLST
"KRN",19,10082,"RPC",1266,0)
ORWDXA ALERT
"KRN",19,10082,"RPC",1267,0)
ORWDXA COMPLETE
"KRN",19,10082,"RPC",1268,0)
ORWDXA DC
"KRN",19,10082,"RPC",1269,0)
ORWDXA DCREASON
"KRN",19,10082,"RPC",1270,0)
ORWDXA DCREQIEN
"KRN",19,10082,"RPC",1271,0)
ORWDXA FLAG
"KRN",19,10082,"RPC",1272,0)
ORWDXA FLAGTXT
"KRN",19,10082,"RPC",1273,0)
ORWDXA HOLD
"KRN",19,10082,"RPC",1274,0)
ORWDXA UNFLAG
"KRN",19,10082,"RPC",1275,0)
ORWDXA UNHOLD
"KRN",19,10082,"RPC",1276,0)
ORWDXA VALID
"KRN",19,10082,"RPC",1277,0)
ORWDXA VERIFY
"KRN",19,10082,"RPC",1278,0)
ORWDXA WCGET
"KRN",19,10082,"RPC",1279,0)
ORWDXA WCPUT
"KRN",19,10082,"RPC",1280,0)
ORWDXC ACCEPT
"KRN",19,10082,"RPC",1281,0)
ORWDXC DELAY
"KRN",19,10082,"RPC",1282,0)
ORWDXC DELORD
"KRN",19,10082,"RPC",1283,0)
ORWDXC DISPLAY
"KRN",19,10082,"RPC",1284,0)
ORWDXC FILLID
"KRN",19,10082,"RPC",1285,0)
ORWDXC ON
"KRN",19,10082,"RPC",1286,0)
ORWDXC SAVECHK
"KRN",19,10082,"RPC",1287,0)
ORWDXC SESSION
"KRN",19,10082,"RPC",1288,0)
ORWDXM AUTOACK
"KRN",19,10082,"RPC",1289,0)
ORWDXM DLGNAME
"KRN",19,10082,"RPC",1290,0)
ORWDXM FORMID
"KRN",19,10082,"RPC",1291,0)
ORWDXM LOADSET
"KRN",19,10082,"RPC",1292,0)
ORWDXM MENU
"KRN",19,10082,"RPC",1293,0)
ORWDXM MSTYLE
"KRN",19,10082,"RPC",1294,0)
ORWDXM PROMPTS
"KRN",19,10082,"RPC",1295,0)
ORWDXM1 BLDQRSP
"KRN",19,10082,"RPC",1296,0)
ORWDXM2 CLRRCL
"KRN",19,10082,"RPC",1297,0)
ORWDXQ DLGNAME
"KRN",19,10082,"RPC",1298,0)
ORWDXQ DLGSAVE
"KRN",19,10082,"RPC",1299,0)
ORWDXQ GETQLST
"KRN",19,10082,"RPC",1300,0)
ORWDXQ GETQNAM
"KRN",19,10082,"RPC",1301,0)
ORWDXQ PUTQLST
"KRN",19,10082,"RPC",1302,0)
ORWDXQ PUTQNAM
"KRN",19,10082,"RPC",1303,0)
ORWDXR ISREL
"KRN",19,10082,"RPC",1304,0)
ORWDXR RENEW
"KRN",19,10082,"RPC",1305,0)
ORWDXR RNWFLDS
"KRN",19,10082,"RPC",1306,0)
ORWGEPT CLINRNG
"KRN",19,10082,"RPC",1307,0)
ORWLR CUMULATIVE REPORT
"KRN",19,10082,"RPC",1308,0)
ORWLR CUMULATIVE SECTION
"KRN",19,10082,"RPC",1309,0)
ORWLR REPORT LISTS
"KRN",19,10082,"RPC",1310,0)
ORWLRR ALLTESTS
"KRN",19,10082,"RPC",1311,0)
ORWLRR ATESTS
"KRN",19,10082,"RPC",1312,0)
ORWLRR ATG
"KRN",19,10082,"RPC",1313,0)
ORWLRR ATOMICS
"KRN",19,10082,"RPC",1314,0)
ORWLRR CHART
"KRN",19,10082,"RPC",1315,0)
ORWLRR CHEMTEST
"KRN",19,10082,"RPC",1316,0)
ORWLRR GRID
"KRN",19,10082,"RPC",1317,0)
ORWLRR INTERIM
"KRN",19,10082,"RPC",1318,0)
ORWLRR INTERIMG
"KRN",19,10082,"RPC",1319,0)
ORWLRR INTERIMS
"KRN",19,10082,"RPC",1320,0)
ORWLRR MICRO
"KRN",19,10082,"RPC",1321,0)
ORWLRR NEWOLD
"KRN",19,10082,"RPC",1322,0)
ORWLRR PARAM
"KRN",19,10082,"RPC",1323,0)
ORWLRR SPEC
"KRN",19,10082,"RPC",1324,0)
ORWLRR TG
"KRN",19,10082,"RPC",1325,0)
ORWLRR USERS
"KRN",19,10082,"RPC",1326,0)
ORWLRR UTGA
"KRN",19,10082,"RPC",1327,0)
ORWLRR UTGD
"KRN",19,10082,"RPC",1328,0)
ORWLRR UTGR
"KRN",19,10082,"RPC",1329,0)
ORWMC PATIENT PROCEDURES
"KRN",19,10082,"RPC",1330,0)
ORWOR RESULT
"KRN",19,10082,"RPC",1331,0)
ORWOR SHEETS
"KRN",19,10082,"RPC",1332,0)
ORWOR TSALL
"KRN",19,10082,"RPC",1333,0)
ORWORB AUTOUNFLAG ORDERS
"KRN",19,10082,"RPC",1334,0)
ORWORB FASTUSER
"KRN",19,10082,"RPC",1335,0)
ORWORB GET TIU ALERT INFO
"KRN",19,10082,"RPC",1336,0)
ORWORB GETDATA
"KRN",19,10082,"RPC",1337,0)
ORWORB KILL UNSIG ORDERS ALERT
"KRN",19,10082,"RPC",1338,0)
ORWORB URGENLST
"KRN",19,10082,"RPC",1339,0)
ORWORDG ALLTREE
"KRN",19,10082,"RPC",1340,0)
ORWORDG GRPSEQB
"KRN",19,10082,"RPC",1341,0)
ORWORDG IEN
"KRN",19,10082,"RPC",1342,0)
ORWORDG MAPSEQ
"KRN",19,10082,"RPC",1343,0)
ORWORDG REVSTS
"KRN",19,10082,"RPC",1344,0)
ORWORR AGET
"KRN",19,10082,"RPC",1345,0)
ORWORR GET
"KRN",19,10082,"RPC",1346,0)
ORWORR GET4LST
"KRN",19,10082,"RPC",1347,0)
ORWORR GETBYIFN
"KRN",19,10082,"RPC",1348,0)
ORWORR GETTXT
"KRN",19,10082,"RPC",1349,0)
ORWPCE ACTIVE PROV
"KRN",19,10082,"RPC",1350,0)
ORWPCE ACTPROB
"KRN",19,10082,"RPC",1351,0)
ORWPCE CPTREQD
"KRN",19,10082,"RPC",1352,0)
ORWPCE DELETE
"KRN",19,10082,"RPC",1353,0)
ORWPCE DIAG
"KRN",19,10082,"RPC",1354,0)
ORWPCE GET EDUCATION TOPICS
"KRN",19,10082,"RPC",1355,0)
ORWPCE GET EXAM TYPE
"KRN",19,10082,"RPC",1356,0)
ORWPCE GET HEALTH FACTORS TY
"KRN",19,10082,"RPC",1357,0)
ORWPCE GET IMMUNIZATION TYPE
"KRN",19,10082,"RPC",1358,0)
ORWPCE GET SET OF CODES
"KRN",19,10082,"RPC",1359,0)
ORWPCE GET SKIN TEST TYPE
"KRN",19,10082,"RPC",1360,0)
ORWPCE GET TREATMENT TYPE
"KRN",19,10082,"RPC",1361,0)
ORWPCE HF
"KRN",19,10082,"RPC",1362,0)
ORWPCE IMM
"KRN",19,10082,"RPC",1363,0)
ORWPCE LEX
"KRN",19,10082,"RPC",1364,0)
ORWPCE LEXCODE
"KRN",19,10082,"RPC",1366,0)
ORWPCE NOTEVSTR
"KRN",19,10082,"RPC",1367,0)
ORWPCE PCE4NOTE
"KRN",19,10082,"RPC",1368,0)
ORWPCE PED
"KRN",19,10082,"RPC",1369,0)
ORWPCE PROC
"KRN",19,10082,"RPC",1370,0)
ORWPCE SAVE
"KRN",19,10082,"RPC",1371,0)
ORWPCE SCDIS
"KRN",19,10082,"RPC",1372,0)
ORWPCE SCSEL
"KRN",19,10082,"RPC",1373,0)
ORWPCE SK
"KRN",19,10082,"RPC",1374,0)
ORWPCE TRT
"KRN",19,10082,"RPC",1375,0)
ORWPCE VISIT
"KRN",19,10082,"RPC",1376,0)
ORWPCE XAM
"KRN",19,10082,"RPC",1377,0)
ORWPS ACTIVE
"KRN",19,10082,"RPC",1378,0)
ORWPS COVER
"KRN",19,10082,"RPC",1379,0)
ORWPS DETAIL
"KRN",19,10082,"RPC",1380,0)
ORWPS1 NEWDLG
"KRN",19,10082,"RPC",1381,0)
ORWPS1 PICKUP
"KRN",19,10082,"RPC",1382,0)
ORWPS1 REFILL
"KRN",19,10082,"RPC",1383,0)
ORWPT ADMITLST
"KRN",19,10082,"RPC",1384,0)
ORWPT APPTLST
"KRN",19,10082,"RPC",1385,0)
ORWPT CLINRNG
"KRN",19,10082,"RPC",1386,0)
ORWPT CWAD
"KRN",19,10082,"RPC",1387,0)
ORWPT DFLTSRC
"KRN",19,10082,"RPC",1388,0)
ORWPT DIEDON
"KRN",19,10082,"RPC",1389,0)
ORWPT DISCHARGE
"KRN",19,10082,"RPC",1390,0)
ORWPT ENCTITL
"KRN",19,10082,"RPC",1391,0)
ORWPT FULLSSN
"KRN",19,10082,"RPC",1392,0)
ORWPT ID INFO
"KRN",19,10082,"RPC",1393,0)
ORWPT LAST5
"KRN",19,10082,"RPC",1394,0)
ORWPT LIST ALL
"KRN",19,10082,"RPC",1395,0)
ORWPT PTINQ
"KRN",19,10082,"RPC",1396,0)
ORWPT SAVDFLT
"KRN",19,10082,"RPC",1397,0)
ORWPT SELCHK
"KRN",19,10082,"RPC",1398,0)
ORWPT SELECT
"KRN",19,10082,"RPC",1399,0)
ORWPT SHARE
"KRN",19,10082,"RPC",1400,0)
ORWPT TOP
"KRN",19,10082,"RPC",1401,0)
ORWPT1 PCDETAIL
"KRN",19,10082,"RPC",1402,0)
ORWPT1 PRCARE
"KRN",19,10082,"RPC",1403,0)
ORWPT16 ADMITLST
"KRN",19,10082,"RPC",1404,0)
ORWPT16 APPTLST
"KRN",19,10082,"RPC",1405,0)
ORWPT16 DEMOG
"KRN",19,10082,"RPC",1406,0)
ORWPT16 GETVSIT
"KRN",19,10082,"RPC",1407,0)
ORWPT16 ID INFO
"KRN",19,10082,"RPC",1408,0)
ORWPT16 LIST ALL
"KRN",19,10082,"RPC",1409,0)
ORWPT16 LOOKUP
"KRN",19,10082,"RPC",1410,0)
ORWPT16 PSCNVT
"KRN",19,10082,"RPC",1411,0)
ORWRA DEFAULT EXAM SETTINGS
"KRN",19,10082,"RPC",1412,0)
ORWRA IMAGING EXAMS
"KRN",19,10082,"RPC",1413,0)
ORWRA PRINT REPORT
"KRN",19,10082,"RPC",1414,0)
ORWRA REPORT TEXT
"KRN",19,10082,"RPC",1415,0)
ORWRP PRINT LAB REPORTS
"KRN",19,10082,"RPC",1416,0)
ORWRP PRINT REPORT
"KRN",19,10082,"RPC",1417,0)
ORWRP REPORT LISTS
"KRN",19,10082,"RPC",1418,0)
ORWRP REPORT TEXT
"KRN",19,10082,"RPC",1419,0)
ORWRP1 LISTNUTR
"KRN",19,10082,"RPC",1420,0)
ORWRP16 REPORT LISTS
"KRN",19,10082,"RPC",1421,0)
ORWRP16 REPORT TEXT
"KRN",19,10082,"RPC",1422,0)
ORWTIU GET DCSUMM CONTEXT
"KRN",19,10082,"RPC",1423,0)
ORWTIU GET TIU CONTEXT
"KRN",19,10082,"RPC",1424,0)
ORWTIU SAVE DCSUMM CONTEXT
"KRN",19,10082,"RPC",1425,0)
ORWTIU SAVE TIU CONTEXT
"KRN",19,10082,"RPC",1426,0)
ORWU CLINLOC
"KRN",19,10082,"RPC",1427,0)
ORWU DEVICE
"KRN",19,10082,"RPC",1428,0)
ORWU DT
"KRN",19,10082,"RPC",1429,0)
ORWU EXTNAME
"KRN",19,10082,"RPC",1430,0)
ORWU GBLREF
"KRN",19,10082,"RPC",1431,0)
ORWU GENERIC
"KRN",19,10082,"RPC",1432,0)
ORWU HASKEY
"KRN",19,10082,"RPC",1433,0)
ORWU HOSPLOC
"KRN",19,10082,"RPC",1434,0)
ORWU INPLOC
"KRN",19,10082,"RPC",1435,0)
ORWU NEWPERS
"KRN",19,10082,"RPC",1436,0)
ORWU NPHASKEY
"KRN",19,10082,"RPC",1437,0)
ORWU PATCH
"KRN",19,10082,"RPC",1438,0)
ORWU TOOLMENU
"KRN",19,10082,"RPC",1439,0)
ORWU USERINFO
"KRN",19,10082,"RPC",1440,0)
ORWU VALDT
"KRN",19,10082,"RPC",1441,0)
ORWU VALIDSIG
"KRN",19,10082,"RPC",1442,0)
ORWU VERSRV
"KRN",19,10082,"RPC",1443,0)
ORWU16 DEVICE
"KRN",19,10082,"RPC",1444,0)
ORWU16 HOSPLOC
"KRN",19,10082,"RPC",1445,0)
ORWU16 NEWPERS
"KRN",19,10082,"RPC",1446,0)
ORWU16 USERINFO
"KRN",19,10082,"RPC",1447,0)
ORWU16 VALDT
"KRN",19,10082,"RPC",1448,0)
ORWU16 VALIDSIG
"KRN",19,10082,"RPC",1449,0)
ORWUH POPUP
"KRN",19,10082,"RPC",1450,0)
ORWUX SYMTAB
"KRN",19,10082,"RPC",1451,0)
ORWUXT LST
"KRN",19,10082,"RPC",1452,0)
ORWUXT REF
"KRN",19,10082,"RPC",1453,0)
ORWUXT VAL
"KRN",19,10082,"RPC",1454,0)
ORQQCN DEFAULT REQUEST REASON
"KRN",19,10082,"RPC",1455,0)
ORWDX LOCK ORDER
"KRN",19,10082,"RPC",1456,0)
ORWDX UNLOCK ORDER
"KRN",19,10082,"RPC",1457,0)
ORWDCN32 NEWDLG
"KRN",19,10082,"RPC",1458,0)
ORQQCN GET SERVICE IEN
"KRN",19,10082,"RPC",1459,0)
ORQQCN PROVDX
"KRN",19,10082,"RPC",1460,0)
TIU TEMPLATE ACCESS LEVEL
"KRN",19,10082,"RPC",1461,0)
TIU GET DOCUMENT TITLE
"KRN",19,10082,"RPC",1462,0)
ORWPT BYWARD
"KRN",19,10082,"RPC",1463,0)
ORQQPX GET HIST LOCATIONS
"KRN",19,10082,"RPC",1464,0)
ORQQPX NEW REMINDERS ACTIVE
"KRN",19,10082,"RPC",1465,0)
ORWPCE GET VISIT
"KRN",19,10082,"RPC",1480,0)
TIU GET REQUEST
"KRN",19,10082,"RPC",1481,0)
ORWORB KILL EXPIR MED ALERT
"KRN",19,10082,"RPC",1482,0)
DG CHK BS5 XREF ARRAY
"KRN",19,10082,"RPC",1483,0)
DG CHK BS5 XREF Y/N
"KRN",19,10082,"RPC",1484,0)
DG CHK PAT/DIV MEANS TEST
"KRN",19,10082,"RPC",1485,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,10082,"RPC",1486,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,10082,"RPC",1487,0)
ORQQCN CANEDIT
"KRN",19,10082,"RPC",1488,0)
ORQQCN EDIT DEFAULT REASON
"KRN",19,10082,"RPC",1489,0)
ORQQCN SF513 WINDOWS PRINT
"KRN",19,10082,"RPC",1490,0)
ORWCIRN FACLIST
"KRN",19,10082,"RPC",1491,0)
ORWDLR32 GET LAB TIMES
"KRN",19,10082,"RPC",1492,0)
ORWPT LEGACY
"KRN",19,10082,"RPC",1493,0)
ORWRP GET DEFAULT PRINTER
"KRN",19,10082,"RPC",1494,0)
ORWRP PRINT WINDOWS REPORT
"KRN",19,10082,"RPC",1495,0)
ORWRP SAVE DEFAULT PRINTER
"KRN",19,10082,"RPC",1496,0)
ORWRP WINPRINT DEFAULT
"KRN",19,10082,"RPC",1497,0)
ORWRP WINPRINT LAB REPORTS
"KRN",19,10082,"RPC",1498,0)
ORWTIU WINPRINT NOTE
"KRN",19,10082,"RPC",1500,0)
ORWPCE GAFOK
"KRN",19,10082,"RPC",1501,0)
ORWPCE MHCLINIC
"KRN",19,10082,"RPC",1502,0)
ORWPCE LOADGAF
"KRN",19,10082,"RPC",1503,0)
ORWPCE SAVEGAF
"KRN",19,10082,"RPC",1504,0)
ORWPCE FORCE
"KRN",19,10082,"RPC",1505,0)
TIU GET DEFAULT PROVIDER
"KRN",19,10082,"RPC",1506,0)
TIU GET SITE PARAMETERS
"KRN",19,10082,"RPC",1507,0)
TIU IS USER A PROVIDER?
"KRN",19,10082,"RPC",1508,0)
ORWOR VWGET
"KRN",19,10082,"RPC",1509,0)
ORWOR VWSET
"KRN",19,10082,"RPC",1510,0)
ORWU PARAM
"KRN",19,10082,"RPC",1511,0)
ORWDOR LKSCRN
"KRN",19,10082,"RPC",1512,0)
ORWDOR VALNUM
"KRN",19,10082,"RPC",1513,0)
ORWDPS32 VALROUTE
"KRN",19,10082,"RPC",1515,0)
ORWORB UNSIG ORDERS FOLLOWUP
"KRN",19,10082,"RPC",1516,0)
ORWTIU GET LISTBOX ITEM
"KRN",19,10082,"RPC",1517,0)
ORWRP2 HS COMP FILES
"KRN",19,10082,"RPC",1518,0)
ORWRP2 HS COMPONENTS
"KRN",19,10082,"RPC",1519,0)
ORWRP2 HS FILE LOOKUP
"KRN",19,10082,"RPC",1520,0)
ORWRP2 HS REPORT TEXT
"KRN",19,10082,"RPC",1521,0)
ORWRP2 HS SUBITEMS
"KRN",19,10082,"RPC",1522,0)
ORWPCE HASCPT
"KRN",19,10082,"RPC",1523,0)
ORWPCE ASKPCE
"KRN",19,10082,"RPC",1524,0)
ORWPCE MHTESTOK
"KRN",19,10082,"RPC",1525,0)
ORWPCE GAFURL
"KRN",19,10082,"RPC",1526,0)
ORQQPXRM DIALOG PROMPTS
"KRN",19,10082,"RPC",1527,0)
ORQQPXRM EDUCATION SUBTOPICS
"KRN",19,10082,"RPC",1528,0)
ORQQPXRM EDUCATION SUMMARY
"KRN",19,10082,"RPC",1529,0)
ORQQPXRM EDUCATION TOPIC
"KRN",19,10082,"RPC",1530,0)
ORQQPXRM MENTAL HEALTH
"KRN",19,10082,"RPC",1531,0)
ORQQPXRM MENTAL HEALTH RESULTS
"KRN",19,10082,"RPC",1532,0)
ORQQPXRM MENTAL HEALTH SAVE
"KRN",19,10082,"RPC",1533,0)
ORQQPXRM PROGRESS NOTE HEADER
"KRN",19,10082,"RPC",1534,0)
ORQQPXRM REMINDER CATEGORIES
"KRN",19,10082,"RPC",1535,0)
ORQQPXRM REMINDER DETAIL
"KRN",19,10082,"RPC",1536,0)
ORQQPXRM REMINDER DIALOG
"KRN",19,10082,"RPC",1537,0)
ORQQPXRM REMINDER EVALUATION
"KRN",19,10082,"RPC",1538,0)
ORQQPXRM REMINDER INQUIRY
"KRN",19,10082,"RPC",1539,0)
ORQQPXRM REMINDER WEB
"KRN",19,10082,"RPC",1540,0)
ORQQPXRM REMINDERS APPLICABLE
"KRN",19,10082,"RPC",1541,0)
ORQQPXRM REMINDERS UNEVALUATED
"KRN",19,10082,"RPC",1542,0)
ORWLRR INFO
"KRN",19,10082,"RPC",1543,0)
TIU GET PRINT NAME
"KRN",19,10082,"RPC",1544,0)
TIU WAS THIS SAVED?
"KRN",19,10082,"RPC",1545,0)
ORWD1 COMLOC
"KRN",19,10082,"RPC",1546,0)
ORWD1 SIG4ANY
"KRN",19,10082,"RPC",1547,0)
ORWD1 SIG4ONE
"KRN",19,10082,"RPC",1548,0)
ORWOR UNSIGN
"KRN",19,10082,"RPC",1549,0)
ORWPT INPLOC
"KRN",19,10082,"RPC",1553,0)
ORQQCN2 GET PREREQUISITE
"KRN",19,10082,"RPC",1554,0)
ORQQCN2 SCHEDULE CONSULT
"KRN",19,10082,"RPC",1555,0)
YS GAF API
"KRN",19,10082,"RPC",1556,0)
TIU LONG LIST BOILERPLATED
"KRN",19,10082,"RPC",1557,0)
ORWDLR33 FUTURE LAB COLLECTS
"KRN",19,10082,"RPC",1558,0)
ORWRP PRINT REMOTE REPORT
"KRN",19,10082,"RPC",1559,0)
ORWRP PRINT WINDOWS REMOTE
"KRN",19,10082,"RPC",1560,0)
ORWRP PRINT LAB REMOTE
"KRN",19,10082,"RPC",1561,0)
ORWRP PRINT WINDOWS LAB REMOTE
"KRN",19,10082,"RPC",1562,0)
ORQQPXRM DIALOG ACTIVE
"KRN",19,10082,"RPC",1563,0)
ORWPCE MH TEST AUTHORIZED
"KRN",19,10082,"RPC",1564,0)
TIU GET BOILERPLATE
"KRN",19,10082,"RPC",1565,0)
ORWRP2 HS COMPONENT SUBS
"KRN",19,10082,"RPC",1566,0)
ORWCH SAVFONT
"KRN",19,10082,"RPC",1567,0)
ORWDLR33 LASTTIME
"KRN",19,10082,"RPC",1568,0)
ORWD1 SVONLY
"KRN",19,10082,"RPC",1569,0)
ORWPCE HASVISIT
"KRN",19,10082,"RPC",1570,0)
ORWPCE GETMOD
"KRN",19,10082,"RPC",1571,0)
ORWPCE CPTMODS
"KRN",19,10082,"RPC",1572,0)
XWB REMOTE CLEAR
"KRN",19,10082,"RPC",1573,0)
XWB REMOTE GETDATA
"KRN",19,10082,"RPC",1574,0)
XWB REMOTE RPC
"KRN",19,10082,"RPC",1575,0)
XWB REMOTE STATUS CHECK
"KRN",19,10082,"RPC",1576,0)
ORQQCN ASSIGNABLE MED RESULTS
"KRN",19,10082,"RPC",1577,0)
ORQQCN ATTACH MED RESULTS
"KRN",19,10082,"RPC",1578,0)
ORQQCN GET MED RESULT DETAILS
"KRN",19,10082,"RPC",1579,0)
ORQQCN REMOVABLE MED RESULTS
"KRN",19,10082,"RPC",1580,0)
ORQQCN REMOVE MED RESULTS
"KRN",19,10082,"RPC",1581,0)
ORQQCN SVC W/SYNONYMS
"KRN",19,10082,"RPC",1582,0)
ORWCV1 COVERSHEET LIST
"KRN",19,10082,"RPC",1583,0)
ORWORB KILL EXPIR OI ALERT
"KRN",19,10082,"RPC",1584,0)
ORWPCE GETSVC
"KRN",19,10082,"RPC",1585,0)
ORWRP LAB REPORT LISTS
"KRN",19,10082,"RPC",1586,0)
ORWTPL GETNSORT
"KRN",19,10082,"RPC",1587,0)
ORWTPN GETCLASS
"KRN",19,10082,"RPC",1588,0)
ORWTPN GETTC
"KRN",19,10082,"RPC",1589,0)
ORWTPO CSARNGD
"KRN",19,10082,"RPC",1590,0)
ORWTPO CSLABD
"KRN",19,10082,"RPC",1591,0)
ORWTPO GETTABS
"KRN",19,10082,"RPC",1592,0)
ORWTPP ADDLIST
"KRN",19,10082,"RPC",1593,0)
ORWTPP CHKSURR
"KRN",19,10082,"RPC",1594,0)
ORWTPP CLDAYS
"KRN",19,10082,"RPC",1595,0)
ORWTPP CLEARNOT
"KRN",19,10082,"RPC",1596,0)
ORWTPP CLRANGE
"KRN",19,10082,"RPC",1597,0)
ORWTPP CSARNG
"KRN",19,10082,"RPC",1598,0)
ORWTPP CSLAB
"KRN",19,10082,"RPC",1599,0)
ORWTPP DELLIST
"KRN",19,10082,"RPC",1600,0)
ORWTPP GETCOMBO
"KRN",19,10082,"RPC",1601,0)
ORWTPP GETCOS
"KRN",19,10082,"RPC",1602,0)
ORWTPP GETDCOS
"KRN",19,10082,"RPC",1603,0)
ORWTPP GETNOT
"KRN",19,10082,"RPC",1604,0)
ORWTPP GETNOTO
"KRN",19,10082,"RPC",1605,0)
ORWTPP GETOC
"KRN",19,10082,"RPC",1606,0)
ORWTPP GETOTHER
"KRN",19,10082,"RPC",1607,0)
ORWTPP GETREM
"KRN",19,10082,"RPC",1608,0)
ORWTPP GETSUB
"KRN",19,10082,"RPC",1609,0)
ORWTPP GETSURR
"KRN",19,10082,"RPC",1610,0)
ORWTPP GETTD
"KRN",19,10082,"RPC",1611,0)
ORWTPP GETTU
"KRN",19,10082,"RPC",1612,0)
ORWTPP LSDEF
"KRN",19,10082,"RPC",1613,0)
ORWTPP NEWLIST
"KRN",19,10082,"RPC",1614,0)
ORWTPP PLISTS
"KRN",19,10082,"RPC",1615,0)
ORWTPP PLTEAMS
"KRN",19,10082,"RPC",1616,0)
ORWTPP REMLIST
"KRN",19,10082,"RPC",1617,0)
ORWTPP SAVECD
"KRN",19,10082,"RPC",1618,0)
ORWTPP SAVECS
"KRN",19,10082,"RPC",1619,0)
ORWTPP SAVELIST
"KRN",19,10082,"RPC",1620,0)
ORWTPP SAVENOT
"KRN",19,10082,"RPC",1621,0)
ORWTPP SAVENOTO
"KRN",19,10082,"RPC",1622,0)
ORWTPP SAVEOC
"KRN",19,10082,"RPC",1623,0)
ORWTPP SAVEPLD
"KRN",19,10082,"RPC",1624,0)
ORWTPP SAVESURR
"KRN",19,10082,"RPC",1625,0)
ORWTPP SAVET
"KRN",19,10082,"RPC",1626,0)
ORWTPP SETCOMBO
"KRN",19,10082,"RPC",1627,0)
ORWTPP SETDCOS
"KRN",19,10082,"RPC",1628,0)
ORWTPP SETOTHER
"KRN",19,10082,"RPC",1629,0)
ORWTPP SETREM
"KRN",19,10082,"RPC",1630,0)
ORWTPP SETSUB
"KRN",19,10082,"RPC",1631,0)
ORWTPP SORTDEF
"KRN",19,10082,"RPC",1632,0)
ORWTPP TEAMS
"KRN",19,10082,"RPC",1633,0)
ORWTPT ATEAMS
"KRN",19,10082,"RPC",1634,0)
ORWTPT GETTEAM
"KRN",19,10082,"RPC",1635,0)
TIU TEMPLATE GET DEFAULTS
"KRN",19,10082,"RPC",1636,0)
TIU TEMPLATE GET DESCRIPTION
"KRN",19,10082,"RPC",1637,0)
TIU TEMPLATE SET DEFAULTS
"KRN",19,10082,"RPC",1638,0)
ORWTIU IDNOTES INSTALLED
"KRN",19,10082,"RPC",1639,0)
ORQQPX GET FOLDERS
"KRN",19,10082,"RPC",1640,0)
ORQQPX SET FOLDERS
"KRN",19,10082,"RPC",1641,0)
TIU FIELD CAN EDIT
"KRN",19,10082,"RPC",1642,0)
TIU FIELD DELETE
"KRN",19,10082,"RPC",1643,0)
TIU FIELD EXPORT
"KRN",19,10082,"RPC",1644,0)
TIU FIELD IMPORT
"KRN",19,10082,"RPC",1645,0)
TIU FIELD LIST
"KRN",19,10082,"RPC",1646,0)
TIU FIELD LOAD
"KRN",19,10082,"RPC",1647,0)
TIU FIELD LOAD BY IEN
"KRN",19,10082,"RPC",1648,0)
TIU FIELD LOCK
"KRN",19,10082,"RPC",1649,0)
TIU FIELD NAME IS UNIQUE
"KRN",19,10082,"RPC",1650,0)
TIU FIELD SAVE
"KRN",19,10082,"RPC",1651,0)
TIU FIELD UNLOCK
"KRN",19,10082,"RPC",1652,0)
ORWDPS1 CHK94
"KRN",19,10082,"RPC",1653,0)
ORWDPS1 ODSLCT
"KRN",19,10082,"RPC",1654,0)
ORWDPS1 SCHALL
"KRN",19,10082,"RPC",1655,0)
ORWDPS2 ADMIN
"KRN",19,10082,"RPC",1656,0)
ORWDPS2 DAY2QTY
"KRN",19,10082,"RPC",1657,0)
ORWDPS2 OISLCT
"KRN",19,10082,"RPC",1658,0)
ORWDPS2 REQST
"KRN",19,10082,"RPC",1659,0)
ORWDX DGNM
"KRN",19,10082,"RPC",1660,0)
ORWUL FV4DG
"KRN",19,10082,"RPC",1661,0)
ORWUL FVIDX
"KRN",19,10082,"RPC",1662,0)
ORWUL FVSUB
"KRN",19,10082,"RPC",1663,0)
ORWUL QV4DG
"KRN",19,10082,"RPC",1664,0)
ORWUL QVIDX
"KRN",19,10082,"RPC",1665,0)
ORWUL QVSUB
"KRN",19,10082,"RPC",1666,0)
ORWDPS1 DFLTSPLY
"KRN",19,10082,"RPC",1668,0)
PXRM REMINDER DIALOG (TIU)
"KRN",19,10082,"RPC",1669,0)
ORWPCE ANYTIME
"KRN",19,10082,"RPC",1670,0)
ORQQPX GET DEF LOCATIONS
"KRN",19,10082,"RPC",1671,0)
ORWTPP GETIMG
"KRN",19,10082,"RPC",1672,0)
ORWTPP SETIMG
"KRN",19,10082,"RPC",1673,0)
ORWTPO GETIMGD
"KRN",19,10082,"RPC",1674,0)
ORQQPX REM INSERT AT CURSOR
"KRN",19,10082,"RPC",1675,0)
TIU REMINDER DIALOGS
"KRN",19,10082,"RPC",1676,0)
TIU REM DLG OK AS TEMPLATE
"KRN",19,10082,"RPC",1677,0)
ORWDPS2 MAXREF
"KRN",19,10082,"RPC",1678,0)
ORWDPS2 SCHREQ
"KRN",19,10082,"RPC",1679,0)
ORWRP COLUMN HEADERS
"KRN",19,10082,"RPC",1680,0)
TIU FIELD DOLMTEXT
"KRN",19,10082,"RPC",1681,0)
TIU TEMPLATE PERSONAL OBJECTS
"KRN",19,10082,"RPC",1682,0)
ORWPCE AUTO VISIT TYPE SELECT
"KRN",19,10082,"RPC",1683,0)
ORWDPS2 QTY2DAY
"KRN",19,10082,"RPC",1684,0)
ORWU HAS OPTION ACCESS
"KRN",19,10082,"RPC",1685,0)
TIU TEMPLATE LOCK
"KRN",19,10082,"RPC",1686,0)
ORQQPX LVREMLST
"KRN",19,10082,"RPC",1687,0)
ORQQPX NEW COVER SHEET ACTIVE
"KRN",19,10082,"RPC",1688,0)
ORQQPX NEW COVER SHEET REMS
"KRN",19,10082,"RPC",1689,0)
ORQQPX SAVELVL
"KRN",19,10082,"RPC",1690,0)
PXRM REMINDER CATEGORY
"KRN",19,10082,"RPC",1691,0)
PXRM REMINDERS AND CATEGORIES
"KRN",19,10082,"RPC",1692,0)
TIU DIV AND CLASS INFO
"KRN",19,10082,"RPC",1693,0)
TIU TEMPLATE GETBOIL
"KRN",19,10082,"RPC",1694,0)
TIU TEMPLATE GETITEMS
"KRN",19,10082,"RPC",1695,0)
TIU TEMPLATE GETROOTS
"KRN",19,10082,"RPC",1696,0)
TIU TEMPLATE GETTEXT
"KRN",19,10082,"RPC",1697,0)
TIU TEMPLATE ISEDITOR
"KRN",19,10082,"RPC",1698,0)
TIU TEMPLATE UNLOCK
"KRN",19,10082,"RPC",1699,0)
TIU USER CLASS LONG LIST
"KRN",19,10082,"RPC",1700,0)
ORWPCE ALWAYS CHECKOUT
"KRN",19,10082,"RPC",1701,0)
ORWPCE GET EXCLUDED
"KRN",19,10082,"RPC",1702,0)
ORWDPS1 FORMALT
"KRN",19,10082,"RPC",1703,0)
ORQPT DEFAULT LIST SORT
"KRN",19,10082,"RPC",1704,0)
ORWDPS1 DOSEALT
"KRN",19,10082,"RPC",1705,0)
ORWTPR OCDESC
"KRN",19,10082,"RPC",1706,0)
ORWTPR NOTDESC
"KRN",19,10082,"RPC",1707,0)
ORWDPS1 FAILDEA
"KRN",19,10082,"RPC",1708,0)
ORQPT DEFAULT CLINIC DATE RANG
"KRN",19,10082,"RPC",1709,0)
ORWTIU CANLINK
"KRN",19,10082,"RPC",1710,0)
TIU ID ATTACH ENTRY
"KRN",19,10082,"RPC",1711,0)
TIU ID CAN ATTACH
"KRN",19,10082,"RPC",1712,0)
TIU ID CAN RECEIVE
"KRN",19,10082,"RPC",1713,0)
TIU ID DETACH ENTRY
"KRN",19,10082,"RPC",1714,0)
ORWCOM GETOBJS
"KRN",19,10082,"RPC",1715,0)
ORWCOM DETAILS
"KRN",19,10082,"RPC",1716,0)
ORWCOM PTOBJ
"KRN",19,10082,"RPC",1718,0)
TIU TEMPLATE GETLINK
"KRN",19,10082,"RPC",1719,0)
TIU TEMPLATE ALL TITLES
"KRN",19,10082,"RPC",1720,0)
ORWSR LIST
"KRN",19,10082,"RPC",1721,0)
ORWSR SHOW SURG TAB
"KRN",19,10082,"RPC",1722,0)
ORWSR GET SURG CONTEXT
"KRN",19,10082,"RPC",1723,0)
ORWSR SAVE SURG CONTEXT
"KRN",19,10082,"RPC",1724,0)
ORWSR ONECASE
"KRN",19,10082,"RPC",1725,0)
ORWSR OPTOP
"KRN",19,10082,"RPC",1726,0)
ORWSR OPTOP NON-OR
"KRN",19,10082,"RPC",1727,0)
ORWSR SHOW OPTOP WHEN SIGNING
"KRN",19,10082,"RPC",1728,0)
ORWSR IS NON-OR PROCEDURE
"KRN",19,10082,"RPC",1729,0)
ORWSR CASELIST
"KRN",19,10082,"RPC",1730,0)
ORQQCN GET PROC IEN
"KRN",19,10082,"RPC",1731,0)
ORWRP PRINT V REPORT
"KRN",19,10082,"RPC",1732,0)
ORWRP3 EXPAND COLUMNS
"KRN",19,10082,"RPC",1733,0)
ORWTPD ACTDF
"KRN",19,10082,"RPC",1734,0)
ORWTPD DELDFLT
"KRN",19,10082,"RPC",1735,0)
ORWTPD GETDFLT
"KRN",19,10082,"RPC",1736,0)
ORWTPD RSDFLT
"KRN",19,10082,"RPC",1737,0)
ORWTPD SUDF
"KRN",19,10082,"RPC",1738,0)
ORWTPD SUINDV
"KRN",19,10082,"RPC",1739,0)
ORWTPD GETSETS
"KRN",19,10082,"RPC",1740,0)
ORWCOM ORDEROBJ
"KRN",19,10082,"RPC",1741,0)
ORWRP2 COMPABV
"KRN",19,10082,"RPC",1742,0)
ORWRP2 GETLKUP
"KRN",19,10082,"RPC",1743,0)
ORWRP2 SAVLKUP
"KRN",19,10082,"RPC",1744,0)
ORWRP2 COMPDISP
"KRN",19,10082,"RPC",1745,0)
ORWPCE ISCLINIC
"KRN",19,10082,"RPC",1746,0)
ORWCH SAVECOL
"KRN",19,10082,"RPC",1747,0)
ORWSR RPTLIST
"KRN",19,10082,"RPC",1748,0)
ORQQPXRM MST UPDATE
"KRN",19,10082,"RPC",1749,0)
ORWMC PATIENT PROCEDURES1
"KRN",19,10082,"RPC",1750,0)
ORWRA IMAGING EXAMS1
"KRN",19,10082,"RPC",1751,0)
ORWRA REPORT TEXT1
"KRN",19,10082,"RPC",1752,0)
ORWDPS4 CPINFO
"KRN",19,10082,"RPC",1753,0)
ORWDPS4 CPLST
"KRN",19,10082,"RPC",1754,0)
ORWORB KILL UNVER MEDS ALERT
"KRN",19,10082,"RPC",1755,0)
ORWORB KILL UNVER ORDERS ALERT
"KRN",19,10082,"RPC",1756,0)
ORWPCE HNCOK
"KRN",19,10082,"RPC",1757,0)
ORWPS MEDHIST
"KRN",19,10082,"RPC",1758,0)
TIU FIELD CHECK
"KRN",19,10082,"RPC",1759,0)
TIU FIELD LIST ADD
"KRN",19,10082,"RPC",1760,0)
TIU FIELD LIST IMPORT
"KRN",19,10082,"RPC",1761,0)
TIU SET DOCUMENT TEXT
"KRN",19,10082,"RPC",1762,0)
ORWDPS2 CHKPI
"KRN",19,10082,"RPC",1763,0)
ORWDXR GTORITM
"KRN",19,10082,"RPC",1764,0)
ORWDPS2 CHKGRP
"KRN",19,10082,"RPC",1765,0)
ORWDPS2 QOGRP
"KRN",19,10082,"RPC",1766,0)
ORWDXR GETPKG
"KRN",19,10082,"U")
CPRSCHART VERSION 1.0.18.8
"KRN",8994,864,-1)
0^1
"KRN",8994,864,0)
ORQQCN SVC W/SYNONYMS^SVCSYN^ORQQCN2^4^^^^1
"KRN",8994,864,1,0)
^^4^4^3011218^
"KRN",8994,864,1,1,0)
This is a modified version of ORQQCN GET SERVICE TREE that also includes
"KRN",8994,864,1,2,0)
synonyms for the services returned. It also allows passing of an optional
"KRN",8994,864,1,3,0)
Consult IEN, for screening allowable services to forward the consult to,
"KRN",8994,864,1,4,0)
especially in the case of interfacility consults.
"KRN",8994,864,2,0)
^8994.02A^4^4
"KRN",8994,864,2,1,0)
Start With^1^32
"KRN",8994,864,2,1,1,0)
^^1^1^3001005^
"KRN",8994,864,2,1,1,1,0)
Which service in the hierarchy to begin with.
"KRN",8994,864,2,2,0)
Purpose^1^2
"KRN",8994,864,2,2,1,0)
^^1^1^3001005^
"KRN",8994,864,2,2,1,1,0)
0 for display purposes, 1 to order or forward a consult.
"KRN",8994,864,2,3,0)
Include Synonyms^1^2
"KRN",8994,864,2,3,1,0)
^^1^1^3001005^
"KRN",8994,864,2,3,1,1,0)
0 to exclude synonyms, 1 to include synonyms.
"KRN",8994,864,2,4,0)
Consult IEN^1^16^0
"KRN",8994,864,2,4,1,0)
^^3^3^3011218^
"KRN",8994,864,2,4,1,1,0)
OPTIONAL - Include pointer to file 123, the Consult Request file.  Used 
"KRN",8994,864,2,4,1,2,0)
when forwarding a consult, and screening needs to be done to limit the 
"KRN",8994,864,2,4,1,3,0)
list of services.
"KRN",8994,864,2,"B","Consult IEN",4)

"KRN",8994,864,2,"B","Include Synonyms",3)

"KRN",8994,864,2,"B","Purpose",2)

"KRN",8994,864,2,"B","Start With",1)

"KRN",8994,864,3,0)
^8994.03^3^3^3011218^^
"KRN",8994,864,3,1,0)
Output: Array formatted as follows-
"KRN",8994,864,3,2,0)
 
"KRN",8994,864,3,3,0)
   svc ien^svc name or syn^parent^has children^svc usage^orderable item
"KRN",8994,1058,-1)
0^3
"KRN",8994,1058,0)
ORWDPS2 CHKPI^CHKPI^ORWDPS2^1
"KRN",8994,1083,-1)
0^4
"KRN",8994,1083,0)
ORWDXR GTORITM^GTORITM^ORWDXR^1
"KRN",8994,1106,-1)
0^2
"KRN",8994,1106,0)
ORWDPS2 CHKGRP^CHKGRP^ORWDPS2^1
"KRN",8994,1107,-1)
0^5
"KRN",8994,1107,0)
ORWDPS2 QOGRP^QOGRP^ORWDPS2^1
"KRN",8994,1118,-1)
0^6
"KRN",8994,1118,0)
ORWDXR GETPKG^GETPKG^ORWDXR^1
"KRN",8994,1118,2,0)
^8994.02A
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",22,-1)
1^1
"PKG",22,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",22,20,0)
^9.402P^^
"PKG",22,22,0)
^9.49I^1^1
"PKG",22,22,1,0)
3.0^2971217^2980204^64
"PKG",22,22,1,"PAH",1,0)
131^3020208
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
10
"RTN","ORCDPS2")
0^1^B63227375
"RTN","ORCDPS2",1,0)
ORCDPS2 ;SLC/MKB-Pharmacy dialog utilities ;07:24 AM  5 Apr 2001 [12/31/01 6:35pm]
"RTN","ORCDPS2",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**94,116,125,131**;Dec 17, 1997
"RTN","ORCDPS2",3,0)
 ;
"RTN","ORCDPS2",4,0)
COMPLEX() ; -- Single or complex dose?
"RTN","ORCDPS2",5,0)
 N X,Y,DIR,DUOUT,DTOUT,COMPLX
"RTN","ORCDPS2",6,0)
 S COMPLX=$S($O(ORDIALOG(PROMPT,"?"),-1)>1:1,$L($G(ORDIALOG($$PTR("DURATION"),1))):1,1:0)
"RTN","ORCDPS2",7,0)
 I $G(ORTYPE)="Q",$O(ORDIALOG(PROMPT,0)),FIRST Q COMPLX
"RTN","ORCDPS2",8,0)
 I $D(ORENEW)!$D(OREWRITE)!$D(ORXFER)!COMPLX Q COMPLX
"RTN","ORCDPS2",9,0)
 I $D(OREDIT) Q:$D(ORCOMPLX)!COMPLX COMPLX G CP1 ;Q if complex or 'first, else ask
"RTN","ORCDPS2",10,0)
 I 'FIRST S Y=$S($D(ORCOMPLX):ORCOMPLX,1:COMPLX) Q Y
"RTN","ORCDPS2",11,0)
CP1 S DIR(0)="YA",DIR("A")="Complex dose? ",DIR("B")="NO"
"RTN","ORCDPS2",12,0)
 S DIR("?")="Enter YES if you wish to enter multiple sets of dosage instructions, a tapering dose, or to limit the duration of a single dose."
"RTN","ORCDPS2",13,0)
 D ^DIR S:$D(DTOUT) Y="^"
"RTN","ORCDPS2",14,0)
 Q Y
"RTN","ORCDPS2",15,0)
 ;
"RTN","ORCDPS2",16,0)
DOSES ; -- Get available common doses
"RTN","ORCDPS2",17,0)
 ;S $P(ORDIALOG(PROMPT,0),U,2)=$S(ORCAT="I":"1:20",1:"1:80")
"RTN","ORCDPS2",18,0)
 S ORDIALOG(PROMPT,"A")="Dose"_$S(ORCAT="I"&$G(ORIV):" or Rate: ",1:": ")
"RTN","ORCDPS2",19,0)
 S $P(ORDIALOG(PROMPT,"?"),",",2)=$S($G(ORIV):" as either a dose amount or infusion rate.",1:" as a dose or amount.")
"RTN","ORCDPS2",20,0)
 I FIRST,'$O(ORDIALOG(PROMPT,0)),$G(ORXFER) D SHOWSIG^ORCMED
"RTN","ORCDPS2",21,0)
 S ORCOMPLX=$$COMPLEX,MULT=+ORCOMPLX I ORCOMPLX="^" S ORQUIT=1 Q
"RTN","ORCDPS2",22,0)
 Q:$G(ORDIALOG(PROMPT,"LIST"))  Q:'$D(ORDOSE)
"RTN","ORCDPS2",23,0)
D1 ; -- enter here from ORCMED,NF^ORCDPS to build list
"RTN","ORCDPS2",24,0)
 N I,J,X,DD,DRUG,DOSE,CONJ,CNT,UD,COST,TEXT
"RTN","ORCDPS2",25,0)
 S (I,CNT)=0,CONJ=$P($G(ORDOSE("MISC")),U,3) S:$L(CONJ) CONJ=" "_CONJ
"RTN","ORCDPS2",26,0)
 F  S I=$O(ORDOSE(I)) Q:I'>0  D
"RTN","ORCDPS2",27,0)
 . S X=ORDOSE(I),DD=+$P(X,U,6),DRUG=ORDOSE("DD",DD)
"RTN","ORCDPS2",28,0)
 . ;  =TotalDose^Units^U/D^Noun^LocalDose^DispDrugIEN^Cost
"RTN","ORCDPS2",29,0)
 . ;DD=Name^Cost^NF^DispUnit^Strength^Units^DoseForm^MaxRefills?
"RTN","ORCDPS2",30,0)
 . S DOSE=$P(X,U,5),UD=$P(X,U,3),COST=$P(X,U,7) Q:'$L(DOSE)
"RTN","ORCDPS2",31,0)
 . I '$P(X,U) S DOSE=DOSE_CONJ_" "_$S($L($P(DRUG,U,5)):$P(DRUG,U,5)_$P(DRUG,U,6),1:$P(DRUG,U))
"RTN","ORCDPS2",32,0)
 . ;I UD S COST="$"_$J(UD*$P(DRUG,U,2),1,3) ;_" per "_UD_" "_$P(X,U,4)
"RTN","ORCDPS2",33,0)
 . S TEXT=DOSE_$S($L(COST):"     $"_COST,1:"")_$S($P(DRUG,U,3):"   (non-formulary)",1:"")
"RTN","ORCDPS2",34,0)
 . S CNT=CNT+1,ORDIALOG(PROMPT,"LIST",CNT)=DOSE_U_TEXT
"RTN","ORCDPS2",35,0)
 . S ORDIALOG(PROMPT,"LIST","B",TEXT)=DOSE
"RTN","ORCDPS2",36,0)
 . S ORDIALOG(PROMPT,"LIST","D",DOSE)=DD ;default DispDrug
"RTN","ORCDPS2",37,0)
 . S ORDOSE("DD",DD,DOSE)=$P(ORDOSE(I),U,1,6)_U_$P(DRUG,U,5,6)
"RTN","ORCDPS2",38,0)
 . S J=0 F  S J=$O(ORDOSE(I,J)) Q:J'>0  D  ;xref alt forms of dose
"RTN","ORCDPS2",39,0)
 .. S DD=+$P(ORDOSE(I,J),U,6),DRUG=$G(ORDOSE("DD",DD))
"RTN","ORCDPS2",40,0)
 .. S ORDOSE("DD",DD,DOSE)=$P(ORDOSE(I,J),U,1,6)_U_$P(DRUG,U,5,6)
"RTN","ORCDPS2",41,0)
 S:CNT ORDIALOG(PROMPT,"LIST")=CNT
"RTN","ORCDPS2",42,0)
 Q
"RTN","ORCDPS2",43,0)
 ;
"RTN","ORCDPS2",44,0)
CHDOSE ; -- kill dependent values if inst ORI of dose changes
"RTN","ORCDPS2",45,0)
 N X,PROMPTS,P,NAME,DOSE,DD S X=$G(ORDIALOG(PROMPT,ORI))
"RTN","ORCDPS2",46,0)
 S X=$$UP^XLFSTR(X),ORDIALOG(PROMPT,ORI)=X ;force uppercase
"RTN","ORCDPS2",47,0)
 I X,X'?1.N.E1.A.E K DONE W $C(7),!,"Enter the amount of this drug that the patient is to receive as a dose,",!,"NOT as the number of units per dose." Q
"RTN","ORCDPS2",48,0)
 I $L(X)>60,'$D(ORDIALOG(PROMPT,"LIST","B",X)) K DONE W $C(7),!,"Instructions may not be longer than 60 characters." Q
"RTN","ORCDPS2",49,0)
 I $G(ORESET)'=X D  ;kill dependent values if new/changed dose
"RTN","ORCDPS2",50,0)
 . S PROMPTS="STRENGTH^DRUG NAME^DOSE^DISPENSE DRUG^DAYS SUPPLY^QUANTITY^REFILLS"
"RTN","ORCDPS2",51,0)
 . F P=1:1:$L(PROMPTS,U) S NAME=$P(PROMPTS,U,P) K ORDIALOG($$PTR(NAME),ORI)
"RTN","ORCDPS2",52,0)
 . K ORQTY,ORQTYUNT,ORDRUG,ORDIALOG($$PTR("DISPENSE DRUG"),1)
"RTN","ORCDPS2",53,0)
 . K ^TMP("ORWORD",$J,$$PTR("SIG"))
"RTN","ORCDPS2",54,0)
 S DOSE=$$PTR("DOSE") I $L(X),'$L($G(ORDIALOG(DOSE,ORI))) D  ;set ID
"RTN","ORCDPS2",55,0)
 . S DD=+$G(ORDIALOG(PROMPT,"LIST","D",X))
"RTN","ORCDPS2",56,0)
 . S:DD ORDIALOG(DOSE,ORI)=$TR($G(ORDOSE("DD",DD,X)),"^","&")
"RTN","ORCDPS2",57,0)
 S DD=+$P($G(ORDIALOG(DOSE,ORI)),"&",6)
"RTN","ORCDPS2",58,0)
 I DD,$P($G(ORDOSE("DD",DD)),U,3) D NF^ORCDPS(DD) ;look for FormAlt
"RTN","ORCDPS2",59,0)
 Q
"RTN","ORCDPS2",60,0)
 ;
"RTN","ORCDPS2",61,0)
EXDOSE ; -- Dose Exit Action
"RTN","ORCDPS2",62,0)
 Q:'$O(ORDIALOG(PROMPT,0))  N DRUG,MISC,QUIT,LAST
"RTN","ORCDPS2",63,0)
 S ORDRUG=$$DISPDRUG^ORCDPS,DRUG=$G(ORDOSE("DD",+ORDRUG))
"RTN","ORCDPS2",64,0)
 I ORDRUG D  I $G(QUIT) S ORQUIT=1 Q
"RTN","ORCDPS2",65,0)
 . ;I $P(DRUG,U,10),'$L($P($G(^VA(200,+$G(ORNP),"PS")),U,2)),'$L($P($G(^("PS")),U,3)) W $C(7),!,$P($G(^(0)),U)_" must have a DEA# or VA# to order this drug!" S QUIT=1 Q
"RTN","ORCDPS2",66,0)
 . ;I $P(DRUG,U,10)=1 W $C(7),!,"This order will require a wet signature!"
"RTN","ORCDPS2",67,0)
 . S ORDIALOG($$PTR("DISPENSE DRUG"),1)=ORDRUG
"RTN","ORCDPS2",68,0)
 . D:$G(ORCAT)="O" RESETID^ORCDPS
"RTN","ORCDPS2",69,0)
 . N STR,MED S STR=$P(DRUG,U,5)_$P(DRUG,U,6)
"RTN","ORCDPS2",70,0)
 . I STR'>0 S:'$G(ORDOSE(1)) ORDIALOG($$PTR("DRUG NAME"),1)=$P(DRUG,U) Q
"RTN","ORCDPS2",71,0)
 . S MED=$P($G(^ORD(101.43,+$G(OROI),0)),U)
"RTN","ORCDPS2",72,0)
 . I MED'[STR,ORCAT="O"!'$G(ORDOSE(1)) S ORDIALOG($$PTR("STRENGTH"),1)=STR
"RTN","ORCDPS2",73,0)
 I +ORDRUG'>0,ORCAT="O" W $C(7),!,"Cannot determine dispense drug - some defaults and order checks may not occur!"
"RTN","ORCDPS2",74,0)
EXD1 ; -kill dangling conjunction, [re]build Sig, get Qty info
"RTN","ORCDPS2",75,0)
 S LAST=$O(ORDIALOG(PROMPT,"?"),-1) K ORDIALOG($$PTR("AND/THEN"),LAST)
"RTN","ORCDPS2",76,0)
 D ADMIN^ORCDPS3 D:$G(ORTYPE)'="Z" SIG ;[re]build Sig/Text
"RTN","ORCDPS2",77,0)
 I ORDRUG,ORCAT="O" D  ;set Qty info
"RTN","ORCDPS2",78,0)
 . S:$L($P(DRUG,U,4)) ORQTYUNT=$P(DRUG,U,4)
"RTN","ORCDPS2",79,0)
 . S MISC=$$ENDCM^PSJORUTL(+ORDRUG),ORQTY=$P(MISC,U,4)
"RTN","ORCDPS2",80,0)
 . W:$L($P(MISC,U,2)) !!,$P(MISC,U,2),!
"RTN","ORCDPS2",81,0)
 Q
"RTN","ORCDPS2",82,0)
 ;
"RTN","ORCDPS2",83,0)
SIG ; -- Create ORDIALOG(SIG) from Instructions PROMPT,ORDOSE,ORDRUG,ORCAT
"RTN","ORCDPS2",84,0)
 ;    Return text in ^TMP("ORWORD",$J,SIG,INST)
"RTN","ORCDPS2",85,0)
 ;   [also called from PSJ^ORCSEND1 to build child orders]
"RTN","ORCDPS2",86,0)
 ;
"RTN","ORCDPS2",87,0)
 N ORT,ORSCH,ORDUR,ORID,ORDD,ORCNJ,ORMISC,ORPREP,ORX,ORI,CNT,ORSIG,ORS,DOSE
"RTN","ORCDPS2",88,0)
 S ORT=$$PTR("ROUTE"),ORSCH=$$PTR("SCHEDULE"),ORDUR=$$PTR("DURATION")
"RTN","ORCDPS2",89,0)
 S ORID=$$PTR("DOSE"),ORCNJ=$$PTR("AND/THEN"),ORS=$$PTR("SIG")
"RTN","ORCDPS2",90,0)
 S ORMISC=$G(ORDOSE("MISC")),ORPREP=$P(ORMISC,U,2)
"RTN","ORCDPS2",91,0)
 S ORX=$S(ORCAT="I":"",$L($P(ORMISC,U)):$P(ORMISC,U)_" ",1:"") ;"TAKE "
"RTN","ORCDPS2",92,0)
 S (CNT,ORI)=0 F  S ORI=$O(ORDIALOG(PROMPT,ORI)) Q:ORI'>0  D
"RTN","ORCDPS2",93,0)
 . S DOSE=$G(ORDIALOG(PROMPT,ORI)) Q:'$L(DOSE)
"RTN","ORCDPS2",94,0)
 . S ORX=ORX_$$DOSE_$$RTE_$$SCH_$$DUR_$$CONJ
"RTN","ORCDPS2",95,0)
 . S CNT=CNT+1,ORSIG(CNT,0)=ORX,ORX=""
"RTN","ORCDPS2",96,0)
 Q:CNT'>0  S ORSIG(0)="^^"_CNT_U_CNT_U_DT_U
"RTN","ORCDPS2",97,0)
 K ^TMP("ORWORD",$J,ORS,1) M ^(1)=ORSIG S ORDIALOG(PROMPT,"FORMAT")="@"
"RTN","ORCDPS2",98,0)
 S ORDIALOG(ORS,1)=$NA(^TMP("ORWORD",$J,ORS,1))
"RTN","ORCDPS2",99,0)
 Q
"RTN","ORCDPS2",100,0)
 ;
"RTN","ORCDPS2",101,0)
PTR(X) ; -- Return ptr to prompt OR GTX X
"RTN","ORCDPS2",102,0)
 Q +$O(^ORD(101.41,"AB","OR GTX "_X,0))
"RTN","ORCDPS2",103,0)
 ;
"RTN","ORCDPS2",104,0)
DOSE() ; -- Return dosage
"RTN","ORCDPS2",105,0)
 N X0,Y S X0=$G(ORDIALOG(ORID,ORI)) ;ID string
"RTN","ORCDPS2",106,0)
 S Y=DOSE I ORDRUG,$L(X0) D  ;use local dose if common DispDrug
"RTN","ORCDPS2",107,0)
 . S:$L($P(X0,"&",5)) Y=$P(X0,"&",5) ;unless Outpt w/total dose
"RTN","ORCDPS2",108,0)
 . I ORCAT="O",X0 S Y=$$WORD($P(X0,"&",3))_" "_$P(X0,"&",4) ;u/d
"RTN","ORCDPS2",109,0)
 Q Y
"RTN","ORCDPS2",110,0)
 ;
"RTN","ORCDPS2",111,0)
WORD(X) ; -- Return words for number X
"RTN","ORCDPS2",112,0)
 N X1,X2,Y S X1=$P(+X,"."),X2=$P(+X,".",2)
"RTN","ORCDPS2",113,0)
 S Y="" I X1 S Y=$S(X1=1:"ONE",X1=2:"TWO",X1=3:"THREE",X1=4:"FOUR",X1=5:"FIVE",X1=6:"SIX",X1=7:"SEVEN",X1=8:"EIGHT",X1=9:"NINE",X1=10:"TEN",1:X1)
"RTN","ORCDPS2",114,0)
 I X2 S Y=Y_$S($L(Y):" AND ",1:"")_$S(X2=5:"ONE-HALF",X2=33!(X2=34):"ONE-THIRD",X2=25:"ONE-FOURTH",X2=66!(X2=67):"TWO-THIRDS",X2=75:"THREE-FOURTHS",1:"."_X2)
"RTN","ORCDPS2",115,0)
 Q Y
"RTN","ORCDPS2",116,0)
 ;
"RTN","ORCDPS2",117,0)
RTE() ; -- Return expansion of route
"RTN","ORCDPS2",118,0)
 N X,X0,Y S X=+$G(ORDIALOG(ORT,ORI)) Q:X'>0 ""
"RTN","ORCDPS2",119,0)
 S X0=$G(^PS(51.2,+X,0)),Y=""
"RTN","ORCDPS2",120,0)
 I ORCAT="I" S Y=" "_$S($L($P(X0,U,3)):$P(X0,U,3),1:$P(X0,U))
"RTN","ORCDPS2",121,0)
 I ORCAT="O" S Y=" "_$S($L(ORPREP):ORPREP_" ",1:"")_$S($L($P(X0,U,2)):$P(X0,U,2),1:$P(X0,U))
"RTN","ORCDPS2",122,0)
 Q Y
"RTN","ORCDPS2",123,0)
 ;
"RTN","ORCDPS2",124,0)
SCH() ; -- Return [outpatient] expansion of schedule
"RTN","ORCDPS2",125,0)
 N X,Y S X=$G(ORDIALOG(ORSCH,ORI))
"RTN","ORCDPS2",126,0)
 I $L(X),ORCAT="O" D SCH^PSSUTIL1(.X)
"RTN","ORCDPS2",127,0)
 S Y=$S($L(X):" "_X,1:"")
"RTN","ORCDPS2",128,0)
 Q Y
"RTN","ORCDPS2",129,0)
 ;
"RTN","ORCDPS2",130,0)
DUR() ; -- Return duration
"RTN","ORCDPS2",131,0)
 N X,Y S X=$G(ORDIALOG(ORDUR,ORI)),Y=""
"RTN","ORCDPS2",132,0)
 I X S Y=" FOR "_$$UP^XLFSTR(X)_$S(+X=X:" DAYS",1:"")
"RTN","ORCDPS2",133,0)
 Q Y
"RTN","ORCDPS2",134,0)
 ;
"RTN","ORCDPS2",135,0)
CONJ() ; -- Return conjuction
"RTN","ORCDPS2",136,0)
 N X,Y S X=$G(ORDIALOG(ORCNJ,ORI))
"RTN","ORCDPS2",137,0)
 S:$L(X)>1 X=$E(X) S:X="E" S="X"
"RTN","ORCDPS2",138,0)
 S Y=$S(X="T":", THEN",X="X":" EXCEPT",X="A":" AND",1:"")
"RTN","ORCDPS2",139,0)
 Q Y
"RTN","ORCDPS2",140,0)
 ;
"RTN","ORCDPS2",141,0)
DOSETEXT        ; -- Reset dose text in ORDIALOG(INSTR) for backdoor orders
"RTN","ORCDPS2",142,0)
 ;    [Called from ORMPS1 - uses ORCAT,PSOI,ORVP,DRUG,INSTR,DOSE]
"RTN","ORCDPS2",143,0)
 ;
"RTN","ORCDPS2",144,0)
 N ORTYPE,ORDOSE,CONJ,ORDRUG,DRUG0,STRG,ORI,LDOSE,X,PROMPT
"RTN","ORCDPS2",145,0)
 S ORTYPE=$S($G(ORCAT)="I":"U",1:"O")
"RTN","ORCDPS2",146,0)
 D DOSE^PSSORUTL(.ORDOSE,+PSOI,ORTYPE,+ORVP)
"RTN","ORCDPS2",147,0)
 S CONJ=$P($G(ORDOSE("MISC")),U,3) S:$L(CONJ) CONJ=" "_CONJ
"RTN","ORCDPS2",148,0)
 S ORDRUG=+$G(ORDIALOG(DRUG,1)),DRUG0=$G(ORDOSE("DD",ORDRUG))
"RTN","ORCDPS2",149,0)
 S STRG=$P(DRUG0,U,5)_$P(DRUG0,U,6)
"RTN","ORCDPS2",150,0)
 I '$G(ORDOSE(1)) S ORI=0 F  S ORI=$O(ORDIALOG(INSTR,ORI)) Q:ORI'>0  D
"RTN","ORCDPS2",151,0)
 . S LDOSE=$G(ORDIALOG(INSTR,ORI)),X=$G(ORDIALOG(DOSE,ORI)) Q:'$L(X)
"RTN","ORCDPS2",152,0)
 . S:'X ORDIALOG(INSTR,ORI)=LDOSE_CONJ_" "_$S(STRG:STRG,1:$P(DRUG0,U))
"RTN","ORCDPS2",153,0)
 ; -build Sig/Text if not defined
"RTN","ORCDPS2",154,0)
 I '$D(ORDIALOG(+$$PTR("SIG"),1)) S PROMPT=INSTR D SIG
"RTN","ORCDPS2",155,0)
 Q
"RTN","ORCDPS2",156,0)
 ;
"RTN","ORCDPS2",157,0)
PI ; -- Include Patient Instructions w/Sig in Outpt order?
"RTN","ORCDPS2",158,0)
 N X,Y,DIR,DUOUT,DTOUT,DIRUT,ORTX,ORMAX,I,CNT
"RTN","ORCDPS2",159,0)
 I $G(ORCAT)'="O" D CLEARWP Q  ;!'$O(ORDOSE("PI",0))
"RTN","ORCDPS2",160,0)
 Q:$G(ORENEW)  S I=0,ORMAX=57
"RTN","ORCDPS2",161,0)
 I $G(OREDIT)!$G(OREWRITE),$O(^TMP("ORWORD",$J,PROMPT,INST,0)) K ORDOSE("PI") S I=0 F  S I=$O(^TMP("ORWORD",$J,PROMPT,INST,I)) Q:I<1  S ORDOSE("PI",I)=$G(^(I,0))
"RTN","ORCDPS2",162,0)
 I '$O(ORDOSE("PI",0)) D CLEARWP Q
"RTN","ORCDPS2",163,0)
 F  S I=$O(ORDOSE("PI",I)) Q:I'>0  S X=ORDOSE("PI",I) D TXT^ORCHTAB
"RTN","ORCDPS2",164,0)
 S DIR(0)="YA",DIR("A")="Include Patient Instructions in Sig? "
"RTN","ORCDPS2",165,0)
 S DIR("?")="Enter NO if you do not want these instructions included in the sig for this order",DIR("B")="YES"
"RTN","ORCDPS2",166,0)
 W ! S I=0 F  S I=$O(ORTX(I)) Q:I'>0  W !,$S(I=1:"Patient Instructions: ",1:"                      ")_ORTX(I)
"RTN","ORCDPS2",167,0)
 D ^DIR I $D(DUOUT)!$D(DTOUT) S ORQUIT=1 Q
"RTN","ORCDPS2",168,0)
 I Y D  Q  ;save text
"RTN","ORCDPS2",169,0)
 . K ^TMP("ORWORD",$J,PROMPT,INST) S CNT=0
"RTN","ORCDPS2",170,0)
 . S I=0 F  S I=$O(ORDOSE("PI",I)) Q:I'>0  S ^TMP("ORWORD",$J,PROMPT,INST,I,0)=ORDOSE("PI",I),CNT=CNT+1
"RTN","ORCDPS2",171,0)
 . S ^TMP("ORWORD",$J,PROMPT,INST,0)="^^"_CNT_U_CNT_U_DT_U
"RTN","ORCDPS2",172,0)
 . S ORDIALOG(PROMPT,INST)="^TMP(""ORWORD"","_$J_","_PROMPT_","_INST_")"
"RTN","ORCDPS2",173,0)
 I Y'>0 K ORDIALOG(PROMPT,INST),^TMP("ORWORD",$J,PROMPT,INST)
"RTN","ORCDPS2",174,0)
 Q
"RTN","ORCDPS2",175,0)
 ;
"RTN","ORCDPS2",176,0)
CLEARWP ; -- Clear INST of wp field PROMPT
"RTN","ORCDPS2",177,0)
 K ORDIALOG(PROMPT,INST),^TMP("ORWORD",$J,PROMPT,INST)
"RTN","ORCDPS2",178,0)
 Q
"RTN","ORQQCN2")
0^2^B31607274
"RTN","ORQQCN2",1,0)
ORQQCN2 ; slc/REV - Functions for GUI consult actions ; 18 Dec 2001  09:02AM [12/31/01 6:36pm]
"RTN","ORQQCN2",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,85,125,131**;Dec 17, 1997
"RTN","ORQQCN2",3,0)
 ;
"RTN","ORQQCN2",4,0)
CMT(ORERR,ORIEN,ORCOM,ORALRT,ORALTO,ORDATE) ;Add comment to existing consult without changing status
"RTN","ORQQCN2",5,0)
 ;ORIEN - IEN of consult from File 123
"RTN","ORQQCN2",6,0)
 ;ORERR - return array for results/errors
"RTN","ORQQCN2",7,0)
 ;ORCOM is the comments array to be added
"RTN","ORQQCN2",8,0)
 ;     passed in as ORCOM(1)="Xxxx Xxxxx...",ORCOM(2)="Xxxx Xx Xxx...", ORCOM(3)="Xxxxx Xxx Xx...", etc.
"RTN","ORQQCN2",9,0)
 ;ORALRT - should alerts be sent to anyone?
"RTN","ORQQCN2",10,0)
 ;ORALTO - array of alert recipient IENs
"RTN","ORQQCN2",11,0)
 N ORAD,ORDUZ,ORNP,X
"RTN","ORQQCN2",12,0)
 S ORERR=0,ORAD=$S($D(ORDATE):ORDATE,1:$$NOW^XLFDT),ORNP=""
"RTN","ORQQCN2",13,0)
 I '$D(ORCOM) S ORERR="1^Comments required - no action taken" Q
"RTN","ORQQCN2",14,0)
 I '$D(^GMR(123,ORIEN)) S ORERR="1^No such consult" Q
"RTN","ORQQCN2",15,0)
 I $G(ORALRT)=1 D
"RTN","ORQQCN2",16,0)
 .F I=1:1  S X=$P(ORALTO,";",I) Q:X=""  S ORDUZ(X)=""
"RTN","ORQQCN2",17,0)
 D CMT^GMRCGUIB(ORIEN,.ORCOM,.ORDUZ,ORAD,DUZ)
"RTN","ORQQCN2",18,0)
 Q
"RTN","ORQQCN2",19,0)
 ;
"RTN","ORQQCN2",20,0)
SCH(ORERR,ORIEN,ORNP,ORDATE,ORALRT,ORALTO,ORCOM) ;Schedule consult and change status
"RTN","ORQQCN2",21,0)
 ;ORERR - return array for results/errors
"RTN","ORQQCN2",22,0)
 ;ORIEN - IEN of consult from File 123
"RTN","ORQQCN2",23,0)
 ;ORNP - Provider who Scheduled consult
"RTN","ORQQCN2",24,0)
 ;ORDATE - Date/Time Consult was scheduled.
"RTN","ORQQCN2",25,0)
 ;ORALRT - should alerts be sent to anyone?
"RTN","ORQQCN2",26,0)
 ;ORALTO - array of alert recipient IENs
"RTN","ORQQCN2",27,0)
 ;ORCOM is the comments array to be added
"RTN","ORQQCN2",28,0)
 ;     passed in as ORCOM(1)="Xxxx Xxxxx...",ORCOM(2)="Xxxx Xx Xxx...", ORCOM(3)="Xxxxx Xxx Xx...", etc.
"RTN","ORQQCN2",29,0)
 N ORAD,ORDUZ,X
"RTN","ORQQCN2",30,0)
 S ORERR=0,ORAD=$S($D(ORDATE):ORDATE,1:$$NOW^XLFDT)
"RTN","ORQQCN2",31,0)
 S:+$G(ORNP)=0 ORNP=DUZ
"RTN","ORQQCN2",32,0)
 I '$D(^GMR(123,ORIEN)) S ORERR="1^No such consult" Q
"RTN","ORQQCN2",33,0)
 I $G(ORALRT)=1 D
"RTN","ORQQCN2",34,0)
 .F I=1:1  S X=$P(ORALTO,";",I) Q:X=""  S ORDUZ(X)=""
"RTN","ORQQCN2",35,0)
 S ORERR=$$SCH^GMRCGUIB(ORIEN,ORNP,ORAD,.ORDUZ,.ORCOM)
"RTN","ORQQCN2",36,0)
 Q
"RTN","ORQQCN2",37,0)
 ;
"RTN","ORQQCN2",38,0)
SVCTREE(Y,PURPOSE) ;Returns list of consult service for current
"RTN","ORQQCN2",39,0)
 ;  context, screening for inactive, groupers, and tracking
"RTN","ORQQCN2",40,0)
 ; PURPOSE: Display=0, Forward=1, Order=1
"RTN","ORQQCN2",41,0)
 N GMRCTO,GMRCDG,GMRCSVC,GMRCOI
"RTN","ORQQCN2",42,0)
 K ^TMP("GMRCSLIST",$J)
"RTN","ORQQCN2",43,0)
 S GMRCTO=PURPOSE,GMRCDG=1
"RTN","ORQQCN2",44,0)
 D SERV1^GMRCASV
"RTN","ORQQCN2",45,0)
 S GMRCSVC=0
"RTN","ORQQCN2",46,0)
 I '$D(^TMP("GMRCSLIST",$J)) S Y(1)="-1^No services found" Q
"RTN","ORQQCN2",47,0)
 F I=1:1  S GMRCSVC=$O(^TMP("GMRCSLIST",$J,GMRCSVC)) Q:+GMRCSVC=0  D
"RTN","ORQQCN2",48,0)
 . S Y(I)=^TMP("GMRCSLIST",$J,GMRCSVC)
"RTN","ORQQCN2",49,0)
 . S GMRCOI=$O(^ORD(101.43,"ID",$P(Y(I),U,1)_";99CON",0))
"RTN","ORQQCN2",50,0)
 . ;S GMRCOI=$O(^ORD(101.43,"S.CSLT",$P(Y(I),U,2),0))
"RTN","ORQQCN2",51,0)
 . S Y(I)=Y(I)_U_GMRCOI
"RTN","ORQQCN2",52,0)
 K ^TMP("GMRCSLIST",$J)
"RTN","ORQQCN2",53,0)
 Q
"RTN","ORQQCN2",54,0)
 ;
"RTN","ORQQCN2",55,0)
SVCSYN(ORROOT,ORSTRT,ORWHY,ORSYN,ORIEN) ;;return CSLT services for GUI
"RTN","ORQQCN2",56,0)
 ;Input:
"RTN","ORQQCN2",57,0)
 ; ORROOT - passed in as the array to return results in
"RTN","ORQQCN2",58,0)
 ; ORSTRT- service to begin building from
"RTN","ORQQCN2",59,0)
 ; ORWHY - 0 for display, 1 for forwarding or ordering
"RTN","ORQQCN2",60,0)
 ; ORSYN - Boolean: 1=return synonyms, 0=do not
"RTN","ORQQCN2",61,0)
 ; ORIEN - Consult IEN (file 123) (OPTIONAL)
"RTN","ORQQCN2",62,0)
 ;Output: Array formatted as follows-
"RTN","ORQQCN2",63,0)
 ;      svc ien^svc name or syn^parent^has children^svc usage^orderable item
"RTN","ORQQCN2",64,0)
 N ORSVC,I,X,OI
"RTN","ORQQCN2",65,0)
 S:+$G(ORSTRT)=0 ORSTRT=1
"RTN","ORQQCN2",66,0)
 S:$G(ORWHY)="" ORWHY=1
"RTN","ORQQCN2",67,0)
 S:$G(ORSYN)="" ORSYN=1
"RTN","ORQQCN2",68,0)
 S ORROOT=$NA(^TMP("ORCSLT",$J))
"RTN","ORQQCN2",69,0)
 I $$PATCH^XPDUTL("GMRC*3.0*23") D
"RTN","ORQQCN2",70,0)
 . D GUI^GMRCASV1(ORROOT,ORSTRT,ORWHY,ORSYN,$G(ORIEN))
"RTN","ORQQCN2",71,0)
 E  D GUI^GMRCASV1(ORROOT,ORSTRT,ORWHY,ORSYN)
"RTN","ORQQCN2",72,0)
 S ORSVC=0
"RTN","ORQQCN2",73,0)
 I '$D(@ORROOT) S @ORROOT@(1)="-1^No services found" Q
"RTN","ORQQCN2",74,0)
 F I=1:1  S ORSVC=$O(@ORROOT@(ORSVC)) Q:+ORSVC=0  D
"RTN","ORQQCN2",75,0)
 . S X=@ORROOT@(ORSVC)
"RTN","ORQQCN2",76,0)
 . S OI=$O(^ORD(101.43,"ID",$P(X,U,1)_";99CON",0))
"RTN","ORQQCN2",77,0)
 . I +OI>0 S @ORROOT@(ORSVC)=X_U_OI
"RTN","ORQQCN2",78,0)
 ;. E  K @ORROOT@(ORSVC)
"RTN","ORQQCN2",79,0)
 Q
"RTN","ORQQCN2",80,0)
STATUS(Y) ; Returns a list of statuses currently in use
"RTN","ORQQCN2",81,0)
 ;
"RTN","ORQQCN2",82,0)
 N GMRCORST
"RTN","ORQQCN2",83,0)
 S GMRCORST=0,Y(999)="999^OTHER^"
"RTN","ORQQCN2",84,0)
 F  S GMRCORST=$O(^ORD(100.01,GMRCORST)) Q:'+GMRCORST  D
"RTN","ORQQCN2",85,0)
 . I '$D(^GMR(123.1,"AC",GMRCORST)) S Y(999)=Y(999)_GMRCORST_","
"RTN","ORQQCN2",86,0)
 . E  S Y(GMRCORST)=GMRCORST_U_$P(^ORD(100.01,GMRCORST,0),U,1)
"RTN","ORQQCN2",87,0)
 Q
"RTN","ORQQCN2",88,0)
 ;
"RTN","ORQQCN2",89,0)
MEDRSLT(ORY,GMRCO) ;Returns Medicine results plus TIU results
"RTN","ORQQCN2",90,0)
 S ORY=$NA(^TMP("GMRCRSLT",$J))
"RTN","ORQQCN2",91,0)
 D RT^GMRCGUIA(GMRCO,ORY)
"RTN","ORQQCN2",92,0)
 Q
"RTN","ORQQCN2",93,0)
 ;
"RTN","ORQQCN2",94,0)
SHOW513(ORY,GMRCO)  ;CONSULTS SF513 DISPLAY IN GUI
"RTN","ORQQCN2",95,0)
 S ORY=$NA(^TMP("GMRC",$J,"SF513"))
"RTN","ORQQCN2",96,0)
 D GUI^GMRCP5(ORY,GMRCO)
"RTN","ORQQCN2",97,0)
 Q
"RTN","ORQQCN2",98,0)
PRT513(Y,GMRCO,GMRCCHT,GMRCDEV) ; Print SF513 to VistA device from GUI
"RTN","ORQQCN2",99,0)
 N ORSTATUS
"RTN","ORQQCN2",100,0)
 D EN^GMRCP5(GMRCO,GMRCCHT,GMRCDEV,.ORSTATUS)
"RTN","ORQQCN2",101,0)
 S Y=ORSTATUS
"RTN","ORQQCN2",102,0)
 Q
"RTN","ORQQCN2",103,0)
WPRT513(ORY,GMRCO,GMRCCHT) ;Print SF513 to Windows device from GUI
"RTN","ORQQCN2",104,0)
 N ZTQUEUED,ORHFS,ORSUB,ORIO,ORSTATUS,ROOT,ORHANDLE
"RTN","ORQQCN2",105,0)
 N IOM,IOSL,IOST,IOF,IOT,IOS
"RTN","ORQQCN2",106,0)
 S (ORSUB,ROOT)="ORDATA",ORIO="OR WINDOWS HFS",ORHANDLE="ORQQCN2"
"RTN","ORQQCN2",107,0)
 S ORY=$NA(^TMP(ORSUB,$J,1))
"RTN","ORQQCN2",108,0)
 S ORHFS=$$HFS^ORWRP()
"RTN","ORQQCN2",109,0)
 D HFSOPEN^ORWRP(ORHANDLE,ORHFS,"W")
"RTN","ORQQCN2",110,0)
 I POP D  Q
"RTN","ORQQCN2",111,0)
 . I $D(ROOT) D SETITEM^ORWRP(.ROOT,"ERROR: Unable to open HFS file for SF513 print")
"RTN","ORQQCN2",112,0)
 D IOVAR^ORWRP(.ORIO,,,"P-WINHFS80")
"RTN","ORQQCN2",113,0)
 N $ETRAP,$ESTACK
"RTN","ORQQCN2",114,0)
 S $ETRAP="D ERR^ORWRP Q"
"RTN","ORQQCN2",115,0)
 U IO
"RTN","ORQQCN2",116,0)
 D PRNT^GMRCP5A(GMRCO,0,0,GMRCCHT,0)
"RTN","ORQQCN2",117,0)
 D HFSCLOSE^ORWRP(ORHANDLE,ORHFS)
"RTN","ORQQCN2",118,0)
 Q
"RTN","ORQQCN2",119,0)
SIGFIND(Y,ORIEN,ORFL,ORCOM,ORALRT,ORALTO,ORDATE) ;Significant findings
"RTN","ORQQCN2",120,0)
 S Y=$$SFILE^GMRCGUIB(ORIEN,4,ORFL,"",DUZ,.ORCOM,ORALRT,ORALTO,ORDATE) ; "4"=SIG FIND ACTION
"RTN","ORQQCN2",121,0)
 Q
"RTN","ORQQCN2",122,0)
ADMCOMPL(Y,ORIEN,ORFL,ORCOM,ORRESP,ORALRT,ORALTO,ORDATE) ; Admin users
"RTN","ORQQCN2",123,0)
 ; Administrative complete action
"RTN","ORQQCN2",124,0)
 S Y=$$SFILE^GMRCGUIB(ORIEN,10,ORFL,ORRESP,DUZ,.ORCOM,ORALRT,ORALTO,ORDATE) ; "10"=Admin Complete
"RTN","ORQQCN2",125,0)
 Q
"RTN","ORQQCN2",126,0)
SVCLIST(ORY,FROM,DIR) ; Return a set of consult services in long list format
"RTN","ORQQCN2",127,0)
 ; .ORY=returned list, FROM=text to $O from, DIR=$O direction,
"RTN","ORQQCN2",128,0)
 N I,IEN,CNT,Y,ORTMP,ORSVC,ORSTR
"RTN","ORQQCN2",129,0)
 S I=0,CNT=44,ORSVC=""
"RTN","ORQQCN2",130,0)
 D SVCTREE^ORQQCN2(.Y,1)
"RTN","ORQQCN2",131,0)
 F I=1:1  S ORSVC=$P($G(Y(I)),U,2) Q:ORSVC=""  D
"RTN","ORQQCN2",132,0)
 . S ORTMP(ORSVC)=Y(I)
"RTN","ORQQCN2",133,0)
 F I=1:1  Q:I=CNT  S FROM=$O(ORTMP(FROM),DIR) Q:FROM=""  D
"RTN","ORQQCN2",134,0)
 . S ORSTR=ORTMP(FROM)
"RTN","ORQQCN2",135,0)
 . S ORY(I)=ORSTR
"RTN","ORQQCN2",136,0)
 Q
"RTN","ORQQCN2",137,0)
GETCTXT(Y,ORUSER) ; Returns current view context for user
"RTN","ORQQCN2",138,0)
 S Y=$$GET^XPAR("ALL","ORCH CONTEXT CONSULTS",1)
"RTN","ORQQCN2",139,0)
 Q
"RTN","ORQQCN2",140,0)
SAVECTXT(Y,ORCTXT) ; Save new view preferences for user
"RTN","ORQQCN2",141,0)
 N TMP
"RTN","ORQQCN2",142,0)
 S TMP=$$GET^XPAR(DUZ_";VA(200,","ORCH CONTEXT CONSULTS",1)
"RTN","ORQQCN2",143,0)
 I TMP'="" D  Q
"RTN","ORQQCN2",144,0)
 . D CHG^XPAR(DUZ_";VA(200,","ORCH CONTEXT CONSULTS",1,ORCTXT)
"RTN","ORQQCN2",145,0)
 D ADD^XPAR(DUZ_";VA(200,","ORCH CONTEXT CONSULTS",1,ORCTXT)
"RTN","ORQQCN2",146,0)
 Q
"RTN","ORQQCN2",147,0)
 ;
"RTN","ORQQCN2",148,0)
DEFRFREQ(ORY,ORSVC,ORDFN,RESOLVE) ;Return default reason for request for service
"RTN","ORQQCN2",149,0)
 ; ORSVC=pointer to file 123.5
"RTN","ORQQCN2",150,0)
 ; ORDFN=patient, if RESOLVE=1
"RTN","ORQQCN2",151,0)
 ; RESOLVE=1 to resolve boilerplate, 0 to not resolve
"RTN","ORQQCN2",152,0)
 Q:+$G(ORSVC)=0
"RTN","ORQQCN2",153,0)
 I +RESOLVE,(+$G(ORDFN)=0) Q
"RTN","ORQQCN2",154,0)
 S ORY=$NA(^TMP("GMRCREQ",$J))
"RTN","ORQQCN2",155,0)
 S:$G(RESOLVE)="" RESOLVE=0
"RTN","ORQQCN2",156,0)
 D GETDEF^GMRCDRFR(.ORY,ORSVC,ORDFN,RESOLVE)
"RTN","ORQQCN2",157,0)
 K @ORY@(0)
"RTN","ORQQCN2",158,0)
 ;K ^TMP("GMRCREQ",$J)
"RTN","ORQQCN2",159,0)
 Q
"RTN","ORQQCN2",160,0)
EDITDRFR(ORY,ORSVC) ; Allow editing of reason for request?
"RTN","ORQQCN2",161,0)
 S ORY=$$REAF^GMRCDRFR(ORSVC)
"RTN","ORQQCN2",162,0)
 Q
"RTN","ORQQCN2",163,0)
SVCIEN(ORY,ORIEN) ;Given orderable item file entry, return IEN in 123.5, OR -1 IF INACTIVE IN 101.43
"RTN","ORQQCN2",164,0)
 N X1
"RTN","ORQQCN2",165,0)
 S X1=^ORD(101.43,ORIEN,.1)
"RTN","ORQQCN2",166,0)
 I +X1,+X1<$$NOW^XLFDT S ORY=-1 Q
"RTN","ORQQCN2",167,0)
 S ORY=$P($$USID^ORWDXC(ORIEN),U,4)
"RTN","ORQQCN2",168,0)
 Q
"RTN","ORQQCN2",169,0)
PROVDX(ORY,ORIEN) ;Return provisional dx prompting info for service
"RTN","ORQQCN2",170,0)
 S ORY=$$PROVDX^GMRCUTL1(ORIEN)
"RTN","ORQQCN2",171,0)
 Q
"RTN","ORQQCN2",172,0)
PREREQ(ORY,ORSVC,ORDFN) ;Returns prequisites for ordering
"RTN","ORQQCN2",173,0)
 Q:(+$G(ORSVC)=0)!(+$G(ORDFN)=0)
"RTN","ORQQCN2",174,0)
 S ORY=$NA(^TMP("ORPREREQ",$J))
"RTN","ORQQCN2",175,0)
 D PREREQ^GMRCUTL1(.ORY,ORSVC,ORDFN,0)  ;0=RESOLVE OBJECTS
"RTN","ORQQCN2",176,0)
 K @ORY@(0)
"RTN","ORQQCN2",177,0)
 Q
"RTN","ORWDPS2")
0^3^B49768470
"RTN","ORWDPS2",1,0)
ORWDPS2 ; SLC/KCM - Pharmacy Calls for Windows Dialog [ 08/04/96  6:57 PM ] [1/03/02 6:37pm]
"RTN","ORWDPS2",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**85,116,125,131**;Dec 17, 1997
"RTN","ORWDPS2",3,0)
 ;
"RTN","ORWDPS2",4,0)
OISLCT(LST,OI,PSTYPE,ORVP) ; return for defaults for pharmacy orderable item
"RTN","ORWDPS2",5,0)
 N ILST,ORDOSE,ORWPSOI,ORWDOSES
"RTN","ORWDPS2",6,0)
 K ^TMP("PSJINS",$J),^TMP("PSJMR",$J),^TMP("PSJNOUN",$J),^TMP("PSJSCH",$J),^TMP("PSSDIN",$J)
"RTN","ORWDPS2",7,0)
 S ILST=0,ORWPSOI=+$P($G(^ORD(101.43,+OI,0)),U,2)
"RTN","ORWDPS2",8,0)
 D START^PSSJORDF(ORWPSOI,$S(PSTYPE="U":"I",1:"O")) ; dflt route, schedule, etc.
"RTN","ORWDPS2",9,0)
 D DOSE^PSSORUTL(.ORDOSE,ORWPSOI,PSTYPE,ORVP)       ; dflt doses
"RTN","ORWDPS2",10,0)
 D EN^PSSDIN(ORWPSOI)                               ; nfi text
"RTN","ORWDPS2",11,0)
 S ILST=ILST+1,LST(ILST)="~Medication"
"RTN","ORWDPS2",12,0)
 S ILST=ILST+1,LST(ILST)="d"_OI_U_$P(^ORD(101.43,OI,0),U)
"RTN","ORWDPS2",13,0)
 S ILST=ILST+1,LST(ILST)="~Verb"
"RTN","ORWDPS2",14,0)
 S ILST=ILST+1,LST(ILST)="d"_$P($G(ORDOSE("MISC")),U)
"RTN","ORWDPS2",15,0)
 S ILST=ILST+1,LST(ILST)="~Preposition"
"RTN","ORWDPS2",16,0)
 S ILST=ILST+1,LST(ILST)="d"_$P($G(ORDOSE("MISC")),U,2)
"RTN","ORWDPS2",17,0)
 S ILST=ILST+1,LST(ILST)="~PtInstr"   D PTINSTR
"RTN","ORWDPS2",18,0)
 S ILST=ILST+1,LST(ILST)="~AllDoses"  D ALLDOSE ; must do before DOSAGE
"RTN","ORWDPS2",19,0)
 S ILST=ILST+1,LST(ILST)="~Dosage"    D DOSAGE
"RTN","ORWDPS2",20,0)
 S ILST=ILST+1,LST(ILST)="~Dispense"  D DISPLST
"RTN","ORWDPS2",21,0)
 S ILST=ILST+1,LST(ILST)="~Route"     D ROUTE
"RTN","ORWDPS2",22,0)
 S ILST=ILST+1,LST(ILST)="~Schedule"  D SCHED
"RTN","ORWDPS2",23,0)
 S ILST=ILST+1,LST(ILST)="~Guideline" D GUIDE
"RTN","ORWDPS2",24,0)
 S ILST=ILST+1,LST(ILST)="~Message"   D OIMSG
"RTN","ORWDPS2",25,0)
 I PSTYPE="U" D
"RTN","ORWDPS2",26,0)
 . ; start, expires, next admin
"RTN","ORWDPS2",27,0)
 I PSTYPE="O" D
"RTN","ORWDPS2",28,0)
 . ; days supply, quantity, refills
"RTN","ORWDPS2",29,0)
 K ^TMP("PSJINS",$J),^TMP("PSJMR",$J),^TMP("PSJNOUN",$J),^TMP("PSJSCH",$J),^TMP("PSSDIN",$J)
"RTN","ORWDPS2",30,0)
 Q
"RTN","ORWDPS2",31,0)
 ;
"RTN","ORWDPS2",32,0)
PTINSTR ; from OISLCT, set up patient instructions
"RTN","ORWDPS2",33,0)
 N I
"RTN","ORWDPS2",34,0)
 S I=0 F  S I=$O(ORDOSE("PI",I)) Q:I'>0  S ILST=ILST+1,LST(ILST)="t"_ORDOSE("PI",I)
"RTN","ORWDPS2",35,0)
 Q
"RTN","ORWDPS2",36,0)
DOSAGE ; from OISLCT, set up the list of dosages
"RTN","ORWDPS2",37,0)
 ; LST(n)=iDrugName^Strength^NF^... (see BLDDOSE)
"RTN","ORWDPS2",38,0)
 ; must be called after ALLDOSE so ORWDOSES is set up
"RTN","ORWDPS2",39,0)
 N I
"RTN","ORWDPS2",40,0)
 S I=0 F  S I=$O(ORWDOSES(I)) Q:I'>0  S ILST=ILST+1,LST(ILST)=ORWDOSES(I)
"RTN","ORWDPS2",41,0)
 Q
"RTN","ORWDPS2",42,0)
DISPLST ; from OISLCT, set up list of dispense drugs
"RTN","ORWDPS2",43,0)
 ; DrugIEN^Strength^Units^Name^Split
"RTN","ORWDPS2",44,0)
 N DD
"RTN","ORWDPS2",45,0)
 S DD=0 F  S DD=$O(ORDOSE("DD",DD)) Q:'DD  D
"RTN","ORWDPS2",46,0)
 . S ILST=ILST+1
"RTN","ORWDPS2",47,0)
 . S LST(ILST)="i"_DD_U_$P(ORDOSE("DD",DD),U,5,6)_U_$P(ORDOSE("DD",DD),U)_U_$P(ORDOSE("DD",DD),U,11)
"RTN","ORWDPS2",48,0)
 Q
"RTN","ORWDPS2",49,0)
ALLDOSE ; from OISLCT, set up a list of all possible doses
"RTN","ORWDPS2",50,0)
 ; LST(n)=iDrugName^Strength^NF^... (see BLDDOSE)
"RTN","ORWDPS2",51,0)
 N I,J,CONJ,DD,DRUG,DDNM,LDOSE,TEXT,STREN,UD,COST,NF,ID,X
"RTN","ORWDPS2",52,0)
 S CONJ=$P($G(ORDOSE("MISC")),U,3),ORWDOSES=0
"RTN","ORWDPS2",53,0)
 S:$L(CONJ) CONJ=" "_CONJ_" " S:'$L(CONJ) CONJ=" "
"RTN","ORWDPS2",54,0)
 S I=0 F  S I=$O(ORDOSE(I)) Q:I'>0  D
"RTN","ORWDPS2",55,0)
 . S X=$$BLDDOSE(ORDOSE(I))
"RTN","ORWDPS2",56,0)
 . S ORWDOSES=ORWDOSES+1,ORWDOSES(ORWDOSES)=X
"RTN","ORWDPS2",57,0)
 . S ILST=ILST+1
"RTN","ORWDPS2",58,0)
 . S LST(ILST)="i"_$P(X,U,5)_U_$P($P(X,U,4),"&",6)_U_$P(X,U,4)
"RTN","ORWDPS2",59,0)
 . S J=0 F  S J=$O(ORDOSE(I,J)) Q:J'>0  D
"RTN","ORWDPS2",60,0)
 . . S X=$$BLDDOSE(ORDOSE(I,J))
"RTN","ORWDPS2",61,0)
 . . S ILST=ILST+1
"RTN","ORWDPS2",62,0)
 . . S LST(ILST)="i"_$P(X,U,5)_U_$P($P(X,U,4),"&",6)_U_$P(X,U,4)
"RTN","ORWDPS2",63,0)
 Q
"RTN","ORWDPS2",64,0)
BLDDOSE(X)  ; build dose info where X is ORDOSE node
"RTN","ORWDPS2",65,0)
 ; from ALLDOSE
"RTN","ORWDPS2",66,0)
 ;    X=TotalDose^Units^U/D^Noun^LocalDose^DispDrugIEN
"RTN","ORWDPS2",67,0)
 ;    Y=iDrugName^Strength^NF^TDose&Units&U/D&Noun&LDose&Drug&Stren&Units^
"RTN","ORWDPS2",68,0)
 ;      DoseText^CostText^MaxRefills^DispUnits^CanSplit
"RTN","ORWDPS2",69,0)
 ; DRUG=Name^Cost^NF^DispUnit^Strength^Units^DoseForm^MaxRefills^
"RTN","ORWDPS2",70,0)
 ; No TotalDose,           use LocalDose
"RTN","ORWDPS2",71,0)
 ; TotalDose & Strength,   use LocalDose+Conjunction+Strength+Units
"RTN","ORWDPS2",72,0)
 ; TotalDose, No Strength, use LocalDose+Conjunction+DispenseName
"RTN","ORWDPS2",73,0)
 S DD=+$P(X,U,6),DRUG=ORDOSE("DD",DD),DDNM=$P(DRUG,U),ID=$P(X,U,1,6)
"RTN","ORWDPS2",74,0)
 S LDOSE=$P(X,U,5),TEXT=LDOSE,STREN=$P(DRUG,U,5)_$P(DRUG,U,6)
"RTN","ORWDPS2",75,0)
 S $P(ID,U,7)=$P(DRUG,U,5) S $P(ID,U,8)=$P(DRUG,U,6) ; add strength
"RTN","ORWDPS2",76,0)
 I '$L($P(X,U)),$L($P(DRUG,U,5))  S TEXT=TEXT_CONJ_STREN
"RTN","ORWDPS2",77,0)
 I '$L($P(X,U)),'$L($P(DRUG,U,5)) S TEXT=TEXT_CONJ_$P(DRUG,U)
"RTN","ORWDPS2",78,0)
 S UD=$P(X,U,3),COST=$P(X,U,7),NF=$S($P(DRUG,U,3):"NF",1:"")
"RTN","ORWDPS2",79,0)
 ;I UD S COST="$"_$J(UD*$P(DRUG,U,2),1,3) ;_" per "_UD_" "_$P(X,U,4)
"RTN","ORWDPS2",80,0)
 S Y="i"_DDNM_U_STREN_U_NF_U_$TR(ID,U,"&")_U_TEXT_U_COST_U_$P(DRUG,U,8)_U_$P(DRUG,U,4)
"RTN","ORWDPS2",81,0)
 Q Y
"RTN","ORWDPS2",82,0)
ROUTE ; from OISLCT, get list of routes for the drug form
"RTN","ORWDPS2",83,0)
 ; ** NEED BOTH ABBREVIATION & NAME IN LIST BOX
"RTN","ORWDPS2",84,0)
 N I,CNT,ABBR,IEN,ROUT,EXP,X
"RTN","ORWDPS2",85,0)
 S I="" F  S I=$O(^TMP("PSJMR",$J,I)) Q:I=""  D
"RTN","ORWDPS2",86,0)
 . S X=^TMP("PSJMR",$J,I)
"RTN","ORWDPS2",87,0)
 . S ROUT=$P(X,U),ABBR=$P(X,U,2),IEN=$P(X,U,3),EXP=$P(X,U,4)
"RTN","ORWDPS2",88,0)
 . S ILST=ILST+1,LST(ILST)="i"_IEN_U_ROUT_U_ABBR_U_EXP_U_$P(X,U,5)
"RTN","ORWDPS2",89,0)
 . I I=1,IEN S ILST=ILST+1,LST(ILST)="d"_IEN_U_ROUT ;_U_ABBR ; assume first always default
"RTN","ORWDPS2",90,0)
 ; add abbreviations to list of routes, commented out for 15.5 on
"RTN","ORWDPS2",91,0)
 ; S I="" F  S I=$O(^TMP("PSJMR",$J,I)) Q:I=""  D
"RTN","ORWDPS2",92,0)
 ; . S X=^TMP("PSJMR",$J,I)
"RTN","ORWDPS2",93,0)
 ; . S ROUT=$P(X,U),ABBR=$P(X,U,2),IEN=$P(X,U,3),EXP=$P(X,U,4)
"RTN","ORWDPS2",94,0)
 ; . I $L(ABBR),(ABBR'=ROUT) S ILST=ILST+1,LST(ILST)="i"_IEN_U_ABBR_" ("_ROUT_")"_U_ABBR_U_EXP
"RTN","ORWDPS2",95,0)
 Q
"RTN","ORWDPS2",96,0)
SCHED ; from OISLCT, get default schedule for this medication
"RTN","ORWDPS2",97,0)
 I $L($G(^TMP("PSJSCH",$J))) S ILST=ILST+1,LST(ILST)="d"_^($J)
"RTN","ORWDPS2",98,0)
 Q
"RTN","ORWDPS2",99,0)
GUIDE ; from OISLCT, get guidelines associated with this medication
"RTN","ORWDPS2",100,0)
 N IEN,I
"RTN","ORWDPS2",101,0)
 S IEN=0 F  S IEN=$O(^TMP("PSSDIN",$J,"OI",ORWPSOI,IEN)) Q:'IEN  D
"RTN","ORWDPS2",102,0)
 . S I=0 F  S I=$O(^TMP("PSSDIN",$J,"OI",ORWPSOI,IEN,I)) Q:'I  D
"RTN","ORWDPS2",103,0)
 . . S ILST=ILST+1,LST(ILST)="t"_^TMP("PSSDIN",$J,"OI",ORWPSOI,IEN,I)
"RTN","ORWDPS2",104,0)
 Q
"RTN","ORWDPS2",105,0)
OIMSG ; from OISLCT, get the orderable item message for this medication
"RTN","ORWDPS2",106,0)
 S I=0 F  S I=$O(^ORD(101.43,OI,8,I)) Q:I'>0  S ILST=ILST+1,LST(ILST)="t"_^(I,0)
"RTN","ORWDPS2",107,0)
 Q
"RTN","ORWDPS2",108,0)
ADMIN(REC,DFN,SCH,OI,LOC)       ; return administration time info
"RTN","ORWDPS2",109,0)
 ; REC: StartText^StartTime^Duration^FirstAdmin
"RTN","ORWDPS2",110,0)
 S OI=+$P($G(^ORD(101.43,+OI,0)),U,2)
"RTN","ORWDPS2",111,0)
 S LOC=+$G(^SC(LOC,42)),REC=""
"RTN","ORWDPS2",112,0)
 I $L($G(^DPT(DFN,.1))) S REC=$$FIRST^ORCDPS3(DFN,LOC,OI,SCH)
"RTN","ORWDPS2",113,0)
 Q
"RTN","ORWDPS2",114,0)
REQST(VAL,DFN,SCH,OI,LOC,TXT)   ; return requested start time
"RTN","ORWDPS2",115,0)
 ; VAL: FirstAdmin time
"RTN","ORWDPS2",116,0)
 S VAL=""
"RTN","ORWDPS2",117,0)
 Q:'$L($G(SCH))  Q:'$G(OI)
"RTN","ORWDPS2",118,0)
 S OI=+$P($G(^ORD(101.43,+OI,0)),U,2)
"RTN","ORWDPS2",119,0)
 S LOC=+$G(^SC(LOC,42))
"RTN","ORWDPS2",120,0)
 S VAL=$P($$RESOLVE^PSJORPOE(DFN,SCH,OI,TXT,LOC),U,2)
"RTN","ORWDPS2",121,0)
 Q
"RTN","ORWDPS2",122,0)
DAY2QTY(VAL,DAY,UPD,SCH,DUR,PAT,DRG)        ; return qty for days supply
"RTN","ORWDPS2",123,0)
 ; VAL: quantity
"RTN","ORWDPS2",124,0)
 N ORWX,I,X,ADUR
"RTN","ORWDPS2",125,0)
 S ORWX("DAYS SUPPLY")=DAY
"RTN","ORWDPS2",126,0)
 S ORWX("PATIENT")=PAT
"RTN","ORWDPS2",127,0)
 I DRG S ORWX("DRUG")=DRG
"RTN","ORWDPS2",128,0)
 F I=1:1:$L(UPD,U)-1 D
"RTN","ORWDPS2",129,0)
 . S ORWX("DOSE ORDERED",I)=$P(UPD,U,I)
"RTN","ORWDPS2",130,0)
 . S ORWX("SCHEDULE",I)=$P(SCH,U,I)
"RTN","ORWDPS2",131,0)
 . S ADUR=$P(DUR,U,I),X=+ADUR_$E($P(ADUR," ",2))
"RTN","ORWDPS2",132,0)
 . I $L(X) S ORWX("DURATION",I)=X
"RTN","ORWDPS2",133,0)
 . S X=$E($P(ADUR,"~",2))
"RTN","ORWDPS2",134,0)
 . I $L(X) S ORWX("CONJUNCTION",I)=X
"RTN","ORWDPS2",135,0)
 D QTYX^PSOSIG(.ORWX)
"RTN","ORWDPS2",136,0)
 S VAL=$G(ORWX("QTY"))
"RTN","ORWDPS2",137,0)
 Q
"RTN","ORWDPS2",138,0)
QTY2DAY(VAL,QTY,UPD,SCH,DUR,PAT,DRG)        ; return days supply given quantity
"RTN","ORWDPS2",139,0)
 ; VAL: days supply
"RTN","ORWDPS2",140,0)
 N ORWX,I,X,ADUR
"RTN","ORWDPS2",141,0)
 S ORWX("QTY")=QTY
"RTN","ORWDPS2",142,0)
 S ORWX("PATIENT")=PAT
"RTN","ORWDPS2",143,0)
 I DRG S ORWX("DRUG")=DRG
"RTN","ORWDPS2",144,0)
 F I=1:1:$L(UPD,U)-1 D
"RTN","ORWDPS2",145,0)
 . S ORWX("DOSE ORDERED",I)=$P(UPD,U,I)
"RTN","ORWDPS2",146,0)
 . S ORWX("SCHEDULE",I)=$P(SCH,U,I)
"RTN","ORWDPS2",147,0)
 . S ADUR=$P(DUR,U,I),X=+ADUR_$E($P(ADUR," ",2))
"RTN","ORWDPS2",148,0)
 . I $L(X) S ORWX("DURATION",I)=X
"RTN","ORWDPS2",149,0)
 . S X=$E($P(ADUR,"~",2))
"RTN","ORWDPS2",150,0)
 . I $L(X) S ORWX("CONJUNCTION",I)=X
"RTN","ORWDPS2",151,0)
 D QTYX^PSOSIG(.ORWX)
"RTN","ORWDPS2",152,0)
 S VAL=$G(ORWX("DAYS SUPPLY"))
"RTN","ORWDPS2",153,0)
 Q
"RTN","ORWDPS2",154,0)
MAXREF(VAL,PAT,DRG,SUP,OI,OUT)      ; return the maximum number of refills
"RTN","ORWDPS2",155,0)
 ; PAT=Patient DFN, DRG=ptr50, SUP=days supply, OI=orderable item
"RTN","ORWDPS2",156,0)
 ; VAL: maximum refills allowed
"RTN","ORWDPS2",157,0)
 N ORWX
"RTN","ORWDPS2",158,0)
 S ORWX("PATIENT")=PAT
"RTN","ORWDPS2",159,0)
 I $G(DRG) S ORWX("DRUG")=+DRG
"RTN","ORWDPS2",160,0)
 I $G(SUP) S ORWX("DAYS SUPPLY")=SUP
"RTN","ORWDPS2",161,0)
 I $G(OI)  S ORWX("ITEM")=OI
"RTN","ORWDPS2",162,0)
 I $G(OUT) S ORWX("DISCHARGE")=1
"RTN","ORWDPS2",163,0)
 D MAX^PSOSIGDS(.ORWX)
"RTN","ORWDPS2",164,0)
 S VAL=$G(ORWX("MAX"))
"RTN","ORWDPS2",165,0)
 Q
"RTN","ORWDPS2",166,0)
SCHREQ(VAL,OI,RTE,DRG)  ; return 1 if schedule is required
"RTN","ORWDPS2",167,0)
 ; OI=orderable item, RTE=ptr route, DRG=ptr dispense drug
"RTN","ORWDPS2",168,0)
 S VAL=1
"RTN","ORWDPS2",169,0)
 Q:'$G(OI)  Q:'$G(RTE)
"RTN","ORWDPS2",170,0)
 S VAL=$$SCHREQ^PSJORPOE(RTE,OI,+$G(DRG))
"RTN","ORWDPS2",171,0)
 Q
"RTN","ORWDPS2",172,0)
CHKPI(VAL,ODIFN) ; return pre-existing patient instruct
"RTN","ORWDPS2",173,0)
 N IDNUM,IDPI
"RTN","ORWDPS2",174,0)
 S (IDNUM,IDPI)=0,VAL=""
"RTN","ORWDPS2",175,0)
 I '$D(^OR(100,ODIFN,4.5,"ID","PI")) S VAL="" Q
"RTN","ORWDPS2",176,0)
 F  S IDNUM=$O(^OR(100,ODIFN,4.5,"ID","PI",IDNUM)) Q:'IDNUM  D
"RTN","ORWDPS2",177,0)
 . F  S IDPI=$O(^OR(100,ODIFN,4.5,IDNUM,2,IDPI)) Q:'IDPI  D
"RTN","ORWDPS2",178,0)
 .. S VAL=VAL_^OR(100,ODIFN,4.5,IDNUM,2,IDPI,0)
"RTN","ORWDPS2",179,0)
 K IDNUM,IDPI
"RTN","ORWDPS2",180,0)
 Q
"RTN","ORWDPS2",181,0)
CHKGRP(VAL,ORIFN) ;
"RTN","ORWDPS2",182,0)
 ;If order belong to Inpatient Med Order Group: return 1
"RTN","ORWDPS2",183,0)
 ;Otherwise, return 0
"RTN","ORWDPS2",184,0)
 S VAL=0
"RTN","ORWDPS2",185,0)
 I '$L(ORIFN) Q
"RTN","ORWDPS2",186,0)
 N UDGRP,IPGRP,ODGRP,ODID
"RTN","ORWDPS2",187,0)
 S ODID=+ORIFN
"RTN","ORWDPS2",188,0)
 Q:ODID<1
"RTN","ORWDPS2",189,0)
 S (UDGRP,IPGRP,ODGRP)=0
"RTN","ORWDPS2",190,0)
 S UDGRP=$O(^ORD(100.98,"B","UD RX",UDGRP))
"RTN","ORWDPS2",191,0)
 S IPGRP=$O(^ORD(100.98,"B","INPATIENT MEDICATIONS",IPGRP))
"RTN","ORWDPS2",192,0)
 S:IPGRP=0 IPGRP=$O(^ORD(100.98,"B","I RX",IPGRP))
"RTN","ORWDPS2",193,0)
 I $L($G(^OR(100,ODID,0)))<1 Q
"RTN","ORWDPS2",194,0)
 S ODGRP=$P(^OR(100,ODID,0),U,11)
"RTN","ORWDPS2",195,0)
 I UDGRP=ODGRP S VAL=1
"RTN","ORWDPS2",196,0)
 I IPGRP=ODGRP S VAL=1
"RTN","ORWDPS2",197,0)
 K UDGRP,ODGRP,IPGRP,ODID
"RTN","ORWDPS2",198,0)
 Q
"RTN","ORWDPS2",199,0)
QOGRP(VAL,QOIFN) ;
"RTN","ORWDPS2",200,0)
 ;If quick order belong to Inpatient Med Order Group: return 1
"RTN","ORWDPS2",201,0)
 ;Otherwise, return 0
"RTN","ORWDPS2",202,0)
 S VAL=0
"RTN","ORWDPS2",203,0)
 I '$L(QOIFN) Q
"RTN","ORWDPS2",204,0)
 N UDGRP,IPGRP,QOGRP,QOID
"RTN","ORWDPS2",205,0)
 S QOID=+QOIFN
"RTN","ORWDPS2",206,0)
 Q:QOID<1
"RTN","ORWDPS2",207,0)
 S (UDGRP,IPGRP,QOGRP)=0
"RTN","ORWDPS2",208,0)
 S UDGRP=$O(^ORD(100.98,"B","UD RX",UDGRP))
"RTN","ORWDPS2",209,0)
 S IPGRP=$O(^ORD(100.98,"B","INPATIENT MEDICATIONS",IPGRP))
"RTN","ORWDPS2",210,0)
 S:IPGRP=0 IPGRP=$O(^ORD(100.98,"B","I RX",IPGRP))
"RTN","ORWDPS2",211,0)
 I $L($G(^ORD(101.41,QOID,0)))<1 Q
"RTN","ORWDPS2",212,0)
 S QOGRP=$P(^ORD(101.41,QOID,0),U,5)
"RTN","ORWDPS2",213,0)
 I UDGRP=QOGRP S VAL=1
"RTN","ORWDPS2",214,0)
 I IPGRP=QOGRP S VAL=1
"RTN","ORWDPS2",215,0)
 K UDGRP,QOGRP,QOID,IPGRP
"RTN","ORWDPS2",216,0)
 Q
"RTN","ORWDPS4")
0^4^B9952247
"RTN","ORWDPS4",1,0)
ORWDPS4 ;; SLC/JDL - Order Dialogs CO-PAY;10:42 AM  6 Sep 1998 ;11/8/01  16:17 [12/31/01 6:36pm]
"RTN","ORWDPS4",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**116,125,131**;Dec 17, 1997
"RTN","ORWDPS4",3,0)
 ;
"RTN","ORWDPS4",4,0)
CPLST(TEST,PTIFN,ORIFNS) ; --Get CP questions
"RTN","ORWDPS4",5,0)
 N ORIFN,ORDA,ORI,ORPSO,CPX
"RTN","ORWDPS4",6,0)
 S ORI=0,ORPSO=+$O(^DIC(9.4,"C","PSO",0))
"RTN","ORWDPS4",7,0)
 F  S ORI=$O(ORIFNS(ORI)) Q:'ORI  D
"RTN","ORWDPS4",8,0)
 .S ORIFN=$P($P(ORIFNS(ORI),U,1),";",1),ORDA=$P($P(ORIFNS(ORI),U,1),";",2)
"RTN","ORWDPS4",9,0)
 .I $P(^OR(100,ORIFN,0),U,14)=ORPSO D
"RTN","ORWDPS4",10,0)
 ..S CPX=$$SC(ORIFN)
"RTN","ORWDPS4",11,0)
 ..I $L(CPX)>1 S TEST(ORIFN)=ORIFN_";"_ORDA_CPX
"RTN","ORWDPS4",12,0)
 K PTIFN,ORIFN,ORDA,ORI,CPX
"RTN","ORWDPS4",13,0)
 Q
"RTN","ORWDPS4",14,0)
 ;
"RTN","ORWDPS4",15,0)
CPINFO(Y,ORINFO) ; -- Save reponses to CP questions
"RTN","ORWDPS4",16,0)
 Q:'$D(ORINFO)
"RTN","ORWDPS4",17,0)
 N ORIFN,ORI,ORX,ANS S ORI=0
"RTN","ORWDPS4",18,0)
 F  S ORI=$O(ORINFO(ORI)) Q:'ORI  D
"RTN","ORWDPS4",19,0)
 .S ORIFN=$P($P(ORINFO(ORI),U,1),";",1)
"RTN","ORWDPS4",20,0)
 .S ANS=$P(ORINFO(ORI),U,2)
"RTN","ORWDPS4",21,0)
 .D REFMT(.ORX,ANS)
"RTN","ORWDPS4",22,0)
 .D SC^ORCSAVE2(.ORX,ORIFN)
"RTN","ORWDPS4",23,0)
 S Y=1
"RTN","ORWDPS4",24,0)
 K ORIFN,ORX,ORI,ANS
"RTN","ORWDPS4",25,0)
 Q
"RTN","ORWDPS4",26,0)
 ;
"RTN","ORWDPS4",27,0)
SC(ORIFN) ; -- Dialog validation, to ask CP questions
"RTN","ORWDPS4",28,0)
 ;Expects ORIFN and ORDA
"RTN","ORWDPS4",29,0)
 ;
"RTN","ORWDPS4",30,0)
 N DR S DR=""
"RTN","ORWDPS4",31,0)
 I '$L($T(SCNEW^PSOCP))!('$G(ORIFN))!('$G(ORDA)) Q DR
"RTN","ORWDPS4",32,0)
 I $P($G(^OR(100,ORIFN,8,ORDA,0)),U,2)'="NW" Q DR
"RTN","ORWDPS4",33,0)
 ;
"RTN","ORWDPS4",34,0)
 N OR3,ORDRUG,ORENEW,ORX,I,X,Y,CPNODE,ASC,AAO,AIR,AEC,AMST,AHNC
"RTN","ORWDPS4",35,0)
 S ORX=""
"RTN","ORWDPS4",36,0)
 ;--Only new, renew, edited, copied outpatient order can continue...
"RTN","ORWDPS4",37,0)
 S OR3=$G(^OR(100,ORIFN,3)),X=$P(OR3,U,11) I (X'=0)&((X'=2)&(X'=1)) Q DR
"RTN","ORWDPS4",38,0)
 I (X=1)&($D(^OR(100,ORIFN,5))=0) Q DR
"RTN","ORWDPS4",39,0)
 I $D(^OR(100,ORIFN,5))>0 D
"RTN","ORWDPS4",40,0)
 .S CPNODE=$G(^OR(100,ORIFN,5))
"RTN","ORWDPS4",41,0)
 .S ASC=$S($L($P(CPNODE,"^",1)):"SC;"_$P(CPNODE,"^",1),1:"")
"RTN","ORWDPS4",42,0)
 .S DR=$S($L(ASC):DR_U_ASC,1:DR)
"RTN","ORWDPS4",43,0)
 .S AAO=$S($L($P(CPNODE,"^",3)):"AO;"_$P(CPNODE,"^",3),1:"")
"RTN","ORWDPS4",44,0)
 .S DR=$S($L(AAO):DR_U_AAO,1:DR)
"RTN","ORWDPS4",45,0)
 .S AIR=$S($L($P(CPNODE,"^",4)):"IR;"_$P(CPNODE,"^",4),1:"")
"RTN","ORWDPS4",46,0)
 .S DR=$S($L(AIR):DR_U_AIR,1:DR)
"RTN","ORWDPS4",47,0)
 .S AEC=$S($L($P(CPNODE,"^",5)):"EC;"_$P(CPNODE,"^",5),1:"")
"RTN","ORWDPS4",48,0)
 .S DR=$S($L(AEC):DR_U_AEC,1:DR)
"RTN","ORWDPS4",49,0)
 .S AMST=$S($L($P(CPNODE,"^",2)):"MST;"_$P(CPNODE,"^",2),1:"")
"RTN","ORWDPS4",50,0)
 .S DR=$S($L(AMST):DR_U_AMST,1:DR)
"RTN","ORWDPS4",51,0)
 .S AHNC=$S($L($P(CPNODE,"^",6)):"HNC;"_$P(CPNODE,"^",6),1:"")
"RTN","ORWDPS4",52,0)
 .S DR=$S($L(AHNC):DR_U_AHNC,1:DR)
"RTN","ORWDPS4",53,0)
 .D CPCOMP(.DR)
"RTN","ORWDPS4",54,0)
 .K ASC,AAO,AIR,AEC,AMST,AHNC,CPNODE
"RTN","ORWDPS4",55,0)
 I $L(DR)>0 Q DR
"RTN","ORWDPS4",56,0)
 I X=2 S Y=$P(OR3,U,5),ORENEW=$G(^OR(100,Y,4)) ;get PS# if renewal
"RTN","ORWDPS4",57,0)
 S ORDRUG=$$VALUE^ORCSAVE2(ORIFN,"DRUG")
"RTN","ORWDPS4",58,0)
 D SCNEW^PSOCP(.ORX,+PTIFN,ORDRUG,$G(ORENEW)) I '$D(ORX) Q DR
"RTN","ORWDPS4",59,0)
 F I="SC","AO","IR","EC","MST","HNC" D
"RTN","ORWDPS4",60,0)
 . I $D(ORX(I)) S DR=DR_U_I_$S($L(ORX(I)):";"_ORX(I),1:"")
"RTN","ORWDPS4",61,0)
 Q DR
"RTN","ORWDPS4",62,0)
REFMT(ORX,INFO) ;
"RTN","ORWDPS4",63,0)
 ;"U": Unchecked ("NO") 
"RTN","ORWDPS4",64,0)
 ;"C": Checked ("YES")
"RTN","ORWDPS4",65,0)
 ;"N" : Question not asked
"RTN","ORWDPS4",66,0)
 N RST,RST1
"RTN","ORWDPS4",67,0)
 S RST=""
"RTN","ORWDPS4",68,0)
 F I=1:1:$L(INFO)  S RST=RST_U_$S($E(INFO,I)="U":0,$E(INFO,I)="C":1,1:"")
"RTN","ORWDPS4",69,0)
 S RST1=$E(RST,2,$L(RST))
"RTN","ORWDPS4",70,0)
 S ORX("SC")=$P(RST1,U,1)
"RTN","ORWDPS4",71,0)
 S ORX("MST")=$P(RST1,U,5)
"RTN","ORWDPS4",72,0)
 S ORX("AO")=$P(RST1,U,2)
"RTN","ORWDPS4",73,0)
 S ORX("IR")=$P(RST1,U,3)
"RTN","ORWDPS4",74,0)
 S ORX("EC")=$P(RST1,U,4)
"RTN","ORWDPS4",75,0)
 S ORX("HNC")=$P(RST1,U,6)
"RTN","ORWDPS4",76,0)
 K RST,RST1
"RTN","ORWDPS4",77,0)
 Q
"RTN","ORWDPS4",78,0)
CPCOMP(PREX) ; -- Compare the existed exemptions with new exemption questions
"RTN","ORWDPS4",79,0)
 N ORX1,ORDRUG1,CPI
"RTN","ORWDPS4",80,0)
 S ORDRUG1=$$VALUE^ORCSAVE2(ORIFN,"DRUG")
"RTN","ORWDPS4",81,0)
 D SCNEW^PSOCP(.ORX1,+PTIFN,ORDRUG1,$G(ORENEW)) I '$D(ORX1) Q
"RTN","ORWDPS4",82,0)
 F CPI="SC","AO","IR","EC","MST","HNC" D
"RTN","ORWDPS4",83,0)
 . I $D(ORX1(CPI)) D
"RTN","ORWDPS4",84,0)
 . . I PREX'[CPI S PREX=PREX_U_CPI
"RTN","ORWDPS4",85,0)
 K ORX1,ORDRUG1,CPI
"RTN","ORWDPS4",86,0)
 Q
"RTN","ORWDX")
0^5^B70311882
"RTN","ORWDX",1,0)
ORWDX ; SLC/KCM/REV/JLI - Utilities for Order Dialogs ;12/14/01  15:06 [12/31/01 6:36pm]
"RTN","ORWDX",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,85,125,131**;Dec 17, 1997
"RTN","ORWDX",3,0)
 ;
"RTN","ORWDX",4,0)
NXT() ; -- returns next available index in return data array
"RTN","ORWDX",5,0)
 S ILST=ILST+1
"RTN","ORWDX",6,0)
 Q ILST
"RTN","ORWDX",7,0)
 ;
"RTN","ORWDX",8,0)
ORDITM(Y,FROM,DIR,XREF) ; Return a subset of orderable items
"RTN","ORWDX",9,0)
 ; .Return Array, Starting Text, Direction, Cross Reference (S.xxx)
"RTN","ORWDX",10,0)
 ; ^ORD(101.43,"S.xxx",UpperCase,DA)=Mne^MixedCase^InactvDt^.01IfMne
"RTN","ORWDX",11,0)
 ; Y(n)=IEN^.01 Name^.01 Name  -or-  IEN^Synonym <.01 Name>^.01 Name
"RTN","ORWDX",12,0)
 N I,IEN,CNT,X,DTXT,CURTM
"RTN","ORWDX",13,0)
 S I=0,CNT=44,CURTM=$$NOW^XLFDT
"RTN","ORWDX",14,0)
 F  Q:I'<CNT  S FROM=$O(^ORD(101.43,XREF,FROM),DIR) Q:FROM=""  D
"RTN","ORWDX",15,0)
 . S IEN="" F  S IEN=$O(^ORD(101.43,XREF,FROM,IEN),DIR) Q:'IEN  D
"RTN","ORWDX",16,0)
 . . S X=^ORD(101.43,XREF,FROM,IEN)
"RTN","ORWDX",17,0)
 . . I +$P(X,U,3),$P(X,U,3)<CURTM Q
"RTN","ORWDX",18,0)
 . . S I=I+1
"RTN","ORWDX",19,0)
 . . I 'X S Y(I)=IEN_U_$P(X,U,2)_U_$P(X,U,2)
"RTN","ORWDX",20,0)
 . . E  S Y(I)=IEN_U_$P(X,U,2)_$C(9)_"<"_$P(X,U,4)_">"_U_$P(X,U,4)
"RTN","ORWDX",21,0)
 Q
"RTN","ORWDX",22,0)
ODITMBC(Y,XREF,ODLST) ; --Return orderable items info based on ItemIen
"RTN","ORWDX",23,0)
 N CNT,NM,XRF
"RTN","ORWDX",24,0)
 S CNT=0,NM=0,XRF=XREF
"RTN","ORWDX",25,0)
 F  S CNT=$O(ODLST(CNT)) Q:'CNT  D FNDINFO(.Y,ODLST(CNT))
"RTN","ORWDX",26,0)
 Q
"RTN","ORWDX",27,0)
FNDINFO(Y,ODIEN) ;
"RTN","ORWDX",28,0)
 N ODI,CRTM,FRM,XX
"RTN","ORWDX",29,0)
 S FRM="",CRTM=$$NOW^XLFDT
"RTN","ORWDX",30,0)
 F  S FRM=$O(^ORD(101.43,XRF,FRM)) Q:FRM=""  D
"RTN","ORWDX",31,0)
 . S ODI=0 F  S ODI=$O(^ORD(101.43,XRF,FRM,ODI)) Q:'ODI  D
"RTN","ORWDX",32,0)
 .. S XX=^ORD(101.43,XRF,FRM,ODI)
"RTN","ORWDX",33,0)
 .. I +$P(XX,U,3),$P(XX,U,3)<CRTM Q
"RTN","ORWDX",34,0)
 .. I ODI=ODIEN D
"RTN","ORWDX",35,0)
 ... S NM=NM+1
"RTN","ORWDX",36,0)
 ... I 'XX S Y(NM)=ODIEN_U_$P(XX,U,2)_U_$P(XX,U,2)
"RTN","ORWDX",37,0)
 ... E  S Y(NM)=ODIEN_U_$P(XX,U,2)_$C(9)_"<"_$P(XX,U,4)_">"_U_$P(XX,U,4)
"RTN","ORWDX",38,0)
 Q
"RTN","ORWDX",39,0)
DLGDEF(LST,DLG) ; Return format mapping for a dialog
"RTN","ORWDX",40,0)
 ; LST(n): PrmtID^PrmtIEN^FmtSeq^Fmt^Omit^Lead^Trail^NwLn^Wrap^Chld^IsChld
"RTN","ORWDX",41,0)
 N I,IEN,ILST,X0,X2,XW  S ILST=0
"RTN","ORWDX",42,0)
 I $O(^ORD(101.41,"AB",DLG,0))>0 S DLG=$O(^ORD(101.41,"AB",DLG,0))  ;kcm
"RTN","ORWDX",43,0)
 E  S DLG=$O(^ORD(101.41,"B",DLG,0))                                ;kcm
"RTN","ORWDX",44,0)
 Q:'DLG                                                             ;kcm
"RTN","ORWDX",45,0)
 S I=0 F  S I=$O(^ORD(101.41,DLG,10,I)) Q:I'>0  D
"RTN","ORWDX",46,0)
 . S X0=$G(^ORD(101.41,DLG,10,I,0)),X2=$G(^(2)),IEN=+$P(X0,U,2)
"RTN","ORWDX",47,0)
 . S ILST=ILST+1,LST(ILST)=U_IEN_U_$P(X2,U,1,7)
"RTN","ORWDX",48,0)
 . I $P(X0,U,11) S $P(LST(ILST),U,11)=1
"RTN","ORWDX",49,0)
 . S $P(LST(ILST),U)=$P($G(^ORD(101.41,IEN,1)),U,3)
"RTN","ORWDX",50,0)
 . I $P($G(^ORD(101.41,IEN,0)),U)="OR GTX ADDITIVE" S $P(LST(ILST),U)="ADDITIVE"
"RTN","ORWDX",51,0)
 . I $L($P(LST(ILST),U))=0 S $P(LST(ILST),U)="ID"_IEN
"RTN","ORWDX",52,0)
 . I $D(^ORD(101.41,DLG,10,"DAD",IEN)) D
"RTN","ORWDX",53,0)
 . . N SEQ,DA,CHILD S CHILD=""
"RTN","ORWDX",54,0)
 . . S SEQ=0 F  S SEQ=$O(^ORD(101.41,DLG,10,"DAD",IEN,SEQ)) Q:'SEQ  D
"RTN","ORWDX",55,0)
 . . . S DA=0 F  S DA=$O(^ORD(101.41,DLG,10,"DAD",IEN,SEQ,DA)) Q:'DA  D
"RTN","ORWDX",56,0)
 . . . . S CHILD=CHILD_+$P($G(^ORD(101.41,DLG,10,DA,0)),U,2)_"~"
"RTN","ORWDX",57,0)
 . . S $P(LST(ILST),U,10)=CHILD
"RTN","ORWDX",58,0)
 Q
"RTN","ORWDX",59,0)
DLGQUIK(LST,QO) ; return responses for a quick order  (NO LONGER USED)
"RTN","ORWDX",60,0)
 D LOADRSP(.LST,QO)
"RTN","ORWDX",61,0)
 Q
"RTN","ORWDX",62,0)
LOADRSP(LST,RSPID)      ; Load responses from 101.41 or 100
"RTN","ORWDX",63,0)
 ; RSPID:  C123456;1-3243 = cached copy,   134-3234 = cached quick
"RTN","ORWDX",64,0)
 ;         X123456;1      = change order,  134      = quick dialog
"RTN","ORWDX",65,0)
 ; LST(n): ~DlgIEN^Instance^ID
"RTN","ORWDX",66,0)
 ;         iinternal
"RTN","ORWDX",67,0)
 ;         eexternal  or  twp text
"RTN","ORWDX",68,0)
 N I,J,DLG,INST,ID,VAL,ILST,ROOT S ROOT=""
"RTN","ORWDX",69,0)
 I RSPID["-"     S ROOT="^TMP(""ORWDXMQ"",$J,"""_RSPID_""")" G XROOT
"RTN","ORWDX",70,0)
 I $E(RSPID)="X" S ROOT="^OR(100,"_+$P(RSPID,"X",2)_",4.5)"  G XROOT
"RTN","ORWDX",71,0)
 I +RSPID=RSPID  S ROOT="^ORD(101.41,"_+RSPID_",6)"          G XROOT
"RTN","ORWDX",72,0)
 Q:ROOT=""
"RTN","ORWDX",73,0)
XROOT S (ILST,I)=0 F  S I=$O(@ROOT@(I)) Q:I'>0  D
"RTN","ORWDX",74,0)
 . S DLG=$P(@ROOT@(I,0),U,2),INST=$P(^(0),U,3)
"RTN","ORWDX",75,0)
 . S ID=$P($G(^ORD(101.41,DLG,1)),U,3)
"RTN","ORWDX",76,0)
 . I '$L(ID) S ID="ID"_DLG
"RTN","ORWDX",77,0)
 . S VAL=$G(@ROOT@(I,1))
"RTN","ORWDX",78,0)
 . I $P($G(^ORD(101.41,DLG,0)),U)="OR GTX ADDITIVE" S ID="ADDITIVE"
"RTN","ORWDX",79,0)
 . I $E(RSPID)="C",(ID="START"),VAL Q  ; skip literal start time on copy
"RTN","ORWDX",80,0)
 . S LST($$NXT)="~"_DLG_U_INST_U_ID
"RTN","ORWDX",81,0)
 . I $L(VAL) D
"RTN","ORWDX",82,0)
 . . S LST($$NXT)="i"_VAL,LST($$NXT)="e"_$$EXTVAL(VAL,DLG)
"RTN","ORWDX",83,0)
 . I $D(@ROOT@(I,2))>1 D
"RTN","ORWDX",84,0)
 . . S J=0 F  S J=$O(@ROOT@(I,2,J)) Q:J'>0  D
"RTN","ORWDX",85,0)
 . . . S LST($$NXT)="t"_$G(@ROOT@(I,2,J,0))
"RTN","ORWDX",86,0)
 I $E(ROOT,1,4)="^TMP" K ^TMP("ORWDXMQ",$J)
"RTN","ORWDX",87,0)
 Q
"RTN","ORWDX",88,0)
SAVE(REC,ORVP,ORNP,ORL,DLG,ORDG,ORIT,ORIFN,ORDIALOG) ; Save order
"RTN","ORWDX",89,0)
 ; ORVP=DFN, ORNP=Provider, ORL=Location, DLG=Order Dialog,
"RTN","ORWDX",90,0)
 ; ORDG=Display Group, ORIT=Quick Order Dialog,
"RTN","ORWDX",91,0)
 ; ORIFN=null if new order, ORDIALOG=Response List
"RTN","ORWDX",92,0)
 N ORDUZ,ORSTS,OREVENT,ORCAT,ORDA,ORTS,ORNEW,ORCHECK,ORLOG,ORLEAD,ORTRAIL,ORPKG,ORWP94,ORCATFN
"RTN","ORWDX",93,0)
 S ORCATFN=""
"RTN","ORWDX",94,0)
 I $L($P(DLG,U,2)) S ORCATFN=$P(DLG,U,2),DLG=$P(DLG,U,1)
"RTN","ORWDX",95,0)
 I $G(ORDIALOG("ORTS")) S ORTS=ORDIALOG("ORTS") K ORDIALOG("ORTS")
"RTN","ORWDX",96,0)
 I $G(ORDIALOG("ORSLOG")) S ORLOG=ORDIALOG("ORSLOG") K ORDIALOG("ORSLOG")
"RTN","ORWDX",97,0)
 I $D(ORDIALOG("OREVENT")) M OREVENT=ORDIALOG("OREVENT") K ORDIALOG("OREVENT")
"RTN","ORWDX",98,0)
 I $L($G(OREVENT)) S ORCAT=$S(OREVENT="A":"I",OREVENT="T":"I",1:"O")
"RTN","ORWDX",99,0)
 E  S ORCAT=$S($L($P($G(^DPT(+ORVP,.1)),U)):"I",1:"O")
"RTN","ORWDX",100,0)
 I DLG="PS MEDS" S ORWP94=1 D
"RTN","ORWDX",101,0)
 . I ORIT=$O(^ORD(101.41,"AB","PSO SUPPLY",0)) S DLG="PSO SUPPLY"
"RTN","ORWDX",102,0)
 . I ORIT=$O(^ORD(101.41,"AB","PSO OERR",0)) S DLG="PSO OERR"
"RTN","ORWDX",103,0)
 . I ORIT=$O(^ORD(101.41,"AB","PSJ OR PAT OE",0)) S DLG="PSJ OR PAT OE"
"RTN","ORWDX",104,0)
 I DLG="PSO OERR" S ORCAT="O" I $G(OREVENT("EFFECTIVE")) D
"RTN","ORWDX",105,0)
 . S ORDIALOG($O(^ORD(101.41,"B","OR GTX START DATE"_$S($G(ORWP94):"/TIME",1:""),0)),1)=OREVENT("EFFECTIVE")
"RTN","ORWDX",106,0)
 I DLG="PSJ OR PAT OE" S ORCAT="I"
"RTN","ORWDX",107,0)
 S ORVP=ORVP_";DPT(",ORL(2)=ORL_";SC(",ORL=ORL(2)
"RTN","ORWDX",108,0)
 K:'ORDG ORDG K:'ORIT ORIT          ; Dgrp & Quick must be non-zero
"RTN","ORWDX",109,0)
 M ORCHECK=ORDIALOG("ORCHECK") K ORDIALOG("ORCHECK")
"RTN","ORWDX",110,0)
 S ORDIALOG=$O(^ORD(101.41,"AB",DLG,0))
"RTN","ORWDX",111,0)
 I 'ORDIALOG S ORDIALOG=$O(^ORD(101.41,"B",DLG,0))
"RTN","ORWDX",112,0)
 I $D(ORDIALOG("ORLEAD")) S ORLEAD=ORDIALOG("ORLEAD")
"RTN","ORWDX",113,0)
 I $D(ORDIALOG("ORTRAIL")) S ORTRAIL=ORDIALOG("ORTRAIL")
"RTN","ORWDX",114,0)
 D GETDLG1^ORCD(ORDIALOG)
"RTN","ORWDX",115,0)
 I $L(ORCATFN) S ORCAT=ORCATFN
"RTN","ORWDX",116,0)
 I $G(ORWP94) D
"RTN","ORWDX",117,0)
 . N SIGPRMT S SIGPRMT=$O(^ORD(101.41,"B","OR GTX SIG",0))
"RTN","ORWDX",118,0)
 . N INSPRMT S INSPRMT=$O(^ORD(101.41,"B","OR GTX INSTRUCTIONS",0))
"RTN","ORWDX",119,0)
 . I $L($G(ORDIALOG(SIGPRMT,1))) S ORDIALOG(INSPRMT,"FORMAT")="@"
"RTN","ORWDX",120,0)
 . I ORCAT="O" S ORPKG=$O(^DIC(9.4,"C","PSO",0))
"RTN","ORWDX",121,0)
 . I ORCAT="I" S ORPKG=$O(^DIC(9.4,"C","PSJ",0))
"RTN","ORWDX",122,0)
 I $G(ORIFN)="" D                   ; new order
"RTN","ORWDX",123,0)
 . D EN^ORCSAVE
"RTN","ORWDX",124,0)
 . S REC="" I ORIFN D GETBYIFN^ORWORR(.REC,ORIFN)
"RTN","ORWDX",125,0)
 . I '$D(^TMP("ORECALL",$J,ORDIALOG)) M ^TMP("ORECALL",$J,ORDIALOG)=ORDIALOG
"RTN","ORWDX",126,0)
 . ; check ORDIALOG("WP" & change ref to ^TMP(....
"RTN","ORWDX",127,0)
 E  D
"RTN","ORWDX",128,0)
 . N OR0
"RTN","ORWDX",129,0)
 . S OR0=$G(^OR(100,+ORIFN,0)),ORSTS=$P($G(^(3)),U,3),ORDG=$P(OR0,U,11)
"RTN","ORWDX",130,0)
 . I $L($P(OR0,U,17)),ORSTS=10 S OREVENT=$P(OR0,U,17),OREVENT("TS")=$P(OR0,U,13)
"RTN","ORWDX",131,0)
 . D XX^ORCSAVE                                ; edit order
"RTN","ORWDX",132,0)
 . S REC="" S ORIFN=+ORIFN_";"_ORDA D GETBYIFN^ORWORR(.REC,ORIFN)
"RTN","ORWDX",133,0)
 Q
"RTN","ORWDX",134,0)
SEND(ORWLST,DFN,ORNP,ORL,ES,ORWREC) ; Sign orders
"RTN","ORWDX",135,0)
 ; DFN=Patient, ORNP=Provider, ORL=Location, ES=Encrypted ES code 
"RTN","ORWDX",136,0)
 ; ORWREC(n)=ORIFN;Action^Signature Sts^Release Sts^Nature of Order
"RTN","ORWDX",137,0)
SEND1 N ORVP,ORWI,ORWERR,ORWREL,ORWSIG,ORWNATR,ORDERID,ORBEF,ORLR,ORLAB,X
"RTN","ORWDX",138,0)
 S ORVP=DFN_";DPT(",ORL=ORL_";SC(",ORL(2)=ORL,ORWLST=0
"RTN","ORWDX",139,0)
 S ORLR=+$O(^DIC(9.4,"C","LR",0))
"RTN","ORWDX",140,0)
 ; ** validate ES code, quit with error if not valid
"RTN","ORWDX",141,0)
 S ORWI=0 F  S ORWI=$O(ORWREC(ORWI)) Q:'ORWI  D
"RTN","ORWDX",142,0)
 . S X=ORWREC(ORWI),ORWERR=""
"RTN","ORWDX",143,0)
 . S ORDERID=$P(X,U),ORWSIG=$P(X,U,2),ORWREL=$P(X,U,3),ORWNATR=$P(X,U,4)
"RTN","ORWDX",144,0)
 . S ORBEF=$P(^OR(100,+ORDERID,8,+$P(ORDERID,";",2),0),U,15)
"RTN","ORWDX",145,0)
 . S ORWNATR=$S($P(^(0),"^",4)=3:"",1:ORWNATR) ;If order doesn't require signature leave nature at electronic --added with patch 110
"RTN","ORWDX",146,0)
 . S ORWERR=$$CHKACT^ORWDXR(ORDERID,ORWSIG,ORWREL,ORWNATR)
"RTN","ORWDX",147,0)
 . I $L(ORWERR) S ORWERR="1^"_ORWERR
"RTN","ORWDX",148,0)
 . I '$L(ORWERR) D
"RTN","ORWDX",149,0)
 . . I $P(^OR(100,+ORDERID,0),U,14)=ORLR,'$G(ORLAB) D  ; lab batch start
"RTN","ORWDX",150,0)
 . . . I $L($T(BHS^ORMBLD)) D BHS^ORMBLD(ORVP) S ORLAB=1
"RTN","ORWDX",151,0)
 . . N OK S OK=$$LOCK1^ORX2(ORDERID) I 'OK S ORWERR="1^"_$P(OK,U,2)
"RTN","ORWDX",152,0)
 . . I OK D EN^ORCSEND(ORDERID,"",ORWSIG,ORWREL,ORWNATR,"",.ORWERR),UNLK1^ORX2(ORDERID)
"RTN","ORWDX",153,0)
 . S ORWLST(ORWI)=ORDERID,X=""
"RTN","ORWDX",154,0)
 . ; return error message if there was an error trying to send
"RTN","ORWDX",155,0)
 . I $L(ORWERR) S ORWLST(ORWI)=ORWLST(ORWI)_"^E^"_ORWERR Q
"RTN","ORWDX",156,0)
 . ; if previously unreleased, now releasing, & not delayed
"RTN","ORWDX",157,0)
 . I ORWREL,((ORBEF=10)!(ORBEF=11)),($P(^OR(100,+ORDERID,3),U,3)'=10) S X="R"
"RTN","ORWDX",158,0)
 . ; if order was signed
"RTN","ORWDX",159,0)
 . I ORWSIG'=2 S X=X_"S"
"RTN","ORWDX",160,0)
 . S $P(ORWLST(ORWI),U,2)=X
"RTN","ORWDX",161,0)
 I $G(ORLAB) D BTS^ORMBLD(ORVP)
"RTN","ORWDX",162,0)
 Q
"RTN","ORWDX",163,0)
EXTVAL(IVAL,DLG) ; return an external value given a dialog pointer
"RTN","ORWDX",164,0)
 N ORDIALOG
"RTN","ORWDX",165,0)
 S ORDIALOG(DLG,0)=$P($G(^ORD(101.41,DLG,1)),U,1,2)
"RTN","ORWDX",166,0)
 S ORDIALOG(DLG,1)=IVAL
"RTN","ORWDX",167,0)
 I $E(ORDIALOG(DLG,0))="R",(+IVAL'=IVAL) Q IVAL  ; free text date/time
"RTN","ORWDX",168,0)
 Q $$EXT^ORCD(DLG,1)                             ; all others
"RTN","ORWDX",169,0)
 ;
"RTN","ORWDX",170,0)
DLGID(VAL,ORIFN)        ; return dialog IEN for an order
"RTN","ORWDX",171,0)
 S VAL=$P(^OR(100,+ORIFN,0),U,5)
"RTN","ORWDX",172,0)
 S VAL=$S($P(VAL,";",2)="ORD(101.41,":+VAL,1:0)
"RTN","ORWDX",173,0)
 Q
"RTN","ORWDX",174,0)
FORMID(VAL,ORIFN)  ; return the base dialog FormID for an order
"RTN","ORWDX",175,0)
 N DLG
"RTN","ORWDX",176,0)
 S VAL=0,DLG=$P(^OR(100,+ORIFN,0),U,5)
"RTN","ORWDX",177,0)
 Q:$P(DLG,";",2)'="ORD(101.41,"
"RTN","ORWDX",178,0)
 D FORMID^ORWDXM(.VAL,+DLG)
"RTN","ORWDX",179,0)
 Q
"RTN","ORWDX",180,0)
AGAIN(VAL,DLG)  ; return true to keep dialog for another order
"RTN","ORWDX",181,0)
 S VAL=''$P($G(^ORD(101.41,DLG,0)),U,9)
"RTN","ORWDX",182,0)
 Q
"RTN","ORWDX",183,0)
DGRP(VAL,DLG)   ; return the display group pointer for a dialog
"RTN","ORWDX",184,0)
 S DLG=$S($E(DLG)="`":+$P(DLG,"`",2),1:$O(^ORD(101.41,"AB",DLG,0))) ;kcm
"RTN","ORWDX",185,0)
 S VAL=$P($G(^ORD(101.41,DLG,0)),U,5)
"RTN","ORWDX",186,0)
 Q
"RTN","ORWDX",187,0)
DGNM(VAL,NM)    ; return the display group pointer for a name
"RTN","ORWDX",188,0)
 S VAL=$O(^ORD(100.98,"B",NM,0))
"RTN","ORWDX",189,0)
 Q
"RTN","ORWDX",190,0)
WRLST(LST,LOC) ; Return list of dialogs for writing orders
"RTN","ORWDX",191,0)
 ; .Y(n): DlgName^ListBox Text
"RTN","ORWDX",192,0)
 G WRLST1^ORWDX1  ; moved to new routine
"RTN","ORWDX",193,0)
 ;
"RTN","ORWDX",194,0)
MSG(LST,IEN)     ; Return message text for an orderable item
"RTN","ORWDX",195,0)
 N I
"RTN","ORWDX",196,0)
 S I=0 F  S I=$O(^ORD(101.43,IEN,8,I)) Q:I'>0  S LST(I)=^(I,0)
"RTN","ORWDX",197,0)
 Q
"RTN","ORWDX",198,0)
DISMSG(VAL,IEN) ; return disabled message for an ordering dialog
"RTN","ORWDX",199,0)
 S VAL=$P($G(^ORD(101.41,+IEN,0)),U,3)
"RTN","ORWDX",200,0)
 Q
"RTN","ORWDX",201,0)
LOCK(OK,DFN)    ; attempt to lock the patient for ordering
"RTN","ORWDX",202,0)
 S OK=$$LOCK^ORX2(DFN)
"RTN","ORWDX",203,0)
 Q
"RTN","ORWDX",204,0)
UNLOCK(OK,DFN)     ; unlock the patient for ordering
"RTN","ORWDX",205,0)
 D UNLOCK^ORX2(DFN) S OK=1
"RTN","ORWDX",206,0)
 Q
"RTN","ORWDX",207,0)
LOCKORD(OK,ORIFN)       ; Attempt to lock the order
"RTN","ORWDX",208,0)
 S OK=$$LOCK1^ORX2(ORIFN)
"RTN","ORWDX",209,0)
 Q
"RTN","ORWDX",210,0)
UNLKORD(OK,ORIFN)       ; Unlock the order
"RTN","ORWDX",211,0)
 D UNLK1^ORX2(ORIFN) S OK=1
"RTN","ORWDX",212,0)
 Q
"RTN","ORWDXM1")
0^8^B61794540
"RTN","ORWDXM1",1,0)
ORWDXM1 ; SLC/KCM - Order Dialogs, Menus;11:19 AM  7 Jan 2000
"RTN","ORWDXM1",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,85,131**;Dec 17, 1997
"RTN","ORWDXM1",3,0)
 ;
"RTN","ORWDXM1",4,0)
BLDQRSP(LST,ORIT,FLDS)     ; Build responses for an order
"RTN","ORWDXM1",5,0)
 ; LST=QuickLevel^ResponseID(ORIT;$H)^Dialog^Type^FormID^DGrp
"RTN","ORWDXM1",6,0)
 ; LST(n)=verify text or rejection text
"RTN","ORWDXM1",7,0)
 ; ORIT= ptr to 101.41 for quick order, 100 for copy
"RTN","ORWDXM1",8,0)
 ;       1   2    3    4   5   6    7    8        11-20
"RTN","ORWDXM1",9,0)
 ; FLDS=DFN^LOC^ORNP^INPT^SEX^AGE^EVENT^SC%^^^Key Variables...
"RTN","ORWDXM1",10,0)
 ; ORIT=+ORIT: ptr to 101.41, $E(ORIT)=C: copy $E(ORIT)=X: change
"RTN","ORWDXM1",11,0)
 ;
"RTN","ORWDXM1",12,0)
 ; !! SHOULD ALSO CHECK for PRE-CPRS ORDERS (treat as text?)
"RTN","ORWDXM1",13,0)
 ;
"RTN","ORWDXM1",14,0)
 K ^TMP("ORWDXMQ",$J)
"RTN","ORWDXM1",15,0)
 N ORWMODE   ; 0:Dialog,Quick 1:copy order 2:change order
"RTN","ORWDXM1",16,0)
 N ISXFER    ; If it is transfer order   
"RTN","ORWDXM1",17,0)
 S ORWMODE=0,ISXFER=""
"RTN","ORWDXM1",18,0)
 S:$E(ORIT)="C" ORWMODE=1 S:$E(ORIT)="T" ORWMODE=1,ISXFER=";T" ; treat xfer as copy for now
"RTN","ORWDXM1",19,0)
 S:$E(ORIT)="X" ORWMODE=2
"RTN","ORWDXM1",20,0)
 I ORWMODE S ORIT=$E(ORIT,2,999)
"RTN","ORWDXM1",21,0)
 S LST(0)=""
"RTN","ORWDXM1",22,0)
 D CHKDSBL^ORWDXM3(.LST,ORIT,ORWMODE) Q:+LST(0)=8               ;disable
"RTN","ORWDXM1",23,0)
 D CHKVACT^ORWDXM3(.LST,ORIT,ORWMODE,$P(FLDS,U,3)) Q:+LST(0)=8  ;action
"RTN","ORWDXM1",24,0)
 I ORWMODE=1 D CHKCOPY^ORWDXM3(.LST,ORIT,FLDS) Q:+LST(0)=8      ;no copy
"RTN","ORWDXM1",25,0)
 I ORWMODE=2 D BLD4CHG^ORWDXM3(.LST,ORIT,FLDS) Q                ;change
"RTN","ORWDXM1",26,0)
 ; only continue past here if copy, quick order, or generic order
"RTN","ORWDXM1",27,0)
 I 'ORWMODE,($P(^ORD(101.41,+ORIT,0),U,4)="D"),'($O(^DIC(9.4,"C","OR",0))[$P(^ORD(101.41,+ORIT,0),U,7)) S LST(0)="0^0^"_$$DLGINFO^ORWDXM3(ORIT,ORWMODE_ISXFER) Q
"RTN","ORWDXM1",28,0)
 ;
"RTN","ORWDXM1",29,0)
 ; radilogy specific variables
"RTN","ORWDXM1",30,0)
 N ORIMTYPE
"RTN","ORWDXM1",31,0)
 ; lab specific variables
"RTN","ORWDXM1",32,0)
 N LRFZX,LRFSAMP,LRFSPEC,LRFDATE,LRFURG,LRFSCH
"RTN","ORWDXM1",33,0)
 N ORTIME,ORCOLLCT,ORMAX,ORTEST,ORIMTIME,ORSMAX,ORSTMS,ORSCH
"RTN","ORWDXM1",34,0)
 ; pharmacy specific variables
"RTN","ORWDXM1",35,0)
 N PSJNOPC,ORMORE,ORINPT,ORXNP,ORSCHED,ORQTY,ORNOUNS,ORXNP,OREFILLS
"RTN","ORWDXM1",36,0)
 N ORCOMPLX,ORQTY,ORCOPAY,ORDRUG,ORWPSPIK,ORWPSWRG,ORSD,ORDSUP,ORWP94
"RTN","ORWDXM1",37,0)
 ; dietetics specific variables
"RTN","ORWDXM1",38,0)
 N ORPARAM,ORNPO,ORTIME,ORMEAL,ORTRAY,ORDATE
"RTN","ORWDXM1",39,0)
 ; consults specific variables
"RTN","ORWDXM1",40,0)
 N GMRCNOPD,GMRCNOAT,GMRCREAF
"RTN","ORWDXM1",41,0)
 ;
"RTN","ORWDXM1",42,0)
 ; -- setup general environment
"RTN","ORWDXM1",43,0)
 N ORTYPE,ORVP,ORL,ORNP,ORSEX,ORAGE,ORWARD,OREVENT,ORDIV,ORSC,KEYVAR
"RTN","ORWDXM1",44,0)
 N ORDG,ORDIALOG,ORCAT,FIRST,ORQUIT,X,ORTRAIL,ORLEAD,RSPREF,AUTOACK
"RTN","ORWDXM1",45,0)
 S ORWP94=$O(^ORD(101.41,"AB","PS MEDS",0))>0
"RTN","ORWDXM1",46,0)
 S ORVP=$P(FLDS,U,1)_";DPT(",ORNP=+$P(FLDS,U,3),ORSC=$P(FLDS,U,8)
"RTN","ORWDXM1",47,0)
 S ORL=$P(FLDS,U,2)_";SC(",ORL(2)=ORL
"RTN","ORWDXM1",48,0)
 S ORSEX=$P(FLDS,U,5),ORAGE=$P(FLDS,U,6),ORTYPE="Q",FIRST=1
"RTN","ORWDXM1",49,0)
 I $P(FLDS,U,4),$G(^SC(+ORL,42)) S ORWARD=+^SC(+ORL,42)
"RTN","ORWDXM1",50,0)
 I $L($P(FLDS,U,7))  D
"RTN","ORWDXM1",51,0)
 . S OREVENT=$P(FLDS,U,7)
"RTN","ORWDXM1",52,0)
 . S OREVENT("TS")=$P(OREVENT,";",2)
"RTN","ORWDXM1",53,0)
 . S OREVENT("EFFECTIVE")=$P(OREVENT,";",3)
"RTN","ORWDXM1",54,0)
 . S OREVENT=$P(OREVENT,";")
"RTN","ORWDXM1",55,0)
 I 'ORWMODE D
"RTN","ORWDXM1",56,0)
 . D SETKEYV^ORWDXM3($P(FLDS,U,11,20))             ; from menu path
"RTN","ORWDXM1",57,0)
 . S KEYVAR=$$KEYVAR^ORWDXM3(ORIT)                 ; from entry action
"RTN","ORWDXM1",58,0)
 . D SETKEYV^ORWDXM3(KEYVAR)
"RTN","ORWDXM1",59,0)
 K ^TMP("ORWORD",$J)
"RTN","ORWDXM1",60,0)
 ;
"RTN","ORWDXM1",61,0)
 ; -- initialize return record based on auto-accept
"RTN","ORWDXM1",62,0)
 I ORWMODE S LST(0)="2^"_ORIT  ; verify on copy
"RTN","ORWDXM1",63,0)
 E  S LST(0)=+$P($G(^ORD(101.41,ORIT,5)),U,8)_U_ORIT
"RTN","ORWDXM1",64,0)
 ;    setup ORCAT based on OREVENT
"RTN","ORWDXM1",65,0)
 I $L($G(OREVENT)) S ORCAT=$S(OREVENT="A":"I",OREVENT="T":"I",1:"O")
"RTN","ORWDXM1",66,0)
 E  S ORCAT=$S($L($P($G(^DPT(+ORVP,.1)),U)):"I",1:"O")
"RTN","ORWDXM1",67,0)
 ;    get ORDIALOG definition, then responses for order
"RTN","ORWDXM1",68,0)
 D SETUP^ORWDXM4 Q:+LST(0)=8
"RTN","ORWDXM1",69,0)
 ;    use DATE pre-OR*3*94, DATE/TIME after
"RTN","ORWDXM1",70,0)
 S X=$S($G(ORWP94):"OR GTX START DATE/TIME",1:"OR GTX START DATE")
"RTN","ORWDXM1",71,0)
 ;    kill effective date for rewrite of outpt meds (JUST FOR XFER?)
"RTN","ORWDXM1",72,0)
 I ORWMODE,(ORDG=+$O(^ORD(100.98,"B","O RX",0))) K ORDIALOG($$PTR^ORCD(X),1)
"RTN","ORWDXM1",73,0)
 ;    pharmacy uses ORCAT to know which package the order goes to
"RTN","ORWDXM1",74,0)
 I ORDIALOG=$O(^ORD(101.41,"B","PSO OERR",0)) S ORCAT="O"
"RTN","ORWDXM1",75,0)
 I ORDIALOG=$O(^ORD(101.41,"B","PSJ OR PAT OE",0)) D
"RTN","ORWDXM1",76,0)
 . I ORCAT="O" S ORWPSWRG="" ; not auto-ack, pt not inpt
"RTN","ORWDXM1",77,0)
 . S ORCAT="I"
"RTN","ORWDXM1",78,0)
 ;    set effective date for outpt meds only
"RTN","ORWDXM1",79,0)
 I ORCAT="O",$D(OREVENT("EFFECTIVE")),(ORDG=+$O(^ORD(100.98,"B","O RX",0))) D
"RTN","ORWDXM1",80,0)
 . S ORDIALOG($O(^ORD(101.41,"B",X,0)),1)=OREVENT("EFFECTIVE")
"RTN","ORWDXM1",81,0)
 ;
"RTN","ORWDXM1",82,0)
 ; -- setup environment specific to a dialog
"RTN","ORWDXM1",83,0)
 ;    begin case
"RTN","ORWDXM1",84,0)
 I ORDIALOG=$O(^ORD(101.41,"B","RA OERR EXAM",0))         D RA^ORWDXM2 G XENV
"RTN","ORWDXM1",85,0)
 I ORDIALOG=$O(^ORD(101.41,"B","LR OTHER LAB TESTS",0))   D LR^ORWDXM2 G XENV
"RTN","ORWDXM1",86,0)
 I ORDIALOG=$O(^ORD(101.41,"B","FHW1",0))                 D DO^ORWDXM2 G XENV
"RTN","ORWDXM1",87,0)
 I ORDIALOG=$O(^ORD(101.41,"B","FHW2",0))                 D EL^ORWDXM2 G XENV
"RTN","ORWDXM1",88,0)
 I ORDIALOG=$O(^ORD(101.41,"B","PSJ OR PAT OE",0))        D UD^ORWDXM2 G XENV
"RTN","ORWDXM1",89,0)
 I ORDIALOG=$O(^ORD(101.41,"B","PSJI OR PAT FLUID OE",0)) D IV^ORWDXM2 G XENV
"RTN","ORWDXM1",90,0)
 I ORDIALOG=$O(^ORD(101.41,"B","PSO OERR",0))             D OP^ORWDXM2 G XENV
"RTN","ORWDXM1",91,0)
 I ORDIALOG=$O(^ORD(101.41,"B","PSO SUPPLY",0))           D OP^ORWDXM2 G XENV
"RTN","ORWDXM1",92,0)
 I ORDIALOG=$O(^ORD(101.41,"B","PS MEDS",0))              D PS^ORWDPS3 G XENV
"RTN","ORWDXM1",93,0)
 I ORDIALOG=$O(^ORD(101.41,"B","GMRAOR ALLERGY ENTER/EDIT",0)) S ORQUIT=1
"RTN","ORWDXM1",94,0)
XENV ;    end case
"RTN","ORWDXM1",95,0)
 ;
"RTN","ORWDXM1",96,0)
 Q:+LST(0)=8
"RTN","ORWDXM1",97,0)
 I $G(ORQUIT) S LST(0)="0^0^"_$$DLGINFO^ORWDXM3(ORIT,ORWMODE_ISXFER)_"^"_$G(KEYVAR) Q
"RTN","ORWDXM1",98,0)
 ; -- loop thru items in dialog, setting defaults & checking conditions
"RTN","ORWDXM1",99,0)
 N SEQ,DA,XCODE,MUSTASK,PROMPT,INST,KEY
"RTN","ORWDXM1",100,0)
 S AUTOACK=$S($D(ORWPSWRG):0,1:1)
"RTN","ORWDXM1",101,0)
 S SEQ=0 F  S SEQ=$O(^ORD(101.41,+ORDIALOG,10,"B",SEQ)) Q:'SEQ  D
"RTN","ORWDXM1",102,0)
 . S DA=0 F  S DA=$O(^ORD(101.41,+ORDIALOG,10,"B",SEQ,DA)) Q:'DA  D
"RTN","ORWDXM1",103,0)
 . . ; -- skip if this is a child prompt
"RTN","ORWDXM1",104,0)
 . . I $P(^ORD(101.41,+ORDIALOG,10,DA,0),U,11) Q
"RTN","ORWDXM1",105,0)
 . . ; -- set default for prompt, see if needs to be interactive
"RTN","ORWDXM1",106,0)
 . . S PROMPT=$P(^ORD(101.41,+ORDIALOG,10,DA,0),U,2)
"RTN","ORWDXM1",107,0)
 . . D SETITEM(DA,PROMPT,1,.MUSTASK)
"RTN","ORWDXM1",108,0)
 . . I MUSTASK S AUTOACK=0 Q
"RTN","ORWDXM1",109,0)
 . . ; -- iterate through the child items if parent and editonly
"RTN","ORWDXM1",110,0)
 . . Q:'$D(^ORD(101.41,+ORDIALOG,10,"DAD",PROMPT))
"RTN","ORWDXM1",111,0)
 . . N CSEQ,CDA,CPROMPT,INST,ORQUIT
"RTN","ORWDXM1",112,0)
 . . S CSEQ=0 F  S CSEQ=$O(^ORD(101.41,+ORDIALOG,10,"DAD",PROMPT,CSEQ)) Q:'CSEQ  D  Q:$G(ORQUIT)
"RTN","ORWDXM1",113,0)
 . . . S CDA=$O(^ORD(101.41,+ORDIALOG,10,"DAD",PROMPT,CSEQ,0))
"RTN","ORWDXM1",114,0)
 . . . S CPROMPT=$P(^ORD(101.41,+ORDIALOG,10,CDA,0),U,2)
"RTN","ORWDXM1",115,0)
 . . . ; -- if required and no instances then need interaction
"RTN","ORWDXM1",116,0)
 . . . I $P(^ORD(101.41,+ORDIALOG,10,CDA,0),U,6),'$O(ORDIALOG(CPROMPT,0)) S AUTOACK=0
"RTN","ORWDXM1",117,0)
 . . . S INST=0 F  S INST=$O(ORDIALOG(CPROMPT,INST)) Q:'INST  D
"RTN","ORWDXM1",118,0)
 . . . . ; -- set default for each child prompt, if necessary
"RTN","ORWDXM1",119,0)
 . . . . D SETITEM(CDA,CPROMPT,INST,.MUSTASK)
"RTN","ORWDXM1",120,0)
 . . . . ; -- if no val and child prmpt required then need interaction
"RTN","ORWDXM1",121,0)
 . . . . I MUSTASK,$P(^ORD(101.41,+ORDIALOG,10,CDA,0),U,6) S AUTOACK=0
"RTN","ORWDXM1",122,0)
 ;
"RTN","ORWDXM1",123,0)
 ; -- loop thru prompts to create responses in ^TMP
"RTN","ORWDXM1",124,0)
 S KEY=$S(ORWMODE:"C",1:"")_ORIT_"-"_$P($H,",",2),SEQ=0
"RTN","ORWDXM1",125,0)
 S PROMPT=0 F  S PROMPT=$O(ORDIALOG(PROMPT)) Q:'PROMPT  D
"RTN","ORWDXM1",126,0)
 . S INST=0 F  S INST=$O(ORDIALOG(PROMPT,INST)) Q:'INST  D
"RTN","ORWDXM1",127,0)
 . . S SEQ=SEQ+1,^TMP("ORWDXMQ",$J,KEY,SEQ,0)=U_PROMPT_U_INST
"RTN","ORWDXM1",128,0)
 . . ; -- save word processing value
"RTN","ORWDXM1",129,0)
 . . I $E(ORDIALOG(PROMPT,0))="W",$L(ORDIALOG(PROMPT,INST)) D
"RTN","ORWDXM1",130,0)
 . . .  M ^TMP("ORWDXMQ",$J,KEY,SEQ,2)=@ORDIALOG(PROMPT,INST)
"RTN","ORWDXM1",131,0)
 . . ; -- save other types of values
"RTN","ORWDXM1",132,0)
 . . E  S ^TMP("ORWDXMQ",$J,KEY,SEQ,1)=ORDIALOG(PROMPT,INST)
"RTN","ORWDXM1",133,0)
 ;
"RTN","ORWDXM1",134,0)
 ; -- return whether the order can be auto-accepted & key to values
"RTN","ORWDXM1",135,0)
 I AUTOACK D
"RTN","ORWDXM1",136,0)
 . I ORWMODE S AUTOACK=2
"RTN","ORWDXM1",137,0)
 . I 'ORWMODE,($P(^ORD(101.41,ORIT,0),U,8)!'LST(0)) S AUTOACK=2
"RTN","ORWDXM1",138,0)
 I AUTOACK=2 D VERTXT^ORWDXM2
"RTN","ORWDXM1",139,0)
 S LST(0)=AUTOACK_U_KEY_U_$$DLGINFO^ORWDXM3(ORIT,ORWMODE_ISXFER)_"^"_$G(KEYVAR)
"RTN","ORWDXM1",140,0)
 ; D becomes Q if got this far (must be generic dialog)
"RTN","ORWDXM1",141,0)
 I $P(LST(0),U,4)="D" S $P(LST(0),U,4)="Q"
"RTN","ORWDXM1",142,0)
 ; if doing copy, set dialog type to "C" (sets up dialog in copy mode)
"RTN","ORWDXM1",143,0)
 I ORWMODE=1 S $P(LST(0),U,4)="C"
"RTN","ORWDXM1",144,0)
 ;
"RTN","ORWDXM1",145,0)
 K ^TMP("ORWORD",$J)
"RTN","ORWDXM1",146,0)
 K ^TMP("PSJINS",$J),^TMP("PSJMR",$J),^TMP("PSJNOUN",$J)
"RTN","ORWDXM1",147,0)
 Q
"RTN","ORWDXM1",148,0)
SETITEM(DA,PROMPT,INST,MUSTASK) ; set default value & return if must prompt
"RTN","ORWDXM1",149,0)
 N EDITONLY,Y,XCODE
"RTN","ORWDXM1",150,0)
 S MUSTASK=0,EDITONLY=0 ;,PROMPT=$P(^ORD(101.41,+ORDIALOG,10,DA,0),U,2)
"RTN","ORWDXM1",151,0)
 ;
"RTN","ORWDXM1",152,0)
 ; load value into this prompt if passed from HTML dialog
"RTN","ORWDXM1",153,0)
 I $D(^TMP("ORWDHTM",$J,ORDIALOG,PROMPT)) D
"RTN","ORWDXM1",154,0)
 . I $E(ORDIALOG(PROMPT,0))="W" D
"RTN","ORWDXM1",155,0)
 . . S ^TMP("ORWORD",$J,PROMPT,INST,1,0)=^TMP("ORWDHTM",$J,ORDIALOG,PROMPT)
"RTN","ORWDXM1",156,0)
 . . S ORDIALOG(PROMPT,INST)="^TMP(""ORWORD"","_$J_","_PROMPT_","_INST_")"
"RTN","ORWDXM1",157,0)
 . E  S ORDIALOG(PROMPT,INST)=^TMP("ORWDHTM",$J,ORDIALOG,PROMPT)
"RTN","ORWDXM1",158,0)
 I $D(^TMP("ORWDHTM",$J,ORIT,PROMPT)) D
"RTN","ORWDXM1",159,0)
 . S ORDIALOG(PROMPT,INST)=^TMP("ORWDHTM",$J,ORIT,PROMPT)
"RTN","ORWDXM1",160,0)
 . ; NEED TO CLEAN UP ^TMP("ORWDHTM") after processing order set!!!
"RTN","ORWDXM1",161,0)
 ;
"RTN","ORWDXM1",162,0)
 ; skip if a value already exists for this prompt and not WP
"RTN","ORWDXM1",163,0)
 Q:$D(ORDIALOG(PROMPT,INST))&($E(ORDIALOG(PROMPT,0))'="W")
"RTN","ORWDXM1",164,0)
 ; execute default action if no value in QO, checking EDITONLY afterwards
"RTN","ORWDXM1",165,0)
 I '$D(ORDIALOG(PROMPT,INST)) D
"RTN","ORWDXM1",166,0)
 . I $E(ORDIALOG(PROMPT,0))="W",$D(^ORD(101.41,+ORDIALOG,10,DA,8))>9 D
"RTN","ORWDXM1",167,0)
 . . M ^TMP("ORWORD",$J,PROMPT,INST)=^ORD(101.41,+ORDIALOG,10,DA,8)
"RTN","ORWDXM1",168,0)
 . . S ORDIALOG(PROMPT,INST)="^TMP(""ORWORD"","_$J_","_PROMPT_","_INST_")"
"RTN","ORWDXM1",169,0)
 . E  D
"RTN","ORWDXM1",170,0)
 . . S XCODE=$$SUBCODE($G(^ORD(101.41,+ORDIALOG,10,DA,7)))
"RTN","ORWDXM1",171,0)
 . . I $L(XCODE) X XCODE S:$D(Y) ORDIALOG(PROMPT,INST)=Y
"RTN","ORWDXM1",172,0)
 Q:$G(EDITONLY)
"RTN","ORWDXM1",173,0)
 ; if this is ASK ON EDIT ONLY prompt, go to next one
"RTN","ORWDXM1",174,0)
 I 'ORWMODE,$P($G(^ORD(101.41,+ORDIALOG,10,DA,0)),U,8) Q
"RTN","ORWDXM1",175,0)
 ; if this is not ASK ON COPY or REQUIRED, go to next one
"RTN","ORWDXM1",176,0)
 I ORWMODE,($P($G(^ORD(101.41,+ORDIALOG,10,DA,0)),U,9)'["W"),'$P($G(^(0)),U,6)!$D(ORDIALOG(PROMPT,INST)) Q
"RTN","ORWDXM1",177,0)
 ; if auto-accept and now have value for WP field, don't ask it
"RTN","ORWDXM1",178,0)
 I 'ORWMODE,LST(0),$D(ORDIALOG(PROMPT,INST)),($E(ORDIALOG(PROMPT,0))="W") Q
"RTN","ORWDXM1",179,0)
 ; if auto-accept and field not required, don't ask it
"RTN","ORWDXM1",180,0)
 I 'ORWMODE,LST(0),'$P($G(^ORD(101.41,+ORDIALOG,10,DA,0)),U,6) Q
"RTN","ORWDXM1",181,0)
 ; execute the condition action, $T determines if editonly
"RTN","ORWDXM1",182,0)
 S XCODE=$$SUBCODE($G(^ORD(101.41,+ORDIALOG,10,DA,3)))
"RTN","ORWDXM1",183,0)
 I $L(XCODE) X XCODE Q:'$T
"RTN","ORWDXM1",184,0)
 ; if we got this far, we need to ask something
"RTN","ORWDXM1",185,0)
 S MUSTASK=1
"RTN","ORWDXM1",186,0)
 Q
"RTN","ORWDXM1",187,0)
SUBCODE(X)      ; substitute code
"RTN","ORWDXM1",188,0)
 I X["$$REQDCOMM^ORCDLR" Q "I $$LRRQCM^ORWDXM2"
"RTN","ORWDXM1",189,0)
 I X["$$ASKSAMP^ORCDLR" Q "I $$LRASMP^ORWDXM2"
"RTN","ORWDXM1",190,0)
 I X["$$SCHEDULD^ORCDRA1" Q "I $$SCHEDULD^ORWDXM2"
"RTN","ORWDXM1",191,0)
 I X["(^PSX(550,""C"")" Q "S Y=$E($$DEFPICK^ORWDPS32) K:'$L(Y) Y"
"RTN","ORWDXM1",192,0)
 Q X
"RTN","ORWDXM3")
0^7^B21198849
"RTN","ORWDXM3",1,0)
ORWDXM3 ; SLC/KCM/JLI - Quick Orders ;10:42 AM Jan 19 2002
"RTN","ORWDXM3",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,85,131**;Dec 17, 1997
"RTN","ORWDXM3",3,0)
 ;
"RTN","ORWDXM3",4,0)
KEYVAR(DLG)  ; Parse entry action for key variables & return in string
"RTN","ORWDXM3",5,0)
 ; RV=CollTp^Samp^Spec^CollDt^Urg^Sched^NoComm^NoDiag^NoProv^NoRsn
"RTN","ORWDXM3",6,0)
 N XCODE,RV,POS,Z
"RTN","ORWDXM3",7,0)
 S XCODE=$G(^ORD(101.41,DLG,3)),RV=""
"RTN","ORWDXM3",8,0)
 I '$L(XCODE) Q ""
"RTN","ORWDXM3",9,0)
 S POS=$F(XCODE,"LRFZX=")    I POS S $P(RV,U,1)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",10,0)
 S POS=$F(XCODE,"LRFSAMP=")  I POS S $P(RV,U,2)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",11,0)
 S POS=$F(XCODE,"LRFSPEC=")  I POS S $P(RV,U,3)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",12,0)
 S POS=$F(XCODE,"LRFDATE=")  I POS S $P(RV,U,4)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",13,0)
 S POS=$F(XCODE,"LRFURG=")   I POS S $P(RV,U,5)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",14,0)
 S POS=$F(XCODE,"LRFSCH=")   I POS S $P(RV,U,6)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",15,0)
 S POS=$F(XCODE,"PSJNOPC=")  I POS S $P(RV,U,7)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",16,0)
 S POS=$F(XCODE,"GMRCNOPD=") I POS S $P(RV,U,8)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",17,0)
 S POS=$F(XCODE,"GMRCNOAT=") I POS S $P(RV,U,9)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",18,0)
 S POS=$F(XCODE,"GMRCREAF=") I POS S $P(RV,U,10)=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",19,0)
 S POS=$F(XCODE,"ORFORGET=") I POS D
"RTN","ORWDXM3",20,0)
 . ; need to change this so that it is executed in SETKEYV so
"RTN","ORWDXM3",21,0)
 . ; that it is executed each time menu is revisited
"RTN","ORWDXM3",22,0)
 . N ORFORGET S ORFORGET=$$VALUE(XCODE,POS)
"RTN","ORWDXM3",23,0)
 . I ORFORGET K ^TMP("ORECALL",$J,+ORFORGET)
"RTN","ORWDXM3",24,0)
 . E  K ^TMP("ORECALL",$J)
"RTN","ORWDXM3",25,0)
 Q RV
"RTN","ORWDXM3",26,0)
VALUE(STR,BEG) ; Return value of "var=" (copied from ORCONVRT)
"RTN","ORWDXM3",27,0)
 N X,Y,I S X=$E(STR,BEG,999),Y=""
"RTN","ORWDXM3",28,0)
 S:$E(X)="""" X=$E(X,2,999) ; strip leading "
"RTN","ORWDXM3",29,0)
 F I=1:1:$L(X) S Z=$E(X,I) Q:(Z=",")!(Z=" ")!(Z="""")  S Y=Y_Z
"RTN","ORWDXM3",30,0)
 Q $TR(Y,U,"")
"RTN","ORWDXM3",31,0)
 ;
"RTN","ORWDXM3",32,0)
SETKEYV(X)      ; Set the key variables based on contents of X
"RTN","ORWDXM3",33,0)
 I $L($P(X,U,1))  S LRFZX=$P(X,U,1)
"RTN","ORWDXM3",34,0)
 I $L($P(X,U,2))  S LRFSAMP=$P(X,U,2)
"RTN","ORWDXM3",35,0)
 I $L($P(X,U,3))  S LRFSPEC=$P(X,U,3)
"RTN","ORWDXM3",36,0)
 I $L($P(X,U,4))  S LRFDATE=$P(X,U,4)
"RTN","ORWDXM3",37,0)
 I $L($P(X,U,5))  S LRFURG=$P(X,U,5)
"RTN","ORWDXM3",38,0)
 I $L($P(X,U,6))  S LRFSCH=$P(X,U,6)
"RTN","ORWDXM3",39,0)
 I $L($P(X,U,7))  S PSJNOPC=$P(X,U,7)
"RTN","ORWDXM3",40,0)
 I $L($P(X,U,8))  S GMRCNOPD=$P(X,U,8)
"RTN","ORWDXM3",41,0)
 I $L($P(X,U,9))  S GMRCNOAT=$P(X,U,9)
"RTN","ORWDXM3",42,0)
 I $L($P(X,U,10)) S GMRCREAF=$P(X,U,10)
"RTN","ORWDXM3",43,0)
 Q
"RTN","ORWDXM3",44,0)
DLGINFO(IEN,MODE)    ; return information about a dialog
"RTN","ORWDXM3",45,0)
 ; IEN=DlgIEN or ORIFN, MODE=0:Dlg,1:Copy,2:Change
"RTN","ORWDXM3",46,0)
 ; RESULT=DlgIEN^DlgType^FormID^DGrp
"RTN","ORWDXM3",47,0)
 ; If MODE="1;T",don't check "PS MEDS" for transfer order
"RTN","ORWDXM3",48,0)
 ; PSMDGP=1: Unit/Dose  Group
"RTN","ORWDXM3",49,0)
 ; PSMDGP=2: OutPatient Group
"RTN","ORWDXM3",50,0)
 N X0,DLGIEN,TYP,FID,DGRP,PSMDGP,ISXF
"RTN","ORWDXM3",51,0)
 S PSMDGP=0,ISXF=""
"RTN","ORWDXM3",52,0)
 S ISXF=$P(MODE,";",2)
"RTN","ORWDXM3",53,0)
 S MODE=+MODE
"RTN","ORWDXM3",54,0)
 S DLGIEN=IEN I MODE,(ISXF'="T") D
"RTN","ORWDXM3",55,0)
 . S DLGIEN=+$P($G(^OR(100,+IEN,0)),U,5)
"RTN","ORWDXM3",56,0)
 . I $P(^ORD(101.41,DLGIEN,0),U)="PS MEDS" D
"RTN","ORWDXM3",57,0)
 . . N PTCAT S PTCAT=$P($G(^OR(100,+IEN,0)),U,12)
"RTN","ORWDXM3",58,0)
 . . I PTCAT="I" S DLGIEN=$O(^ORD(101.41,"B","PSJ OR PAT OE",0)),PSMDGP=1
"RTN","ORWDXM3",59,0)
 . . I PTCAT="O" S DLGIEN=$O(^ORD(101.41,"B","PSO OERR",0)),PSMDGP=2
"RTN","ORWDXM3",60,0)
 S X0=$G(^ORD(101.41,DLGIEN,0)),TYP=$P(X0,U,4),DGRP=$P(X0,U,5)
"RTN","ORWDXM3",61,0)
 I MODE S DGRP=+$P($G(^OR(100,+IEN,0)),U,11)
"RTN","ORWDXM3",62,0)
 ; for copy or change, if the base dialog has changed, use it's info 
"RTN","ORWDXM3",63,0)
 I MODE,$G(ORDIALOG),(+DLGIEN'=+ORDIALOG),(PSMDGP=0) D
"RTN","ORWDXM3",64,0)
 . S DLGIEN=+ORDIALOG,DGRP=$P(^ORD(101.41,+ORDIALOG,0),U,5)
"RTN","ORWDXM3",65,0)
 D FORMID^ORWDXM(.FID,DLGIEN)
"RTN","ORWDXM3",66,0)
 Q DLGIEN_U_TYP_U_FID_U_DGRP
"RTN","ORWDXM3",67,0)
 ;
"RTN","ORWDXM3",68,0)
CHKDSBL(LST,ID,MODE)  ; return message if dialog disabled
"RTN","ORWDXM3",69,0)
 ; ID=DlgIEN or ORIFN, MODE=0:Dialog,1:Copy,2:Change
"RTN","ORWDXM3",70,0)
 ; LST=QL_REJECT + disabled message or unchanged
"RTN","ORWDXM3",71,0)
 S DLGIEN=+ID I MODE S DLGIEN=+$P($G(^OR(100,+ID,0)),U,5)
"RTN","ORWDXM3",72,0)
 S X0=$G(^ORD(101.41,DLGIEN,0)),X=$P(X0,U,3)
"RTN","ORWDXM3",73,0)
 I '$L(X),($P(X0,U,4)="Q") D  ; check default dialog
"RTN","ORWDXM3",74,0)
 . S DLGIEN=+$$DEFDLG^ORWDXQ($P(X0,U,5))
"RTN","ORWDXM3",75,0)
 . S X=$P($G(^ORD(101.41,DLGIEN,0)),U,3)
"RTN","ORWDXM3",76,0)
 I $L(X) D
"RTN","ORWDXM3",77,0)
 . I MODE D GETTXT^ORWORR(.LST,ID) S LST(.6)="",LST(.7)="Cannot "_$S(MODE=1:"Copy",1:"Change")_" -"
"RTN","ORWDXM3",78,0)
 . S LST(0)="8^0",LST(.5)="Dialog Disabled:  "_X
"RTN","ORWDXM3",79,0)
 Q
"RTN","ORWDXM3",80,0)
CHKVACT(LST,ID,MODE,ORNP)  ; return message if action not valid
"RTN","ORWDXM3",81,0)
 ; ID=DlgIEN or ORIFN, MODE=0:Dialog,1:Copy,2:Change
"RTN","ORWDXM3",82,0)
 ; LST=QL_REJECT + invalid action message or unchanged
"RTN","ORWDXM3",83,0)
 Q:'MODE  ; not an action on an order
"RTN","ORWDXM3",84,0)
 N X,ACT S ACT=$S(MODE=1:"RW",MODE=2:"XX",1:"")
"RTN","ORWDXM3",85,0)
 D VALID^ORWDXA(.X,ID,ACT,ORNP)
"RTN","ORWDXM3",86,0)
 I $L(X) D GETTXT^ORWORR(.LST,ID) D
"RTN","ORWDXM3",87,0)
 . S LST(0)="8^0",LST(.5)=X,LST(.6)="",LST(.7)="Cannot "_$S(MODE=1:"Copy",1:"Change")_" -"
"RTN","ORWDXM3",88,0)
 Q
"RTN","ORWDXM3",89,0)
CHKCOPY(LST,ID,FLDS)  ; return message if can't copy this order
"RTN","ORWDXM3",90,0)
 ; ID=ORIFN;ACT FLDS=EventType in 7th piece
"RTN","ORWDXM3",91,0)
 ; LST=QL_REJECT + cannot copy message or unchanged
"RTN","ORWDXM3",92,0)
 I "^A^D^T^"'[(U_$E($P(FLDS,U,7))_U) Q             ; not event delayed
"RTN","ORWDXM3",93,0)
 N PKG S PKG=$P($G(^OR(100,+ID,0)),U,14)
"RTN","ORWDXM3",94,0)
 S PKG=$$NMSP^ORCD(PKG) I PKG="OR"!(PKG="PS") Q    ; xfer meds, generics
"RTN","ORWDXM3",95,0)
 N ORWCAT S ORWCAT=$P($G(^OR(100,+ID,0)),U,12)
"RTN","ORWDXM3",96,0)
 I ORWCAT="I",("^A^T^"[(U_$E($P(FLDS,U,7))_U)) Q   ; admit, xfer inpt
"RTN","ORWDXM3",97,0)
 I ORWCAT="O",$E($P(FLDS,U,7))="D" Q               ; discharge outpt
"RTN","ORWDXM3",98,0)
 D GETTXT^ORWORR(.LST,ID)
"RTN","ORWDXM3",99,0)
 I ORWCAT="I" S LST(.5)="inpatient order to outpatient -"
"RTN","ORWDXM3",100,0)
 I ORWCAT="O" S LST(.5)="outpatient order to inpatient -"
"RTN","ORWDXM3",101,0)
 S LST(.5)="Cannot copy the following "_LST(.5)
"RTN","ORWDXM3",102,0)
 S LST(0)="8^0",LST(.7)=""
"RTN","ORWDXM3",103,0)
 Q
"RTN","ORWDXM3",104,0)
BLD4CHG(LST,ID,FLDS)  ; build responses for an edit
"RTN","ORWDXM3",105,0)
 ; ID=ORIFN;ACT FLDS=unused right now
"RTN","ORWDXM3",106,0)
 ; LST(0)=Qlvl^RespID(XOrderID)^DlgIEN^DlgType^FormID^DGrp
"RTN","ORWDXM3",107,0)
 S LST(0)="0^X"_ID_U_$$DLGINFO(+ID,2)
"RTN","ORWDXM3",108,0)
 S $P(LST(0),U,4)="X"
"RTN","ORWDXM3",109,0)
 Q
"RTN","ORWDXR")
0^6^B25444838
"RTN","ORWDXR",1,0)
ORWDXR ; SLC/KCM/JDL - Utilites for Order Actions;05:33 AM  20 May 1998;2/23/98  16:18 [12/31/01 6:36pm];Jan 19 2002
"RTN","ORWDXR",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,85,125,131**;Dec 17, 1997
"RTN","ORWDXR",3,0)
 ;
"RTN","ORWDXR",4,0)
ISREL(VAL,ORIFN)        ; Return true if an order has been released
"RTN","ORWDXR",5,0)
 N STS S STS=$P(^OR(100,+ORIFN,3),U,3)
"RTN","ORWDXR",6,0)
 S VAL=$S(STS=10:0,STS=11:0,1:1)  ; false if delayed or unreleased order
"RTN","ORWDXR",7,0)
 Q
"RTN","ORWDXR",8,0)
RENEW(REC,ORIFN,ORVP,ORNP,ORL,FLDS) ; Renew an order
"RTN","ORWDXR",9,0)
 N ORDG
"RTN","ORWDXR",10,0)
 N ORDUZ,ORSTS,OREVENT,ORCAT,ORDA,ORTS,ORNEW,ORCHECK,ORLOG,ORPKG
"RTN","ORWDXR",11,0)
 N ORDIALOG,PRMT,X0
"RTN","ORWDXR",12,0)
 S ORVP=ORVP_";DPT(",ORL(2)=ORL_";SC(",ORL=ORL(2)
"RTN","ORWDXR",13,0)
 S X0=^OR(100,+ORIFN,0)
"RTN","ORWDXR",14,0)
 S ORDG=$P(X0,U,11)
"RTN","ORWDXR",15,0)
 S ORPKG=$P(X0,U,14)
"RTN","ORWDXR",16,0)
 I $P(X0,U,5)["101.41," D                        ; version 3
"RTN","ORWDXR",17,0)
 . S ORDIALOG=+$P(X0,U,5),ORCAT=$P(^OR(100,+ORIFN,0),U,12)
"RTN","ORWDXR",18,0)
 . D GETDLG^ORCD(ORDIALOG),GETORDER^ORCD(+ORIFN)
"RTN","ORWDXR",19,0)
 E  D                                            ; version 2.5 generic
"RTN","ORWDXR",20,0)
 . S ORDIALOG=$O(^ORD(101.41,"B","OR GXTEXT WORD PROCESSING ORDE",0))
"RTN","ORWDXR",21,0)
 . D GETDLG^ORCD(ORDIALOG)
"RTN","ORWDXR",22,0)
 . S PRMT=$O(^ORD(101.41,"B","OR GTX WORD PROCESSING 1",0))
"RTN","ORWDXR",23,0)
 . S ORDIALOG(PRMT,1)=$NA(^TMP("ORWORD",$J,PRMT,1))
"RTN","ORWDXR",24,0)
 . M ^TMP("ORWORD",$J,PRMT,1)=^OR(100,+ORIFN,1)
"RTN","ORWDXR",25,0)
 . S PRMT=$O(^ORD(101.41,"B","OR GTX START DATE/TIME",0))
"RTN","ORWDXR",26,0)
 . I $P(X0,U,9) S ORDIALOG(PRMT,1)=$P(X0,U,9)
"RTN","ORWDXR",27,0)
 I +FLDS(1)=999 D  ; generic order
"RTN","ORWDXR",28,0)
 . S ORDIALOG($$PTR^ORCD("OR GTX START DATE/TIME"),1)=$P(FLDS(1),U,2)
"RTN","ORWDXR",29,0)
 . S ORDIALOG($$PTR^ORCD("OR GTX STOP DATE/TIME"),1)=$P(FLDS(1),U,3)
"RTN","ORWDXR",30,0)
 I ($O(^ORD(101.41,"AB","PS MEDS",0))>0),(+FLDS(1)=130)!(+FLDS(1)=135)!(+FLDS(1)=140),'$L($G(ORDIALOG($$PTR^ORCD("OR GTX SIG"),1))) D
"RTN","ORWDXR",31,0)
 . N ORDOSE,ORDRUG,ORCAT,ORWPSOI,PROMPT,DRUG
"RTN","ORWDXR",32,0)
 . S ORCAT=$P($G(^OR(100,+ORIFN,0)),U,12)
"RTN","ORWDXR",33,0)
 . S PROMPT=$$PTR^ORCD("OR GTX INSTRUCTIONS")
"RTN","ORWDXR",34,0)
 . S ORDRUG=$G(ORDIALOG($$PTR^ORCD("OR GTX DISPENSE DRUG"),1))
"RTN","ORWDXR",35,0)
 . S ORWPSOI=+$G(ORDIALOG($$PTR^ORCD("OR GTX ORDERABLE ITEM"),1))
"RTN","ORWDXR",36,0)
 . I ORWPSOI S ORWPSOI=+$P($G(^ORD(101.43,+ORWPSOI,0)),U,2)
"RTN","ORWDXR",37,0)
 . D DOSE^PSSORUTL(.ORDOSE,ORWPSOI,$S(ORCAT="I":"U",1:"O"),ORVP)       ; dflt doses
"RTN","ORWDXR",38,0)
 . D D1^ORCDPS2  ; set up ORDOSE
"RTN","ORWDXR",39,0)
 . S DRUG=$G(ORDOSE("DD",+ORDRUG))
"RTN","ORWDXR",40,0)
 . I DRUG,ORCAT="O" D RESETID^ORCDPS
"RTN","ORWDXR",41,0)
 . D SIG^ORCDPS2
"RTN","ORWDXR",42,0)
 I +FLDS(1)=140 D  ; outpatient meds
"RTN","ORWDXR",43,0)
 . K ORDIALOG($$PTR^ORCD("OR GTX START DATE"),1) ; remove effective dt
"RTN","ORWDXR",44,0)
 . S ORDIALOG($$PTR^ORCD("OR GTX REFILLS"),1)=$P(FLDS(1),U,4)
"RTN","ORWDXR",45,0)
 . S ORDIALOG($$PTR^ORCD("OR GTX ROUTING"),1)=$P(FLDS(1),U,5)
"RTN","ORWDXR",46,0)
 . S PRMT=$$PTR^ORCD("OR GTX WORD PROCESSING 1")
"RTN","ORWDXR",47,0)
 . K ^TMP("ORWORD",$J,PRMT,1)
"RTN","ORWDXR",48,0)
 . S I=1 F  S I=$O(FLDS(I)) Q:'I  S ^TMP("ORWORD",$J,PRMT,1,I-1,0)=FLDS(I)
"RTN","ORWDXR",49,0)
 . S ^TMP("ORWORD",$J,PRMT,1,0)=U_U_(I-1)_U_(I-1)_U_DT_U
"RTN","ORWDXR",50,0)
 . S ORDIALOG(PRMT,1)=$NA(^TMP("ORWORD",$J,PRMT,1))
"RTN","ORWDXR",51,0)
 D CHKPI
"RTN","ORWDXR",52,0)
 D RN^ORCSAVE
"RTN","ORWDXR",53,0)
 S REC="" S ORIFN=+ORIFN_";"_ORDA D GETBYIFN^ORWORR(.REC,ORIFN)
"RTN","ORWDXR",54,0)
 Q
"RTN","ORWDXR",55,0)
RNWFLDS(LST,ORIFN)      ; Return fields for renew action
"RTN","ORWDXR",56,0)
 ; LST(0)=RenewType^Start^Stop^Refills^Pickup  LST(n)=Comments
"RTN","ORWDXR",57,0)
 N X0,DG,PKG,RNWTYPE,START,STOP,REFILLS
"RTN","ORWDXR",58,0)
 S ORIFN=+ORIFN,X0=^OR(100,ORIFN,0),DG=$P(X0,U,11),PKG=$P(X0,U,14)
"RTN","ORWDXR",59,0)
 S PKG=$E($P(^DIC(9.4,PKG,0),U,2),1,2),DG=$P(^ORD(100.98,DG,0),U,3)
"RTN","ORWDXR",60,0)
 S LST(0)=$S(PKG="OR":999,PKG="PS"&(DG="O RX"):140,PKG="PS"&(DG="UD RX"):130,1:0)
"RTN","ORWDXR",61,0)
 I +LST(0)=140 D
"RTN","ORWDXR",62,0)
 . S LST(0)=LST(0)_U_U_U_+$$VAL(ORIFN,"REFILLS")_U_$$VAL(ORIFN,"PICKUP")
"RTN","ORWDXR",63,0)
 . D WPVAL(.LST,ORIFN,"COMMENT")
"RTN","ORWDXR",64,0)
 I +LST(0)=999 S LST(0)=LST(0)_U_$$VAL(ORIFN,"START")_U_$$VAL(ORIFN,"STOP")
"RTN","ORWDXR",65,0)
 ; make sure start/stop times are relative times, otherwise use NOW, no Stop
"RTN","ORWDXR",66,0)
 I +$P(LST(0),U,2) S $P(LST(0),U,2)="NOW"
"RTN","ORWDXR",67,0)
 I +$P(LST(0),U,3)!($P(LST(0),U,3)="0") S $P(LST(0),U,3)=""
"RTN","ORWDXR",68,0)
 Q
"RTN","ORWDXR",69,0)
VAL(ORIFN,ID)   ; Return value for order response
"RTN","ORWDXR",70,0)
 N DA S DA=+$O(^OR(100,ORIFN,4.5,"ID",ID,0))
"RTN","ORWDXR",71,0)
 Q $G(^OR(100,ORIFN,4.5,DA,1))
"RTN","ORWDXR",72,0)
WPVAL(TXT,ORIFN,ID)    ; Return word processing value
"RTN","ORWDXR",73,0)
 N DA S DA=+$O(^OR(100,ORIFN,4.5,"ID",ID,0))
"RTN","ORWDXR",74,0)
 S I=0 F  S I=$O(^OR(100,ORIFN,4.5,DA,2,I)) Q:'I  S TXT(I)=^(I,0)
"RTN","ORWDXR",75,0)
 Q
"RTN","ORWDXR",76,0)
CHKACT(ORDERID,ORWSIG,ORWREL,ORWNATR) ; Return error if can't sign/release order
"RTN","ORWDXR",77,0)
 N ORACT,ORWERR
"RTN","ORWDXR",78,0)
 ; begin case
"RTN","ORWDXR",79,0)
 S ORACT=""
"RTN","ORWDXR",80,0)
 I (ORWSIG=1),$D(^XUSEC("ORES",DUZ)) S ORACT="ES" G XC1
"RTN","ORWDXR",81,0)
 I ORWREL,(ORWNATR="W") S ORACT="OC" G XC1
"RTN","ORWDXR",82,0)
 I ORWREL S ORACT="RS" S:$P($G(^OR(100,+ORDERID,0)),U,16)<2 ORACT="ES"
"RTN","ORWDXR",83,0)
XC1 ; end case
"RTN","ORWDXR",84,0)
 S ORWERR=""
"RTN","ORWDXR",85,0)
 I $L(ORACT),$$VALID^ORCACT0(ORDERID,ORACT,.ORWERR,ORWNATR) S ORWERR=""
"RTN","ORWDXR",86,0)
 Q ORWERR
"RTN","ORWDXR",87,0)
CHKPI ; -- take off PI from Sig, if PI tailed there
"RTN","ORWDXR",88,0)
 N PROMPT,CNT,ITM,TYPE,INST,VALUE,IDX1,IDX2,ASIG,API,THESIG,TEMP
"RTN","ORWDXR",89,0)
 S (PROMPT,CNT,IDX1,IDX2)=0
"RTN","ORWDXR",90,0)
 S API="",ASIG=""
"RTN","ORWDXR",91,0)
 F  S PROMPT=$O(ORDIALOG(PROMPT)) Q:PROMPT'>0  D
"RTN","ORWDXR",92,0)
 . S ITM=$G(ORDIALOG(PROMPT)) Q:'ITM
"RTN","ORWDXR",93,0)
 . S TYPE=$E($G(ORDIALOG(PROMPT,0))) Q:'$L(TYPE)
"RTN","ORWDXR",94,0)
 . S INST=0 F  S INST=$O(ORDIALOG(PROMPT,INST)) Q:INST'>0  D
"RTN","ORWDXR",95,0)
 . . S VALUE=$G(ORDIALOG(PROMPT,INST)) Q:VALUE=""  S CNT=CNT+1
"RTN","ORWDXR",96,0)
 . . I TYPE="W",$P(ITM,U,2)="SIG" D
"RTN","ORWDXR",97,0)
 . . . S IDX1=PROMPT,IDX2=INST
"RTN","ORWDXR",98,0)
 . . . M TEMP(CNT,2)=@VALUE I $D(TEMP(CNT,2,1))>0 S:$D(TEMP(CNT,2,1,0)) ASIG=TEMP(CNT,2,1,0)
"RTN","ORWDXR",99,0)
 . . I TYPE="W",$P(ITM,U,2)="PI" D
"RTN","ORWDXR",100,0)
 . . . M TEMP(CNT,2)=@VALUE I $D(TEMP(CNT,2,1))>0 S:$D(TEMP(CNT,2,1,0)) API=TEMP(CNT,2,1,0)
"RTN","ORWDXR",101,0)
 S IDX=$F(ASIG,API)
"RTN","ORWDXR",102,0)
 I (IDX>0)&($L(API)>0) D
"RTN","ORWDXR",103,0)
 . S THESIG=$E(ASIG,1,IDX-$L(API)-1)
"RTN","ORWDXR",104,0)
 . S VALUE=$G(ORDIALOG(IDX1,IDX2))
"RTN","ORWDXR",105,0)
 . S @VALUE@(1,0)=THESIG
"RTN","ORWDXR",106,0)
 K TEMP,PROMPT,CNT,ITM,TYPE,INST,VALUE,IDX1,IDX2,ASIG,API,THESIG
"RTN","ORWDXR",107,0)
 Q
"RTN","ORWDXR",108,0)
GTORITM(Y,ORIFN)        ;-- Get back the orderable item IEN
"RTN","ORWDXR",109,0)
 S ORIFN=+ORIFN
"RTN","ORWDXR",110,0)
 S Y=$$VALUE^ORCSAVE2(ORIFN,"ORDERABLE")
"RTN","ORWDXR",111,0)
 Q
"RTN","ORWDXR",112,0)
GETPKG(Y,IFN) ;Get package for an order
"RTN","ORWDXR",113,0)
 N ORDERID,PKGID
"RTN","ORWDXR",114,0)
 Q:+IFN<1
"RTN","ORWDXR",115,0)
 S ORDERID=+IFN,Y=""
"RTN","ORWDXR",116,0)
 S PKGID=$P(^OR(100,ORDERID,0),U,14)
"RTN","ORWDXR",117,0)
 S:PKGID>0 Y=$P(^DIC(9.4,PKGID,0),U,2)
"RTN","ORWDXR",118,0)
 Q
"RTN","ORWUL")
0^9^B45508889
"RTN","ORWUL",1,0)
ORWUL ; SLC/KCM/JLI - Listview Selection ;1/25/02  14:09 [2/4/02 12:22pm]
"RTN","ORWUL",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**85,117,131**;Dec 17, 1997
"RTN","ORWUL",3,0)
 ;
"RTN","ORWUL",4,0)
QV4DG(VAL,DGRP) ; return the quick order list, given a display group name
"RTN","ORWUL",5,0)
 N NM
"RTN","ORWUL",6,0)
 S VAL="0^0"
"RTN","ORWUL",7,0)
 I 'DGRP S DGRP=+$O(^ORD(100.98,"B",DGRP,0))
"RTN","ORWUL",8,0)
 S NM=$$GET^XPAR("ALL","ORWDQ QUICK VIEW",DGRP,"I")
"RTN","ORWUL",9,0)
 Q:'$L(NM)
"RTN","ORWUL",10,0)
 D QV4NM(.VAL,NM)
"RTN","ORWUL",11,0)
 Q
"RTN","ORWUL",12,0)
QV4NM(VAL,QVNAM)       ; return the current quick list and item count
"RTN","ORWUL",13,0)
 ; VAL: ListIEN^ItemCount
"RTN","ORWUL",14,0)
 N J,CNT ;117
"RTN","ORWUL",15,0)
 S VAL=+$O(^ORD(101.44,"B",QVNAM,0))
"RTN","ORWUL",16,0)
 S (J,CNT)=0 F  S J=$O(^ORD(101.44,VAL,10,J)) Q:'+J  I '$$QODIS(VAL,J) S CNT=CNT+1 ;117
"RTN","ORWUL",17,0)
 S $P(VAL,U,2)=CNT ;117
"RTN","ORWUL",18,0)
 Q
"RTN","ORWUL",19,0)
QVSUB(LST,IEN,FIRST,LAST)       ; return subset of orders in view
"RTN","ORWUL",20,0)
 N I,J,FNODE,LNODE,ID ;117
"RTN","ORWUL",21,0)
 I $L(FIRST)>0,($L(LAST)>0) D
"RTN","ORWUL",22,0)
 . S FNODE=+FIRST,LNODE=+LAST
"RTN","ORWUL",23,0)
 . F I=FNODE:1:LNODE D
"RTN","ORWUL",24,0)
 .. I $D(^ORD(101.44,IEN,10,I,0))>0 D
"RTN","ORWUL",25,0)
 ... I '$$QODIS(IEN,I) S LST(I)=^ORD(101.44,IEN,10,I,0)
"RTN","ORWUL",26,0)
 E  D
"RTN","ORWUL",27,0)
 . S (I,J)=0 F  S I=$O(^ORD(101.44,IEN,10,I)) Q:'+I  I '$$QODIS(IEN,I) S J=J+1,LST(J)=^ORD(101.44,IEN,10,I,0) ;117
"RTN","ORWUL",28,0)
 Q
"RTN","ORWUL",29,0)
QODIS(IEN,SUB) ;Determines if personal quick order is disabled
"RTN","ORWUL",30,0)
 ;returns 1 if it is else 0.  This section added with patch 117
"RTN","ORWUL",31,0)
 I $P($G(^ORD(101.41,+$P($G(^ORD(101.44,IEN,10,SUB,0)),"^"),0)),"^",3)'="" Q 1
"RTN","ORWUL",32,0)
 Q 0
"RTN","ORWUL",33,0)
QVIDX(VAL,IEN,FROM)     ; return index of item beginning with FROM
"RTN","ORWUL",34,0)
 N I,X
"RTN","ORWUL",35,0)
 S VAL=0
"RTN","ORWUL",36,0)
 S X=$O(^ORD(101.44,IEN,10,"C",FROM))
"RTN","ORWUL",37,0)
 I '$L(X) Q
"RTN","ORWUL",38,0)
 S I=$O(^ORD(101.44,IEN,10,"C",X,0))
"RTN","ORWUL",39,0)
 Q:'I
"RTN","ORWUL",40,0)
 S VAL=+I_U_X
"RTN","ORWUL",41,0)
 Q
"RTN","ORWUL",42,0)
FV4DG(VAL,DGNM)       ; return the current full list & item count
"RTN","ORWUL",43,0)
 S VAL=$O(^ORD(101.44,"B","ORWDSET "_DGNM,0))
"RTN","ORWUL",44,0)
 I 'VAL D
"RTN","ORWUL",45,0)
 . N UPDTIME,ATTEMPT
"RTN","ORWUL",46,0)
 . S UPDTIME=$G(^ORD(101.43,"AH","S."_DGNM)),ATTEMPT=0
"RTN","ORWUL",47,0)
 . I UPDTIME="" S UPDTIME=$H,^ORD(101.43,"AH","S."_DGNM)=UPDTIME
"RTN","ORWUL",48,0)
 . D FVBLD
"RTN","ORWUL",49,0)
 . S VAL=$O(^ORD(101.44,"B","ORWDSET "_DGNM,0))
"RTN","ORWUL",50,0)
 I ($P(^ORD(101.44,+VAL,0),U,6)'=$G(^ORD(101.43,"AH","S."_DGNM))) D
"RTN","ORWUL",51,0)
 . ; -- see if a task is already queued to rebuild this
"RTN","ORWUL",52,0)
 . L +^XTMP("ORWDSET "_DGNM):2 E  Q
"RTN","ORWUL",53,0)
 . N ZTSK S ZTSK=+$G(^XTMP("ORWDSET "_DGNM,"TASK"))
"RTN","ORWUL",54,0)
 . I ZTSK D ISQED^%ZTLOAD S ZTSK=+ZTSK(0)
"RTN","ORWUL",55,0)
 . I ZTSK L -^XTMP("ORWDSET "_DGNM) Q
"RTN","ORWUL",56,0)
 . ; -- create a task to rebuild the list
"RTN","ORWUL",57,0)
 . D FVBLDQ(DGNM)
"RTN","ORWUL",58,0)
 . L -^TMP("ORWDSET "_DGNM)
"RTN","ORWUL",59,0)
 S $P(VAL,U,2)=$P($G(^ORD(101.44,+VAL,20,0)),U,4)
"RTN","ORWUL",60,0)
 Q
"RTN","ORWUL",61,0)
FVSUB(LST,IEN,FIRST,LAST)       ; return subset of orders in view
"RTN","ORWUL",62,0)
 N I
"RTN","ORWUL",63,0)
 F I=FIRST:1:LAST S LST(I)=^ORD(101.44,IEN,20,I,0)
"RTN","ORWUL",64,0)
 Q
"RTN","ORWUL",65,0)
FVIDX(VAL,IEN,FROM)     ; return index of item beginning with FROM
"RTN","ORWUL",66,0)
 N I,X
"RTN","ORWUL",67,0)
 S VAL=0
"RTN","ORWUL",68,0)
 S X=$O(^ORD(101.44,IEN,20,"C",FROM))
"RTN","ORWUL",69,0)
 I '$L(X) Q
"RTN","ORWUL",70,0)
 S I=$O(^ORD(101.44,IEN,20,"C",X,0))
"RTN","ORWUL",71,0)
 Q:'I
"RTN","ORWUL",72,0)
 S VAL=+I_U_X
"RTN","ORWUL",73,0)
 Q
"RTN","ORWUL",74,0)
FVBLDQ(DGNM,ATTEMPT)    ; queue rebuild of set
"RTN","ORWUL",75,0)
 N ZTRTN,ZTIO,ZTDTH,ZTSAVE,ZTDESC,ZTUCI,ZTCPU,ZTPRI,ZTKIL,ZTSYNC,ZTSK
"RTN","ORWUL",76,0)
 N UPDTIME S UPDTIME=$G(^ORD(101.43,"AH","S."_DGNM))
"RTN","ORWUL",77,0)
 I '$G(UPDTIME) S UPDTIME=$H,^ORD(101.43,"AH","S."_DGNM)=UPDTIME
"RTN","ORWUL",78,0)
 S ATTEMPT=$G(ATTEMPT)+1
"RTN","ORWUL",79,0)
 S ZTRTN="FVBLD^ORWUL",ZTIO="",ZTDTH=$$FMADD^XLFDT($$NOW^XLFDT,0,0,2)
"RTN","ORWUL",80,0)
 S ZTSAVE("ATTEMPT")="",ZTSAVE("UPDTIME")="",ZTSAVE("DGNM")=""
"RTN","ORWUL",81,0)
 S ZTDESC="Rebuild quick view for "_DGNM
"RTN","ORWUL",82,0)
 D ^%ZTLOAD
"RTN","ORWUL",83,0)
 S ^XTMP("ORWDSET "_DGNM,0)=$$FMADD^XLFDT($$NOW^XLFDT,2)
"RTN","ORWUL",84,0)
 S ^XTMP("ORWDSET "_DGNM,"TASK")=ZTSK
"RTN","ORWUL",85,0)
 Q
"RTN","ORWUL",86,0)
FVBLD ; rebuild an ORWSET entry
"RTN","ORWUL",87,0)
 ; ATTEMPT, UPDTIME, DGNM expected in environment
"RTN","ORWUL",88,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","ORWUL",89,0)
 I $D(ZTQUEUED),(ATTEMPT<20),(UPDTIME'=$G(^ORD(101.43,"AH","S."_DGNM))) D FVBLDQ(DGNM,ATTEMPT) Q 
"RTN","ORWUL",90,0)
 ; -- create new entry in 101.44 for the set
"RTN","ORWUL",91,0)
 N FDA,FDAIEN,LVW,ADDL
"RTN","ORWUL",92,0)
 S FDA(101.44,"+1,",.01)="ORWDNEW "_DGNM
"RTN","ORWUL",93,0)
 S FDA(101.44,"+1,",6)=UPDTIME
"RTN","ORWUL",94,0)
 D UPDATE^DIE("","FDA","FDAIEN")
"RTN","ORWUL",95,0)
 S LVW=+FDAIEN(1) I 'LVW G FVBLDX
"RTN","ORWUL",96,0)
 ; -- copy all the active items into the list multiple
"RTN","ORWUL",97,0)
 N ASET,SEQ,NM,OI,INACT,CURTM,NMLST,X,Y
"RTN","ORWUL",98,0)
 S ASET="S."_DGNM,SEQ=0,CURTM=$$NOW^XLFDT
"RTN","ORWUL",99,0)
 K ^ORD(101.44,LVW,20)
"RTN","ORWUL",100,0)
 S ^ORD(101.44,LVW,20,0)="^101.442PA"
"RTN","ORWUL",101,0)
 S NM="" F  S NM=$O(^ORD(101.43,ASET,NM)) Q:NM=""  D
"RTN","ORWUL",102,0)
 . K NMLST
"RTN","ORWUL",103,0)
 . S OI=0 F  S OI=$O(^ORD(101.43,ASET,NM,OI)) Q:'OI  D
"RTN","ORWUL",104,0)
 . . S X=^ORD(101.43,ASET,NM,OI),INACT=$P(X,U,3)
"RTN","ORWUL",105,0)
 . . I INACT,CURTM>INACT Q
"RTN","ORWUL",106,0)
 . . I 'X S ADDL=""
"RTN","ORWUL",107,0)
 . . E    S ADDL="     <"_$P(X,U,4)_">"
"RTN","ORWUL",108,0)
 . . I $P($G(^ORD(101.43,OI,"PS")),U,6) S ADDL=ADDL_"     NF"
"RTN","ORWUL",109,0)
 . . S NMLST($P(X,U,2)_ADDL,OI)=""
"RTN","ORWUL",110,0)
 . I '$D(NMLST) Q
"RTN","ORWUL",111,0)
 . S X="" F  S X=$O(NMLST(X)) Q:X=""  D
"RTN","ORWUL",112,0)
 . . S Y=0 F  S Y=$O(NMLST(X,Y)) Q:'Y  D
"RTN","ORWUL",113,0)
 . . . S SEQ=SEQ+1
"RTN","ORWUL",114,0)
 . . . S ^ORD(101.44,LVW,20,SEQ,0)=Y_U_X
"RTN","ORWUL",115,0)
 . . . S ^ORD(101.44,LVW,20,"C",$$UP^XLFSTR(X),SEQ)=""
"RTN","ORWUL",116,0)
 S ^ORD(101.44,LVW,20,0)="^101.442PA^"_SEQ_U_SEQ
"RTN","ORWUL",117,0)
 ; -- switch the names of the entries (SET->OLD, NEW->SET)
"RTN","ORWUL",118,0)
 L +^ORD(101.44,"ORWDSET "_DGNM):60
"RTN","ORWUL",119,0)
 S IEN=$O(^ORD(101.44,"B","ORWDSET "_DGNM,0))
"RTN","ORWUL",120,0)
 I IEN K FDA S FDA(101.44,IEN_",",.01)="ORWDOLD "_$H
"RTN","ORWUL",121,0)
 D FILE^DIE("","FDA")
"RTN","ORWUL",122,0)
 K FDA S FDA(101.44,LVW_",",.01)="ORWDSET "_DGNM
"RTN","ORWUL",123,0)
 D FILE^DIE("","FDA")
"RTN","ORWUL",124,0)
 L -^ORD(101.44,"ORWDSET "_DGNM)
"RTN","ORWUL",125,0)
FVBLDX ; -- clean up ^XTMP node
"RTN","ORWUL",126,0)
 K ^XTMP("ORWDSET "_DGNM)
"RTN","ORWUL",127,0)
 D FVCLN
"RTN","ORWUL",128,0)
 Q
"RTN","ORWUL",129,0)
FVCLN ; clean up old set-type entries in the 101.44
"RTN","ORWUL",130,0)
 N LNM,DIK,DA
"RTN","ORWUL",131,0)
 S LNM="ORWDOLD",DIK="^ORD(101.44,"
"RTN","ORWUL",132,0)
 F  S LNM=$O(^ORD(101.44,"B",LNM)) Q:$E(LNM,1,7)'="ORWDOLD"  D
"RTN","ORWUL",133,0)
 . I ($H-$P(LNM," ",2))<2 Q  ; wait until entry is 2 days old
"RTN","ORWUL",134,0)
 . S DA=0 F  S DA=$O(^ORD(101.44,"B",LNM,DA)) Q:'DA  D ^DIK
"RTN","ORWUL",135,0)
 Q
"RTN","ORWUL",136,0)
QVSAVE(LVW,X,QLST)       ; Save a quick order list
"RTN","ORWUL",137,0)
 ;    X:  Name of List
"RTN","ORWUL",138,0)
 ; QLST: Ptr101.41^DisplayName
"RTN","ORWUL",139,0)
 N DIC,DA,DLAYGO,Y,LVW,SEQ,I
"RTN","ORWUL",140,0)
 S DIC="^ORD(101.44,",DIC(0)="L",DLAYGO=101.44,LVW=0
"RTN","ORWUL",141,0)
 D ^DIC Q:'Y
"RTN","ORWUL",142,0)
 S LVW=+Y,SEQ=0
"RTN","ORWUL",143,0)
 K ^ORD(101.44,LVW,10)
"RTN","ORWUL",144,0)
 S ^ORD(101.44,LVW,10,0)="^101.441PA"
"RTN","ORWUL",145,0)
 S I=0  F  S I=$O(QLST(I)) Q:'I  D
"RTN","ORWUL",146,0)
 . S SEQ=SEQ+1,^ORD(101.44,LVW,10,SEQ,0)=QLST(I)
"RTN","ORWUL",147,0)
 . S ^ORD(101.44,LVW,10,"C",$$UP^XLFSTR($P(QLST(I),U,2)),SEQ)=""
"RTN","ORWUL",148,0)
 S ^ORD(101.44,LVW,10,0)="^101.441PA^"_SEQ_U_SEQ
"RTN","ORWUL",149,0)
 Q
"RTN","ORWUL",150,0)
MVRX ; move pharmacy quick orders into 101.44
"RTN","ORWUL",151,0)
 D MVQO("O RX")
"RTN","ORWUL",152,0)
 D MVQO("UD RX")
"RTN","ORWUL",153,0)
 Q
"RTN","ORWUL",154,0)
MVALL ; move all quick order lists into 101.44
"RTN","ORWUL",155,0)
 Q:$E($O(^ORD(101.44,"B","ORWDQ")),1,5)="ORWDQ"
"RTN","ORWUL",156,0)
 N SNM
"RTN","ORWUL",157,0)
 D BMES^XPDUTL("Moving personal quick orders into 101.44")
"RTN","ORWUL",158,0)
 F SNM="ANI","CARD","CSLT","CT","DO","IV RX","LAB","MAM","MRI","NM","O RX","PROC","RAD","TF","UD RX","US","VAS","XRAY" D
"RTN","ORWUL",159,0)
 . D MES^XPDUTL("-- moving: "_SNM)
"RTN","ORWUL",160,0)
 . D MVQO(SNM)
"RTN","ORWUL",161,0)
 Q
"RTN","ORWUL",162,0)
MVQO(DGNM)      ; move quick orders
"RTN","ORWUL",163,0)
 N ENT,PAR,TLST,QLST,DLG,X,X0,I,NOP,DNM
"RTN","ORWUL",164,0)
 S PAR=$O(^XTV(8989.51,"B","ORWDQ "_DGNM,0))
"RTN","ORWUL",165,0)
 S ENT="" F  S ENT=$O(^XTV(8989.5,"AC",PAR,ENT)) Q:'ENT  D
"RTN","ORWUL",166,0)
 . K TLST,QLST D GETLST^XPAR(.TLST,ENT,PAR,"I")
"RTN","ORWUL",167,0)
 . S I=0 F  S I=$O(TLST(I)) Q:'I  D
"RTN","ORWUL",168,0)
 . . S DLG=+TLST(I) Q:'DLG
"RTN","ORWUL",169,0)
 . . S X0=$G(^ORD(101.41,DLG,0)) Q:'$L(X0)
"RTN","ORWUL",170,0)
 . . S DNM=$$GET^XPAR(ENT,"ORWDQ DISPLAY NAME",DLG,"I")
"RTN","ORWUL",171,0)
 . . I '$L(DNM) S DNM=$P(^ORD(101.41,DLG,0),U,2)
"RTN","ORWUL",172,0)
 . . S QLST(I)=DLG_U_DNM
"RTN","ORWUL",173,0)
 . S X=$O(^XTV(8989.51,PAR,30,"AG",$P(ENT,";",2),0))
"RTN","ORWUL",174,0)
 . S X=$P(^XTV(8989.51,PAR,30,X,0),U,2)
"RTN","ORWUL",175,0)
 . S X=$P(^XTV(8989.518,X,0),U,2)
"RTN","ORWUL",176,0)
 . S X="ORWDQ "_X_$P(ENT,";")_" "_DGNM
"RTN","ORWUL",177,0)
 . D QVSAVE(.NOP,X,.QLST)
"RTN","ORWUL",178,0)
 . D EN^XPAR(ENT,"ORWDQ QUICK VIEW",DGNM,X)
"RTN","ORWUL",179,0)
 . ; D NDEL^XPAR(ENT,PAR) ; -- add later, after sure about conversion
"RTN","ORWUL",180,0)
 Q
"RTN","ORWUL",181,0)
ZCLEAN ; cleanup ORWDQ entries in Quick View file
"RTN","ORWUL",182,0)
 N ANAM,ANIEN,DIK,DA
"RTN","ORWUL",183,0)
 S ANAM="ORWDQ",DIK="^ORD(101.44,"
"RTN","ORWUL",184,0)
 F  S ANAM=$O(^ORD(101.44,"B",ANAM)) Q:$E(ANAM,1,5)'="ORWDQ"  D
"RTN","ORWUL",185,0)
 . W !,"deleting "_ANAM
"RTN","ORWUL",186,0)
 . S ANIEN=$O(^ORD(101.44,"B",ANAM,0))
"RTN","ORWUL",187,0)
 . S DA=ANIEN D ^DIK
"RTN","ORWUL",188,0)
 W !,"rebuilding entries"
"RTN","ORWUL",189,0)
 D MVALL
"RTN","ORWUL",190,0)
 Q
"RTN","ORY131")
0^^B2994432
"RTN","ORY131",1,0)
ORY131 ;SLC/REV -- postinit rtn for OR*3*131 ;12/13/01  06:25 [2/6/02 8:35am]
"RTN","ORY131",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**131**;Dec 17, 1997
"RTN","ORY131",3,0)
 ;
"RTN","ORY131",4,0)
PRE ; -- preinit
"RTN","ORY131",5,0)
 Q
"RTN","ORY131",6,0)
 ;
"RTN","ORY131",7,0)
POST ; -- postinit
"RTN","ORY131",8,0)
 N VER
"RTN","ORY131",9,0)
 S VER=$P($T(VERSION^ORY131),";",3)
"RTN","ORY131",10,0)
 I +$$PATCH^XPDUTL("TIU*1.0*109") D CPREG
"RTN","ORY131",11,0)
 D MAIL
"RTN","ORY131",12,0)
 Q
"RTN","ORY131",13,0)
 ;
"RTN","ORY131",14,0)
CPREG ; Register Clinical Procedures RPCs if TIU*1.0*109 present
"RTN","ORY131",15,0)
 N MENU,RPC
"RTN","ORY131",16,0)
 S MENU="OR CPRS GUI CHART"
"RTN","ORY131",17,0)
 F RPC="TIU IS THIS A CLINPROC?","TIU IDENTIFY CLINPROC CLASS","TIU LONG LIST CLINPROC TITLES" D INSERT(MENU,RPC)
"RTN","ORY131",18,0)
 Q
"RTN","ORY131",19,0)
 ;
"RTN","ORY131",20,0)
INSERT(OPTION,RPC) ; Call FM Updater with each RPC
"RTN","ORY131",21,0)
 ; Input  -- OPTION   Option file (#19) Name field (#.01)
"RTN","ORY131",22,0)
 ;           RPC      RPC sub-file (#19.05) RPC field (#.01)
"RTN","ORY131",23,0)
 ; Output -- None
"RTN","ORY131",24,0)
 N FDA,FDAIEN,ERR,DIERR
"RTN","ORY131",25,0)
 S FDA(19,"?1,",.01)=OPTION
"RTN","ORY131",26,0)
 S FDA(19.05,"?+2,?1,",.01)=RPC
"RTN","ORY131",27,0)
 D UPDATE^DIE("E","FDA","FDAIEN","ERR")
"RTN","ORY131",28,0)
 Q
"RTN","ORY131",29,0)
 ;
"RTN","ORY131",30,0)
MAIL ; send bulletin of installation time
"RTN","ORY131",31,0)
 N COUNT,DIFROM,I,START,TEXT,XMDUZ,XMSUB,XMTEXT,XMY
"RTN","ORY131",32,0)
 S COUNT=0
"RTN","ORY131",33,0)
 S XMSUB="Version "_$P($T(VERSION),";;",2)_" Installed"
"RTN","ORY131",34,0)
 S XMDUZ="CPRS PACKAGE"
"RTN","ORY131",35,0)
 F I="G.CPRS GUI INSTALL@ISC-SLC.VA.GOV",DUZ S XMY(I)=""
"RTN","ORY131",36,0)
 S XMTEXT="TEXT("
"RTN","ORY131",37,0)
 ;
"RTN","ORY131",38,0)
 S X=$P($T(VERSION),";;",2)
"RTN","ORY131",39,0)
 D LINE("Version "_X_" has been installed.")
"RTN","ORY131",40,0)
 D LINE(" ")
"RTN","ORY131",41,0)
 D LINE("Install complete:  "_$$FMTE^XLFDT($$NOW^XLFDT()))
"RTN","ORY131",42,0)
 ;
"RTN","ORY131",43,0)
 D ^XMD
"RTN","ORY131",44,0)
 Q
"RTN","ORY131",45,0)
 ;
"RTN","ORY131",46,0)
LINE(DATA)      ; set text into array
"RTN","ORY131",47,0)
 S COUNT=COUNT+1
"RTN","ORY131",48,0)
 S TEXT(COUNT)=DATA
"RTN","ORY131",49,0)
 Q
"RTN","ORY131",50,0)
 ;
"RTN","ORY131",51,0)
VERSION ;;18.8
"VER")
8.0^22.0
**END**
**END**

$TXT Created by WILBUR,CHARLES V at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 09/30/03 at 14:20
=============================================================================
Run Date: OCT 02, 2003                     Designation: OOPS*2*2
Package : OOPS - ASISTS                       Priority: Mandatory
Version : 2         SEQ #2                      Status: Released
                  Compliance Date: NOV 02, 2003
=============================================================================

Associated patches: (v)OOPS*2*1    <<= must be installed BEFORE `OOPS*2*2'

Subject: INSTITUTION FILE AND ACCUMAX CONTENTION FIXES

Category: 
  - Routine
  - Other

Description:
============

 The purpose of this patch is to provide fixes and updates to the newly
 released ASISTS GUI. 
   
 This patch addresses the following E3R(s):
 ------------------------------------------
 E3R No.:  17682, CHANGE PROMPT WORDING
 E3R No.:  17452, GENERATE BULLETINS AS "INFORMATION ONLY" MESSAGES
 E3R No.:  12606, DATE/TIME OF OCCURRENCE STUFFING
 
  
 This patch addresses the following NOIS message(s):
 ---------------------------------------------------
 FGH-0403-31797     FATALITY AND OSHA FIELDS NOT RECOGNIZED BEING COMPLETED
 FGH-0403-31369     Unable to save changes
 FAV-0403-72040     #12 MISSING ON CA1
 WAS-0403-22023     1 REPORT NOT WORKING
 HVH-0403-11298     PRINT SELECTION ALL
 ANN-0403-41174     ASISTS GUI PRIVACY ISSUE
 LEX-0403-41223     PACKAGE RELEASE- ASISTS GUI 2.0 (Privacy Issues)
 BRX-0403-10742     CONNECTION TO SERVER NOT ESTABLISHED
 LEX-0403-40443     Accumax Problem with Gui install
 BHS-0403-10388     Can ASISTS Case notice msg be made INFO ONLY?
 COA-0403-20081     ALLOC/CONNECTION ERRORS IN TEST
 TUC-0303-62082     ASISTS Program and Accumax
 MOU-0303-32401     Unable to Connect GUI Error
 MIW-0303-42447     Problems installing ASIST GUI
 HWH-0303-41116     Allocation/connection errors on Test
 
 Overview of NOIS Message(s):
 ----------------------------
 These 4 NOIS messages are addressed with one code/routine change. 
 
 COA-0403-20081     ALLOC/CONNECTION ERRORS IN TEST  
 MOU-0303-32401     Unable to Connect GUI Error
 MIW-0303-42447     Problems installing ASIST GUI
 HWH-0303-41116     Allocation/connection errors on Test
 
 If a site's INSTITUTION (#4) file was quite large, an allocation error occurred
 in routine OOPSGUI3 tag GETLIST. The code was attempting to return all
 INSTITUTION file entries in a local array, and the size of this array 
 became too large. A new broker call has been created, 
 [OOPS GET INSTITUTIONS]
 which calls a new function, GETINST in routine OOPSGUI7. This new call
 handles the allocation and return of the INSTITUTION file entries via a 
 global array, so space is not an issue. 
 
  
 NOIS messages..
 
 BRX-0403-10742     CONNECTION TO SERVER NOT ESTABLISHED
 WAS-0403-22023     1 REPORT NOT WORKING
 HVH-0403-11298     PRINT SELECTION ALL
 
 Are caused by a similar problem, remote procedure, [OOPS GET CASE NUMBERS]
 calls function GETCASEIEN in routine OOPSGUI0. This routine used to return
 all cases via a local array. If that local array became too large, an error
 would occur. The code has been modified to return all cases via a 
 global array. 
 
 The NOIS messages..
  
 LEX-0403-40443     Accumax Problem with Gui install
 TUC-0303-62082     ASISTS Program and Accumax
 
 are associated with ASISTS GUI using Borland's database engine to generate 
 3 reports:
  
 Log of Federal Occupation Injuries and Illness
 Log of Needlestick Incidents
 Incident Reports
 
 When a site installed ASISTS on a network or client machine that was running 
 ACCUMAX software, that software would no longer run.These three reports   
 have been modified so that they no longer require Borland's Data Base
 engine. 
 
 NOIS messages:
 
 FGH-0403-31797     FATALITY AND OSHA FIELDS NOT RECOGNIZED BEING COMPLETED
 FGH-0403-31369     Unable to save changes
 
 Are caused when an ASISTS CA1 claim it tied to a Supervisor whose name has at
 least one duplicate in the New Person file ( #200 ). When a user tries to
 save such a case, the Supervisor's name is trying to be saved via the 
 name text field and not the IEN of the Supervisor. Both the ASISTS GUI code and
 the VistA code in function SAVECA1 in routine OOPSGUI2 have been modified
 to save the Supervisor's IEN instead of their name. Also function GET in 
 routine OOPSGUI2 along with the ASISTS GUI software have been modified to 
 track the IEN of the Supervisor along with the Supervisor's name on a CA1 
 claim. 
 
 NOIS:
 FAV-0403-72040     #12 MISSING ON CA1
 Is an error while printing a CA1 from the GUI software. When looking at the
 printed form, the box number 13 appears twice, once as Employee's
 Occupation, the other as Cause of Injury. The report has been updated in 
 the GUI software so that Employee's Occupation is now box 12. 
 
 Nois Messages:
 ANN-0403-41174     ASISTS GUI PRIVACY ISSUE
 LEX-0403-41223     PACKAGE RELEASE- ASISTS GUI 2.0 (Privacy Issues)
 have been reported with the GUI software because employee information is now
 automatically populated with data from the PAID EMPLOYEE (#450) file. The
 information pulled for the employee such as SSN, phone number and address 
 are sensitive data, and several sites have stated that they feel giving
 Supervisors such access is a security concern. A new mail group has been
 created with this patch, OOPS ISO NOTIFICATION, which must be populated
 with at least one person who shall receive a bulletin if sensitive data is 
 pulled up and a new CA1 or CA2 claim is not created. If for some reason a 
 person is not added to this new mail group, or the mail group is removed, a
 bulletin will be sent to users in the mail group OOPS WC MESSAGE indicating
 there is a problem with the setup. 
 
 Nois Message:
 BHS-0403-10388     Can ASISTS Case notice msg be made INFO ONLY?
 Has been corrected within this patch, all bulletins that indicate new case
 creation etc. Have been modified so that they cannot be forwarded or 
 replied to. This change was made so that there is no potential for 
 sensitive data to be sent unintended recipients. 
 
 There is one new RPC Broker call:
 OOPS SENSITIVE DATA
 This Broker call is used to pass data to a bulletin routine which generates
 a tracking message for supervisors who have accessed Employee sensitive 
 data, but did not create an ASISTS claim.
 
 There is a new Bulletin
 OOPS SENSITIVE DATA
 Which accepts supervisor and employee information for the above mentioned
 scenario. This bulletin is then sent to the user defined in the new mail
 group:
 OOPS ISO NOTIFICATION
 
 This patch also contains a new Mail Group
 OOPS ISO NOTIFICATION
 That should be populated with the name(s) of the people to receive the
 Sensitive Record Accessed bulletin. If a name is not entetered when the
 patch is being loaded, the bulletin will be sent to the existing 
 OOPS WC MESSAGE mail group.  
  
 
 SOFTWARE RETRIVIAL 
 ------------------
 3/11/03. All VA Medical Centers are encouraged to use the TCPIP FTP 
 functionality to obtain the software from one of the following OI Field 
 Office ANONYMOUS.SOFTWARE directories.
  
         OI Field Office        FTP Address             
         ----------------       -----------              
         Albany                 ftp.fo-albany.med.va.gov  
         Hines                  ftp.fo-hines.med.va.gov  
         Salt Lake City         ftp.fo-slc.med.va.gov
         VistA Download Site    download.vista.med.va.gov
  
  
 FILE NAMES                 DESCRIPTION                  ADDITIONAL INFO
  
 File Name                  Contents                     Retrieval Format
 ---------                  --------                     ----------------
  
 OOPS2_2.KID                ASISTS KIDS build             ASCII
 OOPS2_2.EXE                ASISTS executable             BINARY 
 
 Test Sites
 ----------
 
 
  
  
 INSTALLATION
 ------------
 It is recommended that this patch be installed when no ASISTS users are on
 the system.
  
 Install time: Less than 5 minutes.
  
   ==================  INSTALLATION INSTRUCTIONS ==================
  
 1.   LOAD TRANSPORT GLOBAL
      ---------------------
      Choose the PackMan message containing this patch and invoke the
      INSTALL/CHECK MESSAGE PackMan option. 
 
 2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only) 
      -----------------------
      Disable routine mapping on all systems for the routines listed in 
      step 3 below.  
       
      NOTE:  If the routines included in this patch are not currently in 
             your mapped routine set, please skip this step.
 
  
 3.   COMPONENTS SENT WITH PATCH
      --------------------------
      The following is a list of the routines included in this patch. 
      The second line of each of these routines now looks like: 
  
          <tab>;;2.0;ASISTS;**2**;Jun 03, 2002
  
                         CHECK^XTSUMBLD results
 
      Routine          Before Patch     After Patch    Patch List 
      -------          ------------     -----------    ----------
      OOPSGUI0            9070286        9744230            2
      OOPSGUI2            7721031        7978507            2
      OOPSGUI5            8718900        9029028            2
      OOPSGUI7            3239568        6652161            2
      OOPSMBUL            3094362        3239847            2
 
                      Total number of routines:  5
 
 
  
 4.   START UP KIDS
      -------------
      Start up the Kernel Installation and Distribution System Menu
      [XPD MAIN]:
  
          Edits and Distribution ...
          Utilities ...
          Installation ..
  
      Select Kernel Installation & Distribution System Option:  INStallation
                                                               ---
          1       Load a Distribution
          2       Verify Checksums in Transport Global
          3       Print Transport Global
          4       Compare Transport Global to Current System
          5       Backup a Transport Global
          6       Install Package(s)
                  Restart Install of Package(s)
                  Unload a Distribution
  
 5.   Select Installation Option:
      ---------------------------
      NOTE:  The following are OPTIONAL.
             (When prompted for the INSTALL NAME, enter OOPS*2.0*2):
  
      a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with the patch. It will
          not backup any other changes such as DD's or templates.
      b.  Compare Transport Global to Current System - This option
          will allow you to view all changes that will be made when
          this patch is installed. It compares all components of this
          patch (routines, DD's, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will
          allow you to ensure the integrity of the routines that are in
          the transport global.
  
 6.   INSTALL KIDS PATCH
      ------------------
      **This is the step to start the installation of this KIDS patch:
  
      a. Choose the Install Package(s) option to start the patch
         install.
      b. When prompted 'Want KIDS to INHIBIT LOGONs during the
         install? YES//' answer NO.
      c. When prompted 'Enter the Coordinator for Mail Group OOPS ISO
         NOTIFICATION':// Enter the person needing to review sensitive
         data access reports.
      d. When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion?' 
         YES// answer NO.  
      e. When prompted 'Want to DISABLE Scheduled Options and Menu
         Options and Protocols? YES// answer NO.
 
 7.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
      -------------------------
      Optional - Include the routines distributed with this patch
      in the mapped routine set.
      
      NOTE: This step is only necessary if you performed step 2 or 
            if you wish to include the routines in your mapped set.
 

Routine Information:
====================

Routine Name:
  - OOPSGUI0

 Changes made in the GETCASE function to return a global array instead of a
 local array.

Routine Checksum:

Routine Name:
  - OOPSGUI7

 Added two new functions, on GETINST to return all the institutions via a
 global array, the other SENSDATA to send a bulletin to ISO security when
 employee sensitive data is viewed without a case being created. 

Routine Checksum:

Routine Name:
  - OOPSGUI2

 Updated function GET to return the Supervisor's and Secondary Supervisor's 
 IEN in addition to the text value of their names. 

Routine Checksum:

Routine Name:
  - OOPSGUI5

 Code change made in the SAVECA1 function to insert the Supervisor's 
 and secondary Supervisor's DUZ 
 instead of the name ( 4 slash insert vs. a 3 slash insert). 

Routine Checksum:

Routine Name:
  - OOPSMBUL

 Code in the CASE funtion was changed to make bulletins sent Information 
 only.

Routine Checksum:

=============================================================================
User Information:
Entered By  : WILBUR,CHARLIE                Date Entered  : JUN 09, 2003
Completed By: GUTHRIE,MARY H                Date Completed: SEP 30, 2003
Released By : HUTCHINSON,PATRICIA ANN       Date Released : OCT 02, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

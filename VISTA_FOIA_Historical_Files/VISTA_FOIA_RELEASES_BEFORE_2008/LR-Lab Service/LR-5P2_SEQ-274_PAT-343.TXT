$TXT Created by BAER,DAN at MHCVSS.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 06/20/06 at 09:25
=============================================================================
Run Date: JUL 31, 2006                     Designation: LR*5.2*343
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #274                    Status: Released
                  Compliance Date: AUG 31, 2006
=============================================================================

Associated patches: (v)OR*3*141    <<= must be installed BEFORE `LR*5.2*343'
                    (v)OR*3*142    <<= must be installed BEFORE `LR*5.2*343'

Subject: PSI-05-068 ORDER DISCONTINUED ON PATIENT MOVE

Category: 
  - Routine
  - Data Dictionary
  - Other

Description:
============

 Blood Bank Team Coordination
 ============================
 VISTA Laboratory Package patch LR*5.2*343 contains changes to software 
 controlled by VHA DIRECTIVE 2004-058, titled VISTA BLOOD BANK SOFTWARE. 
 Changes include: 
  File #69.9 (Laboratory Site)
     Field #150.3 (CANCEL ON ADMIT) - Removed
     Field #150.4 (CANCEL ON DISCHARGE) - Removed
     Field #150.5 (CANCEL ON SPECIALTY TRANSFER) - Removed
  
 All of the above changes have been reviewed by the VISTA Blood Bank 
 Developer and found to have no impact on the VISTA BLOOD BANK SOFTWARE 
 control functions.
  
 RISK ANALYSIS: Changes made by patch LR*5.2*343 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*343 does not 
 alter or modify any software design safeguards or safety critical 
 elements functions.
  
 POTENTIAL IMPACT ON SITES: This patch contains changes to 0 routines and 
 1 file identified in Veterans Health Administration (VHA) Directive 
 2004-058, group B listing. The changes have no effect on Blood Bank 
 functionality or medical device control functions. There is no adverse 
 potential to sites.
  
 VALIDATION REQUIREMENTS BY OPTION: 
 There are no validation requirements for this patch.
  
 MINIMAL TEST CASE SCENARIOS BY OPTION, INCLUSIVE OF ALL CONTROL FUNCTIONS:
 There are no test case scenarios for this patch.
 ************************************************************************
  
 Remove the LABORATORY package's rules for managing laboratory order 
 auto-discontinuance on admission, transfer, or discharge events and let 
 the existing rules in the OERR (ORDER ENTRY RESULTS REPORTING) package 
 handle the order auto-discontinuance process.
  
 The LABORATORY package's process that is used to decide if an order 
 should be discontinued when a patient move event is triggered will be 
 disabled.  This business rule is already being handled by the OERR 
 package and the Lab's business rules do not perform all of the needed 
 checks that the OERR package performs.  For example, the Lab's process 
 does not check that a new movement is actually tied to the current 
 admission.  An edit of a patient movement can result in erroneous auto 
 discontinue of a patient's laboratory orders.  OERR also provides checks 
 in the software to establish whether the patient event is new or an edit 
 to an existing event.
  
 The Lab's process has caused erroneous auto discontinuance of laboratory 
 orders because it does not check if a new movement is actually tied to 
 the patient's current admission.  In the case outlined by the Patient 
 Safety Issue (PSI) report it appeared that a user deleted and re-entered 
 a movement for a prior admission to make a correction.  Since it was a 
 new movement the Lab code executed and the orders were discontinued.  
 This problem would especially impact sites with patients that are 
 transferred from the acute hospital to the nursing home.
  
  
  
 Technical Description
 =====================
 When the DGPM MOVEMENT EVENTS of the PROTOCOL file (#101) is triggered 
 the LR7O MOVEMENT EVENT protocol may be called (if it is an item of the 
 DGPM MOVEMENT EVENTS protocol).  In this situation the business rule 
 processing in the LABORATORY package fails to make all of the needed 
 checks to properly determine if the order should be discontinued.  If 
 Lab's logic discontinues the order there will be no order for OERR to 
 apply its more detailed set of business rules against when the OERR code 
 is called from the patient movement event.
  
 Lab will no longer perform any package-level checks for order 
 auto-discontinuance based on patient movements.  These checks will be 
 performed by the OERR package.  This change is accomplished by:
  
 Deletion of PROTOCOL file (#101) entries:
          LR7O MOVEMENT EVENT and LR7O MOVEMENT EVENT TASK
 Deletion of routine LR7OEVNT
 Deletion of the following Data Dictionary for LABORATORY SITE file 
 (#69.9):
     CANCEL ON ADMIT field (#150.3)
     CANCEL ON DISCHARGE field (#150.4)
     CANCEL ON SPECIALTY TRANSFER field (#150.5)
  
  
  
 New Service Request:
 ====================
 #20050802 -- Remove Lab Package Options to DC Order on Patient Movement
  
  
 Associated Remedy:
 ==================
 HD0000000104211
  
  
 Associated E3R:
 ===============
 N/A
  
  
 Associated PSI:
 ===============
 PSI-05-068 
  
  
 Test Sites
 ==========
 DURHAM, NC -VAMC (Large site)
 NORTHERN CALIFORNIA HCS (Large site) 
  
  
  
 ROUTINE SUMMARY
 ===============
   The following routines are included in this patch.  The second line
   of each of these routines now looks like:
       <tab> ;; 5.2;LAB SERVICE;<patch list>;Sep 27, 1994
  
                   Checksum       Checksum
  Routine Name     Before Patch   After Patch    Patch List
      LR343        N/A            12851791       343
      LR7OEVNT     5021306        deleted by KIDS
  
      Routines deleted by KIDS: LR343,LR70EVNT
      List of preceding patches: n/a
      Sites should use CHECK^XTSUMBLD to verify checksums.
  
  
 PROTOCOLS
     LR7O MOVEMENT EVENT  (deleted)
     LR7O MOVEMENT EVENT TASK  (deleted)
  
  
 DATA DICTIONARIES
     LABORATORY SITE file (#69.9)
         CANCEL ON ADMIT field (#150.3)  (deleted)
         CANCEL ON DISCHARGE field (#150.4)  (deleted)
         CANCEL ON SPECIALTY TRANSFER field (#150.5)  (deleted)
  
  
 INSTALLATION INSTRUCTIONS
 =========================
  
   The install time for this patch is approximately 6 minutes.
   Suggested time to install: non-peak requirement hours.
   This patch can be installed when Laboratory users are on the system.
  
  
                      I  M  P  O  R  T  A  N  T
                    =============================
                  THIS INSTALLATION MUST BE QUEUED
  
  
   NOTE: Kernel patches must be current on the target system to avoid
         problems loading and/or installing this patch.
  
       Patch installation needs to be coordinated with the Laboratory
       Information Manager (LIM/ADPAC).
  
  
   1.  Use the "INSTALL/CHECK MESSAGE" option of the PackMan menu.  This
       option will load the KIDS patch onto your system.
  
   2.  On the "Kernel Installation & Distribution System" Menu (KIDS),
       select the "Installation" menu.
  
   3.  Use the "Verify Checksum in Transport Global" option and verify
       that all routines have the correct checksums.
  
   4.  On the KIDS menu, under the "Installation" menu, use the following
       options:
         Print Transport Global
         Compare Transport Global to Current System
         Backup a Transport Global
  
   5.  Use the "Install Package(s)" option under the "Installation" menu
       and select the package "LR*5.2*343*"
  
       If prompted "Want KIDS to Rebuild Menu Trees Upon Completion of 
       Install?" choose "NO".  Note: Responding "Yes" to the prompt for 
       rebuilding menu trees can significantly increase install time.
  
       If prompted "Want KIDS to INHIBIT LOGONs during the install?" 
       choose "NO".
  
       If prompted "Want to DISABLE Scheduled Options, Menu Options, and
       Protocols?  YES//" choose "NO" unless the site has additional local 
       laboratory options that should be disabled during install.
  
   6.  When prompted for the DEVICE, enter "Q" to queue the build.  If you
       do not queue the installation KIDS will abort the install.  When
       you try to restart the install you may encounter an <UNDEF> error
       due to a bug in KIDS.  If this happens you will need to use FileMan
       to modify the INSTALL file (#9.7) for entry LR*5.2*343 which 
       currently has the status of "Start of Install" and set its' STATUS 
       field to "Install Completed".  Reload the transport global and 
       install the patch again. 
  
   7.  Check your system for errors which may have occurred during the 
       time this patch was installed.  If the PROTOCOL DGPM MOVEMENT 
       EVENTS was called during this patch installation, system errors 
       (such as "Can't return to source" for routine LR7OEVNT) may have 
       been generated.  If so, those patient movements will have to be re-
       created. 
  
  
 INSTALLATION EXAMPLE
 ====================
  
 Select Installation Option:  Install Package(s)
 Select INSTALL NAME:    LR*5.2*343     Loaded from Distribution  
 10/20/05@12:39:58
      => LR343 KIDS  ;Created on Oct 20, 2005@11:59:59
  
 This Distribution was loaded on Oct 20, 2005@12:39:58 with header of 
    LR343 KIDS  ;Created on Oct 20, 2005@11:59:59
    It consisted of the following Install(s):
      LR*5.2*343
 Checking Install for Package LR*5.2*343
 Will first run the Environment Check Routine, LR343
  
                 Environment is okay 
  
 Install Questions for LR*5.2*343
  
 Want KIDS to INHIBIT LOGONs during the install? NO// 
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME// QUEUE TO PRINT ON
 DEVICE: HOME// P-MAIN
  
 Request Start Time: Oct 20, 2005@12:42:41//   (OCT 20, 2005@12:42:41)
 Install Queued!
  
  
  
 Sample Installation Output
 ==========================
  
 Install Started for LR*5.2*343 : 
        Oct 20, 2005@12:42:42
  
 Build Distribution Date: Oct 20, 2005
  
  Installing Routines:...
        Oct 20, 2005@12:42:42
  
  Running Pre-Install Routine: PRE^LR343.
  
        Pre install started at Oct 20, 2005@12:42:42
  
       Sent install started alert to mail group G.LMI
  
       Setting DISABLE and ACTION fields for Protocols
  
             No actions required for pre install
  
       Pre install completed at Oct 20, 2005@12:47:42
  
  Installing PACKAGE COMPONENTS: 
  
  Installing PROTOCOL...
                Oct 20, 2005@12:47:42
  
  Running Post-Install Routine: POST^LR343.
  
        Post install started at Oct 20, 2005@12:47:42
  
             File #69.9 field data update started
  
            File #69.9 field data deletion finished
  
   Post install completed at Oct 20, 2005@12:47:42
  
      Sending install completion alert to mail group G.LMI
  
  Updating Routine file......
  
  Updating KIDS files.......
  
  LR*5.2*343 Installed. 
                Oct 20, 2005@12:47:42
  
  Install Message sent
  
  
  
 Sample MailMan Message
 ======================
 Pre install started at Oct 20, 2005@12:48:15
 Sent install started alert to mail group G.LMI
 Setting DISABLE and ACTION fields for Protocols
 No actions required for pre install
 Pre install completed at Oct 20, 2005@12:48:55
 Post install started at Oct 20, 2005@12:53:59
 File #69.9 field data update started
 File #69.9 field data deletion finished
 Post install completed at Oct 20, 2005@12:54:45
 Sending install completion alert to mail group G.LMI

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LR343
    Before:       n/a  After: B57547450  **343**
Routine Name: LR7OEVNT
    Before:  B9750943  After:    Delete  

=============================================================================
User Information:
Entered By  : BAER,DAN                      Date Entered  : AUG 19, 2005
Completed By: ELIJAH,VICKEY                 Date Completed: JUL 25, 2006
Released By : BELSCHWINDER,MICHAEL          Date Released : JUL 31, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

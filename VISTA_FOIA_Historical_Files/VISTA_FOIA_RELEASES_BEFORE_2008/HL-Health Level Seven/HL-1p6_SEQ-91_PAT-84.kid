Released HL*1.6*84 SEQ #91
Extracted from mail message
**KIDS**:HL*1.6*84^

**INSTALL NAME**
HL*1.6*84
"BLD",516,0)
HL*1.6*84^HEALTH LEVEL SEVEN^0^3040105^y
"BLD",516,1,0)
^^2^2^3030401^
"BLD",516,1,1,0)
See patch HL*1.6*84 in the National Patch Module for complete information 
"BLD",516,1,2,0)
on this patch.
"BLD",516,4,0)
^9.64PA^870^1
"BLD",516,4,870,0)
870
"BLD",516,4,870,222)
y^n^f^^^^n
"BLD",516,4,"B",870,870)

"BLD",516,"INID")
^y
"BLD",516,"INIT")
POST^HLPAT84
"BLD",516,"KRN",0)
^9.67PA^8989.52^20
"BLD",516,"KRN",.4,0)
.4
"BLD",516,"KRN",.401,0)
.401
"BLD",516,"KRN",.402,0)
.402
"BLD",516,"KRN",.403,0)
.403
"BLD",516,"KRN",.403,"NM",0)
^9.68A^^0
"BLD",516,"KRN",.5,0)
.5
"BLD",516,"KRN",.84,0)
.84
"BLD",516,"KRN",3.6,0)
3.6
"BLD",516,"KRN",3.8,0)
3.8
"BLD",516,"KRN",9.2,0)
9.2
"BLD",516,"KRN",9.8,0)
9.8
"BLD",516,"KRN",9.8,"NM",0)
^9.68A^5^5
"BLD",516,"KRN",9.8,"NM",1,0)
HLCSTCP^^0^B30293901
"BLD",516,"KRN",9.8,"NM",2,0)
HLCS2^^0^B37577834
"BLD",516,"KRN",9.8,"NM",3,0)
HLCSLNCH^^0^B36648019
"BLD",516,"KRN",9.8,"NM",4,0)
HLPAT84^^0^B719175
"BLD",516,"KRN",9.8,"NM",5,0)
HLCSTCPA^^0^B1420563
"BLD",516,"KRN",9.8,"NM","B","HLCS2",2)

"BLD",516,"KRN",9.8,"NM","B","HLCSLNCH",3)

"BLD",516,"KRN",9.8,"NM","B","HLCSTCP",1)

"BLD",516,"KRN",9.8,"NM","B","HLCSTCPA",5)

"BLD",516,"KRN",9.8,"NM","B","HLPAT84",4)

"BLD",516,"KRN",19,0)
19
"BLD",516,"KRN",19,"NM",0)
^9.68A^^0
"BLD",516,"KRN",19.1,0)
19.1
"BLD",516,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",516,"KRN",101,0)
101
"BLD",516,"KRN",409.61,0)
409.61
"BLD",516,"KRN",771,0)
771
"BLD",516,"KRN",771,"NM",0)
^9.68A^^
"BLD",516,"KRN",870,0)
870
"BLD",516,"KRN",8989.51,0)
8989.51
"BLD",516,"KRN",8989.52,0)
8989.52
"BLD",516,"KRN",8994,0)
8994
"BLD",516,"KRN","B",.4,.4)

"BLD",516,"KRN","B",.401,.401)

"BLD",516,"KRN","B",.402,.402)

"BLD",516,"KRN","B",.403,.403)

"BLD",516,"KRN","B",.5,.5)

"BLD",516,"KRN","B",.84,.84)

"BLD",516,"KRN","B",3.6,3.6)

"BLD",516,"KRN","B",3.8,3.8)

"BLD",516,"KRN","B",9.2,9.2)

"BLD",516,"KRN","B",9.8,9.8)

"BLD",516,"KRN","B",19,19)

"BLD",516,"KRN","B",19.1,19.1)

"BLD",516,"KRN","B",101,101)

"BLD",516,"KRN","B",409.61,409.61)

"BLD",516,"KRN","B",771,771)

"BLD",516,"KRN","B",870,870)

"BLD",516,"KRN","B",8989.51,8989.51)

"BLD",516,"KRN","B",8989.52,8989.52)

"BLD",516,"KRN","B",8994,8994)

"BLD",516,"PRET")

"BLD",516,"QUES",0)
^9.62^^
"BLD",516,"REQB",0)
^9.611^3^3
"BLD",516,"REQB",1,0)
HL*1.6*64^1
"BLD",516,"REQB",2,0)
HL*1.6*75^1
"BLD",516,"REQB",3,0)
HL*1.6*82^1
"BLD",516,"REQB","B","HL*1.6*64",1)

"BLD",516,"REQB","B","HL*1.6*75",2)

"BLD",516,"REQB","B","HL*1.6*82",3)

"FIA",870)
HL LOGICAL LINK
"FIA",870,0)
^HLCS(870,
"FIA",870,0,0)
870
"FIA",870,0,1)
y^n^f^^^^n
"FIA",870,0,10)

"FIA",870,0,11)

"FIA",870,0,"RLRO")

"FIA",870,0,"VR")
1.6^HL
"FIA",870,870)
0
"FIA",870,870.01)
0
"FIA",870,870.019)
0
"FIA",870,870.13)
0
"FIA",870,870.193)
0
"INIT")
POST^HLPAT84
"MBREQ")
0
"PKG",62,-1)
1^1
"PKG",62,0)
HEALTH LEVEL SEVEN^HL
"PKG",62,22,0)
^9.49I^1^1
"PKG",62,22,1,0)
1.6^3000331
"PKG",62,22,1,"PAH",1,0)
84^3040105^1131
"PKG",62,22,1,"PAH",1,1,0)
^^2^2^3040105
"PKG",62,22,1,"PAH",1,1,1,0)
See patch HL*1.6*84 in the National Patch Module for complete information 
"PKG",62,22,1,"PAH",1,1,2,0)
on this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
5
"RTN","HLCS2")
0^2^B37577834
"RTN","HLCS2",1,0)
HLCS2 ;SF/JC - More Communication Server utils ;12/31/2003  17:50
"RTN","HLCS2",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14,40,43,49,57,58,82,84**;Oct 13, 1995
"RTN","HLCS2",3,0)
FWD ; Add supplemental clients from HLL("LINKS") to HLSUP array
"RTN","HLCS2",4,0)
 ;This enhancement also supports distribution of a message to
"RTN","HLCS2",5,0)
 ;the same client over multiple logical links.
"RTN","HLCS2",6,0)
 Q:'$D(HLL("LINKS"))
"RTN","HLCS2",7,0)
 N CNT,LNK,CLIAP
"RTN","HLCS2",8,0)
 S CNT=0,ROUTINE=1 F  S CNT=$O(HLL("LINKS",CNT)) Q:CNT<1  D
"RTN","HLCS2",9,0)
 . S PTR=$P(HLL("LINKS",CNT),"^"),LNK=$P(HLL("LINKS",CNT),"^",2)
"RTN","HLCS2",10,0)
 . Q:PTR=""  I +PTR<1 S PTR=$O(^ORD(101,"B",PTR,0)) Q:PTR<1
"RTN","HLCS2",11,0)
 . Q:LNK=""  I +LNK<1 S LNK=$O(^HLCS(870,"B",LNK,0)) Q:LNK<1
"RTN","HLCS2",12,0)
 . Q:'$D(^HLCS(870,LNK))
"RTN","HLCS2",13,0)
 . S CLIAP=$$PTR^HLUTIL2(PTR)
"RTN","HLCS2",14,0)
 . S HLSUP("S",PTR,+LNK)=CLIAP_$S(CLIAP<1:U_HLL("LINKS",CNT),1:"")
"RTN","HLCS2",15,0)
 Q
"RTN","HLCS2",16,0)
ADD ;Deliver message to supplemental client list.
"RTN","HLCS2",17,0)
 ;Invoked by HLTP before and after processing normal clients
"RTN","HLCS2",18,0)
 ;Only processes remote links. Local clients must be subscribing
"RTN","HLCS2",19,0)
 ;protocols.
"RTN","HLCS2",20,0)
 Q:'$D(HLSUP("S"))
"RTN","HLCS2",21,0)
 N HLTCP,HLTCPI,HLTCPO,ZHLEIDS,ZLCLIENT,ZLOGLINK,ZMTIENS
"RTN","HLCS2",22,0)
 S ZHLEIDS=0 F  S ZHLEIDS=$O(HLSUP("S",ZHLEIDS)) Q:ZHLEIDS<1  D
"RTN","HLCS2",23,0)
 .S ZLOGLINK=0 F  S ZLOGLINK=$O(HLSUP("S",ZHLEIDS,ZLOGLINK)) Q:ZLOGLINK<1  D
"RTN","HLCS2",24,0)
 ..S ZLCLIENT=+HLSUP("S",ZHLEIDS,ZLOGLINK)
"RTN","HLCS2",25,0)
 ..I ZLCLIENT<1 S:$G(HLERROR)="" HLERROR="15^Invalid Subscriber Protocol in HLL('LINKS'): "_$P(HLSUP("S",ZHLEIDS,ZLOGLINK),U,2,9) Q
"RTN","HLCS2",26,0)
 ..S HLOGLINK=ZLOGLINK D SEND^HLMA2(ZHLEIDS,HLMTIEN,ZLCLIENT,"D",.ZMTIENS,ZLOGLINK),STATUS^HLTF0(+ZMTIENS,1)
"RTN","HLCS2",27,0)
 K HLL("LINKS"),HLSUP
"RTN","HLCS2",28,0)
 Q
"RTN","HLCS2",29,0)
STALL ;STOP ALL LINKS AND FILERS
"RTN","HLCS2",30,0)
 N DIR,Y
"RTN","HLCS2",31,0)
 W ! S DIR(0)="Y",DIR("A")="Okay to shut down all Links and Filers"
"RTN","HLCS2",32,0)
 D ^DIR
"RTN","HLCS2",33,0)
 I 'Y!($D(DIRUT))!($D(DUOUT)) W !!,"Shutdown Aborted!" Q
"RTN","HLCS2",34,0)
 W !,"Shutting down all Links and Filers..."
"RTN","HLCS2",35,0)
 D CLEAR
"RTN","HLCS2",36,0)
 D LLP(1)
"RTN","HLCS2",37,0)
 Q
"RTN","HLCS2",38,0)
QUE ;Restart Filers and AUTOSTART Logical Links after system re-boot
"RTN","HLCS2",39,0)
 N DIR,Y
"RTN","HLCS2",40,0)
 I '$D(ZTQUEUED) D  Q:'Y!($D(DIRUT))!($D(DUOUT))
"RTN","HLCS2",41,0)
 .W ! S DIR(0)="Y",DIR("A")="Shutdown and restart ALL AUTOSTART links and filers. Okay"
"RTN","HLCS2",42,0)
 .D ^DIR
"RTN","HLCS2",43,0)
 .I 'Y!($D(DIRUT))!($D(DUOUT)) W !!,"RESTART Aborted!" Q
"RTN","HLCS2",44,0)
 .W !,"Restarting all Autostart-Enabled Links and Filers..."
"RTN","HLCS2",45,0)
 D CLEAR
"RTN","HLCS2",46,0)
 D STARTF
"RTN","HLCS2",47,0)
 D LLP(0)
"RTN","HLCS2",48,0)
 D STRT
"RTN","HLCS2",49,0)
 Q
"RTN","HLCS2",50,0)
CLEAR ;Reset state of 869.3
"RTN","HLCS2",51,0)
 S DA(1)=1,DA=0,DIK="^HLCS(869.3,1,2,"
"RTN","HLCS2",52,0)
 F  S DA=$O(^HLCS(869.3,DA(1),2,DA)) Q:DA<1  D ^DIK
"RTN","HLCS2",53,0)
 S DA=0,DIK="^HLCS(869.3,1,3,"
"RTN","HLCS2",54,0)
 F  S DA=$O(^HLCS(869.3,DA(1),3,DA)) Q:DA<1  D ^DIK
"RTN","HLCS2",55,0)
 Q
"RTN","HLCS2",56,0)
STARTF ;Start filers
"RTN","HLCS2",57,0)
 ;Get Defaults
"RTN","HLCS2",58,0)
 N TMP,PTR,DEFCNT,DA,HLCNT,HLNODE1
"RTN","HLCS2",59,0)
 S PTR=+$O(^HLCS(869.3,0)) Q:'PTR
"RTN","HLCS2",60,0)
 ;default # of incoming filers
"RTN","HLCS2",61,0)
 S HLNODE1=$G(^HLCS(869.3,PTR,1)),DEFCNT=+$P(HLNODE1,U) S:'DEFCNT DEFCNT=1
"RTN","HLCS2",62,0)
 F HLCNT=1:1:DEFCNT S TMP=$$TASKFLR^HLCS1("IN")
"RTN","HLCS2",63,0)
 ;default # of outgoing filers
"RTN","HLCS2",64,0)
 S DEFCNT=+$P(HLNODE1,U,2) S:'DEFCNT DEFCNT=1
"RTN","HLCS2",65,0)
 F HLCNT=1:1:DEFCNT S TMP=$$TASKFLR^HLCS1("OUT")
"RTN","HLCS2",66,0)
 Q
"RTN","HLCS2",67,0)
LLP(ALL) ;Stop Logical Links
"RTN","HLCS2",68,0)
 ;ALL=1 OR 0 IF zero, only AUTOSTART LINKS get stopped
"RTN","HLCS2",69,0)
 N HLDP,HLDP0,HLPARM0,HLPARM4,HLJ,X,Y S HLDP=0
"RTN","HLCS2",70,0)
 F  S HLDP=$O(^HLCS(870,HLDP)) Q:'HLDP  S HLDP0=$G(^(HLDP,0)),X=+$P(HLDP0,U,3) D:X
"RTN","HLCS2",71,0)
 .;skip this link if not stopping all and Autostart not enabled
"RTN","HLCS2",72,0)
 . I 'ALL&('$P(HLDP0,U,6)) Q
"RTN","HLCS2",73,0)
 . S HLPARM4=$G(^HLCS(870,HLDP,400))
"RTN","HLCS2",74,0)
 . ;TCP Multi listener for non-Cache uses UCX
"RTN","HLCS2",75,0)
 . I $P(HLPARM4,U,3)="M" Q:^%ZOSF("OS")'["OpenM"  Q:$$OS^%ZOSV["VMS"
"RTN","HLCS2",76,0)
 . ;4=status,10=Time Stopped,9=Time Started,11=Task Number,3=Device Type,14=shutdown?
"RTN","HLCS2",77,0)
 . S X="HLJ(870,"""_HLDP_","")",@X@(4)="Halting",@X@(10)=$$NOW^XLFDT,(@X@(11),@X@(9))="@",@X@(14)=1
"RTN","HLCS2",78,0)
 . I $P(HLPARM4,U,3)="C"&("N"[$P(HLPARM4,U,4)),'$P(HLDP0,U,12) S @X@(4)="Shutdown"
"RTN","HLCS2",79,0)
 . D FILE^DIE("","HLJ")
"RTN","HLCS2",80,0)
 . ;Cache system, need to open TCP port to release job
"RTN","HLCS2",81,0)
 . I ^%ZOSF("OS")["OpenM",($P(HLPARM4,U,3)="M"!($P(HLPARM4,U,3)="S")) D
"RTN","HLCS2",82,0)
 .. ;pass task number to stop listener
"RTN","HLCS2",83,0)
 .. S:$P(HLDP0,U,12) X=$$ASKSTOP^%ZTLOAD(+$P(HLDP0,U,12))
"RTN","HLCS2",84,0)
 .. D CALL^%ZISTCP($P(HLPARM4,U),$P(HLPARM4,U,2),10)
"RTN","HLCS2",85,0)
 .. I POP D HOME^%ZIS Q
"RTN","HLCS2",86,0)
 .. D CLOSE^%ZISTCP
"RTN","HLCS2",87,0)
 Q
"RTN","HLCS2",88,0)
STRT ;Start Links
"RTN","HLCS2",89,0)
 N HLDP,HLDP0,HLDAPP,HLTYPTR,HLBGR,HLENV,HLPARAM0,HLPARM4,HLQUIT,ZTRTN,ZTDESC,ZTSK,ZTCPU
"RTN","HLCS2",90,0)
 S HLDP=0
"RTN","HLCS2",91,0)
 F  S HLDP=$O(^HLCS(870,HLDP)) Q:HLDP<1  S HLDP0=$G(^(HLDP,0)) D
"RTN","HLCS2",92,0)
 . S HLPARM4=$G(^HLCS(870,HLDP,400))
"RTN","HLCS2",93,0)
 . ;quit if no parameters or AUTOSTART is disabled
"RTN","HLCS2",94,0)
 . Q:'$P(HLDP0,U,6)
"RTN","HLCS2",95,0)
 . ;HLDAPP=LL name, HLTYPTR=LL type, HLBGR=routine, HLENV=environment check
"RTN","HLCS2",96,0)
 . S HLDAPP=$P(HLDP0,U),HLTYPTR=+$P(HLDP0,U,3),HLBGR=$G(^HLCS(869.1,HLTYPTR,100)),HLENV=$G(^(200))
"RTN","HLCS2",97,0)
 . ;quit if no LL type or no routine
"RTN","HLCS2",98,0)
 . Q:'HLTYPTR!(HLBGR="")
"RTN","HLCS2",99,0)
 . I HLENV'="" K HLQUIT X HLENV Q:$D(HLQUIT)
"RTN","HLCS2",100,0)
 . ;TCP Multi listener for non-Cache uses UCX
"RTN","HLCS2",101,0)
 . I $P(HLPARM4,U,3)="M" Q:^%ZOSF("OS")'["OpenM"  Q:$$OS^%ZOSV["VMS"
"RTN","HLCS2",102,0)
 . I $P(HLPARM4,U,3)="C"&("N"[$P(HLPARM4,U,4)) D  Q
"RTN","HLCS2",103,0)
 .. ;4=status 9=Time Started, 10=Time Stopped, 11=Task Number 
"RTN","HLCS2",104,0)
 .. ;14=Shutdown LLP, 3=Device Type, 18=Gross Errors
"RTN","HLCS2",105,0)
 .. N HLJ,X
"RTN","HLCS2",106,0)
 .. I $P(HLDP0,U,15)=0 Q
"RTN","HLCS2",107,0)
 .. L +^HLCS(870,HLDP,0):2
"RTN","HLCS2",108,0)
 .. E  Q
"RTN","HLCS2",109,0)
 .. S X="HLJ(870,"""_HLDP_","")"
"RTN","HLCS2",110,0)
 .. S @X@(4)="Enabled",@X@(9)=$$NOW^XLFDT,@X@(14)=0
"RTN","HLCS2",111,0)
 .. D FILE^DIE("","HLJ")
"RTN","HLCS2",112,0)
 .. L -^HLCS(870,HLDP,0)
"RTN","HLCS2",113,0)
 .. Q
"RTN","HLCS2",114,0)
 . S ZTRTN=$P(HLBGR," ",2),ZTIO="",ZTDTH=$H,HLTRACE=""
"RTN","HLCS2",115,0)
 . S ZTDESC=HLDAPP_" Low Level Protocol",ZTSAVE("HLDP")=""
"RTN","HLCS2",116,0)
 . ;get startup node
"RTN","HLCS2",117,0)
 . I $P(HLPARM4,U,6),$D(^%ZIS(14.7,+$P(HLPARM4,U,6),0)) S ZTCPU=$P(^(0),U)
"RTN","HLCS2",118,0)
 . D ^%ZTLOAD
"RTN","HLCS2",119,0)
 Q
"RTN","HLCS2",120,0)
SITEP ;Edit Site Parameters
"RTN","HLCS2",121,0)
 S DDSFILE=869.3,DA=1,DR="[HL SITE PARAMETERS]" D ^DDS
"RTN","HLCS2",122,0)
 Q
"RTN","HLCS2",123,0)
PARAM() ;Return HL7 site parameters
"RTN","HLCS2",124,0)
 ;HLPARAM=domain ien^domain name^production or test^institution ien^
"RTN","HLCS2",125,0)
 ;institution name^institution number^mail group ien^mail group name^
"RTN","HLCS2",126,0)
 ;purge completed messages^purge awaiting ack messages^purge all msgs^
"RTN","HLCS2",127,0)
 ;default retention
"RTN","HLCS2",128,0)
 N HLX,HLX4,HLX5,HLDOMP,HLDOMN,HLPROD,HLINSP,HLINSN,HLINSNM,HLMAILP,HLMAILN,HLPARAM,HLPRGAA,HLPRGALL,HLPRGCMP,HLDEFRET
"RTN","HLCS2",129,0)
 S HLX=$G(^HLCS(869.3,1,0))
"RTN","HLCS2",130,0)
 S HLX4=$G(^HLCS(869.3,1,4))
"RTN","HLCS2",131,0)
 S HLX5=$G(^HLCS(869.3,1,5))
"RTN","HLCS2",132,0)
 S HLDOMP=$P(HLX,U,2) I HLDOMP S HLDOMN=$P(^DIC(4.2,HLDOMP,0),U)
"RTN","HLCS2",133,0)
 S HLPROD=$P(HLX,U,3)
"RTN","HLCS2",134,0)
 S HLINSP=$P(HLX,U,4) I HLINSP S HLINSN=$P(^DIC(4,HLINSP,0),U),HLINSNM=$P($G(^DIC(4,HLINSP,99)),U)
"RTN","HLCS2",135,0)
 S HLMAILP=$P(HLX,U,5) I HLMAILP S HLMAILN=$P(^XMB(3.8,HLMAILP,0),U)
"RTN","HLCS2",136,0)
 S HLPRGCMP=$P(HLX4,U),HLPRGAA=$P(HLX4,U,2),HLPRGALL=$P(HLX4,U,3)
"RTN","HLCS2",137,0)
 S HLDEFRET=$P(HLX5,U)
"RTN","HLCS2",138,0)
 S HLPARAM=HLDOMP_U_$G(HLDOMN)_U_$G(HLPROD)_U_HLINSP_U_$G(HLINSN)_U_$G(HLINSNM)_U_HLMAILP_U_$G(HLMAILN)_U_HLPRGCMP_U_HLPRGAA_U_HLPRGALL_U_HLDEFRET
"RTN","HLCS2",139,0)
 Q HLPARAM
"RTN","HLCS2",140,0)
 ;
"RTN","HLCS2",141,0)
GETAPP(HLAPP) ;Function to Retrieve parameters pertaining to a specific sending or receiving application
"RTN","HLCS2",142,0)
 ;HLAPP=APPLICATION NAME OR IEN OF FILE 771
"RTN","HLCS2",143,0)
 ;Returns MAIL GROUP NAME^'a' or 'i' (active or inactive) 
"RTN","HLCS2",144,0)
 S HLAPP=$G(HLAPP)
"RTN","HLCS2",145,0)
 I HLAPP]"",'HLAPP S HLAPP=$O(^HL(771,"B",$E(HLAPP,1,30),0))
"RTN","HLCS2",146,0)
 I 'HLAPP Q ""
"RTN","HLCS2",147,0)
 I HLAPP S HLM=$P(^HL(771,HLAPP,0),U,4)
"RTN","HLCS2",148,0)
 I HLM S HLM=$P($G(^XMB(3.8,HLM,0)),U)
"RTN","HLCS2",149,0)
 Q $G(HLM)_U_$P(^HL(771,HLAPP,0),U,2)
"RTN","HLCSLNCH")
0^3^B36648019
"RTN","HLCSLNCH",1,0)
HLCSLNCH ;ALB/MTC/JC - START AND STOP THE LLP ;12/31/2003  17:37
"RTN","HLCSLNCH",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**6,19,43,49,57,75,84**;Oct 13, 1995
"RTN","HLCSLNCH",3,0)
 ;
"RTN","HLCSLNCH",4,0)
 ;This program is callable from a menu
"RTN","HLCSLNCH",5,0)
 ;It allows the user to Start and Stop the Lower Layer
"RTN","HLCSLNCH",6,0)
 ;Protocol in the Background or in the foreground
"RTN","HLCSLNCH",7,0)
 ;
"RTN","HLCSLNCH",8,0)
 ;Required or Optional INPUT PARAMETERS
"RTN","HLCSLNCH",9,0)
 ;             None
"RTN","HLCSLNCH",10,0)
 ;
"RTN","HLCSLNCH",11,0)
 ;
"RTN","HLCSLNCH",12,0)
 ;Output variables
"RTN","HLCSLNCH",13,0)
 ;             HLDP=IEN of Logical Link in file #870
"RTN","HLCSLNCH",14,0)
 ;(optional)HLTRACE=if SET it launches the LLP in the Foreground
"RTN","HLCSLNCH",15,0)
 ;(optional)   ZTSK=if defined LLP was launched in the
"RTN","HLCSLNCH",16,0)
 ;background
"RTN","HLCSLNCH",17,0)
 ;
"RTN","HLCSLNCH",18,0)
 ;
"RTN","HLCSLNCH",19,0)
START ; Start up the lower level protocol
"RTN","HLCSLNCH",20,0)
 N DIC,DIRUT,DTOUT,DUOUT,HLDP,HLDAPP,HLJ,HLQUIT,HLTRACE
"RTN","HLCSLNCH",21,0)
 N HLPARM0,HLPARM4,HLTYPTR,HLBGR,X,Y,ZTCPU,ZTSK,ZTRTN,ZTDESC
"RTN","HLCSLNCH",22,0)
 W !!,"This option is used to launch the lower level protocol for the"
"RTN","HLCSLNCH",23,0)
 W !,"appropriate device.  Please select the node with which you want"
"RTN","HLCSLNCH",24,0)
 W !,"to communicate",!
"RTN","HLCSLNCH",25,0)
 S DIC="^HLCS(870,",DIC(0)="QEAMZ" D ^DIC G:Y<0 STARTQ
"RTN","HLCSLNCH",26,0)
 S HLDP=+Y,HLDAPP=Y(0,0),HLTYPTR=+$P(Y(0),U,3),HLPARM0=Y(0)
"RTN","HLCSLNCH",27,0)
 ;-- check if parameter have been setup
"RTN","HLCSLNCH",28,0)
 ;-- check for LLP type
"RTN","HLCSLNCH",29,0)
 I 'HLTYPTR W !,$C(7),"A Lower Layer Protocol must be selected before start-up can occur." G STARTQ
"RTN","HLCSLNCH",30,0)
 ;-- get TCP information
"RTN","HLCSLNCH",31,0)
 S HLPARM4=$G(^HLCS(870,HLDP,400))
"RTN","HLCSLNCH",32,0)
 ;-- get routine (background job for LLP)
"RTN","HLCSLNCH",33,0)
 S HLBGR=$G(^HLCS(869.1,HLTYPTR,100))
"RTN","HLCSLNCH",34,0)
 ;-- get environment check routine (HLQUIT should be defined in fails)
"RTN","HLCSLNCH",35,0)
 S HLENV=$G(^HLCS(869.1,HLTYPTR,200))
"RTN","HLCSLNCH",36,0)
 ;
"RTN","HLCSLNCH",37,0)
 I HLBGR="" W !,$C(7),"No routine has been specified for this LLP." G STARTQ
"RTN","HLCSLNCH",38,0)
 ;
"RTN","HLCSLNCH",39,0)
 ;-- execute environment check routine if HLQUIT is defined then terminate
"RTN","HLCSLNCH",40,0)
 I HLENV'="" X HLENV G:$D(HLQUIT) STARTQ
"RTN","HLCSLNCH",41,0)
 ;Multi-Servers, only enable the link if not OpenM
"RTN","HLCSLNCH",42,0)
 I $P(HLPARM4,U,3)="M",$S(^%ZOSF("OS")'["OpenM":1,1:$$OS^%ZOSV["VMS") D  G STARTQ
"RTN","HLCSLNCH",43,0)
 . W !,$C(7),"This LLP is a multi-threaded server. It is controlled by external service, i.e. TCPIP/UCX. You must use the external service to start this LLP."
"RTN","HLCSLNCH",44,0)
 . Q
"RTN","HLCSLNCH",45,0)
 ;
"RTN","HLCSLNCH",46,0)
 I $P(HLPARM0,U,10) W !,$C(7),"The LLP was last started on ",$$DAT2^HLUTIL1($P(HLPARM0,U,10)),"." G STP1:$P(HLPARM0,U,5)'="Error"
"RTN","HLCSLNCH",47,0)
 I $P(HLPARM0,U,11) W !,"The LLP was last shutdown on ",$$DAT2^HLUTIL1($P(HLPARM0,U,11)),"."
"RTN","HLCSLNCH",48,0)
 I $P(HLPARM0,U,5)'="Error",'($P(HLPARM4,U,3)="C"&("N"[$P(HLPARM4,U,4))),$P(HLPARM0,U,10)]""&($P(HLPARM0,U,11)=""),$P(HLPARM0,U,12) W !,"The LLP appears to be online already !"
"RTN","HLCSLNCH",49,0)
 I $$TASK^HLUTIL1($P(HLPARM0,U,12)) D  G STARTQ
"RTN","HLCSLNCH",50,0)
 . W !,$C(7),"NOTE: The lower level protocol for this application is already running."
"RTN","HLCSLNCH",51,0)
 I $P(HLPARM4,U,3)="C"&("N"[$P(HLPARM4,U,4)) D  G STARTQ
"RTN","HLCSLNCH",52,0)
 .;4=status 9=Time Started, 10=Time Stopped, 11=Task Number 
"RTN","HLCSLNCH",53,0)
 .;14=Shutdown LLP, 3=Device Type, 18=Gross Errors
"RTN","HLCSLNCH",54,0)
 .N HLJ,X
"RTN","HLCSLNCH",55,0)
 .I $P(HLPARM0,U,15)=0 W !,"This LLP is already enabled!" Q
"RTN","HLCSLNCH",56,0)
 .L +^HLCS(870,HLDP,0):2
"RTN","HLCSLNCH",57,0)
 .E  W !,$C(7),"Unable to enable this LLP !" Q
"RTN","HLCSLNCH",58,0)
 .S X="HLJ(870,"""_HLDP_","")"
"RTN","HLCSLNCH",59,0)
 .S @X@(4)="Enabled",@X@(9)=$$NOW^XLFDT,@X@(14)=0
"RTN","HLCSLNCH",60,0)
 .D FILE^DIE("","HLJ")
"RTN","HLCSLNCH",61,0)
 .L -^HLCS(870,HLDP,0)
"RTN","HLCSLNCH",62,0)
 .W !,"This LLP has been enabled!"
"RTN","HLCSLNCH",63,0)
 .Q
"RTN","HLCSLNCH",64,0)
 I $P(HLPARM4,U,6),$D(^%ZIS(14.7,+$P(HLPARM4,U,6),0)) S ZTCPU=$P(^(0),U) W !,"This LLP will start on node ",ZTCPU," if it is run in the Background.",!
"RTN","HLCSLNCH",65,0)
 ;
"RTN","HLCSLNCH",66,0)
 W ! S DIR(0)="SM^F:FOREGROUND;B:BACKGROUND;Q:QUIT"
"RTN","HLCSLNCH",67,0)
 S DIR("A")="Method for running the receiver"
"RTN","HLCSLNCH",68,0)
 S DIR("B")="B"
"RTN","HLCSLNCH",69,0)
 S DIR("?",1)="Enter F for Foreground (and trace)"
"RTN","HLCSLNCH",70,0)
 S DIR("?",2)="      B for Background (normal) or"
"RTN","HLCSLNCH",71,0)
 S DIR("?")="      Q to quit without starting the receiver"
"RTN","HLCSLNCH",72,0)
 D ^DIR K DIR
"RTN","HLCSLNCH",73,0)
 Q:(Y=U)!(Y="Q")
"RTN","HLCSLNCH",74,0)
 ;
"RTN","HLCSLNCH",75,0)
 S HLX=$G(^HLCS(870,HLDP,0))
"RTN","HLCSLNCH",76,0)
 ;-- foreground
"RTN","HLCSLNCH",77,0)
 I Y="F" S HLTRACE=1 D  G STARTQ
"RTN","HLCSLNCH",78,0)
 . X HLBGR
"RTN","HLCSLNCH",79,0)
 ;-- background
"RTN","HLCSLNCH",80,0)
 I Y="B" D  G STARTQ
"RTN","HLCSLNCH",81,0)
 . S ZTRTN=$P(HLBGR," ",2),HLTRACE="",ZTIO="",ZTDTH=$H
"RTN","HLCSLNCH",82,0)
 . S ZTDESC=HLDAPP_" Low Level Protocol",ZTSAVE("HLDP")=""
"RTN","HLCSLNCH",83,0)
 . D ^%ZTLOAD
"RTN","HLCSLNCH",84,0)
 . W !,$S($D(ZTSK):"Job was queued as "_ZTSK_".",1:"Unable to queue job.")
"RTN","HLCSLNCH",85,0)
 ;
"RTN","HLCSLNCH",86,0)
 Q
"RTN","HLCSLNCH",87,0)
 ;
"RTN","HLCSLNCH",88,0)
 ;
"RTN","HLCSLNCH",89,0)
STARTQ ;
"RTN","HLCSLNCH",90,0)
 I $G(POP) W !,?5,"-Unable to Open the Device !",!,!,?6,"Check that Port is Logged Out, and that the",!,?6,"Lower Level Protocol is not Already Running."
"RTN","HLCSLNCH",91,0)
 Q
"RTN","HLCSLNCH",92,0)
 ;
"RTN","HLCSLNCH",93,0)
STOP ; Shut down a lower level protocol..
"RTN","HLCSLNCH",94,0)
 N DIC,DIRUT,DTOUT,DUOUT,HLDP,HLDAPP,HLJ,HLPARM0,HLPARM4,X,Y
"RTN","HLCSLNCH",95,0)
 W !!,"This option is used to shut down the lower level protocol for the"
"RTN","HLCSLNCH",96,0)
 W !,"appropriate device.  Please select the link which you would"
"RTN","HLCSLNCH",97,0)
 W !,"like to shutdown.",!
"RTN","HLCSLNCH",98,0)
 S DIC="^HLCS(870,",DIC(0)="QEAMZ" D ^DIC K DIC Q:Y<0
"RTN","HLCSLNCH",99,0)
 S HLDP=+Y,HLDAPP=Y(0,0),HLPARM0=Y(0),HLPARM4=$G(^HLCS(870,HLDP,400))
"RTN","HLCSLNCH",100,0)
 I $P(HLPARM4,U,3)="M",$S(^%ZOSF("OS")'["OpenM":1,1:$$OS^%ZOSV["VMS") D  Q
"RTN","HLCSLNCH",101,0)
 . W !,$C(7),"This LLP is a multi-threaded server. It is controlled by external service, i.e. UCX. You must use the external service to disable this LLP."
"RTN","HLCSLNCH",102,0)
 . Q
"RTN","HLCSLNCH",103,0)
 ;
"RTN","HLCSLNCH",104,0)
 I $P(HLPARM0,U,15) W !,$C(7),"The lower level protocol is already ",$P(HLPARM0,U,5),"." Q
"RTN","HLCSLNCH",105,0)
 I $P(HLPARM0,U,10) W !,$C(7),"The lower level protocol was started on ",$$DAT2^HLUTIL1($P(HLPARM0,U,10)),"."
"RTN","HLCSLNCH",106,0)
STP1 ;
"RTN","HLCSLNCH",107,0)
 W ! S DIR(0)="Y",DIR("A")="Okay to shut down this job" D ^DIR K DIR
"RTN","HLCSLNCH",108,0)
 I 'Y!($D(DIRUT))!($D(DUOUT)) W !!,"The job will not be shut down." Q
"RTN","HLCSLNCH",109,0)
S ;
"RTN","HLCSLNCH",110,0)
 F  L +^HLCS(870,HLDP,0):2 Q:$T
"RTN","HLCSLNCH",111,0)
 ;4=status,10=Time Stopped,9=Time Started,11=Task Number,3=Device Type,14=shutdown
"RTN","HLCSLNCH",112,0)
 S X="HLJ(870,"""_HLDP_","")",@X@(4)="Halting",@X@(10)=$$NOW^XLFDT,(@X@(11),@X@(9))="@",@X@(14)=1
"RTN","HLCSLNCH",113,0)
 I $P(HLPARM4,U,3)="C"&("N"[$P(HLPARM4,U,4)),'$P(HLPARM0,U,12) S @X@(4)="Shutdown"
"RTN","HLCSLNCH",114,0)
 D FILE^DIE("","HLJ")
"RTN","HLCSLNCH",115,0)
 I ^%ZOSF("OS")["OpenM",(($P(HLPARM4,U,3)="M"&($$OS^%ZOSV'["VMS"))!($P(HLPARM4,U,3)="S")) D
"RTN","HLCSLNCH",116,0)
 . ;pass task number to stop listener
"RTN","HLCSLNCH",117,0)
 . S:$P(HLPARM0,U,12) X=$$ASKSTOP^%ZTLOAD(+$P(HLPARM0,U,12))
"RTN","HLCSLNCH",118,0)
 . D CALL^%ZISTCP($P(HLPARM4,U),$P(HLPARM4,U,2),10)
"RTN","HLCSLNCH",119,0)
 . I POP D HOME^%ZIS U IO W !,"Unable to shutdown logical link!!!",$C(7),$C(7) Q
"RTN","HLCSLNCH",120,0)
 . U IO W "**STOP**"
"RTN","HLCSLNCH",121,0)
 . W !
"RTN","HLCSLNCH",122,0)
 . D CLOSE^%ZISTCP
"RTN","HLCSLNCH",123,0)
 L -^HLCS(870,HLDP,0)
"RTN","HLCSLNCH",124,0)
 W !,"The job for the "_HLDAPP_" Lower Level Protocol will be shut down."
"RTN","HLCSLNCH",125,0)
 Q
"RTN","HLCSLNCH",126,0)
 ;
"RTN","HLCSLNCH",127,0)
STOPQ Q
"RTN","HLCSTCP")
0^1^B30293901
"RTN","HLCSTCP",1,0)
HLCSTCP ;SFIRMFO/TNV-ALB/JFP,PKE - (TCP/IP) MLLP ;12/31/2003  18:03
"RTN","HLCSTCP",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**19,43,49,57,58,64,84**;Oct 13, 1995
"RTN","HLCSTCP",3,0)
 ;
"RTN","HLCSTCP",4,0)
 ; This is an implementation of the HL7 Minimal Lower Layer Protocol
"RTN","HLCSTCP",5,0)
 ;
"RTN","HLCSTCP",6,0)
 ;taskman entry/startup option, HLDP defined in menu entry,
"RTN","HLCSTCP",7,0)
 Q:'$D(HLDP)
"RTN","HLCSTCP",8,0)
 N HLCSOUT,HLDBACK,HLDBSIZE,HLDREAD,HLDRETR,HLRETRA,HLDWAIT,HLOS,HLTCPADD,HLTCPCS,HLTCPLNK,HLTCPORT,HLTCPRET,HLCSFAIL
"RTN","HLCSTCP",9,0)
 ;HLCSOUT= 1-error
"RTN","HLCSTCP",10,0)
 I '$$INIT D EXITS("Init Error") Q
"RTN","HLCSTCP",11,0)
 ; Start the client
"RTN","HLCSTCP",12,0)
 I $G(HLTCPCS)="C" D  Q
"RTN","HLCSTCP",13,0)
 . ; identify process for ^%SY
"RTN","HLCSTCP",14,0)
 . D SETNM^%ZOSV($E("HLClnt:"_HLDP,1,15))
"RTN","HLCSTCP",15,0)
 . D ST1
"RTN","HLCSTCP",16,0)
 . F  D ^HLCSTCP2 Q:$$STOP!$G(HLCSOUT)
"RTN","HLCSTCP",17,0)
 . I $G(HLCSOUT)=1 D MON("Error") H 1 Q
"RTN","HLCSTCP",18,0)
 . I $G(HLCSOUT)=2 D EXITS("Inactive") Q
"RTN","HLCSTCP",19,0)
 . D EXITS("Shutdown")
"RTN","HLCSTCP",20,0)
 ;
"RTN","HLCSTCP",21,0)
 ; identify process for ^%SY
"RTN","HLCSTCP",22,0)
 D SETNM^%ZOSV($E("HLSrv:"_HLDP,1,15))
"RTN","HLCSTCP",23,0)
 ;HLCSFAIL=1 port failed to open
"RTN","HLCSTCP",24,0)
 S HLCSFAIL=1
"RTN","HLCSTCP",25,0)
 ;single threaded listener
"RTN","HLCSTCP",26,0)
 I $G(HLTCPCS)="S" D  Q
"RTN","HLCSTCP",27,0)
 . D ST1,MON("Listen"),LISTEN^%ZISTCP(HLTCPORT,"SERVER^HLCSTCP("""_HLDP_""")")
"RTN","HLCSTCP",28,0)
 . ;couldn't open listener port
"RTN","HLCSTCP",29,0)
 . I HLCSFAIL D EXITS("Openfail") Q
"RTN","HLCSTCP",30,0)
 ;
"RTN","HLCSTCP",31,0)
 ;multi-threaded listener (OpenM)
"RTN","HLCSTCP",32,0)
 I $G(HLTCPCS)="M",^%ZOSF("OS")["OpenM" D  Q
"RTN","HLCSTCP",33,0)
 . D ST1,MON("Listen"),LISTEN^%ZISTCPS(HLTCPORT,"SERVERS^HLCSTCP("""_HLDP_""")")
"RTN","HLCSTCP",34,0)
 Q
"RTN","HLCSTCP",35,0)
 ;
"RTN","HLCSTCP",36,0)
SERVER(HLDP) ; single server using Taskman
"RTN","HLCSTCP",37,0)
 S HLCSFAIL=0
"RTN","HLCSTCP",38,0)
 I '$$INIT D EXITS("Init error") Q
"RTN","HLCSTCP",39,0)
 D ^HLCSTCP1
"RTN","HLCSTCP",40,0)
 I $$STOP D CLOSE^%ZISTCP,EXITS("Shutdown") S IO("C")="" Q
"RTN","HLCSTCP",41,0)
 Q:$G(HLCSOUT)=1
"RTN","HLCSTCP",42,0)
 D MON("Idle")
"RTN","HLCSTCP",43,0)
 Q
"RTN","HLCSTCP",44,0)
 ;
"RTN","HLCSTCP",45,0)
SERVERS(HLDP) ; Multi-threaded server using Taskman
"RTN","HLCSTCP",46,0)
 I '$$INIT D EXITS("Init error") Q
"RTN","HLCSTCP",47,0)
 G LISTEN
"RTN","HLCSTCP",48,0)
 ;
"RTN","HLCSTCP",49,0)
 ;multiple process servers, called from an external utility
"RTN","HLCSTCP",50,0)
MSM ;MSM entry point, called from User-Defined Services
"RTN","HLCSTCP",51,0)
 ;HLDP=ien in the HL LOWER LEVEL PROTOCOL PARAMETER file for the
"RTN","HLCSTCP",52,0)
 ;HL7 Multi-Threaded SERVER
"RTN","HLCSTCP",53,0)
 S (IO,IO(0))=$P
"RTN","HLCSTCP",54,0)
 G LISTEN
"RTN","HLCSTCP",55,0)
 ;
"RTN","HLCSTCP",56,0)
CACHEVMS(%) ;Cache'/VMS tcpip/ucx entry point, called from HLSEVEN.COM file,
"RTN","HLCSTCP",57,0)
 ;listener,  % = HLDP
"RTN","HLCSTCP",58,0)
 I $G(%)="" D ^%ZTER Q
"RTN","HLCSTCP",59,0)
 S (IO,IO(0))="SYS$NET",HLDP=%
"RTN","HLCSTCP",60,0)
 ; **Cache'/VMS specific code**
"RTN","HLCSTCP",61,0)
 O IO::5 E  D MON("Openfail") Q
"RTN","HLCSTCP",62,0)
 X "U IO:(::""-M"")" ;Packet mode like DSM
"RTN","HLCSTCP",63,0)
 D LISTEN C IO Q
"RTN","HLCSTCP",64,0)
 ;
"RTN","HLCSTCP",65,0)
EN ;vms ucx entry point, called from HLSEVEN.COM file,
"RTN","HLCSTCP",66,0)
 ;listener,  % = device^HLDP
"RTN","HLCSTCP",67,0)
 I $G(%)="" D ^%ZTER Q
"RTN","HLCSTCP",68,0)
 S (IO,IO(0))="SYS$NET",HLDP=$P(%,"^",2)
"RTN","HLCSTCP",69,0)
 ; **VMS specific code, need to share device**
"RTN","HLCSTCP",70,0)
 O IO:(TCPDEV):60 E  D MON("Openfail") Q
"RTN","HLCSTCP",71,0)
LISTEN ;
"RTN","HLCSTCP",72,0)
 N HLLSTN,HLCSOUT,HLDBACK,HLDBSIZE,HLDREAD,HLDRETR,HLRETRA,HLDWAIT,HLOS,HLTCPADD,HLTCPCS,HLTCPLNK,HLTCPORT,HLTCPRET,HLCSFAIL
"RTN","HLCSTCP",73,0)
 I '$$INIT D ^%ZTER Q
"RTN","HLCSTCP",74,0)
 ; identify process for ^%SY
"RTN","HLCSTCP",75,0)
 D SETNM^%ZOSV($E("HLSrv:"_HLDP,1,15))
"RTN","HLCSTCP",76,0)
 ;HLLSTN used to identify a listener to tag MON
"RTN","HLCSTCP",77,0)
 S HLLSTN=1
"RTN","HLCSTCP",78,0)
 ;increment job count, run server
"RTN","HLCSTCP",79,0)
 D UPDT(1),^HLCSTCP1,EXITM
"RTN","HLCSTCP",80,0)
 Q
"RTN","HLCSTCP",81,0)
 ;
"RTN","HLCSTCP",82,0)
DCOPEN(HLDP) ;open direct connect - called from HLMA2
"RTN","HLCSTCP",83,0)
 Q:'$$INIT 0
"RTN","HLCSTCP",84,0)
 Q:HLTCPADD=""!(HLTCPORT="") 0
"RTN","HLCSTCP",85,0)
 Q:'$$OPEN^HLCSTCP2 0
"RTN","HLCSTCP",86,0)
 Q 1
"RTN","HLCSTCP",87,0)
 ;
"RTN","HLCSTCP",88,0)
INIT() ; Initialize Variables
"RTN","HLCSTCP",89,0)
 ; HLDP should be set to the IEN or name of Logical Link, file 870
"RTN","HLCSTCP",90,0)
 S HLOS=$P($G(^%ZOSF("OS")),"^")
"RTN","HLCSTCP",91,0)
 N DA,DIQUIET,DR,TMP,X,Y
"RTN","HLCSTCP",92,0)
 S DIQUIET=1
"RTN","HLCSTCP",93,0)
 D DT^DICRW
"RTN","HLCSTCP",94,0)
 I 'HLDP S HLDP=$O(^HLCS(870,"B",HLDP,0)) I 'HLDP Q 0
"RTN","HLCSTCP",95,0)
 S DA=HLDP
"RTN","HLCSTCP",96,0)
 S DR="200.02;200.021;200.03;200.04;200.05;200.09;400.01;400.02;400.03;400.04;400.05"
"RTN","HLCSTCP",97,0)
 D GETS^DIQ(870,DA,DR,"IN","TMP","TMP")
"RTN","HLCSTCP",98,0)
 ;
"RTN","HLCSTCP",99,0)
 I $D(TMP("DIERR")) QUIT 0
"RTN","HLCSTCP",100,0)
 ; -- re-transmit attempts
"RTN","HLCSTCP",101,0)
 S HLDRETR=+$G(TMP(870,DA_",",200.02,"I"))
"RTN","HLCSTCP",102,0)
 ; -- exceed re-transmit action
"RTN","HLCSTCP",103,0)
 S HLRETRA=$G(TMP(870,DA_",",200.021,"I"))
"RTN","HLCSTCP",104,0)
 ; -- block size
"RTN","HLCSTCP",105,0)
 S HLDBSIZE=+$G(TMP(870,DA_",",200.03,"I"))
"RTN","HLCSTCP",106,0)
 ; -- read timeout
"RTN","HLCSTCP",107,0)
 S HLDREAD=+$G(TMP(870,DA_",",200.04,"I"))
"RTN","HLCSTCP",108,0)
 ; -- ack timeout
"RTN","HLCSTCP",109,0)
 S HLDBACK=+$G(TMP(870,DA_",",200.05,"I"))
"RTN","HLCSTCP",110,0)
 ; -- uni-directional wait
"RTN","HLCSTCP",111,0)
 S HLDWAIT=$G(TMP(870,DA_",",200.09,"I"))
"RTN","HLCSTCP",112,0)
 ; -- tcp address
"RTN","HLCSTCP",113,0)
 S HLTCPADD=$G(TMP(870,DA_",",400.01,"I"))
"RTN","HLCSTCP",114,0)
 ; -- tcp port
"RTN","HLCSTCP",115,0)
 S HLTCPORT=$G(TMP(870,DA_",",400.02,"I"))
"RTN","HLCSTCP",116,0)
 ; -- tcp/ip service type
"RTN","HLCSTCP",117,0)
 S HLTCPCS=$G(TMP(870,DA_",",400.03,"I"))
"RTN","HLCSTCP",118,0)
 ; -- link persistence
"RTN","HLCSTCP",119,0)
 S HLTCPLNK=$G(TMP(870,DA_",",400.04,"I"))
"RTN","HLCSTCP",120,0)
 ; -- retention
"RTN","HLCSTCP",121,0)
 S HLTCPRET=$G(TMP(870,DA_",",400.05,"I"))
"RTN","HLCSTCP",122,0)
 ;
"RTN","HLCSTCP",123,0)
 ; -- set defaults in case something's not set
"RTN","HLCSTCP",124,0)
 S:HLDREAD=0 HLDREAD=10
"RTN","HLCSTCP",125,0)
 S:HLDBACK=0 HLDBACK=60
"RTN","HLCSTCP",126,0)
 S:HLDBSIZE=0 HLDBSIZE=245
"RTN","HLCSTCP",127,0)
 S:HLDRETR=0 HLDRETR=5
"RTN","HLCSTCP",128,0)
 S:HLTCPRET="" X=$P($$PARAM^HLCS2,U,12),HLTCPRET=$S(X:X,1:15)
"RTN","HLCSTCP",129,0)
 ;
"RTN","HLCSTCP",130,0)
 Q 1
"RTN","HLCSTCP",131,0)
 ;
"RTN","HLCSTCP",132,0)
ST1 ;record startup in 870 for single server
"RTN","HLCSTCP",133,0)
 ;4=status 9=Time Started, 10=Time Stopped, 11=Task Number 
"RTN","HLCSTCP",134,0)
 ;14=Shutdown LLP, 3=LLP Online, 18=Gross Errors
"RTN","HLCSTCP",135,0)
 N HLJ,X
"RTN","HLCSTCP",136,0)
 F  L +^HLCS(870,HLDP,0):2 Q:$T
"RTN","HLCSTCP",137,0)
 S X="HLJ(870,"""_HLDP_","")"
"RTN","HLCSTCP",138,0)
 S @X@(4)="Init",(@X@(10),@X@(18))="@",@X@(14)=0
"RTN","HLCSTCP",139,0)
 I HLTCPCS["C" S @X@(3)=$S(HLTCPLNK["Y":"PC",1:"NC")
"RTN","HLCSTCP",140,0)
 E  S @X@(3)=$S(HLTCPCS["S":"SS",HLTCPCS["M":"MS",1:"")
"RTN","HLCSTCP",141,0)
 I @X@(3)'="NC" S @X@(9)=$$NOW^XLFDT
"RTN","HLCSTCP",142,0)
 S:$G(ZTSK) @X@(11)=ZTSK
"RTN","HLCSTCP",143,0)
 D FILE^DIE("","HLJ")
"RTN","HLCSTCP",144,0)
 L -^HLCS(870,HLDP,0)
"RTN","HLCSTCP",145,0)
 Q
"RTN","HLCSTCP",146,0)
 ;
"RTN","HLCSTCP",147,0)
MON(Y) ;Display current state & check for shutdown
"RTN","HLCSTCP",148,0)
 ;don't display for multiple server
"RTN","HLCSTCP",149,0)
 Q:$G(HLLSTN)
"RTN","HLCSTCP",150,0)
 F  L +^HLCS(870,HLDP,0):2 Q:$T
"RTN","HLCSTCP",151,0)
 S $P(^HLCS(870,HLDP,0),U,5)=Y
"RTN","HLCSTCP",152,0)
 L -^HLCS(870,HLDP,0)
"RTN","HLCSTCP",153,0)
 Q:'$D(HLTRACE)
"RTN","HLCSTCP",154,0)
 N X U IO(0)
"RTN","HLCSTCP",155,0)
 W !,"IN State: ",Y
"RTN","HLCSTCP",156,0)
 I '$$STOP D
"RTN","HLCSTCP",157,0)
 . R !,"Type Q to Quit: ",X#1:1
"RTN","HLCSTCP",158,0)
 . I $L(X),"Qq"[X S $P(^HLCS(870,HLDP,0),U,15)=1
"RTN","HLCSTCP",159,0)
 U IO
"RTN","HLCSTCP",160,0)
 Q
"RTN","HLCSTCP",161,0)
UPDT(Y) ;update job count for multiple servers,X=1 increment
"RTN","HLCSTCP",162,0)
 N HLJ,X
"RTN","HLCSTCP",163,0)
 F  L +^HLCS(870,HLDP,0):2 Q:$T
"RTN","HLCSTCP",164,0)
 S X=+$P(^HLCS(870,HLDP,0),U,5),$P(^(0),U,5)=$S(Y:X+1,1:X-1)_" server"
"RTN","HLCSTCP",165,0)
 ;if incrementing, set the Device Type field to Multi-Server
"RTN","HLCSTCP",166,0)
 I X S HLJ(870,HLDP_",",3)="MS" D FILE^DIE("","HLJ")
"RTN","HLCSTCP",167,0)
 L -^HLCS(870,HLDP,0)
"RTN","HLCSTCP",168,0)
 Q
"RTN","HLCSTCP",169,0)
STOP() ;stop flag set
"RTN","HLCSTCP",170,0)
 N X
"RTN","HLCSTCP",171,0)
 F  L +^HLCS(870,HLDP,0):2 Q:$T
"RTN","HLCSTCP",172,0)
 S X=+$P(^HLCS(870,HLDP,0),U,15)
"RTN","HLCSTCP",173,0)
 L -^HLCS(870,HLDP,0)
"RTN","HLCSTCP",174,0)
 Q X
"RTN","HLCSTCP",175,0)
 ;
"RTN","HLCSTCP",176,0)
LLCNT(DP,Y,Z) ;update Logical Link counters
"RTN","HLCSTCP",177,0)
 ;DP=ien of Logical Link in file 870
"RTN","HLCSTCP",178,0)
 ;Y: 1=msg rec, 2=msg proc, 3=msg to send, 4=msg sent
"RTN","HLCSTCP",179,0)
 ;Z: ""=add to counter, 1=subtract from counter
"RTN","HLCSTCP",180,0)
 Q:'$D(^HLCS(870,+$G(DP),0))!('$G(Y))
"RTN","HLCSTCP",181,0)
 N P,X
"RTN","HLCSTCP",182,0)
 S P=$S(Y<3:"IN",1:"OUT")_" QUEUE "_$S(Y#2:"BACK",1:"FRONT")_" POINTER"
"RTN","HLCSTCP",183,0)
 F  L +^HLCS(870,DP,P):2 Q:$T
"RTN","HLCSTCP",184,0)
 S X=+$G(^HLCS(870,DP,P)),^(P)=X+$S($G(Z):-1,1:1)
"RTN","HLCSTCP",185,0)
 L -^HLCS(870,DP,P)
"RTN","HLCSTCP",186,0)
 Q
"RTN","HLCSTCP",187,0)
SDFLD ; set Shutdown? field to yes
"RTN","HLCSTCP",188,0)
 Q:'$G(HLDP)
"RTN","HLCSTCP",189,0)
 N HLJ,X
"RTN","HLCSTCP",190,0)
 F  L +^HLCS(870,HLDP,0):2 Q:$T
"RTN","HLCSTCP",191,0)
 ;14=Shutdown LLP?
"RTN","HLCSTCP",192,0)
 S HLJ(870,HLDP_",",14)=1
"RTN","HLCSTCP",193,0)
 D FILE^DIE("","HLJ")
"RTN","HLCSTCP",194,0)
 L -^HLCS(870,HLDP,0)
"RTN","HLCSTCP",195,0)
 Q
"RTN","HLCSTCP",196,0)
 ;
"RTN","HLCSTCP",197,0)
EXITS(Y) ; Single service shutdown and cleans up
"RTN","HLCSTCP",198,0)
 N HLJ,X
"RTN","HLCSTCP",199,0)
 F  L +^HLCS(870,HLDP,0):2 Q:$T
"RTN","HLCSTCP",200,0)
 ;4=status,10=Time Stopped,9=Time Started,11=Task Number
"RTN","HLCSTCP",201,0)
 S X="HLJ(870,"""_HLDP_","")"
"RTN","HLCSTCP",202,0)
 S @X@(4)=Y,@X@(11)="@"
"RTN","HLCSTCP",203,0)
 S:$G(HLCSOUT)'=2 @X@(10)=$$NOW^XLFDT,@X@(9)="@"
"RTN","HLCSTCP",204,0)
 D FILE^DIE("","HLJ")
"RTN","HLCSTCP",205,0)
 L -^HLCS(870,HLDP,0)
"RTN","HLCSTCP",206,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","HLCSTCP",207,0)
 Q
"RTN","HLCSTCP",208,0)
 ;
"RTN","HLCSTCP",209,0)
EXITM ;Multiple service shutdown and clean up
"RTN","HLCSTCP",210,0)
 D UPDT(0)
"RTN","HLCSTCP",211,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","HLCSTCP",212,0)
 Q
"RTN","HLCSTCPA")
0^5^B1420563
"RTN","HLCSTCPA",1,0)
HLCSTCPA ;OIFO-O/RJH - (TCP/IP) VMS ;07/10/2003  10:12
"RTN","HLCSTCPA",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**84**;Oct 13, 1995
"RTN","HLCSTCPA",3,0)
 ;
"RTN","HLCSTCPA",4,0)
 ; 1. port number is input from VMS HLSxxxxDSM.COM or HLSxxxxCACHE.COM
"RTN","HLCSTCPA",5,0)
 ;    file, where xxxx is port number.
"RTN","HLCSTCPA",6,0)
 ; 2. find the ien of #870(logical link file) for the HL7 multi-listener
"RTN","HLCSTCPA",7,0)
 ; 3. call the appropriate entry:
"RTN","HLCSTCPA",8,0)
 ;    for Cache: CACHEVMS^HLCSTCP(ien of #870)
"RTN","HLCSTCPA",9,0)
 ;    for DSM:   EN^HLCSTCP
"RTN","HLCSTCPA",10,0)
 Q
"RTN","HLCSTCPA",11,0)
PORT ;
"RTN","HLCSTCPA",12,0)
 ;HLIEN870: ien in #870 (logical link file)
"RTN","HLCSTCPA",13,0)
 ;HLPORT: port number of multi-listener
"RTN","HLCSTCPA",14,0)
 ;HLPRTS: port number in entry to be tested
"RTN","HLCSTCPA",15,0)
 ;input of DSM: % = device^port number of multi-listener
"RTN","HLCSTCPA",16,0)
 ;input of Cache: port number of TCPIP
"RTN","HLCSTCPA",17,0)
 ;
"RTN","HLCSTCPA",18,0)
 I ^%ZOSF("OS")["OpenM" D
"RTN","HLCSTCPA",19,0)
 . S HLPORT=$ZF("GETSYM","PORT")
"RTN","HLCSTCPA",20,0)
 I ^%ZOSF("OS")["DSM" D
"RTN","HLCSTCPA",21,0)
 . S HLPORT=$P(%,"^",2)
"RTN","HLCSTCPA",22,0)
 I 'HLPORT D ^%ZTER Q
"RTN","HLCSTCPA",23,0)
 S HLIEN870=0
"RTN","HLCSTCPA",24,0)
 F  S HLIEN870=$O(^HLCS(870,"E","M",HLIEN870)) Q:'HLIEN870  D  Q:(HLPRTS=HLPORT)
"RTN","HLCSTCPA",25,0)
 . S HLPRTS=$P(^HLCS(870,HLIEN870,400),"^",2)
"RTN","HLCSTCPA",26,0)
 I 'HLIEN870 D ^%ZTER Q
"RTN","HLCSTCPA",27,0)
 ;
"RTN","HLCSTCPA",28,0)
 K HLPORT,HLPRTS
"RTN","HLCSTCPA",29,0)
 ;
"RTN","HLCSTCPA",30,0)
 ;for Cache/VMS
"RTN","HLCSTCPA",31,0)
 I ^%ZOSF("OS")["OpenM" D  Q
"RTN","HLCSTCPA",32,0)
 .D CACHEVMS^HLCSTCP(HLIEN870)
"RTN","HLCSTCPA",33,0)
 ;
"RTN","HLCSTCPA",34,0)
 ;for DSM
"RTN","HLCSTCPA",35,0)
 I ^%ZOSF("OS")["DSM" D  Q
"RTN","HLCSTCPA",36,0)
 . S $P(%,"^",2)=HLIEN870   ;set % = device^ien of #870
"RTN","HLCSTCPA",37,0)
 . K HLIEN870
"RTN","HLCSTCPA",38,0)
 . D EN^HLCSTCP
"RTN","HLCSTCPA",39,0)
 ;
"RTN","HLCSTCPA",40,0)
 D ^%ZTER
"RTN","HLCSTCPA",41,0)
 Q
"RTN","HLPAT84")
0^4^B719175
"RTN","HLPAT84",1,0)
HLPAT84 ;OIFO-O/RJH - HL7 PATCH 84 POST-INIT ;07/10/03  11:38
"RTN","HLPAT84",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**84**;Oct 13, 1995
"RTN","HLPAT84",3,0)
 Q
"RTN","HLPAT84",4,0)
POST ; reindex field #3, DEVICE TYPE of file #870 (logical link file)
"RTN","HLPAT84",5,0)
 N DIK
"RTN","HLPAT84",6,0)
 S DIK="^HLCS(870,"
"RTN","HLPAT84",7,0)
 S DIK(1)="400.03"
"RTN","HLPAT84",8,0)
 D ENALL^DIK
"RTN","HLPAT84",9,0)
 ;
"RTN","HLPAT84",10,0)
CACHE ; for Cache/VMS multi-listeners, clear the following fields:
"RTN","HLPAT84",11,0)
 ; #4 (State).
"RTN","HLPAT84",12,0)
 ; #10 (Time Stopped)
"RTN","HLPAT84",13,0)
 ; #14 (Shutdown LLP)
"RTN","HLPAT84",14,0)
 ; #4.5 (Autostart)
"RTN","HLPAT84",15,0)
 ; #400.01 (TCP/IP Address)
"RTN","HLPAT84",16,0)
 ; #400.06 (Startup Node)
"RTN","HLPAT84",17,0)
 ;
"RTN","HLPAT84",18,0)
 I ^%ZOSF("OS")["OpenM",$$OS^%ZOSV["VMS" D
"RTN","HLPAT84",19,0)
 . N HLIEN870,DIE,DA,DR
"RTN","HLPAT84",20,0)
 . S HLIEN870=0
"RTN","HLPAT84",21,0)
 . F  S HLIEN870=$O(^HLCS(870,"E","MS",HLIEN870)) Q:'HLIEN870  D
"RTN","HLPAT84",22,0)
 .. S DIE="^HLCS(870,"
"RTN","HLPAT84",23,0)
 .. S DA=HLIEN870
"RTN","HLPAT84",24,0)
 .. S DR="4////@;10////@;14////@;4.5////@;400.01////@;400.06////@"
"RTN","HLPAT84",25,0)
 .. D ^DIE
"RTN","HLPAT84",26,0)
 Q
"VER")
8^22.0
"^DD",870,870,0)
FIELD^^400.07^44
"^DD",870,870,0,"DDA")
N
"^DD",870,870,0,"DIKOLD")
HLX870
"^DD",870,870,0,"DT")
3001102
"^DD",870,870,0,"IX","AISTAT",870.019,1)

"^DD",870,870,0,"IX","ALLP",870,2)

"^DD",870,870,0,"IX","B",870,.01)

"^DD",870,870,0,"IX","C",870,.02)

"^DD",870,870,0,"IX","D",870,.03)

"^DD",870,870,0,"IX","E",870,400.03)

"^DD",870,870,0,"NM","HL LOGICAL LINK")

"^DD",870,870,0,"PT",101,770.7)

"^DD",870,870,0,"PT",772,11)

"^DD",870,870,0,"PT",773,7)

"^DD",870,870,0,"PT",869.311,.01)

"^DD",870,870,0,"VRPK")
HL
"^DD",870,870,.01,0)
NODE^RF^^0;1^K:$L(X)>10!($L(X)<3)!'(X'?1P.E) X
"^DD",870,870,.01,1,0)
^.1
"^DD",870,870,.01,1,1,0)
870^B
"^DD",870,870,.01,1,1,1)
S ^HLCS(870,"B",$E(X,1,30),DA)=""
"^DD",870,870,.01,1,1,2)
K ^HLCS(870,"B",$E(X,1,30),DA)
"^DD",870,870,.01,3)
Enter the name of the logical link (3-10 characters)
"^DD",870,870,.01,21,0)
^^5^5^2990217^^^^
"^DD",870,870,.01,21,1,0)
This is the name of the logical link that data will be communicated on.
"^DD",870,870,.01,21,2,0)
It is this name that will be displayed in the "NODE" column of the
"^DD",870,870,.01,21,3,0)
SYSTEMS LINK MONITOR display option.
"^DD",870,870,.01,21,4,0)
It is suggested that this name be the same name as the commercial
"^DD",870,870,.01,21,5,0)
application e.g. KURZWEIL1,KURZWEIL2,COPATH, or SUNQUEST1.
"^DD",870,870,.01,"DT")
2941006
"^DD",870,870,.02,0)
INSTITUTION^P4'X^DIC(4,^0;2^K:$O(^HLCS(870,"C",X,0)) X
"^DD",870,870,.02,1,0)
^.1
"^DD",870,870,.02,1,1,0)
870^C
"^DD",870,870,.02,1,1,1)
S ^HLCS(870,"C",$E(X,1,30),DA)=""
"^DD",870,870,.02,1,1,2)
K ^HLCS(870,"C",$E(X,1,30),DA)
"^DD",870,870,.02,1,1,"DT")
2970123
"^DD",870,870,.02,3)
Select an institution that has not been associated with another link.
"^DD",870,870,.02,21,0)
^^5^5^2990804^
"^DD",870,870,.02,21,1,0)
It may be necessary for an application to determine the appropriate link
"^DD",870,870,.02,21,2,0)
to use when the only information it has is the institution. This field is
"^DD",870,870,.02,21,3,0)
used to associate a link with that institution. There is a 1:1
"^DD",870,870,.02,21,4,0)
correspondence between institution and logical link. An institution cannot
"^DD",870,870,.02,21,5,0)
be associated with more than one logical link.
"^DD",870,870,.02,"DT")
2990804
"^DD",870,870,.03,0)
DOMAIN^P4.2'X^DIC(4.2,^0;7^K:$O(^HLCS(870,"D",X,0)) X
"^DD",870,870,.03,1,0)
^.1
"^DD",870,870,.03,1,1,0)
870^D
"^DD",870,870,.03,1,1,1)
S ^HLCS(870,"D",$E(X,1,30),DA)=""
"^DD",870,870,.03,1,1,2)
K ^HLCS(870,"D",$E(X,1,30),DA)
"^DD",870,870,.03,1,1,"DT")
2980321
"^DD",870,870,.03,3)
Enter the Mailman domain corresponding to this link.
"^DD",870,870,.03,21,0)
^^5^5^2980428^
"^DD",870,870,.03,21,1,0)
If this is a remote facility, enter the corresponding domain name. This
"^DD",870,870,.03,21,2,0)
usually would not apply to a local, departmental system. There is a
"^DD",870,870,.03,21,3,0)
one-to-one correspondence of Domain name to Logical Link. If the domain is
"^DD",870,870,.03,21,4,0)
already in use, review your current setup. Either change the original use
"^DD",870,870,.03,21,5,0)
of the domain or create a new domain to represent this link.
"^DD",870,870,.03,"DT")
2980428
"^DD",870,870,2,0)
LLP TYPE^RP869.1'^HLCS(869.1,^0;3^Q
"^DD",870,870,2,1,0)
^.1
"^DD",870,870,2,1,1,0)
870^ALLP
"^DD",870,870,2,1,1,1)
S ^HLCS(870,"ALLP",$E(X,1,30),DA)=""
"^DD",870,870,2,1,1,2)
K ^HLCS(870,"ALLP",$E(X,1,30),DA)
"^DD",870,870,2,1,1,"%D",0)
^^3^3^2950227^
"^DD",870,870,2,1,1,"%D",1,0)
This cross-reference is used to link the HL Lower Layer Parameter
"^DD",870,870,2,1,1,"%D",2,0)
file (#869.2) with the HL Logical Link file. Using this x-ref you can
"^DD",870,870,2,1,1,"%D",3,0)
locate the parameter associated with this link.
"^DD",870,870,2,1,1,"DT")
2950227
"^DD",870,870,2,3)
Enter the  LLP used for this logical link.
"^DD",870,870,2,21,0)
^^4^4^2990707^
"^DD",870,870,2,21,1,0)
Enter the type of Lower Level Protocol for this logical link. Selection of
"^DD",870,870,2,21,2,0)
TCP implies that the MLLP protocol will be used. Each of the supported
"^DD",870,870,2,21,3,0)
LLP's are described in detail in Appendix C of the HL7 Implementation
"^DD",870,870,2,21,4,0)
Guide.
"^DD",870,870,2,"DT")
2990715
"^DD",870,870,3,0)
DEVICE TYPE^S^PC:Persistent Client;NC:Non-Persistent Client;SS:Single-threaded Server;MS:Multi-threaded Server;SH:Serial HLLP;SX:Serial X3.28;MM:MailMan;^0;4^Q
"^DD",870,870,3,1,0)
^.1^^0
"^DD",870,870,3,3)
Not editable from any user option. See field description.
"^DD",870,870,3,21,0)
^^3^3^2990518^^^^
"^DD",870,870,3,21,1,0)
This field is not editable from any user option. It is used purely
"^DD",870,870,3,21,2,0)
for display purposes in the DEVICE TYPE column of the SYSTEMS LINK
"^DD",870,870,3,21,3,0)
MONITOR display option.
"^DD",870,870,3,"DT")
3030710
"^DD",870,870,4,0)
STATE^F^^0;5^K:$L(X)>10!($L(X)<1) X
"^DD",870,870,4,3)
Not editable from any user option. See field description.
"^DD",870,870,4,21,0)
^^3^3^2941212^^^
"^DD",870,870,4,21,1,0)
This field is not editable from any user option. It is used purely for
"^DD",870,870,4,21,2,0)
display purposes in the STATE column of the SYSTEMS LINK MONITOR
"^DD",870,870,4,21,3,0)
display option.
"^DD",870,870,4,"DT")
2941006
"^DD",870,870,4.5,0)
AUTOSTART^S^0:Disabled;1:Enabled;^0;6^Q
"^DD",870,870,4.5,21,0)
^^2^2^2980831^^
"^DD",870,870,4.5,21,1,0)
This field permits the link to be restarted by Taskman after a system
"^DD",870,870,4.5,21,2,0)
reboot. If disabled, the link will not be restarted.
"^DD",870,870,4.5,"DT")
2961120
"^DD",870,870,5,0)
IN QUEUE FRONT POINTER^NJ14,0^^IN QUEUE FRONT POINTER;1^K:+X'=X!(X>99999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870,5,3)
This field is not editable from any user option. See Field Description.
"^DD",870,870,5,21,0)
^^2^2^2990726^^^^
"^DD",870,870,5,21,1,0)
The queue structure relies on two queues, INcoming and OUTgoing.
"^DD",870,870,5,21,2,0)
This pointer is used to point to the first message in the FIFO queue.
"^DD",870,870,5,"DT")
2941104
"^DD",870,870,6,0)
IN QUEUE BACK POINTER^NJ14,0^^IN QUEUE BACK POINTER;1^K:+X'=X!(X>99999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870,6,3)
This field is not editable from any user option. See Field Description.
"^DD",870,870,6,21,0)
^^2^2^2941212^^
"^DD",870,870,6,21,1,0)
The queue structure relies on two queues-INcoming and OUTgoing.
"^DD",870,870,6,21,2,0)
This pointer points to the last message in the FIFO queue.
"^DD",870,870,6,"DT")
2941104
"^DD",870,870,7,0)
OUT QUEUE FRONT POINTER^NJ14,0^^OUT QUEUE FRONT POINTER;1^K:+X'=X!(X>99999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870,7,3)
This field is not editable from any user option. See Field Description.
"^DD",870,870,7,21,0)
^^2^2^2941212^^
"^DD",870,870,7,21,1,0)
The queue structure relies on two queues-INcoming and OUTgoing.
"^DD",870,870,7,21,2,0)
This pointer points to the first message in the FIFO queue.
"^DD",870,870,7,"DT")
2941104
"^DD",870,870,8,0)
OUT QUEUE BACK POINTER^NJ14,0^^OUT QUEUE BACK POINTER;1^K:+X'=X!(X>99999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870,8,3)
This field is not editable from any user option. See field description.
"^DD",870,870,8,21,0)
^^2^2^2941212^^^
"^DD",870,870,8,21,1,0)
The queue structure relies on two queues, INcoming and OUTgoing.
"^DD",870,870,8,21,2,0)
This pointer points to the last message in the FIFO queue.
"^DD",870,870,8,"DT")
2941104
"^DD",870,870,9,0)
TIME STARTED^D^^0;10^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",870,870,9,3)
This field is not editable from any user option. See Field Description.
"^DD",870,870,9,21,0)
^^3^3^2950222^^^^
"^DD",870,870,9,21,1,0)
This field contains the Date/Time the Lower Layer Protocol was
"^DD",870,870,9,21,2,0)
last launched for the Logical Link. Only applicable to Lower Layer
"^DD",870,870,9,21,3,0)
Protocols, not Mailman.
"^DD",870,870,9,"DT")
2941006
"^DD",870,870,10,0)
TIME STOPPED^D^^0;11^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",870,870,10,3)
This field is not editable from any user option. See Field Description.
"^DD",870,870,10,21,0)
^^3^3^2941212^^^
"^DD",870,870,10,21,1,0)
This field contains the Date/Time the Lower Layer Protocol was
"^DD",870,870,10,21,2,0)
last shutdown for the Logical Link. Only applicable to Lower Layer
"^DD",870,870,10,21,3,0)
Protocols, not Mailman.
"^DD",870,870,10,"DT")
2941006
"^DD",870,870,11,0)
TASK NUMBER^NJ15,0^^0;12^K:+X'=X!(X>999999999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,11,3)
This field is not editable from any user option. See Field Description.
"^DD",870,870,11,21,0)
^^2^2^2941212^^^
"^DD",870,870,11,21,1,0)
This is the task number assigned by TaskMan when the Lower Layer Protocol
"^DD",870,870,11,21,2,0)
is launched in the background.
"^DD",870,870,11,"DT")
2941006
"^DD",870,870,14,0)
SHUTDOWN LLP ?^S^0:NO;1:YES;^0;15^Q
"^DD",870,870,14,3)
Setting this field to 'Y' through the STOP HYBRID LLP option, shuts down the lower layer protocol and closes the device.
"^DD",870,870,14,21,0)
^^3^3^2950222^^^^
"^DD",870,870,14,21,1,0)
This field is editable through the STOP HYBRID LLP option. When the
"^DD",870,870,14,21,2,0)
Lower Layer Protocol is running, and this field is set to 'Y' the
"^DD",870,870,14,21,3,0)
Lower Layer Protocol will shutdown and close the device.
"^DD",870,870,14,"DT")
2950222
"^DD",870,870,18,0)
GROSS COMMUNICATIONS ERROR^P771.7'^HL(771.7,^0;19^Q
"^DD",870,870,18,3)
This field contains the most recent communications error which has occured on a particular link.
"^DD",870,870,18,21,0)
^^10^10^2941213^^^^
"^DD",870,870,18,21,1,0)
This field contains the most recent gross communications error. It
"^DD",870,870,18,21,2,0)
serves a two purposes. It is a flag for the SYSTEMS LINK MONITOR.
"^DD",870,870,18,21,3,0)
In other words, if this field is defined it means a communications
"^DD",870,870,18,21,4,0)
error has occured on the link. This is indicated by the NODE field
"^DD",870,870,18,21,5,0)
flashing on the SYSTEMS LINK MONITOR. 
"^DD",870,870,18,21,6,0)
The error can be viewed by using the SHOW COMMUNICATION ERROR option.
"^DD",870,870,18,21,7,0)
The error can be cleared by using the CLEAR COMMUNICATION ERROR option.
"^DD",870,870,18,21,8,0)
If set, an error occurred while transmitting (timeout for example).
"^DD",870,870,18,21,9,0)
This field can be viewed using the 'Show Gross LLP Error' and cleared
"^DD",870,870,18,21,10,0)
using the 'Clear Gross LLP Error' options.
"^DD",870,870,18,"DT")
2941213
"^DD",870,870,19,0)
IN QUEUE^870.019^^1;0
"^DD",870,870,19,21,0)
^^1^1^2950526^^^^
"^DD",870,870,19,21,1,0)
This multiple contains the queue for incoming messages.
"^DD",870,870,20,0)
OUT QUEUE^870.01A^^2;0
"^DD",870,870,20,21,0)
^^1^1^2950801^^^^
"^DD",870,870,20,21,1,0)
This multiple contains the queue for outgoing messages.
"^DD",870,870,21,0)
QUEUE SIZE^NJ6,0^^0;21^K:+X'=X!(X>100000)!(X<2)!(X?.E1"."1N.N) X
"^DD",870,870,21,3)
Type a Number between 2 and 100000, 0 Decimal Digits
"^DD",870,870,21,21,0)
^^3^3^2981020^^^^
"^DD",870,870,21,21,1,0)
This is the steady-state size of the queue. The queue may dynamically
"^DD",870,870,21,21,2,0)
grow beyond this size, under certain conditions. See Users Manual, for
"^DD",870,870,21,21,3,0)
more information.
"^DD",870,870,21,"DT")
2981020
"^DD",870,870,100.01,0)
MAIL GROUP^P3.8^XMB(3.8,^100;1^Q
"^DD",870,870,100.01,3)
Enter the mail group that messages should be sent to.
"^DD",870,870,100.01,21,0)
^^10^10^2990707^
"^DD",870,870,100.01,21,1,0)
If you are building a logical link that will use Mailman as a transport,
"^DD",870,870,100.01,21,2,0)
you must define a mail group that contains the remote member, 
"^DD",870,870,100.01,21,3,0)
 
"^DD",870,870,100.01,21,4,0)
S.HL V16 SERVER@your target domain
"^DD",870,870,100.01,21,5,0)
 
"^DD",870,870,100.01,21,6,0)
The HL7 package will place outbound messages in file 870's outque. The
"^DD",870,870,100.01,21,7,0)
link must be running for messages to be handed off to Mailman.
"^DD",870,870,100.01,21,8,0)
 
"^DD",870,870,100.01,21,9,0)
Inbound messages that are received by the server option are placed
"^DD",870,870,100.01,21,10,0)
directly in file 772.
"^DD",870,870,100.01,"DT")
2990707
"^DD",870,870,200.01,0)
HLLP DEVICE^P3.5'^%ZIS(1,^200;1^Q
"^DD",870,870,200.01,3)
Enter the device to be used for the HLLP protocol.
"^DD",870,870,200.01,21,0)
^^3^3^2990707^
"^DD",870,870,200.01,21,1,0)
This is an entry in the Device file (#3.5). It is opened when this logical
"^DD",870,870,200.01,21,2,0)
link is started up and remains open until the link is shut down. Normally,
"^DD",870,870,200.01,21,3,0)
Vista will initiate and the connection with this serial device.
"^DD",870,870,200.01,"DT")
2990707
"^DD",870,870,200.02,0)
RE-TRANSMISSION ATTEMPTS^NJ3,0^^200;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870,200.02,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",870,870,200.02,21,0)
^^3^3^2990707^
"^DD",870,870,200.02,21,1,0)
Enter the number of times to re-try sending a message.  The default is 5
"^DD",870,870,200.02,21,2,0)
tries if this field is left blank. If a single message exceeds this value
"^DD",870,870,200.02,21,3,0)
an Alert is sent to the HL7 mail group and the link is shutdown.
"^DD",870,870,200.02,"DT")
2990707
"^DD",870,870,200.021,0)
EXCEED RE-TRANSMIT ACTION^S^I:ignore;R:restart;S:shutdown;^200;10^Q
"^DD",870,870,200.021,21,0)
^^5^5^2990820^
"^DD",870,870,200.021,21,1,0)
This field determines what to do when a message exceeds the number of
"^DD",870,870,200.021,21,2,0)
 retry attempts for this Logical Link.  Actions are:
"^DD",870,870,200.021,21,3,0)
  Ignore   = send alert once and keep trying to resend
"^DD",870,870,200.021,21,4,0)
  Restart  = send alert once and shutdown link then start link
"^DD",870,870,200.021,21,5,0)
  Shutdown = send alert once and shutdown link
"^DD",870,870,200.021,"DT")
2990820
"^DD",870,870,200.03,0)
BLOCK SIZE^NJ3,0^^200;3^K:+X'=X!(X>512)!(X<9)!(X?.E1"."1N.N) X
"^DD",870,870,200.03,3)
Type a Number between 9 and 512, 0 Decimal Digits245 is the recommended default.
"^DD",870,870,200.03,"DT")
2990707
"^DD",870,870,200.04,0)
READ TIMEOUT^NJ3,0^^200;4^K:+X'=X!(X>600)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,200.04,3)
Type a Number between 1 and 600, 0 Decimal Digits
"^DD",870,870,200.04,21,0)
^^3^3^2990708^
"^DD",870,870,200.04,21,1,0)
Enter the number of seconds the Lower Layer Protocol remains in a read
"^DD",870,870,200.04,21,2,0)
state for data to come in on the link. The default is 10 seconds if this
"^DD",870,870,200.04,21,3,0)
field is left blank.
"^DD",870,870,200.04,"DT")
2990708
"^DD",870,870,200.05,0)
ACK TIMEOUT^NJ3,0^^200;5^K:+X'=X!(X>600)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870,200.05,3)
Type a Number between 0 and 600, 0 Decimal Digits
"^DD",870,870,200.05,21,0)
^^4^4^3000418^^
"^DD",870,870,200.05,21,1,0)
The number of seconds the Lower Layer Protocol waits for an
"^DD",870,870,200.05,21,2,0)
acknowledgement from the receiving application. The default
"^DD",870,870,200.05,21,3,0)
is 60.  If this field is less than the READ TIMEOUT field, 
"^DD",870,870,200.05,21,4,0)
the READ TIMEOUT value will be used.
"^DD",870,870,200.05,"DT")
3000418
"^DD",870,870,200.06,0)
LLP START BLOCK^NJ3,0^^200;6^K:+X'=X!(X>300)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,200.06,3)
Type a Number between 1 and 300, 0 Decimal Digits
"^DD",870,870,200.06,21,0)
^^5^5^2990709^
"^DD",870,870,200.06,21,1,0)
Enter the numeric value of the control character used by the HLLP
"^DD",870,870,200.06,21,2,0)
communications protocol as a START BLOCK CHARACTER. While this character
"^DD",870,870,200.06,21,3,0)
is negotiable, the HL7 implementation guide recommends the use of the 'VT'
"^DD",870,870,200.06,21,4,0)
character. If this field is left blank, the default value of 11 will be
"^DD",870,870,200.06,21,5,0)
used.
"^DD",870,870,200.06,"DT")
2990709
"^DD",870,870,200.07,0)
LLP END BLOCK^NJ3,0^^200;7^K:+X'=X!(X>300)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,200.07,3)
Type a Number between 1 and 300, 0 Decimal Digits
"^DD",870,870,200.07,21,0)
^^4^4^2990709^
"^DD",870,870,200.07,21,1,0)
Enter the numeric value of the control character defined in the HLLP
"^DD",870,870,200.07,21,2,0)
specification as the END BLOCK CHARACTER. The recommended value is 28. If
"^DD",870,870,200.07,21,3,0)
this field is left blank, the default value will be 28 for the 'FS'
"^DD",870,870,200.07,21,4,0)
character.
"^DD",870,870,200.07,"DT")
2990709
"^DD",870,870,200.08,0)
PROTOCOL ID VERSION^S^21:2.1;22:2.2;23:2.3;^200;8^Q
"^DD",870,870,200.08,3)
Enter the version of HLLP as specified by the lates HL7 Implementation Guide
"^DD",870,870,200.08,21,0)
^^3^3^2990709^
"^DD",870,870,200.08,21,1,0)
The latest specification for the HLLP communications protocol is
"^DD",870,870,200.08,21,2,0)
identified by a version number, which may be different from the HL7
"^DD",870,870,200.08,21,3,0)
standard itself.
"^DD",870,870,200.08,"DT")
2990805
"^DD",870,870,200.09,0)
UNI-DIRECTIONAL WAIT^NJ2,0^^200;9^K:+X'=X!(X>10)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870,200.09,3)
Type a Number between 0 and 10, 0 Decimal Digits
"^DD",870,870,200.09,21,0)
^^3^3^2990709^
"^DD",870,870,200.09,21,1,0)
The number of seconds the Lower Layer Protocol waits after sending a
"^DD",870,870,200.09,21,2,0)
messages.  This is only used if the message doesn't want an
"^DD",870,870,200.09,21,3,0)
acknowledgment.  
"^DD",870,870,200.09,"DT")
2990709
"^DD",870,870,300.01,0)
X3.28 DEVICE^P3.5^%ZIS(1,^300;1^Q
"^DD",870,870,300.01,3)
Enter the device from the Device File.
"^DD",870,870,300.01,21,0)
^^4^4^2990709^
"^DD",870,870,300.01,21,1,0)
X3.28 is a serial protocol like HLLP. It requires the remote system be
"^DD",870,870,300.01,21,2,0)
configured as a device (bi-directional) in the Device and terminal type
"^DD",870,870,300.01,21,3,0)
files. The Vista system will normally open and maintain the connection.
"^DD",870,870,300.01,21,4,0)
See the HL7 Implementation Guide for details of this protocol.
"^DD",870,870,300.01,"DT")
2990709
"^DD",870,870,300.02,0)
MAXIMUM MESSAGE SIZE^NJ7,0^^300;2^K:+X'=X!(X>9999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,300.02,3)
Type a Number between 1 and 9999999, 0 Decimal Digits
"^DD",870,870,300.02,21,0)
^^1^1^2990709^
"^DD",870,870,300.02,21,1,0)
See the HL7 Implementation Guide for details of the x3.28 protcol.
"^DD",870,870,300.02,"DT")
2990709
"^DD",870,870,300.03,0)
MAXIMUM BLOCK SIZE^NJ3,0^^300;3^K:+X'=X!(X>245)!(X<9)!(X?.E1"."1N.N) X
"^DD",870,870,300.03,3)
Type a Number between 9 and 245, 0 Decimal Digits
"^DD",870,870,300.03,21,0)
^.001^1^1^3010312^^
"^DD",870,870,300.03,21,1,0)
See the HL7 Implementation Guide for details of the x3.28 protcol.
"^DD",870,870,300.03,"DT")
2990709
"^DD",870,870,300.04,0)
TIMER A^NJ2,0^^300;4^K:+X'=X!(X>60)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,300.04,3)
Type a Number between 1 and 60, 0 Decimal Digits
"^DD",870,870,300.04,21,0)
^^2^2^2990709^
"^DD",870,870,300.04,21,1,0)
Enter the time in seconds for the Response Timer. The default is 6 seconds
"^DD",870,870,300.04,21,2,0)
if no time is entered.
"^DD",870,870,300.04,"DT")
2990709
"^DD",870,870,300.05,0)
TIMER B^NJ2,0^^300;5^K:+X'=X!(X>60)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,300.05,3)
Type a Number between 1 and 60, 0 Decimal Digits
"^DD",870,870,300.05,21,0)
^^2^2^2990709^
"^DD",870,870,300.05,21,1,0)
Enter the time in seconds for the Receive Timer. The default is 3 seconds
"^DD",870,870,300.05,21,2,0)
if no time is entered.
"^DD",870,870,300.05,"DT")
2990709
"^DD",870,870,300.06,0)
TIMER D^NJ2,0^^300;6^K:+X'=X!(X>60)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,300.06,3)
Type a Number between 1 and 60, 0 Decimal Digits
"^DD",870,870,300.06,21,0)
^^2^2^2990709^
"^DD",870,870,300.06,21,1,0)
Enter the time for the Inter-Block timer. The default is 30 seconds if no
"^DD",870,870,300.06,21,2,0)
time is specified.
"^DD",870,870,300.06,"DT")
2990709
"^DD",870,870,300.07,0)
TIMER E^NJ3,0^^300;7^K:+X'=X!(X>600)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,300.07,3)
Type a Number between 1 and 600, 0 Decimal Digits
"^DD",870,870,300.07,21,0)
^^2^2^2990709^
"^DD",870,870,300.07,21,1,0)
Enter the time for the Line Check Timer. The default is 180 seconds is no
"^DD",870,870,300.07,21,2,0)
time is specified.
"^DD",870,870,300.07,"DT")
2990709
"^DD",870,870,400.01,0)
TCP/IP ADDRESS^F^^400;1^K:$L(X)>40!($L(X)<7) X
"^DD",870,870,400.01,3)
Answer must be 7-40 characters in length.
"^DD",870,870,400.01,21,0)
^^1^1^2990709^
"^DD",870,870,400.01,21,1,0)
Enter the numeric address of the remote site using the syntax, nn.nn.nn.nn
"^DD",870,870,400.01,"DT")
2990709
"^DD",870,870,400.02,0)
TCP/IP PORT^NJ5,0^^400;2^K:+X'=X!(X>65535)!(X<1)!(X?.E1"."1N.N) X
"^DD",870,870,400.02,3)
Type a Number between 1 and 65535, 0 Decimal Digits
"^DD",870,870,400.02,21,0)
^^3^3^2990709^
"^DD",870,870,400.02,21,1,0)
This is the port over which the HL7 service will create a socket for
"^DD",870,870,400.02,21,2,0)
message exchange. In VA, this port will be 5000 between production
"^DD",870,870,400.02,21,3,0)
systems.
"^DD",870,870,400.02,"DT")
2990709
"^DD",870,870,400.03,0)
TCP/IP SERVICE TYPE^S^C:CLIENT (SENDER);S:SINGLE LISTENER;M:MULTI LISTENER;^400;3^Q
"^DD",870,870,400.03,1,0)
^.1
"^DD",870,870,400.03,1,1,0)
870^E
"^DD",870,870,400.03,1,1,1)
S ^HLCS(870,"E",$E(X,1,30),DA)=""
"^DD",870,870,400.03,1,1,2)
K ^HLCS(870,"E",$E(X,1,30),DA)
"^DD",870,870,400.03,1,1,"DT")
3030710
"^DD",870,870,400.03,3)
Does this link send a connection request or receive connection requests?
"^DD",870,870,400.03,21,0)
^^12^12^2990709^
"^DD",870,870,400.03,21,1,0)
This field determines if the Logical Link is the client (sender) or a
"^DD",870,870,400.03,21,2,0)
listener (server) of a message.  Choose from:
"^DD",870,870,400.03,21,3,0)
 
"^DD",870,870,400.03,21,4,0)
                                
"^DD",870,870,400.03,21,5,0)
 CLIENT (SENDER): Indicates that this Logical Link connects to a target
"^DD",870,870,400.03,21,6,0)
system, with the current system acting as the sender.
"^DD",870,870,400.03,21,7,0)
 
"^DD",870,870,400.03,21,8,0)
 SINGLE LISTENER: Designates that the current system is a server
"^DD",870,870,400.03,21,9,0)
(listener), using a single M process to do the listening.
"^DD",870,870,400.03,21,10,0)
                                 
"^DD",870,870,400.03,21,11,0)
 MULTI LISTENER: Designates that the current system is a server
"^DD",870,870,400.03,21,12,0)
(listener), creating multiple background processes.
"^DD",870,870,400.03,"DT")
3030710
"^DD",870,870,400.04,0)
PERSISTENT^S^Y:YES;N:NO;^400;4^Q
"^DD",870,870,400.04,21,0)
^^5^5^2990709^
"^DD",870,870,400.04,21,1,0)
Enter 'YES' if this connection needs to remain open even if there are no
"^DD",870,870,400.04,21,2,0)
messages to send. The connection will remain open until it is disconnected
"^DD",870,870,400.04,21,3,0)
by either side via shutting-down the logical link.  A setting of 'YES' is
"^DD",870,870,400.04,21,4,0)
appropriate for connecting to a COTS device with a high volume of
"^DD",870,870,400.04,21,5,0)
messages.  
"^DD",870,870,400.04,"DT")
2990709
"^DD",870,870,400.05,0)
RETENTION^NJ6,0^^400;5^K:+X'=X!(X>999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870,400.05,3)
Type a Number between 0 and 999999, 0 Decimal Digits
"^DD",870,870,400.05,21,0)
^^6^6^2990709^
"^DD",870,870,400.05,21,1,0)
Retention is the maximum time in seconds in which a non-persistent LLP
"^DD",870,870,400.05,21,2,0)
will wait after the associated queue has been emptied.  If further
"^DD",870,870,400.05,21,3,0)
messages arrive in the queue before the retention time has expired, the
"^DD",870,870,400.05,21,4,0)
LLP will continue to dequeue and send messages. Otherwise, the LLP will
"^DD",870,870,400.05,21,5,0)
become inactive and will remain inactive until further messages are
"^DD",870,870,400.05,21,6,0)
queued.  
"^DD",870,870,400.05,"DT")
2990709
"^DD",870,870,400.06,0)
STARTUP NODE^P14.7'^%ZIS(14.7,^400;6^Q
"^DD",870,870,400.06,3)
Enter the Taskman node to start this LLP on.
"^DD",870,870,400.06,21,0)
^^5^5^2990709^
"^DD",870,870,400.06,21,1,0)
This field is ONLY for VMS sites running Dual Taskman in DCL. This field
"^DD",870,870,400.06,21,2,0)
is used to specify what Taskman node you want to job the Lower Level
"^DD",870,870,400.06,21,3,0)
Protocol. It should only be used if you have two Taskmans running and only
"^DD",870,870,400.06,21,4,0)
want the LLP to run on a particular node.  It will only work if you are
"^DD",870,870,400.06,21,5,0)
running the dual Taskmans in DCL context on a VMS system.
"^DD",870,870,400.06,"DT")
2990709
"^DD",870,870,400.07,0)
SAY HELO^S^Y:YES;N:NO;^400;7^Q
"^DD",870,870,400.07,3)
Send initial HELO for Cache/NT TCP links?
"^DD",870,870,400.07,21,0)
^.001^6^6^3001103^^^^
"^DD",870,870,400.07,21,1,0)
This field is applicable only to Cache/NT sites with TCP links.
"^DD",870,870,400.07,21,2,0)
If you are not a Cache/NT site, or this is not a TCP link, this field
"^DD",870,870,400.07,21,3,0)
does not apply, AND will be ignored.
"^DD",870,870,400.07,21,4,0)

"^DD",870,870,400.07,21,5,0)
If this TCP link is for a VA site, answer YES.
"^DD",870,870,400.07,21,6,0)
If this TCP link is for a COTS system, answer NO.  This is the default.
"^DD",870,870,400.07,23,0)
^.001^4^4^3001103^^^
"^DD",870,870,400.07,23,1,0)
When sending HL7 transactions to other VA sites over TCP links, Cache/NT
"^DD",870,870,400.07,23,2,0)
sites must send an initial HELO to overcome buffering issues.  However,
"^DD",870,870,400.07,23,3,0)
the initial HELO is not part of the HL7 standard, and may cause a reject
"^DD",870,870,400.07,23,4,0)
error when sent to a COTS system.
"^DD",870,870,400.07,"DT")
3001102
"^DD",870,870.01,0)
OUT QUEUE SUB-FIELD^^5^6
"^DD",870,870.01,0,"DT")
2950504
"^DD",870,870.01,0,"IX","B",870.01,.01)

"^DD",870,870.01,0,"NM","OUT QUEUE")

"^DD",870,870.01,0,"UP")
870
"^DD",870,870.01,.01,0)
MESSAGE NUMBER^NJ15,0^^0;1^K:+X'=X!(X>999999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870.01,.01,1,0)
^.1^^-1
"^DD",870,870.01,.01,1,1,0)
870.01^B
"^DD",870,870.01,.01,1,1,1)
S ^HLCS(870,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",870,870.01,.01,1,1,2)
K ^HLCS(870,DA(1),2,"B",$E(X,1,30),DA)
"^DD",870,870.01,.01,3)
Not editable from any user option. See Field Description.
"^DD",870,870.01,.01,21,0)
^^2^2^2941213^
"^DD",870,870.01,.01,21,1,0)
This is the number assigned to the message when it is enque'd into
"^DD",870,870.01,.01,21,2,0)
the FIFO queue.
"^DD",870,870.01,.01,"DT")
2941102
"^DD",870,870.01,1,0)
STATUS^S^P:PENDING;D:DONE PROCESSING;S:STUB RECORD;^0;2^Q
"^DD",870,870.01,1,1,0)
^.1^^0
"^DD",870,870.01,1,3)
This is the status of an individual message in the queue. These statuses control the flow and processing of the message.
"^DD",870,870.01,1,21,0)
^^6^6^2941213^^
"^DD",870,870.01,1,21,1,0)
Status of a particular message. Can be Stub, Pending, or Done. These
"^DD",870,870.01,1,21,2,0)
statuses control the processing of a message. For example, a stub
"^DD",870,870.01,1,21,3,0)
record is created when a message is enque'd, it cannot be processed
"^DD",870,870.01,1,21,4,0)
until it's status is changed from a 'stub' to 'pending', this is
"^DD",870,870.01,1,21,5,0)
the last thing HLCS1 does when dequeueing a message from file #772
"^DD",870,870.01,1,21,6,0)
and enqueueing it into file #870.
"^DD",870,870.01,1,"DT")
3000508
"^DD",870,870.01,2,0)
ERROR^S^A:LLP ACKNOWLEDGED NO ERROR;C:LLP CHAR COUNT WRONG;X:LLP XOR WRONG;B:DATA TOO LONG;G:OTHER LLP ERROR;^0;3^Q
"^DD",870,870.01,2,3)
This field is not editable from any user option. See field description.
"^DD",870,870.01,2,21,0)
^^3^3^2941213^
"^DD",870,870.01,2,21,1,0)
If this field contains a "C","X","B", or a "G" it means an error has
"^DD",870,870.01,2,21,2,0)
occured while attempting to send a message to another application.
"^DD",870,870.01,2,21,3,0)
This field is not editable from any user option.
"^DD",870,870.01,2,"DT")
2941117
"^DD",870,870.01,3,0)
MESSAGE TEXT^870.13^^1;0
"^DD",870,870.01,3,21,0)
^^1^1^2941213^
"^DD",870,870.01,3,21,1,0)
This field contains the text of the message.
"^DD",870,870.01,4,0)
dhcp-longtitudinal checksum^F^^0;4^K:$L(X)>5!($L(X)<1) X
"^DD",870,870.01,4,3)
Answer must be 1-5 characters in length.
"^DD",870,870.01,4,"DT")
2950113
"^DD",870,870.01,5,0)
dhcp-xor checksum^F^^0;5^K:$L(X)>3!($L(X)<1) X
"^DD",870,870.01,5,3)
Answer must be 1-3 characters in length.
"^DD",870,870.01,5,"DT")
2950113
"^DD",870,870.019,0)
IN QUEUE SUB-FIELD^^8^9
"^DD",870,870.019,0,"DT")
2950504
"^DD",870,870.019,0,"IX","B",870.019,.01)

"^DD",870,870.019,0,"NM","IN QUEUE")

"^DD",870,870.019,0,"UP")
870
"^DD",870,870.019,.01,0)
MESSAGE NUMBER^NJ15,0^^0;1^K:+X'=X!(X>999999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",870,870.019,.01,1,0)
^.1^^-1
"^DD",870,870.019,.01,1,1,0)
870.019^B
"^DD",870,870.019,.01,1,1,1)
S ^HLCS(870,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",870,870.019,.01,1,1,2)
K ^HLCS(870,DA(1),1,"B",$E(X,1,30),DA)
"^DD",870,870.019,.01,3)
Not editable from any user option. See field description.
"^DD",870,870.019,.01,21,0)
^^2^2^2941213^^^
"^DD",870,870.019,.01,21,1,0)
This is the number assigned to the message when it is enqued into the
"^DD",870,870.019,.01,21,2,0)
FIFO queue.
"^DD",870,870.019,.01,"DT")
2941102
"^DD",870,870.019,1,0)
STATUS^S^P:PENDING;D:DONE PROCESSING;S:STUB RECORD;^0;2^Q
"^DD",870,870.019,1,1,0)
^.1
"^DD",870,870.019,1,1,1,0)
870^AISTAT
"^DD",870,870.019,1,1,1,1)
S ^HLCS(870,"AISTAT",$E(X,1,30),DA(1),DA)=""
"^DD",870,870.019,1,1,1,2)
K ^HLCS(870,"AISTAT",$E(X,1,30),DA(1),DA)
"^DD",870,870.019,1,1,1,"%D",0)
^.101^2^2^3001115^^^
"^DD",870,870.019,1,1,1,"%D",1,0)
Used to quickly identify links with messages in any status,
"^DD",870,870.019,1,1,1,"%D",2,0)
thus improving performance.
"^DD",870,870.019,1,1,1,"DT")
3000508
"^DD",870,870.019,1,3)
This is the status of an individual message in the queue. These statuses control the flow and processing of the message.
"^DD",870,870.019,1,21,0)
^.001^7^7^3001115^^^^
"^DD",870,870.019,1,21,1,0)
Status of a particular message. Can be Stub, Pending, or Done.
"^DD",870,870.019,1,21,2,0)
These statuses control the processing of a message. For example, a
"^DD",870,870.019,1,21,3,0)
stub record is created when a message is enqueued, and cannot be
"^DD",870,870.019,1,21,4,0)
processed until its status is changed from 'stub' to 'pending'.
"^DD",870,870.019,1,21,5,0)
Changing this status is the last thing the Low Layer Protocol does
"^DD",870,870.019,1,21,6,0)
after reading in a message.  Finally, once the message has been
"^DD",870,870.019,1,21,7,0)
processed, its status is changed to 'done'.
"^DD",870,870.019,1,"DT")
3000508
"^DD",870,870.019,2,0)
ERROR^S^A:LLP ACKNOWLEDGED NO ERROR;C:LLP CHAR COUNT WRONG;X:LLP XOR WRONG;B:DATA TOO LONG;G:OTHER LLP ERROR;^0;3^Q
"^DD",870,870.019,2,3)
This field is not editable from any user option. See Field Description.
"^DD",870,870.019,2,21,0)
^^3^3^2941213^^
"^DD",870,870.019,2,21,1,0)
If this field contains a "C","X","B", or a "G" it means an error has
"^DD",870,870.019,2,21,2,0)
ocurred while reading in a message. This field is not editable from
"^DD",870,870.019,2,21,3,0)
any user option.
"^DD",870,870.019,2,"DT")
2941027
"^DD",870,870.019,3,0)
MESSAGE TEXT^870.193^^1;0
"^DD",870,870.019,3,21,0)
^^1^1^2941213^^
"^DD",870,870.019,3,21,1,0)
This field contains the text of the message.
"^DD",870,870.019,4,0)
tvv^F^^0;4^K:$L(X)>3!($L(X)<3) X
"^DD",870,870.019,4,3)
Answer must be 3 characters in length.
"^DD",870,870.019,4,"DT")
2950112
"^DD",870,870.019,5,0)
ccccc^F^^0;5^K:$L(X)>5!($L(X)<1) X
"^DD",870,870.019,5,3)
Answer must be 1-5 characters in length.
"^DD",870,870.019,5,"DT")
2950113
"^DD",870,870.019,6,0)
xxx^F^^0;6^K:$L(X)>3!($L(X)<1) X
"^DD",870,870.019,6,3)
Answer must be 1-3 characters in length.
"^DD",870,870.019,6,"DT")
2950113
"^DD",870,870.019,7,0)
dhcp-longtitudinal checksum^F^^0;7^K:$L(X)>5!($L(X)<1) X
"^DD",870,870.019,7,3)
Answer must be 1-5 characters in length.
"^DD",870,870.019,7,"DT")
2950113
"^DD",870,870.019,8,0)
dhcp-xor checksum^F^^0;8^K:$L(X)>3!($L(X)<1) X
"^DD",870,870.019,8,3)
Answer must be 1-3 characters in length.
"^DD",870,870.019,8,"DT")
2950113
"^DD",870,870.13,0)
MESSAGE TEXT SUB-FIELD^^.01^1
"^DD",870,870.13,0,"DT")
2941006
"^DD",870,870.13,0,"NM","MESSAGE TEXT")

"^DD",870,870.13,0,"UP")
870.01
"^DD",870,870.13,.01,0)
MESSAGE TEXT^WL^^0;1^Q
"^DD",870,870.13,.01,"DT")
2941006
"^DD",870,870.193,0)
MESSAGE TEXT SUB-FIELD^^.01^1
"^DD",870,870.193,0,"DT")
2941006
"^DD",870,870.193,0,"NM","MESSAGE TEXT")

"^DD",870,870.193,0,"UP")
870.019
"^DD",870,870.193,.01,0)
MESSAGE TEXT^WL^^0;1^Q
"^DD",870,870.193,.01,3)
This field contains the actual text of the message.
"^DD",870,870.193,.01,"DT")
2941006
"^DIC",870,870,0)
HL LOGICAL LINK^870
"^DIC",870,870,0,"GL")
^HLCS(870,
"^DIC",870,870,"%",0)
^1.005^^0
"^DIC",870,870,"%D",0)
^^21^21^2990607^^^^
"^DIC",870,870,"%D",1,0)
This file serves two purposes. It is a fileman-compatible transmission
"^DIC",870,870,"%D",2,0)
log. The Low Layer Protocols write and read directly from this file.
"^DIC",870,870,"%D",3,0)
(See routines HLCSDR1 and HLCSDR2)
"^DIC",870,870,"%D",4,0)
 
"^DIC",870,870,"%D",5,0)
This file stores parameters that govern the behaviour of the Low Layer
"^DIC",870,870,"%D",6,0)
Protocols. Fields like: READ TIMEOUT, ACK TIMEOUT, LLP START BLOCK, and
"^DIC",870,870,"%D",7,0)
LLP END BLOCK, are fields that govern how long the finite state machine
"^DIC",870,870,"%D",8,0)
waits for data to come down the line (READ TIMEOUT), how long it waits
"^DIC",870,870,"%D",9,0)
for a lower level acknowledgement (ACK TIMEOUT), and which control
"^DIC",870,870,"%D",10,0)
characters define the beginning and end of a message (LLP START BLOCK
"^DIC",870,870,"%D",11,0)
and LLP END BLOCK).
"^DIC",870,870,"%D",12,0)
 
"^DIC",870,870,"%D",13,0)
This file also stores information that drives the SYSTEMS LINK MONITOR
"^DIC",870,870,"%D",14,0)
display option. Fields like, IN QUEUE FRONT POINTER, IN QUEUE BACK 
"^DIC",870,870,"%D",15,0)
POINTER are used to manage the data flow in the queues but they are
"^DIC",870,870,"%D",16,0)
also displayed on the SYSTEMS LINK MONITOR under the alias's MESSAGES
"^DIC",870,870,"%D",17,0)
PROCESSED and MESSAGES RECEIVED. Fields like STATE and DEVICE TYPE
"^DIC",870,870,"%D",18,0)
are also used to drive the SYSTEMS LINK MONITOR. These fields are
"^DIC",870,870,"%D",19,0)
updated by the lower layer protocols in order to give real-time feedback
"^DIC",870,870,"%D",20,0)
as to what is ocurring on a link. For example, when a message is 
"^DIC",870,870,"%D",21,0)
received (see HLCSDR1) the state transitions from "IDLE" to "READING".
"^DIC",870,"B","HL LOGICAL LINK",870)

**END**
**END**

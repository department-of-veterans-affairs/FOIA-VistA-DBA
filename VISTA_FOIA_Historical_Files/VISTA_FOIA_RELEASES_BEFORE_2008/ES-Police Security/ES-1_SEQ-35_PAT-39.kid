Released ES*1*39 SEQ #35
Extracted from mail message
**KIDS**:ES*1.0*39^

**INSTALL NAME**
ES*1.0*39
"BLD",5336,0)
ES*1.0*39^POLICE & SECURITY^0^3040223^y
"BLD",5336,1,0)
^^6^6^3040116^
"BLD",5336,1,1,0)
When going back and printing old journal entries and offense reports the 
"BLD",5336,1,2,0)
officers badges/rank are not correct for the timeframe.  Any officer that 
"BLD",5336,1,3,0)
has had a badge/rank change is causing the old reports to reflect their 
"BLD",5336,1,4,0)
current badge/rank and not the badge/rank at time of journal/offense data 
"BLD",5336,1,5,0)
entry.  This has raised concerns about legal issues for court/fraud 
"BLD",5336,1,6,0)
purposes.
"BLD",5336,4,0)
^9.64PA^916^2
"BLD",5336,4,912,0)
912
"BLD",5336,4,912,2,0)
^9.641^912^1
"BLD",5336,4,912,2,912,0)
ESP OFFENSE REPORT  (File-top level)
"BLD",5336,4,912,2,912,1,0)
^9.6411^.06^3
"BLD",5336,4,912,2,912,1,.06,0)
INVESTIGATING OFFICER
"BLD",5336,4,912,2,912,1,.11,0)
BADGE NUMBER
"BLD",5336,4,912,2,912,1,.12,0)
RANK
"BLD",5336,4,912,222)
y^y^p^^^^n^^n
"BLD",5336,4,912,224)

"BLD",5336,4,916,0)
916
"BLD",5336,4,916,2,0)
^9.641^916.31^2
"BLD",5336,4,916,2,916.03,0)
WATCH  (sub-file)
"BLD",5336,4,916,2,916.03,1,0)
^9.6411^.01^1
"BLD",5336,4,916,2,916.03,1,.01,0)
WATCH
"BLD",5336,4,916,2,916.31,0)
OFFICER  (sub-file)
"BLD",5336,4,916,2,916.31,1,0)
^9.6411^.03^3
"BLD",5336,4,916,2,916.31,1,.01,0)
OFFICER
"BLD",5336,4,916,2,916.31,1,.02,0)
BADGE NUMBER
"BLD",5336,4,916,2,916.31,1,.03,0)
RANK
"BLD",5336,4,916,222)
y^y^p^^^^n^^n
"BLD",5336,4,916,224)

"BLD",5336,4,"APDD",912,912)

"BLD",5336,4,"APDD",912,912,.06)

"BLD",5336,4,"APDD",912,912,.11)

"BLD",5336,4,"APDD",912,912,.12)

"BLD",5336,4,"APDD",916,916.03)

"BLD",5336,4,"APDD",916,916.03,.01)

"BLD",5336,4,"APDD",916,916.31)

"BLD",5336,4,"APDD",916,916.31,.01)

"BLD",5336,4,"APDD",916,916.31,.02)

"BLD",5336,4,"APDD",916,916.31,.03)

"BLD",5336,4,"B",912,912)

"BLD",5336,4,"B",916,916)

"BLD",5336,"ABPKG")
n
"BLD",5336,"KRN",0)
^9.67PA^8989.52^19
"BLD",5336,"KRN",.4,0)
.4
"BLD",5336,"KRN",.401,0)
.401
"BLD",5336,"KRN",.402,0)
.402
"BLD",5336,"KRN",.403,0)
.403
"BLD",5336,"KRN",.5,0)
.5
"BLD",5336,"KRN",.84,0)
.84
"BLD",5336,"KRN",3.6,0)
3.6
"BLD",5336,"KRN",3.8,0)
3.8
"BLD",5336,"KRN",9.2,0)
9.2
"BLD",5336,"KRN",9.8,0)
9.8
"BLD",5336,"KRN",9.8,"NM",0)
^9.68A^7^7
"BLD",5336,"KRN",9.8,"NM",1,0)
ESPCRJO^^0^B2029101
"BLD",5336,"KRN",9.8,"NM",2,0)
ESPJOU^^0^B18543670
"BLD",5336,"KRN",9.8,"NM",3,0)
ESPOFF^^0^B17353339
"BLD",5336,"KRN",9.8,"NM",4,0)
ESPORP^^0^B12581265
"BLD",5336,"KRN",9.8,"NM",5,0)
ESPORP5^^0^B11896605
"BLD",5336,"KRN",9.8,"NM",6,0)
ESPOFF2^^0^B15397718
"BLD",5336,"KRN",9.8,"NM",7,0)
ESPOFF1^^0^B17540634
"BLD",5336,"KRN",9.8,"NM","B","ESPCRJO",1)

"BLD",5336,"KRN",9.8,"NM","B","ESPJOU",2)

"BLD",5336,"KRN",9.8,"NM","B","ESPOFF",3)

"BLD",5336,"KRN",9.8,"NM","B","ESPOFF1",7)

"BLD",5336,"KRN",9.8,"NM","B","ESPOFF2",6)

"BLD",5336,"KRN",9.8,"NM","B","ESPORP",4)

"BLD",5336,"KRN",9.8,"NM","B","ESPORP5",5)

"BLD",5336,"KRN",19,0)
19
"BLD",5336,"KRN",19,"NM",0)
^9.68A^^
"BLD",5336,"KRN",19.1,0)
19.1
"BLD",5336,"KRN",101,0)
101
"BLD",5336,"KRN",409.61,0)
409.61
"BLD",5336,"KRN",771,0)
771
"BLD",5336,"KRN",870,0)
870
"BLD",5336,"KRN",8989.51,0)
8989.51
"BLD",5336,"KRN",8989.52,0)
8989.52
"BLD",5336,"KRN",8994,0)
8994
"BLD",5336,"KRN","B",.4,.4)

"BLD",5336,"KRN","B",.401,.401)

"BLD",5336,"KRN","B",.402,.402)

"BLD",5336,"KRN","B",.403,.403)

"BLD",5336,"KRN","B",.5,.5)

"BLD",5336,"KRN","B",.84,.84)

"BLD",5336,"KRN","B",3.6,3.6)

"BLD",5336,"KRN","B",3.8,3.8)

"BLD",5336,"KRN","B",9.2,9.2)

"BLD",5336,"KRN","B",9.8,9.8)

"BLD",5336,"KRN","B",19,19)

"BLD",5336,"KRN","B",19.1,19.1)

"BLD",5336,"KRN","B",101,101)

"BLD",5336,"KRN","B",409.61,409.61)

"BLD",5336,"KRN","B",771,771)

"BLD",5336,"KRN","B",870,870)

"BLD",5336,"KRN","B",8989.51,8989.51)

"BLD",5336,"KRN","B",8989.52,8989.52)

"BLD",5336,"KRN","B",8994,8994)

"BLD",5336,"QUES",0)
^9.62^^
"BLD",5336,"REQB",0)
^9.611^4^4
"BLD",5336,"REQB",1,0)
ES*1.0*25^2
"BLD",5336,"REQB",2,0)
ES*1.0*27^2
"BLD",5336,"REQB",3,0)
ES*1.0*36^2
"BLD",5336,"REQB",4,0)
ES*1.0*37^2
"BLD",5336,"REQB","B","ES*1.0*25",1)

"BLD",5336,"REQB","B","ES*1.0*27",2)

"BLD",5336,"REQB","B","ES*1.0*36",3)

"BLD",5336,"REQB","B","ES*1.0*37",4)

"FIA",912)
ESP OFFENSE REPORT
"FIA",912,0)
^ESP(912,
"FIA",912,0,0)
912I
"FIA",912,0,1)
y^y^p^^^^n^^n
"FIA",912,0,10)

"FIA",912,0,11)

"FIA",912,0,"RLRO")

"FIA",912,0,"VR")
1.0^ES
"FIA",912,912)
1
"FIA",912,912,.06)

"FIA",912,912,.11)

"FIA",912,912,.12)

"FIA",916)
ESP DAILY JOURNAL
"FIA",916,0)
^ESP(916,
"FIA",916,0,0)
916ID
"FIA",916,0,1)
y^y^p^^^^n^^n
"FIA",916,0,10)

"FIA",916,0,11)

"FIA",916,0,"RLRO")

"FIA",916,0,"VR")
1.0^ES
"FIA",916,916)
1
"FIA",916,916,3)

"FIA",916,916.03)
1
"FIA",916,916.03,.01)

"FIA",916,916.03,1)

"FIA",916,916.31)
1
"FIA",916,916.31,.01)

"FIA",916,916.31,.02)

"FIA",916,916.31,.03)

"MBREQ")
0
"PKG",368,-1)
1^1
"PKG",368,0)
POLICE & SECURITY^ES^POLICE & SECURITY PACKAGE
"PKG",368,20,0)
^9.402P^^
"PKG",368,22,0)
^9.49I^1^1
"PKG",368,22,1,0)
1.0^2930300^2960130
"PKG",368,22,1,"PAH",1,0)
39^3040223
"PKG",368,22,1,"PAH",1,1,0)
^^6^6^3040223
"PKG",368,22,1,"PAH",1,1,1,0)
When going back and printing old journal entries and offense reports the 
"PKG",368,22,1,"PAH",1,1,2,0)
officers badges/rank are not correct for the timeframe.  Any officer that 
"PKG",368,22,1,"PAH",1,1,3,0)
has had a badge/rank change is causing the old reports to reflect their 
"PKG",368,22,1,"PAH",1,1,4,0)
current badge/rank and not the badge/rank at time of journal/offense data 
"PKG",368,22,1,"PAH",1,1,5,0)
entry.  This has raised concerns about legal issues for court/fraud 
"PKG",368,22,1,"PAH",1,1,6,0)
purposes.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","ESPCRJO")
0^1^B2029101
"RTN","ESPCRJO",1,0)
ESPCRJO ;DALISC/SED - CREATE DAILY OPERATIONS JOURNAL ;3/99
"RTN","ESPCRJO",2,0)
 ;;1.0;POLICE & SECURITY;**27,37,39**;Mar 31, 1994
"RTN","ESPCRJO",3,0)
EN ;
"RTN","ESPCRJO",4,0)
 D DT^DICRW
"RTN","ESPCRJO",5,0)
FAC K DIC
"RTN","ESPCRJO",6,0)
 S DIC("A")="Select Facility: ",DIC(0)="QAEMZ",DIC="^DG(40.8,"
"RTN","ESPCRJO",7,0)
 D ^DIC
"RTN","ESPCRJO",8,0)
 G:$D(DTOUT)!($D(DUOUT))!(+Y'>0) EXIT
"RTN","ESPCRJO",9,0)
 K DIC
"RTN","ESPCRJO",10,0)
 S:+Y>0 DIC("S")="I $P(^(0),U,2)="_+Y
"RTN","ESPCRJO",11,0)
 S ESPFAC=+Y
"RTN","ESPCRJO",12,0)
JOU S DIC(0)="QAEMZL",DIC="^ESP(916,",DLAYGO=916
"RTN","ESPCRJO",13,0)
 D ^DIC
"RTN","ESPCRJO",14,0)
 G:$D(DTOUT)!($D(DUOUT))!(X="") FAC
"RTN","ESPCRJO",15,0)
 I X?4N S X="" W !!,$C(7),"*********Must key a full date, (Month, Day, Year) ***********",! G JOU
"RTN","ESPCRJO",16,0)
 I Y<0 W !,$C(7),"DATE not found.  Please try again." G JOU
"RTN","ESPCRJO",17,0)
 K DIC
"RTN","ESPCRJO",18,0)
 S DA=+Y
"RTN","ESPCRJO",19,0)
 S DR="[ESP CREATE JOURNAL]",DIE="^ESP(916,"
"RTN","ESPCRJO",20,0)
 D ^DIE
"RTN","ESPCRJO",21,0)
EXIT K DIC,DIE,X,Y,DA
"RTN","ESPCRJO",22,0)
 Q
"RTN","ESPCRJO",23,0)
SET(NEWKEY,TYPE) ;PULL BADGE/RANK FOR SHIFT OFFICERS
"RTN","ESPCRJO",24,0)
 S HESPN=DA,DIC="^VA(200,",DA=NEWKEY,DR="910.1;910.2",DIQ(0)="E",DIQ="POLINF" D EN^DIQ1
"RTN","ESPCRJO",25,0)
 S:TYPE=1 SX=POLINF(200,DA,910.1,"E") S:TYPE=2 SX=POLINF(200,DA,910.2,"E")
"RTN","ESPCRJO",26,0)
 S DA=HESPN
"RTN","ESPCRJO",27,0)
 K DIC,DIQ,POLINF,HESPN
"RTN","ESPCRJO",28,0)
 Q SX
"RTN","ESPJOU")
0^2^B18543670
"RTN","ESPJOU",1,0)
ESPJOU ;DALISC/RWW - ENHANCED PRINT DAILY OPERATIONS JOURNAL;3/99
"RTN","ESPJOU",2,0)
 ;;1.0;POLICE & SECURITY;**1,7,12,14,17,26,27,39**;Mar 31, 1994
"RTN","ESPJOU",3,0)
EN ;
"RTN","ESPJOU",4,0)
 D DT^DICRW
"RTN","ESPJOU",5,0)
JOU S DIC(0)="QAEMZ",DIC("A")="DATE: ",DIC="^ESP(916,"
"RTN","ESPJOU",6,0)
 D ^DIC
"RTN","ESPJOU",7,0)
 G:$D(DTOUT)!($D(DUOUT))!(X="") EXIT
"RTN","ESPJOU",8,0)
 I Y<0 W !,$C(7),"DATE not found.  Please try again." G JOU
"RTN","ESPJOU",9,0)
 S ESPID=+Y
"RTN","ESPJOU",10,0)
Q S %ZIS="Q" D ^%ZIS G:POP EXIT I '$D(IO("Q")) U IO D START G EXIT
"RTN","ESPJOU",11,0)
 S ZTRTN="START^ESPJOU",ZTSAVE("ESP*")="",ZTDESC="DAILY JOURNAL" D ^%ZTLOAD,HOME^%ZIS G EXIT
"RTN","ESPJOU",12,0)
START ;BEGINS THE PRINT OF THE DAILY JOURNAL
"RTN","ESPJOU",13,0)
 K ^UTILITY("DIQ1",$J)
"RTN","ESPJOU",14,0)
 S (END,PAGE)=0 D HDR G:END EXIT
"RTN","ESPJOU",15,0)
 S DIC="^ESP(916,",DA=ESPID,DR="1;2;3;4;5",DIQ(0)="E" D EN^DIQ1 I '$D(^UTILITY("DIQ1",$J,916,DA)) W !,"RECORD DOESN'T EXIST!" G EXIT
"RTN","ESPJOU",16,0)
SEC1 W !,?28,"SECTION I - PERIOD COVERED"
"RTN","ESPJOU",17,0)
 W !,?28 F I=1:1:26 W "="
"RTN","ESPJOU",18,0)
 S ESPF=$G(^UTILITY("DIQ1",$J,916,DA,1,"E")),ESPT=$G(^UTILITY("DIQ1",$J,916,DA,2,"E"))
"RTN","ESPJOU",19,0)
DFM W !!,?19,"FROM: ",ESPF
"RTN","ESPJOU",20,0)
DTO W ?43,"TO: ",ESPT
"RTN","ESPJOU",21,0)
SEC2 I $Y+5>IOSL D HDR1 G:END EXIT
"RTN","ESPJOU",22,0)
 W !!,?29,"SECTION II - ASSIGNMENTS"
"RTN","ESPJOU",23,0)
 W !,?29 F I=1:1:24 W "="
"RTN","ESPJOU",24,0)
 W !
"RTN","ESPJOU",25,0)
 F ESPN=0:0 S ESPN=$O(^ESP(916,ESPID,2,ESPN)) Q:END  Q:ESPN'>0  D
"RTN","ESPJOU",26,0)
 .  S DIC="^ESP(916,"_ESPID_",2,",DA=ESPN,DR=".01",DIQ(0)="E" D EN^DIQ1 Q:'$D(^UTILITY("DIQ1",$J,916.03,DA,.01,"E"))
"RTN","ESPJOU",27,0)
WATC .  S (NAME,PDUZ)=""
"RTN","ESPJOU",28,0)
 .  I $Y+5>IOSL D HDR1 Q:END
"RTN","ESPJOU",29,0)
 .  W !,?15,$G(^UTILITY("DIQ1",$J,916.03,DA,.01,"E"))
"RTN","ESPJOU",30,0)
 .  F ESPN1=0:0 S ESPN1=$O(^ESP(916,ESPID,2,ESPN,1,ESPN1)) Q:ESPN1'>0  D
"RTN","ESPJOU",31,0)
 ..  S DIC="^ESP(916,"_ESPID_",2,"_ESPN_",1,",DA=ESPN1,DR=".01;.03",DIQ(0)="EI" D EN^DIQ1 Q:'$D(^UTILITY("DIQ1",$J,916.31,DA,.01,"E"))
"RTN","ESPJOU",32,0)
 ..  W ?27,$G(^UTILITY("DIQ1",$J,916.31,DA,.01,"E")),?55,$G(^UTILITY("DIQ1",$J,916.31,DA,.03,"E")),!
"RTN","ESPJOU",33,0)
 G:END EXIT
"RTN","ESPJOU",34,0)
SEC3 K ^UTILITY($J,"W") S DIWL=7,DIWR=80,DIWF="W",IEN=0
"RTN","ESPJOU",35,0)
 I $Y+5>IOSL D HDR1 G:END EXIT
"RTN","ESPJOU",36,0)
 W !,?24,"SECTION III - SPECIAL INSTRUCTIONS"
"RTN","ESPJOU",37,0)
 W !,?24 F I=1:1:34 W "="
"RTN","ESPJOU",38,0)
 F ESPN=1:1 S IEN=$O(^ESP(916,ESPID,3,IEN)) Q:IEN'>0  S X=^(IEN,0) D  Q:END
"RTN","ESPJOU",39,0)
 .  I $Y+5>IOSL D HDR1 Q:END
"RTN","ESPJOU",40,0)
 .  D ^DIWP
"RTN","ESPJOU",41,0)
 G:END EXIT
"RTN","ESPJOU",42,0)
 D ^DIWW
"RTN","ESPJOU",43,0)
SEC4 D HDR4 G:END EXIT
"RTN","ESPJOU",44,0)
 I '$G(ESPJOU1) F ESPN=0:0 S ESPN=$O(^ESP(916,ESPID,4,ESPN)) Q:ESPN'>0  D TIME Q:END
"RTN","ESPJOU",45,0)
 I $G(ESPJOU1) D
"RTN","ESPJOU",46,0)
 .  D SORT^ESPJOU1
"RTN","ESPJOU",47,0)
 .  S ESPTI=""
"RTN","ESPJOU",48,0)
 .  F  S ESPTI=$O(^TMP($J,"ESP",ESPTI)) Q:ESPTI=""  S ESPN=^(ESPTI) D TIME Q:END
"RTN","ESPJOU",49,0)
 G:END EXIT
"RTN","ESPJOU",50,0)
 I $Y+5>IOSL D HDR1 G:END EXIT
"RTN","ESPJOU",51,0)
 W !!!!!,?7,"REVIEW (Chief, Police Service)",!!
"RTN","ESPJOU",52,0)
 W ?7,"______________________________"
"RTN","ESPJOU",53,0)
 W ?45,"Date: _________________________"
"RTN","ESPJOU",54,0)
 D ^%ZISC
"RTN","ESPJOU",55,0)
EXIT K CL,DA,DIC,DIQ,DIR,DIRUT,DIWF,DIWL,DIWR,DR,DTOUT,DUOUT,END,ESPID,ESPN,ESPN1,ESPF,ESPT,ESPTI,ESPTIME,IEN,NAME,PAGE,PDUZ,X,Y,ZTDESC,ZTRTN,ZTSAVE,%ZIS,%,I,POP
"RTN","ESPJOU",56,0)
 K ^UTILITY("DIQ1",$J),^TMP($J)
"RTN","ESPJOU",57,0)
 QUIT
"RTN","ESPJOU",58,0)
HDR ;PRINT HEADING
"RTN","ESPJOU",59,0)
 I PAGE S END=$$EOP^ESPUTIL Q:END  W @IOF
"RTN","ESPJOU",60,0)
 E  I $E(IOST,1,2)="C-" W @IOF
"RTN","ESPJOU",61,0)
 S PAGE=PAGE+1
"RTN","ESPJOU",62,0)
 W !!!?22,"VA POLICE DAILY OPERATIONS JOURNAL",?70,"Page ",$J(PAGE,3)
"RTN","ESPJOU",63,0)
 W !?26,"(Automated VA Form 10-1433)"
"RTN","ESPJOU",64,0)
 W !?4,"VA Facility" W ?61,"Date/Time Printed"
"RTN","ESPJOU",65,0)
 S ESPFAC=$P(^ESP(916,ESPID,0),U,2)
"RTN","ESPJOU",66,0)
 I +ESPFAC>0 W !?4,$P($G(^DG(40.8,ESPFAC,0)),U,1)
"RTN","ESPJOU",67,0)
 E  W !?4,$S($D(^DIC(4,DUZ(2),0)):$P(^(0),U),1:"")
"RTN","ESPJOU",68,0)
 W ?61,$$NOW^ESPUTIL()
"RTN","ESPJOU",69,0)
 QUIT
"RTN","ESPJOU",70,0)
HDR1 ;PRINT CONSECUTIVE HEADERS
"RTN","ESPJOU",71,0)
 S END=$$EOP^ESPUTIL Q:END
"RTN","ESPJOU",72,0)
 S PAGE=PAGE+1 W @IOF,!!!?22,"VA POLICE DAILY OPERATIONS JOURNAL",?70,"Page ",$J(PAGE,3)
"RTN","ESPJOU",73,0)
 W !?25,"(Automated VA Form 10-1433a)"
"RTN","ESPJOU",74,0)
 W ?61,$$NOW^ESPUTIL()
"RTN","ESPJOU",75,0)
 W !!?18,"FROM: ",ESPF
"RTN","ESPJOU",76,0)
 W ?43,"TO: ",ESPT,!
"RTN","ESPJOU",77,0)
 QUIT
"RTN","ESPJOU",78,0)
HDR4 ;SECTION 4 HEADING
"RTN","ESPJOU",79,0)
 I $Y+7>IOSL D HDR1 Q:END
"RTN","ESPJOU",80,0)
 W !,?28,"SECTION IV - ENTRY SUMMARY"
"RTN","ESPJOU",81,0)
 W !,?28 F I=1:1:26 W "="
"RTN","ESPJOU",82,0)
 W !!,?4,"TIME",?14,"OFFICER",?27,"ACTIVITY"
"RTN","ESPJOU",83,0)
 W !,?4 F I=1:1:76 W "="
"RTN","ESPJOU",84,0)
 QUIT
"RTN","ESPJOU",85,0)
HDR2 S X=""
"RTN","ESPJOU",86,0)
 W !,?4,"TIME",?14,"OFFICER",?27,"ACTIVITY"
"RTN","ESPJOU",87,0)
 W !,?4 F I=1:1:76 W "="
"RTN","ESPJOU",88,0)
 QUIT
"RTN","ESPJOU",89,0)
 ;
"RTN","ESPJOU",90,0)
TIME ; print from time multiple of file 916
"RTN","ESPJOU",91,0)
 S DIC="^ESP(916,"_ESPID_",4,",DA=ESPN,DR=".01;1;2",DIQ(0)="E" D EN^DIQ1 Q:'$D(^UTILITY("DIQ1",$J,916.05,DA,.01,"E"))
"RTN","ESPJOU",92,0)
 I $Y+5>IOSL D HDR1 Q:END  D HDR2
"RTN","ESPJOU",93,0)
 W !,?4,$G(^UTILITY("DIQ1",$J,916.05,DA,.01,"E"))
"RTN","ESPJOU",94,0)
 W ?14,$P($G(^UTILITY("DIQ1",$J,916.05,DA,1,"E")),",")
"RTN","ESPJOU",95,0)
 W ?27,$G(^UTILITY("DIQ1",$J,916.05,DA,2,"E"))
"RTN","ESPJOU",96,0)
 K ^UTILITY($J,"W") S DIWL=7,DIWR=79,DIWF="W",IEN=0
"RTN","ESPJOU",97,0)
 F ESPN1=1:1 S IEN=$O(^ESP(916,ESPID,4,ESPN,3,IEN)) Q:IEN'>0  S X=^(IEN,0) D  Q:END
"RTN","ESPJOU",98,0)
 .  I $Y+5>IOSL D HDR1 Q:END
"RTN","ESPJOU",99,0)
 .  D ^DIWP
"RTN","ESPJOU",100,0)
 Q:END
"RTN","ESPJOU",101,0)
 D ^DIWW
"RTN","ESPJOU",102,0)
 W ?4 F I=1:1:76 W "-"
"RTN","ESPJOU",103,0)
 Q
"RTN","ESPOFF")
0^3^B17353339
"RTN","ESPOFF",1,0)
ESPOFF ;DALISC/CKA - OFFENSE REPORT INPUT;3/99
"RTN","ESPOFF",2,0)
 ;;1.0;POLICE & SECURITY;**9,12,27,39**;Mar 31, 1994
"RTN","ESPOFF",3,0)
EN ;
"RTN","ESPOFF",4,0)
 D DT^DICRW S ESPVAR=3
"RTN","ESPOFF",5,0)
 I '$D(DUZ(2)) W !!,"SITE # IS NOT DEFINED." G EXIT
"RTN","ESPOFF",6,0)
DTR S NOUPD=0 W !! S DIR(0)="DO^::ETXR",DIR("A")="DATE/TIME RECEIVED",DIR("?")="^W !!,?10,""Enter the  date and time the complaint is received.  You must enter a time."" S %DT=""ETXR"" D HELP^%DTC"
"RTN","ESPOFF",7,0)
 D ^DIR K DIR G:$D(DIRUT) EXIT S ESPDTR=Y
"RTN","ESPOFF",8,0)
LKUP S DIC="^ESP(912,",DIC(0)="XMZ" D ^DIC K DIC S ESPY=+Y
"RTN","ESPOFF",9,0)
 I Y>0 D MSG G NOUPD
"RTN","ESPOFF",10,0)
FAC S ESPX=".07" D RD G:$D(DUOUT)!($D(DTOUT)) NOUPD S ESPD(.07)=+Y
"RTN","ESPOFF",11,0)
 S ESPN=1
"RTN","ESPOFF",12,0)
CL S DIR(0)="912.01,.01",DIR("A")="CLASSIFICATION CODE" D ^DIR K DIR G:$D(DUOUT)!($D(DTOUT)) NOUPD G:$D(DIRUT) DTO
"RTN","ESPOFF",13,0)
 S (ESPCL(ESPN),ESPS)=+Y S:'+Y ESPCL(ESPN)=""
"RTN","ESPOFF",14,0)
 I '$O(^ESP(912.8,"AC",ESPS,0)) G SCL
"RTN","ESPOFF",15,0)
TYPE S DIR(0)="912.01,.02",DIR("A")="TYPE" D ^DIR K DIR G:$D(DUOUT)!($D(DTOUT)) NOUPD
"RTN","ESPOFF",16,0)
 S $P(ESPCL(ESPN),U,2)=+Y,ESPS=+Y_"^"_ESPS S:'+Y $P(ESPCL(ESPN),U,2)=""
"RTN","ESPOFF",17,0)
 I '$O(^ESP(912.9,"AC",+Y,0)) G SCL
"RTN","ESPOFF",18,0)
SUB S DIR(0)="912.01,.03",DIR("A")="SUBTYPE" D ^DIR K DIR G:$D(DUOUT)!($D(DTOUT)) NOUPD
"RTN","ESPOFF",19,0)
 S $P(ESPCL(ESPN),U,3)=+Y S:'+Y $P(ESPCL(ESPN),U,3)=""
"RTN","ESPOFF",20,0)
SCL S ^TMP($J,"UOR","CL",ESPN,0)=ESPCL(ESPN)
"RTN","ESPOFF",21,0)
ASK S DIR(0)="Y",DIR("A")="Do you want to enter another classification code",DIR("B")="NO" D ^DIR K DIR
"RTN","ESPOFF",22,0)
 G:$D(DTOUT) NOUPD
"RTN","ESPOFF",23,0)
 I Y'=1&(Y'=0) W !!,$C(7),?5,"You must enter Yes or No." G ASK
"RTN","ESPOFF",24,0)
 I Y S ESPN=ESPN+1 G CL
"RTN","ESPOFF",25,0)
DTO S ESPX=".03" D RD G:$D(DUOUT)!($D(DTOUT)) NOUPD S ESPD(.03)=Y
"RTN","ESPOFF",26,0)
 I ESPD(.03)>ESPDTR W !!,$C(7),"Date/time of Offense must be before Date/time Received!",! G DTO
"RTN","ESPOFF",27,0)
EDTO S ESPX=".09" D RD G:$D(DUOUT)!($D(DTOUT)) NOUPD S ESPD(.09)=Y
"RTN","ESPOFF",28,0)
 I ESPD(.09)'="",ESPD(.03)>ESPD(.09) W !!,$C(7),"Ending Date/time of Offense must be after Date/time of Offense!",! G EDTO
"RTN","ESPOFF",29,0)
LOC S ESPX=".04" D RD G:$D(DUOUT)!($D(DTOUT)) NOUPD S ESPD(.04)=Y
"RTN","ESPOFF",30,0)
WEAP S ESPX=".05" D RD G:$D(DUOUT)!($D(DTOUT)) NOUPD S ESPD(.05)=Y
"RTN","ESPOFF",31,0)
MO W !,"METHOD OF OPERATION: " S DWLW=80,DWPK=1,DIC="^TMP($J,""MO"",",DIWESUB="METHOD OF OPERATION" D EN^DIWE
"RTN","ESPOFF",32,0)
 G:$D(DTOUT) NOUPD
"RTN","ESPOFF",33,0)
POL N TYPE S ESPX=".06" D RD G:$D(DUOUT)!($D(DTOUT)) NOUPD S:'+Y ESPD(.06)="" I +Y S ESPD(.06)=+Y D SET(+Y,0)
"RTN","ESPOFF",34,0)
CIP S ESPX="1.01" D RD G:$D(DUOUT)!($D(DTOUT)) NOUPD S ESPD(1.01)=Y
"RTN","ESPOFF",35,0)
BAT S ESPX="1.02" D RD G:$D(DUOUT)!($D(DTOUT)) NOUPD S ESPD(1.02)=Y
"RTN","ESPOFF",36,0)
 S ^TMP($J,"UOR",0)="^"_ESPDTR_"^"_ESPD(.03)_"^"_ESPD(.04)_"^"_ESPD(.05)_"^"_ESPD(.06)_"^"_ESPD(.07)_"^O^"_ESPD(.09)_"^^"_ESPD(.11)_"^"_ESPD(.12)
"RTN","ESPOFF",37,0)
 S ^TMP($J,"UOR",1)=ESPD(1.01)_"^"_ESPD(1.02)_"^"
"RTN","ESPOFF",38,0)
 G 1^ESPOFF0
"RTN","ESPOFF",39,0)
EXIT W:$D(DTOUT) $C(7)
"RTN","ESPOFF",40,0)
 K DA,DIC,DIR,DIRUT,DUOUT,ESPCL,ESPD,ESPDTR,ESPFN,ESPN,ESPNOT,ESPS,ESPTEST,ESPVAR,ESPX,ESPY,I,NOUPD,X,Y,^TMP($J)
"RTN","ESPOFF",41,0)
 QUIT
"RTN","ESPOFF",42,0)
RD S DIR(0)="912,"_ESPX D ^DIR I $S(($L(X)>1&($E(X)=U)):1,($L(X)>1&(X[U)):1,1:0) D NO K X,Y G RD
"RTN","ESPOFF",43,0)
 K DIR Q
"RTN","ESPOFF",44,0)
NO W $C(7),!!?5,"NO '^'S ALLOWED!",!! Q
"RTN","ESPOFF",45,0)
 ;
"RTN","ESPOFF",46,0)
NOUPD W !!,$C(7),?20,"NO UPDATING HAS OCCURRED!!!",!! K ESPCL,ESPD,ESPDTR,ESPX,ESPY,^TMP($J) G:$D(DTOUT) EXIT G DTR
"RTN","ESPOFF",47,0)
MSG W !,$C(7),"FOUND" W ?10,"There is already a report for this date/time.",!?10,"Same date/time received NOT allowed.",!?10,"To edit the existing report,",!?10,"you must go to the Edit an Offense Report option."
"RTN","ESPOFF",48,0)
 W !?10,"To complete this report, go to Resume an Offense Report Entry."
"RTN","ESPOFF",49,0)
 Q
"RTN","ESPOFF",50,0)
SET(NEWKEY,TYPE) ;PULL BADGE/RANK FOR INVESTIGATOR
"RTN","ESPOFF",51,0)
 S:TYPE>0 HDA=DA
"RTN","ESPOFF",52,0)
 S DIC="^VA(200,",DA=NEWKEY,DR="910.1;910.2",DIQ(0)="E",DIQ="POLINF" D EN^DIQ1
"RTN","ESPOFF",53,0)
 S:TYPE>0 SX=$S(TYPE=1:POLINF(200,DA,910.1,"E"),TYPE=2:POLINF(200,DA,910.2,"E"),1:""),DI=.06
"RTN","ESPOFF",54,0)
 S:TYPE=0 ESPD(.11)=POLINF(200,DA,910.1,"E"),ESPD(.12)=POLINF(200,DA,910.2,"E")
"RTN","ESPOFF",55,0)
 K DIC,DIQ,POLINF
"RTN","ESPOFF",56,0)
 Q:TYPE=0
"RTN","ESPOFF",57,0)
 S DA=HDA K HDA
"RTN","ESPOFF",58,0)
 Q SX
"RTN","ESPOFF1")
0^7^B17540634
"RTN","ESPOFF1",1,0)
ESPOFF1 ;DALISC/CKA - OFFENSE REPORT INPUT - PART 2;9/92
"RTN","ESPOFF1",2,0)
 ;;1.0;POLICE & SECURITY;**39**;Mar 31, 1994
"RTN","ESPOFF1",3,0)
EN ;Q; Requires ^TMP($J) to be defined
"RTN","ESPOFF1",4,0)
 W !!!,"Updating."
"RTN","ESPOFF1",5,0)
STUFF K DD,DO S DIC="^ESP(912,",DIC(0)="L",DLAYGO=912 D OFF^ESPOID D FILE^DICN S ESPOFN=+Y
"RTN","ESPOFF1",6,0)
 L +^ESP(912,ESPOFN):1 I '$T W !,"Another user is editing this record!!"
"RTN","ESPOFF1",7,0)
 S UOR0=^TMP($J,"UOR",0)
"RTN","ESPOFF1",8,0)
 S ^ESP(912,ESPOFN,0)=ESPOFN_"^"_$P(UOR0,U,2,12),^ESP(912,ESPOFN,1)=$G(^TMP($J,"UOR",1))
"RTN","ESPOFF1",9,0)
 S $P(^ESP(912,ESPOFN,5),U,2)=0,$P(^ESP(912,ESPOFN,5),U,3)=DUZ,$P(^(5),U,5)=1
"RTN","ESPOFF1",10,0)
CL ;STUFF CLASSIFICATION CODES
"RTN","ESPOFF1",11,0)
 F ESPN=0:0 S ESPN=$O(^TMP($J,"UOR","CL",ESPN)) Q:ESPN=""  S CL=^(ESPN,0) D
"RTN","ESPOFF1",12,0)
 .  S:'$D(^ESP(912,ESPOFN,10,0)) ^(0)="^912.01P^^"
"RTN","ESPOFF1",13,0)
 .  K DD,DO S DIC="^ESP(912,"_ESPOFN_",10,",DIC(0)="L",DLAYGO=912,X=+CL,DA(1)=ESPOFN D FILE^DICN
"RTN","ESPOFF1",14,0)
 .  S ^ESP(912,ESPOFN,10,ESPN,0)=CL
"RTN","ESPOFF1",15,0)
 .  ;X-REF
"RTN","ESPOFF1",16,0)
 .  S DIK="^ESP(912,"_ESPOFN_",20,",DA=ESPN D IX1^DIK K DIK,DA
"RTN","ESPOFF1",17,0)
C ;STUFF COMPLAINANT DATA
"RTN","ESPOFF1",18,0)
 F ESPN=0:0 S ESPN=$O(^TMP($J,"UOR","C",ESPN)) Q:ESPN=""  S ESPFN=^(ESPN) D
"RTN","ESPOFF1",19,0)
 .  S:'$D(^ESP(912,ESPOFN,20,0)) ^(0)="^912.03^" K DD,DO S DIC="^ESP(912,"_ESPOFN_",20,",DIC(0)="L",DLAYGO=912,X=ESPN,DA(1)=ESPOFN D FILE^DICN
"RTN","ESPOFF1",20,0)
 .  S COMP0=$G(^ESP(910,ESPFN,0)),^ESP(912,ESPOFN,20,ESPN,0)=ESPN_"^"_ESPFN_"^"_$P(COMP0,U,4),^ESP(912,ESPOFN,20,ESPN,1)=$G(^ESP(910,ESPFN,1)),^ESP(912,ESPOFN,20,ESPN,2)=$G(^ESP(910,ESPFN,2))
"RTN","ESPOFF1",21,0)
 .  S DIK="^ESP(912,"_ESPOFN_",20,",DA=ESPN D IX1^DIK K DIK,DA
"RTN","ESPOFF1",22,0)
V ;STUFF VICTIM DATA
"RTN","ESPOFF1",23,0)
 F ESPN=0:0 S ESPN=$O(^TMP($J,"UOR","V",ESPN)) Q:ESPN=""  S ESPFN=^(ESPN) D
"RTN","ESPOFF1",24,0)
 .  S:'$D(^ESP(912,ESPOFN,30,0)) ^(0)="^912.04^"
"RTN","ESPOFF1",25,0)
 .  K DD,DO S DIC="^ESP(912,"_ESPOFN_",30,",DIC(0)="L",DLAYGO=912,X=ESPN,DA(1)=ESPOFN D FILE^DICN
"RTN","ESPOFF1",26,0)
 .  S VIC0=$G(^ESP(910,ESPFN,0)),^ESP(912,ESPOFN,30,ESPN,0)=ESPN_"^"_ESPFN_"^"_$P(VIC0,U,8)_"^"_$P(VIC0,U,9)_"^"_$P(VIC0,U,4)_"^"_$P(VIC0,U,10)_"^"_$P(VIC0,U,11)
"RTN","ESPOFF1",27,0)
 .  S ^ESP(912,ESPOFN,30,ESPN,1)=$G(^ESP(910,ESPFN,1))
"RTN","ESPOFF1",28,0)
 .  S ^ESP(912,ESPOFN,30,ESPN,2)=$G(^ESP(910,ESPFN,2))
"RTN","ESPOFF1",29,0)
 .  ;MEDICAL TREATMENT
"RTN","ESPOFF1",30,0)
 .  S %X="^TMP("_$J_",""MT"","_ESPN_",",%Y="^ESP(912,"_ESPOFN_",30,"_ESPN_",10," D %XY^%RCR
"RTN","ESPOFF1",31,0)
 .  ;X REF
"RTN","ESPOFF1",32,0)
 .  S DIK="^ESP(912,"_ESPOFN_",30,",DA=ESPN D IX1^DIK K DIK,DA
"RTN","ESPOFF1",33,0)
O ;STUFF OFFENDER DATA
"RTN","ESPOFF1",34,0)
 F ESPN=0:0 S ESPN=$O(^TMP($J,"UOR","O",ESPN)) Q:ESPN=""  S ESPFN=+^(ESPN),TMPN=^(ESPN) D
"RTN","ESPOFF1",35,0)
 .  S:'$D(^ESP(912,ESPOFN,40,0)) ^(0)="^912.05^"
"RTN","ESPOFF1",36,0)
 .  K DD,DO S DIC="^ESP(912,"_ESPOFN_",40,",DIC(0)="L",DLAYGO=912,X=ESPN,DA(1)=ESPOFN D FILE^DICN
"RTN","ESPOFF1",37,0)
 .  I ESPFN>0 D
"RTN","ESPOFF1",38,0)
 ..  S OFF0=$G(^ESP(910,ESPFN,0)),OFF3=$G(^(3))
"RTN","ESPOFF1",39,0)
 ..  S ^ESP(912,ESPOFN,40,ESPN,0)=ESPN_"^"_ESPFN_"^"_$P(OFF0,U,8)_"^"_$P(OFF0,U,9)_"^"_$P(OFF3,U,1)_"^"_$P(OFF3,U,2)_"^"_$P(OFF3,U,3)_"^"_$P(OFF3,U,4)_"^"_$P(OFF3,U,5)_"^"_$P(OFF3,U,6)_"^"_$P(OFF0,U,4)_"^"_$P(OFF0,U,10)_"^"_$P(OFF0,U,11)
"RTN","ESPOFF1",40,0)
 ..  S ^ESP(912,ESPOFN,40,ESPN,1)=$G(^ESP(910,ESPFN,1)),^ESP(912,ESPOFN,40,ESPN,2)=$G(^ESP(910,ESPFN,2)),^ESP(912,ESPOFN,40,ESPN,3)=^TMP($J,"UOR","OPERS",ESPN)
"RTN","ESPOFF1",41,0)
 .  E  D
"RTN","ESPOFF1",42,0)
 ..  S ^ESP(912,ESPOFN,40,ESPN,0)=ESPN_"^^^"_$P(TMPN,U,4)_"^"_$P(TMPN,U,5)_"^"_$P(TMPN,U,6)_"^"_$P(TMPN,U,7)_"^"_$P(TMPN,U,8)_"^"_$P(TMPN,U,9)_"^"_$P(TMPN,U,10),^ESP(912,ESPOFN,40,ESPN,3)=^TMP($J,"UOR","OPERS",ESPN)
"RTN","ESPOFF1",43,0)
 .  ;STUFF OFFENSE CHARGED
"RTN","ESPOFF1",44,0)
 .  F ESPN1=0:0 S ESPN1=$O(^TMP($J,"UOR","O",ESPN,ESPN1)) Q:ESPN1=""  S OFF(ESPN1)=^(ESPN1,0) D
"RTN","ESPOFF1",45,0)
 ..  S:'$D(^ESP(912,ESPOFN,40,ESPN,10,0)) ^(0)="^912.11P^^"
"RTN","ESPOFF1",46,0)
 ..  K DD,DO S DIC="^ESP(912,"_ESPOFN_",40,"_ESPN_",10,",DIC(0)="L",DLAYGO=912,DA(2)=ESPOFN,DA(1)=ESPN,DA=ESPN1,X=+^TMP($J,"UOR","O",ESPN,ESPN1,0) D FILE^DICN
"RTN","ESPOFF1",47,0)
 ..  S $P(^ESP(912,ESPOFN,40,ESPN,10,DA,0),U,2,4)=$P(OFF(ESPN1),U,2,4)
"RTN","ESPOFF1",48,0)
 .  ;X-REF
"RTN","ESPOFF1",49,0)
 .  S DIK="^ESP(912,"_ESPOFN_",40,",DA(1)=ESPN,DA=ESPOFN D IX1^DIK K DIK,DA
"RTN","ESPOFF1",50,0)
 ;
"RTN","ESPOFF1",51,0)
 ;
"RTN","ESPOFF1",52,0)
 G ^ESPOFF2
"RTN","ESPOFF2")
0^6^B15397718
"RTN","ESPOFF2",1,0)
ESPOFF2 ;DALISC/CKA - OFFENSE REPORT INPUT (CONT.);9/92
"RTN","ESPOFF2",2,0)
 ;;1.0;POLICE & SECURITY;**39**;Mar 31, 1994
"RTN","ESPOFF2",3,0)
EN ;Q;Requires ^TMP($J) be defined
"RTN","ESPOFF2",4,0)
 ;Continuation from ESPOFF1- stuffing data in Offense file
"RTN","ESPOFF2",5,0)
W ;STUFF WITNESS DATA
"RTN","ESPOFF2",6,0)
 F ESPN=0:0 S ESPN=$O(^TMP($J,"UOR","W",ESPN)) Q:ESPN=""  S ESPFN=^(ESPN) D
"RTN","ESPOFF2",7,0)
 .  S:'$D(^ESP(912,ESPOFN,50,0)) ^(0)="^912.06^^"
"RTN","ESPOFF2",8,0)
 .  K DD,DO S DIC="^ESP(912,"_ESPOFN_",50,",DIC(0)="L",DLAYGO=912,X=ESPN,DA(1)=ESPOFN D FILE^DICN
"RTN","ESPOFF2",9,0)
 .  S WIT0=$G(^ESP(910,ESPFN,0)),^ESP(912,ESPOFN,50,ESPN,0)=ESPN_"^"_ESPFN
"RTN","ESPOFF2",10,0)
 .  S ^ESP(912,ESPOFN,50,ESPN,1)=$G(^ESP(910,ESPFN,1)),^ESP(912,ESPOFN,50,ESPN,2)=$G(^ESP(910,ESPFN,2))
"RTN","ESPOFF2",11,0)
 .  S DIK="^ESP(912,"_ESPOFN_",50,",DA=ESPN D IX1^DIK K DIK,DA
"RTN","ESPOFF2",12,0)
MO ;STUFF METHOD OF OPERATION DATA
"RTN","ESPOFF2",13,0)
 S %X="^TMP("_$J_",""MO"",",%Y="^ESP(912,"_ESPOFN_",60," D %XY^%RCR
"RTN","ESPOFF2",14,0)
NAR ;STUFF NARRATIVE DATA
"RTN","ESPOFF2",15,0)
 ;STUFF ORIGIN
"RTN","ESPOFF2",16,0)
 S %X="^TMP("_$J_",""N1"",",%Y="^ESP(912,"_ESPOFN_",70," D %XY^%RCR
"RTN","ESPOFF2",17,0)
 ;STUFF INITIAL DISPOSITION
"RTN","ESPOFF2",18,0)
 S %X="^TMP("_$J_",""N2"",",%Y="^ESP(912,"_ESPOFN_",72," D %XY^%RCR
"RTN","ESPOFF2",19,0)
 ;STUFF INVESTIGATION
"RTN","ESPOFF2",20,0)
 S %X="^TMP("_$J_",""N3"",",%Y="^ESP(912,"_ESPOFN_",73," D %XY^%RCR
"RTN","ESPOFF2",21,0)
 ;STUFF DISPOSITION
"RTN","ESPOFF2",22,0)
 S %X="^TMP("_$J_",""N4"",",%Y="^ESP(912,"_ESPOFN_",74," D %XY^%RCR
"RTN","ESPOFF2",23,0)
VEH ;STUFF VEHICLE DATA
"RTN","ESPOFF2",24,0)
 F ESPN=0:0 S ESPN=$O(^TMP($J,"UOR","VE",ESPN)) Q:ESPN=""  S VEH=^(ESPN) D
"RTN","ESPOFF2",25,0)
 .  S:'$D(^ESP(912,ESPOFN,80,0)) ^(0)="^912.09^^"
"RTN","ESPOFF2",26,0)
 .  K DD,DO S DIC="^ESP(912,"_ESPOFN_",80,",DIC(0)="L",DLAYGO=912,X=ESPN,DA(1)=ESPOFN D FILE^DICN
"RTN","ESPOFF2",27,0)
 .  S ^ESP(912,ESPOFN,80,ESPN,0)=^TMP($J,"UOR","VE",ESPN)
"RTN","ESPOFF2",28,0)
 .  ;X-REF
"RTN","ESPOFF2",29,0)
 .  S DIK="^ESP(912,"_ESPOFN_",80,",DA=ESPN D IX1^DIK K DIK,DA
"RTN","ESPOFF2",30,0)
LOST ;STUFF LOST PROPERTY DATA
"RTN","ESPOFF2",31,0)
 S ESPX=""
"RTN","ESPOFF2",32,0)
 F ESPN=1:1 S ESPX=$O(^TMP($J,"UOR","P",ESPX)) Q:ESPX=""  S LOST=^(ESPX) D
"RTN","ESPOFF2",33,0)
 .  S:'$D(^ESP(912,ESPOFN,90,0)) ^(0)="^912.1^^"
"RTN","ESPOFF2",34,0)
 .  K DD,DO S DIC="^ESP(912,"_ESPOFN_",90,",DIC(0)="L",DLAYGO=912,X=ESPX,DA(1)=ESPOFN D FILE^DICN
"RTN","ESPOFF2",35,0)
 .  S ^ESP(912,ESPOFN,90,ESPN,0)=^TMP($J,"UOR","P",ESPX)
"RTN","ESPOFF2",36,0)
 .  ;X-REF
"RTN","ESPOFF2",37,0)
 .  S DIK="^ESP(912,"_ESPOFN_",90,",DA=ESPN D IX1^DIK K DIK,DA
"RTN","ESPOFF2",38,0)
HELD ;STUFF HELD PROPERTY DATA
"RTN","ESPOFF2",39,0)
 F ESPN=0:0 S ESPN=$O(^TMP($J,"UOR","PH",ESPN)) Q:ESPN=""  S HELD=^(ESPN) D
"RTN","ESPOFF2",40,0)
 .  S:'$D(^ESP(912,ESPOFN,100,0)) ^(0)="^912.02^^"
"RTN","ESPOFF2",41,0)
 .  K DD,DO S DIC="^ESP(912,"_ESPOFN_",100,",DIC(0)="L",DLAYGO=912,X=ESPN,DA(1)=ESPOFN
"RTN","ESPOFF2",42,0)
 .  S ^ESP(912,ESPOFN,100,ESPN,0)=^TMP($J,"UOR","PH",ESPN)
"RTN","ESPOFF2",43,0)
 .  ;STUFF DESCRIPTION
"RTN","ESPOFF2",44,0)
 .  S %X="^TMP("_$J_",""DE"","_ESPN_",",%Y="^ESP(912,"_ESPOFN_",100,"_ESPN_",10," D %XY^%RCR
"RTN","ESPOFF2",45,0)
 .  ;X-REF
"RTN","ESPOFF2",46,0)
 .  S DIK="^ESP(912,"_ESPOFN_",100,",DA=ESPN D IX1^DIK K DIK,DA
"RTN","ESPOFF2",47,0)
OTH ;STUFF OTHER AGENCY NOTIFICATION DATA
"RTN","ESPOFF2",48,0)
 F ESPN=0:0 S ESPN=$O(^TMP($J,"UOR","OTH",ESPN)) Q:ESPN=""  S OTH=^(ESPN) D
"RTN","ESPOFF2",49,0)
 .  S:'$D(^ESP(912,ESPOFN,110,0)) ^(0)="^912.14D^^"
"RTN","ESPOFF2",50,0)
 .  K DD,DO S DIC="^ESP(912,"_ESPOFN_",110,",DIC(0)="L",DLAYGO=912,X=ESPN,DA(1)=ESPOFN
"RTN","ESPOFF2",51,0)
 .  S ^ESP(912,ESPOFN,110,ESPN,0)=^TMP($J,"UOR","OTH",ESPN)
"RTN","ESPOFF2",52,0)
 .  ;X-REF
"RTN","ESPOFF2",53,0)
 .  S DIK="^ESP(912,"_ESPOFN_",110,",DA=ESPN D IX1^DIK K DIK,DA
"RTN","ESPOFF2",54,0)
ATY ;STUFF U.S. ATTORNEY NOTIFICATIONS DATA
"RTN","ESPOFF2",55,0)
 F ESPN=0:0 S ESPN=$O(^TMP($J,"UOR","ATY",ESPN)) Q:ESPN=""  S ATY=^(ESPN) D
"RTN","ESPOFF2",56,0)
 .  S:'$D(^ESP(912,ESPOFN,120,0)) ^(0)="^912.15D^^"
"RTN","ESPOFF2",57,0)
 .  K DD,DO S DIC="^ESP(912,"_ESPOFN_",120,",DIC(0)="L",DLAYGO=912,X=ESPN,DA(1)=ESPOFN
"RTN","ESPOFF2",58,0)
 .  S ^ESP(912,ESPOFN,120,ESPN,0)=^TMP($J,"UOR","ATY",ESPN)
"RTN","ESPOFF2",59,0)
 .  ;STUFF INSTRUCTIONS RECEIVED
"RTN","ESPOFF2",60,0)
 .  S %X="^TMP("_$J_",""INS"","_ESPN_",",%Y="^ESP(912,"_ESPOFN_",120,"_ESPN_",10," D %XY^%RCR
"RTN","ESPOFF2",61,0)
 .  ;X-REF
"RTN","ESPOFF2",62,0)
 .  S DIK="^ESP(912,"_ESPOFN_",120,",DA=ESPN D IX1^DIK K DIK,DA
"RTN","ESPOFF2",63,0)
 N DC S DC=$P(UOR0,U,6),DIK="^ESP(912,",DA=ESPOFN D IX1^DIK K DIK,DA,DC
"RTN","ESPOFF2",64,0)
 W !!,"Done."
"RTN","ESPOFF2",65,0)
 L -^ESP(912,ESPOFN)
"RTN","ESPOFF2",66,0)
 D CHECK^ESPOFF3
"RTN","ESPOFF2",67,0)
 S ESPID=ESPOFN
"RTN","ESPOFF2",68,0)
EXIT K %X,%Y,ATY,CH,CHD,CL,COMP0,DA,DD,DIC,DIR,DIRUT,DIK,DO,DUOUT,ESPCL,ESPD,ESPFN,ESPI,ESPN,ESPNO,ESPNOT,ESPN1,ESPOFF,ESPS,ESPTEST,ESPX,ESPY,HELD,I,LOST,NOUPD,OFF,OFF0,OFF3,OTH,TMPN,UOR0,VEH,VIC0,WIT0,X,Y,^TMP($J)
"RTN","ESPOFF2",69,0)
 D PRT^ESPOFFE
"RTN","ESPOFF2",70,0)
 QUIT
"RTN","ESPORP")
0^4^B12581265
"RTN","ESPORP",1,0)
ESPORP ;DALISC/CKA - PRINT OFFENSE REPORT;3/99
"RTN","ESPORP",2,0)
 ;;1.0;POLICE & SECURITY;**14,17,27,36,39**;Mar 31, 1994
"RTN","ESPORP",3,0)
EN ;Entry point to print only completed and nonsensitive reports.
"RTN","ESPORP",4,0)
 D DT^DICRW
"RTN","ESPORP",5,0)
OR S DIC(0)="AEMZ",DIC("A")="UOR#: ",DIC("S")="I $D(^(5)),$P(^(5),U,2),'$P(^(5),U,4),$P(^(5),U,5)",DIC="^ESP(912,"
"RTN","ESPORP",6,0)
 D ^DIC
"RTN","ESPORP",7,0)
 G:$D(DTOUT)!($D(DUOUT))!(X="") EXIT
"RTN","ESPORP",8,0)
 I Y<0 W !,$C(7),"UOR# not found.  Please try again." G OR
"RTN","ESPORP",9,0)
 S ESPDTR=$P(^ESP(912,+Y,0),U,2),ESPID=+Y
"RTN","ESPORP",10,0)
Q S %ZIS="Q" D ^%ZIS G:POP EXIT I '$D(IO("Q")) U IO D START G EXIT
"RTN","ESPORP",11,0)
 S ZTRTN="START^ESPORP",ZTSAVE("ESP*")="",ZTDESC="OFFENSE REPORT" D ^%ZTLOAD,HOME^%ZIS G EXIT
"RTN","ESPORP",12,0)
START ; BEGINS THE PRINT OF THIS OFFENSE REPORT
"RTN","ESPORP",13,0)
 K ^UTILITY("DIQ1",$J) S (END,PAGE)=0 D HDR G:END EXIT
"RTN","ESPORP",14,0)
 S DIC="^ESP(912,",DA=ESPID,DR=".02;.03;.04;.05;.06;.09;.11;.12",DIQ(0)="E" D EN^DIQ1 I '$D(^UTILITY("DIQ1",$J,912,DA)) W !,"RECORD DOESN'T EXIST!" G EXIT
"RTN","ESPORP",15,0)
DTR W !,"DATE/TIME RECEIVED: ",$G(^UTILITY("DIQ1",$J,912,DA,.02,"E"))
"RTN","ESPORP",16,0)
DTO W !,"DATE/TIME OF OFFENSE: ",$G(^UTILITY("DIQ1",$J,912,DA,.03,"E"))
"RTN","ESPORP",17,0)
EDTO W !,"ENDING DATE/TIME OF OFFENSE: ",$G(^UTILITY("DIQ1",$J,912,DA,.09,"E"))
"RTN","ESPORP",18,0)
LOC W !,"LOCATION: ",$G(^UTILITY("DIQ1",$J,912,DA,.04,"E"))
"RTN","ESPORP",19,0)
WEAP W !,"WEAPON USED: ",$G(^UTILITY("DIQ1",$J,912,DA,.05,"E"))
"RTN","ESPORP",20,0)
PO W !,"INVESTIGATING OFFICER: ",$G(^UTILITY("DIQ1",$J,912,DA,.06,"E"))
"RTN","ESPORP",21,0)
 S BADGE=^UTILITY("DIQ1",$J,912,DA,.11,"E")
"RTN","ESPORP",22,0)
MO K ^UTILITY($J,"W") S DIWL=3,DIWR=78,DIWF="W",IEN=0
"RTN","ESPORP",23,0)
 W !,"METHOD OF OPERATION: ",!
"RTN","ESPORP",24,0)
 F ESPN=1:1 S IEN=$O(^ESP(912,ESPID,60,IEN)) Q:IEN'>0  S X=^(IEN,0) D  G EXIT:END
"RTN","ESPORP",25,0)
 .  D HDR:$Y+2>IOSL Q:END
"RTN","ESPORP",26,0)
 .  D ^DIWP
"RTN","ESPORP",27,0)
 D MIN(2) Q:END
"RTN","ESPORP",28,0)
 D ^DIWW
"RTN","ESPORP",29,0)
CL ;PRINT CLASSIFICATION CODES, TYPES, AND SUBTYPES
"RTN","ESPORP",30,0)
 F ESPN=0:0 S ESPN=$O(^ESP(912,ESPID,10,ESPN)) Q:ESPN'>0  D  G EXIT:END
"RTN","ESPORP",31,0)
 .  S DIC="^ESP(912,"_ESPID_",10,",DA=ESPN,DR=".01;.02;.03",DIQ(0)="E" D EN^DIQ1 Q:'$D(^UTILITY("DIQ1",$J,912.01,DA,.01,"E"))
"RTN","ESPORP",32,0)
 .  D LINES()
"RTN","ESPORP",33,0)
 .  W "CLASSIFICATION CODE: ",$G(^UTILITY("DIQ1",$J,912.01,DA,.01,"E"))
"RTN","ESPORP",34,0)
 .  I $G(^UTILITY("DIQ1",$J,912.01,DA,.02,"E"))]"" W "/",^("E")
"RTN","ESPORP",35,0)
 .  I $G(^UTILITY("DIQ1",$J,912.01,DA,.03,"E"))]"" W "/",^("E")
"RTN","ESPORP",36,0)
 G ^ESPORP1
"RTN","ESPORP",37,0)
EXIT K %ZIS,CL,DA,DIC,DIQ,DIR,DIRUT,DIWF,DIWL,DIWR,DR,END,ESPDTR,ESPID,ESPN,ESPN1,IEN,PAGE,X,Y,ZTDESC,ZTRTN,ZTSAVE,BADGE
"RTN","ESPORP",38,0)
 K ^UTILITY("DIQ1",$J)
"RTN","ESPORP",39,0)
 QUIT
"RTN","ESPORP",40,0)
HDR ;PRINT HEADING
"RTN","ESPORP",41,0)
 I $E(IOST,1,2)="C-" S END=$$EOP^ESPUTIL() Q:END
"RTN","ESPORP",42,0)
 S PAGE=PAGE+1 W:PAGE'=1 @IOF W !?25,"DEPARTMENT OF VETERANS AFFAIRS",?(IOM-10),"Page ",$J(PAGE,3)
"RTN","ESPORP",43,0)
 W !?35,"VA POLICE",!?28,"UNIFORM OFFENSE REPORT"
"RTN","ESPORP",44,0)
 W !?30,"UOR# ",$E(ESPDTR,2,3),"-",$E(ESPDTR,4,5),"-",$E(ESPDTR,6,7),"-",$TR($E($P(ESPDTR,".",2)_"ZZZZ",1,4),"Z",0)
"RTN","ESPORP",45,0)
 W !!,"VA Facility" W ?61,"Date/Time Printed"
"RTN","ESPORP",46,0)
 S ESPFACI=$P(^ESP(912,ESPID,0),U,7) S ESPFACI=$S(ESPFACI="":"",$D(^DG(40.8,ESPFACI,0)):$P(^(0),U),1:"")
"RTN","ESPORP",47,0)
 I ESPFACI="",$D(^ESP(912,ESPID,5)),$P(^(5),U)'="" S ESPFACI=$S($D(^DIC(4,$P(^(5),U),0)):$P(^(0),U),1:"")
"RTN","ESPORP",48,0)
 W !,ESPFACI
"RTN","ESPORP",49,0)
 W ?61,$$NOW^ESPUTIL()
"RTN","ESPORP",50,0)
 W !,"Automated VA Form 10-1393"
"RTN","ESPORP",51,0)
 W !!
"RTN","ESPORP",52,0)
 QUIT
"RTN","ESPORP",53,0)
 ;
"RTN","ESPORP",54,0)
 ;ENTRY POINT OR1 IS TO ALLOWS PRINT OF AN INCOMPLETE REPORT
"RTN","ESPORP",55,0)
 ;THIS OPTION IS ONLY FOR PERSONS HOLDING THE CHIEF KEY
"RTN","ESPORP",56,0)
OR1 S DIC(0)="AEMZ",DIC("A")="UOR#: ",DIC("S")="I $D(^(5)),$P(^(5),U,5)",DIC="^ESP(912,"
"RTN","ESPORP",57,0)
 D ^DIC G:$D(DTOUT)!($D(DUOUT))!(X="") EXIT G:Y<0 OR1 S ESPDTR=$P(^ESP(912,+Y,0),U,2),ESPID=+Y
"RTN","ESPORP",58,0)
 D Q
"RTN","ESPORP",59,0)
 QUIT
"RTN","ESPORP",60,0)
 ;
"RTN","ESPORP",61,0)
LINES(COUNT) ;
"RTN","ESPORP",62,0)
 ;writes COUNT lines
"RTN","ESPORP",63,0)
 ;writes header if necessary
"RTN","ESPORP",64,0)
 ;
"RTN","ESPORP",65,0)
 N CRT,INDEX
"RTN","ESPORP",66,0)
 I '$D(COUNT) S COUNT=1
"RTN","ESPORP",67,0)
 S CRT=$S(($E(IOST,1,2)="C-"):1,1:0)
"RTN","ESPORP",68,0)
 F INDEX=1:1:COUNT D  Q:END
"RTN","ESPORP",69,0)
 .I $Y>(IOSL-(1+CRT)) D HDR Q:END
"RTN","ESPORP",70,0)
 .W !
"RTN","ESPORP",71,0)
 Q
"RTN","ESPORP",72,0)
 ;
"RTN","ESPORP",73,0)
MIN(COUNT) ;
"RTN","ESPORP",74,0)
 ;prints header if not minimum of COUNT pages left
"RTN","ESPORP",75,0)
 ;first gives end of page message if crt
"RTN","ESPORP",76,0)
 ;
"RTN","ESPORP",77,0)
 N CRT
"RTN","ESPORP",78,0)
 S CRT=$S(($E(IOST,1,2)="C-"):1,1:0)
"RTN","ESPORP",79,0)
 S COUNT=COUNT+CRT
"RTN","ESPORP",80,0)
 I ($Y>(IOSL-(COUNT))) D HDR
"RTN","ESPORP",81,0)
 Q
"RTN","ESPORP5")
0^5^B11896605
"RTN","ESPORP5",1,0)
ESPORP5 ;DALISC/CKA - PRINT OFFENSE REPORT CONT. ;10/92
"RTN","ESPORP5",2,0)
 ;;1.0;POLICE & SECURITY;**11,14,17,21,25,39**;Mar 31, 1994
"RTN","ESPORP5",3,0)
EN ;CONTINUED FROM ESPORP4
"RTN","ESPORP5",4,0)
NARR ;PRINT NARRATIVE
"RTN","ESPORP5",5,0)
 D MIN^ESPORP(10) G:END EXIT
"RTN","ESPORP5",6,0)
 K ^UTILITY($J,"W") S DIWL=3,DIWR=78,DIWF="W",IEN=0 D LINES^ESPORP(2) G:END EXIT
"RTN","ESPORP5",7,0)
 F I=1:1:18 W "* "
"RTN","ESPORP5",8,0)
 W "NARRATIVE" F I=1:1:17 W " *"
"RTN","ESPORP5",9,0)
 D LINES^ESPORP(2) Q:END  W ?10,"ORIGIN:" D LINES^ESPORP(2) Q:END
"RTN","ESPORP5",10,0)
 F ESPN=1:1 S IEN=$O(^ESP(912,ESPID,70,IEN)) Q:IEN'>0  S X=^(IEN,0) D  Q:END
"RTN","ESPORP5",11,0)
 .  D:($Y+2>IOSL) HDR^ESPORP Q:END
"RTN","ESPORP5",12,0)
 .  D ^DIWP
"RTN","ESPORP5",13,0)
 G:END EXIT
"RTN","ESPORP5",14,0)
 D ^DIWW
"RTN","ESPORP5",15,0)
 K ^UTILITY($J,"W") S DIWL=3,DIWR=78,DIWF="W",IEN=0
"RTN","ESPORP5",16,0)
 D MIN^ESPORP(2) G:END EXIT
"RTN","ESPORP5",17,0)
 D LINES^ESPORP(2) G:END EXIT W ?10,"INITIAL OBSERVATION:" D LINES^ESPORP(2) G:END EXIT
"RTN","ESPORP5",18,0)
 F ESPN=1:1 S IEN=$O(^ESP(912,ESPID,72,IEN)) Q:IEN'>0  S X=^(IEN,0) D  Q:END
"RTN","ESPORP5",19,0)
 .  D:($Y+2>IOSL) HDR^ESPORP Q:END
"RTN","ESPORP5",20,0)
 .  D ^DIWP
"RTN","ESPORP5",21,0)
 G:END EXIT
"RTN","ESPORP5",22,0)
 D ^DIWW
"RTN","ESPORP5",23,0)
 ;
"RTN","ESPORP5",24,0)
 K ^UTILITY($J,"W") S DIWL=3,DIWR=78,DIWF="W",IEN=0
"RTN","ESPORP5",25,0)
 D MIN^ESPORP(8) G:END EXIT
"RTN","ESPORP5",26,0)
 D LINES^ESPORP(2) G:END EXIT W ?10,"INVESTIGATION:" D LINES^ESPORP(2) G:END EXIT
"RTN","ESPORP5",27,0)
 F ESON=1:1 S IEN=$O(^ESP(912,ESPID,73,IEN)) Q:IEN'>0  S X=^(IEN,0) D  Q:END
"RTN","ESPORP5",28,0)
 .  D:($Y+2>IOSL) HDR^ESPORP Q:END
"RTN","ESPORP5",29,0)
 .  D ^DIWP
"RTN","ESPORP5",30,0)
 G:END EXIT
"RTN","ESPORP5",31,0)
 D ^DIWW
"RTN","ESPORP5",32,0)
 ;
"RTN","ESPORP5",33,0)
 K ^UTILITY($J,"W") S DIWL=3,DIWR=78,DIWF="W",IEN=0
"RTN","ESPORP5",34,0)
 D MIN^ESPORP(10) G:END EXIT
"RTN","ESPORP5",35,0)
 D LINES^ESPORP(2) G:END EXIT W ?10,"DISPOSITION:" D LINES^ESPORP(2) G:END EXIT
"RTN","ESPORP5",36,0)
 F ESPN=1:1 S IEN=$O(^ESP(912,ESPID,74,IEN)) Q:IEN'>0  S X=^(IEN,0) D  Q:END
"RTN","ESPORP5",37,0)
 .  D:($Y+2>IOSL) HDR^ESPORP Q:END
"RTN","ESPORP5",38,0)
 .  D ^DIWP
"RTN","ESPORP5",39,0)
 G:END EXIT
"RTN","ESPORP5",40,0)
 D ^DIWW
"RTN","ESPORP5",41,0)
SIG D MIN^ESPORP(5) G:END EXIT
"RTN","ESPORP5",42,0)
 D LINES^ESPORP(5) G:END EXIT
"RTN","ESPORP5",43,0)
 S DIC="^ESP(912,",DA=ESPID,DR=".06",DIQ(0)="I" D EN^DIQ1
"RTN","ESPORP5",44,0)
 S ESPOFF=$G(^UTILITY("DIQ1",$J,912,DA,.06,"I"))
"RTN","ESPORP5",45,0)
 G:ESPOFF']"" FOL
"RTN","ESPORP5",46,0)
 S DIC="^VA(200,",DA=ESPOFF,DR="20.2;910.1",DIQ(0)="E" D EN^DIQ1
"RTN","ESPORP5",47,0)
 D LINES^ESPORP() G:END EXIT
"RTN","ESPORP5",48,0)
 W $G(^UTILITY("DIQ1",$J,200,DA,20.2,"E")),"   # ",BADGE
"RTN","ESPORP5",49,0)
 D LINES^ESPORP() G:END EXIT  W "INVESTIGATING OFFICER"
"RTN","ESPORP5",50,0)
FOL ;PRINT FOLLOW-UP NOTES
"RTN","ESPORP5",51,0)
 G:'$D(^ESP(912,ESPID,130)) EXIT
"RTN","ESPORP5",52,0)
 D HDR^ESPORP G:END EXIT
"RTN","ESPORP5",53,0)
 F ESPN=0:0 S ESPN=$O(^ESP(912,ESPID,130,ESPN)) Q:ESPN'>0!(END)  D
"RTN","ESPORP5",54,0)
 .  D HDR^ESPORP:$Y+10>IOSL&(ESPN'=1) Q:END
"RTN","ESPORP5",55,0)
 .  D LINES^ESPORP(1) Q:END  W "FOLLOW-UP NOTES:" D LINES^ESPORP(2) Q:END
"RTN","ESPORP5",56,0)
 .  K ^UTILITY($J,"W") S DIWL=3,DIWR=78,DIWF="W",IEN=0
"RTN","ESPORP5",57,0)
 .  F ESPN1=1:1 S IEN=$O(^ESP(912,ESPID,130,ESPN,10,IEN)) Q:IEN'>0  S X=^(IEN,0) D  Q:END
"RTN","ESPORP5",58,0)
 .  .  D:($Y+2>IOSL) HDR^ESPORP Q:END
"RTN","ESPORP5",59,0)
 .  .  D ^DIWP
"RTN","ESPORP5",60,0)
 .  Q:END
"RTN","ESPORP5",61,0)
 .  D ^DIWW
"RTN","ESPORP5",62,0)
 .  S DIC="^ESP(912,"_ESPID_",130,",DA=ESPN,DR=".01",DIQ(0)="I" D EN^DIQ1
"RTN","ESPORP5",63,0)
 .  S ESPOFF=$G(^UTILITY("DIQ1",$J,912.17,DA,.01,"I"))
"RTN","ESPORP5",64,0)
 .  Q:ESPOFF']""
"RTN","ESPORP5",65,0)
 .  S DIC="^VA(200,",DA=ESPOFF,DR="20.2;910.1",DIQ(0)="E" D EN^DIQ1
"RTN","ESPORP5",66,0)
 .  D LINES^ESPORP(5) Q:END
"RTN","ESPORP5",67,0)
 .  W $G(^UTILITY("DIQ1",$J,200,DA,20.2,"E")),"   # ",$G(^UTILITY("DIQ1",$J,200,DA,910.1,"E"))
"RTN","ESPORP5",68,0)
 .  D LINES^ESPORP(1) Q:END
"RTN","ESPORP5",69,0)
 .  W "FOLLOW-UP INVESTIGATOR"
"RTN","ESPORP5",70,0)
 .  D LINES^ESPORP(5) Q:END
"RTN","ESPORP5",71,0)
EXIT D ^%ZISC
"RTN","ESPORP5",72,0)
 K CL,DA,DIC,DIQ,DIR,DIRUT,DIWF,DIWL,DIWR,ESPDOB,ESPDOBP,DR,DTOUT,DUOUT,END,ESPDTR,ESPID,ESPFN,ESON,ESPN,ESPN1,ESPOFF,IEN,PAGE,SSN,X,Y,Z,POP
"RTN","ESPORP5",73,0)
 K ^UTILITY("DIQ1",$J)
"RTN","ESPORP5",74,0)
 Q
"UP",916,916.03,-1)
916^2
"UP",916,916.03,0)
916.03
"UP",916,916.31,-2)
916^2
"UP",916,916.31,-1)
916.03^1
"UP",916,916.31,0)
916.31
"VER")
8.0^22
"^DD",912,912,.06,0)
INVESTIGATING OFFICER^R*P200'^VA(200,^0;6^S DIC("S")="I $D(^VA(200,""AK.ESP POLICE"",$P(^(0),U)))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",912,912,.06,1,0)
^.1
"^DD",912,912,.06,1,1,0)
^^TRIGGER^912^.11
"^DD",912,912,.06,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^ESP(912,D0,0)):^(0),1:"") S X=$P(Y(1),U,11),X=X S DIU=X K Y S X=DIV S X=$$SET^ESPOFF(DIV,1) S DIH=$G(^ESP(912,DIV(0),0)),DIV=X S $P(^(0),U,11)=DIV,DIH=912,DIG=.11 D ^DICR
"^DD",912,912,.06,1,1,2)
Q
"^DD",912,912,.06,1,1,"%D",0)
^^2^2^3040120^
"^DD",912,912,.06,1,1,"%D",1,0)
The officer field triggers a pull from the New Person file for badge 
"^DD",912,912,.06,1,1,"%D",2,0)
number.
"^DD",912,912,.06,1,1,"CREATE VALUE")
S X=$$SET^ESPOFF(DIV,1)
"^DD",912,912,.06,1,1,"DELETE VALUE")
NO EFFECT
"^DD",912,912,.06,1,1,"DT")
3040120
"^DD",912,912,.06,1,1,"FIELD")
BADGE
"^DD",912,912,.06,1,2,0)
^^TRIGGER^912^.12
"^DD",912,912,.06,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^ESP(912,D0,0)):^(0),1:"") S X=$P(Y(1),U,12),X=X S DIU=X K Y S X=DIV S X=$$SET^ESPOFF(DIV,2) S DIH=$G(^ESP(912,DIV(0),0)),DIV=X S $P(^(0),U,12)=DIV,DIH=912,DIG=.12 D ^DICR
"^DD",912,912,.06,1,2,2)
Q
"^DD",912,912,.06,1,2,"CREATE VALUE")
S X=$$SET^ESPOFF(DIV,2)
"^DD",912,912,.06,1,2,"DELETE VALUE")
NO EFFECT
"^DD",912,912,.06,1,2,"DT")
3040121
"^DD",912,912,.06,1,2,"FIELD")
RANK
"^DD",912,912,.06,3)
Answer must be [3-30 characters].
"^DD",912,912,.06,12)
Select a currently assigned police officer.
"^DD",912,912,.06,12.1)
S DIC("S")="I $D(^VA(200,""AK.ESP POLICE"",$P(^(0),U)))"
"^DD",912,912,.06,21,0)
^^3^3^2931001^^^^
"^DD",912,912,.06,21,1,0)
Enter the police officer who investigated this offense.  The officer's  
"^DD",912,912,.06,21,2,0)
name must already be entered into the NEW PERSON file (200) and must
"^DD",912,912,.06,21,3,0)
also be assigned the ESP POLICE Security Key.
"^DD",912,912,.06,"DT")
3040121
"^DD",912,912,.11,0)
BADGE NUMBER^NJ8,0^^0;11^K:+X'=X!(X>99999999)!(X<1)!(X?.E1"."1.N) X
"^DD",912,912,.11,.1)
BADGE
"^DD",912,912,.11,3)
Type a number between 1 and 99999999, 0 Decimal Digits
"^DD",912,912,.11,5,1,0)
912^.06^1
"^DD",912,912,.11,9)
^
"^DD",912,912,.11,21,0)
^^3^3^3040114^
"^DD",912,912,.11,21,1,0)
Investigator badge number
"^DD",912,912,.11,21,2,0)
 
"^DD",912,912,.11,21,3,0)
UNEDITABLE
"^DD",912,912,.11,"DT")
3040114
"^DD",912,912,.12,0)
RANK^F^^0;12^K:$L(X)>30!($L(X)<2) X
"^DD",912,912,.12,.1)
RANK TEXT
"^DD",912,912,.12,3)
Enter the investigator's rank [2-30 characters]
"^DD",912,912,.12,5,1,0)
912^.06^2
"^DD",912,912,.12,9)
^
"^DD",912,912,.12,21,0)
^^3^3^3040114^
"^DD",912,912,.12,21,1,0)
Enter the VA investigator's assigned rank designation.
"^DD",912,912,.12,21,2,0)
 
"^DD",912,912,.12,21,3,0)
Uneditable
"^DD",912,912,.12,"DT")
3040114
"^DD",916,916,3,0)
WATCH^916.03S^^2;0
"^DD",916,916,3,21,0)
^^2^2^2930726^^^
"^DD",916,916,3,21,1,0)
This field is used to record the police officers assigned to
"^DD",916,916,3,21,2,0)
the watch or work shift that is making the Daily Journal entries.
"^DD",916,916,3,22)

"^DD",916,916.03,0)
WATCH SUB-FIELD^^1^2
"^DD",916,916.03,0,"NM","WATCH")

"^DD",916,916.03,.01,0)
WATCH^MS^A:WATCH A;B:WATCH B;C:WATCH C;^0;1^Q
"^DD",916,916.03,.01,1,0)
^.1
"^DD",916,916.03,.01,1,1,0)
916.03^B
"^DD",916,916.03,.01,1,1,1)
S ^ESP(916,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",916,916.03,.01,1,1,2)
K ^ESP(916,DA(1),2,"B",$E(X,1,30),DA)
"^DD",916,916.03,.01,3)
You must select from the available shift codes.
"^DD",916,916.03,.01,21,0)
^^4^4^2930504^^
"^DD",916,916.03,.01,21,1,0)
Enter the three shifts for each day, i.e., Watch A, Watch B and
"^DD",916,916.03,.01,21,2,0)
Watch C.  Time elements associated with each of the shifts have
"^DD",916,916.03,.01,21,3,0)
not been included, since there is a variance at different field
"^DD",916,916.03,.01,21,4,0)
stations.
"^DD",916,916.03,.01,"DT")
2930330
"^DD",916,916.03,1,0)
OFFICER^916.31P^^1;0
"^DD",916,916.03,1,21,0)
^^2^2^2930708^
"^DD",916,916.03,1,21,1,0)
This field is used to list all officers assigned to a special
"^DD",916,916.03,1,21,2,0)
watch or work shift.
"^DD",916,916.31,0)
OFFICER SUB-FIELD^^.03^3
"^DD",916,916.31,0,"NM","OFFICER")

"^DD",916,916.31,.01,0)
OFFICER^M*P200'^VA(200,^0;1^S DIC("S")="I $D(^VA(200,""AK.ESP POLICE"",$P(^(0),U)))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",916,916.31,.01,1,0)
^.1
"^DD",916,916.31,.01,1,1,0)
916.31^B
"^DD",916,916.31,.01,1,1,1)
S ^ESP(916,DA(2),2,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",916,916.31,.01,1,1,2)
K ^ESP(916,DA(2),2,DA(1),1,"B",$E(X,1,30),DA)
"^DD",916,916.31,.01,1,2,0)
^^TRIGGER^916.31^.02
"^DD",916,916.31,.01,1,2,1)
K DIV S DIV=X,D0=DA(2),DIV(0)=D0,D1=DA(1),DIV(1)=D1,D2=DA,DIV(2)=D2 S Y(1)=$S($D(^ESP(916,D0,2,D1,1,D2,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X=DIV S HX=X,X=$$SET^ESPCRJO(HX,1) X ^DD(916.31,.01,1,2,1.4)
"^DD",916,916.31,.01,1,2,1.4)
S DIH=$G(^ESP(916,DIV(0),2,DIV(1),1,DIV(2),0)),DIV=X S $P(^(0),U,2)=DIV,DIH=916.31,DIG=.02 D ^DICR
"^DD",916,916.31,.01,1,2,2)
Q
"^DD",916,916.31,.01,1,2,"CREATE VALUE")
S HX=X,X=$$SET^ESPCRJO(HX,1)
"^DD",916,916.31,.01,1,2,"DELETE VALUE")
NO EFFECT
"^DD",916,916.31,.01,1,2,"DT")
3040120
"^DD",916,916.31,.01,1,2,"FIELD")
BADGE
"^DD",916,916.31,.01,1,3,0)
^^TRIGGER^916.31^.03
"^DD",916,916.31,.01,1,3,1)
K DIV S DIV=X,D0=DA(2),DIV(0)=D0,D1=DA(1),DIV(1)=D1,D2=DA,DIV(2)=D2 S Y(1)=$S($D(^ESP(916,D0,2,D1,1,D2,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X=DIV S HX=X,X=$$SET^ESPCRJO(HX,2) X ^DD(916.31,.01,1,3,1.4)
"^DD",916,916.31,.01,1,3,1.4)
S DIH=$G(^ESP(916,DIV(0),2,DIV(1),1,DIV(2),0)),DIV=X S $P(^(0),U,3)=DIV,DIH=916.31,DIG=.03 D ^DICR
"^DD",916,916.31,.01,1,3,2)
Q
"^DD",916,916.31,.01,1,3,"CREATE VALUE")
S HX=X,X=$$SET^ESPCRJO(HX,2)
"^DD",916,916.31,.01,1,3,"DELETE VALUE")
NO EFFECT
"^DD",916,916.31,.01,1,3,"DT")
3040223
"^DD",916,916.31,.01,1,3,"FIELD")
RANK
"^DD",916,916.31,.01,3)
You must select from currently assigned police officers.
"^DD",916,916.31,.01,12)
Select a currently assigned police officer.
"^DD",916,916.31,.01,12.1)
S DIC("S")="I $D(^VA(200,""AK.ESP POLICE"",$P(^(0),U)))"
"^DD",916,916.31,.01,21,0)
^^3^3^2930714^^^
"^DD",916,916.31,.01,21,1,0)
Enter the names of all officers currently assigned to work each
"^DD",916,916.31,.01,21,2,0)
shift.  The officers' names must be contained within the NEW PERSON
"^DD",916,916.31,.01,21,3,0)
file (200) and must also be assigned the ESP POLICE Security Key.
"^DD",916,916.31,.01,"DT")
3040223
"^DD",916,916.31,.02,0)
BADGE NUMBER^NJ6,0^^0;2^K:+X'=X!(X>999999)!(X<1)!(X?.E1"."1.N) X
"^DD",916,916.31,.02,.1)
OFFICER BADGE NUMBER
"^DD",916,916.31,.02,3)
Type a number between 1 and 999999, 0 Decimal Digits
"^DD",916,916.31,.02,5,1,0)
916.31^.01^2
"^DD",916,916.31,.02,9)
^
"^DD",916,916.31,.02,21,0)
^^3^3^3040115^
"^DD",916,916.31,.02,21,1,0)
Officer badge number
"^DD",916,916.31,.02,21,2,0)
 
"^DD",916,916.31,.02,21,3,0)
UNEDITABLE
"^DD",916,916.31,.02,"AUDIT")
n
"^DD",916,916.31,.02,"DT")
3040115
"^DD",916,916.31,.03,0)
RANK^F^^0;3^K:$L(X)>50!($L(X)<2) X
"^DD",916,916.31,.03,.1)
OFFICER RANK
"^DD",916,916.31,.03,3)
Answer must be 2-50 characters in length
"^DD",916,916.31,.03,5,1,0)
916.31^.01^3
"^DD",916,916.31,.03,9)
^
"^DD",916,916.31,.03,21,0)
^^3^3^3040115^
"^DD",916,916.31,.03,21,1,0)
VA officer assigned rank
"^DD",916,916.31,.03,21,2,0)
 
"^DD",916,916.31,.03,21,3,0)
UNEDITABLE
"^DD",916,916.31,.03,"DT")
3040115
**END**
**END**

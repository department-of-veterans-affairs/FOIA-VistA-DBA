$TXT Created by HARRIS,DONNA H at DEVDEN.ISC-ALBANY.VA.GOV  (KIDS) on THURSDAY, 01/06/00 at 09:48
=============================================================================
Run Date: JAN 28, 2000                     Designation: IBD*3*34
Package : IBD - AUTOMATED INFO  SYSPriority: Mandatory
Version : 3        SEQ #25                      Status: Released
=============================================================================


Subject: FIX LISTS DISPLAYED IN CPRS

Category: 
  - Routine

Description: 
============

 AICS provides the packages PCE and CPRS the ability to display to users
 the lists of items that are printed on encounter forms.  This
 functionality then provides some consistency to all the Ambulatory Care
 data capture for sites that use encounter forms. A number of problems have
 been reported that relate to the display of this data in these packages.
 This patch corrects the following problems or adds the following
 functionality:
  
  1. It was possible that the display order for groups of items within a
 selection list (i.e., procedures) on printed encounter forms did not
 match the display order in CPRS GUI.  This was caused by using the
 internal entry number to sort groups rather than the user specified
 display order. (NOIS: SUX-0399-40924, HUN-0199-21520, WPB-0299-31470,
 TUC-0899-62524)
  
  2. If the first character of a selection in a group began with an alpha
 character, it was possible for the header to not appear.  If the entire
 group consisted of items with codes that began with alpha characters then
 the whole group may not appear. (NOIS: SUX-0399-40924, HUN-0199-21520,
 NOL-0899-70058, WIC-0599-40354, HIN-0899-41280, NYH-1099-10637)
  
 3. If a selection was duplicated within an encounter form, it would not
 appear (in other packages) after the first occurrence. In other words, if
 a selection was placed on the form in multiple places, the additional
 occurrences would be removed. (NOIS: WPB-0799-30265, HIN-0899-41280)
  
 4. Occasionally there were Allocation errors generated when long
 (generally a full page) lists were processed. (NOIS: WAS-0198-20270)
  
 5. Some sites have Type of Visit blocks printed on encounter forms but do
 not see the list in CPRS.  This occurs when the list is pulled directly
 from the CPT (#81) file rather than the TYPE OF VISIT (#357.69) file. With
 this patch, the software will first look for a selection list containing
 entries from the TYPE OF VISIT (#357.69) file.  If nothing is found, it
 will look for a selection list based on CPT codes whose name or printed
 heading includes either "Type of Visit" or "Visit Type".  If nothing is 
 found, a selection list will be created from comparing the CPT (#81) file 
 and the TYPE OF VISIT (#357.69) file.
 NOTE: BLOCK NAMES OR HEADERS NOT  CONTAINING EXACT WORDING ("Type of Visit"
 or "Visit Type") COULD RESULT  IN MULTIPLE LISTS BEING DISPLAYED.
 (NOIS: SDC-1298-62613, NYH-1099-10637, ALX-1099-71674)
  
 6. Some sites have Diagnosis blocks that use the Clinical Lexicon as a
 main reference point instead of the Diagnosis file and they did not see
 these on the Diagnosis list in CPRS.  To fix this, if no diagnosis entries
 are found on an encounter form, AICS will attempt to pull the list using
 the Clinic Common Problems type toolkit block (where the Lexicon is used).
 (NOIS: LON-0499-62578)
  
 7. When the clinic name and patient name are long, an Invalid Subscript
 Error could occur.  (NOIS: MIN-0599-41536, LAH-0799-61781, NYH-1199-10853,
 MWV-1099-20690)
  
 8. Enhancements to Integration Agreement #1296 (GETLST^IBDF18A) output
 array are listed below.
  
     Narrative to Send to PCE (instead of printed text) field (2.01) in
     file 357.3, was added as piece 6 of @ary@(n).
  
     If additional codes for an item (diagnosis) are added to item, they
     are added as pieces 7 and 8 of @ary@(n). (NOIS: LON-0199-62180)
  
     If item was a clinical lexicon item, the associated clinical lexicon
     ien is added as piece 9 during the conversion process.
  
     Place holders are sent as group headers padded with 2 spaces if the
     place holder has "USE AS SUBHEADER" marked "yes".
  
     MODIFIED OUTPUT ARRAY DESCRIPTION:
        -- output  The format of the returned array is as follows
          @ARY@(0) = count of array element (0 if nothing found)
          @ARY@(1) = ^group header or place holder
          @ARY@(2) = P1 := cpt or icd code / ien of other items
                     P2 := user defined text
                     P6 := user defined expanded text to send to PCE
                     P7 := second code or item defined for line item
                     P8 := third code or item defined for line item
                     P9 := associated clinical lexicon term
          @ARY@(k) = ^next group header
        @ARY@(k+1) = problem ien or cpt or icd code^user defined text
  
  If installed during the normal work day it is recommended that the
  following menu options (File #19) and all of their descendants be
  disabled to prevent possible conflicts while running the KIDS Install.
  Other DHCP users will not be affected.
   
       Clinic Setup/Edit Forms [IBDF CLINIC SETUP/EDIT FORMS]
  
 =======================================================================
 Y2K Waiver ID#:  Y2KW0001               Y2K Waiver Status: Approved
      *  This patch may be installed during the Y2K Moratorium, either
         BEFORE 12/15/99 or AFTER 1/15/2000.
 =======================================================================
  
    Install time - Less than 5 minutes
  
 ************************ INSTALLATION INSTRUCTIONS *************************
  
  1. LOAD TRANSPORT GLOBAL
     ---------------------
     Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
  
  2. DISABLE ROUTINE MAPPING (DSM for Open VMS sites only)
     ----------------------------------------
     Disable routine mapping on all systems for the routines listed in Step
     3 below.
  
     NOTE: If the routines included in this patch are not currently in your
     mapped routine set, please skip this step.
  
  3. ROUTINES SENT WITH PATCH
     ------------------------
     The following is a list of the routine(s) included in this patch.  The
     second line of each of these routine(s) will look like:
  
      <tab>;;3.0;AUTOMATED INFO COLLECTION SYS;**[patch list]**;APR 24, 1997
  
                             CHECK^XTSUMBLD results
  
     Routine name      Before Patch          After Patch         Patch List
     ============      ============          ===========         ==========
     IBDF18A                3427205              8370390             34
     IBDF18A1               8968373              8931687             34
     IBDF1BA               11438134             11437282            25,34
     IBDFQSL2               5616996              2897587             34
     IBDFRPC2              13348413             12592283             34
     IBDY334                    N/A               491788             34
  
  4. START UP KIDS
     -------------
     Start up the Kernel Installation and Distribution System Menu
     [XPD MAIN]:
  
         Edits and Distribution ...
         Utilities ...
         Installation ...
  
       Select Kernel Installation & Distribution System Option: INStallation
                                                                ---
  
     1      Load a Distribution
     2      Verify Checksums in Transport Global
     3      Print Transport Global
     4      Compare Transport Global to Current System
     5      Backup a Transport Global
     6      Install Package(s)
            Restart Install of Package(s)
            Unload a Distribution
  
     Select Installation Option:
  
  5. SELECT INSTALLATION OPTION
     --------------------------
     NOTE: The following are OPTIONAL (When prompted for the INSTALL NAME,
           enter IBD*3.0*34): 
  
     a. Backup a Transport Global - This option will create a backup message
        of any routines exported with this patch. It will not backup any 
        other changes such as DD's or templates.
     b. Compare Transport Global to Current System - This option will allow
        you to view all changes that will be made when the patch is 
        installed. It compares all components of this patch (routines, DD's,
        templates, etc.).
     c. Verify Checksums in Transport Global - This option will allow you to
        ensure the integrity of the routines that are in the transport 
        global.
  
  6. INSTALL KIDS PATCH
     ------------------
     a. Choose the Install Package(s) option of the Installation menu to 
        start the patch install.
     b. When prompted 'Want KIDS to INHIBIT LOGONs during the install?',
        answer NO.
     c. When prompted 'Want to DISABLE Scheduled Options and Menu Options?
        YES//', take the default (YES).
     d. When prompted "Enter options you wish to mark as 'Out of Order':",
        enter the following option:
  
        * Clinic Setup/Edit Forms [IBDF CLINIC SETUP/EDIT FORMS] 
    
     e. When prompted 'Enter protocols you wish to mark as 'Out of
        Order':', press return.
  
  7. REBUILD MAPPED ROUTINES (DSM for Open VMS sites only)
     -----------------------------------------------------
     Optional - If you disabled the routines in Step 2 above.

Routine Information:
====================

Routine Name:
  - IBDF18A


Routine Checksum:

Routine Name:
  - IBDF18A1


Routine Checksum:

Routine Name:
  - IBDFQSL2


Routine Checksum:

Routine Name:
  - IBDFRPC2


Routine Checksum:

Routine Name:
  - IBDF1BA


Routine Checksum:

Routine Name:
  - IBDY334


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : NIXON,ANTOINE                  Date Entered : MAR 12, 1999
Completed By: SURI,ASHWANI                  Date Completed: JAN 24, 2000
Released By : DU GARD,ROBERT               Date Released : JAN 28, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

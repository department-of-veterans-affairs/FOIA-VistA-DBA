$TXT Created by KOPP,TERRY at PASVFF.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 10/03/06 at 15:18
=============================================================================
Run Date: OCT 04, 2006                     Designation: DG*5.3*689
Package : DG - REGISTRATION                   Priority: EMERGENCY
Version : 5.3       SEQ #637                    Status: Released
                  Compliance Date: OCT 10, 2006
=============================================================================

Associated patches: (v)DG*5.3*673      install with patch       `DG*5.3*689'
                    (v)DG*5.3*702      install with patch       `DG*5.3*689'

Subject: Operation Enduring & Iraqi Freedom Phase II

Category: 
  - Routine
  - Data Dictionary
  - Enhancement ()

Description:
============

 I. OVERVIEW
  
 This patch introduces Phase II of changes and enhancements to the 
 Registration V. 5.3 package in support of the Operation Enduring & Iraqi
 Freedom (OEF/OIF) initiative.
  
  
 II. ASSOCIATED REMEDY TICKETS & NEW SERVICE REQUESTS
  
 The following section lists the Remedy tickets and/or New Service Requests
 associated with this patch.
  
 1. Associated Remedy Tickets:
    -----------------------------------------
    NONE
  
 2. Associated New Service Request(s):
    -----------------------------------------
    NONE 
  
 III. FUNCTIONAL OVERVIEW
  
 The following is an overview of the changes and primary functionality that
 will be delivered in this patch:
  
 This patch redesigns commonly used screens that will impact end users of
 the following VistA options:
 - Register a Patient [DG REGISTER PATIENT]
 - View Registration Data [DG REGISTRATION VIEW]
 - Load/Edit Patient Data [DG LOAD/EDIT PATIENT DATA]
  
 Screen 6 has been redesigned. It is recommended that users of the above
 options receive training and/or review the documentation changes
 referenced in this patch prior to installation.
   
 1.  Three new conflicts were added to VistA Patient file (#2) in 
     previously released patch DG*5.3*673. These new conflicts are now 
     being added to Screen 6 of options Register a Patient [DG REGISTER 
     PATIENT],View Registration Data [DG REGISTRATION VIEW], and 
     Load/Edit Patient Data[DG LOAD/EDIT PATIENT DATA].
       The new conflicts are:
         OEF: Operation Enduring Freedom
         OIF: Operation Iraqi Freedom
         UNKNOWN OEF/OIF: Veteran is known to have served in EITHER OEF or
              OIF, but there is not enough known data to specifically
              assign the operation.  This is a display-only conflict 
              period and can only be added, edited or deleted by HEC.
  
 2.  Registration Screen 6 is redesigned because the screen lacked space to
     display all of the new OEF/OIF information. Items previously displayed
     on Screen 6 have been grouped into categories. A category must now be 
     selected from Screen 6 to bring up a secondary screen to view and edit
     the data. The Service branch(es) and dates still appear at the top of
     Screen 6.  An example of the new screen 6 layout can be found in the 
     Revised PIMS V. 5.3 Registration User Manual (see below for the 
     location of this document).
  
     a. The exposure fields for Agent Orange, Ionizing Radiation,
        Environmental Contaminants, and N/T Radium have been removed as
        individual entries on the screen and have been grouped under a
        new group called "Environmental Factors".  When this group is
        selected, it will expand to display environmental factors the
        veteran claimed exposure to.  These will include:
               (1) A/O Exp. (2) Ion Rad. (3) Env Contam.
               (4) N/T Radium (<status of verification>)
  
        The text (incomplete) will be displayed next to the specific
        environmental factors 1-3 if all the required data fields for the
        corresponding environmental factor have not been entered. In the
        following example, the veteran has claimed all four exposures, but
        only the Env. Contam. factor does not have all the required fields:
               (1) A/O Exp. (2) Ion Rad. (3) Env Contam.(incomplete)
               (4) N/T Radium (PENDING DIAGNOSIS)
  
        Selecting this new group on screen 6 will cause a sub-screen
        to appear where all the individual fields for all environmental
        factors are displayed and can then be selected for entry/edit.
  
    b.  The individual conflict location fields for Vietnam, Lebanon,
        Grenada, Panama, Gulf War, Somalia, and Yugoslavia have been
        removed from screen 6 and replaced by a new selectable group called
        "Conflict Locations".  The new OEF and OIF conflict data has been
        added to this new group.  Up to 4 of the veteran's conflict periods
        are displayed on screen 6 under the new "Conflict Locations" group.
        The OEF/OIF conflict data is displayed first, followed by the other
        conflicts on file for the patient in alphabetical order by name of
        the conflict. The data displayed here consists of the conflict
        location, from date and to date.  If more than 4 conflict periods
        exist for the veteran, the message:
  
        '++Additional Conflict Locations exist for this patient' 
  
        is displayed as the fifth line under "Conflict Locations".
        Selecting this new entry on screen 6 will cause a sub-screen to
        appear where all conflicts are displayed.  The individual fields
        for any conflicts, including the new OEF and OIF conflicts, can
        then be selected for entry/edit.       
        If an OIF/OEF episode does not fall within the range of the 
        veteran's military service episode, '**Not within MSE' will
        display next to that episode's dates.  A record with this
        inconsistency will prevent the record's transmission to HEC
        until the data is corrected in VistA.
  
    c.  VistA users can not directly edit or delete an OEF/OIF value of 
        UNKNOWN. However, the VistA user can enter an OEF or OIF episode
        that corresponds EXACTLY to the dates of an UNKNOWN OEF/OIF
        episode. When this data is received at HEC, it will recognize the
        data match and will automatically delete the ambiguous record for
        UNKNOWN OEF/OIF and will send the new specific (OEF or OIF) data to
        the sites of record and delete the UNKNOWN OEF/OIF record at those
        sites. This UNKNOWN OEF/OIF record can also be edited manually by
        HEC staff on the HEC database, and the change or deletion will be
        transmitted to all sites of record and will be changed/deleted at
        the VistA sites.
  
    d. When entering/editing OEF, OIF, or UNKNOWN OEF/OIF conflict
       period, the same consistency checks are made as for the other
       conflict locations with the following exceptions:
               
           (1) The OEF, OIF, and UNKNOWN OEF/OIF dates cannot overlap each
               other (except for an EXACT match between an OIF and UNKNOWN
               OEF/OIF episode or between an OEF and UNKNOWN OEF/OIF
               episode). They may overlap other conflicts that are not OEF
               or OIF.
           (2) The OEF, OIF, or UNKNOWN OEF/OIF dates must fall within the
               time span of the veteran's first military service episode
               'from' date through the veteran's last military service
               episode 'to' date.  The OEF and OIF data are included in the
               fields presented to the user for editing inconsistencies if
               this inconsistency is detected upon exiting a veteran's
               registration record.
               Note this consistency check is ignored when VistA files are
               updated with OEF/OIF data from HEC. This means if this
               inconsistency exists as a result of OEF/OIF data being
               uploaded from HEC, it can only be corrected at the VistA
               site by contacting HEC to correct the OEF/OIF conflict data
               (and thus updating all VistA sites of record) or by
               adding/updating a missing or incorrect military service
               episode for the veteran in the registration screens.
               
    e. An OEF/ OIF record is locked and cannot be edited in VistA after
       it has been received from HEC via an HL7 upload.  If the data has
       been entered by the site, it is only editable until it is received
       again via an HL7 message when HEC updates all sites of record with
       the new data.  The site must contact HEC directly to discuss/correct
       any erroneous OEF/OIF data from an upload.
  
    f. Upon exiting the registration screens, if the inconsistency warning
       "82 - CONFLICT DT NOT WITHIN MSE" is displayed and the user chooses 
       to update the inconsistencies, the OEF/OIF data is displayed for
       editing in addition to the existing combat and conflict data.
  
    g. When using the option to view registration data (VIEW REGISTRATION DATA
       [DG REGISTRATION VIEW]) and when accessing screen 6, only an
       abbreviated list of conflicts and exposure factors are displayed.  To
       allow all data to be displayed, the edit groups 2 and 3 can be selected
       and the new subscreens are displayed in View only mode (no edits
       allowed).
  
  
 3.  Three new fields were added to the military service episode data by
     previously released patch DG*5.3*673. These fields will now be 
     accessible in the options Register a Patient [DG REGISTER PATIENT],
     View Registration Data [DG REGISTRATION VIEW], and Load/Edit Patient
     Data [DG LOAD/EDIT PATIENT DATA].
     a.  These fields are the service component (regular, national guard or
         activated reserve) for the veteran during a period of military 
         service.
     b.  These fields will be asked immediately after the entry of branch
         of service for the LAST, NTL and NNTL episodes.
     c.  If branch of service data is edited or deleted, the
         corresponding service component will be deleted.
     d.  If the SERVICE SECOND EPISODE? (#.3285) or SERVICE THIRD
         EPISODE? (#.32945) fields are 'NO', the corresponding service
         component field is deleted.
     e.  The service component can only be entered for a veteran if 
         the branch of service is ARMY, AIR FORCE, MARINES, COAST GUARD,
         NOAA, or USPHS. An ACTIVATED RESERVE service component is only
         valid for a branch of service of ARMY, AIR FORCE, MARINES, NAVY
         or COAST GUARD.  A NATIONAL GUARD service component is only
         valid for branch of service of ARMY or AIR FORCE.
     f.  If a new service component is added, it will be displayed
         immediately after the branch of service on Screen 6.
     g.  A service component cannot be added without a branch of service.
  
 4.   The API SVC^VADPT has been modified to include the new service 
     component data and the multiple instances of the new OEF/OIF data.
  
         a.  Service component data is returned in:
             VASV(6,6)=SERVICE COMPONENT [LAST] (#.32911) internal code^ 
                       external code value (i.e.: R^REGULAR)
             VASV(7,6)=SERVICE COMPONENT [NTL] (#.32912) internal code^
                       external code value
             VASV(8,6)=SERVICE COMPONENT [NNTL] (#.32913) internal code^
                       external code value
  
         b.  OIF conflict data is returned in:
             VASV(11)=the # of OIF conflict entries found for the veteran
                      [n = 1-> total number of OIF conflict entries]
             VASV(11,n,1)=SERVICE LOCATION (#.01) internal code=1^external
                          SERVICE LOCATION (i.e.: 1^OIF)
             VASV(11,n,2)=OEF/OIF FROM DATE (#.02) internal format^OEF/OIF
                          FROM DATE external format
             VASV(11,n,3)=OEF/OIF TO DATE (#.03) internal format^OEF/OIF
                          TO DATE external format
             Where 'n' is a sequential # for the OIF conflict
  
         c.  OEF conflict data is returned in:
             VASV(12)=the # of OEF conflict entries found for the veteran
                      [n = 1-> total number of OEF conflict entries]
             VASV(12,n,1)=SERVICE LOCATION (#.01) internal code=2^external
                          SERVICE LOCATION (i.e.: 2^OEF)
             VASV(12,n,2)=OEF/OIF FROM DATE (#.02) internal format^OEF/OIF
                          FROM DATE external format
             VASV(12,n,3)=OEF/OIF TO DATE (#.03) internal format^OEF/OIF
                          TO DATE external format
             Where 'n' is a sequential # for the OEF conflict 
  
         d.  UNKNOWN OEF/OIF conflict data is returned in:
             VASV(13)=the # of UNKNOWN OEF/OIF conflict entries found for
                      the veteran [n = 1-> total number of UNKNOWN OEF/OIF
                                   conflict entries]
             VASV(13,n,1)=SERVICE LOCATION (#.01) internal code=3^external
                          SERVICE LOCATION (i.e.: 3^UNKNOWN OEF/OIF)
             VASV(13,n,2)=OEF/OIF FROM DATE (#.02) internal format^OEF/OIF 
                          FROM DATE external format
             VASV(13,n,3)=OEF/OIF TO DATE (#.03) internal format^OEF/OIF
                          TO DATE external format
             Where 'n' is a sequential # for the UNKNOWN OEF/OIF conflict
  
 5.  A new MUMPS cross reference ACVCOM1 was added to the OEF/OIF TO DATE
     field (#.03) of the subfile SERVICE [OEF OR OIF] (#2.3215).  This
     cross reference updates the COMBAT VETERAN END DATE (#.5295) field
     when the OEF/OIF TO DATE field is entered or changed if:
  
          1.  The COMBAT VETERAN END DATE (#.5295) of the PATIENT file
              (#2) is null
  
     AND either 2 OR 3 is true:
  
          2. The SERVICE SEPARATION DATE [LAST] (#.327) is missing
  
          3. The SERVICE SEPARATION DATE [LAST] (#.327) is less than the
             OEF/OIF TO DATE (#.03 in subfile #2.3215)
                    
  
 IV. TECHNICAL COMPONENTS
  
 The following section describes the technical components being 
 exported with this patch.
  
 1. The following FILES will be modified.
  
  a. PATIENT (#2) file
     Modified Field:
     ==============
           FIELD #: .326  
        FIELD NAME: SERVICE ENTRY DATE [LAST]
      MODIFICATION: Change help text to include RESERVE/NG text
  
  b. PATIENT (#2) file
     Modified Field:
     ==============
           FIELD #: .3292
        FIELD NAME: SERVICE ENTRY DATE [NTL]
      MODIFICATION: Change help text to include RESERVE/NG text
  
  c. PATIENT (#2) file
     Modified Field:
     ==============
           FIELD #: .3297
        FIELD NAME: SERVICE ENTRY DATE [NNTL]
      MODIFICATION: Change help text to include RESERVE/NG text
  
  d. PATIENT (#2) file
     Modified Field:
     ==============
           FIELD #: .327
        FIELD NAME: SERVICE SEPARATION DATE [LAST]
      MODIFICATION: Change help text to include RESERVE/NG text
  
  e. PATIENT (#2) file
     Modified Field:
     ==============
           FIELD #: .3293
        FIELD NAME: SERVICE SEPARATION DATE [NTL]
      MODIFICATION: Change help text to include RESERVE/NG text
  
  f. PATIENT (#2) file
     Modified Field:
     ==============
           FIELD #: .3298
        FIELD NAME: SERVICE SEPARATION DATE [NNTL]
      MODIFICATION: Change help text to include RESERVE/NG text
  
  g. PATIENT (#2) file, Subfile 2.3215 (SERVICE [OEF OR OIF] #.3215)
     Modified Field:
     ==============
           FIELD #: .03
        FIELD NAME: OEF/OIF TO DATE
      MODIFICATION: Added a cross reference ACVCOM1, described above
  
  
 2. The following ROUTINE(s) will be added/modified.
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
    OLD CHECKSUM METHOD RESULTS:
  
      <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  DGRP6                 16604812             12098237     161,247,343,397,342
                                                              451,672,689
  DGRP6CL                    N/A             23207337             689
  DGRP6CL1                   N/A             15678074             689
  DGRP6CL2                   N/A             10077860             689
  DGRP6EF                    N/A              8369930             689
  DGRPCE                11614281             11637128     121,122,175,297,342
                                                              451,626,689
  DGRPCE1               31358153             34981797     108,226,470,454,489
                                                          505,522,451,632,689
  DGRPE                 27333162             28447896     32,114,139,169,175
                                                          247,190,343,397,342
                                                          454,415,489,506,244
                                                          547,522,528,555,508
                                                          451,626,638,624,677
                                                              672,702,689
  DGRPH                 21461508             19589704     114,343,397,415,489
                                                            545,638,624,689
  DGRPMS                10933466             11022862     451,626,646,673,689
  DGRPP                  9892719              9883287     92,147,343,404,397
                                                                489,689
  DGRPU                 17584644             16920162     33,114,489,624,672
                                                                  689
  DGRPV                  9113696              8968713     109,114,247,190,327
                                                          365,343,397,415,489
                                                          546,545,451,624,677
                                                                672,689
  VADPT0                 3583728              3635619     343,342,415,489,498
                                                                528,689
  VADPT4                19602798             21475445       343,342,528,689
  
                 # of new routines:  4
             # of routines changed: 11
  total # of routines in the patch: 15
  
  
  V. DOCUMENTATION RETRIEVAL
   
  Sites may retrieve the user documentation directly using FTP from the
  ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
     
                  Albany   : ftp.fo-albany.med.va.gov
                  Hines    : ftp.fo-hines.med.va.gov
            Salt Lake City : ftp.fo-slc.med.va.gov
    First Available Server : download.vista.med.va.gov (preferred method)
    
                                                                           
   The following files will be available:
     
        File Name                     Description
        ---------                     -----------      
  DG_5_3_P689_TM.PDF              Revised PIMS V. 5.3 Technical Manual 
  DG_5_3_P689_REG_UM.PDF          Revised PIMS V. 5.3 Registration User 
                                                      Manual
   
   
   Note:  Use Binary mode when transferring the .PDF files.
    
   The VistA Documentation Library [VDL] web site contains all end-user 
   manuals.  The address is http://www.va.gov/vdl/.
    
  
 VI. INSTALLATION INSTRUCTIONS
  
  * Environment Check:
  
     Programmer access is required for installing this patch.  Prior to 
     installation, the installer must ensure the DUZ(0) node of the DUZ
     array is set to the "@" symbol.
  
  * Users On the System: 
  
     This patch may be installed with users on the system, but should be
     loaded during non-peak hours to minimize disruption to users and to
     reduce the possibility of errors when the routines are updated.
  
  * Software Installation Time:
  
     The estimated installation time is less than 5 minutes during off peak
     hours.
  
  * Required Builds:
  
     The following is a list of REQUIRED builds for this KIDS
     distribution.  KIDS will not allow the installation of this patch
     without their prior installation.
  
     Required Build(s):
     ------------------
     DG*5.3*702
     DG*5.3*673    
  
  
  Installation Steps:
  ===================
  
   1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
      the KIDS distribution included with this message.
  
   2. From the 'Kernel Installation & Distribution System' menu, select the
      Installation menu.
  
   3. From this menu, you may now elect to use the following options (when
      prompted for INSTALL NAME, enter DG*5.3*689).
  
      a. Backup a Transport Global - This option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any changes such as DDs or templates.
  
      b. Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch is
         installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
  
      c. Verify Checksums in Transport Global - This option will allow you
         to ensure the integrity of the routines that are in the transport
         global.
  
      d. Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
   4. Use the Install Package(s) option and select package DG*5.3*689.
  
   5. When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
      Install? YES//', respond NO.
  
   6. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
      YES//', it is recommended you answer NO.
  
   7. When prompted to 'Want to DISABLE Scheduled Options, Menu Options,
      and Protocols? YES//', respond YES.  When prompted to select the
      options you would like to place out of order, enter the following:
  
        DG REGISTER PATIENT        Register a Patient
        DG LOAD PATIENT DATA       Load/Edit Patient Data
        DG REGISTRATION VIEW       View Registration Data
  
  
 VII. IMPLEMENTATION STEPS
  
 There are no special implementation steps to take after the successful
 installation of the software for Phase II of the Operation Enduring &
 Iraqi Freedom (OEF/OIF).
  
  
 VIII. TEST SITES
  
 The following sites participated in the testing of the DG*5.3*689 
 software.
  
  Test Site                             Alpha              Beta
  ------------------------              -----              ----
  North Texas (Large/Integrated)          X
  Washington, D.C.                        X
  Indianapolis                            X

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DGRP6
    Before: B21696130  After: B17663817  **161,247,343,397,342,451,672,689**
Routine Name: DGRP6CL
    Before:       n/a  After: B62064109  **689**
Routine Name: DGRP6CL1
    Before:       n/a  After: B35021800  **689**
Routine Name: DGRP6CL2
    Before:       n/a  After: B18050719  **689**
Routine Name: DGRP6EF
    Before:       n/a  After: B14465405  **689**
Routine Name: DGRPCE
    Before: B28667064  After: B28964060  **121,122,175,297,342,451,626,689**
Routine Name: DGRPCE1
    Before: B52840183  After: B58806369  **108,226,470,454,489,505,522,
                                          451,632,689**
Routine Name: DGRPE
    Before: B49305780  After: B60930744  **32,114,139,169,175,247,190,
                                          343,397,342,454,415,489,506,244,
                                          547,522,528,555,508,451,626,638,
                                          624,677,672,702,689**
Routine Name: DGRPH
    Before: B27125641  After: B24473030  **114,343,397,415,489,545,638,
                                          624,689**
Routine Name: DGRPMS
    Before: B48037248  After: B49590588  **451,626,646,673,689**
Routine Name: DGRPP
    Before: B23085136  After: B23860016  **92,147,343,404,397,489,689**
Routine Name: DGRPU
    Before: B61271859  After: B61935480  **33,114,489,624,672,689**
Routine Name: DGRPV
    Before: B17077361  After: B16870639  **109,114,247,190,327,365,343,
                                          397,415,489,546,545,451,624,677,
                                          672,689**
Routine Name: VADPT0
    Before: B12457338  After: B12629835  **343,342,415,489,498,528,689**
Routine Name: VADPT4
    Before: B28024676  After: B33593643  **343,342,528,689**

=============================================================================
User Information:
Entered By  : KOPP,TERRY M                  Date Entered  : NOV 15, 2005
Completed By: BARBER,HAROLDINE              Date Completed: OCT 04, 2006
Released By : HEUER,CINDY                   Date Released : OCT 04, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

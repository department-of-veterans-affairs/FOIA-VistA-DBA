$TXT Created by CASTLE,JOHN at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Wednesday, 03/08/06 at 12:19
=============================================================================
Run Date: MAY 15, 2006                     Designation: PSB*3*23
Package : PSB - BAR CODE MED ADMIN            Priority: Mandatory
Version : 3        SEQ #17                      Status: Released
                  Compliance Date: JUN 15, 2006
=============================================================================

Associated patches: (v)PSB*3*5     <<= must be installed BEFORE `PSB*3*23'
                    (v)PSB*3*22    <<= must be installed BEFORE `PSB*3*23'

Subject: FILE LOCKING FIX, AND PATCH REMOVAL DELETING GIVEN DOSE FIX

Category: 
  - Routine

Description:
============

 This patch addresses three issues, HD68121, HD113034, and HD90393.
  
 1.  HD68121 - An undefined variable error is created with the Missing Dose
 reports.  This error only appeared after the site converted to Cache'
 V.5.0.  A local site modification fixed the error, and that modification
 will become part of this national patch release.
  
 2.  HD113034 - A deleted dose happens when a medication patch (such as
 Fentanyl) is marked as REMOVED after initially being given to the patient.
 If you right-click the mouse on the order in the Bar Code Medication 
 Administration (BCMA), and mark the patch as "REMOVED", when you
 subsequently check the med log, the units given remains 1.  However, if
 you use the BCMA menu option FILE/EDIT Med Log and mark it "REMOVED", the
 units given becomes 0 and the audit trail shows "Doses given '1'
 deleted."  The correct value for units given is actually 1 (as
 right-clicking the mouse shows), because the medication was indeed given,
 but the patch was removed, not held or refused.
  
 3.  HD90393 - Addresses a printing problem with the PRN Effectiveness
 report when it is printed by Ward/Room-Bed.  When printing with this
 filter applied, the report prints in patient DFN order, not Ward/Room-Bed
 order.
  
  
 ASSOCIATED NOIS/REMEDY
 ======================
 HD68121  -  MIN-0704-40728 - Undefined Error in DQ+3^PSBMD
   HD103381 (DUPLICATE)
 HD113034                   - Removing Patch Results in Deleted Dose
 HD90393                    - PRN Effectiveness List Prints in Random Order
  
  
 ASSOCIATED E3R
 ==============
 N/A
  
  
 PARTICIPATING TEST SITES
 ========================
 Portland, OR
 Boise, ID
 Oklahoma City, OK
 Upstate NY, NY
  
  
 NOIS/REMEDY OVERVIEW
 ====================
 1.  HD68121 (HD103381 dup)
  
 Problem
 -------
 When printing the Missing Dose report, an undefined variable error occurs.
 The print routine is attempting to use the information in BCMA 
 MISSING DOSE REQUEST file (53.68) before that information is available.
  
 Resolution
 ----------
 Lock the BCMA MISSING DOSE REQUEST file(53.68) before attempting to
 use its information for printing the report.
  
 2.  HD113034
  
 Problem
 -------
 There is an inconsistency within BCMA with how it handles a patch
 medication being removed after administration.  Right-clicking the mouse
 to remove the patch keeps the units given at 1 (correct), while using
 menu option FILE/EDIT Med Log makes the units given be 0.
  
 Resolution
 -----------
 The right-clicking mouse method of removing a patch keeps the units given
 at the correct value of 1.  Therefore, the FILE/EDIT Med Log option
 will be corrected so it also keeps the units given at 1.
  
 3.  HD90393
  
 Problem
 -------
 When printed using the filter WARD/ROOM-BED, the PRN Effectiveness report
 appears to print in no real order.
  
 Resolution
 ----------
 There is a problem in the BCMA code that is causing the report to print
 based on the patient DFN, not the WARD/ROOM-BED.  This problem will be
 fixed so the report prints properly.
  
  
 TECHNICAL DESCRIPTION
 =====================
 1.  HD68121 (HD103381 dup)
  
 To RPC^PSBMD add L +^PSB(53.68,+PSBIENS) and L -^PSB(53.68,+PSBIENS)
  
 To DQ^PSBMD  add L +^PSB(53.68,PSBMD) and L -^PSB(53.68,PSBMD)
  
 2.  HD113034
  
 In UPDATED+71^PSBML2, add a condition to the $S to check for the
 transaction being a type "RM" for removal.  If it is a removal, keep
 the given number in PSBREC(PSBCNT) piece 4 instead of setting it to 0.
  
 3.  HD90393
  
 PRINT+29^PSBOPE contains an incorrect naked reference.  The fix is to
 extend the naked reference to the full global reference.
  
  
 INSTALLATION INSTRUCTIONS:
 =========================
 This patch can be loaded with users on the VistA system.  Installation 
 will take less than 1 minute.   Suggested time to install: non-peak
 requirement hours. BCMA Client users should not be accessing the Client
 Software.  Other GUI applications are not affected when this patch is
 installed.
  
    1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
    2. From the Kernel Installation & Distribution System menu, select
       the Installation menu option.
  
    3. From this menu, you may select to use the following options
       (when prompted for INSTALL NAME, enter PSB*3.0*23)
       a.  Verify Checksums in Transport Global - This option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
       b.  Print Transport Global - This option will allow you to view
           the components of the KIDS build.
       c.  Compare Transport Global to Current System - This option will
           allow you to view all changes that will be made when this patch
           is installed.  It compares all components of this patch
           (routines, DD's, templates, etc.).
       d.  Backup a Transport Global - This option will create a backup
           message of any routines exported with this patch. It will not
           backup any other changes such as DD's or templates.
  
    4. Use the Install Package(s) option and select the package PSB*3.0*23.
  
    5. When prompted "Want KIDS to INHIBIT LOGONs during the install?
       YES//" respond NO.
  
    6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//" respond NO.
  
 Install Example
 ===============
  
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME: PSB*3.0*23      Loaded from Distribution  12/13/05@15:12:22
      => PSB*3.0*23
  
 This Distribution was loaded on Dec 13, 2005@15:12:22 with header of 
    PSB*3.0*23
    It consisted of the following Install(s):
      PSB*3.0*23
 Checking Install for Package PSB*3.0*23
  
 Install Questions for PSB*3.0*23
  
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   TCP
  
  
  
                      PSB*3.0*23
  
  Install Started for PSB*3.0*23 : 
                Dec 13, 2005@15:14:34
  
 Build Distribution Date: Dec 13, 2005
  
  Installing Routines:
                Dec 13, 2005@15:14:35
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSB*3.0*23 Installed. 
                Dec 13, 2005@15:14:35
  
  Install Message sent #439183
           
   100%                 25             50             75               
 Complete  
  
  
 ROUTINE SUMMARY
 ===============
  
 The following is a list of the routines included in this patch.  The
  second line of each of these routines now looks like:
  
  <TAB>;;3.0;BAR CODE MED ADMIN;**[Patch List]**;Mar 2004
  
  
      CHECK^XTSUMBLD RESULTS
  
 Routine     Before Patch     After Patch     Patch List
 -------     ------------     -----------     ----------
 PSBMD           17319681        17399958     23
 PSBML2          31450359        31602343     3,18,22,23
 PSBOPE           7022803         7153754     5,23

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSBMD
    Before: B70799803  After: B72605670  **23**
Routine Name: PSBML2
    Before: B76832649  After: B77106883  **3,18,22,23**
Routine Name: PSBOPE
    Before: B17071023  After: B17297866  **5,23**

=============================================================================
User Information:
Entered By  : CASTLE,JOHN                   Date Entered  : OCT 04, 2005
Completed By: CROSSMAN,PAM                  Date Completed: MAY 15, 2006
Released By : CAMPBELL,THOMAS               Date Released : MAY 15, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

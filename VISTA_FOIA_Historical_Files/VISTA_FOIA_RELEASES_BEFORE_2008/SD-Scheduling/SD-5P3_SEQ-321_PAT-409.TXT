$TXT Created by VILLELLA,ROSS at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 12/29/04 at 16:23
=============================================================================
Run Date: FEB 14, 2005                     Designation: SD*5.3*409
Package : SD - SCHEDULING                     Priority: Mandatory
Version : 5.3       SEQ #321                    Status: Released
                  Compliance Date: MAR 17, 2005
=============================================================================

Associated patches: (v)SD*5.3*351  <<= must be installed BEFORE `SD*5.3*409'

Subject: ACRP REPORT ERROR

Category: 
  - Routine

Description:
============

 This patch has been created to provide corrections to fix an error with
 the Outpatient Diagnosis/Procedure Code Search report.  
 This fix will be to correct the error that occurs if you enter a single 
 quote mark "'" at the IF prompt.
  
 ASSOCIATED NOIS:
 ===============
 N/A
  
 ASSOCIATED E3R(s):
 =================
 N/A
  
 PARTICIPATING TEST SITES:
 ========================
 Central Alabama HCS
 El Paso,TX
 Salisbury,NC
 Tomah,WI 
  
 NOIS OVERVIEW:
 =============
  
 1. SBY-1004-32200 CRI1+17 SCRPW45 Error.
  
 Problem:
 -------
 When entering a single quote "'" at the IF prompt an <UNDEF> or 
 <Subscript> error is generated.
  
 Resolution:
 ----------
 Will add validation to the IF prompt to not allow the single quote mark 
 to be entered without the A/B arguments. Will re-prompt if the single
 quote mark is entered.
  
 COMPONENTS:
 ==========
 N/A
  
 TECHNICAL:
 =========
 The routine for the Outpatient Diagnosis/Procedure Search (SCRPW45)  
 will be modified to not allow the entry of the single quote mark.
  
 BEFORE:  CRI1+5 - CRI1+11
  
         I X="" S SDNUL=1 Q
         F  S SDC=$E(Y,$L(Y)) Q:SDC'="'"  S Y=$E(Y,1,($L(Y)-1))
         I '$L(Y)!$TR($TR(Y,"'",""),"&","")="" W $C(7),"No criteria 
 selected!" G CRI1
 	`        I Y["'&" W $C(7),"  ??  The value ""'&"" is incorrect syntax!" G 
 CRI1
         I Y["''" W $C(7),"  ??  Character ""'"" appears redundantly!" G 
 CRI1
         I Y["&&" W $C(7),"  ??  Character ""&"" appears redundantly!" G 
 CRI1
         S SDBAD=0,SDSTR="",SDRESP=Y,SDR=$TR(Y,"&","") F SDIII=1:1:$L(SDR) 
 S SDC=$E(SDR,SDIII) D  Q:SDBAD
  
  
   
 AFTER:   CRI1+5 - CRI1+13
  
         I X="" S SDNUL=1 Q
         I $E(X)="&" W $C(7),"  ?? Invalid!" G CRI1
         F  S SDC=$E(Y,$L(Y)) Q:SDC'="'"  S Y=$E(Y,1,($L(Y)-1))
         I '$L(Y)!$TR($TR(Y,"'",""),"&","")="" W $C(7),"No criteria 
 selected!" G CRI1
         I Y["'&" W $C(7),"  ??  The value ""'&"" is incorrect syntax!" G 
 CRI1
         I Y["''" W $C(7),"  ??  Character ""'"" appears redundantly!" G 
 CRI1
         I Y["&&" W $C(7),"  ??  Character ""&"" appears redundantly!" G 
 CRI1
         I Y="" W $C(7),"No criteria selected!" G CRI1
         S SDBAD=0,SDSTR="",SDRESP=Y,SDR=$TR(Y,"&","") F SDIII=1:1:$L(SDR) 
 S SDC=$E(SDR,SDIII) D  Q:SDBAD
  
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;1.0;SD;**[patch list]**;13-AUG-1993
  
                             CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List 
 ============      ============          ===========         ==========
 SCRPW45              24482203             24621663        **144,351,409**
  
  
  
 INSTALLATION INSTRUCTIONS
 =========================
 This patch can be loaded with users on the system. Installation time will 
 be less than 1 minute.
  
 1. Choose the PackMan message containing this patch and invoke the 
 INSTALL/CHECK MESSAGE PackMan option.
  
 2. (DSM for Open VMS sites only) Disable routine mapping on all systems 
 for the routines listed in the Routine Summary.
  
 NOTE: If the routines included in this patch are not currently in your 
 mapped routine set, please skip this step.
  
 3. Start up the Kernel Installation and Distribution System Menu 
 [XPD MAIN]:
        Edits and Distribution ...
        Utilities ...
        Installation ...
  
    Select Kernel Installation & Distribution System Option:  Installation
                                                              ---
  
        1     Load a Distribution
        2     Verify Checksums in Transport Global
        3     Print Transport Global
        4     Compare Transport Global to Current System
        5     Backup a Transport Global
        6     Install Package(s)
              Restart Install of Package(s)
              Unload a Distribution
  
 4. From this menu, you may elect to use the following options
    (When prompted for the INSTALL NAME. enter SD*5.3*409):
  
 a.   Backup a Transport Global - This option will create a backup 
 message of any routines exported with this patch. It will not backup any
 other changes such as DD's or templates.
  
 b.   Compare Transport Global to Current System - This option will 
 allow you to view all changes that will be made when this patch is
 installed. It compares all components of this patch (routines, DD's,
 templates, etc.)
   
 c.   Verify Checksums in Transport Global - This option will allow 
 you to ensure the integrity of the routines that are in the Transport
 global.
  
 5.  Use the Install Package(s) option and select the package
      SD*5.3*409.
   
 a.  When prompted 'Want KIDS to INHIBIT LOGONs during the
          install? YES//', answer NO.
  
 b.  When prompted 'Want to DISABLE Scheduled Options and Menu 
          Options and Protocols? YES//', answer NO.
  
 6.  (DSM for Open VMS sites only) Optional - Include the routines
      distributed with this patch in the mapped routine set.
  
      NOTE: This step is only necessary if you performed step 2 or if
      you wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - SCRPW45


Routine Checksum:

=============================================================================
User Information:
Entered By  : VILLELLA,ROSS                 Date Entered  : DEC 10, 2004
Completed By: ILUSTRISIMO,LUCY              Date Completed: FEB 11, 2005
Released By : BENBOW,PHYLLIS O              Date Released : FEB 14, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released SD*5.3*338 SEQ #295
Extracted from mail message
**KIDS**:SD*5.3*338^

**INSTALL NAME**
SD*5.3*338
"BLD",5328,0)
SD*5.3*338^SCHEDULING^0^3040126^y
"BLD",5328,1,0)
^^1^1^3040113^
"BLD",5328,1,1,0)
Undefined variable error in routine SCRPI01.
"BLD",5328,4,0)
^9.64PA^^
"BLD",5328,"ABPKG")
n
"BLD",5328,"KRN",0)
^9.67PA^8989.52^19
"BLD",5328,"KRN",.4,0)
.4
"BLD",5328,"KRN",.401,0)
.401
"BLD",5328,"KRN",.402,0)
.402
"BLD",5328,"KRN",.403,0)
.403
"BLD",5328,"KRN",.5,0)
.5
"BLD",5328,"KRN",.84,0)
.84
"BLD",5328,"KRN",3.6,0)
3.6
"BLD",5328,"KRN",3.8,0)
3.8
"BLD",5328,"KRN",9.2,0)
9.2
"BLD",5328,"KRN",9.8,0)
9.8
"BLD",5328,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5328,"KRN",9.8,"NM",1,0)
SCRPI01^^0^B42913472
"BLD",5328,"KRN",9.8,"NM","B","SCRPI01",1)

"BLD",5328,"KRN",19,0)
19
"BLD",5328,"KRN",19,"NM",0)
^9.68A^^
"BLD",5328,"KRN",19.1,0)
19.1
"BLD",5328,"KRN",101,0)
101
"BLD",5328,"KRN",409.61,0)
409.61
"BLD",5328,"KRN",771,0)
771
"BLD",5328,"KRN",870,0)
870
"BLD",5328,"KRN",8989.51,0)
8989.51
"BLD",5328,"KRN",8989.52,0)
8989.52
"BLD",5328,"KRN",8994,0)
8994
"BLD",5328,"KRN","B",.4,.4)

"BLD",5328,"KRN","B",.401,.401)

"BLD",5328,"KRN","B",.402,.402)

"BLD",5328,"KRN","B",.403,.403)

"BLD",5328,"KRN","B",.5,.5)

"BLD",5328,"KRN","B",.84,.84)

"BLD",5328,"KRN","B",3.6,3.6)

"BLD",5328,"KRN","B",3.8,3.8)

"BLD",5328,"KRN","B",9.2,9.2)

"BLD",5328,"KRN","B",9.8,9.8)

"BLD",5328,"KRN","B",19,19)

"BLD",5328,"KRN","B",19.1,19.1)

"BLD",5328,"KRN","B",101,101)

"BLD",5328,"KRN","B",409.61,409.61)

"BLD",5328,"KRN","B",771,771)

"BLD",5328,"KRN","B",870,870)

"BLD",5328,"KRN","B",8989.51,8989.51)

"BLD",5328,"KRN","B",8989.52,8989.52)

"BLD",5328,"KRN","B",8994,8994)

"BLD",5328,"QUES",0)
^9.62^^
"BLD",5328,"REQB",0)
^9.611^1^1
"BLD",5328,"REQB",1,0)
SD*5.3*66^2
"BLD",5328,"REQB","B","SD*5.3*66",1)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
338^3040126
"PKG",16,22,1,"PAH",1,1,0)
^^1^1^3040126
"PKG",16,22,1,"PAH",1,1,1,0)
Undefined variable error in routine SCRPI01.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SCRPI01")
0^1^B42913472
"RTN","SCRPI01",1,0)
SCRPI01 ;ALB/SCK - IEMM REPORT OF INCOMPLETE ENCOUNTERS ; 2/2/97
"RTN","SCRPI01",2,0)
 ;;5.3;Scheduling;**66,338**;AUG 13, 1993
"RTN","SCRPI01",3,0)
 ;
"RTN","SCRPI01",4,0)
EN ;  Main entry point for report of incomplete encounters report
"RTN","SCRPI01",5,0)
 ;  Variables
"RTN","SCRPI01",6,0)
 ;      SDTXT        - String array for initial message display
"RTN","SCRPI01",7,0)
 ;      SDDT         - date Range, Begin^End
"RTN","SCRPI01",8,0)
 ;      SDSEL1,2     - Selection methods Line Tag
"RTN","SCRPI01",9,0)
 ;      SDOK         - Flag, 1 - Ok to continu, 0 - Quit
"RTN","SCRPI01",10,0)
 ;
"RTN","SCRPI01",11,0)
 N VAUTD,VAUTC,VAUDS,VAUTSTR,VAUTNI,SDTXT,SDDT,ZTSAVE,VAUTN,VAUER,SDSEL1,SDSEL2,SDOK,NDX,VAUTVB
"RTN","SCRPI01",12,0)
 ;
"RTN","SCRPI01",13,0)
 W !,$C(7)
"RTN","SCRPI01",14,0)
 F NDX=1:1 S SDTXT=$P($T(MSG+NDX),";;",2) Q:SDTXT="$$END"  D
"RTN","SCRPI01",15,0)
 . W !,SDTXT
"RTN","SCRPI01",16,0)
 W !!
"RTN","SCRPI01",17,0)
 S DIR(0)="E" D ^DIR K DIR Q:'$G(Y)
"RTN","SCRPI01",18,0)
 ; 
"RTN","SCRPI01",19,0)
 I $$DIV^SCRPIUT1<0 G ENQ
"RTN","SCRPI01",20,0)
 D MSG2
"RTN","SCRPI01",21,0)
 S SDSEL1=$$SELCT("","First") G:SDSEL1']"" ENQ
"RTN","SCRPI01",22,0)
 S SDSEL2=$$SELCT(SDSEL1,"Next") G:SDSEL2']"" ENQ
"RTN","SCRPI01",23,0)
 I '$$ASKDT^SCENI01(.SDDT) G ENQ
"RTN","SCRPI01",24,0)
 ;
"RTN","SCRPI01",25,0)
 D @SDSEL1 Q:$G(SDOK)<0
"RTN","SCRPI01",26,0)
 D @SDSEL2 Q:$G(SDOK)<0
"RTN","SCRPI01",27,0)
 ;
"RTN","SCRPI01",28,0)
 F X="SDDT","VAUTC","VAUTD","VAUDS","VAUDS(","VAUTC(","VAUTD(","SDSEL1","SDSEL2","VAUTN","VAUTN(","VAUER","VAUER(" D
"RTN","SCRPI01",29,0)
 . S ZTSAVE(X)=""
"RTN","SCRPI01",30,0)
 S IOP="Q"
"RTN","SCRPI01",31,0)
 W !!,"This report requires 132 columns and could take some time.",!,"Remember to QUEUE the report.",!
"RTN","SCRPI01",32,0)
 D EN^XUTMDEVQ("RPT^SCRPI01","IEMM Error Listing",.ZTSAVE)
"RTN","SCRPI01",33,0)
 D HOME^%ZIS
"RTN","SCRPI01",34,0)
ENQ Q
"RTN","SCRPI01",35,0)
 ;
"RTN","SCRPI01",36,0)
RPT ; Build report, then call print
"RTN","SCRPI01",37,0)
 K ^TMP("SCRPI ERR",$J)
"RTN","SCRPI01",38,0)
 D BLD
"RTN","SCRPI01",39,0)
 D PRINT^SCRPI01A
"RTN","SCRPI01",40,0)
 Q
"RTN","SCRPI01",41,0)
 ;
"RTN","SCRPI01",42,0)
EXIT ;
"RTN","SCRPI01",43,0)
 K ^TMP("SCRPI ERR",$J)
"RTN","SCRPI01",44,0)
 Q
"RTN","SCRPI01",45,0)
 ;
"RTN","SCRPI01",46,0)
SELCT(S1,SCT) ;  Set selection criteria
"RTN","SCRPI01",47,0)
 ;   Input
"RTN","SCRPI01",48,0)
 ;       S1    - Previous selection method
"RTN","SCRPI01",49,0)
 ;       SCT   - first or second selection method
"RTN","SCRPI01",50,0)
 ;
"RTN","SCRPI01",51,0)
 ;   Returns
"RTN","SCRPI01",52,0)
 ;       CLN - Clinic
"RTN","SCRPI01",53,0)
 ;       ERR - Error Code
"RTN","SCRPI01",54,0)
 ;       PAT - Patient
"RTN","SCRPI01",55,0)
 ;       DSS - Stop Code
"RTN","SCRPI01",56,0)
 ;
"RTN","SCRPI01",57,0)
 ;   Variables
"RTN","SCRPI01",58,0)
 ;       SCTEXT - Set up display list
"RTN","SCRPI01",59,0)
 ;
"RTN","SCRPI01",60,0)
 N X,CNT,SCTEXT
"RTN","SCRPI01",61,0)
 S X="SM^"
"RTN","SCRPI01",62,0)
 F CNT=1:1 S SCTEXT=$P($T(OPTIONS+CNT),";;",2) Q:SCTEXT="$$END"  D
"RTN","SCRPI01",63,0)
 . Q:S1[$P(SCTEXT,":")
"RTN","SCRPI01",64,0)
 . S X=X_SCTEXT
"RTN","SCRPI01",65,0)
 ;
"RTN","SCRPI01",66,0)
 S DIR(0)=X,DIR("A")="Set "_SCT_" Selection Criteria"
"RTN","SCRPI01",67,0)
 S DIR("?")="Pick a selection criteria from those listed below."
"RTN","SCRPI01",68,0)
 S DIR("??")="^D HLP^SCRPI01"
"RTN","SCRPI01",69,0)
 D ^DIR K DIR
"RTN","SCRPI01",70,0)
 Q $S(Y["C":"CLN",Y["P":"PAT",Y["E":"ERR",Y["D":"DSS",1:"")
"RTN","SCRPI01",71,0)
 ;
"RTN","SCRPI01",72,0)
CLN ; Clinic selection o/m/a
"RTN","SCRPI01",73,0)
 W !!,"Clinic Selection"
"RTN","SCRPI01",74,0)
 S VAUTNI=2
"RTN","SCRPI01",75,0)
 D CLINIC^VAUTOMA
"RTN","SCRPI01",76,0)
 W !
"RTN","SCRPI01",77,0)
 S SDOK=Y
"RTN","SCRPI01",78,0)
 Q
"RTN","SCRPI01",79,0)
 ;
"RTN","SCRPI01",80,0)
PAT ; Patient selection o/m/a
"RTN","SCRPI01",81,0)
 W !!,"Patient Selection"
"RTN","SCRPI01",82,0)
 S VAUTNI=2
"RTN","SCRPI01",83,0)
 D PATIENT^VAUTOMA
"RTN","SCRPI01",84,0)
 W !
"RTN","SCRPI01",85,0)
 S SDOK=Y
"RTN","SCRPI01",86,0)
 Q
"RTN","SCRPI01",87,0)
 ;
"RTN","SCRPI01",88,0)
ERR ; Error selection o/m/a
"RTN","SCRPI01",89,0)
 W !!,"Transmission Error Selection"
"RTN","SCRPI01",90,0)
 S DIC="^SD(409.76,",VAUTSTR="Error",VAUTVB="VAUER",VAUTNI=2
"RTN","SCRPI01",91,0)
 D FIRST^VAUTOMA
"RTN","SCRPI01",92,0)
 W !
"RTN","SCRPI01",93,0)
 S SDOK=Y
"RTN","SCRPI01",94,0)
 Q
"RTN","SCRPI01",95,0)
 ;
"RTN","SCRPI01",96,0)
DSS ; Clinic Stop code selection o/m/a
"RTN","SCRPI01",97,0)
 W !!,"Clinic Stop Code Selection"
"RTN","SCRPI01",98,0)
 S DIC="^DIC(40.7,",VAUTSTR="Stop Code",VAUTVB="VAUDS",VAUTNI=2
"RTN","SCRPI01",99,0)
 D FIRST^VAUTOMA
"RTN","SCRPI01",100,0)
 W !
"RTN","SCRPI01",101,0)
 S SDOK=1
"RTN","SCRPI01",102,0)
 Q
"RTN","SCRPI01",103,0)
 ;
"RTN","SCRPI01",104,0)
BLD ; Search for incomplete encounters and build TMP global
"RTN","SCRPI01",105,0)
 ;    Variables
"RTN","SCRPI01",106,0)
 ;        SDEND  - End date of date range
"RTN","SCRPI01",107,0)
 ;        SDOE   - Encounter IEN
"RTN","SCRPI01",108,0)
 ;        SDOEDT - Encounter date
"RTN","SCRPI01",109,0)
 ;        SDCNT  - Entry count
"RTN","SCRPI01",110,0)
 ;
"RTN","SCRPI01",111,0)
 N SDEND,SDOE,SDOEDT,SDCNT
"RTN","SCRPI01",112,0)
 ;
"RTN","SCRPI01",113,0)
 S SDOEDT=$P(SDDT,U)-.1,SDEND=$P(SDDT,U,2)+.9,SDCNT=0
"RTN","SCRPI01",114,0)
 F  S SDOEDT=$O(^SD(409.75,"AEDT",SDOEDT)) Q:'SDOEDT!(SDOEDT>SDEND)  D
"RTN","SCRPI01",115,0)
 . S SDXMT=0 F  S SDXMT=$O(^SD(409.75,"AEDT",SDOEDT,SDXMT)) Q:'SDXMT  D
"RTN","SCRPI01",116,0)
 .. S SDXER=0 F  S SDXER=$O(^SD(409.75,"AEDT",SDOEDT,SDXMT,SDXER)) Q:'SDXER  D BLD1(SDXER,SDXMT)
"RTN","SCRPI01",117,0)
 Q
"RTN","SCRPI01",118,0)
 ;
"RTN","SCRPI01",119,0)
BLD1(SDE,SDX) ;  If error passes checks, add to sorted TMP global
"RTN","SCRPI01",120,0)
 ;   Input
"RTN","SCRPI01",121,0)
 ;       SDE  - Pointer to #409.75
"RTN","SCRPI01",122,0)
 ;       SDX  - Pointer to #409.73
"RTN","SCRPI01",123,0)
 ;
"RTN","SCRPI01",124,0)
 ;   Variables
"RTN","SCRPI01",125,0)
 ;       SCEN   - Temporary array for encounter information
"RTN","SCRPI01",126,0)
 ;       SDDEL  - Deleted Encounter Marker "*"
"RTN","SCRPI01",127,0)
 ;       SDRSLT - -1:error, 1:Deleted Encounter, 0:Not deleted
"RTN","SCRPI01",128,0)
 ;       SDIV   - Division IEN
"RTN","SCRPI01",129,0)
 ;       SDCDE  - Stop code
"RTN","SCRPI01",130,0)
 ;
"RTN","SCRPI01",131,0)
 ;   Output
"RTN","SCRPI01",132,0)
 ;       ^TMP("SCRPI ERR",$J,Division Name,Clinic Name,Patient Name,Encounter Date,Error code IEN,0)=DFN^#409.73 Pointer^Deleted Flag
"RTN","SCRPI01",133,0)
 ;
"RTN","SCRPI01",134,0)
 N SCEN,SDDEL,SDRSLT,SDIV,SDCDE
"RTN","SCRPI01",135,0)
 ;
"RTN","SCRPI01",136,0)
 I '$D(ZTQUEUED) S SDCNT=SDCNT+1 W:(SDCNT#10)=0 "."
"RTN","SCRPI01",137,0)
 ;
"RTN","SCRPI01",138,0)
 S SDRSLT=$$OPENC^SCUTIE1(SDXMT,"SCEN")
"RTN","SCRPI01",139,0)
 Q:SDRSLT<0
"RTN","SCRPI01",140,0)
 S:SDRSLT SDDEL="*"
"RTN","SCRPI01",141,0)
 ;
"RTN","SCRPI01",142,0)
 I SDRSLT D
"RTN","SCRPI01",143,0)
 . S SDIV=$P(^SD(409.74,SCEN("DELIEN"),1),U,11)
"RTN","SCRPI01",144,0)
 . S SDCDE=$P(^SD(409.74,SCEN("DELIEN"),1),U,3)
"RTN","SCRPI01",145,0)
 E  D
"RTN","SCRPI01",146,0)
 . S SDIV=$P(^SCE(SCEN("SDOIEN"),0),U,11)
"RTN","SCRPI01",147,0)
 . S SDCDE=$P(^SCE(SCEN("SDOIEN"),0),U,3)
"RTN","SCRPI01",148,0)
 ;
"RTN","SCRPI01",149,0)
 I $S(VAUTD:0,$D(VAUTD(SDIV)):0,1:1) Q
"RTN","SCRPI01",150,0)
 ;
"RTN","SCRPI01",151,0)
 I SDSEL1="CLN",$S(VAUTC:0,$D(VAUTC(SCEN("CLINIC"))):0,1:1) Q
"RTN","SCRPI01",152,0)
 I SDSEL1="PAT",$S(VAUTN:0,$D(VAUTN(SCEN("DFN"))):0,1:1) Q
"RTN","SCRPI01",153,0)
 I SDSEL1="ERR" Q:'$D(^SD(409.75,SDE,0))  I $S(VAUER:0,$D(VAUER($P(^SD(409.75,SDE,0),U,2))):0,1:1) Q  ; SD*5.3*338
"RTN","SCRPI01",154,0)
 I SDSEL1="DSS",$S(VAUDS:0,$D(VAUDS(SDCDE)):0,1:1) Q
"RTN","SCRPI01",155,0)
 ;
"RTN","SCRPI01",156,0)
 I SDSEL2="CLN",$S(VAUTC:0,$D(VAUTC(SCEN("CLINIC"))):0,1:1) Q
"RTN","SCRPI01",157,0)
 I SDSEL2="PAT",$S(VAUTN:0,$D(VAUTN(SCEN("DFN"))):0,1:1) Q
"RTN","SCRPI01",158,0)
 I SDSEL2="ERR" Q:'$D(^SD(409.75,SDE,0))  I $S(VAUER:0,$D(VAUER($P(^SD(409.75,SDE,0),U,2))):0,1:1) Q  ; SD*5.3*338
"RTN","SCRPI01",159,0)
 I SDSEL2="DSS",$S(VAUDS:0,$D(VAUDS(SDCDE)):0,1:1) Q
"RTN","SCRPI01",160,0)
 ;
"RTN","SCRPI01",161,0)
 S ^TMP("SCRPI ERR",$J,$P(^DG(40.8,SDIV,0),U),$P(^SC(SCEN("CLINIC"),0),U),$P(^DPT(SCEN("DFN"),0),U),SCEN("ENCOUNTER"),SDE,0)=SCEN("DFN")_U_SDX_U_$G(SDDEL)
"RTN","SCRPI01",162,0)
 Q
"RTN","SCRPI01",163,0)
 ;
"RTN","SCRPI01",164,0)
SELMTHD(SEL) ;  Returns 'external' version of selection method
"RTN","SCRPI01",165,0)
 Q $S(SEL="CLN":"Clinic",SEL="PAT":"Patient",SEL="ERR":"Error Code",SEL="DSS":"Clinic Stop Code")
"RTN","SCRPI01",166,0)
 ;
"RTN","SCRPI01",167,0)
HLP ;  '??' help for the selection criteria.
"RTN","SCRPI01",168,0)
 ;
"RTN","SCRPI01",169,0)
 W !?2,"You may select any two of the following selection criteria, one at a time, for"
"RTN","SCRPI01",170,0)
 W !?2,"your report.  You will be asked for one/many/all selections for each criteria"
"RTN","SCRPI01",171,0)
 W !?2,"selected."
"RTN","SCRPI01",172,0)
 W !
"RTN","SCRPI01",173,0)
 W !?2,"Selection criteria are not sort criteria.  The sort criteria are  Division,"
"RTN","SCRPI01",174,0)
 W !?2,"Clinic, Patient, and Encounter.  Selection criteria limit what will be"
"RTN","SCRPI01",175,0)
 W !?2,"printed in the report."
"RTN","SCRPI01",176,0)
 Q
"RTN","SCRPI01",177,0)
 ;
"RTN","SCRPI01",178,0)
MSG2 ;
"RTN","SCRPI01",179,0)
 W !!!
"RTN","SCRPI01",180,0)
 W "The following are selection criteria which are used to specify a group of or"
"RTN","SCRPI01",181,0)
 W !,"particular clinic, patient, error code or clinic stop code to be printed."
"RTN","SCRPI01",182,0)
 W !,"You are asked to pick two, one at a time.  Type '??' for more details."
"RTN","SCRPI01",183,0)
 Q
"RTN","SCRPI01",184,0)
 ;
"RTN","SCRPI01",185,0)
MSG ;
"RTN","SCRPI01",186,0)
 ;;  This report requires 132 columns to print and will default to 
"RTN","SCRPI01",187,0)
 ;;  QUEUING required.  If you print this report to your terminal,
"RTN","SCRPI01",188,0)
 ;;  answer 'NO' to the 'Do you still want your output queued' prompt.
"RTN","SCRPI01",189,0)
 ;;$$END
"RTN","SCRPI01",190,0)
 ;
"RTN","SCRPI01",191,0)
OPTIONS ;  Selection methods
"RTN","SCRPI01",192,0)
 ;;C:Clinic;
"RTN","SCRPI01",193,0)
 ;;P:Patient;
"RTN","SCRPI01",194,0)
 ;;E:Error Code;
"RTN","SCRPI01",195,0)
 ;;D:Clinic Stop Code;
"RTN","SCRPI01",196,0)
 ;;$$END
"RTN","SCRPI01",197,0)
 ;
"VER")
8.0^22
**END**
**END**

$TXT Created by THOMPSON,SETH at VMPDEV20.FO-BAYPINES.MED.VA.GOV  (KIDS) on Tuesday, 10/09/07 at 07:04
=============================================================================
Run Date: DEC 20, 2007                     Designation: PSU*4*11
Package : PSU - PHARMACY BENEFITS MANAGEMENT  Priority: Mandatory
Version : 4         SEQ #8                      Status: Released
                  Compliance Date: JAN 20, 2008
=============================================================================

Associated patches: (v)PSU*4*3     <<= must be installed BEFORE `PSU*4*11'

Subject: FIX PBM/HL7 LAB SUBSCRIPT ERROR

Category: 
  - Routine

Description:
============

 This patch will correct the subscript error which occurs when the Pharmacy
 Benefits Management (PBM) package receives an HL7 interface from the
 Laboratory package or the Vitals package with missing variables.
  
  
 ASSOCIATED REMEDY TICKETS:
 ==========================
 1. HD138238 - <SUBSCRIPT>TSTRES+12^LRRPU
 2. HD189756 - Auto run error
  
  
 PARTICIPATING TEST SITES:
 =========================
 Long Beach VAMC
 New Jersey HCS
 Upstate New York HCS
  
  
 REMEDY TICKET OVERVIEW:
 =======================
 1. HD138238
  
    Problem:
    --------
    The PBM/HL7 Lab Extract is designed to send an HL7 message to PBM for 
    every verified chemistry lab result.  Sometimes, a chemistry lab test
    has a microbiology test associated with it.  When the code encounters
    one of these microbiology nodes, a subscript error is generated due to 
    variables which have a null value.
  
    Resolution:
    -----------
    This happens during the resulting process and by the time the control
    is passed to the PBM routine, the HL7 message has already been built
    (by Lab).  Since the root cause is in Lab, all we can do here is to
    add code to make sure the necessary variables are not null and
    gracefully skip the record if they are.
  
 2. HD189756
  
    Problem:
    --------
    The root cause of this problem is in the Vitals package.  Somehow, 
    the Vitals record ends up with a null patient pointer and causes a
    subscript error in the PBM package.
  
    Resolution:
    -----------
    Skip over the bad Vitals record and create a Mailman message with the
    bad IENs that will be sent to the G.PSU PBM mailgroup for action.
  
    An example of the MailMan message is below:
  
    Subj: ** PBM vitals extract detected null patient pointer(s) **  
    10/17/07@15:13  5 lines
    From: PHARMACY BENEFITS MANAGEMENT PACKAGE  In 'IN' basket.   Page 1  
    --------------------------------------------------------------------
    The following IEN(s) have a null pointer in the PATIENT (#2) field of
    the GMRV VITAL MEASUREMENT file (#120.5).  Please notify your IRM and
    submit a remedy ticket for help in evaluating the record.
    6240038
    6240039
  
    Enter message action (in IN basket): Ignore// 
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 Installation will take less than 2 minutes.  Users may be on the system, 
 however, since 2 options will be out of order, it is recommended that 
 installation be queued for off peak hours.
  
    1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
    2. From the Kernel Installation & Distribution System menu, select
       the Installation menu.
  
    3. From this menu, you may select to use the following options
       (when prompted for INSTALL NAME, enter PSU*4.0*11)
  
     a. Backup a Transport Global - this option will create a backup
        message of any routines exported with the patch. It will NOT
        backup any other changes such as DDs or templates.
     b. Compare Transport Global to Current System - this option will
        allow you to view all changes that will be made when the patch
        is installed. It compares all components of the patch (routines,
        DDs, templates, etc.).
     c. Verify Checksums in Transport Global - this option will ensure
        the integrity of the routines that are in the transport global.
  
    4. Use the Install Package(s) option and select the package PSU*4.0*11.
  
    5. When prompted "Want KIDS to INHIBIT LOGONs during the install?
       YES//" respond NO.
  
    6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//" respond YES.
     
     a.  When prompted "Enter options you wish to mark as "Out of Order:",
         enter the following options:
  
         PSU PBM AUTO    [Automatic Pharmacy Statistics]
         PSU PBM MANUAL  [Manual Pharmacy Statistics]

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;4.0;PHARMACY BENEFITS MANAGEMENT;**[Patch List]**;MARCH, 2005;Build 8

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSULRHL1
    Before: B39562989   After: B40012684  **3,11**
Routine Name: PSUVIT1
    Before: B50144002   After: B59293955  **11**
 
Routine list of preceding patches: 3

=============================================================================
User Information:
Entered By  : CARROLL,RICHARD               Date Entered  : DEC 15, 2006
Completed By: WERNER,GARY                   Date Completed: DEC 19, 2007
Released By : HEMBREE,SUSAN                 Date Released : DEC 20, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

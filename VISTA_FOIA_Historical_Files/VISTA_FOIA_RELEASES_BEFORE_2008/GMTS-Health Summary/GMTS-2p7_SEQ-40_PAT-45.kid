Released GMTS*2.7*45 SEQ #40
Extracted from mail message
**KIDS**:GMTS*2.7*45^

**INSTALL NAME**
GMTS*2.7*45
"BLD",2766,0)
GMTS*2.7*45^HEALTH SUMMARY^0^3010416^y
"BLD",2766,1,0)
^^2^2^3010416^^^^
"BLD",2766,1,1,0)
The description of this patch may be found on the National Patch Module 
"BLD",2766,1,2,0)
under GMTS*2.7*45.
"BLD",2766,4,0)
^9.64PA^^
"BLD",2766,"INID")
^
"BLD",2766,"INIT")

"BLD",2766,"KRN",0)
^9.67PA^19^17
"BLD",2766,"KRN",.4,0)
.4
"BLD",2766,"KRN",.4,"NM",0)
^9.68A^^
"BLD",2766,"KRN",.401,0)
.401
"BLD",2766,"KRN",.402,0)
.402
"BLD",2766,"KRN",.403,0)
.403
"BLD",2766,"KRN",.5,0)
.5
"BLD",2766,"KRN",.84,0)
.84
"BLD",2766,"KRN",3.6,0)
3.6
"BLD",2766,"KRN",3.8,0)
3.8
"BLD",2766,"KRN",9.2,0)
9.2
"BLD",2766,"KRN",9.8,0)
9.8
"BLD",2766,"KRN",9.8,"NM",0)
^9.68A^8^8
"BLD",2766,"KRN",9.8,"NM",1,0)
GMTSPN^^0^B63515297
"BLD",2766,"KRN",9.8,"NM",2,0)
GMTSPN1^^0^B33513212
"BLD",2766,"KRN",9.8,"NM",3,0)
GMTSPNSL^^0^B2177783
"BLD",2766,"KRN",9.8,"NM",4,0)
GMTSPNS1^^1^
"BLD",2766,"KRN",9.8,"NM",5,0)
GMTSCW^^0^B4307773
"BLD",2766,"KRN",9.8,"NM",6,0)
GMTSDS^^0^B2052895
"BLD",2766,"KRN",9.8,"NM",7,0)
GMTSDSB^^0^B2238489
"BLD",2766,"KRN",9.8,"NM",8,0)
GMTSPN2^^0^B31673972
"BLD",2766,"KRN",9.8,"NM","B","GMTSCW",5)

"BLD",2766,"KRN",9.8,"NM","B","GMTSDS",6)

"BLD",2766,"KRN",9.8,"NM","B","GMTSDSB",7)

"BLD",2766,"KRN",9.8,"NM","B","GMTSPN",1)

"BLD",2766,"KRN",9.8,"NM","B","GMTSPN1",2)

"BLD",2766,"KRN",9.8,"NM","B","GMTSPN2",8)

"BLD",2766,"KRN",9.8,"NM","B","GMTSPNS1",4)

"BLD",2766,"KRN",9.8,"NM","B","GMTSPNSL",3)

"BLD",2766,"KRN",19,0)
19
"BLD",2766,"KRN",19.1,0)
19.1
"BLD",2766,"KRN",101,0)
101
"BLD",2766,"KRN",409.61,0)
409.61
"BLD",2766,"KRN",771,0)
771
"BLD",2766,"KRN",870,0)
870
"BLD",2766,"KRN",8994,0)
8994
"BLD",2766,"KRN","B",.4,.4)

"BLD",2766,"KRN","B",.401,.401)

"BLD",2766,"KRN","B",.402,.402)

"BLD",2766,"KRN","B",.403,.403)

"BLD",2766,"KRN","B",.5,.5)

"BLD",2766,"KRN","B",.84,.84)

"BLD",2766,"KRN","B",3.6,3.6)

"BLD",2766,"KRN","B",3.8,3.8)

"BLD",2766,"KRN","B",9.2,9.2)

"BLD",2766,"KRN","B",9.8,9.8)

"BLD",2766,"KRN","B",19,19)

"BLD",2766,"KRN","B",19.1,19.1)

"BLD",2766,"KRN","B",101,101)

"BLD",2766,"KRN","B",409.61,409.61)

"BLD",2766,"KRN","B",771,771)

"BLD",2766,"KRN","B",870,870)

"BLD",2766,"KRN","B",8994,8994)

"BLD",2766,"QUES",0)
^9.62^^
"BLD",2766,"REQB",0)
^9.611^1^1
"BLD",2766,"REQB",1,0)
GMTS*2.7*35^2
"BLD",2766,"REQB","B","GMTS*2.7*35",1)

"MBREQ")
0
"ORD",0,9.8)
9.8;;1;RTNF^XPDTA;RTNE^XPDTA
"ORD",0,9.8,0)
ROUTINE
"PKG",126,-1)
1^1
"PKG",126,0)
HEALTH SUMMARY^GMTS^Integrated Health Summary Tools^^^3010208
"PKG",126,20,0)
^9.402P^^
"PKG",126,22,0)
^9.49I^1^1
"PKG",126,22,1,0)
2.7^2951020^2951020^11
"PKG",126,22,1,"PAH",1,0)
45^3010416
"PKG",126,22,1,"PAH",1,1,0)
^^2^2^3010416
"PKG",126,22,1,"PAH",1,1,1,0)
The description of this patch may be found on the National Patch Module 
"PKG",126,22,1,"PAH",1,1,2,0)
under GMTS*2.7*45.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
8
"RTN","GMTSCW")
0^5^B4307773
"RTN","GMTSCW",1,0)
GMTSCW ; SLC/DJP - TIU CWD Component driver ; 04/11/2001
"RTN","GMTSCW",2,0)
 ;;2.7;Health Summary;**12,45**;Oct 20, 1995
"RTN","GMTSCW",3,0)
 ;                          
"RTN","GMTSCW",4,0)
 ; External References
"RTN","GMTSCW",5,0)
 ;    DBIA  3155 call MAIN^TIULAPI
"RTN","GMTSCW",6,0)
 ;    DBIA 10006 call ^DIC
"RTN","GMTSCW",7,0)
 ;                        
"RTN","GMTSCW",8,0)
 ; CWAD - Clinical Warnings and Advanced Directives
"RTN","GMTSCW",9,0)
CW ;   Clinical Warning Display
"RTN","GMTSCW",10,0)
 N X,DIC,TIUTYPE,Y,TIUFPRIV,TIUNAM,GMTSTIUC S TIUFPRIV=1,(TIUNAM,X)="CLINICAL WARNING",GMTSTIUC="C"
"RTN","GMTSCW",11,0)
 S DIC="^TIU(8925.1,",DIC(0)="X",DIC("S")="I $P($G(^(0)),U,4)=""DC""" D ^DIC I Y>0 S TIUTYPE=+Y D MAIN
"RTN","GMTSCW",12,0)
 Q
"RTN","GMTSCW",13,0)
CN ;   Crisis Note Display
"RTN","GMTSCW",14,0)
 N X,DIC,TIUTYPE,Y,TIUFPRIV,TIUNAM,GMTSTIUC S TIUFPRIV=1,(TIUNAM,X)="CRISIS NOTE",GMTSTIUC="C"
"RTN","GMTSCW",15,0)
 S DIC="^TIU(8925.1,",DIC(0)="X",DIC("S")="I $P($G(^(0)),U,4)=""DC""" D ^DIC I Y>0 S TIUTYPE=+Y D MAIN
"RTN","GMTSCW",16,0)
 Q
"RTN","GMTSCW",17,0)
CD ;   Advance Directive Display
"RTN","GMTSCW",18,0)
 N X,DIC,TIUTYPE,Y,TIUFPRIV,TIUNAM,GMTSTIUC S TIUFPRIV=1,(TIUNAM,X)="ADVANCE DIRECTIVE",GMTSTIUC="C"
"RTN","GMTSCW",19,0)
 S DIC="^TIU(8925.1,",DIC(0)="X",DIC("S")="I $P($G(^(0)),U,4)=""DC""" D ^DIC I Y>0 S TIUTYPE=+Y D MAIN
"RTN","GMTSCW",20,0)
 Q
"RTN","GMTSCW",21,0)
 ;                                 
"RTN","GMTSCW",22,0)
MAIN ; Control branching
"RTN","GMTSCW",23,0)
 N ADATE,ADMIT,ASUB,ATDATE,ATTNDNG,ATTYPE,ATYPE,AUTHOR,CHILD,CONEED
"RTN","GMTSCW",24,0)
 N COSAME,COSGEDBY,COSIG,CURIEN,DISCHG,GMTSA,GMTSAI,GMTSAII,GMTSCNT
"RTN","GMTSCW",25,0)
 N GMTSD,GMTSDIC,GMTSEXSG,GMTSI,GMTSIEN,GMTSII,GMTSIQ,GMTSJ,GMTSK
"RTN","GMTSCW",26,0)
 N GMTSODIC,GMTSPDIC,GMTSTDIC,GMTSPR,GMTSREC,GMTST,GMTSX,GMTSXTRA
"RTN","GMTSCW",27,0)
 N I,PARIEN,PDATE,PN,PSUB,PTYPE,REASON,SIGNEDBY,STATUS,TSPEC,TYPE,X,Y
"RTN","GMTSCW",28,0)
 K ^TMP("TIU",$J) D MAIN^TIULAPI(DFN,TIUTYPE,"ALL",GMTS1,GMTS2,GMTSNDM,1)
"RTN","GMTSCW",29,0)
 Q:'$D(^TMP("TIU",$J))  D PNOTE^GMTSPN Q
"RTN","GMTSDS")
0^6^B2052895
"RTN","GMTSDS",1,0)
GMTSDS ; SLC/KER - Discharge Summary              ; 04/11/2001
"RTN","GMTSDS",2,0)
 ;;2.7;Health Summary;**12,28,35,45**;Oct 20, 1995
"RTN","GMTSDS",3,0)
 ;                          
"RTN","GMTSDS",4,0)
 ; External References
"RTN","GMTSDS",5,0)
 ;    DBIA  2902 call MAIN^TIULAPIC
"RTN","GMTSDS",6,0)
 ;    DBIA 10006 call ^DIC
"RTN","GMTSDS",7,0)
 ;                        
"RTN","GMTSDS",8,0)
MAIN ; Control branching
"RTN","GMTSDS",9,0)
 N ADATE,ADMIT,ASUB,ATDATE,ATTNDNG,ATTYPE,ATYPE,AUTHOR,CHILD,CONEED
"RTN","GMTSDS",10,0)
 N COSAME,COSGEDBY,COSIG,CURIEN,DISCHG,GMTSA,GMTSAI,GMTSAII,GMTSCNT
"RTN","GMTSDS",11,0)
 N GMTSD,GMTSDIC,GMTSEXSG,GMTSI,GMTSIEN,GMTSII,GMTSIQ,GMTSJ,GMTSK
"RTN","GMTSDS",12,0)
 N GMTSODIC,GMTSPDIC,GMTSTDIC,GMTSPR,GMTSREC,GMTST,GMTSX,GMTSXTRA
"RTN","GMTSDS",13,0)
 N I,PARIEN,PDATE,PN,PSUB,PTYPE,REASON,SIGNEDBY,STATUS,TSPEC,TYPE
"RTN","GMTSDS",14,0)
 N TIUTYPE,TIUFPRIV,TIUNAM,TIUC,DIC,X,Y S (TIUNAM,X)="DISCHARGE SUMMARY",TIUC="DCS"
"RTN","GMTSDS",15,0)
 S DIC="^TIU(8925.1,",DIC(0)="X",DIC("S")="I $P($G(^(0)),U,4)=""CL"",$P($G(^(0)),U)=TIUNAM"
"RTN","GMTSDS",16,0)
 D ^DIC Q:+($G(Y))=0  S TIUTYPE=+Y K ^TMP("TIU",$J)
"RTN","GMTSDS",17,0)
 D MAIN^TIULAPIC(DFN,TIUTYPE,GMTS1,GMTS2,GMTSNDM,1)
"RTN","GMTSDS",18,0)
 Q:'$D(^TMP("TIU",$J))  D PNOTE^GMTSPN Q
"RTN","GMTSDSB")
0^7^B2238489
"RTN","GMTSDSB",1,0)
GMTSDSB ; SLC/JER,KER - Brief Discharge Summary ; 04/11/2001
"RTN","GMTSDSB",2,0)
 ;;2.7;Health Summary;**12,28,35,45**;Oct 20, 1995
"RTN","GMTSDSB",3,0)
 ;                          
"RTN","GMTSDSB",4,0)
 ; External References
"RTN","GMTSDSB",5,0)
 ;    DBIA  2902 call MAIN^TIULAPIC
"RTN","GMTSDSB",6,0)
 ;    DBIA 10006 call ^DIC
"RTN","GMTSDSB",7,0)
 ;                        
"RTN","GMTSDSB",8,0)
MAIN ; Control branching
"RTN","GMTSDSB",9,0)
 N ADATE,ADMIT,ASUB,ATDATE,ATTNDNG,ATTYPE,ATYPE,AUTHOR,CHILD,CONEED
"RTN","GMTSDSB",10,0)
 N COSAME,COSGEDBY,COSIG,CURIEN,DISCHG,GMTSA,GMTSAI,GMTSAII,GMTSCNT
"RTN","GMTSDSB",11,0)
 N GMTSD,GMTSDIC,GMTSEXSG,GMTSI,GMTSIEN,GMTSII,GMTSIQ,GMTSJ,GMTSK
"RTN","GMTSDSB",12,0)
 N GMTSODIC,GMTSPDIC,GMTSTDIC,GMTSPR,GMTSREC,GMTST,GMTSX,GMTSXTRA
"RTN","GMTSDSB",13,0)
 N I,PARIEN,PDATE,PN,PSUB,PTYPE,REASON,SIGNEDBY,STATUS,TSPEC,TYPE
"RTN","GMTSDSB",14,0)
 N TIUTYPE,TIUFPRIV,TIUNAM,TIUC,DIC,X,Y S (TIUNAM,X)="DISCHARGE SUMMARY",TIUC="DSB"
"RTN","GMTSDSB",15,0)
 S DIC="^TIU(8925.1,",DIC(0)="X",DIC("S")="I $P($G(^(0)),U,4)=""CL"",$P($G(^(0)),U)=TIUNAM"
"RTN","GMTSDSB",16,0)
 D ^DIC Q:+($G(Y))=0  S TIUTYPE=+Y,TIUNAM="DISCHARGE SUMMARY BRIEF" K ^TMP("TIU",$J)
"RTN","GMTSDSB",17,0)
 D MAIN^TIULAPIC(DFN,TIUTYPE,GMTS1,GMTS2,GMTSNDM,1)
"RTN","GMTSDSB",18,0)
 Q:'$D(^TMP("TIU",$J))  D PNOTE^GMTSPN Q
"RTN","GMTSPN")
0^1^B63515297
"RTN","GMTSPN",1,0)
GMTSPN ; SLC/KER - Progress Note                     ; 04/11/2001
"RTN","GMTSPN",2,0)
 ;;2.7;Health Summary;**12,28,33,35,45**;Oct 20, 1995
"RTN","GMTSPN",3,0)
 ;                          
"RTN","GMTSPN",4,0)
 ; External References
"RTN","GMTSPN",5,0)
 ;    DBIA  2902 call VISIT^TIULAPIC
"RTN","GMTSPN",6,0)
 ;    DBIA  2902 call MAIN^TIULAPIC
"RTN","GMTSPN",7,0)
 ;    DBIA 10006 call ^DIC
"RTN","GMTSPN",8,0)
 ;                        
"RTN","GMTSPN",9,0)
PN ; Progress Note Health Summary Component
"RTN","GMTSPN",10,0)
 N TIUSTAT,TIUTYPE,TIUNAM,DIC,TIUFPRIV,TIUXREF,GMTSTIUC,X,Y,GMTSREF
"RTN","GMTSPN",11,0)
 S TIUFPRIV=1,TIUSTAT="ALL",TIUXREF="""APT""",GMTSTIUC="P",(TIUNAM,X)="PROGRESS NOTES"
"RTN","GMTSPN",12,0)
 S DIC="^TIU(8925.1,",DIC(0)="X",DIC("S")="I $P($G(^(0)),U,4)=""CL"""
"RTN","GMTSPN",13,0)
 D ^DIC K DIC("S") S:Y>0 TIUTYPE=+Y S GMTSREF="" D MAIN K GMTSREF
"RTN","GMTSPN",14,0)
 Q
"RTN","GMTSPN",15,0)
MAIN ; Control branching
"RTN","GMTSPN",16,0)
 N ADATE,ADMIT,ASUB,ATDATE,ATTNDNG,ATTYPE,ATYPE,AUTHOR,CHILD,CONEED
"RTN","GMTSPN",17,0)
 N COSAME,COSGEDBY,COSIG,CURIEN,DISCHG,GMTSA,GMTSAI,GMTSAII,GMTSCNT
"RTN","GMTSPN",18,0)
 N GMTSD,GMTSDIC,GMTSEXSG,GMTSI,GMTSIEN,GMTSID,GMTSIDC,GMTSII,GMTSIQ
"RTN","GMTSPN",19,0)
 N GMTSJ,GMTSK,GMTSODIC,GMTSPDIC,GMTSTDIC,GMTSPR,GMTSREC,GMTST,GMTSX
"RTN","GMTSPN",20,0)
 N GMTSXTRA,I,PARIEN,PDATE,PN,PSUB,PTYPE,REASON,SIGNEDBY,STATUS,TSPEC
"RTN","GMTSPN",21,0)
 N TYPE,X,Y
"RTN","GMTSPN",22,0)
 K ^TMP("TIU",$J) S GMTSX=1 D EXTIU Q:'$D(^TMP("TIU",$J))  D PNOTE
"RTN","GMTSPN",23,0)
 K ^TMP("TIU",$J),PN Q
"RTN","GMTSPN",24,0)
 ;                      
"RTN","GMTSPN",25,0)
 ; Progress Notes
"RTN","GMTSPN",26,0)
 ; 
"RTN","GMTSPN",27,0)
 ; ^TMP("TIU",$J,IDT,0)
"RTN","GMTSPN",28,0)
 ; ^TMP("TIU",$J,IDT,IEN,FLD,"E")
"RTN","GMTSPN",29,0)
 ; ^TMP("TIU",$J,IDT,IEN,FLD,"I")
"RTN","GMTSPN",30,0)
 ; ^TMP("TIU",$J,IDT,IEN,"REASON")
"RTN","GMTSPN",31,0)
 ; ^TMP("TIU",$J,IDT,IEN,"TEXT",0)
"RTN","GMTSPN",32,0)
 ; ^TMP("TIU",$J,IDT,IEN,"TEXT",#,0)
"RTN","GMTSPN",33,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZADD",IEN,FLD,"E")
"RTN","GMTSPN",34,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZADD",IEN,FLD,"I")
"RTN","GMTSPN",35,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZADD",IEN,"TEXT",0)
"RTN","GMTSPN",36,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZADD",IEN,"TEXT",#,0)
"RTN","GMTSPN",37,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZZAD",0)
"RTN","GMTSPN",38,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZZID",#,IEN,FLD,"E")
"RTN","GMTSPN",39,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZZID",#,IEN,FLD,"I")
"RTN","GMTSPN",40,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZZID",#,IEN,"TEXT",0)
"RTN","GMTSPN",41,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZZID",#,IEN,"TEXT",#,0)
"RTN","GMTSPN",42,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZZID",#,IEN,"ZADD",IEN,FLD,"E")
"RTN","GMTSPN",43,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZZID",#,IEN,"ZADD",IEN,FLD,"I")
"RTN","GMTSPN",44,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZZID",#,IEN,"ZADD",IEN,"TEXT",0)
"RTN","GMTSPN",45,0)
 ; ^TMP("TIU",$J,IDT,IEN,"ZZID",#,IEN,"ZADD",IEN,"TEXT",#,0)
"RTN","GMTSPN",46,0)
 ; 
"RTN","GMTSPN",47,0)
 ; Selected Progress Notes
"RTN","GMTSPN",48,0)
 ; 
"RTN","GMTSPN",49,0)
 ; ^TMP("TIU",$J,IDT,#,0)
"RTN","GMTSPN",50,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,FLD,"E")
"RTN","GMTSPN",51,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,FLD,"I")
"RTN","GMTSPN",52,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"REASON")
"RTN","GMTSPN",53,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"TEXT",0)
"RTN","GMTSPN",54,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"TEXT",#,0)
"RTN","GMTSPN",55,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZADD",IEN,FLD,"E")
"RTN","GMTSPN",56,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZADD",IEN,FLD,"I")
"RTN","GMTSPN",57,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZADD",IEN,"TEXT",0)
"RTN","GMTSPN",58,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZADD",IEN,"TEXT",#,0)
"RTN","GMTSPN",59,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZZID",0)
"RTN","GMTSPN",60,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZZID",#,IEN,FLD,"E")
"RTN","GMTSPN",61,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZZID",#,IEN,FLD,"I")
"RTN","GMTSPN",62,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZZID",#,IEN,"TEXT",0)
"RTN","GMTSPN",63,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZZID",#,IEN,"TEXT",#,0)
"RTN","GMTSPN",64,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZZID",#,IEN,"ZADD",IEN,FLD,"E")
"RTN","GMTSPN",65,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZZID",#,IEN,"ZADD",IEN,FLD,"I")
"RTN","GMTSPN",66,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZZID",#,IEN,"ZADD",IEN,"TEXT",0)
"RTN","GMTSPN",67,0)
 ; ^TMP("TIU",$J,IDT,#,IEN,"ZZID",#,IEN,"ZADD",IEN,"TEXT",#,0)
"RTN","GMTSPN",68,0)
 ;                           
"RTN","GMTSPN",69,0)
PNOTE ; Progress Notes
"RTN","GMTSPN",70,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  S GMTSD=0 F  S GMTSD=$O(^TMP("TIU",$J,GMTSD)) Q:+GMTSD=0  D
"RTN","GMTSPN",71,0)
 . S GMTSODIC="^TMP(""TIU"","_$J_","_GMTSD_"," D NOTE
"RTN","GMTSPN",72,0)
 Q:$D(GMTSQIT)  D CKP^GMTSUP Q:$D(GMTSQIT)  W ! Q
"RTN","GMTSPN",73,0)
SNOTE ; Selected Progress Notes
"RTN","GMTSPN",74,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  S GMTSD=0 F  S GMTSD=$O(^TMP("TIU",$J,GMTSD)) Q:+GMTSD=0  D
"RTN","GMTSPN",75,0)
 . N GMTSS S GMTSS=0 F  S GMTSS=$O(^TMP("TIU",$J,GMTSD,GMTSS)) Q:+GMTSS=0  D
"RTN","GMTSPN",76,0)
 . . S GMTSODIC="^TMP(""TIU"","_$J_","_GMTSD_","_GMTSS_"," D NOTE
"RTN","GMTSPN",77,0)
 Q:$D(GMTSQIT)  D CKP^GMTSUP Q:$D(GMTSQIT)  W ! Q
"RTN","GMTSPN",78,0)
 ;                
"RTN","GMTSPN",79,0)
NOTE ;   Primary Note
"RTN","GMTSPN",80,0)
 N GMTSTDIC,GMTSI,GMTSXTRA S GMTSI=0
"RTN","GMTSPN",81,0)
 F  S GMTSI=$O(@(GMTSODIC_GMTSI_")")) Q:+GMTSI=0  D
"RTN","GMTSPN",82,0)
 . S (GMTSTDIC,GMTSPDIC,GMTSDIC)=GMTSODIC,(PARIEN,CURIEN)=GMTSI
"RTN","GMTSPN",83,0)
 . S CHILD=+($G(@(GMTSDIC_CURIEN_",""ZZID"",0)"))),TYPE="",GMTSID=0
"RTN","GMTSPN",84,0)
 . S:$D(@(GMTSDIC_CURIEN_",""ZZID"")")) TYPE="Parent Interdisciplinary Note",GMTSID=1
"RTN","GMTSPN",85,0)
 . K PN S PN("#")=CURIEN,PN("#",0)="NOTE"
"RTN","GMTSPN",86,0)
 . D FLDS(GMTSDIC,CURIEN)
"RTN","GMTSPN",87,0)
 . D:$D(@(GMTSDIC_CURIEN_",""ZZID"")")) ST^GMTSPN1("Begin Interdisciplinary Note")
"RTN","GMTSPN",88,0)
 . D:$E($G(GMTSTIUC),1)'["D" WH^GMTSPN1 D:$G(GMTSTIUC)="DCS" WDH^GMTSPN1
"RTN","GMTSPN",89,0)
 . D:GMTSCNT=1&($G(GMTSTIUC)="DSB") WDBH^GMTSPN1
"RTN","GMTSPN",90,0)
 . I $G(GMTSTIUC)="DSB" D WDB^GMTSPN1(GMTSDIC,CURIEN) Q
"RTN","GMTSPN",91,0)
 . D:$D(@(GMTSDIC_CURIEN_",""PROBLEM"")")) WP^GMTSPN1(GMTSDIC,CURIEN)
"RTN","GMTSPN",92,0)
 . D WT^GMTSPN1(GMTSDIC,CURIEN)
"RTN","GMTSPN",93,0)
 . D WS^GMTSPN2(GMTSDIC,CURIEN)
"RTN","GMTSPN",94,0)
 . D:+($G(PN("AMENDMNT")))>0 AM^GMTSPN1(GMTSDIC,CURIEN)
"RTN","GMTSPN",95,0)
 . D BL^GMTSPN2 N GMTSODIC S GMTSODIC=GMTSTDIC_CURIEN_"," D ANOTE,INOTE
"RTN","GMTSPN",96,0)
 . I GMTSID D ST^GMTSPN1("End Interdisciplinary Note") S GMTSID=0
"RTN","GMTSPN",97,0)
 Q
"RTN","GMTSPN",98,0)
ANOTE ;   Addendum to a Progress Note
"RTN","GMTSPN",99,0)
 N GMTSAI,GMTSXTRA S GMTSAI=0
"RTN","GMTSPN",100,0)
 F  S GMTSAI=$O(@(GMTSODIC_"""ZADD"","_GMTSAI_")")) Q:+GMTSAI=0  D
"RTN","GMTSPN",101,0)
 . S (GMTSTDIC,GMTSDIC)=GMTSODIC_"""ZADD"",",CURIEN=GMTSAI
"RTN","GMTSPN",102,0)
 . K PN S PN("#")=GMTSI_"^"_CURIEN,PN("#",0)="ADDENDUM TO A NOTE",TYPE=""
"RTN","GMTSPN",103,0)
 . S:$D(@(GMTSPDIC_PARIEN_",""ZZID"")")) TYPE="Addendum to a Parent Interdisciplinary Note"
"RTN","GMTSPN",104,0)
 . D FLDS(GMTSDIC,CURIEN),WAH^GMTSPN1,WT^GMTSPN1(GMTSDIC,CURIEN)
"RTN","GMTSPN",105,0)
 . D WS^GMTSPN2(GMTSDIC,CURIEN),BL^GMTSPN2
"RTN","GMTSPN",106,0)
 Q
"RTN","GMTSPN",107,0)
INOTE ;   Interdisciplinary Progress Note
"RTN","GMTSPN",108,0)
 Q:+($G(@(GMTSODIC_"""ZZID"",0)")))'>0
"RTN","GMTSPN",109,0)
 N GMTSIQ,GMTSII,GMTSXTRA S GMTSIQ=0
"RTN","GMTSPN",110,0)
 F  S GMTSIQ=$O(@(GMTSODIC_"""ZZID"","_GMTSIQ_")")) Q:+GMTSIQ=0  D
"RTN","GMTSPN",111,0)
 . S GMTSTDIC=GMTSODIC N GMTSODIC S GMTSODIC=GMTSTDIC_"""ZZID"","_GMTSIQ_","
"RTN","GMTSPN",112,0)
 . S GMTSII=0 F  S GMTSII=$O(@(GMTSODIC_GMTSII_")")) Q:+GMTSII=0  D
"RTN","GMTSPN",113,0)
 . . S GMTSDIC=GMTSODIC,CURIEN=GMTSII
"RTN","GMTSPN",114,0)
 . . K PN S PN("#")=GMTSI_"^"_CURIEN,PN("#",0)="INTERDISCIPLINARY NOTE"
"RTN","GMTSPN",115,0)
 . . S TYPE="Child Interdisciplinary Note"
"RTN","GMTSPN",116,0)
 . . D FLDS(GMTSDIC,CURIEN),ST^GMTSPN1("Interdisciplinary Note Cont.")
"RTN","GMTSPN",117,0)
 . . D WIH^GMTSPN1 D:$D(@(GMTSDIC_CURIEN_",""PROBLEM"")")) WP^GMTSPN1(GMTSDIC,CURIEN)
"RTN","GMTSPN",118,0)
 . . D WT^GMTSPN1(GMTSDIC,CURIEN),WS^GMTSPN2(GMTSDIC,CURIEN)
"RTN","GMTSPN",119,0)
 . . D:+($G(PN("AMENDMNT")))>0 AM^GMTSPN1(GMTSDIC,CURIEN)
"RTN","GMTSPN",120,0)
 . . D BL^GMTSPN2
"RTN","GMTSPN",121,0)
 . . S GMTSTDIC=GMTSODIC N GMTSODIC S GMTSODIC=GMTSTDIC_GMTSII_",""ZADD"","
"RTN","GMTSPN",122,0)
 . . D AINOTE
"RTN","GMTSPN",123,0)
 Q
"RTN","GMTSPN",124,0)
AINOTE ;   Addendum to an Interdisciplinary Progress Note
"RTN","GMTSPN",125,0)
 N GMTSAII,GMTSXTRA S GMTSAII=0
"RTN","GMTSPN",126,0)
 F  S GMTSAII=$O(@(GMTSODIC_GMTSAII_")")) Q:+GMTSAII=0  D
"RTN","GMTSPN",127,0)
 . S GMTSDIC=GMTSODIC,CURIEN=GMTSAII
"RTN","GMTSPN",128,0)
 . K PN S PN("#")=GMTSI_"^"_GMTSII_"^"_CURIEN
"RTN","GMTSPN",129,0)
 . S PN("#",0)="ADDENDUM TO AN INTERDISCIPLINARY NOTE"
"RTN","GMTSPN",130,0)
 . S TYPE="Addendum to a Child Interdisciplinary Note"
"RTN","GMTSPN",131,0)
 . D FLDS(GMTSDIC,CURIEN),WAIH^GMTSPN1,WT^GMTSPN1(GMTSDIC,CURIEN)
"RTN","GMTSPN",132,0)
 . D WS^GMTSPN2(GMTSDIC,CURIEN),BL^GMTSPN2
"RTN","GMTSPN",133,0)
 Q
"RTN","GMTSPN",134,0)
 ;                           
"RTN","GMTSPN",135,0)
 ; Get Data
"RTN","GMTSPN",136,0)
EXTIU ;   Extract Patient/Visit VIA TIU
"RTN","GMTSPN",137,0)
 S DFN=+($G(DFN)) Q:DFN=0  S TIUTYPE=+($G(TIUTYPE)) Q:TIUTYPE=0  S GMTS1=+($G(GMTS1)) Q:GMTS1=0  S GMTS2=+($G(GMTS2)) Q:GMTS2=0  S GMTSNDM=+($G(GMTSNDM)) Q:GMTSNDM=0  S GMTSX=+($G(GMTSX))
"RTN","GMTSPN",138,0)
 I +($G(GMTSPXGO))>0,$L($T(VISIT^TIULAPIC)) D VISIT^TIULAPIC(DFN,TIUTYPE,GMTS1,GMTS2,GMTSNDM,+($G(GMTSX))) Q
"RTN","GMTSPN",139,0)
 D MAIN^TIULAPIC(DFN,TIUTYPE,GMTS1,GMTS2,GMTSNDM,+($G(GMTSX)))
"RTN","GMTSPN",140,0)
 Q
"RTN","GMTSPN",141,0)
FLDS(X,I) ; Get Fields
"RTN","GMTSPN",142,0)
 N GMTSDIC,GMTSIEN
"RTN","GMTSPN",143,0)
 S GMTSDIC=$G(X),GMTSIEN=$G(I) Q:'$L(GMTSIEN)
"RTN","GMTSPN",144,0)
 Q:$E($P(GMTSDIC,$J,1),1,11)'="^TMP(""TIU"","
"RTN","GMTSPN",145,0)
 Q:'$D(@($P(GMTSDIC,",",1,($L(GMTSDIC,",")-1))_")"))
"RTN","GMTSPN",146,0)
 Q:'$D(@(GMTSDIC_GMTSIEN_")"))
"RTN","GMTSPN",147,0)
 S GMTSDIC=GMTSDIC_GMTSIEN_","
"RTN","GMTSPN",148,0)
 N GMTSXTRA S GMTSCNT=+$G(GMTSCNT)+1
"RTN","GMTSPN",149,0)
 S X=$G(@(GMTSDIC_".07,""I"")")) D REGDT4^GMTSU S ADMIT=X
"RTN","GMTSPN",150,0)
 S X=$G(@(GMTSDIC_".08,""I"")")) D REGDT4^GMTSU S DISCHG=X
"RTN","GMTSPN",151,0)
 S:+DISCHG'>0 DISCHG="Present"
"RTN","GMTSPN",152,0)
 S:+ADMIT'>0 ADMIT="Unknown"
"RTN","GMTSPN",153,0)
 S AUTHOR=$G(@(GMTSDIC_"1202,""E"")"))
"RTN","GMTSPN",154,0)
 S ATTNDNG=$G(@(GMTSDIC_"1209,""E"")"))
"RTN","GMTSPN",155,0)
 S TSPEC=$G(@(GMTSDIC_"1402,""E"")"))
"RTN","GMTSPN",156,0)
 S STATUS=$G(@(GMTSDIC_".05,""E"")"))
"RTN","GMTSPN",157,0)
 S PN("DATE")=$G(@(GMTSDIC_"1301,""I"")"))
"RTN","GMTSPN",158,0)
 I PN("DATE")]"" S PN("DATE")=$$EDT^GMTSU(PN("DATE"))
"RTN","GMTSPN",159,0)
 S REASON=""
"RTN","GMTSPN",160,0)
 ;S REASON=$G(@(GMTSDIC_"""REASON"")"))
"RTN","GMTSPN",161,0)
 S PN("DOCTYPE")=$G(@(GMTSDIC_".01,""E"")"))
"RTN","GMTSPN",162,0)
 S PN("AUTHOR")=$G(@(GMTSDIC_"1202,""E"")"))
"RTN","GMTSPN",163,0)
 S PN("EXPSIGNR")=$G(@(GMTSDIC_"1204,""E"")"))
"RTN","GMTSPN",164,0)
 S PN("LOC")=$G(@(GMTSDIC_"1205,""E"")"))
"RTN","GMTSPN",165,0)
 S PN("EXPCOSNR")=$G(@(GMTSDIC_"1208,""E"")"))
"RTN","GMTSPN",166,0)
 S:$G(@(GMTSDIC_"1307,""I"")"))'="" PN("DDATE")=$$ED^GMTSU($G(@(GMTSDIC_"1307,""I"")")))
"RTN","GMTSPN",167,0)
 S:$G(@(GMTSDIC_"1501,""I"")"))'="" PN("SIGNDATE")=$$ED^GMTSU($G(@(GMTSDIC_"1501,""I"")")))
"RTN","GMTSPN",168,0)
 S PN("SIGDT")=$G(@(GMTSDIC_"1501,""I"")"))
"RTN","GMTSPN",169,0)
 I PN("SIGDT")]"" S PN("SIGDT")=$$EDT^GMTSU(PN("SIGDT"))
"RTN","GMTSPN",170,0)
 S SIGNEDBY=$G(@(GMTSDIC_"1502,""I"")"))
"RTN","GMTSPN",171,0)
 S PN("SIGBLK")=$G(@(GMTSDIC_"1503,""E"")"))
"RTN","GMTSPN",172,0)
 S PN("STITLE")=$G(@(GMTSDIC_"1504,""E"")"))
"RTN","GMTSPN",173,0)
 S PN("COSDT")=$G(@(GMTSDIC_"1507,""I"")"))
"RTN","GMTSPN",174,0)
 I PN("COSDT")]"" S (COSIG,PN("COSDT"))=$$EDT^GMTSU(PN("COSDT"))
"RTN","GMTSPN",175,0)
 S COSGEDBY=$G(@(GMTSDIC_"1508,""I"")"))
"RTN","GMTSPN",176,0)
 S CONEED=0 S:+($G(COSGEDBY))>0 CONEED=1
"RTN","GMTSPN",177,0)
 S PN("COBLK")=$G(@(GMTSDIC_"1509,""E"")"))
"RTN","GMTSPN",178,0)
 S PN("COTITLE")=$G(@(GMTSDIC_"1510,""E"")"))
"RTN","GMTSPN",179,0)
 S COSAME=$S(+($G(SIGNEDBY))>0&(+($G(SIGNEDBY))=+($G(COSGEDBY))):1,1:0)
"RTN","GMTSPN",180,0)
 S:CONEED>0 CONEED=$S(COSAME=1:0,1:CONEED)
"RTN","GMTSPN",181,0)
 S PN("SUBJ")=$G(@(GMTSDIC_"1701,""E"")"))
"RTN","GMTSPN",182,0)
 I $G(@(GMTSDIC_"1505,""I"")"))="C" D
"RTN","GMTSPN",183,0)
 . S PN("SCHART")="Signed on Chart by:",PN("SCHARTBY")="."
"RTN","GMTSPN",184,0)
 . S:$G(@(GMTSDIC_"1512,""E"")"))'="" PN("SCHARTBY")=$G(@(GMTSDIC_"1512,""E"")"))
"RTN","GMTSPN",185,0)
 I $E($G(GMTSTIUC),1)'["D",$G(@(GMTSDIC_"1511,""I"")"))="C" D
"RTN","GMTSPN",186,0)
 . S PN("COCHART")="Cosigned on Chart by:",PN("COCHARTBY")="."
"RTN","GMTSPN",187,0)
 . S:$G(@(GMTSDIC_"1513,""E"")"))'="" PN("COCHARTBY")=$G(@(GMTSDIC_"1513,""E"")"))
"RTN","GMTSPN",188,0)
 I $E($G(GMTSTIUC),1)["D",CONEED,$G(@(GMTSDIC_"1511,""I"")"))="C" D
"RTN","GMTSPN",189,0)
 . S PN("COCHART")="Cosigned on Chart by:",PN("COCHARTBY")="."
"RTN","GMTSPN",190,0)
 . S:$G(@(GMTSDIC_"1513,""E"")"))'="" PN("COCHARTBY")=$G(@(GMTSDIC_"1513,""E"")"))
"RTN","GMTSPN",191,0)
 S:$G(@(GMTSDIC_"1202,""I"")"))'=$G(@(GMTSDIC_"1502,""I"")")) PN("AUTH")="AUTHOR:  "_PN("AUTHOR")
"RTN","GMTSPN",192,0)
 S PN("AMENDMNT")=+($G(@(GMTSDIC_"1601,""I"")")))
"RTN","GMTSPN",193,0)
 Q
"RTN","GMTSPN1")
0^2^B33513212
"RTN","GMTSPN1",1,0)
GMTSPN1 ; SLC/KER - Progress Note Header/Sig/Text/Prob ; 04/11/2001
"RTN","GMTSPN1",2,0)
 ;;2.7;Health Summary;**12,35,45**;Oct 20, 1995
"RTN","GMTSPN1",3,0)
 Q
"RTN","GMTSPN1",4,0)
 ;                          
"RTN","GMTSPN1",5,0)
 ; External References
"RTN","GMTSPN1",6,0)
 ;    DBIA 10104 call $$UP^XLFSTR
"RTN","GMTSPN1",7,0)
 ;                     
"RTN","GMTSPN1",8,0)
 ; Write Headers
"RTN","GMTSPN1",9,0)
WH ;   Note Header
"RTN","GMTSPN1",10,0)
 Q:$D(GMTSQIT)  I GMTSCNT>1 D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",11,0)
 W $G(PN("DATE")),?21,"Title:  ",$$UP^XLFSTR($G(PN("DOCTYPE")))
"RTN","GMTSPN1",12,0)
 ;I $L($G(TYPE)) D CKP^GMTSUP Q:$D(GMTSQIT)  W !,?17,"Note Type:",?29,TYPE
"RTN","GMTSPN1",13,0)
 D REA($G(REASON))
"RTN","GMTSPN1",14,0)
 S (ADATE,PDATE)=$G(PN("DATE")),(ATYPE,PTYPE)=$G(PN("DOCTYPE")),(ASUB,PSUB)=$G(PN("SUBJ"))
"RTN","GMTSPN1",15,0)
 I $D(PN("AUTH")) D CKP^GMTSUP Q:$D(GMTSQIT)  W !?20,PN("AUTH")
"RTN","GMTSPN1",16,0)
 I PN("SUBJ")'="" D CKP^GMTSUP Q:$D(GMTSQIT)  W !?19,"Subject:  ",PN("SUBJ")
"RTN","GMTSPN1",17,0)
 Q
"RTN","GMTSPN1",18,0)
WDH ;   Discharge Summary Header
"RTN","GMTSPN1",19,0)
 Q:$D(GMTSQIT)  I GMTSCNT>1 D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",20,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W ADMIT,?12,"-",?14,DISCHG,?56,"Status: ",STATUS,!
"RTN","GMTSPN1",21,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W ?3,"Last Tr Specialty: ",TSPEC,?49,"Dict'd By: ",AUTHOR,!
"RTN","GMTSPN1",22,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W ?47,"Approved By: ",ATTNDNG,!
"RTN","GMTSPN1",23,0)
 Q
"RTN","GMTSPN1",24,0)
WDBH ;   Brief Discharge Summary Header
"RTN","GMTSPN1",25,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W "Admitted",?11,"Disch'd",?23,"Dictated By",?38,"Approved By",?53,"Cosigned",?64,"Status",!! Q
"RTN","GMTSPN1",26,0)
WAH ;   Addendum Header
"RTN","GMTSPN1",27,0)
 Q:$D(GMTSQIT)  I GMTSCNT>1 D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",28,0)
 W PN("DATE"),?21,"Title:  ",$$UP^XLFSTR(PN("DOCTYPE"))
"RTN","GMTSPN1",29,0)
 ;I $L($G(TYPE)) D CKP^GMTSUP Q:$D(GMTSQIT)  W !,?17,"Note Type:",?29,TYPE
"RTN","GMTSPN1",30,0)
 D REA($G(REASON)) I $L($G(ADATE)),$L($G(ATYPE)) D  Q:$D(GMTSQIT)
"RTN","GMTSPN1",31,0)
 . I $D(GMTSREF) D
"RTN","GMTSPN1",32,0)
 . . D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSPN1",33,0)
 . . W !,?23,"Ref:  ",$E(ATYPE,1,25),?55,"Dated:  ",ADATE
"RTN","GMTSPN1",34,0)
 I $D(PN("AUTH")) D CKP^GMTSUP Q:$D(GMTSQIT)  W !?20,PN("AUTH")
"RTN","GMTSPN1",35,0)
 I PN("SUBJ")'="" D CKP^GMTSUP Q:$D(GMTSQIT)  W !?19,"Subject:  ",PN("SUBJ")
"RTN","GMTSPN1",36,0)
 I '$L($G(PN("SUBJ"))),$L($G(ASUB)) D CKP^GMTSUP Q:$D(GMTSQIT)  W !?19,"Subject:  ",$G(ASUB)
"RTN","GMTSPN1",37,0)
 Q
"RTN","GMTSPN1",38,0)
ST(X) ;   Sub-Titles
"RTN","GMTSPN1",39,0)
 N GMTS,GMTS1,GMTS1,GMTST,GMTSB S GMTST=$G(X) Q:'$L(GMTST)
"RTN","GMTSPN1",40,0)
 S GMTST="<< "_GMTST_" >>",GMTS=""
"RTN","GMTSPN1",41,0)
 S $P(GMTS,"-",((((79-$L(GMTST))\2)\2)-6))="-"
"RTN","GMTSPN1",42,0)
 S $P(GMTS1," ",((((79-$L(GMTST))\2)\2)+6))=" "
"RTN","GMTSPN1",43,0)
 S GMTS2=GMTS_GMTS1,GMTS1=GMTS1_GMTS,GMTSB=GMTS1_GMTST_GMTS2
"RTN","GMTSPN1",44,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W !,GMTSB D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",45,0)
 Q
"RTN","GMTSPN1",46,0)
WIH ;   Interdisciplinary Note Header
"RTN","GMTSPN1",47,0)
 Q:$D(GMTSQIT)  I GMTSCNT>1 D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",48,0)
 W PN("DATE"),?21,"Title:  ",$$UP^XLFSTR(PN("DOCTYPE"))
"RTN","GMTSPN1",49,0)
 ;I $L($G(TYPE)) D CKP^GMTSUP Q:$D(GMTSQIT)  W !,?17,"Note Type:",?29,TYPE
"RTN","GMTSPN1",50,0)
 D REA($G(REASON)) S ADATE=$G(PN("DATE")),ATYPE=$G(PN("DOCTYPE")),ASUB=$G(PN("SUBJ"))
"RTN","GMTSPN1",51,0)
 I $L($G(PDATE)),$L($G(PTYPE)) D  Q:$D(GMTSQIT)
"RTN","GMTSPN1",52,0)
 . I $D(GMTSREF) D
"RTN","GMTSPN1",53,0)
 . . D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSPN1",54,0)
 . . W !,?23,"Ref:  ",$E(PTYPE,1,25),?55,"Dated:  ",PDATE
"RTN","GMTSPN1",55,0)
 . . ;W !,?16,"Parent Ref:  ",$E(PTYPE,1,25),?55,"Dated:  ",PDATE
"RTN","GMTSPN1",56,0)
 I $D(PN("AUTH")) D CKP^GMTSUP Q:$D(GMTSQIT)  W !?20,PN("AUTH")
"RTN","GMTSPN1",57,0)
 I PN("SUBJ")'="" D CKP^GMTSUP Q:$D(GMTSQIT)  W !?19,"Subject:  ",PN("SUBJ")
"RTN","GMTSPN1",58,0)
 I '$L($G(PN("SUBJ"))),$L($G(PSUB)) D CKP^GMTSUP Q:$D(GMTSQIT)  W !?19,"Subject:  ",$G(PSUB)
"RTN","GMTSPN1",59,0)
 Q
"RTN","GMTSPN1",60,0)
WAIH ;   Addendum to Interdisciplinary Note Header
"RTN","GMTSPN1",61,0)
 Q:$D(GMTSQIT)  I GMTSCNT>1 D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",62,0)
 W PN("DATE"),?21,"Title:  ",$$UP^XLFSTR(PN("DOCTYPE"))
"RTN","GMTSPN1",63,0)
 ;I $L($G(TYPE)) D CKP^GMTSUP Q:$D(GMTSQIT)  W !,?17,"Note Type:",?29,TYPE
"RTN","GMTSPN1",64,0)
 D REA($G(REASON)) I $L($G(ADATE)),$L($G(ATYPE)) D  Q:$D(GMTSQIT)
"RTN","GMTSPN1",65,0)
 . I $D(GMTSREF) D
"RTN","GMTSPN1",66,0)
 . . D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSPN1",67,0)
 . . W !,?23,"Ref:  ",$E(ATYPE,1,25),?55,"Dated:  ",ADATE
"RTN","GMTSPN1",68,0)
 . . ;W !,?17,"Child Ref:  ",$E(ATYPE,1,25),?55,"Dated:  ",ADATE
"RTN","GMTSPN1",69,0)
 I $L($G(PDATE)),$L($G(PTYPE)) D  Q:$D(GMTSQIT)
"RTN","GMTSPN1",70,0)
 . I $D(GMTSREF) D
"RTN","GMTSPN1",71,0)
 . . D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSPN1",72,0)
 . . W !,?23,"Ref:  ",$E(PTYPE,1,29),?55,"Dated:  ",PDATE
"RTN","GMTSPN1",73,0)
 . . ;W !,?16,"Parent Ref:  ",$E(PTYPE,1,25),?55,"Dated:  ",PDATE
"RTN","GMTSPN1",74,0)
 I $D(PN("AUTH")) D CKP^GMTSUP Q:$D(GMTSQIT)  W !?20,PN("AUTH")
"RTN","GMTSPN1",75,0)
 I PN("SUBJ")'="" D CKP^GMTSUP Q:$D(GMTSQIT)  W !?19,"Subject:  ",PN("SUBJ")
"RTN","GMTSPN1",76,0)
 I '$L($G(PN("SUBJ"))),$L($G(ASUB)) D CKP^GMTSUP Q:$D(GMTSQIT)  W !?19,"Subject:  ",$G(ASUB)
"RTN","GMTSPN1",77,0)
 I '$L($G(PN("SUBJ"))),'$L($G(ASUB)),$L(PSUB) D CKP^GMTSUP Q:$D(GMTSQIT)  W !?19,"Subject:  ",$G(PSUB)
"RTN","GMTSPN1",78,0)
 Q
"RTN","GMTSPN1",79,0)
 ; Write Note
"RTN","GMTSPN1",80,0)
WT(X,I) ;   Write Progress Note Text
"RTN","GMTSPN1",81,0)
 N GMTSD,GMTSIEN S GMTSD=$G(X),GMTSIEN=$G(I) Q:'$L(GMTSIEN)  Q:$E($P(GMTSD,$J,1),1,11)'="^TMP(""TIU"","
"RTN","GMTSPN1",82,0)
 Q:'$D(@($P(GMTSD,",",1,($L(GMTSD,",")-1))_")"))  Q:'$D(@(GMTSD_GMTSIEN_")"))  S GMTSD=GMTSD_GMTSIEN_",""TEXT"","
"RTN","GMTSPN1",83,0)
 N GMTSK S GMTSK=0 F  S GMTSK=$O(@(GMTSD_GMTSK_")")) Q:+GMTSK'>0  D  Q:$D(GMTSQIT)
"RTN","GMTSPN1",84,0)
 . D CKP^GMTSUP Q:$D(GMTSQIT)  W !,$G(@(GMTSD_GMTSK_",0)"))
"RTN","GMTSPN1",85,0)
 Q:$D(GMTSQIT)  D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",86,0)
 Q
"RTN","GMTSPN1",87,0)
WP(X,I) ;   Writes Problems associated with Note
"RTN","GMTSPN1",88,0)
 Q:$G(TIUNAM)["DISCHARGE"
"RTN","GMTSPN1",89,0)
 N GMTSD,GMTSIEN S GMTSD=$G(X),GMTSIEN=$G(I) Q:'$L(GMTSIEN)  Q:$E($P(GMTSD,$J,1),1,11)'="^TMP(""TIU"","
"RTN","GMTSPN1",90,0)
 Q:'$D(@($P(GMTSD,",",1,($L(GMTSD,",")-1))_")"))  Q:'$D(@(GMTSD_GMTSIEN_")"))  S GMTSD=GMTSD_GMTSIEN_",""PROBLEM"","
"RTN","GMTSPN1",91,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W !,"PROBLEM(S):  "
"RTN","GMTSPN1",92,0)
 N GMTSPR S GMTSPR=0 F  S GMTSPR=$O(@(GMTSD_GMTSPR_")")) Q:+GMTSPR'>0  D  Q:$D(GMTSQIT)
"RTN","GMTSPN1",93,0)
 . D:GMTSPR>1 CKP^GMTSUP Q:$D(GMTSQIT)  W !?15,$G(@(GMTSD_GMTSPR_",0)"))
"RTN","GMTSPN1",94,0)
 Q:$D(GMTSQIT)  D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",95,0)
 Q
"RTN","GMTSPN1",96,0)
AM(X,I) ;   Write Amendment
"RTN","GMTSPN1",97,0)
 Q:$D(GMTSQIT)  N GMTSD,GMTSIEN,GMTSA,GMTSI S GMTSD=$G(X),GMTSIEN=$G(I) Q:'$L(GMTSIEN)  Q:$E($P(GMTSD,$J,1),1,11)'="^TMP(""TIU"","
"RTN","GMTSPN1",98,0)
 Q:'$D(@($P(GMTSD,",",1,($L(GMTSD,",")-1))_")"))  Q:'$D(@(GMTSD_GMTSIEN_")"))
"RTN","GMTSPN1",99,0)
 S GMTSD=GMTSD_GMTSIEN_","
"RTN","GMTSPN1",100,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",101,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W !,$G(@(GMTSD_"1601,""E"")")),"  AMENDMENT FILED:"
"RTN","GMTSPN1",102,0)
 I $G(@(GMTSD_"1603,""E"")"))'="" D  Q:$D(GMTSQIT)
"RTN","GMTSPN1",103,0)
 . D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",104,0)
 . D CKP^GMTSUP Q:$D(GMTSQIT)  W !?10 F GMTSI=1:1:$L($G(@(GMTSD_"1602,""E"")"))) W "_"
"RTN","GMTSPN1",105,0)
 I $G(@(GMTSD_"1604,""E"")"))'="" D  Q:$D(GMTSQIT)
"RTN","GMTSPN1",106,0)
 . D CKP^GMTSUP Q:$D(GMTSQIT)  W !?28,"  /es/ ",$G(@(GMTSD_"1604,""E"")"))
"RTN","GMTSPN1",107,0)
 I $G(@(GMTSD_"1605,""E"")"))'="" D  Q:$D(GMTSQIT)
"RTN","GMTSPN1",108,0)
 . D CKP^GMTSUP Q:$D(GMTSQIT)  W !?34,$G(@(GMTSD_"1605,""E"")"))
"RTN","GMTSPN1",109,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN1",110,0)
 Q
"RTN","GMTSPN1",111,0)
WDB(X,I) ;   Writes Brief Discharge Summary
"RTN","GMTSPN1",112,0)
 Q:$D(GMTSQIT)  N GMTSD,GMTSIEN,GMTSA,GMTSI S GMTSD=$G(X),GMTSIEN=$G(I) Q:'$L(GMTSIEN)  Q:$E($P(GMTSD,$J,1),1,11)'="^TMP(""TIU"","
"RTN","GMTSPN1",113,0)
 Q:'$D(@($P(GMTSD,",",1,($L(GMTSD,",")-1))_")"))  Q:'$D(@(GMTSD_GMTSIEN_")"))
"RTN","GMTSPN1",114,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  D:GMTSNPG WDBH
"RTN","GMTSPN1",115,0)
 W $E($G(ADMIT),1,12),?11,$E($G(DISCHG),1,12),?23,$E($G(AUTHOR),1,14),?38,$E($G(ATTNDNG),1,14),?53,$E($G(COSIG),1,10),?64,$G(STATUS),!
"RTN","GMTSPN1",116,0)
 Q
"RTN","GMTSPN1",117,0)
REA(X) ;   Write Reason
"RTN","GMTSPN1",118,0)
 ;N REASON S REASON=$G(X) Q:'$L(REASON)  N IND S REASON=("< "_REASON_" >"),IND=79-$L(REASON) Q:IND'>0  S IND=IND\2 D CKP^GMTSUP Q:$D(GMTSQIT)  W !,?IND,REASON
"RTN","GMTSPN1",119,0)
 Q
"RTN","GMTSPN2")
0^8^B31673972
"RTN","GMTSPN2",1,0)
GMTSPN2 ; SLC/KER - Progress Note Signatures           ; 04/11/2001
"RTN","GMTSPN2",2,0)
 ;;2.7;Health Summary;**45**;Oct 20, 1995
"RTN","GMTSPN2",3,0)
 Q
"RTN","GMTSPN2",4,0)
 ;                          
"RTN","GMTSPN2",5,0)
 ; External References
"RTN","GMTSPN2",6,0)
 ;    DBIA  2056 call $$GET1^DIQ
"RTN","GMTSPN2",7,0)
 ;    DBIA 10060 ref ^VA(200, .137 Analog Pager  read w/Fileman
"RTN","GMTSPN2",8,0)
 ;    DBIA 10060 ref ^VA(200, .138 Digital Pager read w/Fileman
"RTN","GMTSPN2",9,0)
 ;                     
"RTN","GMTSPN2",10,0)
WS(X,I) ; Write Signatures 
"RTN","GMTSPN2",11,0)
 Q:$D(GMTSQIT)
"RTN","GMTSPN2",12,0)
 N GMTSDIC,GMTSIEN,GMTSA,GMTSG S GMTSDIC=$G(X),GMTSIEN=$G(I)
"RTN","GMTSPN2",13,0)
 Q:'$L(GMTSIEN)  Q:$E($P(GMTSDIC,$J,1),1,11)'="^TMP(""TIU"","
"RTN","GMTSPN2",14,0)
 Q:'$D(@($P(GMTSDIC,",",1,($L(GMTSDIC,",")-1))_")"))
"RTN","GMTSPN2",15,0)
 Q:'$D(@(GMTSDIC_GMTSIEN_")"))
"RTN","GMTSPN2",16,0)
 S GMTSDIC=GMTSDIC_GMTSIEN_","
"RTN","GMTSPN2",17,0)
 D UNS,SOC,SIG,UNC,COC,COS,EXT
"RTN","GMTSPN2",18,0)
 Q
"RTN","GMTSPN2",19,0)
UNS ;   Unsigned/Draft Copy
"RTN","GMTSPN2",20,0)
 Q:$D(GMTSQIT)  N GMTST S GMTST=$G(@(GMTSDIC_"1501,""I"")"))
"RTN","GMTSPN2",21,0)
 D:GMTST="" UNSIG
"RTN","GMTSPN2",22,0)
 Q
"RTN","GMTSPN2",23,0)
 ;
"RTN","GMTSPN2",24,0)
SOC ;   Signed on Chart
"RTN","GMTSPN2",25,0)
 Q:$D(GMTSQIT)  N GMTSP,GMTSB
"RTN","GMTSPN2",26,0)
 S GMTSP=$G(PN("SCHART")),GMTSB=$G(PN("SCHARTBY")) Q:'$L(GMTSP)  Q:'$L(GMTSB)
"RTN","GMTSPN2",27,0)
 D BL Q:$D(GMTSQIT)  D BY(GMTSP,"",GMTSB) Q:$D(GMTSQIT)
"RTN","GMTSPN2",28,0)
 Q
"RTN","GMTSPN2",29,0)
SIG ;   Signature Block, Name, Title and Date
"RTN","GMTSPN2",30,0)
 Q:$D(GMTSQIT)  N GMTSA,GMTSG,GMTSE,GMTST,GMTSD,GMTSP,GMTSB
"RTN","GMTSPN2",31,0)
 S GMTSP="Signed by:"
"RTN","GMTSPN2",32,0)
 S GMTSE=$G(@(GMTSDIC_"1505,""I"")"))
"RTN","GMTSPN2",33,0)
 S GMTSB=$G(PN("SIGBLK")) Q:'$L(GMTSB)
"RTN","GMTSPN2",34,0)
 S GMTST=$G(PN("STITLE"))
"RTN","GMTSPN2",35,0)
 S GMTSD=$G(PN("SIGDT"))
"RTN","GMTSPN2",36,0)
 S GMTSA=$$GET1^DIQ(200,+($G(SIGNEDBY)),.137)
"RTN","GMTSPN2",37,0)
 S GMTSG=$$GET1^DIQ(200,+($G(SIGNEDBY)),.138)
"RTN","GMTSPN2",38,0)
 D BL Q:$D(GMTSQIT)
"RTN","GMTSPN2",39,0)
 D BY(GMTSP,GMTSE,GMTSB) Q:$D(GMTSQIT)
"RTN","GMTSPN2",40,0)
 D SB(GMTST,GMTSD) Q:$D(GMTSQIT)
"RTN","GMTSPN2",41,0)
 D PG(GMTSA,GMTSG) Q:$D(GMTSQIT)
"RTN","GMTSPN2",42,0)
 Q
"RTN","GMTSPN2",43,0)
UNC ;   Uncosigned - Requires Cosignature
"RTN","GMTSPN2",44,0)
 Q:$D(GMTSQIT)  N GMTSP,GMTSB
"RTN","GMTSPN2",45,0)
 S GMTSP=$G(@(GMTSDIC_".05,""E"")")) Q:GMTSP'="UNCOSIGNED"
"RTN","GMTSPN2",46,0)
 Q:$E($G(GMTSTIUC),1)["D"&('CONEED)
"RTN","GMTSPN2",47,0)
 D BL Q:$D(GMTSQIT)
"RTN","GMTSPN2",48,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W !?27,"** REQUIRES COSIGNATURE **"
"RTN","GMTSPN2",49,0)
 Q
"RTN","GMTSPN2",50,0)
COC ;   Cosigned on Chart
"RTN","GMTSPN2",51,0)
 Q:$D(GMTSQIT)  N GMTSP,GMTSB
"RTN","GMTSPN2",52,0)
 S GMTSP=$G(PN("COCHART")),GMTSB=$G(PN("COCHARTBY")) Q:'$L(GMTSP)  Q:'$L(GMTSB)
"RTN","GMTSPN2",53,0)
 Q:$E($G(GMTSTIUC),1)["D"&('CONEED)
"RTN","GMTSPN2",54,0)
 D BL Q:$D(GMTSQIT)
"RTN","GMTSPN2",55,0)
 D BY(GMTSP,"",GMTSB)
"RTN","GMTSPN2",56,0)
 Q
"RTN","GMTSPN2",57,0)
COS ;   Co-Signature Block, Name, Title and Date
"RTN","GMTSPN2",58,0)
 Q:$D(GMTSQIT)  N GMTSA,GMTSG,GMTSE,GMTST,GMTSD,GMTSP,GMTSB
"RTN","GMTSPN2",59,0)
 S GMTSP="Cosigned by:",GMTSE=$G(@(GMTSDIC_"1511,""I"")")),GMTSB=$G(PN("COBLK")) Q:'$L(GMTSB)
"RTN","GMTSPN2",60,0)
 S GMTST=$G(PN("COTITLE")),GMTSD=$G(PN("COSDT"))
"RTN","GMTSPN2",61,0)
 S GMTSA=$$GET1^DIQ(200,+($G(COSGEDBY)),.137),GMTSG=$$GET1^DIQ(200,+($G(COSGEDBY)),.138)
"RTN","GMTSPN2",62,0)
 Q:$E($G(GMTSTIUC),1)["D"&('CONEED)
"RTN","GMTSPN2",63,0)
 D BL Q:$D(GMTSQIT)
"RTN","GMTSPN2",64,0)
 D BY(GMTSP,GMTSE,GMTSB) Q:$D(GMTSQIT)
"RTN","GMTSPN2",65,0)
 D SB(GMTST,GMTSD) Q:$D(GMTSQIT)
"RTN","GMTSPN2",66,0)
 D PG(GMTSA,GMTSG)
"RTN","GMTSPN2",67,0)
 Q
"RTN","GMTSPN2",68,0)
EXT ;   Extra Signatures
"RTN","GMTSPN2",69,0)
 ;     Receipt Acknowledged by:
"RTN","GMTSPN2",70,0)
 Q:$D(GMTSQIT)
"RTN","GMTSPN2",71,0)
 I +$O(@(GMTSDIC_"""EXTRASGNR"",0)")) D  Q:$D(GMTSQIT)
"RTN","GMTSPN2",72,0)
 . D BL Q:$D(GMTSQIT)  D BY("Receipt Acknowledged by:","","")
"RTN","GMTSPN2",73,0)
 ;     Extra Signature Block, Name, Title and Date
"RTN","GMTSPN2",74,0)
 N GMTSXTRA S GMTSXTRA=0
"RTN","GMTSPN2",75,0)
 F  S GMTSXTRA=+$O(@(GMTSDIC_"""EXTRASGNR"","_GMTSXTRA_")")) Q:+GMTSXTRA'>0  D  Q:$D(GMTSQIT)
"RTN","GMTSPN2",76,0)
 . N GMTSA,GMTSG,GMTSE,GMTST,GMTSD,GMTSP,GMTSB,GMTSI,GMTSC
"RTN","GMTSPN2",77,0)
 . S GMTSC=+($G(@(GMTSDIC_"""EXTRASGNR"","_GMTSXTRA_",""DATE"")")))
"RTN","GMTSPN2",78,0)
 . I GMTSC'>0 W ?27,"* AWAITING SIGNATURE *" D BL Q
"RTN","GMTSPN2",79,0)
 . S GMTSP="",GMTSE="/es/",GMTSB=$G(@(GMTSDIC_"""EXTRASGNR"","_GMTSXTRA_",""NAME"")")) Q:'$L(GMTSB)
"RTN","GMTSPN2",80,0)
 . S GMTST=$G(@(GMTSDIC_"""EXTRASGNR"","_GMTSXTRA_",""TITLE"")"))
"RTN","GMTSPN2",81,0)
 . S GMTSD=$$EDT^GMTSU(GMTSC)
"RTN","GMTSPN2",82,0)
 . S GMTSI=+($G(@(GMTSDIC_"""EXTRASGNR"","_GMTSXTRA_",""EXTRA"")")))
"RTN","GMTSPN2",83,0)
 . S GMTSA=$$GET1^DIQ(200,+($G(GMTSI)),.137)
"RTN","GMTSPN2",84,0)
 . S GMTSG=$$GET1^DIQ(200,+($G(GMTSI)),.138)
"RTN","GMTSPN2",85,0)
 . I +($G(GMTSXTRA))>1 D BL Q:$D(GMTSQIT)  D BL Q:$D(GMTSQIT)
"RTN","GMTSPN2",86,0)
 . D BY(GMTSP,GMTSE,GMTSB) Q:$D(GMTSQIT)
"RTN","GMTSPN2",87,0)
 . D SB(GMTST,GMTSD) Q:$D(GMTSQIT)
"RTN","GMTSPN2",88,0)
 . D PG(GMTSA,GMTSG) Q:$D(GMTSQIT)
"RTN","GMTSPN2",89,0)
 Q
"RTN","GMTSPN2",90,0)
BY(GMTSH,GMTSE,GMTSN) ; Signed by
"RTN","GMTSPN2",91,0)
 S GMTSH=$$TRIM($G(GMTSH)),GMTSE=$G(GMTSE),GMTSN=$G(GMTSN) Q:'$L((GMTSH_GMTSN))
"RTN","GMTSPN2",92,0)
 S:$L(GMTSH) GMTSH=GMTSH_"  " S GMTSE=$S(GMTSE="E":"/es/  ",GMTSE["/es/":"/es/  ",1:"") S:GMTSN="."&(GMTSH[" by:") GMTSH=$P(GMTSH," by:",1)_".",GMTSN="" S:GMTSN="." GMTSN=""
"RTN","GMTSPN2",93,0)
 I $L($$TRIM(GMTSH)) D CKP^GMTSUP Q:$D(GMTSQIT)  W !,$J("",(27-$L(GMTSH))),GMTSH
"RTN","GMTSPN2",94,0)
 W ?27,GMTSE,GMTSN
"RTN","GMTSPN2",95,0)
 Q
"RTN","GMTSPN2",96,0)
SB(GMTSB,GMTSD) ; Signature Block
"RTN","GMTSPN2",97,0)
 K ^UTILITY($J,"W") N X,DIWT,DIWL,DIWR,DIWF,GMTSI
"RTN","GMTSPN2",98,0)
 S (X,GMTSB)=$G(GMTSB),GMTSD=$G(GMTSD) Q:'$L((GMTSB_GMTSD))
"RTN","GMTSPN2",99,0)
 S GMTSI=1,DIWL=0,DIWF="C35" D ^DIWP S GMTSB=$$TRIM($G(^UTILITY($J,"W",0,1,0))) K:'$L(GMTSB) ^UTILITY($J,"W")
"RTN","GMTSPN2",100,0)
 I $L(GMTSD),'$L(GMTSB) K ^UTILITY($J,"W") D CKP^GMTSUP Q:$D(GMTSQIT)  W !,?27,GMTSD Q
"RTN","GMTSPN2",101,0)
 Q:'$L(GMTSB)  D CKP^GMTSUP K:$D(GMTSQIT) ^UTILITY($J,"W") Q:$D(GMTSQIT)  W !,?27,GMTSB,"  ",GMTSD
"RTN","GMTSPN2",102,0)
 F  S GMTSI=$O(^UTILITY($J,"W",0,GMTSI)) Q:+GMTSI=0  D  Q:$D(GMTSQIT)
"RTN","GMTSPN2",103,0)
 . S GMTSB=$$TRIM($G(^UTILITY($J,"W",0,GMTSI,0))) Q:'$L(GMTSB)
"RTN","GMTSPN2",104,0)
 . D CKP^GMTSUP K:$D(GMTSQIT) ^UTILITY($J,"W") Q:$D(GMTSQIT)  W !,?27,GMTSB,"  "
"RTN","GMTSPN2",105,0)
 K ^UTILITY($J,"W")
"RTN","GMTSPN2",106,0)
 Q
"RTN","GMTSPN2",107,0)
PG(GMTSA,GMTSD) ; Pagers
"RTN","GMTSPN2",108,0)
 N GMTS S GMTS=0,GMTSA=$G(GMTSA),GMTSD=$G(GMTSD) Q:'$L((GMTSA_GMTSD))  Q:(+GMTSA+GMTSD)'>0
"RTN","GMTSPN2",109,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W ! I $L(GMTSA),+GMTSA>0 D  Q:$D(GMTSQIT)
"RTN","GMTSPN2",110,0)
 . D CKP^GMTSUP Q:$D(GMTSQIT)  W !?34,"Analog Pager:  ",GMTSA S GMTS=1
"RTN","GMTSPN2",111,0)
 I $L(GMTSD),+GMTSD>0 D  Q:$D(GMTSQIT)
"RTN","GMTSPN2",112,0)
 . D CKP^GMTSUP Q:$D(GMTSQIT)  W !?33,"Digital Pager:  ",GMTSD S GMTS=1
"RTN","GMTSPN2",113,0)
 Q
"RTN","GMTSPN2",114,0)
BL ; Blank Line
"RTN","GMTSPN2",115,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W !
"RTN","GMTSPN2",116,0)
 Q
"RTN","GMTSPN2",117,0)
UNSIG ; Unsigned Note
"RTN","GMTSPN2",118,0)
 N GMTS,GMTS1,GMTS1,GMTST,GMTSB S GMTST="<  THE ABOVE NOTE IS UNSIGNED  >",GMTS=""
"RTN","GMTSPN2",119,0)
 S $P(GMTS," ",((79-$L(GMTST))\2)\2)=" ",$P(GMTS1," ",((79-$L(GMTST))\2)\2)=" "
"RTN","GMTSPN2",120,0)
 S GMTS2=GMTS_GMTS1,GMTS1=GMTS1_GMTS,GMTSB=GMTS1_GMTST_GMTS2
"RTN","GMTSPN2",121,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W ! D CKP^GMTSUP Q:$D(GMTSQIT)  W !,GMTSB
"RTN","GMTSPN2",122,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)  W !,"- DRAFT COPY * DRAFT COPY * DRAFT COPY * DRAFT COPY * DRAFT COPY * DRAFT COPY -"
"RTN","GMTSPN2",123,0)
 Q
"RTN","GMTSPN2",124,0)
TRIM(X) S X=$G(X) F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","GMTSPN2",125,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","GMTSPN2",126,0)
 Q X
"RTN","GMTSPNS1")
1^4
"RTN","GMTSPNSL")
0^3^B2177783
"RTN","GMTSPNSL",1,0)
GMTSPNSL ; SLC/KER - Progress Note - Selected          ; 04/11/2001
"RTN","GMTSPNSL",2,0)
 ;;2.7;Health Summary;**12,30,35,45**;Oct 20, 1995
"RTN","GMTSPNSL",3,0)
 ;                          
"RTN","GMTSPNSL",4,0)
 ; External References
"RTN","GMTSPNSL",5,0)
 ;    DBIA  3062 call MAIN^TIULAPIS
"RTN","GMTSPNSL",6,0)
 ;                     
"RTN","GMTSPNSL",7,0)
MAIN ; Control branching
"RTN","GMTSPNSL",8,0)
 N ADATE,ASUB,ATDATE,ATTYPE,ATYPE,CHILD,COSGEDBY,CURIEN,GMTSA,GMTSAI
"RTN","GMTSPNSL",9,0)
 N GMTSAII,GMTSCNT,GMTSD,GMTSDIC,GMTSEXSG,GMTSI,GMTSIEN,GMTSII,GMTSIQ
"RTN","GMTSPNSL",10,0)
 N GMTSJ,GMTSK,GMTSODIC,GMTSPDIC,GMTSTDIC,GMTSPR,GMTSREC,GMTST,GMTSX
"RTN","GMTSPNSL",11,0)
 N GMTSXTRA,GMTDOC,I,PARIEN,PDATE,PN,PSUB,PTYPE,REASON,SIGNEDBY,TYPE
"RTN","GMTSPNSL",12,0)
 N TIUDOC,TIUSTAT,GMTSTIUC,X,Y K ^TMP("TIU",$J) S GMTSX=1,GMTSI=0,GMTSTIUC="P"
"RTN","GMTSPNSL",13,0)
 F  S GMTSI=$O(GMTSEG(+GMTSEGN,8925.1,GMTSI)) Q:+GMTSI'>0  D
"RTN","GMTSPNSL",14,0)
 . S TIUDOC(GMTSI)=+$G(GMTSEG(+GMTSEGN,8925.1,GMTSI))
"RTN","GMTSPNSL",15,0)
 . S GMTDOC(GMTSI)=$$GET1^DIQ(8925.1,(+(TIUDOC(GMTSI))_","),.01)
"RTN","GMTSPNSL",16,0)
 . S:$L($G(GMTDOC(GMTSI))) GMTDOC("B",GMTDOC(GMTSI),GMTSI)=""
"RTN","GMTSPNSL",17,0)
 D MAIN^TIULAPIS(DFN,.TIUDOC,"ALL",GMTS1,GMTS2,GMTSNDM,GMTSX)
"RTN","GMTSPNSL",18,0)
 Q:'$D(^TMP("TIU",$J))  D SNOTE^GMTSPN K ^TMP("TIU",$J),PN Q
"VER")
8.0^22.0
**END**
**END**

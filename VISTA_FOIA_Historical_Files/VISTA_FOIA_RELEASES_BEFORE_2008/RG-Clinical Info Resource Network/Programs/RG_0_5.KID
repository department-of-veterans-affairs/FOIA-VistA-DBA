KIDS Distribution saved on Oct 06, 1998@15:39:11
Clinical Information Resource Network (CIRN) 0.5 (Pre-Implementation)
**KIDS**:CIRN PRE-IMP 0.5^CLINICAL INFO RESOURCE NETWORK 0.5^DG*5.3*172^

**INSTALL NAME**
CIRN PRE-IMP 0.5
"BLD",434,0)
CIRN PRE-IMP 0.5^^1^2980930^y
"BLD",434,1,0)
^^4^4^2980923^
"BLD",434,1,1,0)
The Clinical Information Resource Network (CIRN) Pre-implementation
"BLD",434,1,2,0)
software Version 0.5 release contains the calculation of CIRN Master of
"BLD",434,1,3,0)
Record (CMOR) scores, provides for cleanup of Eligibility Codes,
"BLD",434,1,4,0)
Pseudo-Social Security Numbers (SSNs), MARITAL STATUS and RELIGION files.
"BLD",434,10,0)
^9.63^2^2
"BLD",434,10,1,0)
CLINICAL INFO RESOURCE NETWORK 0.5
"BLD",434,10,2,0)
DG*5.3*172
"BLD",434,10,"B","CLINICAL INFO RESOURCE NETWORK 0.5",1)

"BLD",434,10,"B","DG*5.3*172",2)

"BLD",434,"KRN",0)
^9.67PA^19^18
"BLD",434,"KRN",.4,0)
.4
"BLD",434,"KRN",.401,0)
.401
"BLD",434,"KRN",.402,0)
.402
"BLD",434,"KRN",.403,0)
.403
"BLD",434,"KRN",.5,0)
.5
"BLD",434,"KRN",.84,0)
.84
"BLD",434,"KRN",3.6,0)
3.6
"BLD",434,"KRN",3.8,0)
3.8
"BLD",434,"KRN",9.2,0)
9.2
"BLD",434,"KRN",9.8,0)
9.8
"BLD",434,"KRN",19,0)
19
"BLD",434,"KRN",19.1,0)
19.1
"BLD",434,"KRN",101,0)
101
"BLD",434,"KRN",409.61,0)
409.61
"BLD",434,"KRN",771,0)
771
"BLD",434,"KRN",869.2,0)
869.2
"BLD",434,"KRN",870,0)
870
"BLD",434,"KRN",8994,0)
8994
"BLD",434,"KRN","B",.4,.4)

"BLD",434,"KRN","B",.401,.401)

"BLD",434,"KRN","B",.402,.402)

"BLD",434,"KRN","B",.403,.403)

"BLD",434,"KRN","B",.5,.5)

"BLD",434,"KRN","B",.84,.84)

"BLD",434,"KRN","B",3.6,3.6)

"BLD",434,"KRN","B",3.8,3.8)

"BLD",434,"KRN","B",9.2,9.2)

"BLD",434,"KRN","B",9.8,9.8)

"BLD",434,"KRN","B",19,19)

"BLD",434,"KRN","B",19.1,19.1)

"BLD",434,"KRN","B",101,101)

"BLD",434,"KRN","B",409.61,409.61)

"BLD",434,"KRN","B",771,771)

"BLD",434,"KRN","B",869.2,869.2)

"BLD",434,"KRN","B",870,870)

"BLD",434,"KRN","B",8994,8994)

"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"VER")
8.0^21.0
**INSTALL NAME**
CLINICAL INFO RESOURCE NETWORK 0.5
"BLD",435,0)
CLINICAL INFO RESOURCE NETWORK 0.5^CLINICAL INFO RESOURCE NETWORK^0^2980930^y
"BLD",435,1,0)
^^4^4^2980928^
"BLD",435,1,1,0)
The Clinical Information Resource Network (CIRN) Pre-implementation
"BLD",435,1,2,0)
software Version 0.5 software calculates the CIRN Master of Record (CMOR)
"BLD",435,1,3,0)
scores and also provides utilities for the cleanup of potential problem
"BLD",435,1,4,0)
SSNs and Eligibility Codes.
"BLD",435,4,0)
^9.64PA^991.8^1
"BLD",435,4,991.8,0)
991.8
"BLD",435,4,991.8,222)
y^y^f^^y^^y^o^n
"BLD",435,4,"B",991.8,991.8)

"BLD",435,"ABNS",0)
^9.66A^1^1
"BLD",435,"ABNS",1,0)
RG
"BLD",435,"ABNS",1,1,0)
^9.661A^^
"BLD",435,"ABNS","B","RG",1)

"BLD",435,"ABPKG")
n^n^
"BLD",435,"INIT")
RGPRPST
"BLD",435,"KRN",0)
^9.67PA^19^18
"BLD",435,"KRN",.4,0)
.4
"BLD",435,"KRN",.4,"NM",0)
^9.68A^^
"BLD",435,"KRN",.401,0)
.401
"BLD",435,"KRN",.402,0)
.402
"BLD",435,"KRN",.403,0)
.403
"BLD",435,"KRN",.5,0)
.5
"BLD",435,"KRN",.84,0)
.84
"BLD",435,"KRN",3.6,0)
3.6
"BLD",435,"KRN",3.8,0)
3.8
"BLD",435,"KRN",3.8,"NM",0)
^9.68A^^0
"BLD",435,"KRN",9.2,0)
9.2
"BLD",435,"KRN",9.2,"NM",0)
^9.68A^^
"BLD",435,"KRN",9.8,0)
9.8
"BLD",435,"KRN",9.8,"NM",0)
^9.68A^10^7
"BLD",435,"KRN",9.8,"NM",3,0)
RGVCCMR1^^0^B34779940
"BLD",435,"KRN",9.8,"NM",4,0)
RGVCCMR2^^0^B28259272
"BLD",435,"KRN",9.8,"NM",5,0)
RGRSWPT^^0^B4114330
"BLD",435,"KRN",9.8,"NM",6,0)
RGPRELIG^^0^B8053996
"BLD",435,"KRN",9.8,"NM",7,0)
RGPRSSN^^0^B29920416
"BLD",435,"KRN",9.8,"NM",9,0)
RGMTDPSC^^0^B20390212
"BLD",435,"KRN",9.8,"NM",10,0)
RGMTDPCT^^0^B18916445
"BLD",435,"KRN",9.8,"NM","B","RGMTDPCT",10)

"BLD",435,"KRN",9.8,"NM","B","RGMTDPSC",9)

"BLD",435,"KRN",9.8,"NM","B","RGPRELIG",6)

"BLD",435,"KRN",9.8,"NM","B","RGPRSSN",7)

"BLD",435,"KRN",9.8,"NM","B","RGRSWPT",5)

"BLD",435,"KRN",9.8,"NM","B","RGVCCMR1",3)

"BLD",435,"KRN",9.8,"NM","B","RGVCCMR2",4)

"BLD",435,"KRN",19,0)
19
"BLD",435,"KRN",19,"NM",0)
^9.68A^10^10
"BLD",435,"KRN",19,"NM",1,0)
RGCIRN CMOR MAIN^^0
"BLD",435,"KRN",19,"NM",2,0)
RGCIRN CMOR STATUS^^0
"BLD",435,"KRN",19,"NM",3,0)
RGCIRN CMOR INDIV^^0
"BLD",435,"KRN",19,"NM",4,0)
RGCIRN CMOR START^^0
"BLD",435,"KRN",19,"NM",5,0)
RGCIRN CMOR STOP^^0
"BLD",435,"KRN",19,"NM",6,0)
RGPR PRE-IMP ELIG REPORT^^0
"BLD",435,"KRN",19,"NM",7,0)
RGPR PRE-IMP MENU^^0
"BLD",435,"KRN",19,"NM",8,0)
RGPR PRE-IMP SSN REPORT^^0
"BLD",435,"KRN",19,"NM",9,0)
RGCIRN CMOR DUP SCORES^^0
"BLD",435,"KRN",19,"NM",10,0)
RGCIRN CMOR DUP STATS^^0
"BLD",435,"KRN",19,"NM","B","RGCIRN CMOR DUP SCORES",9)

"BLD",435,"KRN",19,"NM","B","RGCIRN CMOR DUP STATS",10)

"BLD",435,"KRN",19,"NM","B","RGCIRN CMOR INDIV",3)

"BLD",435,"KRN",19,"NM","B","RGCIRN CMOR MAIN",1)

"BLD",435,"KRN",19,"NM","B","RGCIRN CMOR START",4)

"BLD",435,"KRN",19,"NM","B","RGCIRN CMOR STATUS",2)

"BLD",435,"KRN",19,"NM","B","RGCIRN CMOR STOP",5)

"BLD",435,"KRN",19,"NM","B","RGPR PRE-IMP ELIG REPORT",6)

"BLD",435,"KRN",19,"NM","B","RGPR PRE-IMP MENU",7)

"BLD",435,"KRN",19,"NM","B","RGPR PRE-IMP SSN REPORT",8)

"BLD",435,"KRN",19.1,0)
19.1
"BLD",435,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",435,"KRN",101,0)
101
"BLD",435,"KRN",101,"NM",0)
^9.68A^^
"BLD",435,"KRN",409.61,0)
409.61
"BLD",435,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",435,"KRN",771,0)
771
"BLD",435,"KRN",771,"NM",0)
^9.68A^^
"BLD",435,"KRN",869.2,0)
869.2
"BLD",435,"KRN",869.2,"NM",0)
^9.68A^^
"BLD",435,"KRN",870,0)
870
"BLD",435,"KRN",870,"NM",0)
^9.68A^^
"BLD",435,"KRN",8994,0)
8994
"BLD",435,"KRN",8994,"NM",0)
^9.68A^^
"BLD",435,"KRN","B",.4,.4)

"BLD",435,"KRN","B",.401,.401)

"BLD",435,"KRN","B",.402,.402)

"BLD",435,"KRN","B",.403,.403)

"BLD",435,"KRN","B",.5,.5)

"BLD",435,"KRN","B",.84,.84)

"BLD",435,"KRN","B",3.6,3.6)

"BLD",435,"KRN","B",3.8,3.8)

"BLD",435,"KRN","B",9.2,9.2)

"BLD",435,"KRN","B",9.8,9.8)

"BLD",435,"KRN","B",19,19)

"BLD",435,"KRN","B",19.1,19.1)

"BLD",435,"KRN","B",101,101)

"BLD",435,"KRN","B",409.61,409.61)

"BLD",435,"KRN","B",771,771)

"BLD",435,"KRN","B",869.2,869.2)

"BLD",435,"KRN","B",870,870)

"BLD",435,"KRN","B",8994,8994)

"BLD",435,"PRE")
RGPRENV
"BLD",435,"QUES",0)
^9.62^^
"BLD",435,"REQB",0)
^9.611^^
"DATA",991.8,1,0)
1^^
"DATA",991.8,1,1)
^^^^^
"DATA",991.8,1,"CMOR")
^^^^^^^^
"DATA",991.8,1,"PC",0)
^991.817P^^0
"FIA",991.8)
CIRN SITE PARAMETER
"FIA",991.8,0)
^RGSITE(991.8,
"FIA",991.8,0,0)
991.8
"FIA",991.8,0,1)
y^y^f^^y^^y^o^n
"FIA",991.8,0,10)

"FIA",991.8,0,11)

"FIA",991.8,0,"RLRO")

"FIA",991.8,0,"VR")
0.5^CLINICAL INFO RESOURCE NETWORK
"FIA",991.8,991.8)
0
"FIA",991.8,991.817)
0
"INIT")
RGPRPST
"KRN",19,5674,-1)
0^4
"KRN",19,5674,0)
RGCIRN CMOR START^Start/Restart CMOR Score Calculation^^R^^^^^^^^CLINICAL INFO RESOURCE NETWORK
"KRN",19,5674,1,0)
^^2^2^2980826^
"KRN",19,5674,1,1,0)
This option starts the running of CIRN Master of Record (CMOR) scores
"KRN",19,5674,1,2,0)
initialization process.
"KRN",19,5674,25)
RGVCCMR1
"KRN",19,5674,"U")
START/RESTART CMOR SCORE CALCU
"KRN",19,5675,-1)
0^5
"KRN",19,5675,0)
RGCIRN CMOR STOP^Stop CMOR Score Calculation^^R^^^^^^^^CLINICAL INFO RESOURCE NETWORK
"KRN",19,5675,1,0)
^^2^2^2980826^
"KRN",19,5675,1,1,0)
This option allows the users to stop the CIRN Master of Record (CMOR)
"KRN",19,5675,1,2,0)
score initialization process.
"KRN",19,5675,25)
STOP^RGVCCMR1
"KRN",19,5675,"U")
STOP CMOR SCORE CALCULATION
"KRN",19,5676,-1)
0^2
"KRN",19,5676,0)
RGCIRN CMOR STATUS^CMOR Score Calculation Status^^R^^^^^^^^CLINICAL INFO RESOURCE NETWORK
"KRN",19,5676,1,0)
^^2^2^2980826^
"KRN",19,5676,1,1,0)
This option allows the users to status the progress of the CIRN Master of
"KRN",19,5676,1,2,0)
Record (CMOR) score initialization process.
"KRN",19,5676,25)
DISPLAY^RGVCCMR1
"KRN",19,5676,"U")
CMOR SCORE CALCULATION STATUS
"KRN",19,5677,-1)
0^1
"KRN",19,5677,0)
RGCIRN CMOR MAIN^CIRN Master of Record Menu^^M^^^^^^^^CLINICAL INFO RESOURCE NETWORK^^1
"KRN",19,5677,1,0)
^^4^4^2980904^^
"KRN",19,5677,1,1,0)
This menu contains all of the options that deal with the calculation
"KRN",19,5677,1,2,0)
of CIRN Master of Record (CMOR) patient activity scores.
"KRN",19,5677,1,3,0)
 
"KRN",19,5677,1,4,0)
This is a REQUIRED step of the Pre-implementation process.
"KRN",19,5677,10,0)
^19.01IP^6^6
"KRN",19,5677,10,1,0)
5674^BGN^5
"KRN",19,5677,10,1,"^")
RGCIRN CMOR START
"KRN",19,5677,10,2,0)
5675^HLT^10
"KRN",19,5677,10,2,"^")
RGCIRN CMOR STOP
"KRN",19,5677,10,3,0)
5678^IND^15
"KRN",19,5677,10,3,"^")
RGCIRN CMOR INDIV
"KRN",19,5677,10,4,0)
5676^CSS^20
"KRN",19,5677,10,4,"^")
RGCIRN CMOR STATUS
"KRN",19,5677,10,5,0)
5916^DRS^30
"KRN",19,5677,10,5,"^")
RGCIRN CMOR DUP SCORES
"KRN",19,5677,10,6,0)
5917^STAT^35
"KRN",19,5677,10,6,"^")
RGCIRN CMOR DUP STATS
"KRN",19,5677,20)
W @IOF D DISPLAY^RGVCCMR1
"KRN",19,5677,99)
57590,35150
"KRN",19,5677,"U")
CIRN MASTER OF RECORD MENU
"KRN",19,5678,-1)
0^3
"KRN",19,5678,0)
RGCIRN CMOR INDIV^Calculate Individual Patient CMOR Score^^R^^^^^^^^CLINICAL INFO RESOURCE NETWORK
"KRN",19,5678,1,0)
^^4^4^2980826^
"KRN",19,5678,1,1,0)
This option allows for the calculation of a CMOR patient activity score
"KRN",19,5678,1,2,0)
for an individual patient.  After it is calculated, the score is filed in
"KRN",19,5678,1,3,0)
the PATIENT file (#2), in fields CMOR ACTIVITY SCORE (#991.06) and SCORE
"KRN",19,5678,1,4,0)
CALCULATION DATE (#991.07).
"KRN",19,5678,25)
INDIV^RGVCCMR1
"KRN",19,5678,"U")
CALCULATE INDIVIDUAL PATIENT C
"KRN",19,5863,-1)
0^7
"KRN",19,5863,0)
RGPR PRE-IMP MENU^CIRN Pre-Implementation Menu^^M^^^^^^^^CLINICAL INFO RESOURCE NETWORK
"KRN",19,5863,1,0)
^^6^6^2980904^^^^
"KRN",19,5863,1,1,0)
The Clinical Information Resource Network (CIRN) Pre-implementation phase
"KRN",19,5863,1,2,0)
is a necessary step before a site can process its PATIENT file (#2)
"KRN",19,5863,1,3,0)
records against the Master Patient Index (MPI). Associated software
"KRN",19,5863,1,4,0)
utilities and reports are provided under the CIRN Pre-implementation Menu
"KRN",19,5863,1,5,0)
option [RGPR PRE-IMP MENU]. This software will assist sites in preparing
"KRN",19,5863,1,6,0)
their databases and completing the Pre-implementation phase work.
"KRN",19,5863,10,0)
^19.01IP^11^7
"KRN",19,5863,10,1,0)
5864^^2
"KRN",19,5863,10,1,"^")
RGPR PRE-IMP SSN REPORT
"KRN",19,5863,10,2,0)
5865^^10
"KRN",19,5863,10,2,"^")
RGPR PRE-IMP ELIG REPORT
"KRN",19,5863,10,7,0)
5677^^60
"KRN",19,5863,10,7,"^")
RGCIRN CMOR MAIN
"KRN",19,5863,99)
57615,60112
"KRN",19,5863,"U")
CIRN PRE-IMPLEMENTATION MENU
"KRN",19,5864,-1)
0^8
"KRN",19,5864,0)
RGPR PRE-IMP SSN REPORT^Pseudo-SSN Report^^R^^^^^^^^CLINICAL INFO RESOURCE NETWORK
"KRN",19,5864,1,0)
^^6^6^2980902^^
"KRN",19,5864,1,1,0)
This is the standard Pseudo-SSN (Social Security Number) report for the
"KRN",19,5864,1,2,0)
CIRN pre-implementation phase. Users should run this report to a
"KRN",19,5864,1,3,0)
132-column printer, call the patients and get the correct SSN, and then
"KRN",19,5864,1,4,0)
update via use of the Load/Edit Patient Data option [DG LOAD PATIENT
"KRN",19,5864,1,5,0)
DATA] in the Patient Information Management System (PIMS)
"KRN",19,5864,1,6,0)
software Registration Menu option [DG REGISTRATION MENU].
"KRN",19,5864,25)
RGPRSSN
"KRN",19,5864,"U")
PSEUDO-SSN REPORT
"KRN",19,5865,-1)
0^6
"KRN",19,5865,0)
RGPR PRE-IMP ELIG REPORT^Eligibility Code Files Report^^R^^^^^^^^CLINICAL INFO RESOURCE NETWORK
"KRN",19,5865,1,0)
^^10^10^2980923^^
"KRN",19,5865,1,1,0)
Sites must run the Eligibility Code Files Report option [RGPR PRE-IMP ELIG
"KRN",19,5865,1,2,0)
REPORT], which is a diagnostic utility for reviewing all local Eligibility
"KRN",19,5865,1,3,0)
codes to insure they are mapped to a National Eligibility code. The report
"KRN",19,5865,1,4,0)
will list all local Eligibility codes in File #8 and the corresponding
"KRN",19,5865,1,5,0)
National Eligibility codes they map to in File #8.1. The report will
"KRN",19,5865,1,6,0)
identify any local codes that do not correspond, or map to a National
"KRN",19,5865,1,7,0)
Eligibility code. Also, inactive Eligibility codes will be annotated with
"KRN",19,5865,1,8,0)
three asterisks. A remark statement is displayed with instructions for the
"KRN",19,5865,1,9,0)
case where local codes have NO MATCHING ENTRY listed for a corresponding
"KRN",19,5865,1,10,0)
National codes.
"KRN",19,5865,25)
RGPRELIG
"KRN",19,5865,"U")
ELIGIBILITY CODE FILES REPORT
"KRN",19,5916,-1)
0^9
"KRN",19,5916,0)
RGCIRN CMOR DUP SCORES^Duplicate Record by CMOR Score^^R^^^^^^^^CLINICAL INFO RESOURCE NETWORK
"KRN",19,5916,1,0)
^^11^11^2980826^
"KRN",19,5916,1,1,0)
This option provides a listing of the CMOR scores from the DUPLICATE
"KRN",19,5916,1,2,0)
RECORD file (#15). It will display the number of duplicates per every 100
"KRN",19,5916,1,3,0)
points.
"KRN",19,5916,1,4,0)
 
"KRN",19,5916,1,5,0)
For example:  
"KRN",19,5916,1,6,0)
There may be 10 patients with a score between 100 and 199. A NO SCORE
"KRN",19,5916,1,7,0)
means that the pair of potential dupes had no score (no activity in the
"KRN",19,5916,1,8,0)
last three years).
"KRN",19,5916,1,9,0)
 
"KRN",19,5916,1,10,0)
The total entries for the PATIENT file (#2) and the DUPLICATE RECORD
"KRN",19,5916,1,11,0)
file (#15) is also displayed.
"KRN",19,5916,25)
RGMTDPSC
"KRN",19,5916,"U")
DUPLICATE RECORD BY CMOR SCORE
"KRN",19,5917,-1)
0^10
"KRN",19,5917,0)
RGCIRN CMOR DUP STATS^Duplicate Record Statistics^^R^^^^^^^^CLINICAL INFO RESOURCE NETWORK
"KRN",19,5917,1,0)
^^2^2^2980727^^
"KRN",19,5917,1,1,0)
This option provides the user with the percentiles of the patients in the
"KRN",19,5917,1,2,0)
various status categories for merge and verification status.
"KRN",19,5917,25)
RGMTDPCT
"KRN",19,5917,"U")
DUPLICATE RECORD STATISTICS
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PGL",991.8,0,3,.03)
NEW REQUEST MAILGROUP^P3.8'^XMB(3.8,^0;3^Q
"PGL",991.8,"CMOR",1,18)
CMOR LAST PATIENT PROCESSED^P2'^DPT(^CMOR;1^Q
"PGL",991.8,"COMP",1,30)
CMOR COMP LAST PATIENT^P2'^DPT(^COMP;1^Q
"PGL",991.8,"PRE",4,103)
REL INIT LAST^P2'^DPT(^PRE;4^Q
"PGL",991.8,"PRE",5,104)
REL INIT USER^P200'^VA(200,^PRE;5^Q
"PGL",991.8,"PRE",9,108)
MAR INIT LAST^P2'^DPT(^PRE;9^Q
"PGL",991.8,"PRE",10,109)
MAR INIT USER^P200'^VA(200,^PRE;10^Q
"PGL",991.8,"PRE1",4,113)
ELIG INIT LAST^P2'^DPT(^PRE1;4^Q
"PGL",991.8,"PRE1",5,114)
ELIG INIT USER^P200'^VA(200,^PRE1;5^Q
"PGL",991.8,"PRE1",9,118)
PSEUDO INIT LAST^P2'^DPT(^PRE1;9^Q
"PGL",991.8,"PRE1",10,119)
PSEUDO INIT USER^P200'^VA(200,^PRE1;10^Q
"PKG",272,-1)
1^1
"PKG",272,0)
CLINICAL INFO RESOURCE NETWORK^RG^CIRN
"PKG",272,1,0)
^^1^1^2980714^^^^
"PKG",272,1,1,0)
Clinical Information Resource Network (CIRN)
"PKG",272,20,0)
^9.402P^^
"PKG",272,22,0)
^9.49I^1^1
"PKG",272,22,1,0)
0.5^2980930
"PKG",272,22,1,1,0)
^^4^4^2981006
"PKG",272,22,1,1,1,0)
The Clinical Information Resource Network (CIRN) Pre-implementation
"PKG",272,22,1,1,2,0)
software Version 0.5 software calculates the CIRN Master of Record (CMOR)
"PKG",272,22,1,1,3,0)
scores and also provides utilities for the cleanup of potential problem
"PKG",272,22,1,1,4,0)
SSNs and Eligibility Codes.
"PKG",272,"VERSION")
0.5
"PRE")
RGPRENV
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
9
"RTN","RGMTDPCT")
0^10^B18916445
"RTN","RGMTDPCT",1,0)
RGMTDPCT ;GAI/TMG-Count Entries for ^DPT in Dup. Record file ;3-11-98
"RTN","RGMTDPCT",2,0)
 ;;0.5; CLINICAL INFO RESOURCE NETWORK ;;30 Sep 98
"RTN","RGMTDPCT",3,0)
 ;;  Counts duplicate entries for ^DPT in Duplicate Record file by each
"RTN","RGMTDPCT",4,0)
 ;;  of the following and then by the match percentile.
"RTN","RGMTDPCT",5,0)
 ;;  - STATUS (verification status)
"RTN","RGMTDPCT",6,0)
 ;;                   P = potential duplicate
"RTN","RGMTDPCT",7,0)
 ;;                   N = verified, not a duplicate
"RTN","RGMTDPCT",8,0)
 ;;                   V = verified duplicate
"RTN","RGMTDPCT",9,0)
 ;;                   X = verification in progress
"RTN","RGMTDPCT",10,0)
 ;;                   R = required review
"RTN","RGMTDPCT",11,0)
 ;;  - MERGE STATUS - 0 = not ready
"RTN","RGMTDPCT",12,0)
 ;;                   1 = ready
"RTN","RGMTDPCT",13,0)
 ;;                   2 = merged
"RTN","RGMTDPCT",14,0)
 ;;                   3 = in progress
"RTN","RGMTDPCT",15,0)
 ;;
"RTN","RGMTDPCT",16,0)
START W !,"Duplicate Record File Statistics Scan",!
"RTN","RGMTDPCT",17,0)
 I '$D(DUZ) W !!,"Your user identification is not set.  Please D ^XUP and try again." Q
"RTN","RGMTDPCT",18,0)
 S USER=DUZ,ZTIO="",ZTRTN="SCAN^RGMTDPCT",ZTDESC="Duplicate Record Statistics Search"
"RTN","RGMTDPCT",19,0)
 S ZTSAVE("USER")="" D ^%ZTLOAD I $D(ZTSK) W !,"  Task# ",ZTSK," queued to run." D ^%ZISC,KILL
"RTN","RGMTDPCT",20,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RGMTDPCT",21,0)
 Q
"RTN","RGMTDPCT",22,0)
 ;;
"RTN","RGMTDPCT",23,0)
SCAN K ^XTMP("RGMTDPCT") S U="^"
"RTN","RGMTDPCT",24,0)
 ;set purge date of XTMP = 30 days
"RTN","RGMTDPCT",25,0)
 S ^XTMP("RGMTDPCT",0)=$$FMADD^XLFDT($$NOW^XLFDT,30)_U_$$NOW^XLFDT_U_"DUPLICATE RECORD CHECK"
"RTN","RGMTDPCT",26,0)
 S ^XTMP("RGMTDPCT","@@@@","STARTED")=%
"RTN","RGMTDPCT",27,0)
 S (^XTMP("RGMTDPCT","@@@@","SITE"),SITE)=$$SITE^VASITE()
"RTN","RGMTDPCT",28,0)
 S IEN=0 F  S IEN=$O(^VA(15,IEN)) Q:+IEN'>0  I $D(^VA(15,+IEN,0)) S NODE0=^(0) D
"RTN","RGMTDPCT",29,0)
 .S ^XTMP("RGMTDPCT","@@@@","CURR IEN")=IEN
"RTN","RGMTDPCT",30,0)
 .S (VSTAT,MSTAT)="ZZZ" S:$P(NODE0,U,3)'="" VSTAT=$P(NODE0,U,3) S:$P(NODE0,U,5)'="" MSTAT=$P(NODE0,U,5)
"RTN","RGMTDPCT",31,0)
 .S MPERC=(($P(NODE0,U,19))\10)*10
"RTN","RGMTDPCT",32,0)
 .S:'$D(^XTMP("RGMTDPCT","VERIF",VSTAT,MPERC)) ^XTMP("RGMTDPCT","VERIF",VSTAT,MPERC)=0 S ^XTMP("RGMTDPCT","VERIF",VSTAT,MPERC)=^XTMP("RGMTDPCT","VERIF",VSTAT,MPERC)+1
"RTN","RGMTDPCT",33,0)
 .S:'$D(^XTMP("RGMTDPCT","MERGE",MSTAT,MPERC)) ^XTMP("RGMTDPCT","MERGE",MSTAT,MPERC)=0 S ^XTMP("RGMTDPCT","MERGE",MSTAT,MPERC)=^XTMP("RGMTDPCT","MERGE",MSTAT,MPERC)+1
"RTN","RGMTDPCT",34,0)
 ;
"RTN","RGMTDPCT",35,0)
MSG ;
"RTN","RGMTDPCT",36,0)
 S X=^XTMP("RGMTDPCT","@@@@","STARTED")
"RTN","RGMTDPCT",37,0)
 S %DT="T" D ^%DT S X=Y X ^DD("DD") S MSGDT=Y
"RTN","RGMTDPCT",38,0)
 S BLANKS="                         "
"RTN","RGMTDPCT",39,0)
 S TXT(.1)="Duplicate Record (^DPT) Statistics"_$J(" ",15)_"Run Date: "_MSGDT
"RTN","RGMTDPCT",40,0)
 S TXT(.2)=""
"RTN","RGMTDPCT",41,0)
 S TXT(.3)=$P(SITE,U,2)_" ("_$P(SITE,U)_")"
"RTN","RGMTDPCT",42,0)
 S TXT(.4)=""
"RTN","RGMTDPCT",43,0)
 S TXT(.5)="  Counts by:  Merge Status and Match Percentile:"
"RTN","RGMTDPCT",44,0)
 S LINE=1,STATUS="" F  S STATUS=$O(^XTMP("RGMTDPCT","MERGE",STATUS)) Q:STATUS=""  D
"RTN","RGMTDPCT",45,0)
 .S MSGSTAT=$S(STATUS=0:"NOT READY",STATUS=1:"READY",STATUS=2:"MERGED",STATUS=3:"IN PROGRESS",STATUS="ZZZ":"UNKNOWN")
"RTN","RGMTDPCT",46,0)
 . S LINE=LINE+.001
"RTN","RGMTDPCT",47,0)
 . S TXT(LINE)=""
"RTN","RGMTDPCT",48,0)
 . S LINE=LINE+.001 S TXT(LINE)="    Merge Status: "_MSGSTAT
"RTN","RGMTDPCT",49,0)
 .S PERC=0 F  S PERC=$O(^XTMP("RGMTDPCT","MERGE",STATUS,PERC)) Q:+PERC'>0  S COUNT=^(PERC) D
"RTN","RGMTDPCT",50,0)
 . . S LINE=LINE+.001
"RTN","RGMTDPCT",51,0)
 . . S TEXT="      Percentile: "_PERC_BLANKS,TEXT=$E(TEXT,1,30),TEXT=TEXT_COUNT
"RTN","RGMTDPCT",52,0)
 . . S TXT(LINE)=TEXT
"RTN","RGMTDPCT",53,0)
 S LINE=2,LINE=LINE+.001 S TXT(LINE)=""
"RTN","RGMTDPCT",54,0)
 S LINE=LINE+.001
"RTN","RGMTDPCT",55,0)
 S TXT(LINE)="  Counts by:  Verification Status and Match Percentile:"
"RTN","RGMTDPCT",56,0)
 S STATUS="" F  S STATUS=$O(^XTMP("RGMTDPCT","VERIF",STATUS)) Q:STATUS=""  D
"RTN","RGMTDPCT",57,0)
 . S MSGSTAT=$S(STATUS="P":"POTENTIAL DUP., UNVERIF",STATUS="N":"VERIFIED, NOT A DUPLICATE",STATUS="V":"VERIFIED DUPLICATE",STATUS="X":"VERIF. IN PROGRESS",STATUS="R":"REQUIRES RESOLUTION",1:"")
"RTN","RGMTDPCT",58,0)
 . S LINE=LINE+.001,TXT(LINE)=""
"RTN","RGMTDPCT",59,0)
 . S LINE=LINE+.001,TXT(LINE)="    Verification Status: "_MSGSTAT
"RTN","RGMTDPCT",60,0)
 . S PERC=0 F  S PERC=$O(^XTMP("RGMTDPCT","VERIF",STATUS,PERC)) Q:+PERC'>0  S COUNT=^(PERC) D
"RTN","RGMTDPCT",61,0)
 . . S LINE=LINE+.001
"RTN","RGMTDPCT",62,0)
 . . S TEXT="      Percentile: "_PERC_BLANKS,TEXT=$E(TEXT,1,30),TEXT=TEXT_COUNT
"RTN","RGMTDPCT",63,0)
 . . S TXT(LINE)=TEXT
"RTN","RGMTDPCT",64,0)
 S (XMY(DUZ),XMY(USER))="",(XMDUZ)=DUZ
"RTN","RGMTDPCT",65,0)
 S XMSUB="Duplicate Record Counts: "_$P(SITE,U,2)
"RTN","RGMTDPCT",66,0)
 S XMTEXT="TXT(" D ^XMD
"RTN","RGMTDPCT",67,0)
 ;
"RTN","RGMTDPCT",68,0)
KILL K ^XTMP("RGMTDPCT"),BLANKS,COUNT,IEN,LINE,MPERC,MSGDT,MSGSTAT,MSTAT,NODE0
"RTN","RGMTDPCT",69,0)
 K PERC,SITE,STATUS,TEXT,TXT,USER,VSTAT,X,XMDUZ,XMSUB,XMTEXT,XMY,Y,ZTSAVE
"RTN","RGMTDPCT",70,0)
 K ZTDESC,ZTIO,ZTRTN,ZTSK,%,%DT
"RTN","RGMTDPCT",71,0)
 Q
"RTN","RGMTDPSC")
0^9^B20390212
"RTN","RGMTDPSC",1,0)
RGMTDPSC ;GAI/TMG-COUNT DUPLICATE RECORD ENTRIES BY CMOR SCORE RANGE ;5-30-98
"RTN","RGMTDPSC",2,0)
 ;;0.5; CLINICAL INFO RESOURCE NETWORK ;;30 Sep 98
"RTN","RGMTDPSC",3,0)
 ;; search the Duplicate Record file (#15) for duplicate pairs and
"RTN","RGMTDPSC",4,0)
 ;; display by CMOR activity score range.  The ranges are in 100's with
"RTN","RGMTDPSC",5,0)
 ;; a separate range for pairs where both members have no score and where
"RTN","RGMTDPSC",6,0)
 ;; both members have zero score or one member has a zero score and the
"RTN","RGMTDPSC",7,0)
 ;; other has no score.
"RTN","RGMTDPSC",8,0)
 ;; 
"RTN","RGMTDPSC",9,0)
EN ; que or select device for output
"RTN","RGMTDPSC",10,0)
 I '$D(^DPT("ACMORS")) D  Q
"RTN","RGMTDPSC",11,0)
 . W !,"The option, Start/Restart CIRN CMOR Score Calculation"
"RTN","RGMTDPSC",12,0)
 . W !,"[RGCIRN CMOR START], needs to be run before this option."
"RTN","RGMTDPSC",13,0)
 S %ZIS="QM" D ^%ZIS Q:POP  S:IO'=IO(0) IO("Q")="" I '$D(IO("Q")) G SCAN
"RTN","RGMTDPSC",14,0)
 S ZTRTN="SCAN^RGMTDPSC"
"RTN","RGMTDPSC",15,0)
 S ZTIO=ION_";"_IOST_";"_IOM_";"_IOSL,ZTSAVE("IO*")=""
"RTN","RGMTDPSC",16,0)
 S ZTDESC="DUP. RECORD REPORT BY CMOR SCORE" D ^%ZTLOAD,EXIT,^%ZISC
"RTN","RGMTDPSC",17,0)
 Q
"RTN","RGMTDPSC",18,0)
 ;
"RTN","RGMTDPSC",19,0)
SCAN ; search and count duplicate pairs by score ranges
"RTN","RGMTDPSC",20,0)
 S U="^",MSG=0,MSGLINE=1,DPTCNT=0 K SCRARR
"RTN","RGMTDPSC",21,0)
 S IEN=0 F  S IEN=$O(^VA(15,IEN)) Q:+IEN'>0  I $D(^VA(15,+IEN,0)) S NODE=^(0) D
"RTN","RGMTDPSC",22,0)
 . S (SCRANGE,SCORE,SCORE1,SCORE2)="NO SCORE"
"RTN","RGMTDPSC",23,0)
 . S DPT1=+$P(NODE,U),DPT2=+$P(NODE,U,2)
"RTN","RGMTDPSC",24,0)
 . I $D(^DPT(+DPT1,"MPI")),$P(^("MPI"),U,6)'="" S SCORE1=$P(^("MPI"),U,6)
"RTN","RGMTDPSC",25,0)
 . I $D(^DPT(+DPT2,"MPI")),$P(^("MPI"),U,6)'="" S SCORE2=$P(^("MPI"),U,6)
"RTN","RGMTDPSC",26,0)
 . I SCORE1=0&(SCORE2=0) S (SCRANGE,SCORE)="ZERO"
"RTN","RGMTDPSC",27,0)
 . I SCORE1?.N!(SCORE2?.N) D
"RTN","RGMTDPSC",28,0)
 . . Q:SCRANGE="ZERO"
"RTN","RGMTDPSC",29,0)
 . . S:+SCORE1>+SCORE SCORE=SCORE1 S:+SCORE2>+SCORE SCORE=SCORE2 S SCRANGE=SCORE\100 I SCRANGE>0 S SCRANGE=SCRANGE*100
"RTN","RGMTDPSC",30,0)
 . S:'$D(SCRARR("RANGE",SCRANGE)) SCRARR("RANGE",SCRANGE)=0
"RTN","RGMTDPSC",31,0)
 . S SCRARR("RANGE",SCRANGE)=SCRARR("RANGE",SCRANGE)+1
"RTN","RGMTDPSC",32,0)
 D PRINT
"RTN","RGMTDPSC",33,0)
 ;
"RTN","RGMTDPSC",34,0)
EXIT K COUNT,DPT1,DPT2,DPTCNT,IEN,MSG,MSGLINE,NODE,PAGE,POP,PRANGE,PRDT,SCORE
"RTN","RGMTDPSC",35,0)
 K SCORE1,SCORE2,SCRANGE,SCRARR,S,TXT,X,Y,ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZZ,%DT,%ZIS,DTOUT,DUOUT,SITE,XMSUB,XMTEXT,XMY
"RTN","RGMTDPSC",36,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RGMTDPSC",37,0)
 Q
"RTN","RGMTDPSC",38,0)
 ;
"RTN","RGMTDPSC",39,0)
PRINT ; print duplicate pair counts by score range
"RTN","RGMTDPSC",40,0)
 S (PAGE,COUNT)=0 S X="N",%DT="T" D ^%DT S X=Y X ^DD("DD") S PRDT=Y
"RTN","RGMTDPSC",41,0)
 D HDR I MSG=0 D MSG
"RTN","RGMTDPSC",42,0)
 I $D(SCRARR("RANGE","ZERO")) D
"RTN","RGMTDPSC",43,0)
 . S PRANGE="0" W !?10,PRANGE,?40,$J(SCRARR("RANGE","ZERO"),6,0)
"RTN","RGMTDPSC",44,0)
 . S COUNT=COUNT+SCRARR("RANGE","ZERO")
"RTN","RGMTDPSC",45,0)
 S SCRANGE="" F  S SCRANGE=$O(SCRARR("RANGE",SCRANGE)) Q:SCRANGE=""  Q:SCRANGE="ZERO"  D
"RTN","RGMTDPSC",46,0)
 . I SCRANGE=0 S PRANGE="1 - 99"
"RTN","RGMTDPSC",47,0)
 . I SCRANGE'="NO SCORE" I SCRANGE>0 S PRANGE=SCRANGE_" - "_(SCRANGE+99)
"RTN","RGMTDPSC",48,0)
 . I SCRANGE="NO SCORE" S PRANGE=SCRANGE
"RTN","RGMTDPSC",49,0)
 . S MSGLINE=MSGLINE+.001
"RTN","RGMTDPSC",50,0)
 . S TXT(MSGLINE)=$J(" ",10)_PRANGE_$J(" ",23)_$J(SCRARR("RANGE",SCRANGE),6,0)
"RTN","RGMTDPSC",51,0)
 . D:$Y>(IOSL-6) HDR W !?10,PRANGE,?39,$J(SCRARR("RANGE",SCRANGE),6,0) S COUNT=COUNT+SCRARR("RANGE",SCRANGE)
"RTN","RGMTDPSC",52,0)
 S DPTCNT=$P(^DPT(0),U,4)
"RTN","RGMTDPSC",53,0)
 D:$Y>(IOSL-6) HDR W !!,"TOTAL Potential Duplicates (15): ",?39,$J(COUNT,6,0)
"RTN","RGMTDPSC",54,0)
 D:$Y>(IOSL-6) HDR W !,"TOTAL Patients (2): ",?39,$J(DPTCNT,6,0)
"RTN","RGMTDPSC",55,0)
 S MSGLINE=MSGLINE+.001 D
"RTN","RGMTDPSC",56,0)
 . S TXT(MSGLINE)="  ",MSGLINE=MSGLINE+.001
"RTN","RGMTDPSC",57,0)
 . S TXT(MSGLINE)="TOTAL Potential Duplicates (15)       "_COUNT
"RTN","RGMTDPSC",58,0)
 . S MSGLINE=MSGLINE+.001
"RTN","RGMTDPSC",59,0)
 . S TXT(MSGLINE)="TOTAL Patients (2)                    "_DPTCNT
"RTN","RGMTDPSC",60,0)
 D MSG1
"RTN","RGMTDPSC",61,0)
 Q
"RTN","RGMTDPSC",62,0)
 ;
"RTN","RGMTDPSC",63,0)
HDR I ($E(IOST,1,2)="C-")&(IO=IO(0)) D
"RTN","RGMTDPSC",64,0)
 . S DIR(0)="E" D ^DIR K DIR
"RTN","RGMTDPSC",65,0)
 Q:$D(DUOUT)!($D(DTOUT))
"RTN","RGMTDPSC",66,0)
 S PAGE=PAGE+1 W #
"RTN","RGMTDPSC",67,0)
 W "Duplicate Record Count by CMOR Score",?(IOM-23),"Page: ",PAGE
"RTN","RGMTDPSC",68,0)
 W !?(IOM-23),"Date: ",PRDT,!
"RTN","RGMTDPSC",69,0)
 F ZZ=1:1:IOM W "-"
"RTN","RGMTDPSC",70,0)
 I PAGE=1 D
"RTN","RGMTDPSC",71,0)
 .W !,"This report is drawn from the Duplicate Record file (#15) with"
"RTN","RGMTDPSC",72,0)
 .W !,"CMOR scores from the PATIENT file, CMOR ACTIVITY SCORE field.",!
"RTN","RGMTDPSC",73,0)
 .W !,"- If both members of a pair have a score of zero the pair is"
"RTN","RGMTDPSC",74,0)
 .W !,"  counted in the '0' group."
"RTN","RGMTDPSC",75,0)
 .W !,"- If one or both members of the pair have a score greater than"
"RTN","RGMTDPSC",76,0)
 .W !,"  zero, that pair is counted in the group for the higher score."
"RTN","RGMTDPSC",77,0)
 .W !,"- If neither member of the pair have a CMOR score, the pair is"
"RTN","RGMTDPSC",78,0)
 .W !,"  counted in the 'NO SCORE' group."
"RTN","RGMTDPSC",79,0)
 W !!,?10,"Score Range",?40,"Count",!?10,"-----------",?40,"-----",!
"RTN","RGMTDPSC",80,0)
 Q
"RTN","RGMTDPSC",81,0)
MSG ;create the message
"RTN","RGMTDPSC",82,0)
 S TXT(.1)="Duplicate Record Count by CMOR Score"_$J(" ",20)_"Date: "_PRDT
"RTN","RGMTDPSC",83,0)
 S TXT(.2)="  "
"RTN","RGMTDPSC",84,0)
 S SITE=$$SITE^VASITE()
"RTN","RGMTDPSC",85,0)
 S TXT(.3)=$P(SITE,U,2)_" ("_$P(SITE,U)_")"
"RTN","RGMTDPSC",86,0)
 S TXT(.4)="  "
"RTN","RGMTDPSC",87,0)
 S TXT(.5)=$J(" ",10)_"Score Range"_$J(" ",20)_"Count"
"RTN","RGMTDPSC",88,0)
 S TXT(.6)=$J(" ",10)_"-----------"_$J(" ",20)_"-----"
"RTN","RGMTDPSC",89,0)
 S TXT(.7)="  "
"RTN","RGMTDPSC",90,0)
 Q
"RTN","RGMTDPSC",91,0)
MSG1 ;call XMD
"RTN","RGMTDPSC",92,0)
 S XMSUB="Duplicate Records by CMOR Score: "_$P(SITE,U,2)
"RTN","RGMTDPSC",93,0)
 S XMY(DUZ)="",XMDUZ=DUZ
"RTN","RGMTDPSC",94,0)
 S XMTEXT="TXT(" D ^XMD
"RTN","RGMTDPSC",95,0)
 Q
"RTN","RGPRELIG")
0^6^B8053996
"RTN","RGPRELIG",1,0)
RGPRELIG ;GAI/TMG-TEST AND COMPARE FILES 8 AND 8.1 ;6-25-1998
"RTN","RGPRELIG",2,0)
 ;;0.5; CLINICAL INFO RESOURCE NETWORK ;;30 Sep 98
"RTN","RGPRELIG",3,0)
 S U="^" S:'$D(DTIME) DTIME=120
"RTN","RGPRELIG",4,0)
 W !!,"This Option will compare the ELIGIBILITY CODE file (#8) and"
"RTN","RGPRELIG",5,0)
 W !,"the MAS ELIGIBILITY CODE file (8.1) to insure that all required"
"RTN","RGPRELIG",6,0)
 W !,"links are present."
"RTN","RGPRELIG",7,0)
 G QUE
"RTN","RGPRELIG",8,0)
EN ;ENTRY POINT FROM QUEUE
"RTN","RGPRELIG",9,0)
 N DTOUT,DUOUT S RGFS=""
"RTN","RGPRELIG",10,0)
 D DISP
"RTN","RGPRELIG",11,0)
 S RGPR=0 F I=0:0 S RGPR=$O(^DIC(8,RGPR)) Q:RGPR'>0  S RGPR(RGPR,0)="",RGPR(RGPR,0)=RGPR_U_$P(^DIC(8,RGPR,0),U,9)_U_$P(^DIC(8,RGPR,0),U,7)
"RTN","RGPRELIG",12,0)
 S RGPR1=0 F I=0:0 S RGPR1=$O(^DIC(8.1,RGPR1)) Q:RGPR1'>0  S RGPR1(RGPR1,0)=RGPR1_U_$P(^DIC(8.1,RGPR1,0),U,7)
"RTN","RGPRELIG",13,0)
 S RGPR=0 F I=0:0 S RGPR=$O(RGPR(RGPR)) Q:RGPR'>0  G:$D(DUOUT)!($D(DTOUT)) FINAL D
"RTN","RGPRELIG",14,0)
 .D:$Y>(IOSL-3) DISP I $D(DUOUT)!($D(DTOUT)) Q
"RTN","RGPRELIG",15,0)
 .W ! W:'$D(RGPR(RGPR,0))!$P(RGPR(RGPR,0),U,3)=1 "***" W $P(^DIC(8,RGPR,0),U,1)
"RTN","RGPRELIG",16,0)
 .W "=>",?40,"<=",$S($P(RGPR(RGPR,0),U,2)'="":$P(^DIC(8.1,$P(RGPR(RGPR,0),U,2),0),U,1),1:"NO MATCHING ENTRY") S RGPR1=$P(RGPR(RGPR,0),U,2) D:RGPR1'="" CLEAN W !
"RTN","RGPRELIG",17,0)
 G FINAL
"RTN","RGPRELIG",18,0)
 Q
"RTN","RGPRELIG",19,0)
CLEAN ;CLEAN UP FOR CHECK
"RTN","RGPRELIG",20,0)
 K:$P(RGPR(RGPR,0),U,2)'="" RGPR(RGPR,0)
"RTN","RGPRELIG",21,0)
 I RGPR1="" W ! Q
"RTN","RGPRELIG",22,0)
 I $P(RGPR1(RGPR1,0),U,2)'="" W "***"
"RTN","RGPRELIG",23,0)
 Q
"RTN","RGPRELIG",24,0)
QUE ;QUE TO RUN
"RTN","RGPRELIG",25,0)
 S %ZIS="Q",%ZIS("A")="DEVICE: " D ^%ZIS G:POP KILL K %ZIS
"RTN","RGPRELIG",26,0)
 I IO=IO(0) K ZTSK G EN
"RTN","RGPRELIG",27,0)
 S ZTRTN="EN^RGPRELIG",ZTDESC="CIRN - File 8 & 8.1 Compare" D ^%ZTLOAD
"RTN","RGPRELIG",28,0)
 W !!,$S($D(ZTSK):"Request Queued, Task #"_ZTSK,1:"Request Cancelled")
"RTN","RGPRELIG",29,0)
 D HOME^%ZIS U IO
"RTN","RGPRELIG",30,0)
 G KILL
"RTN","RGPRELIG",31,0)
 Q
"RTN","RGPRELIG",32,0)
FINAL ;END STATEMENT
"RTN","RGPRELIG",33,0)
 W !,"*** = INACTIVE ELIGIBILITY"
"RTN","RGPRELIG",34,0)
 W !,"If an entry in the File 8 column has NO MATCHING ENTRY listed in the"
"RTN","RGPRELIG",35,0)
 W !,"File 8.1 column, please contact your IRM Service.  See pages 14 & 15"
"RTN","RGPRELIG",36,0)
 W !,"in the PIMS Technical manual on Eligibility/ID Maintenance Menu."
"RTN","RGPRELIG",37,0)
KILL ;KILL LOCALS
"RTN","RGPRELIG",38,0)
 K RGFS,RGPR,RGPR1,ZTSK,I,POP,ZTDESC,ZTRTN
"RTN","RGPRELIG",39,0)
 D ^%ZISC S DTIME=$$DTIME^XUP($G(DUZ))
"RTN","RGPRELIG",40,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RGPRELIG",41,0)
 Q
"RTN","RGPRELIG",42,0)
DISP ;DISPLAY AND FIND ANY STRAYS
"RTN","RGPRELIG",43,0)
 I RGFS'="" I $E(IOST,1,2)="C-"&(IO=IO(0)) D
"RTN","RGPRELIG",44,0)
 . S DIR(0)="E"
"RTN","RGPRELIG",45,0)
 . D ^DIR K DIR
"RTN","RGPRELIG",46,0)
 Q:$D(DUOUT)!($D(DTOUT))
"RTN","RGPRELIG",47,0)
 W:$D(IOF) @IOF
"RTN","RGPRELIG",48,0)
 W #!!,"CIRN: ELIGIBILITY CODE REVIEW" D NOW^%DTC,YX^%DTC W ?50,Y,!! K Y
"RTN","RGPRELIG",49,0)
 W "ELIGIBILITY CODE File (8)",?40,"MAS ELIGIBILITY CODE File (8.1)",!,"=========================",?40,"===============================",!
"RTN","RGPRELIG",50,0)
 S RGFS=1
"RTN","RGPRENV")
0^^B1792799
"RTN","RGPRENV",1,0)
RGPRENV ;SLC/NCG-PRE-IMP ENV CHECK ;6-30-1998
"RTN","RGPRENV",2,0)
 ;;0.5; CLINICAL INFO RESOURCE NETWORK ;;30 Sep 98
"RTN","RGPRENV",3,0)
 ;Checks first for patch PSO*7*11 when CPRS and OUTPATIENT
"RTN","RGPRENV",4,0)
 ;version 7 are both installed. If patch not found, set
"RTN","RGPRENV",5,0)
 ;XPDQUIT to tell KIDS to abort the install.  
"RTN","RGPRENV",6,0)
 ;Checks next for existence of another entry in package file
"RTN","RGPRENV",7,0)
 ;that contains RG as the prefix and will then remove it.
"RTN","RGPRENV",8,0)
 ;CIRN's namespace is RG.  Found an entry during testing
"RTN","RGPRENV",9,0)
 ;called OKC REGISTRATION with a prefix of RG
"RTN","RGPRENV",10,0)
 ;
"RTN","RGPRENV",11,0)
PSOCHK ; If CPRS and If OUTPATIENT v7, abort if no patch PSO*7*11.
"RTN","RGPRENV",12,0)
 S Y=$$VERSION^XPDUTL("OR") I Y'<3 D
"RTN","RGPRENV",13,0)
 .S Y=$$VERSION^XPDUTL("PSO") I Y'<7 D
"RTN","RGPRENV",14,0)
 ..S Y=$$PATCH^XPDUTL("PSO*7.0*11") I Y<1 S XPDABORT=1
"RTN","RGPRENV",15,0)
 ..I $D(XPDABORT) D BMES^XPDUTL(" PATCH PSO*7*11 is not installed.")
"RTN","RGPRENV",16,0)
 K Y
"RTN","RGPRENV",17,0)
 ;
"RTN","RGPRENV",18,0)
LOOK ;
"RTN","RGPRENV",19,0)
 S RGFLAG=0,RG1="RG",RG2=0,U="^"
"RTN","RGPRENV",20,0)
 F  S RG2=$O(^DIC(9.4,"C",RG1,RG2)) Q:'RG2  D
"RTN","RGPRENV",21,0)
 . S RG3=$P(^DIC(9.4,RG2,0),U)
"RTN","RGPRENV",22,0)
 . I RG3'["CLINICAL INFO RESOURCE" D
"RTN","RGPRENV",23,0)
 . . S DA=RG2,DIK="^DIC(9.4," D ^DIK
"RTN","RGPRENV",24,0)
 . . D BMES^XPDUTL(RG3_" (ien="_RG2_") had an RG prefix")
"RTN","RGPRENV",25,0)
 . . D BMES^XPDUTL("deleted from PACKAGE file")
"RTN","RGPRENV",26,0)
 . . S RGFLAG=1
"RTN","RGPRENV",27,0)
QUIT ; kill variables and quit
"RTN","RGPRENV",28,0)
 I RGFLAG=0 D BMES^XPDUTL("No RG prefixes found in PACKAGE file.")
"RTN","RGPRENV",29,0)
 K DA,DIK,RG1,RG2,RG3,RGFLAG
"RTN","RGPRENV",30,0)
 Q
"RTN","RGPRPST")
0^^B1602807
"RTN","RGPRPST",1,0)
RGPRPST ;SLC/NCG-CIRN CMOR POPULATE 991.8 ;4-15-1998
"RTN","RGPRPST",2,0)
 ;;0.5; CLINICAL INFO RESOURCE NETWORK ;;30 Sep 98
"RTN","RGPRPST",3,0)
EN ;
"RTN","RGPRPST",4,0)
 D PCC
"RTN","RGPRPST",5,0)
 K RGI,PCC
"RTN","RGPRPST",6,0)
 Q
"RTN","RGPRPST",7,0)
PCC ;set primary care clinics into 991.8
"RTN","RGPRPST",8,0)
 N PCC,RGI,RGPCC,X,Y
"RTN","RGPRPST",9,0)
 S PCC(1)="PRIMARY CARE/MEDICINE"
"RTN","RGPRPST",10,0)
 S PCC(2)="PRIMARY CARE/SURGERY"
"RTN","RGPRPST",11,0)
 S PCC(3)="GERIATRIC PRIMARY CARE"
"RTN","RGPRPST",12,0)
 D BMES^XPDUTL("Adding Clinics to File 991.8")
"RTN","RGPRPST",13,0)
 F RGI=1:1:3 D
"RTN","RGPRPST",14,0)
 . S RGPCC=+$$FIND1^DIC(40.7,,"OX",PCC(RGI)) I RGPCC>0 D
"RTN","RGPRPST",15,0)
 . . S DIC("P")=$P(^DD(991.8,17,0),U,2),DIC(0)="ML",DLAYGO=991.817,DIC="^RGSITE(991.8,1,""PC"",",X=PCC(RGI),DA(1)=1 D ^DIC I +Y>0 S DA=+Y,DA(1)=1,DIE=DIC,DR="1///2971001" D ^DIE
"RTN","RGPRPST",16,0)
 . . K DIE,DIC,DA,DR,D0,DLAYGO
"RTN","RGPRPST",17,0)
 Q
"RTN","RGPRSSN")
0^7^B29920416
"RTN","RGPRSSN",1,0)
RGPRSSN ;WAS/FHM-CIRN Pseudo/Missing SSN Report ;6-25-1998
"RTN","RGPRSSN",2,0)
 ;;0.5; CLINICAL INFO RESOURCE NETWORK ;;30 Sep 98
"RTN","RGPRSSN",3,0)
 ;WAS/FHM ;EXTRACT BAD SSN AND SORTS THEM BY CLASSIFICATION
"RTN","RGPRSSN",4,0)
 ;
"RTN","RGPRSSN",5,0)
 W !,"This report will provide a list of:"
"RTN","RGPRSSN",6,0)
 W !,"(1) any B Cross-references (there is no 'zero' node but a B x-ref)"
"RTN","RGPRSSN",7,0)
 W !,"    on the patient file,"
"RTN","RGPRSSN",8,0)
 W !,"(2) patients with Pseudo SSNs who have not had activity within the past 3 years,"
"RTN","RGPRSSN",9,0)
 W !,"(3) patients with Pseudo SSNs who have had activity within the past 3 years.",!
"RTN","RGPRSSN",10,0)
 W !,"The Reports are sorted by Primary Eligibility Code. The report can"
"RTN","RGPRSSN",11,0)
 W !,"be queued if desired."
"RTN","RGPRSSN",12,0)
 W !,!,"For CIRN purposes, general advice is to concentrate first on"
"RTN","RGPRSSN",13,0)
 W !,"getting correct SSNs for the patients who HAVE had activity within"
"RTN","RGPRSSN",14,0)
 W !,"the past 3 years.",!
"RTN","RGPRSSN",15,0)
 S %ZIS="QM" D ^%ZIS G EXIT:POP
"RTN","RGPRSSN",16,0)
 K ^TMP($J)
"RTN","RGPRSSN",17,0)
 I $D(IO("Q")) D  Q
"RTN","RGPRSSN",18,0)
   .S ZTRTN="DQ^RGPRSSN",ZTDESC="CIRN SSN VALIDATION"
"RTN","RGPRSSN",19,0)
   .D ^%ZTLOAD D HOME^%ZIS K IO("Q")
"RTN","RGPRSSN",20,0)
DQ N DTOUT,DUOUT S RGFS=1,PRNTCODE="",RGPRNTCO=""
"RTN","RGPRSSN",21,0)
 U IO W @IOF,!,"CIRN Report of Pseudo, missing & potentially false SSNs "
"RTN","RGPRSSN",22,0)
 D NOW^%DTC D YX^%DTC
"RTN","RGPRSSN",23,0)
 W ?55,Y,!
"RTN","RGPRSSN",24,0)
 W !,"Bad B Cross References Report"
"RTN","RGPRSSN",25,0)
 W !,"Please contact IRM for assistance with bad B Cross references."
"RTN","RGPRSSN",26,0)
 W !,"----------------------------------------------------------------------------"
"RTN","RGPRSSN",27,0)
 S BREF=0
"RTN","RGPRSSN",28,0)
 S NAME=""
"RTN","RGPRSSN",29,0)
 F  S NAME=$O(^DPT("B",NAME)) Q:NAME=""  D
"RTN","RGPRSSN",30,0)
   .S REFNO=0
"RTN","RGPRSSN",31,0)
   .S REFNO=$O(^DPT("B",NAME,REFNO))
"RTN","RGPRSSN",32,0)
   .IF $D(^DPT(REFNO,0)) S NODE=^DPT(REFNO,0),RGSSN=$P(NODE,"^",9)
"RTN","RGPRSSN",33,0)
   .E  S BREF=1 W !,"B Cross Reference with no 0 Node in DPT: DFN= ",REFNO
"RTN","RGPRSSN",34,0)
   .IF RGSSN="" S RGSSN="None"
"RTN","RGPRSSN",35,0)
   .IF RGSSN'?9N S SCRATCH=$$SETGBL
"RTN","RGPRSSN",36,0)
   .IF RGSSN="123456789" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",37,0)
   .IF RGSSN="000000000" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",38,0)
   .IF RGSSN="111111111" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",39,0)
   .IF RGSSN="222222222" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",40,0)
   .IF RGSSN="333333333" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",41,0)
   .IF RGSSN="444444444" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",42,0)
   .IF RGSSN="555555555" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",43,0)
   .IF RGSSN="666666666" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",44,0)
   .IF RGSSN="777777777" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",45,0)
   .IF RGSSN="888888888" S SCRATCH=$$SETGBL
"RTN","RGPRSSN",46,0)
   .IF RGSSN?1"9"8N S SCRATCH=$$SETGBL
"RTN","RGPRSSN",47,0)
   .QUIT
"RTN","RGPRSSN",48,0)
 IF BREF=0 W !,"*** No Bad B Cross References Found in your account.***"
"RTN","RGPRSSN",49,0)
LST S (ACTIV1,ECODE1,NAME1,REFNO1)=""
"RTN","RGPRSSN",50,0)
LST1 S ACTIV1=$O(^TMP($J,ACTIV1)) G EXIT:ACTIV1="" D HEADER G EXIT:$D(DUOUT)!($D(DTOUT))
"RTN","RGPRSSN",51,0)
LST2 S ECODE1=$O(^TMP($J,ACTIV1,ECODE1))  G LST1:ECODE1="" D:$Y>(IOSL-4) HEADER,HEAD2 G:$D(DUOUT)!($D(DTOUT)) EXIT W ! S SCRATCH=$$GETECODE
"RTN","RGPRSSN",52,0)
LST3 S NAME1=$O(^TMP($J,ACTIV1,ECODE1,NAME1))  G LST2:NAME1="" D:$Y>(IOSL-4) HEADER,HEAD2 G:$D(DUOUT)!($D(DTOUT)) EXIT
"RTN","RGPRSSN",53,0)
 S REFNO1=^TMP($J,ACTIV1,ECODE1,NAME1)
"RTN","RGPRSSN",54,0)
 S (PHONE,RGSSN,ECODE)="None"
"RTN","RGPRSSN",55,0)
 ;Using VADPT for PHONE# , SSN     ,eligibility code, and Name  
"RTN","RGPRSSN",56,0)
 K VAPTYP,VAHOW,VAROOT,VADM,VAEL,VAPA,VATEST S DFN=REFNO1 D ADD^VADPT,DEM^VADPT,ELIG^VADPT S NAME=VADM(1),RGSSN=$P(VADM(2),U),PHONE=VAPA(8),ECODE=$P(VAEL(1),U)
"RTN","RGPRSSN",57,0)
 K VAPTYP,VAHOW,VAROOT,VADM,VAEL,VAPA,VATEST
"RTN","RGPRSSN",58,0)
 S ACTIVITY=$$ACTIVE(REFNO1)
"RTN","RGPRSSN",59,0)
 W !,?10,ECODE,?20,NAME1,?54,RGSSN,?65,PHONE
"RTN","RGPRSSN",60,0)
 GOTO LST3
"RTN","RGPRSSN",61,0)
EXIT D ^%ZISC
"RTN","RGPRSSN",62,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RGPRSSN",63,0)
 K ^TMP($J)
"RTN","RGPRSSN",64,0)
 K ACTIV1,ACTIVITY,BREF,ECODE,ECODE1,NAME,NAME1,NODE,NODE2,NODE3
"RTN","RGPRSSN",65,0)
 K NODE4,PHONE,PRNTCODE,REFNO,REFNO1,RGFS,RGPRNTCO,SCRATCH,RGSSN,ZTREQ,%ZIS,NODE1,POP,ZTDESC,ZTRTN
"RTN","RGPRSSN",66,0)
 QUIT
"RTN","RGPRSSN",67,0)
SETGBL()        ;SETS GLOBAL
"RTN","RGPRSSN",68,0)
 S ECODE=""
"RTN","RGPRSSN",69,0)
 K VAEL S DFN=REFNO D ELIG^VADPT S ECODE=$P(VAEL(1),U)
"RTN","RGPRSSN",70,0)
 IF ECODE="" S ECODE="None"
"RTN","RGPRSSN",71,0)
 S ACTIVITY=$$ACTIVE(REFNO)
"RTN","RGPRSSN",72,0)
 S ^TMP($J,ACTIVITY,ECODE,NAME)=REFNO
"RTN","RGPRSSN",73,0)
 QUIT 1
"RTN","RGPRSSN",74,0)
GETECODE()      ;
"RTN","RGPRSSN",75,0)
 S PRNTCODE="None"
"RTN","RGPRSSN",76,0)
 IF $D(^DIC(8,ECODE1,0)) S NODE4=^DIC(8,ECODE1,0),PRNTCODE=$P(NODE4,"^",1)
"RTN","RGPRSSN",77,0)
 W !,PRNTCODE S RGFS=0
"RTN","RGPRSSN",78,0)
 QUIT 1
"RTN","RGPRSSN",79,0)
LTD(DFN)        ;
"RTN","RGPRSSN",80,0)
 ;FIND LAST TREATMENT DATE
"RTN","RGPRSSN",81,0)
 ;INPUT: DFN
"RTN","RGPRSSN",82,0)
 ;OUTPUT: LTD LAST TREATMENT DATE
"RTN","RGPRSSN",83,0)
 ;
"RTN","RGPRSSN",84,0)
 ;
"RTN","RGPRSSN",85,0)
 N LTD,X
"RTN","RGPRSSN",86,0)
 ;
"RTN","RGPRSSN",87,0)
 ; - NEED A PATIENT
"RTN","RGPRSSN",88,0)
 I '$G(DFN) S LTD=0 G LTDQ
"RTN","RGPRSSN",89,0)
 ;
"RTN","RGPRSSN",90,0)
 ; - IF CURRENT INPATIENT, SET LTD = TODAY AND QUIT
"RTN","RGPRSSN",91,0)
 ;Current admission movement from ADM^VAPDT2
"RTN","RGPRSSN",92,0)
 K VADMVT,VAINDT D ADM^VADPT2 I $L(VADMVT) S LTD=DT K VADMVT,VAERR,VAINDT G LTDQ
"RTN","RGPRSSN",93,0)
 K VADMVT,VAERR,VAINDT
"RTN","RGPRSSN",94,0)
 ;
"RTN","RGPRSSN",95,0)
 ; - GET THE LAST DISCHARGE DATE
"RTN","RGPRSSN",96,0)
 S LTD=+$O(^DGPM("ATID3",DFN,"")) S:LTD LTD=9999999.9999999-LTD\1 S:LTD>DT LTD=DT
"RTN","RGPRSSN",97,0)
 ;
"RTN","RGPRSSN",98,0)
 ; - GET THE LAST REGISTRATION DATE AND COMPARE IT TO LTD
"RTN","RGPRSSN",99,0)
 K VAROOT,VARP,^UTILITY("VARP",$J) S VARP("F")=2000101 D REG^VADPT I $D(^UTILITY("VARP",$J,1,"I")) S X=$P(^("I"),U) I X S X=X\1 S:X>LTD LTD=X
"RTN","RGPRSSN",100,0)
 K ^UTILITY("VARP",$J),VARP,VAERR
"RTN","RGPRSSN",101,0)
 ;
"RTN","RGPRSSN",102,0)
 ; - GET THE LAST APPOINTMENT DATE AND COMPARE TO LTD
"RTN","RGPRSSN",103,0)
 K VASD,^UTILTIY("VASD",$J) S VASD("F")=2000101 D SDA^VADPT S Y="" F  S Y=$O(^UTILITY("VASD",$J,Y)) Q:'Y  I $P(^UTILITY("VASD",$J,Y,"I"),U,3)="" S X=$P(^("I"),U) I X S X=X\1 S:X>LTD LTD=X
"RTN","RGPRSSN",104,0)
 K VASD,VAERR,^UTILITY("VASD",$J)
"RTN","RGPRSSN",105,0)
 ;
"RTN","RGPRSSN",106,0)
 ; - GET THE LAST STOP AND COMPARE TO LTD
"RTN","RGPRSSN",107,0)
 ; Look at Outpatient Encounter, ^SDV is going away
"RTN","RGPRSSN",108,0)
 ; Use an API instead of ordering through global
"RTN","RGPRSSN",109,0)
 N OPIEN S OPIEN=$$GETLAST^SDOE(DFN,2000101,"C")
"RTN","RGPRSSN",110,0)
 I $G(^SCE(+OPIEN,0)) S LTD=$P(^SCE(OPIEN,0),"^",1)\1
"RTN","RGPRSSN",111,0)
 ;
"RTN","RGPRSSN",112,0)
LTDQ ;
"RTN","RGPRSSN",113,0)
 Q $S(LTD:LTD,1:0)
"RTN","RGPRSSN",114,0)
 ;
"RTN","RGPRSSN",115,0)
ACTIVE(DFN) ;
"RTN","RGPRSSN",116,0)
 N LTD,TODAY,DIFF
"RTN","RGPRSSN",117,0)
 S LTD=$$LTD(DFN)
"RTN","RGPRSSN",118,0)
 Q:LTD'>0 "NO"
"RTN","RGPRSSN",119,0)
 Q:$L(LTD)'=7 1_"^"_LTD_"^"_"ZERO"
"RTN","RGPRSSN",120,0)
 S TODAY=$$NOW^XLFDT\1
"RTN","RGPRSSN",121,0)
 S DIFF=$$FMDIFF^XLFDT(TODAY,LTD)
"RTN","RGPRSSN",122,0)
 ; if difference is > 1096 days or 3 years
"RTN","RGPRSSN",123,0)
 I DIFF>1096 Q "NO"
"RTN","RGPRSSN",124,0)
 Q "YES"
"RTN","RGPRSSN",125,0)
HEADER ;PRINT REPORT HEADER
"RTN","RGPRSSN",126,0)
 I ($E(IOST,1,2)="C-")&(IO=IO(0)) D
"RTN","RGPRSSN",127,0)
 . S DIR(0)="E"
"RTN","RGPRSSN",128,0)
 . D ^DIR K DIR
"RTN","RGPRSSN",129,0)
 Q:$D(DUOUT)!($D(DTOUT))
"RTN","RGPRSSN",130,0)
 ;;;W:$D(IOF) @IOF
"RTN","RGPRSSN",131,0)
 W @IOF,!,"CIRN Report of Pseudo, missing & potentially false SSNs "
"RTN","RGPRSSN",132,0)
 D NOW^%DTC D YX^%DTC
"RTN","RGPRSSN",133,0)
 W ?55,Y,! K Y
"RTN","RGPRSSN",134,0)
 W !,?20,"Patient activity within past 3 years = ",$G(ACTIV1)
"RTN","RGPRSSN",135,0)
 W !,?1,"Primary"
"RTN","RGPRSSN",136,0)
 W !,?1,"Elig Code"
"RTN","RGPRSSN",137,0)
 W !,?10,"Elig.",?20,"Name",?54,"SSN",?65,"Home Phone"
"RTN","RGPRSSN",138,0)
 W !,"-----------------------------------------------------------------------------"
"RTN","RGPRSSN",139,0)
 Q
"RTN","RGPRSSN",140,0)
HEAD2 ;SUB HEADER
"RTN","RGPRSSN",141,0)
 Q:$D(DUOUT)!($D(DTOUT))
"RTN","RGPRSSN",142,0)
 I RGFS=0,PRNTCODE=RGPRNTCO W !,PRNTCODE
"RTN","RGPRSSN",143,0)
 E  I RGFS=0 W !,PRNTCODE S RGPRNTCO=PRNTCODE
"RTN","RGPRSSN",144,0)
 Q
"RTN","RGRSWPT")
0^5^B4114330
"RTN","RGRSWPT",1,0)
RGRSWPT ;ALB/RJS-ACTIVE PATIENT CHECK ;4/11/96
"RTN","RGRSWPT",2,0)
 ;;0.5; CLINICAL INFO RESOURCE NETWORK ;;30 Sep 98
"RTN","RGRSWPT",3,0)
LTD(DFN)        ;
"RTN","RGRSWPT",4,0)
 ;FIND LAST TREATMENT DATE
"RTN","RGRSWPT",5,0)
 ;INPUT: DFN
"RTN","RGRSWPT",6,0)
 ;OUTPUT: LTD LAST TREATMENT DATE
"RTN","RGRSWPT",7,0)
 ;
"RTN","RGRSWPT",8,0)
 ;
"RTN","RGRSWPT",9,0)
 N LTD,X
"RTN","RGRSWPT",10,0)
 ;
"RTN","RGRSWPT",11,0)
 ; - NEED A PATIENT
"RTN","RGRSWPT",12,0)
 I '$G(DFN) S LTD=0 G LTDQ
"RTN","RGRSWPT",13,0)
 ;
"RTN","RGRSWPT",14,0)
 ; - IF CURRENT INPATIENT, SET LTD = TODAY AND QUIT
"RTN","RGRSWPT",15,0)
 ;Current admission movement from ADM^VAPDT2
"RTN","RGRSWPT",16,0)
 K VADMVT,VAINDT D ADM^VADPT2 I $L(VADMVT) S LTD=DT K VADMVT,VAERR,VAINDT G LTDQ
"RTN","RGRSWPT",17,0)
 K VADMVT,VAERR,VAINDT
"RTN","RGRSWPT",18,0)
 ;
"RTN","RGRSWPT",19,0)
 ; - GET THE LAST DISCHARGE DATE
"RTN","RGRSWPT",20,0)
 S LTD=+$O(^DGPM("ATID3",DFN,"")) S:LTD LTD=9999999.9999999-LTD\1 S:LTD>DT LTD=DT
"RTN","RGRSWPT",21,0)
 ;
"RTN","RGRSWPT",22,0)
 ; - GET THE LAST REGISTRATION DATE AND COMPARE IT TO LTD
"RTN","RGRSWPT",23,0)
 K VAROOT,VARP,^UTILITY("VARP",$J) S VARP("F")=2000101 D REG^VADPT I $D(^UTILITY("VARP",$J,1,"I")) S X=$P(^("I"),U) I X S X=X\1 S:X>LTD LTD=X
"RTN","RGRSWPT",24,0)
 K ^UTILITY("VARP",$J),VARP,VAERR
"RTN","RGRSWPT",25,0)
 ;
"RTN","RGRSWPT",26,0)
 ; - GET THE LAST APPOINTMENT DATE AND COMPARE TO LTD
"RTN","RGRSWPT",27,0)
 K VASD,^UTILTIY("VASD",$J) S VASD("F")=2000101 D SDA^VADPT S Y="" F  S Y=$O(^UTILITY("VASD",$J,Y)) Q:'Y  I $P(^UTILITY("VASD",$J,Y,"I"),U,3)="" S X=$P(^("I"),U) I X S X=X\1 S:X>LTD LTD=X
"RTN","RGRSWPT",28,0)
 K VASD,VAERR,^UTILITY("VASD",$J)
"RTN","RGRSWPT",29,0)
 ;
"RTN","RGRSWPT",30,0)
 ; - GET THE LAST STOP AND COMPARE TO LTD
"RTN","RGRSWPT",31,0)
 ; Look at Outpatient Encounter, ^SDV is going away
"RTN","RGRSWPT",32,0)
 ; Use an API instead of ordering through global
"RTN","RGRSWPT",33,0)
 N OPIEN S OPIEN=$$GETLAST^SDOE(DFN,2000101,"C")
"RTN","RGRSWPT",34,0)
 I $G(^SCE(+OPIEN,0)) S LTD=$P(^SCE(OPIEN,0),"^",1)\1
"RTN","RGRSWPT",35,0)
 ;
"RTN","RGRSWPT",36,0)
LTDQ ;
"RTN","RGRSWPT",37,0)
 Q $S(LTD:LTD,1:0)
"RTN","RGRSWPT",38,0)
 ;
"RTN","RGRSWPT",39,0)
ACTIVE(DFN) ;
"RTN","RGRSWPT",40,0)
 N LTD,TODAY,DIFF
"RTN","RGRSWPT",41,0)
 S LTD=$$LTD(DFN)
"RTN","RGRSWPT",42,0)
 Q:LTD'>0 0
"RTN","RGRSWPT",43,0)
 Q:$L(LTD)'=7 1_"^"_LTD_"^"_"ZERO"
"RTN","RGRSWPT",44,0)
 S TODAY=$$NOW^XLFDT\1
"RTN","RGRSWPT",45,0)
 S DIFF=$$FMDIFF^XLFDT(TODAY,LTD)
"RTN","RGRSWPT",46,0)
 ; if difference is > 1096 days or 3 years
"RTN","RGRSWPT",47,0)
 I DIFF>1096 Q 0
"RTN","RGRSWPT",48,0)
 Q 1_"^"_LTD
"RTN","RGVCCMR1")
0^3^B34779940
"RTN","RGVCCMR1",1,0)
RGVCCMR1 ;GAI/TMG-CIRN CMOR ACTIVITY SCORE GENERATOR (PART 1) ;1-15-1998
"RTN","RGVCCMR1",2,0)
 ;;0.5; CLINICAL INFO RESOURCE NETWORK ;;30 Sep 98
"RTN","RGVCCMR1",3,0)
EN ;  this routine contains entry points to start/restart the batch cmor
"RTN","RGVCCMR1",4,0)
 ;  score initialization, flag a running
"RTN","RGVCCMR1",5,0)
 ;  initialization to stop, calculate and file an activity score for an
"RTN","RGVCCMR1",6,0)
 ;  individual patient, and display the status of the cmor initialization 
"RTN","RGVCCMR1",7,0)
START ; entry point to start or restart the cmor activity score initialization
"RTN","RGVCCMR1",8,0)
 N RGY
"RTN","RGVCCMR1",9,0)
 S U="^"
"RTN","RGVCCMR1",10,0)
 I $P($G(^RGSITE(991.8,1,"CMOR")),U)="" W !!,"This is the initial run of the CIRN CMOR patient activity score generator." S RUNTYPE="I",RGDFN=0 D TASK Q
"RTN","RGVCCMR1",11,0)
 I $P($G(^RGSITE(991.8,1,"CMOR")),U,7)="R" W !!,"The CIRN CMOR patient activity score generator is currently RUNNING." Q
"RTN","RGVCCMR1",12,0)
 I $P($G(^RGSITE(991.8,1,"CMOR")),U,7)="SN" I $P($G(^("CMOR")),U,3)'="" S X=$P(^("CMOR"),U,3) W !!,"The CIRN CMOR patient activity score generator" W !,"completed successfully on " W $$FMTE^XLFDT(X,"1P")_".",! D
"RTN","RGVCCMR1",13,0)
 .S DIR(0)="Y",DIR("A")="Would you like to reset all patient activity scores",DIR("B")="N" D ^DIR S RGY=Y
"RTN","RGVCCMR1",14,0)
 .I RGY=1 S DIR(0)="Y",DIR("A")="This will take quite a while.  Are you sure",DIR("B")="N" D ^DIR S RGY=Y
"RTN","RGVCCMR1",15,0)
 .I RGY=1 S RUNTYPE="R",RGDFN=0 D TASK
"RTN","RGVCCMR1",16,0)
 I $P($G(^RGSITE(991.8,1,"CMOR")),U,7)="SM" I $P($G(^("CMOR")),U,3)'="" S X=$P(^("CMOR"),U,3),%DT="T" D ^%DT S X=Y X ^DD("DD") W !!,"The CIRN CMOR patient activity score generator was STOPPED MANUALLY",!,"on ",Y,"." D
"RTN","RGVCCMR1",17,0)
 .I $P($G(^RGSITE(991.8,1,"CMOR")),U)'="" S LASTDFN=$P(^("CMOR"),U) S LASTPT=$P($G(^DPT(+LASTDFN,0)),U),LASTSSN=$P(^(0),U,9) W !,"The last patient processed was ",LASTPT,"   SSN: ",LASTSSN,!?31,"[RECORD# ",LASTDFN,"]"
"RTN","RGVCCMR1",18,0)
 .W ! S DIR(0)="Y",DIR("A")="Would you like to start with this patient and continue",DIR("B")="N" D ^DIR S RGY=Y
"RTN","RGVCCMR1",19,0)
 .W ! I RGY=1 S DIR(0)="Y",DIR("A")="This will take quite a while.  Are you sure",DIR("B")="N" D ^DIR I Y=1 S RUNTYPE="RS",RGDFN=LASTDFN D TASK
"RTN","RGVCCMR1",20,0)
 .W ! I RGY=0 S DIR(0)="Y",DIR("A")="Would you like to rerun the CMOR calculation for all patients",DIR("B")="N" D ^DIR I Y=1 W ! S DIR(0)="Y",DIR("A")="This will take quite a while.  Are you sure",DIR("B")="N" D ^DIR I Y=1 D
"RTN","RGVCCMR1",21,0)
 .. S RUNTYPE="RS",RGDFN=0 D TASK
"RTN","RGVCCMR1",22,0)
 Q
"RTN","RGVCCMR1",23,0)
STOP ;  entry point to flag a running cmor score initialization to stop
"RTN","RGVCCMR1",24,0)
 I $P($G(^RGSITE(991.8,1,"CMOR")),U,7)'="R" W !,"The CIRN CMOR activity score generation is NOT running." Q
"RTN","RGVCCMR1",25,0)
 W !,"This option will stop the CIRN CMOR patient activity score generation"
"RTN","RGVCCMR1",26,0)
 W !,"after it has completed calculating and filing the score for the current"
"RTN","RGVCCMR1",27,0)
 W !,"patient."
"RTN","RGVCCMR1",28,0)
 W ! S DIR("A")="Are you sure you want to do this",DIR("B")="N",DIR(0)="Y" D ^DIR K DIR S RGY=Y
"RTN","RGVCCMR1",29,0)
 W ! S DIR("A")="Stop patient activity score generation after the current patient",DIR("B")="N",DIR(0)="Y" D ^DIR S RGY=Y
"RTN","RGVCCMR1",30,0)
 ;I RGY=1 S DA=1,DIE="^RGSITE(991.8,",DR="21////Y;24////SM" D ^DIE
"RTN","RGVCCMR1",31,0)
 I RGY=1 S $P(^RGSITE(991.8,1,"CMOR"),U,4)="Y"
"RTN","RGVCCMR1",32,0)
 I  W !!,"CIRN CMOR patient activity generation is flagged to stop after"
"RTN","RGVCCMR1",33,0)
 I  W !,"it has completed the current patient.  This may take a short time."
"RTN","RGVCCMR1",34,0)
 I  W !,"Please check the status later."
"RTN","RGVCCMR1",35,0)
 D KILL
"RTN","RGVCCMR1",36,0)
 Q
"RTN","RGVCCMR1",37,0)
INDIV ;  entry point to allow a cmor score for an individual patient to be
"RTN","RGVCCMR1",38,0)
 ;  calculated and filed
"RTN","RGVCCMR1",39,0)
 S U="^"
"RTN","RGVCCMR1",40,0)
 S DIC="^DPT(",DIC(0)="AEQMNZ" D ^DIC K DIC Q:+Y<0  S RGDFN=+Y
"RTN","RGVCCMR1",41,0)
 S PTNAM=$P(Y(0),"^"),SSN=$P(Y(0),"^",9),FILE=1
"RTN","RGVCCMR1",42,0)
 I $D(^DPT(+Y,"MPI")),$P(^("MPI"),U,7)'="" S FILE=0,X=$P(^("MPI"),U,7)\1,%DT="" D ^%DT S X=Y X ^DD("DD") S SCOREDT=Y D
"RTN","RGVCCMR1",43,0)
 .S CURSCORE=$P(^DPT(+RGDFN,"MPI"),U,6) W !!,"This patient has an existing CMOR score of ",+CURSCORE," calculated on ",SCOREDT,".",!
"RTN","RGVCCMR1",44,0)
 .S DIR(0)="Y",DIR("A")="Do you want to calculate and file a new score for this patient",DIR("B")="NO" D ^DIR I Y=1 S FILE=1
"RTN","RGVCCMR1",45,0)
 I '+$$ACTIVE^RGRSWPT(RGDFN) W !!,"No Patient Activity in the Past Three Years - No Score Filed!" D KILL Q
"RTN","RGVCCMR1",46,0)
 I FILE=1 W !!,"Working.  Please standby..." D CALC^RGVCCMR2 W !!,"CMOR Activity Score: ",SCORE," filed for ",PTNAM,"  ssn: ",SSN,"."
"RTN","RGVCCMR1",47,0)
 D KILL
"RTN","RGVCCMR1",48,0)
 Q
"RTN","RGVCCMR1",49,0)
DISPLAY ;  displays the status of the background cmor score initialization
"RTN","RGVCCMR1",50,0)
 W !,"The CIRN CMOR Activity Score Generator",!
"RTN","RGVCCMR1",51,0)
 W !,"There are ",$P(^DPT(0),U,4)," records in your PATIENT file."
"RTN","RGVCCMR1",52,0)
 W !,"The last record number is ",$P(^DPT(0),U,3),"."
"RTN","RGVCCMR1",53,0)
 I $P($G(^RGSITE(991.8,1,"CMOR")),U)'="" D CHKSTAT
"RTN","RGVCCMR1",54,0)
 I $P($G(^RGSITE(991.8,1,"CMOR")),U)="" D
"RTN","RGVCCMR1",55,0)
 . W !,"The CMOR Calculation has NEVER been run on your system."
"RTN","RGVCCMR1",56,0)
 D KILL
"RTN","RGVCCMR1",57,0)
 Q
"RTN","RGVCCMR1",58,0)
CHKSTAT S PTNAM="-Unknown-",SSN="---"
"RTN","RGVCCMR1",59,0)
 I $P($G(^RGSITE(991.8,1,"CMOR")),U)'="" S RGDFN=$P(^("CMOR"),U) I $D(^DPT(+RGDFN,0)),$P(^(0),U)'="" S PTNAM=$P(^(0),U),SSN=$P(^(0),U,9)
"RTN","RGVCCMR1",60,0)
 S OSTARTED="UNSPECIFIED" I $P($G(^RGSITE(991.8,1,"CMOR")),U,2)'="" S X=$P(^("CMOR"),U,2),%DT="T" D ^%DT S X=Y X ^DD("DD") S OSTARTED=Y
"RTN","RGVCCMR1",61,0)
 S OSTOPPED="UNSPECIFIED" I $P($G(^RGSITE(991.8,1,"CMOR")),U,3)'="" S X=$P(^("CMOR"),U,3),%DT="T" D ^%DT S X=Y X ^DD("DD") S OSTOPPED=Y
"RTN","RGVCCMR1",62,0)
 I $D(^XTMP("RGVCCMR","@@@@","RESTARTED")) S X=^("RESTARTED"),%DT="T" D ^%DT S X=Y X ^DD("DD") S ORESTART=Y
"RTN","RGVCCMR1",63,0)
 S ODFNCT="----" I $D(^XTMP("RGVCCMR","@@@@","DFNCOUNT")) S ODFNCT=^XTMP("RGVCCMR","@@@@","DFNCOUNT")
"RTN","RGVCCMR1",64,0)
STATUS S ST=$P($G(^RGSITE(991.8,1,"CMOR")),U,7)
"RTN","RGVCCMR1",65,0)
 S STATUS=$S(ST="R":"IS RUNNING.",ST="SM":"STOPPED MANUALLY",ST="SN":"SUCCESSFULLY COMPLETED",1:"- NO STATUS LISTED -")
"RTN","RGVCCMR1",66,0)
 ;S PERCOMP=((ODFNCT/$P(^DPT(0),U,4))*100),PERCOMP=$P(PERCOMP,".")_"."_$E($P(PERCOMP,".",2),1,2)
"RTN","RGVCCMR1",67,0)
 W !,"Last Patient Processed: ",PTNAM,"   SSN: ",SSN,"   [RECORD# ",RGDFN,"]"
"RTN","RGVCCMR1",68,0)
 W !!,"The CMOR score initialization last started on ",OSTARTED,!
"RTN","RGVCCMR1",69,0)
 W:$D(ORESTART) "was restarted on ",ORESTART W " and has processed ",ODFNCT," records." W !,"Status is:  ",STATUS W:ST'="R" " on ",OSTOPPED,"."
"RTN","RGVCCMR1",70,0)
 Q
"RTN","RGVCCMR1",71,0)
TASK S ZTIO="",ZTRTN="^RGVCCMR2",ZTDESC="BACKGROUND CMOR SCORE CALCULATOR"
"RTN","RGVCCMR1",72,0)
 S (ZTSAVE("RUNTYPE"),ZTSAVE("RGDFN"))=""
"RTN","RGVCCMR1",73,0)
 ; change ztsave("*")="" to specific variables when done
"RTN","RGVCCMR1",74,0)
 D ^%ZTLOAD
"RTN","RGVCCMR1",75,0)
 I $D(ZTSK) W "   Task#, ",ZTSK," queued" S $P(^RGSITE(991.8,1,"CMOR"),U,9)=ZTSK
"RTN","RGVCCMR1",76,0)
 D ^%ZISC
"RTN","RGVCCMR1",77,0)
KILL K RGDFN,DIC,DIR,FILE,LASTDFN,LASTPT,LASTSSN,ODFNCT,ORESTART,OSTARTED
"RTN","RGVCCMR1",78,0)
 K OSTOPPED,PTNAM,RUNTYPE,SCORE,SSN,ST,STATUS,X,Y,%DT,ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTSK
"RTN","RGVCCMR1",79,0)
 K CURSCORE,SCOREDT
"RTN","RGVCCMR1",80,0)
 Q
"RTN","RGVCCMR2")
0^4^B28259272
"RTN","RGVCCMR2",1,0)
RGVCCMR2 ;GAI/TMG,ALS-CIRN CMOR ACTIVITY SCORE GENERATOR (PART 2) ;10-6-1997
"RTN","RGVCCMR2",2,0)
 ;;0.5; CLINICAL INFO RESOURCE NETWORK ;;30 Sep 98
"RTN","RGVCCMR2",3,0)
EN S U="^"
"RTN","RGVCCMR2",4,0)
 I RUNTYPE'="I" D NOW^%DTC S ^XTMP("RGVCCMR","@@@@","RESTARTED")=% G BATCH
"RTN","RGVCCMR2",5,0)
 I RUNTYPE="I"!(RUNTYPE="R") K ^XTMP("RGVCCMR")
"RTN","RGVCCMR2",6,0)
 I '$D(RUNTYPE) I '$D(RGDFN) S RUNTYPE="I",RGDFN=0 K ^XTMP("RGVCCMR")
"RTN","RGVCCMR2",7,0)
 D NOW^%DTC
"RTN","RGVCCMR2",8,0)
 ;set purge date of XTMP = 30 days
"RTN","RGVCCMR2",9,0)
 S ^XTMP("RGVCCMR",0)=$$FMADD^XLFDT($$NOW^XLFDT,30)_U_$$NOW^XLFDT_U_"CIRN CMOR CALCULATION DATA"
"RTN","RGVCCMR2",10,0)
BATCH I '$D(DT) S X="T",%DT="" D ^%DT S DT=Y
"RTN","RGVCCMR2",11,0)
 D NOW^%DTC
"RTN","RGVCCMR2",12,0)
 S ^XTMP("RGVCCMR","@@@@","STARTED")=%,$P(^RGSITE(991.8,1,"CMOR"),U,2)=%
"RTN","RGVCCMR2",13,0)
 S $P(^RGSITE(991.8,1,"CMOR"),U,8)=RUNTYPE
"RTN","RGVCCMR2",14,0)
 S:'$D(^XTMP("RGVCCMR","@@@@","BIG")) ^XTMP("RGVCCMR","@@@@","BIG")=0
"RTN","RGVCCMR2",15,0)
ALLPTS S ^XTMP("RGVCCMR","@@@@","SECTION")="ALL"
"RTN","RGVCCMR2",16,0)
 S $P(^RGSITE(991.8,1,"CMOR"),U,7)="R"
"RTN","RGVCCMR2",17,0)
 S:'$D(^XTMP("RGVCCMR","@@@@","DFNCOUNT")) ^XTMP("RGVCCMR","@@@@","DFNCOUNT")=0
"RTN","RGVCCMR2",18,0)
 F  S RGDFN=$O(^DPT(+RGDFN)) Q:+RGDFN'>0  I $D(^DPT(+RGDFN,0)) S DPT0=^(0) G:$P($G(^RGSITE(991.8,1,"CMOR")),U,4)="Y" STOP D
"RTN","RGVCCMR2",19,0)
 .S QUIT=0 D CKPT I QUIT Q
"RTN","RGVCCMR2",20,0)
 .D CALC S ^XTMP("RGVCCMR","@@@@","CURR DFN")=RGDFN S $P(^RGSITE(991.8,1,"CMOR"),U)=RGDFN
"RTN","RGVCCMR2",21,0)
 .I SCORE>^XTMP("RGVCCMR","@@@@","BIG") S ^XTMP("RGVCCMR","@@@@","BIG")=SCORE
"RTN","RGVCCMR2",22,0)
 .S RATING=SCORE\100 S:'$D(^XTMP("RGVCCMR","@@@@","RATING",RATING)) ^XTMP("RGVCCMR","@@@@","RATING",RATING)=0
"RTN","RGVCCMR2",23,0)
 .S ^XTMP("RGVCCMR","@@@@","RATING",RATING)=^XTMP("RGVCCMR","@@@@","RATING",RATING)+1
"RTN","RGVCCMR2",24,0)
STOP I $P($G(^RGSITE(991.8,1,"CMOR")),U,4)="Y" S $P(^RGSITE(991.8,1,"CMOR"),U,7)="SM",$P(^RGSITE(991.8,1,"CMOR"),U,4)=""
"RTN","RGVCCMR2",25,0)
 E  S $P(^RGSITE(991.8,1,"CMOR"),U,7)="SN"
"RTN","RGVCCMR2",26,0)
 D NOW^%DTC
"RTN","RGVCCMR2",27,0)
 S ^XTMP("RGVCCMR","@@@@","STOPPED")=%
"RTN","RGVCCMR2",28,0)
 S $P(^RGSITE(991.8,1,"CMOR"),U,3)=%
"RTN","RGVCCMR2",29,0)
 D COUNT,KILL
"RTN","RGVCCMR2",30,0)
 Q
"RTN","RGVCCMR2",31,0)
CALC S SCORE=0,X="T-1065",%DT="" D ^%DT S STDT=Y,X="T",%DT="" D ^%DT
"RTN","RGVCCMR2",32,0)
 S APSTDT=Y,YR=$E(DT,1,3) I '+$$ACTIVE^RGRSWPT(RGDFN) Q
"RTN","RGVCCMR2",33,0)
 I '$D(DT) D NOW^%DTC S DT=%\1
"RTN","RGVCCMR2",34,0)
OPT ;  outpatient visit section
"RTN","RGVCCMR2",35,0)
 ;  each visit valued as follows:    current fy = 30 pts.
"RTN","RGVCCMR2",36,0)
 ;                                       fy - 1 = 20 pts
"RTN","RGVCCMR2",37,0)
 ;                                       fy - 2 = 10 pts
"RTN","RGVCCMR2",38,0)
 ;  primary care visits (based on the PCCODE array) = 50 pts each in
"RTN","RGVCCMR2",39,0)
 ;  addition to the visit value
"RTN","RGVCCMR2",40,0)
 ;  XRCODE = ien of xray stop code  LRCODE = ien of lab stop code 
"RTN","RGVCCMR2",41,0)
 ;  encounters with a stop code for lab or xray are not counted to
"RTN","RGVCCMR2",42,0)
 ;  avoid duplication since lab & xray are counted separately 
"RTN","RGVCCMR2",43,0)
 ;  in the XR & LR sections
"RTN","RGVCCMR2",44,0)
 K PCCODE S NXPC=0 F  S NXPC=$O(^RGSITE(991.8,1,"PC",NXPC)) Q:+NXPC'>0  I $D(^DIC(40.7,+$P($G(^RGSITE(991.8,1,"PC",NXPC,0)),U),0)) S PCCODE($P($G(^RGSITE(991.8,1,"PC",NXPC,0)),U))=""
"RTN","RGVCCMR2",45,0)
 I '$D(PCCODE) S PCCODE=""
"RTN","RGVCCMR2",46,0)
 S XRCODE=0 I $D(^DIC(40.7,"C",105)) S XRCODE=$O(^DIC(40.7,"C",105,0))
"RTN","RGVCCMR2",47,0)
 S LRCODE=0 I $D(^DIC(40.7,"C",108)) S LRCODE=$O(^DIC(40.7,"C",108,0))
"RTN","RGVCCMR2",48,0)
 K VISIT S NXSCE=0 F  S NXSCE=$O(^SCE("C",+RGDFN,NXSCE)) Q:+NXSCE'>0  I $D(^SCE(+NXSCE,0)) S SCE0=^(0) D
"RTN","RGVCCMR2",49,0)
 .I $P(SCE0,U,3)=XRCODE!($P(SCE0,U,3))=LRCODE Q
"RTN","RGVCCMR2",50,0)
 .I $P(SCE0,U)>STDT I '$D(VISIT(+$P(SCE0,U)\1)) S VISIT(+$P(SCE0,U)\1)=30+(($E($P(SCE0,U),1,3)-YR)*10)
"RTN","RGVCCMR2",51,0)
 .I $D(PCCODE(+$P(SCE0,U,3))) I '$D(VISIT($P(SCE0,U)\1)) S VISIT(+$P(SCE0,U)\1)=50
"RTN","RGVCCMR2",52,0)
 .I $D(PCCODE(+$P(SCE0,U,3))) I $D(VISIT($P(SCE0,U)\1)) S VISIT(+$P(SCE0,U)\1)=VISIT(+$P(SCE0,U)\1)+50
"RTN","RGVCCMR2",53,0)
 S NUM=0 F  S NUM=$O(VISIT(NUM)) Q:+NUM'>0  S SCORE=SCORE+VISIT(NUM)
"RTN","RGVCCMR2",54,0)
ADM ;  past admission section
"RTN","RGVCCMR2",55,0)
 ;  each admission valued as follows:  current fy = 50 pts
"RTN","RGVCCMR2",56,0)
 ;                                         fy - 1 = 40 pts
"RTN","RGVCCMR2",57,0)
 ;                                         fy - 2 = 30 pts
"RTN","RGVCCMR2",58,0)
 K ADM S NXPTF=0 F  S NXPTF=$O(^DGPT("B",+RGDFN,NXPTF)) Q:+NXPTF'>0  I $D(^DGPT(NXPTF,0)) S PTF0=^(0) D
"RTN","RGVCCMR2",59,0)
 .I $P(PTF0,U,2)>STDT I '$D(ADM($P(PTF0,U,2)\1)) S ADM(+$P(PTF0,U,2)\1)=50+(($E($P(PTF0,U,2),1,3)-YR)*10)
"RTN","RGVCCMR2",60,0)
 .I $D(ADM(+$P(PTF0,U,2)\1)) I $O(^DGPT(+NXPTF,"S",0)) S ADM($P(PTF0,U,2)\1)=ADM($P(PTF0,U,2)\1)+10
"RTN","RGVCCMR2",61,0)
 S NUM=0 F  S NUM=$O(ADM(NUM)) Q:+NUM'>0  S SCORE=SCORE+ADM(NUM)
"RTN","RGVCCMR2",62,0)
XRAY ; radiololgy section - each radiology exam valued at 20 pts
"RTN","RGVCCMR2",63,0)
 ;
"RTN","RGVCCMR2",64,0)
 S X="T-365",%DT="" D ^%DT S XRSTDT=Y
"RTN","RGVCCMR2",65,0)
 K XRAY S NXXR=0 F  S NXXR=$O(^RARPT("C",+RGDFN,NXXR)) Q:+NXXR'>0  I $D(^RARPT(+NXXR,0)),$P(^(0),U,3)>XRSTDT S RARPT0=^(0) D
"RTN","RGVCCMR2",66,0)
 .I '$D(XRAY($P(RARPT0,U,3)\1)) S XRAY($P(RARPT0,U,3)\1)=20
"RTN","RGVCCMR2",67,0)
 S NUM=0 F  S NUM=$O(XRAY(NUM)) Q:+NUM'>0  S SCORE=SCORE+XRAY(NUM)
"RTN","RGVCCMR2",68,0)
RX ;  prescription section 
"RTN","RGVCCMR2",69,0)
 ;
"RTN","RGVCCMR2",70,0)
 ;  currently active prescriptions valued at 20 pts
"RTN","RGVCCMR2",71,0)
 K RX,^TMP("PSOR",$J) S NXRX=0
"RTN","RGVCCMR2",72,0)
 ;check for version of Outpatient Pharmacy used
"RTN","RGVCCMR2",73,0)
 ;if under 7.0 use direct global access, else use api PSOORDER
"RTN","RGVCCMR2",74,0)
 S PSOVER=$$VERSION^XPDUTL("PSO")
"RTN","RGVCCMR2",75,0)
 F  S NXRX=$O(^PS(55,RGDFN,"P",NXRX)) Q:+NXRX'>0  D
"RTN","RGVCCMR2",76,0)
 . I $D(^PS(55,+RGDFN,"P",NXRX,0)) S RXIEN=^(0)
"RTN","RGVCCMR2",77,0)
 . I PSOVER<7 DO  ;
"RTN","RGVCCMR2",78,0)
 .. I $D(^PSRX(+RXIEN,0)),$P(^(0),U,15)=0 S RX(NXRX)=20
"RTN","RGVCCMR2",79,0)
 . I PSOVER'<7 D EN^PSOORDER(RGDFN,RXIEN) I $D(^TMP("PSOR",$J,RXIEN)) D
"RTN","RGVCCMR2",80,0)
 .. S RGRXST=$P($P(^TMP("PSOR",$J,RXIEN,0),"^",4),";") I RGRXST="A"!(RGRXST="S")!(RGRXST="H") S RX(NXRX)=20 K RGRXST
"RTN","RGVCCMR2",81,0)
 S NUM=0 F  S NUM=$O(RX(NUM)) Q:+NUM'>0  S SCORE=SCORE+RX(NUM)
"RTN","RGVCCMR2",82,0)
 K ^TMP("PSOR",$J)
"RTN","RGVCCMR2",83,0)
LR ;  laboratory section
"RTN","RGVCCMR2",84,0)
 ;  "CH" = chemistry; "CY" = cytotology; "EM" = electron microscopy;
"RTN","RGVCCMR2",85,0)
 ;  "MI = microbiology; "SP" = surgical pathology
"RTN","RGVCCMR2",86,0)
 ; each lab test done in the past year is valued at 10 points
"RTN","RGVCCMR2",87,0)
 ;
"RTN","RGVCCMR2",88,0)
 S LRSCORE=0 I $D(^DPT(+RGDFN,"LR")) S LRDFN=^DPT(+RGDFN,"LR") I $D(^LR(+LRDFN)) S X="T-365",%DT="" D ^%DT S LRSTDT=Y-.0001 F TEST="CH","CY","EM","MI","SP" D
"RTN","RGVCCMR2",89,0)
 .S NXLR=0 F  S NXLR=$O(^LR(+LRDFN,TEST,NXLR)) Q:+NXLR'>0  I $D(^(NXLR,0)),$P(^(0),U)>LRSTDT S LRSCORE=LRSCORE+10
"RTN","RGVCCMR2",90,0)
 S SCORE=SCORE+LRSCORE
"RTN","RGVCCMR2",91,0)
FILE ;  file score & date calculated in appropriate locations in the
"RTN","RGVCCMR2",92,0)
 ;  PATIENT file 'MPI' node
"RTN","RGVCCMR2",93,0)
 ;  scores are filed even if zero
"RTN","RGVCCMR2",94,0)
 S DIE="^DPT(",DA=RGDFN,DR="991.06///^S X=SCORE;991.07///TODAY" D ^DIE
"RTN","RGVCCMR2",95,0)
 S ^XTMP("RGVCCMR","@@@@","DFNCOUNT")=^XTMP("RGVCCMR","@@@@","DFNCOUNT")+1
"RTN","RGVCCMR2",96,0)
 Q
"RTN","RGVCCMR2",97,0)
KILL K ADM,APSTDT,DA,DIE,RGDFN,DGS0,DPT0,DR,LRCODE,LRDFN,LRSCORE,LRSTDT
"RTN","RGVCCMR2",98,0)
 K NUM,NXLR,NXPTF,NXRX,NXSCE,NXXR,PCODE,PTF0,PTNAM
"RTN","RGVCCMR2",99,0)
 K QUIT,RARPT0,RATE,RATING,RX,RXIEN,SCE0,SCORE,SSN,STDT,TEST,VISIT,X
"RTN","RGVCCMR2",100,0)
 K XRAY,XRCODE,XRSTDT,Y,YR,%,%DT,NXPC,PSOVER,RUNTYPE
"RTN","RGVCCMR2",101,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RGVCCMR2",102,0)
 Q
"RTN","RGVCCMR2",103,0)
CKPT S PTNAM=$P(DPT0,U),SSN=$P(DPT0,U,9)
"RTN","RGVCCMR2",104,0)
 I PTNAM?1"ZZ".E S QUIT=1
"RTN","RGVCCMR2",105,0)
 I SSN?1"00000".E S QUIT=1
"RTN","RGVCCMR2",106,0)
 Q
"RTN","RGVCCMR2",107,0)
COUNT S ^XTMP("RGVCCMR","@@@@","RATING","TCOUNT")=0,RATE="" F  S RATE=$O(^XTMP("RGVCCMR","@@@@","RATING",RATE)) Q:RATE'?.N  D
"RTN","RGVCCMR2",108,0)
 .;.W !,RATE
"RTN","RGVCCMR2",109,0)
 .S ^XTMP("RGVCCMR","@@@@","RATING","TCOUNT")=^XTMP("RGVCCMR","@@@@","RATING","TCOUNT")+^XTMP("RGVCCMR","@@@@","RATING",RATE)
"RTN","RGVCCMR2",110,0)
 Q
"SEC","^DIC",991.8,991.8,0,"AUDIT")
@
"SEC","^DIC",991.8,991.8,0,"DD")
@
"SEC","^DIC",991.8,991.8,0,"DEL")
@
"SEC","^DIC",991.8,991.8,0,"LAYGO")
@
"SEC","^DIC",991.8,991.8,0,"RD")
@
"SEC","^DIC",991.8,991.8,0,"WR")
@
"VER")
8.0^21.0
"^DD",991.8,991.8,0)
FIELD^^119^41
"^DD",991.8,991.8,0,"DDA")
N
"^DD",991.8,991.8,0,"DT")
2980826
"^DD",991.8,991.8,0,"IX","B",991.8,.01)

"^DD",991.8,991.8,0,"NM","CIRN SITE PARAMETER")

"^DD",991.8,991.8,0,"VRPK")
CLINICAL INFO RESOURCE NETWORK
"^DD",991.8,991.8,.01,0)
PARAMETER NUMBER^RNJ1,0^^0;1^K:+X'=X!(X>1)!(X<1)!(X?.E1"."1N.N) X
"^DD",991.8,991.8,.01,1,0)
^.1
"^DD",991.8,991.8,.01,1,1,0)
991.8^B
"^DD",991.8,991.8,.01,1,1,1)
S ^RGSITE(991.8,"B",$E(X,1,30),DA)=""
"^DD",991.8,991.8,.01,1,1,2)
K ^RGSITE(991.8,"B",$E(X,1,30),DA)
"^DD",991.8,991.8,.01,3)
Type a Number between 1 and 1, 0 Decimal Digits
"^DD",991.8,991.8,.01,21,0)
^^3^3^2980923^^^^
"^DD",991.8,991.8,.01,21,1,0)
Number assigned to given site parameter entry.  Entry number 1 is the
"^DD",991.8,991.8,.01,21,2,0)
only entry that should exist in this file.  CIRN does not support
"^DD",991.8,991.8,.01,21,3,0)
multiple site parameter entries for a single station.
"^DD",991.8,991.8,.01,"DT")
2960723
"^DD",991.8,991.8,.02,0)
CMOR REQUEST CHANGE^RS^0:MANUAL;1:AUTOMATIC;^0;2^Q
"^DD",991.8,991.8,.02,3)
Enter a '0' if the CMOR information will be manually reviewed or a '1' if it will automatically approved.
"^DD",991.8,991.8,.02,21,0)
^^3^3^2980826^
"^DD",991.8,991.8,.02,21,1,0)
Based on this field setting, any CIRN Master of Record (CMOR) change
"^DD",991.8,991.8,.02,21,2,0)
request received from another station can either be manually reviewed or
"^DD",991.8,991.8,.02,21,3,0)
automatically approved.
"^DD",991.8,991.8,.02,"DT")
2980414
"^DD",991.8,991.8,.03,0)
NEW REQUEST MAILGROUP^P3.8'^XMB(3.8,^0;3^Q
"^DD",991.8,991.8,.03,3)
Enter a Mailgroup that will receive new CMOR change requests from other station.
"^DD",991.8,991.8,.03,21,0)
^^3^3^2980922^^^
"^DD",991.8,991.8,.03,21,1,0)
If the CMOR Request Change parameter is set to manual, new CMOR change
"^DD",991.8,991.8,.03,21,2,0)
requests received will notify the mailgroup entered in this field.  This
"^DD",991.8,991.8,.03,21,3,0)
gives a means of prompting someone to review the new request.
"^DD",991.8,991.8,.03,"DT")
2971208
"^DD",991.8,991.8,11,0)
AUTO ACCEPT VISN DEMOGRAPHICS^S^1:AUTO ACCEPT;0:NOT AUTO ACCEPT;^1;1^Q
"^DD",991.8,991.8,11,3)
Enter a '1' to allow automatic updating from non-CMOR sites or a '0' to not allow automatic updating from non-CMOR sites.
"^DD",991.8,991.8,11,21,0)
^^5^5^2980922^^^^
"^DD",991.8,991.8,11,21,1,0)
This field is the parameter that a site would set to determine if data
"^DD",991.8,991.8,11,21,2,0)
coming from another site, that is not the owner of the data, could be 
"^DD",991.8,991.8,11,21,3,0)
automatically uploaded.
"^DD",991.8,991.8,11,21,4,0)
If this field is not set, then the software will assume that all
"^DD",991.8,991.8,11,21,5,0)
incoming data can not be automatically uploaded.
"^DD",991.8,991.8,11,"DT")
2961106
"^DD",991.8,991.8,16,0)
STOP CIRN MESSAGING^RS^1:STOP MESSAGES;0:SEND MESSAGES;^1;6^Q
"^DD",991.8,991.8,16,3)
Enter a '1' to stop CIRN messaging or '0' to start CIRN messaging.
"^DD",991.8,991.8,16,21,0)
^^1^1^2980826^^^
"^DD",991.8,991.8,16,21,1,0)
This field will instruct the software to allow CIRN messaging or stop it.
"^DD",991.8,991.8,16,"DT")
2961107
"^DD",991.8,991.8,17,0)
PRIMARY CARE CLINIC STOPS^991.817P^^PC;0
"^DD",991.8,991.8,17,21,0)
^^2^2^2980922^^^
"^DD",991.8,991.8,17,21,1,0)
All primary care Clinic Stops (Decision Support System (DSS) Identifiers).
"^DD",991.8,991.8,17,21,2,0)
Used in CMOR patient activity score calculations.
"^DD",991.8,991.8,18,0)
CMOR LAST PATIENT PROCESSED^P2'^DPT(^CMOR;1^Q
"^DD",991.8,991.8,18,3)
This field is used to identify the last patient processed through the sequential CMOR patient activity score process.
"^DD",991.8,991.8,18,21,0)
^^2^2^2980922^^
"^DD",991.8,991.8,18,21,1,0)
This field keeps track of the last sequential patient processed through
"^DD",991.8,991.8,18,21,2,0)
the CMOR patient activity score calculations process.
"^DD",991.8,991.8,18,"DT")
2970926
"^DD",991.8,991.8,19,0)
CMOR INIT STARTED DATE/TIME^D^^CMOR;2^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,19,3)
This field contains the initial start date/time of the CMOR score calculations.
"^DD",991.8,991.8,19,21,0)
^^2^2^2980922^^
"^DD",991.8,991.8,19,21,1,0)
This field contain the date/time that the Start/Restart CMOR Score 
"^DD",991.8,991.8,19,21,2,0)
Calculation option [RGCIRN CMOR START] was first run.
"^DD",991.8,991.8,19,"DT")
2980826
"^DD",991.8,991.8,20,0)
CMOR INIT STOPPED DATE/TIME^D^^CMOR;3^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,20,3)
This field contains the last time that the CMOR score calculations were stopped either manually or normally.
"^DD",991.8,991.8,20,21,0)
^^2^2^2980922^^
"^DD",991.8,991.8,20,21,1,0)
This field contain the date/time that the Stop CMOR Score Calculation
"^DD",991.8,991.8,20,21,2,0)
option [RGCIRN CMOR STOP] was last stopped either manually or normally.
"^DD",991.8,991.8,20,"DT")
2980826
"^DD",991.8,991.8,21,0)
CMOR INIT MANUAL STOP^S^Y:YES;^CMOR;4^Q
"^DD",991.8,991.8,21,3)
This field is used to manually stop the CMOR score calculations.
"^DD",991.8,991.8,21,21,0)
^^4^4^2980922^^^^
"^DD",991.8,991.8,21,21,1,0)
This field is used to stop the background task started by the
"^DD",991.8,991.8,21,21,2,0)
Start/Restart CMOR Score Calculation option [RGCIRN CMOR START].
"^DD",991.8,991.8,21,21,3,0)
This field is populated by the Stop CMOR Score Calculation option
"^DD",991.8,991.8,21,21,4,0)
[RGCIRN CMOR STOP].
"^DD",991.8,991.8,21,"DT")
2970926
"^DD",991.8,991.8,22,0)
CMOR DAILY START TIME^F^^CMOR;5^K:$L(X)>4!($L(X)<4)!'(X?4N) X
"^DD",991.8,991.8,22,1,0)
^.1^^0
"^DD",991.8,991.8,22,3)
Please enter the START TIME in 24 hour format (i.e. 0001 - 2359).
"^DD",991.8,991.8,22,21,0)
^^2^2^2980903^
"^DD",991.8,991.8,22,21,1,0)
This field identifies the daily start time in 24 hour format for the CMOR
"^DD",991.8,991.8,22,21,2,0)
activity score calculations.
"^DD",991.8,991.8,22,"DT")
2970926
"^DD",991.8,991.8,23,0)
CMOR DAILY STOP TIME^F^^CMOR;6^K:$L(X)>4!($L(X)<4)!'(X?4N) X
"^DD",991.8,991.8,23,3)
Please enter the STOP TIME in 24 hour format (i.e. 0001 - 2359).
"^DD",991.8,991.8,23,21,0)
^^2^2^2980903^
"^DD",991.8,991.8,23,21,1,0)
This field identifies the daily stop time in 24 hour format for the CMOR
"^DD",991.8,991.8,23,21,2,0)
activity score calculations.
"^DD",991.8,991.8,23,"DT")
2970926
"^DD",991.8,991.8,24,0)
CMOR INIT STATUS^S^R:RUNNING;SN:STOPPED NORMALLY;SM:STOPPED MANUALLY;^CMOR;7^Q
"^DD",991.8,991.8,24,3)
This field contains the current status of the CMOR Score Calculation process.
"^DD",991.8,991.8,24,21,0)
^^2^2^2980827^
"^DD",991.8,991.8,24,21,1,0)
This field contains the current status of the CMOR Score Calculations
"^DD",991.8,991.8,24,21,2,0)
process.
"^DD",991.8,991.8,24,"DT")
2970926
"^DD",991.8,991.8,25,0)
CMOR RUN TYPE^S^I:INITIAL RUN;R:RESET ALL;RS:RESTART FROM LAST CALCULATED;^CMOR;8^Q
"^DD",991.8,991.8,25,21,0)
^^3^3^2980922^^
"^DD",991.8,991.8,25,21,1,0)
This field contains the current type of CMOR Score Calculation run.  
"^DD",991.8,991.8,25,21,2,0)
This field is used by the Start/Restart CMOR Score Calculation option
"^DD",991.8,991.8,25,21,3,0)
[RGCIRN CMOR START] to identify a starting point.
"^DD",991.8,991.8,25,"DT")
2970926
"^DD",991.8,991.8,26,0)
CMOR LAST TASK#^NJ9,0^^CMOR;9^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",991.8,991.8,26,3)
This field contains the task number of the CMOR Score Calculation task.
"^DD",991.8,991.8,26,21,0)
^^1^1^2980827^
"^DD",991.8,991.8,26,21,1,0)
This field contains the task number of the CMOR Score Calculation process.
"^DD",991.8,991.8,26,"DT")
2971003
"^DD",991.8,991.8,30,0)
CMOR COMP LAST PATIENT^P2'^DPT(^COMP;1^Q
"^DD",991.8,991.8,30,3)
Patient last processed with CMOR Comparison.
"^DD",991.8,991.8,30,21,0)
^^2^2^2980827^
"^DD",991.8,991.8,30,21,1,0)
This patient was the last processed patient in the CMOR Comparison
"^DD",991.8,991.8,30,21,2,0)
process.
"^DD",991.8,991.8,30,"DT")
2980220
"^DD",991.8,991.8,31,0)
CMOR COMP STARTED DATE/TIME^D^^COMP;2^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,31,3)
Date/time this process started to run.
"^DD",991.8,991.8,31,21,0)
^^1^1^2980827^
"^DD",991.8,991.8,31,21,1,0)
This is the date/time the CMOR Comparison process started.
"^DD",991.8,991.8,31,"DT")
2980220
"^DD",991.8,991.8,32,0)
CMOR COMP STOPPED DATE/TIME^D^^COMP;3^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,32,3)
Date/time this process was stopped.
"^DD",991.8,991.8,32,21,0)
^^2^2^2980827^^
"^DD",991.8,991.8,32,21,1,0)
When the CMOR Comparison stopped, (either naturally or manually) a time is
"^DD",991.8,991.8,32,21,2,0)
logged in this field for record.
"^DD",991.8,991.8,32,"DT")
2980220
"^DD",991.8,991.8,33,0)
CMOR COMP STATUS^S^R:RUNNING;MS:MANUALLY STOPPED;C:COMPLETED;^COMP;4^Q
"^DD",991.8,991.8,33,3)
Status of CMOR Comparison process.
"^DD",991.8,991.8,33,21,0)
^^1^1^2980827^^
"^DD",991.8,991.8,33,21,1,0)
This is the status of the CMOR Comparison process in your system.
"^DD",991.8,991.8,33,"DT")
2980220
"^DD",991.8,991.8,34,0)
CMOR COMP LAST TASK #^NJ10,0^^COMP;5^K:+X'=X!(X>9999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",991.8,991.8,34,3)
This field contains the task number of the last CMOR Comparison task.
"^DD",991.8,991.8,34,21,0)
^^1^1^2980827^^
"^DD",991.8,991.8,34,21,1,0)
This is the task number that the CMOR Comparison ran on last.
"^DD",991.8,991.8,34,"DT")
2980220
"^DD",991.8,991.8,35,0)
CMOR COMP FLAG^S^Y:YES;N:NO;^COMP;6^Q
"^DD",991.8,991.8,35,3)
Request to stop the compare process.
"^DD",991.8,991.8,35,21,0)
^^1^1^2980827^^
"^DD",991.8,991.8,35,21,1,0)
This flag is for the user to request the CMOR Comparison process to stop. 
"^DD",991.8,991.8,35,"DT")
2980220
"^DD",991.8,991.8,100,0)
REL INIT STATUS^S^R:RUNNING;SN:STOPPED NORMALLY;SM:STOPPED MANUALLY;^PRE;1^Q
"^DD",991.8,991.8,100,3)
This field contain the current status of the patient religion process.
"^DD",991.8,991.8,100,21,0)
^^1^1^2980903^
"^DD",991.8,991.8,100,21,1,0)
This field contains the current status of the religion status process.
"^DD",991.8,991.8,100,"DT")
2971202
"^DD",991.8,991.8,101,0)
REL INIT START^D^^PRE;2^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,101,3)
This field contains the initial start date/time of the patient religion status process.
"^DD",991.8,991.8,101,21,0)
^^2^2^2980904^^
"^DD",991.8,991.8,101,21,1,0)
This field contains the initial start date/time of the patient religion
"^DD",991.8,991.8,101,21,2,0)
status process.
"^DD",991.8,991.8,101,"DT")
2971202
"^DD",991.8,991.8,102,0)
REL INIT STOP^D^^PRE;3^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,102,3)
This field is populated with date/time that the religion status process ended.
"^DD",991.8,991.8,102,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,102,21,1,0)
This field contains the date/time that the patient religion status
"^DD",991.8,991.8,102,21,2,0)
process stopped.
"^DD",991.8,991.8,102,"DT")
2971202
"^DD",991.8,991.8,103,0)
REL INIT LAST^P2'^DPT(^PRE;4^Q
"^DD",991.8,991.8,103,3)
This field contains the last patient processed by the religion status process.
"^DD",991.8,991.8,103,21,0)
^^2^2^2980903^
"^DD",991.8,991.8,103,21,1,0)
This field contains the last patient processed by the religion status
"^DD",991.8,991.8,103,21,2,0)
process.
"^DD",991.8,991.8,103,"DT")
2971202
"^DD",991.8,991.8,104,0)
REL INIT USER^P200'^VA(200,^PRE;5^Q
"^DD",991.8,991.8,104,3)
This field identifies the person who ran the initial religion status process.
"^DD",991.8,991.8,104,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,104,21,1,0)
This field contains the person who ran the initial religion status
"^DD",991.8,991.8,104,21,2,0)
process.
"^DD",991.8,991.8,104,"DT")
2971202
"^DD",991.8,991.8,105,0)
MAR INIT STATUS^S^R:RUNNING;SN:STOPPED NORMALLY;SM:STOPPED MANUALLY;^PRE;6^Q
"^DD",991.8,991.8,105,3)
This field is populated with the status of the initial marital status process.
"^DD",991.8,991.8,105,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,105,21,1,0)
This field contains the status of the marital status initialization
"^DD",991.8,991.8,105,21,2,0)
process.
"^DD",991.8,991.8,105,"DT")
2971202
"^DD",991.8,991.8,106,0)
MAR INIT START^D^^PRE;7^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,106,3)
This field is populated with the exact starting date/time of the marital status initialization process.
"^DD",991.8,991.8,106,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,106,21,1,0)
This field contains the starting date/time of the marital status
"^DD",991.8,991.8,106,21,2,0)
initialization process.
"^DD",991.8,991.8,106,"DT")
2971202
"^DD",991.8,991.8,107,0)
MAR INIT STOP^D^^PRE;8^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,107,3)
This field is populated with the date/time that the marital status initialization process stopped.
"^DD",991.8,991.8,107,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,107,21,1,0)
This field contains the date/time that the marital status initialization
"^DD",991.8,991.8,107,21,2,0)
process stopped.
"^DD",991.8,991.8,107,"DT")
2971202
"^DD",991.8,991.8,108,0)
MAR INIT LAST^P2'^DPT(^PRE;9^Q
"^DD",991.8,991.8,108,3)
This field is populated with the patient processed by the marital status process.
"^DD",991.8,991.8,108,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,108,21,1,0)
This field contains the last PATIENT file (#2) entry that was processed by
"^DD",991.8,991.8,108,21,2,0)
the marital status initialization process.
"^DD",991.8,991.8,108,"DT")
2971202
"^DD",991.8,991.8,109,0)
MAR INIT USER^P200'^VA(200,^PRE;10^Q
"^DD",991.8,991.8,109,3)
This field is populated with the user the ran the marital status initialization process.
"^DD",991.8,991.8,109,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,109,21,1,0)
This field contains the user that ran the marital status initialization
"^DD",991.8,991.8,109,21,2,0)
process.
"^DD",991.8,991.8,109,"DT")
2971202
"^DD",991.8,991.8,110,0)
ELIG INIT STATUS^S^R:RUNNING;SN:STOPPED NORMALLY;SM:STOPPED MANUALLY;^PRE1;1^Q
"^DD",991.8,991.8,110,3)
This field is populated with the current status of the patient eligibility process.
"^DD",991.8,991.8,110,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,110,21,1,0)
This field contains the status of the patient eligibility initialization
"^DD",991.8,991.8,110,21,2,0)
process.
"^DD",991.8,991.8,110,"DT")
2971202
"^DD",991.8,991.8,111,0)
ELIG INIT START^D^^PRE1;2^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,111,3)
This field is populated with the start date/time of the patient eligibility initialization process.
"^DD",991.8,991.8,111,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,111,21,1,0)
This field contains the date/time that the patient eligibility
"^DD",991.8,991.8,111,21,2,0)
initialization process was started.
"^DD",991.8,991.8,111,"DT")
2971202
"^DD",991.8,991.8,112,0)
ELIG INIT STOP^D^^PRE1;3^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,112,3)
This field is populated with the date/time that the patient eligibility initialization process was stopped.
"^DD",991.8,991.8,112,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,112,21,1,0)
This field contains the date/time that the patient eligibility
"^DD",991.8,991.8,112,21,2,0)
initialization process was stopped.
"^DD",991.8,991.8,112,"DT")
2971202
"^DD",991.8,991.8,113,0)
ELIG INIT LAST^P2'^DPT(^PRE1;4^Q
"^DD",991.8,991.8,113,3)
This field is populated with the last patient processed by the patient eligibility process.
"^DD",991.8,991.8,113,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,113,21,1,0)
This field contains the last PATIENT file (#2) entry processed by the
"^DD",991.8,991.8,113,21,2,0)
patient eligibility initialization process.
"^DD",991.8,991.8,113,"DT")
2971202
"^DD",991.8,991.8,114,0)
ELIG INIT USER^P200'^VA(200,^PRE1;5^Q
"^DD",991.8,991.8,114,3)
This field is populated with the user that ran the patient eligibility process.
"^DD",991.8,991.8,114,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,114,21,1,0)
This field contains the user that ran the patient eligibility
"^DD",991.8,991.8,114,21,2,0)
initialization process.
"^DD",991.8,991.8,114,"DT")
2971202
"^DD",991.8,991.8,115,0)
PSEUDO INIT STATUS^S^R:RUNNING;SN:STOPPED NORMALLY;SM:STOPPED MANUALLY;^PRE1;6^Q
"^DD",991.8,991.8,115,3)
This field is populated with the current status of the Pseudo-SSN process.
"^DD",991.8,991.8,115,21,0)
^^1^1^2980904^
"^DD",991.8,991.8,115,21,1,0)
This field contains the status of the Pseudo-SSN initialization process.
"^DD",991.8,991.8,115,"DT")
2971202
"^DD",991.8,991.8,116,0)
PSEUDO INIT START^D^^PRE1;7^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,116,3)
This field is populated with the date/time that the Pseudo-SSN process was started.
"^DD",991.8,991.8,116,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,116,21,1,0)
This field contains the start date/time of the Pseudo-SSN initialization
"^DD",991.8,991.8,116,21,2,0)
process.
"^DD",991.8,991.8,116,"DT")
2971202
"^DD",991.8,991.8,117,0)
PSEUDO INIT STOP^D^^PRE1;8^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.8,117,3)
This field is populated with the date/time that the Pseudo-SSN process was stopped.
"^DD",991.8,991.8,117,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,117,21,1,0)
This field contains the date/time that the Pseudo-SSN initialization
"^DD",991.8,991.8,117,21,2,0)
process was stopped.
"^DD",991.8,991.8,117,"DT")
2971202
"^DD",991.8,991.8,118,0)
PSEUDO INIT LAST^P2'^DPT(^PRE1;9^Q
"^DD",991.8,991.8,118,3)
This field is populated with the last patient processed by the Pseudo-SSN process.
"^DD",991.8,991.8,118,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,118,21,1,0)
This field contains the last PATIENT file (#2) entry that was processed by
"^DD",991.8,991.8,118,21,2,0)
the Pseudo-SSN initialization process.
"^DD",991.8,991.8,118,"DT")
2971202
"^DD",991.8,991.8,119,0)
PSEUDO INIT USER^P200'^VA(200,^PRE1;10^Q
"^DD",991.8,991.8,119,3)
This field is populated with the user who ran the Pseudo-SSN process.
"^DD",991.8,991.8,119,21,0)
^^2^2^2980904^
"^DD",991.8,991.8,119,21,1,0)
This field contains the user that ran the Pseudo-SSN initialization
"^DD",991.8,991.8,119,21,2,0)
process.
"^DD",991.8,991.8,119,"DT")
2971202
"^DD",991.8,991.817,0)
PRIMARY CARE CLINIC STOPS SUB-FIELD^^2^3
"^DD",991.8,991.817,0,"DT")
2970926
"^DD",991.8,991.817,0,"IX","B",991.817,.01)

"^DD",991.8,991.817,0,"NM","PRIMARY CARE CLINIC STOPS")

"^DD",991.8,991.817,0,"UP")
991.8
"^DD",991.8,991.817,.01,0)
PRIMARY CARE CLINIC STOPS^MP40.7'^DIC(40.7,^0;1^Q
"^DD",991.8,991.817,.01,1,0)
^.1
"^DD",991.8,991.817,.01,1,1,0)
991.817^B
"^DD",991.8,991.817,.01,1,1,1)
S ^RGSITE(991.8,DA(1),"PC","B",$E(X,1,30),DA)=""
"^DD",991.8,991.817,.01,1,1,2)
K ^RGSITE(991.8,DA(1),"PC","B",$E(X,1,30),DA)
"^DD",991.8,991.817,.01,3)
Identify the Clinic Stops to use for calculating the CMOR activity scores.
"^DD",991.8,991.817,.01,21,0)
^^3^3^2980826^
"^DD",991.8,991.817,.01,21,1,0)
This field contains the primary care Clinic Stops or Decision Support
"^DD",991.8,991.817,.01,21,2,0)
System (DSS) identifiers used to calculate the CMOR patient activity
"^DD",991.8,991.817,.01,21,3,0)
scores.
"^DD",991.8,991.817,.01,"DT")
2970926
"^DD",991.8,991.817,1,0)
ACTIVATION DATE^D^^0;2^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.817,1,3)
Enter the date/time to activate this clinic stop.
"^DD",991.8,991.817,1,21,0)
^^2^2^2980826^
"^DD",991.8,991.817,1,21,1,0)
This field contains the activation date of the clinic stop used in
"^DD",991.8,991.817,1,21,2,0)
calculating the CMOR patient activity scores.
"^DD",991.8,991.817,1,"DT")
2970926
"^DD",991.8,991.817,2,0)
INACTIVE DATE^D^^0;3^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",991.8,991.817,2,3)
Enter the date/time to inactive the use of this clinic stop for calculating CMOR scores.
"^DD",991.8,991.817,2,21,0)
^^2^2^2980922^^
"^DD",991.8,991.817,2,21,1,0)
This field identifies the date/time that the clinic stop will be
"^DD",991.8,991.817,2,21,2,0)
inactivated for calculating CMOR patient activity scores.
"^DD",991.8,991.817,2,"DT")
2970926
"^DIC",991.8,991.8,0)
CIRN SITE PARAMETER^991.8
"^DIC",991.8,991.8,0,"GL")
^RGSITE(991.8,
"^DIC",991.8,991.8,"%D",0)
^^3^3^2980923^^^^
"^DIC",991.8,991.8,"%D",1,0)
File to store generic site parameters for the Clinical Information
"^DIC",991.8,991.8,"%D",2,0)
Resource Network (CIRN) package.  Only one entry (entry number 1) should
"^DIC",991.8,991.8,"%D",3,0)
exist in this file.
"^DIC",991.8,"B","CIRN SITE PARAMETER",991.8)

**INSTALL NAME**
DG*5.3*172
"BLD",296,0)
DG*5.3*172^REGISTRATION^0^2980930^y
"BLD",296,1,0)
^^112^112^2980923^
"BLD",296,1,1,0)
Patch DG*5.3*172, which is included in the Clinical Information Resource
"BLD",296,1,2,0)
Network (CIRN) Pre-implementation software Version 0.5 release, contains
"BLD",296,1,3,0)
two components.
"BLD",296,1,4,0)
  
"BLD",296,1,5,0)
First, the patch provides a partial Data Dictionary (DD) update that adds
"BLD",296,1,6,0)
two new fields to the PATIENT file (#2). These new fields are listed
"BLD",296,1,7,0)
below.
"BLD",296,1,8,0)
  
"BLD",296,1,9,0)
     991.06     CMOR ACTIVITY SCORE
"BLD",296,1,10,0)
     991.07     SCORE CALCULATION DATE
"BLD",296,1,11,0)
  
"BLD",296,1,12,0)
These fields facilitate the functionality of the CIRN software utility,
"BLD",296,1,13,0)
Start/Restart CMOR Score Calculation [RGCIRN CMOR START] option, which
"BLD",296,1,14,0)
calculates a metric used for determining the CIRN Master of Record (CMOR)
"BLD",296,1,15,0)
site. This metric is based on patient activity at the site for the present
"BLD",296,1,16,0)
Fiscal Year (FY) plus the prior two FYs. In essence, the software reviews
"BLD",296,1,17,0)
indicators of patient activity and assigns points for activity. The result
"BLD",296,1,18,0)
is a standard measurement that the system can utilize in determining the
"BLD",296,1,19,0)
CMOR site for each patient.
"BLD",296,1,20,0)
  
"BLD",296,1,21,0)
Second, the patch delivers the utilities related to the MARITAL STATUS
"BLD",296,1,22,0)
file (#11) and RELIGION file (#13) clean-up during the implementation
"BLD",296,1,23,0)
phase. The utilities (1) analyze the MARITAL STATUS and RELIGION files for
"BLD",296,1,24,0)
non-standard entries, (2) allow the user to specify, for each non-standard
"BLD",296,1,25,0)
entry, which standard entry should be mapped with associated patients,
"BLD",296,1,26,0)
(3) actually re-point the associated patients to the standard entries,
"BLD",296,1,27,0)
(4) delete the non-standard entries after re-pointing, and (5) delete the
"BLD",296,1,28,0)
files, templates, and user options after the clean-up process has been
"BLD",296,1,29,0)
completed. A description of the MARITAL STATUS and RELIGION files clean-up
"BLD",296,1,30,0)
follows.
"BLD",296,1,31,0)
  
"BLD",296,1,32,0)
Analysis Step:
"BLD",296,1,33,0)
When the patch is first installed, an analysis step is automatically run.
"BLD",296,1,34,0)
This analysis step reviews all files and fields on the local system that
"BLD",296,1,35,0)
point to the MARITAL STATUS and RELIGION files. The resultant analysis
"BLD",296,1,36,0)
data is then stored in a temporary file, the MARITAL/RELIGION CONVERSION
"BLD",296,1,37,0)
file (# 390.1), for later processing. See the conversion step for more
"BLD",296,1,38,0)
information on this later process.
"BLD",296,1,39,0)
  
"BLD",296,1,40,0)
The second part of the analysis reviews the MARITAL STATUS and RELIGION
"BLD",296,1,41,0)
files. It adds standard entries to these files that are missing and
"BLD",296,1,42,0)
searches for non-standard entries. This analysis data is also stored in a
"BLD",296,1,43,0)
temporary file, the MARITAL/RELIGION MAPPING file (# 390.2), for later
"BLD",296,1,44,0)
processing. See the mapping step for more information on this later
"BLD",296,1,45,0)
process.
"BLD",296,1,46,0)
  
"BLD",296,1,47,0)
Mapping Step:
"BLD",296,1,48,0)
Any non-standard entries found during the analysis step must be mapped to
"BLD",296,1,49,0)
a valid standard entry. This information is used during the conversion
"BLD",296,1,50,0)
step to map patients who are associated with the non-standard entries.
"BLD",296,1,51,0)
There are two menu options in the CIRN Pre-Implementation Menu [RGPR
"BLD",296,1,52,0)
PRE-IMP MENU] for mapping these entries.
"BLD",296,1,53,0)
  
"BLD",296,1,54,0)
     Marital Status File - Map Non-Standard Entries
"BLD",296,1,55,0)
          [DG172 PRE-IMP MAR STAT MAP]
"BLD",296,1,56,0)
     Religion File - Map Non-Standard Entries
"BLD",296,1,57,0)
          [DG172 PRE-IMP RELIGION MAP]
"BLD",296,1,58,0)
  
"BLD",296,1,59,0)
The mapping data designated by the user is then stored in File #390.2.
"BLD",296,1,60,0)
  
"BLD",296,1,61,0)
Conversion Step:
"BLD",296,1,62,0)
After the mapping of non-standard entries is complete, a conversion
"BLD",296,1,63,0)
process is run which re-points non-standard entries to the designated
"BLD",296,1,64,0)
standard entries. The options, also in the CIRN Pre-Implementation Menu,
"BLD",296,1,65,0)
to begin and stop the conversion process are listed below.
"BLD",296,1,66,0)
  
"BLD",296,1,67,0)
     Begin Religion/Marital Status Conversion
"BLD",296,1,68,0)
          [DG172 PRE-IMP START CONVERSION]
"BLD",296,1,69,0)
     Stop Religion/Marital Status Conversion
"BLD",296,1,70,0)
          [DG172 PRE-IMP STOP CONVERSION]
"BLD",296,1,71,0)
  
"BLD",296,1,72,0)
The conversion process will update each file/field that points to the
"BLD",296,1,73,0)
MARITAL STATUS and RELIGION files based on the analysis data stored in
"BLD",296,1,74,0)
File #390.1.
"BLD",296,1,75,0)
  
"BLD",296,1,76,0)
As the conversion process is running, the progress is stored in two files.
"BLD",296,1,77,0)
The first File # 390.1 stores the last entry processed for each file/field
"BLD",296,1,78,0)
that needs to be converted. As each file/field is converted, it is flagged
"BLD",296,1,79,0)
as finished.
"BLD",296,1,80,0)
  
"BLD",296,1,81,0)
The second File #390.2 stores the number of times a non-standard entry was
"BLD",296,1,82,0)
found and converted across all files/fields.
"BLD",296,1,83,0)
  
"BLD",296,1,84,0)
After the conversion process is complete, an e-mail message is generated
"BLD",296,1,85,0)
and delivered to the user of the Begin Religion/Marital Status Conversion
"BLD",296,1,86,0)
option. The message reports the number of conversions that took place for
"BLD",296,1,87,0)
each non-standard entry.
"BLD",296,1,88,0)
  
"BLD",296,1,89,0)
Un-Install Step:
"BLD",296,1,90,0)
After the conversion is finished, the two temporary files, File #390.1 and
"BLD",296,1,91,0)
File #390.2, are deleted along with the non-standard entries from the
"BLD",296,1,92,0)
MARITAL STATUS and RELIGION files. Associated templates and menu options
"BLD",296,1,93,0)
are also deleted.
"BLD",296,1,94,0)
  
"BLD",296,1,95,0)
The complete CIRN Pre-Implementation Menu, prior to conversion, is listed
"BLD",296,1,96,0)
below.
"BLD",296,1,97,0)
  
"BLD",296,1,98,0)
Select CIRN Pre-Implementation Menu Option:
"BLD",296,1,99,0)
  
"BLD",296,1,100,0)
     Pseudo-SSN Report
"BLD",296,1,101,0)
     Eligibility Code Files Report
"BLD",296,1,102,0)
     Marital Status File - Map Non-Standard Entries
"BLD",296,1,103,0)
     Religion File - Map Non-Standard Entries
"BLD",296,1,104,0)
     Begin Religion/Marital Status Conversion
"BLD",296,1,105,0)
     Stop Religion/Marital Status Conversion
"BLD",296,1,106,0)
     CIRN Master of Record Menu ...
"BLD",296,1,107,0)
  
"BLD",296,1,108,0)
The following options will be deleted after the conversion is completed.
"BLD",296,1,109,0)
     Marital Status File - Map Non-Standard Entries
"BLD",296,1,110,0)
     Religion File - Map Non-Standard Entries
"BLD",296,1,111,0)
     Begin Religion/Marital Status Conversion
"BLD",296,1,112,0)
     Stop Religion/Marital Status Conversion
"BLD",296,4,0)
^9.64PA^2^3
"BLD",296,4,2,0)
2
"BLD",296,4,2,2,0)
^9.641^2^1
"BLD",296,4,2,2,2,0)
2  (File-top level)
"BLD",296,4,2,2,2,1,0)
^9.6411^991.06^2
"BLD",296,4,2,2,2,1,991.06,0)
CMOR ACTIVITY SCORE
"BLD",296,4,2,2,2,1,991.07,0)
SCORE CALCULATION DATE
"BLD",296,4,2,222)
y^n^p^^^^n
"BLD",296,4,390.1,0)
390.1
"BLD",296,4,390.1,222)
y^n^f^^^^n
"BLD",296,4,390.2,0)
390.2
"BLD",296,4,390.2,222)
y^n^f^^^^n
"BLD",296,4,"APDD",2,2)

"BLD",296,4,"APDD",2,2,991.06)

"BLD",296,4,"APDD",2,2,991.07)

"BLD",296,4,"B",2,2)

"BLD",296,4,"B",390.1,390.1)

"BLD",296,4,"B",390.2,390.2)

"BLD",296,"ABNS",0)
^9.66A^1^1
"BLD",296,"ABNS",1,0)
DG17
"BLD",296,"ABNS",1,1,0)
^9.661A^^
"BLD",296,"ABNS","B","DG17",1)

"BLD",296,"ABPKG")
n^n^
"BLD",296,"INIT")
START^DG17203
"BLD",296,"KRN",0)
^9.67PA^19^18
"BLD",296,"KRN",.4,0)
.4
"BLD",296,"KRN",.4,"NM",0)
^9.68A^2^2
"BLD",296,"KRN",.4,"NM",1,0)
DG172 MARITAL MAPPING    FILE #390.2^390.2^0
"BLD",296,"KRN",.4,"NM",2,0)
DG172 RELIGION MAPPING    FILE #390.2^390.2^0
"BLD",296,"KRN",.4,"NM","B","DG172 MARITAL MAPPING    FILE #390.2",1)

"BLD",296,"KRN",.4,"NM","B","DG172 RELIGION MAPPING    FILE #390.2",2)

"BLD",296,"KRN",.401,0)
.401
"BLD",296,"KRN",.401,"NM",0)
^9.68A^2^2
"BLD",296,"KRN",.401,"NM",1,0)
DG172 MARITAL MAPPING    FILE #390.2^390.2^0
"BLD",296,"KRN",.401,"NM",2,0)
DG172 RELIGION MAPPING    FILE #390.2^390.2^0
"BLD",296,"KRN",.401,"NM","B","DG172 MARITAL MAPPING    FILE #390.2",1)

"BLD",296,"KRN",.401,"NM","B","DG172 RELIGION MAPPING    FILE #390.2",2)

"BLD",296,"KRN",.402,0)
.402
"BLD",296,"KRN",.402,"NM",0)
^9.68A^3^3
"BLD",296,"KRN",.402,"NM",1,0)
DG172 NEW ENTRY    FILE #390.1^390.1^0
"BLD",296,"KRN",.402,"NM",2,0)
DG172 NEW MARITAL    FILE #390.2^390.2^0
"BLD",296,"KRN",.402,"NM",3,0)
DG172 NEW RELIGION    FILE #390.2^390.2^0
"BLD",296,"KRN",.402,"NM","B","DG172 NEW ENTRY    FILE #390.1",1)

"BLD",296,"KRN",.402,"NM","B","DG172 NEW MARITAL    FILE #390.2",2)

"BLD",296,"KRN",.402,"NM","B","DG172 NEW RELIGION    FILE #390.2",3)

"BLD",296,"KRN",.403,0)
.403
"BLD",296,"KRN",.5,0)
.5
"BLD",296,"KRN",.84,0)
.84
"BLD",296,"KRN",3.6,0)
3.6
"BLD",296,"KRN",3.8,0)
3.8
"BLD",296,"KRN",9.2,0)
9.2
"BLD",296,"KRN",9.8,0)
9.8
"BLD",296,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",296,"KRN",9.8,"NM",1,0)
DG17201^^0^B18959409
"BLD",296,"KRN",9.8,"NM",2,0)
DG17202^^0^B27772126
"BLD",296,"KRN",9.8,"NM",3,0)
DG17203^^0^B10191851
"BLD",296,"KRN",9.8,"NM",4,0)
DG17204^^0^B26811859
"BLD",296,"KRN",9.8,"NM","B","DG17201",1)

"BLD",296,"KRN",9.8,"NM","B","DG17202",2)

"BLD",296,"KRN",9.8,"NM","B","DG17203",3)

"BLD",296,"KRN",9.8,"NM","B","DG17204",4)

"BLD",296,"KRN",19,0)
19
"BLD",296,"KRN",19,"NM",0)
^9.68A^9^5
"BLD",296,"KRN",19,"NM",5,0)
DG172 PRE-IMP MAR STAT MAP^^0
"BLD",296,"KRN",19,"NM",6,0)
DG172 PRE-IMP RELIGION MAP^^0
"BLD",296,"KRN",19,"NM",7,0)
DG172 PRE-IMP START CONVERSION^^0
"BLD",296,"KRN",19,"NM",8,0)
DG172 PRE-IMP STOP CONVERSION^^0
"BLD",296,"KRN",19,"NM",9,0)
RGPR PRE-IMP MENU^^2
"BLD",296,"KRN",19,"NM","B","DG172 PRE-IMP MAR STAT MAP",5)

"BLD",296,"KRN",19,"NM","B","DG172 PRE-IMP RELIGION MAP",6)

"BLD",296,"KRN",19,"NM","B","DG172 PRE-IMP START CONVERSION",7)

"BLD",296,"KRN",19,"NM","B","DG172 PRE-IMP STOP CONVERSION",8)

"BLD",296,"KRN",19,"NM","B","RGPR PRE-IMP MENU",9)

"BLD",296,"KRN",19.1,0)
19.1
"BLD",296,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",296,"KRN",101,0)
101
"BLD",296,"KRN",409.61,0)
409.61
"BLD",296,"KRN",771,0)
771
"BLD",296,"KRN",869.2,0)
869.2
"BLD",296,"KRN",870,0)
870
"BLD",296,"KRN",8994,0)
8994
"BLD",296,"KRN","B",.4,.4)

"BLD",296,"KRN","B",.401,.401)

"BLD",296,"KRN","B",.402,.402)

"BLD",296,"KRN","B",.403,.403)

"BLD",296,"KRN","B",.5,.5)

"BLD",296,"KRN","B",.84,.84)

"BLD",296,"KRN","B",3.6,3.6)

"BLD",296,"KRN","B",3.8,3.8)

"BLD",296,"KRN","B",9.2,9.2)

"BLD",296,"KRN","B",9.8,9.8)

"BLD",296,"KRN","B",19,19)

"BLD",296,"KRN","B",19.1,19.1)

"BLD",296,"KRN","B",101,101)

"BLD",296,"KRN","B",409.61,409.61)

"BLD",296,"KRN","B",771,771)

"BLD",296,"KRN","B",869.2,869.2)

"BLD",296,"KRN","B",870,870)

"BLD",296,"KRN","B",8994,8994)

"BLD",296,"PRE")

"BLD",296,"QUES",0)
^9.62^^
"BLD",296,"REQB",0)
^9.611^^
"FIA",2)
PATIENT
"FIA",2,0)
^DPT(
"FIA",2,0,0)
2I
"FIA",2,0,1)
y^n^p^^^^n
"FIA",2,0,10)

"FIA",2,0,11)

"FIA",2,0,"RLRO")

"FIA",2,0,"VR")
5.3^DG
"FIA",2,2)
1
"FIA",2,2,991.06)

"FIA",2,2,991.07)

"FIA",390.1)
MARITAL/RELIGION CONVERSION
"FIA",390.1,0)
^XTMP("DGTMP",390.1,
"FIA",390.1,0,0)
390.1I
"FIA",390.1,0,1)
y^n^f^^^^n
"FIA",390.1,0,10)

"FIA",390.1,0,11)

"FIA",390.1,0,"RLRO")

"FIA",390.1,0,"VR")
5.3^DG
"FIA",390.1,390.1)
0
"FIA",390.2)
MARITAL/RELIGION MAPPING
"FIA",390.2,0)
^XTMP("DGTMP",390.2,
"FIA",390.2,0,0)
390.2I
"FIA",390.2,0,1)
y^n^f^^^^n
"FIA",390.2,0,10)

"FIA",390.2,0,11)

"FIA",390.2,0,"RLRO")

"FIA",390.2,0,"VR")
5.3^DG
"FIA",390.2,390.2)
0
"INIT")
START^DG17203
"KRN",.4,1082,-1)
0^2
"KRN",.4,1082,0)
DG172 RELIGION MAPPING^2980414.1005^^390.2^^^2980415
"KRN",.4,1082,"F",2)
100;"NON-STANDARD ENTRY"~101;"CONVERT TO:"~
"KRN",.4,1082,"H")
RELIGION MAPPING LIST
"KRN",.4,1084,-1)
0^1
"KRN",.4,1084,0)
DG172 MARITAL MAPPING^2980414.0957^^390.2^^^2980414
"KRN",.4,1084,"F",2)
100;"NON-STANDARD ENTRY"~101;"CONVERT TO:"~
"KRN",.4,1084,"H")
MARITAL MAPPING LIST
"KRN",.401,805,-1)
0^1
"KRN",.401,805,0)
DG172 MARITAL MAPPING^2980227.0836^^390.2^^^2980414^
"KRN",.401,805,2,0)
^.4014^3^3
"KRN",.401,805,2,1,0)
390.2^.02^TYPE^@^^^^^^3
"KRN",.401,805,2,1,"F")
10.99999^11^11 (MARITAL STATUS)
"KRN",.401,805,2,1,"GET")
S DISX(1)=$P($G(^XTMP("DGTMP",390.2,D0,0)),U,2)
"KRN",.401,805,2,1,"QCON")
I DISX(1)=11
"KRN",.401,805,2,1,"SER")
0.8205^0.8205
"KRN",.401,805,2,1,"T")
11^11^11 (MARITAL STATUS)
"KRN",.401,805,2,1,"TXT")
TYPE equals 11 (MARITAL STATUS)
"KRN",.401,805,2,2,0)
390.2^.03^STANDARD?^@^^^^^^3
"KRN",.401,805,2,2,"F")
-1^0^0 (NO)
"KRN",.401,805,2,2,"GET")
S DISX(2)=$P($G(^XTMP("DGTMP",390.2,D0,0)),U,3)
"KRN",.401,805,2,2,"QCON")
I DISX(2)=0
"KRN",.401,805,2,2,"SER")
0.9744^0.9744
"KRN",.401,805,2,2,"T")
0^0^0 (NO)
"KRN",.401,805,2,2,"TXT")
STANDARD? equals 0 (NO)
"KRN",.401,805,2,3,0)
390.2^100^ENTRY^@^^^^^^4
"KRN",.401,805,2,3,"GET")
NEW N0 S N0=$G(^XTMP("DGTMP",390.2,D0,0)) S X=$S($P(N0,"^",4)]"":$P($G(^DIC(13,+$P(N0,"^",4),0)),"^"),1:$P($G(^DIC(11,+$P(N0,"^",5),0)),"^")) S DISX(3)=X
"KRN",.401,805,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,805,2,3,"SER")
0.0000^0.0000
"KRN",.401,805,2,3,"TXT")
ENTRY not null
"KRN",.401,805,2,"B",390.2,1)

"KRN",.401,805,2,"B",390.2,2)

"KRN",.401,805,2,"B",390.2,3)

"KRN",.401,806,-1)
0^2
"KRN",.401,806,0)
DG172 RELIGION MAPPING^2980415.0901^^390.2^^^2980415
"KRN",.401,806,2,0)
^.4014^3^3
"KRN",.401,806,2,1,0)
390.2^.02^TYPE^@^^^^^^3
"KRN",.401,806,2,1,"F")
12.99999^13^13 (RELIGION)
"KRN",.401,806,2,1,"GET")
S DISX(1)=$P($G(^XTMP("DGTMP",390.2,D0,0)),U,2)
"KRN",.401,806,2,1,"QCON")
I DISX(1)=13
"KRN",.401,806,2,1,"SER")
0.1579^0.1579
"KRN",.401,806,2,1,"T")
13^13^13 (RELIGION)
"KRN",.401,806,2,1,"TXT")
TYPE equals 13 (RELIGION)
"KRN",.401,806,2,2,0)
390.2^.03^STANDARD?^@^^^^^^3
"KRN",.401,806,2,2,"F")
-1^0^0 (NO)
"KRN",.401,806,2,2,"GET")
S DISX(2)=$P($G(^XTMP("DGTMP",390.2,D0,0)),U,3)
"KRN",.401,806,2,2,"QCON")
I DISX(2)=0
"KRN",.401,806,2,2,"SER")
0.9737^0.9737
"KRN",.401,806,2,2,"T")
0^0^0 (NO)
"KRN",.401,806,2,2,"TXT")
STANDARD? equals 0 (NO)
"KRN",.401,806,2,3,0)
390.2^100^ENTRY^@^^^^^^4
"KRN",.401,806,2,3,"GET")
NEW N0 S N0=$G(^XTMP("DGTMP",390.2,D0,0)) S X=$S($P(N0,"^",4)]"":$P($G(^DIC(13,+$P(N0,"^",4),0)),"^"),1:$P($G(^DIC(11,+$P(N0,"^",5),0)),"^")) S DISX(3)=X
"KRN",.401,806,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,806,2,3,"SER")
0.0000^0.0000
"KRN",.401,806,2,3,"TXT")
ENTRY not null
"KRN",.401,806,2,"B",390.2,1)

"KRN",.401,806,2,"B",390.2,2)

"KRN",.401,806,2,"B",390.2,3)

"KRN",.402,1614,-1)
0^1
"KRN",.402,1614,0)
DG172 NEW ENTRY^2980225.1131^^390.1^^^2980929^
"KRN",.402,1614,"DR",1,390.1)
.02////^S X=FILE;.03////^S X=FIELD;.04////^S X=GLOB;.05////^S X=NODE;.06////^S X=PIECE;.07////^S X=TYPE;
"KRN",.402,1615,-1)
0^3
"KRN",.402,1615,0)
DG172 NEW RELIGION^2980226.1046^^390.2^^^2980923^
"KRN",.402,1615,"DR",1,390.2)
.02////^S X=TYPE;.03////^S X=STANDARD;.04////^S X=POINTER;.08////^S X=$S($D(NEWSTAN):NEWSTAN,1:0);
"KRN",.402,1616,-1)
0^2
"KRN",.402,1616,0)
DG172 NEW MARITAL^2980226.1047^^390.2^^^2980923^
"KRN",.402,1616,"DR",1,390.2)
.02////^S X=TYPE;.03////^S X=STANDARD;.05////^S X=POINTER;.08////^S X=$S($D(NEWSTAN):NEWSTAN,1:0);
"KRN",19,5863,-1)
2^9
"KRN",19,5863,0)
RGPR PRE-IMP MENU^CIRN Pre-Implementation Menu^^M^12553^^^^^^^272
"KRN",19,5863,10,0)
^19.01IP^11^7
"KRN",19,5863,10,8,0)
5928^^20
"KRN",19,5863,10,8,"^")
DG172 PRE-IMP MAR STAT MAP
"KRN",19,5863,10,9,0)
5929^^30
"KRN",19,5863,10,9,"^")
DG172 PRE-IMP RELIGION MAP
"KRN",19,5863,10,10,0)
5930^^40
"KRN",19,5863,10,10,"^")
DG172 PRE-IMP START CONVERSION
"KRN",19,5863,10,11,0)
5931^^50
"KRN",19,5863,10,11,"^")
DG172 PRE-IMP STOP CONVERSION
"KRN",19,5863,"U")
CIRN PRE-IMPLEMENTATION MENU
"KRN",19,5928,-1)
0^5
"KRN",19,5928,0)
DG172 PRE-IMP MAR STAT MAP^Marital Status File - Map Non-Standard Entries^^R^^^^^^^^REGISTRATION
"KRN",19,5928,1,0)
^^14^14^2980909^^^^
"KRN",19,5928,1,1,0)
This option will identify non-standard MARITAL STATUS file (#11) entries
"KRN",19,5928,1,2,0)
and then allow the user to designate, for each non-standard entry, a
"KRN",19,5928,1,3,0)
standard entry which this utility will re-point with associated patients.
"KRN",19,5928,1,4,0)
For example, you will be able to map all patients with a marital status
"KRN",19,5928,1,5,0)
of SINGLE to NEVER MARRIED.
"KRN",19,5928,1,6,0)
 
"KRN",19,5928,1,7,0)
This mapping will be used during the re-pointing and file clean-up process,
"KRN",19,5928,1,8,0)
the Begin Religion/Marital Status Conversion [DG172 PRE-IMP START
"KRN",19,5928,1,9,0)
CONVERSION] option.
"KRN",19,5928,1,10,0)
 
"KRN",19,5928,1,11,0)
The option (1) provides a list of non-standard MARITAL STATUS file entries
"KRN",19,5928,1,12,0)
to the screen or a printer, (2) prompts the user for a non-standard entry,
"KRN",19,5928,1,13,0)
and (3) then prompts for the standard entry which the utility will re-
"KRN",19,5928,1,14,0)
point with associated patients.
"KRN",19,5928,25)
EDIT^DG17204(11)
"KRN",19,5928,"U")
MARITAL STATUS FILE - MAP NON-
"KRN",19,5929,-1)
0^6
"KRN",19,5929,0)
DG172 PRE-IMP RELIGION MAP^Religion File - Map Non-Standard Entries^^R^^^^^^^^REGISTRATION
"KRN",19,5929,1,0)
^^14^14^2980909^^^
"KRN",19,5929,1,1,0)
This option will identify non-standard RELIGION file (#13) entries and
"KRN",19,5929,1,2,0)
then allows the user to designate, for each non-standard entry, a
"KRN",19,5929,1,3,0)
standard entry which this utility will re-point with associated patients.
"KRN",19,5929,1,4,0)
For example, you will be able to map all patients with a religion of 
"KRN",19,5929,1,5,0)
XXXXXX to UNKNOWN/NO PREFERENCE.
"KRN",19,5929,1,6,0)
 
"KRN",19,5929,1,7,0)
This mapping will be used during the re-pointing and file clean-up process,
"KRN",19,5929,1,8,0)
the Begin Religion/Marital Status Conversion [DG172 PRE-IMP START
"KRN",19,5929,1,9,0)
CONVERSION] option.
"KRN",19,5929,1,10,0)
 
"KRN",19,5929,1,11,0)
The option (1) provides a list of non-standard RELIGION file entries to the
"KRN",19,5929,1,12,0)
screen or a pointer, (2) prompts the user for a non-standard entry, and (3)
"KRN",19,5929,1,13,0)
then prompts for the standard entry which the utility will re-point with
"KRN",19,5929,1,14,0)
associated patients.
"KRN",19,5929,25)
EDIT^DG17204(13)
"KRN",19,5929,"U")
RELIGION FILE - MAP NON-STANDA
"KRN",19,5930,-1)
0^7
"KRN",19,5930,0)
DG172 PRE-IMP START CONVERSION^Begin Religion/Marital Status Conversion^^R^^^^^^^^REGISTRATION
"KRN",19,5930,1,0)
^^15^15^2980923^^^^
"KRN",19,5930,1,1,0)
After mapping of non-standard entries is complete, this conversion
"KRN",19,5930,1,2,0)
process is run in order to actually re-point patient records from
"KRN",19,5930,1,3,0)
non-standard entries to the specified standard entries. A mail
"KRN",19,5930,1,4,0)
bulletin with summary information will be generated at the end 
"KRN",19,5930,1,5,0)
of the process and sent to the user.
"KRN",19,5930,1,6,0)
 
"KRN",19,5930,1,7,0)
The conversion process will re-point those patients associated with
"KRN",19,5930,1,8,0)
non-standard entries to standard entries, delete the non-standard
"KRN",19,5930,1,9,0)
entries in the MARITAL STATUS and RELIGION files, and will finally
"KRN",19,5930,1,10,0)
delete the four options related to this process. Options Pseudo-SSN
"KRN",19,5930,1,11,0)
Report [RGPR PRE-IMP SSN REPORT], Eligibility Code Files Report
"KRN",19,5930,1,12,0)
[RGPR PRE-IMP ELIG REPORT], and CIRN Master of Record Menu [RGCIRN
"KRN",19,5930,1,13,0)
CMOR MAIN] will remain on the CIRN Pre-Implementation Menu [RGPR PRE-
"KRN",19,5930,1,14,0)
IMP MENU].  The process can be repeated ONLY if the DG*5.3*172 patch
"KRN",19,5930,1,15,0)
is re-applied.
"KRN",19,5930,25)
JOB^DG17202
"KRN",19,5930,"U")
BEGIN RELIGION/MARITAL STATUS 
"KRN",19,5931,-1)
0^8
"KRN",19,5931,0)
DG172 PRE-IMP STOP CONVERSION^Stop Religion/Marital Status Conversion^^R^^^^^^^^REGISTRATION
"KRN",19,5931,1,0)
^^8^8^2980909^^
"KRN",19,5931,1,1,0)
This option will stop the conversion process associated with the Begin
"KRN",19,5931,1,2,0)
Religion/Marital Status Conversion [DG172 PRE-IMP START CONVERSION] option.
"KRN",19,5931,1,3,0)
 
"KRN",19,5931,1,4,0)
A bulletin will be delivered to the user of the option after the conversion
"KRN",19,5931,1,5,0)
process has been stopped.  The system stores the internal entry number(IEN)
"KRN",19,5931,1,6,0)
of the last entry processed.  To restart the process, simply choose the 
"KRN",19,5931,1,7,0)
Begin Religion/Marital Status Conversion option again.  The system will 
"KRN",19,5931,1,8,0)
then resume with the next patient record.
"KRN",19,5931,25)
STOP^DG17202
"KRN",19,5931,"U")
STOP RELIGION/MARITAL STATUS C
"OER",5,0)
5^DG^^M.A.S.^
"OER",5,1,0)
^100.9951PA^21^11
"OER",5,1,10,0)
102
"OER",5,1,10,1,0)
^100.99511PA^1^1
"OER",5,1,10,1,1,0)
101
"OER",5,1,11,0)
104
"OER",5,1,11,1,0)
^100.99511PA^1^1
"OER",5,1,11,1,1,0)
101
"OER",5,1,12,0)
112
"OER",5,1,12,1,0)
^100.99511PA^1^1
"OER",5,1,12,1,1,0)
101
"OER",5,1,13,0)
482
"OER",5,1,13,1,0)
^100.99511PA^1^1
"OER",5,1,13,1,1,0)
457
"OER",5,1,14,0)
565
"OER",5,1,14,1,0)
^100.99511PA^1^1
"OER",5,1,14,1,1,0)
101
"OER",5,1,15,0)
647
"OER",5,1,15,1,0)
^100.99511PA^3^3
"OER",5,1,15,1,1,0)
602
"OER",5,1,15,1,2,0)
594
"OER",5,1,15,1,3,0)
788
"OER",5,1,16,0)
649
"OER",5,1,16,1,0)
^100.99511PA^4^4
"OER",5,1,16,1,1,0)
594
"OER",5,1,16,1,2,0)
602
"OER",5,1,16,1,3,0)
582
"OER",5,1,16,1,4,0)
788
"OER",5,1,17,0)
650
"OER",5,1,17,1,0)
^100.99511PA^4^4
"OER",5,1,17,1,1,0)
582
"OER",5,1,17,1,2,0)
602
"OER",5,1,17,1,3,0)
594
"OER",5,1,17,1,4,0)
788
"OER",5,1,19,0)
781
"OER",5,1,19,1,0)
^100.99511PA^1^1
"OER",5,1,19,1,1,0)
414
"OER",5,1,20,0)
837
"OER",5,1,20,1,0)
^100.99511PA^1^1
"OER",5,1,20,1,1,0)
101
"OER",5,1,21,0)
838
"OER",5,1,21,1,0)
^100.99511PA^1^1
"OER",5,1,21,1,1,0)
414
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813^2970721^12541
"PKG",5,22,1,"PAH",1,0)
172^2980930^12551
"PKG",5,22,1,"PAH",1,1,0)
^^112^112^2981006
"PKG",5,22,1,"PAH",1,1,1,0)
Patch DG*5.3*172, which is included in the Clinical Information Resource
"PKG",5,22,1,"PAH",1,1,2,0)
Network (CIRN) Pre-implementation software Version 0.5 release, contains
"PKG",5,22,1,"PAH",1,1,3,0)
two components.
"PKG",5,22,1,"PAH",1,1,4,0)
  
"PKG",5,22,1,"PAH",1,1,5,0)
First, the patch provides a partial Data Dictionary (DD) update that adds
"PKG",5,22,1,"PAH",1,1,6,0)
two new fields to the PATIENT file (#2). These new fields are listed
"PKG",5,22,1,"PAH",1,1,7,0)
below.
"PKG",5,22,1,"PAH",1,1,8,0)
  
"PKG",5,22,1,"PAH",1,1,9,0)
     991.06     CMOR ACTIVITY SCORE
"PKG",5,22,1,"PAH",1,1,10,0)
     991.07     SCORE CALCULATION DATE
"PKG",5,22,1,"PAH",1,1,11,0)
  
"PKG",5,22,1,"PAH",1,1,12,0)
These fields facilitate the functionality of the CIRN software utility,
"PKG",5,22,1,"PAH",1,1,13,0)
Start/Restart CMOR Score Calculation [RGCIRN CMOR START] option, which
"PKG",5,22,1,"PAH",1,1,14,0)
calculates a metric used for determining the CIRN Master of Record (CMOR)
"PKG",5,22,1,"PAH",1,1,15,0)
site. This metric is based on patient activity at the site for the present
"PKG",5,22,1,"PAH",1,1,16,0)
Fiscal Year (FY) plus the prior two FYs. In essence, the software reviews
"PKG",5,22,1,"PAH",1,1,17,0)
indicators of patient activity and assigns points for activity. The result
"PKG",5,22,1,"PAH",1,1,18,0)
is a standard measurement that the system can utilize in determining the
"PKG",5,22,1,"PAH",1,1,19,0)
CMOR site for each patient.
"PKG",5,22,1,"PAH",1,1,20,0)
  
"PKG",5,22,1,"PAH",1,1,21,0)
Second, the patch delivers the utilities related to the MARITAL STATUS
"PKG",5,22,1,"PAH",1,1,22,0)
file (#11) and RELIGION file (#13) clean-up during the implementation
"PKG",5,22,1,"PAH",1,1,23,0)
phase. The utilities (1) analyze the MARITAL STATUS and RELIGION files for
"PKG",5,22,1,"PAH",1,1,24,0)
non-standard entries, (2) allow the user to specify, for each non-standard
"PKG",5,22,1,"PAH",1,1,25,0)
entry, which standard entry should be mapped with associated patients,
"PKG",5,22,1,"PAH",1,1,26,0)
(3) actually re-point the associated patients to the standard entries,
"PKG",5,22,1,"PAH",1,1,27,0)
(4) delete the non-standard entries after re-pointing, and (5) delete the
"PKG",5,22,1,"PAH",1,1,28,0)
files, templates, and user options after the clean-up process has been
"PKG",5,22,1,"PAH",1,1,29,0)
completed. A description of the MARITAL STATUS and RELIGION files clean-up
"PKG",5,22,1,"PAH",1,1,30,0)
follows.
"PKG",5,22,1,"PAH",1,1,31,0)
  
"PKG",5,22,1,"PAH",1,1,32,0)
Analysis Step:
"PKG",5,22,1,"PAH",1,1,33,0)
When the patch is first installed, an analysis step is automatically run.
"PKG",5,22,1,"PAH",1,1,34,0)
This analysis step reviews all files and fields on the local system that
"PKG",5,22,1,"PAH",1,1,35,0)
point to the MARITAL STATUS and RELIGION files. The resultant analysis
"PKG",5,22,1,"PAH",1,1,36,0)
data is then stored in a temporary file, the MARITAL/RELIGION CONVERSION
"PKG",5,22,1,"PAH",1,1,37,0)
file (# 390.1), for later processing. See the conversion step for more
"PKG",5,22,1,"PAH",1,1,38,0)
information on this later process.
"PKG",5,22,1,"PAH",1,1,39,0)
  
"PKG",5,22,1,"PAH",1,1,40,0)
The second part of the analysis reviews the MARITAL STATUS and RELIGION
"PKG",5,22,1,"PAH",1,1,41,0)
files. It adds standard entries to these files that are missing and
"PKG",5,22,1,"PAH",1,1,42,0)
searches for non-standard entries. This analysis data is also stored in a
"PKG",5,22,1,"PAH",1,1,43,0)
temporary file, the MARITAL/RELIGION MAPPING file (# 390.2), for later
"PKG",5,22,1,"PAH",1,1,44,0)
processing. See the mapping step for more information on this later
"PKG",5,22,1,"PAH",1,1,45,0)
process.
"PKG",5,22,1,"PAH",1,1,46,0)
  
"PKG",5,22,1,"PAH",1,1,47,0)
Mapping Step:
"PKG",5,22,1,"PAH",1,1,48,0)
Any non-standard entries found during the analysis step must be mapped to
"PKG",5,22,1,"PAH",1,1,49,0)
a valid standard entry. This information is used during the conversion
"PKG",5,22,1,"PAH",1,1,50,0)
step to map patients who are associated with the non-standard entries.
"PKG",5,22,1,"PAH",1,1,51,0)
There are two menu options in the CIRN Pre-Implementation Menu [RGPR
"PKG",5,22,1,"PAH",1,1,52,0)
PRE-IMP MENU] for mapping these entries.
"PKG",5,22,1,"PAH",1,1,53,0)
  
"PKG",5,22,1,"PAH",1,1,54,0)
     Marital Status File - Map Non-Standard Entries
"PKG",5,22,1,"PAH",1,1,55,0)
          [DG172 PRE-IMP MAR STAT MAP]
"PKG",5,22,1,"PAH",1,1,56,0)
     Religion File - Map Non-Standard Entries
"PKG",5,22,1,"PAH",1,1,57,0)
          [DG172 PRE-IMP RELIGION MAP]
"PKG",5,22,1,"PAH",1,1,58,0)
  
"PKG",5,22,1,"PAH",1,1,59,0)
The mapping data designated by the user is then stored in File #390.2.
"PKG",5,22,1,"PAH",1,1,60,0)
  
"PKG",5,22,1,"PAH",1,1,61,0)
Conversion Step:
"PKG",5,22,1,"PAH",1,1,62,0)
After the mapping of non-standard entries is complete, a conversion
"PKG",5,22,1,"PAH",1,1,63,0)
process is run which re-points non-standard entries to the designated
"PKG",5,22,1,"PAH",1,1,64,0)
standard entries. The options, also in the CIRN Pre-Implementation Menu,
"PKG",5,22,1,"PAH",1,1,65,0)
to begin and stop the conversion process are listed below.
"PKG",5,22,1,"PAH",1,1,66,0)
  
"PKG",5,22,1,"PAH",1,1,67,0)
     Begin Religion/Marital Status Conversion
"PKG",5,22,1,"PAH",1,1,68,0)
          [DG172 PRE-IMP START CONVERSION]
"PKG",5,22,1,"PAH",1,1,69,0)
     Stop Religion/Marital Status Conversion
"PKG",5,22,1,"PAH",1,1,70,0)
          [DG172 PRE-IMP STOP CONVERSION]
"PKG",5,22,1,"PAH",1,1,71,0)
  
"PKG",5,22,1,"PAH",1,1,72,0)
The conversion process will update each file/field that points to the
"PKG",5,22,1,"PAH",1,1,73,0)
MARITAL STATUS and RELIGION files based on the analysis data stored in
"PKG",5,22,1,"PAH",1,1,74,0)
File #390.1.
"PKG",5,22,1,"PAH",1,1,75,0)
  
"PKG",5,22,1,"PAH",1,1,76,0)
As the conversion process is running, the progress is stored in two files.
"PKG",5,22,1,"PAH",1,1,77,0)
The first File # 390.1 stores the last entry processed for each file/field
"PKG",5,22,1,"PAH",1,1,78,0)
that needs to be converted. As each file/field is converted, it is flagged
"PKG",5,22,1,"PAH",1,1,79,0)
as finished.
"PKG",5,22,1,"PAH",1,1,80,0)
  
"PKG",5,22,1,"PAH",1,1,81,0)
The second File #390.2 stores the number of times a non-standard entry was
"PKG",5,22,1,"PAH",1,1,82,0)
found and converted across all files/fields.
"PKG",5,22,1,"PAH",1,1,83,0)
  
"PKG",5,22,1,"PAH",1,1,84,0)
After the conversion process is complete, an e-mail message is generated
"PKG",5,22,1,"PAH",1,1,85,0)
and delivered to the user of the Begin Religion/Marital Status Conversion
"PKG",5,22,1,"PAH",1,1,86,0)
option. The message reports the number of conversions that took place for
"PKG",5,22,1,"PAH",1,1,87,0)
each non-standard entry.
"PKG",5,22,1,"PAH",1,1,88,0)
  
"PKG",5,22,1,"PAH",1,1,89,0)
Un-Install Step:
"PKG",5,22,1,"PAH",1,1,90,0)
After the conversion is finished, the two temporary files, File #390.1 and
"PKG",5,22,1,"PAH",1,1,91,0)
File #390.2, are deleted along with the non-standard entries from the
"PKG",5,22,1,"PAH",1,1,92,0)
MARITAL STATUS and RELIGION files. Associated templates and menu options
"PKG",5,22,1,"PAH",1,1,93,0)
are also deleted.
"PKG",5,22,1,"PAH",1,1,94,0)
  
"PKG",5,22,1,"PAH",1,1,95,0)
The complete CIRN Pre-Implementation Menu, prior to conversion, is listed
"PKG",5,22,1,"PAH",1,1,96,0)
below.
"PKG",5,22,1,"PAH",1,1,97,0)
  
"PKG",5,22,1,"PAH",1,1,98,0)
Select CIRN Pre-Implementation Menu Option:
"PKG",5,22,1,"PAH",1,1,99,0)
  
"PKG",5,22,1,"PAH",1,1,100,0)
     Pseudo-SSN Report
"PKG",5,22,1,"PAH",1,1,101,0)
     Eligibility Code Files Report
"PKG",5,22,1,"PAH",1,1,102,0)
     Marital Status File - Map Non-Standard Entries
"PKG",5,22,1,"PAH",1,1,103,0)
     Religion File - Map Non-Standard Entries
"PKG",5,22,1,"PAH",1,1,104,0)
     Begin Religion/Marital Status Conversion
"PKG",5,22,1,"PAH",1,1,105,0)
     Stop Religion/Marital Status Conversion
"PKG",5,22,1,"PAH",1,1,106,0)
     CIRN Master of Record Menu ...
"PKG",5,22,1,"PAH",1,1,107,0)
  
"PKG",5,22,1,"PAH",1,1,108,0)
The following options will be deleted after the conversion is completed.
"PKG",5,22,1,"PAH",1,1,109,0)
     Marital Status File - Map Non-Standard Entries
"PKG",5,22,1,"PAH",1,1,110,0)
     Religion File - Map Non-Standard Entries
"PKG",5,22,1,"PAH",1,1,111,0)
     Begin Religion/Marital Status Conversion
"PKG",5,22,1,"PAH",1,1,112,0)
     Stop Religion/Marital Status Conversion
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","DG17201")
0^1^B18959409
"RTN","DG17201",1,0)
DG17201 ;BHM/RGY,ALS-Find and save all files pointing to religion and marital status files ;FEB 20,1998
"RTN","DG17201",2,0)
 ;;5.3;Registration;**172**;Aug 13, 1993
"RTN","DG17201",3,0)
CF ;
"RTN","DG17201",4,0)
 NEW FILE,FIELD,CONV
"RTN","DG17201",5,0)
 K ^TMP("DG11N13",$J)
"RTN","DG17201",6,0)
 F CONV=11,13 F FILE=0:0 S FILE=$O(^DD(CONV,0,"PT",FILE)) Q:FILE=""  F FIELD=0:0 S FIELD=$O(^DD(CONV,0,"PT",FILE,FIELD)) Q:FIELD=""  D ADD(FILE,FIELD,CONV)
"RTN","DG17201",7,0)
 D:$D(^TMP("DG11N13",$J)) CONVMSG
"RTN","DG17201",8,0)
 K ^TMP("DG11N13",$J)
"RTN","DG17201",9,0)
 Q
"RTN","DG17201",10,0)
ADD(FILE,FIELD,TYPE) ;
"RTN","DG17201",11,0)
 NEW PIECE,NODE,GLOB,GLLOC
"RTN","DG17201",12,0)
 I FILE=""!(FIELD="") Q
"RTN","DG17201",13,0)
 I FILE=390.2 Q
"RTN","DG17201",14,0)
 D FIELD^DID(FILE,FIELD,"","GLOBAL SUBSCRIPT LOCATION","GLLOC")
"RTN","DG17201",15,0)
 S PIECE=$P($G(GLLOC("GLOBAL SUBSCRIPT LOCATION")),";",2)
"RTN","DG17201",16,0)
 I PIECE="" D CONVF(FILE,FIELD,"Unknown/Invalid pointer, DD("_CONV_",0,""PT"","_FILE_","_FIELD_").") Q
"RTN","DG17201",17,0)
 S NODE=$P($G(GLLOC("GLOBAL SUBSCRIPT LOCATION")),";")
"RTN","DG17201",18,0)
 I NODE="" D CONVF(FILE,FIELD,"Unknown/Invalid pointer, DD("_CONV_",0,""PT"","_FILE_","_FIELD_").") Q
"RTN","DG17201",19,0)
 S GLOB=$P($$GET1^DID(FILE,"","","GLOBAL NAME"),U,2) I GLOB="" D NOCONV(FILE,FIELD) Q
"RTN","DG17201",20,0)
 S EN=$$ADD^DG17202(390.1)
"RTN","DG17201",21,0)
 S DIE="^XTMP(""DGTMP"",390.1,",DR="[DG172 NEW ENTRY]",DA=EN D ^DIE
"RTN","DG17201",22,0)
 K DIE,DR,DA,EN,X
"RTN","DG17201",23,0)
 K ^TMP("DIERR",$J)
"RTN","DG17201",24,0)
 Q
"RTN","DG17201",25,0)
NOCONV(FILE,FIELD) ;CONVERTING FILE 11 AND 13 NON-STANDARD ENTRIES
"RTN","DG17201",26,0)
 N SUBX,SUB,PIECE,GLLOC,SUBFILE
"RTN","DG17201",27,0)
 S SUB(0)=FILE_"^"_FIELD
"RTN","DG17201",28,0)
 I '$D(^DD(FILE,0,"UP")) D CONVF(FILE,FIELD,"Unknown/Invalid pointer, DD("_CONV_",0,""PT"","_FILE_","_FIELD_").") Q
"RTN","DG17201",29,0)
 I $D(^DD(FILE,0,"UP")) S SUB=1,SUBFILE=FILE F  S:$D(^DD(SUBFILE,0,"UP")) SUB(SUB)=^DD(SUBFILE,0,"UP"),SUBFILE=SUB(SUB),SUB=SUB+1 Q:'$D(^DD(SUBFILE,0,"UP"))
"RTN","DG17201",30,0)
 S SUBX=$O(SUB(" "),-1) I SUBX>0 D CONVF(FILE,FIELD,"Cannot convert the "_$P(^DD(FILE,0),U)_" in the "_$$GET1^DID(SUB(SUBX),"","","NAME")_" File.",.SUB)
"RTN","DG17201",31,0)
 Q
"RTN","DG17201",32,0)
CONVF(FILE,FIELD,TXT,SUB) ;
"RTN","DG17201",33,0)
 N X,LAST
"RTN","DG17201",34,0)
 S ^TMP("DG11N13",$J,CONV,$O(^TMP("DG11N13",$J,CONV," "),-1)+1)=FILE_"^"_FIELD_"^"_TXT_"^"
"RTN","DG17201",35,0)
 S LAST=$O(^TMP("DG11N13",$J,CONV," "),-1)
"RTN","DG17201",36,0)
 I '$D(SUB) S ^TMP("DG11N13",$J,CONV,LAST)=^TMP("DG11N13",$J,CONV,LAST)_FILE
"RTN","DG17201",37,0)
 I $D(SUB) S X=0,LAST=$O(^TMP("DG11N13",$J,CONV," "),-1) F X=$O(SUB(" "),-1):-1:0 S ^TMP("DG11N13",$J,CONV,LAST)=^TMP("DG11N13",$J,CONV,LAST)_$P(SUB(X),U)_"/"
"RTN","DG17201",38,0)
 Q
"RTN","DG17201",39,0)
CONVMSG ;send file 11 and 13 conversion problem message
"RTN","DG17201",40,0)
 N HDR,DGX,SPACE,DGY,STRG,CONV
"RTN","DG17201",41,0)
 S SPACE=""
"RTN","DG17201",42,0)
 S DGY=1
"RTN","DG17201",43,0)
 S STRG="        File 11 and 13 Conversion Problem list" D STRING(STRG,.DGY)
"RTN","DG17201",44,0)
 S STRG=" " F X=1:1:2 D STRING(STRG,.DGY)
"RTN","DG17201",45,0)
 F CONV=11,13 D
"RTN","DG17201",46,0)
 .S STRG=$S(CONV=11:"MARITAL STATUS (#11) File Conversion Problems:",CONV=13:"RELIGION (#13) File Converion Problems:",1:"") D STRING(STRG,.DGY)
"RTN","DG17201",47,0)
 .S STRG=" " F X=1:1:2 D STRING(STRG,.DGY)
"RTN","DG17201",48,0)
 .I '$D(^TMP("DG11N13",$J,CONV)) S STRG="No problems" D STRING(STRG,.DGY) Q
"RTN","DG17201",49,0)
 .D CONVHDR
"RTN","DG17201",50,0)
 .S DGX=0 F  S DGX=$O(^TMP("DG11N13",$J,CONV,DGX)) Q:'DGX  D
"RTN","DG17201",51,0)
 ..S STRG="",SPACE=""
"RTN","DG17201",52,0)
 ..F X=1:1 S STRG=$S(X>1:SPACE,1:"")_$P($P(^TMP("DG11N13",$J,CONV,DGX),U,4),"/",X) Q:X=$L($P(^TMP("DG11N13",$J,CONV,DGX),U,4),"/")  D
"RTN","DG17201",53,0)
 ...I X<$L($P(^TMP("DG11N13",$J,CONV,DGX),U,4),"/") D STRING(STRG,.DGY)
"RTN","DG17201",54,0)
 ...S SPACE=SPACE_" "
"RTN","DG17201",55,0)
 ..S SPACE="",STRG=STRG_"^"_$P(^TMP("DG11N13",$J,CONV,DGX),U,2)_"^"_$P(^TMP("DG11N13",$J,CONV,DGX),U,3) D STRING(STRG,.DGY)
"RTN","DG17201",56,0)
 .S STRG=" " F X=1:1:2 D STRING(STRG,.DGY)
"RTN","DG17201",57,0)
 D MAILMSG
"RTN","DG17201",58,0)
 Q
"RTN","DG17201",59,0)
CONVHDR ;
"RTN","DG17201",60,0)
 S STRG="Pointer File/Subfile^Field^Problem Description" D STRING(STRG,.DGY)
"RTN","DG17201",61,0)
 S STRG="-------------------------------------------------------------------" D STRING(STRG,.DGY)
"RTN","DG17201",62,0)
 Q
"RTN","DG17201",63,0)
STRING(STR,DGY) ;convert string into column display
"RTN","DG17201",64,0)
 N RST ;result
"RTN","DG17201",65,0)
 N X
"RTN","DG17201",66,0)
 S RST=$P(STR,U)
"RTN","DG17201",67,0)
 I $P($G(STR),U,2)="" S DGY(DGY)=RST,DGY=DGY+1 Q
"RTN","DG17201",68,0)
 F X=$L(RST):1:25 S RST=RST_" "
"RTN","DG17201",69,0)
 ;format field start column at 25
"RTN","DG17201",70,0)
 S RST=RST_$P(STR,U,2)
"RTN","DG17201",71,0)
 I $P($G(STR),U,3)="" S DGY(DGY)=RST,DGY=DGY+1 Q
"RTN","DG17201",72,0)
 F X=$L(RST):1:35 S RST=RST_" "
"RTN","DG17201",73,0)
 ;format problem description start each line at 35
"RTN","DG17201",74,0)
 F  Q:($L(RST)+$L($P(STR,U,3)))<78  D
"RTN","DG17201",75,0)
 .S RST=RST_$P(STR,U,3)
"RTN","DG17201",76,0)
 .S STR="",$P(STR,U,3)=$E(RST,79,120)
"RTN","DG17201",77,0)
 .S RST=$E(RST,1,78) S DGY(DGY)=RST,DGY=DGY+1
"RTN","DG17201",78,0)
 .S RST="" F X=1:1:35 S RST=RST_" "
"RTN","DG17201",79,0)
 .S RST=RST_$P(STR,U,3),$P(STR,U,3)=""
"RTN","DG17201",80,0)
 S DGY(DGY)=RST,DGY=DGY+1
"RTN","DG17201",81,0)
 Q
"RTN","DG17201",82,0)
MAILMSG ;send problem message to user that started task
"RTN","DG17201",83,0)
 S XMDUZ="DG*5.3*172",XMTEXT="DGY(",XMY(DUZ)="",XMSUB="File 11 and 13 Conversion Problems"
"RTN","DG17201",84,0)
 N DIFROM D ^XMD K XMTEXT,XMY,XMSUB,XMDUZ,XMZ
"RTN","DG17201",85,0)
 Q
"RTN","DG17202")
0^2^B27772126
"RTN","DG17202",1,0)
DG17202 ;BHM/RGY,ALS-Create new request for patient demographic change ;FEB 20, 1998
"RTN","DG17202",2,0)
 ;;5.3;Registration;**172**;Aug 13, 1993
"RTN","DG17202",3,0)
ADD(FILE) ;
"RTN","DG17202",4,0)
 NEW DIC,D0,DIE,DA,X,DLAYGO,DR,RGOK,EVN,DINUM
"RTN","DG17202",5,0)
 F EVN=+$P(^XTMP("DGTMP",FILE,0),"^",3)+1:1 L +^XTMP("DGTMP",FILE,EVN):0 I $T S RGOK=0 D  L -^XTMP("DGTMP",FILE,EVN) Q:RGOK
"RTN","DG17202",6,0)
 .I $D(^XTMP("DGTMP",FILE,EVN)) Q
"RTN","DG17202",7,0)
 .S DINUM=EVN,DIC="^XTMP(""DGTMP"","_FILE_",",DIC(0)="L",DLAYGO=FILE,X=EVN K DD,D0 D FILE^DICN K DIC,DLAYGO,D0
"RTN","DG17202",8,0)
 .S RGOK=1
"RTN","DG17202",9,0)
 .Q
"RTN","DG17202",10,0)
 Q EVN
"RTN","DG17202",11,0)
ADDR(FILE,NAME) ;
"RTN","DG17202",12,0)
 NEW DIC,D0,DIE,DA,X,DLAYGO,DR,RGOK,EVN,DINUM
"RTN","DG17202",13,0)
 F EVN=+$P(^DIC(FILE,0),"^",3)+1:1 L +^DIC(FILE,EVN):0 I $T S RGOK=0 D  L -^DIC(FILE,EVN) Q:RGOK
"RTN","DG17202",14,0)
 .I $D(^DIC(FILE,EVN)) Q
"RTN","DG17202",15,0)
 .S DINUM=EVN,DIC="^DIC("_FILE_",",DIC(0)="L",DLAYGO=FILE,X=NAME K DD,D0 D FILE^DICN K DIC,DLAYGO,D0
"RTN","DG17202",16,0)
 .S RGOK=1
"RTN","DG17202",17,0)
 .Q
"RTN","DG17202",18,0)
 Q EVN
"RTN","DG17202",19,0)
CONV ;Start conversion process
"RTN","DG17202",20,0)
 NEW TASK
"RTN","DG17202",21,0)
 I '$$CHK() Q
"RTN","DG17202",22,0)
 I '$$CHK2() Q
"RTN","DG17202",23,0)
 L +^XTMP("DGTMP",390.1,"ASTOP"):1 E  Q
"RTN","DG17202",24,0)
 F TASK=0:0 S TASK=$O(^XTMP("DGTMP",390.1,TASK)) Q:'TASK  I $P(^XTMP("DGTMP",390.1,TASK,0),"^",9)="" D TASK(TASK) I $G(^XTMP("DGTMP",390.1,"ASTOP"))="YES" D SEND G Q1
"RTN","DG17202",25,0)
 D SEND,JOBKILL
"RTN","DG17202",26,0)
Q1 Q
"RTN","DG17202",27,0)
SEND ;
"RTN","DG17202",28,0)
 L -^XTMP("DGTMP",390.1,"ASTOP")
"RTN","DG17202",29,0)
 D BROAD^DG17204
"RTN","DG17202",30,0)
 Q
"RTN","DG17202",31,0)
TASK(TASK) ;Convert a file (task)
"RTN","DG17202",32,0)
 NEW GLOB,ENTRY,NODE,OV,PIECE,N0,NV,TYPE,COUNT,FIELD
"RTN","DG17202",33,0)
 S N0=$G(^XTMP("DGTMP",390.1,TASK,0)) I N0="" Q
"RTN","DG17202",34,0)
 S COUNT=0,GLOB="^"_$P(N0,"^",4),NODE=$P(N0,"^",5),FIELD=$P(N0,"^",3),PIECE=$P(N0,"^",6),TYPE=$P(N0,"^",7)
"RTN","DG17202",35,0)
 I $P(^XTMP("DGTMP",390.1,TASK,0),"^",9)]"" Q
"RTN","DG17202",36,0)
 I '$$CHK1(TYPE) D NOW^%DTC S $P(^XTMP("DGTMP",390.1,TASK,0),"^",9)=% K % Q
"RTN","DG17202",37,0)
 F ENTRY=$P(N0,"^",8):0 S ENTRY=$O(@(GLOB_ENTRY_")")) Q:'ENTRY  D  I $G(^XTMP("DGTMP",390.1,"ASTOP"))="YES" G OUT
"RTN","DG17202",38,0)
 .S OV=$P($G(@(GLOB_ENTRY_","_NODE_")")),"^",PIECE)
"RTN","DG17202",39,0)
 .S NV=$$GETNV(TYPE,OV)
"RTN","DG17202",40,0)
 .I NV'=-1,NV'=OV D
"RTN","DG17202",41,0)
 ..S DIE=GLOB,DA=ENTRY,DR=FIELD_"////^S X="""_$S(NV="":"@",1:NV)_"""" D ^DIE
"RTN","DG17202",42,0)
 ..I NV'="" S X=$P(^XTMP("DGTMP",390.2,$O(^XTMP("DGTMP",390.2,$S(TYPE=13:"AC",1:"AD"),OV,0)),0),"^",9),$P(^(0),"^",9)=X+1
"RTN","DG17202",43,0)
 ..Q
"RTN","DG17202",44,0)
 .S $P(^XTMP("DGTMP",390.1,TASK,0),"^",8)=ENTRY
"RTN","DG17202",45,0)
 .Q
"RTN","DG17202",46,0)
 S $P(^XTMP("DGTMP",390.1,TASK,0),"^",9)=$$NOW^XLFDT
"RTN","DG17202",47,0)
OUT Q
"RTN","DG17202",48,0)
GETNV(TYPE,VALUE) ;
"RTN","DG17202",49,0)
 NEW NV
"RTN","DG17202",50,0)
 I VALUE=0 Q ""
"RTN","DG17202",51,0)
 I VALUE="" Q -1
"RTN","DG17202",52,0)
 ;IF POINTS TO A INVALID VALUE SET TO NULL
"RTN","DG17202",53,0)
 I '$D(^DIC(TYPE,VALUE,0)) Q ""
"RTN","DG17202",54,0)
 ;IF POINTS TO A NEW ENTRY...IT WAS A BROKEN POINTER TO BEGIN WITH
"RTN","DG17202",55,0)
 I $P($G(^XTMP("DGTMP",390.2,+$O(^XTMP("DGTMP",390.2,$S(TYPE=13:"AC",1:"AD"),VALUE,0)),0)),"^",8)=1 Q ""
"RTN","DG17202",56,0)
 S NV=$P(^XTMP("DGTMP",390.2,$O(^XTMP("DGTMP",390.2,$S(TYPE=13:"AC",1:"AD"),VALUE,0)),0),"^",$S(TYPE=13:6,1:7))
"RTN","DG17202",57,0)
 I NV Q NV
"RTN","DG17202",58,0)
 Q VALUE
"RTN","DG17202",59,0)
CHK() ;IS CONVERSION NECESSARY?
"RTN","DG17202",60,0)
 FOR X=0:0 S X=$O(^XTMP("DGTMP",390.2,X)) Q:'X  I $P(^XTMP("DGTMP",390.2,X,0),"^",8)!'$P(^(0),"^",3) Q
"RTN","DG17202",61,0)
 Q X>0
"RTN","DG17202",62,0)
CHK1(FILE) ;IS CONVERSION FOR A FILE NECESSARY?
"RTN","DG17202",63,0)
 FOR X=0:0 S X=$O(^XTMP("DGTMP",390.2,X)) Q:'X  I $P(^XTMP("DGTMP",390.2,X,0),"^",2)=FILE I $P(^XTMP("DGTMP",390.2,X,0),"^",8)!'$P(^(0),"^",3) Q
"RTN","DG17202",64,0)
 Q X>0
"RTN","DG17202",65,0)
CHK2() ;ARE ALL THE NONSTANDARD ENTRIES MAPPED?
"RTN","DG17202",66,0)
 FOR X=0:0 S X=$O(^XTMP("DGTMP",390.2,X)) Q:'X  I '$P(^XTMP("DGTMP",390.2,X,0),"^",3),$P(^(0),"^",6)="",$P(^(0),"^",7)="" Q
"RTN","DG17202",67,0)
 Q '(X>0)
"RTN","DG17202",68,0)
CHK3() ;DID THE CONVERSION RUN TO COMPLETION?
"RTN","DG17202",69,0)
 I '$$CHK() Q 1
"RTN","DG17202",70,0)
 FOR X=0:0 S X=$O(^XTMP("DGTMP",390.1,X)) Q:'X  I '$P(^XTMP("DGTMP",390.1,X,0),"^",9) Q
"RTN","DG17202",71,0)
 Q '(X>0)
"RTN","DG17202",72,0)
JOB ;Start background job
"RTN","DG17202",73,0)
 NEW ZTIO,ZTDTH,ZTASK,ZTRTN,ZTDESC,DIR,DIRUT
"RTN","DG17202",74,0)
 I '$$CHK() W !!,"*** Conversion is not necessary! ***",!!,"Uninstalling patch..." D JOBKILL W "...done!" Q
"RTN","DG17202",75,0)
 I '$$CHK2() W !!,"*** Not all non-standard entries have been mapped...see DG172 options ***",! Q
"RTN","DG17202",76,0)
 L +^XTMP("DGTMP",390.1,"ASTOP"):1 E  W !,"*** Job appears to already be running! ***",! Q
"RTN","DG17202",77,0)
 W ! D MESS^DG17204("CONV") W !
"RTN","DG17202",78,0)
 S DIR("A")="Are you sure you want to start the conversion process"
"RTN","DG17202",79,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","DG17202",80,0)
 D ^DIR K DIR Q:$D(DIRUT)!'Y
"RTN","DG17202",81,0)
 L -^XTMP("DGTMP",390.1,"ASTOP")
"RTN","DG17202",82,0)
 S ^XTMP("DGTMP",390.1,"ASTOP")="NO"
"RTN","DG17202",83,0)
 S ZTIO="",ZTRTN="CONV^DG17202",ZTDESC="Marital/Religion File Conversion" D ^%ZTLOAD
"RTN","DG17202",84,0)
 I $D(ZTSK) W !,"*** Task #: "_ZTSK_" ***",!
"RTN","DG17202",85,0)
 S ZTREQ="@"
"RTN","DG17202",86,0)
 K ZTSK,Y
"RTN","DG17202",87,0)
 Q
"RTN","DG17202",88,0)
STOP ;Stop background job
"RTN","DG17202",89,0)
 NEW DIR,DIRUT
"RTN","DG17202",90,0)
 L +^XTMP("DGTMP",390.1,"ASTOP"):1 E  D  Q
"RTN","DG17202",91,0)
   .S DIR("A")="Are you sure you want to stop the background conversion process",DIR(0)="Y",DIR("B")="NO"
"RTN","DG17202",92,0)
   .D ^DIR K DIR Q:$D(DIRUT)!'Y
"RTN","DG17202",93,0)
   .S ^XTMP("DGTMP",390.1,"ASTOP")="YES"
"RTN","DG17202",94,0)
   .W !!,"*** Job will stop soon ***",! K Y
"RTN","DG17202",95,0)
   .Q
"RTN","DG17202",96,0)
 L -^XTMP("DGTMP",390.1,"ASTOP")
"RTN","DG17202",97,0)
 W !,"*** Conversion process is NOT running! ***",!
"RTN","DG17202",98,0)
 Q
"RTN","DG17202",99,0)
JOBKILL ;
"RTN","DG17202",100,0)
 NEW OPT,FILE,DA,DR,DIE,IDEL,NON,PI,ITEM
"RTN","DG17202",101,0)
 FOR NON=0:0 S NON=$O(^XTMP("DGTMP",390.2,NON)) Q:'NON  I '$P(^(NON,0),"^",3) D
"RTN","DG17202",102,0)
 .S DIE=$P(^(0),"^",2),DA=$S(DIE=11:$P(^(0),"^",5),1:$P(^(0),"^",4)),DR=".01///@",DIE="^DIC("_DIE_"," D ^DIE
"RTN","DG17202",103,0)
 .Q 
"RTN","DG17202",104,0)
 F FILE=390.1,390.2 S DIU="^XTMP(""DGTMP"","_FILE_",",DIU(0)="DT" D EN^DIU2
"RTN","DG17202",105,0)
 K DIU
"RTN","DG17202",106,0)
 S OPT="RGPR PRE-IMP MENU" S PI=$$FIND1^DIC(19,"","OX",OPT)
"RTN","DG17202",107,0)
 I PI D FIND^DIC(19,"",.01,"M","DG172 ") S ITEM="" F  S ITEM=$O(^TMP("DILIST",$J,1,ITEM)) Q:ITEM=""  S IDEL=$$DELETE^XPDMENU(OPT,$P(^TMP("DILIST",$J,1,ITEM),U))
"RTN","DG17202",108,0)
 S OPT="DG172" F  S OPT=$O(^DIC(19,"B",OPT)) Q:$E(OPT,1,5)'="DG172"  S DIE="^DIC(19,",DA=$O(^(OPT,0)),DR=".01///@",DIDEL=19 D ^DIE K DIDEL
"RTN","DG17202",109,0)
 Q
"RTN","DG17203")
0^3^B10191851
"RTN","DG17203",1,0)
DG17203 ;BHM/RGY,ALS-Setup conversion files ;FEB 20, 1998
"RTN","DG17203",2,0)
 ;;5.3;Registration;**172**;Aug 13, 1993
"RTN","DG17203",3,0)
 Q
"RTN","DG17203",4,0)
START ;
"RTN","DG17203",5,0)
 NEW DIK,FILE,TYPE,LOCAL,IEN,DA,DR,DIE,POINTER,TEXT,X1,X2
"RTN","DG17203",6,0)
 I '$O(^XTMP("DGTMP",390.1,0)) D  Q
"RTN","DG17203",7,0)
 .;set purge date of XTMP = 30 days
"RTN","DG17203",8,0)
 .S ^XTMP("DGTMP",0)=$$FMADD^XLFDT(DT,30)_U_DT_U_"RELIGION/MARITAL STATUS REINDEX"
"RTN","DG17203",9,0)
 .W !,"Reindex Religion and Marital Status file xrefs ..."
"RTN","DG17203",10,0)
 .K ^DIC(13,"B"),^DIC(11,"B"),^DIC(13,"C"),X
"RTN","DG17203",11,0)
 .S DIK="^DIC(13,",DIK(1)=".01^B" D ENALL^DIK
"RTN","DG17203",12,0)
 .S DIK="^DIC(13,",DIK(1)="3^C" D ENALL^DIK
"RTN","DG17203",13,0)
 .S DIK="^DIC(11,",DIK(1)=".01^B" D ENALL^DIK
"RTN","DG17203",14,0)
 .W !,"Setting up files that need to be converted..."
"RTN","DG17203",15,0)
 .D CF^DG17201
"RTN","DG17203",16,0)
 .;RENAME ENTRIES IN FILES HERE
"RTN","DG17203",17,0)
 .W !,"Setting up standard/non-standard mapping file..."
"RTN","DG17203",18,0)
 .F FILE=11,13 D
"RTN","DG17203",19,0)
 ..K LOCAL,POINTER,TEXT
"RTN","DG17203",20,0)
 ..F X=1:1 S TEXT=$P($S(FILE=11:$T(MARITAL+X),1:$T(RELIGION+X)),";;",2) Q:TEXT=""  S LOCAL($P(TEXT,"^"))=TEXT
"RTN","DG17203",21,0)
 ..F IEN=0:0 S IEN=$O(^DIC(FILE,IEN)) Q:'IEN  D
"RTN","DG17203",22,0)
 ...S ENT=$$ADD^DG17202(390.2)
"RTN","DG17203",23,0)
 ...S TYPE=FILE,POINTER=IEN,STANDARD=$S($D(LOCAL($P(^DIC(FILE,IEN,0),"^"))):1,1:0)
"RTN","DG17203",24,0)
 ...K LOCAL($P(^DIC(FILE,IEN,0),"^"))
"RTN","DG17203",25,0)
 ...S DIE="^XTMP(""DGTMP"",390.2,",DR="[DG172 NEW "_$S(FILE=11:"MARITAL",1:"RELIGION")_"]",DA=ENT D ^DIE
"RTN","DG17203",26,0)
 ...Q
"RTN","DG17203",27,0)
 ..;ADD MISSING STANDARD ENTRIES
"RTN","DG17203",28,0)
 ..S LOCAL="" F  S LOCAL=$O(LOCAL(LOCAL)) Q:LOCAL=""  D
"RTN","DG17203",29,0)
 ...NEW N0 S N0=LOCAL(LOCAL)
"RTN","DG17203",30,0)
 ...S NENT=$$ADDR^DG17202(FILE,$P(N0,"^"))
"RTN","DG17203",31,0)
 ...S DA=NENT,DIE="^DIC("_FILE_",",DR=""
"RTN","DG17203",32,0)
 ...I $P(N0,"^",2)]"" S DR="1////^S X="""_$P(N0,"^",2)_""""
"RTN","DG17203",33,0)
 ...I $P(N0,"^",3)]"" S DR=DR_";2////^S X="""_$P(N0,"^",3)_""""
"RTN","DG17203",34,0)
 ...I $P(N0,"^",4)]"" S DR=DR_";3////^S X="""_$P(N0,"^",4)_""""
"RTN","DG17203",35,0)
 ...I DR]"" S:$E(DR)=";" DR=$E(DR,2,999) D ^DIE
"RTN","DG17203",36,0)
 ...S ENT=$$ADD^DG17202(390.2),TYPE=FILE,POINTER=NENT,STANDARD=1,NEWSTAN=1
"RTN","DG17203",37,0)
 ...S DIE="^XTMP(""DGTMP"",390.2,",DR="[DG172 NEW "_$S(FILE=11:"MARITAL",1:"RELIGION")_"]",DA=ENT D ^DIE
"RTN","DG17203",38,0)
 ...K ENT,NENT,NEWSTAN,STANDARD
"RTN","DG17203",39,0)
 ...Q
"RTN","DG17203",40,0)
 ..Q
"RTN","DG17203",41,0)
 .Q
"RTN","DG17203",42,0)
 W !,"You can not re-start this process!"
"RTN","DG17203",43,0)
 Q
"RTN","DG17203",44,0)
RELIGION ;
"RTN","DG17203",45,0)
 ;;JEWISH^^4^1
"RTN","DG17203",46,0)
 ;;EASTERN ORTHODOX^^^2
"RTN","DG17203",47,0)
 ;;BAPTIST^^^3
"RTN","DG17203",48,0)
 ;;METHODIST^^^4
"RTN","DG17203",49,0)
 ;;LUTHERAN^^2^5
"RTN","DG17203",50,0)
 ;;PRESBYTERIAN^^^6
"RTN","DG17203",51,0)
 ;;UNITED CHURCH OF CHRIST^^^7
"RTN","DG17203",52,0)
 ;;EPISCOPALIAN^^^8
"RTN","DG17203",53,0)
 ;;ADVENTIST^^^9
"RTN","DG17203",54,0)
 ;;ASSEMBLY OF GOD^^^10
"RTN","DG17203",55,0)
 ;;BRETHREN^^^11
"RTN","DG17203",56,0)
 ;;CHRISTIAN SCIENTIST^^^12
"RTN","DG17203",57,0)
 ;;CHURCH OF CHRIST^^^13
"RTN","DG17203",58,0)
 ;;CHURCH OF GOD^^5^14
"RTN","DG17203",59,0)
 ;;DISCIPLES OF CHRIST^^^15
"RTN","DG17203",60,0)
 ;;EVANGELICAL COVENANT^^^16
"RTN","DG17203",61,0)
 ;;FRIENDS^^^17
"RTN","DG17203",62,0)
 ;;JEHOVAH'S WITNESS^^^18
"RTN","DG17203",63,0)
 ;;LATTER-DAY SAINTS^LDS^^19
"RTN","DG17203",64,0)
 ;;ISLAM^^^20
"RTN","DG17203",65,0)
 ;;NAZARENE^^^21
"RTN","DG17203",66,0)
 ;;OTHER^^^22
"RTN","DG17203",67,0)
 ;;PENTECOSTAL^^^23
"RTN","DG17203",68,0)
 ;;PROTESTANT, OTHER^^^24
"RTN","DG17203",69,0)
 ;;PROTESTANT, NO DENOMINATION^^^25
"RTN","DG17203",70,0)
 ;;REFORMED^^^26
"RTN","DG17203",71,0)
 ;;SALVATION ARMY^^^27
"RTN","DG17203",72,0)
 ;;UNITARIAN; UNIVERSALIST^^^28
"RTN","DG17203",73,0)
 ;;UNKNOWN/NO PREFERENCE^^^29
"RTN","DG17203",74,0)
 ;;CATHOLIC^^^0
"RTN","DG17203",75,0)
 ;;NATIVE AMERICAN^^^30
"RTN","DG17203",76,0)
 ;;BUDDHIST^^^31
"RTN","DG17203",77,0)
 ;;
"RTN","DG17203",78,0)
MARITAL ;
"RTN","DG17203",79,0)
 ;;DIVORCED^^D
"RTN","DG17203",80,0)
 ;;MARRIED^^M
"RTN","DG17203",81,0)
 ;;WIDOW/WIDOWER^^W
"RTN","DG17203",82,0)
 ;;SEPARATED^^S
"RTN","DG17203",83,0)
 ;;NEVER MARRIED^^N
"RTN","DG17203",84,0)
 ;;UNKNOWN^UNK^U
"RTN","DG17203",85,0)
 ;;
"RTN","DG17204")
0^4^B26811859
"RTN","DG17204",1,0)
DG17204 ;BHM/RGY,ALS-Edit mapping entries ;FEB 20, 1998
"RTN","DG17204",2,0)
 ;;5.3;Registration;**172**;Aug 13, 1993
"RTN","DG17204",3,0)
EDIT(TYPE) ;
"RTN","DG17204",4,0)
 NEW DA,DIE,DR,L,TO,FR,DIC,FLDS,BY
"RTN","DG17204",5,0)
 F X=0:0 S X=$O(^XTMP("DGTMP",390.2,X)) Q:'X  I $P(^(X,0),"^",2)=TYPE,'$P(^(0),"^",3) Q
"RTN","DG17204",6,0)
 I 'X W !!,"*** No mapping necessary! ***",! K X Q
"RTN","DG17204",7,0)
 W !! D MESS($S(TYPE=11:"MARITAL",1:"RELIGION")) W !
"RTN","DG17204",8,0)
 S L=0,DIC="^XTMP(""DGTMP"",390.2,",(TO,FR)="",(BY,FLDS)="[DG172 "_$S(TYPE=11:"MARITAL",1:"RELIGION")_" MAPPING]"
"RTN","DG17204",9,0)
 D EN1^DIP
"RTN","DG17204",10,0)
START ;
"RTN","DG17204",11,0)
 S DIC("A")="Select Non-Standard "_$S(TYPE=11:"Marital Status: ",1:"Religion: "),DIC="^XTMP(""DGTMP"",390.2,",DIC(0)="QEAM",DIC("S")="I '$P(^(0),U,3),$P(^(0),U,2)="_TYPE D ^DIC Q:Y<0  S DA=+Y
"RTN","DG17204",12,0)
 S DIE="^XTMP(""DGTMP"",390.2,",DR=$S(TYPE=11:.07,1:.06)
"RTN","DG17204",13,0)
 D ^DIE
"RTN","DG17204",14,0)
 K Y
"RTN","DG17204",15,0)
 W ! G START
"RTN","DG17204",16,0)
BROAD ;
"RTN","DG17204",17,0)
 NEW D0,DG172,TASK,XMY,XMDUZ,XMTEXT,XMSUB,N0,COUNT,TYPE
"RTN","DG17204",18,0)
 S XMDUZ="Religion/Marital Status Conversion",XMSUB="Conversion Finished"
"RTN","DG17204",19,0)
 S XMY(DUZ)="",XMTEXT="DG172(1,"
"RTN","DG17204",20,0)
 F TASK=0:0 S TASK=$O(^XTMP("DGTMP",390.1,TASK)) Q:'TASK  D
"RTN","DG17204",21,0)
   .I $P(^XTMP("DGTMP",390.1,TASK,0),"^",9)="" S XMSUB="Conversion *NOT* Finished"
"RTN","DG17204",22,0)
   .Q
"RTN","DG17204",23,0)
 I XMSUB["NOT" D  Q
"RTN","DG17204",24,0)
   .S DG172(1,1)="The conversion process appears to have been stopped."
"RTN","DG17204",25,0)
   .S DG172(1,2)="To finish the conversion process, restart by using"
"RTN","DG17204",26,0)
   .S DG172(1,3)="the 'Begin Religion/Marital Status Conversion' option"
"RTN","DG17204",27,0)
   .S DG172(1,4)="on the CIRN Pre-Implementation Menu."
"RTN","DG17204",28,0)
   .D ^XMD
"RTN","DG17204",29,0)
   .Q
"RTN","DG17204",30,0)
 S COUNT=1
"RTN","DG17204",31,0)
 F TYPE=11,13 D
"RTN","DG17204",32,0)
   .S DG172(1,COUNT)=$S(TYPE=11:"Marital Status",1:"Religion")_" File Non-Standard Entries:",COUNT=COUNT+1
"RTN","DG17204",33,0)
   .S DG172(1,COUNT)="=========================================",COUNT=COUNT+1
"RTN","DG17204",34,0)
   .F D0=0:0 S D0=$O(^XTMP("DGTMP",390.2,D0)) Q:'D0  D
"RTN","DG17204",35,0)
     ..S N0=$G(^XTMP("DGTMP",390.2,D0,0))
"RTN","DG17204",36,0)
     ..I $P(N0,"^",2)'=TYPE Q
"RTN","DG17204",37,0)
     ..I '$P(N0,"^",3) S DG172(1,COUNT)=$$DESC(N0)_" (# Converted: "_(+$P(N0,"^",9))_")"
"RTN","DG17204",38,0)
     ..S COUNT=COUNT+1
"RTN","DG17204",39,0)
     ..Q
"RTN","DG17204",40,0)
   .S DG172(1,COUNT)=" ",COUNT=COUNT+1
"RTN","DG17204",41,0)
   .Q
"RTN","DG17204",42,0)
 S DG172(1,COUNT)=" ",COUNT=COUNT+1
"RTN","DG17204",43,0)
 S DG172(1,COUNT)="All non-standard entries listed above have been removed",COUNT=COUNT+1
"RTN","DG17204",44,0)
 S DG172(1,COUNT)="from their respective files.",COUNT=COUNT+1
"RTN","DG17204",45,0)
 D ^XMD
"RTN","DG17204",46,0)
 Q
"RTN","DG17204",47,0)
DESC(N0) ;
"RTN","DG17204",48,0)
 NEW TYPE
"RTN","DG17204",49,0)
 S TYPE=$P(N0,"^",2)
"RTN","DG17204",50,0)
 I TYPE=13 Q "Entry: "_$P($G(^DIC(13,+$P(N0,"^",4),0)),"^")_" repointed to: "_$P($G(^DIC(13,+$P(N0,"^",6),0)),"^")
"RTN","DG17204",51,0)
 I TYPE=11 Q "Entry: "_$P($G(^DIC(11,+$P(N0,"^",5),0)),"^")_" repointed to: "_$P($G(^DIC(11,+$P(N0,"^",7),0)),"^")
"RTN","DG17204",52,0)
 Q ""
"RTN","DG17204",53,0)
MESS(M) ;Show message
"RTN","DG17204",54,0)
 NEW C
"RTN","DG17204",55,0)
 F C=1:1 Q:$P($T(@M+C),";;",2)=""  W !,$P($T(@M+C),";;",2)
"RTN","DG17204",56,0)
 Q
"RTN","DG17204",57,0)
MARITAL ;
"RTN","DG17204",58,0)
 ;;This option will identify non-standard MARITAL STATUS file (#11) entries
"RTN","DG17204",59,0)
 ;;and then allows the user to designate, for each non-standard entry,
"RTN","DG17204",60,0)
 ;;a standard entry which this utility will re-point with associated patients.
"RTN","DG17204",61,0)
 ;;For example, you will be able to map all patients with a marital status
"RTN","DG17204",62,0)
 ;;of SINGLE to NEVER MARRIED.
"RTN","DG17204",63,0)
 ;; 
"RTN","DG17204",64,0)
 ;;This mapping will be used during the re-pointing and file clean-up  
"RTN","DG17204",65,0)
 ;;process, the Begin Religion/Marital Status Conversion [DG172 PRE-IMP
"RTN","DG17204",66,0)
 ;;START CONVERSION] option.
"RTN","DG17204",67,0)
 ;; 
"RTN","DG17204",68,0)
 ;;The option (1) provides a list of non-standard MARITAL STATUS
"RTN","DG17204",69,0)
 ;;file entries to the screen or a printer, (2) prompts the user for
"RTN","DG17204",70,0)
 ;;a non-standard entry, and (3) then prompts for the standard
"RTN","DG17204",71,0)
 ;;entry which the utility will re-point with associated patients.
"RTN","DG17204",72,0)
 ;;
"RTN","DG17204",73,0)
RELIGION ;
"RTN","DG17204",74,0)
 ;;This option will identify non-standard RELIGION file (#13) entries and
"RTN","DG17204",75,0)
 ;;then allows the user to designate, for each non-standard entry, a
"RTN","DG17204",76,0)
 ;;standard entry which this utility will re-point associated patients.
"RTN","DG17204",77,0)
 ;;For example, you will be able to map all patients with a religion of
"RTN","DG17204",78,0)
 ;;XXXXXX to UNKNOWN/NO PREFERENCE.
"RTN","DG17204",79,0)
 ;; 
"RTN","DG17204",80,0)
 ;;This linking will be used during the mapping and file clean-up  
"RTN","DG17204",81,0)
 ;;process, Begin Religion/Marital Status Conversion [DG172 PRE-IMP
"RTN","DG17204",82,0)
 ;;START CONVERSION] option.
"RTN","DG17204",83,0)
 ;; 
"RTN","DG17204",84,0)
 ;;The option (1) provides a list of non-standard RELIGION file
"RTN","DG17204",85,0)
 ;;entries to the screen or a printer, (2) prompts the user for
"RTN","DG17204",86,0)
 ;;a non-standard entry, and (3) then prompts for the standard
"RTN","DG17204",87,0)
 ;;entry which the utility will re-point with associated patients.
"RTN","DG17204",88,0)
 ;;
"RTN","DG17204",89,0)
CONV ;
"RTN","DG17204",90,0)
 ;;After the linking of non-standard entries is complete, this conversion
"RTN","DG17204",91,0)
 ;;process is run in order to actually re-point patient records from
"RTN","DG17204",92,0)
 ;;non-standard entries to the specified standard entries.
"RTN","DG17204",93,0)
 ;;
"VER")
8.0^21.0
"^DD",2,2,991.06,0)
CMOR ACTIVITY SCORE^NJ7,0a^^MPI;6^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",2,2,991.06,1,0)
^.1
"^DD",2,2,991.06,1,1,0)
2^ACMORS^MUMPS
"^DD",2,2,991.06,1,1,1)
S ^DPT("ACMORS",(9999999-X),DA)=""
"^DD",2,2,991.06,1,1,2)
K ^DPT("ACMORS",(9999999-X),DA)
"^DD",2,2,991.06,1,1,"%D",0)
^^2^2^2970730^^
"^DD",2,2,991.06,1,1,"%D",1,0)
This inverse cross-reference allows patients with the highest CMOR
"^DD",2,2,991.06,1,1,"%D",2,0)
activity score to receive priority processing. The CMOR activity
"^DD",2,2,991.06,1,1,"%D",3,0)
score collating sequence is reversed to process from highest to
"^DD",2,2,991.06,1,1,"%D",4,0)
lowest scores.
"^DD",2,2,991.06,1,1,"%D",5,0)
This cross-reference reads:
"^DD",2,2,991.06,1,1,"%D",6,0)
^DPT('ACMORS',INVERSE CMOR ACTIVITY SCORE,DA)=''
"^DD",2,2,991.06,1,1,"DT")
2970730
"^DD",2,2,991.06,3)
Type a Number between 0 and 9999999, 0 Decimal Digits
"^DD",2,2,991.06,21,0)
^^1^1^2980914^^
"^DD",2,2,991.06,21,1,0)
This score is used to determine the CIRN Master of Record.
"^DD",2,2,991.06,"AUDIT")
y
"^DD",2,2,991.06,"DT")
2970730
"^DD",2,2,991.07,0)
SCORE CALCULATION DATE^Da^^MPI;7^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",2,2,991.07,21,0)
^^2^2^2970730^
"^DD",2,2,991.07,21,1,0)
This is the last date that the CMOR ACTIVITY SCORE was calculated
"^DD",2,2,991.07,21,2,0)
at this site.
"^DD",2,2,991.07,"AUDIT")
y
"^DD",2,2,991.07,"DT")
2970730
"^DD",390.1,390.1,0)
FIELD^^.09^9
"^DD",390.1,390.1,0,"DDA")
N
"^DD",390.1,390.1,0,"DT")
2980915
"^DD",390.1,390.1,0,"ID",.04)
W "   ",$P(^(0),U,4)
"^DD",390.1,390.1,0,"ID",.07)
W "   ",@("$P($P($C(59)_$S($D(^DD(390.1,.07,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,7)_"":"",2),$C(59),1)")
"^DD",390.1,390.1,0,"IX","B",390.1,.01)

"^DD",390.1,390.1,0,"NM","MARITAL/RELIGION CONVERSION")

"^DD",390.1,390.1,0,"VRPK")
DG
"^DD",390.1,390.1,.01,0)
TASK NUMBER^RNJ4,0^^0;1^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",390.1,390.1,.01,1,0)
^.1
"^DD",390.1,390.1,.01,1,1,0)
390.1^B
"^DD",390.1,390.1,.01,1,1,1)
S ^XTMP("DGTMP",390.1,"B",$E(X,1,30),DA)=""
"^DD",390.1,390.1,.01,1,1,2)
K ^XTMP("DGTMP",390.1,"B",$E(X,1,30),DA)
"^DD",390.1,390.1,.01,3)
Enter a Number between 1 and 9999, 0 Decimal Digits
"^DD",390.1,390.1,.01,21,0)
^^1^1^2980923^^^^
"^DD",390.1,390.1,.01,21,1,0)
This field holds the task number of the conversion job.
"^DD",390.1,390.1,.01,"DT")
2980225
"^DD",390.1,390.1,.02,0)
FILE^RP1'^DIC(^0;2^Q
"^DD",390.1,390.1,.02,21,0)
^^2^2^2980923^
"^DD",390.1,390.1,.02,21,1,0)
This field holds the number of the file being converted 
"^DD",390.1,390.1,.02,21,2,0)
(e.g., "11" for MARITAL STATUS file, "13" for RELIGION file).
"^DD",390.1,390.1,.02,"DT")
2980225
"^DD",390.1,390.1,.03,0)
FIELD^RNJ15,4^^0;3^K:+X'=X!(X>9999999999)!(X<0)!(X?.E1"."5N.N) X
"^DD",390.1,390.1,.03,3)
Enter a Number between 0 and 9999999999, 4 Decimal Digits
"^DD",390.1,390.1,.03,21,0)
^^2^2^2980923^^^
"^DD",390.1,390.1,.03,21,1,0)
This field holds the number of the field being converted 
"^DD",390.1,390.1,.03,21,2,0)
from the MARITAL STATUS file or RELIGION file.
"^DD",390.1,390.1,.03,"DT")
2980225
"^DD",390.1,390.1,.04,0)
GLOBAL ROOT^RF^^0;4^K:$L(X)>30!($L(X)<1) X
"^DD",390.1,390.1,.04,3)
Enter Global Root  1-30 characters in length.
"^DD",390.1,390.1,.04,21,0)
^^1^1^2980923^^^
"^DD",390.1,390.1,.04,21,1,0)
This field holds the global root of the file being converted.
"^DD",390.1,390.1,.04,"DT")
2980225
"^DD",390.1,390.1,.05,0)
NODE^RF^^0;5^K:$L(X)>30!($L(X)<1) X
"^DD",390.1,390.1,.05,3)
Enter a Node 1-30 characters in length.
"^DD",390.1,390.1,.05,21,0)
^^1^1^2980923^^^
"^DD",390.1,390.1,.05,21,1,0)
This field holds the node of the data being converted.
"^DD",390.1,390.1,.05,"DT")
2980225
"^DD",390.1,390.1,.06,0)
PIECE^RNJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",390.1,390.1,.06,3)
Enter a Number between 0 and 999, 0 Decimal Digits
"^DD",390.1,390.1,.06,21,0)
^^1^1^2980923^^^
"^DD",390.1,390.1,.06,21,1,0)
This field holds the piece position of the data being converted.
"^DD",390.1,390.1,.06,"DT")
2980225
"^DD",390.1,390.1,.07,0)
TYPE^RS^11:MARITAL;13:RELIGION;^0;7^Q
"^DD",390.1,390.1,.07,3)
Enter the file type number, '11' for MARITAL, '13' for RELIGION.
"^DD",390.1,390.1,.07,21,0)
^^1^1^2980911^^
"^DD",390.1,390.1,.07,21,1,0)
This field holds a type, '11' for MARITAL or '13' for RELIGION.
"^DD",390.1,390.1,.07,"DT")
2980324
"^DD",390.1,390.1,.08,0)
LAST ENTRY PROCESSED^NJ9,0^^0;8^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",390.1,390.1,.08,3)
Enter a Number between 0 and 999999999, 0 Decimal Digits
"^DD",390.1,390.1,.08,21,0)
^^2^2^2980911^^
"^DD",390.1,390.1,.08,21,1,0)
This field holds the number of the last entry processed, between 0 and 999999999,
"^DD",390.1,390.1,.08,21,2,0)
0 decimal digits.
"^DD",390.1,390.1,.08,"DT")
2980225
"^DD",390.1,390.1,.09,0)
DATE/TIME FINISHED^D^^0;9^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",390.1,390.1,.09,3)
Enter date and time finished.
"^DD",390.1,390.1,.09,21,0)
^^2^2^2980915^^^
"^DD",390.1,390.1,.09,21,1,0)
This field holds the Date/Time finished, an exact date is required (month 
"^DD",390.1,390.1,.09,21,2,0)
and day) as well as time.
"^DD",390.1,390.1,.09,"DT")
2980915
"^DD",390.2,390.2,0)
FIELD^^101^11
"^DD",390.2,390.2,0,"DT")
2980324
"^DD",390.2,390.2,0,"ID","WR1")
NEW N0,X S N0=$G(^XTMP("DGTMP",390.2,Y,0)) S X=$S($P(N0,"^",4)]"":$P($G(^DIC(13,+$P(N0,"^",4),0)),"^"),1:$P($G(^DIC(11,+$P(N0,"^",5),0)),"^")) W X
"^DD",390.2,390.2,0,"IX","AC",390.2,.04)

"^DD",390.2,390.2,0,"IX","AD",390.2,.05)

"^DD",390.2,390.2,0,"IX","B",390.2,.01)

"^DD",390.2,390.2,0,"IX","C",390.2,.05)

"^DD",390.2,390.2,0,"IX","D",390.2,.04)

"^DD",390.2,390.2,0,"NM","MARITAL/RELIGION MAPPING")

"^DD",390.2,390.2,0,"VRPK")
DG
"^DD",390.2,390.2,.01,0)
NUMBER^RNJ4,0^^0;1^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",390.2,390.2,.01,1,0)
^.1
"^DD",390.2,390.2,.01,1,1,0)
390.2^B
"^DD",390.2,390.2,.01,1,1,1)
S ^XTMP("DGTMP",390.2,"B",$E(X,1,30),DA)=""
"^DD",390.2,390.2,.01,1,1,2)
K ^XTMP("DGTMP",390.2,"B",$E(X,1,30),DA)
"^DD",390.2,390.2,.01,3)
Enter a Number between 1 and 9999, 0 Decimal Digits
"^DD",390.2,390.2,.01,21,0)
^^2^2^2980911^^
"^DD",390.2,390.2,.01,21,1,0)
This field holds the MARITAL/RELIGION field number.
"^DD",390.2,390.2,.01,21,2,0)
It is a number between 1 and 999 with 0 decimal places.
"^DD",390.2,390.2,.01,"DT")
2980225
"^DD",390.2,390.2,.02,0)
TYPE^RS^11:MARITAL STATUS;13:RELIGION;^0;2^Q
"^DD",390.2,390.2,.02,3)
Enter '11' for MARITAL, '13' for RELIGION
"^DD",390.2,390.2,.02,21,0)
^^1^1^2980911^^
"^DD",390.2,390.2,.02,21,1,0)
This field holds the file type, '11' for MARITAL, '13' for RELIGION.
"^DD",390.2,390.2,.02,"DT")
2980324
"^DD",390.2,390.2,.03,0)
STANDARD?^RS^0:NO;1:YES;^0;3^Q
"^DD",390.2,390.2,.03,3)
Enter '0' for No, '1' for Yes
"^DD",390.2,390.2,.03,21,0)
^^2^2^2980911^^
"^DD",390.2,390.2,.03,21,1,0)
Indicate, in this field, whether or not the entry is standard.
"^DD",390.2,390.2,.03,21,2,0)
 '0' for No, '1' for Yes.
"^DD",390.2,390.2,.03,"DT")
2980225
"^DD",390.2,390.2,.04,0)
RELIGION^P13'^DIC(13,^0;4^Q
"^DD",390.2,390.2,.04,1,0)
^.1
"^DD",390.2,390.2,.04,1,1,0)
390.2^AC
"^DD",390.2,390.2,.04,1,1,1)
S ^XTMP("DGTMP",390.2,"AC",$E(X,1,30),DA)=""
"^DD",390.2,390.2,.04,1,1,2)
K ^XTMP("DGTMP",390.2,"AC",$E(X,1,30),DA)
"^DD",390.2,390.2,.04,1,1,"DT")
2980226
"^DD",390.2,390.2,.04,1,2,0)
390.2^D
"^DD",390.2,390.2,.04,1,2,1)
S ^XTMP("DGTMP",390.2,"D",$E(X,1,30),DA)=""
"^DD",390.2,390.2,.04,1,2,2)
K ^XTMP("DGTMP",390.2,"D",$E(X,1,30),DA)
"^DD",390.2,390.2,.04,1,2,"DT")
2980302
"^DD",390.2,390.2,.04,3)
Enter non-standard RELIGION entry.
"^DD",390.2,390.2,.04,21,0)
^^1^1^2980911^^
"^DD",390.2,390.2,.04,21,1,0)
This field holds the non-standard RELIGION entry to be mapped to a standard entry.
"^DD",390.2,390.2,.04,"DT")
2980415
"^DD",390.2,390.2,.05,0)
MARITAL STATUS^P11'^DIC(11,^0;5^Q
"^DD",390.2,390.2,.05,1,0)
^.1
"^DD",390.2,390.2,.05,1,1,0)
390.2^AD
"^DD",390.2,390.2,.05,1,1,1)
S ^XTMP("DGTMP",390.2,"AD",$E(X,1,30),DA)=""
"^DD",390.2,390.2,.05,1,1,2)
K ^XTMP("DGTMP",390.2,"AD",$E(X,1,30),DA)
"^DD",390.2,390.2,.05,1,1,"DT")
2980226
"^DD",390.2,390.2,.05,1,2,0)
390.2^C
"^DD",390.2,390.2,.05,1,2,1)
S ^XTMP("DGTMP",390.2,"C",$E(X,1,30),DA)=""
"^DD",390.2,390.2,.05,1,2,2)
K ^XTMP("DGTMP",390.2,"C",$E(X,1,30),DA)
"^DD",390.2,390.2,.05,1,2,"DT")
2980302
"^DD",390.2,390.2,.05,3)
Enter non-standard MARITAL STATUS entry.
"^DD",390.2,390.2,.05,21,0)
^^1^1^2980911^^
"^DD",390.2,390.2,.05,21,1,0)
This field holds the non-standard MARITAL STATUS entry to be mapped to a standard entry.
"^DD",390.2,390.2,.05,"DT")
2980302
"^DD",390.2,390.2,.06,0)
STANDARD RELIGION^*P13'^DIC(13,^0;6^S DIC("S")="I $P($G(^XTMP(""DGTMP"",390.2,+$O(^XTMP(""DGTMP"",390.2,""AC"",Y,0)),0)),U,3)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",390.2,390.2,.06,3)
Enter Standard RELIGION entry.
"^DD",390.2,390.2,.06,12)
Select only standard entries
"^DD",390.2,390.2,.06,12.1)
S DIC("S")="I $P($G(^XTMP(""DGTMP"",390.2,+$O(^XTMP(""DGTMP"",390.2,""AC"",Y,0)),0)),U,3)"
"^DD",390.2,390.2,.06,21,0)
^^1^1^2980911^^
"^DD",390.2,390.2,.06,21,1,0)
This field holds the Standard RELIGION entry to map to.
"^DD",390.2,390.2,.06,"DT")
2980414
"^DD",390.2,390.2,.07,0)
STANDARD MARITAL STATUS^*P11'^DIC(11,^0;7^S DIC("S")="I $P($G(^XTMP(""DGTMP"",390.2,+$O(^XTMP(""DGTMP"",390.2,""AD"",Y,0)),0)),U,3)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",390.2,390.2,.07,3)
Enter standard MARITAL STATUS entry.
"^DD",390.2,390.2,.07,12)
Select only standard Marital Status
"^DD",390.2,390.2,.07,12.1)
S DIC("S")="I $P($G(^XTMP(""DGTMP"",390.2,+$O(^XTMP(""DGTMP"",390.2,""AD"",Y,0)),0)),U,3)"
"^DD",390.2,390.2,.07,21,0)
^^1^1^2980923^^^
"^DD",390.2,390.2,.07,21,1,0)
This field holds the standard MARITAL STATUS entry to map to.
"^DD",390.2,390.2,.07,"DT")
2980226
"^DD",390.2,390.2,.08,0)
NEW STANDARD ENTRY?^S^0:NO;1:YES;^0;8^Q
"^DD",390.2,390.2,.08,3)
Enter '0' for No, '1' for Yes.
"^DD",390.2,390.2,.08,21,0)
^^2^2^2980911^^^
"^DD",390.2,390.2,.08,21,1,0)
Indicate in this field,  whether or not the entry is a standard entry.
"^DD",390.2,390.2,.08,21,2,0)
'0' for No, '1' for Yes.
"^DD",390.2,390.2,.08,"DT")
2980226
"^DD",390.2,390.2,.09,0)
COUNT^NJ7,0^^0;9^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",390.2,390.2,.09,3)
Enter a Number between 0 and 9999999, 0 Decimal Digits
"^DD",390.2,390.2,.09,21,0)
^^1^1^2980911^^
"^DD",390.2,390.2,.09,21,1,0)
This field holds a count number between 0 and 9999999, with 0 decimal digits.
"^DD",390.2,390.2,.09,"DT")
2980302
"^DD",390.2,390.2,100,0)
ENTRY^CJ15^^ ; ^NEW N0 S N0=$G(^XTMP("DGTMP",390.2,D0,0)) S X=$S($P(N0,"^",4)]"":$P($G(^DIC(13,+$P(N0,"^",4),0)),"^"),1:$P($G(^DIC(11,+$P(N0,"^",5),0)),"^"))
"^DD",390.2,390.2,100,9)
^
"^DD",390.2,390.2,100,9.01)

"^DD",390.2,390.2,100,9.1)
NEW N0 S N0=$G(^XTMP("DGTMP",390.2,D0,0)) S X=$S($P(N0,"^",4)]"":$P($G(^DIC(13,+$P(N0,"^",4),0)),"^"),1:$P($G(^DIC(11,+$P(N0,"^",5),0)),"^"))
"^DD",390.2,390.2,100,21,0)
^^1^1^2980910^^
"^DD",390.2,390.2,100,21,1,0)
Computed field, entry to convert.
"^DD",390.2,390.2,100,"DT")
2980226
"^DD",390.2,390.2,101,0)
CONVERT^CJ15^^ ; ^NEW N0 S N0=$G(^XTMP("DGTMP",390.2,D0,0)) S X=$S($P(N0,"^",6)]"":$P($G(^DIC(13,+$P(N0,"^",6),0)),"^"),1:$P($G(^DIC(11,+$P(N0,"^",7),0)),"^"))
"^DD",390.2,390.2,101,9)
^
"^DD",390.2,390.2,101,9.01)

"^DD",390.2,390.2,101,9.1)
NEW N0 S N0=$G(^XTMP("DGTMP",390.2,D0,0)) S X=$S($P(N0,"^",6)]"":$P($G(^DIC(13,+$P(N0,"^",6),0)),"^"),1:$P($G(^DIC(11,+$P(N0,"^",7),0)),"^"))
"^DD",390.2,390.2,101,21,0)
^^1^1^2980910^
"^DD",390.2,390.2,101,21,1,0)
Computed field to convert entry.
"^DIC",390.1,390.1,0)
MARITAL/RELIGION CONVERSION^390.1I
"^DIC",390.1,390.1,0,"GL")
^XTMP("DGTMP",390.1,
"^DIC",390.1,390.1,"%D",0)
^^5^5^2980922^^
"^DIC",390.1,390.1,"%D",1,0)
MARITAL/RELIGION CONVERSION file (#390.1) is a temporary file that
"^DIC",390.1,390.1,"%D",2,0)
stores the last entry processed for each file/field that needs to 
"^DIC",390.1,390.1,"%D",3,0)
be converted.  As each file is converted, it is flagged as finished.
"^DIC",390.1,390.1,"%D",4,0)
After the conversion is finished, this file is deleted along with 
"^DIC",390.1,390.1,"%D",5,0)
the non-standard entries from the MARITAL STATUS and RELIGION files.
"^DIC",390.1,"B","MARITAL/RELIGION CONVERSION",390.1)

"^DIC",390.2,390.2,0)
MARITAL/RELIGION MAPPING^390.2I
"^DIC",390.2,390.2,0,"GL")
^XTMP("DGTMP",390.2,
"^DIC",390.2,390.2,"%D",0)
^^4^4^2980911^
"^DIC",390.2,390.2,"%D",1,0)
File #390.2 is a temporary file used in the conversion of MARITAL STATUS
"^DIC",390.2,390.2,"%D",2,0)
and RELIGION entries.  The file stores the number of times a non-standard
"^DIC",390.2,390.2,"%D",3,0)
entry was found and converted across all files/fields.  After the conversion
"^DIC",390.2,390.2,"%D",4,0)
is finished, the file is deleted.
"^DIC",390.2,"B","MARITAL/RELIGION MAPPING",390.2)

**END**
**END**

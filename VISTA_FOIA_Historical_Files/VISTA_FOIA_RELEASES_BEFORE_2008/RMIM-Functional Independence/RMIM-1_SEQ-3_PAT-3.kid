Released RMIM*1*3 SEQ #3
Extracted from mail message
**KIDS**:RMIM*1.0*3^

**INSTALL NAME**
RMIM*1.0*3
"BLD",5303,0)
RMIM*1.0*3^FUNCTIONAL INDEPENDENCE^0^3040504^y
"BLD",5303,1,0)
^^4^4^3031218^
"BLD",5303,1,1,0)
Fixes for first time users unable to access GUI, imprecise DOB error, 
"BLD",5303,1,2,0)
and file access issue with RMIM EDIT SITE PARAMETER option.  
"BLD",5303,1,3,0)
Addition of'0-Unspecified' to Admission Class list and change from Rehab  
"BLD",5303,1,4,0)
Bed Unit Admission Date/Discharge Date to Therapy Start Date/End Date.
"BLD",5303,4,0)
^9.64PA^783^1
"BLD",5303,4,783,0)
783
"BLD",5303,4,783,2,0)
^9.641^783^1
"BLD",5303,4,783,2,783,0)
FUNCTIONAL INDEPENDENCE MEASUREMENT RECORD  (File-top level)
"BLD",5303,4,783,2,783,1,0)
^9.6411^.05^1
"BLD",5303,4,783,2,783,1,.05,0)
PT DOB
"BLD",5303,4,783,222)
y^n^p^^^^n^^n
"BLD",5303,4,783,224)

"BLD",5303,4,"APDD",783,783)

"BLD",5303,4,"APDD",783,783,.05)

"BLD",5303,4,"B",783,783)

"BLD",5303,"INIT")
POST^RMIM3PST
"BLD",5303,"KRN",0)
^9.67PA^8989.52^19
"BLD",5303,"KRN",.4,0)
.4
"BLD",5303,"KRN",.401,0)
.401
"BLD",5303,"KRN",.402,0)
.402
"BLD",5303,"KRN",.403,0)
.403
"BLD",5303,"KRN",.5,0)
.5
"BLD",5303,"KRN",.84,0)
.84
"BLD",5303,"KRN",3.6,0)
3.6
"BLD",5303,"KRN",3.8,0)
3.8
"BLD",5303,"KRN",9.2,0)
9.2
"BLD",5303,"KRN",9.8,0)
9.8
"BLD",5303,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5303,"KRN",9.8,"NM",1,0)
RMIMRP^^0^B28005730
"BLD",5303,"KRN",9.8,"NM","B","RMIMRP",1)

"BLD",5303,"KRN",19,0)
19
"BLD",5303,"KRN",19,"NM",0)
^9.68A^^0
"BLD",5303,"KRN",19.1,0)
19.1
"BLD",5303,"KRN",101,0)
101
"BLD",5303,"KRN",409.61,0)
409.61
"BLD",5303,"KRN",771,0)
771
"BLD",5303,"KRN",870,0)
870
"BLD",5303,"KRN",8989.51,0)
8989.51
"BLD",5303,"KRN",8989.52,0)
8989.52
"BLD",5303,"KRN",8994,0)
8994
"BLD",5303,"KRN","B",.4,.4)

"BLD",5303,"KRN","B",.401,.401)

"BLD",5303,"KRN","B",.402,.402)

"BLD",5303,"KRN","B",.403,.403)

"BLD",5303,"KRN","B",.5,.5)

"BLD",5303,"KRN","B",.84,.84)

"BLD",5303,"KRN","B",3.6,3.6)

"BLD",5303,"KRN","B",3.8,3.8)

"BLD",5303,"KRN","B",9.2,9.2)

"BLD",5303,"KRN","B",9.8,9.8)

"BLD",5303,"KRN","B",19,19)

"BLD",5303,"KRN","B",19.1,19.1)

"BLD",5303,"KRN","B",101,101)

"BLD",5303,"KRN","B",409.61,409.61)

"BLD",5303,"KRN","B",771,771)

"BLD",5303,"KRN","B",870,870)

"BLD",5303,"KRN","B",8989.51,8989.51)

"BLD",5303,"KRN","B",8989.52,8989.52)

"BLD",5303,"KRN","B",8994,8994)

"BLD",5303,"PRE")
RMIM3PST
"BLD",5303,"QUES",0)
^9.62^^
"FIA",783)
FUNCTIONAL INDEPENDENCE MEASUREMENT RECORD
"FIA",783,0)
^RMIM(783,
"FIA",783,0,0)
783
"FIA",783,0,1)
y^n^p^^^^n^^n
"FIA",783,0,10)

"FIA",783,0,11)

"FIA",783,0,"RLRO")

"FIA",783,0,"VR")
1.0^RMIM
"FIA",783,783)
1
"FIA",783,783,.05)

"INIT")
POST^RMIM3PST
"MBREQ")
0
"PKG",557,-1)
1^1
"PKG",557,0)
FUNCTIONAL INDEPENDENCE^RMIM^RMIM
"PKG",557,20,0)
^9.402P^^
"PKG",557,22,0)
^9.49I^1^1
"PKG",557,22,1,0)
1.0^3030415^3030520^66481
"PKG",557,22,1,"PAH",1,0)
3^3040504
"PKG",557,22,1,"PAH",1,1,0)
^^4^4^3040504
"PKG",557,22,1,"PAH",1,1,1,0)
Fixes for first time users unable to access GUI, imprecise DOB error, 
"PKG",557,22,1,"PAH",1,1,2,0)
and file access issue with RMIM EDIT SITE PARAMETER option.  
"PKG",557,22,1,"PAH",1,1,3,0)
Addition of'0-Unspecified' to Admission Class list and change from Rehab  
"PKG",557,22,1,"PAH",1,1,4,0)
Bed Unit Admission Date/Discharge Date to Therapy Start Date/End Date.
"PRE")
RMIM3PST
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","RMIM3PST")
0^^B7471503
"RTN","RMIM3PST",1,0)
RMIM3PST ;ALB/TMD ; FUNCTIONAL INDEPENDENCE INSTALL UTILITY ; 5/4/04 12:02pm
"RTN","RMIM3PST",2,0)
 ;;1.0;FUNCTIONAL INDEPENDENCE;**3**;Mar 12, 2003
"RTN","RMIM3PST",3,0)
 ;
"RTN","RMIM3PST",4,0)
ENV ;Main entry point for Environment check point
"RTN","RMIM3PST",5,0)
 ;
"RTN","RMIM3PST",6,0)
 S XPDABORT=""
"RTN","RMIM3PST",7,0)
 D PROGCHK(.XPDABORT) ;checks programmer variables
"RTN","RMIM3PST",8,0)
 I XPDABORT="" K XPDABORT
"RTN","RMIM3PST",9,0)
 Q
"RTN","RMIM3PST",10,0)
 ;
"RTN","RMIM3PST",11,0)
 ;
"RTN","RMIM3PST",12,0)
POST ;Main entry point for Post-init items
"RTN","RMIM3PST",13,0)
 D LAYGO
"RTN","RMIM3PST",14,0)
 D VERSION
"RTN","RMIM3PST",15,0)
 Q
"RTN","RMIM3PST",16,0)
 ;
"RTN","RMIM3PST",17,0)
LAYGO ;
"RTN","RMIM3PST",18,0)
 N RMDA         ;Option file #
"RTN","RMIM3PST",19,0)
 N RMOPTION     ;Option Name
"RTN","RMIM3PST",20,0)
 N RMIEN        ;Record IEN
"RTN","RMIM3PST",21,0)
 N RMFDA        ;fda_root array
"RTN","RMIM3PST",22,0)
 N RMMSG         ;msg_root array
"RTN","RMIM3PST",23,0)
 ;
"RTN","RMIM3PST",24,0)
 S RMOPTION="RMIM EDIT SITE PARAMETER",RMDA=19,RMIEN=""
"RTN","RMIM3PST",25,0)
 S RMIEN=$O(^DIC(19,"B",RMOPTION,RMIEN))_","
"RTN","RMIM3PST",26,0)
 I 'RMIEN D BMES^XPDUTL("****Could not locate "_RMOPTION_" option, update not completed") Q
"RTN","RMIM3PST",27,0)
 S RMFDA(RMDA,RMIEN,"20")="S DLAYGO=783.9"
"RTN","RMIM3PST",28,0)
 S RMFDA(RMDA,RMIEN,"15")="K DLAYGO"
"RTN","RMIM3PST",29,0)
 D FILE^DIE("","RMFDA","RMMSG")
"RTN","RMIM3PST",30,0)
 I $D(RMMSG("DIERR",1)) D BMES^XPDUTL("****"_RMOPTION_" option not updated - ERROR CODE "_RMMSG("DIERR",1)) Q
"RTN","RMIM3PST",31,0)
 D BMES^XPDUTL("****"_RMOPTION_" option successfully updated")
"RTN","RMIM3PST",32,0)
 Q
"RTN","RMIM3PST",33,0)
 ;
"RTN","RMIM3PST",34,0)
VERSION ;Update server version number
"RTN","RMIM3PST",35,0)
 N RMDA         ;Option file #
"RTN","RMIM3PST",36,0)
 N RMOPTION     ;Option Name
"RTN","RMIM3PST",37,0)
 N RMIEN        ;Record IEN
"RTN","RMIM3PST",38,0)
 N RMFDA        ;fda_root array
"RTN","RMIM3PST",39,0)
 N RMMSG         ;msg_root array
"RTN","RMIM3PST",40,0)
 ;
"RTN","RMIM3PST",41,0)
 S RMOPTION="RMIMFIM",RMDA=19,RMIEN=""
"RTN","RMIM3PST",42,0)
 S RMIEN=$O(^DIC(19,"B",RMOPTION,RMIEN))_","
"RTN","RMIM3PST",43,0)
 I 'RMIEN D BMES^XPDUTL("****Could not locate "_RMOPTION_" option, server version update not completed") Q
"RTN","RMIM3PST",44,0)
 S RMFDA(RMDA,RMIEN,"1")="RMIMFIM Context version 1.0.4.1"
"RTN","RMIM3PST",45,0)
 D FILE^DIE("","RMFDA","RMMSG")
"RTN","RMIM3PST",46,0)
 I $D(RMMSG("DIERR",1)) D BMES^XPDUTL("****Server version number not updated - ERROR CODE "_RMMSG("DIERR",1)) Q
"RTN","RMIM3PST",47,0)
 D BMES^XPDUTL("****Server version successfully updated to 1.0.4.1.")
"RTN","RMIM3PST",48,0)
 Q 
"RTN","RMIM3PST",49,0)
PROGCHK(XPDABORT) ;checks for necessary programmer variables
"RTN","RMIM3PST",50,0)
 ;
"RTN","RMIM3PST",51,0)
 I '$G(DUZ)!($G(DUZ(0))'="@")!('$G(DT))!($G(U)'="^") D
"RTN","RMIM3PST",52,0)
 .D BMES^XPDUTL("****")
"RTN","RMIM3PST",53,0)
 .D BMES^XPDUTL("Your programming variables are not set up properly.")
"RTN","RMIM3PST",54,0)
 .D BMES^XPDUTL("Installation aborted.")
"RTN","RMIM3PST",55,0)
 .S XPDABORT=2
"RTN","RMIM3PST",56,0)
 Q
"RTN","RMIMRP")
0^1^B28005730
"RTN","RMIMRP",1,0)
RMIMRP ;WPB/JLTP ; FUNCTIONAL INDEPENDENCE RPCs ; 1/12/04 5:03pm
"RTN","RMIMRP",2,0)
 ;;1.0;FUNCTIONAL INDEPENDENCE;**3**;Apr 15, 2003
"RTN","RMIMRP",3,0)
PRM(RMIMR) ; Return Site Parameter Information
"RTN","RMIMRP",4,0)
 K RMIMR
"RTN","RMIMRP",5,0)
 N CNT,CNTI,FAC,FNT,FNTI,I,INST,MG,NFNT,NFNT,NT,STANUM,X
"RTN","RMIMRP",6,0)
 S RMIMR(1)="-1^Site Parameters Not Found"
"RTN","RMIMRP",7,0)
 S X=$G(^RMIM(783.9,1,0)) Q:X=""  S INST=+X
"RTN","RMIMRP",8,0)
 S INST=$P($G(^DIC(4,INST,0)),U),STANUM=$P($G(^(99)),U)
"RTN","RMIMRP",9,0)
 S MG=$P($G(^XMB(3.8,+$P(X,U,3),0)),U)
"RTN","RMIMRP",10,0)
 S FNTI=+$P(X,U,4),NFNTI=+$P(X,U,5),CNTI=+$P(X,U,6)
"RTN","RMIMRP",11,0)
 S FNT=$P($G(^TIU(8925.1,FNTI,0)),U)
"RTN","RMIMRP",12,0)
 S NFNT=$P($G(^TIU(8925.1,NFNTI,0)),U)
"RTN","RMIMRP",13,0)
 S CNT=$P($G(^TIU(8925.1,CNTI,0)),U)
"RTN","RMIMRP",14,0)
 S NT=U_FNTI_U_FNT_U_NFNTI_U_NFNT_U_CNTI_U_CNT_U
"RTN","RMIMRP",15,0)
 S I=0,FAC=1 F  S I=$O(^RMIM(783.9,1,10,I)) Q:'I  S X=^(I,0) D
"RTN","RMIMRP",16,0)
 .S FAC=FAC+1,RMIMR(FAC)=X
"RTN","RMIMRP",17,0)
 S RMIMTIME=$S($G(^VA(200,DUZ,200)):$P(^(200),U,10),1:$G(DTIME))
"RTN","RMIMRP",18,0)
 S RMIMR(1)=INST_U_STANUM_U_MG_NT_(FAC-1)_U_RMIMTIME
"RTN","RMIMRP",19,0)
 Q
"RTN","RMIMRP",20,0)
DME(RMIMR,P1) ; DME for a Patient
"RTN","RMIMRP",21,0)
 K RMIMR
"RTN","RMIMRP",22,0)
 N DATE,DFN,IFN,ITM,ITM0,ITMI,RMIMAD,RMIMDC,TCST
"RTN","RMIMRP",23,0)
 I '$G(P1) S RMIMR(0)="-1^Missing Patient Identifier" Q
"RTN","RMIMRP",24,0)
 S DFN=+P1,RMIMAD=+$P(P1,U,2),RMIMDC=+$P(P1,U,3),RMIMR(0)=0
"RTN","RMIMRP",25,0)
 I 'RMIMAD!('RMIMDC) D  Q
"RTN","RMIMRP",26,0)
 .S RMIMR(0)="-2^Missing Required Date Range"
"RTN","RMIMRP",27,0)
 S IFN=0 F  S IFN=$O(^RMPR(664.1,"D",DFN,IFN)) Q:'IFN  D
"RTN","RMIMRP",28,0)
 .S DATE=$P(^RMPR(664.1,IFN,0),U) Q:(DATE<RMIMAD)!(DATE>RMIMDC)
"RTN","RMIMRP",29,0)
 .S ITMI=0 F  S ITMI=$O(^RMPR(664.1,IFN,2,ITMI)) Q:'ITMI  D
"RTN","RMIMRP",30,0)
 ..S ITM0=$G(^RMPR(664.1,IFN,2,ITMI,0))
"RTN","RMIMRP",31,0)
 ..S ITM=+ITM0,TCST=$P(ITM0,U,11)
"RTN","RMIMRP",32,0)
 ..S ITM=+$G(^RMPR(661,ITM,0)),ITM=$P($G(^PRC(441,ITM,0)),U,2) I ITM]"" D
"RTN","RMIMRP",33,0)
 ...S RMIMR(0)=RMIMR(0)+1
"RTN","RMIMRP",34,0)
 ...S RMIMR(RMIMR(0))=ITM_U_TCST
"RTN","RMIMRP",35,0)
 Q
"RTN","RMIMRP",36,0)
DFN(RMIMR,SSN) ; Convert a Patient's SSN to Internal Entry Number
"RTN","RMIMRP",37,0)
 K RMIMR N C,DFN,I,X S X=$G(SSN),SSN=""
"RTN","RMIMRP",38,0)
 F I=1:1:$L(X) S C=$E(X,I) I "0123456789P"[C S SSN=SSN_C
"RTN","RMIMRP",39,0)
 I SSN'?9N.1"P" S RMIMR(1)="-1^Invalid SSN" Q
"RTN","RMIMRP",40,0)
 S DFN=$O(^DPT("SSN",SSN,0))
"RTN","RMIMRP",41,0)
 I 'DFN S RMIMR(1)="-2^SSN Not Found" Q
"RTN","RMIMRP",42,0)
 S RMIMR(1)=DFN
"RTN","RMIMRP",43,0)
 Q
"RTN","RMIMRP",44,0)
FRM(RMIMR,F) ; Set Form Title into Broker Partition
"RTN","RMIMRP",45,0)
 K RMIMR
"RTN","RMIMRP",46,0)
 S RMIMFORM=F_"  "_$P(^RMIM(783.9,1,0),U,7),RMIMR(1)="1^OK"
"RTN","RMIMRP",47,0)
 Q
"RTN","RMIMRP",48,0)
DTFMT(RMIMR,X) ; Validate and Format External Date/Time
"RTN","RMIMRP",49,0)
 K RMIMR N %DT,Y
"RTN","RMIMRP",50,0)
 S %DT="TS" D ^%DT
"RTN","RMIMRP",51,0)
 I Y<0 S RMIMR(1)="-1^Invalid Date/Time" Q
"RTN","RMIMRP",52,0)
 S RMIMR(1)=$$FMTE^XLFDT(Y,5)
"RTN","RMIMRP",53,0)
 Q
"RTN","RMIMRP",54,0)
XM(RMIMR,X,RMIMTX) ; Send a MailMan Message
"RTN","RMIMRP",55,0)
 K RMIMR
"RTN","RMIMRP",56,0)
 N I,RECIP,REPLY,TEXT,XMDUN,XMDUZ,XMER,XMMG,XMSUB,XMTEXT,XMY,XMZ
"RTN","RMIMRP",57,0)
 S XMSUB=$P(X,U),RECIP=$P(X,U,2)
"RTN","RMIMRP",58,0)
 S:$G(^XMB(3.9,+$P(X,U,3),0))]"" REPLY=$P(X,U,3) S XMY(RECIP)=""
"RTN","RMIMRP",59,0)
 I '$O(RMIMTX(0))!(XMSUB="")!(RECIP="") D  Q
"RTN","RMIMRP",60,0)
 .S RMIMR(1)="-1^Missing Subject, Text, or Recipients for Mail Message"
"RTN","RMIMRP",61,0)
 S I=0,X="" F  S X=$O(RMIMTX(X)) Q:X=""  S I=I+1,TEXT(I,0)=RMIMTX(X)
"RTN","RMIMRP",62,0)
 S XMTEXT="TEXT(" I '$G(REPLY) D ^XMD S:$D(XMMG) XMER=XMMG
"RTN","RMIMRP",63,0)
 I $G(REPLY) S X=$$ENT^XMA2R(REPLY,"",.TEXT) S XMZ=REPLY S:'X XMER=X
"RTN","RMIMRP",64,0)
 I $G(XMER) S RMIMR(1)="-1^"_XMER Q
"RTN","RMIMRP",65,0)
 S RMIMR(1)="1^"_XMZ
"RTN","RMIMRP",66,0)
 Q
"RTN","RMIMRP",67,0)
DUZ(RMIMR,X) ; Return NEW PERSON Information
"RTN","RMIMRP",68,0)
 K RMIMR N KEY
"RTN","RMIMRP",69,0)
 S X=+$G(X) S:'X X=DUZ S RMIMR(1)="-1^User Number Not Defined"
"RTN","RMIMRP",70,0)
 Q:'X  S X=X_U_$P($G(^VA(200,+X,0)),U)
"RTN","RMIMRP",71,0)
 S KEY=$S($D(^XUSEC("RMIM COORD",+X)):2,$D(^XUSEC("RMIM FSOD",+X)):1,1:0)
"RTN","RMIMRP",72,0)
 S X=X_U_KEY,RMIMR(1)=X
"RTN","RMIMRP",73,0)
 Q
"RTN","RMIMRP",74,0)
SAV(RMIMR,RMIML) ; Save Information about a Case
"RTN","RMIMRP",75,0)
 N NXT,OP,X,Y
"RTN","RMIMRP",76,0)
 S NXT=$O(RMIML("")) I NXT="" S (RMIMR,RMIMR(1))=$$ERR^RMIMU(-4) Q
"RTN","RMIMRP",77,0)
 S OP=$P(RMIML(NXT),U),X=$P(RMIML(NXT),U,2,200)
"RTN","RMIMRP",78,0)
 S Y=$S(OP="A":$$A^RMIMU(X),OP="E":$$E^RMIMU(X),OP="D":$$D^RMIMU(X),1:0)
"RTN","RMIMRP",79,0)
 S:Y=0 Y=$$ERR^RMIMU(-5)
"RTN","RMIMRP",80,0)
 I OP'="D",Y>0 S Y=$$OF^RMIMU1(+Y,.RMIML)
"RTN","RMIMRP",81,0)
 S (RMIMR,RMIMR(1))=Y
"RTN","RMIMRP",82,0)
 Q
"RTN","RMIMRP",83,0)
LC(RMIMR,X) ; Returns a List of Cases from File #783
"RTN","RMIMRP",84,0)
 N DATE,DFN,FAC,I,IFN,Y
"RTN","RMIMRP",85,0)
 S IDX=1,DFN=+X,FAC=$P(X,U,2)
"RTN","RMIMRP",86,0)
 S IFN=0 F  S IFN=$O(^RMIM(783,"DFN",DFN,IFN)) Q:'IFN  D
"RTN","RMIMRP",87,0)
 .S X=$G(^RMIM(783,IFN,0)) Q:$P(X,U,6)'=FAC  Q:$P(X,U,14)="D"
"RTN","RMIMRP",88,0)
 .S IDX=IDX+1,Y(IDX)=$P(X,U,2)_U_DFN_U_FAC
"RTN","RMIMRP",89,0)
 .F I=10,11 D
"RTN","RMIMRP",90,0)
 ..S DATE=$P(X,U,I) S:DATE]"" DATE=$$FMTE^XLFDT(DATE,5)
"RTN","RMIMRP",91,0)
 ..S Y(IDX)=Y(IDX)_U_DATE
"RTN","RMIMRP",92,0)
 S Y(1)=IDX-1 M RMIMR=Y
"RTN","RMIMRP",93,0)
 Q
"RTN","RMIMRP",94,0)
GC(RMIMR,X) ; Returns Information about a Specific Case
"RTN","RMIMRP",95,0)
 K RMIMR N CASE,I,IFN
"RTN","RMIMRP",96,0)
 S CASE=+$G(X) I 'CASE S RMIMR(1)=$$ERR^RMIMU(-1) Q
"RTN","RMIMRP",97,0)
 S (I,IFN)=0 F  S I=$O(^RMIM(783,"CASE",CASE,I)) Q:'I  D
"RTN","RMIMRP",98,0)
 .I $G(^RMIM(783,I,0))]"",$P(^(0),U,14)'="D" S IFN=I
"RTN","RMIMRP",99,0)
 I 'IFN S RMIMR(1)=$$ERR^RMIMU(-6) Q
"RTN","RMIMRP",100,0)
 S RMIMR(1)=IFN_U_CASE D GC^RMIMU(.RMIMR),GF^RMIMU1(.RMIMR)
"RTN","RMIMRP",101,0)
 Q
"RTN","RMIMRP",102,0)
PL(RMIMR,X) ; Patient Lookup
"RTN","RMIMRP",103,0)
 K RMIMR N I,SEN,SL,Y
"RTN","RMIMRP",104,0)
 D FIND^DIC(2,"","@;.01;.03I;.09","CMP",X,"","","","","Y")
"RTN","RMIMRP",105,0)
 S I=0 F  S I=$O(Y("DILIST",I)) Q:'I  S LI=Y("DILIST",I,0) D
"RTN","RMIMRP",106,0)
 .S $P(LI,U,6,7)=$P(LI,U,3,4)
"RTN","RMIMRP",107,0)
 .D PTSEC^DGSEC4(.SEN,+LI)
"RTN","RMIMRP",108,0)
 .I SEN(1) S $P(LI,U,3,5)="*SENSITIVE*^*SENSITIVE*^"_+SEN(1)
"RTN","RMIMRP",109,0)
 .S RMIMR(I)=LI
"RTN","RMIMRP",110,0)
 Q
"RTN","RMIMRP",111,0)
RRN(RMIMR,X) ; Send Restricted Record Access Notification
"RTN","RMIMRP",112,0)
 K RMIMR N Y
"RTN","RMIMRP",113,0)
 D NOTICE^DGSEC4(.Y,+X,"RMIM FIM^FIM GUI")
"RTN","RMIMRP",114,0)
 S RMIMR(1)=Y
"RTN","RMIMRP",115,0)
 Q
"RTN","RMIMRP",116,0)
AL(RMIMR,X) ; Author Lookup
"RTN","RMIMRP",117,0)
 K RMIMR N I,Y
"RTN","RMIMRP",118,0)
 D FIND^DIC(200,"","@;.01","CMP",X,"","","","","Y")
"RTN","RMIMRP",119,0)
 S I=0 F  S I=$O(Y("DILIST",I)) Q:'I  S RMIMR(I)=Y("DILIST",I,0)
"RTN","RMIMRP",120,0)
 Q
"RTN","RMIMRP",121,0)
LL(RMIMR,X) ; Location Lookup
"RTN","RMIMRP",122,0)
 K RMIMR N I,Y
"RTN","RMIMRP",123,0)
 D FIND^DIC(44,"","@;.01","CMP",X,"","","","","Y")
"RTN","RMIMRP",124,0)
 S I=0 F  S I=$O(Y("DILIST",I)) Q:'I  S RMIMR(I)=Y("DILIST",I,0)
"RTN","RMIMRP",125,0)
 Q
"RTN","RMIMRP",126,0)
PI(RMIMR,DFN) ; Patient Information
"RTN","RMIMRP",127,0)
 K RMIMR S RMIMR(1)=$$ERR^RMIMU(-8)
"RTN","RMIMRP",128,0)
 N I,VA,VADM,VAEL,VAERR,VAPA,X,Y
"RTN","RMIMRP",129,0)
 D DEM^VADPT Q:VAERR
"RTN","RMIMRP",130,0)
 D ADD^VADPT Q:VAERR
"RTN","RMIMRP",131,0)
 D ELIG^VADPT Q:VAERR
"RTN","RMIMRP",132,0)
 M X=VADM F I=8,10 S X(I)=$P(X(I),U,2)
"RTN","RMIMRP",133,0)
 I X(8)="" S:$D(VADM(12,1)) X(8)=$P(VADM(12,1),U,2)  ;New Race Information Multiple
"RTN","RMIMRP",134,0)
 S Y=DFN F I=1,2,8,4,5,10 S Y=Y_U_$P(X(I),U)
"RTN","RMIMRP",135,0)
 S Y=Y_U_$S($P(VAEL(6),U,2)="ACTIVE DUTY":"A",1:"N")
"RTN","RMIMRP",136,0)
 K X M X=VAPA F I=5,7 S X(I)=$P(X(I),U,2)
"RTN","RMIMRP",137,0)
 F I=1,4,5,6,7,8 S Y=Y_U_$P(X(I),U)
"RTN","RMIMRP",138,0)
 S RMIMR(1)=Y
"RTN","RMIMRP",139,0)
 Q
"RTN","RMIMRP",140,0)
PTL(RMIMR,X) ; Lock/Unlock Patient
"RTN","RMIMRP",141,0)
 S X=$G(X),DFN=+X,L=+$P(X,U,2) I 'DFN S RMIMR(1)="-1^Invalid Patient" Q
"RTN","RMIMRP",142,0)
 I 'L L -^RMIM("PATIENT",DFN) S RMIMR(1)=1 Q
"RTN","RMIMRP",143,0)
 S RMIMR(1)=1 L +^RMIM("PATIENT",DFN):2 E  S RMIMR(1)=-1
"RTN","RMIMRP",144,0)
 Q
"VER")
8.0^22
"^DD",783,783,.05,0)
PT DOB^D^^0;5^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",783,783,.05,21,0)
^^4^4^3030214^
"^DD",783,783,.05,21,1,0)
This field contains the Patient date of birth.  It corresponds with the
"^DD",783,783,.05,21,2,0)
Austin FSOD database BIRTH_DATE.  This data is obtained from the Patient
"^DD",783,783,.05,21,3,0)
file via a broker call from the FIM template when a user makes a patient
"^DD",783,783,.05,21,4,0)
selection.
"^DD",783,783,.05,"DT")
3040109
**END**
**END**

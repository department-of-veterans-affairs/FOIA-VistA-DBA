$TXT Created by FORT,WALLY at PAT-XWB.ISC-SF.VA.GOV  (KIDS) on FRIDAY, 01/07/00 at 09:52
=============================================================================
Run Date: JAN 24, 2000                     Designation: XWB*1.1*9
Package : XWB - RPC BROKER                    Priority: Mandatory
Version : 1.1         SEQ #9                   Status: Released
=============================================================================


Subject: Cache License Fix

Category: 
  - Routine

Description: 
============

 >>>>>Y2K Waiver # Y2K0001<<<<<
  
 This patch fixes the following: 
  
 1.  Intersystems License.    This is the patch that works with patch
 XU*8*118. The code to share licenses when GUI and Telnet users from the
 same workstation are connected is in place and ZU now calls it.  This
 patch adds a similar call from XWBTCPC.  
               
 2.  This patch brings a new XWB LISTENER STOP ALL option for shutting down
 multiple listeners.  It also brings a modified option XWB LISTENER STARTER
 for starting Broker listeners.
  
 These changes fulfill the functionality requested in the following E3Rs:
     11934, RPC BROKER FILE SHOWS RUNNING ON OPENM FAILOVER
     10705, LISTENERS NOT STOPPED WILL NOT START UP
      8789, CREATE MENU STARTUP AND SHUTDOWN OPTIONS
  
 The changes also resolve the problems reported in the following NOIS
 calls:
     DAY-0796-40646, Startup Queue of Listener
     FRE-0299-60491, Broker Not Starting Automatically
  
 Here are the definitions of the options:
  
 NAME: XWB LISTENER STARTER      MENU TEXT: Start All RPC Broker Listeners
   TYPE: run routine                     CREATOR: 
   PACKAGE: RPC BROKER                   DELEGABLE: YES
  DESCRIPTION:   This option will Start/Restart all the RPC Broker
 listeners under the control of the RPC BROKER SITE PARAMETERS file.  It is
 normally setup as a STARTUP type option in the taskman option scheduling
 file. This option will first STOP ALL listeners and then START ALL the
 listeners through Taskman.  (VMS sites need to be running Taskman in DCL
 context).  The XWB LISTENER STARTER cannot be used to start one particular
 listener.  To do this, in programmer mode, use STRT^XWBTCP(portnumber) on
 the node the listener needs to run on. Or use the XWB LISTENER EDIT option
 to change the status of the one listener.
   ROUTINE: RESTART^XWBTCP               SCHEDULING RECOMMENDED: STARTUP
   UPPERCASE MENU TEXT: START ALL RPC BROKER LISTENERS
  
 NAME: XWB LISTENER STOP ALL       MENU TEXT: Stop All RPC Broker Listeners
   TYPE: run routine                     CREATOR: 
   PACKAGE: RPC BROKER                   DELEGABLE: YES
  DESCRIPTION:   This option will Stop all the RPC Broker listeners under
 the control of the RPC BROKER SITE PARAMETERS file.
   ROUTINE: STOPALL^XWBTCP
   UPPERCASE MENU TEXT: STOP ALL RPC BROKER LISTENERS
  
 3.  The code called by the XWB LISTENER STARTER option had a bug that
 caused it to start the listeners on the default port of 9000.  This
 problem is fixed.  The following NOIS calls reported the bug.
               
     BEC-0999-21188   XWB  LISTENER STARTER 
     STX-0999-71581   BROKER STARTING 9000 IGNORING PARAME 
  
 4.  A new menu option, XWB MAIN MENU, is included in this patch.  Another
 option, XWB LISTENER EDIT, is also included.  Here are the option
 definitions:
  
 NAME: XWB MENU                     MENU TEXT: RPC Broker Management Menu
   TYPE: menu                            CREATOR: 
   PACKAGE: RPC BROKER                   DELEGABLE: NO
  DESCRIPTION:   This is the main menu for RPC Broker.  
 ITEM: XWB LISTENER STOP ALL             DISPLAY ORDER: 3
 ITEM: XWB LISTENER EDIT                 DISPLAY ORDER: 1
 ITEM: XWB LISTENER STARTER              DISPLAY ORDER: 2
   TIMESTAMP: 58079,48431
   UPPERCASE MENU TEXT: RPC BROKER MANAGEMENT MENU
  
 NAME: XWB LISTENER EDIT                 MENU TEXT: RPC Listener Edit
   TYPE: edit                            CREATOR:
   PACKAGE: RPC BROKER                   DELEGABLE: NO
  DESCRIPTION:   This option allows for editing the RPC BROKER SITE
 PARAMETERS file (#8994.1).
   DIC {DIC}: XWB(8994.1,                DIC(0): AEMQ
   DIE: XWB(8994.1,                      DR {DIE}: [XWB LISTENER EDIT]
   TIMESTAMP OF PRIMARY MENU: 58078,56469
   UPPERCASE MENU TEXT: RPC LISTENER EDIT
  
              <<<<<<THIS IS A SERVER SIDE ONLY PATCH>>>>>>
  
 The updated RPC Broker Systems Manual and the RPC Broker Technical Manual
 may be retrieved at the following CIO Field Offices' ANONYMOUS.SOFTWARE
 directories:
  
         Hines           152.129.1.110  (isc-chicago.va.gov)
         Albany          152.127.1.5    (isc-albany.va.gov)
         Salt Lake City  152.131.2.1    (isc-slc.va.gov)
  
 Use Binary mode for these .PDF files:
  
 XWB1_1P9SM.PDF         RPC Broker Systems Manual        239,932 bytes
 XWB1_1P9TM.PDF         RPC Broker Technical Manual       97,158 bytes
  
 Routine Summary:
 ================
  
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;1.1;RPC BROKER;<patchlist>;Mar 28, 1997
  
                  Checksum
 Routine         Old       New      2nd Line
 XWBTCP        9081629  10677300    **1,9**
 XWBTCPC       7635440   7568523    **2,5,4,6,9**
 XWBTCPL       8850625   8934371    **1,7,9**
  
 List of preceding patches: 6, 7
 Sites should use CHECK^XTSUMBLD to verify checksums.
  
 =========================================================================
  
 Installation:
  
    1.  Do not run any RPC-Broker-based Client/Server software (e.g., CPRS,
        PCMM) during the installation.  No Broker-based client/server 
        software should be running while installing this patch on the 
        server.  To identify these jobs, check the system status and verify
        if any XWBTCPC routines are running (i.e., Broker Handler).  Once 
        identified, notify users to logoff or forcex the jobs.  Active 
        users may get NOSOURCE or CLOBBER errors.  
  
    2.  Stop the Broker Listener on the server.  Check the system status 
        and verify if the XWBTCPL routine is running (i.e., Broker 
        Listener).  If it is running stop it.  To stop the Listener, do the
        following: 
  
            a.  Log into your M server.                   
            b.  Enter the following at the M prompt: 
  
                >D STOP^XWBTCP(Listener port) 
                (Typically, the Listener port is 9200) 
  
    3.  Broker routines are not usually mapped on systems that allow it, so
        you will probably not have to disable mapping.
  
    4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.
  
    5.  The patch has now been loaded into a Transport global on your
        system. You now need to use KIDS to install the Transport global.
        On the KIDS menu, under the 'Installation' menu, use the following
        options:
  
           Verify Checksums in Transport Global
           Print Transport Global
           Compare Transport Global to Current System
           Backup a Transport Global
  
    6.  On the KIDS menu, under the 'Installation' menu, use the following
        option:
          Install Package(s)  'XWB*1.1*9'
                               =========
        No Options or Protocols need to be placed out-of-order.
        Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO
                                                                        ==
  
    7.  If the routines were unmapped as part of step 3, the mapped set
        should be rebuilt once the installation has run to completion. 
  
    8.  Restart the Broker Listener on the Server:
          a.  Log into your M server
          b.  Enter the following at the M prompt:
  
              >D STRT^XWBTCP(Listener port)
              (Typically, the Listener port is 9200)

Routine Information:
====================

Routine Name:
  - XWBTCP


Routine Checksum:

Routine Name:
  - XWBTCPC


Routine Checksum:

Routine Name:
  - XWBTCPL


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : FORT,WALLY                     Date Entered : JUL 28, 1999
Completed By: MANAPSAL,DANILA               Date Completed: JAN 11, 2000
Released By : PALMER,MICHAEL                Date Released : JAN 24, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

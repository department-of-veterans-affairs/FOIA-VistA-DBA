$TXT Created by CASTLE,JOHN at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Friday, 03/16/07 at 13:57
=============================================================================
Run Date: MAY 22, 2007                     Designation: PSJ*5*180
Package : PSJ - INPATIENT MEDICATIONS         Priority: Mandatory
Version : 5       SEQ #167                      Status: Released
                  Compliance Date: JUN 22, 2007
=============================================================================

Associated patches: (v)PSJ*5*111   <<= must be installed BEFORE `PSJ*5*180'

Subject: INVALID DURATION OR LIMIT FROM CPRS

Category: 
  - Routine

Description:
============

  
 PSI-06-066:
 -----------
 If a user enters a leading zero for the limit/duration of an IV, the stop
 date is calculated incorrectly.
  
 CPRS has addressed this with patch OR*3*254. However, it was determined 
 that Inpatient Medications should also make a patch just in case some
 future CPRS project removes the fixes in place from OR*3*254.  So,
 Inpatient Medications will now be able to handle an invalid duration/limit
 should one ever be received from CPRS.
  
  
 This patch is independent of CPRS patch OR*3*254 and is not required for
 this Inpatient Medications patch.
  
  
 ASSOCIATED REMEDY TICKETS:
 ==========================
 HD146661 - Invalid Duration/Limit (PSI-06-066)
  
  
 PARTICIPATING TEST SITES:
 =========================
 White River Junction VAMC
 New Jersey HCS
 Puget Sound HCS
  
  
 REMEDY OVERVIEW:
 ================
 HD146661 - Invalid Duration/Limit (PSI-06-066)
  
 Problem:
 --------
 If a leading zero was entered for an IV limit in CPRS, CPRS incorrectly 
 calculates the stop time for the order and then passes an incorrectly 
 formatted internal code to Inpatient Medications.
  
 Resolution
 ----------
 CPRS has tightened their code so that they should never send an incorrectly
 formatted internal code to Inpatient Pharmacy, however should some future
 CPRS patch remove the functionality in place to properly format the code, 
 Inpatient Pharmacy will alert the pharmacist that he/she needs to look
 more carefully at the order.  It will do this by removing the ability for
 the pharmacist to FINISH the order.  Also, in the Limit/Duration field for
 the order display, write "Invalid Duration/Limit" and, for the stop date,
 write "CANNOT CALCULATE".
  
  
 TECHNICAL DESCRIPTION:
 ======================
 HD146661 - Invalid Duration/Limit (PSI-06-066)
  
 Update FMTDUR^PSJLIVMD to ensure the internal limit/duration code sent
 from CPRS is correct.  If it is not correct, set the flag PSJBADD.  If
 that flag is set, remove F from the string of allowed actions on the order.
 By doing this, it removes the ability for the pharmacist to FINISH the
 order.  Also, in the Limit/Duration field for the order display, write
 "Invalid Duration/Limit".  Finally, for the stop date, write "CANNOT
 CALCULATE".
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
  
  *************************** NOTE ****************************
  *  IF A USER IS ON THE SYSTEM AND USING THESE PROGRAMS      *
  *  AN EDITED ERROR WILL OCCUR.                              *
  *  The patch should be installed when NO Inpatient Pharmacy *
  *  users are on the system.                                 *
  * ***********************************************************
  
 Installation will take less than 1 minute.
  
   
 Suggested time to install: Non-peak requirement hours.  IF A USER IS ON
 THE SYSTEM AND USING THESE PROGRAMS AN EDITED ERROR WILL OCCUR.  The
 patch should be installed when NO Inpatient Pharmacy users are on the
 system.
  
 1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
   
 2. From the Kernel Installation & Distribution System menu, select
    the Installation menu.
  
 3. From this menu, you may select to use the following options
    (when prompted for INSTALL NAME, enter PSJ*5.0*180):
        a.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
        b.  Print Transport Global - This option will allow you to view
            the components of the KIDS build.
        c.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        d.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
    
 4. Use the Install Package(s) option and select the package PSJ*5.0*180.
  
 5. When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//"
    respond NO.
    
 6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
    Protocols? YES//" respond NO. 
   
    
 ROUTINE SUMMARY:
 ================
  
 The following is a list of the routines included in this patch.
 The second line of each of the routines now looks like this:
  
           ;;5.0; INPATIENT MEDICATIONS ;**[PATCH LIST]**;16 DEC 97
  
                        CHECK^XTSUMBLD results   
  
 Routine Name     Before Patch     After Patch    Patch List
 ============     ============     ===========    ======================
 PSJLIUTL         17145960         17357637       39,50,58,81,85,110,180
  
 PSJLIVFD         10731834         10930972       7,50,63,64,58,81,91,
                                                  80,116,110,111,180
  
 PSJLIVMD         17039624         17466167       37,50,63,58,81,91,
                                                  80,116,110,111,180

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSJLIUTL
    Before: B50013699  After: B51802823  **39,50,58,81,85,110,180**
Routine Name: PSJLIVFD
    Before: B37728211  After: B38290279  **7,50,63,64,58,81,91,80,116,
                                          110,111,180**
Routine Name: PSJLIVMD
    Before: B66254747  After: B69996973  **37,50,63,58,81,91,80,116,110,
                                          111,180**

=============================================================================
User Information:
Entered By  : CASTLE,JOHN                   Date Entered  : JUL 05, 2006
Completed By: WERNER,GARY                   Date Completed: MAY 21, 2007
Released By : LYTTLE,KIM M                  Date Released : MAY 22, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

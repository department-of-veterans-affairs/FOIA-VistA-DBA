Released XT*7.3*100 SEQ #80
Extracted from mail message
**KIDS**:XT*7.3*100^

**INSTALL NAME**
XT*7.3*100
"BLD",919,0)
XT*7.3*100^TOOLKIT^0^3060329^y
"BLD",919,1,0)
^^2^2^3060104^
"BLD",919,1,1,0)
Kernel Toolkit patch XT*7.3*100 VistA Patch Monitor. Please 
"BLD",919,1,2,0)
refer to the Description in Forum Patch Module for details.
"BLD",919,4,0)
^9.64PA^^
"BLD",919,6.3)
4
"BLD",919,"ABPKG")
n
"BLD",919,"KRN",0)
^9.67PA^8989.52^19
"BLD",919,"KRN",.4,0)
.4
"BLD",919,"KRN",.401,0)
.401
"BLD",919,"KRN",.402,0)
.402
"BLD",919,"KRN",.403,0)
.403
"BLD",919,"KRN",.5,0)
.5
"BLD",919,"KRN",.84,0)
.84
"BLD",919,"KRN",3.6,0)
3.6
"BLD",919,"KRN",3.8,0)
3.8
"BLD",919,"KRN",9.2,0)
9.2
"BLD",919,"KRN",9.8,0)
9.8
"BLD",919,"KRN",9.8,"NM",0)
^9.68A^6^6
"BLD",919,"KRN",9.8,"NM",1,0)
XTPMSTA2^^0^B20526817
"BLD",919,"KRN",9.8,"NM",2,0)
XTPMKPTC^^0^B75764182
"BLD",919,"KRN",9.8,"NM",3,0)
XTPMNEX7^^0^B12616723
"BLD",919,"KRN",9.8,"NM",4,0)
XTPMSTAT^^0^B31144334
"BLD",919,"KRN",9.8,"NM",5,0)
XTSUMBLD^^0^B30858373
"BLD",919,"KRN",9.8,"NM",6,0)
XTRUTL^^0^B26604531
"BLD",919,"KRN",9.8,"NM","B","XTPMKPTC",2)

"BLD",919,"KRN",9.8,"NM","B","XTPMNEX7",3)

"BLD",919,"KRN",9.8,"NM","B","XTPMSTA2",1)

"BLD",919,"KRN",9.8,"NM","B","XTPMSTAT",4)

"BLD",919,"KRN",9.8,"NM","B","XTRUTL",6)

"BLD",919,"KRN",9.8,"NM","B","XTSUMBLD",5)

"BLD",919,"KRN",19,0)
19
"BLD",919,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",919,"KRN",19,"NM",1,0)
XTSUMBLD-CHECK^^0
"BLD",919,"KRN",19,"NM","B","XTSUMBLD-CHECK",1)

"BLD",919,"KRN",19.1,0)
19.1
"BLD",919,"KRN",101,0)
101
"BLD",919,"KRN",409.61,0)
409.61
"BLD",919,"KRN",771,0)
771
"BLD",919,"KRN",870,0)
870
"BLD",919,"KRN",8989.51,0)
8989.51
"BLD",919,"KRN",8989.52,0)
8989.52
"BLD",919,"KRN",8994,0)
8994
"BLD",919,"KRN","B",.4,.4)

"BLD",919,"KRN","B",.401,.401)

"BLD",919,"KRN","B",.402,.402)

"BLD",919,"KRN","B",.403,.403)

"BLD",919,"KRN","B",.5,.5)

"BLD",919,"KRN","B",.84,.84)

"BLD",919,"KRN","B",3.6,3.6)

"BLD",919,"KRN","B",3.8,3.8)

"BLD",919,"KRN","B",9.2,9.2)

"BLD",919,"KRN","B",9.8,9.8)

"BLD",919,"KRN","B",19,19)

"BLD",919,"KRN","B",19.1,19.1)

"BLD",919,"KRN","B",101,101)

"BLD",919,"KRN","B",409.61,409.61)

"BLD",919,"KRN","B",771,771)

"BLD",919,"KRN","B",870,870)

"BLD",919,"KRN","B",8989.51,8989.51)

"BLD",919,"KRN","B",8989.52,8989.52)

"BLD",919,"KRN","B",8994,8994)

"BLD",919,"QUES",0)
^9.62^^
"KRN",19,522,-1)
0^1
"KRN",19,522,0)
XTSUMBLD-CHECK^Calculate and Show Checksum Values^^R^^^^^^^^KERNEL
"KRN",19,522,1,0)
^^3^3^3060321^
"KRN",19,522,1,1,0)
This option calls CHCKSUM^XTSUMBLD to calculate and show the checksum
"KRN",19,522,1,2,0)
value for one or more routines in the current account.  This value
"KRN",19,522,1,3,0)
will be referenced in Patch Module description for routine patches.
"KRN",19,522,25)
CHCKSUM^XTSUMBLD
"KRN",19,522,"U")
CALCULATE AND SHOW CHECKSUM VA
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",6,-1)
1^1
"PKG",6,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP^
"PKG",6,20,0)
^9.402P^^0
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.3^3040428^2970513^2
"PKG",6,22,1,"PAH",1,0)
100^3060329
"PKG",6,22,1,"PAH",1,1,0)
^^2^2^3060329
"PKG",6,22,1,"PAH",1,1,1,0)
Kernel Toolkit patch XT*7.3*100 VistA Patch Monitor. Please 
"PKG",6,22,1,"PAH",1,1,2,0)
refer to the Description in Forum Patch Module for details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","XTPMKPTC")
0^2^B75764182^B75338501
"RTN","XTPMKPTC",1,0)
XTPMKPTC ;OAK/BP - PATCH MONITOR FUNCTIONS ; 2/7/06
"RTN","XTPMKPTC",2,0)
 ;;7.3;TOOLKIT;**98,100**; Apr 25, 1995;Build 4
"RTN","XTPMKPTC",3,0)
 ;
"RTN","XTPMKPTC",4,0)
SRVR N XMB X XMREC
"RTN","XTPMKPTC",5,0)
 S XTBMLN1=$G(^XMB(3.9,XMZ,0))
"RTN","XTPMKPTC",6,0)
 I XTBMLN1["COMPLIANCE DATE CHANGE" G CKCMPDT
"RTN","XTPMKPTC",7,0)
 ;
"RTN","XTPMKPTC",8,0)
CHECK I XTBMLN1["TEST" G EXIT
"RTN","XTPMKPTC",9,0)
 I XTBMLN1["COMPLIANCE DATE CHANGE" G CKCMPDT
"RTN","XTPMKPTC",10,0)
 I XTBMLN1["Entered in error patch" DO  I $D(OUT) K OUT G EXIT
"RTN","XTPMKPTC",11,0)
 .F XTBX=1:1:8 S XTBY=$G(^XMB(3.9,XMZ,2,+XTBX,0)) I XTBY["The patch is" DO  Q:$D(OUT)
"RTN","XTPMKPTC",12,0)
 ..K OUT S X=$P(XTBY,"'",2),DIC(0)="QLM",DIC="^XPD(9.9," D ^DIC I Y<0 S OUT=1 Q
"RTN","XTPMKPTC",13,0)
 ..S DIK=DIC,DA=+Y D ^DIK K DIC,DIK,DA,XTBX,XTBY,Y,X S OUT=1 Q
"RTN","XTPMKPTC",14,0)
 I XTBMLN1'["SEQ #"!(XTBMLN1'["National Patch Module") G EXIT
"RTN","XTPMKPTC",15,0)
 ;
"RTN","XTPMKPTC",16,0)
CKCMPDT D CMPDTCG^XTPMKPCF I $D(XTBCMDCG) K XTBCMDCG G EXIT ;compliance date chg check
"RTN","XTPMKPTC",17,0)
 S XTBPTYPE=1 ;assume NON-KIDS until verified
"RTN","XTPMKPTC",18,0)
 F XTBX=0:0 S XTBX=$O(^XMB(3.9,XMZ,2,XTBX)) Q:XTBX=""!(+XTBX=0)  S XTBY=$G(^XMB(3.9,XMZ,2,XTBX,0)) I XTBY["$KID" DO
"RTN","XTPMKPTC",19,0)
 .S XTBZ=$O(^XMB(3.9,XMZ,2,XTBX)) I $G(^XMB(3.9,XMZ,2,XTBZ,0))["**INSTALL NAME**" S XTBPTYPE="",XTBX=9999999 Q
"RTN","XTPMKPTC",20,0)
 ;
"RTN","XTPMKPTC",21,0)
EXTINFO S (XTBDESG,XTBPKG,XTBPRIO,XTBVER,XTBSEQ,XTBSUB)=""
"RTN","XTPMKPTC",22,0)
 F  X XMREC Q:XMER<0!(XMRG["Description")  DO  Q:$D(NOFILE)
"RTN","XTPMKPTC",23,0)
 .K NOFILE
"RTN","XTPMKPTC",24,0)
 .Q:XMRG["====="
"RTN","XTPMKPTC",25,0)
 .I XMRG["Designation" S (XTBDESG,XTBINST)=$P(XMRG,"Designation: ",2) Q:$D(NOFILE)  DO
"RTN","XTPMKPTC",26,0)
 ..S XTBY=$P(XTBDESG,"*",2) I XTBY'?1.2N1".".N S XTBY=XTBY_".0",$P(XTBINST,"*",2)=XTBY
"RTN","XTPMKPTC",27,0)
 .I XTBDESG="" S NOFILE=1 Q
"RTN","XTPMKPTC",28,0)
 .I $D(^XPD(9.9,"B",XTBDESG)) S NOFILE=1 Q  ; already done
"RTN","XTPMKPTC",29,0)
 .I XMRG["Package" DO
"RTN","XTPMKPTC",30,0)
 ..S XTBPKG=$P(XMRG,"Package : ",2),XTBPKG=$P(XTBPKG,"Priority: ",1),XTBPKG=$E(XTBPKG,1,35)
"RTN","XTPMKPTC",31,0)
 ..S XTBX=$L(XTBPKG)
"RTN","XTPMKPTC",32,0)
 ..F XX=XTBX:-1 S XTBY=$E(XTBPKG,XX,XX) Q:($A(XTBY)>64)!(XTBY="")  I $A(XTBY)=32 S $E(XTBPKG,XX,XX)="z"
"RTN","XTPMKPTC",33,0)
 ..I XTBPKG["z" S XTBPKG=$P(XTBPKG,"z",1)
"RTN","XTPMKPTC",34,0)
 .I XMRG["Priority" S XTBPRIO=$P(XMRG,"Priority: ",2) DO
"RTN","XTPMKPTC",35,0)
 ..S XTBPRIO=$P(XTBPRIO," ",1) S X=XTBPRIO X ^%ZOSF("UPPERCASE") S XTBPRIO=X
"RTN","XTPMKPTC",36,0)
 .I XMRG["Version" S XTBVER=$P(XMRG,"Version: ",1) DO
"RTN","XTPMKPTC",37,0)
 ..S XTBSEQ=$P(XTBVER,"#",2),XTBSEQ=$P(XTBSEQ," ",1)
"RTN","XTPMKPTC",38,0)
 ..S XTBVER=$P(XTBVER,"Version : ",2),XTBVER=+XTBVER
"RTN","XTPMKPTC",39,0)
 .I XMRG["Compliance Date:" S XTBCMPDT=$P(XMRG,"Compliance Date: ",2)
"RTN","XTPMKPTC",40,0)
 .I XMRG["Subject" S XTBSUB=$P(XMRG,"Subject: ",2),XTBSUB=$E(XTBSUB,1,50),XTBSUB=$TR(XTBSUB,":;","--")
"RTN","XTPMKPTC",41,0)
 G:$D(NOFILE) EXIT
"RTN","XTPMKPTC",42,0)
 ;
"RTN","XTPMKPTC",43,0)
FILE K DO,DD S (DIC,DIE)="^XPD(9.9,",DIC(0)="M",X=XTBDESG
"RTN","XTPMKPTC",44,0)
 S XTBRCPDT=$G(^XMB(3.9,XMZ,.6)) I XTBRCPDT="" S XTBRCPDT=DT
"RTN","XTPMKPTC",45,0)
 S DIC("DR")="1////"_XTBRCPDT_";2///"_XTBPRIO_";3///"_XTBPKG_";4////"_XTBSEQ_";5////"_XTBVER_";6///"_XTBSUB_";7///"_XTBINST_";8///"_XTBCMPDT_";11////"_XTBPTYPE
"RTN","XTPMKPTC",46,0)
 D FILE^DICN
"RTN","XTPMKPTC",47,0)
 ;
"RTN","XTPMKPTC",48,0)
EXIT G EXITA^XTPMKPCF
"RTN","XTPMKPTC",49,0)
 ;
"RTN","XTPMKPTC",50,0)
NIGHT S XTBPURGI=$P($G(^XPD(9.95,1,0)),U,3) ;purge y/n
"RTN","XTPMKPTC",51,0)
 K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",52,0)
 S NIGHT=1 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",53,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",54,0)
 .K XTBKILLD
"RTN","XTPMKPTC",55,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)) Q:XTBDTA=""
"RTN","XTPMKPTC",56,0)
 .S XTBINST=$P(XTBDTA,U,8) Q:XTBINST=""
"RTN","XTPMKPTC",57,0)
 .S XTBPTYPE=$P(XTBDTA,U,10)
"RTN","XTPMKPTC",58,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",59,0)
 .I $P($G(^XPD(9.7,+XTBXX,0)),U,9)=3!(XTBPTYPE=1&($P(XTBDTA,U,11)]"")),XTBPURGI=1 DO  Q:$D(XTBKILLD)  ; installed, check purge flag
"RTN","XTPMKPTC",60,0)
 ..S DA=XTBDA,DIK="^XPD(9.9," D ^DIK S XTBKILLD=1 K DA,DIK Q
"RTN","XTPMKPTC",61,0)
 .I XTBXX]"",XTBPTYPE=1 S XTBPTYPE="",$P(^XPD(9.9,XTBDA,0),U,10)="" ;found In INSTALL
"RTN","XTPMKPTC",62,0)
 .Q:XTBPTYPE=1&($P(XTBDTA,U,11)]"")  ;non-kids, has install date  
"RTN","XTPMKPTC",63,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",64,0)
 .I (DT>$P(XTBDTA,U,9)) D SET
"RTN","XTPMKPTC",65,0)
 I '$D(^TMP($J,9,0)) K ^TMP($J) S ^TMP($J,3,0)="",^TMP($J,4,0)="    No Delinquent Patches were found."
"RTN","XTPMKPTC",66,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",67,0)
 I XTBCNT>0 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",68,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",69,0)
 S XMSUB="Patch Monitor Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",70,0)
 N DUZ S XMDUZ=.5,XMTEXT="^TMP($J,",XMY("G.XTPM PATCH MONITOR")="",XMY(.5)="" D ^XMD
"RTN","XTPMKPTC",71,0)
 ; purge old data
"RTN","XTPMKPTC",72,0)
 I +XTBPURGI=0 D ^XTPMKPP
"RTN","XTPMKPTC",73,0)
 G EXIT
"RTN","XTPMKPTC",74,0)
 ;
"RTN","XTPMKPTC",75,0)
SET S XTBPTNM=$P(XTBDTA,U,1),XTBSUBJ=$E($P(XTBDTA,U,7),1,20)
"RTN","XTPMKPTC",76,0)
 S X=$P(XTBDTA,U,3),XTBPRIO=$S(X="m":"Mandatory",X="e":"Emergency",1:"Unknown")
"RTN","XTPMKPTC",77,0)
 S (X1,Y)=$P(XTBDTA,U,2) X ^DD("DD") S XTBRECPT=Y
"RTN","XTPMKPTC",78,0)
 S (Y,YY1)=$P(XTBDTA,U,9) X ^DD("DD") S XTBINSTX=Y ; compliance date
"RTN","XTPMKPTC",79,0)
 I YY1<DT,'$D(NIGHT) S XTBINSTX=Y_" *"
"RTN","XTPMKPTC",80,0)
 S XTBPKG=$P(XTBPTNM,"*",1),XTBPKGPT=$O(^DIC(9.4,"C",XTBPKG,0))
"RTN","XTPMKPTC",81,0)
 S XTBPCTVR=+$P(XTBPTNM,"*",2),XTBPLVER=+$G(^DIC(9.4,+XTBPKGPT,"VERSION"))
"RTN","XTPMKPTC",82,0)
 I XTBPCTVR>XTBPLVER,XTBPLVER>0 S XTBINSTX="Future Version"
"RTN","XTPMKPTC",83,0)
 I XTBPCTVR>XTBPLVER,XTBPLVER=0 S $P(^XPD(9.9,XTBDA,0),U,10)=1,XTBINSTX="CompleteByHand"
"RTN","XTPMKPTC",84,0)
 I XTBPCTVR=999 S XTBINSTX="CompleteByHand" ;mainly new Mailman domains
"RTN","XTPMKPTC",85,0)
 I XTBINSTX="Future Version"&($D(NIGHT)) Q
"RTN","XTPMKPTC",86,0)
 I XTBINSTX="Future Version"&($D(XTBPSTD)) Q
"RTN","XTPMKPTC",87,0)
 S XTBLN=XTBLN+1 ; first line=9
"RTN","XTPMKPTC",88,0)
 S XTBCNT=XTBCNT+1
"RTN","XTPMKPTC",89,0)
 S XTBDTA=""
"RTN","XTPMKPTC",90,0)
 S $E(XTBDTA,1)=XTBPTNM,$E(XTBDTA,15)=XTBSUBJ,$E(XTBDTA,38)=XTBPRIO,$E(XTBDTA,51)=XTBRECPT,$E(XTBDTA,64)=XTBINSTX
"RTN","XTPMKPTC",91,0)
 S ^TMP($J,XTBLN,0)=XTBDTA,XTBLN=XTBLN+1
"RTN","XTPMKPTC",92,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",93,0)
 Q
"RTN","XTPMKPTC",94,0)
 ;
"RTN","XTPMKPTC",95,0)
TEXT S ^TMP($J,1,0)=""
"RTN","XTPMKPTC",96,0)
 S ^TMP($J,2,0)="The following patches are not installed at this site and are past the"
"RTN","XTPMKPTC",97,0)
 S ^TMP($J,3,0)="designated installation time:"
"RTN","XTPMKPTC",98,0)
 S ^TMP($J,4,0)=""
"RTN","XTPMKPTC",99,0)
 S ^TMP($J,5,0)="                                                               Compliance"
"RTN","XTPMKPTC",100,0)
 S ^TMP($J,6,0)="Patch #       Subject                Priority     Recpt Date   Date"
"RTN","XTPMKPTC",101,0)
 S ^TMP($J,7,0)="-------       -------                --------     ----- ----   ----------"
"RTN","XTPMKPTC",102,0)
 S ^TMP($J,8,0)=""
"RTN","XTPMKPTC",103,0)
 Q
"RTN","XTPMKPTC",104,0)
 ;
"RTN","XTPMKPTC",105,0)
REG ; regular notification
"RTN","XTPMKPTC",106,0)
 K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",107,0)
 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",108,0)
 S ^TMP($J,2,0)="The following patches are uninstalled at this site:" K ^TMP($J,3,0)
"RTN","XTPMKPTC",109,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",110,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8)
"RTN","XTPMKPTC",111,0)
 .Q:XTBDTA=""!(XTBINST="")  ;no data or no install name
"RTN","XTPMKPTC",112,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",113,0)
 .Q:$P(XTBDTA,U,10)=1&($P(XTBDTA,U,11)]"")  ;non-kids
"RTN","XTPMKPTC",114,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",115,0)
 .D SET
"RTN","XTPMKPTC",116,0)
 I '$D(^TMP($J,9,0)) G EXIT
"RTN","XTPMKPTC",117,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",118,0)
 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",119,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",120,0)
 S XMSUB="Uninstalled Patch Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",121,0)
 N DUZ K XMY
"RTN","XTPMKPTC",122,0)
 S XMDUZ=.5,XMTEXT="^TMP($J," D MG,^XMD
"RTN","XTPMKPTC",123,0)
 G EXIT
"RTN","XTPMKPTC",124,0)
 ;
"RTN","XTPMKPTC",125,0)
RPT W @IOF,!,"Complete Uninstalled Patch Report for "_^DD("SITE"),!!!
"RTN","XTPMKPTC",126,0)
 S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMKPTC",127,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE="",ZTRTN="RPT1^XTPMKPTC",ZTDESC="Uninstalled Patch Report" D ^%ZTLOAD D HOME^%ZIS
"RTN","XTPMKPTC",128,0)
 I $D(ZTSK) W !,"Queued as task# ",ZTSK,!! H 2 G EXIT
"RTN","XTPMKPTC",129,0)
 ;
"RTN","XTPMKPTC",130,0)
RPT1 U IO K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",131,0)
 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",132,0)
 K ^TMP($J,2,0),^TMP($J,3,0)
"RTN","XTPMKPTC",133,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",134,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8) Q:XTBDTA=""!(XTBINST="")  ; no data or no install name
"RTN","XTPMKPTC",135,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",136,0)
 .Q:$P(XTBDTA,U,10)=1&($P(XTBDTA,U,11)]"")  ;non-kids
"RTN","XTPMKPTC",137,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",138,0)
 .D SET
"RTN","XTPMKPTC",139,0)
 I '$D(^TMP($J,9,0)) S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1,^TMP($J,XTBLN,0)="     Nothing to report",XTBLN=XTBLN+1
"RTN","XTPMKPTC",140,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",141,0)
 I XTBCNT>0 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",142,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",143,0)
 S PG=1,XTBHDR="Uninstalled Patch Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",144,0)
 W:IOST?1"C-".E @IOF W !,XTBHDR,?(IOM-12),"Page: ",PG,!
"RTN","XTPMKPTC",145,0)
 F XTBLN=0:0 S XTBLN=$O(^TMP($J,XTBLN)) Q:XTBLN=""  W ^TMP($J,XTBLN,0),! I $Y>(IOSL-5) S PG=PG+1 D PAUSE W @IOF,!,XTBHDR,?(IOM-12),"Page: ",PG,!!
"RTN","XTPMKPTC",146,0)
 G EXIT
"RTN","XTPMKPTC",147,0)
 ;
"RTN","XTPMKPTC",148,0)
PASTDUE W @IOF,!,"Past Due Patch Report for "_^DD("SITE"),!!!
"RTN","XTPMKPTC",149,0)
 S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMKPTC",150,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE="",ZTRTN="PASTD1^XTPMKPTC",ZTDESC="Past Due Patch Report" D ^%ZTLOAD D HOME^%ZIS
"RTN","XTPMKPTC",151,0)
 I $D(ZTSK) W !,"Queued as task# ",ZTSK,!! H 2 G EXIT
"RTN","XTPMKPTC",152,0)
 ;
"RTN","XTPMKPTC",153,0)
PASTD1 U IO K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",154,0)
 S XTBPSTD=1
"RTN","XTPMKPTC",155,0)
 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",156,0)
 K ^TMP($J,2,0),^TMP($J,3,0)
"RTN","XTPMKPTC",157,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",158,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8) Q:XTBDTA=""!(XTBINST="")
"RTN","XTPMKPTC",159,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",160,0)
 .Q:$P(XTBDTA,U,10)=1&($P(XTBDTA,U,11)]"")  ;non-kids
"RTN","XTPMKPTC",161,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",162,0)
 .S XTBCOMPD=$P(XTBDTA,U,9) Q:XTBCOMPD'<DT
"RTN","XTPMKPTC",163,0)
 .D SET
"RTN","XTPMKPTC",164,0)
 I '$D(^TMP($J,9,0)) S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1,^TMP($J,XTBLN,0)="     Nothing to report",XTBLN=XTBLN+1
"RTN","XTPMKPTC",165,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",166,0)
 I XTBCNT>0 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",167,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",168,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",169,0)
 S PG=1,XTBHDR="Past Due Patch Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",170,0)
 W:IOST?1"C-".E @IOF W !,XTBHDR,?(IOM-12),"Page: ",PG,!
"RTN","XTPMKPTC",171,0)
 F XTBLN=0:0 S XTBLN=$O(^TMP($J,XTBLN)) Q:XTBLN=""  W ^TMP($J,XTBLN,0),! I $Y>(IOSL-5) S PG=PG+1 D PAUSE W @IOF,!,XTBHDR,?(IOM-12),"Page: ",PG,!!
"RTN","XTPMKPTC",172,0)
 K XTBPSTD G EXIT
"RTN","XTPMKPTC",173,0)
 ;
"RTN","XTPMKPTC",174,0)
PAUSE W !,"Press RETURN to continue or '^' to exit: " R XTBANS:DTIME
"RTN","XTPMKPTC",175,0)
 I XTBANS["^" S XTBLN=9999
"RTN","XTPMKPTC",176,0)
 Q
"RTN","XTPMKPTC",177,0)
 ;
"RTN","XTPMKPTC",178,0)
MG F XTBMG=0:0 S XTBMG=$O(^XPD(9.95,1,1,"B",XTBMG)) Q:XTBMG=""  DO
"RTN","XTPMKPTC",179,0)
 .S XTBMGN=$P(^XMB(3.8,XTBMG,0),U)
"RTN","XTPMKPTC",180,0)
 .S XMY("G."_XTBMGN)=""
"RTN","XTPMKPTC",181,0)
 S XMY("G.XTPM PATCH MONITOR USER")="",XMY(.5)=""
"RTN","XTPMKPTC",182,0)
 Q
"RTN","XTPMNEX7")
0^3^B12616723^B12374893
"RTN","XTPMNEX7",1,0)
XTPMNEX7 ;OAK/BP - PATCHES DUE IN NEXT 7 DAYS ; 2/7/06
"RTN","XTPMNEX7",2,0)
 ;;7.3;TOOLKIT;**98,100**; Apr 25, 1995;Build 4
"RTN","XTPMNEX7",3,0)
 ;
"RTN","XTPMNEX7",4,0)
RPT S XTBHDR="Patches Due Within Seven Days for "_^DD("SITE")
"RTN","XTPMNEX7",5,0)
 S XTBBDT=3010101,X="T+7",%DT="" D ^%DT S XTBEDT=Y
"RTN","XTPMNEX7",6,0)
 W @IOF,!,XTBHDR,!!! S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMNEX7",7,0)
 I $D(IO("Q")) S ZTIO=ION,ZTRTN="RPT1^XTPMNEX7",ZTDESC=XTBHDR,ZTSAVE("XTB*")="" D ^%ZTLOAD D HOME^%ZIS
"RTN","XTPMNEX7",8,0)
 I $D(ZTSK) W !,"Queued as task# ",ZTSK,!! H 2 G EXIT
"RTN","XTPMNEX7",9,0)
 ;
"RTN","XTPMNEX7",10,0)
RPT1 U IO K ^TMP($J) S XTBX="",(XTBCNT,XTBLN)=0
"RTN","XTPMNEX7",11,0)
 S XTBUP="I $Y>(IOSL-5) S PG=PG+1 D PAUSE W @IOF,!,XTBHDR,?(IOM-12),""Page: "",PG,!!"
"RTN","XTPMNEX7",12,0)
 S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMNEX7",13,0)
 F XTBX=XTBBDT:0 S XTBX=$O(^XPD(9.9,"D",XTBX)) Q:XTBX=""!(XTBX>XTBEDT)  DO
"RTN","XTPMNEX7",14,0)
 .F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"D",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMNEX7",15,0)
 ..S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8) Q:XTBDTA=""!(XTBINST="")  ; no data or no install name
"RTN","XTPMNEX7",16,0)
 ..Q:$P(XTBDTA,U,11)]""  ; non-kids install date
"RTN","XTPMNEX7",17,0)
 ..S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))["TEST" S XTBXX=""
"RTN","XTPMNEX7",18,0)
 ..Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3  ; 3 = installed
"RTN","XTPMNEX7",19,0)
 ..D SET
"RTN","XTPMNEX7",20,0)
 S PG=0 D HDR S (XTBCPLDT,XTBPTNM,OLXTBCPL)=""
"RTN","XTPMNEX7",21,0)
 I '$D(^TMP($J)) W !!,?10,"Nothing to report",! G PREXIT
"RTN","XTPMNEX7",22,0)
 F  S XTBCPLDT=$O(^TMP($J,XTBCPLDT)) Q:XTBCPLDT=""  DO
"RTN","XTPMNEX7",23,0)
 .F  S XTBPTNM=$O(^TMP($J,XTBCPLDT,XTBPTNM)) Q:XTBPTNM=""  DO
"RTN","XTPMNEX7",24,0)
 ..F XTBLN=0:0 S XTBLN=$O(^TMP($J,XTBCPLDT,XTBPTNM,XTBLN)) Q:XTBLN=""  DO
"RTN","XTPMNEX7",25,0)
 ...S XTBDTA=^TMP($J,XTBCPLDT,XTBPTNM,XTBLN)
"RTN","XTPMNEX7",26,0)
 ...S XTBSUBJ=$P(XTBDTA,U),XTBPRIO=$P(XTBDTA,U,2),XTBRECPT=$P(XTBDTA,U,3)
"RTN","XTPMNEX7",27,0)
 ...I OLXTBCPL'=XTBCPLDT W !
"RTN","XTPMNEX7",28,0)
 ...S Y=XTBCPLDT X ^DD("DD") S XTBCPLD1=Y
"RTN","XTPMNEX7",29,0)
 ...W XTBCPLD1,?13,XTBPTNM,?27,XTBSUBJ,?55,XTBPRIO,?67,XTBRECPT,! S XTBCNT=XTBCNT+1
"RTN","XTPMNEX7",30,0)
 ...S OLXTBCPL=XTBCPLDT
"RTN","XTPMNEX7",31,0)
 ...X XTBUP
"RTN","XTPMNEX7",32,0)
 X XTBUP
"RTN","XTPMNEX7",33,0)
 ;
"RTN","XTPMNEX7",34,0)
PREXIT W !!,"Number of patches: ",XTBCNT,!
"RTN","XTPMNEX7",35,0)
 I IOST?1"C-".E W !,"Press RETURN to end  " R ANS:DTIME
"RTN","XTPMNEX7",36,0)
 ;
"RTN","XTPMNEX7",37,0)
EXIT D ^%ZISC
"RTN","XTPMNEX7",38,0)
 K ^TMP($J),%ZIS,ANS,XTBANS,XTBCNT,XTBCPLDT,XTBDA,XTBINST,XTBLN,XTBPKG,XTBPRIO,XTBPTNM
"RTN","XTPMNEX7",39,0)
 K XTBRECPT,XTBRUNDT,XTBSUBJ,XTBX,XTBXX,XTBDTA,XTBHDR,OLXTBCPL,PG,XTBPKFLV,XTBPKPTR,POP,XTBPTCVR,X,X1
"RTN","XTPMNEX7",40,0)
 K Y,YY1,ZTDESC,ZTSK,ZTIO,ZTRTN,ZTSAVE,XTBCPLD1,%DT,XTBBDT,XTBEDT,XTBPSITE,XTBUP,IOP,XMY
"RTN","XTPMNEX7",41,0)
 Q
"RTN","XTPMNEX7",42,0)
 ;
"RTN","XTPMNEX7",43,0)
SET S XTBPTNM=$P(XTBDTA,U,1),XTBSUBJ=$E($P(XTBDTA,U,7),1,26)
"RTN","XTPMNEX7",44,0)
 S X=$P(XTBDTA,U,3),XTBPRIO=$S(X="m":"Mandatory",X="e":"Emergency",1:"Unknown")
"RTN","XTPMNEX7",45,0)
 S Y=$P(XTBDTA,U,2) X ^DD("DD") S XTBRECPT=Y
"RTN","XTPMNEX7",46,0)
 S XTBCPLDT=$P(XTBDTA,U,9) ; compliance date
"RTN","XTPMNEX7",47,0)
 S XTBLN=XTBLN+1,^TMP($J,XTBCPLDT,XTBPTNM,XTBLN)=XTBSUBJ_U_XTBPRIO_U_XTBRECPT
"RTN","XTPMNEX7",48,0)
 Q
"RTN","XTPMNEX7",49,0)
 ;
"RTN","XTPMNEX7",50,0)
HDR I PG<1,IOST?1"C-".E W @IOF
"RTN","XTPMNEX7",51,0)
 S PG=PG+1
"RTN","XTPMNEX7",52,0)
 W:PG>1 @IOF W !,XTBHDR,?(IOM-12),"Page: ",PG,!,"Run date: "_XTBRUNDT,!!!
"RTN","XTPMNEX7",53,0)
 W "Compliance",!,"Date",?13,"Patch #",?27,"Subject",?55,"Priority",?67,"Recpt Date",!
"RTN","XTPMNEX7",54,0)
 W "----------",?13,"-------",?27,"-------",?55,"--------",?67,"----- ----",!
"RTN","XTPMNEX7",55,0)
 Q
"RTN","XTPMNEX7",56,0)
 ;
"RTN","XTPMNEX7",57,0)
PAUSE W !,"Press RETURN to continue or '^' to exit: " R XTBANS:DTIME
"RTN","XTPMNEX7",58,0)
 I XTBANS[U S (XTBLN,XTBCPLDT,XTBPTNM)="ZZZZZ"
"RTN","XTPMNEX7",59,0)
 Q
"RTN","XTPMNEX7",60,0)
 ;
"RTN","XTPMNEX7",61,0)
SITETSK ;compile a list from sites
"RTN","XTPMNEX7",62,0)
 S XTBPSITE=1,IOP="P-MESSAGE;80;60",XMY("TRAN.BA@NXT.KERNEL.FO-OAKLAND.MED.VA.GO")=""
"RTN","XTPMNEX7",63,0)
 S XTBHDR="Patches Due Within Eight Days for "_^DD("SITE")
"RTN","XTPMNEX7",64,0)
 S XTBBDT=3010101,X="T+8",%DT="" D ^%DT S XTBEDT=Y
"RTN","XTPMNEX7",65,0)
 G RPT1
"RTN","XTPMSTA2")
0^1^B20526817^B20410283
"RTN","XTPMSTA2",1,0)
XTPMSTA2 ;OAK/BP - PRINT PATCH STATISTICS BY COMPLIANCE DATE; [1/4/06 9:33am]
"RTN","XTPMSTA2",2,0)
 ;;7.3;TOOLKIT;**98,100**; Apr 25, 1995;Build 4
"RTN","XTPMSTA2",3,0)
 ;
"RTN","XTPMSTA2",4,0)
 S IOP="HOME" D ^%ZIS K IOP
"RTN","XTPMSTA2",5,0)
EN W @IOF,"Patch Monitor Statistics By Compliance Date",!!!
"RTN","XTPMSTA2",6,0)
 ;
"RTN","XTPMSTA2",7,0)
DATE W ! S %DT="AEP"
"RTN","XTPMSTA2",8,0)
 S %DT("A")="Enter BEGINNING Compliance date: " D ^%DT G:Y<0 EXIT S XTBBDT=Y X ^DD("DD") S XTBBDT1=Y
"RTN","XTPMSTA2",9,0)
 S %DT="AE",%DT("A")="     and ENDING Compliance date: " D ^%DT G:Y<0 EXIT S XTBEDT=Y X ^DD("DD") S XTBEDT1=Y
"RTN","XTPMSTA2",10,0)
 I XTBEDT<XTBBDT W !!,$C(7),"Starting date is later than ending date.",!! H 2 G DATE
"RTN","XTPMSTA2",11,0)
 W !!,"Do you want to see the patch data" S %=2 D YN^DICN S XTBVIEW=%
"RTN","XTPMSTA2",12,0)
 ;
"RTN","XTPMSTA2",13,0)
DEV W !! S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMSTA2",14,0)
 I $D(IO("Q")) S ZTIO=ION,ZTRTN="SORT^XTPMSTA2",ZTSAVE("XTB*")="",ZTDESC="Patch Monitor Statistics By Compliance Date" D ^%ZTLOAD D HOME^%ZIS
"RTN","XTPMSTA2",15,0)
 I $D(ZTSK) W !,"Queued as task #",ZTSK H 2 G EXIT
"RTN","XTPMSTA2",16,0)
 ;
"RTN","XTPMSTA2",17,0)
 ; sort patches by compliance date
"RTN","XTPMSTA2",18,0)
SORT U IO K ^TMP($J)
"RTN","XTPMSTA2",19,0)
 F XTBCPLDT=(XTBBDT-.0001):0 S XTBCPLDT=$O(^XPD(9.9,"D",XTBCPLDT)) Q:XTBCPLDT=""!(XTBCPLDT>XTBEDT)  DO
"RTN","XTPMSTA2",20,0)
 .F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"D",XTBCPLDT,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMSTA2",21,0)
 ..S XTBDTA=$G(^XPD(9.9,XTBDA,0)) Q:XTBDTA=""
"RTN","XTPMSTA2",22,0)
 ..S XTBPTNAM=$P(XTBDTA,U,1),XTBNMSP=$P($P(XTBDTA,U,4)," - ",1) Q:XTBNMSP=""  ;parent package missing in file
"RTN","XTPMSTA2",23,0)
 ..S XTBRELDT=$P(XTBDTA,U,2),XTBPRIOR=$P(XTBDTA,U,3)
"RTN","XTPMSTA2",24,0)
 ..S ^TMP($J,XTBCPLDT,XTBPTNAM,XTBDA)=XTBRELDT_U_XTBPRIOR
"RTN","XTPMSTA2",25,0)
PRINT ; 
"RTN","XTPMSTA2",26,0)
 S Y=DT X ^DD("DD") S XTBCURDT=Y
"RTN","XTPMSTA2",27,0)
 K XTBLINE S $P(XTBLINE,"-",(IOM-2))="-"
"RTN","XTPMSTA2",28,0)
 S PG=0 D HDR ; first header
"RTN","XTPMSTA2",29,0)
 S XTBPTNAM="",(XTBTPTCH,XTBTLATE)=0
"RTN","XTPMSTA2",30,0)
 F XTBCPLDT=0:0 S XTBCPLDT=$O(^TMP($J,XTBCPLDT)) Q:XTBCPLDT=""  F  S XTBPTNAM=$O(^TMP($J,XTBCPLDT,XTBPTNAM)) Q:XTBPTNAM=""  DO  Q:$D(XTBOUT)
"RTN","XTPMSTA2",31,0)
 .F XTBDA=0:0 S XTBDA=$O(^TMP($J,XTBCPLDT,XTBPTNAM,XTBDA)) Q:XTBDA=""  DO  Q:$D(XTBOUT)
"RTN","XTPMSTA2",32,0)
 ..S XTBTPTCH=XTBTPTCH+1
"RTN","XTPMSTA2",33,0)
 ..S XTBDTA=^TMP($J,XTBCPLDT,XTBPTNAM,XTBDA)
"RTN","XTPMSTA2",34,0)
 ..S XTBRELDT=$P(XTBDTA,U),XTBPRIOR=$P(XTBDTA,U,2)
"RTN","XTPMSTA2",35,0)
 ..S XTBRCVDT=$P($G(^XPD(9.9,XTBDA,0)),U,2)
"RTN","XTPMSTA2",36,0)
 ..S XTBPTYPE=$P($G(^XPD(9.9,XTBDA,0)),U,10)
"RTN","XTPMSTA2",37,0)
 ..I +XTBPTYPE=0 S D0=XTBDA D ^XTPMKPCF S XTBINSDT=X K D0
"RTN","XTPMSTA2",38,0)
 ..I +XTBPTYPE=1 S XTBINSDT=$P($G(^XPD(9.9,XTBDA,0)),U,11)
"RTN","XTPMSTA2",39,0)
 ..I XTBINSDT]"" S X1=XTBINSDT,X2=XTBCPLDT D ^%DTC S XTBDAYLT=X
"RTN","XTPMSTA2",40,0)
 ..I XTBINSDT="" S X1=DT,X2=XTBCPLDT D ^%DTC S XTBDAYLT=X
"RTN","XTPMSTA2",41,0)
 ..S Y=XTBINSDT X ^DD("DD") S XTBINSDT=Y
"RTN","XTPMSTA2",42,0)
 ..S Y=XTBCPLDT X ^DD("DD") S XTBCPLDX=Y
"RTN","XTPMSTA2",43,0)
 ..S Y=XTBRELDT X ^DD("DD") S XTBRELDT=Y
"RTN","XTPMSTA2",44,0)
 ..S XTBPRIOR=$S(XTBPRIOR="m":"Mandatory",XTBPRIOR="e":"Emergency",1:"Unknown")
"RTN","XTPMSTA2",45,0)
 ..I XTBVIEW=1 W XTBCPLDX,?14,XTBPTNAM,?27,XTBRELDT,?41,XTBINSDT,?55,XTBPRIOR
"RTN","XTPMSTA2",46,0)
 ..I XTBVIEW=1,XTBDAYLT>0 W ?67,$J(XTBDAYLT,3,0)_$S(XTBDAYLT>1:" days",1:" day")
"RTN","XTPMSTA2",47,0)
 ..I XTBDAYLT>0 S XTBTLATE=XTBTLATE+1
"RTN","XTPMSTA2",48,0)
 ..I XTBVIEW=1 W ! I $Y>(IOSL-6),IOST?1"C-".E D PAUSE Q:$D(XTBOUT)
"RTN","XTPMSTA2",49,0)
 ..I XTBVIEW=1 I $Y>(IOSL-6) D HDR
"RTN","XTPMSTA2",50,0)
 G:$D(XTBOUT) EXIT
"RTN","XTPMSTA2",51,0)
 I $Y>(IOSL-6),IOST?1"C-".E D HDR
"RTN","XTPMSTA2",52,0)
 W !!?6,"Totals patches received for date range: ",XTBTPTCH,!
"RTN","XTPMSTA2",53,0)
 W "Total patches installed past compliance date: ",XTBTLATE,!!
"RTN","XTPMSTA2",54,0)
 S XTBDIVOK=0 I XTBTPTCH>0 S XTBDIVOK=1
"RTN","XTPMSTA2",55,0)
 W ?25,"Delinquent patch % : ",$S(XTBDIVOK=1:$J((XTBTLATE/XTBTPTCH*100),6,2),1:100)_" %",!
"RTN","XTPMSTA2",56,0)
 W ?25,"      Compliance % : ",$S(XTBDIVOK=1:$J(100-(XTBTLATE/XTBTPTCH*100),6,2),1:100)," %",!
"RTN","XTPMSTA2",57,0)
 I IOST?1"C-".E K XTBANS W !!,"Press ENTER to end " R XTBANS:DTIME
"RTN","XTPMSTA2",58,0)
 ;
"RTN","XTPMSTA2",59,0)
EXIT I IOST?1"C-".E W @IOF,!
"RTN","XTPMSTA2",60,0)
 D ^%ZISC
"RTN","XTPMSTA2",61,0)
 K %,%DT,%ZIS,XTBNMSP,XTBANS,XTBBDT,XTBBDT1,XTBCPLDT,XTBCPLDX,XTBDA,XTBEDT,XTBEDT1,XTBDAYLT
"RTN","XTPMSTA2",62,0)
 K XTBINSDT,XTBLINE,XTBNMSP,XTBOLDNM,XTBNMSP,XTBPTNAM,XTBPTYPE,XTBDTA,XTBGPDA
"RTN","XTPMSTA2",63,0)
 K XTBRCVDT,XTBTLATE,XTBTPTCH,D0,DIC,PG,POP,X,X1,X2,Y,ZTDESC,ZTIO,ZTRTN,ZTSAVE,%T,%Y
"RTN","XTPMSTA2",64,0)
 K ^TMP($J),XTBOUT,XTBPGF,XTBOLGRP,ZTSK,XTBRELDT,XTBPRIOR,XTBCURDT,XTBDIVOK,XTBVIEW
"RTN","XTPMSTA2",65,0)
 Q
"RTN","XTPMSTA2",66,0)
 ;
"RTN","XTPMSTA2",67,0)
HDR S PG=PG+1 I IOST?1"P-".E,PG>1 W @IOF
"RTN","XTPMSTA2",68,0)
 I IOST?1"C-".E W @IOF
"RTN","XTPMSTA2",69,0)
 W XTBCURDT S X="Patch Statistical Report for "_^DD("SITE")
"RTN","XTPMSTA2",70,0)
 W ?(IOM-$L(X)\2),X,?(IOM-12),"Page: ",PG,!,?31,"By Compliance Date",!
"RTN","XTPMSTA2",71,0)
 S X="Date range: "_XTBBDT1_" to "_XTBEDT1 W ?(IOM-$L(X)\2),X,!
"RTN","XTPMSTA2",72,0)
 W !,"Compliance",?14,"Patch",?27,"Release",?41,"Install",?67,"# Days",!
"RTN","XTPMSTA2",73,0)
 W "Date",?14,"Number",?27,"Date",?41,"Date",?55,"Priority",?67,"Delinquent",!,XTBLINE,!
"RTN","XTPMSTA2",74,0)
 Q
"RTN","XTPMSTA2",75,0)
 ;
"RTN","XTPMSTA2",76,0)
PAUSE Q:IOST'?1"C-".E
"RTN","XTPMSTA2",77,0)
 K XTBANS,XTBOUT W !!,"Press ENTER to continue or '^' to end " R XTBANS:DTIME
"RTN","XTPMSTA2",78,0)
 I XTBANS[U!('$T) S (XTBNMSP,XTBPTNAM,XTBCPLDT,XTBDA)="99999999",XTBOUT=1
"RTN","XTPMSTA2",79,0)
 Q
"RTN","XTPMSTAT")
0^4^B31144334^B31021874
"RTN","XTPMSTAT",1,0)
XTPMSTAT ;OAK/BP - PRINT PATCH STATISTICS BY REPORT GROUP; 2/7/06
"RTN","XTPMSTAT",2,0)
 ;;7.3;TOOLKIT;**98,100**; Apr 25, 1995;Build 4
"RTN","XTPMSTAT",3,0)
 ;
"RTN","XTPMSTAT",4,0)
 S IOP="HOME" D ^%ZIS K IOP
"RTN","XTPMSTAT",5,0)
EN W @IOF,"Patch Monitor Statistics",!!!
"RTN","XTPMSTAT",6,0)
 W "Please select the REPORTING GROUP.  You may select as many groups as you",!
"RTN","XTPMSTAT",7,0)
 W "wish for each report.  Each group will be reported in a separate section.",!!!
"RTN","XTPMSTAT",8,0)
 K TMP("XTBGRP"),TMP("XTBPKG")
"RTN","XTPMSTAT",9,0)
 N DIC,DA S DIC(0)="AEQM",DIC="^XPD(9.95," D ^DIC S DA(1)=+Y
"RTN","XTPMSTAT",10,0)
 I DA(1)>0 N DIC S DIC(0)="AEQM",DIC="^XPD(9.95,DA(1),2," F  D ^DIC Q:Y<0  DO
"RTN","XTPMSTAT",11,0)
 .I $D(TMP("XTBGRP",$P(Y,U,2))) W $C(7),". . . You already have that one" Q
"RTN","XTPMSTAT",12,0)
 .S TMP("XTBGRP",$P(Y,U,2))=+Y
"RTN","XTPMSTAT",13,0)
 G:X[U EXIT
"RTN","XTPMSTAT",14,0)
 G:'$D(TMP("XTBGRP")) EXIT
"RTN","XTPMSTAT",15,0)
 W !!,"Do you want a new form/screen between REPORTING GROUPS" S %=1 D YN^DICN S XTBPGF=%
"RTN","XTPMSTAT",16,0)
 ;
"RTN","XTPMSTAT",17,0)
DATE W ! S %DT="AEP"
"RTN","XTPMSTAT",18,0)
 S %DT("A")="Enter BEGINNING Compliance date: " D ^%DT G:Y<0 EXIT S XTBBDT=Y X ^DD("DD") S XTBBDT1=Y
"RTN","XTPMSTAT",19,0)
 S %DT="AE",%DT("A")="     and ENDING Compliance date: " D ^%DT G:Y<0 EXIT S XTBEDT=Y X ^DD("DD") S XTBEDT1=Y
"RTN","XTPMSTAT",20,0)
 I XTBEDT<XTBBDT W !!,$C(7),"Starting date is later than ending date.",!! H 2 G DATE
"RTN","XTPMSTAT",21,0)
 ;
"RTN","XTPMSTAT",22,0)
DEV W !! S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMSTAT",23,0)
 I $D(IO("Q")) S ZTIO=ION,ZTRTN="SORT^XTPMSTAT",ZTSAVE("XTB*")="",ZTSAVE("TMP*")="",ZTDESC="Patch Monitor Statistics" D ^%ZTLOAD D HOME^%ZIS
"RTN","XTPMSTAT",24,0)
 I $D(ZTSK) W !,"Queued as task #",ZTSK H 2 G EXIT
"RTN","XTPMSTAT",25,0)
 ;
"RTN","XTPMSTAT",26,0)
 ; sort patches by compliance date
"RTN","XTPMSTAT",27,0)
SORT U IO F XTBCPLDT=(XTBBDT-.0001):0 S XTBCPLDT=$O(^XPD(9.9,"D",XTBCPLDT)) Q:XTBCPLDT=""!(XTBCPLDT>XTBEDT)  DO
"RTN","XTPMSTAT",28,0)
 .F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"D",XTBCPLDT,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMSTAT",29,0)
 ..S XTBDTA=$G(^XPD(9.9,XTBDA,0)) Q:XTBDTA=""
"RTN","XTPMSTAT",30,0)
 ..S XTBPTNAM=$P(XTBDTA,U,1),XTBNMSP=$P($P(XTBDTA,U,4)," - ",1) Q:XTBNMSP=""  ;parent package missing in file
"RTN","XTPMSTAT",31,0)
 ..S XTBRELDT=$P(XTBDTA,U,2),XTBPRIOR=$P(XTBDTA,U,3)
"RTN","XTPMSTAT",32,0)
 ..S TMP("XTBPKG",XTBNMSP,XTBCPLDT,XTBPTNAM,XTBDA)=XTBRELDT_U_XTBPRIOR
"RTN","XTPMSTAT",33,0)
PRINT ; read and print sorted groups
"RTN","XTPMSTAT",34,0)
 S Y=DT X ^DD("DD") S XTBCURDT=Y
"RTN","XTPMSTAT",35,0)
 K XTBLINE S $P(XTBLINE,"-",(IOM-2))="-"
"RTN","XTPMSTAT",36,0)
 S PG=0,XTBGRP="",XTBGRP=$O(TMP("XTBGRP",XTBGRP)) G:XTBGRP="" EXIT D HDR ; first header
"RTN","XTPMSTAT",37,0)
 S (XTBGRP,XTBNMSP,XTBPTNAM,XTBOLDNM,XTBOLGRP)="",(XTBTPTCH,XTBTLATE)=0
"RTN","XTPMSTAT",38,0)
 F  S XTBGRP=$O(TMP("XTBGRP",XTBGRP)) Q:XTBGRP=""  S XTBGPDA=TMP("XTBGRP",XTBGRP)  DO  Q:$D(XTBOUT)
"RTN","XTPMSTAT",39,0)
 .; read param file for monitored groups
"RTN","XTPMSTAT",40,0)
 .F  S XTBNMSP=$O(^XPD(9.95,1,2,XTBGPDA,1,"B",XTBNMSP)) Q:XTBNMSP=""  I $D(TMP("XTBPKG",XTBNMSP)) DO  Q:$D(XTBOUT)
"RTN","XTPMSTAT",41,0)
 ..; read sorted namespaces
"RTN","XTPMSTAT",42,0)
 ..F XTBCPLDT=0:0 S XTBCPLDT=$O(TMP("XTBPKG",XTBNMSP,XTBCPLDT)) Q:XTBCPLDT=""  F  S XTBPTNAM=$O(TMP("XTBPKG",XTBNMSP,XTBCPLDT,XTBPTNAM)) Q:XTBPTNAM=""  DO  Q:$D(XTBOUT)
"RTN","XTPMSTAT",43,0)
 ...F XTBDA=0:0 S XTBDA=$O(TMP("XTBPKG",XTBNMSP,XTBCPLDT,XTBPTNAM,XTBDA)) Q:XTBDA=""  DO  Q:$D(XTBOUT)
"RTN","XTPMSTAT",44,0)
 ....S XTBTPTCH=XTBTPTCH+1
"RTN","XTPMSTAT",45,0)
 ....S XTBDTA=TMP("XTBPKG",XTBNMSP,XTBCPLDT,XTBPTNAM,XTBDA)
"RTN","XTPMSTAT",46,0)
 ....S XTBRELDT=$P(XTBDTA,U),XTBPRIOR=$P(XTBDTA,U,2)
"RTN","XTPMSTAT",47,0)
 ....S XTBRCVDT=$P($G(^XPD(9.9,XTBDA,0)),U,2)
"RTN","XTPMSTAT",48,0)
 ....S XTBPTYPE=$P($G(^XPD(9.9,XTBDA,0)),U,10)
"RTN","XTPMSTAT",49,0)
 ....I +XTBPTYPE=0 S D0=XTBDA D ^XTPMKPCF S XTBINSDT=X K D0
"RTN","XTPMSTAT",50,0)
 ....I +XTBPTYPE=1 S XTBINSDT=$P($G(^XPD(9.9,XTBDA,0)),U,11)
"RTN","XTPMSTAT",51,0)
 ....I XTBINSDT]"" S X1=XTBINSDT,X2=XTBCPLDT D ^%DTC S XTBDAYLT=X
"RTN","XTPMSTAT",52,0)
 ....I XTBINSDT="" S X1=DT,X2=XTBCPLDT D ^%DTC S XTBDAYLT=X
"RTN","XTPMSTAT",53,0)
 ....S XTBGRPHD="Report group: "_XTBGRP
"RTN","XTPMSTAT",54,0)
 ....I XTBOLGRP="",PG=1 W XTBGRPHD,!!
"RTN","XTPMSTAT",55,0)
 ....I XTBOLDNM'="",XTBNMSP'=XTBOLDNM W !
"RTN","XTPMSTAT",56,0)
 ....I XTBOLDNM'="",XTBGRP'=XTBOLGRP,XTBPGF=1 D:IOST?1"C-".E PAUSE Q:$D(XTBOUT)  D HDR W XTBGRPHD,!!
"RTN","XTPMSTAT",57,0)
 ....I XTBOLDNM'="",XTBGRP'=XTBOLGRP,XTBPGF=0 W !,XTBGRPHD,!!
"RTN","XTPMSTAT",58,0)
 ....I $Y>(IOSL-6),IOST?1"C-".E D PAUSE Q:$D(XTBOUT)  D HDR I XTBGRP'=XTBOLGRP W XTBGRPHD,!!
"RTN","XTPMSTAT",59,0)
 ....S Y=XTBINSDT X ^DD("DD") S XTBINSDT=Y
"RTN","XTPMSTAT",60,0)
 ....S Y=XTBCPLDT X ^DD("DD") S XTBCPLDX=Y
"RTN","XTPMSTAT",61,0)
 ....S Y=XTBRELDT X ^DD("DD") S XTBRELDT=Y
"RTN","XTPMSTAT",62,0)
 ....S XTBPRIOR=$S(XTBPRIOR="m":"Mandatory",XTBPRIOR="e":"Emergency",1:"Unknown")
"RTN","XTPMSTAT",63,0)
 ....W XTBCPLDX,?14,XTBPTNAM,?27,XTBRELDT,?41,XTBINSDT,?55,XTBPRIOR
"RTN","XTPMSTAT",64,0)
 ....I XTBDAYLT>0 W ?67,$J(XTBDAYLT,3,0)_$S(XTBDAYLT>1:" days",1:" day") S XTBTLATE=XTBTLATE+1
"RTN","XTPMSTAT",65,0)
 ....W ! S XTBOLDNM=XTBNMSP,XTBOLGRP=XTBGRP
"RTN","XTPMSTAT",66,0)
 ....I $Y>(IOSL-6),IOST?1"C-".E D PAUSE Q:$D(XTBOUT)
"RTN","XTPMSTAT",67,0)
 ....I $Y>(IOSL-6) D HDR I XTBGRP'=XTBOLGRP W XTBGRPHD,!!
"RTN","XTPMSTAT",68,0)
 G:$D(XTBOUT) EXIT
"RTN","XTPMSTAT",69,0)
 I $Y>(IOSL-6),IOST?1"C-".E D HDR
"RTN","XTPMSTAT",70,0)
 W !!?6,"Totals patches received for date range: ",XTBTPTCH,!
"RTN","XTPMSTAT",71,0)
 W "Total patches installed past compliance date: ",XTBTLATE,!!
"RTN","XTPMSTAT",72,0)
 S XTBDIVOK=0 I XTBTPTCH>0 S XTBDIVOK=1
"RTN","XTPMSTAT",73,0)
 W ?25,"Delinquent patch % : ",$S(XTBDIVOK=1:$J((XTBTLATE/XTBTPTCH*100),6,2),1:0)_" %",!
"RTN","XTPMSTAT",74,0)
 W ?25,"      Compliance % : ",$S(XTBDIVOK=1:$J(100-(XTBTLATE/XTBTPTCH*100),6,2),1:0)," %",!
"RTN","XTPMSTAT",75,0)
 I IOST?1"C-".E K XTBANS W !!,"Press ENTER to end " R XTBANS:DTIME
"RTN","XTPMSTAT",76,0)
 ;
"RTN","XTPMSTAT",77,0)
EXIT I IOST?1"C-".E W @IOF,!
"RTN","XTPMSTAT",78,0)
 D ^%ZISC
"RTN","XTPMSTAT",79,0)
 K %,%DT,%ZIS,XTBNMSP,XTBANS,XTBBDT,XTBBDT1,XTBCPLDT,XTBCPLDX,XTBDA,XTBEDT,XTBEDT1,XTBDAYLT,TMP
"RTN","XTPMSTAT",80,0)
 K XTBGRPDA,XTBGRP,XTBINSDT,XTBLINE,XTBNMSP,XTBOLDNM,XTBNMSP,XTBPTNAM,XTBPTYPE,XTBDTA,XTBGPDA
"RTN","XTPMSTAT",81,0)
 K XTBRCVDT,XTBTLATE,XTBTPTCH,D0,DIC,PG,POP,X,X1,X2,Y,ZTDESC,ZTIO,ZTRTN,ZTSAVE,%T,%Y,XTBGRPHD
"RTN","XTPMSTAT",82,0)
 K TMP("XTBGRP"),TMP("XTBPKG"),XTBOUT,XTBPGF,XTBOLGRP,ZTSK,XTBRELDT,XTBPRIOR,XTBCURDT,XTBDIVOK
"RTN","XTPMSTAT",83,0)
 Q
"RTN","XTPMSTAT",84,0)
 ;
"RTN","XTPMSTAT",85,0)
HDR S PG=PG+1 I IOST?1"P-".E,PG>1 W @IOF
"RTN","XTPMSTAT",86,0)
 I IOST?1"C-".E W @IOF
"RTN","XTPMSTAT",87,0)
 W XTBCURDT S X="Patch Statistical Report for "_^DD("SITE")
"RTN","XTPMSTAT",88,0)
 W ?(IOM-$L(X)\2),X,?(IOM-12),"Page: ",PG,!
"RTN","XTPMSTAT",89,0)
 S X="Date range: "_XTBBDT1_" to "_XTBEDT1 W ?(IOM-$L(X)\2),X,!
"RTN","XTPMSTAT",90,0)
 W !,"Compliance",?14,"Patch",?27,"Release",?41,"Install",?67,"# Days",!
"RTN","XTPMSTAT",91,0)
 W "Date",?14,"Number",?27,"Date",?41,"Date",?55,"Priority",?67,"Delinquent",!,XTBLINE,!
"RTN","XTPMSTAT",92,0)
 Q
"RTN","XTPMSTAT",93,0)
 ;
"RTN","XTPMSTAT",94,0)
PAUSE Q:IOST'?1"C-".E
"RTN","XTPMSTAT",95,0)
 K XTBANS,XTBOUT W !!,"Press ENTER to continue or '^' to end " R XTBANS:DTIME
"RTN","XTPMSTAT",96,0)
 I XTBANS[U!('$T) S (XTBNMSP,XTBPTNAM,XTBCPLDT,XTBDA)="ZZZZZZ",XTBOUT=1
"RTN","XTPMSTAT",97,0)
 Q
"RTN","XTRUTL")
0^6^B26604531^B19842806
"RTN","XTRUTL",1,0)
XTRUTL ;ISCSF/RWF - Developer Routine Utilities ;3/21/2006 2:50PM
"RTN","XTRUTL",2,0)
 ;;7.3;TOOLKIT;**20,39,59,66,76,100**;Apr 25, 1995;Build 4
"RTN","XTRUTL",3,0)
 ;
"RTN","XTRUTL",4,0)
 Q  ;No entry from the top.
"RTN","XTRUTL",5,0)
BUILD ;
"RTN","XTRUTL",6,0)
 K ^UTILITY($J),^TMP($J) D HOME^%ZIS
"RTN","XTRUTL",7,0)
 N BLDA,DIC,IX,X,PATCH,RTN,RN,L2,OLDSUM,OON
"RTN","XTRUTL",8,0)
 W !!,"This generates the Checksum/2nd line list for the routines from a BUILD file."
"RTN","XTRUTL",9,0)
 I '$D(^XPD(9.6,0)) W !,"No BUILD file to work from." Q
"RTN","XTRUTL",10,0)
 S Y=$$BUILD^XTRUTL1 G EXIT:Y'>0 S BLDA=+Y,PATCH=+$P(Y,"*",3)
"RTN","XTRUTL",11,0)
 D RTN^XTRUTL1(BLDA)
"RTN","XTRUTL",12,0)
 I '$D(^UTILITY($J)) W !,"No routines in this build." G EXIT
"RTN","XTRUTL",13,0)
 ;Ask about old/new checksums
"RTN","XTRUTL",14,0)
 S OON=$$ASKOON Q:OON<1  ;Return 1 or 2
"RTN","XTRUTL",15,0)
 ;S X=$P(^DIC(9.4,+$P(Y(0),U,2),0),U,2)
"RTN","XTRUTL",16,0)
 S RN="" F  S RN=$O(^UTILITY($J,RN)) Q:RN=""  D  Q:$D(L2)
"RTN","XTRUTL",17,0)
 . S X=RN X ^%ZOSF("TEST") I '$T D  Q
"RTN","XTRUTL",18,0)
 . . W !,RN,?13,"Routine not in this UCI."
"RTN","XTRUTL",19,0)
 . . K ^UTILITY($J,RN)
"RTN","XTRUTL",20,0)
 . S L2=$T(+2^@RN)
"RTN","XTRUTL",21,0)
 I '$D(L2) W !,"No other routines in this build." G EXIT
"RTN","XTRUTL",22,0)
 S L2=$P(L2,";",1,4)_";**[Patch List]**;"_$P(L2,";",6,99)
"RTN","XTRUTL",23,0)
 W !!,"Routine Summary"
"RTN","XTRUTL",24,0)
 W !,"Checksums shown are "_$S(OON=1:"OLD",1:"NEW")_" Checksums"
"RTN","XTRUTL",25,0)
 W !,"The following routines are included in this patch.  The second line of each",!,"of these routines now looks like:"
"RTN","XTRUTL",26,0)
 W !,L2
"RTN","XTRUTL",27,0)
 W !!,?17,"Checksums",!,"Routine",?16,"Old",?28,"New",?39,"Patch List"
"RTN","XTRUTL",28,0)
 S RN=""
"RTN","XTRUTL",29,0)
 F  S RN=$O(^UTILITY($J,RN)) Q:RN=""  D
"RTN","XTRUTL",30,0)
 . S RSUM=$P($$NEWSUM(RN),"/",OON) ;rwf
"RTN","XTRUTL",31,0)
 . S OLDSUM=$$OLDSUM(RN),OLDSUM=$P(OLDSUM,"/",OON) ;rwf
"RTN","XTRUTL",32,0)
 . S X=$G(RTN(2,0)) ;X has second line of routine
"RTN","XTRUTL",33,0)
 . S:(+OLDSUM=0) OLDSUM="n/a  " S:(+RSUM=0) RSUM="n/a  "
"RTN","XTRUTL",34,0)
 . W !,RN,?13,$J(OLDSUM,8),?25,$J(RSUM,8) D WRAP(37,$P(X,";",5))
"RTN","XTRUTL",35,0)
 . D PTLBLD($P(X,";",5))
"RTN","XTRUTL",36,0)
 . S Y=$P(X,"**",2),Z=$P(Y,",",$L(Y,","))
"RTN","XTRUTL",37,0)
 . I PATCH,Z'=PATCH W " <<<No "_PATCH
"RTN","XTRUTL",38,0)
 . Q
"RTN","XTRUTL",39,0)
 W ! D PTLDSP
"RTN","XTRUTL",40,0)
 W !,"Sites should use CHECK"_$S(OON=2:"1",1:"")_"^XTSUMBLD to verify checksums.",!
"RTN","XTRUTL",41,0)
EXIT K %
"RTN","XTRUTL",42,0)
 Q
"RTN","XTRUTL",43,0)
 ;
"RTN","XTRUTL",44,0)
ASKOON() ;Ask if user wants old/new checksum
"RTN","XTRUTL",45,0)
 ;Return 1 or 2.
"RTN","XTRUTL",46,0)
 N DIR,DIOUT
"RTN","XTRUTL",47,0)
 S DIR(0)="S^1:Old;2:New",DIR("A")="New or Old Checksums",DIR("B")="New"
"RTN","XTRUTL",48,0)
 D ^DIR
"RTN","XTRUTL",49,0)
 I $D(DIRUT) S Y=-1
"RTN","XTRUTL",50,0)
 Q Y
"RTN","XTRUTL",51,0)
 ;
"RTN","XTRUTL",52,0)
WRAP(C,S) ;Wrap S starting at col C.
"RTN","XTRUTL",53,0)
 I $L(S)+C<80 W ?C,S Q
"RTN","XTRUTL",54,0)
 N I,T
"RTN","XTRUTL",55,0)
 S I=$F(S,",",70-C) W ?C,$E(S,1,I-1) S S=$E(S,I,999)
"RTN","XTRUTL",56,0)
 F  S I=$F(S,",",70-C),I=$S(I>0:I,1:$L(S)+2) W !,?C+2,$E(S,1,I-1) S S=$E(S,I,999) Q:'$L(S)
"RTN","XTRUTL",57,0)
 Q
"RTN","XTRUTL",58,0)
 ;
"RTN","XTRUTL",59,0)
RSUM() N Y,Y2,%,%1,%2,%3 S (Y,Y2)=0
"RTN","XTRUTL",60,0)
 F %=1,3:1:LC S %1=RTN(%,0),%3=$F(%1," "),%3=$S($E(%1,%3)'=";":$L(%1),$E(%1,%3+1)=";":$L(%1),1:%3-2) F %2=1:1:%3 S Y=$A(%1,%2)*%2+Y,Y2=$A(%1,%2)*(%2+%)+Y2
"RTN","XTRUTL",61,0)
 ;S RSUM=Y,RSUM2=Y2
"RTN","XTRUTL",62,0)
 Q Y_"/"_Y2
"RTN","XTRUTL",63,0)
 ;
"RTN","XTRUTL",64,0)
NEWSUM(X) ;Get the NEW Checksum
"RTN","XTRUTL",65,0)
 N XCNP,DIF K RTN I '$L($T(^@X)) Q 0
"RTN","XTRUTL",66,0)
 S XCNP=0,DIF="RTN(" K RTN X ^%ZOSF("LOAD") S LC=XCNP-1
"RTN","XTRUTL",67,0)
 Q $$RSUM
"RTN","XTRUTL",68,0)
 ;
"RTN","XTRUTL",69,0)
OLDSUM(X) ;Get the OLD Checksum
"RTN","XTRUTL",70,0)
 N Y S Y=$O(^DIC(9.8,"B",X,0)) Q:Y'>0 ""
"RTN","XTRUTL",71,0)
 S X=$G(^DIC(9.8,Y,4))
"RTN","XTRUTL",72,0)
 Q $P(X,"^",2)
"RTN","XTRUTL",73,0)
 ;
"RTN","XTRUTL",74,0)
PTLBLD(Z) ;Build in ^TMP the patches used
"RTN","XTRUTL",75,0)
 N I,J,K,P S Z=$P(Z,"**",2),K=""
"RTN","XTRUTL",76,0)
 F I=1:1 S J=$P(Z,",",I) Q:(J="")  I (J'=PATCH) S P=$G(^TMP($J,J)),^TMP($J,J)=P_K S K=K_J_","
"RTN","XTRUTL",77,0)
 Q
"RTN","XTRUTL",78,0)
PTLSRT ;Sort the list
"RTN","XTRUTL",79,0)
 N I,J,K,L S I=0
"RTN","XTRUTL",80,0)
 F I=0:0 S I=$O(^TMP($J,I)) Q:I'>0  S K=^(I) D
"RTN","XTRUTL",81,0)
 . F J=1:1 S L=$P(K,",",J) Q:L=""  K ^TMP($J,L)
"RTN","XTRUTL",82,0)
 . Q
"RTN","XTRUTL",83,0)
 Q
"RTN","XTRUTL",84,0)
 ;
"RTN","XTRUTL",85,0)
PTLDSP ;Display list of patches.
"RTN","XTRUTL",86,0)
 D PTLSRT
"RTN","XTRUTL",87,0)
 N I,J K ^TMP($J,PATCH)
"RTN","XTRUTL",88,0)
 Q:$O(^TMP($J,0))=""
"RTN","XTRUTL",89,0)
 W !,"List of preceding patches: "
"RTN","XTRUTL",90,0)
 S (I,J)="" F  S I=$O(^TMP($J,I)) Q:I=""  D
"RTN","XTRUTL",91,0)
 . I $X>70 W ! S J=""
"RTN","XTRUTL",92,0)
 . W J,I S J=", "
"RTN","XTRUTL",93,0)
 S:$L(J)>2 J=$E(J,1,$L(J)-2)
"RTN","XTRUTL",94,0)
 Q
"RTN","XTRUTL",95,0)
 ;
"RTN","XTRUTL",96,0)
UPDATE ;Update the ROUTINE file with current checksums
"RTN","XTRUTL",97,0)
 K ^UTILITY($J)
"RTN","XTRUTL",98,0)
 N BLDA,DIC,IX,X,NOW,DIR
"RTN","XTRUTL",99,0)
 W !!,"This will update the ROUTINE file for the routines from a BUILD file."
"RTN","XTRUTL",100,0)
 I '$D(^XPD(9.6,0)) W !,"No BUILD file to work from." Q
"RTN","XTRUTL",101,0)
 S Y=$$BUILD^XTRUTL1 G EXIT:Y'>0 S BLDA=+Y
"RTN","XTRUTL",102,0)
 S DIR(0)="Y",DIR("A")="Is "_$P(Y,U,2)_" the one you want" D ^DIR
"RTN","XTRUTL",103,0)
 I $D(DIRUT)!(Y'=1) Q
"RTN","XTRUTL",104,0)
 D RTN^XTRUTL1(BLDA)
"RTN","XTRUTL",105,0)
 S NOW=$$NOW^XLFDT()
"RTN","XTRUTL",106,0)
 G EXIT:$O(^UTILITY($J,""))=""
"RTN","XTRUTL",107,0)
 S RN=""
"RTN","XTRUTL",108,0)
 F  S RN=$O(^UTILITY($J,RN)) Q:RN=""  D UD1(RN)
"RTN","XTRUTL",109,0)
 W !,"Done"
"RTN","XTRUTL",110,0)
 Q
"RTN","XTRUTL",111,0)
 ;
"RTN","XTRUTL",112,0)
UD1(RN) ;
"RTN","XTRUTL",113,0)
 N X,XCNP,DIF,LC,RSUM,Y S:'$D(NOW) NOW=$$NOW^XLFDT
"RTN","XTRUTL",114,0)
 S U="^",RSUM=$$NEWSUM(RN) Q:RSUM=0
"RTN","XTRUTL",115,0)
 S X=RTN(2,0)
"RTN","XTRUTL",116,0)
 S Y=$$GETDA(RN) I Y'>0 W !,"  Routine ",RN," not found in the database." Q
"RTN","XTRUTL",117,0)
 I '$$LOCAL(Y) W !,"This is a national routine and will not be updated" Q 
"RTN","XTRUTL",118,0)
 S ^DIC(9.8,+Y,4)=NOW_U_RSUM_U_$P(X,";",5)
"RTN","XTRUTL",119,0)
 Q
"RTN","XTRUTL",120,0)
 ;
"RTN","XTRUTL",121,0)
SHOW(RN) ;Show current data
"RTN","XTRUTL",122,0)
 N Y,%0,%4,RTN,RSUM S %4="^n/a^n/a",U="^"
"RTN","XTRUTL",123,0)
 S Y=$$GETDA(RN) I Y>0  S %0=^DIC(9.8,Y,0),%4=$G(^(4))
"RTN","XTRUTL",124,0)
 S RSUM=$$NEWSUM(RN)
"RTN","XTRUTL",125,0)
 W !,"RTN",?10,"New ChkSum",?28,"Old ChkSum",?46,"Old Date"
"RTN","XTRUTL",126,0)
 W !,RN,?10,RSUM,?28,$P(%4,U,2),?46,$P(%4,U)
"RTN","XTRUTL",127,0)
 W !,$S($$LOCAL(Y):"Local",1:"National")_" Routine"
"RTN","XTRUTL",128,0)
 Q
"RTN","XTRUTL",129,0)
 ;
"RTN","XTRUTL",130,0)
GETDA(X) ;Find a DA in file
"RTN","XTRUTL",131,0)
 Q $O(^DIC(9.8,"B",X,0))
"RTN","XTRUTL",132,0)
 ;
"RTN","XTRUTL",133,0)
M ;Manual Update of the Routine file
"RTN","XTRUTL",134,0)
 N DIC,DIE,DA,DR
"RTN","XTRUTL",135,0)
 S DIC="^DIC(9.8,",DIC(0)="AEMQ" D ^DIC Q:Y'>0
"RTN","XTRUTL",136,0)
 I '$$LOCAL(+Y) W !,"This routine Checksum only updated from FORUM." Q
"RTN","XTRUTL",137,0)
 S DA=+Y,DIE=DIC,DR=7.2 D ^DIE
"RTN","XTRUTL",138,0)
 Q
"RTN","XTRUTL",139,0)
 ;
"RTN","XTRUTL",140,0)
LIST ;List all routines that don't match the old checksum
"RTN","XTRUTL",141,0)
 N Y,X,RN,RSUM,DA
"RTN","XTRUTL",142,0)
 S RN="",U="^"
"RTN","XTRUTL",143,0)
 F  S RN=$O(^DIC(9.8,"B",RN)) Q:RN=""  D
"RTN","XTRUTL",144,0)
 . S DA=$O(^DIC(9.8,"B",RN,0)) Q:DA'>0
"RTN","XTRUTL",145,0)
 . S %4=$G(^DIC(9.8,DA,4)) Q:$P(%4,U,2)=""  S RSUM=$$NEWSUM(RN)
"RTN","XTRUTL",146,0)
 . I RSUM'=$P(%4,U,2) W !,RN,?10,"Checksum mismatch ",$P($T(+2^@RN),";",5)
"RTN","XTRUTL",147,0)
 . Q
"RTN","XTRUTL",148,0)
 Q
"RTN","XTRUTL",149,0)
 ;
"RTN","XTRUTL",150,0)
LOCAL(DA) ;Return if this is a local routine in the ROUTINE file.
"RTN","XTRUTL",151,0)
 Q $P($G(^DIC(9.8,DA,6)),"^")<2
"RTN","XTRUTL",152,0)
 ;
"RTN","XTSUMBLD")
0^5^B30858373^B27011734
"RTN","XTSUMBLD",1,0)
XTSUMBLD ;SF/RWF - BUILD PACKAGE INTEG ROUTINE ; 3/21/06 2:50MP
"RTN","XTSUMBLD",2,0)
 ;;7.3;TOOLKIT;**11,20,66,70,94,100**;Apr 25, 1995;Build 4
"RTN","XTSUMBLD",3,0)
A ;
"RTN","XTSUMBLD",4,0)
 K ^UTILITY($J),DIR D MSG
"RTN","XTSUMBLD",5,0)
 S DIR(0)="SM^P:Package;B:Build",DIR("A")="Build from" D ^DIR K DIR Q:X[U
"RTN","XTSUMBLD",6,0)
 G PKG:Y="P",BUILD:Y="B" Q
"RTN","XTSUMBLD",7,0)
PKG W !!,"This will build a checksum routine for a package from the package file",!
"RTN","XTSUMBLD",8,0)
 S DIC=9.4,DIC(0)="AEMQZ" D ^DIC G EXIT:Y'>0
"RTN","XTSUMBLD",9,0)
 D NAME($P(Y(0),U,2)) G EXIT:'$D(XTRNAME)
"RTN","XTSUMBLD",10,0)
 X ^%ZOSF("RSEL") G EXIT:$O(^UTILITY($J,""))=""
"RTN","XTSUMBLD",11,0)
 G BLD
"RTN","XTSUMBLD",12,0)
 ;
"RTN","XTSUMBLD",13,0)
BUILD W !!,"This will build a checksum routine from the BUILD file."
"RTN","XTSUMBLD",14,0)
 S DIC="^XPD(9.6,",DIC(0)="AEMQZ" D ^DIC G EXIT:Y'>0 S BLDA=+Y
"RTN","XTSUMBLD",15,0)
 I $P(Y(0),U,2)'>0 W !!,"There isn't a package file pointer." G EXIT
"RTN","XTSUMBLD",16,0)
 S X=$P(^DIC(9.4,+$P(Y(0),U,2),0),U,2) D NAME(X) G EXIT:'$D(XTRNAME)
"RTN","XTSUMBLD",17,0)
 F IX=0:0 S IX=$O(^XPD(9.6,BLDA,"KRN",9.8,"NM",IX)) Q:IX'>0  S X=^(IX,0) S:'$P(X,U,3) ^UTILITY($J,$P(X,U))=""
"RTN","XTSUMBLD",18,0)
 F IX="INI","INIT","PRE" S X=$G(^XPD(9.6,BLDA,IX)) I X]"" S ^UTILITY($J,$S(X[U:$P(X,U,2),1:X))=""
"RTN","XTSUMBLD",19,0)
 G EXIT:$O(^UTILITY($J,""))=""
"RTN","XTSUMBLD",20,0)
 G BLD
"RTN","XTSUMBLD",21,0)
 ;
"RTN","XTSUMBLD",22,0)
NAME(Y) S XTRNAME=Y_"NTEG" W !,"I will create a routine ",XTRNAME
"RTN","XTSUMBLD",23,0)
 S X=XTRNAME X ^%ZOSF("TEST") I $T S DIR(0)="YA",DIR("A")="But you already have one on file!  OK to replace? ",DIR("B")="NO" D ^DIR I Y'=1 K XTRNAME
"RTN","XTSUMBLD",24,0)
 Q
"RTN","XTSUMBLD",25,0)
 ;
"RTN","XTSUMBLD",26,0)
BLD S X=XTRNAME F I=0:0 K ^UTILITY($J,X) S X=$O(^UTILITY($J,X)) Q:X'[XTRNAME
"RTN","XTSUMBLD",27,0)
 I $O(^UTILITY($J,""))="" W !,"Routine list is empty" G EXIT
"RTN","XTSUMBLD",28,0)
 W !,"Calculating check-sums" S XTDT=$$NOW^XLFDT()
"RTN","XTSUMBLD",29,0)
 S X=" " F I=0:0 S X=$O(^UTILITY($J,X)) Q:X=""  D
"RTN","XTSUMBLD",30,0)
 . W !,X X ^%ZOSF("TEST") I '$T W ?10,"Routine not in this UCI." Q
"RTN","XTSUMBLD",31,0)
 . X ^%ZOSF("RSUM") S ^UTILITY($J,X)=Y Q
"RTN","XTSUMBLD",32,0)
 W !,"Building routine" S RN=" ",XTRNCNT=0
"RTN","XTSUMBLD",33,0)
B K ^UTILITY($J,0) S XTSIZE=0,XCN=0,DIE="^UTILITY($J,0,",XTRNEXT=$E(XTRNAME,1,7)_XTRNCNT,XTRNCNT=XTRNCNT+1
"RTN","XTSUMBLD",34,0)
 F I=1:1 S XT=$P($T(ROU+I),";;",2,99) D ADD Q:$E(XT,1,3)="ROU"
"RTN","XTSUMBLD",35,0)
 S @(DIE_"1,0)")=XTRNAME_$P($T(ROU+1),";;",2)_XTDT,@(DIE_"3,0)")=" ;;"_$P($T(+2),";",3)_";"_XTDT
"RTN","XTSUMBLD",36,0)
 F I=0:0 S RN=$O(^UTILITY($J,RN)) Q:RN=""  S %=^(RN),XT=RN_" ;;"_% D ADD Q:XTSIZE>3700
"RTN","XTSUMBLD",37,0)
 I RN]"" S @(DIE_"6,0)")=" G CONT^"_XTRNEXT
"RTN","XTSUMBLD",38,0)
 S XCN=0,X=XTRNAME W !!,"Filing routine ",XTRNAME X ^%ZOSF("SAVE") S XTRNAME=XTRNEXT G:RN]"" B
"RTN","XTSUMBLD",39,0)
 W !,"  DONE",!
"RTN","XTSUMBLD",40,0)
EXIT K ^UTILITY($J),DIC,DIR,XCN,XTRNAME,XTRNCNT,XU1,XTSIZE,XTDT,DIE,XTRNEXT,XT,X,Y
"RTN","XTSUMBLD",41,0)
 Q
"RTN","XTSUMBLD",42,0)
ADD S XCN=XCN+1,XTSIZE=XTSIZE+$L(XT)+2,@(DIE_XCN_",0)")=XT Q
"RTN","XTSUMBLD",43,0)
 Q
"RTN","XTSUMBLD",44,0)
CHECK ;Print the values of a set of routines.
"RTN","XTSUMBLD",45,0)
 N XPCH,X,DIR D MSG
"RTN","XTSUMBLD",46,0)
 S DIR(0)="SM^P:Package;B:Build",DIR("A")="Build from" D ^DIR K DIR Q:X[U
"RTN","XTSUMBLD",47,0)
 G CHKPKG:Y="P",CHKBLD:Y="B" Q
"RTN","XTSUMBLD",48,0)
CHKPKG W !! K ^UTILITY($J) X ^%ZOSF("RSEL") I $O(^UTILITY($J,0))']"" W !!,"NO SELECTED ROUTINES" G EXIT
"RTN","XTSUMBLD",49,0)
CHK2 S X=" " F XU1=0:0 S X=$O(^UTILITY($J,X)) Q:X']""  D
"RTN","XTSUMBLD",50,0)
 . W !,X,?10 X ^%ZOSF("TEST") I '$T W "Routine not in this UCI." Q
"RTN","XTSUMBLD",51,0)
 . I $G(XUCHFLG)=1 X ^%ZOSF("RSUM1") W "value = ",Y
"RTN","XTSUMBLD",52,0)
 . E  X ^%ZOSF("RSUM") W "value = ",Y
"RTN","XTSUMBLD",53,0)
 . I $D(XPCH) X XPCH
"RTN","XTSUMBLD",54,0)
 . Q
"RTN","XTSUMBLD",55,0)
 W !,"done" G EXIT
"RTN","XTSUMBLD",56,0)
CHKBLD W !!,"This will check the routines from a BUILD file."
"RTN","XTSUMBLD",57,0)
 S DIC="^XPD(9.6,",DIC(0)="AEMQZ" D ^DIC G EXIT:Y'>0
"RTN","XTSUMBLD",58,0)
 S BLDA=+Y,X=$P(Y,"^",2)
"RTN","XTSUMBLD",59,0)
 I X["*" S XPCH="S L=$T(+2^@X) I $P(L,"";"",5)'?.E1P1"""_$P(X,"*",3)_"""1P.E W ?30,""Missing patch number"""
"RTN","XTSUMBLD",60,0)
 F IX=0:0 S IX=$O(^XPD(9.6,BLDA,"KRN",9.8,"NM",IX)) Q:IX'>0  S X=^(IX,0) S:'$P(X,U,3) ^UTILITY($J,$P(X,U))=""
"RTN","XTSUMBLD",61,0)
 F IX="INI","INIT","PRE" S X=$G(^XPD(9.6,BLDA,IX)) I X]"" S ^UTILITY($J,$S(X[U:$P(X,U,2),1:X))=""
"RTN","XTSUMBLD",62,0)
 G EXIT:$O(^UTILITY($J,""))=""
"RTN","XTSUMBLD",63,0)
 G CHK2
"RTN","XTSUMBLD",64,0)
 ;
"RTN","XTSUMBLD",65,0)
MSG W !!,"This option determines the current checksum of selected routine(s)."
"RTN","XTSUMBLD",66,0)
 W !,"The Checksum of the routine is determined as follows:",!
"RTN","XTSUMBLD",67,0)
 W !,"1. Any comment line with a single semi-colon is presumed to be"
"RTN","XTSUMBLD",68,0)
 W !,"   followed by comments and only the line tag will be included."
"RTN","XTSUMBLD",69,0)
 W !!,"2. Line 2 will be excluded from the count.",!
"RTN","XTSUMBLD",70,0)
 W !,"3. The total value of the routine is determined (excluding"
"RTN","XTSUMBLD",71,0)
 W !,"   exceptions noted above) by multiplying the ASCII value of each"
"RTN","XTSUMBLD",72,0)
 W !,"   character by its position on the line "
"RTN","XTSUMBLD",73,0)
 I $G(XUCHFLG)=1 W "and position of the line in ",!,"   the routine "
"RTN","XTSUMBLD",74,0)
 W "being checked."
"RTN","XTSUMBLD",75,0)
 Q
"RTN","XTSUMBLD",76,0)
 ;
"RTN","XTSUMBLD",77,0)
CHECK1 ;New CheckSum logic
"RTN","XTSUMBLD",78,0)
 W !,"New CheckSum CHECK1^XTSUMBLD:"
"RTN","XTSUMBLD",79,0)
 N XUCHFLG S XUCHFLG=1 D CHECK
"RTN","XTSUMBLD",80,0)
 Q
"RTN","XTSUMBLD",81,0)
 ;
"RTN","XTSUMBLD",82,0)
CHCKSUM ;
"RTN","XTSUMBLD",83,0)
 W !,"This option determines the current Old (CHECK^XTSUMBLD) or New (CHECK1^XTSUMBLD) logic checksum of selected routine(s)."
"RTN","XTSUMBLD",84,0)
 N OON
"RTN","XTSUMBLD",85,0)
 S OON=$$ASKOON Q:OON<1  ;Return 1 or 2
"RTN","XTSUMBLD",86,0)
 I OON=1 D CHECK
"RTN","XTSUMBLD",87,0)
 I OON=2 D CHECK1
"RTN","XTSUMBLD",88,0)
 Q
"RTN","XTSUMBLD",89,0)
 ;
"RTN","XTSUMBLD",90,0)
ASKOON() ;
"RTN","XTSUMBLD",91,0)
 ;Ask if user wants old/new checksum
"RTN","XTSUMBLD",92,0)
 ;Return 1 or 2.
"RTN","XTSUMBLD",93,0)
 N DIR,DIOUT
"RTN","XTSUMBLD",94,0)
 S DIR(0)="S^1:Old;2:New",DIR("A")="New or Old Checksums",DIR("B")="New"
"RTN","XTSUMBLD",95,0)
 D ^DIR
"RTN","XTSUMBLD",96,0)
 I $D(DIRUT) S Y=-1
"RTN","XTSUMBLD",97,0)
 Q Y
"RTN","XTSUMBLD",98,0)
ROU ;;
"RTN","XTSUMBLD",99,0)
 ;; ;ISC/XTSUMBLD KERNEL - Package checksum checker ;
"RTN","XTSUMBLD",100,0)
 ;; ;;0.0;
"RTN","XTSUMBLD",101,0)
 ;; ;;7.3;10/1/94
"RTN","XTSUMBLD",102,0)
 ;; S XT4="I 1",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","XTSUMBLD",103,0)
 ;;CONT F XT1=1:1 S XT2=$T(ROU+XT1) Q:XT2=""  S X=$P(XT2," ",1),XT3=$P(XT2,";",3) X XT4 I $T W !,X X ^%ZOSF("TEST") S:'$T XT3=0 X:XT3 ^%ZOSF("RSUM") W ?10,$S('XT3:"Routine not in UCI",XT3'=Y:"Calculated "_$C(7)_Y_", off by "_(Y-XT3),1:"ok")
"RTN","XTSUMBLD",104,0)
 ;; ;
"RTN","XTSUMBLD",105,0)
 ;; K %1,%2,%3,X,Y,XT1,XT2,XT3,XT4 Q
"RTN","XTSUMBLD",106,0)
 ;;ONE S XT4="I $D(^UTILITY($J,X))",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","XTSUMBLD",107,0)
 ;; W !,"Check a subset of routines:" K ^UTILITY($J) X ^%ZOSF("RSEL")
"RTN","XTSUMBLD",108,0)
 ;; W ! G CONT
"RTN","XTSUMBLD",109,0)
 ;;ROU ;;
"VER")
8.0^22.0
"BLD",919,6)
^80
**END**
**END**

Released XU*8*7 SEQ #7
Extracted from mail message
**KIDS**:XU*8.0*7^

**INSTALL NAME**
XU*8.0*7
"BLD",5,0)
XU*8.0*7^KERNEL^0^2950929^n
"BLD",5,1,0)
^^25^25^2951108^
"BLD",5,1,1,0)
The routine ORBSTAT was transported as a part of Kernel 8.0 to insure that
"BLD",5,1,2,0)
the alert statistics would perform correctly with the movement of alert
"BLD",5,1,3,0)
data from file 200 to file 8992.  Unfortunately, a couple of references to
"BLD",5,1,4,0)
file 200 were not converted, resulting in no output for the total alert
"BLD",5,1,5,0)
count.  This patch includes correction of these references within the
"BLD",5,1,6,0)
routine and a print template for file 8992 which is used by this routine.
"BLD",5,1,7,0)
 
"BLD",5,1,8,0)
========================================================================= 
"BLD",5,1,9,0)
Installation:
"BLD",5,1,10,0)
 
"BLD",5,1,11,0)
 1. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
"BLD",5,1,12,0)
    option will load the KIDS package in this message onto your system.
"BLD",5,1,13,0)
 2. Answer NO to the question:
"BLD",5,1,14,0)
    'Shall I preserve what is on disk in a separate back-up message ?'
"BLD",5,1,15,0)
 3. From the 'Installion Menu' of the KIDS menu, run the option
"BLD",5,1,16,0)
    'Verify Checksums in Transport Global' and verify that all routines
"BLD",5,1,17,0)
    have the correct checksum.
"BLD",5,1,18,0)
 4. Inhibit users from login into the system. (If you install when few
"BLD",5,1,19,0)
    user are on the system and the posibility of some CLOBER errors is
"BLD",5,1,20,0)
    acceptable then users can stay on the system.)
"BLD",5,1,21,0)
 5. From the 'Installion Menu' of the KIDS menu, run the option
"BLD",5,1,22,0)
    'Install Package(s)' Select the package 'XU*8.0*7' and proceed with
"BLD",5,1,23,0)
    install.
"BLD",5,1,24,0)
 6. Enable user's login if inhibited.
"BLD",5,1,25,0)
========================================================================= 
"BLD",5,4,0)
^9.64PA^^
"BLD",5,"KRN",0)
^9.67PA^8994^15
"BLD",5,"KRN",.4,0)
.4
"BLD",5,"KRN",.4,"NM",0)
^9.68A^1^1
"BLD",5,"KRN",.4,"NM",1,0)
ORB RECIP TOTALS    FILE #8992^8992^0
"BLD",5,"KRN",.4,"NM","B","ORB RECIP TOTALS    FILE #8992",1)

"BLD",5,"KRN",.401,0)
.401
"BLD",5,"KRN",.402,0)
.402
"BLD",5,"KRN",.403,0)
.403
"BLD",5,"KRN",.5,0)
.5
"BLD",5,"KRN",.84,0)
.84
"BLD",5,"KRN",3.6,0)
3.6
"BLD",5,"KRN",9.2,0)
9.2
"BLD",5,"KRN",9.8,0)
9.8
"BLD",5,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5,"KRN",9.8,"NM",1,0)
ORBSTAT^^0^B4525972
"BLD",5,"KRN",9.8,"NM","B","ORBSTAT",1)

"BLD",5,"KRN",19,0)
19
"BLD",5,"KRN",19.1,0)
19.1
"BLD",5,"KRN",101,0)
101
"BLD",5,"KRN",409.61,0)
409.61
"BLD",5,"KRN",8994,0)
8994
"BLD",5,"KRN",8995,0)
8995
"BLD",5,"KRN","B",.4,.4)

"BLD",5,"KRN","B",.401,.401)

"BLD",5,"KRN","B",.402,.402)

"BLD",5,"KRN","B",.403,.403)

"BLD",5,"KRN","B",.5,.5)

"BLD",5,"KRN","B",.84,.84)

"BLD",5,"KRN","B",3.6,3.6)

"BLD",5,"KRN","B",9.2,9.2)

"BLD",5,"KRN","B",9.8,9.8)

"BLD",5,"KRN","B",19,19)

"BLD",5,"KRN","B",19.1,19.1)

"BLD",5,"KRN","B",101,101)

"BLD",5,"KRN","B",409.61,409.61)

"BLD",5,"KRN","B",8994,8994)

"BLD",5,"KRN","B",8995,8995)

"BLD",5,"QUES",0)
^9.62^^
"KRN",.4,73,-1)
0^1
"KRN",.4,73,0)
ORB RECIP TOTALS^2950922.1452^^8992^^^2950922
"KRN",.4,73,"DXS",1,9)
X DXS(1,9.2) X "F D1=0:0 S D1=$O(^XTV(8992,D0,""XQA"",D1)) Q:D1'>0  S:$S($D(^(D1,0)):$P(^(0),U,1),1:"""")'?."" "" DIP(102)=DIP(102)+1" S D(1)=D1 S X=+DIP(102) S D0=I(0,0) S D1=I(1,0)
"KRN",.4,73,"DXS",1,9.2)
S I(0,0)=$S($D(D0):D0,1:""),I(1,0)=$S($D(D1):D1,1:""),DIP(102)=""
"KRN",.4,73,"F",2)
.01;"NAME"~X DXS(1,9) W X K DIP;Z;"COUNT(ALERT DATE/TIME)"~
"KRN",.4,73,"H")
ALERT LIST
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,"",XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^XUDOCV7 NEW FEATURES
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^2950703^2951018^4
"PKG",3,22,1,"PAH",1,0)
7^2950929^2
"PKG",3,22,1,"PAH",1,1,0)
^^25^25^2951108
"PKG",3,22,1,"PAH",1,1,1,0)
The routine ORBSTAT was transported as a part of Kernel 8.0 to insure that
"PKG",3,22,1,"PAH",1,1,2,0)
the alert statistics would perform correctly with the movement of alert
"PKG",3,22,1,"PAH",1,1,3,0)
data from file 200 to file 8992.  Unfortunately, a couple of references to
"PKG",3,22,1,"PAH",1,1,4,0)
file 200 were not converted, resulting in no output for the total alert
"PKG",3,22,1,"PAH",1,1,5,0)
count.  This patch includes correction of these references within the
"PKG",3,22,1,"PAH",1,1,6,0)
routine and a print template for file 8992 which is used by this routine.
"PKG",3,22,1,"PAH",1,1,7,0)
 
"PKG",3,22,1,"PAH",1,1,8,0)
========================================================================= 
"PKG",3,22,1,"PAH",1,1,9,0)
Installation:
"PKG",3,22,1,"PAH",1,1,10,0)
 
"PKG",3,22,1,"PAH",1,1,11,0)
 1. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
"PKG",3,22,1,"PAH",1,1,12,0)
    option will load the KIDS package in this message onto your system.
"PKG",3,22,1,"PAH",1,1,13,0)
 2. Answer NO to the question:
"PKG",3,22,1,"PAH",1,1,14,0)
    'Shall I preserve what is on disk in a separate back-up message ?'
"PKG",3,22,1,"PAH",1,1,15,0)
 3. From the 'Installion Menu' of the KIDS menu, run the option
"PKG",3,22,1,"PAH",1,1,16,0)
    'Verify Checksums in Transport Global' and verify that all routines
"PKG",3,22,1,"PAH",1,1,17,0)
    have the correct checksum.
"PKG",3,22,1,"PAH",1,1,18,0)
 4. Inhibit users from login into the system. (If you install when few
"PKG",3,22,1,"PAH",1,1,19,0)
    user are on the system and the posibility of some CLOBER errors is
"PKG",3,22,1,"PAH",1,1,20,0)
    acceptable then users can stay on the system.)
"PKG",3,22,1,"PAH",1,1,21,0)
 5. From the 'Installion Menu' of the KIDS menu, run the option
"PKG",3,22,1,"PAH",1,1,22,0)
    'Install Package(s)' Select the package 'XU*8.0*7' and proceed with
"PKG",3,22,1,"PAH",1,1,23,0)
    install.
"PKG",3,22,1,"PAH",1,1,24,0)
 6. Enable user's login if inhibited.
"PKG",3,22,1,"PAH",1,1,25,0)
========================================================================= 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options and Options
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ORBSTAT")
0^1^B4525972
"RTN","ORBSTAT",1,0)
ORBSTAT ; slc/CLA - OE/RR Notifications stats ;10/6/95  09:25
"RTN","ORBSTAT",2,0)
 ;;8.0;KERNEL;**7**;Jul 10, 1995
"RTN","ORBSTAT",3,0)
 ;  MODIFIED FOR KERNEL 8.0  JLI(ISC-SF) 6/20/95
"RTN","ORBSTAT",4,0)
 Q
"RTN","ORBSTAT",5,0)
NOTIF ;called by option ORB STAT NOTIF - get stats for a single notification
"RTN","ORBSTAT",6,0)
 K DIC S DIC="^ORD(100.9,",DIC(0)="AEMNQ",DIC("A")="Enter notification's name: " F  D ^DIC Q:Y<1  S NIEN=+Y D
"RTN","ORBSTAT",7,0)
 .S (CNT,X)=0
"RTN","ORBSTAT",8,0)
 .F  S X=$O(^XTV(8992,"AXQAN",X)) Q:X=""  S:$P(X,",",3)=NIEN CNT=CNT+1
"RTN","ORBSTAT",9,0)
 .W !,"Total current occurrences of notification ",$P(^ORD(100.9,NIEN,0),"^")," = ",CNT,!
"RTN","ORBSTAT",10,0)
 K CNT,DIC,NIEN,X,Y
"RTN","ORBSTAT",11,0)
 Q
"RTN","ORBSTAT",12,0)
RECIP ;called by option ORB STAT RECIP - get stats for a single recipient
"RTN","ORBSTAT",13,0)
 K DIC S DIC="^VA(200,",DIC(0)="AEMNQ",DIC("A")="Enter recipient's (user's) name: " F  D ^DIC Q:Y<1  S RIEN=+Y D
"RTN","ORBSTAT",14,0)
 .S (CNT,X)=0
"RTN","ORBSTAT",15,0)
 .F  S X=$O(^XTV(8992,RIEN,"XQA",X)) Q:X=""  S:X>0 CNT=CNT+1
"RTN","ORBSTAT",16,0)
 .W !,"Total current notifications for recipient ",$P(^VA(200,RIEN,0),"^")," = ",CNT,!
"RTN","ORBSTAT",17,0)
 K CNT,DIC,RIEN,X,Y
"RTN","ORBSTAT",18,0)
 Q
"RTN","ORBSTAT",19,0)
PT ;called by option ORB STAT PATIENT - get stats for a single patient
"RTN","ORBSTAT",20,0)
 K DIC S DIC="^DPT(",DIC(0)="AEMNQ",DIC("A")="Enter patient's name: " F  D ^DIC Q:Y<1  S PIEN=+Y D
"RTN","ORBSTAT",21,0)
 .S (CNT,X)=0
"RTN","ORBSTAT",22,0)
 .F  S X=$O(^XTV(8992,"AXQAN",X)) Q:X=""  S:$P(X,",",2)=PIEN CNT=CNT+1
"RTN","ORBSTAT",23,0)
 .W !,"Total current notifications for patient ",$P(^DPT(PIEN,0),"^")," = ",CNT,!
"RTN","ORBSTAT",24,0)
 K CNT,DIC,PIEN,X,Y
"RTN","ORBSTAT",25,0)
 Q
"RTN","ORBSTAT",26,0)
RTOTALS ;called by option ORB STAT TOTALS - get and print stats for all recipients
"RTN","ORBSTAT",27,0)
 S DIC="^XTV(8992,",L=0,BY="-@COUNT(ALERT DATE/TIME),RECIPIENT",FR="",TO="",FLDS="[ORB RECIP TOTALS]"
"RTN","ORBSTAT",28,0)
 S DIS(0)="I $D(^XTV(8992,D0,""XQA"",0)),$D(^XTV(8992,D0,""XQA"",+$P(^(0),""^"",3),0))"
"RTN","ORBSTAT",29,0)
 S DIOBEG="W !,""... recipient totals are being calculated ..."""
"RTN","ORBSTAT",30,0)
 D EN1^DIP
"RTN","ORBSTAT",31,0)
 K BY,DIC,DIOBEG,DIS,FLDS,FR,L,TO
"RTN","ORBSTAT",32,0)
 Q
"VER")
8.0^21.0
**END**
**END**

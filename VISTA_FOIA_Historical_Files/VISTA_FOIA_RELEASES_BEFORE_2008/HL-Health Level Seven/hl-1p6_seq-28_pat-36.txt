$TXT Created by HSU,RAYMOND J at KERNEL.ISC-SF.VA.GOV  (KIDS) on WEDNESDAY, 03/25/98 at 15:34
=============================================================================
Run Date: JUN 08, 1998                     Designation: HL*1.6*36
Package : HL - HEALTH LEVEL SEVEN            Priority: Mandatory
Version : 1.6        SEQ #28                    Status: Released
=============================================================================


Subject: Don't Purge and Reprocessing functions

Category: 
  - Data Dictionary
  - Routine

Description: 
============

  This patch provides two new features, "Don't Purge" and "Reprocessing"
  messages, which were originally requested by the CIRN project.  The new
  extrinsic function calls allow the VISTA/DHCP applications to interface
  with HL7 in the following ways:
   
    1.  Set the new flag field "DON'T PURGE" (#772,15) to prevent a message
        being purged by the "HL PURGE TRANSMISSIONS" option.  The following
        extrinsic function may be used for this purpose:
                 $$DONTPURG^HLUTIL()
   
    2.  Clear the flag field "DON'T PURGE" (#772,15) to allow the message
        to be purged by the "HL PURGE TRANSMISSIONS" option. The following
        extrinsic function may be used for this purpose:
                 $$TOPURG^HLUTIL()
   
    3.  Reprocessing the message by calling the extrinsic function:
                    $$REPROC^HLUTIL(IEN,RTN)
          where:  IEN is the child message IEN (or the parent message IEN).
                  RTN is the routine to be Xecuted for reprocessing the
                  message.
   
   
  These extrinsic functions and their associated parameters, return values,
  and results are described as follows:
   
    $$DONTPURG^HLUTIL():
       purpose:       to set the "DON'T PURGE" field (#772,15).
       input:         none
       return value:  1   means field has been successfully set
                      -1  means call has failed; nothing has been changed
   
    $$TOPURG^HLUTIL():
       purpose:       to clear the "DON'T PURGE" field (#772,15).
       input:         none
       return value:  0   means field has been successfully cleared
                      -1  means call has failed; nothing has been changed
   
    $$REPROC^HLUTIL(IEN,RTN):
       purpose:       to reprocess message.
       input:         IEN= the child message IEN (or the parent message
                           IEN) of file #772.
                      RTN= routine, to be Xecuted for reprocessing the
                           message.
       return value:  0  means call has been successfully completed
                      -1 means call has failed; nothing has been changed
   
  The extrinsic functions, $$DONTPURG^HLUTIL(), $$TOPURG^HLUTIL(), should be
  called by one of the following routines:
      - RTN routine, which is provided to $$REPROC^HLUTIL(IEN,RTN).
      - routine stored in field "GENERATE/PROCESS ROUTINE"(#101,771).
      - routine stored in field "GENERATE/PROCESS ACK ROUTINE"(#101,772). 
   
  When called by these routines, HL7 assumes that the variables,
  HLMTIENS(child message IEN of file #772) and HLMTIEN(parent message IEN of
  file #772), are already properly defined.  Otherwise, if they are called
  elsewhere, at least the HLMTIEN should be defined in order to make them to
  work.  If only HLMTIEN is defined, then the call will only update the
  entry of parent message. Of course, having only a defined HLMTIENS is
  enough for HL7 to find the corresponding value for HLMTIEN, and
  consequently HL7 will update entries for both child and parent massages.
   
  The IEN, which is provided to $$REPROC^HLUTIL(IEN,RTN) should be the child
  message IEN of file #772.  This will make HL7 update the "STATUS" for both
  child and parent message entries.  If the IEN is the parent message IEN,
  then only the "STATUS" of the parent message entry will be updated.
   
   
  Routine Summary:
  ================
  The following is a list of the routines included in this patch.  The
  second line of each of these routines now looks like:
   
       <tab>;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
     
   
  Checksums:
  ==========
   
      Routine Name     Checksum Before     Checksum After       Patch List
      ------------     ---------------     --------------       -----------
        HLUTIL               N/A               4603738              36
        HLTPCK1            4288888             4288888             8,36
        HLUOPT1            9958836             9990663          10,13,21,36
   
     From CHECK^XTSUMBLD
   
   
  Installation Instructions:
  ==========================
    1.  Users are allowed to be on the system during the installation.
    2.  Check and make sure that the 'HL PURGE TRANSMISSIONS' option is not
        scheduled during the time of installation.
        Stop all HL7 background processes. This includes Logical Links,
        inbound and outbound filers.
    4.  DSM SITES: Review your mapped set.  If any of the routines listed in
        the Routine Summary section are mapped, they should be removed from
        the mapped set at this time.
    5.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.  
    6.  The patch has now been loaded into a Transport global on your
        system. You now need to use KIDS to install the Transport global.
        On the KIDS menu, under the 'Installation' menu, use the following
        options:
     
           Verify Checksums in Transport Global
           Print Transport Global 
           Compare Transport Global to Current System 
           Backup a Transport Global
           Install Package(s) 
           INSTALL NAME: HL*1.6*36
                         =========
           Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
           and Protocols?'.
    7.  DSM Sites: Rebuild your mapped set if necessary.
    8.  Restart all HL7 background jobs.
    9.  Re-schedule 'HL PURGE TRANSMISSIONS' option if this option was
        scheduled and has been stopped in step #2. 

Routine Information:
====================

Routine Name:
  - HLUOPT1


Routine Checksum:

Routine Name:
  - HLTPCK1


Routine Checksum:

Routine Name:
  - HLUTIL


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : HSU,RAYMOND JL                Date Entered : SEP 22, 1997
Completed By: CLEMENS,JOHN                  Date Completed: APR 17, 1998
Released By : CARLSON-GOTTS,NANCY           Date Released : JUN 08, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

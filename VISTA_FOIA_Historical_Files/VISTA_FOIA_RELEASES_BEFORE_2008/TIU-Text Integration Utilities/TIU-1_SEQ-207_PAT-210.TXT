$TXT Created by ROWLANDS,ELMER at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 12/06/06 at 09:50
=============================================================================
Run Date: DEC 21, 2006                     Designation: TIU*1*210
Package : TIU - TEXT INTEGRATION UTILITIES    Priority: Mandatory
Version : 1       SEQ #207                      Status: Released
                  Compliance Date: JAN 21, 2007
=============================================================================

Associated patches: (v)TIU*1*157   <<= must be installed BEFORE `TIU*1*210'
                    (v)TIU*1*186   <<= must be installed BEFORE `TIU*1*210'

Subject: ADD START DATE PARAMETER FOR TIU NIGHTLY TASK AND FIX ERROR TRAP

Category: 
  - Routine
  - Input Template
  - Data Dictionary

Description:
============

 This patch will address 3 issues. The first is to add a TIU PARAMETER 
 called LENGTH OF SIGNER ALERT PERIOD to the TIU PARAMETER file (#8925.99).
 This parameter will be used by the TIU NIGHTLY TASK to determine how far 
 into the past it should look for TIU documents needing signatures. The 
 value must be in a FileMan date range format such as 6D, 3W or 4M. 
  
 Secondly, this patch will fix a potential UNDEFINED error in the local 
 error trap of the SETTEXT RPC.
  
 Third, during testing it was observed that the input transforms for 
 fields START OF ADD SGNR ALERT PERIOD and END OF ADD SGNR ALERT PERIOD in 
 the TIU PARAMETER file (#8925.99) were not working properly. This was
 corrected.
  
  
 ASSOCIATED NSR(S):
 =================
 N/A
  
 ASSOCIATED REMEDY:
 ==================
 HD70109 - BHS-0403-12322 TIU NIGHTLY TASK takes over 19 hrs
 HD70834 - LEX-0704-40334 TIU Nightly task taking 7-8 hours 
 HD124701 - <UNDEFINED>ERROR+7^TIUSRVPT
  
  
 PARTICIPATING TEST SITES:
 =========================
 Puget Sound, WA
 Hines, IL
 Charleston, SC
  
  
 REMEDY OVERVIEW:
 ===============
 Problem 1:
 In looking for TIU documents needing a signature the TIU NIGHTLY TASK 
 loops through the entire "F" cross reference of the TIU DOCUMENT file
 (#8925). For sites that have created a high volume of TIU documents over 
 the years this can take a lot of time that shouldn't need to be spent. 
  
 Resolution 1:
 Since the "F" cross reference is a date field this patch will add a 
 parameter to the TIU PARAMETERS file (#8925.99) that will specify how far 
 back in time the TIU NIGHTLY TASK should go. This new parameter is called 
 LENGTH OF SIGNER ALERT PERIOD. The value must be in a FileMan date range
 format such as 6D, 3W or 4M. If no value is entered then a period of 1 
 year is assumed. This value can be specified under TIU MAINTENANCE MENU 
 / TIU PARAMETER MENU / BASIC TIU PARAMETERS. This will allow each site to 
 determine how far back this process needs to go in looking for unsigned 
 documents. If you still want to go back to the beginning of time to 
 search for the alerts you will need to identify the date of the first 
 entry in file 8925 and set the parameter accordingly.
  
 Note: this parameter will be used to initialize the primary lookup. The
 TIU NIGHTLY TASK still uses the fields START OF ADD SGNR ALERT PERIOD and
 END OF ADD SGNR ALERT PERIOD when evaluating additional signers. It would
 make sense to set this new field LENGTH OF SIGNER ALERT PERIOD and the
 field START OF ADD SGNR ALERT PERIOD to the same value. If the LENGTH OF 
 SIGNER ALERT PERIOD field is set to a date later than the START OF ADD 
 SGNR ALERT PERIOD field then you may not receive all the additional 
 signer alerts you had expected.
  
 Problem 2:
 The Remote Procedure Call TIU SET DOCUMENT TEXT will call 
 SETTEXT^TIUSRVPT. The routine TIUSRVPT has a local error trap for the 
 purpose of saving variables for use in debugging problems. If the calling 
 program does not send the variable TIUDA, then the error trap itself will 
 error with an <UNDEFINED> error. 
  
 Resolution 2:
 Wrap the undefined variable in a $G. This will allow the error trap to 
 record the true state of the variable and to return to the calling 
 program the appropriate error message.
  
 Problem 3:
 Input transforms for fields START OF ADD SGNR ALERT PERIOD and END OF 
 ADD SGNR ALERT PERIOD in the TIU PARAMETER file (#8925.99) did not work
 properly.
  
 Resolution 3:
 Correct input transforms for these 2 fields.
  
 COMPONENTS:
 ===========
 INPUT TEMPLATE:  TIU BASIC PARAMETER EDIT FILE (#8925.99)
 FILE: TIU PARAMETERS (#8925.99)
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 This patch may be installed during working hours, however it is suggested
 that it be queued for non-peak hours. Installation will take less than 5
 minutes. Users do not have to be off the system
  
  
 1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu. [Note: TEXT 
    PRINT/DISPLAY option in the PackMan menu still display the patch text
    only].
  
 2. From the Kernel Installation and Distribution System (KIDS) menu,
    select the Installation menu.
  
 3. From this menu, you may elect to use the following options:
    (when prompted for INSTALL NAME enter TIU*1.0*210)
    
    a. Backup a Transport Global - this option will create a backup message
       of any routines exported with the patch. It will NOT backup any 
       other changes such as DDs or templates.
    b. Compare Transport Global to Current System - this option will allow
       you to view all changes that will be made when the patch is 
       installed. It compares all components of the patch (routines, DDs, 
       templates, etc.).
    c. Verify Checksums in Transport Global - this option will allow you
       to ensure the integrity of the routines that are in the Transport
       Global.
    d. Print Transport Global - this option will allow you to view the
       components of the KIDS build.
  
 4. Use the Install Package(s) option and select the package TIU*1.0*210.
  
 5. When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//', 
    respond NO
  
 6. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
    Protocols? YES//', respond YES.
  
    Enter options you wish to mark as 'Out Of Order':
  
      TIU NIGHTLY TASK        Text Integration Utility Nightly Task
  
  
     Enter protocols you wish to mark as 'Out Of Order': 
  
     Delay Install (Minutes):  (0-60): 0//
  
 Install Started for TIU*1.0*210 : 
                Jul 19, 2006@08:57:22
  
 Build Distribution Date: Jul 19, 2006
  
  Installing Routines:
                                   
 TIU*1.0*210                                   
  
  
                Jul 19, 2006@08:57:22
  
  Installing Data Dictionaries: 
                Jul 19, 2006@08:57:22
  
  Installing PACKAGE COMPONENTS: 
  
  Installing INPUT TEMPLATE
                Jul 19, 2006@08:57:22
  
  Updating Routine file...
  
  Updating KIDS files...
  
  TIU*1.0*210 Installed. 
                Jul 19, 2006@08:57:22
  
  Install Message sent #2098371
  
  
   100%                 25             50             75               
 Complete  
  
  
 Install Completed
  
  
 ROUTINE SUMMARY:
 ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;1.0;Text Integration Utilities;**[patch list]**;MAY 24, 2005
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
      TIUSRVPT           4392916              4438029       122,175,186,210
        TIUTSK           7421112              7500303        7,53,100,113

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: TIUSRVPT
    Before: B10584847  After: B10694146  **122,175,186,210**
Routine Name: TIUTSK
    Before: B20710718  After: B21071583  **7,53,100,113,157,210**

=============================================================================
User Information:
Entered By  : LUNDEN,JOHN                   Date Entered  : JAN 31, 2006
Completed By: TROHA,ROBERT                  Date Completed: DEC 19, 2006
Released By : CHRISTENSEN,LINDA L           Date Released : DEC 21, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

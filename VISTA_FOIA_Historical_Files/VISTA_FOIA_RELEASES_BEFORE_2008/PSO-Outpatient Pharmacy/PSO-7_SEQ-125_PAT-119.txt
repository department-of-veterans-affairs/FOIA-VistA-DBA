$TXT Created by ROCHA,MARCELO at LAWVAA.FO-BIRM.MED.VA.GOV  (KIDS) on Friday, 06/06/03 at 12:24
=============================================================================
Run Date: JUN 09, 2003                     Designation: PSO*7*119
Package : PSO - OUTPATIENT PHARMACY           Priority: Mandatory
Version : 7       SEQ #125                       Status: Released
                  Compliance Date: JUL 10, 2003
=============================================================================

Associated patches: (v)PSO*7*82    <<= must be installed BEFORE `PSO*7*119'
                    (v)PSO*7*104   <<= must be installed BEFORE `PSO*7*119'

Subject: DELETED RX STATUS-CPRS MISMATCH;CMOP SUSPENSE FLAG;MISSING DIVISION

Category: 
  - Routine

Description: 
============

  
 1. This patch contains a post-install job, which will correct a status
    mismatch between Outpatient Pharmacy V. 7.0 orders which have been
    deleted and the corresponding orders in the Computerized Patient Record
    System (CPRS) V. 1.0. The initial problem could have occurred if the
    Outpatient Pharmacy V. 7.0 package mistakenly sent an "active" message
    to CPRS V. 1.0 on an old order, making it active in CPRS V. 1.0 when it
    should be Discontinued, Expired, or Canceled. Patch PSO*7*86 updated
    the status in CPRS V. 1.0 for orders that were Canceled or
    Discontinued.
  
    For deleted Outpatient Pharmacy V. 7.0 orders, the post-install 
    job will change CPRS V. 1.0 orders with an active status to a status of
    deleted and will also change the stop date in CPRS V. 1.0 to the date
    deleted if the CPRS V. 1.0 status is Discontinued by Provider.
  
 2. This patch also corrects the problem of an extra delimiter being
    stored in the PRESCRIPTION file (#52) if an up-arrow (^) was entered
    for the LOT# field (#24) when editing a prescription. A symptom of this
    problem is a null subscript error when trying to access the DIVISION
    field (#20) of the PRESCRIPTION file (#52).
  
    The post-install job will look for any entries with a null division and
    if the positions of the date fields appear to be shifted, it will
    remove the extra delimiter from the PRESCRIPTION file (#52).
  
     
    Upon completion of the post-install job a MailMan message will be sent
    to the patch installer with a subject of "Subj: Outpatient/CPRS Status
    clean-up". The message will indicate how many mismatched statuses were
    corrected and how many prescriptions with missing divisions were
    corrected.
  
     
  3. During the building of the Patient Profile through the Patient 
     Prescription Processing [PSO LM BACKDOOR] option, one of the 
     criteria for forcing the Status to SUSPENDED of prescriptions 
     that had an entry in the RX SUSPENSE file (#52.5) was at times
     found to be incorrect. If the entry in the RX SUSPENSE file
     (#52.5) was flagged as not printed, the software would force the
     prescription status to SUSPENDED. After this patch is installed,
     the software will also check if the prescription has already been
     transmitted to Consolidated Mail Outpatient Pharmacy (CMOP) V. 2.0
     system, and if so, the status will not be changed.
  
 4. When trying to edit a prescription, and the edit is not allowed 
    because either the order or patient is locked by another user, the 
    message indicating that the order or patient is locked will not always 
    contain the person's name that has the lock. This patch corrects the 
    problem.
  
 5. When the user edited a prescription in such a way that caused a new
    prescription to be created, the new prescription was not being 
    displayed in the Bingo Board. This patch corrects the problem.
    The prescription number from the previous edit could be associated to
    the next patient's list of prescriptions to be listed on the Bingo
    Board.  This patch also corrects this problem.
  
  
  
   
  
  Associated NOISs:
  =================
  BRX-0403-10680
  CLA-0802-20984
  CTX-0203-71391
  MAC-0302-63090
  MAC-1102-60501 
  MEM-0802-70843
  MIN-0203-40261
  MOU-0802-31295
  PHO-0103-60154
  SBY-1102-30317
  SBY-0103-31362
  CON-0303-11829
  HUN-0303-22477
  MAC-0103-62077
  PHO-1202-61121
   
  
  Test Sites:                                                         
  ===========
  ANN ARBOR, MI
  FAYETTEVILLE, AR
  MILWAUKEE, WI
  MINNEAPOLIS, MN
  MOUNTAIN HOME, TN
  OKLAHOMA CITY, OK
  SALISBURY, NC      
   
  Routine Summary:
  ================
  The second line now reads as follows:
  
     <TAB>;;7.0;OUTPATIENT PHARMACY;**[patch list]**;DEC 1997
  
   CHECK^XTSUMBLD results:
  
   Routine    Before Patch   After Patch   Patch List
   ====================================================
   PSOBUILD   18896255       18951329      23,82,119
   PSOELPS2     N/A          15324909      119
   PSOOREDT   28799384       26416171      4,20,27,37,57,46,78,102,104,119
  
  
  
  Installation Instructions:
  ==========================
  Before installing this patch, use List Tasks [XUTM INQ] option on the
  Taskman Management [XUTM MGR] menu to list currently running
  tasks. Do not install this patch while Outpatient Pharmacy users are
  using the software.
  
  Installation should take no longer than 5 minutes. Please do not queue
  the job of installing this patch. There is a post-install background
  job that will prompt for a date@time to run the clean up. You MUST
  respond with a date and time or NOW to queue the post-install job.
  You will not be able to see what you are answering for the prompt, but
  will be given an opportunity to see what was entered before the clean up
  job queues.
  
  It is recommended that the post-install be queued to run at a time when
  Outpatient Pharmacy package usage is at a minimum. This job may run for 
  several hours.
   
  This post-install job can be run again at a later time by calling the
  entry point D ^PSOELPS2 from programmer mode.
  
  Upon completion of the post-install job, a MailMan message with a subject
  of "Subj: Outpatient/CPRS Status clean-up" will be sent to the patch
  installer with the number of status mis-matches that were reset and the
  number of missing divisions that were corrected.
  
  
  An example of the install process is included here under the title
  "Example Installation".
  
  1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
   
  2. Review your mapped set. If the routines are mapped, they should
     be removed from the mapped set at this time.
  
  3. From the Kernel Installation & Distribution System menu, select
     the Installation menu.
  
  4. From this menu, you may select to use the following options:
     (when prompted for INSTALL NAME, enter PSO*7.0*119)
  
     a. Backup a Transport Global - this option will create a backup
        message of any routines exported with the patch. It will NOT
        backup any other changes such as DDs or templates.
  
     b. Compare Transport Global to Current System - this option will
        allow you to view all changes that will be made when the patch
        is installed. It compares all components of the patch (routines,
        DDs, templates, etc.).
  
     c. Verify Checksums in Transport Global - this option will ensure
        the integrity of the routines that are in the transport global.
  
   5. Use the Install Package(s) option and select the package PSO*7.0*119.
   
   6. When Prompted "Want KIDS to INHIBIT LOGONs during the install?
      YES//" respond NO.
  
   7. When Prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//" respond NO.
  
   8. The Environment check routine will now prompt the installer of the 
      patch for a date@time to run the post-install job. If no start date 
      and time is entered when prompted, the job will be queued to run NOW.
  
   9. If Routines were unmapped as part of step 2, they should be returned
      to completion.
  
  
  
 EXAMPLE INSTALLATION:
 =====================
 Select INSTALL NAME: PSO*7.0*119       Loaded from Distribution  
 12/12/02@22:04:
 38
      => PSO*7*119
  
 This Distribution was loaded on Dec 12, 2002@22:04:38 with header of
    PSO*7*119
    It consisted of the following Install(s):
     PSO*7.0*119
 Checking Install for Package PSO*7.0*119
  
 Install Questions for PSO*7.0*119
  
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME// 0;;999  GENERIC INCOMING TELNET
  
  
  Install Started for PSO*7.0*119 :
                Dec 12, 2002@22:05:05
  
 Build Distribution Date: Dec 12, 2002
  
  Installing Routines:
                Dec 12, 2002@22:05:05
  
  Running Post-Install Routine: ^PSOELPS2
  
 This post-install job searches for Outpatient Pharmacy orders
 that are deleted but are Active in CPRS. If any are found
 the order in CPRS will be updated with the appropriate status.
  
 The job also looks for Outpatient Pharmacy orders that are marked
 as DC'd by provider and if they really were deleted instead
 of discontinued, the CPRS order will be updated with the
 correct Stop Date.
  
 This post-install also attempts to clean up a bad node in the
 PRESCRIPTION file (#52) caused if an up-arrow (^) was entered for
 the LOT# when editing a prescription.
  
 At the following prompt, enter a starting date@time or enter NOW to
 queue the job immediately.
 If this prompting is during patch installation, you will not see what you 
 type.
  
 Queue clean-up Job to run Date@Time:   (DEC 12, 2002@22:35)
  
 Task will be queued to run DEC 12, 2002@22:35. Is that correct?  :Y
  
 Task Queued !
  
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSO*7.0*119 Installed.
                Dec 12, 2002@22:05:37
  
  Install Message sent #161923
 --------------------------------------------------------------------------
 ------
           [------------------------------------------------------------]
   100%    |             25             50             75               |
 Complete  [------------------------------------------------------------]
  
  
 Install Completed

Routine Information:
====================

Routine Name:
  - PSOBUILD


Routine Checksum:

Routine Name:
  - PSOOREDT


Routine Checksum:

Routine Name:
  - PSOELPS2


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : WHITE,ELAINE                   Date Entered : AUG 30, 2002
Completed By: GOYAL,NIHARIKA                Date Completed: JUN 09, 2003
Released By : KIMBLE,BRUCE                  Date Released : JUN 09, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

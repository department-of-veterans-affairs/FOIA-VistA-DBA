Released SR*3*130 SEQ #128
Extracted from mail message
**KIDS**:SR*3.0*130^

**INSTALL NAME**
SR*3.0*130
"BLD",5654,0)
SR*3.0*130^SURGERY^0^3040720^y
"BLD",5654,1,0)
^^2^2^3040720^
"BLD",5654,1,1,0)
THIS PATCH WILL ALLOW SURGERY USERS TO ENTER MORE THEN 15 LINE ITEMS FOR
"BLD",5654,1,2,0)
ALL MULTIPLE FIELDS.
"BLD",5654,4,0)
^9.64PA^^
"BLD",5654,"KRN",0)
^9.67PA^8989.52^19
"BLD",5654,"KRN",.4,0)
.4
"BLD",5654,"KRN",.401,0)
.401
"BLD",5654,"KRN",.402,0)
.402
"BLD",5654,"KRN",.403,0)
.403
"BLD",5654,"KRN",.5,0)
.5
"BLD",5654,"KRN",.84,0)
.84
"BLD",5654,"KRN",3.6,0)
3.6
"BLD",5654,"KRN",3.8,0)
3.8
"BLD",5654,"KRN",9.2,0)
9.2
"BLD",5654,"KRN",9.8,0)
9.8
"BLD",5654,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5654,"KRN",9.8,"NM",1,0)
SRCUSS0^^0^B18030404
"BLD",5654,"KRN",9.8,"NM","B","SRCUSS0",1)

"BLD",5654,"KRN",19,0)
19
"BLD",5654,"KRN",19.1,0)
19.1
"BLD",5654,"KRN",101,0)
101
"BLD",5654,"KRN",409.61,0)
409.61
"BLD",5654,"KRN",771,0)
771
"BLD",5654,"KRN",870,0)
870
"BLD",5654,"KRN",8989.51,0)
8989.51
"BLD",5654,"KRN",8989.52,0)
8989.52
"BLD",5654,"KRN",8994,0)
8994
"BLD",5654,"KRN","B",.4,.4)

"BLD",5654,"KRN","B",.401,.401)

"BLD",5654,"KRN","B",.402,.402)

"BLD",5654,"KRN","B",.403,.403)

"BLD",5654,"KRN","B",.5,.5)

"BLD",5654,"KRN","B",.84,.84)

"BLD",5654,"KRN","B",3.6,3.6)

"BLD",5654,"KRN","B",3.8,3.8)

"BLD",5654,"KRN","B",9.2,9.2)

"BLD",5654,"KRN","B",9.8,9.8)

"BLD",5654,"KRN","B",19,19)

"BLD",5654,"KRN","B",19.1,19.1)

"BLD",5654,"KRN","B",101,101)

"BLD",5654,"KRN","B",409.61,409.61)

"BLD",5654,"KRN","B",771,771)

"BLD",5654,"KRN","B",870,870)

"BLD",5654,"KRN","B",8989.51,8989.51)

"BLD",5654,"KRN","B",8989.52,8989.52)

"BLD",5654,"KRN","B",8994,8994)

"BLD",5654,"QUES",0)
^9.62^^
"BLD",5654,"REQB",0)
^9.611^1^1
"BLD",5654,"REQB",1,0)
SR*3.0*118^1
"BLD",5654,"REQB","B","SR*3.0*118",1)

"MBREQ")
0
"PKG",308,-1)
1^1
"PKG",308,0)
SURGERY^SR^SURGICAL DATA COLLECTION AND OPERATIONS SCHEDULING
"PKG",308,20,0)
^9.402P^^
"PKG",308,22,0)
^9.49I^1^1
"PKG",308,22,1,0)
3.0^2930624^2940818
"PKG",308,22,1,"PAH",1,0)
130^3040720^100104
"PKG",308,22,1,"PAH",1,1,0)
^^2^2^3040720
"PKG",308,22,1,"PAH",1,1,1,0)
THIS PATCH WILL ALLOW SURGERY USERS TO ENTER MORE THEN 15 LINE ITEMS FOR
"PKG",308,22,1,"PAH",1,1,2,0)
ALL MULTIPLE FIELDS.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SRCUSS0")
0^1^B18030404
"RTN","SRCUSS0",1,0)
SRCUSS0 ;TAMPA/CFB - SCREEN SERVER ; [ 03/11/02  13:37 PM ]
"RTN","SRCUSS0",2,0)
 ;;3.0; Surgery ;**66,108,118,130**;24 Jun 93
"RTN","SRCUSS0",3,0)
CO S Q(12,1)=$P(Q(2),":",1),Q(12,2)=$P(Q(2),":",2),Q(12,0)="",Q(12,8)=0 F Q(12,7)=+Q(12,1):0:+Q(12,2) D COM Q:Q(12,8)!(Q(12,7)>+Q(12,2))  I $L(Q(12,0))+$L(Q0(Q,0))>100 D COM1 Q
"RTN","SRCUSS0",4,0)
 S Q(2)=Q(12,1),Q0(Q,0)=Q(12,1)_";"_Q(12,0)_Q(12,2)_";"_Q0(Q,0) Q
"RTN","SRCUSS0",5,0)
COM S Q(12,7)=$O(@("^DD("_+Q(0,Q)_","_Q(12,7)_")")) S:Q(12,7)'?1NP.NP!(Q(12,7)="")!(Q(12,7)'<Q(12,2)) Q(12,8)=1 Q:Q(12,8)  S Q(12,0)=Q(12,0)_Q(12,7)_";" Q
"RTN","SRCUSS0",6,0)
COM1 S Q(12,0)=$E(Q(12,0),1,$L(Q(12,0))-1)_":" Q
"RTN","SRCUSS0",7,0)
M S Q("LIMIT")=75,Q("LINE")=0
"RTN","SRCUSS0",8,0)
 W:Q("ED") Q("NOR") S Q=Q+1,(Q(1,Q),Q(13),Q0(0,Q))=1,Q(0,Q)=$P(Q(3),U,2)
"RTN","SRCUSS0",9,0)
 I $D(^DD(+Q(0,Q),.01,12.1)) X ^(12.1) S Q("S",Q,"MUL")=DIC("S") K DIC("S")
"RTN","SRCUSS0",10,0)
 S Q(8,Q)=Q(8,Q-1)_Q(9,Q-1)_","_$C(34)_$P($P(Q(3),U,4),";",1)_$C(34)_",",Q3(Q)=$P(Q(3),U,1),Q0(Q,Q0(0,Q))=Q3(Q)_";.01;",Q(10,Q)=0
"RTN","SRCUSS0",11,0)
 K:$S('$D(Q(12,4)):0,+Q(12,4)=Q&(Q(12,4)["S"):1,1:0) Q(12,4) G:$D(Q(12,4)) MQ1
"RTN","SRCUSS0",12,0)
 I @("'($D("_Q(8,Q)_"0))#2)") S @(Q(8,Q)_"0)")=$P(Q(3),U,1,2)
"RTN","SRCUSS0",13,0)
 I $D(Q(14)),'$D(^DIE(Q(14),"DR",Q,+Q(0,Q))) G MQ1
"RTN","SRCUSS0",14,0)
M00 X Q(0)
"RTN","SRCUSS0",15,0)
 I Q("LIMIT")=19,$P(@(Q(8,Q)_"0)"),U,4)>14 W Q("HI") S DIC=Q(8,Q),DIC(0)="QAEM" K DIC("V") D ^DIC G MP
"RTN","SRCUSS0",16,0)
M0 I Q("LIMIT")>19,Q("1",Q)>16 D CONT G:+Q(1)>0 M11A I Q(1)="^" S Q(13)=1 K Q(11),Q(13,0) G M11
"RTN","SRCUSS0",17,0)
 K Q(13,0) G:Q(10,Q)'=+Q(10,Q) MQ1 S (DA(Q),Q(7,Q(1,Q)),Q(9,Q),Q(10,Q))=$O(@(Q(8,Q)_Q(10,Q)_")")) G:Q(10,Q)'=+Q(10,Q)!(Q(10,Q)<1) M1 D A^SRCUSS S Q4(-4,Q(1,Q)-1)=Q(7) I Q(13)#Q("LIMIT") G M0
"RTN","SRCUSS0",18,0)
M1 W !,Q(1,Q),?5,"NEW ENTRY" S Q(7,Q(1,Q))=$S(Q(1,Q)=1:1,1:Q(7,Q(1,Q)-1)+1),Q(13)=1 K Q(11),Q(13,0)
"RTN","SRCUSS0",19,0)
 S:$P(Q(3),"^",5,99)["D IX^DIC" Q("S",Q,"IX")=$P(Q(3),"^",5,99)
"RTN","SRCUSS0",20,0)
M11 K QPQPQ W Q("HI") W !!,"Enter Screen Server Function:  " R Q(1):DTIME S:'$T Q(1)="" S:Q(1)=0 Q(1)="?" S:Q(1)="a" Q(1)="A" I Q("LIMIT")=19,Q(1)>15 S Q(1)="?"
"RTN","SRCUSS0",21,0)
M11A S:Q(1)?.E1C.E Q(1)="?" I Q(1)["?"!(Q(1)?2.99A) D QUES^SRCUSS5 G MQ
"RTN","SRCUSS0",22,0)
 S:$S(Q(1)="^^":1,$E(Q(1))'="L":0,+$E(Q(1),2,99)<Q:1,1:0) Q(12,4)=$E(Q(1),2,99) G:$D(Q(13,0))&(Q(1)="") M00 K Q(13,0)
"RTN","SRCUSS0",23,0)
 S Q8(2)=0 I Q(1,Q)=+Q(1),Q(1)["N" S Q8(2)=1 S:+Q(1)=1 Q(3)=^DD(+$P(Q(3),U,2),.01,0) G M110
"RTN","SRCUSS0",24,0)
 I +Q(1)>0,$E(Q(1),$L(Q(1)))="R",+Q(1)<Q(1,Q),$D(Q4(-4,+Q(1))) G M110
"RTN","SRCUSS0",25,0)
 I (Q(1)=""&(Q(13)=1))!(Q(1)[U) G MQ1
"RTN","SRCUSS0",26,0)
 G M11:Q(1)'=+Q(1)!(Q(1)<1)!(Q(1)>Q(1,Q)),M0:Q(1)="" S (DA(Q),Q(9,Q))=Q(7,Q(1)),Q(13)=1
"RTN","SRCUSS0",27,0)
M110 I '$D(Q3("VIEW")),(+Q(1)=Q(1,Q)!(Q(1)["R")) S:Q(1)=1 @("Q(3)=^DD("_+$P(Q(3),U,2)_",.01,0)") S DIC=Q(8,Q),DIC(0)="ZMEL"_$S(Q(1)'["R":"QA",1:""),DIC("DR")=.01
"RTN","SRCUSS0",28,0)
 S Q(1)=+Q(1)
"RTN","SRCUSS0",29,0)
 I $T S:$D(Q("S",Q,"MUL")) DIC("S")=Q("S",Q,"MUL")
"RTN","SRCUSS0",30,0)
 I $T S:$D(Q4(-4,Q(1))) X=$C(34)_Q4(-4,Q(1))_$C(34) K DIC("V") D SET,^DIC K DIC("S") G MQ:+Y<1 G SET2
"RTN","SRCUSS0",31,0)
M111 ;
"RTN","SRCUSS0",32,0)
 I $D(Q3("VIEW")),Q(1)=Q(1,Q) G MQ
"RTN","SRCUSS0",33,0)
 S Q3(Q)=$E(Q3(Q)_"  ("_Q4(-4,Q(1)),1,60)_")" K Q4
"RTN","SRCUSS0",34,0)
M12 I $D(Q(14)) K Q(10) S (Q(1,Q),Q(13),Q0(0,Q))=1 X Q(0) D TEMC^SRCUSS4,A^SRCUSS:'(+$P(Q0(Q,1),";",2)'=".01"&($P(Q0(Q,1),";",3)="")) G MQ
"RTN","SRCUSS0",35,0)
 I $E(Q(12,5),1,2)="DR",$D(DR(Q,+Q(0,Q)))#2 K Q(10) S Q7="DR("_Q_","_+Q(0,Q)_")",(Q(1,Q),Q(13),Q0(0,Q))=1 X Q(0) D PAGE^SRCUSS4,A^SRCUSS:'($P(Q0(Q,1),";",2)=".01"&($P(Q0(Q,1),";",3)="")) G MQ
"RTN","SRCUSS0",36,0)
 S (Q("P",Q),Q8,Q6)=1,Q0(Q,0)=".01:999999999" D PA1^SRCUSS4
"RTN","SRCUSS0",37,0)
M2 K Q(10,Q) S (Q(1,Q),Q(13))=1 X Q(0) D A^SRCUSS K Q(1,Q) S Q=Q-1,Q(1,Q)=1 S Q(1)="Q",Q(3)=Q(2,Q,Q2(Q,1)) G M
"RTN","SRCUSS0",38,0)
MQ W:Q("ED") Q("HI") K Q8(2),Q(10,Q),Q0(Q),Q("S",Q) S Q=Q-1,Q(1)="Q",Q(13)=1,Q(3)=Q(2,Q,Q2(Q,1)),Q(0,Q+1)=$P(Q(3),U,2) G M
"RTN","SRCUSS0",39,0)
MQ1 W:Q("ED") Q("HI") K Q8(2),Q(10,Q),Q0(Q),Q("S",Q) S Q=Q-1,Q(1)="Q",Q(13)=1,Q(12,12)="" Q
"RTN","SRCUSS0",40,0)
MP X Q(0) S Q(1,Q)=1 G M1:Y<1 S (DA(Q),Q(7,Q(1,Q)),Q(9,Q),Q(10,Q))=+Y D A^SRCUSS S Q4(-4,Q(1,Q)-1)=Q(7) G M1
"RTN","SRCUSS0",41,0)
SET S QQ=$S(Q>1:Q-1,1:1) F Q8=1:1:QQ S QQQ=$S(Q>1:Q-Q8,1:1),DA(Q8)=Q(9,QQQ)
"RTN","SRCUSS0",42,0)
 Q
"RTN","SRCUSS0",43,0)
SET2 I Q(5)="P"&(Q(7,Q(1))'=+Y) D  G M11A:'$D(Y)
"RTN","SRCUSS0",44,0)
 .S Q(999)=0
"RTN","SRCUSS0",45,0)
 .F  S Q(999)=$O(Q(7,Q(999))) Q:'Q(999)  D
"RTN","SRCUSS0",46,0)
 ..S PSDPTR=Q(7,Q(999))
"RTN","SRCUSS0",47,0)
 ..S:PSDPTR=+Y Q(1)=Q(999),Q(999)=99
"RTN","SRCUSS0",48,0)
 .K Y,Q(999),PSDPTR
"RTN","SRCUSS0",49,0)
 S @("Q(9,Q)=$P("_DIC_"0),U,3)"),Q4(-4,Q(1))=+Y(0),Q(7)=Q4(-4,Q(1)),Q("BP")="" D:$P(Q(3),U,2)["P" P^SRCUSS S Q4(-4,Q(1))=Q(7) K Q("BP") G M110:Q8(2)
"RTN","SRCUSS0",50,0)
 G M111
"RTN","SRCUSS0",51,0)
 Q
"RTN","SRCUSS0",52,0)
CONT ;
"RTN","SRCUSS0",53,0)
 S:Q("LINE")>15 Q("LINE")=0
"RTN","SRCUSS0",54,0)
 I Q("LINE")=0 W !!,"Press <RETURN> to see more, '^' to exit this list, OR",!,"CHOOSE 1-",Q("1",Q)-1,": " R Q(1):DTIME S:'$T Q(1)="" S:+Q(1)'>0&(Q(1)'="^") Q(1)=""
"RTN","SRCUSS0",55,0)
 S Q("LINE")=Q("LINE")+1
"RTN","SRCUSS0",56,0)
 S:Q(1)>(Q("1",Q)-1) Q(1)=""
"RTN","SRCUSS0",57,0)
 Q
"VER")
8.0^22
**END**
**END**

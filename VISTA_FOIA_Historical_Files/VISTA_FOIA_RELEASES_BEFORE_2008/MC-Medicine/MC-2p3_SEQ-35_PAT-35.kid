Released MC*2.3*35 SEQ #35
Extracted from mail message
**KIDS**:MC*2.3*35^

**INSTALL NAME**
MC*2.3*35
"BLD",15405,0)
MC*2.3*35^MEDICINE^0^3030213^y
"BLD",15405,1,0)
^^2^2^3030124^^^^
"BLD",15405,1,1,0)
Please refer to the National Patch Module for the detail of this patch 
"BLD",15405,1,2,0)
build.
"BLD",15405,4,0)
^9.64PA^700^2
"BLD",15405,4,697.3,0)
697.3
"BLD",15405,4,697.3,222)
n^n^f^^y^MCSCREEN^y^r^n
"BLD",15405,4,697.3,224)

"BLD",15405,4,700,0)
700
"BLD",15405,4,700,2,0)
^9.641^700^1
"BLD",15405,4,700,2,700,0)
PULMONARY FUNCTION TESTS  (File-top level)
"BLD",15405,4,700,2,700,1,0)
^9.6411^38^2
"BLD",15405,4,700,2,700,1,38,0)
USE RACE CORRECTIONS
"BLD",15405,4,700,2,700,1,38.5,0)
RACE CORRECTION FOR RACE TYPE
"BLD",15405,4,700,222)
y^y^p^^^^n^^n
"BLD",15405,4,700,224)

"BLD",15405,4,"APDD",700,700)

"BLD",15405,4,"APDD",700,700,38)

"BLD",15405,4,"APDD",700,700,38.5)

"BLD",15405,4,"B",697.3,697.3)

"BLD",15405,4,"B",700,700)

"BLD",15405,"INID")
^
"BLD",15405,"INIT")

"BLD",15405,"KRN",0)
^9.67PA^8989.52^19
"BLD",15405,"KRN",.4,0)
.4
"BLD",15405,"KRN",.4,"NM",0)
^9.68A^1^1
"BLD",15405,"KRN",.4,"NM",1,0)
MCRHBACK    FILE #701^701^0
"BLD",15405,"KRN",.4,"NM","B","MCRHBACK    FILE #701",1)

"BLD",15405,"KRN",.401,0)
.401
"BLD",15405,"KRN",.402,0)
.402
"BLD",15405,"KRN",.402,"NM",0)
^9.68A^3^3
"BLD",15405,"KRN",.402,"NM",1,0)
MCPFTEDIT    FILE #700^700^0
"BLD",15405,"KRN",.402,"NM",2,0)
MCPFTEDITNEW    FILE #700^700^0
"BLD",15405,"KRN",.402,"NM",3,0)
MCFLPFT    FILE #700^700^0
"BLD",15405,"KRN",.402,"NM","B","MCFLPFT    FILE #700",3)

"BLD",15405,"KRN",.402,"NM","B","MCPFTEDIT    FILE #700",1)

"BLD",15405,"KRN",.402,"NM","B","MCPFTEDITNEW    FILE #700",2)

"BLD",15405,"KRN",.403,0)
.403
"BLD",15405,"KRN",.5,0)
.5
"BLD",15405,"KRN",.84,0)
.84
"BLD",15405,"KRN",3.6,0)
3.6
"BLD",15405,"KRN",3.8,0)
3.8
"BLD",15405,"KRN",9.2,0)
9.2
"BLD",15405,"KRN",9.8,0)
9.8
"BLD",15405,"KRN",9.8,"NM",0)
^9.68A^10^10
"BLD",15405,"KRN",9.8,"NM",1,0)
MCARATVE^^0^B8505842
"BLD",15405,"KRN",9.8,"NM",2,0)
MCARP^^0^B33243572
"BLD",15405,"KRN",9.8,"NM",3,0)
MCBPFTP1^^0^B28642672
"BLD",15405,"KRN",9.8,"NM",4,0)
MCPFTE^^0^B10983954
"BLD",15405,"KRN",9.8,"NM",5,0)
MCPFTI^^0^B9367322
"BLD",15405,"KRN",9.8,"NM",6,0)
MCPFTP1^^0^B31423809
"BLD",15405,"KRN",9.8,"NM",7,0)
MCPFTSS^^0^B1617583
"BLD",15405,"KRN",9.8,"NM",8,0)
MCRH1^^0^B31516454
"BLD",15405,"KRN",9.8,"NM",9,0)
MCRH3^^0^B3720034
"BLD",15405,"KRN",9.8,"NM",10,0)
MCARE^^0^B27909496
"BLD",15405,"KRN",9.8,"NM","B","MCARATVE",1)

"BLD",15405,"KRN",9.8,"NM","B","MCARE",10)

"BLD",15405,"KRN",9.8,"NM","B","MCARP",2)

"BLD",15405,"KRN",9.8,"NM","B","MCBPFTP1",3)

"BLD",15405,"KRN",9.8,"NM","B","MCPFTE",4)

"BLD",15405,"KRN",9.8,"NM","B","MCPFTI",5)

"BLD",15405,"KRN",9.8,"NM","B","MCPFTP1",6)

"BLD",15405,"KRN",9.8,"NM","B","MCPFTSS",7)

"BLD",15405,"KRN",9.8,"NM","B","MCRH1",8)

"BLD",15405,"KRN",9.8,"NM","B","MCRH3",9)

"BLD",15405,"KRN",19,0)
19
"BLD",15405,"KRN",19.1,0)
19.1
"BLD",15405,"KRN",101,0)
101
"BLD",15405,"KRN",409.61,0)
409.61
"BLD",15405,"KRN",771,0)
771
"BLD",15405,"KRN",870,0)
870
"BLD",15405,"KRN",8989.51,0)
8989.51
"BLD",15405,"KRN",8989.52,0)
8989.52
"BLD",15405,"KRN",8994,0)
8994
"BLD",15405,"KRN","B",.4,.4)

"BLD",15405,"KRN","B",.401,.401)

"BLD",15405,"KRN","B",.402,.402)

"BLD",15405,"KRN","B",.403,.403)

"BLD",15405,"KRN","B",.5,.5)

"BLD",15405,"KRN","B",.84,.84)

"BLD",15405,"KRN","B",3.6,3.6)

"BLD",15405,"KRN","B",3.8,3.8)

"BLD",15405,"KRN","B",9.2,9.2)

"BLD",15405,"KRN","B",9.8,9.8)

"BLD",15405,"KRN","B",19,19)

"BLD",15405,"KRN","B",19.1,19.1)

"BLD",15405,"KRN","B",101,101)

"BLD",15405,"KRN","B",409.61,409.61)

"BLD",15405,"KRN","B",771,771)

"BLD",15405,"KRN","B",870,870)

"BLD",15405,"KRN","B",8989.51,8989.51)

"BLD",15405,"KRN","B",8989.52,8989.52)

"BLD",15405,"KRN","B",8994,8994)

"BLD",15405,"QUES",0)
^9.62^^
"BLD",15405,"REQB",0)
^9.611^2^2
"BLD",15405,"REQB",1,0)
MC*2.3*33^2
"BLD",15405,"REQB",2,0)
MC*2.3*31^2
"BLD",15405,"REQB","B","MC*2.3*31",2)

"BLD",15405,"REQB","B","MC*2.3*33",1)

"DATA",697.3,679,0)
MCRHBACK^15^^@^^2^Rheumatology patient background info  (page 1 of 1).^1^
"DATA",697.3,679,1,0)
^697.31I^15^14
"DATA",697.3,679,1,1,0)
PATIENT(R)^DY=2,DX=0^30^DY=2,DX=14^.01^RFX^1^^^^^^1
"DATA",697.3,679,1,2,0)
ADDRESS^DY=3,DX=0^35^DY=3,DX=11^.111^F^^^^^^^3
"DATA",697.3,679,1,3,0)
ADDRESS:^DY=4,DX=0^30^DY=4,DX=11^.112^F0^^^^^^^4
"DATA",697.3,679,1,4,0)
STATE^DY=5,DX=0^30^DY=5,DX=11^.115^P5'^^^^^^^5
"DATA",697.3,679,1,5,0)
ZIP CODE^DY=5,DX=43^5^DY=5,DX=55^.116^F^^^^^^^6
"DATA",697.3,679,1,6,0)
PHONE NUMBER [H]^DY=7,DX=0^20^DY=7,DX=20^.131^F^^^^^^^7
"DATA",697.3,679,1,7,0)
PHONE NUMBER [W]^DY=8,DX=0^20^DY=8,DX=20^.132^F^^^^^^^8
"DATA",697.3,679,1,8,0)
DATE OF BIRTH^DY=9,DX=0^17^DY=9,DX=17^.03^RFX^^^^^^^9
"DATA",697.3,679,1,9,0)
SEX^DY=10,DX=0^6^DY=10,DX=7^.02^RS^^^^^^^10
"DATA",697.3,679,1,9,1)

"DATA",697.3,679,1,10,0)
RACE^DY=11,DX=0^60^DY=11,DX=14^.06^P10'^0^^^^^^11
"DATA",697.3,679,1,10,1)

"DATA",697.3,679,1,10,2)

"DATA",697.3,679,1,11,0)
MARITAL STATUS^DY=12,DX=0^15^DY=12,DX=18^.05^RP11'^^^^^^^12
"DATA",697.3,679,1,12,0)
EMPLOYMENT STATUS^DY=14,DX=0^20^DY=14,DX=21^.31115^S^^^^^^^13
"DATA",697.3,679,1,13,0)
OCCUPATION^DY=15,DX=0^30^DY=15,DX=14^.07^F^^^^^^^14
"DATA",697.3,679,1,15,0)
SSN^DY=2,DX=46^10^DY=2,DX=53^.09^RFX^0^^^^^^2
"DATA",697.3,2448,0)
MCFSPFT^15^^#^MCPFT040^700^PULMONARY FUNCTION TEST (SCREEN 1 OF 2)^1
"DATA",697.3,2448,1,0)
^697.31I^22^21
"DATA",697.3,2448,1,1,0)
DATE/TIME^DY=2,DX=0^17^DY=2,DX=13^.01^RD^^^^^^^1
"DATA",697.3,2448,1,2,0)
MEDICAL PATIENT^DY=3,DX=0^30^DY=3,DX=19^1^RP690^^^^^^^2
"DATA",697.3,2448,1,2,1)
D SETUP4^MCARE S DR="28///^S X=MCSEX",DIE=DJDD,DA=DJDN D ^DIE
"DATA",697.3,2448,1,3,0)
HEIGHT (INCHES.TENTHS)^DY=4,DX=0^6^DY=4,DX=26^3^NJ5,1^^^^^^^3
"DATA",697.3,2448,1,3,2)
I V(4) X DJCP W DJHIN,"To enter inches, centimeters must be deleted." S DJNX=4
"DATA",697.3,2448,1,4,0)
HEIGHT (CM)^DY=4,DX=36^6^DY=4,DX=51^2^NJ3,0^^^^^^^4
"DATA",697.3,2448,1,4,2)
I V(3) S DJNX=5
"DATA",697.3,2448,1,5,0)
WEIGHT (POUNDS.TENTHS)^DY=5,DX=0^6^DY=5,DX=26^4^NJ5,1^^^^^^^5
"DATA",697.3,2448,1,5,2)
I V(6) X DJCP W DJHIN,"To enter lbs., kilograms must be deleted." S DJNX=7
"DATA",697.3,2448,1,6,0)
WEIGHT (KG)^DY=5,DX=36^4^DY=5,DX=51^5^NJ3,0^^^^^^^6
"DATA",697.3,2448,1,6,2)
I V(5) S DJNX=7
"DATA",697.3,2448,1,7,0)
BAROMETRIC PRESSURE^DY=6,DX=0^4^DY=6,DX=23^6^RNJ3,0^^^^^^^7
"DATA",697.3,2448,1,8,0)
ROOM TEMPERATURE (CENTIGRADE)^DY=6,DX=29^4^DY=6,DX=62^6.5^RNJ2,0^^^^^^^8
"DATA",697.3,2448,1,9,0)
TECHNICIAN^DY=7,DX=0^30^DY=7,DX=14^34^RP200'^^^^^^^9
"DATA",697.3,2448,1,10,0)
USE RACE CORRECTIONS^DY=8,DX=0^4^DY=8,DX=24^38^S^^^^^^^10
"DATA",697.3,2448,1,10,1)

"DATA",697.3,2448,1,10,2)
I '$D(MCRACE) S DJNX=12
"DATA",697.3,2448,1,11,0)
SMOKER^DY=9,DX=0^4^DY=9,DX=10^7^RS^^^^^^^12
"DATA",697.3,2448,1,12,0)
CURRENT BRONCHODILATOR^DY=9,DX=29^4^DY=9,DX=55^8^S^^^^^^^13
"DATA",697.3,2448,1,13,0)
WARD/CLINIC^DY=10,DX=0^30^DY=10,DX=15^9^P44'^^^^^^^14
"DATA",697.3,2448,1,14,0)
REFERRING PHYSICIAN^DY=11,DX=0^30^DY=11,DX=23^10^P200'^^^^^^^15
"DATA",697.3,2448,1,16,0)
VOLUME STUDY(M)^DY=12,DX=49^4^DY=12,DX=68^17^700.017SAM^^^^^^MCPFT020^17
"DATA",697.3,2448,1,17,0)
FLOW STUDY MACHINE^DY=13,DX=0^14^DY=13,DX=22^35^S^^^^^^^18
"DATA",697.3,2448,1,18,0)
PATIENT EFFORT^DY=13,DX=49^9^DY=13,DX=67^39^S^^^^^^^19
"DATA",697.3,2448,1,19,0)
FLOWS STUDY(M)^DY=14,DX=0^30^DY=14,DX=18^18^700.018SAM^^^^^^MCPFT030^20
"DATA",697.3,2448,1,20,0)
DIFFUSING CAPACITY METHOD^DY=15,DX=0^13^DY=15,DX=29^37^S^^^^^^^21
"DATA",697.3,2448,1,21,0)
CONSULT DX(M)^DY=12,DX=0^30^DY=12,DX=17^11^700.01PM^^^^^^MCPFT010^16
"DATA",697.3,2448,1,22,0)
RACE CORRECTIONS FOR RACE TYPE^DY=8,DX=29^6^DY=8,DX=63^38.5^S^^^^^^^11
"DATA",697.3,2448,1,22,2)
I $L($G(MCRACE))<2!($P($G(^MCAR(700,+DJDN,17)),U,5)'="Y") S DJNX=12
"DATA",697.3,2452,0)
MCPFT040^15^MCFSPFT^#^^700^PULMONARY FUNCTION TEST (SCREEN 2 OF 2)^1^21
"DATA",697.3,2452,1,0)
^697.31I^3^3
"DATA",697.3,2452,1,1,0)
DLCO-SB^DY=3,DX=0^5^DY=3,DX=11^19^NJ4,1^^^^^^^22
"DATA",697.3,2452,1,1,2)
D ^MCPFTSS
"DATA",697.3,2452,1,2,0)
BLOOD GAS(M)^DY=3,DX=18^21^DY=3,DX=34^20^700.02SAM^^^^^^MCPFT050^23
"DATA",697.3,2452,1,3,0)
SPECIAL STUDIES(M)^DY=4,DX=0^17^DY=4,DX=22^32^700.032SM^^^^^^MCPFT160^24
"FIA",697.3)
MEDICINE SCREEN (USER)
"FIA",697.3,0)
^MCAR(697.3,
"FIA",697.3,0,0)
697.3I
"FIA",697.3,0,1)
n^n^f^^y^MCSCREEN^y^r^n
"FIA",697.3,0,10)

"FIA",697.3,0,11)

"FIA",697.3,0,"RLRO")
^DIBT(1128,1)
"FIA",697.3,0,"VR")
2.3^MC
"FIA",697.3,697.3)
0
"FIA",697.3,697.31)
0
"FIA",700)
PULMONARY FUNCTION TESTS
"FIA",700,0)
^MCAR(700,
"FIA",700,0,0)
700ID
"FIA",700,0,1)
y^y^p^^^^n^^n
"FIA",700,0,10)

"FIA",700,0,11)

"FIA",700,0,"RLRO")

"FIA",700,0,"VR")
2.3^MC
"FIA",700,700)
1
"FIA",700,700,38)

"FIA",700,700,38.5)

"KRN",.4,1594,-1)
0^1
"KRN",.4,1594,0)
MCRHBACK^3020906.1347^^701^^^3020906
"KRN",.4,1594,"DXS",1,"F")
FEMALE
"KRN",.4,1594,"DXS",1,"M")
MALE
"KRN",.4,1594,"DXS",2,1)
EMPLOYED FULL TIME
"KRN",.4,1594,"DXS",2,2)
EMPLOYED PART TIME
"KRN",.4,1594,"DXS",2,3)
NOT EMPLOYED
"KRN",.4,1594,"DXS",2,4)
SELF EMPLOYED
"KRN",.4,1594,"DXS",2,5)
RETIRED
"KRN",.4,1594,"DXS",2,6)
ACTIVE MILITARY DUTY
"KRN",.4,1594,"DXS",2,9)
UNKNOWN
"KRN",.4,1594,"F",1)
"BACK GROUND INFORMATION";C1~-690,^MCAR(690,^^S I(0,0)=D0 S DIP(1)=$S($D(^MCAR(701,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;"1:"~
"KRN",.4,1594,"F",2)
-690,-2,^DPT(^^S I(100,0)=D0 S DIP(101)=$S($D(^MCAR(690,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;".01:"~-690,-2,"Address:";C1;S~
"KRN",.4,1594,"F",3)
-690,-2,.111;C20;X~-690,-2,.112;C20;X~-690,-2,.113;C20;X~-690,-2,.115;C20;X~-690,-2,.116;C30;X~-690,-2,"Home phone:";C1;S~-690,-2,.131;C20;X~
"KRN",.4,1594,"F",4)
-690,-2,"Work phone:";C1~-690,-2,.132;C20;X~-690,-2,"Sex:";C1;S~-690,-2,.02;C20;X~-690,-2,"Race: ";C1~-690,-2,W ?19,$G(MCARRC);Z;"W ?19,$G(MCARRC)"~
"KRN",.4,1594,"F",5)
-690,-2,"Maritus status: ";C1;S~-690,-2,.05;C20;X~-690,-2,"Employment status: ";C1;S~-690,-2,.31115;C20;X~-690,-2,"Occupation:";C1;S~-690,-2,.07;C20;X~
"KRN",.4,1594,"F",6)
-690," ";Y-1;C1~
"KRN",.4,1594,"H")
@
"KRN",.4,1594,"IOM")
80
"KRN",.4,1594,"LAST")

"KRN",.4,1594,"ROU")
^MCARORB
"KRN",.4,1594,"ROUOLD")
MCARORB
"KRN",.4,1594,"SUB")
1
"KRN",.402,1735,-1)
0^1
"KRN",.402,1735,0)
MCPFTEDIT^3030213.1359^^700^^^3030213
"KRN",.402,1735,"DIAB",1,1,700.01,0)
ALL
"KRN",.402,1735,"DIAB",1,1,700.017,0)
ALL
"KRN",.402,1735,"DIAB",1,1,700.018,0)
ALL
"KRN",.402,1735,"DIAB",1,1,700.02,0)
ALL
"KRN",.402,1735,"DR",1,700)
.01;1;3;I $P(^MCAR(700,DA,0),U,4) S Y=4;2;4;I $P(^MCAR(700,DA,0),U,5) S Y=6;5;6;6.5;34;28///^S X=MCSEX;I '$D(MCRACE) S Y="@1";38;I $P($G(^MCAR(700,DA,17)),U,5)'="Y" S Y="@1";I '$D(MCMRACE) S Y="@1";38.5;@1;7:10;11;17;35;39;18;37;
"KRN",.402,1735,"DR",1,700,1)
19;20;32;
"KRN",.402,1735,"DR",2,700.01)
.01
"KRN",.402,1735,"DR",2,700.017)
.01:6
"KRN",.402,1735,"DR",2,700.018)
.01:4;5.5:6
"KRN",.402,1735,"DR",2,700.02)
.01:10
"KRN",.402,1735,"DR",2,700.032)
.01;I X="S" S Y=4;I X="E" S Y=14;I X="P" S Y=35;1:3;S Y=40;4:8;S Y=40;14;10:12.6;15:21.5;23;24;22;22.5;28:30;S Y=40;35;40;
"KRN",.402,1735,"DR",3,700.042)
.01
"KRN",.402,1735,"DR",3,700.3229)
.01
"KRN",.402,1769,-1)
0^2
"KRN",.402,1769,0)
MCPFTEDITNEW^3030213.1401^^700^^^3030213
"KRN",.402,1769,"DIAB",1,1,700.01,0)
ALL
"KRN",.402,1769,"DIAB",1,1,700.017,0)
ALL
"KRN",.402,1769,"DIAB",1,1,700.018,0)
ALL
"KRN",.402,1769,"DIAB",1,1,700.02,0)
ALL
"KRN",.402,1769,"DR",1,700)
.01;1;3;I $P(^MCAR(700,DA,0),U,4) S Y=4;2;4;I $P(^MCAR(700,DA,0),U,5) S Y=6;5;6;6.5;34;28///^S X=MCSEX;I '$D(MCRACE) S Y="@1";38;I $P($G(^MCAR(700,DA,17)),U,5)'="Y" S Y="@1";I '$D(MCMRACE) S Y="@1";38.5;@1;7:10;11;17;35;39;18;37;
"KRN",.402,1769,"DR",1,700,1)
19;20;32;
"KRN",.402,1769,"DR",2,700.01)
.01
"KRN",.402,1769,"DR",2,700.017)
.01:6
"KRN",.402,1769,"DR",2,700.018)
.01:4;5.5:6
"KRN",.402,1769,"DR",2,700.02)
.01:10
"KRN",.402,1769,"DR",2,700.032)
.01;21;16;18;18.2;18.4;16.5;22.5;14;10;19;11;12.3;29;
"KRN",.402,1769,"DR",3,700.3229)
.01;
"KRN",.402,1780,-1)
0^3
"KRN",.402,1780,0)
MCFLPFT^3030213.1357^^700^^^3030213
"KRN",.402,1780,"DIAB",1,1,700.01,0)
ALL
"KRN",.402,1780,"DIAB",1,1,700.017,0)
ALL
"KRN",.402,1780,"DIAB",1,1,700.018,0)
ALL
"KRN",.402,1780,"DIAB",1,1,700.02,0)
ALL
"KRN",.402,1780,"DR",1,700)
.01;1;3;I $P(^MCAR(700,DA,0),U,4) S Y=4;2;4;I $P(^MCAR(700,DA,0),U,5) S Y=6;5;6;6.5;34;28///^S X=MCSEX;I '$D(MCRACE) S Y="@1";38;I $P($G(^MCAR(700,DA,17)),U,5)'="Y" S Y="@1";I '$D(MCMRACE) S Y="@1";38.5;@1;7:10;11;17;35;39;18;37;
"KRN",.402,1780,"DR",1,700,1)
19;20;32;
"KRN",.402,1780,"DR",2,700.01)
.01
"KRN",.402,1780,"DR",2,700.017)
.01:6
"KRN",.402,1780,"DR",2,700.018)
.01:4;5.5:6
"KRN",.402,1780,"DR",2,700.02)
.01:10
"KRN",.402,1780,"DR",2,700.032)
.01;I X="S" S Y=4;I X="E" S Y=14;I X="P" S Y=35;1:3;S Y=40;4:8;S Y=40;14;10:12.6;15:21.5;23;24;22;22.5;28:30;S Y=40;35;40;
"KRN",.402,1780,"DR",3,700.042)
.01
"KRN",.402,1780,"DR",3,700.3229)
.01
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"PKG",31,-1)
1^1
"PKG",31,0)
MEDICINE^MC^MEDICINE PACKAGE INCLUDES ALL AREAS OF MEDICINE
"PKG",31,20,0)
^9.402P^^
"PKG",31,22,0)
^9.49I^1^1
"PKG",31,22,1,0)
2.3^2960913^2980615^4558
"PKG",31,22,1,"PAH",1,0)
35^3030213
"PKG",31,22,1,"PAH",1,1,0)
^^2^2^3030213
"PKG",31,22,1,"PAH",1,1,1,0)
Please refer to the National Patch Module for the detail of this patch 
"PKG",31,22,1,"PAH",1,1,2,0)
build.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
10
"RTN","MCARATVE")
0^1^B8505842
"RTN","MCARATVE",1,0)
MCARATVE ;WISC/TJK,RCH-ENTER/EDIT CARDIAC PROCEDURES ;5/2/96  13:53
"RTN","MCARATVE",2,0)
 ;;2.3;Medicine;**35**;09/13/1996
"RTN","MCARATVE",3,0)
 ; Reference IA #10061 for VADPT calls
"RTN","MCARATVE",4,0)
EN4 ;    ENTRY POINT FOR ATRIAL,VENTRICULAR STUDY ENTRY/EDIT (SCREEN)
"RTN","MCARATVE",5,0)
 IF $D(MCARZDN) D  ;    must have something to associate with
"RTN","MCARATVE",6,0)
 .  S MCARGNUM=$O(^MCAR(697.2,"C","MCAR(691.8",0)),MCARGNAM=$P(^MCAR(697.2,MCARGNUM,0),U)
"RTN","MCARATVE",7,0)
 .  D ATSTUD,VENSTUD ;    atrial study
"RTN","MCARATVE",8,0)
 .;  I 'USEREND D VENSTUD ;    ventricular study
"RTN","MCARATVE",9,0)
 .  K MCARZDN
"RTN","MCARATVE",10,0)
 .  Q
"RTN","MCARATVE",11,0)
 D EXIT ;    clean up variables
"RTN","MCARATVE",12,0)
 Q
"RTN","MCARATVE",13,0)
ATSTUD ;    atrial study
"RTN","MCARATVE",14,0)
 N ENDAT
"RTN","MCARATVE",15,0)
 S ENDAT=0
"RTN","MCARATVE",16,0)
 FOR  D  Q:ENDAT
"RTN","MCARATVE",17,0)
 .  S DIC(0)="AEQLMN",DIC="^MCAR(691.9,",DJSC="MCAREPAT",DIC("S")="I $P(^(0),U,2)=MCARZDN",(DLAYGO,DIDEL)=691.9 D ^DIC K DLAYGO
"RTN","MCARATVE",18,0)
 .  I Y<0 S ENDAT=1 ;    no more atrial studies
"RTN","MCARATVE",19,0)
 .  E  S DJDN=+Y,$P(^MCAR(691.9,+Y,0),U,2)=MCARZDN,^MCAR(691.9,"C",MCARZDN,+Y)="" D EN^MCARD
"RTN","MCARATVE",20,0)
 .  Q
"RTN","MCARATVE",21,0)
 ;END FOR
"RTN","MCARATVE",22,0)
 Q
"RTN","MCARATVE",23,0)
VENSTUD ;    ventricular study
"RTN","MCARATVE",24,0)
 N ENDVEN
"RTN","MCARATVE",25,0)
 S ENDVEN=0
"RTN","MCARATVE",26,0)
 FOR  D  Q:ENDVEN
"RTN","MCARATVE",27,0)
 .  N DLAYGO S DLAYGO=692
"RTN","MCARATVE",28,0)
 .  S DIC(0)="AEQLMN",DIC="^MCAR(692,",DJSC="MCAREPVT",DIC("S")="I $P(^(0),U,2)=MCARZDN" D ^DIC
"RTN","MCARATVE",29,0)
 .  I Y<0 S ENDVEN=1 ;    no more ventricular studies
"RTN","MCARATVE",30,0)
 .  E  S DJDN=+Y,$P(^MCAR(692,+Y,0),U,2)=MCARZDN,^MCAR(692,"C",MCARZDN,+Y)="",(DIDEL,DLAYGO)=692 D EN^MCARD K DLAYGO
"RTN","MCARATVE",31,0)
 .  Q
"RTN","MCARATVE",32,0)
 ;END FOR
"RTN","MCARATVE",33,0)
 Q
"RTN","MCARATVE",34,0)
END K MCARZDN G EXIT
"RTN","MCARATVE",35,0)
EN51 S (DIC,DIE)="^MCAR("_MCFILE_",",DIC(0)="AEQLMZ",(DLAYGO,DIDEL)=MCFILE
"RTN","MCARATVE",36,0)
 D ^DIC G EXIT:Y<0 S (MCARGDA,DA,MCARGDA1)=+Y I $G(MCBL)=1 S DR="[MCARHEMBRIEF]"
"RTN","MCARATVE",37,0)
 E  S DR=$S($G(MCBL)=1:$P($T(@MCLINE),";;",3),1:$P($T(@MCLINE),";;",2))
"RTN","MCARATVE",38,0)
 K DIC("DR"),DIC("S") S DFN=$P(Y(0),U,2)
"RTN","MCARATVE",39,0)
 I MCFILE=694 S MCARGNUM=$P(Y(0),U,3),MCARGNAM=$P(^MCAR(697.2,MCARGNUM,0),U)
"RTN","MCARATVE",40,0)
 I MCFILE=699.5 S MCARGNUM=$P(Y(0),U,3),MCARGNAM=$P(^MCAR(697.2,MCARGNUM,0),U)
"RTN","MCARATVE",41,0)
 D IN^MCEO G EXIT:$D(DUOUT)!$D(DTOUT) D ^DIE S:(MCFILE=691.9)!(MCFILE=692) MCFILE=691.8,MCARGDA=MCARGDA1 D OUT^MCEO,PCC^MCARE1 G EXIT
"RTN","MCARATVE",42,0)
EN6 ;ENTRY POINT FOR HEMATOLOGY,PACEMAKER IMPLANTS ENTER/EDIT
"RTN","MCARATVE",43,0)
 I MCFILE'=694 S MCARGNUM=$O(^MCAR(697.2,"C","MCAR("_MCFILE,0)),MCARGNAM=$P(^MCAR(697.2,MCARGNUM,0),U)
"RTN","MCARATVE",44,0)
 S MCLINE=$S(MCFILE=694:"HEM",MCFILE=698:"GENIMP",MCFILE=698.1:"VLEAD",1:"ALEAD") G EN51
"RTN","MCARATVE",45,0)
SETUP4 ;MFR 25-JAN-93  GET VARS FOR PFT ENTRY/EDIT
"RTN","MCARATVE",46,0)
 ;NEXT LINE DEFINES LOOKUP VARIABLES IF CALLED FROM DJINJ
"RTN","MCARATVE",47,0)
 I '$D(DFN) S DFN=$P(@(DIC_DA_",0)"),U,2),MCARGDA=DA
"RTN","MCARATVE",48,0)
 ;CALLED BY 'DATE' PARAGRAPH AND BY SCREEN HANDLER ROUTINES
"RTN","MCARATVE",49,0)
 D DEM^VADPT
"RTN","MCARATVE",50,0)
 S MCSEX=$P(VADM(5),U,1),MCRACE=$P(VADM(8),U,2)
"RTN","MCARATVE",51,0)
 N MCHOLD S MCHOLD=MCRACE,MCRACE=$$ETHN^MCPFTP1(MCHOLD,.VADM)
"RTN","MCARATVE",52,0)
 D KVAR^VADPT
"RTN","MCARATVE",53,0)
 I MCRACE["BLACK" S MCRACE="B"
"RTN","MCARATVE",54,0)
 E  K MCRACE
"RTN","MCARATVE",55,0)
 Q
"RTN","MCARATVE",56,0)
EXIT ;
"RTN","MCARATVE",57,0)
 Q
"RTN","MCARE")
0^10^B27909496
"RTN","MCARE",1,0)
MCARE ;WISC/RMP-EDIT ROUTINES ;1/23/03  20:45
"RTN","MCARE",2,0)
 ;;2.3;Medicine;**35**;09/13/1996
"RTN","MCARE",3,0)
 ; Reference IA #3746 for ^DD(file#,0,"ID") Access
"RTN","MCARE",4,0)
 ;              #10076 for ^XUSEC
"RTN","MCARE",5,0)
 ;              #10061 FOR ^VADPT call.
"RTN","MCARE",6,0)
ENTER ;ENTER NEW CARDIAC PROCEDURES (SCREEN HANDLER)
"RTN","MCARE",7,0)
 ;SELECT GLOBAL AND PROCEDURE NAME FROM PROCEDURE LOCATION FILE
"RTN","MCARE",8,0)
 D MCEPROC
"RTN","MCARE",9,0)
 S MCARGNUM=MCARP,DIC=^DIC(MCFILE,0,"GL")
"RTN","MCARE",10,0)
 S DJSC=MCEPROC,USEREND=1
"RTN","MCARE",11,0)
 S DIC(0)="AELMQZ",(DLAYGO,DIDEL)=+$P(DIC,"(",2)
"RTN","MCARE",12,0)
 S (MCARGNAM,MCARP)=$P(^MCAR(697.2,MCARP,0),U,1)
"RTN","MCARE",13,0)
DATE ;SELECT PROCEDURE DATE
"RTN","MCARE",14,0)
 I MCESON S DIC("S")=$$PREEDIT^MCESSCR(MCFILE)
"RTN","MCARE",15,0)
 ;S DR=MCPATFLD
"RTN","MCARE",16,0)
 D DATE^MCAREH ;    guidance for the date prompt
"RTN","MCARE",17,0)
 D ^DIC K DIC,DLAYGO
"RTN","MCARE",18,0)
 ;CONDITIONAL ENTRY DELETE CODE HERE
"RTN","MCARE",19,0)
 I Y'=-1 D EXISTS ;    an entry exists, so take an action
"RTN","MCARE",20,0)
EXIT ;
"RTN","MCARE",21,0)
 D KVAR^VADPT
"RTN","MCARE",22,0)
 K X,Y,MCARP,DJSC,MCARPT,DIC,DJDN,DR,DIE,MCARGDA,MCARGNUM
"RTN","MCARE",23,0)
 K DLAYGO,MCARNUM,MCARNM,DFN,DIDEL,MCFILE,MCARDE,MCSEX,MCRACE,MCFILE
"RTN","MCARE",24,0)
 K %,%H,%X,%Y,%Y1,%Y2,D0,D1,D2,DI,DIW,DIWI,DIWT,DIWTC,DIWX,DIZ,DN,DQ
"RTN","MCARE",25,0)
 K I,J,VA,X1,Y,Z,DJVV,%T,DIPGM,DW1,DTOUT,DUOUT,MCESS,ID2
"RTN","MCARE",26,0)
 K DIC,DIK,DIE,DFN,DA,MCARGNUM,MCARGNAM,DR,MCX,SSN,MCARCODE,%,MCORCK
"RTN","MCARE",27,0)
 K C,MCARAPDT,CD,MCARCDIE,MCAROLDT,XX,DIH,DIR,S,DX,DIU,DIV,DZ,MCARFIND
"RTN","MCARE",28,0)
 K MCSPHIN,MCSTENT,MCBOUGIE,MCGTUBE,MCJTUBE,MCHEATP,MCDFLAG,MCARI
"RTN","MCARE",29,0)
 K MCARNP,MCARTOT,DIDEL,DTOUT,DUOUT,MCESFL,EXIT,MCBACK,MCESPREV
"RTN","MCARE",30,0)
 K MCESCUR,MCESTEMP,MCARCK,MCARDA,MCARDE,MCARP,MCESKEY,MCESON
"RTN","MCARE",31,0)
 K MCESPED,MCESS,MCESSEC,MCFILE,MCFILE1,MCPATFLD,MCPOSTP,MCROUT
"RTN","MCARE",32,0)
 K POP,MCPCT,MCPCTY,TEP,MCARDE,MCARP,MCESKEY,MCESON,MCESS
"RTN","MCARE",33,0)
 Q
"RTN","MCARE",34,0)
EXISTS ;
"RTN","MCARE",35,0)
 S DFN=$P(Y(0),U,2) ;    patient number
"RTN","MCARE",36,0)
 S (DJDN,MCARGDA)=$P(Y,U,1)
"RTN","MCARE",37,0)
 I MCFILE=700 S MCRACE=$$RACECDE^MCPFTSS(DFN) K:MCRACE="" MCRACE
"RTN","MCARE",38,0)
 I MCFILE=691.5,$D(^MCAR(MCFILE,MCARGDA,"A")) Q:'MCESON  D ESRC^MCESSCR(MCFILE,.MCARGDA) G:$D(MCBACK) BACK Q
"RTN","MCARE",39,0)
 I MCESON,("125"'[$$ESTONUM^MCESSCR(MCFILE,MCARGDA)) D ESRC^MCESSCR(MCFILE,.MCARGDA) G:$D(MCBACK) BACK Q
"RTN","MCARE",40,0)
 ;    set certain variables based upon file selected
"RTN","MCARE",41,0)
 I MCFILE=691.8 S MCARZDN=DJDN
"RTN","MCARE",42,0)
 D IN^MCEO ;    order entry
"RTN","MCARE",43,0)
 I '$D(DTOUT),'$D(DUOUT) D
"RTN","MCARE",44,0)
 .D EN^MCARD I '$D(^MCAR(MCFILE,MCARGDA,0)),$D(MCBACK) D BACKSS^MCESEDT K MCBACK
"RTN","MCARE",45,0)
 .I $L(MCPOSTP)>1 S X=MCPOSTP X ^%ZOSF("TEST") D:$T @MCPOSTP
"RTN","MCARE",46,0)
 .D OUT^MCEO K DIDEL
"RTN","MCARE",47,0)
 I MCFILE=691.8,$D(^MCAR(MCFILE,MCARGDA,0)) D EN4^MCARATVE ; atrial/ventricular studies
"RTN","MCARE",48,0)
 D ESRC^MCESSCR(MCFILE,MCARGDA)
"RTN","MCARE",49,0)
 I $L($G(MCRACE))>1 D
"RTN","MCARE",50,0)
 .I $$GET1^DIQ(700,+MCARGDA_",",38,"E")="YES"&($$GET1^DIQ(700,+MCARGDA,38.5,"E")="") D
"RTN","MCARE",51,0)
 ..N MCFDA
"RTN","MCARE",52,0)
 ..S MCFDA(700,+MCARGDA_",",38)=""
"RTN","MCARE",53,0)
 ..D FILE^DIE("","MCFDA")
"RTN","MCARE",54,0)
 ..W !!?5,"*** Patient has both race values BLACK and ASIAN. ***"
"RTN","MCARE",55,0)
 ..W !?5,"*** MUST enter a value for the RACE CORRECTIONS FOR RACE TYPE field.***"
"RTN","MCARE",56,0)
 ..W !?5,"*** USE RACE CORRECTIONS field will be set to NULL. ***"
"RTN","MCARE",57,0)
 ..Q
"RTN","MCARE",58,0)
 .Q
"RTN","MCARE",59,0)
 Q
"RTN","MCARE",60,0)
BACK ; If the record is superseded, the user will be allow to edit the superseded record.
"RTN","MCARE",61,0)
 S Y=MCY,DA=Y,Y(0)=MCY(0),Y(0,0)=MCY(0,0) K MCY,DTOUT,DIROUT,DUOUT,DIC
"RTN","MCARE",62,0)
 G EXISTS
"RTN","MCARE",63,0)
 Q
"RTN","MCARE",64,0)
HELP G EXIT:(X=U)!(X="") W !,"ENTER A NEW PROCEDURE DATE" G DATE
"RTN","MCARE",65,0)
EDIT Q  ; MFR 28 JAN 93 ;EDIT CARDIAC PROCEDURES BY PATIENT (SCREEN HANDLER)
"RTN","MCARE",66,0)
 ;SEARCH FOR SELECTED PATIENT IN CARDIOLOGY FILE
"RTN","MCARE",67,0)
 S MCARGNUM=MCARP,MCARLK="^MCAR("_MCFILE
"RTN","MCARE",68,0)
 S MCARLK=U_MCARLK_",""C"",+Y)"
"RTN","MCARE",69,0)
 S DIC("S")="I $D(@(MCARLK))"
"RTN","MCARE",70,0)
 S DIC="^MCAR(690,",DIC(0)="AEQM" D ^DIC K MCARLK I Y<0 G EXIT
"RTN","MCARE",71,0)
 W !,MCARDE," PROCEDURES"
"RTN","MCARE",72,0)
 ;SELECT PROCEDURE DATE
"RTN","MCARE",73,0)
 S (MCARPT,DFN)=+Y
"RTN","MCARE",74,0)
 D DEM^VADPT S MCARNM=VADM(1) D KVAR^VADPT
"RTN","MCARE",75,0)
 S DIC("W")="",DIC("S")="I $P(^(0),U,2)=+MCARPT",DIC=U_$P(^MCAR(697.2,MCARP,0),U,2)_",",D="C",DJSC=$S($G(MCBS)=1:$P(^MCAR(697.2,MCARP,0),U,13),1:$P(^(0),U,3)),(MCFILE,DIDEL)=+$P(DIC,"(",2)
"RTN","MCARE",76,0)
 S X=MCARNM,DIC(0)="EQ" D IX^DIC ;G EXIT:Y<0
"RTN","MCARE",77,0)
 K D,DIC("S"),DIC("W") I Y'=-1 S (DJDN,MCARGDA)=$P(Y,U,1) S:DIC[691.8 MCARZDN=DJDN D:DIC[691.5 ECGCH D IN^MCEO G EXIT:$D(DUOUT)!$D(DTOUT) D EN^MCARD,OUT^MCEO
"RTN","MCARE",78,0)
 G EXIT
"RTN","MCARE",79,0)
ECGCH ;S:$D(^MCAR(691.5,DJDN,"A")) DJSC="MCARECGA" Q
"RTN","MCARE",80,0)
CENTER(TEXT,MGN) ;
"RTN","MCARE",81,0)
 W $J("",MGN-$L(TEXT)/2),TEXT Q ""
"RTN","MCARE",82,0)
 ;
"RTN","MCARE",83,0)
MCEPROC ; Get the required variables from the PROCEDURE/SUBSPECIALTY file
"RTN","MCARE",84,0)
 N TEMP,OPTION,ID,ID2,ID3,ID4,ID5 S (ID,ID2)=""
"RTN","MCARE",85,0)
 ;MCabPROC  <=== name of an option, screen or line edit.
"RTN","MCARE",86,0)
 ; a = (B =>  Brief),  (F => Full)
"RTN","MCARE",87,0)
 ; b = (S =>  Screen Edit), (L =>  Line Edit), (P =>  Printing)
"RTN","MCARE",88,0)
 ; PROC = the name of the procedure
"RTN","MCARE",89,0)
 S (MCARGNUM,MCARGNAM,MCARP)=+$O(^MCAR(697.2,"B",MCPRO,""))
"RTN","MCARE",90,0)
 S OPTION=$E($P(XQY0,U,1),3,4),TEMP=$G(^MCAR(697.2,MCARP,0)),MCESS=0
"RTN","MCARE",91,0)
 S (MCROUT,MCARDE)=$P(TEMP,U,8),MCFILE=+$P($P(TEMP,U,2),"MCAR(",2)
"RTN","MCARE",92,0)
 S MCESON=+$P(TEMP,U,14),MCESKEY=$P(TEMP,U,15),MCPATFLD=$P(TEMP,U,12)
"RTN","MCARE",93,0)
 S:MCESON MCESSEC=$S($D(^XUSEC(MCESKEY,DUZ)):1,1:0)
"RTN","MCARE",94,0)
 S ID3=";"_$G(DIC("DR")),ID=""
"RTN","MCARE",95,0)
 F  S ID=+$O(^DD(MCFILE,0,"ID",ID)) Q:ID=0  D:ID'=0
"RTN","MCARE",96,0)
 .S ID4=";"_ID,ID5=ID4_";",ID4=ID4_"/"
"RTN","MCARE",97,0)
 .I (ID3'[ID4),(ID3'[ID5) S ID2=ID2_ID_";"
"RTN","MCARE",98,0)
 S DIC("DR")=ID2_"1500////"_DUZ_";1502///NOW;1514///NOW;1502///NOW;"_$G(DIC("DR"))
"RTN","MCARE",99,0)
 S DIC(0)="AQMELZ",(DIDEL,DLAYGO)=MCFILE,DIC=^DIC(MCFILE,0,"GL")
"RTN","MCARE",100,0)
 I MCFILE=699 D
"RTN","MCARE",101,0)
 .S MCARCODE=$S(MCPRO["GI":"G",MCPRO["NONENDO":"Z",1:"P")
"RTN","MCARE",102,0)
 .S DIC("S")="I $D(^MCAR(697.2,""D"",MCARCODE,+$P(^MCAR(699,+Y,0),U,12)))"
"RTN","MCARE",103,0)
 S MCEPROC="MC"_OPTION_MCPRO
"RTN","MCARE",104,0)
 S MCEPROC=$S(OPTION="BS":$S($P(TEMP,U,13)'="":$P(TEMP,U,13),1:MCEPROC),OPTION="BL":$S($P(TEMP,U,11)'="":$P(TEMP,U,11),1:MCEPROC),OPTION="FS":$S($P(TEMP,U,3)'="":$P(TEMP,U,3),1:MCEPROC),1:$S($P(TEMP,U,10)'="":$P(TEMP,U,10),1:MCEPROC))
"RTN","MCARE",105,0)
 S MCPOSTP=$S((MCFILE=699)&(MCEPROC'["NONENDO"):"^MCARGD",1:"")
"RTN","MCARE",106,0)
 Q
"RTN","MCARE",107,0)
MCPROP(MCPROP) ;
"RTN","MCARE",108,0)
 N TEMP,PREFIX,CNT
"RTN","MCARE",109,0)
 S PREFIX=$S($E(MCPROP,3,4)="ES":8,1:5)
"RTN","MCARE",110,0)
 F CNT=PREFIX:1:$L(MCPROP) Q:$D(^MCAR(697.2,"B",$E(MCPROP,5,CNT)))  ;S TEMP=$E(MCPROP,5,CNT)
"RTN","MCARE",111,0)
 Q TEMP
"RTN","MCARP")
0^2^B33243572
"RTN","MCARP",1,0)
MCARP ;WISC/TJK,WAA-PRINT ROUTINES ;12/15/97  14:54
"RTN","MCARP",2,0)
 ;;2.3;Medicine;**6,14,15,18,27,33,35**;09/13/1996
"RTN","MCARP",3,0)
 ; Reference IA #2432 for Hospital Location File #44 FM Lookup
"RTN","MCARP",4,0)
 ;              #1576 for DIVISION file 40.8 lookup
"RTN","MCARP",5,0)
 ;              #10035 for Patient File (#2) Direct Global Reads
"RTN","MCARP",6,0)
 ;              #10061 for ^VADPT call.
"RTN","MCARP",7,0)
 ;
"RTN","MCARP",8,0)
CATH ;
"RTN","MCARP",9,0)
 S DIC="^MCAR(691.1,",MCARZ="CATHETERIZATION REPORT",MCARGRTN=$S('$$XTRCT(XQY0):"CATHB",1:"CATH1") G LOOK
"RTN","MCARP",10,0)
ECHO S DIC="^MCAR(691,",MCARZ="ECHO REPORT",MCARGRTN=$S('$$XTRCT(XQY0):"ECHOB",1:"ECHO1") G LOOK
"RTN","MCARP",11,0)
ECG S DIC="^MCAR(691.5,",MCARZ="ECG REPORT",MCARGRTN=$S('$$XTRCT(XQY0):"ECGB",1:"ECG1") G LOOK
"RTN","MCARP",12,0)
EP S DIC="^MCAR(691.8,",MCARZ="EP REPORT",MCARGRTN=$S('$$XTRCT(XQY0):"EPB",1:"EP1") G LOOK
"RTN","MCARP",13,0)
HOLTER S DIC="^MCAR(691.6,",MCARZ="HOLTER REPORT",MCARGRTN=$S('$$XTRCT(XQY0):"HOLTERB",1:"HOLTER1") G LOOK
"RTN","MCARP",14,0)
RHFULL S DIC="^MCAR(701,",MCARZ="RHEUMATOLOGY REPORT",MCARGRTN=$S('$$XTRCT(XQY0):"RHB",1:"RHFULL1") G LOOK
"RTN","MCARP",15,0)
ETT S DIC="^MCAR(691.7,",MCARZ="ETT REPORT",MCARGRTN=$S('$$XTRCT(XQY0):"ETTB",1:"ETT1")
"RTN","MCARP",16,0)
LOOK ;
"RTN","MCARP",17,0)
 D MCPPROC
"RTN","MCARP",18,0)
 I '$D(MCARPPS) D LOOK2,^DIC G:Y<0 EXIT S (MCARGDA,DA)=+Y
"RTN","MCARP",19,0)
 I $G(MCESON),$D(^MCAR(MCFILE,MCARGDA,"ES")) D STATUS^MCESPRT(MCFILE,MCARGDA)
"RTN","MCARP",20,0)
 I $D(ORHFS) U IO G PRINT ;dcm/slc added for CPRS
"RTN","MCARP",21,0)
DEVQUE ; Device Control and Queuing Control
"RTN","MCARP",22,0)
 K IO("Q") S %ZIS="MQ" D ^%ZIS I POP S MCOUT="" G EXIT
"RTN","MCARP",23,0)
 I $D(IO("Q")) S (ZTSAVE("DIC"),ZTSAVE("MC*"))="",ZTRTN="PRINT^MCARP",ZTDESC=MCARZ D ^%ZTLOAD K ZTSK G EXIT
"RTN","MCARP",24,0)
 U IO
"RTN","MCARP",25,0)
PRINT ; Print Report
"RTN","MCARP",26,0)
 ;I DIC="^MCAR(699," D  ;MC*2.3*33
"RTN","MCARP",27,0)
 ;.N MCHLD,MCHLD2 ;MC*2.3*33
"RTN","MCARP",28,0)
 ;.S MCHLD=$$GET1^DIQ(699,MCARGDA,1,"I") ;MC*2.3*33
"RTN","MCARP",29,0)
 ;.S MCHLD2=$$GET1^DIQ(697.2,MCARGNUM,1,"I") ;MC*2.3*33
"RTN","MCARP",30,0)
 ;.I MCHLD'=MCHLD2 S MCARGRTN="PARAC" ;MC*2.3*33
"RTN","MCARP",31,0)
 ;.Q  ;MC*2.3*33
"RTN","MCARP",32,0)
 K DXS,DIOT(2),^UTILITY($J),MCOUT S (D0,DA)=MCARGDA,PG=0
"RTN","MCARP",33,0)
 S DFN=$P(^MCAR(+$P(DIC,"(",2),MCARGDA,0),U,2),MCARGDT=$P(^(0),U,1) S:DIC[699 MCARGNUM=$P(^(0),U,$S(DIC[699.5:6,1:12))
"RTN","MCARP",34,0)
RHPRT ;
"RTN","MCARP",35,0)
 D INIT^MCARP1(MCARZ,MCARGDT,MCFILE)
"RTN","MCARP",36,0)
 S ^UTILITY($J,1)="S MCY="""" I $Y>IOSL-3 R:$E(IOST,1,2)=""C-"" !!,""Press return to continue, '^' to escape: "",MCY:DTIME S:'$T MCY=U S:MCY=U DN=0,MCOUT=1 D:DN HEAD^MCARP K MCY"
"RTN","MCARP",37,0)
 D HEAD,CALLTEM
"RTN","MCARP",38,0)
 I '$D(MCOUT) D:$G(MCESON) FOOTER^MCESPRT(MCFILE,MCARGDA)
"RTN","MCARP",39,0)
 S:$D(ZTQUEUED) ZTREQ="@" K ZTSK
"RTN","MCARP",40,0)
 G EXIT
"RTN","MCARP",41,0)
CALLTEM ;
"RTN","MCARP",42,0)
 N MCFILE D @MCARGRTN Q
"RTN","MCARP",43,0)
EXIT ;
"RTN","MCARP",44,0)
 D EXIT^MCARP1 Q
"RTN","MCARP",45,0)
LOOK2 ;
"RTN","MCARP",46,0)
 S DIC(0)="AEMQ",DIC("A")="Enter patient name or the date & time: "
"RTN","MCARP",47,0)
 I MCESON S DIC("S")=$$PREVIEW^MCESSCR(MCFILE)
"RTN","MCARP",48,0)
 Q
"RTN","MCARP",49,0)
CATH1 D ^MCAROC1 K DXS Q:$D(MCOUT)  D ^MCAROC2 K DXS Q:$D(MCOUT)  D ^MCAROC3 K DXS Q:$D(MCOUT)  D ^MCAROC4 Q
"RTN","MCARP",50,0)
CATHB D ^MCOBC1 Q
"RTN","MCARP",51,0)
ECHO1 D ^MCRPEC K DXS Q:$D(MCOUT)  Q
"RTN","MCARP",52,0)
ECHOB D ^MCOBK Q
"RTN","MCARP",53,0)
ECG1 D ^MCAROK Q
"RTN","MCARP",54,0)
ECGB D ^MCOBE1 Q
"RTN","MCARP",55,0)
EPB D ^MCOBEP Q
"RTN","MCARP",56,0)
EP1 D ^MCAROEP G EPEND:$D(MCOUT)
"RTN","MCARP",57,0)
 G VT:'$D(^MCAR(691.9,"C",MCARGDA))
"RTN","MCARP",58,0)
 S MCY=""
"RTN","MCARP",59,0)
 I $Y>IOSL-3 R:$E(IOST,1,2)="C-" !!,"Press return to continue, '^' to escape: ",MCY:DTIME S:'$T MCY=U S:$E(MCY)=U MCOUT=1 G:$G(MCOUT)=1 EPEND
"RTN","MCARP",60,0)
 F D0=0:0 S D0=$O(^MCAR(691.9,"C",MCARGDA,D0)) Q:D0=""  K DXS D HEAD,^MCAROAT G EPEND:$D(MCOUT)
"RTN","MCARP",61,0)
VT Q:'$D(^MCAR(692,"C",MCARGDA))
"RTN","MCARP",62,0)
 I $Y>IOSL-3 R:$E(IOST,1,2)="C-" !!,"Press return to continue, '^' to escape: ",MCY:DTIME S:'$T MCY=U S:$E(MCY)=U MCOUT=1 G:$G(MCOUT)=1 EPEND
"RTN","MCARP",63,0)
 F D0=0:0 S D0=$O(^MCAR(692,"C",MCARGDA,D0)) Q:D0=""  K DXS D HEAD,^MCAROV Q:$D(MCOUT)
"RTN","MCARP",64,0)
EPEND Q
"RTN","MCARP",65,0)
ETT1 D ^MCAROT Q
"RTN","MCARP",66,0)
ETTB D ^MCOBT Q
"RTN","MCARP",67,0)
HOLTER1 D ^MCAROH1 K DXS Q:$D(MCOUT)  D ^MCAROH2 Q
"RTN","MCARP",68,0)
HOLTERB D ^MCOBH1 Q
"RTN","MCARP",69,0)
GENERIC D ^MCAROGE Q
"RTN","MCARP",70,0)
GENERICB D ^MCOBGEN Q
"RTN","MCARP",71,0)
GI ;I $D(^DIC(120.8)) D ^MCAROGM I 1 ;    new allergy info
"RTN","MCARP",72,0)
 D ^MCAROG
"RTN","MCARP",73,0)
 K DXS
"RTN","MCARP",74,0)
 D:'$D(MCOUT) ^MCAROGA
"RTN","MCARP",75,0)
 Q
"RTN","MCARP",76,0)
PARAC D ^MCPARC Q  ; MC*2.3*33
"RTN","MCARP",77,0)
GIB D ^MCOBGA Q
"RTN","MCARP",78,0)
PULM D ^MCAROP K DXS Q:$D(MCOUT)  D ^MCAROPE Q
"RTN","MCARP",79,0)
PULMB D ^MCOBPE Q
"RTN","MCARP",80,0)
NONENDO D ^MCAROGN Q
"RTN","MCARP",81,0)
NONENDOB D ^MCOBGN Q
"RTN","MCARP",82,0)
CONSULT D ^MCAROGC Q
"RTN","MCARP",83,0)
CONSULTB D ^MCOBGC Q
"RTN","MCARP",84,0)
GENIMP D ^MCAROPG Q
"RTN","MCARP",85,0)
GENIMPB D ^MCOBPG Q
"RTN","MCARP",86,0)
ALEAD D ^MCAROPA Q
"RTN","MCARP",87,0)
ALEADB D ^MCOBPA Q
"RTN","MCARP",88,0)
VLEAD D ^MCAROPV Q
"RTN","MCARP",89,0)
VLEADB D ^MCOBPV Q
"RTN","MCARP",90,0)
SURV D ^MCAROPS Q
"RTN","MCARP",91,0)
SURVB D ^MCOBPS Q
"RTN","MCARP",92,0)
RHFULL1 ;
"RTN","MCARP",93,0)
 N MCARRC,MCHOLD D DEM^VADPT S (MCARRC,MCHOLD)=$P(VADM(8),U,2),MCARRC=$$ETHN^MCPFTP1(MCHOLD,.VADM) D KVAR^VADPT
"RTN","MCARP",94,0)
 I +$G(MCRH)=0 D RHFULL2 Q
"RTN","MCARP",95,0)
 S MCFILE=701,V=MCRH,MCRHR="^MCAROR"_$S(V=1:"A",V=2:"B",V=3:"N",V=4:"L",V=6:"Q",V=7:"H",V=8:"P",V=9:"D",1:"RHFULL2^MCARP") D @MCRHR K DXS Q:$D(MCOUT)  D:V=8 ^MCARORE K DXS Q:$D(MCOUT)  D:MCRH=1 DISP^MCMAG Q
"RTN","MCARP",96,0)
RHFULL2 ;
"RTN","MCARP",97,0)
 F RH="A","B","N","L","Q","H","P","E","D" Q:$D(MCOUT)  D
"RTN","MCARP",98,0)
 .S MCFILE=701,MCRHR="^MCAROR"_RH D @MCRHR K DXS Q:$D(MCOUT)
"RTN","MCARP",99,0)
 .I RH="A" D DISP^MCMAG K DXS
"RTN","MCARP",100,0)
 Q
"RTN","MCARP",101,0)
RHB D ^MCOBRH K DXS Q:$D(MCOUT)  D ^MCOBRHA Q
"RTN","MCARP",102,0)
DTIME S MCT=$P(X,".",2),X=$S(X:$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3),1:"")_" "_$S(MCT:$E(MCT,1,2)_$E("00",0,2-$L($E(MCT,1,2)))_":"_$E(MCT,3,4)_$E("00",0,2-$L($E(MCT,3,4))),1:"")
"RTN","MCARP",103,0)
 K MCT Q
"RTN","MCARP",104,0)
HEAD ;
"RTN","MCARP",105,0)
 S HOSP=$P($G(^DPT(DFN,.1)),U)
"RTN","MCARP",106,0)
 S:HOSP'="" HOSP=$$FIND1^DIC(44,,"X",HOSP)
"RTN","MCARP",107,0)
 S:HOSP'<1 HOSP=$$GET1^DIQ(44,HOSP,3.5,"I")
"RTN","MCARP",108,0)
 S:HOSP'="" HOSP=$P($G(^DG(40.8,HOSP,0)),U)
"RTN","MCARP",109,0)
 S PG=PG+1 W:PG>1 @IOF I '+$G(MCFLG) D
"RTN","MCARP",110,0)
 .  W !!,"Pg. "_PG,?30,HOSP,?79-$L(MCARDTM),MCARDTM
"RTN","MCARP",111,0)
 .  I (PG>1),($E(IOST,1,2)="C-") W ! Q
"RTN","MCARP",112,0)
 .  I MCARZ'["NON-" D
"RTN","MCARP",113,0)
 .  .  I $G(MCARGRTN)="PARAC" S MCARZ="NON-"_MCARZ
"RTN","MCARP",114,0)
 .  .  Q
"RTN","MCARP",115,0)
 .  W !,$$HEDSTAR("CONFIDENTIAL "_MCARZ,77) ; MC*2.3*33
"RTN","MCARP",116,0)
 .  W !,MCARGNM_"    "_SSN_"   " W ?39-($L(MCARWARD_" "_MCARRB)\2),MCARWARD_" "_MCARRB,?79-$L(" DOB: "_MCARDOB)," DOB: "_MCARDOB
"RTN","MCARP",117,0)
 .  Q
"RTN","MCARP",118,0)
 I +$G(MCFLG) W !,$$HEDSTAR(MCARZ,77)
"RTN","MCARP",119,0)
 W !,?39-($L("PROCEDURE DATE/TIME: "_MCARGDT2)\2),"PROCEDURE DATE/TIME: ",MCARGDT2
"RTN","MCARP",120,0)
 N FFF S $P(FFF,"- ",40)="- " W !,FFF,!
"RTN","MCARP",121,0)
 Q
"RTN","MCARP",122,0)
HEDSTAR(X,X1) ;    surround text string X with asterisks to length X1
"RTN","MCARP",123,0)
 N Y1
"RTN","MCARP",124,0)
 S (TY,Y1)="",$P(Y1," ",X1-$L(X)\2-1)=" ",TY=Y1_" "_X_" "
"RTN","MCARP",125,0)
 F I=$L(TY):1:X1 S TY=TY_" "
"RTN","MCARP",126,0)
 Q TY
"RTN","MCARP",127,0)
MCPPROC ; Get require variables
"RTN","MCARP",128,0)
 D MCPPROC^MCARP1 Q
"RTN","MCARP",129,0)
XTRCT(FULL) ;Extrinsic Function use to determine Full reporting or brief
"RTN","MCARP",130,0)
 Q $S($E($P(FULL,U),3)="B":0,1:1)
"RTN","MCARP",131,0)
MCPROP(MCPROP) ; Medicine Procedure file entry validator
"RTN","MCARP",132,0)
 N TEMP,PREFIX,CNT
"RTN","MCARP",133,0)
 S PREFIX=$S($E(MCPROP,3,4)="ES":7,1:4),TEMP=""
"RTN","MCARP",134,0)
 F CNT=PREFIX+2:1:$L(MCPROP) I $D(^MCAR(697.2,"B",$E(MCPROP,PREFIX+1,CNT))) S TEMP=$E(MCPROP,PREFIX+1,CNT) Q
"RTN","MCARP",135,0)
 Q TEMP
"RTN","MCBPFTP1")
0^3^B28642672
"RTN","MCBPFTP1",1,0)
MCBPFTP1 ;WISC/TJK,ALG-PFT BRIEF REPORT-DEMO INFO ;1/23/03  18:18
"RTN","MCBPFTP1",2,0)
 ;;2.3;Medicine;**5,14,16,17,22,25,35**;09/13/1996
"RTN","MCBPFTP1",3,0)
 ; Reference IA #3175 for measurement API XLFMSMT.
"RTN","MCBPFTP1",4,0)
 ;              #10040 for Hospital Location File #44.
"RTN","MCBPFTP1",5,0)
 ;              #10061 for VADPT call.
"RTN","MCBPFTP1",6,0)
 ; ------------------------
"RTN","MCBPFTP1",7,0)
 ; SSN = Enternal Format of the patients SSN with the first letter
"RTN","MCBPFTP1",8,0)
 ; of the last name tacked on the end
"RTN","MCBPFTP1",9,0)
 ; ------------------------
"RTN","MCBPFTP1",10,0)
 D DEM^VADPT S MCARGNM=VADM(1),SSN=VA("PID")
"RTN","MCBPFTP1",11,0)
 S X1=$E($P(MCPFT0,U),1,7),X2=$P(VADM(3),U)
"RTN","MCBPFTP1",12,0)
 ; ---------------------
"RTN","MCBPFTP1",13,0)
 ; AGE = the patients age at the date of the procedure
"RTN","MCBPFTP1",14,0)
 ; ---------------------
"RTN","MCBPFTP1",15,0)
 S AGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7))
"RTN","MCBPFTP1",16,0)
 S RACE=$P(VADM(8),U,2),CLIN="" S:$P(MCPFT0,U,10) CLIN=$P(MCPFT0,U,10) I CLIN,$D(^SC(CLIN,0)) S CLIN=$P(^(0),U)
"RTN","MCBPFTP1",17,0)
 N MCHOLD S MCHOLD=RACE,RACE=$$ETHN^MCPFTP1(MCHOLD,.VADM)
"RTN","MCBPFTP1",18,0)
 S DATE=$P(MCPFT0,U),DATE=+$E(DATE,4,5)_"/"_+$E(DATE,6,7)_"/"_$E(DATE,2,3)_$S($P(DATE,".",2):"@"_+$E(DATE,9,10)_":"_$S($L($E(DATE,11,12))=2:$E(DATE,11,12),$L($E(DATE,11,12))=1:$E(DATE,11)_"0",1:"00"),1:"")
"RTN","MCBPFTP1",19,0)
 N HTCM,HTIN,WTKG,WTLB
"RTN","MCBPFTP1",20,0)
 S (HTIN,HT1)=$P(MCPFT0,U,4),(HTCM,HT)=$P($$LENGTH^XLFMSMT(HTIN,"IN","CM")," ")
"RTN","MCBPFTP1",21,0)
 S (WTLB,WT1)=$P(MCPFT0,U,5),(WTKG,WT)=$P($$WEIGHT^XLFMSMT(WTLB,"LB","KG")," ")
"RTN","MCBPFTP1",22,0)
 I HT'>0 S (HTCM,HT)=$P(MCPFT0,U,3),(HTIN,HT1)=$P($$LENGTH^XLFMSMT(HTCM,"CM","IN")," ")
"RTN","MCBPFTP1",23,0)
 I WT'>0 S (WTKG,WT)=$P(MCPFT0,U,6),(WTLB,WT1)=$P($$WEIGHT^XLFMSMT(WTKG,"KG","LB")," ")
"RTN","MCBPFTP1",24,0)
 S $P(MCDOT,".",81)=""
"RTN","MCBPFTP1",25,0)
 ;S HT1=$P(MCPFT0,U,4),WT1=$P(MCPFT0,U,5) S $P(MCDOT,".",81)=""
"RTN","MCBPFTP1",26,0)
 ;S HT=HT1*2.54,WT=WT1/2.2
"RTN","MCBPFTP1",27,0)
 ;S:'HT HT=$P(MCPFT0,U,3),HT1=HT/2.54 S:'WT WT=$P(MCPFT0,U,6),WT1=WT*2.2
"RTN","MCBPFTP1",28,0)
 S (MC17,MCEFF,MCSEX)="" S:$D(^MCAR(700,MCARGDA,17)) MC17=^(17),MCEFF=$P(MC17,U,6),MCEFF=$S(MCEFF="G":"GOOD",MCEFF="E":"EXCELLENT",MCEFF="P":"POOR",1:"")
"RTN","MCBPFTP1",29,0)
 ;S MCSEX=$P(VADM(5),U),X=$P(VADM(3),"^",2) S MCARDOB=$S(X'="":X,1:""),X=$P(MCPFT0,U) D DTIME^MCARP S MCARGDT=X,MCARZ="PULMONARY FUNCTION TEST"
"RTN","MCBPFTP1",30,0)
 S MCSEX=$P(VADM(5),U),X=$P(VADM(3),"^",2) S MCARDOB=$S(X'="":X,1:""),X=$P(MCPFT0,U),MCARGDT=X,MCARZ="PULMONARY FUNCTION TEST"
"RTN","MCBPFTP1",31,0)
 D INP^VADPT S MCARWARD=$S(VAIN(4)'="":$P(VAIN(4),U,2),1:"NOT INPATIENT"),MCARRB=VAIN(5) D NOW^%DTC S X=% D DTIME^MCARP S MCARDTM=X
"RTN","MCBPFTP1",32,0)
 S MCARZ="PULMONARY FUNCTION TEST"
"RTN","MCBPFTP1",33,0)
 D INIT^MCARP1(MCARZ,MCARGDT,MCFILE),HEAD^MCARP
"RTN","MCBPFTP1",34,0)
 W !,"SEX: ",MCSEX,"  AGE:",AGE,?30,HT1," in/",WT1," lb",?60,"AMBIENT: ",$P(MCPFT0,U,12),"C/",$P(MCPFT0,U,7),"T" K HT1,WT1
"RTN","MCBPFTP1",35,0)
 W !,"RACE: ",RACE S TECH=$$GETVALUE^MCU(700,MCARGDA,34) W:$L(RACE)>60 !
"RTN","MCBPFTP1",36,0)
 W ?60,"TECH: ",$E(TECH,1,14)
"RTN","MCBPFTP1",37,0)
 W !,$S($P(MCPFT0,U,8)="Y":"SMOKER",$P(MCPFT0,U,8)="N":"NON-SMOKER",1:"")
"RTN","MCBPFTP1",38,0)
 W ?30 W:$P(MCPFT0,U,9)="Y" "CURRENT BRONCHODILATOR USE"
"RTN","MCBPFTP1",39,0)
 W ?60,"EFFORT: ",MCEFF
"RTN","MCBPFTP1",40,0)
 S MCFF="S DN=1,MCY="""" I $Y>(IOSL-3) R:$E(IOST,1,2)=""C-"" !!,""Press Return to Continue, '^' to escape: "",MCY:DTIME S:'$T MCY=U S:MCY=U MCOUT=1,DN=0 Q:$D(MCOUT)  D:DN HEAD^MCARP D:$D(HEAD1) HEAD1^MCBPFTP2,HEAD2^MCBPFTP2 K MCY"
"RTN","MCBPFTP1",41,0)
 K ^UTILITY("DIQ1",$J) W !!,"CONSULT DX: " S DR(700.01)=.01,DIQ(0)="E",DIC="^MCAR(700,"
"RTN","MCBPFTP1",42,0)
 F K=0:0 S K=$O(^MCAR(700,MCARGDA,1,K)) Q:K'?1N.N  S DA=MCARGDA,DA(700.01)=K,DR=11,DIQ(0)="E" D EN^DIQ1 I $D(^UTILITY("DIQ1",$J,700.01,K,.01,"E"))#2 W ?15,^("E"),! X MCFF Q:$D(MCOUT)
"RTN","MCBPFTP1",43,0)
 K ^UTILITY("DIQ1",$J),DIQ Q:$D(MCOUT)  W !,MCDOT X MCFF Q:$D(MCOUT)  D PRED
"RTN","MCBPFTP1",44,0)
 S RDATE=9999999.9999-$P(MCPFT0,U)
"RTN","MCBPFTP1",45,0)
 W:$D(MCRCN) !,MCRCN D ^MCBPFTP2
"RTN","MCBPFTP1",46,0)
 I '$D(MCOUT),$G(MCESON) D FOOTER^MCESPRT(MCFILE,MCARGDA)  ;PATCH 28
"RTN","MCBPFTP1",47,0)
EXIT D:$D(ZTSK) KILL^%ZTLOAD K ZTSK
"RTN","MCBPFTP1",48,0)
EXIT1 D KVAR^VADPT K MCOUT,ACT,AGE,CK,CLIN,D0,D1,DA,DATE,CI95
"RTN","MCBPFTP1",49,0)
 K MCARGDT2,^UTILITY($J)
"RTN","MCBPFTP1",50,0)
 K BSA,HB,PH,PACO2,PAO2,O2HB,COHB,FIO2,MHB,PAAO2,QSQT,CAO2,CVO2
"RTN","MCBPFTP1",51,0)
 K DFN,DIC,DIW,DIWL,DIWR,DIWT,DLCOSB,DN,MCDOT,DR,FEV1,FRC,FVC,MC17
"RTN","MCBPFTP1",52,0)
 K HT,I,J,K,MCARGDA,MCARGNM,MCFF,MCK,MCN,MCPI,MCREC,MCREC1,MCVCN
"RTN","MCBPFTP1",53,0)
 K MCREC2,MCTLCN,MCVN,MCX,MEAS,FEF2575,ND,ND1,P1,P2,PC,PD1,PD11,MCEFF
"RTN","MCBPFTP1",54,0)
 K PD2,PD21,PF,MCPFT0,PG,PRED,MCPV,RACE,RDATE,RDATE1,RDATE2,RV,MCSEX
"RTN","MCBPFTP1",55,0)
 K SSN,TAB,TECH,TLC,TYPE,UNIT,UNITS,VC,WT,X,Z,VA,MCRCN
"RTN","MCBPFTP1",56,0)
 K MCMVVN,MVV,PMVV,MCSP,MCP1S0,MCP1S1,MCP1S2,MCP2S0,MCP2S1,MCP2S2
"RTN","MCBPFTP1",57,0)
 K CDLCOSB,MCIAO1,MCIAO2,MCIDA,MCIDL,MCIDP,MCIFA,MCIFE
"RTN","MCBPFTP1",58,0)
 K MCIFL,MCIFV,MCIPTL,MCIRV,MCITL,MCMAIN,MCP1,MCP2,MCRC,MCRCR,MCTYPEP,MCY,MCRC1,MCRC2,MCRC3,MCRC4   ;,MCARGDA
"RTN","MCBPFTP1",59,0)
 K MCARRB,MCARDOB,MCARWARD,MCARDTM,MCARHDR,MCARZ,MCARGDT,MCDL,MCLNG D KVAR^VADPT D ^%ZISC Q
"RTN","MCBPFTP1",60,0)
PRED S (FVC,CFVC,FEV1,F,TLC,MVV)=""
"RTN","MCBPFTP1",61,0)
 Q:'HT!'WT!'AGE!'$D(^MCAR(700,MCARGDA,"PV"))  Q:'(^("PV"))
"RTN","MCBPFTP1",62,0)
 S MCPV=^MCAR(700,MCARGDA,"PV") Q:'$D(^MCAR(700.1,MCPV))
"RTN","MCBPFTP1",63,0)
 S BSA=$$BSA^MCPFTP1(HT,WT)
"RTN","MCBPFTP1",64,0)
 F I="FEV1","FVC","TLC","MVV" D
"RTN","MCBPFTP1",65,0)
    .S:$D(^MCAR(700.1,MCPV,I)) @("P"_I)="S "_I_"="_$P(^MCAR(700.2,^MCAR(700.1,MCPV,I),0),U),@("C"_I)=$P(^MCAR(700.2,^MCAR(700.1,MCPV,I),0),U,5) X:$D(^MCAR(700.1,MCPV,I)) @("P"_I)
"RTN","MCBPFTP1",66,0)
 K PDLCOSB,PFEV1,PFRC,PFVC,PFEF2575,PPF,PRV,PTLC,PVC
"RTN","MCBPFTP1",67,0)
 S MCRCR="",MCRC=$G(^MCAR(700.1,MCPV,"RC")) Q:MCRC=""
"RTN","MCBPFTP1",68,0)
 S MCRCR=$G(^MCAR(700,MCARGDA,17)) Q:MCRCR=""  Q:$P(MCRCR,U,5)'="Y"
"RTN","MCBPFTP1",69,0)
 N MCRAC,MCMRAC S MCMRAC=0
"RTN","MCBPFTP1",70,0)
 S:RACE["ASIAN" MCMRAC=MCMRAC+1
"RTN","MCBPFTP1",71,0)
 S:RACE["BLACK" MCMRAC=MCMRAC+1
"RTN","MCBPFTP1",72,0)
 I MCMRAC>1 S MCRAC=$P(MCRCR,U,7),MCRAC=$S(MCRAC="A":"O",1:MCRAC)
"RTN","MCBPFTP1",73,0)
 S MCRCR=$S(RACE["BLACK":"B",RACE["ASIAN":"O",1:"") Q:MCRCR=""
"RTN","MCBPFTP1",74,0)
 I MCMRAC>1 S MCRCR=MCRAC Q:MCRCR=""
"RTN","MCBPFTP1",75,0)
 F I=1:1:6 I $P(MCRC,U,I) S J=$P(MCRC,U,I) D:J
"RTN","MCBPFTP1",76,0)
    .Q:'$D(^MCAR(700.2,J,0))  S J=$P(^(0),U,1)
"RTN","MCBPFTP1",77,0)
    .S @("MCRC"_I)="S PRED="_J
"RTN","MCBPFTP1",78,0)
 K J G ORIENTAL:MCRCR="O" K MCRC2,MCRC6
"RTN","MCBPFTP1",79,0)
 I '$D(MCRC1),'$D(MCRC3),'$D(MCRC4),'$D(MCRC5) Q
"RTN","MCBPFTP1",80,0)
 S:$D(MCRC1) MCRCN="TLC,FVC,FEV1" S:$D(MCRC3) MCRCN=MCRCN_",FRC,RV" S:$D(MCRC4) MCRCN=MCRCN_",FEF25-75" S:$D(MCRC5) MCRCN=MCRCN_",MVV" S:$E(MCRCN,1)="," MCRCN=$E(MCRCN,2,35)
"RTN","MCBPFTP1",81,0)
 G NOTE
"RTN","MCBPFTP1",82,0)
ORIENTAL I '$D(MCRC2),'$D(MCRC6) K MCRC1,MCRC3,MCRC4,MCRC5 Q
"RTN","MCBPFTP1",83,0)
 S:$D(MCRC2) MCRC1=MCRC2 S:$D(MCRC6) MCRC5=MCRC6 K MCRC3,MCRC4,MCRC6 S MCRCN="TLC,FVC,FEV1,MVV"
"RTN","MCBPFTP1",84,0)
NOTE S MCRCN="NOTE: Race Correction on predicted values: "_MCRCN
"RTN","MCBPFTP1",85,0)
 I $G(MCMRAC)>1 S MCRCN=MCRCN_$S(MCRCR="O":" - ASIAN",1:" - BLACK")
"RTN","MCBPFTP1",86,0)
 Q
"RTN","MCPFTE")
0^4^B10983954
"RTN","MCPFTE",1,0)
MCPFTE ;WISC/TJK-PULMONARY FUNCTION TEST ENTER/EDIT ;7/9/99  10:08
"RTN","MCPFTE",2,0)
 ;;2.3;Medicine;**25,31,35**;09/13/1996
"RTN","MCPFTE",3,0)
 ; Reference IA #10061 for VADPT call.
"RTN","MCPFTE",4,0)
DIC ; Pulmonary Function Test Enter/Edit
"RTN","MCPFTE",5,0)
 D MCEPROC^MCARE,DATE^MCAREH
"RTN","MCPFTE",6,0)
 S DIC="^MCAR(700,",DIC(0)="AEQLMZ",(DLAYGO,DIDEL,MCFILE)=700
"RTN","MCPFTE",7,0)
 I MCESON S DIC("S")=$$PREEDIT^MCESSCR(MCFILE)
"RTN","MCPFTE",8,0)
 D ^DIC K DIC,DLAYGO G EXIT:Y<0
"RTN","MCPFTE",9,0)
 I $D(DTOUT),'$P(Y(0),U,2) S DIK="^MCAR(700,",DA=+Y D ^DIK G EXIT
"RTN","MCPFTE",10,0)
 S DFN=$P(Y(0),U,2),MCARGDA=+Y
"RTN","MCPFTE",11,0)
 I MCESON,$$ESTONUM^MCESSCR(MCFILE,MCARGDA)>2 D ESRC^MCESSCR(MCFILE,MCARGDA) I '$D(MCBACK) G EXIT
"RTN","MCPFTE",12,0)
 D:$D(MCBACK) BACK
"RTN","MCPFTE",13,0)
 D DEM^VADPT S MCSEX=$P(VADM(5),U),MCRACE=$P(VADM(8),U,2)
"RTN","MCPFTE",14,0)
 N MCMRACE,MCHOLD S MCMRACE=0,MCHOLD=MCRACE,MCRACE=$$ETHN^MCPFTP1(MCHOLD,.VADM) D KVAR^VADPT
"RTN","MCPFTE",15,0)
 I MCRACE="" D RACEMSG^MCPFTSS
"RTN","MCPFTE",16,0)
 I MCRACE'="" D
"RTN","MCPFTE",17,0)
 .S:MCRACE["ASIAN" MCMRACE=MCMRACE+1
"RTN","MCPFTE",18,0)
 .S:MCRACE["BLACK" MCMRACE=MCMRACE+1
"RTN","MCPFTE",19,0)
 .K:MCMRACE<2 MCMRACE
"RTN","MCPFTE",20,0)
 S MCRACE=$S(MCRACE["ASIAN":"O",MCRACE["BLACK":"B",1:"") K:MCRACE="" MCRACE
"RTN","MCPFTE",21,0)
 S DIE="^MCAR(700,",DA=MCARGDA
"RTN","MCPFTE",22,0)
 ; MFD 2-23-93 S DR=$S($G(MCBL)=1:"[MCPFTBRIEF]",1:"[MCPFTEDIT]")
"RTN","MCPFTE",23,0)
 S DR="["_MCEPROC_"]"
"RTN","MCPFTE",24,0)
 D ORDERA G EXIT:$D(DUOUT)!$D(DTOUT)
"RTN","MCPFTE",25,0)
 S DIE="^MCAR(700,",DA=MCARGDA
"RTN","MCPFTE",26,0)
 S DR="["_MCEPROC_"]"
"RTN","MCPFTE",27,0)
 D ^DIE,ORDER1,QTASK^MCPARAM
"RTN","MCPFTE",28,0)
 D ESRC^MCESSCR(MCFILE,MCARGDA)
"RTN","MCPFTE",29,0)
 I $D(MCMRACE) D
"RTN","MCPFTE",30,0)
 .I $$GET1^DIQ(700,+MCARGDA_",",38,"E")="YES"&($$GET1^DIQ(700,+MCARGDA,38.5,"E")="") D
"RTN","MCPFTE",31,0)
 ..N MCFDA
"RTN","MCPFTE",32,0)
 ..S MCFDA(700,+MCARGDA_",",38)=""
"RTN","MCPFTE",33,0)
 ..D FILE^DIE("","MCFDA")
"RTN","MCPFTE",34,0)
 ..W !!?5,"*** Patient has both race values BLACK and ASIAN. ***"
"RTN","MCPFTE",35,0)
 ..W !?5,"*** MUST enter a value for the RACE CORRECTIONS FOR RACE TYPE field.***"
"RTN","MCPFTE",36,0)
 ..W !?5,"*** USE RACE CORRECTIONS field will be set to NULL. ***"
"RTN","MCPFTE",37,0)
 ..Q
"RTN","MCPFTE",38,0)
 .Q
"RTN","MCPFTE",39,0)
EXIT ; Leave gracefully
"RTN","MCPFTE",40,0)
 K DIC,DIK,DA,DIE,DR,DFN,MCRACE,DIWF,MCSEX,MCARGDA,DIR,DIDEL
"RTN","MCPFTE",41,0)
 K MCESON,MCESKEY,MCROUT,MCARCODE,MCEBRIEF,MCEFULL,MCPBRIEF,MCPFULL,MCPRTRTN,MCBS,MCPATFLD,MCSFULL,MCSBRIEF,MCBACK
"RTN","MCPFTE",42,0)
 Q
"RTN","MCPFTE",43,0)
ORDERA S MCARGNUM=$O(^MCAR(697.2,"C","MCAR(700",0)),MCFILE=700
"RTN","MCPFTE",44,0)
ORDER D:'$D(MCOEON) ORDER^MCPARAM Q:'$D(MCOEON)
"RTN","MCPFTE",45,0)
 Q
"RTN","MCPFTE",46,0)
ORDER1 G IM:'$D(MCOEON) Q:'$D(^MCAR(MCFILE,MCARGDA))  Q:$D(DTOUT)
"RTN","MCPFTE",47,0)
IM D EN1^MCMAG
"RTN","MCPFTE",48,0)
 Q
"RTN","MCPFTE",49,0)
PVFASS ;Entry point to  Associate Predicted Value Formulas
"RTN","MCPFTE",50,0)
 S DIC("A")="Select the SEX for which the Predicted Value will be applied: "
"RTN","MCPFTE",51,0)
 S DIC="^MCAR(700.1,",DIC(0)="AEQM" D ^DIC I Y<0 D EXIT Q
"RTN","MCPFTE",52,0)
 S DIE=DIC,DA=+Y,DR=".01;1:10;11;12:15"
"RTN","MCPFTE",53,0)
 D ^DIE K DIC,DIE,DLAYGO,DA,DR G PVFASS
"RTN","MCPFTE",54,0)
PVFEDT ;Entry point to Enter/Edit Predicited Value Formulas
"RTN","MCPFTE",55,0)
 S DIC("A")="Select the Predicted Value Formula: "
"RTN","MCPFTE",56,0)
 S DIC(0)="AELQ",DLAYGO=700.2
"RTN","MCPFTE",57,0)
 S DIC=700.2,D="D" D IX^DIC I Y<0 D EXIT Q
"RTN","MCPFTE",58,0)
 S DIE=DIC,DA=+Y,DR=".01:9"
"RTN","MCPFTE",59,0)
 D ^DIE K DIC,DIE,DLAYGO,DA,DR G PVFEDT
"RTN","MCPFTE",60,0)
DISP N MCX S MCX=^MCAR(700.2,+Y,0)
"RTN","MCPFTE",61,0)
 W ?35,"REFERENCE: ",$P(MCX,U,3)
"RTN","MCPFTE",62,0)
 W !,?5,"SEX: ",$S($P(MCX,U,4)="F":"Female",$P(MCX,U,4)="M":"Male",1:"")
"RTN","MCPFTE",63,0)
 W !,?5,"CI: ",$P(MCX,U,5),?18,"SEE: ",$P(MCX,U,6)
"RTN","MCPFTE",64,0)
 W !,?5,"METHOD: ",$P(MCX,U,7)
"RTN","MCPFTE",65,0)
 W !,?5,"DEMOGRAPHICS: ",$P(MCX,U,8)
"RTN","MCPFTE",66,0)
 W !,?5,"SMOKERS INCLUDED: ",$S($P(MCX,U,9)="N":"NO",$P(MCX,U,9)="Y":"YES",1:""),?30,"ALTITUDE: ",$P(MCX,U,10),! Q
"RTN","MCPFTE",67,0)
BACK ;Set Y to the new record and allow the user to edit the new record
"RTN","MCPFTE",68,0)
 S Y=MCY,Y(0)=MCY(0),Y(0,0)=MCY(0,0),MCARGDA=+Y K MCY,DIROUT,DUOUT,DTOUT,EXIT
"RTN","MCPFTE",69,0)
 Q
"RTN","MCPFTI")
0^5^B9367322
"RTN","MCPFTI",1,0)
MCPFTI ;WISC/TJK-PFT INTERPRETATION ENTRY ;7/9/99  10:11
"RTN","MCPFTI",2,0)
 ;;2.3;Medicine;**25,31,35**;09/13/1996
"RTN","MCPFTI",3,0)
 ; Reference IA #10061 for VADPT call.
"RTN","MCPFTI",4,0)
DIC ; PFT Interpretation Entry.
"RTN","MCPFTI",5,0)
 D MCEPROC^MCARE
"RTN","MCPFTI",6,0)
 S DIC="^MCAR(700,",DIC(0)="AEQMZ"
"RTN","MCPFTI",7,0)
 I MCESON S DIC("S")=$$PREEDIT^MCESSCR(MCFILE)
"RTN","MCPFTI",8,0)
 D ^DIC K DIC G EXIT:Y<0
"RTN","MCPFTI",9,0)
 S DFN=$P(Y(0),U,2),MCARGDA=+Y,MCARGDT=$P(Y,U,2)
"RTN","MCPFTI",10,0)
 I MCESON,$$ESTONUM^MCESSCR(MCFILE,MCARGDA)>2 D ESRC^MCESSCR(MCFILE,MCARGDA) G EXIT Q
"RTN","MCPFTI",11,0)
GETORDER D ORDERA G EXIT:$D(DUOUT)!$D(DTOUT)
"RTN","MCPFTI",12,0)
 D SETVAR^MCPFTP2
"RTN","MCPFTI",13,0)
 S RDATE=9999999.9999-$P(^MCAR(700,MCARGDA,0),U),MCPFT0=^(0),HT=$P(MCPFT0,U,4),WT=$P(MCPFT0,U,5),X1=$E($P(MCPFT0,U,1),1,7)
"RTN","MCPFTI",14,0)
 S HT=HT*2.54,WT=WT/2.2
"RTN","MCPFTI",15,0)
 S:'HT HT=$P(MCPFT0,U,3) S:'WT WT=$P(MCPFT0,U,6)
"RTN","MCPFTI",16,0)
 S MC17="" D DEM^VADPT S RACE=$P(VADM(8),U,2),MCSEX=$P(VADM(5),U),X2=$P(VADM(3),U) D ^%DTC
"RTN","MCPFTI",17,0)
 N MCHOLD S MCHOLD=RACE,RACE=$$ETHN^MCPFTP1(MCHOLD,.VADM)
"RTN","MCPFTI",18,0)
 I RACE="" D RACEMSG^MCPFTSS
"RTN","MCPFTI",19,0)
 ; ---------------------
"RTN","MCPFTI",20,0)
 ; AGE = the patients age at the date of the procedure
"RTN","MCPFTI",21,0)
 ; ---------------------
"RTN","MCPFTI",22,0)
 S AGE=X\365.25 D PRED^MCPFTP1 W:$D(MCRCN) !,MCRCN
"RTN","MCPFTI",23,0)
 ;D INP^VADPT S MCARWARD=$S(VAIN(4)'="":$P(VAIN(4),U,2),1:"NOT INPATIENT"),MCARRB=VAIN(5) 
"RTN","MCPFTI",24,0)
 S MCARZ="PULMONARY FUNCTION TEST" D INIT^MCARP1(MCARZ,MCARGDT,MCFILE)
"RTN","MCPFTI",25,0)
 S DIR(0)="E"
"RTN","MCPFTI",26,0)
 D ^DIR
"RTN","MCPFTI",27,0)
 I 'Y G EXIT
"RTN","MCPFTI",28,0)
I W @IOF,"***INTERPRETATION ENTRY***"
"RTN","MCPFTI",29,0)
 S HEAD1="VOLUMES",MCX=0,$P(MCDOT," ",81)=""
"RTN","MCPFTI",30,0)
 S MCFF="S DN=1,MCY="""" I $Y>(IOSL-3) R:$E(IOST,1,2)=""C-"" !!,""Press Return to Continue, '^' to escape: "",MCY:DTIME S:'$T MCY=U S:MCY=U MCOUT=1,DN=0 Q:$D(MCOUT)  W:DN @IOF D HEAD^MCARP D:$D(HEAD1) HEAD1^MCPFTP2,HEAD2^MCPFTP2 K MCY"
"RTN","MCPFTI",31,0)
 D HEAD^MCARP,HEAD1^MCPFTP2,HEAD2^MCPFTP2 G EXIT:$D(MCOUT) D VOL^MCPFTP2 G EXIT:$D(MCOUT)
"RTN","MCPFTI",32,0)
PVPRT ;
"RTN","MCPFTI",33,0)
 S DIR(0)="E" D ^DIR G EXIT:'Y
"RTN","MCPFTI",34,0)
 W @IOF
"RTN","MCPFTI",35,0)
 D PV1^MCPFTP5 G EXIT:$D(MCOUT)
"RTN","MCPFTI",36,0)
ED D ^MCPFTIC G EXIT:$D(DUOUT)!$D(DTOUT)
"RTN","MCPFTI",37,0)
 S DIE="^MCAR(700,",DA=MCARGDA,DR="33.5;30;21;31;600"
"RTN","MCPFTI",38,0)
 ;MFD 2/10/93 DR(2,700.05)=.01
"RTN","MCPFTI",39,0)
 D ^DIE,ORDER1,QTASK^MCPARAM
"RTN","MCPFTI",40,0)
 D ESRC^MCESSCR(MCFILE,MCARGDA)
"RTN","MCPFTI",41,0)
 ;
"RTN","MCPFTI",42,0)
 ;    Allow the user to print a PFT report now
"RTN","MCPFTI",43,0)
 S DIR(0)="Y",DIR("A")="Print report now",DIR("B")="YES" ;    setup
"RTN","MCPFTI",44,0)
 D ^DIR ;    ask
"RTN","MCPFTI",45,0)
 I Y S TEMP=MCARGDA D ^MCPFTP1A S MCARGDA=TEMP D SUM^MCPFTP ;    yes, they want the report
"RTN","MCPFTI",46,0)
 ;
"RTN","MCPFTI",47,0)
EXIT D EXIT1^MCPFTP1 K A,J,F,SUB,FLD,NM,K,I,DIR,LN,DIRUT
"RTN","MCPFTI",48,0)
 K DIE,MCND,DA,DR,DBZZ
"RTN","MCPFTI",49,0)
 K MCAR,MCARDOB,MCARDTM,MCARHDR,MCARRB,MCARWARD,MCRHR,VADM,VAIN
"RTN","MCPFTI",50,0)
 K MCARP,MCFILE,MCESON,MCESKEY,MCROUT,MCTYPE
"RTN","MCPFTI",51,0)
 K MCPBRIEF,MCPFULL,MCPRTRTN,TEMP
"RTN","MCPFTI",52,0)
 Q
"RTN","MCPFTI",53,0)
ORDERA S MCARGNUM=$O(^MCAR(697.2,"C","MCAR(700",0)),MCFILE=700
"RTN","MCPFTI",54,0)
ORDER D:'$D(MCOEON) ORDER^MCPARAM Q:'$D(MCOEON)
"RTN","MCPFTI",55,0)
 Q
"RTN","MCPFTI",56,0)
ORDER1 G IM:'$D(MCOEON) Q:'$D(^MCAR(MCFILE,MCARGDA))  Q:$D(DTOUT)
"RTN","MCPFTI",57,0)
IM D EN1^MCMAG Q
"RTN","MCPFTP1")
0^6^B31423809
"RTN","MCPFTP1",1,0)
MCPFTP1 ;WISC/TJK-PFT REPORT-DEMO INFO ;1/17/03  11:57
"RTN","MCPFTP1",2,0)
 ;;2.3;Medicine;**14,16,22,25,35**;09/13/1996
"RTN","MCPFTP1",3,0)
 ; Reference IA #10061 for VADPT call.
"RTN","MCPFTP1",4,0)
 ;              #10040 for HOSPITAL LOCATION FILE #44.
"RTN","MCPFTP1",5,0)
 ;              #10060 for NEW PERSON file #200.
"RTN","MCPFTP1",6,0)
 ;              #3175 for measurement API XLFMSMT
"RTN","MCPFTP1",7,0)
 ; ------------------------
"RTN","MCPFTP1",8,0)
 ; SSN = Enternal Format of the patients SSN with the first letter
"RTN","MCPFTP1",9,0)
 ; of the last name tacked on the end
"RTN","MCPFTP1",10,0)
 ; ------------------------
"RTN","MCPFTP1",11,0)
 D DEM^VADPT S MCARGNM=VADM(1),SSN=VA("PID")
"RTN","MCPFTP1",12,0)
 S X1=$E($P(MCPFT0,U),1,7),X2=$P(VADM(3),U)
"RTN","MCPFTP1",13,0)
 ; ---------------------
"RTN","MCPFTP1",14,0)
 ; AGE = the patients age at the date of the procedure
"RTN","MCPFTP1",15,0)
 ; ---------------------
"RTN","MCPFTP1",16,0)
 S AGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7))
"RTN","MCPFTP1",17,0)
 S RACE=$P(VADM(8),U,2),CLIN="" S:$P(MCPFT0,U,10) CLIN=$P(MCPFT0,U,10) I CLIN,$D(^SC(CLIN,0)) S CLIN=$P(^(0),U)
"RTN","MCPFTP1",18,0)
 N MCHOLD S MCHOLD=RACE,RACE=$$ETHN(MCHOLD,.VADM)
"RTN","MCPFTP1",19,0)
 S DATE=$P(MCPFT0,U),DATE=+$E(DATE,4,5)_"/"_+$E(DATE,6,7)_"/"_$E(DATE,2,3)_$S($P(DATE,".",2):"@"_+$E(DATE,9,10)_":"_$S($L($E(DATE,11,12))=2:$E(DATE,11,12),$L($E(DATE,11,12))=1:$E(DATE,11)_"0",1:"00"),1:"")
"RTN","MCPFTP1",20,0)
 N HTCM,HTIN,WTKG,WTLB
"RTN","MCPFTP1",21,0)
 S (HTIN,HT1)=$P(MCPFT0,U,4),(HTCM,HT)=$P($$LENGTH^XLFMSMT(HTIN,"IN","CM")," ")
"RTN","MCPFTP1",22,0)
 S (WTLB,WT1)=$P(MCPFT0,U,5),(WTKG,WT)=$P($$WEIGHT^XLFMSMT(WTLB,"LB","KG")," ")
"RTN","MCPFTP1",23,0)
 I HT'>0 S (HTCM,HT)=$P(MCPFT0,U,3),(HTIN,HT1)=$P($$LENGTH^XLFMSMT(HTCM,"CM","IN")," ")
"RTN","MCPFTP1",24,0)
 I WT'>0 S (WTKG,WT)=$P(MCPFT0,U,6),(WTLB,WT1)=$P($$WEIGHT^XLFMSMT(WTKG,"KG","LB")," ")
"RTN","MCPFTP1",25,0)
 S $P(MCDOT,".",81)=""
"RTN","MCPFTP1",26,0)
 ;S HT1=$P(MCPFT0,U,4),WT1=$P(MCPFT0,U,5) S $P(MCDOT,".",81)=""
"RTN","MCPFTP1",27,0)
 ;S HT=HT1*2.54,WT=WT1/2.2
"RTN","MCPFTP1",28,0)
 ;S:'HT HT=$P(MCPFT0,U,3),HT1=HT/2.54 S:'WT WT=$P(MCPFT0,U,6),WT1=WT*2.2
"RTN","MCPFTP1",29,0)
 S (MC17,MCEFF,MCSEX)="" S:$D(^MCAR(700,MCARGDA,17)) MC17=^(17),MCEFF=$P(MC17,U,6),MCEFF=$S(MCEFF="G":"GOOD",MCEFF="E":"EXCELLENT",MCEFF="P":"POOR",1:"")
"RTN","MCPFTP1",30,0)
 S MCSEX=$P(VADM(5),U),X=$P(VADM(3),"^",2) S MCARDOB=$S(X'="":X,1:""),X=$P(MCPFT0,U) D DTIME^MCARP S (MCARGDT,MCARGDT2)=X,MCARZ="PULMONARY FUNCTION TEST " S:MCESON MCARZ=MCARZ_" - "_MCSTAT
"RTN","MCPFTP1",31,0)
 D INP^VADPT S MCARWARD=$S(VAIN(4)'="":$P(VAIN(4),U,2),1:"NOT INPATIENT"),MCARRB=VAIN(5) D NOW^%DTC S X=% D DTIME^MCARP S MCARDTM=X
"RTN","MCPFTP1",32,0)
 D INIT^MCARP1(MCARZ,MCARGDT,MCFILE)
"RTN","MCPFTP1",33,0)
 D HEAD^MCARP
"RTN","MCPFTP1",34,0)
 W !,"SEX: ",MCSEX,"  AGE:",AGE,?30,+$J(HT1,0,2)," in/",+$J(WT1,0,1)," lb",?60,"AMBIENT: ",$P(MCPFT0,U,12),"C/",$P(MCPFT0,U,7),"T" K HT1,WT1
"RTN","MCPFTP1",35,0)
 W !,"RACE: ",RACE S TECH=$P(MCPFT0,U,13) I TECH,$D(^VA(200,TECH,0)) S TECH=$P(^(0),U)
"RTN","MCPFTP1",36,0)
 W:$L(RACE)>60 !
"RTN","MCPFTP1",37,0)
 W ?60,"TECH: ",$E(TECH,1,14)
"RTN","MCPFTP1",38,0)
 W !,$S($P(MCPFT0,U,8)="Y":"SMOKER",$P(MCPFT0,U,8)="N":"NON-SMOKER",1:"")
"RTN","MCPFTP1",39,0)
 W ?30 W:$P(MCPFT0,U,9)="Y" "CURRENT BRONCHODILATOR USE"
"RTN","MCPFTP1",40,0)
 W ?60,"EFFORT: ",MCEFF
"RTN","MCPFTP1",41,0)
 S MCFF="S DN=1,MCY="""" I $Y>(IOSL-3) R:$E(IOST,1,2)=""C-"" !!,""Press Return to Continue, '^' to escape: "",MCY:DTIME S:'$T MCY=U S:MCY=U MCOUT=1,DN=0 Q:$D(MCOUT)  D:DN HEAD^MCARP D:$D(HEAD1) HEAD1^MCPFTP2,HEAD2^MCPFTP2 K MCY"
"RTN","MCPFTP1",42,0)
 K ^UTILITY("DIQ1",$J) W !!,"CONSULT DX: " S DR(700.01)=.01,DIQ(0)="E",DIC="^MCAR(700,"
"RTN","MCPFTP1",43,0)
 F K=0:0 S K=$O(^MCAR(700,MCARGDA,1,K)) Q:K'?1N.N  S DA=MCARGDA,DA(700.01)=K,DR=11,DIQ(0)="E" D EN^DIQ1 I $D(^UTILITY("DIQ1",$J,700.01,K,.01,"E"))#2 W ?15,^("E"),! X MCFF Q:$D(MCOUT)
"RTN","MCPFTP1",44,0)
 K ^UTILITY("DIQ1",$J),DIQ Q:$D(MCOUT)  W !,MCDOT X MCFF Q:$D(MCOUT)  D PRED
"RTN","MCPFTP1",45,0)
 S RDATE=9999999.9999-$P(MCPFT0,U)
"RTN","MCPFTP1",46,0)
 W:$D(MCRCN) !,MCRCN
"RTN","MCPFTP1",47,0)
 D ^MCPFTP2
"RTN","MCPFTP1",48,0)
 I '$D(MCOUT) D:$G(MCESON) FOOTER^MCESPRT(MCFILE,MCARGDA)
"RTN","MCPFTP1",49,0)
EXIT S:$D(ZTQUEUED) ZTREQ="@" K ZTSK
"RTN","MCPFTP1",50,0)
EXIT1 ;
"RTN","MCPFTP1",51,0)
 D EXIT^MCPFTP1A
"RTN","MCPFTP1",52,0)
 Q 
"RTN","MCPFTP1",53,0)
PRED S (DLCOSB,FEV1,FRC,FVC,FEF2575,PF,RV,TLC,VC,MVV,CTLC,CVC,CFRC,CRV,CFVC,CFEV1,CPF,CFEF2575,CMVV,CDLCOSB,ACT,COHB)=""
"RTN","MCPFTP1",54,0)
 S MCPV=$$MCPV(MCARGDA)
"RTN","MCPFTP1",55,0)
 I ('HT)!('WT)!('AGE)!(MCPV=0) Q
"RTN","MCPFTP1",56,0)
 D PREDS,MCRACE Q
"RTN","MCPFTP1",57,0)
MCRACE S MCRCR="",MCRC=$G(^MCAR(700.1,MCPV,"RC")) Q:MCRC=""
"RTN","MCPFTP1",58,0)
 S MCRCR=$G(^MCAR(700,MCARGDA,17)) Q:MCRCR=""  Q:$P(MCRCR,U,5)'="Y"
"RTN","MCPFTP1",59,0)
 N MCRAC,MCMRAC S MCMRAC=0
"RTN","MCPFTP1",60,0)
 S:RACE["ASIAN" MCMRAC=MCMRAC+1
"RTN","MCPFTP1",61,0)
 S:RACE["BLACK" MCMRAC=MCMRAC+1
"RTN","MCPFTP1",62,0)
 I MCMRAC>1 S MCRAC=$P(MCRCR,U,7),MCRAC=$S(MCRAC="A":"O",1:MCRAC)
"RTN","MCPFTP1",63,0)
 S MCRCR=$S(RACE["BLACK":"B",RACE["ASIAN":"O",1:"") Q:MCRCR=""
"RTN","MCPFTP1",64,0)
 I MCMRAC>1 S MCRCR=MCRAC Q:MCRCR=""
"RTN","MCPFTP1",65,0)
 F I=1:1:6 I $P(MCRC,U,I) S J=$P(MCRC,U,I) D:J
"RTN","MCPFTP1",66,0)
 .Q:'$D(^MCAR(700.2,J,0))  S J=$P(^(0),U,1)
"RTN","MCPFTP1",67,0)
 .S @("MCRC"_I)="S PRED="_J
"RTN","MCPFTP1",68,0)
 K J G ORIENTAL:MCRCR="O" K MCRC2,MCRC6
"RTN","MCPFTP1",69,0)
 I '$D(MCRC1),'$D(MCRC3),'$D(MCRC4),'$D(MCRC5) Q
"RTN","MCPFTP1",70,0)
 S:$D(MCRC1) MCRCN="TLC,VC,FVC,FEV1" S:$D(MCRC3) MCRCN=MCRCN_",FRC,RV" S:$D(MCRC4) MCRCN=MCRCN_",FEF25-75" S:$D(MCRC5) MCRCN=MCRCN_",MVV" S:$E(MCRCN,1)="," MCRCN=$E(MCRCN,2,35)
"RTN","MCPFTP1",71,0)
 G NOTE
"RTN","MCPFTP1",72,0)
ORIENTAL I '$D(MCRC2),'$D(MCRC6) K MCRC1,MCRC3,MCRC4,MCRC5 Q
"RTN","MCPFTP1",73,0)
 S:$D(MCRC2) MCRC1=MCRC2 S:$D(MCRC6) MCRC5=MCRC6 K MCRC3,MCRC4,MCRC6 S MCRCN="TLC,VC,FVC,FEV1,MVV"
"RTN","MCPFTP1",74,0)
NOTE S MCRCN="NOTE: Race Correction on predicted values: "_MCRCN
"RTN","MCPFTP1",75,0)
 I $G(MCMRAC)>1 S MCRCN=MCRCN_$S(MCRCR="O":" - ASIAN",1:" - BLACK")
"RTN","MCPFTP1",76,0)
 Q
"RTN","MCPFTP1",77,0)
CONFID(MCPV,VALUE) ;
"RTN","MCPFTP1",78,0)
 Q $P(^MCAR(700.2,^MCAR(700.1,MCPV,VALUE),0),U,5)
"RTN","MCPFTP1",79,0)
PREDV(MCPV,VALUE)       ;
"RTN","MCPFTP1",80,0)
 N EXPRESS,FORMULA,IEN,RESULT
"RTN","MCPFTP1",81,0)
 S IEN=+$P($G(^MCAR(700.1,MCPV,VALUE)),U)
"RTN","MCPFTP1",82,0)
 S FORMULA=$P($G(^MCAR(700.2,IEN,0)),U)
"RTN","MCPFTP1",83,0)
 S RESULT=""
"RTN","MCPFTP1",84,0)
 I FORMULA]"" S EXPRESS="S RESULT="_FORMULA X EXPRESS
"RTN","MCPFTP1",85,0)
 Q $S(RESULT]"":RESULT,1:"")
"RTN","MCPFTP1",86,0)
MCPV(MCDA) ; Get the Predicted Value entry
"RTN","MCPFTP1",87,0)
 Q $S($D(^MCAR(700,MCDA,"PV")):^("PV"),1:0)
"RTN","MCPFTP1",88,0)
PREDS S BSA=+$$BSA(HT,WT),I="DLCOSB",DLCOSB=$$PREDV(MCPV,"DLCOSB"),CDLCOSB=$$CONFID(MCPV,"DLCOSB")
"RTN","MCPFTP1",89,0)
 S FEV1=$$PREDV(MCPV,"FEV1"),CFEV1=$$CONFID(MCPV,"FEV1")
"RTN","MCPFTP1",90,0)
 S FRC=$$PREDV(MCPV,"FRC"),CFRC=$$CONFID(MCPV,"FRC")
"RTN","MCPFTP1",91,0)
 S FVC=$$PREDV(MCPV,"FVC"),CFVC=$$CONFID(MCPV,"FVC")
"RTN","MCPFTP1",92,0)
 S FEF2575=$$PREDV(MCPV,"FEF2575"),CFEF2575=$$CONFID(MCPV,"FEF2575")
"RTN","MCPFTP1",93,0)
 S PF=$$PREDV(MCPV,"PF"),CPF=$$CONFID(MCPV,"PF")
"RTN","MCPFTP1",94,0)
 S RV=$$PREDV(MCPV,"RV"),CRV=$$CONFID(MCPV,"RV")
"RTN","MCPFTP1",95,0)
 S TLC=$$PREDV(MCPV,"TLC"),CTLC=$$CONFID(MCPV,"TLC")
"RTN","MCPFTP1",96,0)
 S VC=$$PREDV(MCPV,"VC"),CVC=$$CONFID(MCPV,"VC")
"RTN","MCPFTP1",97,0)
 S MVV=$$PREDV(MCPV,"MVV"),CMVV=$$CONFID(MCPV,"MVV")
"RTN","MCPFTP1",98,0)
 Q
"RTN","MCPFTP1",99,0)
BSA(HT,WT) ; Compute BSA
"RTN","MCPFTP1",100,0)
 D COMPUTE^MCARBSA
"RTN","MCPFTP1",101,0)
 Q X
"RTN","MCPFTP1",102,0)
ETHN(MCRSTR,MCETH) ; Get the Race and Ethnicity arrays and concat with Race
"RTN","MCPFTP1",103,0)
 N MCCTR,MCSTR,MCLP,MCX,Y
"RTN","MCPFTP1",104,0)
 S MCCTR=+$G(MCETH(12)),MCSTR=""
"RTN","MCPFTP1",105,0)
 I MCCTR F MCLP=1:1:MCCTR S MDX=$G(MCETH(12,MCLP)) S:$P(MDX,"^",2)'="" MCSTR=MCSTR_$S(MCSTR="":"",1:", ")_$P(MDX,"^",2)
"RTN","MCPFTP1",106,0)
 S Y=$S(MCSTR'="":MCSTR,1:MCRSTR)
"RTN","MCPFTP1",107,0)
 Q Y
"RTN","MCPFTSS")
0^7^B1617583
"RTN","MCPFTSS",1,0)
MCPFTSS ;WISC/MLH-PFT SPECIAL STUDIES ANCILLARY ;7/9/99  10:13
"RTN","MCPFTSS",2,0)
 ;;2.3;Medicine;**25,35**;09/13/1996
"RTN","MCPFTSS",3,0)
 ; Reference IA # 10061 for VADPT call.
"RTN","MCPFTSS",4,0)
 IF $G(DJR)=2452 D
"RTN","MCPFTSS",5,0)
 .  I V(23)="MECHANICS" S $P(DJJ(23),U,6)="MCPFT061"
"RTN","MCPFTSS",6,0)
 .  I V(23)="SMALL AIRWAY" S $P(DJJ(23),U,6)="MCPFT062"
"RTN","MCPFTSS",7,0)
 .  I V(23)="EXERCISE" S $P(DJJ(23),U,6)="MCPFT063"
"RTN","MCPFTSS",8,0)
 .  I V(23)="MAXIMUM PRESSURES" S $P(DJJ(23),U,6)="MCPFT064"
"RTN","MCPFTSS",9,0)
 .  Q
"RTN","MCPFTSS",10,0)
 ;END IF
"RTN","MCPFTSS",11,0)
 ;
"RTN","MCPFTSS",12,0)
 Q
"RTN","MCPFTSS",13,0)
RACECDE(DFN) ;Returns a value of RACE B = BLACK, O = ASIAN, and null for anything else
"RTN","MCPFTSS",14,0)
 D DEM^VADPT S MCRACE=$P(VADM(8),U,2)
"RTN","MCPFTSS",15,0)
 N MCMRACE,MCHOLD S MCHOLD=MCRACE,MCRACE=$$ETHN^MCPFTP1(MCHOLD,.VADM)
"RTN","MCPFTSS",16,0)
 D KVAR^VADPT S MCMRACE=""
"RTN","MCPFTSS",17,0)
 I MCRACE="" D RACEMSG
"RTN","MCPFTSS",18,0)
 I MCRACE'="" D
"RTN","MCPFTSS",19,0)
 .S:MCRACE["ASIAN" MCMRACE=MCMRACE_"O"
"RTN","MCPFTSS",20,0)
 .S:MCRACE["BLACK" MCMRACE=MCMRACE_"B"
"RTN","MCPFTSS",21,0)
 S MCRACE=$S(MCMRACE'="":MCMRACE,1:"")
"RTN","MCPFTSS",22,0)
 Q MCRACE
"RTN","MCPFTSS",23,0)
 ;
"RTN","MCPFTSS",24,0)
RACEMSG ; If patient race field is empty, notify user
"RTN","MCPFTSS",25,0)
 W $C(7),!!?5,"*** Patient's race not specified in the patient file ***"
"RTN","MCPFTSS",26,0)
 H 1 W $C(7) N X R X:3 W !
"RTN","MCPFTSS",27,0)
 Q
"RTN","MCRH1")
0^8^B31516454
"RTN","MCRH1",1,0)
MCRH1 ;WISC/HAG-RHEUMATOLOGY PATIENT HISTORY EDIT ;7/3/96  09:13
"RTN","MCRH1",2,0)
 ;;2.3;Medicine;**31,35**;09/13/1996
"RTN","MCRH1",3,0)
 ; Reference IA #10061 VADPT calls
"RTN","MCRH1",4,0)
 ;           IA #  681 Get Lab data
"RTN","MCRH1",5,0)
 ;           IA #10035 PATIENT file (#2)
"RTN","MCRH1",6,0)
CONS S MCARCODE="Z" D CONSULT^MCARGE G EXIT
"RTN","MCRH1",7,0)
CONSS S MCARCODE="Z" D CONSULT^MCARGES G EXIT
"RTN","MCRH1",8,0)
CONSP D CONSULT^MCARGP G EXIT
"RTN","MCRH1",9,0)
MCRHMED S MCARCODE="R" D EN1^MCARSUP G EXIT
"RTN","MCRH1",10,0)
ALLP S MCRHLP="P",MCRH=0 G SEL
"RTN","MCRH1",11,0)
DIAGP S MCRHLP="P",MCRH=1 G SEL
"RTN","MCRH1",12,0)
BACKP S MCRHLP="P",MCRH=2 G SEL
"RTN","MCRH1",13,0)
NARRP S MCRHLP="P",MCRH=3 G SEL
"RTN","MCRH1",14,0)
LABP S MCRHLP="P",MCRH=4 G SEL
"RTN","MCRH1",15,0)
HAQP S MCRHLP="P",MCRH=6 G SEL
"RTN","MCRH1",16,0)
HISTP S MCRHLP="P",MCRH=7 G SEL
"RTN","MCRH1",17,0)
PHYSP S MCRHLP="P",MCRH=8 G SEL
"RTN","MCRH1",18,0)
DEATHP S MCRHLP="P",MCRH=9 G SEL
"RTN","MCRH1",19,0)
DIAGL S MCRHLP="L",MCRH=1 G SEL
"RTN","MCRH1",20,0)
NARRL S MCRHLP="L",MCRH=3 G SEL
"RTN","MCRH1",21,0)
HAQL S MCRHLP="L",MCRH=6 G SEL
"RTN","MCRH1",22,0)
HISTL S MCRHLP="L",MCRH=7 G SEL
"RTN","MCRH1",23,0)
PHYSL S MCRHLP="L",MCRH=8 G SEL
"RTN","MCRH1",24,0)
DEATHL S MCRHLP="L",MCRH=9 G SEL
"RTN","MCRH1",25,0)
BRIEFL S MCRHLP="L",MCRH=10 G SEL
"RTN","MCRH1",26,0)
DIAGF S MCRH=1 G SEL
"RTN","MCRH1",27,0)
BACKF S MCRH=2 G SEL
"RTN","MCRH1",28,0)
NARRF S MCRH=3 G SEL
"RTN","MCRH1",29,0)
TRETF S MCRH=5 G SEL
"RTN","MCRH1",30,0)
LABF S MCRH=4 G SEL
"RTN","MCRH1",31,0)
HAQF S MCRH=6 G SEL
"RTN","MCRH1",32,0)
HISTF S MCRH=7 G SEL
"RTN","MCRH1",33,0)
PHYSF S MCRH=8 G SEL
"RTN","MCRH1",34,0)
DEATHF S MCRH=9 G SEL
"RTN","MCRH1",35,0)
BRIEFF S MCRH=10
"RTN","MCRH1",36,0)
SEL ; Visit Date Selection
"RTN","MCRH1",37,0)
 N MCRHB
"RTN","MCRH1",38,0)
 S MCFILE=701,MCPRO="RHEUM"
"RTN","MCRH1",39,0)
 S DIC("A")="Select prior visit by entering the patient name or visit date"_$S(MCRH=2:" or enter the date@time for a new visit: ",1:": ")
"RTN","MCRH1",40,0)
PRT I $D(MCRHLP),(MCRHLP="P"),(MCRH'=4) D RHFULL^MCARP G EXIT
"RTN","MCRH1",41,0)
 S DIC="^MCAR(701,",DIC(0)=$S(MCRH=2:"AELQMZ",1:"AEQMZ") S:MCRH=2 DLAYGO=701 D ^DIC K DLAYGO G:Y<0 EXIT S (DJDN,DA,MCARGDA)=+Y,DFN=$P(Y(0),U,2),MC0=Y(0) D DEM^VADPT S MCSEX=$P(VADM(5),U),Y(0)=MC0 K MC0
"RTN","MCRH1",42,0)
 I MCRH=2 N MCARR1,MCARRC,MCHOLD S (MCARRC,MCHOLD)=$P(VADM(8),U,2),MCARRC=$$ETHN^MCPFTP1(MCHOLD,.VADM) D GETDATA
"RTN","MCRH1",43,0)
 I MCRH=5 S Y=$P(Y(0),U,2),PSOPAR="" D DOIT^MCPSOP G SEL
"RTN","MCRH1",44,0)
 I MCRH=4 S DJDIS=1,MCLRDFN=$G(^DPT($P(Y(0),U,2),"LR")) W:MCLRDFN="" !!,*7,*27,*91,*49,*109,"  Patient laboratory information has not been processed!",*27,*91,*109 G:MCLRDFN="" SEL D GETLAB G:Y<0 SEL I '$D(MCRHLP) D HOME^%ZIS,QSTART G EXIT
"RTN","MCRH1",45,0)
 I MCRH=4,$D(MCRHLP),(MCRHLP="P") D QUE G EXIT
"RTN","MCRH1",46,0)
LIN I $D(MCRHLP),(MCRHLP="L") S V=MCRH,DIE="^MCAR(701," S DR=$S($G(MCBL)=1:"[MCRHBRIEF]",1:"[MCRH"_$S(V=1:"DIAG",V=3:"NARR",V=6:"HAQ",V=7:"HIST",V=9:"DEATH",1:"PHYS")) K V D ORDERA G EXIT:$D(DTOUT)!$D(DUOUT) D ^DIE,ORDER1,QTASK^MCPARAM G SEL
"RTN","MCRH1",47,0)
FUL S:MCRH=2 DJDN=$P(^MCAR(701,DA,0),U,2),DJDIS=1 S V=MCRH,(MCRHB,DJSC)=$S($G(MCBS)=1:"MCRHBRSCREEN",1:"MCRH"_$S(V=1:"DIAG",V=2:"BACK",V=3:"NARR",V=4:"LAB010",V=6:"HAQ",V=7:"HIST",V=9:"DEATH",1:"PHYS"))
"RTN","MCRH1",48,0)
 I MCRH=2&(MCRHB="MCRHBACK") D ORDERA G EXIT:$D(DTOUT)!$D(DUOUT) D ^MCRH3,ORDER1,QTASK^MCPARAM G SEL
"RTN","MCRH1",49,0)
 D ORDERA G EXIT:$D(DTOUT)!$D(DUOUT) K V D EN^MCARD,ORDER1,QTASK^MCPARAM G SEL
"RTN","MCRH1",50,0)
DEL ;DELETE RHEUMATOLOGY VISIT
"RTN","MCRH1",51,0)
 S DIC("A")="Select a prior visit by entering the patient's name or visit date: "
"RTN","MCRH1",52,0)
 W !! S DIC="^MCAR(701,",DIC(0)="AEQM"
"RTN","MCRH1",53,0)
 ;S:MCESON DIC("S")="I $$SCRDEL^MCESSCR(MCFILE,Y)"
"RTN","MCRH1",54,0)
 D ^DIC G:Y<0 EXIT S (MCRH1,DA)=+Y
"RTN","MCRH1",55,0)
DISP W !!,"Would you like a display of the data for this visit" S %=1 D YN^DICN G DISP:%=0,USURE:%=2 I %<0 G DEL
"RTN","MCRH1",56,0)
 S (DJDN,DA)=MCRH1,DJSC="MCRHHIST",DJDIS=1 D EN^MCARD
"RTN","MCRH1",57,0)
USURE W !!,"Are you sure you want to delete this entry" S %=2 D YN^DICN G DEL:%=0 I %'=1 W !,"Nothing Deleted" G DEL
"RTN","MCRH1",58,0)
 S (DIK,DIC)="^MCAR(701,",DA=MCRH1 D ^DIK W !!,"Entry deleted." R X:2 G DEL
"RTN","MCRH1",59,0)
GETLAB ;
"RTN","MCRH1",60,0)
 S DIC("B")=$O(^LR(MCLRDFN,"CH",0))
"RTN","MCRH1",61,0)
 S DIC="^LR(MCLRDFN,""CH"",",DIC(0)="AEQMZ",DIC("A")="Select DATE/TIME SPECIMEN TAKEN: " D ^DIC S:Y>0 (DJDN,MCLRDA)=+Y,MCARGDT=$P(Y,U,2),MCLABDT=9999999-MCARGDT S DA(1)=MCLRDFN K DIC("A") Q
"RTN","MCRH1",62,0)
QUE K IO("Q") S %ZIS="MQ" D ^%ZIS G:POP EXIT
"RTN","MCRH1",63,0)
 I $D(IO("Q")) S MCARZ="RHEUMATOLOGY REPORT",(ZTSAVE("MC*"),ZTSAVE("DFN"),ZTSAVE("DA"),ZTSAVE("DT"))="",ZTRTN="QSTART^MCRH1",ZTDESC=MCARZ D ^%ZTLOAD K ZTSK Q
"RTN","MCRH1",64,0)
QSTART K ^UTILITY("DIQ1",$J) S PG=0,DIC="^LR(MCLRDFN,""CH"",",DA=MCLRDA
"RTN","MCRH1",65,0)
 S DR="2:7;9:20;41;45;63;96;174;384;386;387;395:399;428;430;431;454;468;469;547:549;553;561;563;581;587;594;595;625;627;631;639;649;690;691;693;694;700;703;738;741;748;771;750"
"RTN","MCRH1",66,0)
 S Y=MCLRDA,DA(1)=MCLRDFN,DA(63.04)=MCLABDT D EN^DIQ1
"RTN","MCRH1",67,0)
 S MCARGRTN="RHFULL1" U IO D RHPRT^MCARP D ^%ZISC Q
"RTN","MCRH1",68,0)
LOCK ;LOCK GLOBAL THAT IS BEING ACCESSED BY ANOTHER USER
"RTN","MCRH1",69,0)
 ;L @(DIC_DA_"):1") S MCRHL=$T Q:MCRHL'=0  I MCRHL=0 W !!,*7,"THIS ENTRY IS BEING EDITED BY ANOTHER USER.  TRY LATER." Q
"RTN","MCRH1",70,0)
EXIT D KVAR^VADPT K %,DA,DFN,DIC,DIE,DIK,DJDIS,DJDN,DJSC,DR,DT1,H,I,K,K1
"RTN","MCRH1",71,0)
 K MCFILE,MCARCODE,MCARGDT,MCARGRTN,MCARZ,MCRH1,MCRH,MCRHL,MCLABDT,MCLRDFN,MCRHLP,MCRHY,PG,POP,PSOPAR,STA,V,X,X1,Z,ZTDESC,ZTRTN,ZTSAVE,MCARGNUM,MCARGDA,MCSEX Q
"RTN","MCRH1",72,0)
ORDERA S MCARGNUM=$O(^MCAR(697.2,"C","MCAR(701",0))
"RTN","MCRH1",73,0)
ORDER D:'$D(MCOEON) ORDER^MCPARAM Q:'$D(MCOEON)
"RTN","MCRH1",74,0)
 Q
"RTN","MCRH1",75,0)
ORDER1 G IM:'$D(MCOEON) Q:'$D(^MCAR(MCFILE,MCARGDA))  Q:$D(DTOUT)
"RTN","MCRH1",76,0)
IM Q:MCRH'=1  D EN1^MCMAG Q
"RTN","MCRH1",77,0)
GETDATA ; Get Patient Demographic data
"RTN","MCRH1",78,0)
 N MCARR2
"RTN","MCRH1",79,0)
 S MCARR1(1)=$G(VADM(1))
"RTN","MCRH1",80,0)
 S MCARR1(2)=$P($G(VADM(2)),"^",2)
"RTN","MCRH1",81,0)
 S MCARR1(9)=$P($G(VADM(3)),"^",2)
"RTN","MCRH1",82,0)
 S MCARR1(10)=$P($G(VADM(5)),"^",2),MCARR1(11)=$G(MCARRC)
"RTN","MCRH1",83,0)
 S MCARR1(12)=$P($G(VADM(10)),"^",2)
"RTN","MCRH1",84,0)
 D GETS^DIQ(2,DFN_",",".07;.111;.112;.115;.116;.131;.132;.31115","E","MCARR2")
"RTN","MCRH1",85,0)
 S MCARR1(3)=$G(MCARR2(2,DFN_",",.111,"E"))
"RTN","MCRH1",86,0)
 S MCARR1(4)=$G(MCARR2(2,DFN_",",.112,"E"))
"RTN","MCRH1",87,0)
 S MCARR1(5)=$G(MCARR2(2,DFN_",",.115,"E"))
"RTN","MCRH1",88,0)
 S MCARR1(6)=$G(MCARR2(2,DFN_",",.116,"E"))
"RTN","MCRH1",89,0)
 S MCARR1(7)=$G(MCARR2(2,DFN_",",.131,"E"))
"RTN","MCRH1",90,0)
 S MCARR1(8)=$G(MCARR2(2,DFN_",",.132,"E"))
"RTN","MCRH1",91,0)
 S MCARR1(13)=$G(MCARR2(2,DFN_",",.31115,"E"))
"RTN","MCRH1",92,0)
 S MCARR1(14)=$G(MCARR2(2,DFN_",",.07,"E"))
"RTN","MCRH1",93,0)
 Q
"RTN","MCRH3")
0^9^B3720034
"RTN","MCRH3",1,0)
MCRH3 ; HOIFO/NCA - RHEUMATOLOGY Patient Background Info ;7/3/96  09:13
"RTN","MCRH3",2,0)
 ;;2.3;Medicine;**35**;09/13/1996
"RTN","MCRH3",3,0)
 ; Reference IA #10088
"RTN","MCRH3",4,0)
EN1 ; Get the Medicine View File #697.3 entry.
"RTN","MCRH3",5,0)
 N MCARC,MCHDR,MCRHS,MCARR,MCLP,MCLP1,MCX,MCTR,MCNAM,MCCOL,MCROW
"RTN","MCRH3",6,0)
 S (MCARC,MCCOL,MCROW)=0
"RTN","MCRH3",7,0)
 S MCRHS=$O(^MCAR(697.3,"B",MCRHB,0)) I 'MCRHS W !!,"No Medicine View Screen for Rheumatology Patient Background." Q
"RTN","MCRH3",8,0)
 S MCHDR=$P($G(^MCAR(697.3,MCRHS,0)),"^",7)
"RTN","MCRH3",9,0)
 S MCLP=0 F  S MCLP=$O(^MCAR(697.3,MCRHS,1,"A",MCLP)) Q:MCLP<1  D
"RTN","MCRH3",10,0)
 .S MCLP1=0 F  S MCLP1=$O(^MCAR(697.3,MCRHS,1,"A",MCLP,MCLP1)) Q:MCLP1<1  S MCARR(MCLP)=MCLP1
"RTN","MCRH3",11,0)
 S MCLP=0 F  S MCLP=$O(MCARR(MCLP)) Q:MCLP<1  S MCX=$G(MCARR(MCLP)),MCARR(MCLP)=$G(^MCAR(697.3,MCRHS,1,MCX,0))
"RTN","MCRH3",12,0)
 S X="IOINHI;IOINLOW" D ENDR^%ZISS
"RTN","MCRH3",13,0)
 W @IOF,?17,MCHDR S MCLP=0 F  S MCLP=$O(MCARR(MCLP)) Q:MCLP<1  S MCX=$G(MCARR(MCLP)) D
"RTN","MCRH3",14,0)
 .S MCNAM=$P(MCX,"^"),MCCOL=$P(MCX,"^",2)
"RTN","MCRH3",15,0)
 .S MCROW=$P(MCCOL,","),MCCOL=$P(MCCOL,",",2)
"RTN","MCRH3",16,0)
 .S MCROW=$P(MCROW,"DY=",2),MCCOL=$P(MCCOL,"DX=",2)
"RTN","MCRH3",17,0)
 .I MCROW'=MCARC F MCTR=1:1 Q:MCARC=MCROW  W ! S MCARC=MCARC+1
"RTN","MCRH3",18,0)
 .W IOINHI
"RTN","MCRH3",19,0)
 .W ?MCCOL,MCLP
"RTN","MCRH3",20,0)
 .W IOINLOW
"RTN","MCRH3",21,0)
 .W " ",MCNAM_$S($E(MCNAM,$L(MCNAM))=":":"",1:":")
"RTN","MCRH3",22,0)
 .W IOINHI
"RTN","MCRH3",23,0)
 .W $G(MCARR1(MCLP))
"RTN","MCRH3",24,0)
 .W IOINLOW
"RTN","MCRH3",25,0)
 W !!,"FUNCTION: "
"RTN","MCRH3",26,0)
 W !!,"  ^ -- Quit"
"RTN","MCRH3",27,0)
 W !,"  N -- New record",!
"RTN","MCRH3",28,0)
 K DIR S DIR(0)="SOA^N:New Record",DIR("A")="FUNCTION:",DIR("B")="N" D ^DIR Q:$D(DIRUT)!($D(DIROUT))
"RTN","MCRH3",29,0)
 K DIRUT,DIROUT,IOINLOW,IOINHI
"RTN","MCRH3",30,0)
 Q
"VER")
8.0^22.0
"^DD",697.3,697.3,0)
FIELD^^.1^10
"^DD",697.3,697.3,0,"DDA")
N
"^DD",697.3,697.3,0,"DT")
2960710
"^DD",697.3,697.3,0,"ID",.08)
W "   ",$P(^(0),U,7)
"^DD",697.3,697.3,0,"IX","AC",697.3,.01)

"^DD",697.3,697.3,0,"IX","B",697.3,.01)

"^DD",697.3,697.3,0,"IX","C",697.3,.08)

"^DD",697.3,697.3,0,"NM","MEDICINE SCREEN (USER)")

"^DD",697.3,697.3,0,"VRPK")
MC
"^DD",697.3,697.3,.01,0)
NAME^RF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>16!($L(X)<3)!'(X'?1P.E) X
"^DD",697.3,697.3,.01,1,0)
^.1
"^DD",697.3,697.3,.01,1,1,0)
697.3^B
"^DD",697.3,697.3,.01,1,1,1)
S ^MCAR(697.3,"B",$E(X,1,30),DA)=""
"^DD",697.3,697.3,.01,1,1,2)
K ^MCAR(697.3,"B",$E(X,1,30),DA)
"^DD",697.3,697.3,.01,1,2,0)
697.3^AC^MUMPS
"^DD",697.3,697.3,.01,1,2,1)
Q
"^DD",697.3,697.3,.01,1,2,2)
S DJ3=$P(^MCAR(697.3,DA,0),U,3),DJ5=$P(^MCAR(697.3,DA,0),U,5) S:DJ3'="" DJ3=$O(^MCAR(697.3,"B",DJ3,0)) S:DJ3 $P(^MCAR(697.3,DJ3,0),"^",5)="" S:DJ5'="" DJ5=$O(^MCAR(697.3,"B",DJ5,0)) S:DJ5 $P(^MCAR(697.3,DJ5,0),"^",3)="" K DJ3,DJ5
"^DD",697.3,697.3,.01,1,2,"%D",0)
^^3^3^2930528^^^^
"^DD",697.3,697.3,.01,1,2,"%D",1,0)
This cross-reference acts upon deletion of the screen to (1) remove the
"^DD",697.3,697.3,.01,1,2,"%D",2,0)
rightlinked pointer from the previous screen and (2) remove the previous
"^DD",697.3,697.3,.01,1,2,"%D",3,0)
pointer from the rightlinked screen.
"^DD",697.3,697.3,.01,1,2,"DT")
2930528
"^DD",697.3,697.3,.01,3)
ANSWER MUST BE 3-16 CHARACTERS IN LENGTH
"^DD",697.3,697.3,.01,21,0)
^^2^2^2930309^^^^
"^DD",697.3,697.3,.01,21,1,0)
This field contains the screen name associated with a display of entries.
"^DD",697.3,697.3,.01,21,2,0)
The name should start with 'MC' (Medicine Namespace Characters.)
"^DD",697.3,697.3,.01,"DT")
2930528
"^DD",697.3,697.3,.02,0)
MAXLINE^RNJ2,0^^0;2^K:+X'=X!(X>15)!(X<15)!(X?.E1"."1N.N) X
"^DD",697.3,697.3,.02,3)
Type a Number between 15 and 15
"^DD",697.3,697.3,.02,21,0)
^^2^2^2870922^
"^DD",697.3,697.3,.02,21,1,0)
This field contains the maximum length used by the screen display.  It
"^DD",697.3,697.3,.02,21,2,0)
can not exceed 15 lines.  The system computes this field automatically.
"^DD",697.3,697.3,.03,0)
PREVIOUS^FX^^0;3^K:$L(X)>16!($L(X)<1) X I $D(X),'$D(^MCAR(697.3,"B",X)) S DIC(0)="L",DIC="^MCAR(697.3," D ^DIC
"^DD",697.3,697.3,.03,3)
ANSWER MUST BE 1-16 CHARACTERS IN LENGTH
"^DD",697.3,697.3,.03,21,0)
^^3^3^2870922^
"^DD",697.3,697.3,.03,21,1,0)
This field is only applicable to multiple page screens.  This field points
"^DD",697.3,697.3,.03,21,2,0)
to the previous screen name. It is a free text pointer entered by the
"^DD",697.3,697.3,.03,21,3,0)
system automatically.
"^DD",697.3,697.3,.04,0)
SECURITY^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",697.3,697.3,.04,3)
Answer must be 1-10 characters in length.
"^DD",697.3,697.3,.04,21,0)
^^2^2^2870922^
"^DD",697.3,697.3,.04,21,1,0)
This field is set automatically to the write (WR) security of the file
"^DD",697.3,697.3,.04,21,2,0)
selected by the user, at the time the file is created.
"^DD",697.3,697.3,.04,"DT")
2890329
"^DD",697.3,697.3,.05,0)
RIGHTLINKED^FX^^0;5^K:$L(X)>16!($L(X)<1) X I $D(X),'$D(^MCAR(697.3,"B",X)) S DIC(0)="L",DIC="^MCAR(697.3," D ^DIC
"^DD",697.3,697.3,.05,3)
ANSWER MUST BE 1-16 CHARACTERS IN LENGTH
"^DD",697.3,697.3,.05,21,0)
^^3^3^2870923^^
"^DD",697.3,697.3,.05,21,1,0)
This field is only applicable to multiple page screens.  This field
"^DD",697.3,697.3,.05,21,2,0)
contains the name of the screen to be executed next.  It is a free text
"^DD",697.3,697.3,.05,21,3,0)
pointer entered by the system automatically.
"^DD",697.3,697.3,.06,0)
DD NUMBER^RNJ8,0X^^0;6^S DIC="^DIC(",DIC(0)="ENQ",DIC("S")=$S(DUZ(0)'="@":"I 1 Q:'$D(^DIC(+Y,0,""WR""))  F DJX=1:1:$L(^(""WR"")) I DUZ(0)[$E(^(""WR""),DJX) Q",1:"I Y-1") D ^DIC S X=+Y K:Y'>0 X
"^DD",697.3,697.3,.06,3)
Type a Legal Data Definition Number between 0 and 99999999
"^DD",697.3,697.3,.06,4)
S ZD=D,X="?" S DIC="^DIC(",DIC(0)="ENQ",DIC("S")=$S(DUZ(0)'="@":"I 1 Q:'$D(^DIC(+Y,0,""WR""))  F DJX=1:1:$L(^(""WR"")) I DUZ(0)[$E(^(""WR""),DJX) Q",1:"I Y-1") D ^DIC S DIC=DIE,D=ZD K ZD,DIC("S")
"^DD",697.3,697.3,.06,21,0)
^^2^2^2960605^^^
"^DD",697.3,697.3,.06,21,1,0)
The contents of this field should be a legal Data Definition (DD) number.
"^DD",697.3,697.3,.06,21,2,0)
It could be a first level.
"^DD",697.3,697.3,.07,0)
ENTRY DEFINITIONS^697.31I^^1;0
"^DD",697.3,697.3,.07,21,0)
^^1^1^2930527^^^
"^DD",697.3,697.3,.07,21,1,0)
This field defines the elements that make up the screen.
"^DD",697.3,697.3,.08,0)
DESCRIPTION^RF^^0;7^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>64!($L(X)<2) X
"^DD",697.3,697.3,.08,1,0)
^.1
"^DD",697.3,697.3,.08,1,1,0)
697.3^C
"^DD",697.3,697.3,.08,1,1,1)
S ^MCAR(697.3,"C",$E(X,1,30),DA)=""
"^DD",697.3,697.3,.08,1,1,2)
K ^MCAR(697.3,"C",$E(X,1,30),DA)
"^DD",697.3,697.3,.08,1,1,"DT")
2931230
"^DD",697.3,697.3,.08,3)
ANSWER MUST BE 2-64 CHARACTERS IN LENGTH
"^DD",697.3,697.3,.08,21,0)
^^2^2^2870923^
"^DD",697.3,697.3,.08,21,1,0)
The data entered in this field will be displayed at the top of the screen
"^DD",697.3,697.3,.08,21,2,0)
display as a title with the current date.
"^DD",697.3,697.3,.08,"DT")
2931230
"^DD",697.3,697.3,.09,0)
FILE LEVEL^NJ1,0^^0;8^K:+X'=X!(X>9)!(X<0)!(X?.E1"."1N.N) X
"^DD",697.3,697.3,.09,3)
Type a Number between 0 and 9, 0 Decimal Digits
"^DD",697.3,697.3,.09,21,0)
^^2^2^2870923^
"^DD",697.3,697.3,.09,21,1,0)
This field keeps track of the level of the screen display with respect
"^DD",697.3,697.3,.09,21,2,0)
to the hierarchy of the file.
"^DD",697.3,697.3,.09,"DT")
2870923
"^DD",697.3,697.3,.1,0)
HIGHEST NUMBER USED^NJ4,1^^0;9^K:+X'=X!(X>99)!(X<.1)!(X?.E1"."2N.N) X
"^DD",697.3,697.3,.1,3)
Type a Number between .1 and 99
"^DD",697.3,697.3,.1,21,0)
^^2^2^2870923^
"^DD",697.3,697.3,.1,21,1,0)
This field contains the highest number used in the screen display.  It is
"^DD",697.3,697.3,.1,21,2,0)
used when continuing adding entries.
"^DD",697.3,697.3,.1,"DT")
2870923
"^DD",697.3,697.31,0)
ENTRY DEFINITIONS SUB-FIELD^^6^12
"^DD",697.3,697.31,0,"DT")
2960710
"^DD",697.3,697.31,0,"ID",.11)
W "   ",$P(^(0),U,13)
"^DD",697.3,697.31,0,"IX","A",697.31,.11)

"^DD",697.3,697.31,0,"IX","AC",697.31,.07)

"^DD",697.3,697.31,0,"IX","B",697.31,.01)

"^DD",697.3,697.31,0,"NM","ENTRY DEFINITIONS")

"^DD",697.3,697.31,0,"UP")
697.3
"^DD",697.3,697.31,.01,0)
LABEL^MF^^0;1^K:$L(X)>30!($L(X)<3) X
"^DD",697.3,697.31,.01,1,0)
^.1
"^DD",697.3,697.31,.01,1,1,0)
697.31^B
"^DD",697.3,697.31,.01,1,1,1)
S ^MCAR(697.3,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",697.3,697.31,.01,1,1,2)
K ^MCAR(697.3,DA(1),1,"B",$E(X,1,30),DA)
"^DD",697.3,697.31,.01,3)
Enter a 3 to 30 character label for this screen entry.  This label will be displayed when the screen is executed.
"^DD",697.3,697.31,.01,21,0)
^^5^5^2910426^^^^
"^DD",697.3,697.31,.01,21,1,0)
This field identifies new elements to a screen (OPTION 1) select a valid field
"^DD",697.3,697.31,.01,21,2,0)
name or field number.  The field name that you select will be the label
"^DD",697.3,697.31,.01,21,3,0)
displayed on your screen.  You may change this label as desired.
"^DD",697.3,697.31,.01,21,4,0)
 To see a list of other commands you can enter at the label prompt type
"^DD",697.3,697.31,.01,21,5,0)
up-arrow C (^C).
"^DD",697.3,697.31,.02,0)
START X-Y^RF^^0;2^K:$L(X)>11!($L(X)<3) X
"^DD",697.3,697.31,.02,3)
ANSWER MUST BE 3-11 CHARACTERS IN LENGTH
"^DD",697.3,697.31,.02,21,0)
^^2^2^2910426^
"^DD",697.3,697.31,.02,21,1,0)
This field identifies the starting X-Y co-ordinates of the label (including
"^DD",697.3,697.31,.02,21,2,0)
the entry  number).  The co-ordinates are in the format: DX=number,DY=number.
"^DD",697.3,697.31,.03,0)
FIELD LENGTH^RNJ3,0^^0;3^K:+X'=X!(X>200)!(X<3)!(X?.E1"."1N.N) X
"^DD",697.3,697.31,.03,3)
Type a Number between 3 and 200, 0 Decimal Digits
"^DD",697.3,697.31,.03,21,0)
^^1^1^2870922^
"^DD",697.3,697.31,.03,21,1,0)
This field identifies the length of your data.
"^DD",697.3,697.31,.03,"DT")
2960710
"^DD",697.3,697.31,.04,0)
END X-Y^RF^^0;4^K:$L(X)>11!($L(X)<6) X
"^DD",697.3,697.31,.04,3)
ANSWER MUST BE 6-11 CHARACTERS IN LENGTH
"^DD",697.3,697.31,.04,21,0)
^^3^3^2910426^
"^DD",697.3,697.31,.04,21,1,0)
This field identifies the ending X-Y co-ordinates of the label (Including
"^DD",697.3,697.31,.04,21,2,0)
Entry number, the label, and any following punctuation.)  The co-ordinates are
"^DD",697.3,697.31,.04,21,3,0)
in the format:  DX=number,DY=number.
"^DD",697.3,697.31,.05,0)
ATTRIBUTE NR^RNJ11,4^^0;5^K:+X'=X!(X>999999)!(X<-1)!(X?.E1"."5N.N) X
"^DD",697.3,697.31,.05,3)
Type a Number between -1 and 999999, 4 Decimal Digits
"^DD",697.3,697.31,.05,21,0)
^^1^1^2910426^
"^DD",697.3,697.31,.05,21,1,0)
This field contains the file attribute number for the data.
"^DD",697.3,697.31,.05,"DT")
2871020
"^DD",697.3,697.31,.06,0)
TYPE^F^^0;6^K:$L(X)>20!($L(X)<1) X
"^DD",697.3,697.31,.06,3)
Answer must be 1-20 characters in length.
"^DD",697.3,697.31,.06,21,0)
^^3^3^2920309^^
"^DD",697.3,697.31,.06,21,1,0)
This field is similar to the descriptor in the Data Dictionary.  It allows
"^DD",697.3,697.31,.06,21,2,0)
the screen management system to decide whether the data is a set of codes,
"^DD",697.3,697.31,.06,21,3,0)
free text, pointer file, etc.
"^DD",697.3,697.31,.06,"DT")
2920309
"^DD",697.3,697.31,.07,0)
RD(ONLY)^S^1:YES;0:NO;^0;7^Q
"^DD",697.3,697.31,.07,1,0)
^.1
"^DD",697.3,697.31,.07,1,1,0)
697.31^AC^MUMPS
"^DD",697.3,697.31,.07,1,1,1)
I X=1&(^MCAR(697.3,DA(1),1,DA,0)'["(R)") S $P(^(0),U,4)=$P($P(^(0),U,4),"X=",1)_"X="_($P($P(^(0),U,4),"X=",2)+3) X ^DD(697.31,.07,1,1,1.1) Q
"^DD",697.3,697.31,.07,1,1,1.1)
S DIV=$P(^MCAR(697.3,DA(1),1,DA,0),U,1),$P(^(0),U,1)=DIV_"(R)",^MCAR(697.3,DA(1),1,"B",DIV_"(R)",DA)="" K ^MCAR(697.3,DA(1),1,"B",DIV,DA),DIV Q
"^DD",697.3,697.31,.07,1,1,1.2)
I ^MCAR(697.3,DA(1),1,DA,0)["(R)" S DIV2=$P(^(0),"(R)",1),DIV=$P(^(0),U,10)-3,DIV1=$P(^(0),U,4),DIV1=$P(DIV1,"DX=",1)_"DX="_DIV X ^DD(697.31,.07,1,1,1.3)
"^DD",697.3,697.31,.07,1,1,1.3)
S ^MCAR(697.3,DA(1),1,DA,0)=DIV2_"^"_$P(^MCAR(697.3,DA(1),1,DA,0),"^",2,3)_"^"_DIV1_"^"_$P(^(0),"^",5,9)_"^"_DIV_"^"_$P(^(0),"^",11,15) K DIV,DIV1,DIV2
"^DD",697.3,697.31,.07,1,1,2)
I ^MCAR(697.3,DA(1),1,DA,0)["(R)" S DIV=$P(^(0),U,1),$P(^(0),U,1)=$P(^(0),"(R)",1),$P(^(0),U,4)=$P($P(^(0),U,4),"X=",1)_"X="_($P($P(^(0),U,4),"X=",2)-3) X ^DD(697.31,.07,1,1,2.1) Q
"^DD",697.3,697.31,.07,1,1,2.1)
S ^MCAR(697.3,DA(1),1,"B",$P(^MCAR(697.3,DA(1),1,DA,0),U,1),DA)="" K ^MCAR(697.3,DA(1),1,"B",DIV,DA),DIV Q
"^DD",697.3,697.31,.07,1,1,"%D",0)
^^2^2^2920421^
"^DD",697.3,697.31,.07,1,1,"%D",1,0)
This cross-reference controls the definition of cursor addresses for
"^DD",697.3,697.31,.07,1,1,"%D",2,0)
read-only fields.
"^DD",697.3,697.31,.07,3)
Is this field for display only?
"^DD",697.3,697.31,.07,21,0)
^^2^2^2870922^
"^DD",697.3,697.31,.07,21,1,0)
This field is used to indicate 'DISPLAY' only of data.  This means no
"^DD",697.3,697.31,.07,21,2,0)
updating is allowed.
"^DD",697.3,697.31,.11,0)
ENTRY NUM^RNJ4,1X^^0;13^K:+X'=X!(X>99.9)!(X<.1)!(X?.E1"."2N.N)!($D(^MCAR(697.3,DA(1),1,"A",X))) X
"^DD",697.3,697.31,.11,1,0)
^.1
"^DD",697.3,697.31,.11,1,1,0)
697.31^A
"^DD",697.3,697.31,.11,1,1,1)
S ^MCAR(697.3,DA(1),1,"A",$E(X,1,30),DA)=""
"^DD",697.3,697.31,.11,1,1,2)
K ^MCAR(697.3,DA(1),1,"A",$E(X,1,30),DA)
"^DD",697.3,697.31,.11,1,1,"%D",0)
^^1^1^2930903^
"^DD",697.3,697.31,.11,1,1,"%D",1,0)
This cross-reference allow the screen handler to get the Entry number.
"^DD",697.3,697.31,.11,3)
Type a Number between .1 and 99.9, no duplicates are allowed.
"^DD",697.3,697.31,.11,21,0)
^^3^3^2910426^^^^
"^DD",697.3,697.31,.11,21,1,0)
This field identifies the entry number that shows on the screen for this data
"^DD",697.3,697.31,.11,21,2,0)
element. Numbers with a decimal point are used for subtitles, that is no data
"^DD",697.3,697.31,.11,21,3,0)
is associated with them.
"^DD",697.3,697.31,.11,"DT")
2870923
"^DD",697.3,697.31,1,0)
POST ACTION CODE^FX^^1;E1,200^K:$L(X)>200!($L(X)<1) X D ^DIM:$D(X)
"^DD",697.3,697.31,1,3)
ANSWER MUST BE 1-200 CHARACTERS IN LENGTH (MUMPS CODE ONLY)
"^DD",697.3,697.31,1,21,0)
^^2^2^2910426^^^
"^DD",697.3,697.31,1,21,1,0)
This field identifies standard MUMPS code that is executed after the
"^DD",697.3,697.31,1,21,2,0)
entering/editing of data for this entry.
"^DD",697.3,697.31,2,0)
PRE ACTION CODE^FX^^2;E1,200^K:$L(X)>200!($L(X)<1) X D ^DIM:$D(X)
"^DD",697.3,697.31,2,3)
ANSWER MUST BE 1-200 CHARACTERS IN LENGTH (MUMPS CODE ONLY)
"^DD",697.3,697.31,2,21,0)
^^2^2^2910426^^
"^DD",697.3,697.31,2,21,1,0)
This field identifies standard MUMPS code that is executed prior to the
"^DD",697.3,697.31,2,21,2,0)
entering or editing of data for this entry.
"^DD",697.3,697.31,5,0)
MULTIPLE SCREEN NAME^FX^^0;12^K:$L(X)>16!($L(X)<4) X ;I $D(X),'$D(^MCAR(697.3,DA(1),"B",X)) K X
"^DD",697.3,697.31,5,3)
This entry is automatically generated by the system.
"^DD",697.3,697.31,5,21,0)
^^3^3^2910426^^
"^DD",697.3,697.31,5,21,1,0)
This field identifies the name of the subscreen to branch to for a multiple
"^DD",697.3,697.31,5,21,2,0)
field. This subscreen will be executed ONLY IF the subscreen has more than a
"^DD",697.3,697.31,5,21,3,0)
.01 data point.
"^DD",697.3,697.31,5,"DT")
2901004
"^DD",697.3,697.31,6,0)
DEFAULT VALUE^FX^^3;1^K:$L(X)>30!($L(X)<1)!($P(^MCAR(697.3,DA(1),DA,0),"^",5)=.01)!($P(^(0),"^",6)["C")!($P(^(0),"^",7)) X
"^DD",697.3,697.31,6,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH.  Not applicable to .01, computed, or read only fields
"^DD",697.3,697.31,6,21,0)
^^2^2^2870922^^
"^DD",697.3,697.31,6,21,1,0)
Enter a legitimate default value for this field.  .01 Fields as well as
"^DD",697.3,697.31,6,21,2,0)
computed or read only are not allowed.
"^DD",700,700,38,0)
USE RACE CORRECTIONS^S^Y:YES;N:NO;^17;5^Q
"^DD",700,700,38,3)
Answer 'Yes' or 'No'.  The system has built in corrections for the predicted value formulas for 'Black' or 'Asian' patients. 'Yes' will include these corrections in the Predicted Value Formulas.
"^DD",700,700,38,21,0)
^.001^2^2^3030130^^^^
"^DD",700,700,38,21,1,0)
This field allows the user to decide whether certain data should be
"^DD",700,700,38,21,2,0)
race corrected.  Used for Black or Oriental patients.
"^DD",700,700,38,"DT")
2901221
"^DD",700,700,38.5,0)
RACE CORRECTIONS FOR RACE TYPE^S^B:BLACK;A:ASIAN;^17;7^Q
"^DD",700,700,38.5,3)
Enter B for BLACK or A for ASIAN.
"^DD",700,700,38.5,21,0)
^^3^3^3030124^
"^DD",700,700,38.5,21,1,0)
If the 'USE RACE CORRECTIONS' is set to YES and the race value is both 
"^DD",700,700,38.5,21,2,0)
BLACK and ASIAN, this field will store which race type the race 
"^DD",700,700,38.5,21,3,0)
correction will be for.
"^DD",700,700,38.5,23,0)
^.001^1^1^3030124^^^^
"^DD",700,700,38.5,23,1,0)
This field will store either a 'B' for BLACK or 'A' for ASIAN.
"^DD",700,700,38.5,"DT")
3030124
"^DIC",697.3,697.3,0)
MEDICINE SCREEN (USER)^697.3I
"^DIC",697.3,697.3,0,"GL")
^MCAR(697.3,
"^DIC",697.3,697.3,"%D",0)
^^2^2^2940504^^^^
"^DIC",697.3,697.3,"%D",1,0)
This file contains the screen characteristics of the medicine screen to
"^DIC",697.3,697.3,"%D",2,0)
be displayed.
"^DIC",697.3,"B","MEDICINE SCREEN (USER)",697.3)

**END**
**END**

$TXT Created by NAGRECHA,VARSHA at LAWVAA.FO-BIRM.MED.VA.GOV  (KIDS) on Monday, 04/12/04 at 15:14
=============================================================================
Run Date: MAY 12, 2004                     Designation: PSO*7*167
Package : PSO - OUTPATIENT PHARMACY           Priority: EMERGENCY
Version : 7       SEQ #148                      Status: Released
                  Compliance Date: MAY 14, 2004
=============================================================================

Associated patches: (v)PSO*7*126   <<= must be installed BEFORE `PSO*7*167'
                    (v)PSO*7*139   <<= must be installed BEFORE `PSO*7*167'

Subject: CMOP PRESCRIPTION DIVISION EDIT AFTER SUSPENSE

Category: 
  - Routine

Description:
============

  
 NOIS TOM-0104-41317
  
 Problem
 -------
 When using the Patient Prescription Processing [PSO LM BACKDOOR ORDERS] 
 option to edit the division on an original prescription or refill that 
 is suspended for CMOP (Consolidated Mail Outpatient Pharmacy), the
 possibility exists that the prescription will not be sent to
 CMOP due to an invalid cross-reference.
  
 Resolution
 ----------
 This patch will fix this issue by maintaining the CMOP compound index 
 in the PRESCRIPTION SUSPENSE file (#52.5) correctly.
  
 This patch has a post install clean-up routine that will:
  
 1. Look for entries in PRESCRIPTION SUSPENSE file (#52.5) affected by 
    the problem above and will reset the "CMP" cross-reference for entries
    within 6 months from the date of install that have not been printed.
    If there are any "CMP" entries existing that do not have a
    corresponding internal entry number in the PRESCRIPTION
    SUSPENSE file (#52.5), the "CMP" entry will be deleted.
 
 2. During Installation of this patch the user will be asked: "Queue the
    Post-Install to run at what Date@Time:  ". If the prompt is not answered,
    the patch WILL NOT be installed. After the post install routine 
    is run to completion at the time the user indicated, a MailMan message 
    with the subject "PRESCRIPTION SUSPENSE File (#52.5) reset "CMP" XRef" 
    containing the list of prescriptions will be sent to the person  
    installing the patch.
  
 3. It is possible that an old prescription in a non-transmitted state might
    be reset to a current division and be set up for transmission to CMOP.
 
    Please have Outpatient Pharmacy review the mailman report and verify
    that the patient still needs the Rx.  Pharmacy may also want to notify  
    the patient if there has been a delay. 
 
    Outpatient Pharmacy needs to be aware that these Rx's have not been
    transmitted to CMOP.
 
    Unless they are printed locally or discontinued, they will transmit      
    to CMOP.
 
  
 NOTE: ** THE POST-INSTALL SHOULD BE QUEUED TO RUN AT OFF-PEAK HOURS NOT
          INTERFERING WITH CMOP TRANSMISSION TIMES AT YOUR SITE. **
  
 NOTE: ** Any local options created, or local procedures established to
          Re-index the "CMP" x-ref in 52.5 will no longer be needed after 
          installation of this patch. **
 
  
 Associated NOIS:
 ================
 TOM-0104-41317   CMOP RX'S not transmitting from Suspense.
 AMA-0204-71648   (duplicate) RXS HUNG IN SUSPENSE
 HWH-0204-41976   (duplicate) CMOP transmission failure
  
 Test Sites:
 ===========
 DUBLIN, GA
 TOMAH, WI
 VA GREATER LOS ANGELES HCS
 BIG SPRING, TX
 OKLAHOMA CITY, OK
  
 Routine Summary:
 ================
  The following is a list of the routines included in this patch.  The
  second line of each of these routines now looks like:
  
   <TAB>;;7.0;OUTPATIENT PHARMACY;**[Patch List]**;DEC 1997
  
           CHECK^XTSUMBLD results:
  
  Routine  Before Patch   After Patch     Patch List
  -------  ------------   -----------     ----------
  PSOSUTL      30468372      31189521     10,34,139,167
  PSOPOS13          N/A      11080353               167
  
  
 Server Installation Instructions:
 =================================
                          **NOTE**
 Before installing this patch you will need to un-schedule the CMOP
 Transmission options. To un-schedule these options, use the Setup
 Auto-transmission [PSXR AUTO TRANSMIT] option. Select the tasks and 
 DELETE the "QUEUED TO RUN AT WHAT TIME:".
 
 The install will NOT continue if either of these options are queued to run.
 
 
                          **NOTE**
 Do NOT install this patch while Outpatient Pharmacy users are on the 
 system or when Outpatient orders are being entered and signed through 
 CPRS.
 
 Installation will take no longer than 5 minutes.
  
    Suggested time to install: non-peak requirement hours.
  
    1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
    2. Review your mapped set. If the routines are mapped, they should
       be removed from the mapped set at this time.
  
    3. From the Kernel Installation & Distribution System menu, select
       the Installation menu.
  
    4. From this menu, you may select to use the following options
       (when prompted for INSTALL NAME, enter PSO*7.0*167)
      a.  Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
      b.  Print Transport Global - This option will allow you to view
          the components of the KIDS build.
      c.  Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this        
          patch is installed.  It compares all components of this patch
          (routines, DD's, templates, etc.).
      d.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as DD's or templates.
  
    5. Use the Install Package(s) option and select the package PSO*7.0*167
  
                          **NOTE**
    6. The Environment check routine will be run and when prompted
       "Queue the Post-Install to run at what Date@Time:" it is
       recommended to enter an off-peak time. If this prompt is not
       answered, the patch will not be installed.
  
    7. When prompted "Want KIDS to INHIBIT LOGONs during the install?
       YES//" respond NO.
  
    8. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//" respond NO.
  
    9. If any routines were unmapped as part of step 2, they should be
       returned to the mapped set once the installation has run to
       completion.
 
   10. After receiving the Mailman report, and having Outpatient Pharmacy
       review the Rx's in question, reschedule your CMOP transmissions.  
       Use the Setup Auto-transmission (PSXR AUTO TRANSMIT) option to 
       schedule these options.
  
 Example Installation:
 =====================
  
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME: PSO*7.0*167       Loaded from Distribution 
 3/2/04@14:17:09
      => PSO*7.0*167
  
 This Distribution was loaded on Mar 02, 2004@14:17:09 with header of
    PSO*7.0*167
    It consisted of the following Install(s):
     PSO*7.0*167
 Checking Install for Package PSO*7.0*167
 Will first run the Environment Check Routine, PSOPOS13
  
  
 Queue the Post-Install to run at what Date@Time: T@14:20  (MAR 02, 2004@14:20)
  
 Install Questions for PSO*7.0*167
  
 Incoming Files:
  
  
    52        PRESCRIPTION
 Note:  You already have the 'PRESCRIPTION' File.
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   GENERIC INCOMING TELNET
  
  
  Install Started for PSO*7.0*167 :
                Mar 02, 2004@14:18:28
  
 Build Distribution Date: Mar 02, 2004
  
  Installing Routines:
                Mar 02, 2004@14:18:28
  
  Installing Data Dictionaries:
                Mar 02, 2004@14:18:29
  
  Running Post-Install Routine: EN^PSOPOS13
  
 Task Queued!
  
  Updating Routine file...
  
  The following Routines were created during this install:
                                   PSO*7.0*167
  ---------------------------------------------------------------------------
      PSOXZA
      PSOXZA1
      PSOXZA2
      PSOXZA3
      PSOXZA4
      PSOXZA5
      PSOXZA6
      PSOXZA7
      PSOXZA8
  
  Updating KIDS files...
  
  PSO*7.0*167 Installed.
                Mar 02, 2004@14:18:30
  
  Install Message sent #5423156
 --------------------------------------------------------------------------------
           [------------------------------------------------------------]
   100%    |             25             50             75               |
 Complete  [------------------------------------------------------------]
  
  
 Install Completed
 
 Example Mailman Report
 ======================
 
 Subj: PRESCRIPTION SUSPENSE File (#52.5) reset "CMP" Xref  [#93035]
 04/12/04@15:21  13 lines
 From: PATCH PSO*7*167  In 'IN' basket.   Page 1
 -------------------------------------------------------------------------------
 Patch PSO*7*167 File (#52.5) "CMP" Xref clean-up is complete.
  
 It started on APR 12, 2004@15:21:02.
 It ended on APR 12, 2004@15:21:02.
  
 "CMP" CROSS-REFERENCES THAT WERE REINDEXED
 RX #             PATIENT NAME                CMOP STATUS  SUSPENSE DATE
  
 100004014        ELWAY,JOHN                  Q            MAR 10, 2004
 100004070        TESTPATIENT,TWO             Q            APR 22, 2004
 100004064        WHITE-RIVER-JUNCTION        Q            APR 15, 2004
  
 **  END OF LIST **

Routine Information:
====================

Routine Name:
  - PSOSUTL


Routine Checksum:

Routine Name:
  - PSOPOS13


Routine Checksum:

=============================================================================
User Information:
Entered By  : NAGRECHA,VARSHA               Date Entered  : FEB 26, 2004
Completed By: DI BENEDETTO,PETER            Date Completed: MAY 12, 2004
Released By : PARRIS,CHRIS                  Date Released : MAY 12, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

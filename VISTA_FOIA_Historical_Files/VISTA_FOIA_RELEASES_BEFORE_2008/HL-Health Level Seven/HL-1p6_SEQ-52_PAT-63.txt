$TXT Created by CLEMENS,JOHN at NXT.KERNEL.ISC-SF.VA.GOV  (KIDS) on WEDNESDAY, 03/29/00 at 13:56
=============================================================================
Run Date: MAY 04, 2000                     Designation: HL*1.6*63
Package : HL - HEALTH LEVEL SEVEN            Priority: Mandatory
Version : 1.6        SEQ #52                    Status: Released
=============================================================================

Associated patches: (v)HL*1.6*57   <<= must be installed BEFORE `HL*1.6*63'
                    (v)HL*1.6*58   <<= must be installed BEFORE `HL*1.6*63'
                    (v)XU*8*142    <<= must be installed BEFORE `HL*1.6*63'

Subject: HL7 Support for DNS Lookups

Category: 
  - Routine

Description: 
============

 This patch introduces DNS support for Vista HL7. In order to conduct HL7
 message exchange between sites using TCP, the TCP/IP address of each site
 running an HL7 service must be known by all other sites. If the address is
 changed, such as from "152.x.x.x" to "10.x.x.x," or when the HL7 service
 is moved to a different computer, or when multiple computers are able to
 support HL7 services at a single domain, other sites can use DNS to
 "discover" this information without interruption in message exchange.
   
 When a connection attempt over a TCP Logical Link fails, a call will be
 made to the locally specified Domain Name Server (found in the Kernel Site
 Parameters) to retrieve the current IP address. This feature was
 introduced in Kernel patch XU*8*142. One or more IP addresses may be
 registered on the DNS systems. The DNS was initially seeded with IP
 information supplied by HL*1.6*39 and any subsequent changes made to date
 to the VA* and MPI logical links. These IP addresses are associated
 specifically with the service "HL7" on the DNS and the port 5000. The port
 number is currently fixed for VA-to-VA HL7 messaging in production
 accounts and should not be changed.
  
 If one or more IP addresses are returned, each address will be tried in
 sequence until a successful connection is made. The successful IP address
 will then be stored and used until the next connection attempt that fails.
   
 Queries to the DNS will work only if the Logical Link (file 870) points to
 the correct Domain (file 4.2). Review the link definitions paying
 particular attention to those links in your VISN and verify that the
 Domain field is defined correctly.
   
 The Logical Link that represents your site should be configured as a
 "multithreaded listener" to receive INBOUND connection requests. 
  
 Following the installation of this patch you should enable your TCP/IP
 listener for inbound HL7 connections. Detailed instructions for this may
 be found in the HL7 Document, "Vista HL7 Site Manager and Developer
 Manual" released as HL*1.6*56. Here, you will find information for both
 Cache and for configuring UCX/TCP services under the OpenVMS operating
 system.
  
 The IP address and port for this listener is known by all other sites and
 referenced by them to establish a connection. Changing the IP address will
 prevent sites from establishing a connection. Therefore, if you wish to
 establish a new IP address, your nearest national VA DNS must be updated
 in advance of the change. It must contain an entry in the format,
 HL7.yoursite.med.va.gov, and your new TCP/IP address. For example, DNS
 will contain an entry for Bay Pines VA looking like,
 "HL7.BAY-PINES.MED.VA.GOV." This entry will return a TCP/IP address of
 152.130.80.5. Note that this entry does not have to be placed in your
 local Domain file (4.2). However, that file should already have the entry
 for BAY-PINES.MED.VA.GOV (the synonym for BAY-PINES.VA.GOV) and should be
 pointed to by a single logical link in the HL7 package.
  
 Please note that the HL7 development team is not responsible for
 maintenance of the VA's DNS systems. Questions should be refered to your
 local or VISN-level DNS administrator, or via MS Exchange to the group,
 "VHA CIO DNS ADMIN."
   
   
 The following routines are included in this patch.  The second line of
 each of these routines now looks like:
   
    ;;1.6;HEALTH LEVEL SEVEN;<patchlist>;Oct 13, 1995
   
   CHECK^XTSUMBLD results: 
     
   Routine Name   Before Patch    After Patch     Patch List 
   ============   ============    ===========     ========== 
   HLCSTCP2       10328595        11299763        **19,43,49,57,63**
   HLMA           6284735         7929932         **19,43,58,63**
   
  List of preceding patches: 57, 58
  Sites should use CHECK^XTSUMBLD to verify checksums.
   
  Installation Instructions: 
  ==========================
    1.  Users are allowed to be on the system during the installation.  
   
    2.  DSM SITES: Review your mapped set.  If any of the routines listed
        in the Routine Summary section are mapped, they should be removed
        from the mapped set at this time.
   
    3.  Shutdown all Logical Links and incoming and outgoing filers, and
        the Link Manager. Use the options:
   
          Filer and Link Management Options -> 
              SA     Stop All Messaging Background Processes
              LM     TCP/IP Link Manager Start/Stop
   
    4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
        option will load the KIDS package onto your system.  
   
    5.  The patch has now been loaded into a Transport global on your 
        system. You now need to use KIDS to install the Transport global.  
        On the KIDS menu, under the 'Installation' menu, use the following 
        options: 
   
           2 Verify Checksums in Transport Global 
           3 Print Transport Global 
           4 Compare Transport Global to Current System 
           5 Backup a Transport Global 
           6 Install Package(s) 
               INSTALL NAME: HL*1.6*63
                             =========
   
   
          Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.
    
          Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
          and Protocols?'.  
   
    6.  Startup all Logical Links and incoming and outgoing filers. Use the
  
   
          Filer and Link Management Options ->
              RA     Restart/Start All Links and Filers
          (Note that links that do not have "autostart" enabled will need
           to be restarted manually)
     
        For DSM sites ONLY, if you previously disabled an HL7 UCX Service
        for this installation, you may now enable it.
   
    7.  DSM Sites: Rebuild your mapped set if necessary.
   
    8.  Start Link Manager using the option: "TCP/IP
          Link Manager Start/Stop."

Routine Information:
====================

Routine Name:
  - HLMA


Routine Checksum:

Routine Name:
  - HLCSTCP2


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : CLEMENS,JOHN                   Date Entered : FEB 23, 2000
Completed By: DIMICELI,RON                  Date Completed: MAY 04, 2000
Released By : SINGH,GURBIR                  Date Released : MAY 04, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

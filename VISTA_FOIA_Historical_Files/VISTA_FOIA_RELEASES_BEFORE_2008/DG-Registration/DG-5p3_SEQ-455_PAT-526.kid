EMERGENCY Released DG*5.3*526 SEQ #455
Extracted from mail message
**KIDS**:DG*5.3*526^

**INSTALL NAME**
DG*5.3*526
"BLD",4804,0)
DG*5.3*526^REGISTRATION^0^3030618^y
"BLD",4804,1,0)
^^1^1^3030603^
"BLD",4804,1,1,0)
Emergency patch to facilitate the patient file conversion.
"BLD",4804,4,0)
^9.64PA^^
"BLD",4804,"INI")
DG53P526
"BLD",4804,"INID")
n^^n
"BLD",4804,"KRN",0)
^9.67PA^8989.52^19
"BLD",4804,"KRN",.4,0)
.4
"BLD",4804,"KRN",.401,0)
.401
"BLD",4804,"KRN",.402,0)
.402
"BLD",4804,"KRN",.403,0)
.403
"BLD",4804,"KRN",.5,0)
.5
"BLD",4804,"KRN",.84,0)
.84
"BLD",4804,"KRN",3.6,0)
3.6
"BLD",4804,"KRN",3.8,0)
3.8
"BLD",4804,"KRN",9.2,0)
9.2
"BLD",4804,"KRN",9.8,0)
9.8
"BLD",4804,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4804,"KRN",9.8,"NM",1,0)
DGFCPROT^^0^B4428496
"BLD",4804,"KRN",9.8,"NM","B","DGFCPROT",1)

"BLD",4804,"KRN",19,0)
19
"BLD",4804,"KRN",19.1,0)
19.1
"BLD",4804,"KRN",101,0)
101
"BLD",4804,"KRN",409.61,0)
409.61
"BLD",4804,"KRN",771,0)
771
"BLD",4804,"KRN",870,0)
870
"BLD",4804,"KRN",8989.51,0)
8989.51
"BLD",4804,"KRN",8989.52,0)
8989.52
"BLD",4804,"KRN",8994,0)
8994
"BLD",4804,"KRN","B",.4,.4)

"BLD",4804,"KRN","B",.401,.401)

"BLD",4804,"KRN","B",.402,.402)

"BLD",4804,"KRN","B",.403,.403)

"BLD",4804,"KRN","B",.5,.5)

"BLD",4804,"KRN","B",.84,.84)

"BLD",4804,"KRN","B",3.6,3.6)

"BLD",4804,"KRN","B",3.8,3.8)

"BLD",4804,"KRN","B",9.2,9.2)

"BLD",4804,"KRN","B",9.8,9.8)

"BLD",4804,"KRN","B",19,19)

"BLD",4804,"KRN","B",19.1,19.1)

"BLD",4804,"KRN","B",101,101)

"BLD",4804,"KRN","B",409.61,409.61)

"BLD",4804,"KRN","B",771,771)

"BLD",4804,"KRN","B",870,870)

"BLD",4804,"KRN","B",8989.51,8989.51)

"BLD",4804,"KRN","B",8989.52,8989.52)

"BLD",4804,"KRN","B",8994,8994)

"BLD",4804,"PRE")
DG53E526
"BLD",4804,"QUES",0)
^9.62^^
"BLD",4804,"REQB",0)
^9.611^1^1
"BLD",4804,"REQB",1,0)
DG*5.3*273^1
"BLD",4804,"REQB","B","DG*5.3*273",1)

"INI")
DG53P526
"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
526^3030618^100850
"PKG",5,22,1,"PAH",1,1,0)
^^1^1^3030618
"PKG",5,22,1,"PAH",1,1,1,0)
Emergency patch to facilitate the patient file conversion.
"PRE")
DG53E526
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","DG53E526")
0^^B732112
"RTN","DG53E526",1,0)
DG53E526 ;BAY/JAT - ENVIRONMENT CHECK ; 9/17/02 3:32pm ; 6/18/03 9:06am
"RTN","DG53E526",2,0)
 ;;5.3;Registration;**526**;AUG 13,1993
"RTN","DG53E526",3,0)
 ;;
"RTN","DG53E526",4,0)
EN ;
"RTN","DG53E526",5,0)
 S XPDABORT=""
"RTN","DG53E526",6,0)
 D PROGCHK(.XPDABORT)
"RTN","DG53E526",7,0)
 I XPDABORT="" K XPDABORT
"RTN","DG53E526",8,0)
 ;
"RTN","DG53E526",9,0)
 Q
"RTN","DG53E526",10,0)
 ;
"RTN","DG53E526",11,0)
PROGCHK(XPDABORT) ;
"RTN","DG53E526",12,0)
 I '$G(DUZ)!($G(DUZ(0))'="@")!('$G(DT))!($G(U)'="^") DO
"RTN","DG53E526",13,0)
 .D BMES^XPDUTL("*****")
"RTN","DG53E526",14,0)
 .D MES^XPDUTL("Your programming variables are not set up properly.")
"RTN","DG53E526",15,0)
 .D MES^XPDUTL("Installation aborted.")
"RTN","DG53E526",16,0)
 .D MES^XPDUTL("*****")
"RTN","DG53E526",17,0)
 .S XPDABORT=2
"RTN","DG53E526",18,0)
 .Q
"RTN","DG53E526",19,0)
 Q
"RTN","DG53E526",20,0)
 ;
"RTN","DG53P526")
0^^B1031252
"RTN","DG53P526",1,0)
DG53P526 ;BAY/JAT - ADD RESOURCE DEVICE ; 6/3/03 3:26pm
"RTN","DG53P526",2,0)
 ;;5.3;Registration;**526**;AUG 13,1993 
"RTN","DG53P526",3,0)
EN ; pre-init
"RTN","DG53P526",4,0)
 N DIC,DGLOC,DGNAME,DGI,DGSLOTS,DGTYP,DGSUBTYP,X
"RTN","DG53P526",5,0)
 D BMES^XPDUTL(">>>Adding Resource Device")
"RTN","DG53P526",6,0)
 S DIC=3.5
"RTN","DG53P526",7,0)
 S DIC(0)="L"
"RTN","DG53P526",8,0)
 S DGLOC="DG field editing protocol"
"RTN","DG53P526",9,0)
 S (DGNAME,DGI)="DG FIELD MONITOR"
"RTN","DG53P526",10,0)
 S DGSLOTS=9
"RTN","DG53P526",11,0)
 S DGTYP="RESOURCES"
"RTN","DG53P526",12,0)
 S DGSUBTYP="P-OTHER"
"RTN","DG53P526",13,0)
 S DIC("DR")=".02///"_DGLOC_";1///"_DGNAME_";2///"_DGTYP_";3///"_DGSUBTYP_";35///"_DGSLOTS
"RTN","DG53P526",14,0)
 S X=DGNAME
"RTN","DG53P526",15,0)
 I +$O(^%ZIS(1,"B",X,0)) Q
"RTN","DG53P526",16,0)
 K DO D FILE^DICN
"RTN","DG53P526",17,0)
 I Y=-1 Q
"RTN","DG53P526",18,0)
 D BMES^XPDUTL(">>>DG FIELD MONITOR device added")
"RTN","DG53P526",19,0)
 Q
"RTN","DGFCPROT")
0^1^B4428496
"RTN","DGFCPROT",1,0)
DGFCPROT ;FLB/ALB-DG Field Monitor cross-reference initialing routine. ; 01 AUG 2000 ; 6/18/03 9:08am
"RTN","DGFCPROT",2,0)
 ;;5.3;Registration;**273,526**;AUG 13, 1993
"RTN","DGFCPROT",3,0)
 ;
"RTN","DGFCPROT",4,0)
FC(DGDA,DGFILE,DGFIELD,DGTYPE,DGDTH,DGUSER,DGX,DGX1,DGX2,DGOPT) ; Field change listener
"RTN","DGFCPROT",5,0)
 ;Input: DGDA = DA array as exists during Fileman editing
"RTN","DGFCPROT",6,0)
 ;Input: DGFILE = File or subfile number where changed field resides
"RTN","DGFCPROT",7,0)
 ;Input: DGFIELD = Number of changed field
"RTN","DGFCPROT",8,0)
 ;Input: DGTYPE = Type of cross reference action ("SET" or "KILL")
"RTN","DGFCPROT",9,0)
 ;Input: DGDTH = date/time of change in $Horolog format
"RTN","DGFCPROT",10,0)
 ;Input: DGUSER = DUZ of user that made the change
"RTN","DGFCPROT",11,0)
 ;Input: DGX = X array as documented for Fileman new style x-refs
"RTN","DGFCPROT",12,0)
 ;Input: DGX1 = X1 array as documented for Fileman new style x-refs
"RTN","DGFCPROT",13,0)
 ;Input: DGX2 = X2 array as documented for Fileman new style x-refs
"RTN","DGFCPROT",14,0)
 ;Input: DGOPT = current option in "option_name^menu_text" format
"RTN","DGFCPROT",15,0)
 ;
"RTN","DGFCPROT",16,0)
 ;This utility invokes the DG FIELD MONITOR event point protocol.
"RTN","DGFCPROT",17,0)
 ;The DG variables as described above are made available to the
"RTN","DGFCPROT",18,0)
 ;subscribers of this event point.
"RTN","DGFCPROT",19,0)
 ;
"RTN","DGFCPROT",20,0)
 ;NOTE: This event point is not invoked if the action type is "KILL"
"RTN","DGFCPROT",21,0)
 ;      and the old field value is null or the new value is not null.
"RTN","DGFCPROT",22,0)
 ;      It is not invoked if the action type is "SET" and the new 
"RTN","DGFCPROT",23,0)
 ;      field value is null.
"RTN","DGFCPROT",24,0)
 ;
"RTN","DGFCPROT",25,0)
 Q:DGX=""  ;Quit if setting or killing null value
"RTN","DGFCPROT",26,0)
 ;
"RTN","DGFCPROT",27,0)
 I DGTYPE="KILL",DGX2]"" Q  ;Skip kill action on data update
"RTN","DGFCPROT",28,0)
 ;
"RTN","DGFCPROT",29,0)
 ;Manipulate DGTYPE value
"RTN","DGFCPROT",30,0)
 S DGTYPE=$S(DGTYPE="KILL":"DELETE",DGTYPE="SET":"ADD",1:DGTYPE)
"RTN","DGFCPROT",31,0)
 I DGX1]"",DGX2]"" S DGTYPE="UPDATE"
"RTN","DGFCPROT",32,0)
 ;
"RTN","DGFCPROT",33,0)
 S DGOPT=$P(DGOPT,U,1,2) S:DGOPT="" DGOPT="-1^Unknown"  ;Current option
"RTN","DGFCPROT",34,0)
 ;
"RTN","DGFCPROT",35,0)
 ;Task off (Taskman) driver routine.
"RTN","DGFCPROT",36,0)
 N ZTRTN,ZTDESC,ZTIO,ZTDTH,ZTSAVE,ZTSK,DGVAR,BXREF,SUBSCR,ZTREQ
"RTN","DGFCPROT",37,0)
 S ZTRTN="INIT^DGFCPROT",ZTDESC="DG Field monitor task"
"RTN","DGFCPROT",38,0)
 S ZTIO="DG FIELD MONITOR",ZTDTH=$$NOW^XLFDT
"RTN","DGFCPROT",39,0)
 F DGVAR="DGDA","DGDA(","DGFILE","DGFIELD","DGTYPE","DGDTH","DGUSER","DGX","DGX(","DGX1","DGX1(","DGX2","DGX2(","DGOPT" S ZTSAVE(DGVAR)=""
"RTN","DGFCPROT",40,0)
 ;If there are no subscribers, do not call Taskman
"RTN","DGFCPROT",41,0)
 S BXREF=0,BXREF=$O(^ORD(101,"B","DG FIELD MONITOR",BXREF))
"RTN","DGFCPROT",42,0)
 S SUBSCR=0,SUBSCR=$O(^ORD(101,BXREF,10,SUBSCR))
"RTN","DGFCPROT",43,0)
 I 'SUBSCR Q
"RTN","DGFCPROT",44,0)
 D ^%ZTLOAD
"RTN","DGFCPROT",45,0)
 Q
"RTN","DGFCPROT",46,0)
 ;
"RTN","DGFCPROT",47,0)
INIT N X
"RTN","DGFCPROT",48,0)
 S X=$O(^ORD(101,"B","DG FIELD MONITOR",0))_";ORD(101," D EN1^XQOR
"RTN","DGFCPROT",49,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","DGFCPROT",50,0)
 K DGDA,DGFILE,DGFIELD,DGTYPE,DGDTH,DGUSER,DGX,DGX1,DGX2,DGOPT
"RTN","DGFCPROT",51,0)
 Q
"VER")
8.0^22
**END**
**END**

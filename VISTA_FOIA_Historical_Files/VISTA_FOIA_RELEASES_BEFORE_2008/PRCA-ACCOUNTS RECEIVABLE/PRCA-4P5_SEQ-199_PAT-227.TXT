$TXT Created by ACORD,ARLIS L at DSI-ALPHA.DAOU.COM  (KIDS) on Friday, 01/14/05 at 13:34
=============================================================================
Run Date: MAR 01, 2005                     Designation: PRCA*4.5*227
Package : PRCA - ACCOUNTS RECEIVABLE          Priority: Mandatory
Version : 4.5       SEQ #199                    Status: Released
                  Compliance Date: APR 01, 2005
=============================================================================

Associated patches: (v)PRCA*4.5*201<<= must be installed BEFORE `PRCA*4.5*227'
                    (v)IB*2*233    <<= must be installed BEFORE `PRCA*4.5*227'

Subject: STRENGTHEN CBO AR DATA EXTRACT PROCESS

Category: 
  - Routine

Description:
============

 As per Directive 2001-023, this patch should be installed into
 the legacy system unless they have not had any "active" or 
 outstanding bills since prior to FY 01 in the AR system.
  
 Since the release of PRCA*4.5*201 in August 2004, some cases
 of bad data have come up. This is a maintenance patch that will 
 provide a way for these records to be identified and so not 
 interrupt the CBO AR Data Extract process.
  
 ASSOCIATED NOIS/Remedy:
 ================
 OKL-1104-71784/HD64446      AR Nightly Background Job Bombs
 DUB-1004-31949/HD64347      RCXVCBO.LOG Files  
  
 ASSOCIATED E3R(s):
 ==================
 N/A
  
 PARTICIPATING TEST SITES:
 =========================
 BOSTON HCS                   
 GRAND JUNCTION, CO          
 MANCHESTER, NH               
 OKLAHOMA CITY, OK           
 PHOENIX, AZ                  
 PUGET SOUND HCS             
 ROSEBURG, OR               
 SAN JUAN, PR                 
 SHREVEPORT, LA              
 UPSTATE NEW YORK HCS     
  
 NOIS OVERVIEW:
 ==============
 This patch provides modifications to routines so that certain bad 
 records do not interrupt the CBO AR Data  Extract process.
  
    Problem 1:
    ----------
    D399PCA+4^RCXVDC4:2, %DSM-E-UNDEF
    This error is caused by a CPT pointer in the BILL/CLAIMS 
    (#399) file that either doesn't exist or is defined as zero (0).  
    A $G has been added so that the program will not get an 
    error.  If a bad record is encountered, a mail message will 
    be sent to the mail group identified in the CBO Data Extract 
    Parameters Edit [PRCA CBO PARAMETERS] option. (This 
    is the mail group to which the FTP failure messages also 
    go.)
  
    The message will look like the line below with the actual 
    global reference. This record can be corrected through 
    FileMan.
  
    Bill # K609972 has a bad CPT code at IEN # 6 check 
    ^DGCR(399,282965,"CP",6,0)
  
    Related NOIS calls that have been closed between the 
    release of PRCA*4.5*201 and this one:
  
    MUS-1204-71383     CBO - No Batches
    NOL-1204-71155     CBO - No Batches
    REN-1204-61152     CBO -No Batches
    SHR-1204-70471     CBO - Batches needed
    PHO-1104-61581     CBO-No Batches
  
    Problem 2:
    ----------
    D399+4^RCXVDC3:1, %DSM-E-NULLSUBSCR
    This error is caused by a record in the Accounts Receivable
    (#430) file which is caused by a record with no bill number.  
    There may be cross-references that exist but little else.
  
    Example Record:
    ^PRCA(430,847685,0) = ^^^^^^^39^^^^^^3041007^^^.5
    ^PRCA(430,847685,9) = ^^^^^39
  
    ^PRCA(430,"AC",39,847685)
    ^PRCA(430,"AS",51220,42,847685)
    ^PRCA(430,"ASDT",39,3041007,847685)
    ^PRCA(430,"ASDT",42,2990614,847685)
  
    If a bad record is encountered, a mail message will be sent
    to the mail group identified in the CBO Data Extract 
    Parameters Edit [PRCA CBO PARAMETERS] option.   
  
    The message will look like the line below
    Bill IEN: 847685 does not have a Bill Number in 
    File #430.
  
    Related NOIS calls that have been closed between the 
    release of PRCA*4.5*201 and this one:
  
    CHS-1104-40652     CBO DATA EXTRACT ERRORS
    PUG-0904-51712     CBO Data Extract Error with PRCA Nightly 
                       Process
  
    Problem 3:
    ----------
    <NOTOPEN>STRT+32^RCXVTSK
    This error is usually caused by permissions not being RWED 
    on the directory identified in the CBO Data Extract 
    Parameters Edit [PRCA CBO PARAMETERS] option,   
    where the files are placed prior to ftp processing.
  
    Related NOIS calls that have been closed between the 
    release of PRCA*4.5*201 and this one.
  
    RIC-0904-21070     PRCA*4.5*201-NO BATCHES
    ROS-1104-50440     CBO - No batches
  
    Problem 4:
    ----------
    <UNDEFINED>D430+19^RCXVDC1
    This error is caused by a bad debtor pointer in the Accounts 
    Receivable (#430) file.
  
    If a bad record is encountered, a mail message will be sent to
    the mail group identified in the CBO Data Extract Parameters 
    Edit [PRCA CBO PARAMETERS] option.
  
    The message will look like the line below
    Bill # site-K950631 has a bad debtor record.
  
    Related NOIS calls that have been closed between the 
    release of PRCA*4.5*201 and this one:
  
    TUA-1204-30750     CBO/ARC FTP ATTEMPT
    MAN-1104-10489     CBO - No Batches
    GRJ-0904-51605     CBO EXTRACT ATTEMPT MESSAGES
    ALT-0904-21094     PATCH 201
  
  
 ************************SPECIAL NOTE******************************
  
 Problems with the automatic FTP of batches.  
  
 This problem is usually identified by continuous multiple daily 
 messages with the subject - CBO/ARC FTP ATTEMPT - No FTP 
 command file found for batch #.  If this message continues to occur 
 day after day, the problem may be caused by the fact that 
 TaskMan was started with a user (usually the VISTA user), and 
 that the login command file for this user does not handle submission 
 of jobs to a batch queue.
  
 For Cache/VMS systems, if TaskMan has been started 
 correctly, it would be using the log in command file for the 
 CACHEMGR account.
  
 For Cache sites, the Taskman needs to be stopped on all nodes 
 that the VISTA user has started it. The RESTART TASKMAN menu 
 option should be placed out of service for now.
  
 There are two ways to start Taskman for Cache VMS systems.
 1. Log in as SYSTEM
 $ CACHE "-U" "%SYS"
 %SYS>D TASKMAN^ZSTU  (Submits a job to start TaskMan by 
 the CACHEMGR account)
 %SYS>H
 **********************
 2. Log in as SYSTEM
 $ cache
 VAH>D ^NVSSTB
  
 Manually Start Taskman and/or the Broker Listener
  
 (Remember that both Taskman and the Broker Listener need to be  
 manually started through a VMS command file to insure that the  
 processes are running with the proper privileges.)
  
  ** You are currently logged into VAH on 999A03 **
  
  1 = Manually Start Taskman  >>>>>>>>> (Submits a job to start 
 TaskMan by the CACHEMGR account)
  2 = Manually Start the Broker Listener
  3 = Manually Start Mailman Background Listener
  4 = Manually Start All (Taskman, Broker, Mailman Listener)
  5 = Exit
  
  Select OPTION (1-5): 5//
 ************************************************
  
 This routine is usually install during the DSM to Cache conversions, 
 but if the site was an early conversion, they may not have it. 
  
 If the site does not have this program, contact NHD.
  
 ROUTINE SUMMARY 
 ===============
 The following is a list of the routines included in this patch.  
 The second line of the routine now looks like:
  
   <tab>;;4.5;Accounts Receivable;**[Patch List]**;Mar 20, 1995
  
                         CHECK^XTSUMBLD results
  Name          Before Patch       After Patch       Patch List
  ----------------------------------------------------------------
  RCXVCHK         N/A               1132383            227
  RCXVDC1        5185824            5665210           201,227
  RCXVDC2        1734168            1632521           201,227
  RCXVDC3        5504938            5523444           201,227
  RCXVDC4        2559109            3608991           201,227
  RCXVDC5        1735815            1746689           201,227
  RCXVDC6        2257711            2268293           201,227
  RCXVFTV        3292000            3503483           201,227
  RCXVTSK        7231174            7330599           201,227
  
         Total number of routines - 9 
         Total number of new routines - 1
  
 INSTALLATION INSTRUCTIONS
 =========================
 Installation of this patch is mandatory at all sites, including the 
 legacy systems if the legacy system still has "active" or outstanding 
 bills in AR.
  
 This patch should be installed after normal business hours, when all 
 Accounts Receivable Users are logged off the system.
  
 Install Time - less than 2 minutes.
  
 This patch should not be installed during normal work hours as there 
 are too many options and their descendants that need to be disabled 
 to prevent possible conflicts for AR and IB users while running the 
 KIDS Install. Other VISTA users will not be affected.
  
 1. Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
  
 2. (DSM for Open VMS only) Disable routine mapping on all systems for 
     the routines listed in the routine summary.
  
     NOTE:  If the routine(s) included in this patch are not currently in
     your mapped routine set, please skip this step.
   
 3. From the Kernel Installation & Distribution System (KIDS) [XPD MAIN] 
     menu, select the Installation menu.
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter PRCA*4.5*227):
  
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any other changes such as DDs and templates.
  
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch
         (routines, DDs, templates, etc.).
  
     c.  Verify Checksums in Transport Global - This option will ensure
         the integrity of the routines that are in the transport global.
  
 5.  Use the Install Package(s) option and select the package 
     PRCA*4.5*227.
  
 6.  When prompted "Want KIDS to INHIBIT LOGINS during
     install? YES//" respond NO.
  
 7.  When prompted "Want to DISABLE Scheduled Options, Menu Options,
     and Protocols? YES//" respond NO.
  
 8.  (DSM for Open VMS only) Optional - Include the routines distributed 
     with this patch in the mapped routine set.
  
     NOTE:  This step is only necessary if you performed step 2 or if
     you wish to include the routine(s) in your mapped set.

Routine Information:
====================

=============================================================================
User Information:
Entered By  : ACORD,ARLIS                   Date Entered  : DEC 22, 2004
Completed By: DAWSON,TIM                    Date Completed: MAR 01, 2005
Released By : BARRICK,DENISE                Date Released : MAR 01, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT


=============================================================================
Run Date: DEC 22, 2004                     Designation: DG*5.3*568
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #545                    Status: Released
                  Compliance Date: JAN 22, 2005
=============================================================================

Associated patches: (v)DG*5.3*91   <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*109  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*111  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*173  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*232  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*239  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*358  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*389  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*426  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*451  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*459  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*505  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*513  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*535  <<= must be installed BEFORE `DG*5.3*568'
                    (v)SD*5.3*301  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*545  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*564  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*581  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*582  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*595  <<= must be installed BEFORE `DG*5.3*568'
                    (v)DG*5.3*606  <<= must be installed BEFORE `DG*5.3*568'

Subject: SCHEDULING REPLACEMENT FOR DG

Category: 
  - Routine

Description:
============

      **INSTALLATION OF THIS PATCH IS TRANSPARENT TO USERS**
  
 Installing this patch (DG*5.3*568) does not modify existing functionality
 or data in any way, with an exception for the following option:
  
  [DG DUPLICATE SSN REPORT]       Duplicate Spouse/Dependent SSN Report
  
 The Duplicate Spouse/Dependent SSN Report had the following two issues 
 that have been resolved with patch DG*5.3*568:
  
 1) Veterans and their relations with Social Security Numbers starting 
 with one or more zero(s) were not properly validating for possible 
 duplicates.  This was causing some of the records that would otherwise 
 have been included in the report to be excluded from it.
  
 2) The validation check for veterans who were active in VistA within the 
 last three years was not checking for current (non-future) appointments 
 after validating for an inpatient or outpatient visit.  If the visit was 
 over three years prior to running the report, the software would exclude 
 the veteran from the report before checking for current appointments.
  
  
 PURPOSE OF THE PATCH
 ====================
  
 This patch is necessary due to the new Scheduling Replacement API that 
 will be used by VistA applications to integrate M-based Class I, Class 
 III and local applications with the Government Off-the-Shelf (GOTS) 
 Scheduling application being developed by the Scheduling Replacement 
 team.
  
 The Scheduling Replacement API will replace the other methods of 
 accessing the patient appointment information stored in the following 
 Scheduling files: APPOINTMENT (#2.98) sub-file of the PATIENT (#2) File 
 and the APPOINTMENT (#44.001) sub-file of the HOSPITAL LOCATION (#44) 
 File.  During implementation of the new GOTS Scheduler, this appointment 
 information will be moved to the GOTS database and deleted from the 
 Scheduling files.
  
  
 OVERVIEW
 ========
  
 The Scheduling Replacement API is designed to be 'flexible' and will 
 switch from the old database source (VistA Scheduling files) to the new 
 database source (GOTS SQL tables) without re-programming the requesting 
 application.  All hard-coded and FileMan references to Scheduling globals 
 in routines or data dictionaries have been replaced with the Scheduling 
 Replacement API. 
  
  
 SOFTWARE RETRIEVAL
 ==================
  
 The software for this patch is not being distributed through the National
 Patch Module. This patch is being distributed as a host file. The host
 file will contain the following four KIDS builds:
  
             Host file name:    DG_53_P568.KID
  
                     Builds: DG*5.3*568
                             DGBT*1.0*8
                             IVM*2.0*95
                             EAS*1.0*46
  
 Sites may retrieve the software directly using FTP from the
 ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
                     Albany   : ftp.fo-albany.med.va.gov
                     Hines    : ftp.fo-hines.med.va.gov
               Salt Lake City : ftp.fo-slc.med.va.gov
       First Available Server : download.vista.med.va.gov
  
 The following file will be available:
  
     File Name        Description
     ---------        -----------
     DG_53_P568.KID   Host File containing KIDS software distribution
  
 Note:  Use ASCII mode when transferring the .KID file.
  
  
 OPTIONS to be marked 'Out Of Order'
 ===================================
  
 If these patches (DG*5.3*568, DGBT*1.0*8, EAS*1.0*46, and IVM*2.0*95) are 
 installed during the normal workday, it is recommended that the following 
 menu options (OPTION #19 File) and all of their descendants be disabled to
 prevent possible conflicts while running the KIDS Install. Other VistA
 users will not be affected.
  
  
    REGISTRATION PATCH (DG*5.3*568)
    -------------------------------
    [DG REGISTRATION 10/10 REPRINT] 10/10 Print without New Registration
    [DG DEATH ENTRY]                Death Entry
    [DG DISPOSITION APPLICATION]    Disposition an Application
    [DGEN APPTS,NOT ENROLLED]       Upcoming Appointments without Enrollment
    [DGEN EGT IMPACT REPORT]        EGT Impact Report
    [DG MEANS TEST DEDUCTIBLE]      Patients Who Have Not Agreed To Pay 
                                    Deductible
    [DG MEANS TEST FUTURE LIST]     Required Means Test At Next Appointment
    [DG CO-PAY TEST FUTURE LIST]    Copay Exempt Test Needing Update At Next
                                    Appt.
    [DGPRE UPDATE CALL LIST]        Add New Appointments to Call List
    [DG PTF TRANSMISSION VADATS]    PTF Transmission
    [DGQE DATA CARD OUT]            Outpatient Card Download
    [DG DISPOSITION EDIT]           Disposition Log Edit 
    [DG REGISTER PATIENT]           Register a Patient
    [DG LOAD PATIENT DATA]          Load/Edit Patient Data
    [DG PATIENT INQUIRY]            Patient Inquiry
    [DGPMZ INPATIENT INQUIRY]       PATIENT INQUIRY v 5.0
    [DVBA REG OFF PATIENT INQ]      Regional Office Patient Inquiry
    [DG RUG STATUS]                 Record Status Report
    [DG DUPLICATE SSN REPORT]       Duplicate Spouse/Dependent SSN Report
    [DG SHOW STATUS]                Show MAS System Status Screen
    [DGYP SD GLOBAL ESTIMATOR]      Global Estimator for Scheduling
    [SCMC PATIENT ASSIGN/UNASSIGN]  Primary Care Team/Posn Assign or Unassign
    [SDAM APPT CHECK IN/OUT]        Appointment Check-in/Check-out
    [VAFC BATCH UPDATE]             UPDATE BATCH JOB FOR HL7 v2.3
    [VAFC BATCH OUTPATIENT]         OUTPATIENT BATCH JOB HL7 v2.3
    [VAFH BATCH UPDATE]               UPDATE BATCH JOB FOR HL7 V2.3
    [VAFH BATCH OUTPATIENT]         OUTPATIENT BATCH JOB
    [SDD]                           Remap Clinic
    [IVM BACKGROUND JOB]            IVM BACKGROUND JOB
    [DGPRE PRE-REGISTER NIGHT JOB]  Preregistration Nightly Job
  
  
    BENEFICIARY TRAVEL PATCH (DGBT*1.0*8)
    -------------------------------------
    [DGBT BENE TRAVEL SCREEN]       Claim Enter/Edit
  
  
    ENROLLMENT APPLICATION SYSTEM PATCH (EAS*1.0*46)
    ------------------------------------------------
    [EAS MT EXPIRATION BG PRINT]    Daily Means Test Expiration Report 
    [EAS MT EXPIRATIONS]            Means Test Expiration Report
    [EAS MT APPT EXPIRATION RPT]    Means Test Expiration by Appt Date
  
  
    INCOME VERIFICATION MATCH PATCH (IVM*2.0*95)
    --------------------------------------------
    [IVM BACKGROUND JOB]            IVM BACKGROUND JOB
  
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
  
 This patch addresses the following NOIS message(s):
 ---------------------------------------------------
 There are no NOIS messages associated with this patch.
  
  
 Test Sites:
 -----------
 Clarksburg
 El Paso
 Manchester
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If installed during the normal workday, it is recommended that the
 above menu options (File #19) and all of their descendants be disabled to 
 prevent possible conflicts while running the KIDS Install. Other VISTA 
 users will not be affected.
           
 You may wish to stop the HL7 filers prior to the install to prevent
 possible 'No Source Errors' from occurring. No transmissions will be lost
 if the filers are not stopped first, they will be picked up once the
 filers are restarted.
  
 The patch should be installed during non-peak hours.
  
 Install Time - 45 minutes
  
  
   1.   DOWNLOAD HOST KIDS FILE
        -----------------------
        Download the KIDS file DG_53_P568.KID from the
        ANONYMOUS.SOFTWARE directory of either Albany, Hines, or the Salt
        Lake CIOFO to the appropriate directory on your system.
  
   2.   LOAD DISTRIBUTION
        -----------------
        Use the 'LOAD A DISTRIBUTION' option on the KIDS INSTALLATION
        menu, and enter:  DG_53_P568.KID. 
  
   3.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only)
        -----------------------
        Disable routine mapping on all systems for the routines listed in
        step 3 below.
  
 NOTE:  If the routines included in this patch are not currently in
               your mapped routine set, please skip this step.
  
   4.   COMPONENTS SENT WITH PATCH
        ------------------------
        The following is a list of the routines included in this patch.
        The second line of each of these routines now looks like:
  
            ;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                            CHECK^XTSUMBLD results
  
        Routine         Before Patch     After Patch    Patch List
        -------         ------------     -----------    ----------
        DG1010S1        24461947         24344539       606,568
        DG53568A        N/A              13335809       568
        DGDEATH         12042821         12546405       45,84,101,149,392
                                                        545,595,568
        DGDIS1          5607603          5434906        151,568
        DGENRPD1        5602439          5601095        147,568
        DGENRPD2        7969184          8204168        147,232,568
        DGENRPT2        9948558          10116831       232,306,417,456,491
                                                        513,568
        DGENRPT4        12064054         12232375       232,306,417,456,491
                                                        513,568
        DGENRPT5        N/A              1864873        568
        DGMTO1          6804666          9419264        33,182,358,568
        DGMTOFA         9704785          9559866        3,50,182,326,426
                                                        568
        DGPREBJ         3523184          5276148        109,581,568
        DGPREBJ1        10205497         10349962       109,568
        DGPTFTR3        9189207          9337667        568
        DGQESC2         4338762          5672073        73,568
        DGREGE          9460275          9689383        24,161,151,459,568
        DGRP14          3414357          3318780        568
        DGRP15          1898375          1898355        114,239,568
        DGRPC           9916966          9983847        108,121,314,301,470
                                                        489,505,451,568
        DGRPD           22994679         23632789       109,124,121,57,161
                                                        149,286,358,436,445
                                                        489,498,506,513,518
                                                        550,545,568
        DGRUGS          8075293          8080649        89,173,568
        DGSDUTL         N/A              14504090       568
        DGSSNRP2        12915524         17141368       313,535,568
        DGSTAT          8594781          8601500        75,151,568
        DGYPSDE1        N/A              10685495       568
        DGYPSDE2        N/A              4664408        568
        VAFCCCAP        9900746          10448594       91,179,553,582,568
        VAFCCOPT        3799313          3629195        91,298,568
        VAFHCCAP        8736618          9284466        91,582,568
        VAFHCOPT        2787052          2811255        91,568
        VAFHLPD1        1646730          1648814        91,160,229,149,409
                                                        389,568
        VAFHLZPD        8791899          8791571        94,122,160,220,247
                                                        545,564,568
        VAFHUTL         5187938          5510130        91,151,568
        VAUTOMA         9927991          10342551       111,568
  
           Total number of routines - 34
  
  
   5.   START UP KIDS
        -------------
        Start up the Kernel Installation and Distribution System Menu
        [XPD MAIN]:
  
             Edits and Distribution ...
             Utilities ...
             Installation ...
  
   Select Kernel Installation & Distribution System Option: INStallation
                                                            ---
             Load a Distribution
             Print Transport Global
             Compare Transport Global to Current System
             Verify Checksums in Transport Global
             Install Package(s)
             Restart Install of Package(s)
             Unload a Distribution
             Backup a Transport Global
  
   Select Installation Option:
  
   6.   Select Installation Option:
        --------------------------
  
        a. Use the Load a Distribution and select Host File: 
           DG_53_P568.KID
  
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter DG*5.3*568):
  
        b.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        c.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        d.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
  
   7.   Select Installation Option: Install Package(s)
                                    ----------------
        **This is the step to start the installation of this KIDS patch:
  
       a.  Choose the Install Package(s) option to start the patch install.
       b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
           YES//' answer NO (unless otherwise indicated)
       c.  When prompted 'Want to DISABLE Scheduled Options, Menu
           Options, and Protocols? YES//' answer YES (unless otherwise
           indicated)
       d.  When prompted 'Enter options you wish to mark as 'Out Of
           Order':'  Enter the following options:
  
           (See above list of OPTIONS to be marked 'Out Of Order') 
  
       e.  When prompted 'Enter protocols you wish to mark as 'Out Of
           Order':' press <return>.
  
   8.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
        -------------------------
        Optional - Include the routines distributed with this patch
        in the mapped routine set.
  
        NOTE: This step is only necessary if you performed step 2 or
              if you wish to include the routines in your mapped set.
  
   9.  When the installation is complete, be sure to re-start the filers
       if you chose to stop them.

Routine Information:
====================

Routine Name:
  - DG1010S1


Routine Checksum:

Routine Name:
  - DGDEATH


Routine Checksum:

Routine Name:
  - DGENRPD2


Routine Checksum:

Routine Name:
  - DGENRPT2


Routine Checksum:

Routine Name:
  - DGENRPT4


Routine Checksum:

Routine Name:
  - DGMTO1


Routine Checksum:

Routine Name:
  - DGMTOFA


Routine Checksum:

Routine Name:
  - DGPREBJ1


Routine Checksum:

Routine Name:
  - DGQESC2


Routine Checksum:

Routine Name:
  - DGRP14


Routine Checksum:

Routine Name:
  - DGRPC


Routine Checksum:

Routine Name:
  - DGRPD


Routine Checksum:

Routine Name:
  - DGSSNRP2


Routine Checksum:

Routine Name:
  - VAFCCCAP


Routine Checksum:

Routine Name:
  - VAFCCOPT


Routine Checksum:

Routine Name:
  - VAFHCCAP


Routine Checksum:

Routine Name:
  - VAFHCOPT


Routine Checksum:

Routine Name:
  - VAFHUTL


Routine Checksum:

Routine Name:
  - DGDIS1


Routine Checksum:

Routine Name:
  - DGPTFTR3


Routine Checksum:

Routine Name:
  - DGREGE


Routine Checksum:

Routine Name:
  - DGRP15


Routine Checksum:

Routine Name:
  - DGRUGS


Routine Checksum:

Routine Name:
  - DGSTAT


Routine Checksum:

Routine Name:
  - VAFHLPD1


Routine Checksum:

Routine Name:
  - VAFHLZPD


Routine Checksum:

Routine Name:
  - VAUTOMA


Routine Checksum:

Routine Name:
  - DGYPSDE1


Routine Checksum:

Routine Name:
  - DGYPSDE2


Routine Checksum:

Routine Name:
  - DGSDUTL


Routine Checksum:

Routine Name:
  - DG53568A

 This routine updates the WORD-PROCESSING #3.5 field, in the OPTION (#19) 
 File  for the Global Estimator for Scheduling.

Routine Checksum:

Routine Name:
  - DGENRPD1


Routine Checksum:

Routine Name:
  - DGENRPT5


Routine Checksum:

Routine Name:
  - DGPREBJ


Routine Checksum:

=============================================================================
User Information:
Entered By  : MULLER,RICHARD                Date Entered  : NOV 12, 2003
Completed By: HUA,PATRICK                   Date Completed: DEC 22, 2004
Released By : FITCH,DONNA                   Date Released : DEC 22, 2004
=============================================================================


Packman Mail Message:
=====================

No routines included

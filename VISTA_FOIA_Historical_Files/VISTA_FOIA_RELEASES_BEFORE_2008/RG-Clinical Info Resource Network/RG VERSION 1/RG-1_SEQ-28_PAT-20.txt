$TXT Created by DAVIS,PAULETTE T at DEVCRN.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 03/04/03 at 08:11
=============================================================================
Run Date: MAR 18, 2003                     Designation: RG*1*20
Package : RG - CLINICAL INFO  NETWORKPriority: Mandatory
Version : 1        SEQ #28                      Status: Released
                  Compliance Date: APR 18, 2003
=============================================================================

Associated patches: (v)RG*1*17     <<= must be installed BEFORE `RG*1*20'
                    (v)RG*1*19     <<= must be installed BEFORE `RG*1*20'
                    (v)RG*1*25     <<= must be installed BEFORE `RG*1*20'
                    (v)RG*1*28     <<= must be installed BEFORE `RG*1*20'

Subject: CLASS III UTILITIES CHANGED TO CLASS I

Category: 
  - Routine
  - Enhancement (Mandatory)

Description: 
============

  RG*1.0*17, RG*1.0*19, RG*1.0*25 and RG*1.0*28 are required builds
  for patch RG*1*20.
     
  NOTE:  RG* and MPIF* patches should NOT be installed on legacy
  systems to avoid issues with the legacy systems ending up as
  Coordinating Master of Records (CMORs) or treating facilities.
       
  1.)  A Class III utility used by the Master Patient Index/Patient
  Demographics (MPI/PD) development team is being released as a Class I
  option.  This option, Link & Process Status Display [RG LINKS &
  PROCESS DISPLAY], is used to monitor the status of MPI/PD related
  functions and messaging.  For diagnostic purposes, the option is
  placed on both the MPI/PD IRM Menu [RG IRM MENU] and on the Management
  Reports [RG MGT REPORTS] menu of the MPI/PD Patient Admin Coordinator
  Menu [RG ADMIN COORD MENU].  The data can also be generated from the
  Master Patient Index (MPI), via a remote procedure call, for use by the
  MPI Data Quality Management team.
   
  The monitor displays the following information.
  - HL links that currently have messages to be processed on either 
    the inbound or outbound queues and the current STATE of the link.
  - Status of MPI/PD background jobs.
  - Current audit status on the NAME (#.01) field in the PATIENT
    (#2) file.
  - Current status of the SEND parameters for HL7 messaging.
  - Local link management information.
   
  Please Note: This new option displays some of the information previously
  displayed by the MPI/PD Status Display [RG STATUS DISPLAY] option (see
  item #2 below).  The intent is to separate the two types of information
  being displayed by these two options. The Link & Process Status Display
  [RG LINKS & PROCESS DISPLAY] facilitates monitoring the processes
  involved in the HL7 messaging necessary for the creation and updating
  of Integration Control Numbers (ICNs) while the revised MPI/PD Status
  Display [RG STATUS DISPLAY] is now a statistical display.
   
  The routines involved in this functionality are RGMTETOT, RGMTMONT,
  RGMTMONX, RGMTSTAT, and RGMTUT98.
   
  2.)  The MPI/PD Status Display [RG STATUS DISPLAY] option has been
  revised.  The link and processes information has been removed from
  this display, as that data is now available on the new Link and
  Process Status Display [RG LINKS & PROCESS DISPLAY] option.
  The menu text for this option has been changed from MPI/PD Status
  Display to Unresolved Exception Summary.
   
  The routine involved in this functionality is RGSYSTAT.
   
  3.)  MPI statistics for facilities -
  On a regular basis (e.g., monthly or bi-monthly) a remote procedure
  call is initiated from the MPI to gather diagnostic and statistical
  data from each facility.  In the past, this has been done by the
  MPI/PD development team.  In the future, it will be transitioned to the
  MPI Data Quality Management team.  The data is compiled on a regular
  basis and the results of the compilation of statistical data are
  available for facility review via a new option.  The National ICN
  Statistics [RG NATIONAL ICN STATISTICS] option is now available on the
  Management Reports [RG MGT REPORTS] menu of the MPI/PD Patient Admin
  Coordinator Menu [RG ADMIN COORD MENU].  This option provides national
  statistics for the following categories.
  - Total number of patients assigned to each unique COORDINATING MASTER
  OF RECORD (CMOR).
  - Total number of patients shared with each unique entry in the TREATING
  FACILITY LIST (#391.91) file.
  - Totals for national ICNs, local ICNs, and patients with no ICN.
   
  The routines involved in this functionality are RGMTUT01, RGMTUT02,
  and RGMTUT03.
     
  4.)  Code in routine RGEX05 was changed to correctly deal with
  remote procedure calls that contain over 100 lines within the
  Remote Patient Data Query options.
   
  5.)  A diagnostic tool distributed in patch RG*1*25, for use by
  the Data Quality Management team has been revised.  In routine
  RGMTRUN, a change was made to include the currently running
  Patient Demographics tasks.  This change allows the MPI Data
  Quality Management team to determine the status of the new National
  ICN Statistics [RG NATIONAL ICN STATISTICS] task (e.g., whether or
  not the job is running).
   
  6.)  Obsolete options have been removed from the menu structure.
    a.) On the MPI/PD IRM Menu [RG IRM MENU], the MPI/PD Event Queue
  Manager [RGEQ MGR] options have been removed.
    b.) On the MPI/PD IRM Menu [RG IRM MENU], the Coordinating Master
  of Record (CMOR) Score Menu [RG CMOR MAIN] options have been removed.
    c.) On the MPI/PD IRM Menu [RG IRM MENU], the Patient File
  Initialization to MPI [MPIFINIT DPT TO MPI] option has been removed
  from the menu.  However, as this is a Master Patient Index VistA option,
  it is not deleted in this build.
    d.) On the MPI/PD Patient Admin Coordinator Menu [RG ADMIN COORD
  MENU], the CMOR User Menu [RG CMOR USER MENU] options have been
  removed.
    e.) On the Management Reports [RG MGT REPORTS] menu, the Treating
  Facility List Statistics [RGMT AUDIT TF STATISTICS] option has been
  removed.  This information is available on the new National ICN
  Statistics [RG NATIONAL ICN STATISTICS] option.
      
  7.)  In routine RGADTP, the RGSITE variable was NEWed in the PROC
  subroutine.  A change was made to properly remove the XTMP global
  that is used to track application level ACK responses.  Also, a
  change was made to address the local ICN exceptions generated on the
  MPI.  In the PID sub-module the primary ICN was pulled out and used
  to determine if the message should be queued for delivery to the MPI.
   
  8.)  Routine RGADT2 was modified to stop exceptions on the MPI caused
  by old entries in the INSTITUTION (#4) file for the primary facility.
   
  9.)  An intermittent undefined error was corrected in RGMTAUD for the
  Single Patient Audit File Print [RGMT AUDIT SINGLE] option.
     
  10.) Because of the new MPI/PD messaging structure, the MPI/PD Event
  Queue is now obsolete.  Therefore, the MPI/PD Event Queue Autostart 
  [RGEQ AUTOSTART] background job is no longer used.  Previously, this
  job was scheduled in the OPTION SCHEDULING (#19.2) file with SPECIAL
  QUEUEING set to Startup Persistent.  Routine RGP20PRE will remove
  this entry from the TaskMan schedule and stop the Event Queue.  The
  patch will remove the RGEQ options.
   
  11.) The Compile MPI/PD HL7 Data [RGMT DIAG COMPILE HL7 DATA] option
  has been refined in routine RGMTHL2 to do the following:
  - enhance patient identification to work with HL7 2.4 standard,
  - add ability to stop the compile process, and
  - add ability to view the status of the compile.
  This diagnostic tool for resolving Health Level Seven (HL7)
  messaging problems, is used by the MPI/PD development team and
  National VistA Support (NVS).
   
  12.) NOIS SBY-0203-30079 reported a null subscript error when
  processing an A04 message and the Integration Control Number (ICN)
  was not defined.  In routine RGADTP2, an error message has been
  added to address this issue if RGRSDFN is returned as "-1^ICN NOT
  IN DATABASE," if DFN is not defined, or if ARRAY("ICN") is not defined.
    
  Deleted Menus and Options:
  ==========================
  MPI/PD Event Queue Manager [RGEQ MGR]
  Start MPI/PD Event Queue [RGEQ START]
  Halt MPI/PD Event Queue [RGEQ STOP]
  MPI/PD Event Queue Autostart [RGEQ AUTOSTART]
  Coordinating Master of Record (CMOR) Score Menu [RG CMOR MAIN]
  CMOR User Menu [RG CMOR USER MENU]
  Start/Restart CMOR Score Calculation [RG CMOR START]
  Stop CMOR Score Calculation [RG CMOR STOP]
  Calculate Individual Patient CMOR Score [RG CMOR INDIV]
  Score Calculation Status [RG CMOR STATUS]
  Duplicate Record by CMOR Score [RG CMOR DUP SCORES]
  Duplicate Record Statistics [RG CMOR DUP STATS]
  Treating Facility List Statistics [RGMT AUDIT TF STATISTICS]
   
  New Options:
  ============
  Link & Process Status Display [RG LINKS & PROCESS DISPLAY]
  National ICN Statistics [RG NATIONAL ICN STATISTICS]
   
  Menu/Option Changes:
  ====================
  MPI/PD IRM Menu [RG IRM MENU]
  Before:                              After:
  ------------------------------       ------------------------------
  - MPI/PD Event Queue Manager         - Link and Process Status Display
  - Coordinating Master of Record      - Unresolved Exception Summary
    (CMOR) Score Menu
  - Patient File Initialization to MPI
  - MPI/PD Status Display
   
  MPI/PD Patient Admin Coordinator Menu [RG ADMIN COORD MENU]
  Before:                              After:
  ------------------------------       ------------------------------
  - Site Parameters Edit for CMOR      - Site Parameters Edit for CMOR
  - CMOR User Menu                     - MPI/PD Patient Admin User Menu
  - MPI/PD Patient Admin User Menu     - Patient Audit Log Reports
  - Patient Audit Log Reports          - Master Patient Index Menu
  - Master Patient Index Menu          - Message Exception Menu
  - Message Exception Menu             - Management Reports
  - Management Reports                 - Add/Edit Point of Contact
  - Add/Edit Point of Contact
   
  Patient Audit Log Reports [RG TRAN/AUD AUD REP]
  Before:                              After:
  ------------------------------       ------------------------------
  - Custom Audit File Print            - Patient Audit File Print
  - Single Patient Audit File Print    - Single Patient Audit File Print
   
  Management Reports [RG MGT REPORTS]
  Before:                              After:
  ------------------------------       ------------------------------
  - Pseudo-SSN Report                  - Pseudo-SSN Report
  - Treating Facility List             - Link and Process Status Display
    Statistics                         - Unresolved Exception Summary
  - MPI/PD Status Display              - National ICN Statistics
   
  Documentation Update:
  =====================
  The MASTER PATIENT INDEX/PATIENT DEMOGRAPHICS (MPI/PD) VISTA,
  USER MANUAL, Version 1.0, Revised November 2002, is available in
  two formats.
   
      RG1_0_UM.PDF                    RG1_0_UM.DOC
   
  The preferred retrieval method is to FTP from the ANONYMOUS.SOFTWARE
  directory at: DOWNLOAD.VISTA.MED.VA.GOV
  This transmits the file from the first available FTP server.
  Sites may also elect to retrieve software directly from one
  of the following servers.
   
    OI Field Office         FTP Address                  Directory
    ------------------------------------------------------------------
    Albany             ftp.fo-albany.med.va.gov     ANONYMOUS.SOFTWARE
    Hines              ftp.fo-hines.med.va.gov      ANONYMOUS.SOFTWARE
    Salt Lake City     ftp.fo-slc.med.va.gov        ANONYMOUS.SOFTWARE
   
  Note:  These files must be transferred in binary or IMAGE, not
         ASCII, mode.  The VistA Documentation Library (VDL) contains
         all end-user manuals.
   
  Test Sites:
  ===========
  Battle Creek, MI
  Bronx, NY
  Northern California HCS
  VA Greater Los Angeles HCS
  Wilmington, DE
   
  Associated NOIS:
  ================
  SBY-0203-30079
       
  Routine Summary:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
   
  <TAB>;;1.0;CLINICAL INFO RESOURCE NETWORK;**[Patch List]**;30 Apr 99
  CHECK^XTSUMBLD results:
   
  Routine       Before Patch       After Patch       Patch List
  --------      ------------       ------------      ----------
  RGADT2           6152981            6091344           4,17,20
  RGADTP          10287603           10417426          26,27,20
  RGADTP2          7682257            8077161             27,20
  RGEX05           2970397            3481740             23,20
  RGMTAUD          9361315            9526069           3,19,20
  RGMTETOT          N/A*              8532883                20
  RGMTHL2         10533786           14993054       21,23,28,20
  RGMTMONT          N/A*              7432195                20
  RGMTMONX          N/A*              9391867                20
  RGMTRUN          1926898            1942903             25,20
  RGMTSTAT          N/A*             13921114                20
  RGMTUT01          N/A*             15694068                20
  RGMTUT02          N/A*              6007896                20
  RGMTUT03          N/A*             16500676                20
  RGMTUT98          N/A*              5602311                20
  RGP20PRE          N/A                 N/A                  20
  RGSYSTAT         9838892            5548140    16,19,23,25,20
        *Previous class III routine
  Note: Routine RGP20PRE is deleted by the installation.
  The checksum prior to deletion is 1805138.
     
  Pre-Install Routine:
  ====================
  Routine RGP20PRE will remove the MPI/PD Event Queue Autostart [RGEQ
  AUTOSTART] background job from the OPTION SCHEDULING (#19.2) file.
  The MPI/PD Event Queue is obsolete and the MPI/PD Event Queue
  Autostart [RGEQ AUTOSTART] task no longer needs to be scheduled.
  When the pre-installation routine runs, you might see a message
  stating that the "RGEQ AUTOSTART task is not in the OPTION SCHEDULING
  (#19.2) file.  Pre-install routine completed successfully."  That
  is fine and no cause for concern.  The objective of the pre-install
  is to ensure that the task is not scheduled.
     
  Installation Instructions:
  ==========================
  This patch may be loaded with users on the system.  You may wish
  to install it during non-peak hours.  Installation will take less
  than 2 minutes.
   
  1.  Using the TaskMan option Schedule/Unschedule Options [XUTM SCHEDULE],
      unschedule the following option:
        VAFC BATCH UPDATE          UPDATE BATCH JOB FOR HL7 v2.3
   
  2.  Use the INSTALL/CHECK MESSAGE option on the Packman menu.  [Note: 
      TEXT PRINT/DISPLAY option in the PackMan menu will display the 
      patch text only.]
   
  3.  None of the routines in this package have been recommended for
      routine mapping.
   
  4.  From the Kernel Installation and Distribution System Menu, select
      the Installation menu.
   
  5.  From this menu, you may elect to use the following options (when
      prompted for the INSTALL NAME, enter RG*1.0*20).
   
      (a)  Backup a Transport Global - this option will create a backup
           message of any routines exported with the patch.  It will NOT
           backup any other changes such as DDs or templates.
   
      (b)  Compare Transport Global to Current System - this option will
           allow you to view all changes that will be made when the
           patch is installed.  It compares all components of the patch
           (routines, DDs, templates, etc.).
   
      (c)  Verify Checksums in Transport Global - this option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
   
      (d)  Print Transport Global - this option will allow you to view the
           components of the KIDS build.
   
  6.  Use the Install Package(s) option and select the package RG*1.0*20.
   
  7.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
      Install? YES//', respond YES.
   
  8.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
      respond NO.
   
  9.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//', respond YES.  The MPI/PD Master Menu [RGMGR]
      OPTION should be disabled during the installation.
   
  10. Using the TaskMan option Schedule/Unschedule Options [XUTM SCHEDULE],
      schedule the option VAFC BATCH UPDATE [UPDATE BATCH JOB FOR HL7 v2.3]
      to run every 10 minutes.
   
  11. Routine RGP20PRE will be automatically deleted from your system
      after successful installation of the patch.

Routine Information:
====================

Routine Name:
  - RGEX05


Routine Checksum:

Routine Name:
  - RGMTMONT


Routine Checksum:

Routine Name:
  - RGMTMONX


Routine Checksum:

Routine Name:
  - RGMTRUN


Routine Checksum:

Routine Name:
  - RGMTSTAT


Routine Checksum:

Routine Name:
  - RGMTUT01


Routine Checksum:

Routine Name:
  - RGMTUT02


Routine Checksum:

Routine Name:
  - RGMTUT03


Routine Checksum:

Routine Name:
  - RGMTUT98


Routine Checksum:

Routine Name:
  - RGP20PRE


Routine Checksum:

Routine Name:
  - RGSYSTAT


Routine Checksum:

Routine Name:
  - RGADT2


Routine Checksum:

Routine Name:
  - RGADTP


Routine Checksum:

Routine Name:
  - RGMTAUD


Routine Checksum:

Routine Name:
  - RGMTETOT


Routine Checksum:

Routine Name:
  - RGMTHL2


Routine Checksum:

Routine Name:
  - RGADTP2


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : DAVIS,PAULETTE                 Date Entered : JUN 18, 2001
Completed By: SINGH,GURBIR                  Date Completed: MAR 18, 2003
Released By : TASTROM,JOSEPH E             Date Released : MAR 18, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

KIDS Distribution saved on Jan 12, 2001@09:03:43
Patches LA*5.2*58 and LR*5.2*266
**KIDS**:LA*5.2*58^LR*5.2*266^

**INSTALL NAME**
LA*5.2*58
"BLD",2534,0)
LA*5.2*58^AUTOMATED LAB INSTRUMENTS^0^3010112^y
"BLD",2534,1,0)
^^224^224^3010112^
"BLD",2534,1,1,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patches LA*5.2*58 and
"BLD",2534,1,2,0)
LR*5.2*266 do not contain any changes to the VISTA BLOOD BANK Software as
"BLD",2534,1,3,0)
defined by VHA DIRECTIVE 99-053 titled VISTA BLOOD BANK SOFTWARE VERSION
"BLD",2534,1,4,0)
5.2.
"BLD",2534,1,5,0)
 
"BLD",2534,1,6,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patches LA*5.2*58 and
"BLD",2534,1,7,0)
LR*5.2*266 do not alter or modify any software design safeguards or safety
"BLD",2534,1,8,0)
critical elements functions.
"BLD",2534,1,9,0)
 
"BLD",2534,1,10,0)
 RISK ANALYSIS: Changes made by patches LA*5.2*58 and LR*5.2*266 have no
"BLD",2534,1,11,0)
effect on Blood Bank software functionality, therefore RISK is none.
"BLD",2534,1,12,0)
 
"BLD",2534,1,13,0)
**NOTE**
"BLD",2534,1,14,0)
 
"BLD",2534,1,15,0)
Patches LA*5.2*58 and LR*5.2*266 are being released in a single
"BLD",2534,1,16,0)
distribution.  Because of this, patch descriptions for LA*5.2*58 and
"BLD",2534,1,17,0)
LR*5.2*266 are identical and contain routine summaries for both sets of
"BLD",2534,1,18,0)
routines.
"BLD",2534,1,19,0)
 
"BLD",2534,1,20,0)
**NOTE**
"BLD",2534,1,21,0)
 
"BLD",2534,1,22,0)
The laboratory routines LRVER3A and LRMIUT are being modified by this
"BLD",2534,1,23,0)
patch.  These routines may have been locally modified at the sites.  The
"BLD",2534,1,24,0)
sites must ensure that precautions are taken to prevent loss of local
"BLD",2534,1,25,0)
modifications when patches to Laboratory are installed.
"BLD",2534,1,26,0)
 
"BLD",2534,1,27,0)
**NOTE**
"BLD",2534,1,28,0)
 
"BLD",2534,1,29,0)
When initially setting up the FOREIGN INTERFACE file (#62.487), the
"BLD",2534,1,30,0)
FOREIGN COMPUTER INTERFACE NAME field (#.01) should ALWAYS be set to
"BLD",2534,1,31,0)
"CAREVUE" (all caps, no leading or trailing spaces, and no quotes).  The
"BLD",2534,1,32,0)
routines that access this file are looking specifically for CAREVUE.  The
"BLD",2534,1,33,0)
routines will not be able to process the results for CareVue ward patients
"BLD",2534,1,34,0)
if this is not done.
"BLD",2534,1,35,0)
 
"BLD",2534,1,36,0)
This patch contains changes to Class I CareVue code and requires that
"BLD",2534,1,37,0)
patch LA*5.2*53 and LR*5.2*263 be installed before LA*5.2*58.  Patches
"BLD",2534,1,38,0)
LA*5.2*58 and LR*5.2*266 are contained in the same KID file
"BLD",2534,1,39,0)
(LA_52_P58.KID) and will be installed together.
"BLD",2534,1,40,0)
 
"BLD",2534,1,41,0)
This patch includes the following changes:
"BLD",2534,1,42,0)
 
"BLD",2534,1,43,0)
1.  This patch updates the documentation released with the CareVue
"BLD",2534,1,44,0)
Interface patch (LA*5.2*53).
"BLD",2534,1,45,0)
 
"BLD",2534,1,46,0)
2.  This patch makes changes to the routines LRVER3A and LRMIUT, and will
"BLD",2534,1,47,0)
create a new routine (LA7DLOC).  Currently, two routines (LRVER3A and
"BLD",2534,1,48,0)
LRMIUT) contain the Class I software for the CareVue interface. This patch
"BLD",2534,1,49,0)
will modify these routines to call the new routine (LA7DLOC).  LA7DLOC
"BLD",2534,1,50,0)
contains the Class I code for determining if a patient is located in a
"BLD",2534,1,51,0)
CareVue ward.  The current condition of the Class I code checks the CHEM,
"BLD",2534,1,52,0)
HEM, TOX, RIA, SER, etc. field (#4) and the Microbiology field (#5) of the
"BLD",2534,1,53,0)
Lab Data file (#63), but the updated routines will call LA7DLOC and will
"BLD",2534,1,54,0)
look in the Ward Location field (#.1) of the Patient file (#2).  This
"BLD",2534,1,55,0)
shows the current location of the patient.  There were problems with
"BLD",2534,1,56,0)
patients that were not transferred to the CareVue ward until after the lab
"BLD",2534,1,57,0)
order was taken. The old routine was checking where the patient was
"BLD",2534,1,58,0)
located when the order was taken, and not the current location of the
"BLD",2534,1,59,0)
patient.
"BLD",2534,1,60,0)
 
"BLD",2534,1,61,0)
3.  Updates to the HL/7 date conversion routines. The previous standard
"BLD",2534,1,62,0)
for HL/7 dates listed the date in YYYYMMDDHHMMSS format.  The degree of
"BLD",2534,1,63,0)
precision was listed as a separate parameter.  The new standard format is
"BLD",2534,1,64,0)
[YYYY[MM[DD[HH[MM[SS]]]]]-zzzz] where the bracketed sections are optional
"BLD",2534,1,65,0)
depending on the existence of the subsequent set. Also, if either the
"BLD",2534,1,66,0)
seconds or the minutes/seconds combination consist only of zeroes, the
"BLD",2534,1,67,0)
minutes (if zeroes) and seconds will be omitted.  The length of the
"BLD",2534,1,68,0)
date/time string specifies the degree of precision. In addition, a ZULU
"BLD",2534,1,69,0)
time offset (-zzzz) is also included.  This is the number of hours between
"BLD",2534,1,70,0)
Greenwich Mean Time and the local time where the date/time string was
"BLD",2534,1,71,0)
created.  Routines LA7DVM and LA7DVEXT have been modified to use the
"BLD",2534,1,72,0)
Kernel function ($$FMTHL7^XLFDT) to convert dates from FileMan to HL7
"BLD",2534,1,73,0)
instead of the HL/7 date conversion utility ($$HDATE^HLFNC).
"BLD",2534,1,74,0)
 
"BLD",2534,1,75,0)
4.  This patch will use TaskMan to transfer data to the CareVue system.
"BLD",2534,1,76,0)
Currently, TaskMan is not invoked. This could cause a problem verifying a
"BLD",2534,1,77,0)
result if an error was encountered in the CareVue routines.
"BLD",2534,1,78,0)
 
"BLD",2534,1,79,0)
5.  This patch changes the LA7D EDIT FOREIGN INTERFACE (Edit Foreign
"BLD",2534,1,80,0)
Interface Parameters) option.  It is now easier to add a Ward to a Foreign
"BLD",2534,1,81,0)
Computer System Name.
"BLD",2534,1,82,0)
 
"BLD",2534,1,83,0)
6.  This patch updates the Processing RTN field (#771) and the Response
"BLD",2534,1,84,0)
Processing RTN field (#772) of the Protocol file (#101) for the LA7D
"BLD",2534,1,85,0)
CARELIFE RESULTS and LA7D CARELIFE SERVER entries. The letter "Q" will be
"BLD",2534,1,86,0)
entered by the post-init routine LR266 if no entry exists.
"BLD",2534,1,87,0)
 
"BLD",2534,1,88,0)
NOIS - MIA-0600-30434
"BLD",2534,1,89,0)
   Reported an error, MISSING PROCESSING ROUTINE, when sending the HL7
"BLD",2534,1,90,0)
   message from VistA to CareVue.  The letter "Q" will be entered by
"BLD",2534,1,91,0)
   the post-init routine LR266 if no entry exists.
"BLD",2534,1,92,0)
NOIS - MWV-0900-21094
"BLD",2534,1,93,0)
   Reported that all CareVue ward patients tests were not being sent to
"BLD",2534,1,94,0)
   the CareVue system.  It was discovered that these patients were ones
"BLD",2534,1,95,0)
   who were transferred from a non-CareVue ward to a CareVue ward after
"BLD",2534,1,96,0)
   the tests were ordered. The patient was bypassed since the location
"BLD",2534,1,97,0)
   at time of order was not a CareVue ward.  This patch will correct
"BLD",2534,1,98,0)
   this by looking at the Ward Location field (#.1) in the Patient file
"BLD",2534,1,99,0)
   (#2) for the current location of the patient.
"BLD",2534,1,100,0)
 
"BLD",2534,1,101,0)
Associated NOIS
"BLD",2534,1,102,0)
===============
"BLD",2534,1,103,0)
MIA-0600-30434
"BLD",2534,1,104,0)
MWV-0900-21094
"BLD",2534,1,105,0)
 
"BLD",2534,1,106,0)
Test Sites
"BLD",2534,1,107,0)
==========
"BLD",2534,1,108,0)
Martinsburg, West Virginia
"BLD",2534,1,109,0)
 
"BLD",2534,1,110,0)
 
"BLD",2534,1,111,0)
ROUTINE SUMMARY
"BLD",2534,1,112,0)
=================
"BLD",2534,1,113,0)
The following is a list of routines included in patch LA*5.2*58. The
"BLD",2534,1,114,0)
second line of each routine now looks like:
"BLD",2534,1,115,0)
 
"BLD",2534,1,116,0)
<tab>;;5.2;AUTOMATED LAB INSTRUMENTS;**[patch list]**;Sep 27, 1994
"BLD",2534,1,117,0)
 
"BLD",2534,1,118,0)
                 CHECK^XTSUMBLD Results
"BLD",2534,1,119,0)
  Routine Name    Before Patch      After Patch    Patch List
"BLD",2534,1,120,0)
  ------------    ------------      -----------    ------------
"BLD",2534,1,121,0)
  LA7DEDT            3765930          5836716      53,58
"BLD",2534,1,122,0)
  LA7DLOC             NEW              553499      58
"BLD",2534,1,123,0)
  LA7DVM             6983644          6949969      53,58
"BLD",2534,1,124,0)
 
"BLD",2534,1,125,0)
 
"BLD",2534,1,126,0)
The following is a list of routines included in patch LR*5.2*266. The
"BLD",2534,1,127,0)
second line of each routine now looks like:
"BLD",2534,1,128,0)
 
"BLD",2534,1,129,0)
<tab>;;5.2;LAB SERVICE;**[patch list]**;Sep 27, 1994
"BLD",2534,1,130,0)
                 CHECK^XTSUMBLD Results
"BLD",2534,1,131,0)
  Routine Name    Before Patch      After Patch    Patch List
"BLD",2534,1,132,0)
  ------------    ------------      -----------    ------------
"BLD",2534,1,133,0)
  LR266               NEW             1529899      266
"BLD",2534,1,134,0)
  LRMIUT             3673249          3951633      254,266
"BLD",2534,1,135,0)
  LRVER3A           10780812         10508599      1,5,42,100,121
"BLD",2534,1,136,0)
                                                   153,190,221,254,
"BLD",2534,1,137,0)
                                                   263,266
"BLD",2534,1,138,0)
 
"BLD",2534,1,139,0)
 
"BLD",2534,1,140,0)
The documentation and distribution files for patches LA*5.2*58 and
"BLD",2534,1,141,0)
LR*5.2*266 may be obtained using FTP from the appropriate National VistA
"BLD",2534,1,142,0)
Support directory:
"BLD",2534,1,143,0)
 
"BLD",2534,1,144,0)
    OI FIELD OFFICE       FTP ADDRESS             DIRECTORY
"BLD",2534,1,145,0)
    ===============       ===========             ==========
"BLD",2534,1,146,0)
     HINES               152.129.1.110      [ANONYMOUS.SOFTWARE]
"BLD",2534,1,147,0)
     SALT LAKE CITY      152.131.2.1        [ANONYMOUS.SOFTWARE]
"BLD",2534,1,148,0)
     ALBANY              152.127.1.5        [ANONYMOUS.SOFTWARE]
"BLD",2534,1,149,0)
 
"BLD",2534,1,150,0)
File names are:
"BLD",2534,1,151,0)
 
"BLD",2534,1,152,0)
 ASCII FILE
"BLD",2534,1,153,0)
  LA_52_P58.KID     -  KIDS distribution for LA*5.2*58 and LR*5.2*266
"BLD",2534,1,154,0)
 
"BLD",2534,1,155,0)
 BINARY FILE
"BLD",2534,1,156,0)
  LA7DIG.PDF        -  CareVue Installation Guide
"BLD",2534,1,157,0)
 
"BLD",2534,1,158,0)
INSTALLATION INSTRUCTIONS
"BLD",2534,1,159,0)
=========================
"BLD",2534,1,160,0)
 
"BLD",2534,1,161,0)
  NOTE: This KIDS install does not place any options out of service
"BLD",2534,1,162,0)
        during the install and no user options are affected.
"BLD",2534,1,163,0)
        If KIDS prompts:
"BLD",2534,1,164,0)
  
"BLD",2534,1,165,0)
        "Want KIDS to Rebuild Menu Trees Upon Completion of
"BLD",2534,1,166,0)
         Install? YES// NO"
"BLD",2534,1,167,0)
        "Want KIDS to INHIBIT LOGONs during the install? YES// NO"
"BLD",2534,1,168,0)
        "Want to DISABLE Scheduled Options, Menu Options, and
"BLD",2534,1,169,0)
        Protocols? YES// NO"
"BLD",2534,1,170,0)
 
"BLD",2534,1,171,0)
        The site should answer "NO" to all three questions.
"BLD",2534,1,172,0)
            Note: You may not receive all three prompts at your site.  
"BLD",2534,1,173,0)
  
"BLD",2534,1,174,0)
     1. Review your mapped set.  If any of the routines listed in
"BLD",2534,1,175,0)
        patches LA*5.2*58 or LR*5.2*266 are mapped, they should be
"BLD",2534,1,176,0)
        removed from the mapped set at this time.
"BLD",2534,1,177,0)
 
"BLD",2534,1,178,0)
     2. From the Kernel Installation & Distribution System menu (XPD
"BLD",2534,1,179,0)
        MAIN), select the Installation menu option, then the option,
"BLD",2534,1,180,0)
        Load a Distribution. Enter your directory name and
"BLD",2534,1,181,0)
        LA_52_P58.KID at the Host File prompt.
"BLD",2534,1,182,0)
 
"BLD",2534,1,183,0)
     3. The patch has now been loaded into a Transport global on
"BLD",2534,1,184,0)
        your system. You now need to use KIDS to install the 
"BLD",2534,1,185,0)
        Transport global.
"BLD",2534,1,186,0)
 
"BLD",2534,1,187,0)
        On the KIDS menu, under the 'Installation' menu, use the 
"BLD",2534,1,188,0)
        following options:
"BLD",2534,1,189,0)
           Print Transport Global
"BLD",2534,1,190,0)
           Compare Transport Global to Current System
"BLD",2534,1,191,0)
           Verify Checksums in Transport Global
"BLD",2534,1,192,0)
           Backup a Transport Global
"BLD",2534,1,193,0)
 
"BLD",2534,1,194,0)
     4. It is recommended that this release be installed during off
"BLD",2534,1,195,0)
        peak hours.  To prevent a possible problem with the tasking
"BLD",2534,1,196,0)
        of the next days laboratory orders, do not install this package
"BLD",2534,1,197,0)
        at the same time as the following nightly tasked jobs:
"BLD",2534,1,198,0)
 
"BLD",2534,1,199,0)
              LRTASK ROLLOVER
"BLD",2534,1,200,0)
              LRTASK NIGHTLY
"BLD",2534,1,201,0)
              LRTASK CONJAM
"BLD",2534,1,202,0)
              LRTASK CUM
"BLD",2534,1,203,0)
 
"BLD",2534,1,204,0)
     5. No options need to be placed out of service.
"BLD",2534,1,205,0)
 
"BLD",2534,1,206,0)
     6. Installation time is less than 2 minutes during off peak 
"BLD",2534,1,207,0)
        hours and less than 5 minutes during peak hours
"BLD",2534,1,208,0)
 
"BLD",2534,1,209,0)
     7. From the 'Installation Menu' of the KIDS menu, run the 
"BLD",2534,1,210,0)
        option 'Install Package(s)' Select the package 'LA*5.2*58'
"BLD",2534,1,211,0)
        and proceed with the install. When prompted 'Want to 
"BLD",2534,1,212,0)
        DISABLE Scheduled Options, Menu Options, and Protocols? 
"BLD",2534,1,213,0)
        YES//', choose 'NO'.
"BLD",2534,1,214,0)
 
"BLD",2534,1,215,0)
     8. This patch updates the Processing RTN field (#771) and the
"BLD",2534,1,216,0)
        Response Processing RTN field (#772) of the Protocol file
"BLD",2534,1,217,0)
        (#101) for the LA7D CARELIFE RESULTS and LA7D CARELIFE SERVER
"BLD",2534,1,218,0)
        entries. The letter "Q" will be entered by the post-init
"BLD",2534,1,219,0)
        routine LR266 if no entry exists.  The LR266 routine will
"BLD",2534,1,220,0)
        automatically be deleted after the patch is installed.
"BLD",2534,1,221,0)
 
"BLD",2534,1,222,0)
     9. If any routines were unmapped as part of step 2, they 
"BLD",2534,1,223,0)
        should be returned to the mapped set once the installation 
"BLD",2534,1,224,0)
        has run to completion.
"BLD",2534,4,0)
^9.64PA^^
"BLD",2534,"KRN",0)
^9.67PA^19^17
"BLD",2534,"KRN",.4,0)
.4
"BLD",2534,"KRN",.401,0)
.401
"BLD",2534,"KRN",.402,0)
.402
"BLD",2534,"KRN",.403,0)
.403
"BLD",2534,"KRN",.5,0)
.5
"BLD",2534,"KRN",.84,0)
.84
"BLD",2534,"KRN",3.6,0)
3.6
"BLD",2534,"KRN",3.8,0)
3.8
"BLD",2534,"KRN",9.2,0)
9.2
"BLD",2534,"KRN",9.8,0)
9.8
"BLD",2534,"KRN",9.8,"NM",0)
^9.68A^4^3
"BLD",2534,"KRN",9.8,"NM",1,0)
LA7DLOC^^0^B765331
"BLD",2534,"KRN",9.8,"NM",3,0)
LA7DVM^^0^B17256883
"BLD",2534,"KRN",9.8,"NM",4,0)
LA7DEDT^^0^B17923092
"BLD",2534,"KRN",9.8,"NM","B","LA7DEDT",4)

"BLD",2534,"KRN",9.8,"NM","B","LA7DLOC",1)

"BLD",2534,"KRN",9.8,"NM","B","LA7DVM",3)

"BLD",2534,"KRN",19,0)
19
"BLD",2534,"KRN",19.1,0)
19.1
"BLD",2534,"KRN",101,0)
101
"BLD",2534,"KRN",409.61,0)
409.61
"BLD",2534,"KRN",771,0)
771
"BLD",2534,"KRN",870,0)
870
"BLD",2534,"KRN",8994,0)
8994
"BLD",2534,"KRN","B",.4,.4)

"BLD",2534,"KRN","B",.401,.401)

"BLD",2534,"KRN","B",.402,.402)

"BLD",2534,"KRN","B",.403,.403)

"BLD",2534,"KRN","B",.5,.5)

"BLD",2534,"KRN","B",.84,.84)

"BLD",2534,"KRN","B",3.6,3.6)

"BLD",2534,"KRN","B",3.8,3.8)

"BLD",2534,"KRN","B",9.2,9.2)

"BLD",2534,"KRN","B",9.8,9.8)

"BLD",2534,"KRN","B",19,19)

"BLD",2534,"KRN","B",19.1,19.1)

"BLD",2534,"KRN","B",101,101)

"BLD",2534,"KRN","B",409.61,409.61)

"BLD",2534,"KRN","B",771,771)

"BLD",2534,"KRN","B",870,870)

"BLD",2534,"KRN","B",8994,8994)

"BLD",2534,"QUES",0)
^9.62^^
"BLD",2534,"REQB",0)
^9.611^1^1
"BLD",2534,"REQB",1,0)
LA*5.2*53^1
"BLD",2534,"REQB","B","LA*5.2*53",1)

"MBREQ")
0
"PKG",53,-1)
1^1
"PKG",53,0)
AUTOMATED LAB INSTRUMENTS^LA^Lab Auto-Instrument Package
"PKG",53,20,0)
^9.402P^^
"PKG",53,22,0)
^9.49I^1^1
"PKG",53,22,1,0)
5.2^2940927^2950528
"PKG",53,22,1,"PAH",1,0)
58^3010112
"PKG",53,22,1,"PAH",1,1,0)
^^224^224^3010112
"PKG",53,22,1,"PAH",1,1,1,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patches LA*5.2*58 and
"PKG",53,22,1,"PAH",1,1,2,0)
LR*5.2*266 do not contain any changes to the VISTA BLOOD BANK Software as
"PKG",53,22,1,"PAH",1,1,3,0)
defined by VHA DIRECTIVE 99-053 titled VISTA BLOOD BANK SOFTWARE VERSION
"PKG",53,22,1,"PAH",1,1,4,0)
5.2.
"PKG",53,22,1,"PAH",1,1,5,0)
 
"PKG",53,22,1,"PAH",1,1,6,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patches LA*5.2*58 and
"PKG",53,22,1,"PAH",1,1,7,0)
LR*5.2*266 do not alter or modify any software design safeguards or safety
"PKG",53,22,1,"PAH",1,1,8,0)
critical elements functions.
"PKG",53,22,1,"PAH",1,1,9,0)
 
"PKG",53,22,1,"PAH",1,1,10,0)
 RISK ANALYSIS: Changes made by patches LA*5.2*58 and LR*5.2*266 have no
"PKG",53,22,1,"PAH",1,1,11,0)
effect on Blood Bank software functionality, therefore RISK is none.
"PKG",53,22,1,"PAH",1,1,12,0)
 
"PKG",53,22,1,"PAH",1,1,13,0)
**NOTE**
"PKG",53,22,1,"PAH",1,1,14,0)
 
"PKG",53,22,1,"PAH",1,1,15,0)
Patches LA*5.2*58 and LR*5.2*266 are being released in a single
"PKG",53,22,1,"PAH",1,1,16,0)
distribution.  Because of this, patch descriptions for LA*5.2*58 and
"PKG",53,22,1,"PAH",1,1,17,0)
LR*5.2*266 are identical and contain routine summaries for both sets of
"PKG",53,22,1,"PAH",1,1,18,0)
routines.
"PKG",53,22,1,"PAH",1,1,19,0)
 
"PKG",53,22,1,"PAH",1,1,20,0)
**NOTE**
"PKG",53,22,1,"PAH",1,1,21,0)
 
"PKG",53,22,1,"PAH",1,1,22,0)
The laboratory routines LRVER3A and LRMIUT are being modified by this
"PKG",53,22,1,"PAH",1,1,23,0)
patch.  These routines may have been locally modified at the sites.  The
"PKG",53,22,1,"PAH",1,1,24,0)
sites must ensure that precautions are taken to prevent loss of local
"PKG",53,22,1,"PAH",1,1,25,0)
modifications when patches to Laboratory are installed.
"PKG",53,22,1,"PAH",1,1,26,0)
 
"PKG",53,22,1,"PAH",1,1,27,0)
**NOTE**
"PKG",53,22,1,"PAH",1,1,28,0)
 
"PKG",53,22,1,"PAH",1,1,29,0)
When initially setting up the FOREIGN INTERFACE file (#62.487), the
"PKG",53,22,1,"PAH",1,1,30,0)
FOREIGN COMPUTER INTERFACE NAME field (#.01) should ALWAYS be set to
"PKG",53,22,1,"PAH",1,1,31,0)
"CAREVUE" (all caps, no leading or trailing spaces, and no quotes).  The
"PKG",53,22,1,"PAH",1,1,32,0)
routines that access this file are looking specifically for CAREVUE.  The
"PKG",53,22,1,"PAH",1,1,33,0)
routines will not be able to process the results for CareVue ward patients
"PKG",53,22,1,"PAH",1,1,34,0)
if this is not done.
"PKG",53,22,1,"PAH",1,1,35,0)
 
"PKG",53,22,1,"PAH",1,1,36,0)
This patch contains changes to Class I CareVue code and requires that
"PKG",53,22,1,"PAH",1,1,37,0)
patch LA*5.2*53 and LR*5.2*263 be installed before LA*5.2*58.  Patches
"PKG",53,22,1,"PAH",1,1,38,0)
LA*5.2*58 and LR*5.2*266 are contained in the same KID file
"PKG",53,22,1,"PAH",1,1,39,0)
(LA_52_P58.KID) and will be installed together.
"PKG",53,22,1,"PAH",1,1,40,0)
 
"PKG",53,22,1,"PAH",1,1,41,0)
This patch includes the following changes:
"PKG",53,22,1,"PAH",1,1,42,0)
 
"PKG",53,22,1,"PAH",1,1,43,0)
1.  This patch updates the documentation released with the CareVue
"PKG",53,22,1,"PAH",1,1,44,0)
Interface patch (LA*5.2*53).
"PKG",53,22,1,"PAH",1,1,45,0)
 
"PKG",53,22,1,"PAH",1,1,46,0)
2.  This patch makes changes to the routines LRVER3A and LRMIUT, and will
"PKG",53,22,1,"PAH",1,1,47,0)
create a new routine (LA7DLOC).  Currently, two routines (LRVER3A and
"PKG",53,22,1,"PAH",1,1,48,0)
LRMIUT) contain the Class I software for the CareVue interface. This patch
"PKG",53,22,1,"PAH",1,1,49,0)
will modify these routines to call the new routine (LA7DLOC).  LA7DLOC
"PKG",53,22,1,"PAH",1,1,50,0)
contains the Class I code for determining if a patient is located in a
"PKG",53,22,1,"PAH",1,1,51,0)
CareVue ward.  The current condition of the Class I code checks the CHEM,
"PKG",53,22,1,"PAH",1,1,52,0)
HEM, TOX, RIA, SER, etc. field (#4) and the Microbiology field (#5) of the
"PKG",53,22,1,"PAH",1,1,53,0)
Lab Data file (#63), but the updated routines will call LA7DLOC and will
"PKG",53,22,1,"PAH",1,1,54,0)
look in the Ward Location field (#.1) of the Patient file (#2).  This
"PKG",53,22,1,"PAH",1,1,55,0)
shows the current location of the patient.  There were problems with
"PKG",53,22,1,"PAH",1,1,56,0)
patients that were not transferred to the CareVue ward until after the lab
"PKG",53,22,1,"PAH",1,1,57,0)
order was taken. The old routine was checking where the patient was
"PKG",53,22,1,"PAH",1,1,58,0)
located when the order was taken, and not the current location of the
"PKG",53,22,1,"PAH",1,1,59,0)
patient.
"PKG",53,22,1,"PAH",1,1,60,0)
 
"PKG",53,22,1,"PAH",1,1,61,0)
3.  Updates to the HL/7 date conversion routines. The previous standard
"PKG",53,22,1,"PAH",1,1,62,0)
for HL/7 dates listed the date in YYYYMMDDHHMMSS format.  The degree of
"PKG",53,22,1,"PAH",1,1,63,0)
precision was listed as a separate parameter.  The new standard format is
"PKG",53,22,1,"PAH",1,1,64,0)
[YYYY[MM[DD[HH[MM[SS]]]]]-zzzz] where the bracketed sections are optional
"PKG",53,22,1,"PAH",1,1,65,0)
depending on the existence of the subsequent set. Also, if either the
"PKG",53,22,1,"PAH",1,1,66,0)
seconds or the minutes/seconds combination consist only of zeroes, the
"PKG",53,22,1,"PAH",1,1,67,0)
minutes (if zeroes) and seconds will be omitted.  The length of the
"PKG",53,22,1,"PAH",1,1,68,0)
date/time string specifies the degree of precision. In addition, a ZULU
"PKG",53,22,1,"PAH",1,1,69,0)
time offset (-zzzz) is also included.  This is the number of hours between
"PKG",53,22,1,"PAH",1,1,70,0)
Greenwich Mean Time and the local time where the date/time string was
"PKG",53,22,1,"PAH",1,1,71,0)
created.  Routines LA7DVM and LA7DVEXT have been modified to use the
"PKG",53,22,1,"PAH",1,1,72,0)
Kernel function ($$FMTHL7^XLFDT) to convert dates from FileMan to HL7
"PKG",53,22,1,"PAH",1,1,73,0)
instead of the HL/7 date conversion utility ($$HDATE^HLFNC).
"PKG",53,22,1,"PAH",1,1,74,0)
 
"PKG",53,22,1,"PAH",1,1,75,0)
4.  This patch will use TaskMan to transfer data to the CareVue system.
"PKG",53,22,1,"PAH",1,1,76,0)
Currently, TaskMan is not invoked. This could cause a problem verifying a
"PKG",53,22,1,"PAH",1,1,77,0)
result if an error was encountered in the CareVue routines.
"PKG",53,22,1,"PAH",1,1,78,0)
 
"PKG",53,22,1,"PAH",1,1,79,0)
5.  This patch changes the LA7D EDIT FOREIGN INTERFACE (Edit Foreign
"PKG",53,22,1,"PAH",1,1,80,0)
Interface Parameters) option.  It is now easier to add a Ward to a Foreign
"PKG",53,22,1,"PAH",1,1,81,0)
Computer System Name.
"PKG",53,22,1,"PAH",1,1,82,0)
 
"PKG",53,22,1,"PAH",1,1,83,0)
6.  This patch updates the Processing RTN field (#771) and the Response
"PKG",53,22,1,"PAH",1,1,84,0)
Processing RTN field (#772) of the Protocol file (#101) for the LA7D
"PKG",53,22,1,"PAH",1,1,85,0)
CARELIFE RESULTS and LA7D CARELIFE SERVER entries. The letter "Q" will be
"PKG",53,22,1,"PAH",1,1,86,0)
entered by the post-init routine LR266 if no entry exists.
"PKG",53,22,1,"PAH",1,1,87,0)
 
"PKG",53,22,1,"PAH",1,1,88,0)
NOIS - MIA-0600-30434
"PKG",53,22,1,"PAH",1,1,89,0)
   Reported an error, MISSING PROCESSING ROUTINE, when sending the HL7
"PKG",53,22,1,"PAH",1,1,90,0)
   message from VistA to CareVue.  The letter "Q" will be entered by
"PKG",53,22,1,"PAH",1,1,91,0)
   the post-init routine LR266 if no entry exists.
"PKG",53,22,1,"PAH",1,1,92,0)
NOIS - MWV-0900-21094
"PKG",53,22,1,"PAH",1,1,93,0)
   Reported that all CareVue ward patients tests were not being sent to
"PKG",53,22,1,"PAH",1,1,94,0)
   the CareVue system.  It was discovered that these patients were ones
"PKG",53,22,1,"PAH",1,1,95,0)
   who were transferred from a non-CareVue ward to a CareVue ward after
"PKG",53,22,1,"PAH",1,1,96,0)
   the tests were ordered. The patient was bypassed since the location
"PKG",53,22,1,"PAH",1,1,97,0)
   at time of order was not a CareVue ward.  This patch will correct
"PKG",53,22,1,"PAH",1,1,98,0)
   this by looking at the Ward Location field (#.1) in the Patient file
"PKG",53,22,1,"PAH",1,1,99,0)
   (#2) for the current location of the patient.
"PKG",53,22,1,"PAH",1,1,100,0)
 
"PKG",53,22,1,"PAH",1,1,101,0)
Associated NOIS
"PKG",53,22,1,"PAH",1,1,102,0)
===============
"PKG",53,22,1,"PAH",1,1,103,0)
MIA-0600-30434
"PKG",53,22,1,"PAH",1,1,104,0)
MWV-0900-21094
"PKG",53,22,1,"PAH",1,1,105,0)
 
"PKG",53,22,1,"PAH",1,1,106,0)
Test Sites
"PKG",53,22,1,"PAH",1,1,107,0)
==========
"PKG",53,22,1,"PAH",1,1,108,0)
Martinsburg, West Virginia
"PKG",53,22,1,"PAH",1,1,109,0)
 
"PKG",53,22,1,"PAH",1,1,110,0)
 
"PKG",53,22,1,"PAH",1,1,111,0)
ROUTINE SUMMARY
"PKG",53,22,1,"PAH",1,1,112,0)
=================
"PKG",53,22,1,"PAH",1,1,113,0)
The following is a list of routines included in patch LA*5.2*58. The
"PKG",53,22,1,"PAH",1,1,114,0)
second line of each routine now looks like:
"PKG",53,22,1,"PAH",1,1,115,0)
 
"PKG",53,22,1,"PAH",1,1,116,0)
<tab>;;5.2;AUTOMATED LAB INSTRUMENTS;**[patch list]**;Sep 27, 1994
"PKG",53,22,1,"PAH",1,1,117,0)
 
"PKG",53,22,1,"PAH",1,1,118,0)
                 CHECK^XTSUMBLD Results
"PKG",53,22,1,"PAH",1,1,119,0)
  Routine Name    Before Patch      After Patch    Patch List
"PKG",53,22,1,"PAH",1,1,120,0)
  ------------    ------------      -----------    ------------
"PKG",53,22,1,"PAH",1,1,121,0)
  LA7DEDT            3765930          5836716      53,58
"PKG",53,22,1,"PAH",1,1,122,0)
  LA7DLOC             NEW              553499      58
"PKG",53,22,1,"PAH",1,1,123,0)
  LA7DVM             6983644          6949969      53,58
"PKG",53,22,1,"PAH",1,1,124,0)
 
"PKG",53,22,1,"PAH",1,1,125,0)
 
"PKG",53,22,1,"PAH",1,1,126,0)
The following is a list of routines included in patch LR*5.2*266. The
"PKG",53,22,1,"PAH",1,1,127,0)
second line of each routine now looks like:
"PKG",53,22,1,"PAH",1,1,128,0)
 
"PKG",53,22,1,"PAH",1,1,129,0)
<tab>;;5.2;LAB SERVICE;**[patch list]**;Sep 27, 1994
"PKG",53,22,1,"PAH",1,1,130,0)
                 CHECK^XTSUMBLD Results
"PKG",53,22,1,"PAH",1,1,131,0)
  Routine Name    Before Patch      After Patch    Patch List
"PKG",53,22,1,"PAH",1,1,132,0)
  ------------    ------------      -----------    ------------
"PKG",53,22,1,"PAH",1,1,133,0)
  LR266               NEW             1529899      266
"PKG",53,22,1,"PAH",1,1,134,0)
  LRMIUT             3673249          3951633      254,266
"PKG",53,22,1,"PAH",1,1,135,0)
  LRVER3A           10780812         10508599      1,5,42,100,121
"PKG",53,22,1,"PAH",1,1,136,0)
                                                   153,190,221,254,
"PKG",53,22,1,"PAH",1,1,137,0)
                                                   263,266
"PKG",53,22,1,"PAH",1,1,138,0)
 
"PKG",53,22,1,"PAH",1,1,139,0)
 
"PKG",53,22,1,"PAH",1,1,140,0)
The documentation and distribution files for patches LA*5.2*58 and
"PKG",53,22,1,"PAH",1,1,141,0)
LR*5.2*266 may be obtained using FTP from the appropriate National VistA
"PKG",53,22,1,"PAH",1,1,142,0)
Support directory:
"PKG",53,22,1,"PAH",1,1,143,0)
 
"PKG",53,22,1,"PAH",1,1,144,0)
    OI FIELD OFFICE       FTP ADDRESS             DIRECTORY
"PKG",53,22,1,"PAH",1,1,145,0)
    ===============       ===========             ==========
"PKG",53,22,1,"PAH",1,1,146,0)
     HINES               152.129.1.110      [ANONYMOUS.SOFTWARE]
"PKG",53,22,1,"PAH",1,1,147,0)
     SALT LAKE CITY      152.131.2.1        [ANONYMOUS.SOFTWARE]
"PKG",53,22,1,"PAH",1,1,148,0)
     ALBANY              152.127.1.5        [ANONYMOUS.SOFTWARE]
"PKG",53,22,1,"PAH",1,1,149,0)
 
"PKG",53,22,1,"PAH",1,1,150,0)
File names are:
"PKG",53,22,1,"PAH",1,1,151,0)
 
"PKG",53,22,1,"PAH",1,1,152,0)
 ASCII FILE
"PKG",53,22,1,"PAH",1,1,153,0)
  LA_52_P58.KID     -  KIDS distribution for LA*5.2*58 and LR*5.2*266
"PKG",53,22,1,"PAH",1,1,154,0)
 
"PKG",53,22,1,"PAH",1,1,155,0)
 BINARY FILE
"PKG",53,22,1,"PAH",1,1,156,0)
  LA7DIG.PDF        -  CareVue Installation Guide
"PKG",53,22,1,"PAH",1,1,157,0)
 
"PKG",53,22,1,"PAH",1,1,158,0)
INSTALLATION INSTRUCTIONS
"PKG",53,22,1,"PAH",1,1,159,0)
=========================
"PKG",53,22,1,"PAH",1,1,160,0)
 
"PKG",53,22,1,"PAH",1,1,161,0)
  NOTE: This KIDS install does not place any options out of service
"PKG",53,22,1,"PAH",1,1,162,0)
        during the install and no user options are affected.
"PKG",53,22,1,"PAH",1,1,163,0)
        If KIDS prompts:
"PKG",53,22,1,"PAH",1,1,164,0)
  
"PKG",53,22,1,"PAH",1,1,165,0)
        "Want KIDS to Rebuild Menu Trees Upon Completion of
"PKG",53,22,1,"PAH",1,1,166,0)
         Install? YES// NO"
"PKG",53,22,1,"PAH",1,1,167,0)
        "Want KIDS to INHIBIT LOGONs during the install? YES// NO"
"PKG",53,22,1,"PAH",1,1,168,0)
        "Want to DISABLE Scheduled Options, Menu Options, and
"PKG",53,22,1,"PAH",1,1,169,0)
        Protocols? YES// NO"
"PKG",53,22,1,"PAH",1,1,170,0)
 
"PKG",53,22,1,"PAH",1,1,171,0)
        The site should answer "NO" to all three questions.
"PKG",53,22,1,"PAH",1,1,172,0)
            Note: You may not receive all three prompts at your site.  
"PKG",53,22,1,"PAH",1,1,173,0)
  
"PKG",53,22,1,"PAH",1,1,174,0)
     1. Review your mapped set.  If any of the routines listed in
"PKG",53,22,1,"PAH",1,1,175,0)
        patches LA*5.2*58 or LR*5.2*266 are mapped, they should be
"PKG",53,22,1,"PAH",1,1,176,0)
        removed from the mapped set at this time.
"PKG",53,22,1,"PAH",1,1,177,0)
 
"PKG",53,22,1,"PAH",1,1,178,0)
     2. From the Kernel Installation & Distribution System menu (XPD
"PKG",53,22,1,"PAH",1,1,179,0)
        MAIN), select the Installation menu option, then the option,
"PKG",53,22,1,"PAH",1,1,180,0)
        Load a Distribution. Enter your directory name and
"PKG",53,22,1,"PAH",1,1,181,0)
        LA_52_P58.KID at the Host File prompt.
"PKG",53,22,1,"PAH",1,1,182,0)
 
"PKG",53,22,1,"PAH",1,1,183,0)
     3. The patch has now been loaded into a Transport global on
"PKG",53,22,1,"PAH",1,1,184,0)
        your system. You now need to use KIDS to install the 
"PKG",53,22,1,"PAH",1,1,185,0)
        Transport global.
"PKG",53,22,1,"PAH",1,1,186,0)
 
"PKG",53,22,1,"PAH",1,1,187,0)
        On the KIDS menu, under the 'Installation' menu, use the 
"PKG",53,22,1,"PAH",1,1,188,0)
        following options:
"PKG",53,22,1,"PAH",1,1,189,0)
           Print Transport Global
"PKG",53,22,1,"PAH",1,1,190,0)
           Compare Transport Global to Current System
"PKG",53,22,1,"PAH",1,1,191,0)
           Verify Checksums in Transport Global
"PKG",53,22,1,"PAH",1,1,192,0)
           Backup a Transport Global
"PKG",53,22,1,"PAH",1,1,193,0)
 
"PKG",53,22,1,"PAH",1,1,194,0)
     4. It is recommended that this release be installed during off
"PKG",53,22,1,"PAH",1,1,195,0)
        peak hours.  To prevent a possible problem with the tasking
"PKG",53,22,1,"PAH",1,1,196,0)
        of the next days laboratory orders, do not install this package
"PKG",53,22,1,"PAH",1,1,197,0)
        at the same time as the following nightly tasked jobs:
"PKG",53,22,1,"PAH",1,1,198,0)
 
"PKG",53,22,1,"PAH",1,1,199,0)
              LRTASK ROLLOVER
"PKG",53,22,1,"PAH",1,1,200,0)
              LRTASK NIGHTLY
"PKG",53,22,1,"PAH",1,1,201,0)
              LRTASK CONJAM
"PKG",53,22,1,"PAH",1,1,202,0)
              LRTASK CUM
"PKG",53,22,1,"PAH",1,1,203,0)
 
"PKG",53,22,1,"PAH",1,1,204,0)
     5. No options need to be placed out of service.
"PKG",53,22,1,"PAH",1,1,205,0)
 
"PKG",53,22,1,"PAH",1,1,206,0)
     6. Installation time is less than 2 minutes during off peak 
"PKG",53,22,1,"PAH",1,1,207,0)
        hours and less than 5 minutes during peak hours
"PKG",53,22,1,"PAH",1,1,208,0)
 
"PKG",53,22,1,"PAH",1,1,209,0)
     7. From the 'Installation Menu' of the KIDS menu, run the 
"PKG",53,22,1,"PAH",1,1,210,0)
        option 'Install Package(s)' Select the package 'LA*5.2*58'
"PKG",53,22,1,"PAH",1,1,211,0)
        and proceed with the install. When prompted 'Want to 
"PKG",53,22,1,"PAH",1,1,212,0)
        DISABLE Scheduled Options, Menu Options, and Protocols? 
"PKG",53,22,1,"PAH",1,1,213,0)
        YES//', choose 'NO'.
"PKG",53,22,1,"PAH",1,1,214,0)
 
"PKG",53,22,1,"PAH",1,1,215,0)
     8. This patch updates the Processing RTN field (#771) and the
"PKG",53,22,1,"PAH",1,1,216,0)
        Response Processing RTN field (#772) of the Protocol file
"PKG",53,22,1,"PAH",1,1,217,0)
        (#101) for the LA7D CARELIFE RESULTS and LA7D CARELIFE SERVER
"PKG",53,22,1,"PAH",1,1,218,0)
        entries. The letter "Q" will be entered by the post-init
"PKG",53,22,1,"PAH",1,1,219,0)
        routine LR266 if no entry exists.  The LR266 routine will
"PKG",53,22,1,"PAH",1,1,220,0)
        automatically be deleted after the patch is installed.
"PKG",53,22,1,"PAH",1,1,221,0)
 
"PKG",53,22,1,"PAH",1,1,222,0)
     9. If any routines were unmapped as part of step 2, they 
"PKG",53,22,1,"PAH",1,1,223,0)
        should be returned to the mapped set once the installation 
"PKG",53,22,1,"PAH",1,1,224,0)
        has run to completion.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","LA7DEDT")
0^4^B17923092
"RTN","LA7DEDT",1,0)
LA7DEDT ;DALOI/PWC/RLM-LA7D EDIT FOREIGN COMPUTER INTERFACE FILE ;02/14/2000
"RTN","LA7DEDT",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**53,58**;Sep 27, 1994
"RTN","LA7DEDT",3,0)
 ; Reference to $$FIND1^DIC supported by IA #2051
"RTN","LA7DEDT",4,0)
 ; Reference to LIST^DIC supported by IA #2051
"RTN","LA7DEDT",5,0)
 ; Reference to UPDATE^DIE supported by IA #2053
"RTN","LA7DEDT",6,0)
 ; Reference to ^DIK supported by IA #10013
"RTN","LA7DEDT",7,0)
 ; Reference to ^DIR supported by IA #10026
"RTN","LA7DEDT",8,0)
 ;
"RTN","LA7DEDT",9,0)
 ; This routine will allow the user to enter a foreign computer
"RTN","LA7DEDT",10,0)
 ; system name and the supported ward(s) for each name
"RTN","LA7DEDT",11,0)
 ; (ie. CareVue, Marquette)
"RTN","LA7DEDT",12,0)
 ;
"RTN","LA7DEDT",13,0)
 K ^TMP("DIERR",$J)
"RTN","LA7DEDT",14,0)
 K CNT,DA,DEL,DIERR,DIK,DIR,DIROUT,DIRUT,DONE,DTOUT,DUOUT,FROM
"RTN","LA7DEDT",15,0)
 K I,IEN,IRESULT,J,LA7D,LA7DERR,LA7DERR1,LA7DIEN,LA7DTMP,LAIEN
"RTN","LA7DEDT",16,0)
 K LAIENW,OK,WIEN,WWIEN,X,Y
"RTN","LA7DEDT",17,0)
ADDNEW ;
"RTN","LA7DEDT",18,0)
 K DIR
"RTN","LA7DEDT",19,0)
 S DIR("A")="Do you wish to Add or Edit a Bedside Monitor"
"RTN","LA7DEDT",20,0)
 ;S DIR("?")=""
"RTN","LA7DEDT",21,0)
 S DIR(0)="S^a:ADD;e:EDIT"
"RTN","LA7DEDT",22,0)
 S DIR("B")="E"
"RTN","LA7DEDT",23,0)
 D ^DIR Q:X=""!($D(DIRUT))!($D(DIROUT))
"RTN","LA7DEDT",24,0)
 G:Y="a" ADD
"RTN","LA7DEDT",25,0)
NAME ; input the name of the bedside monitor interface
"RTN","LA7DEDT",26,0)
 D HELPM
"RTN","LA7DEDT",27,0)
 K DIR S DIR("A")="Enter BEDSIDE MONITOR INTERFACE NAME"
"RTN","LA7DEDT",28,0)
 S DIR("?")="Enter Bedside Monitor Name (ie. CareVue, Marquette)"
"RTN","LA7DEDT",29,0)
 S DIR(0)="PO^62.487:LEM"
"RTN","LA7DEDT",30,0)
 K DIR("B") S DLAYGO="62.487"
"RTN","LA7DEDT",31,0)
 D ^DIR K DLAYGO Q:X=""!($D(DIRUT))!($D(DIROUT))
"RTN","LA7DEDT",32,0)
 S IRESULT=$P(Y,"^",2)
"RTN","LA7DEDT",33,0)
 S LA7DIEN=$S($D(IEN(1)):IEN(1),1:+Y)
"RTN","LA7DEDT",34,0)
 S DONE=0
"RTN","LA7DEDT",35,0)
 ;
"RTN","LA7DEDT",36,0)
WARD ; input the ward # associated with the bedside monitor interface
"RTN","LA7DEDT",37,0)
 ;
"RTN","LA7DEDT",38,0)
 D HELPW
"RTN","LA7DEDT",39,0)
 K DIR S DIR("A")="Enter "_IRESULT_" WARD"
"RTN","LA7DEDT",40,0)
 S DIR("?")="Enter wards associated with this bedside monitor"
"RTN","LA7DEDT",41,0)
 S DIR(0)="P^44:EMZ"
"RTN","LA7DEDT",42,0)
 F J=1:1 D  Q:DONE
"RTN","LA7DEDT",43,0)
 . K DIR("B")
"RTN","LA7DEDT",44,0)
 . D ^DIR I X=""!($D(DIRUT))!($D(DIROUT)) S DONE=1 Q
"RTN","LA7DEDT",45,0)
 . S WIEN=+Y
"RTN","LA7DEDT",46,0)
 . I WIEN=0!(WIEN="") W "  Invalid" Q     ; does not exist in file 44
"RTN","LA7DEDT",47,0)
 . K LA7DERR
"RTN","LA7DEDT",48,0)
 . S WWIEN=$$FIND1^DIC(62.4871,","_LA7DIEN_",","AX",$P(Y,"^",2),,,"LA7DERR")
"RTN","LA7DEDT",49,0)
 . ;I $D(LA7DERR) K LA7DERR S WWIEN=$$FIND1^DIC(62.4871,","_LA7DIEN_",","AX",$P(Y,"^",2),,,"LA7DERR")
"RTN","LA7DEDT",50,0)
 . ;I $D(LA7DERR) W !,"There is an error with this entry." Q
"RTN","LA7DEDT",51,0)
 . I WWIEN'=0 W " already on file" D DELETE Q  ; exists in file 62.487
"RTN","LA7DEDT",52,0)
 . K LA7D,LA7DERR,LAIENW             ; does not exist, add to database
"RTN","LA7DEDT",53,0)
 . F CNT=1:1 Q:'$D(^LAB(62.487,LA7DIEN,1,CNT))
"RTN","LA7DEDT",54,0)
 . I CNT=LA7DIEN S CNT=CNT+1
"RTN","LA7DEDT",55,0)
 . S LA7D(62.487,LA7DIEN_",",.01)=IRESULT
"RTN","LA7DEDT",56,0)
 . S LA7D(62.4871,"?+"_CNT_","_LA7DIEN_",",.01)=WIEN
"RTN","LA7DEDT",57,0)
 . D UPDATE^DIE("S","LA7D","LAIENW","LA7DERR")
"RTN","LA7DEDT",58,0)
 . I $D(LA7DERR) W !,$G(LA7DERR("DIERR",1,"TEXT",1))
"RTN","LA7DEDT",59,0)
EXIT ;
"RTN","LA7DEDT",60,0)
 K CNT,DA,DEL,DIERR,DIK,DIR,DIROUT,DIRUT,DONE,DTOUT,DUOUT,FROM
"RTN","LA7DEDT",61,0)
 K I,IEN,IRESULT,J,LA7D,LA7DERR,LA7DERR1,LA7DIEN,LA7DTMP,LAIEN
"RTN","LA7DEDT",62,0)
 K LAIENW,OK,WIEN,WWIEN,X,Y
"RTN","LA7DEDT",63,0)
 K ^TMP("DIERR",$J)
"RTN","LA7DEDT",64,0)
 Q
"RTN","LA7DEDT",65,0)
 ;
"RTN","LA7DEDT",66,0)
HELPW ; A list of available wards will display before the WARD prompt is issued.
"RTN","LA7DEDT",67,0)
 ;
"RTN","LA7DEDT",68,0)
 W !," Current Wards for ",$P(^LAB(62.487,LA7DIEN,0),"^")
"RTN","LA7DEDT",69,0)
 K LA7DTMP,LA7DERR1 S FROM=""
"RTN","LA7DEDT",70,0)
 D LIST^DIC(62.4871,","_LA7DIEN_",",.01,,,FROM,,,,,"LA7DTMP","LA7DERR1")
"RTN","LA7DEDT",71,0)
 F J=1:1 Q:'$D(LA7DTMP("DILIST",1,J))  W !,"   ",LA7DTMP("DILIST",1,J) I '(J#5) K DIR S DIR(0)="E" D ^DIR Q:'Y
"RTN","LA7DEDT",72,0)
 Q
"RTN","LA7DEDT",73,0)
 ;
"RTN","LA7DEDT",74,0)
HELPM ; A list of available Bedside Monitors will display before the BEDSIDE MONITOR prompt is issued.
"RTN","LA7DEDT",75,0)
 ;
"RTN","LA7DEDT",76,0)
 W !," Current Bedside Monitors"
"RTN","LA7DEDT",77,0)
 K LA7DTMP,LA7DERR1 S FROM=""
"RTN","LA7DEDT",78,0)
 D LIST^DIC(62.487,,.01,,,FROM,,,,,"LA7DTMP","LA7DERR1")
"RTN","LA7DEDT",79,0)
 F J=1:1 Q:'$D(LA7DTMP("DILIST",1,J))  W !,"   ",LA7DTMP("DILIST",1,J) I '(J#5) K DIR S DIR(0)="E" D ^DIR Q:'Y
"RTN","LA7DEDT",80,0)
 Q
"RTN","LA7DEDT",81,0)
 ;
"RTN","LA7DEDT",82,0)
ADD ;Add an entry to 62.487
"RTN","LA7DEDT",83,0)
 D HELPM
"RTN","LA7DEDT",84,0)
 K DIR S DIR("A")="Enter the name of the NEW Bedside Monitor"
"RTN","LA7DEDT",85,0)
 S DIR(0)="F^3:30"
"RTN","LA7DEDT",86,0)
 D ^DIR Q:X=""!($D(DIRUT))!($D(DIROUT))
"RTN","LA7DEDT",87,0)
 S Y=$$FIND1^DIC(62.487,,,X,,,"LA7DERRA")
"RTN","LA7DEDT",88,0)
 S IRESULT=X
"RTN","LA7DEDT",89,0)
 I Y!(Y="") W !,X_" exists, please select a new name."
"RTN","LA7DEDT",90,0)
 I Y=0 S DIR("A")=X_" does not exist. Do you wish to add it?" S DIR(0)="Y",DIR("B")="N" D ^DIR G:'Y ADD D
"RTN","LA7DEDT",91,0)
  . K LA7D ;does not exist, add to database
"RTN","LA7DEDT",92,0)
  . S LA7D(62.487,"?+1,",.01)=IRESULT
"RTN","LA7DEDT",93,0)
  . D UPDATE^DIE("ES","LA7D","LAIEN","LA7DERR")
"RTN","LA7DEDT",94,0)
  . ;do the FIND1^DIC again since we don't know the IEN
"RTN","LA7DEDT",95,0)
  . S Y=$$FIND1^DIC(62.487,,,X)
"RTN","LA7DEDT",96,0)
  . S LA7DIEN=LAIEN(1),DONE=0
"RTN","LA7DEDT",97,0)
 G WARD Q
"RTN","LA7DEDT",98,0)
DELETE ; delete entry from ^LAB(62.487
"RTN","LA7DEDT",99,0)
 ;
"RTN","LA7DEDT",100,0)
 W !,"Ward already on File, DELETE (Y/N) [N] " R DEL:DTIME
"RTN","LA7DEDT",101,0)
 S:DEL="" DEL="N" Q:DEL="N"!(DEL="^")
"RTN","LA7DEDT",102,0)
 I DEL'="Y" W $C(7),"  Must enter Y or N" G DELETE
"RTN","LA7DEDT",103,0)
 K DIK,DA S DA(1)=LA7DIEN,DA=WWIEN
"RTN","LA7DEDT",104,0)
 S DIK="^LAB(62.487,"_DA(1)_",1,"
"RTN","LA7DEDT",105,0)
 D ^DIK K DIK,DA
"RTN","LA7DEDT",106,0)
 Q
"RTN","LA7DEDT",107,0)
ZEOR ;LA7DEDT
"RTN","LA7DLOC")
0^1^B765331
"RTN","LA7DLOC",1,0)
LA7DLOC ;PWC/DALOI - ROUTINE TO VERIFIY CAREVUE LOCATIONS;01/14/2000
"RTN","LA7DLOC",2,0)
 ;;5.2;LAB SERVICE;**58**;Sep 27, 1994
"RTN","LA7DLOC",3,0)
 ; Reference to ^SC(    supported by DBIA #10040
"RTN","LA7DLOC",4,0)
 ; Reference to ^DIC(   supported by DBIA #10006
"RTN","LA7DLOC",5,0)
 ; Reference to $$FIND1^DIC supported by IA #2051
"RTN","LA7DLOC",6,0)
 ; 
"RTN","LA7DLOC",7,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","LA7DLOC",8,0)
 Q:'$G(LR7DLOC)  S LA7DVL=""
"RTN","LA7DLOC",9,0)
 S LA7DIEN=$$FIND1^DIC(62.487,,,"CAREVUE")  ;find the IEN for CareVue
"RTN","LA7DLOC",10,0)
 I $D(^LAB(62.487,+LA7DIEN,1,"B",LR7DLOC)) D
"RTN","LA7DLOC",11,0)
 . S LA7DVL=$P($G(^SC(LR7DLOC,0)),"^",2) Q:LA7DVL=""
"RTN","LA7DLOC",12,0)
 . I LRSS="CH" D EN^LA7DVC K LA7DIEN,LA7DVL,LA7DLOC Q
"RTN","LA7DLOC",13,0)
 . I LRSS="MI" D EN^LA7DVM K LA7DIEN,LA7DVL,LA7DLOC Q
"RTN","LA7DLOC",14,0)
 Q
"RTN","LA7DLOC",15,0)
 ;
"RTN","LA7DVM")
0^3^B17256883
"RTN","LA7DVM",1,0)
LA7DVM ;SFCIOFO/MJM/DALOI/PWC - EXTRACTION ROUTINE FOR VERIFIED "MI" LAB RESULTS TO CAREVUE&LIFELOG;01/14/2000
"RTN","LA7DVM",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**53,58**;Sep 27, 1994
"RTN","LA7DVM",3,0)
 ;
"RTN","LA7DVM",4,0)
 ; Reference to ^DPT( supported by DBIA #10035
"RTN","LA7DVM",5,0)
 ; Reference to ^%DTC supported by DBIA #10000
"RTN","LA7DVM",6,0)
 ; Reference to ^DIC supported by DBIA #10006
"RTN","LA7DVM",7,0)
 ; Reference to INIT^HLFNC2 supported by DBIA #2161
"RTN","LA7DVM",8,0)
 ; Reference to GENERATE^HLMA supported by DBIA #2164
"RTN","LA7DVM",9,0)
 ; Reference to DEM^VADPT supported by DBIA #10061
"RTN","LA7DVM",10,0)
 ; Reference to $$EN^VAFHLPID supported by DBIA #263
"RTN","LA7DVM",11,0)
 ; Reference to $$FMTHL7^XLFDT supported by DBIA #10103
"RTN","LA7DVM",12,0)
 ; Reference to ^XMD supported by DBIA #10070
"RTN","LA7DVM",13,0)
 ;
"RTN","LA7DVM",14,0)
EN ;ENTRY POINT FROM VERIFICATION PROCESS
"RTN","LA7DVM",15,0)
 N I
"RTN","LA7DVM",16,0)
 S DFN=$P(^LR(LRDFN,0),"^",3)
"RTN","LA7DVM",17,0)
 S GMTS1=9999999-LRIDT,GMTS2=9999999-LRIDT,VFLAG=1 D DEM^VADPT
"RTN","LA7DVM",18,0)
 D INIT,RR^LR7OR1(DFN,,GMTS1,GMTS2,"MI"),HL7
"RTN","LA7DVM",19,0)
 K ^TMP("LRRR",$J),DFN,EXPAND,NXREC,MAX,SEX
"RTN","LA7DVM",20,0)
 Q
"RTN","LA7DVM",21,0)
 ;
"RTN","LA7DVM",22,0)
INIT ;Set up needed variables
"RTN","LA7DVM",23,0)
 S NXREC=0,MAX=75,EXPAND=1,SEX=$P(VADM(5),"^",1)
"RTN","LA7DVM",24,0)
 Q
"RTN","LA7DVM",25,0)
 ;
"RTN","LA7DVM",26,0)
HL7 ; Build the HL7 message and send to the Ward.
"RTN","LA7DVM",27,0)
 K HL,HLA  ; Clean the enviroment
"RTN","LA7DVM",28,0)
 S DIC="^ORD(101,",DIC(0)="MNOZ",X="LA7D CARELIFE SERVER" D ^DIC
"RTN","LA7DVM",29,0)
 I Y=-1 S TEXT="Unable to send out test result to CAREVUE, Protocol Server is not setup" K Y,DIC D ERROR Q
"RTN","LA7DVM",30,0)
 S LA7DVEID=+Y  ; Server Protocol IEN
"RTN","LA7DVM",31,0)
 K Y,DIC
"RTN","LA7DVM",32,0)
 D INIT^HLFNC2(LA7DVEID,.HL)
"RTN","LA7DVM",33,0)
 I $G(HL) S TEXT="Unable to send out test result to CAREVUE, Protocol Server is downed" D ERROR Q
"RTN","LA7DVM",34,0)
 N COUNT
"RTN","LA7DVM",35,0)
 S LA7DVTYP="LM",LA7DVFMT=1
"RTN","LA7DVM",36,0)
 S HLFS=$E(HL("FS")),Z=$E(HL("ECH"),1),COUNT=1,S=HLFS
"RTN","LA7DVM",37,0)
 S HLA("HLS",COUNT)=$$EN^VAFHLPID(DFN,"2,3,5,7,8,19")
"RTN","LA7DVM",38,0)
 S HOLD=COUNT+1  ;  Hold the space for OBR segment
"RTN","LA7DVM",39,0)
 S COUNT=COUNT+2,LA7DVTXT=""
"RTN","LA7DVM",40,0)
 ; Start the NTE segment
"RTN","LA7DVM",41,0)
 F  S LA7DVTXT=$O(^TMP("LRRR",$J,DFN,"MI",LRIDT,"N",LA7DVTXT)) Q:LA7DVTXT=""  D
"RTN","LA7DVM",42,0)
 . S HLA("HLS",COUNT)="NTE"_HLFS_HLFS_"L"_HLFS_^TMP("LRRR",$J,DFN,"MI",LRIDT,"N",LA7DVTXT)
"RTN","LA7DVM",43,0)
 . S COUNT=COUNT+1
"RTN","LA7DVM",44,0)
 ; Start the OBX segment
"RTN","LA7DVM",45,0)
 S (OBX,LA7DVSCR)=""
"RTN","LA7DVM",46,0)
 F  S OBX=$O(^TMP("LRRR",$J,DFN,"MI",LRIDT,OBX)) Q:+OBX=0  D
"RTN","LA7DVM",47,0)
 . S LA7DVOBX=^TMP("LRRR",$J,DFN,"MI",LRIDT,OBX)
"RTN","LA7DVM",48,0)
 . S LINE1="OBX"_HLFS_HLFS_"TX"_HLFS_"TX"_HLFS_HLFS_$P(LA7DVOBX,"^",2)_HLFS_HLFS
"RTN","LA7DVM",49,0)
 . S HLA("HLS",COUNT)=LINE1_HLFS_HLFS_HLFS_HLFS
"RTN","LA7DVM",50,0)
 . S COUNT=COUNT+1
"RTN","LA7DVM",51,0)
 . K LINE1
"RTN","LA7DVM",52,0)
 ; Start the OBR segment
"RTN","LA7DVM",53,0)
 S LA7DVTMP=0,LA7DVTMP=$O(^LR(LRDFN,"MI",LA7DVTMP)) ; Get the first entry of this collection
"RTN","LA7DVM",54,0)
 S SITE=$P(^LR(LRDFN,"MI",LA7DVTMP,0),"^",5),LA7DVSCR=$P(^LAB(61,SITE,0),"^",1)
"RTN","LA7DVM",55,0)
 ; change all $$HLDATE^HLFNC calls to $$FMTHL7^XLFDT   pwc-10/6/2000
"RTN","LA7DVM",56,0)
 S LA7DVCOL=$$FMTHL7^XLFDT($P(^LR(LRDFN,"MI",LA7DVTMP,0),"^"))  ; Get theCollection date/time
"RTN","LA7DVM",57,0)
 S LA7DVRCV=$$FMTHL7^XLFDT($P(^LR(LRDFN,"MI",LA7DVTMP,0),"^",10)) ; Get the Specimen Received Date/time
"RTN","LA7DVM",58,0)
 S LA7DVRCP=$$FMTHL7^XLFDT($P(^LR(LRDFN,"MI",LA7DVTMP,0),"^",3))  ; Get the Report Complete Date/time
"RTN","LA7DVM",59,0)
 S LA7DVACC=$P(^LR(LRDFN,"MI",LA7DVTMP,0),"^",6)  ; Get the Accession #
"RTN","LA7DVM",60,0)
 S HLA("HLS",HOLD)="OBR"_HLFS_HLFS_HLFS_LA7DVACC_HLFS_"MI"
"RTN","LA7DVM",61,0)
 S $P(HLA("HLS",HOLD),HLFS,8)=LA7DVCOL
"RTN","LA7DVM",62,0)
 S $P(HLA("HLS",HOLD),HLFS,15,16)=LA7DVRCV_HLFS_LA7DVSCR
"RTN","LA7DVM",63,0)
 S $P(HLA("HLS",HOLD),HLFS,23,29)=LA7DVRCP_S_S_"LAB"_S_S_S_S_LA7DVL
"RTN","LA7DVM",64,0)
 D GENERATE^HLMA(LA7DVEID,LA7DVTYP,LA7DVFMT)
"RTN","LA7DVM",65,0)
 I $G(HLRESLT) D ERROR
"RTN","LA7DVM",66,0)
 K LA7DVRCP,LA7DVSCR,HOLD,LA7DVCOL,LA7DVACC,LA7DVTMP,LA7DVOBX,COUNT
"RTN","LA7DVM",67,0)
 K LA7DVTXT,LA7DVFMT,LA7DVEID,LA7DVTYP,OBX,GMTS1,GMTS2,HLFS,HLRESLT
"RTN","LA7DVM",68,0)
 K HLRESTL,LA7DVRCV,LRSPEC,S,SITE,SPEC,TEXT,VADM,VAIN,VFLAG,XMDT
"RTN","LA7DVM",69,0)
 K XMDUZ,XMSUB,XMTEXT,XMY,Z
"RTN","LA7DVM",70,0)
 Q
"RTN","LA7DVM",71,0)
ERROR ; Send out error message when HL7 fail to build the message
"RTN","LA7DVM",72,0)
 S XMSUB="ERROR IN SENDING LAB RESULTS TO "_$P(VAIN(4),"^",2)_" WARD"
"RTN","LA7DVM",73,0)
 D NOW^%DTC S XMDT=X K X
"RTN","LA7DVM",74,0)
 S XMDUZ=.5,XMY("G.CARELIFE RESULT ERROR")=""
"RTN","LA7DVM",75,0)
 S A(1)="There was an error in building an HL7 Lab Result Message for accession"
"RTN","LA7DVM",76,0)
 I LA7DVACC'="" D
"RTN","LA7DVM",77,0)
 . S A(2)=" # "_LA7DVACC_"of patient name: "_$P(^DPT(DFN,0),"^")_" at "_$P(VAIN(4),"^",2)_" Ward."
"RTN","LA7DVM",78,0)
 . S A(3)="The error was "_$P(HLRESTL,"^",3)_"."
"RTN","LA7DVM",79,0)
 E  D
"RTN","LA7DVM",80,0)
 . S A(2)="The error was "_TEXT_"."
"RTN","LA7DVM",81,0)
 . S A(3)=""
"RTN","LA7DVM",82,0)
 S A(4)="Please make a note of it and take any actions that necessary"
"RTN","LA7DVM",83,0)
 S XMTEXT="A(" D ^XMD
"RTN","LA7DVM",84,0)
 K A
"RTN","LA7DVM",85,0)
 Q
"VER")
8.0^22.0
**INSTALL NAME**
LR*5.2*266
"BLD",2536,0)
LR*5.2*266^LAB SERVICE^0^3010112^y
"BLD",2536,1,0)
^^224^224^3010112^
"BLD",2536,1,1,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patches LA*5.2*58 and
"BLD",2536,1,2,0)
LR*5.2*266 do not contain any changes to the VISTA BLOOD BANK Software as
"BLD",2536,1,3,0)
defined by VHA DIRECTIVE 99-053 titled VISTA BLOOD BANK SOFTWARE VERSION
"BLD",2536,1,4,0)
5.2.
"BLD",2536,1,5,0)
 
"BLD",2536,1,6,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patches LA*5.2*58 and
"BLD",2536,1,7,0)
LR*5.2*266 do not alter or modify any software design safeguards or safety
"BLD",2536,1,8,0)
critical elements functions.
"BLD",2536,1,9,0)
 
"BLD",2536,1,10,0)
 RISK ANALYSIS: Changes made by patches LA*5.2*58 and LR*5.2*266 have no
"BLD",2536,1,11,0)
effect on Blood Bank software functionality, therefore RISK is none.
"BLD",2536,1,12,0)
 
"BLD",2536,1,13,0)
**NOTE**
"BLD",2536,1,14,0)
 
"BLD",2536,1,15,0)
Patches LA*5.2*58 and LR*5.2*266 are being released in a single
"BLD",2536,1,16,0)
distribution.  Because of this, patch descriptions for LA*5.2*58 and
"BLD",2536,1,17,0)
LR*5.2*266 are identical and contain routine summaries for both sets of
"BLD",2536,1,18,0)
routines.
"BLD",2536,1,19,0)
 
"BLD",2536,1,20,0)
**NOTE**
"BLD",2536,1,21,0)
 
"BLD",2536,1,22,0)
The laboratory routines LRVER3A and LRMIUT are being modified by this
"BLD",2536,1,23,0)
patch.  These routines may have been locally modified at the sites.  The
"BLD",2536,1,24,0)
sites must ensure that precautions are taken to prevent loss of local
"BLD",2536,1,25,0)
modifications when patches to Laboratory are installed.
"BLD",2536,1,26,0)
 
"BLD",2536,1,27,0)
**NOTE**
"BLD",2536,1,28,0)
 
"BLD",2536,1,29,0)
When initially setting up the FOREIGN INTERFACE file (#62.487), the
"BLD",2536,1,30,0)
FOREIGN COMPUTER INTERFACE NAME field (#.01) should ALWAYS be set to
"BLD",2536,1,31,0)
"CAREVUE" (all caps, no leading or trailing spaces, and no quotes).  The
"BLD",2536,1,32,0)
routines that access this file are looking specifically for CAREVUE.  The
"BLD",2536,1,33,0)
routines will not be able to process the results for CareVue ward patients
"BLD",2536,1,34,0)
if this is not done.
"BLD",2536,1,35,0)
 
"BLD",2536,1,36,0)
This patch contains changes to Class I CareVue code and requires that
"BLD",2536,1,37,0)
patch LA*5.2*53 and LR*5.2*263 be installed before LA*5.2*58.  Patches
"BLD",2536,1,38,0)
LA*5.2*58 and LR*5.2*266 are contained in the same KID file
"BLD",2536,1,39,0)
(LA_52_P58.KID) and will be installed together.
"BLD",2536,1,40,0)
 
"BLD",2536,1,41,0)
This patch includes the following changes:
"BLD",2536,1,42,0)
 
"BLD",2536,1,43,0)
1.  This patch updates the documentation released with the CareVue
"BLD",2536,1,44,0)
Interface patch (LA*5.2*53).
"BLD",2536,1,45,0)
 
"BLD",2536,1,46,0)
2.  This patch makes changes to the routines LRVER3A and LRMIUT, and will
"BLD",2536,1,47,0)
create a new routine (LA7DLOC).  Currently, two routines (LRVER3A and
"BLD",2536,1,48,0)
LRMIUT) contain the Class I software for the CareVue interface. This patch
"BLD",2536,1,49,0)
will modify these routines to call the new routine (LA7DLOC).  LA7DLOC
"BLD",2536,1,50,0)
contains the Class I code for determining if a patient is located in a
"BLD",2536,1,51,0)
CareVue ward.  The current condition of the Class I code checks the CHEM,
"BLD",2536,1,52,0)
HEM, TOX, RIA, SER, etc. field (#4) and the Microbiology field (#5) of the
"BLD",2536,1,53,0)
Lab Data file (#63), but the updated routines will call LA7DLOC and will
"BLD",2536,1,54,0)
look in the Ward Location field (#.1) of the Patient file (#2).  This
"BLD",2536,1,55,0)
shows the current location of the patient.  There were problems with
"BLD",2536,1,56,0)
patients that were not transferred to the CareVue ward until after the lab
"BLD",2536,1,57,0)
order was taken. The old routine was checking where the patient was
"BLD",2536,1,58,0)
located when the order was taken, and not the current location of the
"BLD",2536,1,59,0)
patient.
"BLD",2536,1,60,0)
 
"BLD",2536,1,61,0)
3.  Updates to the HL/7 date conversion routines. The previous standard
"BLD",2536,1,62,0)
for HL/7 dates listed the date in YYYYMMDDHHMMSS format.  The degree of
"BLD",2536,1,63,0)
precision was listed as a separate parameter.  The new standard format is
"BLD",2536,1,64,0)
[YYYY[MM[DD[HH[MM[SS]]]]]-zzzz] where the bracketed sections are optional
"BLD",2536,1,65,0)
depending on the existence of the subsequent set. Also, if either the
"BLD",2536,1,66,0)
seconds or the minutes/seconds combination consist only of zeroes, the
"BLD",2536,1,67,0)
minutes (if zeroes) and seconds will be omitted.  The length of the
"BLD",2536,1,68,0)
date/time string specifies the degree of precision. In addition, a ZULU
"BLD",2536,1,69,0)
time offset (-zzzz) is also included.  This is the number of hours between
"BLD",2536,1,70,0)
Greenwich Mean Time and the local time where the date/time string was
"BLD",2536,1,71,0)
created.  Routines LA7DVM and LA7DVEXT have been modified to use the
"BLD",2536,1,72,0)
Kernel function ($$FMTHL7^XLFDT) to convert dates from FileMan to HL7
"BLD",2536,1,73,0)
instead of the HL/7 date conversion utility ($$HDATE^HLFNC).
"BLD",2536,1,74,0)
 
"BLD",2536,1,75,0)
4.  This patch will use TaskMan to transfer data to the CareVue system.
"BLD",2536,1,76,0)
Currently, TaskMan is not invoked. This could cause a problem verifying a
"BLD",2536,1,77,0)
result if an error was encountered in the CareVue routines.
"BLD",2536,1,78,0)
 
"BLD",2536,1,79,0)
5.  This patch changes the LA7D EDIT FOREIGN INTERFACE (Edit Foreign
"BLD",2536,1,80,0)
Interface Parameters) option.  It is now easier to add a Ward to a Foreign
"BLD",2536,1,81,0)
Computer System Name.
"BLD",2536,1,82,0)
 
"BLD",2536,1,83,0)
6.  This patch updates the Processing RTN field (#771) and the Response
"BLD",2536,1,84,0)
Processing RTN field (#772) of the Protocol file (#101) for the LA7D
"BLD",2536,1,85,0)
CARELIFE RESULTS and LA7D CARELIFE SERVER entries. The letter "Q" will be
"BLD",2536,1,86,0)
entered by the post-init routine LR266 if no entry exists.
"BLD",2536,1,87,0)
 
"BLD",2536,1,88,0)
NOIS - MIA-0600-30434
"BLD",2536,1,89,0)
   Reported an error, MISSING PROCESSING ROUTINE, when sending the HL7
"BLD",2536,1,90,0)
   message from VistA to CareVue.  The letter "Q" will be entered by
"BLD",2536,1,91,0)
   the post-init routine LR266 if no entry exists.
"BLD",2536,1,92,0)
NOIS - MWV-0900-21094
"BLD",2536,1,93,0)
   Reported that all CareVue ward patients tests were not being sent to
"BLD",2536,1,94,0)
   the CareVue system.  It was discovered that these patients were ones
"BLD",2536,1,95,0)
   who were transferred from a non-CareVue ward to a CareVue ward after
"BLD",2536,1,96,0)
   the tests were ordered. The patient was bypassed since the location
"BLD",2536,1,97,0)
   at time of order was not a CareVue ward.  This patch will correct
"BLD",2536,1,98,0)
   this by looking at the Ward Location field (#.1) in the Patient file
"BLD",2536,1,99,0)
   (#2) for the current location of the patient.
"BLD",2536,1,100,0)
 
"BLD",2536,1,101,0)
Associated NOIS
"BLD",2536,1,102,0)
===============
"BLD",2536,1,103,0)
MIA-0600-30434
"BLD",2536,1,104,0)
MWV-0900-21094
"BLD",2536,1,105,0)
 
"BLD",2536,1,106,0)
Test Sites
"BLD",2536,1,107,0)
==========
"BLD",2536,1,108,0)
Martinsburg, West Virginia
"BLD",2536,1,109,0)
 
"BLD",2536,1,110,0)
 
"BLD",2536,1,111,0)
ROUTINE SUMMARY
"BLD",2536,1,112,0)
=================
"BLD",2536,1,113,0)
The following is a list of routines included in patch LA*5.2*58. The
"BLD",2536,1,114,0)
second line of each routine now looks like:
"BLD",2536,1,115,0)
 
"BLD",2536,1,116,0)
<tab>;;5.2;AUTOMATED LAB INSTRUMENTS;**[patch list]**;Sep 27, 1994
"BLD",2536,1,117,0)
 
"BLD",2536,1,118,0)
                 CHECK^XTSUMBLD Results
"BLD",2536,1,119,0)
  Routine Name    Before Patch      After Patch    Patch List
"BLD",2536,1,120,0)
  ------------    ------------      -----------    ------------
"BLD",2536,1,121,0)
  LA7DEDT            3765930          5836716      53,58
"BLD",2536,1,122,0)
  LA7DLOC             NEW              553499      58
"BLD",2536,1,123,0)
  LA7DVM             6983644          6949969      53,58
"BLD",2536,1,124,0)
 
"BLD",2536,1,125,0)
 
"BLD",2536,1,126,0)
The following is a list of routines included in patch LR*5.2*266. The
"BLD",2536,1,127,0)
second line of each routine now looks like:
"BLD",2536,1,128,0)
 
"BLD",2536,1,129,0)
<tab>;;5.2;LAB SERVICE;**[patch list]**;Sep 27, 1994
"BLD",2536,1,130,0)
                 CHECK^XTSUMBLD Results
"BLD",2536,1,131,0)
  Routine Name    Before Patch      After Patch    Patch List
"BLD",2536,1,132,0)
  ------------    ------------      -----------    ------------
"BLD",2536,1,133,0)
  LR266               NEW             1529899      266
"BLD",2536,1,134,0)
  LRMIUT             3673249          3951633      254,266
"BLD",2536,1,135,0)
  LRVER3A           10780812         10508599      1,5,42,100,121
"BLD",2536,1,136,0)
                                                   153,190,221,254,
"BLD",2536,1,137,0)
                                                   263,266
"BLD",2536,1,138,0)
 
"BLD",2536,1,139,0)
 
"BLD",2536,1,140,0)
The documentation and distribution files for patches LA*5.2*58 and
"BLD",2536,1,141,0)
LR*5.2*266 may be obtained using FTP from the appropriate National VistA
"BLD",2536,1,142,0)
Support directory:
"BLD",2536,1,143,0)
 
"BLD",2536,1,144,0)
    OI FIELD OFFICE       FTP ADDRESS             DIRECTORY
"BLD",2536,1,145,0)
    ===============       ===========             ==========
"BLD",2536,1,146,0)
     HINES               152.129.1.110      [ANONYMOUS.SOFTWARE]
"BLD",2536,1,147,0)
     SALT LAKE CITY      152.131.2.1        [ANONYMOUS.SOFTWARE]
"BLD",2536,1,148,0)
     ALBANY              152.127.1.5        [ANONYMOUS.SOFTWARE]
"BLD",2536,1,149,0)
 
"BLD",2536,1,150,0)
File names are:
"BLD",2536,1,151,0)
 
"BLD",2536,1,152,0)
 ASCII FILE
"BLD",2536,1,153,0)
  LA_52_P58.KID     -  KIDS distribution for LA*5.2*58 and LR*5.2*266
"BLD",2536,1,154,0)
 
"BLD",2536,1,155,0)
 BINARY FILE
"BLD",2536,1,156,0)
  LA7DIG.PDF        -  CareVue Installation Guide
"BLD",2536,1,157,0)
 
"BLD",2536,1,158,0)
INSTALLATION INSTRUCTIONS
"BLD",2536,1,159,0)
=========================
"BLD",2536,1,160,0)
 
"BLD",2536,1,161,0)
  NOTE: This KIDS install does not place any options out of service
"BLD",2536,1,162,0)
        during the install and no user options are affected.
"BLD",2536,1,163,0)
        If KIDS prompts:
"BLD",2536,1,164,0)
  
"BLD",2536,1,165,0)
        "Want KIDS to Rebuild Menu Trees Upon Completion of
"BLD",2536,1,166,0)
         Install? YES// NO"
"BLD",2536,1,167,0)
        "Want KIDS to INHIBIT LOGONs during the install? YES// NO"
"BLD",2536,1,168,0)
        "Want to DISABLE Scheduled Options, Menu Options, and
"BLD",2536,1,169,0)
        Protocols? YES// NO"
"BLD",2536,1,170,0)
 
"BLD",2536,1,171,0)
        The site should answer "NO" to all three questions.
"BLD",2536,1,172,0)
            Note: You may not receive all three prompts at your site.  
"BLD",2536,1,173,0)
  
"BLD",2536,1,174,0)
     1. Review your mapped set.  If any of the routines listed in
"BLD",2536,1,175,0)
        patches LA*5.2*58 or LR*5.2*266 are mapped, they should be
"BLD",2536,1,176,0)
        removed from the mapped set at this time.
"BLD",2536,1,177,0)
 
"BLD",2536,1,178,0)
     2. From the Kernel Installation & Distribution System menu (XPD
"BLD",2536,1,179,0)
        MAIN), select the Installation menu option, then the option,
"BLD",2536,1,180,0)
        Load a Distribution. Enter your directory name and
"BLD",2536,1,181,0)
        LA_52_P58.KID at the Host File prompt.
"BLD",2536,1,182,0)
 
"BLD",2536,1,183,0)
     3. The patch has now been loaded into a Transport global on
"BLD",2536,1,184,0)
        your system. You now need to use KIDS to install the 
"BLD",2536,1,185,0)
        Transport global.
"BLD",2536,1,186,0)
 
"BLD",2536,1,187,0)
        On the KIDS menu, under the 'Installation' menu, use the 
"BLD",2536,1,188,0)
        following options:
"BLD",2536,1,189,0)
           Print Transport Global
"BLD",2536,1,190,0)
           Compare Transport Global to Current System
"BLD",2536,1,191,0)
           Verify Checksums in Transport Global
"BLD",2536,1,192,0)
           Backup a Transport Global
"BLD",2536,1,193,0)
 
"BLD",2536,1,194,0)
     4. It is recommended that this release be installed during off
"BLD",2536,1,195,0)
        peak hours.  To prevent a possible problem with the tasking
"BLD",2536,1,196,0)
        of the next days laboratory orders, do not install this package
"BLD",2536,1,197,0)
        at the same time as the following nightly tasked jobs:
"BLD",2536,1,198,0)
 
"BLD",2536,1,199,0)
              LRTASK ROLLOVER
"BLD",2536,1,200,0)
              LRTASK NIGHTLY
"BLD",2536,1,201,0)
              LRTASK CONJAM
"BLD",2536,1,202,0)
              LRTASK CUM
"BLD",2536,1,203,0)
 
"BLD",2536,1,204,0)
     5. No options need to be placed out of service.
"BLD",2536,1,205,0)
 
"BLD",2536,1,206,0)
     6. Installation time is less than 2 minutes during off peak 
"BLD",2536,1,207,0)
        hours and less than 5 minutes during peak hours
"BLD",2536,1,208,0)
 
"BLD",2536,1,209,0)
     7. From the 'Installation Menu' of the KIDS menu, run the 
"BLD",2536,1,210,0)
        option 'Install Package(s)' Select the package 'LA*5.2*58'
"BLD",2536,1,211,0)
        and proceed with the install. When prompted 'Want to 
"BLD",2536,1,212,0)
        DISABLE Scheduled Options, Menu Options, and Protocols? 
"BLD",2536,1,213,0)
        YES//', choose 'NO'.
"BLD",2536,1,214,0)
 
"BLD",2536,1,215,0)
     8. This patch updates the Processing RTN field (#771) and the
"BLD",2536,1,216,0)
        Response Processing RTN field (#772) of the Protocol file
"BLD",2536,1,217,0)
        (#101) for the LA7D CARELIFE RESULTS and LA7D CARELIFE SERVER
"BLD",2536,1,218,0)
        entries. The letter "Q" will be entered by the post-init
"BLD",2536,1,219,0)
        routine LR266 if no entry exists.  The LR266 routine will
"BLD",2536,1,220,0)
        automatically be deleted after the patch is installed.
"BLD",2536,1,221,0)
 
"BLD",2536,1,222,0)
     9. If any routines were unmapped as part of step 2, they 
"BLD",2536,1,223,0)
        should be returned to the mapped set once the installation 
"BLD",2536,1,224,0)
        has run to completion.
"BLD",2536,4,0)
^9.64PA^^
"BLD",2536,"INID")
^y
"BLD",2536,"INIT")
LR266
"BLD",2536,"KRN",0)
^9.67PA^19^17
"BLD",2536,"KRN",.4,0)
.4
"BLD",2536,"KRN",.401,0)
.401
"BLD",2536,"KRN",.402,0)
.402
"BLD",2536,"KRN",.403,0)
.403
"BLD",2536,"KRN",.5,0)
.5
"BLD",2536,"KRN",.84,0)
.84
"BLD",2536,"KRN",3.6,0)
3.6
"BLD",2536,"KRN",3.8,0)
3.8
"BLD",2536,"KRN",9.2,0)
9.2
"BLD",2536,"KRN",9.8,0)
9.8
"BLD",2536,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",2536,"KRN",9.8,"NM",1,0)
LRVER3A^^0^B22673375
"BLD",2536,"KRN",9.8,"NM",2,0)
LRMIUT^^0^B5576607
"BLD",2536,"KRN",9.8,"NM",3,0)
LR266^^0^B2026349
"BLD",2536,"KRN",9.8,"NM","B","LR266",3)

"BLD",2536,"KRN",9.8,"NM","B","LRMIUT",2)

"BLD",2536,"KRN",9.8,"NM","B","LRVER3A",1)

"BLD",2536,"KRN",19,0)
19
"BLD",2536,"KRN",19.1,0)
19.1
"BLD",2536,"KRN",101,0)
101
"BLD",2536,"KRN",409.61,0)
409.61
"BLD",2536,"KRN",771,0)
771
"BLD",2536,"KRN",870,0)
870
"BLD",2536,"KRN",8994,0)
8994
"BLD",2536,"KRN","B",.4,.4)

"BLD",2536,"KRN","B",.401,.401)

"BLD",2536,"KRN","B",.402,.402)

"BLD",2536,"KRN","B",.403,.403)

"BLD",2536,"KRN","B",.5,.5)

"BLD",2536,"KRN","B",.84,.84)

"BLD",2536,"KRN","B",3.6,3.6)

"BLD",2536,"KRN","B",3.8,3.8)

"BLD",2536,"KRN","B",9.2,9.2)

"BLD",2536,"KRN","B",9.8,9.8)

"BLD",2536,"KRN","B",19,19)

"BLD",2536,"KRN","B",19.1,19.1)

"BLD",2536,"KRN","B",101,101)

"BLD",2536,"KRN","B",409.61,409.61)

"BLD",2536,"KRN","B",771,771)

"BLD",2536,"KRN","B",870,870)

"BLD",2536,"KRN","B",8994,8994)

"BLD",2536,"QUES",0)
^9.62^^
"BLD",2536,"REQB",0)
^9.611^2^2
"BLD",2536,"REQB",1,0)
LR*5.2*263^1
"BLD",2536,"REQB",2,0)
LR*5.2*254^1
"BLD",2536,"REQB","B","LR*5.2*254",2)

"BLD",2536,"REQB","B","LR*5.2*263",1)

"INIT")
LR266
"MBREQ")
0
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950528
"PKG",26,22,1,"PAH",1,0)
266^3010112
"PKG",26,22,1,"PAH",1,1,0)
^^224^224^3010112
"PKG",26,22,1,"PAH",1,1,1,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patches LA*5.2*58 and
"PKG",26,22,1,"PAH",1,1,2,0)
LR*5.2*266 do not contain any changes to the VISTA BLOOD BANK Software as
"PKG",26,22,1,"PAH",1,1,3,0)
defined by VHA DIRECTIVE 99-053 titled VISTA BLOOD BANK SOFTWARE VERSION
"PKG",26,22,1,"PAH",1,1,4,0)
5.2.
"PKG",26,22,1,"PAH",1,1,5,0)
 
"PKG",26,22,1,"PAH",1,1,6,0)
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patches LA*5.2*58 and
"PKG",26,22,1,"PAH",1,1,7,0)
LR*5.2*266 do not alter or modify any software design safeguards or safety
"PKG",26,22,1,"PAH",1,1,8,0)
critical elements functions.
"PKG",26,22,1,"PAH",1,1,9,0)
 
"PKG",26,22,1,"PAH",1,1,10,0)
 RISK ANALYSIS: Changes made by patches LA*5.2*58 and LR*5.2*266 have no
"PKG",26,22,1,"PAH",1,1,11,0)
effect on Blood Bank software functionality, therefore RISK is none.
"PKG",26,22,1,"PAH",1,1,12,0)
 
"PKG",26,22,1,"PAH",1,1,13,0)
**NOTE**
"PKG",26,22,1,"PAH",1,1,14,0)
 
"PKG",26,22,1,"PAH",1,1,15,0)
Patches LA*5.2*58 and LR*5.2*266 are being released in a single
"PKG",26,22,1,"PAH",1,1,16,0)
distribution.  Because of this, patch descriptions for LA*5.2*58 and
"PKG",26,22,1,"PAH",1,1,17,0)
LR*5.2*266 are identical and contain routine summaries for both sets of
"PKG",26,22,1,"PAH",1,1,18,0)
routines.
"PKG",26,22,1,"PAH",1,1,19,0)
 
"PKG",26,22,1,"PAH",1,1,20,0)
**NOTE**
"PKG",26,22,1,"PAH",1,1,21,0)
 
"PKG",26,22,1,"PAH",1,1,22,0)
The laboratory routines LRVER3A and LRMIUT are being modified by this
"PKG",26,22,1,"PAH",1,1,23,0)
patch.  These routines may have been locally modified at the sites.  The
"PKG",26,22,1,"PAH",1,1,24,0)
sites must ensure that precautions are taken to prevent loss of local
"PKG",26,22,1,"PAH",1,1,25,0)
modifications when patches to Laboratory are installed.
"PKG",26,22,1,"PAH",1,1,26,0)
 
"PKG",26,22,1,"PAH",1,1,27,0)
**NOTE**
"PKG",26,22,1,"PAH",1,1,28,0)
 
"PKG",26,22,1,"PAH",1,1,29,0)
When initially setting up the FOREIGN INTERFACE file (#62.487), the
"PKG",26,22,1,"PAH",1,1,30,0)
FOREIGN COMPUTER INTERFACE NAME field (#.01) should ALWAYS be set to
"PKG",26,22,1,"PAH",1,1,31,0)
"CAREVUE" (all caps, no leading or trailing spaces, and no quotes).  The
"PKG",26,22,1,"PAH",1,1,32,0)
routines that access this file are looking specifically for CAREVUE.  The
"PKG",26,22,1,"PAH",1,1,33,0)
routines will not be able to process the results for CareVue ward patients
"PKG",26,22,1,"PAH",1,1,34,0)
if this is not done.
"PKG",26,22,1,"PAH",1,1,35,0)
 
"PKG",26,22,1,"PAH",1,1,36,0)
This patch contains changes to Class I CareVue code and requires that
"PKG",26,22,1,"PAH",1,1,37,0)
patch LA*5.2*53 and LR*5.2*263 be installed before LA*5.2*58.  Patches
"PKG",26,22,1,"PAH",1,1,38,0)
LA*5.2*58 and LR*5.2*266 are contained in the same KID file
"PKG",26,22,1,"PAH",1,1,39,0)
(LA_52_P58.KID) and will be installed together.
"PKG",26,22,1,"PAH",1,1,40,0)
 
"PKG",26,22,1,"PAH",1,1,41,0)
This patch includes the following changes:
"PKG",26,22,1,"PAH",1,1,42,0)
 
"PKG",26,22,1,"PAH",1,1,43,0)
1.  This patch updates the documentation released with the CareVue
"PKG",26,22,1,"PAH",1,1,44,0)
Interface patch (LA*5.2*53).
"PKG",26,22,1,"PAH",1,1,45,0)
 
"PKG",26,22,1,"PAH",1,1,46,0)
2.  This patch makes changes to the routines LRVER3A and LRMIUT, and will
"PKG",26,22,1,"PAH",1,1,47,0)
create a new routine (LA7DLOC).  Currently, two routines (LRVER3A and
"PKG",26,22,1,"PAH",1,1,48,0)
LRMIUT) contain the Class I software for the CareVue interface. This patch
"PKG",26,22,1,"PAH",1,1,49,0)
will modify these routines to call the new routine (LA7DLOC).  LA7DLOC
"PKG",26,22,1,"PAH",1,1,50,0)
contains the Class I code for determining if a patient is located in a
"PKG",26,22,1,"PAH",1,1,51,0)
CareVue ward.  The current condition of the Class I code checks the CHEM,
"PKG",26,22,1,"PAH",1,1,52,0)
HEM, TOX, RIA, SER, etc. field (#4) and the Microbiology field (#5) of the
"PKG",26,22,1,"PAH",1,1,53,0)
Lab Data file (#63), but the updated routines will call LA7DLOC and will
"PKG",26,22,1,"PAH",1,1,54,0)
look in the Ward Location field (#.1) of the Patient file (#2).  This
"PKG",26,22,1,"PAH",1,1,55,0)
shows the current location of the patient.  There were problems with
"PKG",26,22,1,"PAH",1,1,56,0)
patients that were not transferred to the CareVue ward until after the lab
"PKG",26,22,1,"PAH",1,1,57,0)
order was taken. The old routine was checking where the patient was
"PKG",26,22,1,"PAH",1,1,58,0)
located when the order was taken, and not the current location of the
"PKG",26,22,1,"PAH",1,1,59,0)
patient.
"PKG",26,22,1,"PAH",1,1,60,0)
 
"PKG",26,22,1,"PAH",1,1,61,0)
3.  Updates to the HL/7 date conversion routines. The previous standard
"PKG",26,22,1,"PAH",1,1,62,0)
for HL/7 dates listed the date in YYYYMMDDHHMMSS format.  The degree of
"PKG",26,22,1,"PAH",1,1,63,0)
precision was listed as a separate parameter.  The new standard format is
"PKG",26,22,1,"PAH",1,1,64,0)
[YYYY[MM[DD[HH[MM[SS]]]]]-zzzz] where the bracketed sections are optional
"PKG",26,22,1,"PAH",1,1,65,0)
depending on the existence of the subsequent set. Also, if either the
"PKG",26,22,1,"PAH",1,1,66,0)
seconds or the minutes/seconds combination consist only of zeroes, the
"PKG",26,22,1,"PAH",1,1,67,0)
minutes (if zeroes) and seconds will be omitted.  The length of the
"PKG",26,22,1,"PAH",1,1,68,0)
date/time string specifies the degree of precision. In addition, a ZULU
"PKG",26,22,1,"PAH",1,1,69,0)
time offset (-zzzz) is also included.  This is the number of hours between
"PKG",26,22,1,"PAH",1,1,70,0)
Greenwich Mean Time and the local time where the date/time string was
"PKG",26,22,1,"PAH",1,1,71,0)
created.  Routines LA7DVM and LA7DVEXT have been modified to use the
"PKG",26,22,1,"PAH",1,1,72,0)
Kernel function ($$FMTHL7^XLFDT) to convert dates from FileMan to HL7
"PKG",26,22,1,"PAH",1,1,73,0)
instead of the HL/7 date conversion utility ($$HDATE^HLFNC).
"PKG",26,22,1,"PAH",1,1,74,0)
 
"PKG",26,22,1,"PAH",1,1,75,0)
4.  This patch will use TaskMan to transfer data to the CareVue system.
"PKG",26,22,1,"PAH",1,1,76,0)
Currently, TaskMan is not invoked. This could cause a problem verifying a
"PKG",26,22,1,"PAH",1,1,77,0)
result if an error was encountered in the CareVue routines.
"PKG",26,22,1,"PAH",1,1,78,0)
 
"PKG",26,22,1,"PAH",1,1,79,0)
5.  This patch changes the LA7D EDIT FOREIGN INTERFACE (Edit Foreign
"PKG",26,22,1,"PAH",1,1,80,0)
Interface Parameters) option.  It is now easier to add a Ward to a Foreign
"PKG",26,22,1,"PAH",1,1,81,0)
Computer System Name.
"PKG",26,22,1,"PAH",1,1,82,0)
 
"PKG",26,22,1,"PAH",1,1,83,0)
6.  This patch updates the Processing RTN field (#771) and the Response
"PKG",26,22,1,"PAH",1,1,84,0)
Processing RTN field (#772) of the Protocol file (#101) for the LA7D
"PKG",26,22,1,"PAH",1,1,85,0)
CARELIFE RESULTS and LA7D CARELIFE SERVER entries. The letter "Q" will be
"PKG",26,22,1,"PAH",1,1,86,0)
entered by the post-init routine LR266 if no entry exists.
"PKG",26,22,1,"PAH",1,1,87,0)
 
"PKG",26,22,1,"PAH",1,1,88,0)
NOIS - MIA-0600-30434
"PKG",26,22,1,"PAH",1,1,89,0)
   Reported an error, MISSING PROCESSING ROUTINE, when sending the HL7
"PKG",26,22,1,"PAH",1,1,90,0)
   message from VistA to CareVue.  The letter "Q" will be entered by
"PKG",26,22,1,"PAH",1,1,91,0)
   the post-init routine LR266 if no entry exists.
"PKG",26,22,1,"PAH",1,1,92,0)
NOIS - MWV-0900-21094
"PKG",26,22,1,"PAH",1,1,93,0)
   Reported that all CareVue ward patients tests were not being sent to
"PKG",26,22,1,"PAH",1,1,94,0)
   the CareVue system.  It was discovered that these patients were ones
"PKG",26,22,1,"PAH",1,1,95,0)
   who were transferred from a non-CareVue ward to a CareVue ward after
"PKG",26,22,1,"PAH",1,1,96,0)
   the tests were ordered. The patient was bypassed since the location
"PKG",26,22,1,"PAH",1,1,97,0)
   at time of order was not a CareVue ward.  This patch will correct
"PKG",26,22,1,"PAH",1,1,98,0)
   this by looking at the Ward Location field (#.1) in the Patient file
"PKG",26,22,1,"PAH",1,1,99,0)
   (#2) for the current location of the patient.
"PKG",26,22,1,"PAH",1,1,100,0)
 
"PKG",26,22,1,"PAH",1,1,101,0)
Associated NOIS
"PKG",26,22,1,"PAH",1,1,102,0)
===============
"PKG",26,22,1,"PAH",1,1,103,0)
MIA-0600-30434
"PKG",26,22,1,"PAH",1,1,104,0)
MWV-0900-21094
"PKG",26,22,1,"PAH",1,1,105,0)
 
"PKG",26,22,1,"PAH",1,1,106,0)
Test Sites
"PKG",26,22,1,"PAH",1,1,107,0)
==========
"PKG",26,22,1,"PAH",1,1,108,0)
Martinsburg, West Virginia
"PKG",26,22,1,"PAH",1,1,109,0)
 
"PKG",26,22,1,"PAH",1,1,110,0)
 
"PKG",26,22,1,"PAH",1,1,111,0)
ROUTINE SUMMARY
"PKG",26,22,1,"PAH",1,1,112,0)
=================
"PKG",26,22,1,"PAH",1,1,113,0)
The following is a list of routines included in patch LA*5.2*58. The
"PKG",26,22,1,"PAH",1,1,114,0)
second line of each routine now looks like:
"PKG",26,22,1,"PAH",1,1,115,0)
 
"PKG",26,22,1,"PAH",1,1,116,0)
<tab>;;5.2;AUTOMATED LAB INSTRUMENTS;**[patch list]**;Sep 27, 1994
"PKG",26,22,1,"PAH",1,1,117,0)
 
"PKG",26,22,1,"PAH",1,1,118,0)
                 CHECK^XTSUMBLD Results
"PKG",26,22,1,"PAH",1,1,119,0)
  Routine Name    Before Patch      After Patch    Patch List
"PKG",26,22,1,"PAH",1,1,120,0)
  ------------    ------------      -----------    ------------
"PKG",26,22,1,"PAH",1,1,121,0)
  LA7DEDT            3765930          5836716      53,58
"PKG",26,22,1,"PAH",1,1,122,0)
  LA7DLOC             NEW              553499      58
"PKG",26,22,1,"PAH",1,1,123,0)
  LA7DVM             6983644          6949969      53,58
"PKG",26,22,1,"PAH",1,1,124,0)
 
"PKG",26,22,1,"PAH",1,1,125,0)
 
"PKG",26,22,1,"PAH",1,1,126,0)
The following is a list of routines included in patch LR*5.2*266. The
"PKG",26,22,1,"PAH",1,1,127,0)
second line of each routine now looks like:
"PKG",26,22,1,"PAH",1,1,128,0)
 
"PKG",26,22,1,"PAH",1,1,129,0)
<tab>;;5.2;LAB SERVICE;**[patch list]**;Sep 27, 1994
"PKG",26,22,1,"PAH",1,1,130,0)
                 CHECK^XTSUMBLD Results
"PKG",26,22,1,"PAH",1,1,131,0)
  Routine Name    Before Patch      After Patch    Patch List
"PKG",26,22,1,"PAH",1,1,132,0)
  ------------    ------------      -----------    ------------
"PKG",26,22,1,"PAH",1,1,133,0)
  LR266               NEW             1529899      266
"PKG",26,22,1,"PAH",1,1,134,0)
  LRMIUT             3673249          3951633      254,266
"PKG",26,22,1,"PAH",1,1,135,0)
  LRVER3A           10780812         10508599      1,5,42,100,121
"PKG",26,22,1,"PAH",1,1,136,0)
                                                   153,190,221,254,
"PKG",26,22,1,"PAH",1,1,137,0)
                                                   263,266
"PKG",26,22,1,"PAH",1,1,138,0)
 
"PKG",26,22,1,"PAH",1,1,139,0)
 
"PKG",26,22,1,"PAH",1,1,140,0)
The documentation and distribution files for patches LA*5.2*58 and
"PKG",26,22,1,"PAH",1,1,141,0)
LR*5.2*266 may be obtained using FTP from the appropriate National VistA
"PKG",26,22,1,"PAH",1,1,142,0)
Support directory:
"PKG",26,22,1,"PAH",1,1,143,0)
 
"PKG",26,22,1,"PAH",1,1,144,0)
    OI FIELD OFFICE       FTP ADDRESS             DIRECTORY
"PKG",26,22,1,"PAH",1,1,145,0)
    ===============       ===========             ==========
"PKG",26,22,1,"PAH",1,1,146,0)
     HINES               152.129.1.110      [ANONYMOUS.SOFTWARE]
"PKG",26,22,1,"PAH",1,1,147,0)
     SALT LAKE CITY      152.131.2.1        [ANONYMOUS.SOFTWARE]
"PKG",26,22,1,"PAH",1,1,148,0)
     ALBANY              152.127.1.5        [ANONYMOUS.SOFTWARE]
"PKG",26,22,1,"PAH",1,1,149,0)
 
"PKG",26,22,1,"PAH",1,1,150,0)
File names are:
"PKG",26,22,1,"PAH",1,1,151,0)
 
"PKG",26,22,1,"PAH",1,1,152,0)
 ASCII FILE
"PKG",26,22,1,"PAH",1,1,153,0)
  LA_52_P58.KID     -  KIDS distribution for LA*5.2*58 and LR*5.2*266
"PKG",26,22,1,"PAH",1,1,154,0)
 
"PKG",26,22,1,"PAH",1,1,155,0)
 BINARY FILE
"PKG",26,22,1,"PAH",1,1,156,0)
  LA7DIG.PDF        -  CareVue Installation Guide
"PKG",26,22,1,"PAH",1,1,157,0)
 
"PKG",26,22,1,"PAH",1,1,158,0)
INSTALLATION INSTRUCTIONS
"PKG",26,22,1,"PAH",1,1,159,0)
=========================
"PKG",26,22,1,"PAH",1,1,160,0)
 
"PKG",26,22,1,"PAH",1,1,161,0)
  NOTE: This KIDS install does not place any options out of service
"PKG",26,22,1,"PAH",1,1,162,0)
        during the install and no user options are affected.
"PKG",26,22,1,"PAH",1,1,163,0)
        If KIDS prompts:
"PKG",26,22,1,"PAH",1,1,164,0)
  
"PKG",26,22,1,"PAH",1,1,165,0)
        "Want KIDS to Rebuild Menu Trees Upon Completion of
"PKG",26,22,1,"PAH",1,1,166,0)
         Install? YES// NO"
"PKG",26,22,1,"PAH",1,1,167,0)
        "Want KIDS to INHIBIT LOGONs during the install? YES// NO"
"PKG",26,22,1,"PAH",1,1,168,0)
        "Want to DISABLE Scheduled Options, Menu Options, and
"PKG",26,22,1,"PAH",1,1,169,0)
        Protocols? YES// NO"
"PKG",26,22,1,"PAH",1,1,170,0)
 
"PKG",26,22,1,"PAH",1,1,171,0)
        The site should answer "NO" to all three questions.
"PKG",26,22,1,"PAH",1,1,172,0)
            Note: You may not receive all three prompts at your site.  
"PKG",26,22,1,"PAH",1,1,173,0)
  
"PKG",26,22,1,"PAH",1,1,174,0)
     1. Review your mapped set.  If any of the routines listed in
"PKG",26,22,1,"PAH",1,1,175,0)
        patches LA*5.2*58 or LR*5.2*266 are mapped, they should be
"PKG",26,22,1,"PAH",1,1,176,0)
        removed from the mapped set at this time.
"PKG",26,22,1,"PAH",1,1,177,0)
 
"PKG",26,22,1,"PAH",1,1,178,0)
     2. From the Kernel Installation & Distribution System menu (XPD
"PKG",26,22,1,"PAH",1,1,179,0)
        MAIN), select the Installation menu option, then the option,
"PKG",26,22,1,"PAH",1,1,180,0)
        Load a Distribution. Enter your directory name and
"PKG",26,22,1,"PAH",1,1,181,0)
        LA_52_P58.KID at the Host File prompt.
"PKG",26,22,1,"PAH",1,1,182,0)
 
"PKG",26,22,1,"PAH",1,1,183,0)
     3. The patch has now been loaded into a Transport global on
"PKG",26,22,1,"PAH",1,1,184,0)
        your system. You now need to use KIDS to install the 
"PKG",26,22,1,"PAH",1,1,185,0)
        Transport global.
"PKG",26,22,1,"PAH",1,1,186,0)
 
"PKG",26,22,1,"PAH",1,1,187,0)
        On the KIDS menu, under the 'Installation' menu, use the 
"PKG",26,22,1,"PAH",1,1,188,0)
        following options:
"PKG",26,22,1,"PAH",1,1,189,0)
           Print Transport Global
"PKG",26,22,1,"PAH",1,1,190,0)
           Compare Transport Global to Current System
"PKG",26,22,1,"PAH",1,1,191,0)
           Verify Checksums in Transport Global
"PKG",26,22,1,"PAH",1,1,192,0)
           Backup a Transport Global
"PKG",26,22,1,"PAH",1,1,193,0)
 
"PKG",26,22,1,"PAH",1,1,194,0)
     4. It is recommended that this release be installed during off
"PKG",26,22,1,"PAH",1,1,195,0)
        peak hours.  To prevent a possible problem with the tasking
"PKG",26,22,1,"PAH",1,1,196,0)
        of the next days laboratory orders, do not install this package
"PKG",26,22,1,"PAH",1,1,197,0)
        at the same time as the following nightly tasked jobs:
"PKG",26,22,1,"PAH",1,1,198,0)
 
"PKG",26,22,1,"PAH",1,1,199,0)
              LRTASK ROLLOVER
"PKG",26,22,1,"PAH",1,1,200,0)
              LRTASK NIGHTLY
"PKG",26,22,1,"PAH",1,1,201,0)
              LRTASK CONJAM
"PKG",26,22,1,"PAH",1,1,202,0)
              LRTASK CUM
"PKG",26,22,1,"PAH",1,1,203,0)
 
"PKG",26,22,1,"PAH",1,1,204,0)
     5. No options need to be placed out of service.
"PKG",26,22,1,"PAH",1,1,205,0)
 
"PKG",26,22,1,"PAH",1,1,206,0)
     6. Installation time is less than 2 minutes during off peak 
"PKG",26,22,1,"PAH",1,1,207,0)
        hours and less than 5 minutes during peak hours
"PKG",26,22,1,"PAH",1,1,208,0)
 
"PKG",26,22,1,"PAH",1,1,209,0)
     7. From the 'Installation Menu' of the KIDS menu, run the 
"PKG",26,22,1,"PAH",1,1,210,0)
        option 'Install Package(s)' Select the package 'LA*5.2*58'
"PKG",26,22,1,"PAH",1,1,211,0)
        and proceed with the install. When prompted 'Want to 
"PKG",26,22,1,"PAH",1,1,212,0)
        DISABLE Scheduled Options, Menu Options, and Protocols? 
"PKG",26,22,1,"PAH",1,1,213,0)
        YES//', choose 'NO'.
"PKG",26,22,1,"PAH",1,1,214,0)
 
"PKG",26,22,1,"PAH",1,1,215,0)
     8. This patch updates the Processing RTN field (#771) and the
"PKG",26,22,1,"PAH",1,1,216,0)
        Response Processing RTN field (#772) of the Protocol file
"PKG",26,22,1,"PAH",1,1,217,0)
        (#101) for the LA7D CARELIFE RESULTS and LA7D CARELIFE SERVER
"PKG",26,22,1,"PAH",1,1,218,0)
        entries. The letter "Q" will be entered by the post-init
"PKG",26,22,1,"PAH",1,1,219,0)
        routine LR266 if no entry exists.  The LR266 routine will
"PKG",26,22,1,"PAH",1,1,220,0)
        automatically be deleted after the patch is installed.
"PKG",26,22,1,"PAH",1,1,221,0)
 
"PKG",26,22,1,"PAH",1,1,222,0)
     9. If any routines were unmapped as part of step 2, they 
"PKG",26,22,1,"PAH",1,1,223,0)
        should be returned to the mapped set once the installation 
"PKG",26,22,1,"PAH",1,1,224,0)
        has run to completion.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","LR266")
0^3^B2026349
"RTN","LR266",1,0)
LR266 ;DALOI/RLM-PATCH 266 POST-INIT ROUTINE ;1/1/98
"RTN","LR266",2,0)
 ;;5.2;LAB SERVICE;**266**;Sep 27, 1994
"RTN","LR266",3,0)
 ; Reference to file 101 supported by IA #3264
"RTN","LR266",4,0)
 ; Reference to $$FIND^DIC supported by IA #2051
"RTN","LR266",5,0)
 ; Reference to GETS^DIQ supported by IA #2056
"RTN","LR266",6,0)
 K LRERR,FDA,DIERR
"RTN","LR266",7,0)
 F LRI="LA7D CARELIFE RESULTS","LA7D CARELIFE SERVER" D
"RTN","LR266",8,0)
  . S LRIEN=$$FIND1^DIC(101,,"X",LRI,,,"LRERR")
"RTN","LR266",9,0)
  . I $D(LRERR) W !,"The ",LRI," entry does not exist in file 101" Q
"RTN","LR266",10,0)
  . D GETS^DIQ(101,LRIEN,771,,"LRRSLT","LRERR")
"RTN","LR266",11,0)
  . I LRRSLT(101,LRIEN_",",771)="" S DIE=101,DA=LRIEN,DR="771////Q" D ^DIE
"RTN","LR266",12,0)
  . I LRRSLT(101,LRIEN_",",771)]"" W !,"Field 771 for ",LRI," is defined, no action taken."
"RTN","LR266",13,0)
  . D GETS^DIQ(101,LRIEN,772,,"LRRSLT","LRERR")
"RTN","LR266",14,0)
  . I LRRSLT(101,LRIEN_",",772)="" S DIE=101,DA=LRIEN,DR="772////Q" D ^DIE
"RTN","LR266",15,0)
  . I LRRSLT(101,LRIEN_",",771)]"" W !,"Field 772 for ",LRI," is defined, no action taken."
"RTN","LR266",16,0)
 K DA,DIE,DIERR,DR,FDA,LRERR,LRI,LRIEN,LRRSLT
"RTN","LR266",17,0)
 Q
"RTN","LR266",18,0)
ZEOR ;LR266
"RTN","LRMIUT")
0^2^B5576607
"RTN","LRMIUT",1,0)
LRMIUT ;SLC/CJS/BA/AVAMC/REG - MICROBIOLOGY UTILITIES ; 10/9/87  16:19 ;
"RTN","LRMIUT",2,0)
 ;;5.2;LAB SERVICE;**254,266**;Sep 27, 1994
"RTN","LRMIUT",3,0)
 ;
"RTN","LRMIUT",4,0)
 ; Reference to ^DIC(42 supported by IA #10039
"RTN","LRMIUT",5,0)
 ; Reference to ^%ZTLOAD supported by DBIA #10063
"RTN","LRMIUT",6,0)
 ; Reference to ^DIC supported by DBIA #10006
"RTN","LRMIUT",7,0)
 ; Reference to IN5^VADPT supported by DBIA #10061
"RTN","LRMIUT",8,0)
 ;
"RTN","LRMIUT",9,0)
STF ;from LRMIEDZ2, LRMISTF1
"RTN","LRMIUT",10,0)
 I $D(LRSB),$L(LRSB),$D(^LR(LRDFN,"MI",LRIDT,LRSB)) S D=$P(^(LRSB),U),^LRO(68,LRAA,1,LRAD,"AC",LRSB,LRAN)=DUZ_U_D
"RTN","LRMIUT",11,0)
 S:'$D(D) D=0 D TSKM:$P(LRPARAM,U,5)&D
"RTN","LRMIUT",12,0)
 ; CareVue supported ward - now tasking routine for CareVue-PWC-10/00
"RTN","LRMIUT",13,0)
 I $G(D)>0 D
"RTN","LRMIUT",14,0)
 . N I,LR7DLOC D IN5^VADPT S LR7DLOC=$G(^DIC(42,+$P($G(VAIP(5)),"^"),44))
"RTN","LRMIUT",15,0)
 . Q:'LR7DLOC  D:$D(^LAB(62.487,"C",LR7DLOC))   ;good ward location
"RTN","LRMIUT",16,0)
 .. S LRH="",LRSS="MI",ZTRTN="^LA7DLOC",ZTIO="",ZTDTH=$H
"RTN","LRMIUT",17,0)
 .. S ZTSAVE("L*")="",ZTDESC="LAB AUTOMATION CAREVUE SUPPORTED WARDS"
"RTN","LRMIUT",18,0)
 .. D ^%ZTLOAD
"RTN","LRMIUT",19,0)
 .. K ZTRTN,ZTDTH,ZTSAVE,ZTIO,ZTSK,ZTDESC,ZTQUEUED,ZTREQ
"RTN","LRMIUT",20,0)
 Q
"RTN","LRMIUT",21,0)
TSKM ;from LRMINEW1
"RTN","LRMIUT",22,0)
 S LRH="",LRSS="MI",LRWRDVEW="",ZTRTN="DQ^LRTP",ZTIO="",ZTDTH=$H,ZTSAVE("L*")="" D ^%ZTLOAD
"RTN","LRMIUT",23,0)
 K LRH,LRWRDVEW,ZTSK,ZTRTN,ZTIO,ZTDTH,ZTSAVE
"RTN","LRMIUT",24,0)
 Q
"RTN","LRMIUT",25,0)
LRAA ;from LRMINEW, LRMIPLOG, LRMISEZ, LRMISTF, LRMIVER
"RTN","LRMIUT",26,0)
 K DIC S DIC=68,DIC(0)="AEMOQ",DIC("S")="I $P(^(0),U,2)=""MI""" D ^DIC
"RTN","LRMIUT",27,0)
 S LRAA=+Y K DIC
"RTN","LRMIUT",28,0)
 Q
"RTN","LRMIUT",29,0)
LRAN ;from LRMINEW1, LRMIPLOG, LRMISTF1, LRMIVER1
"RTN","LRMIUT",30,0)
 K LRAN F I=0:0 R !,"Enter #'s: ",X:DTIME D:X'="?" NUMS Q:X=""!(X=U)  I X="?" W !,"Enter a string of numbers separated with , . ^ or space,",!,"or a range of numbers, e.g. 50-75.  You may enter more than one line."
"RTN","LRMIUT",31,0)
 Q
"RTN","LRMIUT",32,0)
NUMS S D=$S(X[",":",",X[".":".",X[U:U,1:" ") F I=1:1 S LRAN=$P(X,D,I) D:LRAN["-" RANGE Q:LRAN=""  S LRAN(+LRAN)=""
"RTN","LRMIUT",33,0)
 Q
"RTN","LRMIUT",34,0)
RANGE F R=$P(LRAN,"-"):1:$P(LRAN,"-",2) S LRAN(R)=""
"RTN","LRMIUT",35,0)
 K R Q
"RTN","LRVER3A")
0^1^B22673375
"RTN","LRVER3A",1,0)
LRVER3A ;SLC/CJS/DALOI/FHS - DATA VERIFICATION ;8/11/97
"RTN","LRVER3A",2,0)
 ;;5.2;LAB SERVICE;**1,5,42,100,121,153,190,221,254,263,266**;Sep 27, 1994
"RTN","LRVER3A",3,0)
 ;Also contains LRORFLG to restrict multiple OERR alerts (VER+2)
"RTN","LRVER3A",4,0)
 ; Reference to ^DIC(42 supported by IA #10039
"RTN","LRVER3A",5,0)
 ; Reference to ^%ZTLOAD supported by DBIA #10063
"RTN","LRVER3A",6,0)
 ; Reference to IN5^VADPT supported by DBIA #10061
"RTN","LRVER3A",7,0)
 ; Reference to $$NOW^XLFDT supported by DBIA #10103
"RTN","LRVER3A",8,0)
 ;
"RTN","LRVER3A",9,0)
VER ;Call with L ^LR(LRDFN,LRSS,LRIDT) from LRGV2, LRGVG1, LRSTUF1, LRSTUF2, LRVR3
"RTN","LRVER3A",10,0)
 Q:'$O(LRSB(0))
"RTN","LRVER3A",11,0)
 N LRVCHK,LRORTST,LRORFLG,LRT
"RTN","LRVER3A",12,0)
 S LRORU3=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,.3)),(LRAOD,LRACD)=$P(^(0),U,3)
"RTN","LRVER3A",13,0)
 S LRACD=$S($D(^LRO(68,LRAA,1,LRAD,1,LRAN,9)):^(9),1:LRACD)
"RTN","LRVER3A",14,0)
 S:'$D(^LRO(68,LRAA,1,LRACD,1,LRAN,0))#2 LRACD=LRAD
"RTN","LRVER3A",15,0)
 S LRAOD=$S($D(^LRO(68,LRAA,1,LRAOD,1,LRAN,0))#2:LRAOD,1:LRAD)
"RTN","LRVER3A",16,0)
 I '$G(LRFIX) S LRNOW=$$NOW^XLFDT,$P(^LR(LRDFN,LRSS,LRIDT,0),U,3,4)=LRNOW_U_DUZ
"RTN","LRVER3A",17,0)
 K A2 I '$D(PNM) S LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3) D PT^LRX S:PNM="" PNM="NONAME"
"RTN","LRVER3A",18,0)
 N LRT S LRT=0 F  S LRT=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRT)) Q:LRT<.5  S:$P(^(LRT,0),U,5)="" A2(LRT)=1 I $D(^TMP("LR",$J,"VTO",LRT)) S LRVCHK=+^(LRT) D
"RTN","LRVER3A",19,0)
 . I $S(LRVCHK<1:1,$D(LRSB(LRVCHK))#2:1,1:0) D
"RTN","LRVER3A",20,0)
 . . I $D(LRSB(LRVCHK)) Q:$P(LRSB(LRVCHK),U)=""
"RTN","LRVER3A",21,0)
 . . I LRVCHK<1,$L($P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRT,0),U,6)) Q
"RTN","LRVER3A",22,0)
 . . S $P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,+LRT,0),U,4)=$S($D(DUZ)#2:DUZ,1:""),$P(^(0),U,5)=LRNOW,$P(^(0),U,6)="",$P(^(0),U,8)=$G(LRCDEF)
"RTN","LRVER3A",23,0)
 . . S LRORTST(LRT)=""
"RTN","LRVER3A",24,0)
 . . I LRACD'=LRAD D
"RTN","LRVER3A",25,0)
 . . . Q:'$D(^LRO(68,LRAA,1,LRACD,1,LRAN,4,+LRT,0))  D
"RTN","LRVER3A",26,0)
 . . . . S $P(^LRO(68,LRAA,1,LRACD,1,LRAN,4,+LRT,0),U,4)=$S($D(DUZ)#2:DUZ,1:""),$P(^(0),U,5)=LRNOW,$P(^(0),U,6)="",$P(^(0),U,8)=$G(LRCDEF)
"RTN","LRVER3A",27,0)
 . . I $P($G(LRPARAM),U,14),$P($G(^LRO(68,+LRAA,0)),U,16) S ^LRO(68,"AA",LRAA_"|"_LRAD_"|"_LRAN_"|"_LRT)=""
"RTN","LRVER3A",28,0)
 . . K A2(LRT)
"RTN","LRVER3A",29,0)
 . . I +$G(LRDPF)=2,$$VER^LR7OU1<3 D
"RTN","LRVER3A",30,0)
 . . . N I,Y
"RTN","LRVER3A",31,0)
 . . . S Y=LRNOW,I=LRT D V^LROR ;OE/RR 2.5
"RTN","LRVER3A",32,0)
 ;-K ZZCARE,ZRECORD I $D(^LR(LRDFN,.3)),^LR(LRDFN,.3)'="" D FCS  ; CJS/MPLS 12-4-91 LINK TO CIS  ; CJS/MPLS 3-16-92 KILL LOCAL VARIABLES
"RTN","LRVER3A",33,0)
 ;-I $P(^LR(LRDFN,0),U,2)=2 I '$D(ZZCARE) S ZRECORD=0,ZRECORD=$O(^SC("C",LRLLOC,ZRECORD)) I ZRECORD'="",$D(^LRTXFCS(5000024,1,618001,"B",ZRECORD)) D FCS  ; CJS/MPLS 3-16-92 LINE ADDED TO CHECK IF REQUESTING LOCATION IS CAREVUE SUPPORTED  ++RG
"RTN","LRVER3A",34,0)
 S D1=1,X=0 F  S X=$O(^TMP("LR",$J,"TMP",X)) Q:X<1  S LRT=+^(X) I $D(LRM(X)) D REQ
"RTN","LRVER3A",35,0)
 S:$D(^LRO(69,LRODT,1,LRSN,0)) ^(3)=$S($D(^(3)):+^(3),1:LRNOW) S:'$P(^(3),U,2) $P(^(3),U,2)=LRNOW
"RTN","LRVER3A",36,0)
 I D1,'$D(A2) S:'$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),U,4) $P(^(3),U,4)=LRNOW S ^LRO(68,LRAA,1,LRAD,1,"AC",LRNOW,LRAN)=""
"RTN","LRVER3A",37,0)
 ; Class I CareVue routine TASKED if CareVue ward - pwc/10-2000
"RTN","LRVER3A",38,0)
 D
"RTN","LRVER3A",39,0)
 . N I,LR7DLOC D IN5^VADPT S LR7DLOC=$G(^DIC(42,+$P($G(VAIP(5)),"^"),44))
"RTN","LRVER3A",40,0)
 . Q:'LR7DLOC  D:$D(^LAB(62.487,"C",LR7DLOC))      ;good ward location
"RTN","LRVER3A",41,0)
 . . S ZTRTN="^LA7DLOC",ZTDESC="LAB AUTOMATION CAREVUE SUPPORTED WARDS"
"RTN","LRVER3A",42,0)
 . . S ZTIO="",ZTDTH=$H,ZTSAVE("L*")="" D ^%ZTLOAD
"RTN","LRVER3A",43,0)
 . . K ZTSAVE,ZTSK,ZTRTN,ZTIO,ZTDTH,ZTDESC,ZTREQ,ZTQUEUED
"RTN","LRVER3A",44,0)
 ;D ^VEICVLOC ;* PLS 6/3/99 -For HL7 interface
"RTN","LRVER3A",45,0)
 I D1,'$D(A2),LRAD'=LRACD S:'$P(^LRO(68,LRAA,1,LRACD,1,LRAN,3),U,4) $P(^(3),U,4)=LRNOW S ^LRO(68,LRAA,1,LRACD,1,"AC",LRNOW,LRAN)=""
"RTN","LRVER3A",46,0)
 D XREF I $D(^LRO(68,LRAA,.2))'[0 X ^(.2)
"RTN","LRVER3A",47,0)
 N CORRECT S:$G(LRCORECT) CORRECT=1 D NEW^LR7OB1(LRODT,LRSN,"RE",,.LRORTST)
"RTN","LRVER3A",48,0)
 L -^LR(LRDFN,LRSS,LRIDT) ;unlock
"RTN","LRVER3A",49,0)
 Q
"RTN","LRVER3A",50,0)
XREF ;from COM1^LRVER4 and VER^LRVER3A
"RTN","LRVER3A",51,0)
 I +$G(LRDPF)=2,$$VER^LR7OU1<3 D EN^LROR(LRAA,LRAD,LRAN) ;OE/RR 2.5
"RTN","LRVER3A",52,0)
 I LRDPF=62.3 S ^LRO(68,LRAA,1,LRAD,1,"AD",DT,LRAN)="" Q
"RTN","LRVER3A",53,0)
 S LRPRAC=$$PRAC^LRX($P(^LR(LRDFN,LRSS,LRIDT,0),U,10)) ;get doc name
"RTN","LRVER3A",54,0)
 S ^LRO(68,LRAA,1,LRAD,1,"AD",DT,LRAN)=""
"RTN","LRVER3A",55,0)
 S ^LRO(69,9999999-LRIDT\1,1,"AL",$E(LRLLOC,1,15),$E(PNM,1,20),LRDFN)=""
"RTN","LRVER3A",56,0)
 S ^LRO(69,9999999-LRIDT\1,1,"AP",LRPRAC,$E(PNM,1,20),LRDFN)=""
"RTN","LRVER3A",57,0)
 S ^LRO(69,DT,1,"AN",$E(LRLLOC,1,15),LRDFN,LRIDT)=""
"RTN","LRVER3A",58,0)
 S ^LRO(69,DT,1,"AR",$E(LRLLOC,1,15),$E(PNM,1,20),LRDFN)=""
"RTN","LRVER3A",59,0)
 S ^LRO(69,"AN",$E(LRLLOC,1,20),LRDFN,LRIDT)=""
"RTN","LRVER3A",60,0)
 Q:'$P(LRPARAM,U,3)
"RTN","LRVER3A",61,0)
TSKM F KK="LRDFN","LRAA","LRAOD","LRAD","LRAN","LRIDT","LRSS","LRLLOC","LRSN","LRODT" S ZTSAVE(KK)=""
"RTN","LRVER3A",62,0)
 N %X S ZTRTN="DQ^LRTP",ZTIO="",ZTDTH=$H,ZTDESC="LAB INTERIM REPORTS" D ^%ZTLOAD
"RTN","LRVER3A",63,0)
 K KK,ZTSK,ZTRTN,ZTDTH,ZTSAVE,ZTIO Q
"RTN","LRVER3A",64,0)
REQ ;
"RTN","LRVER3A",65,0)
 Q:$P($G(LRSB(X)),U)="comment"
"RTN","LRVER3A",66,0)
 I $D(LRSB(X)),$P(LRSB(X),U)="canc" Q
"RTN","LRVER3A",67,0)
 I $D(LRSB(X)),$P(LRSB(X),U)'["pending" Q
"RTN","LRVER3A",68,0)
 I $L($P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,4,+LRT,0)),U,6)) Q
"RTN","LRVER3A",69,0)
 S:'$G(LRALERT) LRALERT=$S($G(LROUTINE):LROUTINE,1:9)
"RTN","LRVER3A",70,0)
 S D1=0 N A,LRPPURG
"RTN","LRVER3A",71,0)
 I $D(LRSB(X)),LRSB(X)["pending",$D(^LRO(68,LRAA,1,LRAD,1,LRAN,4,+LRT,0))#2 D  G REQ1
"RTN","LRVER3A",72,0)
 . S $P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,+LRT,0),U,4)="",$P(^(0),U,5,6)="^",$P(^(0),U,9)=+$G(LRM(X,"P"))
"RTN","LRVER3A",73,0)
 I '$D(LRSB(X)),'$L($P($G(^LR(LRDFN,"CH",LRIDT,X)),U)) S $P(^(X),U)="pending"
"RTN","LRVER3A",74,0)
 I '$D(LRSB(X)),$P($G(^LR(LRDFN,"CH",LRIDT,X)),U)'="pending" Q
"RTN","LRVER3A",75,0)
 I $D(^LRO(68,LRAA,1,LRAD,1,LRAN,4,+LRT,0))#2 S $P(^(0),U,4,5)="^",A=$P(^(0),U,2) I A>49 S $P(^(0),U,2)=$S(A=50:9,1:A-50)
"RTN","LRVER3A",76,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,4,+LRT,0))#2 D
"RTN","LRVER3A",77,0)
 . S ^LRO(68,LRAA,1,LRAD,1,LRAN,4,"B",+LRT,+LRT)=""
"RTN","LRVER3A",78,0)
 . S LRPPURG=$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,4,+$G(LRM(X,"P")),0)),U,2)
"RTN","LRVER3A",79,0)
 . S:'LRPPURG LRPPURG=$S($G(LRALERT):+LRALERT,1:9)
"RTN","LRVER3A",80,0)
 . S ^LRO(68,LRAA,1,LRAD,1,LRAN,4,+LRT,0)=+LRT_U_LRPPURG,$P(^(0),U,9)=+$G(LRM(X,"P"))
"RTN","LRVER3A",81,0)
 . S $P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0),U,3)=+LRT,$P(^(0),U,4)=$P(^(0),U,4)+1 Q
"RTN","LRVER3A",82,0)
REQ1 ;
"RTN","LRVER3A",83,0)
 Q:LRACD=LRAD  I $D(^LRO(68,LRAA,1,LRACD,1,LRAN,4,+LRT,0))#2,'$L($P(^(0),U,6)) S ^(0)=$P(^(0),U,1,2),$P(^(0),U,7)=1,$P(^(0),U,9)=+$G(LRM(X,"P"))
"RTN","LRVER3A",84,0)
 K CNT,LRAMC Q
"RTN","LRVER3A",85,0)
FCS ; SET UP FOR FOREIGN COMPUTER SYSTEM  ; CJS/MPLS 12-4-91 LINK TO CIS
"RTN","LRVER3A",86,0)
 ;-S:'$D(ZRECORD) ZZCARE=1 S:$D(ZRECORD) ZTSAVE("LRLLOC")=""   ; CJS/MPLS 3-18-92 SET ZZCARE IF PATIENT IN ICU'S, SET ZTSAVE IF TEST REQUESTED FROM PAR/OR
"RTN","LRVER3A",87,0)
 ;-F KK="LRDFN","LRIDT","DFN" S ZTSAVE(KK)=""
"RTN","LRVER3A",88,0)
 ;-S ZTRTN="EN^LAFCCVX2",ZTIO="",ZTDTH=$H D ^%ZTLOAD
"RTN","LRVER3A",89,0)
 ;-Q
"VER")
8.0^22.0
**END**
**END**

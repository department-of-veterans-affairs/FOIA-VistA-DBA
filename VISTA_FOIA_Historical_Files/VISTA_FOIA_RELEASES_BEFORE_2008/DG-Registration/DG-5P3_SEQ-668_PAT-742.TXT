$TXT Created by KOPP,TERRY at PASVFF.FO-ALBANY.MED.VA.GOV  (KIDS) on Friday, 07/13/07 at 16:35
=============================================================================
Run Date: JUL 16, 2007                     Designation: DG*5.3*742
Package : DG - REGISTRATION                   Priority: EMERGENCY
Version : 5.3       SEQ #668                    Status: Released
                  Compliance Date: JUL 17, 2007
=============================================================================

Associated patches: (v)DG*5.3*653  <<= must be installed BEFORE `DG*5.3*742'

Subject: OEF/OIF RELATED CHANGES

Category: 
  - Routine

Description:
============

 ************************* A T T E N T I O N *****************************
 -------------------------------------------------------------------------
 This patch provides the functionality necessary to allow cleanup of the 
 OEF/OIF data corruption introduced by HEC patch IVMB*2.0*860.  This 
 patch must be installed prior to the HEC running their data cleanup patch, 
 IVMB*2.0*918.  It is imperative that all sites install this 
 patch as soon possible to enable HEC to provide a cleanup for the 
 corrupted data.  
  
 I. OVERVIEW
  
 This patch corrects a problem found after the implementation 
 of the changes and enhancements to the Registration V. 5.3 package that were
 released in patches DG*5.3*673 and DG*5.3*689 in support of the Operation 
 Enduring & Iraqi Freedom (OEF/OIF) initiative.  This problem 
 is related to the inability to delete OEF/OIF episodes on VistA.
  
  
 II. ASSOCIATED REMEDY TICKETS & NEW SERVICE REQUESTS
  
 The following section lists the Remedy tickets and/or New Service Requests
 associated with this patch.
  
 1. Associated Remedy Tickets:
    -----------------------------------------
    HD0000000171777 Unable to receive OEF/OIF deletion from HEC
    
 2. Associated New Service Request(s):
    -----------------------------------------
    NONE 
  
 III. FUNCTIONAL OVERVIEW
  
 This patch corrects the following problem:
  
 1. If a veteran's OEF/OIF episode is deleted at HEC, and that is the only
    OEF/OIF episode recorded for the veteran, the episode is NOT deleted
    from the site when the HL7 Z11 message is loaded at the site.
    Remedy Ticket reference: HD0000000171777 
    Problem: This problem is caused by the fact that if NO OEF/OIF data is
              detected in a Z11 HL7 message received at a site, the 
              OEF/OIF store logic is not executed, so nothing relating to 
              OEF/OIF at the site is changed.
    Solution: Change the update logic associated with the receipt of the 
               Z11 HL7 message on VistA to ALWAYS execute the OEF/OIF 
               logic, regardless of whether or not OEF/OIF data is being 
               received.
  
               
 IV. TECHNICAL COMPONENTS
  
 The following section describes the technical components being 
 exported with this patch.
  
 1. The following ROUTINE(s) will be added/modified.
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
    OLD CHECKSUM METHOD RESULTS:
  
      <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                             CHECK^XTSUMBLD results
  
  Routine name   Before Patch   After Patch          Patch List
  ============   ============   ===========      ===================
  DGENUPL7           10483148      11171209      232,367,397,417,379
                                                 431,513,628,673,653
                                                        742
                 # of new routines:  0
             # of routines changed:  1
  total # of routines in the patch:  1
  
  
 V. INSTALLATION INSTRUCTIONS
  
  * Environment Check:
  
     Programmer access is required for installing this patch.  Prior to 
     installation, the installer must ensure the DUZ(0) node of the DUZ
     array is set to the "@" symbol.
  
  * Users On the System: 
  
     This patch may be installed with users on the system.
  
  * Software Installation Time:
  
     The estimated installation time is less than 5 minutes during off peak
     hours. 
  
  
  Installation Steps:
  ===================
  
   1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
      the KIDS distribution included with this message.
  
   2. From the 'Kernel Installation & Distribution System' menu, select the
      Installation menu.
  
   3. From this menu, you may now elect to use the following options (when
      prompted for INSTALL NAME, enter DG*5.3*742).
  
      a. Backup a Transport Global - This option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any changes such as DDs or templates.
  
      b. Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch is
         installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
  
      c. Verify Checksums in Transport Global - This option will allow you
         to ensure the integrity of the routines that are in the transport
         global.
  
      d. Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
   4. Use the Install Package(s) option and select package DG*5.3*742.
  
   5. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
      YES//', it is recommended you answer NO.
  
   6. When prompted to 'Want to DISABLE Scheduled Options, Menu Options,
      and Protocols? YES//', it is recommended you answer NO.
 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;REGISTRATION;**[Patch List]**;Aug 13,1993;Build 7

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DGENUPL7
    Before: B29968061   After: B32019142  **232,367,397,417,379,431,513,
                                           628,673,653,742**
 Description of Changes:
  Changes (added a line of code and a comment):
   
  DGENUPL7.INT.1                |"PATVEE"|DGENUPL7.INT.1  
  **************************************************************************
  DGENUPL7.INT.1
   +102       .;Since HEC is authoritative source, If no OEF/OIF data in 
  Z11, set count to 0 so existing data in VistA will be deleted.
   +103       .I '$D(DGOEIF) S DGOEIF("COUNT")=0
  ...................
  |"PATVEE"|DGENUPL7.INT.1
  **************************************************************************

 
Routine list of preceding patches: 653

=============================================================================
User Information:
Entered By  : KOPP,TERRY M                  Date Entered  : JAN 10, 2007
Completed By: MORGAN,BRIAN                  Date Completed: JUL 16, 2007
Released By : HEUER,CINDY                   Date Released : JUL 16, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT


=============================================================================
Run Date: OCT 26, 2006                     Designation: PSA*3*54
Package : PSA - DRUG ACCOUNTABILITY           Priority: Mandatory
Version : 3        SEQ #45                      Status: Released
                  Compliance Date: NOV 26, 2006
=============================================================================

Associated patches: (v)PSA*3*48    <<= must be installed BEFORE `PSA*3*54'
                    (v)PSA*3*49    <<= must be installed BEFORE `PSA*3*54'

Subject: MCKESSON VSN MATCHING AND DRUG DESCRIPTIONS

Category: 
  - Routine
  - Enhancement (Mandatory)

Description:
============

 This patch is addressing the following problems:
  
 Dispense Unit per Order Unit (DUOU) during processing. PSA*3*48 initiated
 a temporary plan to aid sites in starting Drug Accountability by shipping
 in a side file from the vendor and display DUOU for matching drugs when
 possible during processing. It has been requested that the vendor drug
 description also be included to aid in matching items to drugs.
   
 2. HD 118133. The sites have requested that the verification screens also 
 display the vendor DUOU and drug description.
  
 Both processing and verification screens will have the following 
 information line displayed. The information displayed depends on the 
 availability of vendor information uploaded.
  
 ========================= 
 SAMPLE OF THE ADDED LINE: 
 ========================= 
 There are two versions of the display line added.
 1)      The line if the drug information is available
  PV-Drug-Descrip:    ACETAM? TB #4    ROX RN4X25        PV-DUOU: 100
  
 2)      The line if the drug information is not available.
 PV-Drug-Descrip:    Not available. Item is OTC or new after May 2006.
  
 ===========================
 SAMPLE of modified screen:
 ===========================
 The same line of information is presented in both processing and 
 verifying screens.
  
 Order#: C563685000  Invoice#: 7246433050  Invoice Date: Sep 07, 2005
 --------------------------------------------------------------------------
  
 1  ACETAMINOPHEN, CODEINE 60MG TAB (Controlled Substance)
 Qty Invoiced: 10                      UPC: 300054802324
 Order Unit  : TU                      NDC: 00054-8023-24
 Unit Price  : $9.60                   VSN: 1334150
  
 PV-Drug-Descrip:    ACETAM? TB #4    ROX RN4X25        PV-DUOU: 100
  
 Dispense Units: TAB
 Dispense Units Per Order Unit: 2000
  
 ASSOCIATED REMEDY:
 ==================
 1. HD112456 Reinstate XTMP VSN-DUOU display and include drug description.
 2. HD118133 Provide vendor drug description and DUOU on verification
 screens.
  
 ASSOCIATED NSR(s):
 ==================
 N/A                   
  
 PARTICIPATING TEST SITES:
 =========================
 HEARTLAND EAST
 HUNTINGTON
 OKLAHOMA CITY
  
 REMEDY OVERVIEW:
 ================
 1. HD112456 Reinstate XTMP VSN-DUOU display and include drug description.
  
  Problem:
  --------
  The same drug is being ordered by divisions but in different quantities. 
  PSA 3 48 enabled a temporary mapping of Mckesson VSNs to DUOUs using a 
  temporary global. It was to aid sites getting drug accountability setup. 
  The temporary mapping timed out after six months and sites are requesting
  a newer longer lasting mapping be established. 
  
  Resolution:
  -----------  
  A new mapping ^XTMP global will be built by postinit routines. The global
  will remain on the system and provide mapping capability for one year.
  
 2. HD118133 Provide vendor drug description and DUOU on verification
 screens.
  
  Problem:
  ------- 
  The verifying screens need the same additional information that will be 
  displayed in the processing screens regarding vendor drug description and
  DUOU.
  
  Resolution:
  ----------- 
  The software will now provide the vendor's drug description and DUOU if 
  the item is not an over the counter (OTC) item or newer to the vendor
  than May 2006 when the update table was provided for this patch.
  
  The item verifying screens will have the same information added as 
  illustrated by the processing screens in problem 1.
  
 Technical:
 ========== 
 1. HD112456 Reinstate Mckesson Vendor Stock Number (VSN) to Dispense 
 Units per Order Unit (DUOU) mapping.
  
 a) The routine PSAP54 will read the MCKESSON_UPDATE.DAT file and create
    the ^XTMP("PSAVSN" global.
  
 b) The routine PSAUTL1 has been modified to also display the vendor drug 
    description. The postinit routine PSAP54* will establish the 
    ^XTMP("PSAVSN",VSN)=DUOU^DRUG DESCRIPTION global as it had been used 
    previously. The global holds all Mckesson inventory items as of May 
    2006.
  
 2. HD118133 The display of vendor drug description and DUOU are needed
 when verifying invoice items.
  
   The routine PSAUTL4 has been modified to take the item's VSN and look
   into the new ^XTMP("PSAVSN") global as established by #1 above for vendor 
   information. It will display appropriate information in accordance with
   the presence of the vendor's information.
  
 SOFTWARE DISTRIBUTION:
 ======================
 The software for this patch is being distributed via a host file.
  
 Two files are required for this installation:
  
 PSA_3_54.KID 
 MCKESSON_UPDATE.DAT
  
 Sites may retrieve the KIDS build and .dat file in one of the following
 ways:
    
  (1) The preferred method is to FTP the files using ASCII mode from
      download.vista.med.va.gov which will transmit the files from the 
      first available FTP server.
    
  (2) Sites may elect to retrieve the files directly by using FTP from 
      the ANONYMOUS.SOFTWARE directory from a specific server as follows:
  
     Albany                     ftp.fo-albany.med.va.gov
     Hines                      ftp.fo-hines.med.va.gov
     Salt Lake City             ftp.fo-slc.med.va.gov
  
 DOCUMENTATION DISTRIBUTION:
 ===========================
 The revised Drug Accountability User Manual and the Change Pages document
 are available on the ANONYMOUS.SOFTWARE directory at one of the following
 Office of Information (OI) Field Offices.
  
 Sites may retrieve documentation in one of the following ways:
  
 (1) The preferred method is to FTP (using BIN mode) the files from
        download.vista.med.va.gov,
     which will transmit the files from the first available FTP server.
  
 (2) Sites may also elect to retrieve documentation directly from a
     specific server as follows:
  
     Albany                     ftp.fo-albany.med.va.gov
     Hines                      ftp.fo-hines.med.va.gov
     Salt Lake City             ftp.fo-slc.med.va.gov
  
  The documentation distribution includes:
  
   FILE NAMES                       DESCRIPTION
   ----------                       -----------
   PSA_3_UM_R1006.PDF               User Manual
   PSA_3_P54_UM_CP.PDF              Change Pages
  
  (3) The documentation can also be retrieved from VISTA Documentation
     Library (VDL) on the Internet at the following address,
     http://www.va.gov/vdl.
  
   
 INSTALLATION INSTRUCTIONS:
 ==========================
 This patch can be loaded with users in the system. Installation should 
 not be done while users are processing or verifying invoices in Drug 
 Accountability.  Installation time is less than one minute.
  
 1. Obtain the files PSA_3_54.KID and MCKESSON_UPDATE.DAT as instructed 
 under the Software Distribution section.
  
 2. This install should NOT be queued because user interaction is required.
   
 3. From the Kernel Installation & Distribution System menu, select
    the Installation menu.
  
 4. Use Load a Distribution using PSA_3_54.KID when prompted to Enter a
 Host File name.  You may need to enter the full directory path where you
 saved the host file PSA_3_54.KID (e.g.,
 SYS$SYSDEVICE:[ANONYMOUS]PSA_3_54.KID). When prompted for "OK to continue 
 with load? NO//", enter "YES".
  
 The following will display"
  
       Loading distribution...
  
             PSA*3.0*54    
       Use INSTALL NAME: PSA*3.0*54 to install this Distribution.
  
 5. From the Installation menu, you may select to use the following options
    (when prompted for INSTALL NAME, enter PSA*3.0*54):
   
      (a) Backup a Transport Global - this option will create a backup
          message of any routines exported with the patch.  It will NOT
          backup any other changes such as DDs or templates.
      (b) Compare Transport Global to Current System - this option will
          allow you to view all changes that will be made when the patch is
      (c) Verify Checksums in Transport Global - this option will allow you
          to ensure the integrity of the routines that are in the transport
          global.
      (d) Print Transport Global - this option will allow you to view the
          components of the KIDS build.
  
 6. Use the Install Package(s) option and when prompted for "Select 
 Install Name" enter "PSA*3.0*54".
    
      a.  When prompted 'Want KIDS to INHIBIT LOGONs during the
          install? YES//', answer NO.
      b.  When prompted 'Want to DISABLE Scheduled Options and Menu 
          Options and Protocols? YES//', answer NO.
  
 INSTALLATION EXAMPLES:
 ======================
 There are 4 scenarios you may encounter during this install.  Action 
 required in each scenario is detailed below.
  
 During the installation process, you will recieve one of these messages.  
 You may need to scroll back in order to read the message to see if 
 additional action is required to complete the updating of the 
 ^XTMP("PSAVSN" global.
  
 Scenario 1) Normal: 
    The patch install successful. You will see thefollowing messaging:
       PROCESSING COMPLETE.  The ^XTMP("PSAVSN" global has been updated 
  
 Scenario 2) INVALID DIRECTORY NAME/FILENAME OR FILE DOES NOT EXIST:
   The MCKESSON_UPDATE.DAT file was not found.
  
 Scenario 3) INSTALL WITH BINARY FILE DOWNLOAD:
   The MCKESSON_UPDATE.DAT file was downloaded using BINARY format.
  
 Scenario 4) INSTALL WHEN FILE DATE IS SAME AS PREVIOUS FILE LOADED
   The MCKESSON_UPDATE.DAT file has already been loaded.
 The McKesson Update for May 2006 has already been installed
  
 During this installation if you see this message, this indicates that the 
 MCKESSON_UPDATE.DAT file is already on your system.  You do not need to 
 take further action at this time.
  
 Select INSTALL NAME:PSA*3.0*54 Loaded from Distribution  3/16/06@12:54:14
      => PSA*3.0*54  ;Created on Mar 16, 2006@12:48:21
  
 This Distribution was loaded on Mar 16, 2006@12:54:14 with header of 
    PSA*3.0*54  ;Created on Mar 16, 2006@12:48:21
    It consisted of the following Install(s):
      PSA*3.0*54
 Checking Install for Package PSA*3.0*54
  
 Install Questions for PSA*3.0*54
  
  
            Build McKesson
  VSN to Dispense Units Per Order Unit 
       and Drug Description Data
  
 This Utility is used to build the ^XTMP(""PSAVSN"" global with then 
 McKesson VSN DUOU & Description. Please follow these steps prior to
 running this utility:
  
 1) Retrieve the MCKESSON_UPDATE.DAT in ASCII format directly from
 one of these FTP servers:
  
 The preferred FTP server retrieve the file from   
 download.vista.med.va.gov
 which will transmit the files from the first available FTP server
 Albany          ftp.fo-albany.med.va.gov
 Hines           ftp.fo-hines.med.va.gov
 Salt Lake City  ftp.fo-slc.med.va.gov
  
 2) At the HOST DIRECTORY: prompt enter the name of the directory that you 
 placed the file in.   i.e. USER$:[TEMP]
  
   If you enter an invalid directory this utility will return you to the 
   HOST DIRECTORY: prompt:     Enter ^ to Quit:
  
 HOST DIRECTORY: USER$:[username]            
 HOST FILENAME: MCKESSON_UPDATE.DAT// 
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   UCX/TELNET
  
 Scenario 1)**************** Normal Completion *************************
   
  Install Started for PSA*3.0*54 : 
                Mar 16, 2006@12:54:38
                                    PSA*3.0*54                                   
 --------------------------------------------------------------------------------
  
 Build Distribution Date: Mar 16, 2006
  
  Installing Routines:
                Mar 16, 2006@12:54:38
  
  Running Post-Install Routine: POSINIT^PSAP54
 PROCESSING PLEASE WAIT
 PROCESSING COMPLETE.    The ^XTMP("PSAVSN" global has been updated
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSA*3.0*54 Installed. 
                Mar 16, 2006@12:54:39
  
  Install Message sent #2017734
 --------------------------------------------------------------------------------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
  
  
 Install Completed
  
  
 Scenario 2)** INVALID DIRECTORY NAME/FILENAME OR FILE DOES NOT EXIST ***
  
                                   PSA*3.0*54                                   
 --------------------------------------------------------------------------------
  Running Post-Install Routine: POSINIT^PSAP54
  
 DIRECTORY = USER$:[username] FILENAME = MCKESSON_UPDATE.DAT
 INVALID DIRECTORY NAME/FILENAME OR FILE DOES NOT EXIST
 Please verify that the DIRECTORY is correct and that the
 MCKESSON_UPDATE.DAT file is present
  
 Once you have verified that the DIRECTORY name is correct and/or
 the file is present, Please run ^PSAP54 from the programmers prompt.
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSA*3.0*54 Installed. 
                Mar 16, 2006@12:50:11
  
  Install Message sent #2017729
 --------------------------------------------------------------------------------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
  
  
 Install Completed
  
 Scenario 3)************ INSTALL WITH BINARY FILE DOWNLOAD ************
  
                                    PSA*3.0*54                                   
 --------------------------------------------------------------------------------
  
  Installing Routines:
                Mar 16, 2006@12:52:40
  
  Running Post-Install Routine: POSINIT^PSAP54
  
 There was a problem with the MCKESSON_UPDATE.DAT file
 Please download it again using ASCII format and
 run ^PSAP54 from the programmers prompt
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSA*3.0*54 Installed. 
                Mar 16, 2006@12:52:41
  
  Install Message sent #2017732
 --------------------------------------------------------------------------------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
  
  
 Install Completed
  
 Scenario 4) *** INSTALL WHEN FILE DATE IS SAME AS PREVIOUS FILE LOADED ***
  
                                    PSA*3.0*54                                   
 --------------------------------------------------------------------------------
  
  Installing Routines:
                Mar 16, 2006@13:05:27
  
  Running Post-Install Routine: POSINIT^PSAP54
  
 The McKesson Update for May 2006 has already been installed
 Please try downloading the file again.
 Then run ^PSAP54 from the programmers prompt.
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSA*3.0*54 Installed. 
                Mar 16, 2006@13:05:28
  
  Install Message sent #2017843
 --------------------------------------------------------------------------------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
  
  
 Install Completed
  
 ROUTINE SUMMARY
 =============== 
 The following is a list of the routines included in this patch.  
 The second line of each of these routines now looks like: 
  
  ;;3.0;DRUG ACCOUNTABILITY/INVENTORY INTERFACE;**[PATCH LIST]**;21-MAR-94
  
                        CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch     Patch List
 ============      ============          ==========      ===========
 PSAP54            n/a                   13412998        54
 PSAUTL1           25341189              26485892        3,12,15,21,
                                                         48,49,54
 PSAUTL4           13922526              14470458        3,21,48,54

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSAP54
    Before:       n/a  After: B24435101  **54**
Routine Name: PSAUTL1
    Before: B50572615  After: B58194382  **3,12,15,21,48,49,54**
Routine Name: PSAUTL4
    Before: B24499007  After: B26771267  **3,21,48,54**

=============================================================================
User Information:
Entered By  : WESLEY,PAUL                   Date Entered  : SEP 15, 2005
Completed By: HEFFERNAN,COREY               Date Completed: OCT 26, 2006
Released By : VECE,VIRGINIA                 Date Released : OCT 26, 2006
=============================================================================


Packman Mail Message:
=====================

No routines included

Released PSN*4*92 SEQ #88
Extracted from mail message
**KIDS**:PSN*4.0*92^

**INSTALL NAME**
PSN*4.0*92
"BLD",833,0)
PSN*4.0*92^NATIONAL DRUG FILE^0^3040930^y
"BLD",833,1,0)
^^4^4^3040930^
"BLD",833,1,1,0)
 
"BLD",833,1,2,0)
Under certain circumstances the matching process aborted with an undefined
"BLD",833,1,3,0)
error.  Specifically, this error would occur when tying to match to a
"BLD",833,1,4,0)
VA Product that began with a number.  This patch corrects that problem.
"BLD",833,4,0)
^9.64PA^^
"BLD",833,"ABPKG")
n
"BLD",833,"KRN",0)
^9.67PA^8989.52^19
"BLD",833,"KRN",.4,0)
.4
"BLD",833,"KRN",.401,0)
.401
"BLD",833,"KRN",.402,0)
.402
"BLD",833,"KRN",.403,0)
.403
"BLD",833,"KRN",.5,0)
.5
"BLD",833,"KRN",.84,0)
.84
"BLD",833,"KRN",3.6,0)
3.6
"BLD",833,"KRN",3.8,0)
3.8
"BLD",833,"KRN",9.2,0)
9.2
"BLD",833,"KRN",9.8,0)
9.8
"BLD",833,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",833,"KRN",9.8,"NM",1,0)
PSNOUT^^0^B10216650
"BLD",833,"KRN",9.8,"NM","B","PSNOUT",1)

"BLD",833,"KRN",19,0)
19
"BLD",833,"KRN",19.1,0)
19.1
"BLD",833,"KRN",101,0)
101
"BLD",833,"KRN",409.61,0)
409.61
"BLD",833,"KRN",771,0)
771
"BLD",833,"KRN",870,0)
870
"BLD",833,"KRN",8989.51,0)
8989.51
"BLD",833,"KRN",8989.52,0)
8989.52
"BLD",833,"KRN",8994,0)
8994
"BLD",833,"KRN","B",.4,.4)

"BLD",833,"KRN","B",.401,.401)

"BLD",833,"KRN","B",.402,.402)

"BLD",833,"KRN","B",.403,.403)

"BLD",833,"KRN","B",.5,.5)

"BLD",833,"KRN","B",.84,.84)

"BLD",833,"KRN","B",3.6,3.6)

"BLD",833,"KRN","B",3.8,3.8)

"BLD",833,"KRN","B",9.2,9.2)

"BLD",833,"KRN","B",9.8,9.8)

"BLD",833,"KRN","B",19,19)

"BLD",833,"KRN","B",19.1,19.1)

"BLD",833,"KRN","B",101,101)

"BLD",833,"KRN","B",409.61,409.61)

"BLD",833,"KRN","B",771,771)

"BLD",833,"KRN","B",870,870)

"BLD",833,"KRN","B",8989.51,8989.51)

"BLD",833,"KRN","B",8989.52,8989.52)

"BLD",833,"KRN","B",8994,8994)

"BLD",833,"QUES",0)
^9.62^^
"BLD",833,"REQB",0)
^9.611^1^1
"BLD",833,"REQB",1,0)
PSN*4.0*82^2
"BLD",833,"REQB","B","PSN*4.0*82",1)

"MBREQ")
0
"PKG",114,-1)
1^1
"PKG",114,0)
NATIONAL DRUG FILE^PSN^This is the National Drug File Package V 4
"PKG",114,20,0)
^9.402P^^
"PKG",114,22,0)
^9.49I^1^1
"PKG",114,22,1,0)
4.0^3040920
"PKG",114,22,1,"PAH",1,0)
92^3040930
"PKG",114,22,1,"PAH",1,1,0)
^^4^4^3040930
"PKG",114,22,1,"PAH",1,1,1,0)
 
"PKG",114,22,1,"PAH",1,1,2,0)
Under certain circumstances the matching process aborted with an undefined
"PKG",114,22,1,"PAH",1,1,3,0)
error.  Specifically, this error would occur when tying to match to a
"PKG",114,22,1,"PAH",1,1,4,0)
VA Product that began with a number.  This patch corrects that problem.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSNOUT")
0^1^B10216650
"RTN","PSNOUT",1,0)
PSNOUT ;BIR/CCH&WRT-output transform routine ; 10/31/98 19:19
"RTN","PSNOUT",2,0)
 ;;4.0; NATIONAL DRUG FILE;**2,82,92**; 30 Oct 98
"RTN","PSNOUT",3,0)
INGRED ; output transform for ingredient
"RTN","PSNOUT",4,0)
 K X,LIST,^TMP($J,"PSNING") S K=PSNFNM,X=$$PSJING^PSNAPIS(,K,.LIST),STOP=X D ING0,ING00 F PSNXZ=0:0 S PSNXZ=$O(^TMP($J,"PSNING",PSNXZ)) Q:PSNXZ'?1.N  S INGT=^TMP($J,"PSNING",PSNXZ) D DISP,BREAK
"RTN","PSNOUT",5,0)
 K ^TMP($J,"PSNING")
"RTN","PSNOUT",6,0)
 Q
"RTN","PSNOUT",7,0)
DISP W !?5,$P(INGT,"^",1)_" "_$P(INGT,"^",2)_" "_$P(INGT,"^",3)
"RTN","PSNOUT",8,0)
 Q
"RTN","PSNOUT",9,0)
BREAK I PSNXZ#7=0,STOP'=7 W !,"Press ANY key to continue Ingredient listing: " R PSNCON:DTIME S:'$T PSNCON="^" Q:PSNCON="^"
"RTN","PSNOUT",10,0)
 Q
"RTN","PSNOUT",11,0)
ING0 F INT=0:0 S INT=$O(LIST(INT)) Q:'INT  S ^TMP($J,"PSNING",$P(LIST(INT),"^",2),INT)=LIST(INT)
"RTN","PSNOUT",12,0)
 Q
"RTN","PSNOUT",13,0)
ING00 S PSNRAN=0 S IN="" F  S IN=$O(^TMP($J,"PSNING",IN)) Q:IN=""  D ING000
"RTN","PSNOUT",14,0)
 Q
"RTN","PSNOUT",15,0)
ING000 F IN1=0:0 S IN1=$O(^TMP($J,"PSNING",IN,IN1)) Q:'IN1  D ARRAY
"RTN","PSNOUT",16,0)
 Q
"RTN","PSNOUT",17,0)
ARRAY S PSNRAN=PSNRAN+1 S ^TMP($J,"PSNING",PSNRAN)=IN_"^"_$P(LIST(IN1),"^",3)_"^"_$P(LIST(IN1),"^",4)
"RTN","PSNOUT",18,0)
 Q
"RTN","PSNOUT",19,0)
FORM ; output transform for va product code
"RTN","PSNOUT",20,0)
 I $D(^PSDRUG(D0,"ND")) S PSNLOCL=^PSDRUG(D0,"ND")
"RTN","PSNOUT",21,0)
 Q:'$O(^PSNDF(50.68,0))  Q:'$D(PSNLOCL)  Q:$P(PSNLOCL,"^",1)']""
"RTN","PSNOUT",22,0)
 S PSNDF=$P(PSNLOCL,"^",1),PSNPTR=$P(PSNLOCL,"^",3)
"RTN","PSNOUT",23,0)
 S Y=$P(^PSNDF(50.68,PSNPTR,0),"^",1) K PSNLOCL,PSNDF,PSNPTR Q
"RTN","PSNOUT",24,0)
 Q
"RTN","PSNOUT",25,0)
REACT ; code for reactivation of inactive drug in local drug file
"RTN","PSNOUT",26,0)
 I $D(^PSDRUG(DA,"ND")) I $P(^PSDRUG(DA,"ND"),"^",2)]"" W !!,"points to ",$P(^("ND"),"^",2)," in the National Drug File."
"RTN","PSNOUT",27,0)
REACT1 I $O(^PSNDF(50.6,0)) S XX=$S('$D(^PSDRUG(DA,"ND")):1,1:$P(^("ND"),"^",2)="") I XX S (PSNB,PSNDRG,Z9)=DA,PSNLOC=$P(^PSDRUG(PSNB,0),"^",1) K ^PSNTRAN(PSNB) D GONE^PSNDRUG,BLDIT^PSNCOMP S DA=Z9 D CHK^PSNVFY,SET^PSNMRG,GONE^PSNDRUG K Z9,XX
"RTN","PSNOUT",28,0)
 Q
"RTN","PSNOUT",29,0)
PKSIZE ; output transform for package size
"RTN","PSNOUT",30,0)
 I $D(^PS(50.609,PSNSIZE,0)) S PSNSZE=$P(^PS(50.609,PSNSIZE,0),"^",1)
"RTN","PSNOUT",31,0)
 Q
"RTN","PSNOUT",32,0)
PKTYPE ; output transform for package type
"RTN","PSNOUT",33,0)
 I $D(^PS(50.608,PSNTYPE,0)) S PSNTPE=$P(^PS(50.608,PSNTYPE,0),"^",1)
"RTN","PSNOUT",34,0)
 Q
"RTN","PSNOUT",35,0)
INGRED1 ; output transform for ingredient-used in NDF Info Report
"RTN","PSNOUT",36,0)
 K LIST,X S K=FNM,X=$$PSJING^PSNAPIS(,K,.LIST) D INGRD1,INGRD2 K IN,VV,VVV
"RTN","PSNOUT",37,0)
 Q
"RTN","PSNOUT",38,0)
INGRD1 K ^TMP($J,"PSNING") F INT=0:0 S INT=$O(LIST(INT)) Q:'INT  S ^TMP($J,"PSNING",$P(LIST(INT),"^",2),INT)=LIST(INT)
"RTN","PSNOUT",39,0)
 Q
"RTN","PSNOUT",40,0)
INGRD2 S IN="" F  S IN=$O(^TMP($J,"PSNING",IN)) Q:IN=""  S IN1=$O(^TMP($J,"PSNING",IN,0)) W !,?42,IN,"  ",$P(^TMP($J,"PSNING",IN,IN1),"^",3)," ",$P(^TMP($J,"PSNING",IN,IN1),"^",4)
"RTN","PSNOUT",41,0)
 Q
"VER")
8.0^22.0
**END**
**END**

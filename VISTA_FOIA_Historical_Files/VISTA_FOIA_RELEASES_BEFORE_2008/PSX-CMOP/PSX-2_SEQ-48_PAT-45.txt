$TXT Created by WESLEY,PAUL at MNTVAA.FO-BIRM.MED.VA.GOV  (KIDS) on Friday, 05/14/04 at 11:06
=============================================================================
Run Date: JUL 30, 2004                     Designation: PSX*2*45
Package : PSX - CMOP                          Priority: Mandatory
Version : 2        SEQ #48                      Status: Released
                  Compliance Date: AUG 30, 2004
=============================================================================

Associated patches: (v)PSX*2*41    <<= must be installed BEFORE `PSX*2*45'

Subject: DOD/CMOP INTEGRITY TESTING, WAN FAILURE PROTECTION, HL7 CORRECTION

Category: 
  - Routine
  - Enhancement (Mandatory)
  - Data Dictionary

Description:
============

 ****************************** NOTE ******************************
 There is no conflict between this patch and the CoreFLS software.
 Installation of this patch by the CoreFLS sites will not cause 
 any problems.
 ******************************************************************
  
 NOTE: This patch addresses the Centralized Mail Outpatient Pharmacy /
 Department of Defense (CMOP/DoD) functionalities. Facilities will see no 
 impact on their systems.
  
 !! NOTE: !!  For health care facilities that do not have the CMOP MASTER 
 DATABASE file (#552.4), this installation will generate the following 
 error that can be ignored.
  
 ** ERROR IN DATA DICTIONARY FOR FILE # 552.4 **
 Data Dictionary not installed; Partial DD/File does not exist.
  
 1)  Problem: Internet ftp processes are sometimes interrupted or 
 terminated in the middle of transmission leaving partial files deposited 
 on the target system. These are not the full files and if processed will 
 result in  incomplete data sets.
    
 Resolution:
  
 Code has been put in place to test the integrity of the received patient 
 data files and the sequencing of segments within the files. Files failing 
 the tests are not processed.
  
 2)  Problem: Criteria of checking the integrity of the patient orders 
 was coded in the original 2.3.1 HL7 transmissions but was dropped when 
 Vitria Businessware started performing the conversions to HL7 2.1.
  
 Resolution:
  
 Code has been put in place to perform the integrity checking of the 
 patient orders in the current HL7 2.1 format as received from Vitria 
 Businessware.
  
 3)  Problem: The VA internal wan between Leavenworth and Charleston 
 would drop causing the files to be lost that were to be delivered to the 
 DoD "Outbox" for their pickup.
  
 Resolution:
  
 Code has been put in place that tests the success of the placement of the 
 files and if they were not placed they are stored for later placement 
 when the wide area network is back in proper operation.
  
 4)  Problem: The naming of the DoD files contains a Julian date with 
 a four digit time. There have been occasions when the time had no 
 seconds, or multiples of 10 seconds. The trailing zeros representing 
 seconds were being dropped.
  
 Resolution:
  
 The code has been modified to insure trailing zeros are included.
  
 5)  Problem: The resending of release data to the sites generates an 
 undefined error.
  
 Resolution:
  
 A variable named AGNCH was corrected to be AGNCY.
  
 6)  Problem: The date transmitted element in DoD $XMIT segments is in
 HL7 format while transmissions from VA facilities is in a FileMan 
 (FM)format. This causes bad date data in the CMOP host files.
  
 Resolution:
  
 The DoD VistA import software has been modified to convert the HL7 format 
 to FM format before handing the files to the CMOP host software.
  
 7)  Problem: Patch PSX*2*38 introduced an 'E' index on the RX INDEX 
 field (#40) of the RX NUMBER multiple field (#1) in the CMOP MASTER 
 DATABASE file (#552.4). The presence of this new index caused confusion 
 for FileMan and it would do lookups first in the 'E' index instead of the 
 'B' index of the RX NUMBER multiple. This would present the user entries 
 other than what they were looking for.
  
 Resolution: The 'E' index is to be removed from the file.
  
 NOTE: If a CMOP has modified the RX INDEX field (#40) locally they will 
 need to be able to re-do their modifications after the installation. This 
 installation will remove the field entirely and then put it back with the 
 official distribution definition without an 'E' index.
  
 Associated NOIS:
 ================
 CML-0403-40802
 CMD-1202-72143
 CMH-0303-N0259
 CMD-1102-71718
 CMH-1102-N1975
 CMP-0503-61758
  
 TEST SITES:
 ===========  
 CMOP-LEAVENWORTH
 IRON MOUNTAIN, MI          
 OKLAHOMA CITY, OK
 MINNEAPOLIS, MN            
  
 Routine Summary:
 ================
 The following routines are included in this patch.
 The second line of the routines now looks like:
  
 <tab>;;2.0;CMOP;**[patch list]**;11 Apr 97
                CHECK^XTSUMBLD results
  
 Routine Name   Before Patch     After Patch     Patch List
 ------------   ------------     -----------     ----------
 PSX45PST           n/a               108956     45
 PSXDODAC           16032628        16419241     38,45
 PSXDODAK            4831566         4686385     38,45
 PSXDODAT            4809238         4790789     38,45
 PSXDODB             9431050         9403642     38,45
 PSXDODB1           n/a              7396902     45
 PSXDODH1            8495046         8183578     38,45
 PSXDODNT           12261512        13907623     38,45
 PSXDODQY           10426483        10418728     38,45
 PSXNOTE            19059224        19227230     1,27,30,38,41,45
 PSXRECV            16397882        16186289     34,38,45
 PSXRECV1           14371607        14834487     34,38,45
 PSXTNRPT           13906904        14067638     45
 PSXVCK1            15181444        15183399     19,38,45
  
 Installation Instructions:
 ==========================
   This patch can be installed with users on the system. Installation will
   take less than 1 minute. There should be no transmissions being 
   processed during the installation.
  
 1.   Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2.   Review your mapped set. If the routines are mapped, they should
      be removed from the mapped set at this time. Currently there are no
      routines that are recommended by the package to be placed into the
      mapped set.
  
 3.   From the Kernel Installation & Distribution System menu, select
      the Installation menu.
  
 4.  From this menu, you may select to use the following options
        (when prompted for INSTALL NAME, enter PSX*2.0*45):
        a.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
        b.  Print Transport Global - This option will allow you to view
            the components of the KIDS build.
        c.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        d.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
  
 5.  Use the Install Package(s) option and select the package PSX*2.0*45.
  
 6.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
      YES//" respond NO.
  
 7.  When prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//" respond NO.
  
 8. If any routines were unmapped as part of step 2, they should be
     returned to the mapped set once the installation has run to
     completion.

Routine Information:
====================

Routine Name:
  - PSXDODAC


Routine Checksum:

Routine Name:
  - PSXDODAK


Routine Checksum:

Routine Name:
  - PSXDODAT


Routine Checksum:

Routine Name:
  - PSXDODB


Routine Checksum:

Routine Name:
  - PSXDODB1


Routine Checksum:

Routine Name:
  - PSXDODH1


Routine Checksum:

Routine Name:
  - PSXDODNT


Routine Checksum:

Routine Name:
  - PSXDODQY


Routine Checksum:

Routine Name:
  - PSXRECV1


Routine Checksum:

Routine Name:
  - PSXTNRPT


Routine Checksum:

Routine Name:
  - PSXVCK1


Routine Checksum:

Routine Name:
  - PSX45PST


Routine Checksum:

Routine Name:
  - PSXRECV


Routine Checksum:

Routine Name:
  - PSXNOTE


Routine Checksum:

=============================================================================
User Information:
Entered By  : WESLEY,PAUL                   Date Entered  : NOV 14, 2002
Completed By: DI BENEDETTO,PETER            Date Completed: JUL 23, 2004
Released By : MUSGROVE,STEVE                Date Released : JUL 30, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

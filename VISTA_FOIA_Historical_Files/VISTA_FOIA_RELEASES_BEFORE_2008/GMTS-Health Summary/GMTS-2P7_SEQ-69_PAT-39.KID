Released GMTS*2.7*39 SEQ #69
Extracted from mail message
**KIDS**:GMTS*2.7*39^

**INSTALL NAME**
GMTS*2.7*39
"BLD",6174,0)
GMTS*2.7*39^HEALTH SUMMARY^0^3050518^y
"BLD",6174,1,0)
^^5^5^3050518^
"BLD",6174,1,1,0)
Updates the subroutine, invoked by the DD screen for the SELECTION ITEM 
"BLD",6174,1,2,0)
sub-field of the HEALTH SUMMARY TYPE (#142) file, for use in the 
"BLD",6174,1,3,0)
Create/Modify Health Summary Type option, so that the screen's pattern 
"BLD",6174,1,4,0)
match will allow selection of entries which have SYNONYM (field #.09 in
"BLD",6174,1,5,0)
the HEALTH FACTORS (#9999999.64) file) that is of the pattern GEC_n_XXXX.
"BLD",6174,4,0)
^9.64PA^^
"BLD",6174,"KRN",0)
^9.67PA^8989.52^19
"BLD",6174,"KRN",.4,0)
.4
"BLD",6174,"KRN",.401,0)
.401
"BLD",6174,"KRN",.402,0)
.402
"BLD",6174,"KRN",.403,0)
.403
"BLD",6174,"KRN",.5,0)
.5
"BLD",6174,"KRN",.84,0)
.84
"BLD",6174,"KRN",3.6,0)
3.6
"BLD",6174,"KRN",3.8,0)
3.8
"BLD",6174,"KRN",9.2,0)
9.2
"BLD",6174,"KRN",9.8,0)
9.8
"BLD",6174,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6174,"KRN",9.8,"NM",1,0)
GMTSGEC^^0^B10791222
"BLD",6174,"KRN",9.8,"NM","B","GMTSGEC",1)

"BLD",6174,"KRN",19,0)
19
"BLD",6174,"KRN",19,"NM",0)
^9.68A^^
"BLD",6174,"KRN",19.1,0)
19.1
"BLD",6174,"KRN",101,0)
101
"BLD",6174,"KRN",409.61,0)
409.61
"BLD",6174,"KRN",771,0)
771
"BLD",6174,"KRN",870,0)
870
"BLD",6174,"KRN",8989.51,0)
8989.51
"BLD",6174,"KRN",8989.52,0)
8989.52
"BLD",6174,"KRN",8994,0)
8994
"BLD",6174,"KRN","B",.4,.4)

"BLD",6174,"KRN","B",.401,.401)

"BLD",6174,"KRN","B",.402,.402)

"BLD",6174,"KRN","B",.403,.403)

"BLD",6174,"KRN","B",.5,.5)

"BLD",6174,"KRN","B",.84,.84)

"BLD",6174,"KRN","B",3.6,3.6)

"BLD",6174,"KRN","B",3.8,3.8)

"BLD",6174,"KRN","B",9.2,9.2)

"BLD",6174,"KRN","B",9.8,9.8)

"BLD",6174,"KRN","B",19,19)

"BLD",6174,"KRN","B",19.1,19.1)

"BLD",6174,"KRN","B",101,101)

"BLD",6174,"KRN","B",409.61,409.61)

"BLD",6174,"KRN","B",771,771)

"BLD",6174,"KRN","B",870,870)

"BLD",6174,"KRN","B",8989.51,8989.51)

"BLD",6174,"KRN","B",8989.52,8989.52)

"BLD",6174,"KRN","B",8994,8994)

"BLD",6174,"QUES",0)
^9.62^^
"BLD",6174,"REQB",0)
^9.611^1^1
"BLD",6174,"REQB",1,0)
GMTS*2.7*63^2
"BLD",6174,"REQB","B","GMTS*2.7*63",1)

"MBREQ")
0
"PKG",301,-1)
1^1
"PKG",301,0)
HEALTH SUMMARY^GMTS^Integrated Health Summary Tools
"PKG",301,22,0)
^9.49I^1^1
"PKG",301,22,1,0)
2.7^2951020^2951227
"PKG",301,22,1,"PAH",1,0)
39^3050518
"PKG",301,22,1,"PAH",1,1,0)
^^5^5^3050518
"PKG",301,22,1,"PAH",1,1,1,0)
Updates the subroutine, invoked by the DD screen for the SELECTION ITEM 
"PKG",301,22,1,"PAH",1,1,2,0)
sub-field of the HEALTH SUMMARY TYPE (#142) file, for use in the 
"PKG",301,22,1,"PAH",1,1,3,0)
Create/Modify Health Summary Type option, so that the screen's pattern 
"PKG",301,22,1,"PAH",1,1,4,0)
match will allow selection of entries which have SYNONYM (field #.09 in
"PKG",301,22,1,"PAH",1,1,5,0)
the HEALTH FACTORS (#9999999.64) file) that is of the pattern GEC_n_XXXX.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","GMTSGEC")
0^1^B10791222
"RTN","GMTSGEC",1,0)
GMTSGEC ; SLC/AGP - Ad Hoc Summary Driver ;5/17/05  12:24
"RTN","GMTSGEC",2,0)
 ;;2.7;Health Summary;**63,39**;Oct 20, 1995
"RTN","GMTSGEC",3,0)
 ;                
"RTN","GMTSGEC",4,0)
 ;   DBIA  1268  ^AUTTHF(
"RTN","GMTSGEC",5,0)
 ;
"RTN","GMTSGEC",6,0)
EN(X) ;
"RTN","GMTSGEC",7,0)
 I $P($G(^GMT(142.1,$G(CMP),0)),U,4)="GECH" Q "I (($P(^(0),U,10)=""C"")&(+$P(^(0),U,11)'=1))&($E($P($G(^(0)),U,9),1,3)=""GEC"")"
"RTN","GMTSGEC",8,0)
 Q "I $P(^(0),U,11)'=1"
"RTN","GMTSGEC",9,0)
 ;
"RTN","GMTSGEC",10,0)
REPORT ;
"RTN","GMTSGEC",11,0)
 N CNT
"RTN","GMTSGEC",12,0)
 D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSGEC",13,0)
 S CNT=0 F  S CNT=$O(^TMP("GMTSGEC",$J,CNT)) Q:CNT=""  D
"RTN","GMTSGEC",14,0)
 . D CKP^GMTSUP Q:$D(GMTSQIT)
"RTN","GMTSGEC",15,0)
 . W !,$G(^TMP("GMTSGEC",$J,CNT))
"RTN","GMTSGEC",16,0)
 Q
"RTN","GMTSGEC",17,0)
 ;
"RTN","GMTSGEC",18,0)
REPHEAD ;
"RTN","GMTSGEC",19,0)
 N STR
"RTN","GMTSGEC",20,0)
 S STR="Total Number of Completed Referrals in date range: "_CNT1
"RTN","GMTSGEC",21,0)
 S ^TMP("GMTSGEC",$J,2)=STR
"RTN","GMTSGEC",22,0)
 Q
"RTN","GMTSGEC",23,0)
 ;
"RTN","GMTSGEC",24,0)
PRINT ;
"RTN","GMTSGEC",25,0)
 N ACNT,ACNT1,BDT,CNT,CNT1,EDT,EDT1,GMTSGECH,INCOMP,OCCCNT,VALUE
"RTN","GMTSGEC",26,0)
 N EHF,EVDT,HF,HFCAT,VDT
"RTN","GMTSGEC",27,0)
 K ^TMP("PXRMGEC",$J,"HS")
"RTN","GMTSGEC",28,0)
 K ^TMP("GMTSGEC",$J)
"RTN","GMTSGEC",29,0)
 I $G(GMTSNDM)<1 S OCCCNT=1
"RTN","GMTSGEC",30,0)
 E  S OCCCNT=GMTSNDM
"RTN","GMTSGEC",31,0)
 D E^PXRMGECV("HS",1,$G(GMTSBEG),$G(GMTSEND),"S",$G(DFN))
"RTN","GMTSGEC",32,0)
 S (BDT,CNT,EDT,VALUE)="",CNT1=0,ACNT=2
"RTN","GMTSGEC",33,0)
 F  S CNT=$O(^TMP("PXRMGEC",$J,"HS",CNT),-1) Q:CNT=""!($G(CNT1)=OCCCNT)  D
"RTN","GMTSGEC",34,0)
 .I VALUE'=CNT S VALUE=CNT,CNT1=CNT1+1,INCOMP=0
"RTN","GMTSGEC",35,0)
 .F  S BDT=$O(^TMP("PXRMGEC",$J,"HS",CNT,DFN,BDT)) Q:BDT=""  D
"RTN","GMTSGEC",36,0)
 ..F  S EDT=$O(^TMP("PXRMGEC",$J,"HS",CNT,DFN,BDT,EDT)) Q:EDT=""  D
"RTN","GMTSGEC",37,0)
 ...S EDT1=EDT I EDT="0000000" S EDT1=DT,INCOMP=1
"RTN","GMTSGEC",38,0)
 ...S ACNT=ACNT+1,^TMP("GMTSGEC",$J,ACNT)="",ACNT=ACNT+1
"RTN","GMTSGEC",39,0)
 ...S STR=$$LJ^XLFSTR(" ",3),STR=STR_"Referral Number: "_CNT1
"RTN","GMTSGEC",40,0)
 ...S ^TMP("GMTSGEC",$J,ACNT)=STR,ACNT=ACNT+1,STR=$$LJ^XLFSTR(" ",5)
"RTN","GMTSGEC",41,0)
 ...S STR=STR_$$LJ^XLFSTR("START DATE",30),STR=STR_"END DATE"
"RTN","GMTSGEC",42,0)
 ...S ACNT=ACNT+1,^TMP("GMTSGEC",$J,ACNT)=STR,ACNT=ACNT+1
"RTN","GMTSGEC",43,0)
 ...S STR=$$LJ^XLFSTR(" ",5),STR=STR_$$LJ^XLFSTR($$FMTE^XLFDT(BDT),30)
"RTN","GMTSGEC",44,0)
 ...I INCOMP=0 S STR=STR_$$FMTE^XLFDT(EDT)
"RTN","GMTSGEC",45,0)
 ...I INCOMP=1 S STR=STR_"Incomplete Referral"
"RTN","GMTSGEC",46,0)
 ...S ^TMP("GMTSGEC",$J,ACNT)=STR,ACNT=ACNT+1
"RTN","GMTSGEC",47,0)
 ...S ^TMP("GMTSGEC",$J,ACNT)=" ",ACNT=ACNT+1,STR=$$LJ^XLFSTR(" ",10)
"RTN","GMTSGEC",48,0)
 ...S ^TMP("GMTSGEC",$J,ACNT)=STR_"Category",ACNT=ACNT+1
"RTN","GMTSGEC",49,0)
 ...S STR=$$LJ^XLFSTR(" ",15),STR=STR_$$LJ^XLFSTR("Health Factor",40)
"RTN","GMTSGEC",50,0)
 ...S STR=STR_"Visit Date",^TMP("GMTSGEC",$J,ACNT)=STR,ACNT=ACNT+1
"RTN","GMTSGEC",51,0)
 ...S ^TMP("GMTSGEC",$J,ACNT)=" ",ACNT=ACNT+1,HFCAT=""
"RTN","GMTSGEC",52,0)
 ...F  S HFCAT=$O(^TMP("PXRMGEC",$J,"HS",CNT,DFN,BDT,EDT,HFCAT)) Q:HFCAT=""  D
"RTN","GMTSGEC",53,0)
 ....S STR=$$LJ^XLFSTR(" ",10)
"RTN","GMTSGEC",54,0)
 ....S ^TMP("GMTSGEC",$J,ACNT)=STR_HFCAT,ACNT=ACNT+1,VDT=""
"RTN","GMTSGEC",55,0)
 ....F  S VDT=$O(^TMP("PXRMGEC",$J,"HS",CNT,DFN,BDT,EDT,HFCAT,VDT)) Q:VDT=""  D 
"RTN","GMTSGEC",56,0)
 .....S EVDT=$$FMTE^XLFDT(VDT),HF=""
"RTN","GMTSGEC",57,0)
 .....F  S HF=$O(^TMP("PXRMGEC",$J,"HS",CNT,DFN,BDT,EDT,HFCAT,VDT,HF)) Q:HF=""  D
"RTN","GMTSGEC",58,0)
 ......S EHF=$$GET1^DIQ(9999999.64,$P($G(^AUPNVHF(HF,0)),U),.01)
"RTN","GMTSGEC",59,0)
 ......S STR=$$LJ^XLFSTR(" ",15)
"RTN","GMTSGEC",60,0)
 ......S STR=STR_$$LJ^XLFSTR(EHF,40)
"RTN","GMTSGEC",61,0)
 ......S STR=STR_$$LJ^XLFSTR(EVDT,25)
"RTN","GMTSGEC",62,0)
 ......S ^TMP("GMTSGEC",$J,ACNT)=STR,ACNT=ACNT+1
"RTN","GMTSGEC",63,0)
 D REPHEAD
"RTN","GMTSGEC",64,0)
 D REPORT
"RTN","GMTSGEC",65,0)
 K ^TMP("GMTSGEC",$J)
"RTN","GMTSGEC",66,0)
 K ^TMP("PXRMGEC",$J,"HS")
"RTN","GMTSGEC",67,0)
 Q
"VER")
8.0^22.0
"BLD",6174,6)
^SEQ #69
**END**
**END**

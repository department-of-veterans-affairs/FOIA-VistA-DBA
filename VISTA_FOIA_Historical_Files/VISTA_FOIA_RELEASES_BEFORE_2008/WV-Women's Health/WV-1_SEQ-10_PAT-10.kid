Released WV*1*10 SEQ #10
Extracted from mail message
**KIDS**:WV*1.0*10^

**INSTALL NAME**
WV*1.0*10
"BLD",2383,0)
WV*1.0*10^WOMEN'S HEALTH^0^3000427^y
"BLD",2383,1,0)
^^2^2^3000411^^
"BLD",2383,1,1,0)
Please read the WV*1*10 patch description on FORUM for an explanation of
"BLD",2383,1,2,0)
what this patch does.
"BLD",2383,4,0)
^9.64PA^790.02^1
"BLD",2383,4,790.02,0)
790.02
"BLD",2383,4,790.02,2,0)
^9.641^790.14^3
"BLD",2383,4,790.02,2,790.02,0)
WV SITE PARAMETER  (File-top level)
"BLD",2383,4,790.02,2,790.02,1,0)
^9.6411^.26^2
"BLD",2383,4,790.02,2,790.02,1,.25,0)
INCLUDE ALL NON-VETERANS (RAD)
"BLD",2383,4,790.02,2,790.02,1,.26,0)
INCLUDE ALL NON-VETERANS (LAB)
"BLD",2383,4,790.02,2,790.13,0)
PRIMARY ELIGIBILITY CODE (RAD)  (sub-file)
"BLD",2383,4,790.02,2,790.13,1,0)
^9.6411^^
"BLD",2383,4,790.02,2,790.14,0)
PRIMARY ELIGIBILITY CODE (LAB)  (sub-file)
"BLD",2383,4,790.02,2,790.14,1,0)
^9.6411^^
"BLD",2383,4,790.02,222)
y^n^p^^^^n
"BLD",2383,4,"APDD",790.02,790.02)

"BLD",2383,4,"APDD",790.02,790.02,.25)

"BLD",2383,4,"APDD",790.02,790.02,.26)

"BLD",2383,4,"APDD",790.02,790.13)

"BLD",2383,4,"APDD",790.02,790.14)

"BLD",2383,4,"B",790.02,790.02)

"BLD",2383,"ABNS",0)
^9.66A^^
"BLD",2383,"ABPKG")
^n
"BLD",2383,"INIT")
WV10PST
"BLD",2383,"KRN",0)
^9.67PA^19^18
"BLD",2383,"KRN",.4,0)
.4
"BLD",2383,"KRN",.4,"NM",0)
^9.68A^^
"BLD",2383,"KRN",.401,0)
.401
"BLD",2383,"KRN",.402,0)
.402
"BLD",2383,"KRN",.403,0)
.403
"BLD",2383,"KRN",.403,"NM",0)
^9.68A^8^8
"BLD",2383,"KRN",.403,"NM",1,0)
WV NOTIF-FORM-1    FILE #790.4^790.4^0
"BLD",2383,"KRN",.403,"NM",2,0)
WV NOTIF-FORM-2    FILE #790.4^790.4^0
"BLD",2383,"KRN",.403,"NM",3,0)
WV PATIENT-FORM-1    FILE #790^790^0
"BLD",2383,"KRN",.403,"NM",4,0)
WV PROC-FORM-1    FILE #790.1^790.1^0
"BLD",2383,"KRN",.403,"NM",5,0)
WV PROC-FORM-2-COLP    FILE #790.1^790.1^0
"BLD",2383,"KRN",.403,"NM",6,0)
WV PROC-FORM-LAB    FILE #790.1^790.1^0
"BLD",2383,"KRN",.403,"NM",7,0)
WV REFUSED PROCEDURE-ENTRY    FILE #790.3^790.3^0
"BLD",2383,"KRN",.403,"NM",8,0)
WV SITE PARAMS-FORM-1    FILE #790.02^790.02^0
"BLD",2383,"KRN",.403,"NM","B","WV NOTIF-FORM-1    FILE #790.4",1)

"BLD",2383,"KRN",.403,"NM","B","WV NOTIF-FORM-2    FILE #790.4",2)

"BLD",2383,"KRN",.403,"NM","B","WV PATIENT-FORM-1    FILE #790",3)

"BLD",2383,"KRN",.403,"NM","B","WV PROC-FORM-1    FILE #790.1",4)

"BLD",2383,"KRN",.403,"NM","B","WV PROC-FORM-2-COLP    FILE #790.1",5)

"BLD",2383,"KRN",.403,"NM","B","WV PROC-FORM-LAB    FILE #790.1",6)

"BLD",2383,"KRN",.403,"NM","B","WV REFUSED PROCEDURE-ENTRY    FILE #790.3",7)

"BLD",2383,"KRN",.403,"NM","B","WV SITE PARAMS-FORM-1    FILE #790.02",8)

"BLD",2383,"KRN",.5,0)
.5
"BLD",2383,"KRN",.84,0)
.84
"BLD",2383,"KRN",3.6,0)
3.6
"BLD",2383,"KRN",3.8,0)
3.8
"BLD",2383,"KRN",9.2,0)
9.2
"BLD",2383,"KRN",9.8,0)
9.8
"BLD",2383,"KRN",9.8,"NM",0)
^9.68A^11^11
"BLD",2383,"KRN",9.8,"NM",1,0)
WVRALINK^^0^B43726031
"BLD",2383,"KRN",9.8,"NM",2,0)
WVLRLINK^^0^B46326703
"BLD",2383,"KRN",9.8,"NM",3,0)
WVEXPTRA^^0^B39195062
"BLD",2383,"KRN",9.8,"NM",4,0)
WVUTL9^^0^B21170963
"BLD",2383,"KRN",9.8,"NM",5,0)
WVGETAL1^^0^B2017775
"BLD",2383,"KRN",9.8,"NM",6,0)
WVGETALL^^0^B58560845
"BLD",2383,"KRN",9.8,"NM",7,0)
WVRALIN1^^0^B6771511
"BLD",2383,"KRN",9.8,"NM",8,0)
WVPATP^^0^B19567781
"BLD",2383,"KRN",9.8,"NM",9,0)
WVUTL7^^0^B42206404
"BLD",2383,"KRN",9.8,"NM",10,0)
WV10PST^^0^B19737137
"BLD",2383,"KRN",9.8,"NM",11,0)
WVBRNED1^^0^B9757632
"BLD",2383,"KRN",9.8,"NM","B","WV10PST",10)

"BLD",2383,"KRN",9.8,"NM","B","WVBRNED1",11)

"BLD",2383,"KRN",9.8,"NM","B","WVEXPTRA",3)

"BLD",2383,"KRN",9.8,"NM","B","WVGETAL1",5)

"BLD",2383,"KRN",9.8,"NM","B","WVGETALL",6)

"BLD",2383,"KRN",9.8,"NM","B","WVLRLINK",2)

"BLD",2383,"KRN",9.8,"NM","B","WVPATP",8)

"BLD",2383,"KRN",9.8,"NM","B","WVRALIN1",7)

"BLD",2383,"KRN",9.8,"NM","B","WVRALINK",1)

"BLD",2383,"KRN",9.8,"NM","B","WVUTL7",9)

"BLD",2383,"KRN",9.8,"NM","B","WVUTL9",4)

"BLD",2383,"KRN",19,0)
19
"BLD",2383,"KRN",19,"NM",0)
^9.68A^^
"BLD",2383,"KRN",19.1,0)
19.1
"BLD",2383,"KRN",101,0)
101
"BLD",2383,"KRN",409.61,0)
409.61
"BLD",2383,"KRN",771,0)
771
"BLD",2383,"KRN",869.2,0)
869.2
"BLD",2383,"KRN",870,0)
870
"BLD",2383,"KRN",8994,0)
8994
"BLD",2383,"KRN","B",.4,.4)

"BLD",2383,"KRN","B",.401,.401)

"BLD",2383,"KRN","B",.402,.402)

"BLD",2383,"KRN","B",.403,.403)

"BLD",2383,"KRN","B",.5,.5)

"BLD",2383,"KRN","B",.84,.84)

"BLD",2383,"KRN","B",3.6,3.6)

"BLD",2383,"KRN","B",3.8,3.8)

"BLD",2383,"KRN","B",9.2,9.2)

"BLD",2383,"KRN","B",9.8,9.8)

"BLD",2383,"KRN","B",19,19)

"BLD",2383,"KRN","B",19.1,19.1)

"BLD",2383,"KRN","B",101,101)

"BLD",2383,"KRN","B",409.61,409.61)

"BLD",2383,"KRN","B",771,771)

"BLD",2383,"KRN","B",869.2,869.2)

"BLD",2383,"KRN","B",870,870)

"BLD",2383,"KRN","B",8994,8994)

"BLD",2383,"QUES",0)
^9.62^^
"BLD",2383,"REQB",0)
^9.611^4^4
"BLD",2383,"REQB",1,0)
WV*1.0*5^2
"BLD",2383,"REQB",2,0)
WV*1.0*6^2
"BLD",2383,"REQB",3,0)
WV*1.0*7^2
"BLD",2383,"REQB",4,0)
WV*1.0*9^2
"BLD",2383,"REQB","B","WV*1.0*5",1)

"BLD",2383,"REQB","B","WV*1.0*6",2)

"BLD",2383,"REQB","B","WV*1.0*7",3)

"BLD",2383,"REQB","B","WV*1.0*9",4)

"FIA",790.02)
WV SITE PARAMETER
"FIA",790.02,0)
^WV(790.02,
"FIA",790.02,0,0)
790.02P
"FIA",790.02,0,1)
y^n^p^^^^n
"FIA",790.02,0,10)

"FIA",790.02,0,11)

"FIA",790.02,0,"RLRO")

"FIA",790.02,0,"VR")
1.0^WV
"FIA",790.02,790.02)
1
"FIA",790.02,790.02,.25)

"FIA",790.02,790.02,.26)

"FIA",790.02,790.02,.27)

"FIA",790.02,790.02,.28)

"FIA",790.02,790.13)
0
"FIA",790.02,790.14)
0
"INIT")
WV10PST
"KRN",.403,69,-1)
0^4
"KRN",.403,69,0)
WV PROC-FORM-1^^^^2940620^^^790.1^0^0^1
"KRN",.403,69,11)

"KRN",.403,69,12)

"KRN",.403,69,40,0)
^.4031I^1^1
"KRN",.403,69,40,1,0)
1^^1,1^^^0
"KRN",.403,69,40,1,1)
PAGE 1
"KRN",.403,69,40,1,11)

"KRN",.403,69,40,1,12)

"KRN",.403,69,40,1,40,0)
^.4032PI^315^2
"KRN",.403,69,40,1,40,250,0)
WV PROC-EDITBLK-1^3^9,1^e
"KRN",.403,69,40,1,40,315,0)
WV PROC-DISPLAY-1^2^1,1^d
"KRN",.403,70,-1)
0^1
"KRN",.403,70,0)
WV NOTIF-FORM-1^^^^2940713^^^790.4^0^0^1
"KRN",.403,70,11)

"KRN",.403,70,12)

"KRN",.403,70,40,0)
^.4031I^1^1
"KRN",.403,70,40,1,0)
1^^1,1^^^0
"KRN",.403,70,40,1,1)
PAGE 1
"KRN",.403,70,40,1,40,0)
^.4032PI^252^2
"KRN",.403,70,40,1,40,252,0)
WV NOTIF-HEADER-1^2^1,1^d
"KRN",.403,70,40,1,40,253,0)
WV NOTIF-EDITBLK-1^1^9,1^e
"KRN",.403,71,-1)
0^3
"KRN",.403,71,0)
WV PATIENT-FORM-1^^^^2940917^^^790^0^0^1
"KRN",.403,71,40,0)
^.4031I^1^1
"KRN",.403,71,40,1,0)
1^^1,1^^^0
"KRN",.403,71,40,1,1)
PAGE 1
"KRN",.403,71,40,1,40,0)
^.4032PI^326^2
"KRN",.403,71,40,1,40,255,0)
WV PATIENT-EDITBLK-1^1^8,1^e
"KRN",.403,71,40,1,40,326,0)
WV PATIENT-HEADER-2^2^1,1^d
"KRN",.403,72,-1)
0^2
"KRN",.403,72,0)
WV NOTIF-FORM-2^^^^2941003^^^790.4^0^0^1
"KRN",.403,72,11)

"KRN",.403,72,40,0)
^.4031I^1^1
"KRN",.403,72,40,1,0)
1^WV NOTIF-HEADER-1^1,1^^^0
"KRN",.403,72,40,1,1)
PAGE 1
"KRN",.403,72,40,1,40,0)
^.4032PI^257^1
"KRN",.403,72,40,1,40,257,0)
WV NOTIF-EDITBLK-2^1^9,1^e
"KRN",.403,73,-1)
0^5
"KRN",.403,73,0)
WV PROC-FORM-2-COLP^^^^2940620^^^790.1^0^0^1
"KRN",.403,73,40,0)
^.4031I^2^2
"KRN",.403,73,40,1,0)
1^^1,1^2^2^0
"KRN",.403,73,40,1,1)
PAGE 1
"KRN",.403,73,40,1,40,0)
^.4032PI^315^2
"KRN",.403,73,40,1,40,250,0)
WV PROC-EDITBLK-1^1^9,1^e
"KRN",.403,73,40,1,40,315,0)
WV PROC-DISPLAY-1^2^1,1^d
"KRN",.403,73,40,2,0)
2^^1,1^1^1^0
"KRN",.403,73,40,2,1)
PAGE 2
"KRN",.403,73,40,2,40,0)
^.4032PI^315^2
"KRN",.403,73,40,2,40,256,0)
WV PROC-EDITBLK-2-COLP^1^9,1^e
"KRN",.403,73,40,2,40,315,0)
WV PROC-DISPLAY-1^2^1,1^d
"KRN",.403,76,-1)
0^8
"KRN",.403,76,0)
WV SITE PARAMS-FORM-1^^^^2950317^^^790.02^0^0^1
"KRN",.403,76,14)
D DELETE^WVUTL9(DA)
"KRN",.403,76,40,0)
^.4031I^6^6
"KRN",.403,76,40,1,0)
1^^1,1^2^6^0
"KRN",.403,76,40,1,1)
PAGE 1
"KRN",.403,76,40,1,40,0)
^.4032PI^260^1
"KRN",.403,76,40,1,40,260,0)
WV SITE PARAMS-EDITBLK-1^1^1,1^e
"KRN",.403,76,40,2,0)
2^^1,1^3^1^0
"KRN",.403,76,40,2,1)
PAGE 2
"KRN",.403,76,40,2,40,0)
^.4032PI^377^4
"KRN",.403,76,40,2,40,261,0)
WV SITE PARAMS-EDITBLK-2^1^1,1^e
"KRN",.403,76,40,2,40,375,0)
WV SITE PARAMS-EDITBLK-2.1^2^8,26^e
"KRN",.403,76,40,2,40,375,2)
3^^
"KRN",.403,76,40,2,40,376,0)
WV SITE PARAMS-EDITBLK-2.2^3^12,5^e
"KRN",.403,76,40,2,40,377,0)
WV SITE PARAMS-EDITBLK-2.3^4^14,26^e
"KRN",.403,76,40,2,40,377,2)
3
"KRN",.403,76,40,3,0)
3^^1,1^4^2
"KRN",.403,76,40,3,1)
Page 3
"KRN",.403,76,40,3,40,0)
^.4032IP^312^1
"KRN",.403,76,40,3,40,312,0)
WV SITE PATAMS-EDITBLK-3^1^1,1^e
"KRN",.403,76,40,4,0)
4^^1,1^5^3
"KRN",.403,76,40,4,1)
Page 4
"KRN",.403,76,40,4,40,0)
^.4032IP^313^1
"KRN",.403,76,40,4,40,313,0)
WV SITE PARAMS-EDITBLK-4^1^1,1^e
"KRN",.403,76,40,5,0)
5^^1,1^6^4
"KRN",.403,76,40,5,1)
Page 5
"KRN",.403,76,40,5,40,0)
^.4032IP^314^1
"KRN",.403,76,40,5,40,314,0)
WV SITE PARAMS-EDITBLK-5^1^1,1^e
"KRN",.403,76,40,6,0)
6^^1,1^1^5
"KRN",.403,76,40,6,1)
Page 6
"KRN",.403,76,40,6,40,0)
^.4032IP^343^1
"KRN",.403,76,40,6,40,343,0)
WV SITE PARAMS-EDITBLK-6^1^1,1^e
"KRN",.403,85,-1)
0^7
"KRN",.403,85,0)
WV REFUSED PROCEDURE-ENTRY^@^@^^2980617.0721^^^790.3^0^0^1
"KRN",.403,85,40,0)
^.4031I^1^1
"KRN",.403,85,40,1,0)
1^^1,1
"KRN",.403,85,40,1,1)
Page 1
"KRN",.403,85,40,1,40,0)
^.4032IP^^0
"KRN",.403,85,40,1,40,318,0)
WV REFUSAL-DISPLAY-1^1^1,1^d
"KRN",.403,85,40,1,40,319,0)
WV REFUSAL-EDIT-1^2^10,1^e
"KRN",.403,87,-1)
0^6
"KRN",.403,87,0)
WV PROC-FORM-LAB^^^^2940620^^^790.1^0^0^1
"KRN",.403,87,40,0)
^.4031I^1^1
"KRN",.403,87,40,1,0)
1^^1,1^^^0
"KRN",.403,87,40,1,1)
PAGE 1
"KRN",.403,87,40,1,40,0)
^.4032PI^327^2
"KRN",.403,87,40,1,40,324,0)
WV PROC-EDITBLK-LAB^1^8,1^e
"KRN",.403,87,40,1,40,327,0)
WV PROC-HEADER-1^2^1,1^d
"KRN",.404,250,0)
WV PROC-EDITBLK-1^790.1
"KRN",.404,250,11)
D:$$COLP^WVUTL4(DA) HLP^DDSUTL(" * Move to PAGE 2 to edit clinical and pathology findings. ")
"KRN",.404,250,12)

"KRN",.404,250,15,0)
^^1^1^2980605^
"KRN",.404,250,15,1,0)
WV PROCEDURE-EDIT-BLOCK-1
"KRN",.404,250,40,0)
^.4044I^18^15
"KRN",.404,250,40,1,0)
1^Date of Procedure^3
"KRN",.404,250,40,1,1)
.12
"KRN",.404,250,40,1,2)
2,25^18^2,6
"KRN",.404,250,40,1,3)
T
"KRN",.404,250,40,1,4)
1
"KRN",.404,250,40,1,13)
N WVX S WVX=$$PDELQ1^WVUTL4(DA,X,DUZ(2)) D PUT^DDSVAL(DIE,DA,.13,WVX)
"KRN",.404,250,40,3,0)
2^Clinician/Provider^3
"KRN",.404,250,40,3,1)
.07
"KRN",.404,250,40,3,2)
3,25^25^3,5
"KRN",.404,250,40,3,4)
0
"KRN",.404,250,40,4,0)
3^Ward/Clinic/Location^3
"KRN",.404,250,40,4,1)
.11
"KRN",.404,250,40,4,2)
4,25^30^4,3
"KRN",.404,250,40,4,4)
0
"KRN",.404,250,40,4,13)
D PUT^DDSVAL(790.1,.DA,.1,$$INSTIT^WVUTL6)
"KRN",.404,250,40,5,0)
4^Health Care Facility^3
"KRN",.404,250,40,5,1)
.1
"KRN",.404,250,40,5,2)
5,25^30^5,3
"KRN",.404,250,40,5,4)
1^^^
"KRN",.404,250,40,6,0)
9^Results/Diagnosis^3
"KRN",.404,250,40,6,1)
.05
"KRN",.404,250,40,6,2)
8,25^30^8,6
"KRN",.404,250,40,6,10)
S DDSBR=$S(X:12,1:13)
"KRN",.404,250,40,6,11)
S WVPN=$$GET^DDSVAL(DIE,DA,.04)
"KRN",.404,250,40,6,12)
K WVPN I X,$P(^WV(790.31,X,0),U,22) D PUT^DDSVAL(DIE,DA,.08,1)
"KRN",.404,250,40,7,0)
10^Notes (WP)^3
"KRN",.404,250,40,7,1)
1.01
"KRN",.404,250,40,7,2)
5,77^1^5,65
"KRN",.404,250,40,7,4)
^^^0
"KRN",.404,250,40,7,10)
S DDSBR=5
"KRN",.404,250,40,9,0)
6^Complete by (Date)^3
"KRN",.404,250,40,9,1)
.13
"KRN",.404,250,40,9,2)
7,25^12^7,5
"KRN",.404,250,40,9,3)
!M
"KRN",.404,250,40,9,3.1)
S Y=$$PDELQ^WVUTL4(DA,DUZ(2))
"KRN",.404,250,40,9,10)
S DDSBR=9
"KRN",.404,250,40,10,0)
14^Status^3
"KRN",.404,250,40,10,1)
.14
"KRN",.404,250,40,10,2)
8,65^6^8,57
"KRN",.404,250,40,10,3)
o
"KRN",.404,250,40,11,0)
15^!M^1^
"KRN",.404,250,40,11,.1)
I $$COLP^WVUTL4(DA) S Y="(PAGE 1 OF 2)"
"KRN",.404,250,40,11,2)
^^9,60
"KRN",.404,250,40,12,0)
12^Sec Results/Diagnosis^3^
"KRN",.404,250,40,12,1)
.06
"KRN",.404,250,40,12,2)
9,25^30^9,2
"KRN",.404,250,40,12,10)
S:$$PNOCX^WVUTL6($P(^WV(790.1,DA,0),U,4)) DDSBR=13
"KRN",.404,250,40,12,11)
S WVPN=$$GET^DDSVAL(DIE,DA,.04)
"KRN",.404,250,40,12,12)
K WVPN I X,$P(^WV(790.31,X,0),U,22) D PUT^DDSVAL(DIE,DA,.08,1)
"KRN",.404,250,40,13,0)
13^HPV^3
"KRN",.404,250,40,13,1)
.08
"KRN",.404,250,40,13,2)
7,65^3^7,60
"KRN",.404,250,40,14,0)
11^!M^1^
"KRN",.404,250,40,14,.1)
N WVROOT S WVROOT=$$GET^DDSVAL(DIE,DA,1.01) I WVROOT]"",$O(@WVROOT@(0)) S Y="+"
"KRN",.404,250,40,14,2)
^^5,77
"KRN",.404,250,40,15,0)
5^Comments^3
"KRN",.404,250,40,15,1)
3.01
"KRN",.404,250,40,15,2)
6,25^53^6,15
"KRN",.404,250,40,17,0)
7^!M^1
"KRN",.404,250,40,17,.1)
S:$O(^WV(790.1,DA,9,0)) Y="+"
"KRN",.404,250,40,17,2)
^^4,77
"KRN",.404,250,40,18,0)
8^Reports (WP)^3
"KRN",.404,250,40,18,1)
9
"KRN",.404,250,40,18,2)
4,78^1^4,63
"KRN",.404,250,40,18,4)
^^^1
"KRN",.404,250,40,18,10)
S DDSBR=4
"KRN",.404,252,0)
WV NOTIF-HEADER-1^790.4^
"KRN",.404,252,40,0)
^.4044I^21^20
"KRN",.404,252,40,1,0)
1^* * *  EDIT A NOTIFICATION  * * *^1^
"KRN",.404,252,40,1,2)
^^1,23^
"KRN",.404,252,40,2,0)
2^!M^1^
"KRN",.404,252,40,2,.1)
S Y=IOINORM_"Patient Name: "_IOINHI_$$NAME^WVUTL1(WVDFN)_" ("_$$AGE^WVUTL1(WVDFN)_")"_IOINORM
"KRN",.404,252,40,2,2)
^^2,1
"KRN",.404,252,40,3,0)
3^!M^1^
"KRN",.404,252,40,3,.1)
S Y=IOINORM_$$PNLAB^WVUTL5()_IOINHI_$$SSN^WVUTL1(WVDFN)_IOINORM
"KRN",.404,252,40,3,2)
^^2,55
"KRN",.404,252,40,4,0)
10^--------------------------------------------------------------------------------^1^
"KRN",.404,252,40,4,2)
^^9,1
"KRN",.404,252,40,5,0)
5^!M^1^
"KRN",.404,252,40,5,.1)
S Y=IOINORM_"Patient Phone: "_IOINHI_$$HPHONE^WVUTL1(WVDFN)
"KRN",.404,252,40,5,2)
^^3,48
"KRN",.404,252,40,6,0)
4^!M^1^
"KRN",.404,252,40,6,.1)
S Y=IOINORM_"Case Manager: "_IOINHI_$$CMGR^WVUTL1(WVDFN)_IOINORM
"KRN",.404,252,40,6,2)
^^3,1
"KRN",.404,252,40,7,0)
6^!M^1^
"KRN",.404,252,40,7,.1)
S Y=IOINORM_"Cx Tx Need  : "_IOINHI_$$CNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,252,40,7,2)
^^4,1
"KRN",.404,252,40,8,0)
7^!M^1^
"KRN",.404,252,40,8,.1)
S Y=IOINORM_"PAP Regimen : "_IOINHI_$$PAPRG^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,252,40,8,2)
^^6,1
"KRN",.404,252,40,9,0)
11^!M^1^
"KRN",.404,252,40,9,.1)
S Y=IOINHI_$$EDC^WVUTL1(WVDFN)_IOINORM
"KRN",.404,252,40,9,2)
^^9,51
"KRN",.404,252,40,10,0)
8^!M^1^
"KRN",.404,252,40,10,.1)
S Y=IOINORM_"Br Tx Need  : "_IOINHI_$$BNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,252,40,10,2)
^^5,1
"KRN",.404,252,40,11,0)
9^!M^1^
"KRN",.404,252,40,11,.1)
S Y=IOINHI_$S($$DES^WVUTL1(WVDFN)="YES":"*DES DAUGHTER*",1:"")_IOINORM
"KRN",.404,252,40,11,2)
^^8,63
"KRN",.404,252,40,12,0)
12^Cx Tx Fac:^1
"KRN",.404,252,40,12,2)
^^4,52
"KRN",.404,252,40,13,0)
13^Br Tx Fac:^1
"KRN",.404,252,40,13,2)
^^5,52
"KRN",.404,252,40,14,0)
14^!M^1
"KRN",.404,252,40,14,.1)
S Y=IOINHI_$$FACIL^WVUTL1A(WVDFN,"C")_IOINORM
"KRN",.404,252,40,14,2)
^^4,63
"KRN",.404,252,40,15,0)
15^!M^1
"KRN",.404,252,40,15,.1)
S Y=IOINHI_$$FACIL^WVUTL1A(WVDFN,"B")_IOINORM
"KRN",.404,252,40,15,2)
^^5,63
"KRN",.404,252,40,17,0)
17^Sexual Trauma:^1
"KRN",.404,252,40,17,2)
^^8,1
"KRN",.404,252,40,18,0)
18^!M^1
"KRN",.404,252,40,18,.1)
S Y=IOINHI_$$MST^WVUTL1A(WVDFN)_IOINORM
"KRN",.404,252,40,18,2)
^^8,16
"KRN",.404,252,40,19,0)
19^Veteran:^1
"KRN",.404,252,40,19,2)
^^7,54
"KRN",.404,252,40,20,0)
20^!M^1
"KRN",.404,252,40,20,.1)
S Y=IOINHI_$$VET^WVUTL1A(WVDFN)_IOINORM
"KRN",.404,252,40,20,2)
^^7,63
"KRN",.404,252,40,21,0)
21^!M^1
"KRN",.404,252,40,21,.1)
S Y=IOINORM_"Elig Code   : "_IOINHI_$P($$ELIG^WVUTL9(WVDFN),U,2)_IOINORM
"KRN",.404,252,40,21,2)
^^7,1
"KRN",.404,253,0)
WV NOTIF-EDITBLK-1^790.4
"KRN",.404,253,11)

"KRN",.404,253,12)

"KRN",.404,253,40,0)
^.4044I^13^13
"KRN",.404,253,40,1,0)
3^Date Notification Opened^3
"KRN",.404,253,40,1,1)
.02
"KRN",.404,253,40,1,2)
3,29^12^3,3
"KRN",.404,253,40,1,3)
T
"KRN",.404,253,40,2,0)
1^Accession#^3
"KRN",.404,253,40,2,1)
.06
"KRN",.404,253,40,2,2)
2,15^12^2,3
"KRN",.404,253,40,2,11)
S DIC("S")="I $P(^WV(790.1,Y,0),U,2)=WVDFN"
"KRN",.404,253,40,2,12)
I X]"" W IOINORM,"  Procedure: ",$$PROC^WVUTL1A,IOELEOL
"KRN",.404,253,40,3,0)
6^Type of Notification^3
"KRN",.404,253,40,3,1)
.03
"KRN",.404,253,40,3,2)
6,29^26^6,7
"KRN",.404,253,40,3,10)
S:'X DDSBR=7 I X S:'$P(^WV(790.403,X,0),U,2) DDSBR=7
"KRN",.404,253,40,3,13)
D PRTDATE^WVUTL6
"KRN",.404,253,40,4,0)
4^Purpose of Notification^3
"KRN",.404,253,40,4,1)
.04
"KRN",.404,253,40,4,2)
4,29^50^4,4
"KRN",.404,253,40,4,4)
1
"KRN",.404,253,40,4,13)
S Y=X W !?18,"PRIORITY: ",$$PRIOR1^WVUTL1A,"               " D PRTDATE^WVUTL6
"KRN",.404,253,40,5,0)
8^Outcome^3
"KRN",.404,253,40,5,1)
.05
"KRN",.404,253,40,5,2)
8,29^30^8,20
"KRN",.404,253,40,5,12)
S X=$S(X:"c",1:"o") D PUT^DDSVAL(790.4,DA,.14,X)
"KRN",.404,253,40,6,0)
9^Status^3
"KRN",.404,253,40,6,1)
.14
"KRN",.404,253,40,6,2)
9,29^6^9,21
"KRN",.404,253,40,7,0)
5^!M^1^
"KRN",.404,253,40,7,.1)
S Y="Priority: "_IOINHI_$$PRIOR^WVUTL1A_IOINORM
"KRN",.404,253,40,7,2)
^^5,19
"KRN",.404,253,40,8,0)
2^!M^1^
"KRN",.404,253,40,8,.1)
S Y=IOINORM_"  Procedure: "_IOINHI_$$NTPROC^WVUTL1A_IOINORM
"KRN",.404,253,40,8,2)
^^2,27
"KRN",.404,253,40,9,0)
10^Patient Ed^3
"KRN",.404,253,40,9,1)
.09
"KRN",.404,253,40,9,2)
9,69^7^9,57
"KRN",.404,253,40,10,0)
7^Complete by (Date)^3
"KRN",.404,253,40,10,1)
.13
"KRN",.404,253,40,10,2)
7,29^12^7,9
"KRN",.404,253,40,10,3)
!M
"KRN",.404,253,40,10,3.1)
S Y=$$NDELQ^WVUTL4
"KRN",.404,253,40,11,0)
6.5^Print Date^3
"KRN",.404,253,40,11,1)
.11
"KRN",.404,253,40,11,2)
6,69^11^6,57
"KRN",.404,253,40,11,3)
!M
"KRN",.404,253,40,11,3.1)
D PRTDATE^WVUTL6 S Y=$$GET^DDSVAL(DIE,DA,.11)
"KRN",.404,253,40,11,13)
S:'X X=$$GET^DDSVAL(DIE,DA,.02) S X=$$NDELQ1^WVUTL4 D PUT^DDSVAL(DIE,DA,.13,X)
"KRN",.404,253,40,12,0)
7.5^Printed^3
"KRN",.404,253,40,12,1)
.1
"KRN",.404,253,40,12,2)
7,69^12^7,60
"KRN",.404,253,40,12,4)
^^^1
"KRN",.404,253,40,12,11)
W IOINHI
"KRN",.404,253,40,12,12)
W IOINORM
"KRN",.404,253,40,13,0)
3.5^Facility^3
"KRN",.404,253,40,13,1)
.07
"KRN",.404,253,40,13,2)
3,56^23^3,46
"KRN",.404,253,40,13,4)
1
"KRN",.404,255,0)
WV PATIENT-EDITBLK-1^790
"KRN",.404,255,40,0)
^.4044I^22^20
"KRN",.404,255,40,1,0)
1^Case Manager^3
"KRN",.404,255,40,1,1)
.1
"KRN",.404,255,40,1,2)
2,21^28^2,7
"KRN",.404,255,40,1,3)
!M
"KRN",.404,255,40,1,3.1)
S:$D(DUZ(2)) Y=IOINHI_"`"_$P(^WV(790.02,DUZ(2),0),U,2)_IOINORM
"KRN",.404,255,40,2,0)
4^Cervical Tx Need^3
"KRN",.404,255,40,2,1)
.11
"KRN",.404,255,40,2,2)
3,65^16^3,47
"KRN",.404,255,40,3,0)
5^Cervical Tx Due Date^3
"KRN",.404,255,40,3,1)
.12
"KRN",.404,255,40,3,2)
4,65^11^4,43
"KRN",.404,255,40,4,0)
7^Currently Pregnant^3
"KRN",.404,255,40,4,1)
.13
"KRN",.404,255,40,4,2)
9,25^3^9,5
"KRN",.404,255,40,4,10)
S:'X DDSBR=9
"KRN",.404,255,40,4,12)
D:'X PUT^DDSVAL(DIE,DA,.14,"")
"KRN",.404,255,40,5,0)
8^EDC^3
"KRN",.404,255,40,5,1)
.14
"KRN",.404,255,40,5,2)
9,37^12^9,32
"KRN",.404,255,40,6,0)
9^DES Daughter^3
"KRN",.404,255,40,6,1)
.15
"KRN",.404,255,40,6,2)
9,69^7^9,55
"KRN",.404,255,40,7,0)
2^Breast Tx Need^3
"KRN",.404,255,40,7,1)
.18
"KRN",.404,255,40,7,2)
3,21^20^3,5
"KRN",.404,255,40,8,0)
5.5^PAP Regimen Start Date^3
"KRN",.404,255,40,8,1)
.17
"KRN",.404,255,40,8,2)
7,25^11^7,1
"KRN",.404,255,40,9,0)
6^Notes (WP)^3
"KRN",.404,255,40,9,1)
1.01
"KRN",.404,255,40,9,2)
8,69^1^8,57
"KRN",.404,255,40,9,4)
^^^0
"KRN",.404,255,40,9,10)
S DDSBR=7
"KRN",.404,255,40,10,0)
3^Breast Tx Due Date^3
"KRN",.404,255,40,10,1)
.19
"KRN",.404,255,40,10,2)
4,21^11^4,1
"KRN",.404,255,40,11,0)
5.3^PAP Regimen^3
"KRN",.404,255,40,11,1)
.16
"KRN",.404,255,40,11,2)
6,25^25^6,12
"KRN",.404,255,40,12,0)
10^Date of 1st Encounter^3
"KRN",.404,255,40,12,1)
.21
"KRN",.404,255,40,12,2)
10,25^11^10,2
"KRN",.404,255,40,12,3)
!M
"KRN",.404,255,40,12,3.1)
S Y="T"
"KRN",.404,255,40,13,0)
6.1^!M^1^
"KRN",.404,255,40,13,.1)
N WVROOT S WVROOT=$$GET^DDSVAL(DIE,DA,1.01) I WVROOT]"",$O(@WVROOT@(0)) S Y="+"
"KRN",.404,255,40,13,2)
^^8,69
"KRN",.404,255,40,14,0)
11^Referral Source^3
"KRN",.404,255,40,14,1)
.22
"KRN",.404,255,40,14,2)
10,69^8^10,52
"KRN",.404,255,40,15,0)
6.5^Family Hx of Breast CA^3
"KRN",.404,255,40,15,1)
.23
"KRN",.404,255,40,15,2)
8,25^23^8,1
"KRN",.404,255,40,16,0)
1.2^Inactive Date^3
"KRN",.404,255,40,16,1)
.24
"KRN",.404,255,40,16,2)
2,65^11^2,50
"KRN",.404,255,40,16,10)
S:X DDSBR=99
"KRN",.404,255,40,17,0)
99^ ^1
"KRN",.404,255,40,17,2)
^^10,78
"KRN",.404,255,40,18,0)
3.5^Breast Tx Facility^3
"KRN",.404,255,40,18,1)
.25
"KRN",.404,255,40,18,2)
5,21^20^5,1
"KRN",.404,255,40,19,0)
5.2^Cervical Tx Facility^3
"KRN",.404,255,40,19,1)
.26
"KRN",.404,255,40,19,2)
5,65^15^5,43
"KRN",.404,255,40,22,0)
5.7^Sexual Trauma^3
"KRN",.404,255,40,22,1)
.27
"KRN",.404,255,40,22,2)
7,69^12^7,54
"KRN",.404,255,40,22,3)
!M
"KRN",.404,255,40,22,3.1)
S Y=$G(WVMST)
"KRN",.404,255,40,22,10)
S DDSBR=6.5
"KRN",.404,256,0)
WV PROC-EDITBLK-2-COLP^790.1
"KRN",.404,256,11)

"KRN",.404,256,40,0)
^.4044I^16^14
"KRN",.404,256,40,2,0)
2^T-Zone Seen Entirely^3
"KRN",.404,256,40,2,1)
.21
"KRN",.404,256,40,2,2)
3,25^3^3,3
"KRN",.404,256,40,3,0)
3^Lesion Outside Canal^3
"KRN",.404,256,40,3,1)
.22
"KRN",.404,256,40,3,2)
4,25^3^4,3
"KRN",.404,256,40,4,0)
4^Satisfactory Exam^3
"KRN",.404,256,40,4,1)
.2
"KRN",.404,256,40,4,2)
5,25^3^5,6
"KRN",.404,256,40,5,0)
5^Multifocal^3
"KRN",.404,256,40,5,1)
.23
"KRN",.404,256,40,5,2)
3,67^3^3,55
"KRN",.404,256,40,6,0)
6^Number of Quadrants^3
"KRN",.404,256,40,6,1)
.24
"KRN",.404,256,40,6,2)
4,67^3^4,46
"KRN",.404,256,40,8,0)
8^ECC Dysplasia^3
"KRN",.404,256,40,8,1)
.25
"KRN",.404,256,40,8,2)
7,25^20^7,10
"KRN",.404,256,40,8,12)
S:'$$MARGIN^WVUTL4(DA) DDSBR=9
"KRN",.404,256,40,9,0)
9^Ectocervical Biopsy^3
"KRN",.404,256,40,9,1)
.26
"KRN",.404,256,40,9,2)
8,25^30^8,4
"KRN",.404,256,40,9,11)
S WVPN=$O(^WV(790.2,"B","ECTOCERVICAL BIOPSY",0))
"KRN",.404,256,40,9,12)
K WVPN
"KRN",.404,256,40,10,0)
12^!M^1^
"KRN",.404,256,40,10,.1)
S Y="(PAGE 2 OF 2)"
"KRN",.404,256,40,10,2)
^^9,58^
"KRN",.404,256,40,11,0)
11^STD Evaluation^3
"KRN",.404,256,40,11,1)
.28
"KRN",.404,256,40,11,2)
9,25^30^9,9^0
"KRN",.404,256,40,11,11)
S WVPN=$O(^WV(790.2,"B","STD EVALUATION",0))
"KRN",.404,256,40,11,12)
K WVPN
"KRN",.404,256,40,12,0)
8.5^Margins Clear^3
"KRN",.404,256,40,12,1)
.27
"KRN",.404,256,40,12,2)
7,73^3^7,58^0
"KRN",.404,256,40,13,0)
6.5^IMPRESSION^3
"KRN",.404,256,40,13,1)
.29
"KRN",.404,256,40,13,2)
6,25^30^6,13
"KRN",.404,256,40,13,11)
S WVPN=$$GET^DDSVAL(DIE,DA,.04)
"KRN",.404,256,40,13,12)
K WVPN
"KRN",.404,256,40,14,0)
.5^Screening PAP^3
"KRN",.404,256,40,14,1)
.3
"KRN",.404,256,40,14,2)
2,25^10^2,10
"KRN",.404,256,40,15,0)
10^Stage^3
"KRN",.404,256,40,15,1)
.31
"KRN",.404,256,40,15,2)
8,65^10^8,58^0
"KRN",.404,256,40,16,0)
6.4^Quadrant Locations^3
"KRN",.404,256,40,16,1)
.245
"KRN",.404,256,40,16,2)
5,67^11^5,47
"KRN",.404,257,0)
WV NOTIF-EDITBLK-2^790.4
"KRN",.404,257,11)
D HLP^DDSUTL("*** NOTE: Most fields cannot be edited because the letter has been printed. ***")
"KRN",.404,257,40,0)
^.4044I^13^13
"KRN",.404,257,40,1,0)
3^Date of Notification^3
"KRN",.404,257,40,1,1)
.02
"KRN",.404,257,40,1,2)
3,25^12^3,3
"KRN",.404,257,40,1,3)
T
"KRN",.404,257,40,1,4)
^^^1
"KRN",.404,257,40,2,0)
1^Accession#^3
"KRN",.404,257,40,2,1)
.06
"KRN",.404,257,40,2,2)
2,15^12^2,3
"KRN",.404,257,40,2,4)
^^^1
"KRN",.404,257,40,2,11)
S DIC("S")="I $P(^WV(790.1,Y,0),U,2)=WVDFN"
"KRN",.404,257,40,2,12)
I X]"" W ?46,IOINORM,"PROCEDURE: ",$$NTPROC^WVUTL1A,IOELEOL
"KRN",.404,257,40,3,0)
6^Type of Notification^3
"KRN",.404,257,40,3,1)
.03
"KRN",.404,257,40,3,2)
6,29^26^6,7
"KRN",.404,257,40,3,4)
^^^1
"KRN",.404,257,40,3,10)
I X S:'$P(^WV(790.403,X,0),U,2) DDSBR=7
"KRN",.404,257,40,3,13)
D PRTDATE^WVUTL2
"KRN",.404,257,40,4,0)
4^Purpose of Notification^3
"KRN",.404,257,40,4,1)
.04
"KRN",.404,257,40,4,2)
4,29^50^4,4
"KRN",.404,257,40,4,4)
^^^1
"KRN",.404,257,40,4,13)
S Y=X W !?18,"PRIORITY: ",$$PRIOR1^WVUTL1A,"     " S X=$$NDELQ1^WVUTL4 D PUT^DDSVAL(DIE,DA,.13,X)
"KRN",.404,257,40,5,0)
8^Outcome^3
"KRN",.404,257,40,5,1)
.05
"KRN",.404,257,40,5,2)
8,29^30^8,20
"KRN",.404,257,40,5,12)
S X=$S(X:"c",1:"o") D PUT^DDSVAL(790.4,DA,.14,X)
"KRN",.404,257,40,6,0)
9^Status^3
"KRN",.404,257,40,6,1)
.14
"KRN",.404,257,40,6,2)
9,29^6^9,21
"KRN",.404,257,40,7,0)
5^!M^1^
"KRN",.404,257,40,7,.1)
S Y="Priority: "_IOINHI_$$PRIOR^WVUTL1A_IOINORM
"KRN",.404,257,40,7,2)
^^5,19
"KRN",.404,257,40,8,0)
2^!M^1^
"KRN",.404,257,40,8,.1)
S Y=IOINORM_"Procedure: "_IOINHI_$$NTPROC^WVUTL1A_IOINORM
"KRN",.404,257,40,8,2)
^^2,38
"KRN",.404,257,40,9,0)
10^Patient Ed^3
"KRN",.404,257,40,9,1)
.09
"KRN",.404,257,40,9,2)
9,69^7^9,57
"KRN",.404,257,40,10,0)
7^Complete by (Date)^3
"KRN",.404,257,40,10,1)
.13
"KRN",.404,257,40,10,2)
7,29^12^7,9
"KRN",.404,257,40,10,4)
^^^1
"KRN",.404,257,40,11,0)
6.5^Print Date^3
"KRN",.404,257,40,11,1)
.11
"KRN",.404,257,40,11,2)
6,69^11^6,57
"KRN",.404,257,40,11,4)
^^^1
"KRN",.404,257,40,12,0)
7.5^Printed^3
"KRN",.404,257,40,12,1)
.1
"KRN",.404,257,40,12,2)
7,69^12^7,60
"KRN",.404,257,40,12,4)
^^^1
"KRN",.404,257,40,12,11)
W IOINHI
"KRN",.404,257,40,12,12)
W IOINORM
"KRN",.404,257,40,13,0)
3.5^Facility^3
"KRN",.404,257,40,13,1)
.07
"KRN",.404,257,40,13,2)
3,56^23^3,46
"KRN",.404,257,40,13,4)
^^^1
"KRN",.404,260,0)
WV SITE PARAMS-EDITBLK-1^790.02
"KRN",.404,260,40,0)
^.4044I^12^10
"KRN",.404,260,40,1,0)
1^!M^1^
"KRN",.404,260,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,260,40,1,2)
^^3,12^
"KRN",.404,260,40,2,0)
2^________________________________________________________________________________^1^
"KRN",.404,260,40,2,2)
^^4,1^
"KRN",.404,260,40,4,0)
4^Default Case Manager^3
"KRN",.404,260,40,4,1)
.02
"KRN",.404,260,40,4,2)
6,33^30^6,11^0
"KRN",.404,260,40,5,0)
5^Ask Case Manager^3
"KRN",.404,260,40,5,1)
.05
"KRN",.404,260,40,5,2)
7,33^3^7,15^0
"KRN",.404,260,40,6,0)
6^Autoqueue Normal PAP Letters^3
"KRN",.404,260,40,6,1)
.03
"KRN",.404,260,40,6,2)
9,33^3^9,3^0
"KRN",.404,260,40,7,0)
7^PAP Result Normal Letter^3
"KRN",.404,260,40,7,1)
.04
"KRN",.404,260,40,7,2)
10,33^47^10,7^0
"KRN",.404,260,40,8,0)
8^Autoqueue Normal MAM Letters^3
"KRN",.404,260,40,8,1)
.07
"KRN",.404,260,40,8,2)
11,33^3^11,3^0
"KRN",.404,260,40,9,0)
9^MAM Result Normal Letter^3
"KRN",.404,260,40,9,1)
.08
"KRN",.404,260,40,9,2)
12,33^47^12,7^0
"KRN",.404,260,40,10,0)
10^Default #days to print letter^3
"KRN",.404,260,40,10,1)
.06
"KRN",.404,260,40,10,2)
14,33^3^14,2^0
"KRN",.404,260,40,12,0)
12^!M^1^
"KRN",.404,260,40,12,.1)
S Y="(PAGE 1 OF 6)"
"KRN",.404,260,40,12,2)
^^17,58
"KRN",.404,261,0)
WV SITE PARAMS-EDITBLK-2^790.02
"KRN",.404,261,40,0)
^.4044I^22^8
"KRN",.404,261,40,1,0)
1^!M^1^
"KRN",.404,261,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,261,40,1,2)
^^3,12
"KRN",.404,261,40,2,0)
2^________________________________________________________________________________^1^
"KRN",.404,261,40,2,2)
^^4,1
"KRN",.404,261,40,10,0)
6.1^Import Mammograms from Radiology^3
"KRN",.404,261,40,10,1)
.1
"KRN",.404,261,40,10,2)
5,51^3^5,17
"KRN",.404,261,40,10,10)
S:X'=1 DDSBR="2^WV SITE PARAMS-EDITBLK-2.2"
"KRN",.404,261,40,10,12)
I X'=1 D PUT^DDSVAL(DIE,DA,.23,"@"),PUT^DDSVAL(DIE,DA,.25,"@"),HELP^WVUTL9(DA,5,"RADIOLOGY")
"KRN",.404,261,40,11,0)
11^!M^1^
"KRN",.404,261,40,11,.1)
S Y="(PAGE 2 OF 6)"
"KRN",.404,261,40,11,2)
^^17,58
"KRN",.404,261,40,14,0)
6.2^Status Given to Imported Mammograms^3
"KRN",.404,261,40,14,1)
.23
"KRN",.404,261,40,14,2)
6,54^6^6,17
"KRN",.404,261,40,17,0)
6^RADIOLOGY:^1
"KRN",.404,261,40,17,2)
^^5,5
"KRN",.404,261,40,20,0)
6.3^Include ALL Non-Veterans(Y/N)?^3
"KRN",.404,261,40,20,1)
.25
"KRN",.404,261,40,20,2)
7,49^3^7,17
"KRN",.404,261,40,20,10)
S:X=1 DDSBR="2^WV SITE PARAMS-EDITBLK-2.2"
"KRN",.404,261,40,20,12)
I X=1 D HELP^WVUTL9(DA,5,"RADIOLOGY")
"KRN",.404,261,40,22,0)
6.4^ELIGIBILITY CODE(S):^1
"KRN",.404,261,40,22,2)
^^8,5
"KRN",.404,312,0)
WV SITE PATAMS-EDITBLK-3^790.02
"KRN",.404,312,40,0)
^.4044I^36^36
"KRN",.404,312,40,1,0)
1^!M^1
"KRN",.404,312,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,312,40,1,2)
^^3,12
"KRN",.404,312,40,2,0)
2^________________________________________________________________________________^1
"KRN",.404,312,40,2,2)
^^4,1
"KRN",.404,312,40,3,0)
3^Procedure Type^1
"KRN",.404,312,40,3,2)
^^6,5
"KRN",.404,312,40,4,0)
3.1^Active^1
"KRN",.404,312,40,4,2)
^^6,31
"KRN",.404,312,40,5,0)
3.3^DAYS DELINQUENT^1
"KRN",.404,312,40,5,2)
^^6,43
"KRN",.404,312,40,6,0)
4^--------------------^1
"KRN",.404,312,40,6,2)
^^7,5
"KRN",.404,312,40,7,0)
4.1^------^1
"KRN",.404,312,40,7,2)
^^7,31
"KRN",.404,312,40,8,0)
5^---------------^1
"KRN",.404,312,40,8,2)
^^7,43
"KRN",.404,312,40,9,0)
4.5^Breast Ultrasound^1
"KRN",.404,312,40,9,2)
^^8,5
"KRN",.404,312,40,10,0)
6^Clinical Breast Exam^1
"KRN",.404,312,40,10,2)
^^9,5
"KRN",.404,312,40,11,0)
7^Colposcopy Impr (No Bx)^1
"KRN",.404,312,40,11,2)
^^10,5
"KRN",.404,312,40,12,0)
8^Colposcopy w/Biopsy^1
"KRN",.404,312,40,12,2)
^^11,5
"KRN",.404,312,40,13,0)
8.1^Cone Biopsy^1
"KRN",.404,312,40,13,2)
^^12,5
"KRN",.404,312,40,14,0)
9^Cryotherapy^1
"KRN",.404,312,40,14,2)
^^13,5
"KRN",.404,312,40,15,0)
10^Ectocervical Biopsy^1
"KRN",.404,312,40,15,2)
^^14,5
"KRN",.404,312,40,16,0)
11^Endocervical Currettage^1
"KRN",.404,312,40,16,2)
^^15,5
"KRN",.404,312,40,17,0)
12^Endometrial Biopsy^1
"KRN",.404,312,40,17,2)
^^16,5
"KRN",.404,312,40,18,0)
4.6^^3
"KRN",.404,312,40,18,1)
38.01
"KRN",.404,312,40,18,2)
8,32^3
"KRN",.404,312,40,19,0)
6.1^^3
"KRN",.404,312,40,19,1)
27.01
"KRN",.404,312,40,19,2)
9,32^3
"KRN",.404,312,40,20,0)
6.6^^3
"KRN",.404,312,40,20,1)
37.01
"KRN",.404,312,40,20,2)
10,32^3
"KRN",.404,312,40,21,0)
7.1^^3
"KRN",.404,312,40,21,1)
2.01
"KRN",.404,312,40,21,2)
11,32^3
"KRN",.404,312,40,22,0)
8.2^^3
"KRN",.404,312,40,22,1)
19.01
"KRN",.404,312,40,22,2)
12,32^3
"KRN",.404,312,40,23,0)
9.1^^3
"KRN",.404,312,40,23,1)
4.01
"KRN",.404,312,40,23,2)
13,32^3
"KRN",.404,312,40,24,0)
10.1^^3
"KRN",.404,312,40,24,1)
17.01
"KRN",.404,312,40,24,2)
14,32^3
"KRN",.404,312,40,25,0)
11.1^^3
"KRN",.404,312,40,25,1)
18.01
"KRN",.404,312,40,25,2)
15,32^3
"KRN",.404,312,40,26,0)
12.1^^3
"KRN",.404,312,40,26,1)
8.01
"KRN",.404,312,40,26,2)
16,32^3
"KRN",.404,312,40,27,0)
4.8^^3
"KRN",.404,312,40,27,1)
38.03
"KRN",.404,312,40,27,2)
8,48^4
"KRN",.404,312,40,28,0)
6.3^^3
"KRN",.404,312,40,28,1)
27.03
"KRN",.404,312,40,28,2)
9,48^4
"KRN",.404,312,40,29,0)
6.8^^3
"KRN",.404,312,40,29,1)
37.03
"KRN",.404,312,40,29,2)
10,48^4
"KRN",.404,312,40,30,0)
7.3^^3
"KRN",.404,312,40,30,1)
2.03
"KRN",.404,312,40,30,2)
11,48^4
"KRN",.404,312,40,31,0)
8.3^^3
"KRN",.404,312,40,31,1)
19.03
"KRN",.404,312,40,31,2)
12,48^4
"KRN",.404,312,40,32,0)
9.3^^3
"KRN",.404,312,40,32,1)
4.03
"KRN",.404,312,40,32,2)
13,48^4
"KRN",.404,312,40,33,0)
10.3^^3
"KRN",.404,312,40,33,1)
7.03
"KRN",.404,312,40,33,2)
14,48^4
"KRN",.404,312,40,34,0)
11.3^^3
"KRN",.404,312,40,34,1)
18.03
"KRN",.404,312,40,34,2)
15,48^4
"KRN",.404,312,40,35,0)
12.3^^3
"KRN",.404,312,40,35,1)
8.03
"KRN",.404,312,40,35,2)
16,48^4
"KRN",.404,312,40,36,0)
20^!M^1
"KRN",.404,312,40,36,.1)
S Y="(PAGE 3 OF 6)"
"KRN",.404,312,40,36,2)
^^17,57
"KRN",.404,313,0)
WV SITE PARAMS-EDITBLK-4^790.02
"KRN",.404,313,40,0)
^.4044I^36^36
"KRN",.404,313,40,1,0)
1^!M^1
"KRN",.404,313,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,313,40,1,2)
^^3,12
"KRN",.404,313,40,2,0)
2^________________________________________________________________________________^1
"KRN",.404,313,40,2,2)
^^4,1
"KRN",.404,313,40,3,0)
3^Procedure Type^1
"KRN",.404,313,40,3,2)
^^6,5
"KRN",.404,313,40,4,0)
3.1^Active^1
"KRN",.404,313,40,4,2)
^^6,31
"KRN",.404,313,40,5,0)
3.2^DAYS DELINQUENT^1
"KRN",.404,313,40,5,2)
^^6,43
"KRN",.404,313,40,6,0)
4^--------------------^1
"KRN",.404,313,40,6,2)
^^7,5
"KRN",.404,313,40,7,0)
4.1^------^1
"KRN",.404,313,40,7,2)
^^7,31
"KRN",.404,313,40,8,0)
4.2^---------------^1
"KRN",.404,313,40,8,2)
^^7,43
"KRN",.404,313,40,9,0)
4.5^Fine Needle Aspiration^1
"KRN",.404,313,40,9,2)
^^8,5
"KRN",.404,313,40,10,0)
4.6^^3
"KRN",.404,313,40,10,1)
34.01
"KRN",.404,313,40,10,2)
8,32^3
"KRN",.404,313,40,11,0)
4.8^^3
"KRN",.404,313,40,11,1)
34.03
"KRN",.404,313,40,11,2)
8,48^4
"KRN",.404,313,40,12,0)
5^General Surgery Consult^1
"KRN",.404,313,40,12,2)
^^9,5
"KRN",.404,313,40,13,0)
5.1^^3
"KRN",.404,313,40,13,1)
29.01
"KRN",.404,313,40,13,2)
9,32^3
"KRN",.404,313,40,14,0)
5.3^^3
"KRN",.404,313,40,14,1)
29.03
"KRN",.404,313,40,14,2)
9,48^4
"KRN",.404,313,40,15,0)
6^Gyn Onc Consult^1
"KRN",.404,313,40,15,2)
^^10,5
"KRN",.404,313,40,16,0)
6.1^^3
"KRN",.404,313,40,16,1)
24.01
"KRN",.404,313,40,16,2)
10,32^3
"KRN",.404,313,40,17,0)
6.3^^3
"KRN",.404,313,40,17,1)
24.03
"KRN",.404,313,40,17,2)
10,48^4
"KRN",.404,313,40,18,0)
7^Hysterectomy^1
"KRN",.404,313,40,18,2)
^^11,5
"KRN",.404,313,40,19,0)
7.1^^3
"KRN",.404,313,40,19,1)
3.01
"KRN",.404,313,40,19,2)
11,32^3
"KRN",.404,313,40,20,0)
7.3^^3
"KRN",.404,313,40,20,1)
3.03
"KRN",.404,313,40,20,2)
11,48^4
"KRN",.404,313,40,21,0)
8^Laser Abilation^1
"KRN",.404,313,40,21,2)
^^12,5
"KRN",.404,313,40,22,0)
8.1^^3
"KRN",.404,313,40,22,1)
22.01
"KRN",.404,313,40,22,2)
12,32^3
"KRN",.404,313,40,23,0)
8.3^^3
"KRN",.404,313,40,23,1)
22.03
"KRN",.404,313,40,23,2)
12,48^4
"KRN",.404,313,40,24,0)
9^Laser Cone^1
"KRN",.404,313,40,24,2)
^^13,5
"KRN",.404,313,40,25,0)
9.1^^3
"KRN",.404,313,40,25,1)
23.01
"KRN",.404,313,40,25,2)
13,32^3
"KRN",.404,313,40,26,0)
9.3^^3
"KRN",.404,313,40,26,1)
23.03
"KRN",.404,313,40,26,2)
13,48^4
"KRN",.404,313,40,27,0)
10^LEEP^1
"KRN",.404,313,40,27,2)
^^14,5
"KRN",.404,313,40,28,0)
10.1^^3
"KRN",.404,313,40,28,1)
17.01
"KRN",.404,313,40,28,2)
14,32^3
"KRN",.404,313,40,29,0)
10.3^^3
"KRN",.404,313,40,29,1)
17.03
"KRN",.404,313,40,29,2)
14,48^4
"KRN",.404,313,40,30,0)
11^Lumpectomy^1
"KRN",.404,313,40,30,2)
^^15,5
"KRN",.404,313,40,31,0)
11.1^^3
"KRN",.404,313,40,31,1)
32.01
"KRN",.404,313,40,31,2)
15,32^3
"KRN",.404,313,40,32,0)
11.3^^3
"KRN",.404,313,40,32,1)
32.03
"KRN",.404,313,40,32,2)
15,48^4
"KRN",.404,313,40,33,0)
12^Mammogram Dx Bilat^1
"KRN",.404,313,40,33,2)
^^16,5
"KRN",.404,313,40,34,0)
12.1^^3
"KRN",.404,313,40,34,1)
25.01
"KRN",.404,313,40,34,2)
16,32^3
"KRN",.404,313,40,35,0)
12.3^^3
"KRN",.404,313,40,35,1)
25.03
"KRN",.404,313,40,35,2)
16,48^4
"KRN",.404,313,40,36,0)
20^!M^1
"KRN",.404,313,40,36,.1)
S Y="(PAGE 4 OF 6)"
"KRN",.404,313,40,36,2)
^^17,58
"KRN",.404,314,0)
WV SITE PARAMS-EDITBLK-5^790.02
"KRN",.404,314,40,0)
^.4044I^36^36
"KRN",.404,314,40,1,0)
1^!M^1
"KRN",.404,314,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,314,40,1,2)
^^3,12
"KRN",.404,314,40,2,0)
2^________________________________________________________________________________^1
"KRN",.404,314,40,2,2)
^^4,1
"KRN",.404,314,40,3,0)
3^Procedure Type^1
"KRN",.404,314,40,3,2)
^^6,5
"KRN",.404,314,40,4,0)
3.1^Active^1
"KRN",.404,314,40,4,2)
^^6,31
"KRN",.404,314,40,5,0)
3.3^DAYS DELINQUENT^1
"KRN",.404,314,40,5,2)
^^6,43
"KRN",.404,314,40,6,0)
4^--------------------^1
"KRN",.404,314,40,6,2)
^^7,5
"KRN",.404,314,40,7,0)
4.1^------^1
"KRN",.404,314,40,7,2)
^^7,31
"KRN",.404,314,40,8,0)
4.3^---------------^1
"KRN",.404,314,40,8,2)
^^7,43
"KRN",.404,314,40,9,0)
5^Mamogram Dx Unilat^1
"KRN",.404,314,40,9,2)
^^8,5
"KRN",.404,314,40,10,0)
5.1^^3
"KRN",.404,314,40,10,1)
26.01
"KRN",.404,314,40,10,2)
8,32^3
"KRN",.404,314,40,11,0)
5.3^^3
"KRN",.404,314,40,11,1)
26.03
"KRN",.404,314,40,11,2)
8,48^4
"KRN",.404,314,40,12,0)
6^Mammogram Screening^1
"KRN",.404,314,40,12,2)
^^9,5
"KRN",.404,314,40,13,0)
6.1^^3
"KRN",.404,314,40,13,1)
28.01
"KRN",.404,314,40,13,2)
9,32^3
"KRN",.404,314,40,14,0)
6.2^^3
"KRN",.404,314,40,14,1)
28.03
"KRN",.404,314,40,14,2)
9,48^4
"KRN",.404,314,40,15,0)
7^Mastectomy^1
"KRN",.404,314,40,15,2)
^^10,5
"KRN",.404,314,40,16,0)
7.1^^3
"KRN",.404,314,40,16,1)
33.01
"KRN",.404,314,40,16,2)
10,32^3
"KRN",.404,314,40,17,0)
7.3^^3
"KRN",.404,314,40,17,1)
33.03
"KRN",.404,314,40,17,2)
10,48^4
"KRN",.404,314,40,18,0)
8^Needle Biopsy^1
"KRN",.404,314,40,18,2)
^^11,5
"KRN",.404,314,40,19,0)
8.1^^3
"KRN",.404,314,40,19,1)
30.01
"KRN",.404,314,40,19,2)
11,32^3
"KRN",.404,314,40,20,0)
8.3^^3
"KRN",.404,314,40,20,1)
30.03
"KRN",.404,314,40,20,2)
11,48^4
"KRN",.404,314,40,21,0)
9^Open Biopsy^1
"KRN",.404,314,40,21,2)
^^12,5
"KRN",.404,314,40,22,0)
9.1^^3
"KRN",.404,314,40,22,1)
31.01
"KRN",.404,314,40,22,2)
12,32^3
"KRN",.404,314,40,23,0)
9.3^^3
"KRN",.404,314,40,23,1)
31.03
"KRN",.404,314,40,23,2)
12,48^4
"KRN",.404,314,40,24,0)
10^PAP Smear^1
"KRN",.404,314,40,24,2)
^^13,5
"KRN",.404,314,40,25,0)
10.1^^3
"KRN",.404,314,40,25,1)
1.01
"KRN",.404,314,40,25,2)
13,32^3
"KRN",.404,314,40,26,0)
10.3^^3
"KRN",.404,314,40,26,1)
1.03
"KRN",.404,314,40,26,2)
13,48^4
"KRN",.404,314,40,27,0)
11^Pelvic Ultrasound^1
"KRN",.404,314,40,27,2)
^^14,5
"KRN",.404,314,40,28,0)
11.1^^3
"KRN",.404,314,40,28,1)
40.01
"KRN",.404,314,40,28,2)
14,32^3
"KRN",.404,314,40,29,0)
11.3^^3
"KRN",.404,314,40,29,1)
40.03
"KRN",.404,314,40,29,2)
14,48^4
"KRN",.404,314,40,30,0)
12^Pregnancy Test^1
"KRN",.404,314,40,30,2)
^^15,5
"KRN",.404,314,40,31,0)
12.1^^3
"KRN",.404,314,40,31,1)
20.01
"KRN",.404,314,40,31,2)
15,32^3
"KRN",.404,314,40,32,0)
12.3^^3
"KRN",.404,314,40,32,1)
20.03
"KRN",.404,314,40,32,2)
15,48^4
"KRN",.404,314,40,33,0)
13^STD Evaluation^1
"KRN",.404,314,40,33,2)
^^16,5
"KRN",.404,314,40,34,0)
13.1^^3
"KRN",.404,314,40,34,1)
21.01
"KRN",.404,314,40,34,2)
16,32^3
"KRN",.404,314,40,35,0)
13.3^^3
"KRN",.404,314,40,35,1)
21.03
"KRN",.404,314,40,35,2)
16,48^4
"KRN",.404,314,40,36,0)
20^!M^1
"KRN",.404,314,40,36,.1)
S Y="(PAGE 5 OF 6)"
"KRN",.404,314,40,36,2)
^^17,57
"KRN",.404,315,0)
WV PROC-DISPLAY-1^790.1^
"KRN",.404,315,40,0)
^.4044I^35^32
"KRN",.404,315,40,1,0)
1^* * *  EDIT A PROCEDURE  * * *^1
"KRN",.404,315,40,1,2)
^^1,19
"KRN",.404,315,40,2,0)
2^Patient Name:^1
"KRN",.404,315,40,2,2)
^^2,1
"KRN",.404,315,40,3,0)
3^Case Manager:^1
"KRN",.404,315,40,3,2)
^^3,1
"KRN",.404,315,40,5,0)
5^!M^1
"KRN",.404,315,40,5,.1)
S Y="PAP Regimen :"
"KRN",.404,315,40,5,2)
^^4,1
"KRN",.404,315,40,6,0)
6^Br Tx Need  :^1
"KRN",.404,315,40,6,2)
^^6,1
"KRN",.404,315,40,7,0)
2.5^SSN:^1
"KRN",.404,315,40,7,2)
^^2,56
"KRN",.404,315,40,8,0)
3.5^Procedure:^1
"KRN",.404,315,40,8,2)
^^3,50
"KRN",.404,315,40,9,0)
4.5^Cx Facility:^1
"KRN",.404,315,40,9,2)
^^5,48
"KRN",.404,315,40,10,0)
6.5^Br Facility:^1
"KRN",.404,315,40,10,2)
^^6,48
"KRN",.404,315,40,11,0)
5.5^Acc#:^1
"KRN",.404,315,40,11,2)
^^4,55
"KRN",.404,315,40,12,0)
2.2^!M^1
"KRN",.404,315,40,12,.1)
S Y=IOINHI_$$NAME^WVUTL1(WVDFN)_"("_$$AGE^WVUTL1(WVDFN)_")"_IOINORM
"KRN",.404,315,40,12,2)
^^2,15
"KRN",.404,315,40,13,0)
3.2^!M^1
"KRN",.404,315,40,13,.1)
S Y=IOINHI_$$CMGR^WVUTL1(WVDFN)_IOINORM
"KRN",.404,315,40,13,2)
^^3,15
"KRN",.404,315,40,14,0)
4.2^!M^1
"KRN",.404,315,40,14,.1)
S Y=IOINHI_$E($$PROC1^WVUTL1A,1,19)_IOINORM
"KRN",.404,315,40,14,2)
^^3,61
"KRN",.404,315,40,16,0)
5.3^Cx Tx Need  :^1
"KRN",.404,315,40,16,2)
^^5,1
"KRN",.404,315,40,17,0)
5.4^!M^1
"KRN",.404,315,40,17,.1)
S Y=IOINHI_$$CNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,315,40,17,2)
^^5,15
"KRN",.404,315,40,18,0)
4.3^!M^1
"KRN",.404,315,40,18,.1)
S Y=IOINHI_$$PAPRG^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,315,40,18,2)
^^4,15
"KRN",.404,315,40,19,0)
6.2^ ^1
"KRN",.404,315,40,19,2)
^^4,11
"KRN",.404,315,40,20,0)
2.8^!M^1
"KRN",.404,315,40,20,.1)
S Y=IOINHI_$$SSN^WVUTL1(WVDFN)_IOINORM
"KRN",.404,315,40,20,2)
^^2,61
"KRN",.404,315,40,21,0)
4.8^!M^1
"KRN",.404,315,40,21,.1)
S Y=IOINHI_$$ACC^WVUTL1(DA)_IOINORM
"KRN",.404,315,40,21,2)
^^4,61
"KRN",.404,315,40,23,0)
6.4^!M^1
"KRN",.404,315,40,23,.1)
S Y=IOINHI_$$BNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,315,40,23,2)
^^6,15
"KRN",.404,315,40,24,0)
20^--------------------------------------------------------------------------------^1
"KRN",.404,315,40,24,2)
^^9,1
"KRN",.404,315,40,25,0)
19^!M^1
"KRN",.404,315,40,25,.1)
S Y=IOINHI_$$EDC^WVUTL1(WVDFN)_IOINORM
"KRN",.404,315,40,25,2)
^^9,45
"KRN",.404,315,40,26,0)
17^!M^1
"KRN",.404,315,40,26,.1)
S Y=IOINHI_$S($$DES^WVUTL1(WVDFN)="YES":"*DES DAUGHTER*",1:"")
"KRN",.404,315,40,26,2)
^^8,61
"KRN",.404,315,40,27,0)
21^!M^1
"KRN",.404,315,40,27,.1)
S Y=IOINHI_$$FACIL^WVUTL1A(WVDFN,"C")_IOINORM
"KRN",.404,315,40,27,2)
^^5,61
"KRN",.404,315,40,28,0)
22^!M^1
"KRN",.404,315,40,28,.1)
S Y=IOINHI_$$FACIL^WVUTL1A(WVDFN,"B")_IOINORM
"KRN",.404,315,40,28,2)
^^6,61
"KRN",.404,315,40,29,0)
23^Sexual Trauma:^1
"KRN",.404,315,40,29,2)
^^8,1
"KRN",.404,315,40,30,0)
24^!M^1
"KRN",.404,315,40,30,.1)
S Y=IOINHI_$$MST^WVUTL1A(WVDFN)_IOINORM
"KRN",.404,315,40,30,2)
^^8,16
"KRN",.404,315,40,32,0)
25^Veteran:^1
"KRN",.404,315,40,32,2)
^^7,52
"KRN",.404,315,40,33,0)
26^!M^1
"KRN",.404,315,40,33,.1)
S Y=IOINHI_$$VET^WVUTL1A(WVDFN)_IOINORM
"KRN",.404,315,40,33,2)
^^7,61
"KRN",.404,315,40,34,0)
27^Elig Code   :^1
"KRN",.404,315,40,34,2)
^^7,1
"KRN",.404,315,40,35,0)
28^!M^1
"KRN",.404,315,40,35,.1)
S Y=IOINHI_$P($$ELIG^WVUTL9(WVDFN),U,2)_IOINORM
"KRN",.404,315,40,35,2)
^^7,15
"KRN",.404,318,0)
WV REFUSAL-DISPLAY-1^790.1^
"KRN",.404,318,40,0)
^.4044I^34^26
"KRN",.404,318,40,1,0)
1^* * *  ADD/EDIT A REFUSAL  * * *^1
"KRN",.404,318,40,1,2)
^^1,22
"KRN",.404,318,40,2,0)
2^Patient Name:^1
"KRN",.404,318,40,2,2)
^^3,1
"KRN",.404,318,40,3,0)
3^Case Manager:^1
"KRN",.404,318,40,3,2)
^^4,1
"KRN",.404,318,40,5,0)
5^!M^1
"KRN",.404,318,40,5,.1)
S Y="PAP Regimen:"
"KRN",.404,318,40,5,2)
^^4,48
"KRN",.404,318,40,6,0)
6^Br Tx Need  :^1
"KRN",.404,318,40,6,2)
^^6,1
"KRN",.404,318,40,7,0)
2.5^SSN:^1
"KRN",.404,318,40,7,2)
^^3,56
"KRN",.404,318,40,9,0)
4.5^Cx Tx Fac:^1
"KRN",.404,318,40,9,2)
^^5,50
"KRN",.404,318,40,10,0)
6.5^Br Tx Fac:^1
"KRN",.404,318,40,10,2)
^^6,50
"KRN",.404,318,40,12,0)
2.2^!M^1
"KRN",.404,318,40,12,.1)
S Y=IOINHI_$$NAME^WVUTL1(WVDFN)_"("_$$AGE^WVUTL1(WVDFN)_")"_IOINORM
"KRN",.404,318,40,12,2)
^^3,15
"KRN",.404,318,40,13,0)
3.2^!M^1
"KRN",.404,318,40,13,.1)
S Y=IOINHI_$$CMGR^WVUTL1(WVDFN)_IOINORM
"KRN",.404,318,40,13,2)
^^4,15
"KRN",.404,318,40,16,0)
5.3^Cx Tx Need  :^1
"KRN",.404,318,40,16,2)
^^5,1
"KRN",.404,318,40,17,0)
5.4^!M^1
"KRN",.404,318,40,17,.1)
S Y=IOINHI_$$CNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,318,40,17,2)
^^5,15
"KRN",.404,318,40,18,0)
4.3^!M^1
"KRN",.404,318,40,18,.1)
S Y=IOINHI_$$PAPRG^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,318,40,18,2)
^^4,61
"KRN",.404,318,40,20,0)
2.8^!M^1
"KRN",.404,318,40,20,.1)
S Y=IOINHI_$$SSN^WVUTL1(WVDFN)_IOINORM
"KRN",.404,318,40,20,2)
^^3,61
"KRN",.404,318,40,23,0)
6.4^!M^1
"KRN",.404,318,40,23,.1)
S Y=IOINHI_$$BNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,318,40,23,2)
^^6,15
"KRN",.404,318,40,24,0)
20^--------------------------------------------------------------------------------^1
"KRN",.404,318,40,24,2)
^^10,1
"KRN",.404,318,40,25,0)
19^!M^1
"KRN",.404,318,40,25,.1)
S Y=$$EDC^WVUTL1(WVDFN)
"KRN",.404,318,40,25,2)
^^9,45
"KRN",.404,318,40,26,0)
17^!M^1
"KRN",.404,318,40,26,.1)
S Y=IOINHI_$S($$DES^WVUTL1(WVDFN)="YES":"*DES DAUGHTER*",1:"")
"KRN",.404,318,40,26,2)
^^8,61
"KRN",.404,318,40,27,0)
21^!M^1
"KRN",.404,318,40,27,.1)
S Y=IOINHI_$$FACIL^WVUTL1A(WVDFN,"C")_IOINORM
"KRN",.404,318,40,27,2)
^^5,61
"KRN",.404,318,40,28,0)
22^!M^1
"KRN",.404,318,40,28,.1)
S Y=IOINHI_$$FACIL^WVUTL1A(WVDFN,"B")_IOINORM
"KRN",.404,318,40,28,2)
^^6,61
"KRN",.404,318,40,29,0)
23^Sexual Trauma:^1
"KRN",.404,318,40,29,2)
^^8,1
"KRN",.404,318,40,30,0)
24^!M^1
"KRN",.404,318,40,30,.1)
S Y=IOINHI_$$MST^WVUTL1A(WVDFN)_IOINORM
"KRN",.404,318,40,30,2)
^^8,16
"KRN",.404,318,40,31,0)
25^Veteran:^1
"KRN",.404,318,40,31,2)
^^7,52
"KRN",.404,318,40,32,0)
26^!M^1
"KRN",.404,318,40,32,.1)
S Y=IOINHI_$$VET^WVUTL1A(WVDFN)_IOINORM
"KRN",.404,318,40,32,2)
^^7,61
"KRN",.404,318,40,33,0)
27^Elig Code   :^1
"KRN",.404,318,40,33,2)
^^7,1
"KRN",.404,318,40,34,0)
28^!M^1
"KRN",.404,318,40,34,.1)
S Y=IOINHI_$P($$ELIG^WVUTL9(WVDFN),U,2)_IOINORM
"KRN",.404,318,40,34,2)
^^7,15
"KRN",.404,319,0)
WV REFUSAL-EDIT-1^790.3
"KRN",.404,319,40,0)
^.4044I^5^4
"KRN",.404,319,40,1,0)
1^Date Refused^3
"KRN",.404,319,40,1,1)
.01
"KRN",.404,319,40,1,2)
2,15^11^2,1
"KRN",.404,319,40,1,11)
W IOINHI
"KRN",.404,319,40,1,12)
W IOINORM
"KRN",.404,319,40,2,0)
4^Reason^3
"KRN",.404,319,40,2,1)
3
"KRN",.404,319,40,2,2)
6,15^17^6,7
"KRN",.404,319,40,3,0)
5^Comments^3
"KRN",.404,319,40,3,1)
4
"KRN",.404,319,40,3,2)
8,15^63^8,5
"KRN",.404,319,40,5,0)
3^Procedure^3
"KRN",.404,319,40,5,1)
2
"KRN",.404,319,40,5,2)
4,15^30^4,4
"KRN",.404,324,0)
WV PROC-EDITBLK-LAB^790.1
"KRN",.404,324,11)

"KRN",.404,324,15,0)
1^^1^1^2960118^^^^
"KRN",.404,324,15,1,0)
WV PROCEDURE-EDIT-BLOCK-1
"KRN",.404,324,40,0)
^.4044I^5^4
"KRN",.404,324,40,1,0)
1^Date of Procedure^3
"KRN",.404,324,40,1,1)
.12
"KRN",.404,324,40,1,2)
3,25^18^3,6
"KRN",.404,324,40,1,3)
T
"KRN",.404,324,40,1,4)
1
"KRN",.404,324,40,1,13)
N WVX S WVX=$$PDELQ1^WVUTL4(DA,X,DUZ(2)) D PUT^DDSVAL(DIE,DA,.13,WVX)
"KRN",.404,324,40,3,0)
3^Clinician/Provider^3
"KRN",.404,324,40,3,1)
.07
"KRN",.404,324,40,3,2)
4,25^25^4,5
"KRN",.404,324,40,3,4)
0
"KRN",.404,324,40,4,0)
4^Ward/Clinic/Location^3
"KRN",.404,324,40,4,1)
.11
"KRN",.404,324,40,4,2)
5,25^30^5,3
"KRN",.404,324,40,4,4)
0
"KRN",.404,324,40,4,12)

"KRN",.404,324,40,4,13)
D PUT^DDSVAL(790.1,.DA,.1,$$INSTIT^WVUTL6)
"KRN",.404,324,40,5,0)
5^Health Care Facility^3
"KRN",.404,324,40,5,1)
.1
"KRN",.404,324,40,5,2)
6,25^30^6,3
"KRN",.404,324,40,5,4)
1
"KRN",.404,326,0)
WV PATIENT-HEADER-2^790^
"KRN",.404,326,40,0)
^.4044I^10^10
"KRN",.404,326,40,1,0)
1^* * *  EDIT PATIENT CASE DATA  * * *^1
"KRN",.404,326,40,1,2)
^^1,22
"KRN",.404,326,40,2,0)
2^!M^1
"KRN",.404,326,40,2,.1)
S Y=IOINORM_"Patient Name: "_IOINHI_$$NAME^WVUTL1(WVDFN)_"("_$$AGE^WVUTL1(WVDFN)_")"_IOINORM
"KRN",.404,326,40,2,2)
^^3,1
"KRN",.404,326,40,3,0)
3^!M^1
"KRN",.404,326,40,3,.1)
S Y=IOINORM_$$PNLAB^WVUTL5()_IOINHI_$$SSN^WVUTL1(WVDFN)_IOINORM
"KRN",.404,326,40,3,2)
^^3,52
"KRN",.404,326,40,4,0)
4^!M^1
"KRN",.404,326,40,4,.1)
S Y=IOINORM_"Street: "_IOINHI_$$STREET^WVUTL1(WVDFN)_IOINORM
"KRN",.404,326,40,4,2)
^^4,7
"KRN",.404,326,40,5,0)
5^!M^1
"KRN",.404,326,40,5,.1)
S Y=IOINORM_"Patient Phone: "_IOINHI_$$HPHONE^WVUTL1(WVDFN)
"KRN",.404,326,40,5,2)
^^4,45
"KRN",.404,326,40,6,0)
6^!M^1
"KRN",.404,326,40,6,.1)
S Y=IOINORM_"Cty/St/Zip: "_IOINHI_$$CTYSTZ^WVUTL1(WVDFN)_IOINORM
"KRN",.404,326,40,6,2)
^^5,3
"KRN",.404,326,40,7,0)
7^!M^1
"KRN",.404,326,40,7,.1)
S Y=IOINORM_"Pr Provider: "_IOINHI_$E($$PROVI^WVUTL1A(WVDFN),1,20)
"KRN",.404,326,40,7,2)
^^5,47
"KRN",.404,326,40,8,0)
8^!M^1
"KRN",.404,326,40,8,.1)
S Y=IOINORM_"Veteran: "_IOINHI_$$VET^WVUTL1A(WVDFN)
"KRN",.404,326,40,8,2)
^^6,51
"KRN",.404,326,40,9,0)
9^________________________________________________________________________________^1
"KRN",.404,326,40,9,2)
^^7,1
"KRN",.404,326,40,10,0)
10^!M^1
"KRN",.404,326,40,10,.1)
S Y=IOINORM_"Elig Code: "_IOINHI_$P($$ELIG^WVUTL9(WVDFN),U,2)
"KRN",.404,326,40,10,2)
^^6,4
"KRN",.404,327,0)
WV PROC-HEADER-1^790.1^
"KRN",.404,327,40,0)
^.4044I^14^14
"KRN",.404,327,40,1,0)
1^* * *  EDIT A PROCEDURE  * * *^1
"KRN",.404,327,40,1,2)
^^1,24
"KRN",.404,327,40,2,0)
2^!M^1
"KRN",.404,327,40,2,.1)
S Y=IOINORM_"Patient Name: "_IOINHI_$$NAME^WVUTL1(WVDFN)_"("_$$AGE^WVUTL1(WVDFN)_")"_IOINORM
"KRN",.404,327,40,2,2)
^^3,1
"KRN",.404,327,40,3,0)
3^!M^1
"KRN",.404,327,40,3,.1)
S Y=IOINORM_$$PNLAB^WVUTL5()_IOINHI_$$SSN^WVUTL1(WVDFN)_IOINORM
"KRN",.404,327,40,3,2)
^^3,53
"KRN",.404,327,40,4,0)
4^!M^1
"KRN",.404,327,40,4,.1)
S Y=IOINORM_"Case Manager: "_IOINHI_$$CMGR^WVUTL1(WVDFN)_IOINORM
"KRN",.404,327,40,4,2)
^^4,1
"KRN",.404,327,40,5,0)
5^!M^1
"KRN",.404,327,40,5,.1)
S Y=IOINORM_"Procedure: "_IOINHI_$E($$PROC1^WVUTL1A,1,19)_IOINORM
"KRN",.404,327,40,5,2)
^^4,50
"KRN",.404,327,40,6,0)
6^!M^1
"KRN",.404,327,40,6,.1)
S Y=IOINORM_"Cx Tx Need  : "_IOINHI_$$CNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,327,40,6,2)
^^5,1
"KRN",.404,327,40,7,0)
7^!M^1
"KRN",.404,327,40,7,.1)
S Y=IOINORM_"Acc#: "_IOINHI_$$ACC^WVUTL1(DA)_IOINORM
"KRN",.404,327,40,7,2)
^^5,55
"KRN",.404,327,40,8,0)
8^!M^1
"KRN",.404,327,40,8,.1)
S Y=IOINORM_"PAP Regimen : "_IOINHI_$$PAPRG^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,327,40,8,2)
^^6,1
"KRN",.404,327,40,9,0)
10^!M^1
"KRN",.404,327,40,9,.1)
S Y=IOINORM_"Br Tx Need  : "_IOINHI_$$BNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,327,40,9,2)
^^7,1
"KRN",.404,327,40,10,0)
11^!M^1
"KRN",.404,327,40,10,.1)
S Y=IOINHI_$S($$DES^WVUTL1(WVDFN)="YES":"*DES DAUGHTER*",1:"")_IOINORM
"KRN",.404,327,40,10,2)
^^6,61
"KRN",.404,327,40,11,0)
12^!M^1
"KRN",.404,327,40,11,.1)
S Y=IOINORM_"Veteran: "_IOINHI_$$VET^WVUTL1A(WVDFN)_IOINORM
"KRN",.404,327,40,11,2)
^^8,52
"KRN",.404,327,40,12,0)
13^!M^1
"KRN",.404,327,40,12,.1)
S Y=IOINHI_$$EDC^WVUTL1(WVDFN)_IOINORM
"KRN",.404,327,40,12,2)
^^7,53
"KRN",.404,327,40,13,0)
14^--------------------------------------------------------------------------------^1
"KRN",.404,327,40,13,2)
^^9,1
"KRN",.404,327,40,14,0)
15^!M^1
"KRN",.404,327,40,14,.1)
S Y=IOINORM_"Elig Code   : "_IOINHI_$P($$ELIG^WVUTL9(WVDFN),U,2)_IOINORM
"KRN",.404,327,40,14,2)
^^8,1
"KRN",.404,343,0)
WV SITE PARAMS-EDITBLK-6^790.02
"KRN",.404,343,40,0)
^.4044I^18^18
"KRN",.404,343,40,1,0)
1^!M^1
"KRN",.404,343,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,343,40,1,2)
^^3,12
"KRN",.404,343,40,2,0)
2^-------------------------------------------------------------------------------^1
"KRN",.404,343,40,2,2)
^^4,1
"KRN",.404,343,40,3,0)
3^Procedure Type^1
"KRN",.404,343,40,3,2)
^^6,5
"KRN",.404,343,40,4,0)
3.1^Active^1
"KRN",.404,343,40,4,2)
^^6,31
"KRN",.404,343,40,5,0)
3.3^DAYS DELINQUENT^1
"KRN",.404,343,40,5,2)
^^6,43
"KRN",.404,343,40,6,0)
4^--------------------^1
"KRN",.404,343,40,6,2)
^^7,5
"KRN",.404,343,40,7,0)
4.1^------^1
"KRN",.404,343,40,7,2)
^^7,31
"KRN",.404,343,40,8,0)
4.3^---------------^1
"KRN",.404,343,40,8,2)
^^7,43
"KRN",.404,343,40,9,0)
5^Stereotactic Biopsy^1
"KRN",.404,343,40,9,2)
^^8,5
"KRN",.404,343,40,10,0)
5.1^^3
"KRN",.404,343,40,10,1)
35.01
"KRN",.404,343,40,10,2)
8,32^3
"KRN",.404,343,40,11,0)
5.3^^3
"KRN",.404,343,40,11,1)
35.03
"KRN",.404,343,40,11,2)
8,48^4
"KRN",.404,343,40,12,0)
6^Tubal Ligation^1
"KRN",.404,343,40,12,2)
^^9,5
"KRN",.404,343,40,13,0)
6.1^^3
"KRN",.404,343,40,13,1)
39.01
"KRN",.404,343,40,13,2)
9,32^3
"KRN",.404,343,40,14,0)
6.3^^3
"KRN",.404,343,40,14,1)
39.03
"KRN",.404,343,40,14,2)
9,48^4
"KRN",.404,343,40,15,0)
7^Vaginal Ultrasound^1
"KRN",.404,343,40,15,2)
^^10,5
"KRN",.404,343,40,16,0)
7.1^^3
"KRN",.404,343,40,16,1)
41.01
"KRN",.404,343,40,16,2)
10,32^3
"KRN",.404,343,40,17,0)
7.3^^3
"KRN",.404,343,40,17,1)
41.03
"KRN",.404,343,40,17,2)
10,48^4
"KRN",.404,343,40,18,0)
20^!M^1
"KRN",.404,343,40,18,.1)
S Y="(PAGE 6 OF 6)"
"KRN",.404,343,40,18,2)
^^17,57
"KRN",.404,375,0)
WV SITE PARAMS-EDITBLK-2.1^790.13
"KRN",.404,375,40,0)
^.4044I^1^1
"KRN",.404,375,40,1,0)
1^^3^^EC (RAD)
"KRN",.404,375,40,1,1)
.01
"KRN",.404,375,40,1,2)
1,1^30
"KRN",.404,376,0)
WV SITE PARAMS-EDITBLK-2.2^790.02
"KRN",.404,376,40,0)
^.4044I^4^4
"KRN",.404,376,40,1,0)
1^LABORATORY:^1
"KRN",.404,376,40,1,2)
^^1,1
"KRN",.404,376,40,2,0)
2^Import Tests from Laboratory^3
"KRN",.404,376,40,2,1)
.24
"KRN",.404,376,40,2,2)
1,43^3^1,13
"KRN",.404,376,40,2,10)
S:X'=1 DDSBR="COM"
"KRN",.404,376,40,2,12)
I X'=1 D PUT^DDSVAL(DIE,DA,.26,"@"),HELP^WVUTL9(DA,6,"LABORATORY")
"KRN",.404,376,40,3,0)
3^Include ALL Non-Veterans(Y/N)?^3
"KRN",.404,376,40,3,1)
.26
"KRN",.404,376,40,3,2)
2,45^3^2,13
"KRN",.404,376,40,3,10)
S:X=1 DDSBR="COM"
"KRN",.404,376,40,3,12)
I X=1 D HELP^WVUTL9(DA,6,"LABORATORY")
"KRN",.404,376,40,4,0)
4^ELIGIBILITY CODE(S):^1
"KRN",.404,376,40,4,2)
^^3,1
"KRN",.404,377,0)
WV SITE PARAMS-EDITBLK-2.3^790.14
"KRN",.404,377,40,0)
^.4044I^1^1
"KRN",.404,377,40,1,0)
1^^3^^EC (LAB)
"KRN",.404,377,40,1,1)
.01
"KRN",.404,377,40,1,2)
1,1^30
"MBREQ")
0
"ORD",8,.403)
.403;8;;;EDEOUT^DIFROMSO(.403,DA,"",XPDA);FPRE^DIFROMSI(.403,"",XPDA);EPRE^DIFROMSI(.403,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.403,DA,"",XPDA);DEL^DIFROMSK(.403,"",%)
"ORD",8,.403,0)
FORM
"PKG",364,-1)
1^1
"PKG",364,0)
WOMEN'S HEALTH^WV^Tracks health issues specific to female patients.
"PKG",364,20,0)
^9.402P^^
"PKG",364,22,0)
^9.49I^1^1
"PKG",364,22,1,0)
1.0^2980925^2980508^547
"PKG",364,22,1,"PAH",1,0)
10^3000427
"PKG",364,22,1,"PAH",1,1,0)
^^2^2^3000427
"PKG",364,22,1,"PAH",1,1,1,0)
Please read the WV*1*10 patch description on FORUM for an explanation of
"PKG",364,22,1,"PAH",1,1,2,0)
what this patch does.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
11
"RTN","WV10PST")
0^10^B19737137
"RTN","WV10PST",1,0)
WV10PST ;HCIOFO/DS-Patch 10 Post-Installation Routine ;3/28/00  08:42
"RTN","WV10PST",2,0)
 ;;1.0;WOMEN'S HEALTH;**10**;Sep 30, 1998
"RTN","WV10PST",3,0)
 ;
"RTN","WV10PST",4,0)
 D QMAIL
"RTN","WV10PST",5,0)
 Q
"RTN","WV10PST",6,0)
 ;
"RTN","WV10PST",7,0)
QMAIL ; Queue mail message
"RTN","WV10PST",8,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WV10PST",9,0)
 S ZTRTN="MAIL^WV10PST",ZTDESC="WV*1*10 INSTALLED"
"RTN","WV10PST",10,0)
 S ZTIO="",ZTDTH=$H
"RTN","WV10PST",11,0)
 D ^%ZTLOAD
"RTN","WV10PST",12,0)
 Q
"RTN","WV10PST",13,0)
MAIL ; Send message to default case managers to inform them of the changes
"RTN","WV10PST",14,0)
 N XMDUZ,XMSUB,XMTEXT,XMY,WVSITE,WVIEN,WVLINE,WVMSG
"RTN","WV10PST",15,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WV10PST",16,0)
 S (WVLINE,WVSITE)=0
"RTN","WV10PST",17,0)
 F  S WVSITE=$O(^WV(790.02,WVSITE)) Q:'WVSITE  D
"RTN","WV10PST",18,0)
 .S WVIEN=$P($G(^WV(790.02,WVSITE,0)),U,2) ;default case manager
"RTN","WV10PST",19,0)
 .Q:'WVIEN
"RTN","WV10PST",20,0)
 .S XMY(WVIEN)=""
"RTN","WV10PST",21,0)
 .Q
"RTN","WV10PST",22,0)
 I '$O(XMY(0)) Q
"RTN","WV10PST",23,0)
SEND ; Create and send mail message
"RTN","WV10PST",24,0)
 S XMDUZ=.5 ;message sender
"RTN","WV10PST",25,0)
 S XMSUB="Women's Health patch #10 installed"
"RTN","WV10PST",26,0)
 S WVMSG(+$$LINE())="Patch #10 for the Women's Health package was installed. This patch adds"
"RTN","WV10PST",27,0)
 S WVMSG(+$$LINE())="additional site parameters for the Radiology/NM and Laboratory package links."
"RTN","WV10PST",28,0)
 S WVMSG(+$$LINE())="With these new parameters you can accept none, some or all non-veteran"
"RTN","WV10PST",29,0)
 S WVMSG(+$$LINE())="patient data from the Radiology/NM and Laboratory package links. To accept"
"RTN","WV10PST",30,0)
 S WVMSG(+$$LINE())="data for only certain non-veterans you must define the eligibility codes"
"RTN","WV10PST",31,0)
 S WVMSG(+$$LINE())="(e.g., TRICARE) you are interested in tracking."
"RTN","WV10PST",32,0)
 S WVMSG(+$$LINE())=" "
"RTN","WV10PST",33,0)
 S WVMSG(+$$LINE())="To set these new parameters, please do the following steps:"
"RTN","WV10PST",34,0)
 S WVMSG(+$$LINE())="1) Go to the File Maintenance Menu."
"RTN","WV10PST",35,0)
 S WVMSG(+$$LINE())="2) Select the Edit Site Parameters option."
"RTN","WV10PST",36,0)
 S WVMSG(+$$LINE())="3) Select a facility."
"RTN","WV10PST",37,0)
 S WVMSG(+$$LINE())="4) Go to page 2 of the data entry form."
"RTN","WV10PST",38,0)
 S WVMSG(+$$LINE())="5) If the 'Import Mammograms from Radiology:' value is NO or blank go to"
"RTN","WV10PST",39,0)
 S WVMSG(+$$LINE())="   Step 8."
"RTN","WV10PST",40,0)
 S WVMSG(+$$LINE())="6) Go to the first 'Include ALL Non-Veterans(Y/N)?:' prompt."
"RTN","WV10PST",41,0)
 S WVMSG(+$$LINE())="   a) Answer YES if you want all non-veteran data from Radiology/NM."
"RTN","WV10PST",42,0)
 S WVMSG(+$$LINE())="   b) Answer NO if you don't want any non-veteran data from Radiology/NM."
"RTN","WV10PST",43,0)
 S WVMSG(+$$LINE())="   c) Answer NO if you want only certain non-veterans."
"RTN","WV10PST",44,0)
 S WVMSG(+$$LINE())="   d) Leaving this answer blank is the same as YES."
"RTN","WV10PST",45,0)
 S WVMSG(+$$LINE())="If you opted for a, b or d, then skip to Step 8."
"RTN","WV10PST",46,0)
 S WVMSG(+$$LINE())="7) Go to the first 'ELIGIBILITY CODE(S):' prompt. This is a multiple answer"
"RTN","WV10PST",47,0)
 S WVMSG(+$$LINE())="   field."
"RTN","WV10PST",48,0)
 S WVMSG(+$$LINE())="   Enter each eligibility code you wish to accept data for from Radiology/NM."
"RTN","WV10PST",49,0)
 S WVMSG(+$$LINE())="8) If the 'Import Tests from Laboratory:' value is NO or blank go to Step 11."
"RTN","WV10PST",50,0)
 S WVMSG(+$$LINE())="9) Go to the second 'Include ALL Non-Veterans(Y/N)?:' prompt."
"RTN","WV10PST",51,0)
 S WVMSG(+$$LINE())="   a) Answer YES if you want all non-veteran data from Laboratory."
"RTN","WV10PST",52,0)
 S WVMSG(+$$LINE())="   b) Answer NO if you don't want any non-veteran data from Laboratory."
"RTN","WV10PST",53,0)
 S WVMSG(+$$LINE())="   c) Answer NO if you want only certain non-veterans."
"RTN","WV10PST",54,0)
 S WVMSG(+$$LINE())="   d) Leaving this answer blank is the same as YES."
"RTN","WV10PST",55,0)
 S WVMSG(+$$LINE())="If you opted for a, b or d, then skip to Step 11."
"RTN","WV10PST",56,0)
 S WVMSG(+$$LINE())="10) Go to the second 'ELIGIBILITY CODE(S):' prompt. This is a multiple answer"
"RTN","WV10PST",57,0)
 S WVMSG(+$$LINE())="    field."
"RTN","WV10PST",58,0)
 S WVMSG(+$$LINE())="   Enter each eligibility code you wish to accept data for from Laboratory."
"RTN","WV10PST",59,0)
 S WVMSG(+$$LINE())="11) Exit and Save any changes"
"RTN","WV10PST",60,0)
 S WVMSG(+$$LINE())=" "
"RTN","WV10PST",61,0)
 S WVMSG(+$$LINE())="Repeat steps 3-11 for each facility defined."
"RTN","WV10PST",62,0)
 S XMTEXT="WVMSG("
"RTN","WV10PST",63,0)
 D ^XMD
"RTN","WV10PST",64,0)
 Q
"RTN","WV10PST",65,0)
LINE() ; Increment line counter by 1
"RTN","WV10PST",66,0)
 S WVLINE=+$G(WVLINE)+1
"RTN","WV10PST",67,0)
 Q WVLINE
"RTN","WV10PST",68,0)
 ;
"RTN","WVBRNED1")
0^11^B9757632
"RTN","WVBRNED1",1,0)
WVBRNED1 ;HCIOFO/FT,JR IHS/ANMC/MWR - BROWSE TX NEEDS PAST DUE; ;2/28/00  15:12
"RTN","WVBRNED1",2,0)
 ;;1.0;WOMEN'S HEALTH;**10**;Sep 30, 1998
"RTN","WVBRNED1",3,0)
 ;;* MICHAEL REMILLARD, DDS * ALASKA NATIVE MEDICAL CENTER *
"RTN","WVBRNED1",4,0)
 ;;  DISPLAY CODE FOR BROWSING TX NEEDS.  CALLED BY WVBRNED.
"RTN","WVBRNED1",5,0)
 ;
"RTN","WVBRNED1",6,0)
DISPLAY ;EP
"RTN","WVBRNED1",7,0)
 ;---> WVCONF=DISPLAY "CONFIDENTIAL PT INFO" BANNER.
"RTN","WVBRNED1",8,0)
 ;---> WVTITLE=TITLE AT TOP OF DISPLAY HEADER.
"RTN","WVBRNED1",9,0)
 ;---> WVSUBH=CODE TO EXECUTE FOR SUBHEADER (COLUMN TITLES).
"RTN","WVBRNED1",10,0)
 ;---> WVCODE=CODE TO EXECUTE AS 3RD PIECE OF DIR(0) (AFTER DIR READ).
"RTN","WVBRNED1",11,0)
 ;---> WVCRT=1 IF OUTPUT IS TO SCREEN (ALLOWS SELECTIONS TO EDIT).
"RTN","WVBRNED1",12,0)
 ;---> WVTAB=6 IF OUTPUT IS TO SCREEN, =3 IF OUTPUT IS TO PRINTER.
"RTN","WVBRNED1",13,0)
 ;---> WVPRMT(1,Q)=PROMPTS FOR DIR.
"RTN","WVBRNED1",14,0)
 ;
"RTN","WVBRNED1",15,0)
 U IO
"RTN","WVBRNED1",16,0)
 S WVCONF=1
"RTN","WVBRNED1",17,0)
 S WVTITLE1=$S(WVB=1:"BY NEED DATE",WVB=2:"ALPHABETICALLY",WVB=3:"BY PRIMARY CARE PROVIDER",1:"?")
"RTN","WVBRNED1",18,0)
 S WVTITLE="*  PATIENTS LISTED "_WVTITLE1_"  *"
"RTN","WVBRNED1",19,0)
 D CENTERT^WVUTL5(.WVTITLE)
"RTN","WVBRNED1",20,0)
 S WVSUBH="SUBHEAD^WVBRNED1"
"RTN","WVBRNED1",21,0)
 S WVCODE="D EDIT^WVBRNED1 N N D SORT^WVBRNED,COPYGBL^WVBRNED"
"RTN","WVBRNED1",22,0)
 N N S (WVPOP,N,Z)=0
"RTN","WVBRNED1",23,0)
 D TOPHEAD^WVUTL7
"RTN","WVBRNED1",24,0)
 ;---> *SET WVFAC FOR NOW; MAKE WVFAC SELECTABLE IN FUTURE VERSIONS.
"RTN","WVBRNED1",25,0)
 S WVFAC=DUZ(2)
"RTN","WVBRNED1",26,0)
 S WVTAB=$S(WVCRT:6,1:3)
"RTN","WVBRNED1",27,0)
 ;
"RTN","WVBRNED1",28,0)
NOMATCH ;EP
"RTN","WVBRNED1",29,0)
 ;---> QUIT IF NO RECORDS MATCH.
"RTN","WVBRNED1",30,0)
 I '$D(^TMP("WV",$J,1)) D  Q
"RTN","WVBRNED1",31,0)
 .D HEADER5^WVUTL7
"RTN","WVBRNED1",32,0)
 .K WVPRMT,WVPRMT1,WVPRMTQ,DIR
"RTN","WVBRNED1",33,0)
 .W !!?5,"No records match the selected criteria.",!
"RTN","WVBRNED1",34,0)
 .I WVCRT&('$D(IO("S"))) D DIRZ^WVUTL3 W @IOF
"RTN","WVBRNED1",35,0)
 .D ^%ZISC S WVPOP=1
"RTN","WVBRNED1",36,0)
 ;
"RTN","WVBRNED1",37,0)
DISPLAY1 ;EP
"RTN","WVBRNED1",38,0)
 ;---> IF A PROCEDURE IS EDITED ON THE LAST PAGE, GOTO HERE
"RTN","WVBRNED1",39,0)
 ;---> FROM LINELABEL "END" BELOW.
"RTN","WVBRNED1",40,0)
 N M,Y
"RTN","WVBRNED1",41,0)
 D HEADER5^WVUTL7
"RTN","WVBRNED1",42,0)
 F  S N=$O(^TMP("WV",$J,2,N)) Q:'N!(WVPOP)  D
"RTN","WVBRNED1",43,0)
 .I $Y+6>IOSL D:WVCRT DIRZ^WVUTL3 Q:WVPOP  D
"RTN","WVBRNED1",44,0)
 ..S WVPAGE=WVPAGE+1
"RTN","WVBRNED1",45,0)
 ..D HEADER5^WVUTL7
"RTN","WVBRNED1",46,0)
 .S Y=^TMP("WV",$J,2,N),M=N
"RTN","WVBRNED1",47,0)
 .;---> DON'T WRITE BROWSE SELECTION#'S IF IO IS NOT A CRT (BRCRT).
"RTN","WVBRNED1",48,0)
 .W !! W:WVCRT $J(N,3),")"                  ;BROWSE SELECTION#
"RTN","WVBRNED1",49,0)
 .W ?WVTAB-2,$P(Y,U)                        ;SSN#
"RTN","WVBRNED1",50,0)
 .W ?WVTAB+10,$E($P(Y,U,2),1,16)," "        ;NAME
"RTN","WVBRNED1",51,0)
 .W $$REPEAT^XLFSTR(".",16-$L($P(Y,U,2)))   ;CONNECTING DOTS
"RTN","WVBRNED1",52,0)
 .W:'WVCRT "..."                            ;ADD DOTS IF NOT A CRT
"RTN","WVBRNED1",53,0)
 .W ?35,$E($P($P(Y,U,3),","),1,9)           ;CASE MANAGER
"RTN","WVBRNED1",54,0)
 .W ?46,$P(Y,U,4),!                         ;CERVICAL TX NEED&DATE
"RTN","WVBRNED1",55,0)
 .;I WVB=3
"RTN","WVBRNED1",56,0)
 .W ?5,"Pr. Provider => ",$E($$PROVI^WVUTL1A($P(Y,U,6)),1,25) ;PRIMARY CARE PROVIDER
"RTN","WVBRNED1",57,0)
 .W ?46,$P(Y,U,5)                           ;BREAST TX NEED&DATE
"RTN","WVBRNED1",58,0)
 .N WVDFN
"RTN","WVBRNED1",59,0)
 .S WVDFN=$P(Y,U,6)
"RTN","WVBRNED1",60,0)
 .W !?5,"Age: "_$$AGE^WVUTL9(WVDFN)_" / Veteran: "_$$VET^WVUTL1A(WVDFN)_" / Eligibility: "_$P($$ELIG^WVUTL9(WVDFN),U,2)
"RTN","WVBRNED1",61,0)
 ;
"RTN","WVBRNED1",62,0)
 D:'N
"RTN","WVBRNED1",63,0)
 .N WVTITLE S WVTITLE="-----  End of Report  -----"
"RTN","WVBRNED1",64,0)
 .D CENTERT^WVUTL5(.WVTITLE) W !!,WVTITLE
"RTN","WVBRNED1",65,0)
 I $D(^TMP("WV",$J,1)) I WVCRT&('$D(IO("S"))) D:'WVPOP DIRZ^WVUTL3 W @IOF
"RTN","WVBRNED1",66,0)
 ;
"RTN","WVBRNED1",67,0)
END ;EP
"RTN","WVBRNED1",68,0)
 D ^%ZISC
"RTN","WVBRNED1",69,0)
 Q
"RTN","WVBRNED1",70,0)
 ;
"RTN","WVBRNED1",71,0)
SUBHEAD ;EP
"RTN","WVBRNED1",72,0)
 ;---> SUB HEADER FOR PATIENT BROWSE OUTPUT.
"RTN","WVBRNED1",73,0)
 W !?WVTAB,$$PNLB^WVUTL5(),?WVTAB+10,"PATIENT",?35,"CASE MGR"
"RTN","WVBRNED1",74,0)
 W ?46,"TREATMENT NEED DUE BY DATE",!
"RTN","WVBRNED1",75,0)
 W $$REPEAT^XLFSTR("-",80)
"RTN","WVBRNED1",76,0)
 Q
"RTN","WVBRNED1",77,0)
 ;
"RTN","WVBRNED1",78,0)
EDIT ;EP
"RTN","WVBRNED1",79,0)
 ;---> FROM BROWSE, WVPOP IN TO EDIT AN INDIVIDUAL PATIENT.
"RTN","WVBRNED1",80,0)
 N WVPRMT,WVPRMT1,WVPRMT2,WVPRMTQ
"RTN","WVBRNED1",81,0)
 D SETVARS^WVUTL5
"RTN","WVBRNED1",82,0)
 S X=+X,WVDFN=$P(^TMP("WV",$J,2,X),U,6)
"RTN","WVBRNED1",83,0)
 S WVN=X N X
"RTN","WVBRNED1",84,0)
 D SCREEN^WVPATE(WVDFN)
"RTN","WVBRNED1",85,0)
 ;---> BACK UP 5 RECORDS AFTER EDIT.
"RTN","WVBRNED1",86,0)
 S N=$S(WVN<6:1,1:WVN-5) K WVN
"RTN","WVBRNED1",87,0)
 Q
"RTN","WVEXPTRA")
0^3^B39195062
"RTN","WVEXPTRA",1,0)
WVEXPTRA ;HCIOFO/FT-EXPORT MAMS & ULTRASOUNDS TO WOMEN'S HEALTH  ;2/18/00  13:49
"RTN","WVEXPTRA",2,0)
 ;;1.0;WOMEN'S HEALTH;**3,5,7,10**;Sep 30, 1998
"RTN","WVEXPTRA",3,0)
 ;;  Original routine created by IHS/ANMC/MWR
"RTN","WVEXPTRA",4,0)
 ;;* MICHAEL REMILLARD, DDS * ALASKA NATIVE MEDICAL CENTER *
"RTN","WVEXPTRA",5,0)
 ;---> WVNEWP = TOTAL NEW WOMEN'S HEALTH PATIENTS ADDED.
"RTN","WVEXPTRA",6,0)
 ;---> WVMAM  = TOTAL NEW MAMMOGRAMS PROCEDURES ADDED.
"RTN","WVEXPTRA",7,0)
 ;
"RTN","WVEXPTRA",8,0)
EN1 ;
"RTN","WVEXPTRA",9,0)
 S WVPOP=0,WVEC=""
"RTN","WVEXPTRA",10,0)
 D CHECK I WVPOP D KILL Q  ;check if site parameter entry exists
"RTN","WVEXPTRA",11,0)
 D DESC ;describe option
"RTN","WVEXPTRA",12,0)
 D DTRNG I WVPOP D KILL Q  ;get date range
"RTN","WVEXPTRA",13,0)
 D STATUS I WVPOP D KILL Q  ;select status of procedure
"RTN","WVEXPTRA",14,0)
 D EC^WVGETAL1 I WVPOP D KILL Q  ;veterans/non-vets/eligibility code
"RTN","WVEXPTRA",15,0)
 D QUEUE ;queue a background job
"RTN","WVEXPTRA",16,0)
 D KILL
"RTN","WVEXPTRA",17,0)
 Q
"RTN","WVEXPTRA",18,0)
EN2 ;
"RTN","WVEXPTRA",19,0)
 D CPTS ;get procedure pointers
"RTN","WVEXPTRA",20,0)
 D GET ;get RAD/NM data & store in WH
"RTN","WVEXPTRA",21,0)
 D MAIL ;send mail message to user
"RTN","WVEXPTRA",22,0)
 D KILL ;kill variables
"RTN","WVEXPTRA",23,0)
 Q
"RTN","WVEXPTRA",24,0)
DESC ; Describe option
"RTN","WVEXPTRA",25,0)
 W @IOF
"RTN","WVEXPTRA",26,0)
 W !,"This option searches the Radiology/Nuclear Medicine database for"
"RTN","WVEXPTRA",27,0)
 W !,"all female patients who had a mammogram, breast ultrasound, pelvic"
"RTN","WVEXPTRA",28,0)
 W !,"ultrasound or vaginal ultrasound exam during the date range you select."
"RTN","WVEXPTRA",29,0)
 W !,"These procedures and patients will be added to the WH database if"
"RTN","WVEXPTRA",30,0)
 W !,"not already there.",!
"RTN","WVEXPTRA",31,0)
 W !,"This job will be queued as a background task so as to free up your"
"RTN","WVEXPTRA",32,0)
 W !,"terminal to do other work. You will receive a mail message when"
"RTN","WVEXPTRA",33,0)
 W !,"the job is done. The mail message will contain a count of the"
"RTN","WVEXPTRA",34,0)
 W !,"number of procedures and patients added.",!!
"RTN","WVEXPTRA",35,0)
 Q 
"RTN","WVEXPTRA",36,0)
CHECK ; Check if DUZ(2) exists for user, if entry exists in site parameter
"RTN","WVEXPTRA",37,0)
 ; file, if case manager, and if File 70 exists.
"RTN","WVEXPTRA",38,0)
 D CHECK^WVLOGO
"RTN","WVEXPTRA",39,0)
 I '$G(DUZ(2))!('$D(^WV(790.02,+DUZ(2),0))) S WVPOP=1
"RTN","WVEXPTRA",40,0)
 I '$P($G(^WV(790.02,+$G(DUZ(2)),0)),U,2) D
"RTN","WVEXPTRA",41,0)
 .D NODCM^WVUTL9
"RTN","WVEXPTRA",42,0)
 .S WVPOP=1
"RTN","WVEXPTRA",43,0)
 .Q
"RTN","WVEXPTRA",44,0)
 I '$D(^RADPT) W !,"There is no Radiology/Nuclear Medicine Patient file (#70)",! S WVPOP=1
"RTN","WVEXPTRA",45,0)
 Q
"RTN","WVEXPTRA",46,0)
DTRNG ; prompt for date range, go back three years maximum
"RTN","WVEXPTRA",47,0)
 S WVSTDT=DT-30000,WVSTDT=$$DATECHK(WVSTDT)
"RTN","WVEXPTRA",48,0)
 K DIR S DIR(0)="DA^"_WVSTDT_":"_DT
"RTN","WVEXPTRA",49,0)
 S DIR("A")="Enter START DATE: "
"RTN","WVEXPTRA",50,0)
 S DIR("?")="Enter the earliest date of the mammograms/ultrasounds you wish to retrieve. You can begin your search at "_$$FMTE^XLFDT(WVSTDT,"D")_"."
"RTN","WVEXPTRA",51,0)
 D ^DIR K DIR
"RTN","WVEXPTRA",52,0)
 I $D(DIRUT) S WVPOP=1 Q
"RTN","WVEXPTRA",53,0)
 S WVSTDT=Y
"RTN","WVEXPTRA",54,0)
 S DIR(0)="DA^"_WVSTDT_":"_DT
"RTN","WVEXPTRA",55,0)
 S DIR("A")="Enter END DATE: ",DIR("B")=$$FMTE^XLFDT(DT,"D")
"RTN","WVEXPTRA",56,0)
 S DIR("?")="Enter the most recent date of the mammograms/ultrasounds you wish to retrieve."
"RTN","WVEXPTRA",57,0)
 D ^DIR K DIR
"RTN","WVEXPTRA",58,0)
 I $D(DIRUT) S WVPOP=1 Q
"RTN","WVEXPTRA",59,0)
 S WVENDT=Y
"RTN","WVEXPTRA",60,0)
 Q
"RTN","WVEXPTRA",61,0)
DATECHK(WVDATE) ; Check if WVDATE is a valid date. Substract 1 day until a
"RTN","WVEXPTRA",62,0)
 ; valid date in WVDATE and return same.
"RTN","WVEXPTRA",63,0)
 N %DT,WVLOOP,X,Y
"RTN","WVEXPTRA",64,0)
 S Y=0
"RTN","WVEXPTRA",65,0)
 F WVLOOP=1:1 Q:Y>0  D
"RTN","WVEXPTRA",66,0)
 .S X=WVDATE,%DT=""
"RTN","WVEXPTRA",67,0)
 .D ^%DT
"RTN","WVEXPTRA",68,0)
 .Q:Y>0  ;valid date - stop checking
"RTN","WVEXPTRA",69,0)
 .S WVDATE=$$FMADD^XLFDT(WVDATE,-1)
"RTN","WVEXPTRA",70,0)
 .Q
"RTN","WVEXPTRA",71,0)
 Q WVDATE
"RTN","WVEXPTRA",72,0)
 ;
"RTN","WVEXPTRA",73,0)
STATUS ; Select default status for procedures
"RTN","WVEXPTRA",74,0)
 K DIR
"RTN","WVEXPTRA",75,0)
 S DIR(0)="S^o:OPEN;c:CLOSED",DIR("A")="Select STATUS OF IMPORTED MAMMOGRAMS"
"RTN","WVEXPTRA",76,0)
 S DIR("?")="Enter 'O' to give a Status of OPEN to Mammograms imported from the Radiology Software into the Women's Health database. Enter 'C' to give a Status of CLOSED to imported Mammograms."
"RTN","WVEXPTRA",77,0)
 D ^DIR K DIR
"RTN","WVEXPTRA",78,0)
 I $D(DIRUT) S WVPOP=1
"RTN","WVEXPTRA",79,0)
 S WVSTATUS=Y
"RTN","WVEXPTRA",80,0)
 Q
"RTN","WVEXPTRA",81,0)
QUEUE ; Task as background job
"RTN","WVEXPTRA",82,0)
 S ZTIO="",ZTDESC="WH GRAB RAD/NM DATA",ZTRTN="EN2^WVEXPTRA"
"RTN","WVEXPTRA",83,0)
 S ZTDTH=$H,WVPOP=1
"RTN","WVEXPTRA",84,0)
 S ZTSAVE("WVENDT")="",ZTSAVE("WVSTDT")="",ZTSAVE("WVSTATUS")=""
"RTN","WVEXPTRA",85,0)
 S ZTSAVE("WVEC(")=""
"RTN","WVEXPTRA",86,0)
 D ^%ZTLOAD
"RTN","WVEXPTRA",87,0)
 Q
"RTN","WVEXPTRA",88,0)
CPTS ; Loop through File 71 to get procedure pointers for the CPTs we
"RTN","WVEXPTRA",89,0)
 ; are interested in.
"RTN","WVEXPTRA",90,0)
 N WVPROC S WVIEN=0 K WVARRAY
"RTN","WVEXPTRA",91,0)
 F  S WVIEN=$O(^RAMIS(71,WVIEN)) Q:'WVIEN  D
"RTN","WVEXPTRA",92,0)
 .S WVCPT=$$GET1^DIQ(71,WVIEN,9,"I") ;CPT code
"RTN","WVEXPTRA",93,0)
 .Q:WVCPT=""
"RTN","WVEXPTRA",94,0)
 .S WVPROC=0
"RTN","WVEXPTRA",95,0)
 .S WVPROC=$O(^WV(790.2,"AC",WVCPT,WVPROC))
"RTN","WVEXPTRA",96,0)
 .Q:'WVPROC
"RTN","WVEXPTRA",97,0)
 .Q:$P($G(^WV(790.2,+WVPROC,0)),U,5)'="R"
"RTN","WVEXPTRA",98,0)
 .S WVARRAY(WVIEN)=""
"RTN","WVEXPTRA",99,0)
 .Q
"RTN","WVEXPTRA",100,0)
 Q
"RTN","WVEXPTRA",101,0)
GET ; get mammograms and ultrasounds from RAD/NM database
"RTN","WVEXPTRA",102,0)
 ;---> WVMCNT = total new procedures added.
"RTN","WVEXPTRA",103,0)
 ;---> WVNEWP = total new patients added.
"RTN","WVEXPTRA",104,0)
 S (WVMCNT,WVNEWP)=0
"RTN","WVEXPTRA",105,0)
 Q:'$D(WVARRAY)  ;no mammogram or ultrasound procedures in File 71
"RTN","WVEXPTRA",106,0)
 S WVENDT=WVENDT\1,WVENDT=9999999-WVENDT ;inverse end date
"RTN","WVEXPTRA",107,0)
 S WVSTDT=WVSTDT\1,WVSTDT=9999999-WVSTDT ;inverse start date
"RTN","WVEXPTRA",108,0)
 S WVSTDT=WVSTDT_".9999"
"RTN","WVEXPTRA",109,0)
 S WVDFN=0 ;patient dfn
"RTN","WVEXPTRA",110,0)
 F  S WVDFN=$O(^RADPT(WVDFN)) Q:'WVDFN  D  ;RAD/NM patient file
"RTN","WVEXPTRA",111,0)
 .Q:$P($G(^DPT(WVDFN,0)),U,2)'="F"  ;not female
"RTN","WVEXPTRA",112,0)
 .Q:'$$VECCHK^WVGETAL1(WVDFN)  ;failed vet/non-vet/eligibility code check
"RTN","WVEXPTRA",113,0)
 .S WVDTI=WVENDT  ;Because the exam date is inverse the end date will
"RTN","WVEXPTRA",114,0)
 .;                will be the lower value.
"RTN","WVEXPTRA",115,0)
 .F  S WVDTI=$O(^RADPT(WVDFN,"DT",WVDTI)) Q:'WVDTI!(WVDTI>WVSTDT)  D
"RTN","WVEXPTRA",116,0)
 ..S WVCNI=0 ;case number
"RTN","WVEXPTRA",117,0)
 ..F  S WVCNI=$O(^RADPT(WVDFN,"DT",WVDTI,"P",WVCNI)) Q:'WVCNI  D
"RTN","WVEXPTRA",118,0)
 ...S WVNODE=$G(^RADPT(WVDFN,"DT",WVDTI,"P",WVCNI,0))
"RTN","WVEXPTRA",119,0)
 ...Q:WVNODE=""
"RTN","WVEXPTRA",120,0)
 ...S WVPROC=$P(WVNODE,U,2) ;procedure pointer
"RTN","WVEXPTRA",121,0)
 ...Q:'WVPROC  ;no pointer to File 71 (no procedure) 
"RTN","WVEXPTRA",122,0)
 ...Q:'$D(WVARRAY(WVPROC))  ;not a WH-related procedure
"RTN","WVEXPTRA",123,0)
 ...S WVRPT=$P(WVNODE,U,17) ;report pointer
"RTN","WVEXPTRA",124,0)
 ...Q:'WVRPT  ;no pointer to File 74 (no report)
"RTN","WVEXPTRA",125,0)
 ...Q:$$GET1^DIQ(74,WVRPT,5,"I")'="V"  ;report status, must be VERIFIED
"RTN","WVEXPTRA",126,0)
 ...D CREATEH^WVRALINK(WVDFN,WVDTI,WVCNI,WVSTATUS)
"RTN","WVEXPTRA",127,0)
 ...Q
"RTN","WVEXPTRA",128,0)
 ..Q
"RTN","WVEXPTRA",129,0)
 .Q
"RTN","WVEXPTRA",130,0)
 Q
"RTN","WVEXPTRA",131,0)
MAIL ; send mail message to user with counts of procedures & patients added
"RTN","WVEXPTRA",132,0)
 S XMDUZ=.5 ;message sender
"RTN","WVEXPTRA",133,0)
 S XMY(DUZ)="" ;person who ran option
"RTN","WVEXPTRA",134,0)
 S XMSUB="Export of RAD/NM procedures to WH is done"
"RTN","WVEXPTRA",135,0)
 S WVMSG(1)="  # of New patients added to Women's Health package: "_WVNEWP
"RTN","WVEXPTRA",136,0)
 S WVMSG(2)="# of New procedures added to Women's Health package: "_WVMCNT
"RTN","WVEXPTRA",137,0)
 I '$D(WVARRAY) D
"RTN","WVEXPTRA",138,0)
 .S WVMSG(3)=" "
"RTN","WVEXPTRA",139,0)
 .S WVMSG(4)="There are no mammogram or ultrasound procedures listed in your"
"RTN","WVEXPTRA",140,0)
 .S WVMSG(5)="Radiology/Nuclear Medicine package."
"RTN","WVEXPTRA",141,0)
 .Q
"RTN","WVEXPTRA",142,0)
 S XMTEXT="WVMSG("
"RTN","WVEXPTRA",143,0)
 D ^XMD
"RTN","WVEXPTRA",144,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVEXPTRA",145,0)
 Q
"RTN","WVEXPTRA",146,0)
KILL ;
"RTN","WVEXPTRA",147,0)
 K DIR,DIROUT,DIRUT,DTOUT,DUOUT
"RTN","WVEXPTRA",148,0)
 K WVARRAY,WVCNI,WVCPT,WVDFN,WVDTI,WVEC,WVENDT,WVIEN,WVMCNT,WVNEWP,WVNODE,WVPOP,WVPROC,WVRPT,WVSTATUS,WVSTDT
"RTN","WVEXPTRA",149,0)
 K X,Y,ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE,ZTSK
"RTN","WVEXPTRA",150,0)
 Q
"RTN","WVEXPTRA",151,0)
 ;
"RTN","WVGETAL1")
0^5^B2017775
"RTN","WVGETAL1",1,0)
WVGETAL1 ;HCIOFO/FT-Autoload Female Patients (cont.) ;2/18/00  13:17
"RTN","WVGETAL1",2,0)
 ;;1.0;WOMEN'S HEALTH;**7,10**;Sep 30, 1998
"RTN","WVGETAL1",3,0)
EC ; prompt for Eligibility codes
"RTN","WVGETAL1",4,0)
 W ! K DIR
"RTN","WVGETAL1",5,0)
 S DIR(0)="Y",DIR("A")="     Include patients by eligibility code, too"
"RTN","WVGETAL1",6,0)
 S DIR("?")="Answer YES to include non-veteran patients with a desired eligibility code"
"RTN","WVGETAL1",7,0)
 D ^DIR K DIR
"RTN","WVGETAL1",8,0)
 I $D(DIRUT) S WVPOP=1
"RTN","WVGETAL1",9,0)
 Q:$G(WVPOP)!(Y=0)
"RTN","WVGETAL1",10,0)
 K DIC N WVLOOP
"RTN","WVGETAL1",11,0)
 S WVLOOP=0,DIC="^DIC(8,",Y=0
"RTN","WVGETAL1",12,0)
 F  Q:Y<0  D
"RTN","WVGETAL1",13,0)
 .S WVLOOP=WVLOOP+1
"RTN","WVGETAL1",14,0)
 .S DIC(0)="AEMQZ"
"RTN","WVGETAL1",15,0)
 .S DIC("A")="     Select "_$S(WVLOOP>1:"Next ",1:"")_"Eligibility Code: "
"RTN","WVGETAL1",16,0)
 .D ^DIC
"RTN","WVGETAL1",17,0)
 .S:$D(DTOUT)!($D(DUOUT)) WVPOP=1
"RTN","WVGETAL1",18,0)
 .I $D(DTOUT)!($D(DUOUT))!(Y<0) Q
"RTN","WVGETAL1",19,0)
 .S WVEC(+Y)=""
"RTN","WVGETAL1",20,0)
 .Q
"RTN","WVGETAL1",21,0)
 K DIC
"RTN","WVGETAL1",22,0)
 Q
"RTN","WVGETAL1",23,0)
VECCHK(WVN) ; Veteran/Eligibility Code check
"RTN","WVGETAL1",24,0)
 N DFN,WVLOOP,VAEL,VAERR,X,Y
"RTN","WVGETAL1",25,0)
 ; get veteran status
"RTN","WVGETAL1",26,0)
 I $$GET1^DIQ(2,WVN,1901,"I")="Y" Q 1
"RTN","WVGETAL1",27,0)
 S DFN=WVN
"RTN","WVGETAL1",28,0)
 D ELIG^VADPT ;get elibility code
"RTN","WVGETAL1",29,0)
 S WVLOOP=+$P($G(VAEL(1)),U,1) ;VAEL(1)=internal^external
"RTN","WVGETAL1",30,0)
 I 'WVLOOP Q 0
"RTN","WVGETAL1",31,0)
 I $D(WVEC(WVLOOP)) Q 1
"RTN","WVGETAL1",32,0)
 Q 0
"RTN","WVGETAL1",33,0)
 ;
"RTN","WVGETALL")
0^6^B58560845
"RTN","WVGETALL",1,0)
WVGETALL ;HCIOFO/FT,JR-AUTOLOAD FEMALE PATIENTS ;4/7/00  15:59
"RTN","WVGETALL",2,0)
 ;;1.0;WOMEN'S HEALTH;**3,7,10**;Sep 30, 1998
"RTN","WVGETALL",3,0)
 ;;  Original routine created by IHS/ANMC/MWR
"RTN","WVGETALL",4,0)
 ;;* MICHAEL REMILLARD, DDS * ALASKA NATIVE MEDICAL CENTER *
"RTN","WVGETALL",5,0)
 ;;  AUTOMATICALLY LOADS WOMENS PATIENTS FROM THE MAIN PATIENT FILE,
"RTN","WVGETALL",6,0)
 ;;  LIMITED BY AGE AND CURRENT COMMUNITY.
"RTN","WVGETALL",7,0)
 ;
"RTN","WVGETALL",8,0)
EN ;
"RTN","WVGETALL",9,0)
 N WVPARM,WVEC
"RTN","WVGETALL",10,0)
 S WVPARM=$G(^WV(790.02,+$G(DUZ(2)),0)),WVEC=""
"RTN","WVGETALL",11,0)
 I WVPARM="" D CHECK^WVLOGO Q  ;no site parameter entry
"RTN","WVGETALL",12,0)
 ; Stop if no default case manager
"RTN","WVGETALL",13,0)
 I '$P(WVPARM,U,2) D NODCM^WVUTL9 Q
"RTN","WVGETALL",14,0)
 D SETVARS^WVUTL5
"RTN","WVGETALL",15,0)
 D INTRO  G:WVPOP EXIT
"RTN","WVGETALL",16,0)
 D SELECT G:WVPOP EXIT
"RTN","WVGETALL",17,0)
 D EC^WVGETAL1 G:WVPOP EXIT
"RTN","WVGETALL",18,0)
 D DEVICE G:WVPOP EXIT
"RTN","WVGETALL",19,0)
 D LOAD
"RTN","WVGETALL",20,0)
 ;
"RTN","WVGETALL",21,0)
EXIT ;EP
"RTN","WVGETALL",22,0)
 D KILLALL^WVUTL8 K WVJSDT,WVJEDT,WVN,WVST
"RTN","WVGETALL",23,0)
 Q
"RTN","WVGETALL",24,0)
 ;
"RTN","WVGETALL",25,0)
 ;
"RTN","WVGETALL",26,0)
INTRO ;EP
"RTN","WVGETALL",27,0)
 ;---> INTRODUCTORY SCREENS.
"RTN","WVGETALL",28,0)
 S WVTITLE="AUTOLOAD PATIENTS"
"RTN","WVGETALL",29,0)
 D TITLE^WVUTL5(WVTITLE)
"RTN","WVGETALL",30,0)
 D TEXT1,DIRZ^WVUTL3
"RTN","WVGETALL",31,0)
 Q:WVPOP
"RTN","WVGETALL",32,0)
 D TITLE^WVUTL5(WVTITLE)
"RTN","WVGETALL",33,0)
 D TEXT2,DIRZ^WVUTL3
"RTN","WVGETALL",34,0)
 Q
"RTN","WVGETALL",35,0)
 ;
"RTN","WVGETALL",36,0)
SELECT ;EP
"RTN","WVGETALL",37,0)
 ;---> SELECT AGE.
"RTN","WVGETALL",38,0)
 D TITLE^WVUTL5(WVTITLE)
"RTN","WVGETALL",39,0)
 ;---> SELECT AGE.
"RTN","WVGETALL",40,0)
 K DIR
"RTN","WVGETALL",41,0)
 W !?5,"Select the age below which patients should NOT be added:"
"RTN","WVGETALL",42,0)
 S DIR("A")="     Enter AGE: ",DIR("B")=19
"RTN","WVGETALL",43,0)
 S DIR(0)="NOA^10:99" D HELP1
"RTN","WVGETALL",44,0)
 D ^DIR K DIR
"RTN","WVGETALL",45,0)
 I Y=-1!($D(DIRUT)) S WVPOP=1 Q
"RTN","WVGETALL",46,0)
 S WVAGE=+Y
"RTN","WVGETALL",47,0)
 W !!?5,"Define Active Patient for Patient file download."
"RTN","WVGETALL",48,0)
 W !?5,"If the patient has had no activity (visits or admissions) between"
"RTN","WVGETALL",49,0)
 W !?5,"the start and end dates you enter here, she will not be included"
"RTN","WVGETALL",50,0)
 W !?5,"in this Patient file download.",!
"RTN","WVGETALL",51,0)
STD S DIR(0)="DAO^::E",DIR("A")="     Start Date of Patient Activity to Include: "
"RTN","WVGETALL",52,0)
 S Y=DT-30000,Y=$$DATECHK^WVEXPTRA(Y)
"RTN","WVGETALL",53,0)
 D DD^%DT S DIR("B")=Y
"RTN","WVGETALL",54,0)
 S DIR("?",1)="     If the patient has not had a Visit or Admission after this start date,"
"RTN","WVGETALL",55,0)
 S DIR("?",2)="     they will not be included in the auto-load."
"RTN","WVGETALL",56,0)
 S DIR("?")="     This date can be up to 3 years prior to todays date."
"RTN","WVGETALL",57,0)
 D ^DIR K DIR I Y'>0  W !!!! K WVJRDT S WVPOP=1 Q
"RTN","WVGETALL",58,0)
 S WVJSDT=Y
"RTN","WVGETALL",59,0)
K S DIR(0)="DAO^::E",DIR("A")="     End Date of Patient Activity to Include: "
"RTN","WVGETALL",60,0)
 S DIR("?")="   "
"RTN","WVGETALL",61,0)
 S DIR("?",1)="     If the patient has not had a Visit or Admission before this date,"
"RTN","WVGETALL",62,0)
 S DIR("?",2)="     they will not be included in the auto-load."
"RTN","WVGETALL",63,0)
 S DIR("?",3)="     This date may be up to 3 years prior to todays date, but must be"
"RTN","WVGETALL",64,0)
 S DIR("?",4)="     after the start date."
"RTN","WVGETALL",65,0)
 S Y=DT D DD^%DT S DIR("B")=Y
"RTN","WVGETALL",66,0)
 D ^DIR K DIR I Y'>0  W !!!! K WVJSDT S WVPOP=1 Q
"RTN","WVGETALL",67,0)
 I Y<WVJSDT W !!!,"     END DATE MUST BE AFTER START DATE",!!! K WVJSDT G STD
"RTN","WVGETALL",68,0)
 S WVJEDT=$P(Y,".",1)_".9999"
"RTN","WVGETALL",69,0)
 Q
"RTN","WVGETALL",70,0)
 ;
"RTN","WVGETALL",71,0)
DEVICE ;EP
"RTN","WVGETALL",72,0)
 ;---> GET DEVICE AND POSSIBLY QUEUE TO TASKMAN.
"RTN","WVGETALL",73,0)
 S ZTRTN="LOAD^WVGETALL"
"RTN","WVGETALL",74,0)
 S ZTSAVE("WVAGE")="",ZTSAVE("WVJSDT")="",ZTSAVE("WVJEDT")=""
"RTN","WVGETALL",75,0)
 S ZTSAVE("WVEC(")=""
"RTN","WVGETALL",76,0)
 D ZIS^WVUTL2(.WVPOP,1)
"RTN","WVGETALL",77,0)
 Q
"RTN","WVGETALL",78,0)
 ;
"RTN","WVGETALL",79,0)
LOAD ;EP
"RTN","WVGETALL",80,0)
 ;---> AUTOLOAD OF PATIENTS
"RTN","WVGETALL",81,0)
 N WVCOUNT,WVERROR,N,X,Y D SETVARS^WVUTL5
"RTN","WVGETALL",82,0)
 D TOPHEAD^WVUTL7 S WVCONF=1
"RTN","WVGETALL",83,0)
 S WVTITLE="* AUTOLOAD OF WOMEN PATIENTS *"
"RTN","WVGETALL",84,0)
 D CENTERT^WVUTL5(.WVTITLE)
"RTN","WVGETALL",85,0)
 U IO
"RTN","WVGETALL",86,0)
 W:$Y>0 @IOF D HEADER7^WVUTL7
"RTN","WVGETALL",87,0)
 S (WVCOUNT,N)=0
"RTN","WVGETALL",88,0)
 S WVN=0 F  S WVN=$O(^DPT("ASX","F",WVN)) Q:'WVN  Q:WVPOP  D
"RTN","WVGETALL",89,0)
 .S Y=^DPT(WVN,0)
"RTN","WVGETALL",90,0)
 .;---> QUIT IF NOT FEMALE.
"RTN","WVGETALL",91,0)
 .Q:$P(Y,U,2)'="F"
"RTN","WVGETALL",92,0)
 .;---> QUIT IF DECEASED OR LESS THAN WVAGE.
"RTN","WVGETALL",93,0)
 .Q:+$$AGE^WVUTL1(WVN)<WVAGE
"RTN","WVGETALL",94,0)
 .Q:$D(^WV(790,WVN,0))
"RTN","WVGETALL",95,0)
 .; Quit if patient not a veteran or doesn't have selected eligibility
"RTN","WVGETALL",96,0)
 .; code
"RTN","WVGETALL",97,0)
 .Q:'$$VECCHK^WVGETAL1(WVN)
"RTN","WVGETALL",98,0)
 .;Q:$$GET1^DIQ(2,WVN,1901,"I")'="Y"
"RTN","WVGETALL",99,0)
 .;Quit if not active patient
"RTN","WVGETALL",100,0)
 .Q:$$HOS(WVN)<1
"RTN","WVGETALL",101,0)
 .I $Y+5>IOSL D:WVCRT DIRZ^WVUTL3 Q:WVPOP  D HEADER7^WVUTL7
"RTN","WVGETALL",102,0)
 .W !?3,$$NAME^WVUTL1(WVN),?30,$$SSN^WVUTL1(WVN)
"RTN","WVGETALL",103,0)
 .W ?45,$$SLDT2^WVUTL5($$DOB^WVUTL1(WVN))
"RTN","WVGETALL",104,0)
 .D AUTOADD^WVPATE(WVN,DUZ(2),.WVERROR)
"RTN","WVGETALL",105,0)
 .I WVERROR<0 W ?60,"FAILED" Q
"RTN","WVGETALL",106,0)
 .S WVCOUNT=WVCOUNT+1 W ?60,"ADDED" ;,?70,WVN
"RTN","WVGETALL",107,0)
 .W !?3,"Age: "_$$AGE^WVUTL9(WVN)_" / Veteran: "_$$VET^WVUTL1A(WVN)_" / Elig Code: "_$P($$ELIG^WVUTL9(WVN),U,2),!
"RTN","WVGETALL",108,0)
 W !!?5,"TOTAL: ",WVCOUNT," PATIENT",$S(WVCOUNT=1:"",1:"S")
"RTN","WVGETALL",109,0)
 W " ADDED TO THE WOMEN'S HEALTH DATABASE.",!
"RTN","WVGETALL",110,0)
 I WVCRT&('$D(IO("S"))) D DIRZ^WVUTL3 W @IOF
"RTN","WVGETALL",111,0)
 K TEST1,TEST2 D ^%ZISC
"RTN","WVGETALL",112,0)
 Q
"RTN","WVGETALL",113,0)
 ;
"RTN","WVGETALL",114,0)
 ;
"RTN","WVGETALL",115,0)
TEXT1 ;EP
"RTN","WVGETALL",116,0)
 ;;This utility will examine the VISTA Patient file (#2) for ALL
"RTN","WVGETALL",117,0)
 ;;WOMEN VETERANS or WOMEN patients with an ELIGIBILITY CODE you
"RTN","WVGETALL",118,0)
 ;;select over a given age who were seen in the date range selected,
"RTN","WVGETALL",119,0)
 ;;and add them to the Women's Health Database.
"RTN","WVGETALL",120,0)
 ;;
"RTN","WVGETALL",121,0)
 ;;You will be asked to select a cutoff age (e.g., 40 and over),
"RTN","WVGETALL",122,0)
 ;;Start and End Activity dates and Eligibility Code(s).
"RTN","WVGETALL",123,0)
 ;;Patients not having a visit or admission between these dates
"RTN","WVGETALL",124,0)
 ;;will not be added to the file.  These dates can be no more
"RTN","WVGETALL",125,0)
 ;;than 3 years prior to today's date.
"RTN","WVGETALL",126,0)
 ;;
"RTN","WVGETALL",127,0)
 ;;Women already in the Women's Health Database will not be added twice.
"RTN","WVGETALL",128,0)
 ;;Women who are deceased will not be added.  Women added to the Women's
"RTN","WVGETALL",129,0)
 ;;Health Database will be given Breast and Cervical Treatment Needs of
"RTN","WVGETALL",130,0)
 ;;"Undetermined", with no due dates.
"RTN","WVGETALL",131,0)
 ;;
"RTN","WVGETALL",132,0)
 ;;This utility may be run at any time, as often as desired.  It may be
"RTN","WVGETALL",133,0)
 ;;useful to run it on a monthly basis in order to pick up new women who
"RTN","WVGETALL",134,0)
 ;;are added to the Patient Database.
"RTN","WVGETALL",135,0)
 S WVTAB=5,WVLINL="TEXT1" D PRINTX
"RTN","WVGETALL",136,0)
 Q
"RTN","WVGETALL",137,0)
 ;
"RTN","WVGETALL",138,0)
 ;
"RTN","WVGETALL",139,0)
TEXT2 ;EP
"RTN","WVGETALL",140,0)
 ;;Before the program begins, you will be prompted for a "DEVICE:".
"RTN","WVGETALL",141,0)
 ;;The name, social security number, and date of birth of each
"RTN","WVGETALL",142,0)
 ;;patient added to the Women's Health Database will be displayed
"RTN","WVGETALL",143,0)
 ;;on the DEVICE.
"RTN","WVGETALL",144,0)
 ;;This DEVICE may be a printer, or you may enter "HOME" to have the
"RTN","WVGETALL",145,0)
 ;;information simply display on your screen.
"RTN","WVGETALL",146,0)
 ;;
"RTN","WVGETALL",147,0)
 ;;If the DEVICE you select is a printer, it may be preferable
"RTN","WVGETALL",148,0)
 ;;to "queue" the job, in order to free up your terminal.
"RTN","WVGETALL",149,0)
 ;;See your computer sitemanager for assistance with queuing jobs.
"RTN","WVGETALL",150,0)
 ;;
"RTN","WVGETALL",151,0)
 ;;WARNING: The first time this utility is run, it may add several
"RTN","WVGETALL",152,0)
 ;;thousand patients to the Women's Health Database.  It may take
"RTN","WVGETALL",153,0)
 ;;several minutes or even hours to run, depending on the size of the
"RTN","WVGETALL",154,0)
 ;;database and speed of the computer.  Subsequent runs should be much
"RTN","WVGETALL",155,0)
 ;;quicker.
"RTN","WVGETALL",156,0)
 ;;
"RTN","WVGETALL",157,0)
 ;;You may type "^" at anytime to quit before the program begins.
"RTN","WVGETALL",158,0)
 S WVTAB=5,WVLINL="TEXT2" D PRINTX
"RTN","WVGETALL",159,0)
 Q
"RTN","WVGETALL",160,0)
 ;
"RTN","WVGETALL",161,0)
HELP1 ;EP
"RTN","WVGETALL",162,0)
 ;;Enter a two-digit number that will be the lowest age of patients
"RTN","WVGETALL",163,0)
 ;;added to the Women's Health Database.  For example, if you enter 15,
"RTN","WVGETALL",164,0)
 ;;all women age 15 and older will be included, 14 and under will not.
"RTN","WVGETALL",165,0)
 S WVTAB=5,WVLINL="HELP1" D HELPTX
"RTN","WVGETALL",166,0)
 Q
"RTN","WVGETALL",167,0)
 ;
"RTN","WVGETALL",168,0)
 ;
"RTN","WVGETALL",169,0)
PRINTX ;EP
"RTN","WVGETALL",170,0)
 N I,T,X S T=$$REPEAT^XLFSTR(" ",WVTAB)
"RTN","WVGETALL",171,0)
 F I=1:1 S X=$T(@WVLINL+I) Q:X'[";;"  W !,T,$P(X,";;",2)
"RTN","WVGETALL",172,0)
 Q
"RTN","WVGETALL",173,0)
 ;
"RTN","WVGETALL",174,0)
HELPTX ;EP
"RTN","WVGETALL",175,0)
 N I,T,X S T=$$REPEAT^XLFSTR(" ",WVTAB)
"RTN","WVGETALL",176,0)
 F I=1:1 S X=$T(@WVLINL+I) Q:X'[";;"  S DIR("?",I)=T_$P(X,";;",2)
"RTN","WVGETALL",177,0)
 S DIR("?")=DIR("?",I-1) K DIR("?",I-1)
"RTN","WVGETALL",178,0)
 Q
"RTN","WVGETALL",179,0)
HOS(WVN) ;Comes here to determine if visit/adm. is current
"RTN","WVGETALL",180,0)
 ;WVN=DFN, WVJSDT=Selected earliest date for consideration.
"RTN","WVGETALL",181,0)
 S WVST="ADFN"_WVN
"RTN","WVGETALL",182,0)
 S TEST1=$O(^DGPM(WVST,WVJSDT)) I TEST1>WVJSDT I TEST1<WVJEDT Q 1
"RTN","WVGETALL",183,0)
 S TEST2=$O(^SCE("ADFN",WVN,WVJSDT)) I TEST2>WVJSDT I TEST2<WVJEDT Q 1
"RTN","WVGETALL",184,0)
 Q 0
"RTN","WVLRLINK")
0^2^B46326703
"RTN","WVLRLINK",1,0)
WVLRLINK ;HCIOFO/FT-LAB-WOMEN'S HEALTH LINK  ;2/18/00  10:10
"RTN","WVLRLINK",2,0)
 ;;1.0;WOMEN'S HEALTH;**6,10**;Sep 30, 1998
"RTN","WVLRLINK",3,0)
 ;
"RTN","WVLRLINK",4,0)
CREATE(DFN,LRDFN,LRI,LRA,LRSS) ;
"RTN","WVLRLINK",5,0)
 ; Add lab test to WH file (#790.08).
"RTN","WVLRLINK",6,0)
 ; Called by REPORT RELEASE DATE/TIME field in:
"RTN","WVLRLINK",7,0)
 ; a) File 63, Field 63.08,.11
"RTN","WVLRLINK",8,0)
 ; b) File 63, Field 63.09,.11
"RTN","WVLRLINK",9,0)
 ; Input: DFN    = PATIENT DFN
"RTN","WVLRLINK",10,0)
 ;        LRDFN  = FILE 63 IEN (+^DPT(DFN,"LR"))
"RTN","WVLRLINK",11,0)
 ;        LRI    = INVERSE DATE/TIME OF TEST
"RTN","WVLRLINK",12,0)
 ;        LRA    = ZERO NODE OF THE CY or SP ENTRY
"RTN","WVLRLINK",13,0)
 ;        LRSS   = File 63 subscript (e.g., CY or SP)
"RTN","WVLRLINK",14,0)
 ;
"RTN","WVLRLINK",15,0)
 Q:($G(DFN)']"")!($G(LRDFN)']"")!($G(LRI)']"")!($G(LRA)']"")!($G(LRSS)']"")
"RTN","WVLRLINK",16,0)
 Q:'$D(^WV(790.02,DUZ(2)))  ;no site parameter entry
"RTN","WVLRLINK",17,0)
 Q:'$P($G(^WV(790.02,+$G(DUZ(2)),0)),U,24)  ;lab link is NO or null
"RTN","WVLRLINK",18,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WVLRLINK",19,0)
 S ZTRTN="CREATEQ^WVLRLINK",ZTDESC="WV CREATE FILE 790.08 ENTRY"
"RTN","WVLRLINK",20,0)
 S ZTSAVE("DFN")="",ZTSAVE("LRDFN")="",ZTSAVE("LRI")="",ZTSAVE("LRA")=""
"RTN","WVLRLINK",21,0)
 S ZTSAVE("LRSS")="",ZTIO=""
"RTN","WVLRLINK",22,0)
 S ZTDTH=$$HADD^XLFDT($H,"","","",120) ;time delay if MOVE entry point
"RTN","WVLRLINK",23,0)
 ; is called to delete a bogus entry first so check of lab accession
"RTN","WVLRLINK",24,0)
 ; x-ref doesn't fail.
"RTN","WVLRLINK",25,0)
 D ^%ZTLOAD
"RTN","WVLRLINK",26,0)
 Q
"RTN","WVLRLINK",27,0)
CREATEQ ; Called from CREATE above
"RTN","WVLRLINK",28,0)
 ; WVLOC   = WARD/CLINIC/LOCATION (FILE #44)
"RTN","WVLRLINK",29,0)
 ; WVDATE  = DATE OF THE PROCEDURE (FM date/time)
"RTN","WVLRLINK",30,0)
 ;   WVDR  = DR STRING
"RTN","WVLRLINK",31,0)
 ; WVPROV  = ORDERING PROVIDER (FILE #200)
"RTN","WVLRLINK",32,0)
 ; WVLABAN = LAB ACCESSION # (e.g., CY 99 1)
"RTN","WVLRLINK",33,0)
 N WVDATE,WVDR,WVLABAN,WVLABAN0,WVLOC,WVPROV
"RTN","WVLRLINK",34,0)
 Q:$P($G(^DPT(DFN,0)),U,2)'="F"  ;not female
"RTN","WVLRLINK",35,0)
 Q:'$$VNVEC()  ;vet/non-vet/eligibility code check
"RTN","WVLRLINK",36,0)
 S WVDATE=$P(LRA,U,1) ;date/time specimen taken
"RTN","WVLRLINK",37,0)
 S WVLABAN=$P(LRA,U,6) ;lab accession#
"RTN","WVLRLINK",38,0)
 S WVLOC=$P(LRA,U,8) ;patient location
"RTN","WVLRLINK",39,0)
 I WVLOC]"" S WVLOC=$$HL(WVLOC) ;convert location to File 44 pointer
"RTN","WVLRLINK",40,0)
 S WVPROV=$P(LRA,U,7) ;requesting provider
"RTN","WVLRLINK",41,0)
 ; Quit if this lab test has already been sent to FILE 790.1.
"RTN","WVLRLINK",42,0)
 Q:$D(^WV(790.1,"F",WVLABAN))
"RTN","WVLRLINK",43,0)
 I LRSS'="CY",LRSS'="SP" Q  ;not cytology or surgical pathology
"RTN","WVLRLINK",44,0)
 S WVDR=".02////"_DFN
"RTN","WVLRLINK",45,0)
 S:WVPROV]"" WVDR=WVDR_";.07////"_WVPROV
"RTN","WVLRLINK",46,0)
 S WVDR=WVDR_";.1////"_$G(DUZ(2))
"RTN","WVLRLINK",47,0)
 S:WVLOC]"" WVDR=WVDR_";.11////"_WVLOC
"RTN","WVLRLINK",48,0)
 S WVDR=WVDR_";.12////"_WVDATE
"RTN","WVLRLINK",49,0)
 S WVDR=WVDR_";.18////.5;.19////"_DT_";.34////"_$G(DUZ(2))
"RTN","WVLRLINK",50,0)
 S WVDR=WVDR_";2.18////"_LRDFN_";2.19////"_LRI_";2.2////"_LRSS
"RTN","WVLRLINK",51,0)
 S X=WVLABAN,Y=0
"RTN","WVLRLINK",52,0)
 K DD,DO
"RTN","WVLRLINK",53,0)
 S DIC("DR")=WVDR,DIC="^WV(790.08,",DIC(0)="ML",DLAYGO=790.08
"RTN","WVLRLINK",54,0)
 D FILE^DICN
"RTN","WVLRLINK",55,0)
 Q:Y<1  ;FILE 790.08 entry was not created
"RTN","WVLRLINK",56,0)
 D MAIL^WVLABWP(DFN,WVLABAN,WVPROV,LRSS) ;patient, lab accession #, provider/requestor, lab subscript (CY or SP)
"RTN","WVLRLINK",57,0)
 Q
"RTN","WVLRLINK",58,0)
EXIT ;EP
"RTN","WVLRLINK",59,0)
 K I,N,X
"RTN","WVLRLINK",60,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVLRLINK",61,0)
 Q
"RTN","WVLRLINK",62,0)
DELETE(DFN,LRDFN,LRI,LRA,LRSS) ;
"RTN","WVLRLINK",63,0)
 ; Modify WH to reflect change in lab report status (no longer released).
"RTN","WVLRLINK",64,0)
 ; Called by REPORT RELEASE DATE/TIME field xref in:
"RTN","WVLRLINK",65,0)
 ; a) File 63, Field 63.08,.11
"RTN","WVLRLINK",66,0)
 ; b) File 63, Field 63.09,.11
"RTN","WVLRLINK",67,0)
 Q:'$D(DFN)!('$D(LRDFN))!('$D(LRI))!('$D(LRA))!('$D(LRSS))
"RTN","WVLRLINK",68,0)
 Q:'$D(^WV(790.02,DUZ(2)))  ;no site parameter entry
"RTN","WVLRLINK",69,0)
 Q:'$P($G(^WV(790.02,+$G(DUZ(2)),0)),U,24)  ;lab link is NO or null
"RTN","WVLRLINK",70,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WVLRLINK",71,0)
 S ZTRTN="DELETEQ^WVLRLINK",ZTDESC="WV Change in Lab Rpt Status"
"RTN","WVLRLINK",72,0)
 S ZTSAVE("DFN")="",ZTSAVE("LRDFN")="",ZTSAVE("LRI")="",ZTSAVE("LRA")=""
"RTN","WVLRLINK",73,0)
 S ZTSAVE("LRSS")=""
"RTN","WVLRLINK",74,0)
 S ZTIO="",ZTDTH=$H
"RTN","WVLRLINK",75,0)
 D ^%ZTLOAD
"RTN","WVLRLINK",76,0)
 Q
"RTN","WVLRLINK",77,0)
DELETEQ ; Called from DELETE above.
"RTN","WVLRLINK",78,0)
 N WVIEN,WVDATE,WVCMGR,WVLABAN,WVLOOP,WVMSG,WVNODE,WVPN ;,WVPROV
"RTN","WVLRLINK",79,0)
 N XMDUZ,XMSUB,XMTEXT,XMY ;send mail message to case manager
"RTN","WVLRLINK",80,0)
 S WVLABAN=$P(LRA,U,6) ;lab accession#
"RTN","WVLRLINK",81,0)
 Q:WVLABAN=""
"RTN","WVLRLINK",82,0)
 S WVIEN=$O(^WV(790.08,"B",WVLABAN,0))
"RTN","WVLRLINK",83,0)
 I WVIEN D DELETE^WVLABADD(WVIEN) Q  ;delete, not yet addressed
"RTN","WVLRLINK",84,0)
 Q:'$D(^WV(790.1,"F",WVLABAN))  ;never entered in WH procedure file
"RTN","WVLRLINK",85,0)
 ; Next look up lab test in WH procedure file and send warning message
"RTN","WVLRLINK",86,0)
 ; to WH case manager.
"RTN","WVLRLINK",87,0)
 S WVIEN=$O(^WV(790.1,"F",WVLABAN,0))
"RTN","WVLRLINK",88,0)
 Q:'$D(^WV(790.1,WVIEN,0))
"RTN","WVLRLINK",89,0)
 D RADMOD^WVPROC(WVIEN) ;update procedure status to "open"
"RTN","WVLRLINK",90,0)
 S WVCMGR=+$$GET1^DIQ(790,DFN,.1,"I") ;get case manager
"RTN","WVLRLINK",91,0)
 S:WVCMGR XMY(WVCMGR)=""
"RTN","WVLRLINK",92,0)
 ; if no case manager, then get default case manager(s)
"RTN","WVLRLINK",93,0)
 I 'WVCMGR S WVLOOP=0 F  S WVLOOP=$O(^WV(790.02,WVLOOP)) Q:'WVLOOP  D
"RTN","WVLRLINK",94,0)
 .S WVCMGR=$$GET1^DIQ(790.02,WVLOOP,.02,"I")
"RTN","WVLRLINK",95,0)
 .S:WVCMGR XMY(WVCMGR)=""
"RTN","WVLRLINK",96,0)
 .Q
"RTN","WVLRLINK",97,0)
 Q:$O(XMY(0))'>0  ;no case manager(s)
"RTN","WVLRLINK",98,0)
 ;S:WVPROV XMY(WVPROV)=""
"RTN","WVLRLINK",99,0)
 S WVNODE=$G(^WV(790.1,+WVIEN,0))
"RTN","WVLRLINK",100,0)
 S WVPN=$E($P(WVNODE,U,1),1,2),WVPN=$$PN(WVPN)
"RTN","WVLRLINK",101,0)
 S XMDUZ=.5 ;message sender
"RTN","WVLRLINK",102,0)
 S XMSUB="Lab Report for WH patient is UNVERIFIED"
"RTN","WVLRLINK",103,0)
 S WVMSG(1)="        Patient: "_$P($G(^DPT(DFN,0)),U,1)_" (SSN: "_$$SSN^WVUTL1(DFN)_")"
"RTN","WVLRLINK",104,0)
 S WVMSG(2)=" WH Accession #: "_$P(WVNODE,U,1)_"  Procedure Type: "_$S(WVPN]"":WVPN,1:"Unknown")
"RTN","WVLRLINK",105,0)
 S WVMSG(3)="Lab Accession #: "_WVLABAN
"RTN","WVLRLINK",106,0)
 S WVMSG(4)=" "
"RTN","WVLRLINK",107,0)
 S WVMSG(5)="NOTE: This lab test has been UNVERIFIED in the LAB package."
"RTN","WVLRLINK",108,0)
 S WVMSG(6)=" "
"RTN","WVLRLINK",109,0)
 S WVMSG(7)="The status of the associated WH procedure has been changed to 'open',"
"RTN","WVLRLINK",110,0)
 S WVMSG(8)="You may wish to contact Lab Service to find out the reason for the change."
"RTN","WVLRLINK",111,0)
 S WVMSG(9)="Please use the 'Edit a Procedure' option in the WOMEN'S HEALTH package"
"RTN","WVLRLINK",112,0)
 S WVMSG(10)="to modify/close this procedure."
"RTN","WVLRLINK",113,0)
 S XMTEXT="WVMSG("
"RTN","WVLRLINK",114,0)
 D ^XMD
"RTN","WVLRLINK",115,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVLRLINK",116,0)
 Q
"RTN","WVLRLINK",117,0)
HL(WVLOC) ; Get Hospital Location file (#44) pointer
"RTN","WVLRLINK",118,0)
 N WVARRAY,WVERR
"RTN","WVLRLINK",119,0)
 D FIND^DIC(44,"","","X",WVLOC,"","C","","","WVARRAY","WVERR")
"RTN","WVLRLINK",120,0)
 I +$G(WVARRAY("DILIST",0))=1 Q +WVARRAY("DILIST",2,1)
"RTN","WVLRLINK",121,0)
 Q ""
"RTN","WVLRLINK",122,0)
PN(X) ; Get procedure name
"RTN","WVLRLINK",123,0)
 I X="" Q ""
"RTN","WVLRLINK",124,0)
 S X=$O(^WV(790.2,"D",X,0)) ;look at abbreviation x-ref
"RTN","WVLRLINK",125,0)
 I 'X Q ""
"RTN","WVLRLINK",126,0)
 S X=$P($G(^WV(790.2,+X,0)),U,1)
"RTN","WVLRLINK",127,0)
 Q X
"RTN","WVLRLINK",128,0)
 ;
"RTN","WVLRLINK",129,0)
MOVE(DFN,LRDFN,LRI,LRA,LRSS) ; Called from Lab package when a lab accession is
"RTN","WVLRLINK",130,0)
 ; moved from one patient to another because the test was originally
"RTN","WVLRLINK",131,0)
 ; associated to the wrong patient.
"RTN","WVLRLINK",132,0)
 Q:'$D(DFN)!('$D(LRDFN))!('$D(LRI))!('$D(LRA))!('$D(LRSS))
"RTN","WVLRLINK",133,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WVLRLINK",134,0)
 S ZTRTN="MOVEQ^WVLRLINK",ZTDESC="WV Lab Accession moved to another patient"
"RTN","WVLRLINK",135,0)
 S ZTSAVE("DFN")="",ZTSAVE("LRDFN")="",ZTSAVE("LRI")="",ZTSAVE("LRA")=""
"RTN","WVLRLINK",136,0)
 S ZTSAVE("LRSS")="",ZTIO="",ZTDTH=$H
"RTN","WVLRLINK",137,0)
 D ^%ZTLOAD
"RTN","WVLRLINK",138,0)
 Q
"RTN","WVLRLINK",139,0)
MOVEQ ; Called from MOVE above
"RTN","WVLRLINK",140,0)
 N DA,DIE,DR
"RTN","WVLRLINK",141,0)
 N WVACCN,WVCMGR,WVIEN,WVLABAN,WVLOOP,WVNIEN,WVNODE,WVPIEN,WVPN,WVRD
"RTN","WVLRLINK",142,0)
 S WVLABAN=$P(LRA,U,6) ;lab accession#
"RTN","WVLRLINK",143,0)
 Q:WVLABAN=""
"RTN","WVLRLINK",144,0)
 S WVIEN=$O(^WV(790.08,"B",WVLABAN,0)) ;check WV LAB TESTS first
"RTN","WVLRLINK",145,0)
 I WVIEN D  Q  ;fix/delete File 790.8 entry, not a file (790.1) entry
"RTN","WVLRLINK",146,0)
 .D DELETE^WVLABADD(WVIEN)
"RTN","WVLRLINK",147,0)
 .Q
"RTN","WVLRLINK",148,0)
 ;
"RTN","WVLRLINK",149,0)
 S WVPIEN=$O(^WV(790.1,"F",WVLABAN,0)) ;check WH Procedure file
"RTN","WVLRLINK",150,0)
 Q:'WVPIEN  ;lab test was not converted into a WH procedure
"RTN","WVLRLINK",151,0)
 S WVNODE=$G(^WV(790.1,WVPIEN,0))
"RTN","WVLRLINK",152,0)
 S WVACCN=$P(WVNODE,U,1) ;WH accession#
"RTN","WVLRLINK",153,0)
 S WVDFN=+$P(WVNODE,U,2) ;DFN for existing patient
"RTN","WVLRLINK",154,0)
 Q:WVACCN=""
"RTN","WVLRLINK",155,0)
 S WVRD=$$RDC("Error/disregard")
"RTN","WVLRLINK",156,0)
 ; delete links to lab test entry so wrong lab report doesn't display
"RTN","WVLRLINK",157,0)
 S DIE="^WV(790.1,",DA=WVPIEN,DR=".05////"_WVRD_";2.17///@;2.18///@;2.19///@;2.2///@"
"RTN","WVLRLINK",158,0)
 ; include amended comment?
"RTN","WVLRLINK",159,0)
 D ^DIE
"RTN","WVLRLINK",160,0)
 S WVNIEN=$O(^WV(790.4,"C",WVACCN,0)) ;notification for that procedure?
"RTN","WVLRLINK",161,0)
 ; Send a mail message to case manager about patient change
"RTN","WVLRLINK",162,0)
 D MOVE^WVLABWP(WVDFN,WVNODE,WVNIEN)
"RTN","WVLRLINK",163,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVLRLINK",164,0)
 Q
"RTN","WVLRLINK",165,0)
RDC(WVRD) ; Return ien of Result/Diagnosis code
"RTN","WVLRLINK",166,0)
 ; input text of result/diagnois
"RTN","WVLRLINK",167,0)
 I WVRD="" Q ""
"RTN","WVLRLINK",168,0)
 Q +$O(^WV(790.31,"B",WVRD,0))
"RTN","WVLRLINK",169,0)
 ;
"RTN","WVLRLINK",170,0)
VNVEC() ; Veteran/Non-Veteran/Eligibility Code check
"RTN","WVLRLINK",171,0)
 ; DFN must be defined
"RTN","WVLRLINK",172,0)
 ; Returns 1 - veteran
"RTN","WVLRLINK",173,0)
 ;             include all non-vets flag set to YES
"RTN","WVLRLINK",174,0)
 ;             non-vet patient's eligibility code is on list to track 
"RTN","WVLRLINK",175,0)
 N WVALL,WVLOOP,X,Y
"RTN","WVLRLINK",176,0)
 I $E($$VET^WVUTL1A(DFN))="Y" Q 1  ;veteran
"RTN","WVLRLINK",177,0)
 S WVALL=$P($G(^WV(790.02,DUZ(2),0)),U,26) ;include all non-vets
"RTN","WVLRLINK",178,0)
 I WVALL=1!(WVALL="") Q 1  ;1=YES
"RTN","WVLRLINK",179,0)
 S WVLOOP=+$$ELIG^WVUTL9(DFN) ;internal^external elig code
"RTN","WVLRLINK",180,0)
 I 'WVLOOP Q 0  ;no eligibility code
"RTN","WVLRLINK",181,0)
 I $D(^WV(790.02,DUZ(2),6,WVLOOP)) Q 1  ;code is on list to be tracked
"RTN","WVLRLINK",182,0)
 Q 0
"RTN","WVLRLINK",183,0)
 ;
"RTN","WVPATP")
0^8^B19567781
"RTN","WVPATP",1,0)
WVPATP ;HCIOFO/FT,JR IHS/ANMC/MWR - Print WH Patient Case Data ;2/23/00  15:03
"RTN","WVPATP",2,0)
 ;;1.0;WOMEN'S HEALTH;**10**;Sep 30, 1998
"RTN","WVPATP",3,0)
 ;;* MICHAEL REMILLARD, DDS * ALASKA NATIVE MEDICAL CENTER *
"RTN","WVPATP",4,0)
 ;;  PRINT A PATIENT'S CASE DATA.
"RTN","WVPATP",5,0)
 ;
"RTN","WVPATP",6,0)
BEGIN ;EP
"RTN","WVPATP",7,0)
 ;---> LOOP TO PRINT PATIENTS' CASE DATA.
"RTN","WVPATP",8,0)
 ;---> NOT CURRENTLY CALLED BY ANY OPTION.
"RTN","WVPATP",9,0)
 D SETVARS^WVUTL5 S WVPOP=0
"RTN","WVPATP",10,0)
 F  D  Q:$G(Y)<0
"RTN","WVPATP",11,0)
 .D TITLE^WVUTL5("PRINT A PATIENT'S CASE DATA")
"RTN","WVPATP",12,0)
 .D PATLKUP^WVUTL8(.Y) Q:Y<0  S WVDFN=+Y
"RTN","WVPATP",13,0)
 .D DEVICE
"RTN","WVPATP",14,0)
 .I WVPOP S Y=-1 Q
"RTN","WVPATP",15,0)
 .D DATA(WVDFN)
"RTN","WVPATP",16,0)
 D EXIT
"RTN","WVPATP",17,0)
 Q
"RTN","WVPATP",18,0)
 ;
"RTN","WVPATP",19,0)
PRTCASE(WVDFN) ;EP
"RTN","WVPATP",20,0)
 ;---> PRINT CASE DATA ON ONE PATIENT.
"RTN","WVPATP",21,0)
 ;---> CALLED FROM ^WVPATE (EDIT PATIENT CASE DATA).
"RTN","WVPATP",22,0)
 I '$G(WVDFN) D  D DIRZ^WVUTL3 Q
"RTN","WVPATP",23,0)
 .W !?5,"WVDFN not passed.  Please contact your site manager."
"RTN","WVPATP",24,0)
 D DEVICE Q:WVPOP
"RTN","WVPATP",25,0)
 D DATA(WVDFN)
"RTN","WVPATP",26,0)
 Q
"RTN","WVPATP",27,0)
 ;
"RTN","WVPATP",28,0)
DEVICE ;EP
"RTN","WVPATP",29,0)
 ;---> GET DEVICE AND POSSIBLY QUEUE TO TASKMAN.
"RTN","WVPATP",30,0)
 S ZTRTN="DEQUEUE^WVPATP"
"RTN","WVPATP",31,0)
 F WVSV="DFN" D
"RTN","WVPATP",32,0)
 .I $D(@("WV"_WVSV)) S ZTSAVE("WV"_WVSV)=""
"RTN","WVPATP",33,0)
 D ZIS^WVUTL2(.WVPOP,1)
"RTN","WVPATP",34,0)
 Q
"RTN","WVPATP",35,0)
 ;
"RTN","WVPATP",36,0)
DEQUEUE ;EP
"RTN","WVPATP",37,0)
 ;---> TASKED PRINTOUT OF PATIENT CASE DATA.
"RTN","WVPATP",38,0)
 D DATA(WVDFN)
"RTN","WVPATP",39,0)
 D EXIT
"RTN","WVPATP",40,0)
 Q
"RTN","WVPATP",41,0)
 ;
"RTN","WVPATP",42,0)
DATA(WVDFN) ;EP
"RTN","WVPATP",43,0)
 ;---> SORT PROCEDURE TYPE FILE POINTERS.
"RTN","WVPATP",44,0)
 N A,WVNODE,WVTMP,I,N
"RTN","WVPATP",45,0)
 D PATVARS^WVUTL3(WVDFN)
"RTN","WVPATP",46,0)
 ;---> LOOP THROUGH WV PROCEDURE FILE.
"RTN","WVPATP",47,0)
 S I=0
"RTN","WVPATP",48,0)
 S A=WVNAMAGE
"RTN","WVPATP",49,0)
 S WVNODE="Patient Name: "_A_$$S(38-$L(A))_$$PNLAB^WVUTL5()_WVCHRT
"RTN","WVPATP",50,0)
 D NODE
"RTN","WVPATP",51,0)
 S A=$$STREET^WVUTL1(WVDFN)
"RTN","WVPATP",52,0)
 S WVNODE=$$S(6)_"Street: "_A_$$S(31-$L(A))
"RTN","WVPATP",53,0)
 S WVNODE=WVNODE_"Patient Phone: "_$$HPHONE^WVUTL1(WVDFN)
"RTN","WVPATP",54,0)
 D NODE
"RTN","WVPATP",55,0)
 S A=$$CTYSTZ^WVUTL1(WVDFN)
"RTN","WVPATP",56,0)
 S WVNODE=$$S(2)_"Cty/St/Zip: "_A_$$S(33-$L(A))
"RTN","WVPATP",57,0)
 S WVNODE=WVNODE_"Pr Provider: "_$E($$PROVI^WVUTL1A(WVDFN),1,20)
"RTN","WVPATP",58,0)
 D NODE
"RTN","WVPATP",59,0)
 S WVNODE="   Elig Code: "_$P($$ELIG^WVUTL9(WVDFN),U,2)
"RTN","WVPATP",60,0)
 S WVNODE=WVNODE_$$S(51-$L(WVNODE))_"Veteran: "_$$VET^WVUTL1A(WVDFN)
"RTN","WVPATP",61,0)
 D NODE
"RTN","WVPATP",62,0)
 S WVNODE="         " D NODE
"RTN","WVPATP",63,0)
 S A=$E(WVCMGR,1,28)
"RTN","WVPATP",64,0)
 S WVNODE=$$S(10)_"Case Manager: "_A_$$S(29-$L(A))
"RTN","WVPATP",65,0)
 S WVNODE=WVNODE_"Inactive Date: "_$$SLDT2^WVUTL5($$INACT^WVUTL1(WVDFN))
"RTN","WVPATP",66,0)
 D NODE
"RTN","WVPATP",67,0)
 S WVNODE=$$S(8)_"Breast Tx Need: "_WVBNEED
"RTN","WVPATP",68,0)
 D NODE
"RTN","WVPATP",69,0)
 S A="" I WVDFN>0 S A=$P($G(^WV(790,WVDFN,0)),U,25),A=$S(A'="":A,1:"NOT ENTERED") S:A>0 A=$P($G(^DIC(4,A,0)),U)
"RTN","WVPATP",70,0)
 S WVNODE=$$S(7)_"Breast Facility: "_A
"RTN","WVPATP",71,0)
 D NODE
"RTN","WVPATP",72,0)
 S WVNODE=$$S(6)_"Cervical Tx Need: "_WVCNEED
"RTN","WVPATP",73,0)
 D NODE
"RTN","WVPATP",74,0)
 S A="" I WVDFN>0 S A=$P($G(^WV(790,WVDFN,0)),U,26) S A=$S(A'="":A,1:"NOT ENTERED") S:A>0 A=$P($G(^DIC(4,A,0)),U)
"RTN","WVPATP",75,0)
 S WVNODE=$$S(5)_"Cervical Facility: "_A
"RTN","WVPATP",76,0)
 D NODE
"RTN","WVPATP",77,0)
 S WVNODE=$$S(11)_"PAP Regimen: "_WVPAPRG
"RTN","WVPATP",78,0)
 D NODE S WVNODE=" " D NODE
"RTN","WVPATP",79,0)
 S WVNODE=$$S(0)_"Family Hx of Breast CA: "_$$FAMHX^WVUTL1(WVDFN)
"RTN","WVPATP",80,0)
 D NODE
"RTN","WVPATP",81,0)
 S A=$$EDC^WVUTL1(WVDFN)
"RTN","WVPATP",82,0)
 I A="",$P(^WV(790,WVDFN,0),U,13)=0 S A="NO"
"RTN","WVPATP",83,0)
 S WVNODE=$$S(3)_"Currently  Pregnant: "_A_$$S(32-$L(A))
"RTN","WVPATP",84,0)
 S WVNODE=WVNODE_"DES Daughter: "_$$DES^WVUTL1(WVDFN)
"RTN","WVPATP",85,0)
 D NODE
"RTN","WVPATP",86,0)
 S A=$$MST^WVUTL1A(WVDFN)
"RTN","WVPATP",87,0)
 S WVNODE=$$S(9)_"Sexual Trauma: "_A
"RTN","WVPATP",88,0)
 D NODE
"RTN","WVPATP",89,0)
 S A=$$ENRLDT^WVUTL1(WVDFN)
"RTN","WVPATP",90,0)
 S WVNODE=$$S(1)_"Date of 1st Encounter: "_A_$$S(29-$L(A))
"RTN","WVPATP",91,0)
 S WVNODE=WVNODE_"Referral Source: "_$$REFS^WVUTL1(WVDFN)
"RTN","WVPATP",92,0)
 D NODE S WVNODE=" " D NODE
"RTN","WVPATP",93,0)
 S WVNODE=$$S(25)_"----  Text of NOTES  ----"
"RTN","WVPATP",94,0)
 D NODE S WVNODE=" " D NODE
"RTN","WVPATP",95,0)
 S N=0
"RTN","WVPATP",96,0)
 F  S N=$O(^WV(790,WVDFN,1,N)) Q:'N  D
"RTN","WVPATP",97,0)
 .S WVNODE=^WV(790,WVDFN,1,N,0) D NODE
"RTN","WVPATP",98,0)
 S WVNODE=" " D NODE
"RTN","WVPATP",99,0)
 S WVNODE=$$S(20)_"-----  End of Patient Printout  -----" D NODE
"RTN","WVPATP",100,0)
 D DISPLAY
"RTN","WVPATP",101,0)
 Q
"RTN","WVPATP",102,0)
 ;
"RTN","WVPATP",103,0)
NODE ;EP
"RTN","WVPATP",104,0)
 ;---> SET NODE.
"RTN","WVPATP",105,0)
 S I=I+1,WVTMP("WV",$J,I,0)=WVNODE
"RTN","WVPATP",106,0)
 Q
"RTN","WVPATP",107,0)
 ;
"RTN","WVPATP",108,0)
S(S) ;EP
"RTN","WVPATP",109,0)
 ;---> SPACES.
"RTN","WVPATP",110,0)
 Q $$S^WVUTL7($G(S))
"RTN","WVPATP",111,0)
 ;
"RTN","WVPATP",112,0)
DISPLAY ;EP
"RTN","WVPATP",113,0)
 U IO
"RTN","WVPATP",114,0)
 D TOPHEAD^WVUTL7
"RTN","WVPATP",115,0)
 S WVTITLE1="* * *  WOMEN'S HEALTH: PATIENT CASE DATA PRINTOUT  * * *"
"RTN","WVPATP",116,0)
 D CENTERT^WVUTL5(.WVTITLE1)
"RTN","WVPATP",117,0)
 ;
"RTN","WVPATP",118,0)
 S (WVPOP,N,Z)=0
"RTN","WVPATP",119,0)
 W:WVCRT @IOF D HEADER
"RTN","WVPATP",120,0)
 F  S N=$O(WVTMP("WV",$J,N)) Q:'N!(WVPOP)  D
"RTN","WVPATP",121,0)
 .I $Y+5>IOSL D:WVCRT DIRZ^WVUTL3 Q:WVPOP  D HEADER
"RTN","WVPATP",122,0)
 .W !,WVTMP("WV",$J,N,0)
"RTN","WVPATP",123,0)
 I WVCRT&('WVPOP) W !! D DIRZ^WVUTL3
"RTN","WVPATP",124,0)
 D ^%ZISC
"RTN","WVPATP",125,0)
 K WVTMP("WV",$J)
"RTN","WVPATP",126,0)
 Q
"RTN","WVPATP",127,0)
 ;
"RTN","WVPATP",128,0)
HEADER ;EP
"RTN","WVPATP",129,0)
 W:WVPAGE>1!WVCRT @IOF,!
"RTN","WVPATP",130,0)
 W WVCONFF W:'WVCRT !,WVTIMLN
"RTN","WVPATP",131,0)
 W !!,WVTITLE1,?70,"page: ",WVPAGE
"RTN","WVPATP",132,0)
 W !,$$RUNDT^WVUTL1A("C")
"RTN","WVPATP",133,0)
 W !,WVLINE S WVPAGE=WVPAGE+1
"RTN","WVPATP",134,0)
 ;W !!,"Patient Name: ",WVNAMAGE,?53,$$PNLAB^WVUTL5(),WVCHRT
"RTN","WVPATP",135,0)
 Q
"RTN","WVPATP",136,0)
 ;
"RTN","WVPATP",137,0)
EXIT ;EP
"RTN","WVPATP",138,0)
 D KILLALL^WVUTL8
"RTN","WVPATP",139,0)
 Q
"RTN","WVRALIN1")
0^7^B6771511
"RTN","WVRALIN1",1,0)
WVRALIN1 ;HCIOFO/FT-RAD/NM-WOMEN'S HEALTH LINK (cont.) ;2/18/00  10:58
"RTN","WVRALIN1",2,0)
 ;;1.0;WOMEN'S HEALTH;**5,10**;Sep 30, 1998
"RTN","WVRALIN1",3,0)
 ;
"RTN","WVRALIN1",4,0)
FIND ; Try to associate an incoming RAD/NM entry with an existing WH
"RTN","WVRALIN1",5,0)
 ; procedure that has no link to RAD/NM entry.
"RTN","WVRALIN1",6,0)
 ; Called from WVRALINK.
"RTN","WVRALIN1",7,0)
 ; Input variables needed:
"RTN","WVRALIN1",8,0)
 ;    DFN - patient ien
"RTN","WVRALIN1",9,0)
 ; WVPROC - ien of WV Procedure Type (790.2)
"RTN","WVRALIN1",10,0)
 ; WVDATE - date portion of date of rad/nm procedure
"RTN","WVRALIN1",11,0)
 ;
"RTN","WVRALIN1",12,0)
 ; First, loop through Date of Procedure x-ref
"RTN","WVRALIN1",13,0)
 N WVDTECHK,WVFLAG,WVIEN,WVLOOP,WVNODE
"RTN","WVRALIN1",14,0)
 S WVDTECHK=WVDATE_".999999",WVFLAG=0,WVLOOP=WVDATE-.000001
"RTN","WVRALIN1",15,0)
 F  S WVLOOP=$O(^WV(790.1,"D",WVLOOP)) Q:'WVLOOP!(WVLOOP>WVDTECHK)!(WVFLAG)  S WVIEN=0 F  S WVIEN=$O(^WV(790.1,"D",WVLOOP,WVIEN)) Q:'WVIEN!(WVFLAG)  D
"RTN","WVRALIN1",16,0)
 .S WVNODE=$G(^WV(790.1,WVIEN,0)) Q:WVNODE=""
"RTN","WVRALIN1",17,0)
 .Q:$P(WVNODE,U,15)]""  ;already has a rad/nm link
"RTN","WVRALIN1",18,0)
 .Q:$P(WVNODE,U,2)'=DFN  ;not the same patient
"RTN","WVRALIN1",19,0)
 .Q:$P(WVNODE,U,4)'=WVPROC  ;not the same procedure
"RTN","WVRALIN1",20,0)
 .D LINK
"RTN","WVRALIN1",21,0)
 .S WVFLAG=1 ;flag that link is made to an existing record, so quit loop
"RTN","WVRALIN1",22,0)
 .Q
"RTN","WVRALIN1",23,0)
 Q
"RTN","WVRALIN1",24,0)
LINK ; Update values in existing entry including day-case # link.
"RTN","WVRALIN1",25,0)
 ; Input variables needed:
"RTN","WVRALIN1",26,0)
 ;  WVNODE - zero node of a File 790.1 entry.
"RTN","WVRALIN1",27,0)
 ;   WVIEN - File 790.1 ien
"RTN","WVRALIN1",28,0)
 Q:$G(WVNODE)=""  Q:'$G(WVIEN)
"RTN","WVRALIN1",29,0)
 N DIE,DA,DR
"RTN","WVRALIN1",30,0)
 S DIE="^WV(790.1,",DA=WVIEN
"RTN","WVRALIN1",31,0)
 ; fill in missing data where possible.
"RTN","WVRALIN1",32,0)
 S DR=".15////"_WVCASE ;radiology mam case# (i.e., link to RAD/NM entry)
"RTN","WVRALIN1",33,0)
 I $P(WVNODE,U,5)="",$G(WVBWDX)]"" S DR=DR_";.05////"_WVBWDX ;result/dx
"RTN","WVRALIN1",34,0)
 I $P(WVNODE,U,7)="",$G(WVPROV)]"" S DR=DR_";.07////"_WVPROV ;provider
"RTN","WVRALIN1",35,0)
 I $P(WVNODE,U,9)="",$G(WVMOD)]"" S DR=DR_";.09////"_WVMOD ;modifier
"RTN","WVRALIN1",36,0)
 I $P(WVNODE,U,10)="",$G(DUZ(2))]"" S DR=DR_";.1////"_DUZ(2) ;facility
"RTN","WVRALIN1",37,0)
 I $P(WVNODE,U,11)="",$G(WVLOC)]"" S DR=DR_";.11////"_WVLOC ;location
"RTN","WVRALIN1",38,0)
 I $P(WVNODE,U,35)="",$G(WVCREDIT)]"" S DR=DR_";.35////"_WVCREDIT ;rad/nm credit method
"RTN","WVRALIN1",39,0)
 D ^DIE
"RTN","WVRALIN1",40,0)
 Q
"RTN","WVRALIN1",41,0)
VNVEC() ; Veteran/Non-Veteran/Eligibility Code check
"RTN","WVRALIN1",42,0)
 ; DFN must be defined
"RTN","WVRALIN1",43,0)
 ; Returns 1 - veteran
"RTN","WVRALIN1",44,0)
 ;             include all non-vets flag set to YES
"RTN","WVRALIN1",45,0)
 ;             non-vet patient's eligibility code is on list to track 
"RTN","WVRALIN1",46,0)
 N WVALL,WVLOOP,X,Y
"RTN","WVRALIN1",47,0)
 I $E($$VET^WVUTL1A(DFN))="Y" Q 1  ;veteran
"RTN","WVRALIN1",48,0)
 S WVALL=$P($G(^WV(790.02,DUZ(2),0)),U,25) ;include all non-vets
"RTN","WVRALIN1",49,0)
 I WVALL=1!(WVALL="") Q 1  ;1=YES
"RTN","WVRALIN1",50,0)
 S WVLOOP=+$$ELIG^WVUTL9(DFN) ;internal^external elig code
"RTN","WVRALIN1",51,0)
 I 'WVLOOP Q 0  ;no eligibility code
"RTN","WVRALIN1",52,0)
 I $D(^WV(790.02,DUZ(2),5,WVLOOP)) Q 1  ;code is on list to be tracked
"RTN","WVRALIN1",53,0)
 Q 0
"RTN","WVRALIN1",54,0)
 ;
"RTN","WVRALINK")
0^1^B43726031
"RTN","WVRALINK",1,0)
WVRALINK ;HCIOFO/FT-RAD/NM-WOMEN'S HEALTH LINK  ;2/18/00  11:07
"RTN","WVRALINK",2,0)
 ;;1.0;WOMEN'S HEALTH;**3,5,7,9,10**;Sep 30, 1998
"RTN","WVRALINK",3,0)
 ;;  Original routine created by IHS/ANMC/MWR
"RTN","WVRALINK",4,0)
 ;;* MICHAEL REMILLARD, DDS * ALASKA NATIVE MEDICAL CENTER *
"RTN","WVRALINK",5,0)
 ;;  CREATE MAMMOGRAM PROCEDURE IN WOMEN'S HEALTH FOR THIS PATIENT.
"RTN","WVRALINK",6,0)
 ;;  CALLED BY ^RART WHEN A RADIOLOGY REPORT IS VERIFIED.
"RTN","WVRALINK",7,0)
 ;;  CALLED BY ^RARTE1 WHEN A RADIOLOGY REPORT IS UNVERIFIED.
"RTN","WVRALINK",8,0)
 ;;  CALLED BY ^WVEXPTRA WHEN EXPORTING HISTORICAL MAMS TO WOMEN'S HEALTH
"RTN","WVRALINK",9,0)
 ;
"RTN","WVRALINK",10,0)
 ;---> REQUIRED VARIABLES: DFN  = DFN OF RADIOLOGY PATIENT.
"RTN","WVRALINK",11,0)
 ;--->                     DATE = INVERSE DATE/TIME OF VISIT.
"RTN","WVRALINK",12,0)
 ;--->                     CASE = IEN OF RADIOLOGY EXAM (CASE).
"RTN","WVRALINK",13,0)
 ;
"RTN","WVRALINK",14,0)
 ;---> OPTIONAL VARIABLE:  WVNEWP = TOTAL NEW WH PATIENTS ADDED.
"RTN","WVRALINK",15,0)
 ;--->                     WVMCNT = TOTAL NEW MAMS PROCEDURES ADDED.
"RTN","WVRALINK",16,0)
 ;--->                     THESE IF CALLED FROM ^WVEXPTRA ROUTINE.
"RTN","WVRALINK",17,0)
 ;
"RTN","WVRALINK",18,0)
 ;---> GENERATED VARIBLES:
"RTN","WVRALINK",19,0)
 ;---> WVPROC = IEN OF RADIOLOGY PROCEDURE (FILE #71), THEN IT
"RTN","WVRALINK",20,0)
 ;--->          GETS CHANGED TO WOMEN'S HEALTH PROCEDURE TYPE
"RTN","WVRALINK",21,0)
 ;--->                                   (FILE #790.2).
"RTN","WVRALINK",22,0)
 ;---> WVLOC  = WARD/CLINIC/LOCATION (FILE #44).
"RTN","WVRALINK",23,0)
 ;---> WVDATE = DATE OF THE PROCEDURE.
"RTN","WVRALINK",24,0)
 ;---> WVPROV = ORDERING PROVIDER.
"RTN","WVRALINK",25,0)
 ;---> WVMOD  = LEFT OR RIGHT, IF IT'S A UNILATERAL MAMMOGRAM.
"RTN","WVRALINK",26,0)
 ;---> WVDX   = RADIOLOGY DIAGNOSTIC CODE.
"RTN","WVRALINK",27,0)
 ;---> WVBWDX = WOMEN'S HEALTH RESULT/DIAGNOSIS.
"RTN","WVRALINK",28,0)
 ;
"RTN","WVRALINK",29,0)
CREATE(DFN,DATE,CASE) ;
"RTN","WVRALINK",30,0)
 Q:'+$$VERSION^XPDUTL("WV")
"RTN","WVRALINK",31,0)
 Q:($G(DFN)']"")!($G(DATE)']"")!($G(CASE)']"")
"RTN","WVRALINK",32,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WVRALINK",33,0)
 S ZTRTN="CREATEQ^WVRALINK",ZTDESC="WV CREATE MAMMOGRAM ENTRY"
"RTN","WVRALINK",34,0)
 S ZTSAVE("DFN")="",ZTSAVE("DATE")="",ZTSAVE("CASE")=""
"RTN","WVRALINK",35,0)
 S ZTIO="",ZTDTH=$H
"RTN","WVRALINK",36,0)
 D ^%ZTLOAD
"RTN","WVRALINK",37,0)
 Q
"RTN","WVRALINK",38,0)
CREATEH(DFN,DATE,CASE,STATUS) ; Entry from ^WVEXPTRA which looks for exams
"RTN","WVRALINK",39,0)
 ; created before the WH package was installed.
"RTN","WVRALINK",40,0)
 Q:($G(DFN)']"")!($G(DATE)']"")!($G(CASE)']"")!($G(STATUS)']"")
"RTN","WVRALINK",41,0)
 ; 
"RTN","WVRALINK",42,0)
CREATEQ ; Queue data entry creation. Called from CREATE above
"RTN","WVRALINK",43,0)
 N WVPROC,WVLOC,WVDATE,WVPROV,WVMOD,WVDX,WVBWDX,WVLEFT,WVRIGHT
"RTN","WVRALINK",44,0)
 N WVCASE,WVCPT,WVERR,WVCREDIT ;,WVEXAM0
"RTN","WVRALINK",45,0)
 ;---> QUIT IF RADIOLOGY DATA IS NOT DEFINED OR ="".
"RTN","WVRALINK",46,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVRALINK",47,0)
 Q:'$D(^RADPT(DFN,"DT",DATE,"P",CASE,0))
"RTN","WVRALINK",48,0)
 ;
"RTN","WVRALINK",49,0)
 ;---> QUIT IF THIS PROCEDURE DOES NOT HAVE A MAM CPT CODE.
"RTN","WVRALINK",50,0)
 ;---> QUIT IF THIS PROCEDURE DOES NOT HAVE AN ULTRASOUND CPT CODE.
"RTN","WVRALINK",51,0)
 ;---> WVEXAM0=ZERO NODE OF RADIOLOGY EXAM.
"RTN","WVRALINK",52,0)
 S WVEXAM0=^RADPT(DFN,"DT",DATE,"P",CASE,0)
"RTN","WVRALINK",53,0)
 S WVCPT=$P(^RAMIS(71,$P(WVEXAM0,U,2),0),U,9) Q:WVCPT=""
"RTN","WVRALINK",54,0)
 S WVPROC=$O(^WV(790.2,"AC",WVCPT,0)) ;cpt code x-ref to get 790.2 ien
"RTN","WVRALINK",55,0)
 Q:'WVPROC  ;cpt code is not tracked in 790.2
"RTN","WVRALINK",56,0)
 Q:$P($G(^WV(790.2,+WVPROC,0)),U,5)'="R"  ;cpt is not rad/nm procedure
"RTN","WVRALINK",57,0)
 Q:$P($G(^DPT(DFN,0)),U,2)'="F"  ;not female
"RTN","WVRALINK",58,0)
 ;
"RTN","WVRALINK",59,0)
 ;---> QUIT IF NO WOMEN'S HEALTH SITE PARAMETER FILE ON THIS MACHINE.
"RTN","WVRALINK",60,0)
 ;     OR NO DEFAULT CASE MANAGER
"RTN","WVRALINK",61,0)
 Q:'$D(^WV(790.02,DUZ(2)))
"RTN","WVRALINK",62,0)
 Q:'$P($G(^WV(790.02,+$G(DUZ(2)),0)),U,2)
"RTN","WVRALINK",63,0)
 ;
"RTN","WVRALINK",64,0)
 ;---> IF NOT CALLED FROM ^WVEXPTRA (i.e., STATUS is undefined) CHECK
"RTN","WVRALINK",65,0)
 ;---> SITE PARAMETER AND QUIT IF "IMPORT MAMMOGRAMS FROM RADIOLOGY"
"RTN","WVRALINK",66,0)
 ;---> IS NOT SET TO "YES". CHECK VETERAN STATUS AND ELIGIBILITY CODE.
"RTN","WVRALINK",67,0)
 N Y S Y=^WV(790.02,DUZ(2),0)
"RTN","WVRALINK",68,0)
 I '$D(STATUS) Q:'$P(Y,U,10)
"RTN","WVRALINK",69,0)
 I '$D(STATUS) Q:'$$VNVEC^WVRALIN1()  ;vet/non-vet/eligibility code check
"RTN","WVRALINK",70,0)
 ;
"RTN","WVRALINK",71,0)
 ;---> SET WVZSTAT =THE STATUS (OPEN OR CLOSED) IN WOMEN'S HEALTH.
"RTN","WVRALINK",72,0)
 ;---> THAT MAMMOGRAMS SHOULD RECEIVE WHEN COPIED OVER FROM RADIOLOGY.
"RTN","WVRALINK",73,0)
 S WVZSTAT=$P(Y,U,23) S:WVZSTAT="" WVZSTAT="o"
"RTN","WVRALINK",74,0)
 I $G(STATUS)]"" S WVZSTAT=$G(STATUS) ;status selected in ^WVEXPTRA
"RTN","WVRALINK",75,0)
 ;
"RTN","WVRALINK",76,0)
 D COPY(WVEXAM0)
"RTN","WVRALINK",77,0)
 ;
"RTN","WVRALINK",78,0)
EXIT ;EP
"RTN","WVRALINK",79,0)
 K I,N,X
"RTN","WVRALINK",80,0)
 Q
"RTN","WVRALINK",81,0)
 ;
"RTN","WVRALINK",82,0)
COPY(Y) ;EP
"RTN","WVRALINK",83,0)
 ;---> COPY MAM PROCEDURE DATA FROM RADIOLOGY TO WOMEN'S HEALTH.
"RTN","WVRALINK",84,0)
 ;---> VARIABLE DFN=PATIENT
"RTN","WVRALINK",85,0)
 ;---> LOCATION=DUZ(2)
"RTN","WVRALINK",86,0)
 ;---> WARD/CLINIC/LOCATION
"RTN","WVRALINK",87,0)
 N X
"RTN","WVRALINK",88,0)
 S WVLOC=$P(Y,U,8)
"RTN","WVRALINK",89,0)
 ;
"RTN","WVRALINK",90,0)
 ;---> WVDATE=DATE OF THE PROCEDURE.
"RTN","WVRALINK",91,0)
 S WVDATE=$P($P(^RADPT(DFN,"DT",DATE,0),U),".")
"RTN","WVRALINK",92,0)
 ;
"RTN","WVRALINK",93,0)
 ;---> RECONSTRUCT THE FULL CASE# FOR THIS RAD PROCEDURE.
"RTN","WVRALINK",94,0)
 ;---> THIS IS USED AS A LINK (XREF) BETWEEN THE RADIOLOGY PROCEDURE
"RTN","WVRALINK",95,0)
 ;---> AND THE WOMEN'S HEALTH PROCEDURE.
"RTN","WVRALINK",96,0)
 S WVCASE=$E(WVDATE,4,7)_$E(WVDATE,2,3)_"-"_$P(Y,U)
"RTN","WVRALINK",97,0)
 ;---> CHECK TO BE SURE THE CASE# XREF IS REALLY DOWN THERE.
"RTN","WVRALINK",98,0)
 S:'$D(^RADPT("ADC",WVCASE,DFN,DATE,CASE)) WVCASE="UNKNOWN"
"RTN","WVRALINK",99,0)
 ;
"RTN","WVRALINK",100,0)
 ;---> QUIT IF THIS PROCEDURE HAS ALREADY BEEN SENT TO WOMEN'S HEALTH.
"RTN","WVRALINK",101,0)
 Q:$D(^WV(790.1,"E",WVCASE))
"RTN","WVRALINK",102,0)
 ;
"RTN","WVRALINK",103,0)
 ;---> REQUESTING PROVIDER/ORDERING PROVIDER
"RTN","WVRALINK",104,0)
 S WVPROV=$P(Y,U,14)
"RTN","WVRALINK",105,0)
 ;
"RTN","WVRALINK",106,0)
 ;---> IF UNILATERAL, ATTEMPT TO PICK UP LEFT OR RIGHT MODIFIER.
"RTN","WVRALINK",107,0)
 I WVPROC=26 D
"RTN","WVRALINK",108,0)
 .I $D(^RADPT(DFN,"DT",DATE,"P",CASE,"M",0)) D
"RTN","WVRALINK",109,0)
 ..N N S N=0
"RTN","WVRALINK",110,0)
 ..F  S N=$O(^RADPT(DFN,"DT",DATE,"P",CASE,"M",N)) Q:'N  D
"RTN","WVRALINK",111,0)
 ...S WVMOD=$P(^RADPT(DFN,"DT",DATE,"P",CASE,"M",N,0),U)
"RTN","WVRALINK",112,0)
 ...S WVMOD=$P(^RAMIS(71.2,WVMOD,0),U)
"RTN","WVRALINK",113,0)
 ...I "LEFTleft"[WVMOD S WVLEFT=1
"RTN","WVRALINK",114,0)
 ...I "RIGHTright"[WVMOD S WVRIGHT=1
"RTN","WVRALINK",115,0)
 ..Q:$D(WVLEFT)&($D(WVRIGHT))
"RTN","WVRALINK",116,0)
 ..I $D(WVLEFT) S WVMOD="l" Q
"RTN","WVRALINK",117,0)
 ..I $D(WVRIGHT) S WVMOD="r" Q
"RTN","WVRALINK",118,0)
 ;
"RTN","WVRALINK",119,0)
 ;---> IF THERE'S A DIAGNOSTIC CODE, ATTEMPT TO PICK UP DIAGNOSIS.
"RTN","WVRALINK",120,0)
 ;---> USE "WV DIAGNOSTIC CODE TRANSLATION" FILE #790.32.
"RTN","WVRALINK",121,0)
 S WVDX=$P(Y,U,13)
"RTN","WVRALINK",122,0)
 I +WVDX I $D(^WV(790.32,"C",WVDX)) S WVBWDX=$O(^WV(790.32,"C",WVDX,0))
"RTN","WVRALINK",123,0)
 ;
"RTN","WVRALINK",124,0)
 ;---> GET CREDIT METHOD.
"RTN","WVRALINK",125,0)
 S WVCREDIT=$P(Y,U,26)
"RTN","WVRALINK",126,0)
 ;
"RTN","WVRALINK",127,0)
PATIENT ;---> IF PATIENT ISN'T IN WOMEN'S HEALTH DATABASE, ADD HER.
"RTN","WVRALINK",128,0)
 S WVERR=1
"RTN","WVRALINK",129,0)
 I '$D(^WV(790,DFN,0)) D
"RTN","WVRALINK",130,0)
 .D AUTOADD^WVPATE(DFN,DUZ(2),.WVERR)
"RTN","WVRALINK",131,0)
 .I $D(WVNEWP) S:WVERR WVNEWP=WVNEWP+1
"RTN","WVRALINK",132,0)
 Q:WVERR<0
"RTN","WVRALINK",133,0)
 D FIND^WVRALIN1 ;check for 'unlinked' entry in File 790.1
"RTN","WVRALINK",134,0)
 Q:$D(^WV(790.1,"E",WVCASE))  ;quit if link was made in WVRALIN1
"RTN","WVRALINK",135,0)
PROC ;---> CREATE MAMMOGRAM PROCEDURE IN WV PROCEDURE FILE #790.1.
"RTN","WVRALINK",136,0)
 S WVDR=".02////"_DFN_";.04////"_WVPROC
"RTN","WVRALINK",137,0)
 S WVDR=WVDR_";.05////"_$G(WVBWDX)_";.07////"_WVPROV
"RTN","WVRALINK",138,0)
 S WVDR=WVDR_";.09////"_$G(WVMOD)_";.1////"_DUZ(2)_";.11////"_WVLOC
"RTN","WVRALINK",139,0)
 S WVDR=WVDR_";.12////"_WVDATE_";.14////"_WVZSTAT_";.15////"_WVCASE
"RTN","WVRALINK",140,0)
 S WVDR=WVDR_";.18////.5;.19////"_DT_";.34////"_$G(DUZ(2))_";.35////"_WVCREDIT
"RTN","WVRALINK",141,0)
 ;
"RTN","WVRALINK",142,0)
 D NEW2^WVPROC(DFN,WVPROC,WVDATE,WVDR,"","",.WVERR)
"RTN","WVRALINK",143,0)
 I $D(WVMCNT) S:WVERR>-1 WVMCNT=WVMCNT+1
"RTN","WVRALINK",144,0)
 Q:WVERR<0  ;procedure not added
"RTN","WVRALINK",145,0)
 Q:$D(WVMCNT)  ;mass import of Rad/NM exams
"RTN","WVRALINK",146,0)
 ;Q:$P($G(^WV(790.02,+DUZ(2),0)),U,23)="c"  ;Status=closed
"RTN","WVRALINK",147,0)
 D MAIL^WVRADWP(DFN,+Y,WVPROC,WVPROV) ;iens for patient, accession, procedure, provider/requestor
"RTN","WVRALINK",148,0)
 Q
"RTN","WVRALINK",149,0)
 ;
"RTN","WVRALINK",150,0)
 ;
"RTN","WVRALINK",151,0)
DELETE(DFN,DATE,CASE) ;EP
"RTN","WVRALINK",152,0)
 ;---> MODIFY WOMEN'S HEALTH PROCEDURE TO REFLECT CHANGE.
"RTN","WVRALINK",153,0)
 ;---> CALLED FROM RARTE1 (DELETE A REPORT AND UNVERIFY A REPORT).
"RTN","WVRALINK",154,0)
 ;
"RTN","WVRALINK",155,0)
 Q:'+$$VERSION^XPDUTL("WV")
"RTN","WVRALINK",156,0)
 Q:'$D(DFN)!('$D(DATE))!('$D(CASE))
"RTN","WVRALINK",157,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WVRALINK",158,0)
 S ZTRTN="DELETEQ^WVRALINK",ZTDESC="WV MAMMOGRAM RPT CHANGE"
"RTN","WVRALINK",159,0)
 S ZTSAVE("DFN")="",ZTSAVE("DATE")="",ZTSAVE("CASE")=""
"RTN","WVRALINK",160,0)
 S ZTIO="",ZTDTH=$H
"RTN","WVRALINK",161,0)
 D ^%ZTLOAD
"RTN","WVRALINK",162,0)
 Q
"RTN","WVRALINK",163,0)
DELETEQ ; Modify WV entry when mammogram report is unverified or deleted
"RTN","WVRALINK",164,0)
 Q:'$D(^RADPT(DFN,"DT",DATE,"P",CASE,0))
"RTN","WVRALINK",165,0)
 N WVIEN,WVDATE,WVCASE,WVCMGR,WVLOOP,WVMSG,WVPROV
"RTN","WVRALINK",166,0)
 N XMDUZ,XMSUB,XMTEXT,XMY ;send mail message to case manager
"RTN","WVRALINK",167,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVRALINK",168,0)
 ;
"RTN","WVRALINK",169,0)
 ;---> WVDATE=DATE OF PROCEDURE.
"RTN","WVRALINK",170,0)
 S WVDATE=$P($P(^RADPT(DFN,"DT",DATE,0),U),".")
"RTN","WVRALINK",171,0)
 S WVCASE=$P(^RADPT(DFN,"DT",DATE,"P",CASE,0),U)
"RTN","WVRALINK",172,0)
 ;
"RTN","WVRALINK",173,0)
 ;---> WVCASE=RECONSTRUCTED CASE# OF PROCEDURE.
"RTN","WVRALINK",174,0)
 S WVCASE=$E(WVDATE,4,7)_$E(WVDATE,2,3)_"-"_WVCASE
"RTN","WVRALINK",175,0)
 ;---> QUIT IF NO CASE# XREF IN WOMEN'S HEALTH PROCEDURE FILE.
"RTN","WVRALINK",176,0)
 Q:'$D(^WV(790.1,"E",WVCASE))
"RTN","WVRALINK",177,0)
 ;
"RTN","WVRALINK",178,0)
 S WVIEN=$O(^WV(790.1,"E",WVCASE,0))
"RTN","WVRALINK",179,0)
 Q:'$D(^WV(790.1,WVIEN,0))
"RTN","WVRALINK",180,0)
 D RADMOD^WVPROC(WVIEN) ;update wh status to "open"
"RTN","WVRALINK",181,0)
 S WVPROV=+$$GET1^DIQ(790.1,WVIEN,.07,"I") ;get provider/requestor
"RTN","WVRALINK",182,0)
 S WVCMGR=+$$GET1^DIQ(790,DFN,.1,"I") ;get case manager
"RTN","WVRALINK",183,0)
 S:WVCMGR XMY(WVCMGR)=""
"RTN","WVRALINK",184,0)
 ; if no case manager, then get default case manager(s)
"RTN","WVRALINK",185,0)
 I 'WVCMGR S WVLOOP=0 F  S WVLOOP=$O(^WV(790.02,WVLOOP)) Q:'WVLOOP  D
"RTN","WVRALINK",186,0)
 .S WVCMGR=$$GET1^DIQ(790.02,WVLOOP,.02,"I")
"RTN","WVRALINK",187,0)
 .S:WVCMGR XMY(WVCMGR)=""
"RTN","WVRALINK",188,0)
 .Q
"RTN","WVRALINK",189,0)
 Q:$O(XMY(0))'>0  ;no case manager(s)
"RTN","WVRALINK",190,0)
 S:WVPROV XMY(WVPROV)=""
"RTN","WVRALINK",191,0)
 S XMDUZ=.5 ;message sender
"RTN","WVRALINK",192,0)
 S XMSUB="RAD/NM Rpt for WH patient is UNVERIFIED/DELETED"
"RTN","WVRALINK",193,0)
 S WVMSG(1)="        Patient: "_$P($G(^DPT(DFN,0)),U,1)_" (SSN: "_$$SSN^WVUTL1(DFN)_")"
"RTN","WVRALINK",194,0)
 S WVMSG(2)=" WH Accession #: "_$P($G(^WV(790.1,+WVIEN,0)),U,1)
"RTN","WVRALINK",195,0)
 S WVMSG(3)="  RAD/NM Case #: "_WVCASE
"RTN","WVRALINK",196,0)
 S WVMSG(4)=" "
"RTN","WVRALINK",197,0)
 S WVMSG(5)="NOTE: THIS PROCEDURE HAS BEEN ALTERED IN RADIOLOGY/NM."
"RTN","WVRALINK",198,0)
 S WVMSG(6)="Follow-up is required in the WOMEN'S HEALTH package!"
"RTN","WVRALINK",199,0)
 S XMTEXT="WVMSG("
"RTN","WVRALINK",200,0)
 D ^XMD
"RTN","WVRALINK",201,0)
 Q
"RTN","WVUTL7")
0^9^B42206404
"RTN","WVUTL7",1,0)
WVUTL7 ;HCIOFO/FT,JR-UTIL: HEADERS & TRAILERS; ;4/10/00  11:34
"RTN","WVUTL7",2,0)
 ;;1.0;WOMEN'S HEALTH;**5,7,10**;Sep 30, 1998
"RTN","WVUTL7",3,0)
 ;;  Original routine created by IHS/ANMC/MWR
"RTN","WVUTL7",4,0)
 ;;* MICHAEL REMILLARD, DDS * ALASKA NATIVE MEDICAL CENTER *
"RTN","WVUTL7",5,0)
 ;;  UTILITY: HEADERS AND TRAILERS.
"RTN","WVUTL7",6,0)
 ;
"RTN","WVUTL7",7,0)
S(S) ;EP
"RTN","WVUTL7",8,0)
 ;---> RETURN A VALUE OF SPACES EQUAL IN LENGTH TO THE NUMBER S.
"RTN","WVUTL7",9,0)
 N I,SP S SP=$$REPEAT^XLFSTR(" ",80)
"RTN","WVUTL7",10,0)
 Q $E(SP,1,$G(S))
"RTN","WVUTL7",11,0)
 ;
"RTN","WVUTL7",12,0)
TOPHEAD ;EP
"RTN","WVUTL7",13,0)
 ;---> CODE TO SET VARIABLES FOR HEADER.
"RTN","WVUTL7",14,0)
 N X
"RTN","WVUTL7",15,0)
 D NOW^%DTC S WVNOW=$$SLDT1^WVUTL5(%)
"RTN","WVUTL7",16,0)
 S WVLINE=$$REPEAT^XLFSTR("-",80)
"RTN","WVUTL7",17,0)
 S WVPAGE=1
"RTN","WVUTL7",18,0)
 S WVCRT=$S($E(IOST)="C":1,1:0)
"RTN","WVUTL7",19,0)
 S WVCONFF="*********************** CONFIDENTIAL PATIENT INFORMATION "
"RTN","WVUTL7",20,0)
 S WVCONFF=WVCONFF_"***********************"
"RTN","WVUTL7",21,0)
 S WVTIMLN=$E(WVLINE,1,26)_" printed: "_WVNOW_" "_$E(WVLINE,1,27)
"RTN","WVUTL7",22,0)
 Q
"RTN","WVUTL7",23,0)
 ;
"RTN","WVUTL7",24,0)
TOPHEAD1 ;EP
"RTN","WVUTL7",25,0)
 ;---> CODE TO SET VARIABLES FOR HEADER.
"RTN","WVUTL7",26,0)
 N X
"RTN","WVUTL7",27,0)
 D NOW^%DTC S WVNOW=$$SLDT1^WVUTL5(%)
"RTN","WVUTL7",28,0)
 S WVLINE=$$REPEAT^XLFSTR("-",80)
"RTN","WVUTL7",29,0)
 S WVPAGE=$G(WVPAGE)+1
"RTN","WVUTL7",30,0)
 S WVCRT=$S($E(IOST)="C":1,1:0)
"RTN","WVUTL7",31,0)
 S WVCONFF="*********************** CONFIDENTIAL PATIENT INFORMATION "
"RTN","WVUTL7",32,0)
 S WVCONFF=WVCONFF_"***********************"
"RTN","WVUTL7",33,0)
 S WVTIMLN=$E(WVLINE,1,26)_" printed: "_WVNOW_" "_$E(WVLINE,1,27)
"RTN","WVUTL7",34,0)
 Q
"RTN","WVUTL7",35,0)
 ;
"RTN","WVUTL7",36,0)
HEADER1 ;EP
"RTN","WVUTL7",37,0)
 ;---> BROWSE/REPORT HEADER: MULTIPLE PATIENTS, MULTIPLE PROCEDURES.
"RTN","WVUTL7",38,0)
 ;---> REQUIRED VARIABLES: WVBEGDT,WVCRT,WVENDDT,WVPAGE,WVTITLE,DUZ(2)
"RTN","WVUTL7",39,0)
 ;---> OPTIONAL VARIABLE:  WVCONF (CONFIDENTIAL), WVSUBH (SUBHEADER).
"RTN","WVUTL7",40,0)
 N X
"RTN","WVUTL7",41,0)
 W:WVPAGE>1!WVCRT @IOF,!
"RTN","WVUTL7",42,0)
 W:$D(WVCONF) WVCONFF,! W:'WVCRT WVTIMLN,!
"RTN","WVUTL7",43,0)
 W !,WVTITLE W:'WVCRT ?70,"page: ",WVPAGE
"RTN","WVUTL7",44,0)
 W !!,$$RUNDT^WVUTL1A("C")
"RTN","WVUTL7",45,0)
 W !,"Case Mgr: " D
"RTN","WVUTL7",46,0)
 .I '$D(WVE) W "ALL" Q
"RTN","WVUTL7",47,0)
 .I WVE W "ALL" Q
"RTN","WVUTL7",48,0)
 .I '$D(WVCMGR) W "UNKNOWN" Q
"RTN","WVUTL7",49,0)
 .I WVCMGR="" W "UNKNOWN" Q
"RTN","WVUTL7",50,0)
 .N WVCMGRNM
"RTN","WVUTL7",51,0)
 .S WVCMGRNM=$$GET1^DIQ(200,WVCMGR,.01,"E")
"RTN","WVUTL7",52,0)
 .W $S(WVCMGRNM]"":WVCMGRNM,1:"UNKNOWN")
"RTN","WVUTL7",53,0)
 W ?56,"For period: ",$$TXDT^WVUTL5(WVBEGDT)
"RTN","WVUTL7",54,0)
 W !,"Facility: ",$$INSTTX^WVUTL6(DUZ(2))
"RTN","WVUTL7",55,0)
 W ?64,"To: ",$$TXDT^WVUTL5(WVENDDT)
"RTN","WVUTL7",56,0)
 W !,$$REPEAT^XLFSTR("=",80)
"RTN","WVUTL7",57,0)
 I $D(WVSUBH) D @WVSUBH
"RTN","WVUTL7",58,0)
 Q
"RTN","WVUTL7",59,0)
 ;
"RTN","WVUTL7",60,0)
HEADER2 ;EP
"RTN","WVUTL7",61,0)
 ;---> PATIENT REPORT HEADER: ONE PATIENT, MULTIPLE PROCEDURES.
"RTN","WVUTL7",62,0)
 ;---> REQUIRED VARIABLES: WVBEGDT,WVCRT,WVENDDT,WVPAGE,WVTITLE,DUZ(2)
"RTN","WVUTL7",63,0)
 ;---> OPTIONAL VARIABLE:  WVCONF (CONFIDENTIAL), WVSUBH (SUBHEADER).
"RTN","WVUTL7",64,0)
 N X
"RTN","WVUTL7",65,0)
 D FAC^WVUTL1A
"RTN","WVUTL7",66,0)
 W:WVPAGE>1!WVCRT @IOF,!
"RTN","WVUTL7",67,0)
 W:$D(WVCONF) WVCONFF,! W:'WVCRT WVTIMLN,!
"RTN","WVUTL7",68,0)
 W !,WVTITLE W:'WVCRT ?70,"page: ",WVPAGE
"RTN","WVUTL7",69,0)
 W !!,$$RUNDT^WVUTL1A("C")
"RTN","WVUTL7",70,0)
 W !,"Patient Name: ",WVNAMAGE,?52,$$PNLAB^WVUTL5(),WVCHRT
"RTN","WVUTL7",71,0)
 W !,"Case Manager: ",WVCMGR
"RTN","WVUTL7",72,0)
 W ?50,"Facility: ",$E($$INSTTX^WVUTL6(DUZ(2)),1,19)
"RTN","WVUTL7",73,0)
 W !,"Cx Tx Need  : ",WVCNEED
"RTN","WVUTL7",74,0)
 W ?47,"Cx Facility: ",$G(WVJCFAC)
"RTN","WVUTL7",75,0)
 W !,"PAP Regimen : ",WVPAPRG,?47,"Pr Provider: ",$G(WVJPCP)
"RTN","WVUTL7",76,0)
 W !,"Br Tx Need  : ",WVBNEED
"RTN","WVUTL7",77,0)
 W ?47,"Br Facility: ",$G(WVJBFAC)
"RTN","WVUTL7",78,0)
 W !,"Hx of BR CA : ",$$GET1^DIQ(790,WVDFN,.23,"E")
"RTN","WVUTL7",79,0)
 W ?45,"Sexual Trauma: ",$$MST^WVUTL1A(WVDFN)
"RTN","WVUTL7",80,0)
 W !,"Elig Code   : ",$P($$ELIG^WVUTL9(WVDFN),U,2)
"RTN","WVUTL7",81,0)
 W ?51,"Veteran: ",$$VET^WVUTL1A(WVDFN)
"RTN","WVUTL7",82,0)
 W !,$$REPEAT^XLFSTR("=",49)
"RTN","WVUTL7",83,0)
 W $S(WVEDC]"":WVEDC_"======",1:"===============================")
"RTN","WVUTL7",84,0)
 I $D(WVSUBH) D @WVSUBH
"RTN","WVUTL7",85,0)
 Q
"RTN","WVUTL7",86,0)
 ;
"RTN","WVUTL7",87,0)
HEADER3 ;EP
"RTN","WVUTL7",88,0)
 ;---> LAB LOG REPORT HEADER: MULTIPLE PATIENTS, MULTIPLE PROCEDURES.
"RTN","WVUTL7",89,0)
 ;---> REQUIRED VARIABLES: WVBEGDT,WVCRT,WVENDDT,WVPAGE,WVTITLE,DUZ(2)
"RTN","WVUTL7",90,0)
 ;---> OPTIONAL VARIABLE:  WVCONF (CONFIDENTIAL), WVSUBH (SUBHEADER).
"RTN","WVUTL7",91,0)
 N X
"RTN","WVUTL7",92,0)
 W:WVPAGE>1!WVCRT @IOF,!
"RTN","WVUTL7",93,0)
 W:$D(WVCONF) WVCONFF,! W:'WVCRT WVTIMLN,!
"RTN","WVUTL7",94,0)
 W !,WVTITLE W:'WVCRT ?70,"page: ",WVPAGE
"RTN","WVUTL7",95,0)
 W !!,$$RUNDT^WVUTL1A("C")
"RTN","WVUTL7",96,0)
 W !,"Facility: ",$$INSTTX^WVUTL6($S($G(WVFAC):WVFAC,1:DUZ(2)))
"RTN","WVUTL7",97,0)
 W ?53,"From: ",$$SLDT2^WVUTL5(WVBEGDT)
"RTN","WVUTL7",98,0)
 W " to ",$$SLDT2^WVUTL5(WVENDDT)
"RTN","WVUTL7",99,0)
 W !,$$REPEAT^XLFSTR("=",80)
"RTN","WVUTL7",100,0)
 I $D(WVSUBH) D @WVSUBH
"RTN","WVUTL7",101,0)
 Q
"RTN","WVUTL7",102,0)
 ;
"RTN","WVUTL7",103,0)
HEADER4 ;EP
"RTN","WVUTL7",104,0)
 ;---> PATIENT REPORT HEADER: ONE PATIENT, ONE PROCEDURE.
"RTN","WVUTL7",105,0)
 ;---> REQUIRED VARIABLES: WVBEGDT,WVCRT,WVENDDT,WVPAGE,WVTITLE1,DUZ(2)
"RTN","WVUTL7",106,0)
 ;---> OPTIONAL VARIABLE:  WVCONF (CONFIDENTIAL), WVSUBH (SUBHEADER).
"RTN","WVUTL7",107,0)
 W:WVPAGE>1!WVCRT @IOF,!
"RTN","WVUTL7",108,0)
 W WVCONFF W:'WVCRT !,WVTIMLN
"RTN","WVUTL7",109,0)
 W !!,WVTITLE1,?70,"page: ",WVPAGE S WVPAGE=WVPAGE+1
"RTN","WVUTL7",110,0)
HEADER41 ;EP
"RTN","WVUTL7",111,0)
 ;---> CALLED BY WVPROC; BYPASSES FORMFEED, TITLE, ETC.
"RTN","WVUTL7",112,0)
 N WVDES
"RTN","WVUTL7",113,0)
 W !!,$$RUNDT^WVUTL1A("C")
"RTN","WVUTL7",114,0)
 W !,"Patient Name: ",WVNAMAGE,?53,$$PNLAB^WVUTL5(),WVCHRT
"RTN","WVUTL7",115,0)
 W !,"Case Manager: ",WVCMGR
"RTN","WVUTL7",116,0)
 W ?50,"Procedure: ",$E(WVPN,1,19)
"RTN","WVUTL7",117,0)
 W !,"PAP Regimen : ",WVPAPRG
"RTN","WVUTL7",118,0)
 W ?55,"Acc#: ",WVACCN
"RTN","WVUTL7",119,0)
 W !,"Cx Tx Need  : ",WVCNEED
"RTN","WVUTL7",120,0)
 W ?48,"Cx Facility: ",$$FACIL^WVUTL1A(WVDFN,"C")
"RTN","WVUTL7",121,0)
 W !,"Br Tx Need  : ",WVBNEED
"RTN","WVUTL7",122,0)
 W ?48,"Br Facility: ",$$FACIL^WVUTL1A(WVDFN,"B")
"RTN","WVUTL7",123,0)
 W !,"Elig Code   : ",$P($$ELIG^WVUTL9(WVDFN),U,2)
"RTN","WVUTL7",124,0)
 W ?52,"Veteran: ",$$VET^WVUTL1A(WVDFN)
"RTN","WVUTL7",125,0)
 W !,"Sexual Trauma: ",$$MST^WVUTL1A(WVDFN)
"RTN","WVUTL7",126,0)
 S WVDES=$$DES^WVUTL1(WVDFN)
"RTN","WVUTL7",127,0)
 W !,$S(WVDES="YES":"*DES DAUGHTER*",1:"--------------")
"RTN","WVUTL7",128,0)
 W $$REPEAT^XLFSTR("-",37)
"RTN","WVUTL7",129,0)
 W $S(WVEDC]"":WVEDC_"----",1:"-----------------------------")
"RTN","WVUTL7",130,0)
 Q
"RTN","WVUTL7",131,0)
 ;
"RTN","WVUTL7",132,0)
HEADER5 ;EP
"RTN","WVUTL7",133,0)
 ;---> DELINQUENT NEEDS REPORT HEADER: MULTIPLE PATIENTS
"RTN","WVUTL7",134,0)
 ;---> REQUIRED VARIABLES: WVBEGDT,WVCRT,WVENDDT,WVPAGE,WVTITLE,DUZ(2)
"RTN","WVUTL7",135,0)
 ;---> OPTIONAL VARIABLE:  WVCONF (CONFIDENTIAL), WVSUBH (SUBHEADER).
"RTN","WVUTL7",136,0)
 N X
"RTN","WVUTL7",137,0)
 W:WVPAGE>1!WVCRT @IOF,!
"RTN","WVUTL7",138,0)
 W:$D(WVCONF) WVCONFF,! W:'WVCRT WVTIMLN,!
"RTN","WVUTL7",139,0)
 W !,WVTITLE W:'WVCRT ?70,"page: ",WVPAGE
"RTN","WVUTL7",140,0)
 W !,"Case Mgr: " D
"RTN","WVUTL7",141,0)
 .I '$D(WVE) W "ALL" Q
"RTN","WVUTL7",142,0)
 .I WVE W "ALL" Q
"RTN","WVUTL7",143,0)
 .I $G(WVMGR)']"" W "UNKNOWN" Q
"RTN","WVUTL7",144,0)
 .N WVCMGRNM
"RTN","WVUTL7",145,0)
 .S WVCMGRNM=$$GET1^DIQ(200,WVMGR,.01,"E")
"RTN","WVUTL7",146,0)
 .W $S(WVCMGRNM]"":WVCMGRNM,1:"UNKNOWN")
"RTN","WVUTL7",147,0)
 S Y=DT D DD^%DT W ?46,"Run Date: ",Y
"RTN","WVUTL7",148,0)
 W !,"Facility: ",$$INSTTX^WVUTL6(WVFAC)
"RTN","WVUTL7",149,0)
 W ?46,"Tx Needs Past Due as of ",$$SLDT2^WVUTL5(WVDDATE)
"RTN","WVUTL7",150,0)
 W !,$$REPEAT^XLFSTR("=",80)
"RTN","WVUTL7",151,0)
 I $D(WVSUBH) D @WVSUBH
"RTN","WVUTL7",152,0)
 Q
"RTN","WVUTL7",153,0)
 ;
"RTN","WVUTL7",154,0)
HEADER6 ;EP
"RTN","WVUTL7",155,0)
 ;---> PROGRAM SNAPSHOT HEADER: JUST TITLE AND FACILITY (NO PATIENTS)
"RTN","WVUTL7",156,0)
 ;---> REQUIRED VARIABLES: WVCRT,WVTITLE,DUZ(2)
"RTN","WVUTL7",157,0)
 N X
"RTN","WVUTL7",158,0)
 W:WVPAGE>1!WVCRT @IOF,!
"RTN","WVUTL7",159,0)
 W:'WVCRT !,WVTIMLN,!
"RTN","WVUTL7",160,0)
 W !,WVTITLE W:'WVCRT ?70,"page: ",WVPAGE
"RTN","WVUTL7",161,0)
 W !?3,$$RUNDT^WVUTL1A(DT) I $D(WVJTOY) W ?60,"(",WVJTOY,")"
"RTN","WVUTL7",162,0)
 W !,"   Note: This report includes all divisions"
"RTN","WVUTL7",163,0)
 W " using this database."
"RTN","WVUTL7",164,0)
 W !,$$REPEAT^XLFSTR("=",80)
"RTN","WVUTL7",165,0)
 I $D(WVSUBH) D @WVSUBH
"RTN","WVUTL7",166,0)
 Q
"RTN","WVUTL7",167,0)
 ;
"RTN","WVUTL7",168,0)
HEADER7 ;EP
"RTN","WVUTL7",169,0)
 ;---> AUTOLOAD OF PATIENTS HEADER
"RTN","WVUTL7",170,0)
 ;---> REQUIRED VARIABLES: WVCRT,WVTITLE,DUZ(2)
"RTN","WVUTL7",171,0)
 N X
"RTN","WVUTL7",172,0)
 W:WVPAGE>1!WVCRT @IOF,!
"RTN","WVUTL7",173,0)
 W:$D(WVCONF) WVCONFF,! W:'WVCRT WVTIMLN,!
"RTN","WVUTL7",174,0)
 W !,WVTITLE W:'WVCRT ?70,"page: ",WVPAGE S WVPAGE=WVPAGE+1
"RTN","WVUTL7",175,0)
 W !!,$$RUNDT^WVUTL1A()
"RTN","WVUTL7",176,0)
 W ?45,"Date Range: "_$$FMTE^XLFDT($G(WVJSDT),"2D")_"-"_$$FMTE^XLFDT($P($G(WVJEDT),".",1),"2D")
"RTN","WVUTL7",177,0)
 W !,"Facility: ",$$INSTTX^WVUTL6(DUZ(2))
"RTN","WVUTL7",178,0)
 W ?45,"Cutoff Age: ",WVAGE
"RTN","WVUTL7",179,0)
 W !,$$REPEAT^XLFSTR("=",80)
"RTN","WVUTL7",180,0)
 W !,?3,"NAME",?30,$$PNLB^WVUTL5(),?45,"DOB",?60,"STATUS"
"RTN","WVUTL7",181,0)
 W !,WVLINE
"RTN","WVUTL7",182,0)
 Q
"RTN","WVUTL7",183,0)
 ;
"RTN","WVUTL7",184,0)
HEADER8 ;EP
"RTN","WVUTL7",185,0)
 ;---> SCREENING RATES REPORT HEADER: (NO PATIENTS)
"RTN","WVUTL7",186,0)
 ;---> REQUIRED VARIABLES: WVCRT,WVTITLE,DUZ(2)
"RTN","WVUTL7",187,0)
 N X
"RTN","WVUTL7",188,0)
 W:WVPAGE>1!WVCRT @IOF,!
"RTN","WVUTL7",189,0)
 W:'WVCRT !,WVTIMLN,!
"RTN","WVUTL7",190,0)
 W !,WVTITLE W:'WVCRT ?70,"page: ",WVPAGE
"RTN","WVUTL7",191,0)
 W !!?4,"For Age Range: ",$S(WVAGRG=1:"ALL",1:WVAGRG)
"RTN","WVUTL7",192,0)
 W ?56,"For period: ",$$SLDT2^WVUTL5(WVBEGDT)
"RTN","WVUTL7",193,0)
 S Y=DT D DD^%DT W !?4,"Run Date: ",Y
"RTN","WVUTL7",194,0)
 W ?64,"To: ",$$SLDT2^WVUTL5(WVENDDT)
"RTN","WVUTL7",195,0)
 W !,$$REPEAT^XLFSTR("=",80)
"RTN","WVUTL7",196,0)
 W !?4,"(Note: This report includes all divisions using this database.)"
"RTN","WVUTL7",197,0)
 W !?11,"Number of Active Patients: "_$G(WVTOT),!
"RTN","WVUTL7",198,0)
 Q
"RTN","WVUTL7",199,0)
 ;
"RTN","WVUTL7",200,0)
ENDREP(X) ;EP
"RTN","WVUTL7",201,0)
 ;---> END A REPORT, DO FORMFEED OR "Press <Return>" IF NECESSARY.
"RTN","WVUTL7",202,0)
 ;---> REQUIRED VARIABLES: WVCRT=1 IF OUTPUT TO SCREEN
"RTN","WVUTL7",203,0)
 ;--->                     WVPOP=1 IF ESCAPING
"RTN","WVUTL7",204,0)
 ;---> OPTIONAL VARIABLE:  X=1 IF "End of Report" SHOULD NOT DISPLAY.
"RTN","WVUTL7",205,0)
 ;
"RTN","WVUTL7",206,0)
 S WVTITLE="-----  End of Report  -----"
"RTN","WVUTL7",207,0)
 I '$G(X)&('WVPOP) D CENTERT^WVUTL5(.WVTITLE) W !,WVTITLE
"RTN","WVUTL7",208,0)
 I WVCRT&('$D(IO("S")))&('WVPOP) D DIRZ^WVUTL3 W @IOF,!
"RTN","WVUTL7",209,0)
 D ^%ZISC
"RTN","WVUTL7",210,0)
 Q
"RTN","WVUTL9")
0^4^B21170963
"RTN","WVUTL9",1,0)
WVUTL9 ;HCIOFO/FT-Women's Health Utility Routine; ;2/24/00  12:42
"RTN","WVUTL9",2,0)
 ;;1.0;WOMEN'S HEALTH;**3,7,9,10**;Sep 30, 1998
"RTN","WVUTL9",3,0)
 ;
"RTN","WVUTL9",4,0)
DCM(SITE) ; Default case manager check
"RTN","WVUTL9",5,0)
 ; If there is a default case manager return 1 else 0.
"RTN","WVUTL9",6,0)
 I 'SITE Q 0
"RTN","WVUTL9",7,0)
 I $P($G(^WV(790.02,SITE,0)),U,2) Q 1
"RTN","WVUTL9",8,0)
 Q 0
"RTN","WVUTL9",9,0)
 ;
"RTN","WVUTL9",10,0)
NODCM ; No Default Case Manager message
"RTN","WVUTL9",11,0)
 W !,"Sorry, but a DEFAULT CASE MANAGER must be assigned for your facility"
"RTN","WVUTL9",12,0)
 W !,"before a patient can be entered into the Women's Health database.",!
"RTN","WVUTL9",13,0)
 W !,"Please use the EDIT SITE PARAMETERS option on the FILE MAINTENANCE"
"RTN","WVUTL9",14,0)
 W !,"menu to designate a DEFAULT CASE MANAGER.",!
"RTN","WVUTL9",15,0)
 D DIRZ^WVUTL3
"RTN","WVUTL9",16,0)
 Q
"RTN","WVUTL9",17,0)
 ;
"RTN","WVUTL9",18,0)
AGE(DFN) ;EP
"RTN","WVUTL9",19,0)
 ;---> YIELD PATIENT'S AGE IN YEARS.
"RTN","WVUTL9",20,0)
 ;---> REQUIRED VARIABLE: DFN=IEN PATIENT FILE
"RTN","WVUTL9",21,0)
 ; Different from AGE^WVUTL1. This EP returns age at date of death.
"RTN","WVUTL9",22,0)
 N X,X1,X2
"RTN","WVUTL9",23,0)
 Q:'$G(DFN) "NO PATIENT"
"RTN","WVUTL9",24,0)
 S X2=$$DOB^WVUTL1(DFN)
"RTN","WVUTL9",25,0)
 Q:'+X2 "UNKNOWN"
"RTN","WVUTL9",26,0)
 S X1=DT
"RTN","WVUTL9",27,0)
 I $$DECEASED^WVUTL1(DFN) S X1=+^DPT(DFN,.35)
"RTN","WVUTL9",28,0)
 D ^%DTC
"RTN","WVUTL9",29,0)
 Q $P(X/365.25,".")_"y/o"
"RTN","WVUTL9",30,0)
 ;
"RTN","WVUTL9",31,0)
GAPPT(DFN) ; Get future appointments from SDA^VADPT
"RTN","WVUTL9",32,0)
 ; Returns ^UTILITY("VASD",$J,#,"I") <-internal values
"RTN","WVUTL9",33,0)
 ;         ^UTILITY("VASD",$J,#,"E") <-external vlaues
"RTN","WVUTL9",34,0)
 ; piece 1: appointment date/time
"RTN","WVUTL9",35,0)
 ;       2: clinic
"RTN","WVUTL9",36,0)
 ;       3: status
"RTN","WVUTL9",37,0)
 ;       4: type
"RTN","WVUTL9",38,0)
 Q:'$G(DFN)
"RTN","WVUTL9",39,0)
 N VASD,VAERR
"RTN","WVUTL9",40,0)
 S VASD("F")=$$NOW^XLFDT,VASD("W")=1 ;get active/kept appts 
"RTN","WVUTL9",41,0)
 D SDA^VADPT
"RTN","WVUTL9",42,0)
 Q
"RTN","WVUTL9",43,0)
KAPPT(DFN) ; Kill APPOINTMENTS multiple
"RTN","WVUTL9",44,0)
 Q:'$G(DFN)
"RTN","WVUTL9",45,0)
 N DA,DIK
"RTN","WVUTL9",46,0)
 S DA=0,DA(1)=DFN
"RTN","WVUTL9",47,0)
 F  S DA=$O(^WV(790,DFN,2,DA)) Q:'DA  D
"RTN","WVUTL9",48,0)
 .S DIK="^WV(790,"_DFN_",2,"
"RTN","WVUTL9",49,0)
 .D ^DIK
"RTN","WVUTL9",50,0)
 .Q
"RTN","WVUTL9",51,0)
 Q
"RTN","WVUTL9",52,0)
SAPPT(DFN) ; Set APPOINTMENTS multiple
"RTN","WVUTL9",53,0)
 Q:'$G(DFN)
"RTN","WVUTL9",54,0)
 Q:'$D(^WV(790,DFN))
"RTN","WVUTL9",55,0)
 N DA,DIC,DLAYGO,LOOP,X
"RTN","WVUTL9",56,0)
 S LOOP=0,DIC="^WV(790,"_DFN_",2,",DIC(0)="L",DA(1)=DFN,DLAYGO=790
"RTN","WVUTL9",57,0)
 S DIC("P")=$P(^DD(790,2,0),U,2)
"RTN","WVUTL9",58,0)
 I '$D(^UTILITY("VASD",$J))  D  Q  ;no appts passed from SDA^VADPT
"RTN","WVUTL9",59,0)
 .S X="No Future Appointments"
"RTN","WVUTL9",60,0)
 .D ^DIC
"RTN","WVUTL9",61,0)
 .Q
"RTN","WVUTL9",62,0)
 F  S LOOP=$O(^UTILITY("VASD",$J,LOOP)) Q:'LOOP  D
"RTN","WVUTL9",63,0)
 .S X=$G(^UTILITY("VASD",$J,LOOP,"E"))
"RTN","WVUTL9",64,0)
 .Q:X=""
"RTN","WVUTL9",65,0)
 .S X=$P(X,U,1)_"   Clinic: "_$P(X,U,2)
"RTN","WVUTL9",66,0)
 .D ^DIC
"RTN","WVUTL9",67,0)
 .Q
"RTN","WVUTL9",68,0)
 Q
"RTN","WVUTL9",69,0)
KILLUG ; Kill Utility Global created by SDA^VADPT call
"RTN","WVUTL9",70,0)
 K ^UTILITY("VASD",$J)
"RTN","WVUTL9",71,0)
 Q
"RTN","WVUTL9",72,0)
IEN(WVFILE,WVALUE) ; Return ien of entry
"RTN","WVUTL9",73,0)
 ; input: WVFILE - File number
"RTN","WVUTL9",74,0)
 ;        WVALUE - value of the .01 field
"RTN","WVUTL9",75,0)
 I 'WVFILE!(WVALUE="") Q 0
"RTN","WVUTL9",76,0)
 Q +$O(^WV(WVFILE,"B",WVALUE,0))
"RTN","WVUTL9",77,0)
 ;
"RTN","WVUTL9",78,0)
GADD(DFN) ; Get COMPLETE ADDRESS with ADD^VADPT
"RTN","WVUTL9",79,0)
 ; Returns VAPA array
"RTN","WVUTL9",80,0)
 ; VAPA(1): street address-line 1
"RTN","WVUTL9",81,0)
 ; VAPA(2): street address-line 2
"RTN","WVUTL9",82,0)
 ; VAPA(3): street address-line 3
"RTN","WVUTL9",83,0)
 ; VAPA(4): city
"RTN","WVUTL9",84,0)
 ; VAPA(5): state file ien^state name
"RTN","WVUTL9",85,0)
 ; VAPA(6): zip code
"RTN","WVUTL9",86,0)
 Q:'$G(DFN)
"RTN","WVUTL9",87,0)
 D ADD^VADPT
"RTN","WVUTL9",88,0)
 Q
"RTN","WVUTL9",89,0)
KADD(DFN) ; Kill COMPLETE ADDRESS multiple
"RTN","WVUTL9",90,0)
 Q:'$G(DFN)
"RTN","WVUTL9",91,0)
 N DA,DIK
"RTN","WVUTL9",92,0)
 S DA=0,DA(1)=DFN
"RTN","WVUTL9",93,0)
 F  S DA=$O(^WV(790,DFN,3,DA)) Q:'DA  D
"RTN","WVUTL9",94,0)
 .S DIK="^WV(790,"_DFN_",3,"
"RTN","WVUTL9",95,0)
 .D ^DIK
"RTN","WVUTL9",96,0)
 .Q
"RTN","WVUTL9",97,0)
 Q
"RTN","WVUTL9",98,0)
SADD(DFN) ; Set COMPLETE ADDRESS multiple
"RTN","WVUTL9",99,0)
 Q:'$G(DFN)
"RTN","WVUTL9",100,0)
 Q:'$D(^WV(790,DFN))
"RTN","WVUTL9",101,0)
 N DA,DIC,DLAYGO,LOOP,WVSTATE,X
"RTN","WVUTL9",102,0)
 S LOOP=0,DIC="^WV(790,"_DFN_",3,",DIC(0)="L",DA(1)=DFN,DLAYGO=790
"RTN","WVUTL9",103,0)
 S DIC("P")=$P(^DD(790,3,0),U,2)
"RTN","WVUTL9",104,0)
 I '$D(VAPA)  D  Q  ;no address passed from ADD^VADPT
"RTN","WVUTL9",105,0)
 .S X="No Address on file"
"RTN","WVUTL9",106,0)
 .D ^DIC
"RTN","WVUTL9",107,0)
 .Q
"RTN","WVUTL9",108,0)
 F LOOP=1,2,3 D
"RTN","WVUTL9",109,0)
 .S X=$G(VAPA(LOOP))
"RTN","WVUTL9",110,0)
 .Q:X=""
"RTN","WVUTL9",111,0)
 .D ^DIC
"RTN","WVUTL9",112,0)
 .Q
"RTN","WVUTL9",113,0)
 S WVSTATE=""
"RTN","WVUTL9",114,0)
 I $P(VAPA(5),U,1) D
"RTN","WVUTL9",115,0)
 .S WVSTATE=$$GET1^DIQ(5,$P(VAPA(5),U,1),1,"E")
"RTN","WVUTL9",116,0)
 .Q
"RTN","WVUTL9",117,0)
 S X=VAPA(4)_", "_WVSTATE_"  "_VAPA(6)
"RTN","WVUTL9",118,0)
 D ^DIC
"RTN","WVUTL9",119,0)
 Q
"RTN","WVUTL9",120,0)
KVAR ; Kill off VADPT variables used
"RTN","WVUTL9",121,0)
 D KVAR^VADPT
"RTN","WVUTL9",122,0)
 Q
"RTN","WVUTL9",123,0)
ELIG(WVDFN) ; Get patient's eligibilty code.
"RTN","WVUTL9",124,0)
 ;  Input: patient DFN
"RTN","WVUTL9",125,0)
 ; Output: internal^external values
"RTN","WVUTL9",126,0)
 N DFN,I,VAEL,VAERR,X,Y
"RTN","WVUTL9",127,0)
 S DFN=WVDFN
"RTN","WVUTL9",128,0)
 D ELIG^VADPT ;get elibility code
"RTN","WVUTL9",129,0)
 Q $G(VAEL(1)) ;VAEL(1)=internal^external
"RTN","WVUTL9",130,0)
 ;
"RTN","WVUTL9",131,0)
HELP(WVDA,WVA,WVB) ; Display message for eligiblity codes
"RTN","WVUTL9",132,0)
 ; WVDA - the FILE 790.02 ien
"RTN","WVUTL9",133,0)
 ; WVA  - the node number where the eligibilty codes are stored
"RTN","WVUTL9",134,0)
 ; WVB  - the package name associated with those eligibility codes
"RTN","WVUTL9",135,0)
 Q:'$O(^WV(790.02,WVDA,WVA,0))  ;no eligibility codes for lab data
"RTN","WVUTL9",136,0)
 N WVMSG
"RTN","WVUTL9",137,0)
 S WVMSG(1)="The ELIGIBILITY CODE(S) defined for "_WVB_" will be deleted when you"
"RTN","WVUTL9",138,0)
 S WVMSG(2)="exit and save your changes."
"RTN","WVUTL9",139,0)
 D HLP^DDSUTL(.WVMSG)
"RTN","WVUTL9",140,0)
 Q
"RTN","WVUTL9",141,0)
DELETE(WVDA) ; Delete eligibility codes, if necessary
"RTN","WVUTL9",142,0)
 ; task as a background job?
"RTN","WVUTL9",143,0)
 Q:'WVDA
"RTN","WVUTL9",144,0)
 N WVLAV,WVLSP,WVNODE,WVRAV,WVRSP,X,Y
"RTN","WVUTL9",145,0)
 S WVNODE=$G(^WV(790.02,WVDA,0))
"RTN","WVUTL9",146,0)
 Q:WVNODE=""
"RTN","WVUTL9",147,0)
 S WVRSP=$P(WVNODE,U,10) ;import mams from radiology
"RTN","WVUTL9",148,0)
 S WVRAV=$P(WVNODE,U,25) ;include all non-veterans (rad)
"RTN","WVUTL9",149,0)
 S WVLSP=$P(WVNODE,U,24) ;import tests from lab
"RTN","WVUTL9",150,0)
 S WVLAV=$P(WVNODE,U,26) ;include all non-veterans (lab)
"RTN","WVUTL9",151,0)
 ; Delete eligibility codes related to radiology if 
"RTN","WVUTL9",152,0)
 ; 1)     import mams from radiology = YES, or
"RTN","WVUTL9",153,0)
 ; 2) include all non-veterans (rad) = YES, or
"RTN","WVUTL9",154,0)
 ; 3) include all non-veterans (rad) = null
"RTN","WVUTL9",155,0)
 I WVRSP'=1!(WVRAV=1)!(WVRAV="") D
"RTN","WVUTL9",156,0)
 .N DA,DIK
"RTN","WVUTL9",157,0)
 .S DA(1)=WVDA,DA=0,DIK="^WV(790.02,DA(1),5,"
"RTN","WVUTL9",158,0)
 .F  S DA=$O(^WV(790.02,DA(1),5,DA)) Q:'DA  D ^DIK
"RTN","WVUTL9",159,0)
 .Q
"RTN","WVUTL9",160,0)
 ; Delete eligibility codes related to laboratory if 
"RTN","WVUTL9",161,0)
 ; 1)          import tests from lab = YES, or
"RTN","WVUTL9",162,0)
 ; 2) include all non-veterans (lab) = YES, or
"RTN","WVUTL9",163,0)
 ; 3) include all non-veterans (lab) = null
"RTN","WVUTL9",164,0)
 I WVLSP'=1!(WVLAV=1)!(WVLAV="") D
"RTN","WVUTL9",165,0)
 .N DA,DIK
"RTN","WVUTL9",166,0)
 .S DA(1)=WVDA,DA=0,DIK="^WV(790.02,DA(1),6,"
"RTN","WVUTL9",167,0)
 .F  S DA=$O(^WV(790.02,DA(1),6,DA)) Q:'DA  D ^DIK
"RTN","WVUTL9",168,0)
 .Q
"RTN","WVUTL9",169,0)
 Q
"UP",790.02,790.13,-1)
790.02^5
"UP",790.02,790.13,0)
790.13
"UP",790.02,790.14,-1)
790.02^6
"UP",790.02,790.14,0)
790.14
"VER")
8.0^22
"^DD",790.02,790.02,.25,0)
INCLUDE ALL NON-VETERANS (RAD)^S^1:YES;0:NO;^0;25^Q
"^DD",790.02,790.02,.25,21,0)
^^11^11^3000331^
"^DD",790.02,790.02,.25,21,1,0)
This field indicates whether or not procedure data transmitted from the
"^DD",790.02,790.02,.25,21,2,0)
Radiology/NM package for non-veterans will be accepted in the Women's
"^DD",790.02,790.02,.25,21,3,0)
Health package.
"^DD",790.02,790.02,.25,21,4,0)
 
"^DD",790.02,790.02,.25,21,5,0)
Answer YES to accept radiology procedure data for ALL non-veterans.
"^DD",790.02,790.02,.25,21,6,0)
Answer NO to not accept radiology procedure data for any non-veterans.
"^DD",790.02,790.02,.25,21,7,0)
 
"^DD",790.02,790.02,.25,21,8,0)
To accept data for some (but not all) non-veterans, answer NO and then
"^DD",790.02,790.02,.25,21,9,0)
enter the eligibility code(s) you wish to track.
"^DD",790.02,790.02,.25,21,10,0)
 
"^DD",790.02,790.02,.25,21,11,0)
Leaving this answer blank is the same as YES.
"^DD",790.02,790.02,.25,"DT")
3000217
"^DD",790.02,790.02,.26,0)
INCLUDE ALL NON-VETERANS (LAB)^S^1:YES;0:NO;^0;26^Q
"^DD",790.02,790.02,.26,21,0)
^.001^11^11^3000331^^
"^DD",790.02,790.02,.26,21,1,0)
This field indicates whether or not lab test data transmitted from the
"^DD",790.02,790.02,.26,21,2,0)
Laboratory package for non-veterans will be accepted in the Women's Health
"^DD",790.02,790.02,.26,21,3,0)
package.
"^DD",790.02,790.02,.26,21,4,0)
 
"^DD",790.02,790.02,.26,21,5,0)
Answer YES to accept lab test data for ALL non-veterans.
"^DD",790.02,790.02,.26,21,6,0)
Answer NO to not accept lab test data for any non-veterans.
"^DD",790.02,790.02,.26,21,7,0)
 
"^DD",790.02,790.02,.26,21,8,0)
To accept data for some (but not all) non-veterans, answer NO and then
"^DD",790.02,790.02,.26,21,9,0)
enter the eligibility code(s) you wish to track.
"^DD",790.02,790.02,.26,21,10,0)
 
"^DD",790.02,790.02,.26,21,11,0)
Leaving this answer blank is the same as YES.
"^DD",790.02,790.02,.26,"DT")
3000217
"^DD",790.02,790.02,.27,0)
PRIMARY ELIGIBILITY CODE (RAD)^790.13PA^^5;0
"^DD",790.02,790.02,.27,21,0)
^^3^3^3000217^
"^DD",790.02,790.02,.27,21,1,0)
This multiple is a pointer to FILE 8. Facilities that do not want to track
"^DD",790.02,790.02,.27,21,2,0)
radiology procedure data for all non-veterans may select the eligibility
"^DD",790.02,790.02,.27,21,3,0)
codes of those non-veteran patients they do wish to track.
"^DD",790.02,790.02,.28,0)
PRIMARY ELIGIBILITY CODE (LAB)^790.14PA^^6;0
"^DD",790.02,790.02,.28,21,0)
^^3^3^3000217^
"^DD",790.02,790.02,.28,21,1,0)
This multiple is a pointer to FILE 8. Facilities that do not want to track
"^DD",790.02,790.02,.28,21,2,0)
lab test data for all non-veterans may select the eligibility codes of
"^DD",790.02,790.02,.28,21,3,0)
those non-veteran patients they do wish to track.
"^DD",790.02,790.13,0)
PRIMARY ELIGIBILITY CODE (RAD) SUB-FIELD^^.01^1
"^DD",790.02,790.13,0,"DT")
3000217
"^DD",790.02,790.13,0,"IX","B",790.13,.01)

"^DD",790.02,790.13,0,"NM","PRIMARY ELIGIBILITY CODE (RAD)")

"^DD",790.02,790.13,0,"UP")
790.02
"^DD",790.02,790.13,.01,0)
PRIMARY ELIGIBILITY CODE (RAD)^P8'X^DIC(8,^0;1^S:$D(X) DINUM=X Q
"^DD",790.02,790.13,.01,1,0)
^.1
"^DD",790.02,790.13,.01,1,1,0)
790.13^B
"^DD",790.02,790.13,.01,1,1,1)
S ^WV(790.02,DA(1),5,"B",$E(X,1,30),DA)=""
"^DD",790.02,790.13,.01,1,1,2)
K ^WV(790.02,DA(1),5,"B",$E(X,1,30),DA)
"^DD",790.02,790.13,.01,21,0)
^^5^5^3000328^
"^DD",790.02,790.13,.01,21,1,0)
Facilities that do not want to track radiology procedure data for all
"^DD",790.02,790.13,.01,21,2,0)
non-veterans may select the eligibility codes of those non-veteran
"^DD",790.02,790.13,.01,21,3,0)
patients they do wish to track.
"^DD",790.02,790.13,.01,21,4,0)
If you want to track all non-veterans or none at all, then leave this
"^DD",790.02,790.13,.01,21,5,0)
answer blank.
"^DD",790.02,790.13,.01,23,0)
^.001^1^1^3000328^^
"^DD",790.02,790.13,.01,23,1,0)
IA #548 grants permission to point to FILE 8.
"^DD",790.02,790.13,.01,"DT")
3000218
"^DD",790.02,790.14,0)
PRIMARY ELIGIBILITY CODE (LAB) SUB-FIELD^^.01^1
"^DD",790.02,790.14,0,"DT")
3000217
"^DD",790.02,790.14,0,"IX","B",790.14,.01)

"^DD",790.02,790.14,0,"NM","PRIMARY ELIGIBILITY CODE (LAB)")

"^DD",790.02,790.14,0,"UP")
790.02
"^DD",790.02,790.14,.01,0)
PRIMARY ELIGIBILITY CODE (LAB)^P8'X^DIC(8,^0;1^S:$D(X) DINUM=X Q
"^DD",790.02,790.14,.01,1,0)
^.1
"^DD",790.02,790.14,.01,1,1,0)
790.14^B
"^DD",790.02,790.14,.01,1,1,1)
S ^WV(790.02,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",790.02,790.14,.01,1,1,2)
K ^WV(790.02,DA(1),6,"B",$E(X,1,30),DA)
"^DD",790.02,790.14,.01,21,0)
^^5^5^3000328^
"^DD",790.02,790.14,.01,21,1,0)
Facilities that do not want to track lab test data for all non-veterans
"^DD",790.02,790.14,.01,21,2,0)
may select the eligibility codes of those non-veteran patients they do
"^DD",790.02,790.14,.01,21,3,0)
wish to track.
"^DD",790.02,790.14,.01,21,4,0)
If you want to track all non-veterans or none at all, then leave this
"^DD",790.02,790.14,.01,21,5,0)
answer blank.
"^DD",790.02,790.14,.01,23,0)
^.001^1^1^3000328^^
"^DD",790.02,790.14,.01,23,1,0)
IA #548 grants permission to point to FILE 8.
"^DD",790.02,790.14,.01,"DT")
3000218
**END**
**END**

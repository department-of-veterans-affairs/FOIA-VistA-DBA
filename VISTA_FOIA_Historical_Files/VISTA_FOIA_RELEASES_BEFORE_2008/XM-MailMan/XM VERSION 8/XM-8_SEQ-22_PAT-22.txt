$TXT Created by BEUSCHEL,GARY at MAILMAN.FO-OAKLAND.MED.VA.GOV  (KIDS) on Wednesday, 03/03/04 at 08:31
=============================================================================
Run Date: MAR 12, 2004                     Designation: XM*8*22
Package : XM - MAILMAN                        Priority: Mandatory
Version : 8        SEQ #22                      Status: Released
                  Compliance Date: APR 12, 2004
=============================================================================


Subject: FIX SEQUENTIAL MEDIA TRANSMISSON

Category: 
  - Routine

Description:
============

             * * * * * * * * * * * * * * * * * * * *
                     !! A T T E N T I O N !!
             You must manually CHECK entries in the
                        DEVICE FILE and
                  COMMUNICATIONS PROTOCOL FILE
                 and CORRECT them, if necessary.
                        See instructions.
             * * * * * * * * * * * * * * * * * * * *
  
 Patch XM*8.0*22
  
 NOIS: CMC-0803-31054
 Test Sites: Tennessee Valley HCS (DSM/VMS); Murfreesboro CMOP (Cache/NT);
             Charleston CMOP (Cache/NT); Portland, OR (Cache/VMS)
  
 Attempts to use the option Sequential Media Queue Transmission
 [XMS-SEQ-TRANSMIT] fail with the variable ER undefined.
 This patch fixes that.
  
 IMPORTANT: If you are using the HFS device to receive the mail, you should
 either have an HFS_IN device with the Open Parameter set to ReadOnly or set
 the ASK HFS I/O OPERATION to YES and choose READONLY when using the device.
 Detailed example is provided in Step 7 and 8 of the Install Instructions.
  
 NOTE: This patch should be installed during off hours, when user activity
 is at a minimum.  It has no patch pre-requisites.
 ============================================================================ 
  
 ROUTINES:
 The second line of the routine now looks like:
        ;;8.0;MailMan;**[patch list]**;Jun 28, 2002
  
               Before          After
 Name          Checksum        Checksum        Patch List
 ------------------------------------------------------------------
 XMCB           3553056         3880657        22
 XMR           11613068        11821822        22
 XMTDR         10257008        10279631        22
 * Checksums produced by CHECK^XTSUMBLD
  
 This patch introduces no new routines.
 ===========================================================================
  
 INSTALLATION:
 NOTE: This patch should be installed during off hours, when user activity
 is at a minimum.  It has no patch pre-requisites.
  
 1.  Users may be on the system during installation of this patch.
  
 2.  DSM Sites: If any of these routines is mapped, disable mapping for the 
     affected routine(s).  
  
 3.  On the PackMan menu, use the 'INSTALL/CHECK MESSAGE' option.  This loads 
     the patch into a Transport Global on your system.  
  
 4.  Users may be on the system.  You do not need to stop TaskMan
     or the background filer.
  
 5.  On the KIDS:Installation menu, use the following options to install the
     Transport Global:
        Verify Checksums in Transport Global
        Print Transport Global
        Compare Transport Global to Current System
        Backup a Transport Global
        Install Package(s)
  Select INSTALL NAME:    XM*8.0*22     Loaded from Distribution  <date/time>
                          =========
  Install Questions for XM*8.0*22
  
  Want KIDS to INHIBIT LOGONs during the install? YES// NO
                                                        ==
  Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
                                                                        ==
  Enter the Device you want to print the Install messages.
  You can queue the install by enter a 'Q' at the device prompt.
  Enter a '^' to abort the install.
  
  DEVICE: HOME// <You may queue it if you wish>
                 ------------------------------
  
 6.  DSM Sites: After patch has installed, rebuild your map set, if necessary.
  
 7.  This is a repeat of the information provided in patch XM*7.1*193. 
 If you use the MailMan option for transferring VistA email messages via
 disk/tape to another site, you will have problems if the field SEND(#1)
 setting for the TAPE entry in the Communications Protocol file(#3.4) is
 wrong.
  
 The SEND field for the TAPE entry must be set to:
  
 SEND: W XMSG,! ; S XMTRAN="S: "_XMSG D TRAN^XMC1
             ==
 Most of the entries we have found for this don't have the ",!" following
 the "W XMSG".  Without the ",!" you don't get the line feed at the end of
 each line. This causes a buffer overflow when you try to receive the
 message.  Please look at your entry, and edit, if necessary:
  
 Using FileMan:
  
 Select OPTION: ENTER OR EDIT FILE ENTRIES  
                =====
 INPUT TO WHAT FILE: COMMUNICATIONS PROTOCOL// <press enter>
 EDIT WHICH FIELD: ALL// SEND
                         ====
 THEN EDIT FIELD: <press enter>
  
  
 Select COMMUNICATIONS PROTOCOL NAME: TAPE
                                      ====
 SEND: W XMSG ; S XMTRAN="S: "_XMSG D TRAN^XMC1  Replace MSG With MSG,!
                                                         ===      =====
   Replace <press enter>
           =============
    W XMSG,! ; S XMTRAN="S: "_XMSG D TRAN^XMC1
  
 Select COMMUNICATIONS PROTOCOL NAME:
  
 8. The Kernel Systems Manual tells you how to set up HFS (Host File Server)
 devices.  (In v8, Chapter 18 on Host Files is pages 229-232.)  If your site
 is using an HFS device to send mail to and receive mail from another site,
 your settings should deviate from the recommendations in the manual as
 follows:
  
 Using FileMan:
  
 Select OPTION: ENTER OR EDIT FILE ENTRIES  
                =====
 INPUT TO WHAT FILE: COMMUNICATIONS PROTOCOL// DEVICE  
                                               ======
 EDIT WHICH FIELD: ALL// ASK HOST FILE
                         ========
 THEN EDIT FIELD: ASK HFS I/O OPERATION
                  =======
 THEN EDIT FIELD: <press enter>
  
 Select DEVICE NAME: HFS        <=== Yours may be different
                     ===
 ASK HOST FILE: YES//           <=== Must be YES
 ASK HFS I/O OPERATION: YES//   <=== Must be YES
  
 ASK HOST FILE should be set to YES, so that you will be prompted for
 "HOST FILE NAME:".  The site creating the host file could accept the default
 or select a name.  The site reading the host file would enter the name of
 the file from the sending site.
  
 ASK HFS I/O OPERATION should be set to YES, so that you will be prompted
 "INPUT/OUTPUT OPERATION:".  The site creating the host file would answer
 "NEW", and the site reading the host file would answer "READONLY".
  
 This is what it should look like when you use the options:
  
 Option: Sequential Media Queue Transmission [XMS-SEQ-TRANSMIT]
           
 This option lets you select only those queues which have messages.  If
 you can't select a queue, it either doesn't exist or it has no messages.
  
 Select DOMAIN NAME: FORUM.VA.GOV                       1 msgs
 DEVICE: HOME// HFS  DISK FILE
 HOST FILE NAME: TMP.TMP//FORUM.DAT           INPUT/OUTPUT OPERATION: ?
 Enter one of the following host file input/ouput operation:
                 R = READONLY
                 N = NEWVERSION
                RW = READ/WRITE
                                              INPUT/OUTPUT OPERATION: N
  
 Dumping messages now ... Messages dumped: 1
  
 Option: Sequential Media Message Reception [XMR-SEQ-RECEIVE]
  
 DEVICE: HOME// HFS  DISK FILE
 HOST FILE NAME: TMP.TMP//FORUM.DAT           INPUT/OUTPUT OPERATION: R
  
 Messages received: 1
 ===========================================================================

Routine Information:
====================

Routine Name:
  - XMCB


Routine Checksum:

Routine Name:
  - XMTDR


Routine Checksum:

Routine Name:
  - XMR


Routine Checksum:

=============================================================================
User Information:
Entered By  : BEUSCHEL,GARY                 Date Entered  : AUG 28, 2003
Completed By: SINGH,GURBIR                  Date Completed: MAR 10, 2004
Released By : NOSS,ROD                      Date Released : MAR 12, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

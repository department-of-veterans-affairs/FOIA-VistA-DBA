$TXT Created by FORT,WALLY at PAT-XWB.FO-OAKLAND.MED.VA.GOV  (KIDS) on TUESDAY, 01/14/03 at 09:55
=============================================================================
Run Date: APR 24, 2003                     Designation: XWB*1.1*32
Package : XWB - RPC BROKER                    Priority: Mandatory
Version : 1.1        SEQ #27                    Status: Released
                  Compliance Date: MAY 25, 2003
=============================================================================

Associated patches: (v)XWB*1.1*27  <<= must be installed BEFORE `XWB*1.1*32'

Subject:  Deferred RPCs check Handle

Category: 
  - Routine

Description: 
============

 Patch Tracking #: 35402661
 Test Sites: SALISBURY NC., Mountain Home TN.
 Blood Bank Clearance: 12/12/2002
  
 NOIS: SBY-0702-30545, SBY-0502-32457.
 Problem: The user was using the ROR GUI, and had clicked on the Registry 
 Patient Report button, then the Display Report button, then clicked on the 
 Abort button.  The window closed and it looked OK, but a NULLSUBSCR error 
 occurred in XWBDRPC that showed up in the error trap. This was caused by 
 the entry in the XTMP Global getting cleaned up before the background job 
 had time to finish.
 Fix: Check that the XTMP entry is still there before loading the results. 
 Make sure that the index value will not be NULL. Same change done in 
 XWB2HL7.
  
 Routine Summary
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;1.1;RPC BROKER;**[Patch List]**;Mar 28, 1997
  
                  Checksum
 Routine         Old       New      Patch List
 XWB2HL7      10960487  10964744    **12,18,20,22,27,32**
 XWBDRPC       5069845   5222227    **12,20,32**
  
 List of preceding patches: 27
 Sites should use CHECK^XTSUMBLD to verify checksums.
 =========================================================================
 >>>Stop Broker users
 >>>Roll and Scroll Users may remain on the system.
 >>>TaskMan does need to be put into a wait state.
 >>>If you accept a slight risk of jobs getting a CLOBER/EDITED error
 >>>Broker/CPRS users and TaskMan may remain running.  Otherwise stop all other
 >>>jobs on the system.
  
 Installation:
  
    1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.
  
    2.  The patch has now been loaded into a Transport global on your
        system. Now you need to use KIDS to install the Transport global.
        On the KIDS menu, under the 'Installation' menu, use the following
        options:
  
           Verify Checksums in Transport Global
           Print Transport Global
           Compare Transport Global to Current System
           Backup a Transport Global
           
    3.  During the installation, do not run any RPC-Broker-based Client/Server
        software (e.g., CPRS, PCMM, BCMA).  No Broker-based client/server 
        software should be running while installing this patch on the 
        server.  You can identify these jobs by checking the system status 
        and verifying if any XWBTCPC routines are running (i.e., Broker 
        Handler).  If you find any of these jobs running on the system,  
        notify users to logoff or FORCEX the jobs.  Active users may get 
        NOSOURCE or CLOBBER errors.  
  
    4.  Stop the Broker Listener on the server.  Do this by first 
        checking the system status, then verifying if the XWBTCPL 
        routine is running (i.e., Broker Listener).  If you find this 
        routine running on your system, STOP IT.  To stop the Broker 
        Listener, do the following: 
  
            a.  Log into your M server.                   
            b.  Enter the following command at the M prompt: 
  
                >D STOP^XWBTCP(Listener port) 
                (Typically, the Listener port is 9200) 
  
    5.  DSM sites - If any of these routines are mapped,
        you will need to disable mapping for the affected routines.
  
    6.  Roll and Scroll Users may remain on the system.
        This patch can not be queued.
        Inhibit users from login into the system. (If you install when a few
        users are on the system and the possibility of some CLOBER/NOSOURCE
        errors is acceptable, then users can stay on the system.)
        Also place TaskMan in a wait state.
        Option: Place TaskMan in a WAIT State
  
    7.  Installation will take less than 2 minutes.
        On the KIDS menu, under the 'Installation' menu, use the following
        option:
         Install Package(s)  'XWB*8.0*32'
                              ==========
  
        Want KIDS to INHIBIT LOGONs during the install? YES// YES
  
        Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
    8.  DSM Sites, after patch has installed, rebuild your map set.
  
    9.  Remove TaskMan from the wait state.
        Option: Remove TaskMan from WAIT State
  
   10.  Restart the Broker Listener on the Server:
          a.  Log into your M server
          b.  Enter the following at the M prompt:
  
              >D STRT^XWBTCP(Listener port)
              (Typically, the Listener port is 9200)

Routine Information:
====================

Routine Name:
  - XWBDRPC


Routine Checksum:

Routine Name:
  - XWB2HL7


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : FORT,WALLY                     Date Entered : DEC 04, 2002
Completed By: MURPHY,MINAO J               Date Completed: APR 16, 2003
Released By : PALMER,MICHAEL                Date Released : APR 24, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

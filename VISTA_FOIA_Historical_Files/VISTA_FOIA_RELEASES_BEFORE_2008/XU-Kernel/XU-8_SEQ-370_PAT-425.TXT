$TXT Created by FORT,WALLY at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on Wednesday, 05/23/07 at 08:12
=============================================================================
Run Date: JUN 14, 2007                     Designation: XU*8*425
Package : XU - KERNEL                         Priority: Mandatory
Version : 8       SEQ #370                      Status: Released
                  Compliance Date: JUL 15, 2007
=============================================================================

Associated patches: (v)XU*8*151    <<= must be installed BEFORE `XU*8*425'
                    (v)XU*8*361    <<= must be installed BEFORE `XU*8*425'
                    (v)XU*8*385    <<= must be installed BEFORE `XU*8*425'
                    (v)XU*8*415    <<= must be installed BEFORE `XU*8*425'

Subject: XLFNSLK clobbers IO.

Category: 
  - Routine

Description:
============

 Patch Tracking #: 43893637
 Test Sites: VL development, Salisbury VAMC, WRJ VAMC
 Blood Bank Clearance:4/27/07 
  
 HD 145328  XLFNSLK clobbers IO
 Problem: XLFNSLK was calling %ZISTCP and not resetting back to the device
 current at the time of the call.
 Fix: Have XLFNSLK restore the current device at the time it is
 called.  It was saving it off but did not restore it.
 Intersystems reported an API to do a DNS lookup and this was added to the 
 code to speed things up.
 Have USE^%ZISUTL kill IO("CLOSE") because it should only report
 if the last call to ^%ZISC did close the device. Leaving it around
 causes TaskMan to not act in a consistent manner.
  
 HD 153483
 Problem: The ORDER^%ZOSV api for GT.M used the wrong variable to look at 
 what parts of the symbol table to save. The call from ZTLOAD1 did not set
 the variable it was looking for.  If ZTSAVE("XWB*")="" was set none of the XWB
 variable would be save.
 Fix: In reviewing the code it was determined that there was no reason for 
 the ZOSVVXD code to use different variables than the others versions of 
 %ZOSV.  The MERGE command allows the code to be further simplified. This 
 effects ZOSVGTM, ZOSVGUX, ZOSVONT, ZOSVVXD, ZTLOAD1.
  
 Request from VistaLink for trouble shooting, to have the $$APFIND^XUSAP 
 return different codes for the different reasons the lookup could fail.
 (VistaLink should be the only application using this call)
  
 Report from VistaLink that ZISUTL was getting a NOTOPEN error.
 This happened when returning control to a Resource device.
 %ZISUTL will now check the device type before doing a USE.
  
 HD 164526
 Patch XT*7.3*102 removed the routines to process data in the ^%ZRTL(3)
 global.  The entry point T1^%ZOSV will remain but will not record any 
 data.
  
 Reports from VOE (VistA Office) that parts of %ZOSV for GT.M don't work 
 have been addressed.
  
 Reports from VOE that %ZIS4 doesn't work for CHAN type devices have been 
 address in changes to ZIS4GTM.
  
 Routine Information:
 ====================
 Checksums shown are OLD Checksums
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;8.0;KERNEL;**[Patch List]**;Jul 10, 1995;
  
                  Checksums
 Routine         Before      After      Patch List
 XLFNSLK         7558282   7633442    **142,151,425**
 XUSAP           3699763   4201025    **361,425**
 ZIS4GTM         8115850   8462074    **275,425**
 ZISUTL          2851743   2862005    **18,24,34,69,118,127,199,275,425**
 ZOSFGTM         7752749   8580663    **275,425**
 ZOSFGUX         8611914   9521640    **275,425**
 ZOSV2GTM        2422098   3376187    **275,425**
 ZOSVGTM         4119278   3373932    **275,425**
 ZOSVGUX         7982434   6511872    **275,425**
 ZOSVONT         6889270   6048300    **34,94,107,118,136,215,293,284,385,425**
 ZOSVVXD         8031174   6376459    **13,65,71,94,107,118,136,215,284,425**
 ZTLOAD1         9316062   8841130    **112,118,127,162,275,363,409,415,425**
 ZTMS4           4123981   2723820    **136,275,425**
  
 List of preceding patches: 151, 361, 385, 415
 Sites should use CHECK^XTSUMBLD to verify checksums.
  
 =========================================================================
 Installation:
  
 >>>Allow KIDS to inhibit new sign-ons.
  
 ********* Please note that Taskman NEEDs to be in a wait state.**********
  
   1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
  
   2.  The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
  
          Verify Checksums in Transport Global
          Print Transport Global
          Compare Transport Global to Current System
          Backup a Transport Global
  
   3.  This patch can not be queued.
       Also place TaskMan in a wait state. (DO WAIT^ZTMKU)
       There is a slight chance that a user could get an EDITED
       error if they are queuing a task at the time ZTLOAD1 gets saved.
  
   4.  Installation will take less than 5 minutes.
       In Programmer mode:
       Use "D ^XPDKRN" then
          Install Package(s)  'XU*8.0*425'
                               ==========
  
       Want KIDS to INHIBIT LOGONs during the install? YES// YES
  
       Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES//NO
  
   5.  After installing this patch,
       DO RELOAD^ZTMGRSET
       Select the System
       Patch number to load: 425
                             ===
  
   6.  Remove TaskMan from the wait state. (DO RUN^ZTMKU)

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: XLFNSLK
    Before: B27944182  After: B29252865  **142,151,425**
Routine Name: XUSAP
    Before: B10492122  After: B11192654  **361,425**
Routine Name: ZIS4GTM
    Before: B17859253  After: B20959123  **275,425**
Routine Name: ZISUTL
    Before: B10918305  After: B10953558  **18,24,34,69,118,127,199,275,425**
Routine Name: ZOSFGTM
    Before: B21430649  After: B23513514  **275,425**
Routine Name: ZOSFGUX
    Before: B22086501  After: B24238572  **275,425**
Routine Name: ZOSV2GTM
    Before:  B4861009  After:  B7008460  **275,425**
Routine Name: ZOSVGTM
    Before: B17497229  After: B14594340  **275,425**
Routine Name: ZOSVGUX
    Before: B42854824  After: B36401450  **275,425**
Routine Name: ZOSVONT
    Before: B22821420  After: B21543448  **34,94,107,118,136,215,293,284,
                                          385,425**
Routine Name: ZOSVVXD
    Before: B27832883  After: B22508962  **13,65,71,94,107,118,136,215,
                                          284,425**
Routine Name: ZTLOAD1
    Before: B24282359  After: B23025754  **112,118,127,162,275,363,409,
                                          415,425**
Routine Name: ZTMS4
    Before:  B5923868  After:  B4739293  **136,275,425**

=============================================================================
User Information:
Entered By  : FORT,WALLY                    Date Entered  : JUN 19, 2006
Completed By: SINGH,GURBIR                  Date Completed: JUN 11, 2007
Released By : HARROD,PAUL                   Date Released : JUN 14, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

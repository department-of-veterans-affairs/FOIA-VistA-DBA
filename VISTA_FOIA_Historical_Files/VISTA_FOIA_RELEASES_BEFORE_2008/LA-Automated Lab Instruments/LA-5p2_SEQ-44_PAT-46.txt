
=============================================================================
Run Date: FEB 21, 2002                     Designation: LA*5.2*46
Package : LA - AUTOMATED LAB INSTRUMENTS     Priority: Mandatory
Version : 5.2        SEQ #44                    Status: Released
=============================================================================

Associated patches: (v)LA*5.2*1    <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*17   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*22   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*23   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*27   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*42   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*44   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*45   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*47   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*50   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*51   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*55   <<= must be installed BEFORE `LA*5.2*46'
                    (v)LA*5.2*56   <<= must be installed BEFORE `LA*5.2*46'

Subject: LEDI INTERFACE TO NON-VA SYSTEM (LEDI II)

Category: 
  - Enhancement (Mandatory)
  - Data Dictionary
  - Routine

Description: 
============

 VISTA Laboratory Package patch LA*5.2*46 contains no changes to software
 controlled by VHA DIRECTIVE 99-053, titled VISTA BLOOD BANK SOFTWARE.
  
 ========================================
  
 This patch adds support for sending/receiving Laboratory Electronic
 Data Interchange (LEDI) orders/results with non-VA facilities
 (commercial reference laboratories).
  
 As of the release date of this software, there is no national solution to
 implement a laboratory electronic HL7 standard interface to a facility or
 other entity outside the VA wide area network.  National communication
 security concerns are still being debated by the Department of Veterans
 Affairs (VA) and are awaiting resolution.  At present, a VA medical center,
 which intends to utilize this software in conjunction with an interface to
 a commercial reference laboratory or other non-VA information system entity,
 will need to coordinate with the vendor an acceptable communication method.
 Any implementation will need to be approved by the facility and VISN
 Information Security Officer (ISO) and meet current VA security requirements
 for external electronic connections. See VHA Directive 6212, Security of
 External Electronic Connections and VHA Directive 6210, Automated Information
 Systems (AIS) Security for additional information and guidance. Additional
 security information may be obtained from the Health Information Security
 Service (HISS) web page at http://vaww.va.gov/miss.
 
 Implementation of a HL7 messaging interface between the VA VistA Laboratory
 package and a non-VA information system consists basically of three parts:
  - VistA Laboratory LEDI II software.
  - certified communication software and hardware
  - non-VA information system capable of sending and receiving laboratory HL7
    order and result messages.
 All three must be functional to utilize the capabilities of this LEDI II
 software patch. The implementation,setup, and configuration of vendor provided
 hardware and software is NOT addressed by this documentation.  Consult the
 vendor provided documentation and instructions to interface to the VistA
 Laboratory package.
  
  
 Additionally support is added for TCP/IP protocol as a communication
 protocol for the transmission of LEDI HL7 messages. This requires
 patch HL*1.6*19 to have been successfully installed. The implementation
 of this protocol in place of the current MailMan protocol will
 significantly increase transmission speed of messages and reduce system
 overhead/storage. Both systems that will be exchanging HL7 messages,
 using the TCP/IP protocol will need to coordinate the switch to this
 new transmission method. There will be two logical links established
 to exchange messages a server (listener) logical link to receive and
 process messages and a client link to transmit messages.
  
 A new shipping code SM40 - Required Shipping Info Updated has been added
 to file LAB ELECTRONIC CODES (#64.061). This code is used when recording
 this event in file LAB SHIPPING EVENT (#62.85)
  
  
 Comments can now contain ";"character. Previously the ";" character was used
 to parse comments into multiple lines and filed in the database using
 a classical FileMan DIE call. FileMan parsed the fields to edit using
 the ";" character in the DR string. The new call uses a FileMan database
 server call, which does not have this restriction.
  
  
 New fields have been added and existing fields modified within the
 CHEM TEST subfile of file AUTO INSTRUMENT (#62.4) to support the
 following features when processing result messages. These features
 are site-selectable. See data dictionary field description for each
 field for further information. Using option LEDI Setup [LA7V SETUP],
 the section on Auto Instrument settings will prompt for these additional
 fields.
  
 1. Process NTE segments following OBX segments. Comments found attached
    to specific test results are stored as comments. The field REMARK PREFIX
    #18 in CHEM TEST subfile can be used to specify a comment prefix that
    will be made part of the comment.
 2. Store test reference ranges, abnormal flags and name of performing
    laboratory. This patch stores these parameters as comments with the
    results. This information is prefixed with the field REMARK PREFIX.
 3. Specify whether final or incomplete results are processed.
  
 The fields that are new/modified are:
     ACCEPT RESULTS FOR THIS TEST
     STORE REMARKS
     REMARK PREFIX
     STORE PRODUCER'S ID
     STORE REFERENCE RANGE
     STORE ABNORMAL FLAGS
  
 New fields have been added to the LAB SHIPPING CONFIGURATION file (#62.9)
 to allow collecting facilities to specify required patient/specimen
 information to be sent with shipping manifest. This can include specimen
 volume, weight, collection end date/time (collection duration),
 patient height and weight (NOIS ALB-1099-51591). LOINC codes are used to
 identify patient height, weight and specimen weight when appropriate.
 Editing these fields is performed using option Edit Shipping Configuration
 [LA7S EDIT 62.9]. The fields are:
  
     USE NON-VA CODES
     TEST/PROFILE sub-file
       DIVISION
       REQUIRE PATIENT HEIGHT
       PATIENT HEIGHT
       PATIENT HEIGHT UNITS
       PATIENT HEIGHT LOINC CODE
       REQUIRE PATIENT WEIGHT
       PATIENT WEIGHT
       PATIENT WEIGHT UNITS
       PATIENT WEIGHT LOINC CODE
       REQUIRE COLLECTION VOLUME
       COLLECTION VOLUME
       COLLECTION VOLUME UNITS
       COLLECTION VOLUME LOINC CODE
       REQUIRE COLLECTION END D/T
  
 The process of building a shipping manifest now allows the user to
 specify the starting and ending accession numbers to check within an
 accession area. This feature can shorten manifest building time when
 searching a yearly accession area with a large number of accessions.
 It allows the site to skip the accession numbers that have been
 completed earlier in a year and no longer need to be checked to
 determine it any of the tests meet the criteria for building to a
 manifest.
  
  
 The process of closing a shipping manifest now performs a check of
 certain required information. The required information check is for:
  1. Each test has an order NLT code assigned.
  2. If shipping to a facility that does not use VA NLT codes for
     test ordering, the appropriate non-VA test codes/names
     have been designated for all tests on the manifest.
  3. Site-specified required patient/specimen information has been
     entered.
  
  
 The process of building orders in the file LAB PENDING ORDER (#69.6)
 has been enhanced to use information from the file LAB SHIPPING
 CONFIGURATION (#62.9) to create orders based on the host facilities
 specified collection sample and urgency.
  
  
 The LEDI result (ORU) messages will now include the test interpretation
 found in LABORATORY TEST file (#60) as a comment (NTE segment) following
 the test results. Test results to be stored will be checked against the
 FileMan input transform for the data name used to store the results in
 file LAB DATA (#63). If the results do not pass the FileMan input
 transform then an error message will be generated via the Lab
 Universal Interface error reporting process. Results values that are
 "canc", "pending" or "comment" will be stored.
  
  
 The option Display Lab Universal Interface Message [LA7 PRINT LAB UI
 MESSAGE] has been modified to prompt the user if the Kernel Browser
 should be used to display a message. If the browser is not selected then
 a standard "scroll and roll" display of the selected message(s) is
 produced.
  
 Option Retransmit LEDI Lab Results [LA7S RESULTS RETRANSMIT] will allow
 a user to retransmit the laboratory test results for selected accession(s)
 to the collecting/submitting facility.
  
 The install will update several files during the post-install as necessary:
  - It was found that the original release of LEDI failed to update the
    field SHIP VIA #.04 in file LAB SHIPPING MANIFEST (#62.8) when a manifest
    is created. This information will update existing manifests with
    information from the related file LAB SHIPPING CONFIGURATION (#62.9)
    entry.
  
  - The processing routine specified in file LA7 MESSAGE PARAMETER (#62.48)
    for entries related to LEDI has been changed. Existing entries will be
    updated as appropriate.
  
  NOIS HIN-0998-40287 corrected an undefined variable error when building a
    result message.
  
  NOIS BOS-0498-10163 reported an undefined error when attempting to lock
  LAB SHIPPING MANIFEST file (#62.8). Due to a typographically error the
  character "$" was omitted from a $DATA intrinsic function.
  
  NOIS TAM-0401-31867 reported that option Lab Messaging File Integrity
  Checker [LA7 CHECK FILES] option allowed queuing the report to the
  "HOME" device. The option will now prevent queuing to the HOME device.
  It also removes "HOME" as the device default value.
  
  
 ASSOCIATED E3R
 --------------
 E3R #15348, RETRANSMIT FUNCTION FOR LEDI
  
 ASSOCIATED NOIS
 ---------------
   ALB-1099-51591
   ALB-0100-50284
   BOS-0498-10163
   HIN-0998-40287
   HUN-1100-21862
   MIW-1197-41082
   TAM-0401-31867
  
  
 TEST SITES
 ----------
   Alexandria VAMC
   Biloxi VAMC
   Birmingham VAMC
   Fayetteville VAMC
   Hines VAMC
   Houston VAMC
   Jackson VAMC
   Little Rock VAMC
   Madison VAMC
   Milwaukee VAMC
   Muskogee VAMC
   New Orleans VAMC
   Oklahoma City VAMC
   Shreveport VAMC
  
  
 ROUTINE SUMMARY
 ===============
   The following routines are included in this patch.  The second line
   of each of these routines now looks like:
   <tab> ;;5.2;AUTOMATED LAB INSTRUMENTS;<patchlist>;Sep 27, 1994
  
                     Checksum       Checksum
    Routine Name     Before Patch   After Patch    Patch List
    ------------     ------------   -----------    ------------
    LA46             N/A            9520365        **46** (Deleted by KIDS)
    LA7CHKF          10597193       11028299       **27,46**
    LA7QRY           N/A            1084520        **46**
    LA7QRY1          N/A            3509927        **46**
    LA7QRY2          N/A            4552927        **46**
    LA7SBCR          1495927        653666         **27,46**
    LA7SBCR1         7086650        4924406        **27,46**
    LA7SBCR2         3323374        2564479        **27,46**
    LA7SCE           10260809       11402708       **27,46**
    LA7SM            16316313       10277989       **27,46**
    LA7SM1           2146828        8553973        **27,46**
    LA7SM2           N/A            12143125       **46**
    LA7SMB           17707549       14649107       **27,46**
    LA7SMP           15792287       11746903       **27,45,46**
    LA7SMP0          N/A            9303222        **46**
    LA7SMPXL         5400542        3215234        **27,42,46**
    LA7SMU           11040439       7104257        **27,46**
    LA7SMU1          5335635        6241668        **27,46**
    LA7SMU2          N/A            5290542        **46**
    LA7SRR           N/A            6233015        **46**
    LA7UIIN2         9850298        12296505       **17,23,27,46**
    LA7UTILA         11812487       10237097       **23,27,46**
    LA7VHL           8527903        4500486        **27,46**
    LA7VHLU          N/A            4469720        **46**
    LA7VHLU1         N/A            2011157        **46**
    LA7VHLU2         N/A            3873916        **46**
    LA7VHLU3         N/A            2007360        **46**
    LA7VHLU4         N/A            5424804        **46**
    LA7VHLU5         N/A            5541950        **46**
    LA7VIN           N/A            1398763        **46**
    LA7VIN1          N/A            5261630        **46**
    LA7VIN2          N/A            5808892        **46**
    LA7VIN3          N/A            2061956        **46**
    LA7VIN4          N/A            7936019        **46**
    LA7VIN5          N/A            5205707        **46**
    LA7VIN5A         N/A            5039195        **46**
    LA7VMSG          16357149       3253314        **27,50,56,46**
    LA7VMSG1         3358807        8200340        **56,46**
    LA7VOBR          N/A            2129056        **46**
    LA7VOBRA         N/A            5326634        **46**
    LA7VOBX          N/A            2088674        **46**
    LA7VOBX1         N/A            3799868        **46**
    LA7VOBX2         N/A            4350324        **46**
    LA7VOBX3         N/A            5240738        **46**
    LA7VOBXA         N/A            6232009        **46**
    LA7VORC          N/A            1565653        **46**
    LA7VORM          17384019       6471896        **27,42,46**
    LA7VORM1         20868841       7601990        **27,51,46**
    LA7VORM2         N/A            3426954        **46**
    LA7VORM3         N/A            6787219        **46**
    LA7VORU          10077624       8070282        **27,46**
    LA7VORU1         N/A            4734718        **46**
    LA7VORU2         N/A            1962290        **46**
    LA7VPID          N/A            4123683        **46**
    LA7VSET          19500034       15979413       **27,51,55,46**
    LA7VSET1         12858976       9065449        **27,51,55,46**
    LA7VSTP          6154318        6079680        **27,44,51,46**
    LA7VSTP1         8332246        3317926        **27,46**
    LAGEN            9445120        8522786        **1,17,22,27,47,46**
    LASET            6644420        6955342        **27,42,46**
  
  List of preceding patches: 42, 45, 47, 51, 55, 56
  Sites should use CHECK^XTSUMBLD to verify checksums.
  
  
 SOFTWARE RETRIEVAL:
 ===================
  
    The following software and documentation files are exported as part of
    this patch:
  
     File Name           Contents                         Retrieval Format
     ---------           --------                         ----------------
     LAB_LEDI_II.KID     LA*5.2*46 KIDS build                 ASCII
                         LR*5.2*222 KIDS build
  
     LAB_LEDI_II_IG.PDF  LABORATORY ELECTRONIC DATA           BINARY
     LAB_LEDI_II_IG.DOC   INTERCHANGE PHASE II (LEDI II)
                          INSTALLATION GUIDE
  
     LAB_LEDI_II_UM.PDF  LABORATORY ELECTRONIC DATA           BINARY
     LAB_LEDI_II_UM.DOC   INTERCHANGE PHASE II (LEDI II)
                          USER MANUAL
  
    The software files are available on one of the following OI Field
    Offices' ANONYMOUS.SOFTWARE directories.
  
    All sites are encouraged to use their FTP capability to obtain these
    files.  Use the FTP address "download.vista.med.va.gov" (without the
    quotes) to connect to the first available FTP server where the files
    are located.
  
       OI FIELD OFFICE    FTP ADDRESS                DIRECTORY
       ===============    ===========                =========
       ALBANY             ftp.fo-albany.med.va.gov   [ANONYMOUS.SOFTWARE]
       HINES              ftp.fo-hines.med.va.gov    [ANONYMOUS.SOFTWARE]
       SALT LAKE          ftp.fo-slc.med.va.gov      [ANONYMOUS.SOFTWARE]
  
  
  
 INSTALLATION INSTRUCTIONS
 -------------------------
   The instructions for installation of the software are included in the
   installation guide.
  
  
 POST-INSTALLATION INSTRUCTIONS
 ------------------------------
  
  
   The post-instructions for installation of the software are included in
   the installation guide.
  
  
 INSTALLATION EXAMPLE
 ====================
  
   An installation example is included in the installation guide.

Routine Information:
====================

Routine Name:
  - LA46


Routine Checksum:

Routine Name:
  - LA7CHKF


Routine Checksum:

Routine Name:
  - LA7QRY


Routine Checksum:

Routine Name:
  - LA7QRY1


Routine Checksum:

Routine Name:
  - LA7SBCR


Routine Checksum:

Routine Name:
  - LA7SBCR1


Routine Checksum:

Routine Name:
  - LA7SBCR2


Routine Checksum:

Routine Name:
  - LA7SCE


Routine Checksum:

Routine Name:
  - LA7SM


Routine Checksum:

Routine Name:
  - LA7SM1


Routine Checksum:

Routine Name:
  - LA7SM2


Routine Checksum:

Routine Name:
  - LA7SMB


Routine Checksum:

Routine Name:
  - LA7SMP


Routine Checksum:

Routine Name:
  - LA7SMP0


Routine Checksum:

Routine Name:
  - LA7SMPXL


Routine Checksum:

Routine Name:
  - LA7SMU


Routine Checksum:

Routine Name:
  - LA7SMU1


Routine Checksum:

Routine Name:
  - LA7SMU2


Routine Checksum:

Routine Name:
  - LA7UIIN2


Routine Checksum:

Routine Name:
  - LA7UTILA


Routine Checksum:

Routine Name:
  - LA7VHL


Routine Checksum:

Routine Name:
  - LA7VHLU


Routine Checksum:

Routine Name:
  - LA7VHLU1


Routine Checksum:

Routine Name:
  - LA7VHLU2


Routine Checksum:

Routine Name:
  - LA7VHLU3


Routine Checksum:

Routine Name:
  - LA7VHLU4


Routine Checksum:

Routine Name:
  - LA7VHLU5


Routine Checksum:

Routine Name:
  - LA7VIN


Routine Checksum:

Routine Name:
  - LA7VIN1


Routine Checksum:

Routine Name:
  - LA7VIN2


Routine Checksum:

Routine Name:
  - LA7VIN3


Routine Checksum:

Routine Name:
  - LA7VIN4


Routine Checksum:

Routine Name:
  - LA7VIN5


Routine Checksum:

Routine Name:
  - LA7VIN5A


Routine Checksum:

Routine Name:
  - LA7VMSG


Routine Checksum:

Routine Name:
  - LA7VMSG1


Routine Checksum:

Routine Name:
  - LA7VOBR


Routine Checksum:

Routine Name:
  - LA7VOBX


Routine Checksum:

Routine Name:
  - LA7VOBX1


Routine Checksum:

Routine Name:
  - LA7VOBX2


Routine Checksum:

Routine Name:
  - LA7VOBX3


Routine Checksum:

Routine Name:
  - LA7VOBXA


Routine Checksum:

Routine Name:
  - LA7VORC


Routine Checksum:

Routine Name:
  - LA7VORM


Routine Checksum:

Routine Name:
  - LA7VORM1


Routine Checksum:

Routine Name:
  - LA7VORM2


Routine Checksum:

Routine Name:
  - LA7VORM3


Routine Checksum:

Routine Name:
  - LA7VORU


Routine Checksum:

Routine Name:
  - LA7VORU1


Routine Checksum:

Routine Name:
  - LA7VORU2


Routine Checksum:

Routine Name:
  - LA7VPID


Routine Checksum:

Routine Name:
  - LA7VSET


Routine Checksum:

Routine Name:
  - LA7VSET1


Routine Checksum:

Routine Name:
  - LA7VSTP


Routine Checksum:

Routine Name:
  - LA7VSTP1


Routine Checksum:

Routine Name:
  - LAGEN


Routine Checksum:

Routine Name:
  - LASET


Routine Checksum:

Routine Name:
  - LA7VOBRA


Routine Checksum:

Routine Name:
  - LA7QRY2


Routine Checksum:

Routine Name:
  - LA7SRR


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : MCCORMACK,JOHN                 Date Entered : SEP 29, 1998
Completed By: ELIJAH,VICKEY                 Date Completed: FEB 19, 2002
Released By : SCOTT,JEAN M                 Date Released : FEB 21, 2002
=============================================================================


Packman Mail Message:
=====================

No routines included

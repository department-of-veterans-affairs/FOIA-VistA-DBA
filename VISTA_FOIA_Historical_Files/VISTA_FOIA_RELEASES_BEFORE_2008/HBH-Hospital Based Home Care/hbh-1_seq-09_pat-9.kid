Released HBH*1*9 SEQ #9
Extracted from mail message
**KIDS**:HBH*1.0*9^

**INSTALL NAME**
HBH*1.0*9
"BLD",245,0)
HBH*1.0*9^HOSPITAL BASED HOME CARE^0^2980313^y
"BLD",245,1,0)
^^1^1^2980316^^^^
"BLD",245,1,1,0)
Refer to the patch for the patch description.
"BLD",245,4,0)
^9.64PA^634.2^4
"BLD",245,4,631.9,0)
631.9
"BLD",245,4,631.9,2,0)
^9.641^631.9^1
"BLD",245,4,631.9,2,631.9,0)
HBHC SYSTEM PARAMETERS  (File-top level)
"BLD",245,4,631.9,2,631.9,1,0)
^9.6411^2^1
"BLD",245,4,631.9,2,631.9,1,2,0)
PACKAGE STARTUP DATE
"BLD",245,4,631.9,222)
y^n^p^^^^n
"BLD",245,4,632,0)
632
"BLD",245,4,632,2,0)
^9.641^632^1
"BLD",245,4,632,2,632,0)
HBHC VISIT  (File-top level)
"BLD",245,4,632,2,632,1,0)
^9.6411^1^1
"BLD",245,4,632,2,632,1,1,0)
DATE
"BLD",245,4,632,222)
y^n^p^^^^n
"BLD",245,4,634.2,0)
634.2
"BLD",245,4,634.2,2,0)
^9.641^634.2^1
"BLD",245,4,634.2,2,634.2,0)
HBHC VISIT ERROR(S)  (File-top level)
"BLD",245,4,634.2,2,634.2,1,0)
^9.6411^5^1
"BLD",245,4,634.2,2,634.2,1,5,0)
VISIT DATE
"BLD",245,4,634.2,222)
y^n^p^^^^n
"BLD",245,4,634.6,0)
634.6
"BLD",245,4,634.6,2,0)
^9.641^634.6^1
"BLD",245,4,634.6,2,634.6,0)
HBHC TRANSMIT HISTORY  (File-top level)
"BLD",245,4,634.6,2,634.6,1,0)
^9.6411^1^1
"BLD",245,4,634.6,2,634.6,1,1,0)
TRANSMIT DATE
"BLD",245,4,634.6,222)
y^n^p^^^^n
"BLD",245,4,"APDD",631.9,631.9)

"BLD",245,4,"APDD",631.9,631.9,2)

"BLD",245,4,"APDD",632,632)

"BLD",245,4,"APDD",632,632,1)

"BLD",245,4,"APDD",634.2,634.2)

"BLD",245,4,"APDD",634.2,634.2,5)

"BLD",245,4,"APDD",634.6,634.6)

"BLD",245,4,"APDD",634.6,634.6,1)

"BLD",245,4,"B",631.9,631.9)

"BLD",245,4,"B",632,632)

"BLD",245,4,"B",634.2,634.2)

"BLD",245,4,"B",634.6,634.6)

"BLD",245,"ABPKG")
n
"BLD",245,"KRN",0)
^9.67PA^19^18
"BLD",245,"KRN",.4,0)
.4
"BLD",245,"KRN",.401,0)
.401
"BLD",245,"KRN",.402,0)
.402
"BLD",245,"KRN",.403,0)
.403
"BLD",245,"KRN",.5,0)
.5
"BLD",245,"KRN",.84,0)
.84
"BLD",245,"KRN",3.6,0)
3.6
"BLD",245,"KRN",3.8,0)
3.8
"BLD",245,"KRN",9.2,0)
9.2
"BLD",245,"KRN",9.8,0)
9.8
"BLD",245,"KRN",9.8,"NM",0)
^9.68A^9^9
"BLD",245,"KRN",9.8,"NM",1,0)
HBHCFILE^^0^B18370433
"BLD",245,"KRN",9.8,"NM",2,0)
HBHCRP2^^0^B27811756
"BLD",245,"KRN",9.8,"NM",3,0)
HBHCUTL1^^0^B26722690
"BLD",245,"KRN",9.8,"NM",4,0)
HBHCXMA^^0^B23602927
"BLD",245,"KRN",9.8,"NM",5,0)
HBHCXMD^^0^B21137795
"BLD",245,"KRN",9.8,"NM",6,0)
HBHCXMV^^0^B28146768
"BLD",245,"KRN",9.8,"NM",7,0)
HBHCR15A^^0^B16038380
"BLD",245,"KRN",9.8,"NM",8,0)
HBHCR15B^^0^B25163768
"BLD",245,"KRN",9.8,"NM",9,0)
HBHCENV^^0^B1031035
"BLD",245,"KRN",9.8,"NM","B","HBHCENV",9)

"BLD",245,"KRN",9.8,"NM","B","HBHCFILE",1)

"BLD",245,"KRN",9.8,"NM","B","HBHCR15A",7)

"BLD",245,"KRN",9.8,"NM","B","HBHCR15B",8)

"BLD",245,"KRN",9.8,"NM","B","HBHCRP2",2)

"BLD",245,"KRN",9.8,"NM","B","HBHCUTL1",3)

"BLD",245,"KRN",9.8,"NM","B","HBHCXMA",4)

"BLD",245,"KRN",9.8,"NM","B","HBHCXMD",5)

"BLD",245,"KRN",9.8,"NM","B","HBHCXMV",6)

"BLD",245,"KRN",19,0)
19
"BLD",245,"KRN",19.1,0)
19.1
"BLD",245,"KRN",101,0)
101
"BLD",245,"KRN",409.61,0)
409.61
"BLD",245,"KRN",771,0)
771
"BLD",245,"KRN",869.2,0)
869.2
"BLD",245,"KRN",870,0)
870
"BLD",245,"KRN",8994,0)
8994
"BLD",245,"KRN","B",.4,.4)

"BLD",245,"KRN","B",.401,.401)

"BLD",245,"KRN","B",.402,.402)

"BLD",245,"KRN","B",.403,.403)

"BLD",245,"KRN","B",.5,.5)

"BLD",245,"KRN","B",.84,.84)

"BLD",245,"KRN","B",3.6,3.6)

"BLD",245,"KRN","B",3.8,3.8)

"BLD",245,"KRN","B",9.2,9.2)

"BLD",245,"KRN","B",9.8,9.8)

"BLD",245,"KRN","B",19,19)

"BLD",245,"KRN","B",19.1,19.1)

"BLD",245,"KRN","B",101,101)

"BLD",245,"KRN","B",409.61,409.61)

"BLD",245,"KRN","B",771,771)

"BLD",245,"KRN","B",869.2,869.2)

"BLD",245,"KRN","B",870,870)

"BLD",245,"KRN","B",8994,8994)

"BLD",245,"PRE")
HBHCENV
"BLD",245,"QUES",0)
^9.62^^
"BLD",245,"REQB",0)
^9.611^^0
"FIA",631.9)
HBHC SYSTEM PARAMETERS
"FIA",631.9,0)
^HBHC(631.9,
"FIA",631.9,0,0)
631.9
"FIA",631.9,0,1)
y^n^p^^^^n
"FIA",631.9,0,10)

"FIA",631.9,0,11)

"FIA",631.9,0,"RLRO")

"FIA",631.9,0,"VR")
1.0^HBH
"FIA",631.9,631.9)
1
"FIA",631.9,631.9,2)

"FIA",632)
HBHC VISIT
"FIA",632,0)
^HBHC(632,
"FIA",632,0,0)
632IP
"FIA",632,0,1)
y^n^p^^^^n
"FIA",632,0,10)

"FIA",632,0,11)

"FIA",632,0,"RLRO")

"FIA",632,0,"VR")
1.0^HBH
"FIA",632,632)
1
"FIA",632,632,1)

"FIA",634.2)
HBHC VISIT ERROR(S)
"FIA",634.2,0)
^HBHC(634.2,
"FIA",634.2,0,0)
634.2P
"FIA",634.2,0,1)
y^n^p^^^^n
"FIA",634.2,0,10)

"FIA",634.2,0,11)

"FIA",634.2,0,"RLRO")

"FIA",634.2,0,"VR")
1.0^HBH
"FIA",634.2,634.2)
1
"FIA",634.2,634.2,5)

"FIA",634.6)
HBHC TRANSMIT HISTORY
"FIA",634.6,0)
^HBHC(634.6,
"FIA",634.6,0,0)
634.6
"FIA",634.6,0,1)
y^n^p^^^^n
"FIA",634.6,0,10)

"FIA",634.6,0,11)

"FIA",634.6,0,"RLRO")

"FIA",634.6,0,"VR")
1.0^HBH
"FIA",634.6,634.6)
1
"FIA",634.6,634.6,1)

"PKG",28,-1)
1^1
"PKG",28,0)
HOSPITAL BASED HOME CARE^HBHV^HBH v1.0 Patch 4 w/Inits
"PKG",28,22,0)
^9.49I^1^1
"PKG",28,22,1,0)
1.0^2931101^2941012
"PKG",28,22,1,"PAH",1,0)
9^2980313
"PKG",28,22,1,"PAH",1,1,0)
^^1^1^2980331
"PKG",28,22,1,"PAH",1,1,1,0)
Refer to the patch for the patch description.
"PRE")
HBHCENV
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
9
"RTN","HBHCENV")
0^9^B1031035
"RTN","HBHCENV",1,0)
HBHCENV ;Hines CIOFO/NCA - Enviroment Check for Patch HBH*1*9 ;3/20/98
"RTN","HBHCENV",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**9**;NOV 01, 1993
"RTN","HBHCENV",3,0)
EN1 ;Enviroment check routine
"RTN","HBHCENV",4,0)
 I +$$PATCH^XPDUTL("HBH*1.0*06")=0 D BMES^XPDUTL("Please install HBH*1.0*06. Installation Halted.") S XPDABORT=2
"RTN","HBHCENV",5,0)
 I +$$PATCH^XPDUTL("HBH*1.0*08")=0 D BMES^XPDUTL("Please install HBH*1.0*08.  Installation Halted.") S XPDABORT=2
"RTN","HBHCENV",6,0)
 Q
"RTN","HBHCFILE")
0^1^B18370433
"RTN","HBHCFILE",1,0)
HBHCFILE ; LR VAMC(IRMS)/MJT-HBHC populates ^HBHC(632) visit file, & ^HBHC(634), file for transmitting to Austin, calls ^HBHCCAN, ^HBHCAPPT, ^HBHCXMC, ^HBHCXMA, ^HBHCXMV, & ^HBHCXMD ;3/23/98  12:50
"RTN","HBHCFILE",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**2,5,6,8,9**;NOV 01, 1993
"RTN","HBHCFILE",3,0)
 I $P(^HBHC(631.9,1,0),U,5)="" W !!,"***  NOTICE:  Hospital Number is missing from System Parameter file (#631.9).",!,"Transmission file building CANNOT proceed without this information.  Contact"
"RTN","HBHCFILE",4,0)
 I $P(^HBHC(631.9,1,0),U,5)="" W !,"IRM to enter this information using FileMan.",! H 10 Q
"RTN","HBHCFILE",5,0)
 L +^HBHC(634.5,0):0 I '$T W *7,!!,"Another user has the pseudo SSN file locked." H 3  G EXIT
"RTN","HBHCFILE",6,0)
 I ($D(^HBHC(634.1,"B")))!($D(^HBHC(634.2,"B")))!($D(^HBHC(634.3,"B")))!($D(^HBHC(634.5,"B"))) W *7,!!,"Records containing errors exist and must be corrected before transmit",!,"file can be created or updated.",!! H 3 Q
"RTN","HBHCFILE",7,0)
EN ; Entry point
"RTN","HBHCFILE",8,0)
 W !!,"This option builds the file for transmission to Austin.  Do you wish to",!,"continue" S %=2 D YN^DICN
"RTN","HBHCFILE",9,0)
 I %=0 W !!,"A 'Yes' response will add records to the file.  A 'No' response will return",!,"to the menu without updating the file." G EN
"RTN","HBHCFILE",10,0)
 G:%'=1 EXIT
"RTN","HBHCFILE",11,0)
MONTH ; Calculate default month value & last date to be included for transmission
"RTN","HBHCFILE",12,0)
 S X="T" D ^%DT S X1=$P(Y,"."),X2=-28 D C^%DTC S DIR("B")=+$E(X,4,5)
"RTN","HBHCFILE",13,0)
 S DIR(0)="SX^1:January;2:February;3:March;4:April;5:May;6:June;7:July;8:August;9:September;10:October;11:November;12:December;"
"RTN","HBHCFILE",14,0)
 S DIR("A")="Month for which data is to be transmitted"
"RTN","HBHCFILE",15,0)
 S DIR("?")="Month entered controls the ending date for data transmitted to Austin.  (e.g.  An August 5 transmission with July selected as month, will include data thru July 31.)"
"RTN","HBHCFILE",16,0)
 D ^DIR Q:$D(DIRUT)  S HBHCDIR=Y
"RTN","HBHCFILE",17,0)
 S X="T" D ^%DT S HBHCYEAR=$S(HBHCDIR>(+$E(Y,4,5)):($E(Y,1,3))-1,1:$E(Y,1,3))
"RTN","HBHCFILE",18,0)
 S Y=1700+HBHCYEAR,HBHCLEAP=$S(Y#400=0:1,Y#4=0&'(Y#100=0):1,1:0)
"RTN","HBHCFILE",19,0)
 S HBHCLSDT=HBHCYEAR_$S(HBHCDIR<10:"0"_HBHCDIR,1:HBHCDIR)_$S("^4^6^9^11^"[HBHCDIR:30,((HBHCDIR=2)&('HBHCLEAP)):28,((HBHCDIR=2)&(HBHCLEAP)):29,1:31)_.9999
"RTN","HBHCFILE",20,0)
 ; Edit Number of Visit Days to Scan system parameter
"RTN","HBHCFILE",21,0)
 W !
"RTN","HBHCFILE",22,0)
 K DIR S DIR(0)="631.9,3",DIR("A")="Number of Visit Days to Scan",DIR("B")=$P($G(^HBHC(631.9,1,0)),U,4)
"RTN","HBHCFILE",23,0)
 S DIR("?",1)="Enter number of days to be included when the system creates records in the",DIR("?",2)="HBHC Visit File from the appointment data entered via the Appointment",DIR("?")="Management  [HBHC APPOINTMENT]  option."
"RTN","HBHCFILE",24,0)
 D ^DIR
"RTN","HBHCFILE",25,0)
 G:($D(DTOUT))!($D(DUOUT)) EXIT
"RTN","HBHCFILE",26,0)
 I (Y'=DIR("B"))&(Y?1.3N) K DIE S HBHCDAYS=Y,DIE="^HBHC(631.9,",DA=1,DR="3///^S X=HBHCDAYS" D ^DIE
"RTN","HBHCFILE",27,0)
 W !!,"Building transmission file..."
"RTN","HBHCFILE",28,0)
 D WAIT^DICD
"RTN","HBHCFILE",29,0)
CLEANUP ; Cleanup ^HBHC(634) if new transmit cycle => all records flagged as transmitted
"RTN","HBHCFILE",30,0)
 I ('$D(^HBHC(631,"AE","F")))&('$D(^HBHC(631,"AF","F")))&('$D(^HBHC(632,"AC","F"))) K ^HBHC(634) S ^HBHC(634,0)="HBHC TRANSMIT^634"
"RTN","HBHCFILE",31,0)
PLOOP ; Loop thru ^HBHC(632,"C" Appointment Date cross-ref & flag as 'P' (Record Prior to Package Startup Date) in Form 4 Transmit Status field if date < Package Startup Date
"RTN","HBHCFILE",32,0)
 S X1=$P(^HBHC(631.9,1,0),U,3),X2=-1 D C^%DTC S HBHCSTDT=X_.9999
"RTN","HBHCFILE",33,0)
 S HBHCAPDT=0,DIE="^HBHC(632,",DR="7///P"
"RTN","HBHCFILE",34,0)
 F  S HBHCAPDT=$O(^HBHC(632,"C",HBHCAPDT)) Q:(HBHCAPDT'>0)!(HBHCAPDT>HBHCSTDT)  S DA="" F  S DA=$O(^HBHC(632,"C",HBHCAPDT,DA)) Q:DA'>0  D:'$D(^HBHC(632,"AC","P",DA)) ^DIE
"RTN","HBHCFILE",35,0)
POP ; Populate ^HBHC(634) or ^HBHC(634.1/634.2/634.3/634.5 Error files
"RTN","HBHCFILE",36,0)
 D ^HBHCCAN,^HBHCAPPT,^HBHCXMC,^HBHCXMA,^HBHCXMV,^HBHCXMD
"RTN","HBHCFILE",37,0)
 I ('$D(^HBHC(634.1,"B")))&('$D(^HBHC(634.2,"B")))&('$D(^HBHC(634.3,"B")))&('$D(^HBHC(634.5,"B"))) W *7,!!,"No records containing errors were found.",!! H 3
"RTN","HBHCFILE",38,0)
EXIT ; Exit module
"RTN","HBHCFILE",39,0)
 L -^HBHC(634.5,0)
"RTN","HBHCFILE",40,0)
 K DA,DIE,DIR,DIRUT,DR,DTOUT,DUOUT,HBHCAPDT,HBHCDAYS,HBHCDIR,HBHCLEAP,HBHCLSDT,HBHCSTDT,HBHCYEAR,%,X,X1,X2,Y
"RTN","HBHCFILE",41,0)
 Q
"RTN","HBHCR15A")
0^7^B16038380
"RTN","HBHCR15A",1,0)
HBHCR15A ;LR VAMC(IRMS)/MJT-HBHC rpt using file 634.6, user selects date/forms from last 12 transmit batchs, fields: form#, pat name, last 4, form date, + action on form 3, prov #, & prov name on visits, & Adm or D/C on form 6 ;2/5/98  15:23
"RTN","HBHCR15A",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,9**;NOV 01, 1993
"RTN","HBHCR15A",3,0)
 ; Calls HBHCR15B
"RTN","HBHCR15A",4,0)
 ; Report can also be generated by Transmit File option [HBHCXMT] if default printer is defined in sys param (631.9).  If no printer defined, no report.  User selects forms to include, date is transmit date
"RTN","HBHCR15A",5,0)
 ; HBHCXMT calls entry points:  PROMPT2^HBHCR15B & DQ^HBHCR15A
"RTN","HBHCR15A",6,0)
 I '$D(^HBHC(634.6,"C")) W *7,!,"No transmit history data on file." H 3 Q
"RTN","HBHCR15A",7,0)
 I $P(^HBHC(631.9,1,0),U,6)]"" W *7,!,"Transmission in progress; history data being updated.  Please try again later." H 3 Q
"RTN","HBHCR15A",8,0)
 D PROMPT1^HBHCR15B
"RTN","HBHCR15A",9,0)
 G:$D(DIRUT) EXIT
"RTN","HBHCR15A",10,0)
 S %ZIS="Q" D ^%ZIS G:POP EXIT
"RTN","HBHCR15A",11,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCR15A",ZTDESC="HBPC Transmit Report",ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCR15A",12,0)
DQ ; De-queue
"RTN","HBHCR15A",13,0)
 U IO
"RTN","HBHCR15A",14,0)
 S (HBHCPAGE,HBHCCNTA,HBHCCNTR,HBHCCNT4,HBHCCNT5,HBHCCNT6)=0,$P(HBHCY,"-",81)="",HBHCCOLM=(80-(30+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCR15A",15,0)
 S HBHCHDR=$S(HBHCDIR="S":"W ?36,""Summary""",1:"W ?33,""Last"",!?4,""#"",?9,""Patient Name"",?33,""Four"",?41,""Date""")
"RTN","HBHCR15A",16,0)
LOOP ; Loop thru HBHC(634.6,"C" (transmit date) cross-ref to build report
"RTN","HBHCR15A",17,0)
 S HBHCIEN=0 F  S HBHCIEN=$O(^HBHC(634.6,"C",HBHCXMDT,HBHCIEN)) Q:HBHCIEN'>0  S HBHCINFO=$P(^HBHC(634.6,HBHCIEN,0),U) D PROCESS
"RTN","HBHCR15A",18,0)
 D END^HBHCR15B
"RTN","HBHCR15A",19,0)
EXIT ; Exit module
"RTN","HBHCR15A",20,0)
 D ^%ZISC
"RTN","HBHCR15A",21,0)
 K DIR,DIRUT,HBHC,HBHCACTN,HBHCCC,HBHCCNTA,HBHCCNTR,HBHCCNT4,HBHCCNT5,HBHCCNT6,HBHCCOLM,HBHCDATE,HBHCDFN,HBHCDIR,HBHCDSDT,HBHCFLG,HBHCFORM,HBHCHEAD,HBHCHDR,HBHCI,HBHCIEN,HBHCINFO,HBHCIOP,HBHCLST4,HBHCNAME,HBHCPAGE,HBHCPIEN
"RTN","HBHCR15A",22,0)
 K HBHCPRV,HBHCPRVN,HBHCTDY,HBHCTYPE,HBHCXMDT,HBHCY,HBHCY0,HBHCZ,X,Y,TMP,^TMP("HBHC",$J)
"RTN","HBHCR15A",23,0)
 Q
"RTN","HBHCR15A",24,0)
PROCESS ; Process records
"RTN","HBHCR15A",25,0)
 S (HBHCACTN,HBHCPRV)="Z",(HBHCPRVN,HBHCTYPE)=""
"RTN","HBHCR15A",26,0)
 D:($E(HBHCINFO)=3)&((HBHCDIR=3)!(HBHCDIR="A")!(HBHCDIR="S")) FORM3
"RTN","HBHCR15A",27,0)
 D:($E(HBHCINFO)=4)&((HBHCDIR=4)!(HBHCDIR="A")!(HBHCDIR="S")) FORM4
"RTN","HBHCR15A",28,0)
 D:($E(HBHCINFO)=5)&((HBHCDIR=5)!(HBHCDIR="A")!(HBHCDIR="S")) FORM5
"RTN","HBHCR15A",29,0)
 D:($E(HBHCINFO)=6)&((HBHCDIR=6)!(HBHCDIR="A")!(HBHCDIR="S")) FORM6
"RTN","HBHCR15A",30,0)
 Q
"RTN","HBHCR15A",31,0)
FORM3 ; Process Form 3 (Admission) records
"RTN","HBHCR15A",32,0)
 S HBHCDATE=$E(HBHCINFO,18,25)
"RTN","HBHCR15A",33,0)
 S:$E(HBHCINFO,55)=1 HBHCCNTA=HBHCCNTA+1,HBHCACTN="Admit"
"RTN","HBHCR15A",34,0)
 S:$E(HBHCINFO,55)=2 HBHCCNTR=HBHCCNTR+1,HBHCACTN="Reject"
"RTN","HBHCR15A",35,0)
 Q:HBHCDIR="S"
"RTN","HBHCR15A",36,0)
 S HBHCFORM="A"
"RTN","HBHCR15A",37,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^DPT("SSN",$E(HBHCINFO,9,17),HBHCDFN)) Q:HBHCDFN=""  S HBHCNAME=$E($P(^DPT(HBHCDFN,0),U),1,20)
"RTN","HBHCR15A",38,0)
 S HBHCLST4=$E(HBHCINFO,14,17)
"RTN","HBHCR15A",39,0)
 D SET
"RTN","HBHCR15A",40,0)
 Q
"RTN","HBHCR15A",41,0)
FORM4 ; Process Form 4 (Visit) records
"RTN","HBHCR15A",42,0)
 S HBHCCNT4=HBHCCNT4+1
"RTN","HBHCR15A",43,0)
 Q:HBHCDIR="S"
"RTN","HBHCR15A",44,0)
 S HBHCFORM="V"
"RTN","HBHCR15A",45,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^DPT("SSN",$E(HBHCINFO,9,17),HBHCDFN)) Q:HBHCDFN=""  S HBHCNAME=$E($P(^DPT(HBHCDFN,0),U),1,20)
"RTN","HBHCR15A",46,0)
 S HBHCLST4=$E(HBHCINFO,14,17)
"RTN","HBHCR15A",47,0)
 S HBHCDATE=$E(HBHCINFO,18,25)
"RTN","HBHCR15A",48,0)
 S HBHCPRVN=+$E(HBHCINFO,30,33)
"RTN","HBHCR15A",49,0)
 S (HBHCFLG,HBHCPIEN)=0 F  S HBHCPIEN=$O(^HBHC(631.4,"B",HBHCPRVN,HBHCPIEN)) Q:HBHCPIEN'>0  D NAME
"RTN","HBHCR15A",50,0)
 D SET
"RTN","HBHCR15A",51,0)
 Q
"RTN","HBHCR15A",52,0)
NAME ; Form 4 Name
"RTN","HBHCR15A",53,0)
 I HBHCFLG=1 S HBHCPRV="**  Duplicate Prov #" Q
"RTN","HBHCR15A",54,0)
 S HBHCFLG=1,HBHCPRV=$E($P(^VA(200,$P(^HBHC(631.4,HBHCPIEN,0),U,2),0),U),1,20)
"RTN","HBHCR15A",55,0)
 Q
"RTN","HBHCR15A",56,0)
FORM5 ; Process Form 5 (Discharge) records
"RTN","HBHCR15A",57,0)
 S HBHCCNT5=HBHCCNT5+1
"RTN","HBHCR15A",58,0)
 Q:HBHCDIR="S"
"RTN","HBHCR15A",59,0)
 S HBHCFORM="D"
"RTN","HBHCR15A",60,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^DPT("SSN",$E(HBHCINFO,9,17),HBHCDFN)) Q:HBHCDFN=""  S HBHCNAME=$E($P(^DPT(HBHCDFN,0),U),1,20)
"RTN","HBHCR15A",61,0)
 S HBHCLST4=$E(HBHCINFO,14,17)
"RTN","HBHCR15A",62,0)
 S HBHCDATE=$E(HBHCINFO,18,25)
"RTN","HBHCR15A",63,0)
 D SET
"RTN","HBHCR15A",64,0)
 Q
"RTN","HBHCR15A",65,0)
FORM6 ; Process Form 6 (Correction) records
"RTN","HBHCR15A",66,0)
 S HBHCCNT6=HBHCCNT6+1
"RTN","HBHCR15A",67,0)
 Q:HBHCDIR="S"
"RTN","HBHCR15A",68,0)
 S HBHCFORM=6
"RTN","HBHCR15A",69,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^DPT("SSN",$E(HBHCINFO,9,17),HBHCDFN)) Q:HBHCDFN=""  S HBHCNAME=$E($P(^DPT(HBHCDFN,0),U),1,20)
"RTN","HBHCR15A",70,0)
 S HBHCLST4=$E(HBHCINFO,14,17)
"RTN","HBHCR15A",71,0)
 S HBHCDSDT=$TR($E(HBHCINFO,56,63)," ","")
"RTN","HBHCR15A",72,0)
 ; Use Discharge date if exists, otherwise use Admission date
"RTN","HBHCR15A",73,0)
 S HBHCDATE=$S(HBHCDSDT]"":HBHCDSDT,1:$E(HBHCINFO,18,25))
"RTN","HBHCR15A",74,0)
 S HBHCTYPE=$S(HBHCDSDT]"":"Discharge",1:"Evaluation/Admission")
"RTN","HBHCR15A",75,0)
 D SET
"RTN","HBHCR15A",76,0)
 Q
"RTN","HBHCR15A",77,0)
SET ; Set TMP node
"RTN","HBHCR15A",78,0)
 ; By design, records are processed/printed in the following order by form number:  6, 3 (A), 5 (D), 4 (V)
"RTN","HBHCR15A",79,0)
 S ^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4,HBHCDATE,HBHCPRV)=HBHCPRVN_U_HBHCTYPE
"RTN","HBHCR15A",80,0)
 Q
"RTN","HBHCR15B")
0^8^B25163768
"RTN","HBHCR15B",1,0)
HBHCR15B ;LR VAMC(IRMS)/MJT-HBHC rpt using file 634.6, called from HBHCR15A, entry points: PROMPT1 & END, & from HBHCXMT, entry point: PROMPT2 ;2/5/98  15:24
"RTN","HBHCR15B",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**6,8,9**;NOV 01, 1993
"RTN","HBHCR15B",3,0)
PROMPT1 ; Prompt user for which transmit date from last 12 batchs to include, default is Most Recent; uses transmit date cross-ref to obtain batch dates 
"RTN","HBHCR15B",4,0)
 S HBHCDATE="" F  S HBHCDATE=$O(^HBHC(634.6,"C",HBHCDATE)) Q:HBHCDATE=""  S HBHC(-HBHCDATE)=""
"RTN","HBHCR15B",5,0)
 S HBHCDATE="" F HBHCI=1:1 S HBHCDATE=$O(HBHC(HBHCDATE)) Q:(HBHCDATE="")!(HBHCI>12)  S Y=$E(HBHCDATE,2,9) D DD^%DT S TMP(HBHCI)=$E(HBHCDATE,2,9) W !,$J(HBHCI,2),".",?6,Y
"RTN","HBHCR15B",6,0)
 W !
"RTN","HBHCR15B",7,0)
 K DIR,DIRUT
"RTN","HBHCR15B",8,0)
 S DIR(0)="N^",DIR("A")="Select Transmit Date",DIR("B")=1,DIR("?")="Select transmit date by number.  Press return for 'Most Recent' transmit date"
"RTN","HBHCR15B",9,0)
 D ^DIR Q:$D(DIRUT)
"RTN","HBHCR15B",10,0)
 I '$D(TMP(Y)) W *7,!!,"Please select number from list.",! H 1 G PROMPT1
"RTN","HBHCR15B",11,0)
 S HBHCXMDT=TMP(Y)
"RTN","HBHCR15B",12,0)
PROMPT2 ; Prompt user for which forms to include, default is Summary
"RTN","HBHCR15B",13,0)
 S HBHCCC=0
"RTN","HBHCR15B",14,0)
 D TODAY^HBHCUTL
"RTN","HBHCR15B",15,0)
 S:'$D(HBHCXMDT) HBHCXMDT=DT
"RTN","HBHCR15B",16,0)
 S HBHCIOP=$P(^%ZIS(1,$P(^HBHC(631.9,1,0),U,7),0),U)
"RTN","HBHCR15B",17,0)
 K DIR,DIRUT
"RTN","HBHCR15B",18,0)
 S DIR(0)="S^3:Admission;4:Visit;5:Discharge;6:Correction;A:All;S:Summary;",DIR("A")="Select Forms to Include",DIR("B")="Summary",DIR("?")="Select form type to be included in report.  Press return for 'Summary'."
"RTN","HBHCR15B",19,0)
 D ^DIR Q:$D(DIRUT)
"RTN","HBHCR15B",20,0)
 S HBHCDIR=Y,HBHCY0=Y(0)
"RTN","HBHCR15B",21,0)
 S Y=HBHCXMDT D DD^%DT S HBHCHEAD=$S(HBHCDIR="S":Y_" Transmit, "_HBHCY0,1:Y_" Transmit, "_HBHCY0_" Forms,")
"RTN","HBHCR15B",22,0)
 Q
"RTN","HBHCR15B",23,0)
END ; End of report processing
"RTN","HBHCR15B",24,0)
 D:IO'=IO(0)!($D(IO("S"))) HDRPAGE^HBHCUTL
"RTN","HBHCR15B",25,0)
 I '$D(IO("S")),IO=IO(0) S HBHCCC=HBHCCC+1 W @IOF D HDRPAGE^HBHCUTL
"RTN","HBHCR15B",26,0)
 D:HBHCDIR'="S" PRTLOOP
"RTN","HBHCR15B",27,0)
 I HBHCDIR="A" S HBHCHDR="W ?36,""Summary""" W @IOF D HDRPAGE^HBHCUTL
"RTN","HBHCR15B",28,0)
 W:(HBHCDIR'="A")&(HBHCDIR'="S") !
"RTN","HBHCR15B",29,0)
 W:(HBHCDIR=3)!(HBHCDIR="A")!(HBHCDIR="S") !,"Admit Eval/Adm Form 3 Total:",?32,$J(HBHCCNTA,5),!,"Reject Eval/Adm Form 3 Total:",?32,$J(HBHCCNTR,5)
"RTN","HBHCR15B",30,0)
 W:HBHCDIR=3 !?32,"-----",!,"All Eval/Adm Forms Total:",?31,$J(HBHCCNTA+HBHCCNTR,6),!
"RTN","HBHCR15B",31,0)
 W:(HBHCDIR=4)!(HBHCDIR="A")!(HBHCDIR="S") !,"Visit Form 4 Total:",?32,$J(HBHCCNT4,5)
"RTN","HBHCR15B",32,0)
 W:(HBHCDIR=5)!(HBHCDIR="A")!(HBHCDIR="S") !,"Discharge Form 5 Total:",?32,$J(HBHCCNT5,5)
"RTN","HBHCR15B",33,0)
 W:(HBHCDIR=6)!(HBHCDIR="A")!(HBHCDIR="S") !,"Correction Form 6 Total:",?32,$J(HBHCCNT6,5)
"RTN","HBHCR15B",34,0)
 W:(HBHCDIR="A")!(HBHCDIR="S") !?32,"-----",!,"All Forms Total:",?31,$J(HBHCCNTA+HBHCCNTR+HBHCCNT4+HBHCCNT5+HBHCCNT6,6),!
"RTN","HBHCR15B",35,0)
 D ENDRPT^HBHCUTL1
"RTN","HBHCR15B",36,0)
 Q
"RTN","HBHCR15B",37,0)
PRTLOOP ; Print loop
"RTN","HBHCR15B",38,0)
 S HBHCFORM="" F  S HBHCFORM=$O(^TMP("HBHC",$J,HBHCFORM)) Q:HBHCFORM=""  D HEADER,PRTLOOP2,SUB
"RTN","HBHCR15B",39,0)
 Q
"RTN","HBHCR15B",40,0)
PRTLOOP2 ; Print loop continued
"RTN","HBHCR15B",41,0)
 S HBHCACTN="" F  S HBHCACTN=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN)) Q:HBHCACTN=""  S HBHCNAME="" F  S HBHCNAME=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME)) Q:HBHCNAME=""  D PRTLOOP3
"RTN","HBHCR15B",42,0)
 Q
"RTN","HBHCR15B",43,0)
PRTLOOP3 ; Print loop continued (again)
"RTN","HBHCR15B",44,0)
 S HBHCLST4=0 F  S HBHCLST4=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4)) Q:HBHCLST4'>0  S HBHCDATE="" F  S HBHCDATE=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4,HBHCDATE)) Q:HBHCDATE=""  D PRTLOOP4
"RTN","HBHCR15B",45,0)
 Q
"RTN","HBHCR15B",46,0)
PRTLOOP4 ; Print loop continued (again & again)
"RTN","HBHCR15B",47,0)
 S HBHCPRV="" F  S HBHCPRV=$O(^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4,HBHCDATE,HBHCPRV)) Q:HBHCPRV=""  D PRINT
"RTN","HBHCR15B",48,0)
 Q
"RTN","HBHCR15B",49,0)
PRINT ; Print report
"RTN","HBHCR15B",50,0)
 S HBHCINFO=^TMP("HBHC",$J,HBHCFORM,HBHCACTN,HBHCNAME,HBHCLST4,HBHCDATE,HBHCPRV)
"RTN","HBHCR15B",51,0)
 I ($D(ZTRTN)!(HBHCCC=0))&((IOSL-$Y)<10) W:HBHCPAGE>0 @IOF D HDRPAGE^HBHCUTL,HEADER
"RTN","HBHCR15B",52,0)
 W !?4,$S(HBHCFORM="A":3,HBHCFORM="V":4,HBHCFORM="D":5,1:6),?9,HBHCNAME,?33,HBHCLST4,?41,$E(HBHCDATE,1,2),"-",$E(HBHCDATE,3,4),"-",$E(HBHCDATE,7,8)
"RTN","HBHCR15B",53,0)
 W ?53,$S(HBHCFORM=6:$P(HBHCINFO,U,2),HBHCFORM="A":HBHCACTN,HBHCFORM="V":$P(HBHCINFO,U),1:"") W:HBHCFORM="V" ?60,HBHCPRV
"RTN","HBHCR15B",54,0)
 Q
"RTN","HBHCR15B",55,0)
SUB ; Sub-total module
"RTN","HBHCR15B",56,0)
 W:(HBHCDIR="A")&(HBHCFORM=6) !!?4,"Correction Form 6 Total:",?37,$J(HBHCCNT6,5),!,HBHCY
"RTN","HBHCR15B",57,0)
 W:(HBHCDIR="A")&(HBHCFORM="A") !!?4,"Admit Eval/Adm Form 3 Total:",?37,$J(HBHCCNTA,5),!?4,"Reject Eval/Adm Form 3 Total:",?37,$J(HBHCCNTR,5),!?37,"-----",!?4,"All Eval/Adm Forms Total:",?36,$J(HBHCCNTA+HBHCCNTR,6),!,HBHCY
"RTN","HBHCR15B",58,0)
 W:(HBHCDIR="A")&(HBHCFORM="D") !!?4,"Discharge Form 5 Total:",?37,$J(HBHCCNT5,5),!,HBHCY
"RTN","HBHCR15B",59,0)
 W:(HBHCDIR="A")&(HBHCFORM="V") !!?4,"Visit Form 4 Total:",?32,$J(HBHCCNT4,5),!,HBHCY
"RTN","HBHCR15B",60,0)
 Q
"RTN","HBHCR15B",61,0)
HEADER ; Sub-header module
"RTN","HBHCR15B",62,0)
 W !,$S(HBHCFORM=6:"Correction Form 6",HBHCFORM="A":"Evaluation/Admission Form 3",HBHCFORM="D":"Discharge Form 5",1:"Visit Form 4")_" Records",?53,$S(HBHCFORM=6:"Type",HBHCFORM="A":"Action",HBHCFORM="V":"Provider",1:""),!
"RTN","HBHCR15B",63,0)
 Q
"RTN","HBHCRP2")
0^2^B27811756
"RTN","HBHCRP2",1,0)
HBHCRP2 ; LR VAMC(IRMS)/MJT-HBHC report on file 631, individual patient evaluation/admission data, includes all fields, plus Case Manager ;2/5/98  15:18
"RTN","HBHCRP2",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**1,2,5,6,9**;NOV 01, 1993
"RTN","HBHCRP2",3,0)
PROMPT ; Prompt user for patient name
"RTN","HBHCRP2",4,0)
 K DIC S DIC="^HBHC(631,",DIC(0)="AEMQZ" D ^DIC
"RTN","HBHCRP2",5,0)
 G:Y=-1 EXIT
"RTN","HBHCRP2",6,0)
 S HBHCDFN=+Y,HBHCY0=Y(0),%ZIS="Q" K IOP,ZTIO,ZTSAVE D ^%ZIS G:POP EXIT
"RTN","HBHCRP2",7,0)
 I $D(IO("Q")) S ZTRTN="DQ^HBHCRP2",ZTDESC="HBPC Patient Evaluation/Admission Data Report",ZTSAVE("HBHC*")="" D ^%ZTLOAD G EXIT
"RTN","HBHCRP2",8,0)
DQ ; De-queue
"RTN","HBHCRP2",9,0)
 U IO
"RTN","HBHCRP2",10,0)
 S $P(HBHCY,"-",81)="",HBHCHEAD="Patient Evaluation/Admission Data",HBHCCOLM=(80-(20+$L(HBHCHEAD))\2) S:HBHCCOLM'>0 HBHCCOLM=1
"RTN","HBHCRP2",11,0)
 D TODAY^HBHCUTL
"RTN","HBHCRP2",12,0)
 W ?HBHCCOLM,">>> HBPC ",HBHCHEAD," Report <<<" W !!,"Run Date: ",HBHCTDY,!!,HBHCZ
"RTN","HBHCRP2",13,0)
PROCESS ; Process record
"RTN","HBHCRP2",14,0)
 S HBHCDPT0=^DPT(+(HBHCY0),0),HBHCNOD1=$G(^HBHC(631,HBHCDFN,1))
"RTN","HBHCRP2",15,0)
 W !,"Patient Name:  ",$P(HBHCDPT0,U),?46,"Last Four:",?58,$E($P(HBHCDPT0,U,9),6,9),!,HBHCZ
"RTN","HBHCRP2",16,0)
 W !," 1.  Hospital Number:",?29,$J($S($P(^HBHC(631.9,1,0),U,5)]"":$E($P($G(^DIC(4,$P(^HBHC(631.9,1,0),U,5),99)),U),1,7),1:""),7)
"RTN","HBHCRP2",17,0)
 W ?38,"|",?41,"20.  Primary Diagnosis @ Adm:",?74,$J($S($P(HBHCY0,U,19)]"":$P(^ICD9($P(HBHCY0,U,19),0),U),1:""),6),!,HBHCY
"RTN","HBHCRP2",18,0)
 W !," 2.  Date:",?28,$S($P(HBHCY0,U,18)]"":$E($P(HBHCY0,U,18),4,5)_"-"_$E($P(HBHCY0,U,18),6,7)_"-"_$E($P(HBHCY0,U,18),2,3),$P(HBHCY0,U,2)]"":$E($P(HBHCY0,U,2),4,5)_"-"_$E($P(HBHCY0,U,2),6,7)_"-"_$E($P(HBHCY0,U,2),2,3),1:"")
"RTN","HBHCRP2",19,0)
 W ?38,"|",?41,"21.  Secondary Diagnoses @ Adm:" I HBHCNOD1]"" W:$P(HBHCNOD1,U,14)]"" !?38,"|",?46,$P(HBHCNOD1,U,14)
"RTN","HBHCRP2",20,0)
 W !,HBHCY
"RTN","HBHCRP2",21,0)
 W !," 3.  State Code:",?34,$S($P(HBHCY0,U,3)]"":$P(^DIC(5,(+^HBHC(631.8,($P(HBHCY0,U,3)),0)),0),U,3),1:""),?38,"|",?41,"22.  Vision @ Admission:",?79,$P(HBHCY0,U,20),!,HBHCY
"RTN","HBHCRP2",22,0)
 S HBHCCNTY="" S:(($P(HBHCY0,U,3)]"")&($P(HBHCY0,U,4)]"")) HBHCCNTY=$P($G(^DIC(5,(+^HBHC(631.8,($P(HBHCY0,U,3)),0)),1,$P(HBHCY0,U,4),0)),U,3)
"RTN","HBHCRP2",23,0)
 W !," 4.  County Code:",?33,HBHCCNTY,?38,"|",?46,"Hearing @ Admission:",?79,$P(HBHCY0,U,21),!,HBHCY
"RTN","HBHCRP2",24,0)
 W !," 5.  ZIP Code:",?26,$J($E($P(HBHCY0,U,5),1,5)_$S($E($P(HBHCY0,U,5),6,9)]"":"-"_$E($P(HBHCY0,U,5),6,9),1:""),10),?38,"|",?41,"23.  Expressive Communication @ Adm:",?79,$P(HBHCY0,U,22),!,HBHCY
"RTN","HBHCRP2",25,0)
 W !," 6.  Eligibility @ Evaluation:",?34,$P(HBHCY0,U,6),?38,"|",?41,"24.  Receptive Communication @ Adm:",?79,$P(HBHCY0,U,23),!,HBHCY
"RTN","HBHCRP2",26,0)
 W !," 7.  Birth Year:",?32,$S($P(HBHCDPT0,U,3):1700+$E($P(HBHCDPT0,U,3),1,3),1:""),?38,"|",?41,"25.  Bathing @ Admission:",?79,$P(HBHCY0,U,24),!,HBHCY
"RTN","HBHCRP2",27,0)
 W !," 8.  Period of Service:",?34,$S($P(HBHCY0,U,8)]"":$P($G(^HBHC(631.7,$P(HBHCY0,U,8),0)),U),1:""),?38,"|",?46,"Dressing @ Admission:",?79,$P(HBHCY0,U,25),!,HBHCY
"RTN","HBHCRP2",28,0)
 W !," 9.  Sex:",?35,$S($P(HBHCDPT0,U,2)="M":1,1:2),?38,"|",?46,"Toilet Usage @ Admission:",?79,$P(HBHCY0,U,26),!,HBHCY
"RTN","HBHCRP2",29,0)
 S HBHCRC=$S($P(HBHCDPT0,U,6)]"":$P(^DIC(10,$P(HBHCDPT0,U,6),0),U,2),1:"")
"RTN","HBHCRP2",30,0)
 W !,"10.  Race:",?35,$S(HBHCRC=6:1,HBHCRC=4:2,(HBHCRC=1)!(HBHCRC=2):3,HBHCRC=3:4,HBHCRC=5:5,1:9),?38,"|",?46,"Transferring @ Admission:",?79,$P(HBHCY0,U,27),!,HBHCY
"RTN","HBHCRP2",31,0)
 W !,"11.  Marital Status @ Evaluation:",?35,$P(HBHCY0,U,11),?38,"|",?46,"Eating @ Admission:",?79,$P(HBHCY0,U,28),!,HBHCY
"RTN","HBHCRP2",32,0)
 W !,"12.  Living Arrangements @ Eval:",?35,$P(HBHCY0,U,12),?38,"|",?46,"Walking @ Admission:",?79,$P(HBHCY0,U,29),!,HBHCY
"RTN","HBHCRP2",33,0)
 W !,"13.  Last Agency Providing Care:",?35,$P(HBHCY0,U,13),?38,"|",?41,"26.  Bowel Continence @ Admission:",?79,$P(HBHCY0,U,30),!,HBHCY
"RTN","HBHCRP2",34,0)
 W !,"14.  Type of Last Care Agency:",?35,$P(HBHCY0,U,14),?38,"|",?46,"Bladder Continence @ Admission:",?79,$P(HBHCY0,U,31),!,HBHCY
"RTN","HBHCRP2",35,0)
 W !,"15.  Referred While Inpatient:",?35,$P(HBHCNOD1,U,29),?38,"|",?41,"27.  Mobility @ Admission:",?79,$P(HBHCY0,U,32),!,HBHCY
"RTN","HBHCRP2",36,0)
 W !,"16.  Admit/Reject Action:",?35,$P(HBHCY0,U,15),?38,"|",?41,"28.  Adaptive Tasks @ Admission:",?79,$P(HBHCY0,U,33),!,HBHCY
"RTN","HBHCRP2",37,0)
 W !,"17.  Reject/Withdraw Reason:",?34,$S($P(HBHCY0,U,16)]"":$P(^HBHC(631.1,$P(HBHCY0,U,16),0),U),1:""),?38,"|",?41,"29.  Behavior Problems @ Admission:",?79,$P(HBHCY0,U,34),!,HBHCY
"RTN","HBHCRP2",38,0)
 W !,"18.  Reject/Withdraw Disposition:",?35,$P(HBHCY0,U,17),?38,"|",?41,"30.  Disorientation @ Admission:",?79,$P(HBHCY0,U,35),!,HBHCY
"RTN","HBHCRP2",39,0)
 W !,"19.  SSN:",?25,$E($P(HBHCDPT0,U,9),1,3)_"-"_$E($P(HBHCDPT0,U,9),4,5)_"-"_$E($P(HBHCDPT0,U,9),6,9),?38,"|",?41,"31.  Mood Disturbance @ Admission:",?79,$P(HBHCY0,U,36),!,HBHCY
"RTN","HBHCRP2",40,0)
 W !?38,"|",?41,"32.  Caregiver Limitations @ Adm:",?79,$P(HBHCY0,U,37),!,HBHCY
"RTN","HBHCRP2",41,0)
 W !?38,"|",?41,"33.  Person Completing Eval/Adm:",?76,$J($S($P(HBHCY0,U,38)]"":$P(^HBHC(631.4,$P(HBHCY0,U,38),0),U),1:""),4),!,HBHCY
"RTN","HBHCRP2",42,0)
 W !?38,"|",?46,"Date Eval/Adm Completed:",?72,$S($P(HBHCY0,U,39)]"":$E($P(HBHCY0,U,39),4,5)_"-"_$E($P(HBHCY0,U,39),6,7)_"-"_$E($P(HBHCY0,U,39),2,3),1:""),!,HBHCY
"RTN","HBHCRP2",43,0)
 W !?38,"|",?46,"Case Manager:",?76,$J($S($P(HBHCNOD1,U,13)]"":$P(^HBHC(631.4,$P(HBHCNOD1,U,13),0),U),1:""),4),!,HBHCY
"RTN","HBHCRP2",44,0)
EXIT ; Exit module
"RTN","HBHCRP2",45,0)
 D ^%ZISC
"RTN","HBHCRP2",46,0)
 K DIC,HBHCCNTY,HBHCCOLM,HBHCDFN,HBHCDPT0,HBHCHEAD,HBHCNOD1,HBHCRC,HBHCTDY,HBHCY,HBHCY0,HBHCZ,Y
"RTN","HBHCRP2",47,0)
 Q
"RTN","HBHCUTL1")
0^3^B26722690
"RTN","HBHCUTL1",1,0)
HBHCUTL1 ; LR VAMC(IRMS)/MJT-HBHC Utility module, Entry points:  ENDRPT, END132, FORMMSG, BIRTHYR, SEXRACE ;2/5/98  15:19
"RTN","HBHCUTL1",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**1,2,6,9**;NOV 01, 1993
"RTN","HBHCUTL1",3,0)
ENDRPT ; Print end of report message
"RTN","HBHCUTL1",4,0)
 W !!?28,"==== End of Report ===="
"RTN","HBHCUTL1",5,0)
 Q
"RTN","HBHCUTL1",6,0)
END132 ; Print end of report message for 132 column report
"RTN","HBHCUTL1",7,0)
 W !!?54,"==== End of Report ===="
"RTN","HBHCUTL1",8,0)
 Q
"RTN","HBHCUTL1",9,0)
FORMMSG ; Process Form 3/4/5 Transmit Status fields
"RTN","HBHCUTL1",10,0)
 W *7,!!,"Transmit Status Flag must be reset before editing this record is allowed."
"RTN","HBHCUTL1",11,0)
 I $P(^HBHC(631.9,1,0),U,5)="" W !!,"***  NOTICE:  Hospital Number is missing from System Parameter file (#631.9).",!,"Due to automatic Form 6 Correction Record generation, Transmit Status Flag"
"RTN","HBHCUTL1",12,0)
 I $P(^HBHC(631.9,1,0),U,5)="" W !,"CANNOT be reset without this information.  Contact IRM to enter this",!,"information using FileMan.",! S HBHCNHSP=1 H 10 Q
"RTN","HBHCUTL1",13,0)
 W !!,"Do you wish to reset the Flag" S %=2 D YN^DICN W ! I %=0 W !,"A 'Yes' response will reset the Transmit Status Flag field data.  A 'No'",!,"response will return you to the menu without resetting the Transmit",!,"Status Flag.",!! G FORMMSG
"RTN","HBHCUTL1",14,0)
 S HBHCPRCT=%
"RTN","HBHCUTL1",15,0)
 I %'=1 S:HBHCFORM=4 Y=0 Q
"RTN","HBHCUTL1",16,0)
 S HBHCFILE=$S(HBHCFORM=4:632,1:631),HBHCNODE=$S(HBHCFORM=4:0,1:1),HBHCPC1=$S(HBHCFORM=3:17,HBHCFORM=4:8,1:18),HBHCPC2=$S(HBHCFORM=3:25,HBHCFORM=4:12,1:27),HBHCPC3=$S(HBHCFORM=3:26,HBHCFORM=4:13,1:28)
"RTN","HBHCUTL1",17,0)
 S HBHCXREF=$S(HBHCFORM=3:"AE",HBHCFORM=4:"AC",1:"AF"),HBHCSTAT=$S(HBHCFORM=3:$P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,17),HBHCFORM=5:$P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,18),1:$P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,8))
"RTN","HBHCUTL1",18,0)
 D NOW^%DTC S HBHCNOW=$E(%,1,12)
"RTN","HBHCUTL1",19,0)
 K:HBHCSTAT]"" ^HBHC(HBHCFILE,HBHCXREF,HBHCSTAT,HBHCDFN)
"RTN","HBHCUTL1",20,0)
 L +^HBHC(HBHCFILE,HBHCDFN,HBHCNODE)
"RTN","HBHCUTL1",21,0)
 S $P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,HBHCPC1)="N",^HBHC(HBHCFILE,HBHCXREF,"N",HBHCDFN)="",$P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,HBHCPC2)=HBHCNOW,$P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,HBHCPC3)=DUZ
"RTN","HBHCUTL1",22,0)
 I (HBHCFORM=3)&($P(^HBHC(HBHCFILE,HBHCDFN,0),U,40)]"") S HBHC5XMT=$P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,18) K:HBHC5XMT]"" ^HBHC(HBHCFILE,"AF",HBHC5XMT,HBHCDFN) S $P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,18)="N",^HBHC(HBHCFILE,"AF","N",HBHCDFN)=""
"RTN","HBHCUTL1",23,0)
 I HBHCFORM=5 S HBHC3XMT=$P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,17) K:HBHC3XMT]"" ^HBHC(HBHCFILE,"AE",HBHC3XMT,HBHCDFN) S $P(^HBHC(HBHCFILE,HBHCDFN,HBHCNODE),U,17)="N",^HBHC(HBHCFILE,"AE","N",HBHCDFN)=""
"RTN","HBHCUTL1",24,0)
 L -^HBHC(HBHCFILE,HBHCDFN,HBHCNODE)
"RTN","HBHCUTL1",25,0)
 D:HBHCFORM'=4 SETNODE
"RTN","HBHCUTL1",26,0)
EXIT ; Exit FORMMSG module
"RTN","HBHCUTL1",27,0)
 K HBHCADDT,HBHCDPT0,HBHCDSDT,HBHCFILE,HBHCHOSP,HBHCINFO,HBHCLNTH,HBHCNAME,HBHCNDX1,HBHCNODE,HBHCNOW,HBHCPC1,HBHCPC2,HBHCPC3,HBHCREC,HBHCSP4,HBHCSP8,HBHCSP66,HBHCSTAT,HBHCXREF,HBHC3XMT,HBHC5XMT
"RTN","HBHCUTL1",28,0)
 Q
"RTN","HBHCUTL1",29,0)
SETNODE ; Set node in ^HBHC(634.4) (Form 6 Corrections file)
"RTN","HBHCUTL1",30,0)
 S $P(HBHCSP4," ",5)="",$P(HBHCSP8," ",9)="",$P(HBHCSP66," ",67)="",HBHCLNTH=30
"RTN","HBHCUTL1",31,0)
 L +^HBHC(634.4,0) S HBHCNDX1=$P(^HBHC(634.4,0),U,3)+1,$P(^HBHC(634.4,0),U,3)=HBHCNDX1,$P(^HBHC(634.4,0),U,4)=$P(^HBHC(634.4,0),U,4)+1 L -^HBHC(634.4,0)
"RTN","HBHCUTL1",32,0)
 S HBHCINFO=^HBHC(HBHCFILE,HBHCDFN,0),HBHCDPT0=^DPT(HBHCDPT,0)
"RTN","HBHCUTL1",33,0)
 S HBHCADDT=$S($P(HBHCINFO,U,18)]"":$E($P(HBHCINFO,U,18),4,5)_$E($P(HBHCINFO,U,18),6,7)_(1700+$E($P(HBHCINFO,U,18),1,3)),1:HBHCSP8)
"RTN","HBHCUTL1",34,0)
 S HBHCDSDT=$S($P(HBHCINFO,U,40)]"":$E($P(HBHCINFO,U,40),4,5)_$E($P(HBHCINFO,U,40),6,7)_(1700+$E($P(HBHCINFO,U,40),1,3)),1:HBHCSP8)
"RTN","HBHCUTL1",35,0)
 S HBHCNAME=$P(HBHCDPT0,U) S:$L(HBHCNAME)<HBHCLNTH HBHCNAME=HBHCNAME_$J("",HBHCLNTH-$L(HBHCNAME))
"RTN","HBHCUTL1",36,0)
 S HBHCHOSP=$P($G(^DIC(4,$P(^HBHC(631.9,1,0),U,5),99)),U) S:$L(HBHCHOSP)'=7 HBHCHOSP=HBHCHOSP_$E(HBHCSP4,1,(7-($L(HBHCHOSP))))
"RTN","HBHCUTL1",37,0)
 S HBHCREC=6_HBHCHOSP_$P(HBHCDPT0,U,9)_HBHCADDT_HBHCNAME_HBHCDSDT_2_HBHCSP66
"RTN","HBHCUTL1",38,0)
 S ^HBHC(634.4,HBHCNDX1,0)=HBHCREC,^HBHC(634.4,"B",$E(HBHCREC,1,30),HBHCNDX1)=""
"RTN","HBHCUTL1",39,0)
 Q
"RTN","HBHCUTL1",40,0)
BIRTHYR ; Birth year field display during Evaluation/Admission Data Entry
"RTN","HBHCUTL1",41,0)
 S HBHCDPT0=^DPT(HBHCDPT,0)
"RTN","HBHCUTL1",42,0)
 W !!,"BIRTH YEAR:  ",$S($P(HBHCDPT0,U,3):1700+$E($P(HBHCDPT0,U,3),1,3),1:"0000"),*7 D MASMSG
"RTN","HBHCUTL1",43,0)
 Q
"RTN","HBHCUTL1",44,0)
SEXRACE ; Sex & Race fields display during Evaluation/Admission Data Entry
"RTN","HBHCUTL1",45,0)
 S HBHCDPT0=^DPT(HBHCDPT,0),HBHCSEX=$P(HBHCDPT0,U,2),HBHCRACE=$S($P(HBHCDPT0,U,6)]"":$P(^DIC(10,$P(HBHCDPT0,U,6),0),U,2),1:"")
"RTN","HBHCUTL1",46,0)
 W !!,"SEX:  ",$S(HBHCSEX="M":"Male  (1)",1:"Female  (2)"),*7 D MASMSG
"RTN","HBHCUTL1",47,0)
 W !,"RACE:  "
"RTN","HBHCUTL1",48,0)
 W $S(HBHCRACE=4:"Black  (2)",HBHCRACE=3:"American Indian/Alaskan Native  (4)",HBHCRACE=6:"White  (1)",(HBHCRACE=1)!(HBHCRACE=2):"Hispanic Origin  (3)",HBHCRACE=5:"Asian/Pacific Islander  (5)",1:"Not Determined  (9)")
"RTN","HBHCUTL1",49,0)
 K HBHCDPT0,HBHCRACE,HBHCSEX
"RTN","HBHCUTL1",50,0)
MASMSG ; MAS message for BIRTHYR & SEXRACE modules
"RTN","HBHCUTL1",51,0)
 W !?18,"***  Contact MAS if value is incorrect.  ***",!
"RTN","HBHCUTL1",52,0)
 Q
"RTN","HBHCXMA")
0^4^B23602927
"RTN","HBHCXMA",1,0)
HBHCXMA ; LR VAMC(IRMS)/MJT-HBHC populate ^HBHC(634) with Evaluation/Admission Data or ^HBHC(634.1), file of records in ^HBHC(631) containing missing/erroneous data, called by ^HBHCFILE, calls ^HBHCXMA1 ;2/5/98  15:19
"RTN","HBHCXMA",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**1,6,9**;NOV 01, 1993
"RTN","HBHCXMA",3,0)
 D START^HBHCXMA1
"RTN","HBHCXMA",4,0)
LOOP ; Loop thru ^HBHC(631) "AE","N" cross-ref to create nodes in ^HBHC(634) => transmit or ^HBHC(634.1) => Evaluation/Admission Error(s) file
"RTN","HBHCXMA",5,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(631,"AE","N",HBHCDFN)) Q:HBHCDFN=""  S HBHCFLG=1 D SETNODE I HBHCFLG D:HBHCDR="" TRANS D:HBHCDR]"" ERROR^HBHCXMA1
"RTN","HBHCXMA",6,0)
EXIT ; Exit module
"RTN","HBHCXMA",7,0)
 D EXIT^HBHCXMA1
"RTN","HBHCXMA",8,0)
 Q
"RTN","HBHCXMA",9,0)
SETNODE ; Set node in ^HBHC(634) (Transmit) or ^HBHC(634.1) Evaluation/Admission Error(s))
"RTN","HBHCXMA",10,0)
 S HBHCINFO=^HBHC(631,HBHCDFN,0),HBHCXMT3=$P($G(^HBHC(631,HBHCDFN,1)),U,17)
"RTN","HBHCXMA",11,0)
 ; Quit if admission date is greater than HBHCLSDT (last date to include in transmit set up in ^HBHCFILE)
"RTN","HBHCXMA",12,0)
 I $P(HBHCINFO,U,18)>HBHCLSDT S HBHCFLG=0 Q
"RTN","HBHCXMA",13,0)
 S HBHCDPT0=^DPT(+HBHCINFO,0),HBHCDR=""
"RTN","HBHCXMA",14,0)
 S HBHCAFLG=0 F HBHCK=19:1:37 Q:HBHCAFLG  S:$P(HBHCINFO,U,HBHCK)]"" HBHCAFLG=1
"RTN","HBHCXMA",15,0)
 S HBHCRFLG=0 S:($P(HBHCINFO,U,16)]"")!($P(HBHCINFO,U,17)]"") HBHCRFLG=1
"RTN","HBHCXMA",16,0)
 S HBHCADDT=$S($P(HBHCINFO,U,18)]"":$E($P(HBHCINFO,U,18),4,5)_$E($P(HBHCINFO,U,18),6,7)_(1700+$E($P(HBHCINFO,U,18),1,3)),1:HBHCSP8)
"RTN","HBHCXMA",17,0)
 ; Use Evaluation Date for historical 'Reject' purposes 
"RTN","HBHCXMA",18,0)
 S:HBHCADDT=HBHCSP8 HBHCADDT=$S($P(HBHCINFO,U,2)]"":$E($P(HBHCINFO,U,2),4,5)_$E($P(HBHCINFO,U,2),6,7)_(1700+$E($P(HBHCINFO,U,2),1,3)),1:HBHCSP8)
"RTN","HBHCXMA",19,0)
 S:HBHCADDT=HBHCSP8 HBHCDR=HBHCDR_"17;"
"RTN","HBHCXMA",20,0)
 S HBHCST=$S($P(HBHCINFO,U,3)]"":$P(^DIC(5,(+^HBHC(631.8,($P(HBHCINFO,U,3)),0)),0),U,3),1:"") S:HBHCST="" HBHCDR=HBHCDR_"2;"
"RTN","HBHCXMA",21,0)
 S HBHCCNTY="" S:(($P(HBHCINFO,U,3)]"")&($P(HBHCINFO,U,4)]"")) HBHCCNTY=$P($G(^DIC(5,(+^HBHC(631.8,($P(HBHCINFO,U,3)),0)),1,$P(HBHCINFO,U,4),0)),U,3) S:HBHCCNTY="" HBHCDR=HBHCDR_"3;"
"RTN","HBHCXMA",22,0)
 S HBHCZIP=$S($P(HBHCINFO,U,5)]"":$P(HBHCINFO,U,5),1:"") S:$L(HBHCZIP)'=9 HBHCZIP=HBHCZIP_HBHCSP4 S:HBHCZIP="" HBHCDR=HBHCDR_"4;"
"RTN","HBHCXMA",23,0)
 S HBHCELGE=$S($P(HBHCINFO,U,6)]"":$P(HBHCINFO,U,6),1:"") S:HBHCELGE="" HBHCDR=HBHCDR_"5;"
"RTN","HBHCXMA",24,0)
 S HBHCBYR=$S($P(HBHCDPT0,U,3):1700+$E($P(HBHCDPT0,U,3),1,3),1:"0000")
"RTN","HBHCXMA",25,0)
 S HBHCPSRV=$S($P(HBHCINFO,U,8)]"":$P(^HBHC(631.7,$P(HBHCINFO,U,8),0),U),1:"") S:HBHCPSRV="" HBHCDR=HBHCDR_"7;"
"RTN","HBHCXMA",26,0)
 S HBHCSX=$P(HBHCDPT0,U,2),HBHCSEX=$S(HBHCSX="M":1,1:2)
"RTN","HBHCXMA",27,0)
 S HBHCRC=$S($P(HBHCDPT0,U,6)]"":$P(^DIC(10,$P(HBHCDPT0,U,6),0),U,2),1:""),HBHCRACE=$S(HBHCRC=6:1,HBHCRC=4:2,(HBHCRC=1)!(HBHCRC=2):3,HBHCRC=3:4,HBHCRC=5:5,1:9)
"RTN","HBHCXMA",28,0)
 F HBHCI=1:1:4 S HBHCFLD=$P(HBHCFLD1,U,HBHCI) S @HBHCFLD=$S($P(HBHCINFO,U,HBHCI+10)]"":$P(HBHCINFO,U,HBHCI+10),1:"") S:@HBHCFLD="" HBHCDR=HBHCDR_(HBHCI+9)_";"
"RTN","HBHCXMA",29,0)
 S HBHCRFIN=$S($P($G(^HBHC(631,HBHCDFN,1)),U,29)]"":$P($G(^HBHC(631,HBHCDFN,1)),U,29),1:HBHCSP1)
"RTN","HBHCXMA",30,0)
 S HBHCACTN=$S($P(HBHCINFO,U,15)]"":$P(HBHCINFO,U,15),1:"") I (HBHCACTN="")!((HBHCACTN=1)&(HBHCRFLG=1))!((HBHCACTN=2)&(HBHCAFLG=1)) S HBHCDR=HBHCDR_"14;" Q
"RTN","HBHCXMA",31,0)
 S HBHCREJ=$S($P(HBHCINFO,U,16)]"":$P(^HBHC(631.1,$P(HBHCINFO,U,16),0),U),1:HBHCSP2) S:(HBHCACTN=2)&(HBHCREJ=HBHCSP2) HBHCDR=HBHCDR_"15;"
"RTN","HBHCXMA",32,0)
 S HBHCREJD=$S($P(HBHCINFO,U,17)]"":$P(HBHCINFO,U,17),1:HBHCSP1) S:(HBHCACTN=2)&(HBHCREJD=HBHCSP1) HBHCDR=HBHCDR_"16;"
"RTN","HBHCXMA",33,0)
 S HBHCICDA=$S($P(HBHCINFO,U,19)]"":$P($P(^ICD9($P(HBHCINFO,U,19),0),U),".")_$P($P(^ICD9($P(HBHCINFO,U,19),0),U),".",2),1:HBHCSP6) S:$L(HBHCICDA)<6 HBHCICDA=HBHCICDA_$J("",6-$L(HBHCICDA)) S:(HBHCACTN=1)&(HBHCICDA=HBHCSP6) HBHCDR=HBHCDR_"18;"
"RTN","HBHCXMA",34,0)
 F HBHCJ=1:1:18 S HBHCFLD=$P(HBHCFLD2,U,HBHCJ) S @HBHCFLD=$S($P(HBHCINFO,U,HBHCJ+19)]"":$P(HBHCINFO,U,HBHCJ+19),1:HBHCSP1) S:(HBHCACTN=1)&(@HBHCFLD=HBHCSP1) HBHCDR=HBHCDR_(HBHCJ+18)_";"
"RTN","HBHCXMA",35,0)
 Q:HBHCDR]""
"RTN","HBHCXMA",36,0)
 S HBHCNAME=$P(^DPT($P(HBHCINFO,U),0),U) S:$L(HBHCNAME)<HBHCLNTH HBHCNAME=HBHCNAME_$J("",HBHCLNTH-$L(HBHCNAME))
"RTN","HBHCXMA",37,0)
 S HBHCSSN=$P(^DPT($P(HBHCINFO,U),0),U,9)
"RTN","HBHCXMA",38,0)
 S HBHCREC=HBHCFORM_HBHCHOSP_HBHCSSN_HBHCADDT_HBHCST_HBHCCNTY_HBHCZIP_HBHCELGE_HBHCBYR_HBHCPSRV_HBHCSEX_HBHCRACE_HBHCMARE_HBHCLIVE_HBHCCARE_HBHCTYPE_HBHCRFIN_HBHCACTN_HBHCREJ_HBHCREJD_HBHCNAME
"RTN","HBHCXMA",39,0)
 S HBHCREC=HBHCREC_HBHCICDA_HBHCVISA_HBHCHERA_HBHCEXCA_HBHCRECA_HBHCBTHA_HBHCDRSA_HBHCTLTA_HBHCTRNA_HBHCEATA_HBHCWLKA_HBHCBWLA_HBHCBLDA_HBHCMOBA_HBHCADTA_HBHCBHVA_HBHCDSOA_HBHCMODA_HBHCLMTA_HBHCSP18
"RTN","HBHCXMA",40,0)
 Q
"RTN","HBHCXMA",41,0)
TRANS ; Set node in ^HBHC(634) transmit file & flag record as 'F" (filed for transmit) in ^HBHC(631)
"RTN","HBHCXMA",42,0)
 L +^HBHC(634,0) S HBHCNDX1=$P(^HBHC(634,0),U,3)+1,$P(^HBHC(634,0),U,3)=HBHCNDX1,$P(^HBHC(634,0),U,4)=$P(^HBHC(634,0),U,4)+1 L -^HBHC(634,0)
"RTN","HBHCXMA",43,0)
 S $P(^HBHC(634,HBHCNDX1,0),U)=HBHCREC,^HBHC(634,"B",$E(HBHCREC,1,30),HBHCNDX1)=""
"RTN","HBHCXMA",44,0)
 L +^HBHC(631,HBHCDFN,1) K:HBHCXMT3]"" ^HBHC(631,"AE",HBHCXMT3,HBHCDFN) S $P(^HBHC(631,HBHCDFN,1),U,17)="F",^HBHC(631,"AE","F",HBHCDFN)="",$P(^HBHC(631,HBHCDFN,1),U,19)=HBHCTDY L -^HBHC(631,HBHCDFN,1)
"RTN","HBHCXMA",45,0)
 Q
"RTN","HBHCXMD")
0^5^B21137795
"RTN","HBHCXMD",1,0)
HBHCXMD ; LR VAMC(IRMS)/MJT-HBHC populate ^HBHC(634) with Discharge Data or ^HBHC(634.3), file of records in ^HBHC(631) containing missing/erroneous data, called by ^HBHCFILE, calls ^HBHCXMD1 ;2/5/98  15:20
"RTN","HBHCXMD",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**4,6,9**;NOV 01, 1993
"RTN","HBHCXMD",3,0)
 D START^HBHCXMD1
"RTN","HBHCXMD",4,0)
LOOP ; Loop thru ^HBHC(631) "AF","N" cross-ref to create nodes in ^HBHC(634) => transmit or ^HBHC(634.3) => Discharge Error(s) file
"RTN","HBHCXMD",5,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(631,"AF","N",HBHCDFN)) Q:HBHCDFN=""  S HBHCFLG=1,HBHCCONT=0 D SETNODE I HBHCFLG D:HBHCCONT TRANS D:'HBHCCONT ERROR
"RTN","HBHCXMD",6,0)
EXIT ; Exit module
"RTN","HBHCXMD",7,0)
 D EXIT^HBHCXMD1
"RTN","HBHCXMD",8,0)
 Q
"RTN","HBHCXMD",9,0)
SETNODE ; Set node in ^HBHC(634) (Transmit) or ^HBHC(634.3) (Discharge Error(s))
"RTN","HBHCXMD",10,0)
 S HBHCNOD0=^HBHC(631,HBHCDFN,0),HBHCNOD1=$G(^HBHC(631,HBHCDFN,1)),HBHCXMT5=$P(HBHCNOD1,U,18)
"RTN","HBHCXMD",11,0)
 ; Quit if discharge date is greater than HBHCLSDT (last date to include in transmit set up in ^HBHCFILE)
"RTN","HBHCXMD",12,0)
 I $P(HBHCNOD0,U,40)>HBHCLSDT S HBHCFLG=0 Q
"RTN","HBHCXMD",13,0)
 S (HBHCDR1,HBHCDR2,HBHCDR3,HBHCDR4,HBHCDR5)=""
"RTN","HBHCXMD",14,0)
 S HBHCTFLG=0 S:($P(HBHCNOD0,U,45)]"")!($P(HBHCNOD0,U,46)]"") HBHCTFLG=1
"RTN","HBHCXMD",15,0)
 S HBHCDFLG=0 F HBHCL=47:1:55 Q:HBHCDFLG  S:$P(HBHCNOD0,U,HBHCL)]"" HBHCDFLG=1
"RTN","HBHCXMD",16,0)
 I HBHCNOD1]"" F HBHCM=1:1:10 Q:HBHCDFLG  S:$P(HBHCNOD1,U,HBHCM)]"" HBHCDFLG=1
"RTN","HBHCXMD",17,0)
 S HBHCADDT=$S($P(HBHCNOD0,U,18)]"":$E($P(HBHCNOD0,U,18),4,5)_$E($P(HBHCNOD0,U,18),6,7)_(1700+$E($P(HBHCNOD0,U,18),1,3)),1:"")
"RTN","HBHCXMD",18,0)
 S HBHCDSDT=$S($P(HBHCNOD0,U,40)]"":$E($P(HBHCNOD0,U,40),4,5)_$E($P(HBHCNOD0,U,40),6,7)_(1700+$E($P(HBHCNOD0,U,40),1,3)),1:"")
"RTN","HBHCXMD",19,0)
 S:((HBHCDSDT="")&((HBHCDFLG=1)!(HBHCTFLG=1)!($D(HBHCDDTA)))) HBHCDR1="39;"_HBHCDR1
"RTN","HBHCXMD",20,0)
 F HBHCI=1:1:4 S HBHCFLD=$P(HBHCFLD1,U,HBHCI) S:HBHCFLD]"" HBHCDDTA=1 S @HBHCFLD=$S($P(HBHCNOD0,U,HBHCI+40)]"":$P(HBHCNOD0,U,HBHCI+40),1:"") D:@HBHCFLD="" DFLT1^HBHCXMD1
"RTN","HBHCXMD",21,0)
 Q:HBHCSTAT=""
"RTN","HBHCXMD",22,0)
 I HBHCSTAT=4 I (HBHCDFLG)!(HBHCTFLG) S HBHCDR1=HBHCDR1_"43;" Q
"RTN","HBHCXMD",23,0)
 I (HBHC359[(U_HBHCSTAT_U))&(HBHCTFLG) S HBHCDR1=HBHCDR1_"43;" Q
"RTN","HBHCXMD",24,0)
 I HBHCNOD1]"" I ($P(HBHCNOD1,U,15)]"")&(HBHCSTAT'=4) S HBHCDR1=HBHCDR1_"43;" Q
"RTN","HBHCXMD",25,0)
 S HBHCDEST=$S($P(HBHCNOD0,U,45)]"":$P(HBHCNOD0,U,45),1:HBHCSP1) S:(HBHC12[(U_HBHCSTAT_U))&(HBHCDEST=HBHCSP1) HBHCDR1=HBHCDR1_"44;"
"RTN","HBHCXMD",26,0)
 S HBHCAGCY=$S($P(HBHCNOD0,U,46)]"":$P(HBHCNOD0,U,46),1:HBHCSP1) S:(HBHC12[(U_HBHCSTAT_U))&(HBHCAGCY=HBHCSP1) HBHCDR1=HBHCDR1_"45;"
"RTN","HBHCXMD",27,0)
 S HBHCICDD=$S($P(HBHCNOD0,U,47)]"":$P($P(^ICD9($P(HBHCNOD0,U,47),0),U),".")_$P($P(^ICD9($P(HBHCNOD0,U,47),0),U),".",2),1:HBHCSP6) S:$L(HBHCICDD)<6 HBHCICDD=HBHCICDD_$J("",6-$L(HBHCICDD)) D:(HBHCSTAT'=4)&(HBHCICDD=HBHCSP6) ICDDFLT^HBHCXMD1
"RTN","HBHCXMD",28,0)
 F HBHCJ=1:1:8 S HBHCFLD=$P(HBHCFLD2,U,HBHCJ) S @HBHCFLD=$S($P(HBHCNOD0,U,HBHCJ+47)]"":$P(HBHCNOD0,U,HBHCJ+47),1:HBHCSP1) D:(HBHCSTAT'=4)&(@HBHCFLD=HBHCSP1) DFLT2^HBHCXMD1
"RTN","HBHCXMD",29,0)
 F HBHCK=1:1:10 S HBHCFLD=$P(HBHCFLD3,U,HBHCK) S @HBHCFLD=$S($P(HBHCNOD1,U,HBHCK)]"":$P(HBHCNOD1,U,HBHCK),1:HBHCSP1) D:(HBHCSTAT'=4)&(@HBHCFLD=HBHCSP1) DFLT3^HBHCXMD1
"RTN","HBHCXMD",30,0)
 Q:(HBHCADDT="")!(HBHCDR1]"")!(HBHCDR2]"")!(HBHCDR3]"")!(HBHCDR4]"")!(HBHCDR5]"")
"RTN","HBHCXMD",31,0)
 S HBHCCONT=1
"RTN","HBHCXMD",32,0)
 S HBHCNAME=$E($P(^DPT($P(HBHCNOD0,U),0),U),1,5) S:$L(HBHCNAME)<HBHCLNTH HBHCNAME=HBHCNAME_$J("",HBHCLNTH-$L(HBHCNAME))
"RTN","HBHCXMD",33,0)
 S HBHCSSN=$P(^DPT($P(HBHCNOD0,U),0),U,9)
"RTN","HBHCXMD",34,0)
 S HBHCREC=HBHCFORM_HBHCHOSP_HBHCSSN_HBHCDSDT_HBHCELGD_HBHCMARD_HBHCLIVD_HBHCSTAT_HBHCDEST_HBHCAGCY_HBHCADDT_HBHCNAME_HBHCICDD_HBHCVISD_HBHCHERD_HBHCEXCD_HBHCRECD_HBHCBTHD_HBHCDRSD_HBHCTLTD_HBHCTRND_HBHCEATD_HBHCWLKD_HBHCBWLD_HBHCBLDD
"RTN","HBHCXMD",35,0)
 S HBHCREC=HBHCREC_HBHCMOBD_HBHCADTD_HBHCBHVD_HBHCDSOD_HBHCMODD_HBHCLMTD_HBHCSP61
"RTN","HBHCXMD",36,0)
 Q
"RTN","HBHCXMD",37,0)
TRANS ; Set node in ^HBHC(634) transmit file & flag record as 'F" (filed for transmit) in ^HBHC(631)
"RTN","HBHCXMD",38,0)
 L +^HBHC(634,0) S HBHCNDX1=$P(^HBHC(634,0),U,3)+1,$P(^HBHC(634,0),U,3)=HBHCNDX1,$P(^HBHC(634,0),U,4)=$P(^HBHC(634,0),U,4)+1 L -^HBHC(634,0)
"RTN","HBHCXMD",39,0)
 S $P(^HBHC(634,HBHCNDX1,0),U)=HBHCREC,^HBHC(634,"B",$E(HBHCREC,1,30),HBHCNDX1)=""
"RTN","HBHCXMD",40,0)
 L +^HBHC(631,HBHCDFN,1) K:HBHCXMT5]"" ^HBHC(631,"AF",HBHCXMT5,HBHCDFN) S $P(^HBHC(631,HBHCDFN,1),U,18)="F",^HBHC(631,"AF","F",HBHCDFN)="",$P(^HBHC(631,HBHCDFN,1),U,22)=HBHCTDY L -^HBHC(631,HBHCDFN,1)
"RTN","HBHCXMD",41,0)
 Q
"RTN","HBHCXMD",42,0)
ERROR ; Set node in ^HBHC(634.3) if data is incomplete or proper fields invalid for 'Discharge Status'
"RTN","HBHCXMD",43,0)
 L +^HBHC(634.3,0) S HBHCNDX2=$P(^HBHC(634.3,0),U,3)+1,$P(^HBHC(634.3,0),U,3)=HBHCNDX2,$P(^HBHC(634.3,0),U,4)=$P(^HBHC(634.3,0),U,4)+1 L -^HBHC(634.3,0)
"RTN","HBHCXMD",44,0)
 S ^HBHC(634.3,HBHCNDX2,0)=$P(HBHCNOD0,U)_U_HBHCDFN
"RTN","HBHCXMD",45,0)
 S:HBHCDR1]"" ^HBHC(634.3,HBHCNDX2,1)=HBHCDR1
"RTN","HBHCXMD",46,0)
 S:HBHCDR2]"" ^HBHC(634.3,HBHCNDX2,2)=HBHCDR2
"RTN","HBHCXMD",47,0)
 S:HBHCDR3]"" ^HBHC(634.3,HBHCNDX2,3)=HBHCDR3
"RTN","HBHCXMD",48,0)
 S:HBHCDR4]"" ^HBHC(634.3,HBHCNDX2,4)=HBHCDR4
"RTN","HBHCXMD",49,0)
 S:HBHCDR5]"" ^HBHC(634.3,HBHCNDX2,5)=HBHCDR5
"RTN","HBHCXMD",50,0)
 S ^HBHC(634.3,"B",$P(HBHCNOD0,U),HBHCNDX2)=""
"RTN","HBHCXMD",51,0)
 Q
"RTN","HBHCXMV")
0^6^B28146768
"RTN","HBHCXMV",1,0)
HBHCXMV ; LR VAMC(IRMS)/MJT-HBHC populate ^HBHC(634 with Visit Data, or ^HBHC(634.5, file of recs in ^HBHC(632 w/pseudo SSNs, called by ^HBHCFILE, calls HBHCXMV1 ;2/5/98  15:20
"RTN","HBHCXMV",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**2,5,6,9**;NOV 01, 1993
"RTN","HBHCXMV",3,0)
 D START^HBHCXMV1
"RTN","HBHCXMV",4,0)
LOOP ; Loop thru ^HBHC(632) "AC","N" cross-ref to create nodes in ^HBHC(634) => transmit
"RTN","HBHCXMV",5,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(632,"AC","N",HBHCDFN)) Q:HBHCDFN=""  D SETNODE
"RTN","HBHCXMV",6,0)
EXIT ; Exit module
"RTN","HBHCXMV",7,0)
 D EXIT^HBHCXMV1
"RTN","HBHCXMV",8,0)
 Q
"RTN","HBHCXMV",9,0)
SETNODE ; Set node in ^HBHC(634) (Transmit)
"RTN","HBHCXMV",10,0)
 S HBHCINFO=^HBHC(632,HBHCDFN,0),HBHCXMT4=$P(HBHCINFO,U,8),HBHCAPDT=$P(HBHCINFO,U,2),HBHCSSN=$P(^DPT($P(HBHCINFO,U),0),U,9)
"RTN","HBHCXMV",11,0)
 Q:$P(HBHCINFO,U,7)]""  ; cancelled/no show appointment
"RTN","HBHCXMV",12,0)
 Q:HBHCAPDT>HBHCLSDT  ; Visit appointment date > HBHCLSDT (last date to include in transmit set up in ^HBHCFILE)
"RTN","HBHCXMV",13,0)
 I HBHCAPDT<2961001 D PCE^HBHCXMV1 Q
"RTN","HBHCXMV",14,0)
 I HBHCSSN'?9N D PSSN^HBHCXMV1 Q
"RTN","HBHCXMV",15,0)
 S HBHCPRV=+^HBHC(631.4,$P(HBHCINFO,U,4),0) S:$L(HBHCPRV)'=4 HBHCPRV=HBHCPRV_HBHCSP1
"RTN","HBHCXMV",16,0)
 S HBHCTIME=$P(HBHCAPDT,".",2) S:$L(HBHCTIME)'=4 HBHCTIME=HBHCTIME_$E(HBHCZRO4,1,(4-($L(HBHCTIME))))
"RTN","HBHCXMV",17,0)
 S HBHCDATE=$E(HBHCAPDT,4,5)_$E(HBHCAPDT,6,7)_(1700+$E(HBHCAPDT,1,3))_HBHCTIME
"RTN","HBHCXMV",18,0)
 S HBHCLNME=$P($P(^DPT($P(HBHCINFO,U),0),U),",") S:$L(HBHCLNME)'=11 HBHCLNME=$S($L(HBHCLNME)<11:HBHCLNME_$E(HBHCSP10,1,11-$L(HBHCLNME)),1:$E(HBHCLNME,1,11))
"RTN","HBHCXMV",19,0)
 S HBHCQAI=$S(($L($P(HBHCINFO,U,16))=1)&($E(HBHCINFO,U,16)=""):HBHCSP1_$P(HBHCINFO,U,16),($L($P(HBHCINFO,U,16))=1)&($E(HBHCINFO,U,16)]""):$P(HBHCINFO,U,16)_HBHCSP1,$L($P(HBHCINFO,U,16))=2:$P(HBHCINFO,U,16),1:HBHCSP2)
"RTN","HBHCXMV",20,0)
 ; Dx
"RTN","HBHCXMV",21,0)
 S HBHCDX1=$S($P(HBHCINFO,U,17)]"":$P($P($G(^ICD9($P(HBHCINFO,U,17),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,17),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX1)'=6 HBHCDX1=HBHCDX1_$E(HBHCSP6,1,6-$L(HBHCDX1))
"RTN","HBHCXMV",22,0)
 S HBHCDX2=$S($P(HBHCINFO,U,18)]"":$P($P($G(^ICD9($P(HBHCINFO,U,18),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,18),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX2)'=6 HBHCDX2=HBHCDX2_$E(HBHCSP6,1,6-$L(HBHCDX2))
"RTN","HBHCXMV",23,0)
 S HBHCDX3=$S($P(HBHCINFO,U,19)]"":$P($P($G(^ICD9($P(HBHCINFO,U,19),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,19),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX3)'=6 HBHCDX3=HBHCDX3_$E(HBHCSP6,1,6-$L(HBHCDX3))
"RTN","HBHCXMV",24,0)
 S HBHCDX4=$S($P(HBHCINFO,U,20)]"":$P($P($G(^ICD9($P(HBHCINFO,U,20),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,20),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX4)'=6 HBHCDX4=HBHCDX4_$E(HBHCSP6,1,6-$L(HBHCDX4))
"RTN","HBHCXMV",25,0)
 S HBHCDX5=$S($P(HBHCINFO,U,21)]"":$P($P($G(^ICD9($P(HBHCINFO,U,21),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,21),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX5)'=6 HBHCDX5=HBHCDX5_$E(HBHCSP6,1,6-$L(HBHCDX5))
"RTN","HBHCXMV",26,0)
 ; CPT Codes
"RTN","HBHCXMV",27,0)
 S HBHCNOD1=$G(^HBHC(632,HBHCDFN,1))
"RTN","HBHCXMV",28,0)
 S HBHCCPT1=$S($P(HBHCNOD1,U)]"":$E($P($G(^ICPT($P(HBHCNOD1,U),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCPT1)'=5 HBHCCPT1=HBHCCPT1_$E(HBHCSP5,1,5-$L(HBHCCPT1))
"RTN","HBHCXMV",29,0)
 S HBHCCPT2=$S($P(HBHCNOD1,U,2)]"":$E($P($G(^ICPT($P(HBHCNOD1,U,2),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCPT2)'=5 HBHCCPT2=HBHCCPT2_$E(HBHCSP5,1,5-$L(HBHCCPT2))
"RTN","HBHCXMV",30,0)
 S HBHCCPT3=$S($P(HBHCNOD1,U,3)]"":$E($P($G(^ICPT($P(HBHCNOD1,U,3),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCPT3)'=5 HBHCCPT3=HBHCCPT3_$E(HBHCSP5,1,5-$L(HBHCCPT3))
"RTN","HBHCXMV",31,0)
 S HBHCCPT4=$S($P(HBHCNOD1,U,4)]"":$E($P($G(^ICPT($P(HBHCNOD1,U,4),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCPT4)'=5 HBHCCPT4=HBHCCPT4_$E(HBHCSP5,1,5-$L(HBHCCPT4))
"RTN","HBHCXMV",32,0)
 S HBHCCPT5=$S($P(HBHCNOD1,U,5)]"":$E($P($G(^ICPT($P(HBHCNOD1,U,5),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCPT5)'=5 HBHCCPT5=HBHCCPT5_$E(HBHCSP5,1,5-$L(HBHCCPT5))
"RTN","HBHCXMV",33,0)
 S HBHCCPT6=$S($P(HBHCNOD1,U,6)]"":$E($P($G(^ICPT($P(HBHCNOD1,U,6),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCPT6)'=5 HBHCCPT6=HBHCCPT6_$E(HBHCSP5,1,5-$L(HBHCCPT6))
"RTN","HBHCXMV",34,0)
 S HBHCCPT7=$S($P(HBHCNOD1,U,7)]"":$E($P($G(^ICPT($P(HBHCNOD1,U,7),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCPT7)'=5 HBHCCPT7=HBHCCPT7_$E(HBHCSP5,1,5-$L(HBHCCPT7))
"RTN","HBHCXMV",35,0)
 S HBHCCPT8=$S($P(HBHCNOD1,U,8)]"":$E($P($G(^ICPT($P(HBHCNOD1,U,8),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCPT8)'=5 HBHCCPT8=HBHCCPT8_$E(HBHCSP5,1,5-$L(HBHCCPT8))
"RTN","HBHCXMV",36,0)
 S HBHCCPT9=$S($P(HBHCNOD1,U,9)]"":$E($P($G(^ICPT($P(HBHCNOD1,U,9),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCPT9)'=5 HBHCCPT9=HBHCCPT9_$E(HBHCSP5,1,5-$L(HBHCCPT9))
"RTN","HBHCXMV",37,0)
 S HBHCCP10=$S($P(HBHCNOD1,U,10)]"":$E($P($G(^ICPT($P(HBHCNOD1,U,10),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCP10)'=5 HBHCCP10=HBHCCP10_$E(HBHCSP5,1,5-$L(HBHCCP10))
"RTN","HBHCXMV",38,0)
 ; Record to transmit
"RTN","HBHCXMV",39,0)
 L +^HBHC(634,0) S HBHCNDX1=$P(^HBHC(634,0),U,3)+1 F  Q:'$D(^HBHC(634,HBHCNDX1))  S HBHCNDX1=HBHCNDX1+1
"RTN","HBHCXMV",40,0)
 S $P(^HBHC(634,0),U,3)=HBHCNDX1,$P(^HBHC(634,0),U,4)=$P(^HBHC(634,0),U,4)+1 L -^HBHC(634,0)
"RTN","HBHCXMV",41,0)
 S HBHCREC=HBHCFORM_HBHCHOSP_HBHCSSN_HBHCDATE_HBHCPRV_HBHCLNME_HBHCQAI_HBHCDX1_HBHCDX2_HBHCDX3_HBHCDX4_HBHCDX5_HBHCCPT1_HBHCCPT2_HBHCCPT3_HBHCCPT4_HBHCCPT5_HBHCCPT6_HBHCCPT7_HBHCCPT8_HBHCCPT9_HBHCCP10_HBHCSP4
"RTN","HBHCXMV",42,0)
 S ^HBHC(634,HBHCNDX1,0)=HBHCREC,^HBHC(634,"B",$E(HBHCREC,1,30),HBHCNDX1)=""
"RTN","HBHCXMV",43,0)
 ; Flag record as filed
"RTN","HBHCXMV",44,0)
 L +^HBHC(632,HBHCDFN,0) K:HBHCXMT4]"" ^HBHC(632,"AC",HBHCXMT4,HBHCDFN) S $P(^HBHC(632,HBHCDFN,0),U,8)="F",^HBHC(632,"AC","F",HBHCDFN)="",$P(^HBHC(632,HBHCDFN,0),U,9)=HBHCTDY L -^HBHC(632,HBHCDFN,0)
"RTN","HBHCXMV",45,0)
 Q
"VER")
8.0^21.0
"^DD",631.9,631.9,2,0)
PACKAGE STARTUP DATE^DI^^0;3^S %DT="EX" D ^%DT S X=Y K:2920601>X X
"^DD",631.9,631.9,2,3)
Answer is official startup date for visit records to be electronically transmitted to Austin.  Date must be 6/1/1992 or later.
"^DD",631.9,631.9,2,21,0)
^^3^3^2980303^^^^
"^DD",631.9,631.9,2,21,1,0)
This field represents official startup date for visit records to be
"^DD",631.9,631.9,2,21,2,0)
electronically transmitted to Austin.  Date must be
"^DD",631.9,631.9,2,21,3,0)
6/1/1992 or later.  Field is Uneditable.
"^DD",631.9,631.9,2,"DT")
2921230
"^DD",632,632,1,0)
DATE^D^^0;2^S %DT="ETX" D ^%DT S X=Y K:2770101>X X
"^DD",632,632,1,1,0)
^.1
"^DD",632,632,1,1,1,0)
632^C
"^DD",632,632,1,1,1,1)
S ^HBHC(632,"C",$E(X,1,30),DA)=""
"^DD",632,632,1,1,1,2)
K ^HBHC(632,"C",$E(X,1,30),DA)
"^DD",632,632,1,1,1,"%D",0)
^^2^2^2921230^^^
"^DD",632,632,1,1,1,"%D",1,0)
This cross-reference represents regular 'C' file index of HBHC Visit (632)
"^DD",632,632,1,1,1,"%D",2,0)
file, Date (1) field.  Date field updated by package only, no user input.
"^DD",632,632,1,1,1,"DT")
2920413
"^DD",632,632,1,3)
Answer is date of HBHC visit.  Answer must be 1/1/1977 or later.  Field updated by package only, no user input.
"^DD",632,632,1,21,0)
^^3^3^2921218^^^
"^DD",632,632,1,21,1,0)
This field represents date of HBHC visit.  Date range allowed is
"^DD",632,632,1,21,2,0)
1/1/1977 or later.  Field updated by package only,
"^DD",632,632,1,21,3,0)
no user input.
"^DD",632,632,1,"DT")
2921218
"^DD",634.2,634.2,5,0)
VISIT DATE^D^^0;5^S %DT="ETX" D ^%DT S X=Y K:2770101>X X
"^DD",634.2,634.2,5,3)
Answer is date of HBHC visit.  Answer must be 1/1/1977 or later.  Field updated by package only, no user input.
"^DD",634.2,634.2,5,21,0)
^^2^2^2980303^^
"^DD",634.2,634.2,5,21,1,0)
This field represents date of HBHC visit.  Date range allowed is
"^DD",634.2,634.2,5,21,2,0)
1/1/1977 or later.  Field updated by package only, no user input. 
"^DD",634.2,634.2,5,"DT")
2980303
"^DD",634.6,634.6,1,0)
TRANSMIT DATE^RDI^^0;2^S %DT="EX" D ^%DT S X=Y K:2940101>X X
"^DD",634.6,634.6,1,1,0)
^.1
"^DD",634.6,634.6,1,1,1,0)
634.6^C
"^DD",634.6,634.6,1,1,1,1)
S ^HBHC(634.6,"C",$E(X,1,30),DA)=""
"^DD",634.6,634.6,1,1,1,2)
K ^HBHC(634.6,"C",$E(X,1,30),DA)
"^DD",634.6,634.6,1,1,1,"DT")
2950724
"^DD",634.6,634.6,1,3)
Type a date 1/1/1994 or later.  Field updated by package only, no user input.
"^DD",634.6,634.6,1,"DT")
2950724
**END**
**END**

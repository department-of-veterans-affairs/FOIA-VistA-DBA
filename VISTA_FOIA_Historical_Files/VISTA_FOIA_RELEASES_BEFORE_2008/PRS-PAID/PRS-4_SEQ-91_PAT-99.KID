Released PRS*4*99 SEQ #91
Extracted from mail message
**KIDS**:PRS*4.0*99^

**INSTALL NAME**
PRS*4.0*99
"BLD",6037,0)
PRS*4.0*99^PAID^0^3050222^y
"BLD",6037,1,0)
^^6^6^3050222^
"BLD",6037,1,1,0)
This patch contains the fix necessary to remove the 
"BLD",6037,1,2,0)
supervisor/lead indicator if necessary based on the Employee
"BLD",6037,1,3,0)
Occupation Series & Title code that is downloaded from Central
"BLD",6037,1,4,0)
PAID. After this patch is installed, the supervisor/lead indicator
"BLD",6037,1,5,0)
field in file #450, field #41, will not be populated if the
"BLD",6037,1,6,0)
employee is no longer in a supervisory position.
"BLD",6037,4,0)
^9.64PA^^
"BLD",6037,"ABPKG")
n
"BLD",6037,"KRN",0)
^9.67PA^8989.52^19
"BLD",6037,"KRN",.4,0)
.4
"BLD",6037,"KRN",.401,0)
.401
"BLD",6037,"KRN",.402,0)
.402
"BLD",6037,"KRN",.403,0)
.403
"BLD",6037,"KRN",.5,0)
.5
"BLD",6037,"KRN",.84,0)
.84
"BLD",6037,"KRN",3.6,0)
3.6
"BLD",6037,"KRN",3.8,0)
3.8
"BLD",6037,"KRN",9.2,0)
9.2
"BLD",6037,"KRN",9.8,0)
9.8
"BLD",6037,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6037,"KRN",9.8,"NM",1,0)
PRSDUTIL^^0^B44515250
"BLD",6037,"KRN",9.8,"NM","B","PRSDUTIL",1)

"BLD",6037,"KRN",19,0)
19
"BLD",6037,"KRN",19.1,0)
19.1
"BLD",6037,"KRN",101,0)
101
"BLD",6037,"KRN",409.61,0)
409.61
"BLD",6037,"KRN",771,0)
771
"BLD",6037,"KRN",870,0)
870
"BLD",6037,"KRN",8989.51,0)
8989.51
"BLD",6037,"KRN",8989.52,0)
8989.52
"BLD",6037,"KRN",8994,0)
8994
"BLD",6037,"KRN","B",.4,.4)

"BLD",6037,"KRN","B",.401,.401)

"BLD",6037,"KRN","B",.402,.402)

"BLD",6037,"KRN","B",.403,.403)

"BLD",6037,"KRN","B",.5,.5)

"BLD",6037,"KRN","B",.84,.84)

"BLD",6037,"KRN","B",3.6,3.6)

"BLD",6037,"KRN","B",3.8,3.8)

"BLD",6037,"KRN","B",9.2,9.2)

"BLD",6037,"KRN","B",9.8,9.8)

"BLD",6037,"KRN","B",19,19)

"BLD",6037,"KRN","B",19.1,19.1)

"BLD",6037,"KRN","B",101,101)

"BLD",6037,"KRN","B",409.61,409.61)

"BLD",6037,"KRN","B",771,771)

"BLD",6037,"KRN","B",870,870)

"BLD",6037,"KRN","B",8989.51,8989.51)

"BLD",6037,"KRN","B",8989.52,8989.52)

"BLD",6037,"KRN","B",8994,8994)

"BLD",6037,"QUES",0)
^9.62^^
"BLD",6037,"REQB",0)
^9.611^1^1
"BLD",6037,"REQB",1,0)
PRS*4.0*82^2
"BLD",6037,"REQB","B","PRS*4.0*82",1)

"MBREQ")
0
"PKG",408,-1)
1^1
"PKG",408,0)
PAID^PRS^PAID
"PKG",408,20,0)
^9.402P^^
"PKG",408,22,0)
^9.49I^1^1
"PKG",408,22,1,0)
4.0^2950912^2960130
"PKG",408,22,1,"PAH",1,0)
99^3050222
"PKG",408,22,1,"PAH",1,1,0)
^^6^6^3050222
"PKG",408,22,1,"PAH",1,1,1,0)
This patch contains the fix necessary to remove the 
"PKG",408,22,1,"PAH",1,1,2,0)
supervisor/lead indicator if necessary based on the Employee
"PKG",408,22,1,"PAH",1,1,3,0)
Occupation Series & Title code that is downloaded from Central
"PKG",408,22,1,"PAH",1,1,4,0)
PAID. After this patch is installed, the supervisor/lead indicator
"PKG",408,22,1,"PAH",1,1,5,0)
field in file #450, field #41, will not be populated if the
"PKG",408,22,1,"PAH",1,1,6,0)
employee is no longer in a supervisory position.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRSDUTIL")
0^1^B44515250
"RTN","PRSDUTIL",1,0)
PRSDUTIL ;HISC/MGD-PAID DOWNLOAD UTILITY SUB-ROUTINES ;09/10/2003
"RTN","PRSDUTIL",2,0)
 ;;4.0;PAID;**32,82,99**;Sep 21, 1995
"RTN","PRSDUTIL",3,0)
PIC9 ;Replace 0s
"RTN","PRSDUTIL",4,0)
 S DIF=LTH-$L(GRPVAL) I DIF>0 F FF=1:1:DIF S GRPVAL="0"_GRPVAL
"RTN","PRSDUTIL",5,0)
 K DIF,FF Q
"RTN","PRSDUTIL",6,0)
SIGN ;Sign conversion
"RTN","PRSDUTIL",7,0)
 S L=$L(DATA),S=$E(DATA,L)
"RTN","PRSDUTIL",8,0)
 S LC=$S(S="{":0,S="A":1,S="B":2,S="C":3,S="D":4,S="E":5,S="F":6,S="G":7,S="H":8,S="I":9,S="}":0,S="J":1,S="K":2,S="L":3,S="M":4,S="N":5,S="O":6,S="P":7,S="Q":8,S="R":9,1:S)
"RTN","PRSDUTIL",9,0)
 S DATA=$E(DATA,1,L-1)_LC
"RTN","PRSDUTIL",10,0)
 S:(S="}")!(S="J")!(S="K")!(S="L")!(S="M")!(S="N")!(S="O")!(S="P")!(S="Q")!(S="R") DATA="-"_DATA
"RTN","PRSDUTIL",11,0)
 K L,LC,S Q
"RTN","PRSDUTIL",12,0)
D ;.0
"RTN","PRSDUTIL",13,0)
 S L=$L(DATA),DATA=$E(DATA,1,L-1)_"."_$E(DATA,L) K L G RZ
"RTN","PRSDUTIL",14,0)
DD ;.00
"RTN","PRSDUTIL",15,0)
 S L=$L(DATA),DATA=$E(DATA,1,L-2)_"."_$E(DATA,L-1,L) K L G RZ
"RTN","PRSDUTIL",16,0)
DDD ;.000
"RTN","PRSDUTIL",17,0)
 S L=$L(DATA),DATA=$E(DATA,1,L-3)_"."_$E(DATA,L-2,L) K L G RZ
"RTN","PRSDUTIL",18,0)
DDDD ;.0000
"RTN","PRSDUTIL",19,0)
 S L=$L(DATA),DATA=$E(DATA,1,L-4)_"."_$E(DATA,L-3,L) K L G RZ
"RTN","PRSDUTIL",20,0)
DDDDD ;.00000
"RTN","PRSDUTIL",21,0)
 S L=$L(DATA),DATA=$E(DATA,1,L-5)_"."_$E(DATA,L-4,L) K L G RZ
"RTN","PRSDUTIL",22,0)
AHRS ;Acct hrs
"RTN","PRSDUTIL",23,0)
 S L=$L(DATA),LD=$E(DATA,L),FD=$E(DATA,1,L-1)
"RTN","PRSDUTIL",24,0)
 S LD=$S(LD=0:"00",LD=1:25,LD=2:50,LD=3:75,1:LD)
"RTN","PRSDUTIL",25,0)
 S DATA=FD_"."_LD,DATA=+DATA
"RTN","PRSDUTIL",26,0)
 K FD,L,LD G RZ
"RTN","PRSDUTIL",27,0)
PCT ;%
"RTN","PRSDUTIL",28,0)
 S:+$P(DATA,".",2)=0 DATA=DATA\1
"RTN","PRSDUTIL",29,0)
 S DATA=DATA_"%" Q
"RTN","PRSDUTIL",30,0)
RZ ;Remove leading 0s
"RTN","PRSDUTIL",31,0)
 I +DATA=0 S DATA="" Q
"RTN","PRSDUTIL",32,0)
 S FC=$E(DATA,1)
"RTN","PRSDUTIL",33,0)
 S $P(DATA,".")=+$P(DATA,".")
"RTN","PRSDUTIL",34,0)
 I FC="-",$E(DATA,1)'="-" S DATA="-"_DATA
"RTN","PRSDUTIL",35,0)
 K FC Q
"RTN","PRSDUTIL",36,0)
DATE ;Convert Austin Date to Fileman Date
"RTN","PRSDUTIL",37,0)
 ;Austin's date has form xxYYMMDD or YYYYMMDD
"RTN","PRSDUTIL",38,0)
 Q:DATA=""
"RTN","PRSDUTIL",39,0)
 I $E(DATA,5,8)="0000" S DATA="" Q
"RTN","PRSDUTIL",40,0)
 N X,Y,%DT,DTOUT
"RTN","PRSDUTIL",41,0)
 S X=$E(DATA,5,8)_$S(+$E(DATA)'=$E(DATA):$E(DATA,3,4),1:$E(DATA,1,4))
"RTN","PRSDUTIL",42,0)
 S %DT="" D ^%DT
"RTN","PRSDUTIL",43,0)
 S DATA=$S(Y>0:Y,1:"")
"RTN","PRSDUTIL",44,0)
 Q
"RTN","PRSDUTIL",45,0)
LZ ;Insert leading 0s
"RTN","PRSDUTIL",46,0)
 F UUU=1:1:L-$L(DATA) S DATA=0_DATA
"RTN","PRSDUTIL",47,0)
 K L,UUU Q
"RTN","PRSDUTIL",48,0)
RTS ;Remove trailing spaces
"RTN","PRSDUTIL",49,0)
 Q:$E(DATA,$L(DATA))'=" "
"RTN","PRSDUTIL",50,0)
 F SLOOP=$L(DATA):-1 Q:$E(DATA,SLOOP)'=" "  S DATA=$E(DATA,1,SLOOP-1)
"RTN","PRSDUTIL",51,0)
 K SLOOP Q
"RTN","PRSDUTIL",52,0)
OT ;Output trans
"RTN","PRSDUTIL",53,0)
 Q:Y=""  S IEN454=0,IEN454=$O(^PRSP(454,1,SUB454,"B",Y,IEN454))
"RTN","PRSDUTIL",54,0)
 I IEN454>0,$P(^PRSP(454,1,SUB454,IEN454,0),U,2)'="" S Y=$P(^PRSP(454,1,SUB454,IEN454,0),U,2) I SUB454="ORG",$D(^PRSP(454.1,Y,0)) S Y=$P(^PRSP(454.1,Y,0),U,1)
"RTN","PRSDUTIL",55,0)
 K IEN454,SUB454 Q
"RTN","PRSDUTIL",56,0)
SOT ;State
"RTN","PRSDUTIL",57,0)
 Q:Y=""
"RTN","PRSDUTIL",58,0)
 S IEN5=0,IEN5=$O(^DIC(5,"C",Y,IEN5))
"RTN","PRSDUTIL",59,0)
 S Y=$S(IEN5>0:$P(^DIC(5,IEN5,0),U,1),1:Y)
"RTN","PRSDUTIL",60,0)
 K IEN5 Q
"RTN","PRSDUTIL",61,0)
AC ;Asgmnt code
"RTN","PRSDUTIL",62,0)
 Q:Y=""
"RTN","PRSDUTIL",63,0)
 S AC="",AC1="",OSC=$E($P(^PRSPC(D0,0),U,17),1,4)
"RTN","PRSDUTIL",64,0)
 F LLL=0:0 S LLL=$O(^PRSP(454,1,"ASS","B",Y,LLL)) Q:LLL=""  D  Q:AC'=""
"RTN","PRSDUTIL",65,0)
 .S OCCS=$P(^PRSP(454,1,"ASS",LLL,0),U,3)
"RTN","PRSDUTIL",66,0)
 .I OCCS="" S AC1=$P(^PRSP(454,1,"ASS",LLL,0),"^",2)
"RTN","PRSDUTIL",67,0)
 .I OCCS[OSC S AC=$P(^PRSP(454,1,"ASS",LLL,0),"^",2)
"RTN","PRSDUTIL",68,0)
 S Y=$S(AC'="":AC,1:AC1)
"RTN","PRSDUTIL",69,0)
 K AC,AC1,LLL,OCCS,OSC Q
"RTN","PRSDUTIL",70,0)
TITLE ;Title
"RTN","PRSDUTIL",71,0)
 I DATA="      " S DATA="" Q
"RTN","PRSDUTIL",72,0)
 S LD=$E(DATA,6) S:LD'?1N $P(^PRSPC(IEN,0),U,42)=LD
"RTN","PRSDUTIL",73,0)
 I $P(^PRSPC(IEN,0),U,42)?1U&(LD?1N) S $P(^PRSPC(IEN,0),U,42)=""
"RTN","PRSDUTIL",74,0)
 K LD Q
"RTN","PRSDUTIL",75,0)
NH ;Norm Hrs
"RTN","PRSDUTIL",76,0)
 S DATA=+DATA,DB=$P(^PRSPC(IEN,0),U,10)
"RTN","PRSDUTIL",77,0)
 S NH=$S(DATA>0:DATA,DB=1:80,DB=2:DATA,DB=3:0,1:0)
"RTN","PRSDUTIL",78,0)
 S $P(^PRSPC(IEN,0),U,50)=NH
"RTN","PRSDUTIL",79,0)
 K DB,NH Q
"RTN","PRSDUTIL",80,0)
STEP ;Step
"RTN","PRSDUTIL",81,0)
 I DATA="  " S DATA="" Q
"RTN","PRSDUTIL",82,0)
 S:$E(DATA,1)=" " DATA=$E(DATA,2) Q
"RTN","PRSDUTIL",83,0)
ORGCC ;Org/Cost Cntr
"RTN","PRSDUTIL",84,0)
 I DBNAME="MXORGCOD" S COST=$E(DATA,1,4),$P(^PRSPC(IEN,0),U,18)=COST
"RTN","PRSDUTIL",85,0)
 S CCORG=$E(DATA,1,4)_":"_$E(DATA,5,8)
"RTN","PRSDUTIL",86,0)
 I '$D(^PRSP(454,1,"ORG","B",CCORG)) K DD,DO S DIC="^PRSP(454,1,""ORG"",",DIC(0)="L",DLAYGO=454,X=CCORG D FILE^DICN S ^TMP($J,"ORG",CCORG)=""
"RTN","PRSDUTIL",87,0)
 K COST,CCORG,DIC,DLAYGO,X Q
"RTN","PRSDUTIL",88,0)
PVAE ;Prior VA Exp
"RTN","PRSDUTIL",89,0)
 F ABC=1:1:$L(DATA) S PV=$E(DATA,ABC),PIECE=$S(PV="A":1,PV="B":2,PV="C":3,PV="D":4,PV="E":5,PV="F":6,PV="G":7,PV="H":8,PV="I":9,PV="J":10,PV="K":11,PV="L":12,PV="M":13,PV=0:ABC,1:"") S:PIECE'="" $P(^PRSPC(IEN,NODE),U,PIECE)=PV
"RTN","PRSDUTIL",90,0)
 K ABC,PV Q
"RTN","PRSDUTIL",91,0)
ZIP ;Zip
"RTN","PRSDUTIL",92,0)
 I +DATA=0 S DATA="" Q
"RTN","PRSDUTIL",93,0)
 I $E(DATA,6,9)="0000" S DATA=$E(DATA,1,5) Q
"RTN","PRSDUTIL",94,0)
 S DATA=$E(DATA,1,5)_"-"_$E(DATA,6,9) Q
"RTN","PRSDUTIL",95,0)
NPLWOP ;Nonpay & LWOP Hrs
"RTN","PRSDUTIL",96,0)
 S LVGRP=$P(^PRSPC(IEN,0),U,15)
"RTN","PRSDUTIL",97,0)
 S NPLWOP=$S((LVGRP=4)!(LVGRP=5):$J((DATA/14)*80,1,0),1:DATA)
"RTN","PRSDUTIL",98,0)
 I DBNAME="ANONPATIME" S $P(^PRSPC(IEN,1),U,43)=NPLWOP S:TYPE="P" $P(^PRST(459,PPIEN,"P",IEN,6),U,5)=NPLWOP
"RTN","PRSDUTIL",99,0)
 I DBNAME="ALWOPUSED" S $P(^PRSPC(IEN,"LWOP"),U,11)=NPLWOP S:TYPE="P" $P(^PRST(459,PPIEN,"P",IEN,4),U,9)=NPLWOP
"RTN","PRSDUTIL",100,0)
 K LVGRP,NPLWOP Q
"RTN","PRSDUTIL",101,0)
NEWSSN ;New SSN
"RTN","PRSDUTIL",102,0)
 I $L(DATA)<9 S L=9 D LZ
"RTN","PRSDUTIL",103,0)
 Q
"RTN","PRSDUTIL",104,0)
COMP ;0 out comp time bal
"RTN","PRSDUTIL",105,0)
 I DATA="",$E(^PRSPC(IEN,"COMP"),1,7)="^^^^^^^",$P(^PRSPC(IEN,"COMP"),U,9)'="" F ABC=9:1:17 S $P(^PRSPC(IEN,"COMP"),U,ABC)=""
"RTN","PRSDUTIL",106,0)
 Q
"RTN","PRSDUTIL",107,0)
OST ;Occupation Series & Title Output Transform
"RTN","PRSDUTIL",108,0)
 S OSC=Y,OSC14=$E(Y,1,4),OSC15=$E(Y,1,5),LD=$E(Y,6)
"RTN","PRSDUTIL",109,0)
 G:LD?1N OSTOT
"RTN","PRSDUTIL",110,0)
 I OSC14<2200 S NLD=$S((LD="A")!(LD="J"):1,(LD="B")!(LD="K"):2,(LD="C")!(LD="L"):3,(LD="D")!(LD="M"):4,(LD="E")!(LD="N"):5,(LD="F")!(LD="O"):6,(LD="G")!(LD="P"):7,(LD="H")!(LD="Q"):8,(LD="I")!(LD="R"):9,1:LD) S Y=OSC15_NLD
"RTN","PRSDUTIL",111,0)
 I OSC14>2600,LD'?1N S Y=OSC15_"0"
"RTN","PRSDUTIL",112,0)
OSTOT S SUB454="OCC" D OT^PRSDUTIL K SUB454
"RTN","PRSDUTIL",113,0)
 I OSC14<2200,(LD="A")!(LD="B")!(LD="C")!(LD="D")!(LD="E")!(LD="F")!(LD="G")!(LD="H")!(LD="I") S:(Y'["OFFICER")!(Y="POLICE OFFICER") Y="SUPERVISORY "_Y G OSTEX
"RTN","PRSDUTIL",114,0)
 I OSC14<2200,(LD="J")!(LD="K")!(LD="L")!(LD="M")!(LD="N")!(LD="O")!(LD="P")!(LD="Q")!(LD="R") S Y="LEAD "_Y G OSTEX
"RTN","PRSDUTIL",115,0)
 I OSC14>2600,(LD="F")!(LD="G")!(LD="H")!(LD="L")!(LD="S") S SUF=$S(LD="H":" HELPER",LD="L":" LEADER",LD="F":" FOREMAN",LD="G":" GENERAL FOREMAN",LD="S":" SUPERVISOR",1:LD),Y=Y_SUF
"RTN","PRSDUTIL",116,0)
OSTEX K OSC,OSC14,OSC15,LD,NLD,SUF
"RTN","PRSDUTIL",117,0)
 Q
"RTN","PRSDUTIL",118,0)
 ;
"RTN","PRSDUTIL",119,0)
LD ; Set Labor Distribution fields into Multiple.
"RTN","PRSDUTIL",120,0)
 N PRSTMP
"RTN","PRSDUTIL",121,0)
 S PRSTMP=DATA,DATA=$E(DATA,1,4)
"RTN","PRSDUTIL",122,0)
 D LD^PRSDSET
"RTN","PRSDUTIL",123,0)
 S DATA=PRSTMP
"RTN","PRSDUTIL",124,0)
 Q
"RTN","PRSDUTIL",125,0)
 ;==============================================================
"RTN","PRSDUTIL",126,0)
PATCH32 ;Subprograms LOOP450 and DTCMP are post-installation routines 
"RTN","PRSDUTIL",127,0)
 ;for patch PRS*4*32.  They have no other intended use.
"RTN","PRSDUTIL",128,0)
 ;Convert fields that have received year 2000 dates from Austin.
"RTN","PRSDUTIL",129,0)
 ;Loop thru all employee records.  Within employee records loop thru
"RTN","PRSDUTIL",130,0)
 ;the 9 nodes (see ND variable) in each record that contain potential 
"RTN","PRSDUTIL",131,0)
 ;problem dates.  Traverse the up arrow delimited data in each node, 
"RTN","PRSDUTIL",132,0)
 ;but only check the pieces defined in the CHECK array nodes.
"RTN","PRSDUTIL",133,0)
 ;Convert dates in those fields that fall between jan 01, 1900 and
"RTN","PRSDUTIL",134,0)
 ;DEC 31, 1910 inclusively.  The conversion will only change the
"RTN","PRSDUTIL",135,0)
 ;century to the 21st.
"RTN","PRSDUTIL",136,0)
 ;
"RTN","PRSDUTIL",137,0)
 ;
"RTN","PRSDUTIL",138,0)
 Q
"RTN","PRSDUTIL",139,0)
 ;==============================================================
"RTN","PRSDUTIL",140,0)
LOOP450 ;
"RTN","PRSDUTIL",141,0)
 ;
"RTN","PRSDUTIL",142,0)
 ;****Keep post-installation from running on subsequent patch installs
"RTN","PRSDUTIL",143,0)
 I $$PATCH^XPDUTL("PRS*4.0*32") D MSSG(0) Q
"RTN","PRSDUTIL",144,0)
 ;
"RTN","PRSDUTIL",145,0)
 D MSSG(1)
"RTN","PRSDUTIL",146,0)
 N CHECK,ND,REC,PIECES,XPDIDTOT,DIV,%
"RTN","PRSDUTIL",147,0)
 S CHECK(0)="51^"
"RTN","PRSDUTIL",148,0)
 S CHECK(1)="30^"
"RTN","PRSDUTIL",149,0)
 S CHECK(2)="2^3^4^5^6^7^8^9^10^11^12^13^14^15^16^17^18^20^22^23^24^25^26^27^28^29^30^31^32^"
"RTN","PRSDUTIL",150,0)
 S CHECK(3)="1^2^3^4^5^6^7^8^9^10^11^12^13^14^15^16^19^20^21^22^"
"RTN","PRSDUTIL",151,0)
 S CHECK(4)="1^2^3^4^5^6^7^8^9^10^11^12^13^14^15^16^17^18^19^20^"
"RTN","PRSDUTIL",152,0)
 S CHECK("PCD")="4^"
"RTN","PRSDUTIL",153,0)
 S CHECK("MSD2")="9^"
"RTN","PRSDUTIL",154,0)
 S CHECK("BOND1")="12^"
"RTN","PRSDUTIL",155,0)
 S CHECK("BOND2")="11^"
"RTN","PRSDUTIL",156,0)
 S CHECK("TSP1")="5^12^14^"
"RTN","PRSDUTIL",157,0)
 ;
"RTN","PRSDUTIL",158,0)
 S XPDIDTOT=$P($G(^PRSPC(0)),"^",4)
"RTN","PRSDUTIL",159,0)
 S DIV=XPDIDTOT\20
"RTN","PRSDUTIL",160,0)
 S %=0
"RTN","PRSDUTIL",161,0)
 S REC=0 F  S REC=$O(^PRSPC(REC))  Q:REC'>0  D
"RTN","PRSDUTIL",162,0)
 . S %=%+1
"RTN","PRSDUTIL",163,0)
 . I '(%#DIV) D UPDATE^XPDID(%)
"RTN","PRSDUTIL",164,0)
 . S ND=""
"RTN","PRSDUTIL",165,0)
 . F  S ND=$O(CHECK(ND)) Q:ND=""  D
"RTN","PRSDUTIL",166,0)
 ..   I $G(^PRSPC(REC,ND))'="" D
"RTN","PRSDUTIL",167,0)
 ...     S PIECES=CHECK(ND)
"RTN","PRSDUTIL",168,0)
 ...     D DTCMP(REC,ND,$G(^PRSPC(REC,ND)),PIECES)
"RTN","PRSDUTIL",169,0)
 Q
"RTN","PRSDUTIL",170,0)
 ;==============================================================
"RTN","PRSDUTIL",171,0)
DTCMP(IEN,NODE,DATANODE,PIECES) ;
"RTN","PRSDUTIL",172,0)
 ;Look at all PEICES in a single DATANODE of an employee's record
"RTN","PRSDUTIL",173,0)
 ;and convert dates from 1900-1910 to respective dates in 2000-2010.
"RTN","PRSDUTIL",174,0)
 N PIECE,NEXT,NEWDATE,DATA
"RTN","PRSDUTIL",175,0)
 F NEXT=1:1 S PIECE=$P(PIECES,"^",NEXT)  Q:PIECE=""  D
"RTN","PRSDUTIL",176,0)
 .  S DATA=$P(DATANODE,"^",PIECE)
"RTN","PRSDUTIL",177,0)
 .  I (DATA<2110101),(DATA>1991231) D
"RTN","PRSDUTIL",178,0)
 ..   S NEWDATE="3"_$E(DATA,2,7)
"RTN","PRSDUTIL",179,0)
 ..   S $P(^PRSPC(IEN,NODE),"^",PIECE)=NEWDATE
"RTN","PRSDUTIL",180,0)
 Q
"RTN","PRSDUTIL",181,0)
 ;==============================================================
"RTN","PRSDUTIL",182,0)
MSSG(FLAG) ;OUT PUT POST INSTALLATION MESSAGE.
"RTN","PRSDUTIL",183,0)
 N MSSG
"RTN","PRSDUTIL",184,0)
 I FLAG S MSSG="Checking date fields in File 450."
"RTN","PRSDUTIL",185,0)
 E  S MSSG="Date fields not checked.  Checked during previous install of PRS*4*32"
"RTN","PRSDUTIL",186,0)
 D MES^XPDUTL(MSSG)
"RTN","PRSDUTIL",187,0)
 Q
"RTN","PRSDUTIL",188,0)
 ;==============================================================
"VER")
8.0^22.0
"BLD",6037,6)
^SEQ #91
**END**
**END**

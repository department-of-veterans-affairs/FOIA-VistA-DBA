$TXT Created by CHESNEY,CHRISTINE M at VAB-RAD.ISC-SF.VA.GOV  (KIDS) on TUESDAY, 05/22/01 at 07:26
=============================================================================
Run Date: JUN 07, 2001                     Designation: MPIF*1*9
Package : MPIF - MASTER PATIENT INDEX VISTA Priority: Mandatory
Version : 1        SEQ #13                      Status: Released
=============================================================================

Associated patches: (v)MPIF*1*1    <<= must be installed BEFORE `MPIF*1*9'
                    (v)MPIF*1*3    <<= must be installed BEFORE `MPIF*1*9'
                    (v)DG*5.3*361  <<= must be installed BEFORE `MPIF*1*9'
                    (v)RG*1*18     <<= must be installed BEFORE `MPIF*1*9'

Subject: Automatic Inactivation of Patients from MPI

Category: 
  - Routine

Description: 
============

   NOTE:  MPIF and RG patches should NOT be installed on Legacy systems to
   avoid issues with the legacy systems ending up as CMORs, Treating
   Facilities or Subscribers.
  
   ISSUE 1:  When patient entries are ZZ'd (at least 2 Z's) in the Patient
   file (#2), these patients could possibly have an ICN assignment and 
   should be inactivated from the MPI.  To automate this process, the 
   NAME field (.01) in the Patient file (#2) has an additional
   cross-reference to inactivate the ICN from the MPI when ZZ'd.
   Patch DG*5.3*361 will add a new cross-reference (AMPIZZ) to the Name
   field (.01) in the Patient file (#2).  The business rules for
   inactivating an ICN are still enforced. [Must be the CMOR and not
   shared.] If the patient is shared or if the site isn't the CMOR, an
   exception message will be generated to the MPIF EXCEPTIONS mail group
   for further action.
  
   NOTE: Both patches have to be in place for the automatic inactivation to
   happen. 
  
   The Post Init routine will loop through the "B" cross-reference of
   the Patient file (^DPT) to check if any existing patients meet the 
   criteria (name starts with at least 2 Z's).  If any are found, they will
   be inactivated from the MPI, following all the inactivation rules.
  
  
   ISSUE 2:  The ICN CHECKSUM can have a leading zero and it is being 
   dropped when stored due to the field being defined as a numeric. The 
   field ICN CHECKSUM (#991.02) in the Patient file (#2) has been modified
   to be of type string instead of numeric.  This change will allow future
   APIs to validate using the checksum to determine that the ICN is valid.
  
   This change is included in patch DG*5.3*361.
  
   ISSUE 3:  When a Local ICN is inactivated an HL7 message is sent to
   the MPI to be removed.  Since the MPI doesn't know about Local ICNs,
   this is resulting in an exception message on the MPI for ICN not found.
   MPIFDEL has been modified to stop the sending of the HL7 message if the
   ICN is a Local.
  
   ISSUE 4:  When a Local ICN is updated to a National, it is possible that
   an A30 Merge message is sent to the MPI.  Since the Local ICN is not
   known at the MPI or the other CIRN sites (not sent prior to patch), it
   should not be sent. MPIFMER has been modified to stop the sending of
   the HL7 message if the ICN is a Local.
  
   ISSUE 5:  Several sites have requested an "Are you sure?" prompt when
   inactivating an ICN from the MPI.  This change has been made and is in
   routine MPIFDEL.
  
   ISSUE 6:  If a user attempts to inactivate a patient that doesn't have
   an ICN, a message will be displayed to the user that CMOR isn't defined.
   This has been changed to "** Patient Does NOT have an ICN **".  This
   change has been made and is in routine MPIFDEL.
  
   ISSUE 7:  NVS and several sites have asked for a more descriptive
   message when the ICN Inactivation process has been completed.  Prior to
   this patch, it just displayed, "DONE".  It has been changed to "***
   Inactivated on YOUR system, message sent to MPI to Inactivate ***".
   This change has been made and is in routine MPIFDEL.
  
   ISSUE 8:  Currently the Local/Missing ICN Resolution job will send
   patients that have been ZZ'd.  VTQ1^MPIFVTQ states that ZZ'd patients
   will not be sent, but the check was not in place.  This has been
   corrected.
  
   ISSUE 9:  APIs SETICN^MPIF001 and ICNLC^MPIF001 have been changed to
   prevent ICNs from being assigned to patients that have been ZZ'd or have
   5 leading zeros in the SSN field (#.09).
    
   TEST SITES:
   ==========
    
   Bay Pines
   Nashville 
   Northern California
  
  
   Routine Summary:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
    
   <TAB>;;1.0; MASTER PATIENT INDEX VISTA ;**[Patch List]**;30 Apr 99
   CHECK^XTSUMBLD results:
    
   Routine       Before Patch       After Patch       Patch List
   --------      ------------       ------------      ----------
   MPIF109P        <NEW>              527175             9
   MPIF001         8244358           8590159             1,3,9
   MPIFDEL         5633273           7688411             1,3,9
   MPIFMER         5313359           5191285             9
   MPIFVTQ        15218414          15812033             1,9
  
  
   INSTALLATION INSTRUCTIONS:
   ==========================
  
    This patch should be loaded during non-peak hours to minimize
    disruption to the users.
   
    The time that this patch will take to install, due to the post
    init will depend on the number of patients that have been ZZ'd
    and have ICNs (Local or National).
   
    1.  Users are allowed on the system during patch installation.
   
    2.  Stop Inbound HL7 filer(s) via the "Monitor, Start, Stop Filers"
        option on the "Filer and Link Management" menu which can be found
        on the "HL7 Main Menu".  
   
    3.  TaskMan does not need to be stopped or placed in a wait state. 
   
    4.  These routines are not usually mapped, so you will probably not
        have to disable mapping. 
  
    5.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. [Note:
        TEXT PRINT/DISPLAY option in the PackMan menu will display the
        patch text only.]
  
    6.  From the Kernel Installation and Distribution System Menu, select
        the Installation menu.  
   
    7.  From this menu, you may elect to use the following options:
        a.  Backup a Transport Global - this option will create a backup
            message of any routines exported with the patch.  It will NOT
            backup any other changes such as DDs or templates.
        b.  Compare Transport Global to Current System  - this option will
            allow you to view all changes that will be made when the patch
            is installed.  It compares all components of the patch
            (routines, DDs, templates, etc.).
        c.  Verify Checksums in Transport Global - this option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
        d.  Print Transport Global - this option will allow you to view the
            components of the KIDS build.
   
    8.  Use the Install Package(s) option and select the package
        MPIF*1.0*9.
   
    9.   When prompted, 'Want KIDS to INHIBIT LOGONs during the Install?
         YES//', respond No.
         When prompted 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols? YES//', respond Yes.
  
         Inactivate Patient from MPI             [MPIF PAT INACT]
        
    10.  Restart the HL7 Inbound filer(s) via the same options in step #2.
  
    11.  If routines were unmapped in step 4, remap them once install has 
         completed.
  
    12.  Routine MPIF109P is deleted upon successful completion of this
         install.

Routine Information:
====================

Routine Name:
  - MPIFDEL


Routine Checksum:

Routine Name:
  - MPIFMER


Routine Checksum:

Routine Name:
  - MPIF109P


Routine Checksum:

Routine Name:
  - MPIF001


Routine Checksum:

Routine Name:
  - MPIFVTQ


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : CHESNEY,CHRISTINE M           Date Entered : NOV 16, 2000
Completed By: SINGH,GURBIR                  Date Completed: JUN 06, 2001
Released By : SIVLEY,JIMMIE SUE            Date Released : JUN 07, 2001
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by FORT,WALLY at NXT.KERNEL.ISC-SF.VA.GOV  (KIDS) on MONDAY, 07/27/98 at 14:23
=============================================================================
Run Date: AUG 06, 1998                     Designation: XU*8*69
Package : XU - KERNEL                          Priority: Mandatory
Version : 8        SEQ #74                      Status: Released
=============================================================================


Subject: ZIS NOIS fixes

Category: 
  - Routine
  - Data Dictionary

Description: 
============

  
  
  ***************************************************************************
  Because the %ZIS global is a shared global between many accounts this patch
  needs to be installed in each account that access to the %ZIS global at the
  same time.
  ***************************************************************************
  Read below about changes in how the MARGIN and PAGE LENGTH fields in the
  device file have changed.
  ***************************************************************************
  
                  ZISUTL   Errors at Lake City/ Gainsville (a CIRN site) when 
                           using the Direct Connect and a printer had been 
                           selected but not Opened and the XCSA routine made 
                           use of the USE^%ZISUTL call to restore IO variables. 
                           
  TAM-0298-31594  ZISUTL   Error at Tampa when saved device in Direct Connect
                           had a IO="". Fixed by not saving device.
                           
  MAN-0997-11116  ZIS4ONT  Missing lines in spooler output.
  STC-0997-40029
  
  BRX-0496-11600  ZIS1     If a job is queued to a device name that isn't
                           defined you get a UNDEF error at SETVAR^%ZIS1.
                           This has been fixed.
                           
                  ZISTCP   Trapping CLOSE errors without clearing $ECODE
                           caused problems.
                           Move the OpenM server code to ZISTCPS so the
                           listen tag will work as a single thread server
                           under all OS's.  This causes a change to mail-
                           man routine XMRONT, part of patch XM*7.1*28.
                           
  AIM-1097-N1741  ZIS4*    When opening a slave device $X and $Y didn't
                  ZIS3     get set to zero.
                  
  E3R 10153       ZIS2     If a device has a Access Prohibited time the
                           range was not displayed.
                  
  ISD-0197-71937  ZISS     Getting some Execute fields with a $P when
                  ZISS1    the complete node is needed.
                  ZISS2
                  ZISP
  
  WPB-0897-31818  ZISPL    Under LIST spool document it would only show
                           the HOME device as having printed anything.
                           This was because the File was updated before
                           the device was asked.
  BRK-1197-11008           The Spool data file wasn't getting cleaned up
                           when the Spooler purge routine ran.
                           
  CLA-0498-22781   ZIS6    Routine %ZIS6 was setting the wrong global for
                           the resource slot sub-file zero node. This has
                           been fixed, The post init will clean-up the
                           ^%ZIS(3.54,n,1,0) nodes.  The TRIGGER X-ref
                           on the $I field of the device file was forceing
                           new entries into the resource file.  This has
                           been fixed and the extra entries will be removed
                           in the post init.
  
  With this Kernel patch we have deleted fields *FORM FEED, *BACK SPACE from 
  the device file.  Removed the asterik from fields *MARGIN WIDTH, *PAGE LENGTH 
  in the device file while changing the way they work
   
  First, the X-ref that stuffs these fields when the SUBTYPE field is edited
  will be removed so that the MARGIN WIDTH and PAGE LENGTH fields can act as
  overrides to the Terminal Type file fields.
   
  This way if the terminal type file is edited all devices that point to
  this entry will get the new values right away, without having to re-index
  the subtype field of the device file.
   
  If a particular device has the same characteristics as others of the same
  type but has a different paper size, a new terminal type will not be
  needed.
  
                   Checksum
  Routine         Old       New      2nd Line
  XUDHRES        917964   1098608    **49,69**
  XUINPCH       3950316   4506459    **20,36,49,63,65,69**
  ZIS           9308978   9534282    **18,23,69**
  ZIS1         10316454  10963783    **18,49,69**
  ZIS2         10804239  10569129    **69**
  ZIS3          6450084   5727193    **18,36,69**
  ZIS4MSM       7202298   7301961    **23,36,49,59,69**
  ZIS4ONT       8238234   7540912    **34,59,69**
  ZIS4VXD       8151150   7956394    **23,36,49,59,69**
  ZIS5          7634324   7647180    **18,24,69**
  ZIS6          9917028   9295013    **24,49,69**
  ZISC          7980129   8004258    **24,36,49,69**
  ZISP          1595683   1756861    **69**
  ZISPL        12813725  14330151    **23,69**
  ZISPL1        8550686   8439616    **23,36,69**
  ZISPL2        4088281   4750042    **23,36,69**
  ZISS          8559518   8580158    **69**
  ZISS1         7994076   7921540    **69**
  ZISS2          845268    846028    **69**
  ZISTCP        2660587   2862626    **36,34,59,69**
  ZISUTL        2111550   2112295    **18,24,34,69**
  ZTMGRSET     12724965  13594462    **34,36,69**
  
  
  ========================================================================= 
  Installation:
  
    1.  DSM sites - Some of these routines are usually mapped,
        so you will need to disable mapping for the effected routines.
        
    2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.
        
    3.  The patch has now been loaded into a Transport global on your
        system. You now need to use KIDS to install the Transport global.
        On the KIDS menu, under the 'Installation' menu, use the following
        options:
        
           Verify Checksum's in Transport Global
           Print Transport Global
           Compare Transport Global to Current System
           Backup a Transport Global
           
   4.   Inhibit users from login into the system. (If you install when few
        user are on the system and the possibility of some CLOBER errors is
        acceptable then users can stay on the system.)
        Also place TASKMAN in a wait state.
        
    5.  On the KIDS menu, under the 'Installation' menu, use the following
        option:
           Install Package(s)  'XU*8.0*69'
                                =========
           
    7.  MSM Sites - Answer YES to the question 'Want to MOVE routines to
        other CPUs?'. Enter the names of your Compute and Print server(s).
        
    8.  After installing this patch, 
        DSM/MSM sites - you need to move several routines from 
        your production account to each manager account:
        OpenM Sites - you don't need to move anything, skip this step.
        ZIS,ZIS1,ZIS2,ZIS3,ZIS5,ZIS6,ZISC
        ZIS4MSM,ZIS4VXD,ZIS4ONT
        ZISS,ZISS1,ZISS2,ZISP
        ZISUTL
        ZISTCP
        ZTMGRSET
        And in the manager account,  (OpenM sites remain in VAH)
         
        All sites:
        DO RELOAD^ZTMGRSET
        Select the System
        Patch number to load: 69
                              ==
         
    9.  MSM sites move these routines to the MGR accounts on other CPU's.
    
   10.  ALL sites move routine XUINPCH to all other accounts that share the
        %ZIS global and "D POST69^XUINPCH" to clean-up the DD for that account.
        
   11.  DSM Sites, after patch has installed, rebuild your map set.
   
   12.  Enable user's login.
        Remove Taskman from WAIT State.
        
  =========================================================================
   
  

Routine Information:
====================

Routine Name:
  - XUINPCH


Routine Checksum:

Routine Name:
  - ZIS


Routine Checksum:

Routine Name:
  - ZIS1


Routine Checksum:

Routine Name:
  - ZIS2


Routine Checksum:

Routine Name:
  - ZIS3


Routine Checksum:

Routine Name:
  - ZIS4MSM


Routine Checksum:

Routine Name:
  - ZIS4ONT


Routine Checksum:

Routine Name:
  - ZIS4VXD


Routine Checksum:

Routine Name:
  - ZIS5


Routine Checksum:

Routine Name:
  - ZIS6


Routine Checksum:

Routine Name:
  - ZISC


Routine Checksum:

Routine Name:
  - ZISP


Routine Checksum:

Routine Name:
  - ZISPL


Routine Checksum:

Routine Name:
  - ZISPL1


Routine Checksum:

Routine Name:
  - ZISPL2


Routine Checksum:

Routine Name:
  - ZISS


Routine Checksum:

Routine Name:
  - ZISS1


Routine Checksum:

Routine Name:
  - ZISS2


Routine Checksum:

Routine Name:
  - ZISTCP


Routine Checksum:

Routine Name:
  - ZISUTL


Routine Checksum:

Routine Name:
  - ZTMGRSET


Routine Checksum:

Routine Name:
  - XUDHRES


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : FORT,WALLY                     Date Entered : OCT 27, 1997
Completed By: SCHRAM,JACK D                Date Completed: JUL 29, 1998
Released By : GIBBONS,JOE                   Date Released : AUG 06, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

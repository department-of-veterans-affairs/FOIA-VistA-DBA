$TXT Created by NAPOLIELLO,GREG S at LAWVAA.FO-BIRM.MED.VA.GOV  (KIDS) on Thursday, 05/19/05 at 14:41
=============================================================================
Run Date: AUG 08, 2005                     Designation: PSO*7*203
Package : PSO - OUTPATIENT PHARMACY           Priority: EMERGENCY
Version : 7       SEQ #182                      Status: Released
                  Compliance Date: AUG 11, 2005
=============================================================================

Associated patches: (v)PSO*7*118   <<= must be installed BEFORE `PSO*7*203'
                    (v)PSS*1*96    <<= must be installed BEFORE `PSO*7*203'

Subject: FIX UNDEFINED WHEN ADDING NON-VA MEDS 

Category: 
  - Routine

Description:
============

 When a Non-VA Medication is ordered via Computerized Patient Record 
 System (CPRS), a problem occurs.  When the medication is signed, it
 generates an undefined error and quits.  Also, the system does not send
 the order to the VistA PHARMACY PATIENT file (#55) as designed.  This
 patch corrects this problem.
  
  
 HD68531  PUG-1204-51094  <UNDEFINED>REIN+16~PSONVNEW
 Problem:
 --------
 This problem only occurs while ordering a Non-VA MED via CPRS.  The error 
 occurs if the route is picked, which comes from the MEDICATION ROUTE file 
 (#51.2), OUTPATIENT EXPANSION (#4) field, and this route text is
 greater than 20 characters in length.  This text is sent to VistA and is
 in the process of uploading into the PHARMACY PATIENT file (#55) of the
 NON-VA MEDS multiple (#55.05) and into the MEDICATION ROUTE field (#3).  
 The OUTPATIENT EXPANSION (#4) field is defined as 50 characters long and
 therefore, if it is greater than 20, it will cause the error, when Fileman
 tries to file text into the smaller MEDICATION ROUTE (#3) field.
  
 The error will also occur if the Dosage field in CPRS is entered and
 is larger than 80 characters, the defined length of the DOSAGE field (#2)
 in the PHARMACY PATIENT file (#55) in the NON-VA MEDS multiple (#55.05).
  
 The error will also occur if the Schedule field in CPRS is entered and
 is larger than 50 characters, the defined length of the SCHEDULE field
 (#4) in the PHARMACY PATIENT file #(55) in the NON-VA MEDS multiple
 (#55.05).
  
  
 Resolution:
 -----------
 Solution is to change the data dictionary for the MEDICATION ROUTE 
 (#4) field and make it larger than 20 characters.  This Data Dictionary 
 change will be in PHARMACY DATA MANAGEMENT v1.0 patch PSS*1*96.  The
 largest this file will support is 40, therefore, the data dictionary will
 be changed to length 40 on this field and the routine will also be changed
 not to validate the three fields prior to uploading them into the PHARMACY
 PATIENT file #(55).
  
  
 Associated NOIS/Remedy:
 =======================
 Primary: HD68531  PUG-1204-51094  <UNDEFINED>REIN+16~PSONVNEW
    Dups: HD68649  DUB-0105-30652  bad nodes (-1) in file 55
          HD68708  MAC-0105-61642  Comment made on non-existant
                                           NON-VA item
          HD68879  BIL-0205-31113  REIN+16~PSONVNEW
          HD68875  SPO-0205-51095  Server Error when entering 
                                           Albuterol Soln as Non-VA Med
          HD68904  FAV-0205-71237  Server Error with Non-VA Med 
                                           entries
          HD85787  When try to enter Non-VA IVPB get M ERROR
          HD86945  Error entering Non-VA Meds
          HD104330 <UNDEFINED>REIN+16^PSONVNEW 
  
  
 Associated E3R(s):
 ==================
 N/A
  
  
 Test Sites:
 ===========
 Walla Walla, WA
 Biloxi, MS
 Puget Sound HCS
 Oklahoma City, OK
 Dublin, GA 
  
 Routine Summary
 ===============
 The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;7.0;OUTPATIENT PHARMACY;**[patch list]**;DEC 1997
  
                             CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch       Patch List
 ============      ============          ===========       ===========
 PSONVNEW              10163460             10300356       132,118,203
  
           Total number of routines - 1
  
  
 Installation Instructions:
 ==========================
 It is recommended that this patch be installed after normal business 
 hours while no Outpatient Pharmacy users are processing orders.  The 
 associated Pharmacy Data Management v1.0 patch PSS*1*96 should be
 installed prior to this patch.
  
 Installation will take less than 2 minutes.
  
 1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2. Review your mapped set. If the routines are mapped, they should be
    removed from the mapped set at this time.
  
 3. From the Kernel Installation & Distribution System menu, select the 
    Installation menu.
  
 4. From this menu, you may select to use the following options: (when     
    prompted for INSTALL NAME, enter PSO*7.0*203)
  
      a.  Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
      
      b.  Print Transport Global - This option will allow you to view
          the components of the KIDS build.
      
      c.  Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this 
          patch is installed.  It compares all components of this patch
          (routines, DD's, templates, etc.).
      
      d.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as DD's or templates.
  
  
 5. Use the Install Package(s) option and select the package      
    PSO*7.0*203. 
  
 6. When Prompted "Want KIDS to INHIBIT LOGONs during the install? 
    YES//" respond NO. 
  
 7. When Prompted "Want to DISABLE Scheduled Options, Menu Options, and 
    Protocols? YES//" respond NO.
  
 8. If Routines were unmapped as part of step 2, they should be   
    returned to the mapped set once the installation has run to 
    completion. 

Routine Information:
====================

Routine Name:
  - PSONVNEW


Routine Checksum:

=============================================================================
User Information:
Entered By  : NAPOLIELLO,GREG               Date Entered  : FEB 28, 2005
Completed By: CROSSMAN,PAM                  Date Completed: AUG 04, 2005
Released By : CONSENTINO,ALBERT             Date Released : AUG 08, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released WV*1*6 SEQ #6
Extracted from mail message
**KIDS**:WV*1.0*6^

**INSTALL NAME**
WV*1.0*6
"BLD",1652,0)
WV*1.0*6^WOMEN'S HEALTH^0^2990513^y
"BLD",1652,1,0)
^^2^2^2990416^^^
"BLD",1652,1,1,0)
Please read the WV*1*6 patch description on FORUM for an explanation of
"BLD",1652,1,2,0)
what this patch does.
"BLD",1652,4,0)
^9.64PA^790.02^3
"BLD",1652,4,790.02,0)
790.02
"BLD",1652,4,790.02,2,0)
^9.641^790.02^1
"BLD",1652,4,790.02,2,790.02,0)
WV SITE PARAMETER  (File-top level)
"BLD",1652,4,790.02,2,790.02,1,0)
^9.6411^.24^1
"BLD",1652,4,790.02,2,790.02,1,.24,0)
IMPORT TESTS FROM LAB
"BLD",1652,4,790.02,222)
y^n^p^^^^n
"BLD",1652,4,790.08,0)
790.08
"BLD",1652,4,790.08,222)
y^y^f^^^^n
"BLD",1652,4,790.1,0)
790.1
"BLD",1652,4,790.1,2,0)
^9.641^790.1^1
"BLD",1652,4,790.1,2,790.1,0)
WV PROCEDURE  (File-top level)
"BLD",1652,4,790.1,2,790.1,1,0)
^9.6411^2.2^6
"BLD",1652,4,790.1,2,790.1,1,1.01,0)
NOTES
"BLD",1652,4,790.1,2,790.1,1,2.17,0)
LAB ACCESSION#
"BLD",1652,4,790.1,2,790.1,1,2.18,0)
LAB DATA FILE IEN
"BLD",1652,4,790.1,2,790.1,1,2.19,0)
LAB INVERSE DATE/TIME
"BLD",1652,4,790.1,2,790.1,1,2.2,0)
LAB SUBSCRIPT
"BLD",1652,4,790.1,2,790.1,1,9,0)
REPORTS
"BLD",1652,4,790.1,222)
y^n^p^^^^n
"BLD",1652,4,"APDD",790.02,790.02)

"BLD",1652,4,"APDD",790.02,790.02,.24)

"BLD",1652,4,"APDD",790.1,790.1)

"BLD",1652,4,"APDD",790.1,790.1,1.01)

"BLD",1652,4,"APDD",790.1,790.1,2.17)

"BLD",1652,4,"APDD",790.1,790.1,2.18)

"BLD",1652,4,"APDD",790.1,790.1,2.19)

"BLD",1652,4,"APDD",790.1,790.1,2.2)

"BLD",1652,4,"APDD",790.1,790.1,9)

"BLD",1652,4,"B",790.02,790.02)

"BLD",1652,4,"B",790.08,790.08)

"BLD",1652,4,"B",790.1,790.1)

"BLD",1652,"INIT")
WV6PST
"BLD",1652,"KRN",0)
^9.67PA^19^18
"BLD",1652,"KRN",.4,0)
.4
"BLD",1652,"KRN",.4,"NM",0)
^9.68A^^
"BLD",1652,"KRN",.401,0)
.401
"BLD",1652,"KRN",.402,0)
.402
"BLD",1652,"KRN",.403,0)
.403
"BLD",1652,"KRN",.403,"NM",0)
^9.68A^2^2
"BLD",1652,"KRN",.403,"NM",1,0)
WV PROC-FORM-1    FILE #790.1^790.1^0
"BLD",1652,"KRN",.403,"NM",2,0)
WV SITE PARAMS-FORM-1    FILE #790.02^790.02^0
"BLD",1652,"KRN",.403,"NM","B","WV PROC-FORM-1    FILE #790.1",1)

"BLD",1652,"KRN",.403,"NM","B","WV SITE PARAMS-FORM-1    FILE #790.02",2)

"BLD",1652,"KRN",.5,0)
.5
"BLD",1652,"KRN",.84,0)
.84
"BLD",1652,"KRN",3.6,0)
3.6
"BLD",1652,"KRN",3.8,0)
3.8
"BLD",1652,"KRN",9.2,0)
9.2
"BLD",1652,"KRN",9.8,0)
9.8
"BLD",1652,"KRN",9.8,"NM",0)
^9.68A^9^9
"BLD",1652,"KRN",9.8,"NM",1,0)
WVLRLINK^^0^B40822119
"BLD",1652,"KRN",9.8,"NM",2,0)
WVLABWP^^0^B37037058
"BLD",1652,"KRN",9.8,"NM",3,0)
WVLABWPC^^0^B22195629
"BLD",1652,"KRN",9.8,"NM",4,0)
WVLABWPS^^0^B16216191
"BLD",1652,"KRN",9.8,"NM",5,0)
WVLABAD1^^0^B5017115
"BLD",1652,"KRN",9.8,"NM",6,0)
WVLABADD^^0^B31935826
"BLD",1652,"KRN",9.8,"NM",7,0)
WVPROC^^0^B44910103
"BLD",1652,"KRN",9.8,"NM",8,0)
WVPRPCD^^0^B21950408
"BLD",1652,"KRN",9.8,"NM",9,0)
WV6PST^^0^B4216624
"BLD",1652,"KRN",9.8,"NM","B","WV6PST",9)

"BLD",1652,"KRN",9.8,"NM","B","WVLABAD1",5)

"BLD",1652,"KRN",9.8,"NM","B","WVLABADD",6)

"BLD",1652,"KRN",9.8,"NM","B","WVLABWP",2)

"BLD",1652,"KRN",9.8,"NM","B","WVLABWPC",3)

"BLD",1652,"KRN",9.8,"NM","B","WVLABWPS",4)

"BLD",1652,"KRN",9.8,"NM","B","WVLRLINK",1)

"BLD",1652,"KRN",9.8,"NM","B","WVPROC",7)

"BLD",1652,"KRN",9.8,"NM","B","WVPRPCD",8)

"BLD",1652,"KRN",19,0)
19
"BLD",1652,"KRN",19,"NM",0)
^9.68A^3^3
"BLD",1652,"KRN",19,"NM",1,0)
WV SAVE LAB TEST^^0
"BLD",1652,"KRN",19,"NM",2,0)
WV MENU-PATIENT MANAGEMENT^^2
"BLD",1652,"KRN",19,"NM",3)
^^^
"BLD",1652,"KRN",19,"NM",3,0)
WV LINE FOR MENUS^^1
"BLD",1652,"KRN",19,"NM","B","WV LINE FOR MENUS",3)

"BLD",1652,"KRN",19,"NM","B","WV MENU-PATIENT MANAGEMENT",2)

"BLD",1652,"KRN",19,"NM","B","WV SAVE LAB TEST",1)

"BLD",1652,"KRN",19.1,0)
19.1
"BLD",1652,"KRN",101,0)
101
"BLD",1652,"KRN",409.61,0)
409.61
"BLD",1652,"KRN",771,0)
771
"BLD",1652,"KRN",869.2,0)
869.2
"BLD",1652,"KRN",870,0)
870
"BLD",1652,"KRN",8994,0)
8994
"BLD",1652,"KRN","B",.4,.4)

"BLD",1652,"KRN","B",.401,.401)

"BLD",1652,"KRN","B",.402,.402)

"BLD",1652,"KRN","B",.403,.403)

"BLD",1652,"KRN","B",.5,.5)

"BLD",1652,"KRN","B",.84,.84)

"BLD",1652,"KRN","B",3.6,3.6)

"BLD",1652,"KRN","B",3.8,3.8)

"BLD",1652,"KRN","B",9.2,9.2)

"BLD",1652,"KRN","B",9.8,9.8)

"BLD",1652,"KRN","B",19,19)

"BLD",1652,"KRN","B",19.1,19.1)

"BLD",1652,"KRN","B",101,101)

"BLD",1652,"KRN","B",409.61,409.61)

"BLD",1652,"KRN","B",771,771)

"BLD",1652,"KRN","B",869.2,869.2)

"BLD",1652,"KRN","B",870,870)

"BLD",1652,"KRN","B",8994,8994)

"BLD",1652,"QUES",0)
^9.62^^
"BLD",1652,"REQB",0)
^9.611^2^2
"BLD",1652,"REQB",1,0)
WV*1.0*5^2
"BLD",1652,"REQB",2,0)
LR*5.2*231^2
"BLD",1652,"REQB","B","LR*5.2*231",2)

"BLD",1652,"REQB","B","WV*1.0*5",1)

"FIA",790.02)
WV SITE PARAMETER
"FIA",790.02,0)
^WV(790.02,
"FIA",790.02,0,0)
790.02P
"FIA",790.02,0,1)
y^n^p^^^^n
"FIA",790.02,0,10)

"FIA",790.02,0,11)

"FIA",790.02,0,"RLRO")

"FIA",790.02,0,"VR")
1.0^WV
"FIA",790.02,790.02)
1
"FIA",790.02,790.02,.24)

"FIA",790.08)
WV LAB TESTS
"FIA",790.08,0)
^WV(790.08,
"FIA",790.08,0,0)
790.08I
"FIA",790.08,0,1)
y^y^f^^^^n
"FIA",790.08,0,10)

"FIA",790.08,0,11)

"FIA",790.08,0,"RLRO")

"FIA",790.08,0,"VR")
1.0^WV
"FIA",790.08,790.08)
0
"FIA",790.1)
WV PROCEDURE
"FIA",790.1,0)
^WV(790.1,
"FIA",790.1,0,0)
790.1I
"FIA",790.1,0,1)
y^n^p^^^^n
"FIA",790.1,0,10)

"FIA",790.1,0,11)

"FIA",790.1,0,"RLRO")

"FIA",790.1,0,"VR")
1.0^WV
"FIA",790.1,790.1)
1
"FIA",790.1,790.1,1.01)

"FIA",790.1,790.1,2.17)

"FIA",790.1,790.1,2.18)

"FIA",790.1,790.1,2.19)

"FIA",790.1,790.1,2.2)

"FIA",790.1,790.1,9)

"FIA",790.1,790.11)
0
"FIA",790.1,790.19)
0
"INIT")
WV6PST
"KRN",.403,69,-1)
0^1
"KRN",.403,69,0)
WV PROC-FORM-1^^^^2940620^^^790.1^0^0^1
"KRN",.403,69,11)

"KRN",.403,69,12)

"KRN",.403,69,40,0)
^.4031I^1^1
"KRN",.403,69,40,1,0)
1^^1,1^^^0
"KRN",.403,69,40,1,1)
PAGE 1
"KRN",.403,69,40,1,11)

"KRN",.403,69,40,1,12)

"KRN",.403,69,40,1,40,0)
^.4032PI^315^2
"KRN",.403,69,40,1,40,250,0)
WV PROC-EDITBLK-1^3^8,1^e
"KRN",.403,69,40,1,40,315,0)
WV PROC-DISPLAY-1^2^1,1^d
"KRN",.403,76,-1)
0^2
"KRN",.403,76,0)
WV SITE PARAMS-FORM-1^^^^2950317^^^790.02^0^0^1
"KRN",.403,76,40,0)
^.4031I^5^5
"KRN",.403,76,40,1,0)
1^^1,1^2^5^0
"KRN",.403,76,40,1,1)
PAGE 1
"KRN",.403,76,40,1,40,0)
^.4032PI^260^1
"KRN",.403,76,40,1,40,260,0)
WV SITE PARAMS-EDITBLK-1^1^1,1^e
"KRN",.403,76,40,2,0)
2^^1,1^3^1^0
"KRN",.403,76,40,2,1)
PAGE 2
"KRN",.403,76,40,2,40,0)
^.4032PI^261^1
"KRN",.403,76,40,2,40,261,0)
WV SITE PARAMS-EDITBLK-2^1^1,1^e
"KRN",.403,76,40,3,0)
3^^1,1^4^2
"KRN",.403,76,40,3,1)
Page 3
"KRN",.403,76,40,3,40,0)
^.4032IP^312^1
"KRN",.403,76,40,3,40,312,0)
WV SITE PATAMS-EDITBLK-3^1^1,1^e
"KRN",.403,76,40,4,0)
4^^1,1^5^3
"KRN",.403,76,40,4,1)
Page 4
"KRN",.403,76,40,4,40,0)
^.4032IP^313^1
"KRN",.403,76,40,4,40,313,0)
WV SITE PARAMS-EDITBLK-4^1^1,1^e
"KRN",.403,76,40,5,0)
5^^1,1^^4
"KRN",.403,76,40,5,1)
Page 5
"KRN",.403,76,40,5,40,0)
^.4032IP^314^1
"KRN",.403,76,40,5,40,314,0)
WV SITE PARAMS-EDITBLK-5^1^1,1^e
"KRN",.404,250,0)
WV PROC-EDITBLK-1^790.1
"KRN",.404,250,11)
D:$$COLP^WVUTL4(DA) HLP^DDSUTL(" * Move to PAGE 2 to edit clinical and pathology findings. ")
"KRN",.404,250,12)

"KRN",.404,250,15,0)
^^1^1^2980605^
"KRN",.404,250,15,1,0)
WV PROCEDURE-EDIT-BLOCK-1
"KRN",.404,250,40,0)
^.4044I^18^15
"KRN",.404,250,40,1,0)
1^Date of Procedure^3
"KRN",.404,250,40,1,1)
.12
"KRN",.404,250,40,1,2)
2,25^18^2,6
"KRN",.404,250,40,1,3)
T
"KRN",.404,250,40,1,4)
1
"KRN",.404,250,40,1,13)
N WVX S WVX=$$PDELQ1^WVUTL4(DA,X,DUZ(2)) D PUT^DDSVAL(DIE,DA,.13,WVX)
"KRN",.404,250,40,3,0)
2^Clinician/Provider^3
"KRN",.404,250,40,3,1)
.07
"KRN",.404,250,40,3,2)
3,25^25^3,5
"KRN",.404,250,40,3,4)
0
"KRN",.404,250,40,4,0)
3^Ward/Clinic/Location^3
"KRN",.404,250,40,4,1)
.11
"KRN",.404,250,40,4,2)
4,25^30^4,3
"KRN",.404,250,40,4,4)
0
"KRN",.404,250,40,4,13)
D PUT^DDSVAL(790.1,.DA,.1,$$INSTIT^WVUTL6)
"KRN",.404,250,40,5,0)
4^Health Care Facility^3
"KRN",.404,250,40,5,1)
.1
"KRN",.404,250,40,5,2)
5,25^30^5,3
"KRN",.404,250,40,5,4)
1^^^
"KRN",.404,250,40,6,0)
9^Results/Diagnosis^3
"KRN",.404,250,40,6,1)
.05
"KRN",.404,250,40,6,2)
8,25^30^8,6
"KRN",.404,250,40,6,10)
S DDSBR=$S(X:12,1:13)
"KRN",.404,250,40,6,11)
S WVPN=$$GET^DDSVAL(DIE,DA,.04)
"KRN",.404,250,40,6,12)
K WVPN I X,$P(^WV(790.31,X,0),U,22) D PUT^DDSVAL(DIE,DA,.08,1)
"KRN",.404,250,40,7,0)
10^Notes (WP)^3
"KRN",.404,250,40,7,1)
1.01
"KRN",.404,250,40,7,2)
5,77^1^5,65
"KRN",.404,250,40,7,4)
^^^0
"KRN",.404,250,40,7,10)
S DDSBR=5
"KRN",.404,250,40,9,0)
6^Complete by (Date)^3
"KRN",.404,250,40,9,1)
.13
"KRN",.404,250,40,9,2)
7,25^12^7,5
"KRN",.404,250,40,9,3)
!M
"KRN",.404,250,40,9,3.1)
S Y=$$PDELQ^WVUTL4(DA,DUZ(2))
"KRN",.404,250,40,9,10)
S DDSBR=9
"KRN",.404,250,40,10,0)
14^Status^3
"KRN",.404,250,40,10,1)
.14
"KRN",.404,250,40,10,2)
9,65^6^9,57
"KRN",.404,250,40,10,3)
o
"KRN",.404,250,40,11,0)
15^!M^1^
"KRN",.404,250,40,11,.1)
I $$COLP^WVUTL4(DA) S Y="(PAGE 1 OF 2)"
"KRN",.404,250,40,11,2)
^^10,60
"KRN",.404,250,40,12,0)
12^Sec Results/Diagnosis^3^
"KRN",.404,250,40,12,1)
.06
"KRN",.404,250,40,12,2)
9,25^30^9,2
"KRN",.404,250,40,12,10)
S:$$PNOCX^WVUTL6($P(^WV(790.1,DA,0),U,4)) DDSBR=13
"KRN",.404,250,40,12,11)
S WVPN=$$GET^DDSVAL(DIE,DA,.04)
"KRN",.404,250,40,12,12)
K WVPN I X,$P(^WV(790.31,X,0),U,22) D PUT^DDSVAL(DIE,DA,.08,1)
"KRN",.404,250,40,13,0)
13^HPV^3
"KRN",.404,250,40,13,1)
.08
"KRN",.404,250,40,13,2)
8,65^3^8,60
"KRN",.404,250,40,14,0)
11^!M^1^
"KRN",.404,250,40,14,.1)
N WVROOT S WVROOT=$$GET^DDSVAL(DIE,DA,1.01) I WVROOT]"",$O(@WVROOT@(0)) S Y="+"
"KRN",.404,250,40,14,2)
^^5,77
"KRN",.404,250,40,15,0)
5^Comments^3
"KRN",.404,250,40,15,1)
3.01
"KRN",.404,250,40,15,2)
6,25^53^6,15
"KRN",.404,250,40,17,0)
7^!M^1
"KRN",.404,250,40,17,.1)
S:$O(^WV(790.1,DA,9,0)) Y="+"
"KRN",.404,250,40,17,2)
^^4,77
"KRN",.404,250,40,18,0)
8^Reports (WP)^3
"KRN",.404,250,40,18,1)
9
"KRN",.404,250,40,18,2)
4,78^1^4,63
"KRN",.404,250,40,18,4)
^^^1
"KRN",.404,250,40,18,10)
S DDSBR=4
"KRN",.404,260,0)
WV SITE PARAMS-EDITBLK-1^790.02
"KRN",.404,260,40,0)
^.4044I^12^10
"KRN",.404,260,40,1,0)
1^!M^1^
"KRN",.404,260,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,260,40,1,2)
^^3,12^
"KRN",.404,260,40,2,0)
2^________________________________________________________________________________^1^
"KRN",.404,260,40,2,2)
^^4,1^
"KRN",.404,260,40,4,0)
4^Default Case Manager^3
"KRN",.404,260,40,4,1)
.02
"KRN",.404,260,40,4,2)
6,33^30^6,11^0
"KRN",.404,260,40,5,0)
5^Ask Case Manager^3
"KRN",.404,260,40,5,1)
.05
"KRN",.404,260,40,5,2)
7,33^3^7,15^0
"KRN",.404,260,40,6,0)
6^Autoqueue Normal PAP Letters^3
"KRN",.404,260,40,6,1)
.03
"KRN",.404,260,40,6,2)
9,33^3^9,3^0
"KRN",.404,260,40,7,0)
7^PAP Result Normal Letter^3
"KRN",.404,260,40,7,1)
.04
"KRN",.404,260,40,7,2)
10,33^47^10,7^0
"KRN",.404,260,40,8,0)
8^Autoqueue Normal MAM Letters^3
"KRN",.404,260,40,8,1)
.07
"KRN",.404,260,40,8,2)
11,33^3^11,3^0
"KRN",.404,260,40,9,0)
9^MAM Result Normal Letter^3
"KRN",.404,260,40,9,1)
.08
"KRN",.404,260,40,9,2)
12,33^47^12,7^0
"KRN",.404,260,40,10,0)
10^Default #days to print letter^3
"KRN",.404,260,40,10,1)
.06
"KRN",.404,260,40,10,2)
14,33^3^14,2^0
"KRN",.404,260,40,12,0)
12^!M^1^
"KRN",.404,260,40,12,.1)
S Y="(PAGE 1 OF 5)"
"KRN",.404,260,40,12,2)
^^17,58
"KRN",.404,261,0)
WV SITE PARAMS-EDITBLK-2^790.02
"KRN",.404,261,40,0)
^.4044I^19^8
"KRN",.404,261,40,1,0)
1^!M^1^
"KRN",.404,261,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,261,40,1,2)
^^3,12^
"KRN",.404,261,40,2,0)
2^________________________________________________________________________________^1^
"KRN",.404,261,40,2,2)
^^4,1
"KRN",.404,261,40,10,0)
6.1^Import Mammograms from Radiology^3
"KRN",.404,261,40,10,1)
.1
"KRN",.404,261,40,10,2)
6,51^3^6,17
"KRN",.404,261,40,10,10)
S:'X DDSBR=12
"KRN",.404,261,40,11,0)
11^!M^1^
"KRN",.404,261,40,11,.1)
S Y="(PAGE 2 OF 5)"
"KRN",.404,261,40,11,2)
^^17,58
"KRN",.404,261,40,14,0)
6.2^Status Given to Imported Mammograms^3
"KRN",.404,261,40,14,1)
.23
"KRN",.404,261,40,14,2)
7,54^6^7,17
"KRN",.404,261,40,14,3)
OPEN
"KRN",.404,261,40,17,0)
6^RADIOLOGY:^1
"KRN",.404,261,40,17,2)
^^6,5
"KRN",.404,261,40,18,0)
7^LABORATORY:^1
"KRN",.404,261,40,18,2)
^^9,4
"KRN",.404,261,40,19,0)
7.1^Import Tests from Laboratory^3
"KRN",.404,261,40,19,1)
.24
"KRN",.404,261,40,19,2)
9,47^3^9,17
"KRN",.404,312,0)
WV SITE PATAMS-EDITBLK-3^790.02
"KRN",.404,312,40,0)
^.4044I^36^36
"KRN",.404,312,40,1,0)
1^!M^1
"KRN",.404,312,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,312,40,1,2)
^^3,12
"KRN",.404,312,40,2,0)
2^________________________________________________________________________________^1
"KRN",.404,312,40,2,2)
^^4,1
"KRN",.404,312,40,3,0)
3^Procedure Type^1
"KRN",.404,312,40,3,2)
^^6,5
"KRN",.404,312,40,4,0)
3.1^Active^1
"KRN",.404,312,40,4,2)
^^6,31
"KRN",.404,312,40,5,0)
3.3^DAYS DELINQUENT^1
"KRN",.404,312,40,5,2)
^^6,43
"KRN",.404,312,40,6,0)
4^--------------------^1
"KRN",.404,312,40,6,2)
^^7,5
"KRN",.404,312,40,7,0)
4.1^------^1
"KRN",.404,312,40,7,2)
^^7,31
"KRN",.404,312,40,8,0)
5^---------------^1
"KRN",.404,312,40,8,2)
^^7,43
"KRN",.404,312,40,9,0)
4.5^Breast Ultrasound^1
"KRN",.404,312,40,9,2)
^^8,5
"KRN",.404,312,40,10,0)
6^Clinical Breast Exam^1
"KRN",.404,312,40,10,2)
^^9,5
"KRN",.404,312,40,11,0)
7^Colposcopy Impr (No Bx)^1
"KRN",.404,312,40,11,2)
^^10,5
"KRN",.404,312,40,12,0)
8^Colposcopy w/Biopsy^1
"KRN",.404,312,40,12,2)
^^11,5
"KRN",.404,312,40,13,0)
8.1^Cone Biopsy^1
"KRN",.404,312,40,13,2)
^^12,5
"KRN",.404,312,40,14,0)
9^Cryotherapy^1
"KRN",.404,312,40,14,2)
^^13,5
"KRN",.404,312,40,15,0)
10^Ectocervical Biopsy^1
"KRN",.404,312,40,15,2)
^^14,5
"KRN",.404,312,40,16,0)
11^Endocervical Currettage^1
"KRN",.404,312,40,16,2)
^^15,5
"KRN",.404,312,40,17,0)
12^Endometrial Biopsy^1
"KRN",.404,312,40,17,2)
^^16,5
"KRN",.404,312,40,18,0)
4.6^^3
"KRN",.404,312,40,18,1)
38.01
"KRN",.404,312,40,18,2)
8,32^3
"KRN",.404,312,40,19,0)
6.1^^3
"KRN",.404,312,40,19,1)
27.01
"KRN",.404,312,40,19,2)
9,32^3
"KRN",.404,312,40,20,0)
6.6^^3
"KRN",.404,312,40,20,1)
37.01
"KRN",.404,312,40,20,2)
10,32^3
"KRN",.404,312,40,21,0)
7.1^^3
"KRN",.404,312,40,21,1)
2.01
"KRN",.404,312,40,21,2)
11,32^3
"KRN",.404,312,40,22,0)
8.2^^3
"KRN",.404,312,40,22,1)
19.01
"KRN",.404,312,40,22,2)
12,32^3
"KRN",.404,312,40,23,0)
9.1^^3
"KRN",.404,312,40,23,1)
4.01
"KRN",.404,312,40,23,2)
13,32^3
"KRN",.404,312,40,24,0)
10.1^^3
"KRN",.404,312,40,24,1)
17.01
"KRN",.404,312,40,24,2)
14,32^3
"KRN",.404,312,40,25,0)
11.1^^3
"KRN",.404,312,40,25,1)
18.01
"KRN",.404,312,40,25,2)
15,32^3
"KRN",.404,312,40,26,0)
12.1^^3
"KRN",.404,312,40,26,1)
8.01
"KRN",.404,312,40,26,2)
16,32^3
"KRN",.404,312,40,27,0)
4.8^^3
"KRN",.404,312,40,27,1)
38.03
"KRN",.404,312,40,27,2)
8,48^4
"KRN",.404,312,40,28,0)
6.3^^3
"KRN",.404,312,40,28,1)
27.03
"KRN",.404,312,40,28,2)
9,48^4
"KRN",.404,312,40,29,0)
6.8^^3
"KRN",.404,312,40,29,1)
37.03
"KRN",.404,312,40,29,2)
10,48^4
"KRN",.404,312,40,30,0)
7.3^^3
"KRN",.404,312,40,30,1)
2.03
"KRN",.404,312,40,30,2)
11,48^4
"KRN",.404,312,40,31,0)
8.3^^3
"KRN",.404,312,40,31,1)
19.03
"KRN",.404,312,40,31,2)
12,48^4
"KRN",.404,312,40,32,0)
9.3^^3
"KRN",.404,312,40,32,1)
4.03
"KRN",.404,312,40,32,2)
13,48^4
"KRN",.404,312,40,33,0)
10.3^^3
"KRN",.404,312,40,33,1)
7.03
"KRN",.404,312,40,33,2)
14,48^4
"KRN",.404,312,40,34,0)
11.3^^3
"KRN",.404,312,40,34,1)
18.03
"KRN",.404,312,40,34,2)
15,48^4
"KRN",.404,312,40,35,0)
12.3^^3
"KRN",.404,312,40,35,1)
8.03
"KRN",.404,312,40,35,2)
16,48^4
"KRN",.404,312,40,36,0)
20^!M^1
"KRN",.404,312,40,36,.1)
S Y="(PAGE 3 OF 5)"
"KRN",.404,312,40,36,2)
^^17,57
"KRN",.404,313,0)
WV SITE PARAMS-EDITBLK-4^790.02
"KRN",.404,313,40,0)
^.4044I^36^36
"KRN",.404,313,40,1,0)
1^!M^1
"KRN",.404,313,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,313,40,1,2)
^^3,12
"KRN",.404,313,40,2,0)
2^________________________________________________________________________________^1
"KRN",.404,313,40,2,2)
^^4,1
"KRN",.404,313,40,3,0)
3^Procedure Type^1
"KRN",.404,313,40,3,2)
^^6,5
"KRN",.404,313,40,4,0)
3.1^Active^1
"KRN",.404,313,40,4,2)
^^6,31
"KRN",.404,313,40,5,0)
3.2^DAYS DELINQUENT^1
"KRN",.404,313,40,5,2)
^^6,43
"KRN",.404,313,40,6,0)
4^--------------------^1
"KRN",.404,313,40,6,2)
^^7,5
"KRN",.404,313,40,7,0)
4.1^------^1
"KRN",.404,313,40,7,2)
^^7,31
"KRN",.404,313,40,8,0)
4.2^---------------^1
"KRN",.404,313,40,8,2)
^^7,43
"KRN",.404,313,40,9,0)
4.5^Fine Needle Aspiration^1
"KRN",.404,313,40,9,2)
^^8,5
"KRN",.404,313,40,10,0)
4.6^^3
"KRN",.404,313,40,10,1)
34.01
"KRN",.404,313,40,10,2)
8,32^3
"KRN",.404,313,40,11,0)
4.8^^3
"KRN",.404,313,40,11,1)
34.03
"KRN",.404,313,40,11,2)
8,48^4
"KRN",.404,313,40,12,0)
5^General Surgery Consult^1
"KRN",.404,313,40,12,2)
^^9,5
"KRN",.404,313,40,13,0)
5.1^^3
"KRN",.404,313,40,13,1)
29.01
"KRN",.404,313,40,13,2)
9,32^3
"KRN",.404,313,40,14,0)
5.3^^3
"KRN",.404,313,40,14,1)
29.03
"KRN",.404,313,40,14,2)
9,48^4
"KRN",.404,313,40,15,0)
6^Gyn Onc Consult^1
"KRN",.404,313,40,15,2)
^^10,5
"KRN",.404,313,40,16,0)
6.1^^3
"KRN",.404,313,40,16,1)
24.01
"KRN",.404,313,40,16,2)
10,32^3
"KRN",.404,313,40,17,0)
6.3^^3
"KRN",.404,313,40,17,1)
24.03
"KRN",.404,313,40,17,2)
10,48^4
"KRN",.404,313,40,18,0)
7^Hysterectomy^1
"KRN",.404,313,40,18,2)
^^11,5
"KRN",.404,313,40,19,0)
7.1^^3
"KRN",.404,313,40,19,1)
3.01
"KRN",.404,313,40,19,2)
11,32^3
"KRN",.404,313,40,20,0)
7.3^^3
"KRN",.404,313,40,20,1)
3.03
"KRN",.404,313,40,20,2)
11,48^4
"KRN",.404,313,40,21,0)
8^Laser Abilation^1
"KRN",.404,313,40,21,2)
^^12,5
"KRN",.404,313,40,22,0)
8.1^^3
"KRN",.404,313,40,22,1)
22.01
"KRN",.404,313,40,22,2)
12,32^3
"KRN",.404,313,40,23,0)
8.3^^3
"KRN",.404,313,40,23,1)
22.03
"KRN",.404,313,40,23,2)
12,48^4
"KRN",.404,313,40,24,0)
9^Laser Cone^1
"KRN",.404,313,40,24,2)
^^13,5
"KRN",.404,313,40,25,0)
9.1^^3
"KRN",.404,313,40,25,1)
23.01
"KRN",.404,313,40,25,2)
13,32^3
"KRN",.404,313,40,26,0)
9.3^^3
"KRN",.404,313,40,26,1)
23.03
"KRN",.404,313,40,26,2)
13,48^4
"KRN",.404,313,40,27,0)
10^LEEP^1
"KRN",.404,313,40,27,2)
^^14,5
"KRN",.404,313,40,28,0)
10.1^^3
"KRN",.404,313,40,28,1)
17.01
"KRN",.404,313,40,28,2)
14,32^3
"KRN",.404,313,40,29,0)
10.3^^3
"KRN",.404,313,40,29,1)
17.03
"KRN",.404,313,40,29,2)
14,48^4
"KRN",.404,313,40,30,0)
11^Lumpectomy^1
"KRN",.404,313,40,30,2)
^^15,5
"KRN",.404,313,40,31,0)
11.1^^3
"KRN",.404,313,40,31,1)
32.01
"KRN",.404,313,40,31,2)
15,32^3
"KRN",.404,313,40,32,0)
11.3^^3
"KRN",.404,313,40,32,1)
32.03
"KRN",.404,313,40,32,2)
15,48^4
"KRN",.404,313,40,33,0)
12^Mammogram Dx Bilat^1
"KRN",.404,313,40,33,2)
^^16,5
"KRN",.404,313,40,34,0)
12.1^^3
"KRN",.404,313,40,34,1)
25.01
"KRN",.404,313,40,34,2)
16,32^3
"KRN",.404,313,40,35,0)
12.3^^3
"KRN",.404,313,40,35,1)
25.03
"KRN",.404,313,40,35,2)
16,48^4
"KRN",.404,313,40,36,0)
20^!M^1
"KRN",.404,313,40,36,.1)
S Y="(PAGE 4 OF 5)"
"KRN",.404,313,40,36,2)
^^17,58
"KRN",.404,314,0)
WV SITE PARAMS-EDITBLK-5^790.02
"KRN",.404,314,40,0)
^.4044I^36^36
"KRN",.404,314,40,1,0)
1^!M^1
"KRN",.404,314,40,1,.1)
S Y="* * *  EDIT SITE PARAMETERS FOR "_IOINHI_$P(^DIC(4,DA,0),U)_IOINORM_"  * * *"
"KRN",.404,314,40,1,2)
^^3,12
"KRN",.404,314,40,2,0)
2^________________________________________________________________________________^1
"KRN",.404,314,40,2,2)
^^4,1
"KRN",.404,314,40,3,0)
3^Procedure Type^1
"KRN",.404,314,40,3,2)
^^6,5
"KRN",.404,314,40,4,0)
3.1^Active^1
"KRN",.404,314,40,4,2)
^^6,31
"KRN",.404,314,40,5,0)
3.3^DAYS DELINQUENT^1
"KRN",.404,314,40,5,2)
^^6,43
"KRN",.404,314,40,6,0)
4^--------------------^1
"KRN",.404,314,40,6,2)
^^7,5
"KRN",.404,314,40,7,0)
4.1^------^1
"KRN",.404,314,40,7,2)
^^7,31
"KRN",.404,314,40,8,0)
4.3^---------------^1
"KRN",.404,314,40,8,2)
^^7,43
"KRN",.404,314,40,9,0)
5^Mamogram Dx Unilat^1
"KRN",.404,314,40,9,2)
^^8,5
"KRN",.404,314,40,10,0)
5.1^^3
"KRN",.404,314,40,10,1)
26.01
"KRN",.404,314,40,10,2)
8,32^3
"KRN",.404,314,40,11,0)
5.3^^3
"KRN",.404,314,40,11,1)
26.03
"KRN",.404,314,40,11,2)
8,48^4
"KRN",.404,314,40,12,0)
6^Mammogram Screening^1
"KRN",.404,314,40,12,2)
^^9,5
"KRN",.404,314,40,13,0)
6.1^^3
"KRN",.404,314,40,13,1)
28.01
"KRN",.404,314,40,13,2)
9,32^3
"KRN",.404,314,40,14,0)
6.2^^3
"KRN",.404,314,40,14,1)
28.03
"KRN",.404,314,40,14,2)
9,48^4
"KRN",.404,314,40,14,3)

"KRN",.404,314,40,15,0)
7^Mastectomy^1
"KRN",.404,314,40,15,2)
^^10,5
"KRN",.404,314,40,16,0)
7.1^^3
"KRN",.404,314,40,16,1)
33.01
"KRN",.404,314,40,16,2)
10,32^3
"KRN",.404,314,40,17,0)
7.3^^3
"KRN",.404,314,40,17,1)
33.03
"KRN",.404,314,40,17,2)
10,48^4
"KRN",.404,314,40,18,0)
8^Needle Biopsy^1
"KRN",.404,314,40,18,2)
^^11,5
"KRN",.404,314,40,19,0)
8.1^^3
"KRN",.404,314,40,19,1)
30.01
"KRN",.404,314,40,19,2)
11,32^3
"KRN",.404,314,40,20,0)
8.3^^3
"KRN",.404,314,40,20,1)
30.03
"KRN",.404,314,40,20,2)
11,48^4
"KRN",.404,314,40,21,0)
9^Open Biopsy^1
"KRN",.404,314,40,21,2)
^^12,5
"KRN",.404,314,40,22,0)
9.1^^3
"KRN",.404,314,40,22,1)
31.01
"KRN",.404,314,40,22,2)
12,32^3
"KRN",.404,314,40,23,0)
9.3^^3
"KRN",.404,314,40,23,1)
31.03
"KRN",.404,314,40,23,2)
12,48^4
"KRN",.404,314,40,24,0)
10^PAP Smear^1
"KRN",.404,314,40,24,2)
^^13,5
"KRN",.404,314,40,25,0)
10.1^^3
"KRN",.404,314,40,25,1)
1.01
"KRN",.404,314,40,25,2)
13,32^3
"KRN",.404,314,40,26,0)
10.3^^3
"KRN",.404,314,40,26,1)
1.03
"KRN",.404,314,40,26,2)
13,48^4
"KRN",.404,314,40,27,0)
11^Pregnancy Test^1
"KRN",.404,314,40,27,2)
^^14,5
"KRN",.404,314,40,28,0)
11.1^^3
"KRN",.404,314,40,28,1)
20.01
"KRN",.404,314,40,28,2)
14,32^3
"KRN",.404,314,40,29,0)
11.3^^3
"KRN",.404,314,40,29,1)
20.03
"KRN",.404,314,40,29,2)
14,48^4
"KRN",.404,314,40,30,0)
12^STD Evaluation^1
"KRN",.404,314,40,30,2)
^^15,5
"KRN",.404,314,40,31,0)
12.1^^3
"KRN",.404,314,40,31,1)
21.01
"KRN",.404,314,40,31,2)
15,32^3
"KRN",.404,314,40,32,0)
12.3^^3
"KRN",.404,314,40,32,1)
21.03
"KRN",.404,314,40,32,2)
15,48^4
"KRN",.404,314,40,33,0)
13^Stereotactic Biopsy^1
"KRN",.404,314,40,33,2)
^^16,5
"KRN",.404,314,40,34,0)
13.1^^3
"KRN",.404,314,40,34,1)
35.01
"KRN",.404,314,40,34,2)
16,32^3
"KRN",.404,314,40,35,0)
13.3^^3
"KRN",.404,314,40,35,1)
35.03
"KRN",.404,314,40,35,2)
16,48^4
"KRN",.404,314,40,36,0)
20^!M^1
"KRN",.404,314,40,36,.1)
S Y="(PAGE 5 OF 5)"
"KRN",.404,314,40,36,2)
^^17,57
"KRN",.404,315,0)
WV PROC-DISPLAY-1^790.1^
"KRN",.404,315,40,0)
^.4044I^33^30
"KRN",.404,315,40,1,0)
1^* * *  EDIT A PROCEDURE  * * *^1
"KRN",.404,315,40,1,2)
^^1,19
"KRN",.404,315,40,2,0)
2^Patient Name:^1
"KRN",.404,315,40,2,2)
^^2,1
"KRN",.404,315,40,3,0)
3^Case Manager:^1
"KRN",.404,315,40,3,2)
^^3,1
"KRN",.404,315,40,5,0)
5^!M^1
"KRN",.404,315,40,5,.1)
S Y="PAP Regimen :"
"KRN",.404,315,40,5,2)
^^4,1
"KRN",.404,315,40,6,0)
6^Br Tx Need  :^1
"KRN",.404,315,40,6,2)
^^6,1
"KRN",.404,315,40,7,0)
2.5^SSN:^1
"KRN",.404,315,40,7,2)
^^2,56
"KRN",.404,315,40,8,0)
3.5^Procedure:^1
"KRN",.404,315,40,8,2)
^^3,50
"KRN",.404,315,40,9,0)
4.5^Cx Facility:^1
"KRN",.404,315,40,9,2)
^^5,48
"KRN",.404,315,40,10,0)
6.5^Br Facility:^1
"KRN",.404,315,40,10,2)
^^6,48
"KRN",.404,315,40,11,0)
5.5^Acc#:^1
"KRN",.404,315,40,11,2)
^^4,55
"KRN",.404,315,40,12,0)
2.2^!M^1
"KRN",.404,315,40,12,.1)
S Y=IOINHI_$$NAME^WVUTL1(WVDFN)_"("_$$AGE^WVUTL1(WVDFN)_")"_IOINORM
"KRN",.404,315,40,12,2)
^^2,15
"KRN",.404,315,40,13,0)
3.2^!M^1
"KRN",.404,315,40,13,.1)
S Y=IOINHI_$$CMGR^WVUTL1(WVDFN)_IOINORM
"KRN",.404,315,40,13,2)
^^3,15
"KRN",.404,315,40,14,0)
4.2^!M^1
"KRN",.404,315,40,14,.1)
S Y=IOINHI_$E($$PROC1^WVUTL1A,1,19)_IOINORM
"KRN",.404,315,40,14,2)
^^3,61
"KRN",.404,315,40,16,0)
5.3^Cx Tx Need  :^1
"KRN",.404,315,40,16,2)
^^5,1
"KRN",.404,315,40,17,0)
5.4^!M^1
"KRN",.404,315,40,17,.1)
S Y=IOINHI_$$CNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,315,40,17,2)
^^5,15
"KRN",.404,315,40,18,0)
4.3^!M^1
"KRN",.404,315,40,18,.1)
S Y=IOINHI_$$PAPRG^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,315,40,18,2)
^^4,15
"KRN",.404,315,40,19,0)
6.2^ ^1
"KRN",.404,315,40,19,2)
^^4,11
"KRN",.404,315,40,20,0)
2.8^!M^1
"KRN",.404,315,40,20,.1)
S Y=IOINHI_$$SSN^WVUTL1(WVDFN)_IOINORM
"KRN",.404,315,40,20,2)
^^2,61
"KRN",.404,315,40,21,0)
4.8^!M^1
"KRN",.404,315,40,21,.1)
S Y=IOINHI_$$ACC^WVUTL1(DA)_IOINORM
"KRN",.404,315,40,21,2)
^^4,61
"KRN",.404,315,40,23,0)
6.4^!M^1
"KRN",.404,315,40,23,.1)
S Y=IOINHI_$$BNEED^WVUTL1(WVDFN,1)_IOINORM
"KRN",.404,315,40,23,2)
^^6,15
"KRN",.404,315,40,24,0)
20^--------------------------------------------------------------------------------^1
"KRN",.404,315,40,24,2)
^^8,1
"KRN",.404,315,40,25,0)
19^!M^1
"KRN",.404,315,40,25,.1)
S Y=IOINHI_$$EDC^WVUTL1(WVDFN)_IOINORM
"KRN",.404,315,40,25,2)
^^8,48
"KRN",.404,315,40,26,0)
17^!M^1
"KRN",.404,315,40,26,.1)
S Y=IOINHI_$S($$DES^WVUTL1(WVDFN)="YES":"*DES DAUGHTER*",1:"")
"KRN",.404,315,40,26,2)
^^7,31
"KRN",.404,315,40,27,0)
21^!M^1
"KRN",.404,315,40,27,.1)
S Y=IOINHI_$$FACIL^WVUTL1A(WVDFN,"C")_IOINORM
"KRN",.404,315,40,27,2)
^^5,61
"KRN",.404,315,40,28,0)
22^!M^1
"KRN",.404,315,40,28,.1)
S Y=IOINHI_$$FACIL^WVUTL1A(WVDFN,"B")_IOINORM
"KRN",.404,315,40,28,2)
^^6,61
"KRN",.404,315,40,29,0)
23^Sexual Trauma:^1
"KRN",.404,315,40,29,2)
^^7,1
"KRN",.404,315,40,30,0)
24^!M^1
"KRN",.404,315,40,30,.1)
S Y=IOINHI_$$MST^WVUTL1A(WVDFN)_IOINORM
"KRN",.404,315,40,30,2)
^^7,16
"KRN",.404,315,40,32,0)
25^Veteran:^1
"KRN",.404,315,40,32,2)
^^7,52
"KRN",.404,315,40,33,0)
26^!M^1
"KRN",.404,315,40,33,.1)
S Y=IOINHI_$$VET^WVUTL1A(WVDFN)_IOINORM
"KRN",.404,315,40,33,2)
^^7,61
"KRN",19,10282,-1)
2^2
"KRN",19,10282,0)
WV MENU-PATIENT MANAGEMENT^Patient Management^^M^^^^^^^^364^^1^
"KRN",19,10282,10,0)
^19.01PI^23^18
"KRN",19,10282,10,23,0)
10615^LAB^3
"KRN",19,10282,10,23,"^")
WV SAVE LAB TEST
"KRN",19,10282,"U")
PATIENT MANAGEMENT
"KRN",19,10615,-1)
0^1
"KRN",19,10615,0)
WV SAVE LAB TEST^Save Lab Test as Procedure^^R^^^^^^^^WOMEN'S HEALTH
"KRN",19,10615,1,0)
^^11^11^2990303^^
"KRN",19,10615,1,1,0)
This option is used to save lab tests as procedure entries in the Women's
"KRN",19,10615,1,2,0)
Health package. Lab tests for cytology and surgical pathology are passed
"KRN",19,10615,1,3,0)
to the Women's Health package from the Lab package and stored in the WV
"KRN",19,10615,1,4,0)
LAB TESTS (#790.08) file. This option allows the user to dispose of the
"KRN",19,10615,1,5,0)
lab tests either by 1) converting the lab test data into a Women's Health
"KRN",19,10615,1,6,0)
package procedure, 2) deleting the lab test from the WV LAB TEST file
"KRN",19,10615,1,7,0)
(i.e., don't convert it into a Women's Health procedure), or 3) ignore the
"KRN",19,10615,1,8,0)
lab test for the time being.
"KRN",19,10615,1,9,0)
 
"KRN",19,10615,1,10,0)
After converting the lab test into a Women's Health procedure, the user
"KRN",19,10615,1,11,0)
may edit and close the procedure entry.
"KRN",19,10615,25)
WVLABADD
"KRN",19,10615,"U")
SAVE LAB TEST AS PROCEDURE
"KRN",19,10708,-1)
1^3
"KRN",19,10708,0)
WV LINE FOR MENUS
"MBREQ")
0
"ORD",8,.403)
.403;8;;;EDEOUT^DIFROMSO(.403,DA,"",XPDA);FPRE^DIFROMSI(.403,"",XPDA);EPRE^DIFROMSI(.403,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.403,DA,"",XPDA);DEL^DIFROMSK(.403,"",%)
"ORD",8,.403,0)
FORM
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",364,-1)
1^1
"PKG",364,0)
WOMEN'S HEALTH^WV^Tracks health issues specific to female patients.
"PKG",364,20,0)
^9.402P^^
"PKG",364,22,0)
^9.49I^1^1
"PKG",364,22,1,0)
1.0^2980925^2980508^547
"PKG",364,22,1,"PAH",1,0)
6^2990513
"PKG",364,22,1,"PAH",1,1,0)
^^2^2^2990513
"PKG",364,22,1,"PAH",1,1,1,0)
Please read the WV*1*6 patch description on FORUM for an explanation of
"PKG",364,22,1,"PAH",1,1,2,0)
what this patch does.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
9
"RTN","WV6PST")
0^9^B4216624
"RTN","WV6PST",1,0)
WV6PST ;HCIOFO/FT-Patch 6 Post-Installation Routine ;4/6/99  14:42
"RTN","WV6PST",2,0)
 ;;1.0;WOMEN'S HEALTH;**6**;Sep 30, 1998
"RTN","WV6PST",3,0)
 ;
"RTN","WV6PST",4,0)
EN ; Start post-install
"RTN","WV6PST",5,0)
 D QMAIL
"RTN","WV6PST",6,0)
 Q
"RTN","WV6PST",7,0)
QMAIL ; Queue mail message
"RTN","WV6PST",8,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WV6PST",9,0)
 S ZTRTN="MAIL^WV6PST",ZTDESC="WV*1*6 INSTALLED"
"RTN","WV6PST",10,0)
 S ZTIO="",ZTDTH=$H
"RTN","WV6PST",11,0)
 D ^%ZTLOAD
"RTN","WV6PST",12,0)
 Q
"RTN","WV6PST",13,0)
MAIL ; Send a message to Default Case Managers to answer new site
"RTN","WV6PST",14,0)
 ; parameter question for lab tests.
"RTN","WV6PST",15,0)
 N XMDUZ,XMSUB,XMTEXT,XMY,WVSITE,WVIEN
"RTN","WV6PST",16,0)
 S WVSITE=0
"RTN","WV6PST",17,0)
 F  S WVSITE=$O(^WV(790.02,WVSITE)) Q:'WVSITE  D
"RTN","WV6PST",18,0)
 .S WVIEN=$P($G(^WV(790.02,WVSITE,0)),U,2) ;default case manager
"RTN","WV6PST",19,0)
 .Q:'WVIEN
"RTN","WV6PST",20,0)
 .S XMY(WVIEN)=""
"RTN","WV6PST",21,0)
 .Q
"RTN","WV6PST",22,0)
 I '$O(XMY(0)) Q
"RTN","WV6PST",23,0)
SEND ; Create mail message and send
"RTN","WV6PST",24,0)
 S XMDUZ=.5 ;message sender
"RTN","WV6PST",25,0)
 S XMSUB="Women's Health patch #6 installed"
"RTN","WV6PST",26,0)
 S WVMSG(1)="Patch #6 for the Women's Health package was installed. This"
"RTN","WV6PST",27,0)
 S WVMSG(2)="patch provides a link with the Lab package to transfer lab data"
"RTN","WV6PST",28,0)
 S WVMSG(3)="to the Women's Health package. If you would like to activate this"
"RTN","WV6PST",29,0)
 S WVMSG(4)="link in the Women's Health package:"
"RTN","WV6PST",30,0)
 S WVMSG(5)=" "
"RTN","WV6PST",31,0)
 S WVMSG(6)="   Go to the: File Maintenance menu"
"RTN","WV6PST",32,0)
 S WVMSG(7)="  Select the: Edit Site Parameters option"
"RTN","WV6PST",33,0)
 S WVMSG(8)=" Select your: Site/Facility"
"RTN","WV6PST",34,0)
 S WVMSG(9)="Go to page 2:"
"RTN","WV6PST",35,0)
 S WVMSG(10)=" "
"RTN","WV6PST",36,0)
 S WVMSG(11)="Answer YES to the 'Import Tests from Laboratory' prompt"
"RTN","WV6PST",37,0)
 S WVMSG(12)=" "
"RTN","WV6PST",38,0)
 S WVMSG(13)="Exit and save your changes."
"RTN","WV6PST",39,0)
 S XMTEXT="WVMSG("
"RTN","WV6PST",40,0)
 D ^XMD
"RTN","WV6PST",41,0)
 Q
"RTN","WVLABAD1")
0^5^B5017115
"RTN","WVLABAD1",1,0)
WVLABAD1 ;HCIOFO/FT-LAB/WOMEN'S HEALTH LINK (cont.) ;4/6/99  12:33
"RTN","WVLABAD1",2,0)
 ;;1.0;WOMEN'S HEALTH;**6**;Sep 30, 1998
"RTN","WVLABAD1",3,0)
 ;
"RTN","WVLABAD1",4,0)
FIND ; Try to associate an incoming lab test entry with an existing WH
"RTN","WVLABAD1",5,0)
 ; procedure that has no link to a lab accession # to avoid duplicates.
"RTN","WVLABAD1",6,0)
 ; Called from WVLABADD.
"RTN","WVLABAD1",7,0)
 ; Input variables needed:
"RTN","WVLABAD1",8,0)
 ;    DFN - patient ien
"RTN","WVLABAD1",9,0)
 ; WVPROC - ien of WV Procedure Type (790.2)
"RTN","WVLABAD1",10,0)
 ; WVDATE - date portion of date of lab test
"RTN","WVLABAD1",11,0)
 ;
"RTN","WVLABAD1",12,0)
 ; First, loop through Date of Procedure x-ref
"RTN","WVLABAD1",13,0)
 N WVDTECHK,WVDATE0,WVFLAG,WVIEN,WVLOOP,WVNODE0,WVNODE2
"RTN","WVLABAD1",14,0)
 S WVDATE0=$P(WVDATE,".",1)
"RTN","WVLABAD1",15,0)
 S WVDTECHK=WVDATE0_".999999",WVFLAG=0,WVLOOP=WVDATE0-.000001
"RTN","WVLABAD1",16,0)
 F  S WVLOOP=$O(^WV(790.1,"D",WVLOOP)) Q:'WVLOOP!(WVLOOP>WVDTECHK)!(WVFLAG)  S WVIEN=0 F  S WVIEN=$O(^WV(790.1,"D",WVLOOP,WVIEN)) Q:'WVIEN!(WVFLAG)  D
"RTN","WVLABAD1",17,0)
 .S WVNODE0=$G(^WV(790.1,WVIEN,0)) Q:WVNODE0=""
"RTN","WVLABAD1",18,0)
 .S WVNODE2=$G(^WV(790.1,WVIEN,2))
"RTN","WVLABAD1",19,0)
 .Q:$P(WVNODE2,U,17)]""  ;already has a lab test link
"RTN","WVLABAD1",20,0)
 .Q:$P(WVNODE0,U,2)'=DFN  ;not the same patient
"RTN","WVLABAD1",21,0)
 .Q:$P(WVNODE0,U,4)'=WVPROC  ;not the same procedure
"RTN","WVLABAD1",22,0)
 .D LINK
"RTN","WVLABAD1",23,0)
 .S WVFLAG=1 ;flag that link is made to an existing record, so quit loop
"RTN","WVLABAD1",24,0)
 .Q
"RTN","WVLABAD1",25,0)
 Q
"RTN","WVLABAD1",26,0)
LINK ; Update values in existing entry including lab accession# link.
"RTN","WVLABAD1",27,0)
 ; Input variables needed:
"RTN","WVLABAD1",28,0)
 ;  WVNODE - zero node of a File 790.08 entry.
"RTN","WVLABAD1",29,0)
 ; WVNODE0 - zero node of a File 790.1 entry
"RTN","WVLABAD1",30,0)
 ;   WVIEN - File 790.1 ien
"RTN","WVLABAD1",31,0)
 Q:$G(WVNODE)=""  Q:'$G(WVIEN)
"RTN","WVLABAD1",32,0)
 N DIE,DA,DR
"RTN","WVLABAD1",33,0)
 S DIE="^WV(790.1,",DA=WVIEN
"RTN","WVLABAD1",34,0)
 ; fill in missing data where possible.
"RTN","WVLABAD1",35,0)
 S DR="2.17////"_$P(WVNODE,U,1) ;lab accession#
"RTN","WVLABAD1",36,0)
 S DR=DR_";2.18////"_$P(WVNODE,U,36) ;lab data file (#63) ien
"RTN","WVLABAD1",37,0)
 S DR=DR_";2.19////"_$P(WVNODE,U,37) ;lab inverse date/time
"RTN","WVLABAD1",38,0)
 S DR=DR_";2.2////"_$P(WVNODE,U,38) ;lab subscript (CY or SP)
"RTN","WVLABAD1",39,0)
 I $P(WVNODE0,U,7)="",$P(WVNODE,U,7)]"" S DR=DR_";.07////"_$P(WVNODE,U,7) ;provider
"RTN","WVLABAD1",40,0)
 I $P(WVNODE0,U,10)="",$G(DUZ(2))]"" S DR=DR_";.1////"_$G(DUZ(2)) ;facility
"RTN","WVLABAD1",41,0)
 I $P(WVNODE0,U,11)="",$P(WVNODE,U,11)]"" S DR=DR_";.11////"_$P(WVNODE,U,11) ;location
"RTN","WVLABAD1",42,0)
 D ^DIE
"RTN","WVLABAD1",43,0)
 Q
"RTN","WVLABADD")
0^6^B31935826
"RTN","WVLABADD",1,0)
WVLABADD ;HCIOFO/FT-SAVE A LAB TEST AS A WH PROCEDURE ;5/10/99  12:10
"RTN","WVLABADD",2,0)
 ;;1.0;WOMEN'S HEALTH;**6**;Sep 30, 1998
"RTN","WVLABADD",3,0)
 ;
"RTN","WVLABADD",4,0)
EN ; Entry point from [WV SAVE LAB TEST] option.
"RTN","WVLABADD",5,0)
 ; Converts a lab test stored in the WV LAB TESTS file (#790.08) 
"RTN","WVLABADD",6,0)
 ; into an entry in the WV PROCEDURES file (#790.1)
"RTN","WVLABADD",7,0)
 N WVDICB
"RTN","WVLABADD",8,0)
 S (WVDICB,WVPOP)=0
"RTN","WVLABADD",9,0)
 F  D  Q:WVPOP
"RTN","WVLABADD",10,0)
 .D SELECT Q:WVPOP
"RTN","WVLABADD",11,0)
 .D DISPLAY
"RTN","WVLABADD",12,0)
 .Q
"RTN","WVLABADD",13,0)
 D KILL
"RTN","WVLABADD",14,0)
 Q
"RTN","WVLABADD",15,0)
SELECT ; Select a lab test entry from File 790.08
"RTN","WVLABADD",16,0)
 N DIC,DTOUT,DUOUT,WVDFN
"RTN","WVLABADD",17,0)
 S DIC="^WV(790.08,",DIC(0)="AEMQZ"
"RTN","WVLABADD",18,0)
 S DIC("A")="Select Lab Test Accession#: "
"RTN","WVLABADD",19,0)
 D DEFAULT
"RTN","WVLABADD",20,0)
 D ^DIC
"RTN","WVLABADD",21,0)
 I Y<0!($D(DTOUT))!($D(DUOUT)) S WVPOP=1 Q
"RTN","WVLABADD",22,0)
 S WVIEN=+Y
"RTN","WVLABADD",23,0)
 S WVDFN=+$P(^WV(790.08,+Y,0),U,2)
"RTN","WVLABADD",24,0)
 S:WVDFN ^DISV(DUZ,"^DPT(")=WVDFN ;space bar/return save for File 790
"RTN","WVLABADD",25,0)
 Q
"RTN","WVLABADD",26,0)
DISPLAY ; Display lab test data
"RTN","WVLABADD",27,0)
 Q:'$G(WVIEN)
"RTN","WVLABADD",28,0)
 N LRDFN,LRSS,WVDATE,WVLABACC,WVNAME,WVNODE,WVVALUE
"RTN","WVLABADD",29,0)
 S WVNODE=$G(^WV(790.08,+WVIEN,0))
"RTN","WVLABADD",30,0)
 Q:WVNODE=""
"RTN","WVLABADD",31,0)
 S WVLABACC=$P(WVNODE,U,1) ;lab accession#
"RTN","WVLABADD",32,0)
 S LRDFN=$P(WVNODE,U,36) ;File 63 ien (+^DPT(DFN,"LR"))
"RTN","WVLABADD",33,0)
 S WVDATE=$P(WVNODE,U,37) ;File 63 inverse date/time
"RTN","WVLABADD",34,0)
 S LRSS=$P(WVNODE,U,38) ;File 63 subscript (CY or SP)
"RTN","WVLABADD",35,0)
 I WVLABACC=""!(LRDFN="")!(WVDATE="")!(LRSS="") D  Q
"RTN","WVLABADD",36,0)
 .W !,"Sorry, lab test "_WVLABACC_" is not available after all."
"RTN","WVLABADD",37,0)
 .W !,"Will delete this lab test from the list of choices.",!
"RTN","WVLABADD",38,0)
 .D DELETE(WVIEN)
"RTN","WVLABADD",39,0)
 .Q
"RTN","WVLABADD",40,0)
 I $D(^WV(790.1,"F",WVLABACC)) D  Q
"RTN","WVLABADD",41,0)
 .S WVVALUE=$O(^WV(790.1,"F",WVLABACC,0))
"RTN","WVLABADD",42,0)
 .S WVVALUE=$P($G(^WV(790.1,WVVALUE,0)),U,1)
"RTN","WVLABADD",43,0)
 .W !,"Sorry, lab test "_WVLABACC_" is already saved as a procedure."
"RTN","WVLABADD",44,0)
 .W !,"It is logged as WH accession# "_WVVALUE_"."
"RTN","WVLABADD",45,0)
 .W !,"Will delete this lab test from the list of choices.",!
"RTN","WVLABADD",46,0)
 .D DELETE(WVIEN)
"RTN","WVLABADD",47,0)
 .Q
"RTN","WVLABADD",48,0)
 K ^TMP("WVLAB",$J)
"RTN","WVLABADD",49,0)
 D HS^WVLABWP ;call Health Summary, returns lab data in ^TMP("WVLAB",$J) 
"RTN","WVLABADD",50,0)
 I '$D(^TMP("WVLAB",$J)) D  Q
"RTN","WVLABADD",51,0)
 .W !,"Sorry, lab test data is not available for this choice."
"RTN","WVLABADD",52,0)
 .W !,"Will delete this lab test from the list of choices.",!
"RTN","WVLABADD",53,0)
 .D DELETE(WVIEN)
"RTN","WVLABADD",54,0)
 .Q
"RTN","WVLABADD",55,0)
 S WVNAME=$P(WVNODE,U,2) ;dfn
"RTN","WVLABADD",56,0)
 S WVNAME=$$GET1^DIQ(2,WVNAME,.01,"E") ;get patient name for Browser call
"RTN","WVLABADD",57,0)
 D BROWSE^DDBR("^TMP(""WVLAB"",$J)","N",WVNAME)
"RTN","WVLABADD",58,0)
KEEP ; Save lab test as procedure OR delete lab test from File 790.08 OR
"RTN","WVLABADD",59,0)
 ; ignore it for now.
"RTN","WVLABADD",60,0)
 N DIR
"RTN","WVLABADD",61,0)
 S DIR(0)="S^A:add to the WH package;D:delete from the list of choices;I:ignore for now"
"RTN","WVLABADD",62,0)
 S DIR("A")="What action should be taken with this lab test"
"RTN","WVLABADD",63,0)
 S DIR("?",1)="Please determine what to do with this lab test."
"RTN","WVLABADD",64,0)
 S DIR("?",2)="  Ignore this lab test for now."
"RTN","WVLABADD",65,0)
 S DIR("?",3)="  Delete from the list. It shouldn't be a Women's Health procedure."
"RTN","WVLABADD",66,0)
 S DIR("?")="  Add this lab test as a Women's Health procedure entry."
"RTN","WVLABADD",67,0)
 D ^DIR
"RTN","WVLABADD",68,0)
 I $D(DIRUT) S WVPOP=1 Q
"RTN","WVLABADD",69,0)
 I Y="I" Q
"RTN","WVLABADD",70,0)
 I Y="D" D DELETE(WVIEN) Q
"RTN","WVLABADD",71,0)
 I Y="A" D CONVERT
"RTN","WVLABADD",72,0)
 Q
"RTN","WVLABADD",73,0)
CONVERT ; Add the lab test data to the WV PROCEDURE file (#790.1)
"RTN","WVLABADD",74,0)
 Q:'$G(WVIEN)
"RTN","WVLABADD",75,0)
 N DFN,DIC,DTOUT,DUOUT
"RTN","WVLABADD",76,0)
 N WVDATE,WVDR,WVERR,WVNODE,WVPROC
"RTN","WVLABADD",77,0)
 S WVNODE=$G(^WV(790.08,+WVIEN,0))
"RTN","WVLABADD",78,0)
 S DIC="^WV(790.2,",DIC(0)="AEMQZ"
"RTN","WVLABADD",79,0)
 S DIC("A")="Select the procedure type for this lab test: "
"RTN","WVLABADD",80,0)
 D ^DIC
"RTN","WVLABADD",81,0)
 W !
"RTN","WVLABADD",82,0)
 I Y<0!($D(DTOUT))!($D(DUOUT)) S WVPOP=1 Q
"RTN","WVLABADD",83,0)
 S WVPROC=+Y
"RTN","WVLABADD",84,0)
 S WVERR=1,DFN=$P(WVNODE,U,2),WVDATE=$P(WVNODE,U,12)
"RTN","WVLABADD",85,0)
 I '$D(^WV(790,DFN,0)) D  ;add patient to File 790, if not there
"RTN","WVLABADD",86,0)
 .D AUTOADD^WVPATE(DFN,DUZ(2),.WVERR)
"RTN","WVLABADD",87,0)
 .Q
"RTN","WVLABADD",88,0)
 Q:WVERR<0  ;quit if new patient could not be added to File 790
"RTN","WVLABADD",89,0)
 D FIND^WVLABAD1 ;check for 'unlinked' entry in File 790.1
"RTN","WVLABADD",90,0)
 I $D(^WV(790.1,"F",WVLABACC)) D  Q  ;link was made to existing entry
"RTN","WVLABADD",91,0)
 .D DELETE(WVIEN) ;delete lab test from list of choices
"RTN","WVLABADD",92,0)
 .S Y=+$O(^WV(790.1,"F",WVLABACC,0)) ;ien of procedure entry
"RTN","WVLABADD",93,0)
 .D EDIT ;edit procedure entry
"RTN","WVLABADD",94,0)
 .Q
"RTN","WVLABADD",95,0)
 S WVDR=".02////"_DFN
"RTN","WVLABADD",96,0)
 S WVDR=WVDR_";.04////"_WVPROC ;File 790.2 pointer
"RTN","WVLABADD",97,0)
 S:$P(WVNODE,U,7)]"" WVDR=WVDR_";.07////"_$P(WVNODE,U,7) ;provider
"RTN","WVLABADD",98,0)
 S WVDR=WVDR_";.1////"_$G(DUZ(2)) ;health care facility
"RTN","WVLABADD",99,0)
 S:$P(WVNODE,U,11)]"" WVDR=WVDR_";.11////"_$P(WVNODE,U,11) ;patient location
"RTN","WVLABADD",100,0)
 S WVDR=WVDR_";.12////"_$P(WVNODE,U,12) ;procedure date/time
"RTN","WVLABADD",101,0)
 S WVDR=WVDR_";.14////"_"o" ;status
"RTN","WVLABADD",102,0)
 S WVDR=WVDR_";.18////.5;.19////"_DT ;entering user and date
"RTN","WVLABADD",103,0)
 S WVDR=WVDR_";.34////"_$G(DUZ(2)) ;accessioning facility
"RTN","WVLABADD",104,0)
 S WVDR=WVDR_";2.17////"_$P(WVNODE,U,1) ;lab accession#
"RTN","WVLABADD",105,0)
 S WVDR=WVDR_";2.18////"_$P(WVNODE,U,36) ;Lab Data file (#63) pointer
"RTN","WVLABADD",106,0)
 S WVDR=WVDR_";2.19////"_$P(WVNODE,U,37) ;Lab Data file inverse d/t
"RTN","WVLABADD",107,0)
 S WVDR=WVDR_";2.2////"_$P(WVNODE,U,38) ;Lab Data file subscript (CY/SP)
"RTN","WVLABADD",108,0)
 ; add procedure to File 790.1
"RTN","WVLABADD",109,0)
 D NEW2^WVPROC(DFN,WVPROC,WVDATE,WVDR,"","",.WVERR)
"RTN","WVLABADD",110,0)
 I Y D DELETE(WVIEN)
"RTN","WVLABADD",111,0)
 I Y D EDIT
"RTN","WVLABADD",112,0)
 Q
"RTN","WVLABADD",113,0)
KILL ; Kill variables
"RTN","WVLABADD",114,0)
 K WVIEN,WVPOP,X,Y
"RTN","WVLABADD",115,0)
 K ^TMP("WVLAB",$J)
"RTN","WVLABADD",116,0)
 Q
"RTN","WVLABADD",117,0)
DELETE(WVIEN) ; Delete an entry from File 790.08
"RTN","WVLABADD",118,0)
 Q:'$G(WVIEN)
"RTN","WVLABADD",119,0)
 N DA,DIK,Y
"RTN","WVLABADD",120,0)
 S DA=WVIEN,DIK="^WV(790.08,"
"RTN","WVLABADD",121,0)
 D ^DIK
"RTN","WVLABADD",122,0)
 Q
"RTN","WVLABADD",123,0)
EDIT ; Edit WV PROCEDURE (#790.1) file entry
"RTN","WVLABADD",124,0)
 Q:'$G(Y)
"RTN","WVLABADD",125,0)
 D LT^WVPROC ;edit the new entry
"RTN","WVLABADD",126,0)
 S WVPOP=0 ;reset WVPOP which is killed by ^WVPROC call
"RTN","WVLABADD",127,0)
 Q
"RTN","WVLABADD",128,0)
DEFAULT ; Find next default look-up value.
"RTN","WVLABADD",129,0)
 ; WVQUIT - ien of File 790.08 entry
"RTN","WVLABADD",130,0)
 ; WVDICB - last entry checked (don't show an entry they bypassed)
"RTN","WVLABADD",131,0)
 N WVLOOP,WVNODE,WVQUIT
"RTN","WVLABADD",132,0)
 Q:$G(WVDICB)=""
"RTN","WVLABADD",133,0)
 S WVQUIT=0,WVLOOP=+WVDICB
"RTN","WVLABADD",134,0)
 F  S WVLOOP=$O(^WV(790.08,WVLOOP)) Q:'WVLOOP  D  Q:WVQUIT
"RTN","WVLABADD",135,0)
 .S WVNODE=$G(^WV(790.08,WVLOOP,0)) Q:WVNODE=""
"RTN","WVLABADD",136,0)
 .I $P(WVNODE,U,7)=DUZ D  Q  ;duz is requesting provider
"RTN","WVLABADD",137,0)
 ..S (WVDICB,WVQUIT)=WVLOOP
"RTN","WVLABADD",138,0)
 ..Q
"RTN","WVLABADD",139,0)
 .I $P($G(^WV(790,+$P(WVNODE,U,2),0)),U,10)=DUZ D  ;case mgr
"RTN","WVLABADD",140,0)
 ..S (WVDICB,WVQUIT)=WVLOOP
"RTN","WVLABADD",141,0)
 ..Q
"RTN","WVLABADD",142,0)
 .Q
"RTN","WVLABADD",143,0)
 S DIC("B")=$S(WVQUIT:$P(^WV(790.08,+WVQUIT,0),U,1),1:"")
"RTN","WVLABADD",144,0)
 K:DIC("B")="" DIC("B")
"RTN","WVLABADD",145,0)
 Q
"RTN","WVLABWP")
0^2^B37037058
"RTN","WVLABWP",1,0)
WVLABWP ;HCIOFO/FT-Display Report Data from Lab Package  ;4/6/99  14:02
"RTN","WVLABWP",2,0)
 ;;1.0;WOMEN'S HEALTH;**6**;Sep 30, 1998
"RTN","WVLABWP",3,0)
 ;
"RTN","WVLABWP",4,0)
EN7901 ; Determine which report to show (i.e., Cytology or Surgical Pathology)
"RTN","WVLABWP",5,0)
 ; Called from WVPROC
"RTN","WVLABWP",6,0)
 D EX^WVRADWP ;kill any previous report text that might be leftover
"RTN","WVLABWP",7,0)
 Q:'$G(DA)
"RTN","WVLABWP",8,0)
 N LRDFN,LRSS,WVDATE,WVLABACC,WVNODE,WVNODE2
"RTN","WVLABWP",9,0)
 S WVNODE=$G(^WV(790.1,+DA,0))
"RTN","WVLABWP",10,0)
 Q:WVNODE=""
"RTN","WVLABWP",11,0)
 S WVNODE2=$G(^WV(790.1,+DA,2))
"RTN","WVLABWP",12,0)
 Q:WVNODE2=""
"RTN","WVLABWP",13,0)
 S WVLABACC=$P(WVNODE2,U,17) ;lab accession number (e.g., CY 99 1)
"RTN","WVLABWP",14,0)
 Q:WVLABACC=""
"RTN","WVLABWP",15,0)
 S WVDATE=$P(WVNODE2,U,19) ;lab accession date (reverse date/time)
"RTN","WVLABWP",16,0)
 Q:'WVDATE
"RTN","WVLABWP",17,0)
 S LRDFN=$P(WVNODE2,U,18) ;lab patient ien
"RTN","WVLABWP",18,0)
 Q:'LRDFN
"RTN","WVLABWP",19,0)
 S LRSS=$P(WVNODE2,U,20) ;lab patient subscript
"RTN","WVLABWP",20,0)
 Q:LRSS=""
"RTN","WVLABWP",21,0)
 D HS
"RTN","WVLABWP",22,0)
 Q
"RTN","WVLABWP",23,0)
HS ; Health Summary variable setup
"RTN","WVLABWP",24,0)
 N GMTS1,GMTS2,MAX
"RTN","WVLABWP",25,0)
 S GMTS1=WVDATE-1,GMTS2=WVDATE+1,MAX=100
"RTN","WVLABWP",26,0)
 I LRSS="CY" D CY ;cytology
"RTN","WVLABWP",27,0)
 I LRSS="SP" D SP ;surgical pathology
"RTN","WVLABWP",28,0)
 K ^TMP("LRA",$J),^TMP("LRCY",$J)
"RTN","WVLABWP",29,0)
 Q
"RTN","WVLABWP",30,0)
CY ; Call Health Summary extract routine GMTSLRPE to get cytology data.
"RTN","WVLABWP",31,0)
 ; Input: LRDFN - FILE 63 ien
"RTN","WVLABWP",32,0)
 ;        GMTS1 - reverse start date/time (most recent date)
"RTN","WVLABWP",33,0)
 ;        GMTS2 - reverse end date/time   (least recent date)
"RTN","WVLABWP",34,0)
 ;          MAX - maximum # of occurences to return
"RTN","WVLABWP",35,0)
 ; Returns ^TMP("LRCY",$J)
"RTN","WVLABWP",36,0)
 K ^TMP("LRCY",$J)
"RTN","WVLABWP",37,0)
 I $T(XTRCT^GMTSLRPE)']"" Q  ;HS routine doesn't exist
"RTN","WVLABWP",38,0)
 D XTRCT^GMTSLRPE
"RTN","WVLABWP",39,0)
 Q:'$D(^TMP("LRCY",$J))
"RTN","WVLABWP",40,0)
 D WEEDCY
"RTN","WVLABWP",41,0)
 Q:'$D(^TMP("LRCY",$J))
"RTN","WVLABWP",42,0)
 D ^WVLABWPC ;move data from HS array to WH array
"RTN","WVLABWP",43,0)
 Q
"RTN","WVLABWP",44,0)
WEEDCY ; Weed out reports, save only report for lab accession number
"RTN","WVLABWP",45,0)
 ; associated with this WH entry.
"RTN","WVLABWP",46,0)
 N WVLOOP
"RTN","WVLABWP",47,0)
 S WVLOOP=0
"RTN","WVLABWP",48,0)
 F  S WVLOOP=$O(^TMP("LRCY",$J,WVLOOP)) Q:'WVLOOP  D
"RTN","WVLABWP",49,0)
 .I $P($G(^TMP("LRCY",$J,WVLOOP,0)),U,2)'=WVLABACC D
"RTN","WVLABWP",50,0)
 ..K ^TMP("LRCY",$J,WVLOOP)
"RTN","WVLABWP",51,0)
 ..Q
"RTN","WVLABWP",52,0)
 .Q
"RTN","WVLABWP",53,0)
 Q
"RTN","WVLABWP",54,0)
SP ; Call Health Summary extract routine GMTSLRAE to get surgical
"RTN","WVLABWP",55,0)
 ; pathology data.
"RTN","WVLABWP",56,0)
 ; Input: LRDFN - FILE 63 ien
"RTN","WVLABWP",57,0)
 ;        GMTS1 - reverse start date/time (most recent date)
"RTN","WVLABWP",58,0)
 ;        GMTS2 - reverse end date/time   (least recent date)
"RTN","WVLABWP",59,0)
 ;          MAX - maximum # of occurences to return
"RTN","WVLABWP",60,0)
 ; Returns ^TMP("LRA",$J)
"RTN","WVLABWP",61,0)
 K ^TMP("LRA",$J)
"RTN","WVLABWP",62,0)
 I $T(XTRCT^GMTSLRAE)']"" Q  ;HS routine doesn't exist
"RTN","WVLABWP",63,0)
 D XTRCT^GMTSLRAE
"RTN","WVLABWP",64,0)
 Q:'$D(^TMP("LRA",$J))
"RTN","WVLABWP",65,0)
 D WEEDSP
"RTN","WVLABWP",66,0)
 Q:'$D(^TMP("LRA",$J))
"RTN","WVLABWP",67,0)
 D ^WVLABWPS ;move data from HS array to WH array
"RTN","WVLABWP",68,0)
 Q
"RTN","WVLABWP",69,0)
WEEDSP ; Weed out reports, save only report for lab accession number
"RTN","WVLABWP",70,0)
 ; associated with this WH entry.
"RTN","WVLABWP",71,0)
 N WVLOOP
"RTN","WVLABWP",72,0)
 S WVLOOP=0
"RTN","WVLABWP",73,0)
 F  S WVLOOP=$O(^TMP("LRA",$J,WVLOOP)) Q:'WVLOOP  D
"RTN","WVLABWP",74,0)
 .I $P($G(^TMP("LRA",$J,WVLOOP,0)),U,2)'=WVLABACC D
"RTN","WVLABWP",75,0)
 ..K ^TMP("LRA",$J,WVLOOP)
"RTN","WVLABWP",76,0)
 ..Q
"RTN","WVLABWP",77,0)
 .Q
"RTN","WVLABWP",78,0)
 Q
"RTN","WVLABWP",79,0)
MAIL(DFN,WVLABAN,WVPROV,LRSS) ; Send mail message to case manager when
"RTN","WVLABWP",80,0)
 ; lab test is added to WV LAB TESTS file (#790.08).
"RTN","WVLABWP",81,0)
 ; Called from WVLRLINK
"RTN","WVLABWP",82,0)
 ;      DFN -> Patient ien
"RTN","WVLABWP",83,0)
 ;  WVLABAN -> Lab Accession# (e.g., CY 99 1)
"RTN","WVLABWP",84,0)
 ;   WVPROV -> File 200   IEN (provider/requestor)
"RTN","WVLABWP",85,0)
 ;     LRSS -> File 63 subscript (e.g., CY or SP)
"RTN","WVLABWP",86,0)
 Q:'$G(DFN)!($G(WVLABAN)="")!($G(LRSS)="")
"RTN","WVLABWP",87,0)
 N WVCMGR,WVLOOP,WVMSG,XMDUZ,XMSUB,XMTEXT
"RTN","WVLABWP",88,0)
 S WVCMGR=+$$GET1^DIQ(790,DFN,.1,"I") ;get case manager
"RTN","WVLABWP",89,0)
 S:WVCMGR XMY(WVCMGR)=""
"RTN","WVLABWP",90,0)
 ; if no case manager, then get default case manager(s)
"RTN","WVLABWP",91,0)
 I 'WVCMGR S WVLOOP=0 F  S WVLOOP=$O(^WV(790.02,WVLOOP)) Q:'WVLOOP  D
"RTN","WVLABWP",92,0)
 .S WVCMGR=$$GET1^DIQ(790.02,WVLOOP,.02,"I")
"RTN","WVLABWP",93,0)
 .S:WVCMGR XMY(WVCMGR)=""
"RTN","WVLABWP",94,0)
 .Q
"RTN","WVLABWP",95,0)
 Q:$O(XMY(0))'>0  ;no case manager(s)
"RTN","WVLABWP",96,0)
 S XMDUZ=.5 ;message sender
"RTN","WVLABWP",97,0)
 S XMSUB="Lab test released for a WH patient"
"RTN","WVLABWP",98,0)
 S WVMSG(1)="A "_$S(LRSS="CY":"Cytology ",LRSS="SP":"Surgical Pathology ",1:"")_"lab test was verified for:"
"RTN","WVLABWP",99,0)
 S WVMSG(2)=" "
"RTN","WVLABWP",100,0)
 S WVMSG(3)="                Patient: "_$P($G(^DPT(DFN,0)),U,1)_" (SSN: "_$$SSN^WVUTL1(DFN)_")"
"RTN","WVLABWP",101,0)
 S WVMSG(4)="        LAB Accession #: "_WVLABAN
"RTN","WVLABWP",102,0)
 S WVMSG(5)="Test Requestor/Provider: "_$S(+WVPROV:$$GET1^DIQ(200,+WVPROV,.01,"E"),1:"UNKNOWN")
"RTN","WVLABWP",103,0)
 S WVMSG(6)=" "
"RTN","WVLABWP",104,0)
 S WVMSG(7)="Please use the 'Save Lab Test as Procedure' option in the WOMEN'S"
"RTN","WVLABWP",105,0)
 S WVMSG(8)="HEALTH package to save this lab test data as a WH procedure or"
"RTN","WVLABWP",106,0)
 S WVMSG(9)="remove it from the list of lab tests to address."
"RTN","WVLABWP",107,0)
 S XMTEXT="WVMSG("
"RTN","WVLABWP",108,0)
 D ^XMD
"RTN","WVLABWP",109,0)
 Q
"RTN","WVLABWP",110,0)
MOVE(WVDFN,WVNODE,WVNIEN) ; Send mail message when a lab accession is
"RTN","WVLABWP",111,0)
 ; moved from one patient to another.
"RTN","WVLABWP",112,0)
 ;  WVDFN -> DFN
"RTN","WVLABWP",113,0)
 ; WVNODE -> zero node of File 790.1
"RTN","WVLABWP",114,0)
 ; WVNIEN -> ien of File 790.4 entry (i.e., notification entry exists)
"RTN","WVLABWP",115,0)
 N WVCMGR,WVLOOP,WVPN,WVMSG
"RTN","WVLABWP",116,0)
 N XMDUZ,XMSUB,XMTEXT,XMY
"RTN","WVLABWP",117,0)
 S WVCMGR=+$$GET1^DIQ(790,WVDFN,.1,"I") ;get case manager
"RTN","WVLABWP",118,0)
 S:WVCMGR XMY(WVCMGR)=""
"RTN","WVLABWP",119,0)
 ; if no case manager, then get default case manager(s)
"RTN","WVLABWP",120,0)
 I 'WVCMGR S WVLOOP=0 F  S WVLOOP=$O(^WV(790.02,WVLOOP)) Q:'WVLOOP  D
"RTN","WVLABWP",121,0)
 .S WVCMGR=$$GET1^DIQ(790.02,WVLOOP,.02,"I")
"RTN","WVLABWP",122,0)
 .S:WVCMGR XMY(WVCMGR)=""
"RTN","WVLABWP",123,0)
 .Q
"RTN","WVLABWP",124,0)
 Q:$O(XMY(0))'>0  ;no case manager(s)
"RTN","WVLABWP",125,0)
 S WVPN=$E($P(WVNODE,U,1),1,2),WVPN=$$PN^WVLRLINK(WVPN) ;procedure name
"RTN","WVLABWP",126,0)
 S XMDUZ=.5 ;message sender
"RTN","WVLABWP",127,0)
 S XMSUB="Lab Accession Patient Switch"
"RTN","WVLABWP",128,0)
 ;
"RTN","WVLABWP",129,0)
 S WVMSG(1)="The wrong patient was originally associated with a lab test. That lab test"
"RTN","WVLABWP",130,0)
 S WVMSG(2)="was saved as a Women's Health procedure entry. Lab personnel have corrected"
"RTN","WVLABWP",131,0)
 S WVMSG(3)="the lab test entry by associating the correct patient to that test."
"RTN","WVLABWP",132,0)
 S WVMSG(4)="This message is to inform you that the following Women's Health procedure"
"RTN","WVLABWP",133,0)
 S WVMSG(5)="is no longer associated with a lab test."
"RTN","WVLABWP",134,0)
 S WVMSG(6)=" "
"RTN","WVLABWP",135,0)
 S WVMSG(7)="        Patient: "_$P($G(^DPT(WVDFN,0)),U,1)_" (SSN: "_$$SSN^WVUTL1(WVDFN)_")"
"RTN","WVLABWP",136,0)
 S WVMSG(8)=" WH Accession #: "_$P(WVNODE,U,1)_"  Procedure Type: "_$S(WVPN]"":WVPN,1:"Unknown")
"RTN","WVLABWP",137,0)
 S WVMSG(9)=" "
"RTN","WVLABWP",138,0)
 S WVMSG(10)="The RESULT/DIAGNOSIS value for this entry was changed to 'Error/disregard'."
"RTN","WVLABWP",139,0)
 S WVMSG(11)="Please use the 'Edit a Procedure' option in the WOMEN'S HEALTH package to"
"RTN","WVLABWP",140,0)
 S WVMSG(12)="review this procedure entry and make any necessary changes/notes."
"RTN","WVLABWP",141,0)
 I WVNIEN D
"RTN","WVLABWP",142,0)
 .S WVMSG(13)=" "
"RTN","WVLABWP",143,0)
 .S WVMSG(14)="Also, a notification entry was created for this procedure. Please use the"
"RTN","WVLABWP",144,0)
 .S WVMSG(15)="'Edit a Notification' option in the WOMEN'S HEALTH package to edit this"
"RTN","WVLABWP",145,0)
 .S WVMSG(16)="notification entry."
"RTN","WVLABWP",146,0)
 .Q
"RTN","WVLABWP",147,0)
 S XMTEXT="WVMSG("
"RTN","WVLABWP",148,0)
 D ^XMD
"RTN","WVLABWP",149,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVLABWP",150,0)
 Q
"RTN","WVLABWPC")
0^3^B22195629
"RTN","WVLABWPC",1,0)
WVLABWPC ;HCIOFO/FT-Display Report Data from Lab Package ;3/4/99  14:58
"RTN","WVLABWPC",2,0)
 ;;1.0;WOMEN'S HEALTH;**6**;Sep 30, 1998
"RTN","WVLABWPC",3,0)
 ;
"RTN","WVLABWPC",4,0)
EN ; Move data from ^TMP("LRCY",$J) to ^TMP("WVLAB",$J) for display.
"RTN","WVLABWPC",5,0)
 ; Called from WVLABWP and WVPROC
"RTN","WVLABWPC",6,0)
 Q:'$D(^TMP("LRCY",$J))
"RTN","WVLABWPC",7,0)
 N WVDATE,WVLINE,WVNODE,WVRPTDT,WVSUB2,WVSUB3,WVSUB4,WVTMP
"RTN","WVLABWPC",8,0)
 K ^TMP("WVLAB",$J)
"RTN","WVLABWPC",9,0)
 S WVDATE=$O(^TMP("LRCY",$J,0)) Q:'WVDATE
"RTN","WVLABWPC",10,0)
 S WVTMP=$G(^TMP("LRCY",$J,WVDATE,0))
"RTN","WVLABWPC",11,0)
 S WVLINE=0
"RTN","WVLABWPC",12,0)
 D ADD
"RTN","WVLABWPC",13,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="      Collected: "_$P(WVTMP,U,1)
"RTN","WVLABWPC",14,0)
 D ADD
"RTN","WVLABWPC",15,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="Lab Accession #: "_$P(WVTMP,U,2)
"RTN","WVLABWPC",16,0)
 D ADD
"RTN","WVLABWPC",17,0)
 S WVTMP=$G(^TMP("LRCY",$J,WVDATE,1))
"RTN","WVLABWPC",18,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="       Specimen: "_$P(WVTMP,U,1)
"RTN","WVLABWPC",19,0)
 S WVSUB2=0
"RTN","WVLABWPC",20,0)
 F  S WVSUB2=$O(^TMP("LRCY",$J,WVDATE,1,WVSUB2)) Q:'WVSUB2  D
"RTN","WVLABWPC",21,0)
 .D ADD
"RTN","WVLABWPC",22,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$$REPEAT^XLFSTR(" ",17)_^TMP("LRCY",$J,WVDATE,1,WVSUB2)
"RTN","WVLABWPC",23,0)
 .Q
"RTN","WVLABWPC",24,0)
 D ADD,BLANK
"RTN","WVLABWPC",25,0)
 I $P(WVTMP,U,2)'>0 D  Q
"RTN","WVLABWPC",26,0)
 .D ADD
"RTN","WVLABWPC",27,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$$REPEAT^XLFSTR(" ",18)_"** REPORT NOT YET RELEASED **"
"RTN","WVLABWPC",28,0)
 .Q
"RTN","WVLABWPC",29,0)
 S WVSUB2=1
"RTN","WVLABWPC",30,0)
 F  S WVSUB2=$O(^TMP("LRCY",$J,WVDATE,WVSUB2)) Q:WVSUB2=""  D
"RTN","WVLABWPC",31,0)
 .D @$E(WVSUB2,1,2)
"RTN","WVLABWPC",32,0)
 .Q
"RTN","WVLABWPC",33,0)
 ; NOTE: Calling routine should kill ^TMP("LRCY",$J)
"RTN","WVLABWPC",34,0)
 Q
"RTN","WVLABWPC",35,0)
AH ; Clinical History
"RTN","WVLABWPC",36,0)
 D ADD
"RTN","WVLABWPC",37,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="<Brief Clinical Hx>"
"RTN","WVLABWPC",38,0)
 S WVSUB3=0
"RTN","WVLABWPC",39,0)
 F  S WVSUB3=$O(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3)) Q:'WVSUB3  D
"RTN","WVLABWPC",40,0)
 .D ADD
"RTN","WVLABWPC",41,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3))
"RTN","WVLABWPC",42,0)
 .Q
"RTN","WVLABWPC",43,0)
 D ADD,BLANK
"RTN","WVLABWPC",44,0)
 Q
"RTN","WVLABWPC",45,0)
G ; Gross Description
"RTN","WVLABWPC",46,0)
 D ADD
"RTN","WVLABWPC",47,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="<Gross Description>"
"RTN","WVLABWPC",48,0)
 S WVSUB3=0
"RTN","WVLABWPC",49,0)
 F  S WVSUB3=$O(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3)) Q:'WVSUB3  D
"RTN","WVLABWPC",50,0)
 .D ADD
"RTN","WVLABWPC",51,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3))
"RTN","WVLABWPC",52,0)
 .Q
"RTN","WVLABWPC",53,0)
 D ADD,BLANK
"RTN","WVLABWPC",54,0)
 Q
"RTN","WVLABWPC",55,0)
MI ; Microscopic exam/diagnosis field
"RTN","WVLABWPC",56,0)
 D ADD
"RTN","WVLABWPC",57,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="<Microscopic Exam>"
"RTN","WVLABWPC",58,0)
 S WVSUB3=0
"RTN","WVLABWPC",59,0)
 F  S WVSUB3=$O(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3)) Q:'WVSUB3  D
"RTN","WVLABWPC",60,0)
 .D ADD
"RTN","WVLABWPC",61,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3))
"RTN","WVLABWPC",62,0)
 .Q
"RTN","WVLABWPC",63,0)
 D ADD,BLANK
"RTN","WVLABWPC",64,0)
 Q
"RTN","WVLABWPC",65,0)
ND ; Cytopathology Dx
"RTN","WVLABWPC",66,0)
 D ADD
"RTN","WVLABWPC",67,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="<Cytopathology Dx>"
"RTN","WVLABWPC",68,0)
 S WVSUB3=0
"RTN","WVLABWPC",69,0)
 F  S WVSUB3=$O(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3)) Q:'WVSUB3  D
"RTN","WVLABWPC",70,0)
 .D ADD
"RTN","WVLABWPC",71,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3))
"RTN","WVLABWPC",72,0)
 .Q
"RTN","WVLABWPC",73,0)
 D ADD,BLANK
"RTN","WVLABWPC",74,0)
 Q
"RTN","WVLABWPC",75,0)
OT ; Topography
"RTN","WVLABWPC",76,0)
 D ADD
"RTN","WVLABWPC",77,0)
 S WVSUB3=0
"RTN","WVLABWPC",78,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="Topography: "_$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3))
"RTN","WVLABWPC",79,0)
 F  S WVSUB3=$O(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3)) Q:WVSUB3=""  D @$E(WVSUB3,1)
"RTN","WVLABWPC",80,0)
 Q
"RTN","WVLABWPC",81,0)
D ; Disease
"RTN","WVLABWPC",82,0)
 D ADD
"RTN","WVLABWPC",83,0)
 S ^TMP("WVLAB",$J,WVLINE,0)=$$REPEAT^XLFSTR(" ",8)_$S(WVSUB3="D1":"Diseases: ",1:$$REPEAT^XLFSTR(" ",10))_$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3))
"RTN","WVLABWPC",84,0)
 Q
"RTN","WVLABWPC",85,0)
M ; Morphology
"RTN","WVLABWPC",86,0)
 D ADD
"RTN","WVLABWPC",87,0)
 S ^TMP("WVLAB",$J,WVLINE,0)=$$REPEAT^XLFSTR(" ",8)_$P($G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3)),U,1)
"RTN","WVLABWPC",88,0)
 S WVSUB4=""
"RTN","WVLABWPC",89,0)
 F  S WVSUB4=$O(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3,WVSUB4)) Q:WVSUB4=""  D
"RTN","WVLABWPC",90,0)
 .D ADD
"RTN","WVLABWPC",91,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$$REPEAT^XLFSTR(" ",8)_$S(WVSUB4=1:"Diseases: ",1:$$REPEAT^XLFSTR(" ",10))_$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3,WVSUB4))
"RTN","WVLABWPC",92,0)
 .Q
"RTN","WVLABWPC",93,0)
 Q
"RTN","WVLABWPC",94,0)
P ; Procedure
"RTN","WVLABWPC",95,0)
 D ADD
"RTN","WVLABWPC",96,0)
 S ^TMP("WVLAB",$J,WVLINE,0)=$$REPEAT^XLFSTR(" ",7)_$S(WVSUB3="P1":"Procedures: ",1:$$REPEAT^XLFSTR(" ",12))_$P($G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3)),U,1)
"RTN","WVLABWPC",97,0)
 Q
"RTN","WVLABWPC",98,0)
SR ; Supplementary Report
"RTN","WVLABWPC",99,0)
 S WVSUB3=0
"RTN","WVLABWPC",100,0)
 F  S WVSUB3=$O(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3)) Q:'WVSUB3  D
"RTN","WVLABWPC",101,0)
 .S WVRPTDT=$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3,0))
"RTN","WVLABWPC",102,0)
 .S WVRPTDT=$$FMTE^XLFDT(WVRPTDT,"2P")
"RTN","WVLABWPC",103,0)
 .D ADD
"RTN","WVLABWPC",104,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)="Supplementary Rpt: "_WVRPTDT
"RTN","WVLABWPC",105,0)
 .S WVSUB4=0
"RTN","WVLABWPC",106,0)
 .F  S WVSUB4=$O(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3,WVSUB4)) Q:'WVSUB4  D
"RTN","WVLABWPC",107,0)
 ..S WVNODE=$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3,WVSUB4))
"RTN","WVLABWPC",108,0)
 ..D ADD
"RTN","WVLABWPC",109,0)
 ..S ^TMP("WVLAB",$J,WVLINE,0)=WVNODE
"RTN","WVLABWPC",110,0)
 ..Q
"RTN","WVLABWPC",111,0)
 .Q
"RTN","WVLABWPC",112,0)
 Q
"RTN","WVLABWPC",113,0)
XI ; ICD Diagnoses
"RTN","WVLABWPC",114,0)
 D ADD
"RTN","WVLABWPC",115,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="<ICD-9 Diagnoses>"
"RTN","WVLABWPC",116,0)
 S WVSUB3=0
"RTN","WVLABWPC",117,0)
 F  S WVSUB3=$O(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3)) Q:'WVSUB3  D
"RTN","WVLABWPC",118,0)
 .D ADD
"RTN","WVLABWPC",119,0)
 .S WVTMP=$G(^TMP("LRCY",$J,WVDATE,WVSUB2,WVSUB3))
"RTN","WVLABWPC",120,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$P(WVTMP,U,1)_"  "_$P(WVTMP,U,2)
"RTN","WVLABWPC",121,0)
 .Q
"RTN","WVLABWPC",122,0)
 Q
"RTN","WVLABWPC",123,0)
ADD ; Bump up line counter
"RTN","WVLABWPC",124,0)
 S WVLINE=WVLINE+1
"RTN","WVLABWPC",125,0)
 Q
"RTN","WVLABWPC",126,0)
BLANK ; Add a blank line
"RTN","WVLABWPC",127,0)
 S ^TMP("WVLAB",$J,WVLINE,0)=" "
"RTN","WVLABWPC",128,0)
 Q
"RTN","WVLABWPS")
0^4^B16216191
"RTN","WVLABWPS",1,0)
WVLABWPS ;HCIOFO/FT-Display Surgical Pathology Data from Lab Package ;3/4/99  15:00
"RTN","WVLABWPS",2,0)
 ;;1.0;WOMEN'S HEALTH;**6**;Sep 30, 1998
"RTN","WVLABWPS",3,0)
 ;
"RTN","WVLABWPS",4,0)
EN ; Move data from ^TMP("LRA",$J) to ^TMP("WVLAB",$J) for display
"RTN","WVLABWPS",5,0)
 ; Called from WVLABWP and WVPROC
"RTN","WVLABWPS",6,0)
 Q:'$D(^TMP("LRA",$J))
"RTN","WVLABWPS",7,0)
 N WVLINE,WVNODE,WVDATE,WVRPTDT,WVSUB2,WVSUB3,WVSUB4,WVSUB5,WVTEXT,X
"RTN","WVLABWPS",8,0)
 K ^TMP("WVLAB",$J)
"RTN","WVLABWPS",9,0)
 S (WVDATE,WVLINE)=0
"RTN","WVLABWPS",10,0)
 F  S WVDATE=$O(^TMP("LRA",$J,WVDATE)) Q:'WVDATE  D
"RTN","WVLABWPS",11,0)
 .S WVSUB2=""
"RTN","WVLABWPS",12,0)
 .F  S WVSUB2=$O(^TMP("LRA",$J,WVDATE,WVSUB2)) Q:WVSUB2=""!(WVSUB2?1A)  S WVNODE=$G(^TMP("LRA",$J,WVDATE,WVSUB2)) D ACCESSN
"RTN","WVLABWPS",13,0)
 .I $D(^TMP("LRA",$J,WVDATE,1.2)) D SUPRPT
"RTN","WVLABWPS",14,0)
 .Q
"RTN","WVLABWPS",15,0)
 ; NOTE: Calling routine should kill ^TMP("LRA",$J)
"RTN","WVLABWPS",16,0)
 Q
"RTN","WVLABWPS",17,0)
ACCESSN ; Collection date & Lab Accession#
"RTN","WVLABWPS",18,0)
 I WVSUB2=0 D
"RTN","WVLABWPS",19,0)
 .D ADD^WVLABWPC
"RTN","WVLABWPS",20,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)="      Collected: "_$P(WVNODE,U,1)
"RTN","WVLABWPS",21,0)
 .D ADD^WVLABWPC
"RTN","WVLABWPS",22,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)="Lab Accession #: "_$P(WVNODE,U,2)
"RTN","WVLABWPS",23,0)
 .Q
"RTN","WVLABWPS",24,0)
 I WVSUB2=.1 D SPEC Q
"RTN","WVLABWPS",25,0)
 I $S(WVSUB2=.2:1,WVSUB2=1:1,WVSUB2=1.1:1,WVSUB2=1.3:1,WVSUB2=1.4:1,1:0) D TEXT Q
"RTN","WVLABWPS",26,0)
 I WVSUB2=2 D
"RTN","WVLABWPS",27,0)
 .S WVSUB3=0
"RTN","WVLABWPS",28,0)
 .F  S WVSUB3=$O(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3)) Q:WVSUB3'>0  D
"RTN","WVLABWPS",29,0)
 ..S X=^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3)
"RTN","WVLABWPS",30,0)
 ..D WRTTM,WRTP
"RTN","WVLABWPS",31,0)
 ..Q
"RTN","WVLABWPS",32,0)
 .Q
"RTN","WVLABWPS",33,0)
 Q
"RTN","WVLABWPS",34,0)
SPEC ; Specimen list
"RTN","WVLABWPS",35,0)
 S WVSUB4=$O(^TMP("LRA",$J,WVDATE,.1,0))
"RTN","WVLABWPS",36,0)
 D ADD^WVLABWPC
"RTN","WVLABWPS",37,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="Specimen: "_$G(^TMP("LRA",$J,WVDATE,.1,WVSUB4))
"RTN","WVLABWPS",38,0)
 F  S WVSUB4=$O(^TMP("LRA",$J,WVDATE,.1,WVSUB4)) Q:'WVSUB4  D
"RTN","WVLABWPS",39,0)
 .D ADD^WVLABWPC
"RTN","WVLABWPS",40,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$$REPEAT^XLFSTR(" ",10)_$G(^TMP("LRA",$J,WVDATE,.1,WVSUB4))
"RTN","WVLABWPS",41,0)
 .Q
"RTN","WVLABWPS",42,0)
 D ADD^WVLABWPC,BLANK^WVLABWPC
"RTN","WVLABWPS",43,0)
 Q
"RTN","WVLABWPS",44,0)
TEXT ; Gross Description & Microscopic Exam/Dx
"RTN","WVLABWPS",45,0)
 D ADD^WVLABWPC
"RTN","WVLABWPS",46,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="<"_WVNODE_">"
"RTN","WVLABWPS",47,0)
 S WVSUB4=0
"RTN","WVLABWPS",48,0)
 F  S WVSUB4=$O(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB4)) Q:'WVSUB4  D
"RTN","WVLABWPS",49,0)
 .S WVTEXT=^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB4)
"RTN","WVLABWPS",50,0)
 .D ADD^WVLABWPC
"RTN","WVLABWPS",51,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=WVTEXT
"RTN","WVLABWPS",52,0)
 .Q
"RTN","WVLABWPS",53,0)
 Q
"RTN","WVLABWPS",54,0)
SUPRPT ; Supplementary Report
"RTN","WVLABWPS",55,0)
 S WVSUB2=0
"RTN","WVLABWPS",56,0)
 F  S WVSUB2=$O(^TMP("LRA",$J,WVDATE,1.2,WVSUB2)) Q:'WVSUB2  D
"RTN","WVLABWPS",57,0)
 .S WVRPTDT=$G(^TMP("LRA",$J,WVDATE,1.2,WVSUB2,0))
"RTN","WVLABWPS",58,0)
 .S WVRPTDT=$$FMTE^XLFDT(WVRPTDT,"2P")
"RTN","WVLABWPS",59,0)
 .D ADD^WVLABWPC
"RTN","WVLABWPS",60,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)="Supplementary Report: "_WVRPTDT
"RTN","WVLABWPS",61,0)
 .S WVSUB3=0
"RTN","WVLABWPS",62,0)
 .F  S WVSUB3=$O(^TMP("LRA",$J,WVDATE,1.2,WVSUB2,WVSUB3)) Q:'WVSUB3  D
"RTN","WVLABWPS",63,0)
 ..D ADD^WVLABWPC
"RTN","WVLABWPS",64,0)
 ..S ^TMP("WVLAB",$J,WVLINE,0)=$G(^TMP("LRA",$J,WVDATE,1.2,WVSUB2,WVSUB3))
"RTN","WVLABWPS",65,0)
 ..Q
"RTN","WVLABWPS",66,0)
 .Q
"RTN","WVLABWPS",67,0)
 Q
"RTN","WVLABWPS",68,0)
WRTTM ; Display Topography, Disease, Morphology and Etiology values
"RTN","WVLABWPS",69,0)
 D ADD^WVLABWPC
"RTN","WVLABWPS",70,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="Topography: "_$P(X,U,1)
"RTN","WVLABWPS",71,0)
 S WVSUB4=0
"RTN","WVLABWPS",72,0)
 F  S WVSUB4=$O(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3,1,WVSUB4)) Q:'WVSUB4  D
"RTN","WVLABWPS",73,0)
 .D ADD^WVLABWPC
"RTN","WVLABWPS",74,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$S(WVSUB4=1:"Disease: ",1:$$REPEAT^XLFSTR(" ",10))_$G(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3,1,WVSUB4))
"RTN","WVLABWPS",75,0)
 .Q
"RTN","WVLABWPS",76,0)
 D ADD^WVLABWPC
"RTN","WVLABWPS",77,0)
 S WVSUB4=0
"RTN","WVLABWPS",78,0)
 F  S WVSUB4=$O(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3,2,WVSUB4)) Q:'WVSUB4  D
"RTN","WVLABWPS",79,0)
 .D ADD^WVLABWPC
"RTN","WVLABWPS",80,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)="Morphology: "_$G(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3,1,WVSUB4))
"RTN","WVLABWPS",81,0)
 .S WVSUB5=0
"RTN","WVLABWPS",82,0)
 .F  S WVSUB4=$O(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3,2,WVSUB4,2,WVSUB5)) Q:'WVSUB5  D
"RTN","WVLABWPS",83,0)
 ..D ADD^WVLABWPC
"RTN","WVLABWPS",84,0)
 ..S ^TMP("WVLAB",$J,WVLINE,0)=$S(WVSUB5=1:"Etiology: ",1:$$REPEAT^XLFSTR(" ",10))_$G(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3,2,WVSUB4,1,WVSUB5))
"RTN","WVLABWPS",85,0)
 ..Q
"RTN","WVLABWPS",86,0)
 .Q
"RTN","WVLABWPS",87,0)
 Q
"RTN","WVLABWPS",88,0)
WRTP ; Display Procedure values
"RTN","WVLABWPS",89,0)
 Q:'$O(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3,4,0))
"RTN","WVLABWPS",90,0)
 D ADD^WVLABWPC
"RTN","WVLABWPS",91,0)
 S ^TMP("WVLAB",$J,WVLINE,0)="<Procedures>"
"RTN","WVLABWPS",92,0)
 S WVSUB4=0
"RTN","WVLABWPS",93,0)
 F  S WVSUB4=$O(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3,4,WVSUB4)) Q:WVSUB4  D
"RTN","WVLABWPS",94,0)
 .D ADD^WVLABWPC
"RTN","WVLABWPS",95,0)
 .S ^TMP("WVLAB",$J,WVLINE,0)=$P($G(^TMP("LRA",$J,WVDATE,WVSUB2,WVSUB3,4,WVSUB4)),U,1)
"RTN","WVLABWPS",96,0)
 .Q
"RTN","WVLABWPS",97,0)
 Q
"RTN","WVLRLINK")
0^1^B40822119
"RTN","WVLRLINK",1,0)
WVLRLINK ;HCIOFO/FT-LAB-WOMEN'S HEALTH LINK  ;4/6/99  14:07
"RTN","WVLRLINK",2,0)
 ;;1.0;WOMEN'S HEALTH;**6**;Sep 30, 1998
"RTN","WVLRLINK",3,0)
 ;
"RTN","WVLRLINK",4,0)
CREATE(DFN,LRDFN,LRI,LRA,LRSS) ;
"RTN","WVLRLINK",5,0)
 ; Add lab test to WH file (#790.08).
"RTN","WVLRLINK",6,0)
 ; Called by REPORT RELEASE DATE/TIME field in:
"RTN","WVLRLINK",7,0)
 ; a) File 63, Field 63.08,.11
"RTN","WVLRLINK",8,0)
 ; b) File 63, Field 63.09,.11
"RTN","WVLRLINK",9,0)
 ; Input: DFN    = PATIENT DFN
"RTN","WVLRLINK",10,0)
 ;        LRDFN  = FILE 63 IEN (+^DPT(DFN,"LR"))
"RTN","WVLRLINK",11,0)
 ;        LRI    = INVERSE DATE/TIME OF TEST
"RTN","WVLRLINK",12,0)
 ;        LRA    = ZERO NODE OF THE CY or SP ENTRY
"RTN","WVLRLINK",13,0)
 ;        LRSS   = File 63 subscript (e.g., CY or SP)
"RTN","WVLRLINK",14,0)
 ;
"RTN","WVLRLINK",15,0)
 Q:($G(DFN)']"")!($G(LRDFN)']"")!($G(LRI)']"")!($G(LRA)']"")!($G(LRSS)']"")
"RTN","WVLRLINK",16,0)
 Q:'$D(^WV(790.02,DUZ(2)))  ;no site parameter entry
"RTN","WVLRLINK",17,0)
 Q:'$P($G(^WV(790.02,+$G(DUZ(2)),0)),U,24)  ;lab link is NO or null
"RTN","WVLRLINK",18,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WVLRLINK",19,0)
 S ZTRTN="CREATEQ^WVLRLINK",ZTDESC="WV CREATE FILE 790.08 ENTRY"
"RTN","WVLRLINK",20,0)
 S ZTSAVE("DFN")="",ZTSAVE("LRDFN")="",ZTSAVE("LRI")="",ZTSAVE("LRA")=""
"RTN","WVLRLINK",21,0)
 S ZTSAVE("LRSS")="",ZTIO=""
"RTN","WVLRLINK",22,0)
 S ZTDTH=$$HADD^XLFDT($H,"","","",120) ;time delay if MOVE entry point
"RTN","WVLRLINK",23,0)
 ; is called to delete a bogus entry first so check of lab accession
"RTN","WVLRLINK",24,0)
 ; x-ref doesn't fail.
"RTN","WVLRLINK",25,0)
 D ^%ZTLOAD
"RTN","WVLRLINK",26,0)
 Q
"RTN","WVLRLINK",27,0)
CREATEQ ; Called from CREATE above
"RTN","WVLRLINK",28,0)
 ; WVLOC   = WARD/CLINIC/LOCATION (FILE #44)
"RTN","WVLRLINK",29,0)
 ; WVDATE  = DATE OF THE PROCEDURE (FM date/time)
"RTN","WVLRLINK",30,0)
 ;   WVDR  = DR STRING
"RTN","WVLRLINK",31,0)
 ; WVPROV  = ORDERING PROVIDER (FILE #200)
"RTN","WVLRLINK",32,0)
 ; WVLABAN = LAB ACCESSION # (e.g., CY 99 1)
"RTN","WVLRLINK",33,0)
 N WVDATE,WVDR,WVLABAN,WVLABAN0,WVLOC,WVPROV
"RTN","WVLRLINK",34,0)
 Q:$P($G(^DPT(DFN,0)),U,2)'="F"  ;not female
"RTN","WVLRLINK",35,0)
 S WVDATE=$P(LRA,U,1) ;date/time specimen taken
"RTN","WVLRLINK",36,0)
 S WVLABAN=$P(LRA,U,6) ;lab accession#
"RTN","WVLRLINK",37,0)
 S WVLOC=$P(LRA,U,8) ;patient location
"RTN","WVLRLINK",38,0)
 I WVLOC]"" S WVLOC=$$HL(WVLOC) ;convert location to File 44 pointer
"RTN","WVLRLINK",39,0)
 S WVPROV=$P(LRA,U,7) ;requesting provider
"RTN","WVLRLINK",40,0)
 ; Quit if this lab test has already been sent to FILE 790.1.
"RTN","WVLRLINK",41,0)
 Q:$D(^WV(790.1,"F",WVLABAN))
"RTN","WVLRLINK",42,0)
 I LRSS'="CY",LRSS'="SP" Q  ;not cytology or surgical pathology
"RTN","WVLRLINK",43,0)
 S WVDR=".02////"_DFN
"RTN","WVLRLINK",44,0)
 S:WVPROV]"" WVDR=WVDR_";.07////"_WVPROV
"RTN","WVLRLINK",45,0)
 S WVDR=WVDR_";.1////"_$G(DUZ(2))
"RTN","WVLRLINK",46,0)
 S:WVLOC]"" WVDR=WVDR_";.11////"_WVLOC
"RTN","WVLRLINK",47,0)
 S WVDR=WVDR_";.12////"_WVDATE
"RTN","WVLRLINK",48,0)
 S WVDR=WVDR_";.18////.5;.19////"_DT_";.34////"_$G(DUZ(2))
"RTN","WVLRLINK",49,0)
 S WVDR=WVDR_";2.18////"_LRDFN_";2.19////"_LRI_";2.2////"_LRSS
"RTN","WVLRLINK",50,0)
 S X=WVLABAN,Y=0
"RTN","WVLRLINK",51,0)
 K DD,DO
"RTN","WVLRLINK",52,0)
 S DIC("DR")=WVDR,DIC="^WV(790.08,",DIC(0)="ML",DLAYGO=790.08
"RTN","WVLRLINK",53,0)
 D FILE^DICN
"RTN","WVLRLINK",54,0)
 Q:Y<1  ;FILE 790.08 entry was not created
"RTN","WVLRLINK",55,0)
 D MAIL^WVLABWP(DFN,WVLABAN,WVPROV,LRSS) ;patient, lab accession #, provider/requestor, lab subscript (CY or SP)
"RTN","WVLRLINK",56,0)
 Q
"RTN","WVLRLINK",57,0)
EXIT ;EP
"RTN","WVLRLINK",58,0)
 K I,N,X
"RTN","WVLRLINK",59,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVLRLINK",60,0)
 Q
"RTN","WVLRLINK",61,0)
DELETE(DFN,LRDFN,LRI,LRA,LRSS) ;
"RTN","WVLRLINK",62,0)
 ; Modify WH to reflect change in lab report status (no longer released).
"RTN","WVLRLINK",63,0)
 ; Called by REPORT RELEASE DATE/TIME field xref in:
"RTN","WVLRLINK",64,0)
 ; a) File 63, Field 63.08,.11
"RTN","WVLRLINK",65,0)
 ; b) File 63, Field 63.09,.11
"RTN","WVLRLINK",66,0)
 Q:'$D(DFN)!('$D(LRDFN))!('$D(LRI))!('$D(LRA))!('$D(LRSS))
"RTN","WVLRLINK",67,0)
 Q:'$D(^WV(790.02,DUZ(2)))  ;no site parameter entry
"RTN","WVLRLINK",68,0)
 Q:'$P($G(^WV(790.02,+$G(DUZ(2)),0)),U,24)  ;lab link is NO or null
"RTN","WVLRLINK",69,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WVLRLINK",70,0)
 S ZTRTN="DELETEQ^WVLRLINK",ZTDESC="WV Change in Lab Rpt Status"
"RTN","WVLRLINK",71,0)
 S ZTSAVE("DFN")="",ZTSAVE("LRDFN")="",ZTSAVE("LRI")="",ZTSAVE("LRA")=""
"RTN","WVLRLINK",72,0)
 S ZTSAVE("LRSS")=""
"RTN","WVLRLINK",73,0)
 S ZTIO="",ZTDTH=$H
"RTN","WVLRLINK",74,0)
 D ^%ZTLOAD
"RTN","WVLRLINK",75,0)
 Q
"RTN","WVLRLINK",76,0)
DELETEQ ; Called from DELETE above.
"RTN","WVLRLINK",77,0)
 N WVIEN,WVDATE,WVCMGR,WVLABAN,WVLOOP,WVMSG,WVNODE,WVPN ;,WVPROV
"RTN","WVLRLINK",78,0)
 N XMDUZ,XMSUB,XMTEXT,XMY ;send mail message to case manager
"RTN","WVLRLINK",79,0)
 S WVLABAN=$P(LRA,U,6) ;lab accession#
"RTN","WVLRLINK",80,0)
 Q:WVLABAN=""
"RTN","WVLRLINK",81,0)
 S WVIEN=$O(^WV(790.08,"B",WVLABAN,0))
"RTN","WVLRLINK",82,0)
 I WVIEN D DELETE^WVLABADD(WVIEN) Q  ;delete, not yet addressed
"RTN","WVLRLINK",83,0)
 Q:'$D(^WV(790.1,"F",WVLABAN))  ;never entered in WH procedure file
"RTN","WVLRLINK",84,0)
 ; Next look up lab test in WH procedure file and send warning message
"RTN","WVLRLINK",85,0)
 ; to WH case manager.
"RTN","WVLRLINK",86,0)
 S WVIEN=$O(^WV(790.1,"F",WVLABAN,0))
"RTN","WVLRLINK",87,0)
 Q:'$D(^WV(790.1,WVIEN,0))
"RTN","WVLRLINK",88,0)
 D RADMOD^WVPROC(WVIEN) ;update procedure status to "open"
"RTN","WVLRLINK",89,0)
 S WVCMGR=+$$GET1^DIQ(790,DFN,.1,"I") ;get case manager
"RTN","WVLRLINK",90,0)
 S:WVCMGR XMY(WVCMGR)=""
"RTN","WVLRLINK",91,0)
 ; if no case manager, then get default case manager(s)
"RTN","WVLRLINK",92,0)
 I 'WVCMGR S WVLOOP=0 F  S WVLOOP=$O(^WV(790.02,WVLOOP)) Q:'WVLOOP  D
"RTN","WVLRLINK",93,0)
 .S WVCMGR=$$GET1^DIQ(790.02,WVLOOP,.02,"I")
"RTN","WVLRLINK",94,0)
 .S:WVCMGR XMY(WVCMGR)=""
"RTN","WVLRLINK",95,0)
 .Q
"RTN","WVLRLINK",96,0)
 Q:$O(XMY(0))'>0  ;no case manager(s)
"RTN","WVLRLINK",97,0)
 ;S:WVPROV XMY(WVPROV)=""
"RTN","WVLRLINK",98,0)
 S WVNODE=$G(^WV(790.1,+WVIEN,0))
"RTN","WVLRLINK",99,0)
 S WVPN=$E($P(WVNODE,U,1),1,2),WVPN=$$PN(WVPN)
"RTN","WVLRLINK",100,0)
 S XMDUZ=.5 ;message sender
"RTN","WVLRLINK",101,0)
 S XMSUB="Lab Report for WH patient is UNVERIFIED"
"RTN","WVLRLINK",102,0)
 S WVMSG(1)="        Patient: "_$P($G(^DPT(DFN,0)),U,1)_" (SSN: "_$$SSN^WVUTL1(DFN)_")"
"RTN","WVLRLINK",103,0)
 S WVMSG(2)=" WH Accession #: "_$P(WVNODE,U,1)_"  Procedure Type: "_$S(WVPN]"":WVPN,1:"Unknown")
"RTN","WVLRLINK",104,0)
 S WVMSG(3)="Lab Accession #: "_WVLABAN
"RTN","WVLRLINK",105,0)
 S WVMSG(4)=" "
"RTN","WVLRLINK",106,0)
 S WVMSG(5)="NOTE: This lab test has been UNVERIFIED in the LAB package."
"RTN","WVLRLINK",107,0)
 S WVMSG(6)=" "
"RTN","WVLRLINK",108,0)
 S WVMSG(7)="The status of the associated WH procedure has been changed to 'open',"
"RTN","WVLRLINK",109,0)
 S WVMSG(8)="You may wish to contact Lab Service to find out the reason for the change."
"RTN","WVLRLINK",110,0)
 S WVMSG(9)="Please use the 'Edit a Procedure' option in the WOMEN'S HEALTH package"
"RTN","WVLRLINK",111,0)
 S WVMSG(10)="to modify/close this procedure."
"RTN","WVLRLINK",112,0)
 S XMTEXT="WVMSG("
"RTN","WVLRLINK",113,0)
 D ^XMD
"RTN","WVLRLINK",114,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVLRLINK",115,0)
 Q
"RTN","WVLRLINK",116,0)
HL(WVLOC) ; Get Hospital Location file (#44) pointer
"RTN","WVLRLINK",117,0)
 N WVARRAY,WVERR
"RTN","WVLRLINK",118,0)
 D FIND^DIC(44,"","","X",WVLOC,"","C","","","WVARRAY","WVERR")
"RTN","WVLRLINK",119,0)
 I +$G(WVARRAY("DILIST",0))=1 Q +WVARRAY("DILIST",2,1)
"RTN","WVLRLINK",120,0)
 Q ""
"RTN","WVLRLINK",121,0)
PN(X) ; Get procedure name
"RTN","WVLRLINK",122,0)
 I X="" Q ""
"RTN","WVLRLINK",123,0)
 S X=$O(^WV(790.2,"D",X,0)) ;look at abbreviation x-ref
"RTN","WVLRLINK",124,0)
 I 'X Q ""
"RTN","WVLRLINK",125,0)
 S X=$P($G(^WV(790.2,+X,0)),U,1)
"RTN","WVLRLINK",126,0)
 Q X
"RTN","WVLRLINK",127,0)
 ;
"RTN","WVLRLINK",128,0)
MOVE(DFN,LRDFN,LRI,LRA,LRSS) ; Called from Lab package when a lab accession is
"RTN","WVLRLINK",129,0)
 ; moved from one patient to another because the test was originally
"RTN","WVLRLINK",130,0)
 ; associated to the wrong patient.
"RTN","WVLRLINK",131,0)
 Q:'$D(DFN)!('$D(LRDFN))!('$D(LRI))!('$D(LRA))!('$D(LRSS))
"RTN","WVLRLINK",132,0)
 N ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE
"RTN","WVLRLINK",133,0)
 S ZTRTN="MOVEQ^WVLRLINK",ZTDESC="WV Lab Accession moved to another patient"
"RTN","WVLRLINK",134,0)
 S ZTSAVE("DFN")="",ZTSAVE("LRDFN")="",ZTSAVE("LRI")="",ZTSAVE("LRA")=""
"RTN","WVLRLINK",135,0)
 S ZTSAVE("LRSS")="",ZTIO="",ZTDTH=$H
"RTN","WVLRLINK",136,0)
 D ^%ZTLOAD
"RTN","WVLRLINK",137,0)
 Q
"RTN","WVLRLINK",138,0)
MOVEQ ; Called from MOVE above
"RTN","WVLRLINK",139,0)
 N DA,DIE,DR
"RTN","WVLRLINK",140,0)
 N WVACCN,WVCMGR,WVIEN,WVLABAN,WVLOOP,WVNIEN,WVNODE,WVPIEN,WVPN,WVRD
"RTN","WVLRLINK",141,0)
 S WVLABAN=$P(LRA,U,6) ;lab accession#
"RTN","WVLRLINK",142,0)
 Q:WVLABAN=""
"RTN","WVLRLINK",143,0)
 S WVIEN=$O(^WV(790.08,"B",WVLABAN,0)) ;check WV LAB TESTS first
"RTN","WVLRLINK",144,0)
 I WVIEN D  Q  ;fix/delete File 790.8 entry, not a file (790.1) entry
"RTN","WVLRLINK",145,0)
 .D DELETE^WVLABADD(WVIEN)
"RTN","WVLRLINK",146,0)
 .Q
"RTN","WVLRLINK",147,0)
 ;
"RTN","WVLRLINK",148,0)
 S WVPIEN=$O(^WV(790.1,"F",WVLABAN,0)) ;check WH Procedure file
"RTN","WVLRLINK",149,0)
 Q:'WVPIEN  ;lab test was not converted into a WH procedure
"RTN","WVLRLINK",150,0)
 S WVNODE=$G(^WV(790.1,WVPIEN,0))
"RTN","WVLRLINK",151,0)
 S WVACCN=$P(WVNODE,U,1) ;WH accession#
"RTN","WVLRLINK",152,0)
 S WVDFN=+$P(WVNODE,U,2) ;DFN for existing patient
"RTN","WVLRLINK",153,0)
 Q:WVACCN=""
"RTN","WVLRLINK",154,0)
 S WVRD=$$RDC("Error/disregard")
"RTN","WVLRLINK",155,0)
 ; delete links to lab test entry so wrong lab report doesn't display
"RTN","WVLRLINK",156,0)
 S DIE="^WV(790.1,",DA=WVPIEN,DR=".05////"_WVRD_";2.17///@;2.18///@;2.19///@;2.2///@"
"RTN","WVLRLINK",157,0)
 ; include amended comment?
"RTN","WVLRLINK",158,0)
 D ^DIE
"RTN","WVLRLINK",159,0)
 S WVNIEN=$O(^WV(790.4,"C",WVACCN,0)) ;notification for that procedure?
"RTN","WVLRLINK",160,0)
 ; Send a mail message to case manager about patient change
"RTN","WVLRLINK",161,0)
 D MOVE^WVLABWP(WVDFN,WVNODE,WVNIEN)
"RTN","WVLRLINK",162,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","WVLRLINK",163,0)
 Q
"RTN","WVLRLINK",164,0)
RDC(WVRD) ; Return ien of Result/Diagnosis code
"RTN","WVLRLINK",165,0)
 ; input text of result/diagnois
"RTN","WVLRLINK",166,0)
 I WVRD="" Q ""
"RTN","WVLRLINK",167,0)
 Q +$O(^WV(790.31,"B",WVRD,0))
"RTN","WVLRLINK",168,0)
 ;
"RTN","WVPROC")
0^7^B44910103
"RTN","WVPROC",1,0)
WVPROC ;HCIOFO/FT,JR - WV ADD/EDIT WV PROCEDURE; ;5/10/99  10:22
"RTN","WVPROC",2,0)
 ;;1.0;WOMEN'S HEALTH;**3,6**;Sep 30, 1998
"RTN","WVPROC",3,0)
 ;;  Original routine created by IHS/ANMC/MWR
"RTN","WVPROC",4,0)
 ;;* MICHAEL REMILLARD, DDS * ALASKA NATIVE MEDICAL CENTER *
"RTN","WVPROC",5,0)
 ;;  CALLED BY VARIOUS OPTIONS TO ADD/EDIT PROCEDURES.
"RTN","WVPROC",6,0)
 ;
"RTN","WVPROC",7,0)
 ;
"RTN","WVPROC",8,0)
ADDNEW ;EP
"RTN","WVPROC",9,0)
 ;---> CALLED BY OPTION: "WV ADD A NEW PROCEDURE".
"RTN","WVPROC",10,0)
 D SETVARS^WVUTL5 S WVPOP1=0
"RTN","WVPROC",11,0)
 N DA,DIC,DIE,Y
"RTN","WVPROC",12,0)
 F  D  Q:WVPOP1
"RTN","WVPROC",13,0)
 .D NEW
"RTN","WVPROC",14,0)
 .Q:WVPOP
"RTN","WVPROC",15,0)
 .D EDIT2^WVPROC1(DA,.WVPOP)
"RTN","WVPROC",16,0)
 .Q:WVPOP
"RTN","WVPROC",17,0)
 .D PCDVARS^WVUTL3(DA,1)
"RTN","WVPROC",18,0)
 .D NORMAL^WVPROC1
"RTN","WVPROC",19,0)
 D EXIT
"RTN","WVPROC",20,0)
 Q
"RTN","WVPROC",21,0)
 ;
"RTN","WVPROC",22,0)
EXIT ;EP
"RTN","WVPROC",23,0)
 D KILLALL^WVUTL8
"RTN","WVPROC",24,0)
 Q
"RTN","WVPROC",25,0)
 ;
"RTN","WVPROC",26,0)
 ;
"RTN","WVPROC",27,0)
NEW ;EP
"RTN","WVPROC",28,0)
 ;---> SELECT A PATIENT.
"RTN","WVPROC",29,0)
 D SETVARS^WVUTL5 K DIC
"RTN","WVPROC",30,0)
 D TITLE^WVUTL5("ADD A NEW PROCEDURE")
"RTN","WVPROC",31,0)
NEWNT ;EP
"RTN","WVPROC",32,0)
 ;---> ENTER NEW WITHOUT A TITLE (ALLOWS OTHER TITLES, E.G., HISTORICAL)
"RTN","WVPROC",33,0)
 ;---> LOOKUP AND SELECT PATIENT FROM WV PATIENT FILE.
"RTN","WVPROC",34,0)
 ; Quit if no default case manager
"RTN","WVPROC",35,0)
 I '$$DCM^WVUTL9(DUZ(2)) D NODCM^WVUTL9 S (WVPOP,WVPOP1)=1 Q
"RTN","WVPROC",36,0)
 D PATLKUP^WVUTL8(.Y,"ADD")
"RTN","WVPROC",37,0)
 I Y<0 S (WVPOP,WVPOP1)=1 Q
"RTN","WVPROC",38,0)
 S WVDFN=+Y
"RTN","WVPROC",39,0)
 ;
"RTN","WVPROC",40,0)
NEW1 ;EP
"RTN","WVPROC",41,0)
 ;---> ADD A NEW PROCEDURE.
"RTN","WVPROC",42,0)
 ;---> PATIENT SELECTED ALREADY BUT NOT PROCEDURE.
"RTN","WVPROC",43,0)
 ;---> REQUIRED VARIABLE: WVDFN
"RTN","WVPROC",44,0)
 ;
"RTN","WVPROC",45,0)
 ;---> NOW SELECT PROCEDURE TYPE FROM WV PROCEDURE TYPE FILE.
"RTN","WVPROC",46,0)
 N A,WVPCDN,S
"RTN","WVPROC",47,0)
 S A="   Select PROCEDURE: "
"RTN","WVPROC",48,0)
 ;---> SCREEN: ACTIVE FIELD CAN BE "YES" OR NULL, BUT NOT "NO".
"RTN","WVPROC",49,0)
 S S="I $P($G(^WV(790.02,DUZ(2),Y)),U)'=0"
"RTN","WVPROC",50,0)
 D DIC^WVFMAN(790.2,"QEMA",.Y,A,"PAP SMEAR",S,"",.WVPOP)
"RTN","WVPROC",51,0)
 Q:Y<0
"RTN","WVPROC",52,0)
 ;---> WVPCDN=IEN OF PROCEDURE TYPE, FILE 790.2.
"RTN","WVPROC",53,0)
 S WVPCDN=+Y
"RTN","WVPROC",54,0)
 ;
"RTN","WVPROC",55,0)
 ;---> IF IT'S A UNILATERAL MAMMOGRAM, PROMPT FOR LEFT OR RIGHT.
"RTN","WVPROC",56,0)
 S WVLFRT=""
"RTN","WVPROC",57,0)
 I WVPCDN=26 D  I $D(DIRUT) S WVPOP=1 Q
"RTN","WVPROC",58,0)
 .N DIR
"RTN","WVPROC",59,0)
 .S DIR("?")="   Select LEFT or RIGHT for this Unilateral Mammogram."
"RTN","WVPROC",60,0)
 .S DIR(0)="SAM^l:LEFT;r:RIGHT",DIR("A")="   LEFT OR RIGHT: "
"RTN","WVPROC",61,0)
 .D ^DIR K DIR
"RTN","WVPROC",62,0)
 .Q:$D(DIRUT)
"RTN","WVPROC",63,0)
 .S WVLFRT=Y
"RTN","WVPROC",64,0)
 ;
"RTN","WVPROC",65,0)
 ;---> IF IT'S A COLPOSCOPY, PROMPT FOR PAP THAT INITIATED IT.
"RTN","WVPROC",66,0)
 S WVPPAP=""
"RTN","WVPROC",67,0)
 I WVPCDN=2 D  Q:WVPOP
"RTN","WVPROC",68,0)
 .W !!?3,"Select the PAP Smear that initiated this Colposcopy."
"RTN","WVPROC",69,0)
 .N A,S
"RTN","WVPROC",70,0)
 .S DIC("?",1)="If a previous abnormal PAP Smear was the reason for"
"RTN","WVPROC",71,0)
 .S DIC("?")="this Colposcopy, enter the Accession# of that PAP here."
"RTN","WVPROC",72,0)
 .S A="   PAP Smear: ",S="D PAPSCRN^WVUTL2"
"RTN","WVPROC",73,0)
 .D DIC^WVFMAN(790.1,"QEMA",.Y,A,"",S,"",.WVPOP)
"RTN","WVPROC",74,0)
 .Q:Y<0
"RTN","WVPROC",75,0)
 .;---> WVPPAP=IEN OF PREVIOUS PAP IN WV PROCEDURE FILE 790.1.
"RTN","WVPROC",76,0)
 .S WVPPAP=+Y
"RTN","WVPROC",77,0)
 ;
"RTN","WVPROC",78,0)
 ;---> ASK DATE, CHECK FOR DUPLICATE PROCEDURE ON SAME DATE.
"RTN","WVPROC",79,0)
 D DATECHK Q:WVPOP
"RTN","WVPROC",80,0)
 D NEW2(WVDFN,WVPCDN,WVPCDT,"",WVPPAP,.DA,.WVERROR)
"RTN","WVPROC",81,0)
 Q
"RTN","WVPROC",82,0)
 ;
"RTN","WVPROC",83,0)
NEW2(DFN,PCDIEN,DATE,DRSTRG,PREVPAP,DA,ERROR) ;EP
"RTN","WVPROC",84,0)
 ;---> ADD A NEW PROCEDURE.
"RTN","WVPROC",85,0)
 ;---> PATIENT AND PROCEDURE ALREADY SELECTED.
"RTN","WVPROC",86,0)
 ;---> NOW GENERATE ACCESSION# FOR WV PROCEDURE FILE ENTRY.
"RTN","WVPROC",87,0)
 ;---> REQUIRED VARIABLES: DFN=IEN IN WV PATIENT FILE
"RTN","WVPROC",88,0)
 ;--->                     PCDIEN=IEN OF PROCEDURE TYPE (#790.2).
"RTN","WVPROC",89,0)
 ;
"RTN","WVPROC",90,0)
 S X=$$ACCSSN^WVUTL5(PCDIEN) N DIC
"RTN","WVPROC",91,0)
 I X']"" D  Q
"RTN","WVPROC",92,0)
 .S ERROR=-1
"RTN","WVPROC",93,0)
 .Q:$D(ZTQUEUED)  ;quit if a background (tasked) job
"RTN","WVPROC",94,0)
 .W !!?5,*7,"UNABLE TO GENERATE ACCESSION#. CONTACT YOUR SITE MANAGER."
"RTN","WVPROC",95,0)
 .D DIRZ^WVUTL3
"RTN","WVPROC",96,0)
 .Q
"RTN","WVPROC",97,0)
 ;
"RTN","WVPROC",98,0)
 I $G(DRSTRG)']"" D
"RTN","WVPROC",99,0)
 .;---> DEFAULTS: DATE OF PROCEDURE IS TODAY, STATUS IS OPEN.
"RTN","WVPROC",100,0)
 .S DRSTRG=".02////"_DFN_";.04////"_PCDIEN
"RTN","WVPROC",101,0)
 .S DRSTRG=DRSTRG_";.09///"_$S($D(WVLFRT):WVLFRT,1:"")_";.12///"_DATE
"RTN","WVPROC",102,0)
 .S DRSTRG=DRSTRG_";.14///o"
"RTN","WVPROC",103,0)
 .S DRSTRG=DRSTRG_";.18////"_DUZ_";.19///T;.3////"_$G(PREVPAP)
"RTN","WVPROC",104,0)
 .S DRSTRG=DRSTRG_";.34////"_$G(DUZ(2))
"RTN","WVPROC",105,0)
 ;
"RTN","WVPROC",106,0)
 D FILE^WVFMAN(790.1,DRSTRG,"ML",X,790,.Y)
"RTN","WVPROC",107,0)
 ;---> IF Y<0, CHECK PERMISSIONS.
"RTN","WVPROC",108,0)
 I Y<0 D  Q
"RTN","WVPROC",109,0)
 .S ERROR=Y
"RTN","WVPROC",110,0)
 .Q:$D(ZTQUEUED)  ;quit if a background (tasked) job
"RTN","WVPROC",111,0)
 .W !?5,*7,"UNABLE TO CREATE NEW PROCEDURE."
"RTN","WVPROC",112,0)
 .D DIRZ^WVUTL3 S WVPOP=1
"RTN","WVPROC",113,0)
 .Q
"RTN","WVPROC",114,0)
 S DA=+Y
"RTN","WVPROC",115,0)
 Q
"RTN","WVPROC",116,0)
 ;
"RTN","WVPROC",117,0)
 ;
"RTN","WVPROC",118,0)
EDIT ;EP
"RTN","WVPROC",119,0)
 ;---> CALLED BY OPTION: "WV EDIT PROCEDURE".
"RTN","WVPROC",120,0)
 ;---> EDIT AN EXISTING PROCEDURE.
"RTN","WVPROC",121,0)
 D TITLE^WVUTL5("EDIT A PROCEDURE")
"RTN","WVPROC",122,0)
 D LKUPPCD(.Y)
"RTN","WVPROC",123,0)
 Q:Y<0
"RTN","WVPROC",124,0)
LT ; Called from WVLABADD routine to immediately edit a procedure created
"RTN","WVPROC",125,0)
 ; from a lab test.
"RTN","WVPROC",126,0)
 ;---> DA=IEN OF PROCEDURE IN PROCEDURE FILE 790.1.
"RTN","WVPROC",127,0)
 S DA=+Y
"RTN","WVPROC",128,0)
 I $P($G(^WV(790.1,+DA,0)),U,15)]"" D ^WVRADWP
"RTN","WVPROC",129,0)
 I $P($G(^WV(790.1,+DA,2)),U,17)]"" D
"RTN","WVPROC",130,0)
 .D ^WVLABWP
"RTN","WVPROC",131,0)
 .Q:'$D(^TMP("WVLAB",$J))
"RTN","WVPROC",132,0)
 .S WVLOOP=0
"RTN","WVPROC",133,0)
 .F  S WVLOOP=$O(^TMP("WVLAB",$J,WVLOOP)) Q:WVLOOP'>0  D
"RTN","WVPROC",134,0)
 ..S ^WV(790.1,DA,9,WVLOOP,0)=$G(^TMP("WVLAB",$J,WVLOOP,0)) S WVLOOP(1)=WVLOOP
"RTN","WVPROC",135,0)
 ..Q
"RTN","WVPROC",136,0)
 .S ^WV(790.1,DA,9,0)="^^"_$G(WVLOOP(1))_"^"_$G(WVLOOP(1))
"RTN","WVPROC",137,0)
 .K ^TMP("WVLAB",$J)
"RTN","WVPROC",138,0)
 .Q
"RTN","WVPROC",139,0)
 D EDIT2^WVPROC1(DA,.WVPOP) Q:WVPOP!($D(WVNOFOL))
"RTN","WVPROC",140,0)
 D EX^WVRADWP
"RTN","WVPROC",141,0)
 D PCDVARS^WVUTL3(DA,1)
"RTN","WVPROC",142,0)
 D NORMAL^WVPROC1
"RTN","WVPROC",143,0)
 D EXIT
"RTN","WVPROC",144,0)
 Q
"RTN","WVPROC",145,0)
 ;
"RTN","WVPROC",146,0)
 ;
"RTN","WVPROC",147,0)
HISTORIC ;EP
"RTN","WVPROC",148,0)
 ;---> CALLED BY OPTION: "WV ADD AN HISTORICAL PROCEDURE".
"RTN","WVPROC",149,0)
 ;---> ADD HISTORICAL PROCEDURES (NO PROVIDER, WARD/CLINIC, FACILITY).
"RTN","WVPROC",150,0)
 D SETVARS^WVUTL5 S WVPOP1=0 N DA,DIE,Y
"RTN","WVPROC",151,0)
 F  D  Q:WVPOP1
"RTN","WVPROC",152,0)
 .D TITLE^WVUTL5("ENTER HISTORICAL DATA")
"RTN","WVPROC",153,0)
 .D NEWNT W !
"RTN","WVPROC",154,0)
 .Q:(WVPOP!('$G(DA)))
"RTN","WVPROC",155,0)
 .S WVPN=$P(^WV(790.1,DA,0),U,4)
"RTN","WVPROC",156,0)
 .S DR=".05;.08;.1;.14////c"
"RTN","WVPROC",157,0)
 .D DIE^WVFMAN(790.1,DR,DA,.WVPOP)
"RTN","WVPROC",158,0)
 D EXIT
"RTN","WVPROC",159,0)
 Q
"RTN","WVPROC",160,0)
 ;
"RTN","WVPROC",161,0)
 ;
"RTN","WVPROC",162,0)
LABEDIT ;EP
"RTN","WVPROC",163,0)
 ;---> CALLED BY OPTION: "WV LAB EDIT PROCEDURE".
"RTN","WVPROC",164,0)
 S WVNOFOL=1 D EDIT,EXIT
"RTN","WVPROC",165,0)
 Q
"RTN","WVPROC",166,0)
 ;
"RTN","WVPROC",167,0)
 ;
"RTN","WVPROC",168,0)
RADMOD(DA) ;EP
"RTN","WVPROC",169,0)
 ;---> MODIFY A PROCEDURE THAT WAS IMPORTED FROM RADIOLOGY AND
"RTN","WVPROC",170,0)
 ;---> HAS BEEN CHANGED.
"RTN","WVPROC",171,0)
 ;---> DA=IEN OF PROCEDURE IN WV PROCEDURE FILE #790.1.
"RTN","WVPROC",172,0)
 Q:'$G(DA)
"RTN","WVPROC",173,0)
 S DR=".13////"_DT_";.14////o"
"RTN","WVPROC",174,0)
 D DIE^WVFMAN(790.1,DR,DA,.WVPOP)
"RTN","WVPROC",175,0)
 Q
"RTN","WVPROC",176,0)
 ;
"RTN","WVPROC",177,0)
 ;
"RTN","WVPROC",178,0)
LKUPPCD(Y) ;EP
"RTN","WVPROC",179,0)
 ;---> LOOKUP A PROCEDURE.
"RTN","WVPROC",180,0)
 N A
"RTN","WVPROC",181,0)
 D SETVARS^WVUTL5
"RTN","WVPROC",182,0)
 S A="Select ACCESSION# or PATIENT NAME: "
"RTN","WVPROC",183,0)
 D DIC^WVFMAN(790.1,"QEMA",.Y,A,"","","",.WVPOP)
"RTN","WVPROC",184,0)
 Q
"RTN","WVPROC",185,0)
 ;
"RTN","WVPROC",186,0)
DATECHK ;EP
"RTN","WVPROC",187,0)
 ;---> PROMPT FOR DATE, CHECK FOR DUPLICATE PROCEDURE ON SAME DATE.
"RTN","WVPROC",188,0)
 N WVNEW,DIR,DIRUT,N,Y S WVPOP=0
"RTN","WVPROC",189,0)
 S DIR("?",1)="   Enter the date on which this procedure was performed:"
"RTN","WVPROC",190,0)
 S DIR("?")="   (NOTE: Dates in the future may NOT be entered.)"
"RTN","WVPROC",191,0)
 S DIR(0)="DA^0:DT:EX",DIR("A")="   Select DATE:      ",DIR("B")="TODAY"
"RTN","WVPROC",192,0)
 D ^DIR K DIR
"RTN","WVPROC",193,0)
 I Y<1 S WVPOP=1 Q
"RTN","WVPROC",194,0)
 S WVPCDT=Y D DD^%DT W "  ",Y
"RTN","WVPROC",195,0)
 S N=0,WVNEW=0
"RTN","WVPROC",196,0)
 F  S N=$O(^WV(790.1,"C",WVDFN,N)) Q:('N)!(WVPOP)!(WVNEW)  D
"RTN","WVPROC",197,0)
 .S Y=^WV(790.1,N,0)
"RTN","WVPROC",198,0)
 .;---> QUIT IF NOT THE SAME PROCEDURE TYPE.
"RTN","WVPROC",199,0)
 .Q:$P(Y,U,4)'=WVPCDN
"RTN","WVPROC",200,0)
 .;---> QUIT IF NOT THE SAME PROCEDURE DATE.
"RTN","WVPROC",201,0)
 .Q:$P(Y,U,12)'=WVPCDT
"RTN","WVPROC",202,0)
 .;---> QUIT IF THIS PROCEDURE HAS A RESULT/DIAG OF "ERROR/DISREGARD".
"RTN","WVPROC",203,0)
 .Q:$P(Y,U,5)=8
"RTN","WVPROC",204,0)
 .N WVPN S WVPN=$P(^WV(790.2,$P(Y,U,4),0),U)
"RTN","WVPROC",205,0)
 .W !!?5,"A ",WVPN," already exists for this patient on this date,"
"RTN","WVPROC",206,0)
 .W !?5,"with an Accession# of ",$P(Y,U)
"RTN","WVPROC",207,0)
 .W ".  You may edit that procedure by"
"RTN","WVPROC",208,0)
 .W !?5,"calling up ",$P(Y,U)," under the ""Edit a Procedure"" option."
"RTN","WVPROC",209,0)
 .W !?5,"Or you may enter another ",WVPN," for this patient"
"RTN","WVPROC",210,0)
 .W !?5,"on this date."
"RTN","WVPROC",211,0)
 .W !!?5,"Do you REALLY want to add another ",WVPN," for this patient"
"RTN","WVPROC",212,0)
 .W !?5,"on this date?"
"RTN","WVPROC",213,0)
 .S DIR("?")="       Enter NO to avoid adding another "_WVPN
"RTN","WVPROC",214,0)
 .S DIR("?")=DIR("?")_" on this date."
"RTN","WVPROC",215,0)
 .S DIR(0)="Y",DIR("A")="     Enter Yes or No",DIR("B")="NO"
"RTN","WVPROC",216,0)
 .D ^DIR K DIR
"RTN","WVPROC",217,0)
 .I $D(DIRUT)!('Y) S WVPOP=1 Q
"RTN","WVPROC",218,0)
 .S WVNEW=1
"RTN","WVPROC",219,0)
 Q
"RTN","WVPROC",220,0)
 ;
"RTN","WVPROC",221,0)
ERROR1 ;EP
"RTN","WVPROC",222,0)
 W !!?10,*7,"NEW PROCEDURE ENTRY FOR THIS PATIENT FAILED."
"RTN","WVPROC",223,0)
 Q
"RTN","WVPRPCD")
0^8^B21950408
"RTN","WVPRPCD",1,0)
WVPRPCD ;HCIOFO/FT,JR - WV PRINT A PROCEDURE; ;5/10/99  10:22
"RTN","WVPRPCD",2,0)
 ;;1.0;WOMEN'S HEALTH;**6**;Sep 30, 1998
"RTN","WVPRPCD",3,0)
 ;;  Original routine created by IHS/ANMC/MWR
"RTN","WVPRPCD",4,0)
 ;;* MICHAEL REMILLARD, DDS * ALASKA NATIVE MEDICAL CENTER *
"RTN","WVPRPCD",5,0)
 ;;  DISPLAY CODE FOR PRINTING PROCEDURES.  ENTRY POINTS FOR PRINTING
"RTN","WVPRPCD",6,0)
 ;;  INDIVIDUAL PROCEDURES AND ALL NEW PROCEDURES.
"RTN","WVPRPCD",7,0)
 ;
"RTN","WVPRPCD",8,0)
TOP(DA) ;EP
"RTN","WVPRPCD",9,0)
 ;---> PRINT PROCEDURE (NOT CALLED BY ANY OPTION).
"RTN","WVPRPCD",10,0)
 ;---> REQUIRED VARIABLE: DA=IEN OF PROCEDURE IN PROC FILE 790.1.
"RTN","WVPRPCD",11,0)
 ;
"RTN","WVPRPCD",12,0)
 D SETVARS^WVUTL5
"RTN","WVPRPCD",13,0)
 D DEVICE Q:WVPOP
"RTN","WVPRPCD",14,0)
 D START(DA)
"RTN","WVPRPCD",15,0)
 D ^%ZISC
"RTN","WVPRPCD",16,0)
 W @IOF
"RTN","WVPRPCD",17,0)
 Q
"RTN","WVPRPCD",18,0)
 ;
"RTN","WVPRPCD",19,0)
 ;
"RTN","WVPRPCD",20,0)
STARTQ ;EP
"RTN","WVPRPCD",21,0)
 ;---> ENTRY POINT FOR TASKMAN--CANNOT PASS PARAMETERS.
"RTN","WVPRPCD",22,0)
 ;---> REQUIRED VARIABLE: DA=IEN OF PROCEDURE IN PROC FILE 790.1.
"RTN","WVPRPCD",23,0)
 D START(DA)
"RTN","WVPRPCD",24,0)
 Q
"RTN","WVPRPCD",25,0)
 ;
"RTN","WVPRPCD",26,0)
 ;
"RTN","WVPRPCD",27,0)
START(DA) ;EP
"RTN","WVPRPCD",28,0)
 N WVPRMT1,WVTITLE,WVY,N,X
"RTN","WVPRPCD",29,0)
 D SETVARS^WVUTL5
"RTN","WVPRPCD",30,0)
 S WVSL="I $Y+6>IOSL D:WVCRT DIRZ^WVUTL3 Q:WVPOP  D HEADER4^WVUTL7"
"RTN","WVPRPCD",31,0)
 D TOPHEAD^WVUTL7,PCDVARS^WVUTL3(DA)
"RTN","WVPRPCD",32,0)
 ;---> WVCRT=1 IF OUTPUT IS TO SCREEN (SET BY TOPHEAD^WVUTL7).
"RTN","WVPRPCD",33,0)
 S WVTITLE1="* * *  WOMEN'S HEALTH: PROCEDURE PRINTOUT  * * *"
"RTN","WVPRPCD",34,0)
 D CENTERT^WVUTL5(.WVTITLE1)
"RTN","WVPRPCD",35,0)
 S WVPRMT1="   Press RETURN to continue or '^'to exit, or"
"RTN","WVPRPCD",36,0)
 S WVY=^WV(790.1,DA,0),WVDFN=$P(WVY,U,2)
"RTN","WVPRPCD",37,0)
 ;
"RTN","WVPRPCD",38,0)
 U IO
"RTN","WVPRPCD",39,0)
 D HEADER4^WVUTL7 W:'WVCRT !
"RTN","WVPRPCD",40,0)
 W !?5,"Date of Procedure: ",$$TXDT^WVUTL5($P(WVY,U,12))
"RTN","WVPRPCD",41,0)
 W !?4,"Date First Entered: ",$$TXDT^WVUTL5($P(WVY,U,19))
"RTN","WVPRPCD",42,0)
 W ?42,"First Entered By: " S X=$P(WVY,U,18) W $E($$PROV^WVUTL6,1,20)
"RTN","WVPRPCD",43,0)
 W ! W:$P(WVY,U,15)]"" ?43,"Radiology Case#: ",$P(WVY,U,15)
"RTN","WVPRPCD",44,0)
 W !?4,"Clinician/Provider: ",WVPROV
"RTN","WVPRPCD",45,0)
 W !?2,"Ward/Clinic/Location: " S X=$P(WVY,U,11) W $$HOSPLC^WVUTL6
"RTN","WVPRPCD",46,0)
 W !?2,"Health Care Facility: " S X=$P(WVY,U,10) W $$INSTTX^WVUTL6(X)
"RTN","WVPRPCD",47,0)
 W !?14,"Comments: "
"RTN","WVPRPCD",48,0)
 ;---> WRITE OUT CLINICAL HISTORY; IF TWO LINES, SPLIT BETWEEN WORDS.
"RTN","WVPRPCD",49,0)
 D
"RTN","WVPRPCD",50,0)
 .Q:'$D(^WV(790.1,DA,3))
"RTN","WVPRPCD",51,0)
 .N L,Y
"RTN","WVPRPCD",52,0)
 .S Y=$P(^WV(790.1,DA,3),U)
"RTN","WVPRPCD",53,0)
 .I $L(Y)<57 W Y,! Q
"RTN","WVPRPCD",54,0)
 .S L=56 I Y[" " F  Q:$E(Y,L)=" "  S L=L-1
"RTN","WVPRPCD",55,0)
 .W $E(Y,1,L),! W:$L(Y)>56 ?24,$E(Y,L+1,109)
"RTN","WVPRPCD",56,0)
 ;
"RTN","WVPRPCD",57,0)
 W !?4,"Complete by (Date): ",$$TXDT^WVUTL5($P(WVY,U,13))
"RTN","WVPRPCD",58,0)
 W !?5,"Results/Diagnosis: ",WVRES
"RTN","WVPRPCD",59,0)
 W !," Sec Results/diagnosis: " W $$DIAG^WVUTL4($P(WVY,U,6))
"RTN","WVPRPCD",60,0)
 W ?57,"HPV: " W:$P(WVY,U,8) "YES"
"RTN","WVPRPCD",61,0)
 W !?16,"Status: " S Y=WVY W $$STATUS^WVUTL4
"RTN","WVPRPCD",62,0)
 ;
"RTN","WVPRPCD",63,0)
 ;---> IF THIS PROCEDURE HAS COLPOSCOPY-TYPE RESULTS, DISPLAY COLP PAGE.
"RTN","WVPRPCD",64,0)
 D:$$COLP^WVUTL4(DA)  Q:WVPOP
"RTN","WVPRPCD",65,0)
 .I WVCRT D DIRZ^WVUTL3 Q:WVPOP  D HEADER4^WVUTL7
"RTN","WVPRPCD",66,0)
 .S WVTITLE="-----  CLINICAL FINDINGS  -----"
"RTN","WVPRPCD",67,0)
 .D CENTERT^WVUTL5(.WVTITLE) W !!,WVTITLE
"RTN","WVPRPCD",68,0)
 .;
"RTN","WVPRPCD",69,0)
 .X WVSL Q:WVPOP  W !?2,"T-Zone Seen Entirely: "
"RTN","WVPRPCD",70,0)
 .W $S($P(WVY,U,21):"YES",$P(WVY,U,21)=0:"NO",1:"")
"RTN","WVPRPCD",71,0)
 .W ?54,"Multifocal: "
"RTN","WVPRPCD",72,0)
 .W $S($P(WVY,U,21):"YES",$P(WVY,U,21)=0:"NO",1:"")
"RTN","WVPRPCD",73,0)
 .;
"RTN","WVPRPCD",74,0)
 .X WVSL Q:WVPOP  W !?2,"Lesion Outside Canal: "
"RTN","WVPRPCD",75,0)
 .W $S($P(WVY,U,22):"YES",$P(WVY,U,22)=0:"NO",1:"")
"RTN","WVPRPCD",76,0)
 .W ?45,"Number of Quadrants: " W $P(WVY,U,24)
"RTN","WVPRPCD",77,0)
 .;
"RTN","WVPRPCD",78,0)
 .X WVSL Q:WVPOP  W !?5,"Satisfactory Exam: "
"RTN","WVPRPCD",79,0)
 .W $S($P(WVY,U,20):"YES",$P(WVY,U,20)=0:"NO",1:"")
"RTN","WVPRPCD",80,0)
 .W ?46,"Quadrant Locations: ",$P($G(^WV(790.1,DA,2)),U,16)
"RTN","WVPRPCD",81,0)
 .X WVSL Q:WVPOP  W !?12,"Impression: "
"RTN","WVPRPCD",82,0)
 .W $$DIAG^WVUTL4($P(WVY,U,29))
"RTN","WVPRPCD",83,0)
 .;
"RTN","WVPRPCD",84,0)
 .X WVSL Q:WVPOP  S WVTITLE="-----  TISSUE PATHOLOGY  -----"
"RTN","WVPRPCD",85,0)
 .D CENTERT^WVUTL5(.WVTITLE) W !!,WVTITLE
"RTN","WVPRPCD",86,0)
 .;
"RTN","WVPRPCD",87,0)
 .X WVSL Q:WVPOP  W !?9,"ECC Dysplasia: "
"RTN","WVPRPCD",88,0)
 .S X=$P(WVY,U,25) W $$ECCDYS^WVUTL6
"RTN","WVPRPCD",89,0)
 .W ?57,"Margins Clear: "
"RTN","WVPRPCD",90,0)
 .W $S($P(WVY,U,27):"YES",$P(WVY,U,27)=0:"NO",1:"") X WVSL Q:WVPOP
"RTN","WVPRPCD",91,0)
 .X WVSL Q:WVPOP  W !?3,"Ectocervical Biopsy: "
"RTN","WVPRPCD",92,0)
 .W $$DIAG^WVUTL4($P(WVY,U,26))
"RTN","WVPRPCD",93,0)
 .W ?57,"Stage: "
"RTN","WVPRPCD",94,0)
 .W $$STAGE^WVUTL4($P(WVY,U,31)) X WVSL Q:WVPOP
"RTN","WVPRPCD",95,0)
 .X WVSL Q:WVPOP  W !?8,"STD Evaluation: "
"RTN","WVPRPCD",96,0)
 .W $$DIAG^WVUTL4($P(WVY,U,28))
"RTN","WVPRPCD",97,0)
 ;
"RTN","WVPRPCD",98,0)
 I WVCRT D DIRZ^WVUTL3 Q:WVPOP  D HEADER4^WVUTL7
"RTN","WVPRPCD",99,0)
 S WVTITLE="-----  NOTES  -----  "
"RTN","WVPRPCD",100,0)
 D CENTERT^WVUTL5(.WVTITLE) W !!,WVTITLE,!
"RTN","WVPRPCD",101,0)
 S WVTITLE="-----  NOTES (continued)  -----"
"RTN","WVPRPCD",102,0)
 D CENTERT^WVUTL5(.WVTITLE) S WVSUBH=WVTITLE
"RTN","WVPRPCD",103,0)
 S N=0
"RTN","WVPRPCD",104,0)
 F  S N=$O(^WV(790.1,DA,1,N)) Q:'N!(WVPOP)  D
"RTN","WVPRPCD",105,0)
 .X WVSL Q:WVPOP
"RTN","WVPRPCD",106,0)
 .W !,^WV(790.1,DA,1,N,0)
"RTN","WVPRPCD",107,0)
 S WVTITLE="-----  End of Procedure Printout  -----"
"RTN","WVPRPCD",108,0)
 D CENTERT^WVUTL5(.WVTITLE) W !!,WVTITLE
"RTN","WVPRPCD",109,0)
 K WVSUBH
"RTN","WVPRPCD",110,0)
 I WVCRT&('$D(IO("S")))&('WVPOP) D DIRZ^WVUTL3 W @IOF
"RTN","WVPRPCD",111,0)
 Q
"RTN","WVPRPCD",112,0)
 ;
"RTN","WVPRPCD",113,0)
DEVICE ;EP
"RTN","WVPRPCD",114,0)
 ;---> GET DEVICE AND POSSIBLY QUEUE TO TASKMAN.
"RTN","WVPRPCD",115,0)
 S ZTRTN="STARTQ^WVPRPCD",ZTSAVE("DA")=""
"RTN","WVPRPCD",116,0)
 D ZIS^WVUTL2(.WVPOP,1)
"RTN","WVPRPCD",117,0)
 Q
"RTN","WVPRPCD",118,0)
 ;
"RTN","WVPRPCD",119,0)
JUSTPRT ;EP
"RTN","WVPRPCD",120,0)
 ;---> CALLED BY OPTION: "WV  PRINT INDIVIDUAL PROCEDURES".
"RTN","WVPRPCD",121,0)
 ;---> JUST PRINT AN INDIVIDUAL PROCEDURE.
"RTN","WVPRPCD",122,0)
 N DA,Y
"RTN","WVPRPCD",123,0)
 F  D  Q:Y<0
"RTN","WVPRPCD",124,0)
 .D TITLE^WVUTL5("PRINT A PROCEDURE")
"RTN","WVPRPCD",125,0)
 .D LKUPPCD^WVPROC(.Y)
"RTN","WVPRPCD",126,0)
 .Q:Y<0
"RTN","WVPRPCD",127,0)
 .D TOP(+Y)
"RTN","WVPRPCD",128,0)
 D EXIT
"RTN","WVPRPCD",129,0)
 Q
"RTN","WVPRPCD",130,0)
 ;
"RTN","WVPRPCD",131,0)
PRTNEW ;EP
"RTN","WVPRPCD",132,0)
 ;---> CALLED BY OPTION: "WV PRINT ALL NEW PROCEDURES".
"RTN","WVPRPCD",133,0)
 ;---> PRINT ALL PROCEDURES WITH A STATUS OF "NEW" (NEW UPLOADED
"RTN","WVPRPCD",134,0)
 ;---> LAB RESULTS).
"RTN","WVPRPCD",135,0)
 D TITLE^WVUTL5("PRINT ALL ""NEW"" PROCEDURES")
"RTN","WVPRPCD",136,0)
 S ZTRTN="DEQUEUE^WVPRPCD"
"RTN","WVPRPCD",137,0)
 D ZIS^WVUTL2(.WVPOP,1)
"RTN","WVPRPCD",138,0)
 Q:WVPOP
"RTN","WVPRPCD",139,0)
 ;
"RTN","WVPRPCD",140,0)
DEQUEUE ;EP
"RTN","WVPRPCD",141,0)
 ;---> FOR TASKMAN QUEUE OF PRINTOUT.
"RTN","WVPRPCD",142,0)
 S N=0
"RTN","WVPRPCD",143,0)
 F  S N=$O(^WV(790.1,"S","n",N)) Q:'N  D
"RTN","WVPRPCD",144,0)
 .D START(N)
"RTN","WVPRPCD",145,0)
 D ^%ZISC,EXIT
"RTN","WVPRPCD",146,0)
 Q
"RTN","WVPRPCD",147,0)
 ;
"RTN","WVPRPCD",148,0)
EXIT ;EP
"RTN","WVPRPCD",149,0)
 D KILLALL^WVUTL8
"RTN","WVPRPCD",150,0)
 Q
"SEC","^DIC",790.08,790.08,0,"AUDIT")
@
"SEC","^DIC",790.08,790.08,0,"DD")
@
"UP",790.1,790.11,-1)
790.1^1
"UP",790.1,790.11,0)
790.11
"UP",790.1,790.19,-1)
790.1^9
"UP",790.1,790.19,0)
790.19
"VER")
8.0^21.0
"^DD",790.02,790.02,.24,0)
IMPORT TESTS FROM LAB^S^1:YES;0:NO;^0;24^Q
"^DD",790.02,790.02,.24,21,0)
^^9^9^2990310^
"^DD",790.02,790.02,.24,21,1,0)
This field indicates whether or not to automatically import lab test data
"^DD",790.02,790.02,.24,21,2,0)
from the VISTA Laboratory package, into the Women's Health database.
"^DD",790.02,790.02,.24,21,3,0)
 
"^DD",790.02,790.02,.24,21,4,0)
Answer NO if you do not want the Lab package to send lab test data to the
"^DD",790.02,790.02,.24,21,5,0)
Women's Health database.
"^DD",790.02,790.02,.24,21,6,0)
 
"^DD",790.02,790.02,.24,21,7,0)
Answer YES if you want the Lab package to send lab test data to the
"^DD",790.02,790.02,.24,21,8,0)
Women's Health database when a lab report is released for a cytology or
"^DD",790.02,790.02,.24,21,9,0)
surgical pathology test.
"^DD",790.02,790.02,.24,"DT")
2990310
"^DD",790.08,790.08,0)
FIELD^^2.2^12
"^DD",790.08,790.08,0,"DDA")
N
"^DD",790.08,790.08,0,"DT")
2990419
"^DD",790.08,790.08,0,"ID",.02)
S %I=Y,Y=$S('$D(^(0)):"",$D(^DPT(+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(2,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",790.08,790.08,0,"ID",.07)
S %I=Y,Y=$S('$D(^(0)):"",$D(^VA(200,+$P(^(0),U,7),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(200,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",790.08,790.08,0,"ID",.12)
W "   ",$E($P(^(0),U,12),4,5)_"-"_$E($P(^(0),U,12),6,7)_"-"_$E($P(^(0),U,12),2,3)
"^DD",790.08,790.08,0,"IX","B",790.08,.01)

"^DD",790.08,790.08,0,"IX","C",790.08,.02)

"^DD",790.08,790.08,0,"IX","D",790.08,.12)

"^DD",790.08,790.08,0,"IX","E",790.08,.07)

"^DD",790.08,790.08,0,"NM","WV LAB TESTS")

"^DD",790.08,790.08,.01,0)
LAB ACCESSION#^RF^^0;1^K:$L(X)>15!($L(X)<3)!'(X'?1P.E) X
"^DD",790.08,790.08,.01,1,0)
^.1
"^DD",790.08,790.08,.01,1,1,0)
790.08^B
"^DD",790.08,790.08,.01,1,1,1)
S ^WV(790.08,"B",$E(X,1,30),DA)=""
"^DD",790.08,790.08,.01,1,1,2)
K ^WV(790.08,"B",$E(X,1,30),DA)
"^DD",790.08,790.08,.01,3)
Answer must be 3-15 characters in length.
"^DD",790.08,790.08,.01,21,0)
^^2^2^2990510^
"^DD",790.08,790.08,.01,21,1,0)
This field contains the Lab Accession number value from File 63 of the Lab
"^DD",790.08,790.08,.01,21,2,0)
package (e.g., CY 99 1).
"^DD",790.08,790.08,.01,"DT")
2990217
"^DD",790.08,790.08,.02,0)
PATIENT^P2'^DPT(^0;2^Q
"^DD",790.08,790.08,.02,1,0)
^.1
"^DD",790.08,790.08,.02,1,1,0)
790.08^C
"^DD",790.08,790.08,.02,1,1,1)
S ^WV(790.08,"C",$E(X,1,30),DA)=""
"^DD",790.08,790.08,.02,1,1,2)
K ^WV(790.08,"C",$E(X,1,30),DA)
"^DD",790.08,790.08,.02,1,1,3)
ALLOWS LOOK-UP BY PATIENT NAME
"^DD",790.08,790.08,.02,1,1,"%D",0)
^^2^2^2990510^
"^DD",790.08,790.08,.02,1,1,"%D",1,0)
This regular cross-reference allows the user to select lab test entry by
"^DD",790.08,790.08,.02,1,1,"%D",2,0)
the patient's name.
"^DD",790.08,790.08,.02,1,1,"DT")
2990312
"^DD",790.08,790.08,.02,21,0)
^^1^1^2990312^^
"^DD",790.08,790.08,.02,21,1,0)
This field contains the name of the patient associated with this lab test.
"^DD",790.08,790.08,.02,"DT")
2990312
"^DD",790.08,790.08,.07,0)
PROVIDER^P200'^VA(200,^0;7^Q
"^DD",790.08,790.08,.07,1,0)
^.1
"^DD",790.08,790.08,.07,1,1,0)
790.08^E
"^DD",790.08,790.08,.07,1,1,1)
S ^WV(790.08,"E",$E(X,1,30),DA)=""
"^DD",790.08,790.08,.07,1,1,2)
K ^WV(790.08,"E",$E(X,1,30),DA)
"^DD",790.08,790.08,.07,1,1,3)
ALLOWS LOOK-UP BY PHYSICIAN REQUESTING LAB TEST
"^DD",790.08,790.08,.07,1,1,"%D",0)
^^2^2^2990222^
"^DD",790.08,790.08,.07,1,1,"%D",1,0)
This regular cross-reference allows the user to select lab test entry by
"^DD",790.08,790.08,.07,1,1,"%D",2,0)
the name of the requesting provider.
"^DD",790.08,790.08,.07,1,1,"DT")
2990222
"^DD",790.08,790.08,.07,21,0)
^^3^3^2990219^
"^DD",790.08,790.08,.07,21,1,0)
This field contains the requesting provider for the lab test. The source
"^DD",790.08,790.08,.07,21,2,0)
of this value is either the PHYSICIAN field (63.09, .07) or the
"^DD",790.08,790.08,.07,21,3,0)
SURGEON/PHYSICIAN field (63.08, .07) of the LAB DATA file (#63).
"^DD",790.08,790.08,.07,"DT")
2990222
"^DD",790.08,790.08,.1,0)
HEALTH CARE FACILITY^P4'^DIC(4,^0;10^Q
"^DD",790.08,790.08,.1,21,0)
^^2^2^2990219^
"^DD",790.08,790.08,.1,21,1,0)
This field identifies the name of the health care facility where this
"^DD",790.08,790.08,.1,21,2,0)
procedure was performed.
"^DD",790.08,790.08,.1,"DT")
2990219
"^DD",790.08,790.08,.11,0)
WARD/CLINIC/LOCATION^P44'^SC(^0;11^Q
"^DD",790.08,790.08,.11,21,0)
^^2^2^2990219^
"^DD",790.08,790.08,.11,21,1,0)
This field contains the name of the ward, clinic, or location where the
"^DD",790.08,790.08,.11,21,2,0)
procedure was performed.
"^DD",790.08,790.08,.11,"DT")
2990219
"^DD",790.08,790.08,.12,0)
DATE OF PROCEDURE^D^^0;12^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",790.08,790.08,.12,1,0)
^.1
"^DD",790.08,790.08,.12,1,1,0)
790.08^D
"^DD",790.08,790.08,.12,1,1,1)
S ^WV(790.08,"D",$E(X,1,30),DA)=""
"^DD",790.08,790.08,.12,1,1,2)
K ^WV(790.08,"D",$E(X,1,30),DA)
"^DD",790.08,790.08,.12,1,1,3)
ALLOWS LOOK-UP BY SPECIMEN DATE/TIME
"^DD",790.08,790.08,.12,1,1,"%D",0)
^^2^2^2990510^^
"^DD",790.08,790.08,.12,1,1,"%D",1,0)
This regular cross-reference allows the user to select lab test entry by
"^DD",790.08,790.08,.12,1,1,"%D",2,0)
the date/time the specimen was taken.
"^DD",790.08,790.08,.12,1,1,"DT")
2990222
"^DD",790.08,790.08,.12,21,0)
^^2^2^2990219^
"^DD",790.08,790.08,.12,21,1,0)
This field identifies the date on which the procedure was performed. Dates
"^DD",790.08,790.08,.12,21,2,0)
in the future may not be entered.
"^DD",790.08,790.08,.12,"DT")
2990222
"^DD",790.08,790.08,.18,0)
ENTERING USER^P200'^VA(200,^0;18^Q
"^DD",790.08,790.08,.18,21,0)
^^1^1^2990219^
"^DD",790.08,790.08,.18,21,1,0)
This field stores the name of the person initially creating this record.
"^DD",790.08,790.08,.18,"DT")
2990219
"^DD",790.08,790.08,.19,0)
DATE FIRST ENTERED^D^^0;19^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",790.08,790.08,.19,21,0)
^^2^2^2990219^
"^DD",790.08,790.08,.19,21,1,0)
This field stores the date on which this procedure record was first
"^DD",790.08,790.08,.19,21,2,0)
entered.
"^DD",790.08,790.08,.19,"DT")
2990219
"^DD",790.08,790.08,.34,0)
FACILITY WHERE ACESSIONED^P4'^DIC(4,^0;34^Q
"^DD",790.08,790.08,.34,21,0)
^^1^1^2990219^
"^DD",790.08,790.08,.34,21,1,0)
Select the facility where this procedure was accessioned.
"^DD",790.08,790.08,.34,"DT")
2990219
"^DD",790.08,790.08,2.18,0)
LAB DATA FILE IEN^NJ9,0^^0;36^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",790.08,790.08,2.18,3)
Type a Number between 1 and 999999999, 0 Decimal Digits
"^DD",790.08,790.08,2.18,21,0)
^^2^2^2990219^
"^DD",790.08,790.08,2.18,21,1,0)
This field contains the internal entry number of the LAB DATA file (#63)
"^DD",790.08,790.08,2.18,21,2,0)
for the patient, if this procedure entry is a lab test.
"^DD",790.08,790.08,2.18,"DT")
2990219
"^DD",790.08,790.08,2.19,0)
LAB INVERSE DATE/TIME^F^^0;37^K:$L(X)>14!($L(X)<7) X
"^DD",790.08,790.08,2.19,3)
Answer must be 7-14 characters in length.
"^DD",790.08,790.08,2.19,21,0)
^^2^2^2990219^
"^DD",790.08,790.08,2.19,21,1,0)
This field contains the inverse date/time of a lab test from the LAB DATA
"^DD",790.08,790.08,2.19,21,2,0)
file (#63) for the patient, if this procedure entry is a lab test.
"^DD",790.08,790.08,2.19,"DT")
2990223
"^DD",790.08,790.08,2.2,0)
LAB SUBSCRIPT^F^^0;38^K:$L(X)>2!($L(X)<2) X
"^DD",790.08,790.08,2.2,3)
Answer must be 2 characters in length.
"^DD",790.08,790.08,2.2,21,0)
^^3^3^2990405^
"^DD",790.08,790.08,2.2,21,1,0)
This field contains a character string that distinguishes the type of lab
"^DD",790.08,790.08,2.2,21,2,0)
test performed. The letters "CY" will represent a cytology test and the
"^DD",790.08,790.08,2.2,21,3,0)
letters "SP" will represent a surgical pathology test.
"^DD",790.08,790.08,2.2,"DT")
2990419
"^DD",790.1,790.1,1.01,0)
NOTES^790.11^^1;0
"^DD",790.1,790.1,1.01,21,0)
^^2^2^2990308^
"^DD",790.1,790.1,1.01,21,1,0)
This field allows you to enter word-processing text in which to elaborate
"^DD",790.1,790.1,1.01,21,2,0)
further on the results of this patients various tests.
"^DD",790.1,790.1,1.01,"DT")
2990308
"^DD",790.1,790.1,2.17,0)
LAB ACCESSION#^F^^2;17^K:$L(X)>15!($L(X)<5) X
"^DD",790.1,790.1,2.17,1,0)
^.1
"^DD",790.1,790.1,2.17,1,1,0)
790.1^F
"^DD",790.1,790.1,2.17,1,1,1)
S ^WV(790.1,"F",$E(X,1,30),DA)=""
"^DD",790.1,790.1,2.17,1,1,2)
K ^WV(790.1,"F",$E(X,1,30),DA)
"^DD",790.1,790.1,2.17,1,1,3)
ALLOWS LOOK-UP BY LAB ACCESSION NUMBER
"^DD",790.1,790.1,2.17,1,1,"%D",0)
^^2^2^2990222^
"^DD",790.1,790.1,2.17,1,1,"%D",1,0)
This regular cross-reference allows the user to select a Women's Health
"^DD",790.1,790.1,2.17,1,1,"%D",2,0)
procedure entry by the Lab package accession number.
"^DD",790.1,790.1,2.17,1,1,"DT")
2990222
"^DD",790.1,790.1,2.17,3)
Answer must be 5-15 characters in length.
"^DD",790.1,790.1,2.17,21,0)
^^2^2^2990219^
"^DD",790.1,790.1,2.17,21,1,0)
This field contains the lab accession number from the LAB DATA file (#63)
"^DD",790.1,790.1,2.17,21,2,0)
for the patient, if this procedure entry is a lab test.
"^DD",790.1,790.1,2.17,"DT")
2990222
"^DD",790.1,790.1,2.18,0)
LAB DATA FILE IEN^NJ9,0^^2;18^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",790.1,790.1,2.18,3)
Type a Number between 1 and 999999999, 0 Decimal Digits
"^DD",790.1,790.1,2.18,21,0)
^^2^2^2990219^
"^DD",790.1,790.1,2.18,21,1,0)
This field contains the internal entry number of the LAB DATA file (#63)
"^DD",790.1,790.1,2.18,21,2,0)
for the patient, if this procedure entry is a lab test.
"^DD",790.1,790.1,2.18,"DT")
2990219
"^DD",790.1,790.1,2.19,0)
LAB INVERSE DATE/TIME^F^^2;19^K:$L(X)>14!($L(X)<7) X
"^DD",790.1,790.1,2.19,3)
Answer must be 7-14 characters in length.
"^DD",790.1,790.1,2.19,21,0)
^^2^2^2990219^
"^DD",790.1,790.1,2.19,21,1,0)
This field contains the inverse date/time of a lab test from the LAB DATA
"^DD",790.1,790.1,2.19,21,2,0)
file (#63) for the patient, if this procedure entry is a lab test.
"^DD",790.1,790.1,2.19,"DT")
2990223
"^DD",790.1,790.1,2.2,0)
LAB SUBSCRIPT^F^^2;20^K:$L(X)>2!($L(X)<2) X
"^DD",790.1,790.1,2.2,3)
Answer must be 2 characters in length.
"^DD",790.1,790.1,2.2,21,0)
^^3^3^2990405^
"^DD",790.1,790.1,2.2,21,1,0)
This field contains a character string that distinguishes the type of lab
"^DD",790.1,790.1,2.2,21,2,0)
test performed. The letters "CY" will represent a cytology test and the
"^DD",790.1,790.1,2.2,21,3,0)
letters "SP" will represent a surgical pathology test.
"^DD",790.1,790.1,2.2,"DT")
2990419
"^DD",790.1,790.1,9,0)
REPORTS^790.19^^9;0
"^DD",790.1,790.1,9,21,0)
^^2^2^2990310^^
"^DD",790.1,790.1,9,21,1,0)
This field is not editable through WH options.  The lab or radiology exams
"^DD",790.1,790.1,9,21,2,0)
related to this procedure are presented here.
"^DD",790.1,790.1,9,"DT")
2990310
"^DD",790.1,790.11,0)
NOTES SUB-FIELD^^.01^1
"^DD",790.1,790.11,0,"NM","NOTES")

"^DD",790.1,790.11,0,"UP")
790.1
"^DD",790.1,790.11,0,"VRPK")
WOMEN'S HEALTH
"^DD",790.1,790.11,.01,0)
NOTES^W^^0;1^Q
"^DD",790.1,790.11,.01,21,0)
^^2^2^2990308^
"^DD",790.1,790.11,.01,21,1,0)
This field allows you to enter word-processing text in which to elaborate
"^DD",790.1,790.11,.01,21,2,0)
further on the results of this patients various tests.
"^DD",790.1,790.11,.01,"DT")
2990308
"^DD",790.1,790.19,0)
REPORTS SUB-FIELD^^.01^1
"^DD",790.1,790.19,0,"DT")
2980529
"^DD",790.1,790.19,0,"NM","REPORTS")

"^DD",790.1,790.19,0,"UP")
790.1
"^DD",790.1,790.19,0,"VRPK")
WOMEN'S HEALTH
"^DD",790.1,790.19,.01,0)
REPORTS^W^^0;1^Q
"^DD",790.1,790.19,.01,3)
The lab or radiology report is uneditable and is extracted from the Lab or Radiology package each time it is viewed.
"^DD",790.1,790.19,.01,21,0)
^^2^2^2990310^^
"^DD",790.1,790.19,.01,21,1,0)
This field is not editable through WH options.  The lab or radiology exams
"^DD",790.1,790.19,.01,21,2,0)
related to this procedure are presented here.
"^DD",790.1,790.19,.01,"DT")
2990310
"^DIC",790.08,790.08,0)
WV LAB TESTS^790.08
"^DIC",790.08,790.08,0,"GL")
^WV(790.08,
"^DIC",790.08,790.08,"%D",0)
^^7^7^2990217^^
"^DIC",790.08,790.08,"%D",1,0)
This file is used to store lab test data sent from the LAB DATA file (#63)
"^DIC",790.08,790.08,"%D",2,0)
until such time as a Women's Health package user can determine if the lab
"^DIC",790.08,790.08,"%D",3,0)
test should be entered as a procedure in the WV PROCEDURE file (#790.1).
"^DIC",790.08,790.08,"%D",4,0)
If the lab test is converted into a procedure entry in FILE 790.1, it will
"^DIC",790.08,790.08,"%D",5,0)
be deleted from this file. Also, the Women's Health package user may
"^DIC",790.08,790.08,"%D",6,0)
decide to delete the lab test from this file if it is determined that the
"^DIC",790.08,790.08,"%D",7,0)
lab test is not to be tracked in FILE 790.1.
"^DIC",790.08,"B","WV LAB TESTS",790.08)

**END**
**END**

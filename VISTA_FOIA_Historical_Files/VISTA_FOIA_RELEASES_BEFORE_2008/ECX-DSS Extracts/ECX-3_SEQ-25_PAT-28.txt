$TXT Created by PAJERSKI,JAN at DEVVCC.ISC-ALBANY.VA.GOV  (KIDS) on THURSDAY, 07/01/99 at 15:22
=============================================================================
Run Date: JUL 22, 1999                     Designation: ECX*3*28
Package : ECX - DSS EXTRACTS                  Priority: Mandatory
Version : 3        SEQ #25                      Status: Released
=============================================================================

Associated patches: (v)ECX*3*14    <<= must be installed BEFORE `ECX*3*28'

Subject: LINE LENGTH IN CLI & UNDEFINED IN LAB (FY1999)

Category: 
  - Routine

Description: 
============

   ********************* IMPORTANT NOTE *************************** 
    
   This patch ONLY applies to DSS sites that have installed DSS 
   EXTRACTS V3.0 (dated DEC 22,1997 on the second line of routines)  
   and are generating extracts for FY1999 data.
   
   Please insure that the DSS Site Manager obtains a copy of this
   patch description.
   
   ****************************************************************
    
   Patch ECX*3*28 resolves two NOIS issues as described below.
   
   (1) CTX-0699-72333, which reports a problem in transmission of
   the FY1999 CLI (Clinic Visit) extract:
   
   Data for the CLI extract record is stored on two global nodes within
   the ^ECX(727.803 global.  When the CLI extract records are being  
   placed in MailMan message lines for transmission to the Austin Auto- 
   mation Center (AAC), these two global nodes are concatenated together
   and a line terminator character is added.
   
   Some sites are incurring errors from MailMan during the transmission
   process because the string length of the concatenated global nodes 
   exceeds the 255 character ANSI limit.
   
   The routine revisions contained in this patch will prevent such
   transmission failures by checking the total length of the extract
   record just before it is placed in the ^ECX(727.803 global.  If the
   combined length of the two global nodes exceeds 255 characters, then
   certain data fields may be replaced with null values.
   
   The order in which data fields will be replaced with null values is 
   as follows:
   
      TIME - 6 characters
      SHARING AGREEMENT INSURANCE - 30 characters
      SHARING AGREEMENT PAYOR - 15 characters
      CPT CODE (11) - 5 characters
      CPT CODE (10) - 5 characters
      CPT CODE (9)  - 5 characters
      CPT CODE (8)  - 5 characters
      CPT CODE (7)  - 5 characters
      CPT CODE (6)  - 5 characters
      CPT CODE (5)  - 5 characters
      CPT CODE (4)  - 5 characters
      CPT CODE (3)  - 5 characters
      CPT CODE (2)  - 5 characters
   
   After a data field is replaced by a null value, the total length of
   the extract record is again checked.  As soon as the length drops to
   less than 256 characters, no further data replacement is done.
   
   It will rarely be necessary to remove more than the first three 
   fields listed above.  (Usually, replacing the TIME field with
   null is sufficient to reduce the total string length to less than
   256 characters.)
    
   (2) ALN-0699-12468, which reports an error due to an undefined
       variable in the FY1999 LAB (Laboratory) extract:
  
   Variable ECCLAS should hold the Person Class code for a patient's 
   Primary Care Provider.
   
   When Laboratory data for a Referral patient is being extracted, the
   variable ECCLAS should be initialized to the null value to prevent
   the undefined variable error from occuring.  Referral patients do
   not have Primary Care data in VistA.
   
     
   ROUTINE SUMMARY:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
    
       <tab>;;3.0;DSS EXTRACTS;[patch list];Dec 22, 1997
    
                              CHECK^XTSUMBLD results
    
   Routine name      Before Patch          After Patch         Patch List
   ============      ============          ===========         ==========
   ECXLABN              6232925              6253674          1,11,8,13,28
   ECXSCX              20064065             20093621     1,3,11,8,13,14,28
   ECXSCX1              3565978              3967353               8,28
   
   
   INSTALLATION INSTRUCTIONS:
   ==========================
    
   This patch can be loaded with users on the system. 
    
   Installation will take less than 2 minutes.  
     
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
      
   2.  Review your mapped set.  If any of the routines listed in the
       ROUTINE SUMMARY section are mapped, they should be removed
       from the mapped set at this time.
    
   3.  From the Kernel Installation and Distribution System Menu, select 
       the Installation menu.  
     
   4.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter ECX*3.0*28):
    
       a. Backup a Transport Global - This option will create a backup 
          message of any routines exported with this patch. It will not 
          backup any other changes such as DD's or templates.  
       b. Compare Transport Global to Current System - This option will 
          allow you to view all changes that will be made when this patch 
          is installed. It compares all components of this patch 
          (routines, DD's, templates, etc.).  
       c. Verify Checksums in Transport Global - This option will allow 
          you to ensure the integrity of the routines that are in the 
          transport global.  
     
   5.  Use the Install Package(s) option and select the package ECX*3.0*28.
     
   6.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//', respond YES.  When prompted to select the options
       you would like to place out of order, enter the following:
   
       Clinic Visit Extract Extract             ECXSCX
       Lab Extract                              ECXLAB
       Transmit Data from Extract Files         ECXTRANS
   
   7.  If routines were unmapped as part of step 2, they should be returned
       to the mapped set once the installation has run to completion.
   

Routine Information:
====================

Routine Name:
  - ECXSCX


Routine Checksum:

Routine Name:
  - ECXSCX1


Routine Checksum:

Routine Name:
  - ECXLABN


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : PAJERSKI,JAN                   Date Entered : JUN 29, 1999
Completed By: MORRISON,JENNIFER             Date Completed: JUL 22, 1999
Released By : COOPER,SAMANTHA               Date Released : JUL 22, 1999
=============================================================================


Packman Mail Message:
=====================

$END TXT

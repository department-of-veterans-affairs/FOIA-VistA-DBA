Released PRCA*4.5*228 SEQ #201
Extracted from mail message
**KIDS**:PRCA*4.5*228^

**INSTALL NAME**
PRCA*4.5*228
"BLD",5318,0)
PRCA*4.5*228^ACCOUNTS RECEIVABLE^0^3050725^y
"BLD",5318,1,0)
^^1^1^3050623^
"BLD",5318,1,1,0)
Phase II, Part 1 of IB/AR Data Extract.  Changes as of 6/23/05.
"BLD",5318,4,0)
^9.64PA^433^2
"BLD",5318,4,348.4,0)
348.4
"BLD",5318,4,348.4,2,0)
^9.641^348.4^1
"BLD",5318,4,348.4,2,348.4,0)
AR DATA QUEUE  (File-top level)
"BLD",5318,4,348.4,2,348.4,1,0)
^9.6411^.04^1
"BLD",5318,4,348.4,2,348.4,1,.04,0)
BATCH TYPE
"BLD",5318,4,348.4,222)
y^n^p^^^^n^^n
"BLD",5318,4,348.4,224)

"BLD",5318,4,433,0)
433
"BLD",5318,4,433,2,0)
^9.641^433^1
"BLD",5318,4,433,2,433,0)
AR TRANSACTION  (File-top level)
"BLD",5318,4,433,2,433,1,0)
^9.6411^12^1
"BLD",5318,4,433,2,433,1,12,0)
TRANSACTION TYPE
"BLD",5318,4,433,222)
y^n^p^^^^n^^n
"BLD",5318,4,433,224)

"BLD",5318,4,"APDD",348.4,348.4)

"BLD",5318,4,"APDD",348.4,348.4,.04)

"BLD",5318,4,"APDD",430.3,430.3,5)

"BLD",5318,4,"APDD",433,433)

"BLD",5318,4,"APDD",433,433,12)

"BLD",5318,4,"B",348.4,348.4)

"BLD",5318,4,"B",433,433)

"BLD",5318,"ABPKG")
n
"BLD",5318,"INIT")
EN^RCXVP228
"BLD",5318,"KRN",0)
^9.67PA^8989.52^19
"BLD",5318,"KRN",.4,0)
.4
"BLD",5318,"KRN",.401,0)
.401
"BLD",5318,"KRN",.402,0)
.402
"BLD",5318,"KRN",.403,0)
.403
"BLD",5318,"KRN",.5,0)
.5
"BLD",5318,"KRN",.84,0)
.84
"BLD",5318,"KRN",3.6,0)
3.6
"BLD",5318,"KRN",3.8,0)
3.8
"BLD",5318,"KRN",9.2,0)
9.2
"BLD",5318,"KRN",9.8,0)
9.8
"BLD",5318,"KRN",9.8,"NM",0)
^9.68A^13^13
"BLD",5318,"KRN",9.8,"NM",1,0)
RCXVDC^^0^B5579270
"BLD",5318,"KRN",9.8,"NM",2,0)
RCXVDC1^^0^B16078231
"BLD",5318,"KRN",9.8,"NM",3,0)
RCXVDC2^^0^B6494214
"BLD",5318,"KRN",9.8,"NM",4,0)
RCXVDC3^^0^B25730617
"BLD",5318,"KRN",9.8,"NM",5,0)
RCXVDC4^^0^B9709344
"BLD",5318,"KRN",9.8,"NM",6,0)
RCXVDC6^^0^B6605211
"BLD",5318,"KRN",9.8,"NM",7,0)
RCXVDC5^^0^B11220375
"BLD",5318,"KRN",9.8,"NM",8,0)
RCXVDC7^^0^B829025
"BLD",5318,"KRN",9.8,"NM",9,0)
RCXVDC8^^0^B2256974
"BLD",5318,"KRN",9.8,"NM",10,0)
RCXVDEQ^^0^B14701950
"BLD",5318,"KRN",9.8,"NM",11,0)
RCXVP228^^0^B8484191
"BLD",5318,"KRN",9.8,"NM",12,0)
RCXVTSK^^0^B38032406
"BLD",5318,"KRN",9.8,"NM",13,0)
RCXVP201^^0^B44072983
"BLD",5318,"KRN",9.8,"NM","B","RCXVDC",1)

"BLD",5318,"KRN",9.8,"NM","B","RCXVDC1",2)

"BLD",5318,"KRN",9.8,"NM","B","RCXVDC2",3)

"BLD",5318,"KRN",9.8,"NM","B","RCXVDC3",4)

"BLD",5318,"KRN",9.8,"NM","B","RCXVDC4",5)

"BLD",5318,"KRN",9.8,"NM","B","RCXVDC5",7)

"BLD",5318,"KRN",9.8,"NM","B","RCXVDC6",6)

"BLD",5318,"KRN",9.8,"NM","B","RCXVDC7",8)

"BLD",5318,"KRN",9.8,"NM","B","RCXVDC8",9)

"BLD",5318,"KRN",9.8,"NM","B","RCXVDEQ",10)

"BLD",5318,"KRN",9.8,"NM","B","RCXVP201",13)

"BLD",5318,"KRN",9.8,"NM","B","RCXVP228",11)

"BLD",5318,"KRN",9.8,"NM","B","RCXVTSK",12)

"BLD",5318,"KRN",19,0)
19
"BLD",5318,"KRN",19,"NM",0)
^9.68A^^
"BLD",5318,"KRN",19.1,0)
19.1
"BLD",5318,"KRN",101,0)
101
"BLD",5318,"KRN",409.61,0)
409.61
"BLD",5318,"KRN",771,0)
771
"BLD",5318,"KRN",870,0)
870
"BLD",5318,"KRN",8989.51,0)
8989.51
"BLD",5318,"KRN",8989.52,0)
8989.52
"BLD",5318,"KRN",8994,0)
8994
"BLD",5318,"KRN","B",.4,.4)

"BLD",5318,"KRN","B",.401,.401)

"BLD",5318,"KRN","B",.402,.402)

"BLD",5318,"KRN","B",.403,.403)

"BLD",5318,"KRN","B",.5,.5)

"BLD",5318,"KRN","B",.84,.84)

"BLD",5318,"KRN","B",3.6,3.6)

"BLD",5318,"KRN","B",3.8,3.8)

"BLD",5318,"KRN","B",9.2,9.2)

"BLD",5318,"KRN","B",9.8,9.8)

"BLD",5318,"KRN","B",19,19)

"BLD",5318,"KRN","B",19.1,19.1)

"BLD",5318,"KRN","B",101,101)

"BLD",5318,"KRN","B",409.61,409.61)

"BLD",5318,"KRN","B",771,771)

"BLD",5318,"KRN","B",870,870)

"BLD",5318,"KRN","B",8989.51,8989.51)

"BLD",5318,"KRN","B",8989.52,8989.52)

"BLD",5318,"KRN","B",8994,8994)

"BLD",5318,"QUES",0)
^9.62^^
"BLD",5318,"REQB",0)
^9.611^4^4
"BLD",5318,"REQB",1,0)
PRCA*4.5*201^2
"BLD",5318,"REQB",2,0)
IB*2.0*233^2
"BLD",5318,"REQB",3,0)
PRCA*4.5*227^2
"BLD",5318,"REQB",4,0)
IB*2.0*301^2
"BLD",5318,"REQB","B","IB*2.0*233",2)

"BLD",5318,"REQB","B","IB*2.0*301",4)

"BLD",5318,"REQB","B","PRCA*4.5*201",1)

"BLD",5318,"REQB","B","PRCA*4.5*227",3)

"FIA",348.4)
AR DATA QUEUE
"FIA",348.4,0)
^RCXV(
"FIA",348.4,0,0)
348.4
"FIA",348.4,0,1)
y^n^p^^^^n^^n
"FIA",348.4,0,10)

"FIA",348.4,0,11)

"FIA",348.4,0,"RLRO")

"FIA",348.4,0,"VR")
4.5^PRCA
"FIA",348.4,348.4)
1
"FIA",348.4,348.4,.04)

"FIA",433)
AR TRANSACTION
"FIA",433,0)
^PRCA(433,
"FIA",433,0,0)
433NI
"FIA",433,0,1)
y^n^p^^^^n^^n
"FIA",433,0,10)

"FIA",433,0,11)

"FIA",433,0,"RLRO")

"FIA",433,0,"VR")
4.5^PRCA
"FIA",433,433)
1
"FIA",433,433,12)

"INIT")
EN^RCXVP228
"MBREQ")
0
"PKG",142,-1)
1^1
"PKG",142,0)
ACCOUNTS RECEIVABLE^PRCA^BILL COLLECTIONS
"PKG",142,20,0)
^9.402P^1^1
"PKG",142,20,1,0)
2^^PRCAMRG
"PKG",142,20,1,1)

"PKG",142,20,"B",2,1)

"PKG",142,22,0)
^9.49I^1^1
"PKG",142,22,1,0)
4.5^3040809^3040812^8
"PKG",142,22,1,"PAH",1,0)
228^3050725^8
"PKG",142,22,1,"PAH",1,1,0)
^^1^1^3050725
"PKG",142,22,1,"PAH",1,1,1,0)
Phase II, Part 1 of IB/AR Data Extract.  Changes as of 6/23/05.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
13
"RTN","RCXVDC")
0^1^B5579270
"RTN","RCXVDC",1,0)
RCXVDC ;DAOU/ALA-AR Data Extraction Data Creation ;02-JUL-03
"RTN","RCXVDC",2,0)
 ;;4.5;Accounts Receivable;**201,228**;Mar 20, 1995
"RTN","RCXVDC",3,0)
 ;
"RTN","RCXVDC",4,0)
 Q
"RTN","RCXVDC",5,0)
EN ; Entry Point
"RTN","RCXVDC",6,0)
 NEW RCXVD0,RCXVEVDT,RCXVBCN
"RTN","RCXVDC",7,0)
 NEW RCXVI,RCXVCP,RCXVPC,RCXVPFDT,RCXVPTDT
"RTN","RCXVDC",8,0)
 NEW RCXVBLNA,RCXVBLNB,RCXVICN
"RTN","RCXVDC",9,0)
 I DFN="" S DFN=$P($G(^PRCA(430,RCXVBLN,0)),U,7) ; 
"RTN","RCXVDC",10,0)
 K ^TMP($J)
"RTN","RCXVDC",11,0)
 D D430^RCXVDC1
"RTN","RCXVDC",12,0)
 I DFN'="" D D2^RCXVDC2
"RTN","RCXVDC",13,0)
 D D399^RCXVDC3
"RTN","RCXVDC",14,0)
 D D399PC^RCXVDC4
"RTN","RCXVDC",15,0)
 D D350^RCXVDC5
"RTN","RCXVDC",16,0)
 D D3625^RCXVDC7
"RTN","RCXVDC",17,0)
 I RCXVRT="D"!(RCXVRT="C")!(RCXVRT="E") D D433^RCXVDC6
"RTN","RCXVDC",18,0)
 I RCXVRT="H" D D433B^RCXVDC6
"RTN","RCXVDC",19,0)
 ;
"RTN","RCXVDC",20,0)
FILE ;
"RTN","RCXVDC",21,0)
 W "REC:"_RCXVBLNA,!
"RTN","RCXVDC",22,0)
 W "430:"_$G(^TMP($J,RCXVBLN,"1-430A"))_RCXVU
"RTN","RCXVDC",23,0)
 W $G(^TMP($J,RCXVBLN,"1-430B"))_RCXVU
"RTN","RCXVDC",24,0)
 W $G(^TMP($J,RCXVBLN,"1-430C"))
"RTN","RCXVDC",25,0)
 W !
"RTN","RCXVDC",26,0)
 I DFN'="" W "2:"_$G(^TMP($J,RCXVBLN,"2-2A"))_RCXVU_$G(^TMP($J,RCXVBLN,"2-2B")),!
"RTN","RCXVDC",27,0)
 I $G(^TMP($J,RCXVBLN,"3-399A"))'="" W "399:"_^TMP($J,RCXVBLN,"3-399A")_RCXVU_^TMP($J,RCXVBLN,"3-399B")_RCXVU_^TMP($J,RCXVBLN,"3-399C")_RCXVU_^TMP($J,RCXVBLN,"3-399D"),!
"RTN","RCXVDC",28,0)
 S RCXVPC=0
"RTN","RCXVDC",29,0)
 F  S RCXVPC=$O(^TMP($J,RCXVBLN,"4-399A",RCXVPC))  Q:'RCXVPC  D
"RTN","RCXVDC",30,0)
 . W "399.0304:"
"RTN","RCXVDC",31,0)
 . W $G(^TMP($J,RCXVBLN,"4-399A",RCXVPC))
"RTN","RCXVDC",32,0)
 . W RCXVU
"RTN","RCXVDC",33,0)
 . F RCXVCP=1:1 Q:('$D(^TMP($J,RCXVBLN,"4-399A",RCXVPC,RCXVCP)))  D
"RTN","RCXVDC",34,0)
 . . I RCXVCP>1 W "~"
"RTN","RCXVDC",35,0)
 . . W $G(^TMP($J,RCXVBLN,"4-399A",RCXVPC,RCXVCP))
"RTN","RCXVDC",36,0)
 . . Q
"RTN","RCXVDC",37,0)
 . W !
"RTN","RCXVDC",38,0)
 . I $D(^TMP($J,RCXVBLN,"4-399B",RCXVPC)) W "399.042:"_$G(^TMP($J,RCXVBLN,"4-399B",RCXVPC)),!
"RTN","RCXVDC",39,0)
 . Q
"RTN","RCXVDC",40,0)
 S RCXVI=""
"RTN","RCXVDC",41,0)
 F  S RCXVI=$O(^TMP($J,RCXVBLN,"5-350A",RCXVI)) Q:RCXVI=""  D
"RTN","RCXVDC",42,0)
 . W "350:"_^TMP($J,RCXVBLN,"5-350A",RCXVI),!
"RTN","RCXVDC",43,0)
 S RCXVI=""
"RTN","RCXVDC",44,0)
 F  S RCXVI=$O(^TMP($J,RCXVBLN,"7-362.5A",RCXVI)) Q:RCXVI=""  D
"RTN","RCXVDC",45,0)
 . W "362.5:"_^TMP($J,RCXVBLN,"7-362.5A",RCXVI),!
"RTN","RCXVDC",46,0)
 ; LOOP THRU ^TMP($J,RCXVBLN,"6-433A",RCXVI)
"RTN","RCXVDC",47,0)
 S RCXVI=""
"RTN","RCXVDC",48,0)
 F  S RCXVI=$O(^TMP($J,RCXVBLN,"6-433A",RCXVI)) Q:RCXVI=""  D 
"RTN","RCXVDC",49,0)
 . W "433:"_$G(^TMP($J,RCXVBLN,"6-433A",RCXVI)),!
"RTN","RCXVDC",50,0)
 . Q
"RTN","RCXVDC",51,0)
 Q
"RTN","RCXVDC1")
0^2^B16078231
"RTN","RCXVDC1",1,0)
RCXVDC1 ;DAOU/ALA-AR Data Extraction Data Creation ;02-JUL-03
"RTN","RCXVDC1",2,0)
 ;;4.5;Accounts Receivable;**201,227,228**;Mar 20, 1995
"RTN","RCXVDC1",3,0)
 ;
"RTN","RCXVDC1",4,0)
 Q
"RTN","RCXVDC1",5,0)
EN ; Entry Point
"RTN","RCXVDC1",6,0)
 K ^TMP($J)
"RTN","RCXVDC1",7,0)
D430 ; Get #430 data given RCXVBLN 
"RTN","RCXVDC1",8,0)
 N RCXVD,RCXVD1,RCXVD2,RCXVD3,RCXVD4,RCXVD5,RCXVP1,RCXVP2
"RTN","RCXVDC1",9,0)
 N RCXVDA,RCXVDB,RCXVDC,RCXVVP1,RCXVVP,RCXVX,RCXVY
"RTN","RCXVDC1",10,0)
 S RCXVD1=$G(^PRCA(430,RCXVBLN,0))
"RTN","RCXVDC1",11,0)
 S RCXVD2=$G(^PRCA(430,RCXVBLN,6))
"RTN","RCXVDC1",12,0)
 S RCXVD3=$G(^PRCA(430,RCXVBLN,7))
"RTN","RCXVDC1",13,0)
 S RCXVD4=$G(^PRCA(430,RCXVBLN,11))
"RTN","RCXVDC1",14,0)
 S RCXVD5=$G(^PRCA(430,RCXVBLN,13))
"RTN","RCXVDC1",15,0)
 S RCXVBLNA=$P(RCXVD1,U,1)
"RTN","RCXVDC1",16,0)
 S RCXVBLNB=$P(RCXVBLNA,"-",1)_"-"
"RTN","RCXVDC1",17,0)
 S RCXVDA=RCXVBLNA ; Bill #
"RTN","RCXVDC1",18,0)
 S RCXVP1=$P(RCXVD1,U,2),RCXVP2=""
"RTN","RCXVDC1",19,0)
 I RCXVP1'="" S RCXVP2=$P($G(^PRCA(430.2,RCXVP1,0)),U,1)
"RTN","RCXVDC1",20,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVP2 ; Cat (P)
"RTN","RCXVDC1",21,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD1,U,3) ; Orig Amt
"RTN","RCXVDC1",22,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD1,U,4) ; GL #
"RTN","RCXVDC1",23,0)
 S RCXVP1=$P(RCXVD1,U,8),RCXVP2=""
"RTN","RCXVDC1",24,0)
 I RCXVP1'="" S RCXVP2=$P($G(^PRCA(430.3,RCXVP1,0)),U,1)
"RTN","RCXVDC1",25,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVP2 ; Cur Stat (P)
"RTN","RCXVDC1",26,0)
 S RCXVDBN=$$GET1^DIQ(430,RCXVBLN_",",9,"I")
"RTN","RCXVDC1",27,0)
 I RCXVDBN'="" S RCXVDBN=$P($G(^RCD(340,RCXVDBN,0)),U,1) I RCXVDBN="" D
"RTN","RCXVDC1",28,0)
 . NEW CT
"RTN","RCXVDC1",29,0)
 . S CT=$G(^TMP("RCXVBREC",$J,0))+1,^TMP("RCXVBREC",$J,0)=CT
"RTN","RCXVDC1",30,0)
 . S ^TMP("RCXVBREC",$J,CT,0)="Bill # "_$P(^PRCA(430,RCXVBLN,0),"^",1)_" has a bad debtor record."
"RTN","RCXVDC1",31,0)
 I RCXVDBN["DPT",DFN="" S DFN=$P(RCXVDBN,";",1)
"RTN","RCXVDC1",32,0)
 S RCXVVP1=$S(RCXVDBN["DPT":"PATIENT",1:$$GET1^DIQ(430,RCXVBLN_",",9,"E"))
"RTN","RCXVDC1",33,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVVP1 ; Debtor (P)
"RTN","RCXVDC1",34,0)
 S RCXVDT=$P(RCXVD1,U,10)
"RTN","RCXVDC1",35,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT Bill Preprd 
"RTN","RCXVDC1",36,0)
 S RCXVY(430,11,1)=$G(^PRCA(430,RCXVBLN,7)) ; Cur Bal - Comp
"RTN","RCXVDC1",37,0)
 S RCXVX=$P(RCXVY(430,11,1),U,1)+$P(RCXVY(430,11,1),U,2)+$P(RCXVY(430,11,1),U,3)+$P(RCXVY(430,11,1),U,4)+$P(RCXVY(430,11,1),U,5) S RCXVX=$J(RCXVX,0,2)
"RTN","RCXVDC1",38,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVX ;  Cur. Bal. - computed
"RTN","RCXVDC1",39,0)
 S RCXVDT=$P(RCXVD1,U,14)
"RTN","RCXVDC1",40,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT Stat Upd
"RTN","RCXVDC1",41,0)
 S RCXVDT=$P($P(RCXVD2,U,21),".",1)
"RTN","RCXVDC1",42,0)
 S RCXVDB=$$HLDATE^HLFNC(RCXVDT) ; DT acct actd
"RTN","RCXVDC1",43,0)
 S RCXVDT=$P(RCXVD2,U,1)
"RTN","RCXVDC1",44,0)
 S RCXVDB=RCXVDB_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; Letter 1 (DT)
"RTN","RCXVDC1",45,0)
 S RCXVDT=$P(RCXVD2,U,4)
"RTN","RCXVDC1",46,0)
 S RCXVDB=RCXVDB_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; Ref DT
"RTN","RCXVDC1",47,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD2,U,5) ; RF code
"RTN","RCXVDC1",48,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD2,U,6) ; RF amt
"RTN","RCXVDC1",49,0)
 S RCXVDT=$P(RCXVD2,U,10)
"RTN","RCXVDC1",50,0)
 S RCXVDB=RCXVDB_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; RF DT
"RTN","RCXVDC1",51,0)
 S RCXVDT=$P(RCXVD2,U,11)
"RTN","RCXVDC1",52,0)
 S RCXVDB=RCXVDB_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; Rtrn DT
"RTN","RCXVDC1",53,0)
 S RCXVDT=$P(RCXVD2,U,12)
"RTN","RCXVDC1",54,0)
 S RCXVDB=RCXVDB_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; RF DT to COWC
"RTN","RCXVDC1",55,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD2,U,13) ; RF amt to COWC
"RTN","RCXVDC1",56,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD4,U,23) ; RSC
"RTN","RCXVDC1",57,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD3,U,1) ; PRIN BAL
"RTN","RCXVDC1",58,0)
 S RCXVDC=$P(RCXVD3,U,2) ; INT BAL
"RTN","RCXVDC1",59,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD3,U,3) ; ADMIN COST BAL
"RTN","RCXVDC1",60,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD3,U,7) ; TOT PAID PRINC
"RTN","RCXVDC1",61,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD3,U,8) ; TOT PAID INT
"RTN","RCXVDC1",62,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD3,U,9) ; TOT PAID ADMIN
"RTN","RCXVDC1",63,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD3,U,10) ; TOT PAID MARSHAL FEE
"RTN","RCXVDC1",64,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD4,U,17) ;  FUND
"RTN","RCXVDC1",65,0)
 S RCXVP1=$P(RCXVD4,U,6),RCXVP2=""
"RTN","RCXVDC1",66,0)
 I RCXVP1'="" S RCXVP2=$P($G(^RC(347.3,RCXVP1,0)),U,1)
"RTN","RCXVDC1",67,0)
 S RCXVDC=RCXVDC_RCXVU_RCXVP2 ; REV SRCE (P)
"RTN","RCXVDC1",68,0)
 S RCXVDT=$$DFP^RCXVUTIL(RCXVBLN)
"RTN","RCXVDC1",69,0)
 S RCXVDC=RCXVDC_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT 1ST PAYMNT
"RTN","RCXVDC1",70,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD5,U)  ;MEDICARE CONTRACT ADJUSTMENT AMT
"RTN","RCXVDC1",71,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD5,U,2) ;MEDICARE UNREIMBURSABLE AMOUNT
"RTN","RCXVDC1",72,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD3,U,18) ;REFUNDED AMOUNT
"RTN","RCXVDC1",73,0)
 S RCXVDT=$P(RCXVD3,U,19)
"RTN","RCXVDC1",74,0)
 S RCXVDC=RCXVDC_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ;REFUNDED DATE
"RTN","RCXVDC1",75,0)
 ; 
"RTN","RCXVDC1",76,0)
 S ^TMP($J,RCXVBLN,"1-430A")=RCXVDA
"RTN","RCXVDC1",77,0)
 S ^TMP($J,RCXVBLN,"1-430B")=RCXVDB
"RTN","RCXVDC1",78,0)
 S ^TMP($J,RCXVBLN,"1-430C")=RCXVDC
"RTN","RCXVDC1",79,0)
 Q
"RTN","RCXVDC1",80,0)
 ;
"RTN","RCXVDC2")
0^3^B6494214
"RTN","RCXVDC2",1,0)
RCXVDC2 ;DAOU/ALA-AR Data Extraction Data Creation ;02-JUL-03
"RTN","RCXVDC2",2,0)
 ;;4.5;Accounts Receivable;**201,227,228**;Mar 20, 1995
"RTN","RCXVDC2",3,0)
 ;
"RTN","RCXVDC2",4,0)
 ; PATIENT FILE (# 2)
"RTN","RCXVDC2",5,0)
 Q
"RTN","RCXVDC2",6,0)
D2 ; 
"RTN","RCXVDC2",7,0)
 NEW RCXVDT,RCXVD,RCXVD1,RCXVD2,RCXVD3,RCXVPF,RCXVDA,RCXVENR,RCXVPE
"RTN","RCXVDC2",8,0)
 N RCXVPE1,RCXVCT,RCMTYP,RCMTDA,RCMTDT,PC1,PC2,PC3
"RTN","RCXVDC2",9,0)
 NEW RCXVCTY,RCXVICN,RCXVELG,VADM
"RTN","RCXVDC2",10,0)
 S RCXVD=$G(^DPT(DFN,0))
"RTN","RCXVDC2",11,0)
 S RCXVDT=$P(RCXVD,U,3)
"RTN","RCXVDC2",12,0)
 S RCXVDA=$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT of Birth
"RTN","RCXVDC2",13,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD,U,9) ; SSN
"RTN","RCXVDC2",14,0)
 S RCXVICN=$P($G(^DPT(DFN,"MPI")),U,1)
"RTN","RCXVDC2",15,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVICN ; ICN
"RTN","RCXVDC2",16,0)
 S RCXVDA=RCXVDA_RCXVU_$P($$SITE^VASITE(),U,3)_"v"_DFN ; IEN
"RTN","RCXVDC2",17,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD,U,2) ; SEX
"RTN","RCXVDC2",18,0)
 S RCXVD1=$G(^DPT(DFN,.11))
"RTN","RCXVDC2",19,0)
 S RCXVD2=$G(^DPT(DFN,.35))
"RTN","RCXVDC2",20,0)
 S RCXVD3="^^^^^^^^^^^"
"RTN","RCXVDC2",21,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD1,U,6) ; ZIPCODE
"RTN","RCXVDC2",22,0)
 ;
"RTN","RCXVDC2",23,0)
 NEW VAPA,VAERR
"RTN","RCXVDC2",24,0)
 D ADD^VADPT
"RTN","RCXVDC2",25,0)
 S RCXVCTY=$P($G(VAPA(7)),U,2)
"RTN","RCXVDC2",26,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVCTY ; COUNTY
"RTN","RCXVDC2",27,0)
 ;
"RTN","RCXVDC2",28,0)
 S RCXVPE="",RCXVPE1=""
"RTN","RCXVDC2",29,0)
 S RCXVENR=$P($G(^DPT(DFN,"ENR")),U,1)
"RTN","RCXVDC2",30,0)
 I RCXVENR'="" D
"RTN","RCXVDC2",31,0)
 . S RCXVPE=$P($G(^DGEN(27.11,RCXVENR,0)),U,7) ; Enrollment priority
"RTN","RCXVDC2",32,0)
 . S RCXVPE1=$$GET1^DIQ(27.11,RCXVENR_",",.12,"E") ; Enrollment subgroup
"RTN","RCXVDC2",33,0)
 ;
"RTN","RCXVDC2",34,0)
 ;Primary Eligibility Code
"RTN","RCXVDC2",35,0)
 S RCXVELG=$P($G(^DPT(DFN,.36)),U,1)
"RTN","RCXVDC2",36,0)
 I RCXVELG'="" S RCXVELG=$P($G(^DIC(8,RCXVELG,0)),U,1)
"RTN","RCXVDC2",37,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVPE_RCXVU_RCXVPE1_RCXVU_RCXVELG
"RTN","RCXVDC2",38,0)
 S RCXVDT=$P(RCXVD2,U)
"RTN","RCXVDC2",39,0)
 D DEM^VADPT S RCXVDT=$P(VADM(6),U)
"RTN","RCXVDC2",40,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ;Date of Death
"RTN","RCXVDC2",41,0)
 S RCXVDA=RCXVDA_RCXVU_$P(VADM(10),U,2) ;Marital Status
"RTN","RCXVDC2",42,0)
 ;means test data
"RTN","RCXVDC2",43,0)
 F RCMTYP=1,2,3,4 D:$D(^DGMT(408.31,"AID",RCMTYP,DFN))
"RTN","RCXVDC2",44,0)
 . S PC3=RCMTYP*3,PC2=PC3-1,PC1=PC3-2
"RTN","RCXVDC2",45,0)
 . S RCMTDT=$O(^DGMT(408.31,"AID",RCMTYP,DFN,-9999999))
"RTN","RCXVDC2",46,0)
 . S RCMTDA=$O(^DGMT(408.31,"AID",RCMTYP,DFN,RCMTDT,0)) Q:'RCMTDA
"RTN","RCXVDC2",47,0)
 . S RCXVDT=-RCMTDT
"RTN","RCXVDC2",48,0)
 . S $P(RCXVD3,U,PC1)=$E($$HLDATE^HLFNC(RCXVDT),1,8) ;Test Date
"RTN","RCXVDC2",49,0)
 . S $P(RCXVD3,U,PC2)=$$GET1^DIQ(408.31,RCMTDA_",",.03,"E") ;Test Status
"RTN","RCXVDC2",50,0)
 . S $P(RCXVD3,U,PC3)=$P($G(^DGMT(408.31,RCMTDA,0)),U,4) ;Income
"RTN","RCXVDC2",51,0)
 . Q
"RTN","RCXVDC2",52,0)
 S ^TMP($J,RCXVBLN,"2-2A")=RCXVDA
"RTN","RCXVDC2",53,0)
 S ^TMP($J,RCXVBLN,"2-2B")=RCXVD3
"RTN","RCXVDC2",54,0)
 Q
"RTN","RCXVDC2",55,0)
 ;
"RTN","RCXVDC3")
0^4^B25730617
"RTN","RCXVDC3",1,0)
RCXVDC3 ;DAOU/ALA-AR Data Extraction Data Creation ;02-JUL-03
"RTN","RCXVDC3",2,0)
 ;;4.5;Accounts Receivable;**201,227,228**;Mar 20, 1995
"RTN","RCXVDC3",3,0)
 ;
"RTN","RCXVDC3",4,0)
 ; CLAIMS (# 399)
"RTN","RCXVDC3",5,0)
 Q
"RTN","RCXVDC3",6,0)
D399 ;
"RTN","RCXVDC3",7,0)
 NEW RCXVD,RCXVBC,RCXVDT,RCXVD1,RCXVD2,RCXVD3
"RTN","RCXVDC3",8,0)
 NEW RCXVD4,RCXVD5,RCXVD6,RCXVD7,RCXVDA,RCXVDB,RCXVDC,RCXVDD
"RTN","RCXVDC3",9,0)
 NEW RCXVP1,RCXVP2,RCXVD0C,RCXVP3,RCXVP4,RCXVP5,RCXVCFL,RCXVPAY
"RTN","RCXVDC3",10,0)
 NEW RCXVINS,RCXVVAN,RCXVDRG,RCXVCAN,RCXVREJ,IBD,X1,X2
"RTN","RCXVDC3",11,0)
 ;
"RTN","RCXVDC3",12,0)
 I $P(RCXVBLNA,"-",2)="" Q
"RTN","RCXVDC3",13,0)
 S RCXVD0=$O(^DGCR(399,"B",$P(RCXVBLNA,"-",2),""))
"RTN","RCXVDC3",14,0)
 I RCXVD0="" Q
"RTN","RCXVDC3",15,0)
 S RCXVD1=$G(^DGCR(399,RCXVD0,0))
"RTN","RCXVDC3",16,0)
 I $G(DFN)="" S DFN=$P(RCXVD1,U,2)
"RTN","RCXVDC3",17,0)
 S RCXVD2=$G(^DGCR(399,RCXVD0,"S"))
"RTN","RCXVDC3",18,0)
 S RCXVD3=$G(^DGCR(399,RCXVD0,"U"))
"RTN","RCXVDC3",19,0)
 S RCXVD7=$G(^DGCR(399,RCXVD0,"TX"))
"RTN","RCXVDC3",20,0)
 S RCXVDA=$P(RCXVD1,U,1) ; BILL #
"RTN","RCXVDC3",21,0)
 S (RCXVEVDT,RCXVDT)=$P($P(RCXVD1,U,3),".",1)
"RTN","RCXVDC3",22,0)
 ;S RCXVDA=RCXVBLNB_RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; EVNT DT
"RTN","RCXVDC3",23,0)
 S RCXVDA=RCXVBLNA_RCXVU_$P(^DPT(DFN,0),U,9) ; SSN
"RTN","RCXVDC3",24,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; EVNT DT
"RTN","RCXVDC3",25,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD1,U,5) ; BILL CLASS
"RTN","RCXVDC3",26,0)
 S RCXVP1=$P(RCXVD1,U,7),RCXVP2=""
"RTN","RCXVDC3",27,0)
 I RCXVP1'="" S RCXVP2=$P($G(^DGCR(399.3,RCXVP1,0)),U,1)
"RTN","RCXVDC3",28,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVP2 ; RATE TYPE (P) 
"RTN","RCXVDC3",29,0)
 S RCXVP1=$P(RCXVD2,U,11),RCXVP2=""
"RTN","RCXVDC3",30,0)
 I RCXVP1'="" S RCXVP2=$P($G(^VA(200,RCXVP1,2,0)),U,1)_RCXVP1 ; SITE_IEN
"RTN","RCXVDC3",31,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVSITE_RCXVP2 ; Authorizer (P)
"RTN","RCXVDC3",32,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD1,U,13) ; Stat 
"RTN","RCXVDC3",33,0)
 S RCXVDT=$P(RCXVD1,U,14)
"RTN","RCXVDC3",34,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; Stat DT
"RTN","RCXVDC3",35,0)
 S RCXVP1=$P(RCXVD1,U,22),RCXVP2=""
"RTN","RCXVDC3",36,0)
 I RCXVP1'="" S RCXVP2=$P($G(^DG(40.8,RCXVP1,0)),U,2)
"RTN","RCXVDC3",37,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVP2 ; Default divison
"RTN","RCXVDC3",38,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD1,U,24) ; UB92 Location
"RTN","RCXVDC3",39,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD1,U,27) ; Bill Chrg type
"RTN","RCXVDC3",40,0)
 S RCXVDT=$P(RCXVD2,U,10)
"RTN","RCXVDC3",41,0)
 S RCXVDB=$E($$HLDATE^HLFNC(RCXVDT),1,8) ; Auth. DT
"RTN","RCXVDC3",42,0)
 S RCXVDT=$P(RCXVD2,U,12)
"RTN","RCXVDC3",43,0)
 S RCXVDB=RCXVDB_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT 1st printd
"RTN","RCXVDC3",44,0)
 S (RCXVP1,RCXVD0C)=$P($G(^DGCR(399,RCXVD0,"M")),U,1),RCXVP2=""
"RTN","RCXVDC3",45,0)
 I RCXVP1'="" S RCXVP2=$P($G(^DIC(36,RCXVP1,0)),U,1)
"RTN","RCXVDC3",46,0)
 S RCXVDB=RCXVDB_RCXVU_RCXVP2 ; PRIM. INSR (P)
"RTN","RCXVDC3",47,0)
 ;
"RTN","RCXVDC3",48,0)
 ; Type of Plan
"RTN","RCXVDC3",49,0)
 S RCXVP2="",RCXVI=0,RCXVP3="",RCXVP4="",RCXVP5=""
"RTN","RCXVDC3",50,0)
 S IBD=$$IBAREXT^IBRFN4(RCXVD0,.IBD)
"RTN","RCXVDC3",51,0)
 S RCXVP2=$P(IBD("IN"),U),RCXVP5=$P(IBD("IN"),U,2),RCXVP3=$P(IBD("IN"),U,3),RCXVP4=$P(IBD("IN"),U,4)
"RTN","RCXVDC3",52,0)
 S RCXVDB=RCXVDB_RCXVU_RCXVP2_RCXVU_RCXVP5_RCXVU_RCXVP3_RCXVU_RCXVP4,RCXVD5="",RCXVD6=""
"RTN","RCXVDC3",53,0)
 ; 
"RTN","RCXVDC3",54,0)
 ; 36, 36.3 ADDRESS/EDI
"RTN","RCXVDC3",55,0)
 I RCXVD0C S RCXVD5=$G(^DIC(36,RCXVD0C,.11))
"RTN","RCXVDC3",56,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD5,U,1) ; STRT ADD 1 
"RTN","RCXVDC3",57,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD5,U,2) ; STRT ADD 2
"RTN","RCXVDC3",58,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD5,U,4) ; CITY
"RTN","RCXVDC3",59,0)
 S RCXVP1=$P(RCXVD5,U,5),RCXVP2=""
"RTN","RCXVDC3",60,0)
 I RCXVP1'="" S RCXVP2=$P($G(^DIC(5,RCXVP1,0)),U,1)
"RTN","RCXVDC3",61,0)
 S RCXVDB=RCXVDB_RCXVU_RCXVP2 ; STATE (P)
"RTN","RCXVDC3",62,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD5,U,6) ; ZIP
"RTN","RCXVDC3",63,0)
 I RCXVD0C'="" S RCXVD6=$G(^DIC(36,RCXVD0C,3))
"RTN","RCXVDC3",64,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD6,U,2) ; EDI - PROF
"RTN","RCXVDC3",65,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD6,U,4) ; EDI - INST
"RTN","RCXVDC3",66,0)
 S RCXVDB=RCXVDB_RCXVU_$$GET1^DIQ(36,RCXVD0C_",",1,"I") ; REIMBURSE?
"RTN","RCXVDC3",67,0)
 ;
"RTN","RCXVDC3",68,0)
 S RCXVPFDT=$P(RCXVD3,U,1)
"RTN","RCXVDC3",69,0)
 S RCXVDC=$$HLDATE^HLFNC(RCXVPFDT) ; STMT COVERS FROM
"RTN","RCXVDC3",70,0)
 S RCXVPTDT=$P(RCXVD3,U,2)
"RTN","RCXVDC3",71,0)
 S RCXVDC=RCXVDC_RCXVU_$$HLDATE^HLFNC(RCXVPTDT) ; STMT COVERS TO
"RTN","RCXVDC3",72,0)
 S RCXVP1=$P(RCXVD3,U,11),RCXVP2=""
"RTN","RCXVDC3",73,0)
 I RCXVP1'="" S RCXVP2=$P($G(^DGCR(399.1,RCXVP1,0)),U,1)
"RTN","RCXVDC3",74,0)
 S RCXVDC=RCXVDC_RCXVU_RCXVP2 ; DISCH. BED SEC.
"RTN","RCXVDC3",75,0)
 S RCXVD4=$G(^DGCR(399,RCXVD0,"U1"))
"RTN","RCXVDC3",76,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD4,U,1) ; TOT CHRG
"RTN","RCXVDC3",77,0)
 S RCXVDC=RCXVDC_RCXVU_$P(RCXVD4,U,2) ; OFFSET AMT
"RTN","RCXVDC3",78,0)
 ;
"RTN","RCXVDC3",79,0)
 S RCXVP1=$P($G(^DGCR(399,RCXVD0,"U2")),U,10),RCXVP2=""
"RTN","RCXVDC3",80,0)
 I RCXVP1'="" S RCXVP2=$P($G(^IBA(355.93,RCXVP1,0)),U,1)
"RTN","RCXVDC3",81,0)
 S RCXVDC=RCXVDC_RCXVU_RCXVP2 ; NON VA FAC (P)
"RTN","RCXVDC3",82,0)
 ;
"RTN","RCXVDC3",83,0)
 ;  Get VACARE or NONVACARE flag
"RTN","RCXVDC3",84,0)
 NEW RCXVIEN
"RTN","RCXVDC3",85,0)
 D CARE^RCXVUTIL(RCXVD0)
"RTN","RCXVDC3",86,0)
 S RCXVDC=RCXVDC_RCXVU_$S(RCXVCFL=1:"VACARE",1:"NONVACARE")
"RTN","RCXVDC3",87,0)
 ;  MRA data
"RTN","RCXVDC3",88,0)
 S RCXVDT=$P(IBD,U,2)
"RTN","RCXVDC3",89,0)
 S RCXVDD=$E($$HLDATE^HLFNC(RCXVDT),1,8) ; MRA Requested DT
"RTN","RCXVDC3",90,0)
 S RCXVDT=$P(IBD,U,3)
"RTN","RCXVDC3",91,0)
 S RCXVDD=RCXVDD_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ;Last Electronic Extract Date
"RTN","RCXVDC3",92,0)
 S RCXVDD=RCXVDD_RCXVU_$P(IBD,U,4) ;Printed VIA EDI
"RTN","RCXVDC3",93,0)
 S RCXVDD=RCXVDD_RCXVU_$P(IBD,U,5) ;Force Claim To Print
"RTN","RCXVDC3",94,0)
 S RCXVDD=RCXVDD_RCXVU_$P(IBD,U,6) ;Claim MRA Status
"RTN","RCXVDC3",95,0)
 S RCXVDT=$P(IBD,U,7)
"RTN","RCXVDC3",96,0)
 S RCXVDD=RCXVDD_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ;MRA Recorded Date
"RTN","RCXVDC3",97,0)
 S RCXVDT=$P(IBD,U,8)
"RTN","RCXVDC3",98,0)
 S RCXVDD=RCXVDD_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ;Date Cancelled
"RTN","RCXVDC3",99,0)
 S RCXVDD=RCXVDD_RCXVU_$P(IBD,U,9) ;Form Type
"RTN","RCXVDC3",100,0)
 S RCXVDD=RCXVDD_RCXVU_$P(IBD,U,16)_RCXVU_$P(IBD,U,15) ;PAYER&VA NAT.ID #
"RTN","RCXVDC3",101,0)
 S RCXVDRG=$P(IBD,U,11)
"RTN","RCXVDC3",102,0)
 S RCXVDD=RCXVDD_RCXVU_RCXVDRG ;DRG
"RTN","RCXVDC3",103,0)
 S RCXVREJ=""
"RTN","RCXVDC3",104,0)
 ;I $P(IBD,U) S RCXVREJ=$P(IBD,U,14),RCXVREJ=$S(RCXVREJ=0:"NO",1:"YES")
"RTN","RCXVDC3",105,0)
 S RCXVDD=RCXVDD_RCXVU_RCXVREJ
"RTN","RCXVDC3",106,0)
 S RCXVDD=RCXVDD_RCXVU_$P($P(IBD,U,12),";") ;ECME #
"RTN","RCXVDC3",107,0)
 S ^TMP($J,RCXVBLN,"3-399A")=RCXVDA
"RTN","RCXVDC3",108,0)
 S ^TMP($J,RCXVBLN,"3-399B")=RCXVDB
"RTN","RCXVDC3",109,0)
 S ^TMP($J,RCXVBLN,"3-399C")=RCXVDC
"RTN","RCXVDC3",110,0)
 S ^TMP($J,RCXVBLN,"3-399D")=RCXVDD
"RTN","RCXVDC3",111,0)
 Q
"RTN","RCXVDC3",112,0)
 ;
"RTN","RCXVDC3",113,0)
REJ() ;Checks for reject on a claim
"RTN","RCXVDC3",114,0)
 S X="NO"
"RTN","RCXVDC3",115,0)
 S X1=$P(RCXVD1,U,15) S D0=RCXVD0
"RTN","RCXVDC3",116,0)
 F  D  G REJQ:'D0
"RTN","RCXVDC3",117,0)
 . S I=0 F  S I=$O(^IBM(361,"B",D0,I)) Q:'I  D  Q:'D0
"RTN","RCXVDC3",118,0)
   ..S X2=$P($G(^IBM(361,I,0)),U,3)
"RTN","RCXVDC3",119,0)
   ..I X2="R" S X="YES",D0=""
"RTN","RCXVDC3",120,0)
   ..Q
"RTN","RCXVDC3",121,0)
 .I X="YES" Q
"RTN","RCXVDC3",122,0)
 .I X1=D0 S D0="" Q
"RTN","RCXVDC3",123,0)
 .S D0=X1 Q:'D0  S X1=$P($G(^DGCR(399,X1,0)),U,15)
"RTN","RCXVDC3",124,0)
 .Q
"RTN","RCXVDC3",125,0)
 K I
"RTN","RCXVDC3",126,0)
REJQ Q X
"RTN","RCXVDC3",127,0)
 ;
"RTN","RCXVDC4")
0^5^B9709344
"RTN","RCXVDC4",1,0)
RCXVDC4 ;DAOU/ALA-AR Data Extraction Data Creation ;02-JUL-03
"RTN","RCXVDC4",2,0)
 ;;4.5;Accounts Receivable;**201,227,228**;Mar 20, 1995
"RTN","RCXVDC4",3,0)
 ;
"RTN","RCXVDC4",4,0)
 ; Procedures 
"RTN","RCXVDC4",5,0)
 Q
"RTN","RCXVDC4",6,0)
D399PC ;
"RTN","RCXVDC4",7,0)
 I RCXVD0="" Q
"RTN","RCXVDC4",8,0)
 N RCXVD,RCXVDA,RCXVB,RCXVPC,RCXVP1,RCXVP2,RCXVP3,RCXVMULT
"RTN","RCXVDC4",9,0)
 N RCXVDT3,RCXVCP,RCXVPCDT,RCXVPS1,RCXVPS2,RCXVPS,RCXVPSER
"RTN","RCXVDC4",10,0)
 ; RCXVPC=PROC. CODE IEN, RCXVCP=CPT CODE IEN
"RTN","RCXVDC4",11,0)
 ; LOOP THRU PROC.
"RTN","RCXVDC4",12,0)
 S RCXVPC=0
"RTN","RCXVDC4",13,0)
 F  S RCXVPC=$O(^DGCR(399,RCXVD0,"CP",RCXVPC)) Q:'RCXVPC  D D399PCA
"RTN","RCXVDC4",14,0)
 Q
"RTN","RCXVDC4",15,0)
D399PCA ;
"RTN","RCXVDC4",16,0)
 S RCXVD=$G(^DGCR(399,RCXVD0,"CP",RCXVPC,0)) Q:RCXVD=""
"RTN","RCXVDC4",17,0)
 S RCXVP1=$P(RCXVD,U,1),RCXVVP="",RCXVVP1=""
"RTN","RCXVDC4",18,0)
 I RCXVP1'="" S RCXVVP="^"_$P(RCXVP1,";",2)_$P(RCXVP1,";",1)_",0)"
"RTN","RCXVDC4",19,0)
 I RCXVVP'="" S RCXVVP1=$P($G(@RCXVVP),U,1) I RCXVVP1="" D
"RTN","RCXVDC4",20,0)
 . NEW CT
"RTN","RCXVDC4",21,0)
 . S CT=$G(^TMP("RCXVBREC",$J,0))+1,^TMP("RCXVBREC",$J,0)=CT
"RTN","RCXVDC4",22,0)
 . S ^TMP("RCXVBREC",$J,CT,0)="Bill # "_$P($G(^DGCR(399,RCXVD0,0)),"^",1)_" has a bad CPT code at IEN # "_RCXVPC_" check ^DGCR(399,"_RCXVD0_",""CP"","_RCXVPC_",0)"
"RTN","RCXVDC4",23,0)
 S RCXVDA=RCXVBLNA_RCXVU_RCXVVP1 ; PROC.
"RTN","RCXVDC4",24,0)
 S RCXVDT=$P(RCXVD,U,2)
"RTN","RCXVDC4",25,0)
 S RCXVPCDT=$E($$HLDATE^HLFNC(RCXVDT),1,8)
"RTN","RCXVDC4",26,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVPCDT ; DT 
"RTN","RCXVDC4",27,0)
 S RCXVP1=$P(RCXVD,U,11),RCXVP2=""
"RTN","RCXVDC4",28,0)
 I RCXVP1'="" S RCXVP1=$P($G(^IBA(362.3,RCXVP1,0)),U,1)
"RTN","RCXVDC4",29,0)
 I RCXVP1'="" S RCXVP2=$P($G(^ICD9(RCXVP1,0)),U,1)
"RTN","RCXVDC4",30,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVP2 ; ASSOC DXN (1)
"RTN","RCXVDC4",31,0)
 S RCXVP1=$P(RCXVD,U,7),RCXVP2=""
"RTN","RCXVDC4",32,0)
 I RCXVP1'="" S RCXVP2=$P($G(^SC(RCXVP1,0)),U,1)
"RTN","RCXVDC4",33,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVP2 ; ASSC. CLNC (P) 
"RTN","RCXVDC4",34,0)
 S RCXVP1=$P(RCXVD,U,18),(RCXVP2,RCXVPS,RCXVPSER)=""
"RTN","RCXVDC4",35,0)
 I RCXVP1'="" S RCXVP2=$$GET1^DIQ(200,RCXVP1_",",.01,"E") D
"RTN","RCXVDC4",36,0)
 . S RCXVPS=$$GET^XUA4A72(RCXVP1,RCXVDT)
"RTN","RCXVDC4",37,0)
 . S RCXVPS=$P(RCXVPS,U,3)
"RTN","RCXVDC4",38,0)
 . S RCXVPSER=$$GET1^DIQ(200,RCXVP1_",",29,"E")
"RTN","RCXVDC4",39,0)
 . Q
"RTN","RCXVDC4",40,0)
 ;provider^specialty^service/section
"RTN","RCXVDC4",41,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVP2_RCXVU_RCXVPS_RCXVU_RCXVPSER
"RTN","RCXVDC4",42,0)
 S ^TMP($J,RCXVBLN,"4-399A",RCXVPC)=RCXVDA
"RTN","RCXVDC4",43,0)
 ; LOOP THRU CPT
"RTN","RCXVDC4",44,0)
 S RCXVCP=0,RCXVMULT=0
"RTN","RCXVDC4",45,0)
 F  S RCXVCP=$O(^DGCR(399,RCXVD0,"CP",RCXVPC,"MOD",RCXVCP)) Q:'RCXVCP  D
"RTN","RCXVDC4",46,0)
 .  Q:'($D(^DGCR(399,RCXVD0,"CP",RCXVPC,"MOD",RCXVCP,0)))
"RTN","RCXVDC4",47,0)
 . ; ^DGCR(399,D0,CP,D1,MOD,D2,0)= (#.01) CPT MODIFIER SEQUENCE [1N]
"RTN","RCXVDC4",48,0)
 . ; (#.02) CPT ==>MODIFIER [2P:81.3]
"RTN","RCXVDC4",49,0)
 . S RCXVP1=$P($G(^DGCR(399,RCXVD0,"CP",RCXVPC,"MOD",RCXVCP,0)),U,2)
"RTN","RCXVDC4",50,0)
 . Q:RCXVP1=""
"RTN","RCXVDC4",51,0)
 . S RCXVMULT=RCXVMULT+1
"RTN","RCXVDC4",52,0)
 . S RCXVP2=$P($G(^DIC(81.3,RCXVP1,0)),U,1)
"RTN","RCXVDC4",53,0)
 . S ^TMP($J,RCXVBLN,"4-399A",RCXVPC,RCXVMULT)=RCXVP2
"RTN","RCXVDC4",54,0)
 . Q
"RTN","RCXVDC4",55,0)
D39942 ; CHARGES FROM 399.042
"RTN","RCXVDC4",56,0)
 ; LOOP THRU 399.042
"RTN","RCXVDC4",57,0)
 N X
"RTN","RCXVDC4",58,0)
 S RCXVD1=$G(^DGCR(399,RCXVD0,"RC",RCXVPC,0))
"RTN","RCXVDC4",59,0)
 I RCXVD1="" Q
"RTN","RCXVDC4",60,0)
 S X=$P(RCXVD1,U)
"RTN","RCXVDC4",61,0)
 S RCXVDB=RCXVBLNA_RCXVU_$$GET1^DIQ(399.2,X_",",.01,"E") ; Revenue Code
"RTN","RCXVDC4",62,0)
 S X=$P(RCXVD1,U,6)
"RTN","RCXVDC4",63,0)
 S RCXVDB=RCXVDB_RCXVU_$$GET1^DIQ(81,X_",",.01,"E") ; Procedures [P]
"RTN","RCXVDC4",64,0)
 S RCXVDB=RCXVDB_RCXVU_RCXVPCDT ; PROC. DT
"RTN","RCXVDC4",65,0)
 S RCXVDB=RCXVDB_RCXVU_$P(RCXVD1,U,2) ; Charges
"RTN","RCXVDC4",66,0)
 S ^TMP($J,RCXVBLN,"4-399B",RCXVPC)=RCXVDB
"RTN","RCXVDC4",67,0)
 Q
"RTN","RCXVDC4",68,0)
 ;
"RTN","RCXVDC5")
0^7^B11220375
"RTN","RCXVDC5",1,0)
RCXVDC5 ;DAOU/ALA-AR Data Extraction Data Creation ;02-JUL-03
"RTN","RCXVDC5",2,0)
 ;;4.5;Accounts Receivable;**201,227,228**;Mar 20, 1995
"RTN","RCXVDC5",3,0)
 ;
"RTN","RCXVDC5",4,0)
 ; Integrated Billing Action File (# 350) 
"RTN","RCXVDC5",5,0)
 Q
"RTN","RCXVDC5",6,0)
D350 ; 
"RTN","RCXVDC5",7,0)
 NEW RCXVD,RCXVDA,RCXVDB,RCXVD0A,RCXVDT,RCXVP1,RCXVP2,RCXVPC,RCT
"RTN","RCXVDC5",8,0)
 S RCXVD0A="",RCT=0
"RTN","RCXVDC5",9,0)
 F  S RCXVD0A=$O(^IB("ABIL",RCXVBLNA,RCXVD0A)) Q:RCXVD0A=""  D
"RTN","RCXVDC5",10,0)
 . S RCXVD=$G(^IB(RCXVD0A,0))
"RTN","RCXVDC5",11,0)
 . I $G(DFN)="" S DFN=$P(RCXVD,U,2)
"RTN","RCXVDC5",12,0)
 . ;
"RTN","RCXVDC5",13,0)
 . S RCXVDA=RCXVBLNA_RCXVU_$P(RCXVD,U,1)
"RTN","RCXVDC5",14,0)
 . S RCXVDA=RCXVDA_RCXVU_$$GET1^DIQ(350,RCXVD0A_",",.05,"E")
"RTN","RCXVDC5",15,0)
 . S RCXVP1=$P(RCXVD,U,3),RCXVP2=""
"RTN","RCXVDC5",16,0)
 . I RCXVP1'="" S RCXVP2=$P($G(^IBE(350.1,RCXVP1,0)),U,1)
"RTN","RCXVDC5",17,0)
 . S RCXVDA=RCXVDA_RCXVU_RCXVP2 ; ACTION TYPE (P)
"RTN","RCXVDC5",18,0)
 . S RCXVDA=RCXVDA_RCXVU_$P(RCXVD,U,6) ; UNITS
"RTN","RCXVDC5",19,0)
 . S RCXVDA=RCXVDA_RCXVU_$P(RCXVD,U,7) ; TOTAL CHARGE
"RTN","RCXVDC5",20,0)
 . S RCXVDT=$P(RCXVD,U,14)
"RTN","RCXVDC5",21,0)
 . S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT BILLD FROM
"RTN","RCXVDC5",22,0)
 . S RCXVDT=$P(RCXVD,U,15)
"RTN","RCXVDC5",23,0)
 . S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT BILLD TO
"RTN","RCXVDC5",24,0)
 . S RCXVDA=RCXVDA_RCXVU_$P(RCXVD,U,11) ; AR BILL #
"RTN","RCXVDC5",25,0)
 . S RCXVDT=$P($P($G(^IB(RCXVD0A,1)),U,2),".",1)
"RTN","RCXVDC5",26,0)
 . S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT ENTRY ADDED
"RTN","RCXVDC5",27,0)
 . S RCXVDA=RCXVDA_RCXVU_$P($G(^DPT(DFN,0)),U,9) ; SSN
"RTN","RCXVDC5",28,0)
 . S RCXVDT=$P(RCXVD,U,17)
"RTN","RCXVDC5",29,0)
 . S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; EVENT DT
"RTN","RCXVDC5",30,0)
 . S RCXVDT=$$PRESC($P(RCXVD,U,4))
"RTN","RCXVDC5",31,0)
 . S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ;FILL/REFILL DATE
"RTN","RCXVDC5",32,0)
 . S RCXVDA=RCXVDA_RCXVU_$$SITE(RCXVD0A,1) ;DIVISION WHERE CARE RENDERED
"RTN","RCXVDC5",33,0)
 . S RCT=RCT+1
"RTN","RCXVDC5",34,0)
 . S ^TMP($J,RCXVBLN,"5-350A",RCT)=RCXVDA
"RTN","RCXVDC5",35,0)
 Q
"RTN","RCXVDC5",36,0)
 ;
"RTN","RCXVDC5",37,0)
PRESC(RCPC4) ;Calculates prescription fill/refill date
"RTN","RCXVDC5",38,0)
 ; Input is resulting from field (4th piece of 0 node) in 350
"RTN","RCXVDC5",39,0)
 ; Output is fill/refill date in fileman format
"RTN","RCXVDC5",40,0)
 N RCRXN,RCRF,RCENS,RCPRDT
"RTN","RCXVDC5",41,0)
 S RCPRDT=""
"RTN","RCXVDC5",42,0)
 I $P(RCPC4,":")'=52 Q RCPRDT
"RTN","RCXVDC5",43,0)
 S RCRXN=+$P(RCPC4,":",2),RCRF=$P(RCPC4,":",3)
"RTN","RCXVDC5",44,0)
 I RCRF>0 S RCENS=+RCRF_","_+RCRXN_",",RCPRDT=$$GET1^DIQ(52.1,RCENS,.17,"I"),RCPRDT=$P(RCPRDT,".")
"RTN","RCXVDC5",45,0)
 E  S RCENS=+RCRXN_",",RCPRDT=$$GET1^DIQ(52,RCENS,31,"I"),RCPRDT=$P(RCPRDT,".")
"RTN","RCXVDC5",46,0)
 Q RCPRDT
"RTN","RCXVDC5",47,0)
SITE(IIEN,FLG) ;  Find the Care Site for Co-Pays
"RTN","RCXVDC5",48,0)
 ;  Input Parameters
"RTN","RCXVDC5",49,0)
 ;    IIEN = Internal Entry Number for IB ACTION #350
"RTN","RCXVDC5",50,0)
 ;    FLG = 1=Division Name,2=Facility Number
"RTN","RCXVDC5",51,0)
 ;
"RTN","RCXVDC5",52,0)
 NEW VDIV,VFAC,VWIEN,VWFIL,VVIS,VLOC,VWARD,VLVAL,VWHER
"RTN","RCXVDC5",53,0)
 S VWHER=$P(^IB(IIEN,0),U,4)
"RTN","RCXVDC5",54,0)
 ;
"RTN","RCXVDC5",55,0)
 I VWHER="" Q ""
"RTN","RCXVDC5",56,0)
 ;
"RTN","RCXVDC5",57,0)
 S VWFIL=$P(VWHER,":",1),VWIEN=$P(VWHER,":",2)
"RTN","RCXVDC5",58,0)
 I VWIEN[";" S VWIEN=$P(VWIEN,";",1)
"RTN","RCXVDC5",59,0)
 ;
"RTN","RCXVDC5",60,0)
 S VLVAL=""
"RTN","RCXVDC5",61,0)
MV I VWFIL=405 D
"RTN","RCXVDC5",62,0)
 . I VWIEN="" Q
"RTN","RCXVDC5",63,0)
 . S VWARD=$P($G(^DGPM(VWIEN,0)),U,6)
"RTN","RCXVDC5",64,0)
 . I VWARD="" Q
"RTN","RCXVDC5",65,0)
 . S VLOC=$P($G(^DIC(42,VWARD,44)),U,1)
"RTN","RCXVDC5",66,0)
 . I VLOC="" Q
"RTN","RCXVDC5",67,0)
 . S VDIV=$P($G(^SC(VLOC,0)),U,15)
"RTN","RCXVDC5",68,0)
 . I VDIV="" Q
"RTN","RCXVDC5",69,0)
 . D VLU
"RTN","RCXVDC5",70,0)
 ;
"RTN","RCXVDC5",71,0)
OP I VWFIL=409.68 D
"RTN","RCXVDC5",72,0)
 . S VLOC=$P($G(^SCE(VWIEN,0)),U,4)
"RTN","RCXVDC5",73,0)
 . I VLOC="" D
"RTN","RCXVDC5",74,0)
 .. S VVIS=$P($G(^SCE(VWIEN,0)),U,5)
"RTN","RCXVDC5",75,0)
 .. I VVIS="" Q
"RTN","RCXVDC5",76,0)
 .. S VLOC=$P($G(^AUPNVSIT(VVIS,0)),U,22)
"RTN","RCXVDC5",77,0)
 . I VLOC="" Q
"RTN","RCXVDC5",78,0)
 . S VDIV=$P($G(^SC(VLOC,0)),U,15)
"RTN","RCXVDC5",79,0)
 . I VDIV="" Q
"RTN","RCXVDC5",80,0)
 . D VLU
"RTN","RCXVDC5",81,0)
 ;
"RTN","RCXVDC5",82,0)
RX I VWFIL=52 D
"RTN","RCXVDC5",83,0)
 . S VLOC=$$GET1^DIQ(52,VWIEN_",",5,"I")
"RTN","RCXVDC5",84,0)
 . I VLOC="" Q
"RTN","RCXVDC5",85,0)
 . S VDIV=$P($G(^SC(VLOC,0)),U,15)
"RTN","RCXVDC5",86,0)
 . I VDIV="" Q
"RTN","RCXVDC5",87,0)
 . D VLU
"RTN","RCXVDC5",88,0)
 ;
"RTN","RCXVDC5",89,0)
LC I VWFIL=44 D
"RTN","RCXVDC5",90,0)
 . S VDIV=$P($G(^SC(VWIEN,0)),U,15)
"RTN","RCXVDC5",91,0)
 . I VDIV="" Q
"RTN","RCXVDC5",92,0)
 . D VLU
"RTN","RCXVDC5",93,0)
 ;
"RTN","RCXVDC5",94,0)
IB I VWFIL=350 D
"RTN","RCXVDC5",95,0)
 . S VFAC=$P($G(^IB(VWIEN,0)),U,13)
"RTN","RCXVDC5",96,0)
 . I VFAC="" Q
"RTN","RCXVDC5",97,0)
 . S VDIV=$O(^DG(40.8,"C",VFAC,""))
"RTN","RCXVDC5",98,0)
 . I VDIV="" Q
"RTN","RCXVDC5",99,0)
 . D VLU
"RTN","RCXVDC5",100,0)
 ;
"RTN","RCXVDC5",101,0)
 Q VLVAL
"RTN","RCXVDC5",102,0)
 ;
"RTN","RCXVDC5",103,0)
VLU I FLG=1 S VLVAL=$P(^DG(40.8,VDIV,0),U,1)
"RTN","RCXVDC5",104,0)
 I FLG=2 S VLVAL=$P(^DG(40.8,VDIV,0),U,2)
"RTN","RCXVDC5",105,0)
 Q
"RTN","RCXVDC6")
0^6^B6605211
"RTN","RCXVDC6",1,0)
RCXVDC6 ;DAOU/ALA-AR Data Extraction Data Creation ;02-JUL-03
"RTN","RCXVDC6",2,0)
 ;;4.5;Accounts Receivable;**201,227,228**;Mar 20, 1995
"RTN","RCXVDC6",3,0)
 ;
"RTN","RCXVDC6",4,0)
 ; Accounts Recv. Trans. File (# 433) 
"RTN","RCXVDC6",5,0)
 Q
"RTN","RCXVDC6",6,0)
D433 ; 
"RTN","RCXVDC6",7,0)
 K ^TMP($J,RCXVBLN,"6-433A")
"RTN","RCXVDC6",8,0)
 N X,Y
"RTN","RCXVDC6",9,0)
 ; LOOP THRU(^PRCA(433,"C",RCXVBLN)
"RTN","RCXVDC6",10,0)
 ;
"RTN","RCXVDC6",11,0)
 ;  If the current fiscal year flag is set, must loop for
"RTN","RCXVDC6",12,0)
 ;  all the transactions since the beginning of the fiscal year
"RTN","RCXVDC6",13,0)
 I $G(RCXVCFLG)=1 S RCXVBDT=RCXVFFD
"RTN","RCXVDC6",14,0)
 NEW RCXVD,RCXVDA,RCXVDT,RCXVI,RCXVP1,RCXVP2,RCXVD0B,RCX
"RTN","RCXVDC6",15,0)
 S RCXVD0B=""
"RTN","RCXVDC6",16,0)
 F RCXVI=1:1 S RCXVD0B=$O(^PRCA(433,"C",RCXVBLN,RCXVD0B)) Q:RCXVD0B=""  D D433A
"RTN","RCXVDC6",17,0)
 Q
"RTN","RCXVDC6",18,0)
D433A ;
"RTN","RCXVDC6",19,0)
 S RCXVD=$G(^PRCA(433,RCXVD0B,1))
"RTN","RCXVDC6",20,0)
 S RCXVP1=$P($G(^PRCA(433,RCXVD0B,0)),U,2),RCXVP2=""
"RTN","RCXVDC6",21,0)
 I RCXVP1'="" S RCXVP2=$P($G(^PRCA(430,RCXVP1,0)),U,1)
"RTN","RCXVDC6",22,0)
 S RCXVDA=RCXVP2 ; BILL NUMBER (P) 
"RTN","RCXVDC6",23,0)
 S RCXVDA=RCXVDA_RCXVU_$P($G(^PRCA(433,RCXVD0B,0)),U,1) ; TRANS. #
"RTN","RCXVDC6",24,0)
 S RCXVDT=$P(RCXVD,U,9)
"RTN","RCXVDC6",25,0)
 I RCXVDT<RCXVBDT Q  ;QUIT IF DATE ENTERED IS OLDER THAN BATCH DATE
"RTN","RCXVDC6",26,0)
 S RCXVDT=$P(RCXVD,U)
"RTN","RCXVDC6",27,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; TRANS. DT
"RTN","RCXVDC6",28,0)
 S RCXVP1=$P(RCXVD,U,2),RCXVP2=""
"RTN","RCXVDC6",29,0)
 I RCXVP1'="",+$P($G(^PRCA(430.3,RCXVP1,0)),U,6)=0 Q
"RTN","RCXVDC6",30,0)
 I RCXVP1'="" S RCXVP2=$P($G(^PRCA(430.3,RCXVP1,0)),U,1)
"RTN","RCXVDC6",31,0)
 S RCXVDA=RCXVDA_RCXVU_RCXVP2 ; TRANS TYPE (P)
"RTN","RCXVDC6",32,0)
 S RCXVDT=$P(RCXVD,U,9)
"RTN","RCXVDC6",33,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT ENTRD
"RTN","RCXVDC6",34,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD,U,5) ; TRANS AMT
"RTN","RCXVDC6",35,0)
 S RCXVDA=RCXVDA_RCXVU_$$GET1^DIQ(433,RCXVD0B_",",88,"E") ; CONT. ADJ.
"RTN","RCXVDC6",36,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD,U,3) ;RECEIPT NUMBER
"RTN","RCXVDC6",37,0)
 S RCXVDT=$P(RCXVD,U,1)
"RTN","RCXVDC6",38,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ; DT OF PAYMENT
"RTN","RCXVDC6",39,0)
 S RCX=0,RCXVDT=""
"RTN","RCXVDC6",40,0)
 F  S RCX=$O(^PRCA(433,RCXVD0B,7,RCX)) Q:'RCX  S X=$G(^(RCX,0)) Q:RCXVDT  D
"RTN","RCXVDC6",41,0)
 .  Q:X'["Check Date: "
"RTN","RCXVDC6",42,0)
 .  S X=$E(X,13,20) D ^%DT
"RTN","RCXVDC6",43,0)
 .  I Y S RCXVDT=Y
"RTN","RCXVDC6",44,0)
 .  Q
"RTN","RCXVDC6",45,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC(RCXVDT),1,8) ;CHECK DATE
"RTN","RCXVDC6",46,0)
 S ^TMP($J,RCXVBLN,"6-433A",RCXVI)=RCXVDA
"RTN","RCXVDC6",47,0)
 Q
"RTN","RCXVDC6",48,0)
 ;
"RTN","RCXVDC6",49,0)
D433B ;
"RTN","RCXVDC6",50,0)
 NEW RCXVDA,RCXVD0B,RCXVI,RQFL
"RTN","RCXVDC6",51,0)
 S RCXVD0B="",RQFL=0
"RTN","RCXVDC6",52,0)
 F RCXVI=1:1 S RCXVD0B=$O(^PRCA(433,"C",RCXVBLN,RCXVD0B)) Q:RCXVD0B=""  D  Q:RQFL
"RTN","RCXVDC6",53,0)
 . S RCXVDA=$$GET1^DIQ(433,RCXVD0B_",",88,"E") ; Contractual Adj
"RTN","RCXVDC6",54,0)
 . I RCXVDA'="" S $P(^TMP($J,RCXVBLN,"6-433A",1),U,7)=RCXVDA,RQFL=1
"RTN","RCXVDC6",55,0)
 Q
"RTN","RCXVDC7")
0^8^B829025
"RTN","RCXVDC7",1,0)
RCXVDC7 ;TJK/ALBANY OI @ALTOONA, PA-AR Data Extraction Data Creation ;02-JUL-03
"RTN","RCXVDC7",2,0)
 ;;4.5;Accounts Receivable;**228**;Mar 20, 1995
"RTN","RCXVDC7",3,0)
 ;
"RTN","RCXVDC7",4,0)
 ; IB Bill/Claims Prosthetics File (362.5)
"RTN","RCXVDC7",5,0)
 Q
"RTN","RCXVDC7",6,0)
D3625 ;
"RTN","RCXVDC7",7,0)
 NEW RCIBD,RCT,RCXVDA,RCNT,RCBILL,RCPDATA
"RTN","RCXVDC7",8,0)
 Q:'$G(RCXVD0)
"RTN","RCXVDC7",9,0)
 S RCIBD="" S RCIBD=$$IBAREXT^IBRFN4(RCXVD0,.RCIBD)
"RTN","RCXVDC7",10,0)
 S (RCT,RCNT)=0 F  S RCT=$O(RCIBD("PRD",RCT)) Q:'RCT  D
"RTN","RCXVDC7",11,0)
 . S RCPDATA=RCIBD("PRD",RCT)
"RTN","RCXVDC7",12,0)
 . S RCBILL=$P(RCPDATA,U,3),RCBILL=$P($G(^DGCR(399,RCBILL,0)),U)
"RTN","RCXVDC7",13,0)
 . S RCXVDA=RCBILL_RCXVU_$P(RCPDATA,U) ;BILL# & ITEM
"RTN","RCXVDC7",14,0)
 . S RCNT=RCNT+1
"RTN","RCXVDC7",15,0)
 . S ^TMP($J,RCXVBLN,"7-362.5A",RCNT)=RCXVDA
"RTN","RCXVDC7",16,0)
 . Q
"RTN","RCXVDC7",17,0)
 Q
"RTN","RCXVDC7",18,0)
 ;
"RTN","RCXVDC8")
0^9^B2256974
"RTN","RCXVDC8",1,0)
RCXVDC8 ;DAOU/ALA-AR Data Extraction Data Creation ;02-JUL-03
"RTN","RCXVDC8",2,0)
 ;;4.5;Accounts Receivable;**201,228**;Mar 20, 1995
"RTN","RCXVDC8",3,0)
 ;
"RTN","RCXVDC8",4,0)
 ; AR Batch Payment File (# 344) 
"RTN","RCXVDC8",5,0)
 Q
"RTN","RCXVDC8",6,0)
D344 ;
"RTN","RCXVDC8",7,0)
 N RCSITE
"RTN","RCXVDC8",8,0)
 S RCXVD=$G(^RCY(344,RCXVD0,0)) ;    
"RTN","RCXVDC8",9,0)
 S RCXVP1=$P(RCXVD,U,6) ; PTR TO DEPOSIT TICKET
"RTN","RCXVDC8",10,0)
 I RCXVP1="" Q
"RTN","RCXVDC8",11,0)
 S RCXVD1=$G(^RCY(344.1,RCXVP1,0))
"RTN","RCXVDC8",12,0)
 ;
"RTN","RCXVDC8",13,0)
 S RCXVDA=$P(RCXVD,U,1)
"RTN","RCXVDC8",14,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD1,U,1) ; Ticket # (P)
"RTN","RCXVDC8",15,0)
 S RCXVDA=RCXVDA_RCXVU_$E($$HLDATE^HLFNC($P(RCXVD,U,8)),1,8) ; Date/Time Proc
"RTN","RCXVDC8",16,0)
 S RCXVDA=RCXVDA_RCXVU_$P(RCXVD1,U,4) ; (344.1) Amt Deposit
"RTN","RCXVDC8",17,0)
 S RCXVDA=RCXVDA_RCXVU_$$RECTOTAL^RCDPURED(RCXVP1) ; Totl Amt of Receipts (Comp)
"RTN","RCXVDC8",18,0)
 S RCXVDA=RCXVDA_RCXVU_$$RECCOUNT^RCDPURED(RCXVP1) ; Totl Receipts (Comp)
"RTN","RCXVDC8",19,0)
 S RCSITE=$P($$SITE^VASITE(),U,3)
"RTN","RCXVDC8",20,0)
 S RCXVDA=RCXVDA_U_RCSITE
"RTN","RCXVDC8",21,0)
 S ^TMP($J,"RCXVDC8",RCXVD0)=RCXVDA
"RTN","RCXVDC8",22,0)
 W "REC:"_$P(RCXVDA,RCXVU,1),!
"RTN","RCXVDC8",23,0)
 W "344:"_$P(RCXVDA,RCXVU,2,7),!
"RTN","RCXVDC8",24,0)
 ;
"RTN","RCXVDC8",25,0)
 S RCXVI=""
"RTN","RCXVDC8",26,0)
 F  S RCXVI=$O(^TMP($J,"7-162A",RCXVI)) Q:RCXVI=""  D
"RTN","RCXVDC8",27,0)
 . W "162:"_$G(^TMP($J,"7-162A",RCXVI))
"RTN","RCXVDC8",28,0)
 . W !
"RTN","RCXVDC8",29,0)
 Q
"RTN","RCXVDC8",30,0)
 ;
"RTN","RCXVDEQ")
0^10^B14701950
"RTN","RCXVDEQ",1,0)
RCXVDEQ ;DAOU/ALA-AR Data Extract Queue Trigger ;02-JUL-03
"RTN","RCXVDEQ",2,0)
 ;;4.5;Accounts Receivable;**201,228**;Mar 20, 1995
"RTN","RCXVDEQ",3,0)
 ;
"RTN","RCXVDEQ",4,0)
 ;**Program Description**
"RTN","RCXVDEQ",5,0)
 ;  This program will log a record who meets the
"RTN","RCXVDEQ",6,0)
 ;  selection criteria for the VISTA Data Extract
"RTN","RCXVDEQ",7,0)
 ;
"RTN","RCXVDEQ",8,0)
AR ;  Triggers from the Accounts Receivable File (#430)
"RTN","RCXVDEQ",9,0)
 NEW DFN
"RTN","RCXVDEQ",10,0)
 ;
"RTN","RCXVDEQ",11,0)
 S RCXVBLN=D0,RCXVSTAT=$P(^PRCA(430,D0,0),U,8)
"RTN","RCXVDEQ",12,0)
 I '+$P(^PRCA(430.3,RCXVSTAT,0),U,6) Q
"RTN","RCXVDEQ",13,0)
 ;
"RTN","RCXVDEQ",14,0)
 S DFN=$P(^PRCA(430,D0,0),U,7)
"RTN","RCXVDEQ",15,0)
 D FIL("D")
"RTN","RCXVDEQ",16,0)
 ;
"RTN","RCXVDEQ",17,0)
 K RCXVBLN,RCXVSTAT
"RTN","RCXVDEQ",18,0)
 Q
"RTN","RCXVDEQ",19,0)
 ;
"RTN","RCXVDEQ",20,0)
AT ;  Triggers from the Accounts Receivable Transactions (#433)
"RTN","RCXVDEQ",21,0)
 NEW DFN
"RTN","RCXVDEQ",22,0)
 ;
"RTN","RCXVDEQ",23,0)
 S RCXVBLN=$P($G(^PRCA(433,D0,0)),U,2)
"RTN","RCXVDEQ",24,0)
 S RCXVTYP=$P($G(^PRCA(433,D0,1)),U,2)
"RTN","RCXVDEQ",25,0)
 I RCXVTYP="" Q
"RTN","RCXVDEQ",26,0)
 ;
"RTN","RCXVDEQ",27,0)
 I '+$P(^PRCA(430.3,RCXVTYP,0),U,6) Q
"RTN","RCXVDEQ",28,0)
 ;
"RTN","RCXVDEQ",29,0)
 S DFN=$P(^PRCA(430,RCXVBLN,0),U,7)
"RTN","RCXVDEQ",30,0)
 D FIL("D")
"RTN","RCXVDEQ",31,0)
 ;
"RTN","RCXVDEQ",32,0)
 K RCXVBLN,RCXVTYP
"RTN","RCXVDEQ",33,0)
 Q
"RTN","RCXVDEQ",34,0)
 ;
"RTN","RCXVDEQ",35,0)
FIL(RCXVBTY) ;  File the record into the AR Data Queue File (#348.4)
"RTN","RCXVDEQ",36,0)
 ;
"RTN","RCXVDEQ",37,0)
 ;  If a test system has 'turned off' extract, quit
"RTN","RCXVDEQ",38,0)
 I '$$GET1^DIQ(342,"1,",20.04,"I") Q
"RTN","RCXVDEQ",39,0)
 ;
"RTN","RCXVDEQ",40,0)
 ;  Input Parameter
"RTN","RCXVDEQ",41,0)
 ;    RCXVBTY = Batch Type (H=Historical, D=Daily, C=Current Fiscal Year, A=Active,E=FY05 DATA)
"RTN","RCXVDEQ",42,0)
 ;    RCXVBLN = Bill IEN
"RTN","RCXVDEQ",43,0)
 ;
"RTN","RCXVDEQ",44,0)
 N FDA,RCXVCURB,RCVXBNM,RCVXBMX
"RTN","RCXVDEQ",45,0)
 ; 
"RTN","RCXVDEQ",46,0)
 ; Where there has been any update/change to the system 
"RTN","RCXVDEQ",47,0)
 ; for a particular bill for the previous days business business (T-1). 
"RTN","RCXVDEQ",48,0)
 ;
"RTN","RCXVDEQ",49,0)
 ; Get current batch
"RTN","RCXVDEQ",50,0)
BTC K ^TMP("RCXVA",$J)
"RTN","RCXVDEQ",51,0)
 D FIND^DIC(348.4,"","","P",DT,"","C","I $P(^(0),U,4)=RCXVBTY","","^TMP(""RCXVA"",$J)")
"RTN","RCXVDEQ",52,0)
 S RCXVCURB=+$P($G(^TMP("RCXVA",$J,"DILIST",0)),U,1)
"RTN","RCXVDEQ",53,0)
 S RCVXCTY="",RCXVBDT="",RCXQFL=0
"RTN","RCXVDEQ",54,0)
 ;
"RTN","RCXVDEQ",55,0)
 ;  If there is no batch for today, create a new batch
"RTN","RCXVDEQ",56,0)
 I RCXVCURB=0 D NBT G CON:'RCXQFL,BTC
"RTN","RCXVDEQ",57,0)
 ;
"RTN","RCXVDEQ",58,0)
 ; Check to see if batch is full.
"RTN","RCXVDEQ",59,0)
 S RCXVCURB=$P(^TMP("RCXVA",$J,"DILIST",RCXVCURB,0),U,1)
"RTN","RCXVDEQ",60,0)
 I RCXVCURB'=0 D
"RTN","RCXVDEQ",61,0)
 . S RCVXBNM=$P($G(^RCXV(RCXVCURB,0)),U,7) ; Number of record in batch
"RTN","RCXVDEQ",62,0)
 . S RCVXCTY=$P($G(^RCXV(RCXVCURB,0)),U,4) ; Current batch type
"RTN","RCXVDEQ",63,0)
 . S RCXVBDT=$P($G(^RCXV(RCXVCURB,0)),U,2) ; Batch Date
"RTN","RCXVDEQ",64,0)
 . S RCXVBST=$P($G(^RCXV(RCXVCURB,0)),U,3) ; Batch Status
"RTN","RCXVDEQ",65,0)
 S RCVXBMX=$P($G(^RC(342,1,20)),U,5) ; Max. # of record per batch
"RTN","RCXVDEQ",66,0)
 ;  OR if the number of records in batch exceeds the
"RTN","RCXVDEQ",67,0)
 ;  maximum number of records per batch --> create new batch
"RTN","RCXVDEQ",68,0)
 I (RCVXBNM>RCVXBMX)!(RCVXBNM=RCVXBMX)!(RCXVBST="T") D NBT G BTC:RCXQFL=1
"RTN","RCXVDEQ",69,0)
 ;
"RTN","RCXVDEQ",70,0)
CON ;  Continue with updating the AR Data Queue file
"RTN","RCXVDEQ",71,0)
 S RCXVDA=$S($G(RCXVCURB)'=0:RCXVCURB,1:RCXVDA)
"RTN","RCXVDEQ",72,0)
 ;
"RTN","RCXVDEQ",73,0)
 ;  If the Batch Type is 'R', quit
"RTN","RCXVDEQ",74,0)
 I RCXVBTY="R" Q
"RTN","RCXVDEQ",75,0)
 ;
"RTN","RCXVDEQ",76,0)
 ;  If this bill number already exists in this batch, quit
"RTN","RCXVDEQ",77,0)
 I $D(^RCXV(RCXVDA,1,RCXVBLN)) Q
"RTN","RCXVDEQ",78,0)
 ;
"RTN","RCXVDEQ",79,0)
 ; File record
"RTN","RCXVDEQ",80,0)
 NEW DIC,DIE,X,DA,DLAYGO,Y,DINUM
"RTN","RCXVDEQ",81,0)
 S DA(1)=RCXVDA,DIC="^RCXV("_DA(1)_",1,",DIE=DIC,(X,DINUM)=RCXVBLN
"RTN","RCXVDEQ",82,0)
 S DLAYGO=348.41,DIC(0)="L",DIC("P")=DLAYGO
"RTN","RCXVDEQ",83,0)
 I '$D(^RCXV(DA(1),1,0)) S ^RCXV(DA(1),1,0)="^348.41^^"
"RTN","RCXVDEQ",84,0)
 D FILE^DICN
"RTN","RCXVDEQ",85,0)
 ;
"RTN","RCXVDEQ",86,0)
 S RCUPD(348.4,RCXVDA_",",.07)=(RCVXBNM+1)
"RTN","RCXVDEQ",87,0)
 S RCUPD(348.41,RCXVBLN_","_RCXVDA_",",.02)=$G(DFN)
"RTN","RCXVDEQ",88,0)
 D FILE^DIE("","RCUPD","RCXVERR")
"RTN","RCXVDEQ",89,0)
 ;
"RTN","RCXVDEQ",90,0)
 K RCXVDA,RCVXBNM,RCXVBLN,RCXVCURB,RCXVBTY,RCVXBMX,RCVXCTY,RCXVBDT
"RTN","RCXVDEQ",91,0)
 K ^TMP("RCXVA",$J),IENARRAY,RCXVBST,RCUPD,RCXVERR,RCXQFL
"RTN","RCXVDEQ",92,0)
 Q
"RTN","RCXVDEQ",93,0)
 ;
"RTN","RCXVDEQ",94,0)
NBT ;  Create a new batch
"RTN","RCXVDEQ",95,0)
 N $ES,$ET
"RTN","RCXVDEQ",96,0)
 S $ET="D ER^RCXVDEQ"
"RTN","RCXVDEQ",97,0)
 L +^RCXVLK:1 E  S RCXQFL=1 Q
"RTN","RCXVDEQ",98,0)
 S RCXVCURB=$P(^RCXV(0),U,3)+1
"RTN","RCXVDEQ",99,0)
 S RCVXBNM=0
"RTN","RCXVDEQ",100,0)
 S FDA(348.4,"+1,",.01)=RCXVCURB
"RTN","RCXVDEQ",101,0)
 S FDA(348.4,"+1,",.02)=DT
"RTN","RCXVDEQ",102,0)
 S FDA(348.4,"+1,",.03)="P"
"RTN","RCXVDEQ",103,0)
 S FDA(348.4,"+1,",.04)=RCXVBTY
"RTN","RCXVDEQ",104,0)
 S FDA(348.4,"+1,",.07)=RCVXBNM
"RTN","RCXVDEQ",105,0)
 D UPDATE^DIE("","FDA","IENARRAY","ERROR")
"RTN","RCXVDEQ",106,0)
 I '$D(ERROR) S RCXVDA=$G(IENARRAY(1))
"RTN","RCXVDEQ",107,0)
 L -^RCXVLK
"RTN","RCXVDEQ",108,0)
 Q
"RTN","RCXVDEQ",109,0)
 ;
"RTN","RCXVDEQ",110,0)
UDR ;  Update Deposits/Receipts subfile
"RTN","RCXVDEQ",111,0)
 ; If this batch payment number already exists in this batch, quit
"RTN","RCXVDEQ",112,0)
 I $D(^RCXV(RCXVDA,2,RCXVD0)) Q
"RTN","RCXVDEQ",113,0)
 ;
"RTN","RCXVDEQ",114,0)
 ; File record
"RTN","RCXVDEQ",115,0)
 NEW DIC,DIE,X,DA,DLAYGO,Y,DINUM
"RTN","RCXVDEQ",116,0)
 S DA(1)=RCXVDA,DIC="^RCXV("_DA(1)_",2,",DIE=DIC,(X,DINUM)=RCXVD0
"RTN","RCXVDEQ",117,0)
 S DLAYGO=348.42,DIC(0)="L",DIC("P")=DLAYGO
"RTN","RCXVDEQ",118,0)
 I '$D(^RCXV(DA(1),2,0)) S ^RCXV(DA(1),2,0)="^348.42^^"
"RTN","RCXVDEQ",119,0)
 D FILE^DICN
"RTN","RCXVDEQ",120,0)
 ;
"RTN","RCXVDEQ",121,0)
 S RCUPD(348.4,RCXVDA_",",.07)=RCXVRNUM
"RTN","RCXVDEQ",122,0)
 D FILE^DIE("","RCUPD","RCXVERR")
"RTN","RCXVDEQ",123,0)
 K RCXVERR,RCUPD
"RTN","RCXVDEQ",124,0)
 Q
"RTN","RCXVDEQ",125,0)
 ;
"RTN","RCXVDEQ",126,0)
ER ; Unlock and log error
"RTN","RCXVDEQ",127,0)
 L -^RCXVLK
"RTN","RCXVDEQ",128,0)
 D ^%ZTER
"RTN","RCXVDEQ",129,0)
 D UNWIND^%ZTER
"RTN","RCXVDEQ",130,0)
 Q
"RTN","RCXVP201")
0^13^B44072983
"RTN","RCXVP201",1,0)
RCXVP201 ;DAOU/ALA-AR Data Extraction Post-Install Program ;23-JUL-03
"RTN","RCXVP201",2,0)
 ;;4.5;Accounts Receivable;**201,228**;Mar 20, 1995
"RTN","RCXVP201",3,0)
 ;
"RTN","RCXVP201",4,0)
 ;** Program Description **
"RTN","RCXVP201",5,0)
 ;  This program will be run on installation of patch
"RTN","RCXVP201",6,0)
 ;  PRCA*4.5*201 for CBO to ARC Data Extractions
"RTN","RCXVP201",7,0)
 ;
"RTN","RCXVP201",8,0)
EN ; Entry Point
"RTN","RCXVP201",9,0)
 NEW RJ,RCLM,IEN,TXT,VAL
"RTN","RCXVP201",10,0)
 ;
"RTN","RCXVP201",11,0)
 M XPDQUES=^TMP("RCXVINSTALL")
"RTN","RCXVP201",12,0)
 ;
"RTN","RCXVP201",13,0)
 ;  Set up the maximum number of records in a batch
"RTN","RCXVP201",14,0)
 S RCXVUP(342,"1,",20.05)=5000
"RTN","RCXVP201",15,0)
 S RCXVUP(342,"1,",20.01)=$S($G(XPDQUES("PRE DIREC"))'="":$G(XPDQUES("PRE DIREC")),1:"PRT$:[SPOOL]")
"RTN","RCXVP201",16,0)
 S RCXVUP(342,"1,",20.02)=$S($G(XPDQUES("POS MAIL"))'="":$G(XPDQUES("POS MAIL")),1:"RCXVFTP")
"RTN","RCXVP201",17,0)
 S RCXVUP(342,"1,",20.06)=$S($P($$PARAM^HLCS2(),U,3)="P":"PRODUCTION",1:"TEST")
"RTN","RCXVP201",18,0)
 S RCXVUP(342,"1,",20.04)="ON"
"RTN","RCXVP201",19,0)
 ;
"RTN","RCXVP201",20,0)
 D FILE^DIE("E","RCXVUP","ERROR")
"RTN","RCXVP201",21,0)
 ;
"RTN","RCXVP201",22,0)
 ;  Add installer to mail group RCXVFTP
"RTN","RCXVP201",23,0)
 D ADDMBRS^XMXAPIG(DUZ,"RCXVFTP",DUZ)
"RTN","RCXVP201",24,0)
 ;
"RTN","RCXVP201",25,0)
P228 ;Entry point from PRCA*4.5*228 postinit (RCXVP228)
"RTN","RCXVP201",26,0)
AC ;  Set up the active records into the AR Queue File (#348.4)
"RTN","RCXVP201",27,0)
 S RCXVDSC="CBO ACTIVE BILLS"
"RTN","RCXVP201",28,0)
 S RCXVFL=$$TASK^RCXVUTIL(RCXVDSC)
"RTN","RCXVP201",29,0)
 I 'RCXVFL D
"RTN","RCXVP201",30,0)
 . S ZTDESC=RCXVDSC,ZTRTN="ACT^RCXVTSK",ZTIO=""
"RTN","RCXVP201",31,0)
 . ;2 lines below changed to automatically queue at 8pm
"RTN","RCXVP201",32,0)
 . ;S TIME=$S($G(XPDQUES("PRE HISTM"))'="":$P($G(XPDQUES("PRE HISTM")),".",2),1:"20")
"RTN","RCXVP201",33,0)
 . S ZTDTH=$$DT^XLFDT()_".20"
"RTN","RCXVP201",34,0)
 . D ^%ZTLOAD
"RTN","RCXVP201",35,0)
 ;QUIT Below terminates call from 228 post-init
"RTN","RCXVP201",36,0)
 Q
"RTN","RCXVP201",37,0)
 ;
"RTN","RCXVP201",38,0)
CUR ;  Set up records since the end of the Fiscal Year 2003
"RTN","RCXVP201",39,0)
 S RCXVDSC="CBO FISCAL YR 2004 (9/26/03-10/31/03)"
"RTN","RCXVP201",40,0)
 S RCXVFFD=3030926,RCXVFTD=3031031,RCXVCFLG=1
"RTN","RCXVP201",41,0)
 S RFDATE=$$SAT^RCXVUTIL(DT) D TSK
"RTN","RCXVP201",42,0)
 ;
"RTN","RCXVP201",43,0)
 S RCXVDSC="CBO FISCAL YR 2004 (11/1/03-11/30/03)"
"RTN","RCXVP201",44,0)
 S RCXVFFD=3031101,RCXVFTD=3031130,RCXVCFLG=1 D TSK
"RTN","RCXVP201",45,0)
 ;
"RTN","RCXVP201",46,0)
 S RCXVDSC="CBO FISCAL YR 2004 (12/1/03-12/31/03)"
"RTN","RCXVP201",47,0)
 S RCXVFFD=3031201,RCXVFTD=3031231,RCXVCFLG=1 D TSK
"RTN","RCXVP201",48,0)
 ;
"RTN","RCXVP201",49,0)
 S RCXVDSC="CBO FISCAL YR 2004 (1/1/04-1/31/04)"
"RTN","RCXVP201",50,0)
 S RCXVFFD=3040101,RCXVFTD=3040131,RCXVCFLG=1 D TSK
"RTN","RCXVP201",51,0)
 ;
"RTN","RCXVP201",52,0)
 S RCXVDSC="CBO FISCAL YR 2004 (2/1/04-2/29/04)"
"RTN","RCXVP201",53,0)
 S RCXVFFD=3040201,RCXVFTD=3040229,RCXVCFLG=1 D TSK
"RTN","RCXVP201",54,0)
 ;
"RTN","RCXVP201",55,0)
 S RCXVDSC="CBO FISCAL YR 2004 (3/1/04-3/31/04)"
"RTN","RCXVP201",56,0)
 S RCXVFFD=3040301,RCXVFTD=3040331,RCXVCFLG=1 D TSK
"RTN","RCXVP201",57,0)
 ;
"RTN","RCXVP201",58,0)
 S RCXVDSC="CBO FISCAL YR 2004 (4/1/04-4/30/04)"
"RTN","RCXVP201",59,0)
 S RCXVFFD=3040401,RCXVFTD=3040430,RCXVCFLG=1 D TSK
"RTN","RCXVP201",60,0)
 ;
"RTN","RCXVP201",61,0)
 I $E(DT,4,5)="05" D
"RTN","RCXVP201",62,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (5/1/04-5/31/04)"
"RTN","RCXVP201",63,0)
 . S RCXVFFD=3040501,RCXVFTD=3040531,RCXVCFLG=1 D TSK
"RTN","RCXVP201",64,0)
 ;
"RTN","RCXVP201",65,0)
 I $E(DT,4,5)="06" D
"RTN","RCXVP201",66,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (5/1/04-5/31/04)"
"RTN","RCXVP201",67,0)
 . S RCXVFFD=3040501,RCXVFTD=3040531,RCXVCFLG=1 D TSK
"RTN","RCXVP201",68,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (6/1/04-6/30/04)"
"RTN","RCXVP201",69,0)
 . S RCXVFFD=3040601,RCXVFTD=3040630,RCXVCFLG=1 D TSK
"RTN","RCXVP201",70,0)
 ;
"RTN","RCXVP201",71,0)
 I $E(DT,4,5)="07" D
"RTN","RCXVP201",72,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (5/1/04-5/31/04)"
"RTN","RCXVP201",73,0)
 . S RCXVFFD=3040501,RCXVFTD=3040531,RCXVCFLG=1 D TSK
"RTN","RCXVP201",74,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (6/1/04-6/30/04)"
"RTN","RCXVP201",75,0)
 . S RCXVFFD=3040601,RCXVFTD=3040630,RCXVCFLG=1 D TSK
"RTN","RCXVP201",76,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (7/1/04-7/31/04)"
"RTN","RCXVP201",77,0)
 . S RCXVFFD=3040701,RCXVFTD=3040731,RCXVCFLG=1 D TSK
"RTN","RCXVP201",78,0)
 ;
"RTN","RCXVP201",79,0)
 I $E(DT,4,5)="08" D
"RTN","RCXVP201",80,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (5/1/04-5/31/04)"
"RTN","RCXVP201",81,0)
 . S RCXVFFD=3040501,RCXVFTD=3040531,RCXVCFLG=1 D TSK
"RTN","RCXVP201",82,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (6/1/04-6/30/04)"
"RTN","RCXVP201",83,0)
 . S RCXVFFD=3040601,RCXVFTD=3040630,RCXVCFLG=1 D TSK
"RTN","RCXVP201",84,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (7/1/04-7/31/04)"
"RTN","RCXVP201",85,0)
 . S RCXVFFD=3040701,RCXVFTD=3040731,RCXVCFLG=1 D TSK
"RTN","RCXVP201",86,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (8/1/04-8/31/04)"
"RTN","RCXVP201",87,0)
 . S RCXVFFD=3040801,RCXVFTD=3040831,RCXVCFLG=1 D TSK
"RTN","RCXVP201",88,0)
 ;
"RTN","RCXVP201",89,0)
 I $E(DT,4,5)="09" D
"RTN","RCXVP201",90,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (5/1/04-5/31/04)"
"RTN","RCXVP201",91,0)
 . S RCXVFFD=3040501,RCXVFTD=3040531,RCXVCFLG=1 D TSK
"RTN","RCXVP201",92,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (6/1/04-6/30/04)"
"RTN","RCXVP201",93,0)
 . S RCXVFFD=3040601,RCXVFTD=3040630,RCXVCFLG=1 D TSK
"RTN","RCXVP201",94,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (7/1/04-7/31/04)"
"RTN","RCXVP201",95,0)
 . S RCXVFFD=3040701,RCXVFTD=3040731,RCXVCFLG=1 D TSK
"RTN","RCXVP201",96,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (8/1/04-8/31/04)"
"RTN","RCXVP201",97,0)
 . S RCXVFFD=3040801,RCXVFTD=3040831,RCXVCFLG=1 D TSK
"RTN","RCXVP201",98,0)
 . S RCXVDSC="CBO FISCAL YR 2004 (9/1/04-9/27/04)"
"RTN","RCXVP201",99,0)
 . S RCXVFFD=3040901,RCXVFTD=3040927,RCXVCFLG=1 D TSK
"RTN","RCXVP201",100,0)
 ;
"RTN","RCXVP201",101,0)
F03 ;  Historical for Fiscal Year 2003
"RTN","RCXVP201",102,0)
 S RCXVDSC="CBO HISTORICAL EXTRACT FY03"
"RTN","RCXVP201",103,0)
 S RCXVFL=$$TASK^RCXVUTIL(RCXVDSC)
"RTN","RCXVP201",104,0)
 I $G(RFDATE)="" S ZTDTH=$$SAT^RCXVUTIL(DT),RFDATE=$$FMADD^XLFDT(ZTDTH,7)
"RTN","RCXVP201",105,0)
 I 'RCXVFL D
"RTN","RCXVP201",106,0)
 . S RCXVFFD=3021001,RCXVFTD=3030925
"RTN","RCXVP201",107,0)
 . S ZTDESC=RCXVDSC,ZTRTN="HIS^RCXVTSK",ZTIO=""
"RTN","RCXVP201",108,0)
 . S ZTSAVE("RCXVFFD")="",ZTSAVE("RCXVFTD")=""
"RTN","RCXVP201",109,0)
 . S ZTDTH=RFDATE_".06",RFDATE=$$FMADD^XLFDT(RFDATE,7)
"RTN","RCXVP201",110,0)
 . D ^%ZTLOAD
"RTN","RCXVP201",111,0)
 ;
"RTN","RCXVP201",112,0)
F02 ;  Historical for Fiscal Year 2002
"RTN","RCXVP201",113,0)
 S RCXVDSC="CBO HISTORICAL EXTRACT FY02"
"RTN","RCXVP201",114,0)
 S RCXVFL=$$TASK^RCXVUTIL(RCXVDSC)
"RTN","RCXVP201",115,0)
 I $G(RFDATE)="" S ZTDTH=$$SAT^RCXVUTIL(DT),RFDATE=$$FMADD^XLFDT(ZTDTH,7)
"RTN","RCXVP201",116,0)
 I 'RCXVFL D
"RTN","RCXVP201",117,0)
 . S RCXVFFD=3011001,RCXVFTD=3020930
"RTN","RCXVP201",118,0)
 . S ZTDESC=RCXVDSC,ZTRTN="HIS^RCXVTSK",ZTIO=""
"RTN","RCXVP201",119,0)
 . S ZTSAVE("RCXVFFD")="",ZTSAVE("RCXVFTD")=""
"RTN","RCXVP201",120,0)
 . S ZTDTH=RFDATE_".06",RFDATE=$$FMADD^XLFDT(RFDATE,7)
"RTN","RCXVP201",121,0)
 . D ^%ZTLOAD
"RTN","RCXVP201",122,0)
 ;
"RTN","RCXVP201",123,0)
F01 ;  Historical for Fiscal Year 2001
"RTN","RCXVP201",124,0)
 S RCXVDSC="CBO HISTORICAL EXTRACT FY01"
"RTN","RCXVP201",125,0)
 S RCXVFL=$$TASK^RCXVUTIL(RCXVDSC)
"RTN","RCXVP201",126,0)
 I $G(RFDATE)="" S ZTDTH=$$SAT^RCXVUTIL(DT),RFDATE=$$FMADD^XLFDT(ZTDTH,7)
"RTN","RCXVP201",127,0)
 I 'RCXVFL D
"RTN","RCXVP201",128,0)
 . S RCXVFFD=3001001,RCXVFTD=3010930
"RTN","RCXVP201",129,0)
 . S ZTDESC=RCXVDSC,ZTRTN="HIS^RCXVTSK",ZTIO=""
"RTN","RCXVP201",130,0)
 . S ZTSAVE("RCXVFFD")="",ZTSAVE("RCXVFTD")=""
"RTN","RCXVP201",131,0)
 . S ZTDTH=RFDATE_".06"
"RTN","RCXVP201",132,0)
 . D ^%ZTLOAD
"RTN","RCXVP201",133,0)
 ;
"RTN","RCXVP201",134,0)
FLG ;  Update with CBO EXTRACT FLAG
"RTN","RCXVP201",135,0)
 F RJ=1:1 S RCLM=$T(TTS+RJ) Q:RCLM=" ;;Q"  D
"RTN","RCXVP201",136,0)
 . S IEN=$P(RCLM,";",3),TXT=$P(RCLM,";",4),VAL=$P(RCLM,";",5)
"RTN","RCXVP201",137,0)
 . I $P(^PRCA(430.3,IEN,0),U,1)=TXT S RCXVUP(430.3,IEN_",",5)=VAL
"RTN","RCXVP201",138,0)
 D FILE^DIE("I","RCXVUP","RCERR")
"RTN","RCXVP201",139,0)
 ;
"RTN","RCXVP201",140,0)
EXIT K RCXVDSC,RTASKS,ZTDESC,ZTRTN,ZTDTH,XPDQUES,RCXVFFD,RCXVFTD
"RTN","RCXVP201",141,0)
 K RCXFY03,RCXVFL,RFDATE,TIME
"RTN","RCXVP201",142,0)
 K ^TMP("RCXVINSTALL")
"RTN","RCXVP201",143,0)
 Q
"RTN","RCXVP201",144,0)
 ;
"RTN","RCXVP201",145,0)
TSK ;  Set up Task for current fiscal year 2004
"RTN","RCXVP201",146,0)
 S ZTDESC=RCXVDSC,ZTRTN="CUR^RCXVTSK",ZTIO=""
"RTN","RCXVP201",147,0)
 S ZTSAVE("RCXVFFD")="",ZTSAVE("RCXVFTD")="",ZTSAVE("RCXVCFLG")=""
"RTN","RCXVP201",148,0)
 S ZTDTH=RFDATE_".06"
"RTN","RCXVP201",149,0)
 D ^%ZTLOAD
"RTN","RCXVP201",150,0)
 S RFDATE=$$FMADD^XLFDT(RFDATE,7)
"RTN","RCXVP201",151,0)
 Q
"RTN","RCXVP201",152,0)
 ;
"RTN","RCXVP201",153,0)
TTS ;  AR TRANSACTION TYPE File (#430.3) Update
"RTN","RCXVP201",154,0)
 ;;1;INCREASE ADJUSTMENT;1
"RTN","RCXVP201",155,0)
 ;;2;PAYMENT (IN PART);1
"RTN","RCXVP201",156,0)
 ;;3;REFER TO RC;1
"RTN","RCXVP201",157,0)
 ;;4;REFER TO DOJ;1
"RTN","RCXVP201",158,0)
 ;;5;REESTABLISH TO RC/DOJ;1
"RTN","RCXVP201",159,0)
 ;;6;RETURNED BY RC/DOJ;1
"RTN","RCXVP201",160,0)
 ;;7;CASH COLLECTION BY RC/DOJ;1
"RTN","RCXVP201",161,0)
 ;;8;TERM.BY FIS.OFFICER;1
"RTN","RCXVP201",162,0)
 ;;9;TERM.BY COMPROMISE;1
"RTN","RCXVP201",163,0)
 ;;10;WAIVED IN FULL;1
"RTN","RCXVP201",164,0)
 ;;11;WAIVED IN PART;1
"RTN","RCXVP201",165,0)
 ;;12;ADMIN.COST CHARGE;1
"RTN","RCXVP201",166,0)
 ;;13;INTEREST/ADM. CHARGE;1
"RTN","RCXVP201",167,0)
 ;;14;EXEMPT INT/ADM. COST;1
"RTN","RCXVP201",168,0)
 ;;15;INCOMPLETE;0
"RTN","RCXVP201",169,0)
 ;;16;ACTIVE;1
"RTN","RCXVP201",170,0)
 ;;17;IN-ACTIVE;
"RTN","RCXVP201",171,0)
 ;;18;NEW BILL;0
"RTN","RCXVP201",172,0)
 ;;19;SUSPENSE;1
"RTN","RCXVP201",173,0)
 ;;20;PENDING APPROVAL;0
"RTN","RCXVP201",174,0)
 ;;21;PENDING CALM CODE;0
"RTN","RCXVP201",175,0)
 ;;22;COLLECTED/CLOSED;1
"RTN","RCXVP201",176,0)
 ;;23;WRITE-OFF;1
"RTN","RCXVP201",177,0)
 ;;24;MARSHAL/COURT COST;1
"RTN","RCXVP201",178,0)
 ;;25;REPAYMENT PLAN;0
"RTN","RCXVP201",179,0)
 ;;26;CANCELLED BILL;1
"RTN","RCXVP201",180,0)
 ;;27;BILL INCOMPLETE;0
"RTN","RCXVP201",181,0)
 ;;28;OLD BILL;0
"RTN","RCXVP201",182,0)
 ;;29;TERM.BY RC/DOJ;1
"RTN","RCXVP201",183,0)
 ;;30;DEBIT VOUCHER (SF 5515);0
"RTN","RCXVP201",184,0)
 ;;31;RETURNED FROM AR (NEW);0
"RTN","RCXVP201",185,0)
 ;;32;RETURNED FOR AMENDMENT;0
"RTN","RCXVP201",186,0)
 ;;33;AMENDED BILL;0
"RTN","RCXVP201",187,0)
 ;;34;PAYMENT (IN FULL);1
"RTN","RCXVP201",188,0)
 ;;35;DECREASE ADJUSTMENT;1
"RTN","RCXVP201",189,0)
 ;;36;DELETE (AMEND);0
"RTN","RCXVP201",190,0)
 ;;37;ADD (AMEND);0
"RTN","RCXVP201",191,0)
 ;;38;AMEND;0
"RTN","RCXVP201",192,0)
 ;;39;CANCELLATION;1
"RTN","RCXVP201",193,0)
 ;;40;SUSPENDED;1
"RTN","RCXVP201",194,0)
 ;;41;REFUNDED;1
"RTN","RCXVP201",195,0)
 ;;42;OPEN;0
"RTN","RCXVP201",196,0)
 ;;43;RE-ESTABLISH;1
"RTN","RCXVP201",197,0)
 ;;44;REFUND REVIEW;1
"RTN","RCXVP201",198,0)
 ;;45;COMMENT;0
"RTN","RCXVP201",199,0)
 ;;46;UNSUSPENDED;1
"RTN","RCXVP201",200,0)
 ;;47;CHARGE SUSPENDED;1
"RTN","RCXVP201",201,0)
 ;;48;PENDING ARCHIVE;0
"RTN","RCXVP201",202,0)
 ;;49;ARCHIVED;0
"RTN","RCXVP201",203,0)
 ;;Q
"RTN","RCXVP228")
0^11^B8484191
"RTN","RCXVP228",1,0)
RCXVP228 ;DAOU/ALA-AR Data Extraction Post-Install Program ;23-JUL-03
"RTN","RCXVP228",2,0)
 ;;4.5;Accounts Receivable;**228**;Mar 20, 1995
"RTN","RCXVP228",3,0)
 ;
"RTN","RCXVP228",4,0)
 ;** Program Description **
"RTN","RCXVP228",5,0)
 ;  This program will be run on installation of patch
"RTN","RCXVP228",6,0)
 ;  PRCA*4.5*228 for CBO to ARC Data Extractions (FY05)
"RTN","RCXVP228",7,0)
 ;
"RTN","RCXVP228",8,0)
EN ; Entry Point
"RTN","RCXVP228",9,0)
 NEW RCXVX,RCXVCFLG,X,RCXVOID
"RTN","RCXVP228",10,0)
 ;
"RTN","RCXVP228",11,0)
 S:'$G(RCQDT) RCQDT=DT
"RTN","RCXVP228",12,0)
 ; Reset CBO Flag field to for bills in OPEN status to "INCLUDE"
"RTN","RCXVP228",13,0)
 S $P(^PRCA(430.3,42,0),U,6)=1
"RTN","RCXVP228",14,0)
 ;
"RTN","RCXVP228",15,0)
ACT ;Queue up active bill transmission
"RTN","RCXVP228",16,0)
 D P228^RCXVP201
"RTN","RCXVP228",17,0)
CUR ;  Set up records from installation date until end of Fiscal Year 2004
"RTN","RCXVP228",18,0)
 N VALUE,DIERR,Z,X,Y
"RTN","RCXVP228",19,0)
 S VALUE="PRCA*4.5*201"
"RTN","RCXVP228",20,0)
 D FIND^DIC(9.7,"","@;.01;17IE","P",VALUE,"","","","","Z")
"RTN","RCXVP228",21,0)
 S RCXVX=0,RCXVFFD="",RCXVOID=""
"RTN","RCXVP228",22,0)
 F  S RCXVX=$O(Z("DILIST",RCXVX)) Q:'RCXVX  D  Q:RCXVFFD
"RTN","RCXVP228",23,0)
 .  S RCXVFFD=$P(Z("DILIST",RCXVX,0),U,3)
"RTN","RCXVP228",24,0)
 .  Q:'RCXVFFD
"RTN","RCXVP228",25,0)
 .  S RCXVFFD=$P(RCXVFFD,".")
"RTN","RCXVP228",26,0)
 .  Q
"RTN","RCXVP228",27,0)
 I 'RCXVFFD!(RCXVFFD>3040927) S RCXVFFD=3040825
"RTN","RCXVP228",28,0)
 S (RCXVOID,X)=RCXVFFD
"RTN","RCXVP228",29,0)
 S RCXVDSC="CBO FISCAL YR 2004 ("_+$E(X,4,5)_"/"_+$E(X,6,7)_"/"_$E(X,2,3)_"-9/27/04)"
"RTN","RCXVP228",30,0)
 S RCXVFTD=3040927,RFDATE=$$SAT^RCXVUTIL(DT),RCXVCFLG=1 D TSK
"RTN","RCXVP228",31,0)
 ;
"RTN","RCXVP228",32,0)
 ;  Set up records since the end of the Fiscal Year 2004
"RTN","RCXVP228",33,0)
 S RCXVDSC="CBO FISCAL YR 2005 (9/28/04-12/31/04)"
"RTN","RCXVP228",34,0)
 S RCXVFFD=3040928,RCXVFTD=3041231,RCXVCFLG=1 D TSK
"RTN","RCXVP228",35,0)
 ;
"RTN","RCXVP228",36,0)
 S RCXVDSC="CBO FISCAL YR 2005 (1/1/05-3/31/05)"
"RTN","RCXVP228",37,0)
 S RCXVFFD=3050101,RCXVFTD=3050331,RCXVCFLG=1 D TSK
"RTN","RCXVP228",38,0)
 ;
"RTN","RCXVP228",39,0)
 S RCXVDSC="CBO FISCAL YR 2005 (4/1/05-6/30/05)"
"RTN","RCXVP228",40,0)
 S RCXVFFD=3050401,RCXVFTD=3050630,RCXVCFLG=1 D TSK
"RTN","RCXVP228",41,0)
 G FY04:RCQDT<3050701
"RTN","RCXVP228",42,0)
 ;
"RTN","RCXVP228",43,0)
 S RCXVDSC="CBO FISCAL YR 2005 (7/1/05-"_+$E(RCQDT,4,5)_"/"_+$E(RCQDT,6,7)_"/"_$E(RCQDT,2,3)_")"
"RTN","RCXVP228",44,0)
 S RCXVFFD=3050701,RCXVFTD=RCQDT,RCXVCFLG=1 D TSK
"RTN","RCXVP228",45,0)
 ;
"RTN","RCXVP228",46,0)
FY04 ;
"RTN","RCXVP228",47,0)
 S RCXVDSC="CBO FISCAL YR 2004 (9/26/03-12/31/03)"
"RTN","RCXVP228",48,0)
 S RCXVFFD=3030927,RCXVFTD=3031231,RCXVCFLG=1 D TSK
"RTN","RCXVP228",49,0)
 ;
"RTN","RCXVP228",50,0)
 S RCXVDSC="CBO FISCAL YR 2004 (1/1/04-3/31/04)"
"RTN","RCXVP228",51,0)
 S RCXVFFD=3040101,RCXVFTD=3040331,RCXVCFLG=1 D TSK
"RTN","RCXVP228",52,0)
 ;
"RTN","RCXVP228",53,0)
 S RCXVDSC="CBO FISCAL YR 2004 (4/1/04-6/30/04)"
"RTN","RCXVP228",54,0)
 S RCXVFFD=3040401,RCXVFTD=3040630,RCXVCFLG=1 D TSK
"RTN","RCXVP228",55,0)
 ;
"RTN","RCXVP228",56,0)
 S X1=RCXVOID,X2=-1 D C^%DTC
"RTN","RCXVP228",57,0)
 S RCXVDSC="CBO FISCAL YR 2004 (7/1/04-"_+$E(X,4,5)_"/"_+$E(X,6,7)_"/"_$E(X,2,3)_")"
"RTN","RCXVP228",58,0)
 S RCXVFFD=3040701,RCXVFTD=3040927,RCXVCFLG=1 D TSK
"RTN","RCXVP228",59,0)
EXIT K RCXVDSC,RTASKS,ZTDESC,ZTRTN,ZTDTH,XPDQUES,RCXVFFD,RCXVFTD
"RTN","RCXVP228",60,0)
 K RCXFY03,RCXVFL,RFDATE,TIME,ZTSAVE,ZTIO,RCXVCFLG,RCQDT
"RTN","RCXVP228",61,0)
 Q
"RTN","RCXVP228",62,0)
 ;
"RTN","RCXVP228",63,0)
TSK ;  Set up Task for current fiscal year 2005
"RTN","RCXVP228",64,0)
 S ZTDESC=RCXVDSC,ZTRTN="CUR^RCXVTSK",ZTIO=""
"RTN","RCXVP228",65,0)
 S ZTSAVE("RCXVFFD")="",ZTSAVE("RCXVFTD")="",ZTSAVE("RCXVCFLG")=""
"RTN","RCXVP228",66,0)
 S ZTDTH=RFDATE_".06"
"RTN","RCXVP228",67,0)
 D ^%ZTLOAD
"RTN","RCXVP228",68,0)
 I RCXVFTD=3050630,RCQDT>3050630 S RFDATE=$$FMADD^XLFDT(RFDATE,1) Q
"RTN","RCXVP228",69,0)
 I RCXVFTD=RCQDT,RCQDT>3050630 S RFDATE=$$FMADD^XLFDT(RFDATE,6) Q
"RTN","RCXVP228",70,0)
 S RFDATE=$$FMADD^XLFDT(RFDATE,7)
"RTN","RCXVP228",71,0)
 Q
"RTN","RCXVP228",72,0)
 ;
"RTN","RCXVTSK")
0^12^B38032406
"RTN","RCXVTSK",1,0)
RCXVTSK ;DAOU/ALA-AR Data Extract Nightly Task ;23-JUL-03
"RTN","RCXVTSK",2,0)
 ;;4.5;Accounts Receivable;**201,227,228**;Mar 20, 1995
"RTN","RCXVTSK",3,0)
 ;
"RTN","RCXVTSK",4,0)
 ;** Program Description **
"RTN","RCXVTSK",5,0)
 ;  This program is the nightly task program for the
"RTN","RCXVTSK",6,0)
 ;  CBO Data Extract to the Boston Allocation Resource
"RTN","RCXVTSK",7,0)
 ;  Center
"RTN","RCXVTSK",8,0)
 ;
"RTN","RCXVTSK",9,0)
EN ;  Entry point
"RTN","RCXVTSK",10,0)
 ;
"RTN","RCXVTSK",11,0)
 ;  If a test system has 'turned off' extract, quit
"RTN","RCXVTSK",12,0)
 I '$$GET1^DIQ(342,"1,",20.04,"I") Q
"RTN","RCXVTSK",13,0)
 ;
"RTN","RCXVTSK",14,0)
 N $ES,$ET
"RTN","RCXVTSK",15,0)
 S $ET="D ER^RCXVTSK"
"RTN","RCXVTSK",16,0)
 ;
"RTN","RCXVTSK",17,0)
 L +^RCXVTSK:60 E  Q
"RTN","RCXVTSK",18,0)
 ;
"RTN","RCXVTSK",19,0)
 ;  Purge completed batches
"RTN","RCXVTSK",20,0)
 S IEN="",DIK="^RCXV("
"RTN","RCXVTSK",21,0)
 F  S IEN=$O(^RCXV("AC","C",IEN)) Q:IEN=""  D
"RTN","RCXVTSK",22,0)
 . S DA=IEN D ^DIK
"RTN","RCXVTSK",23,0)
 ;
"RTN","RCXVTSK",24,0)
 K ^TMP("RCXVMSG",$J)
"RTN","RCXVTSK",25,0)
 ;
"RTN","RCXVTSK",26,0)
 ;  Find all deposits/receipts
"RTN","RCXVTSK",27,0)
 S RCXVD0="",RCXVRNUM=0,RCXVDT=$$FMADD^XLFDT(DT,-1)
"RTN","RCXVTSK",28,0)
 F  S RCXVD0=$O(^RCY(344,"ASTAT",0,RCXVD0)) Q:RCXVD0=""  D
"RTN","RCXVTSK",29,0)
 . S RCXVEDT=$P($G(^RCY(344,RCXVD0,0)),U,12)\1
"RTN","RCXVTSK",30,0)
 . I RCXVEDT'=RCXVDT Q
"RTN","RCXVTSK",31,0)
 . S RCXVRNUM=RCXVRNUM+1
"RTN","RCXVTSK",32,0)
 . D FIL^RCXVDEQ("R")
"RTN","RCXVTSK",33,0)
 . D UDR^RCXVDEQ
"RTN","RCXVTSK",34,0)
 ;
"RTN","RCXVTSK",35,0)
 K RCXVD0,RCXVRNUM,RCXVDT,RCXVEDT,RCXVDA,RCVXCTY,RCXVBDT
"RTN","RCXVTSK",36,0)
 ;
"RTN","RCXVTSK",37,0)
 S RCXVBTN="",RCXVU="^",RCXVXDT=DT
"RTN","RCXVTSK",38,0)
 ;
"RTN","RCXVTSK",39,0)
 ;  If the CCPC calculation is scheduled to run, don't
"RTN","RCXVTSK",40,0)
 ;  run the nightly task
"RTN","RCXVTSK",41,0)
 ; Patch 228 changes software to allow nightly task on CCPC date
"RTN","RCXVTSK",42,0)
 ;S X1=$$STD^RCCPCFN,X2=-3 D C^%DTC I X=DT L -^RCXVTSK K X Q
"RTN","RCXVTSK",43,0)
 ;K X1,X2
"RTN","RCXVTSK",44,0)
 ;
"RTN","RCXVTSK",45,0)
NM ;  Find all new batches to be transmitted
"RTN","RCXVTSK",46,0)
 S RBSQ=0,RBTOT=0
"RTN","RCXVTSK",47,0)
 F  S RCXVBTN=$O(^RCXV("AC","P",RCXVBTN)) Q:RCXVBTN=""  D
"RTN","RCXVTSK",48,0)
 . I $G(^RCXV(RCXVBTN,0))="" Q
"RTN","RCXVTSK",49,0)
 . S RBSQ=RBSQ+1,RBTOT=RBTOT+1
"RTN","RCXVTSK",50,0)
 . I $P(^RCXV(RCXVBTN,0),U,1)'=RCXVBTN S RCXVUP(348.4,RCXVBTN_",",.01)=RCXVBTN
"RTN","RCXVTSK",51,0)
 . S RCXVUP(348.4,RCXVBTN_",",.05)=RBSQ
"RTN","RCXVTSK",52,0)
 F  S RCXVBTN=$O(RCXVUP(348.4,RCXVBTN)) Q:RCXVBTN=""  D
"RTN","RCXVTSK",53,0)
 . S RCXVUP(348.4,RCXVBTN,.06)=RBTOT
"RTN","RCXVTSK",54,0)
 D FILE^DIE("","RCXVUP","RCXVERR")
"RTN","RCXVTSK",55,0)
 K RCXVUP
"RTN","RCXVTSK",56,0)
 ;
"RTN","RCXVTSK",57,0)
 S RCXVBTN=""
"RTN","RCXVTSK",58,0)
STRT ;  Start the build and transmission of batches
"RTN","RCXVTSK",59,0)
 D ^RCXVCHK
"RTN","RCXVTSK",60,0)
 F RCSTAT="T","P" F  S RCXVBTN=$O(^RCXV("AC",RCSTAT,RCXVBTN)) Q:RCXVBTN=""  D
"RTN","RCXVTSK",61,0)
 . S RCXVBLN=0,RQFL=0
"RTN","RCXVTSK",62,0)
 . S RCXVSITE=$P($$SITE^VASITE(),U,3)
"RTN","RCXVTSK",63,0)
 . S RCXVDIR=$P($G(^RC(342,1,20)),U,1)
"RTN","RCXVTSK",64,0)
 . S RCXVBDT=$P($G(^RCXV(RCXVBTN,0)),U,2)
"RTN","RCXVTSK",65,0)
 . S RCXVBTY=$P($G(^RCXV(RCXVBTN,0)),U,4)
"RTN","RCXVTSK",66,0)
 . S RCXVSEQ=$P($G(^RCXV(RCXVBTN,0)),U,5)
"RTN","RCXVTSK",67,0)
 . S RCXVSTOT=$P($G(^RCXV(RCXVBTN,0)),U,6)
"RTN","RCXVTSK",68,0)
 . S RCXVLDOM=$P($G(^RC(342,1,20)),U,8)
"RTN","RCXVTSK",69,0)
 . ;S RCXVLEG=+$P($G(^RC(342,1,20)),U,7)
"RTN","RCXVTSK",70,0)
 . ;
"RTN","RCXVTSK",71,0)
 . I RCSTAT'="T" D  Q:RQFL
"RTN","RCXVTSK",72,0)
 .. I $G(RCXVSEQ)="" S RQFL=1 Q
"RTN","RCXVTSK",73,0)
 .. I $P(^RCXV(RCXVBTN,0),U,3)="C" S RQFL=1 Q
"RTN","RCXVTSK",74,0)
 .. S RCXVUP(348.4,RCXVBTN_",",.03)="T"
"RTN","RCXVTSK",75,0)
 .. D FILE^DIE("I","RCXVUP","RCXVERR")
"RTN","RCXVTSK",76,0)
 .. K RCXVUP
"RTN","RCXVTSK",77,0)
 . ;
"RTN","RCXVTSK",78,0)
 . ; If a file has been transmitted but no acknowledgement
"RTN","RCXVTSK",79,0)
 . ; has been received after 5 days, resend
"RTN","RCXVTSK",80,0)
 . I RCSTAT="T" D  Q:RQFL
"RTN","RCXVTSK",81,0)
 .. S RCXVTRD=$P($G(^RCXV(RCXVBTN,0)),U,8)\1
"RTN","RCXVTSK",82,0)
 .. S RCXVARD=$P($G(^RCXV(RCXVBTN,0)),U,9)\1
"RTN","RCXVTSK",83,0)
 .. I $$FMADD^XLFDT(RCXVTRD,5)>DT S RQFL=1
"RTN","RCXVTSK",84,0)
 .. ;I RCXVARD=0,RCXVLEG,RCXVTRD'=0 S RQFL=1
"RTN","RCXVTSK",85,0)
 . ;
"RTN","RCXVTSK",86,0)
 . Q:RQFL
"RTN","RCXVTSK",87,0)
 . ; FILENAME=SITE_DATE_BATCH# 
"RTN","RCXVTSK",88,0)
 . S RCXVFILE="RCXV"_RCXVSITE_RCXVBDT_RCXVBTN_".TXT"
"RTN","RCXVTSK",89,0)
 . S RCXVSCR="TMP_RCXV"_RCXVSITE_"_"_RCXVBTN
"RTN","RCXVTSK",90,0)
 . D OPEN^%ZISH("RCXVHNDL",RCXVDIR,RCXVFILE,"W")
"RTN","RCXVTSK",91,0)
 . U IO
"RTN","RCXVTSK",92,0)
 . S RCXVDMN=$P($G(^XTV(8989.3,1,0)),U,1)
"RTN","RCXVTSK",93,0)
 . S RCXVDMN=$P($G(^DIC(4.2,RCXVDMN,0)),U,1)
"RTN","RCXVTSK",94,0)
 . S RCXVRN=$P($G(^RCXV(RCXVBTN,1,0)),U,4) ; # OF REC FOR BILLS
"RTN","RCXVTSK",95,0)
 . I RCXVRN="" S RCXVRN=$P($G(^RCXV(RCXVBTN,2,0)),U,4) ; # REC DEP/REC
"RTN","RCXVTSK",96,0)
 . S RCXVRT=$P($G(^RCXV(RCXVBTN,0)),U,4) ; TYPE OF DATA 
"RTN","RCXVTSK",97,0)
 . W "HDR:"_RCXVSITE_RCXVU_RCXVDMN_RCXVU_RCXVRT_RCXVU_RCXVRN_RCXVU_RCXVBDT_RCXVU_RCXVXDT_RCXVU_RCXVSEQ_RCXVU_RCXVSTOT_RCXVU_RCXVLDOM,!
"RTN","RCXVTSK",98,0)
 . F  S RCXVBLN=$O(^RCXV(RCXVBTN,1,RCXVBLN)) Q:'RCXVBLN  D
"RTN","RCXVTSK",99,0)
 .. S DFN=$P(^RCXV(RCXVBTN,1,RCXVBLN,0),U,2)
"RTN","RCXVTSK",100,0)
 .. D EN^RCXVDC
"RTN","RCXVTSK",101,0)
 . ;
"RTN","RCXVTSK",102,0)
 . S RCXVD0=0
"RTN","RCXVTSK",103,0)
 . F  S RCXVD0=$O(^RCXV(RCXVBTN,2,RCXVD0)) Q:'RCXVD0  D
"RTN","RCXVTSK",104,0)
 .. S RCXVEDT=$P($G(^RCY(344,RCXVD0,0)),U,12)\1
"RTN","RCXVTSK",105,0)
 .. D D344^RCXVDC8
"RTN","RCXVTSK",106,0)
 . ;
"RTN","RCXVTSK",107,0)
 . D CLOSE^%ZISH("RCXVHNDL")
"RTN","RCXVTSK",108,0)
 . ;
"RTN","RCXVTSK",109,0)
 . S $P(^RC(342,1,20),U,9)=$$NOW^XLFDT()
"RTN","RCXVTSK",110,0)
 . ;
"RTN","RCXVTSK",111,0)
 . ;  FTP directly to ARC
"RTN","RCXVTSK",112,0)
 . D EN^RCXVFTP(RCXVFILE,RCXVDIR)
"RTN","RCXVTSK",113,0)
 ;
"RTN","RCXVTSK",114,0)
 ;  Check on FTP transfer messages
"RTN","RCXVTSK",115,0)
 D ^RCXVFTR
"RTN","RCXVTSK",116,0)
 ;
"RTN","RCXVTSK",117,0)
 L -^RCXVTSK
"RTN","RCXVTSK",118,0)
EXIT D MSG^RCXVCHK
"RTN","RCXVTSK",119,0)
 K IEN,DIK,DA,RCXVBLN,RCXVBTN,RCSTAT,RCXVBDT,RCXVDMN,RCXVXDT,RCXVTRD
"RTN","RCXVTSK",120,0)
 K RCXVSITE,RCXVFILE,RCXVRN,RCXVRT,RCXVDIR,RCXVATP,RCXVU,DTACT,RBSQ,RBTOT
"RTN","RCXVTSK",121,0)
 K RCFDATE,RCXVCFLG,RCXVDBN,RCXVIDT,RCXVSEQ,RCXVSTOT,RCXVTRD,CCT,DTENT
"RTN","RCXVTSK",122,0)
 K RCBLN,RCDBTR,RCDEBT,RCTRAN,RCXVTR,RCBCN,RCXVPFDT,RCXVPTDT,RCXRMB
"RTN","RCXVTSK",123,0)
 K RCXVLDOM,RCXVARD,RCXVSUB,RCXVBTY,RCXVLEG,RCXVSCR,Y,X
"RTN","RCXVTSK",124,0)
 K ^TMP("RCXVMSG",$J),^TMP("RCXVA",$J),^TMP("RCXVIN",$J)
"RTN","RCXVTSK",125,0)
 Q
"RTN","RCXVTSK",126,0)
 ;
"RTN","RCXVTSK",127,0)
HIS ;  Historical data extract
"RTN","RCXVTSK",128,0)
 ;
"RTN","RCXVTSK",129,0)
 L +^RCXVTSK:60 E  HANG 600 G HIS
"RTN","RCXVTSK",130,0)
 ;
"RTN","RCXVTSK",131,0)
 I $G(DT)="" D DT^DICRW
"RTN","RCXVTSK",132,0)
 ;
"RTN","RCXVTSK",133,0)
 I $G(RCXVFFD)="" D
"RTN","RCXVTSK",134,0)
 . S RCFDATE=$$FYCY^IBCU8(DT)
"RTN","RCXVTSK",135,0)
 . S RCXVFFD=$P(RCFDATE,U,3),RCXVFTD=$P(RCFDATE,U,4)
"RTN","RCXVTSK",136,0)
 ;
"RTN","RCXVTSK",137,0)
 S RCXVDAT=RCXVFFD-.01
"RTN","RCXVTSK",138,0)
 F  S RCXVDAT=$O(^PRCA(430,"ACTDT",RCXVDAT)) Q:RCXVDAT=""!(RCXVDAT>RCXVFTD)  D
"RTN","RCXVTSK",139,0)
 . S IEN=""
"RTN","RCXVTSK",140,0)
 . F  S IEN=$O(^PRCA(430,"ACTDT",RCXVDAT,IEN)) Q:IEN=""  D
"RTN","RCXVTSK",141,0)
 .. I $P(^PRCA(430,IEN,0),U,8)=16!($P(^PRCA(430,IEN,0),U,8)=40) Q
"RTN","RCXVTSK",142,0)
 .. S RCXVBLN=IEN,DFN=$P(^PRCA(430,IEN,0),U,7)
"RTN","RCXVTSK",143,0)
 .. D FIL^RCXVDEQ("H")
"RTN","RCXVTSK",144,0)
 ;
"RTN","RCXVTSK",145,0)
 L -^RCXVTSK
"RTN","RCXVTSK",146,0)
 ;
"RTN","RCXVTSK",147,0)
 D EN
"RTN","RCXVTSK",148,0)
 K RCXVDAT,RCFDATE,RCXVFFD,RCXVFTD,IEN,DFN,RCXVBLN
"RTN","RCXVTSK",149,0)
 ;
"RTN","RCXVTSK",150,0)
 Q
"RTN","RCXVTSK",151,0)
 ;
"RTN","RCXVTSK",152,0)
CUR ;  Find all current fiscal year bills
"RTN","RCXVTSK",153,0)
 ;
"RTN","RCXVTSK",154,0)
 L +^RCXVTSK:60 E  HANG 600 G CUR
"RTN","RCXVTSK",155,0)
 ;
"RTN","RCXVTSK",156,0)
 S TTYP=""
"RTN","RCXVTSK",157,0)
 F  S TTYP=$O(^PRCA(433,"AT",TTYP)) Q:TTYP=""  D
"RTN","RCXVTSK",158,0)
 . I '+$P(^PRCA(430.3,TTYP,0),U,6) Q
"RTN","RCXVTSK",159,0)
 . S RDATE=RCXVFFD-.01
"RTN","RCXVTSK",160,0)
 . F  S RDATE=$O(^PRCA(433,"AT",TTYP,RDATE)) Q:RDATE=""!(RDATE\1>RCXVFTD)  D
"RTN","RCXVTSK",161,0)
 .. S IEN=""
"RTN","RCXVTSK",162,0)
 .. F  S IEN=$O(^PRCA(433,"AT",TTYP,RDATE,IEN)) Q:IEN=""  D
"RTN","RCXVTSK",163,0)
 ... S RCXVBLN=$P(^PRCA(433,IEN,0),U,2)
"RTN","RCXVTSK",164,0)
 ... I RCXVBLN="" Q
"RTN","RCXVTSK",165,0)
 ... ; Line below changed for patch 228 to do FY05 extract
"RTN","RCXVTSK",166,0)
 ... D FIL^RCXVDEQ("E")
"RTN","RCXVTSK",167,0)
 ;
"RTN","RCXVTSK",168,0)
 L -^RCXVTSK
"RTN","RCXVTSK",169,0)
 ;
"RTN","RCXVTSK",170,0)
 D EN
"RTN","RCXVTSK",171,0)
 K TTYP,RDATE,RCXVFFD,RCXVFTD,RCXVBLN
"RTN","RCXVTSK",172,0)
 Q
"RTN","RCXVTSK",173,0)
 ;
"RTN","RCXVTSK",174,0)
ACT ;  Active data extract
"RTN","RCXVTSK",175,0)
 ;
"RTN","RCXVTSK",176,0)
 L +^RCXVTSK:60 E  HANG 600 G ACT
"RTN","RCXVTSK",177,0)
 ;
"RTN","RCXVTSK",178,0)
 NEW STAT,CSTAT,QFL
"RTN","RCXVTSK",179,0)
 ;  Set up the AR Data Queue for all 'Active' and 'Suspended' bills
"RTN","RCXVTSK",180,0)
 F STAT=16,40 S IEN="" F  S IEN=$O(^PRCA(430,"AC",STAT,IEN)) Q:IEN=""  D
"RTN","RCXVTSK",181,0)
 . S RCXVBLN=IEN,DFN=$P(^PRCA(430,IEN,0),U,7)
"RTN","RCXVTSK",182,0)
 . I $P(^PRCA(430,IEN,0),U,2)="" Q
"RTN","RCXVTSK",183,0)
 . S CSTAT=$P(^PRCA(430,IEN,0),U,8)
"RTN","RCXVTSK",184,0)
 . I CSTAT'=STAT S QFL=0 D  Q:QFL
"RTN","RCXVTSK",185,0)
 .. I CSTAT'=16!(CSTAT'=40) S QFL=1
"RTN","RCXVTSK",186,0)
 . D FIL^RCXVDEQ("A")
"RTN","RCXVTSK",187,0)
 ;
"RTN","RCXVTSK",188,0)
 L -^RCXVTSK
"RTN","RCXVTSK",189,0)
 ;
"RTN","RCXVTSK",190,0)
 D EN
"RTN","RCXVTSK",191,0)
 Q
"RTN","RCXVTSK",192,0)
 ;
"RTN","RCXVTSK",193,0)
ER ; Unlock and log error
"RTN","RCXVTSK",194,0)
 L -^RCXVTSK
"RTN","RCXVTSK",195,0)
 D ^%ZTER
"RTN","RCXVTSK",196,0)
 D UNWIND^%ZTER
"RTN","RCXVTSK",197,0)
 Q
"VER")
8.0^22.0
"^DD",348.4,348.4,.04,0)
BATCH TYPE^S^D:DAILY;H:HISTORICAL;A:ACTIVE;R:DEPOSITS/RECEIPTS;C:CURRENT FY;E:FY 05;^0;4^Q
"^DD",348.4,348.4,.04,21,0)
^.001^1^1^3031020^^
"^DD",348.4,348.4,.04,21,1,0)
This field contains the type of data contained in this batch.
"^DD",348.4,348.4,.04,"DT")
3050107
"^DD",433,433,12,0)
TRANSACTION TYPE^RP430.3'X^PRCA(430.3,^1;2^K:$P(^PRCA(433,DA,0),U,2)="" X Q
"^DD",433,433,12,1,0)
^.1
"^DD",433,433,12,1,1,0)
433^AW^MUMPS
"^DD",433,433,12,1,1,1)
I X>7,X<12 S ^PRCA(433,"AW",X,DA)=""
"^DD",433,433,12,1,1,2)
K ^PRCA(433,"AW",X,DA)
"^DD",433,433,12,1,1,"%D",0)
^^3^3^2950417^
"^DD",433,433,12,1,1,"%D",1,0)
This cross-reference is set if the transaction is a 'write-off'
"^DD",433,433,12,1,1,"%D",2,0)
transaction (i.e., waivers and compromises).  It is used to calculate the
"^DD",433,433,12,1,1,"%D",3,0)
summary write-off documents for FMS.
"^DD",433,433,12,1,1,"DT")
2950417
"^DD",433,433,12,1,2,0)
433^AT2^MUMPS
"^DD",433,433,12,1,2,1)
I $P($G(^PRCA(433,DA,1)),U,9) S ^PRCA(433,"AT",X,+$P($P(^PRCA(433,DA,1),U,9),"."),DA)=""
"^DD",433,433,12,1,2,2)
I $P($G(^PRCA(433,DA,1)),U,9) K ^PRCA(433,"AT",X,+$P($P(^PRCA(433,DA,1),U,9),"."),DA)
"^DD",433,433,12,1,2,"%D",0)
^^3^3^2961126^^^^
"^DD",433,433,12,1,2,"%D",1,0)
This cross reference is used by the National Database collector and
"^DD",433,433,12,1,2,"%D",2,0)
by AR reports to look up transactions by transacation type and by date
"^DD",433,433,12,1,2,"%D",3,0)
entered (processed).
"^DD",433,433,12,1,2,"DT")
2961126
"^DD",433,433,12,1,3,0)
433^AEOB1^MUMPS
"^DD",433,433,12,1,3,1)
I X=2 D AEOB^RCRCUTL
"^DD",433,433,12,1,3,2)
I X'=2 K ^PRCA(433,"AEOB",+$P(^PRCA(433,DA,0),"^",2),DA)
"^DD",433,433,12,1,3,"%D",0)
^^3^3^2980227^^^^
"^DD",433,433,12,1,3,"%D",1,0)
The AEOB cross-ref will be set if the Transaction Type is Payment in Part,
"^DD",433,433,12,1,3,"%D",2,0)
for a TP bill referred to RC that does not have the EOB Code field
"^DD",433,433,12,1,3,"%D",3,0)
populated.
"^DD",433,433,12,1,3,"DT")
2971016
"^DD",433,433,12,1,4,0)
433^AI^MUMPS
"^DD",433,433,12,1,4,1)
D AT^RCXVDEQ
"^DD",433,433,12,1,4,2)
Q
"^DD",433,433,12,1,4,"%D",0)
^.101^2^2^3050722^^
"^DD",433,433,12,1,4,"%D",1,0)
This cross-reference will file the entry into the AR Date Queue
"^DD",433,433,12,1,4,"%D",2,0)
file for transmission to the ARC.
"^DD",433,433,12,1,4,"DT")
3050720
"^DD",433,433,12,3)
This field is internally populated by AR.  This field contains the transaction type for the entry.
"^DD",433,433,12,21,0)
^.001^2^2^3000808^^^
"^DD",433,433,12,21,1,0)
This points to the AR transaction file (#430.3). The input would be accepted
"^DD",433,433,12,21,2,0)
only if the transaction has a bill number.
"^DD",433,433,12,"DT")
3050720
"BLD",5318,6)
^SEQ #201
**END**
**END**

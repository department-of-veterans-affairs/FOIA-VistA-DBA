Released SOW*3*64 SEQ #61
Extracted from mail message
**KIDS**:SOW*3.0*64^

**INSTALL NAME**
SOW*3.0*64
"BLD",5833,0)
SOW*3.0*64^SOCIAL WORK^0^3070205^y
"BLD",5833,1,0)
^^10^10^3070112^^
"BLD",5833,1,1,0)
The Scheduling V. 5.3 package is moving the patient appointment information
"BLD",5833,1,2,0)
stored in the APPOINTMENT sub-file (#2.98) of the PATIENT file (#2) and the
"BLD",5833,1,3,0)
APPOINTMENT sub-file  (#44.001) of the HOSPITAL LOCATION file (#44) to the
"BLD",5833,1,4,0)
Government Off-the-Shelf (GOTS) database. Eventually, these sub-files will
"BLD",5833,1,5,0)
be deleted from the Scheduling files. As part of the Scheduling Replacement
"BLD",5833,1,6,0)
Project, Scheduling V. 5.3 package is providing a series of Application
"BLD",5833,1,7,0)
Programmer Interface calls (APIs) that will be used to get the patient
"BLD",5833,1,8,0)
appointment information from the new GOTS database. This patch replaces all
"BLD",5833,1,9,0)
direct references to the patient appointment information in the Management
"BLD",5833,1,10,0)
Monitor V [SOWKQAMONV] option, with the new APIs. 
"BLD",5833,4,0)
^9.64PA^^
"BLD",5833,6)
3^
"BLD",5833,6.3)
6
"BLD",5833,"KRN",0)
^9.67PA^8989.52^19
"BLD",5833,"KRN",.4,0)
.4
"BLD",5833,"KRN",.401,0)
.401
"BLD",5833,"KRN",.402,0)
.402
"BLD",5833,"KRN",.403,0)
.403
"BLD",5833,"KRN",.5,0)
.5
"BLD",5833,"KRN",.84,0)
.84
"BLD",5833,"KRN",3.6,0)
3.6
"BLD",5833,"KRN",3.8,0)
3.8
"BLD",5833,"KRN",9.2,0)
9.2
"BLD",5833,"KRN",9.8,0)
9.8
"BLD",5833,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5833,"KRN",9.8,"NM",1,0)
SOWKQAM5^^0^B16577166
"BLD",5833,"KRN",9.8,"NM","B","SOWKQAM5",1)

"BLD",5833,"KRN",19,0)
19
"BLD",5833,"KRN",19,"NM",0)
^9.68A^^
"BLD",5833,"KRN",19.1,0)
19.1
"BLD",5833,"KRN",101,0)
101
"BLD",5833,"KRN",409.61,0)
409.61
"BLD",5833,"KRN",771,0)
771
"BLD",5833,"KRN",870,0)
870
"BLD",5833,"KRN",8989.51,0)
8989.51
"BLD",5833,"KRN",8989.52,0)
8989.52
"BLD",5833,"KRN",8994,0)
8994
"BLD",5833,"KRN","B",.4,.4)

"BLD",5833,"KRN","B",.401,.401)

"BLD",5833,"KRN","B",.402,.402)

"BLD",5833,"KRN","B",.403,.403)

"BLD",5833,"KRN","B",.5,.5)

"BLD",5833,"KRN","B",.84,.84)

"BLD",5833,"KRN","B",3.6,3.6)

"BLD",5833,"KRN","B",3.8,3.8)

"BLD",5833,"KRN","B",9.2,9.2)

"BLD",5833,"KRN","B",9.8,9.8)

"BLD",5833,"KRN","B",19,19)

"BLD",5833,"KRN","B",19.1,19.1)

"BLD",5833,"KRN","B",101,101)

"BLD",5833,"KRN","B",409.61,409.61)

"BLD",5833,"KRN","B",771,771)

"BLD",5833,"KRN","B",870,870)

"BLD",5833,"KRN","B",8989.51,8989.51)

"BLD",5833,"KRN","B",8989.52,8989.52)

"BLD",5833,"KRN","B",8994,8994)

"BLD",5833,"QUES",0)
^9.62^^
"BLD",5833,"REQB",0)
^9.611^1^1
"BLD",5833,"REQB",1,0)
SOW*3.0*53^2
"BLD",5833,"REQB","B","SOW*3.0*53",1)

"MBREQ")
0
"PKG",73,-1)
1^1
"PKG",73,0)
SOCIAL WORK^SOW^Files and fields for the Social Work Package
"PKG",73,22,0)
^9.49I^1^1
"PKG",73,22,1,0)
3.0^2930427^2940121
"PKG",73,22,1,"PAH",1,0)
64^3070205^10000000022
"PKG",73,22,1,"PAH",1,1,0)
^^10^10^3070205
"PKG",73,22,1,"PAH",1,1,1,0)
The Scheduling V. 5.3 package is moving the patient appointment information
"PKG",73,22,1,"PAH",1,1,2,0)
stored in the APPOINTMENT sub-file (#2.98) of the PATIENT file (#2) and the
"PKG",73,22,1,"PAH",1,1,3,0)
APPOINTMENT sub-file  (#44.001) of the HOSPITAL LOCATION file (#44) to the
"PKG",73,22,1,"PAH",1,1,4,0)
Government Off-the-Shelf (GOTS) database. Eventually, these sub-files will
"PKG",73,22,1,"PAH",1,1,5,0)
be deleted from the Scheduling files. As part of the Scheduling Replacement
"PKG",73,22,1,"PAH",1,1,6,0)
Project, Scheduling V. 5.3 package is providing a series of Application
"PKG",73,22,1,"PAH",1,1,7,0)
Programmer Interface calls (APIs) that will be used to get the patient
"PKG",73,22,1,"PAH",1,1,8,0)
appointment information from the new GOTS database. This patch replaces all
"PKG",73,22,1,"PAH",1,1,9,0)
direct references to the patient appointment information in the Management
"PKG",73,22,1,"PAH",1,1,10,0)
Monitor V [SOWKQAMONV] option, with the new APIs. 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SOWKQAM5")
0^1^B16577166^B16861525
"RTN","SOWKQAM5",1,0)
SOWKQAM5 ;B'HAM ISC/SAB,DLR-Routine to print quality mgmt. monitor V report ; 20 Apr 93 / 7:58 AM [ 09/26/94  8:44 AM ]
"RTN","SOWKQAM5",2,0)
 ;;3.0; Social Work ;**34,53,64**;27 Apr 93;Build 6
"RTN","SOWKQAM5",3,0)
 ;Reference to GETPLIST^SDAMA202 supported by IA #3869
"RTN","SOWKQAM5",4,0)
 ;Reference to ^DIC(40.7 supported by IA #557
"RTN","SOWKQAM5",5,0)
 ;
"RTN","SOWKQAM5",6,0)
BEG W ! S %DT="AEXP",%DT("A")="ALL CASES STARTING FROM: " D ^%DT G:"^"[X CLOS G:Y'>0 BEG S SB1=Y X ^DD("DD") S SBA=Y
"RTN","SOWKQAM5",7,0)
END W ! S %DT("A")="ALL CASES ENDING: " D ^%DT G:"^"[X CLOS G:Y'>0 END S SE1=Y X ^DD("DD") S SEA=Y I SE1<SB1 W !,"Ending date must be after starting date ",! G BEG
"RTN","SOWKQAM5",8,0)
DEV W !!,"WARNING !!!",!?5,"This report is formatted for 132 columns and will be",!?5,"difficult to read if printed to the screen.",!
"RTN","SOWKQAM5",9,0)
 K ZTSK,%ZIS,IOP S SOWKION=ION,%ZIS="QM",%ZIS("B")="" D ^%ZIS K %ZIS I POP S IOP=SOWKION D ^%ZIS K SOWKION,IOP G CLOS Q
"RTN","SOWKQAM5",10,0)
 K SOWKION I $D(IO("Q")) S ZTRTN="ENQ^SOWKQAM5",ZTDESC="QUALITY MGMT. MONITOR V REPORT - SOCIAL WORK" F G="SE1","SB1","SBA","SEA" S:$D(@G) ZTSAVE(G)=""
"RTN","SOWKQAM5",11,0)
 I  K IO("Q") D ^%ZTLOAD I '$D(ZTSK) G CLOS
"RTN","SOWKQAM5",12,0)
 I $D(ZTSK) W !!,"Task Queued to Print",! K ZTSK G CLOS
"RTN","SOWKQAM5",13,0)
ENQ ;
"RTN","SOWKQAM5",14,0)
 F I=0:0 S I=$O(^SOWK(650.1,1,4,I)) Q:'I  D
"RTN","SOWKQAM5",15,0)
 . S SWCL=+^(I,0),SWCC=$G(^DIC(40.7,$P($G(^SC(SWCL,0)),"^",7),0)),SWCL(SWCL)=SWCL_"^"_$P(SWCC,"^",2)_"^"_$P(SWCC,"^",5)
"RTN","SOWKQAM5",16,0)
 S (TOT1,TOT2)=0
"RTN","SOWKQAM5",17,0)
 F SWCL=0:0 S SWCL=$O(SWCL(SWCL)) Q:'SWCL  D
"RTN","SOWKQAM5",18,0)
 . S CL=$P(SWCL(SWCL),"^"),CLP=$P(SWCL(SWCL),"^",2)
"RTN","SOWKQAM5",19,0)
 . S CLS=0 D SWCL S CLS=1 D TOC
"RTN","SOWKQAM5",20,0)
 ;
"RTN","SOWKQAM5",21,0)
 D PRI I $G(OUT)'=1 W !?64,"----",?90,"----",?118,"----",!,"TOTALS",?65,$J(TOT1,3,0),?91,$J(TOT2,3,0),?119,$S(TOT2:$J((TOT1/TOT2)*100,3,0)_"%",1:"***")
"RTN","SOWKQAM5",22,0)
 ;
"RTN","SOWKQAM5",23,0)
CLOS W ! W:$E(IOST)'["C" @IOF D ^%ZISC
"RTN","SOWKQAM5",24,0)
 K CL,ID,CLP,CLS,DFN,I,ZZ,I2,SB1,CDC,CN,SBA,SEA,Y,TOT1,TOT2,SE1,IOP,OUT,POP,SOWK,%DT,I1,G,SWCC,X,SWCL
"RTN","SOWKQAM5",25,0)
 D KVA^VADPT D:$D(ZTSK) KILL^%ZTLOAD
"RTN","SOWKQAM5",26,0)
 Q
"RTN","SOWKQAM5",27,0)
TOC ;
"RTN","SOWKQAM5",28,0)
 F CL=0:0 S CL=$O(^SC(CL)) Q:'CL  D
"RTN","SOWKQAM5",29,0)
 . I $P($G(^SC(CL,0)),"^",7)'="" D
"RTN","SOWKQAM5",30,0)
 . . I CLP=$P($G(^DIC(40.7,$P(^SC(CL,0),"^",7),0)),U,2) D SWCL
"RTN","SOWKQAM5",31,0)
 Q
"RTN","SOWKQAM5",32,0)
 ;CALCULATE TOTALS
"RTN","SOWKQAM5",33,0)
SWCL ;
"RTN","SOWKQAM5",34,0)
 K ^TMP($J,"SDAMA202","GETPLIST")
"RTN","SOWKQAM5",35,0)
 D GETPLIST^SDAMA202(CL,"3;12",,SB1,SE1)
"RTN","SOWKQAM5",36,0)
 F ID=0:0 S ID=$O(^TMP($J,"SDAMA202","GETPLIST",ID)) Q:'ID  D
"RTN","SOWKQAM5",37,0)
 . I $G(^TMP($J,"SDAMA202","GETPLIST",ID,3))="R",$G(^TMP($J,"SDAMA202","GETPLIST",ID,12))="O" D
"RTN","SOWKQAM5",38,0)
 . . S $P(SWCL(SWCL),"^",$S(CLS:5,1:4))=$P(SWCL(SWCL),"^",$S(CLS:5,1:4))+1
"RTN","SOWKQAM5",39,0)
 K ^TMP($J,"SDAMA202","GETPLIST")
"RTN","SOWKQAM5",40,0)
 Q
"RTN","SOWKQAM5",41,0)
PRI ;print data
"RTN","SOWKQAM5",42,0)
 U IO W:$Y @IOF D HDR1 Q:$G(OUT)=1  F CDC=0:0 S CDC=$O(SWCL(CDC)) Q:'CDC!($G(OUT)=1)  D:($Y+13)>IOSL CHK D:$G(OUT)'=1 OUT
"RTN","SOWKQAM5",43,0)
 Q
"RTN","SOWKQAM5",44,0)
HDR1 W !!?45,"Department of Veterans Affairs",!?45,$P(^DD("SITE"),"^")_" ("_$P(^DD("SITE",1),"^")_")",!?40,"Social Work Information Management System",!?45,"Quality Management Monitor V"
"RTN","SOWKQAM5",45,0)
 W !?40,"Access to Social Work Services by Location",!,"Date: "_$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3),?60,"Reporting Period "_SBA_" to "_SEA,!
"RTN","SOWKQAM5",46,0)
 W !?34,"Stop",?60,"# Pats. Open/",?86,"Total # Patients",?116,"% Population",!,"Clinic",?34,"Code",?46,"Location",?60,"# PT. Visits",?86,"Treatment Episodes",?118,"Served",!
"RTN","SOWKQAM5",47,0)
 Q
"RTN","SOWKQAM5",48,0)
OUT W !,$P(^SC($P(SWCL(CDC),"^"),0),"^"),?35,$P(SWCL(CDC),"^",2)
"RTN","SOWKQAM5",49,0)
 W ?46,$P(SWCL(CDC),"^",3),?65,$J($P(SWCL(CDC),"^",4),3,0),?91,$J($P(SWCL(CDC),"^",5),3,0),?119,$S(+$P(SWCL(CDC),"^",5):$J(+$P(SWCL(CDC),"^",4)/+$P(SWCL(CDC),"^",5)*100,3,0),1:$J("0",3,0))
"RTN","SOWKQAM5",50,0)
 S TOT1=TOT1+$P(SWCL(CDC),"^",4),TOT2=TOT2+$P(SWCL(CDC),"^",5)
"RTN","SOWKQAM5",51,0)
 Q
"RTN","SOWKQAM5",52,0)
CHK ;
"RTN","SOWKQAM5",53,0)
 N SWXX
"RTN","SOWKQAM5",54,0)
 I $E(IOST)["C" R !,"Press <RETURN> to continue: ",SWXX:DTIME I SWXX["^" S OUT=1 W @IOF Q
"RTN","SOWKQAM5",55,0)
 W @IOF D HDR1
"RTN","SOWKQAM5",56,0)
 Q
"VER")
8.0^22.0
"BLD",5833,6)
^61
**END**
**END**

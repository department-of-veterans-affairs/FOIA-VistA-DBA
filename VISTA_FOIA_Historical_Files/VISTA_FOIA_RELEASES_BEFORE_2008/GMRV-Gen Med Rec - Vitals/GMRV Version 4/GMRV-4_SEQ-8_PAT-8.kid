Released GMRV*4*8 SEQ #8
Extracted from mail message
**KIDS**:GMRV*4.0*8^

**INSTALL NAME**
GMRV*4.0*8
"BLD",1643,0)
GMRV*4.0*8^GEN. MED. REC. - VITALS^0^2990310^y
"BLD",1643,1,0)
^^1^1^2990310^
"BLD",1643,1,1,0)
Refer to the patch description.
"BLD",1643,4,0)
^9.64PA^^
"BLD",1643,"ABPKG")
n
"BLD",1643,"INI")

"BLD",1643,"INIT")
GMRV408
"BLD",1643,"KRN",0)
^9.67PA^19^18
"BLD",1643,"KRN",.4,0)
.4
"BLD",1643,"KRN",.4,"NM",0)
^9.68A^^
"BLD",1643,"KRN",.401,0)
.401
"BLD",1643,"KRN",.402,0)
.402
"BLD",1643,"KRN",.403,0)
.403
"BLD",1643,"KRN",.5,0)
.5
"BLD",1643,"KRN",.84,0)
.84
"BLD",1643,"KRN",3.6,0)
3.6
"BLD",1643,"KRN",3.8,0)
3.8
"BLD",1643,"KRN",9.2,0)
9.2
"BLD",1643,"KRN",9.8,0)
9.8
"BLD",1643,"KRN",9.8,"NM",0)
^9.68A^5^4
"BLD",1643,"KRN",9.8,"NM",1,0)
GMRVPCE0^^0^B2402085
"BLD",1643,"KRN",9.8,"NM",3,0)
GMRVPCE2^^0^B15636945
"BLD",1643,"KRN",9.8,"NM",4,0)
GMRVPCE3^^0^B10601950
"BLD",1643,"KRN",9.8,"NM",5,0)
GMRV408^^0^B1073940
"BLD",1643,"KRN",9.8,"NM","B","GMRV408",5)

"BLD",1643,"KRN",9.8,"NM","B","GMRVPCE0",1)

"BLD",1643,"KRN",9.8,"NM","B","GMRVPCE2",3)

"BLD",1643,"KRN",9.8,"NM","B","GMRVPCE3",4)

"BLD",1643,"KRN",19,0)
19
"BLD",1643,"KRN",19.1,0)
19.1
"BLD",1643,"KRN",101,0)
101
"BLD",1643,"KRN",409.61,0)
409.61
"BLD",1643,"KRN",771,0)
771
"BLD",1643,"KRN",869.2,0)
869.2
"BLD",1643,"KRN",870,0)
870
"BLD",1643,"KRN",8994,0)
8994
"BLD",1643,"KRN","B",.4,.4)

"BLD",1643,"KRN","B",.401,.401)

"BLD",1643,"KRN","B",.402,.402)

"BLD",1643,"KRN","B",.403,.403)

"BLD",1643,"KRN","B",.5,.5)

"BLD",1643,"KRN","B",.84,.84)

"BLD",1643,"KRN","B",3.6,3.6)

"BLD",1643,"KRN","B",3.8,3.8)

"BLD",1643,"KRN","B",9.2,9.2)

"BLD",1643,"KRN","B",9.8,9.8)

"BLD",1643,"KRN","B",19,19)

"BLD",1643,"KRN","B",19.1,19.1)

"BLD",1643,"KRN","B",101,101)

"BLD",1643,"KRN","B",409.61,409.61)

"BLD",1643,"KRN","B",771,771)

"BLD",1643,"KRN","B",869.2,869.2)

"BLD",1643,"KRN","B",870,870)

"BLD",1643,"KRN","B",8994,8994)

"BLD",1643,"QUES",0)
^9.62^^
"BLD",1643,"REQB",0)
^9.611^1^1
"BLD",1643,"REQB",1,0)
GMRV*4.0*7^2
"BLD",1643,"REQB","B","GMRV*4.0*7",1)

"INIT")
GMRV408
"MBREQ")
0
"PKG",44,-1)
1^1
"PKG",44,0)
GEN. MED. REC. - VITALS^GMRV^Vitals/Measurements Module of General Medical Record.
"PKG",44,20,0)
^9.402P^^
"PKG",44,22,0)
^9.49I^1^1
"PKG",44,22,1,0)
4.0^2970425^2970702^64
"PKG",44,22,1,"PAH",1,0)
8^2990310
"PKG",44,22,1,"PAH",1,1,0)
^^1^1^2990329
"PKG",44,22,1,"PAH",1,1,1,0)
Refer to the patch description.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","GMRV408")
0^5^B1073940
"RTN","GMRV408",1,0)
GMRV408 ;HIRMFO/DAD - Post Init to Add PN ;3/10/99  11:06
"RTN","GMRV408",2,0)
 ;;4.0;Vitals/Measurements;**8**;Apr 25, 1997
"RTN","GMRV408",3,0)
 N DA,DIE,DR
"RTN","GMRV408",4,0)
 D MES^XPDUTL("Adding 'PN' to the PCE ABBREVIATION field (#7)")
"RTN","GMRV408",5,0)
 D MES^XPDUTL("for the 'PAIN' entry in the GMRV VITAL TYPE")
"RTN","GMRV408",6,0)
 D MES^XPDUTL("file (#120.51).")
"RTN","GMRV408",7,0)
 S DA=+$O(^GMRD(120.51,"B","PAIN",0))
"RTN","GMRV408",8,0)
 I $P($G(^GMRD(120.51,DA,0)),U)="PAIN" D
"RTN","GMRV408",9,0)
 . S DIE="^GMRD(120.51,",DR="7///PN"
"RTN","GMRV408",10,0)
 . D ^DIE
"RTN","GMRV408",11,0)
 . Q
"RTN","GMRV408",12,0)
 E  D
"RTN","GMRV408",13,0)
 . D MES^XPDUTL("'PAIN' entry not found in the GMRV VITAL TYPE")
"RTN","GMRV408",14,0)
 . D MES^XPDUTL("file (#120.51).  'PN' not added to the PCE")
"RTN","GMRV408",15,0)
 . D MES^XPDUTL("ABBREVIATION field (#7).")
"RTN","GMRV408",16,0)
 . Q
"RTN","GMRV408",17,0)
 Q
"RTN","GMRVPCE0")
0^1^B2402085
"RTN","GMRVPCE0",1,0)
GMRVPCE0 ;HIRMFO/RM-Data Event Driver for Vitals ;2/9/99  14:10
"RTN","GMRVPCE0",2,0)
 ;;4.0;Vitals/Measurements;**8**;Apr 25, 1997
"RTN","GMRVPCE0",3,0)
VALIDATE(GMRVDAT) ; Given the array GMRVDAT passed in by PCE Device
"RTN","GMRVPCE0",4,0)
 ; Interface (by reference, i.e., D VALIDATE^GMRVPCE0(.ARRAY)), whose
"RTN","GMRVPCE0",5,0)
 ; format is described in the PCE Device Interface documentation, this
"RTN","GMRVPCE0",6,0)
 ; procedure will validate the Vitals data.  If the data is invalid,
"RTN","GMRVPCE0",7,0)
 ; the procedure will return GMRVDAT("ERROR") as described in the PCE
"RTN","GMRVPCE0",8,0)
 ; Device Interface documentation.
"RTN","GMRVPCE0",9,0)
 ;
"RTN","GMRVPCE0",10,0)
 Q:$D(GMRVDAT("ERROR"))
"RTN","GMRVPCE0",11,0)
 D PCE^GMRVPCE1(0)
"RTN","GMRVPCE0",12,0)
 Q
"RTN","GMRVPCE0",13,0)
STORE(GMRVDAT) ; Given vitals data passed in the GMRVDAT array, this
"RTN","GMRVPCE0",14,0)
 ; procedure will store that data in the GMRV Patient Measurements
"RTN","GMRVPCE0",15,0)
 ; (120.5) file.
"RTN","GMRVPCE0",16,0)
 ;
"RTN","GMRVPCE0",17,0)
 Q:$D(GMRVDAT("ERROR"))
"RTN","GMRVPCE0",18,0)
 D PCE^GMRVPCE1(1)
"RTN","GMRVPCE0",19,0)
 Q
"RTN","GMRVPCE0",20,0)
HELP(GMRVTYP,GMRVARRY) ; This procedure will return help for a particular
"RTN","GMRVPCE0",21,0)
 ; measurement type in an array.
"RTN","GMRVPCE0",22,0)
 ;   Input
"RTN","GMRVPCE0",23,0)
 ;   Variables:  GMRVTYP=Type of measurement (abbreviation
"RTN","GMRVPCE0",24,0)
 ;               (req.)  from PCE Device Interface Specification).
"RTN","GMRVPCE0",25,0)
 ;               GMRVARR=Closed array reference of array to return
"RTN","GMRVPCE0",26,0)
 ;               (opt.)  help in.  If this variable is not specified,
"RTN","GMRVPCE0",27,0)
 ;                       help is returned in ^TMP($J,"GMRVHELP").
"RTN","GMRVPCE0",28,0)
 ;
"RTN","GMRVPCE0",29,0)
 Q:'$$VMTYPES(GMRVTYP)
"RTN","GMRVPCE0",30,0)
 I $G(GMRVARRY)="" S GMRVARRY="^TMP($J,""GMRVHELP"")"
"RTN","GMRVPCE0",31,0)
 D HELP^GMRVPCE2(GMRVTYP,GMRVARRY)
"RTN","GMRVPCE0",32,0)
 Q
"RTN","GMRVPCE0",33,0)
RATECHK(GMRVTYP,GMRVRATE,GMRVUNIT) ; Extrinsic function to validate the
"RTN","GMRVPCE0",34,0)
 ; rate for a particular measurement
"RTN","GMRVPCE0",35,0)
 ;   Input
"RTN","GMRVPCE0",36,0)
 ;   Variables:  GMRVTYP=Type of measurement (abbreviation
"RTN","GMRVPCE0",37,0)
 ;               (req.)  from PCE Device Interface Specification).
"RTN","GMRVPCE0",38,0)
 ;               GMRVRATE=Measurement rate to be validated.
"RTN","GMRVPCE0",39,0)
 ;               (req.)
"RTN","GMRVPCE0",40,0)
 ;               GMRVUNIT=Unit of measurement for rate, if specified.
"RTN","GMRVPCE0",41,0)
 ;               (opt.)
"RTN","GMRVPCE0",42,0)
 ;   Function value:  1 if rate is valid.
"RTN","GMRVPCE0",43,0)
 ;                    0 if rate is invalid.
"RTN","GMRVPCE0",44,0)
 ;
"RTN","GMRVPCE0",45,0)
 N GMRVFXN S GMRVFXN=0
"RTN","GMRVPCE0",46,0)
 I $$VMTYPES(GMRVTYP),$G(GMRVRATE)]"" D
"RTN","GMRVPCE0",47,0)
 .  I $G(GMRVUNIT)]"" S GMRVRATE=$$UNITRATE^GMRVPCE3(GMRVTYP,GMRVRATE,GMRVUNIT)
"RTN","GMRVPCE0",48,0)
 .  I $G(GMRVRATE)]"" S GMRVFXN=$$VALID^GMRVPCE3(GMRVTYP,GMRVRATE)
"RTN","GMRVPCE0",49,0)
 .  Q
"RTN","GMRVPCE0",50,0)
 Q GMRVFXN
"RTN","GMRVPCE0",51,0)
VMTYPES(TYPE) ; This function returns one if TYPE is a valid type abbrev.
"RTN","GMRVPCE0",52,0)
 ; from the PCE Device Interface Specification.
"RTN","GMRVPCE0",53,0)
 Q "^AG^AUD^BP^HT^TMP^WT^FT^FH^HC^HE^PU^RS^TON^VC^VU^PN^"[(U_TYPE_U)
"RTN","GMRVPCE2")
0^3^B15636945
"RTN","GMRVPCE2",1,0)
GMRVPCE2 ;HIRMFO/RM-V/M Help for AICS ;3/9/99  15:25
"RTN","GMRVPCE2",2,0)
 ;;4.0;Vitals/Measurements;**8**;Apr 25, 1997
"RTN","GMRVPCE2",3,0)
HELP(TYPE,HLP) ; Entry for Help Screens.  HLP is a closed array reference 
"RTN","GMRVPCE2",4,0)
 ; which will have the help returned for measuremnt abbreviation TYPE.
"RTN","GMRVPCE2",5,0)
 N X,Y I TYPE="VU" S TYPE="VC"
"RTN","GMRVPCE2",6,0)
 F Y=1:1 S X=$T(@TYPE+Y) Q:$P(X,";;",2)="~"  S @HLP@(Y)=$P(X,";;",2,99)
"RTN","GMRVPCE2",7,0)
 Q
"RTN","GMRVPCE2",8,0)
AG ; HELP FOR ABDOMINAL GIRTH
"RTN","GMRVPCE2",9,0)
 ;;Enter Abdominal Girth.  Must be in the range 0-150.
"RTN","GMRVPCE2",10,0)
 ;;~
"RTN","GMRVPCE2",11,0)
AUD ; HELP FOR AUDIOMETRY.
"RTN","GMRVPCE2",12,0)
 ;;Enter 8 readings for right ear followed by 8 readings for left ear, all
"RTN","GMRVPCE2",13,0)
 ;;followed by slashes (/).  Values must be between 0 and 110.
"RTN","GMRVPCE2",14,0)
 ;;Example:  100/100/100/95/90/90/85/80/105/105/105/105/100/100/95/90/
"RTN","GMRVPCE2",15,0)
 ;;~
"RTN","GMRVPCE2",16,0)
BP ; HELP FOR BLOOD PRESSURE
"RTN","GMRVPCE2",17,0)
 ;;Enter as SYSTOLIC/INTERMEDIATE/DIASTOLIC.  Each pressure is in the range
"RTN","GMRVPCE2",18,0)
 ;;of 0-300.  INTERMEDIATE pressure is optional.
"RTN","GMRVPCE2",19,0)
 ;;Examples:  98/64 or 120/100/80
"RTN","GMRVPCE2",20,0)
 ;;~
"RTN","GMRVPCE2",21,0)
FH ; HELP FOR FUNDAL HEIGHT
"RTN","GMRVPCE2",22,0)
 ;;Enter a Fundal Height.  Must be in the range 10-50.
"RTN","GMRVPCE2",23,0)
 ;;~
"RTN","GMRVPCE2",24,0)
FT ; HELP FOR FETAL HEART TONES
"RTN","GMRVPCE2",25,0)
 ;;Enter Fetal Heart Tone.  Must be in the range 50-250.
"RTN","GMRVPCE2",26,0)
 ;;~
"RTN","GMRVPCE2",27,0)
HC ; HELP FOR HEAD CIRCUMFERENCE
"RTN","GMRVPCE2",28,0)
 ;;Enter a Head Circumference.  If entered in inches, the measurement must
"RTN","GMRVPCE2",29,0)
 ;;be 10-30 inches with three decimal places, but the decimal part must be
"RTN","GMRVPCE2",30,0)
 ;;a multiple of .125.
"RTN","GMRVPCE2",31,0)
 ;;Examples:  23 or 24.125 or 23.25 or 30.375 or 28.5.
"RTN","GMRVPCE2",32,0)
 ;;
"RTN","GMRVPCE2",33,0)
 ;;If entered in centimeters, the measurement must be 26-76 centimeters with
"RTN","GMRVPCE2",34,0)
 ;;one decimal place.
"RTN","GMRVPCE2",35,0)
 ;;Examples:  30.2 or 45
"RTN","GMRVPCE2",36,0)
 ;;~
"RTN","GMRVPCE2",37,0)
HE ; HELP FOR HEARING
"RTN","GMRVPCE2",38,0)
 ;;Enter N for Normal, or A for Abnormal.
"RTN","GMRVPCE2",39,0)
 ;;~
"RTN","GMRVPCE2",40,0)
HT ; HELP FOR HEIGHT
"RTN","GMRVPCE2",41,0)
 ;;Enter Height.  A number in one of the following formats (2 decimals
"RTN","GMRVPCE2",42,0)
 ;;allowed):
"RTN","GMRVPCE2",43,0)
 ;;    72I (inches)   147C or 147CM (centimeters)
"RTN","GMRVPCE2",44,0)
 ;;    5FT10IN or 5'10"" (for 5 feet 10 inches)
"RTN","GMRVPCE2",45,0)
 ;;~
"RTN","GMRVPCE2",46,0)
PU ; HELP FOR PULSE
"RTN","GMRVPCE2",47,0)
 ;;Enter pulse.  Must be in range of 0-300.
"RTN","GMRVPCE2",48,0)
 ;;~
"RTN","GMRVPCE2",49,0)
RS ; HELP FOR RESPIRATION
"RTN","GMRVPCE2",50,0)
 ;;Enter the respiration rate of the patient.  Must be in range of 0-100.
"RTN","GMRVPCE2",51,0)
 ;;~
"RTN","GMRVPCE2",52,0)
TON ; HELP FOR TONOMETRY
"RTN","GMRVPCE2",53,0)
 ;;Enter READING for RIGHT eye, followed by a SLASH (/), followed by the
"RTN","GMRVPCE2",54,0)
 ;;READING for LEFT eye.  SLASH is REQUIRED!  Readings are in the range
"RTN","GMRVPCE2",55,0)
 ;;of 0-80.
"RTN","GMRVPCE2",56,0)
 ;;Examples:  18/18, /20, 18/, 10/13.
"RTN","GMRVPCE2",57,0)
 ;;~
"RTN","GMRVPCE2",58,0)
TMP ; HELP FOR TEMPERATURE
"RTN","GMRVPCE2",59,0)
 ;;Enter Temperature.  Temperature can be entered as degrees Farenheit
"RTN","GMRVPCE2",60,0)
 ;;or degrees Centigrade.  Range for degrees Farenheit is 45-120 and
"RTN","GMRVPCE2",61,0)
 ;;range for degrees Celcius is 0-45.  Readings can have two decimal places.
"RTN","GMRVPCE2",62,0)
 ;;Examples:  100.3F or 37C
"RTN","GMRVPCE2",63,0)
 ;;~
"RTN","GMRVPCE2",64,0)
VC ; HELP FOR VISION CORRECTED (AND VISION UNCORRECTED)
"RTN","GMRVPCE2",65,0)
 ;;Enter denominators only.  The 20/ is assumed.  Enter right eye / left eye
"RTN","GMRVPCE2",66,0)
 ;;in form n/n (20/20).  If right eye only enter n (20).  If left eye only
"RTN","GMRVPCE2",67,0)
 ;;enter /n (/20).  Must be between 10 and 999.
"RTN","GMRVPCE2",68,0)
 ;;~
"RTN","GMRVPCE2",69,0)
WT ; HELP FOR WEIGHT
"RTN","GMRVPCE2",70,0)
 ;;Enter Weight.  Weight can be entered in pounds (L) or Kilograms (K). 
"RTN","GMRVPCE2",71,0)
 ;;Readings in pounds must be in the range 0-1500 and readings in kilograms
"RTN","GMRVPCE2",72,0)
 ;;must be in the range of 0-700.  Readings can have two decimal places.
"RTN","GMRVPCE2",73,0)
 ;;Examples:  195L or 79.5K
"RTN","GMRVPCE2",74,0)
 ;;~
"RTN","GMRVPCE2",75,0)
PN ; HELP FOR PAIN
"RTN","GMRVPCE2",76,0)
 ;;Enter pain scale number (0-10,99).
"RTN","GMRVPCE2",77,0)
 ;;0       = patient verbalizes no pain.
"RTN","GMRVPCE2",78,0)
 ;;1 to 10 = patient verbalizes having pain.
"RTN","GMRVPCE2",79,0)
 ;;          ( 1=slightly uncomfortable/minimal pain)
"RTN","GMRVPCE2",80,0)
 ;;          (10=worst imaginable pain)
"RTN","GMRVPCE2",81,0)
 ;;99      = patient unable to respond/communicate pain level.  
"RTN","GMRVPCE2",82,0)
 ;;Examples:  99 or 5
"RTN","GMRVPCE2",83,0)
 ;;~
"RTN","GMRVPCE3")
0^4^B10601950
"RTN","GMRVPCE3",1,0)
GMRVPCE3 ;HIRMFO/RM-V/M Data Validation for AICS ;3/26/99  09:15
"RTN","GMRVPCE3",2,0)
 ;;4.0;Vitals/Measurements;**8**;Apr 25, 1997
"RTN","GMRVPCE3",3,0)
VALID(TYPE,X) ; This function returns 1 if rate (X) is valid for
"RTN","GMRVPCE3",4,0)
 ; measurement type (TYPE).
"RTN","GMRVPCE3",5,0)
 N FXN S FXN=0
"RTN","GMRVPCE3",6,0)
 I TYPE="VU" S TYPE="VC"
"RTN","GMRVPCE3",7,0)
 D @TYPE I $D(X) S FXN=1
"RTN","GMRVPCE3",8,0)
 Q FXN
"RTN","GMRVPCE3",9,0)
AG ; INPUT TRANSFORM FOR ABDOMINAL GIRTH
"RTN","GMRVPCE3",10,0)
 N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2,10)) I UNIT="" K X Q
"RTN","GMRVPCE3",11,0)
 S X=+X
"RTN","GMRVPCE3",12,0)
 I $E(UNIT)="C"&("CM"[UNIT) S X=$$CMTOIN(+X,0),UNIT="IN"
"RTN","GMRVPCE3",13,0)
 I $E(UNIT)="I"&("IN"[UNIT) K:+X'=X!(X>150)!(X<0)!(X?.E1"."1N.N) X
"RTN","GMRVPCE3",14,0)
 E  K X
"RTN","GMRVPCE3",15,0)
 Q
"RTN","GMRVPCE3",16,0)
AUD ; INPUT TRANSFORM FOR AUDIOMETRY.
"RTN","GMRVPCE3",17,0)
 N I,R,L
"RTN","GMRVPCE3",18,0)
 K:X'?.N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/" X
"RTN","GMRVPCE3",19,0)
 I $D(X) F I=1:1:8 S R=$P(X,"/",I) I R]"" K:+R'=R!(R>110)!(R<0) X
"RTN","GMRVPCE3",20,0)
 I $D(X) F I=9:1:16 S L=$P(X,"/",I) I L]"" K:+L'=L!(L>110)!(L<0) X
"RTN","GMRVPCE3",21,0)
 Q
"RTN","GMRVPCE3",22,0)
BP ; INPUT TRANSFORM FOR BLOOD PRESSURE
"RTN","GMRVPCE3",23,0)
 K:X'?2.3N1"/"2.3N1"/"2.3N&(X'?2.3N1"/"2.3N) X I $D(X) K:$P(X,"/",1)>300!($P(X,"/",2)>300)!(+$P(X,"/",3)>300) X
"RTN","GMRVPCE3",24,0)
 I $D(X),$P(X,"/")'>$P(X,"/",$L(X,"/")) K X
"RTN","GMRVPCE3",25,0)
 Q
"RTN","GMRVPCE3",26,0)
FH ; INPUT TRANSFORM FOR FUNDAL HEIGHT
"RTN","GMRVPCE3",27,0)
 N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2,10)) I UNIT="" K X Q
"RTN","GMRVPCE3",28,0)
 S X=+X
"RTN","GMRVPCE3",29,0)
 I $E(UNIT)="C"&("CM"[UNIT) S X=$$CMTOIN(+X,0),UNIT="IN"
"RTN","GMRVPCE3",30,0)
 I $E(UNIT)="I"&("IN"[UNIT) K:+X'=X!(X>50)!(X<10)!(X?.E1"."1N.N) X
"RTN","GMRVPCE3",31,0)
 E  K X
"RTN","GMRVPCE3",32,0)
 Q
"RTN","GMRVPCE3",33,0)
FT ; INPUT TRANSFORM FOR FETAL HEART TONES
"RTN","GMRVPCE3",34,0)
 K:+X'=X!(X>250)!(X<50)!(X?.E1"."1N.N) X
"RTN","GMRVPCE3",35,0)
 Q
"RTN","GMRVPCE3",36,0)
HC ; INPUT TRANSFORM FOR HEAD CIRCUMFERENCE
"RTN","GMRVPCE3",37,0)
 N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2,10)) I UNIT="" K X Q
"RTN","GMRVPCE3",38,0)
 I $E(UNIT)="C"&("CM"[UNIT) D  Q
"RTN","GMRVPCE3",39,0)
 .  K:+X>76!(+X<26)!(+X?.E1"."3N.N) X
"RTN","GMRVPCE3",40,0)
 .  I $D(X) S X=$J(.3937*(+X),0,2)
"RTN","GMRVPCE3",41,0)
 .  Q
"RTN","GMRVPCE3",42,0)
 I $E(UNIT)="I" D  Q
"RTN","GMRVPCE3",43,0)
 .  K:+X>30!(+X<10)!(+X?.E1"."4N.N) X
"RTN","GMRVPCE3",44,0)
 .  I $D(X),+X?.E1"."1N.N D
"RTN","GMRVPCE3",45,0)
 .  .  N F S F=$P(+X,".",2)
"RTN","GMRVPCE3",46,0)
 .  .  K:"^125^25^375^5^625^75^875^"'[("^"_F_"^") X
"RTN","GMRVPCE3",47,0)
 .  .  Q
"RTN","GMRVPCE3",48,0)
 .  I $D(X) S X=+X
"RTN","GMRVPCE3",49,0)
 .  Q
"RTN","GMRVPCE3",50,0)
 K X
"RTN","GMRVPCE3",51,0)
 Q
"RTN","GMRVPCE3",52,0)
HE ; INPUT TRANSFORM FOR HEARING
"RTN","GMRVPCE3",53,0)
 K:"^N^A^"'[("^"_$$UP^XLFSTR(X)_"^") X
"RTN","GMRVPCE3",54,0)
 Q
"RTN","GMRVPCE3",55,0)
HT ; INPUT TRANSFORM FOR HEIGHT
"RTN","GMRVPCE3",56,0)
 D EN3^GMRVUT0 K:X=0!(X>100)!(X<1) X
"RTN","GMRVPCE3",57,0)
 Q
"RTN","GMRVPCE3",58,0)
PU ; INPUT TRANSFORM FOR PULSE
"RTN","GMRVPCE3",59,0)
 K:+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N) X
"RTN","GMRVPCE3",60,0)
 Q
"RTN","GMRVPCE3",61,0)
RS ; INPUT TRANSFORM FOR RESPIRATION
"RTN","GMRVPCE3",62,0)
 K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X
"RTN","GMRVPCE3",63,0)
 Q
"RTN","GMRVPCE3",64,0)
TON ; INPUT TRANSFORM FOR TONOMETRY
"RTN","GMRVPCE3",65,0)
 N R,L
"RTN","GMRVPCE3",66,0)
 K:X'?.N1"/"1N.N&(X'?1N.N1"/".N) X
"RTN","GMRVPCE3",67,0)
 I $D(X) S R=$P(X,"/") I R]"" K:R'=+R!(R>80)!(R<0) X
"RTN","GMRVPCE3",68,0)
 I $D(X) S L=$P(X,"/",2) I L]"" K:L'=+L!(L>80)!(L<0) X
"RTN","GMRVPCE3",69,0)
 Q
"RTN","GMRVPCE3",70,0)
TMP ; INPUT TRANSFORM FOR TEMPERATURE
"RTN","GMRVPCE3",71,0)
 K:+X'=X!(X>120)!(X<0)!(X?.E1"."3N.N) X I $D(X) S:X<45 X=$J(+X*(9/5)+32,0,1)
"RTN","GMRVPCE3",72,0)
 Q
"RTN","GMRVPCE3",73,0)
VC ; INPUT TRANSFORM FOR VISION CORRECTED (AND VISION UNCORRECTED)
"RTN","GMRVPCE3",74,0)
 N R,L
"RTN","GMRVPCE3",75,0)
 K:X'=+X&(X'?.N1"/"1N.N) X
"RTN","GMRVPCE3",76,0)
 I $D(X) S R=$P(X,"/") I R]"" K:R'=+R!(R>999)!(R<10) X
"RTN","GMRVPCE3",77,0)
 I $D(X) S L=$P(X,"/",2) I L]"" K:L'=+L!(L>999)!(L<10) X
"RTN","GMRVPCE3",78,0)
 Q
"RTN","GMRVPCE3",79,0)
WT ; INPUT TRANSFORM FOR WEIGHT
"RTN","GMRVPCE3",80,0)
 S GMR=$E($P(X,+X,2)) S X=$S(GMR="":0,"Kk"[GMR:+$J(2.2*(+X),0,2),"Ll"[GMR:+X,1:0) K:X>1500!(X=0)!(X<0) X K GMR
"RTN","GMRVPCE3",81,0)
 Q
"RTN","GMRVPCE3",82,0)
PN ; INPUT TRANSFORM FOR PAIN
"RTN","GMRVPCE3",83,0)
 K:"^0^1^2^3^4^5^6^7^8^9^10^99^"'[(U_X_U) X
"RTN","GMRVPCE3",84,0)
 Q
"RTN","GMRVPCE3",85,0)
UNITRATE(TYPE,RATE,UNIT) ; This function will add the unit of
"RTN","GMRVPCE3",86,0)
 ; measurement to the rate so the input transforms will work properly.
"RTN","GMRVPCE3",87,0)
 ;   Input variables:  TYPE = Measurement type
"RTN","GMRVPCE3",88,0)
 ;                     RATE = Actual measurement (passed in by ref.)
"RTN","GMRVPCE3",89,0)
 ;                     UNIT = Unit of measurement
"RTN","GMRVPCE3",90,0)
 ;   Function value: Transormed rate with units on the end.
"RTN","GMRVPCE3",91,0)
 N FXN S FXN=RATE,UNIT=$G(UNIT)
"RTN","GMRVPCE3",92,0)
 I TYPE="AG"!(TYPE="FH")!(TYPE="HC")!(TYPE="HT") D
"RTN","GMRVPCE3",93,0)
 .  I "^CM^IN^"'[("^"_UNIT_"^") S FXN=""
"RTN","GMRVPCE3",94,0)
 .  E  S FXN=RATE_$E(UNIT)
"RTN","GMRVPCE3",95,0)
 .  Q
"RTN","GMRVPCE3",96,0)
 I TYPE="TMP" D
"RTN","GMRVPCE3",97,0)
 .  I "^C^F^"'[("^"_UNIT_"^") S FXN=""
"RTN","GMRVPCE3",98,0)
 .  I UNIT="C" S FXN=+$J(+RATE*(9/5)+32,0,1)
"RTN","GMRVPCE3",99,0)
 .  Q
"RTN","GMRVPCE3",100,0)
 I TYPE="WT" D
"RTN","GMRVPCE3",101,0)
 .  I "^LB^KG^"'[("^"_UNIT_"^") S FXN=""
"RTN","GMRVPCE3",102,0)
 .  E  S FXN=RATE_$E(UNIT)
"RTN","GMRVPCE3",103,0)
 .  Q
"RTN","GMRVPCE3",104,0)
 Q FXN
"RTN","GMRVPCE3",105,0)
CMTOIN(X,PREC) ; Convert CM to IN, given CM value (X) this function will
"RTN","GMRVPCE3",106,0)
 ; return IN value.  Optional input value of PREC for precision,
"RTN","GMRVPCE3",107,0)
 ; if not set, 2 decimals will be returned.
"RTN","GMRVPCE3",108,0)
 Q +$J(.3937*(+X),0,+$G(PREC,2))
"VER")
8.0^21.0
**END**
**END**

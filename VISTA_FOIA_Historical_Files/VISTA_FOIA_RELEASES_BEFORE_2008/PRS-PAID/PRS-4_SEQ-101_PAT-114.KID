Released PRS*4*114 SEQ #101
Extracted from mail message
**KIDS**:PRS*4.0*114^

**INSTALL NAME**
PRS*4.0*114
"BLD",7195,0)
PRS*4.0*114^PAID^0^3070725^y
"BLD",7195,1,0)
^^1^1^3070418^
"BLD",7195,1,1,0)
This patch will modify the display of VA employee social security numbers.
"BLD",7195,4,0)
^9.64PA^^
"BLD",7195,6.3)
6
"BLD",7195,"ABPKG")
n
"BLD",7195,"KRN",0)
^9.67PA^8989.52^19
"BLD",7195,"KRN",.4,0)
.4
"BLD",7195,"KRN",.4,"NM",0)
^9.68A^^
"BLD",7195,"KRN",.401,0)
.401
"BLD",7195,"KRN",.402,0)
.402
"BLD",7195,"KRN",.403,0)
.403
"BLD",7195,"KRN",.403,"NM",0)
^9.68A^6^6
"BLD",7195,"KRN",.403,"NM",1,0)
PRSA FEE POST    FILE #458^458^0
"BLD",7195,"KRN",.403,"NM",2,0)
PRSA LD POST    FILE #450^450^0
"BLD",7195,"KRN",.403,"NM",3,0)
PRSA LV REQ    FILE #458.1^458.1^0
"BLD",7195,"KRN",.403,"NM",4,0)
PRSA TE EDIT    FILE #458^458^0
"BLD",7195,"KRN",.403,"NM",5,0)
PRSA TP POST1    FILE #458^458^0
"BLD",7195,"KRN",.403,"NM",6,0)
PRSA VC POST    FILE #458^458^0
"BLD",7195,"KRN",.403,"NM","B","PRSA FEE POST    FILE #458",1)

"BLD",7195,"KRN",.403,"NM","B","PRSA LD POST    FILE #450",2)

"BLD",7195,"KRN",.403,"NM","B","PRSA LV REQ    FILE #458.1",3)

"BLD",7195,"KRN",.403,"NM","B","PRSA TE EDIT    FILE #458",4)

"BLD",7195,"KRN",.403,"NM","B","PRSA TP POST1    FILE #458",5)

"BLD",7195,"KRN",.403,"NM","B","PRSA VC POST    FILE #458",6)

"BLD",7195,"KRN",.5,0)
.5
"BLD",7195,"KRN",.84,0)
.84
"BLD",7195,"KRN",3.6,0)
3.6
"BLD",7195,"KRN",3.8,0)
3.8
"BLD",7195,"KRN",9.2,0)
9.2
"BLD",7195,"KRN",9.8,0)
9.8
"BLD",7195,"KRN",9.8,"NM",0)
^9.68A^20^20
"BLD",7195,"KRN",9.8,"NM",1,0)
PRSADP1^^0^B11280993
"BLD",7195,"KRN",9.8,"NM",2,0)
PRSADP2^^0^B20321723
"BLD",7195,"KRN",9.8,"NM",3,0)
PRSAEDL^^0^B12250380
"BLD",7195,"KRN",9.8,"NM",4,0)
PRSAEDS^^0^B2865724
"BLD",7195,"KRN",9.8,"NM",5,0)
PRSALVB^^0^B15774190
"BLD",7195,"KRN",9.8,"NM",6,0)
PRSALVE^^0^B6334175
"BLD",7195,"KRN",9.8,"NM",7,0)
PRSALVL^^0^B13610849
"BLD",7195,"KRN",9.8,"NM",8,0)
PRSALVX^^0^B5286389
"BLD",7195,"KRN",9.8,"NM",9,0)
PRSAOTL^^0^B10131034
"BLD",7195,"KRN",9.8,"NM",10,0)
PRSAOTS^^0^B3632675
"BLD",7195,"KRN",9.8,"NM",11,0)
PRSAOTX^^0^B12887435
"BLD",7195,"KRN",9.8,"NM",12,0)
PRSAPPP^^0^B13712907
"BLD",7195,"KRN",9.8,"NM",13,0)
PRSASU^^0^B7171027
"BLD",7195,"KRN",9.8,"NM",14,0)
PRSATE2^^0^B19536924
"BLD",7195,"KRN",9.8,"NM",15,0)
PRSDSRS^^0^B20527859
"BLD",7195,"KRN",9.8,"NM",16,0)
PRSDV450^^0^B24678259
"BLD",7195,"KRN",9.8,"NM",17,0)
PRSROT1^^0^B23328023
"BLD",7195,"KRN",9.8,"NM",18,0)
PRSROT11^^0^B16238575
"BLD",7195,"KRN",9.8,"NM",19,0)
PRSRUT0^^0^B11680676
"BLD",7195,"KRN",9.8,"NM",20,0)
PRSALD^^0^B7274044
"BLD",7195,"KRN",9.8,"NM","B","PRSADP1",1)

"BLD",7195,"KRN",9.8,"NM","B","PRSADP2",2)

"BLD",7195,"KRN",9.8,"NM","B","PRSAEDL",3)

"BLD",7195,"KRN",9.8,"NM","B","PRSAEDS",4)

"BLD",7195,"KRN",9.8,"NM","B","PRSALD",20)

"BLD",7195,"KRN",9.8,"NM","B","PRSALVB",5)

"BLD",7195,"KRN",9.8,"NM","B","PRSALVE",6)

"BLD",7195,"KRN",9.8,"NM","B","PRSALVL",7)

"BLD",7195,"KRN",9.8,"NM","B","PRSALVX",8)

"BLD",7195,"KRN",9.8,"NM","B","PRSAOTL",9)

"BLD",7195,"KRN",9.8,"NM","B","PRSAOTS",10)

"BLD",7195,"KRN",9.8,"NM","B","PRSAOTX",11)

"BLD",7195,"KRN",9.8,"NM","B","PRSAPPP",12)

"BLD",7195,"KRN",9.8,"NM","B","PRSASU",13)

"BLD",7195,"KRN",9.8,"NM","B","PRSATE2",14)

"BLD",7195,"KRN",9.8,"NM","B","PRSDSRS",15)

"BLD",7195,"KRN",9.8,"NM","B","PRSDV450",16)

"BLD",7195,"KRN",9.8,"NM","B","PRSROT1",17)

"BLD",7195,"KRN",9.8,"NM","B","PRSROT11",18)

"BLD",7195,"KRN",9.8,"NM","B","PRSRUT0",19)

"BLD",7195,"KRN",19,0)
19
"BLD",7195,"KRN",19,"NM",0)
^9.68A^7^7
"BLD",7195,"KRN",19,"NM",1,0)
PRSA SUP LABOR-EDIT^^0
"BLD",7195,"KRN",19,"NM",2,0)
PRSD 04 EMPLOYEE INQUIRY^^4^
"BLD",7195,"KRN",19,"NM",3,0)
PRSD 04 EMPLOYEE INQUIRY MENU^^0
"BLD",7195,"KRN",19,"NM",4,0)
PRSD 04 PAYRUN DATA INQUIRY^^4^
"BLD",7195,"KRN",19,"NM",5,0)
PRSD 04 PRINT EMPLOYEE FILES^^4^
"BLD",7195,"KRN",19,"NM",6,0)
PRSD 04 SEARCH EMPLOYEE FILES^^4^
"BLD",7195,"KRN",19,"NM",7,0)
PRSD UPDATE PAID CODES^^4^
"BLD",7195,"KRN",19,"NM","B","PRSA SUP LABOR-EDIT",1)

"BLD",7195,"KRN",19,"NM","B","PRSD 04 EMPLOYEE INQUIRY",2)

"BLD",7195,"KRN",19,"NM","B","PRSD 04 EMPLOYEE INQUIRY MENU",3)

"BLD",7195,"KRN",19,"NM","B","PRSD 04 PAYRUN DATA INQUIRY",4)

"BLD",7195,"KRN",19,"NM","B","PRSD 04 PRINT EMPLOYEE FILES",5)

"BLD",7195,"KRN",19,"NM","B","PRSD 04 SEARCH EMPLOYEE FILES",6)

"BLD",7195,"KRN",19,"NM","B","PRSD UPDATE PAID CODES",7)

"BLD",7195,"KRN",19.1,0)
19.1
"BLD",7195,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",7195,"KRN",101,0)
101
"BLD",7195,"KRN",409.61,0)
409.61
"BLD",7195,"KRN",771,0)
771
"BLD",7195,"KRN",870,0)
870
"BLD",7195,"KRN",8989.51,0)
8989.51
"BLD",7195,"KRN",8989.52,0)
8989.52
"BLD",7195,"KRN",8994,0)
8994
"BLD",7195,"KRN","B",.4,.4)

"BLD",7195,"KRN","B",.401,.401)

"BLD",7195,"KRN","B",.402,.402)

"BLD",7195,"KRN","B",.403,.403)

"BLD",7195,"KRN","B",.5,.5)

"BLD",7195,"KRN","B",.84,.84)

"BLD",7195,"KRN","B",3.6,3.6)

"BLD",7195,"KRN","B",3.8,3.8)

"BLD",7195,"KRN","B",9.2,9.2)

"BLD",7195,"KRN","B",9.8,9.8)

"BLD",7195,"KRN","B",19,19)

"BLD",7195,"KRN","B",19.1,19.1)

"BLD",7195,"KRN","B",101,101)

"BLD",7195,"KRN","B",409.61,409.61)

"BLD",7195,"KRN","B",771,771)

"BLD",7195,"KRN","B",870,870)

"BLD",7195,"KRN","B",8989.51,8989.51)

"BLD",7195,"KRN","B",8989.52,8989.52)

"BLD",7195,"KRN","B",8994,8994)

"BLD",7195,"QUES",0)
^9.62^^
"BLD",7195,"REQB",0)
^9.611^1^1
"BLD",7195,"REQB",1,0)
PRS*4.0*93^1
"BLD",7195,"REQB","B","PRS*4.0*93",1)

"KRN",.403,22,-1)
0^3
"KRN",.403,22,0)
PRSA LV REQ^^^^2920311^^^458.1^0^0^1
"KRN",.403,22,20)
D VAL^PRSALVR
"KRN",.403,22,40,0)
^.4031I^1^1
"KRN",.403,22,40,1,0)
1^^1,1^1^1^0
"KRN",.403,22,40,1,1)
Page 1
"KRN",.403,22,40,1,40,0)
^.4032PI^78^1
"KRN",.403,22,40,1,40,78,0)
PRSA LV REQ^1^1,1^e
"KRN",.403,24,-1)
0^6
"KRN",.403,24,0)
PRSA VC POST^^^^2920325^^^458^0^0^1
"KRN",.403,24,40,0)
^.4031I^1^1
"KRN",.403,24,40,1,0)
1^PRSA VC HDR^1,1^1^1^0
"KRN",.403,24,40,1,1)
Page 1
"KRN",.403,24,40,1,40,0)
^.4032PI^82^1
"KRN",.403,24,40,1,40,82,0)
PRSA VC POST^1^8,1^e
"KRN",.403,27,-1)
0^5
"KRN",.403,27,0)
PRSA TP POST1^^^^2920714^^^458^0^0^1
"KRN",.403,27,20)
D ^PRSATP1
"KRN",.403,27,40,0)
^.4031I^1^1
"KRN",.403,27,40,1,0)
1^^1,1^1^1^0
"KRN",.403,27,40,1,1)
Page 1
"KRN",.403,27,40,1,40,0)
^.4032PI^87^2
"KRN",.403,27,40,1,40,73,0)
PRSA TP POST^1^7,1^e
"KRN",.403,27,40,1,40,87,0)
PRSA TP EMP^2^1,1^d
"KRN",.403,28,-1)
0^4
"KRN",.403,28,0)
PRSA TE EDIT^^^^2920813^^^458^0^0^1
"KRN",.403,28,20)
D VAL^PRSATE0
"KRN",.403,28,40,0)
^.4031I^1^1
"KRN",.403,28,40,1,0)
1^^1,1
"KRN",.403,28,40,1,1)
Page 1
"KRN",.403,28,40,1,40,0)
^.4032PI^89^1
"KRN",.403,28,40,1,40,89,0)
PRSA TE EDIT^1^1,1^e
"KRN",.403,29,-1)
0^1
"KRN",.403,29,0)
PRSA FEE POST^^^^2920325^^^458^0^0^1
"KRN",.403,29,40,0)
^.4031I^1^1
"KRN",.403,29,40,1,0)
1^PRSA FEE HDR^1,1^1^1^0
"KRN",.403,29,40,1,1)
Page 1
"KRN",.403,29,40,1,40,0)
^.4032PI^91^1
"KRN",.403,29,40,1,40,91,0)
PRSA FEE POST^1^8,1^e
"KRN",.403,109,-1)
0^2
"KRN",.403,109,0)
PRSA LD POST^@^@^^3030401.1645^^^450^1^0^1
"KRN",.403,109,40,0)
^.4031I^1^1
"KRN",.403,109,40,1,0)
1^^1,1
"KRN",.403,109,40,1,1)
Page 1
"KRN",.403,109,40,1,40,0)
^.4032IP^404^3
"KRN",.403,109,40,1,40,400,0)
PRSA LD EMP^1^1,1^d
"KRN",.403,109,40,1,40,401,0)
PRSA LD POST^2^7,1^d
"KRN",.403,109,40,1,40,401,2)
4
"KRN",.403,109,40,1,40,404,0)
PRSA LD COST^3^13,1^d
"KRN",.403,109,40,1,40,404,2)
4
"KRN",.404,73,0)
PRSA TP POST^458.02^0
"KRN",.404,73,12)

"KRN",.404,73,40,0)
^.4044I^32^30
"KRN",.404,73,40,3,0)
3^START     STOP      TYPE OF TIME  REMARKS CODE^1^
"KRN",.404,73,40,3,2)
^^1,10^
"KRN",.404,73,40,4,0)
4^1^3
"KRN",.404,73,40,4,1)
41
"KRN",.404,73,40,4,2)
3,9^7^3,3^1
"KRN",.404,73,40,4,13)
S $P(Z,"^",1)=X
"KRN",.404,73,40,5,0)
5^^3
"KRN",.404,73,40,5,1)
42
"KRN",.404,73,40,5,2)
3,19^7
"KRN",.404,73,40,5,13)
S $P(Z,"^",2)=X
"KRN",.404,73,40,6,0)
6^^3
"KRN",.404,73,40,6,1)
43
"KRN",.404,73,40,6,2)
3,30^10
"KRN",.404,73,40,6,12)
I X="ML" D HLP^DDSUTL("Please verify that at least one hour of Military Leave has been requested.")
"KRN",.404,73,40,6,13)
S $P(Z,"^",3)=X
"KRN",.404,73,40,7,0)
7^^3
"KRN",.404,73,40,7,1)
44
"KRN",.404,73,40,7,2)
3,44^25
"KRN",.404,73,40,7,11)
S TT=$$GET^DDSVAL(DIE,.DA,43,.ERR43) S:TT="" TT="*"
"KRN",.404,73,40,7,13)
S $P(Z,"^",4)=X
"KRN",.404,73,40,8,0)
8^2^3
"KRN",.404,73,40,8,1)
45
"KRN",.404,73,40,8,2)
4,9^7^4,3^1
"KRN",.404,73,40,8,13)
S $P(Z,"^",5)=X
"KRN",.404,73,40,9,0)
9^^3
"KRN",.404,73,40,9,1)
46
"KRN",.404,73,40,9,2)
4,19^7
"KRN",.404,73,40,9,13)
S $P(Z,"^",6)=X
"KRN",.404,73,40,10,0)
10^^3
"KRN",.404,73,40,10,1)
47
"KRN",.404,73,40,10,2)
4,30^10
"KRN",.404,73,40,10,12)
I X="ML" D HLP^DDSUTL("Please verify that at least one hour of Military Leave has been requested.")
"KRN",.404,73,40,10,13)
S $P(Z,"^",7)=X
"KRN",.404,73,40,11,0)
11^^3
"KRN",.404,73,40,11,1)
48
"KRN",.404,73,40,11,2)
4,44^25
"KRN",.404,73,40,11,11)
S TT=$$GET^DDSVAL(DIE,.DA,47) S:TT="" TT="*"
"KRN",.404,73,40,11,13)
S $P(Z,"^",8)=X
"KRN",.404,73,40,12,0)
12^3^3
"KRN",.404,73,40,12,1)
49
"KRN",.404,73,40,12,2)
5,9^7^5,3^1
"KRN",.404,73,40,12,13)
S $P(Z,"^",9)=X
"KRN",.404,73,40,13,0)
13^^3
"KRN",.404,73,40,13,1)
50
"KRN",.404,73,40,13,2)
5,19^7
"KRN",.404,73,40,13,13)
S $P(Z,"^",10)=X
"KRN",.404,73,40,14,0)
14^^3
"KRN",.404,73,40,14,1)
51
"KRN",.404,73,40,14,2)
5,30^10
"KRN",.404,73,40,14,12)
I X="ML" D HLP^DDSUTL("Please verify that at least one hour of Military Leave has been requested.")
"KRN",.404,73,40,14,13)
S $P(Z,"^",11)=X
"KRN",.404,73,40,15,0)
15^^3
"KRN",.404,73,40,15,1)
52
"KRN",.404,73,40,15,2)
5,44^25
"KRN",.404,73,40,15,11)
S TT=$$GET^DDSVAL(DIE,.DA,51) S:TT="" TT="*"
"KRN",.404,73,40,15,13)
S $P(Z,"^",12)=X
"KRN",.404,73,40,16,0)
16^4^3
"KRN",.404,73,40,16,1)
53
"KRN",.404,73,40,16,2)
6,9^7^6,3^1
"KRN",.404,73,40,16,13)
S $P(Z,"^",13)=X
"KRN",.404,73,40,17,0)
17^^3
"KRN",.404,73,40,17,1)
54
"KRN",.404,73,40,17,2)
6,19^7
"KRN",.404,73,40,17,13)
S $P(Z,"^",14)=X
"KRN",.404,73,40,18,0)
18^^3
"KRN",.404,73,40,18,1)
55
"KRN",.404,73,40,18,2)
6,30^10
"KRN",.404,73,40,18,12)
I X="ML" D HLP^DDSUTL("Please verify that at least one hour of Military Leave has been requested.")
"KRN",.404,73,40,18,13)
S $P(Z,"^",15)=X
"KRN",.404,73,40,19,0)
19^^3
"KRN",.404,73,40,19,1)
56
"KRN",.404,73,40,19,2)
6,44^25
"KRN",.404,73,40,19,11)
S TT=$$GET^DDSVAL(DIE,.DA,55) S:TT="" TT="*"
"KRN",.404,73,40,19,13)
S $P(Z,"^",16)=X
"KRN",.404,73,40,20,0)
20^5^3
"KRN",.404,73,40,20,1)
57
"KRN",.404,73,40,20,2)
7,9^7^7,3^1
"KRN",.404,73,40,20,13)
S $P(Z,"^",17)=X
"KRN",.404,73,40,21,0)
21^^3
"KRN",.404,73,40,21,1)
58
"KRN",.404,73,40,21,2)
7,19^7
"KRN",.404,73,40,21,13)
S $P(Z,"^",18)=X
"KRN",.404,73,40,22,0)
22^^3
"KRN",.404,73,40,22,1)
59
"KRN",.404,73,40,22,2)
7,30^10
"KRN",.404,73,40,22,12)
I X="ML" D HLP^DDSUTL("Please verify that at least one hour of Military Leave has been requested.")
"KRN",.404,73,40,22,13)
S $P(Z,"^",19)=X
"KRN",.404,73,40,23,0)
23^^3
"KRN",.404,73,40,23,1)
60
"KRN",.404,73,40,23,2)
7,44^25
"KRN",.404,73,40,23,11)
S TT=$$GET^DDSVAL(DIE,.DA,59) S:TT="" TT="*"
"KRN",.404,73,40,23,13)
S $P(Z,"^",20)=X
"KRN",.404,73,40,24,0)
24^6^3
"KRN",.404,73,40,24,1)
61
"KRN",.404,73,40,24,2)
8,9^7^8,3^1
"KRN",.404,73,40,24,13)
S $P(Z,"^",21)=X
"KRN",.404,73,40,25,0)
25^^3
"KRN",.404,73,40,25,1)
62
"KRN",.404,73,40,25,2)
8,19^7
"KRN",.404,73,40,25,13)
S $P(Z,"^",22)=X
"KRN",.404,73,40,26,0)
26^^3
"KRN",.404,73,40,26,1)
63
"KRN",.404,73,40,26,2)
8,30^10
"KRN",.404,73,40,26,12)
I X="ML" D HLP^DDSUTL("Please verify that at least one hour of Military Leave has been requested.")
"KRN",.404,73,40,26,13)
S $P(Z,"^",23)=X
"KRN",.404,73,40,27,0)
27^^3
"KRN",.404,73,40,27,1)
64
"KRN",.404,73,40,27,2)
8,44^25
"KRN",.404,73,40,27,11)
S TT=$$GET^DDSVAL(DIE,.DA,63) S:TT="" TT="*"
"KRN",.404,73,40,27,13)
S $P(Z,"^",24)=X
"KRN",.404,73,40,28,0)
28^7^3
"KRN",.404,73,40,28,1)
65
"KRN",.404,73,40,28,2)
9,9^7^9,3^1
"KRN",.404,73,40,28,13)
S $P(Z,"^",25)=X
"KRN",.404,73,40,29,0)
29^^3
"KRN",.404,73,40,29,1)
66
"KRN",.404,73,40,29,2)
9,19^7
"KRN",.404,73,40,29,13)
S $P(Z,"^",26)=X
"KRN",.404,73,40,30,0)
30^^3
"KRN",.404,73,40,30,1)
67
"KRN",.404,73,40,30,2)
9,30^10
"KRN",.404,73,40,30,12)
I X="ML" D HLP^DDSUTL("Please verify that at least one hour of Military Leave has been requested.")
"KRN",.404,73,40,30,13)
S $P(Z,"^",27)=X
"KRN",.404,73,40,31,0)
31^^3
"KRN",.404,73,40,31,1)
68
"KRN",.404,73,40,31,2)
9,44^25
"KRN",.404,73,40,31,11)
S TT=$$GET^DDSVAL(DIE,.DA,67) S:TT="" TT="*"
"KRN",.404,73,40,31,13)
S $P(Z,"^",28)=X
"KRN",.404,73,40,32,0)
32^Remarks^3
"KRN",.404,73,40,32,1)
70
"KRN",.404,73,40,32,2)
11,10^70^11,1
"KRN",.404,78,0)
PRSA LV REQ^458.1^0
"KRN",.404,78,40,0)
^.4044I^14^14
"KRN",.404,78,40,1,0)
1^VA TIME & ATTENDANCE SYSTEM^1^
"KRN",.404,78,40,1,2)
^^1,27^
"KRN",.404,78,40,2,0)
2^REQUEST FOR LEAVE^1^
"KRN",.404,78,40,2,2)
^^2,32^
"KRN",.404,78,40,3,0)
5^From Date^3
"KRN",.404,78,40,3,1)
2
"KRN",.404,78,40,3,2)
6,12^11^6,1
"KRN",.404,78,40,3,4)
1
"KRN",.404,78,40,3,11)
K LVTYPE
"KRN",.404,78,40,3,13)
S $P(Z1,"^",1)=X
"KRN",.404,78,40,4,0)
6^Time^3
"KRN",.404,78,40,4,1)
3
"KRN",.404,78,40,4,2)
6,41^7^6,35
"KRN",.404,78,40,4,4)
1
"KRN",.404,78,40,4,13)
S $P(Z1,"^",2)=X
"KRN",.404,78,40,5,0)
7^To Date^3
"KRN",.404,78,40,5,1)
4
"KRN",.404,78,40,5,2)
8,10^11^8,1
"KRN",.404,78,40,5,4)
1
"KRN",.404,78,40,5,13)
S $P(Z1,"^",3)=X
"KRN",.404,78,40,6,0)
8^Time^3
"KRN",.404,78,40,6,1)
5
"KRN",.404,78,40,6,2)
8,41^7^8,35
"KRN",.404,78,40,6,4)
1
"KRN",.404,78,40,6,13)
S $P(Z1,"^",4)=X
"KRN",.404,78,40,7,0)
13^Type of Leave^3
"KRN",.404,78,40,7,1)
6
"KRN",.404,78,40,7,2)
15,16^21^15,1
"KRN",.404,78,40,7,4)
1
"KRN",.404,78,40,7,12)
S:X="ML" LVTYPE=X
"KRN",.404,78,40,8,0)
16^Remarks^3
"KRN",.404,78,40,8,1)
7
"KRN",.404,78,40,8,2)
17,10^60^17,1
"KRN",.404,78,40,8,4)
0
"KRN",.404,78,40,9,0)
3^!M^1^
"KRN",.404,78,40,9,.1)
S Y=$P(^PRSPC(DFN,0),"^",1)
"KRN",.404,78,40,9,2)
^^4,1^
"KRN",.404,78,40,10,0)
4^!M^1^
"KRN",.404,78,40,10,.1)
S Y=$P(^PRSPC(DFN,0),"^",9),Y="XXX-XX-"_$E(Y,6,9)
"KRN",.404,78,40,10,2)
^^4,35
"KRN",.404,78,40,11,0)
9^AL  Annual Leave          AA  Authorized Absence        CB  Family Care^1^
"KRN",.404,78,40,11,2)
^^10,3^1
"KRN",.404,78,40,12,0)
10^SL  Sick Leave            ML  Military Leave            AD  Adoption^1^
"KRN",.404,78,40,12,2)
^^11,3^1
"KRN",.404,78,40,13,0)
11^WP  Without Pay           RL  Restored Annual Leave     DL  Donor Leave^1^
"KRN",.404,78,40,13,2)
^^12,3^1
"KRN",.404,78,40,14,0)
12^CU  Comp Time/Credit Hrs  NL  Non-Pay Annual Leave^1^
"KRN",.404,78,40,14,2)
^^13,3
"KRN",.404,78,40,15,0)
14^!M^1^
"KRN",.404,78,40,15,.1)
S Y=Y15
"KRN",.404,78,40,15,2)
^^15,40
"KRN",.404,78,40,16,0)
15^^3
"KRN",.404,78,40,16,1)
15
"KRN",.404,78,40,16,2)
15,60^6
"KRN",.404,78,40,16,11)
I $G(LVTYPE)="ML" D HLP^DDSUTL("The minimum charge for Military Leave is one hour.")
"KRN",.404,81,0)
PRSA VC HDR^458.01
"KRN",.404,81,40,0)
^.4044I^5^5
"KRN",.404,81,40,1,0)
1^VA TIME & ATTENDANCE SYSTEM^1^
"KRN",.404,81,40,1,2)
^^1,27^
"KRN",.404,81,40,2,0)
2^VCS COMMISSION SALES^1^
"KRN",.404,81,40,2,2)
^^2,30^
"KRN",.404,81,40,3,0)
3^!M^1^
"KRN",.404,81,40,3,.1)
S Y=$P($G(^PRSPC(DFN,0)),"^",1)
"KRN",.404,81,40,3,2)
^^4,1^
"KRN",.404,81,40,4,0)
4^!M^1^
"KRN",.404,81,40,4,.1)
S Y=$P($G(^PRSPC(DFN,0)),"^",9),Y=$E(Y)_"XX-XX-"_$E(Y,6,9)
"KRN",.404,81,40,4,2)
^^4,68
"KRN",.404,81,40,5,0)
5^!M^1^
"KRN",.404,81,40,5,.1)
S Y=DTE
"KRN",.404,81,40,5,2)
^^6,24^
"KRN",.404,82,0)
PRSA VC POST^458.01
"KRN",.404,82,40,0)
^.4044I^15^15
"KRN",.404,82,40,1,0)
1^Sun       Mon       Tue       Wed       Thu       Fri       Sat^1^
"KRN",.404,82,40,1,2)
^^1,14^
"KRN",.404,82,40,2,0)
2^Week 1^3
"KRN",.404,82,40,2,1)
20
"KRN",.404,82,40,2,2)
3,12^7^3,1^1
"KRN",.404,82,40,3,0)
3^^3
"KRN",.404,82,40,3,1)
21
"KRN",.404,82,40,3,2)
3,22^7
"KRN",.404,82,40,4,0)
4^^3
"KRN",.404,82,40,4,1)
22
"KRN",.404,82,40,4,2)
3,32^7
"KRN",.404,82,40,5,0)
5^^3
"KRN",.404,82,40,5,1)
23
"KRN",.404,82,40,5,2)
3,42^7
"KRN",.404,82,40,6,0)
6^^3
"KRN",.404,82,40,6,1)
24
"KRN",.404,82,40,6,2)
3,52^7
"KRN",.404,82,40,7,0)
7^^3
"KRN",.404,82,40,7,1)
25
"KRN",.404,82,40,7,2)
3,62^7
"KRN",.404,82,40,8,0)
8^^3
"KRN",.404,82,40,8,1)
26
"KRN",.404,82,40,8,2)
3,72^7
"KRN",.404,82,40,9,0)
9^Week 2^3
"KRN",.404,82,40,9,1)
27
"KRN",.404,82,40,9,2)
5,12^7^5,1^1
"KRN",.404,82,40,10,0)
10^^3
"KRN",.404,82,40,10,1)
28
"KRN",.404,82,40,10,2)
5,22^7
"KRN",.404,82,40,11,0)
11^^3
"KRN",.404,82,40,11,1)
29
"KRN",.404,82,40,11,2)
5,32^7
"KRN",.404,82,40,12,0)
12^^3
"KRN",.404,82,40,12,1)
30
"KRN",.404,82,40,12,2)
5,42^7
"KRN",.404,82,40,13,0)
13^^3
"KRN",.404,82,40,13,1)
31
"KRN",.404,82,40,13,2)
5,52^7
"KRN",.404,82,40,14,0)
14^^3
"KRN",.404,82,40,14,1)
32
"KRN",.404,82,40,14,2)
5,62^7
"KRN",.404,82,40,15,0)
15^^3
"KRN",.404,82,40,15,1)
33
"KRN",.404,82,40,15,2)
5,72^7
"KRN",.404,87,0)
PRSA TP EMP^458.02
"KRN",.404,87,40,0)
^.4044I^8^8
"KRN",.404,87,40,1,0)
2^VA TIME & ATTENDANCE SYSTEM^1^
"KRN",.404,87,40,1,2)
^^1,27^
"KRN",.404,87,40,2,0)
1^!M^1^
"KRN",.404,87,40,2,.1)
S Y=$P($G(^PRSPC(DFN,0)),"^",1)
"KRN",.404,87,40,2,2)
^^1,1^
"KRN",.404,87,40,3,0)
3^!M^1^
"KRN",.404,87,40,3,.1)
S Y=$P($G(^PRSPC(DFN,0)),"^",9) S:Y'="" Y=$E(Y)_"XX-XX-"_$E(Y,6,9)
"KRN",.404,87,40,3,2)
^^1,69
"KRN",.404,87,40,4,0)
4^!M^1^
"KRN",.404,87,40,4,.1)
S Y="Station: "_$P($G(^PRSPC(DFN,0)),"^",7)
"KRN",.404,87,40,4,2)
^^2,1^
"KRN",.404,87,40,5,0)
7^!M^1^
"KRN",.404,87,40,5,.1)
S Y=$G(DTE)
"KRN",.404,87,40,5,2)
^^3,34^
"KRN",.404,87,40,6,0)
6^!M^1^
"KRN",.404,87,40,6,.1)
S Y="T&L: "_$P($G(^PRSPC(DFN,0)),"^",8)
"KRN",.404,87,40,6,2)
^^2,72^
"KRN",.404,87,40,7,0)
5^Tour Beginning^1^
"KRN",.404,87,40,7,2)
^^2,34^
"KRN",.404,87,40,8,0)
8^!M^1^
"KRN",.404,87,40,8,.1)
S Y="Tour: "_Y31
"KRN",.404,87,40,8,2)
^^5,1^
"KRN",.404,89,0)
PRSA TE EDIT^458.01
"KRN",.404,89,40,0)
^.4044I^19^19
"KRN",.404,89,40,1,0)
1^VA TIME & ATTENDANCE SYSTEM^1^
"KRN",.404,89,40,1,2)
^^1,27
"KRN",.404,89,40,2,0)
2^EMPLOYEE TOUR OF DUTY^1^
"KRN",.404,89,40,2,2)
^^2,30^
"KRN",.404,89,40,3,0)
3^!M^1^
"KRN",.404,89,40,3,.1)
S Y=$P(^PRSPC(DFN,0),"^",1)
"KRN",.404,89,40,3,2)
^^4,1^
"KRN",.404,89,40,4,0)
4^!M^1^
"KRN",.404,89,40,4,.1)
S Y=$P($G(^PRSPC(DFN,0)),"^",9) S:Y'="" Y=$E(Y)_"XX-XX-"_$E(Y,6,9)
"KRN",.404,89,40,4,2)
^^4,66
"KRN",.404,89,40,5,0)
5^!M^1^
"KRN",.404,89,40,5,.1)
S Y="Week 1 - "_$E(Y1,5,13)_"                 Week 2 - "_$E(Y2,5,13)
"KRN",.404,89,40,5,2)
^^6,10^
"KRN",.404,89,40,6,0)
11^Sun^3
"KRN",.404,89,40,6,1)
201
"KRN",.404,89,40,6,2)
8,10^30^8,1^1
"KRN",.404,89,40,6,4)
1
"KRN",.404,89,40,7,0)
12^Mon^3
"KRN",.404,89,40,7,1)
202
"KRN",.404,89,40,7,2)
9,10^30^9,1^1
"KRN",.404,89,40,7,4)
1
"KRN",.404,89,40,8,0)
13^Tue^3
"KRN",.404,89,40,8,1)
203
"KRN",.404,89,40,8,2)
10,10^30^10,1^1
"KRN",.404,89,40,8,4)
1
"KRN",.404,89,40,9,0)
14^Wed^3
"KRN",.404,89,40,9,1)
204
"KRN",.404,89,40,9,2)
11,10^30^11,1^1
"KRN",.404,89,40,9,4)
1
"KRN",.404,89,40,10,0)
15^Thu^3
"KRN",.404,89,40,10,1)
205
"KRN",.404,89,40,10,2)
12,10^30^12,1^1
"KRN",.404,89,40,10,4)
1
"KRN",.404,89,40,11,0)
16^Fri^3
"KRN",.404,89,40,11,1)
206
"KRN",.404,89,40,11,2)
13,10^30^13,1^1
"KRN",.404,89,40,11,4)
1
"KRN",.404,89,40,12,0)
17^Sat^3
"KRN",.404,89,40,12,1)
207
"KRN",.404,89,40,12,2)
14,10^30^14,1^1
"KRN",.404,89,40,12,4)
1
"KRN",.404,89,40,13,0)
18^^3
"KRN",.404,89,40,13,1)
208
"KRN",.404,89,40,13,2)
8,45^30
"KRN",.404,89,40,13,4)
1
"KRN",.404,89,40,14,0)
19^^3
"KRN",.404,89,40,14,1)
209
"KRN",.404,89,40,14,2)
9,45^30
"KRN",.404,89,40,14,4)
1
"KRN",.404,89,40,15,0)
20^^3
"KRN",.404,89,40,15,1)
210
"KRN",.404,89,40,15,2)
10,45^30
"KRN",.404,89,40,15,4)
1
"KRN",.404,89,40,16,0)
21^^3
"KRN",.404,89,40,16,1)
211
"KRN",.404,89,40,16,2)
11,45^30
"KRN",.404,89,40,16,4)
1
"KRN",.404,89,40,17,0)
22^^3
"KRN",.404,89,40,17,1)
212
"KRN",.404,89,40,17,2)
12,45^30
"KRN",.404,89,40,17,4)
1
"KRN",.404,89,40,18,0)
23^^3
"KRN",.404,89,40,18,1)
213
"KRN",.404,89,40,18,2)
13,45^30
"KRN",.404,89,40,18,4)
1
"KRN",.404,89,40,19,0)
24^^3
"KRN",.404,89,40,19,1)
214
"KRN",.404,89,40,19,2)
14,45^30
"KRN",.404,89,40,19,4)
1
"KRN",.404,90,0)
PRSA FEE HDR^458.01
"KRN",.404,90,40,0)
^.4044I^5^5
"KRN",.404,90,40,1,0)
1^VA TIME & ATTENDANCE SYSTEM^1^
"KRN",.404,90,40,1,2)
^^1,27^
"KRN",.404,90,40,2,0)
2^FEE BASIS APPOINTEES^1^
"KRN",.404,90,40,2,2)
^^2,30^
"KRN",.404,90,40,3,0)
3^!M^1^
"KRN",.404,90,40,3,.1)
S Y=$P($G(^PRSPC(DFN,0)),"^",1)
"KRN",.404,90,40,3,2)
^^4,1^
"KRN",.404,90,40,4,0)
4^!M^1^
"KRN",.404,90,40,4,.1)
S Y=$P($G(^PRSPC(DFN,0)),"^",9),Y=$E(Y)_"XX-XX-"_$E(Y,6,9)
"KRN",.404,90,40,4,2)
^^4,68
"KRN",.404,90,40,5,0)
5^!M^1^
"KRN",.404,90,40,5,.1)
S Y=DTE
"KRN",.404,90,40,5,2)
^^6,24^
"KRN",.404,91,0)
PRSA FEE POST^458.01
"KRN",.404,91,40,0)
^.4044I^19^19
"KRN",.404,91,40,1,0)
1^Sun       Mon       Tue       Wed       Thu       Fri       Sat^1^
"KRN",.404,91,40,1,2)
^^1,14^
"KRN",.404,91,40,2,0)
2^Week 1^3
"KRN",.404,91,40,2,1)
20
"KRN",.404,91,40,2,2)
3,12^7^3,1^1
"KRN",.404,91,40,3,0)
3^^3
"KRN",.404,91,40,3,1)
21
"KRN",.404,91,40,3,2)
3,22^7
"KRN",.404,91,40,4,0)
4^^3
"KRN",.404,91,40,4,1)
22
"KRN",.404,91,40,4,2)
3,32^7
"KRN",.404,91,40,5,0)
5^^3
"KRN",.404,91,40,5,1)
23
"KRN",.404,91,40,5,2)
3,42^7
"KRN",.404,91,40,6,0)
6^^3
"KRN",.404,91,40,6,1)
24
"KRN",.404,91,40,6,2)
3,52^7
"KRN",.404,91,40,7,0)
7^^3
"KRN",.404,91,40,7,1)
25
"KRN",.404,91,40,7,2)
3,62^7
"KRN",.404,91,40,8,0)
8^^3
"KRN",.404,91,40,8,1)
26
"KRN",.404,91,40,8,2)
3,72^7
"KRN",.404,91,40,9,0)
9^Week 2^3
"KRN",.404,91,40,9,1)
27
"KRN",.404,91,40,9,2)
5,12^7^5,1^1
"KRN",.404,91,40,10,0)
10^^3
"KRN",.404,91,40,10,1)
28
"KRN",.404,91,40,10,2)
5,22^7
"KRN",.404,91,40,11,0)
11^^3
"KRN",.404,91,40,11,1)
29
"KRN",.404,91,40,11,2)
5,32^7
"KRN",.404,91,40,12,0)
12^^3
"KRN",.404,91,40,12,1)
30
"KRN",.404,91,40,12,2)
5,42^7
"KRN",.404,91,40,13,0)
13^^3
"KRN",.404,91,40,13,1)
31
"KRN",.404,91,40,13,2)
5,52^7
"KRN",.404,91,40,14,0)
14^^3
"KRN",.404,91,40,14,1)
32
"KRN",.404,91,40,14,2)
5,62^7
"KRN",.404,91,40,15,0)
15^^3
"KRN",.404,91,40,15,1)
33
"KRN",.404,91,40,15,2)
5,72^7
"KRN",.404,91,40,16,0)
16^Total Hours^3
"KRN",.404,91,40,16,1)
50
"KRN",.404,91,40,16,2)
9,13^3^9,1^1
"KRN",.404,91,40,17,0)
17^Total Days^3
"KRN",.404,91,40,17,1)
51
"KRN",.404,91,40,17,2)
9,31^2^9,20^1
"KRN",.404,91,40,18,0)
18^Total Procedures^3
"KRN",.404,91,40,18,1)
52
"KRN",.404,91,40,18,2)
9,54^3^9,37^1
"KRN",.404,91,40,19,0)
19^!M^1^
"KRN",.404,91,40,19,.1)
S Y="Salary Rate: "_$J($P($G(^PRSPC(DFN,0)),"^",29),7,2)
"KRN",.404,91,40,19,2)
^^9,59
"KRN",.404,400,0)
PRSA LD EMP^450^
"KRN",.404,400,40,0)
^.4044I^9^9
"KRN",.404,400,40,1,0)
1^!M^1
"KRN",.404,400,40,1,.1)
S Y=$P($G(^PRSPC(DFN,0)),"^",1)
"KRN",.404,400,40,1,2)
^^1,1
"KRN",.404,400,40,2,0)
2^VA TIME & ATTENDANCE SYSTEM^1
"KRN",.404,400,40,2,2)
^^1,27
"KRN",.404,400,40,3,0)
3^!M^1
"KRN",.404,400,40,3,.1)
S Y=$P($G(^PRSPC(DFN,0)),"^",9) S:Y'="" Y=$S(PRSTLV=2:$E(Y)_"XX-XX-"_$E(Y,6,9),PRSTLV=7:$E(Y,1,3)_"-"_$E(Y,4,5)_"-"_$E(Y,6,9),1:"XXX-XX-"_$E(Y,6,9))
"KRN",.404,400,40,3,2)
^^1,69
"KRN",.404,400,40,4,0)
4^!M^1
"KRN",.404,400,40,4,.1)
S Y="Station: "_$P($G(^PRSPC(DFN,0)),"^",8)
"KRN",.404,400,40,4,2)
^^2,1
"KRN",.404,400,40,5,0)
5^Labor Distribution Codes^1
"KRN",.404,400,40,5,2)
^^2,29
"KRN",.404,400,40,6,0)
6^!M^1
"KRN",.404,400,40,6,.1)
S Y="T&L: "_$P($G(^PRSPC(DFN,0)),"^",8)
"KRN",.404,400,40,6,2)
^^2,72
"KRN",.404,400,40,7,0)
7^!M^1
"KRN",.404,400,40,7,.1)
S Y=$G(PPE)
"KRN",.404,400,40,7,2)
^^3,20
"KRN",.404,400,40,8,0)
8^CODE        PERCENT         COST CENTER        FUND CTRL PT^1
"KRN",.404,400,40,8,2)
^^5,13
"KRN",.404,400,40,9,0)
9^-------------------------------------------------------------------------------^1
"KRN",.404,400,40,9,2)
^^6,1
"KRN",.404,401,0)
PRSA LD POST^450.0757^
"KRN",.404,401,40,0)
^.4044I^6^6
"KRN",.404,401,40,1,0)
1^LD CODE^1
"KRN",.404,401,40,1,2)
^^1,1
"KRN",.404,401,40,2,0)
3^^3
"KRN",.404,401,40,2,1)
1
"KRN",.404,401,40,2,2)
1,13^4
"KRN",.404,401,40,3,0)
4^^3
"KRN",.404,401,40,3,1)
2
"KRN",.404,401,40,3,2)
1,26^4
"KRN",.404,401,40,4,0)
5^^3
"KRN",.404,401,40,4,1)
3
"KRN",.404,401,40,4,2)
1,44^4
"KRN",.404,401,40,5,0)
6^^3
"KRN",.404,401,40,5,1)
4
"KRN",.404,401,40,5,2)
1,65^3
"KRN",.404,401,40,6,0)
2^^3
"KRN",.404,401,40,6,1)
.01
"KRN",.404,401,40,6,2)
1,9^1
"KRN",.404,404,0)
PRSA LD COST^450.0757^
"KRN",.404,404,40,0)
^.4044I^4^4
"KRN",.404,404,40,1,0)
1^COST CENTER^1
"KRN",.404,404,40,1,2)
^^1,1
"KRN",.404,404,40,2,0)
2^^3
"KRN",.404,404,40,2,1)
.01
"KRN",.404,404,40,2,2)
1,13^1
"KRN",.404,404,40,3,0)
3^^3
"KRN",.404,404,40,3,1)
3
"KRN",.404,404,40,3,2)
1,16^4
"KRN",.404,404,40,4,0)
4^!M^1
"KRN",.404,404,40,4,.1)
S Y=$P($G(^PRSPC(DFN,"LD",DDSSN,0)),"^",4),SUB454="CC" D OT^PRSDUTIL K SUB454 S X=Y
"KRN",.404,404,40,4,2)
^^1,22
"KRN",19,5846,-1)
4^2
"KRN",19,5846,0)
PRSD 04 EMPLOYEE INQUIRY
"KRN",19,5847,-1)
4^4
"KRN",19,5847,0)
PRSD 04 PAYRUN DATA INQUIRY
"KRN",19,5848,-1)
4^7
"KRN",19,5848,0)
PRSD UPDATE PAID CODES
"KRN",19,5852,-1)
4^5
"KRN",19,5852,0)
PRSD 04 PRINT EMPLOYEE FILES
"KRN",19,5853,-1)
4^6
"KRN",19,5853,0)
PRSD 04 SEARCH EMPLOYEE FILES
"KRN",19,5854,-1)
0^3
"KRN",19,5854,0)
PRSD 04 EMPLOYEE INQUIRY MENU^Employee Inquiry Menu^^M^^^^^^^^^^1^
"KRN",19,5854,1,0)
^19.06^2^2^3040416^^^^
"KRN",19,5854,1,1,0)
This option will allow the Fiscal user to access a menu of employee
"KRN",19,5854,1,2,0)
inquiry options.
"KRN",19,5854,10,0)
^19.01IP^6^6
"KRN",19,5854,10,1,0)
5852^1^1
"KRN",19,5854,10,1,"^")
PRSD 04 PRINT EMPLOYEE FILES
"KRN",19,5854,10,2,0)
5853^2^2
"KRN",19,5854,10,2,"^")
PRSD 04 SEARCH EMPLOYEE FILES
"KRN",19,5854,10,3,0)
5846^3^3
"KRN",19,5854,10,3,"^")
PRSD 04 EMPLOYEE INQUIRY
"KRN",19,5854,10,4,0)
5847^4^4
"KRN",19,5854,10,4,"^")
PRSD 04 PAYRUN DATA INQUIRY
"KRN",19,5854,10,5,0)
5848^5^5
"KRN",19,5854,10,5,"^")
PRSD UPDATE PAID CODES
"KRN",19,5854,10,6,0)
11874^6
"KRN",19,5854,10,6,"^")
PRSA SUP LABOR-EDIT
"KRN",19,5854,15)

"KRN",19,5854,20)
D ^PRSAPAS
"KRN",19,5854,99)
60493,56061
"KRN",19,5854,99.1)
60836,27096
"KRN",19,5854,"U")
EMPLOYEE INQUIRY MENU
"KRN",19,11874,-1)
0^1
"KRN",19,11874,0)
PRSA SUP LABOR-EDIT^View Labor Distribution(s)^^R^^^^^^^^
"KRN",19,11874,1,0)
^19.06^2^2^3031021^^^^
"KRN",19,11874,1,1,0)
This option allows Payroll to review the employee's current Labor
"KRN",19,11874,1,2,0)
Distribution(s).
"KRN",19,11874,25)
PAY^PRSALD
"KRN",19,11874,"U")
VIEW LABOR DISTRIBUTION(S)
"MBREQ")
0
"ORD",8,.403)
.403;8;;;EDEOUT^DIFROMSO(.403,DA,"",XPDA);FPRE^DIFROMSI(.403,"",XPDA);EPRE^DIFROMSI(.403,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.403,DA,"",XPDA);DEL^DIFROMSK(.403,"",%)
"ORD",8,.403,0)
FORM
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",408,-1)
1^1
"PKG",408,0)
PAID^PRS^PAID
"PKG",408,20,0)
^9.402P^^
"PKG",408,22,0)
^9.49I^1^1
"PKG",408,22,1,0)
4.0^2950912^2960130
"PKG",408,22,1,"PAH",1,0)
114^3070725
"PKG",408,22,1,"PAH",1,1,0)
^^1^1^3070725
"PKG",408,22,1,"PAH",1,1,1,0)
This patch will modify the display of VA employee social security numbers.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
20
"RTN","PRSADP1")
0^1^B11280993^B10310200
"RTN","PRSADP1",1,0)
PRSADP1 ; HISC/REL,WIRMFO/JAH - Display Employee T&A Data ;AUG 07, 1997
"RTN","PRSADP1",2,0)
 ;;4.0;PAID;**22,114**;Sep 21, 1995;Build 6
"RTN","PRSADP1",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSADP1",4,0)
 W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM"
"RTN","PRSADP1",5,0)
 W !?23,"EMPLOYEE TIME AND ATTENDANCE DATA" D HDR
"RTN","PRSADP1",6,0)
 W !!,?7,"Date",?21,"Scheduled Tour",?46,"Tour Exceptions"
"RTN","PRSADP1",7,0)
 W !?3,"------------------------------------------------------------------------",!
"RTN","PRSADP1",8,0)
F0 ; Display Frames
"RTN","PRSADP1",9,0)
 K Y1,Y2 S Y1=$G(^PRST(458,PPI,"E",DFN,"D",DAY,1)),Y2=$G(^(2)),Y3=$G(^(3)),Y4=$G(^(4)),TC=$P($G(^(0)),"^",2)
"RTN","PRSADP1",10,0)
 I Y1="" S Y1=$S(TC=1:"Day Off",TC=2:"Day Tour",TC=3!(TC=4):"Intermittent",1:"")
"RTN","PRSADP1",11,0)
 I " 1 3 4 "'[TC,$P($G(^PRST(458,PPI,"E",DFN,"D",DAY,10)),"^",1)="" S Y2(1)="Unposted"
"RTN","PRSADP1",12,0)
 I TC=3,$P($G(^PRST(458,PPI,"E",DFN,"D",DAY,10)),"^",4)=1 S Y2(1)="Day Worked"
"RTN","PRSADP1",13,0)
 W !?3,DTE S (L3,L4)=0 I Y1="",Y2="" S Y31="" G EX
"RTN","PRSADP1",14,0)
 D S1
"RTN","PRSADP1",15,0)
 F K=1:1 Q:'$D(Y1(K))&'$D(Y2(K))  W:K>1 ! W:$D(Y1(K)) ?21,Y1(K) W:$D(Y2(K)) ?45,$P(Y2(K),"^",1),?63,$P(Y2(K),"^",2)
"RTN","PRSADP1",16,0)
 W:Y3'="" !?10,Y3
"RTN","PRSADP1",17,0)
EX Q
"RTN","PRSADP1",18,0)
F1 ; Display Pay period for Certification
"RTN","PRSADP1",19,0)
 K Y1,Y2 S Y1=$G(^PRST(458,PPI,"E",DFN,"D",DAY,1)),Y2=$G(^(2)),Y3=$G(^(3)),Y4=$G(^(4)),TC=$P($G(^(0)),"^",2)
"RTN","PRSADP1",20,0)
 I Y1="" S Y1=$S(TC=1:"Day Off",TC=2:"Day Tour",TC=3!(TC=4):"Intermittent",1:"")
"RTN","PRSADP1",21,0)
 I " 1 3 4 "'[TC,$P($G(^PRST(458,PPI,"E",DFN,"D",DAY,10)),"^",1)="" S Y2(1)="Unposted"
"RTN","PRSADP1",22,0)
 I TC=3,$P($G(^PRST(458,PPI,"E",DFN,"D",DAY,10)),"^",4)=1 S Y2(1)="Day Worked"
"RTN","PRSADP1",23,0)
 W !?3,DTE S (L3,L4)=0 I Y1="",Y2="" S Y31="" G EX
"RTN","PRSADP1",24,0)
 D S1
"RTN","PRSADP1",25,0)
 Q
"RTN","PRSADP1",26,0)
S1 ; Set Schedule Array
"RTN","PRSADP1",27,0)
 S Y31=""
"RTN","PRSADP1",28,0)
 F L1=1:3:19 S A1=$P(Y1,"^",L1) Q:A1=""  D
"RTN","PRSADP1",29,0)
 .S L3=L3+1,Y1(L3)=A1 S:$P(Y1,"^",L1+1)'="" Y1(L3)=Y1(L3)_"-"_$P(Y1,"^",L1+1)
"RTN","PRSADP1",30,0)
 .S:Y31'="" Y31=Y31_", " S Y31=Y31_Y1(L3)
"RTN","PRSADP1",31,0)
 .I $P(Y1,"^",L1+2)'="" S L3=L3+1,Y1(L3)="  "_$P($G(^PRST(457.2,+$P(Y1,"^",L1+2),0)),"^",1)
"RTN","PRSADP1",32,0)
 .I  S Y31=Y31_" "_$P($G(^PRST(457.2,+$P(Y1,"^",L1+2),0)),"^",6)
"RTN","PRSADP1",33,0)
 .Q
"RTN","PRSADP1",34,0)
 G:Y4="" S2
"RTN","PRSADP1",35,0)
 F L1=1:3:19 S A1=$P(Y4,"^",L1) Q:A1=""  D
"RTN","PRSADP1",36,0)
 .S L3=L3+1,Y1(L3)=A1 S:$P(Y4,"^",L1+1)'="" Y1(L3)=Y1(L3)_"-"_$P(Y4,"^",L1+1)
"RTN","PRSADP1",37,0)
 .S:Y31'="" Y31=Y31_", " S Y31=Y31_Y1(L3)
"RTN","PRSADP1",38,0)
 .I $P(Y4,"^",L1+2)'="" S L3=L3+1,Y1(L3)="  "_$P($G(^PRST(457.2,+$P(Y4,"^",L1+2),0)),"^",1)
"RTN","PRSADP1",39,0)
 .I  S Y31=Y31_" "_$P($G(^PRST(457.2,+$P(Y1,"^",L1+2),0)),"^",6)
"RTN","PRSADP1",40,0)
 .Q
"RTN","PRSADP1",41,0)
S2 ; Set Worked Array
"RTN","PRSADP1",42,0)
 F L1=1:4:25 D  I A1="" G S3
"RTN","PRSADP1",43,0)
 .S A1=$P(Y2,"^",L1+2) Q:A1=""  S L4=L4+1
"RTN","PRSADP1",44,0)
 .S A2=$P(Y2,"^",L1) I A2'="" S Y2(L4)=A2_"-"_$P(Y2,"^",L1+1)
"RTN","PRSADP1",45,0)
 .S K=$O(^PRST(457.3,"B",A1,0)) S $P(Y2(L4),"^",2)=A1_" "_$P($G(^PRST(457.3,+K,0)),"^",2)
"RTN","PRSADP1",46,0)
 .I $P(Y2,"^",L1+3)'="" S L4=L4+1,Y2(L4)="  "_$P($G(^PRST(457.4,+$P(Y2,"^",L1+3),0)),"^",1)
"RTN","PRSADP1",47,0)
 .Q
"RTN","PRSADP1",48,0)
S3 Q
"RTN","PRSADP1",49,0)
HDR ; Display Employee Data
"RTN","PRSADP1",50,0)
 S C0=^PRSPC(DFN,0) W !!,$P(C0,"^",1) S X=$P(C0,"^",9)
"RTN","PRSADP1",51,0)
 I '$G(PRSTLV)!($G(PRSTLV)=1) W ?65,"XXX-XX-",$E(X,6,9)
"RTN","PRSADP1",52,0)
 I $G(PRSTLV)=2!($G(PRSTLV)=3) W ?65,$E(X),"XX-XX-",$E(X,6,9)
"RTN","PRSADP1",53,0)
 I $G(PRSTLV)=7 W ?65,$E(X,1,3)_"-"_$E(X,4,5)_"-"_$E(X,6,9)
"RTN","PRSADP1",54,0)
 W !!,"Station: ",$P(C0,"^",7),?30,"Normal Hours: ",$J($P(C0,"^",16),3),?65,"Duty Basis:",?77,$P(C0,"^",10)
"RTN","PRSADP1",55,0)
 W !,"T&L:     ",$P(C0,"^",8),?30,"Pay Plan:",?46,$P(C0,"^",21),?65,"Comp/Flex:",?77,$S(PPE'="":$P($G(^PRST(458,PPI,"E",DFN,0)),"^",6),1:$P($G(^PRSPC(DFN,1)),"^",7))
"RTN","PRSADP1",56,0)
 W ! W:PPE'="" "Pay Per: ",PPE W ?65,"FLSA:",?77,$P(C0,"^",12) Q
"RTN","PRSADP2")
0^2^B20321723^B18825202
"RTN","PRSADP2",1,0)
PRSADP2 ; HISC/REL-Display Employee Pay Period ;7/22/97
"RTN","PRSADP2",2,0)
 ;;4.0;PAID;**21,28,46,114**;Sep 21, 1995;Build 6
"RTN","PRSADP2",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSADP2",4,0)
PAY ; Payroll Entry
"RTN","PRSADP2",5,0)
 N PPERIOD
"RTN","PRSADP2",6,0)
 S PRSTLV=7
"RTN","PRSADP2",7,0)
 D TOP ; print header
"RTN","PRSADP2",8,0)
P1 K DIC S DIC("A")="Select EMPLOYEE: ",DIC(0)="AEQM",DIC="^PRSPC("
"RTN","PRSADP2",9,0)
 W ! D ^DIC S DFN=+Y K DIC G:DFN<1 EX
"RTN","PRSADP2",10,0)
 S TLE=$P($G(^PRSPC(DFN,0)),"^",8)
"RTN","PRSADP2",11,0)
 S DIC="^PRST(458,",DIC(0)="AEQM",DIC("A")="Select PAY PERIOD: "
"RTN","PRSADP2",12,0)
 W ! D ^DIC K DIC G:Y<1 EX
"RTN","PRSADP2",13,0)
 S PPI=+Y
"RTN","PRSADP2",14,0)
 ;  1st put pay period in YY-PP format 4 call 2 lookup old T&L.
"RTN","PRSADP2",15,0)
 S PPERIOD=$S(Y["-":$P(Y,"^",2),1:$P(^PRST(458,$P(Y,"^"),0),"^"))
"RTN","PRSADP2",16,0)
 D CHECKTLE(PPERIOD,DFN,.TLE) ;verify that T&L unit hasn't changed
"RTN","PRSADP2",17,0)
 D L1 ;ask device
"RTN","PRSADP2",18,0)
 G P1 ;ask for employee again
"RTN","PRSADP2",19,0)
 ;====================================================================
"RTN","PRSADP2",20,0)
TK ; TimeKeeper Entry
"RTN","PRSADP2",21,0)
 S PRSTLV=2 G T0
"RTN","PRSADP2",22,0)
 ;====================================================================
"RTN","PRSADP2",23,0)
SUP ; Supervisor Entry
"RTN","PRSADP2",24,0)
 S PRSTLV=3
"RTN","PRSADP2",25,0)
T0 D TOP ; print header
"RTN","PRSADP2",26,0)
 D ^PRSAUTL G:TLI<1 EX
"RTN","PRSADP2",27,0)
 N PPERIOD
"RTN","PRSADP2",28,0)
T1 K DIC S DIC("A")="Select EMPLOYEE: ",DIC(0)="AEQM",DIC="^PRSPC("
"RTN","PRSADP2",29,0)
 S DIC("S")="I $P(^(0),""^"",8)=TLE" S D="ATL"_TLE W ! D IX^DIC
"RTN","PRSADP2",30,0)
 S DFN=+Y K DIC G:DFN<1 EX
"RTN","PRSADP2",31,0)
 S %DT="AEPX",%DT("A")="Posting Date: ",%DT(0)=-DT W ! D ^%DT
"RTN","PRSADP2",32,0)
 G:Y<1 EX S D1=Y S Y=$G(^PRST(458,"AD",D1)),PPI=$P(Y,"^",1) G EX:PPI<1
"RTN","PRSADP2",33,0)
 ;  1st put pay period in YY-PP format 4 call 2 lookup old T&L.
"RTN","PRSADP2",34,0)
 S PPERIOD=$S(Y["-":$P(Y,"^",2),1:$P(^PRST(458,$P(Y,"^"),0),"^"))
"RTN","PRSADP2",35,0)
 ;
"RTN","PRSADP2",36,0)
 ; Save T&L unit 4 use in DIC("S"), cause we might change TLE
"RTN","PRSADP2",37,0)
 ; for display if this employee was in a different T&L during 
"RTN","PRSADP2",38,0)
 ; the selected pay period.
"RTN","PRSADP2",39,0)
 S TLSCREEN=TLE
"RTN","PRSADP2",40,0)
 ;
"RTN","PRSADP2",41,0)
 D CHECKTLE(PPERIOD,DFN,.TLE) ;verify that T&L unit hasn't changed
"RTN","PRSADP2",42,0)
 D L1 ;ask device
"RTN","PRSADP2",43,0)
 ;restore TLE variable to the one originally selected.
"RTN","PRSADP2",44,0)
 S TLE=TLSCREEN
"RTN","PRSADP2",45,0)
 ; 
"RTN","PRSADP2",46,0)
 G T1 ;ask for employee again
"RTN","PRSADP2",47,0)
 ;====================================================================
"RTN","PRSADP2",48,0)
EMP ; Employee Entry
"RTN","PRSADP2",49,0)
 N PPERIOD,OLDTLE
"RTN","PRSADP2",50,0)
 S PRSTLV=1 D TOP S DFN="",SSN=$P($G(^VA(200,DUZ,1)),"^",9)
"RTN","PRSADP2",51,0)
 I SSN'="" S DFN=$O(^PRSPC("SSN",SSN,0))
"RTN","PRSADP2",52,0)
 I 'DFN W !!,*7,"Your SSN was not found in both the New Person & Employee File!" G EX
"RTN","PRSADP2",53,0)
 S TLE=$P($G(^PRSPC(DFN,0)),"^",8)
"RTN","PRSADP2",54,0)
 S %DT="AEPX",%DT("A")="Posting Date: ",%DT(0)=-DT W ! D ^%DT
"RTN","PRSADP2",55,0)
 G:Y<1 EX S D1=Y S Y=$G(^PRST(458,"AD",D1)),PPI=$P(Y,"^",1) G EX:PPI<1
"RTN","PRSADP2",56,0)
 ;  1st put pay period in YY-PP format 4 call 2 lookup old T&L.
"RTN","PRSADP2",57,0)
 S PPERIOD=$S(Y["-":$P(Y,"^",2),1:$P(^PRST(458,$P(Y,"^"),0),"^"))
"RTN","PRSADP2",58,0)
 D CHECKTLE(PPERIOD,DFN,.TLE) ;verify that T&L unit hasn't changed
"RTN","PRSADP2",59,0)
 D L1 G EX
"RTN","PRSADP2",60,0)
 ;====================================================================
"RTN","PRSADP2",61,0)
TOP W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM"
"RTN","PRSADP2",62,0)
 W !?27,"EMPLOYEE PAY PERIOD DATA" Q
"RTN","PRSADP2",63,0)
L1 W ! K IOP,%ZIS S %ZIS("A")="Select Device: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP Q:POP
"RTN","PRSADP2",64,0)
 I $D(IO("Q")) S PRSAPGM="DIS^PRSADP2",PRSALST="DFN^TLE^PPI" D QUE^PRSAUTL Q
"RTN","PRSADP2",65,0)
 U IO D DIS
"RTN","PRSADP2",66,0)
 ; pause screen when employee to prevent scroll (other users prompted)
"RTN","PRSADP2",67,0)
 I $E(IOST,1,2)="C-",'QT,PRSTLV=1 S PG=PG+1 D H1
"RTN","PRSADP2",68,0)
 D ^%ZISC K %ZIS,IOP Q
"RTN","PRSADP2",69,0)
 ;====================================================================
"RTN","PRSADP2",70,0)
DIS ; Display 14 days
"RTN","PRSADP2",71,0)
 S PDT=$G(^PRST(458,PPI,2)),STAT=$P($G(^PRST(458,PPI,"E",DFN,0)),"^",2)
"RTN","PRSADP2",72,0)
 S (PG,QT)=0 D HDR
"RTN","PRSADP2",73,0)
 W !!,?7,"Date",?21,"Scheduled Tour",?46,"Tour Exceptions"
"RTN","PRSADP2",74,0)
 W !?3,"------------------------------------------------------------------------"
"RTN","PRSADP2",75,0)
 F DAY=1:1:14 S DTE=$P(PDT,"^",DAY) D:$Y>(IOSL-5) HDR G:QT D1 D F0^PRSADP1
"RTN","PRSADP2",76,0)
 S Z=$G(^PRST(458,PPI,"E",DFN,2)) I Z'="" D:$Y>(IOSL-10) HDR Q:QT  D VCS^PRSASR1
"RTN","PRSADP2",77,0)
 S Z=$G(^PRST(458,PPI,"E",DFN,4)) I Z'="" D:$Y>(IOSL-8) HDR Q:QT  D ED^PRSASR1
"RTN","PRSADP2",78,0)
 S (X9,XF)=0 F DAY=1:1:14 D ^PRSATPE I $D(ER) S:FATAL XF=1 F K=0:0 S K=$O(ER(K)) Q:K<1  D:$Y>(IOSL-4) HDR G:QT D1 W:X9 ! W !?5,$P(PDT,"^",DAY),"  " W:$P(ER(K),"^",2)'="" $P(ER(K),"^",2) W ?28,$P(ER(K),"^",1) S X9=0
"RTN","PRSADP2",79,0)
D1 I PRSTLV>5 S Z=$G(^PRST(458,PPI,"E",DFN,5)) W:Z'="" !!,"8B Codes: ",Z
"RTN","PRSADP2",80,0)
 Q:QT  W ! I $D(^PRST(458,PPI,"E",DFN,"X",0)) D ^PRSAUDP
"RTN","PRSADP2",81,0)
 Q
"RTN","PRSADP2",82,0)
 ;====================================================================
"RTN","PRSADP2",83,0)
HDR ; Display Header
"RTN","PRSADP2",84,0)
 D H1 Q:QT  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","PRSADP2",85,0)
 S PG=PG+1
"RTN","PRSADP2",86,0)
 S X=$G(^PRSPC(DFN,0)) ;employees (partial) master record.
"RTN","PRSADP2",87,0)
 W ! W:$E(IOST,1,2)="C-" @IOF
"RTN","PRSADP2",88,0)
 W ?3,$P(X,"^",1),?36,"T&L ",$S($G(TLE):TLE,1:$P(X,"^",8))
"RTN","PRSADP2",89,0)
 S X=$P(X,"^",9)
"RTN","PRSADP2",90,0)
 I '$G(PRSTLV)!($G(PRSTLV)=1) W ?68,"XXX-XX-",$E(X,6,9) W:PG>1 ! Q
"RTN","PRSADP2",91,0)
 I PRSTLV=2!(PRSTLV=3) W ?68,$E(X),"XX-XX-",$E(X,6,9) W:PG>1 ! Q 
"RTN","PRSADP2",92,0)
 I PRSTLV=7 W ?68,$E(X,1,3),"-",$E(X,4,5),"-",$E(X,6,9) W:PG>1 ! Q
"RTN","PRSADP2",93,0)
H1 I PG,$E(IOST,1,2)="C-" R !!,"Press RETURN to Continue.",X:DTIME S:'$T!(X["^") QT=1
"RTN","PRSADP2",94,0)
 Q
"RTN","PRSADP2",95,0)
EX G KILL^XUSCLEAN
"RTN","PRSADP2",96,0)
 Q
"RTN","PRSADP2",97,0)
 ;=============J.Heiges===============================================
"RTN","PRSADP2",98,0)
CHECKTLE(PAYPRD,EMPLOYEE,TLE) ;
"RTN","PRSADP2",99,0)
 ;  In cases where Time keepers, Payroll or employees are viewing 
"RTN","PRSADP2",100,0)
 ;an old pay period, make sure employee being viewed was not in 
"RTN","PRSADP2",101,0)
 ;a different T&L unit.
"RTN","PRSADP2",102,0)
 ;  This routine calls function that checks an old pay plan and
"RTN","PRSADP2",103,0)
 ;populates OLDPP() array with T&L Unit.
"RTN","PRSADP2",104,0)
 ;  To handle cases when we're dealing with the current pay period,
"RTN","PRSADP2",105,0)
 ;ignore cases when the lookup fails, since the current pay period
"RTN","PRSADP2",106,0)
 ;will not be in the Pay Run download file.  If old T&L unit not found, 
"RTN","PRSADP2",107,0)
 ;display current.
"RTN","PRSADP2",108,0)
 ;
"RTN","PRSADP2",109,0)
 ;VARS:
"RTN","PRSADP2",110,0)
 ;  PAYPRD= Pay period in file 458, .01 field, in the
"RTN","PRSADP2",111,0)
 ;          form YY-PP (year-pay period).  i.e 96-02
"RTN","PRSADP2",112,0)
 ;  EMPLOYEE= employees internal entry number in file 450.
"RTN","PRSADP2",113,0)
 ;
"RTN","PRSADP2",114,0)
 N PPLOLD,PPL,OLDPP
"RTN","PRSADP2",115,0)
 ; call old pay plan lookup to also return old T&L unit.
"RTN","PRSADP2",116,0)
 S PPLOLD=$$OLDPP^PRS8UT(PAYPRD,+EMPLOYEE) ;pay plan from PAYPDTMP.
"RTN","PRSADP2",117,0)
 ;
"RTN","PRSADP2",118,0)
 ; Did lookup find legitimate T&L unit ?  If so, is it different
"RTN","PRSADP2",119,0)
 ; than the employees current T&L?  If so, return old value.
"RTN","PRSADP2",120,0)
 I $L($G(OLDPP("TLUNIT")))>2 D
"RTN","PRSADP2",121,0)
 .  I OLDPP("TLUNIT")'=TLE S TLE=OLDPP("TLUNIT")
"RTN","PRSADP2",122,0)
 ;
"RTN","PRSADP2",123,0)
 Q
"RTN","PRSADP2",124,0)
 ;===================================================================
"RTN","PRSAEDL")
0^3^B12250380^B11947172
"RTN","PRSAEDL",1,0)
PRSAEDL ; HISC/REL-Display Envir. Diff. Requests ;8/23/94  08:48
"RTN","PRSAEDL",2,0)
 ;;4.0;PAID;**114**;Sep 21, 1995;Build 6
"RTN","PRSAEDL",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSAEDL",4,0)
TK ; Timekeeper Entry
"RTN","PRSAEDL",5,0)
 S PRSTLV=2 G L0
"RTN","PRSAEDL",6,0)
SUP ; Supervisor Entry
"RTN","PRSAEDL",7,0)
 S PRSTLV=3 G L0
"RTN","PRSAEDL",8,0)
L0 D ^PRSAUTL G:TLI<1 EX
"RTN","PRSAEDL",9,0)
 K DIC S DIC("A")="Select EMPLOYEE (or RETURN for all): ",DIC("S")="I $P(^(0),""^"",8)=TLE",DIC(0)="AEQM",DIC="^PRSPC(",D="ATL"_TLE W ! D IX^DIC S DFN=+Y K DIC
"RTN","PRSAEDL",10,0)
 G:$D(DTOUT) EX I DFN<1,X'="" G EX
"RTN","PRSAEDL",11,0)
D1 K %DT S %DT="AEX",%DT("A")="Begin with Date: " W ! D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 EX S SDT=Y
"RTN","PRSAEDL",12,0)
 K %DT S %DT="AEX",%DT("A")="End with Date: " W ! D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 EX S EDT=Y
"RTN","PRSAEDL",13,0)
 I SDT>EDT W *7,!?5,"Starting Date cannot be later than Ending Date!" G D1
"RTN","PRSAEDL",14,0)
D2 S SRT="E" I DFN<1 R !!,"Sort by: (E=Employee  D=Date) E// ",SRT:DTIME G:'$T!(SRT["^") EX S:SRT="" SRT="E" S SRT=$TR(SRT,"de","DE") I SRT'?1U!("DE"'[SRT) W *7," Enter E or D" G D2
"RTN","PRSAEDL",15,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select Device: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP EX
"RTN","PRSAEDL",16,0)
 I $D(IO("Q")) S PRSAPGM="Q1^PRSAEDL",PRSALST="DFN^TLE^SDT^EDT^SRT" D QUE^PRSAUTL G EX
"RTN","PRSAEDL",17,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G EX
"RTN","PRSAEDL",18,0)
Q1 K ^TMP($J) I DFN>0 D Q2 G P1
"RTN","PRSAEDL",19,0)
 S NN="" F  S NN=$O(^PRSPC("ATL"_TLE,NN)) Q:NN=""  F DFN=0:0 S DFN=$O(^PRSPC("ATL"_TLE,NN,DFN)) Q:DFN<1  D Q2
"RTN","PRSAEDL",20,0)
 G P1
"RTN","PRSAEDL",21,0)
Q2 S LST=9999999-SDT
"RTN","PRSAEDL",22,0)
 F DTI=9999999-EDT-.1:0 S DTI=$O(^PRST(458.3,"AD",DFN,DTI)) Q:DTI=""!(DTI>LST)  F DA=0:0 S DA=$O(^PRST(458.3,"AD",DFN,DTI,DA)) Q:DA=""  D Q3
"RTN","PRSAEDL",23,0)
 Q
"RTN","PRSAEDL",24,0)
Q3 I SRT="E" S ^TMP($J,DFN,9999999-DTI,DA)="" Q
"RTN","PRSAEDL",25,0)
 S ^TMP($J,9999999-DTI,DFN,DA)="" Q
"RTN","PRSAEDL",26,0)
P1 S (PG,CNT,QT)=0 D HDR S EDS=";"_$P(^DD(458.3,8,0),"^",3)
"RTN","PRSAEDL",27,0)
 F N1=0:0 S N1=$O(^TMP($J,N1)) Q:N1=""  S HDR=0 F N2=0:0 S N2=$O(^TMP($J,N1,N2)) Q:N2=""  F DA=0:0 S DA=$O(^TMP($J,N1,N2,DA)) Q:DA=""  D LST G:QT P2
"RTN","PRSAEDL",28,0)
 D CK,H1
"RTN","PRSAEDL",29,0)
P2 Q
"RTN","PRSAEDL",30,0)
CK W:'CNT !!,"No Environmental Differential Requests found for this period." Q
"RTN","PRSAEDL",31,0)
LST ; Display Request
"RTN","PRSAEDL",32,0)
 S DFN=$S(SRT="E":N1,1:N2),Y0=$G(^PRSPC(DFN,0)) I HDR D:$Y>(IOSL-3) HDR Q:QT  G L1
"RTN","PRSAEDL",33,0)
 D:$Y>(IOSL-6) HDR Q:QT  I SRT="E" W !!,$P(Y0,"^",1) S X=$P(Y0,"^",9) I X W ?50,$E(X),"XX-XX-",$E(X,6,9) S HDR=1 G L1
"RTN","PRSAEDL",34,0)
 S X=N1 D DTP W !!,Y
"RTN","PRSAEDL",35,0)
L1 ; List item
"RTN","PRSAEDL",36,0)
 S Z=$G(^PRST(458.3,DA,0)) Q:Z=""  S SCOM=$P($G(^(1)),"^",1),CNT=CNT+1
"RTN","PRSAEDL",37,0)
 I SRT="D" W !?3,$P(Y0,"^",1)
"RTN","PRSAEDL",38,0)
 E  S X=$P(Z,"^",3) D DTP W !?3,Y
"RTN","PRSAEDL",39,0)
 W " ",$P(Z,"^",4),"-",$P(Z,"^",6)," (Meal: ",+$P(Z,"^",5),") "
"RTN","PRSAEDL",40,0)
 S X=$P(Z,"^",7)
"RTN","PRSAEDL",41,0)
 W $P($G(^PRST(457.6,+X,0)),"^",1)," Envir. Diff. "
"RTN","PRSAEDL",42,0)
 S X=$P(Z,"^",9)
"RTN","PRSAEDL",43,0)
 S %=$F(EDS,";"_X_":") I %>0 W $P($E(EDS,%,999),";",1)
"RTN","PRSAEDL",44,0)
 S X=$P(Z,"^",8) W:X'="" !?5,X W:SCOM'="" !?5,"Supr: ",SCOM Q
"RTN","PRSAEDL",45,0)
DTP ; Printable Date
"RTN","PRSAEDL",46,0)
 S Y=$J(+$E(X,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(X,4,5))_"-"_$E(X,2,3)
"RTN","PRSAEDL",47,0)
 Q
"RTN","PRSAEDL",48,0)
HDR ; Display Header
"RTN","PRSAEDL",49,0)
 D H1 Q:QT  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","PRSAEDL",50,0)
 S PG=PG+1,HDR=0 W !?26,"VA TIME & ATTENDANCE SYSTEM",?72,"Page ",PG
"RTN","PRSAEDL",51,0)
 W !?18,"T&L ",TLE," ENVIRONMENTAL DIFFERENTIAL REQUESTS"
"RTN","PRSAEDL",52,0)
 S X=SDT D DTP W !!?27,"From ",Y S X=EDT D DTP W " to ",Y Q
"RTN","PRSAEDL",53,0)
H1 I PG,$E(IOST,1,2)="C-" R !!,"Press RETURN to Continue.",X:DTIME S:'$T!(X["^") QT=1
"RTN","PRSAEDL",54,0)
 Q
"RTN","PRSAEDL",55,0)
EX G KILL^XUSCLEAN
"RTN","PRSAEDS")
0^4^B2865724^B2606561
"RTN","PRSAEDS",1,0)
PRSAEDS ; HISC/REL-Display Envir. Diff. Request ;6/10/93  14:33
"RTN","PRSAEDS",2,0)
 ;;4.0;PAID;**114**;Sep 21, 1995;Build 6
"RTN","PRSAEDS",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSAEDS",4,0)
 ;
"RTN","PRSAEDS",5,0)
DISP ; Display Envir. Diff. Requests
"RTN","PRSAEDS",6,0)
 S EDS=";"_$P(^DD(458.3,8,0),"^",3),CNT=0 K:NUM R
"RTN","PRSAEDS",7,0)
 F DTI=0:0 S DTI=$O(^PRST(458.3,"AD",DFN,DTI)) Q:DTI=""!(DTI>EDT)  F DA=0:0 S DA=$O(^PRST(458.3,"AD",DFN,DTI,DA)) Q:DA=""  D LST
"RTN","PRSAEDS",8,0)
 W:'CNT !,"No Requests on File." Q
"RTN","PRSAEDS",9,0)
LST ; Display Request
"RTN","PRSAEDS",10,0)
 S Z=$G(^PRST(458.3,DA,0)) Q:Z=""  S SCOM=$P($G(^(1)),"^",1) I NUM,$P(Z,"^",9)'="R" Q
"RTN","PRSAEDS",11,0)
 S CNT=CNT+1 W ! I NUM W $J(CNT,2)," " S R(CNT)=DA
"RTN","PRSAEDS",12,0)
 S X=$P(Z,"^",3) D DTP^PRSAPPU W Y," ",$P(Z,"^",4),"-",$P(Z,"^",6)," (Meal: ",+$P(Z,"^",5),") "
"RTN","PRSAEDS",13,0)
 S X=$P(Z,"^",7)
"RTN","PRSAEDS",14,0)
 W $P($G(^PRST(457.6,+X,0)),"^",1)," Envir. Diff. "
"RTN","PRSAEDS",15,0)
 S X=$P(Z,"^",9)
"RTN","PRSAEDS",16,0)
 S %=$F(EDS,";"_X_":") I %>0 W $P($E(EDS,%,999),";",1)
"RTN","PRSAEDS",17,0)
 S X=$P(Z,"^",8) W:X'="" !?5,X W:SCOM'="" !?5,"Supr: ",SCOM Q
"RTN","PRSAEDS",18,0)
HDR ; Display Header
"RTN","PRSAEDS",19,0)
 W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM",!?22,"ENVIRONMENTAL DIFFERENTIAL REQUESTS"
"RTN","PRSAEDS",20,0)
 S X=$G(^PRSPC(DFN,0)) W !!,$P(X,"^",1) S X=$P(X,"^",9) I X W ?67,$E(X),"XX-XX-",$E(X,6,9) Q
"RTN","PRSALD")
0^20^B7274044^B6111610
"RTN","PRSALD",1,0)
PRSALD ;HISC/MGD-Labor Distribution Codes Edit ;06/28/2003
"RTN","PRSALD",2,0)
 ;;4.0;PAID;**82,114**;Sep 21, 1995;Build 6
"RTN","PRSALD",3,0)
 Q
"RTN","PRSALD",4,0)
PAY ; Payroll Entry
"RTN","PRSALD",5,0)
 N PPERIOD
"RTN","PRSALD",6,0)
 S PRSTLV=7
"RTN","PRSALD",7,0)
P1 K DIC S DIC("A")="Select EMPLOYEE: ",DIC(0)="AEQM",DIC="^PRSPC("
"RTN","PRSALD",8,0)
 W ! D ^DIC S DFN=+Y K DIC G:DFN<1 EX
"RTN","PRSALD",9,0)
 S TLE=$P($G(^PRSPC(DFN,0)),"^",8)
"RTN","PRSALD",10,0)
 D POST
"RTN","PRSALD",11,0)
 G P1
"RTN","PRSALD",12,0)
 Q
"RTN","PRSALD",13,0)
TL ; Timekeeper Entry. Select T & L Unit
"RTN","PRSALD",14,0)
 N PP,PPE,PPI,PRSTLV,TLI
"RTN","PRSALD",15,0)
 S PRSTLV=2 D ^PRSAUTL G:TLI<1 EX
"RTN","PRSALD",16,0)
 ;
"RTN","PRSALD",17,0)
LASTPP ; Get Last PP received in 459
"RTN","PRSALD",18,0)
 S PP="A"
"RTN","PRSALD",19,0)
 S PP=$O(^PRST(459,PP),-1)
"RTN","PRSALD",20,0)
 S PPE=$P($G(^PRST(459,PP,0)),"^",1)
"RTN","PRSALD",21,0)
 S PPI=""
"RTN","PRSALD",22,0)
 S PPI=$O(^PRST(458,"B",PPE,PPI))
"RTN","PRSALD",23,0)
 S PPE=PPE_"  "_$P($G(^PRST(458,PPI,2)),"^",1)_" -> "_$P($G(^PRST(458,PPI,2)),"^",14)
"RTN","PRSALD",24,0)
 ;
"RTN","PRSALD",25,0)
NME ; Select individual employee
"RTN","PRSALD",26,0)
 K DIC S DIC("A")="Select EMPLOYEE: ",DIC("S")="I $P(^(0),""^"",8)=TLE,$D(^PRST(458,PPI,""E"",+Y))",DIC(0)="AEQM",DIC="^PRSPC(",D="ATL"_TLE W ! D IX^DIC S DFN=+Y K DIC
"RTN","PRSALD",27,0)
 G:DFN<1 EX S GLOB="" D POST D:GLOB]"" UNLOCK^PRSLIB00(GLOB) G NME
"RTN","PRSALD",28,0)
 ;
"RTN","PRSALD",29,0)
EX ; Clean up variables and Exit
"RTN","PRSALD",30,0)
 K D,DA,DDSFILE,DFN,DR,GLOB,LP,NN,TLE,Y,ZS,%
"RTN","PRSALD",31,0)
 Q
"RTN","PRSALD",32,0)
 ;
"RTN","PRSALD",33,0)
POST ; Edit & Post Labor Distribution Codes
"RTN","PRSALD",34,0)
 Q:'DFN
"RTN","PRSALD",35,0)
 S DA=DFN
"RTN","PRSALD",36,0)
 S DDSFILE=450,DR="[PRSA LD POST]"
"RTN","PRSALD",37,0)
 D ^DDS K DS Q:'$D(ZS)
"RTN","PRSALD",38,0)
 Q
"RTN","PRSALD",39,0)
 ;
"RTN","PRSALD",40,0)
 ; The following code will be implemented in Phase 2 of the Labor Dist.
"RTN","PRSALD",41,0)
 ;
"RTN","PRSALD",42,0)
D2 ; Select All or individual employee
"RTN","PRSALD",43,0)
 W !!,"Would you like to edit the Labor Codes in alphabetical order"
"RTN","PRSALD",44,0)
 S %=1 D YN^DICN I % S LP=% G EX:%=-1,LOOP:%=1,NME
"RTN","PRSALD",45,0)
 W !!,"Answer YES if you want all RECORDs brought up for which no data"
"RTN","PRSALD",46,0)
 W !,"has been entered." G D2
"RTN","PRSALD",47,0)
 Q
"RTN","PRSALD",48,0)
 ;
"RTN","PRSALD",49,0)
LOOP ; Loop through all employees in selected T & L
"RTN","PRSALD",50,0)
 S LP=1,NN=""
"RTN","PRSALD",51,0)
 F  S NN=$O(^PRSPC("ATL"_TLE,NN)) Q:NN=""  D
"RTN","PRSALD",52,0)
 . F DFN=0:0 S DFN=$O(^PRSPC("ATL"_TLE,NN,DFN)) Q:DFN<1  D
"RTN","PRSALD",53,0)
 . . S GLOB="" D POST D:GLOB]"" UNLOCK^PRSLIB00(GLOB) I 'LP G EX
"RTN","PRSALD",54,0)
 G EX
"RTN","PRSALD",55,0)
 Q
"RTN","PRSALD",56,0)
 ;
"RTN","PRSALD",57,0)
PP ; Select Pay Period
"RTN","PRSALD",58,0)
 S DIC="^PRST(458,",DIC(0)="AEQZ",D="B"
"RTN","PRSALD",59,0)
 D IX^DIC
"RTN","PRSALD",60,0)
 Q:Y=-1
"RTN","PRSALD",61,0)
 S PPI=+Y,PPE="PP "_$P(Y,"^",2)_"   "
"RTN","PRSALD",62,0)
 S PPE=PPE_$P($G(^PRST(458,PPI,2)),"^",1)_" -> "_$P($G(^PRST(458,PPI,2)),"^",14)
"RTN","PRSALD",63,0)
 ;
"RTN","PRSALD",64,0)
LDOUT ; Convert LABOR DIST CODE EDITED BY field into its external format.
"RTN","PRSALD",65,0)
 ;
"RTN","PRSALD",66,0)
 I "IETP"'[Y&('+Y) D  Q
"RTN","PRSALD",67,0)
 . S Y="Unknown"
"RTN","PRSALD",68,0)
 I Y="I" S Y="Initial Download"
"RTN","PRSALD",69,0)
 I Y="E" S Y="Edit & Update Download"
"RTN","PRSALD",70,0)
 I Y="T" S Y="Transfer Download"
"RTN","PRSALD",71,0)
 I Y="P" S Y="Payrun Download"
"RTN","PRSALD",72,0)
 I +Y D
"RTN","PRSALD",73,0)
 . S Y=$P($G(^VA(200,Y,0)),"^",1)
"RTN","PRSALD",74,0)
 . I Y="" S Y="Unknown"
"RTN","PRSALD",75,0)
 Q
"RTN","PRSALVB")
0^5^B15774190^B14556380
"RTN","PRSALVB",1,0)
PRSALVB ;HISC/REL,WIRMFO/JAH - Leave Balances ;09/21/01
"RTN","PRSALVB",2,0)
 ;;4.0;PAID;**22,35,34,69,114**;Sep 21, 1995;Build 6
"RTN","PRSALVB",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSALVB",4,0)
EMP ; Employee Entry Point
"RTN","PRSALVB",5,0)
 S DFN="",SSN=$P($G(^VA(200,DUZ,1)),"^",9) I SSN'="" S DFN=$O(^PRSPC("SSN",SSN,0))
"RTN","PRSALVB",6,0)
 I 'DFN W !!,$C(7),"Your SSN was not found in both the New Person & Employee File!" G EX
"RTN","PRSALVB",7,0)
 G D
"RTN","PRSALVB",8,0)
TK ; Timekeeper Entry Point
"RTN","PRSALVB",9,0)
 S PRSTLV=2 G S0
"RTN","PRSALVB",10,0)
SUP ; Supervisor Entry Point
"RTN","PRSALVB",11,0)
 S PRSTLV=3 G S0
"RTN","PRSALVB",12,0)
S0 D ^PRSAUTL G:TLI<1 EX
"RTN","PRSALVB",13,0)
S1 K DIC S DIC("A")="Select EMPLOYEE: ",DIC("S")="I $P(^(0),""^"",8)=TLE",DIC(0)="AEQM",DIC="^PRSPC(",D="ATL"_TLE W ! D IX^DIC S DFN=+Y K DIC G:DFN<1 EX
"RTN","PRSALVB",14,0)
D N HOLD
"RTN","PRSALVB",15,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select Device: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP EX
"RTN","PRSALVB",16,0)
 I $D(IO("Q")) S PRSAPGM="Q1^PRSALVB",PRSALST="DFN" D QUE^PRSAUTL G EX
"RTN","PRSALVB",17,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G EX
"RTN","PRSALVB",18,0)
Q1 ; Show Balances
"RTN","PRSALVB",19,0)
 W:$E(IOST,1,2)="C-" @IOF W !?29,"EMPLOYEE LEAVE BALANCES"
"RTN","PRSALVB",20,0)
 ;
"RTN","PRSALVB",21,0)
 ;  Display employee name and ssn
"RTN","PRSALVB",22,0)
 ;  SSN defaults to display of last four digits
"RTN","PRSALVB",23,0)
 ;    employee displays last four
"RTN","PRSALVB",24,0)
 ;    timekeeper and supervisor display first digit+last four
"RTN","PRSALVB",25,0)
 ;
"RTN","PRSALVB",26,0)
 S X=$G(^PRSPC(DFN,0))
"RTN","PRSALVB",27,0)
 W !!,$P(X,"^",1)
"RTN","PRSALVB",28,0)
 S X=$P(X,"^",9)
"RTN","PRSALVB",29,0)
 I X,'$G(PRSTLV)!($G(PRSTLV)=1) W ?67,"XXX-XX-",$E(X,6,9)
"RTN","PRSALVB",30,0)
 I X,$G(PRSTLV)=2!($G(PRSTLV)=3) W ?67,$E(X),"XX-XX-",$E(X,6,9)
"RTN","PRSALVB",31,0)
 ;
"RTN","PRSALVB",32,0)
 ; compare last pp processed to current pp
"RTN","PRSALVB",33,0)
 ;
"RTN","PRSALVB",34,0)
 S LST=+$P($G(^PRSPC(DFN,"MISC4")),"^",16)
"RTN","PRSALVB",35,0)
 S D1=DT D PP^PRSAPPU
"RTN","PRSALVB",36,0)
 S YR=$P(PPE,"-",1)
"RTN","PRSALVB",37,0)
 S D1=+$P(PPE,"-",2)
"RTN","PRSALVB",38,0)
 S YR=$S(D1'<LST:YR,1:$E(199+YR,2,3))
"RTN","PRSALVB",39,0)
 S PPE=YR_"-"_$S(LST>9:LST,1:"0"_LST)
"RTN","PRSALVB",40,0)
 S PPI=$O(^PRST(458,"B",PPE,0))
"RTN","PRSALVB",41,0)
 I PPI S D1=$P($G(^PRST(458,PPI,2)),"^",14)
"RTN","PRSALVB",42,0)
 W !!,"Balances are as of ",D1
"RTN","PRSALVB",43,0)
 ;
"RTN","PRSALVB",44,0)
 S C0=^PRSPC(DFN,0),DB=$P(C0,"^",10),LVG=$P(C0,"^",15),NH=+$P(C0,"^",16)
"RTN","PRSALVB",45,0)
 S ALN=$G(^PRSPC(DFN,"ANNUAL")),SLN=$G(^("SICK")),CTN=$G(^("COMP")),MLN=$G(^("MILITARY"))
"RTN","PRSALVB",46,0)
 ;
"RTN","PRSALVB",47,0)
 I NH=48,DB=1 D
"RTN","PRSALVB",48,0)
 .  S BAY=$G(^PRSPC(DFN,"BAYLOR"))
"RTN","PRSALVB",49,0)
 .  S $P(ALN,"^",3)=$P(BAY,"^",1)
"RTN","PRSALVB",50,0)
 .  S $P(SLN,"^",3)=$P(BAY,"^",13)
"RTN","PRSALVB",51,0)
 .  F KK=9:1:12 S $P(ALN,"^",KK+1)=$P(BAY,"^",KK)
"RTN","PRSALVB",52,0)
 ;
"RTN","PRSALVB",53,0)
 W !!,"Leave Group: ",LVG
"RTN","PRSALVB",54,0)
 S Y=$P(ALN,"^",3)
"RTN","PRSALVB",55,0)
 W !,"Annual Leave Balance:",?30,$S(Y="":"",1:$J(Y,8,3))
"RTN","PRSALVB",56,0)
 S Y=$P(SLN,"^",3)
"RTN","PRSALVB",57,0)
 W !!,"Sick Leave Balance:",?30,$S(Y="":"",1:$J(Y,8,3))
"RTN","PRSALVB",58,0)
 ;
"RTN","PRSALVB",59,0)
 ;If employee has something in comptime record
"RTN","PRSALVB",60,0)
 ; -Determine number & year of last pay period on file for use in
"RTN","PRSALVB",61,0)
 ;  guessing the year when comp time earned.
"RTN","PRSALVB",62,0)
 ; -Loop thru comp time values & report.
"RTN","PRSALVB",63,0)
 ;
"RTN","PRSALVB",64,0)
 I CTN]"",$P(CTN,U,1,8)'="^^^^^^^" D
"RTN","PRSALVB",65,0)
 . N KK,LASTPP,LASTYR,Y
"RTN","PRSALVB",66,0)
 . S Y=+$P($G(^PRST(458,0)),U,3) Q:'Y
"RTN","PRSALVB",67,0)
 . S LASTPP=+$P($P($G(^PRST(458,Y,0)),U),"-",2) Q:'LASTPP
"RTN","PRSALVB",68,0)
 . S LASTYR=$P($G(^PRST(458,Y,1)),U) Q:'LASTYR
"RTN","PRSALVB",69,0)
 . S LASTYR=$E(LASTYR,1,3)+1700
"RTN","PRSALVB",70,0)
 . W ! F KK=1:1:8 I $P(CTN,"^",KK) D C1
"RTN","PRSALVB",71,0)
 ;
"RTN","PRSALVB",72,0)
 ;If employee has restored leave then interpret 1 digit year
"RTN","PRSALVB",73,0)
 ;on file from AAC and display.
"RTN","PRSALVB",74,0)
 ;
"RTN","PRSALVB",75,0)
 S Y=$P(ALN,"^",10) I Y D
"RTN","PRSALVB",76,0)
 .N YRDIGIT
"RTN","PRSALVB",77,0)
 .W !!," Restored Leave:",?30,$J(Y,8,3)
"RTN","PRSALVB",78,0)
 .S YRDIGIT=$P(ALN,"^",12)
"RTN","PRSALVB",79,0)
 .I YRDIGIT>-1 W !,"Use by end of leave year ",$$BLDYR^PRSLIB00(YRDIGIT)," or forfeit."
"RTN","PRSALVB",80,0)
 S Y=$P(ALN,"^",11) I Y D
"RTN","PRSALVB",81,0)
 .N YRDIGIT
"RTN","PRSALVB",82,0)
 .W !!," Restored Leave:",?30,$J(Y,8,3)
"RTN","PRSALVB",83,0)
 .S YRDIGIT=$P(ALN,"^",13)
"RTN","PRSALVB",84,0)
 .I YRDIGIT>-1 W !,"Use by end of leave year ",$$BLDYR^PRSLIB00(YRDIGIT)," or forfeit."
"RTN","PRSALVB",85,0)
 ;
"RTN","PRSALVB",86,0)
 ;Display other types of leave, if any.
"RTN","PRSALVB",87,0)
 ;
"RTN","PRSALVB",88,0)
 S Y=$P(MLN,"^",1) I Y D
"RTN","PRSALVB",89,0)
 . W !!,"Military Leave in "
"RTN","PRSALVB",90,0)
 . W $S($$MLINHRS^PRSAENT(DFN):"hours:",1:"days:")
"RTN","PRSALVB",91,0)
 . W ?30,$J(Y,8,2)
"RTN","PRSALVB",92,0)
 S Y=$P(ALN,"^",9) I Y W !!,"Non-Pay Leave Taken:",?30,$J(Y,8,3)
"RTN","PRSALVB",93,0)
 I $E(IOST,1,2)="C-" S HOLD=$$ASK^PRSLIB00(1)
"RTN","PRSALVB",94,0)
 Q
"RTN","PRSALVB",95,0)
 ;
"RTN","PRSALVB",96,0)
 ;====================================================================
"RTN","PRSALVB",97,0)
C1 ; Display comp time hours and add 8 pay periods (111 days)
"RTN","PRSALVB",98,0)
 ; to the "Comp Time Earned Pay Period" field to display when 
"RTN","PRSALVB",99,0)
 ; the comp time must be used by.
"RTN","PRSALVB",100,0)
 ;
"RTN","PRSALVB",101,0)
 ; input
"RTN","PRSALVB",102,0)
 ;     CTN    = value of "COMP" node from File 450
"RTN","PRSALVB",103,0)
 ;     KK     = piece in CTN (1-8) of comp time being displayed
"RTN","PRSALVB",104,0)
 ;     LASTPP = number of last pay period
"RTN","PRSALVB",105,0)
 ;     LASTYR = 4-digit year associated with last pay period
"RTN","PRSALVB",106,0)
 ;     
"RTN","PRSALVB",107,0)
 N D1,EARNPP,EARNYR,PPE,USEDT
"RTN","PRSALVB",108,0)
 W !,"Comp Time/Credit Hours: ",$J($P(CTN,U,KK),8,3)
"RTN","PRSALVB",109,0)
 S EARNPP=+$P(CTN,"^",KK+9) ; number of pay period CT earned 
"RTN","PRSALVB",110,0)
 S EARNYR=$S(LASTPP<EARNPP:LASTYR-1,1:LASTYR) ; guess year CT earned
"RTN","PRSALVB",111,0)
 S PPE=$E(EARNYR,3,4)_"-"_$S(EARNPP<10:"0",1:"")_EARNPP
"RTN","PRSALVB",112,0)
 D NX^PRSAPPU S USEDT=$$FMADD^XLFDT(D1,111)
"RTN","PRSALVB",113,0)
 I USEDT W " must be used by ",$$FMTE^XLFDT(USEDT)
"RTN","PRSALVB",114,0)
 Q
"RTN","PRSALVB",115,0)
 ;
"RTN","PRSALVB",116,0)
EX G KILL^XUSCLEAN
"RTN","PRSALVE")
0^6^B6334175^B6083461
"RTN","PRSALVE",1,0)
PRSALVE ;HISC/REL-Edit Leave Request ;12-SEP-00
"RTN","PRSALVE",2,0)
 ;;4.0;PAID;**61,114**;Sep 21, 1995;Build 6
"RTN","PRSALVE",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSALVE",4,0)
 S DFN="",SSN=$P($G(^VA(200,DUZ,1)),"^",9) I SSN'="" S DFN=$O(^PRSPC("SSN",SSN,0))
"RTN","PRSALVE",5,0)
 I 'DFN W !!,*7,"Your SSN was not found in both the New Person & Employee File!" G EX
"RTN","PRSALVE",6,0)
 S TLE=$P($G(^PRSPC(DFN,0)),"^",8) S:TLE="" TLE="   " S TLI=+$O(^PRST(455.5,"B",TLE,0))
"RTN","PRSALVE",7,0)
 D ^PRSAENT S ZENT="",Z1="30 31 31 31 32 33 28 35 35 34 30",Z2="AL SL CB AD NL WP CU AA DL ML RL"
"RTN","PRSALVE",8,0)
 F K=1:1:11 I $E(ENT,$P(Z1," ",K)) S ZENT=ZENT_$P(Z2," ",K)_" "
"RTN","PRSALVE",9,0)
 I ZENT="" W !!?5,"You are not entitled to any type of Leave." G EX
"RTN","PRSALVE",10,0)
 W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM",!?30,"EDIT LEAVE REQUESTS"
"RTN","PRSALVE",11,0)
 S X=$G(^PRSPC(DFN,0)) W !!,$P(X,"^",1) S X=$P(X,"^",9) I X W ?67,"XXX-XX-",$E(X,6,9)
"RTN","PRSALVE",12,0)
 S X1=DT,X2=-5 D C^%DTC S EDT=9999999-X
"RTN","PRSALVE",13,0)
 W ! D DISP
"RTN","PRSALVE",14,0)
 G:'CNT EX
"RTN","PRSALVE",15,0)
X1 R !!,"Edit Which Request #? ",X:DTIME G:'$T!("^"[X) EX I X'?1N.N!(X<1)!(X>CNT) W *7," Enter # of Request to Edit" G X1
"RTN","PRSALVE",16,0)
 K DDS,DA,DR S X=+X,DA=R(X),ZOLD=$G(^PRST(458.1,DA,0)),Z1=$P(ZOLD,"^",3,6) D ED^PRSALVR G EX
"RTN","PRSALVE",17,0)
DISP ; Display Leave Requests
"RTN","PRSALVE",18,0)
 S LVT=";"_$P(^DD(458.1,6,0),"^",3),LVS=";"_$P(^DD(458.1,8,0),"^",3),CNT=0 K R
"RTN","PRSALVE",19,0)
 F DTI=0:0 S DTI=$O(^PRST(458.1,"AD",DFN,DTI)) Q:DTI=""!(DTI>EDT)  F DA=0:0 S DA=$O(^PRST(458.1,"AD",DFN,DTI,DA)) Q:DA=""  D LST
"RTN","PRSALVE",20,0)
 W:'CNT !,"No Requests to Edit." Q
"RTN","PRSALVE",21,0)
LST ; Display Request
"RTN","PRSALVE",22,0)
 S Z=$G(^PRST(458.1,DA,0)) Q:Z=""  S SCOM=$P($G(^(1)),"^",1)
"RTN","PRSALVE",23,0)
 S Z1=$P(Z,"^",3)
"RTN","PRSALVE",24,0)
 S Y=$G(^PRST(458,"AD",Z1)),PPI=$P(Y,"^",1),DAY=$P(Y,"^",2)
"RTN","PRSALVE",25,0)
 I PPI,DAY,$D(^PRST(458,PPI,"E",DFN,"D",DAY,10)) Q
"RTN","PRSALVE",26,0)
 S CNT=CNT+1 W !,$J(CNT,2)," " S R(CNT)=DA
"RTN","PRSALVE",27,0)
 W $P(Z,"^",4)," " S X=$P(Z,"^",3) D DTP^PRSAPPU W Y," to ",$P(Z,"^",6)," "
"RTN","PRSALVE",28,0)
 S X=$P(Z,"^",5) D DTP^PRSAPPU W Y," "
"RTN","PRSALVE",29,0)
 S X=$P(Z,"^",15) I X W X," ",$S($P(Z,"^",16)="D":"days",1:"hrs")," "
"RTN","PRSALVE",30,0)
 S X=$P(Z,"^",7),%=$F(LVT,";"_X_":") I %>0 W $P($E(LVT,%,999),";",1)," "
"RTN","PRSALVE",31,0)
 S X=$P(Z,"^",9)
"RTN","PRSALVE",32,0)
 S %=$F(LVS,";"_X_":") I %>0 W $P($E(LVS,%,999),";",1)
"RTN","PRSALVE",33,0)
 S X=$P(Z,"^",8) W:X'="" !?5,X W:SCOM'="" !?5,"Supr: ",SCOM Q
"RTN","PRSALVE",34,0)
EX G KILL^XUSCLEAN
"RTN","PRSALVL")
0^7^B13610849^B12924757
"RTN","PRSALVL",1,0)
PRSALVL ; HISC/REL-Display Leave Requests ;1/24/96  13:56
"RTN","PRSALVL",2,0)
 ;;4.0;PAID;**9,114**;Sep 21, 1995;Build 6
"RTN","PRSALVL",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSALVL",4,0)
TK ; TimeKeeper Entry
"RTN","PRSALVL",5,0)
 S PRSTLV=2 G TL
"RTN","PRSALVL",6,0)
SUP ; Supervisor Entry
"RTN","PRSALVL",7,0)
 S PRSTLV=3 G TL
"RTN","PRSALVL",8,0)
PAY ; Payroll Entry
"RTN","PRSALVL",9,0)
 S PRSTLV=7 G TL
"RTN","PRSALVL",10,0)
TL D ^PRSAUTL G:TLI<1 EX
"RTN","PRSALVL",11,0)
 K DIC S DIC("A")="Select EMPLOYEE (or RETURN for all): ",DIC("S")="I $P(^(0),""^"",8)=TLE",DIC(0)="AEQM",DIC="^PRSPC(",D="ATL"_TLE W ! D IX^DIC S DFN=+Y K DIC
"RTN","PRSALVL",12,0)
 G:$D(DTOUT) EX I DFN<1,X'="" G EX
"RTN","PRSALVL",13,0)
D1 K %DT S %DT="AEX",%DT("A")="Begin with Date: " W ! D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 EX S SDT=Y
"RTN","PRSALVL",14,0)
 K %DT S %DT="AEX",%DT("A")="End with Date: " W ! D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 EX S EDT=Y
"RTN","PRSALVL",15,0)
 I SDT>EDT W *7,!?5,"Starting Date cannot be later than Ending Date!" G D1
"RTN","PRSALVL",16,0)
D2 S SRT="E" I DFN<1 R !!,"Sort by: (E=Employee  D=Date) E// ",SRT:DTIME G:'$T!(SRT["^") EX S:SRT="" SRT="E" S SRT=$TR(SRT,"de","DE") I SRT'?1U!("DE"'[SRT) W *7," Enter E or D" G D2
"RTN","PRSALVL",17,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select Device: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP EX
"RTN","PRSALVL",18,0)
 I $D(IO("Q")) S PRSAPGM="Q1^PRSALVL",PRSALST="DFN^TLE^SDT^EDT^SRT" D QUE^PRSAUTL G EX
"RTN","PRSALVL",19,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G EX
"RTN","PRSALVL",20,0)
Q1 K ^TMP($J) I DFN>0 S NN=$P($G(^PRSPC(DFN,0)),"^",1) D Q2 G P1
"RTN","PRSALVL",21,0)
 S NN="" F  S NN=$O(^PRSPC("ATL"_TLE,NN)) Q:NN=""  F DFN=0:0 S DFN=$O(^PRSPC("ATL"_TLE,NN,DFN)) Q:DFN<1  D Q2
"RTN","PRSALVL",22,0)
 G P1
"RTN","PRSALVL",23,0)
Q2 S LST=9999999-SDT
"RTN","PRSALVL",24,0)
 F DTI=0:0 S DTI=$O(^PRST(458.1,"AD",DFN,DTI)) Q:DTI=""!(DTI>LST)  F DA=0:0 S DA=$O(^PRST(458.1,"AD",DFN,DTI,DA)) Q:DA=""  I $G(^(DA))'>EDT D Q3
"RTN","PRSALVL",25,0)
 Q
"RTN","PRSALVL",26,0)
Q3 I $P($G(^PRST(458.1,DA,0)),"^",9)="X" Q
"RTN","PRSALVL",27,0)
 S Z=$P($G(^PRST(458.1,DA,0)),"^",3) I SRT="E" S ^TMP($J,NN_"~"_DFN,+Z,DA)="" Q
"RTN","PRSALVL",28,0)
 S ^TMP($J,+Z,NN_"~"_DFN,DA)="" Q
"RTN","PRSALVL",29,0)
P1 S (PG,QT)=0 D HDR S LVT=";"_$P(^DD(458.1,6,0),"^",3),LVS=";"_$P(^DD(458.1,8,0),"^",3)
"RTN","PRSALVL",30,0)
 S N1="" F  S N1=$O(^TMP($J,N1)) Q:N1=""  S HDR=0,N2="" F  S N2=$O(^TMP($J,N1,N2)) Q:N2=""  F DA=0:0 S DA=$O(^TMP($J,N1,N2,DA)) Q:DA=""  D LST G:QT EX
"RTN","PRSALVL",31,0)
 D H1 G EX
"RTN","PRSALVL",32,0)
LST ; Display Request
"RTN","PRSALVL",33,0)
 S DFN=$P($S(SRT="E":N1,1:N2),"~",2),Y0=$G(^PRSPC(DFN,0)) I HDR G:$Y'>(IOSL-3) L1 D HDR Q:QT
"RTN","PRSALVL",34,0)
 D:$Y>(IOSL-6) HDR Q:QT  S HDR=1
"RTN","PRSALVL",35,0)
 I SRT="E" W !!,$P(Y0,"^",1) S X=$P(Y0,"^",9) D  G L1
"RTN","PRSALVL",36,0)
 . I PRSTLV=2!(PRSTLV=3) W ?50,$E(X),"XX-XX-",$E(X,6,9)
"RTN","PRSALVL",37,0)
 . I PRSTLV=7 W ?50,$E(X,1,3),"-",$E(X,4,5),"-",$E(X,6,9)
"RTN","PRSALVL",38,0)
 S X=N1 D DTP W !!,Y
"RTN","PRSALVL",39,0)
L1 ; List item
"RTN","PRSALVL",40,0)
 S Z=$G(^PRST(458.1,DA,0)) Q:Z=""  S SCOM=$P($G(^(1)),"^",1)
"RTN","PRSALVL",41,0)
 I SRT="D" W !?3,$P(Y0,"^",1)," ",$P(Z,"^",4)
"RTN","PRSALVL",42,0)
 E  W !?3,$P(Z,"^",4)," " S X=$P(Z,"^",3) D DTP W Y
"RTN","PRSALVL",43,0)
 W " to ",$P(Z,"^",6)," " S X=$P(Z,"^",5) D DTP W Y," "
"RTN","PRSALVL",44,0)
 I SRT="E" S X=$P(Z,"^",15) I X W X," ",$S($P(Z,"^",16)="D":"days",1:"hrs")," "
"RTN","PRSALVL",45,0)
 S X=$P(Z,"^",7),%=$F(LVT,";"_X_":") I %>0 W $P($E(LVT,%,999),";",1)," "
"RTN","PRSALVL",46,0)
 S X=$P(Z,"^",9)
"RTN","PRSALVL",47,0)
 S %=$F(LVS,";"_X_":") I %>0 W $P($E(LVS,%,999),";",1)
"RTN","PRSALVL",48,0)
 S X=$P(Z,"^",8) W:X'="" !?5,X S Y=$P(Z,"^",11) D DTP^PRSAUDP W !?5,"Requested: ",Y
"RTN","PRSALVL",49,0)
 W:SCOM'="" !?5,"Supr: ",SCOM Q
"RTN","PRSALVL",50,0)
DTP ; Printable Date
"RTN","PRSALVL",51,0)
 S Y=$J(+$E(X,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(X,4,5))_"-"_$E(X,2,3)
"RTN","PRSALVL",52,0)
 Q
"RTN","PRSALVL",53,0)
HDR ; Display Header
"RTN","PRSALVL",54,0)
 D H1 Q:QT  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","PRSALVL",55,0)
 S PG=PG+1,HDR=0 W !?26,"VA TIME & ATTENDANCE SYSTEM",?72,"Page ",PG
"RTN","PRSALVL",56,0)
 W !?28,"T&L ",TLE," LEAVE REQUESTS"
"RTN","PRSALVL",57,0)
 S X=SDT D DTP W !!?27,"From ",Y S X=EDT D DTP W " to ",Y Q
"RTN","PRSALVL",58,0)
H1 I PG,$E(IOST,1,2)="C-" R !!,"Press RETURN to Continue.",X:DTIME S:'$T!(X["^") QT=1
"RTN","PRSALVL",59,0)
 Q
"RTN","PRSALVL",60,0)
EX G KILL^XUSCLEAN
"RTN","PRSALVX")
0^8^B5286389^B5361977
"RTN","PRSALVX",1,0)
PRSALVX ;HISC/REL - Cancel Leave Request ;12/15/04
"RTN","PRSALVX",2,0)
 ;;4.0;PAID;**61,93,114**;Sep 21, 1995;Build 6
"RTN","PRSALVX",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSALVX",4,0)
 N SKIP,ZOLD
"RTN","PRSALVX",5,0)
 S DFN="",SSN=$P($G(^VA(200,DUZ,1)),"^",9) I SSN'="" S DFN=$O(^PRSPC("SSN",SSN,0))
"RTN","PRSALVX",6,0)
 I 'DFN W !!,*7,"Your SSN was not found in both the New Person & Employee File!" G EX
"RTN","PRSALVX",7,0)
 S TLE=$P($G(^PRSPC(DFN,0)),"^",8) S:TLE="" TLE="   " S TLI=+$O(^PRST(455.5,"B",TLE,0))
"RTN","PRSALVX",8,0)
 W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM",!?29,"CANCEL LEAVE REQUESTS"
"RTN","PRSALVX",9,0)
 S X=$G(^PRSPC(DFN,0)) W !!,$P(X,"^",1) S X=$P(X,"^",9) I X W ?50,"XXX-XX-",$E(X,6,9)
"RTN","PRSALVX",10,0)
 K %DT S %DT="AEFX",%DT("A")="Begin with Date: ",%DT("B")="T" W ! D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 EX S EDT=9999999-Y
"RTN","PRSALVX",11,0)
 W ! S NUM=1 D DISP^PRSALVS
"RTN","PRSALVX",12,0)
 G:'CNT EX
"RTN","PRSALVX",13,0)
X1 R !!,"Cancel Which Request #? ",X:DTIME G:'$T!("^"[X) EX I X'?1N.N!(X<1)!(X>CNT) W *7," Enter # of Request to Cancel" G X1
"RTN","PRSALVX",14,0)
 S X=+X,DA=R(X)
"RTN","PRSALVX",15,0)
 ;
"RTN","PRSALVX",16,0)
 ; if request is approved and employee has any part-time physician memos
"RTN","PRSALVX",17,0)
 ; then lock appropriate pay periods
"RTN","PRSALVX",18,0)
 K PPLCK,PPLCKE
"RTN","PRSALVX",19,0)
 S SKIP=0
"RTN","PRSALVX",20,0)
 S ZOLD=$G(^PRST(458.1,DA,0))
"RTN","PRSALVX",21,0)
 I $P(ZOLD,U,12),$$PTP^PRSPUT3($P(ZOLD,U,2)) D
"RTN","PRSALVX",22,0)
 . ; lock applicable time cards
"RTN","PRSALVX",23,0)
 . D LCK^PRSPAPU($P(ZOLD,U,2),$$FMADD^XLFDT($P(ZOLD,U,3),-1),$P(ZOLD,U,5),.PPLCK,.PPLCKE)
"RTN","PRSALVX",24,0)
 . ; if problem locking time cards
"RTN","PRSALVX",25,0)
 . I $D(PPLCKE) D
"RTN","PRSALVX",26,0)
 . . S SKIP=1 ; set flag to skip cancel of leave
"RTN","PRSALVX",27,0)
 . . D TCULCK^PRSPAPU($P(ZOLD,U,2),.PPLCK) ; unlock any locked PP
"RTN","PRSALVX",28,0)
 . . D RLCKE^PRSPAPU(.PPLCKE) ; report problems
"RTN","PRSALVX",29,0)
 . . K PPLCK,PPLCKE
"RTN","PRSALVX",30,0)
 Q:SKIP  ; don't proceed with cancel
"RTN","PRSALVX",31,0)
 ;
"RTN","PRSALVX",32,0)
 ; cancel leave request
"RTN","PRSALVX",33,0)
 S $P(^PRST(458.1,DA,0),"^",9)="X" K ^PRST(458.1,"AR",DFN,DA)
"RTN","PRSALVX",34,0)
 ;
"RTN","PRSALVX",35,0)
 ; if timecards were locked (PTP), unpost the leave and remove the locks
"RTN","PRSALVX",36,0)
 I $D(PPLCK) D
"RTN","PRSALVX",37,0)
 . D ULR^PRSPLVA(ZOLD)
"RTN","PRSALVX",38,0)
 . D TCULCK^PRSPAPU($P(ZOLD,U,2),.PPLCK)
"RTN","PRSALVX",39,0)
 . K PPLCK
"RTN","PRSALVX",40,0)
 ;
"RTN","PRSALVX",41,0)
 ; update T&L action counts
"RTN","PRSALVX",42,0)
 D UPD^PRSASAL W "  ... done"
"RTN","PRSALVX",43,0)
EX G KILL^XUSCLEAN
"RTN","PRSAOTL")
0^9^B10131034^B9618534
"RTN","PRSAOTL",1,0)
PRSAOTL ; HISC/REL-List OT Requests ;5/24/95  16:28
"RTN","PRSAOTL",2,0)
 ;;4.0;PAID;**34,114**;Sep 21, 1995;Build 6
"RTN","PRSAOTL",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSAOTL",4,0)
TK ; TimeKeeper Entry
"RTN","PRSAOTL",5,0)
 S PRSTLV=2 G TL
"RTN","PRSAOTL",6,0)
SUP ; Supervisor Entry
"RTN","PRSAOTL",7,0)
 S PRSTLV=3 G TL
"RTN","PRSAOTL",8,0)
PAY ; Payroll Entry
"RTN","PRSAOTL",9,0)
 S PRSTLV=7 G TL
"RTN","PRSAOTL",10,0)
TL D ^PRSAUTL G:TLI<1 EX
"RTN","PRSAOTL",11,0)
 K DIC S DIC("A")="Select EMPLOYEE (or RETURN for all): ",DIC("S")="I $P(^(0),""^"",8)=TLE",DIC(0)="AEQM",DIC="^PRSPC(",D="ATL"_TLE W ! D IX^DIC S DFN=+Y K DIC
"RTN","PRSAOTL",12,0)
 G:$D(DTOUT) EX I DFN<1,X'="" G EX
"RTN","PRSAOTL",13,0)
D1 K %DT S %DT="AEX",%DT("A")="Begin with Date: " W ! D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 EX S SDT=Y
"RTN","PRSAOTL",14,0)
 K %DT S %DT="AEX",%DT("A")="End with Date: " W ! D ^%DT K %DT S:$D(DTOUT) Y=0 G:Y<1 EX S EDT=Y
"RTN","PRSAOTL",15,0)
 I SDT>EDT W *7,!?5,"Starting Date cannot be later than Ending Date!" G D1
"RTN","PRSAOTL",16,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select Device: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP EX
"RTN","PRSAOTL",17,0)
 I $D(IO("Q")) S PRSAPGM="Q1^PRSAOTL",PRSALST="DFN^TLE^SDT^EDT" D QUE^PRSAUTL G EX
"RTN","PRSAOTL",18,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G EX
"RTN","PRSAOTL",19,0)
Q1 S (PG,CNT,QT)=0 D HDR S OTS=";"_$P(^DD(458.2,10,0),"^",3)
"RTN","PRSAOTL",20,0)
 I DFN>0 D Q3,CK,H1 Q
"RTN","PRSAOTL",21,0)
 S NN="" F  S NN=$O(^PRSPC("ATL"_TLE,NN)) Q:NN=""  F DFN=0:0 S DFN=$O(^PRSPC("ATL"_TLE,NN,DFN)) Q:DFN<1  S HDR=0 D Q3 G:QT Q2
"RTN","PRSAOTL",22,0)
 D CK,H1
"RTN","PRSAOTL",23,0)
Q2 Q
"RTN","PRSAOTL",24,0)
Q3 F DTI=SDT-.1:0 S DTI=$O(^PRST(458.2,"AD",DFN,DTI)) Q:DTI=""!(DTI>EDT)  F DA=0:0 S DA=$O(^PRST(458.2,"AD",DFN,DTI,DA)) Q:DA=""  D LST G:QT Q4
"RTN","PRSAOTL",25,0)
Q4 Q
"RTN","PRSAOTL",26,0)
CK W:'CNT !!,"No Overtime or CompTime/CreditHrs Requests found for this period." Q
"RTN","PRSAOTL",27,0)
LST ; Display Request
"RTN","PRSAOTL",28,0)
 D:$Y>(IOSL-3) HDR Q:QT
"RTN","PRSAOTL",29,0)
 I 'HDR D:$Y>(IOSL-7) HDR Q:QT  S X=$G(^PRSPC(DFN,0)) W !!,$P(X,"^",1) S X=$P(X,"^",9) D
"RTN","PRSAOTL",30,0)
 . I X,PRSTLV=2!(PRSTLV=3) W ?50,$E(X),"XX-XX-",$E(X,6,9)
"RTN","PRSAOTL",31,0)
 . I X,PRSTLV=7 W ?50,$E(X,1,3),"-",$E(X,4,5),"-",$E(X,6,9)
"RTN","PRSAOTL",32,0)
 . S HDR=1
"RTN","PRSAOTL",33,0)
L1 ; List item
"RTN","PRSAOTL",34,0)
 S Z=$G(^PRST(458.2,DA,0)) Q:Z=""  S SCOM=$P($G(^(1)),"^",1),CNT=CNT+1
"RTN","PRSAOTL",35,0)
 S X=$P(Z,"^",3) D DTP W !?3,Y,"   ",$P(Z,"^",6)," Hrs. ",$S($P(Z,"^",5)="CT":"COMP TIME/CREDIT HRS",1:"OVERTIME")
"RTN","PRSAOTL",36,0)
 I PRSTLV=3,$P(Z,"^",5)="OT",$P(Z,"^",10) W " ($",$J($P(Z,"^",10),0,2),")"
"RTN","PRSAOTL",37,0)
 S X=$P(Z,"^",9) I X'="" W " on T&L ",X
"RTN","PRSAOTL",38,0)
 S X=$P(Z,"^",8),%=$F(OTS,";"_X_":") I %>0 W " ",$P($E(OTS,%,999),";",1)
"RTN","PRSAOTL",39,0)
 S Y=$P(Z,"^",7) W:Y'="" !?10,Y W:SCOM'="" !?10,"Supr: ",SCOM Q
"RTN","PRSAOTL",40,0)
DTP ; Printable Date
"RTN","PRSAOTL",41,0)
 S Y=$J(+$E(X,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(X,4,5))_"-"_$E(X,2,3)
"RTN","PRSAOTL",42,0)
 Q
"RTN","PRSAOTL",43,0)
HDR ; Display Header
"RTN","PRSAOTL",44,0)
 D H1 Q:QT  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","PRSAOTL",45,0)
 S PG=PG+1,HDR=0 W !?26,"VA TIME & ATTENDANCE SYSTEM",?72,"Page ",PG
"RTN","PRSAOTL",46,0)
 W !?25,"T&L ",TLE," OT and CT/CH REQUESTS"
"RTN","PRSAOTL",47,0)
 S X=SDT D DTP W !!?27,"From ",Y S X=EDT D DTP W " to ",Y Q
"RTN","PRSAOTL",48,0)
H1 I PG,$E(IOST,1,2)="C-" R !!,"Press RETURN to Continue.",X:DTIME S:'$T!(X["^") QT=1
"RTN","PRSAOTL",49,0)
 Q
"RTN","PRSAOTL",50,0)
EX G KILL^XUSCLEAN
"RTN","PRSAOTS")
0^10^B3632675^B3411815
"RTN","PRSAOTS",1,0)
PRSAOTS ; HISC/REL-Display OT/CT Requests ;8/16/95  14:28
"RTN","PRSAOTS",2,0)
 ;;4.0;PAID;**34,114**;Sep 21, 1995;Build 6
"RTN","PRSAOTS",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSAOTS",4,0)
DISP ; Display all requests
"RTN","PRSAOTS",5,0)
 S OTS=";"_$P(^DD(458.2,10,0),"^",3),CNT=0 K:NUM R
"RTN","PRSAOTS",6,0)
 F DTI=DTI-.1:0 S DTI=$O(^PRST(458.2,"AD",DFN,DTI)) Q:DTI=""  F DA=0:0 S DA=$O(^PRST(458.2,"AD",DFN,DTI,DA)) Q:DA=""  D LST
"RTN","PRSAOTS",7,0)
 W:'CNT !!,"No Requests on File." Q
"RTN","PRSAOTS",8,0)
LST ; Display Request
"RTN","PRSAOTS",9,0)
 S Z=$G(^PRST(458.2,DA,0)) Q:Z=""  S SCOM=$P($G(^(1)),"^",1) I NUM,$P(Z,"^",8)'="R" Q:"DX"[$P(Z,"^",8)  D  Q:Z=""
"RTN","PRSAOTS",10,0)
 .S X=$P(Z,"^",3),X=$G(^PRST(458,"AD",+X))
"RTN","PRSAOTS",11,0)
 .S Y=$G(^PRST(458,+$P(X,"^",1),"E",DFN,"D",+$P(X,"^",2),2))
"RTN","PRSAOTS",12,0)
 .Q:Y'[$P(Z,"^",5)  S Z="" Q
"RTN","PRSAOTS",13,0)
 S CNT=CNT+1 W !! I NUM W $J(CNT,2)," " S R(CNT)=DA
"RTN","PRSAOTS",14,0)
 S X=$P(Z,"^",3) D DTP^PRSAPPU W Y," ",$P(Z,"^",6)," Hrs. ",$S($P(Z,"^",5)="CT":"COMP TIME/CREDIT HRS",1:"OVERTIME")
"RTN","PRSAOTS",15,0)
 I $P(Z,"^",5)="OT",$P(Z,"^",10) W " ($",$J($P(Z,"^",10),0,2),")"
"RTN","PRSAOTS",16,0)
 S X=$P(Z,"^",9) I X'="" W " on T&L ",X
"RTN","PRSAOTS",17,0)
 S X=$P(Z,"^",8),%=$F(OTS,";"_X_":") I %>0 W " ",$P($E(OTS,%,999),";",1)
"RTN","PRSAOTS",18,0)
 S Y=$P(Z,"^",7) W:Y'="" !?10,Y W:SCOM'="" !?10,"Supr: ",SCOM Q
"RTN","PRSAOTS",19,0)
HDR ; Display Header
"RTN","PRSAOTS",20,0)
 W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM",!?19,"OVERTIME & COMP TIME/CREDIT HRS REQUESTS"
"RTN","PRSAOTS",21,0)
 S X=$G(^PRSPC(DFN,0)) W !!,$P(X,"^",1) S X=$P(X,"^",9) I X W ?50,$E(X),"XX-XX-",$E(X,6,9) Q
"RTN","PRSAOTX")
0^11^B12887435^B12490972
"RTN","PRSAOTX",1,0)
PRSAOTX ; HISC/REL-OT/CT Approvals ;5/23/95  12:55
"RTN","PRSAOTX",2,0)
 ;;4.0;PAID;**34,114**;Sep 21, 1995;Build 6
"RTN","PRSAOTX",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSAOTX",4,0)
 S (QT,NF)=0,PRSTLV=3 K ^TMP($J)
"RTN","PRSAOTX",5,0)
 S TLE="" F  S TLE=$O(^PRST(455.5,"B",TLE)) Q:TLE=""  S TLH=0 F TLI=0:0 S TLI=$O(^PRST(455.5,"B",TLE,TLI)) Q:TLI<1  I $D(^PRST(455.5,TLI,"A",DUZ)) D TLC I QT G ES
"RTN","PRSAOTX",6,0)
ES I '$D(^TMP($J)) W !!,$S('NF:"No Overtime or Comp/Credit actions to certify.",1:"No Overtime or Comp/Credit certification actions taken.") G EX
"RTN","PRSAOTX",7,0)
 D ^PRSAES G:'ESOK EX D NOW^%DTC S NOW=%
"RTN","PRSAOTX",8,0)
 F TLI=0:0 S TLI=$O(^TMP($J,TLI)) Q:TLI<1  S ACT=$G(^(TLI)) I ACT'="" F DA=0:0 S DA=$O(^TMP($J,TLI,DA)) Q:DA<1  S DFN=$G(^(DA)) D OT
"RTN","PRSAOTX",9,0)
 G EX
"RTN","PRSAOTX",10,0)
TLC ; Check T&L
"RTN","PRSAOTX",11,0)
 S (ECST,NUM)=0 K R
"RTN","PRSAOTX",12,0)
 S NN="" F  S NN=$O(^PRSPC("ATL"_TLE,NN)) Q:NN=""  F DFN=0:0 S DFN=$O(^PRSPC("ATL"_TLE,NN,DFN)) Q:DFN<1  I $D(^PRST(458.2,"AS",DFN)) D CHK I QT G T1
"RTN","PRSAOTX",13,0)
 Q:'$D(^TMP($J,TLI))  I ECST W !!,"Estimated Cost of Overtime: $",$J(ECST,0,2)
"RTN","PRSAOTX",14,0)
OK R !!,"Disposition (A=Approve, D=Disapprove, X=Dis. Line Item, RETURN to bypass): ",ACT:DTIME S:'$T!(ACT["^") QT=1 G:QT!(ACT="") T1 S ACT=$TR(ACT,"adx","ADX") I ACT'?1U!("ADX"'[ACT) W *7,!,"Enter A, D or X or Press RETURN to bypass" G OK
"RTN","PRSAOTX",15,0)
 I ACT="X" D CAN S ACT="A"
"RTN","PRSAOTX",16,0)
 S ^TMP($J,TLI)=ACT Q
"RTN","PRSAOTX",17,0)
T1 K ^TMP($J,TLI) Q
"RTN","PRSAOTX",18,0)
CHK ; Check for needed approvals
"RTN","PRSAOTX",19,0)
 F DA=0:0 S DA=$O(^PRST(458.2,"AS",DFN,DA)) Q:DA<1  D LST Q:QT  S ^TMP($J,TLI,DA)=DFN
"RTN","PRSAOTX",20,0)
 Q
"RTN","PRSAOTX",21,0)
OT ; Process action
"RTN","PRSAOTX",22,0)
 S X=ESNAM,X1=DUZ,X2=DA D EN^XUSHSHP
"RTN","PRSAOTX",23,0)
 S $P(^PRST(458.2,DA,0),"^",8)=$S($P(DFN,"^",2)="D":"D",1:ACT) K ^PRST(458.2,"AS",+DFN,DA)
"RTN","PRSAOTX",24,0)
 S $P(^PRST(458.2,DA,0),"^",16,18)=DUZ_"^"_NOW_"^"_X Q
"RTN","PRSAOTX",25,0)
LST ; Display Request
"RTN","PRSAOTX",26,0)
 S Z=$G(^PRST(458.2,DA,0)) Q:Z=""  D:'TLH HDR D:$Y>(IOSL-4) HDR Q:QT
"RTN","PRSAOTX",27,0)
 S NUM=NUM+1,X=$P(Z,"^",3) D DTP^PRSAPPU S R(NUM)=DA
"RTN","PRSAOTX",28,0)
 W !,$J(NUM,2)," ",Y," ",$P($G(^PRSPC(DFN,0)),"^",1),?42,$P(Z,"^",6)," Hrs. ",$S($P(Z,"^",5)="CT":"COMP TIME/CREDIT HRS",1:"OVERTIME")
"RTN","PRSAOTX",29,0)
 I $P(Z,"^",5)="OT",$P(Z,"^",10) S ECST=ECST+$P(Z,"^",10)
"RTN","PRSAOTX",30,0)
 S X=$P(Z,"^",9) I X'="" W " on T&L ",X
"RTN","PRSAOTX",31,0)
 S Y=$P(Z,"^",7) W:Y'="" !?10,Y S NF=NF+1 Q
"RTN","PRSAOTX",32,0)
HDR ; Display Header
"RTN","PRSAOTX",33,0)
 I TLH R !!,"Press RETURN to Continue.",X:DTIME S:'$T!(X["^") QT=1 Q:QT
"RTN","PRSAOTX",34,0)
 W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM",!?21,"OVERTIME & COMP TIME/CREDIT HRS APPROVAL"
"RTN","PRSAOTX",35,0)
 S Z0=$G(^PRST(455.5,TLI,0)),Z1=$P(Z0,"^",5),Z1=$P($G(^DIC(49,+Z1,0)),"^",1) I $P(Z0,"^",6)'="" S Z1=Z1_", "_$P(Z0,"^",6)
"RTN","PRSAOTX",36,0)
 S Z1=$P(Z0,"^",1)_" "_Z1 W !!?(80-$L(Z1)\2),Z1,! S TLH=1 Q
"RTN","PRSAOTX",37,0)
CAN ; Process selective disapproval
"RTN","PRSAOTX",38,0)
 R !,"Disapprove which Items: ",Y:DTIME I '$T!(Y["^") S K1=0 Q
"RTN","PRSAOTX",39,0)
 F K=1:1 S K1=$P(Y,",",K) Q:K1=""  S K2=$S(K1["-":$P(K1,"-",2),1:+K1),K1=+K1 D  G:'K1 CAN F K3=K1:1:K2 S DA=$G(R(K3)) I DA S $P(^TMP($J,TLI,DA),"^",2)="D"
"RTN","PRSAOTX",40,0)
 .I K1'<1,K1'>NUM,K1?1N.N Q
"RTN","PRSAOTX",41,0)
 .I K2'<1,K2'>NUM,K2?1N.N Q
"RTN","PRSAOTX",42,0)
 .W *7,!,"  Enter Numbers, or Range of Items (e.g., 1,3-5,7)"
"RTN","PRSAOTX",43,0)
 .S K1=0 Q
"RTN","PRSAOTX",44,0)
 Q
"RTN","PRSAOTX",45,0)
EX F TLI=0:0 S TLI=$O(^TMP($J,TLI)) Q:TLI<1  S TLE=$P($G(^PRST(455.5,TLI,0)),"^",1) D APP^PRSASAL
"RTN","PRSAOTX",46,0)
 G ^PRSAPPX
"RTN","PRSAPPP")
0^12^B13712907^B13129921
"RTN","PRSAPPP",1,0)
PRSAPPP ; HISC/REL-Payroll Process Prior PP ;5/31/95  10:00
"RTN","PRSAPPP",2,0)
 ;;4.0;PAID;**114**;Sep 21, 1995;Build 6
"RTN","PRSAPPP",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSAPPP",4,0)
 S PRSTLV=7
"RTN","PRSAPPP",5,0)
 W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM"
"RTN","PRSAPPP",6,0)
 W !?26,"PRIOR PAY PERIOD CORRECTIONS"
"RTN","PRSAPPP",7,0)
R0 R !!,"Select T&L Unit (or ALL): ",X:DTIME G:'$T!("^"[X) EX S X=$TR(X,"al","AL") I X="ALL" S TLE=""
"RTN","PRSAPPP",8,0)
 E  K DIC S DIC="^PRST(455.5,",DIC(0)="EMQ" D ^DIC G EX:$D(DTOUT),R0:Y<1 S TLE=$P(Y,"^",2)
"RTN","PRSAPPP",9,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select Device: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP EX
"RTN","PRSAPPP",10,0)
 I $D(IO("Q")) S PRSAPGM="Q1^PRSAPPP",PRSALST="TLE" D QUE^PRSAUTL G EX
"RTN","PRSAPPP",11,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G EX
"RTN","PRSAPPP",12,0)
Q1 ; Process List
"RTN","PRSAPPP",13,0)
 D NOW^%DTC S DTP=% D DTP S (PG,QT)=0 S LNE="" S $P(LNE,"-",80)=""
"RTN","PRSAPPP",14,0)
 F DFN=0:0 S DFN=$O(^PRST(458,"AXA",DFN)) Q:DFN<1  D CHK I L1 F PPI=0:0 S PPI=$O(^PRST(458,"AXA",DFN,PPI)) Q:PPI<1  F AUN=0:0 S AUN=$O(^PRST(458,"AXA",DFN,PPI,AUN)) Q:AUN<1  D PROC G:QT Q2
"RTN","PRSAPPP",15,0)
Q2 Q
"RTN","PRSAPPP",16,0)
PROC ; Process
"RTN","PRSAPPP",17,0)
 D HDR Q:QT  S PPE=$P($G(^PRST(458,PPI,0)),"^",1) D HDR^PRSADP1 W !,LNE
"RTN","PRSAPPP",18,0)
 S X0=$G(^PRST(458,PPI,"E",DFN,"X",AUN,0)),TYP=$P(X0,"^",4)
"RTN","PRSAPPP",19,0)
 D TM:TYP="T",VC:TYP="V",HZ:TYP="H"
"RTN","PRSAPPP",20,0)
 I $D(^PRST(458,PPI,"E",DFN,"X",AUN,7)) W !!,"Change Remarks: ",^(7)
"RTN","PRSAPPP",21,0)
 D:$E(IOST,1,2)="C-" CLR Q
"RTN","PRSAPPP",22,0)
TM ; Process Time/Tour Change
"RTN","PRSAPPP",23,0)
 W !?29,"* * * Prior Data * * *" S IFN=AUN  S DAY=$P($G(^PRST(458,PPI,"E",DFN,"X",IFN,1)),"^",1),DTE=$P($G(^PRST(458,PPI,2)),"^",+DAY) D GET,DIS^PRSAPPQ
"RTN","PRSAPPP",24,0)
 W !,LNE W !?27,"* * * Corrected Data * * *" S IFN=AUN+1 D GET D DIS^PRSAPPQ
"RTN","PRSAPPP",25,0)
 W !,LNE Q
"RTN","PRSAPPP",26,0)
VC ; Process VCS Sales Change
"RTN","PRSAPPP",27,0)
 W !?29,"* * * Prior Data * * *" S IFN=AUN D GET S Z=AUR(1) D VCS^PRSAPPQ
"RTN","PRSAPPP",28,0)
 W !,LNE W !?27,"* * * Corrected Data * * *" S IFN=AUN+1 D GET S Z=AUR(1) D VCS^PRSAPPQ
"RTN","PRSAPPP",29,0)
 W !,LNE Q
"RTN","PRSAPPP",30,0)
HZ ; Process Hazard Change
"RTN","PRSAPPP",31,0)
 W !?29,"* * * Prior Data * * *" S IFN=AUN D GET S Z=AUR(1) D ED^PRSAPPQ
"RTN","PRSAPPP",32,0)
 W !,LNE W !?27,"* * * Corrected Data * * *" S IFN=AUN+1 D GET S Z=AUR(1) D ED^PRSAPPQ
"RTN","PRSAPPP",33,0)
 W !,LNE Q
"RTN","PRSAPPP",34,0)
GET ; Get Data Array
"RTN","PRSAPPP",35,0)
 K AUR S AUC=0 I '$D(^PRST(458,PPI,"E",DFN,"X",IFN)) S IFN=$O(^(IFN)) I IFN<1 S AUC=1 G G1 ;Get current data
"RTN","PRSAPPP",36,0)
 I $P($G(^PRST(458,PPI,"E",DFN,"X",IFN,0)),"^",4)'=TYP S IFN=IFN+1 G GET
"RTN","PRSAPPP",37,0)
 I TYP="T",$P($G(^PRST(458,PPI,"E",DFN,"X",IFN,1)),"^",1)'=DAY S IFN=IFN+1 G GET
"RTN","PRSAPPP",38,0)
 F L1=1:1:$S(TYP="T":6,1:1) S AUR(L1)=$G(^PRST(458,PPI,"E",DFN,"X",IFN,L1))
"RTN","PRSAPPP",39,0)
 Q
"RTN","PRSAPPP",40,0)
G1 I TYP'="T" G G2
"RTN","PRSAPPP",41,0)
 S L2=0 F L1=0,1,2,10,3,4 S L2=L2+1,AUR(L2)=$G(^PRST(458,PPI,"E",DFN,"D",DAY,L1))
"RTN","PRSAPPP",42,0)
 Q
"RTN","PRSAPPP",43,0)
G2 I TYP="H" S AUR(1)=$G(^PRST(458,PPI,"E",DFN,4))
"RTN","PRSAPPP",44,0)
 I TYP="V" S AUR(1)=$G(^PRST(458,PPI,"E",DFN,2))
"RTN","PRSAPPP",45,0)
 Q
"RTN","PRSAPPP",46,0)
CHK ; Screen Employee for Selected T&L
"RTN","PRSAPPP",47,0)
 S L1=1 Q:TLE=""  S:$P($G(^PRSPC(DFN,0)),"^",8)'=TLE L1=0 Q
"RTN","PRSAPPP",48,0)
CLR ; Clear Entries
"RTN","PRSAPPP",49,0)
 R !!,"Clear Correction? ",X:DTIME S:'$T!(X["^") QT=1 Q:QT  S X=$TR(X,"yesno","YESNO")
"RTN","PRSAPPP",50,0)
 I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G CLR
"RTN","PRSAPPP",51,0)
 I X'?1"Y".E Q
"RTN","PRSAPPP",52,0)
 D NOW^%DTC S $P(^PRST(458,PPI,"E",DFN,"X",AUN,0),"^",5,7)="P^"_DUZ_"^"_%
"RTN","PRSAPPP",53,0)
 K ^PRST(458,"AXA",DFN,PPI,AUN)
"RTN","PRSAPPP",54,0)
 W " ... done." Q
"RTN","PRSAPPP",55,0)
HDR ; Display Header
"RTN","PRSAPPP",56,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 Q:$E(IOST,1,2)="C-"
"RTN","PRSAPPP",57,0)
 W !?26,"VA TIME & ATTENDANCE SYSTEM",?72,"Page ",PG
"RTN","PRSAPPP",58,0)
 W !?26,"PRIOR PAY PERIOD CORRECTIONS"
"RTN","PRSAPPP",59,0)
 W !!?(80-$L(DTP)\2),DTP Q
"RTN","PRSAPPP",60,0)
DTP ; Printable Date/Time
"RTN","PRSAPPP",61,0)
 S %=DTP,DTP=$J(+$E(DTP,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(DTP,4,5))_"-"_$E(DTP,2,3)
"RTN","PRSAPPP",62,0)
 S:%#1 %=+$E(%_"0",9,10)_"^"_$E(%_"000",11,12),DTP=DTP_$J($S(%>12:%-12,1:+%),3)_":"_$P(%,"^",2)_$S(%<12:"am",%<24:"pm",1:"m") K % Q
"RTN","PRSAPPP",63,0)
EX G KILL^XUSCLEAN
"RTN","PRSASU")
0^13^B7171027^B6487426
"RTN","PRSASU",1,0)
PRSASU ; HISC/REL-Supervisor Un-Certified List ;8/23/94  09:43
"RTN","PRSASU",2,0)
 ;;4.0;PAID;**114**;Sep 21, 1995;Build 6
"RTN","PRSASU",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSASU",4,0)
TK ; TimeKeeper Entry
"RTN","PRSASU",5,0)
 S PRSTLV=2 G S1
"RTN","PRSASU",6,0)
SUP ; Supervisor Entry
"RTN","PRSASU",7,0)
 S PRSTLV=3 G S1
"RTN","PRSASU",8,0)
PAY ; Payroll Entry
"RTN","PRSASU",9,0)
 S PRSTLV=7 G S1
"RTN","PRSASU",10,0)
S1 W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM"
"RTN","PRSASU",11,0)
 W !?29,"UN-CERTIFIED EMPLOYEES"
"RTN","PRSASU",12,0)
 D ^PRSAUTL G:TLI<1 EX
"RTN","PRSASU",13,0)
 D NOW^%DTC S DT=%\1,Y=$G(^PRST(458,"AD",DT)),PPI=$P(Y,"^",1),DAY=$P(Y,"^",2)
"RTN","PRSASU",14,0)
 I DAY<6 S X1=DT,X2=-7 D C^%DTC S PPI=$P($G(^PRST(458,"AD",X)),"^",1) G:'PPI EX
"RTN","PRSASU",15,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select Device: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP EX
"RTN","PRSASU",16,0)
 I $D(IO("Q")) S PRSAPGM="Q1^PRSASU",PRSALST="TLI^TLE^PPI" D QUE^PRSAUTL G EX
"RTN","PRSASU",17,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G EX
"RTN","PRSASU",18,0)
Q1 S PDT=$G(^PRST(458,PPI,2)),PDTI=$G(^(1)),(QT,PG,CNT)=0 D HDR
"RTN","PRSASU",19,0)
 S NN="" F  S NN=$O(^PRSPC("ATL"_TLE,NN)) Q:NN=""  F DFN=0:0 S DFN=$O(^PRSPC("ATL"_TLE,NN,DFN)) Q:DFN<1  I $D(^PRST(458,PPI,"E",DFN,0)) D CHK I QT G T0
"RTN","PRSASU",20,0)
 D CK,H1
"RTN","PRSASU",21,0)
T0 G EX
"RTN","PRSASU",22,0)
CK W:'CNT !!,"No Un-Certified Employees found." Q
"RTN","PRSASU",23,0)
CHK ; Check for needed approvals
"RTN","PRSASU",24,0)
 S STAT=$P($G(^PRST(458,PPI,"E",DFN,0)),"^",2) I STAT'="","PX"[STAT Q
"RTN","PRSASU",25,0)
 I $Y>(IOSL-5) D HDR Q:QT
"RTN","PRSASU",26,0)
 S X0=$G(^PRSPC(DFN,0)),SSN=$P(X0,"^",9),CNT=CNT+1
"RTN","PRSASU",27,0)
 I PRSTLV=2!(PRSTLV=3) W !,$E(SSN),"XX-XX-",$E(SSN,6,9),"  ",$P(X0,"^",1)
"RTN","PRSASU",28,0)
 I PRSTLV=7 W !,$E(SSN,1,3),"-",$E(SSN,4,5),"-",$E(SSN,6,9),"  ",$P(X0,"^",1)
"RTN","PRSASU",29,0)
 I SSN S EDUZ=+$O(^VA(200,"SSN",SSN,0)) I $D(^PRST(455.5,"AS",EDUZ,TLI)) S Z0=$P($G(^PRST(455.5,TLI,"S",EDUZ,0)),"^",2) I Z0'="",Z0'=TLE W "  Is Certified by T&L ",Z0
"RTN","PRSASU",30,0)
 Q
"RTN","PRSASU",31,0)
HDR ; Display Header
"RTN","PRSASU",32,0)
 D H1 Q:QT  W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","PRSASU",33,0)
 S PG=PG+1 W !?26,"VA TIME & ATTENDANCE SYSTEM",?72,"Page ",PG
"RTN","PRSASU",34,0)
 W !?29,"UN-CERTIFIED EMPLOYEES"
"RTN","PRSASU",35,0)
 S Z0=$G(^PRST(455.5,TLI,0)),Z1=$P(Z0,"^",5),Z1=$P($G(^DIC(49,+Z1,0)),"^",1) I $P(Z0,"^",6)'="" S Z1=Z1_", "_$P(Z0,"^",6)
"RTN","PRSASU",36,0)
 S Z1=$P(Z0,"^",1)_" "_Z1 W !!?(80-$L(Z1)\2),Z1
"RTN","PRSASU",37,0)
 S Z0=$P(PDT,"^",1)_" to "_$P(PDT,"^",14) W !!?(80-$L(Z0)\2),Z0,! Q
"RTN","PRSASU",38,0)
H1 I PG,$E(IOST,1,2)="C-" R !!,"Press RETURN to Continue.",X:DTIME S:'$T!(X["^") QT=1
"RTN","PRSASU",39,0)
 Q
"RTN","PRSASU",40,0)
EX G KILL^XUSCLEAN
"RTN","PRSATE2")
0^14^B19536924^B19219222
"RTN","PRSATE2",1,0)
PRSATE2 ; HISC/REL,WIRMFO/JAH - Display Employee Tour of Duty ;3/3/1998
"RTN","PRSATE2",2,0)
 ;;4.0;PAID;**8,22,35,114**;Sep 21, 1995;Build 6
"RTN","PRSATE2",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSATE2",4,0)
 ;
"RTN","PRSATE2",5,0)
 ;VARIABLES:
"RTN","PRSATE2",6,0)
 ;   PPI   =  Pay period internal entry number from file 458
"RTN","PRSATE2",7,0)
 ;   PPE   =  Pay period number in YY-PP format (e.g. 97-03)
"RTN","PRSATE2",8,0)
 ;   HOLDSCR  = dummy variable used to hold value from hold screen
"RTN","PRSATE2",9,0)
 ;              extrinsic function call.
"RTN","PRSATE2",10,0)
 ;   PRSTLV  = flag: contains 2 for timekeepers and 3 for supervisors.
"RTN","PRSATE2",11,0)
 ;   TLI   =  Internal entry of the T&L unit
"RTN","PRSATE2",12,0)
 ;   DFN   =  DFN is defined in a call from routine PRSATE to label NOL.
"RTN","PRSATE2",13,0)
 ;            Otherwise DFN is set to zero.
"RTN","PRSATE2",14,0)
 ;   SRT   =  Report sort entered by user.
"RTN","PRSATE2",15,0)
 ;            (C = current pp, L = last pp, N = next pp)
"RTN","PRSATE2",16,0)
 ;
"RTN","PRSATE2",17,0)
TK ; TimeKeeper Entry
"RTN","PRSATE2",18,0)
 S PRSTLV=2 G TL
"RTN","PRSATE2",19,0)
SUP ; Supervisor Entry
"RTN","PRSATE2",20,0)
 S PRSTLV=3 G TL
"RTN","PRSATE2",21,0)
TL N HOLDSCR
"RTN","PRSATE2",22,0)
 ;
"RTN","PRSATE2",23,0)
 ;Ask user to select a Time and Leave Unit: go to exit if unsuccessful
"RTN","PRSATE2",24,0)
 D ^PRSAUTL G:TLI<1 EX
"RTN","PRSATE2",25,0)
 ;
"RTN","PRSATE2",26,0)
 ;set PPI to the last pay period opened by Payroll
"RTN","PRSATE2",27,0)
 S PPI=$P(^PRST(458,0),"^",3),PPE=$P($G(^PRST(458,PPI,0)),"^",1)
"RTN","PRSATE2",28,0)
 ;
"RTN","PRSATE2",29,0)
 ;
"RTN","PRSATE2",30,0)
 S DFN=0 D NOL G:SRT="^" EX
"RTN","PRSATE2",31,0)
 ;
"RTN","PRSATE2",32,0)
 ;If user chose last pay periods tour then decrement pay period.
"RTN","PRSATE2",33,0)
 I SRT="L" S PPI=PPI-1,PPE=$P($G(^PRST(458,PPI,0)),"^",1)
"RTN","PRSATE2",34,0)
 ;
"RTN","PRSATE2",35,0)
 ;If user chose Next pay period's tour of duty
"RTN","PRSATE2",36,0)
 ;then increment pay period.  This value is for display only, 
"RTN","PRSATE2",37,0)
 ;since the actual data for a tour change for the next pay period 
"RTN","PRSATE2",38,0)
 ;is stored on the 4 node of the current pay period.
"RTN","PRSATE2",39,0)
 I SRT="N" S PPE=$E($$NXTPP^PRSAPPU(PPE),3,7)
"RTN","PRSATE2",40,0)
 ;
"RTN","PRSATE2",41,0)
T1 ;ask type of output
"RTN","PRSATE2",42,0)
 S DIR(0)="SA^S:SHORT;L:LONG"
"RTN","PRSATE2",43,0)
 S DIR("A")="Select Type of Display (S or L): ",DIR("B")="SHORT"
"RTN","PRSATE2",44,0)
 S DIR("?")="Answer S for Tour Titles, L for Detailed Time Segments"
"RTN","PRSATE2",45,0)
 D ^DIR K DIR G:$D(DIRUT) EX
"RTN","PRSATE2",46,0)
 S TYP=Y
"RTN","PRSATE2",47,0)
 ;
"RTN","PRSATE2",48,0)
NME ;Ask user what employee they want to display tour of duty for.
"RTN","PRSATE2",49,0)
 K DIC S DIC("A")="Select EMPLOYEE: "
"RTN","PRSATE2",50,0)
 S DIC("S")="I $P(^(0),""^"",8)=TLE"
"RTN","PRSATE2",51,0)
 S DIC(0)="AEQM"
"RTN","PRSATE2",52,0)
 S DIC="^PRSPC(",D="ATL"_TLE
"RTN","PRSATE2",53,0)
 W ! D IX^DIC S DFN=+Y K DIC
"RTN","PRSATE2",54,0)
 ;
"RTN","PRSATE2",55,0)
 I DFN<1 G EX
"RTN","PRSATE2",56,0)
 W ! K IOP,%ZIS
"RTN","PRSATE2",57,0)
 S %ZIS("A")="Select Device: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP EX
"RTN","PRSATE2",58,0)
 I $D(IO("Q")) S PRSAPGM="Q1^PRSATE2",PRSALST="TLI^TLE^TYP^SRT^DFN^PPI^PPE" D QUE^PRSAUTL G NME
"RTN","PRSATE2",59,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G NME
"RTN","PRSATE2",60,0)
Q1 W:$E(IOST,1,2)="C-" @IOF W !?26,"VA TIME & ATTENDANCE SYSTEM"
"RTN","PRSATE2",61,0)
 W !?29,"EMPLOYEE TOUR OF DUTY"
"RTN","PRSATE2",62,0)
 D:TYP="S" S0
"RTN","PRSATE2",63,0)
 D:TYP="L" L0
"RTN","PRSATE2",64,0)
 I $E(IOST,1,2)="C-" S HOLDSCR=$$ASK^PRSLIB00(1)
"RTN","PRSATE2",65,0)
 Q
"RTN","PRSATE2",66,0)
 ;====================================================================
"RTN","PRSATE2",67,0)
S0 ; Short Display
"RTN","PRSATE2",68,0)
 ;Loop thru both weeks of pay period simultaneously, 
"RTN","PRSATE2",69,0)
 ;displaying sun-sat side by side.
"RTN","PRSATE2",70,0)
 D HDR^PRSADP1,DT
"RTN","PRSATE2",71,0)
 W !!?11,"Week 1 - ",$E(Y1,5,13),?45,"Week 2 - ",$E(Y2,5,13),!
"RTN","PRSATE2",72,0)
 F DAY=1:1:7 D S1
"RTN","PRSATE2",73,0)
 Q
"RTN","PRSATE2",74,0)
 ;====================================================================
"RTN","PRSATE2",75,0)
S1 ;
"RTN","PRSATE2",76,0)
 ; Y1 =  employee tour of duty node 4 current day of week one.
"RTN","PRSATE2",77,0)
 ; Y2 =  employee tour of duty node 4 current day of week two.
"RTN","PRSATE2",78,0)
 ; TD =  tour of duty pointer to Tour of Duty file.
"RTN","PRSATE2",79,0)
 ;
"RTN","PRSATE2",80,0)
 S Y1=$G(^PRST(458,PPI,"E",DFN,"D",DAY,0)),TD=$P(Y1,"^",2)
"RTN","PRSATE2",81,0)
 I SRT="N",$P(Y1,"^",3) S TD=$P(Y1,"^",4)
"RTN","PRSATE2",82,0)
 W !?4,$P("Sun Mon Tue Wed Thu Fri Sat"," ",DAY)
"RTN","PRSATE2",83,0)
 W:TD ?11,$P($G(^PRST(457.1,TD,0)),"^",1)
"RTN","PRSATE2",84,0)
 S Y2=$G(^PRST(458,PPI,"E",DFN,"D",DAY+7,0)),TD=$P(Y2,"^",2)
"RTN","PRSATE2",85,0)
 I SRT="N",$P(Y2,"^",3) S TD=$P(Y2,"^",4)
"RTN","PRSATE2",86,0)
 W:TD ?45,$P($G(^PRST(457.1,TD,0)),"^",1) Q:SRT="N"
"RTN","PRSATE2",87,0)
 I $P(Y1,"^",13)="",$P(Y2,"^",13)="" Q
"RTN","PRSATE2",88,0)
 W ! S TD=$P(Y1,"^",13)
"RTN","PRSATE2",89,0)
 W:TD ?11,$P($G(^PRST(457.1,TD,0)),"^",1)
"RTN","PRSATE2",90,0)
 S TD=$P(Y2,"^",13) W:TD ?45,$P($G(^PRST(457.1,TD,0)),"^",1)
"RTN","PRSATE2",91,0)
 Q
"RTN","PRSATE2",92,0)
 ;====================================================================
"RTN","PRSATE2",93,0)
L0 ; Long Display
"RTN","PRSATE2",94,0)
 S C0=^PRSPC(DFN,0)
"RTN","PRSATE2",95,0)
 W !!,$P(C0,U)
"RTN","PRSATE2",96,0)
 S X=$P(C0,U,9) W ?65,$E(X),"XX-XX-",$E(X,6,9)
"RTN","PRSATE2",97,0)
 D DT W !!,?11,"Week 1 - ",$E(Y1,5,13),?45,"Week 2 - ",$E(Y2,5,13),!
"RTN","PRSATE2",98,0)
 F DAY=1:1:7 D ^PRSATE3
"RTN","PRSATE2",99,0)
 Q
"RTN","PRSATE2",100,0)
 ;
"RTN","PRSATE2",101,0)
H1 I $E(IOST,1,2)="C-" S QT=$$ASK^PRSLIB00()
"RTN","PRSATE2",102,0)
 Q
"RTN","PRSATE2",103,0)
DT ; Get date of PP
"RTN","PRSATE2",104,0)
 I SRT'="N" S Y1=$P($G(^PRST(458,PPI,2)),"^",1),Y2=$P($G(^(2)),"^",8) Q
"RTN","PRSATE2",105,0)
 N X,Y,X1,X2 S X1=$P($G(^PRST(458,PPI,1)),"^",1),X2=14 D C^%DTC,DTP^PRSAPPU S Y1="    "_Y
"RTN","PRSATE2",106,0)
 S X1=X,X2=7 D C^%DTC,DTP^PRSAPPU S Y2="    "_Y Q
"RTN","PRSATE2",107,0)
 Q
"RTN","PRSATE2",108,0)
NOL ; Select this PP or Next
"RTN","PRSATE2",109,0)
 ;
"RTN","PRSATE2",110,0)
 ;SCL is set to 1 when NOL is called from this routine.
"RTN","PRSATE2",111,0)
 ;SCL is set to CN when NOL is called from PRSATE.
"RTN","PRSATE2",112,0)
 S SCL=$S(DFN:"",1:"CN")
"RTN","PRSATE2",113,0)
 ;
"RTN","PRSATE2",114,0)
 ;X,D1 is set to FileMan dates of selected pay period.
"RTN","PRSATE2",115,0)
 S (X,D1)=$P($G(^PRST(458,PPI,1)),"^",1)
"RTN","PRSATE2",116,0)
 W !
"RTN","PRSATE2",117,0)
 ;
"RTN","PRSATE2",118,0)
 ;if called from PRSATE and employee has data in this pay period
"RTN","PRSATE2",119,0)
 ;then set sort = next pp.  Then if the timecard has been transmitted
"RTN","PRSATE2",120,0)
 ;already set sort = current, next
"RTN","PRSATE2",121,0)
 I DFN,$D(^PRST(458,PPI,"E",DFN,0)) S SCL="N" I $P(^(0),"^",2)="T" S SCL="CN"
"RTN","PRSATE2",122,0)
 ;DTP takes X in FM date and returns a printable date in Y
"RTN","PRSATE2",123,0)
 I SCL["C" D DTP^PRSAPPU W !,"C = Current Pay Period beginning ",Y
"RTN","PRSATE2",124,0)
 G:'$D(^PRST(458,PPI-1,1)) N0
"RTN","PRSATE2",125,0)
 ;
"RTN","PRSATE2",126,0)
 ;if called from PRSATE and last pay period has NOT been transmitted.
"RTN","PRSATE2",127,0)
 I DFN,$P($G(^PRST(458,PPI-1,"E",DFN,0)),"^",2)'="T" G N0
"RTN","PRSATE2",128,0)
 ;
"RTN","PRSATE2",129,0)
 ;Show date of current pay period
"RTN","PRSATE2",130,0)
 S X1=D1,X2=-14
"RTN","PRSATE2",131,0)
 D C^%DTC,DTP^PRSAPPU W !,"L = Last Pay Period beginning ",Y
"RTN","PRSATE2",132,0)
 S SCL=SCL_"L"
"RTN","PRSATE2",133,0)
 ;
"RTN","PRSATE2",134,0)
 ;
"RTN","PRSATE2",135,0)
N0 I SCL["N" S X1=D1,X2=14 D C^%DTC,DTP^PRSAPPU W !,"N = Next Pay Period beginning ",Y
"RTN","PRSATE2",136,0)
 I SCL="" S SRT="^" Q
"RTN","PRSATE2",137,0)
 S SRTD=$E(SCL,1)
"RTN","PRSATE2",138,0)
N1 W !!,"Which Pay Period? ",SRTD," // " R SRT:DTIME S:'$T SRT="^" S:SRT="" SRT=SRTD Q:SRT="^"
"RTN","PRSATE2",139,0)
 S SRT=$TR(SRT,"ncl","NCL") I SCL'[SRT W $C(7),"   Choose from C, N or L if displayed" G N1
"RTN","PRSATE2",140,0)
 Q
"RTN","PRSATE2",141,0)
EX G KILL^XUSCLEAN
"RTN","PRSDSRS")
0^15^B20527859^B19314038
"RTN","PRSDSRS",1,0)
PRSDSRS ;HISC/GWB-SERVICE RECORD SCREEN ;2/8/95  14:14
"RTN","PRSDSRS",2,0)
 ;;4.0;PAID;**114**;Sep 21, 1995;Build 6
"RTN","PRSDSRS",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSDSRS",4,0)
 ;
"RTN","PRSDSRS",5,0)
EMP S DA="",SSN=$P($G(^VA(200,DUZ,1)),"^",9)
"RTN","PRSDSRS",6,0)
 I SSN'="" S DA=$O(^PRSPC("SSN",SSN,0))
"RTN","PRSDSRS",7,0)
 I 'DA W !!,*7,"Your SSN was not found in both the New Person & Employee File!" G EX
"RTN","PRSDSRS",8,0)
START D WAIT^DICD
"RTN","PRSDSRS",9,0)
 K DASHES S $P(DASHES,"-",80)="-"
"RTN","PRSDSRS",10,0)
 S ZERO=^PRSPC(DA,0)
"RTN","PRSDSRS",11,0)
 S NAME=$P(ZERO,U,1),STATION=$P(ZERO,U,7),TLU=$P(ZERO,U,8)
"RTN","PRSDSRS",12,0)
 S SSN=$P(ZERO,U,9),SSN=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","PRSDSRS",13,0)
 S Y=$P(ZERO,U,49) X ^DD(450,458,2.1) S CCORG=Y
"RTN","PRSDSRS",14,0)
 S DS=$P($G(^PRSPC(DA,1)),U,42),LPP=$P($G(^PRSPC(DA,"MISC4")),U,16)
"RTN","PRSDSRS",15,0)
 D ^PRSDYTD
"RTN","PRSDSRS",16,0)
SRS S CATEGORY="SERVICE RECORD SCREEN",PAGE=0
"RTN","PRSDSRS",17,0)
 K ^UTILITY("DIQ1",$J) S DIC="^PRSPC("
"RTN","PRSDSRS",18,0)
 S DR="2:5;9:11;13;15;15.5;16;19:23;26;28;30:32;37:39;42;43;47;52;53;64;82;83;89:116.2;139;120;132;142;143;144;226;231;395:427;458;538;600"
"RTN","PRSDSRS",19,0)
 S DIQ(0)="IE" D EN^DIQ1
"RTN","PRSDSRS",20,0)
 W @IOF D HDR S PRTC=1
"RTN","PRSDSRS",21,0)
 F F=16,20,15.5,13,38,28,82,83,142:1:144,23,3,37,9,15,19,21,11,458,42,39,53,52,32,31,4,43,10,5,47,139,120,132,226,231,26,64,538,22,30,2,600 D WR G:'PRTC EX
"RTN","PRSDSRS",22,0)
 S END="" D PRTC G:'PRTC EX
"RTN","PRSDSRS",23,0)
FU S FUFLD=89 K FUYES
"RTN","PRSDSRS",24,0)
 F  S FUFLD=$O(^UTILITY("DIQ1",$J,450,DA,FUFLD)) Q:(FUFLD>116.2)!(FUFLD="")  I ^UTILITY("DIQ1",$J,450,DA,FUFLD,"I")'="" S FUYES=""
"RTN","PRSDSRS",25,0)
 G:'$D(FUYES) TSP K END S CATEGORY="FOLLOWUPS"
"RTN","PRSDSRS",26,0)
 W @IOF D HDR S PRTC=1
"RTN","PRSDSRS",27,0)
 F F=115.17,89:1:97,97.1,98,98.1,98.2,98.3,98.4,99,99.1,100:1:114,114.1,114.2,115.01:.01:115.14,115.18,115.19,115.2,115.21,115.15,115.16,115.17,116.01:.01:116.2 D WR G:'PRTC EX
"RTN","PRSDSRS",28,0)
 S END="" D PRTC G:'PRTC EX
"RTN","PRSDSRS",29,0)
TSP K END S CATEGORY="THRIFT SAVINGS PLAN"
"RTN","PRSDSRS",30,0)
 W @IOF D HDR S PRTC=1
"RTN","PRSDSRS",31,0)
 F F=409,410,406,399,396,404,412,403,395,397,398,414,413,415,417,419,418,420,422,424,423,425,427,400,401,402,405,407,408 D WR G:'PRTC EX
"RTN","PRSDSRS",32,0)
 W:TSPYTD'=0 !!,"TSP EMP DED YTD.................",$FN(TSPYTD,",",2)
"RTN","PRSDSRS",33,0)
 S END="" D PRTC G:'PRTC EX
"RTN","PRSDSRS",34,0)
EX K ^UTILITY("DIQ1",$J)
"RTN","PRSDSRS",35,0)
 N PRSTLV D KILL^XUSCLEAN W @IOF
"RTN","PRSDSRS",36,0)
 Q
"RTN","PRSDSRS",37,0)
WR S NODEDD=^DD(450,F,0),NODEUTIL=$G(^UTILITY("DIQ1",$J,450,DA,F,"E"))
"RTN","PRSDSRS",38,0)
 I F=26 W:HBDYTD'=0 !,"HEALTH BENEFITS DEDUCTION YTD...",$FN(HBDYTD,",",2)
"RTN","PRSDSRS",39,0)
 I (NODEUTIL="")!(NODEUTIL="NA") K NODEDD,NODEUTIL Q
"RTN","PRSDSRS",40,0)
 S FLDNAM=$P(NODEDD,U,1)
"RTN","PRSDSRS",41,0)
 I F=15.5 S INT=^UTILITY("DIQ1",$J,450,DA,F,"E") G EXT
"RTN","PRSDSRS",42,0)
 S INT=^UTILITY("DIQ1",$J,450,DA,F,"I")
"RTN","PRSDSRS",43,0)
EXT S EXT=^UTILITY("DIQ1",$J,450,DA,F,"E")
"RTN","PRSDSRS",44,0)
 S IL=$L(INT)
"RTN","PRSDSRS",45,0)
 I $P(NODEDD,U,2)["NJ",+INT=0 K NODEDD,NODEUTIL Q
"RTN","PRSDSRS",46,0)
 S:F=15 FLDNAM="NORMAL HOURS" S:F=458 INT=$E(INT,1,4)_":"_$E(INT,5,8)
"RTN","PRSDSRS",47,0)
 S:F=414 FLDNAM="TSP CSF DIST PCT" S:F=419 FLDNAM="TSP FIF DIST PCT"
"RTN","PRSDSRS",48,0)
 S:F=424 FLDNAM="TSP GSF DIST PCT"
"RTN","PRSDSRS",49,0)
 I $P(NODEDD,U,5)["""$""" S VAL=$FN(INT,",",2) G IOSL
"RTN","PRSDSRS",50,0)
 I F>88,F<116.3 S VAL=EXT I $D(^PRSP(454,1,"PUC","C",FLDNAM)) S FUIEN=$O(^PRSP(454,1,"PUC","C",FLDNAM,0)) I $P(^PRSP(454,1,"PUC",FUIEN,0),U,3)'="" S VAL=VAL_"  "_$P(^PRSP(454,1,"PUC",FUIEN,0),U,3) G IOSL
"RTN","PRSDSRS",51,0)
 I (F=404)!(F=414)!(F=419)!(F=424) S VAL=EXT G IOSL
"RTN","PRSDSRS",52,0)
 I $P(NODEDD,U,2)["D" S VAL=EXT G IOSL
"RTN","PRSDSRS",53,0)
 I $P(NODEDD,U,2)["NJ" S VAL=$J(INT,IL,2) G IOSL
"RTN","PRSDSRS",54,0)
 S VAL=EXT
"RTN","PRSDSRS",55,0)
 S:F=458 VAL=INT
"RTN","PRSDSRS",56,0)
IOSL K DOTS S NOD=32-$L(FLDNAM),$P(DOTS,".",NOD)="."
"RTN","PRSDSRS",57,0)
 I $Y>(IOSL-4) D PRTC Q:'PRTC
"RTN","PRSDSRS",58,0)
 I (F=400)!(F=407)!(F=414)!(F=419)!(F=424) W !
"RTN","PRSDSRS",59,0)
 W !,FLDNAM,DOTS
"RTN","PRSDSRS",60,0)
 D VAL Q
"RTN","PRSDSRS",61,0)
VAL I $L(VAL)<48 W ?32,VAL Q
"RTN","PRSDSRS",62,0)
 S COLUMN=32,LGTH=0
"RTN","PRSDSRS",63,0)
 F LOOP=1:1 Q:LGTH=$L(VAL)!(LGTH>($L(VAL)))  W:$L($P(VAL," ",LOOP))>(80-COLUMN) ! S:$L($P(VAL," ",LOOP))>(80-COLUMN) COLUMN=32 W ?COLUMN,$P(VAL," ",LOOP) S COLUMN=COLUMN+$L($P(VAL," ",LOOP))+1,LGTH=LGTH+$L($P(VAL," ",LOOP))+1
"RTN","PRSDSRS",64,0)
 Q
"RTN","PRSDSRS",65,0)
HDR W:$Y>0 @IOF S PAGE=PAGE+1
"RTN","PRSDSRS",66,0)
 S CLNGTH=$L(CCORG),TAB=(80-CLNGTH)\2,TAB=TAB-1
"RTN","PRSDSRS",67,0)
 W !,NAME,?TAB,CCORG,?62,"DUTY STATION: ",STATION_DS
"RTN","PRSDSRS",68,0)
 I '$G(PRSTLV) W !,"XXX-XX-",$E(SSN,8,11),?71,"T&L: ",TLU,!,DASHES
"RTN","PRSDSRS",69,0)
 I $G(PRSTLV)=7 W !,SSN,?71,"T&L: ",TLU,!,DASHES
"RTN","PRSDSRS",70,0)
 S CLNGTH=$L(CATEGORY),TAB=(80-CLNGTH)\2,TAB=TAB-1
"RTN","PRSDSRS",71,0)
 W !,"LAST PP: ",LPP,?TAB,CATEGORY,?73,"PAGE ",PAGE
"RTN","PRSDSRS",72,0)
 W !,DASHES
"RTN","PRSDSRS",73,0)
 K CLNGTH,TAB Q
"RTN","PRSDSRS",74,0)
PRTC W:$Y<22 ! K DIR,DIRUT,DIROUT,DTOUT,DUOUT
"RTN","PRSDSRS",75,0)
 S DIR(0)="E",DIR("A")="Press RETURN to continue" D ^DIR
"RTN","PRSDSRS",76,0)
 I $D(DIRUT) S PRTC=0 Q
"RTN","PRSDSRS",77,0)
 D:'$D(END) HDR Q
"RTN","PRSDSRS",78,0)
 Q
"RTN","PRSDSRS",79,0)
SVC S Y=$P(^PRSPC(DA,0),U,49),C=$P(^DD(450,458,0),U,2) D Y^DIQ S USRSVC=Y
"RTN","PRSDSRS",80,0)
 S DIC="^PRSPC(",DIC(0)="AEQ",DIC("A")="Select EMPLOYEE: "
"RTN","PRSDSRS",81,0)
 S DIC("S")="S YSAV=Y,Y=$P(^PRSPC(YSAV,0),U,49),C=$P(^DD(450,458,0),U,2) D Y^DIQ S EMPSVC=Y,Y=YSAV I USRSVC=EMPSVC"
"RTN","PRSDSRS",82,0)
 D ^DIC I Y=-1 G EX
"RTN","PRSDSRS",83,0)
 S DA=+Y D START G SVC
"RTN","PRSDSRS",84,0)
 ;S %ZIS="QM" D ^%ZIS G EX:POP
"RTN","PRSDSRS",85,0)
 ;I $D(IO("Q")) D  G EX
"RTN","PRSDSRS",86,0)
 ;.S ZTRTN="START^PRSDSRS",ZTDESC="PRS SERVICE RECORD SCREEN"
"RTN","PRSDSRS",87,0)
 ;.S ZTSAVE("DA")=""
"RTN","PRSDSRS",88,0)
 ;.D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued!" D HOME^%ZIS K IO("Q") Q
"RTN","PRSDV450")
0^16^B24678259^B23958132
"RTN","PRSDV450",1,0)
PRSDV450 ;HISC/MGD-VIEW PAID EMPLOYEE DATA ;09/05/2003
"RTN","PRSDV450",2,0)
 ;;4.0;PAID;**2,82,114**;Sep 21, 1995;Build 6
"RTN","PRSDV450",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSDV450",4,0)
EN1 ;HRM entry
"RTN","PRSDV450",5,0)
 S LIMIT=10,PRSTLV=7 D PTBL^PRSDVTBL G EMP
"RTN","PRSDV450",6,0)
EN2 ;Fiscal entry
"RTN","PRSDV450",7,0)
 S LIMIT=12,PRSTLV=7 D FTBL^PRSDVTBL
"RTN","PRSDV450",8,0)
EMP K DASHES S $P(DASHES,"-",80)="-",FIRST=""
"RTN","PRSDV450",9,0)
 K DIC,^UTILITY("DIQ1",$J)
"RTN","PRSDV450",10,0)
 S DIC="^PRSPC(",DIC(0)="AEMQZ",DIC("A")="Select EMPLOYEE: " D ^DIC
"RTN","PRSDV450",11,0)
 K DIC I Y'>0 D KILL1,KILL2 Q
"RTN","PRSDV450",12,0)
 S DA=+Y,ZERO=^PRSPC(DA,0),NAME=$P(ZERO,U,1),SSN=$P(ZERO,U,9)
"RTN","PRSDV450",13,0)
 S SSN=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9),TLU=$P(ZERO,U,8)
"RTN","PRSDV450",14,0)
 S STATION=$P(ZERO,U,7),Y=$P(ZERO,U,49) X ^DD(450,458,2.1) S CCORG=Y
"RTN","PRSDV450",15,0)
 S DS=$P($G(^PRSPC(DA,1)),U,42),LPP=$P($G(^PRSPC(DA,"MISC4")),U,16)
"RTN","PRSDV450",16,0)
CAT S CLNGTH=$L(CCORG),TAB=(80-CLNGTH)\2,TAB=TAB-1
"RTN","PRSDV450",17,0)
 W @IOF,!,NAME,?TAB,CCORG,?62,"DUTY STATION: ",STATION_DS
"RTN","PRSDV450",18,0)
 W !,SSN,?71,"T&L: ",TLU,!,DASHES
"RTN","PRSDV450",19,0)
 W ! F L=1:1:LIMIT W !,?20,$P(CHOICE(L),";",3),?23,$P(CHOICE(L),";",4)
"RTN","PRSDV450",20,0)
SAN W ! K DIR,DIRUT,DIROUT,DTOUT,DUOUT
"RTN","PRSDV450",21,0)
 S DIR(0)="NAO^1:"_LIMIT_":0",DIR("A")="Select a number: "
"RTN","PRSDV450",22,0)
 S DIR("?")="Type a number between 1 and "_LIMIT S:$D(FIRST) DIR("B")=3
"RTN","PRSDV450",23,0)
 D ^DIR I ($D(DTOUT))!($D(DUOUT))!($D(DIROUT)) D KILL1 G EMP
"RTN","PRSDV450",24,0)
 I X="@" W !!,*7,DIR("?")_"." G SAN
"RTN","PRSDV450",25,0)
 G:X="" EMP
"RTN","PRSDV450",26,0)
 I CHOICE(+Y)["NURSING" S PP=$P(^PRSPC(DA,0),U,21) I (PP'="K")&(PP'="M")&(PP'="X") W !!,*7,"This employee is not a nurse.  Pay Plan code not K, M or X.",! K PP G SAN
"RTN","PRSDV450",27,0)
 I CHOICE(+Y)["SEPARATED" I $P($G(^PRSPC(DA,1)),U,33)'="Y" W !!,*7,"This is not a separated employee.  Separation Ind not equal Y.",! G SAN
"RTN","PRSDV450",28,0)
 S PAGE=0,CATEGORY=$P(CHOICE(+Y),";",4),LAB=$P(CHOICE(+Y),";",5)
"RTN","PRSDV450",29,0)
 S NOL=$P(CHOICE(+Y),";",6)
"RTN","PRSDV450",30,0)
 F L=1:1:NOL S (VAL(L),PRNTORDR(L))=$P($T(@LAB+L^PRSDVTBL),";",3) D
"RTN","PRSDV450",31,0)
 .F  Q:VAL(L)'[","  S VAL(L)=$P(VAL(L),",")_";"_$P(VAL(L),",",2,999)
"RTN","PRSDV450",32,0)
 .F  Q:VAL(L)'[":1:"  S VAL(L)=$P(VAL(L),":1:")_":"_$P(VAL(L),":1:",2,999)
"RTN","PRSDV450",33,0)
 .F  Q:VAL(L)'[":.01:"  S VAL(L)=$P(VAL(L),":.01:")_":"_$P(VAL(L),":.01:",2,999)
"RTN","PRSDV450",34,0)
 S IOFSAV=IOF
"RTN","PRSDV450",35,0)
 K %ZIS,IOP S %ZIS="MQ",%ZIS("B")="" D ^%ZIS I POP D KILL1,KILL2 Q
"RTN","PRSDV450",36,0)
 S IOF=IOFSAV
"RTN","PRSDV450",37,0)
 F L="CATEGORY","CCORG","CLNGTH","DA","DASHES","DATETIME","VAL(","DS","LPP","NAME","PAGE","PRNTORDR(","SSN","STATION","TAB","TLU","PRSTLV" S ZTSAVE(L)=""
"RTN","PRSDV450",38,0)
 I $D(IO("Q")) S ZTIO=ION,ZTDESC="DISPLAY EMPLOYEE DATA",ZTRTN="DISPLAY^PRSDV450",ZTREQ="@",ZTSAVE("ZTREQ")="" D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued!" D KILL1 K FIRST G CAT
"RTN","PRSDV450",39,0)
 D:$E(IOST,1)="C" WAIT^DICD
"RTN","PRSDV450",40,0)
 U IO D DISPLAY K FIRST G:PRTC=0 CAT
"RTN","PRSDV450",41,0)
 I $E(IOST,1)="C" D:PRTC="" PRTC G:PRTC=0 CAT
"RTN","PRSDV450",42,0)
 D:$E(IOST,1)'="C" ^%ZISC
"RTN","PRSDV450",43,0)
 W @IOF K FIRST G CAT
"RTN","PRSDV450",44,0)
DISPLAY S DRIEN=0 F  S DRIEN=$O(VAL(DRIEN)) Q:DRIEN=""  S DIQ(0)="EI",DIC="^PRSPC(",DR=VAL(DRIEN) D EN^DIQ1
"RTN","PRSDV450",45,0)
 W:$E(IOST,1)="C" @IOF D HDR^PRSDSRS
"RTN","PRSDV450",46,0)
 D ^PRSDYTD
"RTN","PRSDV450",47,0)
 I CATEGORY="LABOR DISTRIBUTION" D
"RTN","PRSDV450",48,0)
 . S PRTC=0
"RTN","PRSDV450",49,0)
 . D LD
"RTN","PRSDV450",50,0)
 . I $E(IOST,1)="C" D CHECK
"RTN","PRSDV450",51,0)
 . I $E(IOST,1)'="C" D ^%ZISC
"RTN","PRSDV450",52,0)
 I CATEGORY'="LABOR DISTRIBUTION" D
"RTN","PRSDV450",53,0)
 . S PRIEN=0,PRTC="" F  S PRIEN=$O(PRNTORDR(PRIEN)) Q:PRIEN=""  S PRNTVALS="F FIELDN="_PRNTORDR(PRIEN)_" D WRITE^PRSDW450 Q:PRTC=0" X PRNTVALS
"RTN","PRSDV450",54,0)
KILL1 K D0,DIC,DIQ,DIQ2,DIR,DIRUT,DIROUT,DR,DRIEN,VAL,DTOUT,DUOUT,FIELDN
"RTN","PRSDV450",55,0)
 K IOFSAV,IOP,L,POP,PRIEN,PRNTORDR,PRNTVALS,X,Y,ZERO,ZTDESC,ZTIO,ZTRTN
"RTN","PRSDV450",56,0)
 K ZTSAVE,ZTSK,%ZIS,^UTILITY("DIQ1",$J)
"RTN","PRSDV450",57,0)
 D YTDEX^PRSDYTD
"RTN","PRSDV450",58,0)
 Q
"RTN","PRSDV450",59,0)
KILL2 K CATEGORY,CCORG,CHOICE,CLNGTH,DA,DASHES,DATETIME,DS,FIRST,LAB,LIMIT,LPP
"RTN","PRSDV450",60,0)
 K NAME,NOL,PAGE,PRSTLV,PRTC,SSN,STATION,TAB,TLU,LOOP,ZTREQ,%,%I
"RTN","PRSDV450",61,0)
 Q
"RTN","PRSDV450",62,0)
CHECK I $E(IOST,1)="C",$Y>(IOSL-4) D PRTC
"RTN","PRSDV450",63,0)
 Q
"RTN","PRSDV450",64,0)
PRTC W ! K DIR,DIRUT,DIROUT,DTOUT,DUOUT
"RTN","PRSDV450",65,0)
 S DIR(0)="E",DIR("A")="Press RETURN to continue" D ^DIR S PRTC=Y
"RTN","PRSDV450",66,0)
 S:$D(DIRUT) PRTC=0
"RTN","PRSDV450",67,0)
 Q
"RTN","PRSDV450",68,0)
LD ; Display Labor Distribution codes 
"RTN","PRSDV450",69,0)
 Q:'$G(DA)
"RTN","PRSDV450",70,0)
 N DESC,INTERNAL,LDCNT,LDDATA,NODEDD,PRSLD,Y
"RTN","PRSDV450",71,0)
 S DIC=450,DIQ(0)="IE",DIQ="LDDATA"
"RTN","PRSDV450",72,0)
 F PRSLD=756,755,755.1 D
"RTN","PRSDV450",73,0)
 . S DR=PRSLD
"RTN","PRSDV450",74,0)
 . D EN^DIQ1
"RTN","PRSDV450",75,0)
 . S NODEDD=^DD(450,PRSLD,0)
"RTN","PRSDV450",76,0)
 . S INTERNAL=$G(LDDATA(450,DA,PRSLD,"I"))
"RTN","PRSDV450",77,0)
 . S DESC=$G(LDDATA(450,DA,PRSLD,"E"))
"RTN","PRSDV450",78,0)
 . W !,$P(NODEDD,U,1)
"RTN","PRSDV450",79,0)
 . W ?30,$S($P(NODEDD,U,5)["""$""":$J($FN(INTERNAL,",",2),14),$P(NODEDD,U,2)["NJ":$J(INTERNAL,14,2),$P(NODEDD,U,2)["D":$J(DESC,14),1:$J(INTERNAL,14))
"RTN","PRSDV450",80,0)
 . I $P(NODEDD,U,2)'["D",INTERNAL'=DESC D DESC^PRSDW450
"RTN","PRSDV450",81,0)
 ;
"RTN","PRSDV450",82,0)
 F PRSLD=1:1:4 D
"RTN","PRSDV450",83,0)
 . S DIC=450,DR=757 ; Specify LD multiple
"RTN","PRSDV450",84,0)
 . S DR(450.0757)="1;2;3;4",DA(450.0757)=PRSLD ; Specify fields w/in mult
"RTN","PRSDV450",85,0)
 . S DIQ(0)="IE",DIQ="LDDATA"
"RTN","PRSDV450",86,0)
 . D EN^DIQ1
"RTN","PRSDV450",87,0)
 . F LDCNT=1:1:4 D
"RTN","PRSDV450",88,0)
 . . S NODEDD=^DD(450.0757,LDCNT,0)
"RTN","PRSDV450",89,0)
 . . S INTERNAL=$G(LDDATA(450.0757,PRSLD,LDCNT,"I"))
"RTN","PRSDV450",90,0)
 . . I LDCNT'=3 S DESC=$G(LDDATA(450.0757,PRSLD,LDCNT,"E"))
"RTN","PRSDV450",91,0)
 . . I LDCNT=3 D
"RTN","PRSDV450",92,0)
 . . . S Y=INTERNAL,SUB454="CC"
"RTN","PRSDV450",93,0)
 . . . D OT^PRSDUTIL K SUB454
"RTN","PRSDV450",94,0)
 . . . S DESC=Y
"RTN","PRSDV450",95,0)
 . . W !,"LABOR DIST CODE-",PRSLD," ",$P(NODEDD,U,1)
"RTN","PRSDV450",96,0)
 . . W ?30,$S($P(NODEDD,U,5)["""$""":$J($FN(INTERNAL,",",2),14),$P(NODEDD,U,2)["NJ":$J(INTERNAL,14,2),$P(NODEDD,U,2)["D":$J(DESC,14),1:$J(INTERNAL,14))
"RTN","PRSDV450",97,0)
 . . I $P(NODEDD,U,2)'["D",INTERNAL'=DESC D DESC^PRSDW450
"RTN","PRSDV450",98,0)
 . . D CHECK
"RTN","PRSDV450",99,0)
 . . I PRTC W @IOF D HDR^PRSDSRS S PRTC=0
"RTN","PRSDV450",100,0)
 I $E(IOST,1)="C" D PRTC
"RTN","PRSDV450",101,0)
 Q
"RTN","PRSROT1")
0^17^B23328023^B22525224
"RTN","PRSROT1",1,0)
PRSROT1 ;HISC/JH-IND. OR ALL EMPLOYEE OT/CT REPORT ;1/12/98
"RTN","PRSROT1",2,0)
 ;;4.0;PAID;**2,19,21,28,27,34,114**;Sep 21, 1995;Build 6
"RTN","PRSROT1",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSROT1",4,0)
 ;
"RTN","PRSROT1",5,0)
SUP S PRSTLV=3,PRSAI=1
"RTN","PRSROT1",6,0)
 S PRSR=1
"RTN","PRSROT1",7,0)
 D TLESEL^PRSRUT0
"RTN","PRSROT1",8,0)
 G Q:$G(TLE)=""!(SSN="")
"RTN","PRSROT1",9,0)
 G EN1
"RTN","PRSROT1",10,0)
 ;
"RTN","PRSROT1",11,0)
 ;get Time & Leave unit and set up TLE array.
"RTN","PRSROT1",12,0)
FIS S PRSR=2,PRSTLV=7
"RTN","PRSROT1",13,0)
 D TLESEL^PRSRUT0
"RTN","PRSROT1",14,0)
 G Q:TLE=""!(SSN="")
"RTN","PRSROT1",15,0)
EN1 W ! S X="T",%DT="" D ^%DT Q:Y<0  S DT=Y K %DT
"RTN","PRSROT1",16,0)
 ;
"RTN","PRSROT1",17,0)
 ;get one or all employees
"RTN","PRSROT1",18,0)
EN2 W !
"RTN","PRSROT1",19,0)
 S DIC="^PRSPC(",DIC(0)="AEQZ"
"RTN","PRSROT1",20,0)
 S D="ATL"_$P(TLE(1),"^",1)
"RTN","PRSROT1",21,0)
 S DIC("A")="Enter employee name (Return for All): "
"RTN","PRSROT1",22,0)
 S DIC("S")="I $$INXR^PRSRL1($P(TLE(1),U),Y)"
"RTN","PRSROT1",23,0)
 D IX^DIC G Q1:$D(DUOUT)!$D(DTOUT)
"RTN","PRSROT1",24,0)
 S PRSRY=Y,SW=$S(PRSRY'=-1:0,1:1)
"RTN","PRSROT1",25,0)
 I 'SW S D0=$P(PRSRY,"^") D CHKTLE^PRSRUTL G EN2:'STFSW
"RTN","PRSROT1",26,0)
 ;
"RTN","PRSROT1",27,0)
 ;get year and validate
"RTN","PRSROT1",28,0)
ASK S %DT("A")="Enter YEAR: "
"RTN","PRSROT1",29,0)
 S %DT="AEP"
"RTN","PRSROT1",30,0)
 S %DT(0)=-DT
"RTN","PRSROT1",31,0)
 D ^%DT K %DT
"RTN","PRSROT1",32,0)
 G Q1:$D(DTOUT)!(X="^"),MSG2:X="?"!(Y=-1)
"RTN","PRSROT1",33,0)
 G MSG3:$P($O(^PRST(459,"B",$E(Y,2,3)_"-")),"-")'=$E(Y,2,3)
"RTN","PRSROT1",34,0)
 S YEAR=$E(Y,2,3)
"RTN","PRSROT1",35,0)
 ;
"RTN","PRSROT1",36,0)
 ;get pay periods
"RTN","PRSROT1",37,0)
ASK1 ;
"RTN","PRSROT1",38,0)
 ;determine first and last pay periods on file for year
"RTN","PRSROT1",39,0)
 S X(1)=+$P($O(^PRST(459,"B",YEAR_"-00")),"-",2) ; first
"RTN","PRSROT1",40,0)
 S X(2)=+$P($O(^PRST(459,"B",YEAR_"-99"),-1),"-",2) ;last
"RTN","PRSROT1",41,0)
 S DIR(0)="NOA^"_X(1)_":"_X(2)_":0"
"RTN","PRSROT1",42,0)
 S DIR("A")="Start with Pay Period ("_X(1)_"-"_X(2)_", or Return for all in this year): "
"RTN","PRSROT1",43,0)
 S DIR("?",1)="Enter the number of the first pay period to be included"
"RTN","PRSROT1",44,0)
 S DIR("?",2)="on the report. Only pay periods on file can be selected."
"RTN","PRSROT1",45,0)
 S DIR("?",3)="Just press Return to select all pay periods for the year."
"RTN","PRSROT1",46,0)
 S DIR("?",4)=" "
"RTN","PRSROT1",47,0)
 S DIR("?")="Enter a number ("_X(1)_"-"_X(2)_") or press Return for all"
"RTN","PRSROT1",48,0)
 D ^DIR K DIR G:$D(DTOUT)!$D(DUOUT) Q1
"RTN","PRSROT1",49,0)
 I Y="" S PPE(1)=X(1),PPE(2)=X(2) ; all pay periods
"RTN","PRSROT1",50,0)
 E  S PPE(1)=Y D  G:$D(DIRUT) Q1 S PPE(2)=Y
"RTN","PRSROT1",51,0)
 . S DIR(0)="NA^"_PPE(1)_":"_X(2)_":0"
"RTN","PRSROT1",52,0)
 . S DIR("A")="End with Pay Period ("_PPE(1)_"-"_X(2)_"): "
"RTN","PRSROT1",53,0)
 . S DIR("B")=PPE(1)
"RTN","PRSROT1",54,0)
 . D ^DIR K DIR
"RTN","PRSROT1",55,0)
 S:$L(PPE(1))=1 PPE(1)="0"_PPE(1)
"RTN","PRSROT1",56,0)
 S:$L(PPE(2))=1 PPE(2)="0"_PPE(2)
"RTN","PRSROT1",57,0)
 I SW,PPE(1)'=PPE(2) W !,"This report could take some time. Consider Queuing the report."
"RTN","PRSROT1",58,0)
 ;
"RTN","PRSROT1",59,0)
 S TLUNIT=$S(PRSRDUZ:$P($G(^PRSPC(PRSRDUZ,0)),"^",7),1:$O(^VA(200,DUZ,2,0))),TLI=$S(PRSRDUZ:$P($G(^(0)),"^",8),1:"000")
"RTN","PRSROT1",60,0)
 S ZTRTN="START^PRSROT1"
"RTN","PRSROT1",61,0)
 S ZTDESC="EMPLOYEE OT/CT REPORT" W !!,$C(7),"THIS IS A 132 COLUMN REPORT !",! D ST^PRSRUTL,LOOP,QUE1^PRSRUT0 G Q1:POP!($D(ZTSK))
"RTN","PRSROT1",62,0)
 ;
"RTN","PRSROT1",63,0)
 ;======================================================================
"RTN","PRSROT1",64,0)
 ;
"RTN","PRSROT1",65,0)
START S (CNT,COMP(1),COMPU(1),OTP(1),OTH(1),POUT)=0
"RTN","PRSROT1",66,0)
 K ^TMP($J)
"RTN","PRSROT1",67,0)
 S ^TMP($J,"OT/CP")="EMPLOYEE OT/CT REPORT"
"RTN","PRSROT1",68,0)
 ;
"RTN","PRSROT1",69,0)
 ; loop thru specified pay periods and gather/sort data
"RTN","PRSROT1",70,0)
 S PPE=+PPE(1)-1 S:$L(PPE)=1 PPE="0"_PPE
"RTN","PRSROT1",71,0)
 S DA(2)=YEAR_"-"_PPE
"RTN","PRSROT1",72,0)
 F  S DA(2)=$O(^PRST(459,"B",DA(2))) Q:($P(DA(2),"-")'=YEAR)!($P(DA(2),"-",2)>PPE(2))  D
"RTN","PRSROT1",73,0)
 . S DA(1)=$O(^PRST(459,"B",DA(2),0)) Q:DA(1)'>0  ; pay period ien in 459
"RTN","PRSROT1",74,0)
 . D DAT ; payrun date
"RTN","PRSROT1",75,0)
 . S DA(3)=$O(^PRST(458,"B",DA(2),0)) Q:DA(3)'>0  ; pay period ien in 458
"RTN","PRSROT1",76,0)
 . ; if one employee
"RTN","PRSROT1",77,0)
 . I 'SW D OTCT^PRSROSOR
"RTN","PRSROT1",78,0)
 . ; if all employees
"RTN","PRSROT1",79,0)
 . I SW S D0=0 F  S D0=$O(^PRST(458,DA(3),"E",D0)) Q:D0'>0  D
"RTN","PRSROT1",80,0)
 . . S NAM=$P($G(^PRSPC(D0,0)),"^")
"RTN","PRSROT1",81,0)
 . . D OTCT^PRSROSOR
"RTN","PRSROT1",82,0)
 ;
"RTN","PRSROT1",83,0)
 ; report results
"RTN","PRSROT1",84,0)
IND S DAT=$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3) U IO I 'CNT D HDR1^PRSROT11 W !,"|",?10,"No Overtime, Comptime, or Credit Hours Data on File.",?131,"|" S POUT=1 D NONE G Q1
"RTN","PRSROT1",85,0)
 D ^PRSROT11 G Q1:POUT I CNT D VLIDSH0^PRSROT11 S CODE="O001",FOOT="VA TIME & ATTENDANCE SYSTEM" D FOOT1^PRSRUT0
"RTN","PRSROT1",86,0)
Q I $E(IOST,1,2)="C-" S DIR(0)="E",DIR("A")="Press RETURN to continue" D ^DIR K DIR
"RTN","PRSROT1",87,0)
Q1 K %,%DT,DATT,DIC,FOOT,INX,CODE,COMP,COMPU,DTOUT,DUOUT,POP,OTH,OTP,PPE,PRSAI,PRSR,PRSRY,PRSTLV,TL,TLE,TLI,USR,TLUNIT,CNT,COS,COSORG,D0,DA,DAT,DATE,DATES,DAY,DDATE,PP
"RTN","PRSROT1",88,0)
 K I,II,NAM,ORG,POUT,SAL,SSN,STFSW,SW,TIME,TITLE,X,Y,YEAR,Z1,ZTDESC,ZTRTN,ZTSAVE,ZTSK,^TMP($J) D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","PRSROT1",89,0)
 Q
"RTN","PRSROT1",90,0)
DAT S DATE=$P($G(^PRST(459,DA(1),0)),"^",2) S:DATE'="" DATE=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3)
"RTN","PRSROT1",91,0)
 Q
"RTN","PRSROT1",92,0)
NONE I IOSL<66 D VLIN0^PRSROT11
"RTN","PRSROT1",93,0)
 D HDR^PRSROT11
"RTN","PRSROT1",94,0)
 Q
"RTN","PRSROT1",95,0)
MSG2 W $C(7),!!,"*** Enter Year: 92 , 1994 ... " G ASK
"RTN","PRSROT1",96,0)
MSG3 W $C(7),!!,"*** Year Entered is not on File." G ASK
"RTN","PRSROT1",97,0)
LOOP F X="D0","DA*","PPE*","NAM","TLE*","TL*","TLI","TLUNIT","SW","COS","ORG","YEAR","PRSRY","PRSTLV" S ZTSAVE(X)=""
"RTN","PRSROT1",98,0)
 Q
"RTN","PRSROT11")
0^18^B16238575^B15361616
"RTN","PRSROT11",1,0)
PRSROT11 ;HISC/JH-IND. OR ALL EMPLOYEE OT/CT REPORT (Continued) ;7/18/97
"RTN","PRSROT11",2,0)
 ;;4.0;PAID;**2,21,28,34,114**;Sep 21, 1995;Build 6
"RTN","PRSROT11",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSROT11",4,0)
 ;
"RTN","PRSROT11",5,0)
 ; CP = "|"  CP = column PIPE character (used for vertical columns)
"RTN","PRSROT11",6,0)
 ;
"RTN","PRSROT11",7,0)
 N CP
"RTN","PRSROT11",8,0)
 S CP="|"
"RTN","PRSROT11",9,0)
 S ORG=$S($D(ORG):$E(ORG,1,12),1:"")
"RTN","PRSROT11",10,0)
 D HDR1
"RTN","PRSROT11",11,0)
 S (PP(1),NAM(1),DAY(1),DATT(1))="",DATE(1)=0
"RTN","PRSROT11",12,0)
 F I=1:1:2 S (SAL(I),COMP(I),COMPU(I),OTH(I),OTP(I))=0
"RTN","PRSROT11",13,0)
 S PP=""
"RTN","PRSROT11",14,0)
 F I=0:0 S PP=$O(^TMP($J,"OT/CP",PP)) Q:PP=""  S SW(1)=0 D  Q:POUT
"RTN","PRSROT11",15,0)
 .;
"RTN","PRSROT11",16,0)
 .  S DATT=0
"RTN","PRSROT11",17,0)
 .  F I=0:0 S DATT=$O(^TMP($J,"OT/CP",PP,DATT)) Q:DATT'>0  D  Q:POUT
"RTN","PRSROT11",18,0)
 ..;
"RTN","PRSROT11",19,0)
 ..  S INX=0
"RTN","PRSROT11",20,0)
 ..  F I=0:0 S INX=$O(^TMP($J,"OT/CP",PP,DATT,INX)) Q:INX'>0  D  Q:POUT
"RTN","PRSROT11",21,0)
 ...;
"RTN","PRSROT11",22,0)
 ...  S NAM=""
"RTN","PRSROT11",23,0)
 ...  F I=0:0 S NAM=$O(^TMP($J,"OT/CP",PP,DATT,INX,NAM)) Q:NAM=""  S SW(3)=0 D  Q:POUT
"RTN","PRSROT11",24,0)
 ....  S D0=0
"RTN","PRSROT11",25,0)
 ....  F I=0:0 S D0=$O(^TMP($J,"OT/CP",PP,DATT,INX,NAM,D0)) Q:D0'>0  S TIME=$G(^(D0)) Q:TIME=""  D  Q:POUT
"RTN","PRSROT11",26,0)
 .....;
"RTN","PRSROT11",27,0)
 .....  D:($Y>(IOSL-5)) HDR Q:POUT
"RTN","PRSROT11",28,0)
 .....  D VLIN0:PP'=PP(1)
"RTN","PRSROT11",29,0)
 .....  W !,CP,$S(PP'=PP(1):$J($P(PP,"-",2),2),1:""),?4,CP,$S(DATT'=DATT(1):DATT,1:""),?14,CP,NAM,?39,CP
"RTN","PRSROT11",30,0)
 .....  I PRSTLV=3 W $E($P(TIME,"^")),"XX-XX-",$E($P(TIME,"^"),8,11),?52,CP
"RTN","PRSROT11",31,0)
 .....  I PRSTLV=7 W $P(TIME,"^"),?52,CP
"RTN","PRSROT11",32,0)
 .....  W $J($P(TIME,"^",2),10,2),?64,CP,$J($P(TIME,"^",3),12,2),?79,CP,$J($P(TIME,"^",4),12,2),?94,CP
"RTN","PRSROT11",33,0)
 .....  W $J($P(TIME,"^",5),12,2),?109,CP,$J($P(TIME,"^",6),17,2),?131,CP
"RTN","PRSROT11",34,0)
 .....  S SAL(1)=SAL(1)+$P(TIME,"^",2),COMPU(1)=COMPU(1)+$P(TIME,"^",3),COMP(1)=COMP(1)+$P(TIME,"^",4),OTH(1)=OTH(1)+$P(TIME,"^",5),OTP(1)=OTP(1)+$P(TIME,"^",6),SW(1)=SW(1)+1
"RTN","PRSROT11",35,0)
 .....  S SAL(2)=SAL(2)+$P(TIME,"^",2),COMPU(2)=COMPU(2)+$P(TIME,"^",3),COMP(2)=COMP(2)+$P(TIME,"^",4),OTH(2)=OTH(2)+$P(TIME,"^",5),OTP(2)=OTP(2)+$P(TIME,"^",6)
"RTN","PRSROT11",36,0)
 .....  Q
"RTN","PRSROT11",37,0)
 ....  S PP(1)=PP,DATT(1)=DATT,NAM(1)=NAM,DATE(1)=DATE Q
"RTN","PRSROT11",38,0)
 ....  Q
"RTN","PRSROT11",39,0)
 ...  Q
"RTN","PRSROT11",40,0)
 ..  Q
"RTN","PRSROT11",41,0)
 .  Q:POUT  I SW(1) D
"RTN","PRSROT11",42,0)
 ..    W !
"RTN","PRSROT11",43,0)
 ..    D TABLANK0,ROWSEP
"RTN","PRSROT11",44,0)
 .  D TABLANK0
"RTN","PRSROT11",45,0)
 .  W " P/P-Totals:"
"RTN","PRSROT11",46,0)
 .  D WTOT(1)
"RTN","PRSROT11",47,0)
 .  S (SAL(1),COMPU(1),COMP(1),OTH(1),OTP(1))=0
"RTN","PRSROT11",48,0)
 .  Q
"RTN","PRSROT11",49,0)
 Q:POUT
"RTN","PRSROT11",50,0)
 I SW(1) D
"RTN","PRSROT11",51,0)
 .  D VLIN0
"RTN","PRSROT11",52,0)
 .  D VLINUND
"RTN","PRSROT11",53,0)
 ;
"RTN","PRSROT11",54,0)
 D TABLANK0
"RTN","PRSROT11",55,0)
 W ?44,"TOTALS:"
"RTN","PRSROT11",56,0)
 D WTOT(2)
"RTN","PRSROT11",57,0)
 I IOSL<66 D VLIN0
"RTN","PRSROT11",58,0)
 Q
"RTN","PRSROT11",59,0)
WTOT(PERIOD) ;Write out week 1 total OR (both weeks = pay period total).
"RTN","PRSROT11",60,0)
 S I=PERIOD
"RTN","PRSROT11",61,0)
 W ?53,$J(SAL(2),10,2)
"RTN","PRSROT11",62,0)
 W ?65,$J(COMPU(I),12,2)
"RTN","PRSROT11",63,0)
 W ?80,$J(COMP(I),12,2)
"RTN","PRSROT11",64,0)
 W ?95,$J(OTH(I),12,2)
"RTN","PRSROT11",65,0)
 W ?110,$J(OTP(I),17,2),?131,CP
"RTN","PRSROT11",66,0)
 Q
"RTN","PRSROT11",67,0)
CHK S X1=DATE,X2=DATE(1) D ^%DTC Q
"RTN","PRSROT11",68,0)
HDR S CODE="O001",FOOT="VA TIME & ATTENDANCE SYSTEM"
"RTN","PRSROT11",69,0)
 D VLIDSH0,FOOT1^PRSRUT0
"RTN","PRSROT11",70,0)
 I $E(IOST,1,2)="C-" S DIR(0)="E" D ^DIR K DIR I $D(DIRUT) S POUT=1
"RTN","PRSROT11",71,0)
 Q:POUT
"RTN","PRSROT11",72,0)
 W @IOF
"RTN","PRSROT11",73,0)
HDR1 N CP S CP="|"
"RTN","PRSROT11",74,0)
 W !?(IOM-$L(^TMP($J,"OT/CP")))/2,^TMP($J,"OT/CP"),?(IOM-14),"DATE: ",DAT
"RTN","PRSROT11",75,0)
 S X="T&L: "_$P(TLE(1),U)_"  Employee: "_$S(SW:"ALL",1:$P(PRSRY,U,2))
"RTN","PRSROT11",76,0)
 S X=X_"  Year: "_YEAR_"  Payperiod"
"RTN","PRSROT11",77,0)
 S X=X_$S(PPE(1)=PPE(2):": "_PPE(1),1:"s: "_PPE(1)_" to "_PPE(2))
"RTN","PRSROT11",78,0)
 W !,?(IOM-$L(X)/2-1),X,!
"RTN","PRSROT11",79,0)
 W !,CP,"P/P",?4,CP,?7,"DATE",?14,CP,?25,"NAME",?39,CP,?44,"SSN",?52,CP,?54,"GROSS PAY",?64,CP,?67,"CT/CH USED",?79,CP,?82,"CT/CH BAL",?94,CP,?97,"OVER/T HRS",?109,CP,?118,"OVER/T PAY",?131,CP D VLIDSH0 Q
"RTN","PRSROT11",80,0)
 ;
"RTN","PRSROT11",81,0)
VLIDSH0 ;
"RTN","PRSROT11",82,0)
 W !,"|---|---------|------------------------|------------|-----------|--------------|--------------|--------------|---------------------|" Q
"RTN","PRSROT11",83,0)
 ;
"RTN","PRSROT11",84,0)
VLIN0 ;
"RTN","PRSROT11",85,0)
 W !
"RTN","PRSROT11",86,0)
 D TABLANK0,TABLANK1
"RTN","PRSROT11",87,0)
 Q
"RTN","PRSROT11",88,0)
 ;
"RTN","PRSROT11",89,0)
VLINUND ;use leading blank columns & trailing row separator.
"RTN","PRSROT11",90,0)
 W ! D TABLANK0,ROWSEP Q
"RTN","PRSROT11",91,0)
 ;
"RTN","PRSROT11",92,0)
TABLANK0 ;leading blank columns with vertical slash for column breaks.
"RTN","PRSROT11",93,0)
 N CP S CP="|"
"RTN","PRSROT11",94,0)
 W CP,?4,CP,?14,CP,?39,CP Q
"RTN","PRSROT11",95,0)
 ;
"RTN","PRSROT11",96,0)
TABLANK1 ;2nd half of blank columns w/ vertical slash for column breaks.
"RTN","PRSROT11",97,0)
 N CP S CP="|"
"RTN","PRSROT11",98,0)
 W ?52,CP,?64,CP,?79,CP,?94,CP,?109,CP,?131,CP Q
"RTN","PRSROT11",99,0)
 ;
"RTN","PRSROT11",100,0)
ROWSEP ;row separator (2nd half of line)
"RTN","PRSROT11",101,0)
 N CP S CP="|"
"RTN","PRSROT11",102,0)
 W ?52,CP," --------- ",CP,"     ------- "
"RTN","PRSROT11",103,0)
 W ?79,CP,"     ------- "
"RTN","PRSROT11",104,0)
 W ?94,CP,"     ------- "
"RTN","PRSROT11",105,0)
 W ?109,CP,"       ---------- "
"RTN","PRSROT11",106,0)
 W ?131,CP,!
"RTN","PRSROT11",107,0)
 Q
"RTN","PRSRUT0")
0^19^B11680676^B11316048
"RTN","PRSRUT0",1,0)
PRSRUT0 ;HISC/JH,JAH-UTILITY ROUTINE FOR PAID ADDIM. REPORTS ;6/24/94
"RTN","PRSRUT0",2,0)
 ;;4.0;PAID;**2,17,114**;Sep 21, 1995;Build 6
"RTN","PRSRUT0",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRSRUT0",4,0)
QUE ;QUEUE FOR PAID REPORTS
"RTN","PRSRUT0",5,0)
 S IOP="Q",%ZIS="Q" D ^%ZIS K %ZIS K:POP IO("Q") I POP S ZTSTOP=1 Q
"RTN","PRSRUT0",6,0)
 I $D(IO("Q")) K IO("Q"),IO("C") S ZTIO=ION_";"_IOST_";"_IOM_";"_IOSL,ZTSAVE("IOM")="" D ^%ZTLOAD S:'$D(ZTSK) (ZTSTOP,POP)=1
"RTN","PRSRUT0",7,0)
 Q
"RTN","PRSRUT0",8,0)
QUE1 ;QUEUE FOR PAID REPORTS
"RTN","PRSRUT0",9,0)
 S %ZIS="Q" D ^%ZIS K %ZIS K:POP IO("Q") S:POP ZTSTOP=0 Q:POP
"RTN","PRSRUT0",10,0)
 I $D(IO("Q")) K IO("Q"),IO("C") S ZTIO=ION_";"_IOST_";"_IOM_";"_IOSL D ^%ZTLOAD S:'$D(ZTSK) POP=1
"RTN","PRSRUT0",11,0)
 Q
"RTN","PRSRUT0",12,0)
Q ;TERMINAL RESET FROM 132 TO 80 CHARS.
"RTN","PRSRUT0",13,0)
 I $E(IOST)="C",IOM=132 S X="IORESET" D ENDR^%ZISS W @X D HOME^%ZIS K %,%T,%XX,%YY,IOHG,IOPAR,IORESET,IOUPAR
"RTN","PRSRUT0",14,0)
 Q
"RTN","PRSRUT0",15,0)
FOOT ;CODE = 3 Char code for type of report, NUM = Report Number,
"RTN","PRSRUT0",16,0)
 ;FOOT = Type of system this report is for,
"RTN","PRSRUT0",17,0)
 ;TYP = Type of report (T&L,T&A,BUDGET,MANPOWER,COST,...),
"RTN","PRSRUT0",18,0)
 ;TLUNIT = (T&L Unit,T&A Unit,Pay Period,FY,...),
"RTN","PRSRUT0",19,0)
 F I=1:1 W ! Q:$Y=(IOSL-3)
"RTN","PRSRUT0",20,0)
FOOT1 W !,"DHCP PAID REPORT ",CODE,?(IOM-$L(FOOT))/2,FOOT
"RTN","PRSRUT0",21,0)
 Q
"RTN","PRSRUT0",22,0)
FOOT2 W !,"DHCP PAID REPORT ",CODE,?40,FOOT
"RTN","PRSRUT0",23,0)
 Q
"RTN","PRSRUT0",24,0)
CKTOUR(CK) N LL,M,K,KK S M=CK,CK="",KK=1 F K=1:4 S LL=$P(M,"^",K+2) Q:LL=""  S %=$F(LVT,";"_LL_":") S:% $P(CK,"^",KK,KK+3)=$P(M,"^",K,K+3) S KK=$S(%:KK+4,1:KK)
"RTN","PRSRUT0",25,0)
 Q
"RTN","PRSRUT0",26,0)
TYPSTF S DFN=$O(^PRSPC("SSN",PRSRSSN,0)) N PP D ^PRSAENT S SW(2)=$S($E(ENT,1,2)["D":77,1:73)
"RTN","PRSRUT0",27,0)
 Q
"RTN","PRSRUT0",28,0)
TLESEL ;user select T&L units
"RTN","PRSRUT0",29,0)
 ; set up array:
"RTN","PRSRUT0",30,0)
 ;   TLE(n)="T&L number ^ unit name"
"RTN","PRSRUT0",31,0)
 ;   TLE(n,m) = "ien ^ member name"
"RTN","PRSRUT0",32,0)
 ;   TLE= approving T&L unit
"RTN","PRSRUT0",33,0)
 ;
"RTN","PRSRUT0",34,0)
 N A,B,C,D,E,F,X
"RTN","PRSRUT0",35,0)
 ; get duz of current user
"RTN","PRSRUT0",36,0)
 S USR="",TLE="" D DUZ^PRSRUTL Q:SSN=""
"RTN","PRSRUT0",37,0)
TL ; Select T&L from those allowed
"RTN","PRSRUT0",38,0)
 S:SSN'="" USR=$O(^PRSPC("SSN",SSN,0))
"RTN","PRSRUT0",39,0)
 K DIC
"RTN","PRSRUT0",40,0)
 ;
"RTN","PRSRUT0",41,0)
 ;Z1 for T&L unit file x-ref lookup: T=TimeKeeper, S=Supervisor
"RTN","PRSRUT0",42,0)
 S Z1=$S(PRSTLV=2:"T",PRSTLV="3":"S",PRSTLV=7:"S",1:"*")
"RTN","PRSRUT0",43,0)
 I PRSR=1 S TLI=$O(^PRST(455.5,"A"_Z1,DUZ,0)) I TLI<1 W !!,*7,"No T&L Units have been assigned to you!" Q
"RTN","PRSRUT0",44,0)
 Q:PRSR=3
"RTN","PRSRUT0",45,0)
SEL W ! S DIC="^PRST(455.5,"
"RTN","PRSRUT0",46,0)
 S DIC(0)="AEMQ",DIC("A")="Select T&L: "
"RTN","PRSRUT0",47,0)
 ;screen checks:
"RTN","PRSRUT0",48,0)
 ; if payroll then all T&L's available OR
"RTN","PRSRUT0",49,0)
 ; if T&A supervisor then only T&L's that are assigned
"RTN","PRSRUT0",50,0)
 S DIC("S")="I PRSR=2!(PRSR=1&($D(^PRST(455.5,Y,Z1,DUZ,0))))"
"RTN","PRSRUT0",51,0)
 D ^DIC Q:$D(DTOUT)!$D(DUOUT)!(Y=-1)  K DIC S X=$P(Y,"^",2)
"RTN","PRSRUT0",52,0)
 D VALSEL I TLE="" W ?($X+2),$C(7),"??" G SEL
"RTN","PRSRUT0",53,0)
P1 ;S TLI=$P($G(^PRSPC(PRSRDUZ,0)),U,8)
"RTN","PRSRUT0",54,0)
 Q
"RTN","PRSRUT0",55,0)
P2 S TLE=1,TLE(I)=$P($G(^PRST(455.5,TLI,0)),"^",1,2)
"RTN","PRSRUT0",56,0)
 S TLI=$P($G(^PRSPC(PRSRDUZ,0)),U,8)
"RTN","PRSRUT0",57,0)
 Q
"RTN","PRSRUT0",58,0)
VALSEL ; Validate input in form 001 or 211,234,333 or 221,2233,345-367,400
"RTN","PRSRUT0",59,0)
 S C=0,D=1 F A=1:1 Q:$P(X,",",A)=""  D
"RTN","PRSRUT0",60,0)
 .  I $P(X,",",A)'["-" S I=$P(X,",",A) S TLE(D)=I,D=D+1
"RTN","PRSRUT0",61,0)
 .  E  S B=$P($P(X,",",A),"-"),C=$P($P(X,",",A),"-",2) F I=B:1:C S TLE(D)=I,D=D+1
"RTN","PRSRUT0",62,0)
 .  Q
"RTN","PRSRUT0",63,0)
CHKSEL ; Check selection array eliminating T&L units not assigned, if not Fiscal.
"RTN","PRSRUT0",64,0)
 S TLE=D-1 S I=0 F II=1:1 S I=$O(TLE(I)) Q:I'>0  D
"RTN","PRSRUT0",65,0)
 .  I $L(TLE(I))<1!'($O(^PRST(455.5,"B",TLE(I),0))) D KILL Q
"RTN","PRSRUT0",66,0)
 .  S F=$O(^PRST(455.5,"B",TLE(I),0)) I PRSR=1,'$D(^PRST(455.5,F,Z1,DUZ,0)) D KILL
"RTN","PRSRUT0",67,0)
 .  E  S $P(TLE(I),U,2)=$P(^PRST(455.5,F,0),U,2) D GET
"RTN","PRSRUT0",68,0)
 .  Q
"RTN","PRSRUT0",69,0)
 S:D=1 TLE=D Q
"RTN","PRSRUT0",70,0)
KILL K TLE(D) S TLE=TLE-1 Q
"RTN","PRSRUT0",71,0)
ALL S DA=0 F I=1:1 S DA=$O(^PRST(455.5,"A"_Z1,DUZ,DA)) Q:DA'>0  D
"RTN","PRSRUT0",72,0)
 .  S TLE(I)=$P($G(^PRST(455.5,DA,0)),U,1,2) D GET
"RTN","PRSRUT0",73,0)
 .  Q
"RTN","PRSRUT0",74,0)
 Q
"RTN","PRSRUT0",75,0)
GET S DA(1)="" F II=1:1 S DA(1)=$O(^PRSPC("ATL"_$P(TLE(I),U),DA(1))) Q:DA(1)=""  D
"RTN","PRSRUT0",76,0)
 .  S TLE(I,II)=$O(^PRSPC("ATL"_$P(TLE(I),U),DA(1),0))_"^"_DA(1)
"RTN","PRSRUT0",77,0)
 .  Q
"RTN","PRSRUT0",78,0)
 S TLE=$S(PRSRDUZ:$P($G(^PRSPC(PRSRDUZ,0)),U,8),1:"000"),SW=1 Q
"RTN","PRSRUT0",79,0)
MSG W !!,$C(7),"ENTER CODE(s), ONE OR MORE, SEPERATED BY COMMA(S) ( , ) or ( ALL ) .",! G SEL
"VER")
8.0^22.0
"BLD",7195,6)
^101
**END**
**END**

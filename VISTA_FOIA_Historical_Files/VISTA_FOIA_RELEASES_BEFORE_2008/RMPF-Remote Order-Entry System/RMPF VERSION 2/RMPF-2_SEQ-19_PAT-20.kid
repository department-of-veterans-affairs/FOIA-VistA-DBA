Released RMPF*2*20 SEQ #19
Extracted from mail message
**KIDS**:RMPF*2.0*20^

**INSTALL NAME**
RMPF*2.0*20
"BLD",1117,0)
RMPF*2.0*20^REMOTE ORDER/ENTRY SYSTEM^0^3020322^y
"BLD",1117,1,0)
^^4^4^3020322^
"BLD",1117,1,1,0)
This patch is for the inactivation of Custom Hearing Aids that are
"BLD",1117,1,2,0)
under the old contract.  It will inactivate them, and remove all the
"BLD",1117,1,3,0)
components.  It will also disable the ability to do adjustments on
"BLD",1117,1,4,0)
previous CHA orders under the old contract.
"BLD",1117,4,0)
^9.64PA^^
"BLD",1117,"INID")
^y
"BLD",1117,"INIT")
RMPG9
"BLD",1117,"KRN",0)
^9.67PA^19^17
"BLD",1117,"KRN",.4,0)
.4
"BLD",1117,"KRN",.401,0)
.401
"BLD",1117,"KRN",.402,0)
.402
"BLD",1117,"KRN",.403,0)
.403
"BLD",1117,"KRN",.5,0)
.5
"BLD",1117,"KRN",.84,0)
.84
"BLD",1117,"KRN",3.6,0)
3.6
"BLD",1117,"KRN",3.8,0)
3.8
"BLD",1117,"KRN",9.2,0)
9.2
"BLD",1117,"KRN",9.8,0)
9.8
"BLD",1117,"KRN",9.8,"NM",0)
^9.68A^5^5
"BLD",1117,"KRN",9.8,"NM",1,0)
RMPG9^^0^B37916102
"BLD",1117,"KRN",9.8,"NM",2,0)
RMPFET0^^0^B19501209
"BLD",1117,"KRN",9.8,"NM",3,0)
RMPFET4^^0^B10889291
"BLD",1117,"KRN",9.8,"NM",4,0)
RMPFET6^^0^B25811178
"BLD",1117,"KRN",9.8,"NM",5,0)
RMPFET81^^0^B26266940
"BLD",1117,"KRN",9.8,"NM","B","RMPFET0",2)

"BLD",1117,"KRN",9.8,"NM","B","RMPFET4",3)

"BLD",1117,"KRN",9.8,"NM","B","RMPFET6",4)

"BLD",1117,"KRN",9.8,"NM","B","RMPFET81",5)

"BLD",1117,"KRN",9.8,"NM","B","RMPG9",1)

"BLD",1117,"KRN",19,0)
19
"BLD",1117,"KRN",19.1,0)
19.1
"BLD",1117,"KRN",101,0)
101
"BLD",1117,"KRN",409.61,0)
409.61
"BLD",1117,"KRN",771,0)
771
"BLD",1117,"KRN",870,0)
870
"BLD",1117,"KRN",8994,0)
8994
"BLD",1117,"KRN","B",.4,.4)

"BLD",1117,"KRN","B",.401,.401)

"BLD",1117,"KRN","B",.402,.402)

"BLD",1117,"KRN","B",.403,.403)

"BLD",1117,"KRN","B",.5,.5)

"BLD",1117,"KRN","B",.84,.84)

"BLD",1117,"KRN","B",3.6,3.6)

"BLD",1117,"KRN","B",3.8,3.8)

"BLD",1117,"KRN","B",9.2,9.2)

"BLD",1117,"KRN","B",9.8,9.8)

"BLD",1117,"KRN","B",19,19)

"BLD",1117,"KRN","B",19.1,19.1)

"BLD",1117,"KRN","B",101,101)

"BLD",1117,"KRN","B",409.61,409.61)

"BLD",1117,"KRN","B",771,771)

"BLD",1117,"KRN","B",870,870)

"BLD",1117,"KRN","B",8994,8994)

"BLD",1117,"QUES",0)
^9.62^^
"BLD",1117,"REQB",0)
^9.611^^
"INIT")
RMPG9
"MBREQ")
0
"PKG",145,-1)
1^1
"PKG",145,0)
REMOTE ORDER/ENTRY SYSTEM^RMPF^Remote Order/Entry System
"PKG",145,20,0)
^9.402P^^
"PKG",145,22,0)
^9.49I^1^1
"PKG",145,22,1,0)
2.0^2950530^2950527
"PKG",145,22,1,"PAH",1,0)
20^3020322^2558
"PKG",145,22,1,"PAH",1,1,0)
^^4^4^3020322
"PKG",145,22,1,"PAH",1,1,1,0)
This patch is for the inactivation of Custom Hearing Aids that are
"PKG",145,22,1,"PAH",1,1,2,0)
under the old contract.  It will inactivate them, and remove all the
"PKG",145,22,1,"PAH",1,1,3,0)
components.  It will also disable the ability to do adjustments on
"PKG",145,22,1,"PAH",1,1,4,0)
previous CHA orders under the old contract.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
5
"RTN","RMPFET0")
0^2^B19501209
"RTN","RMPFET0",1,0)
RMPFET0 ;DDC/KAW-SELECTION ORDER ACTIONS [ 11/06/97  4:53 PM ]
"RTN","RMPFET0",2,0)
 ;;2.0;REMOTE ORDER/ENTRY SYSTEM;**20**;MAY 30, 1995
"RTN","RMPFET0",3,0)
SELOPT ;; input: RMPFX,RMPFST,RMPFHAT,RMPFTYP
"RTN","RMPFET0",4,0)
 ;;output: RMPFSEL
"RTN","RMPFET0",5,0)
 F I=1:1 Q:$Y>20  W !
"RTN","RMPFET0",6,0)
SELEN W !,"Enter" S FX="" K RMPFSEL Q:'RMPFST
"RTN","RMPFET0",7,0)
 S SU=$P(^RMPF(791810.2,RMPFST,0),U,2)
"RTN","RMPFET0",8,0)
 F I="I","P","E","F","D" I SU=I,RMPFTYP'=5 W " Number, <E>dit, <D>elete" S FX=FX_"EeDd" Q
"RTN","RMPFET0",9,0)
SELOPT0 I RMPFTYP=5!(RMPFTYP=8) D ARRAY^RMPFDT2 D  K RMPFO
"RTN","RMPFET0",10,0)
 .F I="I","P","E","F","D","S","B" I SU=I D
"RTN","RMPFET0",11,0)
 ..I $P(^RMPF(791810,RMPFX,0),"^",9)>3010630 D
"RTN","RMPFET0",12,0)
 ...W:FX'="" "," W " <A>djust" S FX=FX_"Aa"
"RTN","RMPFET0",13,0)
 ..S (X,FL)=0
"RTN","RMPFET0",14,0)
 ..F  S X=$O(RMPFO(X)) Q:'X  I $D(^RMPF(791810,RMPFX,101,X,90)),$P(^(90),U,9) S FL=1 Q
"RTN","RMPFET0",15,0)
 ..I FL,RMPFTYP'=8 W:FX'="" "," W " <I>ssue" S FX=FX_"Ii"
"RTN","RMPFET0",16,0)
 .S X=0
"RTN","RMPFET0",17,0)
 .F  S X=$O(RMPFO(X)) Q:'X  S S0=^RMPF(791810,RMPFX,101,X,0),Y=$P(S0,U,18) I Y,$D(^RMPF(791810.2,Y,0)) S Y=$P(^(0),U,2) I "SEDF"[Y D CERT Q:FX["Rr"
"RTN","RMPFET0",18,0)
 .I SU="C",FX'["A" S X=DT,Z=60 D PASTWKDY D
"RTN","RMPFET0",19,0)
 ..S X=0
"RTN","RMPFET0",20,0)
 ..F  S X=$O(RMPFO(X)) Q:'X  I $P(^(0),U,19)'="C" W:FX'="" "," W " <A>djust" S FX=FX_"Aa" Q
"RTN","RMPFET0",21,0)
 I $O(^RMPF(791810,RMPFX,201,0)) W:FX'="" "," W " <M>essages" S FX=FX_"Mm"
"RTN","RMPFET0",22,0)
 I $O(^RMPF(791810,RMPFX,301,0)) W:FX'="" "," W " A<U>thorized Aids" S FX=FX_"Uu"
"RTN","RMPFET0",23,0)
 D CAN I CN W:FX'="" "," W " <C>ancel" S FX=FX_"Cc"
"RTN","RMPFET0",24,0)
 I "CIX"[RMPFHAT W:FX'="" "," W:$X>69 ! W " <H>istory" S FX=FX_"Hh"
"RTN","RMPFET0",25,0)
 I RMPFTP="P" W:FX'="" "," W:$X>69 ! W " E<X>tended" S FX=FX_"Xx"
"RTN","RMPFET0",26,0)
 W:$X>69 ! W:FX'="" " or" W:$X>69 ! W " <RETURN>: "
"RTN","RMPFET0",27,0)
 D READ G SELOPTE:$D(RMPFOUT) K RMPFF,CN
"RTN","RMPFET0",28,0)
SELOPT1 I $D(RMPFQUT) D MSG K RMPFSEL G SELOPTE
"RTN","RMPFET0",29,0)
 I Y="" D ^RMPFEA2:'$D(RMPFERR) G SELOPTE:$D(RMPFOUT) K RMPFX G SELOPTE
"RTN","RMPFET0",30,0)
 I Y?1N.E,FX["Ee" S RMPFSEL=Y G NUM
"RTN","RMPFET0",31,0)
 S RMPFSEL=$E(Y,1)
"RTN","RMPFET0",32,0)
 I FX'[RMPFSEL S RMPFQUT="" G SELOPT1
"RTN","RMPFET0",33,0)
 I "Ee"[RMPFSEL S RMPFSEL="E" G SELOPTE
"RTN","RMPFET0",34,0)
 I "Hh"[RMPFSEL D ^RMPFDT7 G SELOPTE
"RTN","RMPFET0",35,0)
 I "Mm"[RMPFSEL D ^RMPFDT4 G SELOPTE
"RTN","RMPFET0",36,0)
 I "Dd"[RMPFSEL D DELETE^RMPFET1 G SELOPTE
"RTN","RMPFET0",37,0)
 I "Ii"[RMPFSEL D ^RMPFET7 G SELOPTE:$D(RMPFOUT) D ^RMPFET2 G SELOPTE
"RTN","RMPFET0",38,0)
 I "Rr"[RMPFSEL N RMPFSEL D DISP^RMPFET84 G SELOPTE
"RTN","RMPFET0",39,0)
 I "Aa"[RMPFSEL D ^RMPFET8 G SELOPTE:$D(RMPFOUT) D ^RMPFET2 G SELOPTE
"RTN","RMPFET0",40,0)
 I "Uu"[RMPFSEL D ^RMPFDT8 G SELOPTE
"RTN","RMPFET0",41,0)
 I "Cc"[RMPFSEL D ^RMPFET82 G SELOPTE
"RTN","RMPFET0",42,0)
 I "Xx"[RMPFSEL D ^RMPFDT9 G SELOPTE
"RTN","RMPFET0",43,0)
NUM K RMPFQUT
"RTN","RMPFET0",44,0)
 F I=1:1 S Z=$P(Y,",",I) Q:Z=""  D  G SELOPT1:$D(RMPFQUT)
"RTN","RMPFET0",45,0)
 .I Z?1N.N,Z>0,Z<11 S RMPFSL(Z)="" Q
"RTN","RMPFET0",46,0)
 .S RMPFQUT="" Q
"RTN","RMPFET0",47,0)
 I $D(RMPFSL) D SUB^RMPFET5
"RTN","RMPFET0",48,0)
SELOPTE K I,FX,Y,X,Z,SU,X1,X2,%Y,S0,A,FL
"RTN","RMPFET0",49,0)
END K ID Q
"RTN","RMPFET0",50,0)
CERT S A=$G(^RMPF(791810,RMPFX,101,X,90))
"RTN","RMPFET0",51,0)
 I '$P(A,U,11),$P(S0,U,20) Q
"RTN","RMPFET0",52,0)
 I '$P(A,U,9),"EDSF"[Y G CERT1
"RTN","RMPFET0",53,0)
 I $P(A,U,9),"EDF"[Y G CERT1
"RTN","RMPFET0",54,0)
 I $P(A,U,9),$P(S0,U,19)["R",$P(S0,U,20) G CERT1
"RTN","RMPFET0",55,0)
 E  Q
"RTN","RMPFET0",56,0)
CERT1 W:FX'="" "," W:$P(A,U,9) " Re-" W:'$P(A,U,9) " " W "Ce<R>tify" S FX=FX_"Rr" Q
"RTN","RMPFET0",57,0)
CAN ;;Calculate if CANCEL ALLOWED
"RTN","RMPFET0",58,0)
 ;; input: RMPFHAT,RMPFX
"RTN","RMPFET0",59,0)
 ;;output: CN
"RTN","RMPFET0",60,0)
 D ARRAY^RMPFDT2
"RTN","RMPFET0",61,0)
 S CN=0 G CANE:"ICXZBDJQW"'[RMPFHAT
"RTN","RMPFET0",62,0)
 I "ZBDJQW"[RMPFHAT D  G CANE
"RTN","RMPFET0",63,0)
 .S X=0 F  S X=$O(RMPFO(X)) Q:'X  I RMPFO(X)=18!($P(^RMPF(791810,RMPFX,101,X,0),U,15)="C") S CN=1 Q
"RTN","RMPFET0",64,0)
 S XX=0 F  S XX=$O(RMPFO(XX)) Q:'XX  D  Q:CN
"RTN","RMPFET0",65,0)
 .I RMPFO(XX)=5!(RMPFO(XX)=17) S CN=1 Q
"RTN","RMPFET0",66,0)
 .I RMPFHAT="I",RMPFO(XX)=8 S X=DT,Z=60 D PASTWKDY S ID=$P(^RMPF(791810,RMPFX,101,XX,0),U,8) I ID>Y S CN=1
"RTN","RMPFET0",67,0)
CANE K X,XX,RMPFO Q
"RTN","RMPFET0",68,0)
READ K RMPFOUT,RMPFQUT
"RTN","RMPFET0",69,0)
 R Y:DTIME I '$T W $C(7) R Y:5 G READ:Y="." S:'$T Y=U
"RTN","RMPFET0",70,0)
 I Y?1"^".E S (RMPFOUT,Y)="" Q
"RTN","RMPFET0",71,0)
 S:Y?1"?".E (RMPFQUT,Y)=""
"RTN","RMPFET0",72,0)
 Q
"RTN","RMPFET0",73,0)
PASTWKDY Q:X'?7N
"RTN","RMPFET0",74,0)
 ;returns a date Z workdays into the past
"RTN","RMPFET0",75,0)
 N BD,DW,WK,%H S WK=0 S:'$G(Z) Z=5
"RTN","RMPFET0",76,0)
W1 S X1=X,X2=-1 D C^%DTC,H^%DTC
"RTN","RMPFET0",77,0)
 I %Y,%Y<6,'$D(^HOLIDAY(X)) S WK=WK+1
"RTN","RMPFET0",78,0)
 I WK>Z S Y=X Q
"RTN","RMPFET0",79,0)
 G W1
"RTN","RMPFET0",80,0)
MSG W !!,"Enter " S CT=0
"RTN","RMPFET0",81,0)
 F I=1:2 S X=$E(FX,I) Q:X=""  W:CT ! W ?6,$P($T(@X),";;",2) S CT=CT+1
"RTN","RMPFET0",82,0)
 F I="I","P","E","D" I SU=I W !?6,"field numbers separated by commas to edit only those fields" Q
"RTN","RMPFET0",83,0)
 W:FX'="" ! W ?6,"<RETURN> to continue.",!
"RTN","RMPFET0",84,0)
 W !!!,"Type <RETURN> to continue: " D READ I '$D(RMPFOUT) S RMPFQUT=""
"RTN","RMPFET0",85,0)
 K CT Q
"RTN","RMPFET0",86,0)
E ;;<E> to edit all fields of the order
"RTN","RMPFET0",87,0)
D ;;<D> to delete the entire order
"RTN","RMPFET0",88,0)
M ;;<M> to view all messages for the order
"RTN","RMPFET0",89,0)
H ;;<H> to view the order history
"RTN","RMPFET0",90,0)
I ;;<I> to enter the issue date
"RTN","RMPFET0",91,0)
A ;;<A> to make an adjustment
"RTN","RMPFET0",92,0)
C ;;<C> to cancel the order
"RTN","RMPFET0",93,0)
R ;;<R> to certify that the order was received
"RTN","RMPFET0",94,0)
U ;;<U> to view a list of authorized hearing aids
"RTN","RMPFET0",95,0)
X ;;<X> to view the extended information for this order
"RTN","RMPFET4")
0^3^B10889291
"RTN","RMPFET4",1,0)
RMPFET4 ;DDC/KAW-EVALUATE ORDER STATUS BY TYPE [ 05/27/95   2:10 PM ]
"RTN","RMPFET4",2,0)
 ;;2.0;REMOTE ORDER/ENTRY SYSTEM;**20**;MAY 30, 1995
"RTN","RMPFET4",3,0)
CUST ;; input: RMPFX
"RTN","RMPFET4",4,0)
 ;;output: RMPFERR,RMPFMSG
"RTN","RMPFET4",5,0)
 S SS=$S($D(^RMPF(791810,RMPFX,11)):^(11),1:"")
"RTN","RMPFET4",6,0)
 S RMPFTF=$P(SS,U,1),RMPFUS=$P(SS,U,2)
"RTN","RMPFET4",7,0)
 S RMPFDC=$P($G(^RMPF(791810,RMPFX,2)),U,1) I RMPFDC,$D(^RMPR(662,RMPFDC,0)) S X=$P(^(0),U,1) D
"RTN","RMPFET4",8,0)
 .I X["DEAF/U",RMPFTF="B" S RMPFERR("FITTING CANNOT BE BINAURAL IF PATIENT IS DEAF/U")=""
"RTN","RMPFET4",9,0)
 .I X["DEAF/U",RMPFUS="B" S RMPFERR("PATIENT CANNOT BE AUTHORIZED FOR BINAURAL USE IF DISABILITY IS DEAF/U")=""
"RTN","RMPFET4",10,0)
 D ARRAY^RMPFDT2 S (X,CX)=0 K RMPFEAR
"RTN","RMPFET4",11,0)
 F I=1:1 S X=$O(RMPFO(X)) Q:'X  S CX=CX+1,A=$P(^RMPF(791810,RMPFX,101,X,0),U,4) I A'="" D
"RTN","RMPFET4",12,0)
 .S IT=$P(^RMPF(791810,RMPFX,101,X,0),U,1) Q:'IT
"RTN","RMPFET4",13,0)
 .Q:'$D(^RMPF(791811,IT,0))
"RTN","RMPFET4",14,0)
 .Q:$P(^RMPF(791811,IT,0),"^",1)["REMOTE"
"RTN","RMPFET4",15,0)
 .I $D(RMPFEAR(A)) S RMPFMSG("TWO OR MORE AIDS ARE ORDERED FOR THE SAME EAR")=""
"RTN","RMPFET4",16,0)
 .S RMPFEAR(A)="" Q
"RTN","RMPFET4",17,0)
 I RMPFTF="B",CX<2 S RMPFERR("TWO AIDS MUST BE ORDERED WITH A BINAURAL FITTING")=""
"RTN","RMPFET4",18,0)
 I RMPFUS="M",RMPFTF="B" S RMPFERR("FITTING CANNOT BE BINAURAL IF AUTHORIZED USAGE IS MONAURAL")=""
"RTN","RMPFET4",19,0)
 I RMPFUS="M",CX>2 S RMPFMSG("MORE THAN TWO AIDS HAVE BEEN ORDERED FOR A MONAURAL USER")=""
"RTN","RMPFET4",20,0)
 S SS=$G(^RMPF(791810,RMPFX,10)),RC=$P(SS,U,4),AD=$P(SS,U,8)
"RTN","RMPFET4",21,0)
 I RC>DT S RMPFERR("REQUEST FOR CARE DATE CANNOT BE A FUTURE DATE")=""
"RTN","RMPFET4",22,0)
 I AD>DT S RMPFERR("AUDIOLOGICAL ASSESSMENT DATE CANNOT BE A FUTURE DATE")=""
"RTN","RMPFET4",23,0)
 I AD,RC>AD S RMPFERR("AUDIOLOGICAL ASSESSMENT DATE CANNOT BE PRIOR TO REQUEST FOR CARE DATE")=""
"RTN","RMPFET4",24,0)
 K SS,RMPFDC,RMPFO,RMPFTF,RMPFUS,RMPFEAR,I,X,CX,A,RC,AD,IT Q
"RTN","RMPFET4",25,0)
REG ;; input: RMPFX
"RTN","RMPFET4",26,0)
 ;;output: RMPFERR
"RTN","RMPFET4",27,0)
 S X=0
"RTN","RMPFET4",28,0)
 F I=1:1 S X=$O(^RMPF(791810,RMPFX,101,X)) G REGE:'X D
"RTN","RMPFET4",29,0)
 .Q:'$D(^RMPF(791810,RMPFX,101,X,0))  Q:$P(^(0),U,1)'=1
"RTN","RMPFET4",30,0)
 .I '$D(^RMPF(791810,RMPFX,101,X,2)) S RMPFERR("FREE TEXT MAKE AND MODEL NOT ENTERED")=""
"RTN","RMPFET4",31,0)
 .S MM=$G(^RMPF(791810,RMPFX,101,X,2)) S MK=$P(MM,U,1) I MK="" S RMPFERR("FREE TEXT MAKE MISSING")=""
"RTN","RMPFET4",32,0)
 .S MD=$P(MM,U,2) I MD="" S RMPFERR("FREE TEXT MODEL MISSING")=""
"RTN","RMPFET4",33,0)
 .Q
"RTN","RMPFET4",34,0)
REGE K X,I,MM,MK,MD Q
"RTN","RMPFET4",35,0)
ISS ;;Special error checks for Custom Hearing Aid Issue Orders
"RTN","RMPFET4",36,0)
 ;; input: RMPFX
"RTN","RMPFET4",37,0)
 ;;output: RMPFERR
"RTN","RMPFET4",38,0)
 S OD=$P(^RMPF(791810,RMPFX,0),U,9) D ARRAY^RMPFDT2 S RMPFY=0
"RTN","RMPFET4",39,0)
I1 F  S RMPFY=$O(RMPFO(RMPFY)) Q:'RMPFY  D
"RTN","RMPFET4",40,0)
 .Q:'$D(^RMPF(791810,RMPFX,101,RMPFY))  S S0=^(RMPFY,0) Q:$P(S0,U,15)="C"
"RTN","RMPFET4",41,0)
 .I $P(S0,U,20),$P(S0,U,19)["R" D
"RTN","RMPFET4",42,0)
 ..I $P(S0,U,5)="" S RMPFERR("SERIAL NUMBER MISSING")=""
"RTN","RMPFET4",43,0)
 ..S X=$G(^RMPF(791810,RMPFX,101,RMPFY,90))
"RTN","RMPFET4",44,0)
 ..I $P(X,U,8)=""!($P(X,U,9)="") S RMPFERR("CERTIFICATION INFORMATION MISSING")=""
"RTN","RMPFET4",45,0)
 .S ID=$P(S0,U,8),X=$P(S0,U,19),BT=$P(S0,U,2)
"RTN","RMPFET4",46,0)
 .I BT="",$P($G(^RMPF(791810,RMPFX,101,RMPFY,90)),U,8),'$P(^(0),U,20),$P(^(0),U,19)["I" S RMPFERR("BATTERY TYPE MISSING")=""
"RTN","RMPFET4",47,0)
 .I X["I",$P($G(^RMPF(791810,RMPFX,101,RMPFY,90)),U,12)="" S RMPFERR("ISSUING USER MISSING")=""
"RTN","RMPFET4",48,0)
 .I ID="",X["I" S RMPFERR("ISSUE DATE MISSING")="" Q
"RTN","RMPFET4",49,0)
 .Q:ID=""
"RTN","RMPFET4",50,0)
 .I ID<OD S RMPFERR("ISSUE DATE IS PRIOR TO ORDER DATE")=""
"RTN","RMPFET4",51,0)
ISSE K OD,ID,BT,S0,RMPFY,X,RMPFO Q
"RTN","RMPFET6")
0^4^B25811178
"RTN","RMPFET6",1,0)
RMPFET6 ;DDC/KAW-EDIT LINE ITEM INFORMATION [ 05/12/98  1:45 PM ]
"RTN","RMPFET6",2,0)
 ;;2.0;REMOTE ORDER/ENTRY SYSTEM;**20**;MAY 30, 1995
"RTN","RMPFET6",3,0)
 ;; input: RMPFX,RMPFTP,RMPFTYP,RMPFHAT,RMPFST,DFN (if patient order)
"RTN","RMPFET6",4,0)
 ;;output: None
"RTN","RMPFET6",5,0)
 Q:'$D(RMPFX)  S X=$G(^RMPF(791810,RMPFX,0)) Q:X=""
"RTN","RMPFET6",6,0)
START K RMPFMD,RMPFY D ARRAY^RMPFDT2
"RTN","RMPFET6",7,0)
 S (X,RMPFMC)=0 F  S X=$O(RMPFO(X)) Q:'X  S RMPFMC=RMPFMC+1
"RTN","RMPFET6",8,0)
 I 'RMPFMC S Y1="A" G ST1
"RTN","RMPFET6",9,0)
 D:RMPFTP="P" PAT^RMPFUTL
"RTN","RMPFET6",10,0)
 W @IOF,!?33,"ITEMS ORDERED" D @("HEAD"_RMPFTP_"^RMPFDT1")
"RTN","RMPFET6",11,0)
 W !! D ^RMPFDT2 K RMPFY
"RTN","RMPFET6",12,0)
 D ^RMPFET62 G END:$D(RMPFOUT),END:'$D(Y1)
"RTN","RMPFET6",13,0)
 I "Dd"[Y1,$D(RMPFY) D DELETE G END
"RTN","RMPFET6",14,0)
ST1 I "Aa"[Y1 D ADD G END:$D(RMPFOUT),END:'$D(RMPFY)
"RTN","RMPFET6",15,0)
 D EDIT G END:$D(RMPFOUT),START
"RTN","RMPFET6",16,0)
END K CX,SX,RMPFDOB,RMPFDOD,RMPFMC,RMPFMD,RMPFNAM,RMPFO,RMPFSSN,Y1
"RTN","RMPFET6",17,0)
 K RMPFSTR0,RMPFSTR2,RMPFSTR3 Q
"RTN","RMPFET6",18,0)
 ;
"RTN","RMPFET6",19,0)
ADD ;;Add a new line item
"RTN","RMPFET6",20,0)
 ;; input: RMPFX,RMPFTYP,RMPFHAT,RMPFST
"RTN","RMPFET6",21,0)
 ;;output: RMPFY,RMPFIT,RMPFITP
"RTN","RMPFET6",22,0)
 K RMPFIT
"RTN","RMPFET6",23,0)
 D SELECT G ADDE:$D(RMPFOUT),ADDE:'$D(RMPFIT)
"RTN","RMPFET6",24,0)
ADD1 I '$D(^RMPF(791810,RMPFX,101,0)) S ^RMPF(791810,RMPFX,101,0)="^791810.0101P"
"RTN","RMPFET6",25,0)
 S %DT="T",X="NOW" D ^%DT
"RTN","RMPFET6",26,0)
 S DIC="^RMPF(791810,"_RMPFX_",101,",(DA,DA(1))=RMPFX,X=RMPFIT
"RTN","RMPFET6",27,0)
 S DIC(0)="L",DLAYGO=791810,DIC("DR")=".15////O;.17////"_Y_";.18///1;.19////O;.2////1"
"RTN","RMPFET6",28,0)
 S:RMPFIT=1 DIC("DR")=DIC("DR")_";2.01;2.02"
"RTN","RMPFET6",29,0)
 K DD,DO D FILE^DICN
"RTN","RMPFET6",30,0)
 I Y=-1 W !!,"*** UNABLE TO ADD LINE ITEM ***" G ADDE
"RTN","RMPFET6",31,0)
 S RMPFY=+Y I RMPFIT=1 D  G ADDE:'$D(RMPFY)
"RTN","RMPFET6",32,0)
 .Q:RMPFHAT="E"
"RTN","RMPFET6",33,0)
 .I $D(^RMPF(791810,RMPFX,101,RMPFY,2)),$P(^(2),U,2)'="" Q
"RTN","RMPFET6",34,0)
 .S DA=RMPFY,DIK="^RMPF(791810,"_RMPFX_",101,",DA(1)=RMPFX
"RTN","RMPFET6",35,0)
 .D ^DIK K RMPFY
"RTN","RMPFET6",36,0)
 G ADDE:'$D(RMPFY)
"RTN","RMPFET6",37,0)
 S DIE="^RMPF(791810,"_RMPFX_",101,",DA(1)=RMPFX,DA=RMPFY
"RTN","RMPFET6",38,0)
 S DR=".16////"_RMPFY D ^DIE
"RTN","RMPFET6",39,0)
 K RMPF F I=5,10,11 S RMPF(I)=""
"RTN","RMPFET6",40,0)
ADDE K DI,DIE,DQ,DR,DIC,DIK,X,Y,DA,DD,D0,RMPF,ZY,ZZ,%,D,%DT,I Q
"RTN","RMPFET6",41,0)
 ;
"RTN","RMPFET6",42,0)
EDIT ;;Edit information for a line item
"RTN","RMPFET6",43,0)
 ;; input: RMPFX,RMPFY,Y1,RMPFTYP,RMPFHAT,RMPFST
"RTN","RMPFET6",44,0)
 ;;output: None
"RTN","RMPFET6",45,0)
 Q:'$D(RMPFX)!'$D(RMPFY)
"RTN","RMPFET6",46,0)
 S RMPFSTO=$P(^RMPF(791810,RMPFX,101,RMPFY,0),U,18) S:RMPFSTO="" RMPFSTO=1
"RTN","RMPFET6",47,0)
 I $P(^RMPF(791810.2,RMPFSTO,0),U,5)'="E" W !!,$C(7),"*** THIS LINE ITEM IS IN A STATUS THAT IS UNEDITABLE ***" H 2 G EDITE
"RTN","RMPFET6",48,0)
 I RMPFSTO=6!(RMPFSTO=7)!(RMPFSTO=10) D CLEAR^RMPFET61 G EDITE:'$D(RMPFSTO)
"RTN","RMPFET6",49,0)
 D PRIOR^RMPFET61 G ED1:"Aa"[Y1
"RTN","RMPFET6",50,0)
 S X=$P(^RMPF(791810,RMPFX,101,RMPFY,0),U,1) I X,$D(^RMPF(791811,X,0)) S DIC("B")=$P(^(0),U,1)
"RTN","RMPFET6",51,0)
 I RMPFHAT="E" S RMPFIT=1 G ED1
"RTN","RMPFET6",52,0)
 D SELECT G EDITE:$D(RMPFOUT),EDITE:'$D(RMPFIT)
"RTN","RMPFET6",53,0)
ED1 S RMPFPGP=$P(^RMPF(791811,RMPFIT,0),U,3) I RMPFPGP,$D(^RMPF(791811.1,RMPFPGP,0)) S RMPFPGP=$P(^(0),U,2)
"RTN","RMPFET6",54,0)
 S DR=$P($G(^RMPF(791810.1,RMPFTYP,1)),U,1)
"RTN","RMPFET6",55,0)
 I RMPFTYP=2 I $D(^RMPF(791811,RMPFIT,0)) I $P(^(0),"^",1)["REMOTE" D
"RTN","RMPFET6",56,0)
 .S $P(DR,";",1)=$P(DR,";",1)_"////^S X=""R"""
"RTN","RMPFET6",57,0)
 S ST=".01////"_RMPFIT I RMPFIT=1 S ST=ST_";2.01;2.02"
"RTN","RMPFET6",58,0)
 S DR=$S(DR'="":ST_";"_DR,1:ST_RMPFIT)
"RTN","RMPFET6",59,0)
 I RMPFIT'=$P(^RMPF(791810,RMPFX,101,RMPFY,0),U,1) K ^RMPF(791810,RMPFX,101,RMPFY,102)
"RTN","RMPFET6",60,0)
 S DIE="^RMPF(791810,"_RMPFX_",101,",DA(1)=RMPFX,DA=RMPFY D ^DIE
"RTN","RMPFET6",61,0)
 D ^RMPFET61
"RTN","RMPFET6",62,0)
 I "CS"[RMPFHAT D
"RTN","RMPFET6",63,0)
 .S RMPFY=9999 D PRIOR^RMPFET61,^RMPFET9
"RTN","RMPFET6",64,0)
 .I $D(RMPFY1) S RMPFY=RMPFY1 D ^RMPFET61
"RTN","RMPFET6",65,0)
EDITE K X,Y,Y1,%Y,D0,DI,DIE,DQ,DR,RMPFTF,RMPFRE,RMPFIT,RMPFITP,RMPFO,RMPFPGP
"RTN","RMPFET6",66,0)
 K %,CX,D,D1,DA,DIC,DLAYGO,RMPFSTO,I,DISYS,RMPFSTR0,RMPFSTR2,RMPFSTR3,ST Q
"RTN","RMPFET6",67,0)
 ;
"RTN","RMPFET6",68,0)
SELECT ;;Select a line item from 791811
"RTN","RMPFET6",69,0)
 ;; input: RMPFTYP,RMPFST
"RTN","RMPFET6",70,0)
 ;;output: RMPFIT,RMPFITP
"RTN","RMPFET6",71,0)
 S SL=$P(^RMPF(791810.1,RMPFTYP,0),U,9)
"RTN","RMPFET6",72,0)
 I SL=2 S RMPFIT=1,RMPFITP=$P(^RMPF(791811,1,0),U,1) G SELECTE
"RTN","RMPFET6",73,0)
 I SL=1 S DIC("S")="S Z1=$P(^RMPF(791811,Y,0),U,3) Q:'Z1  I Y=1!($D(^RMPF(791810.1,RMPFTYP,101,""B"",Z1)))" G SE0
"RTN","RMPFET6",74,0)
 I $O(^RMPF(791810.1,RMPFTYP,101,"B",0)) D  G SE0
"RTN","RMPFET6",75,0)
 .I RMPFTYP'=8 S DIC("S")="I Y,Y'=1,'$P($G(^RMPF(791811,Y,""I"")),U,1) S Z1=$P(^RMPF(791811,Y,0),U,3) I Z1,$D(^RMPF(791810.1,RMPFTYP,101,""B"",Z1))"
"RTN","RMPFET6",76,0)
 .I RMPFTYP=8 S DIC("S")="I Y,Y'=1 S Z1=$P(^RMPF(791811,Y,0),U,3) I Z1,$D(^RMPF(791810.1,RMPFTYP,101,""B"",Z1))"
"RTN","RMPFET6",77,0)
 S DIC("S")="I Y'=1"
"RTN","RMPFET6",78,0)
SE0 S DIC=791811,DIC(0)="AEQM",DIC("A")="SELECT ITEM: " W !
"RTN","RMPFET6",79,0)
 D ^DIC S:X[U RMPFOUT="" K DIC G SELECTE:Y=-1 S RMPFIT=+Y
"RTN","RMPFET6",80,0)
 I RMPFST<3,$D(^RMPF(791811,RMPFIT,"I")),$P(^("I"),U,1),"ILHXEUNTVG"'[RMPFHAT W !!,"*** THIS LINE ITEM HAS BEEN INACTIVATED FOR NEW ORDERS ***" K RMPFIT G SELECT
"RTN","RMPFET6",81,0)
SE1 S RMPFITP=$P(Y,U,2)
"RTN","RMPFET6",82,0)
SELECTE K DIC,X,Y,SL,%,%Y,DISYS,Z1 Q
"RTN","RMPFET6",83,0)
 ;
"RTN","RMPFET6",84,0)
DELETE ;;Delete a line item
"RTN","RMPFET6",85,0)
 ;; input: RMPFX,RMPFY
"RTN","RMPFET6",86,0)
 ;;output: None
"RTN","RMPFET6",87,0)
 W !!,"Are you sure you want to delete this item? NO// " D READ
"RTN","RMPFET6",88,0)
 G DELETEE:$D(RMPFOUT)
"RTN","RMPFET6",89,0)
DEL1 I $D(RMPFQUT) W !!,"If you enter a <Y> the item will be permanently deleted from this order.",!,"If you enter a <N> or <RETURN> the item will be retained on the order." G DELETE
"RTN","RMPFET6",90,0)
 S:Y="" Y="N" S Y=$E(Y,1) I "YyNn"'[Y S RMPFQUT="" G DEL1
"RTN","RMPFET6",91,0)
 G DELETEE:Y="N" S DIE="^RMPF(791810,"_RMPFX_",101,",DA=RMPFY
"RTN","RMPFET6",92,0)
 S DA(1)=RMPFX,DR=".01////@" D ^DIE
"RTN","RMPFET6",93,0)
DELETEE K X,Y,DIE,DA,DR,DI,DQ,D0,D,%,DIC,RMPFY Q
"RTN","RMPFET6",94,0)
READ K RMPFOUT,RMPFQUT
"RTN","RMPFET6",95,0)
 R Y:DTIME I '$T W $C(7) R Y:5 G READ:Y="." S:'$T Y=U
"RTN","RMPFET6",96,0)
 I Y?1"^".E S (RMPFOUT,Y)="" Q
"RTN","RMPFET6",97,0)
 S:Y?1"?".E (RMPFQUT,Y)=""
"RTN","RMPFET6",98,0)
 Q
"RTN","RMPFET81")
0^5^B26266940
"RTN","RMPFET81",1,0)
RMPFET81 ;DDC/KAW-CONTINUATION OF RMPFET8 [ 06/16/95   3:06 PM ]
"RTN","RMPFET81",2,0)
 ;;2.0;REMOTE ORDER/ENTRY SYSTEM;**20**;MAY 30, 1995
"RTN","RMPFET81",3,0)
ADDC ;;Adjustment - Add a component
"RTN","RMPFET81",4,0)
 ;; input: RMPFX,RMPFY
"RTN","RMPFET81",5,0)
 ;;output: None
"RTN","RMPFET81",6,0)
 D REASON G ADDCE:$D(RMPFOUT) S RMPFADD=""
"RTN","RMPFET81",7,0)
 S RMPFLG=$S($D(^RMPF(791810,RMPFX,101,RMPFY,102,0)):$P(^(0),U,4),1:"")
"RTN","RMPFET81",8,0)
 D COMPON^RMPFET7 G ADDCE:$D(RMPFOUT)
"RTN","RMPFET81",9,0)
 I $D(^RMPF(791810,RMPFX,101,RMPFY,102,0)),$P(^(0),U,4)>RMPFLG D STATUS
"RTN","RMPFET81",10,0)
ADDCE K RMPFOUT,RMPFQUT,RMPFLG,RMPFADD,RMPFRE Q
"RTN","RMPFET81",11,0)
CHANGEM ;;Adjustment - Change model
"RTN","RMPFET81",12,0)
 ;; input: RMPFX,RMPFY,RMPFTYP
"RTN","RMPFET81",13,0)
 ;;output: None
"RTN","RMPFET81",14,0)
 W !!,"Are you sure you wish to change the model? NO// "
"RTN","RMPFET81",15,0)
 D READ G CH3:$D(RMPFOUT)
"RTN","RMPFET81",16,0)
CH1 I $D(RMPFQUT) W !!,"Enter <Y> to proceed with changing the model, <N> or <RETURN> to continue." G CHANGEM
"RTN","RMPFET81",17,0)
 G CH3:Y="" S Y=$E(Y,1) I "YyNn"'[Y S RMPFQUT="" G CH1
"RTN","RMPFET81",18,0)
 G CH3:"Nn"[Y D REASON G CH3:$D(RMPFOUT)
"RTN","RMPFET81",19,0)
 S RMPFLR=$P(^RMPF(791810,RMPFX,101,RMPFY,0),U,4)
"RTN","RMPFET81",20,0)
 D WARCHCK
"RTN","RMPFET81",21,0)
CH2 S DIC="^RMPF(791811,",DIC(0)="AEQM",DIC("A")="Select new model: "
"RTN","RMPFET81",22,0)
 S DIC("S")="I $P(^RMPF(791811,+Y,0),U,3),$D(^RMPF(791810.1,RMPFTYP,101,""B"",$P(^RMPF(791811,+Y,0),U,3)))"
"RTN","RMPFET81",23,0)
 S RMPFY1=RMPFY W ! D ^DIC G CH3:Y=-1 S RMPFIT=+Y,RMPFITP=$P(Y,U,2)
"RTN","RMPFET81",24,0)
 I $D(^RMPF(791811,+Y,"I")),$P(^("I"),U,1) D SURE Q:$D(RMPFOUT)  G CH2:"Yy"[Y
"RTN","RMPFET81",25,0)
 K RMPFY D ADD1^RMPFET6 G CH2:'$D(RMPFY) S RMPFY2=RMPFY
"RTN","RMPFET81",26,0)
 S ^RMPF(791810,RMPFX,101,RMPFY,90)=$G(^RMPF(791810,RMPFX,101,RMPFY1,90))
"RTN","RMPFET81",27,0)
 S $P(^RMPF(791810,RMPFX,101,RMPFY,0),U,16)=RMPFY1,$P(^(0),U,15)="OC",$P(^(0),U,4)=RMPFLR
"RTN","RMPFET81",28,0)
 S RMPFMESG="Model changed to: "_RMPFITP
"RTN","RMPFET81",29,0)
 S X="NOW",%DT="T" D ^%DT S TD=Y
"RTN","RMPFET81",30,0)
 S DIE="^RMPF(791810,"_RMPFX_",101,",DA(1)=RMPFX,DA=RMPFY
"RTN","RMPFET81",31,0)
 S DR="90.01////"_DUZ_";90.02////"_TD_";90.03////"_RMPFRE_";90.04////"_RMPFMESG D ^DIE
"RTN","RMPFET81",32,0)
 D DELETE^RMPFET8
"RTN","RMPFET81",33,0)
 S RMPFY=RMPFY2 D STATUS
"RTN","RMPFET81",34,0)
 D:$D(RMPFWFLG) ADDWAR
"RTN","RMPFET81",35,0)
 W !!,"*** MODEL CHANGED ***" H 1
"RTN","RMPFET81",36,0)
CH3 K RMPFOUT,RMPFQUT,X,Y,RMPFRE,DIC,RMPFY1,RMPFIT,RMPFITP,RMPFY2,RMPFMESG
"RTN","RMPFET81",37,0)
 K RMPFMESG,RMPFLR,DDH,DISYS,TD Q
"RTN","RMPFET81",38,0)
WARCHCK ;;CHECK TO SEE IF OLD MODEL HAS 2ND YEAR WARRANTY
"RTN","RMPFET81",39,0)
 K RMPFWFLG
"RTN","RMPFET81",40,0)
 S K=0
"RTN","RMPFET81",41,0)
 F  S K=$O(^RMPF(791810,RMPFX,101,RMPFY,102,K)) Q:'K  D:$D(^RMPF(791810,RMPFX,101,RMPFY,102,K,0))
"RTN","RMPFET81",42,0)
 .S WR=$P(^RMPF(791810,RMPFX,101,RMPFY,102,K,0),"^",1)
"RTN","RMPFET81",43,0)
 .I WR I $P($G(^RMPF(791811.2,WR,0)),"^",3)="WRNTY2YR" S RMPFWFLG=1 Q
"RTN","RMPFET81",44,0)
 Q
"RTN","RMPFET81",45,0)
ADDWAR ;;ADD 2ND YEAR WARRANTY TO NEW MODEL
"RTN","RMPFET81",46,0)
 S X="WRNTY2YR"
"RTN","RMPFET81",47,0)
 S DIC=791811.2,DIC(0)="LM" D ^DIC K DIC Q:Y=-1  S X=+Y
"RTN","RMPFET81",48,0)
 I '$D(^RMPF(791810,RMPFX,101,RMPFY,102,0)) S ^RMPF(791810,RMPFX,101,RMPFY,102,0)="^791810.101102P^0^0"
"RTN","RMPFET81",49,0)
 S DIC="^RMPF(791810,"_RMPFX_",101,"_RMPFY_",102,"
"RTN","RMPFET81",50,0)
 S DA(2)=RMPFX,DA(1)=RMPFY,DIC(0)="LM",DLAYGO=791810
"RTN","RMPFET81",51,0)
 K DD,DO D FILE^DICN
"RTN","RMPFET81",52,0)
 Q
"RTN","RMPFET81",53,0)
REMOVEC ;;Adjustment - Remove a component from an order
"RTN","RMPFET81",54,0)
 ;; input: RMPFX,RMPFY
"RTN","RMPFET81",55,0)
 ;;output: None
"RTN","RMPFET81",56,0)
 D REASON G REMOVECE:$D(RMPFOUT)
"RTN","RMPFET81",57,0)
RE1 D ARRAY2^RMPFDT2
"RTN","RMPFET81",58,0)
 S IT=$P(^RMPF(791810,RMPFX,101,RMPFY,0),U,1)
"RTN","RMPFET81",59,0)
 K DIC
"RTN","RMPFET81",60,0)
 S DIC="^RMPF(791811.2,",DIC(0)="AEQM",DIC("A")="Select Component: "
"RTN","RMPFET81",61,0)
 W ! D ^DIC G REMOVECE:Y=-1 S CP=+Y
"RTN","RMPFET81",62,0)
 S X=0 F I=1:1 S X=$O(RMPFC(X)) Q:'X  I $P(RMPFC(X),U,1)=CP G RE2
"RTN","RMPFET81",63,0)
 W $C(7),!!,"*** COMPONENT IS NOT LISTED IN ORDER ***" G RE1
"RTN","RMPFET81",64,0)
RE2 S RMPFZ=X,S0=^RMPF(791810,RMPFX,101,RMPFY,102,RMPFZ,0),X=CP
"RTN","RMPFET81",65,0)
 S DIC="^RMPF(791810,"_RMPFX_",101,"_RMPFY_",102,",DIC(0)="L"
"RTN","RMPFET81",66,0)
 S DA(2)=RMPFX,DA(1)=RMPFY,DLAYGO=791810 K DO,DD D FILE^DICN
"RTN","RMPFET81",67,0)
 I Y=-1 W $C(7),!!,"*** COMPONENT NOT DELETED ***" G REMOVECE
"RTN","RMPFET81",68,0)
 S RMPFZ1=+Y,S1=$P(^RMPF(791810,RMPFX,101,RMPFY,102,RMPFZ1,0),U,1)
"RTN","RMPFET81",69,0)
 S X="NOW",%DT="T" D ^%DT S TD=Y
"RTN","RMPFET81",70,0)
 S S1=S1_U_$P(S0,U,2)_"^D^"_RMPFZ_U_DUZ_U_TD_U_RMPFRE
"RTN","RMPFET81",71,0)
 S ^RMPF(791810,RMPFX,101,RMPFY,102,RMPFZ1,0)=S1 D STATUS
"RTN","RMPFET81",72,0)
 W !!,"*** COMPONENT REMOVED ***" H 2
"RTN","RMPFET81",73,0)
REMOVECE K DIC,CI,IT,Y,X,RMPFRE,S1,TD,RMPFC,RMPFZ,RMPFZ1,M,I,DDHT,DISYS,I,CP,DLAYGO Q
"RTN","RMPFET81",74,0)
REASON ;;Enter reason for adjustment
"RTN","RMPFET81",75,0)
 ;; input: None
"RTN","RMPFET81",76,0)
 ;;output: RMPFRE
"RTN","RMPFET81",77,0)
 W !!,"Enter the reason for the adjustment: " D READ Q:$D(RMPFOUT)
"RTN","RMPFET81",78,0)
REAS1 I $D(RMPFQUT) W !!,"Enter a free text reason of 3 to 17 characters." G REASON
"RTN","RMPFET81",79,0)
 I Y=""!($L(Y)<3)!($L(Y)>17) S RMPFQUT="" G REAS1
"RTN","RMPFET81",80,0)
 S RMPFRE=Y
"RTN","RMPFET81",81,0)
 K Y Q
"RTN","RMPFET81",82,0)
STATUS ;;Set status of line item
"RTN","RMPFET81",83,0)
 ;; input: RMPFX,RMPFY
"RTN","RMPFET81",84,0)
 ;;output: None
"RTN","RMPFET81",85,0)
 S X="NOW",%DT="T" D ^%DT S TD=Y,S0=$G(^RMPF(791810,RMPFX,101,RMPFY,0))
"RTN","RMPFET81",86,0)
 S AP=$P(S0,U,20) I 'AP S LA="A" G S2
"RTN","RMPFET81",87,0)
 S LA=$P(S0,U,19) I LA="" S LA="A" G S2
"RTN","RMPFET81",88,0)
 S LA=$S(LA="O":"A",LA'["A":LA_"A",1:LA)
"RTN","RMPFET81",89,0)
S2 S DIE="^RMPF(791810,"_RMPFX_",101,",DA(1)=RMPFX,DA=RMPFY
"RTN","RMPFET81",90,0)
 S DR=".19////"_LA_";.17////"_TD_";.2////1;.18///CERTIFICATION PENDING"
"RTN","RMPFET81",91,0)
 S X=$G(^RMPF(791810,RMPFX,101,RMPFY,90))
"RTN","RMPFET81",92,0)
 I X'="",$P(X,U,13) F I=8:1:11 S $P(^RMPF(791810,RMPFX,101,RMPFY,90),U,I)=""
"RTN","RMPFET81",93,0)
S3 D ^DIE
"RTN","RMPFET81",94,0)
 K S0,AP,LA,DIE,DR,D0,DA,DQ,D,DIC,DI,X,TD,%DT Q
"RTN","RMPFET81",95,0)
SURE W !!,"This item is currently NOT UNDER CONTRACT to the VA."
"RTN","RMPFET81",96,0)
 W !,"You may select this item in the adjustment option only."
"RTN","RMPFET81",97,0)
 W !!,"Make another selection? NO// " D READ Q:$D(RMPFOUT)
"RTN","RMPFET81",98,0)
SURE1 I $D(RMPFQUT) W !!,"Enter an <N> or <RETURN> to continue with this selection",!?7,"a <Y> to make another line item selection." G SURE
"RTN","RMPFET81",99,0)
 S:Y="" Y="N" I "NnYy"'[Y S RMPFQUT="" G SURE1
"RTN","RMPFET81",100,0)
 Q
"RTN","RMPFET81",101,0)
READ K RMPFOUT,RMPFQUT
"RTN","RMPFET81",102,0)
 R Y:DTIME I '$T W $C(7) R Y:5 G READ:Y="." S:'$T Y=U
"RTN","RMPFET81",103,0)
 I Y?1"^".E S (RMPFOUT,Y)="" Q
"RTN","RMPFET81",104,0)
 S:Y?1"?".E (RMPFQUT,Y)=""
"RTN","RMPFET81",105,0)
 Q
"RTN","RMPG9")
0^1^B37916102
"RTN","RMPG9",1,0)
RMPG9 ;DDC/JLR-ROES PATCH RMPF*2.0*20 [ 06/06/01  9:30 AM ]
"RTN","RMPG9",2,0)
 ;;2.0;REMOTE ORDER/ENTRY SYSTEM;**20**;MAY 30, 1995
"RTN","RMPG9",3,0)
 W @IOF,!,"ROES PATCH:  RMPF*2.0*20"
"RTN","RMPG9",4,0)
 W !!,"This patch will inactivate models under the old contract.  Only ROES users"
"RTN","RMPG9",5,0)
 W !,"must be off of the system while running this patch."
"RTN","RMPG9",6,0)
 W !!,"The only file impacted is:"
"RTN","RMPG9",7,0)
 W !!?10,"791811   - REMOTE INVENTORY PRODUCT"
"RTN","RMPG9",8,0)
 F IX=1:1:244 S SX=$T(MODEL+IX) Q:SX=""  S MD=$P(SX,";",3) Q:MD=""  S AR(MD)=""
"RTN","RMPG9",9,0)
 S RMPFX=0
"RTN","RMPG9",10,0)
 F I=1:1 S RMPFX=$O(^RMPF(791811,RMPFX)) Q:'RMPFX  D
"RTN","RMPG9",11,0)
 .Q:'$D(^RMPF(791811,RMPFX,0))
"RTN","RMPG9",12,0)
 .S X=$P(^RMPF(791811,RMPFX,0),U,3)
"RTN","RMPG9",13,0)
 .Q:'X
"RTN","RMPG9",14,0)
 .S NM=$P(^RMPF(791811,RMPFX,0),U,1)
"RTN","RMPG9",15,0)
 .Q:NM=""
"RTN","RMPG9",16,0)
 .Q:'$D(^RMPF(791811.1,X,0))  Q:$P(^(0),U,1)'="CUSTOM HEARING AIDS"
"RTN","RMPG9",17,0)
 .Q:$D(AR(NM))
"RTN","RMPG9",18,0)
 .S DIE="^RMPF(791811,",DA=RMPFX,DR="999////1" D ^DIE W "."
"RTN","RMPG9",19,0)
 .K ^RMPF(791811,RMPFX,101)
"RTN","RMPG9",20,0)
 .K ^RMPF(791811,RMPFX,102)
"RTN","RMPG9",21,0)
END K IX,SX,MD,AR,X,NM,DA,DR,DIE,RMPFX,I
"RTN","RMPG9",22,0)
 Q
"RTN","RMPG9",23,0)
MODEL ;;ALL MODELS
"RTN","RMPG9",24,0)
 ;;FULL
"RTN","RMPG9",25,0)
 ;;FULL OPT 1
"RTN","RMPG9",26,0)
 ;;FULL OPT 2
"RTN","RMPG9",27,0)
 ;;FULL OPT 3
"RTN","RMPG9",28,0)
 ;;HALF
"RTN","RMPG9",29,0)
 ;;HALF OPT 1
"RTN","RMPG9",30,0)
 ;;HALF OPT 2
"RTN","RMPG9",31,0)
 ;;HALF OPT 3
"RTN","RMPG9",32,0)
 ;;CANAL
"RTN","RMPG9",33,0)
 ;;CANAL OPT 1
"RTN","RMPG9",34,0)
 ;;CANAL OPT 2
"RTN","RMPG9",35,0)
 ;;CIC;
"RTN","RMPG9",36,0)
 ;;CIC OPT 1
"RTN","RMPG9",37,0)
 ;;CIC OPT 2
"RTN","RMPG9",38,0)
 ;;CIC OPT 3
"RTN","RMPG9",39,0)
 ;;FULL SS
"RTN","RMPG9",40,0)
 ;;FULL SM
"RTN","RMPG9",41,0)
 ;;FULL MS;
"RTN","RMPG9",42,0)
 ;;FULL MM
"RTN","RMPG9",43,0)
 ;;HALF SS
"RTN","RMPG9",44,0)
 ;;HALF SM
"RTN","RMPG9",45,0)
 ;;HALF MS
"RTN","RMPG9",46,0)
 ;;HALF MM
"RTN","RMPG9",47,0)
 ;;CANAL SS
"RTN","RMPG9",48,0)
 ;;CANAL SM
"RTN","RMPG9",49,0)
 ;;CANAL MS
"RTN","RMPG9",50,0)
 ;;CANAL MM
"RTN","RMPG9",51,0)
 ;;CIC SS
"RTN","RMPG9",52,0)
 ;;CIC SM
"RTN","RMPG9",53,0)
 ;;CIC MS
"RTN","RMPG9",54,0)
 ;;CIC MM
"RTN","RMPG9",55,0)
 ;;BTE UNITRON SM
"RTN","RMPG9",56,0)
 ;;BTE UNITRON MS
"RTN","RMPG9",57,0)
 ;;BTE UNITRON MM
"RTN","RMPG9",58,0)
 ;;OPUS2 ITE
"RTN","RMPG9",59,0)
 ;;OPUS2 ITE OPT 1
"RTN","RMPG9",60,0)
 ;;OPUS2 ITE OPT 2
"RTN","RMPG9",61,0)
 ;;OPUS2 ITE OPT 3
"RTN","RMPG9",62,0)
 ;;OPUS2 HS
"RTN","RMPG9",63,0)
 ;;OPUS2 HS OPT 1
"RTN","RMPG9",64,0)
 ;;OPUS2 HS OPT 2
"RTN","RMPG9",65,0)
 ;;OPUS2 HS OPT 3
"RTN","RMPG9",66,0)
 ;;OPUS2 ITC
"RTN","RMPG9",67,0)
 ;;OPUS2 ITC OPT 1
"RTN","RMPG9",68,0)
 ;;OPUS2 ITC OPT 2
"RTN","RMPG9",69,0)
 ;;OPUS2 ITC OPT 3
"RTN","RMPG9",70,0)
 ;;OPUS2 CIC
"RTN","RMPG9",71,0)
 ;;OPUS2 CIC OPT 1
"RTN","RMPG9",72,0)
 ;;OPUS2 CIC OPT 2
"RTN","RMPG9",73,0)
 ;;OPUS2 CIC OPT 3
"RTN","RMPG9",74,0)
 ;;ERGO ITE SS
"RTN","RMPG9",75,0)
 ;;AUDIOFLEX ITE SM
"RTN","RMPG9",76,0)
 ;;DUALINE ITE MS
"RTN","RMPG9",77,0)
 ;;ERGO HS SS
"RTN","RMPG9",78,0)
 ;;AUDIOFLEX HS SM
"RTN","RMPG9",79,0)
 ;;DUALINE HS MS
"RTN","RMPG9",80,0)
 ;;ERGO ITC SS
"RTN","RMPG9",81,0)
 ;;AUDIOFLEX ITC SM
"RTN","RMPG9",82,0)
 ;;DUALINE ITC MS
"RTN","RMPG9",83,0)
 ;;ERGO CIC SS
"RTN","RMPG9",84,0)
 ;;AUDIOFLEX CIC SM
"RTN","RMPG9",85,0)
 ;;DUALINE CIC MS
"RTN","RMPG9",86,0)
 ;;ERGO BTE SS
"RTN","RMPG9",87,0)
 ;;ERGO BTE POWER SS
"RTN","RMPG9",88,0)
 ;;SWIFT 90 SS
"RTN","RMPG9",89,0)
 ;;AUDIOFLEX 100 SM
"RTN","RMPG9",90,0)
 ;;AUDIOFLEX 110 SM
"RTN","RMPG9",91,0)
 ;;AUDIOFLEX 110D SM
"RTN","RMPG9",92,0)
 ;;AUDIOFLEX 120 SM
"RTN","RMPG9",93,0)
 ;;RDC11 HEARING AID REMOTE
"RTN","RMPG9",94,0)
 ;;FULL SHELL ITE
"RTN","RMPG9",95,0)
 ;;FULL SHELL ITE OPT 1
"RTN","RMPG9",96,0)
 ;;FULL SHELL ITE OPT 2
"RTN","RMPG9",97,0)
 ;;FULL SHELL ITE OPT 3
"RTN","RMPG9",98,0)
 ;;HALF SHELL
"RTN","RMPG9",99,0)
 ;;HALF SHELL OPT 1
"RTN","RMPG9",100,0)
 ;;HALF SHELL OPT 2
"RTN","RMPG9",101,0)
 ;;HALF SHELL OPT 3
"RTN","RMPG9",102,0)
 ;;CANAL
"RTN","RMPG9",103,0)
 ;;CANAL OPT 1
"RTN","RMPG9",104,0)
 ;;CANAL OPT 2
"RTN","RMPG9",105,0)
 ;;CANAL OPT 3
"RTN","RMPG9",106,0)
 ;;TRU-CANAL CIC
"RTN","RMPG9",107,0)
 ;;TRU-CANAL CIC OPT 1
"RTN","RMPG9",108,0)
 ;;TRU-CANAL CIC OPT 2
"RTN","RMPG9",109,0)
 ;;TRU-CANAL CIC OPT 3
"RTN","RMPG9",110,0)
 ;;FULL SHELL ITE SS
"RTN","RMPG9",111,0)
 ;;FULL SHELL ITE MS
"RTN","RMPG9",112,0)
 ;;FULL SHELL ITE MM
"RTN","RMPG9",113,0)
 ;;HALF SHELL SS
"RTN","RMPG9",114,0)
 ;;HALF SHELL MS
"RTN","RMPG9",115,0)
 ;;HALF SHELL MM
"RTN","RMPG9",116,0)
 ;;CANAL SS
"RTN","RMPG9",117,0)
 ;;CANAL MS
"RTN","RMPG9",118,0)
 ;;CANAL MM
"RTN","RMPG9",119,0)
 ;;TRU-CANAL CIC SS
"RTN","RMPG9",120,0)
 ;;TRU-CANAL CIC MS
"RTN","RMPG9",121,0)
 ;;9100
"RTN","RMPG9",122,0)
 ;;9100 OPT 1
"RTN","RMPG9",123,0)
 ;;9100 OPT 2
"RTN","RMPG9",124,0)
 ;;9100 OPT 3
"RTN","RMPG9",125,0)
 ;;9300
"RTN","RMPG9",126,0)
 ;;9300 OPT 1
"RTN","RMPG9",127,0)
 ;;9300 OPT 2
"RTN","RMPG9",128,0)
 ;;9300 OPT 3
"RTN","RMPG9",129,0)
 ;;9800
"RTN","RMPG9",130,0)
 ;;9800 OPT 1
"RTN","RMPG9",131,0)
 ;;9800 OPT 2
"RTN","RMPG9",132,0)
 ;;9800 OPT 3
"RTN","RMPG9",133,0)
 ;;INCA
"RTN","RMPG9",134,0)
 ;;INCA OPT 1
"RTN","RMPG9",135,0)
 ;;INCA OPT 2
"RTN","RMPG9",136,0)
 ;;FS ASTRO SC+ART SS
"RTN","RMPG9",137,0)
 ;;FS ASTRO SC+ART SM
"RTN","RMPG9",138,0)
 ;;FS ASTRO MC-WDRC MS
"RTN","RMPG9",139,0)
 ;;FS ASTRO MC-WDRC MM
"RTN","RMPG9",140,0)
 ;;HS ASTRO SC+ART SS
"RTN","RMPG9",141,0)
 ;;MICROZOOM P2 AZ SM
"RTN","RMPG9",142,0)
 ;;HS ASTRO MC-WDRC MS
"RTN","RMPG9",143,0)
 ;;HS ASTRO MC-WDRC MM
"RTN","RMPG9",144,0)
 ;;CA ASTRO SC+ART SS
"RTN","RMPG9",145,0)
 ;;CA ASTRO SC+ART SM
"RTN","RMPG9",146,0)
 ;;CA ASTRO MC-WDRC MS
"RTN","RMPG9",147,0)
 ;;CA ASTRO MC-WDRC MM
"RTN","RMPG9",148,0)
 ;;CIC ASTRO SC+ART SS
"RTN","RMPG9",149,0)
 ;;CIC ASTRO SC+ART SM
"RTN","RMPG9",150,0)
 ;;CIC ASTRO MC-WDRC MS
"RTN","RMPG9",151,0)
 ;;CIC ASTRO MC-WDRC MM
"RTN","RMPG9",152,0)
 ;;NOVOFORTE E4 SM
"RTN","RMPG9",153,0)
 ;;PICONET 2P2 AZ SM
"RTN","RMPG9",154,0)
 ;;POWERZOOM P4 AZ SM
"RTN","RMPG9",155,0)
 ;;SONOFORTE 2P3 AZ SM
"RTN","RMPG9",156,0)
 ;;DHC2 REMOTE
"RTN","RMPG9",157,0)
 ;;DHC3 EPROM REMOTE
"RTN","RMPG9",158,0)
 ;;DHC4 SLIMLINE REMOTE
"RTN","RMPG9",159,0)
 ;;LIFESOUND ITE
"RTN","RMPG9",160,0)
 ;;LIFESOUND ITE OPT 1
"RTN","RMPG9",161,0)
 ;;LIFESOUND ITE OPT 2
"RTN","RMPG9",162,0)
 ;;LIFESOUND ITE OPT 3
"RTN","RMPG9",163,0)
 ;;LIFESOUND HS
"RTN","RMPG9",164,0)
 ;;LIFESOUND HS OPT 1
"RTN","RMPG9",165,0)
 ;;LIFESOUND HS OPT 2
"RTN","RMPG9",166,0)
 ;;LIFESOUND CA
"RTN","RMPG9",167,0)
 ;;LIFESOUND CA OPT 1
"RTN","RMPG9",168,0)
 ;;LIFESOUND CA OPT 2
"RTN","RMPG9",169,0)
 ;;LIFESOUND CIC
"RTN","RMPG9",170,0)
 ;;LIFESOUND CIC OPT 1
"RTN","RMPG9",171,0)
 ;;LIFESOUND ITE SS
"RTN","RMPG9",172,0)
 ;;LIFESOUND ITE SM
"RTN","RMPG9",173,0)
 ;;LIFESOUND ITE MS
"RTN","RMPG9",174,0)
 ;;LIFESOUND ITE MM
"RTN","RMPG9",175,0)
 ;;LIFESOUND HS SS
"RTN","RMPG9",176,0)
 ;;LIFESOUND HS SM
"RTN","RMPG9",177,0)
 ;;LIFESOUND HS MS
"RTN","RMPG9",178,0)
 ;;LIFESOUND HS MM
"RTN","RMPG9",179,0)
 ;;LIFESOUND CA SS
"RTN","RMPG9",180,0)
 ;;LIFESOUND CA SM
"RTN","RMPG9",181,0)
 ;;LIFESOUND CA MS
"RTN","RMPG9",182,0)
 ;;LIFESOUND CA MM
"RTN","RMPG9",183,0)
 ;;LIFESOUND CIC SS
"RTN","RMPG9",184,0)
 ;;LIFESOUND CIC SM
"RTN","RMPG9",185,0)
 ;;LIFESOUND CIC MS
"RTN","RMPG9",186,0)
 ;;LIFESOUND CIC MM
"RTN","RMPG9",187,0)
 ;;INFINITI 3 BTE SS
"RTN","RMPG9",188,0)
 ;;INFINITI 3 BTE SM
"RTN","RMPG9",189,0)
 ;;MUSIC BTE MS
"RTN","RMPG9",190,0)
 ;;MUSIC BTE MM
"RTN","RMPG9",191,0)
 ;;CE 9
"RTN","RMPG9",192,0)
 ;;CE 9 OPT 1
"RTN","RMPG9",193,0)
 ;;CE 9 OPT 2
"RTN","RMPG9",194,0)
 ;;CE 9 OPT 3
"RTN","RMPG9",195,0)
 ;;CE H9
"RTN","RMPG9",196,0)
 ;;CE H9 OPT 1
"RTN","RMPG9",197,0)
 ;;CE H9 OPT 2
"RTN","RMPG9",198,0)
 ;;CE H9 OPT 3
"RTN","RMPG9",199,0)
 ;;SA C9
"RTN","RMPG9",200,0)
 ;;SA C9 OPT 1
"RTN","RMPG9",201,0)
 ;;SA C9 OPT 2
"RTN","RMPG9",202,0)
 ;;SA C9 OPT 3
"RTN","RMPG9",203,0)
 ;;SA T9
"RTN","RMPG9",204,0)
 ;;SA T9 OPT 1
"RTN","RMPG9",205,0)
 ;;SA T9 OPT 2
"RTN","RMPG9",206,0)
 ;;SA T9 OPT 3
"RTN","RMPG9",207,0)
 ;;CE Q SS
"RTN","RMPG9",208,0)
 ;;CE Q SM
"RTN","RMPG9",209,0)
 ;;CE Q MS
"RTN","RMPG9",210,0)
 ;;CE Q MM
"RTN","RMPG9",211,0)
 ;;CE HQ SS
"RTN","RMPG9",212,0)
 ;;CE HQ SM
"RTN","RMPG9",213,0)
 ;;CE HQ MS
"RTN","RMPG9",214,0)
 ;;CE HQ MM
"RTN","RMPG9",215,0)
 ;;SA CQ SS
"RTN","RMPG9",216,0)
 ;;SA CQ SM
"RTN","RMPG9",217,0)
 ;;SA CQ MS
"RTN","RMPG9",218,0)
 ;;SA CQ MM
"RTN","RMPG9",219,0)
 ;;SA TQ SS
"RTN","RMPG9",220,0)
 ;;SA TQ SM
"RTN","RMPG9",221,0)
 ;;SA TQ MS
"RTN","RMPG9",222,0)
 ;;SA TQ MM
"RTN","RMPG9",223,0)
 ;;A13 SS
"RTN","RMPG9",224,0)
 ;;A13 SM
"RTN","RMPG9",225,0)
 ;;A13AV SM
"RTN","RMPG9",226,0)
 ;;A13 MS
"RTN","RMPG9",227,0)
 ;;A675AV MM
"RTN","RMPG9",228,0)
 ;;A13SEQ MM
"RTN","RMPG9",229,0)
 ;;FULL SHELL
"RTN","RMPG9",230,0)
 ;;FULL SHELL OPT 1
"RTN","RMPG9",231,0)
 ;;FULL SHELL OPT 2
"RTN","RMPG9",232,0)
 ;;FULL SHELL OPT 3
"RTN","RMPG9",233,0)
 ;;HALF SHELL
"RTN","RMPG9",234,0)
 ;;HALF SHELL OPT 1
"RTN","RMPG9",235,0)
 ;;HALF SHELL OPT 2
"RTN","RMPG9",236,0)
 ;;HALF SHELL OPT 3
"RTN","RMPG9",237,0)
 ;;CANAL
"RTN","RMPG9",238,0)
 ;;CANAL OPT 1
"RTN","RMPG9",239,0)
 ;;CANAL OPT 2
"RTN","RMPG9",240,0)
 ;;CANAL OPT 3
"RTN","RMPG9",241,0)
 ;;CIC
"RTN","RMPG9",242,0)
 ;;CIC OPT 1
"RTN","RMPG9",243,0)
 ;;CIC OPT 2
"RTN","RMPG9",244,0)
 ;;CIC OPT 3
"RTN","RMPG9",245,0)
 ;;FULL SHELL SS
"RTN","RMPG9",246,0)
 ;;FULL SHELL SM
"RTN","RMPG9",247,0)
 ;;FULL SHELL MS
"RTN","RMPG9",248,0)
 ;;FULL SHELL MM
"RTN","RMPG9",249,0)
 ;;HALF SHELL SS
"RTN","RMPG9",250,0)
 ;;HALF SHELL SM
"RTN","RMPG9",251,0)
 ;;HALF SHELL MS
"RTN","RMPG9",252,0)
 ;;HALF SHELL MM
"RTN","RMPG9",253,0)
 ;;CANAL SS
"RTN","RMPG9",254,0)
 ;;CANAL SM
"RTN","RMPG9",255,0)
 ;;CANAL MS
"RTN","RMPG9",256,0)
 ;;CANAL MM
"RTN","RMPG9",257,0)
 ;;CIC SS
"RTN","RMPG9",258,0)
 ;;CIC SM
"RTN","RMPG9",259,0)
 ;;CIC MS
"RTN","RMPG9",260,0)
 ;;CIC MM
"RTN","RMPG9",261,0)
 ;;BTE SM
"RTN","RMPG9",262,0)
 ;;BTE MS
"RTN","RMPG9",263,0)
 ;;BTE MM
"RTN","RMPG9",264,0)
 ;;WIRELESS BICROS
"RTN","RMPG9",265,0)
 ;;WIRELESS BICROS OPT 1
"RTN","RMPG9",266,0)
 ;;WIRELESS CROS
"RTN","RMPG9",267,0)
 ;;WIRELESS CROS OPT 1
"VER")
8.0^22.0
**END**
**END**

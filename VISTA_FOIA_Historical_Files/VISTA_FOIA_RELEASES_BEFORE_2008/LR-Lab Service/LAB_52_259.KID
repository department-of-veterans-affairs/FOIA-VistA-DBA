KIDS Distribution saved on Mar 17, 2004@12:50:27
PATCH LR*5.2*259
**KIDS**:LR*5.2*259^

**INSTALL NAME**
LR*5.2*259
"BLD",3910,0)
LR*5.2*259^LAB SERVICE^0^3040317^y
"BLD",3910,1,0)
^^122^122^3030114^^^^
"BLD",3910,1,1,0)
Description:
"BLD",3910,1,2,0)
===========
"BLD",3910,1,3,0)

"BLD",3910,1,4,0)
This patch to the Laboratory package does not contain any changes to the 
"BLD",3910,1,5,0)
VISTA BLOOD BANK Software as defined by the VHA DIRECTIVE 99-053 titled 
"BLD",3910,1,6,0)
VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"BLD",3910,1,7,0)

"BLD",3910,1,8,0)
VISTA Laboratory Anatomic Pathology Electronic Signature (Patch LR*5.2*259) 
"BLD",3910,1,9,0)
software release implements the new electronic signature functionality 
"BLD",3910,1,10,0)
within the Autopsy, Cytology, Electron Microscopy, and Surgical Pathology 
"BLD",3910,1,11,0)
sections for the Autopsy protocol, Standard Form 515 (SF 515), and 
"BLD",3910,1,12,0)
supplementary reports. This new electronic signature functionality can be 
"BLD",3910,1,13,0)
to activated or deactivated by the discretion of the site. The new Turn 
"BLD",3910,1,14,0)
Electronic Signature On/Off [LRAP ESIG SWITCH] option is used to activate 
"BLD",3910,1,15,0)
or deactivate the new electronic signature functionality. The electronic 
"BLD",3910,1,16,0)
signature functionality is activated during the verification/release 
"BLD",3910,1,17,0)
process of the Autopsy and AP reports. 
"BLD",3910,1,18,0)

"BLD",3910,1,19,0)
Pathologists may now view and electronically sign reports rather than 
"BLD",3910,1,20,0)
printing a paper copy for viewing and signature. The electronic signature 
"BLD",3910,1,21,0)
name is obtained from the NEW PERSON file (#200), ELECTRONIC SIGNATURE CODE 
"BLD",3910,1,22,0)
field (#20.4). All electronically signed released reports are stored in TIU 
"BLD",3910,1,23,0)
containing the electronic signature name, date, and time displayed on the 
"BLD",3910,1,24,0)
last page of the reports (near the bottom). Only authorized users are 
"BLD",3910,1,25,0)
allowed to electronically sign reports. Non-authorized users will receive a 
"BLD",3910,1,26,0)
message indicating that they are not authorized to electronically sign 
"BLD",3910,1,27,0)
reports.
"BLD",3910,1,28,0)

"BLD",3910,1,29,0)
  
"BLD",3910,1,30,0)
ASSOCIATED NOIS
"BLD",3910,1,31,0)
===============
"BLD",3910,1,32,0)
ALB-0501-50221         e-sig for Surgical Pathology Report
"BLD",3910,1,33,0)
ANN-1195-41047         Can release anatomic report without pathologist's 
"BLD",3910,1,34,0)
                               name
"BLD",3910,1,35,0)
ASH-0400-31745         CONFLICT  LAB VS PATCH XU*8*134
"BLD",3910,1,36,0)
CHA-0601-30916         Anatomic Path result alerts
"BLD",3910,1,37,0)
DAY-0201-40571         LR*5.2*248 - Verification of AP Supplemental
"BLD",3910,1,38,0)
DET-0301-42098         Installed patch LR*5.2*248
"BLD",3910,1,39,0)
FTL-1000-52712         QUESTION                       
"BLD",3910,1,40,0)
IND-0501-42474         Error when trying to delete supplemental report 
"BLD",3910,1,41,0)
                               date
"BLD",3910,1,42,0)
JAC-0302-70436         Autopsy Reports
"BLD",3910,1,43,0)
LOU-0400-42255         Modified Report not showing    
"BLD",3910,1,44,0)
MAN-0100-11108         Supplemental report changes completion date in AP
"BLD",3910,1,45,0)
MAN-0301-10830         MD DISPLAY ON PATH REPORTS     
"BLD",3910,1,46,0)
MIN-0500-41991         PAP test limitations
"BLD",3910,1,47,0)
MIW-0497-40185         PROVIDER NAME OVER 30 CHARACTERS
"BLD",3910,1,48,0)
MOU-1101-32590         Autopsy type OTHER LIMITATIONS causes print problem
"BLD",3910,1,49,0)
MUS-0997-70156         Need to edit path date     
"BLD",3910,1,50,0)
PHI-0601-20384         Undefined variable [LRAPR
"BLD",3910,1,51,0)
PUG-0700-52652         Need view alert for anatomic path result
"BLD",3910,1,52,0)
SAM-0301-22193         SP REPORT FOOTER CONTAINS ADM: AND DX: TEXT FOR 
"BLD",3910,1,53,0)
                               INPATIENTS
"BLD",3910,1,54,0)
SDC-1101-61043         AP Reports - MODIFIED report
"BLD",3910,1,55,0)
SHE-0499-50108         CPRS Interface with Anat Pathology for 
"BLD",3910,1,56,0)
                               Notifications?
"BLD",3910,1,57,0)
SPO-0701-50733         Alert for pathology        
"BLD",3910,1,58,0)
WIC-0899-42604         REVERIFY RE'D AFTER VIEWING ANAT'L REPORT
"BLD",3910,1,59,0)
WIC-1298-42147         Autopsy verification needs locked
"BLD",3910,1,60,0)
 
"BLD",3910,1,61,0)
E3R:      4892         NO SUPPLEMENTARY REPORT TO RELEASE' PROMPT
"BLD",3910,1,62,0)
          5572         ELECTRONIC SIGNATURE FOR AP
"BLD",3910,1,63,0)
          5995         SPECIMEN/DX FOR PATHOLOGIST VERIFICATION
"BLD",3910,1,64,0)
          5592         RELEASE DATE ADDED TO ANATOMIC PATHOLOGY REPORTS
"BLD",3910,1,65,0)
          6208         TECH TITLES
"BLD",3910,1,66,0)
          6566         ANATOMIC PATH VIEW ALERT
"BLD",3910,1,67,0)
          7059         CODING DOES NOT PRINT
"BLD",3910,1,68,0)
          7536         CHANGE PATHOLOGIST AFTER REPORT VERIFIED
"BLD",3910,1,69,0)
          9245         AUTOPSY RELEASE PROBLEM
"BLD",3910,1,70,0)
          9447         ANATOMICAL PATH ALERT IS NOT FUNCTION
"BLD",3910,1,71,0)
          9592         RELEASE DATE ADDED TO ANATOMIC PATHOLOGY REPORTS
"BLD",3910,1,72,0)
         12872         ELECTRONIC SIGNING ANATOMIC PATH RPT
"BLD",3910,1,73,0)
         14775         PATHOLOGY REPORT LOCK
"BLD",3910,1,74,0)
         15456         NEED ELECTRONIC SIGNATURE
"BLD",3910,1,75,0)
         15643         REQUEST CHANGES AFTER PATCH 248                   
"BLD",3910,1,76,0)
         17034         AP REPORT FORMAT IGNORED BY CERTAIN CPRS DISPLAYS
"BLD",3910,1,77,0)
           
"BLD",3910,1,78,0)
    
"BLD",3910,1,79,0)
TEST SITES
"BLD",3910,1,80,0)
==========
"BLD",3910,1,81,0)
  Bay Pines VAMC
"BLD",3910,1,82,0)
  Boston HCS
"BLD",3910,1,83,0)
  Desert Pacific Healthcare Network
"BLD",3910,1,84,0)
  Durham VAMC
"BLD",3910,1,85,0)
  Eastern Colorado HCS
"BLD",3910,1,86,0)
  Jackson VAMC
"BLD",3910,1,87,0)
  Milwaukee VAMC
"BLD",3910,1,88,0)
  Muskogee VAMC
"BLD",3910,1,89,0)
  North Chicago VAMC
"BLD",3910,1,90,0)
  North Florida/South Georgia HCS
"BLD",3910,1,91,0)
  Roudebush VAMC
"BLD",3910,1,92,0)
  San Francisco VAMC
"BLD",3910,1,93,0)
  VA Heartland East HCS
"BLD",3910,1,94,0)
  VA Western New York HCS
"BLD",3910,1,95,0)
 
"BLD",3910,1,96,0)
 
"BLD",3910,1,97,0)
SOFTWARE RETRIEVAL:
"BLD",3910,1,98,0)
===================
"BLD",3910,1,99,0)
  
"BLD",3910,1,100,0)
The following software and documentation files are exported as part of
"BLD",3910,1,101,0)
this patch:
"BLD",3910,1,102,0)
  
"BLD",3910,1,103,0)
     File Name           Contents                         Retrieval Format
"BLD",3910,1,104,0)
     ---------           --------                         ----------------
"BLD",3910,1,105,0)
     LR_52_259.KID       LR*5.2*259 KIDS build                 ASCII
"BLD",3910,1,106,0)
  
"BLD",3910,1,107,0)
The software files are available on one of the following OI Field Offices'
"BLD",3910,1,108,0)
ANONYMOUS.SOFTWARE directories.
"BLD",3910,1,109,0)
  
"BLD",3910,1,110,0)
All sites are encouraged to use their FTP capability to obtain these files.
"BLD",3910,1,111,0)
Use the FTP address "download.vista.med.va.gov" (without the quotes) to
"BLD",3910,1,112,0)
connect to the first available FTP server where the files are located.
"BLD",3910,1,113,0)
  
"BLD",3910,1,114,0)
     OI FIELD OFFICE    FTP ADDRESS                DIRECTORY
"BLD",3910,1,115,0)
     ===============    ===========                =========
"BLD",3910,1,116,0)
     ALBANY             ftp.fo-albany.med.va.gov   [ANONYMOUS.SOFTWARE]
"BLD",3910,1,117,0)
     HINES              ftp.fo-hines.med.va.gov    [ANONYMOUS.SOFTWARE]
"BLD",3910,1,118,0)
     SALT LAKE          ftp.fo-slc.med.va.gov      [ANONYMOUS.SOFTWARE]
"BLD",3910,1,119,0)
 
"BLD",3910,1,120,0)

"BLD",3910,1,121,0)

"BLD",3910,1,122,0)

"BLD",3910,4,0)
^9.64PA^69.9^2
"BLD",3910,4,63,0)
63
"BLD",3910,4,63,2,0)
^9.641^63.09^4
"BLD",3910,4,63,2,63,0)
LAB DATA  (File-top level)
"BLD",3910,4,63,2,63,1,0)
^9.6411^^0
"BLD",3910,4,63,2,63.02,0)
EM  (sub-file)
"BLD",3910,4,63,2,63.02,1,0)
^9.6411^^0
"BLD",3910,4,63,2,63.08,0)
SURGICAL PATHOLOGY  (sub-file)
"BLD",3910,4,63,2,63.08,1,0)
^9.6411^^0
"BLD",3910,4,63,2,63.09,0)
CYTOPATHOLOGY  (sub-file)
"BLD",3910,4,63,2,63.09,1,0)
^9.6411^^0
"BLD",3910,4,63,222)
y^y^p^^^^n
"BLD",3910,4,69.9,0)
69.9
"BLD",3910,4,69.9,2,0)
^9.641^69.9^1
"BLD",3910,4,69.9,2,69.9,0)
LABORATORY SITE  (File-top level)
"BLD",3910,4,69.9,2,69.9,1,0)
^9.6411^619^1
"BLD",3910,4,69.9,2,69.9,1,619,0)
AP ESIG ON
"BLD",3910,4,69.9,222)
y^y^p^^^^n
"BLD",3910,4,"APDD",63,63)

"BLD",3910,4,"APDD",63,63.02)

"BLD",3910,4,"APDD",63,63.08)

"BLD",3910,4,"APDD",63,63.09)

"BLD",3910,4,"APDD",69.9,69.9)

"BLD",3910,4,"APDD",69.9,69.9,619)

"BLD",3910,4,"B",63,63)

"BLD",3910,4,"B",69.9,69.9)

"BLD",3910,"INI")
PRE^LR259
"BLD",3910,"INIT")
POST^LR259
"BLD",3910,"KRN",0)
^9.67PA^8989.52^19
"BLD",3910,"KRN",.4,0)
.4
"BLD",3910,"KRN",.401,0)
.401
"BLD",3910,"KRN",.402,0)
.402
"BLD",3910,"KRN",.403,0)
.403
"BLD",3910,"KRN",.5,0)
.5
"BLD",3910,"KRN",.84,0)
.84
"BLD",3910,"KRN",3.6,0)
3.6
"BLD",3910,"KRN",3.8,0)
3.8
"BLD",3910,"KRN",9.2,0)
9.2
"BLD",3910,"KRN",9.8,0)
9.8
"BLD",3910,"KRN",9.8,"NM",0)
^9.68A^54^54
"BLD",3910,"KRN",9.8,"NM",1,0)
LRAP^^0^B13785163
"BLD",3910,"KRN",9.8,"NM",2,0)
LRAPAUPT^^0^B549599
"BLD",3910,"KRN",9.8,"NM",3,0)
LRAPAUSR^^0^B34065623
"BLD",3910,"KRN",9.8,"NM",4,0)
LRAPBR^^0^B6339003
"BLD",3910,"KRN",9.8,"NM",5,0)
LRAPBR1^^0^B54673575
"BLD",3910,"KRN",9.8,"NM",6,0)
LRAPBR2^^0^B16252216
"BLD",3910,"KRN",9.8,"NM",7,0)
LRAPBR3^^0^B13308643
"BLD",3910,"KRN",9.8,"NM",8,0)
LRAPBR4^^0^B30127062
"BLD",3910,"KRN",9.8,"NM",9,0)
LRAPBR5^^0^B45647218
"BLD",3910,"KRN",9.8,"NM",10,0)
LRAPBRPW^^0^B10053434
"BLD",3910,"KRN",9.8,"NM",11,0)
LRAPD^^0^B2434474
"BLD",3910,"KRN",9.8,"NM",12,0)
LRAPD1^^0^B24077474
"BLD",3910,"KRN",9.8,"NM",13,0)
LRAPDA^^0^B63353381
"BLD",3910,"KRN",9.8,"NM",14,0)
LRAPDSR^^0^B17451270
"BLD",3910,"KRN",9.8,"NM",15,0)
LRAPED^^0^B19288730
"BLD",3910,"KRN",9.8,"NM",16,0)
LRAPEDC^^0^B5405480
"BLD",3910,"KRN",9.8,"NM",17,0)
LRAPESON^^0^B2992765
"BLD",3910,"KRN",9.8,"NM",18,0)
LRAPF^^0^B3081199
"BLD",3910,"KRN",9.8,"NM",19,0)
LRAPLG^^0^B7969847
"BLD",3910,"KRN",9.8,"NM",20,0)
LRAPMRL^^0^B65679955
"BLD",3910,"KRN",9.8,"NM",21,0)
LRAPMRL1^^0^B15484610
"BLD",3910,"KRN",9.8,"NM",22,0)
LRAPP^^0^B6044065
"BLD",3910,"KRN",9.8,"NM",23,0)
LRAPPF1^^0^B17831632
"BLD",3910,"KRN",9.8,"NM",24,0)
LRAPPOW^^0^B8567530
"BLD",3910,"KRN",9.8,"NM",25,0)
LRAPR^^0^B89817361
"BLD",3910,"KRN",9.8,"NM",26,0)
LRAPRES^^0^B102454519
"BLD",3910,"KRN",9.8,"NM",27,0)
LRAPRES1^^0^B40373155
"BLD",3910,"KRN",9.8,"NM",28,0)
LRAPSNMD^^0^B27418160
"BLD",3910,"KRN",9.8,"NM",29,0)
LRAPT1^^0^B1775792
"BLD",3910,"KRN",9.8,"NM",30,0)
LRAPT2^^0^B29549300
"BLD",3910,"KRN",9.8,"NM",31,0)
LRAPT3^^0^B2676661
"BLD",3910,"KRN",9.8,"NM",32,0)
LRAPTIUP^^0^B26816671
"BLD",3910,"KRN",9.8,"NM",33,0)
LRAPUTL^^0^B65239334
"BLD",3910,"KRN",9.8,"NM",34,0)
LRAPV^^0^B13932043
"BLD",3910,"KRN",9.8,"NM",35,0)
LRAPX^^0^B5097427
"BLD",3910,"KRN",9.8,"NM",36,0)
LRAUDA^^0^B5033846
"BLD",3910,"KRN",9.8,"NM",37,0)
LRAURPT^^0^B57247419
"BLD",3910,"KRN",9.8,"NM",38,0)
LRSPRPT^^0^B88845330
"BLD",3910,"KRN",9.8,"NM",39,0)
LRSPRPT1^^0^B10408921
"BLD",3910,"KRN",9.8,"NM",40,0)
LRSPRPT2^^0^B13274845
"BLD",3910,"KRN",9.8,"NM",41,0)
LRSPT^^0^B12494115
"BLD",3910,"KRN",9.8,"NM",42,0)
LRUA^^0^B10679727
"BLD",3910,"KRN",9.8,"NM",43,0)
LRUPS^^0^B8185987
"BLD",3910,"KRN",9.8,"NM",44,0)
LRAPFICH^^0^B8356436
"BLD",3910,"KRN",9.8,"NM",45,0)
LRAPBS1^^0^B14125023
"BLD",3910,"KRN",9.8,"NM",46,0)
LR7OSAP^^0^B34114559
"BLD",3910,"KRN",9.8,"NM",47,0)
LR7OSAP1^^0^B24974232
"BLD",3910,"KRN",9.8,"NM",48,0)
LR7OSAP2^^0^B52834321
"BLD",3910,"KRN",9.8,"NM",49,0)
LR7OSAP3^^0^B13148912
"BLD",3910,"KRN",9.8,"NM",50,0)
LRAPMV^^0^B13721590
"BLD",3910,"KRN",9.8,"NM",51,0)
LRAPMOD^^0^B16465841
"BLD",3910,"KRN",9.8,"NM",52,0)
LRAPS1^^0^B11430468
"BLD",3910,"KRN",9.8,"NM",53,0)
LRAPCUM^^0^B21346716
"BLD",3910,"KRN",9.8,"NM",54,0)
LRCAPES^^0^B74040726
"BLD",3910,"KRN",9.8,"NM","B","LR7OSAP",46)

"BLD",3910,"KRN",9.8,"NM","B","LR7OSAP1",47)

"BLD",3910,"KRN",9.8,"NM","B","LR7OSAP2",48)

"BLD",3910,"KRN",9.8,"NM","B","LR7OSAP3",49)

"BLD",3910,"KRN",9.8,"NM","B","LRAP",1)

"BLD",3910,"KRN",9.8,"NM","B","LRAPAUPT",2)

"BLD",3910,"KRN",9.8,"NM","B","LRAPAUSR",3)

"BLD",3910,"KRN",9.8,"NM","B","LRAPBR",4)

"BLD",3910,"KRN",9.8,"NM","B","LRAPBR1",5)

"BLD",3910,"KRN",9.8,"NM","B","LRAPBR2",6)

"BLD",3910,"KRN",9.8,"NM","B","LRAPBR3",7)

"BLD",3910,"KRN",9.8,"NM","B","LRAPBR4",8)

"BLD",3910,"KRN",9.8,"NM","B","LRAPBR5",9)

"BLD",3910,"KRN",9.8,"NM","B","LRAPBRPW",10)

"BLD",3910,"KRN",9.8,"NM","B","LRAPBS1",45)

"BLD",3910,"KRN",9.8,"NM","B","LRAPCUM",53)

"BLD",3910,"KRN",9.8,"NM","B","LRAPD",11)

"BLD",3910,"KRN",9.8,"NM","B","LRAPD1",12)

"BLD",3910,"KRN",9.8,"NM","B","LRAPDA",13)

"BLD",3910,"KRN",9.8,"NM","B","LRAPDSR",14)

"BLD",3910,"KRN",9.8,"NM","B","LRAPED",15)

"BLD",3910,"KRN",9.8,"NM","B","LRAPEDC",16)

"BLD",3910,"KRN",9.8,"NM","B","LRAPESON",17)

"BLD",3910,"KRN",9.8,"NM","B","LRAPF",18)

"BLD",3910,"KRN",9.8,"NM","B","LRAPFICH",44)

"BLD",3910,"KRN",9.8,"NM","B","LRAPLG",19)

"BLD",3910,"KRN",9.8,"NM","B","LRAPMOD",51)

"BLD",3910,"KRN",9.8,"NM","B","LRAPMRL",20)

"BLD",3910,"KRN",9.8,"NM","B","LRAPMRL1",21)

"BLD",3910,"KRN",9.8,"NM","B","LRAPMV",50)

"BLD",3910,"KRN",9.8,"NM","B","LRAPP",22)

"BLD",3910,"KRN",9.8,"NM","B","LRAPPF1",23)

"BLD",3910,"KRN",9.8,"NM","B","LRAPPOW",24)

"BLD",3910,"KRN",9.8,"NM","B","LRAPR",25)

"BLD",3910,"KRN",9.8,"NM","B","LRAPRES",26)

"BLD",3910,"KRN",9.8,"NM","B","LRAPRES1",27)

"BLD",3910,"KRN",9.8,"NM","B","LRAPS1",52)

"BLD",3910,"KRN",9.8,"NM","B","LRAPSNMD",28)

"BLD",3910,"KRN",9.8,"NM","B","LRAPT1",29)

"BLD",3910,"KRN",9.8,"NM","B","LRAPT2",30)

"BLD",3910,"KRN",9.8,"NM","B","LRAPT3",31)

"BLD",3910,"KRN",9.8,"NM","B","LRAPTIUP",32)

"BLD",3910,"KRN",9.8,"NM","B","LRAPUTL",33)

"BLD",3910,"KRN",9.8,"NM","B","LRAPV",34)

"BLD",3910,"KRN",9.8,"NM","B","LRAPX",35)

"BLD",3910,"KRN",9.8,"NM","B","LRAUDA",36)

"BLD",3910,"KRN",9.8,"NM","B","LRAURPT",37)

"BLD",3910,"KRN",9.8,"NM","B","LRCAPES",54)

"BLD",3910,"KRN",9.8,"NM","B","LRSPRPT",38)

"BLD",3910,"KRN",9.8,"NM","B","LRSPRPT1",39)

"BLD",3910,"KRN",9.8,"NM","B","LRSPRPT2",40)

"BLD",3910,"KRN",9.8,"NM","B","LRSPT",41)

"BLD",3910,"KRN",9.8,"NM","B","LRUA",42)

"BLD",3910,"KRN",9.8,"NM","B","LRUPS",43)

"BLD",3910,"KRN",19,0)
19
"BLD",3910,"KRN",19,"NM",0)
^9.68A^22^22
"BLD",3910,"KRN",19,"NM",1,0)
LRAP ESIG SWITCH^^0
"BLD",3910,"KRN",19,"NM",2,0)
LRAPM^^1^
"BLD",3910,"KRN",19,"NM",3,0)
LRAPMRL^^0
"BLD",3910,"KRN",19,"NM",4,0)
LRAPDGM^^0
"BLD",3910,"KRN",19,"NM",5,0)
LRAPDGS^^0
"BLD",3910,"KRN",19,"NM",6,0)
LRAPDGI^^0
"BLD",3910,"KRN",19,"NM",7,0)
LRAPAUDAB^^0
"BLD",3910,"KRN",19,"NM",8,0)
LRAPAUDAA^^0
"BLD",3910,"KRN",19,"NM",9,0)
LRAPR^^0
"BLD",3910,"KRN",19,"NM",10,0)
LRAPRS^^0
"BLD",3910,"KRN",19,"NM",11,0)
LRAPSPDAT^^0
"BLD",3910,"KRN",19,"NM",12,0)
LRAPDGD^^0
"BLD",3910,"KRN",19,"NM",13,0)
LRAPDSR^^0
"BLD",3910,"KRN",19,"NM",14,0)
LRAPDSS^^0
"BLD",3910,"KRN",19,"NM",15,0)
LRAPAUPAD^^0
"BLD",3910,"KRN",19,"NM",16,0)
LRAP PRINT ALL ON QUEUE^^0
"BLD",3910,"KRN",19,"NM",17,0)
LRAP PRINT SINGLE^^0
"BLD",3910,"KRN",19,"NM",18,0)
LRAPX^^0
"BLD",3910,"KRN",19,"NM",19,0)
LRAPLG^^0
"BLD",3910,"KRN",19,"NM",20,0)
LRAPSUPER^^2
"BLD",3910,"KRN",19,"NM",21,0)
LRAPE^^2
"BLD",3910,"KRN",19,"NM",22,0)
LRAPMV^^1^
"BLD",3910,"KRN",19,"NM","B","LRAP ESIG SWITCH",1)

"BLD",3910,"KRN",19,"NM","B","LRAP PRINT ALL ON QUEUE",16)

"BLD",3910,"KRN",19,"NM","B","LRAP PRINT SINGLE",17)

"BLD",3910,"KRN",19,"NM","B","LRAPAUDAA",8)

"BLD",3910,"KRN",19,"NM","B","LRAPAUDAB",7)

"BLD",3910,"KRN",19,"NM","B","LRAPAUPAD",15)

"BLD",3910,"KRN",19,"NM","B","LRAPDGD",12)

"BLD",3910,"KRN",19,"NM","B","LRAPDGI",6)

"BLD",3910,"KRN",19,"NM","B","LRAPDGM",4)

"BLD",3910,"KRN",19,"NM","B","LRAPDGS",5)

"BLD",3910,"KRN",19,"NM","B","LRAPDSR",13)

"BLD",3910,"KRN",19,"NM","B","LRAPDSS",14)

"BLD",3910,"KRN",19,"NM","B","LRAPE",21)

"BLD",3910,"KRN",19,"NM","B","LRAPLG",19)

"BLD",3910,"KRN",19,"NM","B","LRAPM",2)

"BLD",3910,"KRN",19,"NM","B","LRAPMRL",3)

"BLD",3910,"KRN",19,"NM","B","LRAPMV",22)

"BLD",3910,"KRN",19,"NM","B","LRAPR",9)

"BLD",3910,"KRN",19,"NM","B","LRAPRS",10)

"BLD",3910,"KRN",19,"NM","B","LRAPSPDAT",11)

"BLD",3910,"KRN",19,"NM","B","LRAPSUPER",20)

"BLD",3910,"KRN",19,"NM","B","LRAPX",18)

"BLD",3910,"KRN",19.1,0)
19.1
"BLD",3910,"KRN",19.1,"NM",0)
^9.68A^1^1
"BLD",3910,"KRN",19.1,"NM",1,0)
LRAPMOD^^0
"BLD",3910,"KRN",19.1,"NM","B","LRAPMOD",1)

"BLD",3910,"KRN",101,0)
101
"BLD",3910,"KRN",409.61,0)
409.61
"BLD",3910,"KRN",771,0)
771
"BLD",3910,"KRN",870,0)
870
"BLD",3910,"KRN",8989.51,0)
8989.51
"BLD",3910,"KRN",8989.52,0)
8989.52
"BLD",3910,"KRN",8994,0)
8994
"BLD",3910,"KRN","B",.4,.4)

"BLD",3910,"KRN","B",.401,.401)

"BLD",3910,"KRN","B",.402,.402)

"BLD",3910,"KRN","B",.403,.403)

"BLD",3910,"KRN","B",.5,.5)

"BLD",3910,"KRN","B",.84,.84)

"BLD",3910,"KRN","B",3.6,3.6)

"BLD",3910,"KRN","B",3.8,3.8)

"BLD",3910,"KRN","B",9.2,9.2)

"BLD",3910,"KRN","B",9.8,9.8)

"BLD",3910,"KRN","B",19,19)

"BLD",3910,"KRN","B",19.1,19.1)

"BLD",3910,"KRN","B",101,101)

"BLD",3910,"KRN","B",409.61,409.61)

"BLD",3910,"KRN","B",771,771)

"BLD",3910,"KRN","B",870,870)

"BLD",3910,"KRN","B",8989.51,8989.51)

"BLD",3910,"KRN","B",8989.52,8989.52)

"BLD",3910,"KRN","B",8994,8994)

"BLD",3910,"PRE")
LR259
"BLD",3910,"QUES",0)
^9.62^^
"BLD",3910,"REQB",0)
^9.611^8^8
"BLD",3910,"REQB",1,0)
LR*5.2*201^1
"BLD",3910,"REQB",2,0)
LR*5.2*248^1
"BLD",3910,"REQB",3,0)
LR*5.2*213^1
"BLD",3910,"REQB",4,0)
LR*5.2*256^1
"BLD",3910,"REQB",5,0)
LR*5.2*274^1
"BLD",3910,"REQB",6,0)
LR*5.2*231^1
"BLD",3910,"REQB",7,0)
TIU*1.0*137^1
"BLD",3910,"REQB",8,0)
USR*1.0*23^1
"BLD",3910,"REQB","B","LR*5.2*201",1)

"BLD",3910,"REQB","B","LR*5.2*213",3)

"BLD",3910,"REQB","B","LR*5.2*231",6)

"BLD",3910,"REQB","B","LR*5.2*248",2)

"BLD",3910,"REQB","B","LR*5.2*256",4)

"BLD",3910,"REQB","B","LR*5.2*274",5)

"BLD",3910,"REQB","B","TIU*1.0*137",7)

"BLD",3910,"REQB","B","USR*1.0*23",8)

"FIA",63)
LAB DATA
"FIA",63,0)
^LR(
"FIA",63,0,0)
63
"FIA",63,0,1)
y^y^f^^^^n
"FIA",63,0,10)

"FIA",63,0,11)

"FIA",63,0,"RLRO")

"FIA",63,0,"VR")
5.2^LR
"FIA",63,63)
0
"FIA",63,63.01)
0
"FIA",63,63.011)
0
"FIA",63,63.0112)
0
"FIA",63,63.0114)
0
"FIA",63,63.012)
0
"FIA",63,63.013)
0
"FIA",63,63.014)
0
"FIA",63,63.015)
0
"FIA",63,63.016)
0
"FIA",63,63.017)
0
"FIA",63,63.0171)
0
"FIA",63,63.018)
0
"FIA",63,63.019)
0
"FIA",63,63.02)
0
"FIA",63,63.025)
0
"FIA",63,63.0251)
0
"FIA",63,63.027)
0
"FIA",63,63.0272)
0
"FIA",63,63.02721)
0
"FIA",63,63.029)
0
"FIA",63,63.0297)
0
"FIA",63,63.03)
0
"FIA",63,63.033)
0
"FIA",63,63.075)
0
"FIA",63,63.076)
0
"FIA",63,63.08)
0
"FIA",63,63.084)
0
"FIA",63,63.0841)
0
"FIA",63,63.085)
0
"FIA",63,63.0851)
0
"FIA",63,63.086)
0
"FIA",63,63.0861)
0
"FIA",63,63.087)
0
"FIA",63,63.0871)
0
"FIA",63,63.089)
0
"FIA",63,63.0897)
0
"FIA",63,63.09)
0
"FIA",63,63.095)
0
"FIA",63,63.0951)
0
"FIA",63,63.097)
0
"FIA",63,63.0971)
0
"FIA",63,63.099)
0
"FIA",63,63.0997)
0
"FIA",63,63.101)
0
"FIA",63,63.12)
0
"FIA",63,63.13)
0
"FIA",63,63.14)
0
"FIA",63,63.141)
0
"FIA",63,63.15)
0
"FIA",63,63.16)
0
"FIA",63,63.17)
0
"FIA",63,63.172)
0
"FIA",63,63.186)
0
"FIA",63,63.19)
0
"FIA",63,63.199)
0
"FIA",63,63.2)
0
"FIA",63,63.201)
0
"FIA",63,63.202)
0
"FIA",63,63.2021)
0
"FIA",63,63.20211)
0
"FIA",63,63.203)
0
"FIA",63,63.204)
0
"FIA",63,63.205)
0
"FIA",63,63.206)
0
"FIA",63,63.207)
0
"FIA",63,63.2072)
0
"FIA",63,63.20721)
0
"FIA",63,63.208)
0
"FIA",63,63.21)
0
"FIA",63,63.211)
0
"FIA",63,63.212)
0
"FIA",63,63.213)
0
"FIA",63,63.214)
0
"FIA",63,63.215)
0
"FIA",63,63.216)
0
"FIA",63,63.217)
0
"FIA",63,63.218)
0
"FIA",63,63.219)
0
"FIA",63,63.22)
0
"FIA",63,63.22005)
0
"FIA",63,63.221)
0
"FIA",63,63.23)
0
"FIA",63,63.24)
0
"FIA",63,63.242)
0
"FIA",63,63.243)
0
"FIA",63,63.25)
0
"FIA",63,63.26)
0
"FIA",63,63.27)
0
"FIA",63,63.28)
0
"FIA",63,63.282)
0
"FIA",63,63.285)
0
"FIA",63,63.322)
0
"FIA",63,63.323)
0
"FIA",63,63.324)
0
"FIA",63,63.3241)
0
"FIA",63,63.3242)
0
"FIA",63,63.32421)
0
"FIA",63,63.331)
0
"FIA",63,63.3311)
0
"FIA",63,63.45)
0
"FIA",63,63.46)
0
"FIA",63,63.47)
0
"FIA",63,63.48)
0
"FIA",63,63.49)
0
"FIA",63,63.801)
0
"FIA",63,63.802)
0
"FIA",63,63.808)
0
"FIA",63,63.81)
0
"FIA",63,63.811)
0
"FIA",63,63.812)
0
"FIA",63,63.8121)
0
"FIA",63,63.8122)
0
"FIA",63,63.813)
0
"FIA",63,63.814)
0
"FIA",63,63.815)
0
"FIA",63,63.816)
0
"FIA",63,63.817)
0
"FIA",63,63.8172)
0
"FIA",63,63.81721)
0
"FIA",63,63.818)
0
"FIA",63,63.819)
0
"FIA",63,63.82)
0
"FIA",63,63.82005)
0
"FIA",63,63.821)
0
"FIA",63,63.822)
0
"FIA",63,63.823)
0
"FIA",63,63.824)
0
"FIA",63,63.825)
0
"FIA",63,63.84)
0
"FIA",63,63.841)
0
"FIA",63,63.85)
0
"FIA",63,63.88)
0
"FIA",63,63.901)
0
"FIA",63,63.902)
0
"FIA",63,63.9024)
0
"FIA",63,63.90241)
0
"FIA",63,63.9025)
0
"FIA",63,63.90251)
0
"FIA",63,63.903)
0
"FIA",63,63.905)
0
"FIA",63,63.906)
0
"FIA",63,63.907)
0
"FIA",63,63.9072)
0
"FIA",63,63.90721)
0
"FIA",63,63.908)
0
"FIA",63,63.91)
0
"FIA",63,63.911)
0
"FIA",63,63.912)
0
"FIA",63,63.9121)
0
"FIA",63,63.9122)
0
"FIA",63,63.913)
0
"FIA",63,63.914)
0
"FIA",63,63.915)
0
"FIA",63,63.916)
0
"FIA",63,63.917)
0
"FIA",63,63.918)
0
"FIA",63,63.919)
0
"FIA",63,63.92005)
0
"FIA",63,63.921)
0
"FIA",63,63.922)
0
"FIA",63,63.923)
0
"FIA",63,63.924)
0
"FIA",63,63.9241)
0
"FIA",63,63.94)
0
"FIA",63,63.941)
0
"FIA",63,63.97)
0
"FIA",63,63.98)
0
"FIA",63,63.982)
0
"FIA",63,63.985)
0
"FIA",63,63.99)
0
"FIA",63,63.999)
0
"FIA",69.9)
LABORATORY SITE
"FIA",69.9,0)
^LAB(69.9,
"FIA",69.9,0,0)
69.9
"FIA",69.9,0,1)
y^y^p^^^^n
"FIA",69.9,0,10)

"FIA",69.9,0,11)

"FIA",69.9,0,"RLRO")

"FIA",69.9,0,"VR")
5.2^LR
"FIA",69.9,69.9)
1
"FIA",69.9,69.9,619)

"INI")
PRE^LR259
"INIT")
POST^LR259
"KRN",19,982,-1)
0^9
"KRN",19,982,0)
LRAPR^Verify/release reports, anat path^^R^^LRVERIFY^^^^^^LAB SERVICE
"KRN",19,982,1,0)
^19.06^7^7^3020826^^^^
"KRN",19,982,1,1,0)
This option is used to verify/release pathology reports.  The user is prompted
"KRN",19,982,1,2,0)
for the accession number of the report to be released.  If electronic signature
"KRN",19,982,1,3,0)
is not activated, the user is asked if the report is to be released, yes or no. 
"KRN",19,982,1,4,0)
If electronic signature has been activated, the option is used to
"KRN",19,982,1,5,0)
electronically sign and store pathology reports.  It also allows CPT coding to
"KRN",19,982,1,6,0)
be performed regardless of the release status of the chosen report.  Another
"KRN",19,982,1,7,0)
feature is the ability to print SNOMED codes for the given accession/report.
"KRN",19,982,25)
LRAPR
"KRN",19,982,99)
55477,35597
"KRN",19,982,"U")
VERIFY/RELEASE REPORTS, ANAT P
"KRN",19,1010,-1)
0^17
"KRN",19,1010,0)
LRAP PRINT SINGLE^Print single report only^^R^^^^^^^^LAB SERVICE
"KRN",19,1010,1,0)
^19.06^8^8^3020826^^^^
"KRN",19,1010,1,1,0)
Prints a list of any pathology accessions in cytopath, electron microscopy,
"KRN",19,1010,1,2,0)
and surgical pathology for cumulative reports for micro exams.  Also prints
"KRN",19,1010,1,3,0)
final reports and completed autopsy reports.  For final reports, if the report
"KRN",19,1010,1,4,0)
has been electronically signed and stored in TIU, the report will be pulled
"KRN",19,1010,1,5,0)
from TIU.  Otherwise, the report will be generated from the data stored in the
"KRN",19,1010,1,6,0)
LAB DATA (#63) file.  The option asks if a 'Final Office Copy' should be
"KRN",19,1010,1,7,0)
printed.  The 'Final Office Copy' prints SNOMED codes on a separate page
"KRN",19,1010,1,8,0)
since they are no longer printed on the SF515.
"KRN",19,1010,20)

"KRN",19,1010,25)
S^LRAPP
"KRN",19,1010,"U")
PRINT SINGLE REPORT ONLY
"KRN",19,1011,-1)
0^16
"KRN",19,1011,0)
LRAP PRINT ALL ON QUEUE^Print all reports on queue^^R^^^^^^^^LAB SERVICE
"KRN",19,1011,1,0)
^19.06^8^8^3020826^^^^
"KRN",19,1011,1,1,0)
This option prints a report listing the clinical history and gross
"KRN",19,1011,1,2,0)
description for review for patients on the cumulative report print queue,
"KRN",19,1011,1,3,0)
as well as final reports for patients and completed autopsy reports.  For final
"KRN",19,1011,1,4,0)
reports, if the report has been electronically signed and stored in TIU, the
"KRN",19,1011,1,5,0)
report will be pulled from TIU.  Otherwise, the report will be generated from
"KRN",19,1011,1,6,0)
the data stored in the LAB DATA (#63) file.  The option asks if a 'Final Office
"KRN",19,1011,1,7,0)
Copy' should be printed.  The 'Final Office Copy' prints SNOMED codes on a
"KRN",19,1011,1,8,0)
separate page since they are no longer printed on the SF515.
"KRN",19,1011,20)

"KRN",19,1011,25)
P^LRAPP
"KRN",19,1011,"U")
PRINT ALL REPORTS ON QUEUE
"KRN",19,1056,-1)
2^20
"KRN",19,1056,0)
LRAPSUPER^Supervisor, anat path^^M^.5^LRAPSUPER^^^^^^26
"KRN",19,1056,10,0)
^19.01IP^15^13
"KRN",19,1056,10,12,0)
8016^MV
"KRN",19,1056,10,12,"^")
LRAPMV
"KRN",19,1056,10,15,0)
13211^SW
"KRN",19,1056,10,15,"^")
LRAP ESIG SWITCH
"KRN",19,1056,"U")
SUPERVISOR, ANAT PATH
"KRN",19,2607,-1)
0^12
"KRN",19,2607,0)
LRAPDGD^Clinical Hx/Gross Description/FS^^R^^^^^^^^LAB SERVICE
"KRN",19,2607,1,0)
^19.06^2^2^3020819^^^^
"KRN",19,2607,1,1,0)
This option is used to enter anatomic pathology specimen gross description
"KRN",19,2607,1,2,0)
and clinical history for unreleased pathology reports.
"KRN",19,2607,20)

"KRN",19,2607,25)
EN^LRAPD
"KRN",19,2607,99.1)
54221,43015
"KRN",19,2607,"U")
CLINICAL HX/GROSS DESCRIPTION/
"KRN",19,2608,-1)
0^4
"KRN",19,2608,0)
LRAPDGM^FS/Gross/Micro/Dx^^R^^^^^^^^LAB SERVICE
"KRN",19,2608,1,0)
^19.06^3^3^3020819^^^^
"KRN",19,2608,1,1,0)
Use this option to edit the frozen section and gross descriptions and to
"KRN",19,2608,1,2,0)
enter the microscopic and diagnosis descriptions for an unreleased report.  CPT
"KRN",19,2608,1,3,0)
coding may be entered regardless of the release status of the report.
"KRN",19,2608,20)

"KRN",19,2608,25)
EN1^LRAPD
"KRN",19,2608,30)

"KRN",19,2608,"U")
FS/GROSS/MICRO/DX
"KRN",19,2609,-1)
0^13
"KRN",19,2609,0)
LRAPDSR^Supplementary Report, Anat Path^^R^^^^^^^^LAB SERVICE
"KRN",19,2609,1,0)
^19.06^2^2^3020819^^^
"KRN",19,2609,1,1,0)
Use this option to add a supplementary report to any existing unreleased
"KRN",19,2609,1,2,0)
anatomic pathology accession.
"KRN",19,2609,20)

"KRN",19,2609,25)
EN4^LRAPD
"KRN",19,2609,"U")
SUPPLEMENTARY REPORT, ANAT PAT
"KRN",19,2610,-1)
0^14
"KRN",19,2610,0)
LRAPDSS^Spec Studies-EM;Immuno;Consult;Pic, Anat Path^^R^^^^^^^^LAB SERVICE
"KRN",19,2610,1,0)
^19.06^2^2^3020819^^^
"KRN",19,2610,1,1,0)
This option can be used to add a special study report to an existing unreleased
"KRN",19,2610,1,2,0)
anatomic pathology accession.
"KRN",19,2610,20)

"KRN",19,2610,25)
EN5^LRAPD
"KRN",19,2610,"U")
SPEC STUDIES-EM;IMMUNO;CONSULT
"KRN",19,2611,-1)
0^5
"KRN",19,2611,0)
LRAPDGS^FS/Gross/Micro/Dx/SNOMED Coding^^R^^^^^^^^LAB SERVICE
"KRN",19,2611,1,0)
^19.06^3^3^3020819^^^^
"KRN",19,2611,1,1,0)
Allows review of gross specimen and frozen section descriptions and entry of
"KRN",19,2611,1,2,0)
microscopic description and diagnoses for an unreleased report.  SNOMED coding
"KRN",19,2611,1,3,0)
and CPT coding are permitted regardless of the release status of the report.
"KRN",19,2611,20)

"KRN",19,2611,25)
EN2^LRAPD
"KRN",19,2611,"U")
FS/GROSS/MICRO/DX/SNOMED CODIN
"KRN",19,2622,-1)
0^6
"KRN",19,2622,0)
LRAPDGI^FS/Gross/Micro/Dx/ICD9CM Coding^^R^^^^^^^^LAB SERVICE
"KRN",19,2622,1,0)
^19.06^4^4^3020819^^^^
"KRN",19,2622,1,1,0)
Allows review of gross specimen and frozen descriptions and entry of
"KRN",19,2622,1,2,0)
microscopic and diagnosis descriptions and ICD9CM coding for each accession
"KRN",19,2622,1,3,0)
number.  This is permitted for unreleased reports only.  However, CPT coding is
"KRN",19,2622,1,4,0)
permitted regardless of the release status of the report.
"KRN",19,2622,20)

"KRN",19,2622,25)
EN3^LRAPD
"KRN",19,2622,"U")
FS/GROSS/MICRO/DX/ICD9CM CODIN
"KRN",19,2624,-1)
0^8
"KRN",19,2624,0)
LRAPAUDAA^Autopsy protocol & ICD9CM coding^^R^^^^^^^^LAB SERVICE
"KRN",19,2624,1,0)
^19.06^3^3^3020819^^^^
"KRN",19,2624,1,1,0)
Allows entry and edit of autopsy summary and ICD9CM codes for an unreleased
"KRN",19,2624,1,2,0)
report.  CPT coding is also permitted regardless of the release status of the
"KRN",19,2624,1,3,0)
report.
"KRN",19,2624,20)

"KRN",19,2624,25)
A^LRAUDA
"KRN",19,2624,"U")
AUTOPSY PROTOCOL & ICD9CM CODI
"KRN",19,2626,-1)
0^7
"KRN",19,2626,0)
LRAPAUDAB^Autopsy protocol & SNOMED coding^^R^^^^^^^^LAB SERVICE
"KRN",19,2626,1,0)
^19.06^2^2^3020819^^^^
"KRN",19,2626,1,1,0)
Allows enter/edit of autopsy summary for an unreleased report.  SNOMED coding
"KRN",19,2626,1,2,0)
and CPT coding are permitted regardless of the release status of the report.
"KRN",19,2626,20)

"KRN",19,2626,25)
B^LRAUDA
"KRN",19,2626,"U")
AUTOPSY PROTOCOL & SNOMED CODI
"KRN",19,2633,-1)
0^11
"KRN",19,2633,0)
LRAPSPDAT^Blocks, Stains, Procedures, anat path^^R^^^^^^^^LAB SERVICE
"KRN",19,2633,1,0)
^19.06^2^2^3020819^^^^
"KRN",19,2633,1,1,0)
This option allows entry of blocks, stains and procedures for unreleased
"KRN",19,2633,1,2,0)
pathology reports.
"KRN",19,2633,20)

"KRN",19,2633,25)
LRAPBS
"KRN",19,2633,"U")
BLOCKS, STAINS, PROCEDURES, AN
"KRN",19,2639,-1)
0^19
"KRN",19,2639,0)
LRAPLG^Log-in, anat path^^R^^^^^^^^LAB SERVICE
"KRN",19,2639,1,0)
^19.06^4^4^3030305^^^^
"KRN",19,2639,1,1,0)
This option is used to log-in accessions in anatomic pathology.  The user must
"KRN",19,2639,1,2,0)
hold the appropriate key to the accession area.  The option has been enhanced
"KRN",19,2639,1,3,0)
to list the primary care physician as the default name in the SPECIMEN
"KRN",19,2639,1,4,0)
SUBMITTED BY prompt.
"KRN",19,2639,25)
LRAPLG
"KRN",19,2639,"U")
LOG-IN, ANAT PATH
"KRN",19,2643,-1)
0^18
"KRN",19,2643,0)
LRAPX^SNOMED coding, anat path^^R^^^^^^^^LAB SERVICE
"KRN",19,2643,1,0)
^19.06^4^4^3020826^^^
"KRN",19,2643,1,1,0)
This option allows the entry of anatomic pathology SNOMED coding.  The option
"KRN",19,2643,1,2,0)
allows the update of some non-SNOMED fields if the report is unreleased.  If
"KRN",19,2643,1,3,0)
the report has been released, the option allows the update of SNOMED fields
"KRN",19,2643,1,4,0)
only.
"KRN",19,2643,25)
LRAPX
"KRN",19,2643,"U")
SNOMED CODING, ANAT PATH
"KRN",19,2644,-1)
2^21
"KRN",19,2644,0)
LRAPE^Edit/modify data, anat path^^M^.5^^^^^^^26
"KRN",19,2644,10,0)
^19.01IP^5^3
"KRN",19,2644,10,5,0)
13371^MM^2
"KRN",19,2644,10,5,"^")
LRAPMRL
"KRN",19,2644,"U")
EDIT/MODIFY DATA, ANAT PATH
"KRN",19,4225,-1)
0^10
"KRN",19,4225,0)
LRAPRS^Supplementary report release, anat path^^R^^^^^^^^LAB SERVICE
"KRN",19,4225,1,0)
^19.06^4^4^3020826^^^
"KRN",19,4225,1,1,0)
Releases supplementary reports for Surgical Pathology, Cytopathology or
"KRN",19,4225,1,2,0)
Electron Microscopy.  If all supplementary reports that exist for the chosen
"KRN",19,4225,1,3,0)
accession have already been released or if no supplementary reports exist for
"KRN",19,4225,1,4,0)
the accession, the user will be notified.
"KRN",19,4225,25)
EN^LRAPR
"KRN",19,4225,"U")
SUPPLEMENTARY REPORT RELEASE, 
"KRN",19,8036,-1)
0^15
"KRN",19,8036,0)
LRAPAUPAD^Provisional anatomic diagnoses^^R^^^^^^^^LAB SERVICE
"KRN",19,8036,1,0)
^19.06^3^3^3030307^^^^
"KRN",19,8036,1,1,0)
Allows entering the preliminary autopsy diagnoses.  This is for an unreleased
"KRN",19,8036,1,2,0)
report.  However, CPT coding is permitted regardless of the release status of
"KRN",19,8036,1,3,0)
the report.
"KRN",19,8036,25)
PAD^LRAUDA
"KRN",19,8036,"U")
PROVISIONAL ANATOMIC DIAGNOSES
"KRN",19,13211,-1)
0^1
"KRN",19,13211,0)
LRAP ESIG SWITCH^Turn Electronic Signature On/Off^^R^^LRLIASON^^^^n^^ANATOMIC PATH
"KRN",19,13211,1,0)
^19.06^2^2^3030319^^^^
"KRN",19,13211,1,1,0)
This option is used to activate or deactivate the electronic signature
"KRN",19,13211,1,2,0)
functionality for Anatomic Pathology.
"KRN",19,13211,25)
LRAPESON
"KRN",19,13211,"U")
TURN ELECTRONIC SIGNATURE ON/O
"KRN",19,13371,-1)
0^3
"KRN",19,13371,0)
LRAPMRL^Modify released pathology report^^R^^LRAPMOD^^^^^^LAB SERVICE
"KRN",19,13371,1,0)
^19.06^4^4^3021126^^^
"KRN",19,13371,1,1,0)
Allows the editing of a released pathology report.  The current version of
"KRN",19,13371,1,2,0)
the report is retained and a new version is created once the modified report
"KRN",19,13371,1,3,0)
is released.  The report will be flagged with a modified banner.  If the
"KRN",19,13371,1,4,0)
diagnosis has been modified, the banner will indicated a modified diagnosis.
"KRN",19,13371,25)
LRAPMRL
"KRN",19,13371,"U")
MODIFY RELEASED PATHOLOGY REPO
"KRN",19,13894,-1)
1^2
"KRN",19,13894,0)
LRAPM
"KRN",19,13895,-1)
1^22
"KRN",19,13895,0)
LRAPMV
"KRN",19.1,431,-1)
0^1
"KRN",19.1,431,0)
LRAPMOD^Modify Released AP SF515
"KRN",19.1,431,1,0)
^19.11^2^2^3020305^^^^
"KRN",19.1,431,1,1,0)
This key enables the holder to use option Modify released pathology report 
"KRN",19.1,431,1,2,0)
[LRAPM] to modify released anatomic pathology reports.
"MBREQ")
0
"ORD",3,19.1)
19.1;3;1;;KEY^XPDTA1;;;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2941128
"PKG",26,22,1,"PAH",1,0)
259^3040317
"PKG",26,22,1,"PAH",1,1,0)
^^122^122^3040317
"PKG",26,22,1,"PAH",1,1,1,0)
Description:
"PKG",26,22,1,"PAH",1,1,2,0)
===========
"PKG",26,22,1,"PAH",1,1,3,0)

"PKG",26,22,1,"PAH",1,1,4,0)
This patch to the Laboratory package does not contain any changes to the 
"PKG",26,22,1,"PAH",1,1,5,0)
VISTA BLOOD BANK Software as defined by the VHA DIRECTIVE 99-053 titled 
"PKG",26,22,1,"PAH",1,1,6,0)
VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"PKG",26,22,1,"PAH",1,1,7,0)

"PKG",26,22,1,"PAH",1,1,8,0)
VISTA Laboratory Anatomic Pathology Electronic Signature (Patch LR*5.2*259) 
"PKG",26,22,1,"PAH",1,1,9,0)
software release implements the new electronic signature functionality 
"PKG",26,22,1,"PAH",1,1,10,0)
within the Autopsy, Cytology, Electron Microscopy, and Surgical Pathology 
"PKG",26,22,1,"PAH",1,1,11,0)
sections for the Autopsy protocol, Standard Form 515 (SF 515), and 
"PKG",26,22,1,"PAH",1,1,12,0)
supplementary reports. This new electronic signature functionality can be 
"PKG",26,22,1,"PAH",1,1,13,0)
to activated or deactivated by the discretion of the site. The new Turn 
"PKG",26,22,1,"PAH",1,1,14,0)
Electronic Signature On/Off [LRAP ESIG SWITCH] option is used to activate 
"PKG",26,22,1,"PAH",1,1,15,0)
or deactivate the new electronic signature functionality. The electronic 
"PKG",26,22,1,"PAH",1,1,16,0)
signature functionality is activated during the verification/release 
"PKG",26,22,1,"PAH",1,1,17,0)
process of the Autopsy and AP reports. 
"PKG",26,22,1,"PAH",1,1,18,0)

"PKG",26,22,1,"PAH",1,1,19,0)
Pathologists may now view and electronically sign reports rather than 
"PKG",26,22,1,"PAH",1,1,20,0)
printing a paper copy for viewing and signature. The electronic signature 
"PKG",26,22,1,"PAH",1,1,21,0)
name is obtained from the NEW PERSON file (#200), ELECTRONIC SIGNATURE CODE 
"PKG",26,22,1,"PAH",1,1,22,0)
field (#20.4). All electronically signed released reports are stored in TIU 
"PKG",26,22,1,"PAH",1,1,23,0)
containing the electronic signature name, date, and time displayed on the 
"PKG",26,22,1,"PAH",1,1,24,0)
last page of the reports (near the bottom). Only authorized users are 
"PKG",26,22,1,"PAH",1,1,25,0)
allowed to electronically sign reports. Non-authorized users will receive a 
"PKG",26,22,1,"PAH",1,1,26,0)
message indicating that they are not authorized to electronically sign 
"PKG",26,22,1,"PAH",1,1,27,0)
reports.
"PKG",26,22,1,"PAH",1,1,28,0)

"PKG",26,22,1,"PAH",1,1,29,0)
  
"PKG",26,22,1,"PAH",1,1,30,0)
ASSOCIATED NOIS
"PKG",26,22,1,"PAH",1,1,31,0)
===============
"PKG",26,22,1,"PAH",1,1,32,0)
ALB-0501-50221         e-sig for Surgical Pathology Report
"PKG",26,22,1,"PAH",1,1,33,0)
ANN-1195-41047         Can release anatomic report without pathologist's 
"PKG",26,22,1,"PAH",1,1,34,0)
                               name
"PKG",26,22,1,"PAH",1,1,35,0)
ASH-0400-31745         CONFLICT  LAB VS PATCH XU*8*134
"PKG",26,22,1,"PAH",1,1,36,0)
CHA-0601-30916         Anatomic Path result alerts
"PKG",26,22,1,"PAH",1,1,37,0)
DAY-0201-40571         LR*5.2*248 - Verification of AP Supplemental
"PKG",26,22,1,"PAH",1,1,38,0)
DET-0301-42098         Installed patch LR*5.2*248
"PKG",26,22,1,"PAH",1,1,39,0)
FTL-1000-52712         QUESTION                       
"PKG",26,22,1,"PAH",1,1,40,0)
IND-0501-42474         Error when trying to delete supplemental report 
"PKG",26,22,1,"PAH",1,1,41,0)
                               date
"PKG",26,22,1,"PAH",1,1,42,0)
JAC-0302-70436         Autopsy Reports
"PKG",26,22,1,"PAH",1,1,43,0)
LOU-0400-42255         Modified Report not showing    
"PKG",26,22,1,"PAH",1,1,44,0)
MAN-0100-11108         Supplemental report changes completion date in AP
"PKG",26,22,1,"PAH",1,1,45,0)
MAN-0301-10830         MD DISPLAY ON PATH REPORTS     
"PKG",26,22,1,"PAH",1,1,46,0)
MIN-0500-41991         PAP test limitations
"PKG",26,22,1,"PAH",1,1,47,0)
MIW-0497-40185         PROVIDER NAME OVER 30 CHARACTERS
"PKG",26,22,1,"PAH",1,1,48,0)
MOU-1101-32590         Autopsy type OTHER LIMITATIONS causes print problem
"PKG",26,22,1,"PAH",1,1,49,0)
MUS-0997-70156         Need to edit path date     
"PKG",26,22,1,"PAH",1,1,50,0)
PHI-0601-20384         Undefined variable [LRAPR
"PKG",26,22,1,"PAH",1,1,51,0)
PUG-0700-52652         Need view alert for anatomic path result
"PKG",26,22,1,"PAH",1,1,52,0)
SAM-0301-22193         SP REPORT FOOTER CONTAINS ADM: AND DX: TEXT FOR 
"PKG",26,22,1,"PAH",1,1,53,0)
                               INPATIENTS
"PKG",26,22,1,"PAH",1,1,54,0)
SDC-1101-61043         AP Reports - MODIFIED report
"PKG",26,22,1,"PAH",1,1,55,0)
SHE-0499-50108         CPRS Interface with Anat Pathology for 
"PKG",26,22,1,"PAH",1,1,56,0)
                               Notifications?
"PKG",26,22,1,"PAH",1,1,57,0)
SPO-0701-50733         Alert for pathology        
"PKG",26,22,1,"PAH",1,1,58,0)
WIC-0899-42604         REVERIFY RE'D AFTER VIEWING ANAT'L REPORT
"PKG",26,22,1,"PAH",1,1,59,0)
WIC-1298-42147         Autopsy verification needs locked
"PKG",26,22,1,"PAH",1,1,60,0)
 
"PKG",26,22,1,"PAH",1,1,61,0)
E3R:      4892         NO SUPPLEMENTARY REPORT TO RELEASE' PROMPT
"PKG",26,22,1,"PAH",1,1,62,0)
          5572         ELECTRONIC SIGNATURE FOR AP
"PKG",26,22,1,"PAH",1,1,63,0)
          5995         SPECIMEN/DX FOR PATHOLOGIST VERIFICATION
"PKG",26,22,1,"PAH",1,1,64,0)
          5592         RELEASE DATE ADDED TO ANATOMIC PATHOLOGY REPORTS
"PKG",26,22,1,"PAH",1,1,65,0)
          6208         TECH TITLES
"PKG",26,22,1,"PAH",1,1,66,0)
          6566         ANATOMIC PATH VIEW ALERT
"PKG",26,22,1,"PAH",1,1,67,0)
          7059         CODING DOES NOT PRINT
"PKG",26,22,1,"PAH",1,1,68,0)
          7536         CHANGE PATHOLOGIST AFTER REPORT VERIFIED
"PKG",26,22,1,"PAH",1,1,69,0)
          9245         AUTOPSY RELEASE PROBLEM
"PKG",26,22,1,"PAH",1,1,70,0)
          9447         ANATOMICAL PATH ALERT IS NOT FUNCTION
"PKG",26,22,1,"PAH",1,1,71,0)
          9592         RELEASE DATE ADDED TO ANATOMIC PATHOLOGY REPORTS
"PKG",26,22,1,"PAH",1,1,72,0)
         12872         ELECTRONIC SIGNING ANATOMIC PATH RPT
"PKG",26,22,1,"PAH",1,1,73,0)
         14775         PATHOLOGY REPORT LOCK
"PKG",26,22,1,"PAH",1,1,74,0)
         15456         NEED ELECTRONIC SIGNATURE
"PKG",26,22,1,"PAH",1,1,75,0)
         15643         REQUEST CHANGES AFTER PATCH 248                   
"PKG",26,22,1,"PAH",1,1,76,0)
         17034         AP REPORT FORMAT IGNORED BY CERTAIN CPRS DISPLAYS
"PKG",26,22,1,"PAH",1,1,77,0)
           
"PKG",26,22,1,"PAH",1,1,78,0)
    
"PKG",26,22,1,"PAH",1,1,79,0)
TEST SITES
"PKG",26,22,1,"PAH",1,1,80,0)
==========
"PKG",26,22,1,"PAH",1,1,81,0)
  Bay Pines VAMC
"PKG",26,22,1,"PAH",1,1,82,0)
  Boston HCS
"PKG",26,22,1,"PAH",1,1,83,0)
  Desert Pacific Healthcare Network
"PKG",26,22,1,"PAH",1,1,84,0)
  Durham VAMC
"PKG",26,22,1,"PAH",1,1,85,0)
  Eastern Colorado HCS
"PKG",26,22,1,"PAH",1,1,86,0)
  Jackson VAMC
"PKG",26,22,1,"PAH",1,1,87,0)
  Milwaukee VAMC
"PKG",26,22,1,"PAH",1,1,88,0)
  Muskogee VAMC
"PKG",26,22,1,"PAH",1,1,89,0)
  North Chicago VAMC
"PKG",26,22,1,"PAH",1,1,90,0)
  North Florida/South Georgia HCS
"PKG",26,22,1,"PAH",1,1,91,0)
  Roudebush VAMC
"PKG",26,22,1,"PAH",1,1,92,0)
  San Francisco VAMC
"PKG",26,22,1,"PAH",1,1,93,0)
  VA Heartland East HCS
"PKG",26,22,1,"PAH",1,1,94,0)
  VA Western New York HCS
"PKG",26,22,1,"PAH",1,1,95,0)
 
"PKG",26,22,1,"PAH",1,1,96,0)
 
"PKG",26,22,1,"PAH",1,1,97,0)
SOFTWARE RETRIEVAL:
"PKG",26,22,1,"PAH",1,1,98,0)
===================
"PKG",26,22,1,"PAH",1,1,99,0)
  
"PKG",26,22,1,"PAH",1,1,100,0)
The following software and documentation files are exported as part of
"PKG",26,22,1,"PAH",1,1,101,0)
this patch:
"PKG",26,22,1,"PAH",1,1,102,0)
  
"PKG",26,22,1,"PAH",1,1,103,0)
     File Name           Contents                         Retrieval Format
"PKG",26,22,1,"PAH",1,1,104,0)
     ---------           --------                         ----------------
"PKG",26,22,1,"PAH",1,1,105,0)
     LR_52_259.KID       LR*5.2*259 KIDS build                 ASCII
"PKG",26,22,1,"PAH",1,1,106,0)
  
"PKG",26,22,1,"PAH",1,1,107,0)
The software files are available on one of the following OI Field Offices'
"PKG",26,22,1,"PAH",1,1,108,0)
ANONYMOUS.SOFTWARE directories.
"PKG",26,22,1,"PAH",1,1,109,0)
  
"PKG",26,22,1,"PAH",1,1,110,0)
All sites are encouraged to use their FTP capability to obtain these files.
"PKG",26,22,1,"PAH",1,1,111,0)
Use the FTP address "download.vista.med.va.gov" (without the quotes) to
"PKG",26,22,1,"PAH",1,1,112,0)
connect to the first available FTP server where the files are located.
"PKG",26,22,1,"PAH",1,1,113,0)
  
"PKG",26,22,1,"PAH",1,1,114,0)
     OI FIELD OFFICE    FTP ADDRESS                DIRECTORY
"PKG",26,22,1,"PAH",1,1,115,0)
     ===============    ===========                =========
"PKG",26,22,1,"PAH",1,1,116,0)
     ALBANY             ftp.fo-albany.med.va.gov   [ANONYMOUS.SOFTWARE]
"PKG",26,22,1,"PAH",1,1,117,0)
     HINES              ftp.fo-hines.med.va.gov    [ANONYMOUS.SOFTWARE]
"PKG",26,22,1,"PAH",1,1,118,0)
     SALT LAKE          ftp.fo-slc.med.va.gov      [ANONYMOUS.SOFTWARE]
"PKG",26,22,1,"PAH",1,1,119,0)
 
"PKG",26,22,1,"PAH",1,1,120,0)

"PKG",26,22,1,"PAH",1,1,121,0)

"PKG",26,22,1,"PAH",1,1,122,0)

"PRE")
LR259
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
55
"RTN","LR259")
0^^B10301840
"RTN","LR259",1,0)
LR259 ;DALOI/WTY - LR*5.2*259 PATCH ENVIRONMENT CHECK ROUTINE ;09/21/02
"RTN","LR259",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LR259",3,0)
EN ; Does not prevent loading of the transport global.
"RTN","LR259",4,0)
 ; Environment check is done only during the install.
"RTN","LR259",5,0)
 ;
"RTN","LR259",6,0)
 I '$G(XPDENV) D  Q
"RTN","LR259",7,0)
 .N XQA,XQAMSG
"RTN","LR259",8,0)
 .S XQAMSG="Transport global for patch "_$G(XPDNM,"Unknown patch")
"RTN","LR259",9,0)
 .S XQAMSG=XQAMSG_" loaded on "_$$HTE^XLFDT($H)
"RTN","LR259",10,0)
 .S XQA("G.LMI")=""
"RTN","LR259",11,0)
 .D SETUP^XQALERT
"RTN","LR259",12,0)
 .S MSG="Sending transport global loaded alert to mail group G.LMI"
"RTN","LR259",13,0)
 .D BMES^XPDUTL($$CJ^XLFSTR(MSG,80)) K MSG
"RTN","LR259",14,0)
 ;
"RTN","LR259",15,0)
 D CHECK
"RTN","LR259",16,0)
 D EXIT
"RTN","LR259",17,0)
 Q
"RTN","LR259",18,0)
 ;
"RTN","LR259",19,0)
CHECK ; Perform environment check
"RTN","LR259",20,0)
 ;
"RTN","LR259",21,0)
 I $S('$G(IOM):1,'$G(IOSL):1,$G(U)'="^":1,1:0) D  Q
"RTN","LR259",22,0)
 .D BMES^XPDUTL($$CJ^XLFSTR("Terminal Device is not defined",80))
"RTN","LR259",23,0)
 .S XPDQUIT=2
"RTN","LR259",24,0)
 ;
"RTN","LR259",25,0)
 I $S('$G(DUZ):1,$D(DUZ)[0:1,$D(DUZ(0))[0:1,1:0) D  Q
"RTN","LR259",26,0)
 .S MSG="Please log in to set local DUZ... variables"
"RTN","LR259",27,0)
 .D BMES^XPDUTL($$CJ^XLFSTR(MSG,80)) K MSG
"RTN","LR259",28,0)
 .S XPDQUIT=2
"RTN","LR259",29,0)
 ;
"RTN","LR259",30,0)
 I '$D(^VA(200,$G(DUZ),0))#2 D  Q
"RTN","LR259",31,0)
 .S MSG="You are not a valid user on this system"
"RTN","LR259",32,0)
 .D BMES^XPDUTL($$CJ^XLFSTR(MSG,80)) K MSG
"RTN","LR259",33,0)
 .S XPDQUIT=2
"RTN","LR259",34,0)
 ;
"RTN","LR259",35,0)
 S XPDDIQ("XPZ1")=0
"RTN","LR259",36,0)
 ;
"RTN","LR259",37,0)
 Q
"RTN","LR259",38,0)
 ;
"RTN","LR259",39,0)
EXIT ;
"RTN","LR259",40,0)
 I $G(XPDQUIT) D
"RTN","LR259",41,0)
 .S MSG="--- Install Environment Check FAILED ---"
"RTN","LR259",42,0)
 .D BMES^XPDUTL($$CJ^XLFSTR(MSG,80)) K MSG
"RTN","LR259",43,0)
 I '$G(XPDQUIT) D
"RTN","LR259",44,0)
 .D BMES^XPDUTL($$CJ^XLFSTR("--- Environment Check is Ok ---",80))
"RTN","LR259",45,0)
 Q
"RTN","LR259",46,0)
 ;
"RTN","LR259",47,0)
PRE ; KIDS Pre install for LR*5.2*259
"RTN","LR259",48,0)
 ;
"RTN","LR259",49,0)
 N XQA,XQAMSG
"RTN","LR259",50,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")
"RTN","LR259",51,0)
 S XQAMSG=XQAMSG_" started on "_$$HTE^XLFDT($H)
"RTN","LR259",52,0)
 S XQA("G.LMI")=""
"RTN","LR259",53,0)
 D SETUP^XQALERT
"RTN","LR259",54,0)
 ;
"RTN","LR259",55,0)
 S MSG="Sending install started alert to mail group G.LMI"
"RTN","LR259",56,0)
 D BMES^XPDUTL($$CJ^XLFSTR(MSG,80)) K MSG
"RTN","LR259",57,0)
 ;
"RTN","LR259",58,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Pre install started ***",80))
"RTN","LR259",59,0)
 ;
"RTN","LR259",60,0)
 S Y=$$OPTDE^XPDUTL("LRAP",2)
"RTN","LR259",61,0)
 S MSG="Disabling Anatomic Pathology [LRAP] option"
"RTN","LR259",62,0)
 D BMES^XPDUTL($$CJ^XLFSTR(MSG,80)) K MSG
"RTN","LR259",63,0)
 ;
"RTN","LR259",64,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Pre install completed ***",80))
"RTN","LR259",65,0)
 ;
"RTN","LR259",66,0)
 Q
"RTN","LR259",67,0)
 ;
"RTN","LR259",68,0)
POST ; KIDS Post install for LR*5.2*259
"RTN","LR259",69,0)
 ;
"RTN","LR259",70,0)
 N XQA,XQAMSG
"RTN","LR259",71,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Post install started ***",80))
"RTN","LR259",72,0)
 ;
"RTN","LR259",73,0)
 S Y=$$OPTDE^XPDUTL("LRAP",1)
"RTN","LR259",74,0)
 S MSG="Enabling Anatomic Pathology [LRAP] option"
"RTN","LR259",75,0)
 D BMES^XPDUTL($$CJ^XLFSTR(MSG,80)) K MSG
"RTN","LR259",76,0)
 ;
"RTN","LR259",77,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Post install completed ***",80))
"RTN","LR259",78,0)
 ;
"RTN","LR259",79,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")
"RTN","LR259",80,0)
 S XQAMSG=XQAMSG_" completed on "_$$HTE^XLFDT($H)
"RTN","LR259",81,0)
 S XQA("G.LMI")=""
"RTN","LR259",82,0)
 D SETUP^XQALERT
"RTN","LR259",83,0)
 ;
"RTN","LR259",84,0)
 S MSG="Sending install completion alert to mail group G.LMI"
"RTN","LR259",85,0)
 D BMES^XPDUTL($$CJ^XLFSTR(MSG,80)) K MSG
"RTN","LR259",86,0)
 ;
"RTN","LR259",87,0)
 Q
"RTN","LR7OSAP")
0^46^B34114559
"RTN","LR7OSAP",1,0)
LR7OSAP ;slc/dcm/wty - Silent AP rpt (compare to LRAPCUM) ;3/27/2002
"RTN","LR7OSAP",2,0)
 ;;5.2;LAB SERVICE;**121,187,230,256,259**;Sep 27, 1994
"RTN","LR7OSAP",3,0)
 ;
"RTN","LR7OSAP",4,0)
GET I '$D(^LR(LRDFN,LRSS)) Q
"RTN","LR7OSAP",5,0)
 N FST,X,LRPTR
"RTN","LR7OSAP",6,0)
 S (A,FST)=0,LRI=LRIN
"RTN","LR7OSAP",7,0)
 F  S LRI=$O(^LR(LRDFN,LRSS,LRI)) Q:'LRI!(CT1>COUNT)!(LRI>LROUT)  S B=$G(^(LRI,0)),CT1=CT1+1 I B D
"RTN","LR7OSAP",8,0)
 . D W
"RTN","LR7OSAP",9,0)
 . S X="",$P(X,"=",GIOM)=""
"RTN","LR7OSAP",10,0)
 . D LN
"RTN","LR7OSAP",11,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,X)
"RTN","LR7OSAP",12,0)
 . D LINE^LR7OSUM4
"RTN","LR7OSAP",13,0)
 Q
"RTN","LR7OSAP",14,0)
F(PIECE) ;
"RTN","LR7OSAP",15,0)
 ;If PIECE=1, then only get 1st piece; otherwise get whole node
"RTN","LR7OSAP",16,0)
 I '$G(PIECE) D WRAP^LR7OSAP1("^LR("_LRDFN_","""_LRSS_""","_LRI_","_LRV_")",79) Q
"RTN","LR7OSAP",17,0)
 S C=0
"RTN","LR7OSAP",18,0)
 F  S C=$O(^LR(LRDFN,LRSS,LRI,LRV,C)) Q:'C  S X=$P(^(C,0),"^") D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,X)
"RTN","LR7OSAP",19,0)
 Q
"RTN","LR7OSAP",20,0)
W ;
"RTN","LR7OSAP",21,0)
 I 'FST D
"RTN","LR7OSAP",22,0)
 . D LINE^LR7OSUM4,LN
"RTN","LR7OSAP",23,0)
 . S X=GIOM/2-($L(LRAA(1))/2+5),^TMP("LRH",$J,LRAA(1))=GCNT,^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(X,CCNT,"---- "_LRAA(1)_" ----")
"RTN","LR7OSAP",24,0)
 I FST D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Next "_LRAA(1)_" Specimen...")
"RTN","LR7OSAP",25,0)
 S FST=1
"RTN","LR7OSAP",26,0)
 D TIUCHK^LRAPUTL(.LRPTR,LRDFN,LRSS,LRI)
"RTN","LR7OSAP",27,0)
 I +$G(LRPTR) D  Q
"RTN","LR7OSAP",28,0)
 .D MAIN^LR7OSAP3(LRPTR)
"RTN","LR7OSAP",29,0)
 S Y=+B
"RTN","LR7OSAP",30,0)
 D D^LRU
"RTN","LR7OSAP",31,0)
 S LRW(1)=Y,Y=$P(B,"^",10)
"RTN","LR7OSAP",32,0)
 D D^LRU
"RTN","LR7OSAP",33,0)
 S LRW(10)=Y,Y=$P(B,"^",3)
"RTN","LR7OSAP",34,0)
 D D^LRU
"RTN","LR7OSAP",35,0)
 S LRW(3)=Y,X=$P(B,"^",2)
"RTN","LR7OSAP",36,0)
 D:X D^LRUA
"RTN","LR7OSAP",37,0)
 S LRW(2)=X,LRW(11)=$P(B,"^",11),X=$P(B,"^",4)
"RTN","LR7OSAP",38,0)
 D:X D^LRUA
"RTN","LR7OSAP",39,0)
 S LRW(4)=X,X=$P(B,"^",7)
"RTN","LR7OSAP",40,0)
 D:X D^LRUA
"RTN","LR7OSAP",41,0)
 S LRW(7)=X
"RTN","LR7OSAP",42,0)
 D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Date Spec taken: "_LRW(1)),^(0)=^TMP("LRC",$J,GCNT,0)_$$S^LR7OS(38,CCNT,"Pathologist:"_LRW(2))
"RTN","LR7OSAP",43,0)
 D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Date Spec rec'd: "_LRW(10)),^(0)=^TMP("LRC",$J,GCNT,0)_$$S^LR7OS(38,CCNT,$S(LRSS="SP":"Resident: ",1:"Tech: ")_LRW(4))
"RTN","LR7OSAP",44,0)
 D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,$S($L(LRW(3)):"Date  completed: ",1:"REPORT INCOMPLETE")_LRW(3)),^(0)=^TMP("LRC",$J,GCNT,0)_$$S^LR7OS(38,CCNT,"Accession #: "_$P(B,"^",6))
"RTN","LR7OSAP",45,0)
 D LN S $P(LR("%"),"-",GIOM)="",^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Submitted by: "_$P(B,"^",5)),^(0)=^TMP("LRC",$J,GCNT,0)_$$S^LR7OS(38,CCNT,"Practitioner:"_LRW(7)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,LR("%"))
"RTN","LR7OSAP",46,0)
 I LRW(11)="" D A,LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Report not verified") Q  ;don't show anymore data if not verified.
"RTN","LR7OSAP",47,0)
 I $D(^LR(LRDFN,LRSS,LRI,.1)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Specimen: ") S LRV=.1 D F(1)
"RTN","LR7OSAP",48,0)
 I $D(^LR(LRDFN,LRSS,LRI,.2)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Brief Clinical History:") S LRV=.2 D F()
"RTN","LR7OSAP",49,0)
 I $D(^LR(LRDFN,LRSS,LRI,.3)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Preoperative Diagnosis:") S LRV=.3 D F()
"RTN","LR7OSAP",50,0)
 I $D(^LR(LRDFN,LRSS,LRI,.4)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Operative Findings:") S LRV=.4 D F()
"RTN","LR7OSAP",51,0)
 I $D(^LR(LRDFN,LRSS,LRI,.5)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Postoperative Diagnosis:") S LRV=.5 D F()
"RTN","LR7OSAP",52,0)
 D SET^LRUA
"RTN","LR7OSAP",53,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.3,0)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,LR(69.2,.13)) I $P($G(^LR(LRDFN,LRSS,LRI,6,0)),U,4) S LR(0)=6 D MOD^LR7OSAP1
"RTN","LR7OSAP",54,0)
 S LRV=1.3
"RTN","LR7OSAP",55,0)
 D F()
"RTN","LR7OSAP",56,0)
 I $O(^LR(LRDFN,LRSS,LRI,1,0)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,LR(69.2,.03)) I $P($G(^LR(LRDFN,LRSS,LRI,7,0)),U,4) S LR(0)=7 D MOD^LR7OSAP1
"RTN","LR7OSAP",57,0)
 S LRV=1
"RTN","LR7OSAP",58,0)
 D F()
"RTN","LR7OSAP",59,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.1,0)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,LR(69.2,.04)_" (Date Spec taken: "_LRW(1)_")") I $P($G(^LR(LRDFN,LRSS,LRI,4,0)),U,4) S LR(0)=4 D MOD^LR7OSAP1
"RTN","LR7OSAP",60,0)
 S LRV=1.1
"RTN","LR7OSAP",61,0)
 D F()
"RTN","LR7OSAP",62,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.4,0)) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,LR(69.2,.14)) I $P($G(^LR(LRDFN,LRSS,LRI,5,0)),U,4) S LR(0)=5 D MOD^LR7OSAP1
"RTN","LR7OSAP",63,0)
 S LRV=1.4
"RTN","LR7OSAP",64,0)
 D F()
"RTN","LR7OSAP",65,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.2,0)) D
"RTN","LR7OSAP",66,0)
 . D LN
"RTN","LR7OSAP",67,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Supplementary Report:")
"RTN","LR7OSAP",68,0)
 . S C=0 F  S C=$O(^LR(LRDFN,LRSS,LRI,1.2,C)) Q:'C  D
"RTN","LR7OSAP",69,0)
 .. S X=^LR(LRDFN,LRSS,LRI,1.2,C,0),Y=+X,X=$P(X,U,2)
"RTN","LR7OSAP",70,0)
 .. D D^LRU,LN
"RTN","LR7OSAP",71,0)
 .. S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(3,CCNT,"Date: "_Y)
"RTN","LR7OSAP",72,0)
 .. I 'X S ^(0)=^TMP("LRC",$J,GCNT,0)_$$S^LR7OS(1,CCNT," not verified")
"RTN","LR7OSAP",73,0)
 .. I $O(^LR(LRDFN,LRSS,LRI,1.2,C,2,0)) D MODSR^LR7OSAP1
"RTN","LR7OSAP",74,0)
 .. D:X U
"RTN","LR7OSAP",75,0)
 I $D(^LR(LRDFN,LRSS,LRI,2)) D B
"RTN","LR7OSAP",76,0)
 Q
"RTN","LR7OSAP",77,0)
U ;
"RTN","LR7OSAP",78,0)
 D WRAP^LR7OSAP1("^LR("_LRDFN_","""_LRSS_""","_LRI_",1.2,"_C_",1)",79)
"RTN","LR7OSAP",79,0)
 Q
"RTN","LR7OSAP",80,0)
B ;
"RTN","LR7OSAP",81,0)
 S C=0
"RTN","LR7OSAP",82,0)
 F  S C=$O(^LR(LRDFN,LRSS,LRI,2,C)) Q:'C  D SP
"RTN","LR7OSAP",83,0)
 Q
"RTN","LR7OSAP",84,0)
SP ;
"RTN","LR7OSAP",85,0)
 S G=0
"RTN","LR7OSAP",86,0)
 F  S G=$O(^LR(LRDFN,LRSS,LRI,2,C,5,G)) Q:'G  S X=^(G,0),Y=$P(X,"^",2),E=$P(X,"^",3),E(1)=$P(X,"^")_":",E(1)=$P($P($G(LR(LRSS)),E(1),2),";") D D^LRU S T(2)=Y D WP
"RTN","LR7OSAP",87,0)
 Q
"RTN","LR7OSAP",88,0)
WP ;
"RTN","LR7OSAP",89,0)
 D LN
"RTN","LR7OSAP",90,0)
 S X=E(1)_" "_E_" Date: "_T(2)_" ",^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,X)
"RTN","LR7OSAP",91,0)
 D WRAP^LR7OSAP1("^LR("_LRDFN_","""_LRSS_""","_LRI_",2,"_C_",5,"_G_",1)",79)
"RTN","LR7OSAP",92,0)
 Q
"RTN","LR7OSAP",93,0)
A ;
"RTN","LR7OSAP",94,0)
 D WRAP^LR7OSAP1("^LR("_LRDFN_","""_LRSS_""","_LRI_",97)",79)
"RTN","LR7OSAP",95,0)
 Q
"RTN","LR7OSAP",96,0)
LN ;Increment the counter
"RTN","LR7OSAP",97,0)
 S GCNT=GCNT+1,CCNT=1
"RTN","LR7OSAP",98,0)
 Q
"RTN","LR7OSAP",99,0)
EN ;Get AP results
"RTN","LR7OSAP",100,0)
 I $S('$D(SUBHEAD):1,1:$D(SUBHEAD("CYTOPATHOLOGY"))) D CY
"RTN","LR7OSAP",101,0)
 I $S('$D(SUBHEAD):1,1:$D(SUBHEAD("SURGICAL PATHOLOGY"))) D SPA
"RTN","LR7OSAP",102,0)
 I $S('$D(SUBHEAD):1,1:$D(SUBHEAD("EM"))) D EM
"RTN","LR7OSAP",103,0)
 I $S('$D(SUBHEAD):1,1:$D(SUBHEAD("AUTOPSY"))),$D(^LR(LRDFN,"AU")) D AU
"RTN","LR7OSAP",104,0)
 Q
"RTN","LR7OSAP",105,0)
CY S LRSS="CY",LRAA(1)="CYTOPATHOLOGY",LRAA=+$O(^LRO(68,"B",LRAA(1),0)) S:'LRAA LRAA=$$FIND(LRSS) D GET
"RTN","LR7OSAP",106,0)
 Q
"RTN","LR7OSAP",107,0)
SPA S LRSS="SP",LRAA(1)="SURGICAL PATHOLOGY",LRAA=+$O(^LRO(68,"B",LRAA(1),0)) S:'LRAA LRAA=$$FIND(LRSS) D GET
"RTN","LR7OSAP",108,0)
 Q
"RTN","LR7OSAP",109,0)
EM S LRSS="EM",LRAA(1)="ELECTRON MICROSCOPY",LRAA=+$O(^LRO(68,"B","EM",0)) S:'LRAA LRAA=$$FIND(LRSS) D GET
"RTN","LR7OSAP",110,0)
 Q
"RTN","LR7OSAP",111,0)
AU D EN^LR7OSAP2(LRDFN)
"RTN","LR7OSAP",112,0)
 Q
"RTN","LR7OSAP",113,0)
FIND(SS) ;Find a valid entry in 68
"RTN","LR7OSAP",114,0)
 ;SS=LRSS value to look for
"RTN","LR7OSAP",115,0)
 N I,Y
"RTN","LR7OSAP",116,0)
 S I=0,Y="" F  S I=$O(^LRO(68,I)) Q:I<1  I $P($G(^LRO(68,I,0)),"^",2)=SS S Y=I Q
"RTN","LR7OSAP",117,0)
 Q Y
"RTN","LR7OSAP1")
0^47^B24974232
"RTN","LR7OSAP1",1,0)
LR7OSAP1 ;slc/dcm/wty/kll - Silent AP rpt cont. ;3/28/2002
"RTN","LR7OSAP1",2,0)
 ;;5.2;LAB SERVICE;**121,227,230,259**;Sep 27, 1994
"RTN","LR7OSAP1",3,0)
 Q:'$D(^XUSEC("LRLAB",DUZ))
"RTN","LR7OSAP1",4,0)
 D LN
"RTN","LR7OSAP1",5,0)
 S $P(LR("%"),"-",GIOM)="",^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,LR("%"))
"RTN","LR7OSAP1",6,0)
 D LN
"RTN","LR7OSAP1",7,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"SNOMED/ICD codes:")
"RTN","LR7OSAP1",8,0)
 S C=0
"RTN","LR7OSAP1",9,0)
 F  S C=$O(^LR(LRDFN,LRSS,LRI,2,C)) Q:'C  S T=+^(C,0),T=^LAB(61,T,0) D
"RTN","LR7OSAP1",10,0)
 . D LN
"RTN","LR7OSAP1",11,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"T-"_$P(T,"^",2)_": "),X=$P(T,"^")
"RTN","LR7OSAP1",12,0)
 . D:LR(69.2,.05) C^LRUA
"RTN","LR7OSAP1",13,0)
 . S ^(0)=^TMP("LRC",$J,GCNT,0)_X
"RTN","LR7OSAP1",14,0)
 . D M
"RTN","LR7OSAP1",15,0)
 D LINE^LR7OSUM4
"RTN","LR7OSAP1",16,0)
 S C=0
"RTN","LR7OSAP1",17,0)
 F  S C=$O(^LR(LRDFN,LRSS,LRI,3,C)) Q:'C  S X=+^(C,0),X=$G(^ICD9(X,0)) I $L(X) D
"RTN","LR7OSAP1",18,0)
 . S X(9)=$P(X,"^"),X=$P(X,"^",3)
"RTN","LR7OSAP1",19,0)
 . D LN
"RTN","LR7OSAP1",20,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"ICD code: "_X(9))
"RTN","LR7OSAP1",21,0)
 . D:LR(69.2,.05) C^LRUA
"RTN","LR7OSAP1",22,0)
 . S ^(0)=^TMP("LRC",$J,GCNT,0)_$$S^LR7OS(20,CCNT,X)
"RTN","LR7OSAP1",23,0)
 Q
"RTN","LR7OSAP1",24,0)
M ;
"RTN","LR7OSAP1",25,0)
 S B=0
"RTN","LR7OSAP1",26,0)
 F  S B=$O(^LR(LRDFN,LRSS,LRI,2,C,2,B)) Q:'B  S M=+^(B,0),M=$G(^LAB(61.1,M,0)) I $L(M) D
"RTN","LR7OSAP1",27,0)
 . D LN
"RTN","LR7OSAP1",28,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(5,CCNT,"M-"_$P(M,"^",2)_": "),X=$P(M,"^")
"RTN","LR7OSAP1",29,0)
 . D:LR(69.2,.05) C^LRUA
"RTN","LR7OSAP1",30,0)
 . S ^(0)=^TMP("LRC",$J,GCNT,0)_X
"RTN","LR7OSAP1",31,0)
 . D EX
"RTN","LR7OSAP1",32,0)
 F B=1.4,3.3,4.5 S F=0 F  S F=$O(^LR(LRDFN,LRSS,LRI,2,C,$P(B,"."),F)) Q:'F  D A
"RTN","LR7OSAP1",33,0)
 Q
"RTN","LR7OSAP1",34,0)
A ;
"RTN","LR7OSAP1",35,0)
 S M=+^LR(LRDFN,LRSS,LRI,2,C,$P(B,"."),F,0),E="61."_$P(B,".",2),M=^LAB(E,M,0)
"RTN","LR7OSAP1",36,0)
 D LN
"RTN","LR7OSAP1",37,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(5,CCNT,$S(B=1.4:"D-",B=3.3:"F-",B=4.5:"P-",1:"")_$P(M,"^",2)),X=$P(M,"^")
"RTN","LR7OSAP1",38,0)
 D:LR(69.2,.05) C^LRUA
"RTN","LR7OSAP1",39,0)
 S ^(0)=^TMP("LRC",$J,GCNT,0)_": "_X
"RTN","LR7OSAP1",40,0)
 Q
"RTN","LR7OSAP1",41,0)
EX ;
"RTN","LR7OSAP1",42,0)
 S G=0
"RTN","LR7OSAP1",43,0)
 F  S G=$O(^LR(LRDFN,LRSS,LRI,2,C,2,B,1,G)) Q:'G  S E=+^(G,0),E=$G(^LAB(61.2,E,0)) I $L(E) D
"RTN","LR7OSAP1",44,0)
 . D LN
"RTN","LR7OSAP1",45,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(10,CCNT,"E-"_$P(E,"^",2)_": "),X=$P(E,"^")
"RTN","LR7OSAP1",46,0)
 . D:LR(69.2,.05) C^LRUA
"RTN","LR7OSAP1",47,0)
 . S ^(0)=^TMP("LRC",$J,GCNT,0)_X
"RTN","LR7OSAP1",48,0)
 Q
"RTN","LR7OSAP1",49,0)
LN ;Increment the counter
"RTN","LR7OSAP1",50,0)
 S GCNT=GCNT+1,CCNT=1
"RTN","LR7OSAP1",51,0)
 Q
"RTN","LR7OSAP1",52,0)
MOD ;Modified report stuff
"RTN","LR7OSAP1",53,0)
 N A,B
"RTN","LR7OSAP1",54,0)
 D LN
"RTN","LR7OSAP1",55,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(28,CCNT,"*+* MODIFIED REPORT *+*")
"RTN","LR7OSAP1",56,0)
 D LN
"RTN","LR7OSAP1",57,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"(Last modified: ")
"RTN","LR7OSAP1",58,0)
 S B=0
"RTN","LR7OSAP1",59,0)
 F A=0:0 S A=$O(^LR(LRDFN,LRSS,LRI,LR(0),A)) Q:'A  S B=A
"RTN","LR7OSAP1",60,0)
 Q:'$D(^LR(LRDFN,LRSS,LRI,LR(0),B,0))  S A=^(0),Y=+A,A=$P(A,"^",2),A=$P($G(^VA(200,A,0),A),"^")
"RTN","LR7OSAP1",61,0)
 D D^LRU
"RTN","LR7OSAP1",62,0)
 S ^(0)=^TMP("LRC",$J,GCNT,0)_Y_" typed by "_A_")"
"RTN","LR7OSAP1",63,0)
 D:$D(LRQ(9)) M1
"RTN","LR7OSAP1",64,0)
 Q
"RTN","LR7OSAP1",65,0)
MODSR ;Modified Supplementary Report Audit Info
"RTN","LR7OSAP1",66,0)
 N LRTEXT,LRSP1,LRSP2,LRFILE,LRIENS,LRR1,LRR2
"RTN","LR7OSAP1",67,0)
 S LRFILE=$S(LRSS="CY":63.9072,LRSS="SP":63.8172,LRSS="EM":63.2072,1:"")
"RTN","LR7OSAP1",68,0)
 Q:LRFILE=""
"RTN","LR7OSAP1",69,0)
 D LN
"RTN","LR7OSAP1",70,0)
 S LRTEXT="SUPPLEMENTARY REPORT HAS BEEN ADDED/MODIFIED"
"RTN","LR7OSAP1",71,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(14,CCNT,"*+* "_LRTEXT_" *+*")
"RTN","LR7OSAP1",72,0)
 D LN
"RTN","LR7OSAP1",73,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"(Added/Last modified: ")
"RTN","LR7OSAP1",74,0)
 S LRIENS=C_","_LRI_","_LRDFN_","
"RTN","LR7OSAP1",75,0)
 S LRSP1=0
"RTN","LR7OSAP1",76,0)
 F  S LRSP1=$O(^LR(LRDFN,LRSS,LRI,1.2,C,2,LRSP1)) Q:'LRSP1  D
"RTN","LR7OSAP1",77,0)
 .S LRSP2=LRSP1
"RTN","LR7OSAP1",78,0)
 Q:'$D(^LR(LRDFN,LRSS,LRI,1.2,C,2,LRSP2,0))
"RTN","LR7OSAP1",79,0)
 S LRS2=^(0),Y=+LRS2,LRS2A=$P(LRS2,"^",2),LRSGN=" typed by "
"RTN","LR7OSAP1",80,0)
 ;If supp rpt is released, display 'signed by' instead of 'typed by'
"RTN","LR7OSAP1",81,0)
 I $P(LRS2,"^",3) S Y=$P(LRS2,"^",4),LRS2A=$P(LRS2,"^",3),LRSGN=" signed by "
"RTN","LR7OSAP1",82,0)
 D D^LRU
"RTN","LR7OSAP1",83,0)
 S LRS2A=$S($D(^VA(200,LRS2A,0)):$P(^(0),"^"),1:LRS2A)
"RTN","LR7OSAP1",84,0)
 S LRR1=Y,LRR2=LRS2A
"RTN","LR7OSAP1",85,0)
 ;S LRIENS=LRSP2_","_LRIENS
"RTN","LR7OSAP1",86,0)
 ;S LRR1=$$GET1^DIQ(LRFILE,LRIENS,.01)
"RTN","LR7OSAP1",87,0)
 ;S LRR2=$$GET1^DIQ(LRFILE,LRIENS,.02)
"RTN","LR7OSAP1",88,0)
 S ^(0)=^TMP("LRC",$J,GCNT,0)_LRR1_LRSGN_LRR2_")"
"RTN","LR7OSAP1",89,0)
 Q
"RTN","LR7OSAP1",90,0)
M1 ;
"RTN","LR7OSAP1",91,0)
 S A=0
"RTN","LR7OSAP1",92,0)
 F  S A=$O(^LR(LRDFN,LRSS,LRI,LR(0),A)) Q:'A  S LRT=^(A,0),Y=+LRT,X=$P(LRT,"^",2),X=$P($G(^VA(200,X,0),X),"^") D
"RTN","LR7OSAP1",93,0)
 . D D^LRU,LN
"RTN","LR7OSAP1",94,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"Date modified:"_Y_" typed by "_X)
"RTN","LR7OSAP1",95,0)
 . D F
"RTN","LR7OSAP1",96,0)
 S ^(0)=^TMP("LRC",$J,GCNT,0)_$$S^LR7OS(13,CCNT,"==========Text below appears on final report==========")
"RTN","LR7OSAP1",97,0)
 Q
"RTN","LR7OSAP1",98,0)
 ;
"RTN","LR7OSAP1",99,0)
F ;
"RTN","LR7OSAP1",100,0)
 S B=0
"RTN","LR7OSAP1",101,0)
 F  S B=$O(^LR(LRDFN,LRSS,LRI,LR(0),A,1,B)) Q:'B  S LRT=^(B,0),X=LRT D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,X)
"RTN","LR7OSAP1",102,0)
 Q
"RTN","LR7OSAP1",103,0)
WRAP(ROOT,FMT) ;Wrap text
"RTN","LR7OSAP1",104,0)
 I '$L($G(ROOT)) Q ""
"RTN","LR7OSAP1",105,0)
 S:'$G(FMT) FMT=79
"RTN","LR7OSAP1",106,0)
 N X,LRI,LRTX,LRINDX
"RTN","LR7OSAP1",107,0)
 S LRINDX=0,LRI=0
"RTN","LR7OSAP1",108,0)
 F  S LRI=$O(@ROOT@(LRI)) Q:LRI'>0  D
"RTN","LR7OSAP1",109,0)
 . S X=$S($L($G(@ROOT@(LRI))):@ROOT@(LRI),$L($G(@ROOT@(LRI,0))):@ROOT@(LRI,0),1:""),LRINDX=LRINDX+1
"RTN","LR7OSAP1",110,0)
 . S X=$$FMT(FMT,.LRINDX,X)
"RTN","LR7OSAP1",111,0)
 S LRI=0
"RTN","LR7OSAP1",112,0)
 F  S LRI=$O(LRTX(LRI)) Q:'LRI  D LN^LR7OSAP S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,LRTX(LRI))
"RTN","LR7OSAP1",113,0)
 Q
"RTN","LR7OSAP1",114,0)
FMT(LENGTH,INDEX,TEXT) ;Format text
"RTN","LR7OSAP1",115,0)
 N X,Y,J
"RTN","LR7OSAP1",116,0)
 S Y=1
"RTN","LR7OSAP1",117,0)
 S:'$D(LRTX(INDEX)) LRTX(INDEX)=""
"RTN","LR7OSAP1",118,0)
 S X=$L(TEXT)+$L(LRTX(INDEX))+1
"RTN","LR7OSAP1",119,0)
 I X<255 S TEXT=$S($L(LRTX(INDEX)):LRTX(INDEX)_" "_TEXT,1:TEXT)
"RTN","LR7OSAP1",120,0)
 I X'<255 S INDEX=INDEX+1,LRTX(INDEX)=""
"RTN","LR7OSAP1",121,0)
 S LRTX(INDEX)=""
"RTN","LR7OSAP1",122,0)
 F J=1:1 S X=$P(TEXT," ",J) Q:J>$L(TEXT," ")  D
"RTN","LR7OSAP1",123,0)
 . Q:'$L(X)
"RTN","LR7OSAP1",124,0)
 . I ($L(X)+$L(LRTX(INDEX)))>LENGTH S Y=1,INDEX=INDEX+1,LRTX(INDEX)=""
"RTN","LR7OSAP1",125,0)
 . S LRTX(INDEX)=$S(Y:X,1:LRTX(INDEX)_" "_X),Y=0
"RTN","LR7OSAP1",126,0)
 S LRTX(INDEX)=$$STRIP(LRTX(INDEX))
"RTN","LR7OSAP1",127,0)
 Q INDEX
"RTN","LR7OSAP1",128,0)
STRIP(TEXT) ; Strips white space from text
"RTN","LR7OSAP1",129,0)
 N LRI,LRX
"RTN","LR7OSAP1",130,0)
 S LRX="" F LRI=1:1:$L(TEXT," ") S:$A($P(TEXT," ",LRI))>0 LRX=LRX_$S(LRI=1:"",1:" ")_$P(TEXT," ",LRI)
"RTN","LR7OSAP1",131,0)
 S TEXT=LRX
"RTN","LR7OSAP1",132,0)
 Q TEXT
"RTN","LR7OSAP2")
0^48^B52834321
"RTN","LR7OSAP2",1,0)
LR7OSAP2 ;ISL/RAB/WTY/KLL -Silent Routine for autopsy report;3/28/2002
"RTN","LR7OSAP2",2,0)
 ;;5.2;LAB SERVICE;**230,256,259**;Sep 27, 1994
"RTN","LR7OSAP2",3,0)
 ;
"RTN","LR7OSAP2",4,0)
 ;Reference  to ^DD(63 supported by IA #999
"RTN","LR7OSAP2",5,0)
 ;
"RTN","LR7OSAP2",6,0)
EN(LRDFN) ;
"RTN","LR7OSAP2",7,0)
 N CCNT,GIOM,XPOS,LR,LRSS,X,I,LRAU,LRS,VERIFIED,LRTEXT,LRPTR
"RTN","LR7OSAP2",8,0)
 S XPOS=0,(LRS(5),LR("M"),CCNT)=1,LRSS="AU",GIOM=80
"RTN","LR7OSAP2",9,0)
 D EN^LRUA,^LRAPU
"RTN","LR7OSAP2",10,0)
 S X=$S($D(^LRO(69.2,+Y,0)):^(0),1:""),LRAU(3)=$P(X,"^",3),LRAU(4)=$P(X,"^",4)
"RTN","LR7OSAP2",11,0)
 D LINE,LN
"RTN","LR7OSAP2",12,0)
 S ^TMP("LRH",$J,"AUTOPSY")=GCNT,^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(28,CCNT,"---- AUTOPSY ----")
"RTN","LR7OSAP2",13,0)
 S VERIFIED=$P($G(^LR(LRDFN,"AU")),U,15)
"RTN","LR7OSAP2",14,0)
 I 'VERIFIED D  Q
"RTN","LR7OSAP2",15,0)
 . D LN
"RTN","LR7OSAP2",16,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,"Report not verified.")
"RTN","LR7OSAP2",17,0)
 D TIUCHK^LRAPUTL(.LRPTR,LRDFN,LRSS)
"RTN","LR7OSAP2",18,0)
 I +$G(LRPTR) D  Q
"RTN","LR7OSAP2",19,0)
 .D MAIN^LR7OSAP3(LRPTR)
"RTN","LR7OSAP2",20,0)
 D ZZ,LINE
"RTN","LR7OSAP2",21,0)
 I $D(^LR(LRDFN,81)) D 
"RTN","LR7OSAP2",22,0)
 . D LN
"RTN","LR7OSAP2",23,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,LRAU(3))
"RTN","LR7OSAP2",24,0)
 . D F(81)
"RTN","LR7OSAP2",25,0)
 I $D(^LR(LRDFN,82)) D 
"RTN","LR7OSAP2",26,0)
 . D LN
"RTN","LR7OSAP2",27,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,LRAU(4))
"RTN","LR7OSAP2",28,0)
 . D F(82)
"RTN","LR7OSAP2",29,0)
 I $O(^LR(LRDFN,84,0)) D
"RTN","LR7OSAP2",30,0)
 . S I=0 F  S I=$O(^LR(LRDFN,84,I)) Q:'I  S X=+^(I,0) D
"RTN","LR7OSAP2",31,0)
 .. D LINE,LN
"RTN","LR7OSAP2",32,0)
 .. S LRTEXT="SUPPLEMENTARY REPORT DATE: "_$$FMTE^XLFDT(X,"1P")
"RTN","LR7OSAP2",33,0)
 .. S ^TMP("LRC",$J,GCNT,0)=LRTEXT
"RTN","LR7OSAP2",34,0)
 .. I $O(^LR(LRDFN,84,I,2,0)) D MODSR
"RTN","LR7OSAP2",35,0)
 .. D WRAP^LR7OSAP1("^LR("_LRDFN_",84,"_I_",1)",79)
"RTN","LR7OSAP2",36,0)
 Q:'$D(^LR(LRDFN,"AW"))&('$D(^("AY")))&('$D(^("AWI")))
"RTN","LR7OSAP2",37,0)
 D WT
"RTN","LR7OSAP2",38,0)
 D LRAPT3
"RTN","LR7OSAP2",39,0)
 ;Removed code that prints SNOMED codes per LR*5.2*259
"RTN","LR7OSAP2",40,0)
 Q
"RTN","LR7OSAP2",41,0)
MODSR ;Modified Autopsy Supplementary Report Audit Info
"RTN","LR7OSAP2",42,0)
 N LRTEXT,LRSP1,LRSP2,LRFILE,LRIENS,LRR1,LRR2
"RTN","LR7OSAP2",43,0)
 S LRFILE=63.3242
"RTN","LR7OSAP2",44,0)
 D LN
"RTN","LR7OSAP2",45,0)
 S LRTEXT="SUPPLEMENTARY REPORT HAS BEEN ADDED/MODIFIED"
"RTN","LR7OSAP2",46,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(14,CCNT,"*** "_LRTEXT_" ***")
"RTN","LR7OSAP2",47,0)
 D LN
"RTN","LR7OSAP2",48,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,"(Added/Last modified: ")
"RTN","LR7OSAP2",49,0)
 S LRIENS=I_","_LRDFN_","
"RTN","LR7OSAP2",50,0)
 S LRSP1=0
"RTN","LR7OSAP2",51,0)
 F  S LRSP1=$O(^LR(LRDFN,84,I,2,LRSP1)) Q:'LRSP1  D
"RTN","LR7OSAP2",52,0)
 .S LRSP2=LRSP1
"RTN","LR7OSAP2",53,0)
 Q:'$D(^LR(LRDFN,84,I,2,LRSP2,0))
"RTN","LR7OSAP2",54,0)
 S LRS2=^(0),Y=+LRS2,LRS2A=$P(LRS2,"^",2),LRSGN=" typed by "
"RTN","LR7OSAP2",55,0)
 ;If supp rpt is released, display 'signed by' instead of 'typed by'
"RTN","LR7OSAP2",56,0)
 I $P(LRS2,"^",3) S Y=$P(LRS2,"^",4),LRS2A=$P(LRS2,"^",3),LRSGN=" signed by "
"RTN","LR7OSAP2",57,0)
 S LRS2A=$S($D(^VA(200,LRS2A,0)):$P(^(0),"^"),1:LRS2A)
"RTN","LR7OSAP2",58,0)
 D D^LRU
"RTN","LR7OSAP2",59,0)
 S LRR1=Y,LRR2=LRS2A
"RTN","LR7OSAP2",60,0)
 ;S LRIENS=LRSP2_","_LRIENS
"RTN","LR7OSAP2",61,0)
 ;S LRR1=$$GET1^DIQ(LRFILE,LRIENS,.01)
"RTN","LR7OSAP2",62,0)
 ;S LRR2=$$GET1^DIQ(LRFILE,LRIENS,.02)
"RTN","LR7OSAP2",63,0)
 S ^(0)=^TMP("LRC",$J,GCNT,0)_LRR1_LRSGN_LRR2_")"
"RTN","LR7OSAP2",64,0)
 Q
"RTN","LR7OSAP2",65,0)
LN ;Increment the counter
"RTN","LR7OSAP2",66,0)
 S GCNT=GCNT+1,CCNT=1
"RTN","LR7OSAP2",67,0)
 Q
"RTN","LR7OSAP2",68,0)
LINE ;Fill in the global with bank lines
"RTN","LR7OSAP2",69,0)
 N X
"RTN","LR7OSAP2",70,0)
 D LN
"RTN","LR7OSAP2",71,0)
 S X="",$P(X," ",GIOM)="",^TMP("LRC",$J,GCNT,0)=X
"RTN","LR7OSAP2",72,0)
 Q
"RTN","LR7OSAP2",73,0)
F(NODE) ;;
"RTN","LR7OSAP2",74,0)
 D WRAP^LR7OSAP1("^LR("_LRDFN_","_NODE_")",79)
"RTN","LR7OSAP2",75,0)
 Q
"RTN","LR7OSAP2",76,0)
D ;
"RTN","LR7OSAP2",77,0)
 N LRB,M,X
"RTN","LR7OSAP2",78,0)
 S LRB=0
"RTN","LR7OSAP2",79,0)
 F  S LRB=$O(^LR(LRDFN,"AY",I,1,LRB)) Q:'LRB  S X=^(LRB,0) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(5,CCNT,$P(^LAB(61.4,+X,0),"^"))
"RTN","LR7OSAP2",80,0)
 S LRB=0
"RTN","LR7OSAP2",81,0)
 F  S LRB=$O(^LR(LRDFN,"AY",I,3,LRB)) Q:'LRB  S X=^(LRB,0) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(5,CCNT,$P(^LAB(61.3,+X,0),"^"))
"RTN","LR7OSAP2",82,0)
 S LRB=0
"RTN","LR7OSAP2",83,0)
 F  S LRB=$O(^LR(LRDFN,"AY",I,4,LRB)) Q:'LRB  S X=^(LRB,0) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(5,CCNT,$P(^LAB(61.5,+X,0),"^"))
"RTN","LR7OSAP2",84,0)
 S M=0
"RTN","LR7OSAP2",85,0)
 F  S M=$O(^LR(LRDFN,"AY",I,2,M)) Q:'M  S X=^(M,0) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(5,CCNT,$P(^LAB(61.1,+X,0),"^")) D E
"RTN","LR7OSAP2",86,0)
 Q
"RTN","LR7OSAP2",87,0)
E ;
"RTN","LR7OSAP2",88,0)
 N E
"RTN","LR7OSAP2",89,0)
 S E=0
"RTN","LR7OSAP2",90,0)
 F  S E=$O(^LR(LRDFN,"AY",I,2,M,1,E)) Q:'E  S X=^(E,0) D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(7,CCNT,$P(^LAB(61.2,+X,0),"^"))
"RTN","LR7OSAP2",91,0)
 Q
"RTN","LR7OSAP2",92,0)
HD ;
"RTN","LR7OSAP2",93,0)
 D LINE
"RTN","LR7OSAP2",94,0)
 D LN
"RTN","LR7OSAP2",95,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,"Organ/tissue:")_$$S^LR7OS(33,CCNT,"SNOMED CODING")
"RTN","LR7OSAP2",96,0)
 Q
"RTN","LR7OSAP2",97,0)
WT ;
"RTN","LR7OSAP2",98,0)
 N B,X,OUT
"RTN","LR7OSAP2",99,0)
 I '$D(^LR(LRDFN,"AW")) D 
"RTN","LR7OSAP2",100,0)
 . D LINE,LN
"RTN","LR7OSAP2",101,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(20,CCNT,"No organ weights entered.")
"RTN","LR7OSAP2",102,0)
 . D LINE
"RTN","LR7OSAP2",103,0)
 I $D(^LR(LRDFN,"AW")) S X=^("AW") D 
"RTN","LR7OSAP2",104,0)
 . S B(9)=$P(X,"^",9),B(1)=$P(X,"^",11,99)
"RTN","LR7OSAP2",105,0)
 . D LINE,LN
"RTN","LR7OSAP2",106,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,"Rt--Lung--Lt  Liver Spleen  RT--Kidney--Lt  Brain  Body Wt(lb)    Ht(in)")
"RTN","LR7OSAP2",107,0)
 I $D(B) D
"RTN","LR7OSAP2",108,0)
 . D LN
"RTN","LR7OSAP2",109,0)
 . S OUT=$$S^LR7OS(XPOS,CCNT,$J($P(X,"^",3),4))_$$S^LR7OS(9,CCNT,$J($P(X,"^",4),4))_$$S^LR7OS(15,CCNT,$J($P(X,"^",5),5))_$$S^LR7OS(22,CCNT,$J($P(X,"^",6),5))_$$S^LR7OS(29,CCNT,$J($P(X,"^",7),4))_$$S^LR7OS(39,CCNT,$J($P(X,"^",8),4))
"RTN","LR7OSAP2",110,0)
 . S OUT=OUT_$$S^LR7OS(45,CCNT,$J($P(X,"^",10),4))_$$S^LR7OS(55,CCNT,$P(X,"^",2))_$$S^LR7OS(68,CCNT,$P(X,"^"))
"RTN","LR7OSAP2",111,0)
 . S ^TMP("LRC",$J,GCNT,0)=OUT
"RTN","LR7OSAP2",112,0)
 D LINE,LN
"RTN","LR7OSAP2",113,0)
 S ^TMP("LRC",$J,GCNT,0)=""
"RTN","LR7OSAP2",114,0)
 I $D(B) S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,"Heart(gm)")
"RTN","LR7OSAP2",115,0)
 I $D(^LR(LRDFN,"AV")) S X=^("AV"),B(2)=$P(X,"^",7,99),^(0)=^TMP("LRC",$J,GCNT,0)_$$S^LR7OS(12,CCNT,"TV(cm)  PV(cm)  MV(cm)  AV(cm)  RV(cm)  LV(cm)")
"RTN","LR7OSAP2",116,0)
 D LN
"RTN","LR7OSAP2",117,0)
 S ^TMP("LRC",$J,GCNT,0)=""
"RTN","LR7OSAP2",118,0)
 I $D(B(9)) S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,$J(B(9),5))
"RTN","LR7OSAP2",119,0)
 I $D(B(2)) D
"RTN","LR7OSAP2",120,0)
 . S OUT=$$S^LR7OS(12,CCNT,$J($P(X,"^"),4))_$$S^LR7OS(20,CCNT,$J($P(X,"^",2),4))_$$S^LR7OS(28,CCNT,$J($P(X,"^",3),4))_$$S^LR7OS(36,CCNT,$J($P(X,"^",4),4))_$$S^LR7OS(44,CCNT,$J($P(X,"^",5),4))_$$S^LR7OS(52,CCNT,$J($P(X,"^",6),4))
"RTN","LR7OSAP2",121,0)
 . S ^(0)=^TMP("LRC",$J,GCNT,0)_OUT
"RTN","LR7OSAP2",122,0)
 . D LINE,LN
"RTN","LR7OSAP2",123,0)
 . S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,"Cavities(ml): Rt--Pleural--Lt  Pericardial  Peritoneal")
"RTN","LR7OSAP2",124,0)
 . D LN
"RTN","LR7OSAP2",125,0)
 . S OUT=$$S^LR7OS(14,CCNT,$J($P(B(2),"^",2),4))_$$S^LR7OS(25,CCNT,$J($P(B(2),"^"),4))_$$S^LR7OS(33,CCNT,$J($P(B(2),"^",3),4))_$$S^LR7OS(45,CCNT,$J($P(B(2),"^",4),4))
"RTN","LR7OSAP2",126,0)
 . S ^TMP("LRC",$J,GCNT,0)=OUT
"RTN","LR7OSAP2",127,0)
 I $D(B(1)) F B=1:1:8 D 
"RTN","LR7OSAP2",128,0)
 . I $P(B(1),"^",B) D 
"RTN","LR7OSAP2",129,0)
 .. S X="25."_B
"RTN","LR7OSAP2",130,0)
 .. D LN
"RTN","LR7OSAP2",131,0)
 .. S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,$P(^DD(63,X,0),"^")_": "_$P(B(1),"^",B))
"RTN","LR7OSAP2",132,0)
 I $D(^LR(LRDFN,"AWI")) S Y=^("AWI") F B=1:1:5 I $P(Y,"^",B) D LN S X=$S(B=1:25.9,1:25.9_(B-1)),^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,$P(^DD(63,X,0),"^")_": "_$P(Y,"^",B))
"RTN","LR7OSAP2",133,0)
 Q
"RTN","LR7OSAP2",134,0)
ZZ ;;
"RTN","LR7OSAP2",135,0)
 D LN
"RTN","LR7OSAP2",136,0)
 N OUT,X,LRLLOC,DA,A,B,C,LR,Y
"RTN","LR7OSAP2",137,0)
 S OUT=$$S^LR7OS(XPOS,CCNT,"Acc #")_$$S^LR7OS(9,CCNT,"Date/time Died")_$$S^LR7OS(27,CCNT,"Age")_$$S^LR7OS(33,CCNT,"AUTOPSY DATA")_$$S^LR7OS(53,CCNT,"Date/time of Autopsy"),^TMP("LRC",$J,GCNT,0)=OUT
"RTN","LR7OSAP2",138,0)
 S X=^LR(LRDFN,"AU"),LRLLOC=$P(X,"^",8),DA=LRDFN
"RTN","LR7OSAP2",139,0)
 D D^LRAUAW
"RTN","LR7OSAP2",140,0)
 S Y=LR(63,12)
"RTN","LR7OSAP2",141,0)
 D D^LRU,LN
"RTN","LR7OSAP2",142,0)
 S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(XPOS,CCNT,($P(X,"^",6)_" "_Y))_$$S^LR7OS(26,CCNT,$J($P(X,"^",9),3))_$$S^LR7OS(33,CCNT,PNM)
"RTN","LR7OSAP2",143,0)
 S Y=+X
"RTN","LR7OSAP2",144,0)
 D D^LRU
"RTN","LR7OSAP2",145,0)
 I Y'[1700 S ^(0)=^TMP("LRC",$J,GCNT,0)_$$S^LR7OS(53,CCNT,Y)
"RTN","LR7OSAP2",146,0)
 D LN
"RTN","LR7OSAP2",147,0)
 S ^TMP("LRC",$J,GCNT,0)=""
"RTN","LR7OSAP2",148,0)
 F X(1)=7,10 D
"RTN","LR7OSAP2",149,0)
 . S Y=$P(X,"^",X(1)),Y=$S(Y="":Y,$D(^VA(200,Y,0)):$P(^(0),"^"),1:Y)
"RTN","LR7OSAP2",150,0)
 . I Y]"" S ^TMP("LRC",$J,GCNT,0)=^TMP("LRC",$J,GCNT,0)_$S(X(1)=7:$$S^LR7OS(1,CCNT,"Resident: ")_Y,1:$$S^LR7OS(38,CCNT,"Senior: ")_Y)
"RTN","LR7OSAP2",151,0)
 Q
"RTN","LR7OSAP2",152,0)
LRAPT3 ;COPIED FROM ^LRAPT3
"RTN","LR7OSAP2",153,0)
 ;;
"RTN","LR7OSAP2",154,0)
 N A,C,X,T,F
"RTN","LR7OSAP2",155,0)
 S (F,A)=0
"RTN","LR7OSAP2",156,0)
 F  S A=$O(^LR(LRDFN,"AY",A)) Q:'A  D
"RTN","LR7OSAP2",157,0)
 .I $D(^LR(LRDFN,"AY",A,0)) S T=+^(0) D
"RTN","LR7OSAP2",158,0)
 ..S T(1)=$P($G(^LAB(61,T,0)),"^")
"RTN","LR7OSAP2",159,0)
 ..S C=0 F  S C=$O(^LR(LRDFN,"AY",A,5,C)) Q:'C  D
"RTN","LR7OSAP2",160,0)
 ...S X=^LR(LRDFN,"AY",A,5,C,0) D SP(X) S F=1
"RTN","LR7OSAP2",161,0)
 ;Removed code that prints ICD codes per LR*5.2*259
"RTN","LR7OSAP2",162,0)
 Q
"RTN","LR7OSAP2",163,0)
SP(NODE) ;
"RTN","LR7OSAP2",164,0)
 N Y,E,X,A1,B
"RTN","LR7OSAP2",165,0)
 S Y=$P(NODE,"^",2),E=$P(NODE,"^",3),X=$P(NODE,"^")_":",A1=$P($P(LRAU("S"),X,2),";",1)
"RTN","LR7OSAP2",166,0)
 D D^LRU
"RTN","LR7OSAP2",167,0)
 S T(2)=Y
"RTN","LR7OSAP2",168,0)
 I 'F D LINE,LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,T(1))
"RTN","LR7OSAP2",169,0)
 D LN S ^TMP("LRC",$J,GCNT,0)=$$S^LR7OS(1,CCNT,A1_" "_E_" Date: "_T(2))
"RTN","LR7OSAP2",170,0)
 D WRAP^LR7OSAP1("^LR("_LRDFN_",""AY"","_A_",5,"_C_",1)",80)
"RTN","LR7OSAP2",171,0)
 Q
"RTN","LR7OSAP2",172,0)
OUT ;Show output
"RTN","LR7OSAP2",173,0)
 Q:'$D(^TMP("LRC",$J))
"RTN","LR7OSAP2",174,0)
 N I
"RTN","LR7OSAP2",175,0)
 S I=0
"RTN","LR7OSAP2",176,0)
 F  S I=$O(^TMP("LRC",$J,I)) Q:'I  W !,^(I,0)
"RTN","LR7OSAP2",177,0)
 Q
"RTN","LR7OSAP3")
0^49^B13148912
"RTN","LR7OSAP3",1,0)
LR7OSAP3 ;DALOI/WTY - Silent AP Rpt from TIU;3/27/02
"RTN","LR7OSAP3",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LR7OSAP3",3,0)
 ;
"RTN","LR7OSAP3",4,0)
 ;Reference  to EXTRACT^TIULQ supported by IA #2693
"RTN","LR7OSAP3",5,0)
 ;
"RTN","LR7OSAP3",6,0)
MAIN(LRPTR) ;Main subrouting
"RTN","LR7OSAP3",7,0)
 K ^TMP("LRTIU",$J),^TMP("LRTIUTXT",$J)
"RTN","LR7OSAP3",8,0)
 D EXTRACT
"RTN","LR7OSAP3",9,0)
 D DISSECT
"RTN","LR7OSAP3",10,0)
 Q:LRQUIT
"RTN","LR7OSAP3",11,0)
 ;Calculate LR and TIU checksums,if they don't match, set flag
"RTN","LR7OSAP3",12,0)
 ;  to scramble signature on the report.
"RTN","LR7OSAP3",13,0)
 D CHKSUM
"RTN","LR7OSAP3",14,0)
 I LRCKSUM'=0,LRCKSUM'=TIUCKSUM S LRENCRYP=1
"RTN","LR7OSAP3",15,0)
 ;
"RTN","LR7OSAP3",16,0)
 D GLOSET
"RTN","LR7OSAP3",17,0)
 K ^TMP("LRTIU",$J),^TMP("LRTIUTXT",$J)
"RTN","LR7OSAP3",18,0)
 Q
"RTN","LR7OSAP3",19,0)
EXTRACT ;Extract the report from TIU
"RTN","LR7OSAP3",20,0)
 N LRQUIT,LRFLG,LRTXT,LROR,LRCNT,LRCNTT,LRHFLG
"RTN","LR7OSAP3",21,0)
 Q:'+$G(LRPTR)
"RTN","LR7OSAP3",22,0)
 D EXTRACT^TIULQ(LRPTR,"^TMP(""LRTIU"",$J)",,,,1,,1)
"RTN","LR7OSAP3",23,0)
 Q:'+$P($G(^TMP("LRTIU",$J,LRPTR,"TEXT",0)),"^",3)
"RTN","LR7OSAP3",24,0)
 M ^TMP("LRTIUTXT",$J)=^TMP("LRTIU",$J,LRPTR,"TEXT")
"RTN","LR7OSAP3",25,0)
DISSECT ;Dissect the report into header,body, and footer
"RTN","LR7OSAP3",26,0)
 S (LROR,LRCNT,LRCNTT,LRHFLG,LRQUIT)=0,LRFLG="H"
"RTN","LR7OSAP3",27,0)
 F  S LROR=$O(^TMP("LRTIUTXT",$J,LROR)) Q:LROR'>0!(LRQUIT)  D
"RTN","LR7OSAP3",28,0)
 .S LRTXT=$G(^TMP("LRTIUTXT",$J,LROR,0))
"RTN","LR7OSAP3",29,0)
 .I 'LRHFLG,LRTXT'="$APHDR" D  Q
"RTN","LR7OSAP3",30,0)
 ..S LRQUIT=1
"RTN","LR7OSAP3",31,0)
 .I LRTXT="$APHDR" D  Q
"RTN","LR7OSAP3",32,0)
 ..S LRHFLG=1
"RTN","LR7OSAP3",33,0)
 ..K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LR7OSAP3",34,0)
 .I LRFLG="H" D  Q:LRFLG="T"
"RTN","LR7OSAP3",35,0)
 ..I LRTXT="$TEXT" D  Q
"RTN","LR7OSAP3",36,0)
 ...S ^TMP("LRTIUTXT",$J,"HDR")=LRCNT,LRCNT=0
"RTN","LR7OSAP3",37,0)
 ...K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LR7OSAP3",38,0)
 ...S LRFLG="T",LRCNT=0
"RTN","LR7OSAP3",39,0)
 ..Q:LRFLG="T"
"RTN","LR7OSAP3",40,0)
 ..S LRCNT=LRCNT+1,LRCNTT=LRCNTT+1
"RTN","LR7OSAP3",41,0)
 ..S ^TMP("LRTIUTXT",$J,"HDR",LRCNT)=LRTXT
"RTN","LR7OSAP3",42,0)
 ..K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LR7OSAP3",43,0)
 .I LRFLG="T" D  Q:LRFLG="F"
"RTN","LR7OSAP3",44,0)
 ..I LRTXT="$FTR" D  Q:LRFLG="F"
"RTN","LR7OSAP3",45,0)
 ...S ^TMP("LRTIUTXT",$J,"TEXT")=LRCNT,LRCNT=0
"RTN","LR7OSAP3",46,0)
 ...K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LR7OSAP3",47,0)
 ...S LRFLG="F"
"RTN","LR7OSAP3",48,0)
 ..Q:LRFLG="F"
"RTN","LR7OSAP3",49,0)
 ..S LRCNT=LRCNT+1,LRCNTT=LRCNTT+1
"RTN","LR7OSAP3",50,0)
 ..S ^TMP("LRTIUTXT",$J,"TEXT",LRCNT)=LRTXT
"RTN","LR7OSAP3",51,0)
 ..K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LR7OSAP3",52,0)
 .I LRFLG="F" D
"RTN","LR7OSAP3",53,0)
 ..S LRCNT=LRCNT+1,LRCNTT=LRCNTT+1
"RTN","LR7OSAP3",54,0)
 ..S ^TMP("LRTIUTXT",$J,"FTR",LRCNT)=LRTXT
"RTN","LR7OSAP3",55,0)
 ..K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LR7OSAP3",56,0)
 S ^TMP("LRTIUTXT",$J,"FTR")=LRCNT
"RTN","LR7OSAP3",57,0)
 S ^TMP("LRTIUTXT",$J,0)=LRCNTT
"RTN","LR7OSAP3",58,0)
 Q
"RTN","LR7OSAP3",59,0)
GLOSET ;
"RTN","LR7OSAP3",60,0)
 S LROR=0
"RTN","LR7OSAP3",61,0)
 Q:'$D(^TMP("LRTIUTXT",$J,"HDR"))
"RTN","LR7OSAP3",62,0)
 S LROR=0 F  S LROR=$O(^TMP("LRTIUTXT",$J,"HDR",LROR)) Q:LROR'>0  D
"RTN","LR7OSAP3",63,0)
 .S LRTXT=$G(^TMP("LRTIUTXT",$J,"HDR",LROR))
"RTN","LR7OSAP3",64,0)
 .D LN S ^TMP("LRC",$J,GCNT,0)=LRTXT
"RTN","LR7OSAP3",65,0)
 Q:'$D(^TMP("LRTIUTXT",$J,"TEXT"))
"RTN","LR7OSAP3",66,0)
 S LROR=0
"RTN","LR7OSAP3",67,0)
 F  S LROR=$O(^TMP("LRTIUTXT",$J,"TEXT",LROR)) Q:LROR'>0!(LRQUIT)  D
"RTN","LR7OSAP3",68,0)
 .S LRTXT=$G(^TMP("LRTIUTXT",$J,"TEXT",LROR))
"RTN","LR7OSAP3",69,0)
 .;If signature line, and marked for encryption, scramble signature
"RTN","LR7OSAP3",70,0)
 .I LRTXT["/es/",+$G(LRENCRYP) S LRTXT=$$ENCRYP^XUSRB1(LRTXT)
"RTN","LR7OSAP3",71,0)
 .D LN S ^TMP("LRC",$J,GCNT,0)=LRTXT
"RTN","LR7OSAP3",72,0)
 Q:'$D(^TMP("LRTIUTXT",$J,"FTR"))
"RTN","LR7OSAP3",73,0)
 S LROR=0
"RTN","LR7OSAP3",74,0)
 F  S LROR=$O(^TMP("LRTIUTXT",$J,"FTR",LROR)) Q:LROR'>0  D
"RTN","LR7OSAP3",75,0)
 .S LRTXT=$G(^TMP("LRTIUTXT",$J,"FTR",LROR))
"RTN","LR7OSAP3",76,0)
 .D LN S ^TMP("LRC",$J,GCNT,0)=LRTXT
"RTN","LR7OSAP3",77,0)
 Q
"RTN","LR7OSAP3",78,0)
LN ;Increment the counter
"RTN","LR7OSAP3",79,0)
 S GCNT=GCNT+1,CCNT=1
"RTN","LR7OSAP3",80,0)
 Q
"RTN","LR7OSAP3",81,0)
CHKSUM ;Compare LR and TIU checksums
"RTN","LR7OSAP3",82,0)
 ;Get original checksum value from file 63
"RTN","LR7OSAP3",83,0)
 N LRTREC,LRROOT,LRFILE,LRIENS,LRFLD,LRREL
"RTN","LR7OSAP3",84,0)
 S (LRENCRYP,LRTREC)=0
"RTN","LR7OSAP3",85,0)
 I LRSS="AU" D
"RTN","LR7OSAP3",86,0)
 .S LRTREC=$O(^LR(LRDFN,101,"C",LRPTR,LRTREC))
"RTN","LR7OSAP3",87,0)
 .S LRIENS=LRDFN_","
"RTN","LR7OSAP3",88,0)
 .S LRFILE=63.101
"RTN","LR7OSAP3",89,0)
 I LRSS'="AU" D
"RTN","LR7OSAP3",90,0)
 .S LRTREC=$O(^LR(LRDFN,LRSS,LRI,.05,"C",LRPTR,LRTREC))
"RTN","LR7OSAP3",91,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LR7OSAP3",92,0)
 .S LRFILE=$S(LRSS="SP":63.19,LRSS="CY":63.47,LRSS="EM":63.49,1:"")
"RTN","LR7OSAP3",93,0)
 I LRFILE=""!(LRTREC=0) S LRCKSUM=0 Q
"RTN","LR7OSAP3",94,0)
 ;Retrieve LR checksum
"RTN","LR7OSAP3",95,0)
 S LRIENS=LRTREC_","_LRIENS
"RTN","LR7OSAP3",96,0)
 S LRCKSUM=$$GET1^DIQ(LRFILE,LRIENS,2)
"RTN","LR7OSAP3",97,0)
 I LRCKSUM="" S LRCKSUM=0
"RTN","LR7OSAP3",98,0)
 ;Calculate TIU checksum
"RTN","LR7OSAP3",99,0)
 S TIUVAL="^TIU(8925,"_LRPTR_",""TEXT"")"
"RTN","LR7OSAP3",100,0)
 S TIUCKSUM=$$CHKSUM^XUSESIG1(TIUVAL)
"RTN","LR7OSAP3",101,0)
 Q
"RTN","LRAP")
0^1^B13785163
"RTN","LRAP",1,0)
LRAP ;AVAMC/REG/WTY - ANATOMIC PATH UTILITY ;10/23/01
"RTN","LRAP",2,0)
 ;;5.2;LAB SERVICE;**72,248,259**;Sep 27, 1994
"RTN","LRAP",3,0)
 ;
"RTN","LRAP",4,0)
 ;called by many routines in AP package
"RTN","LRAP",5,0)
 D END,CK G:Y=-1 END D LRDICS G:Y B
"RTN","LRAP",6,0)
 S DIC=68,DIC(0)="AEOQMZ"
"RTN","LRAP",7,0)
 S DIC("A")="Select ANATOMIC PATHOLOGY SECTION: "
"RTN","LRAP",8,0)
 S DIC("S")="I LRDICS[$P(^(0),U,2),$P(^(0),U,2)]"""",$G(^(3,DUZ(2),0))"
"RTN","LRAP",9,0)
 D ^DIC K DIC,LRDICS G:Y<1 END
"RTN","LRAP",10,0)
B S X=$P(Y,U,2) D ^LRUTL G:Y=-1 END Q
"RTN","LRAP",11,0)
AU ;log-in autopsy
"RTN","LRAP",12,0)
 Q  ;see routine LRAUAW
"RTN","LRAP",13,0)
CY ;log-in cytopath
"RTN","LRAP",14,0)
 S (LRMD,LRSIT)=""
"RTN","LRAP",15,0)
 S DR=".06///"_LRAC_";.08///"_$S(LRLLOC["?":"UNKNOWN",1:LRLLOC)
"RTN","LRAP",16,0)
 S DR=DR_";.07;D:X P^LRUA;.011//^S X=LRPRAC(1);.012;.1//NOW"
"RTN","LRAP",17,0)
 S DR=DR_";S LRRC=X;.02;.99;S LRC(5)=X;1"
"RTN","LRAP",18,0)
 S DR(2,63.902)=".01;S LR(63.902)=X;S:'LRCAPA Y=0;.02//^S X=LR(63.902)"
"RTN","LRAP",19,0)
 Q
"RTN","LRAP",20,0)
EM ;log-in electron microscopy
"RTN","LRAP",21,0)
 S (LRMD,LRSIT)=""
"RTN","LRAP",22,0)
 S DR=".06///"_LRAC_";.08///"_$S(LRLLOC["?":"UNKNOWN",1:LRLLOC)
"RTN","LRAP",23,0)
 S DR=DR_";.07;D:X P^LRUA;.011//^S X=LRPRAC(1);.012;.1//NOW;S LRRC=X"
"RTN","LRAP",24,0)
 S DR=DR_";.02;.021;.99;S LRC(5)=X",DR(2,63.202)=.01
"RTN","LRAP",25,0)
 Q
"RTN","LRAP",26,0)
SP ;log-in surg path
"RTN","LRAP",27,0)
 S LR("FS")=+$G(^LAB(69.9,1,11)),(LRMD,LRSIT)=""
"RTN","LRAP",28,0)
 S DR=".06///"_LRAC_";.08///"_$S(LRLLOC["?":"UNKNOWN",1:LRLLOC)
"RTN","LRAP",29,0)
 S DR=DR_";.07//^S X=LR(.07);D:X P^LRUA;.011//^S X=LRPRAC(1);.012;.1//NOW"
"RTN","LRAP",30,0)
 S DR=DR_";S LRRC=X;.02;.99;S LRC(5)=X;S:'LR(""FS"") Y=0;1.3"
"RTN","LRAP",31,0)
 S DR(2,63.812)=.01
"RTN","LRAP",32,0)
 S:LRABV'["SP" LR("FS")=""
"RTN","LRAP",33,0)
 Q
"RTN","LRAP",34,0)
M ;edit path report parameters
"RTN","LRAP",35,0)
 W !
"RTN","LRAP",36,0)
 S DIC="^LRO(69.2,",DIC(0)="AEOQM"
"RTN","LRAP",37,0)
 S DIC("S")="I ""AUCYEMSP""[$P(^(0),U,2)&($P(^(0),U,2)]"""")"
"RTN","LRAP",38,0)
 D ^DIC K DIC G:Y<1 END S DA=+Y
"RTN","LRAP",39,0)
 L +^LRO(69.2,DA):5 I '$T D  G M
"RTN","LRAP",40,0)
 .S MSG="This entry is locked by another user.  Please try again later."
"RTN","LRAP",41,0)
 .D EN^DDIOL(MSG,"","!!") K MSG,DIE,DR,DA
"RTN","LRAP",42,0)
 .D END
"RTN","LRAP",43,0)
 S DR="[LRAPHDR]",DIE="^LRO(69.2,"
"RTN","LRAP",44,0)
 D ^DIE
"RTN","LRAP",45,0)
 L -^LRO(69.2,DA)
"RTN","LRAP",46,0)
 K DIE,DR,DA
"RTN","LRAP",47,0)
 G M
"RTN","LRAP",48,0)
D ;Edit path descriptions
"RTN","LRAP",49,0)
 W ! S DIC="^LAB(62.5,",DIC(0)="AEQLM"
"RTN","LRAP",50,0)
 S DLAYGO=62,DIC("S")="I ""ESCI""[$P(^(0),U,4)"
"RTN","LRAP",51,0)
 D ^DIC K DIC,DLAYGO G:X=""!(X[U) END S DA=+Y
"RTN","LRAP",52,0)
 S DIE("NO^")="",DIE="^LAB(62.5,"
"RTN","LRAP",53,0)
 L +^LAB(62.5,DA):5 I '$T D  G D
"RTN","LRAP",54,0)
 .S MSG="This entry is locked by another user.  Please try again later."
"RTN","LRAP",55,0)
 .D EN^DDIOL(MSG,"","!!") K MSG,DIE,DR,DA
"RTN","LRAP",56,0)
 .D END
"RTN","LRAP",57,0)
 S DR=".01;1;5;I ""ESCI""'[X W $C(7),!,""Enter E, S, C, or I"" S Y=5;10"
"RTN","LRAP",58,0)
 D ^DIE
"RTN","LRAP",59,0)
 L -^LAB(62.5,DA)
"RTN","LRAP",60,0)
 K DIE,DR,DA
"RTN","LRAP",61,0)
 G D
"RTN","LRAP",62,0)
V ;input transform DD(63.08,.11,0)
"RTN","LRAP",63,0)
 I $D(LRH(2)),LRH(2)'=$E(X,1,3) K X W !,"Year received must be same as log-in year (",LRH(2)+1700,") "
"RTN","LRAP",64,0)
 Q
"RTN","LRAP",65,0)
 ;
"RTN","LRAP",66,0)
CK S Y=1 I '$D(DUZ(2)) W !,$C(7)," Something is wrong...",!!,"I can't tell if you're really here...",!!,"Ask your IRM why you don't have a DUZ(2) variable defined!",! S Y=-1 Q
"RTN","LRAP",67,0)
 S LRAA(4)=$P($G(^DIC(4,+DUZ(2),0)),U) I LRAA(4)="" W $C(7),!!,"I can't tell what DIVISION you are from.  Contact your IRM " S Y=-1 Q
"RTN","LRAP",68,0)
 Q
"RTN","LRAP",69,0)
 ;
"RTN","LRAP",70,0)
LRDICS S Y=0,X=$G(LRDICS) I $L(X)=2,"SPCYEMAU"[X D C I Y K LRDICS Q
"RTN","LRAP",71,0)
 S LRDICS=$S($L($G(LRDICS)):LRDICS,1:"SPCYEMAU") Q
"RTN","LRAP",72,0)
C G:$D(LRDICS(2)) CC S (A,B)=0 F  S A=$O(^LRO(68,A)) Q:'A  I $P($G(^LRO(68,A,0)),"^",2)=LRDICS,$G(^(3,DUZ(2),0)) S B=B+1,B(B)=A
"RTN","LRAP",73,0)
 I B=1 S Y=B(1)_U_$P(^LRO(68,B(1),0),U) K A,B Q
"RTN","LRAP",74,0)
 I B>1,$D(LRDICS(1)) S Y=B(1)_U_$P(^LRO(68,B(1),0),U) K A,B
"RTN","LRAP",75,0)
 Q
"RTN","LRAP",76,0)
CC S (A,B)=0 F  S A=$O(^LRO(68,A)) Q:'A  I $P($G(^LRO(68,A,0)),"^",2)=LRDICS S B=B+1,B(B)=A Q
"RTN","LRAP",77,0)
 I B=1 S Y=B(1)_U_$P(^LRO(68,B(1),0),U) K A,B
"RTN","LRAP",78,0)
 Q
"RTN","LRAP",79,0)
 ;
"RTN","LRAP",80,0)
END D V^LRU Q
"RTN","LRAPAUPT")
0^2^B549599
"RTN","LRAPAUPT",1,0)
LRAPAUPT ;AVAMC/REG/WTY - AUTOPSY PRINT ;9/13/01
"RTN","LRAPAUPT",2,0)
 ;;5.2;LAB SERVICE;**72,248,259**;Sep 27, 1994
"RTN","LRAPAUPT",3,0)
 ;
"RTN","LRAPAUPT",4,0)
 N LRFLG
"RTN","LRAPAUPT",5,0)
 S:$G(LREND) LREND=0
"RTN","LRAPAUPT",6,0)
 S LRDICS="AU" D ^LRAP G:'$D(Y) END
"RTN","LRAPAUPT",7,0)
 S LR("Q")=0
"RTN","LRAPAUPT",8,0)
 S LR("AU1")=1,LRAPX=3
"RTN","LRAPAUPT",9,0)
 D XR^LRU,EN2^LRUA,SGL^LRAURPT
"RTN","LRAPAUPT",10,0)
 I LR("Q") D END Q
"RTN","LRAPAUPT",11,0)
 I '$G(POP),'$D(ZTSK),LR("AU1")=1,LRDFN>0 D
"RTN","LRAPAUPT",12,0)
 .S LRFLG=1
"RTN","LRAPAUPT",13,0)
 .D EN^LRAPAUSR
"RTN","LRAPAUPT",14,0)
 .I '+$G(LR("Q")),IOST?1"C-".E D
"RTN","LRAPAUPT",15,0)
 ..K DIR S DIR(0)="E"
"RTN","LRAPAUPT",16,0)
 ..D ^DIR W @IOF
"RTN","LRAPAUPT",17,0)
END ;
"RTN","LRAPAUPT",18,0)
 W:IOST?1"P-".E @IOF
"RTN","LRAPAUPT",19,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LRAPAUPT",20,0)
 D V^LRU
"RTN","LRAPAUPT",21,0)
 Q
"RTN","LRAPAUSR")
0^3^B34065623
"RTN","LRAPAUSR",1,0)
LRAPAUSR ;AVAMC/REG/WTY - AUTOPSY SUPPLEMENTARY REPORT;9/14/01
"RTN","LRAPAUSR",2,0)
 ;;5.2;LAB SERVICE;**1,173,248,259**;Sep 27, 1994
"RTN","LRAPAUSR",3,0)
 ;
"RTN","LRAPAUSR",4,0)
 ;Reference to ^DD(63 supported by IA #10155
"RTN","LRAPAUSR",5,0)
 ;
"RTN","LRAPAUSR",6,0)
 S X="T",%DT="" D ^%DT,D^LRU S LRH(3)=Y,LRFLG=1
"RTN","LRAPAUSR",7,0)
 W !!,LRO(68)," Autopsy Supplementary Reports" D XR^LRU
"RTN","LRAPAUSR",8,0)
 S LRS(1)=$P(^LRO(69.2,LRAA,0),U,3),LRS(2)=$P(^(0),U,4)
"RTN","LRAPAUSR",9,0)
 D EN2^LRUA
"RTN","LRAPAUSR",10,0)
 G END:LRAPX=2,SGL:LRAPX=3,CH:LRAPX=4
"RTN","LRAPAUSR",11,0)
 S XTMP="Someone else is building a print queue for this Accession Area"
"RTN","LRAPAUSR",12,0)
 L +^LRO(69.2,LRAA,3):5 I '$T D EN^DDIOL(XTMP,"","$C(7),!!") K XTMP Q
"RTN","LRAPAUSR",13,0)
GETP ;Add a patient to the report queue
"RTN","LRAPAUSR",14,0)
 W ! S X="" D ^LRUPS G GETP:LRAN["?" I LRAN=-1 L -^LRO(69.2,LRAA,3) Q
"RTN","LRAPAUSR",15,0)
 S FDAIEN(2)=LRAN
"RTN","LRAPAUSR",16,0)
 S FDA(1,69.29,"+2,"_+LRAA_",",.01)=LRDFN
"RTN","LRAPAUSR",17,0)
 D UPDATE^DIE("","FDA(1)","FDAIEN") K FDAIEN G GETP
"RTN","LRAPAUSR",18,0)
CH I '$O(^LRO(69.2,LRAA,3,0)) D  Q
"RTN","LRAPAUSR",19,0)
 .W $C(7),!!,"No AUTOPSY SUPPLEMENTARY REPORTS currently on the "
"RTN","LRAPAUSR",20,0)
 .W "print queue.",!!
"RTN","LRAPAUSR",21,0)
SPC R !,"(D)ouble or (S)ingle spacing of report(s): ",X:DTIME
"RTN","LRAPAUSR",22,0)
 Q:X=""!(X[U)
"RTN","LRAPAUSR",23,0)
 I $E(X)'="D"&($E(X)'="S") D  G SPC
"RTN","LRAPAUSR",24,0)
 .W $C(7),!,"Enter 'S' for single or 'D' for double spacing of reports"
"RTN","LRAPAUSR",25,0)
 S LRS=$S(X="D":"D",1:"")_"W" Q:LRAPX=3
"RTN","LRAPAUSR",26,0)
 W !!,"Save supplementary report list for reprinting "
"RTN","LRAPAUSR",27,0)
 S %=2 D YN^LRU S:%=1 LRSAV=1
"RTN","LRAPAUSR",28,0)
DEV ;
"RTN","LRAPAUSR",29,0)
 W !
"RTN","LRAPAUSR",30,0)
 S %ZIS="Q" D ^%ZIS
"RTN","LRAPAUSR",31,0)
 I POP W ! Q
"RTN","LRAPAUSR",32,0)
 I $D(IO("Q")) D  Q
"RTN","LRAPAUSR",33,0)
 .S ZTDESC="ANAT PATH FINAL REPORT"
"RTN","LRAPAUSR",34,0)
 .S ZTSAVE("LR*")="",ZTRTN="QUE^LRAPAUSR"
"RTN","LRAPAUSR",35,0)
 .D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued, #",ZTSK W !
"RTN","LRAPAUSR",36,0)
 .K ZTSK,IO("Q") D HOME^%ZIS
"RTN","LRAPAUSR",37,0)
QUE U IO D L^LRU,S^LRU,EN^LRUA
"RTN","LRAPAUSR",38,0)
 ;LRSF515=1 indicates that an SF515 is being generated.
"RTN","LRAPAUSR",39,0)
 S:'$D(LRSF515) LRSF515=0
"RTN","LRAPAUSR",40,0)
 S (LRS(5),LRAURPT)=1
"RTN","LRAPAUSR",41,0)
 I $D(LRAP) S LRDFN=LRAP D EN Q:LR("Q")  K LRAP G LST
"RTN","LRAPAUSR",42,0)
 F LRAN=0:0 S LRAN=$O(^LRO(69.2,LRAA,3,LRAN)) Q:'LRAN!(LR("Q"))  D
"RTN","LRAPAUSR",43,0)
 .S LRDFN=+^(LRAN,0) D EN
"RTN","LRAPAUSR",44,0)
LST K:'$D(LRSAV) ^LRO(69.2,LRAA,3) K LRAURPT
"RTN","LRAPAUSR",45,0)
 S:'$D(^LRO(69.2,LRAA,3,0)) ^(0)="^69.29A^0^0"
"RTN","LRAPAUSR",46,0)
 I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRAPAUSR",47,0)
 K LRSAV D K^LRU
"RTN","LRAPAUSR",48,0)
 W:IOST?1"P-".E @IOF D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LRAPAUSR",49,0)
 K %,DIR,DTOUT,DUOUT,DIRUT,X,Y
"RTN","LRAPAUSR",50,0)
 Q
"RTN","LRAPAUSR",51,0)
W W !,LR("%") Q
"RTN","LRAPAUSR",52,0)
E K ^UTILITY($J) S DIWR=IOM-5,DIWL=5,DIWF=LRS Q
"RTN","LRAPAUSR",53,0)
 ;
"RTN","LRAPAUSR",54,0)
EN S LRQ=0,X=^LR(LRDFN,0) Q:'$O(^LR(LRDFN,84,0))  D ^LRUP
"RTN","LRAPAUSR",55,0)
 I '$D(^LR(LRDFN,"AU")) L +^LRO(69.2,LRAA,3,LRAN):5 Q:'$T  D  Q
"RTN","LRAPAUSR",56,0)
 .S DIK="^LRO(69.2,LRAA,3,",DA=LRAN,DA(1)=0
"RTN","LRAPAUSR",57,0)
 .D ^DIK K KA,DIK
"RTN","LRAPAUSR",58,0)
 .L -^LRO(69.2,LRAA,3,LRAN)
"RTN","LRAPAUSR",59,0)
 S X=^LR(LRDFN,"AU"),LRAC=$P(X,"^",6),LRM(2)=$P(X,"^",7)
"RTN","LRAPAUSR",60,0)
 S LRM(1)=$P(X,"^",12),LRW(9)=$P(X,"^",13),LRM(3)=$P(X,"^",10)
"RTN","LRAPAUSR",61,0)
 S Y=$P(X,"^"),LRH(2)=$E(Y,2,3) D D^LRU S LRH(1)=Y
"RTN","LRAPAUSR",62,0)
 S LRLLOC=$P(X,"^",5),AGE=$P(X,"^",9)
"RTN","LRAPAUSR",63,0)
 ;Define the service
"RTN","LRAPAUSR",64,0)
 S Y=$P(X,"^",8),C=$P(^DD(63,14.5,0),U,3)
"RTN","LRAPAUSR",65,0)
 D Y^DIQ S LRSVC=Y
"RTN","LRAPAUSR",66,0)
 ;Define autopsy type
"RTN","LRAPAUSR",67,0)
 S Y=$P(X,"^",11),C=$P(^DD(63,13.7,0),U,3)
"RTN","LRAPAUSR",68,0)
 D Y^DIQ S LRS(3)=Y
"RTN","LRAPAUSR",69,0)
 S DA=LRDFN D D^LRAUAW S Y=LR(63,12) D D^LRU S LRH=Y,X=LRM(1)
"RTN","LRAPAUSR",70,0)
 D:X D^LRUA S LRM(1)=X,X=LRM(2) D:X D^LRUA S LRM(2)=X,X=LRM(3)
"RTN","LRAPAUSR",71,0)
 D:X D^LRUA S LRM(3)=X
"RTN","LRAPAUSR",72,0)
 D H Q:LR("Q")  S LR("F")=1
"RTN","LRAPAUSR",73,0)
 W:LRH(1)="" !?20,"+*+* REPORT INCOMPLETE *+*+"
"RTN","LRAPAUSR",74,0)
 S LRA=0 F  S LRA=$O(^LR(LRDFN,84,LRA)) Q:'LRA!(LR("Q"))  D
"RTN","LRAPAUSR",75,0)
 .S LRB=^LR(LRDFN,84,LRA,0)
"RTN","LRAPAUSR",76,0)
 .D:$Y>(IOSL-13) FT,H Q:LR("Q")
"RTN","LRAPAUSR",77,0)
 .W !!,"SUPPLEMENTARY REPORT DATE: "
"RTN","LRAPAUSR",78,0)
 .S Y=LRB D D^LRU W Y
"RTN","LRAPAUSR",79,0)
 .D:$Y>(IOSL-13) FT,H Q:LR("Q")
"RTN","LRAPAUSR",80,0)
 .D:$P($G(^LR(LRDFN,84,LRA,2,0)),U,4) SUPA
"RTN","LRAPAUSR",81,0)
 .D WRT
"RTN","LRAPAUSR",82,0)
 Q:LR("Q")  D FT Q
"RTN","LRAPAUSR",83,0)
WRT D E S LRC=0
"RTN","LRAPAUSR",84,0)
 F LRZ=0:1 S LRC=$O(^LR(LRDFN,84,LRA,1,LRC)) Q:'LRC!(LR("Q"))  D
"RTN","LRAPAUSR",85,0)
 .D:$Y>(IOSL-13) FT,H S LR("F")=1 Q:LR("Q")
"RTN","LRAPAUSR",86,0)
 .S X=^LR(LRDFN,84,LRA,1,LRC,0) D:X["|TOP|" TOP D ^DIWP
"RTN","LRAPAUSR",87,0)
 Q:LR("Q")  D:LRZ ^DIWW
"RTN","LRAPAUSR",88,0)
 Q
"RTN","LRAPAUSR",89,0)
SUPA ;Print supplementary report audit information
"RTN","LRAPAUSR",90,0)
 W !?14,"*+* SUPPLEMENTARY REPORT HAS BEEN ADDED/MODIFIED*+*"
"RTN","LRAPAUSR",91,0)
 W !,"(Added/Last modified: "
"RTN","LRAPAUSR",92,0)
 S (A,B)=0 F  S A=$O(^LR(LRDFN,84,LRA,2,A)) Q:'A!(LR("Q"))  D
"RTN","LRAPAUSR",93,0)
 .S B=A
"RTN","LRAPAUSR",94,0)
 Q:LR("Q")
"RTN","LRAPAUSR",95,0)
 Q:'$D(^LR(LRDFN,84,LRA,2,B,0))
"RTN","LRAPAUSR",96,0)
 S A=^(0),Y=+A,LRSGN=" typed by ",A2=$P(A,"^",2)
"RTN","LRAPAUSR",97,0)
 I $P(A,"^",3) D
"RTN","LRAPAUSR",98,0)
 .S LRSGN=" signed by ",A2=$P(A,"^",3),Y=$P(A,"^",4)
"RTN","LRAPAUSR",99,0)
 S A2=$S($D(^VA(200,A2,0)):$P(^(0),"^"),1:A2)
"RTN","LRAPAUSR",100,0)
 ;If supp rpt is released, display 'signed by' instead of 'typed by'
"RTN","LRAPAUSR",101,0)
 D D^LRU W Y,LRSGN,A2,")"
"RTN","LRAPAUSR",102,0)
 D:$D(LRQ(9)) SUPM
"RTN","LRAPAUSR",103,0)
 Q
"RTN","LRAPAUSR",104,0)
SUPM ;Print previous versions of supplementary reports
"RTN","LRAPAUSR",105,0)
 ;This is used by menu option 'Print path modifications [LRAPMOD]'
"RTN","LRAPAUSR",106,0)
 ;
"RTN","LRAPAUSR",107,0)
 S A=0 F  S A=$O(^LR(LRDFN,84,LRA,2,A)) Q:'A!(LR("Q"))  D
"RTN","LRAPAUSR",108,0)
 .S LRT=^LR(LRDFN,84,LRA,2,A,0)
"RTN","LRAPAUSR",109,0)
 .D:$Y>(IOSL-13) FT,H Q:LR("Q")
"RTN","LRAPAUSR",110,0)
 .S Y=+LRT,Y2="modified: ",X=$P(LRT,"^",2),LRSGN="  typed by "
"RTN","LRAPAUSR",111,0)
 .;If supp rpt is released, display 'signed by' instead of 'typed by'
"RTN","LRAPAUSR",112,0)
 .I $P(LRT,"^",3) S LRSGN=" signed by",X=$P(LRT,"^",3),Y=$P(LRT,"^",4),Y2="released: "
"RTN","LRAPAUSR",113,0)
 .S X=$S($D(^VA(200,X,0)):$P(^(0),"^"),1:X)
"RTN","LRAPAUSR",114,0)
 .D D^LRU W !,"Date ",Y2,Y,LRSGN,X
"RTN","LRAPAUSR",115,0)
 .K ^UTILITY($J) S DIWR=IOM-5,DIWL=5,DIWF="W"
"RTN","LRAPAUSR",116,0)
 .S B=0
"RTN","LRAPAUSR",117,0)
 .F LRZ=0:1 S B=$O(^LR(LRDFN,84,LRA,2,A,1,B)) Q:'B!(LR("Q"))  D
"RTN","LRAPAUSR",118,0)
 ..S LRT=^LR(LRDFN,84,LRA,2,A,1,B,0)
"RTN","LRAPAUSR",119,0)
 ..D:$Y>(IOSL-13) FT,H Q:LR("Q")
"RTN","LRAPAUSR",120,0)
 ..S X=LRT D ^DIWP
"RTN","LRAPAUSR",121,0)
 .Q:LR("Q")  D:LRZ ^DIWW
"RTN","LRAPAUSR",122,0)
 Q:LR("Q")
"RTN","LRAPAUSR",123,0)
 W !?13,"==========Text below appears on final report=========="
"RTN","LRAPAUSR",124,0)
 Q
"RTN","LRAPAUSR",125,0)
H ;Header
"RTN","LRAPAUSR",126,0)
 I $D(LR("F")),IOST?1"C".E D CONT  Q:LR("Q")
"RTN","LRAPAUSR",127,0)
 W:($D(LR("F"))) @IOF
"RTN","LRAPAUSR",128,0)
 S LRQ=LRQ+1
"RTN","LRAPAUSR",129,0)
 ;W:IOST?1"C".E!(IOST'?1"C".E&('$D(LRFLG))) @IOF,!
"RTN","LRAPAUSR",130,0)
 ;K LRFLG
"RTN","LRAPAUSR",131,0)
 W ! D W
"RTN","LRAPAUSR",132,0)
 W !?5,"CLINICAL RECORD |",?40,"AUTOPSY SUPPLEMENTARY REPORT"
"RTN","LRAPAUSR",133,0)
 W ?73,"Pg ",LRQ,!,LR("%")
"RTN","LRAPAUSR",134,0)
 W !,"Date died: ",LRH,?40,"| Autopsy date: ",LRH(1)
"RTN","LRAPAUSR",135,0)
 W !,"Resident: ",LRM(2),?40,"| ",LRS(3)
"RTN","LRAPAUSR",136,0)
 W ?56,"Autopsy No. ",$S(LRQ(8)]"":LRQ(8)_LRH(2)_" "_LRAC,1:LRAC)
"RTN","LRAPAUSR",137,0)
 W !,LR("%")
"RTN","LRAPAUSR",138,0)
 Q
"RTN","LRAPAUSR",139,0)
FT ;Footer
"RTN","LRAPAUSR",140,0)
 Q:LR("Q")
"RTN","LRAPAUSR",141,0)
 I IOSL'>66 F  Q:$Y>(IOSL-13)  W !
"RTN","LRAPAUSR",142,0)
 D W W !!,"Pathologist: ",LRM(3),?52,LRW(9),?55,"| Date ",$E(LRH(3),1,12)
"RTN","LRAPAUSR",143,0)
 D W W !,LRQ(1),?(IOM-30),"AUTOPSY SUPPLEMENTARY REPORT"
"RTN","LRAPAUSR",144,0)
 W !,$E(LRP,1,30),?31,SSN,?49,"SEX:",SEX,?55,"DOB:",DOB,!,LRLLOC
"RTN","LRAPAUSR",145,0)
 W ?31,LRM(1),?55,"AGE AT DEATH: ",AGE
"RTN","LRAPAUSR",146,0)
 Q
"RTN","LRAPAUSR",147,0)
SGL ;Entry point for printing single report
"RTN","LRAPAUSR",148,0)
 S X="" D ^LRUPS G:LRAN="?" SGL Q:LRAN=-1
"RTN","LRAPAUSR",149,0)
 I $D(LR("AU1")),'$P(^LR(LRDFN,"AU"),U,15) D  Q
"RTN","LRAPAUSR",150,0)
 .W $C(7),!!,"Report not verified."
"RTN","LRAPAUSR",151,0)
 D SPC Q:X=""!(X[U)
"RTN","LRAPAUSR",152,0)
 S LRAP=LRDFN,LRSAV=1
"RTN","LRAPAUSR",153,0)
 D EN2^LRUA
"RTN","LRAPAUSR",154,0)
 G DEV
"RTN","LRAPAUSR",155,0)
CONT ;
"RTN","LRAPAUSR",156,0)
 K DIR S DIR(0)="E"
"RTN","LRAPAUSR",157,0)
 D ^DIR W !
"RTN","LRAPAUSR",158,0)
 S:$D(DTOUT)!(X[U) LR("Q")=1
"RTN","LRAPAUSR",159,0)
 Q
"RTN","LRAPAUSR",160,0)
END ;
"RTN","LRAPAUSR",161,0)
 W $C(7),!!,"OK to delete the AUTOPSY SUPPLEMENTARY REPORT list "
"RTN","LRAPAUSR",162,0)
 S %=2 D YN^LRU
"RTN","LRAPAUSR",163,0)
 I %=1 K ^LRO(69.2,LRAA,3) S ^LRO(69.2,LRAA,3,0)="^69.29A^0^0" D  Q
"RTN","LRAPAUSR",164,0)
 .W $C(7),!,"LIST DELETED !",!
"RTN","LRAPAUSR",165,0)
 W !!,"OK, LET'S FORGET IT.",!
"RTN","LRAPAUSR",166,0)
 Q
"RTN","LRAPAUSR",167,0)
TOP S Z=$P(X,"|TOP|",1)_$P(X,"|TOP|",2)
"RTN","LRAPAUSR",168,0)
 D FT,H S X=Z,LR("F")=1
"RTN","LRAPAUSR",169,0)
 Q
"RTN","LRAPBR")
0^4^B6339003
"RTN","LRAPBR",1,0)
LRAPBR ;DALOI/WTY - AP Browser Print/TIU TMP Global;04/03/01
"RTN","LRAPBR",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPBR",3,0)
 ;
"RTN","LRAPBR",4,0)
 ;Reference to ^DPT supported by IA #918
"RTN","LRAPBR",5,0)
 ;
"RTN","LRAPBR",6,0)
INIT(LRAA,LRSS,LRI,LRDFN,LRAA1,LRAU,LRTIU,LRNTIME) ;
"RTN","LRAPBR",7,0)
 ;Define variables and arrays used for report display
"RTN","LRAPBR",8,0)
 N LRIENS,LCT,LREFLG,LRPRAC
"RTN","LRAPBR",9,0)
 S:'$D(LRTIU) LRTIU=0
"RTN","LRAPBR",10,0)
 ;KLL-Change all "-" and "=" to "- " and "=-"
"RTN","LRAPBR",11,0)
 S $P(LR("%"),"- ",IOM/2)="- "
"RTN","LRAPBR",12,0)
 I $L(LR("%"))>(IOM-1) S LR("%")=$E(LR("%"),1,(IOM-1))
"RTN","LRAPBR",13,0)
 S $P(LR("%1"),"=-",IOM/2)="=-"
"RTN","LRAPBR",14,0)
 I $L(LR("%1"))>(IOM-1) S LR("%1")=$E(LR("%1"),1,(IOM-1))
"RTN","LRAPBR",15,0)
 S LRQ(8)=$S($D(^LRO(69.2,LRAA,0)):$P(^(0),"^",8),1:"")
"RTN","LRAPBR",16,0)
 S LRQ=0,LRQ(1)=$$INS^LRU
"RTN","LRAPBR",17,0)
 I LRAU D
"RTN","LRAPBR",18,0)
 .S LRS="W",LRAP=LRDFN,LRXR="A"_LRSS,LRXREF=LRXR_"A"
"RTN","LRAPBR",19,0)
 .S LR(.21)=+$G(^LRO(69.2,LRAA,.2)),LRS(5)=1
"RTN","LRAPBR",20,0)
 .D EN^LRUA
"RTN","LRAPBR",21,0)
 .D ^LRUP
"RTN","LRAPBR",22,0)
 I 'LRAU D
"RTN","LRAPBR",23,0)
 .D SET^LRUA
"RTN","LRAPBR",24,0)
 .S LRA=1
"RTN","LRAPBR",25,0)
 .S LRS(5)=1,LRQ(2)=1
"RTN","LRAPBR",26,0)
 .S LR("DIWF")=$S($P(^LRO(69.2,LRAA,0),"^",6)="D":"D",1:"")_"W"
"RTN","LRAPBR",27,0)
MAIN ;Main Subroutine
"RTN","LRAPBR",28,0)
 K ^UTILITY($J)
"RTN","LRAPBR",29,0)
 D:'LRAU ENTER^LRAPBR1
"RTN","LRAPBR",30,0)
 D:LRAU ENTER^LRAPBR4
"RTN","LRAPBR",31,0)
 I 'LRAU,'LRTIU D
"RTN","LRAPBR",32,0)
 .D POW,^LRAPBR2
"RTN","LRAPBR",33,0)
 .I $D(^LR(LRDFN,"AU")),$P(^LR(LRDFN,"AU"),"^") D ^LRAPBR5
"RTN","LRAPBR",34,0)
 I LRTIU,'LRAU D ESIGLN^LRAPBR1
"RTN","LRAPBR",35,0)
 D:'LRAU FOOTER^LRAPBR1
"RTN","LRAPBR",36,0)
 D:'LRTIU BROWSER
"RTN","LRAPBR",37,0)
 D END
"RTN","LRAPBR",38,0)
 Q
"RTN","LRAPBR",39,0)
POW ;Determine POW or Persian Gulf status
"RTN","LRAPBR",40,0)
 I $P($G(^LR(LRDFN,0)),"^",2)=2 D
"RTN","LRAPBR",41,0)
 .S LRPOW=0
"RTN","LRAPBR",42,0)
 .I $D(^DPT(DFN,.52)) S:$P(^(.52),U,5)="Y" LRPOW=1
"RTN","LRAPBR",43,0)
 .I $D(^DPT(DFN,.322)) S:$P($G(^(.322)),"^",10)="Y" LRPOW=1
"RTN","LRAPBR",44,0)
 .D ^LRAPBRPW
"RTN","LRAPBR",45,0)
 .K LRPOW
"RTN","LRAPBR",46,0)
 Q
"RTN","LRAPBR",47,0)
FINAL ;Final Section
"RTN","LRAPBR",48,0)
 ;Print text in field SNOMED & TC CODING (#10) of the LAB SECTION
"RTN","LRAPBR",49,0)
 ;PRINT FILE (#69.2)
"RTN","LRAPBR",50,0)
 Q:'$P($G(^LRO(69.2,LRAA,10,0)),"^",4)
"RTN","LRAPBR",51,0)
 K LRTMP,^UTILITY($J,"W")
"RTN","LRAPBR",52,0)
 S LRFILE=69.2,LRFLD=10,LRIENS=LRAA_","
"RTN","LRAPBR",53,0)
 N X,DIWR,DIWL
"RTN","LRAPBR",54,0)
 S X=$$GET1^DIQ(LRFILE,LRIENS,LRFLD,"","LRTMP")
"RTN","LRAPBR",55,0)
 S DIWR=IOM-5,DIWL=5,DIWF=""
"RTN","LRAPBR",56,0)
 S X=+$$GET1^DID(LRFILE,LRFLD,"","SPECIFIER")
"RTN","LRAPBR",57,0)
 I $$GET1^DID(X,.01,"","SPECIFIER")["L" S DIWF="N"
"RTN","LRAPBR",58,0)
 S A=0 F  S A=$O(LRTMP(A)) Q:'A  S X=LRTMP(A) D ^DIWP
"RTN","LRAPBR",59,0)
 S A=0 F  S A=$O(^UTILITY($J,"W",DIWL,A)) Q:'A  D
"RTN","LRAPBR",60,0)
 .D GLENTRY^LRAPBR1(^UTILITY($J,"W",DIWL,A,0),DIWL,1)
"RTN","LRAPBR",61,0)
 K ^UTILITY($J,"W")
"RTN","LRAPBR",62,0)
 Q
"RTN","LRAPBR",63,0)
BROWSER ;
"RTN","LRAPBR",64,0)
 ;SET LRW(1)=2-DIGIT YEAR OF AUTOPSY DATE
"RTN","LRAPBR",65,0)
 I LRAU,LRQ(8)'="" S LRW(1)=$E(+$$GET1^DIQ(63,LRDFN,11,"I"),2,3)
"RTN","LRAPBR",66,0)
 S LRTITLE=$S(LRQ(8)'="":LRQ(8)_LRW(1)_" "_LRAC,1:LRAC)_" - "_LRP
"RTN","LRAPBR",67,0)
 S LRROOT="^TMP(""LRAPBR"",$J)"
"RTN","LRAPBR",68,0)
 D BROWSE^DDBR(LRROOT,"",LRTITLE)
"RTN","LRAPBR",69,0)
 Q
"RTN","LRAPBR",70,0)
END ;
"RTN","LRAPBR",71,0)
 K LRSR1,LRSR2,LRTEXT,LRTIU,LRTITLE,LRROOT
"RTN","LRAPBR",72,0)
 Q
"RTN","LRAPBR1")
0^5^B54673575
"RTN","LRAPBR1",1,0)
LRAPBR1 ;DALOI/WTY/KLL;AP Browser Print Cont.;11/08/01
"RTN","LRAPBR1",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPBR1",3,0)
 ;
"RTN","LRAPBR1",4,0)
 ;
"RTN","LRAPBR1",5,0)
ENTER ;from LRAPBR
"RTN","LRAPBR1",6,0)
 N LRCNT,LRTMP,LRA1,LRADESC,LRLENG1,LRLENG2,LRFILE,LRAPMD
"RTN","LRAPBR1",7,0)
 N LRFLD,LRV,LRV1,LRV2,LRB1,LRTEXT,LRSPCE,LRIENS,LRAPMR
"RTN","LRAPBR1",8,0)
 Q:'$D(^LR(LRDFN,LRSS,LRI,0))
"RTN","LRAPBR1",9,0)
 S:'LRTIU GROOT="^TMP(""LRAPBR"",$J,"
"RTN","LRAPBR1",10,0)
 S:LRTIU GROOT="^TMP(""TIUP"",$J,"
"RTN","LRAPBR1",11,0)
 D INP^VADPT S LRPRAC=+VAIN(2)
"RTN","LRAPBR1",12,0)
 S:'LRPRAC LRPRAC(1)=""
"RTN","LRAPBR1",13,0)
 I LRPRAC S X=LRPRAC D D^LRUA S LRPRAC(1)=X
"RTN","LRAPBR1",14,0)
 S LRQ=0 D ^LRUA,HEADER
"RTN","LRAPBR1",15,0)
 S LR("F")=1
"RTN","LRAPBR1",16,0)
 D DASH
"RTN","LRAPBR1",17,0)
 D:LRTIU GLENTRY("$TEXT",,1)
"RTN","LRAPBR1",18,0)
 D GLENTRY("Submitted by: "_LRW(5),"",1)
"RTN","LRAPBR1",19,0)
 D GLENTRY("Date obtained: "_LRTK,44)
"RTN","LRAPBR1",20,0)
 D:LRA DASH
"RTN","LRAPBR1",21,0)
MAIN ;
"RTN","LRAPBR1",22,0)
 D SPEC
"RTN","LRAPBR1",23,0)
 D MODCHK
"RTN","LRAPBR1",24,0)
 D DIAG
"RTN","LRAPBR1",25,0)
 D DOC
"RTN","LRAPBR1",26,0)
 D WPFLD
"RTN","LRAPBR1",27,0)
 D SUPRPT
"RTN","LRAPBR1",28,0)
 D SSJR
"RTN","LRAPBR1",29,0)
 Q
"RTN","LRAPBR1",30,0)
SPEC ;List specimens
"RTN","LRAPBR1",31,0)
 D GLENTRY("Specimen (Received "_LRTK(1)_"):","",1)
"RTN","LRAPBR1",32,0)
 S LRCNT=$P(^LR(LRDFN,LRSS,LRI,.1,0),U,4)
"RTN","LRAPBR1",33,0)
 Q:'LRCNT
"RTN","LRAPBR1",34,0)
 S LRFILE=+$$GET1^DID(LRSF,.012,"","SPECIFIER")
"RTN","LRAPBR1",35,0)
 S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPBR1",36,0)
 S LRCT2=0
"RTN","LRAPBR1",37,0)
 F LRB1=1:1 D  Q:LRCT2=LRCNT
"RTN","LRAPBR1",38,0)
 .D GETS^DIQ(LRFILE,LRB1_","_LRIENS,.01,"","LRTMP("_LRB1_")")
"RTN","LRAPBR1",39,0)
 .I $D(LRTMP(LRB1)) S LRCT2=LRCT2+1
"RTN","LRAPBR1",40,0)
 S LRA1=0 F  S LRA1=$O(LRTMP(LRA1)) Q:'LRA1  D
"RTN","LRAPBR1",41,0)
 .S LRTEXT=LRTMP(LRA1,LRFILE,LRA1_","_LRIENS,.01)
"RTN","LRAPBR1",42,0)
 .D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBR1",43,0)
 Q
"RTN","LRAPBR1",44,0)
MODCHK ;Display modified banner if required
"RTN","LRAPBR1",45,0)
 S LRAPMR=$$GET1^DIQ(LRSF,LRIENS,.17,"I")
"RTN","LRAPBR1",46,0)
 Q:'LRAPMR
"RTN","LRAPBR1",47,0)
 S LRAPMD=$$GET1^DIQ(LRSF,LRIENS,.172,"I")
"RTN","LRAPBR1",48,0)
 D GLENTRY("","",1)
"RTN","LRAPBR1",49,0)
 S LRTEXT=""
"RTN","LRAPBR1",50,0)
 F LRCNT=1:1:$S(LRAPMD:14,1:15) D
"RTN","LRAPBR1",51,0)
 .S LRTEXT=LRTEXT_"*+"
"RTN","LRAPBR1",52,0)
 S LRTEXT=LRTEXT_" MODIFIED "
"RTN","LRAPBR1",53,0)
 S LRTEXT=LRTEXT_$S(LRAPMD:"DIAGNOSIS ",1:"REPORT ")
"RTN","LRAPBR1",54,0)
 F LRCNT=1:1:$S(LRAPMD:14,1:15) D
"RTN","LRAPBR1",55,0)
 .S LRTEXT=LRTEXT_"*+"
"RTN","LRAPBR1",56,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBR1",57,0)
 D GLENTRY("","",1)
"RTN","LRAPBR1",58,0)
 Q
"RTN","LRAPBR1",59,0)
DIAG ;
"RTN","LRAPBR1",60,0)
 ;Display the Brief Clinical History, Preoperative Diagnosis,
"RTN","LRAPBR1",61,0)
 ;Operative Findings, and Postoperative Diagnosis
"RTN","LRAPBR1",62,0)
 S LRFILE=LRSF,LRCNT=0,LRIENS=LRI_","_LRDFN_","
"RTN","LRAPBR1",63,0)
 F LRFLD=.013:.001:.016 D
"RTN","LRAPBR1",64,0)
 .D:LRA DASH
"RTN","LRAPBR1",65,0)
 .S LRCNT=LRCNT+1
"RTN","LRAPBR1",66,0)
 .D GLENTRY($P($T(TEXT1+LRCNT),";",2),"",1)
"RTN","LRAPBR1",67,0)
 .D WP
"RTN","LRAPBR1",68,0)
 Q
"RTN","LRAPBR1",69,0)
DOC ;
"RTN","LRAPBR1",70,0)
 ;Pathologist information
"RTN","LRAPBR1",71,0)
 D GLENTRY("","",1)
"RTN","LRAPBR1",72,0)
 D GLENTRY("Surgeon/physician: "_LRMD,27,1)
"RTN","LRAPBR1",73,0)
 D:LRA GLENTRY(LR("%1"),"",1)
"RTN","LRAPBR1",74,0)
 D DASH
"RTN","LRAPBR1",75,0)
 D HEADER2
"RTN","LRAPBR1",76,0)
 D:LRA DASH
"RTN","LRAPBR1",77,0)
 I LRRC="" D
"RTN","LRAPBR1",78,0)
 .D GLENTRY("+*+* REPORT INCOMPLETE *+*+",20,1)
"RTN","LRAPBR1",79,0)
 .D GLENTRY("","",1)
"RTN","LRAPBR1",80,0)
 D GLENTRY("","",1)
"RTN","LRAPBR1",81,0)
 I LRRMD'="" D
"RTN","LRAPBR1",82,0)
 .S LRCNT=0 F LRA1="SP","CY","EM" D
"RTN","LRAPBR1",83,0)
 ..S LRCNT=LRCNT+1
"RTN","LRAPBR1",84,0)
 ..S LRTMP(LRA1)=$P($T(TEXT2+LRCNT),";",3)
"RTN","LRAPBR1",85,0)
 .S LRTMP=LRTMP(LRSS)
"RTN","LRAPBR1",86,0)
 .D GLENTRY(LRTMP_" "_LRRMD,31)
"RTN","LRAPBR1",87,0)
 Q
"RTN","LRAPBR1",88,0)
WPFLD ;
"RTN","LRAPBR1",89,0)
 ;Display Frozen Section, Gross Description, Microscopic Description
"RTN","LRAPBR1",90,0)
 ;and Surgical Path Diagnosis
"RTN","LRAPBR1",91,0)
 F LRCNT=1:1:4 D
"RTN","LRAPBR1",92,0)
 .S X=$T(FIELDS+LRCNT)
"RTN","LRAPBR1",93,0)
 .S LRV=$P(X,";",2),LRV1=$P(X,";",3),LRV2=$P(X,";",4)
"RTN","LRAPBR1",94,0)
 .I $P($G(^LR(LRDFN,LRSS,LRI,LRV,0)),U,4) D
"RTN","LRAPBR1",95,0)
 ..D GLENTRY("","",1),GLENTRY(LR(69.2,LRV1),"",1)
"RTN","LRAPBR1",96,0)
 ..S LRFILE=LRSF,LRIENS=LRI_","_LRDFN_",",LRFLD=LRV
"RTN","LRAPBR1",97,0)
 ..I $P($G(^LR(LRDFN,LRSS,LRI,LRV2,0)),U,4) D
"RTN","LRAPBR1",98,0)
 ...S LRFILE1=+$$GET1^DID(LRSF,LRV2,"","SPECIFIER")
"RTN","LRAPBR1",99,0)
 ...D GLENTRY("*+* MODIFIED REPORT *+*",28,1)
"RTN","LRAPBR1",100,0)
 ...D GLENTRY("(Last modified: ","",1)
"RTN","LRAPBR1",101,0)
 ...S (LRA1,LRB1)=0
"RTN","LRAPBR1",102,0)
 ...F  S LRA1=$O(^LR(LRDFN,LRSS,LRI,LRV2,LRA1)) Q:'LRA1  S LRB1=LRA1
"RTN","LRAPBR1",103,0)
 ...Q:'$D(^LR(LRDFN,LRSS,LRI,LRV2,LRB1,0))
"RTN","LRAPBR1",104,0)
 ...S LRSR1=$$GET1^DIQ(LRFILE1,LRB1_","_LRIENS,.01)
"RTN","LRAPBR1",105,0)
 ...S LRSR2=$$GET1^DIQ(LRFILE1,LRB1_","_LRIENS,.02)
"RTN","LRAPBR1",106,0)
 ...S LRTEXT=LRSR1_" typed by "_LRSR2_")"
"RTN","LRAPBR1",107,0)
 ...D GLENTRY(LRTEXT,BTAB)
"RTN","LRAPBR1",108,0)
 ..D WP
"RTN","LRAPBR1",109,0)
 Q
"RTN","LRAPBR1",110,0)
SUPRPT ;Supplementary Report
"RTN","LRAPBR1",111,0)
 I $P($G(^LR(LRDFN,LRSS,LRI,1.2,0)),U,4) D
"RTN","LRAPBR1",112,0)
 .S LRFILE=+$$GET1^DID(LRSF,1.2,"","SPECIFIER")
"RTN","LRAPBR1",113,0)
 .S LRIENS1=LRI_","_LRDFN_","
"RTN","LRAPBR1",114,0)
 .D GLENTRY("","",1),GLENTRY("SUPPLEMENTARY REPORT(S):","",1)
"RTN","LRAPBR1",115,0)
 .S LRV=0 F  S LRV=$O(^LR(LRDFN,LRSS,LRI,1.2,LRV)) Q:'LRV  D
"RTN","LRAPBR1",116,0)
 ..S LRIENS=LRV_","_LRIENS1
"RTN","LRAPBR1",117,0)
 ..S LRSR1=$$GET1^DIQ(LRFILE,LRIENS,.01)
"RTN","LRAPBR1",118,0)
 ..S LRSR2=+$$GET1^DIQ(LRFILE,LRIENS,.02)
"RTN","LRAPBR1",119,0)
 ..D GLENTRY("Supplementary Report Date: "_LRSR1,3,1)
"RTN","LRAPBR1",120,0)
 ..I $D(LR("R")),'LRSR2 D GLENTRY(" not verified",BTAB) Q
"RTN","LRAPBR1",121,0)
 ..I $P($G(^LR(LRDFN,LRSS,LRI,1.2,LRV,2,0)),U,4) D
"RTN","LRAPBR1",122,0)
 ...S LRTEXT="*+* SUPPLEMENTARY REPORT HAS BEEN ADDED/MODIFIED *+*"
"RTN","LRAPBR1",123,0)
 ...D GLENTRY($$CJ^XLFSTR(LRTEXT,IOM),"",1)
"RTN","LRAPBR1",124,0)
 ...D GLENTRY("(Added/Last","",1)
"RTN","LRAPBR1",125,0)
 ...S (LRA1,LRB1)=0
"RTN","LRAPBR1",126,0)
 ...F  S LRA1=$O(^LR(LRDFN,LRSS,LRI,1.2,LRV,2,LRA1)) Q:'LRA1  D
"RTN","LRAPBR1",127,0)
 ....S LRB1=LRA1
"RTN","LRAPBR1",128,0)
 ...Q:'$D(^LR(LRDFN,LRSS,LRI,1.2,LRV,2,LRB1,0))
"RTN","LRAPBR1",129,0)
 ...S LRA2=^(0),Y=+LRA2,LRA2A=$P(LRA2,"^",2),LRSGN=" Typed by ",LRDSC=" modified: "
"RTN","LRAPBR1",130,0)
 ...I $P(LRA2,"^",3) S LRSGN=" Signed by ",LRDSC=" released: ",LRA2A=$P(LRA2,"^",3),Y=$P(LRA2,"^",4)
"RTN","LRAPBR1",131,0)
 ...S LRA2A=$S($D(^VA(200,LRA2A,0)):$P(^(0),"^"),1:LRA2A)
"RTN","LRAPBR1",132,0)
 ...D D^LRU
"RTN","LRAPBR1",133,0)
 ...D GLENTRY(LRDSC_Y_LRSGN_LRA2A_")",BTAB)
"RTN","LRAPBR1",134,0)
 ..S LRFLD=1 D WP
"RTN","LRAPBR1",135,0)
 ..D GLENTRY("","",1)
"RTN","LRAPBR1",136,0)
 Q
"RTN","LRAPBR1",137,0)
SSJR ;Print special studies/journal references
"RTN","LRAPBR1",138,0)
 D ^LRAPBR3
"RTN","LRAPBR1",139,0)
 S LREFLG=1
"RTN","LRAPBR1",140,0)
 Q
"RTN","LRAPBR1",141,0)
WP ;Display word procesing fields
"RTN","LRAPBR1",142,0)
 K LRTMP,^UTILITY($J,"W")
"RTN","LRAPBR1",143,0)
 N X,DIWR,DIWL,LRINC
"RTN","LRAPBR1",144,0)
 S X=$$GET1^DIQ(LRFILE,LRIENS,LRFLD,"","LRTMP",)
"RTN","LRAPBR1",145,0)
 S DIWR=IOM-5,DIWL=5,DIWF=""
"RTN","LRAPBR1",146,0)
 S X=+$$GET1^DID(LRFILE,LRFLD,"","SPECIFIER")
"RTN","LRAPBR1",147,0)
 I $$GET1^DID(X,.01,"","SPECIFIER")["L" S DIWF="N"
"RTN","LRAPBR1",148,0)
 S LRINC=0
"RTN","LRAPBR1",149,0)
 F  S LRINC=$O(LRTMP(LRINC)) Q:'LRINC  S X=LRTMP(LRINC) D ^DIWP
"RTN","LRAPBR1",150,0)
 S LRINC=0
"RTN","LRAPBR1",151,0)
 F  S LRINC=$O(^UTILITY($J,"W",DIWL,LRINC)) Q:'LRINC  D
"RTN","LRAPBR1",152,0)
 .D GLENTRY(^UTILITY($J,"W",DIWL,LRINC,0),DIWL,1)
"RTN","LRAPBR1",153,0)
 K ^UTILITY($J,"W")
"RTN","LRAPBR1",154,0)
 Q
"RTN","LRAPBR1",155,0)
HEADER ;
"RTN","LRAPBR1",156,0)
 D:LRTIU GLENTRY("$APHDR",,1)
"RTN","LRAPBR1",157,0)
 D GLENTRY("","",1)
"RTN","LRAPBR1",158,0)
 D DASH
"RTN","LRAPBR1",159,0)
 D GLENTRY("MEDICAL RECORD |",5,1)
"RTN","LRAPBR1",160,0)
 D GLENTRY(LRAA1,40)
"RTN","LRAPBR1",161,0)
 D DASH
"RTN","LRAPBR1",162,0)
HEADER2 ;
"RTN","LRAPBR1",163,0)
 S LRADESC="Accession No. "_$S(LRQ(8)]"":LRQ(8)_LRW(1)_" "_LRAC,1:LRAC)
"RTN","LRAPBR1",164,0)
 S LRLENG1=$L(LRQ(1)),LRLENG2=$L(LRADESC),LRSPCE=IOM-LRLENG2-14
"RTN","LRAPBR1",165,0)
 S:LRLENG1>LRSPCE LRQ(1)=$E(LRQ(1),1,LRSPCE)
"RTN","LRAPBR1",166,0)
 D GLENTRY("PATHOLOGY REPORT",30,1)
"RTN","LRAPBR1",167,0)
 D GLENTRY("Laboratory: "_LRQ(1),"",1)
"RTN","LRAPBR1",168,0)
 D GLENTRY(LRADESC,IOM-LRLENG2-1)
"RTN","LRAPBR1",169,0)
 Q
"RTN","LRAPBR1",170,0)
FOOTER ;Footer-called from ^LRAPBR
"RTN","LRAPBR1",171,0)
 D:LRTIU GLENTRY("$FTR",,1)
"RTN","LRAPBR1",172,0)
 D DASH
"RTN","LRAPBR1",173,0)
 S LRTEXT=$S('$D(LR("W")):"",1:"See signed copy in chart")
"RTN","LRAPBR1",174,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBR1",175,0)
 S LRTEXT="("_$S($D(LREFLG):"End of report",1:"See next page")_")"
"RTN","LRAPBR1",176,0)
 D GLENTRY(LRTEXT,57)
"RTN","LRAPBR1",177,0)
 D GLENTRY(LRPMD,"",1),GLENTRY(LRW(9),52),GLENTRY("| Date "_LRRC,55)
"RTN","LRAPBR1",178,0)
 D DASH
"RTN","LRAPBR1",179,0)
 D GLENTRY(LRP,"",1)
"RTN","LRAPBR1",180,0)
 S LRTEXT=$S('$D(LR("W")):"STANDARD FORM 515",1:"WORK COPY ONLY !!")
"RTN","LRAPBR1",181,0)
 D GLENTRY(LRTEXT,50)
"RTN","LRAPBR1",182,0)
 D GLENTRY("ID:"_SSN,"",1)
"RTN","LRAPBR1",183,0)
 D GLENTRY("SEX:"_SEX,16),GLENTRY(" DOB:"_DOB,BTAB)
"RTN","LRAPBR1",184,0)
 I AGE D
"RTN","LRAPBR1",185,0)
 .S LRTEXT=$S($G(VADM(6))]"":" AGE AT DEATH: ",1:" AGE: ")_AGE
"RTN","LRAPBR1",186,0)
 .D GLENTRY(LRTEXT,BTAB)
"RTN","LRAPBR1",187,0)
 D GLENTRY(" LOC:"_LRLLOC,BTAB)
"RTN","LRAPBR1",188,0)
 D GLENTRY("","",1)
"RTN","LRAPBR1",189,0)
 D:$L(LRADM) GLENTRY("ADM:"_$P(LRADM,"@"),BTAB)
"RTN","LRAPBR1",190,0)
 D:$L(LRADX) GLENTRY("DX:"_$E(LRADX,1,26),17)
"RTN","LRAPBR1",191,0)
 D GLENTRY("PCP:",46)
"RTN","LRAPBR1",192,0)
 D:$L(LRPRAC) GLENTRY($E(LRPRAC(1),1,28),51)
"RTN","LRAPBR1",193,0)
 Q
"RTN","LRAPBR1",194,0)
ESIGLN ;Write signature block name, title, and date of signature
"RTN","LRAPBR1",195,0)
 D GLENTRY(,,1)
"RTN","LRAPBR1",196,0)
 I $D(^VA(200,DUZ,0)) D
"RTN","LRAPBR1",197,0)
 .S LRFILE=200,LRFLD=20.2,LRFLD2=20.3
"RTN","LRAPBR1",198,0)
 .S X=$$GET1^DIQ(LRFILE,DUZ,LRFLD)
"RTN","LRAPBR1",199,0)
 ;Compare DUZ to pathologist, if different, use proxy signature
"RTN","LRAPBR1",200,0)
 S:LRSS="AU" LRPATH=$$GET1^DIQ(63,LRDFN,13.6,"I")
"RTN","LRAPBR1",201,0)
 I LRSS'="AU" D
"RTN","LRAPBR1",202,0)
 .S LRFL2=$S(LRSS="EM":63.02,LRSS="CY":63.09,LRSS="SP":63.08,1:0)
"RTN","LRAPBR1",203,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPBR1",204,0)
 .S LRPATH=$$GET1^DIQ(LRFL2,LRIENS,.02,"I")
"RTN","LRAPBR1",205,0)
 S LRPATH2=""
"RTN","LRAPBR1",206,0)
 S:LRPATH'=DUZ LRPATH2=" FOR "_$$GET1^DIQ(LRFILE,LRPATH,LRFLD)
"RTN","LRAPBR1",207,0)
 S LRTEXT="/es/ "_X_LRPATH2
"RTN","LRAPBR1",208,0)
 ;S LRTEXT="/es/ "_X
"RTN","LRAPBR1",209,0)
 D GLENTRY(LRTEXT,,1)
"RTN","LRAPBR1",210,0)
 S X=$$GET1^DIQ(LRFILE,DUZ,LRFLD2)
"RTN","LRAPBR1",211,0)
 S LRTEXT=X
"RTN","LRAPBR1",212,0)
 D GLENTRY(LRTEXT,,1)
"RTN","LRAPBR1",213,0)
 S Y=LRNTIME D DD^%DT
"RTN","LRAPBR1",214,0)
 S LRTEXT="Signed "_Y
"RTN","LRAPBR1",215,0)
 D GLENTRY(LRTEXT,,1)
"RTN","LRAPBR1",216,0)
 Q
"RTN","LRAPBR1",217,0)
DASH ;Display a line of dashes
"RTN","LRAPBR1",218,0)
 D GLENTRY(LR("%"),"",1)
"RTN","LRAPBR1",219,0)
 Q
"RTN","LRAPBR1",220,0)
GLENTRY(LRPR1,LRPR2,LRPR3) ;Write to global
"RTN","LRAPBR1",221,0)
 ;LRPR1 = Text to be written to global
"RTN","LRAPBR1",222,0)
 ;LRPR2 = Tab position
"RTN","LRAPBR1",223,0)
 ;LRPR3 = 1 means start a new line.  Othewise, write an current line.
"RTN","LRAPBR1",224,0)
 S LRPR1=$G(LRPR1)
"RTN","LRAPBR1",225,0)
 S LRPR2=+$G(LRPR2)
"RTN","LRAPBR1",226,0)
 S LRPR3=+$G(LRPR3)
"RTN","LRAPBR1",227,0)
 D:LRPR3 NEWLN^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR1",228,0)
 D:'LRPR3 GLBWRT^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR1",229,0)
 Q
"RTN","LRAPBR1",230,0)
TEXT1 ;Text for top of report
"RTN","LRAPBR1",231,0)
 ;BRIEF CLINICAL HISTORY:
"RTN","LRAPBR1",232,0)
 ;PREOPERATIVE DIAGNOSIS:
"RTN","LRAPBR1",233,0)
 ;OPERATIVE FINDINGS:
"RTN","LRAPBR1",234,0)
 ;POSTOPERATIVE DIAGNOSIS:
"RTN","LRAPBR1",235,0)
TEXT2 ;Descriptive text based on section
"RTN","LRAPBR1",236,0)
 ;SP;Pathology Resident:
"RTN","LRAPBR1",237,0)
 ;CY;Screened by:
"RTN","LRAPBR1",238,0)
 ;EM;Prepared by:
"RTN","LRAPBR1",239,0)
FIELDS ;Field numbers for word processing fields
"RTN","LRAPBR1",240,0)
 ;1.3;.13;6
"RTN","LRAPBR1",241,0)
 ;1;.03;7
"RTN","LRAPBR1",242,0)
 ;1.1;.04;4
"RTN","LRAPBR1",243,0)
 ;1.4;.14;5
"RTN","LRAPBR2")
0^6^B16252216
"RTN","LRAPBR2",1,0)
LRAPBR2 ;DALOI/WTY/KLL - AP Browser Print ;04/04/01
"RTN","LRAPBR2",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPBR2",3,0)
 ;
"RTN","LRAPBR2",4,0)
 ; This routine is a modified version of LRAPT1 to be used for 
"RTN","LRAPBR2",5,0)
 ; browser display.
"RTN","LRAPBR2",6,0)
 ;
"RTN","LRAPBR2",7,0)
 N LRSS,LRI,LRPATH,LRIENS,LRACN,LRRLDTE,LRRCDTE
"RTN","LRAPBR2",8,0)
 N LRTEXT,LRI1,LRI2,LRIENS1,LRSPC
"RTN","LRAPBR2",9,0)
 S LR("F")=1
"RTN","LRAPBR2",10,0)
 F LRSS="SP","CY","EM" D
"RTN","LRAPBR2",11,0)
 .Q:'+$P($G(^LR(LRDFN,LRSS,0)),"^",4)
"RTN","LRAPBR2",12,0)
 .S LRTMP=""
"RTN","LRAPBR2",13,0)
 .S:LRSS="SP" LRTMP="SURGICAL PATHOLOGY",(LRFILE,LRXF)=63.08
"RTN","LRAPBR2",14,0)
 .S:LRSS="CY" LRTMP="CYTOPATHOLOGY",(LRFILE,LRXF)=63.09
"RTN","LRAPBR2",15,0)
 .S:LRSS="EM" LRTMP="ELECTRON MICROSCOPY",(LRFILE,LRXF)=63.02
"RTN","LRAPBR2",16,0)
 .D GLENTRY("","",1),GLENTRY(LRTMP,30,1)
"RTN","LRAPBR2",17,0)
 .K LRTMP
"RTN","LRAPBR2",18,0)
 .S LRI=0 F  S LRI=$O(^LR(LRDFN,LRSS,LRI)) Q:'LRI  D
"RTN","LRAPBR2",19,0)
 ..S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPBR2",20,0)
 ..S LRPATH=$E($$GET1^DIQ(LRFILE,LRIENS,.02,""),1,12)
"RTN","LRAPBR2",21,0)
 ..S LRACN=$$GET1^DIQ(LRFILE,LRIENS,.06,"")
"RTN","LRAPBR2",22,0)
 ..S:LRACN="" LRACN="?"
"RTN","LRAPBR2",23,0)
 ..S LRRLDTE=$$GET1^DIQ(LRFILE,LRIENS,.11,"")
"RTN","LRAPBR2",24,0)
 ..S LRRCDTE=$$FMTE^XLFDT($$GET1^DIQ(LRFILE,LRIENS,.1,"I"),"D")
"RTN","LRAPBR2",25,0)
 ..D GLENTRY("Organ/tissue:",2,1)
"RTN","LRAPBR2",26,0)
 ..D GLENTRY("Date rec'd: "_LRRCDTE,17)
"RTN","LRAPBR2",27,0)
 ..D GLENTRY("Acc #:"_LRACN,43)
"RTN","LRAPBR2",28,0)
 ..D GLENTRY(LRPATH,64)
"RTN","LRAPBR2",29,0)
 ..I LRRLDTE="" D GLENTRY("Report not verified.",5,1)
"RTN","LRAPBR2",30,0)
 ..;KLL - Display Snomed Codes on report in Browser
"RTN","LRAPBR2",31,0)
 ..D GETSNMD
"RTN","LRAPBR2",32,0)
 ..Q:LRRLDTE=""
"RTN","LRAPBR2",33,0)
 ..;Special Studies
"RTN","LRAPBR2",34,0)
 ..S LRFILE1=+$$GET1^DID(LRFILE,10,"","SPECIFIER")
"RTN","LRAPBR2",35,0)
 ..S LRI1=0 F  S LRI1=$O(^LR(LRDFN,LRSS,LRI,2,LRI1)) Q:'LRI1  D
"RTN","LRAPBR2",36,0)
 ...S LRFILE2=+$$GET1^DID(LRFILE1,5,"","SPECIFIER")
"RTN","LRAPBR2",37,0)
 ...S LRI2=0 F  S LRI2=$O(^LR(LRDFN,LRSS,LRI,2,LRI1,5,LRI2)) Q:'LRI2  D
"RTN","LRAPBR2",38,0)
 ....S LRIENS1=LRI2_","_LRI1_","_LRIENS
"RTN","LRAPBR2",39,0)
 ....D GETS^DIQ(LRFILE2,LRIENS1,".01;.03","","LRARR")
"RTN","LRAPBR2",40,0)
 ....M LRSPC=LRARR(LRFILE2,LRIENS1)
"RTN","LRAPBR2",41,0)
 ....S LRSPC(.02)=$$GET1^DIQ(LRFILE2,LRIENS1,.02,"E")
"RTN","LRAPBR2",42,0)
 ....S LRTEXT=LRSPC(.01)_" "_LRSPC(.03)_" Date: "_LRSPC(.02)
"RTN","LRAPBR2",43,0)
 ....D GLENTRY(LRTEXT,5,1)
"RTN","LRAPBR2",44,0)
 Q
"RTN","LRAPBR2",45,0)
GETSNMD ;Retrieve SNOMED codes, desc. for display to Browser
"RTN","LRAPBR2",46,0)
 S LRQUIT=0
"RTN","LRAPBR2",47,0)
 D CHKSNMD
"RTN","LRAPBR2",48,0)
 Q:LRQUIT
"RTN","LRAPBR2",49,0)
 I LRAU D
"RTN","LRAPBR2",50,0)
 .S LRFIL="^LR(LRDFN,""AY"",",LRFILE1=63.2,LRIENS=LRDFN_",",LRCASE=1
"RTN","LRAPBR2",51,0)
 I 'LRAU D
"RTN","LRAPBR2",52,0)
 .S LRFIL="^LR(LRDFN,LRSS,LRI,2,"
"RTN","LRAPBR2",53,0)
 .S LRFILE1=+$$GET1^DID(LRFILE,10,"","SPECIFIER")
"RTN","LRAPBR2",54,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPBR2",55,0)
 .S LRCASE=+$$GET1^DIQ(69.2,LRAA_",",.05,"I")
"RTN","LRAPBR2",56,0)
 S LRA=0  F  S LRA=$O(@(LRFIL_"LRA)")) Q:LRA'>0!(LRQUIT)  D
"RTN","LRAPBR2",57,0)
 .;Topography
"RTN","LRAPBR2",58,0)
 .S LRIENS1=LRA_","_LRIENS
"RTN","LRAPBR2",59,0)
 .D WRTSNMD(LRFILE1,LRIENS1,LRCASE,"T",0)
"RTN","LRAPBR2",60,0)
 .;Morphology
"RTN","LRAPBR2",61,0)
 .S LRA1=0
"RTN","LRAPBR2",62,0)
 .F  S LRA1=$O(@(LRFIL_"LRA,2,LRA1)")) Q:LRA1'>0!(LRQUIT)  D
"RTN","LRAPBR2",63,0)
 ..S LRFILE2=+$$GET1^DID(LRFILE1,4,"","SPECIFIER")
"RTN","LRAPBR2",64,0)
 ..S LRIENS2=LRA1_","_LRIENS1
"RTN","LRAPBR2",65,0)
 ..D WRTSNMD(LRFILE2,LRIENS2,LRCASE,"M",5)
"RTN","LRAPBR2",66,0)
 ..;Etiology
"RTN","LRAPBR2",67,0)
 ..S LRA2=0
"RTN","LRAPBR2",68,0)
 ..F  S LRA2=$O(@(LRFIL_"LRA,2,LRA1,1,LRA2)")) Q:LRA2'>0!(LRQUIT)  D
"RTN","LRAPBR2",69,0)
 ...S LRFILE3=+$$GET1^DID(LRFILE2,1,"","SPECIFIER")
"RTN","LRAPBR2",70,0)
 ...S LRIENS3=LRA2_","_LRIENS2
"RTN","LRAPBR2",71,0)
 ...D WRTSNMD(LRFILE3,LRIENS3,LRCASE,"E",10)
"RTN","LRAPBR2",72,0)
 .;Disease,Function,Procedure
"RTN","LRAPBR2",73,0)
 .F LRDFP="1;3","3;1","4;1.5" D
"RTN","LRAPBR2",74,0)
 ..S LRDFP(1)=$P(LRDFP,";"),LRDFP(2)=$P(LRDFP,";",2),LRA1=0
"RTN","LRAPBR2",75,0)
 ..F  S LRA1=$O(@(LRFIL_"LRA,LRDFP(1),LRA1)")) Q:LRA1'>0!(LRQUIT)  D
"RTN","LRAPBR2",76,0)
 ...S LRFILE2=+$$GET1^DID(LRFILE1,LRDFP(2),"","SPECIFIER")
"RTN","LRAPBR2",77,0)
 ...S LRIENS2=LRA1_","_LRIENS1
"RTN","LRAPBR2",78,0)
 ...S LRPRFX=$S(LRDFP(1)=1:"D",LRDFP(1)=3:"F",1:"P")
"RTN","LRAPBR2",79,0)
 ...D WRTSNMD(LRFILE2,LRIENS2,LRCASE,LRPRFX,5)
"RTN","LRAPBR2",80,0)
 Q
"RTN","LRAPBR2",81,0)
CHKSNMD ;Check for SNOMED codes on the accession
"RTN","LRAPBR2",82,0)
 N LRSB
"RTN","LRAPBR2",83,0)
 I LRAU D  Q
"RTN","LRAPBR2",84,0)
 .S LRSB=$Q(^LR(LRDFN,"AY",0))
"RTN","LRAPBR2",85,0)
 .I $QS(LRSB,2)'="AY" S LRQUIT=1
"RTN","LRAPBR2",86,0)
 S LRSB=$Q(^LR(LRDFN,LRSS,LRI,2,0))
"RTN","LRAPBR2",87,0)
 I $QS(LRSB,4)'=2 S LRQUIT=1
"RTN","LRAPBR2",88,0)
 Q
"RTN","LRAPBR2",89,0)
WRTSNMD(LRP1,LRP2,LRP3,LRP4,LRP5) ;
"RTN","LRAPBR2",90,0)
 ;LRP1=File number
"RTN","LRAPBR2",91,0)
 ;LRP2=IEN string
"RTN","LRAPBR2",92,0)
 ;LRP3=Case (Upper or Lower)
"RTN","LRAPBR2",93,0)
 ;LRP4=Prefix
"RTN","LRAPBR2",94,0)
 ;LRP5=Tab position
"RTN","LRAPBR2",95,0)
 N LRSM
"RTN","LRAPBR2",96,0)
 S LRSM(1)=$$GET1^DIQ(LRP1,LRP2,.01)
"RTN","LRAPBR2",97,0)
 S:LRP3 LRSM(1)=$$LOW^XLFSTR(LRSM(1))
"RTN","LRAPBR2",98,0)
 S LRSM(2)=LRP4_"-"_$$GET1^DIQ(LRP1,LRP2,".01:2")
"RTN","LRAPBR2",99,0)
 S LRTXT=LRSM(2)_": "_LRSM(1)
"RTN","LRAPBR2",100,0)
 I LRP4="P" D
"RTN","LRAPBR2",101,0)
 .S LRSM(3)=$$GET1^DIQ(LRP1,LRP2,.02,"I")
"RTN","LRAPBR2",102,0)
 .I LRSM(3)'="" S LRTXT=LRTXT_" ("_$S('LRSM(3):"negative",LRSM(3)=1:"positive",1:"?")_")"
"RTN","LRAPBR2",103,0)
 D GLENTRY(LRTXT,LRP5,1)
"RTN","LRAPBR2",104,0)
 Q
"RTN","LRAPBR2",105,0)
GLENTRY(LRPR1,LRPR2,LRPR3) ;Write to global
"RTN","LRAPBR2",106,0)
 ;LRPR1 = Text to be written to global
"RTN","LRAPBR2",107,0)
 ;LRPR2 = Tab position
"RTN","LRAPBR2",108,0)
 ;LRPR3 = 1 means start a new line.  Othewise, write an current line.
"RTN","LRAPBR2",109,0)
 S LRPR3=+$G(LRPR3)
"RTN","LRAPBR2",110,0)
 D:LRPR3 NEWLN^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR2",111,0)
 D:'LRPR3 GLBWRT^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR2",112,0)
 Q
"RTN","LRAPBR3")
0^7^B13308643
"RTN","LRAPBR3",1,0)
LRAPBR3 ;DALOI/WTY - AP Browser Print Cont.;04/06/01
"RTN","LRAPBR3",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPBR3",3,0)
 ;
"RTN","LRAPBR3",4,0)
 ; This routine was created from LRSPRPT1 to be used for printing
"RTN","LRAPBR3",5,0)
 ; the SF515 to the browser and storing the report in a global format
"RTN","LRAPBR3",6,0)
 ; This routine displays any special studies.  Printing of SNOMED
"RTN","LRAPBR3",7,0)
 ; codes and associated journal references (if any) has been removed.
"RTN","LRAPBR3",8,0)
MAIN ;
"RTN","LRAPBR3",9,0)
 N LRTP,LRCNT1,LRA1,LRFILE,LRFILE1
"RTN","LRAPBR3",10,0)
 N LRIENS1,LRA2
"RTN","LRAPBR3",11,0)
 Q:$G(LRSF)=""
"RTN","LRAPBR3",12,0)
 S LRA1=0,LRIENS=LRI_","_LRDFN_","
"RTN","LRAPBR3",13,0)
 S LRFILE=+$$GET1^DID(LRSF,10,"","SPECIFIER")
"RTN","LRAPBR3",14,0)
 F  S LRA1=$O(^LR(LRDFN,LRSS,LRI,2,LRA1)) Q:'LRA1  D
"RTN","LRAPBR3",15,0)
 .S LRIENS1=LRA1_","_LRIENS
"RTN","LRAPBR3",16,0)
 .S LRTP(1)=$$GET1^DIQ(LRFILE,LRIENS1,.01)
"RTN","LRAPBR3",17,0)
 .S LRTP(2)=$$GET1^DIQ(LRFILE,LRIENS1,.01,"I")
"RTN","LRAPBR3",18,0)
 .S LRTP(8)=$$GET1^DIQ(LRFILE,LRIENS1,".01:2")
"RTN","LRAPBR3",19,0)
 .D SPCSTD
"RTN","LRAPBR3",20,0)
 .D JRNLREF
"RTN","LRAPBR3",21,0)
 Q
"RTN","LRAPBR3",22,0)
SPCSTD ;Display Special Studies
"RTN","LRAPBR3",23,0)
 Q:'$P($G(^LR(LRDFN,LRSS,LRI,2,LRA1,5,0)),"^",4)
"RTN","LRAPBR3",24,0)
 D GLENTRY("SPECIAL STUDIES:","",1)
"RTN","LRAPBR3",25,0)
 N LRX,DIWR,DIWL,LRC,LRTMP
"RTN","LRAPBR3",26,0)
 S LRC=0 F  S LRC=$O(^LR(LRDFN,LRSS,LRI,2,LRA1,5,LRC)) Q:'LRC  D
"RTN","LRAPBR3",27,0)
 .S LRFILE1=+$$GET1^DID(LRFILE,5,"","SPECIFIER")
"RTN","LRAPBR3",28,0)
 .F I=.01:.01:.03 D
"RTN","LRAPBR3",29,0)
 ..S LRTP(I)=$$GET1^DIQ(LRFILE1,LRC_","_LRIENS1,I)
"RTN","LRAPBR3",30,0)
 .D GLENTRY("","",1)
"RTN","LRAPBR3",31,0)
 .D GLENTRY(LRTP(.01)_" "_LRTP(.03)_" Date: "_LRTP(.02),"",1)
"RTN","LRAPBR3",32,0)
 .D GLENTRY(LRTP(1),"",1)
"RTN","LRAPBR3",33,0)
 .K ^UTILITY($J,"W")
"RTN","LRAPBR3",34,0)
 .S LRX=$$GET1^DIQ(LRFILE1,LRA1_","_LRIENS1,1,"","LRTMP")
"RTN","LRAPBR3",35,0)
 .S DIWR=IOM-10,DIWL=10,DIWF=""
"RTN","LRAPBR3",36,0)
 .S LRX=+$$GET1^DID(LRFILE1,1,"","SPECIFIER")
"RTN","LRAPBR3",37,0)
 .I $$GET1^DID(LRX,.01,"","SPECIFIER")["L" S DIWF="N"
"RTN","LRAPBR3",38,0)
 .S LRA2=0 F  S LRA2=$O(LRTMP(LRA2)) Q:'LRA2  S X=LRTMP(LRA2) D ^DIWP
"RTN","LRAPBR3",39,0)
 .S LRA2=0 F  S LRA2=$O(^UTILITY($J,"W",DIWL,LRA2)) Q:'LRA2  D
"RTN","LRAPBR3",40,0)
 ..D GLENTRY(^UTILITY($J,"W",DIWL,LRA2,0),DIWL,1)
"RTN","LRAPBR3",41,0)
 .K ^UTILITY($J,"W")
"RTN","LRAPBR3",42,0)
 Q
"RTN","LRAPBR3",43,0)
 ;
"RTN","LRAPBR3",44,0)
JRNLREF ;Display Journal References
"RTN","LRAPBR3",45,0)
 ;Topography
"RTN","LRAPBR3",46,0)
 N LRFL,LRM,LRN
"RTN","LRAPBR3",47,0)
 S LRFL=LRTP(2),LRFILE1=61 D JREFPRT
"RTN","LRAPBR3",48,0)
 ;Morphology
"RTN","LRAPBR3",49,0)
 S LRFILE1=61.1,LRFILE3=+$$GET1^DID(LRFILE,4,"","SPECIFIER")
"RTN","LRAPBR3",50,0)
 S LRM=0 F  S LRM=$O(^LR(LRDFN,LRSS,LRI,2,LRA1,2,LRM)) Q:'LRM  D
"RTN","LRAPBR3",51,0)
 .S LRIENS2=LRM_","_LRIENS1
"RTN","LRAPBR3",52,0)
 .S LRFL=$$GET1^DIQ(LRFILE3,LRIENS2,.01,"I")
"RTN","LRAPBR3",53,0)
 .D JREFPRT
"RTN","LRAPBR3",54,0)
 .;Etiology
"RTN","LRAPBR3",55,0)
 .S LRFILE1=61.2,LRFILE4=+$$GET1^DID(LRFILE3,1,"","SPECIFIER")
"RTN","LRAPBR3",56,0)
 .S LRN=0 F  S LRN=$O(^LR(LRDFN,LRSS,LRI,2,LRA1,2,LRM,1,LRN)) Q:'LRN  D
"RTN","LRAPBR3",57,0)
 ..S LRIENS3=LRN_","_LRIENS2
"RTN","LRAPBR3",58,0)
 ..S LRFL=$$GET1^DIQ(LRFILE4,LRIENS3,.01,"I")
"RTN","LRAPBR3",59,0)
 ..D JREFPRT
"RTN","LRAPBR3",60,0)
 ;Disease
"RTN","LRAPBR3",61,0)
 S LRFILE1=61.4,LRFILE3=+$$GET1^DID(LRFILE,3,"","SPECIFIER")
"RTN","LRAPBR3",62,0)
 S LRM=0 F  S LRM=$O(^LR(LRDFN,LRSS,LRI,2,LRA1,1,LRM)) Q:'LRM  D
"RTN","LRAPBR3",63,0)
 .S LRIENS2=LRM_","_LRIENS1
"RTN","LRAPBR3",64,0)
 .S LRFL=$$GET1^DIQ(LRFILE3,LRIENS2,.01,"I")
"RTN","LRAPBR3",65,0)
 .D JREFPRT
"RTN","LRAPBR3",66,0)
 ;Function
"RTN","LRAPBR3",67,0)
 S LRFILE1=61.3,LRFILE3=+$$GET1^DID(LRFILE,1,"","SPECIFIER")
"RTN","LRAPBR3",68,0)
 S LRM=0 F  S LRM=$O(^LR(LRDFN,LRSS,LRI,2,LRA1,3,LRM)) Q:'LRM  D
"RTN","LRAPBR3",69,0)
 .S LRIENS2=LRM_","_LRIENS1
"RTN","LRAPBR3",70,0)
 .S LRFL=$$GET1^DIQ(LRFILE3,LRIENS2,.01,"I")
"RTN","LRAPBR3",71,0)
 .D JREFPRT
"RTN","LRAPBR3",72,0)
 Q
"RTN","LRAPBR3",73,0)
JREFPRT ;
"RTN","LRAPBR3",74,0)
 ; Print journal reference on the patient report if the 
"RTN","LRAPBR3",75,0)
 ; reference is flagged for printing.
"RTN","LRAPBR3",76,0)
 N LRJR,LRINC
"RTN","LRAPBR3",77,0)
 S LRFILE2=+$$GET1^DID(LRFILE1,5,"","SPECIFIER")
"RTN","LRAPBR3",78,0)
 S LRJR=0 F  S LRJR=$O(^LAB(LRFILE1,LRFL,"JR",LRJR)) Q:'LRJR  D
"RTN","LRAPBR3",79,0)
 .S LRJR(.01)=$$GET1^DIQ(LRFILE2,LRJR_","_LRFL_",",.01)
"RTN","LRAPBR3",80,0)
 .F LRINC=1:1:5 D
"RTN","LRAPBR3",81,0)
 ..S LRJR(LRINC)=$$GET1^DIQ(LRFILE2,LRJR_","_LRFL_",",LRINC)
"RTN","LRAPBR3",82,0)
 .S LRJR(6)=$$GET1^DIQ(LRFILE2,LRJR_","_LRFL_",",6,"I")
"RTN","LRAPBR3",83,0)
 .Q:'LRJR(6)
"RTN","LRAPBR3",84,0)
 .D GLENTRY(,,1),GLENTRY("Reference: ",,1)
"RTN","LRAPBR3",85,0)
 .D GLENTRY(LRJR(.01),,1)
"RTN","LRAPBR3",86,0)
 .D GLENTRY(LRJR(1),,1),GLENTRY(,,1)
"RTN","LRAPBR3",87,0)
 .I LRJR(2)'="" D
"RTN","LRAPBR3",88,0)
 ..D GLENTRY(LRJR(2)_"  vol."_LRJR(3),BTAB)
"RTN","LRAPBR3",89,0)
 ..D GLENTRY(" pg."_LRJR(4),BTAB)
"RTN","LRAPBR3",90,0)
 .D GLENTRY("  Date: "_LRJR(5),BTAB)
"RTN","LRAPBR3",91,0)
 Q
"RTN","LRAPBR3",92,0)
GLENTRY(LRPR1,LRPR2,LRPR3) ;Write to global
"RTN","LRAPBR3",93,0)
 ;LRPR1 = Text to be written to global
"RTN","LRAPBR3",94,0)
 ;LRPR2 = Tab position
"RTN","LRAPBR3",95,0)
 ;LRPR3 = 1 means start a new line.  Othewise, write on current line.
"RTN","LRAPBR3",96,0)
 S LRPR1=$G(LRPR1),LRPR2=+$G(LRPR2),LRPR3=+$G(LRPR3)
"RTN","LRAPBR3",97,0)
 D:LRPR3 NEWLN^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR3",98,0)
 D:'LRPR3 GLBWRT^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR3",99,0)
 Q
"RTN","LRAPBR4")
0^8^B30127062
"RTN","LRAPBR4",1,0)
LRAPBR4 ;DALOI/WTY/KLL - Autopsy Browser Display;7/27/01
"RTN","LRAPBR4",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPBR4",3,0)
 ;
"RTN","LRAPBR4",4,0)
 ;Reference to ^DPT supported by IA #918
"RTN","LRAPBR4",5,0)
 ;
"RTN","LRAPBR4",6,0)
 Q
"RTN","LRAPBR4",7,0)
ENTER ;Entry point
"RTN","LRAPBR4",8,0)
 N LRTEXT,LRFILE,LRFIELD,LRTMP,LRFLG
"RTN","LRAPBR4",9,0)
 D INIT
"RTN","LRAPBR4",10,0)
 Q:'$D(^LR(LRDFN,LRSS))
"RTN","LRAPBR4",11,0)
 D HEADER
"RTN","LRAPBR4",12,0)
 D BODY
"RTN","LRAPBR4",13,0)
 D:'LRTIU POW
"RTN","LRAPBR4",14,0)
 D:LRTIU ESIGLN^LRAPBR1
"RTN","LRAPBR4",15,0)
 D FOOTER
"RTN","LRAPBR4",16,0)
 Q
"RTN","LRAPBR4",17,0)
INIT ;Initialize variables
"RTN","LRAPBR4",18,0)
 S X=^LR(LRDFN,0) D ^LRUP
"RTN","LRAPBR4",19,0)
 Q:'$D(^LR(LRDFN,LRSS))
"RTN","LRAPBR4",20,0)
 F LRTMP=1:1 D  Q:LRFIELD="Q"
"RTN","LRAPBR4",21,0)
 .S X=$T(VART1+LRTMP)
"RTN","LRAPBR4",22,0)
 .S LRFIELD=$P(X,";",2),VAR=$P(X,";",3),LRFLG=$P(X,";",4)
"RTN","LRAPBR4",23,0)
 .Q:LRFIELD="Q"
"RTN","LRAPBR4",24,0)
 .S @VAR=$$GET1^DIQ(63,LRDFN_",",LRFIELD,LRFLG)
"RTN","LRAPBR4",25,0)
 .I VAR["LRM",@VAR S X=@VAR D D^LRUA S @VAR=X
"RTN","LRAPBR4",26,0)
 S LRH(2)=$E(LRH(2),2,3)
"RTN","LRAPBR4",27,0)
 ;Get date of death (LRH)
"RTN","LRAPBR4",28,0)
 S DA=LRDFN D D^LRAUAW
"RTN","LRAPBR4",29,0)
 S Y=LR(63,12) D D^LRU S LRH=Y
"RTN","LRAPBR4",30,0)
 S LCT=0
"RTN","LRAPBR4",31,0)
 S:'LRTIU GROOT="^TMP(""LRAPBR"",$J,"
"RTN","LRAPBR4",32,0)
 S:LRTIU GROOT="^TMP(""TIUP"",$J,"
"RTN","LRAPBR4",33,0)
 K ^TMP("LRAPBR",$J)
"RTN","LRAPBR4",34,0)
 Q
"RTN","LRAPBR4",35,0)
BODY ;Report body
"RTN","LRAPBR4",36,0)
 D:LRTIU GLENTRY("$TEXT",,1)
"RTN","LRAPBR4",37,0)
 S LR("F")=1
"RTN","LRAPBR4",38,0)
 I LRH(1)="" D
"RTN","LRAPBR4",39,0)
 .D GLENTRY("+*+* REPORT INCOMPLETE *+*+",20,1)
"RTN","LRAPBR4",40,0)
 .D GLENTRY(,,1)
"RTN","LRAPBR4",41,0)
 D MODAUCK
"RTN","LRAPBR4",42,0)
 D GLENTRY(,,1)
"RTN","LRAPBR4",43,0)
 F LRV=81,82,84 D
"RTN","LRAPBR4",44,0)
 .D:LRV'=84 GLENTRY(,,1)
"RTN","LRAPBR4",45,0)
 .D:LRV=81 GLENTRY(LRAU(1),0)
"RTN","LRAPBR4",46,0)
 .D:LRV=82 GLENTRY(LRAU(2),0)
"RTN","LRAPBR4",47,0)
 .I LRV'=84 D
"RTN","LRAPBR4",48,0)
 ..D GLENTRY(,,1)
"RTN","LRAPBR4",49,0)
 ..S LRFILE=63,LRIENS=LRDFN_","
"RTN","LRAPBR4",50,0)
 ..S LRFIELD=$S(LRV=81:32.2,1:32.3)
"RTN","LRAPBR4",51,0)
 ..D WP
"RTN","LRAPBR4",52,0)
 .I LRV=84 D
"RTN","LRAPBR4",53,0)
 ..N LRIENS1,LRIENS
"RTN","LRAPBR4",54,0)
 ..S LRFILE=63.324
"RTN","LRAPBR4",55,0)
 ..S LRA=0 F  S LRA=$O(^LR(LRDFN,84,LRA)) Q:'LRA  D
"RTN","LRAPBR4",56,0)
 ...S LRIENS1=LRA_","_LRDFN_","
"RTN","LRAPBR4",57,0)
 ...D GLENTRY("SUPPLEMENTARY REPORT DATE: ",0,1)
"RTN","LRAPBR4",58,0)
 ...S LRB=$$GET1^DIQ(LRFILE,LRIENS1,.01)
"RTN","LRAPBR4",59,0)
 ...D GLENTRY(LRB,BTAB)
"RTN","LRAPBR4",60,0)
 ...D:$P($G(^LR(LRDFN,84,LRA,2,0)),U,4) SUPA
"RTN","LRAPBR4",61,0)
 ...S LRFIELD=1,LRIENS=LRIENS1 D WP
"RTN","LRAPBR4",62,0)
 ...D GLENTRY(,,1)
"RTN","LRAPBR4",63,0)
 .I LRV'=84 D DASH,GLENTRY(,,1)
"RTN","LRAPBR4",64,0)
 D ^LRAPBR5
"RTN","LRAPBR4",65,0)
 Q
"RTN","LRAPBR4",66,0)
WP ;Display word procesing fields
"RTN","LRAPBR4",67,0)
 K LRTMP,^UTILITY($J,"W")
"RTN","LRAPBR4",68,0)
 N LRX,DIWR,DIWL,LRA1
"RTN","LRAPBR4",69,0)
 S LRX=$$GET1^DIQ(LRFILE,LRIENS,LRFIELD,"","LRTMP","LRERR(1)")
"RTN","LRAPBR4",70,0)
 S DIWR=IOM-5,DIWL=5,DIWF=""
"RTN","LRAPBR4",71,0)
 S LRX=+$$GET1^DID(LRFILE,LRFIELD,"","SPECIFIER","LRERR(2)")
"RTN","LRAPBR4",72,0)
 I $$GET1^DID(LRX,.01,"","SPECIFIER","LRERR(2)")["L" S DIWF="N"
"RTN","LRAPBR4",73,0)
 S LRA1=0 F  S LRA1=$O(LRTMP(LRA1)) Q:'LRA1  S X=LRTMP(LRA1) D ^DIWP
"RTN","LRAPBR4",74,0)
 S LRA1=0 F  S LRA1=$O(^UTILITY($J,"W",DIWL,LRA1)) Q:'LRA1  D
"RTN","LRAPBR4",75,0)
 .D GLENTRY(^UTILITY($J,"W",DIWL,LRA1,0),DIWL,1)
"RTN","LRAPBR4",76,0)
 K ^UTILITY($J,"W")
"RTN","LRAPBR4",77,0)
 Q
"RTN","LRAPBR4",78,0)
SUPA ;Print supplementary report audit information
"RTN","LRAPBR4",79,0)
 N LRFILE,LRIENS1,LRWP
"RTN","LRAPBR4",80,0)
 S LRTEXT="*+* SUPPLEMENTARY REPORT HAS BEEN ADDED/MODIFIED *+*"
"RTN","LRAPBR4",81,0)
 S LRTEXT=$$CJ^XLFSTR(LRTEXT,IOM)
"RTN","LRAPBR4",82,0)
 D GLENTRY(LRTEXT,,1)
"RTN","LRAPBR4",83,0)
 S LRTEXT="(Added/Last" D GLENTRY(LRTEXT,0,1)
"RTN","LRAPBR4",84,0)
 S (A,B)=0 F  S A=$O(^LR(LRDFN,84,LRA,2,A)) Q:'A  D
"RTN","LRAPBR4",85,0)
 .S B=A
"RTN","LRAPBR4",86,0)
 Q:'$D(^LR(LRDFN,84,LRA,2,B,0))
"RTN","LRAPBR4",87,0)
 S A=^(0),Y=+A,LRSGN=" typed by ",LRDSC=" modified: ",A2=$P(A,"^",2)
"RTN","LRAPBR4",88,0)
 ;If supp rpt is released, display 'signed by' instead of 'typed by'
"RTN","LRAPBR4",89,0)
 I $P(A,"^",3) S LRSGN=" signed by ",LRDSC=" released: ",A2=$P(A,"^",3),Y=$P(A,"^",4)
"RTN","LRAPBR4",90,0)
 S A2=$S($D(^VA(200,A2,0)):$P(^(0),"^"),1:A2)
"RTN","LRAPBR4",91,0)
 ;S LRFILE=63.3242,LRIENS1=B_","_LRA_","_LRDFN_","
"RTN","LRAPBR4",92,0)
 ;D GETS^DIQ(LRFILE,LRIENS1,"*","","LRWP")
"RTN","LRAPBR4",93,0)
 ;S Y=LRWP(LRFILE,LRIENS1,.01)
"RTN","LRAPBR4",94,0)
 ;S A=LRWP(LRFILE,LRIENS1,.02)
"RTN","LRAPBR4",95,0)
 D D^LRU
"RTN","LRAPBR4",96,0)
 S LRTEXT=LRDSC_Y_LRSGN_A2_")" D GLENTRY(LRTEXT,BTAB)
"RTN","LRAPBR4",97,0)
 Q
"RTN","LRAPBR4",98,0)
HEADER ;
"RTN","LRAPBR4",99,0)
 S LRQ=LRQ+1
"RTN","LRAPBR4",100,0)
 D:LRTIU GLENTRY("$APHDR",,1)
"RTN","LRAPBR4",101,0)
 F I=1:1:2 D GLENTRY(,,1)
"RTN","LRAPBR4",102,0)
 D DASH
"RTN","LRAPBR4",103,0)
 S LRTEXT="CLINICAL RECORD |" D GLENTRY(LRTEXT,5,1)
"RTN","LRAPBR4",104,0)
 S LRTEXT="AUTOPSY PROTOCOL" D GLENTRY(LRTEXT,40)
"RTN","LRAPBR4",105,0)
 D DASH
"RTN","LRAPBR4",106,0)
 S LRTEXT="Date died: "_LRH D GLENTRY(LRTEXT,0,1)
"RTN","LRAPBR4",107,0)
 S LRTEXT="| Autopsy date: "_LRH(1) D GLENTRY(LRTEXT,40)
"RTN","LRAPBR4",108,0)
 S LRTEXT="Resident: "_LRM(2) D GLENTRY(LRTEXT,0,1)
"RTN","LRAPBR4",109,0)
 S LRTEXT="| "_$E(LRS(3),1,13) D GLENTRY(LRTEXT,40)
"RTN","LRAPBR4",110,0)
 S LRTEXT="Autopsy No. "_$S(LRQ(8)'="":LRQ(8)_LRH(2)_" "_LRAC,1:LRAC)
"RTN","LRAPBR4",111,0)
 D GLENTRY(LRTEXT,56)
"RTN","LRAPBR4",112,0)
 D DASH
"RTN","LRAPBR4",113,0)
 Q
"RTN","LRAPBR4",114,0)
MODAUCK ;Display modified banner if required
"RTN","LRAPBR4",115,0)
 S LRAPMR=$$GET1^DIQ(63,LRDFN,102,"I")
"RTN","LRAPBR4",116,0)
 Q:'LRAPMR
"RTN","LRAPBR4",117,0)
 S LRAPMD=$$GET1^DIQ(63,LRDFN,102.2,"I")
"RTN","LRAPBR4",118,0)
 D GLENTRY("","",1)
"RTN","LRAPBR4",119,0)
 S LRTEXT=""
"RTN","LRAPBR4",120,0)
 F LRCNT=1:1:$S(LRAPMD:29,1:31) D
"RTN","LRAPBR4",121,0)
 .S LRTEXT=LRTEXT_"*"
"RTN","LRAPBR4",122,0)
 S LRTEXT=LRTEXT_" MODIFIED "
"RTN","LRAPBR4",123,0)
 S LRTEXT=LRTEXT_$S(LRAPMD:"DIAGNOSIS ",1:"REPORT ")
"RTN","LRAPBR4",124,0)
 F LRCNT=1:1:$S(LRAPMD:29,1:31) D
"RTN","LRAPBR4",125,0)
 .S LRTEXT=LRTEXT_"*"
"RTN","LRAPBR4",126,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBR4",127,0)
 D GLENTRY("","",1)
"RTN","LRAPBR4",128,0)
 Q
"RTN","LRAPBR4",129,0)
POW ;Determine POW or Persian Gulf status
"RTN","LRAPBR4",130,0)
 I $P($G(^LR(LRDFN,0)),"^",2)=2 D
"RTN","LRAPBR4",131,0)
 .S LRPOW=0
"RTN","LRAPBR4",132,0)
 .I $D(^DPT(DFN,.52)) S:$P(^(.52),U,5)="Y" LRPOW=1
"RTN","LRAPBR4",133,0)
 .I $D(^DPT(DFN,.322)) S:$P($G(^(.322)),"^",10)="Y" LRPOW=1
"RTN","LRAPBR4",134,0)
 .D ^LRAPBRPW
"RTN","LRAPBR4",135,0)
 .K LRPOW
"RTN","LRAPBR4",136,0)
 Q
"RTN","LRAPBR4",137,0)
FOOTER ;Report footer
"RTN","LRAPBR4",138,0)
 D:LRTIU GLENTRY("$FTR",,1)
"RTN","LRAPBR4",139,0)
 D DASH
"RTN","LRAPBR4",140,0)
 D GLENTRY(,,1)
"RTN","LRAPBR4",141,0)
 I LRH(3)=""&(LRH(17)'="") D
"RTN","LRAPBR4",142,0)
 .S LRTEXT="| Provisional Anatomic Dx"
"RTN","LRAPBR4",143,0)
 .D GLENTRY(LRTEXT,55)
"RTN","LRAPBR4",144,0)
 S LRTEXT="Pathologist: "_LRM(3) D GLENTRY(LRTEXT,0,1)
"RTN","LRAPBR4",145,0)
 D GLENTRY(LRW(9),52)
"RTN","LRAPBR4",146,0)
 S LRTEXT="| Date " D GLENTRY(LRTEXT,55)
"RTN","LRAPBR4",147,0)
 S LRTEXT=$E($S(LRH(3)'="":LRH(3),1:LRH(17)),1,12) D GLENTRY(LRTEXT,BTAB)
"RTN","LRAPBR4",148,0)
 D DASH
"RTN","LRAPBR4",149,0)
 S LRTEXT=LRQ(1) D GLENTRY(LRTEXT,0,1)
"RTN","LRAPBR4",150,0)
 S LRTEXT="AUTOPSY PROTOCOL" D GLENTRY(LRTEXT,IOM-17)
"RTN","LRAPBR4",151,0)
 S LRTEXT="Patient: "_$E(LRP,1,30) D GLENTRY(LRTEXT,0,1)
"RTN","LRAPBR4",152,0)
 D GLENTRY(SSN,43),GLENTRY("SEX:"_SEX,56),GLENTRY("DOB:"_DOB,63)
"RTN","LRAPBR4",153,0)
 D GLENTRY($E(LRLLOC,1,22),0,1)
"RTN","LRAPBR4",154,0)
 S LRTEXT="Physician: "_$E(LRM(1),1,28) D GLENTRY(LRTEXT,23)
"RTN","LRAPBR4",155,0)
 S LRTEXT="AGE AT DEATH:"_$J(AGE,3) D GLENTRY(LRTEXT,63)
"RTN","LRAPBR4",156,0)
 Q
"RTN","LRAPBR4",157,0)
DASH ;
"RTN","LRAPBR4",158,0)
 D GLENTRY(LR("%"),0,1)
"RTN","LRAPBR4",159,0)
 Q
"RTN","LRAPBR4",160,0)
GLENTRY(LRPR1,LRPR2,LRPR3) ;Write to global
"RTN","LRAPBR4",161,0)
 ;LRPR1 = Text to be written to global
"RTN","LRAPBR4",162,0)
 ;LRPR2 = Tab position
"RTN","LRAPBR4",163,0)
 ;LRPR3 = 1 means start a new line.  Othewise, write on current line.
"RTN","LRAPBR4",164,0)
 S LRPR1=$G(LRPR1),LRPR2=+$G(LRPR2),LRPR3=+$G(LRPR3)
"RTN","LRAPBR4",165,0)
 D:LRPR3 NEWLN^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR4",166,0)
 D:'LRPR3 GLBWRT^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR4",167,0)
 Q
"RTN","LRAPBR4",168,0)
VART1 ;Setup variables
"RTN","LRAPBR4",169,0)
 ;14;LRAC;I;AUTOPSY ACCESSION #
"RTN","LRAPBR4",170,0)
 ;13.5;LRM(2);I;RESIDENT PATHOLOGIST
"RTN","LRAPBR4",171,0)
 ;12.1;LRM(1);I;PHYSICIAN
"RTN","LRAPBR4",172,0)
 ;13.01;LRW(9);I;AUTOPSY TYPIST
"RTN","LRAPBR4",173,0)
 ;13.6;LRM(3);I;SENIOR PATHOLOGIST
"RTN","LRAPBR4",174,0)
 ;11;LRH(1);;AUTOPSY DATE/TIME
"RTN","LRAPBR4",175,0)
 ;11;LRH(2);I;AUTOPSY DATE/TIME 2 DIGIT YEAR
"RTN","LRAPBR4",176,0)
 ;13;LRH(3);;DATE AUTOPSY REPORT COMPLETED
"RTN","LRAPBR4",177,0)
 ;14.9;LRH(17);;PROVISIONAL ANAT DX DATE
"RTN","LRAPBR4",178,0)
 ;14.1;LRLLOC;I;LOCATION
"RTN","LRAPBR4",179,0)
 ;12.5;AGE;I;AGE AT DEATH
"RTN","LRAPBR4",180,0)
 ;14.5;LRSVC;;SERVICE
"RTN","LRAPBR4",181,0)
 ;13.7;LRS(3);;AUTOPSY TYPE
"RTN","LRAPBR4",182,0)
 ;Q
"RTN","LRAPBR5")
0^9^B45647218
"RTN","LRAPBR5",1,0)
LRAPBR5 ;DALOI/WTY;AUTOPSY BROWSER DISPLAY/TIU STORAGE;6/5/2001
"RTN","LRAPBR5",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPBR5",3,0)
 ;
"RTN","LRAPBR5",4,0)
 ;This routine was copied from ^LRAPT2.  It was updated with FileMan
"RTN","LRAPBR5",5,0)
 ;DBS calls and modified to be used for browser display and storage
"RTN","LRAPBR5",6,0)
 ;of the SF515 in TIU.
"RTN","LRAPBR5",7,0)
 ;
"RTN","LRAPBR5",8,0)
MAIN ;
"RTN","LRAPBR5",9,0)
 N LRLLOC,LRDTDIED,LRTMP,LRNUM,LRINC,LRINC1
"RTN","LRAPBR5",10,0)
 S LRQUIT=0
"RTN","LRAPBR5",11,0)
 S:'$D(LRIENS) LRIENS=LRDFN_","
"RTN","LRAPBR5",12,0)
 D HEADER
"RTN","LRAPBR5",13,0)
 Q:LRQUIT
"RTN","LRAPBR5",14,0)
 D WEIGHTS
"RTN","LRAPBR5",15,0)
 D SPCSTD
"RTN","LRAPBR5",16,0)
 D JRNLREF
"RTN","LRAPBR5",17,0)
 D:'LRAU DIAGS
"RTN","LRAPBR5",18,0)
 Q
"RTN","LRAPBR5",19,0)
HEADER ;
"RTN","LRAPBR5",20,0)
 D GLENTRY("","",1)
"RTN","LRAPBR5",21,0)
 D GLENTRY(LRP,"",1)
"RTN","LRAPBR5",22,0)
 D GLENTRY(SSN,32)
"RTN","LRAPBR5",23,0)
 D GLENTRY("DOB: "_DOB,52)
"RTN","LRAPBR5",24,0)
 S LR("F")=1
"RTN","LRAPBR5",25,0)
 I 'LRTIU,'+$$GET1^DIQ(63,LRIENS,14.7,"I") D  Q
"RTN","LRAPBR5",26,0)
 .D GLENTRY("","",1)
"RTN","LRAPBR5",27,0)
 .D GLENTRY("Autopsy protocol report not verified.","",1)
"RTN","LRAPBR5",28,0)
 .S LRQUIT=1
"RTN","LRAPBR5",29,0)
 S LRLLOC=$$GET1^DIQ(63,LRIENS,14.5,"E")
"RTN","LRAPBR5",30,0)
 S DA=LRDFN D D^LRAUAW S Y=LR(63,12) D D^LRU S LRDTDIED=Y
"RTN","LRAPBR5",31,0)
 D GLENTRY("Acc: "_$$GET1^DIQ(63,LRIENS,14),"",1)
"RTN","LRAPBR5",32,0)
 D GLENTRY("AUTOPSY DATA",32)
"RTN","LRAPBR5",33,0)
 D GLENTRY("Age: "_$J($$GET1^DIQ(63,LRIENS,12.5),3),52)
"RTN","LRAPBR5",34,0)
 D GLENTRY("Date/time Died","",1)
"RTN","LRAPBR5",35,0)
 D GLENTRY("Date/time of Autopsy",52)
"RTN","LRAPBR5",36,0)
 D GLENTRY(LRDTDIED,"",1)
"RTN","LRAPBR5",37,0)
 D GLENTRY($E($$GET1^DIQ(63,LRIENS,13.7,"E"),1,18),32)
"RTN","LRAPBR5",38,0)
 D GLENTRY($$GET1^DIQ(63,LRIENS,11,"E"),52)
"RTN","LRAPBR5",39,0)
 D GLENTRY("Resident: "_$$GET1^DIQ(63,LRIENS,13.5,"E"),"",1)
"RTN","LRAPBR5",40,0)
 D GLENTRY("Senior: "_$E($$GET1^DIQ(63,LRIENS,13.6,"E"),1,19),52)
"RTN","LRAPBR5",41,0)
 Q
"RTN","LRAPBR5",42,0)
WEIGHTS ;Display/Store Weights & Measures
"RTN","LRAPBR5",43,0)
 D GLENTRY("","",1)
"RTN","LRAPBR5",44,0)
 I $D(^LR(LRDFN,"AW")) D
"RTN","LRAPBR5",45,0)
 .S LRTMP="Rt--Lung--Lt  Liver Spleen  Rt--Kidney--Lt  Brain  Body "
"RTN","LRAPBR5",46,0)
 .S LRTMP=LRTMP_"Wt(lb)    Ht(in)"
"RTN","LRAPBR5",47,0)
 .D GLENTRY(LRTMP,"",1)
"RTN","LRAPBR5",48,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,18),4),"",1)
"RTN","LRAPBR5",49,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,19),4),8)
"RTN","LRAPBR5",50,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,20),5),14)
"RTN","LRAPBR5",51,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,21),5),21)
"RTN","LRAPBR5",52,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,22),4),28)
"RTN","LRAPBR5",53,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,23),4),38)
"RTN","LRAPBR5",54,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,25),4),45)
"RTN","LRAPBR5",55,0)
 .D GLENTRY($$GET1^DIQ(63,LRIENS,17),55)
"RTN","LRAPBR5",56,0)
 .D GLENTRY($$GET1^DIQ(63,LRIENS,16),68)
"RTN","LRAPBR5",57,0)
 F LRINC=1:1:2 D GLENTRY("","",1)
"RTN","LRAPBR5",58,0)
 D:$D(^LR(LRDFN,"AW")) GLENTRY("Heart(gm)",BTAB)
"RTN","LRAPBR5",59,0)
 I $D(^LR(LRDFN,"AV")) D
"RTN","LRAPBR5",60,0)
 .D GLENTRY("TV(cm)  PV(cm)  MV(cm)  AV(cm)  RV(cm)  LV(cm)",12)
"RTN","LRAPBR5",61,0)
 D GLENTRY("","",1)
"RTN","LRAPBR5",62,0)
 D GLENTRY($J($$GET1^DIQ(63,LRIENS,24),5),BTAB)
"RTN","LRAPBR5",63,0)
 I $D(^LR(LRDFN,"AV")) D
"RTN","LRAPBR5",64,0)
 .S LRNUM=12
"RTN","LRAPBR5",65,0)
 .F LRINC=26:1:31 D
"RTN","LRAPBR5",66,0)
 ..D GLENTRY($J($$GET1^DIQ(63,LRIENS,LRINC),4),LRNUM)
"RTN","LRAPBR5",67,0)
 ..S LRNUM=LRNUM+8
"RTN","LRAPBR5",68,0)
 .D GLENTRY("","",1)
"RTN","LRAPBR5",69,0)
 .S LRTMP="Cavities(ml): Rt--Pleural--Lt  Pericardial  Peritoneal"
"RTN","LRAPBR5",70,0)
 .D GLENTRY(LRTMP,"",1)
"RTN","LRAPBR5",71,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,31.2),4),14,1)
"RTN","LRAPBR5",72,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,31.1),4),25)
"RTN","LRAPBR5",73,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,31.3),4),33)
"RTN","LRAPBR5",74,0)
 .D GLENTRY($J($$GET1^DIQ(63,LRIENS,31.4),4),45)
"RTN","LRAPBR5",75,0)
 I $D(^LR(LRDFN,"AW")) D
"RTN","LRAPBR5",76,0)
 .D GLENTRY("","",1)
"RTN","LRAPBR5",77,0)
 .F LRINC=1:1:8 D
"RTN","LRAPBR5",78,0)
 ..S LRTMP=$$GET1^DIQ(63,LRIENS,"25."_LRINC)
"RTN","LRAPBR5",79,0)
 ..Q:LRTMP=""
"RTN","LRAPBR5",80,0)
 ..D GLENTRY($$GET1^DID(63,"25."_LRINC,"","LABEL")_": "_LRTMP,"",1)
"RTN","LRAPBR5",81,0)
 I $D(^LR(LRDFN,"AWI")) D
"RTN","LRAPBR5",82,0)
 .D GLENTRY("","",1)
"RTN","LRAPBR5",83,0)
 .F LRINC=1:1:5 D
"RTN","LRAPBR5",84,0)
 ..S LRNUM=$S(LRINC=1:25.9,1:25.9_(LRINC-1))
"RTN","LRAPBR5",85,0)
 ..S LRTMP=$$GET1^DIQ(63,LRIENS,LRNUM)
"RTN","LRAPBR5",86,0)
 ..Q:LRTMP=""
"RTN","LRAPBR5",87,0)
 ..D GLENTRY($$GET1^DID(63,LRNUM,"","LABEL")_": "_LRTMP,"",1)
"RTN","LRAPBR5",88,0)
 Q
"RTN","LRAPBR5",89,0)
SPCSTD ;Display/store special studies
"RTN","LRAPBR5",90,0)
 N LRARR,LRSPC,LRORGTS,LRIENS1,LRFLG,LRTEXT,LRCNT
"RTN","LRAPBR5",91,0)
 D GLENTRY("","",1)
"RTN","LRAPBR5",92,0)
 S (LRFLG,LRINC)=0
"RTN","LRAPBR5",93,0)
 F  S LRINC=$O(^LR(LRDFN,"AY",LRINC)) Q:'LRINC  D
"RTN","LRAPBR5",94,0)
 .S LRORGTS=$$GET1^DIQ(63.2,LRINC_","_LRIENS,".01:.01")
"RTN","LRAPBR5",95,0)
 .S LRINC1=0
"RTN","LRAPBR5",96,0)
 .F  S LRINC1=$O(^LR(LRDFN,"AY",LRINC,5,LRINC1)) Q:'LRINC1  D
"RTN","LRAPBR5",97,0)
 ..S LRIENS1=LRINC1_","_LRINC_","_LRIENS
"RTN","LRAPBR5",98,0)
 ..D GETS^DIQ(63.26,LRIENS1,".01;.03","","LRARR")
"RTN","LRAPBR5",99,0)
 ..M LRSPC=LRARR(63.26,LRIENS1)
"RTN","LRAPBR5",100,0)
 ..S LRSPC(.02)=$$GET1^DIQ(63.26,LRIENS1,.02,"E")
"RTN","LRAPBR5",101,0)
 ..I 'LRFLG D
"RTN","LRAPBR5",102,0)
 ...D GLENTRY("","",1)
"RTN","LRAPBR5",103,0)
 ...D GLENTRY(LRORGTS,BTAB)
"RTN","LRAPBR5",104,0)
 ...S LRFLG=1
"RTN","LRAPBR5",105,0)
 ..S LRTEXT=LRSPC(.01)_" "_LRSPC(.03)_" Date: "_LRSPC(.02)
"RTN","LRAPBR5",106,0)
 ..D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBR5",107,0)
 ..K ^UTILITY($J,"W"),LRTMP
"RTN","LRAPBR5",108,0)
 ..S X=$$GET1^DIQ(63.26,LRIENS1,1,"","LRTMP")
"RTN","LRAPBR5",109,0)
 ..S DIWR=IOM-10,DIWL=10,DIWF=""
"RTN","LRAPBR5",110,0)
 ..S X=+$$GET1^DID(63.27,1,"","SPECIFIER","LRDBERR")
"RTN","LRAPBR5",111,0)
 ..I $$GET1^DID(X,.01,"","SPECIFIER")["L" S DIWF="N"
"RTN","LRAPBR5",112,0)
 ..S LRCNT=0 F  S LRCNT=$O(LRTMP(LRCNT)) Q:'LRCNT  D
"RTN","LRAPBR5",113,0)
 ...S X=LRTMP(LRCNT) D ^DIWP
"RTN","LRAPBR5",114,0)
 ..S LRCNT=0 F  S LRCNT=$O(^UTILITY($J,"W",DIWL,LRCNT)) Q:'LRCNT  D
"RTN","LRAPBR5",115,0)
 ...D GLENTRY(^UTILITY($J,"W",DIWL,LRCNT,0),DIWL,1)
"RTN","LRAPBR5",116,0)
 ..K ^UTILITY($J,"W")
"RTN","LRAPBR5",117,0)
 ..D GLENTRY("","",1)
"RTN","LRAPBR5",118,0)
 Q
"RTN","LRAPBR5",119,0)
JRNLREF ;Print journal references
"RTN","LRAPBR5",120,0)
 N LRFL,LRM,LRN,LRTP,LRIENS1,LRIENS2,LRIENS3,LRFILE1,LRFILE3,LRFILE4
"RTN","LRAPBR5",121,0)
 D GLENTRY(,,1)
"RTN","LRAPBR5",122,0)
 S LRINC1=0,LRFILE=63.2
"RTN","LRAPBR5",123,0)
 F  S LRINC1=$O(^LR(LRDFN,"AY",LRINC1)) Q:'LRINC1  D
"RTN","LRAPBR5",124,0)
 .S LRIENS1=LRINC1_","_LRIENS
"RTN","LRAPBR5",125,0)
 .S LRTP=$$GET1^DIQ(LRFILE,LRIENS1,.01,"I")
"RTN","LRAPBR5",126,0)
 .;Topography
"RTN","LRAPBR5",127,0)
 .N LRN
"RTN","LRAPBR5",128,0)
 .S LRFL=LRTP,LRFILE1=61 D JREFPRT
"RTN","LRAPBR5",129,0)
 .;Morphology
"RTN","LRAPBR5",130,0)
 .S LRFILE1=61.1,LRFILE3=+$$GET1^DID(LRFILE,4,"","SPECIFIER")
"RTN","LRAPBR5",131,0)
 .S LRM=0 F  S LRM=$O(^LR(LRDFN,"AY",LRINC1,2,LRM)) Q:'LRM  D
"RTN","LRAPBR5",132,0)
 ..S LRIENS2=LRM_","_LRIENS1
"RTN","LRAPBR5",133,0)
 ..S LRFL=$$GET1^DIQ(LRFILE3,LRIENS2,.01,"I")
"RTN","LRAPBR5",134,0)
 ..D JREFPRT
"RTN","LRAPBR5",135,0)
 ..;Etiology
"RTN","LRAPBR5",136,0)
 ..S LRFILE1=61.2,LRFILE4=+$$GET1^DID(LRFILE3,1,"","SPECIFIER")
"RTN","LRAPBR5",137,0)
 ..S LRN=0 F  S LRN=$O(^LR(LRDFN,"AY",LRINC1,2,LRM,1,LRN)) Q:'LRN  D
"RTN","LRAPBR5",138,0)
 ...S LRIENS3=LRN_","_LRIENS2
"RTN","LRAPBR5",139,0)
 ...S LRFL=$$GET1^DIQ(LRFILE4,LRIENS3,.01,"I")
"RTN","LRAPBR5",140,0)
 ...D JREFPRT
"RTN","LRAPBR5",141,0)
 .;Disease
"RTN","LRAPBR5",142,0)
 .S LRFILE1=61.4,LRFILE3=+$$GET1^DID(LRFILE,3,"","SPECIFIER")
"RTN","LRAPBR5",143,0)
 .S LRM=0 F  S LRM=$O(^LR(LRDFN,"AY",LRINC1,1,LRM)) Q:'LRM  D
"RTN","LRAPBR5",144,0)
 ..S LRIENS2=LRM_","_LRIENS1
"RTN","LRAPBR5",145,0)
 ..S LRFL=$$GET1^DIQ(LRFILE3,LRIENS2,.01,"I")
"RTN","LRAPBR5",146,0)
 ..D JREFPRT
"RTN","LRAPBR5",147,0)
 .;Function
"RTN","LRAPBR5",148,0)
 .S LRFILE1=61.3,LRFILE3=+$$GET1^DID(LRFILE,1,"","SPECIFIER")
"RTN","LRAPBR5",149,0)
 .S LRM=0 F  S LRM=$O(^LR(LRDFN,"AY",LRINC1,3,LRM)) Q:'LRM  D
"RTN","LRAPBR5",150,0)
 ..S LRIENS2=LRM_","_LRIENS1
"RTN","LRAPBR5",151,0)
 ..S LRFL=$$GET1^DIQ(LRFILE3,LRIENS2,.01,"I")
"RTN","LRAPBR5",152,0)
 ..D JREFPRT
"RTN","LRAPBR5",153,0)
 .S LRFILE1=61.5,LRFILE3=+$$GET1^DID(LRFILE,1.5,"","SPECIFIER")
"RTN","LRAPBR5",154,0)
 .S LRM=0 F  S LRM=$O(^LR(LRDFN,"AY",LRINC1,4,LRM)) Q:'LRM  D
"RTN","LRAPBR5",155,0)
 ..S LRIENS2=LRM_","_LRIENS1
"RTN","LRAPBR5",156,0)
 ..S LRFL=$$GET1^DIQ(LRFILE3,LRIENS2,.01,"I")
"RTN","LRAPBR5",157,0)
 ..D JREFPRT
"RTN","LRAPBR5",158,0)
 Q
"RTN","LRAPBR5",159,0)
JREFPRT ;
"RTN","LRAPBR5",160,0)
 ; Print journal reference on the patient report if the 
"RTN","LRAPBR5",161,0)
 ; reference is flagged for printing.
"RTN","LRAPBR5",162,0)
 N LRJR,LRINC
"RTN","LRAPBR5",163,0)
 S LRFILE2=+$$GET1^DID(LRFILE1,5,"","SPECIFIER")
"RTN","LRAPBR5",164,0)
 S LRJR=0 F  S LRJR=$O(^LAB(LRFILE1,LRFL,"JR",LRJR)) Q:'LRJR  D
"RTN","LRAPBR5",165,0)
 .S LRJR(.01)=$$GET1^DIQ(LRFILE2,LRJR_","_LRFL_",",.01)
"RTN","LRAPBR5",166,0)
 .F LRINC=1:1:5 D
"RTN","LRAPBR5",167,0)
 ..S LRJR(LRINC)=$$GET1^DIQ(LRFILE2,LRJR_","_LRFL_",",LRINC)
"RTN","LRAPBR5",168,0)
 .S LRJR(6)=$$GET1^DIQ(LRFILE2,LRJR_","_LRFL_",",6,"I")
"RTN","LRAPBR5",169,0)
 .Q:'LRJR(6)
"RTN","LRAPBR5",170,0)
 .D GLENTRY(,,1),GLENTRY("Reference: ",,1)
"RTN","LRAPBR5",171,0)
 .D GLENTRY(LRJR(.01),,1)
"RTN","LRAPBR5",172,0)
 .D GLENTRY(LRJR(1),,1),GLENTRY(,,1)
"RTN","LRAPBR5",173,0)
 .I LRJR(2)'="" D
"RTN","LRAPBR5",174,0)
 ..D GLENTRY(LRJR(2)_"  vol."_LRJR(3),BTAB)
"RTN","LRAPBR5",175,0)
 ..D GLENTRY(" pg."_LRJR(4),BTAB)
"RTN","LRAPBR5",176,0)
 .D GLENTRY("  Date: "_LRJR(5),BTAB)
"RTN","LRAPBR5",177,0)
 Q
"RTN","LRAPBR5",178,0)
DIAGS ;
"RTN","LRAPBR5",179,0)
 N LRV
"RTN","LRAPBR5",180,0)
 D GLENTRY("","",1)
"RTN","LRAPBR5",181,0)
 F LRV=81,82 D
"RTN","LRAPBR5",182,0)
 .D GLENTRY("","",1)
"RTN","LRAPBR5",183,0)
 .D:LRV=81 GLENTRY(LRAU(1),BTAB)
"RTN","LRAPBR5",184,0)
 .D:LRV=82 GLENTRY(LRAU(2),BTAB)
"RTN","LRAPBR5",185,0)
 .S LRFILE=63
"RTN","LRAPBR5",186,0)
 .S LRFIELD=$S(LRV=81:32.2,1:32.3)
"RTN","LRAPBR5",187,0)
 .D WP^LRAPBR4
"RTN","LRAPBR5",188,0)
 .D GLENTRY("","",1)
"RTN","LRAPBR5",189,0)
 Q
"RTN","LRAPBR5",190,0)
GLENTRY(LRPR1,LRPR2,LRPR3) ;Write to global
"RTN","LRAPBR5",191,0)
 ;LRPR1 = Text to be written to global
"RTN","LRAPBR5",192,0)
 ;LRPR2 = Tab position
"RTN","LRAPBR5",193,0)
 ;LRPR3 = 1 means start a new line.  Othewise, write an current line.
"RTN","LRAPBR5",194,0)
 S LRPR1=$G(LRPR1),LRPR2=+$G(LRPR2),LRPR3=+$G(LRPR3)
"RTN","LRAPBR5",195,0)
 D:LRPR3 NEWLN^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR5",196,0)
 D:'LRPR3 GLBWRT^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBR5",197,0)
 Q
"RTN","LRAPBRPW")
0^10^B10053434
"RTN","LRAPBRPW",1,0)
LRAPBRPW ;DALOI/WTY - POW Patient Browser Print;04/03/01
"RTN","LRAPBRPW",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPBRPW",3,0)
 ;
"RTN","LRAPBRPW",4,0)
MAIN ;Main subroutine
"RTN","LRAPBRPW",5,0)
 N LRTEXT
"RTN","LRAPBRPW",6,0)
 D:$$GET1^DIQ(2,DFN_",",.525,"I")="Y" POW
"RTN","LRAPBRPW",7,0)
 D:$$GET1^DIQ(2,DFN_",",.32201,"I")="Y" PERSGULF
"RTN","LRAPBRPW",8,0)
 Q
"RTN","LRAPBRPW",9,0)
POW ;Prisoner-of-War text
"RTN","LRAPBRPW",10,0)
 N LRCLOC
"RTN","LRAPBRPW",11,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",12,0)
 S LRTEXT="*** THIS PATIENT WAS A PRISONER OF WAR ***"
"RTN","LRAPBRPW",13,0)
 D GLENTRY(LRTEXT,19,1)
"RTN","LRAPBRPW",14,0)
 F I=1:1:2 D GLENTRY("","",1)
"RTN","LRAPBRPW",15,0)
 S LRCLOC=$$GET1^DIQ(2,DFN_",",".526:.01")
"RTN","LRAPBRPW",16,0)
 D:LRCLOC'="" GLENTRY("POW PERIOD: "_LRCLOC,24)
"RTN","LRAPBRPW",17,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",18,0)
 S LRTEXT="FORWARD A DUPLICATE SET OF SLIDES, BLOCKS AND REPRESENTATIVE "
"RTN","LRAPBRPW",19,0)
 S LRTEXT=LRTEXT_"WET TISSUE TO:"
"RTN","LRAPBRPW",20,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",21,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",22,0)
 D GLENTRY("DIRECTOR,ARMED FORCES INSTITUTE OF PATHOLOGY",3,1)
"RTN","LRAPBRPW",23,0)
 D GLENTRY("ATTENTION: FORMER POW REGISTRY",3,1)
"RTN","LRAPBRPW",24,0)
 D GLENTRY("WASHINGTON, D.C. 20306",3,1)
"RTN","LRAPBRPW",25,0)
 S LRTEXT="<A POW label (VA Form 10-5558) may be attached to packaged "
"RTN","LRAPBRPW",26,0)
 S LRTEXT=LRTEXT_"specimens>"
"RTN","LRAPBRPW",27,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",28,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",29,0)
 D GLENTRY("MARK CASE CLEARLY AS:  FORMER POW  "_LRCLOC,"",1)
"RTN","LRAPBRPW",30,0)
 S LRTEXT="NOTE IN APPROPRIATE FORM THAT MATERIAL HAS BEEN SENT TO THE "
"RTN","LRAPBRPW",31,0)
 S LRTEXT=LRTEXT_"AFIP"
"RTN","LRAPBRPW",32,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",33,0)
 I $D(LRSS),LRSS="AU" D AUNOTE
"RTN","LRAPBRPW",34,0)
 F I=1:1:2 D GLENTRY("","",1)
"RTN","LRAPBRPW",35,0)
 Q
"RTN","LRAPBRPW",36,0)
AUNOTE ;Autopsy text
"RTN","LRAPBRPW",37,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",38,0)
 S LRTEXT="Follow Guidelines for Performing Autopsy Examination on "
"RTN","LRAPBRPW",39,0)
 S LRTEXT=LRTEXT_"Former Prisoners of War (POW's)  PROFESSIONAL "
"RTN","LRAPBRPW",40,0)
 S LRTEXT=LRTEXT_"SERVICES LETTER  IL 11-82-17"
"RTN","LRAPBRPW",41,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",42,0)
 D GLENTRY("Be sure to take appropriate samples of:","",1)
"RTN","LRAPBRPW",43,0)
 S LRTEXT="BRAIN, NERVE, TESTES, PROSTATE, URINARY BLADDER, and KIDNEY"
"RTN","LRAPBRPW",44,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",45,0)
 Q
"RTN","LRAPBRPW",46,0)
PERSGULF ;Persian Gulf text
"RTN","LRAPBRPW",47,0)
 S LRTEXT="***THIS PATIENT SERVED IN THE PERSIAN GULF WAR***"
"RTN","LRAPBRPW",48,0)
 S LRTEXT=$$CJ^XLFSTR(LRTEXT,IOM)
"RTN","LRAPBRPW",49,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",50,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",51,0)
 F I=1:1:2 D GLENTRY("","",1)
"RTN","LRAPBRPW",52,0)
 S LRTEXT=$$CJ^XLFSTR("***************",IOM)
"RTN","LRAPBRPW",53,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",54,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",55,0)
 S LRTEXT="Send a set of DUPLICATE paraffin blocks/smears, "
"RTN","LRAPBRPW",56,0)
 S LRTEXT=LRTEXT_"H & E slides for "
"RTN","LRAPBRPW",57,0)
 S LRTEXT=$$CJ^XLFSTR(LRTEXT,IOM)
"RTN","LRAPBRPW",58,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",59,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",60,0)
 S LRTEXT="Anatomic Path material and a copy of the Final Pathology "
"RTN","LRAPBRPW",61,0)
 S LRTEXT=LRTEXT_"Report to "
"RTN","LRAPBRPW",62,0)
 S LRTEXT=$$CJ^XLFSTR(LRTEXT,IOM)
"RTN","LRAPBRPW",63,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",64,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",65,0)
 S LRTEXT=$$CJ^XLFSTR("the AFIP using the AFIP Requisition form.  ",IOM)
"RTN","LRAPBRPW",66,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",67,0)
 F I=1:1:2 D GLENTRY("","",1)
"RTN","LRAPBRPW",68,0)
 S LRTEXT=$$CJ^XLFSTR("***************",IOM)
"RTN","LRAPBRPW",69,0)
 D GLENTRY(LRTEXT,"",1)
"RTN","LRAPBRPW",70,0)
 D GLENTRY("","",1)
"RTN","LRAPBRPW",71,0)
 Q
"RTN","LRAPBRPW",72,0)
GLENTRY(LRPR1,LRPR2,LRPR3) ;Write to global
"RTN","LRAPBRPW",73,0)
 ;LRPR1 = Text to be written to global
"RTN","LRAPBRPW",74,0)
 ;LRPR2 = Tab position
"RTN","LRAPBRPW",75,0)
 ;LRPR3 = 1 means start a new line.  Othewise, write an current line.
"RTN","LRAPBRPW",76,0)
 S LRPR3=+$G(LRPR3)
"RTN","LRAPBRPW",77,0)
 D:LRPR3 NEWLN^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBRPW",78,0)
 D:'LRPR3 GLBWRT^LRAPUTL(LRPR1,LRPR2)
"RTN","LRAPBRPW",79,0)
 Q
"RTN","LRAPBS1")
0^45^B14125023
"RTN","LRAPBS1",1,0)
LRAPBS1 ;AVAMC/REG - BLOCK/SLIDE DATA ENTRY;3/25/2002
"RTN","LRAPBS1",2,0)
 ;;5.2;LAB SERVICE;**121,259**;Sep 27, 1994
"RTN","LRAPBS1",3,0)
 ;
"RTN","LRAPBS1",4,0)
ASK N CORRECT,LRREL,LRMSG
"RTN","LRAPBS1",5,0)
 S %DT="",X="T" D ^%DT S LRY=$E(Y,1,3)+1700 W !!,"Enter year: ",LRY,"// " R X:DTIME G:'$T!(X[U) END S:X="" X=LRY
"RTN","LRAPBS1",6,0)
 S LRN="",%DT="EQ" D ^%DT G:Y<1 ASK S LRY=$E(Y,1,3),LRAD=$E(LRY,1,3)_"0000",LRH(0)=LRY+1700 W "  ",LRH(0)
"RTN","LRAPBS1",7,0)
 I '$O(^LRO(68,LRAA,1,LRAD,1,0)) W $C(7),!!,"NO ",LRAA(1)," ACCESSIONS IN FILE FOR ",LRH(0),!! Q
"RTN","LRAPBS1",8,0)
W ;
"RTN","LRAPBS1",9,0)
 K X,Y,LR("CK")
"RTN","LRAPBS1",10,0)
 W !!,"Select Accession Number: ",LRN,$S(LRN:"// ",1:"")
"RTN","LRAPBS1",11,0)
 R LRAN:DTIME
"RTN","LRAPBS1",12,0)
 I '$T!(LRAN[U)!(LRN=""&(LRAN="")) D END Q
"RTN","LRAPBS1",13,0)
 S:LRAN="" LRAN=LRN
"RTN","LRAPBS1",14,0)
 I LRAN'?1N.N S LRN="" W $C(7),!!,"Enter a number." G W
"RTN","LRAPBS1",15,0)
 S LRN=$O(^LRO(68,LRAA,1,LRAD,1,LRAN)) S:LRN'=+LRN LRN=""
"RTN","LRAPBS1",16,0)
 D OE1^LR7OB63D,REST,OERR^LR7OB63D
"RTN","LRAPBS1",17,0)
 G W
"RTN","LRAPBS1",18,0)
REST ;
"RTN","LRAPBS1",19,0)
 W "  for ",LRH(0)
"RTN","LRAPBS1",20,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) D  Q
"RTN","LRAPBS1",21,0)
 .W $C(7),!!,"Accession # ",LRAN," for ",LRH(0)," not in"
"RTN","LRAPBS1",22,0)
 .W " ACCESSION file",!!
"RTN","LRAPBS1",23,0)
 S X=^LRO(68,LRAA,1,LRAD,1,LRAN,0),LRLLOC=$P(X,"^",7),LRDFN=+X
"RTN","LRAPBS1",24,0)
 Q:'$D(^LR(LRDFN,0))  S X=^(0) D ^LRUP
"RTN","LRAPBS1",25,0)
 W !,LRP,"  ID: ",SSN
"RTN","LRAPBS1",26,0)
 Q:'$D(^LRO(68,LRAA,1,LRAD,1,LRAN,3))  S LRI=$P(^(3),"^",5)
"RTN","LRAPBS1",27,0)
 S LRA=$S("SPCYEM"[LRSS:^LR(LRDFN,LRSS,LRI,0),$D(^LR(LRDFN,"AU")):^("AU"),1:"")
"RTN","LRAPBS1",28,0)
 S LRRC=$S("SPCYEM"[LRSS:$P(LRA,"^",10),1:+LRA)
"RTN","LRAPBS1",29,0)
 ;K LRREL
"RTN","LRAPBS1",30,0)
 ;D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS,$G(LRI))
"RTN","LRAPBS1",31,0)
 ;I +$G(LRREL(1)) D  Q
"RTN","LRAPBS1",32,0)
 ;.K LRMSG
"RTN","LRAPBS1",33,0)
 ;.S LRMSG=$C(7)_"Report verified.  Cannot use this option."
"RTN","LRAPBS1",34,0)
 ;.D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPBS1",35,0)
 I LRSS="CY",LRCAPA D C^LRAPCWK Q:LRK<1
"RTN","LRAPBS1",36,0)
 W ! I "AUSPEM"[LRSS S %DT("A")=$S('$D(LRF):"Date/time blocks prepared/modified: ",1:"Date/time Gross Description/Cutting: ") D W^LRAPWU Q:Y<1  S LRK(1)=LRK D CK Q:'$D(Y)  G:$D(LRF) A
"RTN","LRAPBS1",37,0)
 S %DT("A")="Date/time  "_$S("AUSPCY"[LRSS:"slides stained: ",1:"sections prepared: ") D W^LRAPWU Q:Y<1  I LRSS="CY" D CK Q:'$D(Y)
"RTN","LRAPBS1",38,0)
 I "AUSPEM"[LRSS,Y<LRK(1) W $C(7),!,"Date/time must not be before date/time blocks prepared(" S Y=LRK(1),LRN="" D DD^%DT W Y,")." Q
"RTN","LRAPBS1",39,0)
A D EN^LRAPBS2,EN^LRAPST W !!,"Data displayed ok " S %=2 D YN^LRU Q:%<1  I %=1 D EN^LRAPWKA Q
"RTN","LRAPBS1",40,0)
 I LRSS'="AU" S DIE="^LR("_LRDFN_","""_LRSS_""",",DA=LRI,DA(1)=LRDFN D CK^LRU Q:$D(LR("CK"))  D ^DIE D FRE^LRU G A
"RTN","LRAPBS1",41,0)
 S DIE="^LR(",DA=LRDFN L +^LR(LRDFN,"AU"):1 I '$T W !,$C(7),"ANOTHER TERMINAL IS EDITING THIS ENTRY!" Q
"RTN","LRAPBS1",42,0)
 D ^DIE L -^LR(LRDFN,"AU") G A
"RTN","LRAPBS1",43,0)
 ;
"RTN","LRAPBS1",44,0)
CK I LRK<LRRC W $C(7),!,"Date/time must not be before date/time ",$S("SPCYEM"[LRSS:"specimen received (",1:"autopsy performed (") S Y=LRRC D DD^%DT W Y,")" K Y S LRN=""
"RTN","LRAPBS1",45,0)
 Q
"RTN","LRAPBS1",46,0)
SP S J=0,X="PARAFFIN BLOCK" D X^LRUWK S LRW(1)=LRT K LRT
"RTN","LRAPBS1",47,0)
 S X="PARAFFIN BLOCK, ADDITIONAL CUT" D X^LRUWK S LRW(0)=LRT K LRT
"RTN","LRAPBS1",48,0)
 S X="PLASTIC SECTION" D X^LRUWK S LRW(2)=LRT K LRT
"RTN","LRAPBS1",49,0)
 S X="FROZEN SECTION BLOCK RUSH" D X^LRUWK S LRW(3)=LRT K LRT
"RTN","LRAPBS1",50,0)
 S X="FROZEN SECTION BLOCK NOT RUSH" D X^LRUWK S LRW(4)=LRT K LRT
"RTN","LRAPBS1",51,0)
 S X="FROZEN SECTION BLOCK RUSH ADD" D X^LRUWK S LRW(5)=LRT K LRT
"RTN","LRAPBS1",52,0)
 S X="FROZEN SECTION ADDITIONAL CUT" D X^LRUWK S LRW(6)=LRT K LRT
"RTN","LRAPBS1",53,0)
 S X="FROZEN SECTION H & E" D X^LRUWK S LRW(7)=LRT K LRT Q
"RTN","LRAPBS1",54,0)
AU S J=0,X="AUTOPSY SECTION COMPLETE" Q:'LRCAPA  D X^LRUWK S LRW(1)=LRT K LRT
"RTN","LRAPBS1",55,0)
 S X="AUTOPSY H & E" D X^LRUWK S LRW(0)=LRT K LRT
"RTN","LRAPBS1",56,0)
 S X="AUTOPSY UNSTAINED SLIDE" D X^LRUWK S LRW(2)=LRT K LRT Q
"RTN","LRAPBS1",57,0)
 ;
"RTN","LRAPBS1",58,0)
END D V^LRU Q
"RTN","LRAPCUM")
0^53^B21346716
"RTN","LRAPCUM",1,0)
LRAPCUM ;AVAMC/REG/KLL - AP PATIENT CUM ;9/25/00
"RTN","LRAPCUM",2,0)
 ;;5.2;LAB SERVICE;**34,72,173,248,259**;Sep 27, 1994
"RTN","LRAPCUM",3,0)
 ;
"RTN","LRAPCUM",4,0)
 ;Reference to ^%ZIS supported by IA #10086
"RTN","LRAPCUM",5,0)
 ;Reference to ^DIWP supported by IA #10011
"RTN","LRAPCUM",6,0)
 ;Reference to ^DIWW supported by IA #10029
"RTN","LRAPCUM",7,0)
 ;
"RTN","LRAPCUM",8,0)
 S IOP="HOME" D ^%ZIS,L^LRU
"RTN","LRAPCUM",9,0)
 W !!?15,LRAA(1)," PATIENT REPORT(S) DISPLAY"
"RTN","LRAPCUM",10,0)
P W ! S LR("Q")=0 K DIC D ^LRDPA Q:LRDFN=-1  D R G P
"RTN","LRAPCUM",11,0)
 ;
"RTN","LRAPCUM",12,0)
R W !!,"Is this the patient " S %=1 D YN^LRU Q:%'=1
"RTN","LRAPCUM",13,0)
 I '$D(^LR(LRDFN,LRSS)) W $C(7),!!,"No ",LRAA(1)," reports on file",! Q
"RTN","LRAPCUM",14,0)
 D S F LRI=0:0 W @IOF S LRA(1)=21,LRI=$O(^LR(LRDFN,LRSS,LRI)) Q:'LRI  S B=$G(^(LRI,0)) I B D W Q:LRA(2)?1P
"RTN","LRAPCUM",15,0)
 Q
"RTN","LRAPCUM",16,0)
C S C=0 F LRZ=0:1 S C=$O(^LR(LRDFN,LRSS,LRI,LRV,C)) Q:'C  D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P  W !?2,$P(^LR(LRDFN,LRSS,LRI,LRV,C,0),U)
"RTN","LRAPCUM",17,0)
 Q
"RTN","LRAPCUM",18,0)
F D E
"RTN","LRAPCUM",19,0)
 K ^UTILITY($J,"W")
"RTN","LRAPCUM",20,0)
 S C=0 F LRZ=0:1 S C=$O(^LR(LRDFN,LRSS,LRI,LRV,C)) Q:'C!(LRA(2)?1P)  D
"RTN","LRAPCUM",21,0)
 .D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P
"RTN","LRAPCUM",22,0)
 .S X=^LR(LRDFN,LRSS,LRI,LRV,C,0),X=$P(X,U)
"RTN","LRAPCUM",23,0)
 .D ^DIWP
"RTN","LRAPCUM",24,0)
 Q:LRA(2)?1P  D:LRZ ^DIWW
"RTN","LRAPCUM",25,0)
 Q
"RTN","LRAPCUM",26,0)
E K ^TMP($J) S DIWL=3,DIWR=IOM-3,DIWF="W" Q
"RTN","LRAPCUM",27,0)
W S Y=+B D D^LRU S LRW(1)=Y,Y=$P(B,"^",10) D D^LRU S LRW(10)=Y,Y=$P(B,"^",3) D D^LRU S LRW(3)=Y,X=$P(B,"^",2) D:X D^LRUA S LRW(2)=X,LRW(11)=$P(B,"^",11)
"RTN","LRAPCUM",28,0)
 S X=$P(B,"^",4) D:X D^LRUA S LRW(4)=X,X=$P(B,"^",7) D:X D^LRUA S LRW(7)=X
"RTN","LRAPCUM",29,0)
 W !,"Date Spec taken: ",LRW(1),?38,"Pathologist:",LRW(2),!,"Date Spec rec'd: ",LRW(10),?38,$S(LRSS="SP":"Resident: ",1:"Tech: "),LRW(4)
"RTN","LRAPCUM",30,0)
 W !,$S($L(LRW(3)):"Date  completed: ",1:"REPORT INCOMPLETE"),LRW(3),?38,"Accession #: ",$P(B,"^",6),!,"Submitted by: ",$P(B,"^",5),?38,"Practitioner:",LRW(7),!,LR("%")
"RTN","LRAPCUM",31,0)
 I LRW(11)="" D A W !,$C(7),"Report not verified",! G MORE
"RTN","LRAPCUM",32,0)
 I $D(^LR(LRDFN,LRSS,LRI,.1)) W !,"Specimen: " S LRV=.1 D C Q:LRA(2)?1P
"RTN","LRAPCUM",33,0)
 I $D(^LR(LRDFN,LRSS,LRI,.2)) W !,"Brief Clinical History:" S LRV=.2 D F Q:LRA(2)?1P
"RTN","LRAPCUM",34,0)
 I $D(^LR(LRDFN,LRSS,LRI,.3)) W !,"Preoperative Diagnosis:" S LRV=.3 D F Q:LRA(2)?1P
"RTN","LRAPCUM",35,0)
 I $D(^LR(LRDFN,LRSS,LRI,.4)) W !,"Operative Findings:" S LRV=.4 D F Q:LRA(2)?1P
"RTN","LRAPCUM",36,0)
 I $D(^LR(LRDFN,LRSS,LRI,.5)) W !,"Postoperative Diagnosis:" S LRV=.5 D F Q:LRA(2)?1P
"RTN","LRAPCUM",37,0)
 D SET^LRUA
"RTN","LRAPCUM",38,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.3,0)) D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P  W !,LR(69.2,.13) I $P($G(^LR(LRDFN,LRSS,LRI,6,0)),U,4) S LR(0)=6 D ^LRSPRPTM
"RTN","LRAPCUM",39,0)
 S LRV=1.3 D F Q:LRA(2)?1P
"RTN","LRAPCUM",40,0)
 I $O(^LR(LRDFN,LRSS,LRI,1,0)) D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P  W !,LR(69.2,.03) I $P($G(^LR(LRDFN,LRSS,LRI,7,0)),U,4) S LR(0)=7 D ^LRSPRPTM
"RTN","LRAPCUM",41,0)
 S LRV=1 D F Q:LRA(2)?1P
"RTN","LRAPCUM",42,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.1,0)) D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P  W !,LR(69.2,.04)," (Date Spec taken: ",LRW(1),")" I $P($G(^LR(LRDFN,LRSS,LRI,4,0)),U,4) S LR(0)=4 D ^LRSPRPTM
"RTN","LRAPCUM",43,0)
 S LRV=1.1 D F Q:LRA(2)?1P  I $O(^LR(LRDFN,LRSS,LRI,1.4,0)) D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P  W !,LR(69.2,.14) I $P($G(^LR(LRDFN,LRSS,LRI,5,0)),U,4) S LR(0)=5 D ^LRSPRPTM
"RTN","LRAPCUM",44,0)
 S LRV=1.4 D F Q:LRA(2)?1P
"RTN","LRAPCUM",45,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.2,0)) D
"RTN","LRAPCUM",46,0)
 .W !,"Supplementary Report:"
"RTN","LRAPCUM",47,0)
 .F C=0:0 S C=$O(^LR(LRDFN,LRSS,LRI,1.2,C)) Q:'C!(LRA(2)?1P)  D
"RTN","LRAPCUM",48,0)
 ..S X=^(C,0),Y=+X,X=$P(X,U,2) D D^LRU
"RTN","LRAPCUM",49,0)
 ..W !?3,"Date: ",Y W:'X " not verified"
"RTN","LRAPCUM",50,0)
 ..D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P
"RTN","LRAPCUM",51,0)
 ..I X,$P($G(^LR(LRDFN,LRSS,LRI,1.2,C,2,0)),U,4) D
"RTN","LRAPCUM",52,0)
 ...S LRV=C,LR("Q")=LRA(2)
"RTN","LRAPCUM",53,0)
 ...D SUPA^LRSPRPT
"RTN","LRAPCUM",54,0)
 ...S LRA(2)=LR("Q")
"RTN","LRAPCUM",55,0)
 ..D:X U Q:LRA(2)?1P
"RTN","LRAPCUM",56,0)
 Q:LRA(2)?1P
"RTN","LRAPCUM",57,0)
 ;USER MUST POSSESS THE LRLAB KEY TO VIEW SNOMED CODES
"RTN","LRAPCUM",58,0)
 I $D(^LR(LRDFN,LRSS,LRI,2)) D
"RTN","LRAPCUM",59,0)
 .D B
"RTN","LRAPCUM",60,0)
 .I $D(^XUSEC("LRLAB",DUZ)) D ^LRAPCUM1
"RTN","LRAPCUM",61,0)
 Q:LRA(2)?1P  D MORE Q
"RTN","LRAPCUM",62,0)
MORE R !,"'^' TO STOP: ",LRA(2):DTIME I LRA(2)["?" W $C(7) G MORE
"RTN","LRAPCUM",63,0)
 I LRA(2)?1P S A=0 Q
"RTN","LRAPCUM",64,0)
 S LRA(1)=LRA(1)+21
"RTN","LRAPCUM",65,0)
 W $C(13),$J("",15),$C(13)
"RTN","LRAPCUM",66,0)
 Q
"RTN","LRAPCUM",67,0)
S S (A,LRA(2))=0 Q
"RTN","LRAPCUM",68,0)
U D E
"RTN","LRAPCUM",69,0)
 K ^UTILITY($J,"W")
"RTN","LRAPCUM",70,0)
 S E=0
"RTN","LRAPCUM",71,0)
 F LRZ=0:1 S E=$O(^LR(LRDFN,LRSS,LRI,1.2,C,1,E)) Q:'E!(LRA(2)?1P)  D
"RTN","LRAPCUM",72,0)
 .D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P
"RTN","LRAPCUM",73,0)
 .S X=^LR(LRDFN,LRSS,LRI,1.2,C,1,E,0)
"RTN","LRAPCUM",74,0)
 .D ^DIWP
"RTN","LRAPCUM",75,0)
 Q:LRA(2)?1P  D:LRZ ^DIWW
"RTN","LRAPCUM",76,0)
 Q
"RTN","LRAPCUM",77,0)
B F C=0:0 S C=$O(^LR(LRDFN,LRSS,LRI,2,C)) Q:'C!(LRA(2)?1P)  D SP
"RTN","LRAPCUM",78,0)
 Q
"RTN","LRAPCUM",79,0)
SP F G=0:0 S G=$O(^LR(LRDFN,LRSS,LRI,2,C,5,G)) Q:'G  S X=^(G,0),Y=$P(X,"^",2),E=$P(X,"^",3),E(1)=$P(X,"^")_":",E(1)=$P($P(LR(LRSS),E(1),2),";") D D^LRU S T(2)=Y D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P  D WP
"RTN","LRAPCUM",80,0)
 Q
"RTN","LRAPCUM",81,0)
WP W !,E(1)," ",E," Date: ",T(2)," ",!
"RTN","LRAPCUM",82,0)
 D E
"RTN","LRAPCUM",83,0)
 K ^UTILITY($J,"W")
"RTN","LRAPCUM",84,0)
 S F=0
"RTN","LRAPCUM",85,0)
 F LRZ=0:1 S F=$O(^LR(LRDFN,LRSS,LRI,2,C,5,G,1,F)) Q:'F!(LRA(2)?1P)  D
"RTN","LRAPCUM",86,0)
 .D:$Y>LRA(1)!'$Y MORE Q:LRA(2)?1P
"RTN","LRAPCUM",87,0)
 .S X=^LR(LRDFN,LRSS,LRI,2,C,5,G,1,F,0) D ^DIWP
"RTN","LRAPCUM",88,0)
 Q:LRA(2)?1P  D:LRZ ^DIWW
"RTN","LRAPCUM",89,0)
 Q
"RTN","LRAPCUM",90,0)
A S A=0 F  S A=$O(^LR(LRDFN,LRSS,LRI,97,A)) Q:'A  W !,^(A,0)
"RTN","LRAPCUM",91,0)
 Q
"RTN","LRAPD")
0^11^B2434474
"RTN","LRAPD",1,0)
LRAPD ;AVAMC/REG/WTY - AP DATA ENTRY ;11/27/01
"RTN","LRAPD",2,0)
 ;;5.2;LAB SERVICE;**72,91,259**;Sep 27, 1994
"RTN","LRAPD",3,0)
MAIN ;
"RTN","LRAPD",4,0)
 S:'$D(LRSOP) LRSOP=""
"RTN","LRAPD",5,0)
 I LRCAPA D  G:'$D(X) END
"RTN","LRAPD",6,0)
 .D @(LRSS_"^LRAPSWK")
"RTN","LRAPD",7,0)
 S LRD(1)=LRD,LRD=LRD_LRSS_"^LRAPD1",LR("TR")=""
"RTN","LRAPD",8,0)
 D @LRD
"RTN","LRAPD",9,0)
 I LRD(1)="P" D  Q
"RTN","LRAPD",10,0)
 .D AK^LRAPDA,END
"RTN","LRAPD",11,0)
 D ^LRAPDA
"RTN","LRAPD",12,0)
 D END
"RTN","LRAPD",13,0)
 Q
"RTN","LRAPD",14,0)
A ;also from LRAPOLD,LRAPM,LRAPQAMR,LRAPQAT
"RTN","LRAPD",15,0)
 S LRDICS="SPCYEM" D ^LRAP Q:'$D(Y)
"RTN","LRAPD",16,0)
 S LRV=$P($G(^LRO(69.2,LRAA,0)),U,10)
"RTN","LRAPD",17,0)
 S X=$G(^LAB(69.9,1,11))
"RTN","LRAPD",18,0)
 S LR("FS")=+X
"RTN","LRAPD",19,0)
 S LR("DX")=$S(LRSS="SP":$P(X,U,2),LRSS="CY":$P(X,U,3),1:"")
"RTN","LRAPD",20,0)
 S:LR("DX")="" LR("DX")=$S(LRSS="EM":$P(X,U,4),1:0)
"RTN","LRAPD",21,0)
 Q
"RTN","LRAPD",22,0)
R ;
"RTN","LRAPD",23,0)
 S Y=$S('X:0,'$D(^LAB(61.5,X,0)):0,'$P(^LAB(61.5,X,0),U,3):0,1:.02)
"RTN","LRAPD",24,0)
 Q
"RTN","LRAPD",25,0)
T ;
"RTN","LRAPD",26,0)
 S LR(8)=$S('X:0,'$D(^LAB(61,X,0)):0,1:$P(^LAB(61,X,0),U,4))
"RTN","LRAPD",27,0)
 Q
"RTN","LRAPD",28,0)
EN ;Gross Description/Clinical HX
"RTN","LRAPD",29,0)
 D A
"RTN","LRAPD",30,0)
 I '$D(Y) D END Q
"RTN","LRAPD",31,0)
 S LRD=""
"RTN","LRAPD",32,0)
 D MAIN
"RTN","LRAPD",33,0)
 Q
"RTN","LRAPD",34,0)
EN1 ;Gross Review/Micro Description
"RTN","LRAPD",35,0)
 D A
"RTN","LRAPD",36,0)
 I '$D(Y) D END Q
"RTN","LRAPD",37,0)
 S LRD="M"
"RTN","LRAPD",38,0)
 D MAIN
"RTN","LRAPD",39,0)
 Q
"RTN","LRAPD",40,0)
EN2 ;Micro Description/SNOMED Coding
"RTN","LRAPD",41,0)
 D A
"RTN","LRAPD",42,0)
 I '$D(Y) D END Q
"RTN","LRAPD",43,0)
 S LRD="B"
"RTN","LRAPD",44,0)
 D MAIN
"RTN","LRAPD",45,0)
 Q
"RTN","LRAPD",46,0)
EN3 ;Micro Description/ICD9CM Coding
"RTN","LRAPD",47,0)
 D A
"RTN","LRAPD",48,0)
 I '$D(Y) D END Q
"RTN","LRAPD",49,0)
 I '$O(^ICD0(0)) D  Q
"RTN","LRAPD",50,0)
 .W $C(7),!!,"No entries in the ICD DIAGNOSIS File (#80)."
"RTN","LRAPD",51,0)
 S LRD="A"
"RTN","LRAPD",52,0)
 D MAIN
"RTN","LRAPD",53,0)
 Q
"RTN","LRAPD",54,0)
EN4 ;Supplementary Report
"RTN","LRAPD",55,0)
 D A
"RTN","LRAPD",56,0)
 I '$D(Y) D END Q
"RTN","LRAPD",57,0)
 S LRD="S"
"RTN","LRAPD",58,0)
 D MAIN
"RTN","LRAPD",59,0)
 Q
"RTN","LRAPD",60,0)
EN5 ;Special Studies
"RTN","LRAPD",61,0)
 D A
"RTN","LRAPD",62,0)
 I '$D(Y) D END Q
"RTN","LRAPD",63,0)
 S LRD="P"
"RTN","LRAPD",64,0)
 D MAIN
"RTN","LRAPD",65,0)
 Q
"RTN","LRAPD",66,0)
END ;Clean-up
"RTN","LRAPD",67,0)
 K DR,LRSFLG,LRREL
"RTN","LRAPD",68,0)
 D V^LRU
"RTN","LRAPD",69,0)
 Q
"RTN","LRAPD1")
0^12^B24077474
"RTN","LRAPD1",1,0)
LRAPD1 ;AVAMC/REG/WTY - AP DATA ENTRY ;9/25/00
"RTN","LRAPD1",2,0)
 ;;5.2;LAB SERVICE;**41,91,248,259**;Sep 27, 1994
"RTN","LRAPD1",3,0)
 ;
"RTN","LRAPD1",4,0)
 ;WTY;17-AUG-01;Unwrapped text and add kills for DR string
"RTN","LRAPD1",5,0)
 ;
"RTN","LRAPD1",6,0)
SP ;Gross Desc/Clinical Hx, Surg Path
"RTN","LRAPD1",7,0)
 S LRSOP="G"
"RTN","LRAPD1",8,0)
 K DR S DR=".09///^S X=LRWHO;.012;.013;.014;.015;.016;"
"RTN","LRAPD1",9,0)
 S DR=DR_".021//^S X=LR(""TR"");1;S:'LR(""FS"") Y=0;1.3"
"RTN","LRAPD1",10,0)
 S LR(6)=1,DR(2,63.812)=.01
"RTN","LRAPD1",11,0)
 Q
"RTN","LRAPD1",12,0)
MSP ;Micro Description/Gross Review, Surg Path
"RTN","LRAPD1",13,0)
 S LRSOP="M"
"RTN","LRAPD1",14,0)
 K DR S DR=".09///^S X=LRWHO;S:'LR(""FS"") Y=1;1.3;1;1.1;"
"RTN","LRAPD1",15,0)
 S DR=DR_"S:'LR(""DX"") Y=.02;1.4;.02;.03;S:'LRV Y=0;.14"
"RTN","LRAPD1",16,0)
 S (LR(7),LR(6))=1
"RTN","LRAPD1",17,0)
 Q
"RTN","LRAPD1",18,0)
BSP ;Micro Description/Snomed Coding
"RTN","LRAPD1",19,0)
 S LRSOP="B",(LR(2),LR(7),LR(6))=1
"RTN","LRAPD1",20,0)
 K DR S DR=".09///^S X=LRWHO;S:'LR(""FS"") Y=1;1.3;1;1.1;"
"RTN","LRAPD1",21,0)
 S DR=DR_"S:'LR(""DX"") Y=.02;1.4;.02;.03;S:'LRV Y=10;.14;10"
"RTN","LRAPD1",22,0)
 S DR(2,63.12)=".01;D T^LRAPD;S:'LR(8) Y=4;2;4;I '$D(LR(1)) S Y=0;"
"RTN","LRAPD1",23,0)
 S DR(2,63.12)=DR(2,63.12)_"1;1.5;3"
"RTN","LRAPD1",24,0)
 S DR(3,63.16)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPD1",25,0)
 S DR(3,63.82)=".01;D R^LRAPD;.02"
"RTN","LRAPD1",26,0)
 Q
"RTN","LRAPD1",27,0)
ASP ;Micro Description/ICD9CM Coding
"RTN","LRAPD1",28,0)
 S LRSOP="A",(LR(7),LR(6))=1
"RTN","LRAPD1",29,0)
 K DR S DR=".09///^S X=LRWHO;S:'LR(""FS"") Y=1;1.3;1;1.1;"
"RTN","LRAPD1",30,0)
 S DR=DR_"S:'LR(""DX"") Y=.02;1.4;.02;.03;S:'LRV Y=80;.14;80"
"RTN","LRAPD1",31,0)
 Q
"RTN","LRAPD1",32,0)
SSP ;Supplementary Report, Surg Path
"RTN","LRAPD1",33,0)
 S (LRSOP,LRSFLG)="S",(LR(2),LR(7),LR(6))=1
"RTN","LRAPD1",34,0)
 K DR
"RTN","LRAPD1",35,0)
 S DR="N LRREL D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS,LRI) "
"RTN","LRAPD1",36,0)
 S DR=DR_"I LRREL(1) D VMSG^LRAPD1 S LRSFLG="""",Y=0;"
"RTN","LRAPD1",37,0)
 S DR=DR_".09///^S X=LRWHO;.03;10"
"RTN","LRAPD1",38,0)
 S DR(2,63.12)=".01;D T^LRAPD;S:'LR(8) Y=4;2;4;I '$D(LR(1)) "
"RTN","LRAPD1",39,0)
 S DR(2,63.12)=DR(2,63.12)_"S Y=0;1;1.5;3"
"RTN","LRAPD1",40,0)
 S DR(3,63.16)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPD1",41,0)
 S DR(3,63.82)=".01;D R^LRAPD;.02"
"RTN","LRAPD1",42,0)
 Q
"RTN","LRAPD1",43,0)
PSP ;Special Studies, Surg Path
"RTN","LRAPD1",44,0)
 S LRSOP="P"
"RTN","LRAPD1",45,0)
 K DR
"RTN","LRAPD1",46,0)
 S DR="N LRREL D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS,LRI) "
"RTN","LRAPD1",47,0)
 S DR=DR_"I LRREL(1) D VMSG^LRAPD1 S Y=0;.03;10"
"RTN","LRAPD1",48,0)
 S DR(2,63.12)="5;1.5"
"RTN","LRAPD1",49,0)
 S DR(3,63.82)=".01;D R^LRAPD;.02",LR(7)=1
"RTN","LRAPD1",50,0)
 Q
"RTN","LRAPD1",51,0)
CY ;Gross Desc/Clinic Hx, Cytopath
"RTN","LRAPD1",52,0)
 S LRSOP="G"
"RTN","LRAPD1",53,0)
 K DR S DR=".09///^S X=LRWHO;.012;.013;.014;.015;.016;"
"RTN","LRAPD1",54,0)
 S DR=DR_".021//^S X=LR(""TR"");1"
"RTN","LRAPD1",55,0)
 S LR(6)=1,DR(2,63.902)=".01;.02"
"RTN","LRAPD1",56,0)
 Q
"RTN","LRAPD1",57,0)
MCY ;Micro Desc/Gross Review, Cytopath
"RTN","LRAPD1",58,0)
 S LRSOP="M"
"RTN","LRAPD1",59,0)
 K DR S DR=".09///^S X=LRWHO;1;1.1;S:'LR(""DX"") Y=.021;1.4;"
"RTN","LRAPD1",60,0)
 S DR=DR_".021//^S X=LR(""TR"");.02;.03;.101;S:'LRV Y=0;.14"
"RTN","LRAPD1",61,0)
 S (LR(7),LR(6))=1
"RTN","LRAPD1",62,0)
 Q
"RTN","LRAPD1",63,0)
BCY ;Micro Desc/SNOMED Coding, Cytopath
"RTN","LRAPD1",64,0)
 S LRSOP="B",DIC(0)="M"
"RTN","LRAPD1",65,0)
 S (LR(2),LR(7),LR(6))=1
"RTN","LRAPD1",66,0)
 K DR S DR=".09///^S X=LRWHO;1;1.1;S:'LR(""DX"") Y=.021;1.4;"
"RTN","LRAPD1",67,0)
 S DR=DR_".021//^S X=LR(""TR"");.02;.03;.101;S:'LRV Y=10;.14;10"
"RTN","LRAPD1",68,0)
 S DR(2,63.912)=".01;D T^LRAPD;S:'LR(8) Y=4;2;4;"
"RTN","LRAPD1",69,0)
 S DR(2,63.912)=DR(2,63.912)_"I '$D(LR(1)) S Y=0;1;1.5;3"
"RTN","LRAPD1",70,0)
 S DR(3,63.916)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPD1",71,0)
 S DR(3,63.982)=".01;D R^LRAPD;.02"
"RTN","LRAPD1",72,0)
 Q
"RTN","LRAPD1",73,0)
ACY ;Micro Desc/ICD9CM Coding
"RTN","LRAPD1",74,0)
 S LRSOP="A"
"RTN","LRAPD1",75,0)
 S (LR(7),LR(6))=1
"RTN","LRAPD1",76,0)
 K DR S DR=".09///^S X=LRWHO;1;1.1;S:'LR(""DX"") Y=.021;1.4;"
"RTN","LRAPD1",77,0)
 S DR=DR_".021//^S X=LR(""TR"");.02;.03;.101;S:'LRV Y=80;.14;80"
"RTN","LRAPD1",78,0)
 Q
"RTN","LRAPD1",79,0)
SCY ;Supplementary Report, Cyto
"RTN","LRAPD1",80,0)
 S LRSFLG="S"
"RTN","LRAPD1",81,0)
 S (LR(2),LR(7),LR(6))=1
"RTN","LRAPD1",82,0)
 K DR
"RTN","LRAPD1",83,0)
 S DR="N LRREL D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS,LRI) "
"RTN","LRAPD1",84,0)
 S DR=DR_"I LRREL(1) D VMSG^LRAPD1 S LRSFLG="""",Y=0;"
"RTN","LRAPD1",85,0)
 S DR=DR_".09///^S X=LRWHO;.03;10"
"RTN","LRAPD1",86,0)
 S DR(2,63.912)=".01;D T^LRAPD;S:'LR(8) Y=4;2;4;I '$D(LR(1)) "
"RTN","LRAPD1",87,0)
 S DR(2,63.912)=DR(2,63.912)_"S Y=0;1;1.5;3"
"RTN","LRAPD1",88,0)
 S DR(3,63.916)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPD1",89,0)
 S DR(3,63.982)=".01;D R^LRAPD;.02"
"RTN","LRAPD1",90,0)
 Q
"RTN","LRAPD1",91,0)
PCY ;Special Studies, Cyto
"RTN","LRAPD1",92,0)
 K DR
"RTN","LRAPD1",93,0)
 S DR="N LRREL D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS,LRI) "
"RTN","LRAPD1",94,0)
 S DR=DR_"I LRREL(1) D VMSG^LRAPD1 S Y=0;.03;10"
"RTN","LRAPD1",95,0)
 S DR(2,63.912)="5;1.5"
"RTN","LRAPD1",96,0)
 S DR(3,63.982)=".01;D R^LRAPD;.02"
"RTN","LRAPD1",97,0)
 S LR(7)=1
"RTN","LRAPD1",98,0)
 Q
"RTN","LRAPD1",99,0)
EM ;Gross Desc/Clinical Hx, Em
"RTN","LRAPD1",100,0)
 S LRSOP="G",LR(6)=1
"RTN","LRAPD1",101,0)
 K DR S DR=".09///^S X=LRWHO;.012;.013;.014;.015;.016;"
"RTN","LRAPD1",102,0)
 S DR=DR_".021//^S X=LR(""TR"");1"
"RTN","LRAPD1",103,0)
 S DR(2,63.202)=.01
"RTN","LRAPD1",104,0)
 Q
"RTN","LRAPD1",105,0)
MEM ;Micro Desc/Gross Review, EM
"RTN","LRAPD1",106,0)
 S LRSOP="M"
"RTN","LRAPD1",107,0)
 K DR S DR=".09///^S X=LRWHO;1;1.1;S:'LR(""DX"") Y=.021;1.4;"
"RTN","LRAPD1",108,0)
 S DR=DR_".021//^S X=LR(""TR"");.02;.03;S:'LRV Y=0;.14"
"RTN","LRAPD1",109,0)
 S (LR(7),LR(6))=1
"RTN","LRAPD1",110,0)
 Q
"RTN","LRAPD1",111,0)
BEM ;Micro Desc/SNOMED Coding
"RTN","LRAPD1",112,0)
 S LRSOP="B",(LR(2),LR(7),LR(6))=1
"RTN","LRAPD1",113,0)
 K DR S DR=".09///^S X=LRWHO;1;1.1;S:'LR(""DX"") Y=.021;1.4;"
"RTN","LRAPD1",114,0)
 S DR=DR_".021//^S X=LR(""TR"");.02;.03;S:'LRV Y=10;.14;10"
"RTN","LRAPD1",115,0)
 S DR(2,63.212)=".01;D T^LRAPD;S:'LR(8) Y=4;2;4;"
"RTN","LRAPD1",116,0)
 S DR(2,63.212)=DR(2,63.212)_"I '$D(LR(1)) S Y=0;1;1.5;3"
"RTN","LRAPD1",117,0)
 S DR(3,63.216)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPD1",118,0)
 S DR(3,63.282)=".01;D R^LRAPD;.02"
"RTN","LRAPD1",119,0)
 Q
"RTN","LRAPD1",120,0)
AEM ;Micro Desc/ICD9CM Coding
"RTN","LRAPD1",121,0)
 S LRSOP="A"
"RTN","LRAPD1",122,0)
 S (LR(7),LR(6))=1
"RTN","LRAPD1",123,0)
 K DR S DR=".09///^S X=LRWHO;1;1.1;S:'LR(""DX"") Y=.021;1.4;"
"RTN","LRAPD1",124,0)
 S DR=DR_".021//^S X=LR(""TR"");.02;.03;S:'LRV Y=80;.14;80"
"RTN","LRAPD1",125,0)
 Q
"RTN","LRAPD1",126,0)
SEM ;Supplementary Report, EM
"RTN","LRAPD1",127,0)
 S LRSFLG="S"
"RTN","LRAPD1",128,0)
 S (LR(2),LR(7),LR(6))=1
"RTN","LRAPD1",129,0)
 K DR
"RTN","LRAPD1",130,0)
 S DR="N LRREL D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS,LRI) "
"RTN","LRAPD1",131,0)
 S DR=DR_"I LRREL(1) D VMSG^LRAPD1 S LRSFLG="""",Y=0;"
"RTN","LRAPD1",132,0)
 S DR=DR_".09///^S X=LRWHO;.03;10"
"RTN","LRAPD1",133,0)
 S DR(2,63.212)=".01;D T^LRAPD;S:'LR(8) Y=4;2;4;I '$D(LR(1)) "
"RTN","LRAPD1",134,0)
 S DR(2,63.212)=DR(2,63.212)_"S Y=0;1;1.5;3"
"RTN","LRAPD1",135,0)
 S DR(3,63.216)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPD1",136,0)
 S DR(3,63.282)=".01;D R^LRAPD;.02"
"RTN","LRAPD1",137,0)
 Q
"RTN","LRAPD1",138,0)
PEM ;Special Studies, EM
"RTN","LRAPD1",139,0)
 K DR
"RTN","LRAPD1",140,0)
 S DR="N LRREL D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS,LRI) "
"RTN","LRAPD1",141,0)
 S DR=DR_"I LRREL(1) D VMSG^LRAPD1 S Y=0;.03;10"
"RTN","LRAPD1",142,0)
 S DR(2,63.212)=5,LR(7)=1
"RTN","LRAPD1",143,0)
 Q
"RTN","LRAPD1",144,0)
VMSG ;Verified message
"RTN","LRAPD1",145,0)
 N LRMSG
"RTN","LRAPD1",146,0)
 S LRMSG=$C(7)_"Report verified.  Cannot edit with this option."
"RTN","LRAPD1",147,0)
 D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPD1",148,0)
 Q
"RTN","LRAPDA")
0^13^B63353381
"RTN","LRAPDA",1,0)
LRAPDA ;AVAMC/REG/WTY/KLL - ANATOMIC PATH DATA ENTRY;11/02/01
"RTN","LRAPDA",2,0)
 ;;5.2;LAB SERVICE;**72,73,91,121,248,259**;Sep 27, 1994
"RTN","LRAPDA",3,0)
 ;
"RTN","LRAPDA",4,0)
 ;Reference to ^%DT supported by IA #10003
"RTN","LRAPDA",5,0)
 ;Reference to ^DIE supported by IA #10018
"RTN","LRAPDA",6,0)
 ;Reference to ^VA(200 supported by IA #10060
"RTN","LRAPDA",7,0)
 ;Reference to EN^DDIOL supported by IA #10142
"RTN","LRAPDA",8,0)
 ;
"RTN","LRAPDA",9,0)
 W !?20,LRO(68)," (",LRABV,")",!
"RTN","LRAPDA",10,0)
 S:'$D(LRSOP) LRSOP=1 S:'$D(LRD(1)) LRD(1)="0"
"RTN","LRAPDA",11,0)
 S:'$D(^LRO(69.2,LRAA,2,0)) ^(0)="^69.23A^0^0"
"RTN","LRAPDA",12,0)
SEL K LR(1)
"RTN","LRAPDA",13,0)
 I $D(LR(2)) D  G:%<1 END S:%=1 LR(1)=1
"RTN","LRAPDA",14,0)
 .W !!,"Enter Etiology, Function, Procedure & Disease "
"RTN","LRAPDA",15,0)
 .S %=2 D YN^LRU
"RTN","LRAPDA",16,0)
AK ;from LRAPD1
"RTN","LRAPDA",17,0)
 N CORRECT
"RTN","LRAPDA",18,0)
 S:'$D(LRSFLG) LRSFLG=""
"RTN","LRAPDA",19,0)
 W !!,"Data entry for ",LRH(0)," "
"RTN","LRAPDA",20,0)
 S %=1 D YN^LRU G:%<1 END
"RTN","LRAPDA",21,0)
 I %=2 D  G:Y<1 END S LRAD=$E(Y,1,3)_"0000",LRH(0)=$E(Y,1,3)+1700
"RTN","LRAPDA",22,0)
 .S %DT="AE",%DT(0)="-N",%DT("A")="Enter YEAR: " D ^%DT K %DT
"RTN","LRAPDA",23,0)
 I '$O(^LRO(68,LRAA,1,LRAD,1,0)) D  Q
"RTN","LRAPDA",24,0)
 .W $C(7),!!,"NO ",LRO(68)," ACCESSIONS IN FILE FOR ",LRH(0),!!
"RTN","LRAPDA",25,0)
W K X,Y,LR("CK")
"RTN","LRAPDA",26,0)
 R !!,"Select Accession Number/Pt name: ",LRAN:DTIME
"RTN","LRAPDA",27,0)
 G:LRAN=""!(LRAN[U) END
"RTN","LRAPDA",28,0)
 I LRAN["?" D  G W
"RTN","LRAPDA",29,0)
 .W !!,"Enter the year ",LRH(0)," ",LRO(68)," accession number to be "
"RTN","LRAPDA",30,0)
 .W "updated"
"RTN","LRAPDA",31,0)
 .W !,"or locate the accession by entering the patient name."
"RTN","LRAPDA",32,0)
 I LRAN'?1N.N D PNAME G:LRAN<1 W D OE1^LR7OB63D,DIE,OERR^LR7OB63D G W
"RTN","LRAPDA",33,0)
 D OE1^LR7OB63D,REST S:$D(DR(1))#2 DR=DR(1) D OERR^LR7OB63D G W
"RTN","LRAPDA",34,0)
REST ;
"RTN","LRAPDA",35,0)
 W "  for ",LRH(0)
"RTN","LRAPDA",36,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) D  Q
"RTN","LRAPDA",37,0)
 .W $C(7),!!,"Accession # ",LRAN," for ",LRH(0)," not in ",LRO(68),!!
"RTN","LRAPDA",38,0)
 S X=^LRO(68,LRAA,1,LRAD,1,LRAN,0),LRLLOC=$P(X,"^",7),LRDFN=+X
"RTN","LRAPDA",39,0)
 Q:'$D(^LR(LRDFN,0))  S X=^(0) D ^LRUP
"RTN","LRAPDA",40,0)
 W !,LRP,"  ID: ",SSN
"RTN","LRAPDA",41,0)
 S LRI=+$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,3)),"^",5)
"RTN","LRAPDA",42,0)
 I LRSS'="AU",'$D(^LR(LRDFN,LRSS,LRI,0)) D  Q
"RTN","LRAPDA",43,0)
 .W $C(7),!,"Inverse date missing or incorrect in Accession Area file "
"RTN","LRAPDA",44,0)
 .W "for",!,LRO(68),"  Year: ",$E(LRAD,2,3),"  Accession: ",LRAN
"RTN","LRAPDA",45,0)
 I "SPCYEM"[LRSS,$O(^LR(LRDFN,LRSS,LRI,.1,0)) D
"RTN","LRAPDA",46,0)
 .W !,"Specimen(s):"
"RTN","LRAPDA",47,0)
 .S X=0 F  S X=$O(^LR(LRDFN,LRSS,LRI,.1,X)) Q:'X  D
"RTN","LRAPDA",48,0)
 ..W !,$P($G(^LR(LRDFN,LRSS,LRI,.1,X,0)),"^")
"RTN","LRAPDA",49,0)
DIE ;Edit
"RTN","LRAPDA",50,0)
 I LRSS="AU" D AUE Q
"RTN","LRAPDA",51,0)
 N LRRDT1,LRRDT2,LRIENS,LREL,LRQUIT,LRSNO,LRCPT,LRESCPT
"RTN","LRAPDA",52,0)
 S (LREL,LRESCPT,LRQUIT,LRSNO,LRCPT)=0,LRIENS=LRI_","_LRDFN_","
"RTN","LRAPDA",53,0)
 S LRRDT1=$$GET1^DIQ(LRSF,LRIENS,.11,"I")
"RTN","LRAPDA",54,0)
 S LRRDT2=$$GET1^DIQ(LRSF,LRIENS,.15,"I")
"RTN","LRAPDA",55,0)
 S:LRRDT1!LRRDT2 LREL=1
"RTN","LRAPDA",56,0)
 I $T(ES^LRCAPES)'="" S LRESCPT=$$ES^LRCAPES()
"RTN","LRAPDA",57,0)
 I LRSOP="G",LREL D  Q
"RTN","LRAPDA",58,0)
 .W $C(7),!!,"Report verified.  Cannot edit with this option."
"RTN","LRAPDA",59,0)
 I LRSOP'="","ABM"[LRSOP,LREL D  Q:LRQUIT
"RTN","LRAPDA",60,0)
 .;Allow SNOMED and CPT coding even after release.
"RTN","LRAPDA",61,0)
 .W $C(7),!!,"Report has been verified.  "
"RTN","LRAPDA",62,0)
 .I 'LRESCPT,LRSOP'="B" D  Q
"RTN","LRAPDA",63,0)
 ..W "Cannot edit with this option."
"RTN","LRAPDA",64,0)
 ..S LRQUIT=1
"RTN","LRAPDA",65,0)
 .W "Only "
"RTN","LRAPDA",66,0)
 .I LRESCPT W "CPT " W:LRSOP="B" "and "
"RTN","LRAPDA",67,0)
 .W:LRSOP="B" "SNOMED "
"RTN","LRAPDA",68,0)
 .W "coding permitted.",!
"RTN","LRAPDA",69,0)
 .I LRSOP="B" D
"RTN","LRAPDA",70,0)
 ..K DIR S DIR(0)="Y",DIR("A")="Enter SNOMED coding",DIR("B")="NO"
"RTN","LRAPDA",71,0)
 ..D ^DIR W !
"RTN","LRAPDA",72,0)
 ..S LRSNO=+Y
"RTN","LRAPDA",73,0)
 .Q:'LRESCPT
"RTN","LRAPDA",74,0)
 .K DIR S DIR(0)="Y",DIR("A")="Enter CPT coding",DIR("B")="NO"
"RTN","LRAPDA",75,0)
 .D ^DIR W !
"RTN","LRAPDA",76,0)
 .S LRCPT=+Y
"RTN","LRAPDA",77,0)
 .I "AM"[LRSOP,'LRCPT S LRQUIT=1 Q
"RTN","LRAPDA",78,0)
 .I LRSOP="B",'LRCPT,'LRSNO S LRQUIT=1
"RTN","LRAPDA",79,0)
RESET ;Reset DR string if altered by prior accession/patient
"RTN","LRAPDA",80,0)
 ;Reset DR to orig value in LRAPD1
"RTN","LRAPDA",81,0)
 I LRSOP'="","AMB"[LRSOP,$G(LRD)'="" D @LRD
"RTN","LRAPDA",82,0)
 S:LRSNO DR=10    ;Modify DR string if only SNOMED coding permitted
"RTN","LRAPDA",83,0)
 I 'LRSNO,LRCPT S DR=""  ;Set DR string to null in only CPT coding
"RTN","LRAPDA",84,0)
EDIT ;Call to ^DIE
"RTN","LRAPDA",85,0)
 W ! S LRA=^LR(LRDFN,LRSS,LRI,0),LRRC=$P(LRA,"^",10)
"RTN","LRAPDA",86,0)
 I LRCAPA,"SPCYEM"[LRSS D C^LRAPSWK
"RTN","LRAPDA",87,0)
 S DIE="^LR(LRDFN,LRSS,",DA=LRI,DA(1)=LRDFN
"RTN","LRAPDA",88,0)
 D CK^LRU Q:$D(LR("CK"))
"RTN","LRAPDA",89,0)
 I LRSS="SP",LRSOP="B",$O(^LR(LRDFN,LRSS,LRI,1.3,0)) D
"RTN","LRAPDA",90,0)
 .W $C(7),!!,"This accession has a FROZEN SECTION report."
"RTN","LRAPDA",91,0)
 .W !,"Be sure 'FROZEN SECTION' is entered as a SNOMED code in the "
"RTN","LRAPDA",92,0)
 .W "PROCEDURE field"
"RTN","LRAPDA",93,0)
 .W !,"for the appropriate organ or tissue.",!!
"RTN","LRAPDA",94,0)
 D ^DIE
"RTN","LRAPDA",95,0)
 D:LRSFLG="S"&('$D(Y)) ^LRAPDSR
"RTN","LRAPDA",96,0)
 D FRE^LRU
"RTN","LRAPDA",97,0)
 I LRSOP'="","ABM"[LRSOP D CPTCOD
"RTN","LRAPDA",98,0)
WKLD ;Capture Workload
"RTN","LRAPDA",99,0)
 I LRSOP="Z","CYSP"[LRSS,LRCAPA D S^LRAPR Q
"RTN","LRAPDA",100,0)
 I LRCAPA,"SPCYEM"[LRSS,LRD(1)'="","MBA"[LRD(1) D C1^LRAPSWK
"RTN","LRAPDA",101,0)
 I LRCAPA,"SPCYEM"[LRSS,LRSOP="G" D C1^LRAPSWK
"RTN","LRAPDA",102,0)
QUEUES ;Update Queues
"RTN","LRAPDA",103,0)
 S X=$P(^LR(LRDFN,LRSS,LRI,0),"^",4)
"RTN","LRAPDA",104,0)
 I X,$D(^VA(200,X,0)) S LR("TR")=$P(^(0),"^")
"RTN","LRAPDA",105,0)
 I "CYEMSP"[LRSS,$D(LR(6)),LRSOP="G" Q:$D(^LRO(69.2,LRAA,1,LRAN,0))  D  Q
"RTN","LRAPDA",106,0)
 .L +^LRO(69.2,LRAA,1):5 I '$T D  Q
"RTN","LRAPDA",107,0)
 ..S MSG(1)="The preliminary reports queue is in use by another person."
"RTN","LRAPDA",108,0)
 ..S MSG(1,"F")="!!"
"RTN","LRAPDA",109,0)
 ..S MSG(2)="  You will need to add this accession to the queue later."
"RTN","LRAPDA",110,0)
 ..D EN^DDIOL(.MSG) K MSG
"RTN","LRAPDA",111,0)
 .S ^LRO(69.2,LRAA,1,LRAN,0)=LRDFN_"^"_LRI_"^"_LRH(0)
"RTN","LRAPDA",112,0)
 .S X=^LRO(69.2,LRAA,1,0),^(0)=$P(X,"^",1,2)_"^"_LRAN_"^"_($P(X,"^",4)+1)
"RTN","LRAPDA",113,0)
 .L -^LRO(69.2,LRAA,1)
"RTN","LRAPDA",114,0)
 I "CYEMSP"[LRSS,$D(LR(7)),'$D(^LRO(69.2,LRAA,2,LRAN,0)) D
"RTN","LRAPDA",115,0)
 .L +^LRO(69.2,LRAA,2):5 I '$T D  Q
"RTN","LRAPDA",116,0)
 ..S MSG(1)="The final reports queue is in use by another person.  "
"RTN","LRAPDA",117,0)
 ..S MSG(1,"F")="!!"
"RTN","LRAPDA",118,0)
 ..S MSG(2)="You will need to add this accession to the queue later."
"RTN","LRAPDA",119,0)
 ..D EN^DDIOL(.MSG) K MSG
"RTN","LRAPDA",120,0)
 .S ^LRO(69.2,LRAA,2,LRAN,0)=LRDFN_"^"_LRI_"^"_LRH(0)
"RTN","LRAPDA",121,0)
 .S X=^LRO(69.2,LRAA,2,0),^(0)=$P(X,"^",1,2)_"^"_LRAN_"^"_($P(X,"^",4)+1)
"RTN","LRAPDA",122,0)
 .L -^LRO(69.2,LRAA,2)
"RTN","LRAPDA",123,0)
 D:LRSOP="M"!(LRSOP="B") EN^LRSPGD
"RTN","LRAPDA",124,0)
 Q
"RTN","LRAPDA",125,0)
NM ;
"RTN","LRAPDA",126,0)
 I X'["@"!(X["@"&(Y(Z)="")) D  Q
"RTN","LRAPDA",127,0)
 .W $C(7),!?4,"ENTER WHOLE NUMBERS ONLY",! K X
"RTN","LRAPDA",128,0)
 I Y(Z)'="" W $C(7),?40,"OK TO DELETE" S %=2 D YN^LRU I %'=1 K X Q
"RTN","LRAPDA",129,0)
 S Y(Z)="" Q
"RTN","LRAPDA",130,0)
 ;
"RTN","LRAPDA",131,0)
AUE ;Autopsy Data Entry
"RTN","LRAPDA",132,0)
 W !
"RTN","LRAPDA",133,0)
 N LREL,LRQUIT,LRSNO,LRESCPT,LRCPT
"RTN","LRAPDA",134,0)
 S (LREL,LRQUIT,LRSNO,LRCPT)=0
"RTN","LRAPDA",135,0)
 S LREL=+$$GET1^DIQ(63,LRDFN_",",14.7,"I")
"RTN","LRAPDA",136,0)
 I $T(ES^LRCAPES)'="" S LRESCPT=$$ES^LRCAPES()
"RTN","LRAPDA",137,0)
 I LRSOP'="","AFIPR"[LRSOP,LREL D  Q:LRQUIT
"RTN","LRAPDA",138,0)
 .Q:LRESCPT&("AP"[LRSOP)
"RTN","LRAPDA",139,0)
 .W $C(7),!!,"Report verified.  Cannot edit with this option!"
"RTN","LRAPDA",140,0)
 .S LRQUIT=1
"RTN","LRAPDA",141,0)
 I LRSOP'="","ABP"[LRSOP,LREL D  Q:LRQUIT
"RTN","LRAPDA",142,0)
 .W $C(7),!!,"Report has been verified.  "
"RTN","LRAPDA",143,0)
 .W "Only "
"RTN","LRAPDA",144,0)
 .I LRESCPT W "CPT " W:LRSOP="B" "and "
"RTN","LRAPDA",145,0)
 .W:LRSOP="B" "SNOMED "
"RTN","LRAPDA",146,0)
 .W "coding permitted.",!
"RTN","LRAPDA",147,0)
 .I LRSOP="B" D
"RTN","LRAPDA",148,0)
 ..K DIR S DIR(0)="Y",DIR("A")="Enter SNOMED coding",DIR("B")="NO"
"RTN","LRAPDA",149,0)
 ..D ^DIR W !
"RTN","LRAPDA",150,0)
 ..S LRSNO=+Y
"RTN","LRAPDA",151,0)
 .Q:'LRESCPT
"RTN","LRAPDA",152,0)
 .K DIR S DIR(0)="Y",DIR("A")="Enter CPT coding",DIR("B")="NO"
"RTN","LRAPDA",153,0)
 .D ^DIR W !
"RTN","LRAPDA",154,0)
 .S LRCPT=+Y
"RTN","LRAPDA",155,0)
 .I "AP"[LRSOP,'LRCPT S LRQUIT=1 Q
"RTN","LRAPDA",156,0)
 .I LRSOP="B",'LRCPT,'LRSNO S LRQUIT=1
"RTN","LRAPDA",157,0)
AURESET ;Reset DR to orig value in LRAUDA
"RTN","LRAPDA",158,0)
 I LRSOP'="","AP"[LRSOP D @(LRSOP_"DR^LRAUDA")
"RTN","LRAPDA",159,0)
 I LRSOP="B" D BDR^LRAUDA
"RTN","LRAPDA",160,0)
 S:LRSNO DR=32       ;Modify DR string if only SNOMED coding permitted
"RTN","LRAPDA",161,0)
 I 'LRSNO,LRCPT S DR=""  ;Set DR string to null inf only CPT coding
"RTN","LRAPDA",162,0)
 ;                              ;
"RTN","LRAPDA",163,0)
 ;Not all of the autopsy fields are within the AU subscript.
"RTN","LRAPDA",164,0)
 ;Therefore, we must lock the entire LRDFN.
"RTN","LRAPDA",165,0)
 L +^LR(LRDFN):5 I '$T D  Q
"RTN","LRAPDA",166,0)
 .S MSG="This record is locked by another user.  "
"RTN","LRAPDA",167,0)
 .S MSG=MSG_"Please wait and try again."
"RTN","LRAPDA",168,0)
 .D EN^DDIOL(MSG,"","!!") K MSG
"RTN","LRAPDA",169,0)
 I LRSFLG'="S" D
"RTN","LRAPDA",170,0)
 .S DIE="^LR(",DA=LRDFN
"RTN","LRAPDA",171,0)
 .D ^DIE
"RTN","LRAPDA",172,0)
 D:LRSFLG="S" ^LRAPDSR
"RTN","LRAPDA",173,0)
 L -^LR(LRDFN)
"RTN","LRAPDA",174,0)
 D:"BAP"[LRSOP AU
"RTN","LRAPDA",175,0)
 D:LRSOP="R" R
"RTN","LRAPDA",176,0)
 I LRSOP'="","ABP"[LRSOP D CPTCOD
"RTN","LRAPDA",177,0)
 Q
"RTN","LRAPDA",178,0)
AU I '$D(^LRO(69.2,LRAA,2,LRAN,0)) D
"RTN","LRAPDA",179,0)
 .L +^LRO(69.2,LRAA,2):5 I '$T D  Q
"RTN","LRAPDA",180,0)
 ..S MSG(1)="The final reports queue is in use by another person.  "
"RTN","LRAPDA",181,0)
 ..S MSG(1,"F")="!!"
"RTN","LRAPDA",182,0)
 ..S MSG(2)="You will need to add this accession to the queue later."
"RTN","LRAPDA",183,0)
 ..D EN^DDIOL(.MSG) K MSG
"RTN","LRAPDA",184,0)
 .S ^LRO(69.2,LRAA,2,LRAN,0)=LRDFN
"RTN","LRAPDA",185,0)
 .S X=^LRO(69.2,LRAA,2,0),^(0)=$P(X,"^",1,2)_"^"_LRAN_"^"_($P(X,"^",4)+1)
"RTN","LRAPDA",186,0)
 .L -^LRO(69.2,LRAA,2)
"RTN","LRAPDA",187,0)
 D AU^LRSPGD
"RTN","LRAPDA",188,0)
 Q
"RTN","LRAPDA",189,0)
R I '$D(^LRO(69.2,LRAA,3,LRAN,0)) D
"RTN","LRAPDA",190,0)
 .L +^LRO(69.2,LRAA,3):5 I '$T D  Q
"RTN","LRAPDA",191,0)
 ..S MSG(1)="The interim reports queue is in use by another person.  "
"RTN","LRAPDA",192,0)
 ..S MSG(1,"F")="!!"
"RTN","LRAPDA",193,0)
 ..S MSG(2)="You will need to add this accession to the queue later."
"RTN","LRAPDA",194,0)
 ..D EN^DDIOL(.MSG) K MSG
"RTN","LRAPDA",195,0)
 .S ^LRO(69.2,LRAA,3,LRAN,0)=LRDFN
"RTN","LRAPDA",196,0)
 .S X=^LRO(69.2,LRAA,3,0),^(0)=$P(X,"^",1,2)_"^"_LRAN_"^"_($P(X,"^",4)+1)
"RTN","LRAPDA",197,0)
 .L -^LRO(69.2,LRAA,3)
"RTN","LRAPDA",198,0)
 Q
"RTN","LRAPDA",199,0)
PNAME ;Patient Name Lookup
"RTN","LRAPDA",200,0)
 N LRPFLG            ;LRPFLG tells LRUPS to limit accessions to 
"RTN","LRAPDA",201,0)
 S X=LRAN,LRPFLG=1   ;the chosen year.
"RTN","LRAPDA",202,0)
 K LRAN,DIC,VADM,VAIN,VA
"RTN","LRAPDA",203,0)
 S DFN=-1,DIC(0)="EQM",(LRX,LRDPF)=""
"RTN","LRAPDA",204,0)
 D:'$D(LRLABKY) LABKEY^LRPARAM
"RTN","LRAPDA",205,0)
 D DPA1^LRDPA
"RTN","LRAPDA",206,0)
 I DFN=-1 S LRAN=-1 Q
"RTN","LRAPDA",207,0)
 D I^LRUPS
"RTN","LRAPDA",208,0)
 Q
"RTN","LRAPDA",209,0)
CPTCOD ;CPT Coding
"RTN","LRAPDA",210,0)
 N LRPRO
"RTN","LRAPDA",211,0)
 Q:$T(CPT^LRCAPES)=""
"RTN","LRAPDA",212,0)
 Q:LREL&('LRCPT)
"RTN","LRAPDA",213,0)
 I 'LREL D
"RTN","LRAPDA",214,0)
 .K DIR S DIR(0)="Y",DIR("A")="Enter CPT coding",DIR("B")="NO"
"RTN","LRAPDA",215,0)
 .D ^DIR W !
"RTN","LRAPDA",216,0)
 .S LRCPT=+Y
"RTN","LRAPDA",217,0)
 Q:'LRCPT
"RTN","LRAPDA",218,0)
 ;SET PROVIDER TO CURRENT USER, ALLOW UPDATES
"RTN","LRAPDA",219,0)
 S LRPRO=DUZ
"RTN","LRAPDA",220,0)
 D PROVIDR^LRAPUTL
"RTN","LRAPDA",221,0)
 Q:LRQUIT
"RTN","LRAPDA",222,0)
 D CPT^LRCAPES(LRAA,LRAD,LRAN,LRPRO)
"RTN","LRAPDA",223,0)
 Q
"RTN","LRAPDA",224,0)
END K LRSFLG
"RTN","LRAPDA",225,0)
 D:$T(CLEAN^LRCAPES)'="" CLEAN^LRCAPES
"RTN","LRAPDA",226,0)
 D V^LRU
"RTN","LRAPDA",227,0)
 Q
"RTN","LRAPDSR")
0^14^B17451270
"RTN","LRAPDSR",1,0)
LRAPDSR ;DALOI/WTY - AP SUPPLEMENTARY REPORT ENTRY;12/05/00
"RTN","LRAPDSR",2,0)
 ;;5.2;LAB SERVICE;**248,259**;Sep 27, 1994
"RTN","LRAPDSR",3,0)
 ;
"RTN","LRAPDSR",4,0)
 N LRYTMP,LRWPROOT,LRRLS,LRRLS1,LRX,LRIENS,LRFILE1,LRFILE,LRA,LRQUIT
"RTN","LRAPDSR",5,0)
 N LRIENS1,LRXTMP,LRFDA,LRNOW,LRIENS2,LRFIELD,LRORIEN,LRFLG,LRDA
"RTN","LRAPDSR",6,0)
 ;
"RTN","LRAPDSR",7,0)
MAIN ;Main Subroutine
"RTN","LRAPDSR",8,0)
 D RELEAS1
"RTN","LRAPDSR",9,0)
 D GETRPT
"RTN","LRAPDSR",10,0)
 Q:LRQUIT
"RTN","LRAPDSR",11,0)
 D:'LRRLS RELEAS2
"RTN","LRAPDSR",12,0)
 D:LRRLS COPY
"RTN","LRAPDSR",13,0)
 Q:LRQUIT
"RTN","LRAPDSR",14,0)
 D RPT
"RTN","LRAPDSR",15,0)
 Q:LRQUIT
"RTN","LRAPDSR",16,0)
 D COMPARE
"RTN","LRAPDSR",17,0)
 Q:LRQUIT
"RTN","LRAPDSR",18,0)
 D:LRRLS1 UNRELEAS
"RTN","LRAPDSR",19,0)
 D UPDATE
"RTN","LRAPDSR",20,0)
 Q:LRQUIT
"RTN","LRAPDSR",21,0)
 D STORE
"RTN","LRAPDSR",22,0)
 Q
"RTN","LRAPDSR",23,0)
RELEAS1 ;Is the ENTIRE report already released?
"RTN","LRAPDSR",24,0)
 S (LRRLS,LRRLS1,LRQUIT)=0
"RTN","LRAPDSR",25,0)
 I LRSS="AU" D  Q
"RTN","LRAPDSR",26,0)
 .S LRX=$P($G(^LR(LRDFN,LRSS)),"^",15)
"RTN","LRAPDSR",27,0)
 .Q:'LRX         ;Report has not been released so no audit will occur.
"RTN","LRAPDSR",28,0)
 .W $C(7),!!,"This AUTOPSY has been released.  Supplementary report "
"RTN","LRAPDSR",29,0)
 .W "additions/modifications"
"RTN","LRAPDSR",30,0)
 .W !,"will create an audit trail.",!
"RTN","LRAPDSR",31,0)
 .S LRRLS=1    ;Report has been released so auditing will occur.
"RTN","LRAPDSR",32,0)
 S LRX=$P($G(^LR(LRDFN,LRSS,LRI,0)),"^",11)
"RTN","LRAPDSR",33,0)
 I LRX D
"RTN","LRAPDSR",34,0)
 .W $C(7),!!,"This "_$G(LRAA(1))_" report has been released."
"RTN","LRAPDSR",35,0)
 .W !,"Supplementary report additions/modifications will create"
"RTN","LRAPDSR",36,0)
 .W " an audit trail.",!
"RTN","LRAPDSR",37,0)
 .S LRRLS=1
"RTN","LRAPDSR",38,0)
 Q
"RTN","LRAPDSR",39,0)
GETRPT ;First, select the report 
"RTN","LRAPDSR",40,0)
 S DIC(0)="QAEZL",DLAYGO=63
"RTN","LRAPDSR",41,0)
 S DIC("A")="Select SUPPLEMENTARY REPORT DATE: "
"RTN","LRAPDSR",42,0)
 S DIC=$S(LRSS="AU":"^LR(LRDFN,84,",1:"^LR(LRDFN,LRSS,LRI,1.2,")
"RTN","LRAPDSR",43,0)
 S DIC("P")=$S(LRSS="AU":"63,32.4,0",1:"LRSF,1.2,0")
"RTN","LRAPDSR",44,0)
 S DIC("P")=$P(@("^DD("_DIC("P")_")"),"^",2)
"RTN","LRAPDSR",45,0)
 S DIC("B")="" S LRX=0 F  S LRX=$O(@(DIC_"LRX)")) Q:'LRX  D
"RTN","LRAPDSR",46,0)
 .S DIC("B")=+(@(DIC_"LRX,0)"))
"RTN","LRAPDSR",47,0)
 D ^DIC K DLAYGO
"RTN","LRAPDSR",48,0)
 S:Y=-1 LRQUIT=1
"RTN","LRAPDSR",49,0)
 Q
"RTN","LRAPDSR",50,0)
RELEAS2 ;Is the supplementary report already released?
"RTN","LRAPDSR",51,0)
 S:LRSS'="AU" LRX=$G(^LR(LRDFN,LRSS,LRI,1.2,+Y,0))
"RTN","LRAPDSR",52,0)
 S:LRSS="AU" LRX=$G(^LR(LRDFN,84,+Y,0))
"RTN","LRAPDSR",53,0)
 S LRRLS=+$P(LRX,"^",2)
"RTN","LRAPDSR",54,0)
 I LRRLS D
"RTN","LRAPDSR",55,0)
 .W $C(7),!!,"This supplementary report has been released.  Additions/"
"RTN","LRAPDSR",56,0)
 .W "modifications",!,"will create an audit trail.",!
"RTN","LRAPDSR",57,0)
 .S LRRLS1=1
"RTN","LRAPDSR",58,0)
 Q
"RTN","LRAPDSR",59,0)
COPY ;Make a copy of the current report.
"RTN","LRAPDSR",60,0)
 K ^TMP("DIQ1",$J)
"RTN","LRAPDSR",61,0)
 S LRIENS=+Y_","_$S(LRSS'="AU":LRI_",",1:"")_LRDFN_","
"RTN","LRAPDSR",62,0)
 S LRFILE1=$S(LRSS="SP":63.817,LRSS="CY":63.907,LRSS="EM":63.207,1:"")
"RTN","LRAPDSR",63,0)
 S:LRFILE1="" LRFILE1=$S(LRSS="AU":63.324,1:"")
"RTN","LRAPDSR",64,0)
 I LRFILE1="" S LRQUIT=1 Q
"RTN","LRAPDSR",65,0)
 D GETS^DIQ(LRFILE1,LRIENS,"**","Z","^TMP(""DIQ1"",$J)")
"RTN","LRAPDSR",66,0)
 Q
"RTN","LRAPDSR",67,0)
RPT ;
"RTN","LRAPDSR",68,0)
 N DIE,DA,DR
"RTN","LRAPDSR",69,0)
 S DIE=DIC K DIC
"RTN","LRAPDSR",70,0)
 S (LRDA,DA)=+Y
"RTN","LRAPDSR",71,0)
 S:LRSS="AU" DA(1)=LRDFN
"RTN","LRAPDSR",72,0)
 S:LRSS'="AU" DA(1)=LRI,DA(2)=LRDFN
"RTN","LRAPDSR",73,0)
 S DR=".01;1" D ^DIE
"RTN","LRAPDSR",74,0)
 I 'LRRLS S LRQUIT=1
"RTN","LRAPDSR",75,0)
 Q
"RTN","LRAPDSR",76,0)
COMPARE ;Compare reports
"RTN","LRAPDSR",77,0)
 I '$D(^TMP("DIQ1",$J)) S LRQUIT=1 Q
"RTN","LRAPDSR",78,0)
 S:LRSS'="AU" LRFILE="^LR(LRDFN,LRSS,LRI,1.2,LRDA,1,"
"RTN","LRAPDSR",79,0)
 S:LRSS="AU" LRFILE="^LR(LRDFN,84,LRDA,1,"
"RTN","LRAPDSR",80,0)
 I '$D(@(LRFILE_"0)")) D  Q
"RTN","LRAPDSR",81,0)
 .D:LRRLS1 UNRELEAS
"RTN","LRAPDSR",82,0)
 .S LRQUIT=1
"RTN","LRAPDSR",83,0)
 S LRA=0,LRFLG=1
"RTN","LRAPDSR",84,0)
 F  S LRA=$O(@(LRFILE_"LRA)")) Q:'LRA  D
"RTN","LRAPDSR",85,0)
 .S LRXTMP=@(LRFILE_"LRA,0)")
"RTN","LRAPDSR",86,0)
 .S:'$D(^TMP("DIQ1",$J,LRFILE1,LRIENS,1,LRA,0)) LRFLG=0
"RTN","LRAPDSR",87,0)
 .Q:'LRFLG
"RTN","LRAPDSR",88,0)
 .S LRYTMP=^TMP("DIQ1",$J,LRFILE1,LRIENS,1,LRA,0)
"RTN","LRAPDSR",89,0)
 .I LRXTMP'=LRYTMP S LRFLG=0
"RTN","LRAPDSR",90,0)
 I LRFLG D
"RTN","LRAPDSR",91,0)
 .S LRA=0 F  S LRA=$O(^TMP("DIQ1",$J,LRFILE1,LRIENS,1,LRA)) Q:'LRA  D
"RTN","LRAPDSR",92,0)
 ..I '$D(@(LRFILE_"LRA,0)")) S LRFLG=0
"RTN","LRAPDSR",93,0)
 I LRFLG D
"RTN","LRAPDSR",94,0)
 .W $C(7),!!,"No changes were made to the supplementary report."
"RTN","LRAPDSR",95,0)
 .K ^TMP("DIQ1",$J)
"RTN","LRAPDSR",96,0)
 .S LRQUIT=1
"RTN","LRAPDSR",97,0)
 Q
"RTN","LRAPDSR",98,0)
UNRELEAS ;Unrelease the supplementary report.
"RTN","LRAPDSR",99,0)
 K LRFDA
"RTN","LRAPDSR",100,0)
 S LRFDA(1,LRFILE1,LRIENS,.02)="@"
"RTN","LRAPDSR",101,0)
 D UPDATE^DIE("","LRFDA(1)")
"RTN","LRAPDSR",102,0)
 Q
"RTN","LRAPDSR",103,0)
UPDATE ;File changes
"RTN","LRAPDSR",104,0)
 ;First, store the date of the change and user ID
"RTN","LRAPDSR",105,0)
 K LRFDA
"RTN","LRAPDSR",106,0)
 S X="NOW",%DT="T" D ^%DT S LRNOW=Y
"RTN","LRAPDSR",107,0)
 S LRIENS1="+1,"_LRIENS
"RTN","LRAPDSR",108,0)
 S LRFILE=$S(LRSS="SP":63.8172,LRSS="CY":63.9072,LRSS="EM":63.2072,1:"")
"RTN","LRAPDSR",109,0)
 S:LRFILE="" LRFILE=$S(LRSS="AU":63.3242,1:"")
"RTN","LRAPDSR",110,0)
 I LRFILE="" S LRQUIT=1 Q
"RTN","LRAPDSR",111,0)
 S LRFDA(1,LRFILE,LRIENS1,.01)=LRNOW
"RTN","LRAPDSR",112,0)
 S LRFDA(1,LRFILE,LRIENS1,.02)=DUZ,LRFIELD=1
"RTN","LRAPDSR",113,0)
 D UPDATE^DIE("","LRFDA(1)","LRORIEN")
"RTN","LRAPDSR",114,0)
 Q
"RTN","LRAPDSR",115,0)
STORE ;Second, store the original report
"RTN","LRAPDSR",116,0)
 S LRIENS2=LRORIEN(1)_","_LRIENS
"RTN","LRAPDSR",117,0)
 S LRWPROOT="^TMP(""DIQ1"",$J,LRFILE1,LRIENS,1)"
"RTN","LRAPDSR",118,0)
 D WP^DIE(LRFILE,LRIENS2,LRFIELD,"",LRWPROOT)
"RTN","LRAPDSR",119,0)
 K ^TMP("DIQ1",$J)
"RTN","LRAPDSR",120,0)
 Q
"RTN","LRAPED")
0^15^B19288730
"RTN","LRAPED",1,0)
LRAPED ;AVAMC/REG/WTY - ANATOMIC PATH EDIT LOG-IN ;11/20/01
"RTN","LRAPED",2,0)
 ;;5.2;LAB SERVICE;**1,31,72,115,259**;Sep 27, 1994
"RTN","LRAPED",3,0)
 ;
"RTN","LRAPED",4,0)
 N LRTMP,LRREL,LRCOMP,LRMSG
"RTN","LRAPED",5,0)
 D ^LRAP Q:'$D(Y)
"RTN","LRAPED",6,0)
 D XR^LRU
"RTN","LRAPED",7,0)
 I LRCAPA D @(LRSS_"^LRAPSWK") G:'$D(X) END
"RTN","LRAPED",8,0)
 W !!,"EDIT ",LRO(68)," (",LRABV,") Log-In/Clinical Hx for ",LRH(0)," "
"RTN","LRAPED",9,0)
 S %=1 D YN^LRU G:%<1 END
"RTN","LRAPED",10,0)
 I %=2 D  G:Y<1 END
"RTN","LRAPED",11,0)
 .S %DT="AE",%DT(0)="-N",%DT("A")="Enter YEAR: "
"RTN","LRAPED",12,0)
 .D ^%DT K %DT
"RTN","LRAPED",13,0)
 .Q:Y<1
"RTN","LRAPED",14,0)
 .S LRAD=$E(Y,1,3)_"0000",Y=LRAD D D^LRU S LRH(0)=Y
"RTN","LRAPED",15,0)
 S LRC=$E(LRAD,1,3)
"RTN","LRAPED",16,0)
G ;
"RTN","LRAPED",17,0)
 W !!,"Enter ",LRO(68)," Accession #: " R LRAN:DTIME
"RTN","LRAPED",18,0)
 G:LRAN=""!(LRAN[U) END
"RTN","LRAPED",19,0)
 I LRAN'?1N.N!($E(LRAN)=0) D  G G
"RTN","LRAPED",20,0)
 .W $C(7),!," ENTER NUMBERS ONLY, No leading zero's"
"RTN","LRAPED",21,0)
 D EDIT
"RTN","LRAPED",22,0)
 G G
"RTN","LRAPED",23,0)
EDIT ;
"RTN","LRAPED",24,0)
 S LRDFN=$O(^LR(LRXREF,LRC,LRABV,LRAN,0))
"RTN","LRAPED",25,0)
 I 'LRDFN W $C(7),"  Not in file" Q
"RTN","LRAPED",26,0)
 I '$D(^LR(LRDFN,0)) K ^LR(LRXREF,LRC,LRABV,LRAN,LRDFN) Q
"RTN","LRAPED",27,0)
 S X=^LR(LRDFN,0) D ^LRUP W !,LRP," ID: ",SSN," OK "
"RTN","LRAPED",28,0)
 S %=1 D YN^LRU Q:%'=1
"RTN","LRAPED",29,0)
 D @($S("CYEMSP"[LRSS:"I",1:"A"))
"RTN","LRAPED",30,0)
 Q
"RTN","LRAPED",31,0)
I ;Non-autopsy sections (SP,CY,EM)
"RTN","LRAPED",32,0)
 S LRI=+$O(^LR(LRXREF,LRC,LRABV,LRAN,LRDFN,0))
"RTN","LRAPED",33,0)
 I '$D(^LR(LRDFN,LRSS,LRI,0)) D  Q
"RTN","LRAPED",34,0)
 .W $C(7),!,"Entry in x-ref but not in file ! X-ref deleted."
"RTN","LRAPED",35,0)
 .K ^LR(LRXREF,LRC,LRABV,LRAN,LRDFN,LRI)
"RTN","LRAPED",36,0)
 S X=^LR(LRDFN,LRSS,LRI,0),LRRC=$P(X,"^",10)
"RTN","LRAPED",37,0)
 S DA=LRI,DA(1)=LRDFN,DIE="^LR("_LRDFN_","""_LRSS_""",",(LRB,Y)=+X
"RTN","LRAPED",38,0)
 D D^LRU W !,"Specimen date: ",Y
"RTN","LRAPED",39,0)
 I $P(^LR(LRDFN,LRSS,LRI,0),"^",11)!($P(^(0),"^",3)) D  Q
"RTN","LRAPED",40,0)
 .W $C(7),!!,"Report released or completed.  Cannot edit Log-in data."
"RTN","LRAPED",41,0)
 D:LRCAPA C^LRAPSWK
"RTN","LRAPED",42,0)
DIE ;
"RTN","LRAPED",43,0)
 W ! D CK^LRU
"RTN","LRAPED",44,0)
 I $D(LR("CK")) K LR("CK") Q
"RTN","LRAPED",45,0)
 D SET,^DIE
"RTN","LRAPED",46,0)
 I $D(Y) D HELP G DIE
"RTN","LRAPED",47,0)
 D CK
"RTN","LRAPED",48,0)
 D:$O(^LR(LRDFN,LRSS,LRI,.1,0))&("SPCYEM"[LRSS)&(LRCAPA) C1^LRAPSWK
"RTN","LRAPED",49,0)
 Q
"RTN","LRAPED",50,0)
SET ;
"RTN","LRAPED",51,0)
 S (LRJ,LRE,LRF)=""
"RTN","LRAPED",52,0)
 S DR=".08;S LRE=X;.07;S LRJ=X;S:LRJ LRJ=$P(^VA(200,LRJ,0),U);"
"RTN","LRAPED",53,0)
 S DR=DR_".011//^S X=LRJ;.012;.013;.014;.015;.016;.1;S LRG=X;.02;.021;"
"RTN","LRAPED",54,0)
 S DR=DR_".99;S LRF=X"
"RTN","LRAPED",55,0)
 S:LRSS="SP" DR(2,63.812)=".01"
"RTN","LRAPED",56,0)
 S:LRSS="CY" DR(2,63.902)=".01;.02"
"RTN","LRAPED",57,0)
 S:LRSS="EM" DR(2,63.202)=".01"
"RTN","LRAPED",58,0)
 Q
"RTN","LRAPED",59,0)
SET1 ;
"RTN","LRAPED",60,0)
 S LRJ="",DA=LRDFN,DIE="^LR(",DR="11;S LRRC=X;14.1;S LRLLOC=X;14.5;"
"RTN","LRAPED",61,0)
 S DR=DR_"14.6;S LRSVC=X;12.1;S LRMD=X;13.5:13.8"
"RTN","LRAPED",62,0)
 S:%=1 DR=DR_";16:24;26:31;25;31.1:31.4;25.1:25.9"
"RTN","LRAPED",63,0)
 D D^LRAUAW
"RTN","LRAPED",64,0)
 S (Y,LRB)=LR(63,12),LRI=9999999-$P(LRB,".")
"RTN","LRAPED",65,0)
 Q
"RTN","LRAPED",66,0)
A ;Autopsy
"RTN","LRAPED",67,0)
 S LRREL=+$$GET1^DIQ(63,LRDFN_",",14.7,"I")
"RTN","LRAPED",68,0)
 S LRCOMP=+$$GET1^DIQ(63,LRDFN_",",13,"I")
"RTN","LRAPED",69,0)
 I LRREL!LRCOMP D  Q
"RTN","LRAPED",70,0)
 .K LRMSG
"RTN","LRAPED",71,0)
 .S LRMSG=$C(7)_"Report released or completed.  Cannot edit Log-in data."
"RTN","LRAPED",72,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPED",73,0)
 W !!,"Edit Weights & Measurements " S %=2 D YN^LRU Q:%<1
"RTN","LRAPED",74,0)
 S LRRC=$P(^LR(LRDFN,"AU"),U),DA=LRDFN,DIE="^LR("
"RTN","LRAPED",75,0)
 D SET1,D^LRU
"RTN","LRAPED",76,0)
 W !!,"Date Died: ",Y
"RTN","LRAPED",77,0)
 I 'LRB D  Q
"RTN","LRAPED",78,0)
 .W $C(7),"?  Must have date died entered in ",LR(63,.02)," File."
"RTN","LRAPED",79,0)
AU ;
"RTN","LRAPED",80,0)
 W ! D ^DIE
"RTN","LRAPED",81,0)
 I $D(Y) D HELP G AU
"RTN","LRAPED",82,0)
 D CK1
"RTN","LRAPED",83,0)
 Q
"RTN","LRAPED",84,0)
CK ;
"RTN","LRAPED",85,0)
 I '$D(^LR(LRDFN,LRSS,LRI)) D K
"RTN","LRAPED",86,0)
 Q
"RTN","LRAPED",87,0)
CK1 ;
"RTN","LRAPED",88,0)
 Q:'$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0))  S X=^(0)
"RTN","LRAPED",89,0)
 S:'$D(^LRO(68,LRAA,1,LRAD,1,LRAN,3)) ^(3)=LRB_"^^^^"_LRI
"RTN","LRAPED",90,0)
 S LRTMP=$P(X,U,1,2)_U_LRRC_U_$P(X,U,4,6)_U_LRLLOC_U_LRMD_U_LRSVC
"RTN","LRAPED",91,0)
 S LRTMP=LRTMP_U_$P(X,U,10)
"RTN","LRAPED",92,0)
 S ^LRO(68,LRAA,1,LRAD,1,LRAN,0)=LRTMP
"RTN","LRAPED",93,0)
 S LRD=+$P(X,U,3)
"RTN","LRAPED",94,0)
 K ^LRO(68,LRAA,1,LRAD,1,"E",LRD,LRAN)
"RTN","LRAPED",95,0)
 S ^LRO(68,LRAA,1,LRAD,1,"E",LRRC,LRAN)=""
"RTN","LRAPED",96,0)
 S X=^LRO(68,LRAA,1,LRAD,1,LRAN,3),^(3)=LRB_U_$P(X,U,2,99)
"RTN","LRAPED",97,0)
 Q
"RTN","LRAPED",98,0)
K ;
"RTN","LRAPED",99,0)
 Q:'$D(^LRO(68,LRAA,1,LRAD,1,LRAN))  D K^LRUDEL
"RTN","LRAPED",100,0)
 L +^LRO(68,LRAA)
"RTN","LRAPED",101,0)
 K ^LRO(68,LRAA,1,LRAD,1,LRAN),^LRO(68,LRAA,1,LRAD,1,"E",LRRC,LRAN)
"RTN","LRAPED",102,0)
 K ^LRO(68,LRAA,1,"AC",DUZ(2),LRAD,LRAN)
"RTN","LRAPED",103,0)
 S X=^LRO(68,LRAA,1,LRAD,1,0)
"RTN","LRAPED",104,0)
 S LRTMP=$P(X,"^",1,2)_"^"_(LRAN-1)_"^"_($P(X,"^",4)-1)
"RTN","LRAPED",105,0)
 S ^LRO(68,LRAA,1,LRAD,1,0)=LRTMP
"RTN","LRAPED",106,0)
 L -^LRO(68,LRAA)
"RTN","LRAPED",107,0)
 F A=1,2,3,4 D
"RTN","LRAPED",108,0)
 .I $D(^LRO(69.2,LRAA,A,LRAN)) K ^(LRAN) D
"RTN","LRAPED",109,0)
 ..S X(1)=$O(^LRO(69.2,LRAA,A,0)) S:'X(1) X(1)=0
"RTN","LRAPED",110,0)
 ..I $D(^LRO(69.2,LRAA,A,0)) D
"RTN","LRAPED",111,0)
 ...L +^LRO(69.2,LRAA,A)
"RTN","LRAPED",112,0)
 ...S X=^LRO(69.2,LRAA,A,0)
"RTN","LRAPED",113,0)
 ...S LRTMP=$P(X,"^",1,2)_"^"_X(1)_"^"_$S(X(1)=0:X(1),1:($P(X,"^",4)-1))
"RTN","LRAPED",114,0)
 ...S ^LRO(69.2,LRAA,A,0)=LRTMP
"RTN","LRAPED",115,0)
 ...L -^LRO(69.2,LRAA,A)
"RTN","LRAPED",116,0)
 Q
"RTN","LRAPED",117,0)
HELP ;
"RTN","LRAPED",118,0)
 W $C(7),!!,"Please do not exit EDIT with an ""^""."
"RTN","LRAPED",119,0)
 W !,"Press RETURN key repeatedly to complete the edit.",!!
"RTN","LRAPED",120,0)
 Q
"RTN","LRAPED",121,0)
END ;
"RTN","LRAPED",122,0)
 D V^LRU
"RTN","LRAPED",123,0)
 Q
"RTN","LRAPEDC")
0^16^B5405480
"RTN","LRAPEDC",1,0)
LRAPEDC ;AVAMC/REG/WTY - EDIT ANATOMIC PATH COMMENTS ;11/20/01
"RTN","LRAPEDC",2,0)
 ;;5.2;LAB SERVICE;**72,259**;Sep 27, 1994
"RTN","LRAPEDC",3,0)
 ;
"RTN","LRAPEDC",4,0)
 N LRREL,LRFLD,LRFILE,LRMSG
"RTN","LRAPEDC",5,0)
 S LRDICS="SPCYEM" D ^LRAP Q:'$D(Y)
"RTN","LRAPEDC",6,0)
 D XR^LRU
"RTN","LRAPEDC",7,0)
ASK ;
"RTN","LRAPEDC",8,0)
 W !?14,"1. Enter/edit specimen comment(s)"
"RTN","LRAPEDC",9,0)
 W !?14,"2. Enter/edit delayed report comment(s)"
"RTN","LRAPEDC",10,0)
 R !,"CHOOSE (1-2): ",X:DTIME
"RTN","LRAPEDC",11,0)
 G:X=""!(X[U) END
"RTN","LRAPEDC",12,0)
 I X'=1&(X'=2) D  G ASK
"RTN","LRAPEDC",13,0)
 .W $C(7),!,"Must select either a '1' or a '2'"
"RTN","LRAPEDC",14,0)
 S DR=$S(X=1:.99,1:.97),LR("C")=$S(X=1:"specimen",1:"delayed report")
"RTN","LRAPEDC",15,0)
 W !!,"EDIT ",LRO(68)," ",LR("C")," comments for ",LRH(0)," "
"RTN","LRAPEDC",16,0)
 S %=1 D YN^LRU G:%<1 END
"RTN","LRAPEDC",17,0)
 I %=2 D  G:Y<1 END
"RTN","LRAPEDC",18,0)
 .S %DT="AE",%DT(0)="-N",%DT("A")="Enter YEAR: "
"RTN","LRAPEDC",19,0)
 .D ^%DT K %DT
"RTN","LRAPEDC",20,0)
 .Q:Y<1
"RTN","LRAPEDC",21,0)
 .S LRAD=$E(Y,1,3)_"0000",Y=LRAD D D^LRU S LRH(0)=Y
"RTN","LRAPEDC",22,0)
 S LRC=$E(LRAD,1,3)
"RTN","LRAPEDC",23,0)
G ;
"RTN","LRAPEDC",24,0)
 W !!,"Enter ",LRO(68)," Accession #: "
"RTN","LRAPEDC",25,0)
 R LRAN:DTIME G:LRAN=""!(LRAN[U) END
"RTN","LRAPEDC",26,0)
 I LRAN'?1N.N W $C(7)," ENTER NUMBERS ONLY" G G
"RTN","LRAPEDC",27,0)
 D EDIT
"RTN","LRAPEDC",28,0)
 G G
"RTN","LRAPEDC",29,0)
EDIT ;
"RTN","LRAPEDC",30,0)
 S LRDFN=$O(^LR(LRXREF,LRC,LRABV,LRAN,0))
"RTN","LRAPEDC",31,0)
 I 'LRDFN W $C(7),"  Not in file" Q
"RTN","LRAPEDC",32,0)
 I '$D(^LR(LRDFN,0)) K ^LR(LRXREF,LRC,LRABV,LRAN,LRDFN) Q
"RTN","LRAPEDC",33,0)
 S X=^LR(LRDFN,0) D ^LRUP
"RTN","LRAPEDC",34,0)
 W !,LRP," ID: ",SSN," OK "
"RTN","LRAPEDC",35,0)
 S %=1 D YN^LRU Q:%'=1
"RTN","LRAPEDC",36,0)
 S LRI=+$O(^LR(LRXREF,LRC,LRABV,LRAN,LRDFN,0))
"RTN","LRAPEDC",37,0)
 I '$D(^LR(LRDFN,LRSS,LRI,0)) D  Q
"RTN","LRAPEDC",38,0)
 .W $C(7),!,"Entry in x-ref but not in file ! X-ref deleted."
"RTN","LRAPEDC",39,0)
 .K ^LR(LRXREF,LRC,LRABV,LRAN,LRDFN,LRI)
"RTN","LRAPEDC",40,0)
 S LRFLD=$S(LRSS="SP":8,LRSS="CY":9,LRSS="EM":2,1:"")
"RTN","LRAPEDC",41,0)
 Q:LRFLD=""
"RTN","LRAPEDC",42,0)
 S LRFILE=+$$GET1^DID(63,LRFLD,"","SPECIFIER")
"RTN","LRAPEDC",43,0)
 S LRREL=+$$GET1^DIQ(LRFILE,LRI_","_LRDFN_",",.11,"I")
"RTN","LRAPEDC",44,0)
 I LRREL D  Q
"RTN","LRAPEDC",45,0)
 .K LRMSG
"RTN","LRAPEDC",46,0)
 .S LRMSG=$C(7)_"Report released.  Edit not allowed from this option."
"RTN","LRAPEDC",47,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPEDC",48,0)
 S X=^LR(LRDFN,LRSS,LRI,0)
"RTN","LRAPEDC",49,0)
 I $P($P(X,"^",6)," ")'=LRABV Q
"RTN","LRAPEDC",50,0)
 S LRD=$P(X,"^",10),DA=LRI,DA(1)=LRDFN,DIE="^LR(LRDFN,LRSS,"
"RTN","LRAPEDC",51,0)
 S (LRB,Y)=+X D D^LRU W !,"Specimen date: ",Y
"RTN","LRAPEDC",52,0)
 D ^DIE
"RTN","LRAPEDC",53,0)
 Q
"RTN","LRAPEDC",54,0)
END ;
"RTN","LRAPEDC",55,0)
 D V^LRU
"RTN","LRAPEDC",56,0)
 Q
"RTN","LRAPESON")
0^17^B2992765
"RTN","LRAPESON",1,0)
LRAPESON ;DALOI/WTY- AP TURN ESIG ON;10/25/01
"RTN","LRAPESON",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPESON",3,0)
 ;
"RTN","LRAPESON",4,0)
 ;This routine is used to activate the electronic signature flag
"RTN","LRAPESON",5,0)
 ;for Anatomic Pathology
"RTN","LRAPESON",6,0)
 ;
"RTN","LRAPESON",7,0)
 N LRAPES,LRAPESON,LRMSG,LRQUIT,LRFDA
"RTN","LRAPESON",8,0)
 S LRQUIT=0
"RTN","LRAPESON",9,0)
MAIN ;
"RTN","LRAPESON",10,0)
 D CHKSEC Q:LRQUIT
"RTN","LRAPESON",11,0)
 D GETDATA(.LRAPESON)
"RTN","LRAPESON",12,0)
 D INPUT Q:LRQUIT
"RTN","LRAPESON",13,0)
 D UPDATE
"RTN","LRAPESON",14,0)
 Q
"RTN","LRAPESON",15,0)
CHKSEC ;
"RTN","LRAPESON",16,0)
 I '$D(^XUSEC("LRAPSUPER",DUZ)) D  Q
"RTN","LRAPESON",17,0)
 .S LRMSG="You do not hold the appropriate security key "
"RTN","LRAPESON",18,0)
 .S LRMSG=LRMSG_"to use this option."
"RTN","LRAPESON",19,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPESON",20,0)
 .W !
"RTN","LRAPESON",21,0)
 .S LRQUIT=1
"RTN","LRAPESON",22,0)
 Q
"RTN","LRAPESON",23,0)
GETDATA(LRAPESON) ;
"RTN","LRAPESON",24,0)
 S LRAPESON=+$$GET1^DIQ(69.9,"1,",619,"I")
"RTN","LRAPESON",25,0)
 Q
"RTN","LRAPESON",26,0)
INPUT ;
"RTN","LRAPESON",27,0)
 S LRMSG="AP electronic signature is "
"RTN","LRAPESON",28,0)
 S:'LRAPESON LRMSG=LRMSG_"in"
"RTN","LRAPESON",29,0)
 S LRMSG=LRMSG_"active."
"RTN","LRAPESON",30,0)
 D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPESON",31,0)
 W !
"RTN","LRAPESON",32,0)
 S DIR(0)="YA",DIR("B")="NO"
"RTN","LRAPESON",33,0)
 S DIR("A")="Do you wish to "
"RTN","LRAPESON",34,0)
 S:LRAPESON DIR("A")=DIR("A")_"de"
"RTN","LRAPESON",35,0)
 S DIR("A")=DIR("A")_"activate electronic signature for AP? "
"RTN","LRAPESON",36,0)
 D ^DIR
"RTN","LRAPESON",37,0)
 I 'Y S LRQUIT=1
"RTN","LRAPESON",38,0)
 Q
"RTN","LRAPESON",39,0)
UPDATE ;
"RTN","LRAPESON",40,0)
 L +^LAB(69.9,1,15):5 I '$T D  Q
"RTN","LRAPESON",41,0)
 .S LRMSG="This record is locked by another user.  "
"RTN","LRAPESON",42,0)
 .S LRMSG=LRMSG_"Please wait and try again."
"RTN","LRAPESON",43,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPESON",44,0)
 S LRFDA(69.9,"1,",619)=$S('LRAPESON:1,1:0)
"RTN","LRAPESON",45,0)
 D FILE^DIE("","LRFDA")
"RTN","LRAPESON",46,0)
 W "...Done"
"RTN","LRAPESON",47,0)
 L -^LAB(69.9,1,15)
"RTN","LRAPESON",48,0)
 Q
"RTN","LRAPF")
0^18^B3081199
"RTN","LRAPF",1,0)
LRAPF ;AVAMC/REG/WTY - CY/EM/SP RPT ;9/25/00
"RTN","LRAPF",2,0)
 ;;5.2;LAB SERVICE;**173,201,248,259**;Sep 27, 1994
"RTN","LRAPF",3,0)
 ;
"RTN","LRAPF",4,0)
 ;23-MAR-01;WTY;Trimmed down DX in line tag F per SAM-0301-22193
"RTN","LRAPF",5,0)
 ;
"RTN","LRAPF",6,0)
 ;from LRSPRPT,LRSPRPT1, LRSPRPT2, LRSPRPTM
"RTN","LRAPF",7,0)
 I $D(LR("F")),IOST?1"C".E D  Q:LR("Q")
"RTN","LRAPF",8,0)
 .K DIR S DIR(0)="E"
"RTN","LRAPF",9,0)
 .D ^DIR W !
"RTN","LRAPF",10,0)
 .S:$D(DTOUT)!(X[U) LR("Q")=1
"RTN","LRAPF",11,0)
 W:($D(LR("F"))) @IOF
"RTN","LRAPF",12,0)
 S LRQ=LRQ+1
"RTN","LRAPF",13,0)
 W !
"RTN","LRAPF",14,0)
 D W
"RTN","LRAPF",15,0)
 W !?5,"MEDICAL RECORD |",?40,LRAA(1),?73,"Pg ",LRQ
"RTN","LRAPF",16,0)
 D:LRQ>1 P
"RTN","LRAPF",17,0)
 D W
"RTN","LRAPF",18,0)
 Q
"RTN","LRAPF",19,0)
F ;from LRSPRPT,LRSPRPT1, LRSPRPT2, LRSPRPTM
"RTN","LRAPF",20,0)
 Q:LR("Q")
"RTN","LRAPF",21,0)
 I IOSL'>66 F  Q:$Y>(IOSL-14)  W !
"RTN","LRAPF",22,0)
 D W W !,$S('$D(LR("W")):"",1:"See signed copy in chart")
"RTN","LRAPF",23,0)
 W ?57,"(",$S($D(LRO):"End of report",1:"See next page"),")"
"RTN","LRAPF",24,0)
 W !,$G(LRPMD),?52,LRW(9),?55,"| Date ",$G(LRRC)
"RTN","LRAPF",25,0)
 D W
"RTN","LRAPF",26,0)
 W !,LRP,?50,$S('$D(LR("W")):"STANDARD FORM 515",1:"WORK COPY ONLY !!")
"RTN","LRAPF",27,0)
 W !,"ID:",SSN,?16,"SEX:",SEX," DOB:",DOB
"RTN","LRAPF",28,0)
 W:AGE $S($G(VADM(6))]"":" AGE AT DEATH: ",1:" AGE: "),AGE
"RTN","LRAPF",29,0)
 W " LOC:",$E(LRLLOC,1,20)
"RTN","LRAPF",30,0)
 W ! W:$L(LRADM) "ADM:",$P(LRADM,"@")
"RTN","LRAPF",31,0)
 W:$L(LRADX) ?17,"DX:",$E(LRADX,1,26)
"RTN","LRAPF",32,0)
 W ?46,"PCP: "
"RTN","LRAPF",33,0)
 W:LRPRAC ?51,$E(LRPRAC(1),1,28)
"RTN","LRAPF",34,0)
 Q
"RTN","LRAPF",35,0)
P D:LRQ>1 W
"RTN","LRAPF",36,0)
 S ADESC="Accession No. "_$S(LRQ(8)]"":LRQ(8)_LRW(1)_" "_LRAC,1:LRAC)
"RTN","LRAPF",37,0)
 S LENG1=$L(LRQ(1)),LENG2=$L(ADESC),LNSPCE=IOM-LENG2-14
"RTN","LRAPF",38,0)
 S:LENG1>LNSPCE LRQ(1)=$E(LRQ(1),1,LNSPCE)
"RTN","LRAPF",39,0)
 W !?30,"PATHOLOGY REPORT"
"RTN","LRAPF",40,0)
 W !,"Laboratory: ",LRQ(1)
"RTN","LRAPF",41,0)
 W ?(IOM-LENG2-1),ADESC
"RTN","LRAPF",42,0)
 K ADESC,LENG1,LENG2,LNSPCE
"RTN","LRAPF",43,0)
 Q
"RTN","LRAPF",44,0)
W W !,LR("%")
"RTN","LRAPF",45,0)
 Q
"RTN","LRAPFICH")
0^44^B8356436
"RTN","LRAPFICH",1,0)
LRAPFICH ;AVAMC/REG/WTY/KLL - MICROFICH PATH REPORTS ;03/21/2002
"RTN","LRAPFICH",2,0)
 ;;5.2;LAB SERVICE;**72,173,248,259**;Sep 27, 1994
"RTN","LRAPFICH",3,0)
 ;
"RTN","LRAPFICH",4,0)
 D END ;Final path reports by accession number
"RTN","LRAPFICH",5,0)
 N LRQUIT
"RTN","LRAPFICH",6,0)
 W ! S LRDICS="SPCYEM" D ^LRAP G:'$D(Y) END
"RTN","LRAPFICH",7,0)
 ;KLL - Final Office Copy prints SNOMED codes on a separate page
"RTN","LRAPFICH",8,0)
 D FOC
"RTN","LRAPFICH",9,0)
 ;Variable LR("DVD") is used to divide reports displayed in the browser
"RTN","LRAPFICH",10,0)
 K LR("DVD")
"RTN","LRAPFICH",11,0)
 S $P(LR("DVD"),"|",IOM)=""
"RTN","LRAPFICH",12,0)
 S %DT("A")="Select Accession YEAR: ",%DT="AEQ" D ^%DT K %DT G:Y<1 END S LR("Y")=$E(Y,1,3)
"RTN","LRAPFICH",13,0)
A R !,"Start with accession #: ",X:DTIME G:X[U!(X="") END I X'?1N.N W $C(7),!,"Enter a number." G A
"RTN","LRAPFICH",14,0)
 S LR("B")=X
"RTN","LRAPFICH",15,0)
B R !,"Go      to accession #: ",X:DTIME G:X[U!(X="") END I X'?1N.N W $C(7),!,"Enter a number." G B
"RTN","LRAPFICH",16,0)
 S LR("E")=X I LR("E")<LR("B") S X=LR("B"),LR("B")=LR("E"),LR("E")=X
"RTN","LRAPFICH",17,0)
 S LR("B")=LR("B")-1
"RTN","LRAPFICH",18,0)
SETUP ;
"RTN","LRAPFICH",19,0)
 W !
"RTN","LRAPFICH",20,0)
 S %ZIS="Q" D ^%ZIS
"RTN","LRAPFICH",21,0)
 I POP W ! D END Q
"RTN","LRAPFICH",22,0)
 I $D(IO("Q")) D  Q
"RTN","LRAPFICH",23,0)
 .S ZTDESC="Final path reports by accession #"
"RTN","LRAPFICH",24,0)
 .S ZTSAVE("*")="",ZTRTN="QUE^LRAPFICH",ZTREQ="@",ZTIO=ION
"RTN","LRAPFICH",25,0)
 .D ^%ZTLOAD W:$D(ZTSK) !,"Report Queued to device ",ION K ZTIO
"RTN","LRAPFICH",26,0)
 .D HOME^%ZIS K ZTSK,IO("Q"),ZTREQ
"RTN","LRAPFICH",27,0)
QUE ;
"RTN","LRAPFICH",28,0)
 U IO S LR("DIWF")="W",(LR,LR("A"),LR(1),LR(2),LR(3))=0
"RTN","LRAPFICH",29,0)
 S (LRA,LRQ(3))=1
"RTN","LRAPFICH",30,0)
 D L^LRU,S^LRU,XR^LRU,L1^LRU,EN2^LRUA,SET^LRUA
"RTN","LRAPFICH",31,0)
 S LRAN=LR("B")
"RTN","LRAPFICH",32,0)
 F  S LRAN=$O(^LR(LRXREF,LR("Y"),LRABV,LRAN)) Q:'LRAN!(LRAN>LR("E"))!(LR("Q"))  D
"RTN","LRAPFICH",33,0)
 .S LRDFN=$O(^LR(LRXREF,LR("Y"),LRABV,LRAN,0)),LRI=$O(^(LRDFN,0))
"RTN","LRAPFICH",34,0)
 .S LRSF515=1,LRQUIT=0
"RTN","LRAPFICH",35,0)
 .K LR("F")
"RTN","LRAPFICH",36,0)
 .D TIUCHK^LRAPUTL(.LRPTR,LRDFN,LRSS,LRI)
"RTN","LRAPFICH",37,0)
 .I +$G(LRPTR) D  Q
"RTN","LRAPFICH",38,0)
 ..D MAIN^LRAPTIUP(LRPTR,0)
"RTN","LRAPFICH",39,0)
 ..W:IOST["BROWSER" !!,LR("DVD")
"RTN","LRAPFICH",40,0)
 ..K LRPTR
"RTN","LRAPFICH",41,0)
 ..;KLL-Print SNOMED Codes if Final Office Copy selected
"RTN","LRAPFICH",42,0)
 ..I LRFOC D FOC^LRSPRPT
"RTN","LRAPFICH",43,0)
 ..I LRQUIT S LR("Q")=1 Q
"RTN","LRAPFICH",44,0)
 ..S LR("F")=1
"RTN","LRAPFICH",45,0)
 ..I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRAPFICH",46,0)
 .W:IOST?1"C-".E @IOF
"RTN","LRAPFICH",47,0)
 .D EN^LRSPRPT
"RTN","LRAPFICH",48,0)
 .W:IOST?1"P-".E @IOF
"RTN","LRAPFICH",49,0)
 .W:IOST["BROWSER" !!,LR("DVD")
"RTN","LRAPFICH",50,0)
 .I LRFOC D FOC^LRSPRPT
"RTN","LRAPFICH",51,0)
 .I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRAPFICH",52,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LRAPFICH",53,0)
 K %,DIR,DTOUT,DUOUT,DIRUT,X,Y
"RTN","LRAPFICH",54,0)
 D END
"RTN","LRAPFICH",55,0)
 Q
"RTN","LRAPFICH",56,0)
FOC ;Final Office Copy
"RTN","LRAPFICH",57,0)
 W !
"RTN","LRAPFICH",58,0)
 K DIR
"RTN","LRAPFICH",59,0)
 S LRFOC=0
"RTN","LRAPFICH",60,0)
 S DIR(0)="Y",DIR("A")="Is this a final office copy"
"RTN","LRAPFICH",61,0)
 S DIR("B")="YES"
"RTN","LRAPFICH",62,0)
 S DIR("?",1)="SNOMED codes no longer appear on the report.  The final"
"RTN","LRAPFICH",63,0)
 S DIR("?",1)=DIR("?",1)_" office copy prints"
"RTN","LRAPFICH",64,0)
 S DIR("?")="these codes on a separate page.  Enter 'Yes' to include "
"RTN","LRAPFICH",65,0)
 S DIR("?")=DIR("?")_"this page."
"RTN","LRAPFICH",66,0)
 D ^DIR
"RTN","LRAPFICH",67,0)
 I Y S LRFOC=1
"RTN","LRAPFICH",68,0)
 Q
"RTN","LRAPFICH",69,0)
CONT ;
"RTN","LRAPFICH",70,0)
 K DIR S DIR(0)="E"
"RTN","LRAPFICH",71,0)
 D ^DIR W !
"RTN","LRAPFICH",72,0)
 S:$D(DTOUT)!(X[U) LR("Q")=1
"RTN","LRAPFICH",73,0)
 Q
"RTN","LRAPFICH",74,0)
END D V^LRU
"RTN","LRAPFICH",75,0)
 K LRSF515
"RTN","LRAPFICH",76,0)
 Q
"RTN","LRAPLG")
0^19^B7969847
"RTN","LRAPLG",1,0)
LRAPLG ;AVAMC/REG/WTY - AP LOG-IN ;10/23/01
"RTN","LRAPLG",2,0)
 ;;5.2;LAB SERVICE;**72,201,259**;Sep 27, 1994
"RTN","LRAPLG",3,0)
 D ^LRAP Q:'$D(Y)  S LR("L")=LRSS_"^LRAP" I LRCAPA,"AUSP"[LRSS S X=$S(LRSS="SP":"H & E STAIN",1:"AUTOPSY H & E") D X^LRUWK G:'$D(X) END S LRW("H&E")=LRT K LRT
"RTN","LRAPLG",4,0)
 I LRCAPA,LRSS="EM" S X="THICK SECTION EM" D X^LRUWK G:'$D(X) END S X=11 D SET S LRW("SS")=LRT_U_X S X="GRID EM" D X^LRUWK G:'$D(X) END S X=12 D SET S LRW("G")=LRT_U_X K LRT
"RTN","LRAPLG",5,0)
 I LRCAPA D @(LRSS_"^LRAPSWK") G:'$D(X) END
"RTN","LRAPLG",6,0)
 D:"SPEMCY"[LRSS A^LRAPWU W !!,"Log-In for ",LRH(0)," " S %=1 D YN^LRU Q:%<1  S LRAA(3)=1 D XR^LRU
"RTN","LRAPLG",7,0)
 I %=2 S %DT="AE",%DT(0)="-N",%DT("A")="Enter YEAR: " D ^%DT K %DT Q:Y<1  S LRAD=$E(Y,1,3)_"0000",Y=LRAD D D^LRU S LRH(0)=Y
"RTN","LRAPLG",8,0)
 S LRH(2)=$E(LRAD,1,3),LRWHN=$E(LRAD,2,3)
"RTN","LRAPLG",9,0)
 S:'$D(^LRO(68,LRAA,1,0)) ^(0)="^68.01DA^^0"
"RTN","LRAPLG",10,0)
 S:'$D(^LRO(68,LRAA,1,LRAD,0)) ^(0)=LRAD,^LRO(68,LRAA,1,0)=$P(^LRO(68,LRAA,1,0),"^",1,2)_"^"_LRAD_"^"_($P(^(0),"^",4)+1)
"RTN","LRAPLG",11,0)
 S:'$D(^LRO(68,LRAA,1,LRAD,1,0)) ^(0)="^68.02PA^^"
"RTN","LRAPLG",12,0)
 S %DT="",X="T-4" D ^%DT S LRDTI=9999999-Y
"RTN","LRAPLG",13,0)
GETP W ! S LRSIT="",LRDPAF=1 K DIC
"RTN","LRAPLG",14,0)
 D ^LRDPA G:LRDFN<1 END
"RTN","LRAPLG",15,0)
 S:'+$G(LRPRAC) LRPRAC(1)=""
"RTN","LRAPLG",16,0)
 I +$G(LRPRAC) S X=LRPRAC D D^LRUA S LRPRAC(1)=X
"RTN","LRAPLG",17,0)
 I LRSS="SP" S X=0 F  S X=$O(^LR(LRDFN,LRSS,X)) Q:'X!(X>LRDTI)  D
"RTN","LRAPLG",18,0)
 .S Y=^LR(LRDFN,LRSS,X,0)
"RTN","LRAPLG",19,0)
 .W $C(7),!?6,"Accession number assigned for ",$$FMTE^XLFDT(Y,"D")
"RTN","LRAPLG",20,0)
 .W " is: ",$P(Y,"^",6)
"RTN","LRAPLG",21,0)
 I LRSS="SP" S X="SROSPLG" X ^%ZOSF("TEST") I $T D ^SROSPLG
"RTN","LRAPLG",22,0)
 D ADD G GETP
"RTN","LRAPLG",23,0)
ADD I LRSS="AU",'$D(LREXP) W $C(7),!!,"NO DATE DIED ENTERED IN ",LRFNAM," FILE",! Q:+LRDPF=2  S DIE=+LRDPF,DA=DFN,DR=.351 D ^DIE Q:$D(Y)  S LREXP=X
"RTN","LRAPLG",24,0)
 I LRSS="AU",$D(^LR(LRDFN,"AU")),$P(^("AU"),U,6) S Y=^("AU"),X=+$P(Y,U,6),Y(1)=$E(Y,1,3)_"0000" W !,"Yr:",1700+$E(Y,1,3)," Acc#:",X," IN LAB FILE FOR ",$P(@(LRPF_DFN_",0)"),U)," SSN:",$P(^(0),U,9) D CK Q
"RTN","LRAPLG",25,0)
 D:LRPF="^DPT(" ^LRAPPOW ; for AFIP studies
"RTN","LRAPLG",26,0)
 D ^LRAPLG1 K LRMD,DIC,DIE,DR Q
"RTN","LRAPLG",27,0)
CK I +$G(^LRO(68,LRAA,1,Y(1),1,X,0))=LRDFN W $C(7),!!?20,"Also in accession file" Q
"RTN","LRAPLG",28,0)
 W !,"Enter in Accession File " S %=2 D YN^LRU D:%=1 ^LRAPLG2 Q
"RTN","LRAPLG",29,0)
SET S X=$P($G(^LRO(69.2,LRAA,0)),"^",X) S:'X X=1 Q
"RTN","LRAPLG",30,0)
END D V^LRU Q
"RTN","LRAPMOD")
0^51^B16465841
"RTN","LRAPMOD",1,0)
LRAPMOD ;AVAMC/REG/WTY/KLL - PRINT PATH MICRO MODIFICATIONS ;9/22/00
"RTN","LRAPMOD",2,0)
 ;;5.2;LAB SERVICE;**72,248,259**;Sep 27, 1994
"RTN","LRAPMOD",3,0)
 ;
"RTN","LRAPMOD",4,0)
 ;Reference to ^%DT supported by IA #10003
"RTN","LRAPMOD",5,0)
 ;
"RTN","LRAPMOD",6,0)
 ;If ESIG Switch turned ON, print from TIU if found,
"RTN","LRAPMOD",7,0)
 ;  otherwise print from LR.
"RTN","LRAPMOD",8,0)
 N LRESSW
"RTN","LRAPMOD",9,0)
 D GETDATA^LRAPESON(.LRESSW)
"RTN","LRAPMOD",10,0)
 I +$G(LRESSW) D TIUPRT,END Q
"RTN","LRAPMOD",11,0)
 ;Print from LR
"RTN","LRAPMOD",12,0)
 S LRDICS="AUSPCYEM" D ^LRAP G:'$D(Y) END
"RTN","LRAPMOD",13,0)
 W !!?15,LRO(68),!!?15,"Print pathology report modifications",!!
"RTN","LRAPMOD",14,0)
GETP D EN2^LRUA,EN1^LRUPS
"RTN","LRAPMOD",15,0)
 G:LRAN["?" GETP
"RTN","LRAPMOD",16,0)
 I LRAN=-1 D END Q
"RTN","LRAPMOD",17,0)
 S FLGMOD=1
"RTN","LRAPMOD",18,0)
LRPRT I LRSS'="AU" D
"RTN","LRAPMOD",19,0)
 .S:($D(^LR(LRDFN,LRSS,LRI,4))!($D(^(5)))!($D(^(6)))!($D(^(7)))) FLGMOD=0
"RTN","LRAPMOD",20,0)
 I FLGMOD D  K LRFILE
"RTN","LRAPMOD",21,0)
 .S LRFILE=$S(LRSS="AU":"^LR(LRDFN,84",1:"^LR(LRDFN,LRSS,LRI,1.2")
"RTN","LRAPMOD",22,0)
 .I $D(@(LRFILE_")")) D
"RTN","LRAPMOD",23,0)
 ..F A=0:0 S A=$O(@(LRFILE_",A)")) Q:'A!('FLGMOD)  D
"RTN","LRAPMOD",24,0)
 ...S:$D(@(LRFILE_",A,2)")) FLGMOD=0
"RTN","LRAPMOD",25,0)
 I FLGMOD W $C(7),!!?5,"No modifications to print." G END
"RTN","LRAPMOD",26,0)
 K FLGMOD
"RTN","LRAPMOD",27,0)
 S (LRQ(9),LRSAV)=1,LRAP=LRDFN
"RTN","LRAPMOD",28,0)
 I LRSS'="AU" D  G DEV^LRSPRPT
"RTN","LRAPMOD",29,0)
 .S LRAP=LRAP_"^"_LRI,LRS(99)=1
"RTN","LRAPMOD",30,0)
 S X="T",%DT="" D ^%DT,D^LRU S LRH(3)=Y,LRFLG=1
"RTN","LRAPMOD",31,0)
 G DEV^LRAPAUSR
"RTN","LRAPMOD",32,0)
TIUPRT ;Print from TIU 
"RTN","LRAPMOD",33,0)
 N LRPTR,LREL,LRDATA
"RTN","LRAPMOD",34,0)
 S (LRQUIT,LRCONT,LRPTR2)=0
"RTN","LRAPMOD",35,0)
 S LRDICS="AUSPCYEM" D ^LRAP G:'$D(Y) END
"RTN","LRAPMOD",36,0)
 W !!?15,LRO(68),!!?5,"Print All AP Reports for an Accession from TIU",!!
"RTN","LRAPMOD",37,0)
 D ACCYR^LRAPMRL
"RTN","LRAPMOD",38,0)
 I LRQUIT D END Q
"RTN","LRAPMOD",39,0)
 S LRAU=0
"RTN","LRAPMOD",40,0)
 I LRSS="AU" S LRAU=1
"RTN","LRAPMOD",41,0)
 D LOOKUP^LRAPUTL(.LRDATA,LRH(0),LRO(68),LRSS,LRAD,LRAA)
"RTN","LRAPMOD",42,0)
 Q:'LRDATA!(LRDATA=-1)
"RTN","LRAPMOD",43,0)
 S FLGMOD=1
"RTN","LRAPMOD",44,0)
 S LRDFN=LRDATA,LRI=LRDATA(1)
"RTN","LRAPMOD",45,0)
 S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPMOD",46,0)
 ;Check for release date
"RTN","LRAPMOD",47,0)
 I LRSS'="AU" S LREL=$$GET1^DIQ(LRSF,LRIENS,.11,"I")
"RTN","LRAPMOD",48,0)
 I LRSS="AU" S LREL=$$GET1^DIQ(63,LRDFN_",",14.7,"I")
"RTN","LRAPMOD",49,0)
 I 'LREL D
"RTN","LRAPMOD",50,0)
 .S DIR(0)="Y",DIR("B")="YES",DIR("A")="CONTINUE?"
"RTN","LRAPMOD",51,0)
 .S DIR("A",1)="Report not verified. Check for and print"
"RTN","LRAPMOD",52,0)
 .S DIR("A",2)="   previous versions?"
"RTN","LRAPMOD",53,0)
 .D ^DIR
"RTN","LRAPMOD",54,0)
 .I Y=0 S LRQUIT=1
"RTN","LRAPMOD",55,0)
 I LRQUIT D END Q
"RTN","LRAPMOD",56,0)
 I 'LREL D
"RTN","LRAPMOD",57,0)
 .D GETPREV
"RTN","LRAPMOD",58,0)
 .;No previous versions found, retrieve from LR?
"RTN","LRAPMOD",59,0)
 .I '+$G(LRPTR) D
"RTN","LRAPMOD",60,0)
 ..S DIR(0)="Y",DIR("B")="YES",DIR("A")="CONTINUE?"
"RTN","LRAPMOD",61,0)
 ..S DIR("A",1)="No previous versions found in TIU."
"RTN","LRAPMOD",62,0)
 ..S DIR("A",2)="   Print from LR?"
"RTN","LRAPMOD",63,0)
 ..D ^DIR
"RTN","LRAPMOD",64,0)
 ..I Y=0 S LRQUIT=1
"RTN","LRAPMOD",65,0)
 ..I Y=1 S LRCONT=1
"RTN","LRAPMOD",66,0)
 G:LRCONT GETP
"RTN","LRAPMOD",67,0)
 I LRQUIT D END Q
"RTN","LRAPMOD",68,0)
 ;Release date found, check TIU
"RTN","LRAPMOD",69,0)
 I LREL D
"RTN","LRAPMOD",70,0)
 .D TIUCHK^LRAPUTL(.LRPTR,LRDFN,LRSS,LRI)
"RTN","LRAPMOD",71,0)
 .I '+$G(LRPTR) D
"RTN","LRAPMOD",72,0)
 ..S DIR(0)="Y",DIR("B")="YES",DIR("A")="CONTINUE?"
"RTN","LRAPMOD",73,0)
 ..S DIR("A",1)="Report not found in TIU."
"RTN","LRAPMOD",74,0)
 ..S DIR("A",2)="   Print from LR?"
"RTN","LRAPMOD",75,0)
 ..D ^DIR
"RTN","LRAPMOD",76,0)
 ..I Y=0 S LRQUIT=1
"RTN","LRAPMOD",77,0)
 ..I Y=1 S LRCONT=1
"RTN","LRAPMOD",78,0)
 I LRQUIT D END Q
"RTN","LRAPMOD",79,0)
 G:LRCONT GETP
"RTN","LRAPMOD",80,0)
 ;Found in TIU, print from TIU
"RTN","LRAPMOD",81,0)
 I +$G(LRPTR) D
"RTN","LRAPMOD",82,0)
 .S LRPTR2=1
"RTN","LRAPMOD",83,0)
 .W !
"RTN","LRAPMOD",84,0)
 .S %ZIS="Q" D ^%ZIS
"RTN","LRAPMOD",85,0)
 .I POP W ! D END Q
"RTN","LRAPMOD",86,0)
 .I $D(IO("Q")) D  Q
"RTN","LRAPMOD",87,0)
 ..S ZTDESC="Print Anat Path Reports"
"RTN","LRAPMOD",88,0)
 ..S ZTSAVE("LR*")="",ZTRTN="PRTRPT^LRAPMOD"
"RTN","LRAPMOD",89,0)
 ..D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued, #",ZTSK W !
"RTN","LRAPMOD",90,0)
 ..K ZTSK,IO("Q") D HOME^%ZIS
"RTN","LRAPMOD",91,0)
 .D PRTRPT
"RTN","LRAPMOD",92,0)
 D ^%ZISC
"RTN","LRAPMOD",93,0)
 ;Allow print of LR even if stored in TIU
"RTN","LRAPMOD",94,0)
 I LRPTR2=1 D
"RTN","LRAPMOD",95,0)
 .S DIR(0)="Y",DIR("B")="YES",DIR("A")="CONTINUE?"
"RTN","LRAPMOD",96,0)
 .S DIR("A",1)="Print a copy from LR in addition to TIU print?"
"RTN","LRAPMOD",97,0)
 .D ^DIR
"RTN","LRAPMOD",98,0)
 .I Y=0 S LRQUIT=1
"RTN","LRAPMOD",99,0)
 .I Y=1 S LRCONT=1,LRPTR=0
"RTN","LRAPMOD",100,0)
 Q:LRQUIT
"RTN","LRAPMOD",101,0)
 G:LRCONT GETP
"RTN","LRAPMOD",102,0)
 Q
"RTN","LRAPMOD",103,0)
PRTRPT ;Print from TIU
"RTN","LRAPMOD",104,0)
 U IO
"RTN","LRAPMOD",105,0)
 F  D  Q:'LRPTR!(LRQUIT)
"RTN","LRAPMOD",106,0)
 .D MAIN^LRAPTIUP(LRPTR,0)
"RTN","LRAPMOD",107,0)
 .S LRPTR=$$GET1^DIQ(8925,LRPTR,1406,"I")
"RTN","LRAPMOD",108,0)
 Q
"RTN","LRAPMOD",109,0)
GETPREV ;
"RTN","LRAPMOD",110,0)
 I LRSS="AU" D
"RTN","LRAPMOD",111,0)
 .S LRROOT="^LR(LRDFN,101,""A"")",LRIENS=LRDFN_","
"RTN","LRAPMOD",112,0)
 .S LRFILE=63.101
"RTN","LRAPMOD",113,0)
 I LRSS'="AU" D
"RTN","LRAPMOD",114,0)
 .S LRROOT="^LR(LRDFN,LRSS,LRI,.05,""A"")"
"RTN","LRAPMOD",115,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPMOD",116,0)
 .S LRFILE=$S(LRSS="SP":63.19,LRSS="CY":63.47,LRSS="EM":63.49,1:"")
"RTN","LRAPMOD",117,0)
 S LRTREC=$O(@(LRROOT),-1)
"RTN","LRAPMOD",118,0)
 I LRFILE=""!(LRTREC="") S LRPTR=0 Q
"RTN","LRAPMOD",119,0)
 S LRIENS=LRTREC_","_LRIENS
"RTN","LRAPMOD",120,0)
 S LRPTR=+$$GET1^DIQ(LRFILE,LRIENS,1,"I")
"RTN","LRAPMOD",121,0)
 I '+$G(LRPTR) D
"RTN","LRAPMOD",122,0)
 .W $C(7),"Report not found in TIU",!
"RTN","LRAPMOD",123,0)
 .S LRQUIT=1
"RTN","LRAPMOD",124,0)
 Q
"RTN","LRAPMOD",125,0)
END ;
"RTN","LRAPMOD",126,0)
 D V^LRU
"RTN","LRAPMOD",127,0)
 Q
"RTN","LRAPMRL")
0^20^B65679955
"RTN","LRAPMRL",1,0)
LRAPMRL ;DALOI/WTY- AP MODIFY RELEASED REPORT;12/04/01
"RTN","LRAPMRL",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPMRL",3,0)
 ;
"RTN","LRAPMRL",4,0)
MAIN ;
"RTN","LRAPMRL",5,0)
 N LRQUIT,LRMSG,LREND,LRDATA,LRREL,LRAU,LREFPD,LRWM,LRCT,LRTMP,LRGMDF
"RTN","LRAPMRL",6,0)
 N LRFLD,LRDSC,LRCHG,LRXTMP,LRYTMP,LRIENS1,LRFILE,LRFLDA,LRAD1,LRIENS
"RTN","LRAPMRL",7,0)
 N LRORIEN,LRWPROOT,LRFDA,LRDA,LRFIELD,LRFILE1,LRIENS2,LRDT0,LRESCPT
"RTN","LRAPMRL",8,0)
 N LRQUIT1,LREDIAG,LRLOCK,LRNOTXT,LRORIEN
"RTN","LRAPMRL",9,0)
 S LRESCPT=0
"RTN","LRAPMRL",10,0)
 D TITLE
"RTN","LRAPMRL",11,0)
 I LRQUIT D END Q
"RTN","LRAPMRL",12,0)
 D NOTICE
"RTN","LRAPMRL",13,0)
 I LRQUIT D END Q
"RTN","LRAPMRL",14,0)
 D SECTION
"RTN","LRAPMRL",15,0)
 I LRQUIT D END Q
"RTN","LRAPMRL",16,0)
 D WHAT
"RTN","LRAPMRL",17,0)
 I LRQUIT D END Q
"RTN","LRAPMRL",18,0)
 D CPTCHK
"RTN","LRAPMRL",19,0)
 ;D SECTION
"RTN","LRAPMRL",20,0)
 I LRQUIT D END Q
"RTN","LRAPMRL",21,0)
 D ASK
"RTN","LRAPMRL",22,0)
 I LRQUIT D END Q
"RTN","LRAPMRL",23,0)
 D SETDR^LRAPMRL1
"RTN","LRAPMRL",24,0)
 D ACCYR
"RTN","LRAPMRL",25,0)
 I LRQUIT D END Q
"RTN","LRAPMRL",26,0)
 D ACCPN
"RTN","LRAPMRL",27,0)
 D END
"RTN","LRAPMRL",28,0)
 Q
"RTN","LRAPMRL",29,0)
ACCPN ;Prompt for accesion number or patient name
"RTN","LRAPMRL",30,0)
 F  D  Q:LREND
"RTN","LRAPMRL",31,0)
 .S (LRQUIT,LREND)=0
"RTN","LRAPMRL",32,0)
 .D CPTCHK
"RTN","LRAPMRL",33,0)
 .D LOOKUP^LRAPUTL(.LRDATA,LRH(0),LRO(68),LRSS,LRAD,LRAA)
"RTN","LRAPMRL",34,0)
 .Q:'LRDATA
"RTN","LRAPMRL",35,0)
 .I LRDATA=-1 S LREND=1 Q
"RTN","LRAPMRL",36,0)
 .S LRDFN=LRDATA,LRI=LRDATA(1)
"RTN","LRAPMRL",37,0)
 .S LRLOCK="^LR(LRDFN"_$S(LRAU:")",1:",LRSS,LRI)")
"RTN","LRAPMRL",38,0)
 .L +@(LRLOCK):5 I '$T D  Q
"RTN","LRAPMRL",39,0)
 ..S LRMSG="This record is locked by another user.  "
"RTN","LRAPMRL",40,0)
 ..S LRMSG=LRMSG_"Please try again later."
"RTN","LRAPMRL",41,0)
 ..D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPMRL",42,0)
 .S LRIENS=$S('LRAU:LRI_",",1:"")_LRDFN_","
"RTN","LRAPMRL",43,0)
 .D RELCHK^LRAPMRL1
"RTN","LRAPMRL",44,0)
 .I LRQUIT D UNLOCK Q
"RTN","LRAPMRL",45,0)
 .D RELEASE^LRAPMRL1
"RTN","LRAPMRL",46,0)
 .D QUEUPD^LRAPMRL1
"RTN","LRAPMRL",47,0)
 .D:LRCAPA C^LRAPSWK
"RTN","LRAPMRL",48,0)
 .D:'LREDIAG SETDR^LRAPMRL1,EDIT^LRAPMRL1
"RTN","LRAPMRL",49,0)
 .I LRQUIT D UNLOCK Q
"RTN","LRAPMRL",50,0)
 .I 'LRAU D
"RTN","LRAPMRL",51,0)
 ..F LRFLD=1,1.1,1.4,1.3 D  Q:LRQUIT
"RTN","LRAPMRL",52,0)
 ...Q:LREDIAG&(LRFLD'=1.4)
"RTN","LRAPMRL",53,0)
 ...Q:'LREDIAG&(LRFLD=1.4)
"RTN","LRAPMRL",54,0)
 ...Q:LRFLD=1.3&(LRSS'="SP")
"RTN","LRAPMRL",55,0)
 ...D ASK2 Q:LRQUIT!('LRGMDF)
"RTN","LRAPMRL",56,0)
 ...D SAVTXT
"RTN","LRAPMRL",57,0)
 ...K DR S DR=LRFLD
"RTN","LRAPMRL",58,0)
 ...D EDIT^LRAPMRL1
"RTN","LRAPMRL",59,0)
 ...D COMPARE Q:LRQUIT
"RTN","LRAPMRL",60,0)
 ...D AUDIT Q:LRQUIT
"RTN","LRAPMRL",61,0)
 ...D STORE
"RTN","LRAPMRL",62,0)
 .I LRAU,LREDIAG D
"RTN","LRAPMRL",63,0)
 ..S LRDSC="PATHOLOGICAL DIAGNOSIS"
"RTN","LRAPMRL",64,0)
 ..S LRFLD=32.3
"RTN","LRAPMRL",65,0)
 ..D SAVTXT
"RTN","LRAPMRL",66,0)
 ..K DR S DR=LRFLD
"RTN","LRAPMRL",67,0)
 ..D EDIT^LRAPMRL1
"RTN","LRAPMRL",68,0)
 ..D COMPARE
"RTN","LRAPMRL",69,0)
 .I $G(SEX)["F","SPCY"[LRSS D DEL^LRWOMEN
"RTN","LRAPMRL",70,0)
 .I LRQUIT D UNLOCK Q
"RTN","LRAPMRL",71,0)
 .I LREDIAG D UNLOCK Q
"RTN","LRAPMRL",72,0)
 .D SUPRPT
"RTN","LRAPMRL",73,0)
 .I LRQUIT1 D UNLOCK Q
"RTN","LRAPMRL",74,0)
 .D:LRESCPT CPTCODE^LRAPMRL1
"RTN","LRAPMRL",75,0)
 .D UNLOCK
"RTN","LRAPMRL",76,0)
 Q
"RTN","LRAPMRL",77,0)
TITLE ;Title
"RTN","LRAPMRL",78,0)
 S (LRQUIT,LRQUIT1)=0
"RTN","LRAPMRL",79,0)
 D CK^LRAP
"RTN","LRAPMRL",80,0)
 I Y=-1 S LRQUIT=1 Q
"RTN","LRAPMRL",81,0)
 W @IOF
"RTN","LRAPMRL",82,0)
 S LRMSG="Modify Released Pathology Reports"
"RTN","LRAPMRL",83,0)
 S LRMSG(1)=$$CJ^XLFSTR(LRMSG,IOM)
"RTN","LRAPMRL",84,0)
 S LRMSG(1,"F")="!!"
"RTN","LRAPMRL",85,0)
 S LRMSG(2)="",LRMSG(2,"F")="!"
"RTN","LRAPMRL",86,0)
 D EN^DDIOL(.LRMSG) K LRMSG
"RTN","LRAPMRL",87,0)
 Q
"RTN","LRAPMRL",88,0)
NOTICE ;Warn the user and allow an exit
"RTN","LRAPMRL",89,0)
 K LRMSG
"RTN","LRAPMRL",90,0)
 S LRMSG="NOTICE"
"RTN","LRAPMRL",91,0)
 S LRMSG(1)=$$CJ^XLFSTR(LRMSG,IOM),LRMSG(1,"F")="!!"
"RTN","LRAPMRL",92,0)
 S LRMSG(2)="",LRMSG(2,"F")="!"
"RTN","LRAPMRL",93,0)
 S LRMSG(3)=$C(7)_"This option allows modification of a verified/"
"RTN","LRAPMRL",94,0)
 S LRMSG(3)=LRMSG(3)_"released pathology report."
"RTN","LRAPMRL",95,0)
 S LRMSG(3,"F")="!?3"
"RTN","LRAPMRL",96,0)
 S LRMSG(4)="Continuing with this option will unrelease the report "
"RTN","LRAPMRL",97,0)
 S LRMSG(4)=LRMSG(4)_"and flag the report",LRMSG(4,"F")="!?3"
"RTN","LRAPMRL",98,0)
 S LRMSG(5)="as modified even if the data is unchanged.  It will "
"RTN","LRAPMRL",99,0)
 S LRMSG(5)=LRMSG(5)_"also be queued to the",LRMSG(5,"F")="!?3"
"RTN","LRAPMRL",100,0)
 S LRMSG(6)="final report queue so that it may be verified/released "
"RTN","LRAPMRL",101,0)
 S LRMSG(6)=LRMSG(6)_"again.",LRMSG(6,"F")="!?3"
"RTN","LRAPMRL",102,0)
 D EN^DDIOL(.LRMSG) K LRMSG
"RTN","LRAPMRL",103,0)
 W !!
"RTN","LRAPMRL",104,0)
 S DIR(0)="Y",DIR("A")="Do you wish to continue",DIR("B")="NO"
"RTN","LRAPMRL",105,0)
 D ^DIR
"RTN","LRAPMRL",106,0)
 S:Y<1 LRQUIT=1
"RTN","LRAPMRL",107,0)
 Q
"RTN","LRAPMRL",108,0)
WHAT ;What is to be edited
"RTN","LRAPMRL",109,0)
 W !
"RTN","LRAPMRL",110,0)
 K DIR
"RTN","LRAPMRL",111,0)
 ;Don't ask to Edit Diagnosis if initial entry of diagnosis is turned
"RTN","LRAPMRL",112,0)
 ;  off at data entry for SP, CY, EM's
"RTN","LRAPMRL",113,0)
 S LRASK=1,XASK=""
"RTN","LRAPMRL",114,0)
 I 'LRAU D
"RTN","LRAPMRL",115,0)
 .S X=$G(^LAB(69.9,1,11))
"RTN","LRAPMRL",116,0)
 .S XASK=$S(LRSS="SP":$P(X,"^",2),LRSS="CY":$P(X,"^",3),1:"")
"RTN","LRAPMRL",117,0)
 .S:XASK="" XASK=$S(LRSS="EM":$P(X,"^",4),1:"")
"RTN","LRAPMRL",118,0)
 .S LRASK=$$GET1^DIQ(69.9,1,XASK,"I")
"RTN","LRAPMRL",119,0)
 S:LRASK DIR(0)="S^1:Edit Report;2:Edit Diagnosis"
"RTN","LRAPMRL",120,0)
 S:LRASK DIR("A")="Enter selection",DIR("B")=1
"RTN","LRAPMRL",121,0)
 S:'LRASK DIR(0)="Y",DIR("B")="YES",DIR("A")="Edit Report?"
"RTN","LRAPMRL",122,0)
 D ^DIR
"RTN","LRAPMRL",123,0)
 I $D(DTOUT)!($D(DUOUT))!($D(DIRUT))!($D(DIROUT)) S LRQUIT=1 Q
"RTN","LRAPMRL",124,0)
 S:Y=0 LRQUIT=1
"RTN","LRAPMRL",125,0)
 Q:LRQUIT=1
"RTN","LRAPMRL",126,0)
 S LREDIAG=Y
"RTN","LRAPMRL",127,0)
 S LREDIAG=$S(LREDIAG=2:1,1:0)
"RTN","LRAPMRL",128,0)
 Q
"RTN","LRAPMRL",129,0)
CPTCHK ;Determine if CPT is activated
"RTN","LRAPMRL",130,0)
 Q:$T(ES^LRCAPES)=""
"RTN","LRAPMRL",131,0)
 S LRESCPT=$$ES^LRCAPES()
"RTN","LRAPMRL",132,0)
 Q
"RTN","LRAPMRL",133,0)
SECTION ;Choose Anatomic Pathology section (AU,SP,CY,EM)
"RTN","LRAPMRL",134,0)
 W !
"RTN","LRAPMRL",135,0)
 D ^LRAP
"RTN","LRAPMRL",136,0)
 I '$D(Y)!('$D(LRSS)) S LRQUIT=1 Q
"RTN","LRAPMRL",137,0)
 S:LRO(68)="EM" LRO(68)="ELECTRON MICROSCOPY"
"RTN","LRAPMRL",138,0)
 S LRAU=0            ; LRAU = 0 - Not Autopsy
"RTN","LRAPMRL",139,0)
 S:LRSS="AU" LRAU=1  ;      = 1 - Autosy
"RTN","LRAPMRL",140,0)
 I LRCAPA D @(LRSS_"^LRAPSWK")
"RTN","LRAPMRL",141,0)
 S LRMSG(1)=LRO(68)_" ("_LRABV_")",LRMSG(1,"F")="!?20"
"RTN","LRAPMRL",142,0)
 S LRMSG(2)="",LRMSG(2,"F")="!"
"RTN","LRAPMRL",143,0)
 D EN^DDIOL(.LRMSG) K LRMSG
"RTN","LRAPMRL",144,0)
 Q
"RTN","LRAPMRL",145,0)
ASK ;Ask etiology,function,procedure,disease,weights,measures
"RTN","LRAPMRL",146,0)
 I LREDIAG D  Q
"RTN","LRAPMRL",147,0)
 .S:'LRAU LREFPD=0
"RTN","LRAPMRL",148,0)
 .S:LRAU LRWM=0
"RTN","LRAPMRL",149,0)
 W !
"RTN","LRAPMRL",150,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","LRAPMRL",151,0)
 S DIR("A")="Edit etiology, function, procedure & disease"
"RTN","LRAPMRL",152,0)
 D ^DIR
"RTN","LRAPMRL",153,0)
 I Y="^" S LRQUIT=1 Q
"RTN","LRAPMRL",154,0)
 S LREFPD=$S(+Y:1,1:0)
"RTN","LRAPMRL",155,0)
 I LRAU D
"RTN","LRAPMRL",156,0)
 .W !
"RTN","LRAPMRL",157,0)
 .S DIR(0)="Y",DIR("B")="NO"
"RTN","LRAPMRL",158,0)
 .S DIR("A")="Edit weights and measures"
"RTN","LRAPMRL",159,0)
 .D ^DIR
"RTN","LRAPMRL",160,0)
 .I Y="^" S LRQUIT=1 Q
"RTN","LRAPMRL",161,0)
 .S LRWM=$S(+Y:1,1:0)
"RTN","LRAPMRL",162,0)
 Q
"RTN","LRAPMRL",163,0)
ACCYR ;Determine Accession Year
"RTN","LRAPMRL",164,0)
 D ACCYR^LRAPUTL(.LRAD1,LRH(0),LRAA,LRO(68))
"RTN","LRAPMRL",165,0)
 I LRAD1=-1 S LRQUIT=1 Q
"RTN","LRAPMRL",166,0)
 I LRAD1 S LRAD=$P(LRAD1,U),LRH(0)=$P(LRAD1,U,2)
"RTN","LRAPMRL",167,0)
 Q
"RTN","LRAPMRL",168,0)
ASK2 ;Ask about other fields
"RTN","LRAPMRL",169,0)
 S LRGMDF=0
"RTN","LRAPMRL",170,0)
 K LRDSC
"RTN","LRAPMRL",171,0)
 I LRFLD=1!(LRFLD=1.1) D
"RTN","LRAPMRL",172,0)
 .S:LRFLD=1 LRFLDA=7
"RTN","LRAPMRL",173,0)
 .S:LRFLD=1.1 LRFLDA=4
"RTN","LRAPMRL",174,0)
 .S LRDSC=$S(LRFLD=1:"GROSS",LRFLD=1.1:"MICROSCOPIC",1:"")
"RTN","LRAPMRL",175,0)
 .S LRDSC=LRDSC_" DESCRIPTION"
"RTN","LRAPMRL",176,0)
 S:LRFLD=1.4 LRDSC="DIAGNOSIS",LRFLDA=5
"RTN","LRAPMRL",177,0)
 S:LRFLD=1.3 LRDSC="FROZEN SECTION",LRFLDA=6
"RTN","LRAPMRL",178,0)
 I 'LREDIAG D
"RTN","LRAPMRL",179,0)
 .S DIR(0)="Y",DIR("B")="NO"
"RTN","LRAPMRL",180,0)
 .S DIR("A")="Edit "_LRDSC
"RTN","LRAPMRL",181,0)
 .D ^DIR
"RTN","LRAPMRL",182,0)
 .I Y="^" S LRQUIT=1 Q
"RTN","LRAPMRL",183,0)
 .S LRGMDF=$S(+Y:1,1:0)
"RTN","LRAPMRL",184,0)
 S:LREDIAG LRGMDF=1
"RTN","LRAPMRL",185,0)
 Q
"RTN","LRAPMRL",186,0)
SAVTXT ;Save word processing field text.
"RTN","LRAPMRL",187,0)
 S LRNOTXT=0
"RTN","LRAPMRL",188,0)
 K ^TMP("DIQ1",$J)
"RTN","LRAPMRL",189,0)
 S:'LRAU LRIENS=LRI_","_LRDFN_",",LRFILE=LRSF
"RTN","LRAPMRL",190,0)
 S:LRAU LRIENS=LRDFN_",",LRFILE=63
"RTN","LRAPMRL",191,0)
 Q:LRFLD=""
"RTN","LRAPMRL",192,0)
 S LRTMP=$$GET1^DIQ(LRFILE,LRIENS,LRFLD,"","^TMP(""DIQ1"",$J)")
"RTN","LRAPMRL",193,0)
 I LRTMP="" D
"RTN","LRAPMRL",194,0)
 .K LRMSG
"RTN","LRAPMRL",195,0)
 .S LRMSG(1)="There is no "_LRDSC_" text to modify."
"RTN","LRAPMRL",196,0)
 .S LRMSG(1,"F")="!!"
"RTN","LRAPMRL",197,0)
 .S LRMSG(2)="Report was released before entering text."
"RTN","LRAPMRL",198,0)
 .S LRMSG(2,"F")="!"
"RTN","LRAPMRL",199,0)
 .D EN^DDIOL(.LRMSG)
"RTN","LRAPMRL",200,0)
 .S LRNOTXT=1
"RTN","LRAPMRL",201,0)
 Q
"RTN","LRAPMRL",202,0)
COMPARE ;Compare report text
"RTN","LRAPMRL",203,0)
 S (LRCHG,LRQUIT,LRCT)=0
"RTN","LRAPMRL",204,0)
 S:'LRAU LRFILE="^LR(LRDFN,LRSS,LRI,LRFLD,"
"RTN","LRAPMRL",205,0)
 S:LRAU LRFILE="^LR(LRDFN,82,"
"RTN","LRAPMRL",206,0)
 I '$D(@(LRFILE_"0)")) D  Q
"RTN","LRAPMRL",207,0)
 .Q:LRNOTXT
"RTN","LRAPMRL",208,0)
 .S LRQUIT=1
"RTN","LRAPMRL",209,0)
 F  S LRCT=$O(@(LRFILE_"LRCT)")) Q:'LRCT  D
"RTN","LRAPMRL",210,0)
 .S LRXTMP=@(LRFILE_"LRCT,0)")
"RTN","LRAPMRL",211,0)
 .I '$D(^TMP("DIQ1",$J,LRCT)) S LRCHG=1 Q
"RTN","LRAPMRL",212,0)
 .S LRYTMP=^TMP("DIQ1",$J,LRCT)
"RTN","LRAPMRL",213,0)
 .I LRXTMP'=LRYTMP S LRCHG=1
"RTN","LRAPMRL",214,0)
 I 'LRCHG D
"RTN","LRAPMRL",215,0)
 .S LRCT=0 F  S LRCT=$O(^TMP("DIQ1",$J,LRCT)) Q:'LRCT  D
"RTN","LRAPMRL",216,0)
 ..I '$D(@(LRFILE_"LRCT,0)")) S LRCHG=1
"RTN","LRAPMRL",217,0)
 I 'LRCHG D  Q
"RTN","LRAPMRL",218,0)
 .D EN^DDIOL("No changes made to "_LRDSC_".","","!!")
"RTN","LRAPMRL",219,0)
 .W !
"RTN","LRAPMRL",220,0)
 .K ^TMP("DIQ1",$J)
"RTN","LRAPMRL",221,0)
 I LRCHG&(LRFLD=1.4!(LRFLD=32.3)) D  ;Indicate that the diagnosis
"RTN","LRAPMRL",222,0)
 .K LRFDA                            ;has been modified.
"RTN","LRAPMRL",223,0)
 .S:'LRAU LRFDA(LRSF,LRIENS,.172)=1
"RTN","LRAPMRL",224,0)
 .;KLL-CORRECT BUG WHERE LRSF IS NULL, REPLACE LRSF WITH 63
"RTN","LRAPMRL",225,0)
 .S:LRAU LRFDA(63,LRIENS,102.2)=1
"RTN","LRAPMRL",226,0)
 .;S:LRAU LRFDA(LRSF,LRIENS,102.2)=1
"RTN","LRAPMRL",227,0)
 .D FILE^DIE("","LRFDA")
"RTN","LRAPMRL",228,0)
 Q
"RTN","LRAPMRL",229,0)
AUDIT ;
"RTN","LRAPMRL",230,0)
 N LRNTIME
"RTN","LRAPMRL",231,0)
 K LRFDA
"RTN","LRAPMRL",232,0)
 D NOW^%DTC S LRNTIME=%
"RTN","LRAPMRL",233,0)
 S LRIENS1="+1,"_LRIENS
"RTN","LRAPMRL",234,0)
 S LRFILE=+$$GET1^DID(LRSF,LRFLDA,"","SPECIFIER")
"RTN","LRAPMRL",235,0)
 I LRFILE="" S LRQUIT=1 Q
"RTN","LRAPMRL",236,0)
 S LRFDA(1,LRFILE,LRIENS1,.01)=LRNTIME
"RTN","LRAPMRL",237,0)
 S LRFDA(1,LRFILE,LRIENS1,.02)=DUZ
"RTN","LRAPMRL",238,0)
 D UPDATE^DIE("","LRFDA(1)","LRORIEN")
"RTN","LRAPMRL",239,0)
 Q
"RTN","LRAPMRL",240,0)
STORE ;
"RTN","LRAPMRL",241,0)
 K LRIENS1
"RTN","LRAPMRL",242,0)
 S LRIENS1=LRORIEN(1)_","_LRIENS
"RTN","LRAPMRL",243,0)
 S LRWPROOT="^TMP(""DIQ1"",$J)"
"RTN","LRAPMRL",244,0)
 D WP^DIE(LRFILE,LRIENS1,1,"",LRWPROOT)
"RTN","LRAPMRL",245,0)
 K ^TMP("DIQ1",$J)
"RTN","LRAPMRL",246,0)
 Q
"RTN","LRAPMRL",247,0)
SUPRPT ;Supplementary Report
"RTN","LRAPMRL",248,0)
 K DIR
"RTN","LRAPMRL",249,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","LRAPMRL",250,0)
 S DIR("A")="Edit SUPPLEMENTARY REPORTS"
"RTN","LRAPMRL",251,0)
 D ^DIR
"RTN","LRAPMRL",252,0)
 I Y="^" S LRQUIT1=1 Q
"RTN","LRAPMRL",253,0)
 Q:Y<1
"RTN","LRAPMRL",254,0)
 N LRX,LRRLS,LRA,LRFLG,LRNOW
"RTN","LRAPMRL",255,0)
 D GETRPT^LRAPDSR Q:LRQUIT
"RTN","LRAPMRL",256,0)
 S LRRLS=1,LRRLS1=0
"RTN","LRAPMRL",257,0)
 D COPY^LRAPDSR Q:LRQUIT
"RTN","LRAPMRL",258,0)
 D RPT^LRAPDSR Q:LRQUIT
"RTN","LRAPMRL",259,0)
 S Y=LRDA
"RTN","LRAPMRL",260,0)
 D RELEAS2^LRAPDSR
"RTN","LRAPMRL",261,0)
 D COMPARE^LRAPDSR Q:LRQUIT
"RTN","LRAPMRL",262,0)
 D UNRELEAS^LRAPDSR
"RTN","LRAPMRL",263,0)
 D UPDATE^LRAPDSR Q:LRQUIT
"RTN","LRAPMRL",264,0)
 D STORE^LRAPDSR
"RTN","LRAPMRL",265,0)
 Q
"RTN","LRAPMRL",266,0)
UNLOCK ;Unlock the record
"RTN","LRAPMRL",267,0)
 L -@(LRLOCK)
"RTN","LRAPMRL",268,0)
 Q
"RTN","LRAPMRL",269,0)
END ;Clean-up variables and quit
"RTN","LRAPMRL",270,0)
 K ^TMP("LRAPBR",$J),^TMP("TIUP",$J)
"RTN","LRAPMRL",271,0)
 D CLEAN^DILF
"RTN","LRAPMRL",272,0)
 D:$T(CLEAN^LRCAPES)'="" CLEAN^LRCAPES
"RTN","LRAPMRL",273,0)
 D V^LRU
"RTN","LRAPMRL",274,0)
 Q
"RTN","LRAPMRL1")
0^21^B15484610
"RTN","LRAPMRL1",1,0)
LRAPMRL1 ;DALOI/WTY/KLL- AP MODIFY RELEASED REPORT CONT'D;12/04/01
"RTN","LRAPMRL1",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPMRL1",3,0)
 ;
"RTN","LRAPMRL1",4,0)
 Q
"RTN","LRAPMRL1",5,0)
RELCHK ;Perform series of checks
"RTN","LRAPMRL1",6,0)
 S LRQUIT=0
"RTN","LRAPMRL1",7,0)
 I LRAU,$G(^LR(LRDFN,"AU"))="" D  Q
"RTN","LRAPMRL1",8,0)
 .S LRMSG="No information found for this accession in the "
"RTN","LRAPMRL1",9,0)
 .S LRMSG=LRMSG_"LAB DATA file (#63)."
"RTN","LRAPMRL1",10,0)
 .D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPMRL1",11,0)
 .S LRQUIT=1
"RTN","LRAPMRL1",12,0)
 Q:LRQUIT
"RTN","LRAPMRL1",13,0)
 K LRREL
"RTN","LRAPMRL1",14,0)
 D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS,$G(LRI))
"RTN","LRAPMRL1",15,0)
 I 'LRREL(1) D
"RTN","LRAPMRL1",16,0)
 .Q:'LRAU&($G(LRREL(3)))
"RTN","LRAPMRL1",17,0)
 .;KLL-SKIP THIS MSG IF AU RPT COMP DATE IS SET
"RTN","LRAPMRL1",18,0)
 .S RPCOMDT=$$GET1^DIQ(63,LRDFN,13,"I")
"RTN","LRAPMRL1",19,0)
 .Q:LRAU&($G(RPCOMDT))
"RTN","LRAPMRL1",20,0)
 .S LRMSG=$C(7)_"Report has not been released.  Do not use this "
"RTN","LRAPMRL1",21,0)
 .S LRMSG=LRMSG_"option."
"RTN","LRAPMRL1",22,0)
 .D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPMRL1",23,0)
 .S LRQUIT=1
"RTN","LRAPMRL1",24,0)
 Q
"RTN","LRAPMRL1",25,0)
RELEASE ;Unrelease report
"RTN","LRAPMRL1",26,0)
 N LRNTIME
"RTN","LRAPMRL1",27,0)
 D NOW^%DTC S LRNTIME=%
"RTN","LRAPMRL1",28,0)
 K LRFDA
"RTN","LRAPMRL1",29,0)
 I 'LRAU D
"RTN","LRAPMRL1",30,0)
 .I '$G(LRREL(3)) S LRFDA(LRSF,LRIENS,.15)=LRREL(1)
"RTN","LRAPMRL1",31,0)
 .S LRFDA(LRSF,LRIENS,.11)="@"
"RTN","LRAPMRL1",32,0)
 .S LRFDA(LRSF,LRIENS,.13)="@"
"RTN","LRAPMRL1",33,0)
 .S LRFDA(LRSF,LRIENS,.17)=LRNTIME
"RTN","LRAPMRL1",34,0)
 .S LRFDA(LRSF,LRIENS,.171)=DUZ
"RTN","LRAPMRL1",35,0)
 I LRAU D
"RTN","LRAPMRL1",36,0)
 .S LRFDA(63,LRIENS,14.7)="@"
"RTN","LRAPMRL1",37,0)
 .S LRFDA(63,LRIENS,14.8)="@"
"RTN","LRAPMRL1",38,0)
 .;KLL-ONLY IF REPT COMP DATE IS SET,OK TO MARK AS MODIFIED
"RTN","LRAPMRL1",39,0)
 .S RPCOMDT=$$GET1^DIQ(63,LRIENS,13,"I")
"RTN","LRAPMRL1",40,0)
 .I RPCOMDT D
"RTN","LRAPMRL1",41,0)
 ..S LRFDA(63,LRIENS,102)=LRNTIME
"RTN","LRAPMRL1",42,0)
 ..S LRFDA(63,LRIENS,102.1)=DUZ
"RTN","LRAPMRL1",43,0)
 D FILE^DIE("","LRFDA")
"RTN","LRAPMRL1",44,0)
 Q
"RTN","LRAPMRL1",45,0)
QUEUPD ;Update the final report print queue
"RTN","LRAPMRL1",46,0)
 I '$D(^LRO(69.2,LRAA,2,LRAN,0)) D
"RTN","LRAPMRL1",47,0)
 .K LRFDA
"RTN","LRAPMRL1",48,0)
 .L +^LRO(69.2,LRAA,2):5 I '$T D  Q
"RTN","LRAPMRL1",49,0)
 ..S MSG(1)="The final reports queue is in use by another person.  "
"RTN","LRAPMRL1",50,0)
 ..S MSG(1,"F")="!!"
"RTN","LRAPMRL1",51,0)
 ..S MSG(2)="You will need to add this accession to the queue later."
"RTN","LRAPMRL1",52,0)
 ..D EN^DDIOL(.MSG) K MSG
"RTN","LRAPMRL1",53,0)
 .S LRIENS="+1,"_LRAA_","
"RTN","LRAPMRL1",54,0)
 .S LRFDA(69.23,LRIENS,.01)=LRDFN
"RTN","LRAPMRL1",55,0)
 .S LRFDA(69.23,LRIENS,1)=LRI
"RTN","LRAPMRL1",56,0)
 .S LRFDA(69.23,LRIENS,2)=LRH(0)
"RTN","LRAPMRL1",57,0)
 .S LRORIEN(1)=LRAN
"RTN","LRAPMRL1",58,0)
 .D UPDATE^DIE("","LRFDA","LRORIEN")
"RTN","LRAPMRL1",59,0)
 .L -^LRO(69.2,LRAA,2)
"RTN","LRAPMRL1",60,0)
 Q
"RTN","LRAPMRL1",61,0)
EDIT ;
"RTN","LRAPMRL1",62,0)
 W !
"RTN","LRAPMRL1",63,0)
 I 'LRAU D
"RTN","LRAPMRL1",64,0)
 .S DA=LRI,DA(1)=LRDFN,DIE="^LR("_LRDFN_","""_LRSS_""","
"RTN","LRAPMRL1",65,0)
 S:LRAU DIE="^LR(",DA=LRDFN
"RTN","LRAPMRL1",66,0)
 D ^DIE
"RTN","LRAPMRL1",67,0)
 S:$D(Y) LRQUIT=1
"RTN","LRAPMRL1",68,0)
 S:$G(DTOUT) LRQUIT=1
"RTN","LRAPMRL1",69,0)
 Q
"RTN","LRAPMRL1",70,0)
SETDR ;Set the DR string
"RTN","LRAPMRL1",71,0)
 I LRAU D
"RTN","LRAPMRL1",72,0)
 .K DR
"RTN","LRAPMRL1",73,0)
 .S DR="13;13.01///^S X=LRWHO;32.1;99;11;14.1;14.5;14.6;12.1;"
"RTN","LRAPMRL1",74,0)
 .S DR=DR_"13.5;13.6;13.8;32;80;"
"RTN","LRAPMRL1",75,0)
 .S:LRWM DR=DR_"16:24;26:31;25;31.1;31.4;25.1;25.9"
"RTN","LRAPMRL1",76,0)
 .S DR(2,63.2)=".01;I 'LREFPD S Y=4;1;1.5;3;4;5"
"RTN","LRAPMRL1",77,0)
 .S DR(3,63.21)=".01",DR(3,63.22)=".01;I 'LREFPD S Y=0;1"
"RTN","LRAPMRL1",78,0)
 .S DR(3,63.24)=".01;S:'$P(^LAB(61.5,X,0),U,3) Y=0;.02"
"RTN","LRAPMRL1",79,0)
 .S DR(4,63.23)=".01"
"RTN","LRAPMRL1",80,0)
 I 'LRAU D
"RTN","LRAPMRL1",81,0)
 .S LRV=+$P($G(^LRO(69.2,LRAA,0)),U,10)  ;Ask TC codes?
"RTN","LRAPMRL1",82,0)
 .K DR
"RTN","LRAPMRL1",83,0)
 .S DR=".08;.07;.011;.012;.013;.014;.015;.016;.1;.02;.021;.99;.97;"
"RTN","LRAPMRL1",84,0)
 .S DR=DR_"10;80;.09///^S X=LRWHO;.03"
"RTN","LRAPMRL1",85,0)
 .I LRSS="SP" D
"RTN","LRAPMRL1",86,0)
 ..S DR(2,63.12)=".01;S LR(8)=$P(^LAB(61,X,0),U,4);S:'LR(8) Y=4;2;4;"
"RTN","LRAPMRL1",87,0)
 ..S DR(2,63.12)=DR(2,63.12)_"I 'LREFPD S Y=5;1;1.5;3;5"
"RTN","LRAPMRL1",88,0)
 ..S DR(2,63.812)=".01"
"RTN","LRAPMRL1",89,0)
 ..S DR(3,63.16)=".01;I 'LREFPD S Y=0;1"
"RTN","LRAPMRL1",90,0)
 ..S DR(3,63.82)=".01;D R^LRAPD;.02"
"RTN","LRAPMRL1",91,0)
 .I LRSS="CY" D
"RTN","LRAPMRL1",92,0)
 ..S DR(2,63.902)=".01;.02"
"RTN","LRAPMRL1",93,0)
 ..S DR(2,63.912)=".01;S LR(8)=$P(^LAB(61,X,0),U,4);S:'LR(8) Y=4;2;4;"
"RTN","LRAPMRL1",94,0)
 ..S DR(2,63.912)=DR(2,63.912)_"I 'LREFPD S Y=5;1;1.5;3;5"
"RTN","LRAPMRL1",95,0)
 ..S DR(3,63.916)=".01;I 'LREFPD S Y=0;1"
"RTN","LRAPMRL1",96,0)
 ..S DR(3,63.982)=".01;D R^LRAPD;.02"
"RTN","LRAPMRL1",97,0)
 .I LRSS="EM" D
"RTN","LRAPMRL1",98,0)
 ..S DR(2,63.202)=".01"
"RTN","LRAPMRL1",99,0)
 ..S DR(2,63.212)=".01;S LR(8)=$P(^LAB(61,X,0),U,4);S:'LR(8) Y=4;2;4;"
"RTN","LRAPMRL1",100,0)
 ..S DR(2,63.212)=DR(2,63.212)_"I 'LREFPD S Y=5;1;1.5;3;5"
"RTN","LRAPMRL1",101,0)
 ..S DR(3,63.216)=".01;I 'LREFPD S Y=0;1"
"RTN","LRAPMRL1",102,0)
 ..S DR(3,63.282)=".01;S:'$P(^LAB(61.5,X,0),U,3) Y=0;.02"
"RTN","LRAPMRL1",103,0)
 Q
"RTN","LRAPMRL1",104,0)
CPTCODE ;Enter CPT codes
"RTN","LRAPMRL1",105,0)
 K DIR
"RTN","LRAPMRL1",106,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","LRAPMRL1",107,0)
 S DIR("A")="Enter CPT CODING"
"RTN","LRAPMRL1",108,0)
 D ^DIR
"RTN","LRAPMRL1",109,0)
 I Y="^"!(Y<1) S LRQUIT=1 Q
"RTN","LRAPMRL1",110,0)
 N LRPRO
"RTN","LRAPMRL1",111,0)
 ;SET PROVIDER=CURRENT USER, ALLOW UPDATES
"RTN","LRAPMRL1",112,0)
 S LRPRO=DUZ
"RTN","LRAPMRL1",113,0)
 D PROVIDR^LRAPUTL
"RTN","LRAPMRL1",114,0)
 Q:LRQUIT
"RTN","LRAPMRL1",115,0)
 D CPT^LRCAPES(LRAA,LRAD,LRAN,LRPRO)
"RTN","LRAPMRL1",116,0)
 Q
"RTN","LRAPMV")
0^50^B13721590
"RTN","LRAPMV",1,0)
LRAPMV ;AVAMC/REG/CYM - MOVE AP ACCESSION ;4/1/98  11:53 ;
"RTN","LRAPMV",2,0)
 ;;5.2;LAB SERVICE;**72,231,259**;Sep 27, 1994
"RTN","LRAPMV",3,0)
 W !!?17,"Move an accession from one patient to another"
"RTN","LRAPMV",4,0)
 ;Add Quit to ensure this option does not execute
"RTN","LRAPMV",5,0)
 W !!?18,"*** THIS OPTION IS NO LONGER AVAILABLE ***"
"RTN","LRAPMV",6,0)
 Q
"RTN","LRAPMV",7,0)
 S LRDICS="SPCYEM" D ^LRAP G:'$D(Y) END D XR^LRU
"RTN","LRAPMV",8,0)
 W !!,"Accession Year: ",LRH(0)," " S %=1 D YN^LRU G:%<1 END I %=2 S %DT="AE",%DT(0)="-N",%DT("A")="Enter YEAR: " D ^%DT K %DT G:Y<1 END S LRAD=$E(Y,1,3)_"0000",LRH(0)=$E(Y,1,3)+1700
"RTN","LRAPMV",9,0)
 I '$O(^LRO(68,LRAA,1,LRAD,1,0)) W $C(7),!!,"NO ",LRO(68)," ACCESSIONS IN FILE FOR ",LRH(0),!! Q
"RTN","LRAPMV",10,0)
W K X,Y,LR("CK") R !!,"Move Accession Number: ",LRAN:DTIME G:LRAN=""!(LRAN[U) END I LRAN'?1N.N!($E(LRAN)=0) W $C(7),!,"Enter a number, no leading zero's" G W
"RTN","LRAPMV",11,0)
 D REST G W
"RTN","LRAPMV",12,0)
REST W "  for ",LRH(0) I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) W $C(7),!!,LRO(68)," Accession # ",LRAN," for ",LRH(0)," not in ACCESSION file",!! Q
"RTN","LRAPMV",13,0)
 S X=^LRO(68,LRAA,1,LRAD,1,LRAN,0),LRDFN=+X Q:'$D(^LR(LRDFN,0))  S X=^(0) D ^LRUP
"RTN","LRAPMV",14,0)
 W !,LRP,"  ID: ",SSN,!,"File: ",$P($G(^DIC(+P("F"),0)),U)
"RTN","LRAPMV",15,0)
 S LRI=+$P($G(^LRO(68,LRAA,1,LRAD,1,LRAN,3)),"^",5) I '$D(^LR(LRDFN,LRSS,LRI,0)) W $C(7),!,"Inverse date missing or incorrect in Accession Area file for",!,LRAA(1),"  Year: ",$E(LRAD,2,3),"  Accession: ",LRAN Q
"RTN","LRAPMV",16,0)
 S DIE="^LR(LRDFN,LRSS,",DA=LRI D CK^LRU Q:$D(LR("CK"))  S LRO=LRDFN
"RTN","LRAPMV",17,0)
 W !,"Move accession to " D ^LRDPA
"RTN","LRAPMV",18,0)
 I Y=-1 D FRE^LRU Q
"RTN","LRAPMV",19,0)
 W !,"File: ",$P($G(^DIC(+LRDPF,0)),U)
"RTN","LRAPMV",20,0)
 I LRO=LRDFN W $C(7),!,"No need to move accession to the same patient" D FRE^LRU Q
"RTN","LRAPMV",21,0)
 I $D(^LR(LRDFN,LRSS,LRI)) W $C(7),!,LRP,"already has an accession with the same internal file number." D FRE^LRU Q
"RTN","LRAPMV",22,0)
 K DIR W $C(7),! S DIR(0)="YO",DIR("A")=" OK TO MOVE  YES/NO// ",DIR("B")="NO"
"RTN","LRAPMV",23,0)
 S DIR("?")="Answer YES if this accession is to be moved to a new patient"
"RTN","LRAPMV",24,0)
 D ^DIR I Y'=1 D FRE^LRU K DIR Q
"RTN","LRAPMV",25,0)
 S:'$D(^LR(LRDFN,LRSS,0)) ^(0)="^"_LRSF_"DA^^"
"RTN","LRAPMV",26,0)
 S %X="^LR(LRO,LRSS,LRI,",%Y="^LR(LRDFN,LRSS,LRI," D %XY^%RCR S $P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),"^")=LRDFN
"RTN","LRAPMV",27,0)
 ; The following line send notification to WHP that an accession has been moved. ; cym 4/5/1999
"RTN","LRAPMV",28,0)
 I "SPCY"[LRSS D MOVE^LRWOMEN
"RTN","LRAPMV",29,0)
 K ^LR(LRO,LRSS,LRI) S X=^LR(LRO,LRSS,0),X(1)=$O(^(0)),^(0)=$P(X,"^",1,2)_"^"_X(1)_"^"_($P(X,"^",4)-1)
"RTN","LRAPMV",30,0)
 S X=^LR(LRDFN,LRSS,0),^(0)=$P(X,"^",1,2)_"^"_LRI_"^"_($P(X,"^",4)+1),X=+$P(^LR(LRDFN,LRSS,LRI,0),"^",10),^LR(LRXR,X,LRDFN,LRI)="",^LR(LRXREF,$E(LRAD,1,3),LRABV,LRAN,LRDFN,LRI)=""
"RTN","LRAPMV",31,0)
 K ^LR(LRXR,X,LRO,LRI),^LR(LRXREF,$E(LRAD,1,3),LRABV,LRAN,LRO,LRI)
"RTN","LRAPMV",32,0)
 ; Following code updates the AP report queue
"RTN","LRAPMV",33,0)
 S (LRFINAL,LRNODE)=""
"RTN","LRAPMV",34,0)
 I "SPEMCY"[LRSS D
"RTN","LRAPMV",35,0)
 . S LRNODE=^LR(LRDFN,LRSS,LRI,0)
"RTN","LRAPMV",36,0)
 . Q:LRNODE']""  I $P(LRNODE,U,3)]"" S LRFINAL=1
"RTN","LRAPMV",37,0)
 I LRFINAL=1 D
"RTN","LRAPMV",38,0)
 . Q:$P($G(^LRO(69.2,LRAA,2,LRAN,0)),U)=LRDFN
"RTN","LRAPMV",39,0)
 . I $P($G(^LRO(69.2,LRAA,2,LRAN,0)),U)=LRO D
"RTN","LRAPMV",40,0)
 .. S DIK="^LRO(69.2,LRAA,2,",DA=LRAN D ^DIK
"RTN","LRAPMV",41,0)
 . S FDAIEN(1)=LRAN
"RTN","LRAPMV",42,0)
 . S FDA(1,69.23,"+1,"_+LRAA_",",.01)=LRDFN
"RTN","LRAPMV",43,0)
 . S FDA(1,69.23,"+1,"_+LRAA_",",1)=LRI
"RTN","LRAPMV",44,0)
 . D UPDATE^DIE("","FDA(1)","FDAIEN")
"RTN","LRAPMV",45,0)
 I LRFINAL="" D
"RTN","LRAPMV",46,0)
 . Q:$P($G(^LRO(69.2,LRAA,1,LRAN,0)),U)=LRDFN
"RTN","LRAPMV",47,0)
 . I $P($G(^LRO(69.2,LRAA,1,LRAN,0)),U)=LRO D
"RTN","LRAPMV",48,0)
 .. S DIK="^LRO(69.2,LRAA,1,",DA=LRAN D ^DIK
"RTN","LRAPMV",49,0)
 . S FDAIEN(1)=LRAN
"RTN","LRAPMV",50,0)
 . S FDA(1,69.21,"+1,"_+LRAA_",",.01)=LRDFN
"RTN","LRAPMV",51,0)
 . S FDA(1,69.21,"+1,"_+LRAA_",",1)=LRI
"RTN","LRAPMV",52,0)
 . D UPDATE^DIE("","FDA(1)","FDAIEN")
"RTN","LRAPMV",53,0)
 D FRE^LRU Q
"RTN","LRAPMV",54,0)
 ;
"RTN","LRAPMV",55,0)
END K FDAIEN,FDA,LRFINAL,LRNODE D V^LRU Q
"RTN","LRAPP")
0^22^B6044065
"RTN","LRAPP",1,0)
LRAPP ;AVAMC/REG/KLL - AP PRINT ;10/18/01
"RTN","LRAPP",2,0)
 ;;5.2;LAB SERVICE;**72,259**;Sep 27, 1994
"RTN","LRAPP",3,0)
 N LRSF515
"RTN","LRAPP",4,0)
 S LRSF515=1
"RTN","LRAPP",5,0)
 D @LRAPX(0),END
"RTN","LRAPP",6,0)
 Q
"RTN","LRAPP",7,0)
 ;
"RTN","LRAPP",8,0)
P ;Print All On Queue
"RTN","LRAPP",9,0)
 N LRFOC S LRFOC=0
"RTN","LRAPP",10,0)
 D A G:'$D(Y) END
"RTN","LRAPP",11,0)
 S LRAPX=4
"RTN","LRAPP",12,0)
 I LRSS'="AU",X=2 D FOC
"RTN","LRAPP",13,0)
 I LRSS="AU",X=1 D FOC
"RTN","LRAPP",14,0)
 G LRAPP
"RTN","LRAPP",15,0)
D ;Delete Print Queue
"RTN","LRAPP",16,0)
 D A G:'$D(Y) END
"RTN","LRAPP",17,0)
 S LRAPX=2
"RTN","LRAPP",18,0)
 G LRAPP
"RTN","LRAPP",19,0)
S ;Print Single Report
"RTN","LRAPP",20,0)
 N LRFOC S LRFOC=0
"RTN","LRAPP",21,0)
 D A G:'$D(Y) END
"RTN","LRAPP",22,0)
 S LRAPX=3
"RTN","LRAPP",23,0)
 I LRSS'="AU",X=2 D FOC
"RTN","LRAPP",24,0)
 I LRSS="AU",X=1 D FOC
"RTN","LRAPP",25,0)
 G LRAPP
"RTN","LRAPP",26,0)
N ;Add Pt To Print Queue
"RTN","LRAPP",27,0)
 D A G:'$D(Y) END
"RTN","LRAPP",28,0)
 S LRAPX=1
"RTN","LRAPP",29,0)
 G LRAPP
"RTN","LRAPP",30,0)
T ;AP Accessions By Date
"RTN","LRAPP",31,0)
 D ^LRAP G:'$D(Y) END
"RTN","LRAPP",32,0)
 D ^LRUPAD,END
"RTN","LRAPP",33,0)
 Q
"RTN","LRAPP",34,0)
B ;AP Accessions By Number
"RTN","LRAPP",35,0)
 D ^LRAP G:'$D(Y) END
"RTN","LRAPP",36,0)
 D ^LRUPA,END
"RTN","LRAPP",37,0)
 Q
"RTN","LRAPP",38,0)
A ;
"RTN","LRAPP",39,0)
 W ! D ^LRAP
"RTN","LRAPP",40,0)
 G:'$D(Y) END
"RTN","LRAPP",41,0)
 I LRSS="AU" D PS Q
"RTN","LRAPP",42,0)
C ;Path Reports (SP,CY,EM)
"RTN","LRAPP",43,0)
 W !!?16,"1. Preliminary reports",!?16,"2. Final",?31,"reports"
"RTN","LRAPP",44,0)
 R !,"Select 1 or 2 : ",X:DTIME
"RTN","LRAPP",45,0)
 G:X=""!(X[U) END
"RTN","LRAPP",46,0)
 I X<1!(X>2) D  G C
"RTN","LRAPP",47,0)
 .W $C(7),!!,"Enter '1' for preliminary reports or '2' for final "
"RTN","LRAPP",48,0)
 .W "reports"
"RTN","LRAPP",49,0)
 S LRAPX(0)=$S(X=1:"^LRSPT",1:"^LRSPRPT")
"RTN","LRAPP",50,0)
 Q
"RTN","LRAPP",51,0)
PS ;Autopsy Reports
"RTN","LRAPP",52,0)
 W !!?15,"1. Autopsy protocols"
"RTN","LRAPP",53,0)
 W !?15,"2. Autopsy supplementary reports",!,"Select 1 or 2: "
"RTN","LRAPP",54,0)
 R X:DTIME G:X=""!(X[U) END
"RTN","LRAPP",55,0)
 I X<1!(X>2) D  G PS
"RTN","LRAPP",56,0)
 .W $C(7),!!,"Enter '1' for autopsy protocols or '2' for autopsy "
"RTN","LRAPP",57,0)
 .W "supplementary reports"
"RTN","LRAPP",58,0)
 S LRAPX(0)=$S(X=1:"^LRAURPT",1:"^LRAPAUSR")
"RTN","LRAPP",59,0)
 Q
"RTN","LRAPP",60,0)
FOC ;Final Office Copy
"RTN","LRAPP",61,0)
 W !
"RTN","LRAPP",62,0)
 K DIR
"RTN","LRAPP",63,0)
 S DIR(0)="Y",DIR("A")="Is this a final office copy"
"RTN","LRAPP",64,0)
 S DIR("B")="YES"
"RTN","LRAPP",65,0)
 S DIR("?",1)="SNOMED codes no longer appear on the report.  The final"
"RTN","LRAPP",66,0)
 S DIR("?",1)=DIR("?",1)_" office copy prints"
"RTN","LRAPP",67,0)
 S DIR("?")="these codes on a separate page.  Enter 'Yes' to include "
"RTN","LRAPP",68,0)
 S DIR("?")=DIR("?")_"this page."
"RTN","LRAPP",69,0)
 D ^DIR
"RTN","LRAPP",70,0)
 I Y S LRFOC=1
"RTN","LRAPP",71,0)
 Q
"RTN","LRAPP",72,0)
END D V^LRU
"RTN","LRAPP",73,0)
 Q
"RTN","LRAPPF1")
0^23^B17831632
"RTN","LRAPPF1",1,0)
LRAPPF1 ;AVAMC/REG/WTY - ANAT PATH FILE PRINT BY PT ;10/16/01
"RTN","LRAPPF1",2,0)
 ;;5.2;LAB SERVICE;**72,173,201,259**;Sep 27, 1994
"RTN","LRAPPF1",3,0)
 ;
"RTN","LRAPPF1",4,0)
 ;Reference to ^DIC supported by IA #916
"RTN","LRAPPF1",5,0)
 ;
"RTN","LRAPPF1",6,0)
 S F=0 F  S F=$O(^TMP($J,F)) Q:'F!(LR("Q"))  D
"RTN","LRAPPF1",7,0)
 .S F(1)=$P(^DIC(F,0),"^"),F(2)=^DIC(F,0,"GL")
"RTN","LRAPPF1",8,0)
 .K LR("F") D H S LR("F")=1 D W
"RTN","LRAPPF1",9,0)
 Q:LR("Q")
"RTN","LRAPPF1",10,0)
 D ^LRAPPF2
"RTN","LRAPPF1",11,0)
 Q
"RTN","LRAPPF1",12,0)
W S W=0 F LRB=0:0 S W=$O(^TMP($J,F,W)) Q:W=""!(LR("Q"))  D LR
"RTN","LRAPPF1",13,0)
 Q
"RTN","LRAPPF1",14,0)
LR F LRDFN=0:0 S LRDFN=$O(^TMP($J,F,W,LRDFN)) Q:'LRDFN!(LR("Q"))  D NM
"RTN","LRAPPF1",15,0)
 Q
"RTN","LRAPPF1",16,0)
NM S X=^LR(LRDFN,0),LRDPF=$P(X,U,2),N=$P(X,"^",3),N=@(F(2)_N_",0)")
"RTN","LRAPPF1",17,0)
 S LRP=$P(N,"^"),SSN=$P(N,"^",9),Y=$P(N,"^",3)
"RTN","LRAPPF1",18,0)
 D D^LRU,SSN^LRU S DOB=$S(Y'[1700:Y,1:"")
"RTN","LRAPPF1",19,0)
 D:$Y>(IOSL-4) H Q:LR("Q")
"RTN","LRAPPF1",20,0)
 W !!,LRP,?31,SSN W:$L(DOB) ?51,"BORN: ",DOB
"RTN","LRAPPF1",21,0)
 S LRI=0 F  S LRI=$O(^TMP($J,F,W,LRDFN,LRI)) Q:'LRI!(LR("Q"))  D
"RTN","LRAPPF1",22,0)
 .D @($S("CYEMSP"[LRSS:"EN",1:"AUT"))
"RTN","LRAPPF1",23,0)
 Q
"RTN","LRAPPF1",24,0)
AUT D:$Y>(IOSL-12) H1 Q:LR("Q")
"RTN","LRAPPF1",25,0)
 S X=^LR(LRDFN,"AU"),N=$P(X,"^",6),Y=+X D D^LRU S LRH(3)=Y,DA=LRDFN
"RTN","LRAPPF1",26,0)
 D D^LRAUAW S Y=LR(63,12) D D^LRU S E=Y,H(2)=$E(H(1),1,3)
"RTN","LRAPPF1",27,0)
 W !,"AUTOPSY #: ",N," AUTOPSY DATE: ",LRH(3),?51,"DIED: ",E
"RTN","LRAPPF1",28,0)
 D EN^LRAPT2
"RTN","LRAPPF1",29,0)
 S X=0 F  S X=$O(^LR(LRDFN,"AY",X)) Q:'X!(LR("Q"))  D
"RTN","LRAPPF1",30,0)
 .S Y=+^LR(LRDFN,"AY",X,0),Y=$S($D(^LAB(61,Y,0)):$P(^(0),"^"),1:Y)
"RTN","LRAPPF1",31,0)
 .W !,Y D AM
"RTN","LRAPPF1",32,0)
 Q
"RTN","LRAPPF1",33,0)
AM S M=0 F  S M=$O(^LR(LRDFN,"AY",X,2,M)) Q:'M!(LR("Q"))  D
"RTN","LRAPPF1",34,0)
 .S Y=+^LR(LRDFN,"AY",X,2,M,0)
"RTN","LRAPPF1",35,0)
 .S Y=$S($D(^LAB(61.1,Y,0)):$P(^(0),"^"),1:Y)
"RTN","LRAPPF1",36,0)
 .W !?5,Y
"RTN","LRAPPF1",37,0)
 Q
"RTN","LRAPPF1",38,0)
 ;
"RTN","LRAPPF1",39,0)
EN ;from LRAPT1,LRAPQACN
"RTN","LRAPPF1",40,0)
 S LRSF515=+$G(LRSF515)  ;Indicates that this is generating an SF515
"RTN","LRAPPF1",41,0)
 S X=^LR(LRDFN,S,LRI,0),LR("PATH")=$P(X,U,2),N=$P(X,U,6)
"RTN","LRAPPF1",42,0)
 S N(11)=$P(X,U,11),X=$P(X,U,10),X=$P(X,"."),LRH(3)=$$Y2K^LRX(X)
"RTN","LRAPPF1",43,0)
 S H(2)=$E(X,1,3)
"RTN","LRAPPF1",44,0)
 I LR("PATH")]"" D
"RTN","LRAPPF1",45,0)
 .S LR("PATH")=$$EXTERNAL^DILFD(LRSF,.02,"",LR("PATH"),LR("PATH"))
"RTN","LRAPPF1",46,0)
 S:N="" N="?" S:'H(2) H(2)="?"
"RTN","LRAPPF1",47,0)
 I LRSF515 D:$Y>(IOSL-13) F^LRAPF,^LRAPF
"RTN","LRAPPF1",48,0)
 I 'LRSF515 D:$Y>(IOSL-4) H1
"RTN","LRAPPF1",49,0)
 Q:LR("Q")
"RTN","LRAPPF1",50,0)
 W !?2,"Organ/tissue:",?17,"Date rec'd: ",LRH(3),?43,"Acc #:",N
"RTN","LRAPPF1",51,0)
 W ?64,$E(LR("PATH"),1,12)
"RTN","LRAPPF1",52,0)
 I 'N(11) W !?5,"Report not verified." Q
"RTN","LRAPPF1",53,0)
 ;SNOMED codes
"RTN","LRAPPF1",54,0)
 I '+$G(LR("SPSM")) D  Q:LR("Q")
"RTN","LRAPPF1",55,0)
 .S O=0 F  S O=$O(^LR(LRDFN,S,LRI,2,O)) Q:'O!(LR("Q"))  D
"RTN","LRAPPF1",56,0)
 ..D:$Y>(IOSL-4) H2
"RTN","LRAPPF1",57,0)
 ..Q:LR("Q")
"RTN","LRAPPF1",58,0)
 ..S X=^LR(LRDFN,S,LRI,2,O,0),W(3)=$P(X,"^",3)
"RTN","LRAPPF1",59,0)
 ..S O(6)=$P(^LAB(61,+X,0),"^")
"RTN","LRAPPF1",60,0)
 ..W !?5,O(6) W:W(3) " ",W(3)," gm" D L
"RTN","LRAPPF1",61,0)
 ;Comments
"RTN","LRAPPF1",62,0)
 I $D(LRQ(3)) D
"RTN","LRAPPF1",63,0)
 .S B=0 F  S B=$O(^LR(LRDFN,S,LRI,99,B)) Q:'B!(LR("Q"))  D
"RTN","LRAPPF1",64,0)
 ..W !?5,$E(^LR(LRDFN,S,LRI,99,B,0),1,74)
"RTN","LRAPPF1",65,0)
 ..I LRSF515 D:$Y>(IOSL-13) F^LRAPF,^LRAPF
"RTN","LRAPPF1",66,0)
 Q
"RTN","LRAPPF1",67,0)
L S B=0 F  S B=$O(^LR(LRDFN,S,LRI,2,O,3,B)) Q:'B!(LR("Q"))  D
"RTN","LRAPPF1",68,0)
 .S B(1)=+^LR(LRDFN,S,LRI,2,O,3,B,0)
"RTN","LRAPPF1",69,0)
 .D:$Y>(IOSL-4) H3 Q:LR("Q")
"RTN","LRAPPF1",70,0)
 .W !?10,$P(^LAB(61.3,B(1),0),"^")
"RTN","LRAPPF1",71,0)
 S B=0 F  S B=$O(^LR(LRDFN,S,LRI,2,O,4,B)) Q:'B!(LR("Q"))  D
"RTN","LRAPPF1",72,0)
 .S X=^LR(LRDFN,S,LRI,2,O,4,B,0),B(1)=+X,B(2)=$P(X,"^",2)
"RTN","LRAPPF1",73,0)
 .D:$Y>(IOSL-4) H3 Q:LR("Q")
"RTN","LRAPPF1",74,0)
 .W !?10,$P(^LAB(61.5,B(1),0),"^")
"RTN","LRAPPF1",75,0)
 .W:B(2)]"" " (",$S(B(2)=0:"Negative",B(2)=1:"Positive",1:"?"),")"
"RTN","LRAPPF1",76,0)
 S B=0 F  S B=$O(^LR(LRDFN,S,LRI,2,O,1,B)) Q:'B!(LR("Q"))  D
"RTN","LRAPPF1",77,0)
 .S B(1)=+^LR(LRDFN,S,LRI,2,O,1,B,0)
"RTN","LRAPPF1",78,0)
 .D:$Y>(IOSL-4) H3 Q:LR("Q")
"RTN","LRAPPF1",79,0)
 .W !?10,$P(^LAB(61.4,B(1),0),"^")
"RTN","LRAPPF1",80,0)
 S M=0 F  S M=$O(^LR(LRDFN,S,LRI,2,O,2,M)) Q:'M!(LR("Q"))  D
"RTN","LRAPPF1",81,0)
 .S M(1)=+^LR(LRDFN,S,LRI,2,O,2,M,0)
"RTN","LRAPPF1",82,0)
 .D:$Y>(IOSL-4) H3 Q:LR("Q")
"RTN","LRAPPF1",83,0)
 .W !?10,$P(^LAB(61.1,M(1),0),"^") D E
"RTN","LRAPPF1",84,0)
 S E=0 F  S E=$O(^LR(LRDFN,S,LRI,2,O,5,E)) Q:'E!(LR("Q"))  D
"RTN","LRAPPF1",85,0)
 .S E(1)=^LR(LRDFN,S,LRI,2,O,5,E,0) D A
"RTN","LRAPPF1",86,0)
 Q
"RTN","LRAPPF1",87,0)
A S Y=$P(E(1),"^",2),E(3)=$P(E(1),"^",3),E(4)=$P(E(1),"^")_":"
"RTN","LRAPPF1",88,0)
 S E(4)=$P($P(LR(S),E(4),2),";") D D^LRU S E(2)=Y D D^LRU
"RTN","LRAPPF1",89,0)
 D:$Y>(IOSL-12) H3 Q:LR("Q")
"RTN","LRAPPF1",90,0)
 W !?5,E(4)," ",E(3)," Date: ",E(2)
"RTN","LRAPPF1",91,0)
 Q
"RTN","LRAPPF1",92,0)
 ;
"RTN","LRAPPF1",93,0)
E S E=0 F  S E=$O(^LR(LRDFN,S,LRI,2,O,2,M,1,E)) Q:'E!(LR("Q"))  D
"RTN","LRAPPF1",94,0)
 .W !?12,$P(^LAB(61.2,+^LR(LRDFN,S,LRI,2,O,2,M,1,E,0),0),"^")
"RTN","LRAPPF1",95,0)
 Q
"RTN","LRAPPF1",96,0)
H I $D(LR("F")),IOST?1"C".E D M^LRU Q:LR("Q")
"RTN","LRAPPF1",97,0)
 Q:$A(IOST)'=80  I $D(LRQ(2)) D H^LRSPT Q
"RTN","LRAPPF1",98,0)
 I $D(LRQ(9)) D H^LRAPT1 Q
"RTN","LRAPPF1",99,0)
 D F^LRU W !,LRO(68)," "
"RTN","LRAPPF1",100,0)
 W:F(2)'="^DPT(" !,"Demographic data in ",F(1)," file."
"RTN","LRAPPF1",101,0)
 W !,"Entries listed by PATIENT (From: ",LRSTR," to: ",LRLST,")"
"RTN","LRAPPF1",102,0)
 W !,"Name",?31,"Identifier"
"RTN","LRAPPF1",103,0)
 W !,LR("%")
"RTN","LRAPPF1",104,0)
 Q
"RTN","LRAPPF1",105,0)
H1 Q:$A(IOST)'=80
"RTN","LRAPPF1",106,0)
 D H W:'$D(LRQ(9)) !,LRP,?30,SSN,?42,DOB
"RTN","LRAPPF1",107,0)
 Q
"RTN","LRAPPF1",108,0)
H2 Q:$A(IOST)'=80  D H1
"RTN","LRAPPF1",109,0)
 W !?5,"Organ/tissue:",?25,"Date received: ",LRH(3),?51,"Acc #:",N
"RTN","LRAPPF1",110,0)
 Q
"RTN","LRAPPF1",111,0)
H3 Q:$A(IOST)'=80  D H2
"RTN","LRAPPF1",112,0)
 W !?5,O(6) W:W(3) " ",W(3)," gm"
"RTN","LRAPPF1",113,0)
 Q
"RTN","LRAPPOW")
0^24^B8567530
"RTN","LRAPPOW",1,0)
LRAPPOW ;AVAMC/REG/WTY - POW PATIENT LOOK-UP ;10/16/2001
"RTN","LRAPPOW",2,0)
 ;;5.2;LAB SERVICE;**72,114,259**;Sep 27, 1994
"RTN","LRAPPOW",3,0)
 ;
"RTN","LRAPPOW",4,0)
 ;Reference to ^DIC(22 supported by IA #935
"RTN","LRAPPOW",5,0)
 ;Reference to ^DPT supported by IA #918
"RTN","LRAPPOW",6,0)
 ;
"RTN","LRAPPOW",7,0)
 ;16-OCT-01;WTY;Unwrapped code and added device handling
"RTN","LRAPPOW",8,0)
 ;
"RTN","LRAPPOW",9,0)
 S:'$D(LRSF515) LRSF515=0
"RTN","LRAPPOW",10,0)
 S:'$D(LR("Q")) LR("Q")=0
"RTN","LRAPPOW",11,0)
 I $D(^DPT(DFN,.52)),$P(^(.52),U,5)="Y" D  Q:LR("Q")
"RTN","LRAPPOW",12,0)
 .S X=$P(^(.52),U,6)
"RTN","LRAPPOW",13,0)
 .D FLG
"RTN","LRAPPOW",14,0)
 I $D(^DPT(DFN,.322)) D
"RTN","LRAPPOW",15,0)
 .S X=$P($G(^(.322)),"^",10)
"RTN","LRAPPOW",16,0)
 .D:X="Y" R
"RTN","LRAPPOW",17,0)
 Q
"RTN","LRAPPOW",18,0)
FLG ;
"RTN","LRAPPOW",19,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",20,0)
 W !!?19,$C(7),"*** THIS PATIENT WAS A PRISONER OF WAR ***"
"RTN","LRAPPOW",21,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",22,0)
 W !!
"RTN","LRAPPOW",23,0)
 I X S X=$S($D(^DIC(22,X,0)):$P(^(0),U,1),1:"") W ?24,"POW PERIOD: ",X
"RTN","LRAPPOW",24,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",25,0)
 W !!,"FORWARD A DUPLICATE SET OF SLIDES,BLOCKS AND REPRESENTATIVE "
"RTN","LRAPPOW",26,0)
 W "WET TISSUE TO:"
"RTN","LRAPPOW",27,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",28,0)
 W !!,?3,"DIRECTOR,ARMED FORCES INSTITUTE OF PATHOLOGY"
"RTN","LRAPPOW",29,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",30,0)
 W !,?3,"ATTENTION: FORMER POW REGISTRY"
"RTN","LRAPPOW",31,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",32,0)
 W !,?3,"WASHINGTON, D.C. 20306",!,"<A POW label (VA Form 10-5558) may "
"RTN","LRAPPOW",33,0)
 W "be attached to packaged specimens>"
"RTN","LRAPPOW",34,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",35,0)
 W !!,"MARK CASE CLEARLY AS:"
"RTN","LRAPPOW",36,0)
 W "  FORMER POW  ",X
"RTN","LRAPPOW",37,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",38,0)
 W !,"NOTE IN APPROPRIATE FORM THAT MATERIAL HAS BEEN SENT TO THE AFIP"
"RTN","LRAPPOW",39,0)
 I $D(LRSS),LRSS="AU" D NOTE
"RTN","LRAPPOW",40,0)
 W !!
"RTN","LRAPPOW",41,0)
 Q
"RTN","LRAPPOW",42,0)
NOTE ;
"RTN","LRAPPOW",43,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",44,0)
 W !!,"Follow Guidelines for Performing Autopsy Examination on Former "
"RTN","LRAPPOW",45,0)
 W "Prisoners of War (POW's)  PROFESSIONAL SERVICES LETTER  IL 11-82-17"
"RTN","LRAPPOW",46,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",47,0)
 W !,"Be sure to take appropriate samples of:"
"RTN","LRAPPOW",48,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",49,0)
 W !,"BRAIN, NERVE, TESTES, PROSTATE, URINARY BLADDER, and KIDNEY"
"RTN","LRAPPOW",50,0)
 Q
"RTN","LRAPPOW",51,0)
R ;
"RTN","LRAPPOW",52,0)
 N LRTMP
"RTN","LRAPPOW",53,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",54,0)
 S LRTMP="***THIS PATIENT SERVED IN THE PERSIAN GULF WAR***"
"RTN","LRAPPOW",55,0)
 W $C(7),!!,$$CJ^XLFSTR(LRTMP,IOM)
"RTN","LRAPPOW",56,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",57,0)
 W !!
"RTN","LRAPPOW",58,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",59,0)
 W !,$$CJ^XLFSTR("***************",IOM)
"RTN","LRAPPOW",60,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",61,0)
 S LRTMP="Send a set of DUPLICATE paraffin blocks/smears, "
"RTN","LRAPPOW",62,0)
 S LRTMP=LRTMP_"H & E slides for "
"RTN","LRAPPOW",63,0)
 W !!,$$CJ^XLFSTR(LRTMP,IOM)
"RTN","LRAPPOW",64,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",65,0)
 S LRTMP="Anatomic Path material and a copy of the Final Pathology "
"RTN","LRAPPOW",66,0)
 S LRTMP=LRTMP_"Report to "
"RTN","LRAPPOW",67,0)
 W !!,$$CJ^XLFSTR(LRTMP,IOM)
"RTN","LRAPPOW",68,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",69,0)
 W !!,$$CJ^XLFSTR("the AFIP using the AFIP Requisition form.  ",IOM)
"RTN","LRAPPOW",70,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",71,0)
 W !!
"RTN","LRAPPOW",72,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",73,0)
 W !,$$CJ^XLFSTR("***************",IOM)
"RTN","LRAPPOW",74,0)
 D PAGE Q:LR("Q")
"RTN","LRAPPOW",75,0)
 W !
"RTN","LRAPPOW",76,0)
 Q
"RTN","LRAPPOW",77,0)
PAGE ;
"RTN","LRAPPOW",78,0)
 Q:'LRSF515
"RTN","LRAPPOW",79,0)
 D:$Y>(IOSL-13) F^LRAPF,^LRAPF
"RTN","LRAPPOW",80,0)
 Q
"RTN","LRAPR")
0^25^B89817361
"RTN","LRAPR",1,0)
LRAPR ;AVAMC/REG/WTY- ANAT RELEASE REPORTS ;10/30/01
"RTN","LRAPR",2,0)
 ;;5.2;LAB SERVICE;**72,248,259**;Sep 27, 1994
"RTN","LRAPR",3,0)
 ;
"RTN","LRAPR",4,0)
 N LRESSW
"RTN","LRAPR",5,0)
 D SWITCH
"RTN","LRAPR",6,0)
 I +LRESSW D  Q
"RTN","LRAPR",7,0)
 .D ^LRAPRES
"RTN","LRAPR",8,0)
 .D END
"RTN","LRAPR",9,0)
 W !!?27,"Release Pathology Reports",!!
"RTN","LRAPR",10,0)
 D A
"RTN","LRAPR",11,0)
 I '$D(LRSS) D END Q
"RTN","LRAPR",12,0)
 I LRCAPA D  G:'$D(X) END
"RTN","LRAPR",13,0)
 .S X=$S(LRSS="CY":"CYTOLOGY REPORTING",LRSS="SP":"SURGICAL PATH REPORTING",1:"")
"RTN","LRAPR",14,0)
 .D:X]"" X^LRUWK
"RTN","LRAPR",15,0)
 I LRSS="AU" D B Q
"RTN","LRAPR",16,0)
 S LRSOP="Z"
"RTN","LRAPR",17,0)
 S DR="S A=^LR(LRDFN,LRSS,LRI,0),LRZ=$P(A,U,3),LRZ(1)=$P(A,U,13),"
"RTN","LRAPR",18,0)
 S DR=DR_"LRZ(2)=$P(A,U,11),LRZ(3)=$P(A,U,2);"
"RTN","LRAPR",19,0)
 S DR=DR_"I 'LRZ W $C(7),!,""No date report completed.   "
"RTN","LRAPR",20,0)
 S DR=DR_"Cannot release."" S Y=0;"
"RTN","LRAPR",21,0)
 S DR=DR_"I 'LRZ(2) D NMPATH^LRAPR;"
"RTN","LRAPR",22,0)
 S DR=DR_"I LRZ(2) D RINFO^LRAPR S Y=0;"
"RTN","LRAPR",23,0)
 S DR=DR_"I 'LRZ(2) D SUPCHK^LRAPR;"
"RTN","LRAPR",24,0)
 S DR=DR_"S DIR(0)=""YA"",DIR(""A"")=""Release report? """
"RTN","LRAPR",25,0)
 S DR=DR_",DIR(""B"")=""NO"" D ^DIR K:Y Y S:$D(Y) Y=0;"
"RTN","LRAPR",26,0)
 S DR=DR_".11////^D NOW^%DTC S X=%;.13////^S X=DUZ;"
"RTN","LRAPR",27,0)
 S DR=DR_"W !!,""Report released..."""
"RTN","LRAPR",28,0)
 D ^LRAPDA
"RTN","LRAPR",29,0)
 D END
"RTN","LRAPR",30,0)
 Q
"RTN","LRAPR",31,0)
 ;
"RTN","LRAPR",32,0)
B ;Autopsy
"RTN","LRAPR",33,0)
 S LRSOP="Z"
"RTN","LRAPR",34,0)
 S DR="S A=$G(^LR(LRDFN,""AU"")) I A="""" S Y=0;"
"RTN","LRAPR",35,0)
 S DR=DR_"S LRZ=$P(A,U,3),LRZ(1)=$P(A,U,16),LRZ(2)=$P(A,U,15),"
"RTN","LRAPR",36,0)
 ;KLL-LRZ(3)=SR PATHOLOGIST,LRZ(4)=PROVISIONAL DATE
"RTN","LRAPR",37,0)
 S DR=DR_"LRZ(3)=$P(A,U,10),LRZ(4)=$P(A,U,17);"
"RTN","LRAPR",38,0)
 ;KLL-PROVISIONAL OR DATE REPORT COMPLETED IS REQUIRED
"RTN","LRAPR",39,0)
 S DR=DR_"I 'LRZ(4),'LRZ W $C(7),!,""Provisional date or date report completed required.   "
"RTN","LRAPR",40,0)
 S DR=DR_"Cannot release."" S Y=0;"
"RTN","LRAPR",41,0)
 S DR=DR_"I 'LRZ(2) D NMPATH^LRAPR;"
"RTN","LRAPR",42,0)
 S DR=DR_"I LRZ(2) D RINFO^LRAPR;"
"RTN","LRAPR",43,0)
 S DR=DR_"I 'LRZ(2) D SUPCHK^LRAPR;"
"RTN","LRAPR",44,0)
 S DR=DR_"D RELEASE^LRAPR;"
"RTN","LRAPR",45,0)
 S DR=DR_"D NOW^%DTC S LRDTE=%;"
"RTN","LRAPR",46,0)
 S DR=DR_"14.7////^S X=$S(LRZ(2):""@"",1:LRDTE);"
"RTN","LRAPR",47,0)
 S DR=DR_"14.8////^S X=$S(LRZ(2):""@"",1:DUZ);"
"RTN","LRAPR",48,0)
 S DR=DR_"W !!,""Report "" W:LRZ(2) ""un"" W ""released..."";K LRDTE"
"RTN","LRAPR",49,0)
 D ^LRAPDA
"RTN","LRAPR",50,0)
 D END
"RTN","LRAPR",51,0)
 Q
"RTN","LRAPR",52,0)
EN ;Supplementary Report Entry Point
"RTN","LRAPR",53,0)
 N LRESSW
"RTN","LRAPR",54,0)
 D SWITCH
"RTN","LRAPR",55,0)
 W !!?20,"Release Supplementary Pathology Reports",!
"RTN","LRAPR",56,0)
 D A
"RTN","LRAPR",57,0)
 I '$D(LRSS) D END Q
"RTN","LRAPR",58,0)
 W !!,"Data entry for ",LRH(0)," "
"RTN","LRAPR",59,0)
 S %=1 D YN^LRU G:%<1 END
"RTN","LRAPR",60,0)
 I %=2 D  G:Y<1 END
"RTN","LRAPR",61,0)
 .S %DT="AE",%DT(0)="-N",%DT("A")="Enter YEAR: " D ^%DT K %DT
"RTN","LRAPR",62,0)
 .Q:Y<1  S LRAD=$E(Y,1,3)_"0000",LRH(0)=$E(Y,1,3)+1700
"RTN","LRAPR",63,0)
 I '$D(^LRO(68,LRAA,1,LRAD,0)) D  Q
"RTN","LRAPR",64,0)
 .W $C(7),!!,"NO ",LRAA(1)," ACCESIONS IN FILE FOR ",LRH(0),!!
"RTN","LRAPR",65,0)
W K X,Y,LR("CK") R !!,"Select Accession Number/Pt name: ",LRAN:DTIME
"RTN","LRAPR",66,0)
 G:LRAN=""!(LRAN[U) END
"RTN","LRAPR",67,0)
 I LRAN'?1N.N D  G:LRAN<1 END  G W
"RTN","LRAPR",68,0)
 .D PNAME^LRAPDA
"RTN","LRAPR",69,0)
 .Q:LRAN<1
"RTN","LRAPR",70,0)
 .D DIE
"RTN","LRAPR",71,0)
 D REST
"RTN","LRAPR",72,0)
 G W
"RTN","LRAPR",73,0)
REST W "  for ",LRH(0)
"RTN","LRAPR",74,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) D  Q
"RTN","LRAPR",75,0)
 .W $C(7),!!,"Accession # ",LRAN," for ",LRH(0)
"RTN","LRAPR",76,0)
 .W " not in ACCESSION file",!!
"RTN","LRAPR",77,0)
 S X=^LRO(68,LRAA,1,LRAD,1,LRAN,0),LRLLOC=$P(X,"^",7),LRDFN=+X
"RTN","LRAPR",78,0)
 Q:'$D(^LR(LRDFN,0))  S X=^(0) D ^LRUP
"RTN","LRAPR",79,0)
 W !,LRP,"  ID: ",SSN
"RTN","LRAPR",80,0)
 I LRSS'="AU" D
"RTN","LRAPR",81,0)
 .S LRI=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,3),"^",5)
"RTN","LRAPR",82,0)
 .W !,"Specimen(s):"
"RTN","LRAPR",83,0)
 .S X=0 F  S X=$O(^LR(LRDFN,LRSS,LRI,.1,X)) Q:'X  D
"RTN","LRAPR",84,0)
 ..I $D(^LR(LRDFN,LRSS,LRI,.1,X,0)),$L(^(0)) W !,^(0)
"RTN","LRAPR",85,0)
DIE ;Define default supplementary report
"RTN","LRAPR",86,0)
 N LRFILE,LRIENS,LRIENS1,LRX,LRRLS,LRFDA,LRLKFL,LRDA,LRQUIT,LRNOSP
"RTN","LRAPR",87,0)
 N LRMSG,LRSRFL
"RTN","LRAPR",88,0)
 S DIC("B")="",LRNOSP=0
"RTN","LRAPR",89,0)
 I LRSS'="AU" D
"RTN","LRAPR",90,0)
 .S LRFILE=+$$GET1^DID(LRSF,1.2,"","SPECIFIER")
"RTN","LRAPR",91,0)
 .S LRIENS1=LRI_","_LRDFN_","
"RTN","LRAPR",92,0)
 .I '+$P($G(^LR(LRDFN,LRSS,LRI,1.2,0)),"^",4) S LRNOSP=1 Q
"RTN","LRAPR",93,0)
 .S LRX=0 F  S LRX=$O(^LR(LRDFN,LRSS,LRI,1.2,LRX)) Q:'LRX  D
"RTN","LRAPR",94,0)
 ..S LRIENS=LRX_","_LRIENS1
"RTN","LRAPR",95,0)
 ..S LRSRFL=$$GET1^DIQ(LRFILE,LRIENS,.02,"I")
"RTN","LRAPR",96,0)
 ..Q:LRSRFL
"RTN","LRAPR",97,0)
 ..S DIC("B")=$$GET1^DIQ(LRFILE,LRIENS,.01,"I")
"RTN","LRAPR",98,0)
 I LRSS="AU" D
"RTN","LRAPR",99,0)
 .S LRFILE=63.324,LRIENS1=LRDFN_","
"RTN","LRAPR",100,0)
 .I '+$P($G(^LR(LRDFN,84,0)),"^",4) S LRNOSP=1 Q
"RTN","LRAPR",101,0)
 .S LRX=0 F  S LRX=$O(^LR(LRDFN,84,LRX)) Q:'LRX  D
"RTN","LRAPR",102,0)
 ..S LRIENS=LRX_","_LRIENS1
"RTN","LRAPR",103,0)
 ..S LRSRFL=$$GET1^DIQ(LRFILE,LRIENS,.02,"I")
"RTN","LRAPR",104,0)
 ..Q:LRSRFL
"RTN","LRAPR",105,0)
 ..S DIC("B")=$$GET1^DIQ(LRFILE,LRIENS,.01,"I")
"RTN","LRAPR",106,0)
 I LRNOSP D  Q
"RTN","LRAPR",107,0)
 .K LRMSG
"RTN","LRAPR",108,0)
 .S LRMSG=$C(7)_"No supplementary reports exist for this accession."
"RTN","LRAPR",109,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPR",110,0)
 I 'DIC("B") D  Q
"RTN","LRAPR",111,0)
 .K LRMSG
"RTN","LRAPR",112,0)
 .S LRMSG=$C(7)_"All supplementary reports have been released."
"RTN","LRAPR",113,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPR",114,0)
DIE1 ;
"RTN","LRAPR",115,0)
 S LRQUIT=0
"RTN","LRAPR",116,0)
 F  D  Q:LRQUIT
"RTN","LRAPR",117,0)
 .W !
"RTN","LRAPR",118,0)
 .S:LRSS="AU" (LRLKFL,DIC)="^LR(LRDFN,84,"
"RTN","LRAPR",119,0)
 .S:LRSS'="AU" (LRLKFL,DIC)="^LR(LRDFN,LRSS,LRI,1.2,"
"RTN","LRAPR",120,0)
 .S DIC("A")="Select SUPPLEMENTARY REPORT DATE: "
"RTN","LRAPR",121,0)
 .S DIC(0)="AEQM"
"RTN","LRAPR",122,0)
 .D ^DIC K DIC
"RTN","LRAPR",123,0)
 .I Y<1 S LRQUIT=1 Q
"RTN","LRAPR",124,0)
 .S LRDA=+Y
"RTN","LRAPR",125,0)
 .S LRIENS=LRDA_","_LRIENS1
"RTN","LRAPR",126,0)
 .S LRRLS=+$$GET1^DIQ(LRFILE,LRIENS,.02,"I")
"RTN","LRAPR",127,0)
 .I LRRLS D  Q
"RTN","LRAPR",128,0)
 ..W !!,"This supplementary report has already been released.",!
"RTN","LRAPR",129,0)
 .W !
"RTN","LRAPR",130,0)
 .I LRESSW D  Q
"RTN","LRAPR",131,0)
 ..D ESIG Q:LRQUIT
"RTN","LRAPR",132,0)
 ..D UPDATE
"RTN","LRAPR",133,0)
 .S DIR("A")="Release supplementary report",DIR(0)="Y",DIR("B")="NO"
"RTN","LRAPR",134,0)
 .D ^DIR K DIR
"RTN","LRAPR",135,0)
 .Q:'Y
"RTN","LRAPR",136,0)
 .D UPDATE
"RTN","LRAPR",137,0)
 Q
"RTN","LRAPR",138,0)
 ;
"RTN","LRAPR",139,0)
A D ^LRAP G:'$D(Y) END
"RTN","LRAPR",140,0)
 Q
"RTN","LRAPR",141,0)
C ;
"RTN","LRAPR",142,0)
 S LRDICS="SPCYEM" D ^LRAP
"RTN","LRAPR",143,0)
 G:'$D(Y) END
"RTN","LRAPR",144,0)
 Q
"RTN","LRAPR",145,0)
S ;from LRAPDA
"RTN","LRAPR",146,0)
 S LRK=$P(^LR(LRDFN,LRSS,LRI,0),"^",11) Q:'LRK  S:'$D(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0)) ^(0)="^68.04PA^^"
"RTN","LRAPR",147,0)
 Q:$D(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRT,0))  S ^(0)=LRT_"^50^^"_DUZ_"^"_LRK,X=^LRO(68,LRAA,1,LRAD,1,LRAN,4,0),^(0)=$P(X,"^",1,2)_"^"_LRT_"^"_($P(X,"^",4)+1)
"RTN","LRAPR",148,0)
 S:'$D(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRT,1,0)) ^(0)="^68.14P^^"
"RTN","LRAPR",149,0)
 S C=0 F  S C=$O(LRT(C)) Q:'C  D CAP
"RTN","LRAPR",150,0)
 S ^LRO(68,"AA",LRAA_"|"_LRAD_"|"_LRAN_"|"_LRT)=""
"RTN","LRAPR",151,0)
 Q
"RTN","LRAPR",152,0)
 ;
"RTN","LRAPR",153,0)
CAP S ^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRT,1,C,0)=C_"^1^0^0^^"_LRK_"^"_DUZ_"^"_DUZ(2)_"^"_LRAA_"^"_LRAA_"^"_LRAA
"RTN","LRAPR",154,0)
 S X=^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRT,1,0),^(0)=$P(X,"^",1,2)_"^"_C_"^"_($P(X,"^",4)+1)
"RTN","LRAPR",155,0)
 Q
"RTN","LRAPR",156,0)
 ;
"RTN","LRAPR",157,0)
SWITCH ;Check to see if electronic signature is enabled
"RTN","LRAPR",158,0)
 D GETDATA^LRAPESON(.LRESSW)
"RTN","LRAPR",159,0)
 Q
"RTN","LRAPR",160,0)
ESIG ;Prompt for electronic signature
"RTN","LRAPR",161,0)
 S LRQUIT=0
"RTN","LRAPR",162,0)
 D SIG^XUSESIG
"RTN","LRAPR",163,0)
 I X1="" D
"RTN","LRAPR",164,0)
 .W "  SIGNATURE NOT VERIFIED"
"RTN","LRAPR",165,0)
 .S LRQUIT=1
"RTN","LRAPR",166,0)
 Q
"RTN","LRAPR",167,0)
UPDATE ;
"RTN","LRAPR",168,0)
 S LRLKFL=LRLKFL_LRDA_",0)"
"RTN","LRAPR",169,0)
 L +@(LRLKFL):5 I '$T D  Q
"RTN","LRAPR",170,0)
 .S LRMSG="This record is locked by another user.  "
"RTN","LRAPR",171,0)
 .S LRMSG=LRMSG_"Please wait and try again."
"RTN","LRAPR",172,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPR",173,0)
 S LRFDA(LRFILE,LRIENS,.02)=1
"RTN","LRAPR",174,0)
 ;File signer ID and Date/time of released supp report
"RTN","LRAPR",175,0)
 D CKSIGNR
"RTN","LRAPR",176,0)
 D FILE^DIE("","LRFDA")
"RTN","LRAPR",177,0)
 W "...Released"
"RTN","LRAPR",178,0)
 L -@(LRLKFL)
"RTN","LRAPR",179,0)
 ;If all supp reports released, and signer is same person for both
"RTN","LRAPR",180,0)
 ;  supp and main reports, allow release of main report at this point
"RTN","LRAPR",181,0)
 I LRESSW D RELMN
"RTN","LRAPR",182,0)
 Q
"RTN","LRAPR",183,0)
SUPCHK ;Check for unreleased supplementary reports
"RTN","LRAPR",184,0)
 N LRSR,LRSR1,LRSR2
"RTN","LRAPR",185,0)
 S LRSR=0,LRSR1=1
"RTN","LRAPR",186,0)
 I LRSS'="AU" D
"RTN","LRAPR",187,0)
 .Q:'+$P($G(^LR(LRDFN,LRSS,LRI,1.2,0)),U,4)
"RTN","LRAPR",188,0)
 .F  S LRSR=$O(^LR(LRDFN,LRSS,LRI,1.2,LRSR)) Q:LRSR'>0!('LRSR1)  D
"RTN","LRAPR",189,0)
 ..S LRSR1=+$P(^LR(LRDFN,LRSS,LRI,1.2,LRSR,0),U,2)
"RTN","LRAPR",190,0)
 ..I 'LRSR1 D
"RTN","LRAPR",191,0)
 ...S Y=+$P(^LR(LRDFN,LRSS,LRI,1.2,LRSR,0),U)
"RTN","LRAPR",192,0)
 ...D DD^%DT S LRSR2=Y
"RTN","LRAPR",193,0)
 I LRSS="AU" D
"RTN","LRAPR",194,0)
 .Q:'+$P($G(^LR(LRDFN,84,0)),U,4)
"RTN","LRAPR",195,0)
 .F  S LRSR=$O(^LR(LRDFN,84,LRSR)) Q:LRSR'>0!('LRSR1)  D
"RTN","LRAPR",196,0)
 ..S LRSR1=+$P(^LR(LRDFN,84,LRSR,0),U,2)
"RTN","LRAPR",197,0)
 ..I 'LRSR1 D
"RTN","LRAPR",198,0)
 ...S Y=+$P(^LR(LRDFN,84,LRSR,0),U)
"RTN","LRAPR",199,0)
 ...D DD^%DT S LRSR2=Y
"RTN","LRAPR",200,0)
 I 'LRSR1 D
"RTN","LRAPR",201,0)
 .W $C(7),!,"Supplementary report "_LRSR2_" has not been released.  "
"RTN","LRAPR",202,0)
 .W "Cannot release."
"RTN","LRAPR",203,0)
 .S Y=0
"RTN","LRAPR",204,0)
 Q
"RTN","LRAPR",205,0)
RINFO ;Display release information
"RTN","LRAPR",206,0)
 W $C(7),!,"Report "
"RTN","LRAPR",207,0)
 W:LRZ(2)=1 "has already been "
"RTN","LRAPR",208,0)
 W "released "
"RTN","LRAPR",209,0)
 S Y=LRZ(2)
"RTN","LRAPR",210,0)
 D DD^%DT
"RTN","LRAPR",211,0)
 W:LRZ(2)>1 Y
"RTN","LRAPR",212,0)
 W:LRZ(1)'="" " by "_$P($G(^VA(200,LRZ(1),0)),U)
"RTN","LRAPR",213,0)
 K Y
"RTN","LRAPR",214,0)
 Q
"RTN","LRAPR",215,0)
NMPATH ;Check for missing pathologist name
"RTN","LRAPR",216,0)
 I 'LRZ(3) D
"RTN","LRAPR",217,0)
 .W $C(7),!,"Pathologist name missing.  Cannot release."
"RTN","LRAPR",218,0)
 .S Y=0
"RTN","LRAPR",219,0)
 Q
"RTN","LRAPR",220,0)
RELEASE ;Prompt for release/unrelease
"RTN","LRAPR",221,0)
 W ! S DIR(0)="YA",DIR("B")="NO"
"RTN","LRAPR",222,0)
 S:LRZ(2) DIR("A")="Unrelease report? "
"RTN","LRAPR",223,0)
 S:'LRZ(2) DIR("A")="Release report? "
"RTN","LRAPR",224,0)
 D ^DIR
"RTN","LRAPR",225,0)
 K:Y Y
"RTN","LRAPR",226,0)
 I $D(Y) S Y=0
"RTN","LRAPR",227,0)
 Q
"RTN","LRAPR",228,0)
RELMN ;Allow release of main report as long as all supp reports are
"RTN","LRAPR",229,0)
 ;  released, and signer is same person for main and supp report(s)
"RTN","LRAPR",230,0)
 ;Make sure all supp reports signed out
"RTN","LRAPR",231,0)
 S LRQT=0
"RTN","LRAPR",232,0)
 D RELCHK
"RTN","LRAPR",233,0)
 Q:LRQT
"RTN","LRAPR",234,0)
 ;Prompt for release of main report
"RTN","LRAPR",235,0)
 S DIR(0)="YA",DIR("B")="YES"
"RTN","LRAPR",236,0)
 S DIR("A")="Release main report?  "
"RTN","LRAPR",237,0)
 D ^DIR K DIR
"RTN","LRAPR",238,0)
 Q:'Y
"RTN","LRAPR",239,0)
 ;User signing out the main report must equal the Path on the report
"RTN","LRAPR",240,0)
 N LRPAT
"RTN","LRAPR",241,0)
 ;S LRSIGNR=$$GET1^DIQ(200,DUZ_",",.01)
"RTN","LRAPR",242,0)
 I LRSS'="AU" D 
"RTN","LRAPR",243,0)
 . S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPR",244,0)
 . S LRPAT=+$$GET1^DIQ(LRSF,LRIENS,.02,"I")
"RTN","LRAPR",245,0)
 I LRSS="AU" S LRPAT=+$$GET1^DIQ(63,LRDFN_",",13.6,"I")
"RTN","LRAPR",246,0)
 I 'LRPAT D  Q
"RTN","LRAPR",247,0)
 .S LRMSG(1)="Pathologist or Cytotechnologist entry is missing.",LRMSG(1,"F")="!!"
"RTN","LRAPR",248,0)
 .S LRMSG(2)="  Cannot release the main report.",LRMSG(2,"F")="!"
"RTN","LRAPR",249,0)
 .D EN^DDIOL(.LRMSG) K LRMSG
"RTN","LRAPR",250,0)
 I LRPAT'=DUZ D  Q:LRQUIT
"RTN","LRAPR",251,0)
 .S DIR(0)="Y",DIR("B")="YES",DIR("A")="CONTINUE  "
"RTN","LRAPR",252,0)
 .S DIR("A",1)=""
"RTN","LRAPR",253,0)
 .S DIR("A",2)="Supplemental release User ID does not match the."
"RTN","LRAPR",254,0)
 .S DIR("A",3)="  Pathologist/Cytotechnologist User ID on the main report."
"RTN","LRAPR",255,0)
 .S DIR("A",4)="Do you want to proceed with release of the main report?"
"RTN","LRAPR",256,0)
 .S DIR("A",5)=""
"RTN","LRAPR",257,0)
 .D ^DIR K DIR
"RTN","LRAPR",258,0)
 .I Y=0 S LRQUIT=1
"RTN","LRAPR",259,0)
 ;Release main report
"RTN","LRAPR",260,0)
 D ^LRAPRES
"RTN","LRAPR",261,0)
 S LRQUIT=1
"RTN","LRAPR",262,0)
 Q
"RTN","LRAPR",263,0)
RELCHK ;Check to make sure all supp reports are released
"RTN","LRAPR",264,0)
 N LRFILE,LRIENS,LRIENS1,LRX,LRRLS,LRFDA,LRLKFL,LRDA,LRNOSP
"RTN","LRAPR",265,0)
 N LRMSG,LRSRFL
"RTN","LRAPR",266,0)
 S DIC("B")=""
"RTN","LRAPR",267,0)
 I LRSS'="AU" D
"RTN","LRAPR",268,0)
 .S LRFILE=+$$GET1^DID(LRSF,1.2,"","SPECIFIER")
"RTN","LRAPR",269,0)
 .S LRIENS1=LRI_","_LRDFN_","
"RTN","LRAPR",270,0)
 .S LRX=0 F  S LRX=$O(^LR(LRDFN,LRSS,LRI,1.2,LRX)) Q:'LRX  D
"RTN","LRAPR",271,0)
 ..S LRIENS=LRX_","_LRIENS1
"RTN","LRAPR",272,0)
 ..S LRSRFL=$$GET1^DIQ(LRFILE,LRIENS,.02,"I")
"RTN","LRAPR",273,0)
 ..Q:LRSRFL
"RTN","LRAPR",274,0)
 ..S DIC("B")=$$GET1^DIQ(LRFILE,LRIENS,.01,"I")
"RTN","LRAPR",275,0)
 I LRSS="AU" D
"RTN","LRAPR",276,0)
 .S LRFILE=63.324
"RTN","LRAPR",277,0)
 .S LRX=0 F  S LRX=$O(^LR(LRDFN,84,LRX)) Q:'LRX  D
"RTN","LRAPR",278,0)
 ..S LRIENS=LRX_","_LRDFN_","
"RTN","LRAPR",279,0)
 ..S LRSRFL=$$GET1^DIQ(LRFILE,LRIENS,.02,"I")
"RTN","LRAPR",280,0)
 ..Q:LRSRFL
"RTN","LRAPR",281,0)
 ..S DIC("B")=$$GET1^DIQ(LRFILE,LRIENS,.01,"I")
"RTN","LRAPR",282,0)
 I $G(DIC("B")) S LRQT=1
"RTN","LRAPR",283,0)
 Q
"RTN","LRAPR",284,0)
CKSIGNR ;Update supp report with Releaser ID and Date/time
"RTN","LRAPR",285,0)
 N LRIEN2,LRFLE
"RTN","LRAPR",286,0)
 S LRQUIT=0
"RTN","LRAPR",287,0)
 I LRSS'="AU" D
"RTN","LRAPR",288,0)
 .S (A,B)=0 F  S A=$O(^LR(LRDFN,LRSS,LRI,1.2,LRDA,2,A)) Q:'A  D
"RTN","LRAPR",289,0)
 ..S B=A
"RTN","LRAPR",290,0)
 .I '$D(^LR(LRDFN,LRSS,LRI,1.2,LRDA,2,B,0)) S LRQUIT=1 Q
"RTN","LRAPR",291,0)
 .S LRIEN2=B_","_LRDA_","_LRI_","_LRDFN_","
"RTN","LRAPR",292,0)
 .S LRFLE=$S(LRSS="SP":63.8172,LRSS="CY":63.9072,LRSS="EM":63.2072,1:"")
"RTN","LRAPR",293,0)
 I LRSS="AU" D
"RTN","LRAPR",294,0)
 .S (A,B)=0 F  S A=$O(^LR(LRDFN,84,LRDA,2,A)) Q:'A  D
"RTN","LRAPR",295,0)
 ..S B=A
"RTN","LRAPR",296,0)
 .I '$D(^LR(LRDFN,84,LRDA,2,B,0)) S LRQUIT=1 Q
"RTN","LRAPR",297,0)
 .S LRIEN2=B_","_LRDA_","_LRDFN_","
"RTN","LRAPR",298,0)
 .S LRFLE=$S(LRSS="AU":63.3242,1:"")
"RTN","LRAPR",299,0)
 Q:LRQUIT
"RTN","LRAPR",300,0)
 S LRFDA(LRFLE,LRIEN2,.03)=DUZ
"RTN","LRAPR",301,0)
 D NOW^%DTC
"RTN","LRAPR",302,0)
 S LRFDA(LRFLE,LRIEN2,.04)=%
"RTN","LRAPR",303,0)
 Q
"RTN","LRAPR",304,0)
END ;
"RTN","LRAPR",305,0)
 D V^LRU
"RTN","LRAPR",306,0)
 Q
"RTN","LRAPRES")
0^26^B102454519
"RTN","LRAPRES",1,0)
LRAPRES ;DALOI/WTY- AP ESIG RELEASE REPORT;10/30/01
"RTN","LRAPRES",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPRES",3,0)
 ;
"RTN","LRAPRES",4,0)
 ;Reference to NEW^TIUPNAPI supported by IA #1911
"RTN","LRAPRES",5,0)
MAIN ;
"RTN","LRAPRES",6,0)
 N LRMSG,LRDEM,LREND,LRQUIT,LRNTIME,LRPRCLSS,LRVCDE,LRMTCH
"RTN","LRAPRES",7,0)
 N LRPCEXP,LRESCPT,LRPCSTR
"RTN","LRAPRES",8,0)
 S LRESCPT=0
"RTN","LRAPRES",9,0)
 D TITLE
"RTN","LRAPRES",10,0)
 I LRQUIT D END Q
"RTN","LRAPRES",11,0)
 D CPTCHK
"RTN","LRAPRES",12,0)
 F  D  Q:LRQUIT
"RTN","LRAPRES",13,0)
 .S LRQUIT=0
"RTN","LRAPRES",14,0)
 .D MENU
"RTN","LRAPRES",15,0)
 .Q:LRQUIT
"RTN","LRAPRES",16,0)
 .D SECTION
"RTN","LRAPRES",17,0)
 .Q:LRQUIT
"RTN","LRAPRES",18,0)
 .S LREND=0
"RTN","LRAPRES",19,0)
 .I LRSEL="E" S LREND=0 D CLSSCHK^LRAPRES1(DUZ,.LREND)
"RTN","LRAPRES",20,0)
 .Q:LREND
"RTN","LRAPRES",21,0)
 .D ACCYR
"RTN","LRAPRES",22,0)
 .Q:LRQUIT
"RTN","LRAPRES",23,0)
 .D ACCPN
"RTN","LRAPRES",24,0)
 D END
"RTN","LRAPRES",25,0)
 Q
"RTN","LRAPRES",26,0)
ACCPN ;Prompt for accesion number or patient name
"RTN","LRAPRES",27,0)
 F  D  Q:LREND
"RTN","LRAPRES",28,0)
 .S (LRQUIT,LREND)=0
"RTN","LRAPRES",29,0)
 .D CPTCHK
"RTN","LRAPRES",30,0)
 .D LOOKUP^LRAPUTL(.LRDATA,LRH(0),LRO(68),LRSS,LRAD,LRAA)
"RTN","LRAPRES",31,0)
 .Q:'LRDATA
"RTN","LRAPRES",32,0)
 .I LRDATA=-1 S LREND=1 Q
"RTN","LRAPRES",33,0)
 .S LRDFN=LRDATA,LRI=LRDATA(1)
"RTN","LRAPRES",34,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPRES",35,0)
 .I LRSEL="E" D  Q:LRQUIT
"RTN","LRAPRES",36,0)
 ..D RELCHK
"RTN","LRAPRES",37,0)
 ..Q:LRQUIT
"RTN","LRAPRES",38,0)
 ..D:'LRZ(2) BROWSE
"RTN","LRAPRES",39,0)
 ..D ESIG
"RTN","LRAPRES",40,0)
 ..Q:LRQUIT
"RTN","LRAPRES",41,0)
 ..D NOW^%DTC S LRNTIME=%
"RTN","LRAPRES",42,0)
 ..I 'LRZ(2) D TIUPREP,STORE
"RTN","LRAPRES",43,0)
 ..Q:LRQUIT
"RTN","LRAPRES",44,0)
 ..D RELEASE
"RTN","LRAPRES",45,0)
 ..Q:LRQUIT
"RTN","LRAPRES",46,0)
 ..D:'LRZ(2) MAIN^LRAPRES1(LRDFN,LRSS,LRI,LRSF,LRP,LRAC)
"RTN","LRAPRES",47,0)
 ..D OERR^LR7OB63D
"RTN","LRAPRES",48,0)
 .I LRSEL="C" D
"RTN","LRAPRES",49,0)
 ..Q:$T(CPT^LRCAPES)=""
"RTN","LRAPRES",50,0)
 ..S LRPRO=DUZ
"RTN","LRAPRES",51,0)
 ..D PROVIDR^LRAPUTL
"RTN","LRAPRES",52,0)
 ..Q:LRQUIT
"RTN","LRAPRES",53,0)
 ..D CPT^LRCAPES(LRAA,LRAD,LRAN,LRPRO)
"RTN","LRAPRES",54,0)
 .I LRSEL="V" D
"RTN","LRAPRES",55,0)
 ..D DEMARR
"RTN","LRAPRES",56,0)
 ..D INIT^LRAPSNMD(LRDFN,LRSS,LRI,LRSF,LRAA,LRAN,LRAD,.LRDEM,1)
"RTN","LRAPRES",57,0)
 Q
"RTN","LRAPRES",58,0)
TITLE ;Title
"RTN","LRAPRES",59,0)
 S LRQUIT=0
"RTN","LRAPRES",60,0)
 D CK^LRAP
"RTN","LRAPRES",61,0)
 I Y=-1 S LRQUIT=1 Q
"RTN","LRAPRES",62,0)
 W @IOF
"RTN","LRAPRES",63,0)
 S LRTEXT="Release/Electronically Sign Pathology Reports"
"RTN","LRAPRES",64,0)
 S LRMSG(1)=$$CJ^XLFSTR(LRTEXT,IOM)
"RTN","LRAPRES",65,0)
 S LRMSG(1,"F")="!!"
"RTN","LRAPRES",66,0)
 S LRMSG(2)="",LRMSG(2,"F")="!"
"RTN","LRAPRES",67,0)
 D EN^DDIOL(.LRMSG) K LRMSG
"RTN","LRAPRES",68,0)
 Q
"RTN","LRAPRES",69,0)
CPTCHK ;Determine if CPT is activated
"RTN","LRAPRES",70,0)
 Q:$T(ES^LRCAPES)=""
"RTN","LRAPRES",71,0)
 S LRESCPT=$$ES^LRCAPES()
"RTN","LRAPRES",72,0)
 Q
"RTN","LRAPRES",73,0)
DEMARR ;
"RTN","LRAPRES",74,0)
 I LRAU D
"RTN","LRAPRES",75,0)
 .S LRPRO=$$GET1^DIQ(63,LRDFN_",",13.5,"I")
"RTN","LRAPRES",76,0)
 .S LRPRO(1)=$$GET1^DIQ(63,LRDFN_",",13.5)
"RTN","LRAPRES",77,0)
 I 'LRAU D
"RTN","LRAPRES",78,0)
 .S LRPRO=$$GET1^DIQ(LRSF,LRI_","_LRDFN_",",.07,"I")
"RTN","LRAPRES",79,0)
 .S LRPRO(1)=$$GET1^DIQ(LRSF,LRI_","_LRDFN_",",.07)
"RTN","LRAPRES",80,0)
 S LRDEM("SEX")=SEX,LRDEM("DOB")=DOB
"RTN","LRAPRES",81,0)
 S LRDEM("AGE")=AGE
"RTN","LRAPRES",82,0)
 S LRDEM("SEC")=LRAA(1),LRDEM("PNM")=PNM
"RTN","LRAPRES",83,0)
 S LRDEM("SSN")=SSN,LRDEM("PRO")=LRPRO(1)
"RTN","LRAPRES",84,0)
 I LRAU D
"RTN","LRAPRES",85,0)
 .S LRDEM("DTH")=$P(VADM(6),"^",2)
"RTN","LRAPRES",86,0)
 .S LRDEM("AUDT")=$$GET1^DIQ(63,LRDFN_",",11)
"RTN","LRAPRES",87,0)
 .S LRDEM("AUTYP")=$$GET1^DIQ(63,LRDFN_",",13.7)
"RTN","LRAPRES",88,0)
 Q
"RTN","LRAPRES",89,0)
MENU ;
"RTN","LRAPRES",90,0)
 S DIR(0)="S^"
"RTN","LRAPRES",91,0)
 S:LRESCPT DIR(0)=DIR(0)_"C:CPT Coding;"
"RTN","LRAPRES",92,0)
 S DIR(0)=DIR(0)_"E:Electronically Sign Reports;V:View SNOMED Codes"
"RTN","LRAPRES",93,0)
 S DIR("A")="Selection"
"RTN","LRAPRES",94,0)
 D ^DIR
"RTN","LRAPRES",95,0)
 I $D(DTOUT)!($D(DUOUT))!($D(DIRUT))!($D(DIROUT)) S LRQUIT=1 Q
"RTN","LRAPRES",96,0)
 S LRSEL=Y
"RTN","LRAPRES",97,0)
 Q
"RTN","LRAPRES",98,0)
SECTION ;Choose Anatomic Pathology section (AU,SP,CY,EM)
"RTN","LRAPRES",99,0)
 W !
"RTN","LRAPRES",100,0)
 D ^LRAP
"RTN","LRAPRES",101,0)
 I '$D(Y)!('$D(LRSS)) S LRQUIT=1 Q
"RTN","LRAPRES",102,0)
 S:LRO(68)="EM" LRO(68)="ELECTRON MICROSCOPY"
"RTN","LRAPRES",103,0)
 S LRAU=0            ; LRAU = 0 - Not Autopsy
"RTN","LRAPRES",104,0)
 S:LRSS="AU" LRAU=1  ;      = 1 - Autosy
"RTN","LRAPRES",105,0)
 I LRCAPA D  Q:LRQUIT
"RTN","LRAPRES",106,0)
 .S X=""
"RTN","LRAPRES",107,0)
 .S:LRSS="CY" X="CYTOLOGY REPORTING"
"RTN","LRAPRES",108,0)
 .S:LRSS="SP" X="SURGICAL PATH REPORTING"
"RTN","LRAPRES",109,0)
 .D:X'="" X^LRUWK
"RTN","LRAPRES",110,0)
 .S:'$D(X) LRQUIT=1
"RTN","LRAPRES",111,0)
 ;
"RTN","LRAPRES",112,0)
 S LRSOP="Z"
"RTN","LRAPRES",113,0)
 S LRMSG(1)=LRO(68)_" ("_LRABV_")",LRMSG(1,"F")="!?20"
"RTN","LRAPRES",114,0)
 S LRMSG(2)="",LRMSG(2,"F")="!"
"RTN","LRAPRES",115,0)
 D EN^DDIOL(.LRMSG) K LRMSG
"RTN","LRAPRES",116,0)
 Q
"RTN","LRAPRES",117,0)
ACCYR ;Determine Accession Year
"RTN","LRAPRES",118,0)
 D ACCYR^LRAPUTL(.LRAD1,LRH(0),LRAA,LRO(68))
"RTN","LRAPRES",119,0)
 I LRAD1=-1 S LRQUIT=1 Q
"RTN","LRAPRES",120,0)
 I LRAD1 S LRAD=$P(LRAD1,U),LRH(0)=$P(LRAD1,U,2)
"RTN","LRAPRES",121,0)
 Q
"RTN","LRAPRES",122,0)
RELCHK ;Perform series of checks
"RTN","LRAPRES",123,0)
 N LRPAT S LRQUIT=0
"RTN","LRAPRES",124,0)
 I 'LRAU D  Q:LRQUIT
"RTN","LRAPRES",125,0)
 .S LRPAT=+$$GET1^DIQ(LRSF,LRIENS,.02,"I")
"RTN","LRAPRES",126,0)
 .S LRZ=$$GET1^DIQ(LRSF,LRIENS,.03,"I")
"RTN","LRAPRES",127,0)
 .S LRZ(1)=$$GET1^DIQ(LRSF,LRIENS,.13,"I")
"RTN","LRAPRES",128,0)
 .S LRZ(1.1)=$$GET1^DIQ(LRSF,LRIENS,.13)
"RTN","LRAPRES",129,0)
 .S LRZ(2)=$$GET1^DIQ(LRSF,LRIENS,.11,"I")
"RTN","LRAPRES",130,0)
 .I 'LRZ,'LRZ(2) D
"RTN","LRAPRES",131,0)
 ..W $C(7)
"RTN","LRAPRES",132,0)
 ..S LRMSG="No date report completed.  Cannot release."
"RTN","LRAPRES",133,0)
 ..D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPRES",134,0)
 ..S LRQUIT=1
"RTN","LRAPRES",135,0)
 I LRAU D  Q:LRQUIT
"RTN","LRAPRES",136,0)
 .I $G(^LR(LRDFN,"AU"))="" D  Q
"RTN","LRAPRES",137,0)
 ..S LRMSG="No information found for this accession in the "
"RTN","LRAPRES",138,0)
 ..S LRMSG=LRMSG_"LAB DATA file (#63)."
"RTN","LRAPRES",139,0)
 ..D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPRES",140,0)
 ..S LRQUIT=1
"RTN","LRAPRES",141,0)
 .S LRPAT=+$$GET1^DIQ(63,LRDFN_",",13.6,"I")
"RTN","LRAPRES",142,0)
 .S LRZ=$$GET1^DIQ(63,LRDFN_",",13,"I")
"RTN","LRAPRES",143,0)
 .S LRZ(1)=$$GET1^DIQ(63,LRDFN_",",14.8,"I")
"RTN","LRAPRES",144,0)
 .S LRZ(1.1)=$$GET1^DIQ(63,LRDFN_",",14.8)
"RTN","LRAPRES",145,0)
 .S LRZ(2)=$$GET1^DIQ(63,LRDFN_",",14.7,"I")
"RTN","LRAPRES",146,0)
 .;KLL-CHECK FOR PROVISIONAL DATE OR DATE REPORT COMPLETED
"RTN","LRAPRES",147,0)
 .S LRZ(3)=$$GET1^DIQ(63,LRDFN_",",14.9,"I")
"RTN","LRAPRES",148,0)
 .I 'LRZ,'LRZ(3) D
"RTN","LRAPRES",149,0)
 ..W $C(7)
"RTN","LRAPRES",150,0)
 ..S LRMSG="Provisional or date report completed required.  Cannot release."
"RTN","LRAPRES",151,0)
 ..D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPRES",152,0)
 ..S LRQUIT=1
"RTN","LRAPRES",153,0)
 I 'LRPAT,'LRZ(2) D
"RTN","LRAPRES",154,0)
 .W $C(7)
"RTN","LRAPRES",155,0)
 .S LRMSG="Pathologist or Cytotechnologist entry missing. Cannot release."
"RTN","LRAPRES",156,0)
 .D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPRES",157,0)
 .S LRQUIT=1
"RTN","LRAPRES",158,0)
 D:'LRZ(2) SUPCHK
"RTN","LRAPRES",159,0)
 Q:LRQUIT
"RTN","LRAPRES",160,0)
 I LRZ(2) D  Q:LRQUIT
"RTN","LRAPRES",161,0)
 .W $C(7)
"RTN","LRAPRES",162,0)
 .S LRMSG="Report " S:LRZ(2)=1 LRMSG=LRMSG_"has already been "
"RTN","LRAPRES",163,0)
 .S LRMSG=LRMSG_"released "
"RTN","LRAPRES",164,0)
 .S Y=LRZ(2) D DD^%DT S:LRZ(2)>1 LRMSG=LRMSG_Y
"RTN","LRAPRES",165,0)
 .S:LRZ(1)'="" LRMSG=LRMSG_" by "_LRZ(1.1)
"RTN","LRAPRES",166,0)
 .D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPRES",167,0)
 .S:'LRAU LRQUIT=1
"RTN","LRAPRES",168,0)
 ;KLL-DON'T ALLOW UNRELEASE IF REPT COMPLETED DATE EXISTS FOR AU 
"RTN","LRAPRES",169,0)
 I LRZ(2),LRZ S LRQUIT=1
"RTN","LRAPRES",170,0)
 S LRMSG="" D EN^DDIOL(LRMSG,"","!") K LRMSG
"RTN","LRAPRES",171,0)
 I LRZ(2),'LRZ D
"RTN","LRAPRES",172,0)
 .S DIR(0)="YA",DIR("B")="NO"
"RTN","LRAPRES",173,0)
 .S DIR("A")="Unrelease report? "
"RTN","LRAPRES",174,0)
 .D ^DIR
"RTN","LRAPRES",175,0)
 .I 'Y S LRQUIT=1
"RTN","LRAPRES",176,0)
 Q
"RTN","LRAPRES",177,0)
SUPCHK ;Check Supplementary Reports
"RTN","LRAPRES",178,0)
 N LRSR,LRSR1,LRSR2,LRFILE,LRIENS,LRIENS1
"RTN","LRAPRES",179,0)
 S LRSR=0,LRSR1=1
"RTN","LRAPRES",180,0)
 I LRSS'="AU" D
"RTN","LRAPRES",181,0)
 .Q:'+$P($G(^LR(LRDFN,LRSS,LRI,1.2,0)),U,4)
"RTN","LRAPRES",182,0)
 .S LRFILE=+$$GET1^DID(LRSF,1.2,"","SPECIFIER")
"RTN","LRAPRES",183,0)
 .S LRIENS1=LRI_","_LRDFN_","
"RTN","LRAPRES",184,0)
 .F  S LRSR=$O(^LR(LRDFN,LRSS,LRI,1.2,LRSR)) Q:LRSR'>0!('LRSR1)  D
"RTN","LRAPRES",185,0)
 ..S LRIENS=LRSR_","_LRIENS1
"RTN","LRAPRES",186,0)
 ..S LRSR1=+$$GET1^DIQ(LRFILE,LRIENS,.02,"I")
"RTN","LRAPRES",187,0)
 ..I 'LRSR1 S LRSR2=$$GET1^DIQ(LRFILE,LRIENS,.01)
"RTN","LRAPRES",188,0)
 I LRSS="AU" D
"RTN","LRAPRES",189,0)
 .Q:'+$P($G(^LR(LRDFN,84,0)),U,4)
"RTN","LRAPRES",190,0)
 .S LRFILE=63.324,LRIENS1=LRDFN_","
"RTN","LRAPRES",191,0)
 .F  S LRSR=$O(^LR(LRDFN,84,LRSR)) Q:LRSR'>0!('LRSR1)  D
"RTN","LRAPRES",192,0)
 ..S LRIENS=LRSR_","_LRIENS1
"RTN","LRAPRES",193,0)
 ..S LRSR1=+$$GET1^DIQ(LRFILE,LRIENS,.02,"I")
"RTN","LRAPRES",194,0)
 ..I 'LRSR1 S LRSR2=$$GET1^DIQ(LRFILE,LRIENS,.01)
"RTN","LRAPRES",195,0)
 I 'LRSR1 D
"RTN","LRAPRES",196,0)
 .S LRMSG="Supplementary report "_LRSR2_" has not been released.  "
"RTN","LRAPRES",197,0)
 .S LRMSG=LRMSG_"Cannot release."
"RTN","LRAPRES",198,0)
 .D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPRES",199,0)
 .S LRQUIT=1
"RTN","LRAPRES",200,0)
 Q
"RTN","LRAPRES",201,0)
BROWSE ;Display the report in the browser
"RTN","LRAPRES",202,0)
 S DIR(0)="YA",DIR("B")="YES"
"RTN","LRAPRES",203,0)
 S DIR("A")="View the report before signing? "
"RTN","LRAPRES",204,0)
 D ^DIR Q:'Y
"RTN","LRAPRES",205,0)
 K ^TMP("LRAPBR",$J)
"RTN","LRAPRES",206,0)
 S LRMSG="*** Report is being processed.  One moment please. ***"
"RTN","LRAPRES",207,0)
 S LRMSG=$$CJ^XLFSTR(LRMSG,IOM)
"RTN","LRAPRES",208,0)
 D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES",209,0)
 D INIT^LRAPBR(LRAA,LRSS,LRI,LRDFN,LRO(68),LRAU,0)
"RTN","LRAPRES",210,0)
 Q
"RTN","LRAPRES",211,0)
ESIG ;Prompt for electronic signature
"RTN","LRAPRES",212,0)
 S LRQUIT=0
"RTN","LRAPRES",213,0)
 D SIG^XUSESIG
"RTN","LRAPRES",214,0)
 I X1="" D  Q
"RTN","LRAPRES",215,0)
 .W "  SIGNATURE NOT VERIFIED"
"RTN","LRAPRES",216,0)
 .S LRQUIT=1
"RTN","LRAPRES",217,0)
 Q
"RTN","LRAPRES",218,0)
TIUPREP ;
"RTN","LRAPRES",219,0)
 K ^TMP("TIUP",$J)
"RTN","LRAPRES",220,0)
 S LRMSG="*** Report is being processed"
"RTN","LRAPRES",221,0)
 ;Exclude patient files 67, 67.1, 67.2, 67.3, 62.3 from TIU storage
"RTN","LRAPRES",222,0)
 I LRDPF'=62.3,LRDPF'[67 S LRMSG=LRMSG_" for storage in TIU"
"RTN","LRAPRES",223,0)
 S LRMSG=LRMSG_".  One moment please. ***"
"RTN","LRAPRES",224,0)
 S LRMSG=$$CJ^XLFSTR(LRMSG,IOM)
"RTN","LRAPRES",225,0)
 D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES",226,0)
 D INIT^LRAPBR(LRAA,LRSS,LRI,LRDFN,LRO(68),LRAU,1,LRNTIME)
"RTN","LRAPRES",227,0)
 Q
"RTN","LRAPRES",228,0)
RELEASE ;
"RTN","LRAPRES",229,0)
 I 'LRAU D
"RTN","LRAPRES",230,0)
 .S LRRC=$$GET1^DIQ(LRSF,LRIENS,.1,"I")
"RTN","LRAPRES",231,0)
 .I LRCAPA,'LRAU D C^LRAPSWK
"RTN","LRAPRES",232,0)
 .S DR=".11////^S X=LRNTIME;.13////^S X=DUZ"
"RTN","LRAPRES",233,0)
 .S DIE="^LR(LRDFN,LRSS,",DA=LRI,DA(1)=LRDFN
"RTN","LRAPRES",234,0)
 .;KLL-Set LRA for xref call to LRWOMEN
"RTN","LRAPRES",235,0)
 .S LRA=^LR(LRDFN,LRSS,LRI,0)
"RTN","LRAPRES",236,0)
 I LRAU D
"RTN","LRAPRES",237,0)
 .S DR="14.7////^S X=$S(LRZ(2):""@"",1:LRNTIME);"
"RTN","LRAPRES",238,0)
 .S DR=DR_"14.8////^S X=$S(LRZ(2):""@"",1:DUZ);"
"RTN","LRAPRES",239,0)
 .S DIE="^LR(",DA=LRDFN
"RTN","LRAPRES",240,0)
 D CK^LRU
"RTN","LRAPRES",241,0)
 Q:$D(LR("CK"))
"RTN","LRAPRES",242,0)
 D ^DIE
"RTN","LRAPRES",243,0)
 D FRE^LRU
"RTN","LRAPRES",244,0)
 S LRMSG="*** Report "
"RTN","LRAPRES",245,0)
 I LRZ(2),LRAU S LRMSG=LRMSG_"un"
"RTN","LRAPRES",246,0)
 S LRMSG=LRMSG_"released. ***"
"RTN","LRAPRES",247,0)
 D EN^DDIOL($$CJ^XLFSTR(LRMSG,IOM),"","!!") K MSG
"RTN","LRAPRES",248,0)
 I "CYSP"[LRSS,LRCAPA D WKLD Q
"RTN","LRAPRES",249,0)
 ;I LRCAPA,"SPCYEM"[LRSS,LRD(1)'="","MBA"[LRD(1) D C1^LRAPSWK
"RTN","LRAPRES",250,0)
 Q
"RTN","LRAPRES",251,0)
STORE ;Store report in TIU
"RTN","LRAPRES",252,0)
 N LRTITLE,LRIENS,LRFILE,LRFDA,LRTIUPTR
"RTN","LRAPRES",253,0)
 ;Display informational message if referral patient
"RTN","LRAPRES",254,0)
 I LRDPF=62.3!(LRDPF[67) D REFRRL^LRAPUTL  Q
"RTN","LRAPRES",255,0)
 ;KLL-EDIT ADDED FOR MULTIDIVISIONAL LABS,TRANSLATE LRSS TO CORRECT
"RTN","LRAPRES",256,0)
 ;    NAME TO ENSURE SUCCESSFUL MATCH IN TIU(8925.1)
"RTN","LRAPRES",257,0)
 S:LRSS="SP" LRO68="SURGICAL PATHOLOGY"
"RTN","LRAPRES",258,0)
 S:LRSS="CY" LRO68="CYTOPATHOLOGY"
"RTN","LRAPRES",259,0)
 S:LRSS="EM" LRO68="ELECTRON MICROSCOPY"
"RTN","LRAPRES",260,0)
 S:LRSS="AU" LRO68="AUTOPSY"
"RTN","LRAPRES",261,0)
 S LRTITLE=$$FIND1^DIC(8925.1,,"O","LR "_LRO68_" REPORT")
"RTN","LRAPRES",262,0)
 D NEW^TIUPNAPI(.LRTIUPTR,DFN,DUZ,LRNTIME,LRTITLE,,,,DUZ)
"RTN","LRAPRES",263,0)
 I +LRTIUPTR=-1 D  Q
"RTN","LRAPRES",264,0)
 .S LRMSG="*** Report storage in TIU failed. ***"
"RTN","LRAPRES",265,0)
 .S LRMSG=$$CJ^XLFSTR(LRMSG,IOM)
"RTN","LRAPRES",266,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES",267,0)
 .S LRQUIT=1
"RTN","LRAPRES",268,0)
 S LRMSG="*** Report storage in TIU is complete. ***"
"RTN","LRAPRES",269,0)
 S LRMSG=$$CJ^XLFSTR(LRMSG,IOM)
"RTN","LRAPRES",270,0)
 D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES",271,0)
 ;KLL-Calculate checksum of TIU report text 
"RTN","LRAPRES",272,0)
 S LRVAL="^TIU(8925,"_+LRTIUPTR_",""TEXT"")"
"RTN","LRAPRES",273,0)
 S LRCHKSUM=$$CHKSUM^XUSESIG1(LRVAL)
"RTN","LRAPRES",274,0)
 ;Store pointer & checksum information in the LAB DATA (#63) file
"RTN","LRAPRES",275,0)
 S LRIENS="+1,"_$S('LRAU:LRI_",",1:"")_LRDFN_","
"RTN","LRAPRES",276,0)
 S LRFILE=$S(LRSS="SP":63.19,LRSS="CY":63.47,LRSS="EM":63.49,1:"")
"RTN","LRAPRES",277,0)
 S:LRFILE="" LRFILE=$S(LRSS="AU":63.101,1:"")
"RTN","LRAPRES",278,0)
 S LRFDA(1,LRFILE,LRIENS,.01)=LRNTIME
"RTN","LRAPRES",279,0)
 S LRFDA(1,LRFILE,LRIENS,1)=+LRTIUPTR
"RTN","LRAPRES",280,0)
 S LRFDA(1,LRFILE,LRIENS,2)=LRCHKSUM
"RTN","LRAPRES",281,0)
 D UPDATE^DIE("","LRFDA(1)")
"RTN","LRAPRES",282,0)
 D RETRACT^LRAPRES1(LRDFN,LRSS,LRI,+LRTIUPTR)
"RTN","LRAPRES",283,0)
 Q
"RTN","LRAPRES",284,0)
WKLD ;Capture workload
"RTN","LRAPRES",285,0)
 K LRFDA,ERR,IENS,OROUT,ORIEN
"RTN","LRAPRES",286,0)
 S LRK=$P(^LR(LRDFN,LRSS,LRI,0),"^",11) Q:'LRK
"RTN","LRAPRES",287,0)
 Q:$D(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRT,0))
"RTN","LRAPRES",288,0)
 S RNUM=1
"RTN","LRAPRES",289,0)
 S IENS="+"_RNUM_","_LRAN_","_LRAD_","_LRAA_","
"RTN","LRAPRES",290,0)
 S FILE=68.04,ORIEN(1)=LRT
"RTN","LRAPRES",291,0)
 S LRFDA(1,FILE,IENS,.01)=LRT
"RTN","LRAPRES",292,0)
 S LRFDA(1,FILE,IENS,1)=50
"RTN","LRAPRES",293,0)
 S LRFDA(1,FILE,IENS,3)=DUZ
"RTN","LRAPRES",294,0)
 S LRFDA(1,FILE,IENS,4)=LRK
"RTN","LRAPRES",295,0)
 S FILE1=68.14
"RTN","LRAPRES",296,0)
 S C=0 F  S C=$O(LRT(C)) Q:'C  D
"RTN","LRAPRES",297,0)
 .S RNUM=RNUM+1
"RTN","LRAPRES",298,0)
 .S ORIEN(RNUM)=C
"RTN","LRAPRES",299,0)
 .S IENS1="+"_RNUM_","_IENS
"RTN","LRAPRES",300,0)
 .S LRFDA(1,FILE1,IENS1,.01)=C
"RTN","LRAPRES",301,0)
 .S LRFDA(1,FILE1,IENS1,.02)=1
"RTN","LRAPRES",302,0)
 .S LRFDA(1,FILE1,IENS1,.03)=0
"RTN","LRAPRES",303,0)
 .S LRFDA(1,FILE1,IENS1,.04)=0
"RTN","LRAPRES",304,0)
 .S LRFDA(1,FILE1,IENS1,1)=LRK
"RTN","LRAPRES",305,0)
 .S LRFDA(1,FILE1,IENS1,2)=DUZ
"RTN","LRAPRES",306,0)
 .S LRFDA(1,FILE1,IENS1,3)=DUZ(2)
"RTN","LRAPRES",307,0)
 .S LRFDA(1,FILE1,IENS1,4)=LRAA
"RTN","LRAPRES",308,0)
 .S LRFDA(1,FILE1,IENS1,5)=LRAA
"RTN","LRAPRES",309,0)
 .S LRFDA(1,FILE1,IENS1,6)=LRAA
"RTN","LRAPRES",310,0)
 D UPDATE^DIE("","LRFDA(1)","ORIEN","OROUT")
"RTN","LRAPRES",311,0)
 Q
"RTN","LRAPRES",312,0)
END ;Clean-up variables and quit
"RTN","LRAPRES",313,0)
 K LRAD1,LRDATA,LRAU,LRRDTE,LRTEXT,LRSEL,LRFILE,LRIENS,LRIENS1
"RTN","LRAPRES",314,0)
 K LRFDA,ERR,IENS,OROUT,ORIEN,LRTMP
"RTN","LRAPRES",315,0)
 K ^TMP("LRAPBR",$J),^TMP("TIUP",$J)
"RTN","LRAPRES",316,0)
 D:$T(CLEAN^LRCAPES)'="" CLEAN^LRCAPES
"RTN","LRAPRES",317,0)
 D V^LRU
"RTN","LRAPRES",318,0)
 Q
"RTN","LRAPRES1")
0^27^B40373155
"RTN","LRAPRES1",1,0)
LRAPRES1 ;DALOI/WTY/KLL - AP ESIG RELEASE REPORT/ALERT;11/13/01
"RTN","LRAPRES1",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPRES1",3,0)
 ;
"RTN","LRAPRES1",4,0)
 ;Reference  to FILE^TIUSRVP supported by IA #3540
"RTN","LRAPRES1",5,0)
 ;Reference  to ^TIULQ supported by IA #2693 
"RTN","LRAPRES1",6,0)
 ;
"RTN","LRAPRES1",7,0)
MAIN(LRDFN,LRSS,LRI,LRSF,LRP,LRAC) ;Main subroutine
"RTN","LRAPRES1",8,0)
 Q:'$D(LRDFN)!('$D(LRSS))!('$D(LRP))!('$D(LRAC))
"RTN","LRAPRES1",9,0)
 N LRDOCS,LRMSG,XQA,LRC,LRDOCSN,LRNUM,LRADL,LRMORE,LRQUIT
"RTN","LRAPRES1",10,0)
 N DIR,DIRUT,DTOUT,DUOUT,X,Y,DIC,XQA,XQAMSG
"RTN","LRAPRES1",11,0)
 S LRQUIT=0
"RTN","LRAPRES1",12,0)
 D ASK
"RTN","LRAPRES1",13,0)
 Q:LRQUIT
"RTN","LRAPRES1",14,0)
 D MORE
"RTN","LRAPRES1",15,0)
 Q:LRQUIT
"RTN","LRAPRES1",16,0)
 D:LRMORE LOOKUP
"RTN","LRAPRES1",17,0)
 D ALERT
"RTN","LRAPRES1",18,0)
 Q
"RTN","LRAPRES1",19,0)
ASK ;Ask if alert is to be sent
"RTN","LRAPRES1",20,0)
 W !
"RTN","LRAPRES1",21,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","LRAPRES1",22,0)
 S DIR("A")="Do you wish to send an alert"
"RTN","LRAPRES1",23,0)
 S DIR("??")="^D AHELP^LRAPRES1"
"RTN","LRAPRES1",24,0)
 D ^DIR
"RTN","LRAPRES1",25,0)
 I 'Y S LRQUIT=1 Q
"RTN","LRAPRES1",26,0)
 S:$G(LRSF)="" LRSF=63
"RTN","LRAPRES1",27,0)
 D GETDOCS^LRAPUTL(.LRDOCS,LRDFN,LRSS,$G(LRI),LRSF)
"RTN","LRAPRES1",28,0)
 S:LRDOCS(1)=LRDOCS(2) LRDOCS(2)=0
"RTN","LRAPRES1",29,0)
 S LRQUIT=1
"RTN","LRAPRES1",30,0)
 F LRC=1:1:2 D
"RTN","LRAPRES1",31,0)
 .I LRDOCS(LRC) D
"RTN","LRAPRES1",32,0)
 ..S LRQUIT=0
"RTN","LRAPRES1",33,0)
 ..S X=LRDOCS(LRC) D D^LRUA S LRDOCSN(LRC)=X
"RTN","LRAPRES1",34,0)
 ..I LRDOCSN(LRC)'="" S XQA(LRDOCS(LRC))=""
"RTN","LRAPRES1",35,0)
 ;Q:LRQUIT
"RTN","LRAPRES1",36,0)
 S LRNUM=1
"RTN","LRAPRES1",37,0)
 K LRMSG
"RTN","LRAPRES1",38,0)
 I 'LRQUIT D
"RTN","LRAPRES1",39,0)
 .S LRMSG(LRNUM)="Alert will be sent to:",LRMSG(LRNUM,"F")="!!"
"RTN","LRAPRES1",40,0)
 .I LRDOCS(1) D
"RTN","LRAPRES1",41,0)
 ..S LRNUM=LRNUM+1,LRMSG(LRNUM)=LRDOCSN(1),LRMSG(LRNUM,"F")="?24"
"RTN","LRAPRES1",42,0)
 .I LRDOCS(2) D
"RTN","LRAPRES1",43,0)
 ..S LRNUM=LRNUM+1,LRMSG(LRNUM)=LRDOCSN(2)
"RTN","LRAPRES1",44,0)
 ..S LRMSG(LRNUM,"F")=$S(LRDOCS(1):"!",1:"")_"?24"
"RTN","LRAPRES1",45,0)
 I LRQUIT D
"RTN","LRAPRES1",46,0)
 .S LRMSG(LRNUM)="No Physician or PCP selected for alert"
"RTN","LRAPRES1",47,0)
 .S LRMSG(LRNUM,"F")="!!"
"RTN","LRAPRES1",48,0)
 .S LRQUIT=0
"RTN","LRAPRES1",49,0)
 D EN^DDIOL(.LRMSG)
"RTN","LRAPRES1",50,0)
 Q
"RTN","LRAPRES1",51,0)
MORE ;Add names or mail groups to the lookup list?
"RTN","LRAPRES1",52,0)
 W !
"RTN","LRAPRES1",53,0)
 S LRMORE=1
"RTN","LRAPRES1",54,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","LRAPRES1",55,0)
 S DIR("A")="Send the alert to additional names or mail groups"
"RTN","LRAPRES1",56,0)
 D ^DIR
"RTN","LRAPRES1",57,0)
 I Y=0 S LRMORE=0 Q
"RTN","LRAPRES1",58,0)
 I $D(DUOUT)!($D(DTOUT)) S LRQUIT=1
"RTN","LRAPRES1",59,0)
 Q
"RTN","LRAPRES1",60,0)
LOOKUP ;Add additional names or mail groups to alert list.
"RTN","LRAPRES1",61,0)
 F  D  Q:LRQUIT
"RTN","LRAPRES1",62,0)
 .W !
"RTN","LRAPRES1",63,0)
 .K DIR
"RTN","LRAPRES1",64,0)
 .;S DIR(0)="F^3:30^I X'?1""U."".E&(X'?1""G."".E) K X"
"RTN","LRAPRES1",65,0)
 .S DIR(0)="F^3:30^I X["".""&(X'?1""G."".E) K X"
"RTN","LRAPRES1",66,0)
 .S DIR("A")="Enter name or mail group"
"RTN","LRAPRES1",67,0)
 .S DIR("?")="Enter lastname,firstname OR G.mailgroup OR ^ to exit"
"RTN","LRAPRES1",68,0)
 .D ^DIR
"RTN","LRAPRES1",69,0)
 .I $D(DUOUT)!($D(DTOUT)) S LRQUIT=1 Q
"RTN","LRAPRES1",70,0)
 .S X=Y,LRADL=""
"RTN","LRAPRES1",71,0)
 .I Y["." S LRADL=$P(Y,"."),X=$P(Y,".",2)
"RTN","LRAPRES1",72,0)
 .K DIC
"RTN","LRAPRES1",73,0)
 .S DIC(0)="QEZ"
"RTN","LRAPRES1",74,0)
 .S DIC=$S(LRADL="G":3.8,1:200)
"RTN","LRAPRES1",75,0)
 .D ^DIC
"RTN","LRAPRES1",76,0)
 .Q:Y=-1
"RTN","LRAPRES1",77,0)
 .S:LRADL="" XQA($P(Y,"^"))=""
"RTN","LRAPRES1",78,0)
 .S:LRADL="G" XQA("G."_$P(Y,"^",2))=""
"RTN","LRAPRES1",79,0)
 .K LRMSG
"RTN","LRAPRES1",80,0)
 .S LRMSG=$S(LRADL="G":"Mail group ",1:"User ")_$P(Y,"^",2)
"RTN","LRAPRES1",81,0)
 .S LRMSG=LRMSG_" added to alert list."
"RTN","LRAPRES1",82,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES1",83,0)
 Q
"RTN","LRAPRES1",84,0)
ALERT ;Send the alert
"RTN","LRAPRES1",85,0)
 S XQAMSG="Pathology report signed for "_LRAC_" - "_$E(LRP,1,30)
"RTN","LRAPRES1",86,0)
 D SETUP^XQALERT
"RTN","LRAPRES1",87,0)
 S LRMSG="Alerts have been sent."
"RTN","LRAPRES1",88,0)
 D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES1",89,0)
 K LRMSG
"RTN","LRAPRES1",90,0)
 Q
"RTN","LRAPRES1",91,0)
AHELP ;Help Frame
"RTN","LRAPRES1",92,0)
 K LRMSG
"RTN","LRAPRES1",93,0)
 S LRMSG(1)="If answered 'Yes', the alert will notify the primary care"
"RTN","LRAPRES1",94,0)
 S LRMSG(1,"F")="!"
"RTN","LRAPRES1",95,0)
 S LRMSG(2)="provider  and  the surgeon/physician that this report has"
"RTN","LRAPRES1",96,0)
 S LRMSG(3)="been  electronically  signed  and  is  now  available for"
"RTN","LRAPRES1",97,0)
 S LRMSG(4)="viewing.   You will also have the opportunity to send the"
"RTN","LRAPRES1",98,0)
 S LRMSG(5)="alert to additional names or mail groups."
"RTN","LRAPRES1",99,0)
 D EN^DDIOL(.LRMSG)
"RTN","LRAPRES1",100,0)
 Q
"RTN","LRAPRES1",101,0)
RETRACT(LRDFN,LRSS,LRI,LRTIUPTR) ;
"RTN","LRAPRES1",102,0)
 ;Change prior TIU versions of report to RETRACTED status
"RTN","LRAPRES1",103,0)
 N LRROOT,LRIENS,LRFILE,LRTIUP,LRTIUAR,LRERR,LRSTAT,LRTIUX,LREXRR
"RTN","LRAPRES1",104,0)
 I LRSS=""!("AUSPEMCY"'[LRSS) S LRPTR=0 Q
"RTN","LRAPRES1",105,0)
 I LRSS="AU" D
"RTN","LRAPRES1",106,0)
 .S LRROOT="^LR(LRDFN,101,""C""",LRIENS=LRDFN_","
"RTN","LRAPRES1",107,0)
 .S LRFILE=63.101
"RTN","LRAPRES1",108,0)
 I LRSS'="AU" D
"RTN","LRAPRES1",109,0)
 .S LRROOT="^LR(LRDFN,LRSS,LRI,.05,""C"""
"RTN","LRAPRES1",110,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPRES1",111,0)
 .S LRFILE=$S(LRSS="SP":63.19,LRSS="CY":63.47,LRSS="EM":63.49,1:"")
"RTN","LRAPRES1",112,0)
 Q:'$D(@(LRROOT_")"))
"RTN","LRAPRES1",113,0)
 S LRTIUP=0,LRTIUX(.05)=15
"RTN","LRAPRES1",114,0)
 F  S LRTIUP=$O(@(LRROOT_",LRTIUP)"))  Q:LRTIUP'>0!(LRTIUP=LRTIUPTR)  D
"RTN","LRAPRES1",115,0)
 .K LRTIUAR S (LRSTAT,LRERR)=0
"RTN","LRAPRES1",116,0)
 .D EXTRACT^TIULQ(LRTIUP,"LRTIUAR",.LRERR,".05",,,"I")
"RTN","LRAPRES1",117,0)
 .Q:+LRERR
"RTN","LRAPRES1",118,0)
 .M LRSTAT=LRTIUAR(LRTIUP,.05,"I")
"RTN","LRAPRES1",119,0)
 .Q:LRSTAT'=7  ;Quit if current status is not COMPLETED
"RTN","LRAPRES1",120,0)
 .D FILE^TIUSRVP(.LREXRR,LRTIUP,.LRTIUX)
"RTN","LRAPRES1",121,0)
 .;Update new TIU version of report with previous TIU pointer value
"RTN","LRAPRES1",122,0)
 .N LREXRR,LRTIUX
"RTN","LRAPRES1",123,0)
 .S LRTIUX(1406)=LRTIUP
"RTN","LRAPRES1",124,0)
 .D FILE^TIUSRVP(.LREXRR,LRTIUPTR,.LRTIUX)
"RTN","LRAPRES1",125,0)
 Q
"RTN","LRAPRES1",126,0)
CLSSCHK(DUZ,LREND) ;Determine if user has the proper class settings and
"RTN","LRAPRES1",127,0)
 ;PROVIDER key
"RTN","LRAPRES1",128,0)
 N LRMSG,LRPRCLSS,LRPCEXP,LRVCDE,LRPCSTR,LRMTCH
"RTN","LRAPRES1",129,0)
 ;First, check for PROVIDER key
"RTN","LRAPRES1",130,0)
 I '$D(^XUSEC("PROVIDER",DUZ)) D  Q
"RTN","LRAPRES1",131,0)
 .K LRMSG S LRMSG=$C(7)_"Electronic signature not authorized.  Missing "
"RTN","LRAPRES1",132,0)
 .S LRMSG=LRMSG_"PROVIDER key."
"RTN","LRAPRES1",133,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES1",134,0)
 .K LRMSG S LREND=1
"RTN","LRAPRES1",135,0)
 ;Next, check the provider class
"RTN","LRAPRES1",136,0)
 S LRPRCLSS=$$GET1^DIQ(200,DUZ_",",53.5)
"RTN","LRAPRES1",137,0)
 ;PROVIDER CL MUST CONTAIN PHYSICIAN, OR CYTOTECH ONLY FOR CY SECTION
"RTN","LRAPRES1",138,0)
 S LRMTCH=0
"RTN","LRAPRES1",139,0)
 I LRPRCLSS'["PHYSICIAN" D
"RTN","LRAPRES1",140,0)
 .I LRPRCLSS'["CYTOTECH" S LRMTCH=1
"RTN","LRAPRES1",141,0)
 .I LRSS'="CY" S LRMTCH=1
"RTN","LRAPRES1",142,0)
 I LRMTCH=1 D  Q
"RTN","LRAPRES1",143,0)
 .K LRMSG
"RTN","LRAPRES1",144,0)
 .S LRMSG(1)=$C(7)_"You are not authorized to electronically sign "
"RTN","LRAPRES1",145,0)
 .S LRMSG(1)=LRMSG(1)_"reports."
"RTN","LRAPRES1",146,0)
 .S LRMSG(1,"F")="!!"
"RTN","LRAPRES1",147,0)
 .S LRMSG(2)="PROVIDER CLASS must include PHYSICIAN,"
"RTN","LRAPRES1",148,0)
 .S LRMSG(2,"F")="!"
"RTN","LRAPRES1",149,0)
 .S LRMSG(3)="  OR CYTOTECHNOLOGIST FOR CY SECTIONS ONLY."
"RTN","LRAPRES1",150,0)
 .S LRMSG(3,"F")="!"
"RTN","LRAPRES1",151,0)
 .D EN^DDIOL(.LRMSG) K LRMSG
"RTN","LRAPRES1",152,0)
 .S LREND=1
"RTN","LRAPRES1",153,0)
 ;Finally, check the person class
"RTN","LRAPRES1",154,0)
 S LRPCSTR=$$GET^XUA4A72(DUZ)   ;Supported reference #1625
"RTN","LRAPRES1",155,0)
 I LRPCSTR<0 D  Q
"RTN","LRAPRES1",156,0)
 .K LRMSG
"RTN","LRAPRES1",157,0)
 .S LRMSG="PERSON CLASS is inactive or undefined.  Electronic signature"
"RTN","LRAPRES1",158,0)
 .S LRMSG=LRMSG_" is not authorized."
"RTN","LRAPRES1",159,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES1",160,0)
 .K LRMSG
"RTN","LRAPRES1",161,0)
 .S LREND=1
"RTN","LRAPRES1",162,0)
 S LRPCEXP=+$P(LRPCSTR,"^",6)
"RTN","LRAPRES1",163,0)
 I LRPCEXP D  Q
"RTN","LRAPRES1",164,0)
 .K LRMSG
"RTN","LRAPRES1",165,0)
 .S LRMSG="PERSON CLASS has expired.  Electronic signature"
"RTN","LRAPRES1",166,0)
 .S LRMSG=LRMSG_" is not authorized."
"RTN","LRAPRES1",167,0)
 .D EN^DDIOL(LRMSG,"","!!") K LRMSG
"RTN","LRAPRES1",168,0)
 .S LREND=1
"RTN","LRAPRES1",169,0)
 S LRVCDE=$P(LRPCSTR,"^",7),LRMTCH=0
"RTN","LRAPRES1",170,0)
 ;CORRECT PERSON CLASS SHOULD MATCH PROVIDER CLASS
"RTN","LRAPRES1",171,0)
 I LRPRCLSS["PHYSICIAN" D
"RTN","LRAPRES1",172,0)
 .I $E(LRVCDE,1,6)="V11370","123568"[+$E(LRVCDE,7) S LRMTCH=1
"RTN","LRAPRES1",173,0)
 .I $E(LRVCDE,1,6)="V11371","03"[+$E(LRVCDE,7) S LRMTCH=1
"RTN","LRAPRES1",174,0)
 I LRPRCLSS["CYTOTECH" D
"RTN","LRAPRES1",175,0)
 .I LRVCDE="V150113" S LRMTCH=1
"RTN","LRAPRES1",176,0)
 I 'LRMTCH D
"RTN","LRAPRES1",177,0)
 .K LRMSG
"RTN","LRAPRES1",178,0)
 .S LRMSG="Invalid PERSON CLASS.  Electronic Signature is not "
"RTN","LRAPRES1",179,0)
 .S LRMSG=LRMSG_"authorized."
"RTN","LRAPRES1",180,0)
 .D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAPRES1",181,0)
 .K LRMSG
"RTN","LRAPRES1",182,0)
 .S LREND=1
"RTN","LRAPRES1",183,0)
 Q
"RTN","LRAPS1")
0^52^B11430468
"RTN","LRAPS1",1,0)
LRAPS1 ;AVAMC/REG/CYM/KLL - ANATOMIC PATH PRINT ;2/9/98  08:04 ;
"RTN","LRAPS1",2,0)
 ;;5.2;LAB SERVICE;**72,173,201,259**;Sep 27, 1994
"RTN","LRAPS1",3,0)
 S LRA("A")="Y"
"RTN","LRAPS1",4,0)
S ;from LRAPS
"RTN","LRAPS1",5,0)
 F S="SP","CY","EM" D HDR1 Q:LRA("A")]""  F LRI=0:0 S LRI=$O(^LR(LRDFN,S,LRI)) Q:'LRI  D:$Y>(IOSL-3) M Q:LRA("A")]""  D EN
"RTN","LRAPS1",6,0)
 Q
"RTN","LRAPS1",7,0)
EN S X=^LR(LRDFN,S,LRI,0),LR("PATH")=$P(X,U,2),N=$P(X,"^",6),N(11)=$P(X,"^",11),X=$P(X,"^",10),X=$P(X,"."),H(2)=$E(X,1,3),LRH(3)=$$Y2K^LRX(X)
"RTN","LRAPS1",8,0)
 I LR("PATH")]"" S LR("PATH")=$$EXTERNAL^DILFD(63.08,.02,"",LR("PATH"),LR("PATH"))
"RTN","LRAPS1",9,0)
 S:N="" N="?" S:'H(2) H(2)="?" D:$Y>(IOSL-3) M
"RTN","LRAPS1",10,0)
 Q:LRA("A")]""  W !?2,"Organ/tissue:",?17,"Date rec'd: ",LRH(3),?43,"Acc #:",N,?64,$E(LR("PATH"),1,12)
"RTN","LRAPS1",11,0)
 I 'N(11) W !?5,"Report not verified." Q
"RTN","LRAPS1",12,0)
 ;DON'T DISPLAY SNOMED CODES IF USER DOESN'T HAVE LRLAB KEY
"RTN","LRAPS1",13,0)
 Q:'$D(^XUSEC("LRLAB",DUZ))
"RTN","LRAPS1",14,0)
 F O=0:0 S O=$O(^LR(LRDFN,S,LRI,2,O)) Q:'O  D:$Y>(IOSL-3) HDR2 Q:LRA("A")]""  S X=^LR(LRDFN,S,LRI,2,O,0),W(3)=$P(X,"^",3),O(6)=$P(^LAB(61,+X,0),"^") W !?5,O(6) W:W(3) " ",W(3)," gm" D L
"RTN","LRAPS1",15,0)
 I $D(LRQ(3)) F B=0:0 S B=$O(^LR(LRDFN,S,LRI,99,B)) Q:'B  W !?5,$E(^(B,0),1,74)
"RTN","LRAPS1",16,0)
 Q
"RTN","LRAPS1",17,0)
L F B=0:0 S B=$O(^LR(LRDFN,S,LRI,2,O,3,B)) Q:'B  S B(1)=+^(B,0) D:$Y>(IOSL-3) HDR3 Q:LRA("A")]""  W !?10,$P(^LAB(61.3,B(1),0),"^")
"RTN","LRAPS1",18,0)
 F B=0:0 S B=$O(^LR(LRDFN,S,LRI,2,O,4,B)) Q:'B  S X=^(B,0),B(1)=+X,B(2)=$P(X,"^",2) D:$Y>(IOSL-3) HDR3 Q:LRA("A")]""  W !?10,$P(^LAB(61.5,B(1),0),"^") W:B(2)]"" " (",$S(B(2)=0:"Negative",B(2)=1:"Positive",1:"?"),")"
"RTN","LRAPS1",19,0)
 F B=0:0 S B=$O(^LR(LRDFN,S,LRI,2,O,1,B)) Q:'B  S B(1)=+^(B,0) D:$Y>(IOSL-3) HDR3 Q:LRA("A")]""  W !?10,$P(^LAB(61.4,B(1),0),"^")
"RTN","LRAPS1",20,0)
 F M=0:0 S M=$O(^LR(LRDFN,S,LRI,2,O,2,M)) Q:'M  S M(1)=+^(M,0) D:$Y>(IOSL-3) HDR3 Q:LRA("A")]""  W !?10,$P(^LAB(61.1,M(1),0),"^") D E
"RTN","LRAPS1",21,0)
 F E=0:0 S E=$O(^LR(LRDFN,S,LRI,2,O,5,E)) Q:'E  S E(1)=^(E,0),Y=$P(E(1),"^",2),E(3)=$P(E(1),"^",3),E(4)=$P(E(1),"^")_":",E(4)=$P($P(LR(S),E(4),2),";") D D^LRU S E(2)=Y D:$Y>(IOSL-12) HDR3 W !?5,E(4)," ",E(3)," Date: ",E(2)
"RTN","LRAPS1",22,0)
 Q
"RTN","LRAPS1",23,0)
E F E=0:0 S E=$O(^LR(LRDFN,S,LRI,2,O,2,M,1,E)) Q:'E  S E(1)=+^(E,0) D:$Y>(IOSL-3) HDR3 Q:LRA("A")]""  W !?12,$P(^LAB(61.2,E(1),0),"^")
"RTN","LRAPS1",24,0)
 Q
"RTN","LRAPS1",25,0)
HDR1 D:$Y>(IOSL-3) M Q:'$O(^LR(LRDFN,S,0))!(LRA("A")]"")  W !,LR("%")
"RTN","LRAPS1",26,0)
 W !?30,$S(S="SP":"SURGICAL PATHOLOGY",S="CY":"CYTOPATHOLOGY",S="EM":"ELECTRON MICROSCOPY",1:"") Q
"RTN","LRAPS1",27,0)
HDR2 D M Q:LRA("A")]""
"RTN","LRAPS1",28,0)
HDR21 W !?3,"Organ/tissue:",?20,"Date rec'd: ",LRH(3),?43,"Acc #:",$J(N,5),?64,$E(LR("PATH"),1,12) Q
"RTN","LRAPS1",29,0)
HDR3 D M Q:LRA("A")]""  D HDR21 W !?5,O(6) W:W(3) " ",W(3)," gm" Q
"RTN","LRAPS1",30,0)
 ;
"RTN","LRAPS1",31,0)
M Q:$D(ORHFS)  ;Don't allow reads if coming from CPRS
"RTN","LRAPS1",32,0)
 Q:LRA("A")]""  R !,"'^' TO STOP ",LRA("A"):DTIME S:'$T LRA("A")="^" Q:LRA("A")="^"  I LRA("A")]"" W $C(7) G M
"RTN","LRAPS1",33,0)
 W @IOF,$E(LRP,1,30),?31,SSN,?50,"DOB: ",DOB,?68,"LOC: ",$E(LRLLOC,1,5) D HDR1 Q
"RTN","LRAPSNMD")
0^28^B27418160
"RTN","LRAPSNMD",1,0)
LRAPSNMD ;DALOI/WTY - Display/print SNOMED codes;08/06/01
"RTN","LRAPSNMD",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPSNMD",3,0)
 ;
"RTN","LRAPSNMD",4,0)
 Q
"RTN","LRAPSNMD",5,0)
INIT(LRDFN,LRSS,LRI,LRSF,LRAA,LRAN,LRAD,LRDEM,LRDEV) ;
"RTN","LRAPSNMD",6,0)
 ; This routine displays SNOMED codes and their description for the
"RTN","LRAPSNMD",7,0)
 ; given record in the LAB DATA (#63) file.
"RTN","LRAPSNMD",8,0)
 ;
"RTN","LRAPSNMD",9,0)
 ; LRDFN - IEN of the patient's record in the LAB DATA file (#63)
"RTN","LRAPSNMD",10,0)
 ;  LRSS - Anatomic Pathology section (i.e. "SP" for Surgical Pathology)
"RTN","LRAPSNMD",11,0)
 ;   LRI - Inverse date/time specimen taken
"RTN","LRAPSNMD",12,0)
 ;  LRSF - Anatomic Pathology sub-file number (i.e. 63.08 for Surg Path)
"RTN","LRAPSNMD",13,0)
 ;  LRAA - IEN of the accession area in the ACCESSION (#68) file
"RTN","LRAPSNMD",14,0)
 ;  LRAN - Accession Number
"RTN","LRAPSNMD",15,0)
 ;  LRAD - Accession Date
"RTN","LRAPSNMD",16,0)
 ; LRDEM - Demographics Array.  The following are used in the header 
"RTN","LRAPSNMD",17,0)
 ;         code but are not required:
"RTN","LRAPSNMD",18,0)
 ;         LRDEM("PNM") - Patient Name
"RTN","LRAPSNMD",19,0)
 ;         LRDEM("PRO") - Provider
"RTN","LRAPSNMD",20,0)
 ;         LRDEM("AUDT") - Autopsy Date
"RTN","LRAPSNMD",21,0)
 ;         LRDEM("AUTYP") - Autopsy Type
"RTN","LRAPSNMD",22,0)
 ;         LRDEM("DTH") - Date of Death
"RTN","LRAPSNMD",23,0)
 ;         LRDEM("SSN") - Social Security Number
"RTN","LRAPSNMD",24,0)
 ;         LRDEM("SEX") - Sex
"RTN","LRAPSNMD",25,0)
 ;         LRDEM("AGE") - Age (or Age at Death for AU)
"RTN","LRAPSNMD",26,0)
 ;         LRDEM("DOB") - Date of Birth
"RTN","LRAPSNMD",27,0)
 ; LRDEV - 1 indicates use device handling in this routine
"RTN","LRAPSNMD",28,0)
 ;         0 indicates use device handling of calling application
"RTN","LRAPSNMD",29,0)
 ;
"RTN","LRAPSNMD",30,0)
 N LRAU,LRQUIT,LRL
"RTN","LRAPSNMD",31,0)
 Q:'$D(LRSS)!('$D(LRDFN))!('$D(LRSF))!('$D(LRAA))!('+$G(LRAN))
"RTN","LRAPSNMD",32,0)
 Q:'+$G(LRAD)
"RTN","LRAPSNMD",33,0)
 S $P(LRL,"-",79)=""
"RTN","LRAPSNMD",34,0)
 S LRAU=$S(LRSS'="AU":0,1:1)
"RTN","LRAPSNMD",35,0)
 Q:'LRAU&('$D(LRI))
"RTN","LRAPSNMD",36,0)
MAIN ;
"RTN","LRAPSNMD",37,0)
 S LRQUIT=0,LRDEV=+$G(LRDEV)
"RTN","LRAPSNMD",38,0)
 D:LRDEV ASKDEV
"RTN","LRAPSNMD",39,0)
 I $G(POP)!(LRQUIT) D END Q
"RTN","LRAPSNMD",40,0)
 D REPORT
"RTN","LRAPSNMD",41,0)
 D END
"RTN","LRAPSNMD",42,0)
 Q
"RTN","LRAPSNMD",43,0)
CHECK ;
"RTN","LRAPSNMD",44,0)
 N LRSB
"RTN","LRAPSNMD",45,0)
 I LRAU D  Q
"RTN","LRAPSNMD",46,0)
 .S LRSB=$Q(^LR(LRDFN,"AY",0))
"RTN","LRAPSNMD",47,0)
 .I $QS(LRSB,2)'="AY" D
"RTN","LRAPSNMD",48,0)
 ..W !!,"No SNOMED codes found."
"RTN","LRAPSNMD",49,0)
 ..S LRQUIT=1
"RTN","LRAPSNMD",50,0)
 S LRSB=$Q(^LR(LRDFN,LRSS,LRI,2,0))
"RTN","LRAPSNMD",51,0)
 I $QS(LRSB,4)'=2 D
"RTN","LRAPSNMD",52,0)
 .W !!,"No SNOMED codes found."
"RTN","LRAPSNMD",53,0)
 .S LRQUIT=1
"RTN","LRAPSNMD",54,0)
 Q
"RTN","LRAPSNMD",55,0)
ASKDEV ;
"RTN","LRAPSNMD",56,0)
 W !
"RTN","LRAPSNMD",57,0)
 S %ZIS="Q" D ^%ZIS
"RTN","LRAPSNMD",58,0)
 I POP W ! S LRQUIT=1 Q
"RTN","LRAPSNMD",59,0)
 I $D(IO("Q")) D
"RTN","LRAPSNMD",60,0)
 .S ZTDESC="LIST OF SNOMED CODES FOR AN ACCESSION"
"RTN","LRAPSNMD",61,0)
 .S ZTSAVE("LR*")="",ZTRTN="REPORT^LRAPSNMD"
"RTN","LRAPSNMD",62,0)
 .D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued, #",ZTSK W !
"RTN","LRAPSNMD",63,0)
 .K ZTSK,IO("Q") D HOME^%ZIS
"RTN","LRAPSNMD",64,0)
 .S LRQUIT=1
"RTN","LRAPSNMD",65,0)
 Q
"RTN","LRAPSNMD",66,0)
REPORT ;
"RTN","LRAPSNMD",67,0)
 U IO W:IOST["C-" @IOF
"RTN","LRAPSNMD",68,0)
 N LRFILE,LRFILE1,LRFILE2,LRFILE3,LRCASE,LRX
"RTN","LRAPSNMD",69,0)
 N LRA,LRA1,LRA2,LRIENS,LRIENS1,LRIENS2,LRIENS3
"RTN","LRAPSNMD",70,0)
 N LRP1,LRP2,LRP3,LRP4,LRP5,LRDFP,LRPRFX,LRPG,LRACC,LRSEC
"RTN","LRAPSNMD",71,0)
 S LRIENS=LRAN_","_LRAD_","_LRAA_","
"RTN","LRAPSNMD",72,0)
 S LRACC=$$GET1^DIQ(68.02,LRIENS,15,"E")
"RTN","LRAPSNMD",73,0)
 S LRSEC=$$GET1^DIQ(68,LRAA_",",.01)
"RTN","LRAPSNMD",74,0)
 S (LRQUIT,LRPG)=0
"RTN","LRAPSNMD",75,0)
 D HDR
"RTN","LRAPSNMD",76,0)
 ;Print Specimens
"RTN","LRAPSNMD",77,0)
 I 'LRAU D  Q:LRQUIT
"RTN","LRAPSNMD",78,0)
 .W !,"Tissue Specimen(s): ",!
"RTN","LRAPSNMD",79,0)
 .S LRX=0
"RTN","LRAPSNMD",80,0)
 .F  S LRX=$O(^LR(LRDFN,LRSS,LRI,.1,LRX)) Q:LRX'>0!(LRQUIT)  D
"RTN","LRAPSNMD",81,0)
 ..I $Y>(IOSL-5) D HDR Q:LRQUIT
"RTN","LRAPSNMD",82,0)
 ..W ?5,$P($G(^LR(LRDFN,LRSS,LRI,.1,LRX,0)),U),!
"RTN","LRAPSNMD",83,0)
 D CHECK
"RTN","LRAPSNMD",84,0)
 Q:LRQUIT
"RTN","LRAPSNMD",85,0)
 I LRAU D
"RTN","LRAPSNMD",86,0)
 .S LRFILE="^LR(LRDFN,""AY"",",LRFILE1=63.2,LRIENS=LRDFN_",",LRCASE=1
"RTN","LRAPSNMD",87,0)
 I 'LRAU D
"RTN","LRAPSNMD",88,0)
 .S LRFILE="^LR(LRDFN,LRSS,LRI,2,"
"RTN","LRAPSNMD",89,0)
 .S LRFILE1=+$$GET1^DID(LRSF,10,"","SPECIFIER")
"RTN","LRAPSNMD",90,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPSNMD",91,0)
 .S LRCASE=+$$GET1^DIQ(69.2,LRAA_",",.05,"I")
"RTN","LRAPSNMD",92,0)
 S LRA=0  F  S LRA=$O(@(LRFILE_"LRA)")) Q:LRA'>0!(LRQUIT)  D
"RTN","LRAPSNMD",93,0)
 .;Topography
"RTN","LRAPSNMD",94,0)
 .S LRIENS1=LRA_","_LRIENS
"RTN","LRAPSNMD",95,0)
 .D WRITE(LRFILE1,LRIENS1,LRCASE,"T",0)
"RTN","LRAPSNMD",96,0)
 .;Morphology
"RTN","LRAPSNMD",97,0)
 .S LRA1=0
"RTN","LRAPSNMD",98,0)
 .F  S LRA1=$O(@(LRFILE_"LRA,2,LRA1)")) Q:LRA1'>0!(LRQUIT)  D
"RTN","LRAPSNMD",99,0)
 ..S LRFILE2=+$$GET1^DID(LRFILE1,4,"","SPECIFIER")
"RTN","LRAPSNMD",100,0)
 ..S LRIENS2=LRA1_","_LRIENS1
"RTN","LRAPSNMD",101,0)
 ..D WRITE(LRFILE2,LRIENS2,LRCASE,"M",5)
"RTN","LRAPSNMD",102,0)
 ..;Etiology
"RTN","LRAPSNMD",103,0)
 ..S LRA2=0
"RTN","LRAPSNMD",104,0)
 ..F  S LRA2=$O(@(LRFILE_"LRA,2,LRA1,1,LRA2)")) Q:LRA2'>0!(LRQUIT)  D
"RTN","LRAPSNMD",105,0)
 ...S LRFILE3=+$$GET1^DID(LRFILE2,1,"","SPECIFIER")
"RTN","LRAPSNMD",106,0)
 ...S LRIENS3=LRA2_","_LRIENS2
"RTN","LRAPSNMD",107,0)
 ...D WRITE(LRFILE3,LRIENS3,LRCASE,"E",10)
"RTN","LRAPSNMD",108,0)
 .;Disease,Function,Procedure
"RTN","LRAPSNMD",109,0)
 .F LRDFP="1;3","3;1","4;1.5" D
"RTN","LRAPSNMD",110,0)
 ..S LRDFP(1)=$P(LRDFP,";"),LRDFP(2)=$P(LRDFP,";",2),LRA1=0
"RTN","LRAPSNMD",111,0)
 ..F  S LRA1=$O(@(LRFILE_"LRA,LRDFP(1),LRA1)")) Q:LRA1'>0!(LRQUIT)  D
"RTN","LRAPSNMD",112,0)
 ...S LRFILE2=+$$GET1^DID(LRFILE1,LRDFP(2),"","SPECIFIER")
"RTN","LRAPSNMD",113,0)
 ...S LRIENS2=LRA1_","_LRIENS1
"RTN","LRAPSNMD",114,0)
 ...S LRPRFX=$S(LRDFP(1)=1:"D",LRDFP(1)=3:"F",1:"P")
"RTN","LRAPSNMD",115,0)
 ...D WRITE(LRFILE2,LRIENS2,LRCASE,LRPRFX,5)
"RTN","LRAPSNMD",116,0)
 Q:LRQUIT
"RTN","LRAPSNMD",117,0)
 W !!,$$CJ^XLFSTR("(End of Report)",IOM)
"RTN","LRAPSNMD",118,0)
 Q
"RTN","LRAPSNMD",119,0)
WRITE(LRP1,LRP2,LRP3,LRP4,LRP5) ;
"RTN","LRAPSNMD",120,0)
 ;LRP1=File number
"RTN","LRAPSNMD",121,0)
 ;LRP2=IEN string
"RTN","LRAPSNMD",122,0)
 ;LRP3=Case (Upper or Lower)
"RTN","LRAPSNMD",123,0)
 ;LRP4=Prefix
"RTN","LRAPSNMD",124,0)
 ;LRP5=Tab position
"RTN","LRAPSNMD",125,0)
 N LRSM
"RTN","LRAPSNMD",126,0)
 S LRSM(1)=$$GET1^DIQ(LRP1,LRP2,.01)
"RTN","LRAPSNMD",127,0)
 S:LRP3 LRSM(1)=$$LOW^XLFSTR(LRSM(1))
"RTN","LRAPSNMD",128,0)
 S LRSM(2)=LRP4_"-"_$$GET1^DIQ(LRP1,LRP2,".01:2")
"RTN","LRAPSNMD",129,0)
 W !?LRP5,LRSM(2)_": "_LRSM(1)
"RTN","LRAPSNMD",130,0)
 I LRP4="P" D
"RTN","LRAPSNMD",131,0)
 .S LRSM(3)=$$GET1^DIQ(LRP1,LRP2,.02,"I")
"RTN","LRAPSNMD",132,0)
 .Q:LRSM(3)=""
"RTN","LRAPSNMD",133,0)
 .W " (",$S('LRSM(3):"negative",LRSM(3)=1:"positive",1:"?"),")"
"RTN","LRAPSNMD",134,0)
 I $Y>(IOSL-5) D HDR
"RTN","LRAPSNMD",135,0)
 Q
"RTN","LRAPSNMD",136,0)
HDR ;
"RTN","LRAPSNMD",137,0)
 I LRPG>0,IOST?1"C-".E D  Q:LRQUIT
"RTN","LRAPSNMD",138,0)
 .K DIR S DIR(0)="E"
"RTN","LRAPSNMD",139,0)
 .D ^DIR W !
"RTN","LRAPSNMD",140,0)
 .S:$D(DTOUT)!(X[U) LRQUIT=1
"RTN","LRAPSNMD",141,0)
 W:LRPG>0 @IOF S LRPG=LRPG+1
"RTN","LRAPSNMD",142,0)
 W !,LRSEC,?24,"SNOMED CODE LISTING",?49,"Acc: ",LRACC
"RTN","LRAPSNMD",143,0)
 W:IOST'["BROWSE" ?71,"Pg: ",$J(LRPG,3)
"RTN","LRAPSNMD",144,0)
 W !,"Patient: ",$G(LRDEM("PNM"))
"RTN","LRAPSNMD",145,0)
 W ?49,$S(LRAU:"Resident: ",1:"Physician: ")
"RTN","LRAPSNMD",146,0)
 W $E($G(LRDEM("PRO")),1,18)
"RTN","LRAPSNMD",147,0)
 I LRAU D
"RTN","LRAPSNMD",148,0)
 .W !,"Autopsy Date: ",$G(LRDEM("AUDT")),?35,$E($G(LRDEM("AUTYP")),1,12)
"RTN","LRAPSNMD",149,0)
 .W ?49,"Date Died: ",$G(LRDEM("DTH"))
"RTN","LRAPSNMD",150,0)
 W !,"ID: ",$G(LRDEM("SSN"))
"RTN","LRAPSNMD",151,0)
 I 'LRAU D
"RTN","LRAPSNMD",152,0)
 .W ?24,"Sex: ",$G(LRDEM("SEX")),?49,"DOB: ",$G(LRDEM("DOB"))
"RTN","LRAPSNMD",153,0)
 .W ?71,"Age:",$J($G(LRDEM("AGE")),3)
"RTN","LRAPSNMD",154,0)
 I LRAU D
"RTN","LRAPSNMD",155,0)
 .W ?24,"DOB: ",$G(LRDEM("DOB")),?49,"Age At Death: ",$G(LRDEM("AGE"))
"RTN","LRAPSNMD",156,0)
 .W ?72,"Sex: ",$G(LRDEM("SEX"))
"RTN","LRAPSNMD",157,0)
 W !,LRL
"RTN","LRAPSNMD",158,0)
 Q
"RTN","LRAPSNMD",159,0)
END ;
"RTN","LRAPSNMD",160,0)
 W:IOST?1"P-".E @IOF
"RTN","LRAPSNMD",161,0)
 I LRDEV D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LRAPSNMD",162,0)
 K %,DIR,DTOUT,DUOUT,DIRUT,X,Y
"RTN","LRAPSNMD",163,0)
 Q
"RTN","LRAPT1")
0^29^B1775792
"RTN","LRAPT1",1,0)
LRAPT1 ;AVAMC/REG/WTY - ANATOMIC PATH PRINT ;10/16/01
"RTN","LRAPT1",2,0)
 ;;5.2;LAB SERVICE;**72,173,259**;Sep 27, 1994
"RTN","LRAPT1",3,0)
 S LRSF515=+$G(LRSF515)  ;Indicates an SF515 is being generated
"RTN","LRAPT1",4,0)
 I LRSF515 D:$Y>(IOSL-13) F^LRAPF,^LRAPF
"RTN","LRAPT1",5,0)
 I 'LRSF515 D H S LR("F")=1
"RTN","LRAPT1",6,0)
 Q:LR("Q")
"RTN","LRAPT1",7,0)
 F S="SP","CY","EM" Q:LR("Q")  D
"RTN","LRAPT1",8,0)
 .D H1 Q:LR("Q")
"RTN","LRAPT1",9,0)
 .S LRI=0
"RTN","LRAPT1",10,0)
 .F  S LRI=$O(^LR(LRDFN,S,LRI)) Q:'LRI!(LR("Q"))  D EN^LRAPPF1
"RTN","LRAPT1",11,0)
 Q
"RTN","LRAPT1",12,0)
 ;
"RTN","LRAPT1",13,0)
H1 ;
"RTN","LRAPT1",14,0)
 N LRTMP
"RTN","LRAPT1",15,0)
 Q:'$O(^LR(LRDFN,S,0))
"RTN","LRAPT1",16,0)
 I LRSF515 D:$Y>(IOSL-13) F^LRAPF,^LRAPF
"RTN","LRAPT1",17,0)
 I 'LRSF515 D:$Y>(IOSL-14) H
"RTN","LRAPT1",18,0)
 Q:LR("Q")
"RTN","LRAPT1",19,0)
 S LRTMP=$S(S="SP":"SURGICAL PATHOLOGY",S="CY":"CYTOPATHOLOGY",1:"")
"RTN","LRAPT1",20,0)
 S:LRTMP="" LRTMP=$S(S="EM":"ELECTRON MICROSCOPY",1:"")
"RTN","LRAPT1",21,0)
 W !!,?30,LRTMP
"RTN","LRAPT1",22,0)
 Q
"RTN","LRAPT1",23,0)
 ;
"RTN","LRAPT1",24,0)
H I $D(LR("F")),$E(IOST,1,2)["C-" D M^LRU Q:LR("Q")
"RTN","LRAPT1",25,0)
 D F^LRU W !,"ANATOMIC PATHOLOGY"
"RTN","LRAPT1",26,0)
 I $D(LR("W")) D
"RTN","LRAPT1",27,0)
 .W !,$S($D(LRO(68)):LRO(68),1:LRAA(1))," QA from ",LRSTR
"RTN","LRAPT1",28,0)
 .W " to ",LRLST
"RTN","LRAPT1",29,0)
 W !,LR("%")
"RTN","LRAPT1",30,0)
 W !,LRP,?32,"SSN:",SSN,?48,"DOB:",DOB
"RTN","LRAPT1",31,0)
 Q
"RTN","LRAPT2")
0^30^B29549300
"RTN","LRAPT2",1,0)
LRAPT2 ;AVAMC/REG/WTY - AUTOPSY PRT ;08/23/01
"RTN","LRAPT2",2,0)
 ;;5.2;LAB SERVICE;**1,248,259**;Sep 27, 1994
"RTN","LRAPT2",3,0)
 ;
"RTN","LRAPT2",4,0)
 N LRSPSM S LRSPSM=0
"RTN","LRAPT2",5,0)
 S:'$D(LRSF515) LRSF515=0
"RTN","LRAPT2",6,0)
 D:'LRSF515 FF
"RTN","LRAPT2",7,0)
 I LRSF515 D:$Y>(IOSL-12) FTR
"RTN","LRAPT2",8,0)
 S LR("F")=1 Q:LR("Q")
"RTN","LRAPT2",9,0)
 I '$D(LRD("V")),'$P(^LR(LRDFN,"AU"),U,15) D  Q
"RTN","LRAPT2",10,0)
 .W !!,"Report not verified."
"RTN","LRAPT2",11,0)
 S O(2)=^LR(LRDFN,"AU"),X=$P(O(2),"^",8)_":"
"RTN","LRAPT2",12,0)
 S LRLLOC=$P($P(LRAU("L"),X,2),";"),X=$P(O(2),"^",11)_":"
"RTN","LRAPT2",13,0)
 S LRAU(3)=$P($P(LRAU("T"),X,2),";")
"RTN","LRAPT2",14,0)
 W !,"Acc #: ",$P(O(2),"^",6),?32,"AUTOPSY DATA"
"RTN","LRAPT2",15,0)
 W ?52,"Age: ",$J($P(O(2),"^",9),3)
"RTN","LRAPT2",16,0)
 I LRSF515 D:$Y>(IOSL-12) FTR Q:LR("Q")
"RTN","LRAPT2",17,0)
 W !,"Date/time Died",?52,"Date/time of Autopsy"
"RTN","LRAPT2",18,0)
 I LRSF515 D:$Y>(IOSL-12) FTR Q:LR("Q")
"RTN","LRAPT2",19,0)
 S DA=LRDFN D D^LRAUAW S Y=LR(63,12) D D^LRU
"RTN","LRAPT2",20,0)
 W !,Y,?32,$E(LRAU(3),1,18)
"RTN","LRAPT2",21,0)
 S Y=+O(2) D D^LRU W:Y'[1700 ?52,Y
"RTN","LRAPT2",22,0)
 I LRSF515 D:$Y>(IOSL-12) FTR Q:LR("Q")
"RTN","LRAPT2",23,0)
 W ! S TAB=0 F X(1)=7,10 D
"RTN","LRAPT2",24,0)
 .S Y=$P(O(2),"^",X(1)) Q:Y=""
"RTN","LRAPT2",25,0)
 .S:$D(^VA(200,Y,0)) Y=$P(^(0),"^")
"RTN","LRAPT2",26,0)
 .S:X(1)=10 Y=$E(Y,1,19),TAB=52
"RTN","LRAPT2",27,0)
 .W ?TAB,$S(X(1)=7:"Resident: ",1:"Senior: "),Y
"RTN","LRAPT2",28,0)
 K TAB
"RTN","LRAPT2",29,0)
 I '$D(LRD("V")),$D(LR("AU1")),'$P(^LR(LRDFN,"AU"),U,15) D  Q
"RTN","LRAPT2",30,0)
 .W !!,"Report not verified."
"RTN","LRAPT2",31,0)
 W ! D EN
"RTN","LRAPT2",32,0)
 Q:LR("Q")
"RTN","LRAPT2",33,0)
 D ^LRAPT3
"RTN","LRAPT2",34,0)
 S:+$G(LR("SPSM")) LRSPSM=1  ;Set flag to suppress SNOMED codes
"RTN","LRAPT2",35,0)
 S A=0 F F=0:1 S A=$O(^LR(LRDFN,"AY",A)) Q:'A!(LR("Q"))  D
"RTN","LRAPT2",36,0)
 .I 'F,'LRSPSM D HD
"RTN","LRAPT2",37,0)
 .S (T(3),T)=+^(A,0),T=^LAB(61,T,0),T(8)=$P(T,"^",2)
"RTN","LRAPT2",38,0)
 .I 'LRSF515,($Y>(IOSL-6)) D FF D:'LRSPSM HD
"RTN","LRAPT2",39,0)
 .Q:LR("Q")
"RTN","LRAPT2",40,0)
 .I LRSF515,($Y>(IOSL-12)) D
"RTN","LRAPT2",41,0)
 ..D FTR Q:LR("Q")
"RTN","LRAPT2",42,0)
 ..D:'LRSPSM HD
"RTN","LRAPT2",43,0)
 .Q:LR("Q")
"RTN","LRAPT2",44,0)
 .I 'LRSPSM D
"RTN","LRAPT2",45,0)
 ..W !,"T-",T(8),": "
"RTN","LRAPT2",46,0)
 ..S X=$P(T,"^") D:$G(LRS(5)) C^LRUA W X
"RTN","LRAPT2",47,0)
 .S T(4)=61
"RTN","LRAPT2",48,0)
 .D EN^LRSPRPT1,M
"RTN","LRAPT2",49,0)
 Q:LR("Q")!($D(LR("W")))
"RTN","LRAPT2",50,0)
 W !
"RTN","LRAPT2",51,0)
 I '$D(LRAURPT),$D(^LR(LRDFN,81)) W !,LRAU(1) S LRE=81 D  Q:LR("Q")
"RTN","LRAPT2",52,0)
 .D F
"RTN","LRAPT2",53,0)
 .I 'LRSF515,($Y>(IOSL-6)) D FF
"RTN","LRAPT2",54,0)
 .Q:LR("Q")
"RTN","LRAPT2",55,0)
 .I LRSF515,($Y>(IOSL-12)) D FTR
"RTN","LRAPT2",56,0)
 I '$D(LRAURPT),$D(^LR(LRDFN,82)) W !,LRAU(2) S LRE=82 D  Q:LR("Q")
"RTN","LRAPT2",57,0)
 .D F
"RTN","LRAPT2",58,0)
 .I 'LRSF515,($Y>(IOSL-6)) D FF
"RTN","LRAPT2",59,0)
 .Q:LR("Q")
"RTN","LRAPT2",60,0)
 .I LRSF515,($Y>(IOSL-12)) D FTR
"RTN","LRAPT2",61,0)
 Q
"RTN","LRAPT2",62,0)
F ;
"RTN","LRAPT2",63,0)
 D EE
"RTN","LRAPT2",64,0)
 S A=0 F LRZ=0:1 S A=$O(^LR(LRDFN,LRE,A)) Q:'A!(LR("Q"))  D
"RTN","LRAPT2",65,0)
 .S X=^LR(LRDFN,LRE,A,0) D ^DIWP
"RTN","LRAPT2",66,0)
 Q:LR("Q")  D:LRZ ^DIWW Q
"RTN","LRAPT2",67,0)
EE ;
"RTN","LRAPT2",68,0)
 K ^UTILITY($J) S DIWR=IOM-5,DIWL=5,DIWF="W"
"RTN","LRAPT2",69,0)
 Q
"RTN","LRAPT2",70,0)
M ;
"RTN","LRAPT2",71,0)
 S B=0 F  S B=$O(^LR(LRDFN,"AY",A,2,B)) Q:'B!(LR("Q"))  D
"RTN","LRAPT2",72,0)
 .S (T(3),M)=+^LR(LRDFN,"AY",A,2,B,0),M=^LAB(61.1,M,0)
"RTN","LRAPT2",73,0)
 .I 'LRSF515,($Y>(IOSL-6)) D FF D:'LRSPSM HD Q:LR("Q")
"RTN","LRAPT2",74,0)
 .I LRSF515,($Y>(IOSL-12)) D  Q:LR("Q")
"RTN","LRAPT2",75,0)
 ..D FTR Q:LR("Q")
"RTN","LRAPT2",76,0)
 ..D:'LRSPSM HD
"RTN","LRAPT2",77,0)
 .Q:LR("Q")
"RTN","LRAPT2",78,0)
 .I 'LRSPSM D
"RTN","LRAPT2",79,0)
 ..W !?5,"M-",$P(M,"^",2),": "
"RTN","LRAPT2",80,0)
 ..S X=$P(M,"^") D:$G(LRS(5)) C^LRUA W X
"RTN","LRAPT2",81,0)
 .S T(4)=61.1
"RTN","LRAPT2",82,0)
 .D EN^LRSPRPT1,E
"RTN","LRAPT2",83,0)
 F B=1.4,3.3,4.5 D  Q:LR("Q")
"RTN","LRAPT2",84,0)
 .S C=0 F  S C=$O(^LR(LRDFN,"AY",A,$P(B,"."),C)) Q:'C!(LR("Q"))  D
"RTN","LRAPT2",85,0)
 ..S (T(3),M)=+^LR(LRDFN,"AY",A,$P(B,"."),C,0)
"RTN","LRAPT2",86,0)
 ..D A
"RTN","LRAPT2",87,0)
 Q
"RTN","LRAPT2",88,0)
A S (E,T(4))="61."_$P(B,".",2)
"RTN","LRAPT2",89,0)
 S M=^LAB(E,M,0)
"RTN","LRAPT2",90,0)
 I 'LRSF515,($Y>(IOSL-6)) D FF D:'LRSPSM HD Q:LR("Q")
"RTN","LRAPT2",91,0)
 I LRSF515,($Y>(IOSL-12)) D  Q:LR("Q")
"RTN","LRAPT2",92,0)
 .D FTR Q:LR("Q")
"RTN","LRAPT2",93,0)
 .D:'LRSPSM HD
"RTN","LRAPT2",94,0)
 Q:LR("Q")
"RTN","LRAPT2",95,0)
 I 'LRSPSM D
"RTN","LRAPT2",96,0)
 .W !?5,$S(B=1.4:"D-",B=3.3:"F-",B=4.5:"P-",1:""),$P(M,"^",2),?12,": "
"RTN","LRAPT2",97,0)
 .S X=$P(M,"^") D:$G(LRS(5)) C^LRUA W X
"RTN","LRAPT2",98,0)
 D EN^LRSPRPT1
"RTN","LRAPT2",99,0)
 Q
"RTN","LRAPT2",100,0)
E ;
"RTN","LRAPT2",101,0)
 S C=0 F  S C=$O(^LR(LRDFN,"AY",A,2,B,1,C)) Q:'C!(LR("Q"))  D
"RTN","LRAPT2",102,0)
 .S (T(3),E)=+^LR(LRDFN,"AY",A,2,B,1,C,0),E=^LAB(61.2,E,0)
"RTN","LRAPT2",103,0)
 .I $Y>(IOSL-6) D FF D:'LRSPSM HD Q:LR("Q")
"RTN","LRAPT2",104,0)
 .I 'LRSF515,($Y>(IOSL-6)) D FF D:'LRSPSM HD Q:LR("Q")
"RTN","LRAPT2",105,0)
 .I LRSF515,($Y>(IOSL-12)) D  Q:LR("Q")
"RTN","LRAPT2",106,0)
 ..D FTR Q:LR("Q")
"RTN","LRAPT2",107,0)
 ..D:'LRSPSM HD
"RTN","LRAPT2",108,0)
 .Q:LR("Q")
"RTN","LRAPT2",109,0)
 .S T(4)=61.2
"RTN","LRAPT2",110,0)
 .I 'LRSPSM D
"RTN","LRAPT2",111,0)
 ..W !?10,"E-",$P(E,"^",2),": "
"RTN","LRAPT2",112,0)
 ..S X=$P(E,"^") D:$G(LRS(5)) C^LRUA W X
"RTN","LRAPT2",113,0)
 D EN^LRSPRPT1
"RTN","LRAPT2",114,0)
 Q
"RTN","LRAPT2",115,0)
HD ;
"RTN","LRAPT2",116,0)
 Q:LR("Q")
"RTN","LRAPT2",117,0)
 W !!,"SNOMED code(s):"
"RTN","LRAPT2",118,0)
 Q
"RTN","LRAPT2",119,0)
EN ;from LRAPPF1
"RTN","LRAPT2",120,0)
 K B
"RTN","LRAPT2",121,0)
 I $D(^LR(LRDFN,"AW")) D
"RTN","LRAPT2",122,0)
 .S X=^LR(LRDFN,"AW"),B(9)=$P(X,"^",9),B(1)=$P(X,"^",11,99)
"RTN","LRAPT2",123,0)
 .W !,"Rt--Lung--Lt  Liver Spleen  Rt--Kidney--Lt  Brain  Body "
"RTN","LRAPT2",124,0)
 .W "Wt(lb)    Ht(in)"
"RTN","LRAPT2",125,0)
 I LRSF515 D:$Y>(IOSL-12) FTR  Q:LR("Q")
"RTN","LRAPT2",126,0)
 I $D(B) D
"RTN","LRAPT2",127,0)
 .W !,$J($P(X,"^",3),4),?8,$J($P(X,"^",4),4),?14,$J($P(X,"^",5),5)
"RTN","LRAPT2",128,0)
 .W ?21,$J($P(X,"^",6),5),?28,$J($P(X,"^",7),4),?38,$J($P(X,"^",8),4)
"RTN","LRAPT2",129,0)
 .W ?45,$J($P(X,"^",10),4),?55,$P(X,"^",2),?68,$P(X,"^")
"RTN","LRAPT2",130,0)
 I LRSF515 D:$Y>(IOSL-12) FTR
"RTN","LRAPT2",131,0)
 Q:LR("Q")
"RTN","LRAPT2",132,0)
 W !! W:$D(B) "Heart(gm)"
"RTN","LRAPT2",133,0)
 I LRSF515 D:$Y>(IOSL-12) FTR
"RTN","LRAPT2",134,0)
 Q:LR("Q")
"RTN","LRAPT2",135,0)
 I $D(^LR(LRDFN,"AV")) D
"RTN","LRAPT2",136,0)
 .S X=^LR(LRDFN,"AV"),B(2)=$P(X,"^",7,99)
"RTN","LRAPT2",137,0)
 .W ?12,"TV(cm)  PV(cm)  MV(cm)  AV(cm)  RV(cm)  LV(cm)"
"RTN","LRAPT2",138,0)
 W ! W:$D(B(9)) $J(B(9),5)
"RTN","LRAPT2",139,0)
 I LRSF515 D:$Y>(IOSL-12) FTR  Q:LR("Q")
"RTN","LRAPT2",140,0)
 I $D(B(2)) D  Q:LR("Q")
"RTN","LRAPT2",141,0)
 .W ?12,$J($P(X,"^"),4),?20,$J($P(X,"^",2),4),?28,$J($P(X,"^",3),4)
"RTN","LRAPT2",142,0)
 .W ?36,$J($P(X,"^",4),4),?44,$J($P(X,"^",5),4),?52,$J($P(X,"^",6),4)
"RTN","LRAPT2",143,0)
 .I LRSF515 D:$Y>(IOSL-12) FTR  Q:LR("Q")
"RTN","LRAPT2",144,0)
 .W !!,"Cavities(ml): Rt--Pleural--Lt  Pericardial  Peritoneal"
"RTN","LRAPT2",145,0)
 .I LRSF515 D:$Y>(IOSL-12) FTR  Q:LR("Q")
"RTN","LRAPT2",146,0)
 .W !?14,$J($P(B(2),"^",2),4),?25,$J($P(B(2),"^"),4)
"RTN","LRAPT2",147,0)
 .W ?33,$J($P(B(2),"^",3),4),?45,$J($P(B(2),"^",4),4)
"RTN","LRAPT2",148,0)
 I LRSF515 D:$Y>(IOSL-12) FTR Q:LR("Q")
"RTN","LRAPT2",149,0)
 S DIC="^DD(63,",DIC(0)="Z"
"RTN","LRAPT2",150,0)
 I $D(B(1)) F B=1:1:8 Q:LR("Q")  D
"RTN","LRAPT2",151,0)
 .I $P(B(1),"^",B) S X="25."_B D
"RTN","LRAPT2",152,0)
 ..D ^DIC Q:Y='1
"RTN","LRAPT2",153,0)
 ..W !,Y(0,0)_": ",$P(B(1),"^",B)
"RTN","LRAPT2",154,0)
 ..I LRSF515 D:$Y>(IOSL-12) FTR
"RTN","LRAPT2",155,0)
 Q:LR("Q")
"RTN","LRAPT2",156,0)
 I $D(^LR(LRDFN,"AWI")) D
"RTN","LRAPT2",157,0)
 .S Z=^LR(LRDFN,"AWI") F B=1:1:5 Q:LR("Q")  D
"RTN","LRAPT2",158,0)
 ..I $P(Z,"^",B) S X=$S(B=1:25.9,1:25.9_(B-1)) D
"RTN","LRAPT2",159,0)
 ...D ^DIC Q:Y=-1
"RTN","LRAPT2",160,0)
 ...W !,Y(0,0),": ",$P(Z,"^",B)
"RTN","LRAPT2",161,0)
 ...I LRSF515 D:$Y>(IOSL-12) FTR
"RTN","LRAPT2",162,0)
 K DIC,X,Y,Z
"RTN","LRAPT2",163,0)
 Q
"RTN","LRAPT2",164,0)
FTR ;
"RTN","LRAPT2",165,0)
 D:LRSS="AU" FT^LRAURPT,H^LRAURPT
"RTN","LRAPT2",166,0)
 D:LRSS'="AU" F^LRAPF,^LRAPF
"RTN","LRAPT2",167,0)
 Q
"RTN","LRAPT2",168,0)
FF ;
"RTN","LRAPT2",169,0)
 D H1^LRAPT
"RTN","LRAPT2",170,0)
 Q
"RTN","LRAPT3")
0^31^B2676661
"RTN","LRAPT3",1,0)
LRAPT3 ;AVAMC/REG/WTY - AUTOPSY RPT PRINT COND(1)'T ;10/18/01
"RTN","LRAPT3",2,0)
 ;;5.2;LAB SERVICE;**1,259**;Sep 27, 1994
"RTN","LRAPT3",3,0)
 ;
"RTN","LRAPT3",4,0)
 S:'$D(LRSF515) LRSF515=0
"RTN","LRAPT3",5,0)
 S A=0 F  S A=$O(^LR(LRDFN,"AY",A)) Q:'A!(LR("Q"))  D
"RTN","LRAPT3",6,0)
 .S C=0 F F=0:1 S C=$O(^LR(LRDFN,"AY",A,5,C)) Q:'C!(LR("Q"))  D
"RTN","LRAPT3",7,0)
 ..S X=^LR(LRDFN,"AY",A,5,C,0)
"RTN","LRAPT3",8,0)
 ..S T=+^LR(LRDFN,"AY",A,0)
"RTN","LRAPT3",9,0)
 ..S T(1)=$S($D(^LAB(61,T,0)):$P(^(0),"^"),1:"")
"RTN","LRAPT3",10,0)
 ..D SP
"RTN","LRAPT3",11,0)
 Q:LR("Q")
"RTN","LRAPT3",12,0)
 W !
"RTN","LRAPT3",13,0)
 Q:LRSF515  ;Don't print diagnosis codes on the SF515
"RTN","LRAPT3",14,0)
 S A=0 F  S A=$O(^LR(LRDFN,80,A)) Q:'A!(LR("Q"))  D
"RTN","LRAPT3",15,0)
 .D:$Y>(IOSL-6) FF Q:LR("Q")
"RTN","LRAPT3",16,0)
 .Q:LR("Q")
"RTN","LRAPT3",17,0)
 .S X=+^LR(LRDFN,80,A,0),X=^ICD9(X,0)
"RTN","LRAPT3",18,0)
 .W !,"ICD code: ",$P(X,"^"),?20
"RTN","LRAPT3",19,0)
 .S X=$P(X,"^",3) D:LRS(5) C^LRUA W X
"RTN","LRAPT3",20,0)
 Q
"RTN","LRAPT3",21,0)
SP S Y=$P(X,"^",2),E=$P(X,"^",3),X=$P(X,"^")_":"
"RTN","LRAPT3",22,0)
 S A1=$P($P(LRAU("S"),X,2),";",1) D D^LRU S T(2)=Y
"RTN","LRAPT3",23,0)
 I 'LRSF515 D:$Y>(IOSL-6) FF Q:LR("Q")
"RTN","LRAPT3",24,0)
 I LRSF515 D:$Y>(IOSL-12) FT^LRAURPT,H^LRAURPT Q:LR("Q")
"RTN","LRAPT3",25,0)
 Q:LR("Q")
"RTN","LRAPT3",26,0)
 W:'F !!,T(1)
"RTN","LRAPT3",27,0)
 W !,A1," ",E," Date: ",T(2)
"RTN","LRAPT3",28,0)
 D E
"RTN","LRAPT3",29,0)
 S B=0 F LRZ=0:1 S B=$O(^LR(LRDFN,"AY",A,5,C,1,B)) Q:'B!(LR("Q"))  D
"RTN","LRAPT3",30,0)
 .I 'LRSF515 D:$Y>(IOSL-6) FF Q:LR("Q")
"RTN","LRAPT3",31,0)
 .I LRSF515 D:$Y>(IOSL-12) FT^LRAURPT,H^LRAURPT Q:LR("Q")
"RTN","LRAPT3",32,0)
 .Q:LR("Q")
"RTN","LRAPT3",33,0)
 .S X=^LR(LRDFN,"AY",A,5,C,1,B,0) D ^DIWP
"RTN","LRAPT3",34,0)
 Q:LR("Q")  D:LRZ ^DIWW Q
"RTN","LRAPT3",35,0)
E K ^UTILITY($J) S DIWR=IOM-10,DIWL=10,DIWF="W" Q
"RTN","LRAPT3",36,0)
 ;
"RTN","LRAPT3",37,0)
FF D H^LRAPT
"RTN","LRAPT3",38,0)
 Q
"RTN","LRAPTIUP")
0^32^B26816671
"RTN","LRAPTIUP",1,0)
LRAPTIUP ;DALOI/WTY - API Print AP Reports from TIU;09/05/2001
"RTN","LRAPTIUP",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPTIUP",3,0)
 ; This API is used to extract Anatomic Pathology reports that have
"RTN","LRAPTIUP",4,0)
 ; been stored in TIU and print them.
"RTN","LRAPTIUP",5,0)
 ;
"RTN","LRAPTIUP",6,0)
 ;Reference  to EXTRACT^TIULQ supported by IA #2693
"RTN","LRAPTIUP",7,0)
 ;
"RTN","LRAPTIUP",8,0)
MAIN(LRTIUDA,LRDEV) ; Control Branching
"RTN","LRAPTIUP",9,0)
 ;
"RTN","LRAPTIUP",10,0)
 ; LRTIUDA - IEN of document from TIU DOCUMENT (#8925) file
"RTN","LRAPTIUP",11,0)
 ; LRDEV - 1 indicates use device handling in this routine
"RTN","LRAPTIUP",12,0)
 ;         0 indicates use device handling of calling application
"RTN","LRAPTIUP",13,0)
 ;
"RTN","LRAPTIUP",14,0)
 K ^TMP("LRTIU",$J),^TMP("LRTIUTXT",$J)
"RTN","LRAPTIUP",15,0)
 N LRCNT,LRCNTT,LROR,LRFLG,LRTXT,LRHFLG,LRCNTF
"RTN","LRAPTIUP",16,0)
 S LRDEV=+$G(LRDEV)
"RTN","LRAPTIUP",17,0)
 S LRQUIT=0
"RTN","LRAPTIUP",18,0)
 I '$G(LRTIUDA) D  Q
"RTN","LRAPTIUP",19,0)
 .W $C(7),!,"The IEN from the TIU DOCUMENT (#8925) file is undefined.",!
"RTN","LRAPTIUP",20,0)
 D EXTRACT
"RTN","LRAPTIUP",21,0)
 I LRQUIT D END Q
"RTN","LRAPTIUP",22,0)
 D DISSECT
"RTN","LRAPTIUP",23,0)
 I LRQUIT D END Q
"RTN","LRAPTIUP",24,0)
 D:LRDEV ASKDEV
"RTN","LRAPTIUP",25,0)
 I $G(POP)!LRQUIT D END Q
"RTN","LRAPTIUP",26,0)
 D REPORT
"RTN","LRAPTIUP",27,0)
 D END
"RTN","LRAPTIUP",28,0)
 Q
"RTN","LRAPTIUP",29,0)
EXTRACT ;Extract the report from TIU
"RTN","LRAPTIUP",30,0)
 D EXTRACT^TIULQ(LRTIUDA,"^TMP(""LRTIU"",$J)",,,,1,,1)
"RTN","LRAPTIUP",31,0)
 I '+$P($G(^TMP("LRTIU",$J,LRTIUDA,"TEXT",0)),"^",3) D  Q
"RTN","LRAPTIUP",32,0)
 .W $C(7),!!,"Document not found.",!
"RTN","LRAPTIUP",33,0)
 .S LRQUIT=1
"RTN","LRAPTIUP",34,0)
 M ^TMP("LRTIUTXT",$J)=^TMP("LRTIU",$J,LRTIUDA,"TEXT")
"RTN","LRAPTIUP",35,0)
 Q
"RTN","LRAPTIUP",36,0)
DISSECT ;Dissect the report into header,body, and footer
"RTN","LRAPTIUP",37,0)
 S (LROR,LRCNT,LRCNTT,LRHFLG)=0,LRFLG="H"
"RTN","LRAPTIUP",38,0)
 F  S LROR=$O(^TMP("LRTIUTXT",$J,LROR)) Q:LROR'>0!(LRQUIT)  D
"RTN","LRAPTIUP",39,0)
 .S LRTXT=$G(^TMP("LRTIUTXT",$J,LROR,0))
"RTN","LRAPTIUP",40,0)
 .I 'LRHFLG,LRTXT'="$APHDR" D  Q
"RTN","LRAPTIUP",41,0)
 ..W $C(7),!!,"Document is not an Anatomic Pathology report.",!
"RTN","LRAPTIUP",42,0)
 ..S LRQUIT=1
"RTN","LRAPTIUP",43,0)
 .I LRTXT="$APHDR" D  Q
"RTN","LRAPTIUP",44,0)
 ..S LRHFLG=1
"RTN","LRAPTIUP",45,0)
 ..K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LRAPTIUP",46,0)
 .I LRFLG="H" D  Q:LRFLG="T"
"RTN","LRAPTIUP",47,0)
 ..I LRTXT="$TEXT" D  Q
"RTN","LRAPTIUP",48,0)
 ...S ^TMP("LRTIUTXT",$J,"HDR")=LRCNT,LRCNT=0
"RTN","LRAPTIUP",49,0)
 ...K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LRAPTIUP",50,0)
 ...S LRFLG="T",LRCNT=0
"RTN","LRAPTIUP",51,0)
 ..Q:LRFLG="T"
"RTN","LRAPTIUP",52,0)
 ..S LRCNT=LRCNT+1,LRCNTT=LRCNTT+1
"RTN","LRAPTIUP",53,0)
 ..S ^TMP("LRTIUTXT",$J,"HDR",LRCNT)=LRTXT
"RTN","LRAPTIUP",54,0)
 ..K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LRAPTIUP",55,0)
 .I LRFLG="T" D  Q:LRFLG="F"
"RTN","LRAPTIUP",56,0)
 ..I LRTXT="$FTR" D  Q:LRFLG="F"
"RTN","LRAPTIUP",57,0)
 ...S ^TMP("LRTIUTXT",$J,"TEXT")=LRCNT,LRCNT=0
"RTN","LRAPTIUP",58,0)
 ...K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LRAPTIUP",59,0)
 ...S LRFLG="F"
"RTN","LRAPTIUP",60,0)
 ..Q:LRFLG="F"
"RTN","LRAPTIUP",61,0)
 ..S LRCNT=LRCNT+1,LRCNTT=LRCNTT+1
"RTN","LRAPTIUP",62,0)
 ..S ^TMP("LRTIUTXT",$J,"TEXT",LRCNT)=LRTXT
"RTN","LRAPTIUP",63,0)
 ..K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LRAPTIUP",64,0)
 .I LRFLG="F" D
"RTN","LRAPTIUP",65,0)
 ..S LRCNT=LRCNT+1,LRCNTT=LRCNTT+1
"RTN","LRAPTIUP",66,0)
 ..S ^TMP("LRTIUTXT",$J,"FTR",LRCNT)=LRTXT
"RTN","LRAPTIUP",67,0)
 ..K ^TMP("LRTIUTXT",$J,LROR)
"RTN","LRAPTIUP",68,0)
 S ^TMP("LRTIUTXT",$J,"FTR")=LRCNT
"RTN","LRAPTIUP",69,0)
 S ^TMP("LRTIUTXT",$J,0)=LRCNTT
"RTN","LRAPTIUP",70,0)
 Q
"RTN","LRAPTIUP",71,0)
ASKDEV ;
"RTN","LRAPTIUP",72,0)
 W !
"RTN","LRAPTIUP",73,0)
 S %ZIS="Q" D ^%ZIS
"RTN","LRAPTIUP",74,0)
 I POP W ! S LRQUIT=1 Q
"RTN","LRAPTIUP",75,0)
 I $D(IO("Q")) D
"RTN","LRAPTIUP",76,0)
 .S ZTDESC="Print Anat Path Reports"
"RTN","LRAPTIUP",77,0)
 .S ZTRTN="REPORT^LRAPTIUP"
"RTN","LRAPTIUP",78,0)
 .D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued, #",ZTSK W !
"RTN","LRAPTIUP",79,0)
 .K ZTSK,IO("Q") D HOME^%ZIS
"RTN","LRAPTIUP",80,0)
 .S LRQUIT=1
"RTN","LRAPTIUP",81,0)
 Q
"RTN","LRAPTIUP",82,0)
REPORT ;
"RTN","LRAPTIUP",83,0)
 U IO W:IOST?1"C-".E @IOF
"RTN","LRAPTIUP",84,0)
 N LRPG,LRHDC,LRFTC,LRTXC,LRTOTPGS,LROR1,LROR2,LREND
"RTN","LRAPTIUP",85,0)
 S (LRQUIT,LRPG,LREND)=0
"RTN","LRAPTIUP",86,0)
 S LRHDC=+$G(^TMP("LRTIUTXT",$J,"HDR"))
"RTN","LRAPTIUP",87,0)
 S LRFTC=+$G(^TMP("LRTIUTXT",$J,"FTR"))
"RTN","LRAPTIUP",88,0)
 S LRTXC=+$G(^TMP("LRTIUTXT",$J,"TEXT"))
"RTN","LRAPTIUP",89,0)
 S LRTOTPGS=LRTXC\(IOSL-LRHDC-LRFTC-4)
"RTN","LRAPTIUP",90,0)
 S:LRTXC#(IOSL-LRHDC-LRFTC-4) LRTOTPGS=LRTOTPGS+1
"RTN","LRAPTIUP",91,0)
 D HEADER
"RTN","LRAPTIUP",92,0)
 Q:LRQUIT
"RTN","LRAPTIUP",93,0)
 ;Calculate LR and TIU checksums, if they don't match, set flag
"RTN","LRAPTIUP",94,0)
 ;  to scramble signature on the report.
"RTN","LRAPTIUP",95,0)
 D CHKSUM
"RTN","LRAPTIUP",96,0)
 I LRCKSUM'=0,LRCKSUM'=TIUCKSUM S LRENCRYP=1
"RTN","LRAPTIUP",97,0)
 D BODY
"RTN","LRAPTIUP",98,0)
 Q:LRQUIT
"RTN","LRAPTIUP",99,0)
 S LREND=1
"RTN","LRAPTIUP",100,0)
 D FOOTER
"RTN","LRAPTIUP",101,0)
 Q
"RTN","LRAPTIUP",102,0)
HEADER ;Report Header
"RTN","LRAPTIUP",103,0)
 I LRPG>0,IOST?1"C-".E D  Q:LRQUIT
"RTN","LRAPTIUP",104,0)
 .K DIR S DIR(0)="E"
"RTN","LRAPTIUP",105,0)
 .D ^DIR W !
"RTN","LRAPTIUP",106,0)
 .S:$D(DTOUT)!(X[U) LRQUIT=1
"RTN","LRAPTIUP",107,0)
 W:LRPG>0 @IOF S LRPG=LRPG+1
"RTN","LRAPTIUP",108,0)
 S LROR=0 F  S LROR=$O(^TMP("LRTIUTXT",$J,"HDR",LROR)) Q:LROR'>0  D
"RTN","LRAPTIUP",109,0)
 .S LRTXT=$G(^TMP("LRTIUTXT",$J,"HDR",LROR))
"RTN","LRAPTIUP",110,0)
 .W LRTXT
"RTN","LRAPTIUP",111,0)
 .I LRTXT["MEDICAL RECORD"!(LRTXT["AUTOPSY PROTOCOL") D
"RTN","LRAPTIUP",112,0)
 ..Q:IOST["BROWSER"
"RTN","LRAPTIUP",113,0)
 ..W ?68,"Pg",$J(LRPG,3)," of ",LRTOTPGS
"RTN","LRAPTIUP",114,0)
 .W !
"RTN","LRAPTIUP",115,0)
 Q
"RTN","LRAPTIUP",116,0)
BODY ;Body of Report
"RTN","LRAPTIUP",117,0)
 S LROR1=0
"RTN","LRAPTIUP",118,0)
 F  S LROR1=$O(^TMP("LRTIUTXT",$J,"TEXT",LROR1)) Q:LROR1'>0!(LRQUIT)  D
"RTN","LRAPTIUP",119,0)
 .I $Y>(IOSL-LRFTC-5) D FOOTER,HEADER Q:LRQUIT
"RTN","LRAPTIUP",120,0)
 .S LRTXT=$G(^TMP("LRTIUTXT",$J,"TEXT",LROR1))
"RTN","LRAPTIUP",121,0)
 .I LRTXT["/es/",+$G(LRENCRYP) S LRTXT=$$ENCRYP^XUSRB1(LRTXT)
"RTN","LRAPTIUP",122,0)
 .W LRTXT,!
"RTN","LRAPTIUP",123,0)
 Q
"RTN","LRAPTIUP",124,0)
FOOTER ;Report Footer
"RTN","LRAPTIUP",125,0)
 S (LROR2,LRCNTF)=0
"RTN","LRAPTIUP",126,0)
 I IOSL'>66 F  Q:$Y>(IOSL-LRFTC-5)  W !
"RTN","LRAPTIUP",127,0)
 F  S LROR2=$O(^TMP("LRTIUTXT",$J,"FTR",LROR2)) Q:LROR2'>0  D
"RTN","LRAPTIUP",128,0)
 .S LRCNTF=LRCNTF+1
"RTN","LRAPTIUP",129,0)
 .S LRTXT=$G(^TMP("LRTIUTXT",$J,"FTR",LROR2))
"RTN","LRAPTIUP",130,0)
 .I LRCNTF=2 D  Q
"RTN","LRAPTIUP",131,0)
 ..I LRTXT'=""&(LRTXT'["(End") W LRTXT,! Q
"RTN","LRAPTIUP",132,0)
 ..I 'LREND W ?57,"(See next page)",! Q
"RTN","LRAPTIUP",133,0)
 ..W ?57,"(End of report)",!
"RTN","LRAPTIUP",134,0)
 .W LRTXT,!
"RTN","LRAPTIUP",135,0)
 Q
"RTN","LRAPTIUP",136,0)
CHKSUM ;Compare LR and TIU checksums
"RTN","LRAPTIUP",137,0)
 ;Get original checksum value from file 63
"RTN","LRAPTIUP",138,0)
 N LRTREC,LRROOT,LRFILE,LRIENS,LRFLD,LRREL
"RTN","LRAPTIUP",139,0)
 S (LRENCRYP,LRTREC)=0
"RTN","LRAPTIUP",140,0)
 I LRSS="AU" D
"RTN","LRAPTIUP",141,0)
 .S LRTREC=$O(^LR(LRDFN,101,"C",LRPTR,LRTREC))
"RTN","LRAPTIUP",142,0)
 .S LRIENS=LRDFN_","
"RTN","LRAPTIUP",143,0)
 .S LRFILE=63.101
"RTN","LRAPTIUP",144,0)
 I LRSS'="AU" D
"RTN","LRAPTIUP",145,0)
 .S LRTREC=$O(^LR(LRDFN,LRSS,LRI,.05,"C",LRPTR,LRTREC))
"RTN","LRAPTIUP",146,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPTIUP",147,0)
 .S LRFILE=$S(LRSS="SP":63.19,LRSS="CY":63.47,LRSS="EM":63.49,1:"")
"RTN","LRAPTIUP",148,0)
 I LRFILE=""!(LRTREC=0) S LRCKSUM=0 Q
"RTN","LRAPTIUP",149,0)
 ;Retrieve LR checksum
"RTN","LRAPTIUP",150,0)
 S LRIENS=LRTREC_","_LRIENS
"RTN","LRAPTIUP",151,0)
 S LRCKSUM=$$GET1^DIQ(LRFILE,LRIENS,2)
"RTN","LRAPTIUP",152,0)
 I LRCKSUM="" S LRCKSUM=0
"RTN","LRAPTIUP",153,0)
 ;Calculate TIU checksum
"RTN","LRAPTIUP",154,0)
 S TIUVAL="^TIU(8925,"_LRPTR_",""TEXT"")"
"RTN","LRAPTIUP",155,0)
 S TIUCKSUM=$$CHKSUM^XUSESIG1(TIUVAL)
"RTN","LRAPTIUP",156,0)
 Q
"RTN","LRAPTIUP",157,0)
END ;
"RTN","LRAPTIUP",158,0)
 W:IOST?1"P-".E @IOF
"RTN","LRAPTIUP",159,0)
 I LRDEV D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LRAPTIUP",160,0)
 K ^TMP("LRTIU",$J),^TMP("LRTIUTXT",$J)
"RTN","LRAPTIUP",161,0)
 K %,DIR,DTOUT,DUOUT,DIRUT,X,Y
"RTN","LRAPTIUP",162,0)
 Q
"RTN","LRAPUTL")
0^33^B65239334
"RTN","LRAPUTL",1,0)
LRAPUTL ;DALOI/WTY - AP UTILITIES;2/26/01
"RTN","LRAPUTL",2,0)
 ;;5.2;LAB SERVICE;**259**;Sep 27, 1994
"RTN","LRAPUTL",3,0)
 ;
"RTN","LRAPUTL",4,0)
 ;Reference  to EXTRACT^TIULQ supported by IA #2693
"RTN","LRAPUTL",5,0)
 ;
"RTN","LRAPUTL",6,0)
 Q
"RTN","LRAPUTL",7,0)
ACCYR(LRYROUT,LRYRIN,LRAREA,LRAANM) ;
"RTN","LRAPUTL",8,0)
 ; Return variable (passed by reference):
"RTN","LRAPUTL",9,0)
 ;      LRYROUT = Accession Year LRAD^LRH(0) 
"RTN","LRAPUTL",10,0)
 ;                 where LRAD is format 3010000
"RTN","LRAPUTL",11,0)
 ;                       LRH(0) is format 2001
"RTN","LRAPUTL",12,0)
 ;              = -1 - Error Condition
"RTN","LRAPUTL",13,0)
 ;              =  0 - No change from default value (LRYRIN)
"RTN","LRAPUTL",14,0)
 ;
"RTN","LRAPUTL",15,0)
 ; Input parameters:
"RTN","LRAPUTL",16,0)
 ;      LRYRIN  = Default accession year in yyyy format
"RTN","LRAPUTL",17,0)
 ;      LRAREA  = Accession Area Mnemonic (ex. AU,CY,EM,SP)
"RTN","LRAPUTL",18,0)
 ;      LRAANM  = Accession Area Name (ex. SURGICAL PATHOLOGY)
"RTN","LRAPUTL",19,0)
 ;
"RTN","LRAPUTL",20,0)
 S LRYROUT=-1
"RTN","LRAPUTL",21,0)
 Q:LRAREA=""!(LRYRIN="")!(LRAANM="")
"RTN","LRAPUTL",22,0)
 N LRYR1,LRYR2
"RTN","LRAPUTL",23,0)
 W !!,"Data entry for ",LRYRIN," "
"RTN","LRAPUTL",24,0)
 S %=1 D YN^LRU
"RTN","LRAPUTL",25,0)
 I %<1 D END Q
"RTN","LRAPUTL",26,0)
 I %=1 S LRYROUT=0 K LRYRIN,LRAREA,LRAANM Q
"RTN","LRAPUTL",27,0)
 I %=2 D  I Y<1 D END Q
"RTN","LRAPUTL",28,0)
 .S %DT="AE",%DT(0)="-N",%DT("A")="Enter YEAR: " D ^%DT
"RTN","LRAPUTL",29,0)
 .Q:Y<1
"RTN","LRAPUTL",30,0)
 .S LRYR1=$E(Y,1,3)_"0000",LRYR2=$E(Y,1,3)+1700
"RTN","LRAPUTL",31,0)
 I '$O(^LRO(68,LRAREA,1,LRYR1,1,0)) D  Q
"RTN","LRAPUTL",32,0)
 .W $C(7),!!,"NO ",LRAANM," ACCESSIONS IN FILE FOR ",LRYR2,!!
"RTN","LRAPUTL",33,0)
 .S LRYROUT=-1
"RTN","LRAPUTL",34,0)
 .D END
"RTN","LRAPUTL",35,0)
 S LRYROUT=LRYR1_U_LRYR2
"RTN","LRAPUTL",36,0)
 Q
"RTN","LRAPUTL",37,0)
 ;
"RTN","LRAPUTL",38,0)
LOOKUP(LRDATA,LRYR1,LRAANM,LRAREA,LRYR2,LRAAN) ;
"RTN","LRAPUTL",39,0)
 ;Lookup by accession number or patient name
"RTN","LRAPUTL",40,0)
 K X,Y,LR("CK"),DIR
"RTN","LRAPUTL",41,0)
 S LRDATA=-1 W !
"RTN","LRAPUTL",42,0)
 S DIR(0)="FO",DIR("A")="Select Accession Number/Pt name"
"RTN","LRAPUTL",43,0)
 S DIR("?",1)="Enter the year "_LRYR1_" "_LRAANM_" accession number to"
"RTN","LRAPUTL",44,0)
 S DIR("?",1)=DIR("?",1)_" be updated"
"RTN","LRAPUTL",45,0)
 S DIR("?")="or locate the accession by entering the patient name."
"RTN","LRAPUTL",46,0)
 D ^DIR S LRAN=Y K DIR
"RTN","LRAPUTL",47,0)
 I LRAN=""!(LRAN[U) D END S LRDATA=-1 Q
"RTN","LRAPUTL",48,0)
 I LRAN'?1N.N D  Q
"RTN","LRAPUTL",49,0)
 .D PNAME^LRAPDA
"RTN","LRAPUTL",50,0)
 .I LRAN<1 S LRDATA=-1 Q
"RTN","LRAPUTL",51,0)
 .S LRDATA=LRDFN,LRDATA(1)=$S('LRAU:LRI,1:"")
"RTN","LRAPUTL",52,0)
 .D OE1^LR7OB63D
"RTN","LRAPUTL",53,0)
 D OE1^LR7OB63D
"RTN","LRAPUTL",54,0)
 W "  for "_LRYR1
"RTN","LRAPUTL",55,0)
 I '$D(^LRO(68,LRAAN,1,LRYR2,1,LRAN,0)) D  Q
"RTN","LRAPUTL",56,0)
 .S MSG="Accession # "_LRAN_" for "_LRYR1_" not in "_LRAANM
"RTN","LRAPUTL",57,0)
 .D EN^DDIOL(MSG,"","!!") K MSG
"RTN","LRAPUTL",58,0)
 .S LRDATA=0
"RTN","LRAPUTL",59,0)
 S X=^LRO(68,LRAAN,1,LRYR2,1,LRAN,0),LRDFN=+X
"RTN","LRAPUTL",60,0)
 Q:'$D(^LR(LRDFN,0))  S X=^LR(LRDFN,0) D ^LRUP
"RTN","LRAPUTL",61,0)
 W @IOF
"RTN","LRAPUTL",62,0)
 W !?3,PNM,?35,SSN,?55,"DOB: ",$$FMTE^XLFDT(DOB,1)
"RTN","LRAPUTL",63,0)
 S LRI=+$P($G(^LRO(68,LRAAN,1,LRYR2,1,LRAN,3)),"^",5)
"RTN","LRAPUTL",64,0)
 I LRAREA'="AU",'$D(^LR(LRDFN,LRAREA,LRI,0)) D  Q
"RTN","LRAPUTL",65,0)
 .W $C(7)
"RTN","LRAPUTL",66,0)
 .S MSG(1)="Inverse date missing or incorrect in Accession Area file "
"RTN","LRAPUTL",67,0)
 .S MSG(1)=MSG(1)_"for"
"RTN","LRAPUTL",68,0)
 .S MSG(1,"F")="!"
"RTN","LRAPUTL",69,0)
 .S MSG(2)=LRAANM_"  Year: "_$E(LRYR2,2,3)_"  Accession: "_LRAN
"RTN","LRAPUTL",70,0)
 .S MSG(2,"F")="!"
"RTN","LRAPUTL",71,0)
 .D EN^DDIOL(.MSG) K MSG
"RTN","LRAPUTL",72,0)
 .S LRDATA=-1
"RTN","LRAPUTL",73,0)
 D DEMGRPH(LRAN,LRAD,LRAA)
"RTN","LRAPUTL",74,0)
 S LRDATA=LRDFN,LRDATA(1)=LRI
"RTN","LRAPUTL",75,0)
 Q
"RTN","LRAPUTL",76,0)
DEMGRPH(LRAN,LRAD,LRAA) ;Demographics
"RTN","LRAPUTL",77,0)
 N LRIENS,DA,LRIDT,LRQUIT,LRSPECID,LREDT,LRIDT,LRCDT
"RTN","LRAPUTL",78,0)
 S LRQUIT=0
"RTN","LRAPUTL",79,0)
 S LRIENS=LRAN_","_LRAD_","_LRAA_","
"RTN","LRAPUTL",80,0)
 S LRSPECID="Acc #: "_$$GET1^DIQ(68.02,LRIENS,15,"E")
"RTN","LRAPUTL",81,0)
 S LRSPECID=LRSPECID_$$GET1^DIQ(68.02,LRIENS,16)
"RTN","LRAPUTL",82,0)
 S LREDT=$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",9,"I")
"RTN","LRAPUTL",83,0)
 S LRIDT=+$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",13.5,"I")
"RTN","LRAPUTL",84,0)
 I LREDT S LRCDT="Collection Date: "_$$FMTE^XLFDT(LREDT,1)
"RTN","LRAPUTL",85,0)
 W !?5,LRCDT
"RTN","LRAPUTL",86,0)
 W !?10,LRSPECID
"RTN","LRAPUTL",87,0)
 I $G(^LRO(68,LRAA,1,LRAD,1,LRAN,"PCE")) W !?15,"PCE ENC # "_^("PCE")
"RTN","LRAPUTL",88,0)
 I $L($G(LRSS)),$O(^LR(LRDFN,LRSS,LRIDT,.1,0)) D
"RTN","LRAPUTL",89,0)
 .N LRX
"RTN","LRAPUTL",90,0)
 .W !?5,"Tissue Specimen(s): ",!
"RTN","LRAPUTL",91,0)
 .S LRX=0 F  S LRX=$O(^LR(LRDFN,LRSS,LRIDT,.1,LRX)) Q:LRX<1!(LRQUIT)  D
"RTN","LRAPUTL",92,0)
 ..I $Y>(IOSL-10) D PG Q:$G(LRQUIT)  D
"RTN","LRAPUTL",93,0)
 ...W @IOF,!?3,PNM,?35,SSN,?55,"DOB: ",$$FMTE^XLFDT(DOB,1),!
"RTN","LRAPUTL",94,0)
 ..W ?15,$P($G(^LR(LRDFN,LRSS,LRIDT,.1,LRX,0)),U),!
"RTN","LRAPUTL",95,0)
 I $O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,0)) D
"RTN","LRAPUTL",96,0)
 .W ?5,"Test(s): "
"RTN","LRAPUTL",97,0)
 .S LRX=0
"RTN","LRAPUTL",98,0)
 .F  S LRX=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRX)) Q:LRX<1!($G(LRQUIT))  D
"RTN","LRAPUTL",99,0)
 ..I $Y>(IOSL-10) D PG Q:$G(LRQUIT)  W @IOF
"RTN","LRAPUTL",100,0)
 ..W ?15,$P($G(^LAB(60,+LRX,0)),U),!
"RTN","LRAPUTL",101,0)
 S:$G(LRQUIT) LRQUIT=0
"RTN","LRAPUTL",102,0)
 Q
"RTN","LRAPUTL",103,0)
GETDOCS(LRDOCS,LRDFN,LRSS,LRI,LRSF) ;Return PCP and provider
"RTN","LRAPUTL",104,0)
 N LRPF,DFN,LRIENS,LRFLD
"RTN","LRAPUTL",105,0)
 S:LRSS="AU" LRSF=63
"RTN","LRAPUTL",106,0)
 I '+$G(LRDFN)!($G(LRSS)="")!('+$G(LRSF)) S LRDOCS=0 Q
"RTN","LRAPUTL",107,0)
 I "AUSPCYEM"'[LRSS S LRDOCS=0 Q
"RTN","LRAPUTL",108,0)
 S LRPF=+$$GET1^DIQ(63,LRDFN_",",.02,"I")
"RTN","LRAPUTL",109,0)
 S DFN=$$GET1^DIQ(63,LRDFN_",",.03,"I")
"RTN","LRAPUTL",110,0)
 S LRDOCS(1)=0
"RTN","LRAPUTL",111,0)
 I LRPF=2 D
"RTN","LRAPUTL",112,0)
 .D INP^VADPT
"RTN","LRAPUTL",113,0)
 .S LRDOCS(1)=+VAIN(2)
"RTN","LRAPUTL",114,0)
 S LRIENS=LRDFN_","
"RTN","LRAPUTL",115,0)
 I LRSS'="AU" S LRIENS=LRI_","_LRIENS,LRFLD=.07
"RTN","LRAPUTL",116,0)
 S:LRSS="AU" LRFLD=13.5
"RTN","LRAPUTL",117,0)
 S LRDOCS(2)=$$GET1^DIQ(LRSF,LRIENS,LRFLD,"I")
"RTN","LRAPUTL",118,0)
 Q
"RTN","LRAPUTL",119,0)
RELEASE(LRRELEAS,LRDFN,LRSS,LRI) ;
"RTN","LRAPUTL",120,0)
 ;Determine if report has been released
"RTN","LRAPUTL",121,0)
 N LRFILE,LRFLDS,LRIENS,LRRELAR,LRCT
"RTN","LRAPUTL",122,0)
 I '+$G(LRDFN) S LRRELEAS=0 Q
"RTN","LRAPUTL",123,0)
 I $G(LRSS)=""!("AUSPEMCY"'[LRSS) S LRRELEAS=0 Q
"RTN","LRAPUTL",124,0)
 I LRSS'="AU",'+$G(LRI) S LRRELEAS=0 Q
"RTN","LRAPUTL",125,0)
 I LRSS="AU" D
"RTN","LRAPUTL",126,0)
 .S LRFILE=63,LRFLDS="14.7;14.8",LRIENS=LRDFN_","
"RTN","LRAPUTL",127,0)
 I LRSS'="AU" D
"RTN","LRAPUTL",128,0)
 .S LRFILE=$S(LRSS="SP":63.08,LRSS="CY":63.09,LRSS="EM":63.02,1:"")
"RTN","LRAPUTL",129,0)
 .S LRFLDS=".11;.13;.15"
"RTN","LRAPUTL",130,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPUTL",131,0)
 Q:LRFILE=""
"RTN","LRAPUTL",132,0)
 D GETS^DIQ(LRFILE,LRIENS,LRFLDS,"I","LRRELAR")
"RTN","LRAPUTL",133,0)
 F LRCT=1:1:$S(LRSS="AU":2,1:3) D
"RTN","LRAPUTL",134,0)
 .S LRRELEAS(LRCT)=+$G(LRRELAR(LRFILE,LRIENS,$P(LRFLDS,";",LRCT),"I"))
"RTN","LRAPUTL",135,0)
 Q
"RTN","LRAPUTL",136,0)
TIUCHK(LRPTR,LRDFN,LRSS,LRI) ;
"RTN","LRAPUTL",137,0)
 ;Check to see if report is in TIU
"RTN","LRAPUTL",138,0)
 N LRTREC,LRROOT,LRFILE,LRIENS,LRFLD,LRREL
"RTN","LRAPUTL",139,0)
 I LRSS=""!("AUSPEMCY"'[LRSS) S LRPTR=0 Q
"RTN","LRAPUTL",140,0)
 I LRSS="AU" D
"RTN","LRAPUTL",141,0)
 .S LRROOT="^LR(LRDFN,101,""A"")",LRIENS=LRDFN_","
"RTN","LRAPUTL",142,0)
 .S LRFILE=63.101
"RTN","LRAPUTL",143,0)
 I LRSS'="AU" D
"RTN","LRAPUTL",144,0)
 .S LRROOT="^LR(LRDFN,LRSS,LRI,.05,""A"")"
"RTN","LRAPUTL",145,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPUTL",146,0)
 .S LRFILE=$S(LRSS="SP":63.19,LRSS="CY":63.47,LRSS="EM":63.49,1:"")
"RTN","LRAPUTL",147,0)
 S LRTREC=$O(@(LRROOT),-1)
"RTN","LRAPUTL",148,0)
 I LRFILE=""!(LRTREC="") S LRPTR=0 Q
"RTN","LRAPUTL",149,0)
 S LRIENS=LRTREC_","_LRIENS
"RTN","LRAPUTL",150,0)
 S LRPTR=+$$GET1^DIQ(LRFILE,LRIENS,1,"I")
"RTN","LRAPUTL",151,0)
 S:LRPTR LRPTR("D")=+$$GET1^DIQ(LRFILE,LRIENS,.01,"I")
"RTN","LRAPUTL",152,0)
 I LRSS="AU" D
"RTN","LRAPUTL",153,0)
 .S LRFILE=63,LRIENS=LRDFN_",",LRFLD=14.7
"RTN","LRAPUTL",154,0)
 I LRSS'="AU" D
"RTN","LRAPUTL",155,0)
 .S LRFLD=$S(LRSS="CY":9,LRSS="SP":8,LRSS="EM":2,1:"")
"RTN","LRAPUTL",156,0)
 .Q:LRFLD=""
"RTN","LRAPUTL",157,0)
 .S LRFILE=+$$GET1^DID(63,LRFLD,"","SPECIFIER"),LRFLD=.11
"RTN","LRAPUTL",158,0)
 .Q:LRFILE=""
"RTN","LRAPUTL",159,0)
 .S LRIENS=LRI_","_LRDFN_","
"RTN","LRAPUTL",160,0)
 S LRREL=+$$GET1^DIQ(LRFILE,LRIENS,LRFLD,"I")
"RTN","LRAPUTL",161,0)
 I 'LRREL K LRPTR S LRPTR=0 Q
"RTN","LRAPUTL",162,0)
 I LRREL'=LRPTR("D") K LRPTR S LRPTR=0
"RTN","LRAPUTL",163,0)
 Q
"RTN","LRAPUTL",164,0)
ESIGINF(LRESINF,LRDFN,LRSS,LRI) ;Return Esig Info
"RTN","LRAPUTL",165,0)
 N LRTIUDA,LRESINF1
"RTN","LRAPUTL",166,0)
 Q:'$D(LRDFN)!('$D(LRSS))
"RTN","LRAPUTL",167,0)
 Q:LRSS=""!("AUSPEMCY"'[LRSS)
"RTN","LRAPUTL",168,0)
 D TIUCHK(.LRTIUDA,LRDFN,LRSS,$G(LRI))
"RTN","LRAPUTL",169,0)
 Q:'+$G(LRTIUDA)
"RTN","LRAPUTL",170,0)
 D EXTRACT^TIULQ(LRTIUDA,"LRESINF1(""ESIG"")",,,,,,1)
"RTN","LRAPUTL",171,0)
 Q:'$D(LRESINF1("ESIG",LRTIUDA))
"RTN","LRAPUTL",172,0)
 S LRESINF(1)=$G(LRESINF1("ESIG",LRTIUDA,1501,"E"))
"RTN","LRAPUTL",173,0)
 S LRESINF(2)=$G(LRESINF1("ESIG",LRTIUDA,1503,"E"))
"RTN","LRAPUTL",174,0)
 Q
"RTN","LRAPUTL",175,0)
NEWLN(LRTEXT,TAB) ;
"RTN","LRAPUTL",176,0)
 S LCT=$G(LCT)+1,BTAB=0
"RTN","LRAPUTL",177,0)
 S TAB=+TAB
"RTN","LRAPUTL",178,0)
 D GLBWRT(LRTEXT,TAB)
"RTN","LRAPUTL",179,0)
 Q
"RTN","LRAPUTL",180,0)
GLBWRT(LRTEXT,TAB) ;Write to global
"RTN","LRAPUTL",181,0)
 D GLB(LCT,TAB,BTAB,LRTEXT,GROOT,.ATAB)
"RTN","LRAPUTL",182,0)
 S BTAB=ATAB
"RTN","LRAPUTL",183,0)
 Q
"RTN","LRAPUTL",184,0)
GLB(LINE,TAB,BTAB,TEXT,ROOT,ATAB) ;
"RTN","LRAPUTL",185,0)
 ; This subroutine is used to store report text to a global.
"RTN","LRAPUTL",186,0)
 ; Input variables:
"RTN","LRAPUTL",187,0)
 ; LINE = Current line number
"RTN","LRAPUTL",188,0)
 ; TAB  = Desired tab position (not required)
"RTN","LRAPUTL",189,0)
 ; BTAB = Current tab position BEFORE text is stored
"RTN","LRAPUTL",190,0)
 ; TEXT = Text string to be stored
"RTN","LRAPUTL",191,0)
 ; ROOT = Global root
"RTN","LRAPUTL",192,0)
 ;
"RTN","LRAPUTL",193,0)
 ; Output variables:
"RTN","LRAPUTL",194,0)
 ; ATAB = Current tab position after text storage
"RTN","LRAPUTL",195,0)
 ;
"RTN","LRAPUTL",196,0)
 N LRSPC,LRINC,FTEXT,LRLINE
"RTN","LRAPUTL",197,0)
 S LRSPC="" F LRINC=1:1:80 S LRSPC=LRSPC_" "
"RTN","LRAPUTL",198,0)
 S:BTAB="" BTAB=0
"RTN","LRAPUTL",199,0)
 S:+TAB=0 TAB=BTAB
"RTN","LRAPUTL",200,0)
 S FTEXT=TEXT
"RTN","LRAPUTL",201,0)
 I TAB,TAB>BTAB D
"RTN","LRAPUTL",202,0)
 .S FTEXT=$E(LRSPC,1,TAB-BTAB)_TEXT
"RTN","LRAPUTL",203,0)
 S:'$D(@(ROOT_"0)")) @(ROOT_"0)")="^^^^"_DT_"^"
"RTN","LRAPUTL",204,0)
 S LRLINE=LINE,LINE=LINE_",0"
"RTN","LRAPUTL",205,0)
 S:'$D(@(ROOT_LINE_")")) @(ROOT_LINE_")")=""
"RTN","LRAPUTL",206,0)
 S @(ROOT_LINE_")")=@(ROOT_LINE_")")_FTEXT
"RTN","LRAPUTL",207,0)
 S $P(@(ROOT_"0)"),"^",3,4)=LRLINE_"^"_LRLINE
"RTN","LRAPUTL",208,0)
 S ATAB=TAB+$L(TEXT)
"RTN","LRAPUTL",209,0)
 Q
"RTN","LRAPUTL",210,0)
PROVIDR ;Entry of provider taken from PRO^LRCAPES        
"RTN","LRAPUTL",211,0)
 S LREND=0
"RTN","LRAPUTL",212,0)
 D
"RTN","LRAPUTL",213,0)
 . N LRPRONM,DIR,DIRUT,DUOUT,X,Y
"RTN","LRAPUTL",214,0)
 . S LRPRONM=$$GET1^DIQ(200,+$G(LRPRO),.01,"I")
"RTN","LRAPUTL",215,0)
 . I $L(LRPRONM),$D(^VA(200,"AK.PROVIDER",LRPRONM,+$G(LRPRO)))#2,$$GET^XUA4A72(+$G(LRPRO),DT)>0 S DIR("B")=LRPRONM
"RTN","LRAPUTL",216,0)
 . S DIR("A")="Releasing Pathologist"
"RTN","LRAPUTL",217,0)
 . S LRPRO=0,DIR(0)="PO^200:ENMZ"
"RTN","LRAPUTL",218,0)
 . S DIR("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U),+Y)),$$GET^XUA4A72(+Y,DT)>0"
"RTN","LRAPUTL",219,0)
 . D ^DIR
"RTN","LRAPUTL",220,0)
 . I Y>1 S LRPRO=+Y
"RTN","LRAPUTL",221,0)
 I '$G(LRPRO) D  D END^LRCAPES Q
"RTN","LRAPUTL",222,0)
 . W !?5,"No Active Provider Selected",!
"RTN","LRAPUTL",223,0)
 . S LRNOP=1
"RTN","LRAPUTL",224,0)
 . S LRQUIT=1
"RTN","LRAPUTL",225,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0))#2 D  D END^LRCAPES
"RTN","LRAPUTL",226,0)
 . W !?5,"The accession is corrupt - missing zero node",!
"RTN","LRAPUTL",227,0)
 . S LRNOP="7^Corrupt Accession"
"RTN","LRAPUTL",228,0)
 . S LRQUIT=1
"RTN","LRAPUTL",229,0)
 Q
"RTN","LRAPUTL",230,0)
REFRRL ;Display informational message on referrals
"RTN","LRAPUTL",231,0)
 S LRMSG2=$P(^DIC(LRDPF,0),"^")
"RTN","LRAPUTL",232,0)
 S LRMSG="*** NOTE: This "_LRMSG2_" report will not be stored in TIU,"
"RTN","LRAPUTL",233,0)
 S LRMSG(1)=$$CJ^XLFSTR(LRMSG,IOM)
"RTN","LRAPUTL",234,0)
 S LRMSG(1,"F")="!!"
"RTN","LRAPUTL",235,0)
 S LRMSG="  and therefore, does not have an electronic signature."
"RTN","LRAPUTL",236,0)
 S LRMSG(2)=$$CJ^XLFSTR(LRMSG,IOM)
"RTN","LRAPUTL",237,0)
 S LRMSG="A hardcopy signature will be required for this report."
"RTN","LRAPUTL",238,0)
 S LRMSG(3)=$$CJ^XLFSTR(LRMSG,IOM)
"RTN","LRAPUTL",239,0)
 D EN^DDIOL(.LRMSG)
"RTN","LRAPUTL",240,0)
 K LRMSG
"RTN","LRAPUTL",241,0)
 Q
"RTN","LRAPUTL",242,0)
PG ;Page break
"RTN","LRAPUTL",243,0)
 N DIR,DIRUT,DUOUT,DTOUT
"RTN","LRAPUTL",244,0)
 S DIR(0)="E" D ^DIR
"RTN","LRAPUTL",245,0)
 I $G(DIRUT) S LRQUIT=1
"RTN","LRAPUTL",246,0)
 Q
"RTN","LRAPUTL",247,0)
END ;
"RTN","LRAPUTL",248,0)
 K LRYRIN,LRAREA,LRAANM
"RTN","LRAPUTL",249,0)
 Q
"RTN","LRAPV")
0^34^B13932043
"RTN","LRAPV",1,0)
LRAPV ;AVAMC/REG/WTY - ANAT PATH REPORTS NOT VERIFIED ;1/17/02
"RTN","LRAPV",2,0)
 ;;5.2;LAB SERVICE;**72,201,259**;Sep 27, 1994
"RTN","LRAPV",3,0)
 ;
"RTN","LRAPV",4,0)
 ;Reference to ^DIC supported by IA #916
"RTN","LRAPV",5,0)
 ;
"RTN","LRAPV",6,0)
A ;Initialize some variables
"RTN","LRAPV",7,0)
 N LRI,LRFILE,LRFILE1,LRFILE2,LRPD,LRA
"RTN","LRAPV",8,0)
 D ^LRAP G:'$D(Y) END
"RTN","LRAPV",9,0)
 S LR("AU1")=$S(LRSS="AU":1,1:0)
"RTN","LRAPV",10,0)
 S:'LR("AU1") LRFILE="^LR(LRPD,LRSS,LRI",LRFILE1=LRFILE_",1.2,"
"RTN","LRAPV",11,0)
 S:LR("AU1") LRFILE="^LR(LRPD,LRSS",LRFILE1="^LR(LRPD,84,"
"RTN","LRAPV",12,0)
ASK ;Ask which option to run
"RTN","LRAPV",13,0)
 W !!?3,"1) List of Unverified ",LRO(68)," Reports"
"RTN","LRAPV",14,0)
 W !?3,"2) List of Unverified ",LRO(68)," Supplementary Reports"
"RTN","LRAPV",15,0)
 W !?3,"3) List of ",LRO(68)," Reports Missing SNOMED Codes"
"RTN","LRAPV",16,0)
 W !!,"Select 1,2 or 3: "
"RTN","LRAPV",17,0)
 R X:DTIME
"RTN","LRAPV",18,0)
 I X=""!(X[U) D END Q
"RTN","LRAPV",19,0)
 I X'?1N!("123"'[X) D  G ASK
"RTN","LRAPV",20,0)
 .W $C(7),!!,"Enter a single numeric digit 1,2 or 3"
"RTN","LRAPV",21,0)
 ;Give date ranges
"RTN","LRAPV",22,0)
 S LRB=X D B^LRU
"RTN","LRAPV",23,0)
 I Y<0 D END Q
"RTN","LRAPV",24,0)
DEV ;Get Device Info
"RTN","LRAPV",25,0)
 W !
"RTN","LRAPV",26,0)
 S %ZIS="Q" D ^%ZIS
"RTN","LRAPV",27,0)
 I POP W ! D END Q
"RTN","LRAPV",28,0)
 I $D(IO("Q")) D  Q
"RTN","LRAPV",29,0)
 .S ZTDESC="LIST OF ACC UNVERIF,MISSING SNOMED OR CPT"
"RTN","LRAPV",30,0)
 .S ZTSAVE("LR*")="",ZTRTN="QUE^LRAPV"
"RTN","LRAPV",31,0)
 .D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued, #",ZTSK W !
"RTN","LRAPV",32,0)
 .K ZTSK,IO("Q") D HOME^%ZIS
"RTN","LRAPV",33,0)
 .D END
"RTN","LRAPV",34,0)
QUE ;
"RTN","LRAPV",35,0)
 U IO W:IOST["C-" @IOF
"RTN","LRAPV",36,0)
 S LRSDT=LRSDT-.01,LRLDT=LRLDT+.99
"RTN","LRAPV",37,0)
 D XR^LRU,L^LRU,S^LRU,H S LR("F")=1
"RTN","LRAPV",38,0)
 F  S LRSDT=$O(^LR(LRXR,LRSDT)) Q:'LRSDT!(LRSDT>LRLDT)!(LR("Q"))  D Y
"RTN","LRAPV",39,0)
 D END
"RTN","LRAPV",40,0)
 Q
"RTN","LRAPV",41,0)
Y ;Get patient info
"RTN","LRAPV",42,0)
 S LRPD=0 F  S LRPD=$O(^LR(LRXR,LRSDT,LRPD)) Q:'LRPD!(LR("Q"))  D
"RTN","LRAPV",43,0)
 .S X=^LR(LRPD,0),Y=$P(X,"^",3),(LRDPF,X)=$P(X,"^",2)
"RTN","LRAPV",44,0)
 .S X=^DIC(X,0,"GL"),X=@(X_Y_",0)"),LRP=$P(X,"^"),SSN=$P(X,"^",9)
"RTN","LRAPV",45,0)
 .D SSN^LRU
"RTN","LRAPV",46,0)
 .I 'LR("AU1") D I Q
"RTN","LRAPV",47,0)
 .I LR("AU1") D SEL
"RTN","LRAPV",48,0)
 Q
"RTN","LRAPV",49,0)
I ;Order through the cross reference
"RTN","LRAPV",50,0)
 S LRI=0 F  S LRI=$O(^LR(LRXR,LRSDT,LRPD,LRI)) Q:'LRI!(LR("Q"))  D
"RTN","LRAPV",51,0)
 .D:$Y>(IOSL-6) H Q:LR("Q")
"RTN","LRAPV",52,0)
 .I $P($P($G(@(LRFILE_$S('LR("AU1"):",0)",1:")"))),"^",6)," ")'=LRABV Q
"RTN","LRAPV",53,0)
 .D SEL
"RTN","LRAPV",54,0)
 Q
"RTN","LRAPV",55,0)
SEL ;
"RTN","LRAPV",56,0)
 D:LRB=1 RPT
"RTN","LRAPV",57,0)
 D:LRB=2 SUPP
"RTN","LRAPV",58,0)
 D:LRB=3 SNO
"RTN","LRAPV",59,0)
 Q
"RTN","LRAPV",60,0)
N ;
"RTN","LRAPV",61,0)
 Q
"RTN","LRAPV",62,0)
RPT ;Unverified reports
"RTN","LRAPV",63,0)
 S X=$G(@(LRFILE_$S('LR("AU1"):",0)",1:")")))
"RTN","LRAPV",64,0)
 I $L(X),'$P(X,"^",$S('LR("AU1"):11,1:15)) D
"RTN","LRAPV",65,0)
 .S LRDATE=@(LRFILE_$S('LR("AU1"):",0)",1:")"))
"RTN","LRAPV",66,0)
 .D W
"RTN","LRAPV",67,0)
 Q
"RTN","LRAPV",68,0)
SUPP ;Unverified Supplementary Reports
"RTN","LRAPV",69,0)
 S (LRA,LRC)=0 F  S LRA=$O(@(LRFILE1_"LRA)")) Q:'LRA!(LRC)  D
"RTN","LRAPV",70,0)
 .I '$P(@(LRFILE1_"LRA,0)"),"^",2) S LRC=1
"RTN","LRAPV",71,0)
 I LRC D
"RTN","LRAPV",72,0)
 .S LRDATE=@(LRFILE_$S('LR("AU1"):",0)",1:")"))
"RTN","LRAPV",73,0)
 .D W
"RTN","LRAPV",74,0)
 Q
"RTN","LRAPV",75,0)
SNO ;Missing SNOMED
"RTN","LRAPV",76,0)
 S LRC=0
"RTN","LRAPV",77,0)
 S:'LR("AU1") LRFILE2=LRFILE_",2"
"RTN","LRAPV",78,0)
 S:LR("AU1") LRFILE2="^LR(LRPD,""AY"""
"RTN","LRAPV",79,0)
 I '$D(@(LRFILE2_")")) S LRC=1
"RTN","LRAPV",80,0)
 I 'LRC,'+$P($G(@(LRFILE2_",0)")),"^",4) S LRC=1
"RTN","LRAPV",81,0)
 I LRC D
"RTN","LRAPV",82,0)
 .S LRDATE=@(LRFILE_$S('LR("AU1"):",0)",1:")"))
"RTN","LRAPV",83,0)
 .D W
"RTN","LRAPV",84,0)
 Q
"RTN","LRAPV",85,0)
W ;Write the report
"RTN","LRAPV",86,0)
 W !,$$FMTE^XLFDT(LRDATE,"D"),?19,$J($P(LRDATE,"^",6),5),?32,LRP
"RTN","LRAPV",87,0)
 W ?63,SSN
"RTN","LRAPV",88,0)
 I 'LR("AU1") D
"RTN","LRAPV",89,0)
 .S LRA=0 F  S LRA=$O(^LR(LRPD,LRSS,LRI,97,LRA)) Q:'LRA!(LR("Q"))  D
"RTN","LRAPV",90,0)
 ..S B=^LR(LRPD,LRSS,LRI,97,LRA,0)
"RTN","LRAPV",91,0)
 ..D:$Y>(IOSL-6) H1 Q:LR("Q")  W !?3,B
"RTN","LRAPV",92,0)
 Q
"RTN","LRAPV",93,0)
H ;Header
"RTN","LRAPV",94,0)
 I LRQ>0,IOST?1"C-".E D  Q:LR("Q")
"RTN","LRAPV",95,0)
 .K DIR S DIR(0)="E"
"RTN","LRAPV",96,0)
 .D ^DIR W !
"RTN","LRAPV",97,0)
 .S:$D(DTOUT)!(X[U) LR("Q")=1
"RTN","LRAPV",98,0)
 W:LRQ>0 @IOF S LRQ=LRQ+1
"RTN","LRAPV",99,0)
 S X="N",%DT="T" D ^%DT,D^LRU
"RTN","LRAPV",100,0)
 W !,Y,?22,LRQ(1),?(IOM-10),"Pg: ",LRQ
"RTN","LRAPV",101,0)
 W !,LRO(68)," (",LRABV,") "
"RTN","LRAPV",102,0)
 I LRB<3 W "UNVERIFIED" W:LRB=2 " SUPPLEMENTARY" W " REPORTS"
"RTN","LRAPV",103,0)
 W:LRB=3 "REPORTS MISSING SNOMED CODING"
"RTN","LRAPV",104,0)
 W !,"BY DATE SPECIMEN TAKEN FROM ",LRSTR," TO ",LRLST
"RTN","LRAPV",105,0)
 W !,"DATE",?15,"Accession number",?32,"Patient",?66,"SSN",!,LR("%")
"RTN","LRAPV",106,0)
 Q
"RTN","LRAPV",107,0)
H1 ;
"RTN","LRAPV",108,0)
 D H Q:LR("Q")  W !?19,$J($P(LRDATE,"^",6),5),?32,LRP,?63,SSN
"RTN","LRAPV",109,0)
 Q
"RTN","LRAPV",110,0)
END ;
"RTN","LRAPV",111,0)
 W:IOST?1"P-".E @IOF D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LRAPV",112,0)
 K %,DIR,DTOUT,DUOUT,DIRUT,X,Y
"RTN","LRAPV",113,0)
 D V^LRU
"RTN","LRAPV",114,0)
 Q
"RTN","LRAPX")
0^35^B5097427
"RTN","LRAPX",1,0)
LRAPX ;AVAMC/REG/WTY - AP CODING ;11/26/01
"RTN","LRAPX",2,0)
 ;;5.2;LAB SERVICE;**72,259**;Sep 27, 1994
"RTN","LRAPX",3,0)
 ;
"RTN","LRAPX",4,0)
 D ^LRAP
"RTN","LRAPX",5,0)
 I '$D(Y) D END Q
"RTN","LRAPX",6,0)
 D @LRSS,END
"RTN","LRAPX",7,0)
 Q
"RTN","LRAPX",8,0)
SP ;SNOMED coding, surg path
"RTN","LRAPX",9,0)
 S LR(2)=1,DR="K LRREL D RELCHK^LRAPX I LRREL(1) S Y=10;.03;10"
"RTN","LRAPX",10,0)
 S DR(2,63.12)=".01;S LR(8)=$P(^LAB(61,X,0),U,4);S:'LR(8) Y=4;2;4;"
"RTN","LRAPX",11,0)
 S DR(2,63.12)=DR(2,63.12)_"I '$D(LR(1)) S Y=0;1;1.5;3"
"RTN","LRAPX",12,0)
 S DR(3,63.16)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPX",13,0)
 S DR(3,63.82)=".01;S:'$P(^LAB(61.5,X,0),U,3) Y=0;.02"
"RTN","LRAPX",14,0)
 D ^LRAPDA,END
"RTN","LRAPX",15,0)
 Q
"RTN","LRAPX",16,0)
CY ;SNOMED coding, cytopath
"RTN","LRAPX",17,0)
 S LR(2)=1,DR="K LRREL D RELCHK^LRAPX I LRREL(1) S Y=10;.03;10"
"RTN","LRAPX",18,0)
 S DR(2,63.912)=".01;S LR(8)=$P(^LAB(61,X,0),U,4);S:'LR(8) Y=4;2;4;"
"RTN","LRAPX",19,0)
 S DR(2,63.912)=DR(2,63.912)_"I '$D(LR(1)) S Y=0;1;1.5;3"
"RTN","LRAPX",20,0)
 S DR(3,63.916)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPX",21,0)
 S DR(3,63.982)=".01;S:'$P(^LAB(61.5,X,0),U,3) Y=0;.02"
"RTN","LRAPX",22,0)
 D ^LRAPDA,END
"RTN","LRAPX",23,0)
 Q
"RTN","LRAPX",24,0)
EM ;SNOMED coding, EM
"RTN","LRAPX",25,0)
 S LR(2)=1,DR="K LRREL D RELCHK^LRAPX I LRREL(1) S Y=10;.03;10"
"RTN","LRAPX",26,0)
 S DR(2,63.212)=".01;S LR(8)=$P(^LAB(61,X,0),U,4);S:'LR(8) Y=4;2;4;"
"RTN","LRAPX",27,0)
 S DR(2,63.212)=DR(2,63.212)_"I '$D(LR(1)) S Y=0;1;1.5;3"
"RTN","LRAPX",28,0)
 S DR(3,63.216)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPX",29,0)
 S DR(3,63.282)=".01;S:'$P(^LAB(61.5,X,0),U,3) Y=0;.02"
"RTN","LRAPX",30,0)
 D ^LRAPDA,END
"RTN","LRAPX",31,0)
 Q
"RTN","LRAPX",32,0)
AU ;SNOMED coding, autopsy
"RTN","LRAPX",33,0)
 S LR(2)=1
"RTN","LRAPX",34,0)
 S DR="K LRREL D RELCHK^LRAPX I LRREL(1) S Y=13.01;13;"
"RTN","LRAPX",35,0)
 S DR=DR_"13.01///^S X=LRWHO;32"
"RTN","LRAPX",36,0)
 S DR(2,63.2)=".01;I '$D(LR(1)) S Y=4;1;1.5;3;4"
"RTN","LRAPX",37,0)
 S DR(3,63.21)=".01"
"RTN","LRAPX",38,0)
 S DR(3,63.22)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAPX",39,0)
 S DR(3,63.24)=".01;S:'$P(^LAB(61.5,X,0),U,3) Y=0;.02"
"RTN","LRAPX",40,0)
 S DR(4,63.23)=".01"
"RTN","LRAPX",41,0)
 ;SET LRSOP="H" SO IT WILL SKIP ALL EDITS AND ONLY EXECUTE DIR
"RTN","LRAPX",42,0)
 S LRSOP="H"
"RTN","LRAPX",43,0)
 D ^LRAPDA,END
"RTN","LRAPX",44,0)
 Q
"RTN","LRAPX",45,0)
ISP ;ICD9CM coding, surg path
"RTN","LRAPX",46,0)
 S DR="K LRREL D RELCHK^LRAPX I LRREL(1) S Y=80;.03;80"
"RTN","LRAPX",47,0)
 D ^LRAPDA,END
"RTN","LRAPX",48,0)
 Q
"RTN","LRAPX",49,0)
ICY ;ICD9CM coding, cytopath
"RTN","LRAPX",50,0)
 S DR="K LRREL D RELCHK^LRAPX I LRREL(1) S Y=80;.03;80"
"RTN","LRAPX",51,0)
 D ^LRAPDA,END
"RTN","LRAPX",52,0)
 Q
"RTN","LRAPX",53,0)
IEM ;ICD9CM coding, EM
"RTN","LRAPX",54,0)
 S DR="K LRREL D RELCHK^LRAPX I LRREL(1) S Y=80;.03;80"
"RTN","LRAPX",55,0)
 D ^LRAPDA,END
"RTN","LRAPX",56,0)
 Q
"RTN","LRAPX",57,0)
IAU ;ICD9CM coding, autopsy
"RTN","LRAPX",58,0)
 S DR=80
"RTN","LRAPX",59,0)
 D ^LRAPDA,END
"RTN","LRAPX",60,0)
 Q
"RTN","LRAPX",61,0)
EN ;entry point for ICD9CM coding
"RTN","LRAPX",62,0)
 D ^LRAP
"RTN","LRAPX",63,0)
 I '$D(Y) D END Q
"RTN","LRAPX",64,0)
 D @("I"_LRSS),END
"RTN","LRAPX",65,0)
 Q
"RTN","LRAPX",66,0)
RELCHK ;Check to see if report is released
"RTN","LRAPX",67,0)
 D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS,LRI)
"RTN","LRAPX",68,0)
 Q
"RTN","LRAPX",69,0)
END ;
"RTN","LRAPX",70,0)
 K LRREL
"RTN","LRAPX",71,0)
 D V^LRU
"RTN","LRAPX",72,0)
 Q
"RTN","LRAUDA")
0^36^B5033846
"RTN","LRAUDA",1,0)
LRAUDA ;AVAMC/REG/WTY/KLL - AUTOPSY PATH DATA ENTRY ;08/20/01
"RTN","LRAUDA",2,0)
 ;;5.2;LAB SERVICE;**72,248,259**;Sep 27, 1994
"RTN","LRAUDA",3,0)
 ;
"RTN","LRAUDA",4,0)
L ;Define AU Section
"RTN","LRAUDA",5,0)
 S LRDICS="AU",LRQUIT=0,XPAD=""
"RTN","LRAUDA",6,0)
 D ^LRAP
"RTN","LRAUDA",7,0)
 I '$D(Y) D
"RTN","LRAUDA",8,0)
 .S LRQUIT=1
"RTN","LRAUDA",9,0)
 .D END
"RTN","LRAUDA",10,0)
 Q
"RTN","LRAUDA",11,0)
P ;Autopsy Protocol
"RTN","LRAUDA",12,0)
 D L
"RTN","LRAUDA",13,0)
 Q:LRQUIT
"RTN","LRAUDA",14,0)
 D PDR
"RTN","LRAUDA",15,0)
 S LRSOP="P",LR(6)=1
"RTN","LRAUDA",16,0)
 D EDIT
"RTN","LRAUDA",17,0)
 Q
"RTN","LRAUDA",18,0)
PDR ;Entry for resetting DR string
"RTN","LRAUDA",19,0)
 K DR
"RTN","LRAUDA",20,0)
 ;KLL-RESET PAD SEPARATE FROM PROTOCOL
"RTN","LRAUDA",21,0)
 S:XPAD'="D" DR="13;13.01///^S X=LRWHO;32.1;32.2;32.3;99"
"RTN","LRAUDA",22,0)
 S:XPAD="D" DR="13.01///^S X=LRWHO;32.2;32.3;14.9"
"RTN","LRAUDA",23,0)
 Q
"RTN","LRAUDA",24,0)
PAD ;Provisional Anatomic Diagnoses
"RTN","LRAUDA",25,0)
 D L
"RTN","LRAUDA",26,0)
 Q:LRQUIT
"RTN","LRAUDA",27,0)
 K DR S DR="13.01///^S X=LRWHO;32.2;32.3;14.9"
"RTN","LRAUDA",28,0)
 ;KLL-S XPAD=D TO KEEP PAD SEPARATE FROM PROTOCOL
"RTN","LRAUDA",29,0)
 S XPAD="D"
"RTN","LRAUDA",30,0)
 ;
"RTN","LRAUDA",31,0)
 S LRSOP="P",LR(6)=1
"RTN","LRAUDA",32,0)
 D EDIT
"RTN","LRAUDA",33,0)
 Q
"RTN","LRAUDA",34,0)
 ;
"RTN","LRAUDA",35,0)
S ;Special Studies
"RTN","LRAUDA",36,0)
 D L
"RTN","LRAUDA",37,0)
 Q:LRQUIT
"RTN","LRAUDA",38,0)
 K DR
"RTN","LRAUDA",39,0)
 S DR="N LRREL D RELEASE^LRAPUTL(.LRREL,LRDFN,LRSS) "
"RTN","LRAUDA",40,0)
 S DR=DR_"I LRREL(1) D VMSG^LRAUDA S Y=0;32"
"RTN","LRAUDA",41,0)
 S DR(2,63.2)=".01;5"
"RTN","LRAUDA",42,0)
 D EDIT
"RTN","LRAUDA",43,0)
 Q
"RTN","LRAUDA",44,0)
B ;Autopsy Report/SNOMED Coding
"RTN","LRAUDA",45,0)
 D L
"RTN","LRAUDA",46,0)
 Q:LRQUIT
"RTN","LRAUDA",47,0)
 S LR(2)=1
"RTN","LRAUDA",48,0)
 D BDR
"RTN","LRAUDA",49,0)
 D EDIT
"RTN","LRAUDA",50,0)
 Q
"RTN","LRAUDA",51,0)
BDR ;Entry for resetting DR string
"RTN","LRAUDA",52,0)
 K DR S DR="13;13.01///^S X=LRWHO;32.1;32.2;32.3;99;32"
"RTN","LRAUDA",53,0)
 S DR(2,63.2)=".01;I '$D(LR(1)) S Y=4;1;1.5;3;4"
"RTN","LRAUDA",54,0)
 S DR(3,63.21)=".01",DR(3,63.22)=".01;I '$D(LR(1)) S Y=0;1"
"RTN","LRAUDA",55,0)
 S DR(3,63.24)=".01;S:'$P(^LAB(61.5,X,0),U,3) Y=0;.02"
"RTN","LRAUDA",56,0)
 S DR(4,63.23)=".01",LRSOP="B"
"RTN","LRAUDA",57,0)
 Q
"RTN","LRAUDA",58,0)
 ;
"RTN","LRAUDA",59,0)
A ;Autopsy Report/ICD9CM Coding
"RTN","LRAUDA",60,0)
 D L
"RTN","LRAUDA",61,0)
 Q:LRQUIT
"RTN","LRAUDA",62,0)
 D ADR
"RTN","LRAUDA",63,0)
 S LRSOP="A"
"RTN","LRAUDA",64,0)
 D EDIT
"RTN","LRAUDA",65,0)
 Q
"RTN","LRAUDA",66,0)
ADR ;Entry for resetting DR string
"RTN","LRAUDA",67,0)
 K DR S DR="13;13.01///^S X=LRWHO;32.1;32.2;32.3;99;80"
"RTN","LRAUDA",68,0)
 Q
"RTN","LRAUDA",69,0)
R ;Autopsy Supplementary Report
"RTN","LRAUDA",70,0)
 D L
"RTN","LRAUDA",71,0)
 Q:LRQUIT
"RTN","LRAUDA",72,0)
 S LRSOP="R",LRSFLG="S"
"RTN","LRAUDA",73,0)
 D EDIT
"RTN","LRAUDA",74,0)
 K LRSFLG
"RTN","LRAUDA",75,0)
 Q
"RTN","LRAUDA",76,0)
I ;ICD9CM coding
"RTN","LRAUDA",77,0)
 D L
"RTN","LRAUDA",78,0)
 Q:LRQUIT
"RTN","LRAUDA",79,0)
 I '$D(Y) D END Q
"RTN","LRAUDA",80,0)
 S DR=80,LRSOP="I"
"RTN","LRAUDA",81,0)
 D EDIT
"RTN","LRAUDA",82,0)
 Q
"RTN","LRAUDA",83,0)
F ;Final Anatomic DX Date
"RTN","LRAUDA",84,0)
 D L
"RTN","LRAUDA",85,0)
 Q:LRQUIT
"RTN","LRAUDA",86,0)
 K DR S DR="13.1;83.1;83.2"
"RTN","LRAUDA",87,0)
 S LRSOP="F"
"RTN","LRAUDA",88,0)
 D EDIT
"RTN","LRAUDA",89,0)
 Q
"RTN","LRAUDA",90,0)
VMSG ;Verified message
"RTN","LRAUDA",91,0)
 N LRMSG
"RTN","LRAUDA",92,0)
 S LRMSG=$C(7)_"Report verified.  Cannot edit with this option."
"RTN","LRAUDA",93,0)
 D EN^DDIOL(LRMSG,"","!!")
"RTN","LRAUDA",94,0)
 Q
"RTN","LRAUDA",95,0)
EDIT ;
"RTN","LRAUDA",96,0)
 D ^LRAPDA
"RTN","LRAUDA",97,0)
END ;
"RTN","LRAUDA",98,0)
 K LRQUIT
"RTN","LRAUDA",99,0)
 D V^LRU
"RTN","LRAUDA",100,0)
 Q
"RTN","LRAURPT")
0^37^B57247419
"RTN","LRAURPT",1,0)
LRAURPT ;AVAMC/REG/WTY - AUTOPSY RPT ;9/22/00
"RTN","LRAURPT",2,0)
 ;;5.2;LAB SERVICE;**1,72,173,248,259**;Sep 27, 1994
"RTN","LRAURPT",3,0)
 ;
"RTN","LRAURPT",4,0)
 ;Reference to ^DD(63 supported by IA #10155
"RTN","LRAURPT",5,0)
 ;WTY;24-AUG-01;Added ICD to the print coding question
"RTN","LRAURPT",6,0)
 ;
"RTN","LRAURPT",7,0)
 N LRPTR,LREL
"RTN","LRAURPT",8,0)
 W !!,LRO(68)," Autopsy Protocols" D XR^LRU,EN2^LRUA S LRD("V")=""
"RTN","LRAURPT",9,0)
 G END:LRAPX=2,SGL:LRAPX=3,CH:LRAPX=4
"RTN","LRAURPT",10,0)
 L +^LRO(69.2,LRAA,2):5
"RTN","LRAURPT",11,0)
 I '$T D EN^DDIOL("Someone else is building a print queue for this Accession Area","","$C(7),!!") Q
"RTN","LRAURPT",12,0)
GETP ;Add a patient to the report queue
"RTN","LRAURPT",13,0)
 W ! S X="" D ^LRUPS G GETP:LRAN["?" I LRAN=-1 L -^LRO(69.2,LRAA,2) Q
"RTN","LRAURPT",14,0)
 G:$D(^LRO(69.2,LRAA,2,LRAN,0)) GETP
"RTN","LRAURPT",15,0)
 S FDAIEN(2)=LRAN
"RTN","LRAURPT",16,0)
 S FDA(2,69.23,"+2,"_+LRAA_",",.01)=LRDFN
"RTN","LRAURPT",17,0)
 D UPDATE^DIE("","FDA(2)","FDAIEN") K FDAIEN G GETP
"RTN","LRAURPT",18,0)
CH ;Check Queue
"RTN","LRAURPT",19,0)
 I '$O(^LRO(69.2,LRAA,2,0)) D  Q
"RTN","LRAURPT",20,0)
 .W $C(7),!!,"No AUTOPSY PROTOCOLS currently on the print queue.",!!
"RTN","LRAURPT",21,0)
 ;Variable LR("DVD") is used to divide reports displayed in the browser
"RTN","LRAURPT",22,0)
 K LR("DVD")
"RTN","LRAURPT",23,0)
 S $P(LR("DVD"),"|",IOM)=""
"RTN","LRAURPT",24,0)
SPC ;Spacing
"RTN","LRAURPT",25,0)
 I LRAPX=4 D
"RTN","LRAURPT",26,0)
 .W !!,"The following two questions apply only to reports not stored in "
"RTN","LRAURPT",27,0)
 .W "TIU."
"RTN","LRAURPT",28,0)
 .W !,"If the report is stored in TIU it will be printed in its "
"RTN","LRAURPT",29,0)
 .W "original format.",!
"RTN","LRAURPT",30,0)
 R !,"(D)ouble or (S)ingle spacing of report(s): ",X:DTIME
"RTN","LRAURPT",31,0)
 Q:X=""!(X[U)
"RTN","LRAURPT",32,0)
 I $E(X)'="D"&($E(X)'="S") D  G SPC
"RTN","LRAURPT",33,0)
 .W $C(7),!,"Enter 'S' for single or 'D' for double "
"RTN","LRAURPT",34,0)
 .W "spacing of reports"
"RTN","LRAURPT",35,0)
 S LRS=$S(X="D":"D",1:"")_"W"
"RTN","LRAURPT",36,0)
 W !!,"Print special studies, journal references, weights, and "
"RTN","LRAURPT",37,0)
 W "measures: "
"RTN","LRAURPT",38,0)
 S %=1 D YN^LRU Q:%<1  S:%=1 LRD=1
"RTN","LRAURPT",39,0)
 Q:LRAPX=3
"RTN","LRAURPT",40,0)
 W !!,"Save protocol list for reprinting "
"RTN","LRAURPT",41,0)
 S %=2 D YN^LRU S:%=1 LRSAV=1
"RTN","LRAURPT",42,0)
DEV ;Device Handling
"RTN","LRAURPT",43,0)
 S %ZIS="Q" D ^%ZIS
"RTN","LRAURPT",44,0)
 I POP W ! S LR("Q")=1 Q
"RTN","LRAURPT",45,0)
 I $D(IO("Q")) D  Q
"RTN","LRAURPT",46,0)
 .S ZTDESC="Print AU Anat Path Reports"
"RTN","LRAURPT",47,0)
 .S ZTSAVE("LR*")="",ZTRTN="QUE^LRAURPT"
"RTN","LRAURPT",48,0)
 .D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued, #",ZTSK W !
"RTN","LRAURPT",49,0)
 .K ZTSK,IO("Q") D HOME^%ZIS
"RTN","LRAURPT",50,0)
 .S LR("Q")=1
"RTN","LRAURPT",51,0)
QUE ;
"RTN","LRAURPT",52,0)
 U IO D L^LRU,S^LRU,EN^LRUA
"RTN","LRAURPT",53,0)
 N LRFFF
"RTN","LRAURPT",54,0)
 S LRQUIT=0,LR("Q")=+$G(LR("Q"))
"RTN","LRAURPT",55,0)
 ;LRSF515=1 means an SF515 is being generated.
"RTN","LRAURPT",56,0)
 S:'$D(LRSF515) LRSF515=0
"RTN","LRAURPT",57,0)
 S:'$D(LRFOC) LRFOC=0 ;Final office copy
"RTN","LRAURPT",58,0)
 S LRFFF=1  ;Flag used to determine whether to perform final form feed
"RTN","LRAURPT",59,0)
 I LRFOC S LRFFF=0  ;If final office copy, don't perform final form feed
"RTN","LRAURPT",60,0)
 S LR(.21)=+$G(^LRO(69.2,LRAA,.2)),(LRS(5),LRAURPT)=1
"RTN","LRAURPT",61,0)
PSGL ;Single Report
"RTN","LRAURPT",62,0)
 I $D(LRAP) D  G LST
"RTN","LRAURPT",63,0)
 .S LRDFN=LRAP
"RTN","LRAURPT",64,0)
 .I +$G(LRPTR) D  Q
"RTN","LRAURPT",65,0)
 ..D:$D(LR("AU1")) EN
"RTN","LRAURPT",66,0)
 ..Q:LR("Q")
"RTN","LRAURPT",67,0)
 ..D MAIN^LRAPTIUP(LRPTR,0)
"RTN","LRAURPT",68,0)
 ..S LRFFF=0 ;Don't do final form feed.  It's done by LRAPTIUP.
"RTN","LRAURPT",69,0)
 ..I LRQUIT S LR("Q")=1 Q
"RTN","LRAURPT",70,0)
 ..K LRAP S LR("F")=1
"RTN","LRAURPT",71,0)
 ..I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRAURPT",72,0)
 ..Q:LR("Q")
"RTN","LRAURPT",73,0)
 ..I 'LRFOC S LR("Q")=1 Q
"RTN","LRAURPT",74,0)
 ..S LRI="" D FOC^LRSPRPT
"RTN","LRAURPT",75,0)
 ..I LRQUIT S LR("Q")=1 Q
"RTN","LRAURPT",76,0)
 ..I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRAURPT",77,0)
 .D EN
"RTN","LRAURPT",78,0)
 .K LRAP
"RTN","LRAURPT",79,0)
 .I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRAURPT",80,0)
 .Q:LR("Q")
"RTN","LRAURPT",81,0)
 .I 'LRFOC S LR("Q")=1 Q
"RTN","LRAURPT",82,0)
 .W !
"RTN","LRAURPT",83,0)
 .W:IOST?1"P-".E @IOF
"RTN","LRAURPT",84,0)
 .S LRI="" D FOC^LRSPRPT
"RTN","LRAURPT",85,0)
 .I LRQUIT S LR("Q")=1 Q
"RTN","LRAURPT",86,0)
 .I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRAURPT",87,0)
PQUE ;Print all on queue
"RTN","LRAURPT",88,0)
 S LRAN=0
"RTN","LRAURPT",89,0)
 F  S LRAN=$O(^LRO(69.2,LRAA,2,LRAN)) Q:'LRAN!(LR("Q"))  D
"RTN","LRAURPT",90,0)
 .S (LRQUIT,LRQ)=0
"RTN","LRAURPT",91,0)
 .I 'LRFOC S LRFFF=1
"RTN","LRAURPT",92,0)
 .K LR("F")
"RTN","LRAURPT",93,0)
 .S LRDFN=+^LRO(69.2,LRAA,2,LRAN,0)
"RTN","LRAURPT",94,0)
 .D RELEASE^LRAPUTL(.LREL,LRDFN,LRSS)
"RTN","LRAURPT",95,0)
 .I +$G(LREL(1)) D
"RTN","LRAURPT",96,0)
 ..D TIUCHK^LRAPUTL(.LRPTR,LRDFN,LRSS)
"RTN","LRAURPT",97,0)
 .I +$G(LRPTR) D  Q
"RTN","LRAURPT",98,0)
 ..D MAIN^LRAPTIUP(LRPTR,0)
"RTN","LRAURPT",99,0)
 ..S LRFFF=0
"RTN","LRAURPT",100,0)
 ..W:IOST["BROWSER"&('LRFOC) !!,LR("DVD")
"RTN","LRAURPT",101,0)
 ..K LRPTR
"RTN","LRAURPT",102,0)
 ..I LRQUIT S LR("Q")=1 Q
"RTN","LRAURPT",103,0)
 ..S LR("F")=1
"RTN","LRAURPT",104,0)
 ..I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRAURPT",105,0)
 ..Q:LR("Q")!('LRFOC)
"RTN","LRAURPT",106,0)
 ..D FOC^LRSPRPT
"RTN","LRAURPT",107,0)
 ..W:IOST["BROWSER" !!,LR("DVD")
"RTN","LRAURPT",108,0)
 ..I LRQUIT S LR("Q")=1 Q
"RTN","LRAURPT",109,0)
 ..I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRAURPT",110,0)
 .W:IOST?1"C-".E @IOF
"RTN","LRAURPT",111,0)
 .D EN
"RTN","LRAURPT",112,0)
 .W:IOST?1"P-".E @IOF
"RTN","LRAURPT",113,0)
 .W:IOST["BROWSER"&('LRFOC) !!,LR("DVD")
"RTN","LRAURPT",114,0)
 .I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRAURPT",115,0)
 .Q:LR("Q")!('LRFOC)
"RTN","LRAURPT",116,0)
 .W !
"RTN","LRAURPT",117,0)
 .D FOC^LRSPRPT
"RTN","LRAURPT",118,0)
 .W:IOST["BROWSER" !!,LR("DVD")
"RTN","LRAURPT",119,0)
 .I LRQUIT S LR("Q")=1 Q
"RTN","LRAURPT",120,0)
 .I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRAURPT",121,0)
 S LRFFF=0
"RTN","LRAURPT",122,0)
LST ;
"RTN","LRAURPT",123,0)
 K:'$D(LRSAV) ^LRO(69.2,LRAA,2) K LRAURPT
"RTN","LRAURPT",124,0)
 S:'$D(^LRO(69.2,LRAA,2,0)) ^(0)="^69.23A^0^0"
"RTN","LRAURPT",125,0)
 K LRSAV D K^LRU
"RTN","LRAURPT",126,0)
 D:'$D(LR("AU1")) DEVEND
"RTN","LRAURPT",127,0)
 Q
"RTN","LRAURPT",128,0)
W ;
"RTN","LRAURPT",129,0)
 W !,LR("%")
"RTN","LRAURPT",130,0)
 Q
"RTN","LRAURPT",131,0)
F D E
"RTN","LRAURPT",132,0)
 S A=0 F LRZ=0:1 S A=$O(^LR(LRDFN,LRV,A)) Q:'A!(LR("Q"))  D
"RTN","LRAURPT",133,0)
 .D:$Y>(IOSL-12) FT,H Q:LR("Q")
"RTN","LRAURPT",134,0)
 .S X=^LR(LRDFN,LRV,A,0) D:X["|TOP|" TOP D ^DIWP
"RTN","LRAURPT",135,0)
 Q:LR("Q")  D:LRZ ^DIWW Q
"RTN","LRAURPT",136,0)
E K ^UTILITY($J) S DIWR=IOM-5,DIWL=5,DIWF=LRS
"RTN","LRAURPT",137,0)
 Q
"RTN","LRAURPT",138,0)
EN ;
"RTN","LRAURPT",139,0)
 S LR("SPSM")=1 ;Set this flag to suppress SNOMED codes 
"RTN","LRAURPT",140,0)
 S LRQ=0,X=^LR(LRDFN,0) D ^LRUP
"RTN","LRAURPT",141,0)
 I '$D(^LR(LRDFN,"AU")) L +^LRO(69.2,LRAA,2,LRAN):5 Q:'$T  D  Q
"RTN","LRAURPT",142,0)
 .S DIK="^LRO(69.2,LRAA,2,",DA=LRAN,DA(1)=0
"RTN","LRAURPT",143,0)
 .D ^DIK K DA,DIK
"RTN","LRAURPT",144,0)
 .L -^LRO(69.2,LRAA,2,LRAN)
"RTN","LRAURPT",145,0)
 S X=^LR(LRDFN,"AU"),LRAC=$P(X,"^",6),LRM(2)=$P(X,"^",7)
"RTN","LRAURPT",146,0)
 S LRM(1)=$P(X,"^",12),LRW(9)=$P(X,"^",13),LRM(3)=$P(X,"^",10)
"RTN","LRAURPT",147,0)
 S Y=$P(X,"^"),LRH(2)=$E(Y,2,3) D D^LRU
"RTN","LRAURPT",148,0)
 S LRH(1)=Y,Y=$P(X,"^",3) D D^LRU
"RTN","LRAURPT",149,0)
 S LRH(3)=Y,Y=$P(X,"^",17) D D^LRU S LRH(17)=Y
"RTN","LRAURPT",150,0)
 S LRLLOC=$P(X,"^",5),AGE=$P(X,"^",9)
"RTN","LRAURPT",151,0)
 S Y=$P(X,"^",8),C=$P(^DD(63,14.5,0),U,3)
"RTN","LRAURPT",152,0)
 D Y^DIQ S LRSVC=Y
"RTN","LRAURPT",153,0)
 S Y=$P(X,"^",11),C=$P(^DD(63,13.7,0),U,3)
"RTN","LRAURPT",154,0)
 D Y^DIQ S LRS(3)=Y
"RTN","LRAURPT",155,0)
 S DA=LRDFN D D^LRAUAW S Y=LR(63,12) D D^LRU S LRH=Y,X=LRM(1)
"RTN","LRAURPT",156,0)
 D:X D^LRUA S LRM(1)=X,X=LRM(2)
"RTN","LRAURPT",157,0)
 D:X D^LRUA S LRM(2)=X,X=LRM(3)
"RTN","LRAURPT",158,0)
 D:X D^LRUA S LRM(3)=X
"RTN","LRAURPT",159,0)
 Q:+$G(LRPTR)
"RTN","LRAURPT",160,0)
 D H Q:LR("Q")  S LR("F")=1
"RTN","LRAURPT",161,0)
 W:LRH(1)="" !?20,"**** REPORT INCOMPLETE ****",!
"RTN","LRAURPT",162,0)
 W !!,LRAU(1),! S LRV=81 D F
"RTN","LRAURPT",163,0)
 D:$Y>(IOSL-12) FT,H Q:LR("Q")  W !!,LR("%")
"RTN","LRAURPT",164,0)
 W !,LRAU(2),! S LRV=82 D F
"RTN","LRAURPT",165,0)
 I $O(^LR(LRDFN,84,0)),LR(.21) D FT,H Q:LR("Q")
"RTN","LRAURPT",166,0)
 S LRA=0 F  S LRA=$O(^LR(LRDFN,84,LRA)) Q:'LRA!(LR("Q"))  D
"RTN","LRAURPT",167,0)
 .S LRB=^LR(LRDFN,84,LRA,0) D:$Y>(IOSL-12) FT,H Q:LR("Q")
"RTN","LRAURPT",168,0)
 .W !!,"SUPPLEMENTARY REPORT DATE: "
"RTN","LRAURPT",169,0)
 .S Y=LRB D D^LRU W Y
"RTN","LRAURPT",170,0)
 .D:$P($G(^LR(LRDFN,84,LRA,2,0)),U,4) SUPA^LRAPAUSR
"RTN","LRAURPT",171,0)
 .D WRT
"RTN","LRAURPT",172,0)
 Q:LR("Q")
"RTN","LRAURPT",173,0)
 D:$G(LRD) ^LRAPT2
"RTN","LRAURPT",174,0)
 Q:LR("Q")
"RTN","LRAURPT",175,0)
 D FT
"RTN","LRAURPT",176,0)
 Q
"RTN","LRAURPT",177,0)
WRT D E S LRC=0
"RTN","LRAURPT",178,0)
 F LRZ=0:1 S LRC=$O(^LR(LRDFN,84,LRA,1,LRC)) Q:'LRC!(LR("Q"))  D
"RTN","LRAURPT",179,0)
 .D:$Y>(IOSL-12) FT,H Q:LR("Q")
"RTN","LRAURPT",180,0)
 .S X=^LR(LRDFN,84,LRA,1,LRC,0) D:X["|TOP|" TOP D ^DIWP
"RTN","LRAURPT",181,0)
 Q:LR("Q")  D:LRZ ^DIWW Q
"RTN","LRAURPT",182,0)
H ;
"RTN","LRAURPT",183,0)
 Q:LR("Q")
"RTN","LRAURPT",184,0)
 I $D(LR("F")),IOST?1"C".E D CONT  Q:LR("Q")
"RTN","LRAURPT",185,0)
 S LRQ=LRQ+1
"RTN","LRAURPT",186,0)
 W:($D(LR("F"))) @IOF
"RTN","LRAURPT",187,0)
 W !! D W
"RTN","LRAURPT",188,0)
 W !?5,"CLINICAL RECORD |",?40,"AUTOPSY PROTOCOL",?73,"Pg ",LRQ
"RTN","LRAURPT",189,0)
 W !,LR("%")
"RTN","LRAURPT",190,0)
 W !,"Date died: ",LRH,?40,"| Autopsy date: ",LRH(1)
"RTN","LRAURPT",191,0)
 W !,"Resident: ",LRM(2),?40,"| ",$E(LRS(3),1,13)
"RTN","LRAURPT",192,0)
 W ?56,"Autopsy No. ",$S(LRQ(8)]"":LRQ(8)_LRH(2)_" "_LRAC,1:LRAC)
"RTN","LRAURPT",193,0)
 W !,LR("%")
"RTN","LRAURPT",194,0)
 Q
"RTN","LRAURPT",195,0)
FT ;Footer
"RTN","LRAURPT",196,0)
 Q:LR("Q")
"RTN","LRAURPT",197,0)
 I IOSL'>66 F  Q:$Y>(IOSL-12)  W !
"RTN","LRAURPT",198,0)
 D W W !
"RTN","LRAURPT",199,0)
 W:LRH(3)=""&(LRH(17)]"") ?55,"| Provisional Anatomic Dx"
"RTN","LRAURPT",200,0)
 W !,"Pathologist: ",LRM(3),?52,LRW(9),?55,"| Date "
"RTN","LRAURPT",201,0)
 W $E($S(LRH(3)]"":LRH(3),1:LRH(17)),1,12)
"RTN","LRAURPT",202,0)
 D W W !,LRQ(1),?IOM-17,"AUTOPSY PROTOCOL"
"RTN","LRAURPT",203,0)
 W !,"Patient: ",$E(LRP,1,30),?43,SSN,?56,"SEX:",SEX,?63,"DOB:",DOB
"RTN","LRAURPT",204,0)
 W !,$E(LRLLOC,1,22),?23,"Physician: ",$E(LRM(1),1,28)
"RTN","LRAURPT",205,0)
 W ?63,"AGE AT DEATH:",$J(AGE,3)
"RTN","LRAURPT",206,0)
 Q
"RTN","LRAURPT",207,0)
SGL ;Print single report entry point
"RTN","LRAURPT",208,0)
 K LRD("V") S X="" D ^LRUPS G:LRAN="?" SGL Q:LRAN=-1
"RTN","LRAURPT",209,0)
 D RELEASE^LRAPUTL(.LREL,LRDFN,LRSS)
"RTN","LRAURPT",210,0)
 I $D(LR("AU1")),'+$G(LREL(1)) D  Q
"RTN","LRAURPT",211,0)
 .W $C(7),!!,"Report not verified." S LR("AU1")=2
"RTN","LRAURPT",212,0)
 I +$G(LREL(1)) D
"RTN","LRAURPT",213,0)
 .D TIUCHK^LRAPUTL(.LRPTR,LRDFN,LRSS)
"RTN","LRAURPT",214,0)
 I $D(LR("AU1"))!(+$G(LRPTR)) S LRS="W",LRD=1
"RTN","LRAURPT",215,0)
 E  D SPC Q:X=""!(X[U)
"RTN","LRAURPT",216,0)
 D EN2^LRUA
"RTN","LRAURPT",217,0)
 S LRAP=LRDFN,LRSAV=1
"RTN","LRAURPT",218,0)
 G DEV
"RTN","LRAURPT",219,0)
DEVEND ;Close device
"RTN","LRAURPT",220,0)
 I IOST?1"P-".E W:LRFFF @IOF
"RTN","LRAURPT",221,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LRAURPT",222,0)
 Q
"RTN","LRAURPT",223,0)
CONT ;
"RTN","LRAURPT",224,0)
 K DIR S DIR(0)="E"
"RTN","LRAURPT",225,0)
 D ^DIR W !
"RTN","LRAURPT",226,0)
 S:$D(DTOUT)!(X[U) LR("Q")=1
"RTN","LRAURPT",227,0)
 Q
"RTN","LRAURPT",228,0)
END ;
"RTN","LRAURPT",229,0)
 W $C(7),!!,"OK to delete the AUTOPSY PROTOCOL list "
"RTN","LRAURPT",230,0)
 S %=2 D YN^LRU
"RTN","LRAURPT",231,0)
 I %=1 D  Q
"RTN","LRAURPT",232,0)
 .K ^LRO(69.2,LRAA,2)
"RTN","LRAURPT",233,0)
 .S ^LRO(69.2,LRAA,2,0)="^69.23A^0^0"
"RTN","LRAURPT",234,0)
 .W $C(7),!,"LIST DELETED !",!
"RTN","LRAURPT",235,0)
 W !!,"OK, LET'S FORGET IT.",!
"RTN","LRAURPT",236,0)
 Q
"RTN","LRAURPT",237,0)
TOP ;
"RTN","LRAURPT",238,0)
 S Z=$P(X,"|TOP|",1)_$P(X,"|TOP|",2)
"RTN","LRAURPT",239,0)
 D FT,H S X=Z
"RTN","LRAURPT",240,0)
 Q
"RTN","LRCAPES")
0^54^B74040726
"RTN","LRCAPES",1,0)
LRCAPES ;DALOI/FHS/KLL -MANUAL PCE CPT WORKLOAD CAPTURE ;5/1/99
"RTN","LRCAPES",2,0)
 ;;5.2;LAB SERVICE;**274,259**;Sep 27, 1994
"RTN","LRCAPES",3,0)
EN ;
"RTN","LRCAPES",4,0)
 D EN^LRCAPES1
"RTN","LRCAPES",5,0)
 Q
"RTN","LRCAPES",6,0)
PG ;Page break
"RTN","LRCAPES",7,0)
 N DIR,DIRUT,DUOUT,DTOUT
"RTN","LRCAPES",8,0)
 S DIR(0)="E" D ^DIR
"RTN","LRCAPES",9,0)
 I $G(DIRUT) S LREND=1 Q
"RTN","LRCAPES",10,0)
 W @IOF
"RTN","LRCAPES",11,0)
 Q
"RTN","LRCAPES",12,0)
EX1 ;Parse the read entry
"RTN","LRCAPES",13,0)
 N LRXY
"RTN","LRCAPES",14,0)
 Q:'$L($G(LRX))  D
"RTN","LRCAPES",15,0)
 . I LRX?5N,'$D(^TMP("LR",$J,"AK",LRX))#2 D  Q
"RTN","LRCAPES",16,0)
 . . S LRXY=$$CPT^ICPTCOD(LRX,DT) Q:'$P(LRXY,U,7)
"RTN","LRCAPES",17,0)
 . . S LRCNT=+$G(LRCNT)+1
"RTN","LRCAPES",18,0)
 . . S ^TMP("LR",$J,"LRLST",LRCNT)=$P(LRXY,U)_"^^"_$P(LRXY,U,3)_U
"RTN","LRCAPES",19,0)
 . S LRQ="^TMP(""LR"","_$J_",""AK"","_LRX_")"
"RTN","LRCAPES",20,0)
 . F  S LRQ=$Q(@LRQ) Q:$QS(LRQ,4)'=LRX  D
"RTN","LRCAPES",21,0)
 . . S LRCNT=+$G(LRCNT)+1
"RTN","LRCAPES",22,0)
 . . S ^TMP("LR",$J,"LRLST",LRCNT)=$QS(LRQ,6)_U_@LRQ
"RTN","LRCAPES",23,0)
 Q
"RTN","LRCAPES",24,0)
END1 ;
"RTN","LRCAPES",25,0)
 D END S LREND=1
"RTN","LRCAPES",26,0)
 Q
"RTN","LRCAPES",27,0)
END ;
"RTN","LRCAPES",28,0)
 I $G(LRAA),$G(LRAD),$G(LRAN) L -^LRO(68,LRAA,1,LRAD,1,LRAN)
"RTN","LRCAPES",29,0)
 K:'$G(LRESCPT) ^TMP("LR",$J,"AK")
"RTN","LRCAPES",30,0)
 I $G(LRDEBUG) W !,"END ",! Q
"RTN","LRCAPES",31,0)
 Q
"RTN","LRCAPES",32,0)
HLP ;Help display for CPT selection
"RTN","LRCAPES",33,0)
 N DIR,DIRUT,DUOUT,DTOUT,LREND,LRX,LRY
"RTN","LRCAPES",34,0)
 W @IOF
"RTN","LRCAPES",35,0)
 S LRX="^TMP(""LR"","_$J_",""AK"",0,1)"
"RTN","LRCAPES",36,0)
 W $$CJ^XLFSTR("List or range e.g, 1,3,5-7,88300.",IOM)
"RTN","LRCAPES",37,0)
 W $$CJ^XLFSTR("Select from the following or enter CPT separated by a comma",IOM),!
"RTN","LRCAPES",38,0)
 F  S LRX=$Q(@LRX) Q:$QS(LRX,2)'=$J!($G(LREND))!($QS(LRX,1)'="LR")  D
"RTN","LRCAPES",39,0)
 . S LRY=@LRX
"RTN","LRCAPES",40,0)
 . W !?3,$QS(LRX,4),?6," = "_$QS(LRX,6)_"  "_$E($P(LRY,U,2),1,60),!
"RTN","LRCAPES",41,0)
 . W:$P(LRY,U,4) ?8,$P(LRY,U,3)_" { NLT = "_$P(LRY,U,4)_" }",!
"RTN","LRCAPES",42,0)
 . I $Y>(IOSL-6) S DIR(0)="E" D RD^LRCAPES1 I '$G(LREND)  W @IOF
"RTN","LRCAPES",43,0)
 D LSTCPT($G(LRAA),$G(LRAD),$G(LRAN)) Q
"RTN","LRCAPES",44,0)
 ;
"RTN","LRCAPES",45,0)
LSTCPT(LRAA,LRAD,LRAN) ; Show loaded CPT codes if any
"RTN","LRCAPES",46,0)
 Q:$S('$G(LRAA):1,'$G(LRAD):1,'$G(LRAN):1,1:0)
"RTN","LRCAPES",47,0)
 N LRSTR
"RTN","LRCAPES",48,0)
 S LRSTR=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,"PCE")) Q:'LRSTR
"RTN","LRCAPES",49,0)
 N DA,DIC,DIR,DIRUT,DIR,DR,ERR,DUOUT,IEN,LRDA,LRENC,LREND,LRP,S,X,Y
"RTN","LRCAPES",50,0)
 S DIR(0)="Y",DIR("A")=" Would you like to see PCE CPT Information"
"RTN","LRCAPES",51,0)
 S DIR("B")="No" D ^DIR Q:$G(DIRUT)!($G(Y)'=1)
"RTN","LRCAPES",52,0)
 ;List filed CPT CODES
"RTN","LRCAPES",53,0)
 W @IOF
"RTN","LRCAPES",54,0)
 F LRP=1:1 S IEN=$P(LRSTR,";",LRP) Q:IEN=""  D
"RTN","LRCAPES",55,0)
 . D GETCPT^PXAPIOE(IEN,"LRENC","ERR")
"RTN","LRCAPES",56,0)
 S (LRDA,LREND)=0 F  S LRDA=$O(LRENC(LRDA)) Q:'LRDA!($G(LREND))  D
"RTN","LRCAPES",57,0)
 . I $Y>(IOSL-6) D PG W @IOF Q:$G(LREND)
"RTN","LRCAPES",58,0)
 . S S=0,DA=LRDA,DR="0:99",DIC="^AUPNVCPT(" D EN^DIQ
"RTN","LRCAPES",59,0)
 Q
"RTN","LRCAPES",60,0)
WLN ;Interactive entry point
"RTN","LRCAPES",61,0)
 D KVA^VADPT
"RTN","LRCAPES",62,0)
 K DIC,DIR
"RTN","LRCAPES",63,0)
 K LREND,LRUID,DIC,DIR,LRVBY
"RTN","LRCAPES",64,0)
 K ^TMP("LR",$J,"LRLST")
"RTN","LRCAPES",65,0)
 K LRAA,LRACC,LRAD,LRAN,LRDFN,LRDPF,LRIDT
"RTN","LRCAPES",66,0)
 K LRRB,LRSS,LRTIME,LRTREA,LRUID,LRWRD,PNM,SEX,SSN,AGE
"RTN","LRCAPES",67,0)
 S (LRAA,LRACC,LRAD,LRNOP,LRAN,LREND)=0,LRVBY=1,LRUID=""
"RTN","LRCAPES",68,0)
 S:'$G(LRPRO) LRPRO=DUZ
"RTN","LRCAPES",69,0)
 I '$G(LRESCPT) S LRVBY=$$SELBY^LRWU4("Select Accession By")
"RTN","LRCAPES",70,0)
 D:LRVBY=1 ^LRVERA D:LRVBY=2 UID^LRVERA
"RTN","LRCAPES",71,0)
 I 'LRVBY!(LRAA<1) D END S LREND=1 Q
"RTN","LRCAPES",72,0)
 S LRDFN=+$$GET1^DIQ(68.02,+$G(LRAN)_","_+$G(LRAD)_","_+$G(LRAA)_",",.01)
"RTN","LRCAPES",73,0)
 I 'LRDFN D END S LRNOP=1 D  Q
"RTN","LRCAPES",74,0)
 . W !?5,"This accession is corrupt",!
"RTN","LRCAPES",75,0)
LCK ;
"RTN","LRCAPES",76,0)
 L +^LRO(68,LRAA,1,LRAD,1,LRAN):10 I '$T D  Q
"RTN","LRCAPES",77,0)
 . W !?5,"Someone else is editing this accession",!
"RTN","LRCAPES",78,0)
 . S LRNOP=1
"RTN","LRCAPES",79,0)
 D PT^LRX
"RTN","LRCAPES",80,0)
 S LRUID=$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",16)
"RTN","LRCAPES",81,0)
 S LRLLOCX=$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",6)
"RTN","LRCAPES",82,0)
 S LRSPECID="Acc #: "_$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",15,"E")
"RTN","LRCAPES",83,0)
 S:$L($G(LRUID)) LRSPECID=LRSPECID_"  UID: "_LRUID
"RTN","LRCAPES",84,0)
 S LREDT=$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",9,"I")
"RTN","LRCAPES",85,0)
 I LREDT'?7N.E D  Q
"RTN","LRCAPES",86,0)
 . W !?5,"This accession does not have a Collection Date/Time",!
"RTN","LRCAPES",87,0)
 . W !?10,"CAN NOT PROCEED",!
"RTN","LRCAPES",88,0)
 . S LRNOP="6^Not Accessioned"
"RTN","LRCAPES",89,0)
 I '$G(LRIDT) S LRIDT=+$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",13.5,"I")
"RTN","LRCAPES",90,0)
 S LRCDT="Collection Date: "_$$FMTE^XLFDT(LREDT,1)
"RTN","LRCAPES",91,0)
 I '$L($G(LRSS)) S LRSS=$$GET1^DIQ(68,LRAA_",",.02,"I")
"RTN","LRCAPES",92,0)
 S LRDSSLOC=+$$GET1^DIQ(68,LRAA_",",.8,"I")
"RTN","LRCAPES",93,0)
 S LRDSSLOC=$S($G(LRDSSLOC):LRDSSLOC,1:LRDLOC)
"RTN","LRCAPES",94,0)
 D DEM^LRCAPES1
"RTN","LRCAPES",95,0)
PRO ;Get provider,patient/location information
"RTN","LRCAPES",96,0)
 S LREND=0
"RTN","LRCAPES",97,0)
 D
"RTN","LRCAPES",98,0)
 . N LRPRONM,DIR,DIRUT,DUOUT,X,Y
"RTN","LRCAPES",99,0)
 . S LRPRONM=$$GET1^DIQ(200,+$G(LRPRO),.01,"I")
"RTN","LRCAPES",100,0)
 . I $L(LRPRONM),$D(^VA(200,"AK.PROVIDER",LRPRONM,+$G(LRPRO)))#2,$$GET^XUA4A72(+$G(LRPRO),DT)>0 S DIR("B")=LRPRONM
"RTN","LRCAPES",101,0)
 . S DIR("A")="Releasing Pathologist"
"RTN","LRCAPES",102,0)
 . S LRPRO=0,DIR(0)="PO^200:ENMZ"
"RTN","LRCAPES",103,0)
 . S DIR("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U),+Y)),$$GET^XUA4A72(+Y,DT)>0"
"RTN","LRCAPES",104,0)
 . D ^DIR
"RTN","LRCAPES",105,0)
 . I Y>1 S LRPRO=+Y
"RTN","LRCAPES",106,0)
 I '$G(LRPRO) D  D END1 Q
"RTN","LRCAPES",107,0)
 . W !?5,"No Active Provider Selected",!
"RTN","LRCAPES",108,0)
 . S LRNOP=1
"RTN","LRCAPES",109,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,0))#2 D  D END1 G WLN
"RTN","LRCAPES",110,0)
 . W !?5,"The accession is corrupt - missing zero node",!
"RTN","LRCAPES",111,0)
 . S LRNOP="7^Corrupt Accession"
"RTN","LRCAPES",112,0)
LOC ;Reporting Location
"RTN","LRCAPES",113,0)
 S LRNODE0=^LRO(68,LRAA,1,LRAD,1,LRAN,0)
"RTN","LRCAPES",114,0)
 S LRNOP=0
"RTN","LRCAPES",115,0)
 S (LRLLOCX,LRLLOC)=$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",6)
"RTN","LRCAPES",116,0)
 I $L(LRLLOC) S LRLLOC=+$$FIND1^DIC(44,"","OM",LRLLOC)
"RTN","LRCAPES",117,0)
ASKLOC ;Check to see of outpatient location
"RTN","LRCAPES",118,0)
 I '$D(^SC(+$G(LRLLOC),0))#2 D
"RTN","LRCAPES",119,0)
 . N DIR,X,Y
"RTN","LRCAPES",120,0)
 . S LRLLOC=""
"RTN","LRCAPES",121,0)
 . S DIR(0)="PO^44:AEZNMO",DIR("A")=" Ordering Location "
"RTN","LRCAPES",122,0)
 . D ^DIR
"RTN","LRCAPES",123,0)
 . I +Y<1 Q
"RTN","LRCAPES",124,0)
 . S LRLLOC=+Y
"RTN","LRCAPES",125,0)
 I '$G(LRLLOC) D END1 Q
"RTN","LRCAPES",126,0)
 S LRDSSID=+$$GET1^DIQ(44,+LRLLOC,8,"I") ;I 'LRDSSID S LRNOP="2^No Stop Code Number" Q
"RTN","LRCAPES",127,0)
 S LRNINS=$$GET1^DIQ(44,+LRLLOC,3,"I")
"RTN","LRCAPES",128,0)
 S LRNINS=$S(LRNINS:LRNINS,1:DUZ(2))
"RTN","LRCAPES",129,0)
 Q
"RTN","LRCAPES",130,0)
ES() ;Entry point for front end application.
"RTN","LRCAPES",131,0)
 N DFN,LRESCPT,LRDFN,LRLLOC,LRLLOCX,LRNINS,LRTST,LRENCDT,LRDUZ
"RTN","LRCAPES",132,0)
 K LRES,LRESCPT
"RTN","LRCAPES",133,0)
 S LRES=1
"RTN","LRCAPES",134,0)
ASK ; Option entry point - Check and setup PCE reporting variables
"RTN","LRCAPES",135,0)
 D EN^LRCAPES1
"RTN","LRCAPES",136,0)
 N X,Y,T1
"RTN","LRCAPES",137,0)
 S LREND=0
"RTN","LRCAPES",138,0)
 D ^LRPARAM Q:$G(LREND)
"RTN","LRCAPES",139,0)
 K ^TMP("LRPXAPI",$J),^TMP("LR",$J,"LRLST")
"RTN","LRCAPES",140,0)
 S ^TMP("LR",$J,"LRLST")=$$FMADD^XLFDT(DT,2)_U_DT_U_"LAB ES CPT"
"RTN","LRCAPES",141,0)
 S:'$G(LRPKG) LRPKG=$O(^DIC(9.4,"B","LR",0))
"RTN","LRCAPES",142,0)
 S:'$G(LRPKG) LRPKG=$O(^DIC(9.4,"B","LAB SERVICE",0))
"RTN","LRCAPES",143,0)
PKG ;Check to see if Lab Package is installed
"RTN","LRCAPES",144,0)
 I '$G(LRPKG) D  D WKL Q
"RTN","LRCAPES",145,0)
 . W !?5,"LAB SERVICE PACKAGE is not loaded",!
"RTN","LRCAPES",146,0)
PCE ;Check to see if PCE is turned on
"RTN","LRCAPES",147,0)
 S X="PXAI" X ^%ZOSF("TEST") I '$T D:'$G(LRES)  D WKL Q
"RTN","LRCAPES",148,0)
 . W !?5,"PCE Is not installed",!
"RTN","LRCAPES",149,0)
 S LRPCEON=$$PKGON^VSIT("PX")
"RTN","LRCAPES",150,0)
 I '$G(LRES),'LRPCEON D  D WKL Q
"RTN","LRCAPES",151,0)
 . W !?5,"PCE is not turned on",!
"RTN","LRCAPES",152,0)
 S LRDLOC=+$$GET1^DIQ(69.9,"1,",.8,"I")
"RTN","LRCAPES",153,0)
OOS ;Check to see if the LRDLOC is an OOS location
"RTN","LRCAPES",154,0)
 I $G(LRES),$P($G(^SC(LRDLOC,0)),U)'["LAB DIV " D  D WKL Q
"RTN","LRCAPES",155,0)
 . W !?5,"DEFAULT LAB OOS LOCATION is not defined correctly",!
"RTN","LRCAPES",156,0)
 S LRESCPT=1
"RTN","LRCAPES",157,0)
 D:'$G(^TMP("LR",$J,"AK",0,1))'=DUZ_U_DT EN
"RTN","LRCAPES",158,0)
 I $G(LRES) Q $G(LRESCPT)
"RTN","LRCAPES",159,0)
LOOP ;
"RTN","LRCAPES",160,0)
 Q:$G(LREND)
"RTN","LRCAPES",161,0)
 F  D WLN Q:$G(LREND)  I '$G(LRNOP) D CPTEN Q:$G(LREND)
"RTN","LRCAPES",162,0)
 D CLEAN Q
"RTN","LRCAPES",163,0)
CPTEN ;Entry point from CPT API call
"RTN","LRCAPES",164,0)
WKL S (LRNOP,LREND)=0 D READ^LRCAPES1
"RTN","LRCAPES",165,0)
 D DIS^LRCAPES1
"RTN","LRCAPES",166,0)
 I '$O(^TMP("LR",$J,"LRLST",0)) D END Q
"RTN","LRCAPES",167,0)
LOAD ;Setup ^TMP("LRPXAPI" to load CPT workload
"RTN","LRCAPES",168,0)
 K LRXCPT,LRXTST,^TMP("LRPXAPI",$J)
"RTN","LRCAPES",169,0)
 S LRDUZ=LRPRO
"RTN","LRCAPES",170,0)
 I '$G(LRESCPT) S LRNOP="3^PCE Workload Capture Not Setup"
"RTN","LRCAPES",171,0)
 I $G(LRNOP) D  D SENDWKL Q
"RTN","LRCAPES",172,0)
 . I '$D(LRQUIET) W !,$$CJ^XLFSTR("PCE Wkld Abort "_$P(LRNOP,U,2),IOM)
"RTN","LRCAPES",173,0)
 I $G(LRESCPT),'$G(LRNOP) D
"RTN","LRCAPES",174,0)
 . N AFTER812,D,D0,DDER,DI,DIC,DIG,DIH,DISL,DIV
"RTN","LRCAPES",175,0)
 . N I,LRACC,LRCNT,LRI,LRPCEN,PXALOOK,PXASUB,PXJ,PXJJ
"RTN","LRCAPES",176,0)
 . N SDT1,SPEL,SUBL,TYPEI,X,XPARSYS
"RTN","LRCAPES",177,0)
 . S LRTST=0
"RTN","LRCAPES",178,0)
 . F  S LRTST=$O(^TMP("LR",$J,"LRLST",LRTST)) Q:LRTST<1  D
"RTN","LRCAPES",179,0)
 . . S (LRNLTN,CPT)=+$G(^TMP("LR",$J,"LRLST",LRTST)),LRTSTP=$P(^(LRTST),U,2,99)
"RTN","LRCAPES",180,0)
 . . D SET^LRCAPPH1
"RTN","LRCAPES",181,0)
SENDWKL ; Store LMIP workload
"RTN","LRCAPES",182,0)
 D SEND^LRCAPES1
"RTN","LRCAPES",183,0)
 L -^LRO(68,LRAA,1,LRAD,1,LRAN)
"RTN","LRCAPES",184,0)
 S LRNOP=0
"RTN","LRCAPES",185,0)
 Q
"RTN","LRCAPES",186,0)
CLEAN ;Final Cleanup
"RTN","LRCAPES",187,0)
 K AFTER812,AGE,CPT,D,D0,DOB,DDER,DFN,DI,DIC,DIG,DIH,DIR,DIRUT
"RTN","LRCAPES",188,0)
 K DISL,DIRUT,DIU,DUOUT,DIV,DQ
"RTN","LRCAPES",189,0)
 K I,J,LRACC,LRCNT,LRI,POP,PXALOOK,PXASUB,PXJ,PXJJ
"RTN","LRCAPES",190,0)
 K SDT1,SPEL,SUBL,T1,TYPEI,X,XPARSYS
"RTN","LRCAPES",191,0)
 K ANS,CLN,CNT,FPRI,LRAA,LRAD,LRAN,LRANSX,LRANSY,LRCDT,LRCNT
"RTN","LRCAPES",192,0)
 K LRDFN,LRDPF,LRDLOC,LRDSSID,LRDSSLOC,LRDUZ,LREDT,LREND,LRES,LRESCPT
"RTN","LRCAPES",193,0)
 K LRIDT,LRIDIV,LRLLOC,LRLLOCX,LRLST,LRNINS,LRNLT,LRNLTN,LRNODE0,LRNOP,LROK
"RTN","LRCAPES",194,0)
 K LRPCEN,LRPCENON,LRPCEVSO,LRPKG,LRPRAC,LRPRO,LRRB,LRQ,LRSS,LRTREA,LRTST,LRURG
"RTN","LRCAPES",195,0)
 K LRSPECID,LRTSTP,LRUID,LRVBY
"RTN","LRCAPES",196,0)
 K LRVSITN,LRWRD,LRX,LRXCPT,LRXTST
"RTN","LRCAPES",197,0)
 K NODE,NODE0,PNM,SEX,SDFLAG,SSN,VA,X1,X2,X3
"RTN","LRCAPES",198,0)
 K ^TMP("LRMOD",$J)
"RTN","LRCAPES",199,0)
 K ^TMP("LR",$J,"AK"),^TMP("LR",$J,"LRLST")
"RTN","LRCAPES",200,0)
 K ^TMP("LRPXAPI",$J)
"RTN","LRCAPES",201,0)
 D KVAR^VADPT
"RTN","LRCAPES",202,0)
 Q
"RTN","LRCAPES",203,0)
CPT(LRAA,LRAD,LRAN,LRPRO) ;AP Release entry point
"RTN","LRCAPES",204,0)
 ;LRAA=accession area, LRAD=accession date, LRAN=accession number
"RTN","LRCAPES",205,0)
 ;LRPRO=provider
"RTN","LRCAPES",206,0)
 N X,Y,I,LRI,LREDT,LRCDT,LRIDT,LRLLOCX,LRSPECID,DIC,LRNOP,LREND
"RTN","LRCAPES",207,0)
 S (LRLLOCX,LRLLOC)=$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",6)
"RTN","LRCAPES",208,0)
 S DIC=44,DIC(0)="ONM",X=LRLLOC D ^DIC
"RTN","LRCAPES",209,0)
 I Y>1 S LRLLOC=+Y
"RTN","LRCAPES",210,0)
 I Y<1 D  Q:$G(LREND)
"RTN","LRCAPES",211,0)
 . S DIC(0)="AEZNM" D ^DIC
"RTN","LRCAPES",212,0)
 . I Y<1 S LRNOP="4^Not an outpatient location",LREND=1 Q
"RTN","LRCAPES",213,0)
 . S LRLLOC=+Y
"RTN","LRCAPES",214,0)
 ;KLL - set LRDSSLOC to LRDLOC, instead of LRLLOC to resolve location
"RTN","LRCAPES",215,0)
 ;      problem occurring in PCE
"RTN","LRCAPES",216,0)
 S LRDSSLOC=+$G(LRDLOC)
"RTN","LRCAPES",217,0)
 ;I "CMZ"'[$$GET1^DIQ(44,+LRLLOC,2,"I") S LRNOP="4^Not an outpatient location"
"RTN","LRCAPES",218,0)
 S LRDSSID=+$$GET1^DIQ(44,+LRLLOC,8,"I") ;I 'LRDSSID,'$G(LRNOP) S LRNOP="5^No Stop Code Number"
"RTN","LRCAPES",219,0)
 S LRNINS=$$GET1^DIQ(44,+LRLLOC,3,"I")
"RTN","LRCAPES",220,0)
 S LRNINS=$S(LRNINS:LRNINS,1:DUZ(2))
"RTN","LRCAPES",221,0)
 I '$G(LRIDT) S LRIDT=+$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",13.5,"I")
"RTN","LRCAPES",222,0)
 S LRUID=$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",16)
"RTN","LRCAPES",223,0)
 S LRLLOCX=$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",6)
"RTN","LRCAPES",224,0)
 S LRSPECID="Acc #: "_$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",15,"E")
"RTN","LRCAPES",225,0)
 S:$L($G(LRUID)) LRSPECID=LRSPECID_"  UID: "_LRUID
"RTN","LRCAPES",226,0)
 S LREDT=$$GET1^DIQ(68.02,LRAN_","_LRAD_","_LRAA_",",9,"I")
"RTN","LRCAPES",227,0)
 I 'LREDT S LREDT=$$NOW^XLFDT
"RTN","LRCAPES",228,0)
 S LRCDT="Collection Date: "_$$FMTE^XLFDT(LREDT,1)
"RTN","LRCAPES",229,0)
 I '$G(LRESCPT) D  Q
"RTN","LRCAPES",230,0)
 . D EN^DDIOL("CPT workload is not activated","","!?20")
"RTN","LRCAPES",231,0)
 I $S('$G(LRAA):1,'$G(LRAD):1,'$G(LRAN):1,'$G(LRPRO):1,1:0) Q
"RTN","LRCAPES",232,0)
 I +$G(^LRO(68,LRAA,1,LRAD,1,LRAN,0))'=LRDFN Q
"RTN","LRCAPES",233,0)
 D CPTEN
"RTN","LRCAPES",234,0)
 Q
"RTN","LRSPRPT")
0^38^B88845330
"RTN","LRSPRPT",1,0)
LRSPRPT ;AVAMC/REG/WTY/KLL - CY/EM/SP PATIENT RPT ;08/22/01
"RTN","LRSPRPT",2,0)
 ;;5.2;LAB SERVICE;**1,72,248,259**;Sep 27, 1994
"RTN","LRSPRPT",3,0)
 ;
"RTN","LRSPRPT",4,0)
 W !!?20,LRO(68)," FINAL PATIENT REPORTS"
"RTN","LRSPRPT",5,0)
 K LRSAV,LRAP,LRS(99)
"RTN","LRSPRPT",6,0)
 D EN2^LRUA
"RTN","LRSPRPT",7,0)
 G END^LRSPRPT1:LRAPX=2,SGL:LRAPX=3,CH:LRAPX=4
"RTN","LRSPRPT",8,0)
GETP ;
"RTN","LRSPRPT",9,0)
 D EN1^LRUPS Q:LRAN=-1
"RTN","LRSPRPT",10,0)
 G:$D(^LRO(69.2,LRAA,2,LRAN,0)) GETP
"RTN","LRSPRPT",11,0)
 L +^LRO(69.2,LRAA,2):5  I '$T D  G GETP
"RTN","LRSPRPT",12,0)
 .S MSG(1)="The final reports queue is in use by another person.  "
"RTN","LRSPRPT",13,0)
 .S MSG(1,"F")="!!"
"RTN","LRSPRPT",14,0)
 .S MSG(2)="You will need to add this accession to the queue later."
"RTN","LRSPRPT",15,0)
 .D EN^DDIOL(.MSG) K MSG
"RTN","LRSPRPT",16,0)
 S ^LRO(69.2,LRAA,2,LRAN,0)=LRDFN_"^"_LRI
"RTN","LRSPRPT",17,0)
 S X=^LRO(69.2,LRAA,2,0),^(0)=$P(X,"^",1,2)_"^"_LRAN_"^"_($P(X,"^",4)+1)
"RTN","LRSPRPT",18,0)
 L -^LRO(69.2,LRAA,2)
"RTN","LRSPRPT",19,0)
 G GETP
"RTN","LRSPRPT",20,0)
CH ;
"RTN","LRSPRPT",21,0)
 S LRAPX(1)=2 D EN^LRSPRPT2 Q:%<1
"RTN","LRSPRPT",22,0)
 W !!,"Save final report list for reprinting "
"RTN","LRSPRPT",23,0)
 S %=2 D YN^LRU S:%=1 LRSAV=1
"RTN","LRSPRPT",24,0)
 ;Variable LR("DVD") is used to divide reports displayed in the browser
"RTN","LRSPRPT",25,0)
 K LR("DVD")
"RTN","LRSPRPT",26,0)
 S $P(LR("DVD"),"|",IOM)=""
"RTN","LRSPRPT",27,0)
DEV ;from LRAPMOD
"RTN","LRSPRPT",28,0)
 W !
"RTN","LRSPRPT",29,0)
 S %ZIS="Q" D ^%ZIS
"RTN","LRSPRPT",30,0)
 I POP W ! D END Q
"RTN","LRSPRPT",31,0)
 I $D(IO("Q")) D  Q
"RTN","LRSPRPT",32,0)
 .S ZTDESC="ANAT PATH FINAL REPORT"
"RTN","LRSPRPT",33,0)
 .S ZTSAVE("LR*")="",ZTRTN="QUE^LRSPRPT"
"RTN","LRSPRPT",34,0)
 .D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued, #",ZTSK W !
"RTN","LRSPRPT",35,0)
 .K ZTSK,IO("Q") D HOME^%ZIS
"RTN","LRSPRPT",36,0)
QUE ;
"RTN","LRSPRPT",37,0)
 U IO
"RTN","LRSPRPT",38,0)
 N LRFFF
"RTN","LRSPRPT",39,0)
 ;LRSF515=1 means that this is generating an SF515
"RTN","LRSPRPT",40,0)
 S:'$D(LRSF515) LRSF515=0
"RTN","LRSPRPT",41,0)
 S:'$D(LRFOC) LRFOC=0
"RTN","LRSPRPT",42,0)
 S:'$D(LRQUIT) LRQUIT=0
"RTN","LRSPRPT",43,0)
 S LRFFF=1  ;Flag used to determine whether to perform final form feed
"RTN","LRSPRPT",44,0)
 I LRFOC S LRFFF=0  ;If final office copy, don't perform final form feed
"RTN","LRSPRPT",45,0)
 S LR(.21)=+$G(^LRO(69.2,LRAA,.2)),LR("DIWF")="W"
"RTN","LRSPRPT",46,0)
 S LRA=$S($D(^LRO(69.2,LRAA,0)):$P(^(0),U,9),1:1) S:LRA="" LRA=1
"RTN","LRSPRPT",47,0)
 D L^LRU,S^LRU,L1^LRU,SET^LRUA
"RTN","LRSPRPT",48,0)
PSGL ;Single Report
"RTN","LRSPRPT",49,0)
 I $D(LRAP) D  G LST
"RTN","LRSPRPT",50,0)
 .S LRDFN=$P(LRAP,"^"),LRI=$P(LRAP,"^",2)
"RTN","LRSPRPT",51,0)
 .I +$G(LRPTR) D  Q
"RTN","LRSPRPT",52,0)
 ..D MAIN^LRAPTIUP(LRPTR,0)
"RTN","LRSPRPT",53,0)
 ..S LRFFF=0 ;Don't do final form feed.  It's done by LRAPTIUP.
"RTN","LRSPRPT",54,0)
 ..I LRQUIT S LR("Q")=1 Q
"RTN","LRSPRPT",55,0)
 ..K LRAP S LR("F")=1
"RTN","LRSPRPT",56,0)
 ..I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRSPRPT",57,0)
 ..Q:LR("Q")
"RTN","LRSPRPT",58,0)
 ..I 'LRFOC S LR("Q")=1 Q
"RTN","LRSPRPT",59,0)
 ..D FOC
"RTN","LRSPRPT",60,0)
 ..I LRQUIT S LR("Q")=1 Q
"RTN","LRSPRPT",61,0)
 ..I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRSPRPT",62,0)
 .W:IOST?1"C-".E @IOF
"RTN","LRSPRPT",63,0)
 .D EN
"RTN","LRSPRPT",64,0)
 .K LRAP
"RTN","LRSPRPT",65,0)
 .I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRSPRPT",66,0)
 .Q:LR("Q")
"RTN","LRSPRPT",67,0)
 .I 'LRFOC S LR("Q")=1 Q
"RTN","LRSPRPT",68,0)
 .W !
"RTN","LRSPRPT",69,0)
 .W:IOST?1"P-".E @IOF
"RTN","LRSPRPT",70,0)
 .D FOC
"RTN","LRSPRPT",71,0)
 .I LRQUIT S LR("Q")=1 Q
"RTN","LRSPRPT",72,0)
 .I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRSPRPT",73,0)
PQUE ;Report from queue
"RTN","LRSPRPT",74,0)
 S LRAN=0
"RTN","LRSPRPT",75,0)
 F  S LRAN=$O(^LRO(69.2,LRAA,2,LRAN)) Q:'LRAN!(LR("Q"))  D
"RTN","LRSPRPT",76,0)
 .S LRQUIT=0
"RTN","LRSPRPT",77,0)
 .I 'LRFOC S LRFFF=1
"RTN","LRSPRPT",78,0)
 .K LR("F")
"RTN","LRSPRPT",79,0)
 .S X=^LRO(69.2,LRAA,2,LRAN,0),LRDFN=+X,LRI=$P(X,"^",2)
"RTN","LRSPRPT",80,0)
 .D TIUCHK^LRAPUTL(.LRPTR,LRDFN,LRSS,LRI)
"RTN","LRSPRPT",81,0)
 .I +$G(LRPTR) D  Q
"RTN","LRSPRPT",82,0)
 ..D MAIN^LRAPTIUP(LRPTR,0)
"RTN","LRSPRPT",83,0)
 ..S LRFFF=0
"RTN","LRSPRPT",84,0)
 ..W:IOST["BROWSER"&('LRFOC) !!,LR("DVD")
"RTN","LRSPRPT",85,0)
 ..K LRPTR
"RTN","LRSPRPT",86,0)
 ..I LRQUIT S LR("Q")=1 Q
"RTN","LRSPRPT",87,0)
 ..S LR("F")=1
"RTN","LRSPRPT",88,0)
 ..I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRSPRPT",89,0)
 ..Q:LR("Q")!('LRFOC)
"RTN","LRSPRPT",90,0)
 ..D FOC
"RTN","LRSPRPT",91,0)
 ..W:IOST["BROWSER" !!,LR("DVD")
"RTN","LRSPRPT",92,0)
 ..I LRQUIT S LR("Q")=1 Q
"RTN","LRSPRPT",93,0)
 ..I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRSPRPT",94,0)
 .W:IOST?1"C-".E @IOF
"RTN","LRSPRPT",95,0)
 .D EN
"RTN","LRSPRPT",96,0)
 .W:IOST?1"P-".E @IOF
"RTN","LRSPRPT",97,0)
 .W:IOST["BROWSER"&('LRFOC) !!,LR("DVD")
"RTN","LRSPRPT",98,0)
 .I 'LR("Q"),$D(LR("F")),IOST?1"C-".E D CONT
"RTN","LRSPRPT",99,0)
 .Q:LR("Q")
"RTN","LRSPRPT",100,0)
 .Q:'LRFOC
"RTN","LRSPRPT",101,0)
 .W !
"RTN","LRSPRPT",102,0)
 .D FOC
"RTN","LRSPRPT",103,0)
 .W:IOST["BROWSER" !!,LR("DVD")
"RTN","LRSPRPT",104,0)
 .I LRQUIT S LR("Q")=1 Q
"RTN","LRSPRPT",105,0)
 .I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRSPRPT",106,0)
 S LRFFF=0
"RTN","LRSPRPT",107,0)
LST ;
"RTN","LRSPRPT",108,0)
 K LRRMD,LRPMD,LRAP
"RTN","LRSPRPT",109,0)
 K:'$D(LRSAV) ^LRO(69.2,LRAA,2)
"RTN","LRSPRPT",110,0)
 S ^LRO(69.2,LRAA,2,0)="^69.23A^^0"
"RTN","LRSPRPT",111,0)
 K LRSAV,LRV,LRW,LRZ
"RTN","LRSPRPT",112,0)
 I IOST?1"P-".E W:LRFFF @IOF
"RTN","LRSPRPT",113,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LRSPRPT",114,0)
 K %,DIR,DTOUT,DUOUT,DIRUT,X,Y
"RTN","LRSPRPT",115,0)
 D END
"RTN","LRSPRPT",116,0)
 Q
"RTN","LRSPRPT",117,0)
W ;
"RTN","LRSPRPT",118,0)
 W !,LR("%")
"RTN","LRSPRPT",119,0)
 Q
"RTN","LRSPRPT",120,0)
F ;        
"RTN","LRSPRPT",121,0)
 D E
"RTN","LRSPRPT",122,0)
 S A=0 F LRZ=0:1 S A=$O(^LR(LRDFN,LRSS,LRI,LRV,A)) Q:'A!(LR("Q"))  D
"RTN","LRSPRPT",123,0)
 .D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",124,0)
 .S X=^LR(LRDFN,LRSS,LRI,LRV,A,0) D:X["|TOP|" TOP D ^DIWP
"RTN","LRSPRPT",125,0)
 Q:LR("Q")  D:LRZ ^DIWW
"RTN","LRSPRPT",126,0)
 Q
"RTN","LRSPRPT",127,0)
E ;
"RTN","LRSPRPT",128,0)
 K ^UTILITY($J)
"RTN","LRSPRPT",129,0)
 S DIWR=IOM-5,DIWL=5,DIWF=LR("DIWF")
"RTN","LRSPRPT",130,0)
 Q
"RTN","LRSPRPT",131,0)
 ;
"RTN","LRSPRPT",132,0)
EN ;from LRSPT
"RTN","LRSPRPT",133,0)
 ;KLL-Suppress printing of SNOMED codes, except on Preliminary prints
"RTN","LRSPRPT",134,0)
 S LR("SPSM")=$S($G(LRPRE):0,1:1)
"RTN","LRSPRPT",135,0)
 S LR(.21)=+$G(^LRO(69.2,+$G(LRAA),.2))
"RTN","LRSPRPT",136,0)
 K LRO Q:'$D(^LR(LRDFN,LRSS,LRI,0))
"RTN","LRSPRPT",137,0)
 S LRQ=0
"RTN","LRSPRPT",138,0)
 D ^LRUA
"RTN","LRSPRPT",139,0)
 D INP^VADPT S LRPRAC=+VAIN(2)
"RTN","LRSPRPT",140,0)
 S:'LRPRAC LRPRAC(1)=""
"RTN","LRSPRPT",141,0)
 I LRPRAC S X=LRPRAC D D^LRUA S LRPRAC(1)=X
"RTN","LRSPRPT",142,0)
 D ^LRAPF Q:LR("Q")
"RTN","LRSPRPT",143,0)
 S LR("F")=1 W !,"Submitted by: ",LRW(5),?44,"Date obtained: ",LRTK
"RTN","LRSPRPT",144,0)
 D:LRA W
"RTN","LRSPRPT",145,0)
 W !,"Specimen (Received ",LRTK(1),"):" S LRV=.1 D A Q:LR("Q")
"RTN","LRSPRPT",146,0)
 D:LRA W W !,"Brief Clinical History:" S LRV=.2 D F Q:LR("Q")
"RTN","LRSPRPT",147,0)
 D:LRA W W !,"Preoperative Diagnosis:" S LRV=.3 D F Q:LR("Q")
"RTN","LRSPRPT",148,0)
 D:LRA W W !,"Operative Findings:" S LRV=.4 D F Q:LR("Q")
"RTN","LRSPRPT",149,0)
 D:LRA W W !,"Postoperative Diagnosis:" S LRV=.5 D F Q:LR("Q")
"RTN","LRSPRPT",150,0)
 W !?27,"Surgeon/physician: ",LRMD W:LRA !,LR("%1")
"RTN","LRSPRPT",151,0)
 D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",152,0)
 D P^LRAPF
"RTN","LRSPRPT",153,0)
 D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",154,0)
 D:LRA W
"RTN","LRSPRPT",155,0)
 W:LRRC="" !?20,"+*+* REPORT INCOMPLETE *+*+",!
"RTN","LRSPRPT",156,0)
 D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",157,0)
 W ! W:LRRMD]"" ?31,$S(LRSS="SP":"Pathology Resident: ",LRSS="CY":"Screened by: ",LRSS="EM":"Prepared by: ",1:" "),LRRMD
"RTN","LRSPRPT",158,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.3,0)) D  Q:LR("Q")
"RTN","LRSPRPT",159,0)
 .D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",160,0)
 .W !,LR(69.2,.13)
"RTN","LRSPRPT",161,0)
 .I $P($G(^LR(LRDFN,LRSS,LRI,6,0)),U,4) S LR(0)=6 D ^LRSPRPTM
"RTN","LRSPRPT",162,0)
 S LRV=1.3 D F Q:LR("Q")
"RTN","LRSPRPT",163,0)
 I $O(^LR(LRDFN,LRSS,LRI,1,0)) D  Q:LR("Q")
"RTN","LRSPRPT",164,0)
 .D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",165,0)
 .W !,LR(69.2,.03)
"RTN","LRSPRPT",166,0)
 .I $P($G(^LR(LRDFN,LRSS,LRI,7,0)),U,4) S LR(0)=7 D ^LRSPRPTM
"RTN","LRSPRPT",167,0)
 S LRV=1 D F Q:LR("Q")
"RTN","LRSPRPT",168,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.1,0)) D  Q:LR("Q")
"RTN","LRSPRPT",169,0)
 .D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",170,0)
 .W !,LR(69.2,.04)
"RTN","LRSPRPT",171,0)
 .I $P($G(^LR(LRDFN,LRSS,LRI,4,0)),"^",4) S LR(0)=4 D ^LRSPRPTM
"RTN","LRSPRPT",172,0)
 S LRV=1.1 D F Q:LR("Q")
"RTN","LRSPRPT",173,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.4,0)) D  Q:LR("Q")
"RTN","LRSPRPT",174,0)
 .D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",175,0)
 .W !,LR(69.2,.14)
"RTN","LRSPRPT",176,0)
 .I $P($G(^LR(LRDFN,LRSS,LRI,5,0)),U,4) S LR(0)=5 D ^LRSPRPTM
"RTN","LRSPRPT",177,0)
 S LRV=1.4 D F Q:LR("Q")
"RTN","LRSPRPT",178,0)
 ;Supplementary Report
"RTN","LRSPRPT",179,0)
 I $O(^LR(LRDFN,LRSS,LRI,1.2,0)) D:LR(.21) F^LRAPF,^LRAPF Q:LR("Q")  D
"RTN","LRSPRPT",180,0)
 .D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",181,0)
 .W !,"Supplementary Report:"
"RTN","LRSPRPT",182,0)
 .S LRV=0 F  S LRV=$O(^LR(LRDFN,LRSS,LRI,1.2,LRV)) Q:'LRV!(LR("Q"))  D
"RTN","LRSPRPT",183,0)
 ..S X=^LR(LRDFN,LRSS,LRI,1.2,LRV,0) D S
"RTN","LRSPRPT",184,0)
 D ^LRSPRPT1 Q:LR("Q")
"RTN","LRSPRPT",185,0)
 Q:+$G(LRPRE)  ;Don't set the final flag and print the footer if prelim
"RTN","LRSPRPT",186,0)
 S LRO=1 D F^LRAPF
"RTN","LRSPRPT",187,0)
 Q
"RTN","LRSPRPT",188,0)
S ;
"RTN","LRSPRPT",189,0)
 S Y=+X,X=$P(X,U,2) D D^LRU
"RTN","LRSPRPT",190,0)
 W !?3,"Date: ",Y
"RTN","LRSPRPT",191,0)
 I $D(LR("R")),'X W " not verified" Q
"RTN","LRSPRPT",192,0)
 D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q") 
"RTN","LRSPRPT",193,0)
 D:$P($G(^LR(LRDFN,LRSS,LRI,1.2,LRV,2,0)),U,4) SUPA
"RTN","LRSPRPT",194,0)
 D E S B=0
"RTN","LRSPRPT",195,0)
 F LRZ=0:1 S B=$O(^LR(LRDFN,LRSS,LRI,1.2,LRV,1,B)) Q:'B!(LR("Q"))  D
"RTN","LRSPRPT",196,0)
 .D:$Y>(IOSL-14) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",197,0)
 .S DIWF="W"
"RTN","LRSPRPT",198,0)
 .S X=^LR(LRDFN,LRSS,LRI,1.2,LRV,1,B,0) D ^DIWP Q:LR("Q")
"RTN","LRSPRPT",199,0)
 Q:LR("Q")
"RTN","LRSPRPT",200,0)
 D:LRZ ^DIWW
"RTN","LRSPRPT",201,0)
 Q
"RTN","LRSPRPT",202,0)
SGL ;Print Single Report
"RTN","LRSPRPT",203,0)
 N LRPTR
"RTN","LRSPRPT",204,0)
 S LRAPX(1)=""
"RTN","LRSPRPT",205,0)
 D EN1^LRUPS Q:LRAN=-1
"RTN","LRSPRPT",206,0)
 I '$P(^LR(LRDFN,LRSS,LRI,0),"^",11) D  G SGL
"RTN","LRSPRPT",207,0)
 .W $C(7)," Sorry, report not verified.",!
"RTN","LRSPRPT",208,0)
 D TIUCHK^LRAPUTL(.LRPTR,LRDFN,LRSS,LRI)
"RTN","LRSPRPT",209,0)
 S LRAP=LRDFN_"^"_LRI,LRSAV=1
"RTN","LRSPRPT",210,0)
 D EN2^LRUA
"RTN","LRSPRPT",211,0)
 G DEV
"RTN","LRSPRPT",212,0)
A ;
"RTN","LRSPRPT",213,0)
 S A=0 F  S A=$O(^LR(LRDFN,LRSS,LRI,LRV,A)) Q:'A!(LR("Q"))  D
"RTN","LRSPRPT",214,0)
 .D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",215,0)
 .W !,$P(^LR(LRDFN,LRSS,LRI,LRV,A,0),"^")
"RTN","LRSPRPT",216,0)
 Q
"RTN","LRSPRPT",217,0)
TOP ;
"RTN","LRSPRPT",218,0)
 S Z=$P(X,"|TOP|",1)_$P(X,"|TOP|",2) D F^LRAPF,^LRAPF S X=Z
"RTN","LRSPRPT",219,0)
 Q
"RTN","LRSPRPT",220,0)
SUPA ;Print supplementary report audit information
"RTN","LRSPRPT",221,0)
 W !?14,"*+* SUPPLEMENTARY REPORT HAS BEEN ADDED/MODIFIED *+*"
"RTN","LRSPRPT",222,0)
 W !,"(Added/Last modified: "
"RTN","LRSPRPT",223,0)
 S (A,B)=0 F  S A=$O(^LR(LRDFN,LRSS,LRI,1.2,LRV,2,A)) Q:'A!(LR("Q"))  D
"RTN","LRSPRPT",224,0)
 .S B=A
"RTN","LRSPRPT",225,0)
 Q:LR("Q")
"RTN","LRSPRPT",226,0)
 Q:'$D(^LR(LRDFN,LRSS,LRI,1.2,LRV,2,B,0))
"RTN","LRSPRPT",227,0)
 S A=^(0),Y=+A,LRSGN="  typed by ",A=$P(A,"^",2)
"RTN","LRSPRPT",228,0)
 I $P(^LR(LRDFN,LRSS,LRI,1.2,LRV,2,B,0),"^",3) D
"RTN","LRSPRPT",229,0)
 .S A=^(0),LRSGN=" signed by ",A2=$P(A,"^",3),Y=$P(A,"^",4)
"RTN","LRSPRPT",230,0)
 .S A=A2
"RTN","LRSPRPT",231,0)
 S A=$S($D(^VA(200,A,0)):$P(^(0),"^"),1:A)
"RTN","LRSPRPT",232,0)
 ;If supp rpt is released, display 'signed by' instead of 'typed by'
"RTN","LRSPRPT",233,0)
 D D^LRU W Y,LRSGN,A,")"
"RTN","LRSPRPT",234,0)
 D:$D(LRQ(9)) SUPM
"RTN","LRSPRPT",235,0)
 Q
"RTN","LRSPRPT",236,0)
SUPM ;Print previous versions of supplementary reports
"RTN","LRSPRPT",237,0)
 ;This is used by menu option 'Print path modifications [LRAPMOD]'
"RTN","LRSPRPT",238,0)
 ;
"RTN","LRSPRPT",239,0)
 S A=0 F  S A=$O(^LR(LRDFN,LRSS,LRI,1.2,LRV,2,A)) Q:'A!(LR("Q"))  D
"RTN","LRSPRPT",240,0)
 .S LRT=^LR(LRDFN,LRSS,LRI,1.2,LRV,2,A,0)
"RTN","LRSPRPT",241,0)
 .D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",242,0)
 .S Y=+LRT,Y2=" modified: ",X=$P(LRT,"^",2),LRSGN="  typed by "
"RTN","LRSPRPT",243,0)
 .;If supp rpt is released, display 'signed by' instead of 'typed by' 
"RTN","LRSPRPT",244,0)
 .I $P(LRT,"^",3) S LRSGN=" signed by ",X=$P(LRT,"^",3),Y=$P(LRT,"^",4),Y2=" released: "
"RTN","LRSPRPT",245,0)
 .S X=$S($D(^VA(200,X,0)):$P(^(0),"^"),1:X)
"RTN","LRSPRPT",246,0)
 .D D^LRU W !,"Date ",Y2,Y,LRSGN,X
"RTN","LRSPRPT",247,0)
 .K ^UTILITY($J)
"RTN","LRSPRPT",248,0)
 .S DIWR=IOM-5,DIWL=5,DIWF="W"
"RTN","LRSPRPT",249,0)
 .S B=0
"RTN","LRSPRPT",250,0)
 .F LRZ=0:1 S B=$O(^LR(LRDFN,LRSS,LRI,1.2,LRV,2,A,1,B)) Q:'B!(LR("Q"))  D
"RTN","LRSPRPT",251,0)
 ..S LRT=^LR(LRDFN,LRSS,LRI,1.2,LRV,2,A,1,B,0)
"RTN","LRSPRPT",252,0)
 ..D:$Y>(IOSL-13) F^LRAPF,^LRAPF Q:LR("Q")
"RTN","LRSPRPT",253,0)
 ..S X=LRT D ^DIWP
"RTN","LRSPRPT",254,0)
 .Q:LR("Q")  D:LRZ ^DIWW
"RTN","LRSPRPT",255,0)
 Q:LR("Q")
"RTN","LRSPRPT",256,0)
 W !?13,"==========Text below appears on final report=========="
"RTN","LRSPRPT",257,0)
 Q
"RTN","LRSPRPT",258,0)
CONT ;
"RTN","LRSPRPT",259,0)
 K DIR S DIR(0)="E"
"RTN","LRSPRPT",260,0)
 D ^DIR W !
"RTN","LRSPRPT",261,0)
 S:$D(DTOUT)!(X[U) LR("Q")=1
"RTN","LRSPRPT",262,0)
 Q
"RTN","LRSPRPT",263,0)
FOC ;Print final office copy page (SNOMEDS)
"RTN","LRSPRPT",264,0)
 N LRADC,LRCTR
"RTN","LRSPRPT",265,0)
 I '$D(LRAP) D
"RTN","LRSPRPT",266,0)
 .D:LRSS'="AU" ^LRUA
"RTN","LRSPRPT",267,0)
 .I LRSS="AU" S X=^LR(LRDFN,0) D ^LRUP
"RTN","LRSPRPT",268,0)
 I LRSS="AU" D
"RTN","LRSPRPT",269,0)
 .S LRADC=$E($P(^LR(LRDFN,LRSS),"^"),1,3)_"0000"
"RTN","LRSPRPT",270,0)
 .S:+$G(LRDPF)=2 LRDEM("DTH")=$P(VADM(6),"^",2)
"RTN","LRSPRPT",271,0)
 .;Get DATE DIED from Referral File for Referral Patients
"RTN","LRSPRPT",272,0)
 .S:+$G(LRDPF)'=2 LRDEM("DTH")=$$GET1^DIQ(67,DFN_",",.351)
"RTN","LRSPRPT",273,0)
 .S LRDEM("AUDT")=$$GET1^DIQ(63,LRDFN_",",11)
"RTN","LRSPRPT",274,0)
 .S LRDEM("AUTYP")=$$GET1^DIQ(63,LRDFN_",",13.7)
"RTN","LRSPRPT",275,0)
 .S LRDEM("PRO")=$$GET1^DIQ(63,LRDFN_",",13.5)
"RTN","LRSPRPT",276,0)
 I LRSS'="AU" D
"RTN","LRSPRPT",277,0)
 .S LRADC=$E($P(^LR(LRDFN,LRSS,LRI,0),"^"),1,3)_"0000"
"RTN","LRSPRPT",278,0)
 .S LRDEM("PRO")=LRMD
"RTN","LRSPRPT",279,0)
 S LRDEM("PNM")=LRP,LRDEM("SSN")=SSN
"RTN","LRSPRPT",280,0)
 S LRDEM("SEX")=SEX,LRDEM("AGE")=AGE,LRDEM("DOB")=DOB
"RTN","LRSPRPT",281,0)
 D INIT^LRAPSNMD(LRDFN,LRSS,$G(LRI),LRSF,LRAA,LRAN,LRADC,.LRDEM,0)
"RTN","LRSPRPT",282,0)
 Q
"RTN","LRSPRPT",283,0)
END ;
"RTN","LRSPRPT",284,0)
 D V^LRU
"RTN","LRSPRPT",285,0)
 K LRSF515
"RTN","LRSPRPT",286,0)
 Q
"RTN","LRSPRPT1")
0^39^B10408921
"RTN","LRSPRPT1",1,0)
LRSPRPT1 ;AVAMC/REG/WTY - SURG PATH RPT PRINT CONT. ;10/16/01
"RTN","LRSPRPT1",2,0)
 ;;5.2;LAB SERVICE;**1,259**;Sep 27, 1994
"RTN","LRSPRPT1",3,0)
 ;
"RTN","LRSPRPT1",4,0)
 ;25-Jul-01;WTY;In line tag L, if being called by LRAPT2, don't do
"RTN","LRSPRPT1",5,0)
 ;              line tag F.  Do H1^LRAPT2 instead.
"RTN","LRSPRPT1",6,0)
 ;21-Aug-01;WTY;Removed call to LRSPRPT2 which prints SNOMED codes.
"RTN","LRSPRPT1",7,0)
 ;
"RTN","LRSPRPT1",8,0)
 S A=0 F  S A=+$O(^LR(LRDFN,LRSS,LRI,2,A)) Q:'A!(LR("Q"))  D
"RTN","LRSPRPT1",9,0)
 .S T=+^LR(LRDFN,LRSS,LRI,2,A,0),X=$S($D(^LAB(61,T,0)):^(0),1:"")
"RTN","LRSPRPT1",10,0)
 .S T(1)=$P(X,"^"),T(8)=$P(X,"^",2)
"RTN","LRSPRPT1",11,0)
 .D SP Q:LR("Q")
"RTN","LRSPRPT1",12,0)
 .D T
"RTN","LRSPRPT1",13,0)
 Q:LR("Q")
"RTN","LRSPRPT1",14,0)
 I $D(LRS(99)),'+$G(LR("SPSM")) D ^LRSPRPT2
"RTN","LRSPRPT1",15,0)
 Q:LR("Q")
"RTN","LRSPRPT1",16,0)
 I $D(LRS(99)) W ! D
"RTN","LRSPRPT1",17,0)
 .S A=0 F  S A=$O(^LR(LRDFN,LRSS,LRI,3,A)) Q:'A!(LR("Q"))  D
"RTN","LRSPRPT1",18,0)
 ..D:$Y>(IOSL-12) F Q:LR("Q")
"RTN","LRSPRPT1",19,0)
 ..S X=+^LR(LRDFN,LRSS,LRI,3,A,0)
"RTN","LRSPRPT1",20,0)
 ..S X=^ICD9(X,0),X(9)=$P(X,"^"),X=$P(X,"^",3)
"RTN","LRSPRPT1",21,0)
 ..W !,"ICD code: ",X(9),?20 D:LR(69.2,.05) C^LRUA W X
"RTN","LRSPRPT1",22,0)
 Q
"RTN","LRSPRPT1",23,0)
SP ;
"RTN","LRSPRPT1",24,0)
 S C=0 F  S C=$O(^LR(LRDFN,LRSS,LRI,2,A,5,C)) Q:'C!(LR("Q"))  D
"RTN","LRSPRPT1",25,0)
 .S T(3)=^LR(LRDFN,LRSS,LRI,2,A,5,C,0)
"RTN","LRSPRPT1",26,0)
 .S Y=$P(T(3),"^",2),E=$P(T(3),"^",3)
"RTN","LRSPRPT1",27,0)
 .S T(4)=$P(T(3),"^")_":",T(4)=$P($P(LR(LRSS),T(4),2),";",1)
"RTN","LRSPRPT1",28,0)
 .D D^LRU S T(2)=Y
"RTN","LRSPRPT1",29,0)
 .D:$Y>(IOSL-12) F Q:LR("Q")  D WP
"RTN","LRSPRPT1",30,0)
 Q
"RTN","LRSPRPT1",31,0)
WP ;
"RTN","LRSPRPT1",32,0)
 W !!,T(4)," ",E," Date: ",T(2)," ",!,T(1),!
"RTN","LRSPRPT1",33,0)
 D E S B=0
"RTN","LRSPRPT1",34,0)
 F LRZ=0:1 S B=$O(^LR(LRDFN,LRSS,LRI,2,A,5,C,1,B)) Q:'B!(LR("Q"))  D
"RTN","LRSPRPT1",35,0)
 .D:$Y>(IOSL-12) F Q:LR("Q")
"RTN","LRSPRPT1",36,0)
 .S X=^LR(LRDFN,LRSS,LRI,2,A,5,C,1,B,0) D ^DIWP
"RTN","LRSPRPT1",37,0)
 Q:LR("Q")  D:LRZ ^DIWW
"RTN","LRSPRPT1",38,0)
 Q
"RTN","LRSPRPT1",39,0)
E ;
"RTN","LRSPRPT1",40,0)
 K ^UTILITY($J) S DIWR=IOM-10,DIWL=10,DIWF="W"
"RTN","LRSPRPT1",41,0)
 Q
"RTN","LRSPRPT1",42,0)
T ;
"RTN","LRSPRPT1",43,0)
 S T(3)=T,T(4)=61 D EN
"RTN","LRSPRPT1",44,0)
 S M=0 F  S M=$O(^LR(LRDFN,LRSS,LRI,2,A,2,M)) Q:'M!(LR("Q"))  D
"RTN","LRSPRPT1",45,0)
 .S T(3)=+^LR(LRDFN,LRSS,LRI,2,A,2,M,0),T(4)=61.1 D EN Q:LR("Q")  D
"RTN","LRSPRPT1",46,0)
 ..S N=0 F  S N=$O(^LR(LRDFN,LRSS,LRI,2,A,2,M,1,N)) Q:'N!(LR("Q"))  D
"RTN","LRSPRPT1",47,0)
 ...S T(3)=+^LR(LRDFN,LRSS,LRI,2,A,2,M,1,N,0),T(4)=61.2 D EN
"RTN","LRSPRPT1",48,0)
 Q:LR("Q")
"RTN","LRSPRPT1",49,0)
 S M=0 F  S M=$O(^LR(LRDFN,LRSS,LRI,2,A,1,M)) Q:'M!(LR("Q"))  D
"RTN","LRSPRPT1",50,0)
 .S T(3)=+^LR(LRDFN,LRSS,LRI,2,A,1,M,0),T(4)=61.4 D EN
"RTN","LRSPRPT1",51,0)
 Q:LR("Q")
"RTN","LRSPRPT1",52,0)
 S M=0 F  S M=$O(^LR(LRDFN,LRSS,LRI,2,A,3,M)) Q:'M!(LR("Q"))  D
"RTN","LRSPRPT1",53,0)
 .S T(3)=+^LR(LRDFN,LRSS,LRI,2,A,3,M,0),T(4)=61.3 D EN
"RTN","LRSPRPT1",54,0)
 Q
"RTN","LRSPRPT1",55,0)
EN ;also from LRAPT2
"RTN","LRSPRPT1",56,0)
 S C(1)=0
"RTN","LRSPRPT1",57,0)
 F  S C(1)=$O(^LAB(T(4),T(3),"JR",C(1))) Q:'C(1)!(LR("Q"))  D
"RTN","LRSPRPT1",58,0)
 .I $P(^LAB(T(4),T(3),"JR",C(1),0),"^",7) S T(9)=^(0),T(5)=1 D L
"RTN","LRSPRPT1",59,0)
 Q
"RTN","LRSPRPT1",60,0)
L ;
"RTN","LRSPRPT1",61,0)
 S X=$O(^LAB(T(4),T(3),"JR",C(1),1,0))
"RTN","LRSPRPT1",62,0)
 I X K T(5) D
"RTN","LRSPRPT1",63,0)
 .S X=0 F  S X=$O(^LAB(T(4),T(3),"JR",C(1),1,X)) Q:'X  D
"RTN","LRSPRPT1",64,0)
 ..S Y=$P(^LAB(T(4),T(3),"JR",C(1),1,X,0),"^")
"RTN","LRSPRPT1",65,0)
 ..I Y=$E(T(8),1,$L(Y)) S T(5)=1
"RTN","LRSPRPT1",66,0)
 Q:'$D(T(5))
"RTN","LRSPRPT1",67,0)
 D PGCHK
"RTN","LRSPRPT1",68,0)
 Q:LR("Q")
"RTN","LRSPRPT1",69,0)
 W ! D PGCHK Q:LR("Q")
"RTN","LRSPRPT1",70,0)
 W !,"Reference: "
"RTN","LRSPRPT1",71,0)
 D PGCHK Q:LR("Q")
"RTN","LRSPRPT1",72,0)
 W !,$P(T(9),"^")
"RTN","LRSPRPT1",73,0)
 D PGCHK Q:LR("Q")
"RTN","LRSPRPT1",74,0)
 W !,$P(T(9),"^",2)
"RTN","LRSPRPT1",75,0)
 D PGCHK Q:LR("Q")
"RTN","LRSPRPT1",76,0)
 W !
"RTN","LRSPRPT1",77,0)
 I $P(T(9),"^",3) D
"RTN","LRSPRPT1",78,0)
 .W $P(^LAB(95,$P(T(9),"^",3),0),"^"),"  vol.",$P(T(9),"^",4)
"RTN","LRSPRPT1",79,0)
 .W " pg.",$P(T(9),"^",5)
"RTN","LRSPRPT1",80,0)
 S Y=$P(T(9),"^",6) D D^LRU W "  Date: ",Y
"RTN","LRSPRPT1",81,0)
 Q
"RTN","LRSPRPT1",82,0)
F ;
"RTN","LRSPRPT1",83,0)
 D F^LRAPF,^LRAPF
"RTN","LRSPRPT1",84,0)
 Q
"RTN","LRSPRPT1",85,0)
PGCHK ;
"RTN","LRSPRPT1",86,0)
 I $Y>(IOSL-12) D
"RTN","LRSPRPT1",87,0)
 .I LRSS="AU" D  Q
"RTN","LRSPRPT1",88,0)
 ..I '+$G(LRSF515) D H1^LRAPT Q
"RTN","LRSPRPT1",89,0)
 ..D:+$G(LRSF515) FT^LRAURPT,H^LRAURPT
"RTN","LRSPRPT1",90,0)
 .D F
"RTN","LRSPRPT1",91,0)
 Q
"RTN","LRSPRPT1",92,0)
END ;
"RTN","LRSPRPT1",93,0)
 W $C(7),!!,"OK TO DELETE THE ",LRAA(1)," FINAL REPORT LIST"
"RTN","LRSPRPT1",94,0)
 S %=2 D YN^LRU
"RTN","LRSPRPT1",95,0)
 I %=1 K ^LRO(69.2,LRAA,2) S ^LRO(69.2,LRAA,2,0)="^69.23A^0^0" D  Q
"RTN","LRSPRPT1",96,0)
 .W $C(7),!,"LIST DELETED !"
"RTN","LRSPRPT1",97,0)
 W !!,"FINE, LET'S FORGET IT",!
"RTN","LRSPRPT1",98,0)
 Q
"RTN","LRSPRPT2")
0^40^B13274845
"RTN","LRSPRPT2",1,0)
LRSPRPT2 ;AVAMC/REG/WTY - SURG PATH PRINT SNOMED;09/06/01
"RTN","LRSPRPT2",2,0)
 ;;5.2;LAB SERVICE;**72,259**;Sep 27, 1994
"RTN","LRSPRPT2",3,0)
 ;
"RTN","LRSPRPT2",4,0)
 D:$Y>(IOSL-13) F Q:LR("Q")
"RTN","LRSPRPT2",5,0)
 I $D(^LR(LRDFN,LRSS,LRI,2,A)) W !,"SNOMED code(s):"
"RTN","LRSPRPT2",6,0)
 S A=0 F  S A=$O(^LR(LRDFN,LRSS,LRI,2,A)) Q:'A!(LR("Q"))  D
"RTN","LRSPRPT2",7,0)
 .S T=+^LR(LRDFN,LRSS,LRI,2,A,0),T=^LAB(61,T,0)
"RTN","LRSPRPT2",8,0)
 .D:$Y>(IOSL-12) F Q:LR("Q")
"RTN","LRSPRPT2",9,0)
 .W !,"T-",$P(T,"^",2),": "
"RTN","LRSPRPT2",10,0)
 .S X=$P(T,"^") D:LR(69.2,.05) C^LRUA W X
"RTN","LRSPRPT2",11,0)
 .D M
"RTN","LRSPRPT2",12,0)
 Q
"RTN","LRSPRPT2",13,0)
M ;
"RTN","LRSPRPT2",14,0)
 S B=0 F  S B=$O(^LR(LRDFN,LRSS,LRI,2,A,2,B)) Q:'B!(LR("Q"))  D
"RTN","LRSPRPT2",15,0)
 .S M=+^LR(LRDFN,LRSS,LRI,2,A,2,B,0),M=^LAB(61.1,M,0)
"RTN","LRSPRPT2",16,0)
 .D:$Y>(IOSL-12) F Q:LR("Q")
"RTN","LRSPRPT2",17,0)
 .W !?5,"M-",$P(M,"^",2),": "
"RTN","LRSPRPT2",18,0)
 .S X=$P(M,"^") D:LR(69.2,.05) C^LRUA W X
"RTN","LRSPRPT2",19,0)
 .D E
"RTN","LRSPRPT2",20,0)
D ;
"RTN","LRSPRPT2",21,0)
 Q:LR("Q")
"RTN","LRSPRPT2",22,0)
 F B=1.4,3.3,4.5 D
"RTN","LRSPRPT2",23,0)
 .S C=0 F  S C=$O(^LR(LRDFN,LRSS,LRI,2,A,$P(B,"."),C)) Q:'C!(LR("Q"))  D
"RTN","LRSPRPT2",24,0)
 ..S X=^LR(LRDFN,LRSS,LRI,2,A,$P(B,"."),C,0)
"RTN","LRSPRPT2",25,0)
 ..D A
"RTN","LRSPRPT2",26,0)
 Q
"RTN","LRSPRPT2",27,0)
A ;
"RTN","LRSPRPT2",28,0)
 S M=+X,M(2)=$P(X,"^",2),E="61."_$P(B,".",2),M=^LAB(E,M,0)
"RTN","LRSPRPT2",29,0)
 D:$Y>(IOSL-12) F Q:LR("Q")
"RTN","LRSPRPT2",30,0)
 W !?5,$S(B=1.4:"D-",B=3.3:"F-",B=4.5:"P-",1:""),$P(M,"^",2),?12,": "
"RTN","LRSPRPT2",31,0)
 S X=$P(M,"^") D:LR(69.2,.05) C^LRUA W X
"RTN","LRSPRPT2",32,0)
 I B=4.5,M(2)]"" D W
"RTN","LRSPRPT2",33,0)
 Q
"RTN","LRSPRPT2",34,0)
E ;
"RTN","LRSPRPT2",35,0)
 S C=0 F  S C=$O(^LR(LRDFN,LRSS,LRI,2,A,2,B,1,C)) Q:'C!(LR("Q"))  D
"RTN","LRSPRPT2",36,0)
 .S E=+^LR(LRDFN,LRSS,LRI,2,A,2,B,1,C,0),E=^LAB(61.2,E,0)
"RTN","LRSPRPT2",37,0)
 .D:$Y>(IOSL-12) F Q:LR("Q")
"RTN","LRSPRPT2",38,0)
 .W !?10,"E-",$P(E,"^",2),": " S X=$P(E,"^") D:LR(69.2,.05) C^LRUA W X
"RTN","LRSPRPT2",39,0)
 Q
"RTN","LRSPRPT2",40,0)
F ;
"RTN","LRSPRPT2",41,0)
 D F^LRAPF,^LRAPF
"RTN","LRSPRPT2",42,0)
 Q
"RTN","LRSPRPT2",43,0)
W ;
"RTN","LRSPRPT2",44,0)
 W " (",$S(M(2)=0:"negative",M(2)=1:"positive",1:"?"),")"
"RTN","LRSPRPT2",45,0)
 Q
"RTN","LRSPRPT2",46,0)
EN ;from LRSPRPT,LRSPT
"RTN","LRSPRPT2",47,0)
 Q:'LRAPX(1)
"RTN","LRSPRPT2",48,0)
 W !!,"Add/Delete reports to/from print queue for ",LRH(0)," "
"RTN","LRSPRPT2",49,0)
 S %=2 D YN^LRU I %=1 D AD
"RTN","LRSPRPT2",50,0)
 I '$O(^LRO(69.2,LRAA,LRAPX(1),0)) D  Q
"RTN","LRSPRPT2",51,0)
 .W $C(7),!!,"NO ",$S(LRAPX(1)=2:"FINAL",1:"PRELIMINARY")
"RTN","LRSPRPT2",52,0)
 .W " REPORTS CURRRENTLY ON THE PRINT QUEUE" S %=0
"RTN","LRSPRPT2",53,0)
 Q
"RTN","LRSPRPT2",54,0)
AD ;
"RTN","LRSPRPT2",55,0)
 D XR^LRU S LRY=$E(LRAD,1,3),LRY(1)=LRY+1700
"RTN","LRSPRPT2",56,0)
 I '$O(^LR(LRXREF,LRY,LRABV,0)) D  Q
"RTN","LRSPRPT2",57,0)
 .W $C(7),!,"No accessions for ",LRY(1)
"RTN","LRSPRPT2",58,0)
ACC ;
"RTN","LRSPRPT2",59,0)
 W !!,"Select ",LRO(68)," accession number: " R X:DTIME Q:X=""!(X[U)
"RTN","LRSPRPT2",60,0)
 I +X'=X W $C(7),!,"Enter NUMBERS only." G ACC
"RTN","LRSPRPT2",61,0)
 I '$O(^LR(LRXREF,LRY,LRABV,X,0)) D  G ACC
"RTN","LRSPRPT2",62,0)
 .W $C(7),!,"Accession number doesn't exist for ",LRY(1)
"RTN","LRSPRPT2",63,0)
 S LRDFN=$O(^LR(LRXREF,LRY,LRABV,X,0)),LRI=$O(^(LRDFN,0))
"RTN","LRSPRPT2",64,0)
 S LRAN=X,X=^LR(LRDFN,0) D ^LRUP W !,LRP,"  ID: ",SSN
"RTN","LRSPRPT2",65,0)
 I $D(^LRO(69.2,LRAA,LRAPX(1),LRAN,0)) D DEL G ACC
"RTN","LRSPRPT2",66,0)
 I LRAPX(1)=2,'$P(^LR(LRDFN,LRSS,LRI,0),"^",3) D  G ACC
"RTN","LRSPRPT2",67,0)
 .W $C(7),!,LRO(68)," Accession ",LRAN," for ",LRH(0),!,"does not "
"RTN","LRSPRPT2",68,0)
 .W "have a complete date."
"RTN","LRSPRPT2",69,0)
 W !!,"Add ",LRO(68)," accession ",LRAN," for ",LRY(1)," to"
"RTN","LRSPRPT2",70,0)
 W !,$S(LRAPX(1)=2:"final",1:"preliminary")," rpt print queue "
"RTN","LRSPRPT2",71,0)
 S %=2 D YN^LRU D:%=1 ADD
"RTN","LRSPRPT2",72,0)
 G ACC
"RTN","LRSPRPT2",73,0)
DEL ;
"RTN","LRSPRPT2",74,0)
 W !!,"Delete ",LRO(68)," accession ",LRAN," for ",LRY(1),!,"from "
"RTN","LRSPRPT2",75,0)
 W $S(LRAPX(1)=2:"final",1:"preliminary")," rpt print queue "
"RTN","LRSPRPT2",76,0)
 S %=2 D YN^LRU Q:%'=1
"RTN","LRSPRPT2",77,0)
 K ^LRO(69.2,LRAA,LRAPX(1),LRAN)
"RTN","LRSPRPT2",78,0)
 L +^LRO(69.2,LRAA,LRAPX(1))
"RTN","LRSPRPT2",79,0)
 S X=^LRO(69.2,LRAA,LRAPX(1),0)
"RTN","LRSPRPT2",80,0)
 S X(1)=$O(^LRO(69.2,LRAA,LRAPX(1),0))
"RTN","LRSPRPT2",81,0)
 S ^LRO(69.2,LRAA,LRAPX(1),0)=$P(X,"^",1,2)_"^"_X(1)_"^"_($P(X,"^",4)-1)
"RTN","LRSPRPT2",82,0)
 L -^LRO(69.2,LRAA,LRAPX(1))
"RTN","LRSPRPT2",83,0)
 Q
"RTN","LRSPRPT2",84,0)
ADD ;
"RTN","LRSPRPT2",85,0)
 S ^LRO(69.2,LRAA,LRAPX(1),LRAN,0)=LRDFN_"^"_LRI_"^"_LRH(0)
"RTN","LRSPRPT2",86,0)
 L +^LRO(69.2,LRAA,LRAPX(1))
"RTN","LRSPRPT2",87,0)
 S X=^LRO(69.2,LRAA,LRAPX(1),0)
"RTN","LRSPRPT2",88,0)
 S ^LRO(69.2,LRAA,LRAPX(1),0)=$P(X,"^",1,2)_"^"_LRAN_"^"_($P(X,"^",4)+1)
"RTN","LRSPRPT2",89,0)
 L -^LRO(69.2,LRAA,LRAPX(1))
"RTN","LRSPRPT2",90,0)
 Q
"RTN","LRSPT")
0^41^B12494115
"RTN","LRSPT",1,0)
LRSPT ;AVAMC/REG/WTY - AP PRELIMINARY REPORTS ;10/16/01
"RTN","LRSPT",2,0)
 ;;5.2;LAB SERVICE;**1,72,248,259**;Sep 27, 1994
"RTN","LRSPT",3,0)
 ;
"RTN","LRSPT",4,0)
 ;Reference to ^%DT supported by IA #10003
"RTN","LRSPT",5,0)
 ;Reference to ^DPT supported by IA #918
"RTN","LRSPT",6,0)
 ;Reference to ^DIWP suppported by IA #10011
"RTN","LRSPT",7,0)
 ;Reference to ^DIWW suppported by IA #10029
"RTN","LRSPT",8,0)
 ;Reference to EN^DDIOL supported by IA #10142
"RTN","LRSPT",9,0)
 ;
"RTN","LRSPT",10,0)
 S X="T",%DT="" D ^%DT,D^LRU S LRTOD=Y D EN2^LRUA
"RTN","LRSPT",11,0)
 W !!,"Preliminary reports for ",LRO(68)
"RTN","LRSPT",12,0)
 G END:LRAPX=2,SGL:LRAPX=3,CH:LRAPX=4
"RTN","LRSPT",13,0)
GETP D EN1^LRUPS Q:LRAN=-1
"RTN","LRSPT",14,0)
 G:$D(^LRO(69.2,LRAA,1,LRAN,0)) GETP
"RTN","LRSPT",15,0)
 L +^LRO(69.2,LRAA,1):5  I '$T D  G GETP
"RTN","LRSPT",16,0)
 .S MSG(1)="The preliminary reports queue is in use by another person.  "
"RTN","LRSPT",17,0)
 .S MSG(1,"F")="!!"
"RTN","LRSPT",18,0)
 .S MSG(2)="You will need to add this accession to the queue later."
"RTN","LRSPT",19,0)
 .D EN^DDIOL(.MSG) K MSG
"RTN","LRSPT",20,0)
 S ^LRO(69.2,LRAA,1,LRAN,0)=LRDFN_"^"_LRI
"RTN","LRSPT",21,0)
 S X=^LRO(69.2,LRAA,1,0),^(0)=$P(X,"^",1,2)_"^"_LRAN_"^"_($P(X,"^",4)+1)
"RTN","LRSPT",22,0)
 L -^LRO(69.2,LRAA,1)
"RTN","LRSPT",23,0)
 G GETP
"RTN","LRSPT",24,0)
CH S LRAPX(1)=1 D EN^LRSPRPT2 Q:%<1
"RTN","LRSPT",25,0)
 W !!,"Save preliminary reports for reprinting "
"RTN","LRSPT",26,0)
 S %=2 D YN^LRU S:%=1 LRSAV=1
"RTN","LRSPT",27,0)
 ;Variable LR("DVD") is used to divide reports displayed in the browser
"RTN","LRSPT",28,0)
 K LR("DVD")
"RTN","LRSPT",29,0)
 S $P(LR("DVD"),"|",IOM)=""
"RTN","LRSPT",30,0)
DEV ;
"RTN","LRSPT",31,0)
 W !
"RTN","LRSPT",32,0)
 S %ZIS="Q" D ^%ZIS
"RTN","LRSPT",33,0)
 I POP W ! Q
"RTN","LRSPT",34,0)
 I $D(IO("Q")) D  Q
"RTN","LRSPT",35,0)
 .S ZTDESC="ANAT PATH PRELIM REPORT"
"RTN","LRSPT",36,0)
 .S ZTSAVE("LR*")="",ZTRTN="QUE^LRSPT"
"RTN","LRSPT",37,0)
 .D ^%ZTLOAD W:$D(ZTSK) !,"Request Queued, #",ZTSK W !
"RTN","LRSPT",38,0)
 .K ZTSK,IO("Q") D HOME^%ZIS
"RTN","LRSPT",39,0)
QUE ;
"RTN","LRSPT",40,0)
 U IO
"RTN","LRSPT",41,0)
 ;LRSF515=1 means this is generating and SF515.
"RTN","LRSPT",42,0)
 S:'$D(LRSF515) LRSF515=0
"RTN","LRSPT",43,0)
 D L^LRU,L1^LRU,S^LRU,SET^LRUA
"RTN","LRSPT",44,0)
 S LR("SPSM")=1  ;Set flag to suppress printing of SNOMED codes
"RTN","LRSPT",45,0)
 S LRS(5)=1,LRQ(2)=1,LRA=$S($D(^LRO(69.2,LRAA,0)):$P(^(0),U,9),1:1)
"RTN","LRSPT",46,0)
 S:LRA="" LRA=1
"RTN","LRSPT",47,0)
 S LR("DIWF")=$S($P(^LRO(69.2,LRAA,0),"^",6)="D":"D",1:"")_"W"
"RTN","LRSPT",48,0)
 I $D(LRAP) S LRDFN=$P(LRAP,"^"),LRI=$P(LRAP,"^",2) D D G K
"RTN","LRSPT",49,0)
 S LRAN=0 F  S LRAN=$O(^LRO(69.2,LRAA,1,LRAN)) Q:'LRAN!(LR("Q"))  D
"RTN","LRSPT",50,0)
 .S X=^LRO(69.2,LRAA,1,LRAN,0),LRDFN=+X,LRI=$P(X,"^",2) D D
"RTN","LRSPT",51,0)
 .W:IOST["BROWSER" !!,LR("DVD")
"RTN","LRSPT",52,0)
K K:'$D(LRSAV) ^LRO(69.2,LRAA,1) K P,S,LRAN
"RTN","LRSPT",53,0)
 S ^LRO(69.2,LRAA,1,0)="^69.21A^^"
"RTN","LRSPT",54,0)
 I 'LR("Q"),$D(LR("F")),IOST?1"C".E D CONT
"RTN","LRSPT",55,0)
 K LRSAV
"RTN","LRSPT",56,0)
 W:IOST?1"P-".E @IOF D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LRSPT",57,0)
 K %,DIR,DTOUT,DUOUT,DIRUT,X,Y
"RTN","LRSPT",58,0)
 Q
"RTN","LRSPT",59,0)
D K ^UTILITY($J) I '$D(^LR(LRDFN,0)) K ^LRO(69.2,LRAA,1,LRAN) Q
"RTN","LRSPT",60,0)
 N LRPRE S LRPRE=1 ;Notifies EN^LRSPRPT that this is a prelim report
"RTN","LRSPT",61,0)
 D EN^LRSPRPT Q:LR("Q")
"RTN","LRSPT",62,0)
 I $P($G(^LR(LRDFN,0)),"^",2)=2 D  Q:LR("Q")
"RTN","LRSPT",63,0)
 .D ^LRAPPOW
"RTN","LRSPT",64,0)
 G:'$D(^LR(LRDFN,"SP",0))&('$D(^LR(LRDFN,"CY",0)))&('$D(^LR(LRDFN,"EM",0))) AU
"RTN","LRSPT",65,0)
 D ^LRAPT1 Q:LR("Q")
"RTN","LRSPT",66,0)
AU I $D(^LR(LRDFN,"AU")),$L($P(^LR(LRDFN,"AU"),"^")) D ^LRAPT2 Q:LR("Q")
"RTN","LRSPT",67,0)
 K ^UTILITY($J) S DIWR=IOM-5,DIWF="W",LR("A")=0
"RTN","LRSPT",68,0)
 W ! F LRZ=0:1 S LR("A")=$O(^LRO(69.2,LRAA,10,LR("A"))) Q:'LR("A")  D
"RTN","LRSPT",69,0)
 .D:$Y>(IOSL-6) H S X=^LRO(69.2,LRAA,10,LR("A"),0) D ^DIWP
"RTN","LRSPT",70,0)
 D:LRZ ^DIWW
"RTN","LRSPT",71,0)
 S LRO=1 D F^LRAPF
"RTN","LRSPT",72,0)
 Q
"RTN","LRSPT",73,0)
H ;from LRAPPF1
"RTN","LRSPT",74,0)
 D F^LRU W !,"ANATOMIC PATHOLOGY",!,LR("%") Q
"RTN","LRSPT",75,0)
END W $C(7),!!,"OK TO DELETE THE ",LRO(68)," PRELIMINARY REPORT LIST" S %=2 D YN^LRU I %=1 K ^LRO(69.2,LRAA,1) S ^LRO(69.2,LRAA,1,0)="^69.21A^0^0" W $C(7),!,"LIST DELETED !" Q
"RTN","LRSPT",76,0)
 W !!,"FINE, LET'S FORGET IT",! Q
"RTN","LRSPT",77,0)
 ;
"RTN","LRSPT",78,0)
SGL D EN1^LRUPS Q:LRAN=-1  S LRAP=LRDFN_"^"_LRI,LRSAV=1 D EN2^LRUA G DEV
"RTN","LRSPT",79,0)
CONT ;
"RTN","LRSPT",80,0)
 K DIR S DIR(0)="E"
"RTN","LRSPT",81,0)
 D ^DIR W !
"RTN","LRSPT",82,0)
 S:$D(DTOUT)!(X[U) LR("Q")=1
"RTN","LRSPT",83,0)
 Q
"RTN","LRUA")
0^42^B10679727
"RTN","LRUA",1,0)
LRUA ;AVAMC/REG/WTY - ANAT PATH UTILITY ;10/23/01
"RTN","LRUA",2,0)
 ;;5.2;LAB SERVICE;**72,173,201,213,259**;Sep 27, 1994
"RTN","LRUA",3,0)
 ;
"RTN","LRUA",4,0)
 ;Reference to ^DIC supported by IA #916
"RTN","LRUA",5,0)
 ;Reference to ^DIC(7 supported by IA #2252
"RTN","LRUA",6,0)
 ;
"RTN","LRUA",7,0)
 S LRPF=^DIC($P(^LR(LRDFN,0),"^",2),0,"GL"),LRFLN=+$P(@(LRPF_"0)"),"^",2)
"RTN","LRUA",8,0)
 S DFN=$P(^LR(LRDFN,0),"^",3),LRDPF=$P(^(0),U,2),W=^(LRSS,LRI,0)
"RTN","LRUA",9,0)
 S LRW(1)=$E($P(W,"^",10),2,3)
"RTN","LRUA",10,0)
 S LRLLOC=$P(W,"^",8),LRAC=$P(W,"^",6),LRPMD=$P(W,"^",2)
"RTN","LRUA",11,0)
 S LRRMD=$P(W,"^",4),LRMD=$P(W,"^",7),LRW(5)=$P(W,"^",5)
"RTN","LRUA",12,0)
 S LRW(9)=$P(W,"^",9),SSN=@(LRPF_DFN_",0)")
"RTN","LRUA",13,0)
 S Y=+W D DATE S LRTK=Y,Y=$P(W,"^",10) D DATE S LRTK(1)=Y
"RTN","LRUA",14,0)
 I LRMD S X=LRMD D D S LRMD=X
"RTN","LRUA",15,0)
 I LRPMD S X=LRPMD D D S LRPMD=X
"RTN","LRUA",16,0)
 I LRRMD S X=LRRMD D D S LRRMD=X
"RTN","LRUA",17,0)
 S (LRADM,LRADX,DOB)=""
"RTN","LRUA",18,0)
 S Y=$P(W,"^",3) D DATE S LRRC=$S(Y["1700":"",1:Y)
"RTN","LRUA",19,0)
 S LRP=$P(SSN,"^"),SEX=$P(SSN,"^",2),(X2,Y)=$P(SSN,"^",3)
"RTN","LRUA",20,0)
 S SSN=$P(SSN,"^",9) D SSN^LRU
"RTN","LRUA",21,0)
 D DEM^LRX,DD^LRX S DOB=Y
"RTN","LRUA",22,0)
 I LRPF="^DPT(" K VAIN D INPPT^LRX S LRADX=VAIN(9),LRADM=$P(VAIN(7),U,2)
"RTN","LRUA",23,0)
 Q
"RTN","LRUA",24,0)
SET ;
"RTN","LRUA",25,0)
 S X=$G(^LRO(69.2,LRAA,0)),LR(69.2,.03)=$P(X,U,3),LR(69.2,.04)=$P(X,U,4),LR(69.2,.05)=$P(X,U,5),LR(69.2,.13)=$P(X,U,13),LR(69.2,.14)=$P(X,U,14)
"RTN","LRUA",26,0)
 ;
"RTN","LRUA",27,0)
EN ;
"RTN","LRUA",28,0)
 S X=+$O(^LRO(68,"B","AUTOPSY",0)),X=$S($D(^LRO(69.2,X,0)):^(0),1:""),LRAU(1)=$P(X,"^",3),LRAU(2)=$P(X,"^",4)
"RTN","LRUA",29,0)
 D FIELD^DID(63.819,.01,"","POINTER","LR") S LR("SP")=LR("POINTER")
"RTN","LRUA",30,0)
 D FIELD^DID(63.219,.01,"","POINTER","LR") S LR("EM")=LR("POINTER")
"RTN","LRUA",31,0)
 D FIELD^DID(63.919,.01,"","POINTER","LR") S LR("CY")=LR("POINTER")
"RTN","LRUA",32,0)
 D FIELD^DID(63.26,.01,"","POINTER","LR") S LR("AU")=LR("POINTER")
"RTN","LRUA",33,0)
 D FIELD^DID(63,13.7,"","POINTER","LR") S LRAU("T")=LR("POINTER")
"RTN","LRUA",34,0)
 D FIELD^DID(63,14.5,"","POINTER","LR") S LRAU("L")=LR("POINTER")
"RTN","LRUA",35,0)
 D FIELD^DID(63.26,.01,"","POINTER","LR") S LRAU("S")=LR("POINTER")
"RTN","LRUA",36,0)
 Q
"RTN","LRUA",37,0)
C ;
"RTN","LRUA",38,0)
 S X("L")="" F X(1)=1:1:$L(X) S X("L")=X("L")_$C($A(X,X(1))+($E(X,X(1))?1U*32))
"RTN","LRUA",39,0)
 S X=X("L") Q
"RTN","LRUA",40,0)
 ;string X => lower case do C; upper case do U
"RTN","LRUA",41,0)
U S X("U")="" F X(1)=1:1:$L(X) S X("U")=X("U")_$C($A(X,X(1))-($E(X,X(1))?1L*32))
"RTN","LRUA",42,0)
 S X=X("U") Q
"RTN","LRUA",43,0)
P S LRMD(1)="" D D S LRMD=X Q
"RTN","LRUA",44,0)
 ;
"RTN","LRUA",45,0)
D ;Name formatting
"RTN","LRUA",46,0)
 I $D(^VA(200,X,0)) D
"RTN","LRUA",47,0)
 .Q:'$D(LRSS)
"RTN","LRUA",48,0)
 .I LRSS'="BB" D
"RTN","LRUA",49,0)
 ..N LRNAME,FMTNAM
"RTN","LRUA",50,0)
 ..S LRNAME("FILE")=200,LRNAME("FIELD")=.01,LRNAME("IENS")=X_","
"RTN","LRUA",51,0)
 ..S LRMD(1)=X,X=+$P($G(^VA(200,X,"PS")),"^",5)
"RTN","LRUA",52,0)
 ..S FMTNAM=$$NAMEFMT^XLFNAME(.LRNAME,"G","D")
"RTN","LRUA",53,0)
 ..S X=FMTNAM
"RTN","LRUA",54,0)
 .I LRSS="BB" D
"RTN","LRUA",55,0)
 ..S LRMD(1)=X,X(2)=$P(^(0),"^"),X=+$P($G(^("PS")),"^",5)
"RTN","LRUA",56,0)
 ..S X(1)=$P($G(^DIC(7,X,0)),"^",2)
"RTN","LRUA",57,0)
 ..S X=$P(X(2),",",2)_" "_$P(X(2),",")_" "_X(1)
"RTN","LRUA",58,0)
 Q
"RTN","LRUA",59,0)
EN1 ;
"RTN","LRUA",60,0)
 W !?21,"1.  Add patient(s) to report print queue",!?21,"2.  Delete report print queue",!?21,"3.  Print single report only",!?21,"4.  Print all reports on print queue"
"RTN","LRUA",61,0)
 R !,"Select print option: ",LRAPX:DTIME I LRAPX=""!(X[U) K LRAPX Q
"RTN","LRUA",62,0)
 I LRAPX<1!(LRAPX>4) W $C(7),"   SELECT A NUMBER FROM 1-4",! G EN1
"RTN","LRUA",63,0)
 Q
"RTN","LRUA",64,0)
EN2 ; set variable for accession prefix
"RTN","LRUA",65,0)
 S LRQ(8)=$S($D(^LRO(69.2,LRAA,0)):$P(^(0),"^",8),1:"")
"RTN","LRUA",66,0)
 Q
"RTN","LRUA",67,0)
 ;
"RTN","LRUA",68,0)
DATE ; Returns date in Mon day,year  time (if appropriate) format
"RTN","LRUA",69,0)
 S Y=$TR($$FMTE^XLFDT(Y,"M"),"@"," ")
"RTN","LRUA",70,0)
 Q
"RTN","LRUPS")
0^43^B8185987
"RTN","LRUPS",1,0)
LRUPS ;AVAMC/REG/WTY - PATIENT SPEC LOOK-UP ;3/20/01
"RTN","LRUPS",2,0)
 ;;5.2;LAB SERVICE;**72,248,259**;Sep 27, 1994
"RTN","LRUPS",3,0)
 ;Removed space between "No  data" at tag EN
"RTN","LRUPS",4,0)
 ;
"RTN","LRUPS",5,0)
GETP W ! K LRAN,DIC S X="",DFN=-1,DIC(0)="EQM",(LRX,LRDPF)="" D DPA^LRDPA
"RTN","LRUPS",6,0)
 I DFN=-1 S LRAN=-1 Q
"RTN","LRUPS",7,0)
I N LRAY
"RTN","LRUPS",8,0)
 I '$D(LRPFLG) N LRPFLG S LRPFLG=0
"RTN","LRUPS",9,0)
 I LRSS="AU" G AU
"RTN","LRUPS",10,0)
EN I '$D(^LR(LRDFN,LRSS)) W $C(7),!!,"No data for ",PNM G GETP
"RTN","LRUPS",11,0)
 S (LRI,LRLIDT,E)=0 S:'$D(LRABV) LRABV=0
"RTN","LRUPS",12,0)
 I "CYEMSP"'[LRSS W !!,"Count #",?10,"Accession #",?29,"Date",?45,"Site/specimen"
"RTN","LRUPS",13,0)
 E  W !!,"Specimen(s)",?30,"Count #",?40,"Accession #",?55,"Date Obtained"
"RTN","LRUPS",14,0)
 S C=0
"RTN","LRUPS",15,0)
 F  S LRI=$O(^LR(LRDFN,LRSS,LRI)) Q:'LRI!(E)  D
"RTN","LRUPS",16,0)
 .S X=^LR(LRDFN,LRSS,LRI,0),LRAC=$P(X,U,6)
"RTN","LRUPS",17,0)
 .I $P(LRAC," ")=LRABV!(LRABV=0) D WT:C#5=0 Q:E  D
"RTN","LRUPS",18,0)
 ..S LRAY=$P(LRAC," ",2)
"RTN","LRUPS",19,0)
 ..I LRPFLG,LRAY'=$E(LRAD,2,3) Q
"RTN","LRUPS",20,0)
 ..S C=C+1,LRAN=+$P(LRAC," ",3)
"RTN","LRUPS",21,0)
 ..S LRAN(C)=LRI_U_LRAN,LRLIDT=LRI
"RTN","LRUPS",22,0)
 ..S Y=$P(X,U),LRST=$P(X,U,5) D D^LRU,@($S("CYEMSP"[LRSS:"SP",1:"CY"))
"RTN","LRUPS",23,0)
 I 'C W !!,"No specimens entered for "_LRH(0) G GETP
"RTN","LRUPS",24,0)
 I C=1 S LRI=+LRAN(1),Y(0)=^LR(LRDFN,LRSS,LRI,0),LRTK=+Y(0) G L
"RTN","LRUPS",25,0)
ACC W !?11,"Choose Count #(1-",C,"): " R X:DTIME I X=""!(X[U) S LRAN=-1 Q
"RTN","LRUPS",26,0)
 I X'?1N.N W $C(7),!!,"Enter numbers only",!! G ACC
"RTN","LRUPS",27,0)
OK I '$D(LRAN(X)) W "  Doesn't exist for ",PNM G ACC
"RTN","LRUPS",28,0)
GOT S LRI=+LRAN(X),Y(0)=^LR(LRDFN,LRSS,LRI,0),LRTK=+Y(0)
"RTN","LRUPS",29,0)
L S LRAC=$P(Y(0),U,6),LRAN=+$P(LRAC," ",3),Y=$P(Y(0),U) D D^LRU W !!," Accession #: ",LRAC W:Y'[1700 " Date Obtained: ",Y,! S LRWW=$S(Y'[1700:Y,1:"")
"RTN","LRUPS",30,0)
 Q
"RTN","LRUPS",31,0)
WT I C>0 W !,"More accessions " S %=2 D YN^LRU S E=$S(%=1:0,1:1) Q
"RTN","LRUPS",32,0)
 Q
"RTN","LRUPS",33,0)
SP W !?30,"(",$J(C,2),")",?40,LRAC,?55,Y I '$P(X,"^",11) W " not verified"
"RTN","LRUPS",34,0)
 S LRST=0 F A=0:1 S LRST=$O(^LR(LRDFN,LRSS,LRI,.1,LRST)) Q:'LRST  W:$D(^(LRST,0)) !,$P(^(0),"^")
"RTN","LRUPS",35,0)
 Q
"RTN","LRUPS",36,0)
CY W !?2,"(",$J(C,2),")",?10,LRAC,?25,Y W:LRST ?45,$S($D(^LAB(61,LRST,0)):$E($P(^(0),U),1,34),1:"") Q
"RTN","LRUPS",37,0)
AU S LRND=$G(^LR(LRDFN,"AU"))
"RTN","LRUPS",38,0)
 I '$L(LRND) W $C(7),!!,"No autopsy entry for ",LRP,!! S LRAN="?" Q
"RTN","LRUPS",39,0)
 S LRAC=$P(LRND,U,6)
"RTN","LRUPS",40,0)
 I $P(LRAC," ")'=LRABV W $C(7),!!,"No autopsy accession" S LRAN="?" Q
"RTN","LRUPS",41,0)
 S LRAY=$P(LRAC," ",2)
"RTN","LRUPS",42,0)
 I LRPFLG,LRAY'=$E(LRAD,2,3) D  Q
"RTN","LRUPS",43,0)
 .W $C(7),!!,"No autopsy accession for "_LRH(0) S LRAN="?"
"RTN","LRUPS",44,0)
 S LRAN=+$P(LRAC," ",3)
"RTN","LRUPS",45,0)
 I 'LRAN S LRAN=-1 W $C(7),!!,"No autopsy # for ",LRP Q
"RTN","LRUPS",46,0)
 S Y=+LRND D D^LRU W !,"Autopsy performed: ",Y,"  Acc # ",LRAC
"RTN","LRUPS",47,0)
 Q
"RTN","LRUPS",48,0)
EN1 ;from LRAPMOD, LRSPRPT, LRSPT
"RTN","LRUPS",49,0)
 W ! K DIC,LRAN S DIC(0)="EQM",(LRX,LRDPF)="" D DPA^LRDPA I DFN=-1 S LRAN=-1 Q
"RTN","LRUPS",50,0)
 G I
"SEC","^DD",63,63.19,1,8.5)

"SEC","^DD",63,63.19,2,8.5)

"SEC","^DD",63,63.19,2,9)

"SEC","^DD",63,63.49,.01,8.5)

"SEC","^DD",63,63.49,1,8.5)

"SEC","^DIC",63,63,0,"DD")
l
"SEC","^DIC",63,63,0,"DEL")
l
"SEC","^DIC",63,63,0,"LAYGO")
l
"SEC","^DIC",63,63,0,"RD")
l
"SEC","^DIC",63,63,0,"WR")
l
"VER")
8.0^22.0
"^DD",63,63,0)
FIELD^NL^102.2^91
"^DD",63,63,0,"DDA")
N
"^DD",63,63,0,"DT")
3040205
"^DD",63,63,0,"ID",.02)
W:$D(^("0")) "   ",$S($D(^DIC(+$P(^("0"),U,2),0))#2:$P(^(0),U,1),1:""),$E(^LR(Y,0),0)
"^DD",63,63,0,"ID",.03)
W:$D(^("0")) "   " S DA=Y,PDY=Y X ^DD(63,.03,2) W Y S Y=PDY K PDY,DA
"^DD",63,63,0,"IX","AAU",63,11)

"^DD",63,63,0,"IX","AAUA",63,14)

"^DD",63,63,0,"IX","AB",63.017,.11)

"^DD",63,63,0,"IX","ACY",63.09,.1)

"^DD",63,63,0,"IX","ACYA",63.09,.06)

"^DD",63,63,0,"IX","AEM",63.02,.1)

"^DD",63,63,0,"IX","AEMA",63.02,.06)

"^DD",63,63,0,"IX","AR",63.0171,.02)

"^DD",63,63,0,"IX","ASP",63.08,.1)

"^DD",63,63,0,"IX","ASPA",63.08,.06)

"^DD",63,63,0,"IX","AZZ",63,.02)

"^DD",63,63,0,"IX","B",63,.01)

"^DD",63,63,0,"IX","CZZ",63,.03)

"^DD",63,63,0,"NM","LAB DATA")

"^DD",63,63,0,"PT",2,63)

"^DD",63,63,0,"PT",60,400)

"^DD",63,63,0,"PT",62.06,5)

"^DD",63,63,0,"PT",62.3,63)

"^DD",63,63,0,"PT",62.801,.01)

"^DD",63,63,0,"PT",64.7,.01)

"^DD",63,63,0,"PT",65.5,63)

"^DD",63,63,0,"PT",67,63)

"^DD",63,63,0,"PT",67.1,63)

"^DD",63,63,0,"PT",67.2,63)

"^DD",63,63,0,"PT",67.3,63)

"^DD",63,63,0,"PT",68.02,.01)

"^DD",63,63,0,"PT",69.01,.01)

"^DD",63,63,0,"PT",69.11,3)

"^DD",63,63,0,"PT",69.27,.01)

"^DD",63,63,0,"PT",69.3,.01)

"^DD",63,63,0,"PT",139.21,.01)

"^DD",63,63,0,"PT",701,613)

"^DD",63,63,0,"VRPK")
KLLZ
"^DD",63,63,.01,0)
LRDFN^RNJ11,0X^^0;1^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X I $D(X) S DINUM=X
"^DD",63,63,.01,1,0)
^.1
"^DD",63,63,.01,1,1,0)
63^B
"^DD",63,63,.01,1,1,1)
S ^LR("B",$E(X,1,30),DA)=""
"^DD",63,63,.01,1,1,2)
K ^LR("B",$E(X,1,30),DA)
"^DD",63,63,.01,1,1,"%D",0)
^^2^2^2930112^
"^DD",63,63,.01,1,1,"%D",1,0)
  The internal file number in the ^LR file. This is commonly known as
"^DD",63,63,.01,1,1,"%D",2,0)
LRDFN variable in LR* routines.
"^DD",63,63,.01,1,1,"DT")
2930112
"^DD",63,63,.01,3)
Enter the application entry number.
"^DD",63,63,.01,21,0)
^.001^1^1^3030904^^^
"^DD",63,63,.01,21,1,0)
The internal file number of the "patient" (or other entity)
"^DD",63,63,.01,"DEL",1,0)
I 1
"^DD",63,63,.01,"DT")
2930112
"^DD",63,63,.02,0)
PARENT FILE^R*P1'XI^DIC(^0;2^S DIC("S")="I $D(^(""%"",""B"",""LR""))" D ^DIC:X'?1"?".E K DIC S DIC=DIE,X=+Y K:Y<0 X I $D(X) S DDIFN=X
"^DD",63,63,.02,1,0)
^.1
"^DD",63,63,.02,1,1,0)
63^AZZ^MUMPS
"^DD",63,63,.02,1,1,1)
Q
"^DD",63,63,.02,1,1,2)
I '$D(DIU(0)) S DOLP=X,L1=^LR(DA,0),X=$P(L1,"^",3) X ^DD(63,.03,1,1,2) S ^LR(DA,0)=$P(L1,"^",1,2)_"^^"_$P(L1,"^",4,99) K DOLP,L1,L,Q
"^DD",63,63,.02,4)
W !!,"Allowable Entries: " F %II=0:0 S %II=$O(^DIC("AC","LR",%II)) Q:%II'>0  W ?20,%II,?30,$P(^DIC(%II,0),"^",1),!
"^DD",63,63,.02,12)
Enter the appropriate parent you wish this entry associated with.
"^DD",63,63,.02,12.1)
S DIC("S")="I $D(^(""%"",""B"",""LR""))"
"^DD",63,63,.02,12.2)
S X=$D(^("%","B","LR"))
"^DD",63,63,.02,21,0)
^^1^1^2920203^^
"^DD",63,63,.02,21,1,0)
The file where the name of this entry may be found.
"^DD",63,63,.02,"DT")
3021104
"^DD",63,63,.03,0)
NAME^RNJ9,0XO^^0;3^I '$D(DIU(0)) S PDA=DA,PDIC=DIC,DIC(0)="QEM",DIC=$S($D(DDIFN):DDIFN,$D(^LR(DA,0)):+$P(^LR(DA,0),"^",2),1:""),DDIFN=DIC K:DIC<1 X D ^DIC:DIC>0 S DIC=PDIC,DA=PDA K PDA,PDIC I $D(Y) S X=+Y K:Y'>0 X,Y I $D(Y) X ^DD(63,.03,.0001)
"^DD",63,63,.03,.0001)
I $D(@(^DIC(DDIFN,0,"GL")_X_",""LR"")")),^("LR")'=DA K X,Y,DDIFN W "  Already in ",^("LR")," Entry."
"^DD",63,63,.03,1,0)
^.1
"^DD",63,63,.03,1,1,0)
63^CZZ^MUMPS
"^DD",63,63,.03,1,1,1)
S @(^DIC(+$P(^LR(DA,0),"^",2),0,"GL")_(+X)_",""LR"")")=DA
"^DD",63,63,.03,1,1,2)
N L I '$D(DIU(0)) S L=$S($D(DOLP):"^"_DOLP_"^"_X,1:^LR(DA,0)) K @(^DIC(+$P(L,"^",2),0,"GL")_(+X)_",""LR"")")
"^DD",63,63,.03,2)
S Y(0)=Y N L,L1 S L1=$S($D(D0):D0,1:"") I L1>0 S L=^LR(L1,0),Y="" I +$P(L,"^",2)>0 S Y=$P($S($D(@(^DIC(+$P(L,"^",2),0,"GL")_(+$P(L,"^",3))_",0)")):^(0),1:""),"^",1)
"^DD",63,63,.03,2.1)
N L,L1 S L1=$S($D(DA):DA,$D(D0):D0,1:"") I L1>0 S L=^LR(L1,0),Y="" I +$P(L,"^",2)>0 S Y=$P($S($D(@(^DIC(+$P(L,"^",2),0,"GL")_(+$P(L,"^",3))_",0)")):^(0),1:""),"^",1)
"^DD",63,63,.03,3)

"^DD",63,63,.03,4)
S X="?",PDA=DA,PDIC=DIC,DIC=$S($D(DDIFN):DDIFN,$D(^LR(DA,0)):+$P(^LR(DA,0),"^",2),1:0),DIC(0)="QEM" D ^DIC:DIC>0 S DIC=PDIC,DA=PDA K PDA,PDI,X
"^DD",63,63,.03,21,0)
^^1^1^2841129^
"^DD",63,63,.03,21,1,0)
The internal file number in the parent file for this entry.
"^DD",63,63,.03,"DT")
2840113
"^DD",63,63,.04,0)
DO NOT TRANSFUSE^S^1:DO NOT TRANSFUSE;0:OK TO TRANSFUSE;^0;4^Q
"^DD",63,63,.04,21,0)
^^1^1^2850830^^
"^DD",63,63,.04,21,1,0)
If DO NOT TRANSFUSE is entered then the patient cannot be transfused until the reason for not transfusing a blood component is resolved.  The reason can be entered in the BLOOD BANK COMMENTS field.
"^DD",63,63,.04,"DT")
2850909
"^DD",63,63,.05,0)
ABO GROUP^RS^A:A;B:B;AB:AB;O:O;^0;5^Q
"^DD",63,63,.05,.1)
PATIENT'S ABO BLOOD TYPE
"^DD",63,63,.05,3)

"^DD",63,63,.05,4)
W !,"Enter A for A, B for B, O for O or AB for AB"
"^DD",63,63,.05,21,0)
^^1^1^2880815^
"^DD",63,63,.05,21,1,0)
ABO blood group of patient
"^DD",63,63,.05,"DT")
2880815
"^DD",63,63,.06,0)
RH TYPE^RS^POS:POS;NEG:NEG;^0;6^Q
"^DD",63,63,.06,3)

"^DD",63,63,.06,21,0)
^^1^1^2920203^^^^
"^DD",63,63,.06,21,1,0)
This is the patient's RH blood type.
"^DD",63,63,.06,"DT")
2880815
"^DD",63,63,.07,0)
RBC ANTIGENS PRESENT(other)^63.13PA^^1;0
"^DD",63,63,.07,12)
SELECTS ONLY ANTIGENS
"^DD",63,63,.07,12.1)
S DIC("S")="I $P(^(0),U,5)=""AN"""
"^DD",63,63,.07,21,0)
1
"^DD",63,63,.07,21,1,0)
Red blood cell antigens present other than ABO and Rho(D).
"^DD",63,63,.075,0)
ANTIBODIES IDENTIFIED^63.075PA^^1.7;0
"^DD",63,63,.075,12)
Selects only antibodies
"^DD",63,63,.075,12.1)
S DIC("S")="I $P(^(0),U,5)=""AB"""
"^DD",63,63,.075,21,0)
^^1^1^2911126^^
"^DD",63,63,.075,21,1,0)
These are the patient's identified antibodies.
"^DD",63,63,.076,0)
BLOOD BANK COMMENTS^63.076^^3;0
"^DD",63,63,.076,21,0)
^^1^1^2911126^^
"^DD",63,63,.076,21,1,0)
These are blood bank comments for this patient.
"^DD",63,63,.08,0)
RBC ANTIGENS ABSENT(other)^63.016PA^^1.5;0
"^DD",63,63,.08,12)
SELECTS ONLY ANTIGENS
"^DD",63,63,.08,12.1)
S DIC("S")="I $P(^(0),U,5)=""AN"""
"^DD",63,63,.08,21,0)
^^1^1^2920203^^^^
"^DD",63,63,.08,21,1,0)
Red blood cell antigens absent other than ABO & Rho(D).
"^DD",63,63,.084,0)
BLOOD COMPONENT REQUEST^63.084IPA^^1.8;0
"^DD",63,63,.084,12)
Selects only components that can be requested
"^DD",63,63,.084,12.1)
S DIC("S")="I $P(^(0),U,15)"
"^DD",63,63,.084,21,0)
^^1^1^2920203^^^
"^DD",63,63,.084,21,1,0)
These are blood component requests.
"^DD",63,63,.085,0)
TRANSFUSION RECORD^63.017DAI^^1.6;0
"^DD",63,63,.085,21,0)
^^1^1^2920203^^^^
"^DD",63,63,.085,21,1,0)
This is data concerning the patient's transfusion.
"^DD",63,63,.086,0)
TRANSFUSION REACTION DATE^63.0171IDA^^1.9;0
"^DD",63,63,.086,21,0)
^^2^2^2921230^^^
"^DD",63,63,.086,21,1,0)
Transfusion reactions that cannot be assigned to a specific 
"^DD",63,63,.086,21,2,0)
unit are entered here.
"^DD",63,63,.086,"DT")
2921229
"^DD",63,63,.09,0)
HOSPITAL ID^CJ11^^ ; ^S L1=$S($D(DA):DA,$D(D0):D0,1:"") I L1>0 S L=^LR(L1,0),X=$P($S($D(@(^DIC(+$P(L,"^",2),0,"GL")_(+$P(L,"^",3))_",0)")):^(0),1:""),"^",9),X=$S(X?9N:$E(X,1,3)_"-"_$E(X,4,5)_"-"_$E(X,6,9),1:X)
"^DD",63,63,.09,9)
^
"^DD",63,63,.09,9.01)

"^DD",63,63,.09,9.1)
S L1=$S($D(DA):DA,$D(D0):D0,1:"") I L1>0 S L=^LR(L1,0),X=$P($S($D(@(^DIC(+$P(L,"^",2),0,"GL")_(+$P(L,"^",3))_",0)")):^(0),1:""),"^",9),X=$S(X?9N:$E(X,1,3)_"-"_$E(X,4,5)_"-"_$E(X,6,9),1:X)
"^DD",63,63,.09,21,0)
^^1^1^2950927^^^^
"^DD",63,63,.09,21,1,0)
Computed field to present the hospital ID from the parent file.
"^DD",63,63,.09,"DT")
2840123
"^DD",63,63,.091,0)
PAT. INFO.^F^^.091;1^K:$L(X)>20!($L(X)<1) X
"^DD",63,63,.091,3)
ANSWER MUST BE 1-20 CHARACTERS IN LENGTH
"^DD",63,63,.091,21,0)
^^1^1^2940510^
"^DD",63,63,.091,21,1,0)
Patient information
"^DD",63,63,.091,"DT")
2881108
"^DD",63,63,.092,0)
LOCATION TYPE^S^C:CLINIC;M:MODULE;W:WARD;Z:OTHER LOCATION;N:NON-CLINIC STOP;F:FILE AREA;I:IMAGING;OR:OPERATING ROOM;^.092;1^Q
"^DD",63,63,.092,21,0)
^^2^2^2911021^
"^DD",63,63,.092,21,1,0)
  This field is used for Workload Classification. Other location
"^DD",63,63,.092,21,2,0)
type is the default answer.
"^DD",63,63,.092,23,0)
^^2^2^2911021^
"^DD",63,63,.092,23,1,0)
  This field is simular to the type field found in File #44. It is
"^DD",63,63,.092,23,2,0)
used to deterimin In-patient/Out-patient workload.
"^DD",63,63,.092,"DT")
2911021
"^DD",63,63,.1,0)
REPORT ROUTING (LOCATION)^F^^.1;E1,19^K:$L(X)>19!($L(X)<1) X
"^DD",63,63,.1,3)
ANSWER MUST BE 1-19 CHARACTERS IN LENGTH
"^DD",63,63,.1,21,0)
^^1^1^2870207^^
"^DD",63,63,.1,21,1,0)
The most current location where a lab procedure was requested.
"^DD",63,63,.101,0)
REPORT ROUTING (PROVIDER)^P200'^VA(200,^.2;1^Q
"^DD",63,63,.101,21,0)
^^1^1^2841129^
"^DD",63,63,.101,21,1,0)
The most current requesting person who requested a lab procedure.
"^DD",63,63,.101,"DT")
2920406
"^DD",63,63,.11,0)
CUMULATIVE REPORT PAGES^63.03PA^^PG;0
"^DD",63,63,.11,21,0)
^^1^1^2870520^^^
"^DD",63,63,.11,21,1,0)
Current temporary (active) page numbers for the cumulative report.
"^DD",63,63,.2,0)
HLA ANTIGENS PRESENT^63.14PA^^2;0
"^DD",63,63,.2,12)
SELECTS ONLY HLA ANTIGENS
"^DD",63,63,.2,12.1)
S DIC("S")="I $P(^(0),U,5)=""HL"""
"^DD",63,63,.2,21,0)
^^2^2^2920203^^^
"^DD",63,63,.2,21,1,0)
These are HLA antigens associated with this
"^DD",63,63,.2,21,2,0)
patient.
"^DD",63,63,.21,0)
HLA ANTIGENS ABSENT^63.141PA^^2.1;0
"^DD",63,63,.21,12)
Selects HLA antigens
"^DD",63,63,.21,12.1)
S DIC("S")="I $P(^(0),U,5)=""HL"""
"^DD",63,63,.21,21,0)
^^1^1^2920203^^^
"^DD",63,63,.21,21,1,0)
These are HLA antigens NOT associated with this patient.
"^DD",63,63,1,0)
BLOOD BANK^63.01DA^^BB;0
"^DD",63,63,1,21,0)
^^1^1^2920203^^^^
"^DD",63,63,1,21,1,0)
This is blood bank data on this patient.
"^DD",63,63,2,0)
EM^63.02DA^^EM;0
"^DD",63,63,2,21,0)
^.001^1^1^3030306^^^^
"^DD",63,63,2,21,1,0)
This is patient data from electron microscopy (EM).
"^DD",63,63,2,"DT")
3030306
"^DD",63,63,8,0)
SURGICAL PATHOLOGY^63.08IDA^^SP;0
"^DD",63,63,8,21,0)
^.001^1^1^3030505^^^^
"^DD",63,63,8,21,1,0)
This is the surgical pathology for this patient.
"^DD",63,63,9,0)
CYTOPATHOLOGY^63.09DA^^CY;0
"^DD",63,63,9,21,0)
^.001^2^2^3040205^^^^
"^DD",63,63,9,21,1,0)

"^DD",63,63,9,21,2,0)
QCytopathology data associated with this patient.
"^DD",63,63,11,0)
AUTOPSY DATE/TIME^RDX^^AU;1^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X) D D^LRAUAW K:'LR(63,12)!(LR(63,12)&(X<LR(63,12))) X I $D(X),$D(LRH(2)),$E(X,1,3)'=LRH(2) W "   Must be for ",LRH(2)+1700,!! K X
"^DD",63,63,11,1,0)
^.1
"^DD",63,63,11,1,1,0)
63^AAU^MUMPS
"^DD",63,63,11,1,1,1)
S ^LR("AAU",X,DA)=""
"^DD",63,63,11,1,1,2)
K ^LR("AAU",X,DA)
"^DD",63,63,11,3)
FUTURE DATE/TIME NOT ALLOWED
"^DD",63,63,11,4)
K DZ W ?3,"Autopsy date must be after date died " D D^LRAUAW S Y=LR(63,12) D:Y D^LRU W:Y]"" "(",Y,")" W !
"^DD",63,63,11,21,0)
^^1^1^2911205^^^
"^DD",63,63,11,21,1,0)
This is the date/time of the autopsy.
"^DD",63,63,11,"DT")
2881130
"^DD",63,63,12,0)
DATE/TIME OF DEATH^CJ19^^ ; ^S A=^LR(D0,0),B=+$P(A,U,2),C=+$P(A,U,3),A=^DIC(B,0,"GL"),Y=$S($D(@(A_C_",.35)")):+^(.35),1:"") D D^LRU S X=Y
"^DD",63,63,12,1,0)
^.1^^0
"^DD",63,63,12,3)
FUTURE DATE/TIME NOT ALLOWED
"^DD",63,63,12,9)
^
"^DD",63,63,12,9.01)

"^DD",63,63,12,9.1)
S A=^LR(D0,0),B=+$P(A,U,2),C=+$P(A,U,3),A=^DIC(B,0,"GL"),Y=$S($D(@(A_C_",.35)")):+^(.35),1:"") D D^LRU S X=Y
"^DD",63,63,12,21,0)
^^1^1^2911205^^
"^DD",63,63,12,21,1,0)
This is the date/time of death.
"^DD",63,63,12,"DT")
2910220
"^DD",63,63,12.1,0)
PHYSICIAN^*P200'^VA(200,^AU;12^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63,12.1,12)
Selects active providers who hold the VA PROVIDER security key.
"^DD",63,63,12.1,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63,12.1,21,0)
^^1^1^2911205^^
"^DD",63,63,12.1,21,1,0)
This is the requesting provider.
"^DD",63,63,12.1,"DT")
2930407
"^DD",63,63,12.5,0)
AGE AT DEATH^F^^AU;9^K:$L(X)>30!($L(X)<1) X
"^DD",63,63,12.5,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63,12.5,21,0)
^^2^2^2911205^^
"^DD",63,63,12.5,21,1,0)
This is the age of the patient at the
"^DD",63,63,12.5,21,2,0)
time of death.
"^DD",63,63,12.5,"DT")
2840313
"^DD",63,63,13,0)
DATE AUTOPSY REPORT COMPLETED^DX^^AU;3^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1!('$D(^LR(DA,"AU"))) X I $D(X),+^LR(DA,"AU")>X K X W !,"Date must be after date autopsy performed (" S Y=+^("AU") D D^LRU W Y,")"
"^DD",63,63,13,3)
FUTURE DATE/TIME NOT ALLOWED
"^DD",63,63,13,4)
K DZ W ?5,"AUTOPSY DATE/TIME MUST BE ENTERED"
"^DD",63,63,13,21,0)
^^1^1^2911205^^
"^DD",63,63,13,21,1,0)
This is the date the autopsy report was completed.
"^DD",63,63,13,"DT")
2910221
"^DD",63,63,13.01,0)
AUTOPSY TYPIST^F^^AU;13^K:$L(X)>5!($L(X)<2) X
"^DD",63,63,13.01,3)
ANSWER MUST BE 2-5 CHARACTERS IN LENGTH
"^DD",63,63,13.01,4)
W !?5,"Enter initials of autopsy typist"
"^DD",63,63,13.01,21,0)
^^1^1^2930331^^
"^DD",63,63,13.01,21,1,0)
The name of the Autopsy typist
"^DD",63,63,13.01,"DT")
2860623
"^DD",63,63,13.1,0)
DATE FINAL AUTOPSY DIAGNOSES^DX^^AU;4^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1!('$D(^LR(DA,"AU"))) X I $D(X),+^LR(DA,"AU")>X K X W !,"Date must be after date autopsy performed (" S Y=+^("AU") D D^LRU W Y,")"
"^DD",63,63,13.1,3)
FUTURE DATE/TIME NOT ALLOWED
"^DD",63,63,13.1,4)
K DZ
"^DD",63,63,13.1,21,0)
^^1^1^2911205^^
"^DD",63,63,13.1,21,1,0)
This is the date the final autopsy diagnoses are completed.
"^DD",63,63,13.1,"DT")
2910220
"^DD",63,63,13.5,0)
RESIDENT PATHOLOGIST^*P200'^VA(200,^AU;7^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63,13.5,12)
Selection must be made from active PROVIDERS who hold the PROVIDER security key.
"^DD",63,63,13.5,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63,13.5,21,0)
^^1^1^2911205^^
"^DD",63,63,13.5,21,1,0)
This is the resident pathologist.
"^DD",63,63,13.5,"DT")
2930407
"^DD",63,63,13.6,0)
SENIOR PATHOLOGIST^*P200'^VA(200,^AU;10^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63,13.6,12)
Selects only active providers
"^DD",63,63,13.6,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63,13.6,21,0)
^^1^1^2911205^^
"^DD",63,63,13.6,21,1,0)
This is the senior pathologist.
"^DD",63,63,13.6,"DT")
2890907
"^DD",63,63,13.7,0)
AUTOPSY TYPE^S^F:FULL AUTOPSY;H:HEAD ONLY;T:TRUNK ONLY;A:ABDOMEN ONLY;C:CHEST ONLY;O:OTHER LIMITATION;^AU;11^Q
"^DD",63,63,13.7,21,0)
^^1^1^2911203^
"^DD",63,63,13.7,21,1,0)
This is the autopsy type.
"^DD",63,63,13.7,"DT")
2930928
"^DD",63,63,13.8,0)
AUTOPSY ASSISTANT^P200'^VA(200,^AU;2^Q
"^DD",63,63,13.8,21,0)
^^1^1^2920816^
"^DD",63,63,13.8,21,1,0)
If prosector has an assistant enter name of assistant.
"^DD",63,63,13.8,"DT")
2920816
"^DD",63,63,14,0)
AUTOPSY  ACC #^RFIX^^AU;6^K:$L(X)>15!($L(X)<5)!'(X?1ANP.ANP1" "2N1" "1N.N) X I $D(X),LRABV,$D(^LR("AAUA",$E(+$G(^LR(DA,"AU")),1,3),LRABV,X)) W $C(7),!,X," is already taken for ",LRABV,! K X
"^DD",63,63,14,.1)

"^DD",63,63,14,1,0)
^.1
"^DD",63,63,14,1,1,0)
63^AAUA^MUMPS
"^DD",63,63,14,1,1,1)
S ^LR("AAUA",$E(+^LR(DA,"AU"),1,3),$P(X," "),$P(X," ",3),DA)=""
"^DD",63,63,14,1,1,2)
K ^LR("AAUA",$E(+^LR(DA,"AU"),1,3),$P(X," "),$P(X," ",3),DA)
"^DD",63,63,14,1,1,"DT")
2950810
"^DD",63,63,14,3)
Answer must be 5-15 characters in length.
"^DD",63,63,14,4)
W !,"Enter as prefix <space> yr <space> number (ex. AU 95 23)"
"^DD",63,63,14,21,0)
^^1^1^2911205^^
"^DD",63,63,14,21,1,0)
This is the number of this autopsy.
"^DD",63,63,14,"DT")
2951214
"^DD",63,63,14.1,0)
LOCATION^FX^^AU;5^K:$L(X)>30!($L(X)<1) X I $D(X) X:X["?" ^DD(63,14.1,4) Q:X["?"  S Y(0)="",LRLLOC=X,DIC(0)="EQMZ",DIC=44 D ^DIC S X=$P($G(Y(0)),U,1) X:Y<1 ^DD(63,14.1,9.2) Q:'$D(X)  S:X']"" X="UNKNOWN"
"^DD",63,63,14.1,.1)
WARD OR OTHER LOCATION
"^DD",63,63,14.1,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63,14.1,4)
S X="?",DIC(0)="Q",DIC=44 D ^DIC
"^DD",63,63,14.1,9.2)
K X R !?3,"Non-standard location ! OK ?  NO// ",YN:DTIME S:YN["Y" X=LRLLOC
"^DD",63,63,14.1,21,0)
^^1^1^2990108^^^
"^DD",63,63,14.1,21,1,0)
This is the requesting location.
"^DD",63,63,14.1,"DT")
2990224
"^DD",63,63,14.5,0)
SERVICE^S^M:MEDICINE;S:SURGERY;P:PSYCHIATRY;NH:NHCU;NE:NEUROLOGY;I:INTERMEDIATE MED;R:REHAB MEDICINE;SCI:SPINAL CORD INJURY;D:DOMICILLARY;B:BLIND REHAB;^AU;8^Q
"^DD",63,63,14.5,21,0)
^^2^2^2911205^^
"^DD",63,63,14.5,21,1,0)
This is the service to which this patient was
"^DD",63,63,14.5,21,2,0)
assigned.
"^DD",63,63,14.5,"DT")
2841204
"^DD",63,63,14.6,0)
TREATING SPECIALITY AT DEATH^P45.7'^DIC(45.7,^AU;14^Q
"^DD",63,63,14.6,21,0)
^^1^1^2921124^
"^DD",63,63,14.6,21,1,0)
Name of treating specialty at time of patient's death.
"^DD",63,63,14.6,"DT")
2921103
"^DD",63,63,14.7,0)
AUTOPSY RELEASE DATE/TIME^DX^^AU;15^S %DT="ETXR",%DT(0)="N" D ^%DT K %DT S X=Y K:Y<1!('$D(^LR(DA,"AU"))) X I $D(X) S Y=+^LR(DA,"AU") I 'Y!(Y>X) K X D D^LRU W !,"No AUTOPSY TIME",!,"or AUTOPSY RELEASE TIME before AUTOPSY TIME" W:Y]"" " (",Y,")"
"^DD",63,63,14.7,3)
ONLY CURRENT DATE/TIME ALLOWED
"^DD",63,63,14.7,4)

"^DD",63,63,14.7,21,0)
^^1^1^2950908^^
"^DD",63,63,14.7,21,1,0)
Date and time autopsy verified.
"^DD",63,63,14.7,"DT")
2950908
"^DD",63,63,14.8,0)
AUTOPSY RELEASED BY^P200'^VA(200,^AU;16^Q
"^DD",63,63,14.8,21,0)
^^1^1^2921124^
"^DD",63,63,14.8,21,1,0)
Name of person releasing verified autopsy report.
"^DD",63,63,14.8,"DT")
2921121
"^DD",63,63,14.9,0)
PROVISIONAL ANAT DX DATE^DX^^AU;17^S %DT="EX" D ^%DT S X=Y K:Y<1 X I $D(X),X<$P(+$G(^LR(DA,"AU")),".") K X W $C(7),!!,"Date must be after autopsy date."
"^DD",63,63,14.9,.1)
PROVISIONAL ANATOMIC DIAGNOSIS DATE
"^DD",63,63,14.9,21,0)
^^1^1^2960610^^
"^DD",63,63,14.9,21,1,0)
Date provisional anatomic diagnoses reported
"^DD",63,63,14.9,"DT")
2960610
"^DD",63,63,16,0)
BODY HEIGHT (in)^NJ2,0X^^AW;1^S Q9="30,96,1" D ^LRNUM
"^DD",63,63,16,3)
TYPE A WHOLE NUMBER BETWEEN 30 AND 96
"^DD",63,63,16,21,0)
^^1^1^2930331^
"^DD",63,63,16,21,1,0)
Height of body in inches
"^DD",63,63,16,"DT")
2880524
"^DD",63,63,17,0)
BODY WT (lb)^NJ3,0X^^AW;2^S Q9="30,700,0" D ^LRNUM
"^DD",63,63,17,3)
TYPE A WHOLE NUMBER BETWEEN 30 AND 700
"^DD",63,63,17,21,0)
^^1^1^2930331^
"^DD",63,63,17,21,1,0)
Weight of body in pounds
"^DD",63,63,17,"DT")
2880524
"^DD",63,63,18,0)
LUNG,RT (gm)^NJ5,0X^^AW;3^S Q9="50,10000,0" D ^LRNUM
"^DD",63,63,18,3)
TYPE A WHOLE NUMBER BETWEEN 50 AND 10000
"^DD",63,63,18,21,0)
^^1^1^2930331^
"^DD",63,63,18,21,1,0)
Right lung
"^DD",63,63,18,"DT")
2880524
"^DD",63,63,19,0)
LUNG,LT (gm)^NJ5,0X^^AW;4^S Q9="50,10000,0" D ^LRNUM
"^DD",63,63,19,3)
TYPE A WHOLE NUMBER BETWEEN 50 AND 10000
"^DD",63,63,19,21,0)
^^1^1^2930331^
"^DD",63,63,19,21,1,0)
Left lung
"^DD",63,63,19,"DT")
2880929
"^DD",63,63,20,0)
LIVER (gm)^NJ5,0X^^AW;5^S Q9="100,15000,0" D ^LRNUM
"^DD",63,63,20,3)
TYPE A WHOLE NUMBER BETWEEN 100 AND 15000
"^DD",63,63,20,21,0)
^^1^1^2930331^
"^DD",63,63,20,21,1,0)
Body organ
"^DD",63,63,20,"DT")
2880524
"^DD",63,63,21,0)
SPLEEN (gm)^NJ5,0X^^AW;6^S Q9="1,15000,0" D ^LRNUM
"^DD",63,63,21,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 15000
"^DD",63,63,21,21,0)
^^1^1^2930331^
"^DD",63,63,21,21,1,0)
Body organ
"^DD",63,63,21,"DT")
2880524
"^DD",63,63,22,0)
KIDNEY,RT (gm)^NJ5,0X^^AW;7^S Q9="1,10000,0" D ^LRNUM
"^DD",63,63,22,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 10000
"^DD",63,63,22,21,0)
^^1^1^2930331^
"^DD",63,63,22,21,1,0)
Right kidney
"^DD",63,63,22,"DT")
2880524
"^DD",63,63,23,0)
KIDNEY,LT (gm)^NJ5,0X^^AW;8^S Q9="1,10000,0" D ^LRNUM
"^DD",63,63,23,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 10000
"^DD",63,63,23,21,0)
^^1^1^2930331^
"^DD",63,63,23,21,1,0)
Left kidney
"^DD",63,63,23,"DT")
2880524
"^DD",63,63,24,0)
HEART (gm)^NJ4,0X^^AW;9^S Q9="100,2000,0" D ^LRNUM
"^DD",63,63,24,3)
TYPE A WHOLE NUMBER BETWEEN 100 AND 2000
"^DD",63,63,24,21,0)
^^1^1^2930331^
"^DD",63,63,24,21,1,0)
Body organ
"^DD",63,63,24,"DT")
2880524
"^DD",63,63,25,0)
BRAIN (gm)^NJ4,0X^^AW;10^S Q9="1,2000,0" D ^LRNUM
"^DD",63,63,25,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 2000
"^DD",63,63,25,21,0)
^^1^1^2940510^^
"^DD",63,63,25,21,1,0)
Body organ
"^DD",63,63,25,"DT")
2880524
"^DD",63,63,25.1,0)
PITUITARY GLAND (gm)^NJ6,3X^^AW;11^S Q9="0,99,3" D ^LRNUM
"^DD",63,63,25.1,3)
Enter weight in grams (ex. 1.5 =1.5 grams)
"^DD",63,63,25.1,21,0)
^^1^1^2940510^
"^DD",63,63,25.1,21,1,0)
Body organ
"^DD",63,63,25.1,"DT")
2880524
"^DD",63,63,25.2,0)
THYROID GLAND (gm)^NJ6,3X^^AW;12^S Q9="0,99,3" D ^LRNUM
"^DD",63,63,25.2,3)
Enter weight in grams (ex. 1.5 =1.5 grams)
"^DD",63,63,25.2,21,0)
^^1^1^2940510^
"^DD",63,63,25.2,21,1,0)
Body organ
"^DD",63,63,25.2,"DT")
2880524
"^DD",63,63,25.3,0)
PARATHYROID, LEFT  UPPER (gm)^NJ6,3X^^AW;13^S Q9="0,99,3" D ^LRNUM
"^DD",63,63,25.3,3)
Enter weight in grams (ex. 1.5 =1.5 grams)
"^DD",63,63,25.3,21,0)
^^1^1^2930331^
"^DD",63,63,25.3,21,1,0)
Left upper parathyroid
"^DD",63,63,25.3,"DT")
2880524
"^DD",63,63,25.4,0)
PARATHYROID, LEFT  LOWER (gm)^NJ6,3X^^AW;14^S Q9="0,99,3" D ^LRNUM
"^DD",63,63,25.4,3)
Enter weight in grams (ex. 1.5 =1.5 grams)
"^DD",63,63,25.4,21,0)
^^1^1^2930331^
"^DD",63,63,25.4,21,1,0)
Left lower parathyroid
"^DD",63,63,25.4,"DT")
2880524
"^DD",63,63,25.5,0)
PARATHYROID, RIGHT UPPER (gm)^NJ6,3X^^AW;15^S Q9="0,99,3" D ^LRNUM
"^DD",63,63,25.5,3)
Enter weight in grams (ex. 1.5 =1.5 grams)
"^DD",63,63,25.5,21,0)
^^1^1^2930331^
"^DD",63,63,25.5,21,1,0)
Right upper parathyroid
"^DD",63,63,25.5,"DT")
2880524
"^DD",63,63,25.6,0)
PARATHYROID, RIGHT LOWER (gm)^NJ6,3X^^AW;16^S Q9="0,99,3" D ^LRNUM
"^DD",63,63,25.6,3)
Enter weight in grams (ex. 1.5 =1.5 grams)
"^DD",63,63,25.6,21,0)
^^1^1^2930331^
"^DD",63,63,25.6,21,1,0)
Right lower parathyroid
"^DD",63,63,25.6,"DT")
2880524
"^DD",63,63,25.7,0)
ADRENAL, LEFT (gm)^NJ6,3X^^AW;17^S Q9="0,99,3" D ^LRNUM
"^DD",63,63,25.7,3)
Enter weight in grams (ex. 1.5 =1.5 grams)
"^DD",63,63,25.7,21,0)
^^1^1^2930331^
"^DD",63,63,25.7,21,1,0)
Left adrenal
"^DD",63,63,25.7,"DT")
2880524
"^DD",63,63,25.8,0)
ADRENAL, RIGHT (gm)^NJ6,3X^^AW;18^S Q9="0,99,3" D ^LRNUM
"^DD",63,63,25.8,3)
Enter weight in grams (ex. 1.5 =1.5 grams)
"^DD",63,63,25.8,21,0)
^^1^1^2930331^
"^DD",63,63,25.8,21,1,0)
Right adrenal
"^DD",63,63,25.8,"DT")
2880524
"^DD",63,63,25.9,0)
PANCREAS (gm)^NJ3,0X^^AWI;1^S Q9="0,999,0" D ^LRNUM
"^DD",63,63,25.9,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 999
"^DD",63,63,25.9,21,0)
^^1^1^2930331^
"^DD",63,63,25.9,21,1,0)
Body organ
"^DD",63,63,25.9,"DT")
2880524
"^DD",63,63,25.91,0)
TESTIS, LEFT (gm)^NJ5,1X^^AWI;2^S Q9="0,500,1" D ^LRNUM
"^DD",63,63,25.91,3)
TYPE A NUMBER BETWEEN 0 AND 500
"^DD",63,63,25.91,21,0)
^^1^1^2930331^
"^DD",63,63,25.91,21,1,0)
Left testis
"^DD",63,63,25.91,"DT")
2880524
"^DD",63,63,25.92,0)
TESTIS, RIGHT (gm)^NJ5,1X^^AWI;3^S Q9="0,500,1" D ^LRNUM
"^DD",63,63,25.92,3)
TYPE A NUMBER BETWEEN 0 AND 500
"^DD",63,63,25.92,21,0)
^^1^1^2930331^
"^DD",63,63,25.92,21,1,0)
Right testis
"^DD",63,63,25.92,"DT")
2880524
"^DD",63,63,25.93,0)
OVARY, LEFT (gm)^NJ5,1X^^AWI;4^S Q9="0,500,1" D ^LRNUM
"^DD",63,63,25.93,3)
TYPE A NUMBER BETWEEN 0 AND 500
"^DD",63,63,25.93,21,0)
^^1^1^2930331^
"^DD",63,63,25.93,21,1,0)
Left ovary
"^DD",63,63,25.93,"DT")
2880524
"^DD",63,63,25.94,0)
OVARY, RIGHT (gm)^NJ5,1X^^AWI;5^S Q9="0,500,1" D ^LRNUM
"^DD",63,63,25.94,3)
TYPE A NUMBER BETWEEN 0 AND 500
"^DD",63,63,25.94,21,0)
^^1^1^2930331^
"^DD",63,63,25.94,21,1,0)
Right ovary
"^DD",63,63,25.94,"DT")
2880524
"^DD",63,63,26,0)
TRICUSPID VALVE (cm)^NJ4,1X^^AV;1^S Q9="1,20,1" D ^LRNUM
"^DD",63,63,26,3)
TYPE A NUMBER BETWEEN 1 AND 20
"^DD",63,63,26,21,0)
^^1^1^2940510^
"^DD",63,63,26,21,1,0)
Body organ
"^DD",63,63,26,"DT")
2880524
"^DD",63,63,27,0)
PULMONIC VALVE (cm)^NJ4,1X^^AV;2^S Q9="1,20,1" D ^LRNUM
"^DD",63,63,27,3)
TYPE A NUMBER BETWEEN 1 AND 20
"^DD",63,63,27,21,0)
^^1^1^2940510^
"^DD",63,63,27,21,1,0)
Body organ
"^DD",63,63,27,"DT")
2880524
"^DD",63,63,28,0)
MITRAL VALVE (cm)^NJ4,1X^^AV;3^S Q9="1,20,1" D ^LRNUM
"^DD",63,63,28,3)
TYPE A NUMBER BETWEEN 1 AND 20
"^DD",63,63,28,21,0)
^^1^1^2940510^
"^DD",63,63,28,21,1,0)
Body organ
"^DD",63,63,28,"DT")
2880524
"^DD",63,63,29,0)
AORTIC VALVE (cm)^NJ4,1X^^AV;4^S Q9="1,20,1" D ^LRNUM
"^DD",63,63,29,3)
TYPE A NUMBER BETWEEN 1 AND 20
"^DD",63,63,29,21,0)
^^1^1^2940510^
"^DD",63,63,29,21,1,0)
Body organ
"^DD",63,63,29,"DT")
2880524
"^DD",63,63,30,0)
RIGHT VENTRICLE (cm)^NJ4,2X^^AV;5^S Q9="0,5,2" D ^LRNUM
"^DD",63,63,30,3)
TYPE A NUMBER BETWEEN 0 AND 5
"^DD",63,63,30,21,0)
^^1^1^2940510^
"^DD",63,63,30,21,1,0)
Body organ
"^DD",63,63,30,"DT")
2880524
"^DD",63,63,31,0)
LEFT VENTRICLE (cm)^NJ4,2X^^AV;6^S Q9="0,9,2" D ^LRNUM
"^DD",63,63,31,3)
TYPE A NUMBER BETWEEN 0 AND 9
"^DD",63,63,31,21,0)
^^1^1^2940510^
"^DD",63,63,31,21,1,0)
Body organ
"^DD",63,63,31,"DT")
2880524
"^DD",63,63,31.1,0)
PLEURAL CAVITY, LEFT (ml)^NJ5,0X^^AV;7^S Q9="0,99999,0" D ^LRNUM
"^DD",63,63,31.1,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99999
"^DD",63,63,31.1,21,0)
^^1^1^2930331^
"^DD",63,63,31.1,21,1,0)
Left pleural cavity
"^DD",63,63,31.1,"DT")
2880524
"^DD",63,63,31.2,0)
PLEURAL CAVITY, RIGHT (ml)^NJ5,0X^^AV;8^S Q9="0,99999,0" D ^LRNUM
"^DD",63,63,31.2,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99999
"^DD",63,63,31.2,21,0)
^^1^1^2930331^
"^DD",63,63,31.2,21,1,0)
Right pleural cavity
"^DD",63,63,31.2,"DT")
2880524
"^DD",63,63,31.3,0)
PERICARDIAL CAVITY (ml)^NJ5,0X^^AV;9^S Q9="0,99999,0" D ^LRNUM
"^DD",63,63,31.3,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99999
"^DD",63,63,31.3,21,0)
^^1^1^2940510^
"^DD",63,63,31.3,21,1,0)
Body organ
"^DD",63,63,31.3,"DT")
2880524
"^DD",63,63,31.4,0)
PERITONEAL CAVITY (ml)^NJ5,0X^^AV;10^S Q9="0,99999,0" D ^LRNUM
"^DD",63,63,31.4,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99999
"^DD",63,63,31.4,21,0)
^^1^1^2940510^
"^DD",63,63,31.4,21,1,0)
Body organ
"^DD",63,63,31.4,"DT")
2880524
"^DD",63,63,32,0)
AUTOPSY ORGAN/TISSUE^63.2PA^^AY;0
"^DD",63,63,32,12)
Selects where appropriate sex specific organ or tissue.
"^DD",63,63,32,12.1)
S DIC("S")="I SEX[$P(^(0),U,3)"
"^DD",63,63,32,21,0)
^^1^1^2950523^^^^
"^DD",63,63,32,21,1,0)
These are the organ/tissue(s) examined.
"^DD",63,63,32.1,0)
AUTOPSY COMMENTS^63.97A^^AZC;0
"^DD",63,63,32.1,21,0)
^^1^1^2911205^^^
"^DD",63,63,32.1,21,1,0)
These are comments on the autopsy.
"^DD",63,63,32.2,0)
CLINICAL DIAGNOSES^63.322^^81;0
"^DD",63,63,32.2,21,0)
^.001^1^1^3010424^^^^
"^DD",63,63,32.2,21,1,0)
These are the clinical diagnoses.
"^DD",63,63,32.3,0)
PATHOLOGICAL DIAGNOSES^63.323^^82;0
"^DD",63,63,32.3,21,0)
^^1^1^2911203^
"^DD",63,63,32.3,21,1,0)
These are the pathological diagnoses.
"^DD",63,63,32.4,0)
AUTOPSY SUPPLEMENTARY REPORT^63.324DA^^84;0
"^DD",63,63,32.4,21,0)
^.001^1^1^3011031^^^^
"^DD",63,63,32.4,21,1,0)
Multiple for autopsy supplementary report
"^DD",63,63,33,0)
AUTOPSY SPECIMEN^63.033A^^33;0
"^DD",63,63,33,21,0)
^^2^2^2920205^
"^DD",63,63,33,21,1,0)
Autopsy organs and tissues are entered here for block and slide 
"^DD",63,63,33,21,2,0)
preparation, label printing and workload.
"^DD",63,63,80,0)
AUTOPSY ICD9CM CODE^63.808PA^^80;0
"^DD",63,63,80,21,0)
^^1^1^2911205^^
"^DD",63,63,80,21,1,0)
These are the ICD9CM codes on this autopsy.
"^DD",63,63,83.1,0)
MAJOR DIAGNOSTIC DISAGREEMENT^RS^0:NO;1:YES;^83;1^Q
"^DD",63,63,83.1,21,0)
^^2^2^2870212^
"^DD",63,63,83.1,21,1,0)
If major diagnostic disagreements between autopsy and clinical findings
"^DD",63,63,83.1,21,2,0)
 enter 'YES' else enter 'NO'.
"^DD",63,63,83.1,"DT")
2870212
"^DD",63,63,83.2,0)
CLINICAL DIAGNOSIS CLARIFIED^S^1:YES;0:NO;2:CONFIRMED;^83;2^Q
"^DD",63,63,83.2,21,0)
^^2^2^2870212^
"^DD",63,63,83.2,21,1,0)
If clinical dx insufficient (ex. intracranial hemorrhage) did autopsy
"^DD",63,63,83.2,21,2,0)
 clarify the dx (ex. ruptured aneurysm) ?
"^DD",63,63,83.2,"DT")
2870213
"^DD",63,63,99,0)
AUTOPSY QA CODE^63.999PA^^99;0
"^DD",63,63,99,12)
Selects entries with less than 3 characters
"^DD",63,63,99,12.1)
S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3"
"^DD",63,63,99,21,0)
^^1^1^2940510^
"^DD",63,63,99,21,1,0)
Multiple for autopsy quality assurance code
"^DD",63,63,100,0)
ARCHIVE REFERENCE^63.99A^^T;0
"^DD",63,63,100,21,0)
^^1^1^2911205^^
"^DD",63,63,100,21,1,0)
These are references to archiving information.
"^DD",63,63,101,0)
TIU REFERENCE DATE/TIME - AU^63.101DA^^101;0
"^DD",63,63,101,21,0)
^.001^3^3^3021028^^^^
"^DD",63,63,101,21,1,0)
This multiple stores TIU information for corresponding SF515 autopsy reports
"^DD",63,63,101,21,2,0)
that have been electronically signed and stored in TIU.  This information is
"^DD",63,63,101,21,3,0)
used to access the reports in TIU.
"^DD",63,63,101,"DT")
3010828
"^DD",63,63,102,0)
DATE REPORT MODIFIED - AU^D^^102;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63,102,21,0)
^^2^2^3020107^
"^DD",63,63,102,21,1,0)
This is the date the report was modified if it was modified after it was
"^DD",63,63,102,21,2,0)
electronically signed/released.
"^DD",63,63,102,"DT")
3011130
"^DD",63,63,102.1,0)
PERSON MODIFYING TEXT^P200'^VA(200,^102;2^Q
"^DD",63,63,102.1,21,0)
^^2^2^3020107^
"^DD",63,63,102.1,21,1,0)
Stores the DUZ of the person who modified the report AFTER it was
"^DD",63,63,102.1,21,2,0)
electronically signed/released.
"^DD",63,63,102.1,"DT")
3011130
"^DD",63,63,102.2,0)
DIAGNOSIS MODIFIED^S^1:YES;0:NO;^102;3^Q
"^DD",63,63,102.2,21,0)
^^1^1^3020107^
"^DD",63,63,102.2,21,1,0)
1 = Diagnosis modified AFTER report was electronically signed/released.
"^DD",63,63,102.2,"DT")
3011130
"^DD",63,63.01,0)
BLOOD BANK SUB-FIELD^NL^154^77
"^DD",63,63.01,0,"DT")
2940928
"^DD",63,63.01,0,"NM","BLOOD BANK")

"^DD",63,63.01,0,"UP")
63
"^DD",63,63.01,.01,0)
DATE/TIME SPECIMEN TAKEN^RDX^^0;1^S %DT="ETXS",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X) S DINUM=9999999-Y
"^DD",63,63.01,.01,1,0)
^.1^^0
"^DD",63,63.01,.01,3)
ENTER PAST OR PRESENT DATE/TIME ONLY
"^DD",63,63.01,.01,8.5)
@
"^DD",63,63.01,.01,21,0)
^^1^1^2911126^
"^DD",63,63.01,.01,21,1,0)
This is the date/time the specimen was collected.
"^DD",63,63.01,.01,"DT")
2920629
"^DD",63,63.01,.03,0)
DATE REPORT COMPLETED^RD^^0;3^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.01,.03,21,0)
^^1^1^2911126^
"^DD",63,63.01,.03,21,1,0)
This is the date the report was completed.
"^DD",63,63.01,.04,0)
ENTERING PERSON^P200'^VA(200,^0;4^Q
"^DD",63,63.01,.04,3)

"^DD",63,63.01,.04,21,0)
^^1^1^2911126^
"^DD",63,63.01,.04,21,1,0)
This is the person entering the date.
"^DD",63,63.01,.04,"DT")
2910630
"^DD",63,63.01,.05,0)
SPECIMEN^P61'^LAB(61,^0;5^Q
"^DD",63,63.01,.05,21,0)
^^1^1^2911126^^
"^DD",63,63.01,.05,21,1,0)
This is the specimen collected.
"^DD",63,63.01,.055,0)
COLLECTION SAMPLE^RP62'^LAB(62,^0;11^Q
"^DD",63,63.01,.055,21,0)
^^1^1^2911126^^
"^DD",63,63.01,.055,21,1,0)
This is the collection sample for the specimen.
"^DD",63,63.01,.055,"DT")
2911126
"^DD",63,63.01,.06,0)
ACCESSION NUMBER^F^^0;6^K:$L(X)>20!($L(X)<1) X
"^DD",63,63.01,.06,1,0)
^.1^^0
"^DD",63,63.01,.06,3)
ANSWER MUST BE 1-20 CHARACTERS IN LENGTH
"^DD",63,63.01,.06,21,0)
^^1^1^2911126^^^
"^DD",63,63.01,.06,21,1,0)
This is the blood bank accession.
"^DD",63,63.01,.06,"DT")
2870508
"^DD",63,63.01,.07,0)
PHYSICIAN^*P200'X^VA(200,^0;7^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.01,.07,12)
Selection must be made from active PROVIDERS who hold the PROVIDER security key.
"^DD",63,63.01,.07,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63.01,.07,21,0)
^^1^1^2911126^
"^DD",63,63.01,.07,21,1,0)
This is the requesting provider.
"^DD",63,63.01,.07,"DT")
2900420
"^DD",63,63.01,.08,0)
WARD^F^^0;8^K:$L(X)>19!($L(X)<1) X
"^DD",63,63.01,.08,3)
ANSWER MUST BE 1-19 CHARACTERS IN LENGTH
"^DD",63,63.01,.08,21,0)
^^1^1^2911126^
"^DD",63,63.01,.08,21,1,0)
This is the requesting location.
"^DD",63,63.01,.08,"DT")
2870506
"^DD",63,63.01,.09,0)
PHLEBOTOMIST^P200'^VA(200,^0;9^Q
"^DD",63,63.01,.09,21,0)
^^1^1^2911126^
"^DD",63,63.01,.09,21,1,0)
This is the person collecting the sample
"^DD",63,63.01,.09,"DT")
2910630
"^DD",63,63.01,.1,0)
DATE/TIME RECEIVED^RDX^^0;10^S %DT="EXT",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X),X'["." K X
"^DD",63,63.01,.1,1,0)
^.1^^0
"^DD",63,63.01,.1,3)
Enter date and time !
"^DD",63,63.01,.1,4)
K DZ
"^DD",63,63.01,.1,21,0)
^^2^2^2911126^
"^DD",63,63.01,.1,21,1,0)
This is the date/time the sample was received at
"^DD",63,63.01,.1,21,2,0)
the blood bank.
"^DD",63,63.01,.1,"DT")
2850615
"^DD",63,63.01,.12,0)
ACCESSION LINK^FI^^0;12^K:$L(X)>24!($L(X)<1) X
"^DD",63,63.01,.12,3)
Answer must be 1-24 characters in length.
"^DD",63,63.01,.12,21,0)
^^5^5^2940928^
"^DD",63,63.01,.12,21,1,0)
 This field is used to determine the accession area, accession date and
"^DD",63,63.01,.12,21,2,0)
the accession number. The data is stuffed by the accessioning logic.
"^DD",63,63.01,.12,21,3,0)
The contents is used by the workload capturing routines.
"^DD",63,63.01,.12,21,4,0)
 NOTE: THIS FIELD SHOULD NOT BE EDITED MANUALLY, ONLY PROGRAM LOGIC SHOULD
"^DD",63,63.01,.12,21,5,0)
SET THIS FIELD.
"^DD",63,63.01,.12,23,0)
^^3^3^2940928^
"^DD",63,63.01,.12,23,1,0)
 The structure of the entry is accession area #, accession date and accession
"^DD",63,63.01,.12,23,2,0)
number separated by vertical bar.
"^DD",63,63.01,.12,23,3,0)
   29|2940927|3
"^DD",63,63.01,.12,"DT")
2940928
"^DD",63,63.01,.99,0)
SPECIMEN COMMENT^63.199A^^99;0
"^DD",63,63.01,.99,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.01,.99,21,0)
^^1^1^2911203^^
"^DD",63,63.01,.99,21,1,0)
This is a comment on the specimen.
"^DD",63,63.01,2.1,0)
DIRECT AHG(POLYSPECIFIC)^FX^^2;1^D ^LRBLAGG
"^DD",63,63.01,2.1,.1)
Polyspecific (broad spectrum) antiserum
"^DD",63,63.01,2.1,3)

"^DD",63,63.01,2.1,4)
D LST^LRBLAGG
"^DD",63,63.01,2.1,"DT")
2841021
"^DD",63,63.01,2.2,0)
DIRECT AHG(5 min incub)^FX^^2;2^D ^LRBLAGG
"^DD",63,63.01,2.2,.1)
Polyspecific (broad spectrum) antiserum 5 min incubation
"^DD",63,63.01,2.2,3)

"^DD",63,63.01,2.2,4)
D LST^LRBLAGG
"^DD",63,63.01,2.2,"DT")
2841021
"^DD",63,63.01,2.3,0)
DIRECT AHG CC^FX^^2;3^D ^LRBLAGG
"^DD",63,63.01,2.3,.1)
Direct AHG broadspectrum check cell
"^DD",63,63.01,2.3,3)

"^DD",63,63.01,2.3,4)
D LST^LRBLAGG
"^DD",63,63.01,2.3,"DT")
2841021
"^DD",63,63.01,2.4,0)
ANTI-IgG^FX^^2;4^D ^LRBLAGG
"^DD",63,63.01,2.4,.1)
Anti-human globulin (not broadspectrum)
"^DD",63,63.01,2.4,3)

"^DD",63,63.01,2.4,4)
D LST^LRBLAGG
"^DD",63,63.01,2.4,"DT")
2841021
"^DD",63,63.01,2.5,0)
ANTI-IgG CC^FX^^2;5^D ^LRBLAGG
"^DD",63,63.01,2.5,.1)
Anti-human globulin check cell
"^DD",63,63.01,2.5,3)

"^DD",63,63.01,2.5,4)
D LST^LRBLAGG
"^DD",63,63.01,2.5,"DT")
2841021
"^DD",63,63.01,2.6,0)
ANTI-COMPLEMENT^FX^^2;6^D ^LRBLAGG
"^DD",63,63.01,2.6,.1)
Anti-human globulin (complement specific)
"^DD",63,63.01,2.6,3)

"^DD",63,63.01,2.6,4)
D LST^LRBLAGG
"^DD",63,63.01,2.6,"DT")
2841021
"^DD",63,63.01,2.7,0)
ANTI-COMPLEMENT (5 min incub)^FX^^2;7^D ^LRBLAGG
"^DD",63,63.01,2.7,.1)
Anti-human globulin, complement specific (5 min incubation)
"^DD",63,63.01,2.7,3)

"^DD",63,63.01,2.7,4)
D LST^LRBLAGG
"^DD",63,63.01,2.7,"DT")
2841021
"^DD",63,63.01,2.8,0)
ANTI-COMPLEMENT CC^FX^^2;8^D ^LRBLAGG
"^DD",63,63.01,2.8,3)

"^DD",63,63.01,2.8,4)
D LST^LRBLAGG
"^DD",63,63.01,2.8,"DT")
2841021
"^DD",63,63.01,2.9,0)
DIRECT AHG INTERPRETATION^S^P:POSITIVE;N:NEGATIVE;I:INVALID, USE EDTA SPECIMEN;^2;9^Q
"^DD",63,63.01,2.9,21,0)
^^1^1^2940510^
"^DD",63,63.01,2.9,21,1,0)
Interpretation of the direct AHG
"^DD",63,63.01,2.9,"DT")
2841021
"^DD",63,63.01,2.91,0)
DIRECT AHG TEST COMMENT^FX^^2;10^K:$L(X)>80!($L(X)<1) X I $D(X) S L=80,L(1)="JX" D ^LRUB
"^DD",63,63.01,2.91,3)
ANSWER MUST BE 1-80 CHARACTERS IN LENGTH
"^DD",63,63.01,2.91,4)
S L(1)="JX" D Q^LRUB
"^DD",63,63.01,2.91,21,0)
^^1^1^2940510^
"^DD",63,63.01,2.91,21,1,0)
Any comment on the direct AHG test
"^DD",63,63.01,2.91,"DT")
2870519
"^DD",63,63.01,3,0)
ELUATE ANTIBODY^63.012PA^^EA;0
"^DD",63,63.01,3,12)
Selects only antibodies
"^DD",63,63.01,3,12.1)
S DIC("S")="I $P(^(0),U,5)=""AB"""
"^DD",63,63.01,3,21,0)
^^1^1^2911126^
"^DD",63,63.01,3,21,1,0)
These are eluate antibodies.
"^DD",63,63.01,4,0)
SCREEN CELL METHOD^63.014SA^^3;0
"^DD",63,63.01,4,21,0)
^^1^1^2911126^
"^DD",63,63.01,4,21,1,0)
These are the screen cell methods.
"^DD",63,63.01,6,0)
ANTIBODY SCREEN INTERPRETATION^S^N:NEG;P:POS;^6;1^Q
"^DD",63,63.01,6,21,0)
^^1^1^2850830^^
"^DD",63,63.01,6,21,1,0)
If antibodies are present in the patient's serum the antibody screen interpretation will usually be positive.
"^DD",63,63.01,6,"DT")
2841017
"^DD",63,63.01,6.1,0)
RBC ANTIGEN PRESENT^63.011PA^^1.1;0
"^DD",63,63.01,6.1,12)
Selects red blood cell antigens
"^DD",63,63.01,6.1,12.1)
S DIC("S")="I $P(^(0),U,5)=""AN"""
"^DD",63,63.01,6.1,21,0)
^^1^1^2901028^
"^DD",63,63.01,6.1,21,1,0)
Antigens present on RBC's of patient are entered here.
"^DD",63,63.01,6.2,0)
RBC ANTIGEN ABSENT^63.0112PA^^1.2;0
"^DD",63,63.01,6.2,12)
Selects red blood cell antigens
"^DD",63,63.01,6.2,12.1)
S DIC("S")="I $P(^(0),U,5)=""AN"""
"^DD",63,63.01,6.2,21,0)
^^1^1^2901028^
"^DD",63,63.01,6.2,21,1,0)
Antigens identified as absent on red blood cells are entered here.
"^DD",63,63.01,6.3,0)
HLA ANTIGEN PRESENT^63.013PA^^1.3;0
"^DD",63,63.01,6.3,12)
Selects HLA antigens
"^DD",63,63.01,6.3,12.1)
S DIC("S")="I $P(^(0),U,5)=""HL"""
"^DD",63,63.01,6.3,21,0)
^^1^1^2901028^
"^DD",63,63.01,6.3,21,1,0)
HLA antgens present on WBC's are entered here.
"^DD",63,63.01,6.4,0)
HLA ANTIGEN ABSENT^63.0114PA^^1.4;0
"^DD",63,63.01,6.4,12)
Selects HLA antigens
"^DD",63,63.01,6.4,12.1)
S DIC("S")="I $P(^(0),U,5)=""HL"""
"^DD",63,63.01,6.4,21,0)
^^1^1^2901028^
"^DD",63,63.01,6.4,21,1,0)
HLA antigens absent on WBC's are entered here.
"^DD",63,63.01,7,0)
SERUM ANTIBODY^63.46PA^^5;0
"^DD",63,63.01,7,12)
SELECTS ANTIBODIES
"^DD",63,63.01,7,12.1)
S DIC("S")="I $P(^(0),U,5)=""AB"""
"^DD",63,63.01,7,21,0)
^^1^1^2911127^
"^DD",63,63.01,7,21,1,0)
These are the serum antibodies.
"^DD",63,63.01,8,0)
ANTIBODY SCREEN COMMENT^63.48A^^4;0
"^DD",63,63.01,8,21,0)
^^1^1^2911127^
"^DD",63,63.01,8,21,1,0)
These are antibody screen comments.
"^DD",63,63.01,9,0)
RBC TYPING METHOD^63.018SA^^1;0
"^DD",63,63.01,9,21,0)
^^1^1^2911203^^
"^DD",63,63.01,9,21,1,0)
These are RBC typing methods.
"^DD",63,63.01,10,0)
ABO INTERPRETATION^S^A:A;B:B;O:O;AB:AB;ND:NOT DONE;^10;1^Q
"^DD",63,63.01,10,21,0)
^^1^1^2911127^
"^DD",63,63.01,10,21,1,0)
This is the patient's ABO interpretation.
"^DD",63,63.01,10,"DT")
2850604
"^DD",63,63.01,10.2,0)
ABO TYPING TECH^P200'^VA(200,^10;2^Q
"^DD",63,63.01,10.2,3)

"^DD",63,63.01,10.2,21,0)
^^1^1^2870504^
"^DD",63,63.01,10.2,21,1,0)
Technologist interpretating ABO typing results
"^DD",63,63.01,10.2,"DT")
2910630
"^DD",63,63.01,10.3,0)
ABO TESTING COMMENT^FX^^10;3^K:$L(X)>80!($L(X)<1) X I $D(X) S L=80,L(1)="JX" D ^LRUB
"^DD",63,63.01,10.3,3)
ANSWER MUST BE 1-80 CHARACTERS
"^DD",63,63.01,10.3,4)
S L(1)="JX" D Q^LRUB
"^DD",63,63.01,10.3,21,0)
^^1^1^2911127^
"^DD",63,63.01,10.3,21,1,0)
This is a comment on the ABO testing.
"^DD",63,63.01,10.3,"DT")
2870519
"^DD",63,63.01,11,0)
RH  INTERPRETATION^S^NEG:NEG;POS:POS;ND:NOT DONE;^11;1^Q
"^DD",63,63.01,11,21,0)
^^1^1^2911127^
"^DD",63,63.01,11,21,1,0)
This is the patient's Rh interpretation.
"^DD",63,63.01,11,"DT")
2850604
"^DD",63,63.01,11.2,0)
RH TYPING TECH^P200'^VA(200,^11;2^Q
"^DD",63,63.01,11.2,3)

"^DD",63,63.01,11.2,21,0)
^^1^1^2911127^^
"^DD",63,63.01,11.2,21,1,0)
Technologist interpretating Rh typing results
"^DD",63,63.01,11.2,"DT")
2910630
"^DD",63,63.01,11.3,0)
RH TESTING COMMENT^FX^^11;3^K:$L(X)>80!($L(X)<1) X I $D(X) S L=80,L(1)="JX" D ^LRUB
"^DD",63,63.01,11.3,3)
ANSWER MUST BE 1-80 CHARACTERS
"^DD",63,63.01,11.3,4)
S L(1)="JX" D Q^LRUB
"^DD",63,63.01,11.3,21,0)
^^1^1^2911127^
"^DD",63,63.01,11.3,21,1,0)
This is a comment on the Rh testing.
"^DD",63,63.01,11.3,"DT")
2870519
"^DD",63,63.01,121,0)
PT CELLS+ANTI D (sal)^FX^^12;1^D ^LRBLAGG
"^DD",63,63.01,121,.1)
PT CELLS + ANTI D Saline Reagent
"^DD",63,63.01,121,3)

"^DD",63,63.01,121,4)
D LST^LRBLAGG
"^DD",63,63.01,121,"DT")
2841021
"^DD",63,63.01,122,0)
PT CELLS+RH CTRL (sal)^FX^^12;2^D ^LRBLAGG
"^DD",63,63.01,122,.1)
PT CELLS+RH CONTROL (Low protein or Saline)
"^DD",63,63.01,122,3)

"^DD",63,63.01,122,4)
D LST^LRBLAGG
"^DD",63,63.01,122,"DT")
2841021
"^DD",63,63.01,123,0)
PT CELLS(sal)+ANTI D(hp IS)^FX^^12;3^D ^LRBLAGG
"^DD",63,63.01,123,.1)
PT CELLS (saline susp)+Anti D High Protein Reagent immediate spin
"^DD",63,63.01,123,3)

"^DD",63,63.01,123,4)
D LST^LRBLAGG
"^DD",63,63.01,123,"DT")
2841021
"^DD",63,63.01,124,0)
PT CELLS(ser)+ANTI D(hp IS)^RFX^^12;4^D ^LRBLAGG
"^DD",63,63.01,124,.1)
PT CELLS (serum or plasma susp)+Anti D High Protein Reagent immediate spin
"^DD",63,63.01,124,3)

"^DD",63,63.01,124,4)
D LST^LRBLAGG
"^DD",63,63.01,124,"DT")
2841021
"^DD",63,63.01,125,0)
PT CELLS+ANTI D (hp 37)^FX^^12;5^D ^LRBLAGG
"^DD",63,63.01,125,.1)
PT CELLS + ANTI D high protein reagent 37 degree C incubation
"^DD",63,63.01,125,3)

"^DD",63,63.01,125,4)
D LST^LRBLAGG
"^DD",63,63.01,125,"DT")
2841021
"^DD",63,63.01,126,0)
PT CELLS+ANTI D (hp AHG)^FX^^12;6^D ^LRBLAGG
"^DD",63,63.01,126,.1)
PT CELLS+ANTI D High Protein AHG)
"^DD",63,63.01,126,3)

"^DD",63,63.01,126,4)
D LST^LRBLAGG
"^DD",63,63.01,126,"DT")
2841021
"^DD",63,63.01,127,0)
PT CELLS+ANTI D SLIDE (hp)^S^P:AGGLUTINATION;N:NO AGGLUTINATION;^12;7^Q
"^DD",63,63.01,127,.1)
PT CELLS+ANTI S SLIDE high protein reagent
"^DD",63,63.01,127,3)

"^DD",63,63.01,127,"DT")
2840227
"^DD",63,63.01,128,0)
PT CELLS(sal)+RH CTRL (hp IS)^FX^^12;8^D ^LRBLAGG
"^DD",63,63.01,128,.1)
PT CELLS (saline suspension) + RH Control (high protein immediate spin)
"^DD",63,63.01,128,3)

"^DD",63,63.01,128,4)
D LST^LRBLAGG
"^DD",63,63.01,128,"DT")
2841021
"^DD",63,63.01,129,0)
PT CELLS(ser)+RH CTRL(hp IS)^RFX^^12;9^D ^LRBLAGG
"^DD",63,63.01,129,.1)
PT CELLS(serum or plasma suspension)+RH Control(high protein immediate spin)
"^DD",63,63.01,129,3)

"^DD",63,63.01,129,4)
D LST^LRBLAGG
"^DD",63,63.01,129,"DT")
2841021
"^DD",63,63.01,129.1,0)
PT CELLS+RH CTRL (hp 37)^FX^^12;10^D ^LRBLAGG
"^DD",63,63.01,129.1,.1)
PT CELLS+RH Control (high protein 37 degree C incubation)
"^DD",63,63.01,129.1,3)

"^DD",63,63.01,129.1,4)
D LST^LRBLAGG
"^DD",63,63.01,129.1,"DT")
2841021
"^DD",63,63.01,129.11,0)
PT CELLS+RH CTRL (hp AHG)^FX^^12;11^D ^LRBLAGG
"^DD",63,63.01,129.11,.1)
PT CELLS+RH Control (high protein AHG)
"^DD",63,63.01,129.11,3)

"^DD",63,63.01,129.11,4)
D LST^LRBLAGG
"^DD",63,63.01,129.11,"DT")
2841021
"^DD",63,63.01,129.12,0)
PT CELLS+RH CTRL SLIDE (hp)^S^P:AGGLUTINATION;N:NO AGGLUTINATION;^12;12^Q
"^DD",63,63.01,129.12,.1)
PT CELLS+RH Control Slide (high protein)
"^DD",63,63.01,129.12,3)

"^DD",63,63.01,129.12,"DT")
2840227
"^DD",63,63.01,131,0)
INTERPRETATION OF RH TESTING^RS^NEG:NEG;POS:POS;PDU:RH POS DU POS;NDU:RH NEG DU NEG;^13;1^Q
"^DD",63,63.01,131,"DT")
2840724
"^DD",63,63.01,132,0)
RH TEST COMMENT^F^^13;2^K:$L(X)>80!($L(X)<2) X
"^DD",63,63.01,132,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.01,132,"DT")
2840227
"^DD",63,63.01,133,0)
PT Cells(sal)+Anti D(mod) IS^RFX^^13;3^D ^LRBLAGG
"^DD",63,63.01,133,.1)
PT Cells(saline susp)+Anti D(chemically modified reagent) Immediate Spin
"^DD",63,63.01,133,3)

"^DD",63,63.01,133,4)
D LST^LRBLAGG
"^DD",63,63.01,133,"DT")
2841021
"^DD",63,63.01,134,0)
PT Cells(ser)+Anti D(mod) IS^FX^^13;4^D ^LRBLAGG
"^DD",63,63.01,134,3)

"^DD",63,63.01,134,4)
D LST^LRBLAGG
"^DD",63,63.01,134,"DT")
2841021
"^DD",63,63.01,135,0)
PT Cells+Anti D(mod) 37^FX^^13;5^D ^LRBLAGG
"^DD",63,63.01,135,.1)
PT Cells+Anti D (chemically modified reagent) 37 degree incubation
"^DD",63,63.01,135,3)

"^DD",63,63.01,135,4)
D LST^LRBLAGG
"^DD",63,63.01,135,"DT")
2841021
"^DD",63,63.01,136,0)
PT Cells+Anti D(mod) AHG^FX^^13;6^D ^LRBLAGG
"^DD",63,63.01,136,.1)
PT Cells+Anti D (chemically modified reagent) AHG
"^DD",63,63.01,136,3)

"^DD",63,63.01,136,4)
D LST^LRBLAGG
"^DD",63,63.01,136,"DT")
2841021
"^DD",63,63.01,138,0)
PT Cells(sal)+RH Ctrl(sal) IS^RFX^^13;8^D ^LRBLAGG
"^DD",63,63.01,138,.1)
PT Cells(saline susp)+Rh Control(saline or low protein) Immediate Spin
"^DD",63,63.01,138,3)

"^DD",63,63.01,138,4)
D LST^LRBLAGG
"^DD",63,63.01,138,"DT")
2841021
"^DD",63,63.01,139,0)
PT Cells(ser)+RH Ctrl(sal) IS^FX^^13;9^D ^LRBLAGG
"^DD",63,63.01,139,.1)
PT Cells(serum or plasm susp) Immediate spin
"^DD",63,63.01,139,3)

"^DD",63,63.01,139,4)
D LST^LRBLAGG
"^DD",63,63.01,139,"DT")
2841021
"^DD",63,63.01,139.1,0)
PT Cells+RH Ctrl(sal) 37^FX^^13;10^D ^LRBLAGG
"^DD",63,63.01,139.1,.1)
PT Cells+RH Control(saline) 37 degree incubation
"^DD",63,63.01,139.1,3)

"^DD",63,63.01,139.1,4)
D LST^LRBLAGG
"^DD",63,63.01,139.1,"DT")
2841021
"^DD",63,63.01,139.11,0)
PT Cells+RH Ctrl(sal) AHG^FX^^13;11^D ^LRBLAGG
"^DD",63,63.01,139.11,.1)
PT Cells+RH Control (saline) AHG
"^DD",63,63.01,139.11,3)

"^DD",63,63.01,139.11,4)
D LST^LRBLAGG
"^DD",63,63.01,139.11,"DT")
2841021
"^DD",63,63.01,141,0)
PT CELLS(ser)+ANTI A IS^RFX^^14;1^D ^LRBLAGG
"^DD",63,63.01,141,.1)
Pt Cells serum or plasma susp + Anti A immediate spin
"^DD",63,63.01,141,3)

"^DD",63,63.01,141,4)
D LST^LRBLAGG
"^DD",63,63.01,141,"DT")
2841021
"^DD",63,63.01,142,0)
PT CELLS(sal)+ANTI A IS^FX^^14;2^D ^LRBLAGG
"^DD",63,63.01,142,.1)
Pt cells saline susp + Anti A immediate spin
"^DD",63,63.01,142,3)

"^DD",63,63.01,142,4)
D LST^LRBLAGG
"^DD",63,63.01,142,"DT")
2841021
"^DD",63,63.01,143,0)
PT CELLS+ANTI A SLIDE^S^P:AGGLUTINATION;N:NO AGGLUTINATION;^14;3^Q
"^DD",63,63.01,143,3)

"^DD",63,63.01,143,"DT")
2840227
"^DD",63,63.01,144,0)
PT CELLS(ser)+ANTI B IS^RFX^^14;4^D ^LRBLAGG
"^DD",63,63.01,144,.1)
Pt cells serum or plasma susp + Anti B immediate spin
"^DD",63,63.01,144,3)

"^DD",63,63.01,144,4)
D LST^LRBLAGG
"^DD",63,63.01,144,"DT")
2841021
"^DD",63,63.01,145,0)
PT CELLS(sal)+ANTI B IS^FX^^14;5^D ^LRBLAGG
"^DD",63,63.01,145,.1)
Pt cells saline suspension + Anti B immediatee spin
"^DD",63,63.01,145,3)

"^DD",63,63.01,145,4)
D LST^LRBLAGG
"^DD",63,63.01,145,"DT")
2841021
"^DD",63,63.01,146,0)
PT CELLS+ANTI B SLIDE^S^P:AGGLUTINATION;N:NO AGGLUTINATION;^14;6^Q
"^DD",63,63.01,146,3)

"^DD",63,63.01,146,"DT")
2840227
"^DD",63,63.01,147,0)
PT CELLS(ser)+ANTI A,B IS^RFX^^14;7^D ^LRBLAGG
"^DD",63,63.01,147,.1)
Pt cells serum or plasma susp + Anti A,B immediate spin
"^DD",63,63.01,147,3)

"^DD",63,63.01,147,4)
D LST^LRBLAGG
"^DD",63,63.01,147,"DT")
2841021
"^DD",63,63.01,148,0)
PT CELLS(ser)+ANTI A,B (RT)^FX^^14;8^D ^LRBLAGG
"^DD",63,63.01,148,.1)
Pt cells serum or plasma susp + Anti A,B room temp incubation
"^DD",63,63.01,148,3)

"^DD",63,63.01,148,4)
D LST^LRBLAGG
"^DD",63,63.01,148,"DT")
2841021
"^DD",63,63.01,149,0)
PT CELLS(sal)+ANTI A,B (IS)^FX^^14;9^D ^LRBLAGG
"^DD",63,63.01,149,.1)
Pt cells saline suspension + Anti A,B immediate spin
"^DD",63,63.01,149,3)

"^DD",63,63.01,149,4)
D LST^LRBLAGG
"^DD",63,63.01,149,"DT")
2841021
"^DD",63,63.01,149.1,0)
PT CELLS(sal)+ANTI A,B (RT)^FX^^14;10^D ^LRBLAGG
"^DD",63,63.01,149.1,.1)
Pt cells saline susp + Anti A,B room temperature incubation
"^DD",63,63.01,149.1,3)

"^DD",63,63.01,149.1,4)
D LST^LRBLAGG
"^DD",63,63.01,149.1,"DT")
2841021
"^DD",63,63.01,149.11,0)
PT CELLS+ANTI A,B SLIDE^S^P:AGGLUTINATION;N:NO AGGLUTINATION;^14;11^Q
"^DD",63,63.01,149.11,.1)
Pt cells + Anti A,B Slide test
"^DD",63,63.01,149.11,3)

"^DD",63,63.01,149.11,"DT")
2840227
"^DD",63,63.01,149.12,0)
PT SERUM+A1 CELLS^RFX^^14;12^D ^LRBLAGG
"^DD",63,63.01,149.12,3)

"^DD",63,63.01,149.12,4)
D LST^LRBLAGG
"^DD",63,63.01,149.12,"DT")
2841021
"^DD",63,63.01,149.13,0)
PT SERUM+B CELLS^RFX^^14;13^D ^LRBLAGG
"^DD",63,63.01,149.13,3)

"^DD",63,63.01,149.13,4)
D LST^LRBLAGG
"^DD",63,63.01,149.13,"DT")
2841021
"^DD",63,63.01,151,0)
INTERPRETATION OF ABO TESTING^RS^A:A;B:B;AB:AB;O:O;^15;1^Q
"^DD",63,63.01,151,"DT")
2840724
"^DD",63,63.01,152,0)
ABO TESTING COMMENT^F^^15;2^K:$L(X)>80!($L(X)<2) X
"^DD",63,63.01,152,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.01,152,"DT")
2840227
"^DD",63,63.01,153,0)
INTERPRETATION ABO GROUP(cell)^S^A:A;B:B;O:O;AB:AB;^15;3^Q
"^DD",63,63.01,153,21,0)
^^2^2^2911127^
"^DD",63,63.01,153,21,1,0)
This is the interpretation of the patient's ABO 
"^DD",63,63.01,153,21,2,0)
group(cell).
"^DD",63,63.01,153,"DT")
2840314
"^DD",63,63.01,154,0)
INTERPRETATION ABO GROUP(ser)^S^A:A;B:B;O:O;AB:AB;^15;4^Q
"^DD",63,63.01,154,3)

"^DD",63,63.01,154,21,0)
^^2^2^2911127^
"^DD",63,63.01,154,21,1,0)
This is the interpretation of the patient's ABO
"^DD",63,63.01,154,21,2,0)
type.
"^DD",63,63.011,0)
RBC ANTIGEN PRESENT SUB-FIELD^^.02^2
"^DD",63,63.011,0,"NM","RBC ANTIGEN PRESENT")

"^DD",63,63.011,0,"UP")
63.01
"^DD",63,63.011,.01,0)
RBC ANTIGEN PRESENT^M*P61.3'X^LAB(61.3,^0;1^S DIC("W")="W "" "",$P(^(0),U,2),"" "",$P(^(0),U)",DIC("S")="I $P(^(0),U,5)=""AN""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.011,.01,1,0)
^.1^^0
"^DD",63,63.011,.01,12)
Limits input to only entries that are RBC Antigens.
"^DD",63,63.011,.01,12.1)
S DIC("S")="I $P(^(0),U,5)=""AN"""
"^DD",63,63.011,.01,21,0)
^^1^1^2901028^
"^DD",63,63.011,.01,21,1,0)
Antigens present on RBC's of patient are entered here.
"^DD",63,63.011,.01,"DT")
2990521
"^DD",63,63.011,.02,0)
COMMENT^F^^0;2^K:$L(X)>80!($L(X)<1) X
"^DD",63,63.011,.02,3)
Answer must be 1-80 characters in length.
"^DD",63,63.011,.02,21,0)
^^1^1^2940510^
"^DD",63,63.011,.02,21,1,0)
Comment field
"^DD",63,63.011,.02,"DT")
2901028
"^DD",63,63.0112,0)
RBC ANTIGEN ABSENT SUB-FIELD^^.02^2
"^DD",63,63.0112,0,"NM","RBC ANTIGEN ABSENT")

"^DD",63,63.0112,0,"UP")
63.01
"^DD",63,63.0112,.01,0)
RBC ANTIGEN ABSENT^M*P61.3'X^LAB(61.3,^0;1^S DIC("W")="W "" "",$P(^(0),U,2),"" "",$P(^(0),U)",DIC("S")="I $P(^(0),U,5)=""AN""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.0112,.01,1,0)
^.1^^0
"^DD",63,63.0112,.01,12)
Limits input to only entries that are RBC Antigens.
"^DD",63,63.0112,.01,12.1)
S DIC("S")="I $P(^(0),U,5)=""AN"""
"^DD",63,63.0112,.01,21,0)
^^1^1^2901028^
"^DD",63,63.0112,.01,21,1,0)
Antigens identified as absent on red blood cells are entered here.
"^DD",63,63.0112,.01,"DT")
2990521
"^DD",63,63.0112,.02,0)
COMMENT^F^^0;2^K:$L(X)>80!($L(X)<1) X
"^DD",63,63.0112,.02,3)
Answer must be 1-80 characters in length.
"^DD",63,63.0112,.02,21,0)
^^1^1^2940510^
"^DD",63,63.0112,.02,21,1,0)
Comment field
"^DD",63,63.0112,.02,"DT")
2901028
"^DD",63,63.0114,0)
HLA ANTIGEN ABSENT SUB-FIELD^^.02^2
"^DD",63,63.0114,0,"NM","HLA ANTIGEN ABSENT")

"^DD",63,63.0114,0,"UP")
63.01
"^DD",63,63.0114,.01,0)
HLA ANTIGEN ABSENT^M*P61.3'X^LAB(61.3,^0;1^S DIC("W")="W "" "",$P(^(0),U,2),"" "",$P(^(0),U)",DIC("S")="I $P(^(0),U,5)=""HL""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.0114,.01,1,0)
^.1^^0
"^DD",63,63.0114,.01,12)
Limits input to only entries that are HLA Antigens
"^DD",63,63.0114,.01,12.1)
S DIC("S")="I $P(^(0),U,5)=""HL"""
"^DD",63,63.0114,.01,21,0)
^^1^1^2901028^
"^DD",63,63.0114,.01,21,1,0)
HLA antigens absent on WBC's are entered here.
"^DD",63,63.0114,.01,"DT")
2990521
"^DD",63,63.0114,.02,0)
COMMENT^F^^0;2^K:$L(X)>80!($L(X)<1) X
"^DD",63,63.0114,.02,3)
Answer must be 1-80 characters in length.
"^DD",63,63.0114,.02,21,0)
^^1^1^2940510^
"^DD",63,63.0114,.02,21,1,0)
Comment field
"^DD",63,63.0114,.02,"DT")
2901028
"^DD",63,63.012,0)
ELUATE ANTIBODY SUB-FIELD^NL^.01^1
"^DD",63,63.012,0,"NM","ELUATE ANTIBODY")

"^DD",63,63.012,0,"UP")
63.01
"^DD",63,63.012,.01,0)
ELUATE ANTIBODY^M*P61.3'X^LAB(61.3,^0;1^S DIC("W")="W ""  "",$P(^(0),U,2),""  "",$P(^(0),U,1)",DIC("S")="I $P(^(0),U,5)=""AB""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.012,.01,12)
Select only Blood group Antibodies
"^DD",63,63.012,.01,12.1)
S DIC("S")="I $P(^(0),U,5)=""AB"""
"^DD",63,63.012,.01,21,0)
^^1^1^2911126^
"^DD",63,63.012,.01,21,1,0)
This is the eluate antibody.
"^DD",63,63.012,.01,"DT")
2990521
"^DD",63,63.013,0)
HLA ANTIGEN PRESENT SUB-FIELD^^.02^2
"^DD",63,63.013,0,"NM","HLA ANTIGEN PRESENT")

"^DD",63,63.013,0,"UP")
63.01
"^DD",63,63.013,.01,0)
HLA ANTIGEN PRESENT^M*P61.3'X^LAB(61.3,^0;1^S DIC("W")="W "" "",$P(^(0),U,2),"" "",$P(^(0),U)",DIC("S")="I $P(^(0),U,5)=""HL""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.013,.01,1,0)
^.1^^0
"^DD",63,63.013,.01,12)
Limits input to only entries that are HLA Antigens
"^DD",63,63.013,.01,12.1)
S DIC("S")="I $P(^(0),U,5)=""HL"""
"^DD",63,63.013,.01,21,0)
^^1^1^2901028^
"^DD",63,63.013,.01,21,1,0)
HLA antigens present on WBC's are entered here.
"^DD",63,63.013,.01,"DT")
2990521
"^DD",63,63.013,.02,0)
COMMENT^F^^0;2^K:$L(X)>80!($L(X)<1) X
"^DD",63,63.013,.02,3)
Answer must be 1-80 characters in length.
"^DD",63,63.013,.02,21,0)
^^1^1^2940510^
"^DD",63,63.013,.02,21,1,0)
Comment field
"^DD",63,63.013,.02,"DT")
2901028
"^DD",63,63.014,0)
SCREEN CELL METHOD SUB-FIELD^NL^1^3
"^DD",63,63.014,0,"NM","SCREEN CELL METHOD")

"^DD",63,63.014,0,"UP")
63.01
"^DD",63,63.014,.01,0)
SCREEN CELL METHOD^MS^S:SALINE;A:ALBUMIN;P:PAPAIN;F:FICIN;L:LISS;H:LISH;^0;1^Q
"^DD",63,63.014,.01,.1)
Cell suspension media (LISH=low ionic strength high mol wt)
"^DD",63,63.014,.01,3)
LISH=low ionic strength high molecular weight
"^DD",63,63.014,.01,21,0)
^^1^1^2911126^
"^DD",63,63.014,.01,21,1,0)
This is the screen cell method.
"^DD",63,63.014,.01,"DT")
2861220
"^DD",63,63.014,.02,0)
TECHNIQUE^S^T:TUBE;M:MICROPLATE;A:AUTOMATED;^0;2^Q
"^DD",63,63.014,.02,21,0)
^^1^1^2911126^
"^DD",63,63.014,.02,21,1,0)
This is the screen cell technique.
"^DD",63,63.014,.02,"DT")
2841101
"^DD",63,63.014,1,0)
SCREEN CELL^63.015SA^^1;0
"^DD",63,63.014,1,21,0)
^^1^1^2911127^^
"^DD",63,63.014,1,21,1,0)
These are the screen cells.
"^DD",63,63.015,0)
SCREEN CELL SUB-FIELD^NL^.1^10
"^DD",63,63.015,0,"NM","SCREEN CELL")

"^DD",63,63.015,0,"UP")
63.014
"^DD",63,63.015,.01,0)
SCREEN CELL^MSX^1:1;2:2;3:3;^0;1^I $D(X) S DINUM=X
"^DD",63,63.015,.01,21,0)
^^1^1^2911127^^
"^DD",63,63.015,.01,21,1,0)
This is the screen cell used.
"^DD",63,63.015,.01,"DT")
2841021
"^DD",63,63.015,.02,0)
SOURCE^P66'^LAB(66,^0;2^Q
"^DD",63,63.015,.02,21,0)
^^1^1^2911127^
"^DD",63,63.015,.02,21,1,0)
This is the source of the screen cells.
"^DD",63,63.015,.02,"DT")
2841021
"^DD",63,63.015,.03,0)
INTERPRETATION^S^N:NEGATIVE;P:POSITIVE;^0;3^Q
"^DD",63,63.015,.03,21,0)
^^1^1^2911127^
"^DD",63,63.015,.03,21,1,0)
This is the interpretation of the screen cells.
"^DD",63,63.015,.03,"DT")
2841021
"^DD",63,63.015,.04,0)
IS^FX^^0;4^D ^LRBLAGG
"^DD",63,63.015,.04,.1)
Immediate spin
"^DD",63,63.015,.04,3)

"^DD",63,63.015,.04,4)
D LST^LRBLAGG
"^DD",63,63.015,.04,"DT")
2841021
"^DD",63,63.015,.05,0)
37 C^FX^^0;5^D ^LRBLAGG
"^DD",63,63.015,.05,.1)
37 degrees centigrade
"^DD",63,63.015,.05,3)

"^DD",63,63.015,.05,4)
D LST^LRBLAGG
"^DD",63,63.015,.05,"DT")
2841021
"^DD",63,63.015,.06,0)
AHG^FX^^0;6^D ^LRBLAGG
"^DD",63,63.015,.06,.1)
Anti-human globulin
"^DD",63,63.015,.06,3)

"^DD",63,63.015,.06,4)
D LST^LRBLAGG
"^DD",63,63.015,.06,"DT")
2841021
"^DD",63,63.015,.07,0)
CONTROL CELL^FX^^0;7^D ^LRBLAGG
"^DD",63,63.015,.07,.1)
Antibody coated control cell
"^DD",63,63.015,.07,3)

"^DD",63,63.015,.07,4)
D LST^LRBLAGG
"^DD",63,63.015,.07,"DT")
2841021
"^DD",63,63.015,.08,0)
ROOM TEMP^FX^^0;8^D ^LRBLAGG
"^DD",63,63.015,.08,.1)
22-24 degrees centigrade
"^DD",63,63.015,.08,3)

"^DD",63,63.015,.08,4)
D LST^LRBLAGG
"^DD",63,63.015,.08,"DT")
2841021
"^DD",63,63.015,.09,0)
12-18 C^FX^^0;9^D ^LRBLAGG
"^DD",63,63.015,.09,.1)
12-18 degrees centigrade
"^DD",63,63.015,.09,3)

"^DD",63,63.015,.09,4)
D LST^LRBLAGG
"^DD",63,63.015,.09,"DT")
2841021
"^DD",63,63.015,.1,0)
4 C^FX^^0;10^D ^LRBLAGG
"^DD",63,63.015,.1,.1)
4 degrees centigrade
"^DD",63,63.015,.1,3)

"^DD",63,63.015,.1,4)
D LST^LRBLAGG
"^DD",63,63.015,.1,"DT")
2841021
"^DD",63,63.016,0)
RBC ANTIGENS ABSENT(other) SUB-FIELD^NL^.02^2
"^DD",63,63.016,0,"NM","RBC ANTIGENS ABSENT(other)")

"^DD",63,63.016,0,"UP")
63
"^DD",63,63.016,.01,0)
RBC ANTIGENS ABSENT^M*P61.3'X^LAB(61.3,^0;1^S DIC("S")="I $P(^(0),U,5)=""AN""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X I $D(X) S DINUM=X
"^DD",63,63.016,.01,12)
SELECTS ONLY ANTIGENS
"^DD",63,63.016,.01,12.1)
S DIC("S")="I $P(^(0),U,5)=""AN"""
"^DD",63,63.016,.01,21,0)
^^2^2^2920203^^
"^DD",63,63.016,.01,21,1,0)
This is a red blood cell antigen that is absent for
"^DD",63,63.016,.01,21,2,0)
this patient.
"^DD",63,63.016,.01,"DT")
2850811
"^DD",63,63.016,.02,0)
RBC ANTIGENS ABSENT COMMENT^F^^0;2^K:$L(X)>80!($L(X)<2) X
"^DD",63,63.016,.02,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.016,.02,21,0)
^^1^1^2920203^^^
"^DD",63,63.016,.02,21,1,0)
This is the comment on the absent antigen.
"^DD",63,63.016,.02,"DT")
2860602
"^DD",63,63.017,0)
TRANSFUSION RECORD SUB-FIELD^NL^2^13
"^DD",63,63.017,0,"DT")
2921211
"^DD",63,63.017,0,"ID",.02)
W "   ",$S($D(^LAB(66,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),@("$E("_DIC_"Y,0),0)")
"^DD",63,63.017,0,"ID",.03)
W "   ",$P(^(0),U,3)
"^DD",63,63.017,0,"NM","TRANSFUSION RECORD")

"^DD",63,63.017,0,"UP")
63
"^DD",63,63.017,.01,0)
TRANSFUSION DATE/TIME^MDX^^0;1^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X) S X(1)=9999999-Y X:$D(^LR(DA(1),1.6,X(1))) ^DD(63.017,.01,9.2) S DINUM=X(1)
"^DD",63,63.017,.01,3)

"^DD",63,63.017,.01,9.2)
F X(2)=0:0 S X(1)=X(1)-.00001 Q:'$D(^LR(DA(1),1.6,X(1)))
"^DD",63,63.017,.01,21,0)
^^1^1^2911126^^^^
"^DD",63,63.017,.01,21,1,0)
This is a reverse chronological order of blood components transfused.
"^DD",63,63.017,.01,"DT")
2850808
"^DD",63,63.017,.02,0)
COMPONENT^R*P66'X^LAB(66,^0;2^S DIC("S")="I $P(^(0),U,4)=""BB""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) LR=X
"^DD",63,63.017,.02,12)
Selects only blood components that can be transfused
"^DD",63,63.017,.02,12.1)
S DIC("S")="I $P(^(0),U,4)=""BB"""
"^DD",63,63.017,.02,21,0)
^^1^1^2920203^^
"^DD",63,63.017,.02,21,1,0)
This is the component transfused.
"^DD",63,63.017,.02,"DT")
2870730
"^DD",63,63.017,.03,0)
COMPONENT ID^RFX^^0;3^K:$L(X)>13!($L(X)<2) X D:$D(X) EN^LRBLU
"^DD",63,63.017,.03,3)
ANSWER MUST BE 2-13 CHARACTERS IN LENGTH
"^DD",63,63.017,.03,21,0)
^^1^1^2920203^^^
"^DD",63,63.017,.03,21,1,0)
This is the component identification number.
"^DD",63,63.017,.03,"DT")
3001024
"^DD",63,63.017,.04,0)
ENTERING PERSON^P200'^VA(200,^0;4^Q
"^DD",63,63.017,.04,3)

"^DD",63,63.017,.04,21,0)
^^2^2^2920203^^
"^DD",63,63.017,.04,21,1,0)
This is the person entering information on the
"^DD",63,63.017,.04,21,2,0)
transfusion.
"^DD",63,63.017,.04,"DT")
2870504
"^DD",63,63.017,.05,0)
ABO^S^A:A;B:B;AB:AB;O:O;^0;5^Q
"^DD",63,63.017,.05,21,0)
^^1^1^2850602^
"^DD",63,63.017,.05,21,1,0)
ABO group of component
"^DD",63,63.017,.05,"DT")
2850602
"^DD",63,63.017,.06,0)
RH^S^POS:POSITIVE;NEG:NEGATIVE;^0;6^Q
"^DD",63,63.017,.06,21,0)
^^1^1^2850602^
"^DD",63,63.017,.06,21,1,0)
Rh type of component
"^DD",63,63.017,.06,"DT")
2850602
"^DD",63,63.017,.07,0)
UNITS POOLED^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.017,.07,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99
"^DD",63,63.017,.07,21,0)
^^1^1^2920203^^
"^DD",63,63.017,.07,21,1,0)
This is the number of units pooled.
"^DD",63,63.017,.07,"DT")
2851107
"^DD",63,63.017,.08,0)
TRANSFUSION REACTION^S^1:YES;0:NO;^0;8^Q
"^DD",63,63.017,.08,21,0)
^^2^2^2920203^^
"^DD",63,63.017,.08,21,1,0)
YES indicates a transfusion reaction was associated
"^DD",63,63.017,.08,21,2,0)
with this transfusion.
"^DD",63,63.017,.08,"DT")
2860204
"^DD",63,63.017,.09,0)
DATA ENTERED VIA OLD RECORDS^S^1:YES;^0;9^Q
"^DD",63,63.017,.09,21,0)
^^2^2^2870730^
"^DD",63,63.017,.09,21,1,0)
If transfusion data entered in the transfusion record via previous
"^DD",63,63.017,.09,21,2,0)
 records option then a 'YES' will be entered here.
"^DD",63,63.017,.09,"DT")
2870730
"^DD",63,63.017,.1,0)
VOL(ml) TRANSFUSED^NJ4,0^^0;10^K:+X'=X!(X>1000)!(X<1)!(X?.E1"."1N.N) X
"^DD",63,63.017,.1,3)
Type a Number between 1 and 1000, 0 Decimal Digits
"^DD",63,63.017,.1,21,0)
^^1^1^2880608^
"^DD",63,63.017,.1,21,1,0)
Enter in milliliters the volume of the unit transfused
"^DD",63,63.017,.1,"DT")
2880608
"^DD",63,63.017,.11,0)
TRANSFUSION REACTION TYPE^*P65.4'^LAB(65.4,^0;11^S DIC("S")="I $P(^(0),U,2)=""T""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.017,.11,1,0)
^.1
"^DD",63,63.017,.11,1,1,0)
63^AB^MUMPS
"^DD",63,63.017,.11,1,1,1)
S ^LR("AB",DA(1),X,DA)=""
"^DD",63,63.017,.11,1,1,2)
K ^LR("AB",DA(1),X,DA)
"^DD",63,63.017,.11,1,1,"%D",0)
^^1^1^2921214^
"^DD",63,63.017,.11,1,1,"%D",1,0)
Transfusion reaction type by patient
"^DD",63,63.017,.11,1,1,"DT")
2921214
"^DD",63,63.017,.11,12)
Selects transfusion reaction type
"^DD",63,63.017,.11,12.1)
S DIC("S")="I $P(^(0),U,2)=""T"""
"^DD",63,63.017,.11,21,0)
^^1^1^2921211^
"^DD",63,63.017,.11,21,1,0)
Indicates type of transfusion reaction
"^DD",63,63.017,.11,"DT")
2921214
"^DD",63,63.017,1,0)
TRANSFUSION COMMENT^63.186A^^1;0
"^DD",63,63.017,1,21,0)
^^1^1^2920203^^^
"^DD",63,63.017,1,21,1,0)
These are comments on the transfusion.
"^DD",63,63.017,2,0)
CROSSMATCH COMMENT^63.027A^^2;0
"^DD",63,63.017,2,21,0)
^^1^1^2920203^^
"^DD",63,63.017,2,21,1,0)
These are comments on the crossmatch.
"^DD",63,63.0171,0)
TRANSFUSION REACTION DATE SUB-FIELD^^1^4
"^DD",63,63.0171,0,"DT")
2921213
"^DD",63,63.0171,0,"NM","TRANSFUSION REACTION DATE")

"^DD",63,63.0171,0,"UP")
63
"^DD",63,63.0171,.01,0)
TRANSFUSION REACTION DATE^MDX^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X S:$D(X) DINUM=9999999-X
"^DD",63,63.0171,.01,1,0)
^.1^^0
"^DD",63,63.0171,.01,21,0)
^^2^2^2921230^^
"^DD",63,63.0171,.01,21,1,0)
Transfusion reactions that cannot be assigned to a specific unit 
"^DD",63,63.0171,.01,21,2,0)
are entered here.
"^DD",63,63.0171,.01,"DT")
2930628
"^DD",63,63.0171,.02,0)
TRANSFUSION REACTION TYPE^R*P65.4'^LAB(65.4,^0;2^S DIC("S")="I $P(^(0),U,2)=""T""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.0171,.02,1,0)
^.1
"^DD",63,63.0171,.02,1,1,0)
63^AR^MUMPS
"^DD",63,63.0171,.02,1,1,1)
S ^LR("AR",DA(1),X,DA)=""
"^DD",63,63.0171,.02,1,1,2)
K ^LR("AR",DA(1),X,DA)
"^DD",63,63.0171,.02,1,1,"%D",0)
^^2^2^2921230^
"^DD",63,63.0171,.02,1,1,"%D",1,0)
Cross reference for identifying transfusion reactions not able 
"^DD",63,63.0171,.02,1,1,"%D",2,0)
to be identified with a specific unit.
"^DD",63,63.0171,.02,1,1,"DT")
2921230
"^DD",63,63.0171,.02,12)
Selects only transfusion reaction entries
"^DD",63,63.0171,.02,12.1)
S DIC("S")="I $P(^(0),U,2)=""T"""
"^DD",63,63.0171,.02,21,0)
^^1^1^2921213^
"^DD",63,63.0171,.02,21,1,0)
Stores the type of transfusion reaction
"^DD",63,63.0171,.02,"DT")
2921230
"^DD",63,63.0171,.03,0)
PERSON ENTERING REACTION^RP200'^VA(200,^0;3^Q
"^DD",63,63.0171,.03,21,0)
^^1^1^2921213^
"^DD",63,63.0171,.03,21,1,0)
Person entering reaction information
"^DD",63,63.0171,.03,"DT")
2921213
"^DD",63,63.0171,1,0)
TRANSFUSION REACTION COMMENT^63.172A^^1;0
"^DD",63,63.0171,1,21,0)
^^1^1^2940510^
"^DD",63,63.0171,1,21,1,0)
Multiple for transfusion reaction comment
"^DD",63,63.018,0)
RBC TYPING METHOD SUB-FIELD^NL^1^3
"^DD",63,63.018,0,"NM","RBC TYPING METHOD")

"^DD",63,63.018,0,"UP")
63.01
"^DD",63,63.018,.01,0)
RBC TYPING METHOD^S^S:SALINE;M:SERUM;^0;1^Q
"^DD",63,63.018,.01,21,0)
^^1^1^2911127^
"^DD",63,63.018,.01,21,1,0)
This is the method used for RBC typing.
"^DD",63,63.018,.01,"DT")
2841101
"^DD",63,63.018,.02,0)
TECHNIQUE^S^S:SLIDE;T:TUBE;A:AUTOMATED;M:MICROPLATE;^0;2^Q
"^DD",63,63.018,.02,21,0)
^^1^1^2911203^^
"^DD",63,63.018,.02,21,1,0)
This is the technique of RBC typing.
"^DD",63,63.018,.02,"DT")
2841101
"^DD",63,63.018,1,0)
ANTISERUM^63.019PA^^1;0
"^DD",63,63.018,1,12)
SELECTS ONLY ANTISERA
"^DD",63,63.018,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""AB"""
"^DD",63,63.018,1,21,0)
^^1^1^2911203^^^
"^DD",63,63.018,1,21,1,0)
These are the antiserums used for RBC typing.
"^DD",63,63.019,0)
ANTISERUM SUB-FIELD^NL^.1^10
"^DD",63,63.019,0,"NM","ANTISERUM")

"^DD",63,63.019,0,"UP")
63.018
"^DD",63,63.019,.01,0)
ANTISERUM^M*P66'^LAB(66,^0;1^S DIC("S")="I $P(^(0),U,4)=""AB""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.019,.01,21,0)
^^1^1^2911127^
"^DD",63,63.019,.01,21,1,0)
This is the antiserum used for RBC typing.
"^DD",63,63.019,.01,"DT")
2841102
"^DD",63,63.019,.02,0)
LOT #^F^^0;2^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.019,.02,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63.019,.02,21,0)
^^1^1^2911203^^
"^DD",63,63.019,.02,21,1,0)
This is the lot number of the antiserum.
"^DD",63,63.019,.02,"DT")
2841102
"^DD",63,63.019,.03,0)
INTERPRETATION^RS^P:POSITIVE;N:NEGATIVE;U:UNCERTAIN;^0;3^Q
"^DD",63,63.019,.03,21,0)
^^1^1^2911203^^
"^DD",63,63.019,.03,21,1,0)
This is the patient's antiserum interpretation.
"^DD",63,63.019,.03,"DT")
2841102
"^DD",63,63.019,.04,0)
IS^FX^^0;4^D ^LRBLAGG
"^DD",63,63.019,.04,.1)
Immediate spin
"^DD",63,63.019,.04,3)

"^DD",63,63.019,.04,4)
D LST^LRBLAGG
"^DD",63,63.019,.04,"DT")
2841102
"^DD",63,63.019,.05,0)
37 C^FX^^0;5^D ^LRBLAGG
"^DD",63,63.019,.05,.1)
37 degrees centigrade
"^DD",63,63.019,.05,3)

"^DD",63,63.019,.05,4)
D LST^LRBLAGG
"^DD",63,63.019,.05,"DT")
2841102
"^DD",63,63.019,.06,0)
AHG^FX^^0;6^D ^LRBLAGG
"^DD",63,63.019,.06,.1)
Anti-human globulin
"^DD",63,63.019,.06,3)

"^DD",63,63.019,.06,4)
D LST^LRBLAGG
"^DD",63,63.019,.06,"DT")
2841102
"^DD",63,63.019,.07,0)
CONTROL CELL^FX^^0;7^D ^LRBLAGG
"^DD",63,63.019,.07,.1)
Antibody coated control cell
"^DD",63,63.019,.07,3)

"^DD",63,63.019,.07,4)
D LST^LRBLAGG
"^DD",63,63.019,.07,"DT")
2841102
"^DD",63,63.019,.08,0)
ROOM TEMP^FX^^0;8^D ^LRBLAGG
"^DD",63,63.019,.08,.1)
22-24 degrees centigrade
"^DD",63,63.019,.08,3)

"^DD",63,63.019,.08,4)
D LST^LRBLAGG
"^DD",63,63.019,.08,"DT")
2841102
"^DD",63,63.019,.09,0)
12-18 C^FX^^0;9^D ^LRBLAGG
"^DD",63,63.019,.09,.1)
12-18 degrees centigrade
"^DD",63,63.019,.09,3)

"^DD",63,63.019,.09,4)
D LST^LRBLAGG
"^DD",63,63.019,.09,"DT")
2841102
"^DD",63,63.019,.1,0)
4 C^FX^^0;10^D ^LRBLAGG
"^DD",63,63.019,.1,.1)
4 degrees centigrade
"^DD",63,63.019,.1,3)

"^DD",63,63.019,.1,4)
D LST^LRBLAGG
"^DD",63,63.019,.1,"DT")
2841102
"^DD",63,63.02,0)
EM SUB-FIELD^NL^2005^36
"^DD",63,63.02,0,"DT")
3030924
"^DD",63,63.02,0,"NM","EM")

"^DD",63,63.02,0,"UP")
63
"^DD",63,63.02,.01,0)
DATE/TIME SPECIMEN TAKEN^MRDXO^^0;1^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y,DINUM=9999999-Y K:Y<1 X
"^DD",63,63.02,.01,2)
S Y(0)=Y D D^LRU W ?0,"-------------------------------------------------------------------------------"
"^DD",63,63.02,.01,2.1)
D D^LRU W ?0,"-------------------------------------------------------------------------------"
"^DD",63,63.02,.01,21,0)
^^1^1^2911127^
"^DD",63,63.02,.01,21,1,0)
This is the date/time of collection of the EM specimen.
"^DD",63,63.02,.01,"DT")
2850302
"^DD",63,63.02,.011,0)
SPECIMEN SUBMITTED BY^F^^0;5^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.02,.011,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63.02,.011,21,0)
^^1^1^2911127^
"^DD",63,63.02,.011,21,1,0)
This is the person submitting the specimen.
"^DD",63,63.02,.011,"DT")
2850302
"^DD",63,63.02,.012,0)
SPECIMEN^63.202A^^.1;0
"^DD",63,63.02,.012,21,0)
^.001^1^1^3030306^^^^
"^DD",63,63.02,.012,21,1,0)
These are the specimens submitted for testing.
"^DD",63,63.02,.013,0)
BRIEF CLINICAL HISTORY^63.213^^.2;0
"^DD",63,63.02,.013,21,0)
^^1^1^2911127^
"^DD",63,63.02,.013,21,1,0)
This is the brief clinical history for this specimen.
"^DD",63,63.02,.014,0)
PREOPERATIVE DIAGNOSIS^63.214A^^.3;0
"^DD",63,63.02,.014,21,0)
^^1^1^2911127^
"^DD",63,63.02,.014,21,1,0)
This is the pre-operative diagnosis for this specimen.
"^DD",63,63.02,.015,0)
OPERATIVE FINDINGS^63.205A^^.4;0
"^DD",63,63.02,.015,21,0)
^^1^1^2911127^
"^DD",63,63.02,.015,21,1,0)
These are the operative findings for this specimen.
"^DD",63,63.02,.016,0)
POSTOPERATIVE DIAGNOSIS^63.206A^^.5;0
"^DD",63,63.02,.016,21,0)
^^1^1^2911127^
"^DD",63,63.02,.016,21,1,0)
This is the post-operative diagnosis for this specimen.
"^DD",63,63.02,.02,0)
PATHOLOGIST^*P200'X^VA(200,^0;2^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.02,.02,12)
Selection must be made from active PROVIDERS who hold the PROVIDER security key.
"^DD",63,63.02,.02,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63.02,.02,21,0)
^^1^1^2911127^
"^DD",63,63.02,.02,21,1,0)
This is the pathologist performing the procedure.
"^DD",63,63.02,.02,"DT")
2910630
"^DD",63,63.02,.021,0)
RESIDENT OR EMTECH^P200'^VA(200,^0;4^Q
"^DD",63,63.02,.021,21,0)
^^2^2^2911127^
"^DD",63,63.02,.021,21,1,0)
This is the resident pathologist or the EM
"^DD",63,63.02,.021,21,2,0)
technologist performing the test.
"^DD",63,63.02,.021,"DT")
2910630
"^DD",63,63.02,.03,0)
DATE REPORT COMPLETED^DX^^0;3^S %DT="EX" D ^%DT S X=Y K:Y<1 X I $D(X),X<$P($P(^LR(DA(1),"EM",DA,0),U,10),".") K X W !,"Report date completed must be after date received"
"^DD",63,63.02,.03,21,0)
^^1^1^2911127^
"^DD",63,63.02,.03,21,1,0)
This is the date the report was completed.
"^DD",63,63.02,.03,"DT")
2900312
"^DD",63,63.02,.06,0)
EM ACC #^RFIX^^0;6^K:$L(X)>15!($L(X)<5)!'(X?1ANP.ANP1" "2N1" "1N.N) X I $D(X),$D(LRAD),$D(LRABV),$D(^LR("AEMA",$E(LRAD,1,3),LRABV,X)) W $C(7),!,X," is already taken for ",LRABV,! K X
"^DD",63,63.02,.06,1,0)
^.1
"^DD",63,63.02,.06,1,1,0)
63^AEMA^MUMPS
"^DD",63,63.02,.06,1,1,1)
S X(1)=$S($D(LRAD):LRAD,1:$P(^LR(DA(1),"EM",DA,0),U,10)),X(2)=$S($D(LRABV):LRABV,1:$P(^LR(DA(1),"EM",DA,0),U,6)) S:X(1)&(X(2)]"") ^LR("AEMA",$E(X(1),1,3),X(2),$P(X," ",3),DA(1),DA)=""
"^DD",63,63.02,.06,1,1,2)
S X(1)=$S($D(LRAD):LRAD,1:$P(^LR(DA(1),"EM",DA,0),U,10)),X(2)=$S($D(LRABV):LRABV,1:$P(^LR(DA(1),"EM",0),U,6)) K:X(1)&(X(2)]"") ^LR("AEMA",$E(X(1),1,3),X(2),$P(X," ",3),DA(1),DA)
"^DD",63,63.02,.06,1,1,"%D",0)
^^1^1^2950810^^^^
"^DD",63,63.02,.06,1,1,"%D",1,0)
Cross references accessions by year and within year by accession area.
"^DD",63,63.02,.06,1,1,"DT")
2950810
"^DD",63,63.02,.06,3)
Answer must be 5-15 characters in length.
"^DD",63,63.02,.06,4)
W !,"Enter as prefix <space> yr <space> number (ex. EM 95 345)"
"^DD",63,63.02,.06,21,0)
^^2^2^2950810^^^
"^DD",63,63.02,.06,21,1,0)
This is the accession number of the electron microscopy 
"^DD",63,63.02,.06,21,2,0)
specimen.
"^DD",63,63.02,.06,"DT")
2951214
"^DD",63,63.02,.07,0)
PHYSICIAN^*P200'X^VA(200,^0;7^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.02,.07,12)
Selection must be made from active PROVIDERS who hold the PROVIDER security key.
"^DD",63,63.02,.07,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63.02,.07,21,0)
^^1^1^2911127^
"^DD",63,63.02,.07,21,1,0)
This is the requesting physician.
"^DD",63,63.02,.07,"DT")
2910630
"^DD",63,63.02,.08,0)
PATIENT LOCATION^F^^0;8^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.02,.08,3)
ANSWER MUST BE 2-30 CHARACTERS IN LENGTH
"^DD",63,63.02,.08,21,0)
^^1^1^2911127^
"^DD",63,63.02,.08,21,1,0)
This is the requesting location.
"^DD",63,63.02,.08,"DT")
2850302
"^DD",63,63.02,.09,0)
TYPIST^F^^0;9^K:$L(X)>5!($L(X)<2) X
"^DD",63,63.02,.09,3)
Answer must be 2-5 characters in length.
"^DD",63,63.02,.09,21,0)
^^1^1^2911127^
"^DD",63,63.02,.09,21,1,0)
These are the initials of the typist entering the data.
"^DD",63,63.02,.09,"DT")
2910124
"^DD",63,63.02,.1,0)
DATE/TIME SPECIMEN RECEIVED^RDX^^0;10^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X),$D(LRH(2)),LRH(2)'=$E(X,1,3) K X W !,"Year received must be same as log-in year (",LRH(2)+1700,") "
"^DD",63,63.02,.1,1,0)
^.1
"^DD",63,63.02,.1,1,1,0)
63^AEM^MUMPS
"^DD",63,63.02,.1,1,1,1)
S ^LR("AEM",$E(X,1,30),DA(1),DA)=""
"^DD",63,63.02,.1,1,1,2)
K ^LR("AEM",$E(X,1,30),DA(1),DA)
"^DD",63,63.02,.1,3)
FUTURE DATE/TIME NOT ALLOWED
"^DD",63,63.02,.1,4)
K DZ W ?5,"To delete accession enter '^'",!
"^DD",63,63.02,.1,21,0)
^^1^1^2911127^
"^DD",63,63.02,.1,21,1,0)
This is the date/time the specimen was received.
"^DD",63,63.02,.1,"DT")
2910129
"^DD",63,63.02,.11,0)
REPORT RELEASE DATE^DIX^^0;11^S %DT="ETXR",%DT(0)="N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X),X<$P($P(^LR(DA(1),"EM",DA,0),U,3),".") K X W !,"Release date must not be before completed date (" S Y=$P(^(0),U,3) D DD^%DT W Y,")"
"^DD",63,63.02,.11,3)
ONLY CURRENT DATE/TIME ALLOWED
"^DD",63,63.02,.11,4)
K DZ
"^DD",63,63.02,.11,21,0)
^^1^1^2950908^^
"^DD",63,63.02,.11,21,1,0)
YES indicates the report was released.
"^DD",63,63.02,.11,"DT")
2950908
"^DD",63,63.02,.13,0)
RELEASED BY^P200'^VA(200,^0;13^Q
"^DD",63,63.02,.13,21,0)
^^1^1^2940510^
"^DD",63,63.02,.13,21,1,0)
Who released the report
"^DD",63,63.02,.13,"DT")
2910630
"^DD",63,63.02,.14,0)
TC CODE^S^1:1;2:2;3:3;4:4;5:5;6:6;7:7;8:8;9:9;0:0;^0;14^Q
"^DD",63,63.02,.14,21,0)
^^2^2^2920326^^
"^DD",63,63.02,.14,21,1,0)
Tissue committee codes
"^DD",63,63.02,.14,21,2,0)
 The meaning of each code is identified by each site.
"^DD",63,63.02,.14,"DT")
2920326
"^DD",63,63.02,.15,0)
ORIGINAL RELEASE DATE^D^^0;15^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.02,.15,21,0)
^^2^2^2900924^
"^DD",63,63.02,.15,21,1,0)
If report was modified after release the original release date
"^DD",63,63.02,.15,21,2,0)
 is kept here.
"^DD",63,63.02,.15,"DT")
2900924
"^DD",63,63.02,.16,0)
TIU REFERENCE DATE/TIME - EM^63.49DA^^.05;0
"^DD",63,63.02,.16,21,0)
^.001^3^3^3010829^^^^
"^DD",63,63.02,.16,21,1,0)
This multiple stores TIU information for corresponding SF515 electron
"^DD",63,63.02,.16,21,2,0)
microscopy reports that have been electronically signed and stored in TIU.
"^DD",63,63.02,.16,21,3,0)
This information is used to access the reports in TIU.
"^DD",63,63.02,.16,"DT")
3010828
"^DD",63,63.02,.17,0)
DATE REPORT MODIFIED - EM^D^^.07;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.02,.17,21,0)
^^2^2^3020107^
"^DD",63,63.02,.17,21,1,0)
This is the date the report was modified if it was modified after it was
"^DD",63,63.02,.17,21,2,0)
electronically signed/released.
"^DD",63,63.02,.17,"DT")
3011130
"^DD",63,63.02,.171,0)
PERSON MODIFYING TEXT^P200'^VA(200,^.07;2^Q
"^DD",63,63.02,.171,21,0)
^^2^2^3020107^
"^DD",63,63.02,.171,21,1,0)
Stores the DUZ of the person who modified the report AFTER it was
"^DD",63,63.02,.171,21,2,0)
electronically signed/released.
"^DD",63,63.02,.171,"DT")
3011130
"^DD",63,63.02,.172,0)
DIAGNOSIS MODIFIED^S^1:YES;0:NO;^.07;3^Q
"^DD",63,63.02,.172,21,0)
^^1^1^3020107^
"^DD",63,63.02,.172,21,1,0)
1 = Diagnosis modified AFTER report was electronically signed/released.
"^DD",63,63.02,.172,"DT")
3011130
"^DD",63,63.02,.97,0)
DELAYED REPORT COMMENT^63.0297A^^97;0
"^DD",63,63.02,.97,21,0)
^^2^2^2930927^
"^DD",63,63.02,.97,21,1,0)
If a report is delayed, reason(s) for delay may be entered here. 
"^DD",63,63.02,.97,21,2,0)
They will appear on the log book report and the clinician screen display.
"^DD",63,63.02,.99,0)
COMMENT^63.208A^^99;0
"^DD",63,63.02,.99,21,0)
^^1^1^2911127^
"^DD",63,63.02,.99,21,1,0)
These are comments on this specimen.
"^DD",63,63.02,1,0)
GROSS DESCRIPTION^63.201^^1;0
"^DD",63,63.02,1,21,0)
^^1^1^2911127^
"^DD",63,63.02,1,21,1,0)
This is the gross description of the specimen.
"^DD",63,63.02,1.1,0)
MICROSCOPIC EXAMINATION^63.211^^1.1;0
"^DD",63,63.02,1.1,21,0)
^^2^2^2911127^
"^DD",63,63.02,1.1,21,1,0)
This is the microscopic examination diagnosis of
"^DD",63,63.02,1.1,21,2,0)
the specimen.
"^DD",63,63.02,1.1,"DT")
2930716
"^DD",63,63.02,1.2,0)
SUPPLEMENTARY REPORT^63.207DA^^1.2;0
"^DD",63,63.02,1.2,21,0)
^^1^1^2911127^
"^DD",63,63.02,1.2,21,1,0)
These are supplementary reports.
"^DD",63,63.02,1.4,0)
EM DIAGNOSIS^63.204^^1.4;0
"^DD",63,63.02,1.4,21,0)
^^1^1^2930716^
"^DD",63,63.02,1.4,21,1,0)
Electron microscopy diagnoses are entered here.
"^DD",63,63.02,4,0)
DATE MICROSCOPIC EXAM MODIFIED^63.242DA^^4;0
"^DD",63,63.02,4,21,0)
^^2^2^2911127^^
"^DD",63,63.02,4,21,1,0)
These are the dates of modification of the
"^DD",63,63.02,4,21,2,0)
microscopic examination/diagnosis.
"^DD",63,63.02,4,"DT")
2930716
"^DD",63,63.02,5,0)
DATE DIAGNOSIS MODIFIED^63.025DA^^5;0
"^DD",63,63.02,5,21,0)
^^1^1^2930716^
"^DD",63,63.02,5,21,1,0)
This is the date of the modification of the diagnosis field.
"^DD",63,63.02,7,0)
DATE GROSS DESCRIPTION CHANGED^63.0272DA^^7;0
"^DD",63,63.02,7,21,0)
^^1^1^2931123^^^
"^DD",63,63.02,7,21,1,0)
These are the dates of change to the gross description field.
"^DD",63,63.02,9,0)
QA CODE^63.029PA^^9;0
"^DD",63,63.02,9,12)
Selects entries with less than 3 characters
"^DD",63,63.02,9,12.1)
S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3"
"^DD",63,63.02,9,21,0)
^^1^1^2940510^
"^DD",63,63.02,9,21,1,0)
Multiple field for Quality Assurance code.
"^DD",63,63.02,10,0)
EM ORGAN/TISSUE^63.212PA^^2;0
"^DD",63,63.02,10,12)
Selects when appropriate sex related organs
"^DD",63,63.02,10,12.1)
S DIC("S")="I SEX[$P(^(0),U,3)"
"^DD",63,63.02,10,21,0)
^^1^1^2911127^
"^DD",63,63.02,10,21,1,0)
These are the organ/tissue(s) being examined.
"^DD",63,63.02,80,0)
ICD9CM CODE^63.203PA^^3;0
"^DD",63,63.02,80,21,0)
^^1^1^2911202^^
"^DD",63,63.02,80,21,1,0)
These are the ICD9CM codes on this specimen.
"^DD",63,63.02,2005,0)
IMAGE^63.22005P^^2005;0
"^DD",63,63.02,2005,21,0)
^^2^2^2950523^
"^DD",63,63.02,2005,21,1,0)
Images associated with EM reports are stored in this multiple within 
"^DD",63,63.02,2005,21,2,0)
the EM field of the Lab Data (#63) file.
"^DD",63,63.025,0)
DATE DIAGNOSIS MODIFIED SUB-FIELD^^1^3
"^DD",63,63.025,0,"DT")
2930716
"^DD",63,63.025,0,"NM","DATE DIAGNOSIS MODIFIED")

"^DD",63,63.025,0,"UP")
63.02
"^DD",63,63.025,.01,0)
DATE DIAGNOSIS MODIFIED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.025,.01,1,0)
^.1^^0
"^DD",63,63.025,.01,21,0)
^^1^1^2930716^
"^DD",63,63.025,.01,21,1,0)
This is the date of the modification of the diagnosis field.
"^DD",63,63.025,.01,"DT")
2930716
"^DD",63,63.025,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.025,.02,21,0)
^^1^1^2930716^
"^DD",63,63.025,.02,21,1,0)
This is the person modifying text.
"^DD",63,63.025,.02,"DT")
2930716
"^DD",63,63.025,1,0)
PREMODIFICATION TEXT^63.0251^^1;0
"^DD",63,63.025,1,21,0)
^^1^1^2930716^
"^DD",63,63.025,1,21,1,0)
This is the premodification text.
"^DD",63,63.0251,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.0251,0,"DT")
2930716
"^DD",63,63.0251,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.0251,0,"UP")
63.025
"^DD",63,63.0251,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.0251,.01,"DT")
2930716
"^DD",63,63.027,0)
CROSSMATCH COMMENT SUB-FIELD^^.01^1
"^DD",63,63.027,0,"NM","CROSSMATCH COMMENT")

"^DD",63,63.027,0,"UP")
63.017
"^DD",63,63.027,.01,0)
CROSSMATCH COMMENT^MF^^0;1^K:$L(X)>80!($L(X)<1) X
"^DD",63,63.027,.01,1,0)
^.1^^0
"^DD",63,63.027,.01,3)
ANSWER MUST BE 1-80 CHARACTERS IN LENGTH
"^DD",63,63.027,.01,21,0)
^^1^1^2920203^^
"^DD",63,63.027,.01,21,1,0)
This is a comment on the crossmatch.
"^DD",63,63.027,.01,"DT")
2870106
"^DD",63,63.0272,0)
DATE GROSS DESCRIPTION CHANGED SUB-FIELD^^1^3
"^DD",63,63.0272,0,"DT")
2930716
"^DD",63,63.0272,0,"NM","DATE GROSS DESCRIPTION CHANGED")

"^DD",63,63.0272,0,"UP")
63.02
"^DD",63,63.0272,.01,0)
DATE GROSS DESCRIPTION CHANGED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.0272,.01,1,0)
^.1^^0
"^DD",63,63.0272,.01,21,0)
^^1^1^2930716^
"^DD",63,63.0272,.01,21,1,0)
Dates of change of the gross description field are stored here.
"^DD",63,63.0272,.01,"DT")
2930716
"^DD",63,63.0272,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.0272,.02,21,0)
^^1^1^2930716^
"^DD",63,63.0272,.02,21,1,0)
User changing text.
"^DD",63,63.0272,.02,"DT")
2930716
"^DD",63,63.0272,1,0)
PREMODIFICATION TEXT^63.02721^^1;0
"^DD",63,63.0272,1,21,0)
^^1^1^2930716^
"^DD",63,63.0272,1,21,1,0)
This is the premodification text.
"^DD",63,63.02721,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.02721,0,"DT")
2930716
"^DD",63,63.02721,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.02721,0,"UP")
63.0272
"^DD",63,63.02721,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.02721,.01,"DT")
2930716
"^DD",63,63.029,0)
QA CODE SUB-FIELD^^.01^1
"^DD",63,63.029,0,"NM","QA CODE")

"^DD",63,63.029,0,"UP")
63.02
"^DD",63,63.029,.01,0)
QA CODE^M*P62.5'X^LAB(62.5,^0;1^S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.029,.01,1,0)
^.1^^0
"^DD",63,63.029,.01,3)
QA codes must be less than 3 characters.
"^DD",63,63.029,.01,12)
Selects entries with less than 3 characters
"^DD",63,63.029,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3"
"^DD",63,63.029,.01,21,0)
^^1^1^2940510^
"^DD",63,63.029,.01,21,1,0)
The quality assurance code
"^DD",63,63.029,.01,"DT")
2900916
"^DD",63,63.0297,0)
DELAYED REPORT COMMENT SUB-FIELD^^.01^1
"^DD",63,63.0297,0,"DT")
2930927
"^DD",63,63.0297,0,"NM","DELAYED REPORT COMMENT")

"^DD",63,63.0297,0,"UP")
63.02
"^DD",63,63.0297,.01,0)
DELAYED REPORT COMMENT^MF^^0;1^K:$L(X)>75!($L(X)<1) X
"^DD",63,63.0297,.01,1,0)
^.1^^0
"^DD",63,63.0297,.01,3)
Answer must be 1-75 characters in length.
"^DD",63,63.0297,.01,21,0)
^^2^2^2930927^
"^DD",63,63.0297,.01,21,1,0)
If a report is delayed, reason(s) for delay may be entered here. 
"^DD",63,63.0297,.01,21,2,0)
They will appear on the log book report and the clinician screen display.
"^DD",63,63.0297,.01,"DT")
2930927
"^DD",63,63.03,0)
CUMULATIVE REPORT PAGES SUB-FIELD^NL^1^2
"^DD",63,63.03,0,"NM","CUMULATIVE REPORT PAGES")

"^DD",63,63.03,0,"UP")
63
"^DD",63,63.03,.01,0)
CUMULATIVE REPORT PAGES^P64.5'X^LAB(64.5,^0;1^Q
"^DD",63,63.03,.01,21,0)
^^1^1^2911126^^^^
"^DD",63,63.03,.01,21,1,0)
First ":" piece page number for the cumulative report.
"^DD",63,63.03,.01,"DT")
2870520
"^DD",63,63.03,1,0)
PAGE^NJ4,0^^0;2^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",63,63.03,1,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 9999
"^DD",63,63.03,1,21,0)
^^1^1^2841129^^
"^DD",63,63.03,1,21,1,0)
Second ":" piece page number for the cumulative report.
"^DD",63,63.03,1,"DT")
2840207
"^DD",63,63.033,0)
AUTOPSY SPECIMEN SUB-FIELD^^1^2
"^DD",63,63.033,0,"DT")
2930420
"^DD",63,63.033,0,"IX","B",63.033,.01)

"^DD",63,63.033,0,"NM","AUTOPSY SPECIMEN")

"^DD",63,63.033,0,"UP")
63
"^DD",63,63.033,.01,0)
AUTOPSY SPECIMEN^MF^^0;1^K:$L(X)>75!($L(X)<2) X
"^DD",63,63.033,.01,1,0)
^.1
"^DD",63,63.033,.01,1,1,0)
63.033^B
"^DD",63,63.033,.01,1,1,1)
S ^LR(DA(1),33,"B",$E(X,1,30),DA)=""
"^DD",63,63.033,.01,1,1,2)
K ^LR(DA(1),33,"B",$E(X,1,30),DA)
"^DD",63,63.033,.01,3)
Answer must be 2-75 characters in length.
"^DD",63,63.033,.01,21,0)
^^2^2^2920205^
"^DD",63,63.033,.01,21,1,0)
Autopsy organs and tissues are entered here for block and slide 
"^DD",63,63.033,.01,21,2,0)
preparation, label printing and workload.
"^DD",63,63.033,.01,"DT")
2920205
"^DD",63,63.033,1,0)
PARAFFIN BLOCK^63.331A^^1;0
"^DD",63,63.033,1,21,0)
^^1^1^2920205^^
"^DD",63,63.033,1,21,1,0)
List of paraffin blocks prepared from autopsy organs/tissues.
"^DD",63,63.075,0)
ANTIBODIES IDENTIFIED SUB-FIELD^NL^.02^2
"^DD",63,63.075,0,"NM","ANTIBODIES IDENTIFIED")

"^DD",63,63.075,0,"UP")
63
"^DD",63,63.075,.01,0)
ANTIBODIES IDENTIFIED^M*P61.3'X^LAB(61.3,^0;1^S DIC("W")="W ""  "",$P(^(0),U,2),""  "",$P(^(0),U,1)",DIC("S")="I $P(^(0),U,5)=""AB""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X I $D(X) S DINUM=X
"^DD",63,63.075,.01,12)
Limits entry to only blood group antibodies
"^DD",63,63.075,.01,12.1)
S DIC("S")="I $P(^(0),U,5)=""AB"""
"^DD",63,63.075,.01,21,0)
^^1^1^2911126^^
"^DD",63,63.075,.01,21,1,0)
This is a pointer to an antibody identified on this patient.
"^DD",63,63.075,.01,"DT")
2990521
"^DD",63,63.075,.02,0)
ANTIBODIES IDENTIFIED COMMENT^F^^0;2^K:$L(X)>80!($L(X)<2) X
"^DD",63,63.075,.02,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.075,.02,21,0)
^^1^1^2911126^^
"^DD",63,63.075,.02,21,1,0)
This is a comment on the antibodies identified.
"^DD",63,63.075,.02,"DT")
2860602
"^DD",63,63.076,0)
BLOOD BANK COMMENTS SUB-FIELD^NL^.01^1
"^DD",63,63.076,0,"NM","BLOOD BANK COMMENTS")

"^DD",63,63.076,0,"UP")
63
"^DD",63,63.076,.01,0)
BLOOD BANK COMMENTS^W^^0;1^Q
"^DD",63,63.076,.01,21,0)
^^1^1^2911121^
"^DD",63,63.076,.01,21,1,0)
These are blood bank comments for this patient.
"^DD",63,63.076,.01,"DT")
2850602
"^DD",63,63.08,0)
SURGICAL PATHOLOGY SUB-FIELD^NL^2005^38
"^DD",63,63.08,0,"DT")
3030924
"^DD",63,63.08,0,"ID",.06)
W:$D(^("0")) "   ",$P(^("0"),U,6)
"^DD",63,63.08,0,"IX","AC",63.08,.11)

"^DD",63,63.08,0,"NM","SURGICAL PATHOLOGY")

"^DD",63,63.08,0,"UP")
63
"^DD",63,63.08,.01,0)
DATE/TIME SPECIMEN TAKEN^MRDXO^^0;1^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y,DINUM=9999999-Y K:Y<1 X
"^DD",63,63.08,.01,1,0)
^.1^^0
"^DD",63,63.08,.01,2)
S Y(0)=Y D D^LRU W ?0,"-------------------------------------------------------------------------------"
"^DD",63,63.08,.01,2.1)
D D^LRU W ?0,"-------------------------------------------------------------------------------"
"^DD",63,63.08,.01,3)
ENTER ONLY PAST OR PRESENT DATE/TIME --Future times not permitted
"^DD",63,63.08,.01,8.5)
@
"^DD",63,63.08,.01,21,0)
^.001^1^1^3030116^^^^
"^DD",63,63.08,.01,21,1,0)
This is the date/time the specimen was taken.
"^DD",63,63.08,.01,"DT")
2850120
"^DD",63,63.08,.011,0)
SPECIMEN SUBMITTED BY^F^^0;5^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.08,.011,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63.08,.011,21,0)
^^1^1^2911204^
"^DD",63,63.08,.011,21,1,0)
This is the person submitting the specimen.
"^DD",63,63.08,.011,"DT")
2840911
"^DD",63,63.08,.012,0)
SPECIMEN^63.812A^^.1;0
"^DD",63,63.08,.012,21,0)
^.001^1^1^3030505^^^^
"^DD",63,63.08,.012,21,1,0)
These are the specimens submitted.
"^DD",63,63.08,.013,0)
BRIEF CLINICAL HISTORY^63.813^^.2;0
"^DD",63,63.08,.013,21,0)
^.001^1^1^3010724^^
"^DD",63,63.08,.013,21,1,0)
This is a brief clinical history of the specimen.
"^DD",63,63.08,.014,0)
PREOPERATIVE DIAGNOSIS^63.814A^^.3;0
"^DD",63,63.08,.014,21,0)
^^1^1^2911204^
"^DD",63,63.08,.014,21,1,0)
This is the pre-operative diagnosis of the specimen.
"^DD",63,63.08,.015,0)
OPERATIVE FINDINGS^63.815A^^.4;0
"^DD",63,63.08,.015,21,0)
^^1^1^2911204^
"^DD",63,63.08,.015,21,1,0)
These are the operative findings of the specimen.
"^DD",63,63.08,.016,0)
POSTOPERATIVE DIAGNOSIS^63.816A^^.5;0
"^DD",63,63.08,.02,0)
PATHOLOGIST^*P200'X^VA(200,^0;2^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.08,.02,12)
Selection must be made from active PROVIDERS who hold the PROVIDER security key.
"^DD",63,63.08,.02,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63.08,.02,21,0)
^^1^1^2911204^
"^DD",63,63.08,.02,21,1,0)
This is the pathologist performing the procedure.
"^DD",63,63.08,.02,"DT")
2910630
"^DD",63,63.08,.021,0)
RESIDENT PATHOLOGIST^*P200'X^VA(200,^0;4^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.08,.021,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63.08,.021,21,0)
^^2^2^2911204^
"^DD",63,63.08,.021,21,1,0)
This is the resident pathologist performing
"^DD",63,63.08,.021,21,2,0)
the procedure.
"^DD",63,63.08,.021,"DT")
2910630
"^DD",63,63.08,.03,0)
DATE REPORT COMPLETED^DX^^0;3^S %DT="EX" D ^%DT S X=Y K:Y<1 X I $D(X),X<$P($P(^LR(DA(1),"SP",DA,0),U,10),".") K X W !,"Report date completed must be after date received"
"^DD",63,63.08,.03,21,0)
^^1^1^2911204^^
"^DD",63,63.08,.03,21,1,0)
This is the date the report is completed.
"^DD",63,63.08,.03,"DT")
2900312
"^DD",63,63.08,.06,0)
SURGICAL PATH ACC #^RFIX^^0;6^K:$L(X)>15!($L(X)<5)!'(X?1ANP.ANP1" "2N1" "1N.N) X I $D(X),$D(LRAD),$D(LRABV),$D(^LR("ASPA",$E(LRAD,1,3),LRABV,X)) W $C(7),!,X," is already taken for ",LRABV,! K X
"^DD",63,63.08,.06,1,0)
^.1
"^DD",63,63.08,.06,1,1,0)
63^ASPA^MUMPS
"^DD",63,63.08,.06,1,1,1)
S X(1)=$S($D(LRAD):LRAD,1:$P(^LR(DA(1),"SP",DA,0),U,10)),X(2)=$S($D(LRABV):LRABV,1:$P(^LR(DA(1),"SP",DA,0),U,6)) S:X(1)&(X(2)]"") ^LR("ASPA",$E(X(1),1,3),X(2),$P(X," ",3),DA(1),DA)=""
"^DD",63,63.08,.06,1,1,2)
S X(1)=$S($D(LRAD):LRAD,1:$P(^LR(DA(1),"SP",DA,0),U,10)),X(2)=$S($D(LRABV):LRABV,1:$P(^LR(DA(1),"SP",0),U,6)) K:X(1)&(X(2)]"") ^LR("ASPA",$E(X(1),1,3),X(2),$P(X," ",3),DA(1),DA)
"^DD",63,63.08,.06,1,1,"%D",0)
^^1^1^2950809^^^
"^DD",63,63.08,.06,1,1,"%D",1,0)
Cross references accessions by year and within year by accession area.
"^DD",63,63.08,.06,1,1,"DT")
2950809
"^DD",63,63.08,.06,3)
Answer must be 5-15 characters in length.
"^DD",63,63.08,.06,4)
W !,"Enter as prefix <space> yr <space> number (ex. SP 95 345)"
"^DD",63,63.08,.06,21,0)
^^2^2^2960408^^^
"^DD",63,63.08,.06,21,1,0)
This is the accession number of the surgical
"^DD",63,63.08,.06,21,2,0)
pathology specimen.
"^DD",63,63.08,.06,"DT")
2951214
"^DD",63,63.08,.07,0)
SURGEON/PHYSICIAN^*P200'X^VA(200,^0;7^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.08,.07,12)
Selection must be made from active PROVIDERS who hold the PROVIDER security key.
"^DD",63,63.08,.07,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63.08,.07,21,0)
^^1^1^2911204^
"^DD",63,63.08,.07,21,1,0)
This is the requesting provider.
"^DD",63,63.08,.07,"DT")
2910630
"^DD",63,63.08,.08,0)
PATIENT LOCATION^F^^0;8^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.08,.08,3)
ANSWER MUST BE 2-30 CHARACTERS IN LENGTH
"^DD",63,63.08,.08,21,0)
^^1^1^2911204^
"^DD",63,63.08,.08,21,1,0)
This is the requesting location.
"^DD",63,63.08,.08,"DT")
2830131
"^DD",63,63.08,.09,0)
TYPIST^F^^0;9^K:$L(X)>5!($L(X)<2) X
"^DD",63,63.08,.09,3)
Answer must be 2-5 characters in length.
"^DD",63,63.08,.09,21,0)
^^1^1^2911204^
"^DD",63,63.08,.09,21,1,0)
These are the initials of the typist entering the data.
"^DD",63,63.08,.09,"DT")
2910124
"^DD",63,63.08,.1,0)
DATE/TIME SPECIMEN RECEIVED^RDX^^0;10^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X),$D(LRH(2)),LRH(2)'=$E(X,1,3) K X W !,"Year received must be same as log-in year (",LRH(2)+1700,") "
"^DD",63,63.08,.1,1,0)
^.1^^-1
"^DD",63,63.08,.1,1,2,0)
63^ASP
"^DD",63,63.08,.1,1,2,1)
S ^LR("ASP",$E(X,1,30),DA(1),DA)=""
"^DD",63,63.08,.1,1,2,2)
K ^LR("ASP",$E(X,1,30),DA(1),DA)
"^DD",63,63.08,.1,3)
FUTURE DATE/TIME NOT ALLOWED
"^DD",63,63.08,.1,4)
K DZ W ?5,"To delete accession enter '^'",!
"^DD",63,63.08,.1,21,0)
^^1^1^2911204^
"^DD",63,63.08,.1,21,1,0)
This is the date/time the specimen was received.
"^DD",63,63.08,.1,"DT")
2911016
"^DD",63,63.08,.11,0)
REPORT RELEASE DATE/TIME^DIX^^0;11^S %DT="ETXR",%DT(0)="N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X),X<$P($P(^LR(DA(1),"SP",DA,0),U,3),".") K X W !,"Release date must not be before report completed date (" S Y=$P(^(0),U,3) D DD^%DT W Y,")"
"^DD",63,63.08,.11,1,0)
^.1
"^DD",63,63.08,.11,1,1,0)
63.08^AC^MUMPS
"^DD",63,63.08,.11,1,1,1)
D ADD^LRWOMEN
"^DD",63,63.08,.11,1,1,2)
D DEL^LRWOMEN
"^DD",63,63.08,.11,1,1,"%D",0)
^^3^3^2990219^
"^DD",63,63.08,.11,1,1,"%D",1,0)
This cross reference will send notification to the Women's Health Program
"^DD",63,63.08,.11,1,1,"%D",2,0)
when a Surgical Pathology specimen on a female is verified/released by the
"^DD",63,63.08,.11,1,1,"%D",3,0)
laboratory.
"^DD",63,63.08,.11,1,1,"DT")
2990219
"^DD",63,63.08,.11,3)
ONLY PRESENT DATE/TIME ALLOWED   
"^DD",63,63.08,.11,4)
K DZ
"^DD",63,63.08,.11,21,0)
^^1^1^2950908^^^
"^DD",63,63.08,.11,21,1,0)
YES indicates the report was released.
"^DD",63,63.08,.11,"DT")
2990219
"^DD",63,63.08,.13,0)
RELEASED BY^P200'^VA(200,^0;13^Q
"^DD",63,63.08,.13,"DT")
2910630
"^DD",63,63.08,.14,0)
TC CODE^S^1:1;2:2;3:3;4:4;5:5;6:6;7:7;8:8;9:9;0:0;^0;14^Q
"^DD",63,63.08,.14,21,0)
^^2^2^2900726^^^
"^DD",63,63.08,.14,21,1,0)
 Tissue committee codes
"^DD",63,63.08,.14,21,2,0)
 The meaning of each code is identified by each site.
"^DD",63,63.08,.14,"DT")
2891205
"^DD",63,63.08,.15,0)
ORIGINAL RELEASE DATE^D^^0;15^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.08,.15,21,0)
^^2^2^2900924^
"^DD",63,63.08,.15,21,1,0)
If report was modified after release the original release date
"^DD",63,63.08,.15,21,2,0)
 is kept here.
"^DD",63,63.08,.15,"DT")
2900924
"^DD",63,63.08,.16,0)
TIU REFERENCE DATE/TIME - SP^63.19DA^^.05;0
"^DD",63,63.08,.16,21,0)
^.001^3^3^3030117^^^^
"^DD",63,63.08,.16,21,1,0)
This multiple stores TIU information for corresponding SF515 surgical pathology
"^DD",63,63.08,.16,21,2,0)
reports that have been electronically signed and stored in TIU.  This
"^DD",63,63.08,.16,21,3,0)
information is used to access the reports in TIU.
"^DD",63,63.08,.16,"DT")
3010828
"^DD",63,63.08,.17,0)
DATE REPORT MODIFIED - SP^D^^.07;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.08,.17,21,0)
^^2^2^3020107^
"^DD",63,63.08,.17,21,1,0)
This is the date the report was modified if it was modified after it was
"^DD",63,63.08,.17,21,2,0)
electronically signed/released.
"^DD",63,63.08,.17,"DT")
3011130
"^DD",63,63.08,.171,0)
PERSON MODIFYING TEXT^P200'^VA(200,^.07;2^Q
"^DD",63,63.08,.171,21,0)
^^2^2^3020107^
"^DD",63,63.08,.171,21,1,0)
Stores the DUZ of the person who modified the report AFTER it was
"^DD",63,63.08,.171,21,2,0)
electronically signed/released.
"^DD",63,63.08,.171,"DT")
3011130
"^DD",63,63.08,.172,0)
DIAGNOSIS MODIFIED^S^1:YES;0:NO;^.07;3^Q
"^DD",63,63.08,.172,21,0)
^^1^1^3020107^
"^DD",63,63.08,.172,21,1,0)
1 = Diagnosis modified AFTER report was electronically signed/released.
"^DD",63,63.08,.172,"DT")
3011130
"^DD",63,63.08,.97,0)
DELAYED REPORT COMMENT^63.0897^^97;0
"^DD",63,63.08,.97,21,0)
^^3^3^2930927^^^
"^DD",63,63.08,.97,21,1,0)
If a report is delayed, reason(s) for delay may be entered here. 
"^DD",63,63.08,.97,21,2,0)
They will appear on the log book report and the clinician screen 
"^DD",63,63.08,.97,21,3,0)
display.
"^DD",63,63.08,.99,0)
COMMENT^63.98A^^99;0
"^DD",63,63.08,.99,21,0)
^^1^1^2911204^
"^DD",63,63.08,.99,21,1,0)
These are the comments on the specimen.
"^DD",63,63.08,1,0)
GROSS DESCRIPTION^63.81^^1;0
"^DD",63,63.08,1,21,0)
^^1^1^2911204^
"^DD",63,63.08,1,21,1,0)
This is the gross description of the specimen.
"^DD",63,63.08,1.1,0)
MICROSCOPIC DESCRIPTION^63.811^^1.1;0
"^DD",63,63.08,1.1,21,0)
^^1^1^2911204^
"^DD",63,63.08,1.1,21,1,0)
This is the microscopic examination diagnosis.
"^DD",63,63.08,1.1,"DT")
2930715
"^DD",63,63.08,1.2,0)
SUPPLEMENTARY REPORT^63.817DA^^1.2;0
"^DD",63,63.08,1.2,21,0)
^^1^1^2911204^
"^DD",63,63.08,1.2,21,1,0)
These are supplementary reports on the specimen.
"^DD",63,63.08,1.3,0)
FROZEN SECTION^63.801^^1.3;0
"^DD",63,63.08,1.3,21,0)
^^1^1^2921202^
"^DD",63,63.08,1.3,21,1,0)
Frozen section descriptions can optionally be entered in this field.
"^DD",63,63.08,1.4,0)
SURGICAL PATH DIAGNOSIS^63.802^^1.4;0
"^DD",63,63.08,1.4,21,0)
^^1^1^2930715^
"^DD",63,63.08,1.4,21,1,0)
Surgical pathology diagnoses are entered here.
"^DD",63,63.08,1.4,"DT")
2930716
"^DD",63,63.08,4,0)
DATE MICROSCOPIC EXAM MODIFIED^63.84DA^^4;0
"^DD",63,63.08,4,21,0)
^^2^2^2911204^^
"^DD",63,63.08,4,21,1,0)
These are the dates of modification of the
"^DD",63,63.08,4,21,2,0)
microscopic examination diagnosis.
"^DD",63,63.08,4,"DT")
2930716
"^DD",63,63.08,5,0)
DATE DIAGNOSIS MODIFIED^63.085DA^^5;0
"^DD",63,63.08,5,21,0)
^^2^2^2930716^
"^DD",63,63.08,5,21,1,0)
These are the dates of modification of the diagnosis field 
"^DD",63,63.08,5,21,2,0)
(DD(63.08,1.4))
"^DD",63,63.08,6,0)
DATE FROZEN SECTION MODIFIED^63.086DA^^6;0
"^DD",63,63.08,6,21,0)
^^1^1^2930716^
"^DD",63,63.08,6,21,1,0)
These are the dates of modification of the frozen section field.
"^DD",63,63.08,7,0)
DATE GROSS DESCRIPTION CHANGED^63.087DA^^7;0
"^DD",63,63.08,7,21,0)
^^1^1^2930716^
"^DD",63,63.08,7,21,1,0)
These are the dates of modification of the gross description field.
"^DD",63,63.08,9,0)
QA CODE^63.089PA^^9;0
"^DD",63,63.08,9,12)
Selects entries with less than 3 characters
"^DD",63,63.08,9,12.1)
S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3"
"^DD",63,63.08,10,0)
ORGAN/TISSUE^63.12PA^^2;0
"^DD",63,63.08,10,12)
Selects when appropriate sex related organs
"^DD",63,63.08,10,12.1)
S DIC("S")="I SEX[$P(^(0),U,3)"
"^DD",63,63.08,10,21,0)
^.001^1^1^3010724^^^
"^DD",63,63.08,10,21,1,0)
These are the organ/tissue(s) being examined.
"^DD",63,63.08,80,0)
ICD DIAGNOSIS^63.88PA^^3;0
"^DD",63,63.08,80,21,0)
^^2^2^2911204^
"^DD",63,63.08,80,21,1,0)
These are the ICD diagnoses associated with this
"^DD",63,63.08,80,21,2,0)
organ/tissue(s).
"^DD",63,63.08,2005,0)
IMAGE^63.82005P^^2005;0
"^DD",63,63.08,2005,21,0)
^^3^3^2950523^
"^DD",63,63.08,2005,21,1,0)
Images associated with Surgical Pathology reports are stored in this
"^DD",63,63.08,2005,21,2,0)
multiple within the Surgical Pathology field of the Lab Data (#63)
"^DD",63,63.08,2005,21,3,0)
file.
"^DD",63,63.084,0)
BLOOD COMPONENT REQUEST SUB-FIELD^NL^2.3^13
"^DD",63,63.084,0,"DT")
2930723
"^DD",63,63.084,0,"NM","BLOOD COMPONENT REQUEST")

"^DD",63,63.084,0,"UP")
63
"^DD",63,63.084,.01,0)
BLOOD COMPONENT REQUEST^M*P66'X^LAB(66,^0;1^S DIC("S")="I $P(^(0),U,15),$D(^(10,DUZ(2),0))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.084,.01,12)
Selects only components that can be selected within the division
"^DD",63,63.084,.01,12.1)
S DIC("S")="I $P(^(0),U,15),$D(^(10,DUZ(2),0))"
"^DD",63,63.084,.01,21,0)
^^1^1^2920203^^^
"^DD",63,63.084,.01,21,1,0)
This is the component requested.
"^DD",63,63.084,.01,"DT")
2950731
"^DD",63,63.084,.02,0)
PRE-OP REQUEST^S^1:YES;0:NO;^0;2^Q
"^DD",63,63.084,.02,.1)

"^DD",63,63.084,.02,1,0)
^.1^^0
"^DD",63,63.084,.02,3)

"^DD",63,63.084,.02,21,0)
^^1^1^2920203^^^^
"^DD",63,63.084,.02,21,1,0)
YES indicates this is a pre-operative request.
"^DD",63,63.084,.02,"DT")
2850722
"^DD",63,63.084,.03,0)
REQUEST DATE/TIME^RDX^^0;3^S %DT="ETX" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.084,.03,3)

"^DD",63,63.084,.03,4)

"^DD",63,63.084,.03,21,0)
^^1^1^2920203^^^^
"^DD",63,63.084,.03,21,1,0)
This is the date/time of the request.
"^DD",63,63.084,.03,"DT")
2860825
"^DD",63,63.084,.04,0)
NUMBER OF UNITS^RNJ2,0^^0;4^K:+X'=X!(X>50)!(X<1)!(X?.E1"."1N.N) X
"^DD",63,63.084,.04,3)
Type a Number between 1 and 50, 0 Decimal Digits
"^DD",63,63.084,.04,21,0)
^^1^1^2920203^^^^
"^DD",63,63.084,.04,21,1,0)
This is the number of units requested.
"^DD",63,63.084,.04,"DT")
2871007
"^DD",63,63.084,.05,0)
DATE/TIME UNITS WANTED^DX^^0;5^S %DT="ETX" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.084,.05,3)

"^DD",63,63.084,.05,4)

"^DD",63,63.084,.05,21,0)
^^1^1^2920203^^^
"^DD",63,63.084,.05,21,1,0)
This is the date/time the units are wanted.
"^DD",63,63.084,.05,"DT")
2860826
"^DD",63,63.084,.06,0)
PREVIOUS TRANSFUSIONS^S^1:YES;0:NO;^0;6^Q
"^DD",63,63.084,.06,3)

"^DD",63,63.084,.06,21,0)
^^1^1^2920203^^^
"^DD",63,63.084,.06,21,1,0)
YES indicates the patient has had previous transfusions.
"^DD",63,63.084,.07,0)
PREVIOUS TRANSFUSION REACTION^S^1:YES;0:NO;^0;7^Q
"^DD",63,63.084,.07,21,0)
^^2^2^2920203^^^
"^DD",63,63.084,.07,21,1,0)
YES indicates the patient has had a previous
"^DD",63,63.084,.07,21,2,0)
transfusion reaction.
"^DD",63,63.084,.07,"DT")
2911126
"^DD",63,63.084,.08,0)
ENTERING PERSON^P200'^VA(200,^0;8^Q
"^DD",63,63.084,.08,3)

"^DD",63,63.084,.08,21,0)
^^1^1^2920203^^
"^DD",63,63.084,.08,21,1,0)
This is the person entering the request.
"^DD",63,63.084,.08,"DT")
2870504
"^DD",63,63.084,.09,0)
REQUESTING PERSON^F^^0;9^K:$L(X)>17!($L(X)<2) X
"^DD",63,63.084,.09,3)
ANSWER MUST BE 2-17 CHARACTERS IN LENGTH
"^DD",63,63.084,.09,21,0)
^^1^1^2920203^^
"^DD",63,63.084,.09,21,1,0)
This is the person making the request.
"^DD",63,63.084,.09,"DT")
2870504
"^DD",63,63.084,1,0)
UNITS SELECTED FOR XMATCH^63.0841PA^^1;0
"^DD",63,63.084,1,12)
SELECTS UNITS WITHOUT DISPOSITION
"^DD",63,63.084,1,12.1)
S DIC("S")="I '$D(^(4))"
"^DD",63,63.084,1,21,0)
^^1^1^2920203^^
"^DD",63,63.084,1,21,1,0)
These are units selected for crossmatch.
"^DD",63,63.084,2.1,0)
COMPONENT REQUEST REASON^FX^^2;1^K:$L(X)>80!($L(X)<2) X I $D(X) S L=80,L(1)="J" D ^LRUB
"^DD",63,63.084,2.1,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.084,2.1,4)
S L(1)="J" D Q^LRUB
"^DD",63,63.084,2.1,21,0)
^^2^2^2870903^
"^DD",63,63.084,2.1,21,1,0)
If request does not meet acceptable criteria enter the reason
"^DD",63,63.084,2.1,21,2,0)
 why the request should still be completed.
"^DD",63,63.084,2.1,"DT")
2870903
"^DD",63,63.084,2.2,0)
APPROVED BY^F^^2;2^K:$L(X)>30!($L(X)<2) X
"^DD",63,63.084,2.2,3)
ANSWER MUST BE 2-30 CHARACTERS IN LENGTH
"^DD",63,63.084,2.2,21,0)
^^1^1^2920203^^
"^DD",63,63.084,2.2,21,1,0)
This is the person approving the crossmatch request.
"^DD",63,63.084,2.2,"DT")
2870902
"^DD",63,63.084,2.3,0)
TREATING SPECIALITY^P45.7'^DIC(45.7,^2;3^Q
"^DD",63,63.084,2.3,21,0)
^^2^2^2920203^^
"^DD",63,63.084,2.3,21,1,0)
This is the treating specialty of the crossmatch
"^DD",63,63.084,2.3,21,2,0)
request.
"^DD",63,63.084,2.3,"DT")
2870902
"^DD",63,63.0841,0)
UNITS SELECTED FOR XMATCH SUB-FIELD^NL^.02^2
"^DD",63,63.0841,0,"NM","UNITS SELECTED FOR XMATCH")

"^DD",63,63.0841,0,"UP")
63.084
"^DD",63,63.0841,.01,0)
UNIT SELECTED FOR XMATCH^M*P65'X^LRD(65,^0;1^S DIC("S")="I '$D(^(4))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X I $D(X) S DINUM=X
"^DD",63,63.0841,.01,21,0)
^^1^1^2920203^^
"^DD",63,63.0841,.01,21,1,0)
This is the unit selected for crossmatch.
"^DD",63,63.0841,.01,"DT")
2850806
"^DD",63,63.0841,.02,0)
INVERSE SPECIMEN DATE^RNJ13,5^^0;2^K:+X'=X!(X>9999999)!(X<1)!(X?.E1"."6N.N) X
"^DD",63,63.0841,.02,3)
TYPE A NUMBER BETWEEN 1 AND 9999999
"^DD",63,63.0841,.02,21,0)
^^2^2^2920203^^^
"^DD",63,63.0841,.02,21,1,0)
This is 9999999--collection date of the specimen for
"^DD",63,63.0841,.02,21,2,0)
crossmatch.
"^DD",63,63.0841,.02,"DT")
2850806
"^DD",63,63.085,0)
DATE DIAGNOSIS MODIFIED SUB-FIELD^^1^3
"^DD",63,63.085,0,"DT")
2930716
"^DD",63,63.085,0,"NM","DATE DIAGNOSIS MODIFIED")

"^DD",63,63.085,0,"UP")
63.08
"^DD",63,63.085,.01,0)
DATE DIAGNOSIS MODIFIED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.085,.01,1,0)
^.1^^0
"^DD",63,63.085,.01,"DT")
2930716
"^DD",63,63.085,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.085,.02,21,0)
^^1^1^2930716^
"^DD",63,63.085,.02,21,1,0)
User who changes text.
"^DD",63,63.085,.02,"DT")
2930716
"^DD",63,63.085,1,0)
PREMODIFICATION TEXT^63.0851^^1;0
"^DD",63,63.085,1,21,0)
^^1^1^2930716^
"^DD",63,63.085,1,21,1,0)
This is the premodification text.
"^DD",63,63.0851,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.0851,0,"DT")
2930716
"^DD",63,63.0851,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.0851,0,"UP")
63.085
"^DD",63,63.0851,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.0851,.01,"DT")
2930716
"^DD",63,63.086,0)
DATE FROZEN SECTION MODIFIED SUB-FIELD^^1^3
"^DD",63,63.086,0,"DT")
2930716
"^DD",63,63.086,0,"IX","B",63.086,.01)

"^DD",63,63.086,0,"NM","DATE FROZEN SECTION MODIFIED")

"^DD",63,63.086,0,"UP")
63.08
"^DD",63,63.086,.01,0)
DATE FROZEN SECTION MODIFIED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.086,.01,1,0)
^.1
"^DD",63,63.086,.01,1,1,0)
63.086^B
"^DD",63,63.086,.01,1,1,1)
S ^LR(DA(2),"SP",DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",63,63.086,.01,1,1,2)
K ^LR(DA(2),"SP",DA(1),6,"B",$E(X,1,30),DA)
"^DD",63,63.086,.01,21,0)
^^1^1^2930716^
"^DD",63,63.086,.01,21,1,0)
These are the dates of modification of the frozen section field.
"^DD",63,63.086,.01,"DT")
2930716
"^DD",63,63.086,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.086,.02,21,0)
^^1^1^2930716^
"^DD",63,63.086,.02,21,1,0)
User who changes text.
"^DD",63,63.086,.02,"DT")
2930716
"^DD",63,63.086,1,0)
PREMODIFICATION TEXT^63.0861^^1;0
"^DD",63,63.086,1,21,0)
^^1^1^2930716^
"^DD",63,63.086,1,21,1,0)
Text before modification is stored here.
"^DD",63,63.0861,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.0861,0,"DT")
2930716
"^DD",63,63.0861,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.0861,0,"UP")
63.086
"^DD",63,63.0861,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.0861,.01,"DT")
2930716
"^DD",63,63.087,0)
DATE GROSS DESCRIPTION CHANGED SUB-FIELD^^1^3
"^DD",63,63.087,0,"DT")
2930716
"^DD",63,63.087,0,"NM","DATE GROSS DESCRIPTION CHANGED")

"^DD",63,63.087,0,"UP")
63.08
"^DD",63,63.087,.01,0)
DATE GROSS DESCRIPTION CHANGED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.087,.01,1,0)
^.1^^0
"^DD",63,63.087,.01,21,0)
^^1^1^2930716^
"^DD",63,63.087,.01,21,1,0)
These are the dates of modification of the gross description field.
"^DD",63,63.087,.01,"DT")
2930716
"^DD",63,63.087,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.087,.02,21,0)
^^1^1^2930716^
"^DD",63,63.087,.02,21,1,0)
User who changes text.
"^DD",63,63.087,.02,"DT")
2930716
"^DD",63,63.087,1,0)
PREMODIFICATION TEXT^63.0871^^1;0
"^DD",63,63.087,1,21,0)
^^1^1^2930716^
"^DD",63,63.087,1,21,1,0)
This is the premodification text.
"^DD",63,63.0871,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.0871,0,"DT")
2930716
"^DD",63,63.0871,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.0871,0,"UP")
63.087
"^DD",63,63.0871,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.0871,.01,"DT")
2930716
"^DD",63,63.089,0)
QA CODE SUB-FIELD^^.01^1
"^DD",63,63.089,0,"NM","QA CODE")

"^DD",63,63.089,0,"UP")
63.08
"^DD",63,63.089,.01,0)
QA CODE^M*P62.5'X^LAB(62.5,^0;1^S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.089,.01,1,0)
^.1^^0
"^DD",63,63.089,.01,3)
QA codes must be less than 3 characters.
"^DD",63,63.089,.01,12)
Selects entries with less than 3 characters
"^DD",63,63.089,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3"
"^DD",63,63.089,.01,"DT")
2900916
"^DD",63,63.0897,0)
DELAYED REPORT COMMENT SUB-FIELD^^.01^1
"^DD",63,63.0897,0,"DT")
2930927
"^DD",63,63.0897,0,"NM","DELAYED REPORT COMMENT")

"^DD",63,63.0897,0,"UP")
63.08
"^DD",63,63.0897,.01,0)
DELAYED REPORT COMMENT^MFX^^0;1^K:$L(X)>75!($L(X)<1) X I $D(X) S L=75,L(1)="S" D ^LRUB
"^DD",63,63.0897,.01,1,0)
^.1^^0
"^DD",63,63.0897,.01,3)
Answer must be 1-75 characters in length.
"^DD",63,63.0897,.01,4)
S L(1)="S" D Q^LRUB
"^DD",63,63.0897,.01,21,0)
^^2^2^2930927^
"^DD",63,63.0897,.01,21,1,0)
If a report is delayed, reason(s) for delay may be entered here. 
"^DD",63,63.0897,.01,21,2,0)
They will appear on the log book report and the clinician screen display.
"^DD",63,63.0897,.01,"DT")
2930927
"^DD",63,63.09,0)
CYTOPATHOLOGY SUB-FIELD^NL^2005^38
"^DD",63,63.09,0,"DT")
3040205
"^DD",63,63.09,0,"IX","AC",63.09,.11)

"^DD",63,63.09,0,"NM","CYTOPATHOLOGY")

"^DD",63,63.09,0,"UP")
63
"^DD",63,63.09,.01,0)
DATE/TIME SPECIMEN TAKEN^RDXO^^0;1^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y,DINUM=9999999-Y K:Y<1 X
"^DD",63,63.09,.01,1,0)
^.1^^0
"^DD",63,63.09,.01,2)
S Y(0)=Y D D^LRU W ?0,"-------------------------------------------------------------------------------"
"^DD",63,63.09,.01,2.1)
D D^LRU W ?0,"-------------------------------------------------------------------------------"
"^DD",63,63.09,.01,3)
FUTURE DATE/TIME NOT ALLOWED
"^DD",63,63.09,.01,8.5)
@
"^DD",63,63.09,.01,21,0)
^^2^2^2911205^^^
"^DD",63,63.09,.01,21,1,0)
This is the date/time of collection of the
"^DD",63,63.09,.01,21,2,0)
specimen.
"^DD",63,63.09,.01,"DT")
2850120
"^DD",63,63.09,.011,0)
SPECIMEN SUBMITTED BY^F^^0;5^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.09,.011,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63.09,.011,21,0)
^.001^1^1^3030306^^
"^DD",63,63.09,.011,21,1,0)
This is the person submitting the specimen.
"^DD",63,63.09,.011,"DT")
2850228
"^DD",63,63.09,.012,0)
SPECIMEN^63.902IA^^.1;0
"^DD",63,63.09,.012,21,0)
^.001^1^1^3030313^^^^
"^DD",63,63.09,.012,21,1,0)
These are the specimens submitted.
"^DD",63,63.09,.013,0)
BRIEF CLINICAL HISTORY^63.913^^.2;0
"^DD",63,63.09,.013,21,0)
^^1^1^2911204^
"^DD",63,63.09,.013,21,1,0)
This is a brief clinical history of the specimen.
"^DD",63,63.09,.014,0)
PREOPERATIVE DIAGNOSIS^63.914A^^.3;0
"^DD",63,63.09,.014,21,0)
^^1^1^2911204^
"^DD",63,63.09,.014,21,1,0)
This is the pre-operative diagnosis.
"^DD",63,63.09,.015,0)
OPERATIVE FINDINGS^63.905A^^.4;0
"^DD",63,63.09,.015,21,0)
^^1^1^2911204^
"^DD",63,63.09,.015,21,1,0)
These are the operative findings of the specimen.
"^DD",63,63.09,.016,0)
POSTOPERATIVE DIAGNOSIS^63.906A^^.5;0
"^DD",63,63.09,.016,21,0)
^^1^1^2911204^^
"^DD",63,63.09,.016,21,1,0)
This is the post-operative diagnosis.
"^DD",63,63.09,.02,0)
PATHOLOGIST/CYTOTECHNOLOGIST^*P200'X^VA(200,^0;2^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.09,.02,3)
Enter the pathologist or cytotechnologist performing the examination.  NOTE:  A cytotech's name can be entered on negative GYN cases only.
"^DD",63,63.09,.02,12)
Selection must be made from active PROVIDERS who hold the PROVIDER security key.
"^DD",63,63.09,.02,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63.09,.02,21,0)
^^1^1^3040205^
"^DD",63,63.09,.02,21,1,0)
This is the pathologist performing the examination.
"^DD",63,63.09,.02,"DT")
3040205
"^DD",63,63.09,.021,0)
CYTOTECH^P200'^VA(200,^0;4^Q
"^DD",63,63.09,.021,21,0)
^^1^1^2911205^
"^DD",63,63.09,.021,21,1,0)
This is the technologist performing the test.
"^DD",63,63.09,.021,"DT")
2910630
"^DD",63,63.09,.03,0)
DATE REPORT COMPLETED^DX^^0;3^S %DT="EX" D ^%DT S X=Y K:Y<1 X I $D(X),X<$P($P(^LR(DA(1),"CY",DA,0),U,10),".") K X W !,"Report date completed must be after date received"
"^DD",63,63.09,.03,21,0)
^^1^1^2911205^
"^DD",63,63.09,.03,21,1,0)
This is the date the report was completed.
"^DD",63,63.09,.03,"DT")
2900312
"^DD",63,63.09,.06,0)
CYTOPATH ACC #^RFIX^^0;6^K:$L(X)>15!($L(X)<5)!'(X?1ANP.ANP1" "2N1" "1N.N) X I $D(X),$D(LRAD),$D(LRABV),$D(^LR("ACYA",$E(LRAD,1,3),LRABV,X)) W $C(7),!,X," is already taken for ",LRABV,! K X
"^DD",63,63.09,.06,1,0)
^.1
"^DD",63,63.09,.06,1,1,0)
63^ACYA^MUMPS
"^DD",63,63.09,.06,1,1,1)
S X(1)=$S($D(LRAD):LRAD,1:$P(^LR(DA(1),"CY",DA,0),U,10)),X(2)=$S($D(LRABV):LRABV,1:$P(^LR(DA(1),"CY",DA,0),U,6)) S:X(1)&(X(2)]"") ^LR("ACYA",$E(X(1),1,3),X(2),$P(X," ",3),DA(1),DA)=""
"^DD",63,63.09,.06,1,1,2)
S X(1)=$S($D(LRAD):LRAD,1:$P(^LR(DA(1),"CY",DA,0),U,10)),X(2)=$S($D(LRABV):LRABV,1:$P(^LR(DA(1),"CY",0),U,6)) K:X(1)&(X(2)]"") ^LR("ACYA",$E(X(1),1,3),X(2),$P(X," ",3),DA(1),DA)
"^DD",63,63.09,.06,1,1,"%D",0)
^^1^1^2950810^^^^
"^DD",63,63.09,.06,1,1,"%D",1,0)
Cross references accessions by year and within year by accession area.
"^DD",63,63.09,.06,1,1,"DT")
2950810
"^DD",63,63.09,.06,3)
Answer must be 5-15 characters in length.
"^DD",63,63.09,.06,4)
W !,"Enter as prefix <space> yr <space> number (ex. CY 95 345)"
"^DD",63,63.09,.06,21,0)
^^2^2^2950810^^^
"^DD",63,63.09,.06,21,1,0)
This is the accession number of the cytopathology 
"^DD",63,63.09,.06,21,2,0)
specimen.
"^DD",63,63.09,.06,"DT")
2951214
"^DD",63,63.09,.07,0)
PHYSICIAN^*P200'X^VA(200,^0;7^S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))",D="AK.PROVIDER" D IX^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.09,.07,12)
Selection must be made from active PROVIDERS who hold the PROVIDER security key.
"^DD",63,63.09,.07,12.1)
S DIC("S")="I $D(^VA(200,""AK.PROVIDER"",$P(^(0),U)))"
"^DD",63,63.09,.07,21,0)
^^1^1^2911205^
"^DD",63,63.09,.07,21,1,0)
This is the requesting provider.
"^DD",63,63.09,.07,"DT")
2910630
"^DD",63,63.09,.08,0)
PATIENT LOCATION^F^^0;8^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.09,.08,3)
ANSWER MUST BE 2-30 CHARACTERS IN LENGTH
"^DD",63,63.09,.08,21,0)
^^1^1^2911205^
"^DD",63,63.09,.08,21,1,0)
This is the requesting location.
"^DD",63,63.09,.08,"DT")
2830131
"^DD",63,63.09,.09,0)
TYPIST^F^^0;9^K:$L(X)>5!($L(X)<2) X
"^DD",63,63.09,.09,3)
Answer must be 2-5 characters in length.
"^DD",63,63.09,.09,21,0)
^^2^2^2911205^
"^DD",63,63.09,.09,21,1,0)
These are the initials of the typist entering the
"^DD",63,63.09,.09,21,2,0)
cytopathology data.
"^DD",63,63.09,.09,"DT")
2910124
"^DD",63,63.09,.1,0)
DATE/TIME SPECIMEN RECEIVED^RDX^^0;10^S %DT="ETX",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X),$D(LRH(2)),LRH(2)'=$E(X,1,3) K X W !,"Year received must be same as log-in year (",LRH(2)+1700,") "
"^DD",63,63.09,.1,1,0)
^.1
"^DD",63,63.09,.1,1,1,0)
63^ACY^MUMPS
"^DD",63,63.09,.1,1,1,1)
S ^LR("ACY",$E(X,1,30),DA(1),DA)=""
"^DD",63,63.09,.1,1,1,2)
K ^LR("ACY",$E(X,1,30),DA(1),DA)
"^DD",63,63.09,.1,3)
FUTURE DATE/TIME NOT ALLOWED
"^DD",63,63.09,.1,4)
K DZ W ?5,"To delete accession enter '^'",!
"^DD",63,63.09,.1,21,0)
^^1^1^2911205^
"^DD",63,63.09,.1,21,1,0)
This is the date/time the specimen was received.
"^DD",63,63.09,.1,"DT")
2910129
"^DD",63,63.09,.101,0)
REVIEWED BY PATHOLOGIST^S^1:YES;0:NO;1:yes;0:no;^0;12^Q
"^DD",63,63.09,.101,3)
Enter 'YES' if case reviewed by pathologist.
"^DD",63,63.09,.101,21,0)
^^2^2^2911205^
"^DD",63,63.09,.101,21,1,0)
YES identifies that the case has been reviewed
"^DD",63,63.09,.101,21,2,0)
by the pathologist.
"^DD",63,63.09,.101,"DT")
2870804
"^DD",63,63.09,.11,0)
REPORT RELEASE DATE/TIME^DIX^^0;11^S %DT="ETXR",%DT(0)="N" D ^%DT K %DT S X=Y K:Y<1 X I $D(X),X<$P($P(^LR(DA(1),"CY",DA,0),U,3),".") K X W !,"Release date must not be before completed date (" S Y=$P(^(0),U,3) D DD^%DT W Y,")"
"^DD",63,63.09,.11,1,0)
^.1
"^DD",63,63.09,.11,1,1,0)
63.09^AC^MUMPS
"^DD",63,63.09,.11,1,1,1)
D ADD^LRWOMEN
"^DD",63,63.09,.11,1,1,2)
D DEL^LRWOMEN
"^DD",63,63.09,.11,1,1,"%D",0)
^^2^2^2990219^
"^DD",63,63.09,.11,1,1,"%D",1,0)
This cross reference will send notification to the Women's Health Program
"^DD",63,63.09,.11,1,1,"%D",2,0)
when a Cytology specimen is Verified/Released from the Laboratory package.
"^DD",63,63.09,.11,1,1,"DT")
2990219
"^DD",63,63.09,.11,3)
ONLY CURRENT DATE/TIME ALLOWED
"^DD",63,63.09,.11,4)
K DZ
"^DD",63,63.09,.11,21,0)
^^1^1^2950908^^^
"^DD",63,63.09,.11,21,1,0)
Date report was released
"^DD",63,63.09,.11,"DT")
2990219
"^DD",63,63.09,.13,0)
RELEASED BY^P200'^VA(200,^0;13^Q
"^DD",63,63.09,.13,21,0)
^^1^1^2930331^
"^DD",63,63.09,.13,21,1,0)
Name of individual who released report
"^DD",63,63.09,.13,"DT")
2910630
"^DD",63,63.09,.14,0)
TC CODE^S^1:1;2:2;3:3;4:4;5:5;6:6;7:7;8:8;9:9;0:0;^0;14^Q
"^DD",63,63.09,.14,21,0)
^^2^2^2920326^
"^DD",63,63.09,.14,21,1,0)
Tissue committee codes
"^DD",63,63.09,.14,21,2,0)
The meaning of each code is identified by each site.
"^DD",63,63.09,.14,"DT")
2920326
"^DD",63,63.09,.15,0)
ORIGINAL RELEASE DATE^D^^0;15^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.09,.15,21,0)
^^2^2^2900924^
"^DD",63,63.09,.15,21,1,0)
If report was modified after release the original release date
"^DD",63,63.09,.15,21,2,0)
 is kept here.
"^DD",63,63.09,.15,"DT")
2900924
"^DD",63,63.09,.16,0)
TIU REFERENCE DATE/TIME - CY^63.47DA^^.05;0
"^DD",63,63.09,.16,21,0)
^.001^3^3^3010829^^^^
"^DD",63,63.09,.16,21,1,0)
This multiple stores TIU information for corresponding SF515 cytopathology
"^DD",63,63.09,.16,21,2,0)
reports that have been electronically signed and stored in TIU.  This
"^DD",63,63.09,.16,21,3,0)
information is used to access the reports in TIU.
"^DD",63,63.09,.16,"DT")
3010828
"^DD",63,63.09,.17,0)
DATE REPORT MODIFIED - CY^D^^.07;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.09,.17,21,0)
^^2^2^3020107^
"^DD",63,63.09,.17,21,1,0)
This is the date the report was modified if it was modified after it was
"^DD",63,63.09,.17,21,2,0)
electronically signed/released.
"^DD",63,63.09,.17,"DT")
3011130
"^DD",63,63.09,.171,0)
PERSON MODIFYING TEXT^P200'^VA(200,^.07;2^Q
"^DD",63,63.09,.171,21,0)
^^2^2^3020107^
"^DD",63,63.09,.171,21,1,0)
Stores the DUZ of the person who modified the report AFTER it was
"^DD",63,63.09,.171,21,2,0)
electronically signed/released.
"^DD",63,63.09,.171,"DT")
3011130
"^DD",63,63.09,.172,0)
DIAGNOSIS MODIFIED^S^1:YES;0:NO;^.07;3^Q
"^DD",63,63.09,.172,21,0)
^^1^1^3020107^
"^DD",63,63.09,.172,21,1,0)
1 = Diagnosis modified AFTER report was electronically signed/released.
"^DD",63,63.09,.172,"DT")
3011130
"^DD",63,63.09,.97,0)
DELAYED REPORT COMMENT^63.0997A^^97;0
"^DD",63,63.09,.97,21,0)
^^2^2^2930927^
"^DD",63,63.09,.97,21,1,0)
If a report is delayed, reason(s) for delay may be entered here. 
"^DD",63,63.09,.97,21,2,0)
They will appear on the log book report and the clinician screen display.
"^DD",63,63.09,.99,0)
COMMENT^63.908A^^99;0
"^DD",63,63.09,.99,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.09,.99,21,0)
^^1^1^2911205^^
"^DD",63,63.09,.99,21,1,0)
These are comments on the cytopathology data.
"^DD",63,63.09,.99,"DT")
2840313
"^DD",63,63.09,1,0)
GROSS DESCRIPTION^63.91^^1;0
"^DD",63,63.09,1,21,0)
^^1^1^2911205^^
"^DD",63,63.09,1,21,1,0)
This is the gross description of the specimen.
"^DD",63,63.09,1,"DT")
2841106
"^DD",63,63.09,1.1,0)
MICROSCOPIC EXAMINATION^63.911^^1.1;0
"^DD",63,63.09,1.1,21,0)
^^1^1^2911205^
"^DD",63,63.09,1.1,21,1,0)
This is the microscopic examination diagnosis.
"^DD",63,63.09,1.1,"DT")
2930716
"^DD",63,63.09,1.2,0)
SUPPLEMENTARY REPORT^63.907DA^^1.2;0
"^DD",63,63.09,1.2,21,0)
^.001^1^1^3040205^^^
"^DD",63,63.09,1.2,21,1,0)
These are the supplementary reports on the specimen.
"^DD",63,63.09,1.4,0)
CYTOPATHOLOGY DIAGNOSIS^63.903^^1.4;0
"^DD",63,63.09,1.4,21,0)
^^1^1^2930716^
"^DD",63,63.09,1.4,21,1,0)
Cytopathology diagnoses are entered here.
"^DD",63,63.09,4,0)
DATE MICROSCOPIC EXAM MODIFIED^63.94DA^^4;0
"^DD",63,63.09,4,21,0)
^^2^2^2911205^^^
"^DD",63,63.09,4,21,1,0)
These are the dates of the modification of the microscopic
"^DD",63,63.09,4,21,2,0)
examination diagnosis.
"^DD",63,63.09,4,"DT")
2930716
"^DD",63,63.09,5,0)
DATE DIAGNOSIS MODIFIED^63.095DA^^5;0
"^DD",63,63.09,5,21,0)
^^1^1^2930716^
"^DD",63,63.09,5,21,1,0)
This is the date of the modification of the diagnosis field.
"^DD",63,63.09,7,0)
DATE GROSS DESCRIPTION CHANGED^63.097DA^^7;0
"^DD",63,63.09,7,21,0)
^^1^1^2930716^
"^DD",63,63.09,7,21,1,0)
These are the dates of change in the gross description field.
"^DD",63,63.09,9,0)
QA CODE^63.099PA^^9;0
"^DD",63,63.09,9,12)
Selects entries with less than 3 characters
"^DD",63,63.09,9,12.1)
S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3"
"^DD",63,63.09,10,0)
CYTOPATH ORGAN/TISSUE^63.912PA^^2;0
"^DD",63,63.09,10,12)
Selects when appropriate sex related organs
"^DD",63,63.09,10,12.1)
S DIC("S")="I SEX[$P(^(0),U,3)"
"^DD",63,63.09,10,21,0)
^.001^1^1^3000613^^^
"^DD",63,63.09,10,21,1,0)
This is the organ/tissue(s) being examined.
"^DD",63,63.09,20,0)
DESCRIPTION^63.91^^WP;0
"^DD",63,63.09,20,21,0)
^^1^1^2940510^
"^DD",63,63.09,20,21,1,0)
Word processing field for description
"^DD",63,63.09,80,0)
ICD DIAGNOSIS^63.901PA^^3;0
"^DD",63,63.09,80,21,0)
^^1^1^2911205^^
"^DD",63,63.09,80,21,1,0)
These are the IDC diagnosis of the specimen.
"^DD",63,63.09,2005,0)
IMAGE^63.92005P^^2005;0
"^DD",63,63.09,2005,21,0)
^^3^3^2950523^
"^DD",63,63.09,2005,21,1,0)
Images associated with Cytopathology reports are stored in this
"^DD",63,63.09,2005,21,2,0)
multiple within the Cytopathology field of the Lab Data (#63)
"^DD",63,63.09,2005,21,3,0)
file.
"^DD",63,63.095,0)
DATE DIAGNOSIS MODIFIED SUB-FIELD^^1^3
"^DD",63,63.095,0,"DT")
2930716
"^DD",63,63.095,0,"NM","DATE DIAGNOSIS MODIFIED")

"^DD",63,63.095,0,"UP")
63.09
"^DD",63,63.095,.01,0)
DATE DIAGNOSIS MODIFIED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.095,.01,1,0)
^.1^^0
"^DD",63,63.095,.01,21,0)
^^1^1^2930716^
"^DD",63,63.095,.01,21,1,0)
This is the date of the modification of the diagnosis field.
"^DD",63,63.095,.01,"DT")
2930716
"^DD",63,63.095,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.095,.02,"DT")
2930716
"^DD",63,63.095,1,0)
PREMODIFICATION TEXT^63.0951^^1;0
"^DD",63,63.095,1,21,0)
^^1^1^2930716^
"^DD",63,63.095,1,21,1,0)
This is the premodification text.
"^DD",63,63.0951,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.0951,0,"DT")
2930716
"^DD",63,63.0951,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.0951,0,"UP")
63.095
"^DD",63,63.0951,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.0951,.01,"DT")
2930716
"^DD",63,63.097,0)
DATE GROSS DESCRIPTION CHANGED SUB-FIELD^^1^3
"^DD",63,63.097,0,"DT")
2930716
"^DD",63,63.097,0,"NM","DATE GROSS DESCRIPTION CHANGED")

"^DD",63,63.097,0,"UP")
63.09
"^DD",63,63.097,.01,0)
DATE GROSS DESCRIPTION CHANGED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.097,.01,1,0)
^.1^^0
"^DD",63,63.097,.01,21,0)
^^1^1^2930716^
"^DD",63,63.097,.01,21,1,0)
These are the dates of change in the gross description field.
"^DD",63,63.097,.01,"DT")
2930716
"^DD",63,63.097,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.097,.02,21,0)
^^1^1^2930716^
"^DD",63,63.097,.02,21,1,0)
User who changes text.
"^DD",63,63.097,.02,"DT")
2930716
"^DD",63,63.097,1,0)
PREMODIFICATION TEXT^63.0971^^1;0
"^DD",63,63.097,1,21,0)
^^1^1^2930716^
"^DD",63,63.097,1,21,1,0)
This is the premodification text.
"^DD",63,63.0971,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.0971,0,"DT")
2930716
"^DD",63,63.0971,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.0971,0,"UP")
63.097
"^DD",63,63.0971,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.0971,.01,"DT")
2930716
"^DD",63,63.099,0)
QA CODE SUB-FIELD^^.01^1
"^DD",63,63.099,0,"NM","QA CODE")

"^DD",63,63.099,0,"UP")
63.09
"^DD",63,63.099,.01,0)
QA CODE^M*P62.5'X^LAB(62.5,^0;1^S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.099,.01,1,0)
^.1^^0
"^DD",63,63.099,.01,3)
QA codes must be less than 3 characters.
"^DD",63,63.099,.01,12)
Selects entries with less than 3 characters
"^DD",63,63.099,.01,12.1)
S DIC("S")="I $P(^(0),U,4)="",$L($P(^(0),U))<3"
"^DD",63,63.099,.01,"DT")
2900916
"^DD",63,63.0997,0)
DELAYED REPORT COMMENT SUB-FIELD^^.01^1
"^DD",63,63.0997,0,"DT")
2930927
"^DD",63,63.0997,0,"NM","DELAYED REPORT COMMENT")

"^DD",63,63.0997,0,"UP")
63.09
"^DD",63,63.0997,.01,0)
DELAYED REPORT COMMENT^MF^^0;1^K:$L(X)>75!($L(X)<1) X
"^DD",63,63.0997,.01,1,0)
^.1^^0
"^DD",63,63.0997,.01,3)
Answer must be 1-75 characters in length.
"^DD",63,63.0997,.01,21,0)
^^2^2^2930927^
"^DD",63,63.0997,.01,21,1,0)
If a report is delayed, reason(s) for delay may be entered here. 
"^DD",63,63.0997,.01,21,2,0)
They will appear on the log book report and the clinician screen display.
"^DD",63,63.0997,.01,"DT")
2930927
"^DD",63,63.101,0)
TIU REFERENCE DATE/TIME - AU SUB-FIELD^^2^3
"^DD",63,63.101,0,"DT")
3030116
"^DD",63,63.101,0,"IX","B",63.101,.01)

"^DD",63,63.101,0,"IX","C",63.101,1)

"^DD",63,63.101,0,"NM","TIU REFERENCE DATE/TIME - AU")

"^DD",63,63.101,0,"UP")
63
"^DD",63,63.101,.01,0)
TIU REFERENCE DATE/TIME - AU^D^^0;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.101,.01,1,0)
^.1
"^DD",63,63.101,.01,1,1,0)
63.101^B
"^DD",63,63.101,.01,1,1,1)
S ^LR(DA(1),101,"B",$E(X,1,30),DA)=""
"^DD",63,63.101,.01,1,1,2)
K ^LR(DA(1),101,"B",$E(X,1,30),DA)
"^DD",63,63.101,.01,21,0)
^.001^3^3^3011130^^^
"^DD",63,63.101,.01,21,1,0)
This is the date and time that the autopsy SF515 was stored in TIU.  It will
"^DD",63,63.101,.01,21,2,0)
match the REFERENCE DATE (#1301) field of the corresponding document in the
"^DD",63,63.101,.01,21,3,0)
TIU DOCUMENT (#8925) file.
"^DD",63,63.101,.01,"DEL",1,0)
I
"^DD",63,63.101,.01,"DT")
3010829
"^DD",63,63.101,1,0)
TIU ENTRY POINTER - AU^P8925'^TIU(8925,^0;2^Q
"^DD",63,63.101,1,1,0)
^.1
"^DD",63,63.101,1,1,1,0)
63.101^C
"^DD",63,63.101,1,1,1,1)
S ^LR(DA(1),101,"C",$E(X,1,30),DA)=""
"^DD",63,63.101,1,1,1,2)
K ^LR(DA(1),101,"C",$E(X,1,30),DA)
"^DD",63,63.101,1,1,1,"DT")
3010727
"^DD",63,63.101,1,21,0)
^.001^3^3^3010829^^
"^DD",63,63.101,1,21,1,0)
This field is a pointer to the TIU DOCUMENT (#8925) file.  It stores the
"^DD",63,63.101,1,21,2,0)
pointer for an autopsy SF515 that has been electronically signed and stored in
"^DD",63,63.101,1,21,3,0)
TIU.
"^DD",63,63.101,1,"DEL",1,0)
I
"^DD",63,63.101,1,"DT")
3010829
"^DD",63,63.101,2,0)
TIU CHECKSUM^FI^^0;3^K:$L(X)>20!($L(X)<1) X
"^DD",63,63.101,2,21,0)
^^5^5^3030116^
"^DD",63,63.101,2,21,1,0)
This field stores the checksum that is calculated at the time the report 
"^DD",63,63.101,2,21,2,0)
version is initially stored in TIU.  It will be used for comparison in future 
"^DD",63,63.101,2,21,3,0)
print/view requests.  A new checksum will be calculated whenever the report
"^DD",63,63.101,2,21,4,0)
version is printed/viewed, and matching checksums are proof that the report
"^DD",63,63.101,2,21,5,0)
version has not been illegally altered.
"^DD",63,63.101,2,"DT")
3030117
"^DD",63,63.12,0)
ORGAN/TISSUE SUB-FIELD^NL^5^8
"^DD",63,63.12,0,"NM","ORGAN/TISSUE")

"^DD",63,63.12,0,"UP")
63.08
"^DD",63,63.12,.001,0)
NUMBER^NJ2,0^^ ^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",63,63.12,.001,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99
"^DD",63,63.12,.001,21,0)
^^1^1^2911204^
"^DD",63,63.12,.001,21,1,0)
This is the entry number of the organ/tissue(s).
"^DD",63,63.12,.001,"DT")
2840430
"^DD",63,63.12,.01,0)
ORGAN/TISSUE^M*P61'X^LAB(61,^0;1^S:$E(X,1,2)="T-" X=$E(X,3,$L(X)) S SEX=$S('$D(SEX):"MF",SEX="":"MF",1:SEX) S DIC(0)="EMO",DIC("S")="I SEX[$P(^(0),U,3)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.12,.01,1,0)
^.1^^0
"^DD",63,63.12,.01,3)
If entering SNOMED code you may enter the prefix 'T-' (not necessary)
"^DD",63,63.12,.01,4)
W !,"Selects when appropriate Sex related organs.",!,"Ex. A uterus should not be selected for a male patient !!",!
"^DD",63,63.12,.01,12.2)
I $P(^(0),U,3)=SEX!($P(^(0),U,3)="")
"^DD",63,63.12,.01,21,0)
^.001^1^1^3010724^^
"^DD",63,63.12,.01,21,1,0)
This is the organ/tissue(s) being examined.
"^DD",63,63.12,.01,"DT")
2870919
"^DD",63,63.12,1,0)
FUNCTION^63.85PA^^3;0
"^DD",63,63.12,1,21,0)
^.001^2^2^3010724^^^
"^DD",63,63.12,1,21,1,0)
These are the functions associated with this
"^DD",63,63.12,1,21,2,0)
organ/tissue(s).
"^DD",63,63.12,1.5,0)
PROCEDURE^63.82PA^^4;0
"^DD",63,63.12,1.5,21,0)
^^2^2^2911204^^
"^DD",63,63.12,1.5,21,1,0)
These are the procedures associated with this
"^DD",63,63.12,1.5,21,2,0)
organ/tissue(s).
"^DD",63,63.12,2,0)
WEIGHT (gm)^NJ8,3X^^0;3^S Q9=".001,9999,3" D ^LRNUM
"^DD",63,63.12,2,3)
TYPE A NUMBER BETWEEN .001 AND 9999
"^DD",63,63.12,2,21,0)
^^1^1^2911204^
"^DD",63,63.12,2,21,1,0)
This is the weight of the specimen.
"^DD",63,63.12,2,"DT")
2880524
"^DD",63,63.12,3,0)
DISEASE^63.15PA^^1;0
"^DD",63,63.12,3,21,0)
^^2^2^2911204^
"^DD",63,63.12,3,21,1,0)
These are the diseases associated with this
"^DD",63,63.12,3,21,2,0)
organ/tissue(s).
"^DD",63,63.12,4,0)
MORPHOLOGY^63.16PA^^2;0
"^DD",63,63.12,4,21,0)
^^2^2^2911204^
"^DD",63,63.12,4,21,1,0)
These are the morphologies associated with this
"^DD",63,63.12,4,21,2,0)
organ/tissue(s).
"^DD",63,63.12,5,0)
SPECIAL STUDIES^63.819SAI^^5;0
"^DD",63,63.12,5,21,0)
^^2^2^2911204^^
"^DD",63,63.12,5,21,1,0)
These are special studies associated with this
"^DD",63,63.12,5,21,2,0)
organ/tissue(s).
"^DD",63,63.13,0)
RBC ANTIGENS PRESENT(other) SUB-FIELD^NL^.02^2
"^DD",63,63.13,0,"IX","B",63.13,.01)

"^DD",63,63.13,0,"NM","RBC ANTIGENS PRESENT(other)")

"^DD",63,63.13,0,"UP")
63
"^DD",63,63.13,.01,0)
RBC ANTIGENS PRESENT^M*P61.3'X^LAB(61.3,^0;1^S DIC("S")="I $P(^(0),U,5)=""AN""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X I $D(X) S DINUM=X
"^DD",63,63.13,.01,.1)
RBC antigens present other than ABO & Rho(D)
"^DD",63,63.13,.01,1,0)
^.1
"^DD",63,63.13,.01,1,1,0)
63.13^B
"^DD",63,63.13,.01,1,1,1)
S ^LR(DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",63,63.13,.01,1,1,2)
K ^LR(DA(1),1,"B",$E(X,1,30),DA)
"^DD",63,63.13,.01,21,0)
^^2^2^2911126^^
"^DD",63,63.13,.01,21,1,0)
These are red blood cell antigens present other than ABO and
"^DD",63,63.13,.01,21,2,0)
Rho(D).
"^DD",63,63.13,.01,"DT")
2850811
"^DD",63,63.13,.02,0)
RBC ANTIGENS PRESENT COMMENT^F^^0;2^K:$L(X)>80!($L(X)<2) X
"^DD",63,63.13,.02,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.13,.02,21,0)
^^1^1^2911126^^
"^DD",63,63.13,.02,21,1,0)
This is a comment on the red blood cell antigen present.
"^DD",63,63.13,.02,"DT")
2860602
"^DD",63,63.14,0)
HLA ANTIGENS PRESENT SUB-FIELD^NL^.02^2
"^DD",63,63.14,0,"IX","B",63.14,.01)

"^DD",63,63.14,0,"NM","HLA ANTIGENS PRESENT")

"^DD",63,63.14,0,"UP")
63
"^DD",63,63.14,.01,0)
HLA ANTIGEN PRESENT^M*P61.3'X^LAB(61.3,^0;1^S DIC("S")="I $P(^(0),U,5)=""HL""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.14,.01,1,0)
^.1^^0
"^DD",63,63.14,.01,1,1,0)
63.14^B
"^DD",63,63.14,.01,1,1,1)
S ^LR(DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",63,63.14,.01,1,1,2)
K ^LR(DA(1),2,"B",$E(X,1,30),DA)
"^DD",63,63.14,.01,21,0)
^^1^1^2920203^^^
"^DD",63,63.14,.01,21,1,0)
This is the HLA antigen associated with this patient.
"^DD",63,63.14,.01,"DT")
2860603
"^DD",63,63.14,.02,0)
HLA ANTIGEN PRESENT COMMENT^F^^0;2^K:$L(X)>80!($L(X)<2) X
"^DD",63,63.14,.02,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.14,.02,21,0)
^^1^1^2920203^^^
"^DD",63,63.14,.02,21,1,0)
This is a comment about the patient's HLA antigen.
"^DD",63,63.14,.02,"DT")
2860603
"^DD",63,63.141,0)
HLA ANTIGENS ABSENT SUB-FIELD^^.02^2
"^DD",63,63.141,0,"NM","HLA ANTIGENS ABSENT")

"^DD",63,63.141,0,"UP")
63
"^DD",63,63.141,.01,0)
HLA ANTIGENS ABSENT^M*P61.3'X^LAB(61.3,^0;1^S DIC("S")="I $P(^(0),U,5)=""HL""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.141,.01,1,0)
^.1^^0
"^DD",63,63.141,.01,21,0)
^^2^2^2920203^^^
"^DD",63,63.141,.01,21,1,0)
This is the HLA antigen NOT associated with
"^DD",63,63.141,.01,21,2,0)
this patient.
"^DD",63,63.141,.01,"DT")
2860603
"^DD",63,63.141,.02,0)
HLA ANTIGEN ABSENT COMMENT^F^^0;2^K:$L(X)>80!($L(X)<2) X
"^DD",63,63.141,.02,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.141,.02,21,0)
^^2^2^2920203^^
"^DD",63,63.141,.02,21,1,0)
This is a comment on the antigen absent for this
"^DD",63,63.141,.02,21,2,0)
patient.
"^DD",63,63.141,.02,"DT")
2860603
"^DD",63,63.15,0)
DISEASE SUB-FIELD^NL^.01^1
"^DD",63,63.15,0,"NM","DISEASE")

"^DD",63,63.15,0,"UP")
63.12
"^DD",63,63.15,.01,0)
DISEASE^M*P61.4'X^LAB(61.4,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.15,.01,3)
Enter SNOMED code without 'D-' or 'D'
"^DD",63,63.15,.01,21,0)
^^2^2^2911204^
"^DD",63,63.15,.01,21,1,0)
This is a disease associated with this
"^DD",63,63.15,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.15,.01,"DT")
2870919
"^DD",63,63.16,0)
MORPHOLOGY SUB-FIELD^NL^1^2
"^DD",63,63.16,0,"NM","MORPHOLOGY")

"^DD",63,63.16,0,"UP")
63.12
"^DD",63,63.16,.01,0)
MORPHOLOGY^M*P61.1'X^LAB(61.1,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.16,.01,1,0)
^.1^^0
"^DD",63,63.16,.01,3)
Enter SNOMED code without 'M-' or 'M'
"^DD",63,63.16,.01,21,0)
^^2^2^2911204^
"^DD",63,63.16,.01,21,1,0)
This is a morphology associated with this
"^DD",63,63.16,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.16,.01,"DT")
2870919
"^DD",63,63.16,1,0)
ETIOLOGY^63.17PA^^1;0
"^DD",63,63.16,1,21,0)
^^2^2^2911204^
"^DD",63,63.16,1,21,1,0)
These are the etiologies associated with this
"^DD",63,63.16,1,21,2,0)
organ/tissue(s).
"^DD",63,63.17,0)
ETIOLOGY SUB-FIELD^NL^.01^1
"^DD",63,63.17,0,"NM","ETIOLOGY")

"^DD",63,63.17,0,"UP")
63.16
"^DD",63,63.17,.01,0)
ETIOLOGY^M*P61.2'X^LAB(61.2,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.17,.01,3)
Enter SNOMED code without 'E-' or 'E'
"^DD",63,63.17,.01,21,0)
^^2^2^2911204^
"^DD",63,63.17,.01,21,1,0)
This is an etiology associated with this
"^DD",63,63.17,.01,21,2,0)
organ/tissue(s)
"^DD",63,63.17,.01,"DT")
2870919
"^DD",63,63.172,0)
TRANSFUSION REACTION COMMENT SUB-FIELD^^.01^1
"^DD",63,63.172,0,"DT")
2921213
"^DD",63,63.172,0,"NM","TRANSFUSION REACTION COMMENT")

"^DD",63,63.172,0,"UP")
63.0171
"^DD",63,63.172,.01,0)
TRANSFUSION REACTION COMMENT^MF^^0;1^K:$L(X)>68!($L(X)<2) X
"^DD",63,63.172,.01,1,0)
^.1^^0
"^DD",63,63.172,.01,3)
Answer must be 2-68 characters in length.
"^DD",63,63.172,.01,21,0)
^^2^2^2921213^
"^DD",63,63.172,.01,21,1,0)
Comments related to a transfusion reaction such as suspected 
"^DD",63,63.172,.01,21,2,0)
component or units
"^DD",63,63.172,.01,"DT")
2921213
"^DD",63,63.186,0)
TRANSFUSION COMMENT SUB-FIELD^NL^.01^1
"^DD",63,63.186,0,"NM","TRANSFUSION COMMENT")

"^DD",63,63.186,0,"UP")
63.017
"^DD",63,63.186,.01,0)
TRANSFUSION COMMENT^MFX^^0;1^K:$L(X)>80!($L(X)<1) X I $D(X) S L=80,L(1)="JR" D ^LRUB
"^DD",63,63.186,.01,3)
ANSWER MUST BE 1-80 CHARACTERS IN LENGTH
"^DD",63,63.186,.01,4)
S L(1)="JR" D Q^LRUB
"^DD",63,63.186,.01,21,0)
^^1^1^2920203^^^
"^DD",63,63.186,.01,21,1,0)
This is a comment on the transfusion.
"^DD",63,63.186,.01,"DT")
2870519
"^DD",63,63.19,0)
TIU REFERENCE DATE/TIME - SP SUB-FIELD^^2^3
"^DD",63,63.19,0,"DT")
3030116
"^DD",63,63.19,0,"IX","B",63.19,.01)

"^DD",63,63.19,0,"IX","C",63.19,1)

"^DD",63,63.19,0,"NM","TIU REFERENCE DATE/TIME - SP")

"^DD",63,63.19,0,"UP")
63.08
"^DD",63,63.19,.01,0)
TIU REFERENCE DATE/TIME - SP^D^^0;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.19,.01,1,0)
^.1
"^DD",63,63.19,.01,1,1,0)
63.19^B
"^DD",63,63.19,.01,1,1,1)
S ^LR(DA(2),"SP",DA(1),.05,"B",$E(X,1,30),DA)=""
"^DD",63,63.19,.01,1,1,2)
K ^LR(DA(2),"SP",DA(1),.05,"B",$E(X,1,30),DA)
"^DD",63,63.19,.01,21,0)
^.001^3^3^3030116^^^^
"^DD",63,63.19,.01,21,1,0)
This is the date and time that the surgical pathology SF515 was stored in TIU.
"^DD",63,63.19,.01,21,2,0)
It will match the REFERENCE DATE (#1301) field of the corresponding document
"^DD",63,63.19,.01,21,3,0)
in the TIU DOCUMENT (#8925) file.
"^DD",63,63.19,.01,"DEL",1,0)
I 1
"^DD",63,63.19,.01,"DT")
3010829
"^DD",63,63.19,1,0)
TIU ENTRY POINTER - SP^P8925'^TIU(8925,^0;2^Q
"^DD",63,63.19,1,1,0)
^.1
"^DD",63,63.19,1,1,1,0)
63.19^C
"^DD",63,63.19,1,1,1,1)
S ^LR(DA(2),"SP",DA(1),.05,"C",$E(X,1,30),DA)=""
"^DD",63,63.19,1,1,1,2)
K ^LR(DA(2),"SP",DA(1),.05,"C",$E(X,1,30),DA)
"^DD",63,63.19,1,1,1,"DT")
3010726
"^DD",63,63.19,1,21,0)
^.001^3^3^3010829^^
"^DD",63,63.19,1,21,1,0)
This field is a pointer to the TIU DOCUMENT (#8925) file.  It stores the
"^DD",63,63.19,1,21,2,0)
pointer for a surgical pathology SF515 that has been electronically signed and
"^DD",63,63.19,1,21,3,0)
stored in TIU.
"^DD",63,63.19,1,"DEL",1,0)
I 1
"^DD",63,63.19,1,"DT")
3010829
"^DD",63,63.19,2,0)
TIU CHECKSUM - SP^FI^^0;3^K:$L(X)>20!($L(X)<1) X
"^DD",63,63.19,2,3)

"^DD",63,63.19,2,21,0)
^.001^5^5^3030117^^^
"^DD",63,63.19,2,21,1,0)
This field stores the checksum that is calculated at the time the report 
"^DD",63,63.19,2,21,2,0)
version is initially stored in TIU.  It will be used for comparison in future 
"^DD",63,63.19,2,21,3,0)
print/view requests.  A new checksum will be calculated whenever the report
"^DD",63,63.19,2,21,4,0)
version is printed/viewed, and matching checksums are proof that the report
"^DD",63,63.19,2,21,5,0)
version has not been illegally altered.
"^DD",63,63.19,2,"DT")
3030117
"^DD",63,63.199,0)
SPECIMEN COMMENT SUB-FIELD^^.01^1
"^DD",63,63.199,0,"NM","SPECIMEN COMMENT")

"^DD",63,63.199,0,"UP")
63.01
"^DD",63,63.199,.01,0)
SPECIMEN COMMENT^MF^^0;1^K:$L(X)>68!($L(X)<2) X
"^DD",63,63.199,.01,1,0)
^.1^^0
"^DD",63,63.199,.01,3)
Answer must be 2-68 characters in length.
"^DD",63,63.199,.01,21,0)
^^1^1^2911203^^
"^DD",63,63.199,.01,21,1,0)
This is a comment on the specimen.
"^DD",63,63.199,.01,"DEL",1,0)
I '$D(^XUSEC("LRBLSUPER",DUZ))
"^DD",63,63.199,.01,"DT")
2890418
"^DD",63,63.2,0)
AUTOPSY ORGAN/TISSUE SUB-FIELD^NL^2005.1^9
"^DD",63,63.2,0,"DT")
2950523
"^DD",63,63.2,0,"IX","B",63.2,.01)

"^DD",63,63.2,0,"NM","AUTOPSY ORGAN/TISSUE")

"^DD",63,63.2,0,"UP")
63
"^DD",63,63.2,.001,0)
NUMBER^NJ3,0^^ ^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",63,63.2,.001,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 999
"^DD",63,63.2,.001,21,0)
^^2^2^2911205^
"^DD",63,63.2,.001,21,1,0)
This is the entry number of the autopsy
"^DD",63,63.2,.001,21,2,0)
organ/tissue(s) being examined.
"^DD",63,63.2,.001,"DT")
2840806
"^DD",63,63.2,.01,0)
AUTOPSY ORGAN/TISSUE^M*P61'X^LAB(61,^0;1^S:$E(X,1,2)="T-1" X=$E(X,3,$L(X)) S SEX=$S('$D(SEX):"MF",SEX="":"MF",1:SEX) S DIC(0)="EMO",DIC("S")="I SEX[$P(^(0),U,3)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.2,.01,1,0)
^.1
"^DD",63,63.2,.01,1,1,0)
63.2^B
"^DD",63,63.2,.01,1,1,1)
S ^LR(DA(1),"AY","B",$E(X,1,30),DA)=""
"^DD",63,63.2,.01,1,1,2)
K ^LR(DA(1),"AY","B",$E(X,1,30),DA)
"^DD",63,63.2,.01,3)
If entering SNOMED code prefix "T-" may be used (not necessary)
"^DD",63,63.2,.01,4)
W !,"Selects when appropriate sex specific organ or tissue."
"^DD",63,63.2,.01,21,0)
^^1^1^2911205^
"^DD",63,63.2,.01,21,1,0)
This is the autopsy organ/tissue(s) being examined.
"^DD",63,63.2,.01,"DT")
2870919
"^DD",63,63.2,1,0)
FUNCTION^63.25PA^^3;0
"^DD",63,63.2,1,21,0)
^^2^2^2911205^^
"^DD",63,63.2,1,21,1,0)
These are the functions associated with the
"^DD",63,63.2,1,21,2,0)
organ/tissue(s).
"^DD",63,63.2,1.5,0)
PROCEDURE^63.24PA^^4;0
"^DD",63,63.2,1.5,21,0)
^^2^2^2911205^
"^DD",63,63.2,1.5,21,1,0)
These are the procedures associated with this
"^DD",63,63.2,1.5,21,2,0)
organ/tissue(s).
"^DD",63,63.2,3,0)
DISEASE^63.21PA^^1;0
"^DD",63,63.2,3,21,0)
^^2^2^2911205^
"^DD",63,63.2,3,21,1,0)
These are the diseases associated with this
"^DD",63,63.2,3,21,2,0)
organ/tissue(s).
"^DD",63,63.2,4,0)
MORPHOLOGY^63.22PA^^2;0
"^DD",63,63.2,4,21,0)
^^2^2^2911205^
"^DD",63,63.2,4,21,1,0)
These are the morphologies associated with this
"^DD",63,63.2,4,21,2,0)
organ/tissue(s).
"^DD",63,63.2,5,0)
SPECIAL STUDIES^63.26SA^^5;0
"^DD",63,63.2,5,21,0)
^^2^2^2911205^^
"^DD",63,63.2,5,21,1,0)
These are special studies associated with this
"^DD",63,63.2,5,21,2,0)
organ/tissue(s).
"^DD",63,63.2,2005,0)
IMAGE (GROSS)^63.28P^^2005;0
"^DD",63,63.2,2005,21,0)
^^3^3^2950523^
"^DD",63,63.2,2005,21,1,0)
Images associated with Autopsy Organ/Tissue reports are stored in this
"^DD",63,63.2,2005,21,2,0)
multiple within the Autopsy Organ/Tissue field of the Lab Data (#63)
"^DD",63,63.2,2005,21,3,0)
file.
"^DD",63,63.2,2005.1,0)
IMAGE (MICROSCOPIC)^63.45P^^2005.1;0
"^DD",63,63.2,2005.1,21,0)
^^3^3^2950523^
"^DD",63,63.2,2005.1,21,1,0)
Images associated with Autopsy Organ/Tissue reports are stored in this
"^DD",63,63.2,2005.1,21,2,0)
multiple within the Autopsy Organ/Tissue field of the Lab Data (#63)
"^DD",63,63.2,2005.1,21,3,0)
file.
"^DD",63,63.201,0)
GROSS DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.201,0,"NM","GROSS DESCRIPTION")

"^DD",63,63.201,0,"UP")
63.02
"^DD",63,63.201,.01,0)
GROSS DESCRIPTION^W^^0;1^Q
"^DD",63,63.201,.01,"DT")
2850302
"^DD",63,63.202,0)
SPECIMEN SUB-FIELD^NL^1^2
"^DD",63,63.202,0,"DT")
3030306
"^DD",63,63.202,0,"NM","SPECIMEN")

"^DD",63,63.202,0,"UP")
63.02
"^DD",63,63.202,.01,0)
SPECIMEN^MF^^0;1^K:$L(X)>75!($L(X)<2) X
"^DD",63,63.202,.01,3)
ANSWER MUST BE 2-75 CHARACTERS IN LENGTH
"^DD",63,63.202,.01,21,0)
^^1^1^2911127^
"^DD",63,63.202,.01,21,1,0)
This is the specimen submitted for testing.
"^DD",63,63.202,.01,"DT")
2870803
"^DD",63,63.202,1,0)
EPON BLOCK^63.2021A^^1;0
"^DD",63,63.202,1,21,0)
^^1^1^2911210^
"^DD",63,63.202,1,21,1,0)
Identification of epon block prepared from specimen.
"^DD",63,63.2021,0)
EPON BLOCK SUB-FIELD^^1^4
"^DD",63,63.2021,0,"DT")
2930422
"^DD",63,63.2021,0,"IX","B",63.2021,.01)

"^DD",63,63.2021,0,"NM","EPON BLOCK")

"^DD",63,63.2021,0,"UP")
63.202
"^DD",63,63.2021,.01,0)
EPON BLOCK^MF^^0;1^K:$L(X)>9!($L(X)<1) X
"^DD",63,63.2021,.01,1,0)
^.1
"^DD",63,63.2021,.01,1,1,0)
63.2021^B
"^DD",63,63.2021,.01,1,1,1)
S ^LR(DA(3),"EM",DA(2),.1,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",63,63.2021,.01,1,1,2)
K ^LR(DA(3),"EM",DA(2),.1,DA(1),1,"B",$E(X,1,30),DA)
"^DD",63,63.2021,.01,3)
Answer must be 1-9 characters in length.
"^DD",63,63.2021,.01,21,0)
^^1^1^2911210^
"^DD",63,63.2021,.01,21,1,0)
Identification of epon block prepared from specimen.
"^DD",63,63.2021,.01,"DT")
2911210
"^DD",63,63.2021,.02,0)
DATE/TIME BLOCK PREPARED^D^^0;2^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.2021,.02,21,0)
^^1^1^2911210^
"^DD",63,63.2021,.02,21,1,0)
Date/time epon block prepared.  Used for workload recording.
"^DD",63,63.2021,.02,"DT")
2911210
"^DD",63,63.2021,.03,0)
BLOCK COUNTED^S^1:YES;0:NO;^0;3^Q
"^DD",63,63.2021,.03,21,0)
^^1^1^2911210^
"^DD",63,63.2021,.03,21,1,0)
If block counted for workload a 'YES' is entered.
"^DD",63,63.2021,.03,"DT")
2911210
"^DD",63,63.2021,1,0)
EM PROCEDURE^63.20211PA^^1;0
"^DD",63,63.2021,1,12)
Selects only EM procedures (thick &/or thin sections)
"^DD",63,63.2021,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""EM"""
"^DD",63,63.2021,1,21,0)
^^2^2^2911210^
"^DD",63,63.2021,1,21,1,0)
EM procedures are recorded here.  They are either thick (slides)
"^DD",63,63.2021,1,21,2,0)
 or thin (grids) sections.
"^DD",63,63.2021,1,"DT")
2911210
"^DD",63,63.20211,0)
EM PROCEDURE SUB-FIELD^^.13^12
"^DD",63,63.20211,0,"DT")
2930422
"^DD",63,63.20211,0,"NM","EM PROCEDURE")

"^DD",63,63.20211,0,"UP")
63.2021
"^DD",63,63.20211,.01,0)
EM PROCEDURE^M*P60'^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""EM""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.20211,.01,1,0)
^.1^^0
"^DD",63,63.20211,.01,"DT")
2911210
"^DD",63,63.20211,.02,0)
SECTIONS PREPARED(#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.20211,.02,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.20211,.02,4)
W !,"Enter the number of slides or grids prepared."
"^DD",63,63.20211,.02,21,0)
^^2^2^2911210^
"^DD",63,63.20211,.02,21,1,0)
The number of thick (slides) or thin (grids) sections prepared
"^DD",63,63.20211,.02,21,2,0)
 is kept here.
"^DD",63,63.20211,.02,"DT")
2911210
"^DD",63,63.20211,.04,0)
DATE/TIME SECTIONS PREPARED^D^^0;4^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.20211,.04,21,0)
^^1^1^2940510^
"^DD",63,63.20211,.04,21,1,0)
When sections are prepared
"^DD",63,63.20211,.04,"DT")
2911217
"^DD",63,63.20211,.05,0)
DATE/TIME SECTIONS EXAMINED^D^^0;5^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.20211,.05,21,0)
^^1^1^2940510^^
"^DD",63,63.20211,.05,21,1,0)
When sections are examined
"^DD",63,63.20211,.05,"DT")
2911217
"^DD",63,63.20211,.06,0)
SECTIONS COUNTED(#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.20211,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.20211,.06,21,0)
^^1^1^2940510^
"^DD",63,63.20211,.06,21,1,0)
Number of sections counted
"^DD",63,63.20211,.06,"DT")
2911217
"^DD",63,63.20211,.07,0)
NEW SECTIONS^NJ3,0^^0;7^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.20211,.07,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.20211,.07,21,0)
^^1^1^2920109^
"^DD",63,63.20211,.07,21,1,0)
Sections added since prior preparation time.
"^DD",63,63.20211,.07,"DT")
2920109
"^DD",63,63.20211,.08,0)
SECTIONS EXAMINED(#)^NJ3,0^^0;8^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.20211,.08,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.20211,.08,21,0)
^^1^1^2940510^
"^DD",63,63.20211,.08,21,1,0)
Number of sections examined
"^DD",63,63.20211,.08,"DT")
2920109
"^DD",63,63.20211,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.20211,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.20211,.09,21,0)
^^1^1^2930422^
"^DD",63,63.20211,.09,21,1,0)
Number of non-control slides counted.
"^DD",63,63.20211,.09,"DT")
2930422
"^DD",63,63.20211,.1,0)
PRINTS MADE(#)^NJ3,0^^0;10^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.20211,.1,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.20211,.1,21,0)
^^1^1^2940510^
"^DD",63,63.20211,.1,21,1,0)
Number of prints made
"^DD",63,63.20211,.1,"DT")
2920109
"^DD",63,63.20211,.11,0)
DATE/TIME PRINTS MADE^D^^0;11^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.20211,.11,3)

"^DD",63,63.20211,.11,21,0)
^^1^1^2940510^
"^DD",63,63.20211,.11,21,1,0)
When the prints are made.
"^DD",63,63.20211,.11,"DT")
2920109
"^DD",63,63.20211,.12,0)
PRINTS COUNTED(#)^NJ3,0^^0;12^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.20211,.12,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.20211,.12,21,0)
^^1^1^2940510^
"^DD",63,63.20211,.12,21,1,0)
Number of prints counted
"^DD",63,63.20211,.12,"DT")
2920109
"^DD",63,63.20211,.13,0)
EXAMINED SECTIONS COUNTED(#)^NJ3,0^^0;13^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.20211,.13,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.20211,.13,21,0)
^^1^1^2940510^
"^DD",63,63.20211,.13,21,1,0)
Number of examined sections that were counted.
"^DD",63,63.20211,.13,"DT")
2930422
"^DD",63,63.203,0)
ICD9CM CODE SUB-FIELD^NL^.01^1
"^DD",63,63.203,0,"NM","ICD9CM CODE")

"^DD",63,63.203,0,"UP")
63.02
"^DD",63,63.203,.01,0)
ICD9CM CODE^MP80'^ICD9(^0;1^Q
"^DD",63,63.203,.01,21,0)
^^1^1^2911127^
"^DD",63,63.203,.01,21,1,0)
This is the ICD9CM code on this specimen.
"^DD",63,63.203,.01,"DT")
2850304
"^DD",63,63.204,0)
EM DIAGNOSIS SUB-FIELD^^.01^1
"^DD",63,63.204,0,"DT")
2930716
"^DD",63,63.204,0,"NM","EM DIAGNOSIS")

"^DD",63,63.204,0,"UP")
63.02
"^DD",63,63.204,.01,0)
EM DIAGNOSIS^W^^0;1^Q
"^DD",63,63.204,.01,"DT")
2930716
"^DD",63,63.205,0)
OPERATIVE FINDINGS SUB-FIELD^NL^.01^1
"^DD",63,63.205,0,"NM","OPERATIVE FINDINGS")

"^DD",63,63.205,0,"UP")
63.02
"^DD",63,63.205,.01,0)
OPERATIVE FINDINGS^W^^0;1^Q
"^DD",63,63.205,.01,3)

"^DD",63,63.205,.01,"DT")
2850303
"^DD",63,63.206,0)
POSTOPERATIVE DIAGNOSIS SUB-FIELD^NL^.01^1
"^DD",63,63.206,0,"NM","POSTOPERATIVE DIAGNOSIS")

"^DD",63,63.206,0,"UP")
63.02
"^DD",63,63.206,.01,0)
POSTOPERATIVE DIAGNOSIS^W^^0;1^Q
"^DD",63,63.206,.01,3)

"^DD",63,63.206,.01,21,0)
^^1^1^2911127^
"^DD",63,63.206,.01,21,1,0)
This is the post-operative diagnosis for this specimen.
"^DD",63,63.206,.01,"DT")
2850303
"^DD",63,63.207,0)
SUPPLEMENTARY REPORT SUB-FIELD^NL^2^4
"^DD",63,63.207,0,"DT")
3030924
"^DD",63,63.207,0,"NM","SUPPLEMENTARY REPORT")

"^DD",63,63.207,0,"UP")
63.02
"^DD",63,63.207,.01,0)
SUPPLEMENTARY REPORT DATE/TIME^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.207,.01,21,0)
^^1^1^2911127^
"^DD",63,63.207,.01,21,1,0)
This is the date and time of the supplementary report.
"^DD",63,63.207,.01,"DEL",1,0)
I 1 D EN^DDIOL("Deletion is not permitted","","!!")
"^DD",63,63.207,.01,"DT")
2850302
"^DD",63,63.207,.02,0)
RELEASE SUPPLEMENTARY REPORT^S^1:YES;0:NO;1:yes;0:no;^0;2^Q
"^DD",63,63.207,.02,21,0)
^^2^2^2900924^^^
"^DD",63,63.207,.02,21,1,0)
If supplementary report is to be displayed or printed outside
"^DD",63,63.207,.02,21,2,0)
 of lab the report must be released by entering 'YES'.
"^DD",63,63.207,.02,"DT")
2900920
"^DD",63,63.207,1,0)
DESCRIPTION^63.218^^1;0
"^DD",63,63.207,1,21,0)
^^1^1^2911127^
"^DD",63,63.207,1,21,1,0)
This is a description of the supplementary report.
"^DD",63,63.207,2,0)
SUPPLEMENTARY REPORT MODIFIED^63.2072DA^^2;0
"^DD",63,63.207,2,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.207,2,21,1,0)
This is the date/time in which this supplementary report was modified.  This
"^DD",63,63.207,2,21,2,0)
information is stored for audit trail purposes.  It is updated by the software
"^DD",63,63.207,2,21,3,0)
and can only be modified from programmer mode.
"^DD",63,63.207,2,"DT")
3000908
"^DD",63,63.2072,0)
SUPPLEMENTARY REPORT MODIFIED SUB-FIELD^^1^5
"^DD",63,63.2072,0,"DT")
3030924
"^DD",63,63.2072,0,"IX","B",63.2072,.01)

"^DD",63,63.2072,0,"NM","SUPPLEMENTARY REPORT MODIFIED")

"^DD",63,63.2072,0,"UP")
63.207
"^DD",63,63.2072,.01,0)
SUPPLEMENTARY REPORT MODIFIED^D^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.2072,.01,1,0)
^.1
"^DD",63,63.2072,.01,1,1,0)
63.2072^B
"^DD",63,63.2072,.01,1,1,1)
S ^LR(DA(3),"EM",DA(2),1.2,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",63,63.2072,.01,1,1,2)
K ^LR(DA(3),"EM",DA(2),1.2,DA(1),2,"B",$E(X,1,30),DA)
"^DD",63,63.2072,.01,3)
This is the date/time in which this supplementary report was modified.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.2072,.01,21,0)
^.001^2^2^3000908^^^^
"^DD",63,63.2072,.01,21,1,0)
This is the date/time in which this supplementary report was modified.
"^DD",63,63.2072,.01,21,2,0)
It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.2072,.01,"DT")
3000908
"^DD",63,63.2072,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.2072,.02,3)
This is the DUZ of the person who modified the supplementary report.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.2072,.02,21,0)
^.001^2^2^3001121^^^^
"^DD",63,63.2072,.02,21,1,0)
This is the DUZ of the person who modified the supplementary report.
"^DD",63,63.2072,.02,21,2,0)
It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.2072,.02,"DT")
2991206
"^DD",63,63.2072,.03,0)
PERSON RELEASING THE SUPP. RPT^P200'^VA(200,^0;3^Q
"^DD",63,63.2072,.03,3)
This is the DUZ of the person who released the supplementary report. It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.2072,.03,21,0)
^^2^2^3030924^
"^DD",63,63.2072,.03,21,1,0)
This is the DUZ of the person who released the supplementary report.  It is
"^DD",63,63.2072,.03,21,2,0)
updated by the software and can only be modified from programmer mode.
"^DD",63,63.2072,.03,"DT")
3031125
"^DD",63,63.2072,.04,0)
SUPP REPORT RELEASE DATE/TIME^DX^^0;4^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.2072,.04,3)
This is the date/time in which this supplementary report was released. It is updated by the software and can only be modified from programmer mode. 
"^DD",63,63.2072,.04,21,0)
^^2^2^3030924^
"^DD",63,63.2072,.04,21,1,0)
This is the date/time in which this supplementary report was released.  It is
"^DD",63,63.2072,.04,21,2,0)
updated by the software and can only be modified from programmer mode.
"^DD",63,63.2072,.04,"DT")
3040205
"^DD",63,63.2072,1,0)
PREMODIFICATION TEXT^63.20721^^1;0
"^DD",63,63.2072,1,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.2072,1,21,1,0)
This is the text of the supplementary report as it existed before it was
"^DD",63,63.2072,1,21,2,0)
modified.  It is updated by the software and can only be modified from
"^DD",63,63.2072,1,21,3,0)
programmer mode.
"^DD",63,63.20721,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.20721,0,"DT")
2991206
"^DD",63,63.20721,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.20721,0,"UP")
63.2072
"^DD",63,63.20721,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.20721,.01,3)
This is the text of the supplementary report as it existed before it was modified.  This field is updated by the software and can only be modified from programmer mode.
"^DD",63,63.20721,.01,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.20721,.01,21,1,0)
This is the text of the supplementary report as it existed before it was
"^DD",63,63.20721,.01,21,2,0)
modified.  This field is updated by the software and can only be
"^DD",63,63.20721,.01,21,3,0)
modified from programmer mode.
"^DD",63,63.20721,.01,"DT")
2991206
"^DD",63,63.208,0)
COMMENT SUB-FIELD^NL^.01^1
"^DD",63,63.208,0,"NM","COMMENT")

"^DD",63,63.208,0,"UP")
63.02
"^DD",63,63.208,.01,0)
COMMENT^MF^^0;1^K:$L(X)>75!($L(X)<1) X
"^DD",63,63.208,.01,3)
ANSWER MUST BE 1-75 CHARACTERS IN LENGTH
"^DD",63,63.208,.01,21,0)
^^1^1^2911127^
"^DD",63,63.208,.01,21,1,0)
This is a comment on this specimen.
"^DD",63,63.208,.01,"DT")
2850318
"^DD",63,63.21,0)
DISEASE SUB-FIELD^NL^.01^1
"^DD",63,63.21,0,"NM","DISEASE")

"^DD",63,63.21,0,"UP")
63.2
"^DD",63,63.21,.01,0)
DISEASE^M*P61.4'X^LAB(61.4,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.21,.01,21,0)
^^2^2^2911205^
"^DD",63,63.21,.01,21,1,0)
This is a disease associated with this
"^DD",63,63.21,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.21,.01,"DT")
2870919
"^DD",63,63.211,0)
MICROSCOPIC EXAMINATION SUB-FIELD^NL^.01^1
"^DD",63,63.211,0,"NM","MICROSCOPIC EXAMINATION")

"^DD",63,63.211,0,"UP")
63.02
"^DD",63,63.211,.01,0)
MICROSCOPIC EXAMINATION^W^^0;1^Q
"^DD",63,63.211,.01,"DT")
2930716
"^DD",63,63.212,0)
EM ORGAN/TISSUE SUB-FIELD^NL^5^7
"^DD",63,63.212,0,"NM","EM ORGAN/TISSUE")

"^DD",63,63.212,0,"UP")
63.02
"^DD",63,63.212,.001,0)
NUMBER^NJ2,0^^ ^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",63,63.212,.001,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99
"^DD",63,63.212,.001,21,0)
^^1^1^2911127^
"^DD",63,63.212,.001,21,1,0)
This is the entry number of the organ/tissue(s).
"^DD",63,63.212,.001,"DT")
2850302
"^DD",63,63.212,.01,0)
EM ORGAN/TISSUE^M*P61'X^LAB(61,^0;1^S:$E(X,1,2)="T-" X=$E(X,3,$L(X)) S SEX=$S('$D(SEX):"MF",SEX="":"MF",1:SEX) S DIC(0)="EMO",DIC("S")="I SEX[$P(^(0),U,3)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.212,.01,4)
W !,"Selects when appropriate sex related organs.",!,"Ex. A uterus should not be selected for a male patient !!",!
"^DD",63,63.212,.01,21,0)
^^1^1^2911127^^
"^DD",63,63.212,.01,21,1,0)
This is the organ/tissue(s) being examined.
"^DD",63,63.212,.01,"DT")
2870919
"^DD",63,63.212,1,0)
FUNCTION^63.285PA^^3;0
"^DD",63,63.212,1,21,0)
^^2^2^2911127^^
"^DD",63,63.212,1,21,1,0)
These are the functions associated with this
"^DD",63,63.212,1,21,2,0)
organ/tissue(s).
"^DD",63,63.212,1.5,0)
PROCEDURE^63.282PA^^4;0
"^DD",63,63.212,1.5,21,0)
^^2^2^2911127^
"^DD",63,63.212,1.5,21,1,0)
These are the procedures associated with this
"^DD",63,63.212,1.5,21,2,0)
organ/tissue.
"^DD",63,63.212,3,0)
DISEASE^63.215PA^^1;0
"^DD",63,63.212,3,21,0)
^^2^2^2911127^
"^DD",63,63.212,3,21,1,0)
These are the diseases associated with this
"^DD",63,63.212,3,21,2,0)
organ/tissue(s).
"^DD",63,63.212,4,0)
MORPHOLOGY^63.216PA^^2;0
"^DD",63,63.212,4,21,0)
^^2^2^2911127^
"^DD",63,63.212,4,21,1,0)
These are the morphologies associated with this
"^DD",63,63.212,4,21,2,0)
organ/tissue(s).
"^DD",63,63.212,5,0)
SPECIAL STUDIES^63.219SAI^^5;0
"^DD",63,63.212,5,21,0)
^^2^2^2911127^
"^DD",63,63.212,5,21,1,0)
These are special studies associated with this
"^DD",63,63.212,5,21,2,0)
organ/tissue(s).
"^DD",63,63.213,0)
BRIEF CLINICAL HISTORY SUB-FIELD^NL^.01^1
"^DD",63,63.213,0,"NM","BRIEF CLINICAL HISTORY")

"^DD",63,63.213,0,"UP")
63.02
"^DD",63,63.213,.01,0)
BRIEF CLINICAL HISTORY^W^^0;1^Q
"^DD",63,63.213,.01,"DT")
2850302
"^DD",63,63.214,0)
PREOPERATIVE DIAGNOSIS SUB-FIELD^NL^.01^1
"^DD",63,63.214,0,"NM","PREOPERATIVE DIAGNOSIS")

"^DD",63,63.214,0,"UP")
63.02
"^DD",63,63.214,.01,0)
PREOPERATIVE DIAGNOSIS^W^^0;1^Q
"^DD",63,63.214,.01,3)

"^DD",63,63.214,.01,"DT")
2850303
"^DD",63,63.215,0)
DISEASE SUB-FIELD^NL^.01^1
"^DD",63,63.215,0,"NM","DISEASE")

"^DD",63,63.215,0,"UP")
63.212
"^DD",63,63.215,.01,0)
DISEASE^M*P61.4'X^LAB(61.4,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.215,.01,21,0)
^^2^2^2911127^
"^DD",63,63.215,.01,21,1,0)
This is the disease associated with this
"^DD",63,63.215,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.215,.01,"DT")
2870919
"^DD",63,63.216,0)
MORPHOLOGY SUB-FIELD^NL^1^2
"^DD",63,63.216,0,"NM","MORPHOLOGY")

"^DD",63,63.216,0,"UP")
63.212
"^DD",63,63.216,.01,0)
MORPHOLOGY^M*P61.1'X^LAB(61.1,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.216,.01,21,0)
^^1^1^2911202^^^
"^DD",63,63.216,.01,21,1,0)
This is the morphology associated with this organ/tissue(s).
"^DD",63,63.216,.01,"DT")
2870919
"^DD",63,63.216,1,0)
ETIOLOGY^63.217PA^^1;0
"^DD",63,63.216,1,21,0)
^^2^2^2911202^^
"^DD",63,63.216,1,21,1,0)
These are the etiologies associated with
"^DD",63,63.216,1,21,2,0)
this organ/tissue(s).
"^DD",63,63.217,0)
ETIOLOGY SUB-FIELD^NL^.01^1
"^DD",63,63.217,0,"NM","ETIOLOGY")

"^DD",63,63.217,0,"UP")
63.216
"^DD",63,63.217,.01,0)
ETIOLOGY^M*P61.2'X^LAB(61.2,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.217,.01,21,0)
^^2^2^2911127^
"^DD",63,63.217,.01,21,1,0)
This is the etiology associated with this
"^DD",63,63.217,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.217,.01,"DT")
2870919
"^DD",63,63.218,0)
DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.218,0,"NM","DESCRIPTION")

"^DD",63,63.218,0,"UP")
63.207
"^DD",63,63.218,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",63,63.218,.01,"DT")
2850302
"^DD",63,63.219,0)
SPECIAL STUDIES SUB-FIELD^NL^1^4
"^DD",63,63.219,0,"ID",.03)
W "   ",$P(^(0),U,3)
"^DD",63,63.219,0,"NM","SPECIAL STUDIES")

"^DD",63,63.219,0,"UP")
63.212
"^DD",63,63.219,.01,0)
SPECIAL STUDIES^MS^I:IMMUNOFLUORESCENCE;P:PHOTOGRAPHY;C:CONSULTATION;L:LIGHT MICROSCOPY;IP:IMMUNOPEROXIDASE;^0;1^Q
"^DD",63,63.219,.01,21,0)
^^2^2^2911127^
"^DD",63,63.219,.01,21,1,0)
This is a special study associated with this
"^DD",63,63.219,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.219,.01,"DT")
2850408
"^DD",63,63.219,.02,0)
DATE^RD^^0;2^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.219,.02,21,0)
^^1^1^2911127^
"^DD",63,63.219,.02,21,1,0)
This is the date of the special study.
"^DD",63,63.219,.02,"DT")
2850302
"^DD",63,63.219,.03,0)
ID #^F^^0;3^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.219,.03,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63.219,.03,21,0)
^^1^1^2911127^
"^DD",63,63.219,.03,21,1,0)
This is the ID number of the special study.
"^DD",63,63.219,.03,"DT")
2850302
"^DD",63,63.219,1,0)
DESCRIPTION^63.221^^1;0
"^DD",63,63.219,1,21,0)
^^1^1^2911127^
"^DD",63,63.219,1,21,1,0)
This is the description of the special study.
"^DD",63,63.22,0)
MORPHOLOGY SUB-FIELD^NL^1^2
"^DD",63,63.22,0,"IX","B",63.22,.01)

"^DD",63,63.22,0,"NM","MORPHOLOGY")

"^DD",63,63.22,0,"UP")
63.2
"^DD",63,63.22,.01,0)
MORPHOLOGY^M*P61.1'X^LAB(61.1,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.22,.01,1,0)
^.1
"^DD",63,63.22,.01,1,1,0)
63.22^B
"^DD",63,63.22,.01,1,1,1)
S ^LR(DA(2),"AY",DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",63,63.22,.01,1,1,2)
K ^LR(DA(2),"AY",DA(1),2,"B",$E(X,1,30),DA)
"^DD",63,63.22,.01,21,0)
^^2^2^2911205^
"^DD",63,63.22,.01,21,1,0)
This is a morphology associated with this
"^DD",63,63.22,.01,21,2,0)
organ/tissue.
"^DD",63,63.22,.01,"DT")
2870919
"^DD",63,63.22,1,0)
ETIOLOGY^63.23PA^^1;0
"^DD",63,63.22,1,21,0)
^^2^2^2911205^
"^DD",63,63.22,1,21,1,0)
These are the etiologies associated with this
"^DD",63,63.22,1,21,2,0)
organ/tissue(s).
"^DD",63,63.22005,0)
IMAGE SUB-FIELD^^.01^1
"^DD",63,63.22005,0,"DT")
2950523
"^DD",63,63.22005,0,"IX","B",63.22005,.01)

"^DD",63,63.22005,0,"NM","IMAGE")

"^DD",63,63.22005,0,"UP")
63.02
"^DD",63,63.22005,.01,0)
IMAGE^MP2005'^MAG(2005,^0;1^Q
"^DD",63,63.22005,.01,1,0)
^.1
"^DD",63,63.22005,.01,1,1,0)
63.22005^B
"^DD",63,63.22005,.01,1,1,1)
S ^LR(DA(2),"EM",DA(1),2005,"B",$E(X,1,30),DA)=""
"^DD",63,63.22005,.01,1,1,2)
K ^LR(DA(2),"EM",DA(1),2005,"B",$E(X,1,30),DA)
"^DD",63,63.22005,.01,3)
IMAGE POINTER BACK TO IMAGE FILE
"^DD",63,63.22005,.01,"DT")
2950523
"^DD",63,63.221,0)
DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.221,0,"NM","DESCRIPTION")

"^DD",63,63.221,0,"UP")
63.219
"^DD",63,63.221,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",63,63.221,.01,"DT")
2850302
"^DD",63,63.23,0)
ETIOLOGY SUB-FIELD^NL^.01^1
"^DD",63,63.23,0,"NM","ETIOLOGY")

"^DD",63,63.23,0,"UP")
63.22
"^DD",63,63.23,.01,0)
ETIOLOGY^M*P61.2'X^LAB(61.2,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.23,.01,21,0)
^^2^2^2911205^
"^DD",63,63.23,.01,21,1,0)
This is an etiology associated with this
"^DD",63,63.23,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.23,.01,"DT")
2870919
"^DD",63,63.24,0)
PROCEDURE SUB-FIELD^NL^.02^2
"^DD",63,63.24,0,"NM","PROCEDURE")

"^DD",63,63.24,0,"UP")
63.2
"^DD",63,63.24,.01,0)
PROCEDURE^M*P61.5'X^LAB(61.5,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.24,.01,21,0)
^^2^2^2911205^
"^DD",63,63.24,.01,21,1,0)
This is the procedure associated with this
"^DD",63,63.24,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.24,.01,"DT")
2870919
"^DD",63,63.24,.02,0)
RESULT^S^0:NEG;1:POS;^0;2^Q
"^DD",63,63.24,.02,21,0)
^^1^1^2891230^
"^DD",63,63.24,.02,21,1,0)
If result is positive enter '1' or 'P'.
"^DD",63,63.24,.02,"DT")
2891230
"^DD",63,63.242,0)
DATE MICROSCOPIC EXAM MODIFIED SUB-FIELD^^1^3
"^DD",63,63.242,0,"NM","DATE MICROSCOPIC EXAM MODIFIED")

"^DD",63,63.242,0,"UP")
63.02
"^DD",63,63.242,.01,0)
DATE MICROSCOPIC EXAM MODIFIED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.242,.01,21,0)
^^2^2^2911127^
"^DD",63,63.242,.01,21,1,0)
This is the date of modification of the microscopic
"^DD",63,63.242,.01,21,2,0)
examination/diagnosis.
"^DD",63,63.242,.01,"DT")
2930716
"^DD",63,63.242,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.242,.02,21,0)
^^1^1^2911127^
"^DD",63,63.242,.02,21,1,0)
This is the person making the modification.
"^DD",63,63.242,.02,"DT")
2910630
"^DD",63,63.242,1,0)
PREMODIFICATION TEXT^63.243^^1;0
"^DD",63,63.242,1,21,0)
^^1^1^2911127^
"^DD",63,63.242,1,21,1,0)
This is the text of the modification.
"^DD",63,63.243,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.243,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.243,0,"UP")
63.242
"^DD",63,63.243,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.243,.01,"DT")
2861118
"^DD",63,63.25,0)
FUNCTION SUB-FIELD^NL^.01^1
"^DD",63,63.25,0,"NM","FUNCTION")

"^DD",63,63.25,0,"UP")
63.2
"^DD",63,63.25,.01,0)
FUNCTION^M*P61.3'X^LAB(61.3,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.25,.01,21,0)
^^2^2^2911205^
"^DD",63,63.25,.01,21,1,0)
This is the function associated with this
"^DD",63,63.25,.01,21,2,0)
organ/tissues(s).
"^DD",63,63.25,.01,"DT")
2870919
"^DD",63,63.26,0)
SPECIAL STUDIES SUB-FIELD^NL^1^4
"^DD",63,63.26,0,"DT")
2920715
"^DD",63,63.26,0,"NM","SPECIAL STUDIES")

"^DD",63,63.26,0,"UP")
63.2
"^DD",63,63.26,.01,0)
SPECIAL STUDIES^MS^E:EM;I:IMMUNOFLUORESCENCE;P:PHOTOGRAPHY;C:CONSULTATION;F:FROZEN SECTION;IP:IMMUNOPEROXIDASE;^0;1^Q
"^DD",63,63.26,.01,21,0)
^^2^2^2911205^^
"^DD",63,63.26,.01,21,1,0)
This is the special study associated with this
"^DD",63,63.26,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.26,.01,"DT")
2920715
"^DD",63,63.26,.02,0)
DATE^RD^^0;2^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.26,.02,21,0)
^^1^1^2911205^
"^DD",63,63.26,.02,21,1,0)
This is the date of the special studies.
"^DD",63,63.26,.02,"DT")
2850311
"^DD",63,63.26,.03,0)
ID #^F^^0;3^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.26,.03,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63.26,.03,21,0)
^^1^1^2911205^^
"^DD",63,63.26,.03,21,1,0)
This is the identification number of the special studies.
"^DD",63,63.26,.03,"DT")
2850311
"^DD",63,63.26,1,0)
DESCRIPTION^63.27^^1;0
"^DD",63,63.26,1,21,0)
^^1^1^2911205^^^^
"^DD",63,63.26,1,21,1,0)
This is the description of the special studies.
"^DD",63,63.27,0)
DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.27,0,"NM","DESCRIPTION")

"^DD",63,63.27,0,"UP")
63.26
"^DD",63,63.27,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",63,63.27,.01,21,0)
^^1^1^2911205^
"^DD",63,63.27,.01,21,1,0)
This is the description of the special studies.
"^DD",63,63.27,.01,"DT")
2850311
"^DD",63,63.28,0)
IMAGE (GROSS) SUB-FIELD^^.01^1
"^DD",63,63.28,0,"DT")
2950523
"^DD",63,63.28,0,"IX","B",63.28,.01)

"^DD",63,63.28,0,"NM","IMAGE (GROSS)")

"^DD",63,63.28,0,"UP")
63.2
"^DD",63,63.28,.01,0)
IMAGE (GROSS)^MP2005'^MAG(2005,^0;1^Q
"^DD",63,63.28,.01,1,0)
^.1
"^DD",63,63.28,.01,1,1,0)
63.28^B
"^DD",63,63.28,.01,1,1,1)
S ^LR(DA(2),"AY",DA(1),2005,"B",$E(X,1,30),DA)=""
"^DD",63,63.28,.01,1,1,2)
K ^LR(DA(2),"AY",DA(1),2005,"B",$E(X,1,30),DA)
"^DD",63,63.28,.01,3)
IMAGE POINTER BACK TO IMAGE FILE
"^DD",63,63.28,.01,"DT")
2950523
"^DD",63,63.282,0)
PROCEDURE SUB-FIELD^NL^.02^2
"^DD",63,63.282,0,"NM","PROCEDURE")

"^DD",63,63.282,0,"UP")
63.212
"^DD",63,63.282,.01,0)
PROCEDURE^M*P61.5'X^LAB(61.5,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.282,.01,21,0)
^^2^2^2911202^^
"^DD",63,63.282,.01,21,1,0)
This is the procedure associated with this
"^DD",63,63.282,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.282,.01,"DT")
2870919
"^DD",63,63.282,.02,0)
RESULT^S^0:NEG;1:POS;^0;2^Q
"^DD",63,63.282,.02,21,0)
^^1^1^2891230^
"^DD",63,63.282,.02,21,1,0)
If result of procedure is positive enter '1' or 'P'.
"^DD",63,63.282,.02,"DT")
2891230
"^DD",63,63.285,0)
FUNCTION SUB-FIELD^NL^.01^1
"^DD",63,63.285,0,"NM","FUNCTION")

"^DD",63,63.285,0,"UP")
63.212
"^DD",63,63.285,.01,0)
FUNCTION^M*P61.3'X^LAB(61.3,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.285,.01,21,0)
^^1^1^2911202^^^^
"^DD",63,63.285,.01,21,1,0)
This is the function associated with this organ/tissue(s).
"^DD",63,63.285,.01,"DT")
2870919
"^DD",63,63.322,0)
CLINICAL DIAGNOSES SUB-FIELD^NL^.01^1
"^DD",63,63.322,0,"NM","CLINICAL DIAGNOSES")

"^DD",63,63.322,0,"UP")
63
"^DD",63,63.322,.01,0)
CLINICAL DIAGNOSES^W^^0;1^Q
"^DD",63,63.322,.01,"DT")
2850311
"^DD",63,63.323,0)
PATHOLOGICAL DIAGNOSES SUB-FIELD^NL^.01^1
"^DD",63,63.323,0,"NM","PATHOLOGICAL DIAGNOSES")

"^DD",63,63.323,0,"UP")
63
"^DD",63,63.323,.01,0)
PATHOLOGICAL DIAGNOSES^W^^0;1^Q
"^DD",63,63.323,.01,"DT")
2850311
"^DD",63,63.324,0)
AUTOPSY SUPPLEMENTARY REPORT SUB-FIELD^^2^4
"^DD",63,63.324,0,"DT")
3030924
"^DD",63,63.324,0,"NM","AUTOPSY SUPPLEMENTARY REPORT")

"^DD",63,63.324,0,"UP")
63
"^DD",63,63.324,.01,0)
SUPPLEMENTARY REPORT DATE^D^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.324,.01,21,0)
^.001^1^1^3010831^^^
"^DD",63,63.324,.01,21,1,0)
Date of supplementary autopsy report
"^DD",63,63.324,.01,"AUDIT")
n
"^DD",63,63.324,.01,"DEL",1,0)
I 1 D EN^DDIOL("Deletion is not permitted","","!!")
"^DD",63,63.324,.01,"DT")
2880810
"^DD",63,63.324,.02,0)
RELEASE SUPPLEMENTARY REPORT^S^1:YES;0:NO;1:yes;0:no;^0;2^Q
"^DD",63,63.324,.02,21,0)
^.001^2^2^3011031^^
"^DD",63,63.324,.02,21,1,0)
If the supplementary report is to be displayed or printed outside of lab, the
"^DD",63,63.324,.02,21,2,0)
report must be released by entering 'YES'.
"^DD",63,63.324,.02,"DT")
3011030
"^DD",63,63.324,1,0)
DESCRIPTION^63.3241^^1;0
"^DD",63,63.324,1,21,0)
^.001^1^1^3010831^^
"^DD",63,63.324,1,21,1,0)
Description of the supplementary autopsy
"^DD",63,63.324,2,0)
SUPPLEMENTARY REPORT MODIFIED^63.3242DA^^2;0
"^DD",63,63.324,2,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.324,2,21,1,0)
This is the date/time in which this supplementary report was modified.  This
"^DD",63,63.324,2,21,2,0)
information is stored for audit trail purposes.  It is updated by the software
"^DD",63,63.324,2,21,3,0)
and can only be changed from programmer mode.
"^DD",63,63.324,2,"DT")
3000908
"^DD",63,63.3241,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",63,63.3241,0,"NM","DESCRIPTION")

"^DD",63,63.3241,0,"UP")
63.324
"^DD",63,63.3241,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",63,63.3241,.01,"DT")
2880810
"^DD",63,63.3242,0)
SUPPLEMENTARY REPORT MODIFIED SUB-FIELD^^1^5
"^DD",63,63.3242,0,"DT")
3030924
"^DD",63,63.3242,0,"IX","B",63.3242,.01)

"^DD",63,63.3242,0,"NM","SUPPLEMENTARY REPORT MODIFIED")

"^DD",63,63.3242,0,"UP")
63.324
"^DD",63,63.3242,.01,0)
SUPPLEMENTARY REPORT MODIFIED^D^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.3242,.01,1,0)
^.1
"^DD",63,63.3242,.01,1,1,0)
63.3242^B
"^DD",63,63.3242,.01,1,1,1)
S ^LR(DA(2),84,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",63,63.3242,.01,1,1,2)
K ^LR(DA(2),84,DA(1),2,"B",$E(X,1,30),DA)
"^DD",63,63.3242,.01,3)
This is the date/time in which this supplementary report was modified.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.3242,.01,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.3242,.01,21,1,0)
This is the date/time in which this supplementary report was modified.  This
"^DD",63,63.3242,.01,21,2,0)
information is stored for audit trail purposes.  It is updated by the software
"^DD",63,63.3242,.01,21,3,0)
and can only be changed from programmer mode.
"^DD",63,63.3242,.01,"DT")
3000908
"^DD",63,63.3242,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.3242,.02,3)
This the DUZ of the person who modified the supplementary report.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.3242,.02,21,0)
^.001^2^2^3001121^^^^
"^DD",63,63.3242,.02,21,1,0)
This is the DUZ of the person who modified the supplementary report.  It is
"^DD",63,63.3242,.02,21,2,0)
updated by the software and can only be modified from programmer mode.
"^DD",63,63.3242,.02,"DT")
3000427
"^DD",63,63.3242,.03,0)
PERSON RELEASING THE SUPP. RPT^P200'^VA(200,^0;3^Q
"^DD",63,63.3242,.03,3)
This is the DUZ of the person who released the supplementary report.  It is updated by software and can only be modified from programmer mode.
"^DD",63,63.3242,.03,21,0)
^^2^2^3030924^
"^DD",63,63.3242,.03,21,1,0)
This is the DUZ of the person who released the supplementary report.  It is
"^DD",63,63.3242,.03,21,2,0)
updated by the software and can only be modified from programmer mode.
"^DD",63,63.3242,.03,"DT")
3031125
"^DD",63,63.3242,.04,0)
SUPP REPORT RELEASE DATE/TIME^DX^^0;4^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.3242,.04,3)
This is the date/time in which this supplementary report was released.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.3242,.04,21,0)
^^3^3^3030924^
"^DD",63,63.3242,.04,21,1,0)
This is the date/time in which this supplementary report was released.  This
"^DD",63,63.3242,.04,21,2,0)
information is stored for audit trail purposes.  It is updated by the software
"^DD",63,63.3242,.04,21,3,0)
and can only be changed from programmer mode.
"^DD",63,63.3242,.04,"DT")
3040205
"^DD",63,63.3242,1,0)
PREMODIFICATION TEXT^63.32421^^1;0
"^DD",63,63.3242,1,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.3242,1,21,1,0)
This is the text of the supplementary report as it existed before it was
"^DD",63,63.3242,1,21,2,0)
modified.  It is updated by the software and can only be modified from
"^DD",63,63.3242,1,21,3,0)
programmer mode.
"^DD",63,63.32421,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.32421,0,"DT")
2991214
"^DD",63,63.32421,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.32421,0,"UP")
63.3242
"^DD",63,63.32421,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.32421,.01,3)
This is the text of the supplementary report as it existed before it was modified.  This field is updated by the software and can only be modified from programmer mode.
"^DD",63,63.32421,.01,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.32421,.01,21,1,0)
This is the text of the supplementary report as it existed before it was
"^DD",63,63.32421,.01,21,2,0)
modified.  This field is updated by the software and can only be
"^DD",63,63.32421,.01,21,3,0)
modified from programmer mode.
"^DD",63,63.32421,.01,"DT")
2991214
"^DD",63,63.331,0)
PARAFFIN BLOCK SUB-FIELD^^1^4
"^DD",63,63.331,0,"DT")
2930420
"^DD",63,63.331,0,"IX","B",63.331,.01)

"^DD",63,63.331,0,"NM","PARAFFIN BLOCK")

"^DD",63,63.331,0,"UP")
63.033
"^DD",63,63.331,.01,0)
PARAFFIN BLOCK ID^MF^^0;1^K:$L(X)>9!($L(X)<1) X
"^DD",63,63.331,.01,1,0)
^.1
"^DD",63,63.331,.01,1,1,0)
63.331^B
"^DD",63,63.331,.01,1,1,1)
S ^LR(DA(2),33,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",63,63.331,.01,1,1,2)
K ^LR(DA(2),33,DA(1),1,"B",$E(X,1,30),DA)
"^DD",63,63.331,.01,3)
Answer must be 1-9 characters in length.
"^DD",63,63.331,.01,21,0)
^^2^2^2920205^
"^DD",63,63.331,.01,21,1,0)
The identification number on the paraffin block used to 
"^DD",63,63.331,.01,21,2,0)
make slides for staining.
"^DD",63,63.331,.01,"DT")
2940912
"^DD",63,63.331,.02,0)
DATE/TIME BLOCK PREPARED^RD^^0;2^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.331,.02,21,0)
^^1^1^2920205^
"^DD",63,63.331,.02,21,1,0)
Date/time block prepared.  Used for workload recording.
"^DD",63,63.331,.02,"DT")
2920205
"^DD",63,63.331,.03,0)
BLOCK COUNTED^S^1:YES;0:NO;^0;3^Q
"^DD",63,63.331,.03,21,0)
^^1^1^2920205^
"^DD",63,63.331,.03,21,1,0)
Used for workload recording.
"^DD",63,63.331,.03,"DT")
2920205
"^DD",63,63.331,1,0)
STAIN/PROCEDURE^63.3311PA^^1;0
"^DD",63,63.331,1,12)
Selects only stains/procedures associated with anatomic pathology.
"^DD",63,63.331,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.331,1,21,0)
^^2^2^2920205^
"^DD",63,63.331,1,21,1,0)
List of tissue stains or procedures performed on the slides 
"^DD",63,63.331,1,21,2,0)
cut from the paraffin block.
"^DD",63,63.3311,0)
STAIN/PROCEDURE SUB-FIELD^^.09^8
"^DD",63,63.3311,0,"DT")
2930420
"^DD",63,63.3311,0,"NM","STAIN/PROCEDURE")

"^DD",63,63.3311,0,"UP")
63.331
"^DD",63,63.3311,.01,0)
STAIN/PROCEDURE^M*P60'X^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.3311,.01,1,0)
^.1^^0
"^DD",63,63.3311,.01,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.3311,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.3311,.01,21,0)
^^2^2^2920205^
"^DD",63,63.3311,.01,21,1,0)
A tissue stain or procedure performed on a slide cut from a 
"^DD",63,63.3311,.01,21,2,0)
paraffin block.
"^DD",63,63.3311,.01,"DT")
2920206
"^DD",63,63.3311,.02,0)
SLIDES PREPARED (#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",63,63.3311,.02,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",63,63.3311,.02,21,0)
^^2^2^2920205^
"^DD",63,63.3311,.02,21,1,0)
The number of slides for which a specific stain or procedure 
"^DD",63,63.3311,.02,21,2,0)
was performed.
"^DD",63,63.3311,.02,"DT")
2920205
"^DD",63,63.3311,.03,0)
CONTROL SLIDES (#)^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",63,63.3311,.03,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",63,63.3311,.03,21,0)
^^1^1^2920205^
"^DD",63,63.3311,.03,21,1,0)
Number of control slides prepared.
"^DD",63,63.3311,.03,"DT")
2920205
"^DD",63,63.3311,.04,0)
DATE/TIME SLIDES STAINED^D^^0;4^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.3311,.04,21,0)
^^1^1^2930331^
"^DD",63,63.3311,.04,21,1,0)
Date slides were stained
"^DD",63,63.3311,.04,"DT")
2920205
"^DD",63,63.3311,.05,0)
DATE/TIME SLIDES EXAMINED^D^^0;5^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.3311,.05,21,0)
^^1^1^2930331^
"^DD",63,63.3311,.05,21,1,0)
Date slides were examined
"^DD",63,63.3311,.05,"DT")
2920205
"^DD",63,63.3311,.06,0)
SLIDES COUNTED (#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.3311,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.3311,.06,21,0)
^^1^1^2920205^
"^DD",63,63.3311,.06,21,1,0)
Last number of slides counted for workload.
"^DD",63,63.3311,.06,"DT")
2920205
"^DD",63,63.3311,.07,0)
LABELS TO PRINT^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.3311,.07,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.3311,.07,21,0)
^^1^1^2930331^
"^DD",63,63.3311,.07,21,1,0)
Amount of labels needed to print
"^DD",63,63.3311,.07,"DT")
2920205
"^DD",63,63.3311,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.3311,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.3311,.09,21,0)
^^1^1^2940510^
"^DD",63,63.3311,.09,21,1,0)
Number of non-control slides counted
"^DD",63,63.3311,.09,"DT")
2930420
"^DD",63,63.45,0)
IMAGE (MICROSCOPIC) SUB-FIELD^^.01^1
"^DD",63,63.45,0,"DT")
2950523
"^DD",63,63.45,0,"IX","B",63.45,.01)

"^DD",63,63.45,0,"NM","IMAGE (MICROSCOPIC)")

"^DD",63,63.45,0,"UP")
63.2
"^DD",63,63.45,.01,0)
IMAGE (MICROSCOPIC)^MP2005'^MAG(2005,^0;1^Q
"^DD",63,63.45,.01,1,0)
^.1
"^DD",63,63.45,.01,1,1,0)
63.45^B
"^DD",63,63.45,.01,1,1,1)
S ^LR(DA(2),"AY",DA(1),2005.1,"B",$E(X,1,30),DA)=""
"^DD",63,63.45,.01,1,1,2)
K ^LR(DA(2),"AY",DA(1),2005.1,"B",$E(X,1,30),DA)
"^DD",63,63.45,.01,3)
IMAGE POINTER BACK TO IMAGE FILE
"^DD",63,63.45,.01,"DT")
2950523
"^DD",63,63.46,0)
SERUM ANTIBODY SUB-FIELD^NL^.02^2
"^DD",63,63.46,0,"NM","SERUM ANTIBODY")

"^DD",63,63.46,0,"UP")
63.01
"^DD",63,63.46,.01,0)
SERUM ANTIBODY^M*P61.3'X^LAB(61.3,^0;1^S DIC("W")="W ""  "",$P(^(0),U,2),""  "",$P(^(0),U,1)",DIC(0)="EQM",DIC("S")="I $P(^(0),U,5)=""AB""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.46,.01,12)
Limits entry to only blood group antibodies
"^DD",63,63.46,.01,12.1)
S DIC("S")="I $P(^(0),U,5)=""AB"""
"^DD",63,63.46,.01,12.2)
I $P(^(0),U,5)="AB"
"^DD",63,63.46,.01,21,0)
^^1^1^2911127^
"^DD",63,63.46,.01,21,1,0)
These are the patient's serum antibodies.
"^DD",63,63.46,.01,"DT")
2990521
"^DD",63,63.46,.02,0)
ANTIBODY COMMENT^F^^0;2^K:$L(X)>30!($L(X)<2) X
"^DD",63,63.46,.02,3)
ANSWER MUST BE 2-30 CHARACTERS IN LENGTH
"^DD",63,63.46,.02,21,0)
^^1^1^2911127^
"^DD",63,63.46,.02,21,1,0)
This is a comment on the antibodies.
"^DD",63,63.46,.02,"DT")
2850829
"^DD",63,63.47,0)
TIU REFERENCE DATE/TIME - CY SUB-FIELD^^2^3
"^DD",63,63.47,0,"DT")
3030116
"^DD",63,63.47,0,"IX","B",63.47,.01)

"^DD",63,63.47,0,"IX","C",63.47,1)

"^DD",63,63.47,0,"NM","TIU REFERENCE DATE/TIME - CY")

"^DD",63,63.47,0,"UP")
63.09
"^DD",63,63.47,.01,0)
TIU REFERENCE DATE/TIME - CY^D^^0;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.47,.01,1,0)
^.1
"^DD",63,63.47,.01,1,1,0)
63.47^B
"^DD",63,63.47,.01,1,1,1)
S ^LR(DA(2),"CY",DA(1),.05,"B",$E(X,1,30),DA)=""
"^DD",63,63.47,.01,1,1,2)
K ^LR(DA(2),"CY",DA(1),.05,"B",$E(X,1,30),DA)
"^DD",63,63.47,.01,21,0)
^.001^3^3^3010829^^
"^DD",63,63.47,.01,21,1,0)
This is the date and time that the cytopathology SF515 was stored in TIU.  It
"^DD",63,63.47,.01,21,2,0)
will match the REFERENCE DATE (#1301) field of the corresponding document in
"^DD",63,63.47,.01,21,3,0)
the TIU DOCUMENT (#8925) file.
"^DD",63,63.47,.01,"DEL",1,0)
I
"^DD",63,63.47,.01,"DT")
3010829
"^DD",63,63.47,1,0)
TIU ENTRY POINTER - CY^P8925'^TIU(8925,^0;2^Q
"^DD",63,63.47,1,1,0)
^.1
"^DD",63,63.47,1,1,1,0)
63.47^C
"^DD",63,63.47,1,1,1,1)
S ^LR(DA(2),"CY",DA(1),.05,"C",$E(X,1,30),DA)=""
"^DD",63,63.47,1,1,1,2)
K ^LR(DA(2),"CY",DA(1),.05,"C",$E(X,1,30),DA)
"^DD",63,63.47,1,1,1,"DT")
3010727
"^DD",63,63.47,1,21,0)
^.001^3^3^3010829^^
"^DD",63,63.47,1,21,1,0)
This field is a pointer to the TIU DOCUMENT (#8925) file.  It stores the
"^DD",63,63.47,1,21,2,0)
pointer for a cytopathology SF515 that has been electronically signed and
"^DD",63,63.47,1,21,3,0)
stored in TIU.
"^DD",63,63.47,1,"DEL",1,0)
I
"^DD",63,63.47,1,"DT")
3010829
"^DD",63,63.47,2,0)
TIU CHECKSUM - CY^FI^^0;3^K:$L(X)>20!($L(X)<1) X
"^DD",63,63.47,2,21,0)
^^5^5^3030116^^^
"^DD",63,63.47,2,21,1,0)
This field stores the checksum that is calculated at the time the report 
"^DD",63,63.47,2,21,2,0)
version is initially stored in TIU.  It will be used for comparison in future 
"^DD",63,63.47,2,21,3,0)
print/view requests.  A new checksum will be calculated whenever the report
"^DD",63,63.47,2,21,4,0)
version is printed/viewed, and matching checksums are proof that the report
"^DD",63,63.47,2,21,5,0)
version has not been illegally altered.
"^DD",63,63.47,2,"DT")
3030117
"^DD",63,63.48,0)
ANTIBODY SCREEN COMMENT SUB-FIELD^NL^.01^1
"^DD",63,63.48,0,"NM","ANTIBODY SCREEN COMMENT")

"^DD",63,63.48,0,"UP")
63.01
"^DD",63,63.48,.01,0)
ANTIBODY SCREEN COMMENT^MFX^^0;1^K:$L(X)>80!($L(X)<2) X I $D(X) S L=80,L(1)="JX" D ^LRUB
"^DD",63,63.48,.01,3)
ANSWER MUST BE 2-80 CHARACTERS IN LENGTH
"^DD",63,63.48,.01,4)
S L(1)="JX" D Q^LRUB
"^DD",63,63.48,.01,21,0)
^^1^1^2911127^
"^DD",63,63.48,.01,21,1,0)
This is a comment on the antibody screen.
"^DD",63,63.48,.01,"DT")
2870519
"^DD",63,63.49,0)
TIU REFERENCE DATE/TIME - EM SUB-FIELD^^2^3
"^DD",63,63.49,0,"DT")
3030116
"^DD",63,63.49,0,"IX","B",63.49,.01)

"^DD",63,63.49,0,"IX","C",63.49,1)

"^DD",63,63.49,0,"NM","TIU REFERENCE DATE/TIME - EM")

"^DD",63,63.49,0,"UP")
63.02
"^DD",63,63.49,.01,0)
TIU REFERENCE DATE/TIME - EM^D^^0;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.49,.01,1,0)
^.1
"^DD",63,63.49,.01,1,1,0)
63.49^B
"^DD",63,63.49,.01,1,1,1)
S ^LR(DA(2),"EM",DA(1),.05,"B",$E(X,1,30),DA)=""
"^DD",63,63.49,.01,1,1,2)
K ^LR(DA(2),"EM",DA(1),.05,"B",$E(X,1,30),DA)
"^DD",63,63.49,.01,21,0)
^.001^3^3^3010829^^
"^DD",63,63.49,.01,21,1,0)
This is the date and time that the electron microscopy SF515 was stored in TIU.
"^DD",63,63.49,.01,21,2,0)
It will match the REFERENCE DATE (#1301) field of the corresponding document
"^DD",63,63.49,.01,21,3,0)
in the TIU DOCUMENT (#8925) file.
"^DD",63,63.49,.01,"DEL",1,0)
I
"^DD",63,63.49,.01,"DT")
3010829
"^DD",63,63.49,1,0)
TIU ENTRY POINTER - EM^P8925'^TIU(8925,^0;2^Q
"^DD",63,63.49,1,1,0)
^.1
"^DD",63,63.49,1,1,1,0)
63.49^C
"^DD",63,63.49,1,1,1,1)
S ^LR(DA(2),"EM",DA(1),.05,"C",$E(X,1,30),DA)=""
"^DD",63,63.49,1,1,1,2)
K ^LR(DA(2),"EM",DA(1),.05,"C",$E(X,1,30),DA)
"^DD",63,63.49,1,1,1,"DT")
3010727
"^DD",63,63.49,1,21,0)
^.001^3^3^3010829^^
"^DD",63,63.49,1,21,1,0)
This field is a pointer to the TIU DOCUMENT (#8925) file.  It stores the
"^DD",63,63.49,1,21,2,0)
pointer for an electron microscopy SF515 that has been electronically signed
"^DD",63,63.49,1,21,3,0)
and stored in TIU.
"^DD",63,63.49,1,"DEL",1,0)
I
"^DD",63,63.49,1,"DT")
3010829
"^DD",63,63.49,2,0)
TIU CHECKSUM^FI^^0;3^K:$L(X)>20!($L(X)<1) X
"^DD",63,63.49,2,21,0)
^^5^5^3030116^
"^DD",63,63.49,2,21,1,0)
This field stores the checksum that is calculated at the time the report 
"^DD",63,63.49,2,21,2,0)
version is initially stored in TIU.  It will be used for comparison in future 
"^DD",63,63.49,2,21,3,0)
print/view requests.  A new checksum will be calculated whenever the report
"^DD",63,63.49,2,21,4,0)
version is printed/viewed, and matching checksums are proof that the report
"^DD",63,63.49,2,21,5,0)
version has not been illegally altered.
"^DD",63,63.49,2,"DT")
3030117
"^DD",63,63.801,0)
FROZEN SECTION SUB-FIELD^^.01^1
"^DD",63,63.801,0,"DT")
2921202
"^DD",63,63.801,0,"NM","FROZEN SECTION")

"^DD",63,63.801,0,"UP")
63.08
"^DD",63,63.801,.01,0)
FROZEN SECTION^W^^0;1^Q
"^DD",63,63.801,.01,"DT")
2921202
"^DD",63,63.802,0)
SURGICAL PATH DIAGNOSIS SUB-FIELD^^.01^1
"^DD",63,63.802,0,"DT")
2930715
"^DD",63,63.802,0,"NM","SURGICAL PATH DIAGNOSIS")

"^DD",63,63.802,0,"UP")
63.08
"^DD",63,63.802,.01,0)
SURGICAL PATH DIAGNOSIS^W^^0;1^Q
"^DD",63,63.802,.01,"DT")
2930716
"^DD",63,63.808,0)
AUTOPSY ICD9CM CODE SUB-FIELD^NL^.01^1
"^DD",63,63.808,0,"NM","AUTOPSY ICD9CM CODE")

"^DD",63,63.808,0,"UP")
63
"^DD",63,63.808,.01,0)
AUTOPSY ICD9CM CODE^MP80'X^ICD9(^0;1^I $D(X) S DINUM=X
"^DD",63,63.808,.01,21,0)
^^1^1^2911205^
"^DD",63,63.808,.01,21,1,0)
This is the ICD9CM code on this autopsy.
"^DD",63,63.808,.01,"DT")
2850225
"^DD",63,63.81,0)
GROSS DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.81,0,"NM","GROSS DESCRIPTION")

"^DD",63,63.81,0,"UP")
63.08
"^DD",63,63.81,.01,0)
GROSS DESCRIPTION^W^^0;1^Q
"^DD",63,63.81,.01,"DT")
2840911
"^DD",63,63.811,0)
MICROSCOPIC DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.811,0,"NM","MICROSCOPIC DESCRIPTION")

"^DD",63,63.811,0,"UP")
63.08
"^DD",63,63.811,.01,0)
MICROSCOPIC DESCRIPTION^W^^0;1^Q
"^DD",63,63.811,.01,21,0)
^^1^1^2930715^
"^DD",63,63.811,.01,21,1,0)
Microscopic slide examination report is entered here.
"^DD",63,63.811,.01,"DT")
2930715
"^DD",63,63.812,0)
SPECIMEN SUB-FIELD^NL^3^8
"^DD",63,63.812,0,"DT")
3030306
"^DD",63,63.812,0,"IX","B",63.812,.01)

"^DD",63,63.812,0,"NM","SPECIMEN")

"^DD",63,63.812,0,"UP")
63.08
"^DD",63,63.812,.01,0)
SPECIMEN^MRF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>75!($L(X)<2) X
"^DD",63,63.812,.01,1,0)
^.1
"^DD",63,63.812,.01,1,1,0)
63.812^B
"^DD",63,63.812,.01,1,1,1)
S ^LR(DA(2),"SP",DA(1),.1,"B",$E(X,1,30),DA)=""
"^DD",63,63.812,.01,1,1,2)
K ^LR(DA(2),"SP",DA(1),.1,"B",$E(X,1,30),DA)
"^DD",63,63.812,.01,3)
Answer must be 2-75 characters in length.
"^DD",63,63.812,.01,21,0)
^^1^1^2911204^^^
"^DD",63,63.812,.01,21,1,0)
This is the specimen submitted.
"^DD",63,63.812,.01,"DT")
2910504
"^DD",63,63.812,.02,0)
SURGICAL WORKLOAD PROFILE^*P60'^LAB(60,^0;2^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.812,.02,12)
Selects only surgical pathology entries.
"^DD",63,63.812,.02,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.812,.02,21,0)
^.001^1^1^3030505^^
"^DD",63,63.812,.02,21,1,0)
Profile of surgical workload
"^DD",63,63.812,.02,"DT")
2910326
"^DD",63,63.812,.03,0)
GROSS DESCRIPTION/CUTTING DATE^D^^0;3^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.812,.03,.1)
GROSS DESCRIPTION/CUTTING DATE & TIME
"^DD",63,63.812,.03,3)
If gross description/cutting performed by a nonphysician enter date/time done.
"^DD",63,63.812,.03,4)
K DZ
"^DD",63,63.812,.03,21,0)
^^2^2^2911230^
"^DD",63,63.812,.03,21,1,0)
If gross description/cutting of a specimen is performed by a non-physician 
"^DD",63,63.812,.03,21,2,0)
date and time are entered here.
"^DD",63,63.812,.03,"DT")
2911230
"^DD",63,63.812,.04,0)
GROSS DESCRIPTION/CUTTING TYPE^S^1:ROUTINE GROSS SURGICAL;2:EXTENSIVE GROSS SURGICAL;3:TECHNICAL ASSISTANCE SURGICAL;^0;4^Q
"^DD",63,63.812,.04,21,0)
^^8^8^2911230^^
"^DD",63,63.812,.04,21,1,0)
Select 1 or 'R' when the gross description and cutting of surgical 
"^DD",63,63.812,.04,21,2,0)
tissue is performed by a nonphysician (e.g., a pathology assistant)
"^DD",63,63.812,.04,21,3,0)
 Select 2 or 'E' when extensive gross processing is required by 
"^DD",63,63.812,.04,21,4,0)
technical assistants in addition to the usual dissection and 
"^DD",63,63.812,.04,21,5,0)
description (e.g., orientation of a renal biopsy and splitting it 
"^DD",63,63.812,.04,21,6,0)
for light and electron microscopy, and immunofluorescence)
"^DD",63,63.812,.04,21,7,0)
 Select 3 or 'T' when technical or clerical staff assist with
"^DD",63,63.812,.04,21,8,0)
gross processing.
"^DD",63,63.812,.04,"DT")
2911230
"^DD",63,63.812,.05,0)
GROSS DESCRIPTION COUNTED^S^1:YES;0:NO;^0;5^Q
"^DD",63,63.812,.05,3)
Enter 'YES' if gross description counted for workload.
"^DD",63,63.812,.05,21,0)
^^1^1^2940510^
"^DD",63,63.812,.05,21,1,0)
Whether the gross description is counted for workload
"^DD",63,63.812,.05,"DT")
2910717
"^DD",63,63.812,1,0)
PARAFFIN BLOCK^63.8121A^^1;0
"^DD",63,63.812,1,21,0)
^^1^1^2911204^^^
"^DD",63,63.812,1,21,1,0)
This is a list of paraffin blocks prepared from the specimen submitted.
"^DD",63,63.812,2,0)
PLASTIC BLOCK^63.822A^^2;0
"^DD",63,63.812,2,21,0)
^^1^1^2911204^
"^DD",63,63.812,2,21,1,0)
These are the plastic blocks set up on this specimen.
"^DD",63,63.812,3,0)
FROZEN TISSUE BLOCK^63.824A^^3;0
"^DD",63,63.812,3,21,0)
^^2^2^2911204^^
"^DD",63,63.812,3,21,1,0)
This is the list of frozen tissues prepared from 
"^DD",63,63.812,3,21,2,0)
the specimen submitted.
"^DD",63,63.812,3,"DT")
2911228
"^DD",63,63.8121,0)
PARAFFIN BLOCK SUB-FIELD^^1^4
"^DD",63,63.8121,0,"DT")
2930402
"^DD",63,63.8121,0,"IX","B",63.8121,.01)

"^DD",63,63.8121,0,"NM","PARAFFIN BLOCK")

"^DD",63,63.8121,0,"UP")
63.812
"^DD",63,63.8121,.01,0)
PARAFFIN BLOCK ID^MFX^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>9!($L(X)<1) X
"^DD",63,63.8121,.01,1,0)
^.1
"^DD",63,63.8121,.01,1,1,0)
63.8121^B
"^DD",63,63.8121,.01,1,1,1)
S ^LR(DA(3),"SP",DA(2),.1,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",63,63.8121,.01,1,1,2)
K ^LR(DA(3),"SP",DA(2),.1,DA(1),1,"B",$E(X,1,30),DA)
"^DD",63,63.8121,.01,1,1,"DT")
2920113
"^DD",63,63.8121,.01,3)
ANSWER MUST BE 1-9 CHARACTERS IN LENGTH
"^DD",63,63.8121,.01,4)

"^DD",63,63.8121,.01,21,0)
^^2^2^2911204^^
"^DD",63,63.8121,.01,21,1,0)
The identification number on the paraffin block used to make
"^DD",63,63.8121,.01,21,2,0)
 the slides for any stains or procedures.
"^DD",63,63.8121,.01,"DT")
2920113
"^DD",63,63.8121,.02,0)
DATE/TIME BLOCK PREPARED^D^^0;2^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.8121,.02,21,0)
^^1^1^2910804^
"^DD",63,63.8121,.02,21,1,0)
Date/time block prepared.  Used for workload recording.
"^DD",63,63.8121,.02,"DT")
2910804
"^DD",63,63.8121,.03,0)
BLOCK COUNTED^S^1:YES;0:NO;^0;3^Q
"^DD",63,63.8121,.03,21,0)
^^2^2^2910804^^
"^DD",63,63.8121,.03,21,1,0)
Used for workload recording.
"^DD",63,63.8121,.03,21,2,0)
 If block counted a 'YES' is entered.
"^DD",63,63.8121,.03,"DT")
2910804
"^DD",63,63.8121,1,0)
STAIN/PROCEDURE^63.8122PA^^1;0
"^DD",63,63.8121,1,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.8121,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.8121,1,21,0)
^^2^2^2911204^^^
"^DD",63,63.8121,1,21,1,0)
List of tissue stains or procedures performed on the slides cut
"^DD",63,63.8121,1,21,2,0)
 from the paraffin block.
"^DD",63,63.8122,0)
STAIN/PROCEDURE SUB-FIELD^^.09^8
"^DD",63,63.8122,0,"DT")
2930402
"^DD",63,63.8122,0,"NM","STAIN/PROCEDURE")

"^DD",63,63.8122,0,"UP")
63.8121
"^DD",63,63.8122,.01,0)
STAIN/PROCEDURE^M*P60'X^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.8122,.01,1,0)
^.1^^0
"^DD",63,63.8122,.01,21,0)
^^2^2^2911204^^^
"^DD",63,63.8122,.01,21,1,0)
A tissue stain or procedure performed on a slide cut from a
"^DD",63,63.8122,.01,21,2,0)
 paraffin block.
"^DD",63,63.8122,.01,"DT")
2860718
"^DD",63,63.8122,.02,0)
SLIDES PREPARED (#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.8122,.02,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 999
"^DD",63,63.8122,.02,21,0)
^^1^1^2911204^^
"^DD",63,63.8122,.02,21,1,0)
The number of slides for which a specific stain or procedure was performed.
"^DD",63,63.8122,.02,"DT")
2860717
"^DD",63,63.8122,.03,0)
CONTROL SLIDES (#)^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.8122,.03,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99
"^DD",63,63.8122,.03,21,0)
^^1^1^2911204^
"^DD",63,63.8122,.03,21,1,0)
This is the number of control slides prepared.
"^DD",63,63.8122,.03,"DT")
2861030
"^DD",63,63.8122,.04,0)
DATE/TIME SLIDES STAINED^DX^^0;4^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.8122,.04,3)
Future date/time not allowed.
"^DD",63,63.8122,.04,21,0)
^^1^1^2940510^
"^DD",63,63.8122,.04,21,1,0)
When slides are stained
"^DD",63,63.8122,.04,"DT")
2910503
"^DD",63,63.8122,.05,0)
DATE/TIME SLIDES EXAMINED^DX^^0;5^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.8122,.05,3)
Future date/time not allowed.
"^DD",63,63.8122,.05,21,0)
^^1^1^2940510^
"^DD",63,63.8122,.05,21,1,0)
When slides are examined
"^DD",63,63.8122,.05,"DT")
2910503
"^DD",63,63.8122,.06,0)
SLIDES COUNTED (#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.8122,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.8122,.06,21,0)
^^1^1^2910503^
"^DD",63,63.8122,.06,21,1,0)
Last number of slides counted for workload.
"^DD",63,63.8122,.06,"DT")
2910503
"^DD",63,63.8122,.07,0)
LABELS TO PRINT^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.8122,.07,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.8122,.07,21,0)
^^1^1^2940510^
"^DD",63,63.8122,.07,21,1,0)
Number of labels to print
"^DD",63,63.8122,.07,"DT")
2910503
"^DD",63,63.8122,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.8122,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.8122,.09,21,0)
^^1^1^2940510^
"^DD",63,63.8122,.09,21,1,0)
Number of non-control slides counted
"^DD",63,63.8122,.09,"DT")
2930402
"^DD",63,63.813,0)
BRIEF CLINICAL HISTORY SUB-FIELD^NL^.01^1
"^DD",63,63.813,0,"NM","BRIEF CLINICAL HISTORY")

"^DD",63,63.813,0,"UP")
63.08
"^DD",63,63.813,.01,0)
BRIEF CLINICAL HISTORY^W^^0;1^Q
"^DD",63,63.813,.01,"DT")
2840911
"^DD",63,63.814,0)
PREOPERATIVE DIAGNOSIS SUB-FIELD^NL^.01^1
"^DD",63,63.814,0,"NM","PREOPERATIVE DIAGNOSIS")

"^DD",63,63.814,0,"UP")
63.08
"^DD",63,63.814,.01,0)
PREOPERATIVE DIAGNOSIS^W^^0;1^Q
"^DD",63,63.814,.01,3)

"^DD",63,63.814,.01,"DT")
2850303
"^DD",63,63.815,0)
OPERATIVE FINDINGS SUB-FIELD^NL^.01^1
"^DD",63,63.815,0,"NM","OPERATIVE FINDINGS")

"^DD",63,63.815,0,"UP")
63.08
"^DD",63,63.815,.01,0)
OPERATIVE FINDINGS^W^^0;1^Q
"^DD",63,63.815,.01,3)

"^DD",63,63.815,.01,"DT")
2850303
"^DD",63,63.816,0)
POSTOPERATIVE DIAGNOSIS SUB-FIELD^NL^.01^1
"^DD",63,63.816,0,"NM","POSTOPERATIVE DIAGNOSIS")

"^DD",63,63.816,0,"UP")
63.08
"^DD",63,63.816,.01,0)
POSTOPERATIVE DIAGNOSIS^W^^0;1^Q
"^DD",63,63.816,.01,3)

"^DD",63,63.816,.01,"DT")
2850303
"^DD",63,63.817,0)
SUPPLEMENTARY REPORT SUB-FIELD^NL^2^4
"^DD",63,63.817,0,"DT")
3030924
"^DD",63,63.817,0,"NM","SUPPLEMENTARY REPORT")

"^DD",63,63.817,0,"UP")
63.08
"^DD",63,63.817,.01,0)
SUPPLEMENTARY REPORT DATE/TIME^D^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.817,.01,21,0)
^^1^1^2911204^
"^DD",63,63.817,.01,21,1,0)
This is the date/time of the supplementary report.
"^DD",63,63.817,.01,"DEL",1,0)
I 1 D EN^DDIOL("Deletion is not permitted","","!!")
"^DD",63,63.817,.01,"DT")
2840911
"^DD",63,63.817,.02,0)
RELEASE SUPPLEMENTARY REPORT^S^1:YES;0:NO;1:yes;0:no;^0;2^Q
"^DD",63,63.817,.02,21,0)
^^2^2^2900924^^
"^DD",63,63.817,.02,21,1,0)
If supplementary report is to be displayed or printed outside
"^DD",63,63.817,.02,21,2,0)
 of lab the report must be released by entering 'YES'.
"^DD",63,63.817,.02,"DT")
2900920
"^DD",63,63.817,1,0)
DESCRIPTION^63.818^^1;0
"^DD",63,63.817,1,21,0)
^^1^1^2911204^
"^DD",63,63.817,1,21,1,0)
This is the description of the supplementary report.
"^DD",63,63.817,2,0)
SUPPLEMENTARY REPORT MODIFIED^63.8172DA^^2;0
"^DD",63,63.817,2,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.817,2,21,1,0)
This is the date/time in which this supplementary report was modified.  This
"^DD",63,63.817,2,21,2,0)
information is stored for audit trail purposes.  It is updated by the software
"^DD",63,63.817,2,21,3,0)
and can only be changed from programmer mode.
"^DD",63,63.817,2,"DT")
3000908
"^DD",63,63.8172,0)
SUPPLEMENTARY REPORT MODIFIED SUB-FIELD^^1^5
"^DD",63,63.8172,0,"DT")
3030924
"^DD",63,63.8172,0,"IX","B",63.8172,.01)

"^DD",63,63.8172,0,"NM","SUPPLEMENTARY REPORT MODIFIED")

"^DD",63,63.8172,0,"UP")
63.817
"^DD",63,63.8172,.01,0)
SUPPLEMENTARY REPORT MODIFIED^D^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.8172,.01,1,0)
^.1
"^DD",63,63.8172,.01,1,1,0)
63.8172^B
"^DD",63,63.8172,.01,1,1,1)
S ^LR(DA(3),"SP",DA(2),1.2,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",63,63.8172,.01,1,1,2)
K ^LR(DA(3),"SP",DA(2),1.2,DA(1),2,"B",$E(X,1,30),DA)
"^DD",63,63.8172,.01,3)
This is the date/time in which this supplementary report was modified.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.8172,.01,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.8172,.01,21,1,0)
This is the date/time in which this supplementary report was modified.  This
"^DD",63,63.8172,.01,21,2,0)
information is stored for audit trail purposes.  It is updated by the software
"^DD",63,63.8172,.01,21,3,0)
and can only be changed from programmer mode.
"^DD",63,63.8172,.01,"DT")
3000908
"^DD",63,63.8172,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.8172,.02,3)
This is the DUZ of the person who modified the supplementary report.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.8172,.02,21,0)
^.001^2^2^3001121^^^^
"^DD",63,63.8172,.02,21,1,0)
This is the DUZ of the person who modified the supplementary report.
"^DD",63,63.8172,.02,21,2,0)
It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.8172,.02,"DT")
2990524
"^DD",63,63.8172,.03,0)
PERSON RELEASING THE SUPP. RPT^P200'^VA(200,^0;3^Q
"^DD",63,63.8172,.03,3)
This is the DUZ of the person who released the supplementary report. It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.8172,.03,21,0)
^^3^3^3040205^
"^DD",63,63.8172,.03,21,1,0)
This is the DUZ of the person who released the supplementary report.  
"^DD",63,63.8172,.03,21,2,0)
It is updated by the software and can only be modified from 
"^DD",63,63.8172,.03,21,3,0)
programmer mode.
"^DD",63,63.8172,.03,"DT")
3040205
"^DD",63,63.8172,.04,0)
SUPP REPORT RELEASE DATE/TIME^DX^^0;4^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.8172,.04,3)
This is the date/time in which this supplementary report was released. It is updated by the software and can only be modified from programmer mode. 
"^DD",63,63.8172,.04,21,0)
^^3^3^3030924^
"^DD",63,63.8172,.04,21,1,0)
This is the date/time in which this supplementary report was released.  This
"^DD",63,63.8172,.04,21,2,0)
information is stored for audit trail purposes.  It is updated by the software
"^DD",63,63.8172,.04,21,3,0)
and can only be changed from programmer mode.
"^DD",63,63.8172,.04,"DT")
3040205
"^DD",63,63.8172,1,0)
PREMODIFICATION TEXT^63.81721^^1;0
"^DD",63,63.8172,1,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.8172,1,21,1,0)
This is the text of the supplementary report as it existed before it was
"^DD",63,63.8172,1,21,2,0)
modified.  It is updated by the software and can only be modified from
"^DD",63,63.8172,1,21,3,0)
programmer mode.
"^DD",63,63.81721,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.81721,0,"DT")
2990524
"^DD",63,63.81721,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.81721,0,"UP")
63.8172
"^DD",63,63.81721,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.81721,.01,3)
This is the text of the supplementary report as it existed before it was modified.  This field is updated by the software and can only be modified from programmer mode.
"^DD",63,63.81721,.01,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.81721,.01,21,1,0)
This is the text of the supplementary report as it existed before it was
"^DD",63,63.81721,.01,21,2,0)
modified.  This field is updated by the software and can only be
"^DD",63,63.81721,.01,21,3,0)
modified from programmer mode.
"^DD",63,63.81721,.01,"DT")
2990524
"^DD",63,63.818,0)
DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.818,0,"NM","DESCRIPTION")

"^DD",63,63.818,0,"UP")
63.817
"^DD",63,63.818,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",63,63.818,.01,"DT")
2840911
"^DD",63,63.819,0)
SPECIAL STUDIES SUB-FIELD^NL^1^4
"^DD",63,63.819,0,"ID",.03)
W "   ",$P(^(0),U,3)
"^DD",63,63.819,0,"NM","SPECIAL STUDIES")

"^DD",63,63.819,0,"UP")
63.12
"^DD",63,63.819,.01,0)
SPECIAL STUDIES^MS^E:ELECTRON MICROSCOPY;I:IMMUNOFLUORESCENCE;P:PHOTOGRAPHY;C:CONSULTATION;F:FROZEN SECTION;IP:IMMUNOPEROXIDASE;^0;1^Q
"^DD",63,63.819,.01,21,0)
^^2^2^2911204^
"^DD",63,63.819,.01,21,1,0)
This is a special study associated with this
"^DD",63,63.819,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.819,.01,"DT")
2850326
"^DD",63,63.819,.02,0)
DATE^RD^^0;2^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.819,.02,21,0)
^^1^1^2911204^^
"^DD",63,63.819,.02,21,1,0)
This is the date of the special studies.
"^DD",63,63.819,.02,"DT")
2840911
"^DD",63,63.819,.03,0)
ID #^F^^0;3^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.819,.03,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63.819,.03,21,0)
^^1^1^2911204^^
"^DD",63,63.819,.03,21,1,0)
This is the identification number of the special studies.
"^DD",63,63.819,.03,"DT")
2840911
"^DD",63,63.819,1,0)
DESCRIPTION^63.821^^1;0
"^DD",63,63.819,1,21,0)
^^1^1^2911204^
"^DD",63,63.819,1,21,1,0)
This is the description of the special studies.
"^DD",63,63.82,0)
PROCEDURE SUB-FIELD^NL^.02^2
"^DD",63,63.82,0,"NM","PROCEDURE")

"^DD",63,63.82,0,"UP")
63.12
"^DD",63,63.82,.01,0)
PROCEDURE^M*P61.5'X^LAB(61.5,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.82,.01,3)
Enter SNOMED code without 'P-' or 'P'
"^DD",63,63.82,.01,21,0)
^^2^2^2911204^
"^DD",63,63.82,.01,21,1,0)
This is a procedure associated with this
"^DD",63,63.82,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.82,.01,"DT")
2881028
"^DD",63,63.82,.02,0)
RESULT^S^0:NEG;1:POS;^0;2^Q
"^DD",63,63.82,.02,21,0)
^^1^1^2891222^
"^DD",63,63.82,.02,21,1,0)
If result of procedure is positive enter '1' or 'P'.
"^DD",63,63.82,.02,"DT")
2891222
"^DD",63,63.82005,0)
IMAGE SUB-FIELD^^.01^1
"^DD",63,63.82005,0,"DT")
2950523
"^DD",63,63.82005,0,"IX","B",63.82005,.01)

"^DD",63,63.82005,0,"NM","IMAGE")

"^DD",63,63.82005,0,"UP")
63.08
"^DD",63,63.82005,.01,0)
IMAGE^MP2005'^MAG(2005,^0;1^Q
"^DD",63,63.82005,.01,1,0)
^.1
"^DD",63,63.82005,.01,1,1,0)
63.82005^B
"^DD",63,63.82005,.01,1,1,1)
S ^LR(DA(2),"SP",DA(1),2005,"B",$E(X,1,30),DA)=""
"^DD",63,63.82005,.01,1,1,2)
K ^LR(DA(2),"SP",DA(1),2005,"B",$E(X,1,30),DA)
"^DD",63,63.82005,.01,3)
IMAGE POINTER BACK TO IMAGE FILE
"^DD",63,63.82005,.01,"DT")
2950523
"^DD",63,63.821,0)
DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.821,0,"NM","DESCRIPTION")

"^DD",63,63.821,0,"UP")
63.819
"^DD",63,63.821,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",63,63.821,.01,"DT")
2840911
"^DD",63,63.822,0)
PLASTIC BLOCK SUB-FIELD^^1^4
"^DD",63,63.822,0,"DT")
2930402
"^DD",63,63.822,0,"IX","B",63.822,.01)

"^DD",63,63.822,0,"NM","PLASTIC BLOCK")

"^DD",63,63.822,0,"UP")
63.812
"^DD",63,63.822,.01,0)
PLASTIC  BLOCK ID^MFX^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>9!($L(X)<1) X
"^DD",63,63.822,.01,1,0)
^.1
"^DD",63,63.822,.01,1,1,0)
63.822^B
"^DD",63,63.822,.01,1,1,1)
S ^LR(DA(3),"SP",DA(2),.1,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",63,63.822,.01,1,1,2)
K ^LR(DA(3),"SP",DA(2),.1,DA(1),2,"B",$E(X,1,30),DA)
"^DD",63,63.822,.01,1,1,"DT")
2920113
"^DD",63,63.822,.01,3)
ANSWER MUST BE 1-9 CHARACTERS IN LENGTH
"^DD",63,63.822,.01,4)

"^DD",63,63.822,.01,21,0)
^^1^1^2911204^
"^DD",63,63.822,.01,21,1,0)
This is the plastic block identification.
"^DD",63,63.822,.01,"DT")
2920113
"^DD",63,63.822,.02,0)
DATE/TIME BLOCK PREPARED^D^^0;2^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.822,.02,21,0)
^^1^1^2940510^
"^DD",63,63.822,.02,21,1,0)
When the block is prepared
"^DD",63,63.822,.02,"DT")
2910804
"^DD",63,63.822,.03,0)
BLOCK COUNTED^S^1:YES;0:NO;^0;3^Q
"^DD",63,63.822,.03,"DT")
2910804
"^DD",63,63.822,1,0)
PLASTIC STAIN/PROCEDURE^63.823PA^^1;0
"^DD",63,63.822,1,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.822,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.822,1,21,0)
^^1^1^2911204^
"^DD",63,63.822,1,21,1,0)
These are the plastic stain/procedures performed.
"^DD",63,63.823,0)
PLASTIC STAIN/PROCEDURE SUB-FIELD^^.09^8
"^DD",63,63.823,0,"DT")
2930402
"^DD",63,63.823,0,"NM","PLASTIC STAIN/PROCEDURE")

"^DD",63,63.823,0,"UP")
63.822
"^DD",63,63.823,.01,0)
PLASTIC STAIN/PROCEDURE^M*P60'X^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.823,.01,1,0)
^.1^^0
"^DD",63,63.823,.01,21,0)
^^1^1^2911204^
"^DD",63,63.823,.01,21,1,0)
This is the plastic stain or procedure performed.
"^DD",63,63.823,.01,"DT")
2861030
"^DD",63,63.823,.02,0)
PLASTIC SLIDES PREPARED (#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.823,.02,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 999
"^DD",63,63.823,.02,21,0)
^^1^1^2911204^
"^DD",63,63.823,.02,21,1,0)
This is the number of slides prepared.
"^DD",63,63.823,.02,"DT")
2861023
"^DD",63,63.823,.03,0)
CONTROL SLIDES (#)^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.823,.03,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99
"^DD",63,63.823,.03,21,0)
^^1^1^2911204^
"^DD",63,63.823,.03,21,1,0)
This is the number of control slides prepared.
"^DD",63,63.823,.03,"DT")
2861030
"^DD",63,63.823,.04,0)
DATE/TIME SLIDES STAINED^DX^^0;4^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.823,.04,3)
Future date/time not allowed.
"^DD",63,63.823,.04,21,0)
^^1^1^2940510^
"^DD",63,63.823,.04,21,1,0)
When slides are stained
"^DD",63,63.823,.04,"DT")
2910503
"^DD",63,63.823,.05,0)
DATE/TIME SLIDES EXAMINED^DX^^0;5^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.823,.05,3)
Future date/time not allowed.
"^DD",63,63.823,.05,21,0)
^^1^1^2940510^
"^DD",63,63.823,.05,21,1,0)
When slides are examined
"^DD",63,63.823,.05,"DT")
2910503
"^DD",63,63.823,.06,0)
SLIDES COUNTED (#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.823,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.823,.06,21,0)
^^1^1^2910503^
"^DD",63,63.823,.06,21,1,0)
Last number of slides counted for workload.
"^DD",63,63.823,.06,"DT")
2910503
"^DD",63,63.823,.07,0)
LABELS TO PRINT^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.823,.07,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.823,.07,"DT")
2910503
"^DD",63,63.823,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.823,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.823,.09,"DT")
2930402
"^DD",63,63.824,0)
FROZEN TISSUE BLOCK SUB-FIELD^^1^5
"^DD",63,63.824,0,"DT")
2930402
"^DD",63,63.824,0,"IX","B",63.824,.01)

"^DD",63,63.824,0,"NM","FROZEN TISSUE BLOCK")

"^DD",63,63.824,0,"UP")
63.812
"^DD",63,63.824,.01,0)
FROZEN  TISSUE ID^MFX^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>9!($L(X)<1) X
"^DD",63,63.824,.01,1,0)
^.1
"^DD",63,63.824,.01,1,1,0)
63.824^B
"^DD",63,63.824,.01,1,1,1)
S ^LR(DA(3),"SP",DA(2),.1,DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",63,63.824,.01,1,1,2)
K ^LR(DA(3),"SP",DA(2),.1,DA(1),3,"B",$E(X,1,30),DA)
"^DD",63,63.824,.01,1,1,"DT")
2920113
"^DD",63,63.824,.01,3)
ANSWER MUST BE 1-9 CHARACTERS IN LENGTH
"^DD",63,63.824,.01,4)

"^DD",63,63.824,.01,21,0)
^^1^1^2911204^
"^DD",63,63.824,.01,21,1,0)
This is the identification of frozen tissue.
"^DD",63,63.824,.01,"DT")
2920113
"^DD",63,63.824,.02,0)
DATE/TIME FROZEN PREPARED^D^^0;2^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.824,.02,21,0)
^^1^1^2940510^
"^DD",63,63.824,.02,21,1,0)
When the frozen section is prepared
"^DD",63,63.824,.02,"DT")
2910804
"^DD",63,63.824,.03,0)
FROZEN COUNTED^S^1:YES;0:NO;^0;3^Q
"^DD",63,63.824,.03,"DT")
2910804
"^DD",63,63.824,.04,0)
FROZEN TISSUE BLOCK TYPE^RS^1:RUSH;0:NOT RUSH;^0;4^Q
"^DD",63,63.824,.04,21,0)
^^2^2^2920107^^^^
"^DD",63,63.824,.04,21,1,0)
Entry indicates if the frozen tissue block is used for rush 
"^DD",63,63.824,.04,21,2,0)
(rapid) diagnosis or routinely processed (not rush).
"^DD",63,63.824,.04,"DT")
2920107
"^DD",63,63.824,1,0)
STAIN/PROCEDURE^63.825PA^^1;0
"^DD",63,63.824,1,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.824,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.824,1,21,0)
^^2^2^2911204^^
"^DD",63,63.824,1,21,1,0)
These are the stain/procedures performed on
"^DD",63,63.824,1,21,2,0)
this specimen.
"^DD",63,63.825,0)
STAIN/PROCEDURE SUB-FIELD^^.09^8
"^DD",63,63.825,0,"DT")
2930402
"^DD",63,63.825,0,"IX","B",63.825,.01)

"^DD",63,63.825,0,"NM","STAIN/PROCEDURE")

"^DD",63,63.825,0,"UP")
63.824
"^DD",63,63.825,.01,0)
STAIN/PROCEDURE^M*P60'X^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.825,.01,1,0)
^.1^^0
"^DD",63,63.825,.01,1,1,0)
63.825^B
"^DD",63,63.825,.01,1,1,1)
S ^LR(DA(4),"SP",DA(3),.1,DA(2),3,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",63,63.825,.01,1,1,2)
K ^LR(DA(4),"SP",DA(3),.1,DA(2),3,DA(1),1,"B",$E(X,1,30),DA)
"^DD",63,63.825,.01,21,0)
^^1^1^2911204^
"^DD",63,63.825,.01,21,1,0)
This is the stain/procedure performed on this specimen.
"^DD",63,63.825,.01,"DT")
2911231
"^DD",63,63.825,.02,0)
SLIDES PREPARED (#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.825,.02,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 999
"^DD",63,63.825,.02,21,0)
^^1^1^2911204^
"^DD",63,63.825,.02,21,1,0)
This is the number of slides prepared.
"^DD",63,63.825,.02,"DT")
2861030
"^DD",63,63.825,.03,0)
CONTROL SLIDES (#)^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.825,.03,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99
"^DD",63,63.825,.03,21,0)
^^1^1^2911204^
"^DD",63,63.825,.03,21,1,0)
This is the number of control slides.
"^DD",63,63.825,.03,"DT")
2861030
"^DD",63,63.825,.04,0)
DATE/TIME SLIDES STAINED^DX^^0;4^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.825,.04,3)
Future date/time not allowed.
"^DD",63,63.825,.04,21,0)
^^1^1^2940510^
"^DD",63,63.825,.04,21,1,0)
When the slides are prepared
"^DD",63,63.825,.04,"DT")
2910503
"^DD",63,63.825,.05,0)
DATE/TIME SLIDES EXAMINED^DX^^0;5^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.825,.05,3)
Future date/time not allowed.
"^DD",63,63.825,.05,21,0)
^^1^1^2940510^
"^DD",63,63.825,.05,21,1,0)
When the slides are examined
"^DD",63,63.825,.05,"DT")
2910503
"^DD",63,63.825,.06,0)
SLIDES COUNTED (#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.825,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.825,.06,21,0)
^^1^1^2910503^
"^DD",63,63.825,.06,21,1,0)
Last number of slides counted for workload.
"^DD",63,63.825,.06,"DT")
2910503
"^DD",63,63.825,.07,0)
LABELS TO PRINT^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.825,.07,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.825,.07,"DT")
2910503
"^DD",63,63.825,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.825,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.825,.09,"DT")
2930402
"^DD",63,63.84,0)
DATE MICROSCOPIC EXAM MODIFIED SUB-FIELD^^1^3
"^DD",63,63.84,0,"NM","DATE MICROSCOPIC EXAM MODIFIED")

"^DD",63,63.84,0,"UP")
63.08
"^DD",63,63.84,.01,0)
DATE MICROSCOPIC EXAM MODIFIED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.84,.01,21,0)
^^2^2^2911204^
"^DD",63,63.84,.01,21,1,0)
This is the date of modification of the microscopic examination
"^DD",63,63.84,.01,21,2,0)
diagnosis.
"^DD",63,63.84,.01,"DT")
2930716
"^DD",63,63.84,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.84,.02,21,0)
^^1^1^2911204^
"^DD",63,63.84,.02,21,1,0)
This is the person modifying the text.
"^DD",63,63.84,.02,"DT")
2910630
"^DD",63,63.84,1,0)
PREMODIFICATION TEXT^63.841^^1;0
"^DD",63,63.84,1,21,0)
^^1^1^2911204^
"^DD",63,63.84,1,21,1,0)
This is the premodification text.
"^DD",63,63.841,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.841,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.841,0,"UP")
63.84
"^DD",63,63.841,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.841,.01,"DT")
2861118
"^DD",63,63.85,0)
FUNCTION SUB-FIELD^NL^.01^1
"^DD",63,63.85,0,"NM","FUNCTION")

"^DD",63,63.85,0,"UP")
63.12
"^DD",63,63.85,.01,0)
FUNCTION^M*P61.3'X^LAB(61.3,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.85,.01,3)
Enter SNOMED code without 'F-' or 'F'
"^DD",63,63.85,.01,21,0)
^.001^2^2^3010724^^^
"^DD",63,63.85,.01,21,1,0)
This is the function associated with this
"^DD",63,63.85,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.85,.01,"DT")
2870919
"^DD",63,63.88,0)
ICD DIAGNOSIS SUB-FIELD^NL^.01^1
"^DD",63,63.88,0,"NM","ICD DIAGNOSIS")

"^DD",63,63.88,0,"UP")
63.08
"^DD",63,63.88,.01,0)
ICD DIAGNOSIS^MP80'X^ICD9(^0;1^I $D(X) S DINUM=X
"^DD",63,63.88,.01,21,0)
^^2^2^2911204^
"^DD",63,63.88,.01,21,1,0)
This is the ICD diagnosis associated with this
"^DD",63,63.88,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.88,.01,"DT")
2850225
"^DD",63,63.901,0)
ICD DIAGNOSIS SUB-FIELD^NL^.01^1
"^DD",63,63.901,0,"NM","ICD DIAGNOSIS")

"^DD",63,63.901,0,"UP")
63.09
"^DD",63,63.901,.01,0)
ICD DIAGNOSIS^MP80'X^ICD9(^0;1^I $D(X) S DINUM=X
"^DD",63,63.901,.01,21,0)
^^1^1^2911205^^
"^DD",63,63.901,.01,21,1,0)
This is the ICD diagnosis of the specimen.
"^DD",63,63.901,.01,"DT")
2850227
"^DD",63,63.902,0)
SPECIMEN SUB-FIELD^NL^5^7
"^DD",63,63.902,0,"DT")
3030306
"^DD",63,63.902,0,"IX","B",63.902,.01)

"^DD",63,63.902,0,"NM","SPECIMEN")

"^DD",63,63.902,0,"UP")
63.09
"^DD",63,63.902,.01,0)
SPECIMEN^MRFX^^0;1^K:$L(X)>75!($L(X)<2) X I $D(X),X="PAP SMEAR",$D(SEX),SEX'="F" W "  Patient not female." K X
"^DD",63,63.902,.01,1,0)
^.1
"^DD",63,63.902,.01,1,1,0)
63.902^B
"^DD",63,63.902,.01,1,1,1)
S ^LR(DA(2),"CY",DA(1),.1,"B",$E(X,1,30),DA)=""
"^DD",63,63.902,.01,1,1,2)
K ^LR(DA(2),"CY",DA(1),.1,"B",$E(X,1,30),DA)
"^DD",63,63.902,.01,1,1,"DT")
2910113
"^DD",63,63.902,.01,3)
Answer must be 2-75 characters in length.
"^DD",63,63.902,.01,21,0)
^.001^1^1^3030305^^^
"^DD",63,63.902,.01,21,1,0)
Enter the name of the specimen submitted..
"^DD",63,63.902,.01,"DT")
2920426
"^DD",63,63.902,.02,0)
WORKLOAD PROFILE^*P60'^LAB(60,^0;2^S DIC("S")="I $P(^(0),U,4)=""CY""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.902,.02,3)
ENTRY MANDATORY.  MUST MATCH ENTRY IN LABORATORY TEST FILE.
"^DD",63,63.902,.02,12)
Selects only cytopathology workload entries
"^DD",63,63.902,.02,12.1)
S DIC("S")="I $P(^(0),U,4)=""CY"""
"^DD",63,63.902,.02,21,0)
^^3^3^2910507^
"^DD",63,63.902,.02,21,1,0)
The name of a cytology subscripted entry in the lab test file.
"^DD",63,63.902,.02,21,2,0)
 The entry is composed of accession WKLD codes and one or more
"^DD",63,63.902,.02,21,3,0)
 cytology procedures associated with specimen processing.
"^DD",63,63.902,.02,"DT")
2910507
"^DD",63,63.902,1,0)
SMEAR PREP^63.9121A^^1;0
"^DD",63,63.902,2,0)
CELL BLOCK^63.922A^^2;0
"^DD",63,63.902,3,0)
MEMBRANE FILTER^63.924A^^3;0
"^DD",63,63.902,4,0)
PREPARED SLIDES^63.9024A^^4;0
"^DD",63,63.902,5,0)
CYTOSPIN^63.9025A^^5;0
"^DD",63,63.9024,0)
PREPARED SLIDES SUB-FIELD^^1^2
"^DD",63,63.9024,0,"DT")
2930402
"^DD",63,63.9024,0,"NM","PREPARED SLIDES")

"^DD",63,63.9024,0,"UP")
63.902
"^DD",63,63.9024,.01,0)
PREPARED SLIDES^MF^^0;1^K:$L(X)>9!($L(X)<1) X
"^DD",63,63.9024,.01,1,0)
^.1^^0
"^DD",63,63.9024,.01,3)
Answer must be 1-9 characters in length.
"^DD",63,63.9024,.01,"DT")
2910113
"^DD",63,63.9024,1,0)
PREPARED SLIDES STAIN^63.90241PA^^1;0
"^DD",63,63.9024,1,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.9024,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.90241,0)
PREPARED SLIDES STAIN SUB-FIELD^^.09^9
"^DD",63,63.90241,0,"DT")
2930402
"^DD",63,63.90241,0,"NM","PREPARED SLIDES STAIN")

"^DD",63,63.90241,0,"UP")
63.9024
"^DD",63,63.90241,.01,0)
PREPARED SLIDES STAIN^M*P60'X^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.90241,.01,1,0)
^.1^^0
"^DD",63,63.90241,.01,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.90241,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.90241,.01,"DT")
2910113
"^DD",63,63.90241,.02,0)
SLIDES PREPARED (#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90241,.02,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.90241,.02,"DT")
2910113
"^DD",63,63.90241,.03,0)
CONTROL SLIDES (#)^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90241,.03,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.90241,.03,"DT")
2910113
"^DD",63,63.90241,.04,0)
DATE/TIME SLIDES STAINED^DX^^0;4^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.90241,.04,3)
Future date/time not allowed.
"^DD",63,63.90241,.04,21,0)
^^1^1^2930331^
"^DD",63,63.90241,.04,21,1,0)
Date slides were stained
"^DD",63,63.90241,.04,"DT")
2910429
"^DD",63,63.90241,.05,0)
DATE/TIME SLIDES EXAMINED^DX^^0;5^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.90241,.05,3)
Future date/time not allowed.
"^DD",63,63.90241,.05,21,0)
^^1^1^2930331^
"^DD",63,63.90241,.05,21,1,0)
Date slides were examined
"^DD",63,63.90241,.05,"DT")
2910429
"^DD",63,63.90241,.06,0)
SLIDES COUNTED (#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90241,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.90241,.06,21,0)
^^1^1^2910430^
"^DD",63,63.90241,.06,21,1,0)
Last number of slides counted for workload.
"^DD",63,63.90241,.06,"DT")
2910430
"^DD",63,63.90241,.07,0)
LABELS TO PRINT^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90241,.07,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.90241,.07,"DT")
2910502
"^DD",63,63.90241,.08,0)
SLIDES SCREENED (#)^NJ3,0^^0;8^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90241,.08,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.90241,.08,21,0)
^^1^1^2910513^
"^DD",63,63.90241,.08,21,1,0)
Last number of slides screened for workload.
"^DD",63,63.90241,.08,"DT")
2910513
"^DD",63,63.90241,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90241,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.90241,.09,"DT")
2930402
"^DD",63,63.9025,0)
CYTOSPIN SUB-FIELD^^1^2
"^DD",63,63.9025,0,"DT")
2930402
"^DD",63,63.9025,0,"NM","CYTOSPIN")

"^DD",63,63.9025,0,"UP")
63.902
"^DD",63,63.9025,.01,0)
CYTOSPIN^MF^^0;1^K:$L(X)>9!($L(X)<1) X
"^DD",63,63.9025,.01,1,0)
^.1^^0
"^DD",63,63.9025,.01,3)
Answer must be 1-9 characters in length.
"^DD",63,63.9025,.01,"DT")
2910113
"^DD",63,63.9025,1,0)
CYTOSPIN STAIN^63.90251PA^^1;0
"^DD",63,63.9025,1,12)
Selecs only stains/procedures associated with anatomic pathology
"^DD",63,63.9025,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.90251,0)
CYTOSPIN STAIN SUB-FIELD^^.09^9
"^DD",63,63.90251,0,"DT")
2930402
"^DD",63,63.90251,0,"NM","CYTOSPIN STAIN")

"^DD",63,63.90251,0,"UP")
63.9025
"^DD",63,63.90251,.01,0)
CYTOSPIN STAIN^M*P60'X^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.90251,.01,1,0)
^.1^^0
"^DD",63,63.90251,.01,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.90251,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.90251,.01,"DT")
2910113
"^DD",63,63.90251,.02,0)
SLIDES PREPARED (#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90251,.02,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.90251,.02,"DT")
2910113
"^DD",63,63.90251,.03,0)
CONTROL SLIDES (#)^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90251,.03,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.90251,.03,"DT")
2910113
"^DD",63,63.90251,.04,0)
DATE/TIME SLIDES STAINED^DX^^0;4^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.90251,.04,3)
Future date/time not allowed.
"^DD",63,63.90251,.04,21,0)
^^1^1^2930331^
"^DD",63,63.90251,.04,21,1,0)
Date slides were stained
"^DD",63,63.90251,.04,"DT")
2910429
"^DD",63,63.90251,.05,0)
DATE/TIME SLIDES EXAMINED^DX^^0;5^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.90251,.05,3)
Future date/time not allowed.
"^DD",63,63.90251,.05,21,0)
^^1^1^2930331^
"^DD",63,63.90251,.05,21,1,0)
Date slides were examined
"^DD",63,63.90251,.05,"DT")
2910429
"^DD",63,63.90251,.06,0)
SLIDES COUNTED (#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90251,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.90251,.06,21,0)
^^1^1^2910430^
"^DD",63,63.90251,.06,21,1,0)
Last number of slides counted for workload.
"^DD",63,63.90251,.06,"DT")
2910430
"^DD",63,63.90251,.07,0)
LABELS TO PRINT^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90251,.07,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.90251,.07,"DT")
2910502
"^DD",63,63.90251,.08,0)
SLIDES SCREENED (#)^NJ3,0^^0;8^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90251,.08,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.90251,.08,21,0)
^^1^1^2910513^
"^DD",63,63.90251,.08,21,1,0)
Last number of slides screened for workload.
"^DD",63,63.90251,.08,"DT")
2910513
"^DD",63,63.90251,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.90251,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.90251,.09,"DT")
2930402
"^DD",63,63.903,0)
CYTOPATHOLOGY DIAGNOSIS SUB-FIELD^^.01^1
"^DD",63,63.903,0,"DT")
2930716
"^DD",63,63.903,0,"NM","CYTOPATHOLOGY DIAGNOSIS")

"^DD",63,63.903,0,"UP")
63.09
"^DD",63,63.903,.01,0)
CYTOPATHOLOGY DIAGNOSIS^W^^0;1^Q
"^DD",63,63.903,.01,"DT")
2930716
"^DD",63,63.905,0)
OPERATIVE FINDINGS SUB-FIELD^NL^.01^1
"^DD",63,63.905,0,"NM","OPERATIVE FINDINGS")

"^DD",63,63.905,0,"UP")
63.09
"^DD",63,63.905,.01,0)
OPERATIVE FINDINGS^W^^0;1^Q
"^DD",63,63.905,.01,3)

"^DD",63,63.905,.01,"DT")
2850303
"^DD",63,63.906,0)
POSTOPERATIVE DIAGNOSIS SUB-FIELD^NL^.01^1
"^DD",63,63.906,0,"NM","POSTOPERATIVE DIAGNOSIS")

"^DD",63,63.906,0,"UP")
63.09
"^DD",63,63.906,.01,0)
POSTOPERATIVE DIAGNOSIS^W^^0;1^Q
"^DD",63,63.906,.01,3)

"^DD",63,63.906,.01,"DT")
2850303
"^DD",63,63.907,0)
SUPPLEMENTARY REPORT SUB-FIELD^NL^2^4
"^DD",63,63.907,0,"DT")
3040205
"^DD",63,63.907,0,"NM","SUPPLEMENTARY REPORT")

"^DD",63,63.907,0,"UP")
63.09
"^DD",63,63.907,.01,0)
SUPPLEMENTARY REPORT DATE/TIME^D^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.907,.01,21,0)
^^1^1^2911205^
"^DD",63,63.907,.01,21,1,0)
This is the date/time of the supplementary report.
"^DD",63,63.907,.01,"DEL",1,0)
I 1 D EN^DDIOL("Deletion is not permitted","","!!")
"^DD",63,63.907,.01,"DT")
2850227
"^DD",63,63.907,.02,0)
RELEASE SUPPLEMENTARY REPORT^S^1:YES;0:NO;1:yes;0:no;^0;2^Q
"^DD",63,63.907,.02,21,0)
^.001^2^2^3011030^^^^
"^DD",63,63.907,.02,21,1,0)
If supplementary report is to be displayed or printed outside of
"^DD",63,63.907,.02,21,2,0)
 lab the report must be released by entering 'YES'.
"^DD",63,63.907,.02,"DT")
2900920
"^DD",63,63.907,1,0)
DESCRIPTION^63.918^^1;0
"^DD",63,63.907,1,21,0)
^^1^1^2911205^
"^DD",63,63.907,1,21,1,0)
This is the description of the supplementary report.
"^DD",63,63.907,2,0)
SUPPLEMENTARY REPORT MODIFIED^63.9072DA^^2;0
"^DD",63,63.907,2,21,0)
^.001^3^3^3040205^^^^
"^DD",63,63.907,2,21,1,0)
This is the date/time in which this supplementary report was modified.  This
"^DD",63,63.907,2,21,2,0)
information is stored for audit trail purposes.  It is updated by the software
"^DD",63,63.907,2,21,3,0)
and can only be modified from programmer mode.
"^DD",63,63.907,2,"DT")
3000908
"^DD",63,63.9072,0)
SUPPLEMENTARY REPORT MODIFIED SUB-FIELD^^1^5
"^DD",63,63.9072,0,"DT")
3040205
"^DD",63,63.9072,0,"IX","B",63.9072,.01)

"^DD",63,63.9072,0,"NM","SUPPLEMENTARY REPORT MODIFIED")

"^DD",63,63.9072,0,"UP")
63.907
"^DD",63,63.9072,.01,0)
SUPPLEMENTARY REPORT MODIFIED^D^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.9072,.01,1,0)
^.1
"^DD",63,63.9072,.01,1,1,0)
63.9072^B
"^DD",63,63.9072,.01,1,1,1)
S ^LR(DA(3),"CY",DA(2),1.2,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",63,63.9072,.01,1,1,2)
K ^LR(DA(3),"CY",DA(2),1.2,DA(1),2,"B",$E(X,1,30),DA)
"^DD",63,63.9072,.01,3)
This is the date/time in which this supplementary report was modified.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.9072,.01,21,0)
^.001^2^2^3000908^^^^
"^DD",63,63.9072,.01,21,1,0)
This is the date/time in which this supplementary report was modified.
"^DD",63,63.9072,.01,21,2,0)
It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.9072,.01,"DT")
3000908
"^DD",63,63.9072,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.9072,.02,3)
This is the DUZ of the person who modified the supplementary report.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.9072,.02,21,0)
^.001^2^2^3001121^^^^
"^DD",63,63.9072,.02,21,1,0)
This is the DUZ of the person who modified the supplementary report.  It is
"^DD",63,63.9072,.02,21,2,0)
updated by the software and can only be modified from programmer mode.
"^DD",63,63.9072,.02,"DT")
2991206
"^DD",63,63.9072,.03,0)
PERSON RELEASING THE SUPP. RPT^P200'^VA(200,^0;3^Q
"^DD",63,63.9072,.03,3)
This is the DUZ of the person who released the supplementary report.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.9072,.03,21,0)
^^2^2^3030922^
"^DD",63,63.9072,.03,21,1,0)
This is the DUZ of the person who released the supplementary report.  It is
"^DD",63,63.9072,.03,21,2,0)
updated by the software and can only be modified from programmer mode.
"^DD",63,63.9072,.03,"DT")
3031125
"^DD",63,63.9072,.04,0)
SUPP REPORT RELEASE DATE/TIME^DX^^0;4^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.9072,.04,3)
This is the date/time in which this supplementary report was released. It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.9072,.04,21,0)
^.001^2^2^3040205^^
"^DD",63,63.9072,.04,21,1,0)
This is the date/time the supplementay report is released.  It is updated by
"^DD",63,63.9072,.04,21,2,0)
the software and can only be modified from programmer mode.
"^DD",63,63.9072,.04,"DT")
3040205
"^DD",63,63.9072,1,0)
PREMODIFICATION TEXT^63.90721^^1;0
"^DD",63,63.9072,1,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.9072,1,21,1,0)
This is the text of the supplementary report as it existed before it was
"^DD",63,63.9072,1,21,2,0)
modified.  It is updated by the software and can only be modified from
"^DD",63,63.9072,1,21,3,0)
programmer mode.
"^DD",63,63.90721,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.90721,0,"DT")
2991206
"^DD",63,63.90721,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.90721,0,"UP")
63.9072
"^DD",63,63.90721,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.90721,.01,3)
This is the text of the supplementary report before it was modified.  It is updated by the software and can only be modified from programmer mode.
"^DD",63,63.90721,.01,21,0)
^.001^3^3^3001121^^^^
"^DD",63,63.90721,.01,21,1,0)
This is the text of the supplementary report as it existed before it was
"^DD",63,63.90721,.01,21,2,0)
modified.  This field is updated by the software and can only be modified from
"^DD",63,63.90721,.01,21,3,0)
programmer mode.
"^DD",63,63.90721,.01,"DT")
2991206
"^DD",63,63.908,0)
COMMENT SUB-FIELD^NL^.01^1
"^DD",63,63.908,0,"NM","COMMENT")

"^DD",63,63.908,0,"UP")
63.09
"^DD",63,63.908,.01,0)
COMMENT^MF^^0;1^K:$L(X)>75!($L(X)<1) X
"^DD",63,63.908,.01,3)
ANSWER MUST BE 1-75 CHARACTERS IN LENGTH
"^DD",63,63.908,.01,21,0)
^^1^1^2911205^
"^DD",63,63.908,.01,21,1,0)
This is a comment on the cytopathology data.
"^DD",63,63.908,.01,"DT")
2850318
"^DD",63,63.91,0)
GROSS DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.91,0,"NM","GROSS DESCRIPTION")

"^DD",63,63.91,0,"UP")
63.09
"^DD",63,63.91,.01,0)
GROSS DESCRIPTION^W^^0;1^Q
"^DD",63,63.91,.01,"DT")
2850228
"^DD",63,63.911,0)
MICROSCOPIC EXAMINATION SUB-FIELD^NL^.01^1
"^DD",63,63.911,0,"NM","MICROSCOPIC EXAMINATION")

"^DD",63,63.911,0,"UP")
63.09
"^DD",63,63.911,.01,0)
MICROSCOPIC EXAMINATION^W^^0;1^Q
"^DD",63,63.911,.01,"DT")
2930716
"^DD",63,63.912,0)
CYTOPATH ORGAN/TISSUE SUB-FIELD^NL^5^7
"^DD",63,63.912,0,"NM","CYTOPATH ORGAN/TISSUE")

"^DD",63,63.912,0,"UP")
63.09
"^DD",63,63.912,.001,0)
NUMBER^NJ2,0^^ ^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",63,63.912,.001,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99
"^DD",63,63.912,.001,"DT")
2850227
"^DD",63,63.912,.01,0)
CYTOPATH ORGAN/TISSUE^M*P61'X^LAB(61,^0;1^S:$E(X,1,2)="T-" X=$E(X,3,$L(X)) S SEX=$S('$D(SEX):"MF",SEX="":"MF",1:SEX) S DIC(0)="EMO",DIC("S")="I SEX[$P(^(0),U,3)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.912,.01,4)
W !,"Selects when appropriate sex related organs.",!,"Ex. A uterus should not be selected for a male patient !!",!
"^DD",63,63.912,.01,"DT")
2870919
"^DD",63,63.912,1,0)
FUNCTION^63.985PA^^3;0
"^DD",63,63.912,1,21,0)
^^2^2^2911205^
"^DD",63,63.912,1,21,1,0)
These are the functions associated with this
"^DD",63,63.912,1,21,2,0)
organ/tissue(s).
"^DD",63,63.912,1.5,0)
PROCEDURE^63.982PA^^4;0
"^DD",63,63.912,1.5,21,0)
^^2^2^2911205^
"^DD",63,63.912,1.5,21,1,0)
These are the procedures associated with this
"^DD",63,63.912,1.5,21,2,0)
organ/tissue(s).
"^DD",63,63.912,3,0)
DISEASE^63.915PA^^1;0
"^DD",63,63.912,3,21,0)
^^2^2^2911205^
"^DD",63,63.912,3,21,1,0)
These are the diseases associated with this
"^DD",63,63.912,3,21,2,0)
organ/tissue(s).
"^DD",63,63.912,4,0)
MORPHOLOGY^63.916PA^^2;0
"^DD",63,63.912,4,21,0)
^^2^2^2911205^
"^DD",63,63.912,4,21,1,0)
These are morphologies associated with this
"^DD",63,63.912,4,21,2,0)
organ/tissue(s).
"^DD",63,63.912,5,0)
SPECIAL STUDIES^63.919SAI^^5;0
"^DD",63,63.912,5,21,0)
^^2^2^2911205^
"^DD",63,63.912,5,21,1,0)
These are the special studies associated with this
"^DD",63,63.912,5,21,2,0)
organ/tissue(s).
"^DD",63,63.9121,0)
SMEAR PREP SUB-FIELD^^1^2
"^DD",63,63.9121,0,"DT")
3030305
"^DD",63,63.9121,0,"IX","B",63.9121,.01)

"^DD",63,63.9121,0,"NM","SMEAR PREP")

"^DD",63,63.9121,0,"UP")
63.902
"^DD",63,63.9121,.01,0)
SMEAR PREP^MF^^0;1^K:$L(X)>9!($L(X)<1) X
"^DD",63,63.9121,.01,1,0)
^.1
"^DD",63,63.9121,.01,1,1,0)
63.9121^B
"^DD",63,63.9121,.01,1,1,1)
S ^LR(DA(3),"CY",DA(2),.1,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",63,63.9121,.01,1,1,2)
K ^LR(DA(3),"CY",DA(2),.1,DA(1),1,"B",$E(X,1,30),DA)
"^DD",63,63.9121,.01,3)
ANSWER MUST BE 1-9 CHARACTERS IN LENGTH
"^DD",63,63.9121,.01,"DT")
2880704
"^DD",63,63.9121,1,0)
STAIN/PROCEDURE^63.9122PA^^1;0
"^DD",63,63.9121,1,"DT")
2910113
"^DD",63,63.9122,0)
STAIN/PROCEDURE SUB-FIELD^^.09^9
"^DD",63,63.9122,0,"DT")
3030305
"^DD",63,63.9122,0,"NM","STAIN/PROCEDURE")

"^DD",63,63.9122,0,"UP")
63.9121
"^DD",63,63.9122,.01,0)
STAIN/PROCEDURE^M*P60'X^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.9122,.01,1,0)
^.1^^0
"^DD",63,63.9122,.01,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.9122,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.9122,.01,"DT")
2911231
"^DD",63,63.9122,.02,0)
SLIDES PREPARED (#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9122,.02,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.9122,.02,21,0)
^^1^1^2880704^
"^DD",63,63.9122,.02,21,1,0)
The number of slides prepared
"^DD",63,63.9122,.02,"DT")
2880704
"^DD",63,63.9122,.03,0)
CONTROL SLIDES (#)^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9122,.03,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.9122,.03,"DT")
2880704
"^DD",63,63.9122,.04,0)
DATE/TIME SLIDES STAINED^DX^^0;4^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.9122,.04,3)
Future date/time not allowed.
"^DD",63,63.9122,.04,21,0)
^^1^1^2930331^
"^DD",63,63.9122,.04,21,1,0)
Date slides were stained
"^DD",63,63.9122,.04,"DT")
2910429
"^DD",63,63.9122,.05,0)
DATE/TIME SLIDES EXAMINED^DX^^0;5^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.9122,.05,3)
Future date/time not allowed.
"^DD",63,63.9122,.05,21,0)
^^1^1^2930331^
"^DD",63,63.9122,.05,21,1,0)
Date slides were examined
"^DD",63,63.9122,.05,"DT")
2910429
"^DD",63,63.9122,.06,0)
SLIDES COUNTED (#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9122,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.9122,.06,21,0)
^^1^1^2910430^
"^DD",63,63.9122,.06,21,1,0)
Last number of slides counted for workload.
"^DD",63,63.9122,.06,"DT")
2910430
"^DD",63,63.9122,.07,0)
LABELS TO PRINT^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9122,.07,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.9122,.07,"DT")
2910502
"^DD",63,63.9122,.08,0)
SLIDES SCREENED (#)^NJ3,0^^0;8^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9122,.08,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.9122,.08,21,0)
^^1^1^2910513^
"^DD",63,63.9122,.08,21,1,0)
Last number of slides screened for workload.
"^DD",63,63.9122,.08,"DT")
2910513
"^DD",63,63.9122,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9122,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.9122,.09,"DT")
2930402
"^DD",63,63.913,0)
BRIEF CLINICAL HISTORY SUB-FIELD^NL^.01^1
"^DD",63,63.913,0,"NM","BRIEF CLINICAL HISTORY")

"^DD",63,63.913,0,"UP")
63.09
"^DD",63,63.913,.01,0)
BRIEF CLINICAL HISTORY^W^^0;1^Q
"^DD",63,63.913,.01,"DT")
2850227
"^DD",63,63.914,0)
PREOPERATIVE DIAGNOSIS SUB-FIELD^NL^.01^1
"^DD",63,63.914,0,"NM","PREOPERATIVE DIAGNOSIS")

"^DD",63,63.914,0,"UP")
63.09
"^DD",63,63.914,.01,0)
PREOPERATIVE DIAGNOSIS^W^^0;1^Q
"^DD",63,63.914,.01,3)

"^DD",63,63.914,.01,"DT")
2850303
"^DD",63,63.915,0)
DISEASE SUB-FIELD^NL^.01^1
"^DD",63,63.915,0,"NM","DISEASE")

"^DD",63,63.915,0,"UP")
63.912
"^DD",63,63.915,.01,0)
DISEASE^M*P61.4'X^LAB(61.4,^0;1^S DIC(0)="EQMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.915,.01,21,0)
^^2^2^2911205^
"^DD",63,63.915,.01,21,1,0)
This is the disease associated with this
"^DD",63,63.915,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.915,.01,"DT")
2870715
"^DD",63,63.916,0)
MORPHOLOGY SUB-FIELD^NL^1^2
"^DD",63,63.916,0,"NM","MORPHOLOGY")

"^DD",63,63.916,0,"UP")
63.912
"^DD",63,63.916,.01,0)
MORPHOLOGY^M*P61.1'X^LAB(61.1,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.916,.01,3)
You may enter:
"^DD",63,63.916,.01,4)
W !!,"N, CLASS I, or CLASS 1 for NEGATIVE",!,"A, II, CLASS II or CLASS 2(choice of atypias) for ATYPIA",!,"S, III, 3, CLASS III or CLASS 3 for SUSPICIOUS",!,"P, CLASS V, or CLASS 5 for POSITIVE",!,"U or CLASS 0 for UNSATISFACTORY",!
"^DD",63,63.916,.01,21,0)
^^2^2^2911205^
"^DD",63,63.916,.01,21,1,0)
This is the morphology associated with this
"^DD",63,63.916,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.916,.01,"DT")
2870919
"^DD",63,63.916,1,0)
ETIOLOGY^63.917PA^^1;0
"^DD",63,63.916,1,21,0)
^^2^2^2911205^
"^DD",63,63.916,1,21,1,0)
These are the etiologies associated with this
"^DD",63,63.916,1,21,2,0)
organ/tissue(s).
"^DD",63,63.917,0)
ETIOLOGY SUB-FIELD^NL^.01^1
"^DD",63,63.917,0,"NM","ETIOLOGY")

"^DD",63,63.917,0,"UP")
63.916
"^DD",63,63.917,.01,0)
ETIOLOGY^M*P61.2'X^LAB(61.2,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.917,.01,21,0)
^^2^2^2911205^
"^DD",63,63.917,.01,21,1,0)
This is an etiology associated with this
"^DD",63,63.917,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.917,.01,"DT")
2870919
"^DD",63,63.918,0)
DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.918,0,"NM","DESCRIPTION")

"^DD",63,63.918,0,"UP")
63.907
"^DD",63,63.918,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",63,63.918,.01,"DT")
2850227
"^DD",63,63.919,0)
SPECIAL STUDIES SUB-FIELD^NL^1^4
"^DD",63,63.919,0,"ID",.03)
W "   ",$P(^(0),U,3)
"^DD",63,63.919,0,"NM","SPECIAL STUDIES")

"^DD",63,63.919,0,"UP")
63.912
"^DD",63,63.919,.01,0)
SPECIAL STUDIES^MS^E:EM;I:IMMUNOFLUORESCENCE;P:PHOTOGRAPHY;C:CONSULTATION;IP:IMMUNOPEROXIDASE;^0;1^Q
"^DD",63,63.919,.01,21,0)
^^2^2^2911205^
"^DD",63,63.919,.01,21,1,0)
This is a special study associated with this
"^DD",63,63.919,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.919,.01,"DT")
2850408
"^DD",63,63.919,.02,0)
DATE^RD^^0;2^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.919,.02,21,0)
^^1^1^2911205^
"^DD",63,63.919,.02,21,1,0)
This is the date of the special study.
"^DD",63,63.919,.02,"DT")
2850227
"^DD",63,63.919,.03,0)
ID #^F^^0;3^K:$L(X)>30!($L(X)<1) X
"^DD",63,63.919,.03,3)
ANSWER MUST BE 1-30 CHARACTERS IN LENGTH
"^DD",63,63.919,.03,21,0)
^^1^1^2911205^
"^DD",63,63.919,.03,21,1,0)
This is the identification number of the special study.
"^DD",63,63.919,.03,"DT")
2850227
"^DD",63,63.919,1,0)
DESCRIPTION^63.921^^1;0
"^DD",63,63.919,1,21,0)
^^1^1^2911205^
"^DD",63,63.919,1,21,1,0)
This is the description of the special studies.
"^DD",63,63.92005,0)
IMAGE SUB-FIELD^^.01^1
"^DD",63,63.92005,0,"DT")
2950523
"^DD",63,63.92005,0,"IX","B",63.92005,.01)

"^DD",63,63.92005,0,"NM","IMAGE")

"^DD",63,63.92005,0,"UP")
63.09
"^DD",63,63.92005,.01,0)
IMAGE^MP2005'^MAG(2005,^0;1^Q
"^DD",63,63.92005,.01,1,0)
^.1
"^DD",63,63.92005,.01,1,1,0)
63.92005^B
"^DD",63,63.92005,.01,1,1,1)
S ^LR(DA(2),"CY",DA(1),2005,"B",$E(X,1,30),DA)=""
"^DD",63,63.92005,.01,1,1,2)
K ^LR(DA(2),"CY",DA(1),2005,"B",$E(X,1,30),DA)
"^DD",63,63.92005,.01,3)
IMAGE POINTER BACK TO IMAGE FILE
"^DD",63,63.92005,.01,"DT")
2950523
"^DD",63,63.921,0)
DESCRIPTION SUB-FIELD^NL^.01^1
"^DD",63,63.921,0,"NM","DESCRIPTION")

"^DD",63,63.921,0,"UP")
63.919
"^DD",63,63.921,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",63,63.921,.01,"DT")
2850227
"^DD",63,63.922,0)
CELL BLOCK SUB-FIELD^^1^2
"^DD",63,63.922,0,"DT")
2930402
"^DD",63,63.922,0,"IX","B",63.922,.01)

"^DD",63,63.922,0,"NM","CELL BLOCK")

"^DD",63,63.922,0,"UP")
63.902
"^DD",63,63.922,.01,0)
CELL BLOCK^MF^^0;1^K:$L(X)>9!($L(X)<1) X
"^DD",63,63.922,.01,1,0)
^.1
"^DD",63,63.922,.01,1,1,0)
63.922^B
"^DD",63,63.922,.01,1,1,1)
S ^LR(DA(3),"CY",DA(2),.1,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",63,63.922,.01,1,1,2)
K ^LR(DA(3),"CY",DA(2),.1,DA(1),2,"B",$E(X,1,30),DA)
"^DD",63,63.922,.01,3)
ANSWER MUST BE 1-9 CHARACTERS IN LENGTH
"^DD",63,63.922,.01,"DT")
2880704
"^DD",63,63.922,1,0)
CELL BLOCK STAIN^63.923PA^^1;0
"^DD",63,63.922,1,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.922,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.923,0)
CELL BLOCK STAIN SUB-FIELD^^.09^9
"^DD",63,63.923,0,"DT")
2930402
"^DD",63,63.923,0,"NM","CELL BLOCK STAIN")

"^DD",63,63.923,0,"UP")
63.922
"^DD",63,63.923,.01,0)
CELL BLOCK STAIN^M*P60'X^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.923,.01,1,0)
^.1^^0
"^DD",63,63.923,.01,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.923,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.923,.01,"DT")
2911231
"^DD",63,63.923,.02,0)
SLIDES PREPARED (#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.923,.02,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.923,.02,"DT")
2880704
"^DD",63,63.923,.03,0)
CONTROL SLIDES (#)^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.923,.03,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.923,.03,"DT")
2880704
"^DD",63,63.923,.04,0)
DATE/TIME SLIDES STAINED^DX^^0;4^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.923,.04,3)
Future date/time not allowed.
"^DD",63,63.923,.04,21,0)
^^1^1^2930331^
"^DD",63,63.923,.04,21,1,0)
Date slides were stained
"^DD",63,63.923,.04,"DT")
2910429
"^DD",63,63.923,.05,0)
DATE/TIME SLIDES EXAMINED^DX^^0;5^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.923,.05,3)
Future date/time not allowed.
"^DD",63,63.923,.05,21,0)
^^1^1^2930331^
"^DD",63,63.923,.05,21,1,0)
Date slides were examined
"^DD",63,63.923,.05,"DT")
2910429
"^DD",63,63.923,.06,0)
SLIDES COUNTED (#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.923,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.923,.06,21,0)
^^1^1^2910430^
"^DD",63,63.923,.06,21,1,0)
Last number of slides counted for workload.
"^DD",63,63.923,.06,"DT")
2910430
"^DD",63,63.923,.07,0)
LABELS TO PRINT^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.923,.07,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.923,.07,"DT")
2910502
"^DD",63,63.923,.08,0)
SLIDES SCREENED (#)^NJ3,0^^0;8^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.923,.08,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.923,.08,21,0)
^^1^1^2910513^
"^DD",63,63.923,.08,21,1,0)
Last number of slides screened for workload.
"^DD",63,63.923,.08,"DT")
2910513
"^DD",63,63.923,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.923,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.923,.09,"DT")
2930402
"^DD",63,63.924,0)
MEMBRANE FILTER SUB-FIELD^^1^2
"^DD",63,63.924,0,"DT")
2930402
"^DD",63,63.924,0,"NM","MEMBRANE FILTER")

"^DD",63,63.924,0,"UP")
63.902
"^DD",63,63.924,.01,0)
MEMBRANE FILTER^MF^^0;1^K:$L(X)>9!($L(X)<1) X
"^DD",63,63.924,.01,1,0)
^.1^^0
"^DD",63,63.924,.01,3)
Answer must be 1-9 characters in length.
"^DD",63,63.924,.01,"DT")
2910113
"^DD",63,63.924,1,0)
MEMBRANE FILTER STAIN^63.9241PA^^1;0
"^DD",63,63.924,1,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.924,1,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.9241,0)
MEMBRANE FILTER STAIN SUB-FIELD^^.09^9
"^DD",63,63.9241,0,"DT")
2930402
"^DD",63,63.9241,0,"NM","MEMBRANE FILTER STAIN")

"^DD",63,63.9241,0,"UP")
63.924
"^DD",63,63.9241,.01,0)
MEMBRANE FILTER STAIN^M*P60'X^LAB(60,^0;1^S DIC("S")="I $P(^(0),U,4)=""SP""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.9241,.01,1,0)
^.1^^0
"^DD",63,63.9241,.01,12)
Selects only stains/procedures associated with anatomic pathology
"^DD",63,63.9241,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""SP"""
"^DD",63,63.9241,.01,"DT")
2910113
"^DD",63,63.9241,.02,0)
SLIDES PREPARED (#)^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9241,.02,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.9241,.02,"DT")
2910113
"^DD",63,63.9241,.03,0)
CONTROL SLIDES (#)^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9241,.03,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.9241,.03,"DT")
2910113
"^DD",63,63.9241,.04,0)
DATE/TIME SLIDES STAINED^DX^^0;4^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.9241,.04,3)
Future date/time not allowed.
"^DD",63,63.9241,.04,21,0)
^^1^1^2930331^
"^DD",63,63.9241,.04,21,1,0)
Date slides were stained
"^DD",63,63.9241,.04,"DT")
2910429
"^DD",63,63.9241,.05,0)
DATE/TIME SLIDES EXAMINED^DX^^0;5^S %DT="ETXR",%DT(0)="-N" D ^%DT K %DT S X=Y K:Y<1 X
"^DD",63,63.9241,.05,3)
Future date/time not allowed.
"^DD",63,63.9241,.05,21,0)
^^1^1^2930331^
"^DD",63,63.9241,.05,21,1,0)
Date slides were examined
"^DD",63,63.9241,.05,"DT")
2910429
"^DD",63,63.9241,.06,0)
SLIDES COUNTED (#)^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9241,.06,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.9241,.06,21,0)
^^1^1^2910430^
"^DD",63,63.9241,.06,21,1,0)
Last number of slides counted for workload.
"^DD",63,63.9241,.06,"DT")
2910430
"^DD",63,63.9241,.07,0)
LABELS TO PRINT^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9241,.07,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",63,63.9241,.07,"DT")
2910502
"^DD",63,63.9241,.08,0)
SLIDES SCREENED (#)^NJ3,0^^0;8^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9241,.08,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.9241,.08,21,0)
^^1^1^2910513^
"^DD",63,63.9241,.08,21,1,0)
Last number of slides screened for workload.
"^DD",63,63.9241,.08,"DT")
2910513
"^DD",63,63.9241,.09,0)
NON-CONTROL SLIDES COUNTED^NJ3,0^^0;9^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",63,63.9241,.09,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",63,63.9241,.09,"DT")
2930402
"^DD",63,63.94,0)
DATE MICROSCOPIC EXAM MODIFIED SUB-FIELD^^1^3
"^DD",63,63.94,0,"NM","DATE MICROSCOPIC EXAM MODIFIED")

"^DD",63,63.94,0,"UP")
63.09
"^DD",63,63.94,.01,0)
DATE MICROSCOPIC EXAM MODIFIED^MD^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",63,63.94,.01,21,0)
^^2^2^2911205^^^
"^DD",63,63.94,.01,21,1,0)
This is the date of the modification of the
"^DD",63,63.94,.01,21,2,0)
microscopic examination diagnosis.
"^DD",63,63.94,.01,"DT")
2930716
"^DD",63,63.94,.02,0)
PERSON MODIFYING TEXT^P200'^VA(200,^0;2^Q
"^DD",63,63.94,.02,21,0)
^^1^1^2911205^^^
"^DD",63,63.94,.02,21,1,0)
This is the person modifying text.
"^DD",63,63.94,.02,"DT")
2910630
"^DD",63,63.94,1,0)
PREMODIFICATION TEXT^63.941^^1;0
"^DD",63,63.94,1,21,0)
^^1^1^2911205^^^
"^DD",63,63.94,1,21,1,0)
This is the premodification text.
"^DD",63,63.941,0)
PREMODIFICATION TEXT SUB-FIELD^^.01^1
"^DD",63,63.941,0,"NM","PREMODIFICATION TEXT")

"^DD",63,63.941,0,"UP")
63.94
"^DD",63,63.941,.01,0)
PREMODIFICATION TEXT^W^^0;1^Q
"^DD",63,63.941,.01,21,0)
^^1^1^2911205^
"^DD",63,63.941,.01,21,1,0)
This is the premodification text.
"^DD",63,63.941,.01,"DT")
2861118
"^DD",63,63.97,0)
AUTOPSY COMMENTS SUB-FIELD^NL^.01^1
"^DD",63,63.97,0,"NM","AUTOPSY COMMENTS")

"^DD",63,63.97,0,"UP")
63
"^DD",63,63.97,.01,0)
AUTOPSY COMMENTS^MF^^0;1^K:$L(X)>80!($L(X)<1) X
"^DD",63,63.97,.01,3)
ANSWER MUST BE 1-80 CHARACTERS IN LENGTH
"^DD",63,63.97,.01,21,0)
^^1^1^2911205^^
"^DD",63,63.97,.01,21,1,0)
This is a comment on this autopsy.
"^DD",63,63.97,.01,"DT")
2841017
"^DD",63,63.98,0)
COMMENT SUB-FIELD^NL^.01^1
"^DD",63,63.98,0,"NM","COMMENT")

"^DD",63,63.98,0,"UP")
63.08
"^DD",63,63.98,.01,0)
COMMENT^MFX^^0;1^K:$L(X)>75!($L(X)<1) X I $D(X) S L=75,L(1)="S" D ^LRUB
"^DD",63,63.98,.01,3)
ANSWER MUST BE 1-75 CHARACTERS IN LENGTH
"^DD",63,63.98,.01,4)
S L(1)="S" D Q^LRUB
"^DD",63,63.98,.01,21,0)
^^1^1^2911204^
"^DD",63,63.98,.01,21,1,0)
This is a comment on the specimen.
"^DD",63,63.98,.01,"DT")
2890420
"^DD",63,63.982,0)
PROCEDURE SUB-FIELD^NL^.02^2
"^DD",63,63.982,0,"NM","PROCEDURE")

"^DD",63,63.982,0,"UP")
63.912
"^DD",63,63.982,.01,0)
PROCEDURE^M*P61.5'X^LAB(61.5,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.982,.01,21,0)
^^2^2^2911205^
"^DD",63,63.982,.01,21,1,0)
This is the procedure associated with this
"^DD",63,63.982,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.982,.01,"DT")
2870919
"^DD",63,63.982,.02,0)
RESULT^S^0:NEG;1:POS;^0;2^Q
"^DD",63,63.982,.02,21,0)
^^1^1^2891230^
"^DD",63,63.982,.02,21,1,0)
If result of procedure is positive enter '1' or 'P'.
"^DD",63,63.982,.02,"DT")
2891222
"^DD",63,63.985,0)
FUNCTION SUB-FIELD^NL^.01^1
"^DD",63,63.985,0,"NM","FUNCTION")

"^DD",63,63.985,0,"UP")
63.912
"^DD",63,63.985,.01,0)
FUNCTION^M*P61.3'X^LAB(61.3,^0;1^S DIC(0)="EMO" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",63,63.985,.01,21,0)
^^2^2^2911205^
"^DD",63,63.985,.01,21,1,0)
This is the function associated with this
"^DD",63,63.985,.01,21,2,0)
organ/tissue(s).
"^DD",63,63.985,.01,"DT")
2870919
"^DD",63,63.99,0)
ARCHIVE REFERENCE SUB-FIELD^NL^.01^1
"^DD",63,63.99,0,"NM","ARCHIVE REFERENCE")

"^DD",63,63.99,0,"UP")
63
"^DD",63,63.99,.01,0)
ARCHIVE REFERENCE^NJ5,0IOX^^0;1^K X
"^DD",63,63.99,.01,2)
S Y(0)=Y S Y=$S($D(^LAB(69.9,1,6,+Y,0)):$P(^(0),"^",1),1:+Y)
"^DD",63,63.99,.01,2.1)
S Y=$S($D(^LAB(69.9,1,6,+Y,0)):$P(^(0),"^",1),1:+Y)
"^DD",63,63.99,.01,3)

"^DD",63,63.99,.01,21,0)
^^2^2^2911205^^
"^DD",63,63.99,.01,21,1,0)
This points to the entry in the Laboratory site parameters file 69.9
"^DD",63,63.99,.01,21,2,0)
in the Archive multiple to indicate where data is archived.
"^DD",63,63.99,.01,"DT")
2850821
"^DD",63,63.999,0)
AUTOPSY QA CODE SUB-FIELD^^.01^1
"^DD",63,63.999,0,"NM","AUTOPSY QA CODE")

"^DD",63,63.999,0,"UP")
63
"^DD",63,63.999,.01,0)
AUTOPSY QA CODE^M*P62.5'X^LAB(62.5,^0;1^S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X S:$D(X) DINUM=X
"^DD",63,63.999,.01,1,0)
^.1^^0
"^DD",63,63.999,.01,3)
QA codes must be less than 3 characters.
"^DD",63,63.999,.01,12)
Selects entries with less than 3 characters
"^DD",63,63.999,.01,12.1)
S DIC("S")="I $P(^(0),U,4)=""I"",$L($P(^(0),U))<3"
"^DD",63,63.999,.01,21,0)
^^1^1^2940510^
"^DD",63,63.999,.01,21,1,0)
Quality assurance code for autopsy
"^DD",63,63.999,.01,"DT")
2900916
"^DD",69.9,69.9,619,0)
AP ESIG ON^S^1:YES;0:NO;^15;1^Q
"^DD",69.9,69.9,619,1,0)
^.1^^0
"^DD",69.9,69.9,619,3)
Enter 'Y' or 'N'
"^DD",69.9,69.9,619,21,0)
^.001^6^6^3011025^^
"^DD",69.9,69.9,619,21,1,0)
This field is used to activate the electronic signature function for Anatomic
"^DD",69.9,69.9,619,21,2,0)
Pathology reports.  If the flag is turned on, at the time a report is
"^DD",69.9,69.9,619,21,3,0)
verified/released, the user will be prompted for an electronic signature.  The
"^DD",69.9,69.9,619,21,4,0)
document will then be stored in TIU.  If the flag is off, the report will be
"^DD",69.9,69.9,619,21,5,0)
verified/released without electronic signature and the document will not be
"^DD",69.9,69.9,619,21,6,0)
stored in TIU.
"^DD",69.9,69.9,619,"DEL",1,0)
I
"^DD",69.9,69.9,619,"DT")
3011031
"^DIC",63,63,0)
LAB DATA^63
"^DIC",63,63,0,"GL")
^LR(
"^DIC",63,63,"%",0)
^1.005^^0
"^DIC",63,63,"%D",0)
^^18^18^2931119^^^^
"^DIC",63,63,"%D",1,0)
Patient's laboratory data
"^DIC",63,63,"%D",2,0)
 
"^DIC",63,63,"%D",3,0)
CROSS REFERENCE DESCRIPTION:
"^DIC",63,63,"%D",4,0)
 ^LR("AEMA",'YEAR SPECIMEN TAKEN','ACCESSION #',LRDFN,'DATE/TIME SPECIMEN TAKEN')=""
"^DIC",63,63,"%D",5,0)
 ^LR("AEM",'DATE/TIME SPECIMEN RECEIVED',LRDFN,'DATE/TIME SPECIMEN TAKEN')=""
"^DIC",63,63,"%D",6,0)
 Similar x-refs exists for SURGICAL PATHOLOGY: "ASPA" and "ASP"
"^DIC",63,63,"%D",7,0)
                           CYTOLOGY:           "ACYA" and "ACY"
"^DIC",63,63,"%D",8,0)
                           AUTOPSY:            "AAUA" and "AAU"
"^DIC",63,63,"%D",9,0)
 
"^DIC",63,63,"%D",10,0)
 ^LR("AAU",'AUTOPSY DATE/TIME',LRDFN)=""
"^DIC",63,63,"%D",11,0)
 
"^DIC",63,63,"%D",12,0)
 ^LR("AD",DT,'ORGANISM','ACCESSION'_" ")=LRDFN
"^DIC",63,63,"%D",13,0)
 Set when an organism to be reported to the health department is entered.
"^DIC",63,63,"%D",14,0)
 
"^DIC",63,63,"%D",15,0)
 ^LR(LRDFN,"CH",LRIDT,1,"AC",DUZ,$H)=DATE REPORT COMPLETED^VERIFY PERSON^
"^DIC",63,63,"%D",16,0)
 COMMENT (DELETED)
"^DIC",63,63,"%D",17,0)
 Set when a comment is deleted from a verified test, used by the routine
"^DIC",63,63,"%D",18,0)
 LRDCOM.
"^DIC",63,"B","LAB DATA",63)

**END**
**END**

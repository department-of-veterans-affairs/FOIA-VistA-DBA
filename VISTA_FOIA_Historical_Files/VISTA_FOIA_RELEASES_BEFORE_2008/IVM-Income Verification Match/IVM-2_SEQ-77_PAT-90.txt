$TXT Created by POSTMASTER at MNTVLL.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 09/17/03 at 12:59
=============================================================================
Run Date: OCT 29, 2003                     Designation: IVM*2*90
Package : IVM - INCOME VERIFICATION MATCH     Priority: Mandatory
Version : 2        SEQ #77                      Status: Released
                  Compliance Date: NOV 29, 2003
=============================================================================

Associated patches: (v)IVM*2*51    <<= must be installed BEFORE `IVM*2*90'

Subject: Stop upload of corrupt LTC transmission

Category: 
  - Routine

Description:
============

 This patch, IVM*2.0*90, will address the problem reported in NOIS:
 MAD-0703-40828.
  
 HL7 ORU Z10 tests are being sent to the VistA sites from the HEC with
 fabricated LTC tests that do not belong to the patient in question.  
 These tests are an exact copy of the Means test or Copay test that does
 belong to the patient including the status code.
  
 This status code is invalid for LTC tests, and when uploaded into the 
 VistA database, this code is set to null in the ANNUAL MEANS TEST file 
 (#408.31).
  
 This patch will update the IVMCMC routine to ignore these LTC tests with 
 bad status codes and prevent the erroneous upload.
  
  
 This patch addresses the following E3R(s):
 ------------------------------------------
 There are no E3Rs associated with this patch.
  
  
 This patch addresses the following NOIS message(s):
 ---------------------------------------------------
 MAD-0703-40828:  LTC tests.
  
  
 Overview of NOIS Message(s):
 ---------------------------
 MAD-0703-40828:  LTC tests. 
  
 Problem:  Fabricated LTC tests are being uploaded to VistA and are 
 creating new tests or destroy existing good tests.
  
 Resolution:  The HL7 ORU Z10 incoming message from HEC will be examined 
 and any LTC tests with invalid status codes, will be ignored and not 
 uploaded.
  
  
  
  
         ================INSTALLATION INSTRUCTIONS =================
  
  This patch can be loaded with users on the system, however, it should be
  installed during period of minimum usage. 
  
  Install Time - less than 5 minutes.
  
  
   1.   LOAD TRANSPORT GLOBAL
        ---------------------
        Choose the PackMan message containing this patch and invoke the
        INSTALL/CHECK MESSAGE PackMan option.
  
   2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only)
        -----------------------
        Disable routine mapping on all systems for the routines listed in
        step 3 below.
  
 NOTE:  If the routines included in this patch are not currently in
        your mapped routine set, please skip this step.
  
   3.   COMPONENTS SENT WITH PATCH
        --------------------------
        The following is a list of the routines included in this patch.
        The second line of each of these routines now looks like:
  
     <tab>;;2.0;INCOME VERIFICATION MATCH;**[patch list]**;21-OCT-94
  
                            CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  IVMCMC                 7446858              7747198       17,34,49,51,90
  
         Total number of modified routines - 1
  
   4.   START UP KIDS
        -------------
        Start up the Kernel Installation and Distribution System Menu
        [XPD MAIN]:
  
             Edits and Distribution ...
             Utilities ...
             Installation ...
  
   Select Kernel Installation & Distribution System Option: INStallation
                                                            ---
             Load a Distribution
             Print Transport Global
             Compare Transport Global to Current System
             Verify Checksums in Transport Global
             Install Package(s)
             Restart Install of Package(s)
             Unload a Distribution
             Backup a Transport Global
  
   Select Installation Option:
  
   5.   Select Installation Option:
        --------------------------
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter IVM*2.0*90):
  
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
   6.   Select Installation Option: Install Package(s)
                                    ----------------
        **This is the step to start the installation of this KIDS patch:
  
        a.  Choose the Install Package(s) option to start the patch intall.
        b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
            YES//' answer NO (unless otherwise indicated)
        c.  When prompted 'Want to DISABLE Scheduled Options, Menu
            Options, and Protocols? YES//' answer NO (unless otherwise
            indicated)
  
   7.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
        -------------------------
        Optional - Include the routines distributed with this patch
        in the mapped routine set.
  
         NOTE: This step is only necessary if you performed step 2 or
         if you wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - IVMCMC

 This routine has been modified to ignore bad LTC HL7 segments.  These 
 segments have invalid status codes in piece 3 of the HL7 segment ZMT^4.
  
  
 Old routine:
 ============
 5         ;;2.0;INCOME VERIFICATION MATCH;**17,34,49,51**;21-OCT-94
 6         ;
  
 ******
 91        S ^TMP($J,"IVMCM",SEG)=$P(IVMSEG,HLFS,2,99)
  
  
 New routine:
 ============
 5         ;;2.0;INCOME VERIFICATION MATCH;**17,34,49,51**;21-OCT-94
 6         ;
 7         ;IVM*2*90 - stop upload of LTC type 4 test when status code not
 valid
 8         ;
  
 *****
 93        ;
 94        ;IVM*2*90   don't allow upload of LTC with a date & a bad status
 code
 95        I 
 SEG="ZMT4",$P(IVMSEG,HLFS,3),$P(IVMSEG,HLFS,4)'=0,$P(IVMSEG,HLFS,4)'=1
 96        ;
 97        S ^TMP($J,"IVMCM",SEG)=$P(IVMSEG,HLFS,2,99)

Routine Checksum:

=============================================================================
User Information:
Entered By  : NAPOLIELLO,GREG               Date Entered  : SEP 16, 2003
Completed By: LANDRY,DANNA                  Date Completed: OCT 28, 2003
Released By : GANUS,MAUNETTE                Date Released : OCT 29, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

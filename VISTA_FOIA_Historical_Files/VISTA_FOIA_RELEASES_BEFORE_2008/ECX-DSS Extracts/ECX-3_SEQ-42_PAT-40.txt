$TXT Created by DOWNING,TODD at DEVVCC.ISC-ALBANY.VA.GOV  (KIDS) on FRIDAY, 04/12/02 at 09:15
=============================================================================
Run Date: APR 15, 2002                     Designation: ECX*3*40
Package : ECX - DSS EXTRACTS                  Priority: Mandatory
Version : 3        SEQ #42                      Status: Released
=============================================================================

Associated patches: (v)ECX*3*8     <<= must be installed BEFORE `ECX*3*40'

Subject: PHARMACY REPORTS 

Category: 
  - Routine
  - Enhancement (Mandatory)

Description: 
============

 This patch contains the following report modifications/additions to Pharmacy 
 Reports located under the Maintenance menu [ECX MAINTENANCE] in the Extract 
 Manager's Options menu [ECXMGR]: 
  
  
 1. The following modifications were made to the Pharmacy option [PHA] of the 
 Feeder Keys Print Report [ECXFEKEY].
  
 a) Removal of report functionality involving old style (pre-1999) 19 
 character Feeder Keys.  The report will now show New Feeder Key by NDF 
 match only, sorted by Feeder Key.
  
 b) Addition of a Price Per Dispense Unit column to the report.  This column 
 will be populated with the Price Per Dispense Unit field (#16) of the Drug 
 File (#50).
  
  
 2. Two new options were added to the Maintenance Menu [ECX MAINTENANCE]:
  
 a) Pharmacy Extracts Incomplete Feeder Key Report [ECX PHA FKEY].
  
 This report prints a listing of Drug file entries that have an incomplete 
 Feeder Key based on one of the following conditions:
  
        - No PSNDF VA Product Name Entry (first 5 digits are zero)
        - No National Drug Code (NDC) (last 12 digits are zero)
        - No PSNDF VA Product Name Entry or NDC (all 17 digits are zero)
  
 This report is designed to be run before the extract for a specified date 
 range and can be used as a tool to identify and fix Drug file (#50) entries 
 that have incomplete Feeder Keys.  Only those drugs that would be included 
 in the Extract for the specified date range are listed on the report for the 
 Pharmacy Extract selected (PRE, IVP or UDP).
  
 The following columns are included on the report:
  
        1) Drug Entry - INTERNAL ENTRY NUMBER (IEN) for the drug from the 
           DRUG file (#50).
  
        2) Generic Name - The GENERIC NAME field (#.01) of the drug from 
           the DRUG file (#50).
  
        3) Feeder Key - The Feeder Key for the drug, which is the first 5 
           characters of the PSNDF VA PRODUCT NAME ENTRY field (#22) 
           concatenated with the 12 character NDC field (#31) from the DRUG 
           file (#50).
  
        4) # of Records - The number of extract records that would contain 
           this drug for the date range specified if the extract were run.
  
        5) Total Quantity - The sum of the quantities of the drug from all of 
           the extract records.  This is the same as the QUANTITY field for the 
           PRE extract (#16) and UDP extract (#10).  For the IVP extract the 
           Total Quantity is the sum of the values taken from the ADDITIVE 
           STRENGTH field (#7) or SOLUTION VOLUME field (#9) of the IV EXTRACT 
           DATA file (#728.113).
  
        6) Unit Price - The PRICE PER DISPENSE UNIT field (#16) from the DRUG 
           file (#50) for the PRE and UDP extracts.  For the IVP extract 
           Unit Price is the COST field (#12) of the IV EXTRACT DATA file 
           (#728.13).
  
        7) Total Cost - The total cost of the drug for the extract (Total 
           Quantity x Unit Price).  For all three Pharmacy extracts the Total 
           Cost is the same as the sum of the COST field from all extract 
           records containing the drug.
  
  
 b) Pharmacy Extracts Unusual Volume Report [ECX PHA FKEY].
  
 This report prints a listing of unusual volumes that would be generated by the 
 Pharmacy extracts (PRE, IVP and UDP) as determined by a user defined threshold
 value.  It is designed to be run prior to the generation of the actual 
 extract(s) to identify and fix as necessary any volumes determined to be 
 erroneous. Unusual volumes are defined as follows for the Pharmacy extracts:
  
        PRE Extract:  Quantity field is greater than the threshold value.  
        IVP Extract:  Total Doses Per Day field is greater than the threshold
                      or less than the negative of the threshold value.        
        UDP Extract:  Quantity field is greater than the threshold value.
  
 The following columns are included on the report:
  
        1) Name - The first four characters of the patient's last name.
  
        2) SSN - The patient's Social Security Number.
  
        3) Day - The month and day (MM/DD) that the event occurred.
           This is the same as the DAY field (#8) from the extract.
  
        4) Generic Name - The GENERIC NAME field (#.01) of the drug from 
           the DRUG file (#50).
  
        5) Feeder Key - The Feeder Key for the drug, which is the first 5 
           characters of the PSNDF VA PRODUCT NAME ENTRY field (#22) 
           concatenated with the 12 character NDC field (#31) from the DRUG 
           file (#50).
  
        6) Quantity - This is the same as the QUANTITY field for the PRE and 
           UDP Extracts and the TOTAL DOSES PER DAY field for the IVP Extract.
  
        7) Total Cost - This is the same as the COST field from the extracts 
           (#17 for PRE, #13 for IVP and UPD)
  
  
 **NOTE: The new Pharmacy reports listed in 2(a) and 2(b) can take up to 30 
         minutes or longer to run depending on the size of the extract.
  
  
 ROUTINE SUMMARY:
 ================
  
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;3.0;DSS EXTRACTS;**[patch list]**;Dec 22, 1997
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  ECXAPHA                    N/A             13753069             40
  ECXAPHA2                   N/A              9401836             40
  ECXDRUG1                   N/A             13696670             40
  ECXDRUG2                   N/A              7195710             40
  ECXFEKE1              10978671             10471922           11,8,40
  ECXFEKEY              23990095             17761573         10,11,8,40
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
     
  This patch can be loaded with users on the system, but coordinate with DSS 
  Extract users to prevent use of options until installation has been 
  completed.  
      
    If you are running the install interactively and not rebuilding user 
    menus, installation will take less than 5 minutes. 
      
    Note:  If you are not running the installation interactively and intend
           to allow KIDS to start the rebuild of user menus upon completion
           of the install, then please queue the install for a period of
           low system activity.
      
    No harm to your database will occur if the installation is performed  
    more than once.
      
    1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
        the KIDS distribution included with this message.
       
    2.  Review your mapped set.  If any of the routines listed in the
        ROUTINE SUMMARY section are mapped, they should be removed
        from the mapped set at this time.
       
    3.  From the Kernel Installation and Distribution System Menu, select 
        the Installation menu.  
       
    4.  From this menu, you may elect to use the following options
        (when prompted for INSTALL NAME, enter ECX*3.0*40):
   
        a.  Backup a Transport Global - this option will create a backup
            message of any routines exported with the patch.  It will NOT
            backup any other changes such as DDs or templates.
        b.  Compare Transport Global to Current System  - this option will
            allow you to view all changes that will be made when the patch
            is installed.  It compares all components of the patch 
            (routines, DDs, templates, etc.).
        c.  Verify Checksums in Transport Global - this option will
            allow you to ensure the integrity of the routines that are in
            the transport global.
       
    5.  Use the Install Package(s) option and select the package ECX*3.0*40.
      
    6.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
        Protocols? YES//', respond YES.  When prompted to select the options
        you would like to place out of order, enter the following:
     
        Maintenance   [ECX MAINTENANCE]
     
    7.  If routines were unmapped as part of step 2, they should be returned
        to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - ECXAPHA


Routine Checksum:

Routine Name:
  - ECXAPHA2


Routine Checksum:

Routine Name:
  - ECXDRUG1


Routine Checksum:

Routine Name:
  - ECXDRUG2


Routine Checksum:

Routine Name:
  - ECXFEKEY


Routine Checksum:

Routine Name:
  - ECXFEKE1


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : DOWNING,TODD                   Date Entered : JAN 31, 2002
Completed By: DEFIBAUGH,ELIZABETH           Date Completed: APR 15, 2002
Released By : STRICKLAND,JOAN C            Date Released : APR 15, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT

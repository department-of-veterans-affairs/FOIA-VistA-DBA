Released SR*3*160 SEQ #154
Extracted from mail message
**KIDS**:SR*3.0*160^

**INSTALL NAME**
SR*3.0*160
"BLD",6213,0)
SR*3.0*160^SURGERY^0^3070516^y
"BLD",6213,1,0)
^^170^170^3070404^
"BLD",6213,1,1,0)
This patch updates the Surgery Risk Assessment software of the Veterans
"BLD",6213,1,2,0)
Health Information Systems and Technology Architecture (VistA) Surgery
"BLD",6213,1,3,0)
application as requested by the Executive Board of the National Surgical
"BLD",6213,1,4,0)
Quality Improvement Program (NSQIP) and by the Cardiac Surgery Consultants
"BLD",6213,1,5,0)
Board of the Continuous Improvement in Cardiac Surgery Program (CICSP).
"BLD",6213,1,6,0)
The updates include the addition of new data fields, changes to existing 
"BLD",6213,1,7,0)
data fields, changes to data entry screens, changes to reports used in 
"BLD",6213,1,8,0)
Surgery Risk Assessment management process and changes to the Surgery Risk
"BLD",6213,1,9,0)
Assessment transmissions.
"BLD",6213,1,10,0)
 
"BLD",6213,1,11,0)
Non-Cardiac Assessment Modifications
"BLD",6213,1,12,0)
------------------------------------
"BLD",6213,1,13,0)
 * Note: All fields named below are in the SURGERY file (#130) unless 
"BLD",6213,1,14,0)
         otherwise indicated.
"BLD",6213,1,15,0)
 
"BLD",6213,1,16,0)
- These updates include functionality for selecting cases for risk
"BLD",6213,1,17,0)
  assessment based upon case Current Procedural Terminology (CPT) codes,
"BLD",6213,1,18,0)
  replacing the use of the Major or Minor surgery definition.
"BLD",6213,1,19,0)
   o When selecting a case to be assessed, the software will check the 
"BLD",6213,1,20,0)
     case CPT codes and display an informational statement if no CPT codes
"BLD",6213,1,21,0)
     have been assigned to the case or if the case should be excluded from
"BLD",6213,1,22,0)
     assessment.
"BLD",6213,1,23,0)
   o A new report called "List of Eligible Cases" is added to the reports 
"BLD",6213,1,24,0)
     contained in the List of Surgery Risk Assessments [SROA ASSESSMENT 
"BLD",6213,1,25,0)
     LIST] option.
"BLD",6213,1,26,0)
   o The MAJOR/MINOR field (#.03) is removed from NSQIP input options and 
"BLD",6213,1,27,0)
     from the Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT] 
"BLD",6213,1,28,0)
     option.
"BLD",6213,1,29,0)
 
"BLD",6213,1,30,0)
- A new field called INTRAOPERATIVE ASCITES (#446) is created:
"BLD",6213,1,31,0)
   o Added to the Operation Information (Enter/Edit) [SROA OPERATION DATA]
"BLD",6213,1,32,0)
     option
"BLD",6213,1,33,0)
   o Added to the Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT] 
"BLD",6213,1,34,0)
     option
"BLD",6213,1,35,0)
   o Added to data set transmitted to the national database
"BLD",6213,1,36,0)
 
"BLD",6213,1,37,0)
- A new field called CLOSTRIDIUM DIFFICILE COLITIS (#447) is created:
"BLD",6213,1,38,0)
   o Added to the Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT] 
"BLD",6213,1,39,0)
     option
"BLD",6213,1,40,0)
   o Added to the PERIOPERATIVE OCCURRENCE CATEGORIES section of the 
"BLD",6213,1,41,0)
     Surgery Quarterly Report
"BLD",6213,1,42,0)
   o CLOSTRIDIUM DIFFICILE COLITIS is added as a new occurrence category 
"BLD",6213,1,43,0)
     to the PERIOPERATIVE OCCURRENCE CATEGORY file (#136.5)
"BLD",6213,1,44,0)
 
"BLD",6213,1,45,0)
- The description is updated and/or other data dictionary changes are made
"BLD",6213,1,46,0)
  for the following items:
"BLD",6213,1,47,0)
   o SURGERY SPECIALTY field (#.04)
"BLD",6213,1,48,0)
   o WOUND CLASSIFICATION field (#1.09)
"BLD",6213,1,49,0)
   o REASON FOR NO ASSESSMENT field (#102)
"BLD",6213,1,50,0)
   o HISTORY OF COPD field (#203)
"BLD",6213,1,51,0)
   o WEIGHT LOSS > 10% field (#215)
"BLD",6213,1,52,0)
   o BLEEDING DISORDERS field (#216)
"BLD",6213,1,53,0)
   o OPEN WOUND field (#218)
"BLD",6213,1,54,0)
   o PREOPERATIVE SEPSIS field (#218.1)
"BLD",6213,1,55,0)
   o PREVIOUS PCI field (#220)
"BLD",6213,1,56,0)
   o SYSTEMIC SEPSIS field (#250) and the SYSTEMIC SEPSIS occurrence 
"BLD",6213,1,57,0)
     category in the PERIOPERATIVE OCCURRENCE CATEGORY file (#136.5)
"BLD",6213,1,58,0)
   o PNEUMONIA field (#251) and the PNEUMONIA occurrence category in the 
"BLD",6213,1,59,0)
     PERIOPERATIVE OCCURRENCE CATEGORY file (#136.5)
"BLD",6213,1,60,0)
   o PULMONARY EMBOLISM field (#252) and the PULMONARY EMBOLISM occurrence
"BLD",6213,1,61,0)
     category in file (#136.5)
"BLD",6213,1,62,0)
   o ACUTE RENAL FAILURE field (#254) and the ACUTE RENAL FAILURE
"BLD",6213,1,63,0)
     occurrence category in file (#136.5)
"BLD",6213,1,64,0)
   o PREGNANCY field (#269)
"BLD",6213,1,65,0)
   o PERIPHERAL NERVE INJURY field (#287) and the PERIPHERAL NERVE INJURY 
"BLD",6213,1,66,0)
     occurrence category in the PERIOPERATIVE OCCURRENCE CATEGORY file 
"BLD",6213,1,67,0)
     (#136.5)
"BLD",6213,1,68,0)
   o DYSPNEA field (#325)
"BLD",6213,1,69,0)
   o CURRENT PNEUMONIA field (#326)
"BLD",6213,1,70,0)
   o REST PAIN/GANGRENE (Y/N) field (#330)
"BLD",6213,1,71,0)
   o CHEMOTHERAPY IN LAST 30 DAYS field (#338.1)
"BLD",6213,1,72,0)
   o QUADRIPLEGIA (Y/N) field (#398)
"BLD",6213,1,73,0)
   o TUMOR INVOLVING CNS (Y/N) field (#401)
"BLD",6213,1,74,0)
   o INTRAOP DISSEMINATED CANCER field (#443)
"BLD",6213,1,75,0)
   o DATE COMP NOTED field (#2, sub-file #130.22)
"BLD",6213,1,76,0)
   o SEPSIS CATEGORY field (#7, sub-file #130.22)
"BLD",6213,1,77,0)
 
"BLD",6213,1,78,0)
- Hemoglobin A1c is added to the set of preoperative lab test results.
"BLD",6213,1,79,0)
 
"BLD",6213,1,80,0)
- This patch modifies all Lab fields under the Laboratory Test Results
"BLD",6213,1,81,0)
  (Enter/Edit) [SROA LAB] option to assume a past date if the user enters
"BLD",6213,1,82,0)
  a date without a year.
"BLD",6213,1,83,0)
 
"BLD",6213,1,84,0)
- The DATE OF DEATH field (#342) is modified to allow the entry of time as
"BLD",6213,1,85,0)
  well as date and is added to the Patient Demographics (Enter/Edit) [SROA
"BLD",6213,1,86,0)
  DEMOGRAPHICS] option.
"BLD",6213,1,87,0)
 
"BLD",6213,1,88,0)
- Airway Trauma, Mallampati Scale and Airway Index are removed from the
"BLD",6213,1,89,0)
  set of information collected and transmitted to NSQIP.
"BLD",6213,1,90,0)
 
"BLD",6213,1,91,0)
- The letter produced by the Print 30 Day Follow-up Letters [SROA REPRINT 
"BLD",6213,1,92,0)
  LETTERS] option is modified to display the date of operation and the 
"BLD",6213,1,93,0)
  local surgical specialty.
"BLD",6213,1,94,0)
 
"BLD",6213,1,95,0)
- The Monthly Surgical Case Workload Report [SROA MONTHLY WORKLOAD REPORT]
"BLD",6213,1,96,0)
  option is modified to replace references to major/minor with eligible or
"BLD",6213,1,97,0)
  excluded.
"BLD",6213,1,98,0)
 
"BLD",6213,1,99,0)
  
"BLD",6213,1,100,0)
Cardiac Risk Assessment Modifications
"BLD",6213,1,101,0)
-------------------------------------
"BLD",6213,1,102,0)
- The software is modified to expand the answer options of the PREOP
"BLD",6213,1,103,0)
  CIRCULATORY DEVICE field (#474) to include "ARTIFICIAL HEART" and to 
"BLD",6213,1,104,0)
  transmit "A" to CICSP for new raw value of this answer option.
"BLD",6213,1,105,0)
 
"BLD",6213,1,106,0)
- This patch modifies all Lab fields under the Laboratory Test Results
"BLD",6213,1,107,0)
  (Enter/Edit) [SROA LAB-CARDIAC] option to assume a past date if the user
"BLD",6213,1,108,0)
  enters a date without a year.
"BLD",6213,1,109,0)
 
"BLD",6213,1,110,0)
- Reinstitute the default functionality of the CARDIAC SURG PERFORMED 
"BLD",6213,1,111,0)
  NON-VA field (#472) in the SURGERY file (#130), so that it defaults to
"BLD",6213,1,112,0)
  "NO". 
"BLD",6213,1,113,0)
 
"BLD",6213,1,114,0)
- The description is updated and/or other data dictionary changes are made
"BLD",6213,1,115,0)
  for the following items:
"BLD",6213,1,116,0)
   o CONGESTIVE HEART FAILURE field (#207)
"BLD",6213,1,117,0)
   o ON VENTILATOR >48 HOURS field (#285)
"BLD",6213,1,118,0)
   o PERIOPERATIVE MI field (#385)
"BLD",6213,1,119,0)
   o PREOP CIRCULATORY DEVICE field (#474)
"BLD",6213,1,120,0)
   o AORTIC STENOSIS field (#477)
"BLD",6213,1,121,0)
 
"BLD",6213,1,122,0)
- Data Quality Queries
"BLD",6213,1,123,0)
  The data entry that does not meet the criteria is permitted, but would 
"BLD",6213,1,124,0)
  cause a warning message to check the data for accuracy.
"BLD",6213,1,125,0)
   o The D/T PATIENT EXTUBATED field (#470) should be later than the TIME
"BLD",6213,1,126,0)
     PAT OUT OR field (#.232).
"BLD",6213,1,127,0)
   o The D/T PATIENT EXTUBATED field (#470) should be earlier than the D/T
"BLD",6213,1,128,0)
     PATIENT DISCH FROM ICU field (#471).
"BLD",6213,1,129,0)
   o The D/T PATIENT DISCH FROM ICU field (#471) should be later than the
"BLD",6213,1,130,0)
     D/T PATIENT EXTUBATED field (#470).
"BLD",6213,1,131,0)
   o D/T PATIENT DISCH FROM ICU field (#471) be equal to or earlier than
"BLD",6213,1,132,0)
     the HOSPITAL DISCHARGE DATE field (#419).
"BLD",6213,1,133,0)
   o The SURGICAL PRIORITY, DATE field (#414.1) should be earlier than
"BLD",6213,1,134,0)
     the TIME PAT IN OR field (#.205).
"BLD",6213,1,135,0)
   o The ESTIMATE OF MORTALITY, DATE field (#364.1) should be earlier than
"BLD",6213,1,136,0)
     the TIME PAT IN OR field (#.205).
"BLD",6213,1,137,0)
   o If TOTAL CPB TIME field (#451) > 0, the CONVERT FROM OFF PUMP TO CPB
"BLD",6213,1,138,0)
     field (#469) should not be answered "NO, began off/stayed off".
"BLD",6213,1,139,0)
 
"BLD",6213,1,140,0)
 
"BLD",6213,1,141,0)
General Surgery Items
"BLD",6213,1,142,0)
---------------------
"BLD",6213,1,143,0)
- Remedy Ticket #HD0000000152814
"BLD",6213,1,144,0)
  This patch addresses two issues related to the Update Assessment Status
"BLD",6213,1,145,0)
  to 'COMPLETE' [SROA COMPLETE ASSESSMENT] option missing items list:
"BLD",6213,1,146,0)
  (1) For the NUM OF PRIOR HEART SURGERIES field (#352) in the SURGERY
"BLD",6213,1,147,0)
      file (#130), the field is corrected to display "Number of Prior
"BLD",6213,1,148,0)
      Heart Surgeries" instead of "Prior Heart Surgery (Y/N)".
"BLD",6213,1,149,0)
  (2) For the field "PRIOR HEART SURGERIES" field (#485) in the SURGERY 
"BLD",6213,1,150,0)
      file (#130), the data input functionality is modified to use the
"BLD",6213,1,151,0)
      same controlled data input functionality used by the Clinical
"BLD",6213,1,152,0)
      Information (Enter/Edit) [SROA CLINICAL INFORMATION] option. 
"BLD",6213,1,153,0)
 
"BLD",6213,1,154,0)
- Remedy Ticket #HD0000000177807
"BLD",6213,1,155,0)
  After installing this patch, if procedure and diagnosis coding is not
"BLD",6213,1,156,0)
  complete at the time the Update Assessment Status to 'COMPLETE' [SROA
"BLD",6213,1,157,0)
  COMPLETE ASSESSMENT] option is run, the software will display "The
"BLD",6213,1,158,0)
  coding for Procedure and Diagnosis is not complete" immediately before
"BLD",6213,1,159,0)
  asking, "Are you sure you want to complete this assessment ?".
"BLD",6213,1,160,0)
 
"BLD",6213,1,161,0)
- Remedy Ticket #HD0000000185045
"BLD",6213,1,162,0)
  When using the Outcome Information (Enter/Edit) [SROA CARDIAC-OUTCOMES] 
"BLD",6213,1,163,0)
  option to edit the OPERATIVE DEATH field (#384), entering YES or NO 
"BLD",6213,1,164,0)
  causes the NEW MECHANICAL CIRCULATORY field (#467) to be changed to the 
"BLD",6213,1,165,0)
  same value. Editing the NEW MECHANICAL CIRCULATORY field (#467) field 
"BLD",6213,1,166,0)
  does not change the OPERATIVE DEATH field (#384).
"BLD",6213,1,167,0)
 
"BLD",6213,1,168,0)
- Short LOCK Timeouts
"BLD",6213,1,169,0)
  This patch updates the 1 second LOCK timeouts in the routine SROUTL to 
"BLD",6213,1,170,0)
  use the VA FileMan variable DILOCKTM if it exists.
"BLD",6213,4,0)
^9.64PA^136.5^3
"BLD",6213,4,130,0)
130
"BLD",6213,4,130,2,0)
^9.641^130.22^2
"BLD",6213,4,130,2,130,0)
SURGERY  (File-top level)
"BLD",6213,4,130,2,130,1,0)
^9.6411^325^70
"BLD",6213,4,130,2,130,1,.04,0)
SURGERY SPECIALTY
"BLD",6213,4,130,2,130,1,1.09,0)
WOUND CLASSIFICATION
"BLD",6213,4,130,2,130,1,102,0)
REASON FOR NO ASSESSMENT
"BLD",6213,4,130,2,130,1,202,0)
CURRENT SMOKER
"BLD",6213,4,130,2,130,1,203,0)
HISTORY OF COPD
"BLD",6213,4,130,2,130,1,207,0)
CONGESTIVE HEART FAILURE
"BLD",6213,4,130,2,130,1,215,0)
WEIGHT LOSS > 10%
"BLD",6213,4,130,2,130,1,216,0)
BLEEDING DISORDERS
"BLD",6213,4,130,2,130,1,218,0)
OPEN WOUND
"BLD",6213,4,130,2,130,1,218.1,0)
PREOPERATIVE SEPSIS
"BLD",6213,4,130,2,130,1,220,0)
PREVIOUS PCI
"BLD",6213,4,130,2,130,1,239,0)
PREOPERATIVE HEMOGLOBIN, DATE
"BLD",6213,4,130,2,130,1,250,0)
SYSTEMIC SEPSIS
"BLD",6213,4,130,2,130,1,251,0)
PNEUMONIA
"BLD",6213,4,130,2,130,1,252,0)
PULMONARY EMBOLISM
"BLD",6213,4,130,2,130,1,254,0)
ACUTE RENAL FAILURE
"BLD",6213,4,130,2,130,1,269,0)
PREGNANCY
"BLD",6213,4,130,2,130,1,285,0)
ON VENTILATOR >48 HOURS
"BLD",6213,4,130,2,130,1,287,0)
PERIPHERAL NERVE INJURY
"BLD",6213,4,130,2,130,1,290,0)
PREOP SERUM CREATININE, DATE
"BLD",6213,4,130,2,130,1,291,0)
PREOPERATIVE BUN, DATE
"BLD",6213,4,130,2,130,1,292,0)
PREOP SERUM ALBUMIN, DATE
"BLD",6213,4,130,2,130,1,294,0)
SGOT, DATE PERFORMED
"BLD",6213,4,130,2,130,1,295,0)
PREOP TOTAL BILIRUBIN, DATE
"BLD",6213,4,130,2,130,1,296,0)
PREOP ALK PHOSPHATASE, DATE
"BLD",6213,4,130,2,130,1,297,0)
PREOPERATIVE WBC, DATE
"BLD",6213,4,130,2,130,1,298,0)
PREOP PLATELET COUNT, DATE
"BLD",6213,4,130,2,130,1,299,0)
PREOPERATIVE PT, DATE
"BLD",6213,4,130,2,130,1,300,0)
PREOPERATIVE PTT, DATE
"BLD",6213,4,130,2,130,1,301,0)
PREOP HEMATOCRIT, DATE
"BLD",6213,4,130,2,130,1,304,0)
PREOP SERUM SODIUM, DATE
"BLD",6213,4,130,2,130,1,305,0)
HIGH SERUM SODIUM, DATE
"BLD",6213,4,130,2,130,1,306,0)
HIGH POTASSIUM, DATE
"BLD",6213,4,130,2,130,1,308,0)
HIGH SERUM CREATININE, DATE
"BLD",6213,4,130,2,130,1,309,0)
HIGH CPK, DATE
"BLD",6213,4,130,2,130,1,310,0)
HIGH CPK-MB, DATE
"BLD",6213,4,130,2,130,1,311,0)
HIGH TOTAL BILIRUBIN, DATE
"BLD",6213,4,130,2,130,1,312,0)
HIGHEST WBC, DATE
"BLD",6213,4,130,2,130,1,314,0)
LOW HEMATOCRIT, DATE
"BLD",6213,4,130,2,130,1,325,0)
DYSPNEA
"BLD",6213,4,130,2,130,1,326,0)
CURRENT PNEUMONIA
"BLD",6213,4,130,2,130,1,330,0)
REST PAIN/GANGRENE (Y/N)
"BLD",6213,4,130,2,130,1,338.1,0)
CHEMOTHERAPY IN LAST 30 DAYS
"BLD",6213,4,130,2,130,1,342,0)
DATE OF DEATH
"BLD",6213,4,130,2,130,1,364,0)
ESTIMATE OF MORTALITY
"BLD",6213,4,130,2,130,1,385,0)
PERIOPERATIVE MI
"BLD",6213,4,130,2,130,1,398,0)
QUADRIPLEGIA (Y/N)
"BLD",6213,4,130,2,130,1,401,0)
TUMOR INVOLVING CNS (Y/N)
"BLD",6213,4,130,2,130,1,407,0)
LOW SODIUM, DATE
"BLD",6213,4,130,2,130,1,408,0)
LOW POTASSIUM, DATE
"BLD",6213,4,130,2,130,1,414,0)
CARDIAC SURGICAL PRIORITY
"BLD",6213,4,130,2,130,1,443,0)
INTRAOP DISSEMINATED CANCER
"BLD",6213,4,130,2,130,1,444.1,0)
PREOP ANION GAP, DATE
"BLD",6213,4,130,2,130,1,445.1,0)
HIGH ANION GAP, DATE
"BLD",6213,4,130,2,130,1,446,0)
INTRAOPERATIVE ASCITES
"BLD",6213,4,130,2,130,1,447,0)
CLOSTRIDIUM DIFFICILE COLITIS
"BLD",6213,4,130,2,130,1,455.1,0)
HIGH SERUM TROPONIN I, DATE
"BLD",6213,4,130,2,130,1,456.1,0)
HIGH SERUM TROPONIN T, DATE
"BLD",6213,4,130,2,130,1,457.1,0)
HDL, DATE
"BLD",6213,4,130,2,130,1,458.1,0)
SERUM TRIGLYCERIDE, DATE (CAR)
"BLD",6213,4,130,2,130,1,459.1,0)
SERUM POTASSIUM, DATE(CARDIAC)
"BLD",6213,4,130,2,130,1,460.1,0)
SERUM BILIRUBIN, DATE (CARD)
"BLD",6213,4,130,2,130,1,461.1,0)
LDL, DATE (CARDIAC)
"BLD",6213,4,130,2,130,1,462.1,0)
TOTAL CHOLESTEROL, DATE
"BLD",6213,4,130,2,130,1,469,0)
CONVERT FROM OFF PUMP TO CPB
"BLD",6213,4,130,2,130,1,474,0)
PREOP CIRCULATORY DEVICE
"BLD",6213,4,130,2,130,1,477,0)
AORTIC STENOSIS
"BLD",6213,4,130,2,130,1,487.1,0)
PREOPERATIVE INR, DATE
"BLD",6213,4,130,2,130,1,504,0)
HEMOGLOBIN A1C
"BLD",6213,4,130,2,130,1,504.1,0)
HEMOGLOBIN A1C, DATE
"BLD",6213,4,130,2,130.22,0)
POSTOP OCCURRENCE  (sub-file)
"BLD",6213,4,130,2,130.22,1,0)
^9.6411^7^2
"BLD",6213,4,130,2,130.22,1,2,0)
DATE COMP NOTED
"BLD",6213,4,130,2,130.22,1,7,0)
SEPSIS CATEGORY
"BLD",6213,4,130,222)
y^y^p^^^^n^^n
"BLD",6213,4,130,224)

"BLD",6213,4,136.5,0)
136.5
"BLD",6213,4,136.5,222)
y^y^f^^n^^y^o^n
"BLD",6213,4,137,0)
137
"BLD",6213,4,137,222)
y^y^f^^^^n
"BLD",6213,4,"APDD",130,130)

"BLD",6213,4,"APDD",130,130,.04)

"BLD",6213,4,"APDD",130,130,1.09)

"BLD",6213,4,"APDD",130,130,102)

"BLD",6213,4,"APDD",130,130,202)

"BLD",6213,4,"APDD",130,130,203)

"BLD",6213,4,"APDD",130,130,207)

"BLD",6213,4,"APDD",130,130,215)

"BLD",6213,4,"APDD",130,130,216)

"BLD",6213,4,"APDD",130,130,218)

"BLD",6213,4,"APDD",130,130,218.1)

"BLD",6213,4,"APDD",130,130,220)

"BLD",6213,4,"APDD",130,130,239)

"BLD",6213,4,"APDD",130,130,250)

"BLD",6213,4,"APDD",130,130,251)

"BLD",6213,4,"APDD",130,130,252)

"BLD",6213,4,"APDD",130,130,254)

"BLD",6213,4,"APDD",130,130,269)

"BLD",6213,4,"APDD",130,130,285)

"BLD",6213,4,"APDD",130,130,287)

"BLD",6213,4,"APDD",130,130,290)

"BLD",6213,4,"APDD",130,130,291)

"BLD",6213,4,"APDD",130,130,292)

"BLD",6213,4,"APDD",130,130,294)

"BLD",6213,4,"APDD",130,130,295)

"BLD",6213,4,"APDD",130,130,296)

"BLD",6213,4,"APDD",130,130,297)

"BLD",6213,4,"APDD",130,130,298)

"BLD",6213,4,"APDD",130,130,299)

"BLD",6213,4,"APDD",130,130,300)

"BLD",6213,4,"APDD",130,130,301)

"BLD",6213,4,"APDD",130,130,304)

"BLD",6213,4,"APDD",130,130,305)

"BLD",6213,4,"APDD",130,130,306)

"BLD",6213,4,"APDD",130,130,308)

"BLD",6213,4,"APDD",130,130,309)

"BLD",6213,4,"APDD",130,130,310)

"BLD",6213,4,"APDD",130,130,311)

"BLD",6213,4,"APDD",130,130,312)

"BLD",6213,4,"APDD",130,130,314)

"BLD",6213,4,"APDD",130,130,325)

"BLD",6213,4,"APDD",130,130,326)

"BLD",6213,4,"APDD",130,130,330)

"BLD",6213,4,"APDD",130,130,338.1)

"BLD",6213,4,"APDD",130,130,342)

"BLD",6213,4,"APDD",130,130,364)

"BLD",6213,4,"APDD",130,130,385)

"BLD",6213,4,"APDD",130,130,398)

"BLD",6213,4,"APDD",130,130,401)

"BLD",6213,4,"APDD",130,130,407)

"BLD",6213,4,"APDD",130,130,408)

"BLD",6213,4,"APDD",130,130,414)

"BLD",6213,4,"APDD",130,130,443)

"BLD",6213,4,"APDD",130,130,444.1)

"BLD",6213,4,"APDD",130,130,445.1)

"BLD",6213,4,"APDD",130,130,446)

"BLD",6213,4,"APDD",130,130,447)

"BLD",6213,4,"APDD",130,130,455.1)

"BLD",6213,4,"APDD",130,130,456.1)

"BLD",6213,4,"APDD",130,130,457.1)

"BLD",6213,4,"APDD",130,130,458.1)

"BLD",6213,4,"APDD",130,130,459.1)

"BLD",6213,4,"APDD",130,130,460.1)

"BLD",6213,4,"APDD",130,130,461.1)

"BLD",6213,4,"APDD",130,130,462.1)

"BLD",6213,4,"APDD",130,130,469)

"BLD",6213,4,"APDD",130,130,474)

"BLD",6213,4,"APDD",130,130,477)

"BLD",6213,4,"APDD",130,130,487.1)

"BLD",6213,4,"APDD",130,130,504)

"BLD",6213,4,"APDD",130,130,504.1)

"BLD",6213,4,"APDD",130,130.22)

"BLD",6213,4,"APDD",130,130.22,2)

"BLD",6213,4,"APDD",130,130.22,7)

"BLD",6213,4,"B",130,130)

"BLD",6213,4,"B",136.5,136.5)

"BLD",6213,4,"B",137,137)

"BLD",6213,6.3)
7
"BLD",6213,"INI")
SR160UT2
"BLD",6213,"INID")
^n^y
"BLD",6213,"INIT")
POST^SR160UTL
"BLD",6213,"KRN",0)
^9.67PA^8989.52^19
"BLD",6213,"KRN",.4,0)
.4
"BLD",6213,"KRN",.401,0)
.401
"BLD",6213,"KRN",.402,0)
.402
"BLD",6213,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",6213,"KRN",.402,"NM",1,0)
SRO-NOCOMP    FILE #130^130^0
"BLD",6213,"KRN",.402,"NM","B","SRO-NOCOMP    FILE #130",1)

"BLD",6213,"KRN",.403,0)
.403
"BLD",6213,"KRN",.5,0)
.5
"BLD",6213,"KRN",.84,0)
.84
"BLD",6213,"KRN",3.6,0)
3.6
"BLD",6213,"KRN",3.8,0)
3.8
"BLD",6213,"KRN",9.2,0)
9.2
"BLD",6213,"KRN",9.8,0)
9.8
"BLD",6213,"KRN",9.8,"NM",0)
^9.68A^77^74
"BLD",6213,"KRN",9.8,"NM",1,0)
SROACL1^^0^B27042913
"BLD",6213,"KRN",9.8,"NM",2,0)
SROACL2^^0^B3904594
"BLD",6213,"KRN",9.8,"NM",3,0)
SROACOM^^0^B21181819
"BLD",6213,"KRN",9.8,"NM",4,0)
SROACOP^^0^B23673971
"BLD",6213,"KRN",9.8,"NM",5,0)
SROACPM^^0^B45882187
"BLD",6213,"KRN",9.8,"NM",6,0)
SROACR2^^0^B15772524
"BLD",6213,"KRN",9.8,"NM",7,0)
SROAL1^^0^B23289544
"BLD",6213,"KRN",9.8,"NM",8,0)
SROAL11^^0^B19052112
"BLD",6213,"KRN",9.8,"NM",9,0)
SROALDP^^0^B3567455
"BLD",6213,"KRN",9.8,"NM",10,0)
SROALEN^^0^B11769493
"BLD",6213,"KRN",9.8,"NM",11,0)
SROALN1^^0^B9118535
"BLD",6213,"KRN",9.8,"NM",12,0)
SROAPCA^^0^B25536856
"BLD",6213,"KRN",9.8,"NM",13,0)
SROAPRT4^^0^B6368116
"BLD",6213,"KRN",9.8,"NM",15,0)
SROALCP^^0^B10185864
"BLD",6213,"KRN",9.8,"NM",16,0)
SROALCS^^0^B14078478
"BLD",6213,"KRN",9.8,"NM",17,0)
SROALCSP^^0^B12320846
"BLD",6213,"KRN",9.8,"NM",18,0)
SROALL^^0^B13177619
"BLD",6213,"KRN",9.8,"NM",19,0)
SROALLP^^0^B12738077
"BLD",6213,"KRN",9.8,"NM",20,0)
SROALLS^^0^B19259517
"BLD",6213,"KRN",9.8,"NM",21,0)
SROALLSP^^0^B20260764
"BLD",6213,"KRN",9.8,"NM",22,0)
SROALM^^0^B22043209
"BLD",6213,"KRN",9.8,"NM",23,0)
SROALMN^^0^B24672211
"BLD",6213,"KRN",9.8,"NM",24,0)
SROALOG^^0^B18199636
"BLD",6213,"KRN",9.8,"NM",25,0)
SROALSS^^0^B17361953
"BLD",6213,"KRN",9.8,"NM",26,0)
SROALSSP^^0^B17160064
"BLD",6213,"KRN",9.8,"NM",27,0)
SROALST^^0^B13725112
"BLD",6213,"KRN",9.8,"NM",28,0)
SROALSTP^^0^B12194763
"BLD",6213,"KRN",9.8,"NM",29,0)
SROALT^^0^B10668793
"BLD",6213,"KRN",9.8,"NM",30,0)
SROALTP^^0^B10029019
"BLD",6213,"KRN",9.8,"NM",31,0)
SROALTS^^0^B12998435
"BLD",6213,"KRN",9.8,"NM",32,0)
SROALTSP^^0^B12106234
"BLD",6213,"KRN",9.8,"NM",33,0)
SROANEW^^0^B18923715
"BLD",6213,"KRN",9.8,"NM",34,0)
SROANT^^0^B10975780
"BLD",6213,"KRN",9.8,"NM",35,0)
SROANTP^^0^B11181920
"BLD",6213,"KRN",9.8,"NM",36,0)
SROANTS^^0^B12602082
"BLD",6213,"KRN",9.8,"NM",37,0)
SROANTSP^^0^B12449043
"BLD",6213,"KRN",9.8,"NM",39,0)
SROAPIMS^^0^B26229539
"BLD",6213,"KRN",9.8,"NM",40,0)
SROAPM^^0^B42791462
"BLD",6213,"KRN",9.8,"NM",41,0)
SROAPRT3^^0^B11865696
"BLD",6213,"KRN",9.8,"NM",42,0)
SROAPS2^^0^B18374164
"BLD",6213,"KRN",9.8,"NM",43,0)
SROASS^^0^B19053232
"BLD",6213,"KRN",9.8,"NM",44,0)
SR160UT0^^0^B38748414
"BLD",6213,"KRN",9.8,"NM",45,0)
SROALEC^^0^B22392220
"BLD",6213,"KRN",9.8,"NM",46,0)
SROAX^^0^B1410911
"BLD",6213,"KRN",9.8,"NM",47,0)
SROALC^^0^B10775491
"BLD",6213,"KRN",9.8,"NM",48,0)
SROATM2^^0^B33815043
"BLD",6213,"KRN",9.8,"NM",49,0)
SROAPRT7^^0^B29848560
"BLD",6213,"KRN",9.8,"NM",50,0)
SROALET^^0^B23195100
"BLD",6213,"KRN",9.8,"NM",51,0)
SROATM1^^0^B24222970
"BLD",6213,"KRN",9.8,"NM",52,0)
SROATMNO^^0^B27561878
"BLD",6213,"KRN",9.8,"NM",54,0)
SROCCAT^^0^B16630754
"BLD",6213,"KRN",9.8,"NM",55,0)
SROAOP^^0^B17150014
"BLD",6213,"KRN",9.8,"NM",56,0)
SROAOP1^^0^B11582758
"BLD",6213,"KRN",9.8,"NM",57,0)
SROAPRT6^^0^B5989513
"BLD",6213,"KRN",9.8,"NM",58,0)
SROAUTL^^0^B41379689
"BLD",6213,"KRN",9.8,"NM",59,0)
SROAUTL0^^0^B18207174
"BLD",6213,"KRN",9.8,"NM",60,0)
SROAUTL1^^0^B18991431
"BLD",6213,"KRN",9.8,"NM",61,0)
SROAUTL2^^0^B34551023
"BLD",6213,"KRN",9.8,"NM",62,0)
SROAUTL4^^0^B39875466
"BLD",6213,"KRN",9.8,"NM",63,0)
SROAWL^^0^B32382594
"BLD",6213,"KRN",9.8,"NM",64,0)
SROAWL1^^0^B33694001
"BLD",6213,"KRN",9.8,"NM",65,0)
SROUTL^^0^B43018873
"BLD",6213,"KRN",9.8,"NM",66,0)
SRO1L1^^0^B14121011
"BLD",6213,"KRN",9.8,"NM",67,0)
SROAEX^^0^B13404461
"BLD",6213,"KRN",9.8,"NM",68,0)
SROAL2^^0^B19510513
"BLD",6213,"KRN",9.8,"NM",69,0)
SROCL1^^0^B11126286
"BLD",6213,"KRN",9.8,"NM",70,0)
SROAPRT2^^0^B11956199
"BLD",6213,"KRN",9.8,"NM",71,0)
SROQ1A^^0^B31349144
"BLD",6213,"KRN",9.8,"NM",72,0)
SROQ2^^0^B33278847
"BLD",6213,"KRN",9.8,"NM",73,0)
SROQM1^^0^B26419975
"BLD",6213,"KRN",9.8,"NM",74,0)
SROQT^^0^B35157473
"BLD",6213,"KRN",9.8,"NM",75,0)
SROAOUT^^0^B12427233
"BLD",6213,"KRN",9.8,"NM",76,0)
SROAPCA3^^0^B20458741
"BLD",6213,"KRN",9.8,"NM",77,0)
SROATCM1^^0^B51948425
"BLD",6213,"KRN",9.8,"NM","B","SR160UT0",44)

"BLD",6213,"KRN",9.8,"NM","B","SRO1L1",66)

"BLD",6213,"KRN",9.8,"NM","B","SROACL1",1)

"BLD",6213,"KRN",9.8,"NM","B","SROACL2",2)

"BLD",6213,"KRN",9.8,"NM","B","SROACOM",3)

"BLD",6213,"KRN",9.8,"NM","B","SROACOP",4)

"BLD",6213,"KRN",9.8,"NM","B","SROACPM",5)

"BLD",6213,"KRN",9.8,"NM","B","SROACR2",6)

"BLD",6213,"KRN",9.8,"NM","B","SROAEX",67)

"BLD",6213,"KRN",9.8,"NM","B","SROAL1",7)

"BLD",6213,"KRN",9.8,"NM","B","SROAL11",8)

"BLD",6213,"KRN",9.8,"NM","B","SROAL2",68)

"BLD",6213,"KRN",9.8,"NM","B","SROALC",47)

"BLD",6213,"KRN",9.8,"NM","B","SROALCP",15)

"BLD",6213,"KRN",9.8,"NM","B","SROALCS",16)

"BLD",6213,"KRN",9.8,"NM","B","SROALCSP",17)

"BLD",6213,"KRN",9.8,"NM","B","SROALDP",9)

"BLD",6213,"KRN",9.8,"NM","B","SROALEC",45)

"BLD",6213,"KRN",9.8,"NM","B","SROALEN",10)

"BLD",6213,"KRN",9.8,"NM","B","SROALET",50)

"BLD",6213,"KRN",9.8,"NM","B","SROALL",18)

"BLD",6213,"KRN",9.8,"NM","B","SROALLP",19)

"BLD",6213,"KRN",9.8,"NM","B","SROALLS",20)

"BLD",6213,"KRN",9.8,"NM","B","SROALLSP",21)

"BLD",6213,"KRN",9.8,"NM","B","SROALM",22)

"BLD",6213,"KRN",9.8,"NM","B","SROALMN",23)

"BLD",6213,"KRN",9.8,"NM","B","SROALN1",11)

"BLD",6213,"KRN",9.8,"NM","B","SROALOG",24)

"BLD",6213,"KRN",9.8,"NM","B","SROALSS",25)

"BLD",6213,"KRN",9.8,"NM","B","SROALSSP",26)

"BLD",6213,"KRN",9.8,"NM","B","SROALST",27)

"BLD",6213,"KRN",9.8,"NM","B","SROALSTP",28)

"BLD",6213,"KRN",9.8,"NM","B","SROALT",29)

"BLD",6213,"KRN",9.8,"NM","B","SROALTP",30)

"BLD",6213,"KRN",9.8,"NM","B","SROALTS",31)

"BLD",6213,"KRN",9.8,"NM","B","SROALTSP",32)

"BLD",6213,"KRN",9.8,"NM","B","SROANEW",33)

"BLD",6213,"KRN",9.8,"NM","B","SROANT",34)

"BLD",6213,"KRN",9.8,"NM","B","SROANTP",35)

"BLD",6213,"KRN",9.8,"NM","B","SROANTS",36)

"BLD",6213,"KRN",9.8,"NM","B","SROANTSP",37)

"BLD",6213,"KRN",9.8,"NM","B","SROAOP",55)

"BLD",6213,"KRN",9.8,"NM","B","SROAOP1",56)

"BLD",6213,"KRN",9.8,"NM","B","SROAOUT",75)

"BLD",6213,"KRN",9.8,"NM","B","SROAPCA",12)

"BLD",6213,"KRN",9.8,"NM","B","SROAPCA3",76)

"BLD",6213,"KRN",9.8,"NM","B","SROAPIMS",39)

"BLD",6213,"KRN",9.8,"NM","B","SROAPM",40)

"BLD",6213,"KRN",9.8,"NM","B","SROAPRT2",70)

"BLD",6213,"KRN",9.8,"NM","B","SROAPRT3",41)

"BLD",6213,"KRN",9.8,"NM","B","SROAPRT4",13)

"BLD",6213,"KRN",9.8,"NM","B","SROAPRT6",57)

"BLD",6213,"KRN",9.8,"NM","B","SROAPRT7",49)

"BLD",6213,"KRN",9.8,"NM","B","SROAPS2",42)

"BLD",6213,"KRN",9.8,"NM","B","SROASS",43)

"BLD",6213,"KRN",9.8,"NM","B","SROATCM1",77)

"BLD",6213,"KRN",9.8,"NM","B","SROATM1",51)

"BLD",6213,"KRN",9.8,"NM","B","SROATM2",48)

"BLD",6213,"KRN",9.8,"NM","B","SROATMNO",52)

"BLD",6213,"KRN",9.8,"NM","B","SROAUTL",58)

"BLD",6213,"KRN",9.8,"NM","B","SROAUTL0",59)

"BLD",6213,"KRN",9.8,"NM","B","SROAUTL1",60)

"BLD",6213,"KRN",9.8,"NM","B","SROAUTL2",61)

"BLD",6213,"KRN",9.8,"NM","B","SROAUTL4",62)

"BLD",6213,"KRN",9.8,"NM","B","SROAWL",63)

"BLD",6213,"KRN",9.8,"NM","B","SROAWL1",64)

"BLD",6213,"KRN",9.8,"NM","B","SROAX",46)

"BLD",6213,"KRN",9.8,"NM","B","SROCCAT",54)

"BLD",6213,"KRN",9.8,"NM","B","SROCL1",69)

"BLD",6213,"KRN",9.8,"NM","B","SROQ1A",71)

"BLD",6213,"KRN",9.8,"NM","B","SROQ2",72)

"BLD",6213,"KRN",9.8,"NM","B","SROQM1",73)

"BLD",6213,"KRN",9.8,"NM","B","SROQT",74)

"BLD",6213,"KRN",9.8,"NM","B","SROUTL",65)

"BLD",6213,"KRN",19,0)
19
"BLD",6213,"KRN",19,"NM",0)
^9.68A^^
"BLD",6213,"KRN",19.1,0)
19.1
"BLD",6213,"KRN",101,0)
101
"BLD",6213,"KRN",409.61,0)
409.61
"BLD",6213,"KRN",771,0)
771
"BLD",6213,"KRN",870,0)
870
"BLD",6213,"KRN",8989.51,0)
8989.51
"BLD",6213,"KRN",8989.52,0)
8989.52
"BLD",6213,"KRN",8994,0)
8994
"BLD",6213,"KRN","B",.4,.4)

"BLD",6213,"KRN","B",.401,.401)

"BLD",6213,"KRN","B",.402,.402)

"BLD",6213,"KRN","B",.403,.403)

"BLD",6213,"KRN","B",.5,.5)

"BLD",6213,"KRN","B",.84,.84)

"BLD",6213,"KRN","B",3.6,3.6)

"BLD",6213,"KRN","B",3.8,3.8)

"BLD",6213,"KRN","B",9.2,9.2)

"BLD",6213,"KRN","B",9.8,9.8)

"BLD",6213,"KRN","B",19,19)

"BLD",6213,"KRN","B",19.1,19.1)

"BLD",6213,"KRN","B",101,101)

"BLD",6213,"KRN","B",409.61,409.61)

"BLD",6213,"KRN","B",771,771)

"BLD",6213,"KRN","B",870,870)

"BLD",6213,"KRN","B",8989.51,8989.51)

"BLD",6213,"KRN","B",8989.52,8989.52)

"BLD",6213,"KRN","B",8994,8994)

"BLD",6213,"QUES",0)
^9.62^^
"BLD",6213,"REQB",0)
^9.611^3^2
"BLD",6213,"REQB",2,0)
SR*3.0*156^2
"BLD",6213,"REQB",3,0)
SR*3.0*153^2
"BLD",6213,"REQB","B","SR*3.0*153",3)

"BLD",6213,"REQB","B","SR*3.0*156",2)

"DATA",136.5,1,0)
SUPERFICIAL INCISIONAL SSI
"DATA",136.5,1,1,0)
^^22^22^3040318^
"DATA",136.5,1,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,1,1,2,0)
Superficial incisional SSI is an infection that occurs within 30 days 
"DATA",136.5,1,1,3,0)
after the operation and infection involves only skin or subcutaneous 
"DATA",136.5,1,1,4,0)
tissue of the incision and at least one of the following:
"DATA",136.5,1,1,5,0)
 
"DATA",136.5,1,1,6,0)
 - Purulent drainage, with or without laboratory confirmation, from the
"DATA",136.5,1,1,7,0)
   superficial incision.
"DATA",136.5,1,1,8,0)
 - Organisms isolated from an aseptically obtained culture of fluid or
"DATA",136.5,1,1,9,0)
   tissue from the superficial incision. 
"DATA",136.5,1,1,10,0)
 - At least one of the following signs or symptoms of infection: pain
"DATA",136.5,1,1,11,0)
   or tenderness, localized swelling, redness, or heat and superficial
"DATA",136.5,1,1,12,0)
   incision is deliberately opened by the surgeon, unless incision is
"DATA",136.5,1,1,13,0)
   culture-negative.  
"DATA",136.5,1,1,14,0)
 - Diagnosis of superficial incisional SSI by the surgeon or attending
"DATA",136.5,1,1,15,0)
   physician.  
"DATA",136.5,1,1,16,0)
 
"DATA",136.5,1,1,17,0)
Do not report the following conditions as SSI:
"DATA",136.5,1,1,18,0)
 - Stitch abscess (minimal inflammation and discharge confined to the
"DATA",136.5,1,1,19,0)
   points of suture penetration).
"DATA",136.5,1,1,20,0)
 - Infected burn wound.
"DATA",136.5,1,1,21,0)
 - Incisional SSI that extends into the fascial and muscle layers (see
"DATA",136.5,1,1,22,0)
   deep incisional SSI).
"DATA",136.5,2,0)
DEEP INCISIONAL SSI
"DATA",136.5,2,1,0)
^^23^23^3040318^
"DATA",136.5,2,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,2,1,2,0)
Deep Incision SSI is an infection that occurs within 30 days after the 
"DATA",136.5,2,1,3,0)
operation and the infection appears to be related to the operation and 
"DATA",136.5,2,1,4,0)
infection involved deep soft tissues (e.g., fascial and muscle layers) 
"DATA",136.5,2,1,5,0)
of the incision and at least one of the following: 
"DATA",136.5,2,1,6,0)
 
"DATA",136.5,2,1,7,0)
 - Purulent drainage from the deep incision but not from the 
"DATA",136.5,2,1,8,0)
   organ/space component of the surgical site.
"DATA",136.5,2,1,9,0)
 - A deep incision spontaneously dehisces or is deliberately opened by
"DATA",136.5,2,1,10,0)
   a surgeon when the patient has at least one of the following signs
"DATA",136.5,2,1,11,0)
   or symptoms: fever (>38 C), localized pain, or tenderness, unless
"DATA",136.5,2,1,12,0)
   site is culture-negative.
"DATA",136.5,2,1,13,0)
 - An abscess or other evidence of infection involving the deep 
"DATA",136.5,2,1,14,0)
   incision is found on direct examination, during reoperation, or by 
"DATA",136.5,2,1,15,0)
   histopathologic or radiologic examination.
"DATA",136.5,2,1,16,0)
 - Diagnosis of a deep incision SSI by a surgeon or attending 
"DATA",136.5,2,1,17,0)
   physician. 
"DATA",136.5,2,1,18,0)
 
"DATA",136.5,2,1,19,0)
Note:  
"DATA",136.5,2,1,20,0)
 - Report infection that involves both superficial and deep incision
"DATA",136.5,2,1,21,0)
   sites as deep incisional SSI.
"DATA",136.5,2,1,22,0)
 - Report an organ/space SSI that drains through the incision as a deep
"DATA",136.5,2,1,23,0)
   incisional SSI.
"DATA",136.5,3,0)
SYSTEMIC SEPSIS
"DATA",136.5,3,1,0)
^^65^65^3070221^
"DATA",136.5,3,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,3,1,2,0)
Sepsis is a vast clinical entity that takes a variety of forms. The 
"DATA",136.5,3,1,3,0)
spectrum of disorders spans from relatively mild physiologic 
"DATA",136.5,3,1,4,0)
abnormalities to septic shock. Please report the most significant level
"DATA",136.5,3,1,5,0)
using the criteria below:
"DATA",136.5,3,1,6,0)
 
"DATA",136.5,3,1,7,0)
1. Sepsis: Sepsis is the systemic response to infection. Report this 
"DATA",136.5,3,1,8,0)
variable if the patient has clinical signs and symptoms of SIRS. SIRS 
"DATA",136.5,3,1,9,0)
is a widespread inflammatory response to a variety of severe clinical
"DATA",136.5,3,1,10,0)
insults. This syndrome is clinically recognized by the presence of two 
"DATA",136.5,3,1,11,0)
or more of the following:
"DATA",136.5,3,1,12,0)
   - Temp >38 degrees C or <36 degrees C
"DATA",136.5,3,1,13,0)
   - HR >90 bpm
"DATA",136.5,3,1,14,0)
   - RR >20 breaths/min or PaCO2 <32 mmHg(<4.3 kPa)
"DATA",136.5,3,1,15,0)
   - WBC >12,000 cell/mm3, <4000 cells/mm3, or >10% immature (band) 
"DATA",136.5,3,1,16,0)
     forms
"DATA",136.5,3,1,17,0)
   - Anion gap acidosis: this is defined by either:
"DATA",136.5,3,1,18,0)
      [Na + K] - [Cl + HCO3 (or serum CO2)]. If this number is 
"DATA",136.5,3,1,19,0)
      greater than 16, then an anion gap acidosis is present.
"DATA",136.5,3,1,20,0)
     or
"DATA",136.5,3,1,21,0)
      Na - [Cl + HCO3 (or serum CO2)]. If this number is greater
"DATA",136.5,3,1,22,0)
      than 12, then an anion gap acidosis is present.
"DATA",136.5,3,1,23,0)
 
"DATA",136.5,3,1,24,0)
 and one of the following:
"DATA",136.5,3,1,25,0)
   - positive blood culture
"DATA",136.5,3,1,26,0)
   - clinical documentation of purulence or positive culture from any 
"DATA",136.5,3,1,27,0)
     site thought to be causative
"DATA",136.5,3,1,28,0)
 
"DATA",136.5,3,1,29,0)
2. Severe Sepsis/Septic Shock: Sepsis is considered severe when it is 
"DATA",136.5,3,1,30,0)
associated with organ and/or circulatory dysfunction. Report this 
"DATA",136.5,3,1,31,0)
variable if the patient has the clinical signs and symptoms of SIRS or 
"DATA",136.5,3,1,32,0)
sepsis AND documented organ and/or circulatory dysfunction. Examples of
"DATA",136.5,3,1,33,0)
organ dysfunction include: oliguria, acute alteration in mental status,
"DATA",136.5,3,1,34,0)
acute respiratory distress. Examples of circulatory dysfunction 
"DATA",136.5,3,1,35,0)
include: hypotension, requirement of inotropic or vasopressor agents.
"DATA",136.5,3,1,36,0)
 
"DATA",136.5,3,1,37,0)
* For the patient that had sepsis preoperatively, worsening of any of 
"DATA",136.5,3,1,38,0)
the above signs postoperatively would be reported as a postoperative 
"DATA",136.5,3,1,39,0)
sepsis.
"DATA",136.5,3,1,40,0)
 
"DATA",136.5,3,1,41,0)
Examples:
"DATA",136.5,3,1,42,0)
 
"DATA",136.5,3,1,43,0)
A patient comes into the emergency room with signs of sepsis - WBC 31, 
"DATA",136.5,3,1,44,0)
Temperature 104. CT shows an abdominal abscess. He is given antibiotics
"DATA",136.5,3,1,45,0)
and is then taken emergently to the OR to drain the abscess. He 
"DATA",136.5,3,1,46,0)
receives antibiotics intraoperatively. Postoperatively his WBC and
"DATA",136.5,3,1,47,0)
Temperature are trending down.
"DATA",136.5,3,1,48,0)
  POD#1 WBC 24, Temp 102 
"DATA",136.5,3,1,49,0)
  POD#2 WBC 14, Temp 100 
"DATA",136.5,3,1,50,0)
  POD#3 WBC 10, Temp 99 
"DATA",136.5,3,1,51,0)
This patient does not have postoperative sepsis as his WBC and 
"DATA",136.5,3,1,52,0)
Temperature are improving each postoperative day. 
"DATA",136.5,3,1,53,0)
 
"DATA",136.5,3,1,54,0)
Patient comes into the ER with s/s of sepsis - WBC 31, Temp 104. CT 
"DATA",136.5,3,1,55,0)
shows an abdominal abscess. He is given antibiotics and is taken 
"DATA",136.5,3,1,56,0)
emergently to the OR to drain the abscess. He receives antibiotics 
"DATA",136.5,3,1,57,0)
intraoperatively. Postoperatively his WBC and Temp are as follows:  
"DATA",136.5,3,1,58,0)
  POD#1 WBC 28, Temp 103
"DATA",136.5,3,1,59,0)
  POD#2 WBC 24, Temp 102.6
"DATA",136.5,3,1,60,0)
  POD#3 WBC 22, Temp 102 
"DATA",136.5,3,1,61,0)
  POD#4 WBC 21, Temp 101.6
"DATA",136.5,3,1,62,0)
  POD#5 WBC 30, Temp 104  
"DATA",136.5,3,1,63,0)
This patient does have postoperative sepsis because on postoperative 
"DATA",136.5,3,1,64,0)
day #5, his WBC and Temperature increase. The patient is having
"DATA",136.5,3,1,65,0)
worsening of the defined signs of sepsis.
"DATA",136.5,4,0)
PNEUMONIA
"DATA",136.5,4,1,0)
^^42^42^3070214^
"DATA",136.5,4,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,4,1,2,0)
Inflammation of the lungs caused primarily by bacteria, viruses, and/or
"DATA",136.5,4,1,3,0)
chemical irritants, usually manifested by chills, fever, pain in the
"DATA",136.5,4,1,4,0)
chest, cough, purulent, bloody sputum. Report as an occurrence if the
"DATA",136.5,4,1,5,0)
patient has pneumonia meeting the definition of pneumonia below AND
"DATA",136.5,4,1,6,0)
pneumonia not present preoperatively.
"DATA",136.5,4,1,7,0)
 
"DATA",136.5,4,1,8,0)
Pneumonia must meet one of the following TWO criteria:
"DATA",136.5,4,1,9,0)
Criterion 1.
"DATA",136.5,4,1,10,0)
  Rales or dullness to percussion on physical examination of chest AND
"DATA",136.5,4,1,11,0)
  any of the following:
"DATA",136.5,4,1,12,0)
  a. New onset of purulent sputum or change in character of sputum
"DATA",136.5,4,1,13,0)
  b. Organism isolate from blood culture
"DATA",136.5,4,1,14,0)
  c. Isolation of pathogen from specimen obtained by transtracheal
"DATA",136.5,4,1,15,0)
     aspirate, bronchial brushing, or biopsy
"DATA",136.5,4,1,16,0)
 
"DATA",136.5,4,1,17,0)
 OR
"DATA",136.5,4,1,18,0)
 
"DATA",136.5,4,1,19,0)
Criterion 2.
"DATA",136.5,4,1,20,0)
  Chest radiographic examination shows new or progressive infiltrate, 
"DATA",136.5,4,1,21,0)
  consolidation, cavitation, or pleural effusion AND any of the 
"DATA",136.5,4,1,22,0)
  following:
"DATA",136.5,4,1,23,0)
  a. New onset of purulent sputum or change in character of sputum
"DATA",136.5,4,1,24,0)
  b. Organism isolated from blood culture
"DATA",136.5,4,1,25,0)
  c. Isolation of pathogen from specimen obtained by transtracheal    
"DATA",136.5,4,1,26,0)
     aspirate, bronchial brushing, or biopsy
"DATA",136.5,4,1,27,0)
  d. Isolation of virus or detection of viral antigen in respiratory
"DATA",136.5,4,1,28,0)
     secretions
"DATA",136.5,4,1,29,0)
  e. Diagnostic single antibody titer (IgM) or fourfold increase in
"DATA",136.5,4,1,30,0)
     paired serum samples (IgG) for pathogen
"DATA",136.5,4,1,31,0)
  f. Histopathologic evidence of pneumonia
"DATA",136.5,4,1,32,0)
 
"DATA",136.5,4,1,33,0)
*If pneumonia was present preoperatively and resolved postoperatively 
"DATA",136.5,4,1,34,0)
and a new pneumonia is identified within 30 days after surgery, the
"DATA",136.5,4,1,35,0)
following criteria must be met in order to report as a postoperative
"DATA",136.5,4,1,36,0)
pneumonia occurrence:
"DATA",136.5,4,1,37,0)
   - Patient must have completed the antibiotic course for the 
"DATA",136.5,4,1,38,0)
     previous pneumonia.
"DATA",136.5,4,1,39,0)
   - Patient must have evidence of a clear chest x-ray after the 
"DATA",136.5,4,1,40,0)
     previous pneumonia and prior to the new pneumonia.
"DATA",136.5,4,1,41,0)
   - There must be evidence of a new isolate of micro-organism on 
"DATA",136.5,4,1,42,0)
     culture.
"DATA",136.5,5,0)
PULMONARY EMBOLISM
"DATA",136.5,5,1,0)
^^12^12^3070305^
"DATA",136.5,5,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,5,1,2,0)
Lodging of a blood clot in a pulmonary artery with subsequent 
"DATA",136.5,5,1,3,0)
obstruction of blood supply to the lung parenchyma. The blood clots 
"DATA",136.5,5,1,4,0)
usually originate from the deep leg veins or the pelvic venous system.
"DATA",136.5,5,1,5,0)
Enter "YES" if the patient has a V-Q scan interpreted as high 
"DATA",136.5,5,1,6,0)
probability of pulmonary embolism or a positive pulmonary arteriogram 
"DATA",136.5,5,1,7,0)
or positive CT angiogram or positive Spiral CT exam. Treatment usually
"DATA",136.5,5,1,8,0)
consists of:
"DATA",136.5,5,1,9,0)
 - Initiation of anticoagulation therapy
"DATA",136.5,5,1,10,0)
 - Placement of mechanical interruption (e.g. Greenfield Filter), for
"DATA",136.5,5,1,11,0)
   patients in whom anticoagulation is contraindicated or already 
"DATA",136.5,5,1,12,0)
   instituted.
"DATA",136.5,6,0)
ON VENTILATOR > 48 HOURS
"DATA",136.5,6,1,0)
^^10^10^3070223^
"DATA",136.5,6,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,6,1,2,0)
Total duration of ventilator-assisted respirations during postoperative
"DATA",136.5,6,1,3,0)
hospitalization was >48 hours. This can occur at any time during the
"DATA",136.5,6,1,4,0)
30-day period postoperatively. This time assessment is CUMULATIVE, not
"DATA",136.5,6,1,5,0)
necessarily consecutive. Ventilator-assisted respirations can be via
"DATA",136.5,6,1,6,0)
endotracheal tube, nasotracheal tube, or tracheostomy tube.
"DATA",136.5,6,1,7,0)
 
"DATA",136.5,6,1,8,0)
CICSP Definition (2007):
"DATA",136.5,6,1,9,0)
Indicate if the total duration of ventilator-assisted respiration
"DATA",136.5,6,1,10,0)
within 30 days post-operatively was greater than or equal to 48 hours.
"DATA",136.5,7,0)
UNPLANNED INTUBATION^^1
"DATA",136.5,7,1,0)
^^9^9^3060313^
"DATA",136.5,7,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,7,1,2,0)
Patient required placement of an endotracheal tube and mechanical or 
"DATA",136.5,7,1,3,0)
assisted ventilation because of the onset of respiratory or cardiac 
"DATA",136.5,7,1,4,0)
failure manifested by severe respiratory distress, hypoxia, 
"DATA",136.5,7,1,5,0)
hypercarbia, or respiratory acidosis. In patients who were intubated 
"DATA",136.5,7,1,6,0)
for their surgery, unplanned intubation occurs after they have been 
"DATA",136.5,7,1,7,0)
extubated after surgery. In patients who were not intubated during 
"DATA",136.5,7,1,8,0)
surgery, intubation at any time after their surgery is considered 
"DATA",136.5,7,1,9,0)
unplanned. 
"DATA",136.5,8,0)
RENAL INSUFFICIENCY
"DATA",136.5,8,1,0)
^^4^4^3040318^
"DATA",136.5,8,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,8,1,2,0)
The reduced capacity of the kidney to perform its function as evidenced
"DATA",136.5,8,1,3,0)
by a rise in creatinine of >2 mg/dl from preoperative value, but with
"DATA",136.5,8,1,4,0)
no requirement for dialysis.
"DATA",136.5,8,2,0)
^136.53^1^1
"DATA",136.5,8,2,1,0)
PROGRESSIVE RENAL INSUFFICIENCY
"DATA",136.5,9,0)
ACUTE RENAL FAILURE
"DATA",136.5,9,1,0)
^^13^13^3070305^
"DATA",136.5,9,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,9,1,2,0)
In a patient who did not require dialysis preoperatively, worsening of 
"DATA",136.5,9,1,3,0)
renal dysfunction postoperatively requiring hemodialysis, peritoneal 
"DATA",136.5,9,1,4,0)
dialysis, hemofiltration, hemodiafiltration or ultrafiltration.
"DATA",136.5,9,1,5,0)
 
"DATA",136.5,9,1,6,0)
TIP: If the patient refuses dialysis the answer is Yes to this 
"DATA",136.5,9,1,7,0)
variable, because he/she did require dialysis.
"DATA",136.5,9,1,8,0)
 
"DATA",136.5,9,1,9,0)
CICSP Definition (2004):
"DATA",136.5,9,1,10,0)
Indicate if the patient developed new renal failure requiring dialysis 
"DATA",136.5,9,1,11,0)
or experienced an exacerbation of preoperative renal failure requiring 
"DATA",136.5,9,1,12,0)
initiation of dialysis (not on dialysis preoperatively) within 30 days 
"DATA",136.5,9,1,13,0)
postoperatively.
"DATA",136.5,9,2,0)
^136.53^1^1
"DATA",136.5,9,2,1,0)
RENAL FAILURE
"DATA",136.5,10,0)
URINARY TRACT INFECTION
"DATA",136.5,10,1,0)
^^22^22^3040318^
"DATA",136.5,10,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,10,1,2,0)
Postoperative symptomatic urinary tract infection must meet one of the 
"DATA",136.5,10,1,3,0)
following TWO criteria:
"DATA",136.5,10,1,4,0)
 
"DATA",136.5,10,1,5,0)
1. One of the following: fever (>38 degrees C), urgency, frequency,
"DATA",136.5,10,1,6,0)
   dysuria, or suprapubic tenderness AND a urine culture of >100,000
"DATA",136.5,10,1,7,0)
   colonies/ml urine with no more than two species of organisms
"DATA",136.5,10,1,8,0)
 
"DATA",136.5,10,1,9,0)
OR
"DATA",136.5,10,1,10,0)
 
"DATA",136.5,10,1,11,0)
2. Two of the following: fever (>38 degrees C), urgency, frequency,
"DATA",136.5,10,1,12,0)
   dysuria, or suprapubic tenderness AND any of the following:
"DATA",136.5,10,1,13,0)
   - Dipstick test positive for leukocyte esterase and/or nitrate
"DATA",136.5,10,1,14,0)
   - Pyuria (>10 WBCs/cc or >3 WBC/hpf of unspun urine)
"DATA",136.5,10,1,15,0)
   - Organisms seen on Gram stain of unspun urine
"DATA",136.5,10,1,16,0)
   - Two urine cultures with repeated isolation of the same uropathogen
"DATA",136.5,10,1,17,0)
     with >100 colonies/ml urine in non-voided specimen
"DATA",136.5,10,1,18,0)
   - Urine culture with <100,000 colonies/ml urine of single
"DATA",136.5,10,1,19,0)
     uropathogen in patient being treated with appropriate
"DATA",136.5,10,1,20,0)
     antimicrobial therapy
"DATA",136.5,10,1,21,0)
   - Physician's diagnosis
"DATA",136.5,10,1,22,0)
   - Physician institutes appropriate antimicrobial therapy
"DATA",136.5,10,2,0)
^136.53^1^1
"DATA",136.5,10,2,1,0)
UTI
"DATA",136.5,11,0)
PULMONARY EDEMA^1
"DATA",136.5,11,1,0)
^136.52^2^2^3040318^^^^
"DATA",136.5,11,1,1,0)
Postoperative distress requiring treatment and diagnosis of CHF or
"DATA",136.5,11,1,2,0)
pulmonary edema or Adult Respiratory Distress Syndrome.
"DATA",136.5,12,0)
STROKE/CVA
"DATA",136.5,12,1,0)
^^10^10^3040617^
"DATA",136.5,12,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,12,1,2,0)
Patient develops an embolic, thrombotic, or hemorrhagic vascular 
"DATA",136.5,12,1,3,0)
accident or stroke with motor, sensory, or cognitive dysfunction (e.g.,
"DATA",136.5,12,1,4,0)
hemiplegia, hemiparesis, aphasia, sensory deficit, impaired memory) 
"DATA",136.5,12,1,5,0)
that persist for 24 or more hours.
"DATA",136.5,12,1,6,0)
 
"DATA",136.5,12,1,7,0)
CICSP Definition (2004):
"DATA",136.5,12,1,8,0)
Indicate if there was any new objective neurologic deficit lasting >72
"DATA",136.5,12,1,9,0)
hours with onset immediately post-operatively or occurring within the
"DATA",136.5,12,1,10,0)
30 days after surgery.
"DATA",136.5,12,2,0)
^136.53^2^2
"DATA",136.5,12,2,1,0)
CEREBRAL VASCULAR ACCIDENT
"DATA",136.5,12,2,2,0)
CVA
"DATA",136.5,13,0)
COMA > 24 HOURS
"DATA",136.5,13,1,0)
^^12^12^3060321^
"DATA",136.5,13,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,13,1,2,0)
Patient is unconscious, postures to painful stimuli, or is 
"DATA",136.5,13,1,3,0)
unresponsive to all stimuli (exclude transient disorientation or
"DATA",136.5,13,1,4,0)
psychosis) for greater than 24 hours during postoperative
"DATA",136.5,13,1,5,0)
hospitalization. Do not include drug-induced coma (e.g. Propofol
"DATA",136.5,13,1,6,0)
drips, etc.)
"DATA",136.5,13,1,7,0)
 
"DATA",136.5,13,1,8,0)
CICSP Definition (2006):
"DATA",136.5,13,1,9,0)
Indicate if postoperatively within 30 days of surgery there was a 
"DATA",136.5,13,1,10,0)
significantly decreased level of consciousness (exclude transient 
"DATA",136.5,13,1,11,0)
disorientation or psychosis) for greater than or equal to 24 hours
"DATA",136.5,13,1,12,0)
as evidenced by lack of response to deep, painful stimuli.
"DATA",136.5,14,0)
PERIPHERAL NERVE INJURY
"DATA",136.5,14,1,0)
^136.52^6^6^3070214^^
"DATA",136.5,14,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,14,1,2,0)
Peripheral nerve damage may result from damage to the nerve fibers, 
"DATA",136.5,14,1,3,0)
cell body, or myelin sheath during surgery. Peripheral nerve injuries
"DATA",136.5,14,1,4,0)
which result in motor deficits only to the cervical plexus, brachial
"DATA",136.5,14,1,5,0)
plexus, ulnar plexus, lumbar-sacral plexus (sciatic nerve), peroneal
"DATA",136.5,14,1,6,0)
nerve, and/or the femoral nerve should be included.
"DATA",136.5,15,0)
BLEEDING/TRANSFUSIONS
"DATA",136.5,15,1,0)
^^9^9^3040318^
"DATA",136.5,15,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,15,1,2,0)
Any transfusion (including autologous) of packed red blood cells or 
"DATA",136.5,15,1,3,0)
whole blood given from the time the patient leaves the operating room 
"DATA",136.5,15,1,4,0)
up to and including 72 hours postoperatively. Report as an occurrence
"DATA",136.5,15,1,5,0)
for five or more units of packed red blood cell in the postoperative
"DATA",136.5,15,1,6,0)
period including hanging blood from the OR that is finished outside
"DATA",136.5,15,1,7,0)
of the OR. If the patient receives shed blood, autologous blood, cell
"DATA",136.5,15,1,8,0)
saver blood or pleurovac postoperatively, this is counted if greater
"DATA",136.5,15,1,9,0)
than four units. The blood may be given for any reason.
"DATA",136.5,16,0)
CARDIAC ARREST REQUIRING CPR^^1
"DATA",136.5,16,1,0)
^^12^12^3060119^
"DATA",136.5,16,1,1,0)
NSQIP Definition (2006):
"DATA",136.5,16,1,2,0)
The absence of cardiac rhythm or presence of chaotic cardiac rhythm 
"DATA",136.5,16,1,3,0)
that results in loss of consciousness requiring the initiation of any 
"DATA",136.5,16,1,4,0)
component of basic and/or advanced cardiac life support. Patients with 
"DATA",136.5,16,1,5,0)
AICDs that fire but the patient does not lose consciousness should be 
"DATA",136.5,16,1,6,0)
excluded.
"DATA",136.5,16,1,7,0)
 
"DATA",136.5,16,1,8,0)
CICSP Definition (2004):
"DATA",136.5,16,1,9,0)
Indicate if there was any cardiac arrest requiring external or open 
"DATA",136.5,16,1,10,0)
cardiopulmonary resuscitation (CPR) occurring in the operating room, 
"DATA",136.5,16,1,11,0)
ICU, ward, or out-of-hospital after the chest had been completely 
"DATA",136.5,16,1,12,0)
closed and within 30 days of surgery.
"DATA",136.5,17,0)
MYOCARDIAL INFARCTION^^1
"DATA",136.5,17,1,0)
^^12^12^3070223^
"DATA",136.5,17,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,17,1,2,0)
A new transmural acute myocardial infarction occurring during surgery 
"DATA",136.5,17,1,3,0)
or within 30 days following surgery as manifested by new Q-waves on 
"DATA",136.5,17,1,4,0)
ECG. Non-Q-wave infarctions should be entered under "OTHER".
"DATA",136.5,17,1,5,0)
 
"DATA",136.5,17,1,6,0)
CICSP Definition (2007):
"DATA",136.5,17,1,7,0)
Indicate the presence of a peri-operative MI if at least one of the 
"DATA",136.5,17,1,8,0)
following criteria occurs either intraoperatively or postoperatively 
"DATA",136.5,17,1,9,0)
within 30 days:
"DATA",136.5,17,1,10,0)
 1. Evolutionary ST-segment elevations
"DATA",136.5,17,1,11,0)
 2. Development of new Q-waves in two or more contiguous ECG leads
"DATA",136.5,17,1,12,0)
 3. New or presumably new LBBB pattern on the ECG
"DATA",136.5,18,0)
ILEUS/BOWEL OBSTRUCTION^1
"DATA",136.5,18,1,0)
^136.52^6^6^3040318^^^^
"DATA",136.5,18,1,1,0)
This category includes prolonged ileus or bowel obstruction.  Ileus is
"DATA",136.5,18,1,2,0)
obstruction of the intestines from a variety of causes including
"DATA",136.5,18,1,3,0)
mechanical obstruction, peritonitis, adhesions, or post-surgically as a
"DATA",136.5,18,1,4,0)
result of functional dysmotility by the bowel.  Bowel obstruction is any
"DATA",136.5,18,1,5,0)
hindrance to the passage of the intestinal contents.  Prolonged ileus or
"DATA",136.5,18,1,6,0)
obstruction is defined as longer than 5 days postoperatively.
"DATA",136.5,19,0)
GRAFT/PROSTHESIS/FLAP FAILURE
"DATA",136.5,19,1,0)
^^4^4^3040318^
"DATA",136.5,19,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,19,1,2,0)
Mechanical failure of an extracardiac graft/or prosthesis including 
"DATA",136.5,19,1,3,0)
myocutaneous flaps and skin grafts requiring return to the operating 
"DATA",136.5,19,1,4,0)
room, interventional radiology, or a balloon angioplasty.
"DATA",136.5,20,0)
DVT/THROMBOPHLEBITIS
"DATA",136.5,20,1,0)
^^6^6^3040318^
"DATA",136.5,20,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,20,1,2,0)
The identification of a new blood clot or thrombus within the venous 
"DATA",136.5,20,1,3,0)
system, which may be coupled with inflammation. This diagnosis is 
"DATA",136.5,20,1,4,0)
confirmed by a duplex, venogram or CT scan. The patient must be treated
"DATA",136.5,20,1,5,0)
with anticoagulation therapy, and/or placement of a vena cava filter or
"DATA",136.5,20,1,6,0)
clipping of the vena cava.
"DATA",136.5,20,2,0)
^136.53^2^2
"DATA",136.5,20,2,1,0)
DEEP VEIN THROMBOSIS/THROMBOPHLEBITIS
"DATA",136.5,20,2,2,0)
THROMBOPHLEBITIS
"DATA",136.5,21,0)
OTHER OCCURRENCE^^1
"DATA",136.5,21,1,0)
^^4^4^3040318^
"DATA",136.5,21,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,21,1,2,0)
Enter any other surgical occurrences which you feel to be significant
"DATA",136.5,21,1,3,0)
and that are not covered by the predefined occurrence categories. This 
"DATA",136.5,21,1,4,0)
occurrence category should have an accompanying ICD Diagnosis code.
"DATA",136.5,22,0)
WOUND DISRUPTION
"DATA",136.5,22,1,0)
^^3^3^3040318^
"DATA",136.5,22,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,22,1,2,0)
Separation of the layers of a surgical wound, which may be partial or 
"DATA",136.5,22,1,3,0)
complete, with disruption of the fascia. 
"DATA",136.5,23,0)
ENDOCARDITIS
"DATA",136.5,23,1,0)
^136.52^9^9^3040721^^^
"DATA",136.5,23,1,1,0)
CICSP Definition (2004):
"DATA",136.5,23,1,2,0)
Indicate if the chart documents that active endocarditis was present 
"DATA",136.5,23,1,3,0)
within 30 days postoperatively. Endocarditis is defined as any 
"DATA",136.5,23,1,4,0)
postoperative intracardiac infection (usually on a valve) documented 
"DATA",136.5,23,1,5,0)
by two or more positive blood cultures with the same organism, and/or 
"DATA",136.5,23,1,6,0)
development of vegetations and valve destruction seen by echo or 
"DATA",136.5,23,1,7,0)
repeat surgery, and/or histologic evidence of infection at repeat 
"DATA",136.5,23,1,8,0)
surgery or autopsy. Patients with preoperative endocarditis who have 
"DATA",136.5,23,1,9,0)
the above evidence of persistent infection should be included.
"DATA",136.5,24,0)
LOW CARDIAC OUTPUT > 6 HOURS
"DATA",136.5,24,1,0)
^136.52^4^4^3040318^^^^
"DATA",136.5,24,1,1,0)
This includes patient's that have had a postoperative cardiac index of
"DATA",136.5,24,1,2,0)
less than 2.0 L/min/M2 and/or peripheral manifestations (e.g. oliguria) of
"DATA",136.5,24,1,3,0)
low cardiac output present for 6 or more hours following surgery requiring
"DATA",136.5,24,1,4,0)
inotropic and/or intra-aortic ballon pump support.
"DATA",136.5,25,0)
MEDIASTINITIS
"DATA",136.5,25,1,0)
^^4^4^3040809^
"DATA",136.5,25,1,1,0)
CICSP Definition (2004):
"DATA",136.5,25,1,2,0)
Indicate if the patient developed a bacterial infection involving the 
"DATA",136.5,25,1,3,0)
sternum or deep to the sternum requiring drainage and anti-microbial 
"DATA",136.5,25,1,4,0)
therapy diagnosed within 30 days after surgery.
"DATA",136.5,26,0)
REOPERATION FOR BLEEDING
"DATA",136.5,26,1,0)
^^3^3^3040809^
"DATA",136.5,26,1,1,0)
CICSP Definition (2004):
"DATA",136.5,26,1,2,0)
Indicate if there was any re-exploration of the thorax for suspected 
"DATA",136.5,26,1,3,0)
bleeding within 30 days of surgery.
"DATA",136.5,27,0)
REPEAT CARDIAC SURGICAL PROCEDURE
"DATA",136.5,27,1,0)
^136.52^17^17^3060302^^^
"DATA",136.5,27,1,1,0)
CICSP Definition (2006):
"DATA",136.5,27,1,2,0)
Indicate the CPB status if the patient underwent a repeat operation on 
"DATA",136.5,27,1,3,0)
the heart after the patient had left the operating room from the 
"DATA",136.5,27,1,4,0)
initial operation and within current hospitalization or within 30 days
"DATA",136.5,27,1,5,0)
of the initial operation. Use the same criteria to define a cardiac
"DATA",136.5,27,1,6,0)
surgery as listed on page 1 of the CICSP Instructions/Definitions. 
"DATA",136.5,27,1,7,0)
(Do NOT submit a separate second form for this second cardiac 
"DATA",136.5,27,1,8,0)
procedure if it occurs within 30 days post-operatively.) Indicate 
"DATA",136.5,27,1,9,0)
the one appropriate response:
"DATA",136.5,27,1,10,0)
 
"DATA",136.5,27,1,11,0)
None       - no repeat cardiac surgical procedure post-operatively 
"DATA",136.5,27,1,12,0)
             during index hospitalization or within 30 days of initial
"DATA",136.5,27,1,13,0)
             operation.
"DATA",136.5,27,1,14,0)
On-bypass  - patient underwent a repeat cardiac surgical procedure 
"DATA",136.5,27,1,15,0)
             utilizing CPB.
"DATA",136.5,27,1,16,0)
Off-bypass - patient underwent a repeat cardiac surgical procedure not 
"DATA",136.5,27,1,17,0)
             utilizing CPB.
"DATA",136.5,28,0)
STROKE^1
"DATA",136.5,28,1,0)
^136.52^3^3^3040202^^^^
"DATA",136.5,28,1,1,0)
This includes any new objective neurologic deficit lasting 30 minutes or
"DATA",136.5,28,1,2,0)
more with onset intraoperatively or occurring within 30 days following
"DATA",136.5,28,1,3,0)
surgery.
"DATA",136.5,29,0)
OTHER RESPIRATORY OCCURRENCE
"DATA",136.5,29,1,0)
^^5^5^3040318^
"DATA",136.5,29,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,29,1,2,0)
Enter any other respiratory occurrences that you feel to be significant
"DATA",136.5,29,1,3,0)
and that are not covered by the predefined respiratory occurrence
"DATA",136.5,29,1,4,0)
categories. This occurrence category should have an accompanying ICD 
"DATA",136.5,29,1,5,0)
Diagnosis code.
"DATA",136.5,30,0)
OTHER CNS OCCURRENCE
"DATA",136.5,30,1,0)
^^5^5^3040318^
"DATA",136.5,30,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,30,1,2,0)
Enter any other neurologic related occurrences, which you feel to be 
"DATA",136.5,30,1,3,0)
significant and that are not covered by the predefined CNS occurrence
"DATA",136.5,30,1,4,0)
categories. This occurrence category should have an accompanying ICD 
"DATA",136.5,30,1,5,0)
Diagnosis code.
"DATA",136.5,31,0)
OTHER URINARY TRACT OCCURRENCE
"DATA",136.5,31,1,0)
^^5^5^3040318^
"DATA",136.5,31,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,31,1,2,0)
Enter any other urinary occurrences which you feel to be significant 
"DATA",136.5,31,1,3,0)
and that are not covered by the predefined urinary tract occurrence
"DATA",136.5,31,1,4,0)
categories. This occurrence category should have an accompanying ICD 
"DATA",136.5,31,1,5,0)
Diagnosis code.
"DATA",136.5,32,0)
OTHER CARDIAC OCCURRENCE
"DATA",136.5,32,1,0)
^^5^5^3040318^
"DATA",136.5,32,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,32,1,2,0)
Enter any other cardiac related surgical occurrences which you feel to 
"DATA",136.5,32,1,3,0)
be significant and that are not covered by the predefined cardiac
"DATA",136.5,32,1,4,0)
occurrence categories. This occurrence category should have an 
"DATA",136.5,32,1,5,0)
accompanying ICD Diagnosis code.
"DATA",136.5,33,0)
TRACHEOSTOMY^^^Y
"DATA",136.5,33,1,0)
^^4^4^3040809^
"DATA",136.5,33,1,1,0)
CICSP Definition (2004):
"DATA",136.5,33,1,2,0)
Indicate if a procedure to cut into the trachea and insert a tube to 
"DATA",136.5,33,1,3,0)
overcome tracheal obstruction or to facilitate extended mechanical 
"DATA",136.5,33,1,4,0)
ventilation was performed within 30 days of surgery.
"DATA",136.5,34,0)
NEW MECHANICAL CIRCULATORY SUPPORT^^1^Y
"DATA",136.5,34,1,0)
^^20^20^3040721^
"DATA",136.5,34,1,1,0)
CICSP Definition (2004):
"DATA",136.5,34,1,2,0)
Indicate if the patient left the operating room suite with or required
"DATA",136.5,34,1,3,0)
post-op placement of a new IABP, ECMO, or VAD for circulatory support
"DATA",136.5,34,1,4,0)
within 30 days perioperatively. A "yes" response is appropriate even if
"DATA",136.5,34,1,5,0)
the pump is only used for a short time perioperatively. A "yes"
"DATA",136.5,34,1,6,0)
response, however, is only correct if the patient did not enter the
"DATA",136.5,34,1,7,0)
operating room with this same mechanical circulatory support, and the
"DATA",136.5,34,1,8,0)
device insertion occurred AFTER the induction of anesthesia.
"DATA",136.5,34,1,9,0)
 
"DATA",136.5,34,1,10,0)
If patient had/required new mechanical circulatory support, indicate 
"DATA",136.5,34,1,11,0)
whether the placement occurred intraoperatively or postoperatively.  
"DATA",136.5,34,1,12,0)
Indicate the one appropriate response:
"DATA",136.5,34,1,13,0)
 - intraoperatively: occurring while patient was in the operating room.
"DATA",136.5,34,1,14,0)
 - postoperatively:  occurring after patient left the operating room.
"DATA",136.5,34,1,15,0)
 
"DATA",136.5,34,1,16,0)
A "no" response is appropriate if the circulatory support device was 
"DATA",136.5,34,1,17,0)
placed as a prophylaxis before the induction of anesthesia; however, if
"DATA",136.5,34,1,18,0)
it was placed for any reason after the induction of anesthesia, then a
"DATA",136.5,34,1,19,0)
"yes" response is appropriate. A "no" response is also appropriate if
"DATA",136.5,34,1,20,0)
the primary operation is to insert a ventricular assist device.
"DATA",136.5,35,0)
ORGAN/SPACE SSI
"DATA",136.5,35,1,0)
^^32^32^3040318^
"DATA",136.5,35,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,35,1,2,0)
Organ/Space SSI is an infection that occurs within 30 days after the 
"DATA",136.5,35,1,3,0)
operation and the infection appears to be related to the operation and 
"DATA",136.5,35,1,4,0)
the infection involves any part of the anatomy (e.g., organs or spaces), 
"DATA",136.5,35,1,5,0)
other than the incision, which was opened or manipulated during an 
"DATA",136.5,35,1,6,0)
operation and at least one of the following:
"DATA",136.5,35,1,7,0)
 
"DATA",136.5,35,1,8,0)
  - Purulent drainage from a drain that is placed through a stab wound 
"DATA",136.5,35,1,9,0)
    into the organ/space.  
"DATA",136.5,35,1,10,0)
  - Organisms isolated from an aseptically obtained culture of fluid or 
"DATA",136.5,35,1,11,0)
    tissue in the organ/space.  
"DATA",136.5,35,1,12,0)
  - An abscess or other evidence of infection involving the organ/space 
"DATA",136.5,35,1,13,0)
    that is found on direct examination, during reoperation, or by 
"DATA",136.5,35,1,14,0)
    histopathologic or radiologic examination.  
"DATA",136.5,35,1,15,0)
  - Diagnosis of an organ/space SSI by a surgeon or attending physician.  
"DATA",136.5,35,1,16,0)
   
"DATA",136.5,35,1,17,0)
  Site-Specific Classifications of Organ/Space Surgical Site Infection
"DATA",136.5,35,1,18,0)
  --------------------------------------------------------------------
"DATA",136.5,35,1,19,0)
  Arterial or venous infection        Meningitis or ventriculitis
"DATA",136.5,35,1,20,0)
  Breast abscess or mastitis          Myocarditis or pericarditis
"DATA",136.5,35,1,21,0)
  Disc space                          Oral cavity (mouth, tongue, or
"DATA",136.5,35,1,22,0)
  Ear, mastoid                         gums)
"DATA",136.5,35,1,23,0)
  Endocarditis                        Osteomyelitis
"DATA",136.5,35,1,24,0)
  Endometritis                        Other infections of the lower
"DATA",136.5,35,1,25,0)
  Eye, other than conjunctivitis       respiratory tract (e.g. abscess
"DATA",136.5,35,1,26,0)
  Gastrointestinal tract               or empyema)
"DATA",136.5,35,1,27,0)
  Intra-abdominal, not specified      Other male or female reproductive
"DATA",136.5,35,1,28,0)
   elsewhere                           tract
"DATA",136.5,35,1,29,0)
  Intracranial, brain abscess or      Sinusitis
"DATA",136.5,35,1,30,0)
   dura                               Spinal abscess without meningitis
"DATA",136.5,35,1,31,0)
  Joint or bursa                      Upper respiratory tract
"DATA",136.5,35,1,32,0)
  Mediastinitis                       Vaginal cuff
"DATA",136.5,36,0)
OTHER WOUND OCCURRENCE
"DATA",136.5,36,1,0)
^^5^5^3040318^
"DATA",136.5,36,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,36,1,2,0)
Enter any other wound occurrences that you feel to be significant and 
"DATA",136.5,36,1,3,0)
that are not covered by the predefined wound occurrence categories. 
"DATA",136.5,36,1,4,0)
This occurrence category should have an accompanying ICD Diagnosis 
"DATA",136.5,36,1,5,0)
code.
"DATA",136.5,37,0)
REPEAT VENTILATOR SUPPORT W/IN 30 DAYS^^0^Y
"DATA",136.5,37,1,0)
^136.52^8^8^3060313^^^^
"DATA",136.5,37,1,1,0)
CICSP Definition (2006) 
"DATA",136.5,37,1,2,0)
Indicate if the patient was placed on ventilator support
"DATA",136.5,37,1,3,0)
postoperatively for any reason within 30 days, AND this repeat
"DATA",136.5,37,1,4,0)
ventilator support is related to the index operation AND occurred
"DATA",136.5,37,1,5,0)
during the same admission in-hospital. (For example, the patient is 
"DATA",136.5,37,1,6,0)
on the ventilator intra-op and immediately post-op. Then patient is
"DATA",136.5,37,1,7,0)
weaned and the ventilator is discontinued. Later, the patient gets
"DATA",136.5,37,1,8,0)
into trouble and mechanical ventilation has to be reinstated.)
"DATA",136.5,38,0)
CLOSTRIDIUM DIFFICILE COLITIS (C-DIFFICILE)^^0
"DATA",136.5,38,1,0)
^136.52^7^7^3070123^^^
"DATA",136.5,38,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,38,1,2,0)
C. difficile-associated disease occurs when the normal intestinal 
"DATA",136.5,38,1,3,0)
flora is altered, allowing C. difficile to flourish in the intestinal 
"DATA",136.5,38,1,4,0)
tract and produce a toxin that causes a watery diarrhea. C. difficile 
"DATA",136.5,38,1,5,0)
diarrhea is confirmed by the presence of a toxin in a stool specimen. 
"DATA",136.5,38,1,6,0)
Answer yes only if you have a positive culture for C. difficile with a 
"DATA",136.5,38,1,7,0)
toxin assay and diagnosis of C. difficile documented in the chart.
"DATA",136.5,38,2,0)
^136.53^1^1
"DATA",136.5,38,2,1,0)
C. DIFFICILE
"FIA",130)
SURGERY
"FIA",130,0)
^SRF(
"FIA",130,0,0)
130IP
"FIA",130,0,1)
y^y^p^^^^n^^n
"FIA",130,0,10)

"FIA",130,0,11)

"FIA",130,0,"RLRO")

"FIA",130,0,"VR")
3.0^SR
"FIA",130,130)
1
"FIA",130,130,.04)

"FIA",130,130,1.09)

"FIA",130,130,102)

"FIA",130,130,202)

"FIA",130,130,203)

"FIA",130,130,207)

"FIA",130,130,215)

"FIA",130,130,216)

"FIA",130,130,218)

"FIA",130,130,218.1)

"FIA",130,130,220)

"FIA",130,130,239)

"FIA",130,130,250)

"FIA",130,130,251)

"FIA",130,130,252)

"FIA",130,130,254)

"FIA",130,130,269)

"FIA",130,130,285)

"FIA",130,130,287)

"FIA",130,130,290)

"FIA",130,130,291)

"FIA",130,130,292)

"FIA",130,130,294)

"FIA",130,130,295)

"FIA",130,130,296)

"FIA",130,130,297)

"FIA",130,130,298)

"FIA",130,130,299)

"FIA",130,130,300)

"FIA",130,130,301)

"FIA",130,130,304)

"FIA",130,130,305)

"FIA",130,130,306)

"FIA",130,130,308)

"FIA",130,130,309)

"FIA",130,130,310)

"FIA",130,130,311)

"FIA",130,130,312)

"FIA",130,130,314)

"FIA",130,130,325)

"FIA",130,130,326)

"FIA",130,130,330)

"FIA",130,130,338.1)

"FIA",130,130,342)

"FIA",130,130,364)

"FIA",130,130,385)

"FIA",130,130,398)

"FIA",130,130,401)

"FIA",130,130,407)

"FIA",130,130,408)

"FIA",130,130,414)

"FIA",130,130,443)

"FIA",130,130,444.1)

"FIA",130,130,445.1)

"FIA",130,130,446)

"FIA",130,130,447)

"FIA",130,130,455.1)

"FIA",130,130,456.1)

"FIA",130,130,457.1)

"FIA",130,130,458.1)

"FIA",130,130,459.1)

"FIA",130,130,460.1)

"FIA",130,130,461.1)

"FIA",130,130,462.1)

"FIA",130,130,469)

"FIA",130,130,474)

"FIA",130,130,477)

"FIA",130,130,487.1)

"FIA",130,130,504)

"FIA",130,130,504.1)

"FIA",130,130.22)
1
"FIA",130,130.22,2)

"FIA",130,130.22,7)

"FIA",136.5)
PERIOPERATIVE OCCURRENCE CATEGORY
"FIA",136.5,0)
^SRO(136.5,
"FIA",136.5,0,0)
136.5I
"FIA",136.5,0,1)
y^y^f^^n^^y^o^n
"FIA",136.5,0,10)

"FIA",136.5,0,11)

"FIA",136.5,0,"RLRO")

"FIA",136.5,0,"VR")
3.0^SR
"FIA",136.5,136.5)
0
"FIA",136.5,136.52)
0
"FIA",136.5,136.53)
0
"FIA",137)
CPT EXCLUSIONS
"FIA",137,0)
^SRO(137,
"FIA",137,0,0)
137P
"FIA",137,0,1)
y^y^f^^^^n
"FIA",137,0,10)

"FIA",137,0,11)

"FIA",137,0,"RLRO")

"FIA",137,0,"VR")
3.0^SR
"FIA",137,137)
0
"INI")
SR160UT2
"INIT")
POST^SR160UTL
"IX",130,130,"AD",0)
130^AD^CoreFLS fields monitor flag.^MU^^R^IR^I^130^^^^^A
"IX",130,130,"AD",.1,0)
^^2^2^3020822^
"IX",130,130,"AD",.1,1,0)
This cross-reference will be checked before sending a notification to
"IX",130,130,"AD",.1,2,0)
the CoreFLS software after editing any of these fields.
"IX",130,130,"AD",1)
S ^TMP("CSLSUR1",$J)="" Q
"IX",130,130,"AD",1.4)
N I S (X,I)=0 F  S I=$O(X1(I)) Q:'I  I X1(I)'=X2(I) S X=1 Q
"IX",130,130,"AD",2)
S ^TMP("CSLSUR1",$J)="" Q
"IX",130,130,"AD",2.4)
N I S (X,I)=0 F  S I=$O(X1(I)) Q:'I  I X1(I)'=X2(I) S X=1 Q
"IX",130,130,"AD",2.5)
Q
"IX",130,130,"AD",11.1,0)
^.114IA^11^11
"IX",130,130,"AD",11.1,1,0)
1^F^130^.14^^^F
"IX",130,130,"AD",11.1,2,0)
2^F^130^27^^^F
"IX",130,130,"AD",11.1,3,0)
3^F^130^.02^^^F
"IX",130,130,"AD",11.1,4,0)
4^F^130^.04^^^F
"IX",130,130,"AD",11.1,5,0)
5^F^130^10^^^F
"IX",130,130,"AD",11.1,6,0)
6^F^130^11^^^F
"IX",130,130,"AD",11.1,7,0)
7^F^130^26^^^F
"IX",130,130,"AD",11.1,8,0)
8^F^130^.011^^^F
"IX",130,130,"AD",11.1,9,0)
9^F^130^.09^^^F
"IX",130,130,"AD",11.1,10,0)
10^F^130^35^^^F
"IX",130,130,"AD",11.1,11,0)
11^F^130^.164^^^F
"KRN",.402,1409,-1)
0^1
"KRN",.402,1409,0)
SRO-NOCOMP^3070123.1258^^130^^^3070510
"KRN",.402,1409,"DR",1,130)
403////N;248////N;249////N;404////N;488////N;318////N;251////N;412////N;490////N;252////N;285////N;319////N;409////N;254////N;255////N;320////N;256////N;410////N;287////N;321////N;411////N;258////N;322////N;257////N;261////N;
"KRN",.402,1409,"DR",1,130,1)
263////N;250////N;385////N;386////N;387////N;388////N;389////N;391////N;466////N;467////N;447////N;
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"PKG",167,-1)
1^1
"PKG",167,0)
SURGERY^SR^SURGICAL DATA COLLECTION AND OPERATIONS SCHEDULING
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
3.0^3040426^2930811
"PKG",167,22,1,"PAH",1,0)
160^3070516
"PKG",167,22,1,"PAH",1,1,0)
^^170^170^3070516
"PKG",167,22,1,"PAH",1,1,1,0)
This patch updates the Surgery Risk Assessment software of the Veterans
"PKG",167,22,1,"PAH",1,1,2,0)
Health Information Systems and Technology Architecture (VistA) Surgery
"PKG",167,22,1,"PAH",1,1,3,0)
application as requested by the Executive Board of the National Surgical
"PKG",167,22,1,"PAH",1,1,4,0)
Quality Improvement Program (NSQIP) and by the Cardiac Surgery Consultants
"PKG",167,22,1,"PAH",1,1,5,0)
Board of the Continuous Improvement in Cardiac Surgery Program (CICSP).
"PKG",167,22,1,"PAH",1,1,6,0)
The updates include the addition of new data fields, changes to existing 
"PKG",167,22,1,"PAH",1,1,7,0)
data fields, changes to data entry screens, changes to reports used in 
"PKG",167,22,1,"PAH",1,1,8,0)
Surgery Risk Assessment management process and changes to the Surgery Risk
"PKG",167,22,1,"PAH",1,1,9,0)
Assessment transmissions.
"PKG",167,22,1,"PAH",1,1,10,0)
 
"PKG",167,22,1,"PAH",1,1,11,0)
Non-Cardiac Assessment Modifications
"PKG",167,22,1,"PAH",1,1,12,0)
------------------------------------
"PKG",167,22,1,"PAH",1,1,13,0)
 * Note: All fields named below are in the SURGERY file (#130) unless 
"PKG",167,22,1,"PAH",1,1,14,0)
         otherwise indicated.
"PKG",167,22,1,"PAH",1,1,15,0)
 
"PKG",167,22,1,"PAH",1,1,16,0)
- These updates include functionality for selecting cases for risk
"PKG",167,22,1,"PAH",1,1,17,0)
  assessment based upon case Current Procedural Terminology (CPT) codes,
"PKG",167,22,1,"PAH",1,1,18,0)
  replacing the use of the Major or Minor surgery definition.
"PKG",167,22,1,"PAH",1,1,19,0)
   o When selecting a case to be assessed, the software will check the 
"PKG",167,22,1,"PAH",1,1,20,0)
     case CPT codes and display an informational statement if no CPT codes
"PKG",167,22,1,"PAH",1,1,21,0)
     have been assigned to the case or if the case should be excluded from
"PKG",167,22,1,"PAH",1,1,22,0)
     assessment.
"PKG",167,22,1,"PAH",1,1,23,0)
   o A new report called "List of Eligible Cases" is added to the reports 
"PKG",167,22,1,"PAH",1,1,24,0)
     contained in the List of Surgery Risk Assessments [SROA ASSESSMENT 
"PKG",167,22,1,"PAH",1,1,25,0)
     LIST] option.
"PKG",167,22,1,"PAH",1,1,26,0)
   o The MAJOR/MINOR field (#.03) is removed from NSQIP input options and 
"PKG",167,22,1,"PAH",1,1,27,0)
     from the Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT] 
"PKG",167,22,1,"PAH",1,1,28,0)
     option.
"PKG",167,22,1,"PAH",1,1,29,0)
 
"PKG",167,22,1,"PAH",1,1,30,0)
- A new field called INTRAOPERATIVE ASCITES (#446) is created:
"PKG",167,22,1,"PAH",1,1,31,0)
   o Added to the Operation Information (Enter/Edit) [SROA OPERATION DATA]
"PKG",167,22,1,"PAH",1,1,32,0)
     option
"PKG",167,22,1,"PAH",1,1,33,0)
   o Added to the Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT] 
"PKG",167,22,1,"PAH",1,1,34,0)
     option
"PKG",167,22,1,"PAH",1,1,35,0)
   o Added to data set transmitted to the national database
"PKG",167,22,1,"PAH",1,1,36,0)
 
"PKG",167,22,1,"PAH",1,1,37,0)
- A new field called CLOSTRIDIUM DIFFICILE COLITIS (#447) is created:
"PKG",167,22,1,"PAH",1,1,38,0)
   o Added to the Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT] 
"PKG",167,22,1,"PAH",1,1,39,0)
     option
"PKG",167,22,1,"PAH",1,1,40,0)
   o Added to the PERIOPERATIVE OCCURRENCE CATEGORIES section of the 
"PKG",167,22,1,"PAH",1,1,41,0)
     Surgery Quarterly Report
"PKG",167,22,1,"PAH",1,1,42,0)
   o CLOSTRIDIUM DIFFICILE COLITIS is added as a new occurrence category 
"PKG",167,22,1,"PAH",1,1,43,0)
     to the PERIOPERATIVE OCCURRENCE CATEGORY file (#136.5)
"PKG",167,22,1,"PAH",1,1,44,0)
 
"PKG",167,22,1,"PAH",1,1,45,0)
- The description is updated and/or other data dictionary changes are made
"PKG",167,22,1,"PAH",1,1,46,0)
  for the following items:
"PKG",167,22,1,"PAH",1,1,47,0)
   o SURGERY SPECIALTY field (#.04)
"PKG",167,22,1,"PAH",1,1,48,0)
   o WOUND CLASSIFICATION field (#1.09)
"PKG",167,22,1,"PAH",1,1,49,0)
   o REASON FOR NO ASSESSMENT field (#102)
"PKG",167,22,1,"PAH",1,1,50,0)
   o HISTORY OF COPD field (#203)
"PKG",167,22,1,"PAH",1,1,51,0)
   o WEIGHT LOSS > 10% field (#215)
"PKG",167,22,1,"PAH",1,1,52,0)
   o BLEEDING DISORDERS field (#216)
"PKG",167,22,1,"PAH",1,1,53,0)
   o OPEN WOUND field (#218)
"PKG",167,22,1,"PAH",1,1,54,0)
   o PREOPERATIVE SEPSIS field (#218.1)
"PKG",167,22,1,"PAH",1,1,55,0)
   o PREVIOUS PCI field (#220)
"PKG",167,22,1,"PAH",1,1,56,0)
   o SYSTEMIC SEPSIS field (#250) and the SYSTEMIC SEPSIS occurrence 
"PKG",167,22,1,"PAH",1,1,57,0)
     category in the PERIOPERATIVE OCCURRENCE CATEGORY file (#136.5)
"PKG",167,22,1,"PAH",1,1,58,0)
   o PNEUMONIA field (#251) and the PNEUMONIA occurrence category in the 
"PKG",167,22,1,"PAH",1,1,59,0)
     PERIOPERATIVE OCCURRENCE CATEGORY file (#136.5)
"PKG",167,22,1,"PAH",1,1,60,0)
   o PULMONARY EMBOLISM field (#252) and the PULMONARY EMBOLISM occurrence
"PKG",167,22,1,"PAH",1,1,61,0)
     category in file (#136.5)
"PKG",167,22,1,"PAH",1,1,62,0)
   o ACUTE RENAL FAILURE field (#254) and the ACUTE RENAL FAILURE
"PKG",167,22,1,"PAH",1,1,63,0)
     occurrence category in file (#136.5)
"PKG",167,22,1,"PAH",1,1,64,0)
   o PREGNANCY field (#269)
"PKG",167,22,1,"PAH",1,1,65,0)
   o PERIPHERAL NERVE INJURY field (#287) and the PERIPHERAL NERVE INJURY 
"PKG",167,22,1,"PAH",1,1,66,0)
     occurrence category in the PERIOPERATIVE OCCURRENCE CATEGORY file 
"PKG",167,22,1,"PAH",1,1,67,0)
     (#136.5)
"PKG",167,22,1,"PAH",1,1,68,0)
   o DYSPNEA field (#325)
"PKG",167,22,1,"PAH",1,1,69,0)
   o CURRENT PNEUMONIA field (#326)
"PKG",167,22,1,"PAH",1,1,70,0)
   o REST PAIN/GANGRENE (Y/N) field (#330)
"PKG",167,22,1,"PAH",1,1,71,0)
   o CHEMOTHERAPY IN LAST 30 DAYS field (#338.1)
"PKG",167,22,1,"PAH",1,1,72,0)
   o QUADRIPLEGIA (Y/N) field (#398)
"PKG",167,22,1,"PAH",1,1,73,0)
   o TUMOR INVOLVING CNS (Y/N) field (#401)
"PKG",167,22,1,"PAH",1,1,74,0)
   o INTRAOP DISSEMINATED CANCER field (#443)
"PKG",167,22,1,"PAH",1,1,75,0)
   o DATE COMP NOTED field (#2, sub-file #130.22)
"PKG",167,22,1,"PAH",1,1,76,0)
   o SEPSIS CATEGORY field (#7, sub-file #130.22)
"PKG",167,22,1,"PAH",1,1,77,0)
 
"PKG",167,22,1,"PAH",1,1,78,0)
- Hemoglobin A1c is added to the set of preoperative lab test results.
"PKG",167,22,1,"PAH",1,1,79,0)
 
"PKG",167,22,1,"PAH",1,1,80,0)
- This patch modifies all Lab fields under the Laboratory Test Results
"PKG",167,22,1,"PAH",1,1,81,0)
  (Enter/Edit) [SROA LAB] option to assume a past date if the user enters
"PKG",167,22,1,"PAH",1,1,82,0)
  a date without a year.
"PKG",167,22,1,"PAH",1,1,83,0)
 
"PKG",167,22,1,"PAH",1,1,84,0)
- The DATE OF DEATH field (#342) is modified to allow the entry of time as
"PKG",167,22,1,"PAH",1,1,85,0)
  well as date and is added to the Patient Demographics (Enter/Edit) [SROA
"PKG",167,22,1,"PAH",1,1,86,0)
  DEMOGRAPHICS] option.
"PKG",167,22,1,"PAH",1,1,87,0)
 
"PKG",167,22,1,"PAH",1,1,88,0)
- Airway Trauma, Mallampati Scale and Airway Index are removed from the
"PKG",167,22,1,"PAH",1,1,89,0)
  set of information collected and transmitted to NSQIP.
"PKG",167,22,1,"PAH",1,1,90,0)
 
"PKG",167,22,1,"PAH",1,1,91,0)
- The letter produced by the Print 30 Day Follow-up Letters [SROA REPRINT 
"PKG",167,22,1,"PAH",1,1,92,0)
  LETTERS] option is modified to display the date of operation and the 
"PKG",167,22,1,"PAH",1,1,93,0)
  local surgical specialty.
"PKG",167,22,1,"PAH",1,1,94,0)
 
"PKG",167,22,1,"PAH",1,1,95,0)
- The Monthly Surgical Case Workload Report [SROA MONTHLY WORKLOAD REPORT]
"PKG",167,22,1,"PAH",1,1,96,0)
  option is modified to replace references to major/minor with eligible or
"PKG",167,22,1,"PAH",1,1,97,0)
  excluded.
"PKG",167,22,1,"PAH",1,1,98,0)
 
"PKG",167,22,1,"PAH",1,1,99,0)
  
"PKG",167,22,1,"PAH",1,1,100,0)
Cardiac Risk Assessment Modifications
"PKG",167,22,1,"PAH",1,1,101,0)
-------------------------------------
"PKG",167,22,1,"PAH",1,1,102,0)
- The software is modified to expand the answer options of the PREOP
"PKG",167,22,1,"PAH",1,1,103,0)
  CIRCULATORY DEVICE field (#474) to include "ARTIFICIAL HEART" and to 
"PKG",167,22,1,"PAH",1,1,104,0)
  transmit "A" to CICSP for new raw value of this answer option.
"PKG",167,22,1,"PAH",1,1,105,0)
 
"PKG",167,22,1,"PAH",1,1,106,0)
- This patch modifies all Lab fields under the Laboratory Test Results
"PKG",167,22,1,"PAH",1,1,107,0)
  (Enter/Edit) [SROA LAB-CARDIAC] option to assume a past date if the user
"PKG",167,22,1,"PAH",1,1,108,0)
  enters a date without a year.
"PKG",167,22,1,"PAH",1,1,109,0)
 
"PKG",167,22,1,"PAH",1,1,110,0)
- Reinstitute the default functionality of the CARDIAC SURG PERFORMED 
"PKG",167,22,1,"PAH",1,1,111,0)
  NON-VA field (#472) in the SURGERY file (#130), so that it defaults to
"PKG",167,22,1,"PAH",1,1,112,0)
  "NO". 
"PKG",167,22,1,"PAH",1,1,113,0)
 
"PKG",167,22,1,"PAH",1,1,114,0)
- The description is updated and/or other data dictionary changes are made
"PKG",167,22,1,"PAH",1,1,115,0)
  for the following items:
"PKG",167,22,1,"PAH",1,1,116,0)
   o CONGESTIVE HEART FAILURE field (#207)
"PKG",167,22,1,"PAH",1,1,117,0)
   o ON VENTILATOR >48 HOURS field (#285)
"PKG",167,22,1,"PAH",1,1,118,0)
   o PERIOPERATIVE MI field (#385)
"PKG",167,22,1,"PAH",1,1,119,0)
   o PREOP CIRCULATORY DEVICE field (#474)
"PKG",167,22,1,"PAH",1,1,120,0)
   o AORTIC STENOSIS field (#477)
"PKG",167,22,1,"PAH",1,1,121,0)
 
"PKG",167,22,1,"PAH",1,1,122,0)
- Data Quality Queries
"PKG",167,22,1,"PAH",1,1,123,0)
  The data entry that does not meet the criteria is permitted, but would 
"PKG",167,22,1,"PAH",1,1,124,0)
  cause a warning message to check the data for accuracy.
"PKG",167,22,1,"PAH",1,1,125,0)
   o The D/T PATIENT EXTUBATED field (#470) should be later than the TIME
"PKG",167,22,1,"PAH",1,1,126,0)
     PAT OUT OR field (#.232).
"PKG",167,22,1,"PAH",1,1,127,0)
   o The D/T PATIENT EXTUBATED field (#470) should be earlier than the D/T
"PKG",167,22,1,"PAH",1,1,128,0)
     PATIENT DISCH FROM ICU field (#471).
"PKG",167,22,1,"PAH",1,1,129,0)
   o The D/T PATIENT DISCH FROM ICU field (#471) should be later than the
"PKG",167,22,1,"PAH",1,1,130,0)
     D/T PATIENT EXTUBATED field (#470).
"PKG",167,22,1,"PAH",1,1,131,0)
   o D/T PATIENT DISCH FROM ICU field (#471) be equal to or earlier than
"PKG",167,22,1,"PAH",1,1,132,0)
     the HOSPITAL DISCHARGE DATE field (#419).
"PKG",167,22,1,"PAH",1,1,133,0)
   o The SURGICAL PRIORITY, DATE field (#414.1) should be earlier than
"PKG",167,22,1,"PAH",1,1,134,0)
     the TIME PAT IN OR field (#.205).
"PKG",167,22,1,"PAH",1,1,135,0)
   o The ESTIMATE OF MORTALITY, DATE field (#364.1) should be earlier than
"PKG",167,22,1,"PAH",1,1,136,0)
     the TIME PAT IN OR field (#.205).
"PKG",167,22,1,"PAH",1,1,137,0)
   o If TOTAL CPB TIME field (#451) > 0, the CONVERT FROM OFF PUMP TO CPB
"PKG",167,22,1,"PAH",1,1,138,0)
     field (#469) should not be answered "NO, began off/stayed off".
"PKG",167,22,1,"PAH",1,1,139,0)
 
"PKG",167,22,1,"PAH",1,1,140,0)
 
"PKG",167,22,1,"PAH",1,1,141,0)
General Surgery Items
"PKG",167,22,1,"PAH",1,1,142,0)
---------------------
"PKG",167,22,1,"PAH",1,1,143,0)
- Remedy Ticket #HD0000000152814
"PKG",167,22,1,"PAH",1,1,144,0)
  This patch addresses two issues related to the Update Assessment Status
"PKG",167,22,1,"PAH",1,1,145,0)
  to 'COMPLETE' [SROA COMPLETE ASSESSMENT] option missing items list:
"PKG",167,22,1,"PAH",1,1,146,0)
  (1) For the NUM OF PRIOR HEART SURGERIES field (#352) in the SURGERY
"PKG",167,22,1,"PAH",1,1,147,0)
      file (#130), the field is corrected to display "Number of Prior
"PKG",167,22,1,"PAH",1,1,148,0)
      Heart Surgeries" instead of "Prior Heart Surgery (Y/N)".
"PKG",167,22,1,"PAH",1,1,149,0)
  (2) For the field "PRIOR HEART SURGERIES" field (#485) in the SURGERY 
"PKG",167,22,1,"PAH",1,1,150,0)
      file (#130), the data input functionality is modified to use the
"PKG",167,22,1,"PAH",1,1,151,0)
      same controlled data input functionality used by the Clinical
"PKG",167,22,1,"PAH",1,1,152,0)
      Information (Enter/Edit) [SROA CLINICAL INFORMATION] option. 
"PKG",167,22,1,"PAH",1,1,153,0)
 
"PKG",167,22,1,"PAH",1,1,154,0)
- Remedy Ticket #HD0000000177807
"PKG",167,22,1,"PAH",1,1,155,0)
  After installing this patch, if procedure and diagnosis coding is not
"PKG",167,22,1,"PAH",1,1,156,0)
  complete at the time the Update Assessment Status to 'COMPLETE' [SROA
"PKG",167,22,1,"PAH",1,1,157,0)
  COMPLETE ASSESSMENT] option is run, the software will display "The
"PKG",167,22,1,"PAH",1,1,158,0)
  coding for Procedure and Diagnosis is not complete" immediately before
"PKG",167,22,1,"PAH",1,1,159,0)
  asking, "Are you sure you want to complete this assessment ?".
"PKG",167,22,1,"PAH",1,1,160,0)
 
"PKG",167,22,1,"PAH",1,1,161,0)
- Remedy Ticket #HD0000000185045
"PKG",167,22,1,"PAH",1,1,162,0)
  When using the Outcome Information (Enter/Edit) [SROA CARDIAC-OUTCOMES] 
"PKG",167,22,1,"PAH",1,1,163,0)
  option to edit the OPERATIVE DEATH field (#384), entering YES or NO 
"PKG",167,22,1,"PAH",1,1,164,0)
  causes the NEW MECHANICAL CIRCULATORY field (#467) to be changed to the 
"PKG",167,22,1,"PAH",1,1,165,0)
  same value. Editing the NEW MECHANICAL CIRCULATORY field (#467) field 
"PKG",167,22,1,"PAH",1,1,166,0)
  does not change the OPERATIVE DEATH field (#384).
"PKG",167,22,1,"PAH",1,1,167,0)
 
"PKG",167,22,1,"PAH",1,1,168,0)
- Short LOCK Timeouts
"PKG",167,22,1,"PAH",1,1,169,0)
  This patch updates the 1 second LOCK timeouts in the routine SROUTL to 
"PKG",167,22,1,"PAH",1,1,170,0)
  use the VA FileMan variable DILOCKTM if it exists.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
76
"RTN","SR160UT0")
0^44^B38748414^n/a
"RTN","SR160UT0",1,0)
SR160UT0 ;BIR/ADM - SR*3*160 UTILITY, CONTINUED ;01/18/07
"RTN","SR160UT0",2,0)
 ;;3.0; Surgery ;**160**;24 Jun 93;Build 7
"RTN","SR160UT0",3,0)
 Q
"RTN","SR160UT0",4,0)
PEX F SRJ=0:1 S SRLIST=$P($T(LIST+SRJ),";;",2) Q:SRLIST=""  F SRI=1:1 S SRX=$P(SRLIST,",",SRI) Q:SRX=""  I $D(^ICPT("B",SRX)) D
"RTN","SR160UT0",5,0)
 .S SRY=0,SRY=$O(^ICPT("B",SRX,SRY)) Q:SRY=""
"RTN","SR160UT0",6,0)
 .K DA,DIC,DD,DO,DINUM S (DINUM,X)=SRY,DIC="^SRO(137,",DIC(0)="L" D FILE^DICN
"RTN","SR160UT0",7,0)
 Q
"RTN","SR160UT0",8,0)
LIST ;;36247,36248,36260,36261,36262,36299,36400,36405,36406,36410,36415,36416,36420,36425,36430
"RTN","SR160UT0",9,0)
 ;;36440,36450,36455,36460,36468,36469,36470,36471,36481,36488,36489,36490,36491,36493,36500
"RTN","SR160UT0",10,0)
 ;;36510,36511,36512,36513,36514,36515,36516,36520,36522,36530,36531,36532,36533,36534,36535
"RTN","SR160UT0",11,0)
 ;;36536,36537,36540,36550,36555,36556,36557,36558,36559,36560,36561,36563,36565,36566,36568
"RTN","SR160UT0",12,0)
 ;;36569,36570,36571,36575,36576,36577,36578,36580,36581,36582,36583,36584,36585,36589,36590
"RTN","SR160UT0",13,0)
 ;;36595,36596,36597,36600,36620,36625,36640,36660,36680,36800,36810,36815,36820,36821,36822
"RTN","SR160UT0",14,0)
 ;;36823,36825,36830,36831,36832,36833,36835,36870,37183,37195,37200,37205,37206,37207,37208
"RTN","SR160UT0",15,0)
 ;;37209,37215,37216,37250,37251,37501,37609,37620,37785,38200,38204,38205,38206,38207,38208
"RTN","SR160UT0",16,0)
 ;;38209,38210,38211,38212,38213,38214,38215,38221,38240,38241,38242,38500,38505,38510,38520
"RTN","SR160UT0",17,0)
 ;;38525,38530,38790,38792,38794,40490,40799,40806,40808,40831,41010,41015,41100,41105,41108
"RTN","SR160UT0",18,0)
 ;;41115,41250,41251,41252,41510,41520,41800,41805,41870,41872,41874,41877,41899,42000,42100
"RTN","SR160UT0",19,0)
 ;;42180,42182,42280,42281,42310,42400,42405,42600,42650,42660,42800,42802,42804,42806,42820
"RTN","SR160UT0",20,0)
 ;;42821,42825,42826,42830,42831,42835,42836,42860,42970,42971,43200,43201,43202,43204,43205
"RTN","SR160UT0",21,0)
 ;;43215,43216,43217,43219,43220,43226,43227,43228,43231,43232,43234,43235,43236,43237,43238
"RTN","SR160UT0",22,0)
 ;;43239,43240,43241,43242,43243,43244,43245,43246,43247,43248,43249,43250,43251,43255,43256
"RTN","SR160UT0",23,0)
 ;;43257,43258,43259,43260,43261,43262,43263,43264,43265,43267,43268,43269,43271,43272,43450
"RTN","SR160UT0",24,0)
 ;;43453,43456,43458,43460,43499,43600,43653,43750,43752,43760,43761,43830,44015,44100,44132
"RTN","SR160UT0",25,0)
 ;;44133,44135,44136,44137,44201,44300,44360,44361,44363,44364,44365,44366,44369,44370,44372
"RTN","SR160UT0",26,0)
 ;;44373,44376,44377,44378,44379,44380,44382,44383,44385,44386,44388,44389,44390,44391,44392
"RTN","SR160UT0",27,0)
 ;;44393,44394,44397,44500,44715,44720,44721,44901,45100,45300,45303,45305,45307,45308,45309
"RTN","SR160UT0",28,0)
 ;;45315,45317,45320,45321,45327,45330,45331,45332,45333,45334,45335,45337,45338,45339,45340
"RTN","SR160UT0",29,0)
 ;;45341,45342,45345,45355,45378,45379,45380,45381,45382,45383,45384,45385,45386,45387,45500
"RTN","SR160UT0",30,0)
 ;;45520,45900,45915,45990,46050,46070,46080,46083,46200,46210,46211,46220,46221,46230,46250
"RTN","SR160UT0",31,0)
 ;;46255,46257,46258,46260,46261,46262,46270,46275,46280,46285,46288,46320,46500,46505,46600
"RTN","SR160UT0",32,0)
 ;;46604,46606,46608,46610,46611,46612,46614,46615,46754,46900,46910,46916,46917,46922,46934
"RTN","SR160UT0",33,0)
 ;;46935,46936,46937,46938,46945,46946,47000,47011,47100,47133,47135,47136,47140,47141,47142
"RTN","SR160UT0",34,0)
 ;;47143,47144,47145,47146,47147,47490,47500,47505,47510,47511,47525,47530,47552,47553,47554
"RTN","SR160UT0",35,0)
 ;;47555,47556,47701,47801,48102,48400,48550,48551,48552,48554,48556,49041,49180,49320,49400
"RTN","SR160UT0",36,0)
 ;;49419,49420,49421,49422,49423,49424,49427,49428,49429,49491,49492,49495,49496,49500,49501
"RTN","SR160UT0",37,0)
 ;;50040,50080,50081,50200,50300,50320,50323,50325,50327,50328,50329,50390,50392,50393,50394
"RTN","SR160UT0",38,0)
 ;;50398,50547,50551,50553,50555,50557,50559,50561,50562,50570,50572,50574,50575,50576,50578
"RTN","SR160UT0",39,0)
 ;;50580,50590,50592,50600,50605,50684,50686,50688,50690,50951,50953,50955,50957,50959,50961
"RTN","SR160UT0",40,0)
 ;;50970,50972,50974,50976,50978,50980,51000,51005,51010,51600,51605,51610,51700,51701,51702
"RTN","SR160UT0",41,0)
 ;;51703,51705,51710,51715,51720,51725,51726,51736,51741,51772,51784,51785,51792,51795,51797
"RTN","SR160UT0",42,0)
 ;;51798,52000,52001,52005,52007,52010,52204,52214,52224,52250,52260,52265,52270,52275,52276
"RTN","SR160UT0",43,0)
 ;;52277,52281,52282,52283,52285,52290,52300,52301,52305,52310,52315,52317,52318,52327,52332
"RTN","SR160UT0",44,0)
 ;;52334,52335,52336,52337,52338,52339,52343,52351,52352,52353,52354,52355,53020,53025,53060
"RTN","SR160UT0",45,0)
 ;;53200,53270,53275,53600,53601,53620,53621,53660,53661,53670,53850,54000,54001,54055,54056
"RTN","SR160UT0",46,0)
 ;;54060,54100,54105,54150,54152,54160,54161,54162,54200,54230,54231,54235,54240,54250,54400
"RTN","SR160UT0",47,0)
 ;;54401,54402,54405,54406,54407,54408,54409,54410,54415,54416,54450,54500,54505,54510,54512
"RTN","SR160UT0",48,0)
 ;;54520,54530,54535,54700,54800,54820,54830,55000,55250,55300,55400,55500,55520,55559,55700
"RTN","SR160UT0",49,0)
 ;;55705,55859,55870,56300,56301,56302,56346,56347,56351,56360,56361,56362,56363,56605,56606
"RTN","SR160UT0",50,0)
 ;;56700,56820,57020,57022,57023,57100,57105,57150,57160,57170,57180,57287,57410,57420,57421
"RTN","SR160UT0",51,0)
 ;;57452,57454,57456,57500,57510,57511,57513,57520,57700,58100,58300,58301,58321,58322,58323
"RTN","SR160UT0",52,0)
 ;;58340,58345,58346,58353,58545,58546,58550,58551,58553,58555,58558,58559,58560,58561,58562
"RTN","SR160UT0",53,0)
 ;;58563,58660,58661,58662,58670,58671,58672,58673,58679,58823,58900,58970,58974,58976,59000
"RTN","SR160UT0",54,0)
 ;;59001,59012,59015,59020,59025,59030,59050,59051,59070,59072,59074,59076,59100,59160,59200
"RTN","SR160UT0",55,0)
 ;;59300,59320,59325,59400,59409,59410,59412,59414,59425,59426,59430,59510,59514,59515,59525
"RTN","SR160UT0",56,0)
 ;;59561,59610,59612,59614,59618,59840,59841,59850,59851,59852,59855,59856,59857,59866,59870
"RTN","SR160UT0",57,0)
 ;;59871,59897,59899,60001,60100,61001,61026,61050,61055,61070,61140,61623,61720,61735,61770
"RTN","SR160UT0",58,0)
 ;;61790,61791,61793,61868,62140,62141,62142,62143,62146,62147,62163,62201,62223,62252,62263
"RTN","SR160UT0",59,0)
 ;;62264,62268,62269,62270,62272,62273,62274,62275,62276,62277,62278,62279,62280,62281,62282
"RTN","SR160UT0",60,0)
 ;;62284,62286,62287,62288,62289,62290,62291,62292,62294,62310,62311,62318,62319,62355,62367
"RTN","SR160UT0",61,0)
 ;;63600,63610,63615,63650,64400,64402,64405,64408,64410,64412,64413,64415,64416,64417,64418
"RTN","SR160UT0",62,0)
 ;;64420,64421,64425,64430,64435,64445,64446,64447,64448,64449,64450,64470,64472,64475,64476
"RTN","SR160UT0",63,0)
 ;;64479,64480,64483,64484,64505,64508,64510,64517,64520,64530,64550,64553,64555,64560,64561
"RTN","SR160UT0",64,0)
 ;;64565,64577,64580,64600,64605,64610,64612,64613,64614,64620,64622,64623,64626,64627,64630
"RTN","SR160UT0",65,0)
 ;;64640,64680,64681,64716,64718,64719,64721,64732,64734,64736,64738,64740,64742,64744,64746
"RTN","SR160UT0",66,0)
 ;;64752,64755,64760,64761,64763,64766,64771,64772,64774,64776,64778,64782,64783,64784,64786
"RTN","SR160UT0",67,0)
 ;;64787,64788,64790,64792,64795,64820,64822,64823,64999,65091,65093,65101,65103,65105,65110
"RTN","SR160UT0",68,0)
 ;;65112,65114,65125,65130,65135,65140,65150,65155,65175,65205,65210,65220,65222,65235,65260
"RTN","SR160UT0",69,0)
 ;;65265,65270,65272,65273,65275,65280,65285,65286,65290,65400,65410,65420,65426,65430,65435
"RTN","SR160UT0",70,0)
 ;;65436,65450,65600,65710,65730,65750,65755,65760,65765,65767,65770,65771,65772,65775,65800
"RTN","SR160UT0",71,0)
 ;;65805,65810,65815,65820,65850,65855,65860,65865,65870,65875,65880,65900,65920,65930,66020
"RTN","SR160UT0",72,0)
 ;;66030,66130,66150,66155,66160,66165,66170,66172,66180,66185,66220,66225,66250,66500,66505
"RTN","SR160UT0",73,0)
 ;;66600,66605,66625,66630,66635,66680,66682,66700,66710,66720,66740,66761,66762,66770,66820
"RTN","SR160UT0",74,0)
 ;;66821,66825,66830,66840,66850,66852,66920,66930,66940,66982,66983,66984,66985,66986,66990
"RTN","SR160UT0",75,0)
 ;;66999,67005,67010,67015,67025,67027,67028,67030,67031,67036,67038,67039,67040,67101,67105
"RTN","SR160UT0",76,0)
 ;;67107,67108,67109,67110,67112,67115,67120,67121,67141,67145,67208,67210,67218,67220,67221
"RTN","SR160UT0",77,0)
 ;;67225,67227,67228,67250,67255,67299,67311,67312,67314,67316,67318,67320,67331,67332,67334
"RTN","SR160UT0",78,0)
 ;;67335,67340,67343,67345,67350,67399,67400,67405,67412,67413,67414,67415,67420,67430,67440
"RTN","SR160UT0",79,0)
 ;;67445,67450,67500,67505,67515,67550,67560,67570,67599,67700,67710,67715,67800,67801,67805
"RTN","SR160UT0",80,0)
 ;;67808,67810,67820,67825,67830,67835,67840,67850,67875,67880,67882,67900,67901,67902,67903
"RTN","SR160UT0",81,0)
 ;;67904,67906,67908,67909,67911,67912,67914,67915,67916,67917,67921,67922,67923,67924,67930
"RTN","SR160UT0",82,0)
 ;;67935,67938,67950,67961,67966,67971,67973,67974,67975,67999,68020,68040,68100,68110,68115
"RTN","SR160UT0",83,0)
 ;;68130,68135,68200,68320,68325,68326,68328,68330,68335,68340,68360,68362,68371,68399,68400
"RTN","SR160UT0",84,0)
 ;;68420,68440,68500,68505,68510,68520,68525,68530,68540,68550,68700,68705,68720,68745,68750
"RTN","SR160UT0",85,0)
 ;;68760,68761,68770,68800,68801,68810,68811,68815,68820,68825,68830,68840,68850,68899,69000
"RTN","SR160UT0",86,0)
 ;;69005,69020,69090,69100,69105,69110,69120,69140,69145,69150,69155,69200,69205,69210,69220
"RTN","SR160UT0",87,0)
 ;;69222,69300,69310,69320,69399,69400,69401,69405,69410,69420,69421,69424,69433,69436,69440
"RTN","SR160UT0",88,0)
 ;;69450,69501,69502,69505,69511,69530,69535,69540,69550,69552,69554,69601,69602,69603,69604
"RTN","SR160UT0",89,0)
 ;;69605,69610,69620,69631,69632,69633,69635,69636,69637,69641,69642,69643,69644,69645,69646
"RTN","SR160UT0",90,0)
 ;;69650,69660,69661,69662,69666,69667,69670,69676,69700,69710,69711,69720,69725,69740,69745
"RTN","SR160UT0",91,0)
 ;;69799,69801,69802,69805,69806,69820,69840,69905,69910,69915,69930,69949,69950,69955,69960
"RTN","SR160UT0",92,0)
 ;;69970,69979
"RTN","SR160UT2")
0^^B327622^n/a
"RTN","SR160UT2",1,0)
SR160UT2 ;BIR/ADM - PATCH SR*3*160 PRE-INSTALL ACTION ;03/6/07
"RTN","SR160UT2",2,0)
 ;;3.0; Surgery ;**160**;24 Jun 93;Build 7
"RTN","SR160UT2",3,0)
PRE ;pre-install action for SR*3*160
"RTN","SR160UT2",4,0)
 ; delete data from file 136.5  and re-initialize file
"RTN","SR160UT2",5,0)
 K ^SRO(136.5) S ^SRO(136.5,0)="PERIOPERATIVE OCCURRENCE CATEGORY^136.5I^^"
"RTN","SR160UT2",6,0)
 ;delete DD for modified fields #102, #269, #414 and #364
"RTN","SR160UT2",7,0)
 F DA=102,269,414,364 S DIK="^DD(130,",DA(1)=130 D ^DIK
"RTN","SR160UT2",8,0)
 Q
"RTN","SR160UTL")
0^^B46389851^n/a
"RTN","SR160UTL",1,0)
SR160UTL ;BIR/ADM - EXCLUSION UTILITY ;03/06/07
"RTN","SR160UTL",2,0)
 ;;3.0; Surgery ;**160**;24 Jun 93;Build 7
"RTN","SR160UTL",3,0)
 Q
"RTN","SR160UTL",4,0)
POST ;post-install action for SR*3*160
"RTN","SR160UTL",5,0)
 ; field 269: convert P1,P2,P3 & PU to Y; convert U to NO
"RTN","SR160UTL",6,0)
 D MES^XPDUTL("  Converting existing data in PREGNANCY field (#269)...")
"RTN","SR160UTL",7,0)
 N SRPREG S SRTN=0 F  S SRTN=$O(^SRF(SRTN)) Q:'SRTN  S SRPREG=$P($G(^SRF(SRTN,200.1)),"^",3) I SRPREG'="" D
"RTN","SR160UTL",8,0)
 .I SRPREG["P" S $P(^SRF(SRTN,200.1),"^",3)="Y" Q
"RTN","SR160UTL",9,0)
 .I SRPREG="U" S $P(^SRF(SRTN,200.1),"^",3)="NO"
"RTN","SR160UTL",10,0)
PEX ; populate file 137
"RTN","SR160UTL",11,0)
 N SRI,SRJ,SRL,SRLIST,SRX,SRY
"RTN","SR160UTL",12,0)
 D MES^XPDUTL("  Populating CPT EXCLUSIONS file...")
"RTN","SR160UTL",13,0)
 K ^SRO(137) S ^SRO(137,0)="CPT EXCLUSIONS^137P^^"
"RTN","SR160UTL",14,0)
 F SRJ=0:1 S SRLIST=$P($T(LIST+SRJ),";;",2) Q:SRLIST=""  F SRI=1:1 S SRX=$P(SRLIST,",",SRI) Q:SRX=""  I $D(^ICPT("B",SRX)) D
"RTN","SR160UTL",15,0)
 .S SRY=0,SRY=$O(^ICPT("B",SRX,SRY)) Q:SRY=""
"RTN","SR160UTL",16,0)
 .K DA,DIC,DD,DO,DINUM S (DINUM,X)=SRY,DIC="^SRO(137,",DIC(0)="L" D FILE^DICN
"RTN","SR160UTL",17,0)
 D PEX^SR160UT0
"RTN","SR160UTL",18,0)
 F SRY=100:1:1999 S SRC="00"_SRY,SRX=$E(SRC,$L(SRC)-4,$L(SRC)) D POP
"RTN","SR160UTL",19,0)
R1 F SRY=70000:1:79999 S SRX=SRY D POP
"RTN","SR160UTL",20,0)
 F SRY=80048:1:89399 S SRX=SRY D POP
"RTN","SR160UTL",21,0)
 F SRY=90000:1:99999 S SRX=SRY D POP
"RTN","SR160UTL",22,0)
POP1 S SRX="A" F  S SRX=$O(^ICPT("B",SRX)) Q:SRX=""  S SRY=0,SRY=$O(^ICPT("B",SRX,SRY)) D
"RTN","SR160UTL",23,0)
 .K DA,DIC,DD,DO,DINUM S (DINUM,X)=SRY,DIC="^SRO(137,",DIC(0)="L" D FILE^DICN
"RTN","SR160UTL",24,0)
 K DA,DIC,DD,DO,DINUM
"RTN","SR160UTL",25,0)
 Q
"RTN","SR160UTL",26,0)
POP I $D(^ICPT("B",SRX)) D
"RTN","SR160UTL",27,0)
 .K DA,DIC,DD,DO,DINUM S (DINUM,X)=SRY,DIC="^SRO(137,",DIC(0)="L" D FILE^DICN
"RTN","SR160UTL",28,0)
 Q
"RTN","SR160UTL",29,0)
LIST ;;0003T,0008T,0012T,0013T,0014T,0016T,0017T,0018T,0019T,0020T,0021T,0023T,0024T,0026T,0027T
"RTN","SR160UTL",30,0)
 ;;0028T,0029T,0030T,0031T,0032T,0041T,0042T,0043T,0044T,0045T,0046T,0047T,0048T,0049T,0050T
"RTN","SR160UTL",31,0)
 ;;0051T,0052T,0053T,0054T,0055T,0056T,0058T,0059T,0060T,0061T,0064T,0065T,0066T,0067T,0068T
"RTN","SR160UTL",32,0)
 ;;0069T,0070T,0071T,0072T,0073T,0074T,0082T,0083T,0085T,0086T,0087T,0088T,0089T,0103T,0104T
"RTN","SR160UTL",33,0)
 ;;0105T,0106T,0107T,0108T,0109T,0110T,0111T,0115T,0116T,0117T,0120T,0126T,0130T,0133T,0137T
"RTN","SR160UTL",34,0)
 ;;0140T,10021,10022,10040,10060,10061,10080,10081,10120,11000,11010,11011,11012,11040,11041
"RTN","SR160UTL",35,0)
 ;;11042,11043,11044,11055,11056,11057,11100,11101,11200,11201,11300,11301,11302,11303,11305
"RTN","SR160UTL",36,0)
 ;;11306,11307,11308,11310,11311,11312,11313,11400,11401,11402,11403,11404,11406,11420,11421
"RTN","SR160UTL",37,0)
 ;;11422,11423,11424,11426,11440,11441,11442,11443,11444,11446,11450,11451,11462,11463,11470
"RTN","SR160UTL",38,0)
 ;;11471,11600,11601,11602,11603,11604,11606,11620,11621,11622,11623,11624,11626,11640,11641
"RTN","SR160UTL",39,0)
 ;;11642,11643,11644,11646,11719,11720,11721,11730,11732,11740,11750,11752,11755,11760,11762
"RTN","SR160UTL",40,0)
 ;;11765,11770,11771,11772,11900,11901,11920,11921,11922,11950,11951,11952,11954,11970,11971
"RTN","SR160UTL",41,0)
 ;;11975,11976,11977,11980,11981,11982,11983,12001,12002,12004,12005,12006,12007,12011,12013
"RTN","SR160UTL",42,0)
 ;;12014,12015,12016,12017,12018,12020,12021,12031,12032,12034,12035,12036,12037,12041,12042
"RTN","SR160UTL",43,0)
 ;;12044,12045,12046,12047,12051,12052,12053,12054,12055,12056,12057,13100,13101,13102,13120
"RTN","SR160UTL",44,0)
 ;;13121,13122,13131,13132,13133,13150,13151,13152,13153,13160,14000,14001,14020,14021,14040
"RTN","SR160UTL",45,0)
 ;;14041,14060,14061,14300,14350,15000,15001,15050,15100,15101,15120,15121,15130,15131,15135
"RTN","SR160UTL",46,0)
 ;;15136,15152,15157,15170,15171,15175,15176,15241,15260,15342,15343,15760,15775,15776,15780
"RTN","SR160UTL",47,0)
 ;;15781,15782,15783,15786,15787,15788,15789,15792,15793,15810,15811,15820,15821,15822,15823
"RTN","SR160UTL",48,0)
 ;;15824,15825,15826,15828,15829,15831,15832,15833,15834,15835,15836,15837,15838,15839,15850
"RTN","SR160UTL",49,0)
 ;;15851,15852,15860,16000,16015,16020,16025,16030,16035,16036,17000,17003,17110,17250,17260
"RTN","SR160UTL",50,0)
 ;;17261,17262,17263,17264,17266,17270,17271,17272,17273,17274,17280,17281,17282,17283,17284
"RTN","SR160UTL",51,0)
 ;;17286,17304,17305,17306,17307,17310,17340,17360,17380,17999,19000,19001,19030,19100,19101
"RTN","SR160UTL",52,0)
 ;;19102,19103,19112,19290,19291,19295,20200,20205,20206,20220,20225,20240,20245,20250,20251
"RTN","SR160UTL",53,0)
 ;;20500,20501,20520,20525,20526,20550,20551,20552,20553,20600,20605,20610,20661,20662,20663
"RTN","SR160UTL",54,0)
 ;;20664,20665,20670,20680,20694,20822,20912,20924,20950,20957,20969,20970,20971,20972,20973
"RTN","SR160UTL",55,0)
 ;;20974,20979,20982,21030,21031,21032,21076,21077,21079,21080,21081,21082,21083,21084,21085
"RTN","SR160UTL",56,0)
 ;;21086,21087,21088,21089,21116,21210,21300,21310,21315,21320,21325,21330,21335,21336,21337
"RTN","SR160UTL",57,0)
 ;;21338,21339,21340,21345,21400,21401,21421,21431,21440,21450,21451,21452,21453,21480,21485
"RTN","SR160UTL",58,0)
 ;;21497,21550,21800,21820,21920,21925,21930,22305,22310,22315,22505,22520,22521,22522,23065
"RTN","SR160UTL",59,0)
 ;;23066,23100,23330,23331,23350,23500,23505,23520,23525,23540,23545,23570,23575,23600,23605
"RTN","SR160UTL",60,0)
 ;;23620,23625,23650,23655,23665,23675,23700,23930,23931,24065,24066,24100,24101,24147,24160
"RTN","SR160UTL",61,0)
 ;;24164,24200,24220,24300,24343,24470,24500,24505,24530,24535,24560,24565,24576,24577,24600
"RTN","SR160UTL",62,0)
 ;;24605,24620,24640,24650,24655,24670,24675,25028,25031,25065,25066,25075,25100,25246,25250
"RTN","SR160UTL",63,0)
 ;;25251,25259,25500,25505,25520,25530,25535,25560,25565,25600,25605,25622,25624,25630,25635
"RTN","SR160UTL",64,0)
 ;;25650,25651,25660,25671,25675,25680,25690,25800,25805,25810,25820,25825,25830,26010,26011
"RTN","SR160UTL",65,0)
 ;;26020,26025,26030,26034,26035,26037,26040,26045,26055,26060,26070,26075,26080,26100,26105
"RTN","SR160UTL",66,0)
 ;;26110,26115,26140,26160,26200,26210,26262,26320,26340,26416,26432,26508,26516,26517,26518
"RTN","SR160UTL",67,0)
 ;;26600,26605,26607,26608,26641,26645,26670,26675,26700,26705,26720,26725,26740,26742,26750
"RTN","SR160UTL",68,0)
 ;;26755,26756,26770,26775,26820,26841,26842,26843,26844,26850,26852,26860,26861,26862,26863
"RTN","SR160UTL",69,0)
 ;;26910,26951,27003,27040,27041,27050,27052,27065,27090,27091,27093,27095,27096,27175,27178
"RTN","SR160UTL",70,0)
 ;;27193,27194,27200,27216,27220,27222,27230,27232,27238,27240,27246,27250,27252,27256,27257
"RTN","SR160UTL",71,0)
 ;;27265,27266,27275,27306,27323,27324,27330,27370,27500,27501,27502,27503,27508,27510,27516
"RTN","SR160UTL",72,0)
 ;;27517,27520,27530,27532,27538,27550,27552,27560,27562,27570,27613,27614,27648,27690,27691
"RTN","SR160UTL",73,0)
 ;;27704,27750,27752,27760,27762,27780,27781,27786,27788,27808,27810,27816,27818,27824,27825
"RTN","SR160UTL",74,0)
 ;;27830,27831,27840,27842,27860,27870,27871,28001,28005,28008,28010,28011,28020,28022,28024
"RTN","SR160UTL",75,0)
 ;;28030,28035,28043,28045,28046,28050,28052,28054,28060,28062,28070,28072,28080,28086,28088
"RTN","SR160UTL",76,0)
 ;;28090,28092,28100,28102,28103,28104,28106,28107,28108,28110,28111,28112,28113,28114,28116
"RTN","SR160UTL",77,0)
 ;;28118,28119,28120,28122,28124,28126,28130,28140,28150,28153,28160,28171,28173,28175,28190
"RTN","SR160UTL",78,0)
 ;;28192,28193,28200,28202,28208,28210,28220,28222,28225,28226,28230,28232,28234,28236,28238
"RTN","SR160UTL",79,0)
 ;;28240,28250,28260,28261,28262,28264,28270,28272,28280,28285,28286,28288,28289,28290,28292
"RTN","SR160UTL",80,0)
 ;;28293,28294,28296,28297,28298,28299,28300,28302,28304,28305,28306,28307,28308,28309,28310
"RTN","SR160UTL",81,0)
 ;;28312,28313,28315,28320,28322,28340,28341,28344,28345,28360,28400,28405,28406,28415,28430
"RTN","SR160UTL",82,0)
 ;;28435,28436,28450,28455,28456,28465,28470,28475,28476,28485,28490,28495,28496,28505,28510
"RTN","SR160UTL",83,0)
 ;;28515,28525,28530,28531,28540,28545,28546,28555,28570,28575,28576,28585,28600,28605,28606
"RTN","SR160UTL",84,0)
 ;;28615,28630,28635,28636,28645,28660,28665,28666,28675,28705,28715,28725,28730,28735,28737
"RTN","SR160UTL",85,0)
 ;;28740,28750,28755,28760,28810,28820,28825,28890,28899,29000,29010,29015,29020,29025,29035
"RTN","SR160UTL",86,0)
 ;;29040,29044,29046,29049,29055,29058,29065,29075,29085,29086,29105,29125,29126,29130,29131
"RTN","SR160UTL",87,0)
 ;;29200,29220,29240,29260,29280,29305,29325,29345,29355,29358,29365,29405,29425,29435,29440
"RTN","SR160UTL",88,0)
 ;;29445,29450,29505,29515,29520,29530,29540,29550,29580,29590,29700,29705,29710,29715,29720
"RTN","SR160UTL",89,0)
 ;;29730,29740,29750,29799,29800,29804,29805,29815,29830,29836,29840,29843,29845,29848,29856
"RTN","SR160UTL",90,0)
 ;;29860,29863,29870,29900,29901,29902,30000,30020,30100,30110,30115,30117,30118,30120,30124
"RTN","SR160UTL",91,0)
 ;;30125,30130,30140,30150,30160,30200,30210,30220,30300,30320,30400,30410,30420,30430,30435
"RTN","SR160UTL",92,0)
 ;;30450,30460,30462,30520,30540,30545,30560,30580,30600,30620,30630,30801,30802,30901,30903
"RTN","SR160UTL",93,0)
 ;;30905,30906,30915,30920,30930,30999,31000,31002,31020,31030,31032,31040,31050,31051,31070
"RTN","SR160UTL",94,0)
 ;;31075,31080,31081,31084,31085,31086,31087,31090,31200,31201,31205,31225,31230,31231,31233
"RTN","SR160UTL",95,0)
 ;;31235,31237,31238,31239,31240,31254,31255,31256,31267,31276,31287,31288,31290,31291,31292
"RTN","SR160UTL",96,0)
 ;;31293,31294,31299,31500,31502,31505,31510,31511,31512,31513,31515,31520,31525,31526,31527
"RTN","SR160UTL",97,0)
 ;;31528,31529,31530,31531,31535,31536,31540,31541,31545,31546,31560,31561,31570,31571,31575
"RTN","SR160UTL",98,0)
 ;;31576,31577,31578,31579,31582,31584,31585,31586,31588,31600,31601,31603,31605,31610,31612
"RTN","SR160UTL",99,0)
 ;;31613,31615,31622,31623,31624,31625,31628,31629,31630,31631,31632,31633,31635,31640,31641
"RTN","SR160UTL",100,0)
 ;;31643,31645,31646,31656,31700,31708,31710,31715,31717,31720,31725,31730,31830,32000,32002
"RTN","SR160UTL",101,0)
 ;;32020,32400,32405,32420,32601,32602,32603,32604,32605,32606,32850,32855,32856,32960,33200
"RTN","SR160UTL",102,0)
 ;;33201,33206,33207,33208,33210,33211,33212,33213,33214,33215,33216,33217,33218,33220,33222
"RTN","SR160UTL",103,0)
 ;;33223,33224,33225,33226,33233,33234,33235,33236,33237,33238,33240,33241,33243,33244,33245
"RTN","SR160UTL",104,0)
 ;;33246,33249,33282,33284,33420,33470,33471,33930,33933,33935,33940,33944,33945,33960,33961
"RTN","SR160UTL",105,0)
 ;;33967,33968,33970,33971,33973,33974,33975,33976,33977,33978,33979,33980,35400,35450,35452
"RTN","SR160UTL",106,0)
 ;;35454,35456,35458,35459,35460,35470,35471,35472,35473,35474,35475,35476,35480,35481,35482
"RTN","SR160UTL",107,0)
 ;;35483,35484,35485,35490,35491,35492,35493,35494,35495,36000,36002,36005,36010,36011,36012
"RTN","SR160UTL",108,0)
 ;;36013,36014,36015,36100,36120,36140,36145,36160,36200,36215,36216,36217,36218,36245,36246
"RTN","SRO1L1")
0^66^B14121011^B13673029
"RTN","SRO1L1",1,0)
SRO1L1 ;BIR/ADM - UPDATE 1-LINER CASE, CONTINUED ;02/14/07
"RTN","SRO1L1",2,0)
 ;;3.0; Surgery ;**86,88,100,129,142,153,160**;24 Jun 93;Build 7
"RTN","SRO1L1",3,0)
 S SRSOUT=0,SRSUPCPT=2 D NCODE^SROAUTL
"RTN","SRO1L1",4,0)
 N SRLCK,SRCSTAT S SRLCK=$$LOCK^SROUTL(SRTN) I 'SRLCK Q
"RTN","SRO1L1",5,0)
 D SRA^SROES
"RTN","SRO1L1",6,0)
EDIT S SRA=$G(^SRF(SRTN,"RA")) I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N",$P(SRA,"^",7)'="" D ^SROAEX,END Q
"RTN","SRO1L1",7,0)
 S SRCSTAT=">> Coding "_$S($P($G(^SRO(136,SRTN,10)),"^"):"",1:"Not ")_"Complete <<"
"RTN","SRO1L1",8,0)
 S SRR=0 D TSTAT,HDR^SROAUTL D TECH^SROPRIN
"RTN","SRO1L1",9,0)
 S X=$P(^SRF(SRTN,"OP"),"^",2) I X S Y=$P($$CPT^ICPTCOD(X),"^",2) D SSPRIN^SROCPT S SRCPT=Y
"RTN","SRO1L1",10,0)
 S SRQ=0,SRDR=".011;.04;.035;.166;1.09;1.13"
"RTN","SRO1L1",11,0)
 S SRAO(1)="In/Out-Patient Status^.011",SRAO(2)="Major or Minor^.03",SRAO(2)="Surgical Specialty^.04",SRAO(3)="Surgical Priority^.035",SRAO(4)="Attending Code^.166"
"RTN","SRO1L1",12,0)
 S SRAO(5)="ASA Class^1.13",SRAO(6)="Wound Classification^1.09",SRAO(7)="Anesthesia Technique^.37",SRAO(8)="CPT Codes (view only)^",SRAO(9)="Other Procedures^.42"
"RTN","SRO1L1",13,0)
 K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SRO1L1",14,0)
 S SRY(130,SRTN,.37,"E")=SRTECH,SRY(130,SRTN,.42,"E")=$S($O(^SRF(SRTN,13,0)):"***INFORMATION ENTERED***",1:"***NONE ENTERED***"),SRY(130,SRTN,27,"E")=SRCPT
"RTN","SRO1L1",15,0)
 F I=1:1:9 W !,$J(I,2)_". "_$P(SRAO(I),"^")_":" D
"RTN","SRO1L1",16,0)
 .I I=8 D PROC Q
"RTN","SRO1L1",17,0)
 .S SREXT(1)=SRY(130,SRTN,$P(SRAO(I),"^",2),"E") I $L(SREXT(1))>48 D
"RTN","SRO1L1",18,0)
 ..N I,J,X,Y S X=SREXT(1) F I=0:1:47 S J=48-I,Y=$E(X,J) I Y=" " S SREXT(1)=$E(X,1,J-1),SREXT(2)=$E(X,J+1,$L(X)) Q
"RTN","SRO1L1",19,0)
 .W ?32,SREXT(1) W:$D(SREXT(2)) !,?32,SREXT(2) K SREXT
"RTN","SRO1L1",20,0)
 W !! F I=1:1:80 W "-"
"RTN","SRO1L1",21,0)
 S SRX=9 D SEL
"RTN","SRO1L1",22,0)
 K DA,DIK S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SRO1L1",23,0)
 G:SRR=1 EDIT
"RTN","SRO1L1",24,0)
END D EXIT^SROES D:$G(SRLCK) UNLOCK^SROUTL(SRTN)
"RTN","SRO1L1",25,0)
 Q
"RTN","SRO1L1",26,0)
PROC N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0
"RTN","SRO1L1",27,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?32,SRPROC(I) W:I'=1 !,?32,SRPROC(I)
"RTN","SRO1L1",28,0)
 Q
"RTN","SRO1L1",29,0)
SEL W !!,"Select number of item to edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SRO1L1",30,0)
 Q:X=""  S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP S SRR=1 Q
"RTN","SRO1L1",31,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRX)!(Y>Z) D HELP S SRR=1 Q
"RTN","SRO1L1",32,0)
 I X="A" S X="1:"_SRX
"RTN","SRO1L1",33,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 Q
"RTN","SRO1L1",34,0)
 I $D(SRAO(X)) S EMILY=X W !! D ONE S SRR=1
"RTN","SRO1L1",35,0)
 Q
"RTN","SRO1L1",36,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit. Examples of proper"
"RTN","SRO1L1",37,0)
 W !,"responses are listed below.",!!,"1. Enter 'A' to update all items."
"RTN","SRO1L1",38,0)
 W !!,"2. Enter a number (1-"_SRX_") to update an individual item. (For example,"
"RTN","SRO1L1",39,0)
 W !,"   enter '1' to update "_$P(SRAO(1),"^")_")"
"RTN","SRO1L1",40,0)
 W !!,"3. Enter a range of numbers (1-"_SRX_") separated by a ':' to enter a range"
"RTN","SRO1L1",41,0)
 W !,"   of items. (For example, enter '1:4' to update items 1, 2, 3 and 4.)",!
"RTN","SRO1L1",42,0)
PRESS W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SRO1L1",43,0)
 Q
"RTN","SRO1L1",44,0)
RANGE ; range of numbers
"RTN","SRO1L1",45,0)
 S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SRO1L1",46,0)
 Q
"RTN","SRO1L1",47,0)
ONE ; edit one item
"RTN","SRO1L1",48,0)
 I EMILY=7 D UPANES Q
"RTN","SRO1L1",49,0)
 I EMILY=8 D DISP^SROAUTL0 Q
"RTN","SRO1L1",50,0)
 I EMILY=9 D ^SROTHER Q
"RTN","SRO1L1",51,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SRO1L1",52,0)
 Q
"RTN","SRO1L1",53,0)
UPANES K DR,DIE,DA S DA=SRTN,DR=.37,DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE K DR
"RTN","SRO1L1",54,0)
 Q
"RTN","SRO1L1",55,0)
TSTAT ; transmission status
"RTN","SRO1L1",56,0)
 N SR905 S SR905=$P($G(^SRF(SRTN,.4)),"^",2)
"RTN","SRO1L1",57,0)
 S SRHDR(.5)="Transmission Status: "_$S(SR905="T":"TRANSMITTED",SR905="R":"QUEUED TO TRANSMIT",1:"NOT QUEUED")
"RTN","SRO1L1",58,0)
 Q
"RTN","SROACL1")
0^1^B27042913^B26895969
"RTN","SROACL1",1,0)
SROACL1 ;BIR/MAM - CARDIAC PREOP CLINICAL DATA ;06/13/06
"RTN","SROACL1",2,0)
 ;;3.0; Surgery ;**38,71,95,125,153,160**;24 Jun 93;Build 7
"RTN","SROACL1",3,0)
 ;
"RTN","SROACL1",4,0)
 ; Reference to EN1^GMRVUT0 supported by DBIA #1446
"RTN","SROACL1",5,0)
 ;
"RTN","SROACL1",6,0)
 F I=0,200,202,205,206,206.1,208,209,200.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROACL1",7,0)
HT N SRSD,SRED S SRED=$P(SRA(0),"^",9)
"RTN","SROACL1",8,0)
 I $P(SRA(206),"^")="" S SRSD=$$FMADD^XLFDT(SRED,-365),NYUK=$$HW(SRSD,SRED,"HT") D
"RTN","SROACL1",9,0)
 .I NYUK'="" S NYUK=NYUK+.5\1,$P(^SRF(SRTN,206),"^")=NYUK,SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACL1",10,0)
 S NYUK=$P(SRA(206),"^") S:NYUK'="" NYUK=$S(NYUK["C"!(NYUK["c"):+NYUK_" cm",+NYUK=NYUK:+NYUK_" in",NYUK="NS":" NS",1:NYUK) S SRAO(1)=NYUK_"^236"
"RTN","SROACL1",11,0)
WT I $P(SRA(206),"^",2)="" S SRSD=$$FMADD^XLFDT(SRED,-30),NYUK=$$HW(SRSD,SRED,"WT") D
"RTN","SROACL1",12,0)
 .I NYUK'="" S NYUK=NYUK+.5\1,$P(^SRF(SRTN,206),"^",2)=NYUK,SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACL1",13,0)
 S NYUK=$P(SRA(206),"^",2) S:NYUK'="" NYUK=$S(NYUK["K"!(NYUK["k"):+NYUK_" kg",+NYUK=NYUK:+NYUK_" lb",NYUK="NS":" NS",1:NYUK) S SRAO(2)=NYUK_"^237"
"RTN","SROACL1",14,0)
 K SRA(0) S NYUK=$P(SRA(209),"^",3),SRAO(3)=$S(NYUK="N":"   NO",NYUK="D":"  DIET",NYUK="O":"  ORAL",NYUK="I":" INSULIN",1:"")_"^475",NYUK=$P(SRA(200),"^",11) D YN S SRAO(4)=SHEMP_"^203"
"RTN","SROACL1",15,0)
 S SRAO(5)=$P(SRA(206),"^",5)_"^347",NYUK=$P(SRA(206),"^",6) D YN S SRAO(6)=SHEMP_"^209",NYUK=$P(SRA(206),"^",7) D YN S SRAO(7)=SHEMP_"^348"
"RTN","SROACL1",16,0)
 S Y=$P(SRA(200.1),"^",5),C=$P(^DD(130,510,0),"^",2) D Y^DIQ S SRAO(8)=$S(Y["-":$E($P(Y,"-",2),1,19),1:$E(Y,1,19))_"^510"
"RTN","SROACL1",17,0)
 S NYUK=$P(SRA(206),"^",10) D YN S SRAO(9)=SHEMP_"^349"
"RTN","SROACL1",18,0)
 S NYUK=$P(SRA(206),"^",11) D YN S SRAO(10)=SHEMP_"^350",NYUK=$P(SRA(200),"^",8),SRAO(11)=$S(NYUK=1:"INDEPENDENT",NYUK=2:"PARTIAL DEPENDENT",NYUK=3:"TOTALLY DEPENDENT",NYUK="NS":"NO STUDY",1:"")_"^240"
"RTN","SROACL1",19,0)
 S NYUK=$P(SRA(206),"^",13),SRAO(12)=$S(NYUK=0:"NONE    ",NYUK=1:"NONE RECENT",NYUK=2:"12-72 HRS",NYUK=3:"<12 hrs  ",NYUK=12:"12 - 72 hrs",NYUK=72:">72 hrs - 7 days",NYUK=7:">7 days  ",NYUK="NS":"NO STUDY",1:"")_"^351"
"RTN","SROACL1",20,0)
 S NYUK=$P(SRA(206),"^",14),SRAO(13)=$S(NYUK=0:"NONE",NYUK=1:"< OR = 7 DAYS",NYUK=2:"> 7 DAYS",1:"")_"^205"
"RTN","SROACL1",21,0)
 S NYUK=$P(SRA(206),"^",15) S SRAO(14)=$S(NYUK=0:"NONE",NYUK=">":">3",NYUK="Y":"YES",NYUK="N":"NO",1:NYUK)_"^352"
"RTN","SROACL1",22,0)
 S SRAO(15)=$P(SRA(206),"^",42)_"^485"
"RTN","SROACL1",23,0)
 S NYUK=$P(SRA(206),"^",16) D YN S SRAO(16)=SHEMP_"^265",NYUK=$P(SRA(206),"^",17) D YN S SRAO(17)=SHEMP_"^264"
"RTN","SROACL1",24,0)
 S SRAO(18)=$P(SRA(206),"^",18)_"^267",SRAO(19)=$P(SRA(206),"^",19)_"^207",NYUK=$P(SRA(206),"^",20) D YN S SRAO(20)=SHEMP_"^353",NYUK=$P(SRA(206),"^",21) D YN S SRAO(21)=SHEMP_"^354"
"RTN","SROACL1",25,0)
 S NYUK=$P(SRA(206),"^",22) D YN S SRAO(22)=SHEMP_"^355"
"RTN","SROACL1",26,0)
 S NYUK=$P(SRA(209),"^",2),SRAO(23)=$S(NYUK="N":"NONE",NYUK="I":"IABP",NYUK="V":"VAD",NYUK="A":"ARTI",NYUK="O":"OTHER",1:"")_"^474"
"RTN","SROACL1",27,0)
 S NYUK=$P(SRA(206),"^",38) D YN S SRAO(24)=SHEMP_"^463"
"RTN","SROACL1",28,0)
DISP ; display fields
"RTN","SROACL1",29,0)
 S SRPAGE="PAGE: 1" D HDR^SROAUTL
"RTN","SROACL1",30,0)
 W !," 1. Height:",?29,$P(SRAO(1),"^"),?41,"13. Prior MI: ",$J($P(SRAO(13),"^"),24)
"RTN","SROACL1",31,0)
 W !," 2. Weight:",?29,$P(SRAO(2),"^"),?41,"14. Number prior heart surgeries: ",?70,$P(SRAO(14),"^")
"RTN","SROACL1",32,0)
 W !," 3. Diabetes:",?27,$P(SRAO(3),"^"),?41,"15. Prior heart surgeries:" D H485
"RTN","SROACL1",33,0)
 W !," 4. COPD:",?30,$P(SRAO(4),"^"),?41,"16. Peripheral Vascular Disease:",?75,$P(SRAO(16),"^")
"RTN","SROACL1",34,0)
 W !," 5. FEV1:",?($S($P(SRAO(5),"^")="NS":30,1:27)),$P(SRAO(5),"^")_$S($P(SRAO(5),"^")="":"",$P(SRAO(5),"^")="NS":"",1:" liters"),?41,"17. Cerebral Vascular Disease:",?75,$P(SRAO(17),"^")
"RTN","SROACL1",35,0)
 W !," 6. Cardiomegaly (X-ray):",?30,$P(SRAO(6),"^"),?41,"18. Angina (use CCS Class):",?75,$P(SRAO(18),"^")
"RTN","SROACL1",36,0)
 W !," 7. Pulmonary Rales:",?30,$P(SRAO(7),"^"),?41,"19. CHF (use NYHA Class):",?75,$P(SRAO(19),"^")
"RTN","SROACL1",37,0)
 W !," 8. Current Smoker: ",$J($P(SRAO(8),"^"),19),?41,"20. Current Diuretic Use:",?75,$P(SRAO(20),"^")
"RTN","SROACL1",38,0)
 W !," 9. Active Endocarditis:",?30,$P(SRAO(9),"^"),?41,"21. Current Digoxin Use:",?75,$P(SRAO(21),"^")
"RTN","SROACL1",39,0)
 W !,"10. Resting ST Depression:",?30,$P(SRAO(10),"^"),?41,"22. IV NTG within 48 Hours:",?75,$P(SRAO(22),"^")
"RTN","SROACL1",40,0)
 W !,"11. Functional Status: ",$J($P(SRAO(11),"^"),17),?41,"23. Preop circulatory Device:",?75,$P(SRAO(23),"^")
"RTN","SROACL1",41,0)
 W !,"12. PCI: ",$J($P(SRAO(12),"^"),29),?41,"24. Hypertension (Y/N):",?75,$P(SRAO(24),"^")
"RTN","SROACL1",42,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROACL1",43,0)
 Q
"RTN","SROACL1",44,0)
YN ; store answer
"RTN","SROACL1",45,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROACL1",46,0)
 Q
"RTN","SROACL1",47,0)
H485 S SHEMP="",X=$P(SRAO(15),"^") F I=1:1:$L(X,",") D
"RTN","SROACL1",48,0)
 .S C=$P(X,",",I) S:I>1 SHEMP=SHEMP_", " S SHEMP=SHEMP_$S(C=0:"NONE",C=1:"CABG-ONLY",C=2:"VALVE-ONLY",C=3:"CABG/VALVE",C=4:"OTHER",C=5:"CABG/OTHER",1:"")
"RTN","SROACL1",49,0)
 ;
"RTN","SROACL1",50,0)
 S X=SHEMP I $L(X)<12 W ?68,$J(X,11) Q
"RTN","SROACL1",51,0)
 W ?68,$J($P(X,",")_",",11) I $L($P(X,", ",2,9))<36 W !,?44,$P(X,", ",2,9) Q
"RTN","SROACL1",52,0)
 W !,?44,$P(X,", ",2,4)_",",!,?44,$P(X,", ",5,9)
"RTN","SROACL1",53,0)
 Q
"RTN","SROACL1",54,0)
HW(SRSD,SRED,SVTYPE) ; get weight & height from Vitals
"RTN","SROACL1",55,0)
 N GMRVSTR,SRTYPE,SRBCNT,SRBRDT,SRBIEN,SRBDATA,RESULTS
"RTN","SROACL1",56,0)
 K ^UTILITY($J,"GMRVD"),RESULTS S GMRVSTR=SVTYPE,GMRVSTR(0)=SRSD_"^"_SRED_"^^"
"RTN","SROACL1",57,0)
 D EN1^GMRVUT0 Q:'$D(^UTILITY($J,"GMRVD")) ""
"RTN","SROACL1",58,0)
 S SRTYPE="",SRBCNT=1 F  S SRTYPE=$O(^UTILITY($J,"GMRVD",SRTYPE)) Q:SRTYPE=""  D
"RTN","SROACL1",59,0)
 .S SRBRDT=0 F  S SRBRDT=$O(^UTILITY($J,"GMRVD",SRTYPE,SRBRDT)) Q:'SRBRDT  D
"RTN","SROACL1",60,0)
 ..S SRBIEN=0 F  S SRBIEN=$O(^UTILITY($J,"GMRVD",SRTYPE,SRBRDT,SRBIEN)) Q:'SRBIEN  D
"RTN","SROACL1",61,0)
 ...S SRBDATA=$G(^UTILITY($J,"GMRVD",SRTYPE,SRBRDT,SRBIEN))
"RTN","SROACL1",62,0)
 ...S RESULTS(SRTYPE,SRBRDT)=$P(SRBDATA,"^",1,2)_"^"_$P(SRBDATA,"^",8),SRBCNT=SRBCNT+1
"RTN","SROACL1",63,0)
 I $D(RESULTS(SVTYPE)) S SRI=$O(RESULTS(SVTYPE,0)) Q $P(RESULTS(SVTYPE,SRI),"^",3)
"RTN","SROACL1",64,0)
 Q ""
"RTN","SROACL2")
0^2^B3904594^B3434728
"RTN","SROACL2",1,0)
SROACL2 ;BIR/SJA - CLINICAL DATA ;05/17/04
"RTN","SROACL2",2,0)
 ;;3.0; Surgery ;**125,160**;24 Jun 93;Build 7
"RTN","SROACL2",3,0)
 D HDR^SROAUTL N SRQ
"RTN","SROACL2",4,0)
PRIOR W !,"Prior heart surgeries:"
"RTN","SROACL2",5,0)
 W !!,"0. None                      3. CABG/Valve",!,"1. CABG-only                 4. Other",!,"2. Valve-only                5. CABG/Other",!
"RTN","SROACL2",6,0)
 K DIR S DIR(0)="LOA^0:5",DIR("A")="Enter your choice(s) separated by commas  (0-5): ",DIR("B")=$S($D(SRAO(15)):$P(SRAO(15),"^"),1:"")
"RTN","SROACL2",7,0)
 S DIR("?")="Enter applicable types of heart surgery performed."
"RTN","SROACL2",8,0)
 S DIR("??")="^D H485^SROACL2" D ^DIR K DIR
"RTN","SROACL2",9,0)
 I X="@" S DIR("A")="     SURE YOU WANT TO DELETE ",DIR(0)="Y" D ^DIR K DIR S:Y X="@" Q
"RTN","SROACL2",10,0)
 I X=""!(Y["^")!($D(DIRUT)) Q
"RTN","SROACL2",11,0)
 D CHECK G:SRQ PRIOR
"RTN","SROACL2",12,0)
 Q
"RTN","SROACL2",13,0)
H485 N SRH D HELP^DIE(130,"",485,"A","SRH")
"RTN","SROACL2",14,0)
 I $G(SRH("DIHELP")) F I=1:1:SRH("DIHELP") W !,?2,SRH("DIHELP",I)
"RTN","SROACL2",15,0)
 Q
"RTN","SROACL2",16,0)
CHECK N I,C S SRQ=0
"RTN","SROACL2",17,0)
 I Y["0",(Y["1"!(Y["2")!(Y["3")!(Y["4")!(Y["5")) S SRQ=1 W !,"Do not enter NONE if prior heart surgeries were performed.",! Q
"RTN","SROACL2",18,0)
 F I=1:1:$L(Y,",") S C=$P(Y,",",I) Q:C=""  W !?43,C," - " D
"RTN","SROACL2",19,0)
 .I "012345"[C W $S(C=1:"CABG-only",C=2:"Valve-only",C=3:"CABG/Valve",C=4:"Other",C=0:"None",C=5:"CABG/Other",1:"") Q
"RTN","SROACL2",20,0)
 S (SRAO(15),Y)=$P(Y,",",1,$L(Y,",")-1)_"^485"
"RTN","SROACL2",21,0)
 Q
"RTN","SROACOM")
0^3^B21181819^B21753937
"RTN","SROACOM",1,0)
SROACOM ;BIR/MAM - COMPLETE ASSESSMENT ;02/08/07
"RTN","SROACOM",2,0)
 ;;3.0; Surgery ;**38,55,63,65,88,93,95,102,100,125,134,142,160**;24 Jun 93;Build 7
"RTN","SROACOM",3,0)
 I '$D(SRTN) Q
"RTN","SROACOM",4,0)
 S (SRSFLG,SRSOUT,SROVER)=0,SRA=$G(^SRF(SRTN,"RA")),Y=$P(SRA,"^") I Y'="I" W !!,"This assessment has a "_$S(Y="C":"'COMPLETE'",1:"'TRANSMITTED'")_" status.",!!,"No action taken." G END
"RTN","SROACOM",5,0)
 I $P(SRA,"^",2)="N",$P(SRA,"^",6)="Y" D CHK^SROAUTL
"RTN","SROACOM",6,0)
 I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N" D CHK^SROAUTL3
"RTN","SROACOM",7,0)
 I $P(SRA,"^",2)="C" D CHK^SROAUTLC
"RTN","SROACOM",8,0)
 S SRFLD="" I $O(SRX(SRFLD))'="" D LIST
"RTN","SROACOM",9,0)
 I $P(SRA,"^",2)="C" D CHCK G:SRSOUT END
"RTN","SROACOM",10,0)
YEP I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !!,?6,"The coding for Procedure and Diagnosis is not complete."
"RTN","SROACOM",11,0)
 W ! S SRFLD="" K DIR S DIR("A")="Are you sure you want to complete this assessment ? ",DIR("B")=$S($O(SRX(SRFLD)):"NO",1:"YES"),DIR(0)="YA"
"RTN","SROACOM",12,0)
 S DIR("?",1)="Enter YES to complete this assessment, or enter NO to leave the status",DIR("?")="unchanged." D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROACOM",13,0)
 I 'Y W !!,"No action taken." G END
"RTN","SROACOM",14,0)
 I $$LOCK^SROUTL(SRTN) D COMPLT Q
"RTN","SROACOM",15,0)
 E  W !!,"No action taken." G END
"RTN","SROACOM",16,0)
 Q
"RTN","SROACOM",17,0)
COMPLT W !!,"Updating the current status to 'COMPLETE'..." K DR,DIE S DA=SRTN,DIE=130,DR="235///C" D ^DIE K STATUS
"RTN","SROACOM",18,0)
 I $P(SRA,"^",5)="" K DR,DIE S DA=SRTN,DIE=130,DR="272///"_DT D ^DIE K STATUS
"RTN","SROACOM",19,0)
 I $P(SRA,"^",2)="C" K DA,DIE,DIK,DR S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SROACOM",20,0)
 D UNLOCK^SROUTL(SRTN)
"RTN","SROACOM",21,0)
PRINT W !!,"Do you want to print the completed assessment ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROACOM",22,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="Y" I "Nn"[SRYN S SRSOUT=1 Q
"RTN","SROACOM",23,0)
 I "Yy"'[SRYN W !!,"Enter <RET> to print the completed assessment, or 'NO' to return to the menu." G PRINT
"RTN","SROACOM",24,0)
 W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print the Completed Assessment on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 Q
"RTN","SROACOM",25,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Completed Surgery Risk Assessment",(ZTSAVE("SRSITE*"),ZTSAVE("SRTN"))="",ZTRTN="EN^SROACOM" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROACOM",26,0)
 D EN,END
"RTN","SROACOM",27,0)
 Q
"RTN","SROACOM",28,0)
EN U IO S SRABATCH=1 D ^SROAPAS Q
"RTN","SROACOM",29,0)
END I 'SRSOUT,$E(IOST)'="P" D RET
"RTN","SROACOM",30,0)
 W @IOF I $E(IOST)="P" D ^%ZISC W @IOF
"RTN","SROACOM",31,0)
 D ^SRSKILL K SRSFLG
"RTN","SROACOM",32,0)
 Q
"RTN","SROACOM",33,0)
LIST W @IOF,!,"This assessment is missing the following items:",! S SRZ="",SRCNT=1
"RTN","SROACOM",34,0)
 ;I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !,?6,"The coding for Procedure and Diagnosis is",!,?6,"not complete.",!
"RTN","SROACOM",35,0)
 F  S SRZ=$O(SRX(SRZ)) Q:SRZ=""  D:$Y+5>IOSL RET Q:SRSOUT  W !,?5,$J(SRCNT,2)_". "_$P(SRX(SRZ),"^") S SRCNT=SRCNT+1
"RTN","SROACOM",36,0)
 S SRSOUT=0 W ! K DIR S DIR(0)="Y",DIR("A")="Do you want to enter the missing items at this time",DIR("B")="NO" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROACOM",37,0)
 Q:'Y  I $$LOCK^SROUTL(SRTN) D PRT,UNLOCK^SROUTL(SRTN)
"RTN","SROACOM",38,0)
 Q
"RTN","SROACOM",39,0)
PRT S SRSOUT=0,(SRMD,SRMD1)="",SRCNT=0 F  S SRMD=$O(SRX(SRMD)) Q:SRMD=""  S SRMD1=$P(SRX(SRMD),"^",2) D  Q:$G(SRSFLG)
"RTN","SROACOM",40,0)
 .I $E(SRMD,1,10)="ANESTHESIA" D ANES Q
"RTN","SROACOM",41,0)
 .I $E(SRMD,1,6)="POSTOP"!($E(SRMD,1,6)="SEPSIS") D POST^SROCMPS Q
"RTN","SROACOM",42,0)
 .I SRMD=240 D FUNCT Q
"RTN","SROACOM",43,0)
 .I SRMD=492 D FUNCTI^SROAPRE Q
"RTN","SROACOM",44,0)
 .I SRMD=485 W @IOF,! D PRIOR^SROACL2 K DR,DIE S DA=SRTN,DR="485///"_$S(X="@":"@",1:$P(Y,"^")),DIE=130 D ^DIE K DR S:$D(Y) SRSFLG=1 Q
"RTN","SROACOM",45,0)
 .K DR,DIE S DA=SRTN,DIE=130,DR=$S($G(SRMD1):SRMD1,1:SRMD)_"T" D ^DIE K DR I $D(Y) S SRSFLG=1
"RTN","SROACOM",46,0)
 S:'$G(SRSOUT) SRSOUT=0
"RTN","SROACOM",47,0)
 Q
"RTN","SROACOM",48,0)
FUNCT I $P($G(^SRF(SRTN,"RA")),"^",2)="C" D FUNCT^SROACLN Q
"RTN","SROACOM",49,0)
 D FUNCTJ^SROAPRE
"RTN","SROACOM",50,0)
 Q
"RTN","SROACOM",51,0)
ANES K DR,DIE,DA S DA=SRTN,DR=.37,DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE S:$D(Y) SRSFLG=1 K DR
"RTN","SROACOM",52,0)
 Q
"RTN","SROACOM",53,0)
CHCK ; cardiac checks added by SR*3*93
"RTN","SROACOM",54,0)
 N SRADM,SRDIS,SRISCH,SRCPB,SRRET S SRRET=0,X=$G(^SRF(SRTN,208)),SRADM=$P(X,"^",14),SRDIS=$P(X,"^",15),X=$G(^SRF(SRTN,206)),SRISCH=$P(X,"^",36),SRCPB=$P(X,"^",37)
"RTN","SROACOM",55,0)
 I SRADM,SRDIS,SRADM'<SRDIS W !!,"  ***  NOTE: Discharge Date precedes Admission Date!!  Please check.  ***" S SRRET=1,SRX(418)=""
"RTN","SROACOM",56,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !!,"  ***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***",! S SRRET=1,SRX(450)=""
"RTN","SROACOM",57,0)
 I SRRET W ! K DIR S DIR(0)="E" D ^DIR K DIR S:$D(DTOUT)!$D(DUOUT) SRSOUT=1 W !
"RTN","SROACOM",58,0)
 Q
"RTN","SROACOM",59,0)
RET W !! K DIR S DIR(0)="E" D ^DIR K DIR W @IOF I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACOM",60,0)
 Q
"RTN","SROACOM",61,0)
PAGE I $E(IOST)'="P" D RET Q
"RTN","SROACOM",62,0)
 W @IOF,!!!
"RTN","SROACOM",63,0)
 Q
"RTN","SROACOP")
0^4^B23673971^B19657223
"RTN","SROACOP",1,0)
SROACOP ;BIR/MAM - CARDIAC OPERATIVE RISK SUMMARY ;02/14/07
"RTN","SROACOP",2,0)
 ;;3.0; Surgery ;**38,47,71,88,95,107,100,125,142,153,160**;24 Jun 93;Build 7
"RTN","SROACOP",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACOP",4,0)
 N SRCSTAT S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACOP",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO
"RTN","SROACOP",6,0)
 F I=206,206.1,208 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROACOP",7,0)
 I $P(SRA(206),"^",41)="" K DA,DIE,DR S DA=SRTN,DIE=130,DR="472////N" D ^DIE K DA,DIE,DR S SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACOP",8,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(2)=Y_"^1.13"
"RTN","SROACOP",9,0)
 S SRAO(1)=$P(SRA(206),"^",31)_"^364",SRAO(3)=$P(SRA(208),"^",12)_"^414"
"RTN","SROACOP",10,0)
 S Y=$P(SRA(206),"^",32) D DT S SRAO("1A")=X_"^364.1"
"RTN","SROACOP",11,0)
 S Y=$P(SRAO(3),"^") I Y'="" S C=$P(^DD(130,414,0),"^",2) D Y^DIQ S $P(SRAO(3),"^")=Y
"RTN","SROACOP",12,0)
 S Y=$P(SRA(208),"^",13) D DT S SRAO("3A")=X_"^414.1"
"RTN","SROACOP",13,0)
 S Y=$P($G(^SRF(SRTN,.2)),"^",2) D DT S SRAO(4)=X_"^.22"
"RTN","SROACOP",14,0)
 S Y=$P($G(^SRF(SRTN,.2)),"^",3) D DT S SRAO(5)=X_"^.23"
"RTN","SROACOP",15,0)
 S SRAO(6)=SRA(206.1)_"^430"
"RTN","SROACOP",16,0)
 S SRCSTAT=">> Coding "_$S($P($G(^SRO(136,SRTN,10)),"^"):"",1:"Not ")_"Complete <<"
"RTN","SROACOP",17,0)
 S SRPAGE="PAGE: 1" D HDR^SROAUTL S SRAO(7)=""
"RTN","SROACOP",18,0)
 S X=$P(SRAO(1),"^"),X=$S(X?1.3N:X_"%",1:X) W !," 1. Physician's Preoperative Estimate of Operative Mortality: "_X
"RTN","SROACOP",19,0)
 S X=$P(SRAO("1A"),"^") I X'="" W !,?3," A. Date/Time Collected:    "_X
"RTN","SROACOP",20,0)
 W !," 2. ASA Classification:",?31,$P(SRAO(2),"^"),!," 3. Surgical Priority:",?31,$P(SRAO(3),"^")
"RTN","SROACOP",21,0)
 S X=$P(SRAO("3A"),"^") I X'="" W !,?3," A. Date/Time Collected:    "_X
"RTN","SROACOP",22,0)
 W !," 4. Date/Time Operation Began:",?31,$P(SRAO(4),"^"),!," 5. Date/Time Operation Ended:",?31,$P(SRAO(5),"^")
"RTN","SROACOP",23,0)
 W !," 6. Preoperative Risk Factors: "
"RTN","SROACOP",24,0)
 I $P(SRAO(6),"^")'="" S SRQ=0 S X=$P(SRAO(6),"^") W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROACOP",25,0)
 .I X'[" " W ?25,X Q
"RTN","SROACOP",26,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:80) D  Q:SRQ
"RTN","SROACOP",27,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROACOP",28,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),! S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROACOP",29,0)
 N SRPROC,SRL S SRL=49 D CPTS^SROAUTL0 W !," 7. CPT Codes (view only):"
"RTN","SROACOP",30,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROACOP",31,0)
 W ! D CHCK
"RTN","SROACOP",32,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROACOP",33,0)
ASK W !,"Select Operative Risk Summary Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACOP",34,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACOP",35,0)
 I X="A" S X="1:7"
"RTN","SROACOP",36,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>7)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACOP",37,0)
 I X'=7 D HDR^SROAUTL
"RTN","SROACOP",38,0)
 I X?.N1":".N D RANGE S SROERR=SRTN D ^SROERR0 G START
"RTN","SROACOP",39,0)
 I $D(SRAO(X))!(X=6) S EMILY=X D  S SROERR=SRTN D ^SROERR0 G START
"RTN","SROACOP",40,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACOP",41,0)
END I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROACOP",42,0)
 Q
"RTN","SROACOP",43,0)
DT I 'Y S X="" Q
"RTN","SROACOP",44,0)
 X ^DD("DD") S X=$P(Y,"@")_" "_$P(Y,"@",2)
"RTN","SROACOP",45,0)
 Q
"RTN","SROACOP",46,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACOP",47,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter the corresponding number to update the information in a particular",!,"   field.  (For example, enter '3' to update Surgical Priority)"
"RTN","SROACOP",48,0)
 W !!,"3. Enter two numbers separated by a ':' to enter a range of information.",!,"   (For example, enter '1:2' to update Physician's Preoperative Estimate of",!,"   Mortality and ASA Classification.)"
"RTN","SROACOP",49,0)
 W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACOP",50,0)
 Q
"RTN","SROACOP",51,0)
RANGE ; range of numbers
"RTN","SROACOP",52,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACOP",53,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACOP",54,0)
 Q
"RTN","SROACOP",55,0)
ONE ; edit one item
"RTN","SROACOP",56,0)
 I EMILY=7 D DISP^SROAUTL0 Q
"RTN","SROACOP",57,0)
 K DR,DIE S DA=SRTN,DIE=130,DR=$P(SRAO(EMILY),"^",2)
"RTN","SROACOP",58,0)
 S DR=DR_"T",DIE=130 S DR=DR_$S(EMILY=1:";364.1T",EMILY=3:";414.1T",1:"") D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACOP",59,0)
 Q
"RTN","SROACOP",60,0)
RET Q:SRSOUT  W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACOP",61,0)
 Q
"RTN","SROACOP",62,0)
NOW ; update date/time of estimate of mortality
"RTN","SROACOP",63,0)
 N X D NOW^%DTC S $P(^SRF(DA,206),"^",32)=$E(%,1,12)
"RTN","SROACOP",64,0)
 Q
"RTN","SROACOP",65,0)
KNOW ; delete date/time of estimate of mortality
"RTN","SROACOP",66,0)
 S $P(^SRF(DA,206),"^",32)=""
"RTN","SROACOP",67,0)
 Q
"RTN","SROACOP",68,0)
YN ; store answer
"RTN","SROACOP",69,0)
 S SHEMP=$S(NYUK="NS":"Unknown",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROACOP",70,0)
 Q
"RTN","SROACOP",71,0)
CHCK ;compare dates
"RTN","SROACOP",72,0)
 N SRINO,SRSP,SREM
"RTN","SROACOP",73,0)
 S SRSP=$P($G(^SRF(SRTN,208)),"^",13),SRINO=$P($G(^SRF(SRTN,.2)),"^",10),SREM=$P($G(^SRF(SRTN,206)),"^",32)
"RTN","SROACOP",74,0)
 I SRSP'="",SRINO'="",SRSP'<SRINO W !!,"*** NOTE: D/Time of Surgical Priority should be < the D/Time Patient in OR.***"
"RTN","SROACOP",75,0)
 I SREM'="",SRINO'="",SREM'<SRINO W !!,"*** NOTE: D/Time of Estimate of Mortality should be < the D/Time PT in OR. ***"
"RTN","SROACOP",76,0)
 Q
"RTN","SROACPM")
0^5^B45882187^B40295841
"RTN","SROACPM",1,0)
SROACPM ;BIR/ADM - CARDIAC RESOURCE INFO ;02/23/07
"RTN","SROACPM",2,0)
 ;;3.0; Surgery ;**71,93,95,99,100,125,142,160**;24 Jun 93;Build 7
"RTN","SROACPM",3,0)
 ;
"RTN","SROACPM",4,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROACPM",5,0)
 ;
"RTN","SROACPM",6,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACPM",7,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACPM",8,0)
START G:SRSOUT END D HDR^SROAUTL
"RTN","SROACPM",9,0)
 S DIR("A",1)="Enter/Edit Patient Resource Data",DIR("A",2)=" ",DIR("A",3)="1. Capture Information from PIMS Records",DIR("A",4)="2. Enter, Edit, or Review Information",DIR("A",5)=" "
"RTN","SROACPM",10,0)
 S DIR("?",1)="Enter '1' if you want to capture patient information from PIMS",DIR("?",2)="records.  Enter '2' if you want to enter, edit, or review patient",DIR("?")="other information on this screen."
"RTN","SROACPM",11,0)
 S DIR("A")="Select Number",DIR(0)="NO^1:2" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROACPM",12,0)
 I Y=1 D PIMS G START
"RTN","SROACPM",13,0)
EDIT S:$P(^SRF(SRTN,206),"^",41)="" $P(^SRF(SRTN,206),"^",41)="N"
"RTN","SROACPM",14,0)
 S SRR=0 S SRPAGE="PAGE: 1" D HDR^SROAUTL K DR S SRQ=0,(DR,SRDR)="418;419;440;.205;.232;470;471;473;472;431;442"
"RTN","SROACPM",15,0)
 K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="IE",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROACPM",16,0)
 K SRZ S SRZ=0 F M=1:1 S I=$P(SRDR,";",M)  Q:'I  D
"RTN","SROACPM",17,0)
 .D TR,GET
"RTN","SROACPM",18,0)
 .S SRZ=SRZ+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRZ(SRZ))=$P(Y,"^",2)_"^"_SRFLD,SREXT=SRY(130,SRTN,SRFLD,"E")
"RTN","SROACPM",19,0)
 .W:M>1 ! W $J(SRZ,2)_". "_$P(Z,"^")_": " D EXT
"RTN","SROACPM",20,0)
 D CHCK W ! F K=1:1:80 W "-"
"RTN","SROACPM",21,0)
 D SEL G:SRR=1 EDIT
"RTN","SROACPM",22,0)
 G START
"RTN","SROACPM",23,0)
 Q
"RTN","SROACPM",24,0)
CHCK ; compare admission and discharge dates to each other
"RTN","SROACPM",25,0)
 N SRADM,SRDIS,SROUT,SRDICU,SREXT
"RTN","SROACPM",26,0)
 S SROUT=SRY(130,SRTN,.232,"I"),SRDICU=SRY(130,SRTN,471,"I"),SREXT=SRY(130,SRTN,470,"I")
"RTN","SROACPM",27,0)
 S SRADM=SRY(130,SRTN,418,"I"),SRDIS=SRY(130,SRTN,419,"I") W !
"RTN","SROACPM",28,0)
 I SRADM,SRDIS,SRADM'<SRDIS W !,"*** NOTE: Discharge Date precedes Admission Date!!  Please check. ***"
"RTN","SROACPM",29,0)
 I SREXT,SROUT,SREXT'>SROUT W !,"*** NOTE: D/Time Pt Extubated should be later than the D/Time Pt Out of OR. ***"
"RTN","SROACPM",30,0)
 I SREXT,SRDICU,SREXT'<SRDICU W !,"*** NOTE: D/Time Pt Extubated should be < the ICU Discharge D/Time. ***"
"RTN","SROACPM",31,0)
 I SRDICU,SREXT,SRDICU'>SREXT W !,"*** NOTE: D/Time Discharged from ICU should be > the Extubation D/Time. ***"
"RTN","SROACPM",32,0)
 I SRDICU,SRDIS,SRDICU>SRDIS W !,"*** NOTE: D/Time Discharged from ICU should be <= the Hospital Discharge D/Time*"
"RTN","SROACPM",33,0)
 Q
"RTN","SROACPM",34,0)
EXT I SRFLD=440&(SREXT="NS") S SREXT=SREXT_"-"_$S(SREXT="NS":"No Study",1:SREXT)
"RTN","SROACPM",35,0)
 I SRFLD=470,(SREXT="NS"!(SREXT="RI")) S SREXT=SREXT_"-"_$S(SREXT="NS":"Unable to determine",SREXT="RI":"Remains intubated at 30 days",1:SREXT)
"RTN","SROACPM",36,0)
 I SRFLD=471,(SREXT="NS"!(SREXT="RI")) S SREXT=SREXT_"-"_$S(SREXT="NS":"Unable to determine",SREXT="RI":"Remains in ICU at 30 days",1:SREXT)
"RTN","SROACPM",37,0)
 I $L(SREXT)<41 W ?39,SREXT W:SRFLD=247 $S(SREXT="":"",SREXT=1:" Day",SREXT=0:" Days",SREXT>1:" Days",1:"") Q
"RTN","SROACPM",38,0)
 N I,J,X,Y S X=SREXT F  D  W:$L(X) ! I $L(X)<41!(X'[" ") W ?39,X Q
"RTN","SROACPM",39,0)
 .F I=0:1:39 S J=40-I,Y=$E(X,J) I Y=" " W ?39,$E(X,1,J-1) S X=$E(X,J+1,$L(X)) Q
"RTN","SROACPM",40,0)
 Q
"RTN","SROACPM",41,0)
SEL S SRSOUT=0 W !!,"Select number of item to edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACPM",42,0)
 Q:X=""  S:X="a" X="A" I '$D(SRFLG),'$D(SRZ(X)),(X'?1.2N1":"1.2N),X'="A" D HELP S SRR=1 Q
"RTN","SROACPM",43,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRZ)!(Y>Z) D HELP S SRR=1 Q
"RTN","SROACPM",44,0)
 I X="A" S X="1:"_SRZ
"RTN","SROACPM",45,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 Q
"RTN","SROACPM",46,0)
 I $D(SRZ(X)),+X=X S EMILY=X D  S SRR=1
"RTN","SROACPM",47,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACPM",48,0)
 Q
"RTN","SROACPM",49,0)
PIMS ; get update from PIMS records
"RTN","SROACPM",50,0)
 W ! K DIR S DIR("A")="Are you sure you want to retrieve information from PIMS records ? ",DIR("B")="YES",DIR(0)="YOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROACPM",51,0)
 W ! D WAIT^DICD D ^SROAPIMS
"RTN","SROACPM",52,0)
 Q
"RTN","SROACPM",53,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACPM",54,0)
 W !!,"1. Enter 'A' to update all items.",!!,"2. Enter a number (1-"_SRZ_") to update an individual item.  (For example,",!,"   enter '1' to update "_$P(SRZ(1),"^")_".)"
"RTN","SROACPM",55,0)
 W !!,"3. Enter a range of numbers (1-"_SRZ_") separated by a ':' to enter a range",!,"   of items.  (For example, enter '1:4' to update items 1, 2, 3 and 4.)",!
"RTN","SROACPM",56,0)
 I $D(SRFLG) W !,"4. Enter 'N' or 'NO' to enter negative response for all items.",!!,"5. Enter '@' to delete information from all items.",!
"RTN","SROACPM",57,0)
PRESS W ! K DIR S DIR("A")="Press the return key to continue or '^' to exit: ",DIR(0)="FOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACPM",58,0)
 Q
"RTN","SROACPM",59,0)
RANGE ; range of numbers
"RTN","SROACPM",60,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACPM",61,0)
 .S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACPM",62,0)
 Q
"RTN","SROACPM",63,0)
ONE ; edit one item
"RTN","SROACPM",64,0)
 I EMILY=7 D LIST
"RTN","SROACPM",65,0)
 K DR,DA,DIE S DR=$P(SRZ(EMILY),"^",2)_"T",DA=SRTN,DIE=130,SRDT=$P(SRZ(EMILY),"^",3) S:SRDT DR=DR_";"_SRDT_"T" D ^DIE K DR,DA I $D(Y) S SRSOUT=1
"RTN","SROACPM",66,0)
 I 'SRSOUT,EMILY=1!(EMILY=2) D OK
"RTN","SROACPM",67,0)
 Q
"RTN","SROACPM",68,0)
OK ; compare admission date to discharge date
"RTN","SROACPM",69,0)
 N SRADM,SRDIS S X=$G(^SRF(SRTN,208)),SRADM=$P(X,"^",14),SRDIS=$P(X,"^",15)
"RTN","SROACPM",70,0)
 I SRADM,SRDIS,SRADM'<SRDIS W !!,"  ***  NOTE: Discharge Date precedes Admission Date!!  Please check.  ***",! D PRESS W !
"RTN","SROACPM",71,0)
 Q
"RTN","SROACPM",72,0)
LIST ; display list of patient movements
"RTN","SROACPM",73,0)
 N CNT,SRADM,SRLOC,SRMOVE,SRMVMT,SRT,SRTYPE,SRZ,SRY
"RTN","SROACPM",74,0)
 S DFN=$P(^SRF(SRTN,0),"^"),SRZ=$P($G(^SRF(SRTN,.2)),"^",12)
"RTN","SROACPM",75,0)
 S SRADM=0 D ADM Q:'SRZ
"RTN","SROACPM",76,0)
 S CNT=0 F  Q:'SRZ  D MVMT
"RTN","SROACPM",77,0)
 Q:CNT=0
"RTN","SROACPM",78,0)
 W !!,?5,"To identify the date and time the patient was discharged from intensive",!,?5,"care following surgery, see the following list of patient movements"
"RTN","SROACPM",79,0)
 W !,?5,"that occurred during the inpatient stay associated with this surgery.",!
"RTN","SROACPM",80,0)
 S CNT=0 F  S CNT=$O(SRMVMT(CNT)) Q:'CNT  S X=SRMVMT(CNT),SRT=$P(X,"^",2) W !,?5,$P($P(X,"^"),":",1,2),?25,$P(X,"^",3),?37,$S(SRT=3:"From",1:"To")_": "_$P(X,"^",4)
"RTN","SROACPM",81,0)
 W !
"RTN","SROACPM",82,0)
 Q
"RTN","SROACPM",83,0)
MVMT S VAIP("D")=SRZ D IN5^VADPT S SRY=$P(VAIP(3),"^")
"RTN","SROACPM",84,0)
 I SRY S CNT=CNT+1 D
"RTN","SROACPM",85,0)
 .S SRMOVE=$P(VAIP(3),"^",2),SRTYPE=$P(VAIP(2),"^",1,2),SRLOC=$P(VAIP(5),"^",2)
"RTN","SROACPM",86,0)
 .S SRMVMT(CNT)=SRMOVE_"^"_SRTYPE_"^"_SRLOC
"RTN","SROACPM",87,0)
 I 'SRY S SRZ="" Q
"RTN","SROACPM",88,0)
 I VAIP(1)=VAIP(17) S SRZ="" Q
"RTN","SROACPM",89,0)
 I VAIP(16),VAIP(16)=VAIP(17) S CNT=CNT+1,SRMOVE=$P(VAIP(16,1),"^",2),SRTYPE=$P(VAIP(16,2),"^",1,2),SRLOC=$P(VAIP(16,4),"^",2),SRMVMT(CNT)=SRMOVE_"^"_SRTYPE_"^"_SRLOC,SRZ="" Q
"RTN","SROACPM",90,0)
 S SRZ=$P(VAIP(16,1),"^")
"RTN","SROACPM",91,0)
 Q
"RTN","SROACPM",92,0)
ADM N SR24 S VAIP("D")=SRZ D IN5^VADPT
"RTN","SROACPM",93,0)
 I 'VAIP(13) S X1=SRZ,X2=1 D C^%DTC S SR24=X,SRDT=$O(^DGPM("APTT1",DFN,SRZ)) Q:'SRDT!(SRDT>SR24)  S VAIP("D")=SRDT D IN5^VADPT I 'VAIP(13) S SRZ="" Q
"RTN","SROACPM",94,0)
 I VAIP(13) S SRZ=$P(VAIP(13,1),"^")+.000001
"RTN","SROACPM",95,0)
 Q
"RTN","SROACPM",96,0)
TR S J=I,J=$TR(J,"1234567890.","ABCDEFGHIJP")
"RTN","SROACPM",97,0)
 Q
"RTN","SROACPM",98,0)
GET S X=$T(@J)
"RTN","SROACPM",99,0)
 Q
"RTN","SROACPM",100,0)
END W @IOF D ^SRSKILL
"RTN","SROACPM",101,0)
 Q
"RTN","SROACPM",102,0)
DAH ;;418^Hospital Admission Date
"RTN","SROACPM",103,0)
DAI ;;419^Hospital Discharge Date
"RTN","SROACPM",104,0)
DDJ ;;440^Cardiac Catheterization Date
"RTN","SROACPM",105,0)
PBJE ;;.205^Time Patient In OR
"RTN","SROACPM",106,0)
PBCB ;;.232^Time Patient Out OR
"RTN","SROACPM",107,0)
DGJ ;;470^Date/Time Patient Extubated
"RTN","SROACPM",108,0)
DGA ;;471^Date/Time Discharged from ICU
"RTN","SROACPM",109,0)
DDB ;;442^Employment Status Preoperatively
"RTN","SROACPM",110,0)
DCA ;;431^Resource Data Comments
"RTN","SROACPM",111,0)
DGC ;;473^Homeless
"RTN","SROACPM",112,0)
DGB ;;472^Surg Performed at Non-VA Facility
"RTN","SROACR2")
0^6^B15772524^B15125616
"RTN","SROACR2",1,0)
SROACR2 ;BIR/SJA - OPERATIVE DATA, PAGE 2 ;04/12/06
"RTN","SROACR2",2,0)
 ;;3.0; Surgery ;**125,153,160**;24 Jun 93;Build 7
"RTN","SROACR2",3,0)
 ;
"RTN","SROACR2",4,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACR2",5,0)
 S SRSOUT=0 D ^SROAUTL
"RTN","SROACR2",6,0)
START G:SRSOUT END
"RTN","SROACR2",7,0)
 ;
"RTN","SROACR2",8,0)
EDIT S SRR=0 S SRPAGE="PAGE: 2 OF 2" D HDR^SROAUTL W "Indicate other cardiac procedures only if done with cardiopulmonary bypass",! F K=1:1:80 W "-"
"RTN","SROACR2",9,0)
 ;
"RTN","SROACR2",10,0)
 K DR S SRQ=0,(DR,SRDR)="381;382;451;450;468;469"
"RTN","SROACR2",11,0)
 K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="IE",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROACR2",12,0)
 K SRX S SRX=0 F M=1:1 S I=$P(SRDR,";",M)  Q:'I  D
"RTN","SROACR2",13,0)
 .K SREXT D TR,GET
"RTN","SROACR2",14,0)
 .S SRX=SRX+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRX(SRX))=$P(Y,"^",2)_"^"_SRFLD,SREXT=SRY(130,SRTN,SRFLD,"E")
"RTN","SROACR2",15,0)
 .I SRFLD=451 W !,"Other Operative Data details:",!,"------------------------------"
"RTN","SROACR2",16,0)
 .W !,$J(SRX,2)_". "_$P(Z,"^")_":" D EXT
"RTN","SROACR2",17,0)
 .W:SRFLD=382 !
"RTN","SROACR2",18,0)
 D CHCK W ! F K=1:1:80 W "-"
"RTN","SROACR2",19,0)
 D SEL G:SRR=1 EDIT
"RTN","SROACR2",20,0)
 S SRSOUT=1 G END
"RTN","SROACR2",21,0)
 Q
"RTN","SROACR2",22,0)
SEL S SRSOUT=0 W !!,"Select Operative Information to Edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACR2",23,0)
 Q:X=""  S:X="a" X="A" I '$D(SRFLG),'$D(SRX(X)),(X'?1.2N1":"1.2N),X'="A" D HELP S SRR=1 Q
"RTN","SROACR2",24,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRX)!(Y>Z) D HELP S SRR=1 Q
"RTN","SROACR2",25,0)
 I X="A" S X="1:"_SRX
"RTN","SROACR2",26,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 K SREXT Q
"RTN","SROACR2",27,0)
 I $D(SRX(X)),+X=X S EMILY=X D  S SRR=1
"RTN","SROACR2",28,0)
 .I $$LOCK^SROUTL(SRTN) W ! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACR2",29,0)
 Q
"RTN","SROACR2",30,0)
EXT W ?30,SREXT
"RTN","SROACR2",31,0)
 Q
"RTN","SROACR2",32,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACR2",33,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-6) to update the information in that field.  (For",!,"   example, enter '5' to update Incision Type.)"
"RTN","SROACR2",34,0)
 W !!,"3. Enter a range of numbers (1-6) separated by a ':' to enter a range of",!,"   information.  (For example, enter '3:5' to enter Total CPB time,",!,"   Total Ischemic time, and Incision Type.)"
"RTN","SROACR2",35,0)
 D RET
"RTN","SROACR2",36,0)
 Q
"RTN","SROACR2",37,0)
CHCK ; compare ischemic time to CPB time
"RTN","SROACR2",38,0)
 I '$D(IORVON) S X="IORVON;IORVOFF" D ENDR^%ZISS
"RTN","SROACR2",39,0)
 N SRISCH,SRCPB S SRISCH=SRY(130,SRTN,450,"E"),SRCPB=SRY(130,SRTN,451,"E")
"RTN","SROACR2",40,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !,IORVON_"***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***"_IORVOFF
"RTN","SROACR2",41,0)
 Q
"RTN","SROACR2",42,0)
RET Q:SRSOUT  W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACR2",43,0)
 Q
"RTN","SROACR2",44,0)
RANGE ; range of numbers
"RTN","SROACR2",45,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACR2",46,0)
 .W ! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACR2",47,0)
 Q
"RTN","SROACR2",48,0)
ONE ; edit one item
"RTN","SROACR2",49,0)
 K DR,DA,DIE S DR=$P(SRX(EMILY),"^",2)_"T",DA=SRTN,DIE=130,SRDT=$P(SRX(EMILY),"^",3) S:SRDT DR=DR_";"_SRDT_"T" D ^DIE K DR,DA I $D(Y) S SRSOUT=1
"RTN","SROACR2",50,0)
 I EMILY=3,$P($G(^SRF(SRTN,206)),"^",37)>0,($P($G(^SRF(SRTN,207)),"^",27)=1) S $P(^SRF(SRTN,207),"^",27)=5
"RTN","SROACR2",51,0)
 Q
"RTN","SROACR2",52,0)
TR S J=I,J=$TR(J,"1234567890.","ABCDEFGHIJP")
"RTN","SROACR2",53,0)
 Q
"RTN","SROACR2",54,0)
GET S X=$T(@J)
"RTN","SROACR2",55,0)
 Q
"RTN","SROACR2",56,0)
END W @IOF D ^SRSKILL
"RTN","SROACR2",57,0)
 Q
"RTN","SROACR2",58,0)
CHA ;;381^Foreign Body Removal
"RTN","SROACR2",59,0)
CHB ;;382^Pericardiectomy
"RTN","SROACR2",60,0)
DEA ;;451^Total CPB Time
"RTN","SROACR2",61,0)
DEJ ;;450^Total Ischemic Time
"RTN","SROACR2",62,0)
DFH ;;468^Incision Type
"RTN","SROACR2",63,0)
DFI ;;469^Convert Off Pump to CPB
"RTN","SROAEX")
0^67^B13404461^B13592830
"RTN","SROAEX",1,0)
SROAEX ;BIR/MAM - EXCLUSION CRITERIA ;03/22/07
"RTN","SROAEX",2,0)
 ;;3.0; Surgery ;**38,47,63,88,142,153,160**;24 Jun 93;Build 7
"RTN","SROAEX",3,0)
 N SRCSTAT S SRACLR=0,SRSOUT=0 D NCODE^SROAUTL
"RTN","SROAEX",4,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO S SRAO(4)=""
"RTN","SROAEX",5,0)
 S SR(0)=^SRF(SRTN,0),Y=$P($G(^SRF(SRTN,"RA")),"^",7) D CRITERIA S SRAO(1)=NYUK_"^102"
"RTN","SROAEX",6,0)
 S SRAO(2)=$P(SR(0),"^",10)_"^.035",X=$P(SRAO(2),"^") I X'="" S $P(SRAO(2),"^")=$S(X="EL":"ELECTIVE",X="EM":"EMERGENT",X="U":"URGENT",X="A":"ADD ON TODAY (NONEMERGENT)",X="S":"STANDBY",1:"")
"RTN","SROAEX",7,0)
 S SHEMP=$P(SR(0),"^",4) S:SHEMP SHEMP=$P(^SRO(137.45,SHEMP,0),"^"),SRAO(3)=SHEMP_"^.04"
"RTN","SROAEX",8,0)
 S SRCSTAT=">> Coding "_$S($P($G(^SRO(136,SRTN,10)),"^"):"",1:"Not ")_"Complete <<"
"RTN","SROAEX",9,0)
 D TECH^SROPRIN S:SRTECH="NOT ENTERED" SRTECH="" S SRAO(5)=SRTECH
"RTN","SROAEX",10,0)
 D TSTAT^SRO1L1,HDR^SROAUTL
"RTN","SROAEX",11,0)
 W !,"1. Exclusion Criteria: ",?35,$P(SRAO(1),"^"),!,"2. Surgical Priority:",?35,$P(SRAO(2),"^"),!,"3. Surgical Specialty:",?35,$P(SRAO(3),"^")
"RTN","SROAEX",12,0)
 N SRPROC,SRL S SRL=45 D CPTS^SROAUTL0 W !,"4. CPT Codes (view only):"
"RTN","SROAEX",13,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?35,SRPROC(I) W:I'=1 !,?35,SRPROC(I)
"RTN","SROAEX",14,0)
 W !,"5. Principal Anesthesia Technique: "_$P(SRAO(5),"^"),!! F LINE=1:1:80 W "-"
"RTN","SROAEX",15,0)
ASK W !!,"Select Excluded Case Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROAEX",16,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROAEX",17,0)
 I X="A" S X="1:5"
"RTN","SROAEX",18,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>5)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAEX",19,0)
 D TSTAT^SRO1L1,HDR^SROAUTL
"RTN","SROAEX",20,0)
 I X?.N1":".N D RANGE,AQ G START
"RTN","SROAEX",21,0)
 I $D(SRAO(X)) S EMILY=X W !! D ONE,AQ G START
"RTN","SROAEX",22,0)
END D AQ W @IOF D ^SRSKILL
"RTN","SROAEX",23,0)
 Q
"RTN","SROAEX",24,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit. Examples of proper"
"RTN","SROAEX",25,0)
 W !,"responses are listed below.",!!,"1. Enter 'A' to update all information."
"RTN","SROAEX",26,0)
 W !!,"2. Enter a number (1-5) to update the information in that field. (For"
"RTN","SROAEX",27,0)
 W !,"   example, enter '2' to update Surgical Priority)"
"RTN","SROAEX",28,0)
 W !!,"3. Enter a range of numbers (1-5) separated by a ':' to enter a range of"
"RTN","SROAEX",29,0)
 W !,"   information. (For example, enter '1:2' to update the Exclusion Criteria "
"RTN","SROAEX",30,0)
 W !,"   and Surgical Priority)" D RET
"RTN","SROAEX",31,0)
 Q
"RTN","SROAEX",32,0)
AQ ; update transmission status
"RTN","SROAEX",33,0)
 K DA,DIK S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SROAEX",34,0)
 Q
"RTN","SROAEX",35,0)
RANGE ; range of numbers
"RTN","SROAEX",36,0)
 W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE I EMILY=4 D HDR^SROAUTL
"RTN","SROAEX",37,0)
 Q
"RTN","SROAEX",38,0)
ONE ; edit one item
"RTN","SROAEX",39,0)
 I EMILY=1 D REASON Q
"RTN","SROAEX",40,0)
 I EMILY=4 D DISP^SROAUTL0 Q
"RTN","SROAEX",41,0)
 I EMILY=5 D UPANES Q
"RTN","SROAEX",42,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROAEX",43,0)
 Q
"RTN","SROAEX",44,0)
RET Q:SRSOUT  W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAEX",45,0)
 Q
"RTN","SROAEX",46,0)
CRITERIA ; expand set of codes for exclusion criteria
"RTN","SROAEX",47,0)
 S C=$P(^DD(130,102,0),"^",2) D Y^DIQ S NYUK=Y
"RTN","SROAEX",48,0)
 S SHEMP=$P(^SRF(SRTN,0),"^",10),MOE=$S(SHEMP="E":"ELECTIVE",SHEMP="M":"EMERGENCY",SHEMP="U":"URGENT",1:"")
"RTN","SROAEX",49,0)
 Q
"RTN","SROAEX",50,0)
UPANES K DR,DIE,DA S DA=SRTN,DR=.37,DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE K DR
"RTN","SROAEX",51,0)
 Q
"RTN","SROAEX",52,0)
REASON W ! K DIR S DIR(0)="130,102",DIR("A")="Reason for not Creating an Assessment",DIR("B")=$P(SRAO(1),"^") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAEX",53,0)
 I X="@" D DELETE^SRONASS S SRSOUT=1 Q
"RTN","SROAEX",54,0)
 I Y'="" K DR,DIE,DA S DA=SRTN,DIE=130,DR="102////"_Y D ^DIE K DA,DIE,DR
"RTN","SROAEX",55,0)
 Q
"RTN","SROAL1")
0^7^B23289544^B22463945
"RTN","SROAL1",1,0)
SROAL1 ;BIR/ADM - LOAD PREOPERATIVE LAB DATA ;02/14/07
"RTN","SROAL1",2,0)
 ;;3.0; Surgery ;**18,38,47,54,65,71,81,88,100,125,153,160**;24 Jun 93;Build 7
"RTN","SROAL1",3,0)
 ;
"RTN","SROAL1",4,0)
 ; Reference to ^LR( supported by DBIA #194
"RTN","SROAL1",5,0)
 ;
"RTN","SROAL1",6,0)
 Q:'$D(SRTN)  N SRBLUD K SRAD,SRAT S SRSOUT=0
"RTN","SROAL1",7,0)
 W !!,"This selection loads the most recent lab data for tests performed",!,"within 90 days before the operation unless otherwise specified."
"RTN","SROAL1",8,0)
YEP W !!,"Do you want to automatically load preoperative lab data ?  YES//  " R SRYN:DTIME G:'$T!(SRYN["^") END
"RTN","SROAL1",9,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter <RET> to automatically load preoperative lab data from the patient's lab record, or 'NO' to return to the menu." G YEP
"RTN","SROAL1",10,0)
 I "Yy"'[SRYN W !!,"Lab data NOT loaded." G END
"RTN","SROAL1",11,0)
START S SRALR=$S($D(^DPT($P(^SRF(SRTN,0),"^"),"LR")):$P(^("LR"),"^"),1:"")
"RTN","SROAL1",12,0)
 S SRAOP=$P($G(^SRF(SRTN,.2)),"^",2) I 'SRAOP W !!,"The 'Time the Operation Began' must be entered before continuing." D TMCHK G:SRSOUT END
"RTN","SROAL1",13,0)
 S SRST=9999999-SRAOP,X1=SRAOP,X2=-90 D C^%DTC S SREND=9999999-X
"RTN","SROAL1",14,0)
SRAT ; Get test and data name(s) for test from file 139.2.
"RTN","SROAL1",15,0)
 W !!,"..Searching lab record for latest preoperative test data...."
"RTN","SROAL1",16,0)
 K DIC S DIC=61,DIC(0)="",X="SERUM" D ^DIC S SRSER=+Y K DIC S DIC=61,DIC(0)="",X="PLASMA" D ^DIC K DIC S SRP=+Y
"RTN","SROAL1",17,0)
 K DIC S DIC=61,DIC(0)="",X="BLOOD" D ^DIC S SRBLUD=+Y
"RTN","SROAL1",18,0)
 F SRAT=1,4,7,8,11,13:1:20,25 D SP
"RTN","SROAL1",19,0)
 S SRAT=26,X1=SRAOP,X2=-2 D C^%DTC S SREND=9999999-X D SP
"RTN","SROAL1",20,0)
 S SRAT=27,X1=SRAOP,X2=-1000 D C^%DTC S SREND=9999999-X D SP
"RTN","SROAL1",21,0)
 I $$LOCK^SROUTL(SRTN) D ^SROAL11 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") D:SRCON CONCC D UNLOCK^SROUTL(SRTN)
"RTN","SROAL1",22,0)
END I 'SRSOUT W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROAL1",23,0)
 W @IOF
"RTN","SROAL1",24,0)
 Q
"RTN","SROAL1",25,0)
CONCC ; update concurrent case
"RTN","SROAL1",26,0)
 S SRTN1=SRTN,SRTN=SRCON D N4^SROAL11 S SRTN=SRTN1
"RTN","SROAL1",27,0)
 Q
"RTN","SROAL1",28,0)
SP S SRASP=$P(^SRO(139.2,SRAT,2),"^") K SRADT F SRADN=0:0 S SRADN=$O(^SRO(139.2,SRAT,1,SRADN)) Q:SRADN'>0  S SRATN=$P(^(SRADN,0),"^") D LABCHK
"RTN","SROAL1",29,0)
 D NS
"RTN","SROAL1",30,0)
 Q
"RTN","SROAL1",31,0)
LABCHK ; Get latest test values from patient's lab record.
"RTN","SROAL1",32,0)
 I SRALR F SRAIDT=SRST:0 S SRAIDT=$O(^LR(SRALR,"CH",SRAIDT)) Q:SRAIDT'>0!(SRAIDT>SREND)  I $D(^(SRAIDT,SRATN)) S SRSP=$P(^(0),"^",5) D
"RTN","SROAL1",33,0)
 .I (SRAT>1&(SRAT<16))!(SRAT=26)!(SRAT>20&(SRAT<25)),SRSP=SRSER!(SRSP=SRP)!(SRSP=SRBLUD) D COMP Q
"RTN","SROAL1",34,0)
 .I SRSP=SRASP D COMP
"RTN","SROAL1",35,0)
 Q
"RTN","SROAL1",36,0)
NS ; check for no sample
"RTN","SROAL1",37,0)
 I '$D(SRAT(SRAT)) S SRAT(SRAT)="NS",SRAD(SRAT)=""
"RTN","SROAL1",38,0)
 Q
"RTN","SROAL1",39,0)
COMP S SRX=$P(^LR(SRALR,"CH",SRAIDT,SRATN),"^") I $P(^LR(SRALR,"CH",SRAIDT,0),"^",3)'="","canccommentpending"'[SRX,SRX'["CANC" D DATA
"RTN","SROAL1",40,0)
 Q
"RTN","SROAL1",41,0)
DATA I $D(SRADT),SRAIDT>SRADT Q
"RTN","SROAL1",42,0)
 I +SRX'=SRX D
"RTN","SROAL1",43,0)
 .N X1,X2 S SRZ="" I " <>"[$E(SRX) S SRZ=$E(SRX),SRX=$E(SRX,2,99)
"RTN","SROAL1",44,0)
 .I SRX?.N0.1".".N D  Q
"RTN","SROAL1",45,0)
 ..S X1=$P(SRX,"."),X1=+X1 S:X1=0 X1=""
"RTN","SROAL1",46,0)
 ..S X2="."_$P(SRX,".",2),X2=+X2 S:X2=0 X2=""
"RTN","SROAL1",47,0)
 ..S SRX=X1_X2,SRX=+SRX,SRX=SRZ_SRX
"RTN","SROAL1",48,0)
 .S SRX="*"
"RTN","SROAL1",49,0)
 S SRAT(SRAT)=SRX D:SRAT(SRAT)["." DEC S SRAD(SRAT)=$E($P(^LR(SRALR,"CH",SRAIDT,0),"^"),1,7),SRADT=SRAIDT
"RTN","SROAL1",50,0)
 Q
"RTN","SROAL1",51,0)
TMCHK W !!,"Do you want to enter 'Time the Operation Began' at this time ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROAL1",52,0)
 S SRYN=$E(SRYN)
"RTN","SROAL1",53,0)
 I "YyNn"'[SRYN W !!,"The time that the operation began must be entered prior to capturing the",!,"preoperative lab data.  Enter 'YES' to input 'Time the Operation Began',",!,"or 'NO' to return to the menu." G TMCHK
"RTN","SROAL1",54,0)
 I "Yy"'[SRYN S SRSOUT=1 Q
"RTN","SROAL1",55,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAL1",56,0)
 .W ! K DR S DR=".22T",DA=SRTN,DIE=130 D ^DIE K DR
"RTN","SROAL1",57,0)
 S SRAOP=$P($G(^SRF(SRTN,.2)),"^",2) I 'SRAOP S SRSOUT=1
"RTN","SROAL1",58,0)
 Q
"RTN","SROAL1",59,0)
DEC ; convert to proper decimal place
"RTN","SROAL1",60,0)
 I +SRAT(SRAT)=SRAT(SRAT)  S SRAT(SRAT)=SRAT(SRAT)+.005\.01*.01 Q
"RTN","SROAL1",61,0)
 S SR1=$E(SRAT(SRAT)),SR2=$E(SRAT(SRAT),2,99),SR2=SR2+.005\.01*.01,SRAT(SRAT)=SR1_SR2
"RTN","SROAL1",62,0)
 Q
"RTN","SROAL1",63,0)
CREAT ; from SROACL1 for creatinine
"RTN","SROAL1",64,0)
 N SRSER,SRP K DIC S DIC=61,DIC(0)="",X="SERUM" D ^DIC S SRSER=+Y K DIC S DIC=61,DIC(0)="",X="PLASMA" D ^DIC K DIC S SRP=+Y
"RTN","SROAL1",65,0)
 S SRLB=0 F SRLB=4,8,20 D
"RTN","SROAL1",66,0)
 .S VALUE=$P($G(^SRF(SRTN,201)),"^",SRLB),SRAOPDT=$P(^SRF(SRTN,0),"^",9) I DT>SRAOPDT,VALUE Q
"RTN","SROAL1",67,0)
 .S SRSOUT=0,SRALR=$S($D(^DPT($P(^SRF(SRTN,0),"^"),"LR")):$P(^("LR"),"^"),1:"")
"RTN","SROAL1",68,0)
 .S SRAOP=SRAOPDT,SRST=9999999-SRAOP,X1=SRAOP,X2=-30 D C^%DTC S SREND=9999999-X
"RTN","SROAL1",69,0)
 .S SRAT=$S(SRLB=4:7,SRLB=8:11,1:1),SRASP=$P(^SRO(139.2,SRAT,2),"^") K SRADT F SRADN=0:0 S SRADN=$O(^SRO(139.2,SRAT,1,SRADN)) Q:'SRADN  S SRATN=$P(^(SRADN,0),"^") D LABCHK
"RTN","SROAL1",70,0)
 .I $D(SRAT(SRAT)),$$LOCK^SROUTL(SRTN) S $P(^SRF(SRTN,201),"^",SRLB)=SRAT(SRAT),$P(^(202),"^",SRLB)=SRAD(SRAT) D UNLOCK^SROUTL(SRTN)
"RTN","SROAL1",71,0)
 K SRLB
"RTN","SROAL1",72,0)
 Q
"RTN","SROAL11")
0^8^B19052112^B18235736
"RTN","SROAL11",1,0)
SROAL11 ;BIR/ADM - LOAD PREOP LAB DATA (CONTINUED) ;06/27/06
"RTN","SROAL11",2,0)
 ;;3.0; Surgery ;**38,47,65,95,125,153,160**;24 Jun 93;Build 7
"RTN","SROAL11",3,0)
STUFF ; Transfer test data from array to file 130
"RTN","SROAL11",4,0)
 W !!,"..Moving preoperative lab test data to Surgery Risk Assessment file...."
"RTN","SROAL11",5,0)
N4 I $D(SRAT(4)) S X=SRAT(4),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^")=X S $P(^(202),"^")=$S(X'="":SRAD(4),1:"") ; Sodium
"RTN","SROAL11",6,0)
N7 I $D(SRAT(7)) S X=SRAT(7),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",4)=X,$P(^(202),"^",4)=$S(X'="":SRAD(7),1:"") ; Creatinine
"RTN","SROAL11",7,0)
N8 I $D(SRAT(8)) S X=SRAT(8),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",5)=X,$P(^(202),"^",5)=$S(X'="":SRAD(8),1:"") ; BUN
"RTN","SROAL11",8,0)
N11 I $D(SRAT(11)) S X=SRAT(11),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",8)=X,$P(^(202),"^",8)=$S(X'="":SRAD(11),1:"") ; Albumin
"RTN","SROAL11",9,0)
N13 I $D(SRAT(13)) S X=SRAT(13),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",11)=X,$P(^(202),"^",11)=$S(X'="":SRAD(13),1:"") ; SGOT
"RTN","SROAL11",10,0)
N14 I $D(SRAT(14)) S X=SRAT(14),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",9)=X,$P(^(202),"^",9)=$S(X'="":SRAD(14),1:"") ; Total Bilirubin
"RTN","SROAL11",11,0)
N15 I $D(SRAT(15)) S X=SRAT(15),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",12)=X,$P(^(202),"^",12)=$S(X'="":SRAD(15),1:"") ; Alkaline Phosphatase
"RTN","SROAL11",12,0)
N16 I $D(SRAT(16)) S X=SRAT(16),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",13)=X,$P(^(202),"^",13)=$S(X'="":SRAD(16),1:"") ; White Blood Count
"RTN","SROAL11",13,0)
N17 I $D(SRAT(17)) S X=SRAT(17),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",14)=X,$P(^(202),"^",14)=$S(X'="":SRAD(17),1:"") ; Hematocrit
"RTN","SROAL11",14,0)
N18 I $D(SRAT(18)) S X=SRAT(18),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",15)=X,$P(^(202),"^",15)=$S(X'="":SRAD(18),1:"") ; Platelet Count
"RTN","SROAL11",15,0)
N19 I $D(SRAT(19)) S X=SRAT(19),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",17)=X,$P(^(202),"^",17)=$S(X'="":SRAD(19),1:"") ; PT
"RTN","SROAL11",16,0)
N20 I $D(SRAT(20)) S X=SRAT(20),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",16)=X,$P(^(202),"^",16)=$S(X'="":SRAD(20),1:"") ; PTT
"RTN","SROAL11",17,0)
N25 I $D(SRAT(25)) S X=SRAT(25),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",27)=X,$P(^(202),"^",27)=$S(X'="":SRAD(25),1:"") ; INR
"RTN","SROAL11",18,0)
N26 I $D(SRAT(26)) S X=SRAT(26),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,203),"^",15)=X,$P(^(204),"^",15)=$S(X'="":SRAD(26),1:"") ; ANION GAP
"RTN","SROAL11",19,0)
N27 I $D(SRAT(27)) S X=SRAT(27),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",28)=X,$P(^(202.1),"^")=$S(X'="":SRAD(27),1:"") ; HEMOGLOBIN A1C
"RTN","SROAL11",20,0)
 Q
"RTN","SROAL11",21,0)
CARDIAC ; LOAD CARDIAC LAB DATA (CONTINUED)
"RTN","SROAL11",22,0)
 N SRCRD
"RTN","SROAL11",23,0)
C1 I $D(SRAT(1)) S X=SRAT(1),SRL=1,SRH=7,SRCRD=1 D INPUT S $P(^SRF(SRTN,201),"^",20)=X,$P(^(202),"^",20)=$S(X'="":SRAD(1),1:"") ; Hemoglobin
"RTN","SROAL11",24,0)
C5 I $D(SRAT(5)) S X=SRAT(5),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",23)=X,$P(^(202),"^",23)=$S(X'="":SRAD(5),1:"") ; Potassium (Cardiac)
"RTN","SROAL11",25,0)
C7 I $D(SRAT(7)) S X=SRAT(7),SRL=1,SRH=4,SRCRD=1 D INPUT S $P(^SRF(SRTN,201),"^",4)=X,$P(^(202),"^",4)=$S(X'="":SRAD(7),1:"") ; Creatinine
"RTN","SROAL11",26,0)
C11 I $D(SRAT(11)) S X=SRAT(11),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",8)=X,$P(^(202),"^",8)=$S(X'="":SRAD(11),1:"") ; Albumin
"RTN","SROAL11",27,0)
C14 I $D(SRAT(14)) S X=SRAT(14),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",24)=X,$P(^(202),"^",24)=$S(X'="":SRAD(14),1:"") ; Total Bilirubin (Cardiac)
"RTN","SROAL11",28,0)
C21 I $D(SRAT(21)) S X=SRAT(21),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",21)=X,$P(^(202),"^",21)=$S(X'="":SRAD(21),1:"") ; HDL
"RTN","SROAL11",29,0)
C22 I $D(SRAT(22)) S X=SRAT(22),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",22)=X,$P(^(202),"^",22)=$S(X'="":SRAD(22),1:"") ; Triglyceride
"RTN","SROAL11",30,0)
C23 I $D(SRAT(23)) S X=SRAT(23),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",25)=X,$P(^(202),"^",25)=$S(X'="":SRAD(23),1:"") ; LDL
"RTN","SROAL11",31,0)
C24 I $D(SRAT(24)) S X=SRAT(24),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",26)=X,$P(^(202),"^",26)=$S(X'="":SRAD(24),1:"") ; Cholesterol
"RTN","SROAL11",32,0)
C27 I $D(SRAT(27)) S X=SRAT(27),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",28)=X,$P(^(202.1),"^")=$S(X'="":SRAD(27),1:"") ; HEMOGLOBIN A1C
"RTN","SROAL11",33,0)
 Q
"RTN","SROAL11",34,0)
INPUT ; input checking
"RTN","SROAL11",35,0)
 N SRX,SRY I $D(SRCRD),X="NS" S X=""
"RTN","SROAL11",36,0)
 K SRCRD I X="NS"!(X="") Q
"RTN","SROAL11",37,0)
 I $L(X)<SRL S X="" Q
"RTN","SROAL11",38,0)
 S SRX=X,SRY="" S:" <>"[$E(X) SRY=$E(X),SRX=$E(X,2,99)
"RTN","SROAL11",39,0)
 I +SRX'=SRX S X="" Q
"RTN","SROAL11",40,0)
 I $L(X)>SRH D
"RTN","SROAL11",41,0)
 .I SRX["." S SRX=SRX+.05\.1*.1,X=SRY_SRX I $L(X)>SRH S SRX=SRX+.5\1,X=SRY_SRX
"RTN","SROAL11",42,0)
 .I $L(X)>SRH S X=""
"RTN","SROAL11",43,0)
 Q
"RTN","SROAL2")
0^68^B19510513^B18933004
"RTN","SROAL2",1,0)
SROAL2 ;BIR/ADM - LOAD POSTOPERATIVE LAB DATA ;02/14/07
"RTN","SROAL2",2,0)
 ;;3.0; Surgery ;**18,38,47,54,65,71,88,100,125,153,160**;24 Jun 93;Build 7
"RTN","SROAL2",3,0)
 ;
"RTN","SROAL2",4,0)
 ; Reference to ^LR( supported by DBIA #194
"RTN","SROAL2",5,0)
 ;
"RTN","SROAL2",6,0)
 Q:'$D(SRTN)  N SRBLUD K SRAD,SRAT S SRSOUT=0
"RTN","SROAL2",7,0)
 W !!,"This selection loads highest or lowest lab data for tests performed within",!,"30 days after the operation."
"RTN","SROAL2",8,0)
YEP W !!,"Do you want to automatically load postoperative lab data ?  YES//  " R SRYN:DTIME G:'$T!(SRYN["^") END
"RTN","SROAL2",9,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter <RET> to automatically load postoperative lab data from the patient's lab record, or 'NO' to return to the menu." G YEP
"RTN","SROAL2",10,0)
 I "Yy"'[SRYN W !!,"Lab data NOT loaded." G END
"RTN","SROAL2",11,0)
START S SRALR=$S($D(^DPT($P(^SRF(SRTN,0),"^"),"LR")):$P(^("LR"),"^"),1:"")
"RTN","SROAL2",12,0)
 S SRAOP=$P($G(^SRF(SRTN,.2)),"^",3) I 'SRAOP W !!,"'Time the Operation Ends' must be entered before continuing." D TMCHK G:SRSOUT END
"RTN","SROAL2",13,0)
 S SREND=9999999-SRAOP,X1=SRAOP,X2=30 D C^%DTC S SRST=9999999-X
"RTN","SROAL2",14,0)
SRAT ; Get test from file 139.2.
"RTN","SROAL2",15,0)
 W !!,"..Searching lab record for postoperative lab test data...."
"RTN","SROAL2",16,0)
 K DIC S DIC=61,DIC(0)="",X="SERUM" D ^DIC S SRSER=+Y K DIC S DIC=61,DIC(0)="",X="PLASMA" D ^DIC K DIC S SRP=+Y
"RTN","SROAL2",17,0)
 K DIC S DIC=61,DIC(0)="",X="BLOOD" D ^DIC S SRBLUD=+Y
"RTN","SROAL2",18,0)
 S SRFLG="H" F SRAT=2,3,4,5,7,9,10,14,16,26 S SRASP=$P(^SRO(139.2,SRAT,2),"^") D SRADN,NS
"RTN","SROAL2",19,0)
 S SRFLG="L" F SRAT=4,5,17 S SRASP=$P(^SRO(139.2,SRAT,2),"^") D SRADN,NS
"RTN","SROAL2",20,0)
 I $$LOCK^SROUTL(SRTN) D ^SROAL21,UNLOCK^SROUTL(SRTN)
"RTN","SROAL2",21,0)
END I 'SRSOUT W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROAL2",22,0)
 W @IOF
"RTN","SROAL2",23,0)
 Q
"RTN","SROAL2",24,0)
SRADN ; Get data name(s) for test, make call to check lab record.
"RTN","SROAL2",25,0)
 F SRADN=0:0 S SRADN=$O(^SRO(139.2,SRAT,1,SRADN)) Q:SRADN'>0  S SRATN=$P(^(SRADN,0),"^") D LABCHK
"RTN","SROAL2",26,0)
 Q
"RTN","SROAL2",27,0)
LABCHK ; Get test values from patient's lab record.
"RTN","SROAL2",28,0)
 S SRX="" I SRALR F SRAIDT=SRST:0 S SRAIDT=$O(^LR(SRALR,"CH",SRAIDT)) Q:SRAIDT'>0!(SRAIDT>SREND)  I $D(^(SRAIDT,SRATN)) S SRSP=$P(^(0),"^",5) D  Q:(SRFLG="H"&(SRX[">"))!(SRFLG="L"&(SRX["<"))  I SRX="*" D STAR
"RTN","SROAL2",29,0)
 .I (SRAT>1&(SRAT<16))!(SRAT=26)!(SRAT>20&(SRAT<25)),SRSP=SRSER!(SRSP=SRP)!(SRSP=SRBLUD) D COMP Q
"RTN","SROAL2",30,0)
 .I SRSP=SRASP D COMP Q
"RTN","SROAL2",31,0)
 Q
"RTN","SROAL2",32,0)
COMP S SRAVAL=$P(^LR(SRALR,"CH",SRAIDT,SRATN),"^") I $P(^LR(SRALR,"CH",SRAIDT,0),"^",3)'="","canccommentpending"'[SRAVAL,SRAVAL'["CANC" D DATA
"RTN","SROAL2",33,0)
 I $D(SRAT(SRFLG,SRAT)),SRAT(SRFLG,SRAT)["." D
"RTN","SROAL2",34,0)
 .I SRAT(SRFLG,SRAT)=+SRAT(SRFLG,SRAT) S SRAT(SRFLG,SRAT)=SRAT(SRFLG,SRAT)+.005\.01*.01 Q
"RTN","SROAL2",35,0)
 .S SR1=$E(SRAT(SRFLG,SRAT)),SR2=$E(SRAT(SRFLG,SRAT),2,99),SR2=SR2+.005\.01*.01,SRAT(SRFLG,SRAT)=SR1_SR2
"RTN","SROAL2",36,0)
 Q
"RTN","SROAL2",37,0)
NS ; check for no sample
"RTN","SROAL2",38,0)
 I '$D(SRAT(SRFLG,SRAT)) S SRAT(SRFLG,SRAT)="NS",SRAD(SRFLG,SRAT)=""
"RTN","SROAL2",39,0)
 Q
"RTN","SROAL2",40,0)
STAR ; questional result, require manual input
"RTN","SROAL2",41,0)
 S (SRAT(SRFLG,SRAT),SRAD(SRFLG,SRAT))=""
"RTN","SROAL2",42,0)
 Q
"RTN","SROAL2",43,0)
DATA ; Decide to save test result or not
"RTN","SROAL2",44,0)
 N SRSWAP,SRVAL S SRSWAP=0
"RTN","SROAL2",45,0)
 S (SRT,SRX)=SRAVAL I +SRAVAL'=SRAVAL D CONV Q:SRX="*"  S (SRT,SRAVAL)=SRZ_SRX
"RTN","SROAL2",46,0)
 I $D(SRAT(SRFLG,SRAT)) S SRT1=SRAT(SRFLG,SRAT) D  I SRSWAP S SRAT(SRFLG,SRAT)=SRAVAL,SRAD(SRFLG,SRAT)=$E($P(^LR(SRALR,"CH",SRAIDT,0),"^"),1,7) Q
"RTN","SROAL2",47,0)
 .I SRFLG="H" Q:SRT1[">"  D
"RTN","SROAL2",48,0)
 ..I SRT[">" S SRSWAP=1 Q
"RTN","SROAL2",49,0)
 ..S SRVAL=SRX,SRX=SRT1 D CONV I SRVAL>SRX S SRSWAP=1 Q
"RTN","SROAL2",50,0)
 .I SRFLG="L" Q:SRT1["<"  D
"RTN","SROAL2",51,0)
 ..I SRT["<" S SRSWAP=1 Q
"RTN","SROAL2",52,0)
 ..S SRVAL=SRX,SRX=SRT1 D CONV I SRVAL<SRX S SRSWAP=1 Q
"RTN","SROAL2",53,0)
 I '$D(SRAT(SRFLG,SRAT)) S SRAT(SRFLG,SRAT)=SRAVAL,SRAD(SRFLG,SRAT)=$E($P(^LR(SRALR,"CH",SRAIDT,0),"^"),1,7)
"RTN","SROAL2",54,0)
 Q
"RTN","SROAL2",55,0)
TMCHK W !!,"Do you want to enter the time that the operation was completed at ",!,"this time ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROAL2",56,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter 'YES' to input 'Time the Operation Ends' or ",!,"'NO' to return to the menu." G TMCHK
"RTN","SROAL2",57,0)
 I "Yy"'[SRYN S SRSOUT=1 Q
"RTN","SROAL2",58,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAL2",59,0)
 .W ! K DR S DR=".23T",DA=SRTN,DIE=130 D ^DIE K DR S SRAOP=$P($G(^SRF(SRTN,.2)),"^",3) I 'SRAOP S SRSOUT=1
"RTN","SROAL2",60,0)
 Q
"RTN","SROAL2",61,0)
CONV ; convert value to numeric for comparison
"RTN","SROAL2",62,0)
 N SRELSE,X1,X2 S SRZ="" I " <>"[$E(SRX) S SRZ=$E(SRX),SRX=$E(SRX,2,99)
"RTN","SROAL2",63,0)
 I SRX?.N0.1".".N D  Q
"RTN","SROAL2",64,0)
 .I SRX'["." S SRX=+SRX Q
"RTN","SROAL2",65,0)
 .S X1=$P(SRX,"."),X1=+X1 S:X1=0 X1=""
"RTN","SROAL2",66,0)
 .S X2="."_$P(SRX,".",2),X2=+X2 S:X2=0 X2=""
"RTN","SROAL2",67,0)
 .S SRX=X1_X2,SRX=+SRX
"RTN","SROAL2",68,0)
 S SRX="*"
"RTN","SROAL2",69,0)
 Q
"RTN","SROALC")
0^47^B10775491^B10589627
"RTN","SROALC",1,0)
SROALC ;BIR/MAM - COMPLETE ASSESSMENTS ;01/18/06
"RTN","SROALC",2,0)
 ;;3.0; Surgery ;**38,50,142,153,160**;24 Jun 93;Build 7
"RTN","SROALC",3,0)
 I $E(IOST)="P" D ^SROALCP Q
"RTN","SROALC",4,0)
 S SRSOUT=0 D HDR
"RTN","SROALC",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROALC",6,0)
 Q
"RTN","SROALC",7,0)
SET ; print assessments
"RTN","SROALC",8,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALC",9,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALC",10,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALC",11,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALC",12,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALC",13,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALC",14,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALC",15,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALC",16,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALC",17,0)
 D TECH^SROPRIN
"RTN","SROALC",18,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALC",19,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3)
"RTN","SROALC",20,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALC",21,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALC",22,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALC",23,0)
 Q
"RTN","SROALC",24,0)
OTHER ; other operations
"RTN","SROALC",25,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALC",26,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALC",27,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALC",28,0)
 Q
"RTN","SROALC",29,0)
LOOP ; break procedures
"RTN","SROALC",30,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALC",31,0)
 Q
"RTN","SROALC",32,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALC",33,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALC",34,0)
HDR W @IOF,!,?27,"COMPLETED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALC",35,0)
 Q
"RTN","SROALCP")
0^15^B10185864^B10000827
"RTN","SROALCP",1,0)
SROALCP ;BIR/MAM - COMPLETE ASSESSMENTS (PRINTER) ;01/18/07
"RTN","SROALCP",2,0)
 ;;3.0; Surgery ;**32,50,142,153,160**;24 Jun 93;Build 7
"RTN","SROALCP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALCP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROALCP",5,0)
 Q
"RTN","SROALCP",6,0)
SET ; print assessments
"RTN","SROALCP",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALCP",8,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALCP",9,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALCP",10,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALCP",11,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALCP",12,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALCP",13,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALCP",14,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCP",15,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALCP",16,0)
 D TECH^SROPRIN
"RTN","SROALCP",17,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALCP",18,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1) I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALCP",19,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALCP",20,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALCP",21,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALCP",22,0)
 Q
"RTN","SROALCP",23,0)
OTHER ; other operations
"RTN","SROALCP",24,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALCP",25,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALCP",26,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALCP",27,0)
 Q
"RTN","SROALCP",28,0)
LOOP ; break procedures
"RTN","SROALCP",29,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<81  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALCP",30,0)
 Q
"RTN","SROALCP",31,0)
HDR ; print heading
"RTN","SROALCP",32,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALCP",33,0)
 W:$Y @IOF W !,?53,"COMPLETED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALCP",34,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALCP",35,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",! F LINE=1:1:132 W "="
"RTN","SROALCP",36,0)
 Q
"RTN","SROALCS")
0^16^B14078478^B13891688
"RTN","SROALCS",1,0)
SROALCS ;BIR/MAM - COMPLETE ASSESSMENTS ;01/18/07
"RTN","SROALCS",2,0)
 ;;3.0; Surgery ;**38,50,142,153,160**;24 Jun 93;Build 7
"RTN","SROALCS",3,0)
 I $E(IOST)="P" D ^SROALCSP Q
"RTN","SROALCS",4,0)
 K ^TMP("SRA",$J)
"RTN","SROALCS",5,0)
 S SRSOUT=0 D HDR
"RTN","SROALCS",6,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALCS",7,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALCS",8,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALCS",9,0)
 Q
"RTN","SROALCS",10,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALCS",11,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALCS",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALCS",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCS",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALCS",15,0)
 Q
"RTN","SROALCS",16,0)
SET ; print assessments
"RTN","SROALCS",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALCS",18,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALCS",19,0)
 S SRA(0)=^SRF(SRTN,0),SR("RA")=^SRF(SRTN,"RA"),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALCS",20,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALCS",21,0)
 S SRC="",Y=$E($P(SR("RA"),"^",5),1,7) I Y D D^DIQ S SRC=Y
"RTN","SROALCS",22,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALCS",23,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALCS",24,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALCS",25,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCS",26,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALCS",27,0)
 D TECH^SROPRIN
"RTN","SROALCS",28,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALCS",29,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,SRC,!,SRDT,?20,SROPS(1),?55,SRTECH S SRAO=1 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALCS",30,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALCS",31,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALCS",32,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALCS",33,0)
 Q
"RTN","SROALCS",34,0)
OTHER ; other operations
"RTN","SROALCS",35,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALCS",36,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALCS",37,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALCS",38,0)
 Q
"RTN","SROALCS",39,0)
LOOP ; break procedures
"RTN","SROALCS",40,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALCS",41,0)
 Q
"RTN","SROALCS",42,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALCS",43,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALCS",44,0)
HDR W @IOF,!,?27,"COMPLETED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"DATE COMPLETED",!,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALCS",45,0)
 Q
"RTN","SROALCS",46,0)
SS ; print surgical specialty
"RTN","SROALCS",47,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALCS",48,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALCS",49,0)
 Q
"RTN","SROALCSP")
0^17^B12320846^B12135710
"RTN","SROALCSP",1,0)
SROALCSP ;BIR/MAM - COMPLETE ASSESSMENTS (PRINTER) ;01/18/07
"RTN","SROALCSP",2,0)
 ;;3.0; Surgery ;**32,50,142,153,160**;24 Jun 93;Build 7
"RTN","SROALCSP",3,0)
 K ^TMP("SRA",$J) S SRPAGE=0,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALCSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALCSP",5,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALCSP",6,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALCSP",7,0)
 Q
"RTN","SROALCSP",8,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALCSP",9,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALCSP",10,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALCSP",11,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCSP",12,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALCSP",13,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALCSP",14,0)
 Q
"RTN","SROALCSP",15,0)
SET ; print assessments
"RTN","SROALCSP",16,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALCSP",17,0)
 I $Y+5>IOSL D HDR I SRSOUT Q
"RTN","SROALCSP",18,0)
 S SRA(0)=^SRF(SRTN,0),SR("RA")=^SRF(SRTN,"RA"),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALCSP",19,0)
 S SRC="",Y=$E($P(SR("RA"),"^",5),1,7) I Y D D^DIQ S SRC=Y
"RTN","SROALCSP",20,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALCSP",21,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALCSP",22,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALCSP",23,0)
 D TECH^SROPRIN
"RTN","SROALCSP",24,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALCSP",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,SRC,?107,SRTECH,!,SRDT,?20,SROPS(1) S SRAO=1 F I=0:0 S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALCSP",26,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALCSP",27,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALCSP",28,0)
 D LINE
"RTN","SROALCSP",29,0)
 Q
"RTN","SROALCSP",30,0)
OTHER ; other operations
"RTN","SROALCSP",31,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALCSP",32,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALCSP",33,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALCSP",34,0)
 Q
"RTN","SROALCSP",35,0)
LOOP ; break procedures
"RTN","SROALCSP",36,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALCSP",37,0)
 Q
"RTN","SROALCSP",38,0)
HDR ; print heading
"RTN","SROALCSP",39,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALCSP",40,0)
 S SRPAGE=SRPAGE+1 W:$Y @IOF W !,?53,"COMPLETED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALCSP",41,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALCSP",42,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"DATE COMPLETED",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",! F LINE=1:1:132 W "="
"RTN","SROALCSP",43,0)
 Q
"RTN","SROALCSP",44,0)
SS ; print surgical specialty
"RTN","SROALCSP",45,0)
 I $Y+5>IOSL D HDR
"RTN","SROALCSP",46,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALCSP",47,0)
 Q
"RTN","SROALCSP",48,0)
LINE W ! F L=1:1:132 W "-"
"RTN","SROALCSP",49,0)
 Q
"RTN","SROALDP")
0^9^B3567455^B3261436
"RTN","SROALDP",1,0)
SROALDP ;BIR/MAM - DISPLAY PREOP LABS ;01/25/07
"RTN","SROALDP",2,0)
 ;;3.0; Surgery ;**38,47,81,125,153,160**;24 Jun 93;Build 7
"RTN","SROALDP",3,0)
 S SRPAGE="PAGE: 1 OF 2",SRHDR(.5)="LATEST PREOP LAB RESULTS IN 90 DAYS PRIOR TO SURGERY UNLESS OTHERWISE SPECIFIED" D HDR^SROAUTL
"RTN","SROALDP",4,0)
 W !," 1. Anion Gap (in 48 hrs.):",?31,$J($P(SRAO(1),"^"),6),?40,$P(SRAO(1),"^",2)
"RTN","SROALDP",5,0)
 W !," 2. Serum Sodium: ",?31,$J($P(SRAO(2),"^"),6),?40,$P(SRAO(2),"^",2)
"RTN","SROALDP",6,0)
 W !," 3. BUN:",?31,$J($P(SRAO(3),"^"),6),?40,$P(SRAO(3),"^",2)
"RTN","SROALDP",7,0)
 W !," 4. Serum Creatinine: ",?31,$J($P(SRAO(4),"^"),6),?40,$P(SRAO(4),"^",2)
"RTN","SROALDP",8,0)
 W !," 5. Serum Albumin:",?31,$J($P(SRAO(5),"^"),6),?40,$P(SRAO(5),"^",2)
"RTN","SROALDP",9,0)
 W !," 6. Total Bilirubin:",?31,$J($P(SRAO(6),"^"),6),?40,$P(SRAO(6),"^",2)
"RTN","SROALDP",10,0)
 W !," 7. SGOT:",?31,$J($P(SRAO(7),"^"),6),?40,$P(SRAO(7),"^",2)
"RTN","SROALDP",11,0)
 W !," 8. Alkaline Phosphatase:",?31,$J($P(SRAO(8),"^"),6),?40,$P(SRAO(8),"^",2)
"RTN","SROALDP",12,0)
 W !," 9. WBC:",?31,$J($P(SRAO(9),"^"),6),?40,$P(SRAO(9),"^",2)
"RTN","SROALDP",13,0)
 W !,"10. Hematocrit:",?31,$J($P(SRAO(10),"^"),6),?40,$P(SRAO(10),"^",2)
"RTN","SROALDP",14,0)
 W !,"11. Platelet Count:",?31,$J($P(SRAO(11),"^"),6),?40,$P(SRAO(11),"^",2)
"RTN","SROALDP",15,0)
 W !,"12. PTT: ",?31,$J($P(SRAO(12),"^"),6),?40,$P(SRAO(12),"^",2)
"RTN","SROALDP",16,0)
 W !,"13. PT: ",?31,$J($P(SRAO(13),"^"),6),?40,$P(SRAO(13),"^",2)
"RTN","SROALDP",17,0)
 W !,"14. INR: ",?31,$J($P(SRAO(14),"^"),6),?40,$P(SRAO(14),"^",2)
"RTN","SROALDP",18,0)
 W !,"15. Hemoglobin A1c (1000 days):",?31,$J($P(SRAO(15),"^"),6),?40,$P(SRAO(15),"^",2)
"RTN","SROALDP",19,0)
 W ! F MOE=1:1:80 W "-"
"RTN","SROALDP",20,0)
 Q
"RTN","SROALEC")
0^45^B22392220^n/a
"RTN","SROALEC",1,0)
SROALEC ;BIR/ADM - LIST OF ELIGIBLE CASES ;05/04/07
"RTN","SROALEC",2,0)
 ;;3.0; Surgery ;**160**;24 Jun 93;Build 7
"RTN","SROALEC",3,0)
 S (GRAND,SRNEW,SRSOUT,TOT)=0,(SRHDR,SRPAGE)=1,SRTITLE="CASES ELIGIBLE FOR ASSESSMENT" K ^TMP("SRA",$J)
"RTN","SROALEC",4,0)
 I SRFLG,SRASP S SRSPEC=$P(^SRO(137.45,SRASP,0),"^")
"RTN","SROALEC",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALEC",6,0)
 I SRSP S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""  D SRSD Q:SRSOUT  D:TOT TOT
"RTN","SROALEC",7,0)
 I 'SRSP S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALEC",8,0)
 Q:SRSOUT  I SRSP,'SRFLG,GRAND D GRAND
"RTN","SROALEC",9,0)
 I SRFLG,'GRAND S SRSS=SRSPEC D HDR,GRAND
"RTN","SROALEC",10,0)
 I SRSP,'SRFLG,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALEC",11,0)
 I 'SRSP,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALEC",12,0)
 I 'SRSP,GRAND S SRSS="" D GRAND
"RTN","SROALEC",13,0)
 Q
"RTN","SROALEC",14,0)
UTL ; set up TMP global
"RTN","SROALEC",15,0)
 N SRCPLT
"RTN","SROALEC",16,0)
 I '$P($G(^SRF(SRTN,.2)),"^",3)&'$P($G(^SRF(SRTN,.2)),"^",12) Q
"RTN","SROALEC",17,0)
 I $P($G(^SRF(SRTN,30)),"^") Q
"RTN","SROALEC",18,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALEC",19,0)
 S SRCPLT=$P($G(^SRO(136,SRTN,10)),"^") I SRCPLT,'$$XL^SROAX(SRTN) Q
"RTN","SROALEC",20,0)
 S SRA=$G(^SRF(SRTN,"RA"))
"RTN","SROALEC",21,0)
 I SRSP S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED"),^TMP("SRA",$J,SRSS,SRSD,SRTN)=SRA Q
"RTN","SROALEC",22,0)
 S ^TMP("SRA",$J,SRSD,SRTN)=SRA
"RTN","SROALEC",23,0)
 Q
"RTN","SROALEC",24,0)
SRSD S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSS,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALEC",25,0)
 Q
"RTN","SROALEC",26,0)
CASE N SRA2 S SRA2=$P(SRA,"^",2) D
"RTN","SROALEC",27,0)
 .I SRA2="" S SRATYPE="NOT LOGGED" Q
"RTN","SROALEC",28,0)
 .I SRA2="N" D  Q
"RTN","SROALEC",29,0)
 .. I $P(SRA,"^",6)="N" S SRATYPE="EXCLUDED" Q
"RTN","SROALEC",30,0)
 .. S SRATYPE="NON-CARDIAC"
"RTN","SROALEC",31,0)
 .I SRA2="C" S SRATYPE="CARDIAC"
"RTN","SROALEC",32,0)
 S TOT=TOT+1,GRAND=GRAND+1 D PRINT
"RTN","SROALEC",33,0)
 Q
"RTN","SROALEC",34,0)
PRINT ; print case info
"RTN","SROALEC",35,0)
 N SRDA,SRPROCS,SRY S SRPROCS=""
"RTN","SROALEC",36,0)
 I $Y+6>IOSL!SRNEW D PAGE I SRSOUT Q
"RTN","SROALEC",37,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALEC",38,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALEC",39,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALEC",40,0)
 K SROPS,MM,MMM S:$L(SROPER)<63 SROPS(1)=SROPER I $L(SROPER)>62 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALEC",41,0)
 S X=$P(SRA,"^"),SRSTATUS=$S(X="T":"TRANSMITTED",X="C":"COMPLETE",X="I":"INCOMPLETE",1:"NO ASSESSMENT"),Y=SRSD D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALEC",42,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALEC",43,0)
 W !,SRTN,?18,SRANM_" "_VA("PID"),?53,SRATYPE,?67,SRSTATUS,!,SRDT F I=1:1 Q:'$D(SROPS(I))  W ?18,SROPS(I),!
"RTN","SROALEC",44,0)
 S SRY=$P($G(^SRO(136,SRTN,0)),"^",2) I SRY D CPT S SRPROCS=SRCODE
"RTN","SROALEC",45,0)
 S SRDA=0 F  S SRDA=$O(^SRO(136,SRTN,3,SRDA)) Q:'SRDA  S SRY=$P($G(^SRO(136,SRTN,3,SRDA,0)),"^") I SRY D CPT D
"RTN","SROALEC",46,0)
 .S SRPROCS=SRPROCS_", "_SRCODE
"RTN","SROALEC",47,0)
 I '$P($G(^SRO(136,SRTN,10)),"^"),$L(SRPROCS) W !,">>> Final CPT Coding is not complete."
"RTN","SROALEC",48,0)
 S:SRPROCS="" SRPROCS="NOT ENTERED" W !,"CPT Codes: ",SRPROCS
"RTN","SROALEC",49,0)
 I 'SRSOUT W ! F LINE=1:1:80 W "-"
"RTN","SROALEC",50,0)
 Q
"RTN","SROALEC",51,0)
CPT ; check code for exclusion and get output value
"RTN","SROALEC",52,0)
 N Y,SREX S (SRCODE,SREX)=""
"RTN","SROALEC",53,0)
 S Y=$$CPT^ICPTCOD(SRY,$P(SRSD,".")),SRCODE=$P(Y,"^",2)
"RTN","SROALEC",54,0)
 S SREX="" I '$D(^SRO(137,SRY,0)) S SREX="*"
"RTN","SROALEC",55,0)
 S SRCODE=SREX_SRCODE
"RTN","SROALEC",56,0)
 Q
"RTN","SROALEC",57,0)
OTHER ; other operations
"RTN","SROALEC",58,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALEC",59,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALEC",60,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALEC",61,0)
 Q
"RTN","SROALEC",62,0)
LOOP ; break procedures
"RTN","SROALEC",63,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<63  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALEC",64,0)
 Q
"RTN","SROALEC",65,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROALEC",66,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALEC",67,0)
 I X["?" W !!,"If you want to continue the listing, press the 'Enter' key.",!,"Type '^' to return to the menu." G PAGE
"RTN","SROALEC",68,0)
HDR ; print heading
"RTN","SROALEC",69,0)
 W @IOF,!,?(80-$L(SRTITLE)\2),SRTITLE,?70,$J("PAGE "_SRPAGE,9) W:$E(IOST)="P" !,?(80-$L(SRINST)\2),SRINST W !,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALEC",70,0)
 W:$E(IOST)="P" !,?(80-$L(SRPRINT)\2),SRPRINT
"RTN","SROALEC",71,0)
 W !!,?50,"'*' Denotes Eligible CPT Code" I SRSP,SRSS'="" W !,">>> "_SRSS
"RTN","SROALEC",72,0)
 W !!,"CASE #",?18,"PATIENT",?53,"TYPE",?67,"STATUS",!,"OP DATE",?18,"OPERATION(S)",! F LINE=1:1:80 W "="
"RTN","SROALEC",73,0)
 S SRHDR=0,SRNEW=0,SRPAGE=SRPAGE+1
"RTN","SROALEC",74,0)
 Q
"RTN","SROALEC",75,0)
TOT W !!,"TOTAL FOR "_SRSS_": ",TOT
"RTN","SROALEC",76,0)
 Q
"RTN","SROALEC",77,0)
GRAND I 'SRSP W !!,"TOTAL: ",GRAND Q
"RTN","SROALEC",78,0)
 I SRSP,'SRFLG W !!,"TOTAL FOR ALL SPECIALTIES: ",GRAND Q
"RTN","SROALEC",79,0)
 I SRSP,SRFLG S SRSS=SRSPEC D TOT
"RTN","SROALEC",80,0)
 Q
"RTN","SROALEN")
0^10^B11769493^B11769217
"RTN","SROALEN",1,0)
SROALEN ;BIR/MAM - LAB INFO ;01/27/06
"RTN","SROALEN",2,0)
 ;;3.0; Surgery ;**38,100,125,153,160**;24 Jun 93;Build 7
"RTN","SROALEN",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROALEN",4,0)
 S SRSOUT=0 D ^SROAUTL
"RTN","SROALEN",5,0)
START G:SRSOUT END K SRA,SRAO D ^SROALN1,^SROALDP
"RTN","SROALEN",6,0)
ASK W !!,"Select Preoperative Laboratory Information to Edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 D CONCC G END
"RTN","SROALEN",7,0)
 I X="" D CONCC,^SROALN2 G END
"RTN","SROALEN",8,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROALEN",9,0)
 I X="A" S X="1:15"
"RTN","SROALEN",10,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>15)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROALEN",11,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROALEN",12,0)
 I X?.N1":".N D RANGE G START
"RTN","SROALEN",13,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROALEN",14,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROALEN",15,0)
END W @IOF
"RTN","SROALEN",16,0)
 Q
"RTN","SROALEN",17,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROALEN",18,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-15) to update the information in that field.  (For",!,"   example, enter '3' to update Preoperative BUN)"
"RTN","SROALEN",19,0)
 W !!,"3. Enter a range of numbers (1-15) separated by a ':' to enter a range of",!,"   information.  (For example, enter '2:4' to update Serum Sodium,",!,"   BUN, and Serum Creatinine)"
"RTN","SROALEN",20,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROALEN",21,0)
 Q
"RTN","SROALEN",22,0)
RANGE ; range of numbers
"RTN","SROALEN",23,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROALEN",24,0)
 .S SRNOMORE=0,SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRNOMORE  D ONE
"RTN","SROALEN",25,0)
 Q
"RTN","SROALEN",26,0)
ONE ; edit one item
"RTN","SROALEN",27,0)
 I EMILY>15 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",4)_"T;"_$P(SRAO(EMILY),"^",5)_"T;"_$P(SRAO(EMILY),"^",6)_"T",DIE=130 D ^DIE S:$D(Y) SRNOMORE=1 K DR Q
"RTN","SROALEN",28,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",3)_"T;"_$P(SRAO(EMILY),"^",4)_"T",DIE=130 D ^DIE S:$D(Y) SRNOMORE=1 K DR
"RTN","SROALEN",29,0)
 Q
"RTN","SROALEN",30,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALEN",31,0)
 Q
"RTN","SROALEN",32,0)
CONCC ; check for concurrent case and update if one exists
"RTN","SROALEN",33,0)
 Q:'$$LOCK^SROUTL(SRTN)
"RTN","SROALEN",34,0)
 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") Q:'SRCON
"RTN","SROALEN",35,0)
 S SRI="" F  S SRI=$O(SRAO(SRI)) Q:SRI=""  S S1=$P(SRAO(SRI),"^",3),S2=$P(SRAO(SRI),"^",4) K DA,DIC,DIQ,DR,SRY D
"RTN","SROALEN",36,0)
 .S DA=SRTN,DR=S1_";"_S2,DIC="^SRF(",DIQ="SRY",DIQ(0)="I" D EN^DIQ1 S P1=SRY(130,SRTN,S1,"I") S:P1="" P1="@" S P2=SRY(130,SRTN,S2,"I") S:P2="" P2="@"
"RTN","SROALEN",37,0)
 .K DA,DIE,DR S DA=SRCON,DIE=130,DR=S1_"////"_P1_";"_S2_"////"_P2 D ^DIE K DR
"RTN","SROALEN",38,0)
 D UNLOCK^SROUTL(SRTN)
"RTN","SROALEN",39,0)
 Q
"RTN","SROALET")
0^50^B23195100^B21039720
"RTN","SROALET",1,0)
SROALET ;BIR/MAM - PRINT 30 DAY LETTER ;01/31/07
"RTN","SROALET",2,0)
 ;;3.0; Surgery ;**38,63,95,98,113,153,160**;24 Jun 93;Build 7
"RTN","SROALET",3,0)
 K VADM,VAPA I $P($G(^SRF(SRTN,30)),"^")!'$P($G(^SRF(SRTN,.2)),"^",12) Q
"RTN","SROALET",4,0)
 S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^",6)["N" Q
"RTN","SROALET",5,0)
 I $P(SR("RA"),"^")="" Q
"RTN","SROALET",6,0)
 S DFN=$P(^SRF(SRTN,0),"^") S X=$G(^DPT(DFN,.35)) Q:$P(X,"^")'=""  ; no letter if deceased
"RTN","SROALET",7,0)
 S VAINDT="NOW" D INP^VADPT I $G(VAIN(1)) Q  ; no letter if inpatient
"RTN","SROALET",8,0)
 D DEM^VADPT,ADD^VADPT
"RTN","SROALET",9,0)
 S SRANAME=$P(VADM(1),"^"),X=$P(SRANAME,",")
"RTN","SROALET",10,0)
 S SRSP=$P($G(^SRF(SRTN,0)),"^",4),SRSP="Specialty: "_$E($P($G(^SRO(137.45,SRSP,0)),"^"),1,17) D
"RTN","SROALET",11,0)
 .I X["-" N SRNM,J,Z D  Q
"RTN","SROALET",12,0)
 ..F J=1:1 S Z=$P(X,"-",J) Q:Z=""  S SRNM(J)=$E(Z)_$TR($E(Z,2,$L(Z)),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")
"RTN","SROALET",13,0)
 ..S Y=SRNM(1) F J=2:1 Q:'$D(SRNM(J))  S Y=Y_"-"_SRNM(J)
"RTN","SROALET",14,0)
 .S Y=$E(X)_$TR($E(X,2,$L(X)),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")
"RTN","SROALET",15,0)
 S TITLE=$S($P(VADM(5),"^")="F":"Ms. ",1:"Mr. "),SRANAME=TITLE_Y
"RTN","SROALET",16,0)
 S SRADATE=$E(SRSDATE,4,5)_"/"_$E(SRSDATE,6,7)_"/"_$E(SRSDATE,2,3)
"RTN","SROALET",17,0)
 S Y=DT D D^DIQ S SRDT=Y
"RTN","SROALET",18,0)
 S SEX=$P(VADM(5),"^")
"RTN","SROALET",19,0)
 S SRNM=$P(VADM(1),",",2)_" "_$P(VADM(1),",")
"RTN","SROALET",20,0)
 W:$Y @IOF W !!!!!!!!!!,?4,SRNM,?60,SRDT
"RTN","SROALET",21,0)
 N SRCCADD,SRSPF,SRADO S SRCCADD=0,SRSPF=1
"RTN","SROALET",22,0)
 S Y=$P(^SRF(SRTN,0),"^",9),SRADO=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3) D CCADD
"RTN","SROALET",23,0)
 I 'SRCCADD S STATE="" I VAPA(5) S STATE=$P(^DIC(5,$P(VAPA(5),"^"),0),"^",2)
"RTN","SROALET",24,0)
 I 'SRCCADD D
"RTN","SROALET",25,0)
 .W !,?4,VAPA(1),?48,"Operation Date: ",SRADO
"RTN","SROALET",26,0)
 .I $G(VAPA(2))'="" W !,?4,VAPA(2),?48,SRSP S SRSPF=0
"RTN","SROALET",27,0)
 .I $G(VAPA(3))'="" W !,?4,VAPA(3) I SRSPF W ?48,SRSP S SRSPF=0
"RTN","SROALET",28,0)
 .I $G(VAPA(4))'="" W !,?4,VAPA(4)_", "_STATE_" "_VAPA(6) I SRSPF W ?48,SRSP S SRSPF=0
"RTN","SROALET",29,0)
 I SRSPF W !,?48,SRSP S SRSPF=0
"RTN","SROALET",30,0)
 W !!!,?4,"Dear "_SRANAME_","
"RTN","SROALET",31,0)
MM ;
"RTN","SROALET",32,0)
 N SRDIV S SRDIV=$$SITE^SROUTL0(SRTN) I 'SRDIV D DFLT Q
"RTN","SROALET",33,0)
 I '$O(^SRO(133,SRDIV,5,0)) D DFLT Q
"RTN","SROALET",34,0)
 W ! S SRLINE=0 F  S SRLINE=$O(^SRO(133,SRDIV,5,SRLINE)) Q:'SRLINE  W !,?4,^SRO(133,SRDIV,5,SRLINE,0)
"RTN","SROALET",35,0)
 Q
"RTN","SROALET",36,0)
DFLT W !!,?4,"One month ago, you had an operation at the VA Medical Center.  We are",!,?4,"interested in how you feel.  Have you had any health problems since your",!,?4,"operation ?  We would like to hear from you.  Please take a few minutes"
"RTN","SROALET",37,0)
 W !,?4,"to answer these questions and return this letter in the self-addressed",!,?4,"stamped envelope."
"RTN","SROALET",38,0)
 W !!,?4,"Have you been to a hospital or seen a doctor for any reason since your",!,?4,"operation ?   ___ Yes  ___ No"
"RTN","SROALET",39,0)
 W !!,?4,"If you answered NO, you do not need to answer any more questions.  Please",!,?4,"return this sheet in the self-addressed stamped envelope."
"RTN","SROALET",40,0)
 W !!,?4,"If you have answered YES, please answer the following questions.",!!,?7,"1) Have you been seen in an outpatient clinic or doctor's office ? "
"RTN","SROALET",41,0)
 W !,?10,"___ Yes  ___ No",!!,?10,"Why did you go to the clinic or doctor's office ? ________________"
"RTN","SROALET",42,0)
 W !!,?10,"Where ? (name and location) _____________________  Date ? ________"
"RTN","SROALET",43,0)
 W !!,?10,"Who was your doctor ? ____________________________________________"
"RTN","SROALET",44,0)
 W !!!,?7,"2) Were you admitted to a hospital ?  ___ Yes  ___ No",!!,?10,"Why did you go to the hospital ? _________________________________"
"RTN","SROALET",45,0)
 W !!,?10,"Where ? (name and location) _____________________  Date ? ________"
"RTN","SROALET",46,0)
 W !!,?10,"Who was your doctor ? ____________________________________________"
"RTN","SROALET",47,0)
 W !!!,?4,"Please return this letter whether or not you have had any medical problems.",!,?4,"Your health and opinion are important to us.  Thank You.",!!,?4,"Sincerely,",!!!,?4,"Surgical Clinical Nurse Reviewer"
"RTN","SROALET",48,0)
 Q
"RTN","SROALET",49,0)
 ;
"RTN","SROALET",50,0)
CCADD ; Get Confidential Correspondence Address if one is active
"RTN","SROALET",51,0)
 ; and has the category "all other".
"RTN","SROALET",52,0)
 ;
"RTN","SROALET",53,0)
 N NSTATE S NSTATE=""
"RTN","SROALET",54,0)
 ; See if CC address exists
"RTN","SROALET",55,0)
 I '$G(VAPA(12)) Q
"RTN","SROALET",56,0)
 ; code to check the CC category in the variable array VAPA(22)
"RTN","SROALET",57,0)
 I $P($G(VAPA(22,5)),"^",3)'="Y" Q
"RTN","SROALET",58,0)
 ; if the category "All Other" is active, set SRCCADD=1 and print the CC address
"RTN","SROALET",59,0)
 S SRCCADD=1
"RTN","SROALET",60,0)
 S:$G(VAPA(17)) NSTATE=$P(^DIC(5,$P(VAPA(17),"^"),0),"^",2)
"RTN","SROALET",61,0)
 W:$G(VAPA(13))'="" !,?4,VAPA(13) W:$G(VAPA(14))'="" !,?4,VAPA(14) W:$G(VAPA(15))'="" !,?4,VAPA(15) W:$G(VAPA(16))'="" !,?4,VAPA(16)_", "_NSTATE_" "_$P(VAPA(18),"^",2)
"RTN","SROALET",62,0)
 Q
"RTN","SROALL")
0^18^B13177619^B13021527
"RTN","SROALL",1,0)
SROALL ;BIR/MAM - ALL ASSESSMENTS ;01/18/07
"RTN","SROALL",2,0)
 ;;3.0; Surgery ;**32,38,47,55,50,88,142,153,160**;24 Jun 93;Build 7
"RTN","SROALL",3,0)
 I $E(IOST)="P" D ^SROALLP Q
"RTN","SROALL",4,0)
 S SRSOUT=0 D HDR F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROALL",5,0)
 Q
"RTN","SROALL",6,0)
SET ; print assessments
"RTN","SROALL",7,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALL",8,0)
 S SRA(0)=^SRF(SRTN,0) I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALL",9,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALL",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALL",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALL",12,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALL",13,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALL",14,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALL",15,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALL",16,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALL",17,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALL",18,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALL",19,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALL",20,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALL",21,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALL",22,0)
 D TECH^SROPRIN
"RTN","SROALL",23,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALL",24,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH
"RTN","SROALL",25,0)
 I $G(SRMNA),$D(SROPS(2)) W !,?20,SROPS(2)
"RTN","SROALL",26,0)
 I '$G(SRMNA) W !,$S('$G(SRMNA):STATUS,1:"") W:$D(SROPS(2)) ?20,SROPS(2) I SREXCL'="" W ?55,SREXCL
"RTN","SROALL",27,0)
 I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALL",28,0)
 I SREXCL="",$D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALL",29,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALL",30,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALL",31,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALL",32,0)
 Q
"RTN","SROALL",33,0)
OTHER ; other operations
"RTN","SROALL",34,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALL",35,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALL",36,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALL",37,0)
 Q
"RTN","SROALL",38,0)
LOOP ; break procedures
"RTN","SROALL",39,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALL",40,0)
 Q
"RTN","SROALL",41,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALL",42,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALL",43,0)
HDR S SRHD=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES",1:"ALL MAJOR SURGICAL CASES")
"RTN","SROALL",44,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALL",45,0)
 W !!,"CASE #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",?55,"ANESTHESIA TECHNIQUE"
"RTN","SROALL",46,0)
 I '$G(SRMNA) W !,"ASSESSMENT STATUS",?55,"EXCLUSION CRITERIA"
"RTN","SROALL",47,0)
 W ! F LINE=1:1:80 W "="
"RTN","SROALL",48,0)
 Q
"RTN","SROALLP")
0^19^B12738077^B12596044
"RTN","SROALLP",1,0)
SROALLP ;BIR/MAM - MAJOR CASES ;01/18/07
"RTN","SROALLP",2,0)
 ;;3.0; Surgery ;**32,47,55,50,88,142,153,160**;24 Jun 93;Build 7
"RTN","SROALLP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALLP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROALLP",5,0)
 Q
"RTN","SROALLP",6,0)
SET ; print assessments
"RTN","SROALLP",7,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALLP",8,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALLP",9,0)
 I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALLP",10,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALLP",11,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALLP",12,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALLP",13,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALLP",14,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALLP",15,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALLP",16,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALLP",17,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALLP",18,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALLP",19,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLP",20,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLP",21,0)
 D TECH^SROPRIN
"RTN","SROALLP",22,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>24 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALLP",23,0)
 S SRDOC=Y
"RTN","SROALLP",24,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALLP",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1)
"RTN","SROALLP",26,0)
 I '$G(SRMNA) W ?67,STATUS,?107,SREXCL
"RTN","SROALLP",27,0)
 I $G(SRMNA) W ?67,SRDOC
"RTN","SROALLP",28,0)
 I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLP",29,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALLP",30,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALLP",31,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALLP",32,0)
 Q
"RTN","SROALLP",33,0)
OTHER ; other operations
"RTN","SROALLP",34,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALLP",35,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALLP",36,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALLP",37,0)
 Q
"RTN","SROALLP",38,0)
LOOP ; break procedures
"RTN","SROALLP",39,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLP",40,0)
 Q
"RTN","SROALLP",41,0)
HDR ; print heading
"RTN","SROALLP",42,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALLP",43,0)
 S SRTITLE=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES",1:"ALL MAJOR SURGICAL CASES")
"RTN","SROALLP",44,0)
 W:$Y @IOF W !,?(132-$L(SRTITLE)\2),SRTITLE,?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALLP",45,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALLP",46,0)
 W !!,"CASE #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)"
"RTN","SROALLP",47,0)
 I '$G(SRMNA) W ?67,"ASSESSMENT STATUS",?107,"EXCLUSION CRITERIA"
"RTN","SROALLP",48,0)
 E  W ?67,"SURGEON"
"RTN","SROALLP",49,0)
 W ! F LINE=1:1:132 W "="
"RTN","SROALLP",50,0)
 Q
"RTN","SROALLS")
0^20^B19259517^B19116558
"RTN","SROALLS",1,0)
SROALLS ;BIR/ADM - MAJOR CASES BY SPECIALTY ;01/18/07
"RTN","SROALLS",2,0)
 ;;3.0; Surgery ;**32,38,47,55,50,88,142,153,160**;24 Jun 93;Build 7
"RTN","SROALLS",3,0)
 I $E(IOST)="P" D ^SROALLSP Q
"RTN","SROALLS",4,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALLS",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALLS",6,0)
 D PRINT Q
"RTN","SROALLS",7,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALLS",8,0)
 S SRA(0)=^SRF(SRTN,0) I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALLS",9,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALLS",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALLS",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALLS",12,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALLS",13,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALLS",14,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLS",15,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALLS",16,0)
 Q
"RTN","SROALLS",17,0)
SET ; set variables
"RTN","SROALLS",18,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALLS",19,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALLS",20,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALLS",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALLS",22,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALLS",23,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALLS",24,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALLS",25,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLS",26,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLS",27,0)
 D TECH^SROPRIN
"RTN","SROALLS",28,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALLS",29,0)
 S SRDOC=Y
"RTN","SROALLS",30,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALLS",31,0)
 Q
"RTN","SROALLS",32,0)
PRINT ;
"RTN","SROALLS",33,0)
 U IO S SRSS="",SRTC=0 D HDR
"RTN","SROALLS",34,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE Q:SRSOUT
"RTN","SROALLS",35,0)
 Q:SRSOUT!SRFLG  I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",36,0)
 W !!,"TOTAL MAJOR CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALLS",37,0)
 Q
"RTN","SROALLS",38,0)
CASE ; print a case
"RTN","SROALLS",39,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALLS",40,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",41,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID"),?55,SRTECH
"RTN","SROALLS",42,0)
 W !,SRDT,?20,SROPS(1) I $G(SRMNA) W ?55,SRDOC
"RTN","SROALLS",43,0)
 I '$G(SRMNA) W ?55,STATUS
"RTN","SROALLS",44,0)
 I '$G(SRMNA),(SREXCL'="") W ! W:$D(SROPS(2)) ?20,SROPS(2) W ?55,SREXCL I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLS",45,0)
 I SREXCL="",$D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLS",46,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALLS",47,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALLS",48,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALLS",49,0)
 Q
"RTN","SROALLS",50,0)
SS ; print surgical specialty
"RTN","SROALLS",51,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",52,0)
 W !,"** SURGICAL SPECIALTY: ",SRSS," **",! Q
"RTN","SROALLS",53,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALLS",54,0)
 I X["?" W !!,"If you want to continue listing assessments, enter <RET>.  Enter '^' to",!,"return to the menu." G PAGE
"RTN","SROALLS",55,0)
HDR ; print heading
"RTN","SROALLS",56,0)
 S SRHD=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES BY SURGICAL SPECIALTY",1:"ALL MAJOR SURGICAL CASES BY SURGICAL SPECIALTY")
"RTN","SROALLS",57,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALLS",58,0)
 W !!,"CASE #",?20,"PATIENT",?55,"ANESTHESIA TECHNIQUE"
"RTN","SROALLS",59,0)
 W !,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)"
"RTN","SROALLS",60,0)
 I '$G(SRMNA) W ?55,"ASSESSMENT STATUS"
"RTN","SROALLS",61,0)
 E  W ?55,"SURGEON"
"RTN","SROALLS",62,0)
 I '$G(SRMNA) W !,?55,"EXCLUSION CRITERIA"
"RTN","SROALLS",63,0)
 W ! F L=1:1:80 W "="
"RTN","SROALLS",64,0)
 W ! Q
"RTN","SROALLS",65,0)
OTHER ; other operations
"RTN","SROALLS",66,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALLS",67,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALLS",68,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALLS",69,0)
 Q
"RTN","SROALLS",70,0)
LOOP ; break procedures
"RTN","SROALLS",71,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLS",72,0)
 Q
"RTN","SROALLS",73,0)
SSCT ; write specialty count
"RTN","SROALLS",74,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",75,0)
 W !,"TOTAL ",SRSS,": ",SRC,! F L=1:1:80 W "-"
"RTN","SROALLS",76,0)
 Q
"RTN","SROALLSP")
0^21^B20260764^B20130210
"RTN","SROALLSP",1,0)
SROALLSP ;BIR/ADM - ASSESSMENTS BY SPECIALTY (PRINTER) ;01/18/07
"RTN","SROALLSP",2,0)
 ;;3.0; Surgery ;**32,47,55,50,88,142,153,160**;24 Jun 93;Build 7
"RTN","SROALLSP",3,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALLSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALLSP",5,0)
 D PRINT Q
"RTN","SROALLSP",6,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALLSP",7,0)
 S SRA(0)=^SRF(SRTN,0) I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALLSP",8,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALLSP",9,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALLSP",10,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALLSP",11,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALLSP",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALLSP",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLSP",14,0)
 S TYPE=$P($G(^SRF(SRTN,"RA")),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALLSP",15,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALLSP",16,0)
 Q
"RTN","SROALLSP",17,0)
SET ; set variables
"RTN","SROALLSP",18,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALLSP",19,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALLSP",20,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALLSP",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALLSP",22,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALLSP",23,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALLSP",24,0)
 K SROPS,MM,MMM
"RTN","SROALLSP",25,0)
 I $G(SRMNA) S:$L(SROPER)<85 SROPS(1)=SROPER I $L(SROPER)>84 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLSP",26,0)
 I '$G(SRMNA) S:$L(SROPER)<44 SROPS(1)=SROPER I $L(SROPER)>43 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLSP",27,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLSP",28,0)
 D TECH^SROPRIN
"RTN","SROALLSP",29,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>24 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALLSP",30,0)
 S SRDOC=Y
"RTN","SROALLSP",31,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALLSP",32,0)
 Q
"RTN","SROALLSP",33,0)
PRINT ;
"RTN","SROALLSP",34,0)
 U IO S SRSS="",(SRTC,SRPAGE)=0 D HDR Q:SRSOUT
"RTN","SROALLSP",35,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE
"RTN","SROALLSP",36,0)
 Q:SRFLG  I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALLSP",37,0)
 W !!,"TOTAL CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALLSP",38,0)
 Q
"RTN","SROALLSP",39,0)
CASE ; print a case
"RTN","SROALLSP",40,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALLSP",41,0)
 I $Y+5>IOSL D HDR Q:SRSOUT  W !,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALLSP",42,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID") I '$G(SRMNA) W ?67,STATUS
"RTN","SROALLSP",43,0)
 W ?107,SRTECH,!,SRDT,?20,SROPS(1) I '$G(SRMNA),(SREXCL'="") W ?67,SREXCL
"RTN","SROALLSP",44,0)
 W ?107,SRDOC
"RTN","SROALLSP",45,0)
 I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLSP",46,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALLSP",47,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALLSP",48,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALLSP",49,0)
 Q
"RTN","SROALLSP",50,0)
SS ; print surgical specialty
"RTN","SROALLSP",51,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALLSP",52,0)
 W !,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALLSP",53,0)
 Q
"RTN","SROALLSP",54,0)
HDR ; print heading
"RTN","SROALLSP",55,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALLSP",56,0)
 S SRHD=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES BY SURGICAL SPECIALTY",1:"ALL MAJOR SURGICAL CASES BY SURGICAL SPECIALTY"),SRPAGE=SRPAGE+1
"RTN","SROALLSP",57,0)
 W:$Y @IOF W !,?(132-$L(SRHD)\2),SRHD,?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALLSP",58,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALLSP",59,0)
 W !!,"CASE #",?20,"PATIENT" I '$G(SRMNA) W ?67,"ASSESSMENT STATUS"
"RTN","SROALLSP",60,0)
 W ?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)"
"RTN","SROALLSP",61,0)
 W:'$G(SRMNA) ?67,"EXCLUSION CRITERIA" W ?107,"SURGEON"
"RTN","SROALLSP",62,0)
 W ! F L=1:1:132 W "="
"RTN","SROALLSP",63,0)
 Q
"RTN","SROALLSP",64,0)
OTHER ; other operations
"RTN","SROALLSP",65,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALLSP",66,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALLSP",67,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALLSP",68,0)
 Q
"RTN","SROALLSP",69,0)
LOOP ; break procedures
"RTN","SROALLSP",70,0)
 S SROPS(M)=""
"RTN","SROALLSP",71,0)
 I $G(SRMNA) F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<85  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLSP",72,0)
 I '$G(SRMNA) F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLSP",73,0)
 Q
"RTN","SROALLSP",74,0)
SSCT ; write specialty count
"RTN","SROALLSP",75,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALLSP",76,0)
 W !," >>> TOTAL ",SRSS,": ",SRC,! F L=1:1:132 W "-"
"RTN","SROALLSP",77,0)
 Q
"RTN","SROALM")
0^22^B22043209^B21272239
"RTN","SROALM",1,0)
SROALM ;BIR/ADM - LIST OF ASSESSMENTS MISSING INFORMATION ;02/08/07
"RTN","SROALM",2,0)
 ;;3.0; Surgery ;**38,50,88,142,153,160**;24 Jun 93;Build 7
"RTN","SROALM",3,0)
 S (GRAND,SRNEW,SRSOUT,TOT)=0,(SRHDR,SRPAGE)=1,SRTITLE="COMPLETED/TRANSMITTED ASSESSMENTS MISSING INFORMATION" K ^TMP("SRA",$J)
"RTN","SROALM",4,0)
 I SRFLG,SRASP S SRSPEC=$P(^SRO(137.45,SRASP,0),"^")
"RTN","SROALM",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  D
"RTN","SROALM",6,0)
 .S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C"!($P(SR("RA"),"^")="T"),$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALM",7,0)
 I SRSP S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""  D SRSD Q:SRSOUT  D:TOT TOT
"RTN","SROALM",8,0)
 I 'SRSP S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALM",9,0)
 Q:SRSOUT  I SRSP,'SRFLG,GRAND D GRAND
"RTN","SROALM",10,0)
 I SRFLG,'GRAND S SRSS=SRSPEC D HDR,GRAND
"RTN","SROALM",11,0)
 I SRSP,'SRFLG,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALM",12,0)
 I 'SRSP,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALM",13,0)
 I 'SRSP,GRAND S SRSS="" D GRAND
"RTN","SROALM",14,0)
 Q
"RTN","SROALM",15,0)
UTL ; set up TMP global
"RTN","SROALM",16,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALM",17,0)
 I SRSP S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED"),^TMP("SRA",$J,SRSS,SRSD,SRTN)=SR("RA") Q
"RTN","SROALM",18,0)
 S ^TMP("SRA",$J,SRSD,SRTN)=SR("RA")
"RTN","SROALM",19,0)
 Q
"RTN","SROALM",20,0)
SRSD S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSS,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALM",21,0)
 Q
"RTN","SROALM",22,0)
CASE I $P(SRA,"^",2)="N",$P(SRA,"^",6)="Y" S SRATYPE="NON-CARDIAC" D CHK^SROAUTL
"RTN","SROALM",23,0)
 I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N" S SRATYPE="EXCLUDED" D CHK^SROAUTL3
"RTN","SROALM",24,0)
 I $P(SRA,"^",2)="C" S SRATYPE="CARDIAC" D CHK^SROAUTLC
"RTN","SROALM",25,0)
 S SRFLD="" I $O(SRX(SRFLD))'="" S TOT=TOT+1,GRAND=GRAND+1 D PRINT Q
"RTN","SROALM",26,0)
 I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) D PRINT
"RTN","SROALM",27,0)
 Q
"RTN","SROALM",28,0)
PRINT ; print assessments
"RTN","SROALM",29,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALM",30,0)
 I $Y+5>IOSL!SRNEW D PAGE I SRSOUT Q
"RTN","SROALM",31,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALM",32,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALM",33,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALM",34,0)
 K SROPS,MM,MMM S:$L(SROPER)<63 SROPS(1)=SROPER I $L(SROPER)>62 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALM",35,0)
 S SRSTATUS=$S($P(SRA,"^")="T":"TRANSMITTED",1:"COMPLETE"),Y=SRSD D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALM",36,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALM",37,0)
 W !,SRTN,?18,SRANM_" "_VA("PID"),?53,SRATYPE,?68,SRSTATUS,!,SRDT F I=1:1 Q:'$D(SROPS(I))  W ?18,SROPS(I),!
"RTN","SROALM",38,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W ?18,"CPT Codes: "
"RTN","SROALM",39,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?29,SRPROC(I) W:I'=1 !,?29,SRPROC(I)
"RTN","SROALM",40,0)
 S CNT=1 W !,?5,"Missing information:"
"RTN","SROALM",41,0)
 I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !,$J(CNT_". ",8),"The final coding for Procedure and Diagnosis is not complete." S CNT=CNT+1
"RTN","SROALM",42,0)
 F  S SRFLD=$O(SRX(SRFLD)) Q:SRFLD=""  D:$Y+5>IOSL PAGE Q:SRSOUT  W !,$J(CNT_". ",8),SRX(SRFLD) S CNT=CNT+1
"RTN","SROALM",43,0)
 I 'SRSOUT W ! F LINE=1:1:80 W "-"
"RTN","SROALM",44,0)
 Q
"RTN","SROALM",45,0)
OTHER ; other operations
"RTN","SROALM",46,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALM",47,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALM",48,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALM",49,0)
 Q
"RTN","SROALM",50,0)
LOOP ; break procedures
"RTN","SROALM",51,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<63  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALM",52,0)
 Q
"RTN","SROALM",53,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROALM",54,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALM",55,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALM",56,0)
HDR ; print heading
"RTN","SROALM",57,0)
 W @IOF,!,?(80-$L(SRTITLE)\2),SRTITLE,?70,$J("PAGE "_SRPAGE,9) W:$E(IOST)="P" !,?(80-$L(SRINST)\2),SRINST W !,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALM",58,0)
 W:$E(IOST)="P" !,?(80-$L(SRPRINT)\2),SRPRINT I SRSP,SRSS'="" W !!,"** "_SRSS
"RTN","SROALM",59,0)
 W !!,"ASSESSMENT #",?18,"PATIENT",?53,"TYPE",?68,"STATUS",!,"OPERATION DATE",?18,"OPERATION(S)",! F LINE=1:1:80 W "="
"RTN","SROALM",60,0)
 S SRHDR=0,SRNEW=0,SRPAGE=SRPAGE+1
"RTN","SROALM",61,0)
 Q
"RTN","SROALM",62,0)
TOT W !!,"TOTAL FOR "_SRSS_": ",TOT
"RTN","SROALM",63,0)
 Q
"RTN","SROALM",64,0)
GRAND I 'SRSP W !!,"TOTAL: ",GRAND Q
"RTN","SROALM",65,0)
 I SRSP,'SRFLG W !!,"TOTAL FOR ALL SPECIALTIES: ",GRAND Q
"RTN","SROALM",66,0)
 I SRSP,SRFLG S SRSS=SRSPEC D TOT
"RTN","SROALM",67,0)
 Q
"RTN","SROALMN")
0^23^B24672211^B23578732
"RTN","SROALMN",1,0)
SROALMN ;BIR/ADM - LIST OF 1-LINER CASES WITH MISSING INFO ;05/04/07
"RTN","SROALMN",2,0)
 ;;3.0; Surgery ;**153,160**;24 Jun 93;Build 7
"RTN","SROALMN",3,0)
 S (GRAND,SRNEW,SRSOUT,TOT)=0,(SRHDR,SRPAGE)=1,SRTITLE="1-LINER CASES MISSING INFORMATION" K ^TMP("SRA",$J)
"RTN","SROALMN",4,0)
 I SRFLG,SRASP S SRSPEC=$P(^SRO(137.45,SRASP,0),"^")
"RTN","SROALMN",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALMN",6,0)
 I SRSP S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""  D SRSD Q:SRSOUT  D:TOT TOT
"RTN","SROALMN",7,0)
 I 'SRSP S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALMN",8,0)
 Q:SRSOUT  I SRSP,'SRFLG,GRAND D GRAND
"RTN","SROALMN",9,0)
 I SRFLG,'GRAND S SRSS=SRSPEC D HDR,GRAND
"RTN","SROALMN",10,0)
 I SRSP,'SRFLG,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALMN",11,0)
 I 'SRSP,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALMN",12,0)
 I 'SRSP,GRAND S SRSS="" D GRAND
"RTN","SROALMN",13,0)
 Q
"RTN","SROALMN",14,0)
UTL ; set up TMP global
"RTN","SROALMN",15,0)
 I '$P($G(^SRF(SRTN,.2)),"^",3)&'$P($G(^SRF(SRTN,.2)),"^",12) Q
"RTN","SROALMN",16,0)
 I $P($G(^SRF(SRTN,30)),"^") Q
"RTN","SROALMN",17,0)
 S SRA=$G(^SRF(SRTN,"RA")) I $P(SRA,"^",2)="N",$P(SRA,"^",6)="Y" Q
"RTN","SROALMN",18,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALMN",19,0)
 I SRSP S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED"),^TMP("SRA",$J,SRSS,SRSD,SRTN)=SRA Q
"RTN","SROALMN",20,0)
 S ^TMP("SRA",$J,SRSD,SRTN)=SRA
"RTN","SROALMN",21,0)
 Q
"RTN","SROALMN",22,0)
SRSD S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSS,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALMN",23,0)
 Q
"RTN","SROALMN",24,0)
CASE I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N" S SRATYPE="EXCLUDED"
"RTN","SROALMN",25,0)
 S:$P(SRA,"^",2)="C" SRATYPE="CARDIAC" S:$P(SRA,"^",2)="" SRATYPE="NON-ASSESSED" D LNR
"RTN","SROALMN",26,0)
 S SRFLD="" I $O(SRX(SRFLD))'="" S TOT=TOT+1,GRAND=GRAND+1 D PRINT Q
"RTN","SROALMN",27,0)
 I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) D PRINT
"RTN","SROALMN",28,0)
 Q
"RTN","SROALMN",29,0)
LNR ; check for missing 1-liner information
"RTN","SROALMN",30,0)
 K SRX,DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I"
"RTN","SROALMN",31,0)
 I SRATYPE'="EXCLUDED" S DR=".011;.03;.04;.035;.166;1.09;1.13"
"RTN","SROALMN",32,0)
 I SRATYPE="EXCLUDED" S DR=".035;.03;102"
"RTN","SROALMN",33,0)
 D EN^DIQ1 D ^SROAUTL2 K DA,DIC,DIQ,DR,SRY,SRZ
"RTN","SROALMN",34,0)
 D TECH^SROPRIN I SRTECH="NOT ENTERED" S SRX("ANESTHESIA TECHNIQUE")="Anesthesia Technique"
"RTN","SROALMN",35,0)
 Q
"RTN","SROALMN",36,0)
PRINT ; print assessments
"RTN","SROALMN",37,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALMN",38,0)
 I $Y+5>IOSL!SRNEW D PAGE I SRSOUT Q
"RTN","SROALMN",39,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALMN",40,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALMN",41,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALMN",42,0)
 K SROPS,MM,MMM S:$L(SROPER)<63 SROPS(1)=SROPER I $L(SROPER)>62 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALMN",43,0)
 S X=$P(SRA,"^"),SRSTATUS=$S(X="T":"TRANSMITTED",X="C":"COMPLETE",X="I":"INCOMPLETE",1:"NO ASSESSMENT"),Y=SRSD D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALMN",44,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALMN",45,0)
 W !,SRTN,?18,SRANM_" "_VA("PID"),?53,SRATYPE,?67,SRSTATUS,!,SRDT F I=1:1 Q:'$D(SROPS(I))  W ?18,SROPS(I),!
"RTN","SROALMN",46,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W ?18,"CPT Codes: "
"RTN","SROALMN",47,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?29,SRPROC(I) W:I'=1 !,?29,SRPROC(I)
"RTN","SROALMN",48,0)
 S CNT=1 W !,?5,"Missing information:"
"RTN","SROALMN",49,0)
 I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !,$J(CNT_". ",8),"The final coding for Procedure and Diagnosis is not complete." S CNT=CNT+1
"RTN","SROALMN",50,0)
 F  S SRFLD=$O(SRX(SRFLD)) Q:SRFLD=""  D:$Y+5>IOSL PAGE Q:SRSOUT  W !,$J(CNT_". ",8),SRX(SRFLD) S CNT=CNT+1
"RTN","SROALMN",51,0)
 I 'SRSOUT W ! F LINE=1:1:80 W "-"
"RTN","SROALMN",52,0)
 Q
"RTN","SROALMN",53,0)
OTHER ; other operations
"RTN","SROALMN",54,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALMN",55,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALMN",56,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALMN",57,0)
 Q
"RTN","SROALMN",58,0)
LOOP ; break procedures
"RTN","SROALMN",59,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<63  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALMN",60,0)
 Q
"RTN","SROALMN",61,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROALMN",62,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALMN",63,0)
 I X["?" W !!,"If you want to continue the listing, press the 'Enter' key.",!,"Type '^' to return to the menu." G PAGE
"RTN","SROALMN",64,0)
HDR ; print heading
"RTN","SROALMN",65,0)
 W @IOF,!,?(80-$L(SRTITLE)\2),SRTITLE,?70,$J("PAGE "_SRPAGE,9) W:$E(IOST)="P" !,?(80-$L(SRINST)\2),SRINST W !,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALMN",66,0)
 W:$E(IOST)="P" !,?(80-$L(SRPRINT)\2),SRPRINT I SRSP,SRSS'="" W !!,"** "_SRSS
"RTN","SROALMN",67,0)
 W !!,"CASE #",?18,"PATIENT",?53,"TYPE",?67,"STATUS",!,"OP DATE",?18,"OPERATION(S)",! F LINE=1:1:80 W "="
"RTN","SROALMN",68,0)
 S SRHDR=0,SRNEW=0,SRPAGE=SRPAGE+1
"RTN","SROALMN",69,0)
 Q
"RTN","SROALMN",70,0)
TOT W !!,"TOTAL FOR "_SRSS_": ",TOT
"RTN","SROALMN",71,0)
 Q
"RTN","SROALMN",72,0)
GRAND I 'SRSP W !!,"TOTAL: ",GRAND Q
"RTN","SROALMN",73,0)
 I SRSP,'SRFLG W !!,"TOTAL FOR ALL SPECIALTIES: ",GRAND Q
"RTN","SROALMN",74,0)
 I SRSP,SRFLG S SRSS=SRSPEC D TOT
"RTN","SROALMN",75,0)
 Q
"RTN","SROALN1")
0^11^B9118535^B8424056
"RTN","SROALN1",1,0)
SROALN1 ;BIR/MAM - LAB INFO ;01/27/06
"RTN","SROALN1",2,0)
 ;;3.0; Surgery ;**38,125,153,160**;24 Jun 93;Build 7
"RTN","SROALN1",3,0)
 F SHEMP=201:1:204,202.1 S SRA(SHEMP)=$G(^SRF(SRTN,SHEMP))
"RTN","SROALN1",4,0)
 S SHEMP=$P(SRA(203),"^",15),SRAO(1)=SHEMP_"^^444^444.1" S X=$P(SRA(204),"^",15) I X D DATE S SHEMP="("_Y_")",$P(SRAO(1),"^",2)=SHEMP
"RTN","SROALN1",5,0)
 S SHEMP=$P(SRA(201),"^"),SRAO(2)=SHEMP_"^^270^304" S X=$P(SRA(202),"^") I X D DATE S SHEMP="("_Y_")",$P(SRAO(2),"^",2)=SHEMP
"RTN","SROALN1",6,0)
 S SHEMP=$P(SRA(201),"^",5),SRAO(3)=SHEMP_"^^224^291" S X=$P(SRA(202),"^",5) I X D DATE S SHEMP="("_Y_")",$P(SRAO(3),"^",2)=SHEMP
"RTN","SROALN1",7,0)
 S SHEMP=$P(SRA(201),"^",4),SRAO(4)=SHEMP_"^^223^290" S X=$P(SRA(202),"^",4) I X D DATE S SHEMP="("_Y_")",$P(SRAO(4),"^",2)=SHEMP
"RTN","SROALN1",8,0)
 S SHEMP=$P(SRA(201),"^",8),SRAO(5)=SHEMP_"^^225^292" S X=$P(SRA(202),"^",8) I X D DATE S SHEMP="("_Y_")",$P(SRAO(5),"^",2)=SHEMP
"RTN","SROALN1",9,0)
 S SHEMP=$P(SRA(201),"^",9),SRAO(6)=SHEMP_"^^228^295" S X=$P(SRA(202),"^",9) I X D DATE S SHEMP="("_Y_")",$P(SRAO(6),"^",2)=SHEMP
"RTN","SROALN1",10,0)
 S SHEMP=$P(SRA(201),"^",11),SRAO(7)=SHEMP_"^^227^294" S X=$P(SRA(202),"^",11) I X D DATE S SHEMP="("_Y_")",$P(SRAO(7),"^",2)=SHEMP
"RTN","SROALN1",11,0)
 S SHEMP=$P(SRA(201),"^",12),SRAO(8)=SHEMP_"^^229^296" S X=$P(SRA(202),"^",12) I X D DATE S SHEMP="("_Y_")",$P(SRAO(8),"^",2)=SHEMP
"RTN","SROALN1",12,0)
 S SHEMP=$P(SRA(201),"^",13),SRAO(9)=SHEMP_"^^230^297" S X=$P(SRA(202),"^",13) I X D DATE S SHEMP="("_Y_")",$P(SRAO(9),"^",2)=SHEMP
"RTN","SROALN1",13,0)
 S SHEMP=$P(SRA(201),"^",14),SRAO(10)=SHEMP_"^^234^301" S X=$P(SRA(202),"^",14) I X D DATE S SHEMP="("_Y_")",$P(SRAO(10),"^",2)=SHEMP
"RTN","SROALN1",14,0)
 S SHEMP=$P(SRA(201),"^",15),SRAO(11)=SHEMP_"^^231^298" S X=$P(SRA(202),"^",15) I X D DATE S SHEMP="("_Y_")",$P(SRAO(11),"^",2)=SHEMP
"RTN","SROALN1",15,0)
 S SHEMP=$P(SRA(201),"^",16),SRAO(12)=SHEMP_"^^233^300" S X=$P(SRA(202),"^",16) I X D DATE S SHEMP="("_Y_")",$P(SRAO(12),"^",2)=SHEMP
"RTN","SROALN1",16,0)
 S SHEMP=$P(SRA(201),"^",17),SRAO(13)=SHEMP_"^^232^299" S X=$P(SRA(202),"^",17) I X D DATE S SHEMP="("_Y_")",$P(SRAO(13),"^",2)=SHEMP
"RTN","SROALN1",17,0)
 S SHEMP=$P(SRA(201),"^",27),SRAO(14)=SHEMP_"^^487^487.1" S X=$P(SRA(202),"^",27) I X D DATE S SHEMP="("_Y_")",$P(SRAO(14),"^",2)=SHEMP
"RTN","SROALN1",18,0)
 S SHEMP=$P(SRA(201),"^",28),SRAO(15)=SHEMP_"^^504^504.1" S X=$P(SRA(202.1),"^") I X D DATE S SHEMP="("_Y_")",$P(SRAO(15),"^",2)=SHEMP
"RTN","SROALN1",19,0)
 K SRA
"RTN","SROALN1",20,0)
 Q
"RTN","SROALN1",21,0)
DATE S Y=X X ^DD("DD")
"RTN","SROALN1",22,0)
 Q
"RTN","SROALOG")
0^24^B18199636^B16589351
"RTN","SROALOG",1,0)
SROALOG ;BIR/MAM - ASSESSMENT LOG ;01/22/07
"RTN","SROALOG",2,0)
 ;;3.0; Surgery ;**38,55,62,77,50,153,160**;24 Jun 93;Build 7
"RTN","SROALOG",3,0)
 K SRMNA S (SRSOUT,SRFLG,SRSP)=0
"RTN","SROALOG",4,0)
START G:SRSOUT END W @IOF,!,"List of Surgery Risk Assessments",!!,"  1. List of Incomplete Assessments"
"RTN","SROALOG",5,0)
 W !,"  2. List of Completed Assessments",!,"  3. List of Transmitted Assessments"
"RTN","SROALOG",6,0)
 W !,"  4. List of Non-Assessed Major Surgical Cases",!,"  5. List of All Major Surgical Cases"
"RTN","SROALOG",7,0)
 W !,"  6. List of All Surgical Cases",!,"  7. List of Completed/Transmitted Assessments Missing Information"
"RTN","SROALOG",8,0)
 W !,"  8. List of 1-Liner Cases Missing Information",!,"  9. List of Eligible Cases"
"RTN","SROALOG",9,0)
 W !!,"Select the Number of the Report Desired: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SROALOG",10,0)
 I X<1!(X>9)!(X\1'=X) D HELP G START
"RTN","SROALOG",11,0)
 S SREPORT=X
"RTN","SROALOG",12,0)
DATE D DATE^SROUTL(.SRSD,.SRED,.SRSOUT) G:SRSOUT END
"RTN","SROALOG",13,0)
 D SEL G:SRSOUT END
"RTN","SROALOG",14,0)
 N SRINSTP S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,"^"),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,"^",2))
"RTN","SROALOG",15,0)
 I SREPORT<7 W @IOF,!,"This report is designed to print to your terminal screen or a printer. When",!,"using a printer, a 132 column format is used.",!
"RTN","SROALOG",16,0)
 K IOP,%ZIS,POP,IO("Q") S %ZIS("A")="Print the List of Assessments to which Device: ",%ZIS="QM" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROALOG",17,0)
 I $D(IO("Q")) K IO("Q") S ZTRTN="EN^SROALOG",ZTDESC="List of Surgery Risk Assessments",(ZTSAVE("SRSD"),ZTSAVE("SRED"),ZTSAVE("SREPORT"),ZTSAVE("SRASP"),ZTSAVE("SRFLG"),ZTSAVE("SRSP"),ZTSAVE("SRINSTP"))="",ZTREQ="@" D ^%ZTLOAD G END
"RTN","SROALOG",18,0)
EN ; entry when queued
"RTN","SROALOG",19,0)
 N SRFRTO S Y=SRSD X ^DD("DD") S SRFRTO="FROM: "_Y_"  TO: ",Y=SRED X ^DD("DD") S SRFRTO=SRFRTO_Y
"RTN","SROALOG",20,0)
 U IO S SRSD=SRSD-.0001,SRED=SRED_".9999",Y=DT X ^DD("DD") S SRPRINT="DATE PRINTED: "_Y
"RTN","SROALOG",21,0)
 S SRINST=$S(SRINSTP["ALL DIV":$P($$SITE^SROVAR,"^",2)_" - ALL DIVISIONS",1:$$GET1^DIQ(4,SRINSTP,.01))
"RTN","SROALOG",22,0)
 I SREPORT=1 D:SRSP ^SROANTS D:'SRSP ^SROANT G END
"RTN","SROALOG",23,0)
 I SREPORT=2 D:SRSP ^SROALCS D:'SRSP ^SROALC G END
"RTN","SROALOG",24,0)
 I SREPORT=3 D:SRSP ^SROALTS D:'SRSP ^SROALT G END
"RTN","SROALOG",25,0)
 I SREPORT=4 S SRMNA=1 D:SRSP ^SROALLS D:'SRSP ^SROALL G END
"RTN","SROALOG",26,0)
 I SREPORT=5 D:SRSP ^SROALLS D:'SRSP ^SROALL G END
"RTN","SROALOG",27,0)
 I SREPORT=7 D ^SROALM G END
"RTN","SROALOG",28,0)
 I SREPORT=8 D ^SROALMN G END
"RTN","SROALOG",29,0)
 I SREPORT=9 D ^SROALEC G END
"RTN","SROALOG",30,0)
 D:SRSP ^SROALSS D:'SRSP ^SROALST
"RTN","SROALOG",31,0)
END I 'SRSOUT,$E(IOST)'="P" W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROALOG",32,0)
 W:$E(IOST)="P" @IOF K ^TMP("SRA",$J) I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROALOG",33,0)
 D ^%ZISC K SRTN W @IOF D ^SRSKILL
"RTN","SROALOG",34,0)
 Q
"RTN","SROALOG",35,0)
HELP W !!,"Select the number corresponding to the type of report you want to print.",!!,"Press <RET> to continue  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROALOG",36,0)
 Q
"RTN","SROALOG",37,0)
SEL ; select specialty
"RTN","SROALOG",38,0)
 W !!,"Print by Surgical Specialty ?  YES// " R X:DTIME S:'$T X="^" I X="^" S SRSOUT=1 Q
"RTN","SROALOG",39,0)
 S X=$E(X) I "YyNn"'[X W !!,"Enter <RET> to print the report by surgical specialty, or 'N' to print",!,"the report listing all surgical cases." G SEL
"RTN","SROALOG",40,0)
 Q:"Yy"'[X
"RTN","SROALOG",41,0)
SEL1 S SRSP=1 W !!,"Print report for ALL specialties ?  YES// " R X:DTIME S:'$T X="^" I X="^" S SRSOUT=1 Q
"RTN","SROALOG",42,0)
 S X=$E(X) I "YyNn"'[X W !!,"Enter <RET> to print the report for all surgical specialties, or 'N' to ",!,"print the report for a specific surgical specialty." G SEL1
"RTN","SROALOG",43,0)
 I "Yy"'[X W ! S DIC("S")="I '$P(^(0),""^"",3)",DIC("A")="Print the Report for which Surgical Specialty: ",DIC=137.45,DIC(0)="QEAMZ" D ^DIC K DIC I Y>0 S SRASP=+Y,SRFLG=1 Q
"RTN","SROALOG",44,0)
 I Y'>0 S SRSOUT=1 Q
"RTN","SROALOG",45,0)
 Q
"RTN","SROALSS")
0^25^B17361953^B17218994
"RTN","SROALSS",1,0)
SROALSS ;BIR/ADM - ALL CASES BY SPECIALTY ;01/18/07
"RTN","SROALSS",2,0)
 ;;3.0; Surgery ;**38,47,50,100,142,153,160**;24 Jun 93;Build 7
"RTN","SROALSS",3,0)
 I $E(IOST)="P" D ^SROALSSP Q
"RTN","SROALSS",4,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALSS",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALSS",6,0)
 D PRINT Q
"RTN","SROALSS",7,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALSS",8,0)
 S SRA(0)=^SRF(SRTN,0)
"RTN","SROALSS",9,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALSS",10,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALSS",11,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALSS",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALSS",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSS",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALSS",15,0)
 Q
"RTN","SROALSS",16,0)
SET ; set variables
"RTN","SROALSS",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALSS",18,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALSS",19,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALSS",20,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALSS",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALSS",22,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALSS",23,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALSS",24,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALSS",25,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALSS",26,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALSS",27,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSS",28,0)
 D TECH^SROPRIN
"RTN","SROALSS",29,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALSS",30,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALSS",31,0)
 S SRDOC=Y
"RTN","SROALSS",32,0)
 Q
"RTN","SROALSS",33,0)
PRINT ;
"RTN","SROALSS",34,0)
 U IO S SRSS="",SRTC=0 D HDR
"RTN","SROALSS",35,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE
"RTN","SROALSS",36,0)
 Q:SRSOUT!SRFLG  I $Y+5>IOSL D PAGE Q:SRSOUT  D HDR
"RTN","SROALSS",37,0)
 W !!,"TOTAL CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALSS",38,0)
 Q
"RTN","SROALSS",39,0)
CASE ; print a case
"RTN","SROALSS",40,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALSS",41,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALSS",42,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID"),?55,STATUS,!,SRDT,?20,SROPS(1),?55,SRTECH
"RTN","SROALSS",43,0)
 W !,SRDOC W:$D(SROPS(2)) ?20,SROPS(2) W ?55,SREXCL
"RTN","SROALSS",44,0)
 I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALSS",45,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALSS",46,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALSS",47,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALSS",48,0)
 Q
"RTN","SROALSS",49,0)
SS ; print surgical specialty
"RTN","SROALSS",50,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALSS",51,0)
 W !,"** SURGICAL SPECIALTY: ",SRSS," **",! Q
"RTN","SROALSS",52,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALSS",53,0)
 I X["?" W !!,"If you want to continue listing assessments, enter <RET>.  Enter '^' to",!,"return to the menu." G PAGE
"RTN","SROALSS",54,0)
HDR ; print heading
"RTN","SROALSS",55,0)
 S SRHD="ALL SURGICAL CASES BY SURGICAL SPECIALTY"
"RTN","SROALSS",56,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALSS",57,0)
 W !!,"CASE #",?20,"PATIENT",?55,"ASSESSMENT STATUS",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?55,"ANESTHESIA TECHNIQUE",!,"SURGEON",?55,"EXCLUSION CRITERIA",! F L=1:1:80 W "="
"RTN","SROALSS",58,0)
 W ! Q
"RTN","SROALSS",59,0)
OTHER ; other operations
"RTN","SROALSS",60,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALSS",61,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALSS",62,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALSS",63,0)
 Q
"RTN","SROALSS",64,0)
LOOP ; break procedures
"RTN","SROALSS",65,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALSS",66,0)
 Q
"RTN","SROALSS",67,0)
SSCT ; write specialty count
"RTN","SROALSS",68,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALSS",69,0)
 W !,"TOTAL ",SRSS,": ",SRC,! F L=1:1:80 W "-"
"RTN","SROALSS",70,0)
 Q
"RTN","SROALSSP")
0^26^B17160064^B17029510
"RTN","SROALSSP",1,0)
SROALSSP ;BIR/ADM - ASSESSMENTS BY SPECIALTY (PRINTER) ;01/18/07
"RTN","SROALSSP",2,0)
 ;;3.0; Surgery ;**32,47,50,100,142,153,160**;24 Jun 93;Build 7
"RTN","SROALSSP",3,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALSSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALSSP",5,0)
 D PRINT Q
"RTN","SROALSSP",6,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALSSP",7,0)
 S SRA(0)=^SRF(SRTN,0)
"RTN","SROALSSP",8,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALSSP",9,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALSSP",10,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALSSP",11,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALSSP",12,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSSP",13,0)
 S TYPE=$P($G(^SRF(SRTN,"RA")),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALSSP",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALSSP",15,0)
 Q
"RTN","SROALSSP",16,0)
SET ; set variables
"RTN","SROALSSP",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALSSP",18,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALSSP",19,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALSSP",20,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALSSP",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALSSP",22,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALSSP",23,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALSSP",24,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALSSP",25,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALSSP",26,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSSP",27,0)
 D TECH^SROPRIN
"RTN","SROALSSP",28,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALSSP",29,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALSSP",30,0)
 S SRDOC=Y
"RTN","SROALSSP",31,0)
 Q
"RTN","SROALSSP",32,0)
PRINT ;
"RTN","SROALSSP",33,0)
 U IO S SRSS="",(SRTC,SRPAGE)=0 D HDR Q:SRSOUT
"RTN","SROALSSP",34,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE
"RTN","SROALSSP",35,0)
 Q:SRFLG  I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALSSP",36,0)
 W !!,"TOTAL MAJOR CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALSSP",37,0)
 Q
"RTN","SROALSSP",38,0)
CASE ; print a case
"RTN","SROALSSP",39,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALSSP",40,0)
 I $Y+5>IOSL D HDR Q:SRSOUT  W !!,"SURGICAL SPECIALTY: ",SRSS,!
"RTN","SROALSSP",41,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID"),?67,STATUS,?107,SRTECH,!,SRDT,?20,SROPS(1),?67,SREXCL W ?107,SRDOC
"RTN","SROALSSP",42,0)
 I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALSSP",43,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALSSP",44,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALSSP",45,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALSSP",46,0)
 Q
"RTN","SROALSSP",47,0)
SS ; print surgical specialty
"RTN","SROALSSP",48,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALSSP",49,0)
 W !!,"SURGICAL SPECIALTY: ",SRSS,! Q
"RTN","SROALSSP",50,0)
HDR ; print heading
"RTN","SROALSSP",51,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALSSP",52,0)
 S SRHD="ALL SURGICAL CASES BY SURGICAL SPECIALTY",SRPAGE=SRPAGE+1
"RTN","SROALSSP",53,0)
 W:$Y @IOF W !,?(132-$L(SRHD)\2),SRHD,?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALSSP",54,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALSSP",55,0)
 W !!,"CASE #",?20,"PATIENT",?67,"ASSESSMENT STATUS",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?67,"EXCLUSION CRITERIA",?107,"SURGEON",! F L=1:1:132 W "="
"RTN","SROALSSP",56,0)
 Q
"RTN","SROALSSP",57,0)
OTHER ; other operations
"RTN","SROALSSP",58,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALSSP",59,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALSSP",60,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALSSP",61,0)
 Q
"RTN","SROALSSP",62,0)
LOOP ; break procedures
"RTN","SROALSSP",63,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALSSP",64,0)
 Q
"RTN","SROALSSP",65,0)
SSCT ; write specialty count
"RTN","SROALSSP",66,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALSSP",67,0)
 W !!,"TOTAL ",SRSS,": ",SRC,! F L=1:1:132 W "-"
"RTN","SROALSSP",68,0)
 Q
"RTN","SROALST")
0^27^B13725112^B13569020
"RTN","SROALST",1,0)
SROALST ;BIR/MAM - ALL ASSESSMENTS ;01/18/07
"RTN","SROALST",2,0)
 ;;3.0; Surgery ;**38,47,50,100,142,153,160**;24 Jun 93;Build 7
"RTN","SROALST",3,0)
 I $E(IOST)="P" D ^SROALSTP Q
"RTN","SROALST",4,0)
 S SRSOUT=0 D HDR F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROALST",5,0)
 Q
"RTN","SROALST",6,0)
SET ; print assessments
"RTN","SROALST",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALST",8,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALST",9,0)
 S SRA(0)=^SRF(SRTN,0)
"RTN","SROALST",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALST",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALST",12,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALST",13,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALST",14,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALST",15,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALST",16,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALST",17,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALST",18,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALST",19,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALST",20,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALST",21,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALST",22,0)
 D TECH^SROPRIN
"RTN","SROALST",23,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALST",24,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALST",25,0)
 S SRDOC=Y
"RTN","SROALST",26,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALST",27,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH,!,STATUS W:$D(SROPS(2)) ?20,SROPS(2) W ?55,SREXCL
"RTN","SROALST",28,0)
 W !,SRDOC I $D(SROPS(3)) W ?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALST",29,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALST",30,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALST",31,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALST",32,0)
 Q
"RTN","SROALST",33,0)
OTHER ; other operations
"RTN","SROALST",34,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALST",35,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALST",36,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALST",37,0)
 Q
"RTN","SROALST",38,0)
LOOP ; break procedures
"RTN","SROALST",39,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALST",40,0)
 Q
"RTN","SROALST",41,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALST",42,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALST",43,0)
HDR S SRHD="ALL SURGICAL CASES"
"RTN","SROALST",44,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALST",45,0)
 W !!,"CASE #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"PRINCIPAL OPERATION",?55,"ANESTHESIA TECHNIQUE",!,"ASSESSMENT STATUS",?55,"EXCLUSION CRITERIA",!,"SURGEON",! F LINE=1:1:80 W "="
"RTN","SROALST",46,0)
 Q
"RTN","SROALSTP")
0^28^B12194763^B12052730
"RTN","SROALSTP",1,0)
SROALSTP ;BIR/MAM - ALL CASES ;01/18/07
"RTN","SROALSTP",2,0)
 ;;3.0; Surgery ;**32,47,50,100,142,153,160**;24 Jun 93;Build 7
"RTN","SROALSTP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALSTP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROALSTP",5,0)
 Q
"RTN","SROALSTP",6,0)
SET ; print assessments
"RTN","SROALSTP",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALSTP",8,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALSTP",9,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALSTP",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALSTP",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALSTP",12,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALSTP",13,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALSTP",14,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALSTP",15,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALSTP",16,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALSTP",17,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALSTP",18,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALSTP",19,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALSTP",20,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSTP",21,0)
 D TECH^SROPRIN
"RTN","SROALSTP",22,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALSTP",23,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALSTP",24,0)
 S SRDOC=Y
"RTN","SROALSTP",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1),?67,STATUS,?107,SREXCL,!
"RTN","SROALSTP",26,0)
 W:$D(SROPS(2)) ?20,SROPS(2) W ?107,SRDOC
"RTN","SROALSTP",27,0)
 I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALSTP",28,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALSTP",29,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALSTP",30,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALSTP",31,0)
 Q
"RTN","SROALSTP",32,0)
OTHER ; other operations
"RTN","SROALSTP",33,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALSTP",34,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALSTP",35,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALSTP",36,0)
 Q
"RTN","SROALSTP",37,0)
LOOP ; break procedures
"RTN","SROALSTP",38,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALSTP",39,0)
 Q
"RTN","SROALSTP",40,0)
HDR ; print heading
"RTN","SROALSTP",41,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALSTP",42,0)
 W:$Y @IOF W !,?56,"ALL SURGICAL CASES",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALSTP",43,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALSTP",44,0)
 W !!,"CASE #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?67,"ASSESSMENT STATUS",?107,"EXCLUSION CRITERIA",!,?107,"SURGEON",!
"RTN","SROALSTP",45,0)
 F LINE=1:1:132 W "="
"RTN","SROALSTP",46,0)
 Q
"RTN","SROALT")
0^29^B10668793^B10482929
"RTN","SROALT",1,0)
SROALT ;BIR/MAM - TRANSMITTED ASSESSMENTS ;01/18/07
"RTN","SROALT",2,0)
 ;;3.0; Surgery ;**38,50,142,153,160**;24 Jun 93;Build 7
"RTN","SROALT",3,0)
 I $E(IOST)="P" D ^SROALTP Q
"RTN","SROALT",4,0)
 S SRSOUT=0 D HDR
"RTN","SROALT",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROALT",6,0)
 Q
"RTN","SROALT",7,0)
SET ; print assessments
"RTN","SROALT",8,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALT",9,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALT",10,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALT",11,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALT",12,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALT",13,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALT",14,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALT",15,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALT",16,0)
 D TECH^SROPRIN
"RTN","SROALT",17,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALT",18,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3)
"RTN","SROALT",19,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALT",20,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALT",21,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALT",22,0)
 Q
"RTN","SROALT",23,0)
OTHER ; other operations
"RTN","SROALT",24,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALT",25,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALT",26,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALT",27,0)
 Q
"RTN","SROALT",28,0)
LOOP ; break procedures
"RTN","SROALT",29,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALT",30,0)
 Q
"RTN","SROALT",31,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALT",32,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALT",33,0)
HDR W @IOF,!,?26,"TRANSMITTED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALT",34,0)
 Q
"RTN","SROALTP")
0^30^B10029019^B9843982
"RTN","SROALTP",1,0)
SROALTP ;BIR/MAM - TRANSMITTED ASSESSMENTS (PRINTER) ;01/18/07
"RTN","SROALTP",2,0)
 ;;3.0; Surgery ;**32,50,142,153,160**;24 Jun 93;Build 7
"RTN","SROALTP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALTP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROALTP",5,0)
 Q
"RTN","SROALTP",6,0)
SET ; print assessments
"RTN","SROALTP",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALTP",8,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALTP",9,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALTP",10,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALTP",11,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALTP",12,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALTP",13,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALTP",14,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALTP",15,0)
 D TECH^SROPRIN
"RTN","SROALTP",16,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALTP",17,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1) I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALTP",18,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALTP",19,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALTP",20,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROALTP",21,0)
 Q
"RTN","SROALTP",22,0)
OTHER ; other operations
"RTN","SROALTP",23,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALTP",24,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALTP",25,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALTP",26,0)
 Q
"RTN","SROALTP",27,0)
LOOP ; break procedures
"RTN","SROALTP",28,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALTP",29,0)
 Q
"RTN","SROALTP",30,0)
HDR ; print heading
"RTN","SROALTP",31,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALTP",32,0)
 W:$Y @IOF W !,?52,"TRANSMITTED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALTP",33,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALTP",34,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",! F LINE=1:1:132 W "="
"RTN","SROALTP",35,0)
 Q
"RTN","SROALTS")
0^31^B12998435^B12812472
"RTN","SROALTS",1,0)
SROALTS ;BIR/MAM - TRANSMITTED ASSESSMENTS ;01/18/07
"RTN","SROALTS",2,0)
 ;;3.0; Surgery ;**38,50,142,153,160**;24 Jun 93;Build 7
"RTN","SROALTS",3,0)
 I $E(IOST)="P" D ^SROALTSP Q
"RTN","SROALTS",4,0)
 S SRSOUT=0 D HDR
"RTN","SROALTS",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALTS",6,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F J=0:0 S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALTS",7,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALTS",8,0)
 Q
"RTN","SROALTS",9,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALTS",10,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALTS",11,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALTS",12,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALTS",13,0)
 Q
"RTN","SROALTS",14,0)
SET ; print assessments
"RTN","SROALTS",15,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALTS",16,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALTS",17,0)
 S SR("RA")=^SRF(SRTN,"RA"),SRAT="",Y=$E($P(SR("RA"),"^",4),1,7) I Y D D^DIQ S SRAT=Y
"RTN","SROALTS",18,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALTS",19,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALTS",20,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALTS",21,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALTS",22,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALTS",23,0)
 D TECH^SROPRIN
"RTN","SROALTS",24,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALTS",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,SRAT,!,SRDT,?20,SROPS(1),?55,SRTECH S SRAO=1 F I=0:0 S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALTS",26,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALTS",27,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALTS",28,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALTS",29,0)
 Q
"RTN","SROALTS",30,0)
OTHER ; other operations
"RTN","SROALTS",31,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALTS",32,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALTS",33,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALTS",34,0)
 Q
"RTN","SROALTS",35,0)
LOOP ; break procedures
"RTN","SROALTS",36,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALTS",37,0)
 Q
"RTN","SROALTS",38,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALTS",39,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALTS",40,0)
HDR W @IOF,!,?26,"TRANSMITTED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"TRANSMISSION DATE",!,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALTS",41,0)
 Q
"RTN","SROALTS",42,0)
SS ; print surgical specialty
"RTN","SROALTS",43,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALTS",44,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALTS",45,0)
 Q
"RTN","SROALTSP")
0^32^B12106234^B11921098
"RTN","SROALTSP",1,0)
SROALTSP ;BIR/MAM - TRANSMITTED ASSESSMENTS (PRINTER) ;01/18/07
"RTN","SROALTSP",2,0)
 ;;3.0; Surgery ;**32,50,142,153,160**;24 Jun 93;Build 7
"RTN","SROALTSP",3,0)
 K ^TMP("SRA",$J) S SRPAGE=0,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALTSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROALTSP",5,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALTSP",6,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALTSP",7,0)
 Q
"RTN","SROALTSP",8,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALTSP",9,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALTSP",10,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALTSP",11,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALTSP",12,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALTSP",13,0)
 Q
"RTN","SROALTSP",14,0)
SET ; print assessments
"RTN","SROALTSP",15,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALTSP",16,0)
 I $Y+5>IOSL D HDR I SRSOUT Q
"RTN","SROALTSP",17,0)
 S SR("RA")=^SRF(SRTN,"RA"),SRAT="",Y=$E($P(SR("RA"),"^",4),1,7) I Y D D^DIQ S SRAT=Y
"RTN","SROALTSP",18,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALTSP",19,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALTSP",20,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALTSP",21,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALTSP",22,0)
 D TECH^SROPRIN
"RTN","SROALTSP",23,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALTSP",24,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,SRAT,?107,SRTECH,!,SRDT,?20,SROPS(1) S SRAO=1 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALTSP",25,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROALTSP",26,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROALTSP",27,0)
 D LINE
"RTN","SROALTSP",28,0)
 Q
"RTN","SROALTSP",29,0)
OTHER ; other operations
"RTN","SROALTSP",30,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALTSP",31,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALTSP",32,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALTSP",33,0)
 Q
"RTN","SROALTSP",34,0)
LOOP ; break procedures
"RTN","SROALTSP",35,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALTSP",36,0)
 Q
"RTN","SROALTSP",37,0)
HDR ; print heading
"RTN","SROALTSP",38,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALTSP",39,0)
 S SRPAGE=SRPAGE+1 W:$Y @IOF W !,?52,"TRANSMITTED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALTSP",40,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALTSP",41,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"TRANSMISSION DATE",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",! F LINE=1:1:132 W "="
"RTN","SROALTSP",42,0)
 Q
"RTN","SROALTSP",43,0)
SS ;print surgical specialty
"RTN","SROALTSP",44,0)
 I $Y+5>IOSL D HDR
"RTN","SROALTSP",45,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALTSP",46,0)
 Q
"RTN","SROALTSP",47,0)
LINE W ! F L=1:1:132 W "-"
"RTN","SROALTSP",48,0)
 Q
"RTN","SROANEW")
0^33^B18923715^B18722375
"RTN","SROANEW",1,0)
SROANEW ;BIR/MAM - CREATE NEW RISK ASSESSMENT ;01/18/07
"RTN","SROANEW",2,0)
 ;;3.0; Surgery ;**34,47,71,100,135,160**;24 Jun 93;Build 7
"RTN","SROANEW",3,0)
 W @IOF,!,?1,VADM(1)_"  "_VA("PID")
"RTN","SROANEW",4,0)
 W !! S (SRDT,CNT)=0 F I=0:0 S SRDT=$O(^SRF("ADT",DFN,SRDT)) Q:'SRDT!(SRSOUT)  S SRASS=0 F I=0:0 S SRASS=$O(^SRF("ADT",DFN,SRDT,SRASS)) Q:'SRASS!($D(SRTN))!(SRSOUT)  D LIST I $D(SRTN) G ASK
"RTN","SROANEW",5,0)
 I 'CNT W "No operations exist for this patient.  Assessment cannot be entered.",!!,"Press RETURN to continue... " R X:DTIME G END
"RTN","SROANEW",6,0)
OPT W !!,"Select Operation: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SROANEW",7,0)
 I '$D(SRCASE(X)) W !!,"Enter the number of the desired operation" W $S('$D(SRNEWOP):".",1:", or '"_CNT_"' to enter a new case.") G OPT
"RTN","SROANEW",8,0)
 S SRTN=+SRCASE(X)
"RTN","SROANEW",9,0)
ASK I SRATYPE="N" D EXCL^SROASS
"RTN","SROANEW",10,0)
 I $P($G(^SRF(SRTN,"RA")),"^",6)="N"!($P($G(^SRF(SRTN,"RA")),"^",7)'="") W !!,"This case is currently flagged as meeting Risk Assessment exclusion criteria.",$C(7)
"RTN","SROANEW",11,0)
 W !!,"Are you sure that you want to create a Risk Assessment for this surgical",!,"case ?  YES// " R SRYN:DTIME I '$T!(SRYN["^") K SRTN S SRSOUT=1 Q
"RTN","SROANEW",12,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter 'YES' to create an assessment for this surgical case, or 'NO' to quit",!,"this option." G ASK
"RTN","SROANEW",13,0)
 I "Yy"'[SRYN K SRTN S SRSOUT=1 Q
"RTN","SROANEW",14,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN) Q
"RTN","SROANEW",15,0)
 .I $P($G(^SRF(SRTN,"RA")),"^",6)="N"!($P($G(^SRF(SRTN,"RA")),"^",7)'="") D DRDEL^SRONASS
"RTN","SROANEW",16,0)
 .K DIE,DR,DA S DA=SRTN,DIE=130,DR="284////"_SRATYPE_";Q;323////Y;235////I" D ^DIE K DR,DIE,DA
"RTN","SROANEW",17,0)
 .N X S X=$P($G(^SRF(SRTN,209)),"^",12) I X="" D
"RTN","SROANEW",18,0)
 ..S DA=SRTN,DIE=130,DR="490////N" D ^DIE K DR,DIE,DA
"RTN","SROANEW",19,0)
 E  K SRTN
"RTN","SROANEW",20,0)
 Q
"RTN","SROANEW",21,0)
LIST ; list assessments
"RTN","SROANEW",22,0)
 I $P($G(^SRF(SRASS,"NON")),"^")="Y" Q
"RTN","SROANEW",23,0)
 S SRSCAN=1 I $D(^SRF(SRASS,.2)),$P(^(.2),"^",12)'="" K SRSCAN
"RTN","SROANEW",24,0)
 I $D(SRSCAN),$P($G(^SRF(SRASS,30)),"^") Q
"RTN","SROANEW",25,0)
 I $D(SRSCAN),$P($G(^SRF(SRASS,31)),"^",8) Q
"RTN","SROANEW",26,0)
 I $D(^SRF(SRASS,37)),$P(^(37),"^") Q
"RTN","SROANEW",27,0)
 I $Y+5>IOSL S SRBACK=0 D SEL Q:$D(SRTN)!(SRSOUT)  I SRBACK S CNT=0,SRASS=SRCASE(1)-1,SRDT=$P(SRCASE(1),"^",2) W @IOF,!,?1,VADM(1)_"   "_VA("PID"),! Q
"RTN","SROANEW",28,0)
 S CNT=CNT+1,SRSDATE=$P(^SRF(SRASS,0),"^",9)
"RTN","SROANEW",29,0)
DISP S SROPER=$P(^SRF(SRASS,"OP"),"^") I $O(^SRF(SRASS,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRASS,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANEW",30,0)
 S SR("RA")=$G(^SRF(SRASS,"RA")) I "N"'[$P(SR("RA"),"^",6) S CNT=CNT-1 Q
"RTN","SROANEW",31,0)
 S SROP=SRASS D ^SROP1
"RTN","SROANEW",32,0)
 K SROPS,MM,MMM S:$L(SROPER)<65 SROPS(1)=SROPER I $L(SROPER)>64 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANEW",33,0)
 I '$D(SRTN) W CNT_". "
"RTN","SROANEW",34,0)
CASE W $E(SRSDATE,4,5)_"-"_$E(SRSDATE,6,7)_"-"_$E(SRSDATE,2,3),?14,SROPS(1) I $D(SROPS(2)) W !,?14,SROPS(2) I $D(SROPS(3)) W !,?14,SROPS(3)
"RTN","SROANEW",35,0)
 I $D(SROPS(4)) W !,?14,SROPS(4)
"RTN","SROANEW",36,0)
 I $D(SRTN) Q
"RTN","SROANEW",37,0)
 W !! S SRCASE(CNT)=SRASS_"^"_SRDT
"RTN","SROANEW",38,0)
 Q
"RTN","SROANEW",39,0)
OTHER ; other operations
"RTN","SROANEW",40,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRASS,13,SROTHER,0),"^"))>235 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANEW",41,0)
 I SRLONG S SROPERS=$P(^SRF(SRASS,13,SROTHER,0),"^")
"RTN","SROANEW",42,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANEW",43,0)
 Q
"RTN","SROANEW",44,0)
LOOP ; break procedures
"RTN","SROANEW",45,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<65  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANEW",46,0)
 Q
"RTN","SROANEW",47,0)
SEL ; select case
"RTN","SROANEW",48,0)
 W !!!,"Select Operation, or enter <RET> to continue listing Procedures: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROANEW",49,0)
 I X="" W @IOF,!,?1,VADM(1)_"  "_VA("PID"),!! Q
"RTN","SROANEW",50,0)
 I '$D(SRCASE(X)) W !!,"Please enter the number corresponding to the Surgical Case you want to edit.",!,"If the case desired does not appear, enter <RET> to continue listing",!,"additional cases."
"RTN","SROANEW",51,0)
 I '$D(SRCASE(X)) W !!,"Press <RET> to continue  " R X:DTIME S:'$T SRSOUT=1 S SRBACK=1 Q
"RTN","SROANEW",52,0)
 S SRTN=+SRCASE(X)
"RTN","SROANEW",53,0)
 Q
"RTN","SROANEW",54,0)
TYPE K DR,DIE S DR="284////"_SRATYPE,DIE=139,DA=SRTN D ^DIE
"RTN","SROANEW",55,0)
 K DR,DA,DIE S DR="235////I",DIE=139,DA=SRTN D ^DIE K DR
"RTN","SROANEW",56,0)
END D ^SRSKILL W @IOF
"RTN","SROANEW",57,0)
 Q
"RTN","SROANT")
0^34^B10975780^B10789916
"RTN","SROANT",1,0)
SROANT ;BIR/MAM - INCOMPLETE ASSESSMENTS ;01/18/07
"RTN","SROANT",2,0)
 ;;3.0; Surgery ;**38,50,100,142,153,160**;24 Jun 93;Build 7
"RTN","SROANT",3,0)
 I $E(IOST)="P" D ^SROANTP Q
"RTN","SROANT",4,0)
 S SRSOUT=0 D HDR
"RTN","SROANT",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROANT",6,0)
 Q
"RTN","SROANT",7,0)
SET ; print assessments
"RTN","SROANT",8,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANT",9,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROANT",10,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANT",11,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANT",12,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROANT",13,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANT",14,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANT",15,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANT",16,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANT",17,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROANT",18,0)
 D TECH^SROPRIN
"RTN","SROANT",19,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANT",20,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANT",21,0)
 S SRDOC=Y
"RTN","SROANT",22,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH,!,SRDOC I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3)
"RTN","SROANT",23,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROANT",24,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROANT",25,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROANT",26,0)
 Q
"RTN","SROANT",27,0)
OTHER ; other operations
"RTN","SROANT",28,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANT",29,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANT",30,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANT",31,0)
 Q
"RTN","SROANT",32,0)
LOOP ; break procedures
"RTN","SROANT",33,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANT",34,0)
 Q
"RTN","SROANT",35,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROANT",36,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROANT",37,0)
HDR W @IOF,!,?26,"INCOMPLETE RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"SURGICAL SPECIALTY"
"RTN","SROANT",38,0)
 W !,"OPERATION DATE",?20,"OPERATION(S)",?55,"ANESTHESIA TECHNIQUE",!,"SURGEON",! F LINE=1:1:80 W "="
"RTN","SROANT",39,0)
 Q
"RTN","SROANTP")
0^35^B11181920^B10996883
"RTN","SROANTP",1,0)
SROANTP ;BIR/MAM - INCOMPLETE ASSESSMENTS (PRINTER) ;01/18/07
"RTN","SROANTP",2,0)
 ;;3.0; Surgery ;**32,50,100,142,153,160**;24 Jun 93;Build 7
"RTN","SROANTP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROANTP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D SET
"RTN","SROANTP",5,0)
 Q
"RTN","SROANTP",6,0)
SET ; print assessments
"RTN","SROANTP",7,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANTP",8,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROANTP",9,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANTP",10,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANTP",11,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANTP",12,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANTP",13,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANTP",14,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANTP",15,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROANTP",16,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROANTP",17,0)
 D TECH^SROPRIN
"RTN","SROANTP",18,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANTP",19,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANTP",20,0)
 S SRDOC=Y
"RTN","SROANTP",21,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1),?107,SRDOC I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROANTP",22,0)
 N I,SRPROC,SRL S SRL=100 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROANTP",23,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROANTP",24,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROANTP",25,0)
 Q
"RTN","SROANTP",26,0)
OTHER ; other operations
"RTN","SROANTP",27,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANTP",28,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANTP",29,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANTP",30,0)
 Q
"RTN","SROANTP",31,0)
LOOP ; break procedures
"RTN","SROANTP",32,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<81  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANTP",33,0)
 Q
"RTN","SROANTP",34,0)
HDR ; print heading
"RTN","SROANTP",35,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROANTP",36,0)
 W:$Y @IOF W !,?53,"INCOMPLETE RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROANTP",37,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROANTP",38,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",?107,"SURGEON",! F LINE=1:1:132 W "="
"RTN","SROANTP",39,0)
 Q
"RTN","SROANTS")
0^36^B12602082^B12415292
"RTN","SROANTS",1,0)
SROANTS ;BIR/MAM - INCOMPLETE ASSESSMENTS ;01/18/07
"RTN","SROANTS",2,0)
 ;;3.0; Surgery ;**38,50,100,142,153,160**;24 Jun 93;Build 7
"RTN","SROANTS",3,0)
 I $E(IOST)="P" D ^SROANTSP Q
"RTN","SROANTS",4,0)
 K ^TMP("SRA",$J)
"RTN","SROANTS",5,0)
 S SRSOUT=0 D HDR
"RTN","SROANTS",6,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROANTS",7,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROANTS",8,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROANTS",9,0)
 Q
"RTN","SROANTS",10,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROANTS",11,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANTS",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROANTS",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROANTS",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROANTS",15,0)
 Q
"RTN","SROANTS",16,0)
SET ; print assessments
"RTN","SROANTS",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANTS",18,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROANTS",19,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANTS",20,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROANTS",21,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANTS",22,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANTS",23,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANTS",24,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANTS",25,0)
 D TECH^SROPRIN
"RTN","SROANTS",26,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANTS",27,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANTS",28,0)
 S SRDOC=Y
"RTN","SROANTS",29,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,SRTECH,!,SRDT,?20,SROPS(1),?55,SRDOC S SRAO=1 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROANTS",30,0)
 N I,SRPROC,SRL S SRL=48 D CPTS^SROAUTL0 W !,?20,"CPT Codes: "
"RTN","SROANTS",31,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROANTS",32,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROANTS",33,0)
 Q
"RTN","SROANTS",34,0)
OTHER ; other operations
"RTN","SROANTS",35,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANTS",36,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANTS",37,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANTS",38,0)
 Q
"RTN","SROANTS",39,0)
LOOP ; break procedures
"RTN","SROANTS",40,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANTS",41,0)
 Q
"RTN","SROANTS",42,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROANTS",43,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROANTS",44,0)
HDR W @IOF,!!,?26,"INCOMPLETE RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROANTS",45,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?55,"ANESTHESIA TECHNIQUE"
"RTN","SROANTS",46,0)
 W !,"OPERATION DATE",?20,"OPERATION(S)",?55,"SURGEON",! F LINE=1:1:80 W "="
"RTN","SROANTS",47,0)
 Q
"RTN","SROANTS",48,0)
SS ; print surgical specialty
"RTN","SROANTS",49,0)
 I $Y+8>IOSL D PAGE Q:SRSOUT
"RTN","SROANTS",50,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROANTS",51,0)
 Q
"RTN","SROANTSP")
0^37^B12449043^B12263907
"RTN","SROANTSP",1,0)
SROANTSP ;BIR/MAM - INCOMPLETE ASSESSMENTS (PRINTER) ;01/18/07
"RTN","SROANTSP",2,0)
 ;;3.0; Surgery ;**32,50,100,142,153,160**;24 Jun 93;Build 7
"RTN","SROANTSP",3,0)
 K ^TMP("SRA",$J) S SRPAGE=0,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROANTSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D UTL
"RTN","SROANTSP",5,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN LINE Q:'SRTN!SRSOUT  D SET
"RTN","SROANTSP",6,0)
 Q
"RTN","SROANTSP",7,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROANTSP",8,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANTSP",9,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROANTSP",10,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SRECIALTY NOT ENTERED")
"RTN","SROANTSP",11,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROANTSP",12,0)
 Q
"RTN","SROANTSP",13,0)
SET ; print assessments
"RTN","SROANTSP",14,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANTSP",15,0)
 I $Y+5>IOSL D HDR I SRSOUT Q
"RTN","SROANTSP",16,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANTSP",17,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANTSP",18,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANTSP",19,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANTSP",20,0)
 K SROPS,MM,MMM S:$L(SROPER)<36 SROPS(1)=SROPER I $L(SROPER)>35 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANTSP",21,0)
 D TECH^SROPRIN
"RTN","SROANTSP",22,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANTSP",23,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANTSP",24,0)
 S SRDOC=Y
"RTN","SROANTSP",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,SROPS(1),?107,SRTECH,!,SRDT W:$D(SROPS(2)) ?67,SROPS(2) W ?107,SRDOC S SRAO=2 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?67,SROPS(SRAO)
"RTN","SROANTSP",26,0)
 N I,SRPROC,SRL S SRL=53 D CPTS^SROAUTL0 W !,?67,"CPT Codes: "
"RTN","SROANTSP",27,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?78,SRPROC(I) W:I'=1 !,?78,SRPROC(I)
"RTN","SROANTSP",28,0)
 W ! F LINE=1:1:132 W "-"
"RTN","SROANTSP",29,0)
 Q
"RTN","SROANTSP",30,0)
OTHER ; other operations
"RTN","SROANTSP",31,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANTSP",32,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANTSP",33,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANTSP",34,0)
 Q
"RTN","SROANTSP",35,0)
LOOP ; break procedures
"RTN","SROANTSP",36,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<35  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANTSP",37,0)
 Q
"RTN","SROANTSP",38,0)
HDR ; print heading
"RTN","SROANTSP",39,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROANTSP",40,0)
 S SRPAGE=SRPAGE+1 W:$Y @IOF W !,?53,"INCOMPLETE RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROANTSP",41,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROANTSP",42,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"OPERATIVE PROCEDURE(S)",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?107,"SURGEON",! F LINE=1:1:132 W "="
"RTN","SROANTSP",43,0)
 Q
"RTN","SROANTSP",44,0)
SS ; print surgical specialty
"RTN","SROANTSP",45,0)
 I $Y+5>IOSL D HDR
"RTN","SROANTSP",46,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROANTSP",47,0)
 Q
"RTN","SROANTSP",48,0)
LINE W ! F L=1:1:132 W "-"
"RTN","SROANTSP",49,0)
 Q
"RTN","SROAOP")
0^55^B17150014^B18332752
"RTN","SROAOP",1,0)
SROAOP ;BIR/MAM - ENTER OPERATION INFO ;04/24/07
"RTN","SROAOP",2,0)
 ;;3.0; Surgery ;**19,38,47,63,67,81,86,97,100,125,142,153,160**;24 Jun 93;Build 7
"RTN","SROAOP",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAOP",4,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAOP",5,0)
START G:SRSOUT END K SRAOTH,SRACON D ^SROAOP1
"RTN","SROAOP",6,0)
ASK W !!,"Select Operative Information to Edit: " R SRASEL:DTIME I '$T!(SRASEL["^") S SRSOUT=1 G END
"RTN","SROAOP",7,0)
 I SRASEL="" G END
"RTN","SROAOP",8,0)
 S SRN=13 S:SRASEL="a" SRASEL="A" I '$D(SRAO(SRASEL)),(SRASEL'?.N1":".N),(SRASEL'="A") D HELP G:SRSOUT END G START
"RTN","SROAOP",9,0)
 I SRASEL="A" S SRASEL="1:"_SRN
"RTN","SROAOP",10,0)
 I SRASEL?.N1":".N S Y=$E(SRASEL),Z=$P(SRASEL,":",2) I Y<1!(Z>SRN)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAOP",11,0)
 S MM=$E(SRASEL) I MM'=3,(MM'=4),(MM'=5) S SRHDR(.5)=SRDOC D HDR^SROAUTL
"RTN","SROAOP",12,0)
 I SRASEL?.N1":".N D RANGE G START
"RTN","SROAOP",13,0)
 Q:'$D(SRAO(SRASEL))
"RTN","SROAOP",14,0)
 S EMILY=SRASEL D  G START
"RTN","SROAOP",15,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAOP",16,0)
END I $D(SRSOUT),'SRSOUT D ^SROAOP2
"RTN","SROAOP",17,0)
 I $D(SRTN) S SROERR=SRTN D ^SROERR0
"RTN","SROAOP",18,0)
 W @IOF D ^SRSKILL
"RTN","SROAOP",19,0)
 Q
"RTN","SROAOP",20,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit. Examples of proper"
"RTN","SROAOP",21,0)
 W !,"responses are listed below.",!!,"1. Enter 'A' to update all information."
"RTN","SROAOP",22,0)
 W !!,"2. Enter a number (1-"_SRN_") to update the information in that field. (For"
"RTN","SROAOP",23,0)
 W !,"   example, enter '2' to update Principal Operation.)"
"RTN","SROAOP",24,0)
 W !!,"3. Enter a range of numbers (1-"_SRN_") separated by a ':' to enter a range of"
"RTN","SROAOP",25,0)
 W !,"   information. (For example, enter '6:8' to update PGY of Primary Surgeon,"
"RTN","SROAOP",26,0)
 W !,"   Surgical Priority and Wound Classification.)",!
"RTN","SROAOP",27,0)
PRESS K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAOP",28,0)
 Q
"RTN","SROAOP",29,0)
RANGE ; range of numbers
"RTN","SROAOP",30,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAOP",31,0)
 .S SHEMP=$P(SRASEL,":"),CURLEY=$P(SRASEL,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROAOP",32,0)
 Q
"RTN","SROAOP",33,0)
ONE ; edit one item
"RTN","SROAOP",34,0)
 I EMILY=3 D DISP^SROAUTL0 Q
"RTN","SROAOP",35,0)
 I EMILY=10 D ANES Q
"RTN","SROAOP",36,0)
 I EMILY=4 D ^SROTHER Q
"RTN","SROAOP",37,0)
 I EMILY=5 D CONCUR Q
"RTN","SROAOP",38,0)
 I EMILY=6,SRASEL[":",($P(SRASEL,":")'=6) S SRPAGE="" S SRHDR(.5)=SRDOC D HDR^SROAUTL
"RTN","SROAOP",39,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROAOP",40,0)
 I EMILY=2 D ^SROAUTL
"RTN","SROAOP",41,0)
 Q
"RTN","SROAOP",42,0)
RET Q:SRSOUT  W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAOP",43,0)
 Q
"RTN","SROAOP",44,0)
CONCUR ; concurrent case information
"RTN","SROAOP",45,0)
 N SRPROC,SRCSTAT S SRLINE="" F I=1:1:80 S SRLINE=SRLINE_"-"
"RTN","SROAOP",46,0)
 S CON=$P($G(^SRF(SRTN,"CON")),"^") I CON,($P($G(^SRF(CON,30)),"^")!($P($G(^SRF(CON,31)),"^",8))) S CON=""
"RTN","SROAOP",47,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROAOP",48,0)
 W !,"Concurrent case information cannot be updated using the Risk Assessment"
"RTN","SROAOP",49,0)
 W !,"Module. To update the CPT code of a concurrent case, please use an option"
"RTN","SROAOP",50,0)
 W !,"contained within the CPT/ICD9 Coding Menu."
"RTN","SROAOP",51,0)
 I CON D CC W !!,"Concurrent Procedure: ",?22,SROPS(1) I $D(SROPS(2)) W !,?22,SROPS(2) I $D(SROPS(3)) W !,?22,SROPS(3) I $D(SROPS(4)) W !,?22,SROPS(4)
"RTN","SROAOP",52,0)
 I $D(SRCSTAT) W !!,?22,SRCSTAT
"RTN","SROAOP",53,0)
 W !!,"Press ENTER to continue " R X:DTIME
"RTN","SROAOP",54,0)
 Q
"RTN","SROAOP",55,0)
CC ; list concurrent procedure
"RTN","SROAOP",56,0)
 N SRTN,SRL,SRZ S SRCSTAT=">> Coding "_$S($P($G(^SRO(136,CON,10)),"^"):"",1:"Not ")_"Complete <<"
"RTN","SROAOP",57,0)
 S SRL=55,SRTN=CON D CPTS^SROAUTL0
"RTN","SROAOP",58,0)
 I SRPROC(1)="NOT ENTERED"!'$D(SRPROC(1)) S SRPROC(1)="CPT NOT ENTERED" K SRCSTAT
"RTN","SROAOP",59,0)
 S SROPER=$P(^SRF(CON,"OP"),"^")_" (" F I=1:1 Q:'$D(SRPROC(I))  S SROPER=SROPER_SRPROC(I)
"RTN","SROAOP",60,0)
 S SROPER=SROPER_")"
"RTN","SROAOP",61,0)
 K SROPS,MM,MMM S:$L(SROPER)<57 SROPS(1)=SROPER
"RTN","SROAOP",62,0)
 I $L(SROPER)>56 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAOP",63,0)
 Q
"RTN","SROAOP",64,0)
LOOP ; break procedures
"RTN","SROAOP",65,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<57  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAOP",66,0)
 Q
"RTN","SROAOP",67,0)
ANES K DR,DIE,DA S DA=SRTN,DR=".37T",DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE K DR
"RTN","SROAOP",68,0)
 Q
"RTN","SROAOP1")
0^56^B11582758^B10623526
"RTN","SROAOP1",1,0)
SROAOP1 ;BIR/MAM - SET OPERATION INFO ;02/28/07
"RTN","SROAOP1",2,0)
 ;;3.0; Surgery ;**38,47,63,81,88,95,97,125,142,153,160**;24 Jun 93;Build 7
"RTN","SROAOP1",3,0)
 N SRCSTAT K SRA,SRAO F I=0,200,"OP" S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAOP1",4,0)
 S SRDOC="Surgeon: "_$P(^VA(200,$P(^SRF(SRTN,.1),"^",4),0),"^") F I=3,4,5 S SRAO(I)=""
"RTN","SROAOP1",5,0)
 K SROPS S SROPER=$P(SRA("OP"),"^")
"RTN","SROAOP1",6,0)
 S SRAO(2)="^26"
"RTN","SROAOP1",7,0)
 S:$L(SROPER)<49 SROPS(1)=SROPER K M,MM,MMM I $L(SROPER)>48 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAOP1",8,0)
 S X=$P(SRA(0),"^",4) S:X X=$P(^SRO(137.45,X,0),"^",1) S SRAO(1)=X_"^.04"
"RTN","SROAOP1",9,0)
 S SRHDR(.5)=SRDOC,SRPAGE="PAGE: 1 OF 2"
"RTN","SROAOP1",10,0)
 S SRCSTAT=">> Coding "_$S($P($G(^SRO(136,SRTN,10)),"^"):"",1:"Not ")_"Complete <<"
"RTN","SROAOP1",11,0)
 D HDR^SROAUTL
"RTN","SROAOP1",12,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",3) S:X X=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),X=$P(X,"^",2)_"   "_$P(X,"^",4)
"RTN","SROAOP1",13,0)
 W "Postop Diagnosis Code (ICD9): ",$S(X'="":X,1:"NOT ENTERED"),!
"RTN","SROAOP1",14,0)
 W !," 1. Surgical Specialty: ",?33,$P(SRAO(1),"^"),!," 2. Principal Operation: ",?33,SROPS(1) I $D(SROPS(2)) W !,?33,SROPS(2) I $D(SROPS(3)) W !,?33,SROPS(3) I $D(SROPS(4)) W !,?33,SROPS(4)
"RTN","SROAOP1",15,0)
 N SRPROC,SRL S SRL=49 D CPTS^SROAUTL0 W !," 3. CPT Codes (view only):" I SRPROC(1)="" S SRPROC(1)="NOT ENTERED"
"RTN","SROAOP1",16,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?33,SRPROC(I) W:I'=1 !,?33,SRPROC(I)
"RTN","SROAOP1",17,0)
 W !," 4. Other Procedures:" W:$O(^SRF(SRTN,13,0)) ?33,"***INFORMATION ENTERED***"
"RTN","SROAOP1",18,0)
 W !," 5. Concurrent Procedure:" S CON=$P($G(^SRF(SRTN,"CON")),"^") I CON,'($P($G(^SRF(CON,30)),"^")!($P($G(^SRF(CON,31)),"^",8))) W ?33,"***INFORMATION ENTERED***"
"RTN","SROAOP1",19,0)
 S X=$P(SRA(200),"^",52),SRAO(6)=X_"^214",NYUK=$P(SRA(0),"^",10) D EMERG S SRAO(7)=SHEMP_"^.035"
"RTN","SROAOP1",20,0)
 S Y=$P($G(^SRF(SRTN,"1.0")),"^",8),C=$P(^DD(130,1.09,0),"^",2) D:Y'="" Y^DIQ S SRAO(8)=Y_"^1.09"
"RTN","SROAOP1",21,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(9)=Y_"^1.13"
"RTN","SROAOP1",22,0)
 D TECH^SROPRIN S SRAO(10)=SRTECH
"RTN","SROAOP1",23,0)
 S X=$P(SRA(200),"^",54),SRAO(11)=X_"^340" K SRA(.2)
"RTN","SROAOP1",24,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",4) D
"RTN","SROAOP1",25,0)
 .I Y="" S (Y,$P(^SRF(SRTN,200.1),"^",4))="N"
"RTN","SROAOP1",26,0)
 .S C=$P(^DD(130,443,0),"^",2) D:Y'="" Y^DIQ S SRAO(12)=Y_"^443"
"RTN","SROAOP1",27,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",6) D
"RTN","SROAOP1",28,0)
 .I Y="" S (Y,$P(^SRF(SRTN,200.1),"^",6))="N"
"RTN","SROAOP1",29,0)
 .S C=$P(^DD(130,446,0),"^",2) D:Y'="" Y^DIQ S SRAO(13)=Y_"^446"
"RTN","SROAOP1",30,0)
 W !," 6. PGY of Primary Surgeon:",?33,$P(SRAO(6),"^"),!," 7. Surgical Priority:",?33,$P(SRAO(7),"^"),!," 8. Wound Classification: ",?33,$P(SRAO(8),"^")
"RTN","SROAOP1",31,0)
 W !," 9. ASA Classification:",?33,$P(SRAO(9),"^")
"RTN","SROAOP1",32,0)
 W !,"10. Princ. Anesthesia Technique: ",$P(SRAO(10),"^")
"RTN","SROAOP1",33,0)
 W !,"11. RBC Units Transfused:",?33,$P(SRAO(11),"^")
"RTN","SROAOP1",34,0)
 W !,"12. Intraop Disseminated Cancer:",?33,$P(SRAO(12),"^")
"RTN","SROAOP1",35,0)
 W !,"13. Intraoperative Ascites:",?33,$P(SRAO(13),"^")
"RTN","SROAOP1",36,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROAOP1",37,0)
 Q
"RTN","SROAOP1",38,0)
YN S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAOP1",39,0)
 Q
"RTN","SROAOP1",40,0)
LOOP ; break procedures
"RTN","SROAOP1",41,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<49  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAOP1",42,0)
 Q
"RTN","SROAOP1",43,0)
EMERG ; surgical priority
"RTN","SROAOP1",44,0)
 I NYUK="" S SHEMP="" Q
"RTN","SROAOP1",45,0)
 S Y=NYUK,C=$P(^DD(130,.035,0),"^",2) D Y^DIQ S SHEMP=Y
"RTN","SROAOP1",46,0)
 Q
"RTN","SROAOUT")
0^75^B12427233^B12360492
"RTN","SROAOUT",1,0)
SROAOUT ;BIR/SJA - OUTCOMES DATA ;04/03/07
"RTN","SROAOUT",2,0)
 ;;3.0; Surgery ;**125,135,142,160**;24 Jun 93;Build 7
"RTN","SROAOUT",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAOUT",4,0)
 D SRA^SROES S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAOUT",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROUTC
"RTN","SROAOUT",6,0)
ASK W !!,"Select Outcomes Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROAOUT",7,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROAOUT",8,0)
 I X="A" S X="0:13"
"RTN","SROAOUT",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<0!(Z>13)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAOUT",10,0)
 D HDR^SROAUTL
"RTN","SROAOUT",11,0)
 I X?.N1":".N D RANGE G START
"RTN","SROAOUT",12,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROAOUT",13,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAOUT",14,0)
END D:$D(SRTN) EXIT^SROES W @IOF D ^SRSKILL
"RTN","SROAOUT",15,0)
 Q
"RTN","SROAOUT",16,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROAOUT",17,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (0-13) to update the information in that field.  (For",!,"   example, enter '4' to update Mediastinitis)"
"RTN","SROAOUT",18,0)
 W !!,"3. Enter a range of numbers separated by a ':' to enter a range of",!,"   information.  (For example, enter '11:13' to enter Stroke,",!,"   Coma >= 24 hr, and New Mech Circ Support)"
"RTN","SROAOUT",19,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROAOUT",20,0)
 Q
"RTN","SROAOUT",21,0)
RANGE ; range of numbers
"RTN","SROAOUT",22,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAOUT",23,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROAOUT",24,0)
 Q
"RTN","SROAOUT",25,0)
ONE ; edit one item
"RTN","SROAOUT",26,0)
 N SRBEF
"RTN","SROAOUT",27,0)
 S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I",DR=$P(SRAO(EMILY),"^",2) D EN^DIQ1 K DA,DIC,DIQ,DR S SRBEF=SRY(130,SRTN,$P(SRAO(EMILY),"^",2),"I")
"RTN","SROAOUT",28,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DA,DIE,DR I $D(Y)!$D(DTOUT) S SRSOUT=1
"RTN","SROAOUT",29,0)
 Q:'EMILY
"RTN","SROAOUT",30,0)
 I 'SRSOUT,SRBEF'="Y",X="Y" D UPDATE^SROUTC Q
"RTN","SROAOUT",31,0)
 I 'SRSOUT,SRBEF="Y",X="Y",EMILY=8 D  K DA,DR,DIE Q
"RTN","SROAOUT",32,0)
 .N SROCC,SRSTAT S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=27 S SRSTAT=$P(^SRF(SRTN,16,SROCC,0),"^",5) Q
"RTN","SROAOUT",33,0)
 .K DIR S DIR(0)="130.22,8",DIR("A")="Cardiopulmonary Bypass Status",DA(1)=SRTN,DA=SROCC D ^DIR K DA,DR,DIE,DIR
"RTN","SROAOUT",34,0)
 .I ($G(SRSTAT)=""&((X="")!(X="@")!(X["^")))!(Y=0) D DEL^SROUTC S DA=SRTN,DIE=130,DR="391////N" D ^DIE Q
"RTN","SROAOUT",35,0)
 .I $G(SRSTAT)'="",X["^" Q
"RTN","SROAOUT",36,0)
 .I $G(SRSTAT)'=Y,Y'="" S DA=SROCC,DA(1)=SRTN,DIE="^SRF(SRTN,16,",DR="8////"_Y D ^DIE Q
"RTN","SROAOUT",37,0)
 I 'SRSOUT,SRBEF="Y",(X=""!(X="N")) D DEL^SROUTC
"RTN","SROAOUT",38,0)
 Q
"RTN","SROAOUT",39,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAOUT",40,0)
 Q
"RTN","SROAPCA")
0^12^B25536856^B25381788
"RTN","SROAPCA",1,0)
SROAPCA ;BIR/MAM - PRINT CLINICAL DATA ;09/27/04
"RTN","SROAPCA",2,0)
 ;;3.0; Surgery ;**38,47,71,95,125,134,153,160**;24 Jun 93;Build 7
"RTN","SROAPCA",3,0)
 F I=0,206,207,208,200.1 S SRA(I)=$G(^SRF(SRTN,I)),$P(LN,"-",79)=""
"RTN","SROAPCA",4,0)
 S X=$P(SRA(0),"^",9),SRADATE=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROAPCA",5,0)
 W:$Y @IOF W !,?5,"VA CONTINUOUS IMPROVEMENT IN CARDIAC SURGERY PROGRAM (CICSP/CICSP-X)",!
"RTN","SROAPCA",6,0)
 W ! F MOE=1:1:80 W "="
"RTN","SROAPCA",7,0)
 W !,"I. IDENTIFYING DATA",?60,"Case #: "_SRTN
"RTN","SROAPCA",8,0)
 N SRSPH1,SRZIP S (SRSPH1,SRZIP)=""
"RTN","SROAPCA",9,0)
 S STATNUM=+$P($$SITE^SROVAR,"^",3) D ADD^VADPT
"RTN","SROAPCA",10,0)
 W !,"Patient: "_SRANM,?60,"Fac./Div. #: "_STATNUM
"RTN","SROAPCA",11,0)
 W !,"Surgery Date: "_SRADATE,?25,"Address: "_VAPA(1)
"RTN","SROAPCA",12,0)
 S SRSPH1=VAPA(8) S:SRSPH1="" SRSPH1="NS/Unknown" S SRZIP=$S(VAPA(11)'="":$P(VAPA(11),"^",2),1:VAPA(6)) S:SRZIP="" SRZIP="NS/Unknown"
"RTN","SROAPCA",13,0)
 W !,"Phone: "_SRSPH1,?25,"Zip Code: "_SRZIP
"RTN","SROAPCA",14,0)
 S X=VADM(3) W ?53,"Date of Birth: ",$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROAPCA",15,0)
 S SRAO(1)=SRADATE,NYUK=$P(SRA(0),"^",4),SRAO(2)=$P(VADM(5),"^",2)
"RTN","SROAPCA",16,0)
 S SRAO(3)=AGE,NYUK=$P(SRA(206),"^") S:NYUK'="" NYUK=$S(NYUK["C"!(NYUK["c"):+NYUK_" cm",1:+NYUK_" in") S SRAO(4)=NYUK_"^236"
"RTN","SROAPCA",17,0)
 S NYUK=$P(SRA(206),"^",2) S:NYUK'="" NYUK=$S(NYUK["K"!(NYUK["k"):+NYUK_" kg",1:+NYUK_" lb") S SRAO(5)=NYUK_"^237"
"RTN","SROAPCA",18,0)
 S SRA(200)=$G(^SRF(SRTN,200)),SRA(209)=$G(^SRF(SRTN,209))
"RTN","SROAPCA",19,0)
 S NYUK=$P(SRA(209),"^",3),SRAO(6)=$S(NYUK="N":"NO",NYUK="O":"ORAL",NYUK="D":"DIET",NYUK="I":"INSULIN",1:"")_"^475",NYUK=$P(SRA(200),"^",11) D YN S SRAO(7)=SHEMP_"^203"
"RTN","SROAPCA",20,0)
 S SRAO(8)=$P(SRA(206),"^",5)_"^347",NYUK=$P(SRA(206),"^",6) D YN S SRAO(9)=SHEMP_"^209",NYUK=$P(SRA(206),"^",7) D YN S SRAO(10)=SHEMP_"^348"
"RTN","SROAPCA",21,0)
 S Y=$P(SRA(200.1),"^",5),C=$P(^DD(130,510,0),"^",2) D Y^DIQ S SRAO(11)=$S(Y["-":$E($P(Y,"-",2),1,22),1:$E(Y,1,22))_"^510"
"RTN","SROAPCA",22,0)
 S NYUK=$P(SRA(206),"^",11) D YN S SRAO(14)=SHEMP_"^350",NYUK=$P(SRA(200),"^",8),SRAO(15)=$S(NYUK=1:"INDEPENDENT",NYUK=2:"PARTIAL DEPENDENT",NYUK=3:"TOTALLY DEPENDENT",NYUK="NS":"NS",1:"")_"^240"
"RTN","SROAPCA",23,0)
 S NYUK=$P(SRA(206),"^",13),SRAO(16)=$S(NYUK=0:"None",NYUK=1:"NONE RECENT",NYUK=2:"12-72 HRS",NYUK=3:"<12 hrs",NYUK=12:"12 - 72 hrs",NYUK=72:">72 hrs - 7 days",NYUK=7:">7 days",NYUK="NS":"NO STUDY",1:"")_"^351"
"RTN","SROAPCA",24,0)
 S NYUK=$P(SRA(206),"^",14),SRAO(17)=$S(NYUK=0:"NONE",NYUK=1:"< OR = 7 DAYS OF SURG",NYUK=2:"> 7 DAYS OF SURG",NYUK="NS":"NS",1:"")_"^205"
"RTN","SROAPCA",25,0)
 S NYUK=$P(SRA(206),"^",15) S SHEMP=$S(NYUK=0:"NONE",NYUK=">":">3",NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:NYUK) S SRAO(18)=SHEMP_"^352"
"RTN","SROAPCA",26,0)
 S NYUK=$P(SRA(206),"^",42)
"RTN","SROAPCA",27,0)
 S NYUK=$P(SRA(206),"^",16) D YN S SRAO(19)=SHEMP_"^265",NYUK=$P(SRA(206),"^",17) D YN S SRAO(20)=SHEMP_"^264"
"RTN","SROAPCA",28,0)
 S SRAO(21)=$P(SRA(206),"^",18)_"^267",SRAO(22)=$P(SRA(206),"^",19)_"^207",NYUK=$P(SRA(206),"^",20) D YN S SRAO(23)=SHEMP_"^353",NYUK=$P(SRA(206),"^",21) D YN S SRAO(24)=SHEMP_"^354"
"RTN","SROAPCA",29,0)
 S NYUK=$P(SRA(206),"^",22) D YN S SRAO(25)=SHEMP_"^355"
"RTN","SROAPCA",30,0)
 S NYUK=$P(SRA(209),"^",2),SRAO(26)=$S(NYUK="N":"NONE",NYUK="I":"IABP",NYUK="V":"VAD",NYUK="A":"ARTI",NYUK="O":"OTHER",1:NYUK)_"^474"
"RTN","SROAPCA",31,0)
 S NYUK=$P(SRA(206),"^",38) D YN S SRAO(27)=SHEMP_"^463"
"RTN","SROAPCA",32,0)
 S NYUK=$P(SRA(206),"^",10) D YN S SRAO(29)=SHEMP_"^349"
"RTN","SROAPCA",33,0)
DISP ; display fields
"RTN","SROAPCA",34,0)
 W ! F MOE=1:1:80 W "="
"RTN","SROAPCA",35,0)
 W !,"II. CLINICAL DATA"
"RTN","SROAPCA",36,0)
 W !,"Gender:",?26,$P(SRAO(2),"^"),?40,"PCI: ",$J($P(SRAO(16),"^"),34)
"RTN","SROAPCA",37,0)
 W !,"Age:",?26,SRAO(3),?40,"Prior MI:",$J($P(SRAO(17),"^"),30)
"RTN","SROAPCA",38,0)
 W !,"Height:",?26,$P(SRAO(4),"^"),?40,"# of prior heart surgeries:",?75,$P(SRAO(18),"^")
"RTN","SROAPCA",39,0)
 W !,"Weight:",?26,$P(SRAO(5),"^"),?40,"Prior heart surgeries: " D H485
"RTN","SROAPCA",40,0)
 W !,"Diabetes:",?26,$P(SRAO(6),"^"),?40,"Peripheral Vascular Disease:",?75,$P(SRAO(19),"^")
"RTN","SROAPCA",41,0)
 W !,"COPD:",?26,$P(SRAO(7),"^"),?40,"Cerebral Vascular Disease:",?75,$P(SRAO(20),"^")
"RTN","SROAPCA",42,0)
 W !,"FEV1:",?26,$P(SRAO(8),"^")_$S($P(SRAO(8),"^")="":"",$P(SRAO(8),"^")="NS":"",1:" liters"),?40,"Angina (use CCS Class):",?75,$P(SRAO(21),"^")
"RTN","SROAPCA",43,0)
 W !,"Cardiomegaly (X-ray): ",?26,$P(SRAO(9),"^"),?40,"CHF (use NYHA Class):",?75,$P(SRAO(22),"^")
"RTN","SROAPCA",44,0)
 W !,"Pulmonary Rales:",?26,$P(SRAO(10),"^"),?40,"Current Diuretic Use:",?75,$P(SRAO(23),"^")
"RTN","SROAPCA",45,0)
 W !,"Current Smoker: ",$J($P(SRAO(11),"^"),22),?40,"Current Digoxin Use:",?75,$P(SRAO(24),"^")
"RTN","SROAPCA",46,0)
 W !,"Active Endocarditis:",?26,$P(SRAO(29),"^"),?40,"IV NTG 48 Hours Preceding Surgery:",?75,$P(SRAO(25),"^")
"RTN","SROAPCA",47,0)
 W !,"Resting ST Depression:",?26,$P(SRAO(14),"^"),?40,"Preop circulatory Device:",?74,$P(SRAO(26),"^")
"RTN","SROAPCA",48,0)
 W !,"Functional Status: ",$J($P(SRAO(15),"^"),18),?40,"Hypertension:",?75,$P(SRAO(27),"^")
"RTN","SROAPCA",49,0)
 K SRA,SRAO D ^SROAPCA1
"RTN","SROAPCA",50,0)
 Q
"RTN","SROAPCA",51,0)
YN ; store answer
"RTN","SROAPCA",52,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA",53,0)
 Q
"RTN","SROAPCA",54,0)
PAGE I $E(IOST)'="P" W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPCA",55,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROAPCA",56,0)
 W @IOF,!,SRANM,! F MOE=1:1:80 W "="
"RTN","SROAPCA",57,0)
 Q
"RTN","SROAPCA",58,0)
H485 S SHEMP="",X=$P(SRA(206),"^",42) F I=1:1:$L(X,",") D
"RTN","SROAPCA",59,0)
 .S C=$P(X,",",I) S:I>1 SHEMP=SHEMP_", " S SHEMP=SHEMP_$S(C=0:"None",C=1:"CABG-only",C=2:"Valve-only",C=3:"CABG/valve",C=4:"Other",C=5:"CABG/Other",1:"")
"RTN","SROAPCA",60,0)
 S X=SHEMP I $L(X)<17 W $J(X,16) Q
"RTN","SROAPCA",61,0)
 W $J($P(X,",")_",",16) I $L($P(X,", ",2,9))<40 W !,?41,$P(X,", ",2,9) Q
"RTN","SROAPCA",62,0)
 W !,?41,$P(X,", ",2,4)_",",!,?41,$P(X,", ",5,9)
"RTN","SROAPCA",63,0)
 Q
"RTN","SROAPCA3")
0^76^B20458741^B20448711
"RTN","SROAPCA3",1,0)
SROAPCA3 ;B'HAM ISC/MAM - CARDIAC OCCURRENCE DATA ;04/23/07
"RTN","SROAPCA3",2,0)
 ;;3.0; Surgery ;**38,71,95,101,125,160**;24 Jun 93;Build 7
"RTN","SROAPCA3",3,0)
 D EN^SROCCAT K SRA S SRA(205)=$G(^SRF(SRTN,205)),SRA(208)=$G(^SRF(SRTN,208)),SRA(206)=$G(^SRF(SRTN,206)),SRA(209)=$G(^SRF(SRTN,209))
"RTN","SROAPCA3",4,0)
 S NYUK=$P(SRA(208),"^") D YN S SRAO(1)=SHEMP_"^384"
"RTN","SROAPCA3",5,0)
 S Y=$P($G(^DPT(DFN,.35)),"^") D DT^SROAPCA1 S SRAO(2)=X
"RTN","SROAPCA3",6,0)
 S NYUK=$P(SRA(208),"^",2) D YN S SRAO(3)=SHEMP_"^385",NYUK=$P(SRA(208),"^",3) D YN S SRAO(4)=SHEMP_"^386",NYUK=$P(SRA(205),"^",17) D YN S SRAO(5)=SHEMP_"^254",NYUK=$P(SRA(209),"^",12) D YN S SRAO(6)=SHEMP_"^490"
"RTN","SROAPCA3",7,0)
 S NYUK=$P(SRA(208),"^",5) D YN S SRAO(7)=SHEMP_"^388",NYUK=$P(SRA(208),"^",6) D YN S SRAO(8)=SHEMP_"^389",NYUK=$P(SRA(205),"^",13) D YN S SRAO(9)=SHEMP_"^285"
"RTN","SROAPCA3",8,0)
 S NYUK=$P(SRA(208),"^",7) D YN S SRAO(10)=SHEMP_"^391",NYUK=$P(SRA(205),"^",22) D YN S SRAO(11)=SHEMP_"^410"
"RTN","SROAPCA3",9,0)
 S NYUK=$P(SRA(205),"^",21) D YN S SRAO(12)=SHEMP_"^256",NYUK=$P(SRA(205),"^",26) D YN S SRAO(13)=SHEMP_"^411"
"RTN","SROAPCA3",10,0)
 S NYUK=$P(SRA(206),"^",39) D YN S SRAO(14)=SHEMP_"^466"
"RTN","SROAPCA3",11,0)
 S NYUK=$P(SRA(206),"^",40) D YN S SRAO(15)=SHEMP_"^467"
"RTN","SROAPCA3",12,0)
 I $Y+5>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",13,0)
 W !!,"VII. OUTCOMES"
"RTN","SROAPCA3",14,0)
 W !,"Operative Death:",?18,$P(SRAO(1),"^"),?43,"Date of Death:",?58,$P(SRAO(2),"^")
"RTN","SROAPCA3",15,0)
 ;I $Y+10>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",16,0)
 W !!,"Perioperative (30 day) Occurrences:"
"RTN","SROAPCA3",17,0)
 W !,?2,"Perioperative MI:",?36,$P(SRAO(3),"^"),?42,"Repeat cardiac Surg procedure:",?74,$P(SRAO(10),"^")
"RTN","SROAPCA3",18,0)
 W !,?2,"Endocarditis:",?36,$P(SRAO(4),"^"),?42,"Tracheostomy:",?74,$P(SRAO(14),"^")
"RTN","SROAPCA3",19,0)
 W !,?2,"Renal Failure Requiring Dialysis:",?36,$P(SRAO(5),"^"),?42,"Ventilator supp within 30 days:",?74,$P(SRAO(6),"^")
"RTN","SROAPCA3",20,0)
 W !,?2,"Mediastinitis:",?36,$P(SRAO(7),"^"),?42,"Stroke/CVA:",?74,$P(SRAO(12),"^")
"RTN","SROAPCA3",21,0)
 W !,?2,"Cardiac Arrest Requiring CPR:",?36,$P(SRAO(13),"^"),?42,"Coma > or = 24 Hours:",?74,$P(SRAO(11),"^")
"RTN","SROAPCA3",22,0)
 W !,?2,"Reoperation for Bleeding:",?36,$P(SRAO(8),"^"),?42,"New Mech Circulatory Support:",?74,$P(SRAO(15),"^")
"RTN","SROAPCA3",23,0)
 W !,?2,"On ventilator > or = 48 hr:",?36,$P(SRAO(9),"^")
"RTN","SROAPCA3",24,0)
 D RES
"RTN","SROAPCA3",25,0)
 Q
"RTN","SROAPCA3",26,0)
YN ; store answer
"RTN","SROAPCA3",27,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA3",28,0)
 Q
"RTN","SROAPCA3",29,0)
 ;
"RTN","SROAPCA3",30,0)
RES I $Y+12>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",31,0)
 S SRA(208)=$G(^SRF(SRTN,208))
"RTN","SROAPCA3",32,0)
 S SRA(.2)=$G(^SRF(SRTN,.2))
"RTN","SROAPCA3",33,0)
 W !!,"VIII. RESOURCE DATA"
"RTN","SROAPCA3",34,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",14) D DT^SROAPCA1 W !,"Hospital Admission Date:",?47,X
"RTN","SROAPCA3",35,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",15) D DT^SROAPCA1 W !,"Hospital Discharge Date:",?47,X
"RTN","SROAPCA3",36,0)
 S Y=$P(SRA(.2),"^",10) D DT^SROAPCA1 W !,"Time Patient In  OR: ",?47,X
"RTN","SROAPCA3",37,0)
 S Y=$P(SRA(.2),"^",12) D DT^SROAPCA1 W !,"Time Patient Out OR: ",?47,X
"RTN","SROAPCA3",38,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",22) I Y>1 D DT^SROAPCA1 S Y=X
"RTN","SROAPCA3",39,0)
 S Y=$S(Y="NS":"Unable to determine",Y="RI":"Remains intubated at 30 days",1:Y) W !,"Date and Time Patient Extubated: ",?47,Y
"RTN","SROAPCA3",40,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",23) I Y>1 D DT^SROAPCA1 S Y=X
"RTN","SROAPCA3",41,0)
 S Y=$S(Y="NS":"Unable to determine",Y="RI":"Remains in ICU at 30 days",1:Y) W !,"Date and Time Patient Discharged from ICU: ",?47,Y
"RTN","SROAPCA3",42,0)
 S Y=$P(SRA(209),"^") W !,"Patient is Homeless: ",?47,$S(Y="Y":"YES",Y="N":"NO",Y="NS":"NS",1:"")
"RTN","SROAPCA3",43,0)
 S Y=$P(SRA(206),"^",41) W !,"Cardiac Surg Performed at Non-VA Facility: ",?47,$S(Y="Y":"YES",Y="N":"NO",Y="NS":"UNKNOWN",1:"")
"RTN","SROAPCA3",44,0)
 W !,"Resource Data Comments: "
"RTN","SROAPCA3",45,0)
 I $G(^SRF(SRTN,206.2))'="" S SRQ=0 S X=$G(^SRF(SRTN,206.2)) W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROAPCA3",46,0)
 .I X'[" " W ?25,X Q
"RTN","SROAPCA3",47,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:80) D  Q:SRQ
"RTN","SROAPCA3",48,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROAPCA3",49,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),!,?5 S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROAPCA3",50,0)
 I $Y+7>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",51,0)
 W ! F MOE=1:1:80 W "="
"RTN","SROAPCA3",52,0)
 W !,"IX. SOCIOECONOMIC, ETHNICITY, AND RACE"
"RTN","SROAPCA3",53,0)
 N SREMP S SREMP=$P(SRA(208),"^",18) S SREMP=$S(SREMP=1:"EMPLOYED FULL TIME",SREMP=2:"EMPLOYED PART TIME",SREMP=3:"NOT EMPLOYED",SREMP=4:"SELF EMPLOYED",SREMP=5:"RETIRED",SREMP=6:"ACTIVE MILITARY DUTY",SREMP=9:"UNKNOWN",1:" ")
"RTN","SROAPCA3",54,0)
 W !,?1,"Employment Status Preoperatively: ",?40,SREMP
"RTN","SROAPCA3",55,0)
 K SRA,SRAO
"RTN","SROAPCA3",56,0)
 ; Race/Ethnic
"RTN","SROAPCA3",57,0)
 D ENTH^SRORACE
"RTN","SROAPCA3",58,0)
 I $Y+7>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",59,0)
 D ^SROAPCA4
"RTN","SROAPCA3",60,0)
 W !!," *** End of report for "_SRANM_" assessment #"_SRTN_" ***"
"RTN","SROAPCA3",61,0)
 I $E(IOST)'="P" W ! K DIR S DIR(0)="E" D ^DIR K DIR
"RTN","SROAPCA3",62,0)
 Q
"RTN","SROAPIMS")
0^39^B26229539^B25648052
"RTN","SROAPIMS",1,0)
SROAPIMS ;BIR/ADM - PIMS Information Retrieval ;01/24/07
"RTN","SROAPIMS",2,0)
 ;;3.0; Surgery ;**38,46,47,57,71,81,86,100,125,134,160**;24 Jun 93;Build 7
"RTN","SROAPIMS",3,0)
 ; 
"RTN","SROAPIMS",4,0)
 ; Reference to ^MCAR(690,"AC" supported by DBIA #1999
"RTN","SROAPIMS",5,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROAPIMS",6,0)
 ;
"RTN","SROAPIMS",7,0)
 ; SRTN must be defined before calling this routine.
"RTN","SROAPIMS",8,0)
 ; This routine will return the following array
"RTN","SROAPIMS",9,0)
 ; SRVADPT(1)  = Name of the patient (e.g., SMITH,JOHN R.)
"RTN","SROAPIMS",10,0)
 ; SRVADPT(2)  = Patient ID (e.g., ***********)
"RTN","SROAPIMS",11,0)
 ; SRVADPT(3)  = Age of patient on date of operation (e.g., 36)
"RTN","SROAPIMS",12,0)
 ; SRVADPT(4)  = Sex of patient (e.g., M^MALE)
"RTN","SROAPIMS",13,0)
 ; SRVADPT(5)  = Race of patient (e.g., 6^WHITE, NOT OF HISPANIC ORIGIN)
"RTN","SROAPIMS",14,0)
 ; SRVADPT(6)  = Date of death
"RTN","SROAPIMS",15,0)
 ; SRVADPT(7)  = Hospital admission date
"RTN","SROAPIMS",16,0)
 ; SRVADPT(8)  = Hospital discharge date
"RTN","SROAPIMS",17,0)
 ; SRVADPT(9)  = Admission/transfer to surgical specialty
"RTN","SROAPIMS",18,0)
 ; SRVADPT(10) = Discharge/tranfer to chronic care
"RTN","SROAPIMS",19,0)
 ; SRVADPT(11) = Length of Post-Operative Hospital Stay (number of days)
"RTN","SROAPIMS",20,0)
 ; SRVADPT(12) = Admission to Observation
"RTN","SROAPIMS",21,0)
 ; SRVADPT(13) = Discharge from Observation
"RTN","SROAPIMS",22,0)
 ; SRVADPT(14) = Observation Specialty (PTF #)
"RTN","SROAPIMS",23,0)
 ; SRVADPT(15) = Bad Address Indicator
"RTN","SROAPIMS",24,0)
 ;
"RTN","SROAPIMS",25,0)
 N SR,SRCC,SRDT,SRNON,SRSRV S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^") F I=1:1:15 S SRVADPT(I)=""
"RTN","SROAPIMS",26,0)
 D DEM^VADPT S SRVADPT(1)=VADM(1),SRVADPT(2)=VA("PID"),SRVADPT(4)=VADM(5),SRVADPT(6)=VADM(6) S Y=$E($P(SR(0),"^",9),1,7),Z=$P(VADM(3),"^") S SRVADPT(3)=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROAPIMS",27,0)
 S SRX=$P(VADM(8),"^") I SRX K DA,DIC,DIQ,DR,SRY S DIC=10,DR=2,DA=SRX,DIQ="SRY",DIQ(0)="I" D EN^DIQ1 S SRVADPT(5)=SRY(10,SRX,2,"I")_"^"_$P(VADM(8),"^",2)
"RTN","SROAPIMS",28,0)
 S SRVADPT(15)=$$BADADR^DGUTL3(DFN),$P(^SRF(SRTN,209),"^")=$S(SRVADPT(15):"Y",1:"N")
"RTN","SROAPIMS",29,0)
ADM ; find date(s) of admission and discharge
"RTN","SROAPIMS",30,0)
 N SRSOUT S SRSOUT=0,(VAIP("D"),SRSDATE)=$P(SR(0),"^",9) D IN5^VADPT
"RTN","SROAPIMS",31,0)
 ; if not admitted before surgery, look for admission within 24 hours of leaving OR
"RTN","SROAPIMS",32,0)
 I 'VAIP(13) S X1=$P($G(^SRF(SRTN,.2)),"^",12),X2=1 D C^%DTC S SR24=X,SRDT=$O(^DGPM("APTT1",DFN,SRSDATE)) G:'SRDT!(SRDT>SR24) END S VAIP("D")=SRDT D IN5^VADPT I 'VAIP(13) G END
"RTN","SROAPIMS",33,0)
 I VAIP(13) D ADM1 G:SRSOUT END
"RTN","SROAPIMS",34,0)
ADSS ; find date of admission/transfer to surgical service
"RTN","SROAPIMS",35,0)
 S SRSERV="" I VAIP(1) S SRX=$P(VAIP(8),"^") D SERV G:'SRSRV DISSS S:$P(VAIP(2),"^")=1 SRVADPT(9)=$E($P(VAIP(3),"^"),1,12) I $P(VAIP(2),"^")'=1 S SRSERV=$P(VAIP(3),"^")
"RTN","SROAPIMS",36,0)
 I VAIP(15) D PRIOR
"RTN","SROAPIMS",37,0)
DISSS ; find date of discharge/transfer to chronic care
"RTN","SROAPIMS",38,0)
 S SRNON=0,SRCC="",VAIP("D")=SRSAVE D IN5^VADPT
"RTN","SROAPIMS",39,0)
FOLLOW I VAIP(16) D  I 'SRNON S SRCC=VAIP(16,1),VAIP("D")=$P(SRCC,"^") D IN5^VADPT G FOLLOW
"RTN","SROAPIMS",40,0)
 .I $P(VAIP(16,2),"^")=3 S SRNON=1 Q
"RTN","SROAPIMS",41,0)
 .I "26"[$P(VAIP(16,2),"^") S SRX=$P(VAIP(16,6),"^") D NACUTE
"RTN","SROAPIMS",42,0)
 S SRVADPT(10)=SRVADPT(8) I SRNON S SRVADPT(10)=$E($P(VAIP(16,1),"^"),1,12)
"RTN","SROAPIMS",43,0)
STAY ; find length of post-operative hospital stay
"RTN","SROAPIMS",44,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",3),X1=$P(SRVADPT(10),"^") I 'X!('X1)!(X>X1) G END
"RTN","SROAPIMS",45,0)
 S Y=$E(X1_"000",9,10)-$E(X_"000",9,10)*60+$E(X1_"00000",11,12)-$E(X_"00000",11,12),X2=X,X=$P(X,".",1)'=$P(X1,".",1) D ^%DTC:X S X=X*1440+Y,SRVADPT(11)=X\1440
"RTN","SROAPIMS",46,0)
END S $P(^SRF(SRTN,208),"^",10)=$P(SRVADPT(5),"^"),SRINOUT=$P(^SRF(SRTN,0),"^",12) I SRVADPT(7)'="",SRVADPT(9)="" S SRVADPT(9)=$P($G(^SRF(SRTN,.2)),"^",10)
"RTN","SROAPIMS",47,0)
 F I=7:1:10,12,13 S X=$P(SRVADPT(I),"^") I $L(X)>7 S $P(SRVADPT(I),"^")=+X
"RTN","SROAPIMS",48,0)
 I SRVADPT(7)'="" S $P(^SRF(SRTN,205),"^")=SRVADPT(11),L=6 F J=14:1:17 S L=L+1,$P(^SRF(SRTN,208),"^",J)=$P(SRVADPT(L),"^")
"RTN","SROAPIMS",49,0)
 I SRVADPT(7)="" S $P(^SRF(SRTN,205),"^")=$S(SRINOUT="O":"NA",1:SRVADPT(11)) S L=6 F J=14:1:17 S L=L+1 S $P(^SRF(SRTN,208),"^",J)=$S(SRINOUT="O":"NA",1:$P(SRVADPT(L),"^"))
"RTN","SROAPIMS",50,0)
 I SRVADPT(12)="" F J=1:1:3 S $P(^SRF(SRTN,208.1),"^",J)="NA"
"RTN","SROAPIMS",51,0)
 S $P(^SRF(SRTN,205),"^",3)=$S($P(SRVADPT(6),"^")'="":$E($P(SRVADPT(6),"^"),1,12),1:"NA")
"RTN","SROAPIMS",52,0)
 D MCAR,EMPLOY
"RTN","SROAPIMS",53,0)
 D KVA^VADPT K DIE,DR,I,SR,SR24,SR48,SRCC,SRD,SRDD,SRDO,SRDT,SRF,SRINOUT,SRNON,SRSP,SRSRV,SRQ,SRX,SRY,X,X1,Y
"RTN","SROAPIMS",54,0)
 Q
"RTN","SROAPIMS",55,0)
PRIOR ; loop through previous movements
"RTN","SROAPIMS",56,0)
 S SRX=$P(VAIP(15,6),"^") D SERV D  I SRSRV,VAIP(15) G PRIOR
"RTN","SROAPIMS",57,0)
 .I SRSRV S SRSERV=VAIP(15,1),VAIP("D")=$P(SRSERV,"^") D IN5^VADPT Q
"RTN","SROAPIMS",58,0)
 S SRVADPT(9)=$E($P(SRSERV,"^"),1,12)
"RTN","SROAPIMS",59,0)
 Q
"RTN","SROAPIMS",60,0)
SERV ; find service associated with movement
"RTN","SROAPIMS",61,0)
 S SRSRV="" D SPEC S Y="50,51,52,53,54,55,56,57,58,59,60,61,62,63" S:Y[SRSP SRSRV=1
"RTN","SROAPIMS",62,0)
 Q
"RTN","SROAPIMS",63,0)
SPEC ; find specialty associated with movement
"RTN","SROAPIMS",64,0)
 K DA,DIC,DIQ,DR,SRY S DIC=45.7,DR=1,DA=SRX,DIQ="SRY",DIQ(0)="I" D EN^DIQ1 S SRSP=SRY(45.7,SRX,1,"I") I SRSP,$L(SRSP)=1 S SRSP="0"_SRSP
"RTN","SROAPIMS",65,0)
 Q
"RTN","SROAPIMS",66,0)
NACUTE ; determine if non-acute care transfer
"RTN","SROAPIMS",67,0)
 D SPEC S Y="05,20,21,22,25,26,27,28,29,32,33,34,35,40,70,71,72,73,74,75,76,77,79,80,81,83,84,85,86,87,88,89,90,91,92,93,98,99" S:Y[SRSP SRNON=1
"RTN","SROAPIMS",68,0)
 Q
"RTN","SROAPIMS",69,0)
MCAR S (SRD,SRF,SRQ)=0,DFN=$P(^SRF(SRTN,0),"^"),SRDO=$P(^SRF(SRTN,0),"^",9)
"RTN","SROAPIMS",70,0)
 F  S SRD=$O(^MCAR(690,"AC",DFN,SRD)) Q:SRD=""!(SRQ=9)  S SRF=0 F  S SRF=$O(^MCAR(690,"AC",DFN,SRD,SRF)) Q:SRF=""!(SRQ=9)  I SRF="MCAR(691.1" D
"RTN","SROAPIMS",71,0)
 .S SRDD=9999999.9999-SRD
"RTN","SROAPIMS",72,0)
 .I SRDD<SRDO S $P(^SRF(SRTN,207),"^",21)=SRDD,SRQ=9
"RTN","SROAPIMS",73,0)
 Q
"RTN","SROAPIMS",74,0)
EMPLOY ; employment status preoperatively
"RTN","SROAPIMS",75,0)
 S DFN=$P(^SRF(SRTN,0),"^") D OPD^VADPT S $P(^SRF(SRTN,208),"^",18)=$P(VAPD(7),"^")
"RTN","SROAPIMS",76,0)
 Q
"RTN","SROAPIMS",77,0)
ADM1 ; get information related to admission
"RTN","SROAPIMS",78,0)
 ; determine if admission was for observation
"RTN","SROAPIMS",79,0)
 ; quit if no specialty defined for admission
"RTN","SROAPIMS",80,0)
 S SRX=$P($G(VAIP(13,6)),"^") I SRX="" S SRSOUT=1 Q
"RTN","SROAPIMS",81,0)
 D SPEC S Y="18,23,24,36,41,65,94" I Y[SRSP D  Q:SRSOUT
"RTN","SROAPIMS",82,0)
 .S SRVADPT(14)=SRSP,SRVADPT(12)=$E($P(VAIP(13,1),"^"),1,12),SRVADPT(13)=$E($P(VAIP(17,1),"^"),1,12)
"RTN","SROAPIMS",83,0)
 .S I=1 F J=12:1:14 S $P(^SRF(SRTN,208.1),"^",I)=SRVADPT(J),I=I+1
"RTN","SROAPIMS",84,0)
 .; look for admission following discharge from observation
"RTN","SROAPIMS",85,0)
 .S X1=$P($G(^SRF(SRTN,.2)),"^",12),X2=2 D C^%DTC S SR48=X,SRDT=$O(^DGPM("APTT1",DFN,$P(VAIP(13,1),"^"))) I 'SRDT!(SRDT>SR48) S SRSOUT=1 Q
"RTN","SROAPIMS",86,0)
 .S VAIP("D")=SRDT D IN5^VADPT I 'VAIP(13) S SRSOUT=1
"RTN","SROAPIMS",87,0)
 S SRVADPT(7)=$E($P(VAIP(13,1),"^"),1,12),SRVADPT(8)=$E($P(VAIP(17,1),"^"),1,12),SRSAVE=$S(SRVADPT(7)<SRSDATE:SRSDATE,1:$P(VAIP(13,1),"^"))
"RTN","SROAPM")
0^40^B42791462^B40311934
"RTN","SROAPM",1,0)
SROAPM ;BIR/ADM - PATIENT DEMOGRAPHIC INFO ;01/23/07
"RTN","SROAPM",2,0)
 ;;3.0; Surgery ;**47,81,111,107,100,125,142,160**;24 Jun 93;Build 7
"RTN","SROAPM",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAPM",4,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAPM",5,0)
START G:SRSOUT END D HDR^SROAUTL
"RTN","SROAPM",6,0)
 S DIR("A",1)="Enter/Edit Patient Demographic Information",DIR("A",2)=" ",DIR("A",3)="1. Capture Information from PIMS Records",DIR("A",4)="2. Enter, Edit, or Review Information",DIR("A",5)=" "
"RTN","SROAPM",7,0)
 S DIR("?",1)="Enter '1' if you want to capture patient movement information from PIMS",DIR("?",2)="records.  Enter '2' if you want to enter, edit, or review patient",DIR("?")="movement and other information on this screen."
"RTN","SROAPM",8,0)
 S DIR("A")="Select Number",DIR(0)="NO^1:2" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROAPM",9,0)
 I Y=1 D PIMS G START
"RTN","SROAPM",10,0)
EDIT S SRR=0 D HDR^SROAUTL K DR S SRQ=0,(DR,SRDR)="413;452;453;454;418;419;420;421;247;.011"
"RTN","SROAPM",11,0)
 K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAPM",12,0)
 K SRZ S SRZ=0 F M=1:1 S I=$P(SRDR,";",M)  Q:'I  D
"RTN","SROAPM",13,0)
 .D TR,GET
"RTN","SROAPM",14,0)
 .S SRZ=SRZ+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRZ(SRZ))=$P(Y,"^",2)_"^"_SRFLD,SREXT=SRY(130,SRTN,SRFLD,"E")
"RTN","SROAPM",15,0)
 .W !,$S($L(SRZ)<2:" "_SRZ,1:SRZ)_". "_$P(Z,"^")_":" D EXT
"RTN","SROAPM",16,0)
 ;
"RTN","SROAPM",17,0)
 D DEM^VADPT
"RTN","SROAPM",18,0)
 ;Find patient's ethnicity and list it on the display
"RTN","SROAPM",19,0)
 W !,"11. Patient's Ethnicity:" S SRZ(11)="" D
"RTN","SROAPM",20,0)
 .I $G(VADM(11)) W ?40,$P(VADM(11,1),U,2)
"RTN","SROAPM",21,0)
 .I '$G(VADM(11)) W ?40,"UNANSWERED"
"RTN","SROAPM",22,0)
 ;
"RTN","SROAPM",23,0)
 ;Find all race entries and place into a string with commas inbetween
"RTN","SROAPM",24,0)
 S SRORC=0,C=1,SRORACE="",SROLINE="",N=1,SROL=""
"RTN","SROAPM",25,0)
 F  S SRORC=$O(VADM(12,SRORC)) Q:SRORC=""  Q:C=11  D
"RTN","SROAPM",26,0)
 .I $G(VADM(12,SRORC)) S SRORACE(C)=$P(VADM(12,SRORC),U,2)
"RTN","SROAPM",27,0)
 .I SROLINE'="" S SROLINE=SROLINE_", "_SRORACE(C)
"RTN","SROAPM",28,0)
 .I SROLINE="" S SROLINE=SRORACE(C)
"RTN","SROAPM",29,0)
 .S C=C+1
"RTN","SROAPM",30,0)
 ;
"RTN","SROAPM",31,0)
 ;Find total length of 'race' string and wrap the text if necessary
"RTN","SROAPM",32,0)
 I $L(SROLINE)=40!$L(SROLINE)<40 S SROL(N)=SROLINE,SRNUM1=2
"RTN","SROAPM",33,0)
 I $L(SROLINE)>40 D WRAP
"RTN","SROAPM",34,0)
 ;
"RTN","SROAPM",35,0)
 W !,"12. Patient's Race:" S SRZ(12)=""
"RTN","SROAPM",36,0)
 I $G(VADM(12)) F D=1:1:SRNUM1-1 D
"RTN","SROAPM",37,0)
 .W:D=1 ?40,SROL(D)
"RTN","SROAPM",38,0)
 .W:D'=1 !,?40,SROL(D)
"RTN","SROAPM",39,0)
 ;
"RTN","SROAPM",40,0)
 I '$G(VADM(12)) W ?40,"UNANSWERED"
"RTN","SROAPM",41,0)
 ;
"RTN","SROAPM",42,0)
 K DA,DIC,DIQ,DR,SRY S (DR,SRDR)="342",DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAPM",43,0)
 S SRZ=13,SRZ(13)="Date of Death^342",SREXT=SRY(130,SRTN,342,"E")
"RTN","SROAPM",44,0)
 W !,"13. Date/Time of Death:",?40,SREXT
"RTN","SROAPM",45,0)
 K SROL,SROLINE,SRORC,SRORACE,SROLN,SROLN1,SROWRAP,SRNUM1
"RTN","SROAPM",46,0)
 ;
"RTN","SROAPM",47,0)
 W !! F K=1:1:80 W "-"
"RTN","SROAPM",48,0)
 D SEL G:SRR=1 EDIT
"RTN","SROAPM",49,0)
 S SROERR=SRTN D ^SROERR0
"RTN","SROAPM",50,0)
 G START
"RTN","SROAPM",51,0)
 Q
"RTN","SROAPM",52,0)
 ;
"RTN","SROAPM",53,0)
WRAP ;Wrap multiple race entries so that wrapped line
"RTN","SROAPM",54,0)
 ;does not break in the middle of a word
"RTN","SROAPM",55,0)
 ;
"RTN","SROAPM",56,0)
 N SROLNGTH S SROLNGTH=$L(SROLINE),E=40,SROWRAP="",SROLN="",SROLN1="",SROL=""
"RTN","SROAPM",57,0)
 F I=1:40:SROLNGTH S SROLN(I)=SROWRAP_$E(SROLINE,I,E) D
"RTN","SROAPM",58,0)
 .F K=40:-1:1 I $E(SROLN(I),K)[" " D  Q    ;Break lines at space
"RTN","SROAPM",59,0)
 ..S SROLN1(I)=$E(SROLN(I),1,K-1)
"RTN","SROAPM",60,0)
 ..S SROWRAP=$E(SROLN(I),K+1,E)
"RTN","SROAPM",61,0)
 .S E=E+40
"RTN","SROAPM",62,0)
 ;
"RTN","SROAPM",63,0)
 S:'$D(SROLN1(I)) SROLN1(I)=SROLN(I),SROWRAP=""
"RTN","SROAPM",64,0)
 I $L(SROLN1(I))+$L(SROWRAP)>39 S SROLN1(I+1)=SROWRAP   ;Last line 
"RTN","SROAPM",65,0)
 I $L(SROLN1(I))+$L(SROWRAP)'>39 S SROLN1(I)=SROLN1(I)_" "_SROWRAP
"RTN","SROAPM",66,0)
 ;
"RTN","SROAPM",67,0)
 ;Renumber the SROLN1 array to be in numeric order
"RTN","SROAPM",68,0)
 S SRNUM=0,SRNUM1=1
"RTN","SROAPM",69,0)
 F  S SRNUM=$O(SROLN1(SRNUM)) Q:SRNUM=""  D
"RTN","SROAPM",70,0)
 .S SROL(SRNUM1)=SROLN1(SRNUM)
"RTN","SROAPM",71,0)
 .S SRNUM1=SRNUM1+1
"RTN","SROAPM",72,0)
 Q
"RTN","SROAPM",73,0)
 ;
"RTN","SROAPM",74,0)
EXT I $L(SREXT)<40 W ?40,SREXT W:SRFLD=247 $S(SREXT="":"",SREXT=1:" Day",SREXT=0:" Days",SREXT>1:" Days",1:"") Q
"RTN","SROAPM",75,0)
 N I,J,X,Y S X=SREXT F  D  W:$L(X) ! I $L(X)<40!(X'[" ") W ?40,X Q
"RTN","SROAPM",76,0)
 .F I=0:1:38 S J=39-I,Y=$E(X,J) I Y=" " W ?40,$E(X,1,J-1) S X=$E(X,J+1,$L(X)) Q
"RTN","SROAPM",77,0)
 Q
"RTN","SROAPM",78,0)
SEL W !!,"Select number of item to edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPM",79,0)
 I (X=11)!(X=12) S SRR=1 W !!,"The Patient's Race and Ethnicity information cannot be updated through the" D  Q
"RTN","SROAPM",80,0)
 .W !,"Surgery package options."
"RTN","SROAPM",81,0)
 .W !!,"Press RETURN to continue " R X:DTIME
"RTN","SROAPM",82,0)
 Q:X=""  S:X="a" X="A" I '$D(SRFLG),'$D(SRZ(X)),(X'?1.2N1":"1.2N),X'="A" D HELP S SRR=1 Q
"RTN","SROAPM",83,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRZ)!(Y>Z) D HELP S SRR=1 Q
"RTN","SROAPM",84,0)
 I X="A" S X="1:"_SRZ
"RTN","SROAPM",85,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 Q
"RTN","SROAPM",86,0)
 I $D(SRZ(X)),+X=X S EMILY=X D  S SRR=1
"RTN","SROAPM",87,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAPM",88,0)
 Q
"RTN","SROAPM",89,0)
PIMS ; get update from PIMS records
"RTN","SROAPM",90,0)
 W ! K DIR S DIR("A")="Are you sure you want to retrieve information from PIMS records ? ",DIR("B")="YES",DIR(0)="YOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROAPM",91,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPM",92,0)
 .W ! D WAIT^DICD D ^SROAPIMS
"RTN","SROAPM",93,0)
 Q
"RTN","SROAPM",94,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below.",!!,"NOTE: Items 11 and 12 cannot be updated through the surgery package options."
"RTN","SROAPM",95,0)
 W !!,"1. Enter 'A' to update items 1 through 10 and item 13.",!!,"2. Enter a number (1-"_SRZ_") to update an individual item.  (For example,",!,"   enter '1' to update "_$P(SRZ(1),"^")_")"
"RTN","SROAPM",96,0)
 W !!,"3. Enter a range of numbers (1-"_SRZ_") separated by a ':' to enter a range",!,"   of items.  (For example, enter '1:4' to update items 1, 2, 3 and 4.)",!
"RTN","SROAPM",97,0)
 I $D(SRFLG) W !,"4. Enter 'N' or 'NO' to enter negative response for all items.",!!,"5. Enter '@' to delete information from all items.",!
"RTN","SROAPM",98,0)
PRESS W ! K DIR S DIR("A")="Press the return key to continue or '^' to exit: ",DIR(0)="FOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAPM",99,0)
 Q
"RTN","SROAPM",100,0)
RANGE ; range of numbers
"RTN","SROAPM",101,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPM",102,0)
 .S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:10,13 Q:SRSOUT  D ONE
"RTN","SROAPM",103,0)
 Q
"RTN","SROAPM",104,0)
ONE ; edit one item
"RTN","SROAPM",105,0)
 K DR,DA,DIE S DR=$P(SRZ(EMILY),"^",2)_"T",DA=SRTN,DIE=130,SRDT=$P(SRZ(EMILY),"^",3) S:SRDT DR=DR_";"_SRDT_"T" D ^DIE K DR,DA I $D(Y) S SRSOUT=1
"RTN","SROAPM",106,0)
 Q
"RTN","SROAPM",107,0)
TR S J=I,J=$TR(J,"1234567890.","ABCDEFGHIJP")
"RTN","SROAPM",108,0)
 Q
"RTN","SROAPM",109,0)
GET S X=$T(@J)
"RTN","SROAPM",110,0)
 Q
"RTN","SROAPM",111,0)
END W @IOF D ^SRSKILL
"RTN","SROAPM",112,0)
 Q
"RTN","SROAPM",113,0)
PJAA ;;.011^In/Out-Patient Status
"RTN","SROAPM",114,0)
BDG ;;247^Length of Postop Hospital Stay
"RTN","SROAPM",115,0)
CDB ;;342^Date of Death
"RTN","SROAPM",116,0)
DAC ;;413^Transfer Status
"RTN","SROAPM",117,0)
DAG ;;417^Patient's Race
"RTN","SROAPM",118,0)
DAH ;;418^Hospital Admission Date/Time
"RTN","SROAPM",119,0)
DAI ;;419^Hospital Discharge Date/Time
"RTN","SROAPM",120,0)
DBJ ;;420^Admit/Transfer to Surgical Svc.
"RTN","SROAPM",121,0)
DBA ;;421^Discharge/Transfer to Chronic Care
"RTN","SROAPM",122,0)
DEB ;;452^Observation Admission Date/Time
"RTN","SROAPM",123,0)
DEC ;;453^Observation Discharge Date/Time
"RTN","SROAPM",124,0)
DED ;;454^Observation Treating Specialty
"RTN","SROAPRT2")
0^70^B11956199^B11958785
"RTN","SROAPRT2",1,0)
SROAPRT2 ;BIR/MAM - PRINT PREOP INFO (PAGE 2) ;04/24/07
"RTN","SROAPRT2",2,0)
 ;;3.0; Surgery ;**38,125,137,153,160**;24 Jun 93;Build 7
"RTN","SROAPRT2",3,0)
 I $E(IOST)'="P" W !,?28,"PREOPERATIVE INFORMATION"
"RTN","SROAPRT2",4,0)
 N SRX,Y S SRA(200)=$G(^SRF(SRTN,200)),SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROAPRT2",5,0)
 S Y=$P(SRA(200),"^",37),SRX=243,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",6,0)
 S Y=$P(SRA(200),"^",38),SRX=328,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",7,0)
 S Y=$P(SRA(200),"^",39),SRX=211,SRAO("1B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",8,0)
 S Y=$P(SRA(200),"^",18),SRX=210,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",9,0)
 S Y=$P(SRA(200),"^",44),SRX=245,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",10,0)
 S Y=$P(SRA(200),"^",19),SRX=332,SRAO("2A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",11,0)
 S Y=$P(SRA(200),"^",21),SRX=333,SRAO("2B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",12,0)
 S Y=$P(SRA(200),"^",22),SRX=398,SRAO("2I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",13,0)
 S Y=$P(SRA(200),"^",23),SRX=399,SRAO("2H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",14,0)
 S Y=$P(SRA(200),"^",24),SRX=400,SRAO("2C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",15,0)
 S Y=$P(SRA(200),"^",25),SRX=334,SRAO("2D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",16,0)
 S Y=$P(SRA(200),"^",26),SRX=335,SRAO("2E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",17,0)
 S Y=$P(SRA(200),"^",27),SRX=336,SRAO("2F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",18,0)
 S Y=$P(SRA(200),"^",29),SRX=401,SRAO("2G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",19,0)
 S Y=$P(SRA(200),"^",45),SRX=338,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",20,0)
 S Y=$P(SRA(200),"^",46),SRX=218,SRAO("3B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",21,0)
 S Y=$P(SRA(200),"^",47),SRX=339,SRAO("3C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",22,0)
 S Y=$P(SRA(200),"^",48),SRX=215,SRAO("3D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",23,0)
 S Y=$P(SRA(200),"^",49),SRX=216,SRAO("3E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",24,0)
 S Y=$P(SRA(200),"^",50),SRX=217,SRAO("3F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",25,0)
 S Y=$P(SRA(206),"^",3),SRX=338.1,SRAO("3G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",26,0)
 S Y=$P(SRA(206),"^",4),SRX=338.2,SRAO("3H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",27,0)
 S Y=$P(SRA(206),"^",8),SRX=218.1,SRAO("3I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",28,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",3),SRX=269,SRAO("3J")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT2",29,0)
 W !!,"RENAL:",?31,$P(SRAO(1),"^"),?40,"NUTRITIONAL/IMMUNE/OTHER:",?72,$P(SRAO(3),"^")
"RTN","SROAPRT2",30,0)
 W !,"Acute Renal Failure:",?31,$P(SRAO("1A"),"^"),?40,"Disseminated Cancer:",?72,$P(SRAO("3A"),"^")
"RTN","SROAPRT2",31,0)
 W !,"Currently on Dialysis:",?31,$P(SRAO("1B"),"^"),?40,"Open Wound:",?72,$P(SRAO("3B"),"^")
"RTN","SROAPRT2",32,0)
 W !,?40,"Steroid Use for Chronic Cond.:",?72,$P(SRAO("3C"),"^")
"RTN","SROAPRT2",33,0)
 W !,"CENTRAL NERVOUS SYSTEM:",?31,$P(SRAO(2),"^"),?40,"Weight Loss > 10%:",?72,$P(SRAO("3D"),"^")
"RTN","SROAPRT2",34,0)
 W !,"Impaired Sensorium: ",?31,$P(SRAO("2A"),"^"),?40,"Bleeding Disorders:",?72,$P(SRAO("3E"),"^")
"RTN","SROAPRT2",35,0)
 W !,"Coma:",?31,$P(SRAO("2B"),"^"),?40,"Transfusion > 4 RBC Units:",?72,$P(SRAO("3F"),"^")
"RTN","SROAPRT2",36,0)
 W !,"Hemiplegia:",?31,$P(SRAO("2C"),"^"),?40,"Chemotherapy W/I 30 Days:",?72,$P(SRAO("3G"),"^")
"RTN","SROAPRT2",37,0)
 W !,"History of TIAs:",?31,$P(SRAO("2D"),"^"),?40,"Radiotherapy W/I 90 Days:",?72,$P(SRAO("3H"),"^")
"RTN","SROAPRT2",38,0)
 W !,"CVA/Stroke w. Neuro Deficit:",?31,$P(SRAO("2E"),"^"),?40,"Preoperative Sepsis:",?(74-$L($P(SRAO("3I"),"^"))),$P(SRAO("3I"),"^")
"RTN","SROAPRT2",39,0)
 W !,"CVA/Stroke w/o Neuro Deficit:",?31,$P(SRAO("2F"),"^"),?40,"Pregnancy:",?(74-$L($P(SRAO("3J"),"^"))),$P(SRAO("3J"),"^")
"RTN","SROAPRT2",40,0)
 W !,"Tumor Involving CNS:",?31,$P(SRAO("2G"),"^")
"RTN","SROAPRT2",41,0)
 W !,"Paraplegia:",?31,$P(SRAO("2H"),"^")
"RTN","SROAPRT2",42,0)
 W !,"Quadriplegia:",?31,$P(SRAO("2I"),"^")
"RTN","SROAPRT2",43,0)
 I $E(IOST)="P" W !
"RTN","SROAPRT2",44,0)
 Q
"RTN","SROAPRT2",45,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPRT2",46,0)
 N C,Y
"RTN","SROAPRT2",47,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPRT2",48,0)
 I Y="NO STUDY" S Y="NS"
"RTN","SROAPRT2",49,0)
 Q Y
"RTN","SROAPRT3")
0^41^B11865696^B15633950
"RTN","SROAPRT3",1,0)
SROAPRT3 ;BIR/MAM - PRINT OPERATION INFO ;01/23/07
"RTN","SROAPRT3",2,0)
 ;;3.0; Surgery ;**38,47,63,81,88,95,125,142,153,160**;24 Jun 93;Build 7
"RTN","SROAPRT3",3,0)
 K SRAO S (SRAO(7),SRAO(8))="",SRA("OP")=^SRF(SRTN,"OP")
"RTN","SROAPRT3",4,0)
 S SRAO(2)="^1" K SROPS S SROPER=$P(SRA("OP"),"^")
"RTN","SROAPRT3",5,0)
 S:$L(SROPER)<49 SROPS(1)=SROPER K M,MM,MMM I $L(SROPER)>48 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAPRT3",6,0)
 S SRA(0)=^SRF(SRTN,0),X=$P(SRA(0),"^",4) S:X X=$P(^SRO(137.45,X,0),"^") S SRAO(2)=X_"^.04"
"RTN","SROAPRT3",7,0)
 W !,?29,"OPERATIVE INFORMATION",!!,$J("Surgical Specialty: ",39)_$P(SRAO(2),"^")
"RTN","SROAPRT3",8,0)
 W !!,$J("Principal Operation: ",39)_SROPS(1) I $D(SROPS(2)) W !,?40,SROPS(2) I $D(SROPS(3)) W !,?40,SROPS(3)
"RTN","SROAPRT3",9,0)
 D ^SROAOTH
"RTN","SROAPRT3",10,0)
 S X=$P(SRA(200),"^",52),SRAO(9)=X_"^214",NYUK=$P(SRA(0),"^",10),NYUK=$S(NYUK="EM":"YES",1:"NO") S SRAO(10)=NYUK_"^.035"
"RTN","SROAPRT3",11,0)
 S Y=$P($G(^SRF(SRTN,"1.0")),"^",8),C=$P(^DD(130,1.09,0),"^",2) D:Y'="" Y^DIQ S SRAO(11)=Y_"^1.09"
"RTN","SROAPRT3",12,0)
 S NYUK=$P(SRA(200),"^",53) D YN S SRAO(12)=SHEMP_"^201"
"RTN","SROAPRT3",13,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(13)=Y_"^1.13"
"RTN","SROAPRT3",14,0)
 D TECH^SROPRIN S SRAO(14)=SRTECH
"RTN","SROAPRT3",15,0)
 S X=$P(SRA(200),"^",54),SRAO(15)=X_"^340"
"RTN","SROAPRT3",16,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",4),C=$P(^DD(130,443,0),"^",2) D:Y'="" Y^DIQ S SRAO(5)=Y_"^443"
"RTN","SROAPRT3",17,0)
 S Y=$P($G(^SRF(SRTN,200.1)),"^",6),C=$P(^DD(130,446,0),"^",2) D:Y'="" Y^DIQ S SRAO(6)=Y_"^446"
"RTN","SROAPRT3",18,0)
 I $E(IOST)'="P" D PAGE^SROAPAS Q:SRSOUT  W !,?29,"OPERATIVE INFORMATION",!
"RTN","SROAPRT3",19,0)
 W !,$J("PGY of Primary Surgeon: ",39)_$P(SRAO(9),"^") W !,$J("Emergency Case (Y/N): ",39)_$P(SRAO(10),"^")
"RTN","SROAPRT3",20,0)
 W !,$J("Wound Classification: ",39)_$P(SRAO(11),"^")
"RTN","SROAPRT3",21,0)
 W !,$J("ASA Classification: ",39)_$P(SRAO(13),"^")
"RTN","SROAPRT3",22,0)
 W !,$J("Principal Anesthesia Technique: ",39)_$P(SRAO(14),"^")
"RTN","SROAPRT3",23,0)
 W !,$J("RBC Units Transfused: ",39)_$P(SRAO(15),"^")
"RTN","SROAPRT3",24,0)
 W !,$J("Intraop Disseminated Cancer: ",39)_$P(SRAO(5),"^")
"RTN","SROAPRT3",25,0)
 W !,$J("Intraoperative Ascites: ",39)_$P(SRAO(6),"^")
"RTN","SROAPRT3",26,0)
 I $E(IOST)="P" W !!
"RTN","SROAPRT3",27,0)
 Q
"RTN","SROAPRT3",28,0)
YN S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPRT3",29,0)
 Q
"RTN","SROAPRT3",30,0)
LOOP ; break procedures
"RTN","SROAPRT3",31,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<49  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAPRT3",32,0)
 Q
"RTN","SROAPRT3",33,0)
OPTIMES ; print operation times
"RTN","SROAPRT3",34,0)
 K SRAO F I=1:1:7 S SRAO(I)=""
"RTN","SROAPRT3",35,0)
 W !,?24,"OPERATION DATE/TIMES INFORMATION"
"RTN","SROAPRT3",36,0)
 S X=$G(^SRF(SRTN,.2)),SRAO(1)=$P(X,"^",10),SRAO(2)=$P(X,"^",2),SRAO(3)=$P(X,"^",3),SRAO(4)=$P(X,"^",12),SRAO(5)=$P(X,"^"),SRAO(6)=$P(X,"^",4),SRAO(7)=$P($G(^SRF(SRTN,1.1)),"^",8)
"RTN","SROAPRT3",37,0)
 F SRI=1:1:7 S Y=SRAO(SRI) I Y X ^DD("DD") S X=$P(Y,"@")_"  "_$P(Y,"@",2),SRAO(SRI)=X
"RTN","SROAPRT3",38,0)
 W !!,$J("Patient in Room (PIR): ",39)_SRAO(1),!,$J("Procedure/Surgery Start Time (PST): ",39)_SRAO(2),!,$J("Procedure/Surgery Finish (PF): ",39)_SRAO(3)
"RTN","SROAPRT3",39,0)
 W !,$J("Patient Out of Room (POR): ",39)_SRAO(4),!,$J("Anesthesia Start (AS): ",39)_SRAO(5),!,$J("Anesthesia Finish (AF): ",39)_SRAO(6),!,$J("Discharge from PACU (DPACU): ",39)_SRAO(7)
"RTN","SROAPRT3",40,0)
 I $E(IOST)="P" W !
"RTN","SROAPRT3",41,0)
 Q
"RTN","SROAPRT4")
0^13^B6368116^B5890683
"RTN","SROAPRT4",1,0)
SROAPRT4 ;BIR/MAM - PRINT ASSESSMENT (CONT.) ;06/28/06
"RTN","SROAPRT4",2,0)
 ;;3.0; Surgery ;**38,125,153,160**;24 Jun 93;Build 7
"RTN","SROAPRT4",3,0)
 ;K SRA S SRA(201)=$G(^SRF(SRTN,201)),SRA(202)=$G(^SRF(SRTN,202))
"RTN","SROAPRT4",4,0)
 K SRA F I=201,202,203,204,202.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPRT4",5,0)
 W !,?20,"PREOPERATIVE LABORATORY TEST RESULTS"
"RTN","SROAPRT4",6,0)
 W !!,$J("Anion Gap (in 48 hrs.): ",39) S X=$P(SRA(203),"^",15) W X S X=$P(SRA(204),"^",15) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",7,0)
 W !,$J("Serum Sodium: ",39) S X=$P(SRA(201),"^") W X S X=$P(SRA(202),"^") I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",8,0)
 W !,$J("Serum Creatinine: ",39) S X=$P(SRA(201),"^",4) W X S X=$P(SRA(202),"^",4) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",9,0)
 W !,$J("BUN: ",39) S X=$P(SRA(201),"^",5) W X I X S X=$P(SRA(202),"^",5) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",10,0)
 W !,$J("Serum Albumin: ",39) S X=$P(SRA(201),"^",8) W X I X S X=$P(SRA(202),"^",8) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",11,0)
 W !,$J("Total Bilirubin: ",39) S X=$P(SRA(201),"^",9) W X S X=$P(SRA(202),"^",9) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",12,0)
 W !,$J("SGOT: ",39) S X=$P(SRA(201),"^",11) W X I X S X=$P(SRA(202),"^",11) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",13,0)
 W !,$J("Alkaline Phosphatase: ",39) S X=$P(SRA(201),"^",12) W X I X S X=$P(SRA(202),"^",12) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",14,0)
 W !,$J("White Blood Count: ",39) S X=$P(SRA(201),"^",13) W X S X=$P(SRA(202),"^",13) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",15,0)
 W !,$J("Hematocrit: ",39) S X=$P(SRA(201),"^",14) W X I X S X=$P(SRA(202),"^",14) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",16,0)
 W !,$J("Platelet Count: ",39) S X=$P(SRA(201),"^",15) W X S X=$P(SRA(202),"^",15) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",17,0)
 W !,$J("PTT: ",39) S X=$P(SRA(201),"^",16) W X S X=$P(SRA(202),"^",16) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",18,0)
 W !,$J("PT: ",39) S X=$P(SRA(201),"^",17) W X I X S X=$P(SRA(202),"^",17) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",19,0)
 W !,$J("INR: ",39) S X=$P(SRA(201),"^",27) W X I X S X=$P(SRA(202),"^",27) I X D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",20,0)
 W !,$J("Hemoglobin A1c: ",39) S X=$P(SRA(201),"^",28) W X I X S X=$P(SRA(202.1),"^") D DATE W ?48,"("_Y_")"
"RTN","SROAPRT4",21,0)
 I $E(IOST)="P" W !!
"RTN","SROAPRT4",22,0)
 Q
"RTN","SROAPRT4",23,0)
DATE S Y=X X ^DD("DD")
"RTN","SROAPRT4",24,0)
 Q
"RTN","SROAPRT6")
0^57^B5989513^B6124927
"RTN","SROAPRT6",1,0)
SROAPRT6 ;BIR/MAM - PRINT OUTCOME INFO ;01/29/07
"RTN","SROAPRT6",2,0)
 ;;3.0; Surgery ;**38,47,88,127,156,160**;24 Jun 93;Build 7
"RTN","SROAPRT6",3,0)
 K SRA S X=$P($G(^SRO(136,SRTN,0)),"^",3) S:X X=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),X=$P(X,"^",2)_"   "_$P(X,"^",4) S SRAO(1)=X_"^.03"
"RTN","SROAPRT6",4,0)
 S SRA(205)=$G(^SRF(SRTN,205)),X=$P(SRA(205),"^") I X'="" S X=$S(X="NA":"NA",1:X_" DAYS")
"RTN","SROAPRT6",5,0)
 S SRAO(2)=X_"^247"
"RTN","SROAPRT6",6,0)
 S X=$P(SRA(205),"^",3),Y=$S(X'="":X,1:$P($G(^DPT(DFN,.35)),"^")),SRDEAD=Y I Y D D^DIQ S SRDEAD=Y
"RTN","SROAPRT6",7,0)
 S SRAO(3)=SRDEAD,NYUK="N",SRET=0 K SRCPT
"RTN","SROAPRT6",8,0)
 F  S SRET=$O(^SRF(SRTN,29,SRET)) Q:'SRET  S CASE=$P(^SRF(SRTN,29,SRET,0),"^"),SRC=$P($G(^SRO(136,CASE,0)),"^",2) I $P($G(^SRF(CASE,.2)),"^",10),SRC D
"RTN","SROAPRT6",9,0)
 .S Y=$P($$CPT^ICPTCOD(SRC),"^",2) D MOD
"RTN","SROAPRT6",10,0)
 .S NYUK="Y",SRCPT(SRC)=Y
"RTN","SROAPRT6",11,0)
 S $P(^SRF(SRTN,205),"^",4)=NYUK D YN S SRAO(4)=SHEMP_"^262" F I="6A","6B","6C","6D","6E","6F","7A","7B","7C","7D","7E","7F" S SRAO(I)=""
"RTN","SROAPRT6",12,0)
DISP ;
"RTN","SROAPRT6",13,0)
 W !,?27,"OUTCOME INFORMATION"
"RTN","SROAPRT6",14,0)
 W !!,$J("Postoperative Diagnosis Code (ICD9): ",39)_$P(SRAO(1),"^"),!,$J("Length of Postoperative Hospital Stay: ",39)_$P(SRAO(2),"^")
"RTN","SROAPRT6",15,0)
 W !,$J("Date of Death: ",39)_$P(SRAO(3),"^")
"RTN","SROAPRT6",16,0)
 I SRAO(3) S X1=$P(^SRF(SRTN,0),"^",9),X2=90 D C^%DTC D
"RTN","SROAPRT6",17,0)
 .I SRAO(3)'>X W !,$J("Death Unrelated/Related: ",39)_$S($P($G(^SRF(SRTN,.4)),"^",7)="R":"RELATED",$P($G(^SRF(SRTN,.4)),"^",7)="U":"UNRELATED",1:"")
"RTN","SROAPRT6",18,0)
 .I SRA(3)>X W !,$J("Death Unrelated/Related: ",39)_"N/A"
"RTN","SROAPRT6",19,0)
 W !,$J("Return to OR Within 30 Days: ",39)_$P(SRAO(4),"^")
"RTN","SROAPRT6",20,0)
 D RET W:$E(IOST)="P" ! I $Y+24>IOSL D PAGE^SROAPAS I SRSOUT Q
"RTN","SROAPRT6",21,0)
 D ^SROAPRT7
"RTN","SROAPRT6",22,0)
 Q
"RTN","SROAPRT6",23,0)
MOD ;; append CPT modifiers to CPT code
"RTN","SROAPRT6",24,0)
 N SRTN S SRTN=CASE D SSPRIN^SROCPT0
"RTN","SROAPRT6",25,0)
 Q
"RTN","SROAPRT6",26,0)
YN ;
"RTN","SROAPRT6",27,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPRT6",28,0)
 Q
"RTN","SROAPRT6",29,0)
RET ; print returns
"RTN","SROAPRT6",30,0)
 S X=0 F  S X=$O(SRCPT(X)) Q:'X  W !,?15,"CPT Code: "_SRCPT(X)
"RTN","SROAPRT6",31,0)
 Q
"RTN","SROAPRT7")
0^49^B29848560^B28886605
"RTN","SROAPRT7",1,0)
SROAPRT7 ;BIR/MAM - PRINT OCCURRENCES ;01/24/07
"RTN","SROAPRT7",2,0)
 ;;3.0; Surgery ;**38,47,57,60,125,160**;24 Jun 93;Build 7
"RTN","SROAPRT7",3,0)
 K SRA,SRAO D EN^SROCCAT S SRA(205)=$G(^SRF(SRTN,205))
"RTN","SROAPRT7",4,0)
 S NYUK=$P(SRA(205),"^",5) D YN S SRAO(1)=SHEMP_"^403",NYUK=$P(SRA(205),"^",6) D YN S SRAO("1A")=SHEMP_"^248",NYUK=$P(SRA(205),"^",7) D YN S SRAO("1B")=SHEMP_"^249"
"RTN","SROAPRT7",5,0)
 S NYUK=$P(SRA(205),"^",37) D YN S SRAO("6E")=SHEMP_"^488",NYUK=$P(SRA(205),"^",8) D YN S SRAO("1C")=SHEMP_"^404",NYUK=$P(SRA(205),"^",39) D YN S SRAO("6F")=SHEMP_"^447"
"RTN","SROAPRT7",6,0)
 S NYUK=$P(SRA(205),"^",9) D YN S SRAO(2)=SHEMP_"^318",NYUK=$P(SRA(205),"^",10) D YN S SRAO("2A")=SHEMP_"^251",NYUK=$P(SRA(205),"^",11) D YN S SRAO("2B")=SHEMP_"^412",NYUK=$P(SRA(205),"^",12) D YN S SRAO("2C")=SHEMP_"^252"
"RTN","SROAPRT7",7,0)
 S NYUK=$P(SRA(205),"^",13) D YN S SRAO("2D")=SHEMP_"^285"
"RTN","SROAPRT7",8,0)
 S NYUK=$P(SRA(205),"^",15) D YN S SRAO(3)=SHEMP_"^319",NYUK=$P(SRA(205),"^",16) D YN S SRAO("3A")=SHEMP_"^409",NYUK=$P(SRA(205),"^",17) D YN S SRAO("3B")=SHEMP_"^254",NYUK=$P(SRA(205),"^",18) D YN S SRAO("3C")=SHEMP_"^255"
"RTN","SROAPRT7",9,0)
 S NYUK=$P(SRA(205),"^",20) D YN S SRAO(4)=SHEMP_"^320",NYUK=$P(SRA(205),"^",21) D YN S SRAO("4A")=SHEMP_"^256",NYUK=$P(SRA(205),"^",22) D YN S SRAO("4B")=SHEMP_"^410",NYUK=$P(SRA(205),"^",23) D YN S SRAO("4C")=SHEMP_"^287"
"RTN","SROAPRT7",10,0)
 S NYUK=$P(SRA(205),"^",25) D YN S SRAO(5)=SHEMP_"^321",NYUK=$P(SRA(205),"^",26) D YN S SRAO("5A")=SHEMP_"^411",NYUK=$P(SRA(205),"^",27) D YN S SRAO("5B")=SHEMP_"^258",NYUK=$P(SRA(205),"^",28) D YN S SRAO("5C")=SHEMP_"^259"
"RTN","SROAPRT7",11,0)
 S NYUK=$P(SRA(205),"^",30) D YN S SRAO(6)=SHEMP_"^322",NYUK=$P(SRA(205),"^",32) D YN S SRAO("6A")=SHEMP_"^257"
"RTN","SROAPRT7",12,0)
 S NYUK=$P(SRA(205),"^",33) D YN S SRAO("6B")=SHEMP_"^261",NYUK=$P(SRA(205),"^",34) D YN S SRAO("6C")=SHEMP_"^263",NYUK=$P(SRA(205),"^",35) D YN S SRAO("6D")=SHEMP_"^250"
"RTN","SROAPRT7",13,0)
 K SROOC N SRSEP,SRSTAR
"RTN","SROAPRT7",14,0)
 D OCC^SROAUTL0
"RTN","SROAPRT7",15,0)
 S X=$G(SROOC(21)) I X'="" S X=$P($G(SROOC(21)),U)_" "_$E($P($G(SROOC(21)),U,2),1,17)
"RTN","SROAPRT7",16,0)
 S SRAO("6G")=X_"^392"
"RTN","SROAPRT7",17,0)
 S X=$G(SROOC(29)) I X'="" S X=$P($G(SROOC(29)),U)_" "_$E($P($G(SROOC(29)),U,2),1,17)
"RTN","SROAPRT7",18,0)
 S SRAO("2E")=X_"^253"
"RTN","SROAPRT7",19,0)
 S X=$G(SROOC(30)) I X'="" S X=$P($G(SROOC(30)),U)_" "_$E($P($G(SROOC(30)),U,2),1,17)
"RTN","SROAPRT7",20,0)
 S SRAO("4D")=X_"^343"
"RTN","SROAPRT7",21,0)
 S X=$G(SROOC(31)) I X'="" S X=$P($G(SROOC(31)),U)_" "_$E($P($G(SROOC(31)),U,2),1,17)
"RTN","SROAPRT7",22,0)
 S SRAO("3D")=X_"^286"
"RTN","SROAPRT7",23,0)
 S X=$G(SROOC(32)) I X'="" S X=$P($G(SROOC(32)),U)_" "_$E($P($G(SROOC(32)),U,2),1,17)
"RTN","SROAPRT7",24,0)
 S SRAO("5D")=X_"^344"
"RTN","SROAPRT7",25,0)
 S X=$G(SROOC(36)) I X'="" S X=$P($G(SROOC(36)),U)_" "_$E($P($G(SROOC(36)),U,2),1,17)
"RTN","SROAPRT7",26,0)
 S SRAO("1D")=X_"^489"
"RTN","SROAPRT7",27,0)
 S Y=6 F  S Y=$O(SRAO(Y)) Q:Y=""  D
"RTN","SROAPRT7",28,0)
 .I $E(Y)="1" S SRI=$S(Y="1A":1,Y="1B":2,Y="1C":22,1:"") Q:SRI=""
"RTN","SROAPRT7",29,0)
 .I $E(Y)="2" S SRI=$S(Y="2A":4,Y="2B":7,Y="2C":5,Y="2D":6,1:"")  Q:SRI=""
"RTN","SROAPRT7",30,0)
 .I $E(Y)="3" S SRI=$S(Y="3A":8,Y="3B":9,Y="3C":10,1:"")  Q:SRI=""
"RTN","SROAPRT7",31,0)
 .I $E(Y)="4" S SRI=$S(Y="4A":12,Y="4B":13,Y="4C":14,1:"")  Q:SRI=""
"RTN","SROAPRT7",32,0)
 .I $E(Y)="5" S SRI=$S(Y="5A":16,Y="5B":17,Y="5C":11,1:"")  Q:SRI=""
"RTN","SROAPRT7",33,0)
 .I $E(Y)="6" S SRI=$S(Y="6A":15,Y="6B":19,Y="6C":20,Y="6D":3,Y="6E":35,Y="6F":38,1:"")  Q:SRI=""
"RTN","SROAPRT7",34,0)
 .S SRIN=Y I SROC(SRI)="       "&($P(SRAO(SRIN),"^")="YES") S $P(SRAO(SRIN),"^")="ND"
"RTN","SROAPRT7",35,0)
 .S $P(SRAO(SRIN),"^")=$S($P(SRAO(SRIN),"^")="YES":$E(SROC(SRI),4,5)_"/"_$E(SROC(SRI),6,7)_"/"_$E(SROC(SRI),2,3),$P(SRAO(SRIN),"^")="NO":"   "_$P(SRAO(SRIN),"^"),$P(SRAO(SRIN),"^")="ND":" NO DATE",1:$P(SRAO(SRIN),"^"))
"RTN","SROAPRT7",36,0)
 I $G(SRSEP)'="" S X=$P(SRAO("6D"),"^"),$P(SRAO("6D"),"^")=SRSEP_" "_X
"RTN","SROAPRT7",37,0)
 F SRK="1D","4D","3D","5D","2E","6G" S SRKO=$S(SRK="4D":30,SRK="3D":31,SRK="5D":32,SRK="2E":29,SRK="6G":21,SRK="1D":36,1:"") I $P(SRAO(SRK),"^")'="" D
"RTN","SROAPRT7",38,0)
 .S SRSTAR=1 I SROC(SRKO)="       " S SRD="NO DATE"
"RTN","SROAPRT7",39,0)
 .I SROC(SRKO)'="       " S SRD=$E(SROC(SRKO),4,5)_"/"_$E(SROC(SRKO),6,7)_"/"_$E(SROC(SRKO),2,3)
"RTN","SROAPRT7",40,0)
 .S $P(SRAO(SRK),"^")="* "_$P(SRAO(SRK),"^")_$J(SRD,(26-$L($P(SRAO(SRK),"^")))+10)
"RTN","SROAPRT7",41,0)
DISP W:$E(IOST)'="C" ! W !,?21,"PERIOPERATIVE OCCURRENCE INFORMATION",!!,"WOUND OCCURRENCES:",?33,$P(SRAO(1),"^"),?41,"CNS OCCURRENCES:",?74,$P(SRAO(4),"^")
"RTN","SROAPRT7",42,0)
 W !,"Superficial Incisional SSI:",?30,$P(SRAO("1A"),"^"),?41,"Stroke/CVA:",?71,$P(SRAO("4A"),"^")
"RTN","SROAPRT7",43,0)
 W !,"Deep Incisional SSI:",?30,$P(SRAO("1B"),"^"),?41,"Coma > 24 Hours:",?71,$P(SRAO("4B"),"^")
"RTN","SROAPRT7",44,0)
 W !,"Wound Disruption:",?30,$P(SRAO("1C"),"^"),?41,"Peripheral Nerve Injury:",?71,$P(SRAO("4C"),"^")
"RTN","SROAPRT7",45,0)
 I $P(SRAO("1D"),"^")'=""!($P(SRAO("4D"),"^")'="") W !,$P(SRAO("1D"),"^"),?41,$P(SRAO("4D"),"^")
"RTN","SROAPRT7",46,0)
 W !!,"URINARY TRACT OCCURRENCES: ",?33,$P(SRAO(3),"^"),?41,"CARDIAC OCCURRENCES:",?74,$P(SRAO(5),"^")
"RTN","SROAPRT7",47,0)
 W !,"Renal Insufficiency: ",?30,$P(SRAO("3A"),"^"),?41,"Arrest Requiring CPR:",?71,$P(SRAO("5A"),"^")
"RTN","SROAPRT7",48,0)
 W !,"Acute Renal Failure:",?30,$P(SRAO("3B"),"^"),?41,"Myocardial Infarction:",?71,$P(SRAO("5B"),"^")
"RTN","SROAPRT7",49,0)
 W !,"Urinary Tract Infection:",?30,$P(SRAO("3C"),"^"),?41,$P(SRAO("5D"),"^")
"RTN","SROAPRT7",50,0)
 I $P(SRAO("3D"),"^")'="" W !,$P(SRAO("3D"),"^")
"RTN","SROAPRT7",51,0)
 W !,?41,"OTHER OCCURRENCES:",?74,$P(SRAO(6),"^")
"RTN","SROAPRT7",52,0)
 W !,"RESPIRATORY OCCURRENCES:",?33,$P(SRAO(2),"^"),?41,"Bleeding/Transfusions:",?71,$P(SRAO("6A"),"^")
"RTN","SROAPRT7",53,0)
 W !,"Pneumonia:",?30,$P(SRAO("2A"),"^"),?41,"Graft/Prosthesis/Flap Failure:",?71,$P(SRAO("6B"),"^")
"RTN","SROAPRT7",54,0)
 W !,"Unplanned Intubation:",?30,$P(SRAO("2B"),"^"),?41,"DVT/Thrombophlebitis:",?71,$P(SRAO("6C"),"^")
"RTN","SROAPRT7",55,0)
 W !,"Pulmonary Embolism:",?30,$P(SRAO("2C"),"^"),?41,"Systemic Sepsis: " D
"RTN","SROAPRT7",56,0)
 .I $P(SRAO("6D"),"^")="   NO" W ?71,$P(SRAO("6D"),"^") Q
"RTN","SROAPRT7",57,0)
 .W $J($P(SRAO("6D"),"^"),21)
"RTN","SROAPRT7",58,0)
 W !,"On Ventilator > 48 Hours:",?30,$P(SRAO("2D"),"^"),?41,"Organ/Space SSI:",?71,$P(SRAO("6E"),"^")
"RTN","SROAPRT7",59,0)
 W !,$P(SRAO("2E"),"^"),?41,"C. difficile Colitis:",?71,$P(SRAO("6F"),"^")
"RTN","SROAPRT7",60,0)
 W !,?41,$P(SRAO("6G"),"^")
"RTN","SROAPRT7",61,0)
 I $G(SRSTAR) W !,"* indicates Other (ICD9)"
"RTN","SROAPRT7",62,0)
 I $E(IOST)="C" W !! K DIR S DIR(0)="FOA",DIR("A")="Press RETURN to continue" D ^DIR K DIR
"RTN","SROAPRT7",63,0)
 Q
"RTN","SROAPRT7",64,0)
YN S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPRT7",65,0)
 Q
"RTN","SROAPS2")
0^42^B18374164^B13745888
"RTN","SROAPS2",1,0)
SROAPS2 ;BIR/MAM - PREOP INFO (PAGE 2) ;04/24/07
"RTN","SROAPS2",2,0)
 ;;3.0; Surgery ;**38,47,125,153,160**;24 Jun 93;Build 7
"RTN","SROAPS2",3,0)
 S SRPAGE="PAGE: 2 OF 2" D HDR^SROAUTL,PRE2
"RTN","SROAPS2",4,0)
 W !! F I=1:1:80 W "-"
"RTN","SROAPS2",5,0)
 Q
"RTN","SROAPS2",6,0)
PRE2 N SRX,Y S Y=$P($G(^SRF(SRTN,200.1)),"^",3) I Y="",$P(VADM(5),"^")="M" S $P(^SRF(SRTN,200.1),"^",3)="NA"
"RTN","SROAPS2",7,0)
 S SRA(200)=$G(^SRF(SRTN,200)),SRA(206)=$G(^SRF(SRTN,206)),SRA(200.1)=$G(^SRF(SRTN,200.1))
"RTN","SROAPS2",8,0)
 S Y=$P(SRA(200),"^",37),SRX=243,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",9,0)
 S Y=$P(SRA(200),"^",38),SRX=328,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",10,0)
 S Y=$P(SRA(200),"^",39),SRX=211,SRAO("1B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",11,0)
 S Y=$P(SRA(200),"^",18),SRX=210,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",12,0)
 S Y=$P(SRA(200),"^",44),SRX=245,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",13,0)
 S Y=$P(SRA(200),"^",19),SRX=332,SRAO("2A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",14,0)
 S Y=$P(SRA(200),"^",21),SRX=333,SRAO("2B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",15,0)
 S Y=$P(SRA(200),"^",22),SRX=398,SRAO("2I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",16,0)
 S Y=$P(SRA(200),"^",23),SRX=399,SRAO("2H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",17,0)
 S Y=$P(SRA(200),"^",24),SRX=400,SRAO("2C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",18,0)
 S Y=$P(SRA(200),"^",25),SRX=334,SRAO("2D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",19,0)
 S Y=$P(SRA(200),"^",26),SRX=335,SRAO("2E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",20,0)
 S Y=$P(SRA(200),"^",27),SRX=336,SRAO("2F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",21,0)
 S Y=$P(SRA(200),"^",29),SRX=401,SRAO("2G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",22,0)
 S Y=$P(SRA(200),"^",45),SRX=338,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",23,0)
 S Y=$P(SRA(200),"^",46),SRX=218,SRAO("3B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",24,0)
 S Y=$P(SRA(200),"^",47),SRX=339,SRAO("3C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",25,0)
 S Y=$P(SRA(200),"^",48),SRX=215,SRAO("3D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",26,0)
 S Y=$P(SRA(200),"^",49),SRX=216,SRAO("3E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",27,0)
 S Y=$P(SRA(200),"^",50),SRX=217,SRAO("3F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",28,0)
 S Y=$P(SRA(206),"^",3),SRX=338.1,SRAO("3G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",29,0)
 S Y=$P(SRA(206),"^",4),SRX=338.2,SRAO("3H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",30,0)
 S Y=$P(SRA(206),"^",8),SRX=218.1,SRAO("3I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS2",31,0)
 S Y=$P(SRA(200.1),"^",3),SRX=269,SRAO("3J")=$$OUT(SRX,Y)_"^"_SRX K SRA
"RTN","SROAPS2",32,0)
 W !,"1. RENAL:",?(38-$L($P(SRAO(1),"^"))),$P(SRAO(1),"^"),?40,"3. NUTRITIONAL/IMMUNE/OTHER:",?(79-$L($P(SRAO(3),"^"))),$P(SRAO(3),"^")
"RTN","SROAPS2",33,0)
 W !,"  A. Acute Renal Failure:",?(38-$L($P(SRAO("1A"),"^"))),$P(SRAO("1A"),"^"),?40,"  A. Disseminated Cancer:",?(79-$L($P(SRAO("3A"),"^"))),$P(SRAO("3A"),"^")
"RTN","SROAPS2",34,0)
 W !,"  B. Currently on Dialysis:",?(38-$L($P(SRAO("1B"),"^"))),$P(SRAO("1B"),"^"),?40,"  B. Open Wound:",?(79-$L($P(SRAO("3B"),"^"))),$P(SRAO("3B"),"^")
"RTN","SROAPS2",35,0)
 W !,?40,"  C. Steroid Use for Chronic Cond.:",?(79-$L($P(SRAO("3C"),"^"))),$P(SRAO("3C"),"^")
"RTN","SROAPS2",36,0)
 W !,"2. CENTRAL NERVOUS SYSTEM:",?(38-$L($P(SRAO(2),"^"))),$P(SRAO(2),"^"),?40,"  D. Weight Loss > 10%:",?(79-$L($P(SRAO("3D"),"^"))),$P(SRAO("3D"),"^")
"RTN","SROAPS2",37,0)
 W !,"  A. Impaired Sensorium: ",?(38-$L($P(SRAO("2A"),"^"))),$P(SRAO("2A"),"^"),?40,"  E. Bleeding Disorders:",?(79-$L($P(SRAO("3E"),"^"))),$P(SRAO("3E"),"^")
"RTN","SROAPS2",38,0)
 W !,"  B. Coma:",?(38-$L($P(SRAO("2B"),"^"))),$P(SRAO("2B"),"^"),?40,"  F. Transfusion > 4 RBC Units:",?(79-$L($P(SRAO("3F"),"^"))),$P(SRAO("3F"),"^")
"RTN","SROAPS2",39,0)
 W !,"  C. Hemiplegia:",?(38-$L($P(SRAO("2C"),"^"))),$P(SRAO("2C"),"^"),?40,"  G. Chemotherapy W/I 30 Days:",?(79-$L($P(SRAO("3G"),"^"))),$P(SRAO("3G"),"^")
"RTN","SROAPS2",40,0)
 W !,"  D. History of TIAs:",?(38-$L($P(SRAO("2D"),"^"))),$P(SRAO("2D"),"^"),?40,"  H. Radiotherapy W/I 90 Days:",?(79-$L($P(SRAO("3H"),"^"))),$P(SRAO("3H"),"^")
"RTN","SROAPS2",41,0)
 W !,"  E. CVA/Stroke w. Neuro Deficit:",?(38-$L($P(SRAO("2E"),"^"))),$P(SRAO("2E"),"^"),?40,"  I. Preoperative Sepsis:",?(79-$L($P(SRAO("3I"),"^"))),$P(SRAO("3I"),"^")
"RTN","SROAPS2",42,0)
 W !,"  F. CVA/Stroke w/o Neuro Deficit:",?(38-$L($P(SRAO("2F"),"^"))),$P(SRAO("2F"),"^"),?40,"  J. Pregnancy:",?(79-$L($P(SRAO("3J"),"^"))),$P(SRAO("3J"),"^")
"RTN","SROAPS2",43,0)
 W !,"  G. Tumor Involving CNS:",?(38-$L($P(SRAO("2G"),"^"))),$P(SRAO("2G"),"^")
"RTN","SROAPS2",44,0)
 W !,"  H. Paraplegia:",?(38-$L($P(SRAO("2H"),"^"))),$P(SRAO("2H"),"^")
"RTN","SROAPS2",45,0)
 W !,"  I. Quadriplegia:",?(38-$L($P(SRAO("2I"),"^"))),$P(SRAO("2I"),"^")
"RTN","SROAPS2",46,0)
 Q
"RTN","SROAPS2",47,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPS2",48,0)
 N C,Y
"RTN","SROAPS2",49,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPS2",50,0)
 I Y="NO STUDY" S Y="NS"
"RTN","SROAPS2",51,0)
 Q Y
"RTN","SROASS")
0^43^B19053232^B17264408
"RTN","SROASS",1,0)
SROASS ;BIR/MAM - SELECT ASSESSMENT ;01/18/07
"RTN","SROASS",2,0)
 ;;3.0; Surgery ;**38,47,64,94,121,100,160**;24 Jun 93;Build 7
"RTN","SROASS",3,0)
PST K:$D(DUZ("SAV")) SRNEW K SRTN W !! S SRSOUT=0
"RTN","SROASS",4,0)
 N SRSEL D ^SROPSEL G:'$D(DFN) END S SRANM=VADM(1)_"  "_VA("PID")
"RTN","SROASS",5,0)
START ; start display
"RTN","SROASS",6,0)
 G:SRSOUT END W:SRSEL=1 @IOF,!,?1,SRANM
"RTN","SROASS",7,0)
 I $D(^DPT(DFN,.35)),$P(^(.35),"^") S SRDT=$P(^(.35),"^") W "         * DIED "_$E(SRDT,4,5)_"/"_$E(SRDT,6,7)_"/"_$E(SRDT,2,3)_" *"
"RTN","SROASS",8,0)
 I SRSEL=2 S CNT=0 D ^SROASSN G:$D(SRTN) ENTER G PST
"RTN","SROASS",9,0)
 D ^SROASS1 I SRSOUT G END
"RTN","SROASS",10,0)
 I $D(SRTN) G ENTER
"RTN","SROASS",11,0)
 I $D(SRNEW) S CNT=CNT+1,SRCASE(CNT)="" W CNT,".   ----     CREATE NEW ASSESSMENT"
"RTN","SROASS",12,0)
 I '$D(SRCASE(1)) W !!,"There are no Surgery Risk Assessments entered for "_VADM(1)_".",!! K DIR S DIR(0)="FOA",DIR("A")="  Press RETURN to continue.  " D ^DIR Q
"RTN","SROASS",13,0)
OPT W !!!,"Select Surgical Case: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SROASS",14,0)
 I '$D(SRCASE(X)) W !!,"Enter the number of the desired assessment." W:$D(SRNEW) "  Select '"_CNT_"' to create an",!,"assessment for another surgical case." G OPT
"RTN","SROASS",15,0)
 I $D(SRNEW),X=CNT D ^SROANEW G END
"RTN","SROASS",16,0)
 I '$D(SRTN) S SRTN=+SRCASE(X)
"RTN","SROASS",17,0)
ENTER ; edit, complete, or delete
"RTN","SROASS",18,0)
 I $D(SRPRINT)!'($D(SRNEW)) Q
"RTN","SROASS",19,0)
 S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T" D TRANS I 'SRYN K SRASS,SRTN S:SRSEL=2 SRSOUT=1 G START
"RTN","SROASS",20,0)
 I SRATYPE="N"&($P(SR("RA"),"^",2)="C") W !!,"You've selected a Cardiac assessment, using a Non-Cardiac Option," K DIR S DIR(0)="Y",DIR("A")="Do you wish to continue",DIR("B")="NO" D ^DIR S X=$E(X) I "Yy"'[X K SRTN S SRSOUT=1 G END
"RTN","SROASS",21,0)
 I SRATYPE="C"&($P(SR("RA"),"^",2)="N") W !!,"You've selected a Non-Cardiac assessment, using a Cardiac Option," K DIR S DIR(0)="Y",DIR("A")="Do you wish to continue",DIR("B")="NO" D ^DIR S X=$E(X) I "Yy"'[X K SRTN S SRSOUT=1 G END
"RTN","SROASS",22,0)
 W @IOF,!,?1,SRANM,!! S SRSDATE=$P(^SRF(SRTN,0),"^",9) S SRASS=SRTN D DISP^SROASS1
"RTN","SROASS",23,0)
 I SRATYPE="N" D EXCL
"RTN","SROASS",24,0)
 W !!,"1. Enter Risk Assessment Information",!,"2. Delete Risk Assessment Entry",!,"3. Update Assessment Status to 'COMPLETE'"
"RTN","SROASS",25,0)
 W !!,"Select Number:  1//  " R X:DTIME I '$T!(X["^") K SRTN,SRASS S SRSOUT=1 G END
"RTN","SROASS",26,0)
 S:X="" X=1 I X<1!(X>3)!(X'?.N) D HELP G ENTER
"RTN","SROASS",27,0)
 I X=2 D ^SROADEL W !!,"Press <RET> to continue  " R X:DTIME W @IOF K SRTN G END
"RTN","SROASS",28,0)
 I X=3 D ^SROACOM K SRTN G END
"RTN","SROASS",29,0)
 Q
"RTN","SROASS",30,0)
EXCL I $P($G(^SRO(136,SRTN,10)),"^"),'$$XL^SROAX(SRTN) D
"RTN","SROASS",31,0)
 .W !!,">>> Based on CPT Codes assigned for this case, this case should be excluded." Q
"RTN","SROASS",32,0)
 N SRPROC,SRL S SRL=49 D CPTS^SROAUTL0 I SRPROC(1)="NOT ENTERED" D
"RTN","SROASS",33,0)
 .W !!,">>> No CPT Codes have been assigned for this case."
"RTN","SROASS",34,0)
 Q
"RTN","SROASS",35,0)
END S:'$D(SRSOUT) SRSOUT=1 W:SRSOUT @IOF D ^SRSKILL
"RTN","SROASS",36,0)
 Q
"RTN","SROASS",37,0)
HELP ;
"RTN","SROASS",38,0)
 W !!,"Enter <RET> or '1' to enter or edit information related to this Risk ",!,"Assessment entry.  If you want to delete the Assessment, enter '2'."
"RTN","SROASS",39,0)
 W !,"Enter '3' to update the status of this Assessment to 'COMPLETE'."
"RTN","SROASS",40,0)
 W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROASS",41,0)
 Q
"RTN","SROASS",42,0)
TRANS W @IOF,!,"This assessment has already been transmitted.  The information contained",!,"in it cannot be altered unless you first change the status to 'INCOMPLETE'."
"RTN","SROASS",43,0)
 S SRYN=0 K DIR S DIR("A")="Do you wish to change the status of this assessment to 'INCOMPLETE'",DIR("B")="NO",DIR(0)="Y" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROASS",44,0)
 S SRYN=Y I 'SRYN Q
"RTN","SROASS",45,0)
 I $$LOCK^SROUTL(SRTN) K DA,DIE,DR S DIE=130,DA=SRTN,DR="235////I;393////1" D ^DIE K DA,DIE,DR D UNLOCK^SROUTL(SRTN)
"RTN","SROASS",46,0)
 Q
"RTN","SROATCM1")
0^77^B51948425^B51278524
"RTN","SROATCM1",1,0)
SROATCM1 ;BIR/MAM - STUFF TRANMISSION IN ^TMP ;05/10/07
"RTN","SROATCM1",2,0)
 ;;3.0; Surgery ;**38,71,79,90,88,93,95,111,125,135,134,142,153,160**;24 Jun 93;Build 7
"RTN","SROATCM1",3,0)
 K SRA F I=0,.2,200,201,202,205:1:208,207.1,209,202.1,200.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATCM1",4,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANAME=VADM(1),SEX=$P(VADM(5),"^"),Z=$P(VADM(3),"^"),SRSDATE=$P(SRA(0),"^",9),Y=$E(SRSDATE,1,7),AGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROATCM1",5,0)
 N SRPID S SRPID=VA("PID"),SRPID=$TR(SRPID,"-","") ; remove hyphens from PID
"RTN","SROATCM1",6,0)
 S SHEMP="~"_$J(SRASITE,3)_$J(SRTN,7)_" 1 "_DT_$J(AGE,3)_$J(SEX,1)_$J(SRSDATE,12,4)_SRPID
"RTN","SROATCM1",7,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 2 ",SRACNT=SRACNT+1
"RTN","SROATCM1",8,0)
 S SRHD=$P(SRA(206),"^")
"RTN","SROATCM1",9,0)
 I SRHD["C" S SRH="C",SRHD=$E(SRHD,1,$L(SRHD)-1)
"RTN","SROATCM1",10,0)
 E  S SRH=" "
"RTN","SROATCM1",11,0)
 S SRWD=$P(SRA(206),"^",2)
"RTN","SROATCM1",12,0)
 I SRWD["K" S SRW="K",SRWD=$E(SRWD,1,$L(SRWD)-1)
"RTN","SROATCM1",13,0)
 E  S SRW=" "
"RTN","SROATCM1",14,0)
 S SHEMP=SHEMP_$J(SRHD,3)_SRH_$J(SRWD,3)_SRW_$J($P(SRA(200),"^",2),2)_$J($P(SRA(200),"^",11),2)_$J($P(SRA(206),"^",5),3)_$J($P(SRA(206),"^",6),2)_$J($P(SRA(206),"^",7),2)
"RTN","SROATCM1",15,0)
 S SRCT=$P($G(^SRF(SRTN,201)),"^",4) S:SRCT["NS" SRCT=""
"RTN","SROATCM1",16,0)
 S SHEMP=SHEMP_$J($P(SRA(200.1),"^",5),2)_$J(SRCT,4)_$J($P(SRA(206),"^",10),2)_$J($P(SRA(206),"^",11),2)_$J($P(SRA(200),"^",8),2)_$J(" ",2)_$J($P(SRA(206),"^",14),2)_$J(" ",2)
"RTN","SROATCM1",17,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",16),2)_$J($P(SRA(206),"^",17),2)_$J($P(SRA(206),"^",18),3)_$J($P(SRA(206),"^",19),3)_$J($P(SRA(206),"^",20),2)_$J($P(SRA(206),"^",21),2)_$J($P(SRA(206),"^",22),2)_$J($P(SRA(206),"^",23),2)
"RTN","SROATCM1",18,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 3 ",SRACNT=SRACNT+1
"RTN","SROATCM1",19,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",24),2)_$J($P(SRA(206),"^",25),3)_$J($P(SRA(206),"^",26),3)_$J($P(SRA(206),"^",27),3)
"RTN","SROATCM1",20,0)
 ; Left Main (node 3 pos 26-28), LAD (node 3 pos 29-31), Right Coronary (node 3 pos 32-34) & Circumflex Stenosis (node 3 pos 35-37)
"RTN","SROATCM1",21,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",28),3)_$J($P($G(SRA(206)),"^",33),3)_$J($P($G(SRA(206)),"^",34),3)_$J($P($G(SRA(206)),"^",35),3)
"RTN","SROATCM1",22,0)
 ; LV Cont Grade (node 3 pos 39-40) & Mitral Regurgitation(node 3 pos 41-42)
"RTN","SROATCM1",23,0)
 N SROLV S SROLV=$P(SRA(206),"^",30)
"RTN","SROATCM1",24,0)
 S SHEMP=SHEMP_$J($S(SROLV="IIIa":"3A",SROLV="IIIb":"3B",1:SROLV),3)_$J($P($G(SRA(206)),"^",9),2)
"RTN","SROATCM1",25,0)
 ; Estimate of Mortality and ASA Class are changed to not transmit "NS"
"RTN","SROATCM1",26,0)
 S SREMDATE=$P($G(SRA(206)),"^",32)
"RTN","SROATCM1",27,0)
 S SREMO=$P($G(^SRF(SRTN,206)),"^",31) S:SREMO["NS" SREMDATE=""
"RTN","SROATCM1",28,0)
 ; Estimate of Mortality (node 3 pos 43-45) & date (node 3 pos 46-57)
"RTN","SROATCM1",29,0)
 S SHEMP=SHEMP_$J(SREMO,3)
"RTN","SROATCM1",30,0)
 S SHEMP=SHEMP_$S(SREMDATE="":$J(SREMDATE,12),1:$J(SREMDATE,12,4))
"RTN","SROATCM1",31,0)
 S X="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($P($G(^SRO(132.8,Y,0)),"^"),"-") S X=$E(X) S:X["N" X=""
"RTN","SROATCM1",32,0)
 S SHEMP=SHEMP_$J(X,1)
"RTN","SROATCM1",33,0)
 ; Cardiac Est. of Surg. Priority(node 3 pos 59) & date(node 3 pos 60-71)
"RTN","SROATCM1",34,0)
 S SHEMP=SHEMP_$J($P($G(SRA(208)),"^",12),1)
"RTN","SROATCM1",35,0)
 N SREMSPDT S SREMSPDT=$P($G(SRA(208)),"^",13)
"RTN","SROATCM1",36,0)
 S SHEMP=SHEMP_$S(SREMSPDT="":$J(SREMSPDT,12),1:$J(SREMSPDT,12,4))
"RTN","SROATCM1",37,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 4 ",SRACNT=SRACNT+1
"RTN","SROATCM1",38,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^"),2)_$J($P(SRA(207),"^",2),2)_$J($P(SRA(207),"^",3),2)_$J($P(SRA(207),"^",4),2)_$J($P(SRA(207),"^",5),2)_$J(" ",2)_$J($P(SRA(207),"^",7),2)
"RTN","SROATCM1",39,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",8),2)_$J($P(SRA(207),"^",9),2)_$J($P(SRA(207),"^",10),2)_$J($P(SRA(207),"^",12),2)_$J($P(SRA(207),"^",13),2)_$J($P(SRA(207),"^",14),2)_$J($P(SRA(207),"^",15),2)
"RTN","SROATCM1",40,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",16),2)_$J($P(SRA(207),"^",17),2)_$J($P(SRA(207),"^",18),2)_"  "
"RTN","SROATCM1",41,0)
 S SRDEATH=$P($G(SRA(208)),"^"),SRDDATE=$E($P($G(^DPT(DFN,.35)),"^"),1,12) I SRDDATE'="" S SRDDATE=$$LJ^XLFSTR(SRDDATE,12,0)
"RTN","SROATCM1",42,0)
 S SHEMP=SHEMP_$J(SRDEATH,2)_$J(SRDDATE,12)
"RTN","SROATCM1",43,0)
 S SHEMP=SHEMP_$P(SRA(207),"^",20)
"RTN","SROATCM1",44,0)
 ; transmit no data in node 5
"RTN","SROATCM1",45,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 5 ",SRACNT=SRACNT+1
"RTN","SROATCM1",46,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 6 ",SRACNT=SRACNT+1
"RTN","SROATCM1",47,0)
 S SHEMP=SHEMP_$J($P(SRA(208),"^",2),2)_$J($P(SRA(208),"^",3),2)_$J($P(SRA(205),"^",17),2)_$J($P(SRA(208),"^",4),2)_$J($P(SRA(208),"^",5),2)_$J($P(SRA(205),"^",28),2)_$J($P(SRA(208),"^",6),2)
"RTN","SROATCM1",48,0)
 N SRRCS D RCSP S SHEMP=SHEMP_$J($P(SRA(205),"^",13),2)_$J(SRRCS,2)_$J($P(SRA(205),"^",22),2)_$J($P(SRA(205),"^",21),2)
"RTN","SROATCM1",49,0)
 N SRIP D CPR S SHEMP=SHEMP_$J(SRIP,2)
"RTN","SROATCM1",50,0)
 ;
"RTN","SROATCM1",51,0)
 ;Ethnicity contained in VADM(11)
"RTN","SROATCM1",52,0)
 N SROETCD,SROPTF S SROETCD="",SROPTF=""
"RTN","SROATCM1",53,0)
 S SROETCD=$P($G(VADM(11,1)),U,1)            ;Ethnicity code
"RTN","SROATCM1",54,0)
 S SROPTF=$$PTR2CODE^DGUTL4(SROETCD,2,4)     ;PTF Ethnicity code
"RTN","SROATCM1",55,0)
 S SHEMP=SHEMP_$J($G(SROPTF),1)   ;Ethnicity
"RTN","SROATCM1",56,0)
 ;
"RTN","SROATCM1",57,0)
 ;Multiple races contained in VADM(12)
"RTN","SROATCM1",58,0)
 N SRORAC,SRORCD,SRORCE S SRORCE=0,SRORAC="",SRORACE="",SRORCD=""
"RTN","SROATCM1",59,0)
 F  S SRORCE=$O(VADM(12,SRORCE)) Q:SRORCE=""  D
"RTN","SROATCM1",60,0)
 .S SRORAC=$P($G(VADM(12,SRORCE)),U,1)        ;Race code
"RTN","SROATCM1",61,0)
 .S SRORCD=$$PTR2CODE^DGUTL4(SRORAC,1,4)     ;PTF race code
"RTN","SROATCM1",62,0)
 .S SRORACE=SRORACE_$J(SRORCD,1)
"RTN","SROATCM1",63,0)
 ;
"RTN","SROATCM1",64,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_SRORACE  ;Eth, race added
"RTN","SROATCM1",65,0)
 ;
"RTN","SROATCM1",66,0)
 S SHEMP=$E(SHEMP,1,11)_" 7 ",SRACNT=SRACNT+1
"RTN","SROATCM1",67,0)
 S SHEMP=SHEMP_$TR(SRANAME,","," ")
"RTN","SROATCM1",68,0)
 I $P($G(^SRF(SRTN,"RA")),"^",3)=1 S SHEMP=SHEMP_$J("***RE-TRANSMISSION",38)
"RTN","SROATCM1",69,0)
 ; zip code, employ status, hemoglobin, hemo date, serum albumin, albumin date, creatitine date, total ischemic time, min invasive, total cpb time, total pre,post ICU & step down unit LOS,
"RTN","SROATCM1",70,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 8 ",SRACNT=SRACNT+1
"RTN","SROATCM1",71,0)
 K VADM D ADD^VADPT S X=$S($P(VAPA(11),"^",2)'="":$P(VAPA(11),"^",2),1:VAPA(6))
"RTN","SROATCM1",72,0)
 S SHEMP=SHEMP_$J(X,10)_$J($P(SRA(208),"^",18),1)_$J($P(SRA(201),"^",20),7)_$J($P(SRA(202),"^",20),7)_$J($P(SRA(201),"^",8),4)_$J($P(SRA(202),"^",8),7)_$J($P(SRA(202),"^",4),7)_$J($P(SRA(206),"^",36),4)
"RTN","SROATCM1",73,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",22),1)_$J($P(SRA(206),"^",37),4)_$J($P(SRA(207),"^",23),2)
"RTN","SROATCM1",74,0)
 ; cpt codes
"RTN","SROATCM1",75,0)
NODE9 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 9 ",SRACNT=SRACNT+1
"RTN","SROATCM1",76,0)
 S SRPMOD="",SR10SP="          ",CPT=$P($G(^SRO(136,SRTN,0)),"^",2) D
"RTN","SROATCM1",77,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=SRTN D MOD^SROATM3 S SRPMOD=SRM
"RTN","SROATCM1",78,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRPMOD=SRPMOD_SR10SP
"RTN","SROATCM1",79,0)
 K CPT F I=1:1:10 S (CPT(I),SRMOD(I))=""
"RTN","SROATCM1",80,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D OTH^SROATM3
"RTN","SROATCM1",81,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)
"RTN","SROATCM1",82,0)
 ; card cath date, admission date/time, hospital discharge date/time, anesthesia start & end date/times
"RTN","SROATCM1",83,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 10",SRACNT=SRACNT+1
"RTN","SROATCM1",84,0)
 I $P(SRA(207),"^",21)'="" D
"RTN","SROATCM1",85,0)
 .I $E($P(SRA(207),"^",21),8)="." Q
"RTN","SROATCM1",86,0)
 .E  S $P(SRA(207),"^",21)=$P(SRA(207),"^",21)_"."
"RTN","SROATCM1",87,0)
 S $P(SRA(207),"^",21)=$$LJ^XLFSTR($P(SRA(207),"^",21),12,0)
"RTN","SROATCM1",88,0)
 S SHEMP=SHEMP_$J($E($P(SRA(207),"^",21),1,12),12)
"RTN","SROATCM1",89,0)
 S (SRDATE,SRI)="" F SRI=14,15 S SRDATE=$E($P($G(SRA(208)),"^",SRI),1,12) S SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",90,0)
 S (SRDATE,SRI)="" F SRI=1,4 S SRDATE=$P(SRA(.2),"^",SRI) S SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",91,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 11",SRACNT=SRACNT+1
"RTN","SROATCM1",92,0)
 S (SRDATE,SRI)="" F SRI=10,12,2,3 S SRDATE=$P(SRA(.2),"^",SRI),SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",93,0)
 ; preop risk factors comments
"RTN","SROATCM1",94,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 12",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.1)),1,65),",","^")
"RTN","SROATCM1",95,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 13",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.1)),66,130),",","^")
"RTN","SROATCM1",96,0)
 ; resource data comments
"RTN","SROATCM1",97,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 14",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.2)),1,65),",","^")
"RTN","SROATCM1",98,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 15",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.2)),66,130),",","^")
"RTN","SROATCM1",99,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 16"_$E(SRPMOD,1,10) F I=1:1:5 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATCM1",100,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 17" F I=6:1:10 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATCM1",101,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE),SHEMP=SHEMP_$J(SRDIV,6)
"RTN","SROATCM1",102,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM1",103,0)
 Q
"RTN","SROATCM1",104,0)
RCSP S SRRCS=0,X=$P(SRA(208),"^",7) I X="N" Q
"RTN","SROATCM1",105,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=27 S X=$P(^SRF(SRTN,16,SROCC,0),"^",5) S:X'="" SRRCS=X Q
"RTN","SROATCM1",106,0)
 Q
"RTN","SROATCM1",107,0)
CPR S SRIP=$P(SRA(205),"^",26) I SRIP'="Y" Q
"RTN","SROATCM1",108,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,10,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,10,SROCC,0),"^",2)=16 S SRIP="I" Q
"RTN","SROATCM1",109,0)
 I SRIP="Y" S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=16 S SRIP="P" Q
"RTN","SROATCM1",110,0)
 Q
"RTN","SROATM1")
0^51^B24222970^B23786520
"RTN","SROATM1",1,0)
SROATM1 ;BIR/MAM - NON CARDIAC TRANSMISSION ;05/10/07
"RTN","SROATM1",2,0)
 ;;3.0; Surgery ;**27,38,47,60,62,81,88,93,95,125,153,160**;24 Jun 93;Build 7
"RTN","SROATM1",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM1",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM1",5,0)
 ;**         are prohibited.
"RTN","SROATM1",6,0)
 ;
"RTN","SROATM1",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROATM1",8,0)
 ;
"RTN","SROATM1",9,0)
 N SRINTUB,SRDTH,SRPID F I=0,200,200.1,206 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM1",10,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANAME=VADM(1),SEX=$P(VADM(5),"^"),Z=$P(VADM(3),"^"),SRSDATE=$E($P(SRA(0),"^",9),1,12),Y=$E(SRSDATE,1,7),AGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROATM1",11,0)
 S SRPID=VA("PID"),SRPID=$TR(SRPID,"-","") ; remove hyphens from PID
"RTN","SROATM1",12,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE)
"RTN","SROATM1",13,0)
 S X=$P($G(^SRF(SRTN,205)),"^",3),SRDTH=$S(X:X,1:$P(VADM(6),"^"))
"RTN","SROATM1",14,0)
 S SHEMP=">"_$J(SRASITE,3)_$J(SRTN,7)_"  1"_DT_$J(AGE,3)_$J(SEX,1)_$J(SRSDATE,12)_$J(SRPID,20)_$J(SRDIV,6)_$J(SRDTH,12)
"RTN","SROATM1",15,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  2",SRACNT=SRACNT+1
"RTN","SROATM1",16,0)
 S NYUK=$P(SRA(200),"^",2) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",3) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",4) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200.1),"^",2) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",17,0)
 S NYUK=$P(SRA(200),"^",6) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",7) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",8) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",10) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",18,0)
 S NYUK=$P(SRA(200),"^",11) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",12) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200.1),"^",6) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",15) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",19,0)
 S NYUK=$P(SRA(200),"^",16) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",17) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",31) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",32) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",20,0)
 S NYUK=$P(SRA(200),"^",33) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",34) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",35) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",36) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",21,0)
 S NYUK=$P(SRA(200),"^",38) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",39) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",41) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",42) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",22,0)
 S NYUK=$P(SRA(200),"^",43) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",19) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",20) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",21) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",23,0)
 S NYUK=$P(SRA(200),"^",22) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",23) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",24) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",25) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",24,0)
 S NYUK=$P(SRA(200),"^",26) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",27) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",28) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",29) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",25,0)
 S NYUK=$P(SRA(200),"^",45) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",46) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",47) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",48) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",26,0)
 S NYUK=$P(SRA(200),"^",49) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",50) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200.1),"^",3),SHEMP=SHEMP_$J(NYUK,2)
"RTN","SROATM1",27,0)
 S NYUK=$P(SRA(0),"^",4) S:NYUK NYUK=$E($P(^DIC(45.3,$P(^SRO(137.45,NYUK,0),"^",2),0),"^"),1,3) S SHEMP=SHEMP_$J(NYUK,3)
"RTN","SROATM1",28,0)
 S NYUK=$P(SRA(200),"^",52),SHEMP=SHEMP_$J(NYUK,2),X=$P(SRA(0),"^",10),NYUK=$S(X="EM":"Y",1:"N") D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",29,0)
 S NYUK=$P($G(^SRF(SRTN,"1.0")),"^",8),SHEMP=SHEMP_$J(NYUK,2),NYUK=$P(SRA(200),"^",53) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",30,0)
 S SRASA="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($P($G(^SRO(132.8,Y,0)),"^"),"-"),SRASA=X S NYUK=$E(SRASA,1,1) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",31,0)
 K SRTECH,SRZ,SRTRAUMA S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROATM1",32,0)
 I $D(SRTECH) S SRTRAUMA=$P(^SRF(SRTN,6,SRT,0),"^",14),SRINTUB=$P($G(^SRF(SRTN,6,SRT,8)),"^",2)
"RTN","SROATM1",33,0)
 I '$D(SRTECH) S (SRTECH,SRTRAUMA,SRINTUB)=""
"RTN","SROATM1",34,0)
 S SHEMP=SHEMP_$J(SRTECH,1)_$J($E(SRASA,2),1)_$J(SRINTUB,1)_" "
"RTN","SROATM1",35,0)
 S NYUK=$P(SRA(206),"^"),SHEMP=SHEMP_$J(NYUK,4),NYUK=$P(SRA(206),"^",2),SHEMP=SHEMP_$J(NYUK,4)
"RTN","SROATM1",36,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  3",SRACNT=SRACNT+1
"RTN","SROATM1",37,0)
 D ^SROATM2
"RTN","SROATM1",38,0)
 Q
"RTN","SROATM1",39,0)
ONE S MOE=$S(NYUK="NS":"S",NYUK="":" ",1:NYUK)
"RTN","SROATM1",40,0)
 Q
"RTN","SROATM2")
0^48^B33815043^B33905156
"RTN","SROATM2",1,0)
SROATM2 ;BIR/MAM - NON CARDIAC TRANSMISSION (CONT) ;02/28/07
"RTN","SROATM2",2,0)
 ;;3.0; Surgery ;**38,39,45,47,57,60,62,68,81,88,97,129,125,142,153,160**;24 Jun 93;Build 7
"RTN","SROATM2",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM2",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM2",5,0)
 ;**         are prohibited.
"RTN","SROATM2",6,0)
 ;
"RTN","SROATM2",7,0)
 K SRA F I=.2,.3,1.1,200.1,201:1:208,208.1,202.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM2",8,0)
 S SRA("CON")=$P($G(^SRF(SRTN,"CON")),"^") I SRA("CON"),$P($G(^SRF(SRA("CON"),30)),"^")!($P($G(^SRF(SRA("CON"),31)),"^",8)) S SRA("CON")=""
"RTN","SROATM2",9,0)
 D RS
"RTN","SROATM2",10,0)
 S SHEMP=SHEMP_$J($E($P(SRA(.2),"^",2),1,12),12)_$J($E($P(SRA(.2),"^",3),1,12),12)_$J(SRATT,2)_$J($P(SRA(200.1),"^",4),2)_$J($P($G(^SRF(SRTN,200)),"^",54),2)
"RTN","SROATM2",11,0)
 S SRICD=$P($G(^SRO(136,SRTN,0)),"^",3) S:SRICD SRICD=$P(^ICD9(SRICD,0),"^") S SHEMP=SHEMP_$J(SRICD,6)_$J($P(SRA(205),"^"),4)_"        "
"RTN","SROATM2",12,0)
 S NYUK="N",SRET=0 F  S SRET=$O(^SRF(SRTN,29,SRET)) Q:'SRET  S CASE=$P(^SRF(SRTN,29,SRET,0),"^") I $P($G(^SRF(CASE,.2)),"^",10) S NYUK="Y" Q
"RTN","SROATM2",13,0)
 S SHEMP=SHEMP_NYUK_$J($P($G(^SRF(SRTN,.4)),"^",7),1)_$J($E($P($G(^SRF(SRTN,0)),"^",12)),1)_$J($P($G(^SRF(SRTN,0)),"^",3),1)
"RTN","SROATM2",14,0)
 S (SRADMIT,SRADMT)=0 I $P($G(^SRF(SRTN,0)),"^",12)="O" D ADM^SROQ0A S SRADMIT=$S(SRADMT=0:"0",1:"1")
"RTN","SROATM2",15,0)
 S SHEMP=SHEMP_" "_SRADMIT D OCC^SROATMNO S SHEMP=SHEMP_SRTMP_$J(SROCTYPE,1)_$J(SROC(35),2)_$J(SROC(36),2)
"RTN","SROATM2",16,0)
 S NYUK=$E($P(VADM(3),"^"),1,7),SHEMP=SHEMP_$J(NYUK,7) ; date of birth
"RTN","SROATM2",17,0)
 S SHEMP=SHEMP_$J(SROC(38),2) K SROC,SROCTYPE,SRTMP
"RTN","SROATM2",18,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  4",SRACNT=SRACNT+1
"RTN","SROATM2",19,0)
 F MOE=1:1:6 S CPT(MOE)=""
"RTN","SROATM2",20,0)
 S (X,CNT)=0 F  S X=$O(^SRF(SRTN,29,X)) Q:'X!(CNT=6)  I $P(^SRF(SRTN,29,X,0),"^",3)="R" S NYUK=$P(^SRF(SRTN,29,X,0),"^") D RETURN
"RTN","SROATM2",21,0)
 S SHEMP=SHEMP_$J(CNT,2)
"RTN","SROATM2",22,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)
"RTN","SROATM2",23,0)
 F MOE=1:1:6 S CPT(MOE)=""
"RTN","SROATM2",24,0)
 S (X,CNT)=0 F  S X=$O(^SRF(SRTN,29,X)) Q:'X!(CNT=6)  I $P(^SRF(SRTN,29,X,0),"^",3)'="R" S NYUK=$P(^SRF(SRTN,29,X,0),"^") D RETURN
"RTN","SROATM2",25,0)
 S SHEMP=SHEMP_$J(CNT,2)
"RTN","SROATM2",26,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)
"RTN","SROATM2",27,0)
 S SRSDATE=$P(^SRF(SRTN,0),"^",9) K SRSEP D OCC^SROAUTL0 S:'$D(SRO) SRO="",$P(SRO," ",198)="" S SHEMP=SHEMP_$E(SRO,1,112)
"RTN","SROATM2",28,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  5",SRACNT=SRACNT+1
"RTN","SROATM2",29,0)
 S NYUK=$P(SRA(205),"^",6) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",7) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",8) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",10) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM2",30,0)
 S NYUK="N" I $P(SRA(205),"^",11)="Y"!($P(SRA(205),"^",28)="Y") S NYUK="Y"
"RTN","SROATM2",31,0)
 D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",12) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",13) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(29)),U)
"RTN","SROATM2",32,0)
 D IFELSE
"RTN","SROATM2",33,0)
 S NYUK=$P(SRA(205),"^",16) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",17) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",18) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(31)),U)
"RTN","SROATM2",34,0)
 D IFELSE
"RTN","SROATM2",35,0)
 S NYUK="N",SRCVA=$P(SRA(205),"^",21),SRST=$P(SRA(208),"^",8) I SRCVA="Y"!(SRST="Y") S NYUK="Y"
"RTN","SROATM2",36,0)
 D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",22) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",23) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(30)),U)
"RTN","SROATM2",37,0)
 D IFELSE
"RTN","SROATM2",38,0)
 S NYUK=$P(SRA(205),"^",26) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",27) D ONE S SHEMP=SHEMP_MOE_" " S NYUK=$P($G(SROOC(32)),U)
"RTN","SROATM2",39,0)
 D IFELSE
"RTN","SROATM2",40,0)
 S NYUK=$P(SRA(205),"^",31) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",32) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",33) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",34) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM2",41,0)
 S NYUK=$P(SRA(205),"^",35) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(21)),U) D IFELSE
"RTN","SROATM2",42,0)
 S SHEMP=SHEMP_$E(SRO,113,196),NYUK=$P(SRA(205),"^",37) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(36)),U) D IFELSE
"RTN","SROATM2",43,0)
 S SHEMP=SHEMP_$J($E(SRO,204),1)
"RTN","SROATM2",44,0)
 S NYUK=$P(SRA(205),"^",39) D ONE S SHEMP=SHEMP_MOE_$E(SRO,197,203)
"RTN","SROATM2",45,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  6",SRACNT=SRACNT+1
"RTN","SROATM2",46,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^"),5)_$J($P(SRA(202),"^"),7)_$J($P(SRA(201),"^",8),4)_$J($P(SRA(202),"^",8),7)_$J($P(SRA(201),"^",9),5)_$J($P(SRA(202),"^",9),7)_$J($P(SRA(201),"^",5),5)_$J($P(SRA(202),"^",5),7)
"RTN","SROATM2",47,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",4),4)_$J($P(SRA(202),"^",4),7)
"RTN","SROATM2",48,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",27),5)_$J($P(SRA(202),"^",27),7)
"RTN","SROATM2",49,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",15),5)_$J($P(SRA(204),"^",15),7)
"RTN","SROATM2",50,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  7",SRACNT=SRACNT+1
"RTN","SROATM2",51,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",14),1,12),12)_"  "_$J($P($G(SRA(208)),"^",11),2)_$J($P($G(SRA(208)),"^",10),2)_$J($E($P($G(SRA(208)),"^",9),1,4),4)
"RTN","SROATM2",52,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",15),1,12),12)_"    "_$J($P($G(SRA(206)),"^",3),2)_$J($P($G(SRA(206)),"^",4),2)_$J($P($G(SRA(206)),"^",8),2)_"  "
"RTN","SROATM2",53,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",16),1,12),12)_$J($E($P(SRA(208),"^",17),1,12),12)_$J($E($P(SRA(.2),"^",12),1,12),12)_$J($E($P(SRA(.2),"^"),1,12),12)
"RTN","SROATM2",54,0)
 S SHEMP=SHEMP_$J($E($P(SRA(1.1),"^",8),1,12),12)_$J($E($P(SRA(208.1),"^"),1,12),12)_$J($E($P(SRA(208.1),"^",2),1,12),12)_$J($E($P(SRA(208.1),"^",3),1,3),3)_$J(SRA("CON"),10)_$J($E($P(SRA(.2),"^",4),1,12),12)
"RTN","SROATM2",55,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  8",SRACNT=SRACNT+1
"RTN","SROATM2",56,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",11),5)_$J($P(SRA(202),"^",11),7)_$J($P(SRA(201),"^",12),5)_$J($P(SRA(202),"^",12),7)_$J($P(SRA(201),"^",13),4)_$J($P(SRA(202),"^",13),7)_$J($P(SRA(201),"^",14),4)_$J($P(SRA(202),"^",14),7)
"RTN","SROATM2",57,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",15),5)_$J($P(SRA(202),"^",15),7)
"RTN","SROATM2",58,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",28),6)_$J($P(SRA(202.1),"^"),7)
"RTN","SROATM2",59,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  9",SRACNT=SRACNT+1
"RTN","SROATM2",60,0)
 D ^SROATM3
"RTN","SROATM2",61,0)
 Q
"RTN","SROATM2",62,0)
ONE S MOE=$S(NYUK="NS":"S",NYUK="":" ",1:NYUK)
"RTN","SROATM2",63,0)
 Q
"RTN","SROATM2",64,0)
IFELSE I NYUK["NO ICD9" S SHEMP=SHEMP_$J(" ",6)
"RTN","SROATM2",65,0)
 E  S SHEMP=SHEMP_$J(NYUK,6)
"RTN","SROATM2",66,0)
 Q
"RTN","SROATM2",67,0)
RS ; resident supervision (attending code)
"RTN","SROATM2",68,0)
 N SRSR,SRX S (SRATT,SRSR)="",SRX=$G(^SRF(SRTN,.1)) D SRES
"RTN","SROATM2",69,0)
 S SRATT=$P(SRX,"^",10) I SRATT="" D
"RTN","SROATM2",70,0)
 .I SRSR=0 S SRATT=$S($P(^SRF(SRTN,0),"^",9)<3040401:1,1:9) Q
"RTN","SROATM2",71,0)
 .S SRATT=99
"RTN","SROATM2",72,0)
 Q
"RTN","SROATM2",73,0)
SRES ; does site have residents?
"RTN","SROATM2",74,0)
 N SRDIV,SRSITE,Y S SRDIV=$P($G(^SRF(SRTN,8)),"^") I SRDIV S SRSITE=$O(^SRO(133,"B",SRDIV,0)),SRSR=$P(^SRO(133,SRSITE,0),"^",19)
"RTN","SROATM2",75,0)
 Q
"RTN","SROATM2",76,0)
RETURN ; CPT of Returns
"RTN","SROATM2",77,0)
 S Y=$P($G(^SRO(136,NYUK,0)),"^",2) I Y S CNT=CNT+1,CPT(CNT)=$P($$CPT^ICPTCOD(Y),"^",2)
"RTN","SROATM2",78,0)
 Q
"RTN","SROATMNO")
0^52^B27561878^B26731177
"RTN","SROATMNO",1,0)
SROATMNO ;BIR/MAM - TRANSMIT NO ASSESSMENT ;05/10/07
"RTN","SROATMNO",2,0)
 ;;3.0; Surgery ;**27,38,47,62,68,79,83,81,88,93,95,97,129,125,142,153,160**;24 Jun 93;Build 7
"RTN","SROATMNO",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATMNO",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATMNO",5,0)
 ;**         are prohibited.
"RTN","SROATMNO",6,0)
 ;
"RTN","SROATMNO",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROATMNO",8,0)
 ;
"RTN","SROATMNO",9,0)
 N SR10SP,SRINTUB,SR95PO,SRLO,SRPID,TDATE K ^TMP("SRA",$J) S SRATOT=0,SRASITE=+$P($$SITE^SROVAR,"^",3),(SRAMNUM,SRACNT)=1
"RTN","SROATMNO",10,0)
 S Z=$E(DT,1,3)-1,SRLO=Z_"0214"
"RTN","SROATMNO",11,0)
 S TDATE=0 F  S TDATE=$O(^SRF("AQ",TDATE)) Q:TDATE=""  I DT'<TDATE S SRTN=0 F  S SRTN=$O(^SRF("AQ",TDATE,SRTN)) Q:'SRTN  D SET
"RTN","SROATMNO",12,0)
 S SRATOTM=SRAMNUM D ^SROATM4
"RTN","SROATMNO",13,0)
 Q
"RTN","SROATMNO",14,0)
SET I $P($G(^SRF(SRTN,.4)),"^",2)="T"!(TDATE<SRLO) K ^SRF("AQ",TDATE,SRTN) Q
"RTN","SROATMNO",15,0)
 I $P($G(^SRF(SRTN,30)),"^")!$P($G(^SRF(SRTN,31)),"^",8)!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y") K ^SRF("AQ",TDATE,SRTN) S $P(^SRF(SRTN,.4),"^",2)="" Q
"RTN","SROATMNO",16,0)
 I $P($G(^SRF(SRTN,"RA")),"^",6)="Y",$P($G(^SRF(SRTN,"RA")),"^",2)="N" K ^SRF("AQ",TDATE,SRTN) Q
"RTN","SROATMNO",17,0)
 S SR10SP="          " K DA,DIE,DR S DA=SRTN,DIE=130,DR="905///R" D ^DIE K DR,DA,DIE
"RTN","SROATMNO",18,0)
 S SRA(0)=^SRF(SRTN,0),DATE=$E($P(SRA(0),"^",9),1,7),SPEC=$P(SRA(0),"^",4) S:SPEC SPEC=$P(^DIC(45.3,$P(^SRO(137.45,SPEC,0),"^",2),0),"^")
"RTN","SROATMNO",19,0)
 S EMERG=$P(SRA(0),"^",10),EMERG=$S(EMERG="EM":"Y",1:"N")
"RTN","SROATMNO",20,0)
 K SRTECH,SRZ S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROATMNO",21,0)
 I $D(SRTECH) S SRINTUB=$P($G(^SRF(SRTN,6,SRT,8)),"^",2)
"RTN","SROATMNO",22,0)
 I '$D(SRTECH) S (SRTECH,SRINTUB)=""
"RTN","SROATMNO",23,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2),SRPMOD="" I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2) D
"RTN","SROATMNO",24,0)
 .S SRM=0,SRCNT=1 F  S SRM=$O(^SRO(136,SRTN,1,SRM)) Q:'SRM  D  Q:SRCNT>5
"RTN","SROATMNO",25,0)
 ..S X=$P(^SRO(136,SRTN,1,SRM,0),"^") I X S Y=$P($$MOD^ICPTMOD(X,"I"),"^",2),SRPMOD=SRPMOD_Y,SRCNT=SRCNT+1
"RTN","SROATMNO",26,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRDOB=$E($P(VADM(3),"^"),1,7),SRDEATH=$P(VADM(6),U)
"RTN","SROATMNO",27,0)
 S SRPID=VA("PID"),SRPID=$TR(SRPID,"-","") ; remove hyphens from PID
"RTN","SROATMNO",28,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE)
"RTN","SROATMNO",29,0)
 D RS^SROATM2
"RTN","SROATMNO",30,0)
 S SRMAJMIN=$E($P($G(^SRF(SRTN,0)),U,3),1)
"RTN","SROATMNO",31,0)
 S SRDTHUR=$E($P($G(^SRF(SRTN,.4)),U,7),1)
"RTN","SROATMNO",32,0)
 S SRSTATUS=$E($P($G(^SRF(SRTN,0)),U,12),1) I SRSTATUS'="I"&(SRSTATUS'="O") S VAIP("D")=$P(SRA(0),"^",9) D IN5^VADPT S SRSTATUS=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROATMNO",33,0)
 S SRAGE="" I $P(VADM(3),"^") S SRAGE=$E(DATE,1,3)-$E($P(VADM(3),"^"),1,3)-($E(DATE,4,7)<$E($P(VADM(3),"^"),4,7))
"RTN","SROATMNO",34,0)
 S SRASA="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($P($G(^SRO(132.8,Y,0)),"^"),"-"),SRASA=$E(X,1,2)
"RTN","SROATMNO",35,0)
 ; Admission wi 14 days following outpatient surgery due to an Occurrence 
"RTN","SROATMNO",36,0)
 S (SRADMIT,SRADMT)=0 I SRSTATUS="O" D ADM^SROQ0A S SRADMIT=$S(SRADMT=0:"0",1:"1")
"RTN","SROATMNO",37,0)
 S EXC=$P($G(^SRF(SRTN,"RA")),"^",7),SRWOUND=$P($G(^SRF(SRTN,"1.0")),"^",8)
"RTN","SROATMNO",38,0)
 D OCC
"RTN","SROATMNO",39,0)
 S SRNODE="  X" S:$P($G(^SRF(SRTN,"RA")),U,6)="N" SRNODE="  *" S:$P($G(^SRF(SRTN,"RA")),U,2)="C" SRNODE="  C"
"RTN","SROATMNO",40,0)
 S SRTEMP="/"_$J(SRASITE,3)_$J(SRTN,7)_SRNODE_DATE_$J(SRTECH,3)_$J(EMERG,1)_$J(SPEC,3)_$J(CPT,5)_$J(EXC,1)_$J(SRPID,20)_$J(SRDIV,6)_" "
"RTN","SROATMNO",41,0)
 S SRTEMP=SRTEMP_$J(SRMAJMIN,1)_$J($E(SRDEATH,1,7),7)_$J(SRDTHUR,1)_$J(SRSTATUS,1)_$J(SRAGE,3)_$J(SRASA,2)_$J(SRADMIT,1)_SRTMP
"RTN","SROATMNO",42,0)
 K CPT,SRMOD F SRZ=1:1:10 S (CPT(SRZ),SRMOD(SRZ))=""
"RTN","SROATMNO",43,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D MOD
"RTN","SROATMNO",44,0)
 S SRCC=$P($G(^SRF(SRTN,"CON")),"^"),SRBLANK="          "
"RTN","SROATMNO",45,0)
 I SRCC,$P($G(^SRF(SRCC,30)),"^")!($P($G(^SRF(SRCC,31)),"^",8)) S SRCC=""
"RTN","SROATMNO",46,0)
 S SRTEMP=SRTEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)_$J(SRWOUND,2)_$J(SROCTYPE,1)_SRBLANK_$J(SRCC,10)_$J(SRDEATH,12)
"RTN","SROATMNO",47,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SRTEMP,SRACNT=SRACNT+1
"RTN","SROATMNO",48,0)
 S SRICD=$P($G(^SRO(136,SRTN,0)),"^",3) S:SRICD SRICD=$P(^ICD9(SRICD,0),"^")
"RTN","SROATMNO",49,0)
 S SRA(.2)=$G(^SRF(SRTN,.2))
"RTN","SROATMNO",50,0)
 S SRTEMP="/"_$J(SRASITE,3)_$J(SRTN,7)_"  B"_$J($E($P(SRA(.2),"^"),1,12),12)_$J($E($P(SRA(.2),"^",4),1,12),12)_$E(SRPMOD_SR10SP,1,10)
"RTN","SROATMNO",51,0)
 F I=1:1:10 S SRTEMP=SRTEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATMNO",52,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SRTEMP_$J(SRINTUB,1)_SR95PO_$J(SRATT,2)_$J(SRDOB,7)_$J(SRICD,6)_$J(SROC(38),2),SRACNT=SRACNT+1
"RTN","SROATMNO",53,0)
 I SRACNT>100 S SRACNT=1,SRAMNUM=SRAMNUM+1
"RTN","SROATMNO",54,0)
 S SRATOT=SRATOT+1
"RTN","SROATMNO",55,0)
 S X=$E($P(^SRF(SRTN,0),"^",9),1,5)_"00",^TMP("SRWL",$J,X)=""
"RTN","SROATMNO",56,0)
 K DATE,ANES,EMERG,EXC,SPEC,SRADMIT,SRADMT,SRATT,SRBLANK,SRCC,SRDIV,SRDOB,SRDTHUR,SRICD,SRIO,SRMAJMIN,SROCTYPE,SRTEMP,SRTMP,SRWOUND,SRZ,SR14,CPT
"RTN","SROATMNO",57,0)
 Q
"RTN","SROATMNO",58,0)
OCC ; total of each occurrence by category
"RTN","SROATMNO",59,0)
 N SRIOFLAG,SRPOFLAG
"RTN","SROATMNO",60,0)
 F SRK=1:1:38 S SROC(SRK)=""
"RTN","SROATMNO",61,0)
 S (SRPO,SRIOFLAG)=0 F  S SRPO=$O(^SRF(SRTN,10,SRPO)) Q:'SRPO  S SRSUB=$P(^SRF(SRTN,10,SRPO,0),U,2) I SRSUB'="" D
"RTN","SROATMNO",62,0)
 .S SROC(SRSUB)=SROC(SRSUB)+1,SRIOFLAG=1
"RTN","SROATMNO",63,0)
 S (SRPO,SRPOFLAG)=0 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  S SRSUB=$P(^SRF(SRTN,16,SRPO,0),U,2) I SRSUB'="" D
"RTN","SROATMNO",64,0)
 .S SROC(SRSUB)=SROC(SRSUB)+1,SRPOFLAG=1
"RTN","SROATMNO",65,0)
 S (SROCTYPE,SRTMP)="" F SRK=1:1:10 S SRTMP=SRTMP_$J(SROC(SRK),2)
"RTN","SROATMNO",66,0)
 S SRTMP=SRTMP_$J(SROC(37),2) F SRK=12:1:32 S SRTMP=SRTMP_$J(SROC(SRK),2)
"RTN","SROATMNO",67,0)
 S SR95PO=$J(SROC(33),2)_$J(SROC(34),2)_$J(SROC(35),2)_$J(SROC(36),2)
"RTN","SROATMNO",68,0)
 I SRIOFLAG=1,(SRPOFLAG=0) S SROCTYPE="I"
"RTN","SROATMNO",69,0)
 I SRIOFLAG=0,(SRPOFLAG=1) S SROCTYPE="P"
"RTN","SROATMNO",70,0)
 I SRIOFLAG=1,(SRPOFLAG=1) S SROCTYPE="B"
"RTN","SROATMNO",71,0)
 I SRIOFLAG=0,(SRPOFLAG=0) S SROCTYPE=""
"RTN","SROATMNO",72,0)
 Q
"RTN","SROATMNO",73,0)
MOD N SRM S SRM=0,SRCNT=1 F  S SRM=$O(^SRO(136,SRTN,3,OPS,1,SRM)) Q:'SRM  D  Q:SRCNT>5
"RTN","SROATMNO",74,0)
 .S X=$P(^SRO(136,SRTN,3,OPS,1,SRM,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATMNO",75,0)
 .I Y'="" S SRMOD(CNT)=SRMOD(CNT)_Y,SRCNT=SRCNT+1
"RTN","SROATMNO",76,0)
 Q
"RTN","SROAUTL")
0^58^B41379689^B40591108
"RTN","SROAUTL",1,0)
SROAUTL ;BIR/ADM - RISK ASSESSMENT UTILITY ;02/14/07
"RTN","SROAUTL",2,0)
 ;;3.0; Surgery ;**38,46,47,63,81,88,95,112,100,125,134,142,153,160**;24 Jun 93;Build 7
"RTN","SROAUTL",3,0)
 I $G(SRSUPCPT)=2 G NCODE
"RTN","SROAUTL",4,0)
 N SRCMOD,SRCOMMA,X K SRHDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRHDR=VADM(1)_" ("_VA("PID")_")      Case #"_SRTN
"RTN","SROAUTL",5,0)
 S Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROAUTL",6,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^"),Y=$P(X,"^",2),SRCPT=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"CPT MISSING") I SRCPT,$O(^SRF(SRTN,"OPMOD",0)) D
"RTN","SROAUTL",7,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=SRCPT_"-" F  S SRI=$O(^SRF(SRTN,"OPMOD",SRI)) Q:'SRI  D
"RTN","SROAUTL",8,0)
 ..S SRM=$P(^SRF(SRTN,"OPMOD",SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROAUTL",9,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROAUTL",10,0)
 S SRCPT=$S($G(SRSUPCPT)=1:"",1:"("_SRCPT_")")
"RTN","SROAUTL",11,0)
 S SROPER=SROPER_" "_SRCPT D LOOP S SRHDR(1)=SRSDATE_"   "_SRHDR(1)
"RTN","SROAUTL",12,0)
 Q
"RTN","SROAUTL",13,0)
NCODE N SRCMOD,SRCOMMA,X K SRHDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRHDR=VADM(1)_" ("_VA("PID")_")        Case #"_SRTN
"RTN","SROAUTL",14,0)
 S Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROAUTL",15,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^"),Y=$P($G(^SRO(136,SRTN,0)),"^",2),SRCPT=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"CPT MISSING") I SRCPT,$O(^SRO(136,SRTN,1,0)) D
"RTN","SROAUTL",16,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=SRCPT_"-" F  S SRI=$O(^SRO(136,SRTN,1,SRI)) Q:'SRI  D
"RTN","SROAUTL",17,0)
 ..S SRM=$P(^SRO(136,SRTN,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROAUTL",18,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROAUTL",19,0)
 S SRCPT="(CPT Code: "_SRCPT_")"
"RTN","SROAUTL",20,0)
 S SROPER=SROPER_" "_SRCPT D LOOP S SRHDR(1)=SRSDATE_"   "_SRHDR(1)
"RTN","SROAUTL",21,0)
 Q
"RTN","SROAUTL",22,0)
LOOP I $L(SROPER)<68 S SRHDR(1)=SROPER Q
"RTN","SROAUTL",23,0)
 I $L(SROPER)>67 S X=SROPER,K=1 F  D  I $L(X)<68 S SRHDR(K)=X Q
"RTN","SROAUTL",24,0)
 .F I=0:1:66 S J=67-I,Y=$E(X,J) I Y=" " S SRHDR(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROAUTL",25,0)
 Q
"RTN","SROAUTL",26,0)
HDR ; print screen header
"RTN","SROAUTL",27,0)
 W @IOF,!,SRHDR W:$G(SRPAGE)'="" ?(79-$L(SRPAGE)),SRPAGE
"RTN","SROAUTL",28,0)
 S I=0 F  S I=$O(SRHDR(I)) Q:'I  W !,SRHDR(I) I I=.5,$L($G(SRCSTAT)) W ?(79-$L(SRCSTAT)),SRCSTAT
"RTN","SROAUTL",29,0)
 W:$D(SRCSTAT)&'$D(SRHDR(.5)) !,SRCSTAT
"RTN","SROAUTL",30,0)
 K SRHDR(.5),SRCSTAT,SRPAGE W ! F I=1:1:80 W "-"
"RTN","SROAUTL",31,0)
 W !
"RTN","SROAUTL",32,0)
 Q
"RTN","SROAUTL",33,0)
FUNCT() ; called by screen on functional health status field (#240)
"RTN","SROAUTL",34,0)
 N SRSCR S SRSCR="I 1"
"RTN","SROAUTL",35,0)
 I $$CARD S SRSCR="I Y'=4"
"RTN","SROAUTL",36,0)
 Q SRSCR
"RTN","SROAUTL",37,0)
CARD() ; is this a cardiac assessed case?
"RTN","SROAUTL",38,0)
 N SRX S SRX=$S($D(SRTN):SRTN,$D(DA):DA,1:"") I 'SRX Q 0
"RTN","SROAUTL",39,0)
 I $P($G(^SRF(SRX,"RA")),"^",2)="C" Q 1
"RTN","SROAUTL",40,0)
 Q 0
"RTN","SROAUTL",41,0)
NC ; called from input transform to kill X if case is cardiac assessed
"RTN","SROAUTL",42,0)
 I $$CARD,X="NA"!(X="NS") K X
"RTN","SROAUTL",43,0)
 Q
"RTN","SROAUTL",44,0)
DATE ; called by output transmform on several date fields
"RTN","SROAUTL",45,0)
 I $D(Y),Y="NA"!(Y="NS") Q
"RTN","SROAUTL",46,0)
 N SRY S SRY=Y D DD^%DT
"RTN","SROAUTL",47,0)
 Q
"RTN","SROAUTL",48,0)
INDX ; set airway index
"RTN","SROAUTL",49,0)
 S SRY=$S(SRI>4:5,SRI>3:4,SRI>2:3,SRI>0:2,1:1),$P(^SRF(DA,.3),"^",9)=SRY
"RTN","SROAUTL",50,0)
 K SRI,SRMS,SROP,SRY
"RTN","SROAUTL",51,0)
 Q
"RTN","SROAUTL",52,0)
OP ; set logic for AOP cross reference on Oral-Pharyngeal field (901.1)
"RTN","SROAUTL",53,0)
 N SRI,SRMS,SRY S SRMS=$P(^SRF(DA,.3),"^",12) I SRMS'="" S SRMS=SRMS*.1,SRI=2.5*X-SRMS D INDX
"RTN","SROAUTL",54,0)
 Q
"RTN","SROAUTL",55,0)
MS ; set logic for AMS cross reference on Mandibular Space field (901.2)
"RTN","SROAUTL",56,0)
 N SRI,SRY,SRMS,SROP S SROP=$P(^SRF(DA,.3),"^",11) I SROP'="" S SRMS=X*.1,SRI=2.5*SROP-SRMS D INDX
"RTN","SROAUTL",57,0)
 Q
"RTN","SROAUTL",58,0)
K901 ; kill logic for AOP and AMS cross references
"RTN","SROAUTL",59,0)
 S $P(^SRF(DA,.3),"^",9)=""
"RTN","SROAUTL",60,0)
 Q
"RTN","SROAUTL",61,0)
DUP ; duplicate preop information from prior operation within 60 days
"RTN","SROAUTL",62,0)
 S SR200=$G(^SRF(SRTN,200)) S NOGO="" F I=1,9,13,18,30,37,44 S X=$P(SR200,"^",I) I X'="" S NOGO=1 K SR200 Q
"RTN","SROAUTL",63,0)
 S X=$P($G(^SRF(SRTN,200.1)),"^") I X'="" S NOGO=1
"RTN","SROAUTL",64,0)
 I NOGO K NOGO Q
"RTN","SROAUTL",65,0)
 K SRCASE S SR=^SRF(SRTN,0),DFN=$P(SR,"^"),(SRSDATE,X1)=$P(SR,"^",9),X2=-60 D C^%DTC S SRENDT=X,SRCASE=0 F  S SRCASE=$O(^SRF("B",DFN,SRCASE)) Q:'SRCASE  I SRCASE,SRCASE'=SRTN D
"RTN","SROAUTL",66,0)
 .S SRX=$P(^SRF(SRCASE,0),"^",9) I SRX>SRSDATE!(SRX<SRENDT) Q
"RTN","SROAUTL",67,0)
 .Q:$P($G(^SRF(SRCASE,"NON")),"^")="Y"!$P($G(^SRF(SRCASE,30)),"^")!$P($G(^SRF(SRCASE,31)),"^",8)!($P($G(^SRF(SRCASE,"CON")),"^")=SRTN)!'$P($G(^SRF(SRCASE,.2)),"^",12)
"RTN","SROAUTL",68,0)
 .S SRX=9999999-SRX,SRCASE(SRX,SRCASE)=""
"RTN","SROAUTL",69,0)
 K SRDT S (SRX,Y)=0 F  S SRX=$O(SRCASE(SRX)) Q:'SRX!$D(SRDT)  S SRCASE="" F  S SRCASE=$O(SRCASE(SRX,SRCASE)) Q:'SRCASE  S SR=$G(^SRF(SRCASE,"RA")) I $P(SR,"^",2)="N",$P(SR,"^",6)="Y" D  Q
"RTN","SROAUTL",70,0)
 .S Y=$P(^SRF(SRCASE,0),"^",9) X ^DD("DD") S SRDT=Y K DIR
"RTN","SROAUTL",71,0)
 .W !! S DIR("A",1)="This patient had a previous non-cardiac operation on "_SRDT_".",DIR("A",2)="",DIR("A",3)="Case #"_SRCASE_"  "_$P(^SRF(SRCASE,"OP"),"^")
"RTN","SROAUTL",72,0)
 .S DIR("A",4)="",DIR("A",5)="Do you want to duplicate the preoperative information from the earlier",DIR("A")="assessment in this assessment? "
"RTN","SROAUTL",73,0)
 .S DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAUTL",74,0)
 .D:Y STUFF
"RTN","SROAUTL",75,0)
 Q
"RTN","SROAUTL",76,0)
STUFF ; stuff preop information from previous case
"RTN","SROAUTL",77,0)
 I $$LOCK^SROUTL(SRCASE) D  D UNLOCK^SROUTL(SRCASE)
"RTN","SROAUTL",78,0)
 .K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRCASE,DIQ="SRY",DIQ(0)="I" D PREHD D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAUTL",79,0)
 .S SRZ=0 F  S SRZ=$O(SRY(130,SRCASE,SRZ)) Q:'SRZ  S DIE=130,DA=SRTN,DR=SRZ_"////"_SRY(130,SRCASE,SRZ,"I") D ^DIE K DA,DIE,DR
"RTN","SROAUTL",80,0)
 Q
"RTN","SROAUTL",81,0)
CHK ; check for missing non-cardiac assessment data items
"RTN","SROAUTL",82,0)
 N SRSEP K SRX
"RTN","SROAUTL",83,0)
 F SRC="PREOP","DEM" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL1
"RTN","SROAUTL",84,0)
 F SRC="LAB","REM" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL2
"RTN","SROAUTL",85,0)
OTH K DA,DIC,DIQ,DR,SRY,SRZ D TECH^SROPRIN I SRTECH="NOT ENTERED" S SRX("ANESTHESIA TECHNIQUE")="Anesthesia Technique"
"RTN","SROAUTL",86,0)
 ;D RELATE^SROAUTL2
"RTN","SROAUTL",87,0)
OCC D EN^SROCCAT S SRSDATE=$E($P(^SRF(SRTN,0),"^",9),1,7) K ^TMP("SROCC",$J),SRO
"RTN","SROAUTL",88,0)
 S SRPO=0 F  S SRPO=$O(^SRF(SRTN,10,SRPO)) Q:'SRPO  S ^TMP("SROCC",$J,$P(^SRF(SRTN,10,SRPO,0),"^",2),SRSDATE)=""
"RTN","SROAUTL",89,0)
 S SRPO=0 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  S SRDATE=$E($P(^SRF(SRTN,16,SRPO,0),"^",7),1,7) D
"RTN","SROAUTL",90,0)
 .S SRSEP=$P(^SRF(SRTN,16,SRPO,0),"^",4)
"RTN","SROAUTL",91,0)
 .I '$G(SRDATE) S SRDATE="NO DATE"
"RTN","SROAUTL",92,0)
 .S ^TMP("SROCC",$J,$P(^SRF(SRTN,16,SRPO,0),"^",2),SRDATE)=SRSEP
"RTN","SROAUTL",93,0)
 I '$D(^TMP("SROCC",$J)) D OCCEND Q
"RTN","SROAUTL",94,0)
 S SRPO=0 F  S SRPO=$O(^TMP("SROCC",$J,SRPO)) Q:'SRPO  S SRDATE="" F  S SRDATE=$O(^TMP("SROCC",$J,SRPO,SRDATE)) Q:SRDATE  S SRX("POSTOP OCCURRENCE DATE"_SRPO)="Date Noted on "_$P(^SRO(136.5,SRPO,0),"^")_" (Postop Occurrence)" Q
"RTN","SROAUTL",95,0)
 S SRDATE="",SRDATE=$O(^TMP("SROCC",$J,3,SRDATE)) Q:SRDATE=""  I ^TMP("SROCC",$J,3,SRDATE)="" S SRX("SEPSIS CATEGORY")="SEPSIS CATEGORY on SYSTEMIC SEPSIS (Postop Occurrence)"
"RTN","SROAUTL",96,0)
OCCEND K ^TMP("SROCC",$J)
"RTN","SROAUTL",97,0)
 Q
"RTN","SROAUTL",98,0)
PREOP S DR="236;237;346;202;202.1;246;325;238;240;492;204;203;326;212;213;396;394;220;266;395;208;329;330;328;211;332;333;398;399;400;334;335;336;401;338;218;339;215;216;217;338.1;338.2;218.1;269"
"RTN","SROAUTL",99,0)
 Q
"RTN","SROAUTL",100,0)
DEM S DR="413;.011;247;418;419;420;421;452;453;454;342"
"RTN","SROAUTL",101,0)
 Q
"RTN","SROAUTL",102,0)
LAB S DR="270;304;224;291;223;290;225;292;228;295;227;294;229;296;230;297;234;301;231;298;233;300;232;299;487;487.1;274;305;405;407;275;306;406;408;277;308;278;309;279;310;280;311;281;312;283;314;455;455.1;456;456.1;444;444.1;445;445.1"
"RTN","SROAUTL",103,0)
 Q
"RTN","SROAUTL",104,0)
REM S DR="214;.035;1.09;1.13;.22;.23;340;443;446;504;504.1"
"RTN","SROAUTL",105,0)
 Q
"RTN","SROAUTL",106,0)
PREHD D PREOP S DR=DR_";402;241;244;242;243;210;245"
"RTN","SROAUTL",107,0)
 Q
"RTN","SROAUTL0")
0^59^B18207174^B17506140
"RTN","SROAUTL0",1,0)
SROAUTL0 ;BIR/ADM,SLM - RISK ASSESSMENT UTILITY ;01/23/07
"RTN","SROAUTL0",2,0)
 ;;3.0; Surgery ;**38,47,57,60,61,63,81,125,153,160**;24 Jun 93;Build 7
"RTN","SROAUTL0",3,0)
PREOP K DR S SRQ=1,DR="325;238;240;204;203;396;332;333;338;339;215;217"
"RTN","SROAUTL0",4,0)
 Q
"RTN","SROAUTL0",5,0)
PREMD K DR S SRQ=1,DR=".011;247;413;417;418;419;420;421;452;453;454"
"RTN","SROAUTL0",6,0)
 Q
"RTN","SROAUTL0",7,0)
OPER K DR S SRQ=0,DR=".03;.04;26;27;214;.42;.035;1.09;1.13;.37;.22;.23;340;66"
"RTN","SROAUTL0",8,0)
 Q
"RTN","SROAUTL0",9,0)
LR K DR S SRQ=0,DR="225;292;228;295;224;291;234;301;230;297;227;294"
"RTN","SROAUTL0",10,0)
 Q
"RTN","SROAUTL0",11,0)
OUT1 ; man preop edit scr
"RTN","SROAUTL0",12,0)
 Q
"RTN","SROAUTL0",13,0)
LAB ; man lab edit scrn
"RTN","SROAUTL0",14,0)
 Q
"RTN","SROAUTL0",15,0)
CPTS ; put CPT codes in array for display
"RTN","SROAUTL0",16,0)
 N SRDA,K,X,XX,Y K SRPROC S K=1,Y=$P($G(^SRO(136,SRTN,0)),"^",2),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"")
"RTN","SROAUTL0",17,0)
 I $L(Y) D SSPRIN^SROCPT0
"RTN","SROAUTL0",18,0)
 S SRPROC(K)=$S($L(Y):Y,1:"NO PRIN CODE")
"RTN","SROAUTL0",19,0)
 S SRDA=0 F  S SRDA=$O(^SRO(136,SRTN,3,SRDA)) Q:'SRDA  D
"RTN","SROAUTL0",20,0)
 .S Y=$P($G(^SRO(136,SRTN,3,SRDA,0)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"")
"RTN","SROAUTL0",21,0)
 .I $L(Y) D SSOTH^SROCPT0
"RTN","SROAUTL0",22,0)
 .I $L(Y)+$L(SRPROC(K))'>SRL S SRPROC(K)=SRPROC(K)_", "_Y Q
"RTN","SROAUTL0",23,0)
 .S K=K+1,SRPROC(K)=Y
"RTN","SROAUTL0",24,0)
 I SRPROC(1)=""!(SRPROC(1)="NO PRIN CODE") S SRPROC(1)="NOT ENTERED"
"RTN","SROAUTL0",25,0)
 Q
"RTN","SROAUTL0",26,0)
DISP ; display CPT code info
"RTN","SROAUTL0",27,0)
 N SRFIRST,SRMO,SRMOD,SRCSTAT S SRPAGE="",SRCSTAT=">> Coding "_$S($P($G(^SRO(136,SRTN,10)),"^"):"",1:"Not ")_"Complete <<"
"RTN","SROAUTL0",28,0)
 D HDR^SROAUTL S SRFIRST=0,SRW="NOT ENTERED"
"RTN","SROAUTL0",29,0)
 S Y=$P($G(^SRO(136,SRTN,0)),"^",2) I Y S Y=$P($$CPT^ICPTCOD(Y),"^",2) D DES^SROCPT0
"RTN","SROAUTL0",30,0)
 W "Principal CPT Code: "_SRW I $G(SRDES(1))'="" F I=1:1 Q:$L(SRDES(I))'>1  W !,?5,SRDES(I)
"RTN","SROAUTL0",31,0)
 I $O(^SRO(136,SRTN,1,0)) W !,?3,"Modifier: " D
"RTN","SROAUTL0",32,0)
 .S SRMOD=0 F  S SRMOD=$O(^SRO(136,SRTN,1,SRMOD)) Q:'SRMOD  D
"RTN","SROAUTL0",33,0)
 ..S SRMO=$P(^SRO(136,SRTN,1,SRMOD,0),"^")
"RTN","SROAUTL0",34,0)
 ..W:SRFIRST !,?13 W $P($$MOD^ICPTMOD(SRMO,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRMO,"I"),"^",3)
"RTN","SROAUTL0",35,0)
 ..S SRFIRST=1
"RTN","SROAUTL0",36,0)
 K SRDES W !
"RTN","SROAUTL0",37,0)
OTH S SROTH=0 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  D  K SRDES W !
"RTN","SROAUTL0",38,0)
 .S Y=$P($G(^SRO(136,SRTN,3,SROTH,0)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"") D DES^SROCPT0
"RTN","SROAUTL0",39,0)
 .W !,"Other CPT Code:     "_SRW I $G(SRDES(1))'="" F I=1:1 Q:$L(SRDES(I))'>1  W !,?5,SRDES(I)
"RTN","SROAUTL0",40,0)
 .I $O(^SRO(136,SRTN,3,SROTH,1,0)) S SRFIRST=0 W !,?3,"Modifier: " D
"RTN","SROAUTL0",41,0)
 ..S SRMOD=0 F  S SRMOD=$O(^SRO(136,SRTN,3,SROTH,1,SRMOD)) Q:'SRMOD  D
"RTN","SROAUTL0",42,0)
 ...S SRMO=$P(^SRO(136,SRTN,3,SROTH,1,SRMOD,0),"^")
"RTN","SROAUTL0",43,0)
 ...W:SRFIRST !,?13 W $P($$MOD^ICPTMOD(SRMO,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRMO,"I"),"^",3)
"RTN","SROAUTL0",44,0)
 ...S SRFIRST=1
"RTN","SROAUTL0",45,0)
PRESS K DIR S DIR(0)="FOA",DIR("A")="Press ENTER to continue." D ^DIR K DIR
"RTN","SROAUTL0",46,0)
 Q
"RTN","SROAUTL0",47,0)
OCC ; occur data
"RTN","SROAUTL0",48,0)
 D EN^SROCCAT K ^TMP("SROCC",$J),SRO,SROC,SROOC
"RTN","SROAUTL0",49,0)
 F SRK=1:1:38 S SROC(SRK)="       "
"RTN","SROAUTL0",50,0)
 S (SRFLG,SRIO,SRPO)=0 F  S SRIO=$O(^SRF(SRTN,10,SRIO)) Q:'SRIO  D
"RTN","SROAUTL0",51,0)
 .S SROCC=$P(^SRF(SRTN,10,SRIO,0),U,2) Q:'SROCC
"RTN","SROAUTL0",52,0)
 .S ^TMP("SROCC",$J,SROCC,$E($P(^SRF(SRTN,0),U,9),1,7),10)=SRIO
"RTN","SROAUTL0",53,0)
 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  D
"RTN","SROAUTL0",54,0)
 .S SRDATE=$E($P(^SRF(SRTN,16,SRPO,0),U,7),1,7)
"RTN","SROAUTL0",55,0)
 .S X1=$E(SRSDATE,1,7),X2=30 D C^%DTC
"RTN","SROAUTL0",56,0)
 .I SRDATE>X Q
"RTN","SROAUTL0",57,0)
 .I '$G(SRDATE) S SRDATE="       "
"RTN","SROAUTL0",58,0)
 .S SROCC=$P(^SRF(SRTN,16,SRPO,0),U,2) Q:'SROCC
"RTN","SROAUTL0",59,0)
 .S ^TMP("SROCC",$J,SROCC,SRDATE,16)=SRPO
"RTN","SROAUTL0",60,0)
 I '$D(^TMP("SROCC",$J)) D OCCEND Q
"RTN","SROAUTL0",61,0)
 ;remove multiples
"RTN","SROAUTL0",62,0)
 S SROCC=0 F  S SROCC=$O(^TMP("SROCC",$J,SROCC)) Q:'SROCC  S SROCCDT=$O(^TMP("SROCC",$J,SROCC,0)),SRTYPE=$O(^TMP("SROCC",$J,SROCC,SROCCDT,0)) D
"RTN","SROAUTL0",63,0)
 .I SROCC=21!(SROCC>28&(SROCC<33))!(SROCC=36) D
"RTN","SROAUTL0",64,0)
 ..S SRDA=^TMP("SROCC",$J,SROCC,SROCCDT,SRTYPE),SRICD=$P(^SRF(SRTN,SRTYPE,SRDA,0),U,3)
"RTN","SROAUTL0",65,0)
 ..I SRICD S SROOC(SROCC)=$P(^ICD9(SRICD,0),U)_"^"_$P(^SRF(SRTN,SRTYPE,SRDA,0),U)
"RTN","SROAUTL0",66,0)
 ..E  S SROOC(SROCC)="NO ICD9 CODE ENTERED"
"RTN","SROAUTL0",67,0)
 .S ^TMP("SROCC",$J,"SR",SROCC,SROCCDT)=""
"RTN","SROAUTL0",68,0)
 S SRK=1,SRO="",SROCC=0 F  S SROCC=$O(^TMP("SROCC",$J,"SR",SROCC)) Q:'SROCC  S SROCCDT="" F  S SROCCDT=$O(^TMP("SROCC",$J,"SR",SROCC,SROCCDT)) Q:SROCCDT=""  D
"RTN","SROAUTL0",69,0)
 .I SROCC=3 S SRPO=^TMP("SROCC",$J,SROCC,SROCCDT,16) I SRPO S X=$P(^SRF(SRTN,16,SRPO,0),"^",4) S:X SRSEP=X
"RTN","SROAUTL0",70,0)
 .S SROC(SROCC)=SROCCDT
"RTN","SROAUTL0",71,0)
 F I=1:1:22,29:1:32,35,36,38 S SRO=SRO_$J(SROC(I),7)
"RTN","SROAUTL0",72,0)
 S X=$G(SRSEP),SRO=SRO_X I X S SRSEP=$S(X=2:"SEPSIS",X=3:"SEPTIC SHOCK",1:"SIRS")
"RTN","SROAUTL0",73,0)
OCCEND K ^TMP("SROCC",$J),SRPOCC,SRPOCCD,SRSDATE,SRTYPE,SRDATE,SRDA,SRFLG,SRICD,SRJ,SRK,SROCC,SROCCDT,SRPO,X1,X2
"RTN","SROAUTL0",74,0)
 Q
"RTN","SROAUTL1")
0^60^B18991431^B18465226
"RTN","SROAUTL1",1,0)
SROAUTL1 ;BIR/ADM - RISK ASSESSMENT UTILITY ;04/24/07
"RTN","SROAUTL1",2,0)
 ;;3.0; Surgery ;**38,47,81,125,153,160**;24 Jun 93;Build 7
"RTN","SROAUTL1",3,0)
 S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  I SRY(130,SRTN,SRZ,"I")="" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRX(SRZ)=$P(SRFLD,"^",2)
"RTN","SROAUTL1",4,0)
 Q
"RTN","SROAUTL1",5,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SROAUTL1",6,0)
 Q
"RTN","SROAUTL1",7,0)
GET S X=$T(@J)
"RTN","SROAUTL1",8,0)
 Q
"RTN","SROAUTL1",9,0)
BJH ;;208^History of Hypertension Requiring Medication (Y/N)^Hypertension Requiring Meds^
"RTN","SROAUTL1",10,0)
BAC ;;213^Esophageal Varices (Y/N)^Esophogeal Varices^
"RTN","SROAUTL1",11,0)
BBJ ;;220^Previous PCI (Y/N)^Previous PCI^
"RTN","SROAUTL1",12,0)
BFF ;;266^Previous Cardiac Surgery (Y/N)^Previous Cardiac Surgery^
"RTN","SROAUTL1",13,0)
CBI ;;329^History of Revascularization/Amputation for PVD (Y/N)^Revascularization/Amputation^
"RTN","SROAUTL1",14,0)
CCJ ;;330^Rest Pain/Gangrene (Y/N)^Rest Pain/Gangrene^
"RTN","SROAUTL1",15,0)
CID ;;394^History of MI Within Past 6 Months (Y/N)^MI Within 6 Months^
"RTN","SROAUTL1",16,0)
CIE ;;395^Angina within One Month Preceding Surgery (Y/N)^Angina Within 1 Month^
"RTN","SROAUTL1",17,0)
CIH ;;398^Quadriplegia/Tetraplegia/Quadriparesis (Y/N)^Quadriplegia^
"RTN","SROAUTL1",18,0)
CII ;;399^Paraplegia (Y/N)^Paraplegia^
"RTN","SROAUTL1",19,0)
BCF ;;236^Patient's Height^Height^
"RTN","SROAUTL1",20,0)
BCG ;;237^Patient's Weight^Weight^
"RTN","SROAUTL1",21,0)
CDF ;;346^Diabetes^Diabetes Mellitus^
"RTN","SROAUTL1",22,0)
BJB ;;202^Current Smoker within 1 Year prior to Surgery (Y/N)^Current SmokerW/I 1 Year^
"RTN","SROAUTL1",23,0)
BJBPA ;;202.1^Pack/Years^Pack/Years^
"RTN","SROAUTL1",24,0)
BDF ;;246^ETOH Greater than 2 Drinks/Day (Y/N)^ETOH > 2 Drinks/Day^
"RTN","SROAUTL1",25,0)
CBE ;;325^Dyspnea^Dyspnea^
"RTN","SROAUTL1",26,0)
BCH ;;238^DNR Status (Y/N)^DNR Status^
"RTN","SROAUTL1",27,0)
BDJ ;;240^Functional Health Status Prior to Current Illness^Pre-Illness Functional Status^
"RTN","SROAUTL1",28,0)
DIB ;;492^Functional Health Status at Evaluation for Surgery^Preop Functional Status
"RTN","SROAUTL1",29,0)
BJD ;;204^Ventilator Dependent Greater than 48 Hrs (Y/N)^Ventilator Dependent^
"RTN","SROAUTL1",30,0)
BJC ;;203^History of COPD (Y/N)^History of Severe COPD^
"RTN","SROAUTL1",31,0)
CBF ;;326^Current Pneumonia (Y/N)^Current Pneumonia^
"RTN","SROAUTL1",32,0)
BAB ;;212^Ascites (Y/N)^Ascites^
"RTN","SROAUTL1",33,0)
CIF ;;396^CHF within One Month Preceding Surgery (Y/N)^CHF Within 1 Month^
"RTN","SROAUTL1",34,0)
CBH ;;328^Acute Renal Failure (Y/N)^Acute Renal Failure^
"RTN","SROAUTL1",35,0)
BAA ;;211^Currently on Dialysis (Y/N)^Currently on Dialysis^
"RTN","SROAUTL1",36,0)
CCB ;;332^Impaired Sensorium (Y/N)^Impaired Sensorium^
"RTN","SROAUTL1",37,0)
CCC ;;333^Coma (Y/N)^Coma^
"RTN","SROAUTL1",38,0)
DJJ ;;400^Hemiplegia (Y/N)^Hemiplegia^
"RTN","SROAUTL1",39,0)
CCD ;;334^History of TIAs (Y/N)^History of TIAs^
"RTN","SROAUTL1",40,0)
CCE ;;335^CVA/Residual Neurologic Deficit (Y/N)^CVA/Residual Neuro Deficit^
"RTN","SROAUTL1",41,0)
CCF ;;336^CVA/No Neurologic Deficit (Y/N)^CVA/No Neuro Deficit^
"RTN","SROAUTL1",42,0)
DJA ;;401^Tumor Involving CNS (Y/N)^Tumor Involving CNS^
"RTN","SROAUTL1",43,0)
CCH ;;338^Disseminated Cancer (Y/N)^Disseminated Cancer^
"RTN","SROAUTL1",44,0)
BAH ;;218^Open Wound or Skin Infection (Y/N)^Open Wound or Infection^
"RTN","SROAUTL1",45,0)
CCI ;;339^Steroid Use for Chronic Condition (Y/N)^Steroid Use for Chronic Cond.^
"RTN","SROAUTL1",46,0)
BAE ;;215^Weight Loss > 10% of Usual Body Weight (Y/N)^Weight Loss > 10%^
"RTN","SROAUTL1",47,0)
BAF ;;216^History of Bleeding Disorders (Y/N)^Bleeding Disorders^
"RTN","SROAUTL1",48,0)
BAG ;;217^Transfusion Greater than 4 RBC Units this Admission (Y/N)^Transfusion > 4 RBC Units^
"RTN","SROAUTL1",49,0)
CCHPA ;;338.1^Chemotherapy Within Last 30 Days (Y/N)^Chemotherapy W/I 30 Days^
"RTN","SROAUTL1",50,0)
CCHPB ;;338.2^Radiotherapy Within Last 90 Days (Y/N)^Radiotherapy W/I 90 Days^
"RTN","SROAUTL1",51,0)
BAHPA ;;218.1^Preoperative Sepsis (Y/N)^Preoperative Sepsis^
"RTN","SROAUTL1",52,0)
BFI ;;269^Pregnancy Status^Pregnancy Status^
"RTN","SROAUTL1",53,0)
DAC ;;413^Transfer Status^Transfer Status^
"RTN","SROAUTL1",54,0)
PJAA ;;.011^In/Out-Patient Status
"RTN","SROAUTL1",55,0)
BDG ;;247^Length of Postoperative Hospital Stay
"RTN","SROAUTL1",56,0)
CDB ;;342^Date/Time of Death^Date/Time of Death
"RTN","SROAUTL1",57,0)
DAG ;;417^Patient's Race
"RTN","SROAUTL1",58,0)
DAH ;;418^Hospital Admission Date
"RTN","SROAUTL1",59,0)
DAI ;;419^Hospital Discharge Date
"RTN","SROAUTL1",60,0)
DBJ ;;420^Admitted/Transferred to Surgical Service
"RTN","SROAUTL1",61,0)
DBA ;;421^Discharged/Transferred to Chronic Care
"RTN","SROAUTL1",62,0)
DEB ;;452^Observation Admission Date/Time
"RTN","SROAUTL1",63,0)
DEC ;;453^Observation Discharge Date/Time
"RTN","SROAUTL1",64,0)
DED ;;454^Observation Treating Specialty
"RTN","SROAUTL2")
0^61^B34551023^B32578707
"RTN","SROAUTL2",1,0)
SROAUTL2 ;BIR/ADM - RISK ASSESSMENT UTILITY ;01/29/07
"RTN","SROAUTL2",2,0)
 ;;3.0; Surgery ;**38,47,63,88,125,153,160**;24 Jun 93;Build 7
"RTN","SROAUTL2",3,0)
 S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  D
"RTN","SROAUTL2",4,0)
 .I SRY(130,SRTN,SRZ,"I")="" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRX(SRZ)=$P(SRFLD,"^",2)
"RTN","SROAUTL2",5,0)
 .I SRY(130,SRTN,SRZ,"I")="NS" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRDT=$P(SRFLD,"^",4) S:SRDT'="" SRLR(SRDT)=""
"RTN","SROAUTL2",6,0)
 S SRDT=0 F  S SRDT=$O(SRLR(SRDT)) Q:'SRDT  K SRX(SRDT)
"RTN","SROAUTL2",7,0)
 Q
"RTN","SROAUTL2",8,0)
RELATE S DFN=$P(^SRF(SRTN,0),"^"),SRDEATH=$P($G(^DPT(DFN,.35)),"^") I 'SRDEATH Q
"RTN","SROAUTL2",9,0)
 S X2=$P(^SRF(SRTN,0),"^",9),X1=SRDEATH D ^%DTC I X>90 Q
"RTN","SROAUTL2",10,0)
 S X=$P($G(^SRF(SRTN,.4)),"^",7) I X="" S SRX(903)="Death Unrelated/Related"
"RTN","SROAUTL2",11,0)
 Q
"RTN","SROAUTL2",12,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SROAUTL2",13,0)
 Q
"RTN","SROAUTL2",14,0)
GET S X=$T(@J)
"RTN","SROAUTL2",15,0)
 Q
"RTN","SROAUTL2",16,0)
PJC ;;.03^Major or Minor^Major or Minor^
"RTN","SROAUTL2",17,0)
PDB ;;.42^Other Procedures^^
"RTN","SROAUTL2",18,0)
PCG ;;.37^Anesthesia Technique^^
"RTN","SROAUTL2",19,0)
CE ;;35^Concurrent Case^Concurrent Case^
"RTN","SROAUTL2",20,0)
PJD ;;.04^Surgery Specialty^Surgical Specialty^
"RTN","SROAUTL2",21,0)
BF ;;26^Principal Procedure^Principal Operation^
"RTN","SROAUTL2",22,0)
BGJ ;;270^Preoperative Serum Sodium^Serum Sodium^304
"RTN","SROAUTL2",23,0)
CJD ;;304^Date Preoperative Serum Sodium was Performed^^
"RTN","SROAUTL2",24,0)
BBD ;;224^Preoperative BUN (mg/dl)^BUN^291
"RTN","SROAUTL2",25,0)
BIA ;;291^Date Preoperative BUN was Performed^^
"RTN","SROAUTL2",26,0)
BBC ;;223^Preoperative Serum Creatinine (mg/dl)^Serum Creatinine^290
"RTN","SROAUTL2",27,0)
BIJ ;;290^Date Preoperative Serum Creatinine was Performed^^
"RTN","SROAUTL2",28,0)
BBE ;;225^Preoperative Serum Albumin (g/dl)^Serum Albumin^292
"RTN","SROAUTL2",29,0)
BIB ;;292^Date Preoperative Serum Albumin was Performed^^
"RTN","SROAUTL2",30,0)
BBH ;;228^Preoperative Total Bilirubin (mg/dl)^Total Bilirubin^295
"RTN","SROAUTL2",31,0)
BIE ;;295^Date Preoperative Total Bilrubin was Performed^^
"RTN","SROAUTL2",32,0)
BBG ;;227^Preoperative SGOT (mU/ml)^SGOT^294
"RTN","SROAUTL2",33,0)
BID ;;294^Date Preoperative SGOT was Performed^^
"RTN","SROAUTL2",34,0)
BBI ;;229^Preoperative Alkaline Phosphatase (mU/ml)^Alkaline Phosphatase^296
"RTN","SROAUTL2",35,0)
BIF ;;296^Date Preoperative Alkaline Phosphatase was Performed^^
"RTN","SROAUTL2",36,0)
BCJ ;;230^Preoperative WBC (X 1000/mm3)^WBC^297
"RTN","SROAUTL2",37,0)
BIG ;;297^Date Preoperative WBC was Performed
"RTN","SROAUTL2",38,0)
BCD ;;234^Preoperative Hematocrit^Hematocrit^301
"RTN","SROAUTL2",39,0)
CJA ;;301^Date Preoperative Hematocrit was Performed^^
"RTN","SROAUTL2",40,0)
BCA ;;231^Preoperative Platelet Count (X 1000/mm3)^Platelet Count^298
"RTN","SROAUTL2",41,0)
BIH ;;298^Date Preoperative Platelet Count was Performed^^
"RTN","SROAUTL2",42,0)
BCC ;;233^Preoperative PTT (seconds)^PTT^300
"RTN","SROAUTL2",43,0)
CJJ ;;300^Date Preoperative PTT was Performed^^
"RTN","SROAUTL2",44,0)
BCB ;;232^Preoperative PT (seconds)^PT^299
"RTN","SROAUTL2",45,0)
BII ;;299^Date Preoperative PT was Performed^^
"RTN","SROAUTL2",46,0)
BGD ;;274^Highest Postoperative Serum Sodium^Highest Serum Sodium^305
"RTN","SROAUTL2",47,0)
CJE ;;305^Date Highest Serum Sodium was Recorded^^
"RTN","SROAUTL2",48,0)
DJE ;;405^Lowest Serum Sodium^Lowest Serum Sodium^407
"RTN","SROAUTL2",49,0)
DJG ;;407^Date of Lowest Serum Sodium^^
"RTN","SROAUTL2",50,0)
BGE ;;275^Highest Postoperative Potassium^Highest Potassium^306
"RTN","SROAUTL2",51,0)
CJF ;;306^Date Highest Potassium was Recorded^^
"RTN","SROAUTL2",52,0)
DJF ;;406^Lowest Postoperative Potassium^Lowest Potassium^408
"RTN","SROAUTL2",53,0)
DJH ;;408^Date of Lowest Postoperative Potassium^^
"RTN","SROAUTL2",54,0)
BGG ;;277^Highest Postoperative Serum Creatinine^Highest Serum Creatinine^308
"RTN","SROAUTL2",55,0)
CJH ;;308^Date Highest Serum Creatinine was Recorded^^
"RTN","SROAUTL2",56,0)
BGH ;;278^Highest Postoperative CPK^Highest CPK^309
"RTN","SROAUTL2",57,0)
CJI ;;309^Date Highest CPK was Recorded^^
"RTN","SROAUTL2",58,0)
BGI ;;279^Highest Postoperative CPK-MB^Highest CPK-MB^310
"RTN","SROAUTL2",59,0)
CAJ ;;310^Date Highest CPK-MB Band was Recorded^^
"RTN","SROAUTL2",60,0)
BHJ ;;280^Highest Postoperative Total Bilirubin^Highest Total Bilirubin^311
"RTN","SROAUTL2",61,0)
CAA ;;311^Date Highest Total Bilirubin was Recorded^^
"RTN","SROAUTL2",62,0)
BHA ;;281^Highest Postoperative WBC^Highest WBC^312
"RTN","SROAUTL2",63,0)
CAB ;;312^Date Highest WBC was Recorded^^
"RTN","SROAUTL2",64,0)
BHC ;;283^Lowest Postoperative Hematocrit^Lowest Hematocrit^314
"RTN","SROAUTL2",65,0)
CAD ;;314^Date Lowest Hematocrit was Recorded^^
"RTN","SROAUTL2",66,0)
DEE ;;455^Highest Postoperative Serum Troponin I^Highest Troponin I^455.1
"RTN","SROAUTL2",67,0)
DEEPA ;;455.1^Date of Highest Postop Troponin I^^
"RTN","SROAUTL2",68,0)
DEF ;;456^Highest Postoperative Serum Troponin T^Highest Troponin T^456.1
"RTN","SROAUTL2",69,0)
DEFPA ;;456.1^Date of Highest Postop Troponin T^^
"RTN","SROAUTL2",70,0)
DHG ;;487^Preoperative INR^INR^487.1
"RTN","SROAUTL2",71,0)
DHGPA ;;487.1^Date Preoperative INR was Performed^^
"RTN","SROAUTL2",72,0)
DDD ;;444^Preoperative Anion Gap^Anion Gap^444.1
"RTN","SROAUTL2",73,0)
DDDPA ;;444.1^Date Preoperative Anion Gap was Recorded^^
"RTN","SROAUTL2",74,0)
DDE ;;445^Highest Postoperative Anion Gap^Highest Anion Gap^445.1
"RTN","SROAUTL2",75,0)
DDEPA ;;445.1^Date Highest Anion Gap was Recorded^^
"RTN","SROAUTL2",76,0)
EJD ;;504^Preoperative Hemoglobin A1c^Hemoglobin A1c^504.1
"RTN","SROAUTL2",77,0)
EJDPA ;;504.1^Date Preoperative Hemoglobin A1c was Performed^^
"RTN","SROAUTL2",78,0)
BG ;;27^Principal Procedure Code (CPT)^Principal CPT Code^
"RTN","SROAUTL2",79,0)
BAD ;;214^PGY of Primary Surgeon ('0' for Staff Surgeon)^PGY of Primary Surgeon^
"RTN","SROAUTL2",80,0)
PJCE ;;.035^Case Schedule Type^Surgical Priority^
"RTN","SROAUTL2",81,0)
APJI ;;1.09^Wound Classification^Wound Classification^
"RTN","SROAUTL2",82,0)
APAC ;;1.13^ASA Class^ASA Classification^
"RTN","SROAUTL2",83,0)
PBB ;;.22^Time the Operation Began^Date/Time Operation Began^
"RTN","SROAUTL2",84,0)
PBC ;;.23^Time the Operation Ends^Date/Time Operation Ended^
"RTN","SROAUTL2",85,0)
CDJ ;;340^Number of RBC Units Transfused^RBC Units Transfused^
"RTN","SROAUTL2",86,0)
DDC ;;443^Intraoperative Disseminated Cancer (Y/N)^Intraoperative Disseminated Cancer^
"RTN","SROAUTL2",87,0)
DDF ;;446^Intraoperative Ascites (Y/N)^Intraoperative Ascites
"RTN","SROAUTL2",88,0)
FF ;;66^Principal Diagnosis Code (ICD9)^Postop Diagnosis Code (ICD9)^
"RTN","SROAUTL2",89,0)
BDG ;;247^Length of Postoperative Stay^Length of Postoperative Hospital Stay^
"RTN","SROAUTL2",90,0)
AJB ;;102^Reason for not Creating an Assessment^Exclusion Criteria^
"RTN","SROAUTL2",91,0)
PJAA ;;.011^In/Out-Patient Status^Hospital Admission Status^
"RTN","SROAUTL2",92,0)
PAFF ;;.166^Attending Code^Attending Code
"RTN","SROAUTL2",93,0)
PBA ;;.21^Anesthesia Care Start Time^Anesthesia Start^
"RTN","SROAUTL2",94,0)
PBD ;;.24^Anesthesia Care End Time^Anesthesia Finish^
"RTN","SROAUTL4")
0^62^B39875466^B38721061
"RTN","SROAUTL4",1,0)
SROAUTL4 ;BIR/ADM - RISK ASSESSMENT UTILITY ;05/31/06
"RTN","SROAUTL4",2,0)
 ;;3.0; Surgery ;**38,71,95,125,153,160**;24 Jun 93;Build 7
"RTN","SROAUTL4",3,0)
 S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  D
"RTN","SROAUTL4",4,0)
 .I SRY(130,SRTN,SRZ,"I")="" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2) D
"RTN","SROAUTL4",5,0)
 ..I SRZ=451!(SRZ=450) S SRX($P(SRFLD,"^",2))=$P(SRFLD,"^",2)_"^"_SRZ Q
"RTN","SROAUTL4",6,0)
 ..S SRX(SRZ)=$P(SRFLD,"^",2)
"RTN","SROAUTL4",7,0)
 .I SRY(130,SRTN,SRZ,"I")="NS" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRDT=$P(SRFLD,"^",4) S:SRDT'="" SRLR(SRDT)=""
"RTN","SROAUTL4",8,0)
 S SRDT=0 F  S SRDT=$O(SRLR(SRDT)) Q:'SRDT  K SRX(SRDT)
"RTN","SROAUTL4",9,0)
 Q
"RTN","SROAUTL4",10,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SROAUTL4",11,0)
 Q
"RTN","SROAUTL4",12,0)
GET S X=$T(@J)
"RTN","SROAUTL4",13,0)
 Q
"RTN","SROAUTL4",14,0)
PBB ;;.22^Time the Operation Began^Date/Time Operation Began^
"RTN","SROAUTL4",15,0)
PBC ;;.23^Time the Operation Ended^Date/Time Operation Ended^
"RTN","SROAUTL4",16,0)
BCF ;;236^Patient's Height^Height^
"RTN","SROAUTL4",17,0)
BCG ;;237^Patient's Weight^Weight^
"RTN","SROAUTL4",18,0)
CDF ;;346^Diabetes^Diabetes^
"RTN","SROAUTL4",19,0)
BJC ;;203^History of COPD (Y/N)^COPD^
"RTN","SROAUTL4",20,0)
CDG ;;347^FEV1^FEV1^
"RTN","SROAUTL4",21,0)
BJI ;;209^Cardiomegaly on Chest X-Ray (Y/N)^Cardiomegaly (X-ray)^
"RTN","SROAUTL4",22,0)
CDH ;;348^Pulmonary Rales (Y/N)^Pulmonary Rales^
"RTN","SROAUTL4",23,0)
EAJ ;;510^Current Smoker^Current Smoker^
"RTN","SROAUTL4",24,0)
BBC ;;223^Preoperative Serum Creatinine^Creatinine^290
"RTN","SROAUTL4",25,0)
CDI ;;349^Active Endocarditis (Y/N)^Active Endocarditis^
"RTN","SROAUTL4",26,0)
CEJ ;;350^Resting ST Depression (Y/N)^Resting ST Depression^
"RTN","SROAUTL4",27,0)
BDJ ;;240^Functional Health Status^Functional Status^
"RTN","SROAUTL4",28,0)
CEA ;;351^PCI Status^PCI^
"RTN","SROAUTL4",29,0)
BJE ;;205^Prior Myocardial Infarction^Prior MI^
"RTN","SROAUTL4",30,0)
CEB ;;352^Number of Prior Heart Surgeries^Number of Prior Heart Surgeries^
"RTN","SROAUTL4",31,0)
BFE ;;265^Peripheral Vascular Disease (Y/N)^Peripheral Vascular Disease^
"RTN","SROAUTL4",32,0)
BFD ;;264^Cerebral Vascular Disease (Y/N)^Cerebral Vascular Disease^
"RTN","SROAUTL4",33,0)
BFG ;;267^Angina (use NYHA Functional Class)^Angina (use CCS Class)^
"RTN","SROAUTL4",34,0)
BJG ;;207^Congestive Heart Failure (use NYHA Functional Class)^CHF (use NYHA Class)^
"RTN","SROAUTL4",35,0)
CEC ;;353^Current Diuretic Use (Y/N)^Current Diuretic Use^
"RTN","SROAUTL4",36,0)
CED ;;354^Current Digoxin Use (Y/N)^Current Digoxin Use^
"RTN","SROAUTL4",37,0)
CEE ;;355^IV NTG within 48 Hours Preceding Surgery (Y/N)^IV NTG within 48 Hours^
"RTN","SROAUTL4",38,0)
CEF ;;356^Preoperative use of IABP (Y/N)^Preop Use of IABP^
"RTN","SROAUTL4",39,0)
CEG ;;357^Left Ventricular End-Diastolic Pressure^LVEDP^
"RTN","SROAUTL4",40,0)
CEH ;;358^Aortic Systolic Pressure^Aortic Systolic Pressure^
"RTN","SROAUTL4",41,0)
CEI ;;359^PA Systolic Pressure^*PA Systolic Pressure^
"RTN","SROAUTL4",42,0)
CFJ ;;360^PAW Mean Pressure^*PAW Mean Pressure^
"RTN","SROAUTL4",43,0)
CFA ;;361^Left Main Stenosis^Left Main Stenosis^
"RTN","SROAUTL4",44,0)
CFBPA ;;362.1^Left Anterior Descending (LAD) Stenosis^LAD Stenosis^
"RTN","SROAUTL4",45,0)
CFBPB ;;362.2^Right Coronary Artery Stenosis^Right Coronary Stenosis^
"RTN","SROAUTL4",46,0)
CFBPC ;;362.3^Circumflex Coronary Artery Stenosis^Circumflex Stenosis^
"RTN","SROAUTL4",47,0)
CFC ;;363^LV Contraction Grade^LV Contraction Grade  (from contrast or radionuclide angiogram or 2D echo^
"RTN","SROAUTL4",48,0)
DAE ;;415^Mitral Regurgitation^Mitral Regurgitation^
"RTN","SROAUTL4",49,0)
CFD ;;364^Physician's Preoperative Estimate of Operative Mortality^Physician's Preoperative Estimate of Operative Mortality^
"RTN","SROAUTL4",50,0)
CFDPA ;;364.1^Date/Time of Estimate of Operative Mortality^Date/Time of Estimate of Operative Mortality^
"RTN","SROAUTL4",51,0)
APAC ;;1.13^ASA Class^ASA Classification^
"RTN","SROAUTL4",52,0)
DAD ;;414^Cardiac Surgical Priority^Surgical Priority^
"RTN","SROAUTL4",53,0)
DADPA ;;414.1^Date/Time of Cardiac Surgical Priority^Date/Time of Cardiac Surgical Priority^
"RTN","SROAUTL4",54,0)
CHD ;;384^Operative Death (Y/N)^Operative Death^
"RTN","SROAUTL4",55,0)
CFE ;;365^CABG Distal Anastomoses with Vein^^
"RTN","SROAUTL4",56,0)
CFF ;;366^CABG Distal Anastomoses with IMA^^
"RTN","SROAUTL4",57,0)
CFG ;;367^Aortic Valve Replacement (Y/N)^Aortic Valve Replacement^
"RTN","SROAUTL4",58,0)
CFH ;;368^Mitral Valve Replacement (Y/N)^Mitral Valve Replacement^
"RTN","SROAUTL4",59,0)
CFI ;;369^Tricuspid Valve Replacement (Y/N)^Tricuspid Valve Replacement^
"RTN","SROAUTL4",60,0)
CGJ ;;370^Valve Repair (Y/N)^Valve Repair^
"RTN","SROAUTL4",61,0)
CGA ;;371^LV Aneurysmectomy (Y/N)^LV Aneurysmectomy^
"RTN","SROAUTL4",62,0)
CGB ;;372^Great Vessel Repair(Y/N)^Great Vessel Repair^
"RTN","SROAUTL4",63,0)
EJE ;;505^Endovascular Repair of Descending Thoracic Aorta (Y/N)^Endovascular Repair
"RTN","SROAUTL4",64,0)
CGC ;;373^Cardiac Transplant (Y/N)^Cardiac Transplant^
"RTN","SROAUTL4",65,0)
CGF ;;376^ASD Repair (Y/N)^ASD Repair^
"RTN","SROAUTL4",66,0)
CHJ ;;380^VSD Repair (Y/N)^VSD Repair^
"RTN","SROAUTL4",67,0)
CGG ;;377^Myxoma Resection (Y/N)^Myxoma Resection^
"RTN","SROAUTL4",68,0)
CHA ;;381^Foreign Body Removal (Y/N)^Foreign Body Removal^
"RTN","SROAUTL4",69,0)
CGH ;;378^Myectomy for IHSS (Y/N)^Myectomy for IHSS^
"RTN","SROAUTL4",70,0)
CHB ;;382^Pericardiectomy (Y/N)^Pericardiectomy^
"RTN","SROAUTL4",71,0)
CGI ;;379^Other Tumor Resection (Y/N)^Other Tumor Resection^
"RTN","SROAUTL4",72,0)
DAF ;;416^CABG Distal Anastomoses with Other Conduit^^
"RTN","SROAUTL4",73,0)
DDB ;;442^Employment Status
"RTN","SROAUTL4",74,0)
BAI ;;219^Preoperative Hemoglobin^^239
"RTN","SROAUTL4",75,0)
BCI ;;239^Preoperative Hemoglobin Date
"RTN","SROAUTL4",76,0)
BBE ;;225^Preoperative Serum Albumin^^292
"RTN","SROAUTL4",77,0)
BIB ;;292^Preoperative Serum Albumin Date
"RTN","SROAUTL4",78,0)
BIJ ;;290^Creatinine Date
"RTN","SROAUTL4",79,0)
DEA ;;451^Total CPB Time
"RTN","SROAUTL4",80,0)
DEJ ;;450^Total Ischemic Time
"RTN","SROAUTL4",81,0)
DDJ ;;440^Cardiac Catheterization Date
"RTN","SROAUTL4",82,0)
DAH ;;418^Hospital Admission Date And Time
"RTN","SROAUTL4",83,0)
DAI ;;419^Hospital Discharge Date And Time
"RTN","SROAUTL4",84,0)
DFC ;;463^Hypertension^
"RTN","SROAUTL4",85,0)
DFD ;;464^Number with Radial Artery^
"RTN","SROAUTL4",86,0)
DFE ;;465^Number with Other Artery^
"RTN","SROAUTL4",87,0)
DFH ;;468^Incision Type^
"RTN","SROAUTL4",88,0)
DFI ;;469^Covert From Off Pump to CPB
"RTN","SROAUTL4",89,0)
DGJ ;;470^Date and Time Patient Extubated
"RTN","SROAUTL4",90,0)
DGA ;;471^Date and Time Patient Discharged from ICU
"RTN","SROAUTL4",91,0)
DGB ;;472^Cardiac Surgery to NON-VA Facility
"RTN","SROAUTL4",92,0)
PBJE ;;.205^Time Patient In OR
"RTN","SROAUTL4",93,0)
PBCB ;;.232^Time Patient Out OR
"RTN","SROAUTL4",94,0)
DEG ;;457^HDL^^457.1
"RTN","SROAUTL4",95,0)
DEGPA ;;457.1^HDL, Date
"RTN","SROAUTL4",96,0)
DEH ;;458^Serum Triglyceride^^458.1
"RTN","SROAUTL4",97,0)
DEHPA ;;458.1^Serum Triglyceride, Date
"RTN","SROAUTL4",98,0)
DEI ;;459^Serum Potassium^^459.1
"RTN","SROAUTL4",99,0)
DEIPA ;;459.1^Serum Potassium, Date
"RTN","SROAUTL4",100,0)
DFJ ;;460^Serum Total Bilirubin^^460.1
"RTN","SROAUTL4",101,0)
DFJPA ;;460.1^Serum Total Bilirubin, Date
"RTN","SROAUTL4",102,0)
DFA ;;461^LDL^^461.1
"RTN","SROAUTL4",103,0)
DFAPA ;;461.1^LDL, Date
"RTN","SROAUTL4",104,0)
DFB ;;462^Total Cholesterol^^462.1
"RTN","SROAUTL4",105,0)
DFBPA ;;462.1^Total Cholesterol, Date
"RTN","SROAUTL4",106,0)
EJD ;;504^Hemoglobin A1c^^504.1
"RTN","SROAUTL4",107,0)
EJDPA ;;504.1^Hemoglobin A1c, Date
"RTN","SROAUTL4",108,0)
DGE ;;475^Diabetes (Cardiac)
"RTN","SROAUTL4",109,0)
DGD ;;474^Preop use of circulatory Device
"RTN","SROAUTL4",110,0)
DGF ;;476^Procedure Type
"RTN","SROAUTL4",111,0)
DGG ;;477^Aortic Stenosis
"RTN","SROAUTL4",112,0)
DGH ;;478^Re-Do Lad Stenosis
"RTN","SROAUTL4",113,0)
DGI ;;479^Re-Do Right Coronary Stenosis
"RTN","SROAUTL4",114,0)
DHJ ;;480^Re-Do Circumflex Stenosis
"RTN","SROAUTL4",115,0)
DHA ;;481^Bridge to transplant/Device
"RTN","SROAUTL4",116,0)
EAB ;;512^Maze Procedure
"RTN","SROAUTL4",117,0)
DHC ;;483^Transmyocardial Laser Revascularization
"RTN","SROAUTL4",118,0)
EJB ;;502^Other Cardiac Procedures (Y/N)
"RTN","SROAUTL4",119,0)
DHD ;;484^Other cardiac procedures (specify)
"RTN","SROAUTL4",120,0)
DHE ;;485^Prior Heart Surgeries
"RTN","SROAWL")
0^63^B32382594^B32512298
"RTN","SROAWL",1,0)
SROAWL ;BIR/ADM - REPORT OF MONTHLY CASE WORKLOAD TOTALS ;02/12/07
"RTN","SROAWL",2,0)
 ;;3.0; Surgery ;**38,47,50,86,141,153,160**;24 Jun 93;Build 7
"RTN","SROAWL",3,0)
 N SRINSTP,SRSEL S (SRSOUT,SRT)=0,SRP=1,SRINST=SRSITE("SITE"),SRINSTP=SRSITE("DIV")
"RTN","SROAWL",4,0)
START G:SRSOUT END W @IOF,!,"Report of Monthly Case Workload Totals",!!
"RTN","SROAWL",5,0)
 K DIR S DIR("A",1)="Print which report?",DIR("A",2)="",DIR("A",3)="1. Report for Single Month"
"RTN","SROAWL",6,0)
 S DIR("A",4)="2. Report for Range of Months",DIR("A",5)="",DIR("A")="Select Number (1 or 2): ",DIR("B")="1"
"RTN","SROAWL",7,0)
 S DIR(0)="NA^1:2:0" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROAWL",8,0)
 S SRSEL=Y I SRSEL=2 D TWO Q
"RTN","SROAWL",9,0)
 W @IOF,"This option provides a report of the monthly risk assessment surgical case",!,"workload totals which include the following categories:",!
"RTN","SROAWL",10,0)
 W ?5,"1. All cases performed",!,?5,"2. Eligible cases",!,?5,"3. Eligible cases meeting exclusion criteria"
"RTN","SROAWL",11,0)
 W !,?5,"4. Assessed cases",!,?5,"5. Not logged eligible cases"
"RTN","SROAWL",12,0)
 W !,?5,"6. Cardiac cases",!,?5,"7. Non-cardiac cases",!,?5,"8. Assessed cases per day (based on 20 days/month)"
"RTN","SROAWL",13,0)
 W !!,"The second part of this report provides the total number of incomplete",!,"assessments remaining for the month selected and the prior 12 months."
"RTN","SROAWL",14,0)
DATE D GETDT W ! K DIR S DIR("A")="Compile workload totals for which month and year? ",DIR(0)="DA^::MX",DIR("B")=SRM_" "_SRY,DIR("?",1)="Enter the month and year for which to run this report,"
"RTN","SROAWL",15,0)
 S DIR("?")="for example, 'MAY 94', 'MAY 1994', '5/94' or '5 94'." D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROAWL",16,0)
 S SRDT=Y D  G:SRSOUT END G:'$D(SRDT) DATE S SRDT=$E(SRDT,1,5)_"00"
"RTN","SROAWL",17,0)
 .Q:SRDT=SRD  S SRY=$E(Y,1,3)+1700,Z=+$E(Y,4,5) D MONTH
"RTN","SROAWL",18,0)
 .W !! K DIR S DIR("A")="Compile totals for "_SRM_" "_SRY,DIR(0)="Y",DIR("B")="YES" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAWL",19,0)
 .I 'Y K SRDT
"RTN","SROAWL",20,0)
DIV S (SRCNT,X)=0 F  S X=$O(^SRO(133,X)) Q:'X  I '$P(^SRO(133,X,0),"^",21) S SRCNT=SRCNT+1
"RTN","SROAWL",21,0)
 I SRCNT=1,SRSEL=1 G TRAN
"RTN","SROAWL",22,0)
 S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,"^"),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,"^",2))
"RTN","SROAWL",23,0)
 I SRINST'["ALL DIVISIONS"!(SRSEL=2) G IO
"RTN","SROAWL",24,0)
TRAN W ! K DIR S DIR("A",1)="This report may be printed and/or transmitted to the national database.",DIR("A",2)=""
"RTN","SROAWL",25,0)
 S DIR("A")="Do you want this report to be transmitted to the central database",DIR("B")="NO",DIR("?",1)="Enter YES to have this report automatically transmitted to the central"
"RTN","SROAWL",26,0)
 S DIR("?")="database.  Enter NO if you do NOT want this report transmitted.",DIR(0)="Y" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROAWL",27,0)
 I 'Y G IO
"RTN","SROAWL",28,0)
PRT S SRT=1,SRP=0 W ! K DIR S DIR("A")="Do you also want to print this report",DIR("B")="YES",DIR("?",1)="Enter NO if you want to have this report transmitted, but do not want to"
"RTN","SROAWL",29,0)
 S DIR("?",2)="have it printed.  Enter YES if you do want to print the report as well as",DIR("?")="have it transmitted.",DIR(0)="Y" D ^DIR S:Y SRP=1 I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROAWL",30,0)
 I 'SRP G QUE
"RTN","SROAWL",31,0)
IO W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print report on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROAWL",32,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Report of Surgical Case Workload" D  S ZTRTN="RUN^SROAWL" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROAWL",33,0)
 .S (ZTSAVE("SRDT"),ZTSAVE("SRP"),ZTSAVE("SRT"),ZTSAVE("SRINST"),ZTSAVE("SRINSTP"),ZTSAVE("SRSEL"))=""
"RTN","SROAWL",34,0)
 .I SRSEL=2 S ZTSAVE("SREDT")=""
"RTN","SROAWL",35,0)
RUN ; entry point when queued
"RTN","SROAWL",36,0)
 D ^SROAWL1
"RTN","SROAWL",37,0)
END I 'SRSOUT,$E(IOST)="C" W ! K DIR S DIR(0)="FOA",DIR("A")="Press RETURN to continue" D ^DIR
"RTN","SROAWL",38,0)
 W:$E(IOST)="P" @IOF K ^TMP("SRM",$J) I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROAWL",39,0)
 D ^%ZISC K SRTN W @IOF D ^SRSKILL
"RTN","SROAWL",40,0)
 Q
"RTN","SROAWL",41,0)
TWO S X=$E(DT,1,3)-1,SRD=X_"1000",SRY=X+1700,SRM="OCT "_SRY
"RTN","SROAWL",42,0)
 W ! K DIR S DIR("A")="Start with which month and year? "
"RTN","SROAWL",43,0)
 S DIR(0)="DA^::EMX",DIR("B")=SRM,DIR("?",1)="Enter the starting month and year for this report, for example,"
"RTN","SROAWL",44,0)
 S DIR("?")="'OCT 2005', 'OCT 05', '10/05' or '10 05'." D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROAWL",45,0)
 S SRDT=Y D GETDT
"RTN","SROAWL",46,0)
DT2 W ! K DIR S DIR("A")="End with which month and year? ",DIR(0)="DA^::EMX",DIR("B")=SRM_" "_SRY
"RTN","SROAWL",47,0)
 S DIR("?",1)="Enter the ending month and year for this report, for example,"
"RTN","SROAWL",48,0)
 S DIR("?")="'OCT 2005', 'OCT 05', '10/05' or '10 05'." D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROAWL",49,0)
 S SREDT=Y G:'$G(SREDT) DT2 S SREDT=$E(SREDT,1,5)_"00"
"RTN","SROAWL",50,0)
 I SREDT<SRDT W !!,"Ending date must not be earlier than starting date!" K SREDT G TWO
"RTN","SROAWL",51,0)
 G DIV
"RTN","SROAWL",52,0)
 Q
"RTN","SROAWL",53,0)
GETDT S X=+$E(DT,4,5) S:X'=1 Z=X-1 S:X=1 Z=12 D MONTH S X=$E(DT,1,3) S:Z=12 X=X-1 S Z=$S($L(Z)=1:"0"_Z,1:Z) S SRY=X+1700,SRD=X_Z_"00"
"RTN","SROAWL",54,0)
 Q
"RTN","SROAWL",55,0)
MONTH ; get name of month
"RTN","SROAWL",56,0)
 S SRM=$S(Z=2:"FEB",Z=3:"MAR",Z=4:"APR",Z=5:"MAY",Z=6:"JUN",Z=7:"JUL",Z=8:"AUG",Z=9:"SEP",Z=10:"OCT",Z=11:"NOV",Z=12:"DEC",1:"JAN")
"RTN","SROAWL",57,0)
 Q
"RTN","SROAWL",58,0)
QUE ; queue transmission of report to national database
"RTN","SROAWL",59,0)
 W ! K %DT S %DT("A")="Queue report to run at what date/time? ",%DT(0)="NOW",%DT("B")="NOW",%DT="AEFXT" D ^%DT I 'Y S SRSOUT=1 G END
"RTN","SROAWL",60,0)
 S ZTDTH=Y,ZTIO="",ZTDESC="Report of Surgical Case Workload",(ZTSAVE("SRDT"),ZTSAVE("SRP"),ZTSAVE("SRT"),ZTSAVE("SRINST"),ZTSAVE("SRINSTP"),ZTSAVE("SRSTATN"),ZTSAVE("SRSEL"))="",ZTRTN="RUN^SROAWL" D ^%ZTLOAD G END
"RTN","SROAWL",61,0)
 Q
"RTN","SROAWL",62,0)
TASK ; automatic transmission of workload report called by nightly process
"RTN","SROAWL",63,0)
 D NOW^%DTC Q:+%I(2)<26  S SRDAY=+%I(2),SRNOW=$E(%,1,12) D GETDT S SRDT=SRD
"RTN","SROAWL",64,0)
 S SRS=$O(^SRO(133,0)) Q:'SRS  S SRL=$P(^SRO(133,SRS,0),"^",13) I SRL=SRD G STOP
"RTN","SROAWL",65,0)
 S SRP=0,SRT=1,X=$$SITE^SROVAR,SRINST=$P(X,"^",2),SRINSTP="ALL DIVISIONS",SRSEL=1
"RTN","SROAWL",66,0)
 D ^SROAWL1 S SRS=$O(^SRO(133,0)),$P(^SRO(133,SRS,0),"^",13)=SRDT
"RTN","SROAWL",67,0)
STOP D ^SRSKILL K SRTN
"RTN","SROAWL",68,0)
 Q
"RTN","SROAWL1")
0^64^B33694001^B32202367
"RTN","SROAWL1",1,0)
SROAWL1 ;BIR/ADM - REPORT OF CASE WORKLOAD TOTALS (CONTINUED) ;02/12/07
"RTN","SROAWL1",2,0)
 ;;3.0; Surgery ;**38,47,60,62,68,50,86,88,92,153,160**;24 Jun 93;Build 7
"RTN","SROAWL1",3,0)
 ; SRTOTAL(1) = total of all cases completed (excluding aborted cases)
"RTN","SROAWL1",4,0)
 ; SRTOTAL(2) = excluded cases
"RTN","SROAWL1",5,0)
 ; SRTOTAL(3) = assessed cases
"RTN","SROAWL1",6,0)
 ; SRTOTAL(4) = not logged major cases
"RTN","SROAWL1",7,0)
 ; SRTOTAL(5) = cardiac cases
"RTN","SROAWL1",8,0)
 ; SRTOTAL(6) = non-cardiac cases
"RTN","SROAWL1",9,0)
 ; SRTOTAL(7) = assessed cases per day (at 20 days per month)
"RTN","SROAWL1",10,0)
 ; SRTOTAL(8) = total major cases
"RTN","SROAWL1",11,0)
 ; SRTOTAL(9) = total minor cases
"RTN","SROAWL1",12,0)
 ; SRTOTAL(10)= total eligible case based on CPT code
"RTN","SROAWL1",13,0)
 ; SRTOTAL(11)= not logged eligible cases
"RTN","SROAWL1",14,0)
 ;
"RTN","SROAWL1",15,0)
 I SRP U IO
"RTN","SROAWL1",16,0)
 N SRDIV,SRMULT S (SRDIV,SRMULT,SRSOUT)=0
"RTN","SROAWL1",17,0)
 I SRT S (SRCNT,X)=0 D
"RTN","SROAWL1",18,0)
 .F  S X=$O(^SRO(133,X)) Q:'X  I '$P($G(^SRO(133,X,0)),"^",21) S SRCNT=SRCNT+1,SRDIV(X)=$P(^SRO(133,X,0),"^")
"RTN","SROAWL1",19,0)
 .I SRCNT>1 S SRMULT=1
"RTN","SROAWL1",20,0)
BEG S SRSDATE=SRDT I SRSEL=1 S X=+$E(SRDT,4,5),X=$S(X'=12:X+1,1:1),Y=$E(SRDT,1,3),Y=$S(X>1:Y,1:Y+1),SRED=Y_$S($L(X)=1:"0"_X,1:X)_"00"
"RTN","SROAWL1",21,0)
 I SRSEL=2 S X=$E(SREDT,1,5),SRED=X_"99"
"RTN","SROAWL1",22,0)
 K SRTOTAL F I=1:1:11 S SRTOTAL(I)=0
"RTN","SROAWL1",23,0)
 N SREXCL F I=0:1:9 S SREXCL(I)=0
"RTN","SROAWL1",24,0)
 S:'$D(SRINSTP) SRINSTP="ALL DIVISIONS"
"RTN","SROAWL1",25,0)
 I SRSEL=1 D MOS S Y=SRDT X ^DD("DD") S SRM="FOR "_Y,SRTITLE="REPORT OF MONTHLY SURGICAL CASE WORKLOAD"
"RTN","SROAWL1",26,0)
 I SRSEL=2 S SRTITLE="REPORT OF SURGICAL CASE WORKLOAD" D
"RTN","SROAWL1",27,0)
 .S Y=SRDT X ^DD("DD") S SRM="FOR "_Y_" THROUGH " S Y=SREDT X ^DD("DD") S SRM=SRM_Y
"RTN","SROAWL1",28,0)
 F  S SRSDATE=$O(^SRF("AC",SRSDATE)) Q:SRSDATE>SRED!'SRSDATE  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDATE,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D CASE
"RTN","SROAWL1",29,0)
 F K="C","N" S SRDFN=0 F  S SRDFN=$O(^SRF("ARS",K,"I",SRDFN)) Q:'SRDFN  S SRTN=0 F  S SRTN=$O(^SRF("ARS",K,"I",SRDFN,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D OPDATE
"RTN","SROAWL1",30,0)
 I SRSEL=1 S SRTOTAL(7)=SRTOTAL(3)/20 D:'SRP INC D:SRP OUT G:SRSOUT END D:SRT TMIT
"RTN","SROAWL1",31,0)
 I SRSEL=2 D OUT
"RTN","SROAWL1",32,0)
END K SRINSTP,SRTOTAL,^TMP("SRM",$J) I SRT,SRMULT S SRP=0 S SRDIV=$O(SRDIV(SRDIV)) Q:'SRDIV  D SITE,BEG
"RTN","SROAWL1",33,0)
 Q
"RTN","SROAWL1",34,0)
CASE ; examine case
"RTN","SROAWL1",35,0)
 Q:$P($G(^SRF(SRTN,30)),"^")!$P($G(^SRF(SRTN,31)),"^",8)!'($P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,.2)),"^",3)))
"RTN","SROAWL1",36,0)
 N SRELIG S SRELIG=""
"RTN","SROAWL1",37,0)
 S SRTOTAL(1)=SRTOTAL(1)+1,SRMAJ=$S($P(^SRF(SRTN,0),"^",3)="J":1,1:0) S:SRMAJ SRTOTAL(8)=SRTOTAL(8)+1 I 'SRMAJ S SRTOTAL(9)=SRTOTAL(9)+1
"RTN","SROAWL1",38,0)
 I $$XL^SROAX(SRTN) S SRELIG=1,SRTOTAL(10)=SRTOTAL(10)+1
"RTN","SROAWL1",39,0)
 S SRA=$G(^SRF(SRTN,"RA")),SRTYPE=$P(SRA,"^",2) S:SRTYPE=""&SRMAJ SRTOTAL(4)=SRTOTAL(4)+1 S:SRTYPE="C" SRTOTAL(5)=SRTOTAL(5)+1
"RTN","SROAWL1",40,0)
 I SRTYPE=""&SRELIG S SRTOTAL(11)=SRTOTAL(11)+1
"RTN","SROAWL1",41,0)
 S SRASS=$P(SRA,"^",6) D
"RTN","SROAWL1",42,0)
 .I SRASS="N" S SRTOTAL(2)=SRTOTAL(2)+1,X=$P(SRA,"^",7) S:X'="" SREXCL(X)=SREXCL(X)+1
"RTN","SROAWL1",43,0)
 .I SRASS="Y" S SRTOTAL(3)=SRTOTAL(3)+1
"RTN","SROAWL1",44,0)
 I SRTYPE="N",SRASS="Y" S SRTOTAL(6)=SRTOTAL(6)+1
"RTN","SROAWL1",45,0)
 Q
"RTN","SROAWL1",46,0)
OPDATE ; get date of operation
"RTN","SROAWL1",47,0)
 S SRA=$G(^SRF(SRTN,"RA")) I $P(SRA,"^")'="I" K ^SRF("ARS",K,"I",SRDFN,SRTN) Q
"RTN","SROAWL1",48,0)
 S SRTYPE=$P(SRA,"^",2) I SRTYPE'=K K ^SRF("ARS",K,"I",SRDFN,SRTN) Q
"RTN","SROAWL1",49,0)
 I SRSEL=1 S SRMONTH=$E($P(^SRF(SRTN,0),"^",9),1,5)_"00" I $D(^TMP("SRM",$J,SRMONTH,K)) S ^TMP("SRM",$J,SRMONTH,K)=^TMP("SRM",$J,SRMONTH,K)+1
"RTN","SROAWL1",50,0)
 Q
"RTN","SROAWL1",51,0)
OUT ; print report
"RTN","SROAWL1",52,0)
 W:$Y @IOF W !,?(80-$L(SRINST)\2),SRINST,!,?(80-$L(SRTITLE)\2),SRTITLE,!,?(80-$L(SRM)\2),SRM,!,?15 F I=1:1:50 W "-"
"RTN","SROAWL1",53,0)
 W !,?20,"TOTAL CASES PERFORMED",?54,"=",$J(SRTOTAL(1),6),!,?24,"TOTAL ELIGIBLE CASES",?54,"=",$J(SRTOTAL(10),6)
"RTN","SROAWL1",54,0)
 ;W !,?24,"TOTAL MAJOR CASES",?54,"=",$J(SRTOTAL(8),6),!,?24,"TOTAL MINOR CASES",?54,"=",$J(SRTOTAL(9),6)
"RTN","SROAWL1",55,0)
 W !,?20,"CASES MEETING EXCLUSION CRITERIA",?54,"=",$J(SRTOTAL(2),6)
"RTN","SROAWL1",56,0)
 W !,?24,"NON-SURGEON CASE",?54,"=",$J(SREXCL(0),6)
"RTN","SROAWL1",57,0)
 W !,?24,"EXCEEDS MAX. ASSESSMENTS",?54,"=",$J(SREXCL(2),6),!,?24,"EXCEEDS MAXIMUM TURPS",?54,"=",$J(SREXCL(3),6)
"RTN","SROAWL1",58,0)
 W !,?24,"STUDY CRITERIA",?54,"=",$J(SREXCL(4),6),!,?24,"SCNR WAS ON A/L",?54,"=",$J(SREXCL(6),6)
"RTN","SROAWL1",59,0)
 W !,?24,"CONCURRENT CASE",?54,"=",$J(SREXCL(8),6),!,?24,"EXCEEDS MAXIMUM HERNIAS",?54,"=",$J(SREXCL(9),6)
"RTN","SROAWL1",60,0)
 W !,?20,"ASSESSED CASES",?54,"=",$J(SRTOTAL(3),6)
"RTN","SROAWL1",61,0)
 ;W !,?20,"NOT LOGGED MAJOR CASES",?54,"=",$J(SRTOTAL(4),6)
"RTN","SROAWL1",62,0)
 W !,?20,"NOT LOGGED ELIGIBLE CASES",?54,"=",$J(SRTOTAL(11),6)
"RTN","SROAWL1",63,0)
 W !,?20,"CARDIAC CASES",?54,"=",$J(SRTOTAL(5),6),!,?20,"NON-CARDIAC CASES",?54,"=",$J(SRTOTAL(6),6)
"RTN","SROAWL1",64,0)
 W:SRSEL=1 !,?20,"ASSESSED CASES PER DAY",?54,"=",$J(SRTOTAL(7),9,2) W !,?15 F I=1:1:50 W "-"
"RTN","SROAWL1",65,0)
 Q:SRSEL=2  I $E(IOST)="C" D PRESS Q:SRSOUT  W @IOF
"RTN","SROAWL1",66,0)
INC S (SRCT,SRT1,SRTC)=0 W:SRP !!!!,?12,"NUMBER OF INCOMPLETE ASSESSMENTS REMAINING FOR PAST YEAR",!!,?29,"CARDIAC",?40,"NON-CARDIAC",?56,"TOTAL",!,?29,"-------",?40,"-----------",?56,"-----"
"RTN","SROAWL1",67,0)
 S SRMONTH=0,SRSST="" F  S SRMONTH=$O(^TMP("SRM",$J,SRMONTH)) Q:'SRMONTH  D
"RTN","SROAWL1",68,0)
 .I SRP S Y=SRMONTH X ^DD("DD") W !,?19,Y
"RTN","SROAWL1",69,0)
 .S SRC=^TMP("SRM",$J,SRMONTH,"C"),SRN=^TMP("SRM",$J,SRMONTH,"N"),SRTO=SRC+SRN,SRCT=SRCT+SRC,SRT1=SRT1+SRN,SRTC=SRTC+SRTO,SRSST=SRSST_SRMONTH_"^"_SRC_"^"_SRN_"^"
"RTN","SROAWL1",70,0)
 .W:SRP ?30,$J(SRC,5),?43,$J(SRN,5),?55,$J(SRTO,5)
"RTN","SROAWL1",71,0)
 W:SRP !,?29,"-------",?40,"-----------",?56,"-----",!,?30,$J(SRCT,5),?43,$J(SRT1,5),?55,$J(SRTC,5)
"RTN","SROAWL1",72,0)
 Q
"RTN","SROAWL1",73,0)
TMIT ; transmit report to national database
"RTN","SROAWL1",74,0)
 S ISC=0,SRD=^XMB("NETNAME") I $E(SRD,1,3)="FO-"!(SRD["ISC-")!(SRD["ISC.")!(SRD["FORUM")!(SRD["TST")!(SRD[".FO-") S ISC=1
"RTN","SROAWL1",75,0)
 K SRMSG S SRSTATN=$P($$SITE^SROVAR,"^",3)_$S(SRDIV:"-"_SRDIV,1:""),SRMSG(1)=SRSTATN_"^"_SRDT_"^"_DT F I=1:1:9 S SRMSG(1)=SRMSG(1)_"^"_SRTOTAL(I)
"RTN","SROAWL1",76,0)
 F I=1,2,3,4,6,8,9,0 S SRMSG(1)=SRMSG(1)_"^"_SREXCL(I)
"RTN","SROAWL1",77,0)
 I SRDIV S SRMSG(1)=SRMSG(1)_"^"_SRINST_"^"_$$GET1^DIQ(4,SRINSTP,99)
"RTN","SROAWL1",78,0)
 S SRMSG(2)=SRSTATN_"^"_SRSST_SREXCL(0)
"RTN","SROAWL1",79,0)
 S SRMSG(3)=SRSTATN_"^"_$S($D(SRNOACK):SRNOACK,1:0)_"^"_SRTOTAL(10)_"^"_SRTOTAL(11)
"RTN","SROAWL1",80,0)
 S XMDUZ=.5,XMSUB="SURGERY WORKLOAD "_SRM
"RTN","SROAWL1",81,0)
 I ISC S XMY("G.RISK ASSESSMENT")=""
"RTN","SROAWL1",82,0)
 I 'ISC S (XMY("S.SRAWSERV@FO-HINES.MED.VA.GOV"),XMY("G.SRCOSERV@FO-HINES.MED.VA.GOV"))=""
"RTN","SROAWL1",83,0)
 S XMTEXT="SRMSG(" D ^XMD K XMSUB,XMY,XMDUZ,XMTEXT
"RTN","SROAWL1",84,0)
 Q
"RTN","SROAWL1",85,0)
MOS ; set up array for past 12 months
"RTN","SROAWL1",86,0)
 K SRMONTH S SRYR=$E(SRDT,1,3),SRMONTH=+$E(SRDT,4,5)
"RTN","SROAWL1",87,0)
 S J=1 F  S:$L(SRMONTH)=1 SRMONTH="0"_SRMONTH S SRMONTH(J)=SRYR_SRMONTH_"00" S SRMONTH=+SRMONTH,SRMONTH=$S(SRMONTH=1:12,1:SRMONTH-1),SRYR=$S(SRMONTH=12:SRYR-1,1:SRYR),J=J+1 Q:J>13
"RTN","SROAWL1",88,0)
 K ^TMP("SRM",$J) F I=1:1:13 F J="C","N" S ^TMP("SRM",$J,SRMONTH(I),J)=0
"RTN","SROAWL1",89,0)
 Q
"RTN","SROAWL1",90,0)
PRESS Q:$E(IOST)'="C"  K DIR S DIR(0)="E" D ^DIR K DIR I 'Y S SRSOUT=1
"RTN","SROAWL1",91,0)
 Q
"RTN","SROAWL1",92,0)
SITE S SRINSTP=SRDIV(SRDIV),SRINST=$$GET1^DIQ(4,SRINSTP,.01)
"RTN","SROAWL1",93,0)
 Q
"RTN","SROAX")
0^46^B1410911^n/a
"RTN","SROAX",1,0)
SROAX ;BIR/ADM - EXCLUSION UTILITY ;02/01/07
"RTN","SROAX",2,0)
 ;;3.0; Surgery ;**160**;24 Jun 93;Build 7
"RTN","SROAX",3,0)
 Q
"RTN","SROAX",4,0)
XL(SRCASE) ; compare CPT codes with exclusion list, return cpt code ien not excluded
"RTN","SROAX",5,0)
 N SRCODE,SRCPT,SRDATE,SROTH,SRQ,SRXCLD,Y
"RTN","SROAX",6,0)
 S (SRQ,SRXCLD)=0,SRCODE="",SRDATE=$P($G(^SRF(SRCASE,0)),"^",9)
"RTN","SROAX",7,0)
 I $G(^SRO(136,SRCASE,0)) S SRCPT=$P($G(^SRO(136,SRCASE,0)),"^",2) I SRCPT'="" D COMP I SRQ G END
"RTN","SROAX",8,0)
 S SROTH=0 F  S SROTH=$O(^SRO(136,SRCASE,3,SROTH)) Q:'SROTH  D  Q:SRQ
"RTN","SROAX",9,0)
 .S SRXCLD=0,SRCPT=$P($G(^SRO(136,SRCASE,3,SROTH,0)),"^") I SRCPT'="" D COMP
"RTN","SROAX",10,0)
END Q SRCODE
"RTN","SROAX",11,0)
COMP I $G(^SRO(137,SRCPT,0)) S SRXCLD=1 Q
"RTN","SROAX",12,0)
 I 'SRXCLD S SRQ=1,Y=$$CPT^ICPTCOD(SRCPT,SRDATE),SRCODE=$P(Y,"^") ; SRCODE=ien in file 81
"RTN","SROAX",13,0)
 Q
"RTN","SROCCAT")
0^54^B16630754^B16152950
"RTN","SROCCAT",1,0)
SROCCAT ;BIR/MAM - PERIOPERATIVE OCCURRENCE UPDATE (Y/N) FIELDS ;01/23/07
"RTN","SROCCAT",2,0)
 ;;3.0; Surgery ;**38,47,95,138,153,160**;24 Jun 93;Build 7
"RTN","SROCCAT",3,0)
 S ZTDTH=$H,ZTIO="",ZTRTN="EN^SROCCAT",ZTSAVE("SRTN")="",ZTDESC="Update Perioperative Occurrences for Individual Patient" D ^%ZTLOAD
"RTN","SROCCAT",4,0)
 Q
"RTN","SROCCAT",5,0)
EN ; entry when queued
"RTN","SROCCAT",6,0)
 K SRCOMPS S (CNT,CMP)=0 F  S CMP=$O(^SRF(SRTN,10,CMP)) Q:'CMP  S COMP=$P(^SRF(SRTN,10,CMP,0),"^",2) I COMP S CNT=CNT+1,SRCOMPS(CNT)=COMP_"^"_$P(^(0),"^",3)
"RTN","SROCCAT",7,0)
 S CMP=0 F  S CMP=$O(^SRF(SRTN,16,CMP)) Q:'CMP  S COMP=$P(^SRF(SRTN,16,CMP,0),"^",2) I COMP S SRDATE="" D
"RTN","SROCCAT",8,0)
 .S SRDATE=$E($P(^SRF(SRTN,16,CMP,0),"^",7),1,7) I SRDATE S X1=$E($P(^SRF(SRTN,0),"^",9),1,7),X2=30 D C^%DTC I SRDATE>X Q
"RTN","SROCCAT",9,0)
 .S CNT=CNT+1,SRCOMPS(CNT)=COMP_"^"_$P(^SRF(SRTN,16,CMP,0),"^",3)
"RTN","SROCCAT",10,0)
 K DR,DIE,DA S DA=SRTN,DIE=130,DR="[SRO-NOCOMP]" D ^DIE K DR,DA
"RTN","SROCCAT",11,0)
 I '$D(SRCOMPS(1)) S ZTREQ="@" Q
"RTN","SROCCAT",12,0)
 S CNT=0 F  S CNT=$O(SRCOMPS(CNT)) Q:'CNT  S COMPL=$P(SRCOMPS(CNT),"^") D UPDATE
"RTN","SROCCAT",13,0)
 S ZTREQ="@"
"RTN","SROCCAT",14,0)
 Q
"RTN","SROCCAT",15,0)
UPDATE ; update Y/N questions
"RTN","SROCCAT",16,0)
 I COMPL=1 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y;248////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",17,0)
 I COMPL=2 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y;249////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",18,0)
 I COMPL=3 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;250////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",19,0)
 I COMPL=4 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;251////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",20,0)
 I COMPL=5 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;252///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",21,0)
 I COMPL=6 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;285///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",22,0)
 I COMPL=7 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;412///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",23,0)
 I COMPL=8 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y;409///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",24,0)
 I COMPL=9 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y;254///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",25,0)
 I COMPL=10 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y;255///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",26,0)
 I COMPL=11 K DA,DR,DIE S DA=SRTN,DIE=130,DR="321////Y;259///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",27,0)
 I COMPL=12!(COMPL=28) K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y;256///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",28,0)
 I COMPL=13 K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y;410///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",29,0)
 I COMPL=14 K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y;287///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",30,0)
 I COMPL=15 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;257///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",31,0)
 I COMPL=16 K DA,DR,DIE S DA=SRTN,DIE=130,DR="321////Y;411///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",32,0)
 I COMPL=17 K DA,DR,DIE S DA=SRTN,DIE=130,DR="385///Y;321////Y;258///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",33,0)
 I COMPL=18 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;345///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",34,0)
 I COMPL=19 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;261///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",35,0)
 I COMPL=20 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;263///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",36,0)
 I COMPL=21 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",37,0)
 I COMPL=22 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y;404///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",38,0)
 I COMPL=23 K DA,DR,DIE S DA=SRTN,DIE=130,DR="386////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",39,0)
 I COMPL=24 K DA,DR,DIE S DA=SRTN,DIE=130,DR="387////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",40,0)
 I COMPL=25 K DA,DR,DIE S DA=SRTN,DIE=130,DR="388////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",41,0)
 I COMPL=26 K DA,DR,DIE S DA=SRTN,DIE=130,DR="389////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",42,0)
 I COMPL=27 K DA,DR,DIE S DA=SRTN,DIE=130,DR="391////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",43,0)
 I COMPL=29 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",44,0)
 I COMPL=30 K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",45,0)
 I COMPL=31 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",46,0)
 I COMPL=32 K DA,DR,DIE S DA=SRTN,DIE=130,DR="321////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",47,0)
 I COMPL=33 K DA,DR,DIE S DA=SRTN,DIE=130,DR="466////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",48,0)
 I COMPL=34 K DA,DR,DIE S DA=SRTN,DIE=130,DR="467////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",49,0)
 I COMPL=35 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;488////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",50,0)
 I COMPL=36 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",51,0)
 I COMPL=37 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;490///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",52,0)
 I COMPL=38 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;447////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",53,0)
 Q
"RTN","SROCL1")
0^69^B11126286^B10860164
"RTN","SROCL1",1,0)
SROCL1 ;BIR/SJA - LOAD CARDIAC LAB DATA ;02/14/07
"RTN","SROCL1",2,0)
 ;;3.0; Surgery ;**95,125,153,160**;24 Jun 93;Build 7
"RTN","SROCL1",3,0)
 ;
"RTN","SROCL1",4,0)
 ; Reference to ^LR( supported by DBIA #194
"RTN","SROCL1",5,0)
 ;
"RTN","SROCL1",6,0)
 Q:'$D(SRTN)  N SRBLUD K SRAD,SRAT S SRSOUT=0
"RTN","SROCL1",7,0)
 W !!,"This selection loads the most recent cardiac lab data for tests performed",!,"preoperatively."
"RTN","SROCL1",8,0)
YEP W !!,"Do you want to automatically load cardiac lab data ?  YES//" R SRYN:DTIME G:'$T!(SRYN["^") END
"RTN","SROCL1",9,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter <RET> to automatically load cardiac lab data from the patient's lab",!,"record, or 'NO' to return to the menu." G YEP
"RTN","SROCL1",10,0)
 I "Yy"'[SRYN W !!,"Lab data NOT loaded." G END
"RTN","SROCL1",11,0)
START S SRALR=$S($D(^DPT($P(^SRF(SRTN,0),"^"),"LR")):$P(^("LR"),"^"),1:"")
"RTN","SROCL1",12,0)
 S SRAOP=$P($G(^SRF(SRTN,.2)),U,2) I 'SRAOP S SRAOP=$P($G(^(0)),U,9) I 'SRAOP S SRSOUT=1 W !!,"No Date of Operation found !" G END
"RTN","SROCL1",13,0)
 N SREND0,SREND1,SREND1 S SRST=9999999-SRAOP,X1=SRAOP,X2=-90 D C^%DTC S SREND0=9999999-X
"RTN","SROCL1",14,0)
 S X1=SRAOP,X2=-30 D C^%DTC S SREND1=9999999-X
"RTN","SROCL1",15,0)
 S X1=SRAOP,X2=-1000 D C^%DTC S SREND2=9999999-X
"RTN","SROCL1",16,0)
SRAT ; Get test and data name(s) for test from file 139.2.
"RTN","SROCL1",17,0)
 W !!,"..Searching lab record for latest test data...."
"RTN","SROCL1",18,0)
 K DIC S DIC=61,DIC(0)="",X="SERUM" D ^DIC S SRSER=+Y K DIC S DIC=61,DIC(0)="",X="PLASMA" D ^DIC K DIC S SRP=+Y
"RTN","SROCL1",19,0)
 K DIC S DIC=61,DIC(0)="",X="BLOOD" D ^DIC S SRBLUD=+Y
"RTN","SROCL1",20,0)
 F SRAT=1,5,7,11,14,21:1:24,27 S SREND=$S("117"[SRAT:SREND1,SRAT>20:SREND2,1:SREND0) D SP^SROAL1
"RTN","SROCL1",21,0)
 D CARDIAC^SROAL11 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") I SRCON D CONCC
"RTN","SROCL1",22,0)
END I 'SRSOUT W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROCL1",23,0)
 W @IOF
"RTN","SROCL1",24,0)
 Q
"RTN","SROCL1",25,0)
CONCC ; update concurrent case
"RTN","SROCL1",26,0)
 S SRTN1=SRTN,SRTN=SRCON D CARDIAC^SROAL11 S SRTN=SRTN1
"RTN","SROCL1",27,0)
 Q
"RTN","SROCL1",28,0)
SP S SRASP=$P(^SRO(139.2,II,2),"^") K SRADT F SRADN=0:0 S SRADN=$O(^SRO(139.2,II,1,SRADN)) Q:SRADN'>0  S SRATN=$P(^(SRADN,0),"^") D LABCHK
"RTN","SROCL1",29,0)
 Q
"RTN","SROCL1",30,0)
LABCHK ; Get latest test values from patient's lab record.
"RTN","SROCL1",31,0)
 I SRALR F SRAIDT=SRST:0 S SRAIDT=$O(^LR(SRALR,"CH",SRAIDT)) Q:SRAIDT'>0!(SRAIDT>SREND)  I $D(^(SRAIDT,SRATN)) S SRSP=$P(^(0),"^",5) D
"RTN","SROCL1",32,0)
 .I SRSP=SRSER!(SRSP=SRP) D COMP Q
"RTN","SROCL1",33,0)
 I '$D(SRAT(SRAT)) S SRAT(SRAT)="NS",SRAD(SRAT)=""
"RTN","SROCL1",34,0)
 Q
"RTN","SROCL1",35,0)
COMP S SRX=$P(^LR(SRALR,"CH",SRAIDT,SRATN),"^") I $P(^LR(SRALR,"CH",SRAIDT,0),"^",3)'="","canccommentpending"'[SRX,SRX'["CANC" D DATA
"RTN","SROCL1",36,0)
 Q
"RTN","SROCL1",37,0)
DATA I $D(SRADT),SRAIDT>SRADT Q
"RTN","SROCL1",38,0)
 I +SRX'=SRX D
"RTN","SROCL1",39,0)
 .N X1,X2 S SRZ="" I "<>"[$E(SRX) S SRZ=$E(SRX),SRX=$E(SRX,2,99)
"RTN","SROCL1",40,0)
 .I SRX?.N0.1".".N D  Q
"RTN","SROCL1",41,0)
 ..S X1=$P(SRX,"."),X1=+X1 S:X1=0 X1=""
"RTN","SROCL1",42,0)
 ..S X2="."_$P(SRX,".",2),X2=+X2 S:X2=0 X2=""
"RTN","SROCL1",43,0)
 ..S SRX=X1_X2,SRX=+SRX,SRX=SRZ_SRX
"RTN","SROCL1",44,0)
 .S SRX="*"
"RTN","SROCL1",45,0)
 S SRAT(SRAT)=SRX D:SRAT(SRAT)["." DEC S SRAD(SRAT)=$E($P(^LR(SRALR,"CH",SRAIDT,0),"^"),1,7),SRADT=SRAIDT
"RTN","SROCL1",46,0)
 Q
"RTN","SROCL1",47,0)
DEC ; convert to proper decimal place
"RTN","SROCL1",48,0)
 I +SRAT(SRAT)=SRAT(SRAT)  S SRAT(SRAT)=SRAT(SRAT)+.05\.1*.1 Q
"RTN","SROCL1",49,0)
 S SR1=$E(SRAT(SRAT)),SR2=$E(SRAT(SRAT),2,99),SR2=SR2+.05\.1*.1,SRAT(SRAT)=SR1_SR2
"RTN","SROCL1",50,0)
 Q
"RTN","SROQ1A")
0^71^B31349144^B30905519
"RTN","SROQ1A",1,0)
SROQ1A ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;01/30/07
"RTN","SROQ1A",2,0)
 ;;3.0; Surgery ;**38,62,50,129,153,160**;24 Jun 93;Build 7
"RTN","SROQ1A",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ1A",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ1A",5,0)
 ;**         are prohibited.
"RTN","SROQ1A",6,0)
 ;
"RTN","SROQ1A",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROQ1A",8,0)
 ;
"RTN","SROQ1A",9,0)
CC ; occurrence categories
"RTN","SROQ1A",10,0)
 I $E(IOST,1,2)="C-" D HDR^SROQ0 Q:SRSOUT
"RTN","SROQ1A",11,0)
 W !!!,?21,"PERIOPERATIVE OCCURRENCE CATEGORIES",!,?21,"-----------------------------------",!
"RTN","SROQ1A",12,0)
WC W !,?2,"Wound Occurrences",?31,"Total",?42,"Urinary Occurrences",?71,"Total"
"RTN","SROQ1A",13,0)
 W !,?2,"A. Superficial Incisional SSI",?31,$J(SRC(1),5),?42,"A. Renal Insufficiency",?71,$J(SRC(8),5)
"RTN","SROQ1A",14,0)
 W !,?2,"B. Deep Incisional SSI",?31,$J(SRC(2),5),?42,"B. Acute Renal Failure",?71,$J(SRC(9),5)
"RTN","SROQ1A",15,0)
 W !,?2,"C. Wound Disruption",?31,$J(SRC(22),5),?42,"C. Urinary Tract Infection",?71,$J(SRC(10),5)
"RTN","SROQ1A",16,0)
 W !,?2,"D. Other",?31,$J(SRC(36),5),?42,"D. Other",?71,$J(SRC(31),5),!
"RTN","SROQ1A",17,0)
RC W !,?2,"Respiratory Occurrences",?31,"Total",?42,"CNS Occurrences",?71,"Total"
"RTN","SROQ1A",18,0)
 W !,?2,"A. Pneumonia",?31,$J(SRC(4),5),?42,"A. CVA/Stroke",?71,$J((SRC(12)+SRC(28)),5)
"RTN","SROQ1A",19,0)
 W !,?2,"B. Unplanned Intubation",?31,$J((SRC(7)+SRC(11)),5),?42,"B. Coma >24 Hours",?71,$J(SRC(13),5)
"RTN","SROQ1A",20,0)
 W !,?2,"C. Pulmonary Embolism",?31,$J(SRC(5),5),?42,"C. Peripheral Nerve Injury",?71,$J(SRC(14),5)
"RTN","SROQ1A",21,0)
 W !,?2,"D. On Ventilator >48 Hours",?31,$J(SRC(6),5),?42,"D. Other",?71,$J(SRC(30),5)
"RTN","SROQ1A",22,0)
 W !,?2,"E. Tracheostomy",?31,$J(SRC(33),5),!,?2,"F. Repeat Vent w/in 30 Days",?31,$J(SRC(37),5)
"RTN","SROQ1A",23,0)
 W !,?2,"G. Other",?31,$J(SRC(29),5)
"RTN","SROQ1A",24,0)
 I $E(IOST,1,2)="C-" D HDR^SROQ0 Q:SRSOUT  W !,?15,"PERIOPERATIVE OCCURRENCE CATEGORIES (Continued)",!
"RTN","SROQ1A",25,0)
 W !,?42,"Other Occurrences",?71,"Total"
"RTN","SROQ1A",26,0)
CARD W !,?2,"Cardiac Occurrences",?31,"Total",?42,"A. Organ/Space SSI",?71,$J(SRC(35),5)
"RTN","SROQ1A",27,0)
 W !,?2,"A. Cardiac Arrest Req. CPR",?31,$J(SRC(16),5),?42,"B. Bleeding/Transfusions",?71,$J(SRC(15),5)
"RTN","SROQ1A",28,0)
 W !,?2,"B. Myocardial Infarction",?31,$J(SRC(17),5),?42,"C. Graft/Prosthesis/Flap"
"RTN","SROQ1A",29,0)
 W !,?2,"C. Endocarditis",?31,$J(SRC(23),5),?62,"Failure",?71,$J(SRC(19),5)
"RTN","SROQ1A",30,0)
 W !,?2,"D. Low Cardiac Output >6 Hrs.",?31,$J(SRC(24),5),?42,"D. DVT/Thrombophlebitis",?71,$J(SRC(20),5)
"RTN","SROQ1A",31,0)
 W !,?2,"E. Mediastinitis",?31,$J(SRC(25),5),?42,"E. Systemic Sepsis",?71,$J(SRC(3),5)
"RTN","SROQ1A",32,0)
 W !,?2,"F. Repeat Card Surg Proc",?31,$J(SRC(27),5),?42,"F. Reoperation for Bleeding",?71,$J(SRC(26),5)
"RTN","SROQ1A",33,0)
 W !,?2,"G. New Mech Circulatory Sup",?31,$J(SRC(34),5),?42,"G. C. difficile Colitis",?71,$J(SRC(38),5)
"RTN","SROQ1A",34,0)
 W !,?2,"H. Other",?31,$J(SRC(32),5),?42,"H. Other",?71,$J(SRC(21),5)
"RTN","SROQ1A",35,0)
CLEAN ; clean wounds
"RTN","SROQ1A",36,0)
 S:'SRWC SRWC=1 W !!,?2,"Clean Wound Infection Rate: ",$J((SRIN/SRWC*100),5,1),"%"
"RTN","SROQ1A",37,0)
 Q
"RTN","SROQ1A",38,0)
BORD W !,?14 F I=1:1:51 W "*"
"RTN","SROQ1A",39,0)
 Q
"RTN","SROQ1A",40,0)
ACTION ; alert action
"RTN","SROQ1A",41,0)
 D CURRENT^SROQT W @IOF D BORD W !,?14,"*",?64,"*",!,?14,"*    The Surgical Service Quarterly Report for    *",!,?14,"*    quarter #"_SRQTR_" of fiscal year "_(SRYR+1700)_" is now due.   *",!,?14,"*",?64,"*" D BORD
"RTN","SROQ1A",42,0)
 W !!,"NOTE: The report will be transmitted automatically on "_$S(SRQTR=1:"February 14",SRQTR=2:"May 15",SRQTR=3:"August 14",1:"November 14")_" to the",!,"      national database if not manually transmitted before then."
"RTN","SROQ1A",43,0)
 K DIR S DIR("?",1)="Choose the number matching your choice of action or press the return",DIR("?")="key to continue or '^' to exit."
"RTN","SROQ1A",44,0)
 S DIR(0)="SO^1:Print report only;2:Transmit report only;3:Both print and transmit report" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y D ^SRSKILL Q
"RTN","SROQ1A",45,0)
 I Y=2 S DIR("A")="Do you want to transmit the Quarterly Report now ? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR Q:$D(DTOUT)!$D(DUOUT)!'Y  D AUTO^SROQT Q
"RTN","SROQ1A",46,0)
 I Y S SRT=$S(Y=3:1,1:0) D VAR^SROQT,IO^SROQ
"RTN","SROQ1A",47,0)
 Q
"RTN","SROQ1A",48,0)
ALERT ; send alert to SR-QUARTERLY mailgroup
"RTN","SROQ1A",49,0)
 S XQAID="SRQTR-"_SRFQ,XQAKILL=0 D DELETEA^XQALERT
"RTN","SROQ1A",50,0)
 S XQA("G.SR-QUARTERLY")="",XQAMSG="The Quarterly Report to VHA HQ for fiscal quarter #"_SRQTR_" is now due.",XQAROU="ACTION^SROQ1A",XQAID="SRQTR-"_SRFQ D SETUP^XQALERT
"RTN","SROQ1A",51,0)
 Q
"RTN","SROQ1A",52,0)
MORT ; look for operations in next quarter
"RTN","SROQ1A",53,0)
 S X1=SRSTART,X2=-30 D C^%DTC S SRSD1=9999999.999999-(X-.0001),X1=SREND,X2=30 D C^%DTC S SRED1=9999999.999999-(X+.9999)
"RTN","SROQ1A",54,0)
 S DFN=0 F  S DFN=$O(^TMP("SRDTH",$J,DFN)) Q:'DFN  D DEM^VADPT S X1=$P(VADM(6),"^"),SRD=9999999.999999-X1,X2=-30 D C^%DTC S SRD1=(9999999.999999-X) D LATER
"RTN","SROQ1A",55,0)
 Q
"RTN","SROQ1A",56,0)
LATER ; gather cases performed within 30 days of death on death patients
"RTN","SROQ1A",57,0)
 K ^TMP("SRTN",$J) S SRINV=SRED1 F  S SRINV=$O(^SRF("ADT",DFN,SRINV)) Q:'SRINV  I SRINV<SRSD1,SRINV<SRD1,SRINV>SRD S SRTN=0 F  S SRTN=$O(^SRF("ADT",DFN,SRINV,SRTN)) Q:'SRTN  D
"RTN","SROQ1A",58,0)
 .Q:$P($G(^SRF(SRTN,30)),"^")!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y")
"RTN","SROQ1A",59,0)
 .S ^TMP("SRTN",$J,$P(^SRF(SRTN,0),"^",9),SRTN)=""
"RTN","SROQ1A",60,0)
 S SRDT=0 F  S SRDT=$O(^TMP("SRTN",$J,SRDT)) Q:'SRDT  S SRTN=0 F  S SRTN=$O(^TMP("SRTN",$J,SRDT,SRTN)) Q:'SRTN  D CASE
"RTN","SROQ1A",61,0)
 Q
"RTN","SROQ1A",62,0)
CASE ; examine each case on death patients performed within 30 days of death
"RTN","SROQ1A",63,0)
 S SR(0)=^SRF(SRTN,0),SRSS=$P(SR(0),"^",4) S SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^",2),1:"ZZ")
"RTN","SROQ1A",64,0)
 S SR(0)=^SRF(SRTN,0),X=$P(SR(0),"^",4),Y=$S(X:$P(^SRO(137.45,X,0),"^",2),1:"ZZ") S SRSS=$S(Y:$P(^DIC(45.3,Y,0),"^"),1:"ZZ") I '$D(SRSPEC(SRSS)) S SRSS="ZZ"
"RTN","SROQ1A",65,0)
 S SRIOSTAT=$P(SR(0),"^",12) I SRIOSTAT'="I"&(SRIOSTAT'="O") S VAIP("D")=SRDT D IN5^VADPT S SRIOSTAT=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROQ1A",66,0)
 S SRREL=$P($G(^SRF(SRTN,.4)),"^",7) I SRREL="R" S ^TMP("SRSP",$J,DFN,(9999999-SRDT))=SRSS,^TMP("SRINOUT",$J,DFN,(9999999-SRDT))=SRIOSTAT
"RTN","SROQ1A",67,0)
 S ^TMP("SREXP",$J,DFN)=SRTN_"^"_SRSS,^TMP("SRIOD",$J,DFN)=SRTN_"^"_SRIOSTAT
"RTN","SROQ1A",68,0)
 S SRFLAG=0 D NDEX^SROQ0A
"RTN","SROQ1A",69,0)
 Q
"RTN","SROQ2")
0^72^B33278847^B33278747
"RTN","SROQ2",1,0)
SROQ2 ;BIR/ADM - SUMMARY REPORT ;01/30/07
"RTN","SROQ2",2,0)
 ;;3.0; Surgery ;**38,62,70,50,95,123,129,134,153,160**;24 Jun 93;Build 7
"RTN","SROQ2",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ2",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ2",5,0)
 ;**         are prohibited.
"RTN","SROQ2",6,0)
 ;
"RTN","SROQ2",7,0)
 S SRSOUT=0 W @IOF,!,"SUMMARY REPORT FOR SURGICAL SERVICE"
"RTN","SROQ2",8,0)
 W !!,"Enter date range for data to be included on report."
"RTN","SROQ2",9,0)
SDATE ; enter starting date
"RTN","SROQ2",10,0)
 W !,"Start with date:  " R X:DTIME I '$T!(X["^")!(X="") S SRSOUT=1 G END
"RTN","SROQ2",11,0)
 I X["?" W !,"Enter the EARLIEST date for data to be included in this report." S X="?",%DT="EX" D ^%DT G SDATE
"RTN","SROQ2",12,0)
 S %DT="EXP" D ^%DT G SDATE:Y<1 S SRSTART=Y
"RTN","SROQ2",13,0)
 I SRSTART>DT W !!,"Cannot report on operations for future dates !",! G SDATE
"RTN","SROQ2",14,0)
 S SRAC=$O(^SRF("AC",0)) I SRSTART<SRAC S Y=SRAC D DD^%DT S SRAC1=$E(Y,1,12) W !!,"NOTE: ",$S(SRAC:"No surgical case data exists before "_SRAC1_".",1:"There are no surgical cases on record !")
"RTN","SROQ2",15,0)
EDATE ; enter ending date
"RTN","SROQ2",16,0)
 W !!,"End with date:  " R X:DTIME I '$T!(X["^")!(X="") S SRSOUT=1 G END
"RTN","SROQ2",17,0)
 I X["?" W !,"Enter the LATEST date for data to be included in this report." S X="?",%DT="EX" D ^%DT G EDATE
"RTN","SROQ2",18,0)
 S %DT="EXP" D ^%DT G EDATE:Y<1 S SREND=Y
"RTN","SROQ2",19,0)
 I SRSTART>SREND W !!,"The ENDING date must be later than the BEGINNING date.  Please try again.",! G SDATE
"RTN","SROQ2",20,0)
 I SREND>DT W !!,"Cannot report on operations for future dates !",! G EDATE
"RTN","SROQ2",21,0)
 S SRFLG=0
"RTN","SROQ2",22,0)
 N SRINSTP S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,U),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,U,2))
"RTN","SROQ2",23,0)
IO W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print report on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROQ2",24,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Summary Report - Surgical Service",(ZTSAVE("SRSTART"),ZTSAVE("SRINSTP"),ZTSAVE("SREND"),ZTSAVE("SRFLG"))="",ZTRTN="EN^SROQ2" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROQ2",25,0)
EN ; entry point when queued
"RTN","SROQ2",26,0)
 D SET,^SROQ1,END
"RTN","SROQ2",27,0)
 Q
"RTN","SROQ2",28,0)
SET ; collect data
"RTN","SROQ2",29,0)
 S SRSD=SRSTART-.0001,SRED=SREND+.9999 D ZERO
"RTN","SROQ2",30,0)
 N SRXX S SRXX=$$SITE^SROVAR
"RTN","SROQ2",31,0)
 I SRFLG=1 D
"RTN","SROQ2",32,0)
 .I SRMULT D  Q
"RTN","SROQ2",33,0)
 ..S:'SRIEN SRINST=$P(SRXX,"^",2),SRSTATN=$P(SRXX,"^",3)
"RTN","SROQ2",34,0)
 ..S:'$D(SRINSTP) SRINSTP="ALL DIVISIONS",SRINST=SRINST_" - ALL DIVISIONS"
"RTN","SROQ2",35,0)
 .S SRINSTP=$P(SRXX,"^"),SRINST=$P(SRXX,"^",2),SRSTATN=+$P(SRXX,"^",3)
"RTN","SROQ2",36,0)
 I 'SRFLG D
"RTN","SROQ2",37,0)
 .I SRINSTP["ALL DIV" S SRINST=$P(SRXX,"^",2)_" - ALL DIVISIONS",SRSTATN=$P(SRXX,"^",3) Q
"RTN","SROQ2",38,0)
 .S SRINST=$$GET1^DIQ(4,SRINSTP,.01),SRSTATN=$$GET1^DIQ(4,SRINSTP,99)
"RTN","SROQ2",39,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:SRSD>SRED!('SRSD)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D CASE
"RTN","SROQ2",40,0)
 D MORT^SROQ1A,DEATH S Y=SRSTART D DD^%DT S SRSD=$E(Y,1,12) S Y=SREND D DD^%DT S SRED=$E(Y,1,12),SRYR=$E(Y,9,12) I SRFLG,$E(SRSTART,4,5)=10 S SRYR=SRYR+1
"RTN","SROQ2",41,0)
 Q
"RTN","SROQ2",42,0)
END W ! I 'SRSOUT,$E(IOST,1,2)="C-" W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROQ2",43,0)
 D KTMP W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROQ2",44,0)
 D ^SRSKILL
"RTN","SROQ2",45,0)
 K SR14,SR71,SR72,SR73,SRADMT,SRHAIR,SRHOSP,SRICNR,SRICNE,SRICNO,SRICY,SRIDP,SRINSTP,SRINV,SRIOSTAT,SRTN,SRTONE,SRTONO,SRTOV,SRVER,SRSCY,SRSCNR,SRSCNO,SRSCNE
"RTN","SROQ2",46,0)
 D ^%ZISC W @IOF
"RTN","SROQ2",47,0)
 Q
"RTN","SROQ2",48,0)
KTMP F I="SRDEATH","SRDPT","SRDREL","SRDTH","SREXP","SRINOUT","SRIOD","SRP","SRPROC","SRREL","SRSP","SRSS","SRTN" K ^TMP(I,$J)
"RTN","SROQ2",49,0)
 Q
"RTN","SROQ2",50,0)
CASE ;  examine case
"RTN","SROQ2",51,0)
 Q:$P($G(^SRF(SRTN,30)),"^")!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y")
"RTN","SROQ2",52,0)
 S SRCASES=SRCASES+1 D ^SROQ0
"RTN","SROQ2",53,0)
 Q
"RTN","SROQ2",54,0)
ZERO ; set counters to 0
"RTN","SROQ2",55,0)
 S (SRTOV,SRTONO,SRTONE,SRICY,SRICNO,SRICNR,SRICNE,SRSCY,SRSCNR,SRSCNO,SRSCNE)=0
"RTN","SROQ2",56,0)
 D KTMP S (SR60,SRADMT,SRCASES,SRCOMP,SRDPT,SREMERG,SRIN,SRINPAT,SRIX,SRMAJOR,SRMORT,SROPD,SRSOUT,SRWC)=0 F I=1:1:7 S SRASA(I)=0
"RTN","SROQ2",57,0)
 S SRSS=0 F I=50:1:62,500,501,502 S SRSPEC(I)=I,^TMP("SRSS",$J,I)="0^0^0^0",SREXP(I)=0
"RTN","SROQ2",58,0)
 S ^TMP("SRSS",$J,"ZZ")="0^0^0^0",SREXP("ZZ")=0
"RTN","SROQ2",59,0)
 K SRATT F I=9:1:14,99 S (SRATT(I),SRATT("J",I),SRATT("N",I))=0
"RTN","SROQ2",60,0)
 F SRPROC=1:1:12 S ^TMP("SRPROC",$J,SRPROC)="0^0",SRDEATH(SRPROC)=0
"RTN","SROQ2",61,0)
 S (SRINV("I"),SRINV("O"))=0 F I=1:1:38 S SRC(I)=0
"RTN","SROQ2",62,0)
 F I="C","D","N","P","S","U","O","ZZ" S SRHAIR(I)=0
"RTN","SROQ2",63,0)
 Q
"RTN","SROQ2",64,0)
DEATH ; tabulate deaths
"RTN","SROQ2",65,0)
 S SRED=SREND+.9999,SRSD=SRSTART-.0001,DFN=0 F  S DFN=$O(^TMP("SREXP",$J,DFN)) Q:'DFN  D SPEC
"RTN","SROQ2",66,0)
 S SRSS=0 F  S SRSS=$O(SREXP(SRSS)) Q:SRSS=""  S ^TMP("SRSS",$J,SRSS)=^TMP("SRSS",$J,SRSS)_"^"_SREXP(SRSS)
"RTN","SROQ2",67,0)
 S DFN=0 F  S DFN=$O(^TMP("SRDEATH",$J,DFN)) Q:'DFN  D IP
"RTN","SROQ2",68,0)
 F J=1:1:12 S ^TMP("SRPROC",$J,J)=^TMP("SRPROC",$J,J)_"^"_SRDEATH(J)
"RTN","SROQ2",69,0)
 S DFN=0 F  S DFN=$O(^TMP("SRIOD",$J,DFN)) Q:'DFN  D INOUT
"RTN","SROQ2",70,0)
 Q
"RTN","SROQ2",71,0)
SPEC ; determine related specialty
"RTN","SROQ2",72,0)
 I $O(^TMP("SRSP",$J,DFN,0))="" S Y=^TMP("SREXP",$J,DFN),SRTN=$P(Y,"^"),SRSS=$P(Y,"^",2),SRDT=$P(^SRF(SRTN,0),"^",9) Q:SRDT>SRED!(SRDT<SRSD)  S SREXP(SRSS)=SREXP(SRSS)+1,SRMORT=SRMORT+1 Q
"RTN","SROQ2",73,0)
 S SRDT=$O(^TMP("SRSP",$J,DFN,0)) I (9999999-SRDT)'>SRED&((9999999-SRDT)'<SRSD) S SRSS=^TMP("SRSP",$J,DFN,SRDT),SREXP(SRSS)=SREXP(SRSS)+1,SRMORT=SRMORT+1
"RTN","SROQ2",74,0)
 Q
"RTN","SROQ2",75,0)
IP ; determine related index procedure (if any)
"RTN","SROQ2",76,0)
 I $O(^TMP("SRP",$J,DFN,0))="" S Y=^TMP("SRDEATH",$J,DFN),SRTN=$P(Y,"^"),SRPROC=$P(Y,"^",2),SRDT=$P(^SRF(SRTN,0),"^",9) Q:SRDT>SRED!(SRDT<SRSD)  S SRDEATH(SRPROC)=SRDEATH(SRPROC)+1 Q
"RTN","SROQ2",77,0)
 S SRDT=$O(^TMP("SRP",$J,DFN,0)) I (9999999-SRDT)'>SRED&((9999999-SRDT)'<SRSD) S SRPROC=^TMP("SRP",$J,DFN,SRDT),SRDEATH(SRPROC)=SRDEATH(SRPROC)+1
"RTN","SROQ2",78,0)
 Q
"RTN","SROQ2",79,0)
INOUT ; decide if death is in or out-pat surgery death
"RTN","SROQ2",80,0)
 S SRIOSTAT="" I $O(^TMP("SRINOUT",$J,DFN,0))="" S Y=^TMP("SRIOD",$J,DFN),SRTN=$P(Y,"^"),SRIOSTAT=$P(Y,"^",2),SRDT=$P(^SRF(SRTN,0),"^",9) Q:SRDT>SRED!(SRDT<SRSD)!(SRIOSTAT'="O")  S SROPD=SROPD+1 Q
"RTN","SROQ2",81,0)
 S SRDT=$O(^TMP("SRINOUT",$J,DFN,0)) S SRIOSTAT=^TMP("SRINOUT",$J,DFN,SRDT) I (9999999-SRDT)'>SRED&((9999999-SRDT)'<SRSD)&(SRIOSTAT="O") S SROPD=SROPD+1
"RTN","SROQ2",82,0)
 Q
"RTN","SROQM1")
0^73^B26419975^B25626718
"RTN","SROQM1",1,0)
SROQM1 ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;01/30/07
"RTN","SROQM1",2,0)
 ;;3.0; Surgery ;**38,62,70,129,153,160**;24 Jun 93;Build 7
"RTN","SROQM1",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQM1",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQM1",5,0)
 ;**         are prohibited.
"RTN","SROQM1",6,0)
 ;
"RTN","SROQM1",7,0)
NDEX ; index procedures
"RTN","SROQM1",8,0)
 D BLANK S SRBLANK="" F I=1:1:31 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",9,0)
 S SRLINE=SRBLANK_"INDEX PROCEDURES" D LINE S SRLINE=SRBLANK_"----------------" D LINE
"RTN","SROQM1",10,0)
 F I=1:1:22 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",11,0)
 S SRLINE=SRBLANK_"CASES WITH" D LINE S SRBLANK="" F I=1:1:29 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",12,0)
 S SRLINE=SRBLANK_"CASES        DEATHS     OCCURRENCES" D LINE
"RTN","SROQM1",13,0)
 S SRLINE=SRBLANK_"-----        ------     -----------" D LINE
"RTN","SROQM1",14,0)
 F J=1:1:12 D IXUT
"RTN","SROQM1",15,0)
CC ; occurrence categories
"RTN","SROQM1",16,0)
 D BLANK S SRBLANK="" F I=1:1:21 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",17,0)
 S SRLINE=SRBLANK_"PERIOPERATIVE OCCURRENCE CATEGORIES" D LINE S SRLINE=SRBLANK_"-----------------------------------" D LINE
"RTN","SROQM1",18,0)
WC D BLANK S SRLINE=" Wound Occurrences            Total      Urinary Occurrences          Total" D LINE
"RTN","SROQM1",19,0)
 S SRLINE=" A. Superficial Incisional SSI"_$J(SRC(1),5)_"      A. Renal Insufficiency       "_$J(SRC(8),5) D LINE
"RTN","SROQM1",20,0)
 S SRLINE=" B. Deep Incisional SSI       "_$J(SRC(2),5)_"      B. Acute Renal Failure       "_$J(SRC(9),5) D LINE
"RTN","SROQM1",21,0)
 S SRLINE=" C. Wound Disruption          "_$J(SRC(22),5)_"      C. Urinary Tract Infection   "_$J(SRC(10),5) D LINE
"RTN","SROQM1",22,0)
 S SRLINE=" D. Other                     "_$J(SRC(36),5)_"      D. Other                     "_$J(SRC(31),5) D LINE,BLANK
"RTN","SROQM1",23,0)
RC S SRLINE=" Respiratory Occurrences      Total      CNS Occurrences              Total" D LINE
"RTN","SROQM1",24,0)
 S SRLINE=" A. Pneumonia                 "_$J(SRC(4),5)_"      A. CVA/Stroke                "_$J((SRC(12)+SRC(28)),5) D LINE
"RTN","SROQM1",25,0)
 S SRLINE=" B. Unplanned Intubation      "_$J((SRC(7)+SRC(11)),5)_"      B. Coma >24 Hours            "_$J(SRC(13),5) D LINE
"RTN","SROQM1",26,0)
 S SRLINE=" C. Pulmonary Embolism        "_$J(SRC(5),5)_"      C. Peripheral Nerve Injury   "_$J(SRC(14),5) D LINE
"RTN","SROQM1",27,0)
 S SRLINE=" D. On Ventilator >48 Hours   "_$J(SRC(6),5)_"      D. Other                     "_$J(SRC(30),5) D LINE
"RTN","SROQM1",28,0)
 S SRLINE=" E. Tracheostomy              "_$J(SRC(33),5) D LINE
"RTN","SROQM1",29,0)
 S SRLINE=" F. Repeat Vent w/in 30 Days  "_$J(SRC(37),5) D LINE
"RTN","SROQM1",30,0)
 S SRLINE=" G. Other                     "_$J(SRC(29),5) D LINE
"RTN","SROQM1",31,0)
 S SRBLANK="" F I=1:1:41 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",32,0)
 S SRLINE=SRBLANK_"Other Occurrences            Total" D LINE
"RTN","SROQM1",33,0)
CARD S SRLINE=" Cardiac Occurrences          Total      A. Organ/Space SSI           "_$J(SRC(35),5) D LINE
"RTN","SROQM1",34,0)
 S SRLINE=" A. Cardiac Arrest Req. CPR   "_$J(SRC(16),5)_"      B. Bleeding/Transfusions     "_$J(SRC(15),5) D LINE
"RTN","SROQM1",35,0)
 S SRLINE=" B. Myocardial Infarction     "_$J(SRC(17),5)_"      C. Graft/Prosthesis/Flap" D LINE
"RTN","SROQM1",36,0)
 S SRLINE=" C. Endocarditis              "_$J(SRC(23),5)_"                          Failure  "_$J(SRC(19),5) D LINE
"RTN","SROQM1",37,0)
 S SRLINE=" D. Low Cardiac Output >6 Hrs."_$J(SRC(24),5)_"      D. DVT/Thrombophlebitis      "_$J(SRC(20),5) D LINE
"RTN","SROQM1",38,0)
 S SRLINE=" E. Mediastinitis             "_$J(SRC(25),5)_"      E. Systemic Sepsis           "_$J(SRC(3),5) D LINE
"RTN","SROQM1",39,0)
 S SRLINE=" F. Repeat Card Surg Proc     "_$J(SRC(27),5)_"      F. Reoperation for Bleeding  "_$J(SRC(26),5) D LINE
"RTN","SROQM1",40,0)
 S SRLINE=" G. New Mech Circulatory Sup  "_$J(SRC(34),5)_"      G. C. difficile Colitis      "_$J(SRC(38),5) D LINE
"RTN","SROQM1",41,0)
 S SRLINE=" H. Other                     "_$J(SRC(32),5)_"      H. Other                     "_$J(SRC(21),5) D LINE,BLANK
"RTN","SROQM1",42,0)
 S:'SRWC SRWC=1 S SRLINE=" Clean Wound Infection Rate: "_$J((SRIN/SRWC*100),5,1)_"%" D LINE
"RTN","SROQM1",43,0)
 Q
"RTN","SROQM1",44,0)
IXUT ; get index procedure data from ^TMP
"RTN","SROQM1",45,0)
 F K=1:1:3 S SRP(K)=$P(^TMP("SRPROC",$J,J),"^",K)
"RTN","SROQM1",46,0)
 D IXOUT^SROQ0A D
"RTN","SROQM1",47,0)
 .I SROP["," D  S SROP=$P(SROP,",",2)
"RTN","SROQM1",48,0)
 ..I J=7 S SRLINE="    "_$P(SROP,",") D LINE
"RTN","SROQM1",49,0)
 .S SRLINE="    "_SROP S SRBLANK="" F I=1:1:(28-$L(SRLINE)) S SRBLANK=SRBLANK_" "
"RTN","SROQM1",50,0)
 S SRLINE=SRLINE_SRBLANK_$J(SRP(1),6)_"       "_$J(SRP(3),6)_"       "_$J(SRP(2),6) D LINE
"RTN","SROQM1",51,0)
 Q
"RTN","SROQM1",52,0)
BLANK ; blank line
"RTN","SROQM1",53,0)
 S ^TMP("SRMSG",$J,SRCNT)="",SRCNT=SRCNT+1
"RTN","SROQM1",54,0)
 Q
"RTN","SROQM1",55,0)
LINE ; store line in ^TMP
"RTN","SROQM1",56,0)
 S ^TMP("SRMSG",$J,SRCNT)=SRLINE,SRCNT=SRCNT+1
"RTN","SROQM1",57,0)
 Q
"RTN","SROQM1",58,0)
HAIR ; hair removal methods
"RTN","SROQM1",59,0)
 D BLANK,BLANK S SRBLANK="" F I=1:1:19 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",60,0)
 S SRLINE=SRBLANK_"PREOPERATIVE HAIR REMOVAL METHODS SUMMARY" D LINE
"RTN","SROQM1",61,0)
 S SRLINE=SRBLANK_"-----------------------------------------" D LINE
"RTN","SROQM1",62,0)
 D BLANK F I=1:1:23 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",63,0)
 S SRLINE=SRBLANK_"CASES    % OF TOTAL" D LINE
"RTN","SROQM1",64,0)
 S SRLINE=SRBLANK_"-----    ----------" D LINE
"RTN","SROQM1",65,0)
 S SRBLANK="" F I=1:1:15 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",66,0)
 S SRLINE=SRBLANK_"   TOTAL CASES PERFORMED:"_$J(SRCASES,6)_"       "
"RTN","SROQM1",67,0)
 S:SRCASES SRLINE=SRLINE_"100.0" D LINE,BLANK
"RTN","SROQM1",68,0)
 S SRLINE=SRBLANK_SRBLANK_"  CLIPPER:"_$J(SRHAIR("C"),6)_"       "
"RTN","SROQM1",69,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("C")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",70,0)
 S SRLINE=SRBLANK_"              DEPILATORY:"_$J(SRHAIR("D"),6)_"       "
"RTN","SROQM1",71,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("D")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",72,0)
 S SRLINE=SRBLANK_"         NO HAIR REMOVED:"_$J(SRHAIR("N"),6)_"       "
"RTN","SROQM1",73,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("N")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",74,0)
 S SRLINE=SRBLANK_"PATIENT REMOVED OWN HAIR:"_$J(SRHAIR("P"),6)_"       "
"RTN","SROQM1",75,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("P")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",76,0)
 S SRLINE=SRBLANK_SRBLANK_"  SHAVING:"_$J(SRHAIR("S"),6)_"       "
"RTN","SROQM1",77,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("S")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",78,0)
 N SRNDOC S SRNDOC=SRHAIR("U")+SRHAIR("ZZ")
"RTN","SROQM1",79,0)
 S SRLINE=SRBLANK_"          NOT DOCUMENTED:"_$J(SRNDOC,6)_"       "
"RTN","SROQM1",80,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRNDOC/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",81,0)
 S SRLINE=SRBLANK_SRBLANK_"    OTHER:"_$J(SRHAIR("O"),6)_"       "
"RTN","SROQM1",82,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("O")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",83,0)
 Q
"RTN","SROQT")
0^74^B35157473^B29470128
"RTN","SROQT",1,0)
SROQT ;BIR/ADM - QTRLY RPT MESSAGE TO SERVER ;02/05/07
"RTN","SROQT",2,0)
 ;;3.0; Surgery ;**38,43,62,67,70,77,50,95,123,126,129,153,160**;24 Jun 93;Build 7
"RTN","SROQT",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQT",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQT",5,0)
 ;**         are prohibited.
"RTN","SROQT",6,0)
 ;
"RTN","SROQT",7,0)
 S SRD=^XMB("NETNAME"),ISC=0 I $E(SRD,1,3)="FO-"!(SRD["ISC-")!(SRD["ISC.")!(SRD["FORUM")!(SRD["TST")!(SRD[".FO-") S ISC=1
"RTN","SROQT",8,0)
 K ^TMP("SRQTR",$J),^TMP("SRATT",$J) N SRDIV S SRDIV=$P($$SITE^SROVAR,"^",3)_$S(SRIEN:"-"_SRIEN,1:"")
"RTN","SROQT",9,0)
 S SRSMO=$E(SRSTART,4,5),SRQTR=$S(SRSMO=10:1,SRSMO="01":2,SRSMO="04":3,1:4),SRFYR=$S(SRQTR=1:$E(SRSTART,1,3)+1,1:$E(SRSTART,1,3))+1700,SRFQ=SRFYR_SRQTR
"RTN","SROQT",10,0)
 S SRNODE=SRDIV_"^1^"_SRFQ_"^"_DT_"^"_SRCASES_"^"_SRMAJOR_"^"_SRMORT_"^"_SRCOMP_"^"_SRINPAT_"^"_SREMERG_"^"_SR60 F I=1:1:7 S SRNODE=SRNODE_"^"_SRASA(I)
"RTN","SROQT",11,0)
 S SRNODE=SRNODE_"^"_SROPD_"^"_SRINV("O")_"^"_SRINV("I")_"^"_SRADMT
"RTN","SROQT",12,0)
 I SRIEN S SRNODE=SRNODE_"^"_SRINST_"^"_SRSTATN
"RTN","SROQT",13,0)
 S ^TMP("SRQTR",$J,1)=SRNODE
"RTN","SROQT",14,0)
SP S SRNODE=SRDIV_"^2" F SRSS=50:1:55 S SRNODE=SRNODE_"^"_^TMP("SRSS",$J,SRSS)
"RTN","SROQT",15,0)
 S ^TMP("SRQTR",$J,2)=SRNODE
"RTN","SROQT",16,0)
 S SRNODE=SRDIV_"^3" F SRSS=56:1:61 S SRNODE=SRNODE_"^"_^TMP("SRSS",$J,SRSS)
"RTN","SROQT",17,0)
 S ^TMP("SRQTR",$J,3)=SRNODE
"RTN","SROQT",18,0)
 S SRNODE=SRDIV_"^4" F SRSS=62,500,501,502,"ZZ" S SRNODE=SRNODE_"^"_^TMP("SRSS",$J,SRSS)
"RTN","SROQT",19,0)
 S ^TMP("SRQTR",$J,4)=SRNODE
"RTN","SROQT",20,0)
IX S SRNODE=SRDIV_"^5" F J=1:1:6 D PROC
"RTN","SROQT",21,0)
 S SRNODE=SRNODE_"^^^" F J=9:1:12 D PROC
"RTN","SROQT",22,0)
 S ^TMP("SRQTR",$J,5)=SRNODE
"RTN","SROQT",23,0)
COMP S SRNODE=SRDIV_"^6" F I=1:1:38 S SRNODE=SRNODE_"^"_SRC(I)
"RTN","SROQT",24,0)
 S ^TMP("SRQTR",$J,6)=SRNODE
"RTN","SROQT",25,0)
RES S X="" F I=1:1:14,99 S X=X_$G(SRATT(I))_"^"
"RTN","SROQT",26,0)
 S ^TMP("SRATT",$J,"TOTAL")=X
"RTN","SROQT",27,0)
 F K="J","N" S X="" D
"RTN","SROQT",28,0)
 .F I=1:1:14,99 S X=X_$G(SRATT(K,I))_"^"
"RTN","SROQT",29,0)
 .S ^TMP("SRATT",$J,K)=X
"RTN","SROQT",30,0)
 S SRNODE=SRDIV_"^7^"_SRWC_"^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",1,4)_"^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",15)
"RTN","SROQT",31,0)
 S SRNODE=SRNODE_"^"_SRIN_"^"_$P(^TMP("SRATT",$J,"J"),"^",1,4)_"^"_$P(^TMP("SRATT",$J,"J"),"^",15)_"^"_$P(^TMP("SRATT",$J,"N"),"^",1,4)_"^"_$P(^TMP("SRATT",$J,"N"),"^",15)
"RTN","SROQT",32,0)
 S SRNODE=SRNODE_"^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",5,8)_"^"_$P(^TMP("SRATT",$J,"J"),"^",5,8)_"^"_$P(^TMP("SRATT",$J,"N"),"^",5,8)
"RTN","SROQT",33,0)
 S ^TMP("SRQTR",$J,7)=SRNODE
"RTN","SROQT",34,0)
HIP S SRNODE=SRDIV_"^8" F J=7,8 D PROC
"RTN","SROQT",35,0)
 S SRNODE=SRNODE_"^"_SRTOV_"^"_SRTONO_"^"_SRTONE_"^"_SRICY_"^"_SRICNO_"^"_SRICNR_"^"_SRICNE_"^"_SRSCY_"^"_SRSCNO_"^"_SRSCNR_"^"_SRSCNE
"RTN","SROQT",36,0)
 F I="C","D","N","P","S","U","O","ZZ" S SRNODE=SRNODE_"^"_SRHAIR(I)
"RTN","SROQT",37,0)
 S ^TMP("SRQTR",$J,8)=SRNODE
"RTN","SROQT",38,0)
 S SRNODE=SRDIV_"^9^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",9,14)_"^"_$P(^TMP("SRATT",$J,"J"),"^",9,14)_"^"_$P(^TMP("SRATT",$J,"N"),"^",9,14)
"RTN","SROQT",39,0)
 S ^TMP("SRQTR",$J,9)=SRNODE
"RTN","SROQT",40,0)
MSG ; create mail message to server
"RTN","SROQT",41,0)
 S X=$$ACTIVE^XUSER(DUZ) I '+X S XMDUZ=.5
"RTN","SROQT",42,0)
 S XMSUB="QUARTERLY REPORT - SURGICAL SERVICE"
"RTN","SROQT",43,0)
 K XMY I 'ISC S (XMY("S.SRCOSERV@FO-HINES.MED.VA.GOV"),XMY("G.SRCOSERV@FO-HINES.MED.VA.GOV"))=""
"RTN","SROQT",44,0)
 I ISC S XMY("G.SR-QUARTERLY@"_SRD)=""
"RTN","SROQT",45,0)
 S XMTEXT="^TMP(""SRQTR"",$J," N I D ^XMD K ^TMP("SRQTR",$J),XMY,XMTEXT
"RTN","SROQT",46,0)
 Q:SRIEN
"RTN","SROQT",47,0)
MSG1 S XMY("G.SR-QUARTERLY@"_SRD)="",XMSUB="QUARTERLY REPORT TRANSMISSION"
"RTN","SROQT",48,0)
 S SRMSG(1)="The Quarterly Report for quarter #"_$E(SRFQ,5)_" of fiscal year "_$E(SRFQ,1,4)_" has been"
"RTN","SROQT",49,0)
 S SRMSG(2)="transmitted to the central database of Surgical Service, VHA Headquarters."
"RTN","SROQT",50,0)
 S XMTEXT="SRMSG(" N I D ^XMD K XMY,XMTEXT
"RTN","SROQT",51,0)
 D ^SROQM,SITE
"RTN","SROQT",52,0)
 Q
"RTN","SROQT",53,0)
PROC S X=^TMP("SRPROC",$J,J),SRNODE=SRNODE_"^"_$P(X,"^")_"^"_$P(X,"^",3)_"^"_$P(X,"^",2)
"RTN","SROQT",54,0)
 Q
"RTN","SROQT",55,0)
QUE ; queue creation of report to central database
"RTN","SROQT",56,0)
 W ! K %DT S %DT("A")="Queue report to run at what date/time ? ",%DT(0)="NOW",%DT("B")="NOW",%DT="AEFXT" D ^%DT I Y=-1 S SRSOUT=1 G END^SROQ
"RTN","SROQT",57,0)
 D TSK G END^SROQ
"RTN","SROQT",58,0)
TSK S ZTDTH=Y,ZTIO="",ZTDESC="Surgery Quarterly Report",(ZTSAVE("SRSTART"),ZTSAVE("SREND"),ZTSAVE("SRFLG"),ZTSAVE("SRT"))="",ZTRTN="EN^SROQT" D ^%ZTLOAD
"RTN","SROQT",59,0)
 Q
"RTN","SROQT",60,0)
EN ; entry point when queued to generate mail report only
"RTN","SROQT",61,0)
 K SRINSTP N SRDVSN,SRIEN,SRMULT S SRDVSN="",(SRCOUNT,SRIEN,SRMULT,X)=0 D
"RTN","SROQT",62,0)
 .F  S X=$O(^SRO(133,X)) Q:'X  I '$P($G(^SRO(133,X,0)),"^",21) S SRCOUNT=SRCOUNT+1,SRDVSN(X)=$P(^SRO(133,X,0),"^")
"RTN","SROQT",63,0)
 .I SRCOUNT>1 S SRMULT=1
"RTN","SROQT",64,0)
 D SET^SROQ2,SROQT I SRMULT D
"RTN","SROQT",65,0)
 .S SRIEN=0 F  S SRIEN=$O(SRDVSN(SRIEN)) Q:'SRIEN  D
"RTN","SROQT",66,0)
 ..S SRINSTP=SRDVSN(SRIEN),SRINST=$$GET1^DIQ(4,SRINSTP,.01),SRSTATN=$$GET1^DIQ(4,SRINSTP,99)
"RTN","SROQT",67,0)
 ..D SET^SROQ2,SROQT
"RTN","SROQT",68,0)
 F I="SRATT","SRDEATH","SRDPT","SRDREL","SRDTH","SREXP","SRINOUT","SRIOD","SRP","SRPROC","SRREL","SRSP","SRSS","SRTN" K ^TMP(I,$J)
"RTN","SROQT",69,0)
 S ZTREQ="@"
"RTN","SROQT",70,0)
 I SRQTR=2 D Q1 Q
"RTN","SROQT",71,0)
 I SRQTR=3 D Q2 Q
"RTN","SROQT",72,0)
 I SRQTR=4 D Q3
"RTN","SROQT",73,0)
 Q
"RTN","SROQT",74,0)
SITE ; update site parameters file
"RTN","SROQT",75,0)
 S X=$E(SRSTART,4,7),Y=$S(X="1001":1,X="0101":2,X="0401":3,1:4),SRLATE=SRYR_Y
"RTN","SROQT",76,0)
 S SRE=0 F  S SRE=$O(^SRO(133,SRE)) Q:'SRE  I $P(^SRO(133,SRE,0),"^",18)<SRLATE S $P(^(0),"^",18)=SRLATE
"RTN","SROQT",77,0)
DALERT ; delete alert
"RTN","SROQT",78,0)
 S XQAID="SRQTR-"_SRLATE,XQAKILL=0 D DELETEA^XQALERT
"RTN","SROQT",79,0)
 Q
"RTN","SROQT",80,0)
NIGHT ; determine if current quarterly report has been transmitted
"RTN","SROQT",81,0)
 D CURRENT S SRYR=SRYR+1700,SRFQ=SRYR_SRQTR,SRE=0 S SRE=$O(^SRO(133,SRE)) I $P(^SRO(133,SRE,0),"^",18)'<SRFQ Q
"RTN","SROQT",82,0)
 S SRALERT=0 I SRDAY>206&(SRDAY<214)!(SRDAY>507&(SRDAY<515))!(SRDAY>806&(SRDAY<814))!(SRDAY>1106&(SRDAY<1114)) S SRALERT=1
"RTN","SROQT",83,0)
 D:SRALERT ALERT^SROQ1A D:'SRALERT AUTO
"RTN","SROQT",84,0)
 Q
"RTN","SROQT",85,0)
CURRENT ; get current reporting quarter
"RTN","SROQT",86,0)
 S SRYR=$E(DT,1,3),SRDAY=$E(DT,4,7),SRQTR=4 I SRDAY>206 S SRQTR=$S(SRDAY<508:1,SRDAY<807:2,SRDAY<1107:3,1:4)
"RTN","SROQT",87,0)
 I SRQTR=4,SRDAY<207 S SRYR=SRYR-1
"RTN","SROQT",88,0)
 Q
"RTN","SROQT",89,0)
DATES ; get start and end dates
"RTN","SROQT",90,0)
 S SRSMO=$S(SRQTR=1:"1001",SRQTR=2:"0101",SRQTR=3:"0401",1:"0701"),SREMO=$S(SRQTR=1:"1231",SRQTR=2:"0331",SRQTR=3:"0630",1:"0930"),SRSTART=$S(SRQTR=1:SRYR-1,1:SRYR)_SRSMO,SREND=$S(SRQTR=1:SRYR-1,1:SRYR)_SREMO
"RTN","SROQT",91,0)
 Q
"RTN","SROQT",92,0)
VAR ; set report variables for non-interactive calls     
"RTN","SROQT",93,0)
 D CURRENT,DATES S SRFLG=1
"RTN","SROQT",94,0)
 Q
"RTN","SROQT",95,0)
AUTO ; automatic transmission of report
"RTN","SROQT",96,0)
 D VAR S (SRT,SRSOUT)=1 D NOW^%DTC S Y=$E(%,1,12) D TSK
"RTN","SROQT",97,0)
 Q
"RTN","SROQT",98,0)
Q1 ; transmit report for 1st quarter
"RTN","SROQT",99,0)
 S (SRFLG,SRT)=1 D NOW^%DTC S SRNOW=+$E(%,1,12)
"RTN","SROQT",100,0)
 S SRYR=$E(SRSTART,1,3),SRYR=SRYR-1,SRSTART=SRYR_"1001",SREND=SRYR_"1231" D TSK1
"RTN","SROQT",101,0)
 Q
"RTN","SROQT",102,0)
Q2 ; transmit report for 2nd quarter
"RTN","SROQT",103,0)
 S (SRFLG,SRT)=1 D NOW^%DTC S SRNOW=+$E(%,1,12)
"RTN","SROQT",104,0)
 S SRYR=$E(SRSTART,1,3),SRSTART=SRYR_"0101",SREND=SRYR_"0331" D TSK1
"RTN","SROQT",105,0)
 Q
"RTN","SROQT",106,0)
Q3 ; transmit report for 3rd quarter
"RTN","SROQT",107,0)
 S (SRFLG,SRT)=1 D NOW^%DTC S SRNOW=+$E(%,1,12)
"RTN","SROQT",108,0)
 S SRYR=$E(SRSTART,1,3),SRSTART=SRYR_"0401",SREND=SRYR_"0630" D TSK1
"RTN","SROQT",109,0)
 Q
"RTN","SROQT",110,0)
TSK1 S ZTDTH=SRNOW,ZTIO="",ZTDESC="Surgery Quarterly Report",(ZTSAVE("SRSTART"),ZTSAVE("SREND"),ZTSAVE("SRFLG"),ZTSAVE("SRT"))="",ZTRTN="EN^SROQT" D ^%ZTLOAD
"RTN","SROQT",111,0)
 Q
"RTN","SROUTL")
0^65^B43018873^B41983666
"RTN","SROUTL",1,0)
SROUTL ;BIR/ADM - UTILITY ROUTINE ;02/14/07
"RTN","SROUTL",2,0)
 ;;3.0; Surgery ;**58,62,69,77,50,88,94,100,129,134,141,142,160**;24 Jun 93;Build 7
"RTN","SROUTL",3,0)
 ;
"RTN","SROUTL",4,0)
 ; Reference to $P(^SC(SRLOC,0),"^",17) supported by DBIA #964
"RTN","SROUTL",5,0)
 ;
"RTN","SROUTL",6,0)
 Q
"RTN","SROUTL",7,0)
HDR ; display menu header
"RTN","SROUTL",8,0)
 Q:'$D(SRSITE)
"RTN","SROUTL",9,0)
 N DFN,SRCNT,SRNUM,SRSDATE,SRX,Y S (SRCNT,SRX)=0 F  S SRX=$O(^SRO(133,SRX)) Q:'SRX  I '$P($G(^SRO(133,SRX,0)),"^",21) S SRCNT=SRCNT+1
"RTN","SROUTL",10,0)
 I SRCNT>1 S SRNUM=$$GET1^DIQ(4,SRSITE("DIV"),99) S Y="Division: "_SRSITE("SITE")_"  ("_SRNUM_")" W @IOF,!,?(80-$L(Y)\2),Y
"RTN","SROUTL",11,0)
 I $G(SRTN) D
"RTN","SROUTL",12,0)
 .S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROUTL",13,0)
 .W:SRCNT'>1 @IOF W:SRCNT>1 !! W " "_VADM(1)_" ("_VA("PID")_")   Case #"_SRTN_" - "_SRSDATE
"RTN","SROUTL",14,0)
 Q
"RTN","SROUTL",15,0)
CLINIC(SRLOC,SRCASE)         ; active count clinic screen for cases
"RTN","SROUTL",16,0)
 N SRCLIN,SRX,SRY,SRZ S SRZ=$S(SRCASE:$P(^SRF(SRCASE,0),U,9),1:DT) D SC I 'SRCLIN Q 0
"RTN","SROUTL",17,0)
 Q 1
"RTN","SROUTL",18,0)
ACTCLIN(SRLOC)     ; active count clinic screen
"RTN","SROUTL",19,0)
 N SRCLIN,SRX,SRY,SRZ S SRZ=DT D SC I 'SRCLIN Q 0
"RTN","SROUTL",20,0)
 Q 1
"RTN","SROUTL",21,0)
SC N SRKL S SRCLIN=1 S SRKL=$$GET1^DIQ(44,SRLOC,2.1) I SRKL'="CLINIC"!($P(^SC(SRLOC,0),"^",17)="Y") S SRCLIN=0 Q
"RTN","SROUTL",22,0)
 S SRX=$P($G(^SC(SRLOC,"I")),"^") I 'SRX Q
"RTN","SROUTL",23,0)
 S SRY=$P($G(^SC(SRLOC,"I")),U,2) I SRZ'<SRX,((SRY="")!(SRZ<SRY)) S SRCLIN=0
"RTN","SROUTL",24,0)
 Q
"RTN","SROUTL",25,0)
INOUT ; select in/out-patient status choice for report
"RTN","SROUTL",26,0)
 K DIR S DIR("A",1)="Print "_$S($D(SRRPT):SRRPT,1:"report")_" for",DIR("A",2)="",DIR("A",5)="  I - Inpatient cases only",DIR("A",4)="  O - Outpatient cases only",DIR("A",3)="  A - All cases"
"RTN","SROUTL",27,0)
 S DIR("A",6)="",DIR("A")="Select Letter (I, O or A): ",DIR("B")=$S($D(SRB):SRB,1:"A")
"RTN","SROUTL",28,0)
 S DIR(0)="SAM^A:All Cases;O:Outpatient Cases Only;I:Inpatient Cases Only" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROUTL",29,0)
 S SRIO=Y
"RTN","SROUTL",30,0)
 Q
"RTN","SROUTL",31,0)
DATE(SRSD,SRED,SRQ)  ; starting and ending date utility (pass by reference)
"RTN","SROUTL",32,0)
 ; The following variables are returned
"RTN","SROUTL",33,0)
 ;  SRSD - starting date
"RTN","SROUTL",34,0)
 ;  SRED - ending date
"RTN","SROUTL",35,0)
 ;  SRQ  - user interrupt
"RTN","SROUTL",36,0)
 S (SRSD,SRED,SRQ)=0 W ! F  D  Q:SRED'<SRSD!SRQ
"RTN","SROUTL",37,0)
 .K %DT S %DT="AEPX",%DT("A")="Start with Date: " D ^%DT I Y<1 S SRQ=1 Q
"RTN","SROUTL",38,0)
 .S SRSD=Y
"RTN","SROUTL",39,0)
 .K %DT S %DT="AEPX",%DT("A")="End with Date: " D ^%DT I Y<1 S SRQ=1 Q
"RTN","SROUTL",40,0)
 .I Y<SRSD W !!,"The ending date must be later than the starting date.",!
"RTN","SROUTL",41,0)
 .S SRED=Y
"RTN","SROUTL",42,0)
 Q
"RTN","SROUTL",43,0)
SPEC ; select surgical specialty
"RTN","SROUTL",44,0)
 W @IOF,! S DIR("?",1)="Enter YES if you would like the report printed for all Surgical Specialties",DIR("?")="or enter NO to select a specific specialty."
"RTN","SROUTL",45,0)
 S DIR("A")="Do you want the report for all Surgical Specialties ? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROUTL",46,0)
 I 'Y W ! K DIC S DIC=137.45,DIC(0)="QEAMZ",DIC("A")="Select Surgical Specialty: ",DIC("S")="I '$P(^(0),""^"",3)" D ^DIC K DIC S:Y<0 SRSOUT=1 Q:Y<0  S SRSPEC=+Y,SRSPECN=$P(Y(0),"^")
"RTN","SROUTL",47,0)
 Q
"RTN","SROUTL",48,0)
PROC ; put procedures and CPT code in array for display
"RTN","SROUTL",49,0)
 N SRDA,X,Y K SRPROC S K=1,Y=$P(^SRF(SRTN,"OP"),"^",2),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"???") I Y'="???" D SSPRIN^SROCPT
"RTN","SROUTL",50,0)
 S X=$P(^SRF(SRTN,"OP"),"^")_$S($G(SRSUPCPT)=1:"",1:" (CPT Code: "_Y_")") I $L(X)<(SRL+1) S SRPROC(K)=X,K=K+1 G OTH
"RTN","SROUTL",51,0)
 D FORMAT
"RTN","SROUTL",52,0)
OTH S SRDA=0 F  S SRDA=$O(^SRF(SRTN,13,SRDA)) Q:'SRDA  D
"RTN","SROUTL",53,0)
 .S Y=$P($G(^SRF(SRTN,13,SRDA,2)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"???")
"RTN","SROUTL",54,0)
 .I Y'="???" D SSOTH^SROCPT
"RTN","SROUTL",55,0)
 .S X=$P(^SRF(SRTN,13,SRDA,0),"^")_$S($G(SRSUPCPT)=1:"",1:" (CPT Code: "_Y_")")
"RTN","SROUTL",56,0)
 .I $L(X)<(SRL+1) S SRPROC(K)=X,K=K+1 Q
"RTN","SROUTL",57,0)
 .D FORMAT
"RTN","SROUTL",58,0)
 Q
"RTN","SROUTL",59,0)
FORMAT I $L(X)>SRL F  D  I $L(X)<(SRL+1) S SRPROC(K)=X,K=K+1 Q
"RTN","SROUTL",60,0)
 .F I=0:1:(SRL-1) S J=SRL-I,Y=$E(X,J) I Y=" " S SRPROC(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROUTL",61,0)
 Q
"RTN","SROUTL",62,0)
DIAG ; check diagnosis input for required space in every 31 characters
"RTN","SROUTL",63,0)
 Q:$L(X)<31  N SRC,SRBL,SRDIAG,SRFLG
"RTN","SROUTL",64,0)
 S SRDIAG=X,SRFLG=0 F  D  Q:SRFLG!($L(SRDIAG)'>30)
"RTN","SROUTL",65,0)
 .S SRBL=$F(SRDIAG," ") I SRBL>32!('SRBL) S SRFLG=1 K X Q
"RTN","SROUTL",66,0)
 .S SRDIAG=$E(SRDIAG,SRBL,$L(SRDIAG))
"RTN","SROUTL",67,0)
 I '$D(X) D
"RTN","SROUTL",68,0)
 .S SRC(1)="Answer must contain at least one space in every 31 characters of length.",SRC(1,"F")="!!?5",SRC(2)="If you are using a comma (,) to separate information, leave a space after",SRC(2,"F")="!?5"
"RTN","SROUTL",69,0)
 .S SRC(3)="it.  Please re-enter the diagnosis.",SRC(3,"F")="!?5" D EN^DDIOL(.SRC)
"RTN","SROUTL",70,0)
 Q
"RTN","SROUTL",71,0)
LOCK(SRCASE) ;
"RTN","SROUTL",72,0)
 N D0,SRCONCC,SRLCK,SRNOW,SRNOW1,SRTAG,SRUSER,SRX
"RTN","SROUTL",73,0)
 S SRNOW=$$NOW^XLFDT,SRNOW1=$$FMADD^XLFDT(SRNOW,,2)
"RTN","SROUTL",74,0)
 S SRLCK=1,SRTAG="",SRCONCC=$P($G(^SRF(SRCASE,"CON")),"^")
"RTN","SROUTL",75,0)
 I $$SIGNED^SROESUTL(SRCASE)!$G(SRESIG) D SINED Q SRLCK
"RTN","SROUTL",76,0)
 L +^XTMP("SRLOCK-"_SRCASE,DUZ,$J):$S($G(DILOCKTM)>0:DILOCKTM,1:3)
"RTN","SROUTL",77,0)
 E  D E1 S SRLCK=0 Q SRLCK
"RTN","SROUTL",78,0)
 I SRCONCC D
"RTN","SROUTL",79,0)
 .L +^XTMP("SRLOCK-"_SRCONCC,DUZ,$J):$S($G(DILOCKTM)>0:DILOCKTM,1:3)
"RTN","SROUTL",80,0)
 .E  D  S SRLCK=0
"RTN","SROUTL",81,0)
 ..D E2 L -^XTMP("SRLOCK-"_SRCASE,DUZ,$J)
"RTN","SROUTL",82,0)
 D:SRLCK XTMP
"RTN","SROUTL",83,0)
 Q SRLCK
"RTN","SROUTL",84,0)
E1 S SRUSER="Another person",SRX=$O(^XTMP("SRLOCK-"_SRCASE,0))
"RTN","SROUTL",85,0)
 I SRX S SRUSER=$P($G(^VA(200,SRX,0)),"^")
"RTN","SROUTL",86,0)
 D EN^DDIOL(SRUSER_" is editing this case. Please try later.","","!,$C(7)") H 2
"RTN","SROUTL",87,0)
 Q
"RTN","SROUTL",88,0)
E2 S SRUSER="Another person",SRX=$O(^XTMP("SRLOCK-"_SRCONCC,0))
"RTN","SROUTL",89,0)
 I SRX S SRUSER=$P($G(^VA(200,SRX,0)),"^")
"RTN","SROUTL",90,0)
 D EN^DDIOL(SRUSER_" is editing the concurrent case. Please try later.","","!,$C(7)") H 2
"RTN","SROUTL",91,0)
 Q
"RTN","SROUTL",92,0)
SINED L +^XTMP("SRLOCK-"_SRCASE):$S($G(DILOCKTM)>0:DILOCKTM,1:3)
"RTN","SROUTL",93,0)
 E  D E1 S SRLCK=0 Q
"RTN","SROUTL",94,0)
 I SRCONCC D  Q:'SRLCK
"RTN","SROUTL",95,0)
 .L +^XTMP("SRLOCK-"_SRCONCC):$S($G(DILOCKTM)>0:DILOCKTM,1:3)
"RTN","SROUTL",96,0)
 .E  D  S SRLCK=0
"RTN","SROUTL",97,0)
 ..D E2 L -^XTMP("SRLOCK-"_SRCASE)
"RTN","SROUTL",98,0)
 S SRTAG="-Master"
"RTN","SROUTL",99,0)
XTMP S ^XTMP("SRLOCK-"_SRCASE,0)=SRNOW1_"^"_SRNOW_"^Surgery Case Lock"_SRTAG_"^"_$J,^XTMP("SRLOCK-"_SRCASE,DUZ,$J)=""
"RTN","SROUTL",100,0)
 I SRCONCC S ^XTMP("SRLOCK-"_SRCONCC,0)=SRNOW1_"^"_SRNOW_"^Surgery Case Lock"_SRTAG_"^"_$J,^XTMP("SRLOCK-"_SRCONCC,DUZ,$J)=""
"RTN","SROUTL",101,0)
 Q
"RTN","SROUTL",102,0)
UNLOCK(SRCASE) ; apply decremental lock
"RTN","SROUTL",103,0)
 N SRCC,SRCONCC S SRCONCC=$P($G(^SRF(SRCASE,"CON")),"^")
"RTN","SROUTL",104,0)
 L -^XTMP("SRLOCK-"_SRCASE),-^XTMP("SRLOCK-"_SRCASE,DUZ,$J) K ^XTMP("SRLOCK-"_SRCASE,DUZ,$J)
"RTN","SROUTL",105,0)
 I '$O(^XTMP("SRLOCK-"_SRCASE,0))!(($G(^XTMP("SRLOCK-"_SRCASE,0))["-Master")&($P($G(^XTMP("SRLOCK-"_SRCASE,0)),"^",4)=$J)) K ^XTMP("SRLOCK-"_SRCASE)
"RTN","SROUTL",106,0)
 I SRCONCC D
"RTN","SROUTL",107,0)
 .L -^XTMP("SRLOCK-"_SRCONCC),-^XTMP("SRLOCK-"_SRCONCC,DUZ,$J) K ^XTMP("SRLOCK-"_SRCONCC,DUZ,$J)
"RTN","SROUTL",108,0)
 .I '$O(^XTMP("SRLOCK-"_SRCONCC,0))!(($G(^XTMP("SRLOCK-"_SRCONCC,0))["-Master")&($P($G(^XTMP("SRLOCK-"_SRCONCC,0)),"^",4)=$J)) K ^XTMP("SRLOCK-"_SRCONCC)
"RTN","SROUTL",109,0)
 Q
"RTN","SROUTL",110,0)
NOCNT(SRDA) ; screen for active, non-count clinic for this division
"RTN","SROUTL",111,0)
 N SRDIV,SRKL,SRLOC,SRX,SRY,SRZ
"RTN","SROUTL",112,0)
 S SRDIV=$P($G(^SRO(133,SRDA,0)),"^"),SRLOC=Y,SRZ=DT
"RTN","SROUTL",113,0)
 I SRDIV'=$P($G(^SC(SRLOC,0)),"^",4) Q 0
"RTN","SROUTL",114,0)
 S SRKL=$$GET1^DIQ(44,SRLOC,2.1) I SRKL'="CLINIC" Q 0
"RTN","SROUTL",115,0)
 I $P(^SC(SRLOC,0),"^",17)'="Y" Q 0
"RTN","SROUTL",116,0)
 S SRX=$P($G(^SC(SRLOC,"I")),"^") I 'SRX Q 1
"RTN","SROUTL",117,0)
 S SRY=$P($G(^SC(SRLOC,"I")),U,2) I SRZ'<SRX,((SRY="")!(SRZ<SRY)) Q 0
"RTN","SROUTL",118,0)
 Q 1
"RTN","SROUTL",119,0)
DESC ; output attending code description when doing lookup
"RTN","SROUTL",120,0)
 N SRX,SRY,SRZ
"RTN","SROUTL",121,0)
 S SRX=0,SRY=Y F  S SRX=$O(^SRO(132.9,SRY,1,SRX)) Q:'SRX  S SRZ(SRX)=^SRO(132.9,SRY,1,SRX,0),SRZ(SRX,"F")="!?2"
"RTN","SROUTL",122,0)
 I $O(SRZ(0)) D EN^DDIOL(.SRZ)
"RTN","SROUTL",123,0)
 D EN^DDIOL(" ","","!")
"RTN","SROUTL",124,0)
 Q
"UP",130,130.22,-1)
130^16
"UP",130,130.22,0)
130.22
"VER")
8.0^22.0
"^DD",130,130,.04,0)
SURGERY SPECIALTY^R*P137.45'^SRO(137.45,^0;4^S DIC("S")="I '$P(^(0),U,3)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,.04,.1)
Surgical Specialty
"^DD",130,130,.04,1,0)
^.1
"^DD",130,130,.04,1,1,0)
130^ASP^MUMPS
"^DD",130,130,.04,1,1,1)
I $P(^SRF(DA,0),"^",9)'="" S ^SRF("ASP",X,$E($P(^SRF(DA,0),"^",9),1,7),DA)=DA
"^DD",130,130,.04,1,1,2)
K ^SRF("ASP",X,$E($P(^SRF(DA,0),"^",9),1,7),DA)
"^DD",130,130,.04,1,1,"%D",0)
^^3^3^2930128^^
"^DD",130,130,.04,1,1,"%D",1,0)
The ASP cross reference on the SURGERY SPECIALTY field is used by various
"^DD",130,130,.04,1,1,"%D",2,0)
reports to sort by the surgical specialty and within surgical specialty
"^DD",130,130,.04,1,1,"%D",3,0)
by date of operation.
"^DD",130,130,.04,1,2,0)
130^APCE3^MUMPS
"^DD",130,130,.04,1,2,1)
D APCE^SROPCEX
"^DD",130,130,.04,1,2,2)
Q
"^DD",130,130,.04,1,2,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,.04,1,2,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.04,1,2,"DT")
3050531
"^DD",130,130,.04,3)
Enter the assigned surgical specialty, or section, of the surgeon.
"^DD",130,130,.04,12)
Screen prevents selection of inactive entries.
"^DD",130,130,.04,12.1)
S DIC("S")="I '$P(^(0),U,3)"
"^DD",130,130,.04,21,0)
^^8^8^3070222^
"^DD",130,130,.04,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,.04,21,2,0)
This is the surgical specialty credited for doing this operative 
"^DD",130,130,.04,21,3,0)
procedure. Many reports, including the Annual Report of Surgical 
"^DD",130,130,.04,21,4,0)
Procedures, are sorted by the surgical specialty. This field should be
"^DD",130,130,.04,21,5,0)
entered prior to completion of this case. (If you enter '?' in the
"^DD",130,130,.04,21,6,0)
surgical package, it will display the entire local surgical specialty
"^DD",130,130,.04,21,7,0)
list and a copy of the national list can be found in the Operations
"^DD",130,130,.04,21,8,0)
Manual.)
"^DD",130,130,.04,"DT")
3050531
"^DD",130,130,1.09,0)
WOUND CLASSIFICATION^SX^C:CLEAN;CC:CLEAN/CONTAMINATED;D:CONTAMINATED;I:DIRTY/INFECTED;^1.0;8^I $D(^SRF(DA,"CON")),$P(^("CON"),"^") S SRFLD=1.09 D ^SROCON Q
"^DD",130,130,1.09,.1)
Wound Classification
"^DD",130,130,1.09,3)
Enter the code corresponding to the classification of the wound in relationship to the contamination and increasing risk of infection at the time of completion of the surgical procedure.
"^DD",130,130,1.09,21,0)
^^102^102^3070508^
"^DD",130,130,1.09,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,1.09,21,2,0)
Indicate whether the wound has been classified by the primary surgeon 
"^DD",130,130,1.09,21,3,0)
as:
"^DD",130,130,1.09,21,4,0)
 
"^DD",130,130,1.09,21,5,0)
>> Class 1 - Clean (C):
"^DD",130,130,1.09,21,6,0)
Respiratory, alimentary, genital, or uninfected urinary tracts are not 
"^DD",130,130,1.09,21,7,0)
entered. 
"^DD",130,130,1.09,21,8,0)
Uninfected surgical wounds. 
"^DD",130,130,1.09,21,9,0)
No inflammation is encountered. 
"^DD",130,130,1.09,21,10,0)
Closed primarily and, if necessary, drained with closed drainage. 
"^DD",130,130,1.09,21,11,0)
Surgical incisional wounds that occur with nonpenetrating (eg blunt) 
"^DD",130,130,1.09,21,12,0)
trauma should be included in this category if they meet the criteria.
"^DD",130,130,1.09,21,13,0)
 
"^DD",130,130,1.09,21,14,0)
[No hollow organ (e.g. bladder, stomach, vagina, lung, etc.) is 
"^DD",130,130,1.09,21,15,0)
entered; no breaks in aseptic technique.]
"^DD",130,130,1.09,21,16,0)
 
"^DD",130,130,1.09,21,17,0)
Examples:
"^DD",130,130,1.09,21,18,0)
 - Exploratory laparotomy 
"^DD",130,130,1.09,21,19,0)
 - Mastectomy or breast reduction 
"^DD",130,130,1.09,21,20,0)
 - Neck dissection
"^DD",130,130,1.09,21,21,0)
 - Nonpenetrating blunt trauma
"^DD",130,130,1.09,21,22,0)
 - Thyroidectomy
"^DD",130,130,1.09,21,23,0)
 - Total hip replacement
"^DD",130,130,1.09,21,24,0)
 - Vascular operations (e.g. AAA, AV fistula, CEA, aortoiliac bypass)
"^DD",130,130,1.09,21,25,0)
 - Hernia repair
"^DD",130,130,1.09,21,26,0)
 - CABG, AVR
"^DD",130,130,1.09,21,27,0)
 - Craniotomy, majority neurosurgery
"^DD",130,130,1.09,21,28,0)
 - Pleura biopsy
"^DD",130,130,1.09,21,29,0)
 - Sternotomy
"^DD",130,130,1.09,21,30,0)
 - Abdominoplasty 
"^DD",130,130,1.09,21,31,0)
 - Bone anchored hearing aids (BAHA)
"^DD",130,130,1.09,21,32,0)
 - Penile prosthesis placement
"^DD",130,130,1.09,21,33,0)
 - Dupuytren's release, finger
"^DD",130,130,1.09,21,34,0)
 - Liposuction
"^DD",130,130,1.09,21,35,0)
 - Carpal tunnel release
"^DD",130,130,1.09,21,36,0)
 - Hydrocele repair
"^DD",130,130,1.09,21,37,0)
 
"^DD",130,130,1.09,21,38,0)
>> Class 2 - Clean/Contaminated (CC): 
"^DD",130,130,1.09,21,39,0)
Respiratory, alimentary, genital, or urinary tracts are entered under 
"^DD",130,130,1.09,21,40,0)
controlled conditions and without unusual contamination. 
"^DD",130,130,1.09,21,41,0)
Specifically, procedures involving the biliary tract, appendix, vagina, 
"^DD",130,130,1.09,21,42,0)
and oropharynx are included in this category, provided no evidence of 
"^DD",130,130,1.09,21,43,0)
infection or major breaks in technique are encountered.
"^DD",130,130,1.09,21,44,0)
 
"^DD",130,130,1.09,21,45,0)
(Hollow organ entered but controlled; no inflammation; primary wound 
"^DD",130,130,1.09,21,46,0)
closure; minor break in aseptic technique; mechanical drain used.) 
"^DD",130,130,1.09,21,47,0)
 
"^DD",130,130,1.09,21,48,0)
Examples:
"^DD",130,130,1.09,21,49,0)
 - Bronchoscopy
"^DD",130,130,1.09,21,50,0)
 - Routine appendectomy
"^DD",130,130,1.09,21,51,0)
 - Cholecystectomy (e.g., any approach)
"^DD",130,130,1.09,21,52,0)
 - Laryngectomy
"^DD",130,130,1.09,21,53,0)
 - Small bowel resection
"^DD",130,130,1.09,21,54,0)
 - Oropharynx entered
"^DD",130,130,1.09,21,55,0)
 - GYN procedures
"^DD",130,130,1.09,21,56,0)
 - Vagina entered
"^DD",130,130,1.09,21,57,0)
 - Whipple pancreaticoduodenectomy
"^DD",130,130,1.09,21,58,0)
 - Pulmonary resection
"^DD",130,130,1.09,21,59,0)
 - Transurethral resection of prostate
"^DD",130,130,1.09,21,60,0)
 - Head & Neck cancer operations (e.g., oropharynx)
"^DD",130,130,1.09,21,61,0)
 - Sigmoid colectomy
"^DD",130,130,1.09,21,62,0)
 - Minor break in technique
"^DD",130,130,1.09,21,63,0)
 - Gastrointestinal or respiratory tract entered without significant
"^DD",130,130,1.09,21,64,0)
   spillage
"^DD",130,130,1.09,21,65,0)
 - Genitourinary tract entered in absence of infected urine
"^DD",130,130,1.09,21,66,0)
        
"^DD",130,130,1.09,21,67,0)
>> Class 3 - Contaminated (D): 
"^DD",130,130,1.09,21,68,0)
Open fresh, accidental (e.g. traumatic) wounds. 
"^DD",130,130,1.09,21,69,0)
Procedures that have major breaks in sterile technique (eg, open 
"^DD",130,130,1.09,21,70,0)
cardiac massage) or gross spillage from the gastrointestinal tract and
"^DD",130,130,1.09,21,71,0)
incisions in which acute, nonpurulent inflammation is encountered are
"^DD",130,130,1.09,21,72,0)
included in this category.
"^DD",130,130,1.09,21,73,0)
 
"^DD",130,130,1.09,21,74,0)
Examples:
"^DD",130,130,1.09,21,75,0)
 - Appendectomy for gangrenous appendicitis
"^DD",130,130,1.09,21,76,0)
 - Bile spillage during cholecystectomy
"^DD",130,130,1.09,21,77,0)
 - Diverticulitis
"^DD",130,130,1.09,21,78,0)
 - Laparotomy for penetrating injury with intestinal spillage
"^DD",130,130,1.09,21,79,0)
 - Entrance of genitourinary or biliary tracts in presence of infected
"^DD",130,130,1.09,21,80,0)
   urine or bile
"^DD",130,130,1.09,21,81,0)
 - Necrotic tissue without evidence of purulent drainage (e.g. dry 
"^DD",130,130,1.09,21,82,0)
   gangrene)
"^DD",130,130,1.09,21,83,0)
 
"^DD",130,130,1.09,21,84,0)
>> Class 4 - Dirty/Infected (I): 
"^DD",130,130,1.09,21,85,0)
Old traumatic wounds that have retained devitalized tissue and those 
"^DD",130,130,1.09,21,86,0)
that involve existing clinical infection or perforated viscera. This
"^DD",130,130,1.09,21,87,0)
definition suggests that the organisms causing postoperative infection 
"^DD",130,130,1.09,21,88,0)
were present in the surgical field before the procedure.
"^DD",130,130,1.09,21,89,0)
 
"^DD",130,130,1.09,21,90,0)
(Untreated, uncontrolled spillage from an internal organ; pus in 
"^DD",130,130,1.09,21,91,0)
operative wound; open suppurative wound; severe inflammation.)
"^DD",130,130,1.09,21,92,0)
 
"^DD",130,130,1.09,21,93,0)
Examples:
"^DD",130,130,1.09,21,94,0)
 - Excision and drainage of abscess 
"^DD",130,130,1.09,21,95,0)
 - Myringotomy for otitismedia 
"^DD",130,130,1.09,21,96,0)
 - Perforated bowel 
"^DD",130,130,1.09,21,97,0)
 - Peritonitis (abdominal exploration for acute bacterial peritonitis)
"^DD",130,130,1.09,21,98,0)
 - Acute bacterial inflammation, without pus 
"^DD",130,130,1.09,21,99,0)
 - Transection of 'clean' tissue for the purpose of surgical access to 
"^DD",130,130,1.09,21,100,0)
   a collection of pus
"^DD",130,130,1.09,21,101,0)
 - Traumatic wound with foreign bodies, fecal contamination, or delayed
"^DD",130,130,1.09,21,102,0)
   treatment, or all of these; or from dirty source
"^DD",130,130,1.09,"DT")
3060421
"^DD",130,130,102,0)
REASON FOR NO ASSESSMENT^*S^0:NON-SURGEON CASE;1:ANESTHESIA TYPE;2:EXCEEDS MAX ASSMNTS;3:EXCEEDS MAX TURPS;4:STUDY CRITERIA;5:PREVIOUS CASE;6:SCNR ON A/L;7:PRIOR INDEX PROC;8:CONCURRENT CASE;9:EXCEEDS MAX HERNIAS;^RA;7^Q
"^DD",130,130,102,.1)
Reason for not Creating an Assessment
"^DD",130,130,102,3)
Enter the reason why no assessment was done on this surgical case.
"^DD",130,130,102,12)
Screen prevents selection of inactive codes.
"^DD",130,130,102,12.1)
S DIC("S")="I ""157""'[Y"
"^DD",130,130,102,21,0)
^^13^13^3070123^
"^DD",130,130,102,21,1,0)
This is the reason why no assessment was entered for this particular
"^DD",130,130,102,21,2,0)
surgical case. It should be entered if any major procedure was excluded
"^DD",130,130,102,21,3,0)
from the risk assessment module.
"^DD",130,130,102,21,4,0)
 
"^DD",130,130,102,21,5,0)
 0 - Non-surgeon performed the procedure
"^DD",130,130,102,21,6,0)
 2 - Number of surgical cases entered into the Surgical Risk Study 
"^DD",130,130,102,21,7,0)
     exceeded 36 over an 8 day time frame
"^DD",130,130,102,21,8,0)
 3 - Number of TURPs or TURBTs exceeded 5 cases over an 8 day time
"^DD",130,130,102,21,9,0)
     frame
"^DD",130,130,102,21,10,0)
 4 - Study exclusion criteria prohibits patient entry
"^DD",130,130,102,21,11,0)
 6 - Surgical Clinical Nurse Reviewer was on Annual Leave
"^DD",130,130,102,21,12,0)
 8 - Case was a concurrent case, secondary to an assessed primary case
"^DD",130,130,102,21,13,0)
 9 - Number of hernias exceeded 5 cases over an 8 day time frame
"^DD",130,130,102,"DT")
3070123
"^DD",130,130,202,0)
CURRENT SMOKER^S^Y:YES;N:NO;NS:NO STUDY;^200;3^Q
"^DD",130,130,202,.1)
Current Smoker
"^DD",130,130,202,3)
Enter the code (YES or NO) describing the patient's status as a smoker prior to surgery.
"^DD",130,130,202,21,0)
^.001^4^4^3070123^^
"^DD",130,130,202,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,202,21,2,0)
If the patient has smoked cigarettes in the year prior to admission for
"^DD",130,130,202,21,3,0)
surgery enter YES. Do not include patients who smoke cigars or pipes or
"^DD",130,130,202,21,4,0)
use chewing tobacco.
"^DD",130,130,202,"DT")
3070123
"^DD",130,130,203,0)
HISTORY OF COPD^S^Y:YES;N:NO;^200;11^Q
"^DD",130,130,203,.1)
History of Severe COPD (Y/N)
"^DD",130,130,203,3)
Enter 'YES' if the patient has a defined condition of COPD.
"^DD",130,130,203,21,0)
^^39^39^3070213^
"^DD",130,130,203,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,203,21,2,0)
Chronic obstructive pulmonary disease (such as emphysema and/or 
"^DD",130,130,203,21,3,0)
chronic bronchitis) resulting in any one or more of the following:
"^DD",130,130,203,21,4,0)
 
"^DD",130,130,203,21,5,0)
 - Functional disability from COPD (e.g., dyspnea, inability to perform
"^DD",130,130,203,21,6,0)
   ADLs)
"^DD",130,130,203,21,7,0)
 - Hospitalization in the past for treatment of COPD
"^DD",130,130,203,21,8,0)
 - Requires chronic bronchodilator therapy with oral or inhaled agents 
"^DD",130,130,203,21,9,0)
   (see list of bronchodilators below)
"^DD",130,130,203,21,10,0)
 - An FEV1 of <75% of predicted on pulmonary function testing
"^DD",130,130,203,21,11,0)
 
"^DD",130,130,203,21,12,0)
Do not include patients whose only pulmonary disease is acute asthma, 
"^DD",130,130,203,21,13,0)
an acute and chronic inflammatory disease of the airways resulting in
"^DD",130,130,203,21,14,0)
bronchospasm. Do not include patients with diffuse interstitial
"^DD",130,130,203,21,15,0)
fibrosis or sarcoidosis.
"^DD",130,130,203,21,16,0)
 
"^DD",130,130,203,21,17,0)
(This list may not be all-inclusive. Please check your hospital 
"^DD",130,130,203,21,18,0)
formulary)
"^DD",130,130,203,21,19,0)
                       Bronchodilators
"^DD",130,130,203,21,20,0)
                    Trade Name (Generic)                     
"^DD",130,130,203,21,21,0)
                    --------------------                     
"^DD",130,130,203,21,22,0)
                   Atrovent (Ipratropium)                    
"^DD",130,130,203,21,23,0)
            Combivent, Duoneb (Ipratropium/Albuterol)        
"^DD",130,130,203,21,24,0)
               Alupent, Metaprel (Metaproterenol)            
"^DD",130,130,203,21,25,0)
                    Maxair (Pirbuterol)                      
"^DD",130,130,203,21,26,0)
                   Serevent (Salmeterol)                     
"^DD",130,130,203,21,27,0)
    Ventolin, Accuneb, Vospire, Proventil, Volmax (Albuterol)
"^DD",130,130,203,21,28,0)
            Uniphyll, Theo-Dur, Uni-Dur (Theophylline)       
"^DD",130,130,203,21,29,0)
                   Xopenex (Levalbuterol)                    
"^DD",130,130,203,21,30,0)
                   Brethine (Terbutaline)                    
"^DD",130,130,203,21,31,0)
                   Lufyllin (Dyphylline)                     
"^DD",130,130,203,21,32,0)
                Spiriva (Tiotropium bromide)                 
"^DD",130,130,203,21,33,0)
                Foradil (Formoterol fumarate)                 
"^DD",130,130,203,21,34,0)
 
"^DD",130,130,203,21,35,0)
CICSP Definition (2004):
"^DD",130,130,203,21,36,0)
Indicate if the patient has chronic obstructive pulmonary disease 
"^DD",130,130,203,21,37,0)
(COPD) resulting in functional disability, and/or hospitalization, 
"^DD",130,130,203,21,38,0)
and/or requiring chronic bronchodilator therapy, and/or an FEV1 of 
"^DD",130,130,203,21,39,0)
less than 75% of predicted.
"^DD",130,130,203,"DT")
3040715
"^DD",130,130,207,0)
CONGESTIVE HEART FAILURE^S^I:CARDIAC DISEASE, NO LIMITATION;II:SLIGHT LIMITATION;III:MARKED LIMITATION;IV:SYMPTOMS AT REST;^206;19^Q
"^DD",130,130,207,.1)
Congestive Heart Failure (use NYHA Functional Class)
"^DD",130,130,207,3)
Enter the NYHA Class associated with the severity of Congestive Heart Failure in the 30 days preceding surgery.
"^DD",130,130,207,21,0)
^^49^49^3070320^
"^DD",130,130,207,21,1,0)
CICSP Definition (2007):
"^DD",130,130,207,21,2,0)
Indicate whether the patient has congestive heart failure if the 
"^DD",130,130,207,21,3,0)
patient chart or patient self-report indicates a history of congestive 
"^DD",130,130,207,21,4,0)
heart failure within the 30 days before surgery. Congestive heart
"^DD",130,130,207,21,5,0)
failure is defined as the inability of the heart to pump a sufficient
"^DD",130,130,207,21,6,0)
quantity of blood to meet the metabolic needs of the body or can do so
"^DD",130,130,207,21,7,0)
only at increased ventricular filling pressure. Common manifestations
"^DD",130,130,207,21,8,0)
are identified:
"^DD",130,130,207,21,9,0)
 
"^DD",130,130,207,21,10,0)
From the history:
"^DD",130,130,207,21,11,0)
 1) Abnormal limitation in exercise tolerance due to dyspnea, fatigue 
"^DD",130,130,207,21,12,0)
    or angina.
"^DD",130,130,207,21,13,0)
 2) Orthopnea (dyspnea on lying supine).
"^DD",130,130,207,21,14,0)
 3) Paroxysmal nocturnal dyspnea (PND) - awakening from sleep with 
"^DD",130,130,207,21,15,0)
    dyspnea which is relieved by assuming an upright posture).
"^DD",130,130,207,21,16,0)
 
"^DD",130,130,207,21,17,0)
From the physical examination:
"^DD",130,130,207,21,18,0)
 4) Increased jugular venous pressure.
"^DD",130,130,207,21,19,0)
 5) Pulmonary rales on physical examination.
"^DD",130,130,207,21,20,0)
 
"^DD",130,130,207,21,21,0)
From the chest x-ray:
"^DD",130,130,207,21,22,0)
 6) Cardiomegaly, and 
"^DD",130,130,207,21,23,0)
 7) Pulmonary vascular engorgement. 
"^DD",130,130,207,21,24,0)
 
"^DD",130,130,207,21,25,0)
The New York Heart Association functional classification is commonly
"^DD",130,130,207,21,26,0)
used as a subjective assessment of the severity of congestive heart
"^DD",130,130,207,21,27,0)
failure. If none of the above manifestations have been present, or
"^DD",130,130,207,21,28,0)
congestive heart failure is not mentioned as an active problem in the
"^DD",130,130,207,21,29,0)
30 days before surgery, indicate Class I. Any mention of above
"^DD",130,130,207,21,30,0)
manifestations requires the indication of a stage other than Class I.
"^DD",130,130,207,21,31,0)
Indicate the one most appropriate response:
"^DD",130,130,207,21,32,0)
 
"^DD",130,130,207,21,33,0)
Class I - cardiac disease, but no symptoms of abnormal fatigue, dyspnea
"^DD",130,130,207,21,34,0)
or angina.
"^DD",130,130,207,21,35,0)
 
"^DD",130,130,207,21,36,0)
Class II - slight limitation of physical activity by fatigue, dyspnea,
"^DD",130,130,207,21,37,0)
or angina. The patient gets unusual fatigue, dyspnea, and/or angina
"^DD",130,130,207,21,38,0)
only upon performing more strenuous activities, such as climbing two or
"^DD",130,130,207,21,39,0)
more flights of stairs without stopping. 
"^DD",130,130,207,21,40,0)
 
"^DD",130,130,207,21,41,0)
Class III - marked limitation of physical activity by fatigue, dyspnea,
"^DD",130,130,207,21,42,0)
or angina. The patient gets unusual fatigue, dyspnea, and/or angina
"^DD",130,130,207,21,43,0)
upon performing ordinary activities, such as walking several blocks or
"^DD",130,130,207,21,44,0)
climbing a flight of stairs. 
"^DD",130,130,207,21,45,0)
 
"^DD",130,130,207,21,46,0)
Class IV - symptoms at rest and/or inability to carry out any physical
"^DD",130,130,207,21,47,0)
activity without symptoms of fatigue, dyspnea or angina. The patient
"^DD",130,130,207,21,48,0)
has symptoms of unusual fatigue, dyspnea, and/or angina at rest or when
"^DD",130,130,207,21,49,0)
performing minimal activity, such as walking across the room.
"^DD",130,130,207,"DT")
3070320
"^DD",130,130,215,0)
WEIGHT LOSS > 10%^S^Y:YES;N:NO;NS:NO STUDY;^200;48^Q
"^DD",130,130,215,.1)
Weight Loss >10% in the 6 Months Prior to Surgery
"^DD",130,130,215,3)
Enter YES if the body weight loss is more than 10% in the 6 months prior to surgery.
"^DD",130,130,215,21,0)
^^6^6^3070213^
"^DD",130,130,215,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,215,21,2,0)
A >10% decrease in body weight in the six month interval immediately
"^DD",130,130,215,21,3,0)
preceding surgery as manifested by serial weights in the chart, as
"^DD",130,130,215,21,4,0)
reported by the patient, or as evidenced by change in clothing size or
"^DD",130,130,215,21,5,0)
severe cachexia. Exclude patients who have intentionally lost weight
"^DD",130,130,215,21,6,0)
as part of a weight reduction program.
"^DD",130,130,215,"DT")
3040316
"^DD",130,130,216,0)
BLEEDING DISORDERS^S^Y:YES;N:NO;NS:NO STUDY;^200;49^Q
"^DD",130,130,216,.1)
History of Bleeding Disorders (Y/N)
"^DD",130,130,216,3)
Enter YES if the patient has a history of a bleeding disorder.
"^DD",130,130,216,21,0)
^^66^66^3070213^
"^DD",130,130,216,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,216,21,2,0)
Any condition that places the patient at risk for excessive bleeding 
"^DD",130,130,216,21,3,0)
requiring hospitalization due to a deficiency of blood clotting 
"^DD",130,130,216,21,4,0)
elements (e.g., vitamin K deficiency, hemophilias, thrombocytopenia, 
"^DD",130,130,216,21,5,0)
chronic anticoagulation therapy that has not been discontinued prior to 
"^DD",130,130,216,21,6,0)
surgery). Do not include the patient on chronic aspirin therapy. 
"^DD",130,130,216,21,7,0)
 
"^DD",130,130,216,21,8,0)
Following is a list of medications that impact the patient's risk for  
"^DD",130,130,216,21,9,0)
bleeding. Please utilize the associated time frames for discontinuation
"^DD",130,130,216,21,10,0)
of medication to determine your answer to this variable. The time frames
"^DD",130,130,216,21,11,0)
are up to and including the day or hour listed. If there is no
"^DD",130,130,216,21,12,0)
documentation of discontinuation of medication, answer 'yes' for
"^DD",130,130,216,21,13,0)
bleeding disorder. Do not utilize the lab values to determine the answer
"^DD",130,130,216,21,14,0)
to this variable.
"^DD",130,130,216,21,15,0)
 
"^DD",130,130,216,21,16,0)
-Anticoagulants
"^DD",130,130,216,21,17,0)
                                Stop before procedure 
"^DD",130,130,216,21,18,0)
  Brand Name (Generic)                  time
"^DD",130,130,216,21,19,0)
  ------------------------      ---------------------
"^DD",130,130,216,21,20,0)
  Arixtra (Fondaparinux)                4 days
"^DD",130,130,216,21,21,0)
  Coumadin (Warfarin)                   4 days
"^DD",130,130,216,21,22,0)
  Fragmin (Dalteparin)                 24 hours
"^DD",130,130,216,21,23,0)
  Heparin - standard                    6 hours
"^DD",130,130,216,21,24,0)
  Heparin - unfractionated              6 hours
"^DD",130,130,216,21,25,0)
  Heparin- Low molecular weight        24 hours
"^DD",130,130,216,21,26,0)
  Lovenox (Enoxaparin)                 28 hours
"^DD",130,130,216,21,27,0)
          (Pentasaccaride)              4 days
"^DD",130,130,216,21,28,0)
          (APC)                        12 hours
"^DD",130,130,216,21,29,0)
          (Ximelagatran)               24 hours
"^DD",130,130,216,21,30,0)
 
"^DD",130,130,216,21,31,0)
-Antiplatelet Agents
"^DD",130,130,216,21,32,0)
                                Stop before procedure 
"^DD",130,130,216,21,33,0)
  Brand Name (Generic)                  time
"^DD",130,130,216,21,34,0)
  ------------------------      ---------------------
"^DD",130,130,216,21,35,0)
  Aggrastat (Tirofiban)                12 hours
"^DD",130,130,216,21,36,0)
  Aggrenox (ASA/Dipyridamole)          48 hours
"^DD",130,130,216,21,37,0)
  Agrylin (Anagrelide HCL)              3 days
"^DD",130,130,216,21,38,0)
  Integrilin (Eptifibatide)            12 hours
"^DD",130,130,216,21,39,0)
  Persantine (Dipyridamole)            48 hours
"^DD",130,130,216,21,40,0)
  Plavix (Clopidogrel)                  5 days
"^DD",130,130,216,21,41,0)
  Pletal (Cilostazol)                  2-4 days
"^DD",130,130,216,21,42,0)
  ReoPro (Abciximab)                   96 hours
"^DD",130,130,216,21,43,0)
  Ticlid (Ticlopidine)                 10 days
"^DD",130,130,216,21,44,0)
 
"^DD",130,130,216,21,45,0)
 
"^DD",130,130,216,21,46,0)
-Thrombin Inhibitors
"^DD",130,130,216,21,47,0)
                                Stop before procedure 
"^DD",130,130,216,21,48,0)
  Brand Name (Generic)                  time
"^DD",130,130,216,21,49,0)
  ------------------------      ---------------------
"^DD",130,130,216,21,50,0)
  Angiomax (Bevalirudin)                8 hours
"^DD",130,130,216,21,51,0)
  Argatroban, 
"^DD",130,130,216,21,52,0)
  Novastan (Argatroban)                 4 hours
"^DD",130,130,216,21,53,0)
  Refludan (Lepirudin, hirudin)         8 hours
"^DD",130,130,216,21,54,0)
  Xigris (Drotrecogin alpha)            6 hours
"^DD",130,130,216,21,55,0)
 
"^DD",130,130,216,21,56,0)
 
"^DD",130,130,216,21,57,0)
-Thrombolytic Agents
"^DD",130,130,216,21,58,0)
                                Stop before procedure 
"^DD",130,130,216,21,59,0)
  Brand Name (Generic)                  time
"^DD",130,130,216,21,60,0)
  ------------------------      ---------------------
"^DD",130,130,216,21,61,0)
  Activase (Alteplase)                  4 hours
"^DD",130,130,216,21,62,0)
  Retavase (Reteplase)                  4 hours
"^DD",130,130,216,21,63,0)
  THKase (Tenecteplase)                 8 hours
"^DD",130,130,216,21,64,0)
  Streptase, 
"^DD",130,130,216,21,65,0)
  kabikinase (Streptokinase)           24 hours
"^DD",130,130,216,21,66,0)
  Alteplase (tPA)                      40 hours
"^DD",130,130,216,"DT")
3040317
"^DD",130,130,218,0)
OPEN WOUND^S^Y:YES;N:NO;NS:NO STUDY;^200;46^Q
"^DD",130,130,218,.1)
Open Wound With or Without Infection (Y/N)
"^DD",130,130,218,3)
Enter YES if the patient has an open wound with or without infection.
"^DD",130,130,218,21,0)
^^6^6^3070305^
"^DD",130,130,218,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,218,21,2,0)
Evidence of an open wound that communicates to the air by direct 
"^DD",130,130,218,21,3,0)
exposure, with or without cellulitis or purulent exudate. This does not
"^DD",130,130,218,21,4,0)
include osteomyelitis or localized abscesses. The wound must 
"^DD",130,130,218,21,5,0)
communicate to the air by direct exposure. Report mandible fractures 
"^DD",130,130,218,21,6,0)
under this preoperative variable.
"^DD",130,130,218,"DT")
3040316
"^DD",130,130,218.1,0)
PREOPERATIVE SEPSIS^*S^Y:YES;N:NONE;1:SIRS;2:SEPSIS;3:SEPTIC SHOCK;NS:NO STUDY;^206;8^Q
"^DD",130,130,218.1,.1)
Preoperative Sepsis in the 48 Hours Prior to Surgery
"^DD",130,130,218.1,3)
Enter the patient's septic status in the 48 hours prior to surgery.
"^DD",130,130,218.1,12)
Screen prevents selection of retired codes.
"^DD",130,130,218.1,12.1)
S DIC("S")="I Y'=""Y"""
"^DD",130,130,218.1,21,0)
^^39^39^3070221^
"^DD",130,130,218.1,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,218.1,21,2,0)
Sepsis is a vast clinical entity that takes a variety of forms. The 
"^DD",130,130,218.1,21,3,0)
spectrum of disorders spans from relatively mild physiologic 
"^DD",130,130,218.1,21,4,0)
abnormalities to septic shock. Please report the most significant level
"^DD",130,130,218.1,21,5,0)
using the criteria below:
"^DD",130,130,218.1,21,6,0)
 
"^DD",130,130,218.1,21,7,0)
1. SIRS (Systemic Inflammatory Response Syndrome): SIRS is a widespread 
"^DD",130,130,218.1,21,8,0)
   inflammatory response to a variety of severe clinical insults. This 
"^DD",130,130,218.1,21,9,0)
   syndrome is clinically recognized by the presence of two or more of 
"^DD",130,130,218.1,21,10,0)
   the following:
"^DD",130,130,218.1,21,11,0)
 
"^DD",130,130,218.1,21,12,0)
      - Temp >38 degrees C or <36 degrees C
"^DD",130,130,218.1,21,13,0)
      - HR >90 bpm
"^DD",130,130,218.1,21,14,0)
      - RR >20 breaths/min or PaCO2 <32 mmHg(<4.3 kPa)
"^DD",130,130,218.1,21,15,0)
      - WBC >12,000 cell/mm3, <4000 cells/mm3, or >10% immature (band) 
"^DD",130,130,218.1,21,16,0)
        forms
"^DD",130,130,218.1,21,17,0)
      - Anion gap acidosis: this is defined by either:
"^DD",130,130,218.1,21,18,0)
         [Na + K] - [Cl + HCO3 (or serum CO2)]. If this number is 
"^DD",130,130,218.1,21,19,0)
         greater than 16, then an anion gap acidosis is present.
"^DD",130,130,218.1,21,20,0)
        or
"^DD",130,130,218.1,21,21,0)
         Na - [Cl + HCO3 (or serum CO2)]. If this number is greater 
"^DD",130,130,218.1,21,22,0)
         than 12, then an anion gap acidosis is present.
"^DD",130,130,218.1,21,23,0)
        
"^DD",130,130,218.1,21,24,0)
 
"^DD",130,130,218.1,21,25,0)
2. Sepsis: Sepsis is the systemic response to infection. Report this 
"^DD",130,130,218.1,21,26,0)
   variable if the patient has clinical signs and symptoms of SIRS 
"^DD",130,130,218.1,21,27,0)
   listed above and one of the following:
"^DD",130,130,218.1,21,28,0)
      - positive blood culture
"^DD",130,130,218.1,21,29,0)
      - clinical documentation of purulence or positive culture from 
"^DD",130,130,218.1,21,30,0)
        any site thought to be causative
"^DD",130,130,218.1,21,31,0)
 
"^DD",130,130,218.1,21,32,0)
3. Severe Sepsis/Septic Shock: Sepsis is considered severe when it is
"^DD",130,130,218.1,21,33,0)
   associated with organ and/or circulatory dysfunction. Report this 
"^DD",130,130,218.1,21,34,0)
   variable if the patient has the clinical signs and symptoms of SIRS 
"^DD",130,130,218.1,21,35,0)
   or sepsis AND documented organ and/or circulatory dysfunction.
"^DD",130,130,218.1,21,36,0)
   Examples of organ dysfunction include: oliguria, acute alteration in
"^DD",130,130,218.1,21,37,0)
   mental status, acute respiratory distress. Examples of circulatory
"^DD",130,130,218.1,21,38,0)
   dysfunction include: hypotension, requirement of inotropic or
"^DD",130,130,218.1,21,39,0)
   vasopressor agents.  
"^DD",130,130,218.1,"DT")
3040323
"^DD",130,130,220,0)
PREVIOUS PCI^S^Y:YES;N:NO;NS:NO STUDY;^200;32^Q
"^DD",130,130,220,.1)
Previous PCI (Y/N)
"^DD",130,130,220,3)
Enter 'Y' if this patient has undergone a percutaneous coronary intervention (PCI).
"^DD",130,130,220,21,0)
^^5^5^3070305^
"^DD",130,130,220,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,220,21,2,0)
The patient has undergone or has had an attempt at percutaneous 
"^DD",130,130,220,21,3,0)
coronary intervention at any time. This includes either balloon
"^DD",130,130,220,21,4,0)
dilatation or stent placement. This does not include valvuloplasty
"^DD",130,130,220,21,5,0)
procedures. 
"^DD",130,130,220,"DT")
3060117
"^DD",130,130,239,0)
PREOPERATIVE HEMOGLOBIN, DATE^DX^^202;20^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,239,.1)
Date Preoperative Hemoglobin was Performed
"^DD",130,130,239,3)
Enter the date preop Hemoglobin was performed.
"^DD",130,130,239,21,0)
^^1^1^2970911^^
"^DD",130,130,239,21,1,0)
This is the date that the preoperative hemoglobin test was performed.
"^DD",130,130,239,"DT")
3070119
"^DD",130,130,250,0)
SYSTEMIC SEPSIS^S^Y:YES;N:NO;NS:NO STUDY;^205;35^Q
"^DD",130,130,250,.1)
Systemic Sepsis
"^DD",130,130,250,3)
Enter YES if the patient has been diagnosed as having postoperative systemic sepsis.
"^DD",130,130,250,21,0)
^^65^65^3070221^
"^DD",130,130,250,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,250,21,2,0)
Sepsis is a vast clinical entity that takes a variety of forms. The 
"^DD",130,130,250,21,3,0)
spectrum of disorders spans from relatively mild physiologic 
"^DD",130,130,250,21,4,0)
abnormalities to septic shock. Please report the most significant level
"^DD",130,130,250,21,5,0)
using the criteria below:
"^DD",130,130,250,21,6,0)
 
"^DD",130,130,250,21,7,0)
1. Sepsis: Sepsis is the systemic response to infection. Report this 
"^DD",130,130,250,21,8,0)
variable if the patient has clinical signs and symptoms of SIRS. SIRS 
"^DD",130,130,250,21,9,0)
is a widespread inflammatory response to a variety of severe clinical
"^DD",130,130,250,21,10,0)
insults. This syndrome is clinically recognized by the presence of two 
"^DD",130,130,250,21,11,0)
or more of the following:
"^DD",130,130,250,21,12,0)
   - Temp >38 degrees C or <36 degrees C
"^DD",130,130,250,21,13,0)
   - HR >90 bpm
"^DD",130,130,250,21,14,0)
   - RR >20 breaths/min or PaCO2 <32 mmHg(<4.3 kPa)
"^DD",130,130,250,21,15,0)
   - WBC >12,000 cell/mm3, <4000 cells/mm3, or >10% immature (band) 
"^DD",130,130,250,21,16,0)
     forms
"^DD",130,130,250,21,17,0)
   - Anion gap acidosis: this is defined by either:
"^DD",130,130,250,21,18,0)
      [Na + K] - [Cl + HCO3 (or serum CO2)]. If this number is 
"^DD",130,130,250,21,19,0)
      greater than 16, then an anion gap acidosis is present.
"^DD",130,130,250,21,20,0)
     or
"^DD",130,130,250,21,21,0)
      Na - [Cl + HCO3 (or serum CO2)]. If this number is greater
"^DD",130,130,250,21,22,0)
      than 12, then an anion gap acidosis is present.
"^DD",130,130,250,21,23,0)
 
"^DD",130,130,250,21,24,0)
 and one of the following:
"^DD",130,130,250,21,25,0)
   - positive blood culture
"^DD",130,130,250,21,26,0)
   - clinical documentation of purulence or positive culture from any 
"^DD",130,130,250,21,27,0)
     site thought to be causative
"^DD",130,130,250,21,28,0)
 
"^DD",130,130,250,21,29,0)
2. Severe Sepsis/Septic Shock: Sepsis is considered severe when it is 
"^DD",130,130,250,21,30,0)
associated with organ and/or circulatory dysfunction. Report this 
"^DD",130,130,250,21,31,0)
variable if the patient has the clinical signs and symptoms of SIRS or 
"^DD",130,130,250,21,32,0)
sepsis AND documented organ and/or circulatory dysfunction. Examples of
"^DD",130,130,250,21,33,0)
organ dysfunction include: oliguria, acute alteration in mental status,
"^DD",130,130,250,21,34,0)
acute respiratory distress. Examples of circulatory dysfunction 
"^DD",130,130,250,21,35,0)
include: hypotension, requirement of inotropic or vasopressor agents.
"^DD",130,130,250,21,36,0)
 
"^DD",130,130,250,21,37,0)
* For the patient that had sepsis preoperatively, worsening of any of 
"^DD",130,130,250,21,38,0)
the above signs postoperatively would be reported as a postoperative 
"^DD",130,130,250,21,39,0)
sepsis.
"^DD",130,130,250,21,40,0)
 
"^DD",130,130,250,21,41,0)
Examples:
"^DD",130,130,250,21,42,0)
 
"^DD",130,130,250,21,43,0)
A patient comes into the emergency room with signs of sepsis - WBC 31, 
"^DD",130,130,250,21,44,0)
Temperature 104. CT shows an abdominal abscess. He is given antibiotics
"^DD",130,130,250,21,45,0)
and is then taken emergently to the OR to drain the abscess. He 
"^DD",130,130,250,21,46,0)
receives antibiotics intraoperatively. Postoperatively his WBC and
"^DD",130,130,250,21,47,0)
Temperature are trending down.
"^DD",130,130,250,21,48,0)
  POD#1 WBC 24, Temp 102 
"^DD",130,130,250,21,49,0)
  POD#2 WBC 14, Temp 100 
"^DD",130,130,250,21,50,0)
  POD#3 WBC 10, Temp 99 
"^DD",130,130,250,21,51,0)
This patient does not have postoperative sepsis as his WBC and 
"^DD",130,130,250,21,52,0)
Temperature are improving each postoperative day. 
"^DD",130,130,250,21,53,0)
 
"^DD",130,130,250,21,54,0)
Patient comes into the ER with s/s of sepsis - WBC 31, Temp 104. CT 
"^DD",130,130,250,21,55,0)
shows an abdominal abscess. He is given antibiotics and is taken 
"^DD",130,130,250,21,56,0)
emergently to the OR to drain the abscess. He receives antibiotics 
"^DD",130,130,250,21,57,0)
intraoperatively. Postoperatively his WBC and Temp are as follows:  
"^DD",130,130,250,21,58,0)
  POD#1 WBC 28, Temp 103
"^DD",130,130,250,21,59,0)
  POD#2 WBC 24, Temp 102.6
"^DD",130,130,250,21,60,0)
  POD#3 WBC 22, Temp 102 
"^DD",130,130,250,21,61,0)
  POD#4 WBC 21, Temp 101.6
"^DD",130,130,250,21,62,0)
  POD#5 WBC 30, Temp 104  
"^DD",130,130,250,21,63,0)
This patient does have postoperative sepsis because on postoperative 
"^DD",130,130,250,21,64,0)
day #5, his WBC and Temperature increase. The patient is having
"^DD",130,130,250,21,65,0)
worsening of the defined signs of sepsis.
"^DD",130,130,250,"DT")
3040316
"^DD",130,130,251,0)
PNEUMONIA^S^Y:YES;N:NO;NS:NO STUDY;^205;10^Q
"^DD",130,130,251,.1)
Pneumonia (Y/N)
"^DD",130,130,251,3)
Enter YES if the patient has a postoperative occurrence of pneumonia.
"^DD",130,130,251,21,0)
^^43^43^3070214^
"^DD",130,130,251,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,251,21,2,0)
Inflammation of the lungs caused primarily by bacteria, viruses, and/or
"^DD",130,130,251,21,3,0)
chemical irritants, usually manifested by chills, fever, pain in the
"^DD",130,130,251,21,4,0)
chest, cough, purulent, bloody sputum. Enter YES if the patient has
"^DD",130,130,251,21,5,0)
pneumonia meeting the definition of pneumonia below AND pneumonia not
"^DD",130,130,251,21,6,0)
present preoperatively.
"^DD",130,130,251,21,7,0)
 
"^DD",130,130,251,21,8,0)
Pneumonia must meet one of the following TWO criteria:
"^DD",130,130,251,21,9,0)
 
"^DD",130,130,251,21,10,0)
Criterion 1.
"^DD",130,130,251,21,11,0)
  Rales or dullness to percussion on physical examination of chest AND
"^DD",130,130,251,21,12,0)
  any of the following:
"^DD",130,130,251,21,13,0)
  a. New onset of purulent sputum or change in character of sputum
"^DD",130,130,251,21,14,0)
  b. Organism isolate from blood culture
"^DD",130,130,251,21,15,0)
  c. Isolation of pathogen from specimen obtained by transtracheal
"^DD",130,130,251,21,16,0)
     aspirate, bronchial brushing, or biopsy
"^DD",130,130,251,21,17,0)
 
"^DD",130,130,251,21,18,0)
 OR
"^DD",130,130,251,21,19,0)
 
"^DD",130,130,251,21,20,0)
Criterion 2.
"^DD",130,130,251,21,21,0)
  Chest radiographic examination shows new or progressive infiltrate, 
"^DD",130,130,251,21,22,0)
  consolidation, cavitation, or pleural effusion AND any of the 
"^DD",130,130,251,21,23,0)
  following:
"^DD",130,130,251,21,24,0)
  a. New onset of purulent sputum or change in character of sputum
"^DD",130,130,251,21,25,0)
  b. Organism isolated from blood culture
"^DD",130,130,251,21,26,0)
  c. Isolation of pathogen from specimen obtained by transtracheal    
"^DD",130,130,251,21,27,0)
     aspirate, bronchial brushing, or biopsy
"^DD",130,130,251,21,28,0)
  d. Isolation of virus or detection of viral antigen in respiratory
"^DD",130,130,251,21,29,0)
     secretions
"^DD",130,130,251,21,30,0)
  e. Diagnostic single antibody titer (IgM) or fourfold increase in
"^DD",130,130,251,21,31,0)
     paired serum samples (IgG) for pathogen
"^DD",130,130,251,21,32,0)
  f. Histopathologic evidence of pneumonia
"^DD",130,130,251,21,33,0)
 
"^DD",130,130,251,21,34,0)
*If pneumonia was present preoperatively and resolved postoperatively 
"^DD",130,130,251,21,35,0)
and a new pneumonia is identified within 30 days after surgery, the
"^DD",130,130,251,21,36,0)
following criteria must be met in order to report as a postoperative
"^DD",130,130,251,21,37,0)
pneumonia occurrence:
"^DD",130,130,251,21,38,0)
   - Patient must have completed the antibiotic course for the 
"^DD",130,130,251,21,39,0)
     previous pneumonia.
"^DD",130,130,251,21,40,0)
   - Patient must have evidence of a clear chest x-ray after the 
"^DD",130,130,251,21,41,0)
     previous pneumonia and prior to the new pneumonia.
"^DD",130,130,251,21,42,0)
   - There must be evidence of a new isolate of micro-organism on 
"^DD",130,130,251,21,43,0)
     culture.
"^DD",130,130,251,"DT")
3040318
"^DD",130,130,252,0)
PULMONARY EMBOLISM^S^Y:YES;N:NO;NS:NO STUDY;^205;12^Q
"^DD",130,130,252,.1)
Pulmonary Embolism (Y/N)
"^DD",130,130,252,3)
Enter YES if the patient has had a postoperative pulmonary embolism.
"^DD",130,130,252,21,0)
^^12^12^3070305^
"^DD",130,130,252,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,252,21,2,0)
Lodging of a blood clot in a pulmonary artery with subsequent 
"^DD",130,130,252,21,3,0)
obstruction of blood supply to the lung parenchyma. The blood clots
"^DD",130,130,252,21,4,0)
usually originate from the deep leg veins or the pelvic venous
"^DD",130,130,252,21,5,0)
system. Enter "YES" if the patient has a V-Q scan interpreted as high
"^DD",130,130,252,21,6,0)
probability of pulmonary embolism or a positive pulmonary arteriogram
"^DD",130,130,252,21,7,0)
or positive CT angiogram or positive Spiral CT exam. Treatment usually
"^DD",130,130,252,21,8,0)
consists of:
"^DD",130,130,252,21,9,0)
 - Initiation of anticoagulation therapy
"^DD",130,130,252,21,10,0)
 - Placement of mechanical interruption (e.g. Greenfield Filter), for
"^DD",130,130,252,21,11,0)
   patients in whom anticoagulation is contraindicated or already 
"^DD",130,130,252,21,12,0)
   instituted.
"^DD",130,130,252,"DT")
3040316
"^DD",130,130,254,0)
ACUTE RENAL FAILURE^*S^Y:YES;N:NO;NS:NO STUDY;^205;17^Q
"^DD",130,130,254,.1)
Acute Renal Failure Requiring Dialysis (Y/N)
"^DD",130,130,254,3)
Enter YES if the patient has renal failure requiring the initiation of dialysis postoperatively.
"^DD",130,130,254,12)
Screen prevents selection of retired code.
"^DD",130,130,254,12.1)
S DIC("S")="I Y'=""NS"""
"^DD",130,130,254,21,0)
^^15^15^3070305^
"^DD",130,130,254,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,254,21,2,0)
In a patient who did not require dialysis preoperatively, worsening of 
"^DD",130,130,254,21,3,0)
renal dysfunction postoperatively requiring hemodialysis, peritoneal 
"^DD",130,130,254,21,4,0)
dialysis, hemofiltration, hemodiafiltration or ultrafiltration.
"^DD",130,130,254,21,5,0)
 
"^DD",130,130,254,21,6,0)
TIP: If the patient refuses dialysis the answer is Yes to this 
"^DD",130,130,254,21,7,0)
variable, because he/she did require dialysis.
"^DD",130,130,254,21,8,0)
 
"^DD",130,130,254,21,9,0)
CICSP Definition (2004):
"^DD",130,130,254,21,10,0)
Indicate if the patient developed new renal failure requiring dialysis
"^DD",130,130,254,21,11,0)
or experienced an exacerbation of preoperative renal failure requiring
"^DD",130,130,254,21,12,0)
initiation of dialysis (not on dialysis preoperatively) within 30 days
"^DD",130,130,254,21,13,0)
postoperatively. (Dialysis includes continuous venous to venous 
"^DD",130,130,254,21,14,0)
hemodialysis [CVVHD], continuous venous to arterial hemodialysis 
"^DD",130,130,254,21,15,0)
[CVAHD], and peritoneal. It does not include ultrafiltration.)
"^DD",130,130,254,"DT")
3040721
"^DD",130,130,269,0)
PREGNANCY^S^NO:NO;NA:NOT APPLICABLE;Y:YES;^200.1;3^Q
"^DD",130,130,269,.1)
Pregnancy Status
"^DD",130,130,269,3)
Enter the preoperative pregnancy status of this patient.
"^DD",130,130,269,21,0)
^^5^5^3070214^
"^DD",130,130,269,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,269,21,2,0)
Pregnancy is the process by which a woman carries a developing fetus in 
"^DD",130,130,269,21,3,0)
her uterus, beginning at conception and ending in birth, miscarriage or 
"^DD",130,130,269,21,4,0)
abortion. Answer Yes if there is documentation in the patient's medical 
"^DD",130,130,269,21,5,0)
record that the patient is currently pregnant.
"^DD",130,130,269,"DT")
3070214
"^DD",130,130,285,0)
ON VENTILATOR >48 HOURS^*S^Y:YES;N:NO;NS:NO STUDY;^205;13^Q
"^DD",130,130,285,.1)
On Ventilator > or = 48 Hours (Y/N)
"^DD",130,130,285,3)
Enter YES if the total duration of ventilator-assisted respiration during the postoperative hospitalization was > or = 48 hours.
"^DD",130,130,285,12)
Screen prevents selection of retired code.
"^DD",130,130,285,12.1)
S DIC("S")="I Y'=""NS"""
"^DD",130,130,285,21,0)
^^10^10^3070223^
"^DD",130,130,285,21,1,0)
NSQIP Definition (2004):
"^DD",130,130,285,21,2,0)
Total duration of ventilator-assisted respirations during postoperative
"^DD",130,130,285,21,3,0)
hospitalization was >48 hours. This can occur at any time during the
"^DD",130,130,285,21,4,0)
30-day period postoperatively. This time assessment is CUMULATIVE, not
"^DD",130,130,285,21,5,0)
necessarily consecutive. Ventilator-assisted respirations can be via
"^DD",130,130,285,21,6,0)
endotracheal tube, nasotracheal tube, or tracheostomy tube.
"^DD",130,130,285,21,7,0)
 
"^DD",130,130,285,21,8,0)
CICSP Definition (2007):
"^DD",130,130,285,21,9,0)
Indicate if the total duration of ventilator-assisted respiration
"^DD",130,130,285,21,10,0)
within 30 days post-operatively was greater than or equal to 48 hours.
"^DD",130,130,285,"DT")
3070118
"^DD",130,130,287,0)
PERIPHERAL NERVE INJURY^S^Y:YES;N:NO;NS:NO STUDY;^205;23^Q
"^DD",130,130,287,.1)
Peripheral Nerve Injury (Y/N)
"^DD",130,130,287,3)
Enter YES if the patient has major peripheral neurological injuries.
"^DD",130,130,287,21,0)
^^6^6^3070214^
"^DD",130,130,287,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,287,21,2,0)
Peripheral nerve damage may result from damage to the nerve fibers, 
"^DD",130,130,287,21,3,0)
cell body, or myelin sheath during surgery. Peripheral nerve injuries
"^DD",130,130,287,21,4,0)
which result in motor deficits only to the cervical plexus, brachial
"^DD",130,130,287,21,5,0)
plexus, ulnar plexus, lumbar-sacral plexus (sciatic nerve), peroneal
"^DD",130,130,287,21,6,0)
nerve, and/or the femoral nerve should be included.
"^DD",130,130,287,"DT")
3040316
"^DD",130,130,290,0)
PREOP SERUM CREATININE, DATE^DX^^202;4^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,290,.1)
Date Preoperative Serum Creatinine was Performed
"^DD",130,130,290,3)
Enter the date that the preoperative Serum Creatinine was performed.
"^DD",130,130,290,21,0)
^^3^3^2910513^
"^DD",130,130,290,21,1,0)
This is the date that the preoperative Serum Creatinine test was
"^DD",130,130,290,21,2,0)
performed.
"^DD",130,130,290,21,3,0)
 
"^DD",130,130,290,"DT")
3070119
"^DD",130,130,291,0)
PREOPERATIVE BUN, DATE^DX^^202;5^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,291,.1)
Date Preoperative BUN was Performed
"^DD",130,130,291,3)
Enter the date that the preoperative BUN was performed.
"^DD",130,130,291,21,0)
^^2^2^2910513^
"^DD",130,130,291,21,1,0)
This is the date that the preoperative BUN was performed.
"^DD",130,130,291,21,2,0)
 
"^DD",130,130,291,"DT")
3070119
"^DD",130,130,292,0)
PREOP SERUM ALBUMIN, DATE^DX^^202;8^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,292,.1)
Date Preoperative Serum Albumin was Performed
"^DD",130,130,292,3)
Enter the date that the preoperative Serum Albumin was performed.
"^DD",130,130,292,21,0)
^^3^3^2910513^
"^DD",130,130,292,21,1,0)
This is the date that the preoperative Serum Albumin test was
"^DD",130,130,292,21,2,0)
performed.
"^DD",130,130,292,21,3,0)
 
"^DD",130,130,292,"DT")
3070119
"^DD",130,130,294,0)
SGOT, DATE PERFORMED^DX^^202;11^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,294,.1)
Date Preoperative SGOT was Performed
"^DD",130,130,294,3)
Enter the date that the preoperative SGOT was performed.
"^DD",130,130,294,21,0)
^^2^2^2910513^
"^DD",130,130,294,21,1,0)
This is the date that the preoperative SGOT was performed.
"^DD",130,130,294,21,2,0)
 
"^DD",130,130,294,"DT")
3070119
"^DD",130,130,295,0)
PREOP TOTAL BILIRUBIN, DATE^DX^^202;9^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,295,.1)
Date Preoperative Total Bilrubin was Performed
"^DD",130,130,295,3)
Enter the date that the preoperative Total Bilirubin was performed.
"^DD",130,130,295,21,0)
^^2^2^2910513^
"^DD",130,130,295,21,1,0)
This is the date that the preoperative total bilirubin was performed.
"^DD",130,130,295,21,2,0)
 
"^DD",130,130,295,"DT")
3070119
"^DD",130,130,296,0)
PREOP ALK PHOSPHATASE, DATE^DX^^202;12^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,296,.1)
Date Preoperative Alkaline Phosphatase was Performed
"^DD",130,130,296,3)
Enter the date that the preoperative Alkaline Phosphatase was performed.
"^DD",130,130,296,21,0)
^^3^3^2910513^
"^DD",130,130,296,21,1,0)
This is the date that the preoperative alkaline phosphatase
"^DD",130,130,296,21,2,0)
test was performed.
"^DD",130,130,296,21,3,0)
 
"^DD",130,130,296,"DT")
3070119
"^DD",130,130,297,0)
PREOPERATIVE WBC, DATE^DX^^202;13^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,297,.1)
Date Preoperative WBC was Performed
"^DD",130,130,297,3)
Enter the date that the preoperative WBC was performed.
"^DD",130,130,297,21,0)
^^2^2^2910513^
"^DD",130,130,297,21,1,0)
This is the date that the preoperative WBC test was performed.
"^DD",130,130,297,21,2,0)
 
"^DD",130,130,297,"DT")
3070119
"^DD",130,130,298,0)
PREOP PLATELET COUNT, DATE^DX^^202;15^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,298,.1)
Date Preoperative Platelet Count was Performed
"^DD",130,130,298,3)
Enter the date that the preoperative Platelet Count was performed.
"^DD",130,130,298,21,0)
^^3^3^2910513^
"^DD",130,130,298,21,1,0)
This is the date that the preoperative platelet count was
"^DD",130,130,298,21,2,0)
performed.
"^DD",130,130,298,21,3,0)
 
"^DD",130,130,298,"DT")
3070119
"^DD",130,130,299,0)
PREOPERATIVE PT, DATE^DX^^202;17^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,299,.1)
Date Preoperative PT was Performed
"^DD",130,130,299,3)
Enter the date that the preoperative PT was performed.
"^DD",130,130,299,21,0)
^^2^2^2910513^
"^DD",130,130,299,21,1,0)
This is the date that the preoperative PT test was performed.
"^DD",130,130,299,21,2,0)
 
"^DD",130,130,299,"DT")
3070119
"^DD",130,130,300,0)
PREOPERATIVE PTT, DATE^DX^^202;16^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,300,.1)
Date Preoperative PTT was Performed
"^DD",130,130,300,3)
Enter the date that the preoperative PTT was performed.
"^DD",130,130,300,21,0)
^^2^2^2910513^
"^DD",130,130,300,21,1,0)
This is the date that the preoperative PTT test was performed.
"^DD",130,130,300,21,2,0)
 
"^DD",130,130,300,"DT")
3070119
"^DD",130,130,301,0)
PREOP HEMATOCRIT, DATE^DX^^202;14^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,301,.1)
Date Preoperative Hematocrit was Performed
"^DD",130,130,301,3)
Enter the date that the preoperative Hematocrit test was performed.
"^DD",130,130,301,21,0)
^^2^2^2910513^
"^DD",130,130,301,21,1,0)
This is the date that the preoperative hematocrit was performed.
"^DD",130,130,301,21,2,0)
 
"^DD",130,130,301,"DT")
3070119
"^DD",130,130,304,0)
PREOP SERUM SODIUM, DATE^DX^^202;1^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,304,.1)
Date Preoperative Serum Sodium was Performed
"^DD",130,130,304,3)
Enter the date that the preoperative Serum Sodium test was performed.
"^DD",130,130,304,21,0)
^^2^2^2910513^
"^DD",130,130,304,21,1,0)
This is the date that the preoperative serum sodium test was performed.
"^DD",130,130,304,21,2,0)
 
"^DD",130,130,304,"DT")
3070119
"^DD",130,130,305,0)
HIGH SERUM SODIUM, DATE^DX^^204;1^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,305,.1)
Date Highest Serum Sodium was Recorded
"^DD",130,130,305,3)
Enter the date that the highest Serum Sodium result was recorded.
"^DD",130,130,305,21,0)
^^2^2^2910513^
"^DD",130,130,305,21,1,0)
This is the date that the highest Serum Sodium result was recorded.
"^DD",130,130,305,21,2,0)
 
"^DD",130,130,305,"DT")
3070119
"^DD",130,130,306,0)
HIGH POTASSIUM, DATE^DX^^204;3^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,306,.1)
Date Highest Potassium was Recorded
"^DD",130,130,306,3)
Enter the date that the highest Potassium result was recorded.
"^DD",130,130,306,21,0)
^^2^2^2910513^
"^DD",130,130,306,21,1,0)
This is the date that the highest Potassium result was recorded.
"^DD",130,130,306,21,2,0)
 
"^DD",130,130,306,"DT")
3070119
"^DD",130,130,308,0)
HIGH SERUM CREATININE, DATE^DX^^204;6^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,308,.1)
Date Highest Serum Creatinine was Recorded
"^DD",130,130,308,3)
Enter the date that the highest Serum Creatinine result was recorded.
"^DD",130,130,308,21,0)
^^3^3^2910513^
"^DD",130,130,308,21,1,0)
This is the date that the highest Serum Creatinine result was
"^DD",130,130,308,21,2,0)
recorded.
"^DD",130,130,308,21,3,0)
 
"^DD",130,130,308,"DT")
3070119
"^DD",130,130,309,0)
HIGH CPK, DATE^DX^^204;7^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,309,.1)
Date Highest CPK was Recorded
"^DD",130,130,309,3)
Enter the date that the highest CPK result was recorded.
"^DD",130,130,309,21,0)
^^2^2^2910513^
"^DD",130,130,309,21,1,0)
This is the date that the highest CPK result was recorded.
"^DD",130,130,309,21,2,0)
 
"^DD",130,130,309,"DT")
3070119
"^DD",130,130,310,0)
HIGH CPK-MB, DATE^DX^^204;8^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,310,.1)
Date Highest CPK-MB Band was Recorded
"^DD",130,130,310,3)
Enter the date that the highest CPK-MB Band result was recorded.
"^DD",130,130,310,21,0)
^^3^3^2910513^
"^DD",130,130,310,21,1,0)
This is the date that the highest CPK-MB Band result was
"^DD",130,130,310,21,2,0)
recorded.
"^DD",130,130,310,21,3,0)
 
"^DD",130,130,310,"DT")
3070119
"^DD",130,130,311,0)
HIGH TOTAL BILIRUBIN, DATE^DX^^204;9^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,311,.1)
Date Highest Total Bilirubin was Recorded
"^DD",130,130,311,3)
Enter the date that the highest Total Bilirubin result was recorded.
"^DD",130,130,311,21,0)
^^2^2^2910513^
"^DD",130,130,311,21,1,0)
This is the date that the highest Total Bilirubin was recorded.
"^DD",130,130,311,21,2,0)
 
"^DD",130,130,311,"DT")
3070119
"^DD",130,130,312,0)
HIGHEST WBC, DATE^DX^^204;10^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,312,.1)
Date Highest WBC was Recorded
"^DD",130,130,312,3)
Enter the date that the highest WBC result was recorded.
"^DD",130,130,312,21,0)
^^2^2^2910513^
"^DD",130,130,312,21,1,0)
This is the date that the highest WBC was recorded.
"^DD",130,130,312,21,2,0)
 
"^DD",130,130,312,"DT")
3070119
"^DD",130,130,314,0)
LOW HEMATOCRIT, DATE^DX^^204;12^S %DT="EP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,314,.1)
Date Lowest Hematocrit was Recorded
"^DD",130,130,314,3)
Enter the date that the lowest Hematocrit result was recorded.
"^DD",130,130,314,21,0)
^^2^2^2910513^
"^DD",130,130,314,21,1,0)
This is the date that the lowest Hematocrit result was recorded.
"^DD",130,130,314,21,2,0)
 
"^DD",130,130,314,"DT")
3070119
"^DD",130,130,325,0)
DYSPNEA^S^1:NO;2:MODERATE EXERTION;3:AT REST;NS:NO STUDY;^200;6^Q
"^DD",130,130,325,.1)
Dyspnea
"^DD",130,130,325,3)
Enter the category that most appropriately applies to this patient.
"^DD",130,130,325,21,0)
^^18^18^3070305^
"^DD",130,130,325,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,325,21,2,0)
The patient describes difficult, painful, or labored breathing.  
"^DD",130,130,325,21,3,0)
Dyspnea may be symptomatic of numerous disorders that interfere with
"^DD",130,130,325,21,4,0)
adequate ventilation or perfusion of the blood with oxygen. The
"^DD",130,130,325,21,5,0)
dyspneic patient is subjectively aware of difficulty with breathing.  
"^DD",130,130,325,21,6,0)
Select one of the following categories that best indicates the
"^DD",130,130,325,21,7,0)
patient's subjective experience coupled with your objective assessment:
"^DD",130,130,325,21,8,0)
 
"^DD",130,130,325,21,9,0)
 (1) No dyspnea 
"^DD",130,130,325,21,10,0)
 (2) Dyspnea upon moderate exertion (e.g., is unable to climb one
"^DD",130,130,325,21,11,0)
     flight of stairs without shortness of breath)
"^DD",130,130,325,21,12,0)
 (3) Dyspnea at rest (e.g., cannot complete a sentence without needing
"^DD",130,130,325,21,13,0)
     to take a breath)
"^DD",130,130,325,21,14,0)
 
"^DD",130,130,325,21,15,0)
The time frame is at the time the patient is being considered as a
"^DD",130,130,325,21,16,0)
candidate for surgery (which should be no longer than 30 days prior to 
"^DD",130,130,325,21,17,0)
surgery). If the patient's dyspnea status worsens prior to surgery, 
"^DD",130,130,325,21,18,0)
report the most severe.
"^DD",130,130,325,"DT")
3050220
"^DD",130,130,326,0)
CURRENT PNEUMONIA^S^Y:YES;N:NO;NS:NO STUDY;^200;12^Q
"^DD",130,130,326,.1)
Current Pneumonia (Y/N)
"^DD",130,130,326,3)
Enter YES if the patient has Pneumonia.
"^DD",130,130,326,21,0)
^^28^28^3070213^
"^DD",130,130,326,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,326,21,2,0)
Report patients with evidence of pneumonia at the time the patient is 
"^DD",130,130,326,21,3,0)
brought to the OR. Patients with pneumonia must meet ONE of the 
"^DD",130,130,326,21,4,0)
following two criteria:
"^DD",130,130,326,21,5,0)
 
"^DD",130,130,326,21,6,0)
Criterion 1.
"^DD",130,130,326,21,7,0)
  Rales or dullness to percussion on physical examination of chest AND
"^DD",130,130,326,21,8,0)
  any of the following:
"^DD",130,130,326,21,9,0)
  a. New onset of purulent sputum or change in character of sputum
"^DD",130,130,326,21,10,0)
  b. Organism isolate from blood culture
"^DD",130,130,326,21,11,0)
  c. Isolation of pathogen from specimen obtained by transtracheal
"^DD",130,130,326,21,12,0)
     aspirate, bronchial brushing, or biopsy
"^DD",130,130,326,21,13,0)
 
"^DD",130,130,326,21,14,0)
 OR
"^DD",130,130,326,21,15,0)
 
"^DD",130,130,326,21,16,0)
Criterion 2.
"^DD",130,130,326,21,17,0)
  Chest radiographic examination shows new or progressive infiltrate, 
"^DD",130,130,326,21,18,0)
  consolidation, cavitation, or pleural effusion AND any of the 
"^DD",130,130,326,21,19,0)
  following:
"^DD",130,130,326,21,20,0)
  a. New onset of purulent sputum or change in character of sputum
"^DD",130,130,326,21,21,0)
  b. Organism isolated from blood culture
"^DD",130,130,326,21,22,0)
  c. Isolation of pathogen from specimen obtained by transtracheal    
"^DD",130,130,326,21,23,0)
     aspirate, bronchial brushing, or biopsy
"^DD",130,130,326,21,24,0)
  d. Isolation of virus or detection of viral antigen in respiratory
"^DD",130,130,326,21,25,0)
     secretions
"^DD",130,130,326,21,26,0)
  e. Diagnostic single antibody titer (IgM) or fourfold increase in
"^DD",130,130,326,21,27,0)
     paired serum samples (IgG) for pathogen
"^DD",130,130,326,21,28,0)
  f. Histopathologic evidence of pneumonia
"^DD",130,130,326,"DT")
3040316
"^DD",130,130,330,0)
REST PAIN/GANGRENE (Y/N)^S^Y:YES;N:NO;NS:NO STUDY;^200;42^Q
"^DD",130,130,330,.1)
Rest Pain/Gangrene (Y/N)
"^DD",130,130,330,3)
Enter 'YES' if the patient suffers from rest pain/gangrene.
"^DD",130,130,330,21,0)
^^9^9^3070123^
"^DD",130,130,330,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,330,21,2,0)
Rest pain is a more severe form of ischemic pain due to occlusive 
"^DD",130,130,330,21,3,0)
disease, which occurs at rest and is manifested as a severe, 
"^DD",130,130,330,21,4,0)
unrelenting pain aggravated by elevation and often preventing sleep.  
"^DD",130,130,330,21,5,0)
Gangrene is a marked skin discoloration and disruption indicative of 
"^DD",130,130,330,21,6,0)
death and decay of tissues in the extremities due to severe and 
"^DD",130,130,330,21,7,0)
prolonged ischemia. Include patients with ischemic ulceration and/or 
"^DD",130,130,330,21,8,0)
tissue loss related to peripheral vascular disease. Do not include 
"^DD",130,130,330,21,9,0)
Fournier's gangrene. Report only if within the 30 days preoperatively.
"^DD",130,130,330,"DT")
3040316
"^DD",130,130,338.1,0)
CHEMOTHERAPY IN LAST 30 DAYS^S^Y:YES;N:NO;NS:NO STUDY;^206;3^Q
"^DD",130,130,338.1,.1)
Chemotherapy Within 30 Days Prior to Surgery (Y/N)
"^DD",130,130,338.1,3)
Enter YES if patient has undergone chemotherapy in the 30 days prior to surgery.
"^DD",130,130,338.1,21,0)
^^10^10^3070214^
"^DD",130,130,338.1,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,338.1,21,2,0)
Enter "YES" if the patient had any chemotherapy treatment for cancer 
"^DD",130,130,338.1,21,3,0)
in the 30 days prior to surgery. Chemotherapy may include, but is not
"^DD",130,130,338.1,21,4,0)
restricted to, oral and parenteral treatment with chemotherapeutic 
"^DD",130,130,338.1,21,5,0)
agents for malignancies such as colon, breast, lung, head and neck, 
"^DD",130,130,338.1,21,6,0)
and gastrointestinal solid tumors as well as lymphatic and
"^DD",130,130,338.1,21,7,0)
hematopoietic malignancies such as lymphoma, leukemia, and multiple
"^DD",130,130,338.1,21,8,0)
myeloma. Do not count if treatment consists solely of hormonal
"^DD",130,130,338.1,21,9,0)
therapy. (See Operations Manual for list of chemotherapeutic agents.)
"^DD",130,130,338.1,21,10,0)
Chemotherapy treatment must be for malignancy.
"^DD",130,130,338.1,"DT")
3040316
"^DD",130,130,342,0)
DATE OF DEATH^FXO^^205;3^N SRX S SRX=X,%DT="EPT" D ^%DT S X=Y K:Y<1 X S:SRX="NA"!(SRX="na") X="NA"
"^DD",130,130,342,.1)
Date/Time of Death
"^DD",130,130,342,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,342,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,342,3)
Enter the date/time that the patient died.
"^DD",130,130,342,21,0)
^^1^1^3070130^
"^DD",130,130,342,21,1,0)
If the patient has died, this is the date/time of death.
"^DD",130,130,342,"DT")
3070130
"^DD",130,130,364,0)
ESTIMATE OF MORTALITY^NJ2,0X^^206;31^S NYUK=X K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X S:NYUK="NS"!(NYUK="ns") X="NS" K NYUK
"^DD",130,130,364,.1)
Physician's Preoperative Estimate of Operative Mortality
"^DD",130,130,364,1,0)
^.1^^0
"^DD",130,130,364,3)
Enter the physician's preoperative estimate of operative mortality.
"^DD",130,130,364,21,0)
^^6^6^3060302^
"^DD",130,130,364,21,1,0)
CICSP Definition (2006):
"^DD",130,130,364,21,2,0)
This is the physician's (cardiologist or cardiac surgeon) subjective
"^DD",130,130,364,21,3,0)
estimate of operative mortality based on the assessment of the total
"^DD",130,130,364,21,4,0)
clinical picture. (To avoid bias introduced by knowledge of outcome,
"^DD",130,130,364,21,5,0)
this must be completed preoperatively.  Do not calculate from the
"^DD",130,130,364,21,6,0)
computer program provided to you.)
"^DD",130,130,364,"DT")
3070125
"^DD",130,130,385,0)
PERIOPERATIVE MI^S^Y:YES;N:NO;^208;2^Q
"^DD",130,130,385,.1)
Perioperative Myocardial Infarction (Y/N)
"^DD",130,130,385,3)
Enter 'YES' if the patient had a perioperative myocardial infarction.
"^DD",130,130,385,21,0)
^^12^12^3070223^
"^DD",130,130,385,21,1,0)
NSQIP Definition (2004):
"^DD",130,130,385,21,2,0)
A new transmural acute myocardial infarction occurring during surgery 
"^DD",130,130,385,21,3,0)
or within 30 days following surgery as manifested by new Q-waves on
"^DD",130,130,385,21,4,0)
ECG. Non-Q-wave infarctions should be entered under "OTHER".
"^DD",130,130,385,21,5,0)
 
"^DD",130,130,385,21,6,0)
CICSP Definition (2007):
"^DD",130,130,385,21,7,0)
Indicate the presence of a peri-operative MI if at least one of the 
"^DD",130,130,385,21,8,0)
following criteria occurs either intraoperatively or postoperatively 
"^DD",130,130,385,21,9,0)
within 30 days:
"^DD",130,130,385,21,10,0)
 1. Evolutionary ST-segment elevations
"^DD",130,130,385,21,11,0)
 2. Development of new Q-waves in two or more contiguous ECG leads
"^DD",130,130,385,21,12,0)
 3. New or presumably new LBBB pattern on the ECG.
"^DD",130,130,385,"DT")
3070122
"^DD",130,130,398,0)
QUADRIPLEGIA (Y/N)^S^Y:YES;N:NO;NS:NO STUDY;^200;22^Q
"^DD",130,130,398,.1)
Quadriplegia/Tetraplegia/Quadriparesis (Y/N)
"^DD",130,130,398,3)
Enter 'YES' if the patient has total or partial paralysis or paresis of all four extremities.
"^DD",130,130,398,21,0)
^.001^4^4^3070228^^^
"^DD",130,130,398,21,1,0)
NSQIP Definition (2004):
"^DD",130,130,398,21,2,0)
Patient has sustained acute or chronic neuromuscular injury resulting 
"^DD",130,130,398,21,3,0)
in total or partial paralysis or paresis (weakness) of all four
"^DD",130,130,398,21,4,0)
extremities.  
"^DD",130,130,398,"DT")
3070424
"^DD",130,130,401,0)
TUMOR INVOLVING CNS (Y/N)^S^Y:YES;N:NO;NS:NO STUDY;^200;29^Q
"^DD",130,130,401,.1)
Tumor Involving CNS (Y/N)
"^DD",130,130,401,3)
Enter YES if the patient has a tumor involving the central nervous system.
"^DD",130,130,401,21,0)
^^8^8^3070213^
"^DD",130,130,401,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,401,21,2,0)
Space-occupying tumor of the brain and spinal cord, which may be benign 
"^DD",130,130,401,21,3,0)
(e.g., meningiomas, ependymoma, oligodendroglioma) or primary (e.g., 
"^DD",130,130,401,21,4,0)
astrocytoma, glioma, glioblastoma multiform) or secondary malignancies 
"^DD",130,130,401,21,5,0)
(e.g., metastatic lung, breast, malignant melanoma). Other tumors that 
"^DD",130,130,401,21,6,0)
may involve the CNS include lymphomas and sarcomas. Answer "YES" even if
"^DD",130,130,401,21,7,0)
the tumor was not treated. A patient with metastatic cancer with boney
"^DD",130,130,401,21,8,0)
mets to spine is a CNS tumor. Answer "NO" if tumor was removed.
"^DD",130,130,401,"DT")
3040316
"^DD",130,130,407,0)
LOW SODIUM, DATE^DX^^204;2^S %DT="EXP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,407,.1)
Date of Lowest Serum Sodium
"^DD",130,130,407,3)
Enter the date that the lowest postoperative serum sodium was recorded.
"^DD",130,130,407,21,0)
^^2^2^2921027^
"^DD",130,130,407,21,1,0)
This is the date that the lowest serum sodium test result was recorded.
"^DD",130,130,407,21,2,0)
 
"^DD",130,130,407,"DT")
3070119
"^DD",130,130,408,0)
LOW POTASSIUM, DATE^DX^^204;4^S %DT="EXP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,408,.1)
Date of Lowest Postoperative Potassium
"^DD",130,130,408,3)
Enter the date that the lowest postoperative potassium was recorded.
"^DD",130,130,408,21,0)
^^2^2^2921027^
"^DD",130,130,408,21,1,0)
This is the date that the lowest potassium test result was recorded.
"^DD",130,130,408,21,2,0)
 
"^DD",130,130,408,"DT")
3070119
"^DD",130,130,414,0)
CARDIAC SURGICAL PRIORITY^S^1:ELECTIVE;2:URGENT;3:EMERGENT (ONGOING ISCHEMIA);4:EMERGENT (HEMODYNAMIC COMPROMISE);5:EMERGENT (ARREST WITH CPR);^208;12^Q
"^DD",130,130,414,.1)
Cardiac Surgical Priority
"^DD",130,130,414,1,0)
^.1^^0
"^DD",130,130,414,3)
Enter the surgical priority that most accurately reflects the acuity of patient's cardiovascular condition at the time of transport to the operating room.
"^DD",130,130,414,21,0)
^^22^22^3040715^
"^DD",130,130,414,21,1,0)
If this is a cardiac procedure, this is the surgical priority reflecting
"^DD",130,130,414,21,2,0)
the patient's cardiovascular condition at the time of transport to the
"^DD",130,130,414,21,3,0)
operating room:
"^DD",130,130,414,21,4,0)
 1. Elective - Patient placed on elective schedule with surgery usually
"^DD",130,130,414,21,5,0)
    performed > 72 hours following catheterization.
"^DD",130,130,414,21,6,0)
 2. Urgent - Clinical condition mandates prompt surgery usually within
"^DD",130,130,414,21,7,0)
    12 to 72 hours of catheterization (patients clinically stable on a
"^DD",130,130,414,21,8,0)
    circulatory support system should be included in this category).
"^DD",130,130,414,21,9,0)
 3. Emergent (ongoing ischemia) - Clinical condition mandates immediate
"^DD",130,130,414,21,10,0)
    surgery usually on day of catheterization because of ischemia 
"^DD",130,130,414,21,11,0)
    despite medical therapy, such as intravenous nitroglycerine.  
"^DD",130,130,414,21,12,0)
    Ischemia should be manifested as chest pain and/or ST-segment
"^DD",130,130,414,21,13,0)
    depression.
"^DD",130,130,414,21,14,0)
 4. Emergent (hemodynamic compromise) - Persistent hypotension (arterial
"^DD",130,130,414,21,15,0)
    systolic pressure < 80 mm Hg) and/or low cardiac output (cardiac 
"^DD",130,130,414,21,16,0)
    index < 2.0 L/min/MxM) despite iontropic and/or mechanical 
"^DD",130,130,414,21,17,0)
    circulatory support mandates immediate surgery within hours of the
"^DD",130,130,414,21,18,0)
    cardiac catheterization.
"^DD",130,130,414,21,19,0)
 5. Emergent (arrest with CPR) - Patient is taken to the operating room 
"^DD",130,130,414,21,20,0)
    in full cardiac arrest with the circulation supported by
"^DD",130,130,414,21,21,0)
    cardiopulmonary resuscitation (excludes patients being adequately
"^DD",130,130,414,21,22,0)
    perfused by a cardiopulmonary support system).
"^DD",130,130,414,"DT")
3070122
"^DD",130,130,443,0)
INTRAOP DISSEMINATED CANCER^*S^Y:YES;N:NO;NS:NO STUDY;^200.1;4^Q
"^DD",130,130,443,.1)
Intraoperative Disseminated Cancer (Y/N)
"^DD",130,130,443,3)
Enter YES if cancer was found during the operative procedure.
"^DD",130,130,443,12)
Screen prevents selection of inactive code.
"^DD",130,130,443,12.1)
S DIC("S")="I ""NS""'=Y"
"^DD",130,130,443,21,0)
^.001^37^37^3070213^^^^
"^DD",130,130,443,21,1,0)
NSQIP Definition (2006):
"^DD",130,130,443,21,2,0)
Patients who have cancer that was found during the operative procedure 
"^DD",130,130,443,21,3,0)
that:
"^DD",130,130,443,21,4,0)
 (1) Has spread to one site or more sites in addition to the primary 
"^DD",130,130,443,21,5,0)
     site
"^DD",130,130,443,21,6,0)
     
"^DD",130,130,443,21,7,0)
 AND 
"^DD",130,130,443,21,8,0)
 
"^DD",130,130,443,21,9,0)
 (2) In whom the presence of multiple metastases indicates the cancer is
"^DD",130,130,443,21,10,0)
     widespread, fulminant, or near terminal. Other terms describing
"^DD",130,130,443,21,11,0)
     disseminated cancer include "diffuse," "widely metastatic,"
"^DD",130,130,443,21,12,0)
     "widespread," or "carcinomatosis" or AJCC "Stage IV" cancer. Common
"^DD",130,130,443,21,13,0)
     sites of metastases include major organs (e.g., brain, lung, liver,
"^DD",130,130,443,21,14,0)
     meninges, abdomen, peritoneum, pleura, bone).
"^DD",130,130,443,21,15,0)
 
"^DD",130,130,443,21,16,0)
Example: A patient with a primary breast cancer with positive nodes in
"^DD",130,130,443,21,17,0)
the axilla does NOT qualify for this definition. She has spread of the
"^DD",130,130,443,21,18,0)
tumor to a site other than the primary site, but does not have
"^DD",130,130,443,21,19,0)
widespread metastases. A patient with primary breast cancer with
"^DD",130,130,443,21,20,0)
positive nodes in the axilla AND liver metastases does qualify, because
"^DD",130,130,443,21,21,0)
she has both spread of the tumor to the axilla and other major organs.
"^DD",130,130,443,21,22,0)
 
"^DD",130,130,443,21,23,0)
Example: A patient with colon cancer and no positive nodes or distant
"^DD",130,130,443,21,24,0)
metastases does NOT qualify. A patient with colon cancer and several
"^DD",130,130,443,21,25,0)
local lymph nodes positive for tumor, but no other evidence of
"^DD",130,130,443,21,26,0)
metastatic disease does NOT qualify. A patient with colon cancer with
"^DD",130,130,443,21,27,0)
liver metastases and/or peritoneal seeding with tumor does qualify.
"^DD",130,130,443,21,28,0)
 
"^DD",130,130,443,21,29,0)
Example: A patient with adenocarcinoma of the prostate confined to the
"^DD",130,130,443,21,30,0)
capsule does NOT qualify. A patient with prostate cancer that extends
"^DD",130,130,443,21,31,0)
through the capsule of the prostate only does NOT qualify. A patient
"^DD",130,130,443,21,32,0)
with prostate cancer with bony metastases DOES qualify.
"^DD",130,130,443,21,33,0)
 
"^DD",130,130,443,21,34,0)
 * Report Acute Lymphocytic Leukemia (ALL) and Acute Myelogenous
"^DD",130,130,443,21,35,0)
   Leukemia (AML) under this variable. Do not report Chronic Lymphocytic
"^DD",130,130,443,21,36,0)
   Leukemia (CLL), Chronic Myelogenous Leukemia (CML) or Stage IV
"^DD",130,130,443,21,37,0)
   lymphoma, as disseminated cancer.
"^DD",130,130,443,"DT")
3070213
"^DD",130,130,444.1,0)
PREOP ANION GAP, DATE^DX^^204;15^S %DT="EXP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,444.1,.1)
Date Preoperative Anion Gap was Recorded
"^DD",130,130,444.1,3)
Enter the date the preoperative Anion Gap was recorded.
"^DD",130,130,444.1,21,0)
^.001^1^1^3060531^^^^
"^DD",130,130,444.1,21,1,0)
This is the date the preoperative Anion Gap was recorded.
"^DD",130,130,444.1,"DT")
3070119
"^DD",130,130,445.1,0)
HIGH ANION GAP, DATE^DX^^204;16^S %DT="EXP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,445.1,.1)
Date Highest Anion Gap was Recorded
"^DD",130,130,445.1,3)
Enter the date that the highest postop Anion Gap was recorded.
"^DD",130,130,445.1,21,0)
^.001^1^1^3060405^^
"^DD",130,130,445.1,21,1,0)
This is the date that the highest postoperative Anion Gap was recorded.
"^DD",130,130,445.1,"DT")
3070119
"^DD",130,130,446,0)
INTRAOPERATIVE ASCITES^S^Y:YES;N:NO;^200.1;6^Q
"^DD",130,130,446,.1)
Intraoperative Ascites
"^DD",130,130,446,3)
Enter Yes or No. NS is not allowed.
"^DD",130,130,446,21,0)
^^3^3^3070222^
"^DD",130,130,446,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,446,21,2,0)
Intraoperative Ascites is defined as the presence of fluid accumulation 
"^DD",130,130,446,21,3,0)
in the peritoneal cavity noted during the operative procedure.
"^DD",130,130,446,"DT")
3070122
"^DD",130,130,447,0)
CLOSTRIDIUM DIFFICILE COLITIS^S^Y:YES;N:NO;NS:NO STUDY;^205;39^Q
"^DD",130,130,447,.1)
Clostridium Difficile Colitis (C. difficile)
"^DD",130,130,447,3)
Enter YES if this patient had postoperative C. difficile colitis.
"^DD",130,130,447,21,0)
^.001^7^7^3070123^^^
"^DD",130,130,447,21,1,0)
NSQIP Definition (2007):
"^DD",130,130,447,21,2,0)
C. difficile-associated disease occurs when the normal intestinal flora
"^DD",130,130,447,21,3,0)
is altered, allowing C. difficile to flourish in the intestinal tract
"^DD",130,130,447,21,4,0)
and produce a toxin that causes a watery diarrhea. C. difficile 
"^DD",130,130,447,21,5,0)
diarrhea is confirmed by the presence of a toxin in a stool specimen. 
"^DD",130,130,447,21,6,0)
Answer yes only if you have a positive culture for C. difficile with a 
"^DD",130,130,447,21,7,0)
toxin assay and diagnosis of C. difficile documented in the chart.
"^DD",130,130,447,"DT")
3070123
"^DD",130,130,455.1,0)
HIGH SERUM TROPONIN I, DATE^DX^^204;13^S %DT="EXP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,455.1,.1)
Date Highest Postop Troponin I was Performed
"^DD",130,130,455.1,3)
Enter the date that the highest postop troponin I was performed.
"^DD",130,130,455.1,21,0)
^^1^1^2990804^^^^
"^DD",130,130,455.1,21,1,0)
This is the date that the highest postop serum troponin I was performed.
"^DD",130,130,455.1,"DT")
3070119
"^DD",130,130,456.1,0)
HIGH SERUM TROPONIN T, DATE^DX^^204;14^S %DT="EXP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,456.1,.1)
Date Highest Postop Troponin T was Performed
"^DD",130,130,456.1,3)
Enter the date that the highest postop troponin T was performed.
"^DD",130,130,456.1,21,0)
^^1^1^2990804^^^
"^DD",130,130,456.1,21,1,0)
This is the date that the highest postop serum troponin T was performed. 
"^DD",130,130,456.1,"DT")
3070119
"^DD",130,130,457.1,0)
HDL, DATE^FXO^^202;21^N SRX S SRX=X,%DT="EXP" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,457.1,.1)
HDL, Date
"^DD",130,130,457.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,457.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,457.1,3)
This is the date that the HDL was performed and must not be more than 1000 days before surgery.
"^DD",130,130,457.1,21,0)
^^3^3^3060705^
"^DD",130,130,457.1,21,1,0)
CICSP Definition (2006):
"^DD",130,130,457.1,21,2,0)
Indicate the date that the preoperative HDL value was assessed. Enter 
"^DD",130,130,457.1,21,3,0)
"NS" for No Study if the HDL test was not performed.
"^DD",130,130,457.1,"DT")
3070119
"^DD",130,130,458.1,0)
SERUM TRIGLYCERIDE, DATE (CAR)^FXO^^202;22^N SRX S SRX=X,%DT="EXP" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,458.1,.1)
Serum Triglyceride, Date
"^DD",130,130,458.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,458.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,458.1,3)
This is the date that the Serum Triglyceride was performed and must not be more than 1000 days before surgery.
"^DD",130,130,458.1,21,0)
^^4^4^3060705^
"^DD",130,130,458.1,21,1,0)
CICSP Definition (2006):
"^DD",130,130,458.1,21,2,0)
Indicate the date that the preoperative Serum Triglyceride value was 
"^DD",130,130,458.1,21,3,0)
assessed. Enter "NS" for No Study if the Serum Triglyceride test was
"^DD",130,130,458.1,21,4,0)
not performed.
"^DD",130,130,458.1,"DT")
3070119
"^DD",130,130,459.1,0)
SERUM POTASSIUM, DATE(CARDIAC)^FXO^^202;23^N SRX S SRX=X,%DT="EXP" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,459.1,.1)
Serum Potassium, Date
"^DD",130,130,459.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,459.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,459.1,3)
Enter the date that the Serum Potassium was performed.
"^DD",130,130,459.1,21,0)
^.001^4^4^3040728^^
"^DD",130,130,459.1,21,1,0)
CICSP Definition (2004):
"^DD",130,130,459.1,21,2,0)
Indicate the date that the preoperative Serum Potassium value was 
"^DD",130,130,459.1,21,3,0)
assessed. Enter "NS" for No Study if the Serum Potassium test was not 
"^DD",130,130,459.1,21,4,0)
performed or was performed more than 90 days before surgery.
"^DD",130,130,459.1,"DT")
3070119
"^DD",130,130,460.1,0)
SERUM BILIRUBIN, DATE (CARD)^FXO^^202;24^N SRX S SRX=X,%DT="EXP" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,460.1,.1)
Serum Bilirubin, Date
"^DD",130,130,460.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,460.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,460.1,3)
Enter the date that the Serum Bilirubin was performed.
"^DD",130,130,460.1,21,0)
^.001^4^4^3040728^^
"^DD",130,130,460.1,21,1,0)
CICSP Definition (2004):
"^DD",130,130,460.1,21,2,0)
Indicate the date that the preoperative Serum Bilirubin value was 
"^DD",130,130,460.1,21,3,0)
assessed. Enter "NS" for No Study if the Serum Bilirubin test was
"^DD",130,130,460.1,21,4,0)
not performed or was performed more than 90 days before surgery.
"^DD",130,130,460.1,"DT")
3070119
"^DD",130,130,461.1,0)
LDL, DATE (CARDIAC)^FXO^^202;25^N SRX S SRX=X,%DT="EXP" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,461.1,.1)
LDL, Date
"^DD",130,130,461.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,461.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,461.1,3)
This is the date that the LDL was performed and must not be more than 1000 days before surgery.
"^DD",130,130,461.1,21,0)
^^3^3^3060705^
"^DD",130,130,461.1,21,1,0)
CICSP Definition (2006):
"^DD",130,130,461.1,21,2,0)
Indicate the date that the preoperative LDL value was assessed. 
"^DD",130,130,461.1,21,3,0)
Enter "NS" for No Study if the LDL test was not performed.
"^DD",130,130,461.1,"DT")
3070119
"^DD",130,130,462.1,0)
TOTAL CHOLESTEROL, DATE^FXO^^202;26^N SRX S SRX=X,%DT="EXP" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,462.1,.1)
Total Cholesterol, Date
"^DD",130,130,462.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,462.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,462.1,3)
This is the date that the Total Cholesterol was performed and must not be more than 1000 days before surgery.
"^DD",130,130,462.1,21,0)
^^4^4^3060705^
"^DD",130,130,462.1,21,1,0)
CICSP Definition (2006):
"^DD",130,130,462.1,21,2,0)
Indicate the date that the preoperative Total Cholesterol value was 
"^DD",130,130,462.1,21,3,0)
assessed. Enter "NS" for No Study if the Cholesterol test was not
"^DD",130,130,462.1,21,4,0)
performed.
"^DD",130,130,462.1,"DT")
3070119
"^DD",130,130,469,0)
CONVERT FROM OFF PUMP TO CPB^*S^1:NO (began off-pump/ stayed off-pump);2:YES-PLANNED;3:YES-UNPLANNED;4:YES-UNKNOWN IF PLANNED;5:N/A (began on-pump/ stayed on-pump);NS:NO STUDY/UNKNOWN;^207;27^Q
"^DD",130,130,469,.1)
Convert from Off Pump to CPB
"^DD",130,130,469,3)
Was this procedure begun as an off-pump procedure, but changed so that CPB was used for any reason, or any length of time?
"^DD",130,130,469,12)
Screen prevents selection of 4-YES-UNKNOWN IF PLANNED entry and prevents selection of 1-NO (began off-pump/ stayed off-pump) if CPB Time >0.
"^DD",130,130,469,12.1)
S DIC("S")="I Y'=4&'(Y=1&($P($G(^SRF(DA,206)),""^"",37)))"
"^DD",130,130,469,21,0)
^^21^21^3040311^
"^DD",130,130,469,21,1,0)
CICSP Definition (2004):
"^DD",130,130,469,21,2,0)
Indicate whether patient was converted from off cardiopulmonary bypass
"^DD",130,130,469,21,3,0)
assistance to on cardiopulmonary bypass during the cardiac surgical
"^DD",130,130,469,21,4,0)
procedure. Indicate the one appropriate response:
"^DD",130,130,469,21,5,0)
 
"^DD",130,130,469,21,6,0)
No - There was no conversion that occurred for the off-pump case 
"^DD",130,130,469,21,7,0)
     performed (i.e., the off-pump case remained off-pump throughout 
"^DD",130,130,469,21,8,0)
     the operation).
"^DD",130,130,469,21,9,0)
N/A - The procedure was NOT an off-pump case (i.e., procedure began 
"^DD",130,130,469,21,10,0)
     on-pump and remained on- pump throughout the case). [The default
"^DD",130,130,469,21,11,0)
     will be set to N/A.]
"^DD",130,130,469,21,12,0)
Yes, planned - The procedure was begun as an off-pump procedure but 
"^DD",130,130,469,21,13,0)
     changed to on-pump for any length of time; the change was planned 
"^DD",130,130,469,21,14,0)
     due to decision made prior to operation to perform some vessels
"^DD",130,130,469,21,15,0)
     off-pump and some on-pump in order to minimize total CPB time.
"^DD",130,130,469,21,16,0)
Yes, unplanned - The procedure was begun as an off-pump procedure but 
"^DD",130,130,469,21,17,0)
     changed to on-pump for any length of time; the change was 
"^DD",130,130,469,21,18,0)
     unplanned and determined in the operating room due to inability 
"^DD",130,130,469,21,19,0)
     to safely perform revascularization.
"^DD",130,130,469,21,20,0)
NS/Unknown - If documentation is not sufficient to answer, entering 
"^DD",130,130,469,21,21,0)
     "NS" for "No Study/Unknown" is also allowed.
"^DD",130,130,469,"DT")
3070123
"^DD",130,130,474,0)
PREOP CIRCULATORY DEVICE^S^N:NONE;I:IABP;V:VAD (includes BIVAD);A:ARTIFICIAL HEART;O:OTHER;^209;2^Q
"^DD",130,130,474,.1)
Preop use of circulatory Device
"^DD",130,130,474,3)
Enter the Preoperative use of new mechanical circulatory device within 2 wks of surgery.
"^DD",130,130,474,21,0)
^^13^13^3070118^
"^DD",130,130,474,21,1,0)
CICSP Definition (2007):
"^DD",130,130,474,21,2,0)
Indicate whether there was any use of any device to assist ventricular 
"^DD",130,130,474,21,3,0)
function at the time the patient presents for surgery. Indicate the one 
"^DD",130,130,474,21,4,0)
appropriate response: 
"^DD",130,130,474,21,5,0)
 
"^DD",130,130,474,21,6,0)
None - No New Mechanical Circulatory Device was placed.
"^DD",130,130,474,21,7,0)
IABP - An intra-aortic balloon pump was placed to assist ventricular
"^DD",130,130,474,21,8,0)
       function.
"^DD",130,130,474,21,9,0)
VAD -  A ventricular assist device (e.g., LVAD, BIVAD) was placed to 
"^DD",130,130,474,21,10,0)
       assist ventricular function.
"^DD",130,130,474,21,11,0)
Artificial Heart - An artificial heart was placed to assist ventricular 
"^DD",130,130,474,21,12,0)
       function.
"^DD",130,130,474,21,13,0)
Other - An other type of Mechanical Circulatory Device was placed. 
"^DD",130,130,474,"DT")
3070118
"^DD",130,130,477,0)
AORTIC STENOSIS^S^0:NONE/TRIVIAL;1:MILD;2:MODERATE;3:SEVERE;NS:NO STUDY;^209;5^Q
"^DD",130,130,477,.1)
Aortic Stenosis
"^DD",130,130,477,3)
Enter severity of aortic stenosis using LV angiogram or cardiac ultrasound.
"^DD",130,130,477,21,0)
^^29^29^3070416^
"^DD",130,130,477,21,1,0)
CICSP Definition (2007):
"^DD",130,130,477,21,2,0)
Indicate the severity of any aortic stenosis documented. This question
"^DD",130,130,477,21,3,0)
should be answered using either the left ventricular angiogram
"^DD",130,130,477,21,4,0)
(hemodynamic cath data) or the cardiac ultrasound examination. Numbers
"^DD",130,130,477,21,5,0)
may be converted to describe the severity of the aortic stenosis on the
"^DD",130,130,477,21,6,0)
cardiac cath report to the adjectives describing the severity: 1+ =
"^DD",130,130,477,21,7,0)
mild, 2 or 3+ = moderate, and 4+ = severe. Both transvalvular gradient
"^DD",130,130,477,21,8,0)
and estimated valve orifice area are used to assess the severity of
"^DD",130,130,477,21,9,0)
obstruction (stenosis) of a valve. The transvalvular pressure gradient
"^DD",130,130,477,21,10,0)
is obtained by converting the velocity of blood flow across the valve
"^DD",130,130,477,21,11,0)
measured by the Doppler principle to pressure drop using the Bernoulli
"^DD",130,130,477,21,12,0)
equation. The pressure drop, which is dependent on flow, can be
"^DD",130,130,477,21,13,0)
converted to estimated valve orifice area if flow is known. If the echo
"^DD",130,130,477,21,14,0)
report uses an adjective to describe the severity of stenosis, indicate
"^DD",130,130,477,21,15,0)
the corresponding adjective. Use the following to convert mean (not
"^DD",130,130,477,21,16,0)
peak) transvalvular gradients, orifice areas, or both, to the
"^DD",130,130,477,21,17,0)
descriptive categories. Indicate the one most appropriate response:
"^DD",130,130,477,21,18,0)
 
"^DD",130,130,477,21,19,0)
 None/Trivial - The mean pressure gradient is < 5 mm Hg, and/or orifice
"^DD",130,130,477,21,20,0)
     area is > 2.5 cm2, and/or the aortic valve leaflets or aortic flow
"^DD",130,130,477,21,21,0)
     velocity is stated to be normal (< 1.0 M/sec).
"^DD",130,130,477,21,22,0)
 Mild - The mean pressure gradient is 5 - 20 mm Hg and/or the orifice 
"^DD",130,130,477,21,23,0)
     area is 1.7 - 2.5 cm2
"^DD",130,130,477,21,24,0)
 Moderate - The mean pressure gradient is >20 - 50 mm Hg and/or the 
"^DD",130,130,477,21,25,0)
     valve orifice area is 1.0 -1.6 cm2
"^DD",130,130,477,21,26,0)
 Severe - The mean pressure gradient is > 50 mm Hg and/or the valve 
"^DD",130,130,477,21,27,0)
     orifice area is < 1.0 cm2
"^DD",130,130,477,21,28,0)
 NS - If no study was performed, entering "NS" for "No Study/Unknown"
"^DD",130,130,477,21,29,0)
     is also allowed.
"^DD",130,130,477,"DT")
3070416
"^DD",130,130,487.1,0)
PREOPERATIVE INR, DATE^DX^^202;27^S %DT="EXP" D ^%DT S X=Y K:Y<1 X
"^DD",130,130,487.1,.1)
Date Preoperative INR was Performed
"^DD",130,130,487.1,3)
Enter the date that the preoperative INR was performed.
"^DD",130,130,487.1,21,0)
^.001^1^1^3060127^^^
"^DD",130,130,487.1,21,1,0)
This is the date that the preoperative INR was performed.
"^DD",130,130,487.1,"DT")
3070119
"^DD",130,130,504,0)
HEMOGLOBIN A1C^FX^^201;28^S:X="NS"!(X="ns") X="NS" Q:X="NS"  K:$L(X)>6!($L(X)<1) X
"^DD",130,130,504,.1)
Hemoglobin A1c
"^DD",130,130,504,3)
Answer must be 1-6 characters in length.
"^DD",130,130,504,21,0)
^^3^3^3070117^
"^DD",130,130,504,21,1,0)
CICSP Definition (2006)/NSQIP (2007):
"^DD",130,130,504,21,2,0)
Indicate the Hemoglobin A1c result (%) preoperatively evaluated closest
"^DD",130,130,504,21,3,0)
to surgery. Entering "NS" for "No Study" is allowed.
"^DD",130,130,504,"DT")
3070117
"^DD",130,130,504.1,0)
HEMOGLOBIN A1C, DATE^FXO^^202.1;1^N SRX S SRX=X,%DT="EXP" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,504.1,.1)
Hemoglobin A1c, Date
"^DD",130,130,504.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,504.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,504.1,3)
This is the date that the Hemoglobin A1c was performed and must not be more than 1000 days before surgery.
"^DD",130,130,504.1,21,0)
^^4^4^3070417^
"^DD",130,130,504.1,21,1,0)
CICSP Definition (2006)/NSQIP (2007):
"^DD",130,130,504.1,21,2,0)
Indicate the date that the preoperative Hemoglobin A1c value was 
"^DD",130,130,504.1,21,3,0)
assessed. Enter "NS" for No Study if the Hemoglobin A1c test was not
"^DD",130,130,504.1,21,4,0)
performed.
"^DD",130,130,504.1,"DT")
3070119
"^DD",130,130.22,2,0)
DATE COMP NOTED^DX^^0;7^S %DT="EXPT" D ^%DT S X=Y K:Y<1 X
"^DD",130,130.22,2,.1)
Date/Time the Occurrence was Noted
"^DD",130,130.22,2,3)
Enter the date/time that this occurrence was noted.
"^DD",130,130.22,2,21,0)
^^3^3^2900709^^
"^DD",130,130.22,2,21,1,0)
This is the date that this postoperative occurrence was noted in the
"^DD",130,130.22,2,21,2,0)
patient's record.
"^DD",130,130.22,2,21,3,0)
 
"^DD",130,130.22,2,"DT")
3070313
"^DD",130,130.22,7,0)
SEPSIS CATEGORY^*S^1:SIRS;2:SEPSIS;3:SEPTIC SHOCK;^0;4^Q
"^DD",130,130.22,7,.1)
Sepsis Category
"^DD",130,130.22,7,3)
Select the appropriate category of sepsis for this occurrence.
"^DD",130,130.22,7,12)
Screen prevents selection of inactive code.
"^DD",130,130.22,7,12.1)
S DIC("S")="I Y'=1"
"^DD",130,130.22,7,21,0)
^^34^34^3070313^
"^DD",130,130.22,7,21,1,0)
NSQIP Definition (2007):
"^DD",130,130.22,7,21,2,0)
The body's response to insult can be documented as one of two levels 
"^DD",130,130.22,7,21,3,0)
with the successive level building on the previous level. You should 
"^DD",130,130.22,7,21,4,0)
only document the highest level identified using the criteria below. 
"^DD",130,130.22,7,21,5,0)
 
"^DD",130,130.22,7,21,6,0)
1. Sepsis: Sepsis is the systemic response to infection. Report this 
"^DD",130,130.22,7,21,7,0)
variable if the patient has clinical signs and symptoms of SIRS. SIRS 
"^DD",130,130.22,7,21,8,0)
is a widespread inflammatory response to a variety of severe clinical
"^DD",130,130.22,7,21,9,0)
insults. This syndrome is clinically recognized by the presence of two 
"^DD",130,130.22,7,21,10,0)
or more of the following:
"^DD",130,130.22,7,21,11,0)
   - Temp >38 degrees C or <36 degrees C
"^DD",130,130.22,7,21,12,0)
   - HR >90 bpm
"^DD",130,130.22,7,21,13,0)
   - RR >20 breaths/min or PaCO2 <32 mmHg(<4.3 kPa)
"^DD",130,130.22,7,21,14,0)
   - WBC >12,000 cell/mm3, <4000 cells/mm3, or >10% immature (band) 
"^DD",130,130.22,7,21,15,0)
     forms
"^DD",130,130.22,7,21,16,0)
   - Anion gap acidosis: this is defined by either:
"^DD",130,130.22,7,21,17,0)
      [Na + K] - [Cl + HCO3 (or serum CO2)]. If this number is 
"^DD",130,130.22,7,21,18,0)
      greater than 16, then an anion gap acidosis is present.
"^DD",130,130.22,7,21,19,0)
     or
"^DD",130,130.22,7,21,20,0)
      Na - [Cl + HCO3 (or serum CO2)]. If this number is greater
"^DD",130,130.22,7,21,21,0)
      than 12, then an anion gap acidosis is present.
"^DD",130,130.22,7,21,22,0)
 
"^DD",130,130.22,7,21,23,0)
 and one of the following:
"^DD",130,130.22,7,21,24,0)
   - positive blood culture
"^DD",130,130.22,7,21,25,0)
   - clinical documentation of purulence at any site thought to be 
"^DD",130,130.22,7,21,26,0)
     causative
"^DD",130,130.22,7,21,27,0)
 
"^DD",130,130.22,7,21,28,0)
2. Severe Sepsis/Septic Shock: Sepsis is considered severe when it is 
"^DD",130,130.22,7,21,29,0)
associated with organ and/or circulatory dysfunction. Report this 
"^DD",130,130.22,7,21,30,0)
variable if the patient has the clinical signs and symptoms of SIRS or 
"^DD",130,130.22,7,21,31,0)
sepsis AND documented organ and/or circulatory dysfunction. Examples of
"^DD",130,130.22,7,21,32,0)
organ dysfunction include: oliguria, acute alteration in mental status,
"^DD",130,130.22,7,21,33,0)
acute respiratory distress. Examples of circulatory dysfunction 
"^DD",130,130.22,7,21,34,0)
include: hypotension, requirement of inotropic or vasopressor agents.
"^DD",130,130.22,7,"DT")
3060124
"^DD",136.5,136.5,0)
FIELD^^5^6
"^DD",136.5,136.5,0,"DDA")
N
"^DD",136.5,136.5,0,"DT")
2950309
"^DD",136.5,136.5,0,"ID",2)
D DESC^SROCMPS
"^DD",136.5,136.5,0,"IX","B",136.5,.01)

"^DD",136.5,136.5,0,"IX","C",136.53,.01)

"^DD",136.5,136.5,0,"NM","PERIOPERATIVE OCCURRENCE CATEGORY")

"^DD",136.5,136.5,0,"PT",130.0126,5)

"^DD",136.5,136.5,0,"PT",130.053,5)

"^DD",136.5,136.5,0,"PT",130.13,3)

"^DD",136.5,136.5,0,"PT",130.22,5)

"^DD",136.5,136.5,0,"VRPK")
SR
"^DD",136.5,136.5,.01,0)
OCCURRENCE CATEGORY^RFI^^0;1^K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X
"^DD",136.5,136.5,.01,.1)
Occurrence Category
"^DD",136.5,136.5,.01,1,0)
^.1
"^DD",136.5,136.5,.01,1,1,0)
136.5^B
"^DD",136.5,136.5,.01,1,1,1)
S ^SRO(136.5,"B",$E(X,1,30),DA)=""
"^DD",136.5,136.5,.01,1,1,2)
K ^SRO(136.5,"B",$E(X,1,30),DA)
"^DD",136.5,136.5,.01,3)
Your answer must be 3-60 characters in length.
"^DD",136.5,136.5,.01,9)
^
"^DD",136.5,136.5,.01,21,0)
^^3^3^2950427^
"^DD",136.5,136.5,.01,21,1,0)
This field contains the name of the perioperative occurrence category to
"^DD",136.5,136.5,.01,21,2,0)
be used when categorizing surgical and anesthesia perioperative
"^DD",136.5,136.5,.01,21,3,0)
occurrences.
"^DD",136.5,136.5,.01,"DT")
2950427
"^DD",136.5,136.5,.01,"LAYGO",1,0)
W !,"Adding to the Perioperative Occurrence Category file is not allowed !!",*7 I 0
"^DD",136.5,136.5,1,0)
INACTIVE?^SI^1:YES;0:NO;^0;2^Q
"^DD",136.5,136.5,1,.1)
Inactive? (Y/N)
"^DD",136.5,136.5,1,3)
Enter YES to inactivate this perioperative occurrence category.
"^DD",136.5,136.5,1,9)
^
"^DD",136.5,136.5,1,21,0)
^^2^2^2950224^
"^DD",136.5,136.5,1,21,1,0)
If this perioperative occurrence category is no longer used, enter YES to
"^DD",136.5,136.5,1,21,2,0)
flag this category as INACTIVE.
"^DD",136.5,136.5,1,"DT")
2950224
"^DD",136.5,136.5,2,0)
DESCRIPTION^136.52^^1;0
"^DD",136.5,136.5,2,9)
^
"^DD",136.5,136.5,2,20,0)
^.3LA^^0
"^DD",136.5,136.5,2,21,0)
^^2^2^2950224^
"^DD",136.5,136.5,2,21,1,0)
This is a description used to further define the perioperative occurrence
"^DD",136.5,136.5,2,21,2,0)
type.
"^DD",136.5,136.5,3,0)
SYNONYM^136.53^^2;0
"^DD",136.5,136.5,3,21,0)
^^1^1^2950315^
"^DD",136.5,136.5,3,21,1,0)
This is another name for this perioperative occurrence category.
"^DD",136.5,136.5,4,0)
INTRAOPERATIVE ALLOWED^SI^1:YES;0:NO;^0;3^Q
"^DD",136.5,136.5,4,.1)
Intraoperative Occurrence Allowed ?
"^DD",136.5,136.5,4,3)
Enter YES if this may be an intraoperative occurrence.
"^DD",136.5,136.5,4,9)
^
"^DD",136.5,136.5,4,21,0)
^^2^2^2951113^^
"^DD",136.5,136.5,4,21,1,0)
If this occurrence category may be associated with an intraoperative
"^DD",136.5,136.5,4,21,2,0)
occurrence, enter YES.
"^DD",136.5,136.5,4,"DT")
2951113
"^DD",136.5,136.5,5,0)
CARDIAC ONLY^S^Y:YES;N:NO;^0;4^Q
"^DD",136.5,136.5,5,.1)
Cardiac Only
"^DD",136.5,136.5,5,3)
Enter YES if the occurrence category is for a cardiac assessment case.
"^DD",136.5,136.5,5,9)
^
"^DD",136.5,136.5,5,21,0)
^^2^2^3000822^
"^DD",136.5,136.5,5,21,1,0)
If this occurrence category may be associated with a cardiac assessed case
"^DD",136.5,136.5,5,21,2,0)
only, enter YES.
"^DD",136.5,136.5,5,"DT")
3000713
"^DD",136.5,136.52,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",136.5,136.52,0,"NM","DESCRIPTION")

"^DD",136.5,136.52,0,"UP")
136.5
"^DD",136.5,136.52,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",136.5,136.52,.01,.1)
Perioperative Occurrence Category Decsription
"^DD",136.5,136.52,.01,3)
Enter a brief description further defining this perioperative occurrence type.
"^DD",136.5,136.52,.01,21,0)
^^2^2^2950224^
"^DD",136.5,136.52,.01,21,1,0)
This is a description used to further define and clarify each
"^DD",136.5,136.52,.01,21,2,0)
perioperative occurrence category.
"^DD",136.5,136.52,.01,21,3,0)
 
"^DD",136.5,136.52,.01,"DT")
2950224
"^DD",136.5,136.53,0)
SYNONYM SUB-FIELD^^.01^1
"^DD",136.5,136.53,0,"DT")
2950309
"^DD",136.5,136.53,0,"IX","B",136.53,.01)

"^DD",136.5,136.53,0,"NM","SYNONYM")

"^DD",136.5,136.53,0,"UP")
136.5
"^DD",136.5,136.53,.01,0)
SYNONYM^MF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>60!($L(X)<3) X
"^DD",136.5,136.53,.01,.1)
Synonym
"^DD",136.5,136.53,.01,1,0)
^.1
"^DD",136.5,136.53,.01,1,1,0)
136.53^B
"^DD",136.5,136.53,.01,1,1,1)
S ^SRO(136.5,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",136.5,136.53,.01,1,1,2)
K ^SRO(136.5,DA(1),2,"B",$E(X,1,30),DA)
"^DD",136.5,136.53,.01,1,2,0)
136.5^C
"^DD",136.5,136.53,.01,1,2,1)
S ^SRO(136.5,"C",$E(X,1,30),DA(1),DA)=""
"^DD",136.5,136.53,.01,1,2,2)
K ^SRO(136.5,"C",$E(X,1,30),DA(1),DA)
"^DD",136.5,136.53,.01,1,2,"DT")
2950309
"^DD",136.5,136.53,.01,3)
Answer must be 3-60 characters in length.
"^DD",136.5,136.53,.01,21,0)
^^1^1^2950315^
"^DD",136.5,136.53,.01,21,1,0)
This is another name for this perioperative occurrence category.
"^DD",136.5,136.53,.01,"DT")
2950309
"^DD",137,137,0)
FIELD^^.01^1
"^DD",137,137,0,"DDA")
N
"^DD",137,137,0,"DT")
3070116
"^DD",137,137,0,"IX","B",137,.01)

"^DD",137,137,0,"NM","CPT EXCLUSIONS")

"^DD",137,137,.01,0)
CPT CODE^RP81'XI^ICPT(^0;1^S DINUM=X
"^DD",137,137,.01,.1)
CPT Code
"^DD",137,137,.01,1,0)
^.1^^-1
"^DD",137,137,.01,1,1,0)
137^B
"^DD",137,137,.01,1,1,1)
S ^SRO(137,"B",$E(X,1,30),DA)=""
"^DD",137,137,.01,1,1,2)
K ^SRO(137,"B",$E(X,1,30),DA)
"^DD",137,137,.01,3)
Enter the excluded CPT code.
"^DD",137,137,.01,21,0)
^^1^1^3070116^
"^DD",137,137,.01,21,1,0)
This CPT code is on the list of NSQIP excluded CPT codes.
"^DD",137,137,.01,"DT")
3070201
"^DIC",136.5,136.5,0)
PERIOPERATIVE OCCURRENCE CATEGORY^136.5I
"^DIC",136.5,136.5,0,"GL")
^SRO(136.5,
"^DIC",136.5,136.5,"%D",0)
^1.001^4^4^3060301^^^
"^DIC",136.5,136.5,"%D",1,0)
This file contains perioperative occurrence categories used within the
"^DIC",136.5,136.5,"%D",2,0)
DHCP Surgery package.  All perioperative occurrences entered must be
"^DIC",136.5,136.5,"%D",3,0)
grouped into one of the categories contained in this file.  The fields in
"^DIC",136.5,136.5,"%D",4,0)
this file are restricted so that entries cannot be altered.
"^DIC",136.5,136.5,"%D",5,0)
 
"^DIC",136.5,"B","PERIOPERATIVE OCCURRENCE CATEGORY",136.5)

"^DIC",137,137,0)
CPT EXCLUSIONS^137
"^DIC",137,137,0,"GL")
^SRO(137,
"^DIC",137,137,"%D",0)
^^2^2^3070116^
"^DIC",137,137,"%D",1,0)
This file contains the NSQIP list of excluded CPT codes. Surgical cases
"^DIC",137,137,"%D",2,0)
coded only with CPT codes from this list will not be assessed.
"^DIC",137,"B","CPT EXCLUSIONS",137)

"BLD",6213,6)
^154
**END**
**END**

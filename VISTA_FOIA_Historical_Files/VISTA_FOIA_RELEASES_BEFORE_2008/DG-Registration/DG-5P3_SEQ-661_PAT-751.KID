Released DG*5.3*751 SEQ #661
Extracted from mail message
**KIDS**:DG*5.3*751^

**INSTALL NAME**
DG*5.3*751
"BLD",7087,0)
DG*5.3*751^REGISTRATION^0^3070322^y
"BLD",7087,1,0)
^^2^2^3070322^
"BLD",7087,1,1,0)
Please refer to the National Patch module for a description of the changes
"BLD",7087,1,2,0)
included in this patch.
"BLD",7087,4,0)
^9.64PA^^
"BLD",7087,6.3)
1
"BLD",7087,"KRN",0)
^9.67PA^8989.52^19
"BLD",7087,"KRN",.4,0)
.4
"BLD",7087,"KRN",.401,0)
.401
"BLD",7087,"KRN",.402,0)
.402
"BLD",7087,"KRN",.403,0)
.403
"BLD",7087,"KRN",.5,0)
.5
"BLD",7087,"KRN",.84,0)
.84
"BLD",7087,"KRN",3.6,0)
3.6
"BLD",7087,"KRN",3.8,0)
3.8
"BLD",7087,"KRN",9.2,0)
9.2
"BLD",7087,"KRN",9.8,0)
9.8
"BLD",7087,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7087,"KRN",9.8,"NM",1,0)
DGRP6CL^^0^B62565358
"BLD",7087,"KRN",9.8,"NM","B","DGRP6CL",1)

"BLD",7087,"KRN",19,0)
19
"BLD",7087,"KRN",19.1,0)
19.1
"BLD",7087,"KRN",101,0)
101
"BLD",7087,"KRN",409.61,0)
409.61
"BLD",7087,"KRN",771,0)
771
"BLD",7087,"KRN",870,0)
870
"BLD",7087,"KRN",8989.51,0)
8989.51
"BLD",7087,"KRN",8989.52,0)
8989.52
"BLD",7087,"KRN",8994,0)
8994
"BLD",7087,"KRN","B",.4,.4)

"BLD",7087,"KRN","B",.401,.401)

"BLD",7087,"KRN","B",.402,.402)

"BLD",7087,"KRN","B",.403,.403)

"BLD",7087,"KRN","B",.5,.5)

"BLD",7087,"KRN","B",.84,.84)

"BLD",7087,"KRN","B",3.6,3.6)

"BLD",7087,"KRN","B",3.8,3.8)

"BLD",7087,"KRN","B",9.2,9.2)

"BLD",7087,"KRN","B",9.8,9.8)

"BLD",7087,"KRN","B",19,19)

"BLD",7087,"KRN","B",19.1,19.1)

"BLD",7087,"KRN","B",101,101)

"BLD",7087,"KRN","B",409.61,409.61)

"BLD",7087,"KRN","B",771,771)

"BLD",7087,"KRN","B",870,870)

"BLD",7087,"KRN","B",8989.51,8989.51)

"BLD",7087,"KRN","B",8989.52,8989.52)

"BLD",7087,"KRN","B",8994,8994)

"BLD",7087,"QUES",0)
^9.62^^
"BLD",7087,"REQB",0)
^9.611^1^1
"BLD",7087,"REQB",1,0)
DG*5.3*689^2
"BLD",7087,"REQB","B","DG*5.3*689",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
751^3070322
"PKG",5,22,1,"PAH",1,1,0)
^^2^2^3070322
"PKG",5,22,1,"PAH",1,1,1,0)
Please refer to the National Patch module for a description of the changes
"PKG",5,22,1,"PAH",1,1,2,0)
included in this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DGRP6CL")
0^1^B62565358^B62064109
"RTN","DGRP6CL",1,0)
DGRP6CL ;ALB/TMK - REGISTRATION SCREEN 6 FIELDS Conflict locations ; 09/15/2005
"RTN","DGRP6CL",2,0)
 ;;5.3;Registration;**689,751**;Aug 13, 1993;Build 1
"RTN","DGRP6CL",3,0)
 ;
"RTN","DGRP6CL",4,0)
CLLST(DFN,DGCONF,DGPOSS,DGMSE) ;
"RTN","DGRP6CL",5,0)
 ; For patient DFN:
"RTN","DGRP6CL",6,0)
 ; Returns DGCONF array: DGCONF(conf loc)= Start dt^End dt
"RTN","DGRP6CL",7,0)
 ;  or, for multiple OEF/OIF/ UNKNOWN OEF/OIF: DGCONF(conf loc-ien) =
"RTN","DGRP6CL",8,0)
 ;                    Start dt ^ End dt ^ Site source ^ Lock flag
"RTN","DGRP6CL",9,0)
 ;    DGCONF(conflict loc,1)=1 if dts inconsistent w/mse dts
"RTN","DGRP6CL",10,0)
 ; DGPOSS = array of possible conflict locations, based on service
"RTN","DGRP6CL",11,0)
 ;          episode dts DGPOSS(conf loc)=""
"RTN","DGRP6CL",12,0)
 ; DGMSE = array of military svc episodes
"RTN","DGRP6CL",13,0)
 ;          DGMSE(1-3)=fr dt^to dt^branch ien^comp code
"RTN","DGRP6CL",14,0)
 ;
"RTN","DGRP6CL",15,0)
 N DGZ,DGZ0,DGZ1,DG32,DG3291,DIQUIET,FRTO
"RTN","DGRP6CL",16,0)
 S DIQUIET=1 K DGCONF,DGPOSS
"RTN","DGRP6CL",17,0)
 S DG32=$G(^DPT(DFN,.32)),DG3291=$G(^(.3291))
"RTN","DGRP6CL",18,0)
 S DGZ1=0
"RTN","DGRP6CL",19,0)
 F DGZ=1:1:3 S DGZ0=$S(DGZ=1:"5^5^6^7",DGZ=2:"19^10^11^12",1:"20^15^16^17") D
"RTN","DGRP6CL",20,0)
 . Q:$S($P(DG32,U,+DGZ0)="Y":0,1:'$P(DG32,U,+DGZ0))
"RTN","DGRP6CL",21,0)
 . S DGZ1=DGZ1+1,DGMSE(DGZ1)=$P(DG32,U,$P(DGZ0,U,3))_U_$P(DG32,U,$P(DGZ0,U,4))_U_$P(DG32,U,$P(DGZ0,U,2))_U_$P(DG3291,U,DGZ)
"RTN","DGRP6CL",22,0)
 ;
"RTN","DGRP6CL",23,0)
 ; Must chk all possible/on-file conf locs for valid mil svc pd
"RTN","DGRP6CL",24,0)
 ; Extract OEF/OIF data
"RTN","DGRP6CL",25,0)
 F DGZ="OEF","OIF","UNK" S DGCONF(DGZ)=""
"RTN","DGRP6CL",26,0)
 D GET^DGENOEIF(DFN,.DGZ,0,"","")
"RTN","DGRP6CL",27,0)
 S DGZ0=0 F  S DGZ0=$O(DGZ("IEN",DGZ0)) Q:'DGZ0  S DGZ=$G(DGZ("IEN",DGZ0)) D
"RTN","DGRP6CL",28,0)
 . N DGCONFX
"RTN","DGRP6CL",29,0)
 . Q:'$G(DGZ("FR",DGZ0))&'$G(DGZ("TO",DGZ0))
"RTN","DGRP6CL",30,0)
 . S DGCONFX=$P("OIF^OEF^UNK",U,+$G(DGZ("LOC",DGZ0)))_"-"_DGZ,DGCONF=DGCONFX,DGCONF($P(DGCONFX,"-"))=$G(DGCONF($P(DGCONFX,"-")))_DGZ_";"
"RTN","DGRP6CL",31,0)
 . F FRTO=1,0 S $P(DGCONF(DGCONFX),U,$S(FRTO:1,1:2))=$$GETDT^DGRPMS(DFN,DGCONFX,FRTO) I FRTO=0 D CKDT^DGRP6CL1(.DGCONF,.DGMSE,.DGPOSS)
"RTN","DGRP6CL",32,0)
 . S $P(DGCONF(DGCONFX),U,3)=$G(DGZ("SITE",DGZ0))
"RTN","DGRP6CL",33,0)
 . S $P(DGCONF(DGCONFX),U,4)=$G(DGZ("LOCK",DGZ0))
"RTN","DGRP6CL",34,0)
 F DGCONF="OEF","OIF","UNK" D CKDT^DGRP6CL1(.DGCONF,.DGMSE,.DGPOSS)
"RTN","DGRP6CL",35,0)
 F DGCONF="VIET","LEB","GREN","PAN","GULF","SOM","YUG" F FRTO=1,0 S $P(DGCONF(DGCONF),U,$S(FRTO:1,1:2))=$$GETDT^DGRPMS(DFN,DGCONF,FRTO) I FRTO=0 D CKDT^DGRP6CL1(.DGCONF,.DGMSE,.DGPOSS)
"RTN","DGRP6CL",36,0)
 Q
"RTN","DGRP6CL",37,0)
 ;
"RTN","DGRP6CL",38,0)
YN(DGRPX,X) ;Format Yes/No fld in $P(DGRPX,U,X)
"RTN","DGRP6CL",39,0)
 Q $S($P(DGRPX,"^",X)="Y":"YES",$P(DGRPX,"^",X)="N":"NO ",$P(DGRPX,"^",X)="U":"UNK",1:"   ")
"RTN","DGRP6CL",40,0)
 ;
"RTN","DGRP6CL",41,0)
DAT(DGRPX,X,Z1) ; Format dt in $P(DGRPX,U,X) for a length of Z1
"RTN","DGRP6CL",42,0)
 N Z
"RTN","DGRP6CL",43,0)
 S Z=$P(DGRPX,U,X)
"RTN","DGRP6CL",44,0)
 I Z'="" S Z=$$FMTE^XLFDT(Z,"5DZ")
"RTN","DGRP6CL",45,0)
 S:$L(Z)<Z1 Z=$E(Z_$J("",Z1),1,Z1)
"RTN","DGRP6CL",46,0)
 Q Z
"RTN","DGRP6CL",47,0)
 ;
"RTN","DGRP6CL",48,0)
EN(DFN,QUIT) ; Entry from reg screen 6
"RTN","DGRP6CL",49,0)
 N DIPA,DGCONF,DGCONFS,DGCONF1,DGMSE,DGMSG,DGPOSS,DIR,DIE,DR,DA
"RTN","DGRP6CL",50,0)
 ;
"RTN","DGRP6CL",51,0)
 ; Return QUIT=1 if ^ entered
"RTN","DGRP6CL",52,0)
EN1 ; Entry from conf subscreen off reg screen 6
"RTN","DGRP6CL",53,0)
 ; Routine loops until exit/quit from subscreen
"RTN","DGRP6CL",54,0)
 D CLEAR^VALM1
"RTN","DGRP6CL",55,0)
 K DGCONF,DGCONFS,DGPOSS,DGMSE,DGMSG,DGDISP
"RTN","DGRP6CL",56,0)
 N DIR,DTOUT,DUOUT,Z,Z0,Z1,Z2,X,Y,LOOP,DG,DGM,DGZ,DGEG,DGEGS,DGX,DGX1,DG321,DG322,DGCT,DGY,DGY1,DGCTX,SSN
"RTN","DGRP6CL",57,0)
 D CLLST(DFN,.DGCONF,.DGPOSS,.DGMSE)
"RTN","DGRP6CL",58,0)
 I $G(DGRPV) S $E(DGRPVV(6),2,3)="00",DGRPVV(6,"NOEDIT")=1
"RTN","DGRP6CL",59,0)
 I '$G(DGRPV),$E(DGRPVV(6),2,3)="11" S $E(DGRPVV(6),2,3)="00",DGRPVV(6,"NOEDIT")=1
"RTN","DGRP6CL",60,0)
 S DGMSG=0,DGCTX=0
"RTN","DGRP6CL",61,0)
 F Z="OEF","OIF","UNK" D  ; Sort OEF/OIF/ UNKNOWN OEF/OIF
"RTN","DGRP6CL",62,0)
 . ; by reverse from dt within each conf
"RTN","DGRP6CL",63,0)
 . S Z0=Z F  S Z0=$O(DGCONF(Z0)) Q:Z0=""!(Z0'[Z)  S Z2=Z_"-"_(9999999-DGCONF(Z0)) S DGCONFS(Z2)=$P(Z0,"-",2) I 'DGMSG,$G(DGCONF(Z0,1)) S DGMSG=1
"RTN","DGRP6CL",64,0)
 S DG321=$G(^DPT(DFN,.321)),DG322=$G(^(.322))
"RTN","DGRP6CL",65,0)
 ;
"RTN","DGRP6CL",66,0)
 S DIR(0)="SA^",DGCT=0
"RTN","DGRP6CL",67,0)
 S X=$S($D(^DPT(+DFN,0)):^(0),1:""),SSN=$P(X,"^",9),SSN=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,10)
"RTN","DGRP6CL",68,0)
 S DGCT=DGCT+1,DIR("A",DGCT)=$$SSNNM^DGRPU(DFN)
"RTN","DGRP6CL",69,0)
 S DGCT=DGCT+1,DIR("A",DGCT)="",$P(DIR("A",DGCT),"=",81)=""
"RTN","DGRP6CL",70,0)
 S DGCT=DGCT+1,DIR("A",DGCT)=$S($O(DGMSE(0)):"MILITARY SERVICE PERIODS:",1:"NO SERVICE PERIODS FOR THIS PATIENT - NO CONFLICT LOC CAN BE ENTERED")
"RTN","DGRP6CL",71,0)
 S Z=0 F  S Z=$O(DGMSE(Z)) Q:'Z  D
"RTN","DGRP6CL",72,0)
 . S DGCT=DGCT+1,DIR("A",DGCT)=$J("",3)_$E($$EXTERNAL^DILFD(2,.325,"",$P(DGMSE(Z),U,3))_$S($P(DGMSE(Z),U,4)'="":"/"_$$SVCCOMP($P(DGMSE(Z),U,4)),1:"")_$J("",30),1,30)
"RTN","DGRP6CL",73,0)
 . S DIR("A",DGCT)=DIR("A",DGCT)_"  ("_$S($P(DGMSE(Z),U):$$FMTE^XLFDT($P(DGMSE(Z),U),"5DZ"),1:"missing")_"-"_$S($P(DGMSE(Z),U,2):$$FMTE^XLFDT($P(DGMSE(Z),U,2),"5DZ"),1:"missing")_")"
"RTN","DGRP6CL",74,0)
 S DGCT=DGCT+1,DIR("A",DGCT)=" "
"RTN","DGRP6CL",75,0)
 S DGCT=DGCT+1,DIR("A",DGCT)=$J("",24)_"---- CONFLICT LOCATIONS ----"
"RTN","DGRP6CL",76,0)
 S DGCT=DGCT+1,DIR("A",DGCT)=$J("",34)_"FROM"_$J("",9)_"TO"_$J("",7)_"SOURCE (FOR OEF/OIF)"
"RTN","DGRP6CL",77,0)
 ; DGCONF(DGCONF,"OK")=# entries for OEF/OIF/ UNKNOWN OEF/OIF
"RTN","DGRP6CL",78,0)
 ;                     that are site-entered
"RTN","DGRP6CL",79,0)
 ; DGCONF(DGCONF,"OK",entry ien)=display #^formatted from dt^
"RTN","DGRP6CL",80,0)
 ;       formatted to dt^inconsistent flag (valid entries for editing)
"RTN","DGRP6CL",81,0)
 S DGEG=0
"RTN","DGRP6CL",82,0)
 F DGEGS=2,1,3 D
"RTN","DGRP6CL",83,0)
 . S DGCONF=$P("OIF^OEF^UNK",U,DGEGS),DGM=0
"RTN","DGRP6CL",84,0)
 . S DG=$$ISVALID^DGRP6CL2(.DGCONF,.DGPOSS)
"RTN","DGRP6CL",85,0)
 . S DGEG=DGEG+1
"RTN","DGRP6CL",86,0)
 . S DGDISP=$S(DGCONF'="UNK":$J("",8),1:"OEF/OIF ")_DGCONF_": "
"RTN","DGRP6CL",87,0)
 . S DGCT=DGCT+1,DGCTX=DGCT S DIR("A",DGCT)="   "_$E(DG,1)_DGEG_$E(DG,2)_"  -"_DGDISP_$$YN($S(DGCONF(DGCONF):"Y",'$D(^DPT(DFN,.3215,0)):"",1:"N"),1)
"RTN","DGRP6CL",88,0)
 . I $G(DGCONF(DGCONF))!$D(DGPOSS(DGCONF)) I '$G(DGRPV),$G(DGCONF(DGCONF,"VEDIT"))'=2,'$G(DGCONF(DGCONF,"NOEDIT")) S:DGCONF'="UNK" DIR(0)=DIR(0)_DGEG_":"_DGCONF_";"
"RTN","DGRP6CL",89,0)
 . S (DGZ,DGCONFS)=DGCONF F  S DGCONFS=$O(DGCONFS(DGCONFS)) Q:DGCONFS=""!(DGCONFS'[DGZ)  D
"RTN","DGRP6CL",90,0)
 .. N DGUN,DGIEN
"RTN","DGRP6CL",91,0)
 .. S DGIEN=DGCONFS(DGCONFS),DGCONF=DGZ_"-"_DGIEN,DGCONF1=DGZ,DGM=DGM+1
"RTN","DGRP6CL",92,0)
 .. I $G(DGCONF(DGCONF,1)),DGCTX S $E(DIR("A",DGCTX),1,3)="***"
"RTN","DGRP6CL",93,0)
 .. S DG=$$ISVALID^DGRP6CL2(.DGCONF,.DGPOSS)
"RTN","DGRP6CL",94,0)
 .. S DGUN=$S($G(DGCONF(DGCONF,"NOEDIT")):1,1:0)
"RTN","DGRP6CL",95,0)
 .. I 'DGUN S DGCONF(DGCONF1,"OK")=$G(DGCONF(DGCONF1,"OK"))+1,DGCONF(DGCONF1,"OK",DGIEN)=DGM_U_$$FMTE^XLFDT($P(DGCONF(DGCONF),U),"5DZ")_U_$$FMTE^XLFDT($P(DGCONF(DGCONF),U,2),"5DZ")
"RTN","DGRP6CL",96,0)
 .. I DGM>1 S DGCT=DGCT+1
"RTN","DGRP6CL",97,0)
 .. S DIR("A",DGCT)=$S(DGM>1:$J("",27-$L(DGM)),1:DIR("A",DGCT)_" ")_"("_DGM_")  "_$E($$DAT(DGCONF(DGCONF),1,13)_$J("",12),1,12)_$E($$DAT(DGCONF(DGCONF),2,11)_$J("",10),1,10)_"   "
"RTN","DGRP6CL",98,0)
 .. S DIR("A",DGCT)=DIR("A",DGCT)_$S($P(DGCONF(DGCONF),U,3)="CEV":"",1:"Station #")_$E($P(DGCONF(DGCONF),U,3)_$J("",$S('DGUN:6,1:3)),1,$S('DGUN:6,1:3))_$S(DGUN:" (No Edit)",1:"")
"RTN","DGRP6CL",99,0)
 D LOOPCNF^DGRP6CL1(.DGCONF,.DGPOSS,.DIR)
"RTN","DGRP6CL",100,0)
 S DGCT=DGCT+1,DIR("A",DGCT)=" "
"RTN","DGRP6CL",101,0)
 I $G(DGMSG) S DGCT=DGCT+1,DIR("A",DGCT)="*** ==>OEF/OIF Dates are inconsistent with veteran's military service episodes"
"RTN","DGRP6CL",102,0)
 S DIR("A")="SELECT THE NUMBER OF A CONFLICT LOCATION OR (Q)UIT: "
"RTN","DGRP6CL",103,0)
 S DIR(0)=DIR(0)_"Q:QUIT"
"RTN","DGRP6CL",104,0)
 S DIR("?")="^D HELP^DGRP6CL1($P(DIR(0),U,2))"
"RTN","DGRP6CL",105,0)
 S DIR("B")="QUIT"
"RTN","DGRP6CL",106,0)
 D ^DIR K DIR
"RTN","DGRP6CL",107,0)
 I $D(DUOUT)!$D(DTOUT)!(Y="Q") S:Y'="Q" QUIT=1 G QUIT
"RTN","DGRP6CL",108,0)
 S DGY=Y,DGY1=$S(Y=2:1,Y=1:2,1:Y)
"RTN","DGRP6CL",109,0)
 I DGY<4 S DGCONF=""
"RTN","DGRP6CL",110,0)
 I DGY'<4 D
"RTN","DGRP6CL",111,0)
 . S DGCONF=$P("OEF^OIF^UNK^VIET^LEB^GREN^PAN^GULF^SOM^YUG",U,DGY)
"RTN","DGRP6CL",112,0)
 . I $G(DGCONF(DGCONF,1)) W !!,"WARNING - THIS CONFLICT IS INCONSISTENT WITH MILITARY SERVICE DATA",!
"RTN","DGRP6CL",113,0)
 . S DIE=2,DA=DFN,DR=$P($T(@DGCONF),";;",2) D:DR'="" ^DIE K DIE,DA,DR
"RTN","DGRP6CL",114,0)
 I DGY=1!(DGY=2) D
"RTN","DGRP6CL",115,0)
 . S DGCONF=$P("OEF^OIF",U,DGY)
"RTN","DGRP6CL",116,0)
 . I '$G(DGCONF(DGCONF,"OK")),$G(DGCONF(DGCONF,"VEDIT"))'=2 D ADDCFL^DGRP6CL1(DFN,DGY1,DGCONF) Q  ; Add new only valid action
"RTN","DGRP6CL",117,0)
 . I $G(DGCONF(DGCONF,"VEDIT"))=1 S DIR("A")="DO YOU WANT TO (A)DD OR (E)DIT "_DGCONF_" CONFLICT DATA?: ",DIR(0)="SA^A:ADD;E:EDIT",DIR("B")="ADD" D ^DIR K DIR
"RTN","DGRP6CL",118,0)
 . I $G(DGCONF(DGCONF,"VEDIT"))=2,$G(DGCONF(DGCONF,"OK")) S DIR("A")="DO YOU WANT TO EDIT "_DGCONF_" CONFLICT DATA?: ",DIR(0)="YA",DIR("B")="YES" D ^DIR K DIR S Y=$S(Y=1:"E",1:Y)
"RTN","DGRP6CL",119,0)
 . Q:$D(DTOUT)!$D(DUOUT)
"RTN","DGRP6CL",120,0)
 . I Y="A" D ADDCFL^DGRP6CL1(DFN,DGY1,DGCONF) Q
"RTN","DGRP6CL",121,0)
 . I Y="E" D
"RTN","DGRP6CL",122,0)
 .. N DGXREF,IEN,DIR,X,Y
"RTN","DGRP6CL",123,0)
 .. I DGCONF(DGCONF,"OK")=1 S IEN=+$O(DGCONF(DGCONF,"OK",0)) I IEN D EDCFL^DGRP6CL1(DFN,IEN,$G(DGCONF(DGCONF,"VEDIT"))) Q
"RTN","DGRP6CL",124,0)
 .. S DIR(0)="SA^",DIR("A")="SELECT THE # OF THE "_DGCONF_" CONFLICT PERIOD TO EDIT: ",DIR("A",1)=" "
"RTN","DGRP6CL",125,0)
 .. S Z=0 F  S Z=$O(DGCONF(DGCONF,"OK",Z)) Q:'Z  S Z0=DGCONF(DGCONF,"OK",Z),DIR(0)=DIR(0)_+Z0_":"_$P(Z0,U,2)_$S($P(Z0,U,3)'="":"-"_$P(Z0,U,3),1:"")_";",DGXREF(+Z0)=Z
"RTN","DGRP6CL",126,0)
 .. S DIR(0)=DIR(0)_"Q:QUIT"
"RTN","DGRP6CL",127,0)
 .. D ^DIR K DIR
"RTN","DGRP6CL",128,0)
 .. I Y D EDCFL^DGRP6CL1(DFN,+$G(DGXREF(+Y)),$G(DGCONF(DGCONF,"VEDIT")))
"RTN","DGRP6CL",129,0)
 G EN1
"RTN","DGRP6CL",130,0)
 ;
"RTN","DGRP6CL",131,0)
QUIT Q
"RTN","DGRP6CL",132,0)
 ;
"RTN","DGRP6CL",133,0)
EN2 ; Consistency checker re-edit entrypoint for OEF/OIF data
"RTN","DGRP6CL",134,0)
 N DGOEIF,DGZ,DGQUIT,Z,Z0,Y
"RTN","DGRP6CL",135,0)
 D GET^DGENOEIF(DFN,.DGOEIF,2,"",1)
"RTN","DGRP6CL",136,0)
 I $G(DGOEIF("COUNT"))&($O(DGOEIF("OIF",0))!$O(DGOEIF("OEF",0))) D
"RTN","DGRP6CL",137,0)
 . F Z="OEF","OIF" S Z0=0 F  S Z0=$O(DGOEIF(Z,Z0)) Q:'Z0  I $G(DGOEIF(Z,Z0,"IEN")) S DGZ(DGOEIF(Z,Z0,"IEN"))=""
"RTN","DGRP6CL",138,0)
 . S (DGQUIT,DGZ)=0 F  S DGZ=$O(DGZ(DGZ)) Q:'DGZ  D  Q:DGQUIT
"RTN","DGRP6CL",139,0)
 .. N DGX,DA,DIE,DR,X
"RTN","DGRP6CL",140,0)
 .. S DGX=$G(^DPT(DFN,.3215,DGZ,0))
"RTN","DGRP6CL",141,0)
 .. W !!,"OEF/OIF CONFLICT: ",$$EXTERNAL^DILFD(2.3215,.01,"",$P(DGX,U)),"  FROM: "_$$EXTERNAL^DILFD(2.3215,.02,"",$P(DGX,U,2)),"  TO: "_$$EXTERNAL^DILFD(2.3215,.03,"",$P(DGX,U,3))
"RTN","DGRP6CL",142,0)
 .. S DA=DGZ,DA(1)=DFN,DIE="^DPT("_DA(1)_",.3215,",DR=".01;.02R;.03R" D ^DIE I $D(Y) S DGQUIT=1
"RTN","DGRP6CL",143,0)
 Q
"RTN","DGRP6CL",144,0)
 ;
"RTN","DGRP6CL",145,0)
SVCCOMP(X) ; Returns display text for service component
"RTN","DGRP6CL",146,0)
 Q $S(X="R":"REGULAR",X="V":"RESERVE",X="G":"GUARD",1:"")
"RTN","DGRP6CL",147,0)
 ;
"RTN","DGRP6CL",148,0)
VIET ;;.32101//NO;S:X'="Y" Y="@64";.32104;.32105;@64;
"RTN","DGRP6CL",149,0)
LEB ;;.3221//NO;S:X'="Y" Y="@67";.3222;Q;.3223;@67;
"RTN","DGRP6CL",150,0)
GREN ;;.3224//NO;S:X'="Y" Y="@68";.3225;Q;.3226;@68;
"RTN","DGRP6CL",151,0)
PAN ;;.3227//NO;S:X'="Y" Y="@69";.3228;Q;.3229;@69;
"RTN","DGRP6CL",152,0)
GULF ;;.32201//NO;S:X'="Y" Y="@610";.322011;Q;.322012;@610;
"RTN","DGRP6CL",153,0)
SOM ;;.322016//NO;S:X'="Y" Y="@611";.322017;Q;.322018;@611;
"RTN","DGRP6CL",154,0)
YUG ;;.322019//NO;S:X'="Y" Y="@615";.32202;Q;.322021;@615;
"RTN","DGRP6CL",155,0)
OEF ;;
"RTN","DGRP6CL",156,0)
OIF ;;
"RTN","DGRP6CL",157,0)
UNK ;;
"RTN","DGRP6CL",158,0)
 ;;
"VER")
8.0^22.0
"BLD",7087,6)
^661
**END**
**END**

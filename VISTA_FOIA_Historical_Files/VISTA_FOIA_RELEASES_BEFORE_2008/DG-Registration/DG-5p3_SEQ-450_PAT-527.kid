Released DG*5.3*527 SEQ #450
Extracted from mail message
**KIDS**:DG*5.3*527^

**INSTALL NAME**
DG*5.3*527
"BLD",4176,0)
DG*5.3*527^REGISTRATION^0^3030609^y
"BLD",4176,1,0)
^^1^1^3030609^
"BLD",4176,1,1,0)
HIPAA Confidential Address changes.
"BLD",4176,4,0)
^9.64PA^^
"BLD",4176,"ABPKG")
n
"BLD",4176,"INIT")
DG53527P
"BLD",4176,"KRN",0)
^9.67PA^8989.52^19
"BLD",4176,"KRN",.4,0)
.4
"BLD",4176,"KRN",.401,0)
.401
"BLD",4176,"KRN",.402,0)
.402
"BLD",4176,"KRN",.403,0)
.403
"BLD",4176,"KRN",.5,0)
.5
"BLD",4176,"KRN",.84,0)
.84
"BLD",4176,"KRN",3.6,0)
3.6
"BLD",4176,"KRN",3.8,0)
3.8
"BLD",4176,"KRN",9.2,0)
9.2
"BLD",4176,"KRN",9.8,0)
9.8
"BLD",4176,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",4176,"KRN",9.8,"NM",1,0)
DGDDC^^0^B7666533
"BLD",4176,"KRN",9.8,"NM",2,0)
DGRPU1^^0^B6109737
"BLD",4176,"KRN",9.8,"NM",3,0)
DGLOCK3^^0^B6610555
"BLD",4176,"KRN",9.8,"NM","B","DGDDC",1)

"BLD",4176,"KRN",9.8,"NM","B","DGLOCK3",3)

"BLD",4176,"KRN",9.8,"NM","B","DGRPU1",2)

"BLD",4176,"KRN",19,0)
19
"BLD",4176,"KRN",19.1,0)
19.1
"BLD",4176,"KRN",101,0)
101
"BLD",4176,"KRN",409.61,0)
409.61
"BLD",4176,"KRN",771,0)
771
"BLD",4176,"KRN",870,0)
870
"BLD",4176,"KRN",8989.51,0)
8989.51
"BLD",4176,"KRN",8989.52,0)
8989.52
"BLD",4176,"KRN",8994,0)
8994
"BLD",4176,"KRN","B",.4,.4)

"BLD",4176,"KRN","B",.401,.401)

"BLD",4176,"KRN","B",.402,.402)

"BLD",4176,"KRN","B",.403,.403)

"BLD",4176,"KRN","B",.5,.5)

"BLD",4176,"KRN","B",.84,.84)

"BLD",4176,"KRN","B",3.6,3.6)

"BLD",4176,"KRN","B",3.8,3.8)

"BLD",4176,"KRN","B",9.2,9.2)

"BLD",4176,"KRN","B",9.8,9.8)

"BLD",4176,"KRN","B",19,19)

"BLD",4176,"KRN","B",19.1,19.1)

"BLD",4176,"KRN","B",101,101)

"BLD",4176,"KRN","B",409.61,409.61)

"BLD",4176,"KRN","B",771,771)

"BLD",4176,"KRN","B",870,870)

"BLD",4176,"KRN","B",8989.51,8989.51)

"BLD",4176,"KRN","B",8989.52,8989.52)

"BLD",4176,"KRN","B",8994,8994)

"BLD",4176,"QUES",0)
^9.62^^
"BLD",4176,"REQB",0)
^9.611^1^1
"BLD",4176,"REQB",1,0)
DG*5.3*244^2
"BLD",4176,"REQB","B","DG*5.3*244",1)

"INIT")
DG53527P
"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2941102^2941102
"PKG",5,22,1,"PAH",1,0)
527^3030609
"PKG",5,22,1,"PAH",1,1,0)
^^1^1^3030609
"PKG",5,22,1,"PAH",1,1,1,0)
HIPAA Confidential Address changes.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","DG53527P")
0^^B18819071
"RTN","DG53527P",1,0)
DG53527P ;BP-CIOFO/KEITH - Pre/post inits ; 21 May 2001  7:11 PM
"RTN","DG53527P",2,0)
 ;;5.3;Registration;**527**;Aug 13, 1993
"RTN","DG53527P",3,0)
 ;
"RTN","DG53527P",4,0)
POST ;Post init
"RTN","DG53527P",5,0)
 N DGFLD,DGMFLD,DGOUT,DGFILE
"RTN","DG53527P",6,0)
 ;File cross references
"RTN","DG53527P",7,0)
 F DGFLD=.111,.1112,.112,.113,.114,.115,.116,.1411,.1412,.1413,.1414,.1415,.1416,.1417,.1418 D XR(2,.DGFLD)
"RTN","DG53527P",8,0)
 ;Recompile templates
"RTN","DG53527P",9,0)
 I $O(DGFLD(2,0)) D
"RTN","DG53527P",10,0)
 .D MES^XPDUTL("     >>> Recompiling templates on address fields...")
"RTN","DG53527P",11,0)
 .D DIEZ^DIKCUTL3(2,.DGFLD)
"RTN","DG53527P",12,0)
 .Q
"RTN","DG53527P",13,0)
 ;Check/update triggering field definitions
"RTN","DG53527P",14,0)
 D MES^XPDUTL("     >>> Checking triggering field definitions...")
"RTN","DG53527P",15,0)
 D TRIG^DICR(.DGFLD,.DGOUT)
"RTN","DG53527P",16,0)
 S DGFILE=0 F  S DGFILE=$O(DGOUT(DGFILE)) Q:'DGFILE  D
"RTN","DG53527P",17,0)
 .S DGFLD=0 F  S DGFLD=$O(DGOUT(DGFILE,DGFLD)) Q:'DGFLD  D
"RTN","DG53527P",18,0)
 ..D MES^XPDUTL("         Field #"_DGFLD_" of file #"_DGFILE_" updated.")
"RTN","DG53527P",19,0)
 ..Q
"RTN","DG53527P",20,0)
 .Q
"RTN","DG53527P",21,0)
 ;File cross references for Confidential Address Category fields
"RTN","DG53527P",22,0)
 F DGMFLD=.01,1 D XR(2.141,.DGMFLD)
"RTN","DG53527P",23,0)
 ;Recompile templates
"RTN","DG53527P",24,0)
 I $O(DGMFLD(2.141,0)) D
"RTN","DG53527P",25,0)
 .D MES^XPDUTL("     >>> Recompiling templates on Confidential Address Category fields...")
"RTN","DG53527P",26,0)
 .D DIEZ^DIKCUTL3(2.141,.DGMFLD)
"RTN","DG53527P",27,0)
 .Q
"RTN","DG53527P",28,0)
 ;Check/update triggering field definitions
"RTN","DG53527P",29,0)
 D MES^XPDUTL("     >>> Checking triggering field definitions...")
"RTN","DG53527P",30,0)
 D TRIG^DICR(.DGMFLD,.DGOUT)
"RTN","DG53527P",31,0)
 S DGFILE=0 F  S DGFILE=$O(DGOUT(DGFILE)) Q:'DGFILE  D
"RTN","DG53527P",32,0)
 .S DGFLD=0 F  S DGFLD=$O(DGOUT(DGFILE,DGFLD)) Q:'DGFLD  D
"RTN","DG53527P",33,0)
 ..D MES^XPDUTL("         Field #"_DGFLD_" of file #"_DGFILE_" updated.")
"RTN","DG53527P",34,0)
 ..Q
"RTN","DG53527P",35,0)
 .Q
"RTN","DG53527P",36,0)
 Q
"RTN","DG53527P",37,0)
 ;
"RTN","DG53527P",38,0)
XR(DGFILE,DGFLD) ;File index type cross references
"RTN","DG53527P",39,0)
 ;
"RTN","DG53527P",40,0)
 N DGFDA,DGIEN,DGWP,DGERR,DGXR,DGVAL,DGOUT,DIERR
"RTN","DG53527P",41,0)
 ;Set up x-refs. Any value that has a ".", will have the period
"RTN","DG53527P",42,0)
 ;replaved with a "D" to prevent x-ref's such as .11 and 11 having
"RTN","DG53527P",43,0)
 ;identical xref names
"RTN","DG53527P",44,0)
 S DGXR=$S(DGFLD[".":"ADGFMD"_$P(DGFLD,".",2),1:"ADGFM"_DGFLD)
"RTN","DG53527P",45,0)
 ;Check for existing x-ref
"RTN","DG53527P",46,0)
 S DGVAL(1)=DGFILE,DGVAL(2)=DGXR
"RTN","DG53527P",47,0)
 D FIND^DIC(.11,"","@;IXIE","KP",.DGVAL,"","","","","DGOUT")
"RTN","DG53527P",48,0)
 I $D(DGOUT("DILIST",1)) D  Q
"RTN","DG53527P",49,0)
 .D MES^XPDUTL("     >>> Cross reference "_DGXR_" already exists, nothing filed.")
"RTN","DG53527P",50,0)
 .Q
"RTN","DG53527P",51,0)
 ;Create filer array
"RTN","DG53527P",52,0)
 S DGFDA(.11,"+1,",.01)=DGFILE                      ;FILE
"RTN","DG53527P",53,0)
 S DGFDA(.11,"+1,",.02)=DGXR                        ;NAME
"RTN","DG53527P",54,0)
 S DGFDA(.11,"+1,",.11)="This x-ref calls the DG FIELD MONITOR event point."     ;SHORT DESCRIPTION
"RTN","DG53527P",55,0)
 S DGFDA(.11,"+1,",.2)="MU"                         ;TYPE
"RTN","DG53527P",56,0)
 S DGFDA(.11,"+1,",.4)="F"                          ;EXECUTION
"RTN","DG53527P",57,0)
 S DGFDA(.11,"+1,",.41)="I"                         ;ACTIVITY
"RTN","DG53527P",58,0)
 S DGFDA(.11,"+1,",.5)="I"                          ;ROOT TYPE
"RTN","DG53527P",59,0)
 S DGFDA(.11,"+1,",.51)=DGFILE                      ;ROOT FILE
"RTN","DG53527P",60,0)
 S DGFDA(.11,"+1,",.42)="A"                         ;USE
"RTN","DG53527P",61,0)
 S DGFDA(.11,"+1,",1.1)="D FC^DGFCPROT(.DA,"_DGFILE_","_DGFLD_",""SET"",$H,$G(DUZ),.X,.X1,.X2,$G(XQY0)) Q"     ;SET LOGIC
"RTN","DG53527P",62,0)
 S DGFDA(.11,"+1,",2.1)="D FC^DGFCPROT(.DA,"_DGFILE_","_DGFLD_",""KILL"",$H,$G(DUZ),.X,.X1,.X2,$G(XQY0)) Q"     ;KILL LOGIC
"RTN","DG53527P",63,0)
 ;CROSS REFERENCE VALUES
"RTN","DG53527P",64,0)
 S DGFDA(.114,"+2,+1,",.01)=1                       ;ORDER NUMBER
"RTN","DG53527P",65,0)
 S DGFDA(.114,"+2,+1,",1)="F"                       ;TYPE OF VALUE
"RTN","DG53527P",66,0)
 S DGFDA(.114,"+2,+1,",2)=DGFILE                    ;FILE NUMBER
"RTN","DG53527P",67,0)
 S DGFDA(.114,"+2,+1,",3)=DGFLD                     ;FIELD NUMBER
"RTN","DG53527P",68,0)
 S DGFDA(.114,"+2,+1,",7)="F"                       ;COLLATION
"RTN","DG53527P",69,0)
 ;DESCRIPTION
"RTN","DG53527P",70,0)
 S DGWP(1)="This cross reference activates the DG FIELD MONITOR event point."
"RTN","DG53527P",71,0)
 S DGWP(2)="Applications that wish to monitor edit activity related to this field may"
"RTN","DG53527P",72,0)
 S DGWP(3)="subscribe to that event point and take action as indicated by the changes"
"RTN","DG53527P",73,0)
 S DGWP(4)="that occur.  Refer to the DG FIELD MONITOR protocol for a description of"
"RTN","DG53527P",74,0)
 S DGWP(5)="the information available at the time of the event."
"RTN","DG53527P",75,0)
 ;File INDEX record
"RTN","DG53527P",76,0)
 D UPDATE^DIE("","DGFDA","DGIEN","DGERR")
"RTN","DG53527P",77,0)
 I $D(DIERR) D  Q
"RTN","DG53527P",78,0)
 .N DGI S DGI=""
"RTN","DG53527P",79,0)
 .D MES^XPDUTL("     >>> A problem has occurred during the filing of x-ref. "_DGXR_"!")
"RTN","DG53527P",80,0)
 .D MES^XPDUTL("         Please contact Customer Support.")
"RTN","DG53527P",81,0)
 .F  S DGI=$O(DGERR("DIERR",1,"TEXT",DGI)) Q:DGI=""  D
"RTN","DG53527P",82,0)
 ..D MES^XPDUTL(DGERR("DIERR",1,"TEXT",DGI))
"RTN","DG53527P",83,0)
 ..Q
"RTN","DG53527P",84,0)
 .Q
"RTN","DG53527P",85,0)
 S DGFLD(DGFILE,DGFLD)=""  ;Create list to recompile templates
"RTN","DG53527P",86,0)
 D MES^XPDUTL("     >>> "_DGXR_" cross reference filed.")
"RTN","DG53527P",87,0)
 ;File DESCRIPTION field
"RTN","DG53527P",88,0)
 D WP^DIE(.11,DGIEN(1)_",",.1,"","DGWP")
"RTN","DG53527P",89,0)
 Q
"RTN","DGDDC")
0^1^B7666533
"RTN","DGDDC",1,0)
DGDDC ;ALB/MRL - X-ECUTE KILL X-REFERENCES [PATIENT] ;25 JUL 88@1337
"RTN","DGDDC",2,0)
 ;;5.3;Registration;**489,244,527**;Aug 13, 1993
"RTN","DGDDC",3,0)
 ;
"RTN","DGDDC",4,0)
 Q:$D(DGNOFDEL)  ;Flag variable to prevent deletion cascade
"RTN","DGDDC",5,0)
 ;
"RTN","DGDDC",6,0)
 Q:'$D(DGXRF)  N DGXRFX,DGXRF1,DGXRF2,DGXRF3,DGXRF3,DGXRF4,DGXRF5,DGXRF6,DGXRF7,DGXRF8,DGXRFP,DGXRFX
"RTN","DGDDC",7,0)
 S DGXRFX=X,DGXRF1=+$P(DGXRF,".",2),DGXRF2=$P($T(@DGXRF1),";;",2) G Q:DGXRF2=""
"RTN","DGDDC",8,0)
 I $D(^DD(2,DGXRF,0)) S DGXRFP=$P(^(0),"^",4),DGXRF6=$P(DGXRFP,";",2),DGXRF5=$P(DGXRFP,";",1) I $D(^DPT(DA,DGXRF5)),($P(^(DGXRF5),"^",DGXRF6)=DGXRFX) G Q
"RTN","DGDDC",9,0)
 N DGFDA,DGERR
"RTN","DGDDC",10,0)
 ;F DGXRF3=1:1 S DGXRF4=$P(DGXRF2,"^",DGXRF3) Q:DGXRF4=""  I $D(^DD(2,DGXRF4,0)) S DGXRF5=$P(^(0),"^",4),DGXRF6=$P(DGXRF5,";",2),DGXRF5=$P(DGXRF5,";",1) I $D(^DPT(DA,DGXRF5)),$P(^(DGXRF5),"^",DGXRF6)'="" D KILL
"RTN","DGDDC",11,0)
 F DGXRF3=1:1 S DGXRF4=$P(DGXRF2,"^",DGXRF3) Q:DGXRF4=""  I $D(^DD(2,DGXRF4,0)) S DGXRF5=$P(^(0),"^",4),DGXRF6=$P(DGXRF5,";",2),DGXRF5=$P(DGXRF5,";",1) I $D(^DPT(DA,DGXRF5)),$P(^(DGXRF5),"^",DGXRF6)'="" D
"RTN","DGDDC",12,0)
 .S DGFDA(2,DA_",",DGXRF4)=""
"RTN","DGDDC",13,0)
 I $D(DGFDA) D FILE^DIE("","DGFDA","DGERR")
"RTN","DGDDC",14,0)
Q S X=DGXRFX K DGXRF Q  ;,DGXRFX,DGXRF1,DGXRF2,DGXRF3,DGXRF3,DGXRF4,DGXRF5,DGXRF6,DGXRF7,DGXRF8,DGXRFP,DGXRFX Q
"RTN","DGDDC",15,0)
KILL S DGXRF7=$P(^DPT(DA,DGXRF5),"^",DGXRF6),$P(^DPT(DA,DGXRF5),"^",DGXRF6)=""
"RTN","DGDDC",16,0)
 F DGXRF8=0:0 S DGXRF8=$O(^DD(2,DGXRF4,1,DGXRF8)) Q:'DGXRF8  I $D(^DD(2,DGXRF4,1,DGXRF8,2)) S X=DGXRF7 X:^(2)'["DGXRF" ^(2) D SET I $D(^DD(2,DGXRF4,1,DGXRF8,1)) D SET
"RTN","DGDDC",17,0)
 Q
"RTN","DGDDC",18,0)
SET Q:^DD(2,DGXRF4,1,DGXRF8,1)'["DGXRF"  S X="" X ^(1) Q
"RTN","DGDDC",19,0)
 ;
"RTN","DGDDC",20,0)
152 ;;.1651^.1653^.1654^.1656^.307^
"RTN","DGDDC",21,0)
153 ;;.1657^.1658^.1659^
"RTN","DGDDC",22,0)
211 ;;.212^.2125^.213^.214^.215^.216^.217^.218^.219^.21011^.2207^
"RTN","DGDDC",23,0)
2191 ;;.2192^.21925^.2193^.2194^.2195^.2196^.2197^.2198^.2199^.211011^.2203^
"RTN","DGDDC",24,0)
251 ;;.252^.253^.254^.255^.256^.257^.258^.2206^
"RTN","DGDDC",25,0)
3111 ;;.3113^.3114^.3115^.3116^.3117^.3118^.3119^.2205^
"RTN","DGDDC",26,0)
331 ;;.332^.3305^.333^.334^.335^.336^.337^.338^.339^.33011^.2201^
"RTN","DGDDC",27,0)
3311 ;;.3312^.3313^.3314^.3315^.3316^.3317^.3318^.3319^.331011^.2204^
"RTN","DGDDC",28,0)
341 ;;.342^.3405^.343^.344^.345^.346^.347^.348^.349^.34011^.2202^
"RTN","DGDDC",29,0)
3285 ;;.329^.3291^.3292^.3293^.3294^
"RTN","DGDDC",30,0)
32945 ;;.3295^.3296^.3297^.3298^.3299^
"RTN","DGDDC",31,0)
111 ;;.112^.113
"RTN","DGDDC",32,0)
112 ;;.113
"RTN","DGDDC",33,0)
12105 ;;.1217^.1218
"RTN","DGDDC",34,0)
1211 ;;.1212^.1213
"RTN","DGDDC",35,0)
1212 ;;.1213
"RTN","DGDDC",36,0)
14105 ;;.1417^.1418
"RTN","DGDDC",37,0)
1411 ;;.1412^.1413
"RTN","DGDDC",38,0)
1412 ;;.1413
"RTN","DGDDC",39,0)
213 ;;.214^.215
"RTN","DGDDC",40,0)
214 ;;.215
"RTN","DGDDC",41,0)
2193 ;;.2194^.2195
"RTN","DGDDC",42,0)
2194 ;;.2195
"RTN","DGDDC",43,0)
252 ;;.253^.254
"RTN","DGDDC",44,0)
253 ;;.254
"RTN","DGDDC",45,0)
3113 ;;.3114^.3115
"RTN","DGDDC",46,0)
3114 ;;.3115
"RTN","DGDDC",47,0)
3313 ;;.3314^.3315
"RTN","DGDDC",48,0)
3314 ;;.3315
"RTN","DGDDC",49,0)
333 ;;.334^.335
"RTN","DGDDC",50,0)
334 ;;.335
"RTN","DGDDC",51,0)
343 ;;.344^.345
"RTN","DGDDC",52,0)
344 ;;.345
"RTN","DGDDC",53,0)
361 ;;.3611
"RTN","DGLOCK3")
0^3^B6610555
"RTN","DGLOCK3",1,0)
DGLOCK3 ;ALB/BOK - PATIENT FILE MUMPS TRIGGER/DATA EDIT CHECKS ; 28 NOV 86
"RTN","DGLOCK3",2,0)
 ;;5.3;Registration;**489,527**;Aug 13, 1993
"RTN","DGLOCK3",3,0)
KILL S DGX=X I $D(^DPT(DFN,.32)) F DGKZ=0:0 S DGKZ=$O(DGBZ(DGKZ)) Q:'DGKZ  S X=$P(^DPT(DFN,.32),"^",DGKZ),$P(^(.32),"^",DGKZ)="" I X]"" S DGIZ=$S(DGKZ=20:.32945,1:(DGKZ/10000+.3281)) I $D(^DD(2,DGIZ,1)) D KILL1
"RTN","DGLOCK3",4,0)
 S X=DGX
"RTN","DGLOCK3",5,0)
 Q
"RTN","DGLOCK3",6,0)
KILL1 F DGJZ=0:0 S DGJZ=$O(^DD(2,DGIZ,1,DGJZ)) Q:'DGJZ  X ^(DGJZ,2)
"RTN","DGLOCK3",7,0)
 Q
"RTN","DGLOCK3",8,0)
S1 K DGBZ F DGKZ=9:1:13,20 S DGBZ(DGKZ)=""
"RTN","DGLOCK3",9,0)
 D KILL K DGBZ,DGIZ,DGJZ,DGKZ
"RTN","DGLOCK3",10,0)
 Q
"RTN","DGLOCK3",11,0)
S2 K DGBZ F DGKZ=14:1:18 S DGBZ(DGKZ)=""
"RTN","DGLOCK3",12,0)
 D KILL K DGBZ,DGIZ,DGJZ,DGKZ
"RTN","DGLOCK3",13,0)
 Q
"RTN","DGLOCK3",14,0)
CAD ;Confidential Address Edit
"RTN","DGLOCK3",15,0)
 I $S('$D(^DPT(DFN,.141)):1,$P(^(.141),U,9)'="Y":1,1:0) D
"RTN","DGLOCK3",16,0)
 .D EN^DDIOL("Requirement for Confidential Address data not indicated...NO EDITING!","","$C(7),!?4") K X
"RTN","DGLOCK3",17,0)
 Q
"RTN","DGLOCK3",18,0)
CADD ;Confidential Address Delete
"RTN","DGLOCK3",19,0)
 ;Called from input transform on Confidential Address fields
"RTN","DGLOCK3",20,0)
 Q:'$D(^DPT(DFN,.141))  I $P(^(.141),"^",9)="N"!($P(^(.141),"^",1,6)="^^^^^") D  Q
"RTN","DGLOCK3",21,0)
 .N DGFDA,DGERR
"RTN","DGLOCK3",22,0)
 .D CADM
"RTN","DGLOCK3",23,0)
 .I $D(DGFDA) D
"RTN","DGLOCK3",24,0)
 ..N DGX
"RTN","DGLOCK3",25,0)
 ..S DGX=X
"RTN","DGLOCK3",26,0)
 ..D FILE^DIE("","DGFDA","DGERR")
"RTN","DGLOCK3",27,0)
 ..S X=DGX
"RTN","DGLOCK3",28,0)
 ;
"RTN","DGLOCK3",29,0)
ASK W !,"Do you want to delete all confidential address data" S %=2 D YN^DICN I %Y["?" W !,"Answer 'Y'es to remove confidential address information, 'N'o to leave data in file" G ASK
"RTN","DGLOCK3",30,0)
ASK1 ;
"RTN","DGLOCK3",31,0)
 Q:%'=1
"RTN","DGLOCK3",32,0)
 ;S DGTEMPH=$P(^DPT(DFN,.141),"^",7,8),^(.141)="^^^^^^"_DGTEMPH_"^N^^" K DGTEMPH
"RTN","DGLOCK3",33,0)
 N DGFDA,DGERR,DGX,DGFLD
"RTN","DGLOCK3",34,0)
 F DGFLD=.1411,.1412,.1413,.1414,.1415,.1416,.14111 S DGFDA(2,DFN_",",DGFLD)=""
"RTN","DGLOCK3",35,0)
 D CADM
"RTN","DGLOCK3",36,0)
 S DGX=X
"RTN","DGLOCK3",37,0)
 D FILE^DIE("","DGFDA","DGERR")
"RTN","DGLOCK3",38,0)
 S X=DGX
"RTN","DGLOCK3",39,0)
 Q
"RTN","DGLOCK3",40,0)
CADM ;Delete data from Confidential Address Categories
"RTN","DGLOCK3",41,0)
 I $D(^DPT(DFN,.14)) D
"RTN","DGLOCK3",42,0)
 .N DGIEN
"RTN","DGLOCK3",43,0)
 .S DGIEN=0
"RTN","DGLOCK3",44,0)
 .F  S DGIEN=$O(^DPT(DFN,.14,DGIEN)) Q:'DGIEN  D
"RTN","DGLOCK3",45,0)
 ..S DGFDA(2.141,DGIEN_","_DFN_",",.01)=""
"RTN","DGLOCK3",46,0)
 Q
"RTN","DGLOCK3",47,0)
CADD1 ;Confidential Address Delete
"RTN","DGLOCK3",48,0)
 ;Called from Confidential Address "DEL" nodes
"RTN","DGLOCK3",49,0)
 I $D(^DPT(DFN,.141)),$P(^(.141),U,9)="Y" D
"RTN","DGLOCK3",50,0)
 .D EN^DDIOL("Answer NO to the 'CONFIDENTIAL ADDRESS ACTIVE' prompt to delete.","","$C(7),!?4") K X
"RTN","DGLOCK3",51,0)
 Q
"RTN","DGRPU1")
0^2^B6109737
"RTN","DGRPU1",1,0)
DGRPU1 ;ALB/REW CUSTOM LOAD/EDIT SCREEN UTILITIES ;9-FEB-92
"RTN","DGRPU1",2,0)
 ;;5.3;Registration;**139,169,415,527**;Aug 13, 1993
"RTN","DGRPU1",3,0)
 ;
"RTN","DGRPU1",4,0)
QUES(DFN,DGQCODE) ; EDIT SPECIFIC PORTIONS OF REGISTRATION DATA
"RTN","DGRPU1",5,0)
 ;
"RTN","DGRPU1",6,0)
 ;  INPUT:
"RTN","DGRPU1",7,0)
 ;     DFN
"RTN","DGRPU1",8,0)
 ;     DGQCODE = Code for question(s) to be asked
"RTN","DGRPU1",9,0)
 ;  OUTPUT:
"RTN","DGRPU1",10,0)
 ;     DGERR   = ERROR VARIABLE
"RTN","DGRPU1",11,0)
 ;     DGCHANGE= 1 IF DATA MODIFIED 0 O/W
"RTN","DGRPU1",12,0)
 ;  USED:
"RTN","DGRPU1",13,0)
 ;     DGPTND  = Prior value(s) of Patient File node(s) [array]
"RTN","DGRPU1",14,0)
 ;     DGQNODES= Node(s) used above
"RTN","DGRPU1",15,0)
 ;     DGNODE  = Single node
"RTN","DGRPU1",16,0)
 ;     DGDR    = edit=screen*10+item #
"RTN","DGRPU1",17,0)
 ;     DGRPS   = Screen #
"RTN","DGRPU1",18,0)
 ;     DGCODE  = CODE used by ^DGRPE
"RTN","DGRPU1",19,0)
 ;     DGQ     = String of ^DGCODE^DGCODE etc.
"RTN","DGRPU1",20,0)
 ;     DGPC    = Piece Number
"RTN","DGRPU1",21,0)
 ;     DGX     = Line Tag offset
"RTN","DGRPU1",22,0)
 ;
"RTN","DGRPU1",23,0)
 N D,D0,DI,DIC,DGCODE,DGDR,DGNODE,DGQNODES,DGPC,DGPTND,DGRPS,DGQ,DGX
"RTN","DGRPU1",24,0)
 N DQ,N,X,Y,%Y,DGPTNDM
"RTN","DGRPU1",25,0)
 S (DGERR,DGRPS,DGCHANGE)=0
"RTN","DGRPU1",26,0)
 I '($G(DFN)&$D(DGQCODE)) G QTE
"RTN","DGRPU1",27,0)
 F DGX=1:1 S DGQ=$T(QDES+DGX) Q:DGQ[(U_DGQCODE_U)!(DGQ']"")
"RTN","DGRPU1",28,0)
 F DGPC=2:1 S DGCODE=$P(DGQ,U,DGPC) Q:(DGCODE']"")!(DGCODE=DGQCODE)
"RTN","DGRPU1",29,0)
 G:DGCODE']"" QTE
"RTN","DGRPU1",30,0)
 S DGDR=$P($T(QNUM+DGX),U,DGPC)
"RTN","DGRPU1",31,0)
 S DGRPS=DGDR\100
"RTN","DGRPU1",32,0)
 S DGQNODES=$P($T(QNODE+DGX),U,DGPC)
"RTN","DGRPU1",33,0)
 F N=1:1 S DGNODE=$P(DGQNODES,"~",N) Q:DGNODE']""  S DGPTND(DGNODE)=$G(^DPT(DFN,DGNODE))
"RTN","DGRPU1",34,0)
 S DGQNODES=$P($T(MNODE+DGX),U,DGPC)
"RTN","DGRPU1",35,0)
 F N=1:1 S DGNODE=$P(DGQNODES,"~",N) Q:DGNODE']""  M DGPTNDM(DGNODE)=^DPT(DFN,DGNODE) S DGPTNDM(DGNODE)=""
"RTN","DGRPU1",36,0)
 D ^DGRPE
"RTN","DGRPU1",37,0)
 F DGNODE=0:0 S DGNODE=$O(DGPTND(DGNODE)) Q:DGNODE']""  S:$G(^DPT(DFN,DGNODE))'=(DGPTND(DGNODE)) DGCHANGE=1
"RTN","DGRPU1",38,0)
 S DGNODE="" F  S DGNODE=$O(DGPTNDM(DGNODE)) Q:DGNODE']""  D  Q:DGCHANGE
"RTN","DGRPU1",39,0)
 .S X=0 F  S X=$O(DGPTNDM(DGNODE,X)) Q:'X  D  Q:DGCHANGE
"RTN","DGRPU1",40,0)
 ..S Y="" F  S Y=$O(DGPTNDM(DGNODE,X,Y)) Q:Y']""  D  Q:DGCHANGE
"RTN","DGRPU1",41,0)
 ...I $G(^DPT(DFN,DGNODE,X,Y))'=DGPTNDM(DGNODE,X,Y) S DGCHANGE=1
"RTN","DGRPU1",42,0)
 .Q:DGCHANGE
"RTN","DGRPU1",43,0)
 .S X=0 F  S X=$O(^DPT(DGNODE,X)) Q:'X  D  Q:DGCHANGE
"RTN","DGRPU1",44,0)
 ..S Y="" F  S Y=$O(^DPT(DGNODE,X,Y)) Q:Y']""  D  Q:DGCHANGE
"RTN","DGRPU1",45,0)
 ...I $G(^DPT(DFN,DGNODE,X,Y))'=DGPTNDM(DGNODE,X,Y) S DGCHANGE=1
"RTN","DGRPU1",46,0)
QTE I 'DGRPS S DGERR=1
"RTN","DGRPU1",47,0)
QTQ Q
"RTN","DGRPU1",48,0)
QDES ;MNEMONIC - DGQCODE should match with one of these
"RTN","DGRPU1",49,0)
 ;;^ADD1^ADD2^ADD^ADD3^ADD4^
"RTN","DGRPU1",50,0)
QNUM ;REFERENCE NUMBERS USED TO SET DGDR FOR USE BY ^DGRPE
"RTN","DGRPU1",51,0)
 ;;^104^105^109,105^109,105^111^
"RTN","DGRPU1",52,0)
 ;;
"RTN","DGRPU1",53,0)
QNODE ;;NODES OF THE PATIENT FILE
"RTN","DGRPU1",54,0)
 ;;^.11~.13^.121^.11~.121~.13^.11~.121~.13^.141^
"RTN","DGRPU1",55,0)
 ;;
"RTN","DGRPU1",56,0)
MNODE ;;MULTIPLES OF THE PATIENT FILE
"RTN","DGRPU1",57,0)
 ;;^^^.02~.06^.02~.06^.14^
"VER")
8.0^22.0
**END**
**END**

Released DVBA*2.7*31 SEQ #30
Extracted from mail message
**KIDS**:DVBA*2.7*31^

**INSTALL NAME**
DVBA*2.7*31
"BLD",2439,0)
DVBA*2.7*31^AUTOMATED MED INFO EXCHANGE^0^3000314^y
"BLD",2439,1,0)
^^2^2^3000314^^^
"BLD",2439,1,1,0)
When users print C&P exam result, sign "<" as well as its following exam 
"BLD",2439,1,2,0)
information will not be printed. The patch corrects the problem.
"BLD",2439,4,0)
^9.64PA^^
"BLD",2439,"KRN",0)
^9.67PA^19^17
"BLD",2439,"KRN",.4,0)
.4
"BLD",2439,"KRN",.401,0)
.401
"BLD",2439,"KRN",.402,0)
.402
"BLD",2439,"KRN",.403,0)
.403
"BLD",2439,"KRN",.5,0)
.5
"BLD",2439,"KRN",.84,0)
.84
"BLD",2439,"KRN",3.6,0)
3.6
"BLD",2439,"KRN",3.8,0)
3.8
"BLD",2439,"KRN",9.2,0)
9.2
"BLD",2439,"KRN",9.2,"NM",0)
^9.68A^^
"BLD",2439,"KRN",9.8,0)
9.8
"BLD",2439,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",2439,"KRN",9.8,"NM",1,0)
DVBCPRN1^^0^B19169531
"BLD",2439,"KRN",9.8,"NM",2,0)
DVBCRPRT^^0^B14119278
"BLD",2439,"KRN",9.8,"NM","B","DVBCPRN1",1)

"BLD",2439,"KRN",9.8,"NM","B","DVBCRPRT",2)

"BLD",2439,"KRN",19,0)
19
"BLD",2439,"KRN",19.1,0)
19.1
"BLD",2439,"KRN",101,0)
101
"BLD",2439,"KRN",409.61,0)
409.61
"BLD",2439,"KRN",771,0)
771
"BLD",2439,"KRN",870,0)
870
"BLD",2439,"KRN",8994,0)
8994
"BLD",2439,"KRN","B",.4,.4)

"BLD",2439,"KRN","B",.401,.401)

"BLD",2439,"KRN","B",.402,.402)

"BLD",2439,"KRN","B",.403,.403)

"BLD",2439,"KRN","B",.5,.5)

"BLD",2439,"KRN","B",.84,.84)

"BLD",2439,"KRN","B",3.6,3.6)

"BLD",2439,"KRN","B",3.8,3.8)

"BLD",2439,"KRN","B",9.2,9.2)

"BLD",2439,"KRN","B",9.8,9.8)

"BLD",2439,"KRN","B",19,19)

"BLD",2439,"KRN","B",19.1,19.1)

"BLD",2439,"KRN","B",101,101)

"BLD",2439,"KRN","B",409.61,409.61)

"BLD",2439,"KRN","B",771,771)

"BLD",2439,"KRN","B",870,870)

"BLD",2439,"KRN","B",8994,8994)

"BLD",2439,"QUES",0)
^9.62^^
"BLD",2439,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,20,0)
^9.402P^^
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^2950508
"PKG",223,22,1,"PAH",1,0)
31^3000314
"PKG",223,22,1,"PAH",1,1,0)
^^2^2^3000314
"PKG",223,22,1,"PAH",1,1,1,0)
When users print C&P exam result, sign "<" as well as its following exam 
"PKG",223,22,1,"PAH",1,1,2,0)
information will not be printed. The patch corrects the problem.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","DVBCPRN1")
0^1^B19169531
"RTN","DVBCPRN1",1,0)
DVBCPRN1 ;ALB/GTS-557/THM-C&P FINAL REPORT PRINT ; 9/3/91  8:05 AM
"RTN","DVBCPRN1",2,0)
 ;;2.7;AMIE;**31**;Apr 10, 1995
"RTN","DVBCPRN1",3,0)
 ;
"RTN","DVBCPRN1",4,0)
PHYS S PHYS=$S($D(^DVB(396.4,DA,0)):$P(^(0),U,7),1:"")
"RTN","DVBCPRN1",5,0)
 Q
"RTN","DVBCPRN1",6,0)
 ;
"RTN","DVBCPRN1",7,0)
STEP2A S EXMNM=$S($D(^DVB(396.6,JI,0)):$P(^(0),U,1),1:"Unknown exam") I $D(AUTO),$D(XEXMNM),EXMNM'=XEXMNM Q  ;print one exam on transcription
"RTN","DVBCPRN1",8,0)
 S EXHD="For "_EXMNM_" Exam" D HDR W "Examining provider: ",PHYS,!,"Examined on: " S Y=$P(^DVB(396.4,DA,0),U,6) X XDD W Y,! F LINE=1:1:80 W "="
"RTN","DVBCPRN1",9,0)
 W !!?2,"Examination results:",!! K NCN S EXSTAT=$P(^DVB(396.4,DA,0),U,4) I EXSTAT="X"!(EXSTAT="RX") W !!!!!?25,"This exam was CANCELLED by ",$S(EXSTAT="RX":"the RO.",1:"MAS."),!! Q
"RTN","DVBCPRN1",10,0)
 D STEP3
"RTN","DVBCPRN1",11,0)
 Q
"RTN","DVBCPRN1",12,0)
 ;
"RTN","DVBCPRN1",13,0)
STEP2 F DA=0:0 S DA=$O(^DVB(396.4,"C",DA(1),DA)) Q:DA=""  S RO=+$P(^DVB(396.3,DA(1),0),U,3) Q:'$D(AUTO)&(DUZ(2)'=RO)  S PG=0,JI=$P(^DVB(396.4,DA,0),U,3) D PHYS,STEP2A I $D(PRINT) D BOT K PRINT
"RTN","DVBCPRN1",14,0)
 I '$D(AUTO) S %DT="TS",X="NOW" D ^%DT S DA=DA(1),CTIM=Y,DR="6////"_CTIM_";15////"_CTIM_";16////^S X=DUZ;17////C",DIE="^DVB(396.3,",DIC=DIE D ^DIE
"RTN","DVBCPRN1",15,0)
 Q
"RTN","DVBCPRN1",16,0)
 ;
"RTN","DVBCPRN1",17,0)
STEP3 K ^UTILITY($J,"W") S DIWL=1,DIWR=80,DIWF="NW" S OLDA=DA,OLDA1=DA(1)
"RTN","DVBCPRN1",18,0)
 F LINE=0:0 S LINE=$O(^DVB(396.4,OLDA,"RES",LINE)) Q:LINE=""  S X=^DVB(396.4,OLDA,"RES",LINE,0) D ^DIWP,STEP3A
"RTN","DVBCPRN1",19,0)
 D ^DIWW S PRINT=1 S DA=OLDA,DA(1)=OLDA1 Q
"RTN","DVBCPRN1",20,0)
 ;
"RTN","DVBCPRN1",21,0)
STEP3A I $Y>(IOSL-11) D UP,NEXT,HDR W:$O(^DVB(396.4,OLDA,"RES",LINE))]"" !!,"Exam Results Continued",!!
"RTN","DVBCPRN1",22,0)
 Q
"RTN","DVBCPRN1",23,0)
 ;
"RTN","DVBCPRN1",24,0)
HDR S PG=PG+1 I PG>1 D HDR2^DVBCUTL2 Q
"RTN","DVBCPRN1",25,0)
 S:ZPR'="E" TOTTIME=$$PROCDAY^DVBCUTL2(DA(1))
"RTN","DVBCPRN1",26,0)
 S:ZPR="E" TOTTIME=$$INSFTME^DVBCUTA1(DA(1))
"RTN","DVBCPRN1",27,0)
 S OUTTIME="Processing time: "_TOTTIME
"RTN","DVBCPRN1",28,0)
 W @IOF
"RTN","DVBCPRN1",29,0)
 W !,"Date: ",DVBCDT(0),?(80-$L(PGHD)\2),PGHD,?71,"Page: ",PG,!?(80-$L(DVBCSITE)\2),DVBCSITE,!
"RTN","DVBCPRN1",30,0)
 W ?35,"** FINAL **",! W ?(80-$L(OUTTIME)\2),OUTTIME,!?(80-$L(EXHD)\2),EXHD,! F LNE=1:1:80 W "="
"RTN","DVBCPRN1",31,0)
 K LNE S:EXHD["AGENT ORANGE" DVBCAO=1 I EXHD'["AGENT ORANGE" K DVBCAO
"RTN","DVBCPRN1",32,0)
 D SSNOUT^DVBCUTIL
"RTN","DVBCPRN1",33,0)
 W !!?2,"Name: ",PNAM,?56,"SSN: ",DVBCSSNO,!?51,"C-Number: ",CNUM,!?56,"DOB: " S Y=DOB X XDD W Y,!?2,"Address: ",ADR1,! W:ADR2]"" ?11,ADR2,! W:ADR3]"" ?11,ADR3,!!
"RTN","DVBCPRN1",34,0)
 K DVBCSSNO
"RTN","DVBCPRN1",35,0)
 W !?2,"City,State,Zip+4: ",?48,"Res Phone: ",HOMPHON,!?5,CITY,"  ",STATE,"  ",ZIP,?48,"Bus Phone: ",BUSPHON,!
"RTN","DVBCPRN1",36,0)
 W !,"Entered active service: " S Y=EOD X XDD S:Y="" Y="Not specified" W Y,?40,"Last rating exam date: ",LREXMDT,! S Y=RAD X XDD S:Y="" Y="Not specified" W "Released active service: " W Y,!!,"Priority of exam: ",PRIO,!
"RTN","DVBCPRN1",37,0)
 F LNE=1:1:80 W "="
"RTN","DVBCPRN1",38,0)
 W ! Q
"RTN","DVBCPRN1",39,0)
 ;
"RTN","DVBCPRN1",40,0)
ZTSK S PG=0,AUTO=1 K ULINE
"RTN","DVBCPRN1",41,0)
 ;$D(AUTO)=copy for review, Vet file after approval
"RTN","DVBCPRN1",42,0)
 I '$D(DT) S X="T" D ^%DT S DT=Y
"RTN","DVBCPRN1",43,0)
 S XDD=^DD("DD"),Y=DT X XDD S DVBCDT(0)=Y,PGHD="Compensation and Pension Exam Report",DVBCSITE=$S($D(^DVB(396.1,1,0)):$P(^(0),U,1),1:"Site name not in file")
"RTN","DVBCPRN1",44,0)
 S $P(ULINE,"_",70)="_",XEXMNM=EXMNM K EXMNM D VARS^DVBCUTIL,STEP2,BOT
"RTN","DVBCPRN1",45,0)
 I '$D(EDPRT) G KILL^DVBCUTIL
"RTN","DVBCPRN1",46,0)
 Q
"RTN","DVBCPRN1",47,0)
 ;
"RTN","DVBCPRN1",48,0)
UP F XIX=$Y:1:(IOSL-8) W !
"RTN","DVBCPRN1",49,0)
 Q
"RTN","DVBCPRN1",50,0)
 ;
"RTN","DVBCPRN1",51,0)
NEXT W !,"Continued on next page",!,"VA Form 2507"
"RTN","DVBCPRN1",52,0)
 Q
"RTN","DVBCPRN1",53,0)
 ;
"RTN","DVBCPRN1",54,0)
BOT I '$D(AUTO),$D(PRINT) D UP W ?7,"This exam has been reviewed and approved by the examining provider" W:$D(DVBCAO) !?27,"and signed by the veteran" W ".",!!,"VA Form 2507",! ;if for RO
"RTN","DVBCPRN1",55,0)
 I $D(AUTO),$D(PRINT) D UP W ?7," Approved by: ___________________________________     Date: _____________",!!
"RTN","DVBCPRN1",56,0)
 I $D(AUTO),$D(PRINT) W "Provider signature: ___________________________________     Date: _____________",!!,"VA Form 2507",! ;if file copy
"RTN","DVBCPRN1",57,0)
 Q
"RTN","DVBCRPRT")
0^2^B14119278
"RTN","DVBCRPRT",1,0)
DVBCRPRT ;ALB/GTS-557/THM-REPRINT C&P REPORT ; 5/17/91  10:28 AM
"RTN","DVBCRPRT",2,0)
 ;;2.7;AMIE;**31**;Apr 10, 1995
"RTN","DVBCRPRT",3,0)
 ;
"RTN","DVBCRPRT",4,0)
 ; ** DVBCRPRT is called from DVBCRPON only **
"RTN","DVBCRPRT",5,0)
PHYS S PHYS=$S($D(^DVB(396.4,DA,0)):$P(^(0),U,7),1:"")
"RTN","DVBCRPRT",6,0)
 Q
"RTN","DVBCRPRT",7,0)
STEP2A ;  ** Called from STEP2 only **
"RTN","DVBCRPRT",8,0)
 S EXMNM=$S($D(^DVB(396.6,$P(^DVB(396.4,DA,0),U,3),0)):$P(^(0),U,1),1:"Unknown exam"),EXHD="For "_EXMNM_" Exam" D HDR^DVBCRPR1
"RTN","DVBCRPRT",9,0)
 W "Examining provider: ",PHYS,!,"Examined on: " S Y=$P(^DVB(396.4,DA,0),U,6) X XDD W Y,! F LINE=1:1:80 W "="
"RTN","DVBCRPRT",10,0)
 W !!?2,"Examination results:",!! S EXSTAT=$P(^DVB(396.4,DA,0),U,4) I EXSTAT="X"!(EXSTAT="RX") W !!!!!?25,"This exam was CANCELLED by ",$S(EXSTAT="RX":"the RO.",1:"MAS."),!! Q
"RTN","DVBCRPRT",11,0)
 D STEP3
"RTN","DVBCRPRT",12,0)
 Q
"RTN","DVBCRPRT",13,0)
STEP2 ; ** An external entry point and called from GO2 **
"RTN","DVBCRPRT",14,0)
 F DA=0:0 S DA=$O(^DVB(396.4,"C",DA(1),DA)) Q:DA=""  D GETRO Q:RO'=DUZ(2)&('$D(^XUSEC("DVBA C SUPERVISOR",DUZ)))  S PG=0 D PHYS,STEP2A I $D(PRINT) D BOT^DVBCRPR1 K PRINT
"RTN","DVBCRPRT",15,0)
 D ^DVBCLABR Q
"RTN","DVBCRPRT",16,0)
 K DVBAON2
"RTN","DVBCRPRT",17,0)
 Q
"RTN","DVBCRPRT",18,0)
STEP3 ;  ** Called from STEP2A only **
"RTN","DVBCRPRT",19,0)
 K ^UTILITY($J,"W") S DIWL=1,DIWR=80,DIWF="NW" S OLDA=DA,OLDA1=DA(1)
"RTN","DVBCRPRT",20,0)
 F LINE=0:0 S LINE=$O(^DVB(396.4,OLDA,"RES",LINE)) Q:LINE=""  S X=^DVB(396.4,OLDA,"RES",LINE,0) D ^DIWP,STEP3A
"RTN","DVBCRPRT",21,0)
 D ^DIWW S PRINT=1 S DA=OLDA,DA(1)=OLDA1
"RTN","DVBCRPRT",22,0)
 Q
"RTN","DVBCRPRT",23,0)
STEP3A ;  ** Called from STEP3 only **
"RTN","DVBCRPRT",24,0)
 I $Y>(IOSL-9) D UP^DVBCRPR1,NEXT,HDR^DVBCRPR1 W:$O(^DVB(396.4,OLDA,"RES",LINE))]"" !!,"Exam Results Continued",!!
"RTN","DVBCRPRT",25,0)
 Q
"RTN","DVBCRPRT",26,0)
GO ;  ** An external entry point called from DVBCRPON **
"RTN","DVBCRPRT",27,0)
 U IO K ^TMP($J),DVBAON2 D HDA^DVBCRPR1 S (XCNT,XPRINT)=0
"RTN","DVBCRPRT",28,0)
 I '$D(^XUSEC("DVBA C SUPERVISOR",DUZ)) D
"RTN","DVBCRPRT",29,0)
 .F DA(1)=0:0 S DA(1)=$O(^DVB(396.3,"AF","C",DUZ(2),DA(1))) Q:DA(1)=""  DO
"RTN","DVBCRPRT",30,0)
 ..I $D(^DVB(396.3,DA(1),0)) D GO1
"RTN","DVBCRPRT",31,0)
 ..I '$D(^DVB(396.3,DA(1),0)) D BADXRF^DVBCPRNT
"RTN","DVBCRPRT",32,0)
 I $D(^XUSEC("DVBA C SUPERVISOR",DUZ)) D
"RTN","DVBCRPRT",33,0)
 .F LOC=0:0 S LOC=$O(^DVB(396.3,"AF","C",LOC)) Q:LOC=""  D
"RTN","DVBCRPRT",34,0)
 ..F DA(1)=0:0 S DA(1)=$O(^DVB(396.3,"AF","C",LOC,DA(1))) Q:DA(1)=""  DO
"RTN","DVBCRPRT",35,0)
 ...I $D(^DVB(396.3,DA(1),0)) D GO1
"RTN","DVBCRPRT",36,0)
 ...I '$D(^DVB(396.3,DA(1),0)) D BADXRF^DVBCPRNT
"RTN","DVBCRPRT",37,0)
 I XPRINT=0 K XPRINT,XPG,XXLN W !!!!!?25,"Nothing to print",!! H 2 G KILL^DVBCUTIL
"RTN","DVBCRPRT",38,0)
 I XCNT>0,XPRINT=1 W !!,"Total requests to be printed: ",XCNT,!
"RTN","DVBCRPRT",39,0)
 K XCNT,XXLN,XPG,XPRINT D SETLAB^DVBCPRNT S (XCN,PNAM)=""
"RTN","DVBCRPRT",40,0)
 F DVBCN=0:0 S XCN=$O(^TMP($J,XCN)) Q:XCN=""  F JJ=0:0 S PNAM=$O(^TMP($J,XCN,PNAM)) Q:PNAM=""  D GO2
"RTN","DVBCRPRT",41,0)
 G EXIT
"RTN","DVBCRPRT",42,0)
GO2 F DA(1)=0:0 K PRINT S DA(1)=$O(^TMP($J,XCN,PNAM,DA(1))) Q:DA(1)=""  S PRTDATE=$P(^DVB(396.3,DA(1),0),U,16) I PRTDATE[RUNDATE S DA=DA(1) D VARS^DVBCUTIL Q:(LOC'=RO)&('$D(^XUSEC("DVBA C SUPERVISOR",DUZ)))&('$D(AUTO))  D STEP2
"RTN","DVBCRPRT",43,0)
 Q
"RTN","DVBCRPRT",44,0)
GO1 S DFN=$P(^DVB(396.3,DA(1),0),U,1),PRTDATE=$P(^(0),U,16),PNAM=$P(^DPT(DFN,0),U,1),SSN=$P(^(0),U,9),CNUM=$S($D(^DPT(DFN,.31)):$P(^(.31),U,3),1:"Missing")
"RTN","DVBCRPRT",45,0)
 I RTYPE="D" Q:PRTDATE'[RUNDATE!(RUNDATE']"")
"RTN","DVBCRPRT",46,0)
 S XCN=$E(CNUM,$L(CNUM)-1,$L(CNUM)),XCN=+XCN
"RTN","DVBCRPRT",47,0)
 I PNAM]"" S ^TMP($J,XCN,PNAM,DA(1))="",XPRINT=1,XCNT=XCNT+1
"RTN","DVBCRPRT",48,0)
 D SSNSHRT^DVBCUTIL
"RTN","DVBCRPRT",49,0)
 W $E(PNAM,1,25),?28,DVBCSSNO,?43,CNUM,?55 S Y=$P(^DVB(396.3,DA(1),0),U,2) X XDD W Y,! D:$Y>(IOSL-16) HDA^DVBCRPR1
"RTN","DVBCRPRT",50,0)
 K PNAM,XCN,CNUM,DVBCSSNO
"RTN","DVBCRPRT",51,0)
 Q
"RTN","DVBCRPRT",52,0)
 ;
"RTN","DVBCRPRT",53,0)
EXIT K XDD,AUTO S LKILL=1 G KILL^DVBCUTIL ; ** GOTO will quit from this RTN
"RTN","DVBCRPRT",54,0)
 ;
"RTN","DVBCRPRT",55,0)
NEXT W !,"Continued on next page",!,"VA Form 2507"
"RTN","DVBCRPRT",56,0)
 Q
"RTN","DVBCRPRT",57,0)
 ;
"RTN","DVBCRPRT",58,0)
GETRO S RO=$P(^DVB(396.3,DA(1),0),U,3)
"RTN","DVBCRPRT",59,0)
 Q
"VER")
8.0^22.0
**END**
**END**

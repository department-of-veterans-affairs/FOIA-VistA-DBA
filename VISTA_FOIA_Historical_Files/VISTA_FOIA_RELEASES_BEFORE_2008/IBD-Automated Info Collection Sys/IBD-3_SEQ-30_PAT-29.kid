Released IBD*3*29 SEQ #30
Extracted from mail message
**KIDS**:IBD*3.0*29^

**INSTALL NAME**
IBD*3.0*29
"BLD",2557,0)
IBD*3.0*29^AUTOMATED INFO COLLECTION SYS^0^3000510^y
"BLD",2557,1,0)
^^1^1^3000407^
"BLD",2557,1,1,0)
MISCELLANEOUS FIXES
"BLD",2557,4,0)
^9.64PA^357.09^2
"BLD",2557,4,357.09,0)
357.09
"BLD",2557,4,357.09,2,0)
^9.641^357.09^1
"BLD",2557,4,357.09,2,357.09,0)
ENCOUNTER FORM PARAMETERS  (File-top level)
"BLD",2557,4,357.09,2,357.09,1,0)
^9.6411^.1^1
"BLD",2557,4,357.09,2,357.09,1,.1,0)
DAYS TO PRINT 1010F
"BLD",2557,4,357.09,222)
y^n^p^^^^n
"BLD",2557,4,357.6,0)
357.6
"BLD",2557,4,357.6,222)
n^n^f^^y^DG 1010F PATCH IBD*3.0*29^y^o^y
"BLD",2557,4,"APDD",357.09,357.09)

"BLD",2557,4,"APDD",357.09,357.09,.1)

"BLD",2557,4,"B",357.09,357.09)

"BLD",2557,4,"B",357.6,357.6)

"BLD",2557,"KRN",0)
^9.67PA^19^17
"BLD",2557,"KRN",.4,0)
.4
"BLD",2557,"KRN",.401,0)
.401
"BLD",2557,"KRN",.402,0)
.402
"BLD",2557,"KRN",.403,0)
.403
"BLD",2557,"KRN",.5,0)
.5
"BLD",2557,"KRN",.84,0)
.84
"BLD",2557,"KRN",3.6,0)
3.6
"BLD",2557,"KRN",3.8,0)
3.8
"BLD",2557,"KRN",9.2,0)
9.2
"BLD",2557,"KRN",9.8,0)
9.8
"BLD",2557,"KRN",9.8,"NM",0)
^9.68A^7^7
"BLD",2557,"KRN",9.8,"NM",1,0)
IBDFN2^^0^B18126643
"BLD",2557,"KRN",9.8,"NM",2,0)
IBDF6^^0^B18177177
"BLD",2557,"KRN",9.8,"NM",3,0)
IBDFOSG^^0^B24976552
"BLD",2557,"KRN",9.8,"NM",4,0)
IBDFOSG1^^0^B18967446
"BLD",2557,"KRN",9.8,"NM",5,0)
IBDFDE0^^0^B31394123
"BLD",2557,"KRN",9.8,"NM",6,0)
IBDF1B^^0^B36758153
"BLD",2557,"KRN",9.8,"NM",7,0)
IBDF1A^^0^B15989795
"BLD",2557,"KRN",9.8,"NM","B","IBDF1A",7)

"BLD",2557,"KRN",9.8,"NM","B","IBDF1B",6)

"BLD",2557,"KRN",9.8,"NM","B","IBDF6",2)

"BLD",2557,"KRN",9.8,"NM","B","IBDFDE0",5)

"BLD",2557,"KRN",9.8,"NM","B","IBDFN2",1)

"BLD",2557,"KRN",9.8,"NM","B","IBDFOSG",3)

"BLD",2557,"KRN",9.8,"NM","B","IBDFOSG1",4)

"BLD",2557,"KRN",19,0)
19
"BLD",2557,"KRN",19.1,0)
19.1
"BLD",2557,"KRN",101,0)
101
"BLD",2557,"KRN",409.61,0)
409.61
"BLD",2557,"KRN",771,0)
771
"BLD",2557,"KRN",870,0)
870
"BLD",2557,"KRN",8994,0)
8994
"BLD",2557,"KRN","B",.4,.4)

"BLD",2557,"KRN","B",.401,.401)

"BLD",2557,"KRN","B",.402,.402)

"BLD",2557,"KRN","B",.403,.403)

"BLD",2557,"KRN","B",.5,.5)

"BLD",2557,"KRN","B",.84,.84)

"BLD",2557,"KRN","B",3.6,3.6)

"BLD",2557,"KRN","B",3.8,3.8)

"BLD",2557,"KRN","B",9.2,9.2)

"BLD",2557,"KRN","B",9.8,9.8)

"BLD",2557,"KRN","B",19,19)

"BLD",2557,"KRN","B",19.1,19.1)

"BLD",2557,"KRN","B",101,101)

"BLD",2557,"KRN","B",409.61,409.61)

"BLD",2557,"KRN","B",771,771)

"BLD",2557,"KRN","B",870,870)

"BLD",2557,"KRN","B",8994,8994)

"BLD",2557,"QUES",0)
^9.62^^
"BLD",2557,"REQB",0)
^9.611^2^2
"BLD",2557,"REQB",1,0)
IBD*3.0*10^1
"BLD",2557,"REQB",2,0)
IBD*3.0*31^1
"BLD",2557,"REQB","B","IBD*3.0*10",1)

"BLD",2557,"REQB","B","IBD*3.0*31",2)

"DATA",357.6,118,0)
DG 1010F PRINT^PRMT^IBDFN2^REGISTRATION^1^4^^^1^0^^1
"DATA",357.6,118,1,0)
^357.61^3^3^3000510^^^^
"DATA",357.6,118,1,1,0)
This will print a 1010F with the encounter form if a new Means Test or
"DATA",357.6,118,1,2,0)
Copay Test is due within the number of days you specified in the AICS
"DATA",357.6,118,1,3,0)
Parameters (the default is 30) or if the test is required.
"DATA",357.6,118,3)
MEANS TEST COPAY TEST
"DATA",357.6,118,7,0)
^357.67^2^2
"DATA",357.6,118,7,1,0)
DFN
"DATA",357.6,118,7,2,0)
IBAPPT
"FIA",357.09)
ENCOUNTER FORM PARAMETERS
"FIA",357.09,0)
^IBD(357.09,
"FIA",357.09,0,0)
357.09
"FIA",357.09,0,1)
y^n^p^^^^n
"FIA",357.09,0,10)

"FIA",357.09,0,11)

"FIA",357.09,0,"RLRO")

"FIA",357.09,0,"VR")
3.0^IBD
"FIA",357.09,357.09)
1
"FIA",357.09,357.09,.1)

"FIA",357.6)
PACKAGE INTERFACE
"FIA",357.6,0)
^IBE(357.6,
"FIA",357.6,0,0)
357.6I
"FIA",357.6,0,1)
n^n^f^^y^DG 1010F PATCH IBD*3.0*29^y^o^y
"FIA",357.6,0,10)

"FIA",357.6,0,11)

"FIA",357.6,0,"RLRO")
^DIBT(1615,1)
"FIA",357.6,0,"VR")
3.0^IBD
"FIA",357.6,357.6)
0
"FIA",357.6,357.61)
0
"FIA",357.6,357.613)
0
"FIA",357.6,357.615)
0
"FIA",357.6,357.66)
0
"FIA",357.6,357.67)
0
"MBREQ")
0
"PGL",357.6,0,11,.11)
TYPE OF HEALTH SUMMARY^*P142'^GMT(142,^0;11^S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",357.6,0,13,.13)
PACKAGE INTERFACE FOR INPUT^*P357.6'^IBE(357.6,^0;13^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",357.6,16,2,16.2)
NARRATIVE DATA TYPE^P359.1'^IBE(359.1,^16;2^Q
"PGL",357.6,16,6,16.6)
PRIMARY VALUE DATA TYPE^P359.1'^IBE(359.1,^16;6^Q
"PKG",485,-1)
1^1
"PKG",485,0)
AUTOMATED INFO COLLECTION SYS^IBD^The utilities for generating a paper encounter form.
"PKG",485,22,0)
^9.49I^1^1
"PKG",485,22,1,0)
3.0^2970212^2970505^11715
"PKG",485,22,1,"PAH",1,0)
29^3000510
"PKG",485,22,1,"PAH",1,1,0)
^^1^1^3000510
"PKG",485,22,1,"PAH",1,1,1,0)
MISCELLANEOUS FIXES
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","IBDF1A")
0^7^B15989795
"RTN","IBDF1A",1,0)
IBDF1A ;ALB/CJM - ENCOUNTER FORM (prints for a single patient);NOV 16,1992
"RTN","IBDF1A",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**29**;APR 24, 1997
"RTN","IBDF1A",3,0)
MAIN(WITHDATA) ;
"RTN","IBDF1A",4,0)
 ; -- prints encounter forms, either with patient data for a patient 
"RTN","IBDF1A",5,0)
 ;    with no appointment (in which case it uses time of printing as
"RTN","IBDF1A",6,0)
 ;    the appointment time) or without patient data (only if a form
"RTN","IBDF1A",7,0)
 ;    is defined for the clinic for such use)
"RTN","IBDF1A",8,0)
 ;    $G(WITDATA) if the form should be printed with data
"RTN","IBDF1A",9,0)
 ;    0 if a blank form for use without patient data should be printed
"RTN","IBDF1A",10,0)
 ;
"RTN","IBDF1A",11,0)
 N IBF,FORMS,NODE,IBPM
"RTN","IBDF1A",12,0)
 ;FORMS = list of forms in form^form^... format
"RTN","IBDF1A",13,0)
 ;IBI is a counter used to parse FORMS
"RTN","IBDF1A",14,0)
 ;IBPM=1 if forms defined in print manager should be printed
"RTN","IBDF1A",15,0)
 N IBFLAG
"RTN","IBDF1A",16,0)
 S IBFLAG=1
"RTN","IBDF1A",17,0)
 S WITHDATA=+$G(WITHDATA)
"RTN","IBDF1A",18,0)
 K ^TMP("IB",$J),^TMP("IBDF",$J)
"RTN","IBDF1A",19,0)
 S (IBPM,IBQUIT)=0,DFN=""
"RTN","IBDF1A",20,0)
 D CLINIC G:IBQUIT EXIT
"RTN","IBDF1A",21,0)
 I WITHDATA D  G:IBQUIT EXIT
"RTN","IBDF1A",22,0)
 .D PATIENT Q:IBQUIT
"RTN","IBDF1A",23,0)
 .D NOW
"RTN","IBDF1A",24,0)
 .D WHCHFORM
"RTN","IBDF1A",25,0)
 I 'WITHDATA D FORM G:IBQUIT EXIT
"RTN","IBDF1A",26,0)
 D DEVICE G:IBQUIT EXIT
"RTN","IBDF1A",27,0)
QUEUED ;
"RTN","IBDF1A",28,0)
 ;input - DFN,IBAPPT,IBCLINIC
"RTN","IBDF1A",29,0)
 N IBDEVICE
"RTN","IBDF1A",30,0)
 ;
"RTN","IBDF1A",31,0)
 D DEVICE^IBDFUA(0,.IBDEVICE)
"RTN","IBDF1A",32,0)
 F IBF=1:1 S IBFORM=$P(FORMS,"^",IBF) Q:'IBFORM  D DRWFORM^IBDF2A(IBFORM,WITHDATA,.IBDEVICE)
"RTN","IBDF1A",33,0)
 I WITHDATA,IBPM D PRNTOTHR^IBDF1B5(IBCLINIC,IBAPPT,DFN)
"RTN","IBDF1A",34,0)
EXIT ;
"RTN","IBDF1A",35,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","IBDF1A",36,0)
 E  D ^%ZISC
"RTN","IBDF1A",37,0)
 D KPRNTVAR^IBDFUA ;kills the screen and graphics parameters
"RTN","IBDF1A",38,0)
 K IBQUIT,IBFORM,IBCLINIC,DFN,IBAPPT,IBTYPE,X,Y,I,^TMP("IB",$J),^TMP("IBDF",$J),^TMP("DFN",$J),^TMP("RPT",$J)
"RTN","IBDF1A",39,0)
 Q
"RTN","IBDF1A",40,0)
FORM ;gets the type of form to print from the clinic setup - sets FORMS
"RTN","IBDF1A",41,0)
 N SETUP
"RTN","IBDF1A",42,0)
 S SETUP=$O(^SD(409.95,"B",IBCLINIC,"")) I 'SETUP D ERROR S IBQUIT=1 Q
"RTN","IBDF1A",43,0)
 S SETUP=$G(^SD(409.95,SETUP,0)) I SETUP="" D ERROR S IBQUIT=1 Q
"RTN","IBDF1A",44,0)
 S FORMS=$P(SETUP,"^",5) I 'FORMS D ERROR S IBQUIT=1 Q
"RTN","IBDF1A",45,0)
 Q
"RTN","IBDF1A",46,0)
ERROR ;prints a message
"RTN","IBDF1A",47,0)
 W !!,"There is no encounter form defined for this clinic that should print",!,"without patient data!",!
"RTN","IBDF1A",48,0)
 Q
"RTN","IBDF1A",49,0)
ERROR2 ;prints a message
"RTN","IBDF1A",50,0)
 W !!,"There are no forms defined to print for this clinic!",!
"RTN","IBDF1A",51,0)
 Q
"RTN","IBDF1A",52,0)
PATIENT ;gets the patient to print the form for
"RTN","IBDF1A",53,0)
 S DIR(0)="P^2:EM",DIR("A")="PATIENT NAME" D ^DIR K DIR I $D(DIRUT)!(+Y<1)!('(+Y)) S IBQUIT=1 Q
"RTN","IBDF1A",54,0)
 S DFN=+Y
"RTN","IBDF1A",55,0)
 Q
"RTN","IBDF1A",56,0)
DEVICE ;
"RTN","IBDF1A",57,0)
 I $D(ZTQUEUED) Q
"RTN","IBDF1A",58,0)
 W !,$C(7),"** Encounter Forms require a page size of 80 lines and 132 columns. **"
"RTN","IBDF1A",59,0)
 K %IS,%ZIS,IOP S %ZIS="MQ" D ^%ZIS I POP S IBQUIT=1 Q
"RTN","IBDF1A",60,0)
 I $D(IO("Q")) D
"RTN","IBDF1A",61,0)
 .S ZTRTN="QUEUED^IBDF1A",(ZTSAVE("WITHDATA"),ZTSAVE("IB*"),ZTSAVE("DFN"),ZTSAVE("FORMS"))=""
"RTN","IBDF1A",62,0)
 .S ZTDESC="IBD - PRINT ENCOUNTER FORM" D ^%ZTLOAD
"RTN","IBDF1A",63,0)
 .W !,$S($D(ZTSK):"REQUEST QUEUED TASK="_ZTSK,1:"REQUEST CANCELLED")
"RTN","IBDF1A",64,0)
 .D HOME^%ZIS S IBQUIT=1 Q
"RTN","IBDF1A",65,0)
 U IO
"RTN","IBDF1A",66,0)
 Q
"RTN","IBDF1A",67,0)
CLINIC ;asks the user for the clinic
"RTN","IBDF1A",68,0)
 K DA,DIR S DIR(0)="409.95,.01O",DIR("A")="PRINT AN ENCOUNTER FORM FOR WHICH CLINIC? " D ^DIR K DIR,DA I $D(DTOUT)!$D(DUOUT)!(+Y<0)!('(+Y)) S IBQUIT=1 Q
"RTN","IBDF1A",69,0)
 S IBCLINIC=+Y
"RTN","IBDF1A",70,0)
 Q
"RTN","IBDF1A",71,0)
NOW ;sets IBAPPT to NOW
"RTN","IBDF1A",72,0)
 N %,%H,%I,X
"RTN","IBDF1A",73,0)
 D NOW^%DTC
"RTN","IBDF1A",74,0)
 S IBAPPT=%
"RTN","IBDF1A",75,0)
 Q
"RTN","IBDF1A",76,0)
WHCHFORM ;
"RTN","IBDF1A",77,0)
 I 'IBCLINIC D ASKFORM Q
"RTN","IBDF1A",78,0)
 K DIR S DIR(0)="S^1:SELECT ANY FORM;2:USE CLINIC SETUP;",DIR("A")="Do you want to Select a form or Use the form(s) defined by the clinic setup?" D ^DIR K DIR I $D(DIRUT)!(+Y<0) S IBQUIT=1 Q
"RTN","IBDF1A",79,0)
 S IBPM=0,FORMS=""
"RTN","IBDF1A",80,0)
 I Y=1 D  Q:IBQUIT
"RTN","IBDF1A",81,0)
 .D ASKFORM
"RTN","IBDF1A",82,0)
 E  I Y=2 S FORMS=$$FORMS^IBDF1B2(IBCLINIC,DFN,IBAPPT),IBPM=1
"RTN","IBDF1A",83,0)
 I '$P(FORMS,"^"),IBPM,'$$IFOTHR^IBDF1B5(IBCLINIC,"FOR EVERY APPOINTMENT"),'$$IFOTHR^IBDF1B5(IBCLINIC,"ONLY FOR EARLIEST APPOINTMENT") D ERROR2 S IBQUIT=1 Q
"RTN","IBDF1A",84,0)
 Q
"RTN","IBDF1A",85,0)
ASKFORM ;asks to select single form
"RTN","IBDF1A",86,0)
 K DIC S DIC("S")="I '$P(^(0),U,7)",DIC=357,DIC(0)="AEQ",DIC("A")="Enter form to print: "
"RTN","IBDF1A",87,0)
 D ^DIC K DIC I ($D(DTOUT)!$D(DUOUT)!(+Y<0)) S IBQUIT=1 Q
"RTN","IBDF1A",88,0)
 S FORMS=+Y
"RTN","IBDF1A",89,0)
 Q
"RTN","IBDF1B")
0^6^B36758153
"RTN","IBDF1B",1,0)
IBDF1B ;ALB/CJM - ENCOUNTER FORM (printing forms for appointments); 3/1/93
"RTN","IBDF1B",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**29**;APR 24, 1997
"RTN","IBDF1B",3,0)
 ;
"RTN","IBDF1B",4,0)
 ;IBSRT=1 for sort by clinic/patient name
"RTN","IBDF1B",5,0)
 ;IBSRT=2 for sort by terminal digits
"RTN","IBDF1B",6,0)
 ;IBSRT=3 for sort by clinic/terminal digits
"RTN","IBDF1B",7,0)
 ;
"RTN","IBDF1B",8,0)
 ;SELECTBY="P" if user wants to select appts by patient
"RTN","IBDF1B",9,0)
 ;SELECTBY="C" if user wants to select appts by division/clinic
"RTN","IBDF1B",10,0)
 ;
"RTN","IBDF1B",11,0)
 ;IBDT=date for appointments
"RTN","IBDF1B",12,0)
 ;IBREPRNT'="" if this is a reprint of a previous job - then it's either equal to clinic name or 1st 4 terminal digits
"RTN","IBDF1B",13,0)
 ;IBSTRTDV is the division to start from in the case of a reprint
"RTN","IBDF1B",14,0)
 ;IBADDONS=1 if user wants to do add-ons only, 0 otherwise
"RTN","IBDF1B",15,0)
 ;
"RTN","IBDF1B",16,0)
EN ;
"RTN","IBDF1B",17,0)
 N IBREPRNT,SELECTBY,IBDT,IBSRT,IBADDONS,IBSTRTDV,QUIT,X
"RTN","IBDF1B",18,0)
 S (IBSTRTDV,IBREPRNT)="",(QUIT,IBADDONS)=0
"RTN","IBDF1B",19,0)
 ;
"RTN","IBDF1B",20,0)
 ;set the error trap so workspace in ^TMP is erased in case of abnormal termination of the print job
"RTN","IBDF1B",21,0)
 S X="ERRORTRP^IBDF1B",@^%ZOSF("TRAP")
"RTN","IBDF1B",22,0)
 ;
"RTN","IBDF1B",23,0)
 K ^TMP("IBDF",$J),^TMP("IB",$J)
"RTN","IBDF1B",24,0)
 D HOME^%ZIS
"RTN","IBDF1B",25,0)
 D
"RTN","IBDF1B",26,0)
 .D SELECTBY Q:QUIT  S:SELECTBY="P" IBSRT=1 ;if selecting by patient then sort by clinic/patient rather than by terminal digits
"RTN","IBDF1B",27,0)
 .D:SELECTBY="C" SORTBY^IBDF1BA Q:QUIT
"RTN","IBDF1B",28,0)
 .D APPTDATE Q:QUIT
"RTN","IBDF1B",29,0)
 .;now allow user to makes selections, whether by patient or clinic
"RTN","IBDF1B",30,0)
 .D @SELECTBY
"RTN","IBDF1B",31,0)
 .;
"RTN","IBDF1B",32,0)
 .;if nothing selected exit
"RTN","IBDF1B",33,0)
 .Q:'$D(^TMP("IBDF",$J))
"RTN","IBDF1B",34,0)
 .;
"RTN","IBDF1B",35,0)
 .;since selecting by entire clinics, may want to do add-ons only or restart the job
"RTN","IBDF1B",36,0)
 .I SELECTBY="C" D  Q:QUIT
"RTN","IBDF1B",37,0)
 ..D ADDONS Q:QUIT
"RTN","IBDF1B",38,0)
 ..D REPRINT Q:QUIT
"RTN","IBDF1B",39,0)
 ;
"RTN","IBDF1B",40,0)
 ;
"RTN","IBDF1B",41,0)
 ;if nothing selected exit
"RTN","IBDF1B",42,0)
END G:('$D(^TMP("IBDF",$J)))!QUIT EXIT
"RTN","IBDF1B",43,0)
 W !,$C(7),"** Encounter Forms require a page size of 80 lines and 132 columns. **"
"RTN","IBDF1B",44,0)
 K %IS,%ZIS,IOP S %ZIS="QM",%ZIS("A")="OUTPUT DEVICE: " D ^%ZIS G:POP EXIT
"RTN","IBDF1B",45,0)
 I $D(IO("Q")) S ZTRTN="^IBDF1B1",ZTDESC="IBDF Encounter Forms",ZTSAVE("^TMP(""IBDF"",$J,")="",ZTSAVE("IB*")="" D ^%ZTLOAD K IO("Q") W !,$S($D(ZTSK):"Request Queued Task="_ZTSK,1:"Request Canceled") D HOME^%ZIS G EXIT
"RTN","IBDF1B",46,0)
 U IO
"RTN","IBDF1B",47,0)
 D ^IBDF1B1
"RTN","IBDF1B",48,0)
EXIT ;
"RTN","IBDF1B",49,0)
 K ^TMP("IBDF",$J),^TMP("IB",$J),^TMP("RPT",$J),^TMP("DFN",$J)
"RTN","IBDF1B",50,0)
 I $D(ZTQUEUED) S ZTREQ="@" Q
"RTN","IBDF1B",51,0)
 K DTOUT,DUOUT,DIRUT,DIROUT,X,Y,D0,DA,IBTYPE
"RTN","IBDF1B",52,0)
 D ^%ZISC
"RTN","IBDF1B",53,0)
 Q
"RTN","IBDF1B",54,0)
 ;
"RTN","IBDF1B",55,0)
REPRINT ;for prior job that partially completed?
"RTN","IBDF1B",56,0)
 ;IBSTRTDV is the division to restart from
"RTN","IBDF1B",57,0)
 ;IBREPRNT is the clinic or first 4 of terminal digits to restart from
"RTN","IBDF1B",58,0)
 S DIR(0)="Y",DIR("A")="IS THIS A REPRINT OF A PREVIOUS RUN"
"RTN","IBDF1B",59,0)
 S DIR("B")="NO",DIR("?")="ANSWER YES IF SOME OF THE FORMS WERE ALREADY PRINTED BY A PREVIOUS JOB THAT DID NOT SUCCESSFULLY COMPLETE"
"RTN","IBDF1B",60,0)
 D ^DIR K DIR I $D(DIRUT)!(Y=-1) S QUIT=1 Q
"RTN","IBDF1B",61,0)
 I Y D  I IBREPRNT="" S QUIT=1 Q
"RTN","IBDF1B",62,0)
 .I IBSRT=2 D  ;sorting by division/terminal digit
"RTN","IBDF1B",63,0)
 ..;ask which division to restart from
"RTN","IBDF1B",64,0)
 ..S IBSTRTDV=$$STARTDIV^IBDF1BA I IBSTRTDV="" S IBREPRNT="" Q
"RTN","IBDF1B",65,0)
 ..;ask which terminal digit to restart from
"RTN","IBDF1B",66,0)
 ..D TERMSTRT^IBDF1BA Q:IBREPRNT=""
"RTN","IBDF1B",67,0)
 .I (IBSRT=1)!(IBSRT=3) D CLNCSTRT^IBDF1BA ;sorting by division/clinic, ask which clinic to restart from
"RTN","IBDF1B",68,0)
 Q
"RTN","IBDF1B",69,0)
ADDONS ;add-ons only?
"RTN","IBDF1B",70,0)
 S DIR(0)="Y",DIR("A")="WANT TO PRINT ADD-ONS ONLY"
"RTN","IBDF1B",71,0)
 S DIR("B")="NO",DIR("?")="ANSWER YES TO ONLY PRINT ADD-ONS"
"RTN","IBDF1B",72,0)
 D ^DIR K DIR I $D(DIRUT)!(Y=-1) S QUIT=1 Q
"RTN","IBDF1B",73,0)
 S IBADDONS=Y
"RTN","IBDF1B",74,0)
 Q
"RTN","IBDF1B",75,0)
SELECTBY ;select by patient or clinic?
"RTN","IBDF1B",76,0)
 W !,"Do you want to print forms for a particular patient or for entire clinics?",!
"RTN","IBDF1B",77,0)
 K DIR S DIR("B")="Clinic",DIR(0)="SO^P:Patient;C:Clinic",DIR("A")="Select Appointment by"
"RTN","IBDF1B",78,0)
 D ^DIR K DIR I $D(DIRUT) S QUIT=1 Q
"RTN","IBDF1B",79,0)
 S SELECTBY=Y
"RTN","IBDF1B",80,0)
 Q
"RTN","IBDF1B",81,0)
 ;
"RTN","IBDF1B",82,0)
P ;print by patient - get patient then appointment(s) for date
"RTN","IBDF1B",83,0)
 N IBTMP,IBNM,DFN
"RTN","IBDF1B",84,0)
 ;IBNM=patient name, IBTMP=array to store patient's appts
"RTN","IBDF1B",85,0)
 F  K DIC S DIC="^DPT(",DIC(0)="AEQM" D ^DIC K DIC Q:Y<0  S DFN=+Y,IBNM=$P(Y,"^",2) D SEARCH^IBDF1BA,DISP^IBDF1BA
"RTN","IBDF1B",86,0)
 Q
"RTN","IBDF1B",87,0)
 ;
"RTN","IBDF1B",88,0)
C ;print all appointments for a clinic - find division then clinic, print all/some clinics for all/some divisions
"RTN","IBDF1B",89,0)
 ;
"RTN","IBDF1B",90,0)
 N GROUPS,IEN
"RTN","IBDF1B",91,0)
 ;
"RTN","IBDF1B",92,0)
 ;get the PRINT MANAGER CLINIC GROUPS
"RTN","IBDF1B",93,0)
 S GROUPS=""
"RTN","IBDF1B",94,0)
 K DIR
"RTN","IBDF1B",95,0)
 S DIR(0)="PAO^357.99:AEMQ",DIR("A")="Select Print Manager Clinic Group:",DIR("?")="You can choose from previously defined clinic groups."
"RTN","IBDF1B",96,0)
 F  D ^DIR Q:((+Y<0)!$D(DIRUT))  S GROUPS(+Y)="",DIR("A")="Select another Print Manager Clinic Group:"
"RTN","IBDF1B",97,0)
 S GROUPS=0 F  S GROUPS=$O(GROUPS(GROUPS)) Q:'GROUPS  D
"RTN","IBDF1B",98,0)
 .S IEN=0 F  S IEN=$O(^IBD(357.99,GROUPS,10,IEN)) Q:'IEN  S IBCLN=+$G(^IBD(357.99,GROUPS,10,IEN,0)) S:IBCLN ^TMP("IBDF",$J,"C",IBCLN)=""
"RTN","IBDF1B",99,0)
 .S IEN=0 F  S IEN=$O(^IBD(357.99,GROUPS,11,IEN)) Q:'IEN  S IBDIV=+$G(^IBD(357.99,GROUPS,11,IEN,0)) S:IBDIV ^TMP("IBDF",$J,"D",IBDIV)=""
"RTN","IBDF1B",100,0)
 K DIR
"RTN","IBDF1B",101,0)
 G:$O(GROUPS(0)) ENDC
"RTN","IBDF1B",102,0)
 ;
"RTN","IBDF1B",103,0)
 ;now ask divisions and clinics
"RTN","IBDF1B",104,0)
 W !!,"Now you can select individual divisions and clinics."
"RTN","IBDF1B",105,0)
 ;D ASK2^IBODIV G:$D(VAUTD)<11&(VAUTD=0) ENDC
"RTN","IBDF1B",106,0)
 S VAUTD=1 I $P($G(^DG(43,1,"GL")),"^",2) D DIVISION^VAUTOMA I Y=-1 G ENDC
"RTN","IBDF1B",107,0)
 S DIC("S")="I $P(^SC(+Y,0),U,3)=""C"",$S(VAUTD:1,$D(VAUTD(+$P(^(0),U,15))):1,'+$P(^(0),U,15)&$D(VAUTD($O(^DG(40.8,0)))):1,1:0)"
"RTN","IBDF1B",108,0)
 W !!,"If you want to print forms for all clinics in the divisions you have",!,"chosen (for those clinics with forms defined) then select ALL."
"RTN","IBDF1B",109,0)
 W !!,"Otherwise, select the particular clinics you want.",!
"RTN","IBDF1B",110,0)
 S DIC="^SC(",VAUTVB="VAUTC",VAUTNI=2,VAUTSTR="clinic" D FIRST^VAUTOMA K DIC G:$D(VAUTC)<11&(VAUTC=0) ENDC
"RTN","IBDF1B",111,0)
 I VAUTC,VAUTD S ^TMP("IBDF",$J,"D","ALL")=""
"RTN","IBDF1B",112,0)
 I VAUTC,'VAUTD S IBDIV="" F  S IBDIV=$O(VAUTD(IBDIV)) Q:IBDIV=""  S ^TMP("IBDF",$J,"D",IBDIV)=""
"RTN","IBDF1B",113,0)
 I 'VAUTC S IBCLN="" F  S IBCLN=$O(VAUTC(IBCLN)) Q:IBCLN=""  S ^TMP("IBDF",$J,"C",IBCLN)=""
"RTN","IBDF1B",114,0)
ENDC K VAUTNI,VAUTD,VAUTC,VAUTVB,VAUTSTR,IBDIV,IBCLN,DIC
"RTN","IBDF1B",115,0)
 Q
"RTN","IBDF1B",116,0)
 ;
"RTN","IBDF1B",117,0)
APPTDATE ;print forms for appointments on what date?
"RTN","IBDF1B",118,0)
 K DIR S DIR(0)="D^::AEX",DIR("B")="TODAY",DIR("A")="Appointment Date to Print Forms For"
"RTN","IBDF1B",119,0)
 S DIR("?",1)="Only Clinics and Patients with Appointments on this Date will be allowed."
"RTN","IBDF1B",120,0)
 S DIR("?")="Nothing will print for Appointments in Clinics/Divisions with no forms defined."
"RTN","IBDF1B",121,0)
 D ^DIR K DIR I $D(DIRUT) S QUIT=1 Q
"RTN","IBDF1B",122,0)
 S IBDT=Y
"RTN","IBDF1B",123,0)
 Q
"RTN","IBDF1B",124,0)
 ;
"RTN","IBDF1B",125,0)
ERRORTRP ;the error trap
"RTN","IBDF1B",126,0)
 K ^TMP("IBDF",$J),^TMP("IB",$J)
"RTN","IBDF1B",127,0)
 D @^%ZOSF("ERRTN")
"RTN","IBDF1B",128,0)
 Q
"RTN","IBDF6")
0^2^B18177177
"RTN","IBDF6",1,0)
IBDF6 ;ALB/CJM - ENCOUNTER FORM - ENTRY FOR BUILDING A FORM ;NOV 16,1992
"RTN","IBDF6",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**10,29**;APR 24, 1997
"RTN","IBDF6",3,0)
 ;
"RTN","IBDF6",4,0)
FORMLIST ;
"RTN","IBDF6",5,0)
 N IBTKFORM,IBDEVICE,IBAPI,IOVL,IOHL,IOBRC,IOBLC,IOTRC,IOTLC,IBFORM
"RTN","IBDF6",6,0)
 ;IBDEVICE stores parameters related to device for printing forms
"RTN","IBDF6",7,0)
 D DEVICE^IBDFUA(1,.IBDEVICE)
"RTN","IBDF6",8,0)
 S IBTKFORM=0 ;IBTKFORM=1 only for toolkit forms
"RTN","IBDF6",9,0)
 S IBAPI("INDEX")="D IDXFORMS^IBDF6"
"RTN","IBDF6",10,0)
 S IBAPI("SELECT")="D SELECT^IBDF6"
"RTN","IBDF6",11,0)
 N IBFASTXT ;set to 1 for fast exit from system
"RTN","IBDF6",12,0)
 S IBFASTXT=0
"RTN","IBDF6",13,0)
 K XQORS,VALMEVL,DIR
"RTN","IBDF6",14,0)
 S IBCLINIC=""
"RTN","IBDF6",15,0)
 D CLINIC
"RTN","IBDF6",16,0)
 I IBCLINIC D EN^VALM("IBDF CLINIC FORM LIST")
"RTN","IBDF6",17,0)
 Q
"RTN","IBDF6",18,0)
ONENTRY ;
"RTN","IBDF6",19,0)
 D IDXFORMS
"RTN","IBDF6",20,0)
 Q
"RTN","IBDF6",21,0)
ONEXIT ;
"RTN","IBDF6",22,0)
 D KILL^%ZISS
"RTN","IBDF6",23,0)
 K ^TMP("IB",$J),^TMP("IBDF",$J),IBCLINIC,VALMY,IBQUIT,VALMBCK,X,Y,I,DA,D0
"RTN","IBDF6",24,0)
 Q
"RTN","IBDF6",25,0)
EDITFORM ;allows user to select a form, then displays it for edit
"RTN","IBDF6",26,0)
 N IBFORM,ARY,DFN,IBAPPT,RTNLIST,IBPRINT
"RTN","IBDF6",27,0)
 S ARY="^TMP(""IBDF"",$J,""TEMPORARY CLINIC LIST"")"
"RTN","IBDF6",28,0)
 ;
"RTN","IBDF6",29,0)
 K @ARY
"RTN","IBDF6",30,0)
 S VALMBCK=""
"RTN","IBDF6",31,0)
 I $G(IBAPI("SELECT"))'="" X IBAPI("SELECT")
"RTN","IBDF6",32,0)
 I IBFORM D CLINICS^IBDFU4(IBFORM,ARY) I $G(@ARY@(0))>1 W !,"The form is in use by other clinics!" D LIST^IBDFU4(ARY,4) S DIR(0)="Y",DIR("A")="Still want to edit",DIR("B")="N" D ^DIR K DIR I $D(DIRUT)!(Y=0) S IBFORM=""
"RTN","IBDF6",33,0)
 K ARY
"RTN","IBDF6",34,0)
 I IBFORM,'$$LOCKFRM2^IBDFU7(IBFORM) D LOCKMSG2^IBDFU7(IBFORM) S IBFORM=""
"RTN","IBDF6",35,0)
 I IBFORM D PRNTPRMS^IBDFU1C(.IBPRINT,0,1,0,1),UNCMPL^IBDF19(IBFORM,0),EN^VALM("IBDF DISPLAY FORM FOR EDIT"),UNCMPL^IBDF19(IBFORM,0),FREEFRM2^IBDFU7(IBFORM)
"RTN","IBDF6",36,0)
 S VALMBCK="R"
"RTN","IBDF6",37,0)
 Q
"RTN","IBDF6",38,0)
 ;
"RTN","IBDF6",39,0)
CLINIC ;
"RTN","IBDF6",40,0)
 N DIR,DIC,DIE,DR,DA
"RTN","IBDF6",41,0)
 S DIR(0)="409.95,.01",DIR("A")="EDIT FORMS FOR WHICH CLINIC? "
"RTN","IBDF6",42,0)
 D ^DIR
"RTN","IBDF6",43,0)
 K DIR
"RTN","IBDF6",44,0)
 I $D(DIRUT)!(+Y<0) Q
"RTN","IBDF6",45,0)
 S IBCLINIC=+Y
"RTN","IBDF6",46,0)
 Q
"RTN","IBDF6",47,0)
 ;
"RTN","IBDF6",48,0)
IDXFORMS ;build an array of forms used by IBCLINIC for the list processor
"RTN","IBDF6",49,0)
 N FORM,SETUP,NODE,SUB,SUBREC,USE,ID
"RTN","IBDF6",50,0)
 K @VALMAR
"RTN","IBDF6",51,0)
 S SETUP="",VALMCNT=0,ID=0
"RTN","IBDF6",52,0)
 S SETUP=$O(^SD(409.95,"B",IBCLINIC,"")) Q:'SETUP
"RTN","IBDF6",53,0)
 S NODE=$G(^SD(409.95,SETUP,0)) Q:NODE=""
"RTN","IBDF6",54,0)
 F SUB=2,6,8,9,3,4,5,7 S FORM=$P(NODE,"^",SUB) I FORM D
"RTN","IBDF6",55,0)
 .I $D(^IBE(357,FORM,0)) D
"RTN","IBDF6",56,0)
 ..S USE=""
"RTN","IBDF6",57,0)
 ..D ENTRY
"RTN","IBDF6",58,0)
 Q
"RTN","IBDF6",59,0)
ENTRY ;adds an entry to the array
"RTN","IBDF6",60,0)
 S USE=USE_$S(SUB=2:"Basic Encounter Form",SUB=3:"Supplemental Form - Established Patients",SUB=4:"Supplemental Form - New Patients",SUB=5:"Form To Print With No Patient Data",1:"")
"RTN","IBDF6",61,0)
 S:USE="" USE=USE_$S(SUB=7:"For Future Use",1:"Supplemental Form - All Patients")
"RTN","IBDF6",62,0)
 S ID=ID+1,VALMCNT=VALMCNT+1,@VALMAR@(VALMCNT,0)=$$DISPLAY1(FORM,USE,ID),@VALMAR@("IDX",VALMCNT,ID)=FORM D FLDCTRL^VALM10(VALMCNT) ;set video for ID column
"RTN","IBDF6",63,0)
 S VALMCNT=VALMCNT+1,@VALMAR@(VALMCNT,0)=$$DISPLAY2(FORM),@VALMAR@("IDX",VALMCNT,ID)=FORM_"^"_$S(SUB=2:.02,SUB=3:.03,SUB=4:.04,SUB=5:.05,SUB=6:.06,SUB=7:.07,SUB=8:.08,SUB=9:.09,1:0)
"RTN","IBDF6",64,0)
 Q
"RTN","IBDF6",65,0)
HDR ;
"RTN","IBDF6",66,0)
 S VALMHDR(1)="FORMS CURRENTLY USED BY '"_$$CLNCNAME_"' CLINIC"
"RTN","IBDF6",67,0)
 Q
"RTN","IBDF6",68,0)
CLNCNAME() ;
"RTN","IBDF6",69,0)
 Q $P($G(^SC(IBCLINIC,0)),"^",1)
"RTN","IBDF6",70,0)
DISPLAY1(FORM,USE,ID) ;
"RTN","IBDF6",71,0)
 N NODE,NAME,RET
"RTN","IBDF6",72,0)
 S RET=$J(ID,3)_$$SP(2)
"RTN","IBDF6",73,0)
 S NODE=$G(^IBE(357,FORM,0))
"RTN","IBDF6",74,0)
 S NAME=$P(NODE,"^",1)
"RTN","IBDF6",75,0)
 S RET=RET_$$PR(NAME,30)_$$SP(2)_USE
"RTN","IBDF6",76,0)
 Q RET
"RTN","IBDF6",77,0)
DISPLAY2(FORM) ;
"RTN","IBDF6",78,0)
 N NODE,DESCR,RET
"RTN","IBDF6",79,0)
 S RET=$$SP(37)
"RTN","IBDF6",80,0)
 S NODE=$G(^IBE(357,FORM,0))
"RTN","IBDF6",81,0)
 S DESCR=$P(NODE,"^",3)
"RTN","IBDF6",82,0)
 S RET=RET_$E(DESCR,1,80)
"RTN","IBDF6",83,0)
 Q RET
"RTN","IBDF6",84,0)
PR(STR,LEN) ; pad right
"RTN","IBDF6",85,0)
 Q:'$G(LEN) ""
"RTN","IBDF6",86,0)
 N B S STR=$E($G(STR),1,LEN)
"RTN","IBDF6",87,0)
 S:LEN'=$L(STR) $P(B," ",LEN-$L($G(STR)))=" "
"RTN","IBDF6",88,0)
 Q STR_$G(B)
"RTN","IBDF6",89,0)
SP(LEN) ;
"RTN","IBDF6",90,0)
 Q:'$G(LEN)
"RTN","IBDF6",91,0)
 N S S $P(S," ",LEN)=" "
"RTN","IBDF6",92,0)
 Q S
"RTN","IBDF6",93,0)
CHNGCLNC ;allows the user to change the clinic
"RTN","IBDF6",94,0)
 N SAVECLNC S SAVECLNC=IBCLINIC
"RTN","IBDF6",95,0)
 D FULL^VALM1
"RTN","IBDF6",96,0)
 S VALMBCK="R"
"RTN","IBDF6",97,0)
 D CLINIC I 'IBCLINIC S IBCLINIC=SAVECLNC Q
"RTN","IBDF6",98,0)
 D HDR
"RTN","IBDF6",99,0)
 X IBAPI("INDEX")
"RTN","IBDF6",100,0)
 Q
"RTN","IBDF6",101,0)
 ;
"RTN","IBDF6",102,0)
SELECT  ;
"RTN","IBDF6",103,0)
 N SEL
"RTN","IBDF6",104,0)
 D EN^VALM2(XQORNOD(0),"S")
"RTN","IBDF6",105,0)
 S SEL=$O(VALMY(""))
"RTN","IBDF6",106,0)
 S IBFORM=$S('SEL:"",1:+$G(@VALMAR@("IDX",2*SEL,SEL)))
"RTN","IBDF6",107,0)
 Q
"RTN","IBDFDE0")
0^5^B31394123
"RTN","IBDFDE0",1,0)
IBDFDE0 ;ALB/AAS - AICS Data Entry, Check out interview; 24-FEB-96
"RTN","IBDFDE0",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**29**;APR 24, 1997
"RTN","IBDFDE0",3,0)
 ;
"RTN","IBDFDE0",4,0)
% G ^IBDFDE
"RTN","IBDFDE0",5,0)
 ;
"RTN","IBDFDE0",6,0)
CHKOUT(SDOE) ; -- ask check out questions
"RTN","IBDFDE0",7,0)
 ; -- assumes forms are always for an appointment
"RTN","IBDFDE0",8,0)
 ;    does not require provider, cpt, or diag. to input data
"RTN","IBDFDE0",9,0)
 ;    acts same as input from scanned form.
"RTN","IBDFDE0",10,0)
 ;
"RTN","IBDFDE0",11,0)
 S IBQUIT=0
"RTN","IBDFDE0",12,0)
 W !!,">>> Check out interview..."
"RTN","IBDFDE0",13,0)
 ;
"RTN","IBDFDE0",14,0)
 ; -- can't check out future appointments
"RTN","IBDFDE0",15,0)
 I $E(IBDF("APPT"),1,7)>DT W "not available at this time." G CHKOUTQ
"RTN","IBDFDE0",16,0)
 ;
"RTN","IBDFDE0",17,0)
 ; -- get encounter if not already there (won't work unless appt exists)
"RTN","IBDFDE0",18,0)
 ;I 'SDOE S SDOE=$$GETAPT(DFN,IBDF("APPT"),IBDF("CLINIC"))
"RTN","IBDFDE0",19,0)
 ;
"RTN","IBDFDE0",20,0)
 ; -- see if already done, or needs to be done first
"RTN","IBDFDE0",21,0)
 S X=$$REQ(DFN,IBDF("APPT"),IBDF("CLINIC"),SDOE,$G(IBDCKOUT))
"RTN","IBDFDE0",22,0)
 I X<1 W $S(X=0:"no questions.",X=-2:"not required",X=-3:"already completed today",1:"already complete.") G CHKOUTQ
"RTN","IBDFDE0",23,0)
 W "required."
"RTN","IBDFDE0",24,0)
 ;
"RTN","IBDFDE0",25,0)
 ; -- ask eligibility/appt type ;not unless asked for
"RTN","IBDFDE0",26,0)
 ;S ELIG=$$ELAP^SDPCE(DFN,IBDF("APPT"))
"RTN","IBDFDE0",27,0)
 ;
"RTN","IBDFDE0",28,0)
 ; -- ask checkout Date
"RTN","IBDFDE0",29,0)
 S IBDPRE=$G(IBDCO("CO"))
"RTN","IBDFDE0",30,0)
 S X=$S($G(IBDCO("CO"))="":"NOW",1:$$FMTE^XLFDT(IBDCO("CO")))
"RTN","IBDFDE0",31,0)
 S IBDCO("CO")=$E($$ASKDT("Checkout Date: ",X,"",IBDF("APPT"),$$FMADD^XLFDT(DT,1)),1,12)
"RTN","IBDFDE0",32,0)
 I $G(IBDCO("CO"))="" K IBDCO W "   Checkout Deleted!" G CHKOUTQ
"RTN","IBDFDE0",33,0)
 I $G(IBDCO("CO"))<0 K:IBDPRE="" IBDCO("CO") W:IBDPRE="" "   Checkout Deleted!" S:IBDPRE IBDCO("CO")=IBDPRE S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",34,0)
 ;
"RTN","IBDFDE0",35,0)
 ; -- ask classifications
"RTN","IBDFDE0",36,0)
 I $$SC^SDCO22(DFN,+SDOE)!($D(IBDF("SC"))) S IBDCO("SC")=$$ASKYN("Was treatment for SC Condition",$G(IBDCO("SC")),"D SCCOND^IBDFN4") D
"RTN","IBDFDE0",37,0)
 .I $G(IBDCO("SC"))="" K IBDCO("SC") W "   Deleted!"
"RTN","IBDFDE0",38,0)
 I $G(IBDCO("SC"))<0 K IBDCO("SC") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",39,0)
 ;
"RTN","IBDFDE0",40,0)
 I $G(IBDCO("SC")) G CHKOUTQ ; if service connected others don't apply
"RTN","IBDFDE0",41,0)
 ;
"RTN","IBDFDE0",42,0)
 I $$AO^SDCO22(DFN,+SDOE)!($D(IBDF("AO"))) S IBDCO("AO")=$$ASKYN("Was treatment related to Agent Orange Exposure",$G(IBDCO("AO"))) D
"RTN","IBDFDE0",43,0)
 .I $G(IBDCO("AO"))="" K IBDCO("AO") W "   Deleted!"
"RTN","IBDFDE0",44,0)
 I $G(IBDCO("AO"))<0 K IBDCO("AO") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",45,0)
 ;
"RTN","IBDFDE0",46,0)
 I $$IR^SDCO22(DFN,+SDOE)!($D(IBDF("IR"))) S IBDCO("IR")=$$ASKYN("Was treatment related to  Ionizing Radiation Exposure",$G(IBDCO("IR"))) D
"RTN","IBDFDE0",47,0)
 .I $G(IBDCO("IR"))="" K IBDCO("IR") W "   Deleted!"
"RTN","IBDFDE0",48,0)
 I $G(IBDCO("IR"))<0 K IBDCO("IR") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",49,0)
 ;
"RTN","IBDFDE0",50,0)
 I $$EC^SDCO22(DFN,+SDOE)!($D(IBDF("EC"))) S IBDCO("EC")=$$ASKYN("Was treatment related to Environmental Contaminant Exposure",$G(IBDCO("EC"))) D
"RTN","IBDFDE0",51,0)
 .I $G(IBDCO("EC"))="" K IBDCO("EC") W "   Deleted!"
"RTN","IBDFDE0",52,0)
 I $G(IBDCO("EC"))<0 K IBDCO("EC") S IBQUIT=1 G CHKOUTQ
"RTN","IBDFDE0",53,0)
 ;
"RTN","IBDFDE0",54,0)
 I '$D(IBDCO) W "no questions."
"RTN","IBDFDE0",55,0)
CHKOUTQ I IBQUIT W !!,"Required information missing."
"RTN","IBDFDE0",56,0)
 K IBDPRE,SDFN
"RTN","IBDFDE0",57,0)
 Q
"RTN","IBDFDE0",58,0)
 ;
"RTN","IBDFDE0",59,0)
ASKYN(QUES,DEFLT,EXHELP) ; -- ask yes/no question
"RTN","IBDFDE0",60,0)
 N DIR,DIRUT,DUOUT,DTOUT
"RTN","IBDFDE0",61,0)
 I $G(EXHELP)'="" S DIR("??")="^"_EXHELP
"RTN","IBDFDE0",62,0)
 S DIR("A")=QUES,DIR(0)="YO",DIR("B")=$S($G(DEFLT):"Yes",1:"No") D ^DIR
"RTN","IBDFDE0",63,0)
 I $D(DIRUT),Y'="" S Y=-1 ;i y="" user typed "@"
"RTN","IBDFDE0",64,0)
 I $D(DTOUT)!($D(DUOUT)) S IBQUIT=1,Y=-1
"RTN","IBDFDE0",65,0)
 Q Y
"RTN","IBDFDE0",66,0)
 ;
"RTN","IBDFDE0",67,0)
ASKDT(QUES,DEFLT,PARAM,EARLY,LATEST,EXHELP) ; -- ask date questions
"RTN","IBDFDE0",68,0)
 N X,Y,DIR,DIRUT,DTOUT,DUOUT
"RTN","IBDFDE0",69,0)
 S DIR(0)="DOA^"_$E($G(EARLY),1,7)_":"_$G(LATEST)_":"_$S($G(PARAM)'="":PARAM,1:"AERX")
"RTN","IBDFDE0",70,0)
 I $G(QUES)'="" S DIR("A")=QUES
"RTN","IBDFDE0",71,0)
 I $G(DEFLT)'="" S DIR("B")=DEFLT
"RTN","IBDFDE0",72,0)
 I $L($G(EXHELP)) S DIR("??")="^"_EXHELP
"RTN","IBDFDE0",73,0)
 S DIR("?")="This response requires an appointment Date and Time"
"RTN","IBDFDE0",74,0)
 D ^DIR
"RTN","IBDFDE0",75,0)
 I $D(DIRUT),Y'="" S Y=-1 ;i y="" user typed "@"
"RTN","IBDFDE0",76,0)
 I $D(DTOUT)!($D(DUOUT)) S IBQUIT=1,Y=-1
"RTN","IBDFDE0",77,0)
 Q Y
"RTN","IBDFDE0",78,0)
 ;
"RTN","IBDFDE0",79,0)
REQ(DFN,APPT,CLINIC,SDOE,IBDC) ; is checkout interview required for this appt.
"RTN","IBDFDE0",80,0)
 N IBDY S IBDY=0
"RTN","IBDFDE0",81,0)
 I $$INP^SDAM2(DFN,APPT)="I" G REQQ ; inpatient appointment
"RTN","IBDFDE0",82,0)
 I '$$CLINIC^SDAMU(CLINIC) G REQQ ; not a clinic or non-count
"RTN","IBDFDE0",83,0)
 I $$REQ^SDM1A(APPT)'="CO" G REQQ ; checkout not required
"RTN","IBDFDE0",84,0)
 I $$EXCL(CLINIC,APPT) S IBDY=-2 G REQQ ; clinic stop codes are exempt
"RTN","IBDFDE0",85,0)
 I $$COMDT^SDCOU(+SDOE) S IBDY=-1 G REQQ ;process completed
"RTN","IBDFDE0",86,0)
 I $P($G(IBDC),".")=DT S IBDY=-3 G REQQ ;already checked out today
"RTN","IBDFDE0",87,0)
 S IBDY=1
"RTN","IBDFDE0",88,0)
REQQ K SDFN
"RTN","IBDFDE0",89,0)
 Q IBDY
"RTN","IBDFDE0",90,0)
 ;
"RTN","IBDFDE0",91,0)
EXCL(CL,DAT) ; -- are clinic stop codes exempt from classifications
"RTN","IBDFDE0",92,0)
 ; -- 1=yes, 0=no
"RTN","IBDFDE0",93,0)
 ;    original logic from exoe^sdcou2 except uses clinic stops rather
"RTN","IBDFDE0",94,0)
 ;    than outpatient encounter stops
"RTN","IBDFDE0",95,0)
 ;
"RTN","IBDFDE0",96,0)
 N SC1,SC2,EXMPT
"RTN","IBDFDE0",97,0)
 S SC1=$P($G(^SC(CL,0)),"^",7),SC2=$P($G(^SC(CL,0)),"^",18)
"RTN","IBDFDE0",98,0)
 I $$EX^SDCOU2(SC1,$G(DAT)) D
"RTN","IBDFDE0",99,0)
 .S EXMPT=1
"RTN","IBDFDE0",100,0)
 .I SC2,'$$EX^SDCOU2(SC2,$G(DAT)) S EXMPT=0
"RTN","IBDFDE0",101,0)
EXCLQ Q +$G(EXMPT)
"RTN","IBDFDE0",102,0)
 ;
"RTN","IBDFDE0",103,0)
WRITE(SDOE,CNT) ; -- print checkout interview
"RTN","IBDFDE0",104,0)
 W !?3,"Check out interview..."
"RTN","IBDFDE0",105,0)
 S X=$$REQ(DFN,IBDF("APPT"),IBDF("CLINIC"),SDOE)
"RTN","IBDFDE0",106,0)
 I X<1 W $S(X=0:"no questions.",1:"already complete.") G WRITEQ
"RTN","IBDFDE0",107,0)
 W "required."
"RTN","IBDFDE0",108,0)
 G:$D(IBDCO)'>1 WRITEQ
"RTN","IBDFDE0",109,0)
 ;D:$G(CNT)="" DISP
"RTN","IBDFDE0",110,0)
 D:$G(CNT)'="" LIST
"RTN","IBDFDE0",111,0)
 ;
"RTN","IBDFDE0",112,0)
WRITEQ Q
"RTN","IBDFDE0",113,0)
 ;
"RTN","IBDFDE0",114,0)
DISP ; -- display the old way
"RTN","IBDFDE0",115,0)
 I $D(IBDCO("CO")) W !,"                 Checkout Date: ",$$FMTE^XLFDT(IBDCO("CO"))
"RTN","IBDFDE0",116,0)
 I $D(IBDCO("SC")) W !,"    Treatment for SC Condition: ",$S(IBDCO("SC")=1:"YES",1:"NO")
"RTN","IBDFDE0",117,0)
 I $D(IBDCO("AO")) W !,"         Agent Orange Exposure: ",$S(IBDCO("AO")=1:"YES",1:"NO")
"RTN","IBDFDE0",118,0)
 I $D(IBDCO("IR")) W !,"   Ionizing Radiation Exposure: ",$S(IBDCO("IR")=1:"YES",1:"NO")
"RTN","IBDFDE0",119,0)
 I $D(IBDCO("EC")) W !,"    Environmental Contaminants: ",$S(IBDCO("EC")=1:"YES",1:"NO")
"RTN","IBDFDE0",120,0)
 Q
"RTN","IBDFDE0",121,0)
 ;
"RTN","IBDFDE0",122,0)
LIST ; -- display with a list
"RTN","IBDFDE0",123,0)
 I $D(IBDCO("CO")) S CNT=CNT+1 W !?3,CNT,?7,"Checkout Date ",?31,$$FMTE^XLFDT(IBDCO("CO"))
"RTN","IBDFDE0",124,0)
 I $D(IBDCO("SC")) S CNT=CNT+1 W !?3,CNT,?7,"SC Condition ",?31,$S(IBDCO("SC")=1:"YES",1:"NO")
"RTN","IBDFDE0",125,0)
 I $D(IBDCO("AO")) S CNT=CNT+1 W !?3,CNT,?7,"Agent Orange ",?31,$S(IBDCO("AO")=1:"YES",1:"NO")
"RTN","IBDFDE0",126,0)
 I $D(IBDCO("IR")) S CNT=CNT+1 W !?3,CNT,?7,"Ionizing Radiation ",?31,$S(IBDCO("IR")=1:"YES",1:"NO")
"RTN","IBDFDE0",127,0)
 I $D(IBDCO("EC")) S CNT=CNT+1 W !?3,CNT,?7,"Env. Contaminants ",?31,$S(IBDCO("EC")=1:"YES",1:"NO")
"RTN","IBDFDE0",128,0)
 Q
"RTN","IBDFN2")
0^1^B18126643
"RTN","IBDFN2",1,0)
IBDFN2 ;ALB/CJM - ENCOUNTER FORM - INTERFACE ROUTINES ;NOV 16,1992
"RTN","IBDFN2",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**29,31**;APR 24, 1997
"RTN","IBDFN2",3,0)
APPT ;returns appt date@time^date^time
"RTN","IBDFN2",4,0)
 N Y
"RTN","IBDFN2",5,0)
 S Y="" I IBAPPT S Y=IBAPPT K %DT D DD^%DT
"RTN","IBDFN2",6,0)
 S @IBARY=Y_"^"_$P(Y,"@")_"^"_$P(Y,"@",2)
"RTN","IBDFN2",7,0)
 Q
"RTN","IBDFN2",8,0)
NOW ;returns date and time
"RTN","IBDFN2",9,0)
 ;FORMATS:
"RTN","IBDFN2",10,0)
 ; MMM DD, YYYY@HH:MM:SS at the "IB DATE@TIME" subscript
"RTN","IBDFN2",11,0)
 ; MMM DD,YYYY at the "IB DATE" subscript
"RTN","IBDFN2",12,0)
 ; HH:MM:SS at the "IB TIME" subscript      
"RTN","IBDFN2",13,0)
 N Y,%,%H,%I,X
"RTN","IBDFN2",14,0)
 D NOW^%DTC S Y=% K %DT D DD^%DT
"RTN","IBDFN2",15,0)
 S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"IB CURRENT DATE@TIME")=Y
"RTN","IBDFN2",16,0)
 S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"IB CURRENT TIME")=$P(Y,"@",2)
"RTN","IBDFN2",17,0)
 S ^TMP("IB",$J,"INTERFACES",+$G(DFN),"IB CURRENT DATE")=$P(Y,"@")
"RTN","IBDFN2",18,0)
 Q
"RTN","IBDFN2",19,0)
 ;
"RTN","IBDFN2",20,0)
SPSEMPLR ;returns spouse's employer,address, telephone
"RTN","IBDFN2",21,0)
 ;input variables - DFN
"RTN","IBDFN2",22,0)
 N ARY,CNT S CNT=1
"RTN","IBDFN2",23,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"",+$G(DFN))"
"RTN","IBDFN2",24,0)
 S VAOA("A")=6 D OAD^VADPT
"RTN","IBDFN2",25,0)
 I VAERR S (@ARY@("DPT SPOUSE'S EMPLOYER NAME"),@ARY@("DPT SPOUSE'S EMPLOYER TELEPHONE"),@ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES"))=""  Q
"RTN","IBDFN2",26,0)
 I VAOA(1)'="" S @ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES",CNT)=VAOA(1),CNT=CNT+1
"RTN","IBDFN2",27,0)
 I VAOA(2)'="" S @ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES",CNT)=VAOA(2),CNT=CNT+1
"RTN","IBDFN2",28,0)
 I VAOA(3)'="" S @ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES",CNT)=VAOA(3),CNT=CNT+1
"RTN","IBDFN2",29,0)
 S @ARY@("DPT SPOUSE'S EMPLOYER ADDRESS LINES",CNT)=VAOA(4)_", "_$P(VAOA(5),"^",2)_" "_VAOA(6)
"RTN","IBDFN2",30,0)
 S @ARY@("DPT SPOUSE'S EMPLOYER TELEPHONE")=VAOA(8)
"RTN","IBDFN2",31,0)
 S @ARY@("DPT SPOUSE'S EMPLOYER NAME")=VAOA(9)
"RTN","IBDFN2",32,0)
 K VAOA,VAERR
"RTN","IBDFN2",33,0)
 Q
"RTN","IBDFN2",34,0)
EMPLOYER ;returns employer,address, telephone
"RTN","IBDFN2",35,0)
 ;input variables - DFN
"RTN","IBDFN2",36,0)
 N ARY,CNT S CNT=1
"RTN","IBDFN2",37,0)
 S ARY="^TMP(""IB"",$J,""INTERFACES"",DFN)"
"RTN","IBDFN2",38,0)
 S VAOA("A")=5 D OAD^VADPT
"RTN","IBDFN2",39,0)
 I VAERR S (@ARY@("DPT PATIENT'S EMPLOYER NAME"),@ARY@("DPT PATIENT'S EMPLOYER TELEPHONE"),@ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES"))=""  Q
"RTN","IBDFN2",40,0)
 I VAOA(1)'="" S @ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES",CNT)=VAOA(1),CNT=CNT+1
"RTN","IBDFN2",41,0)
 I VAOA(2)'="" S @ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES",CNT)=VAOA(2),CNT=CNT+1
"RTN","IBDFN2",42,0)
 I VAOA(3)'="" S @ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES",CNT)=VAOA(3),CNT=CNT+1
"RTN","IBDFN2",43,0)
 S @ARY@("DPT PATIENT'S EMPLOYER ADDRESS LINES",CNT)=VAOA(4)_", "_$P(VAOA(5),"^",2)_" "_VAOA(6)
"RTN","IBDFN2",44,0)
 S @ARY@("DPT PATIENT'S EMPLOYER TELEPHONE")=VAOA(8)
"RTN","IBDFN2",45,0)
 S @ARY@("DPT PATIENT'S EMPLOYER NAME")=VAOA(9)
"RTN","IBDFN2",46,0)
 K VAOA,VAERR
"RTN","IBDFN2",47,0)
 Q
"RTN","IBDFN2",48,0)
MT ;returns means test data
"RTN","IBDFN2",49,0)
 N Y,RET,GET
"RTN","IBDFN2",50,0)
 S GET=$$LST^DGMTU(DFN)
"RTN","IBDFN2",51,0)
 S RET=$P(GET,"^",3)_"^"
"RTN","IBDFN2",52,0)
 S Y=$P(GET,"^",2) D DD^%DT
"RTN","IBDFN2",53,0)
 S RET=RET_Y_"^"_$P(GET,"^",4)
"RTN","IBDFN2",54,0)
 S @IBARY=RET
"RTN","IBDFN2",55,0)
 Q
"RTN","IBDFN2",56,0)
ALLERGY ;outputs a list of the patient's allergies
"RTN","IBDFN2",57,0)
 ;piece #1=allergy name,#2=type of allergy(FOOD/DRUG/OTHER),#3=type of allergy(F/D/O),#4=VERFIED?(YES/NO),#5=TRUE ALLERGEN(YES/NO)
"RTN","IBDFN2",58,0)
 N GMRA,GMRAL,NODE,I,COUNT,TYPE
"RTN","IBDFN2",59,0)
 D:$L($T(GMRADPT^GMRADPT)) ^GMRADPT
"RTN","IBDFN2",60,0)
 I GMRAL=0 S COUNT=1,@IBARY@(COUNT)="NKA" Q
"RTN","IBDFN2",61,0)
 S (COUNT,I)=0 F  S I=$O(GMRAL(I)) Q:'I  D
"RTN","IBDFN2",62,0)
 .S COUNT=COUNT+1
"RTN","IBDFN2",63,0)
 .S NODE=$G(GMRAL(I))
"RTN","IBDFN2",64,0)
 .S TYPE=$P(NODE,"^",3)
"RTN","IBDFN2",65,0)
 .S @IBARY@(COUNT)=$P(NODE,"^",2)_"^"_$S(TYPE="D":"DRUG",TYPE="F":"FOOD",TYPE="O":"OTHER",1:"")_"^"_TYPE_"^"_$S($P(NODE,"^",4)=1:"YES",1:"NO")_"^"_$S($P(NODE,"^",5)=0:"YES",$P(NODE,"^",5)=1:"NO",1:"")
"RTN","IBDFN2",66,0)
 Q
"RTN","IBDFN2",67,0)
 ;
"RTN","IBDFN2",68,0)
PRMT ; -- print a 1010f if required or will expire in 357.09;.1 days
"RTN","IBDFN2",69,0)
 ;    called from print manger
"RTN","IBDFN2",70,0)
 ;    requires dfn, ibappt=appointment date
"RTN","IBDFN2",71,0)
 ;
"RTN","IBDFN2",72,0)
 N IBDMT,IBDMT1,IBDMT2,DGMTI,DGMTDT,DGMTYPT,DGOPT
"RTN","IBDFN2",73,0)
 S IBDMT1=$$LST^DGMTU(DFN,DT,1) ; means test
"RTN","IBDFN2",74,0)
 S IBDMT2=$$LST^DGMTU(DFN,DT,2) ; copay test
"RTN","IBDFN2",75,0)
 I IBDMT2="",IBDMT1="" G PRMTQ
"RTN","IBDFN2",76,0)
 S IBDMT=$S(IBDMT2="":IBDMT1,IBDMT1="":IBDMT2,$P(IBDMT1,"^",2)'<$P(IBDMT2,"^",2):IBDMT1,1:IBDMT2)
"RTN","IBDFN2",77,0)
 S DGMTYPT=$S(IBDMT=IBDMT2:2,1:1) ; set type of test
"RTN","IBDFN2",78,0)
 S DGMTI=+IBDMT,DGMTDT=$P(IBDMT,"^",2)
"RTN","IBDFN2",79,0)
 S DGOPT=1 ;pretend were from registration, don't close device when done
"RTN","IBDFN2",80,0)
 S STATUS=$P(IBDMT,"^",4)
"RTN","IBDFN2",81,0)
 I $S(STATUS="R":0,STATUS="N":1,STATUS="L":1,STATUS="I":0,$$FMDIFF^XLFDT(IBAPPT,DGMTDT,1)>(365-$S($P($G(^IBD(357.09,1,0)),"^",10):$P(^(0),"^",10),1:30)):0,1:1) G PRMTQ ;not required within params
"RTN","IBDFN2",82,0)
 ;
"RTN","IBDFN2",83,0)
 I STATUS="R" D GETMT I IBDMT1="" Q
"RTN","IBDFN2",84,0)
 D START^DGMTP
"RTN","IBDFN2",85,0)
PRMTQ Q
"RTN","IBDFN2",86,0)
 ;
"RTN","IBDFN2",87,0)
GETMT ;Since status is required find last valid means test
"RTN","IBDFN2",88,0)
 ;
"RTN","IBDFN2",89,0)
 S IBDMT=$$LVMT^DGMTU(DFN,DT) ; means test
"RTN","IBDFN2",90,0)
 S DGMTYPT=1 ; set type of test
"RTN","IBDFN2",91,0)
 S DGMTI=+IBDMT,DGMTDT=$P(IBDMT,"^",2)
"RTN","IBDFN2",92,0)
 Q
"RTN","IBDFOSG")
0^3^B24976552
"RTN","IBDFOSG",1,0)
IBDFOSG ;ALB/MAF/AAS - SCANNED EF FOR OUTPATIENTS WITH BILLS GENERATED REPORT ;8/21/95
"RTN","IBDFOSG",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**29**;APR 24, 1997
"RTN","IBDFOSG",3,0)
 ;
"RTN","IBDFOSG",4,0)
% I '$D(DT) D DT^DICRW
"RTN","IBDFOSG",5,0)
 D END
"RTN","IBDFOSG",6,0)
 W !!,"Scanned Encounter Forms with Outpatient Bills Generated."
"RTN","IBDFOSG",7,0)
 S IBDFMUL=0 I $D(^DG(43,1,"GL")) S:$P(^DG(43,1,"GL"),"^",2)=1 IBDFMUL=1 D DIVISION^VAUTOMA G:Y=-1 END
"RTN","IBDFOSG",8,0)
 S VAUTC=1
"RTN","IBDFOSG",9,0)
 S IBDFDAT=$$HTE^XLFDT($H)
"RTN","IBDFOSG",10,0)
 ;
"RTN","IBDFOSG",11,0)
DATE ; -- select date
"RTN","IBDFOSG",12,0)
 W !! D DATE^IBOUTL
"RTN","IBDFOSG",13,0)
 I IBBDT=""!(IBEDT="") G END
"RTN","IBDFOSG",14,0)
 S IBDFBEG=IBBDT,IBDFEND=IBEDT
"RTN","IBDFOSG",15,0)
 ;
"RTN","IBDFOSG",16,0)
DEV ; -- select device, run option
"RTN","IBDFOSG",17,0)
 W !!,"You will need a 132 column printer for this report!",!
"RTN","IBDFOSG",18,0)
 S %ZIS="QM" D ^%ZIS G:POP END
"RTN","IBDFOSG",19,0)
 I $D(IO("Q")) K ZTSK S ZTRTN="DQ^IBDFOSG",ZTSAVE("IB*")="",ZTSAVE("VA*")="",ZTDESC="IBD - Scanned Encounter Forms with Bill Generation" D ^%ZTLOAD K IO("Q") W !,$S($D(ZTSK):"Request Queued Task="_ZTSK,1:"Request Canceled") D HOME^%ZIS G END
"RTN","IBDFOSG",20,0)
 ;
"RTN","IBDFOSG",21,0)
 U IO
"RTN","IBDFOSG",22,0)
 S X=132 X ^%ZOSF("RM")
"RTN","IBDFOSG",23,0)
DQ D PRINT G END
"RTN","IBDFOSG",24,0)
 Q
"RTN","IBDFOSG",25,0)
 ;
"RTN","IBDFOSG",26,0)
END ; -- Clean up
"RTN","IBDFOSG",27,0)
 K ^TMP("CTOT",$J),^TMP("DTOT",$J),^TMP("GTOT",$J),^TMP("MCCR",$J),^TMP("IBD-BILL",$J),^TMP("IBD-PRINTED",$J),^TMP("IBD-ENTERED",$J) W !
"RTN","IBDFOSG",28,0)
 I $D(ZTQUEUED) S ZTREQ="@" Q
"RTN","IBDFOSG",29,0)
 D ^%ZISC
"RTN","IBDFOSG",30,0)
 K X,Y,DFN,IBPAG,IBHDT,IBDT,IBBDT,IBEDT,IBQUIT,IBDFDVE
"RTN","IBDFOSG",31,0)
 K IBCNT,IBDFBEG,IBDFCLI,IBDFDA,IBDFDAT,IBDFDIV,IBDFEND,IBDFIFN,IBDFMUL,IBDFNODE,IBDFNUM,IBDFSA,IBDFT,IBDFTMP,IBDFTMP1,IBDFTMP2,IBDFTPRT
"RTN","IBDFOSG",32,0)
 K IBFLG1,IBFLG2,IBFLG3,IBFLG4,IBFLG5,IBFLG6,IBFLG7,IBFLG8,IBFLG9,IBMCNODE,IBMCSND,IBNAM,IBTSBDT,IBTSEDT
"RTN","IBDFOSG",33,0)
 K VAUTC,VAUTD
"RTN","IBDFOSG",34,0)
 Q
"RTN","IBDFOSG",35,0)
 ;
"RTN","IBDFOSG",36,0)
PRINT ; -- print one billing report
"RTN","IBDFOSG",37,0)
 ;    Data sorted into ^tmp arrays
"RTN","IBDFOSG",38,0)
 ;                    := ^tmp("mccr",$j) =
"RTN","IBDFOSG",39,0)
 ;    Clinic Totals   := ^tmp("ctot",$j,division,clinic)=
"RTN","IBDFOSG",40,0)
 ;    Division Totals := ^tmp("dtot",$j,division)       =
"RTN","IBDFOSG",41,0)
 ;    Grand Totals    := ^tmp("gtot",$j)                =
"RTN","IBDFOSG",42,0)
 ;
"RTN","IBDFOSG",43,0)
 S (IBPAG,IBDFDVE)=0,IBHDT=$$HTE^XLFDT($H,1),IBQUIT=0
"RTN","IBDFOSG",44,0)
 S IBTSBDT=IBBDT-.1,IBTSEDT=IBEDT+.9
"RTN","IBDFOSG",45,0)
 D QUIT
"RTN","IBDFOSG",46,0)
 D START^IBDFOSG1
"RTN","IBDFOSG",47,0)
 ;
"RTN","IBDFOSG",48,0)
PR D HDR
"RTN","IBDFOSG",49,0)
 I '$D(^TMP("MCCR",$J)) W !!,"No Data Meeting This Criteria for the Date Range Chosen",! Q
"RTN","IBDFOSG",50,0)
 N IBDFDV,IBDFCL,IBDNODE,IBDFTMP,IBDFPAT,IBDFPT,IBDFT
"RTN","IBDFOSG",51,0)
 S (IBDFDV,IBDFCL,IBDFPT)=0
"RTN","IBDFOSG",52,0)
 F IBDFDIV=0:0 S IBDFDV=$O(^TMP("CTOT",$J,IBDFDV)) Q:IBDFDV=""!(IBQUIT)  D
"RTN","IBDFOSG",53,0)
 .D DIVH
"RTN","IBDFOSG",54,0)
 .S IBDFCL=0
"RTN","IBDFOSG",55,0)
 .F IBDFCLI=0:0 S IBDFCL=$O(^TMP("CTOT",$J,IBDFDV,IBDFCL)) Q:IBDFCL=""  D ONECL I $O(^TMP("CTOT",$J,IBDFDV,IBDFCL))="" S IBDFDVE=1 D ONEDV
"RTN","IBDFOSG",56,0)
 ;
"RTN","IBDFOSG",57,0)
 ;  -- Print Totals Page
"RTN","IBDFOSG",58,0)
 S IBDFDVE=0
"RTN","IBDFOSG",59,0)
 Q:IBQUIT
"RTN","IBDFOSG",60,0)
 D HDR
"RTN","IBDFOSG",61,0)
 S (IBDFDV,IBDFCL,IBDFPT)=0
"RTN","IBDFOSG",62,0)
 S IBFLG4=1 ;1 := on division totals page
"RTN","IBDFOSG",63,0)
 F IBDFDIV=0:0 S IBDFDV=$O(^TMP("DTOT",$J,IBDFDV)) Q:IBDFDV']""!(IBQUIT)  D ONEDV
"RTN","IBDFOSG",64,0)
 Q:IBQUIT
"RTN","IBDFOSG",65,0)
 D DASH
"RTN","IBDFOSG",66,0)
 D LINE("GRAND TOTAL",^TMP("GTOT",$J))
"RTN","IBDFOSG",67,0)
 Q
"RTN","IBDFOSG",68,0)
 ;
"RTN","IBDFOSG",69,0)
ONECL ; -- Print one clinics data
"RTN","IBDFOSG",70,0)
 Q:IBQUIT
"RTN","IBDFOSG",71,0)
 Q:^TMP("CTOT",$J,IBDFDV,IBDFCL)="0^0^0^0^0^0^0^0^0"
"RTN","IBDFOSG",72,0)
 D LINE(IBDFCL,^TMP("CTOT",$J,IBDFDV,IBDFCL))
"RTN","IBDFOSG",73,0)
 Q
"RTN","IBDFOSG",74,0)
 ;
"RTN","IBDFOSG",75,0)
ONEDV ;  -- Print Division totals
"RTN","IBDFOSG",76,0)
 Q:IBQUIT
"RTN","IBDFOSG",77,0)
 I IOSL<($Y+5) D HDR Q:IBQUIT
"RTN","IBDFOSG",78,0)
 Q:^TMP("DTOT",$J,IBDFDV)="0^0^0^0^0^0^0^0^0"&('$D(IBFLG4))
"RTN","IBDFOSG",79,0)
 I IBDFDVE=1 D DASH S IBDFDVE=0
"RTN","IBDFOSG",80,0)
 D LINE(IBDFDV,^TMP("DTOT",$J,IBDFDV))
"RTN","IBDFOSG",81,0)
 Q
"RTN","IBDFOSG",82,0)
 ;
"RTN","IBDFOSG",83,0)
LINE(NAME,IBX) ;
"RTN","IBDFOSG",84,0)
 ; -- print detail line
"RTN","IBDFOSG",85,0)
 ;    input Name := text to be printed
"RTN","IBDFOSG",86,0)
 ;          ibx  ;= 9 piece global node containing data
"RTN","IBDFOSG",87,0)
 ;
"RTN","IBDFOSG",88,0)
 I IOSL<($Y+5) D HDR Q:IBQUIT
"RTN","IBDFOSG",89,0)
 W !,$E(NAME,1,25)
"RTN","IBDFOSG",90,0)
 W ?27,$J($P(IBX,"^",4),8)
"RTN","IBDFOSG",91,0)
 W ?39,$J($P(IBX,"^",3),8)
"RTN","IBDFOSG",92,0)
 W ?51,$J($P(IBX,"^",1),8)
"RTN","IBDFOSG",93,0)
 W ?63,$J($P(IBX,"^",2),8)
"RTN","IBDFOSG",94,0)
 S X=$S($P(IBX,"^",4)>0:$P(IBX,"^",5)/$P(IBX,"^",4),1:0)
"RTN","IBDFOSG",95,0)
 W ?75,$J(X,8,2) ;$J($E(X,1,8),8)
"RTN","IBDFOSG",96,0)
 W ?87,$J($P(IBX,"^",6),8)
"RTN","IBDFOSG",97,0)
 W ?99,$J($P(IBX,"^",7),8)
"RTN","IBDFOSG",98,0)
 W ?111,$J($P(IBX,"^",8),8)
"RTN","IBDFOSG",99,0)
 W ?123,$J($P(IBX,"^",9),8)
"RTN","IBDFOSG",100,0)
 Q
"RTN","IBDFOSG",101,0)
 ;
"RTN","IBDFOSG",102,0)
HDR ; -- Print header for billing report
"RTN","IBDFOSG",103,0)
 Q:IBQUIT
"RTN","IBDFOSG",104,0)
 I $E(IOST,1,2)="C-",IBPAG D PAUSE^VALM1 I $D(DIRUT) S IBQUIT=1 Q
"RTN","IBDFOSG",105,0)
 I $E(IOST,1,2)="C-"!(IBPAG) W @IOF
"RTN","IBDFOSG",106,0)
 S IBPAG=IBPAG+1
"RTN","IBDFOSG",107,0)
 W !,"Scanned Encounters with Bill Generation Data",?(IOM-33),"Page ",IBPAG,"  ",IBHDT
"RTN","IBDFOSG",108,0)
 W !,"For Period beginning on ",$$FMTE^XLFDT(IBBDT,2)," to ",$$FMTE^XLFDT(IBEDT,2)
"RTN","IBDFOSG",109,0)
 W !,?53,"Visits",?65,"#Bills",?75,"Avg. Days",?114,"Total",?126,"Total"
"RTN","IBDFOSG",110,0)
 W !,"Clinic",?27,"#Scanned",?39,"#Insured",?53,"Billed",?64,"Printed",?75,"to Print",?87,"$ Billed",?100,"$ Recvd",?114,"Bills",?125,"Visits"
"RTN","IBDFOSG",111,0)
 W !,$TR($J(" ",IOM)," ","-")
"RTN","IBDFOSG",112,0)
 I $D(ZTQUEUED),$$S^%ZTLOAD S ZTSTOP=1,IBQUIT=1 W !!,"....task stopped at user request" Q
"RTN","IBDFOSG",113,0)
 Q
"RTN","IBDFOSG",114,0)
 ;
"RTN","IBDFOSG",115,0)
 ;
"RTN","IBDFOSG",116,0)
QUIT K ^TMP("CTOT",$J),^TMP("DTOT",$J),^TMP("GTOT",$J),^TMP("MCCR",$J),^TMP("IBD-BILL",$J) W !
"RTN","IBDFOSG",117,0)
 Q
"RTN","IBDFOSG",118,0)
 ;
"RTN","IBDFOSG",119,0)
 ;
"RTN","IBDFOSG",120,0)
DASH W !,"------------------",?27,"--------",?39,"--------",?51,"--------",?63,"--------",?75,"--------",?87,"--------",?99,"--------",?111,"--------",?123,"--------"
"RTN","IBDFOSG",121,0)
 Q
"RTN","IBDFOSG",122,0)
 ;
"RTN","IBDFOSG",123,0)
DIVH ;  -- Write division header
"RTN","IBDFOSG",124,0)
 I IOSL<($Y+5) D HDR Q:IBQUIT
"RTN","IBDFOSG",125,0)
 Q:^TMP("DTOT",$J,IBDFDV)="0^0^0^0^0^0^0^0^0"
"RTN","IBDFOSG",126,0)
 W !!,?(IOM-$L(IBDFDV)+10/2),"DIVISION: ",IBDFDV,!
"RTN","IBDFOSG",127,0)
 Q
"RTN","IBDFOSG1")
0^4^B18967446
"RTN","IBDFOSG1",1,0)
IBDFOSG1 ;ALB/MAF/AAS - SCANNED ENCOUNTERS WITH BILLING DATA CONT. ; JUL 6 1995
"RTN","IBDFOSG1",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**29**;APR 24, 1997
"RTN","IBDFOSG1",3,0)
 ;
"RTN","IBDFOSG1",4,0)
START ;  -- Loop thru clinics
"RTN","IBDFOSG1",5,0)
 N IBDFCLIN,IBQUIT
"RTN","IBDFOSG1",6,0)
 S IBQUIT=0
"RTN","IBDFOSG1",7,0)
 S ^TMP("GTOT",$J)="0^0^0^0^0^0^0^0^0"
"RTN","IBDFOSG1",8,0)
 F IBDFCLIN=0:0 S IBDFCLIN=$O(^SC(IBDFCLIN)) Q:'IBDFCLIN  D CK(IBDFCLIN),BLD:'IBQUIT
"RTN","IBDFOSG1",9,0)
 Q
"RTN","IBDFOSG1",10,0)
 ;
"RTN","IBDFOSG1",11,0)
CHECK(CLIN) ;
"RTN","IBDFOSG1",12,0)
 ;  -- Check to see if clinic has a form and its one that
"RTN","IBDFOSG1",13,0)
 ;     is not for future use only.
"RTN","IBDFOSG1",14,0)
 N IBDFNODE,IBDFCL,HASFORM
"RTN","IBDFOSG1",15,0)
 S HASFORM=1
"RTN","IBDFOSG1",16,0)
 I $O(^SD(409.95,"B",+CLIN,0)) D
"RTN","IBDFOSG1",17,0)
 .S IBDFCL=$O(^SD(409.95,"B",+CLIN,0))
"RTN","IBDFOSG1",18,0)
 .S IBDFNODE=^SD(409.95,IBDFCL,0)
"RTN","IBDFOSG1",19,0)
 Q HASFORM
"RTN","IBDFOSG1",20,0)
 ;
"RTN","IBDFOSG1",21,0)
CK(XCL) ;  -- Check clinic, division, form
"RTN","IBDFOSG1",22,0)
 Q:'$D(^SC(XCL,0))
"RTN","IBDFOSG1",23,0)
 S IBQUIT=0
"RTN","IBDFOSG1",24,0)
 S IBDFNODE=$G(^SC(XCL,0))
"RTN","IBDFOSG1",25,0)
 Q:$P(IBDFNODE,"^",3)'="C"
"RTN","IBDFOSG1",26,0)
 S IBDIVNM=$P($G(^DG(40.8,+$P(IBDFNODE,"^",15),0)),"^",1) I IBDIVNM="" S IBDIVNM=$S(IBDFMUL=0:$$PRIM^VASITE,1:"NOT SPECIFIED")
"RTN","IBDFOSG1",27,0)
 I VAUTD=0 Q:'$D(VAUTD(+$P(IBDFNODE,"^",15)))
"RTN","IBDFOSG1",28,0)
 I '$$CHECK(XCL) S IBQUIT=1 Q
"RTN","IBDFOSG1",29,0)
 S ^TMP("CTOT",$J,IBDIVNM,$P(IBDFNODE,"^",1))="0^0^0^0^0^0^0^0^0"
"RTN","IBDFOSG1",30,0)
 I '$D(^TMP("DTOT",$J,IBDIVNM)) S ^TMP("DTOT",$J,IBDIVNM)="0^0^0^0^0^0^0^0^0"
"RTN","IBDFOSG1",31,0)
 Q
"RTN","IBDFOSG1",32,0)
 ;
"RTN","IBDFOSG1",33,0)
BLD ; -- scan appts
"RTN","IBDFOSG1",34,0)
 F IBDFT=IBDFBEG:0 S IBDFT=$O(^SC(IBDFCLIN,"S",IBDFT)) Q:'IBDFT!($P(IBDFT,".",1)>IBDFEND)  D
"RTN","IBDFOSG1",35,0)
 .F IBDFDA=0:0 S IBDFDA=$O(^SC(IBDFCLIN,"S",IBDFT,1,IBDFDA)) Q:'IBDFDA  I $D(^SC(IBDFCLIN,"S",IBDFT,1,IBDFDA,0)) S IBDFSA=^(0) S DFN=+IBDFSA D CK1
"RTN","IBDFOSG1",36,0)
 Q
"RTN","IBDFOSG1",37,0)
 ;
"RTN","IBDFOSG1",38,0)
CK1 ;  -- Check scheduling nodes, forms tracking, if scanned, 
"RTN","IBDFOSG1",39,0)
 ;           patient insured, bill entered, bill printed, 
"RTN","IBDFOSG1",40,0)
 ;           avg time from encounter to printed bill.
"RTN","IBDFOSG1",41,0)
 ;
"RTN","IBDFOSG1",42,0)
 I $P($G(^DPT(DFN,"S",IBDFT,0)),"^",2)]"" Q
"RTN","IBDFOSG1",43,0)
 N IBDFXPC,IBDFYPC
"RTN","IBDFOSG1",44,0)
 S IBDFXPC=$P(IBDFNODE,"^",1) ;Clinic name
"RTN","IBDFOSG1",45,0)
 S IBDFYPC=$P($G(^DPT(+$G(DFN),0)),"^",1) ;patient name
"RTN","IBDFOSG1",46,0)
 ;
"RTN","IBDFOSG1",47,0)
 I $D(^IBD(357.96,"APTAP",DFN,IBDFT)) S IBDFIFN=$O(^IBD(357.96,"APTAP",DFN,IBDFT,0)) I $P($G(^IBD(357.96,+IBDFIFN,0)),"^",11)>1,$P(^(0),"^",11)<5 D
"RTN","IBDFOSG1",48,0)
 .S (IBFLG1,IBFLG2,IBFLG3,IBFLG5,IBFLG6,IBFLG7,IBFLG8,IBFLG9)=0
"RTN","IBDFOSG1",49,0)
 .I $$INSURED^IBCNS1(DFN,IBDFT) S IBFLG3=1
"RTN","IBDFOSG1",50,0)
 .I '$D(^DGCR(399,"AOPV",DFN,$P(IBDFT,".",1))) D SET Q
"RTN","IBDFOSG1",51,0)
 .F IBDFNUM=0:0 S IBDFNUM=$O(^DGCR(399,"AOPV",DFN,$P(IBDFT,".",1),IBDFNUM)) Q:IBDFNUM']""!(IBFLG2)  D
"RTN","IBDFOSG1",52,0)
 ..S IBMCNODE=$G(^DGCR(399,IBDFNUM,0))
"RTN","IBDFOSG1",53,0)
 ..S IBMCSND=$G(^DGCR(399,IBDFNUM,"S"))
"RTN","IBDFOSG1",54,0)
 ..Q:$P(IBMCSND,"^",17)  ;canceled date
"RTN","IBDFOSG1",55,0)
 ..I 'IBFLG1,$P(IBMCSND,"^",1) D  ;bill entered
"RTN","IBDFOSG1",56,0)
 ...S IBFLG1=1,^TMP("IBD-ENTERED",$J,IBDFNUM)="",^TMP("IBD-ENTERED",$J,IBDIVNM,IBDFNUM,DFN)=""
"RTN","IBDFOSG1",57,0)
 ..I $P(IBMCSND,"^",12),'$D(^TMP("IBD-PRINTED",$J,IBDFNUM)) S IBFLG2=1,^TMP("IBD-PRINTED",$J,IBDFNUM)="" ;bill printed
"RTN","IBDFOSG1",58,0)
 ..;
"RTN","IBDFOSG1",59,0)
 ..; -- find amount billed/received if unique bill
"RTN","IBDFOSG1",60,0)
 ..I IBFLG2,'$D(^TMP("IBD-BILL",$J,IBDFNUM)) D
"RTN","IBDFOSG1",61,0)
 ...S ^TMP("IBD-BILL",$J,IBDFNUM)=1
"RTN","IBDFOSG1",62,0)
 ...S IBFLG6=+$P(^DGCR(399,IBDFNUM,"U1"),"^")
"RTN","IBDFOSG1",63,0)
 ...S X=$$TPR^PRCAFN(IBDFNUM) S:X>0 IBFLG7=X
"RTN","IBDFOSG1",64,0)
 ...S IBFLG8=1 ;is new unique bill
"RTN","IBDFOSG1",65,0)
 ...S IBFLG9=+$P($G(^DGCR(399,IBDFNUM,"OP",0)),"^",4)
"RTN","IBDFOSG1",66,0)
 ...Q
"RTN","IBDFOSG1",67,0)
 ..Q
"RTN","IBDFOSG1",68,0)
 .;
"RTN","IBDFOSG1",69,0)
 .S X1=$S($P(IBMCSND,"^",12):$P(IBMCSND,"^",12),1:$G(VADAT("W"))),X2=IBDFT D ^%DTC S IBFLG5=X
"RTN","IBDFOSG1",70,0)
 .D SET
"RTN","IBDFOSG1",71,0)
 Q
"RTN","IBDFOSG1",72,0)
SET ;  -- Set counters in temp arrays
"RTN","IBDFOSG1",73,0)
 ;     Piece 1 := Number bills entered
"RTN","IBDFOSG1",74,0)
 ;     Piece 2 := Number bills generated
"RTN","IBDFOSG1",75,0)
 ;     Piece 3 := Number of forms scanned for patients with INS
"RTN","IBDFOSG1",76,0)
 ;     Piece 4 := Number of forms scanned
"RTN","IBDFOSG1",77,0)
 ;     Piece 5 := Number of days from encounter date to bill printed
"RTN","IBDFOSG1",78,0)
 ;     Piece 6 := amount billed (for unique bill)
"RTN","IBDFOSG1",79,0)
 ;     Piece 7 := amount received (for unique bills)
"RTN","IBDFOSG1",80,0)
 ;     Piece 8 := number of unique bills
"RTN","IBDFOSG1",81,0)
 ;     Piece 9 := Number of visit dates on bills in 8
"RTN","IBDFOSG1",82,0)
 ;
"RTN","IBDFOSG1",83,0)
 S ^TMP("MCCR",$J,IBDIVNM,IBDFXPC,IBDFYPC,DFN,IBDFT)=IBDFCLIN_"^"_^IBD(357.96,IBDFIFN,0)
"RTN","IBDFOSG1",84,0)
 ;
"RTN","IBDFOSG1",85,0)
 S IBDFTMP=^TMP("CTOT",$J,IBDIVNM,$P(IBDFNODE,"^",1))
"RTN","IBDFOSG1",86,0)
 S IBDFTMP1=^TMP("DTOT",$J,IBDIVNM)
"RTN","IBDFOSG1",87,0)
 S IBDFTMP2=^TMP("GTOT",$J)
"RTN","IBDFOSG1",88,0)
 ;
"RTN","IBDFOSG1",89,0)
 I IBFLG1 D INC(1,1) ;     Bills Entered
"RTN","IBDFOSG1",90,0)
 I IBFLG2 D INC(2,1) ;     Bills Generated
"RTN","IBDFOSG1",91,0)
 I IBFLG3 D INC(3,1) ;     With insurance
"RTN","IBDFOSG1",92,0)
 D INC(4,1) ;              number scanned
"RTN","IBDFOSG1",93,0)
 I IBFLG5 D INC(5,IBFLG5) ;Days from encounter to Printed Bill
"RTN","IBDFOSG1",94,0)
 I IBFLG6 D INC(6,IBFLG6) ;Amount billed
"RTN","IBDFOSG1",95,0)
 I IBFLG7 D INC(7,IBFLG7) ;Amount Received
"RTN","IBDFOSG1",96,0)
 I IBFLG8 D INC(8,1) ;     Number of Bills
"RTN","IBDFOSG1",97,0)
 I IBFLG9 D INC(9,IBFLG9) ;number of visits on bills
"RTN","IBDFOSG1",98,0)
 ;
"RTN","IBDFOSG1",99,0)
 S ^TMP("CTOT",$J,IBDIVNM,$P(IBDFNODE,"^",1))=IBDFTMP
"RTN","IBDFOSG1",100,0)
 S ^TMP("DTOT",$J,IBDIVNM)=IBDFTMP1
"RTN","IBDFOSG1",101,0)
 S ^TMP("GTOT",$J)=IBDFTMP2
"RTN","IBDFOSG1",102,0)
 Q
"RTN","IBDFOSG1",103,0)
 ;
"RTN","IBDFOSG1",104,0)
INC(PIECE,VALUE) ;
"RTN","IBDFOSG1",105,0)
 ; -- increment counters, 
"RTN","IBDFOSG1",106,0)
 S $P(IBDFTMP,"^",PIECE)=$P(IBDFTMP,"^",PIECE)+VALUE
"RTN","IBDFOSG1",107,0)
 S $P(IBDFTMP1,"^",PIECE)=$P(IBDFTMP1,"^",PIECE)+VALUE
"RTN","IBDFOSG1",108,0)
 S $P(IBDFTMP2,"^",PIECE)=$P(IBDFTMP2,"^",PIECE)+VALUE
"RTN","IBDFOSG1",109,0)
 Q
"VER")
8.0^22.0
"^DD",357.09,357.09,.1,0)
DAYS TO PRINT 1010F^NJ3,0^^0;10^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.09,357.09,.1,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",357.09,357.09,.1,21,0)
^.001^6^6^3000510^^^^
"^DD",357.09,357.09,.1,21,1,0)
If you have chosen to print a 1010F with your encounter forms, this is the
"^DD",357.09,357.09,.1,21,2,0)
number of days between the expiration of a means test and the appointment 
"^DD",357.09,357.09,.1,21,3,0)
date before that you want to print 1010F's for.  For example, if this field
"^DD",357.09,357.09,.1,21,4,0)
is set to 30, then 1010F's will print for means tests that are due to 
"^DD",357.09,357.09,.1,21,5,0)
expire within 30 days of the appointment.  1010F's will also print if they
"^DD",357.09,357.09,.1,21,6,0)
are in a required status.
"^DD",357.09,357.09,.1,23,0)
^.001^2^2^3000510^^^
"^DD",357.09,357.09,.1,23,1,0)
This parameter is used in PRMT^IBDFN2 if a 1010F is printed from the print
"^DD",357.09,357.09,.1,23,2,0)
manager.
"^DD",357.09,357.09,.1,"DT")
2970317
"^DD",357.6,357.6,0)
FIELD^^21^60
"^DD",357.6,357.6,0,"ACT")
D ASK^IBDFU9
"^DD",357.6,357.6,0,"DDA")
N
"^DD",357.6,357.6,0,"DT")
2990304
"^DD",357.6,357.6,0,"ID",.06)
W ""
"^DD",357.6,357.6,0,"ID","WRITE")
Q  N IBDWNAM S IBDWNAM=$E($P(^(0),U),1,40) D EN^DDIOL(IBDWNAM,"","!?0")
"^DD",357.6,357.6,0,"ID","WRITE1")
N IBDWTYPE S IBDWTYPE=$S($P(^(0),"^",6)=1:"INPUT",$P(^(0),"^",6)=2:"OUTPUT",$P(^(0),"^",6)=3:"SELECTION",1:"REPORT")_$S($P(^(0),"^",6)=3&'$P(^(0),"^",13):"  ** NOT SCANNABLE **",1:"") D EN^DDIOL("TYPE="_IBDWTYPE,"","?45")
"^DD",357.6,357.6,0,"IX","B",357.6,.01)

"^DD",357.6,357.6,0,"IX","C",357.6,.04)

"^DD",357.6,357.6,0,"IX","D",357.6,3)

"^DD",357.6,357.6,0,"IX","E",357.6,.01)

"^DD",357.6,357.6,0,"NM","PACKAGE INTERFACE")

"^DD",357.6,357.6,0,"PT",357.13,.03)

"^DD",357.6,357.6,0,"PT",357.14,.04)

"^DD",357.6,357.6,0,"PT",357.2,.11)

"^DD",357.6,357.6,0,"PT",357.5,.03)

"^DD",357.6,357.6,0,"PT",357.6,.13)

"^DD",357.6,357.6,0,"PT",357.93,.06)

"^DD",357.6,357.6,0,"PT",357.951,.03)

"^DD",357.6,357.6,0,"PT",357.952,.04)

"^DD",357.6,357.6,0,"PT",357.961,.03)

"^DD",357.6,357.6,0,"PT",357.962,.03)

"^DD",357.6,357.6,0,"PT",358.94,.06)

"^DD",357.6,357.6,0,"PT",359.3,.1)

"^DD",357.6,357.6,0,"PT",359.94,.06)

"^DD",357.6,357.6,0,"PT",409.9501,.01)

"^DD",357.6,357.6,0,"PT",409.9502,.01)

"^DD",357.6,357.6,0,"PT",409.961,.01)

"^DD",357.6,357.6,0,"VRPK")
IBD
"^DD",357.6,357.6,.01,0)
NAME^RFX^^0;1^K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",357.6,357.6,.01,1,0)
^.1
"^DD",357.6,357.6,.01,1,1,0)
357.6^B
"^DD",357.6,357.6,.01,1,1,1)
S ^IBE(357.6,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.6,.01,1,1,2)
K ^IBE(357.6,"B",$E(X,1,30),DA)
"^DD",357.6,357.6,.01,1,2,0)
357.6^E^MUMPS
"^DD",357.6,357.6,.01,1,2,1)
N IBDXE S IBDXE=$E(X,$F(X," "),40) S:$A(IBDXE)<33 IBDXE=X S ^IBE(357.6,"E",IBDXE,DA)=""
"^DD",357.6,357.6,.01,1,2,2)
N IBDXE S IBDXE=$E(X,$F(X," "),40) S:$A(IBDXE)<33 IBDXE=X K ^IBE(357.6,"E",IBDXE,DA)
"^DD",357.6,357.6,.01,1,2,"%D",0)
^^4^4^2970711^^^^
"^DD",357.6,357.6,.01,1,2,"%D",1,0)
 
"^DD",357.6,357.6,.01,1,2,"%D",2,0)
For package interfaces that are output routines the name has the custodial
"^DD",357.6,357.6,.01,1,2,"%D",3,0)
package's name space as a prefix. This cross-reference removes that
"^DD",357.6,357.6,.01,1,2,"%D",4,0)
prefix. It is used to improve the display of output routines for the user.
"^DD",357.6,357.6,.01,1,2,"DT")
2970711
"^DD",357.6,357.6,.01,3)
The name should be prefixed with the namespace of the package that provides the data.
"^DD",357.6,357.6,.01,21,0)
^^3^3^2951017^
"^DD",357.6,357.6,.01,21,1,0)
 
"^DD",357.6,357.6,.01,21,2,0)
The name of the Package Interface. The name should be preceded with the
"^DD",357.6,357.6,.01,21,3,0)
namespace of the package.
"^DD",357.6,357.6,.01,23,0)
^^1^1^2951017^^^
"^DD",357.6,357.6,.01,23,1,0)
 
"^DD",357.6,357.6,.01,"DT")
2970711
"^DD",357.6,357.6,.02,0)
ENTRY POINT^F^^0;2^K:$L(X)>8!($L(X)<1) X
"^DD",357.6,357.6,.02,3)
What entry point into the routine does this package interface use?
"^DD",357.6,357.6,.02,21,0)
^^2^2^2941018^^
"^DD",357.6,357.6,.02,21,1,0)
 
"^DD",357.6,357.6,.02,21,2,0)
The entry point in the routine that should be called.
"^DD",357.6,357.6,.02,"DT")
2941018
"^DD",357.6,357.6,.03,0)
ROUTINE^F^^0;3^K:$L(X)>8!($L(X)<1) X
"^DD",357.6,357.6,.03,3)
What routine does this package interface use?
"^DD",357.6,357.6,.03,21,0)
^^2^2^2941018^^
"^DD",357.6,357.6,.03,21,1,0)
 
"^DD",357.6,357.6,.03,21,2,0)
The routine that should be called.
"^DD",357.6,357.6,.03,"DT")
2921125
"^DD",357.6,357.6,.04,0)
CUSTODIAL PACKAGE^F^^0;4^K:$L(X)>30!($L(X)<3) X
"^DD",357.6,357.6,.04,1,0)
^.1
"^DD",357.6,357.6,.04,1,1,0)
357.6^C
"^DD",357.6,357.6,.04,1,1,1)
S ^IBE(357.6,"C",$E(X,1,30),DA)=""
"^DD",357.6,357.6,.04,1,1,2)
K ^IBE(357.6,"C",$E(X,1,30),DA)
"^DD",357.6,357.6,.04,1,1,"DT")
2921229
"^DD",357.6,357.6,.04,3)
Answer must be 3-30 characters in length.
"^DD",357.6,357.6,.04,21,0)
^^2^2^2951017^^
"^DD",357.6,357.6,.04,21,1,0)
This is a free text pointer to the package file. It serves only to
"^DD",357.6,357.6,.04,21,2,0)
document the custodial package of the data.
"^DD",357.6,357.6,.04,"DT")
2951017
"^DD",357.6,357.6,.05,0)
VARIABLE DATA?^S^0:NO;1:YES;^0;5^Q
"^DD",357.6,357.6,.05,.1)
DOES THE DATA VARY FROM PATIENT TO PATIENT?
"^DD",357.6,357.6,.05,3)
Enter YES if the data returned is variable, NO if the data is always the same.
"^DD",357.6,357.6,.05,21,0)
^^3^3^2930726^^^
"^DD",357.6,357.6,.05,21,1,0)
This field is used in the batch printing of encounter forms. The purpose
"^DD",357.6,357.6,.05,21,2,0)
is to avoid recomputing fields whose data does not change from patient to
"^DD",357.6,357.6,.05,21,3,0)
patient.
"^DD",357.6,357.6,.05,"DT")
2931124
"^DD",357.6,357.6,.06,0)
ACTION TYPE^RS^1:INPUT;2:DISPLAY;3:SELECTION;4:PRINT REPORT;^0;6^Q
"^DD",357.6,357.6,.06,3)
Is this interface for inputting data, displaying data to a form, for creating lists that will appear on a form, or for printing reports?
"^DD",357.6,357.6,.06,21,0)
^^10^10^2981216^^^^
"^DD",357.6,357.6,.06,21,1,0)

"^DD",357.6,357.6,.06,21,2,0)
Enter 1 for INPUT if the interface accepts data input from the user
"^DD",357.6,357.6,.06,21,3,0)
        and transmits the data to the appropriate package. 
"^DD",357.6,357.6,.06,21,4,0)
Enter 2 for DISPLAY if the interface retrieves data for display to a form.
"^DD",357.6,357.6,.06,21,5,0)
Enter 3 for SELECTION if the interface is for building a list to display
"^DD",357.6,357.6,.06,21,6,0)
        to a form.
"^DD",357.6,357.6,.06,21,7,0)
Enter 4 if the interface is for printing a report.
"^DD",357.6,357.6,.06,21,8,0)

"^DD",357.6,357.6,.06,21,9,0)
If the ACTION TYPE is SELECTION then the data type must be a record and
"^DD",357.6,357.6,.06,21,10,0)
the first piece must be the ID use to uniquely identify the selection.
"^DD",357.6,357.6,.06,23,0)
^^1^1^2981216^^^^
"^DD",357.6,357.6,.06,23,1,0)
 
"^DD",357.6,357.6,.06,"DT")
2950825
"^DD",357.6,357.6,.07,0)
DATA TYPE^S^1:SINGLE VALUE;2:RECORD;3:LIST OF SINGLE VALUES;4:LIST OF RECORDS;5:WORD PROCESSING;^0;7^Q
"^DD",357.6,357.6,.07,.1)
WHAT FORMAT WILL THE DATA BE IN?
"^DD",357.6,357.6,.07,3)
What format will the data be in?
"^DD",357.6,357.6,.07,21,0)
^^9^9^2981216^^
"^DD",357.6,357.6,.07,21,1,0)
Only applies to selection or display interfaces, both of which retrieve
"^DD",357.6,357.6,.07,21,2,0)
data for display to a form. It is the type of format the data should be
"^DD",357.6,357.6,.07,21,3,0)
in.
"^DD",357.6,357.6,.07,21,4,0)
 
"^DD",357.6,357.6,.07,21,5,0)
A single value is a string without pieces. A record is a set of strings
"^DD",357.6,357.6,.07,21,6,0)
concatenated together with "^" separating the pieces. A list is an
"^DD",357.6,357.6,.07,21,7,0)
indefinite number of values, each numbered, each containing the same type
"^DD",357.6,357.6,.07,21,8,0)
of information. A word processing data type will be in FM format.
"^DD",357.6,357.6,.07,21,9,0)
If the ACTION TYPE is SELECTION then the data type must be record.
"^DD",357.6,357.6,.07,"DT")
2930726
"^DD",357.6,357.6,.08,0)
PRINT COMPLETE^S^0:NO;1:YES;^0;8^Q
"^DD",357.6,357.6,.08,3)
If there is insufficient room on the form to print the data, should it be re-printed in full on a separate page?
"^DD",357.6,357.6,.08,21,0)
^^4^4^2930527^
"^DD",357.6,357.6,.08,21,1,0)
 
"^DD",357.6,357.6,.08,21,2,0)
This field is used to determine what should happen if the data does not
"^DD",357.6,357.6,.08,21,3,0)
fit in the space allocated to it on the form. If answered YES the data
"^DD",357.6,357.6,.08,21,4,0)
will be printed on another page.
"^DD",357.6,357.6,.08,"DT")
2930507
"^DD",357.6,357.6,.09,0)
AVAILABLE? (Y/N)^RS^0:NO;1:YES;^0;9^Q
"^DD",357.6,357.6,.09,3)
Is this package interface now available for use?
"^DD",357.6,357.6,.09,21,0)
^^3^3^2930527^
"^DD",357.6,357.6,.09,21,1,0)
 
"^DD",357.6,357.6,.09,21,2,0)
This field should be set to YES if the interface is available, NO if it is
"^DD",357.6,357.6,.09,21,3,0)
not available. Interfaces that are not available are not called.
"^DD",357.6,357.6,.09,"DT")
2921213
"^DD",357.6,357.6,.1,0)
HEALTH SUMMARY?^S^0:NO;1:YES;^0;10^Q
"^DD",357.6,357.6,.1,.1)
ARE YOU REQUESTING A HEALTH SUMMARY?
"^DD",357.6,357.6,.1,2.1)
S:Y=+Y Y=Y+1
"^DD",357.6,357.6,.1,3)
 Are you requesting a HEALTH SUMMARY to print?
"^DD",357.6,357.6,.1,21,0)
^^7^7^2930616^
"^DD",357.6,357.6,.1,21,1,0)
 
"^DD",357.6,357.6,.1,21,2,0)
This field will determine how to go about printing the report or form. It
"^DD",357.6,357.6,.1,21,3,0)
applies only to Package Interfaces of ACTION TYPE = PRINT REPORT. Health
"^DD",357.6,357.6,.1,21,4,0)
Summaries use the field HEALTH SUMMARY to determine the type of Health
"^DD",357.6,357.6,.1,21,5,0)
Summary to print. The process of printing Health Summaries dos not use the
"^DD",357.6,357.6,.1,21,6,0)
fields ENTRY POINT or ROUTINE, since all Health Summaries are printed in
"^DD",357.6,357.6,.1,21,7,0)
the same way.
"^DD",357.6,357.6,.1,"DT")
2930616
"^DD",357.6,357.6,.11,0)
TYPE OF HEALTH SUMMARY^*P142'^GMT(142,^0;11^S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",357.6,357.6,.11,3)
Which Health Summary do you want printed?
"^DD",357.6,357.6,.11,12)
EXCLUDES AD HOC HEALTH SUMMARIES
"^DD",357.6,357.6,.11,12.1)
S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION"""
"^DD",357.6,357.6,.11,21,0)
^^4^4^2970819^^
"^DD",357.6,357.6,.11,21,1,0)
 
"^DD",357.6,357.6,.11,21,2,0)
This identifies the Health Summary that should be printed when this
"^DD",357.6,357.6,.11,21,3,0)
Package Interface is invoked. It should be null unless the HEALTH SUMMARY?
"^DD",357.6,357.6,.11,21,4,0)
field #.1 is coded YES.
"^DD",357.6,357.6,.11,"DT")
2930617
"^DD",357.6,357.6,.12,0)
TOOLKIT MEMBER?^S^0:NO;1:YES;^0;12^Q
"^DD",357.6,357.6,.12,.1)
SHOULD THIS PACKAGE INTERFACE BE PART OF THE TOOLKIT?
"^DD",357.6,357.6,.12,3)
Enter YES if this PACKAGE INTERFACE was added by the package developers as part of the toolkit, enter NO otherwise.
"^DD",357.6,357.6,.12,21,0)
^^3^3^2950808^^
"^DD",357.6,357.6,.12,21,1,0)
 
"^DD",357.6,357.6,.12,21,2,0)
Package Interfaces that are developed for national use will be documented
"^DD",357.6,357.6,.12,21,3,0)
as being part of the toolkit.
"^DD",357.6,357.6,.12,"DT")
2950711
"^DD",357.6,357.6,.13,0)
PACKAGE INTERFACE FOR INPUT^*P357.6'^IBE(357.6,^0;13^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",357.6,357.6,.13,.1)
WHICH INTERFACE SHOULD THIS LIST USE FOR PASSING DATA TO THE DATA BASE?
"^DD",357.6,357.6,.13,3)
What interface should be used for inputting data entered on the selection list?
"^DD",357.6,357.6,.13,12)
Must be an available interfaces for accepting input from selection lists.
"^DD",357.6,357.6,.13,12.1)
S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S"""
"^DD",357.6,357.6,.13,21,0)
^^1^1^2970902^^^^
"^DD",357.6,357.6,.13,21,1,0)
Used to map scanned data to DHCP.
"^DD",357.6,357.6,.13,"DT")
2950825
"^DD",357.6,357.6,.14,0)
DYNAMIC SELECTIONS^S^0:NO;1:YES;^0;14^Q
"^DD",357.6,357.6,.14,3)
Only for selection routines. Enter YES if the Package Interface builds the selection list each time the form is printed.
"^DD",357.6,357.6,.14,21,0)
^^2^2^2950719^
"^DD",357.6,357.6,.14,21,1,0)
This is used to indicate whether the interface is used to build selection
"^DD",357.6,357.6,.14,21,2,0)
lists at print time.
"^DD",357.6,357.6,.14,"DT")
2941221
"^DD",357.6,357.6,.15,0)
DO NOT USE DFN AS A SUBSCRIPT^*S^0:NO;1:YES;^0;15^Q
"^DD",357.6,357.6,.15,3)
If the patient DFN should not be used as a subscript when passing data enter YES.
"^DD",357.6,357.6,.15,12)
If the action type is not OUTPUT ROUTINE then this field should not be set to NO.
"^DD",357.6,357.6,.15,12.1)
S DIC("S")="I (Y=1)!($P(^IBE(357.6,DA,0),U,6)=2)"
"^DD",357.6,357.6,.15,21,0)
^^6^6^2950413^^^^
"^DD",357.6,357.6,.15,21,1,0)
Originally, the patient DFN was used as a subscript when returning data
"^DD",357.6,357.6,.15,21,2,0)
for Package Interfaces of type output, but not for other types of
"^DD",357.6,357.6,.15,21,3,0)
interfaces. It is no longer necessary for any new Package Interface to use
"^DD",357.6,357.6,.15,21,4,0)
DFN as a subscript, but, to maintain compatibilty, output routines
"^DD",357.6,357.6,.15,21,5,0)
must set this field to YES if DFN is not to be used as a subscript. This
"^DD",357.6,357.6,.15,21,6,0)
field has no effect on other types of interfaces.
"^DD",357.6,357.6,.15,"DT")
2950413
"^DD",357.6,357.6,.16,0)
ALLOWED OBJECT USE^FX^^0;16^S X=$$UPPER^VALM1(X) K:$L(X)>4!("SMHP"'[$E(X,1))!("SMHP"'[$E(X,2))!("SMHP"'[$E(X,3))!("SMHP"'[$E(X,4)) X
"^DD",357.6,357.6,.16,3)

"^DD",357.6,357.6,.16,4)
D HELP7^IBDFU5A
"^DD",357.6,357.6,.16,21,0)
^^5^5^2950913^^^^
"^DD",357.6,357.6,.16,21,1,0)
This field applies only to package interfaces for input and is used to
"^DD",357.6,357.6,.16,21,2,0)
determine which package interfaces a particular type of form object may
"^DD",357.6,357.6,.16,21,3,0)
point to. Some combinations don't make sense. For example, it would not
"^DD",357.6,357.6,.16,21,4,0)
make sense to allow a multiple choice question to point to vitals, which
"^DD",357.6,357.6,.16,21,5,0)
is used to input data such as temperature and blood pressure.
"^DD",357.6,357.6,.16,"DT")
2950913
"^DD",357.6,357.6,.17,0)
ASK FOR ADDITIONAL NARRATIVE^S^0:NO;1:YES;^0;17^Q
"^DD",357.6,357.6,.17,21,0)
^^7^7^2951207^
"^DD",357.6,357.6,.17,21,1,0)
Enter whether users should be prompt for specifying the provider narrative
"^DD",357.6,357.6,.17,21,2,0)
that will be sent to PCE (and problem list) when creating a selection list.
"^DD",357.6,357.6,.17,21,3,0)
If this is answered no and the narrative is sent to PCE then the text as it
"^DD",357.6,357.6,.17,21,4,0)
appears on the form will be used as the provider narrative.
"^DD",357.6,357.6,.17,21,5,0)
 
"^DD",357.6,357.6,.17,21,6,0)
Generally only dianosis and clinical lexicon entries will want this field 
"^DD",357.6,357.6,.17,21,7,0)
set to Yes.
"^DD",357.6,357.6,.17,"DT")
2951207
"^DD",357.6,357.6,.18,0)
ASK FOR CLINICAL LEXICON^S^0:NO;1:YES;^0;18^Q
"^DD",357.6,357.6,.18,3)
Enter 'Yes' if you want to map entries from this interface to the clinical lexicon
"^DD",357.6,357.6,.18,21,0)
^^10^10^2960205^
"^DD",357.6,357.6,.18,21,1,0)
If this field is answered 'Yes' then users who are editing or creating
"^DD",357.6,357.6,.18,21,2,0)
selection lists based on this interface will be asked to map each entry
"^DD",357.6,357.6,.18,21,3,0)
(thought it is optional) to a clinical lexicon entry.  This is highly
"^DD",357.6,357.6,.18,21,4,0)
recommended for user who are scanning diagnosis entries and trying to 
"^DD",357.6,357.6,.18,21,5,0)
add entries to the Patients Problem list.
"^DD",357.6,357.6,.18,21,6,0)
 
"^DD",357.6,357.6,.18,21,7,0)
The primary purpose of this field is to allow sites who have built selection
"^DD",357.6,357.6,.18,21,8,0)
lists using the ICD9 Diagnosis file to map each entry to the clinical lexicon.
"^DD",357.6,357.6,.18,21,9,0)
The Problem List EP has recommended that each problem added to the problem
"^DD",357.6,357.6,.18,21,10,0)
list be associated with a clinical lexicon entry.
"^DD",357.6,357.6,.18,"DT")
2960205
"^DD",357.6,357.6,.19,0)
DQ REQUIRED^S^1:YES;^0;19^Q
"^DD",357.6,357.6,.19,21,0)
^^2^2^2960228^^
"^DD",357.6,357.6,.19,21,1,0)
Field used to determine if a data qualifier is required for this
"^DD",357.6,357.6,.19,21,2,0)
input interface.
"^DD",357.6,357.6,.19,"DT")
2960212
"^DD",357.6,357.6,.2,0)
ASK FOR CLINICAL REMINDERS^S^0:NO;1:YES;^0;20^Q
"^DD",357.6,357.6,.2,3)
If this package interface is for display of clinical reminders answer yes, otherwise answer no.
"^DD",357.6,357.6,.2,21,0)
^^2^2^2991216^^^^
"^DD",357.6,357.6,.2,21,1,0)
If this package interface is for display of clinical reminders answer 
"^DD",357.6,357.6,.2,21,2,0)
yes, otherwise answer no.
"^DD",357.6,357.6,.2,"DT")
2971002
"^DD",357.6,357.6,.21,0)
ASK FOR CPT MODIFIERS?^S^0:NO;1:YES;^0;21^Q
"^DD",357.6,357.6,.21,3)
If this package interface is to prompt for CPT Modifiers, answer yes, otherwise answer no.
"^DD",357.6,357.6,.21,21,0)
^^3^3^3000121^^^^
"^DD",357.6,357.6,.21,21,1,0)
ASK FOR CPT MODIFIERS field will be used when selecting CPT codes.
"^DD",357.6,357.6,.21,21,2,0)
If answered "YES" and data is a procedure, CPT Modifiers should be
"^DD",357.6,357.6,.21,21,3,0)
asked during Forms Design and Manual Data Entry.
"^DD",357.6,357.6,.21,"DT")
2990524
"^DD",357.6,357.6,1,0)
DESCRIPTION^357.61^^1;0
"^DD",357.6,357.6,1,21,0)
^^1^1^2950719^^^^
"^DD",357.6,357.6,1,21,1,0)
Should describe the data being exchanged by the package interface.
"^DD",357.6,357.6,2.01,0)
PIECE 1 DESCRIPTIVE NAME^F^^2;1^K:$L(X)>30!($L(X)<3) X
"^DD",357.6,357.6,2.01,.1)
WHAT IS THE FIRST PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",357.6,357.6,2.01,3)
Answer must be 3-30 characters in length.
"^DD",357.6,357.6,2.01,21,0)
^^3^3^2930527^
"^DD",357.6,357.6,2.01,21,1,0)
 
"^DD",357.6,357.6,2.01,21,2,0)
Should be a descriptive name of the first field in the record returned by
"^DD",357.6,357.6,2.01,21,3,0)
the interface.
"^DD",357.6,357.6,2.01,"DT")
2930726
"^DD",357.6,357.6,2.02,0)
PIECE 1 MAXIMUM LENGTH^NJ3,0^^2;2^K:+X'=X!(X>210)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,2.02,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",357.6,357.6,2.02,3)
Type a Number between 0 and 210, 0 Decimal Digits
"^DD",357.6,357.6,2.02,21,0)
^^3^3^2930527^
"^DD",357.6,357.6,2.02,21,1,0)
 
"^DD",357.6,357.6,2.02,21,2,0)
The maximum length of the first field of the record returned by the
"^DD",357.6,357.6,2.02,21,3,0)
interface.
"^DD",357.6,357.6,2.02,"DT")
2930726
"^DD",357.6,357.6,2.16,0)
PIECE 1 RECOMMENDED HEADER^F^^2;16^K:$L(X)>20!($L(X)<1) X
"^DD",357.6,357.6,2.16,3)
Answer must be 1-20 characters in length.
"^DD",357.6,357.6,2.16,21,0)
^^1^1^2950719^
"^DD",357.6,357.6,2.16,21,1,0)
The recommended header will be used as the default when designing a form.
"^DD",357.6,357.6,2.16,"DT")
2950417
"^DD",357.6,357.6,2.17,0)
IS PIECE 1 DISPLAYABLE?^S^0:NO;1:YES;^2;17^Q
"^DD",357.6,357.6,2.17,.1)
CAN THIS FIELD BE DISPLAYED TO THE USER?
"^DD",357.6,357.6,2.17,3)
The first piece of the returned record is reserved for the unique id of the selection. Enter no if it should not be displayed, for example, if it is a pointer.
"^DD",357.6,357.6,2.17,21,0)
^^3^3^2950719^^
"^DD",357.6,357.6,2.17,21,1,0)
This is used only for selection type interfaces. If NO, then the value can
"^DD",357.6,357.6,2.17,21,2,0)
not be displayed to the encounter form.  The first piece must contain the
"^DD",357.6,357.6,2.17,21,3,0)
unique id of the selection.
"^DD",357.6,357.6,2.17,"DT")
2930810
"^DD",357.6,357.6,2.18,0)
EXPORT SELECTIONS/CHOICES?^S^0:NO;1:YES;^2;18^Q
"^DD",357.6,357.6,2.18,3)
Enter NO if the ID returned by the PACKAGE INTERFACE is not constant between sites, for example, if it is a pointer. Otherwise answer YES.
"^DD",357.6,357.6,2.18,21,0)
^^8^8^2950825^
"^DD",357.6,357.6,2.18,21,1,0)
 
"^DD",357.6,357.6,2.18,21,2,0)
 
"^DD",357.6,357.6,2.18,21,3,0)
Applies to selection and input routines. Determines whether
"^DD",357.6,357.6,2.18,21,4,0)
selections appearing on selection lists and choices in a multiple choice
"^DD",357.6,357.6,2.18,21,5,0)
field will be exported along with the form that they appear on. The
"^DD",357.6,357.6,2.18,21,6,0)
import/export utility will not resolve pointers, so if the id used by
"^DD",357.6,357.6,2.18,21,7,0)
the package interface is a pointer that differs between sites
"^DD",357.6,357.6,2.18,21,8,0)
this field should contain NO.
"^DD",357.6,357.6,2.18,"DT")
2950825
"^DD",357.6,357.6,3,0)
USER LOOKUP^F^^3;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>240!($L(X)<1) X
"^DD",357.6,357.6,3,.1)
LIST OF WORDS TO MAKE LOOK-UPS EASIER
"^DD",357.6,357.6,3,1,0)
^.1
"^DD",357.6,357.6,3,1,1,0)
357.6^D^KWIC
"^DD",357.6,357.6,3,1,1,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^IBE(357.6,"D",I,DA)=""
"^DD",357.6,357.6,3,1,1,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^IBE(357.6,"D",I,DA)
"^DD",357.6,357.6,3,1,1,"%D",0)
^^3^3^2930409^^
"^DD",357.6,357.6,3,1,1,"%D",1,0)
 
"^DD",357.6,357.6,3,1,1,"%D",2,0)
This index is meant to assist the user in locating the correct package
"^DD",357.6,357.6,3,1,1,"%D",3,0)
interface needed to display a particular item of data to a form.
"^DD",357.6,357.6,3,1,1,"DT")
2930309
"^DD",357.6,357.6,3,3)
Enter words separated with spaces. They will be indexed to assist in lookup.
"^DD",357.6,357.6,3,4)
D LOOKUP^IBDF16
"^DD",357.6,357.6,3,21,0)
^^4^4^2940217^
"^DD",357.6,357.6,3,21,1,0)
 
"^DD",357.6,357.6,3,21,2,0)
This field is used to create a KWIC index for this file. The purpose is to
"^DD",357.6,357.6,3,21,3,0)
assist the user in locating the package interface he needs to display a
"^DD",357.6,357.6,3,21,4,0)
particular item of data to a form.
"^DD",357.6,357.6,3,"DT")
2930726
"^DD",357.6,357.6,4.01,0)
ENTRY ACTION^K^^4;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,4.01,3)
This is Standard MUMPS code.
"^DD",357.6,357.6,4.01,9)
@
"^DD",357.6,357.6,4.01,21,0)
^^3^3^2930527^
"^DD",357.6,357.6,4.01,21,1,0)
 
"^DD",357.6,357.6,4.01,21,2,0)
This code will be executed after the PROTECTED VARIABLES are newed, but
"^DD",357.6,357.6,4.01,21,3,0)
before the interface routine is called.
"^DD",357.6,357.6,4.01,"DT")
2930521
"^DD",357.6,357.6,5.01,0)
EXIT ACTION^K^^5;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,5.01,3)
This is Standard MUMPS code.
"^DD",357.6,357.6,5.01,9)
@
"^DD",357.6,357.6,5.01,21,0)
^^3^3^2930528^
"^DD",357.6,357.6,5.01,21,1,0)
 
"^DD",357.6,357.6,5.01,21,2,0)
This code will be executed after the interface routine is called.
"^DD",357.6,357.6,5.01,21,3,0)
The effect of the NEW done on the PROTECTED VARIABLES is still in effect.
"^DD",357.6,357.6,5.01,"DT")
2930518
"^DD",357.6,357.6,6,0)
PROTECTED LOCAL VARIABLES^357.66^^6;0
"^DD",357.6,357.6,6,21,0)
^^11^11^2950719^^^
"^DD",357.6,357.6,6,21,1,0)
 
"^DD",357.6,357.6,6,21,2,0)
This is a list of variables that should be newed before the entry action
"^DD",357.6,357.6,6,21,3,0)
or calling the interface routine. It is protection against interfaces that
"^DD",357.6,357.6,6,21,4,0)
alter or kill variables, or entry actions that do so. Note that REQUIRED
"^DD",357.6,357.6,6,21,5,0)
VARIABLES should not also be PROTECTED VARIABLES. If an interface routine
"^DD",357.6,357.6,6,21,6,0)
changes a required variable, however, there is a way to protect it.
"^DD",357.6,357.6,6,21,7,0)
Supposing, for example, DFN is killed by the interface. This will protect
"^DD",357.6,357.6,6,21,8,0)
it:
"^DD",357.6,357.6,6,21,9,0)
     PROTECTED VARIABLE:   IBDFN
"^DD",357.6,357.6,6,21,10,0)
     ENTRY ACTION:  S IBDFN=DFN
"^DD",357.6,357.6,6,21,11,0)
     EXIT ACTION:   S DFN=IBDFN
"^DD",357.6,357.6,7,0)
REQUIRED LOCAL VARIABLES^357.67^^7;0
"^DD",357.6,357.6,7,21,0)
^^4^4^2930528^
"^DD",357.6,357.6,7,21,1,0)
 
"^DD",357.6,357.6,7,21,2,0)
The interface may require inputs. This field is a list of the required
"^DD",357.6,357.6,7,21,3,0)
local variables. The interface will not be called unless the variables are
"^DD",357.6,357.6,7,21,4,0)
determined to exist.
"^DD",357.6,357.6,9,0)
PCE DIM INPUT TRANSFORM^K^^9;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,9,3)
The input transform should transform X to the value that should be passed.
"^DD",357.6,357.6,9,9)
@
"^DD",357.6,357.6,9,21,0)
^^3^3^2960401^^
"^DD",357.6,357.6,9,21,1,0)
Used to transform X, the identifier stored with the form object, to the
"^DD",357.6,357.6,9,21,2,0)
form that should be passed to the PCE Device Interface Module. It may, for
"^DD",357.6,357.6,9,21,3,0)
example, transform a code to an ien.
"^DD",357.6,357.6,9,"DT")
2960401
"^DD",357.6,357.6,10,0)
HELP TEXT^F^^10;1^K:$L(X)>245!($L(X)<1) X
"^DD",357.6,357.6,10,3)
This should provide some help to the user who is trying to enter a value associated with a bubble.
"^DD",357.6,357.6,10,21,0)
^^2^2^2950817^^^
"^DD",357.6,357.6,10,21,1,0)
This should provide some help to the user who is trying to enter a value
"^DD",357.6,357.6,10,21,2,0)
associated with a bubble.
"^DD",357.6,357.6,10,"DT")
2950522
"^DD",357.6,357.6,11,0)
VALIDATOR^K^^11;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,11,3)
This is Standard MUMPS code will kill X if X no longer identifies a valid code.
"^DD",357.6,357.6,11,9)
@
"^DD",357.6,357.6,11,21,0)
^^7^7^2981222^^
"^DD",357.6,357.6,11,21,1,0)
This field is used to validate codes currently on a form. The variable X
"^DD",357.6,357.6,11,21,2,0)
should be set to the identifier that was returned by the Package
"^DD",357.6,357.6,11,21,3,0)
Interface. For selection interfaces, the identifier is always piece 1 of
"^DD",357.6,357.6,11,21,4,0)
the 0 node of the entry in the selection list. Xecuting this field will
"^DD",357.6,357.6,11,21,5,0)
result in X being killed if the value is not valid. This is used by the
"^DD",357.6,357.6,11,21,6,0)
maintanance utility, for example, to find CPT codes that have been
"^DD",357.6,357.6,11,21,7,0)
inactivated.
"^DD",357.6,357.6,11,"DT")
2950908
"^DD",357.6,357.6,11.01,0)
DATA TYPE OF INPUT^S^1:FREE TEXT;2:INTEGER;3:FLOATING POINT;^11;1^Q
"^DD",357.6,357.6,11.01,3)
Only applies if the ACTION TYPE is INPUT ROUTINE. What type of data will be input?
"^DD",357.6,357.6,11.01,"DT")
2940916
"^DD",357.6,357.6,11.02,0)
LENGTH OF INPUT^NJ4,0^^11;2^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,11.02,3)
What is the maximum length for this type of data?
"^DD",357.6,357.6,11.02,"DT")
2940916
"^DD",357.6,357.6,11.03,0)
PICTURE FOR INPUT^F^^11;3^K:$L(X)>50!($L(X)<1) X
"^DD",357.6,357.6,11.03,3)
Only applies if the ACTION TYPE is INPUT ROUTINE.
"^DD",357.6,357.6,11.03,"DT")
2940916
"^DD",357.6,357.6,12.01,0)
PCE DIM NODE^F^^12;1^K:$L(X)>30!($L(X)<1) X
"^DD",357.6,357.6,12.01,3)
What node will be used to pass the data?
"^DD",357.6,357.6,12.01,21,0)
^^1^1^2951017^^
"^DD",357.6,357.6,12.01,21,1,0)
The node used to pass the data to PCE, using the PCE DEVICE INTERFACE MODULE.
"^DD",357.6,357.6,12.01,"DT")
2951017
"^DD",357.6,357.6,12.02,0)
PCE DIM PIECE, VALUE^NJ2,0^^12;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.02,3)
What piece should be used to pass the value?
"^DD",357.6,357.6,12.02,21,0)
^^1^1^2951017^^^
"^DD",357.6,357.6,12.02,21,1,0)
The piece in the PXCA node used to pass the input value.
"^DD",357.6,357.6,12.02,"DT")
2951017
"^DD",357.6,357.6,12.03,0)
PCE DIM PIECE, NARRATIVE^NJ2,0^^12;3^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.03,3)
What piece should be used to pass the text displayed on the form?
"^DD",357.6,357.6,12.03,21,0)
^^1^1^2950317^^^
"^DD",357.6,357.6,12.03,21,1,0)
The piece in the PCXA node used to pass the text displayed on the form.
"^DD",357.6,357.6,12.03,"DT")
2951017
"^DD",357.6,357.6,12.04,0)
PCE DIM PIECE, HEADER^NJ2,0^^12;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.04,3)
What piece should be used to pass the header displayed on the form?
"^DD",357.6,357.6,12.04,21,0)
^^2^2^2951017^
"^DD",357.6,357.6,12.04,21,1,0)
The piece on the node specified by the PCE DIM that the header is mapped
"^DD",357.6,357.6,12.04,21,2,0)
to.
"^DD",357.6,357.6,12.04,"DT")
2951017
"^DD",357.6,357.6,12.05,0)
PCE DIM PIECE, DATA QUALIFIER^NJ2,0^^12;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.05,3)
What piece should be used to pass the data qualifier?
"^DD",357.6,357.6,12.05,21,0)
^^1^1^2971028^^
"^DD",357.6,357.6,12.05,21,1,0)
The piece of the PXCA node where the data modifier belongs.
"^DD",357.6,357.6,12.05,"DT")
2951017
"^DD",357.6,357.6,12.06,0)
PCE DIM PIECE, QUANTITY^NJ2,0^^12;6^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.06,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",357.6,357.6,12.06,21,0)
^^2^2^2961031^^
"^DD",357.6,357.6,12.06,21,1,0)
An entry in this field indicates which piece of the array the quantity
"^DD",357.6,357.6,12.06,21,2,0)
should be passed on when sending data to PCE.
"^DD",357.6,357.6,12.06,"DT")
2961015
"^DD",357.6,357.6,13,0)
ALLOWABLE QUALIFIERS^357.613V^^13;0
"^DD",357.6,357.6,13,21,0)
^^2^2^2971028^^^
"^DD",357.6,357.6,13,21,1,0)
This mulitiple contains the list of qualifiers that may apply to the
"^DD",357.6,357.6,13,21,2,0)
data.
"^DD",357.6,357.6,14,0)
PCE DIM OUTPUT TRANSFORM^K^^14;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,14,3)
This should change Y, the value to be passed, to a value suitable for display.
"^DD",357.6,357.6,14,9)
@
"^DD",357.6,357.6,14,21,0)
^^3^3^2990302^^^
"^DD",357.6,357.6,14,21,1,0)
This transform should set Y, the value to be passed to the PCE 
"^DD",357.6,357.6,14,21,2,0)
Device Interface Module (DIM), to a value that is suitable for
"^DD",357.6,357.6,14,21,3,0)
display. It may, for example, change an ien to a code.
"^DD",357.6,357.6,14,"DT")
2960401
"^DD",357.6,357.6,15,0)
DATA DESCRIPTION^357.615I^^15;0
"^DD",357.6,357.6,15,21,0)
^^2^2^2950330^
"^DD",357.6,357.6,15,21,1,0)
For interfaces that return records, this multiple stores information on
"^DD",357.6,357.6,15,21,2,0)
the fields, other than the first field.
"^DD",357.6,357.6,16.1,0)
ALLOW INPUT OF NARRATIVE?^S^n:NO;o:OPTIONAL;r:REQUIRED;^16;1^Q
"^DD",357.6,357.6,16.1,3)
Should the user be allowed to enter a narrative? Answer n=NO, o=OPTIONAL, r=REQUIRED
"^DD",357.6,357.6,16.1,21,0)
^^2^2^2950915^
"^DD",357.6,357.6,16.1,21,1,0)
For selection interfaces, this field determines whether a narrative is
"^DD",357.6,357.6,16.1,21,2,0)
allowed by the PCE Generic Device Interface.
"^DD",357.6,357.6,16.1,"DT")
2950421
"^DD",357.6,357.6,16.2,0)
NARRATIVE DATA TYPE^P359.1'^IBE(359.1,^16;2^Q
"^DD",357.6,357.6,16.2,3)
What data type definition describes the narrative?
"^DD",357.6,357.6,16.2,21,0)
^^2^2^2950719^
"^DD",357.6,357.6,16.2,21,1,0)
This determines, among other things, how much space to allocate for the
"^DD",357.6,357.6,16.2,21,2,0)
narrative.
"^DD",357.6,357.6,16.2,"DT")
2950426
"^DD",357.6,357.6,16.3,0)
NARRATIVE HEADER^F^^16;3^K:$L(X)>40!($L(X)<1) X
"^DD",357.6,357.6,16.3,3)
Answer must be 1-40 characters in length.
"^DD",357.6,357.6,16.3,21,0)
^^1^1^2950825^
"^DD",357.6,357.6,16.3,21,1,0)
Used to label the narrative field.
"^DD",357.6,357.6,16.3,"DT")
2950815
"^DD",357.6,357.6,16.5,0)
ALLOW INPUT OF PRIMARY VALUE?^S^n:NO;o:OPTIONAL;r:REQUIRED;^16;5^Q
"^DD",357.6,357.6,16.5,3)
Should a code be entered? n=NO, o=OPTIONAL, r=REQUIRED
"^DD",357.6,357.6,16.5,21,0)
^^2^2^2950915^
"^DD",357.6,357.6,16.5,21,1,0)
For selectin interfaces this determines whether a value, other than a
"^DD",357.6,357.6,16.5,21,2,0)
narrative, can be entered.
"^DD",357.6,357.6,16.5,"DT")
2950426
"^DD",357.6,357.6,16.6,0)
PRIMARY VALUE DATA TYPE^P359.1'^IBE(359.1,^16;6^Q
"^DD",357.6,357.6,16.6,3)
What type of data is the primary value?
"^DD",357.6,357.6,16.6,21,0)
^^2^2^2950915^
"^DD",357.6,357.6,16.6,21,1,0)
For selection interfaces this determines, among other things, the data
"^DD",357.6,357.6,16.6,21,2,0)
type of the value to be entered.
"^DD",357.6,357.6,16.6,"DT")
2950426
"^DD",357.6,357.6,16.7,0)
PRIMARY VALUE HEADER^F^^16;7^K:$L(X)>40!($L(X)<1) X
"^DD",357.6,357.6,16.7,3)
Answer must be 1-40 characters in length.
"^DD",357.6,357.6,16.7,21,0)
^^1^1^2950815^
"^DD",357.6,357.6,16.7,21,1,0)
Used to label the primary value field.
"^DD",357.6,357.6,16.7,"DT")
2950815
"^DD",357.6,357.6,16.8,0)
ALLOW MULTIPLIERS^S^1:YES;^16;8^Q
"^DD",357.6,357.6,16.8,3)
Enter yes if this interface will allow entry of quantity at form development time.
"^DD",357.6,357.6,16.8,21,0)
^^3^3^2961031^^
"^DD",357.6,357.6,16.8,21,1,0)
For selection interfaces, this determines whether 'quantity' should be
"^DD",357.6,357.6,16.8,21,2,0)
asked at form development time to pass multiple occurrences of a selection
"^DD",357.6,357.6,16.8,21,3,0)
to PCE.
"^DD",357.6,357.6,16.8,"DT")
2961008
"^DD",357.6,357.6,16.9,0)
ALLOW INPUT OF MULTIPLE CODES?^S^1:YES;^16;9^Q
"^DD",357.6,357.6,16.9,3)
Enter a 1 for 'YES'.
"^DD",357.6,357.6,16.9,21,0)
^^4^4^2961216^^^^
"^DD",357.6,357.6,16.9,21,1,0)
Enter a one in this field if the users will be allowed to add more than
"^DD",357.6,357.6,16.9,21,2,0)
one code to pass along to PCE when one entry is bubbled.
"^DD",357.6,357.6,16.9,21,3,0)
Data in this field REQUIRES that field 17 be populated with mumps code
"^DD",357.6,357.6,16.9,21,4,0)
that will allow selection of the code if the entry is edited.
"^DD",357.6,357.6,16.9,"DT")
2961021
"^DD",357.6,357.6,17,0)
SELECTOR^K^^17;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,17,3)
Enter mumps code that will allow the form designer to add a choice to a multiple choice field.
"^DD",357.6,357.6,17,9)
@
"^DD",357.6,357.6,17,21,0)
^^9^9^2951208^^^
"^DD",357.6,357.6,17,21,1,0)
This field only applies to input interfaces. It is executed as by an input
"^DD",357.6,357.6,17,21,2,0)
transform when creating a multiple choice field. It should:
"^DD",357.6,357.6,17,21,3,0)
1) Kill X if an nothing is selected, otherwise set X to a value suitable
"^DD",357.6,357.6,17,21,4,0)
for display, perhaps the code.
"^DD",357.6,357.6,17,21,5,0)
2) Set IBLABEL to a suitable label for the choice.
"^DD",357.6,357.6,17,21,6,0)
3) Set IBID to an identifier. The identifier should ideally be exportable,
"^DD",357.6,357.6,17,21,7,0)
meaning the same from site to site. This usually means a coded value
"^DD",357.6,357.6,17,21,8,0)
rather than an ien. The identfier should match that of a corresponding
"^DD",357.6,357.6,17,21,9,0)
selection interface, if there is one.
"^DD",357.6,357.6,17,"DT")
2950908
"^DD",357.6,357.6,18,0)
MANUAL DATA ENTRY ROUTINE^K^^18;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,18,3)
Enter the code to be executed during manual data entry for this interface.  This is Standard MUMPS code.
"^DD",357.6,357.6,18,9)
@
"^DD",357.6,357.6,18,21,0)
^^10^10^2951208^
"^DD",357.6,357.6,18,21,1,0)
Enter the code to be executed to do manual data entry for this interface.
"^DD",357.6,357.6,18,21,2,0)
 
"^DD",357.6,357.6,18,21,3,0)
This field should only be completed for input package interfaces.  This
"^DD",357.6,357.6,18,21,4,0)
code will be executed to provide quick data entry for a user trying to
"^DD",357.6,357.6,18,21,5,0)
input data for a form.  It is expected that the output of this field will
"^DD",357.6,357.6,18,21,6,0)
be used to format the PXCA array prior to calling PCE to file the data
"^DD",357.6,357.6,18,21,7,0)
for the encounter.
"^DD",357.6,357.6,18,21,8,0)

"^DD",357.6,357.6,18,21,9,0)
Developers writing routines for this entry should provide a roll and scroll
"^DD",357.6,357.6,18,21,10,0)
interface for manaul entry of items only on the form.
"^DD",357.6,357.6,18,"DT")
2951208
"^DD",357.6,357.6,19,0)
EXTERNAL DISPLAY VALUES^K^^19;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,19,3)
This is Standard MUMPS code.
"^DD",357.6,357.6,19,9)
@
"^DD",357.6,357.6,19,21,0)
^^5^5^2960228^^^^
"^DD",357.6,357.6,19,21,1,0)
Executable code used to translate the internal value that is to
"^DD",357.6,357.6,19,21,2,0)
be passed to PCE into its external value for display purposes.  It
"^DD",357.6,357.6,19,21,3,0)
is used by the data validation routines to display the external
"^DD",357.6,357.6,19,21,4,0)
values and descriptions of what is to be passed, to the
"^DD",357.6,357.6,19,21,5,0)
user for verification.
"^DD",357.6,357.6,19,"DT")
2960214
"^DD",357.6,357.6,20,0)
PASS DQ AS VALUE^S^1:YES;^20;1^Q
"^DD",357.6,357.6,20,3)
Enter Yes if the Data Qualifier should be passed as the Value when sending data to PCE.
"^DD",357.6,357.6,20,21,0)
^^7^7^2961031^^
"^DD",357.6,357.6,20,21,1,0)
If the value of the Data Qualifier shall be passed to PCE as the VALUE,
"^DD",357.6,357.6,20,21,2,0)
this field should be set to one.  Doing so will prevent the data in the
"^DD",357.6,357.6,20,21,3,0)
VALUE from populating the PCE DIM NODE, but instead, will allow the Data
"^DD",357.6,357.6,20,21,4,0)
Qualifier to pass as the VALUE.
"^DD",357.6,357.6,20,21,5,0)
This is used mostly for YES/NO Data Qualifiers, where the value may
"^DD",357.6,357.6,20,21,6,0)
be a question, and the Data Qualifier Value, if bubbled, is the value
"^DD",357.6,357.6,20,21,7,0)
that must be placed on the PCE DIM NODE.
"^DD",357.6,357.6,20,"DT")
2961001
"^DD",357.6,357.6,21,0)
PCE DIM PIECE, VARIABLE VALUE^K^^21;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,21,3)
This is Standard MUMPS code.
"^DD",357.6,357.6,21,9)
@
"^DD",357.6,357.6,21,21,0)
^^7^7^2961031^^^
"^DD",357.6,357.6,21,21,1,0)
This field should be populated when the PCE DIM PIECE VALUE is not
"^DD",357.6,357.6,21,21,2,0)
constant.  If the value of that field is dependent upon specific conditions,
"^DD",357.6,357.6,21,21,3,0)
those conditions may be evaluated by placing the MUMPS code in this
"^DD",357.6,357.6,21,21,4,0)
field.  Ultimately, the code should return a value that will be used as
"^DD",357.6,357.6,21,21,5,0)
the PCE DIM PIECE VALUE.  If the return value is null, the original
"^DD",357.6,357.6,21,21,6,0)
PCE DIM PIECE VALUE field will be used to determine the piece location
"^DD",357.6,357.6,21,21,7,0)
to pass the VALUE on.
"^DD",357.6,357.6,21,"DT")
2961001
"^DD",357.6,357.61,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",357.6,357.61,0,"DT")
2921119
"^DD",357.6,357.61,0,"NM","DESCRIPTION")

"^DD",357.6,357.61,0,"UP")
357.6
"^DD",357.6,357.61,.01,0)
/6^W^^0;1^Q
"^DD",357.6,357.61,.01,3)
Enter a description of the data being exchanged.
"^DD",357.6,357.61,.01,21,0)
^^1^1^2950719^^
"^DD",357.6,357.61,.01,21,1,0)
This should describe the data being exchanged b the package interface.
"^DD",357.6,357.61,.01,"DT")
2930210
"^DD",357.6,357.613,0)
ALLOWABLE QUALIFIERS SUB-FIELD^^.08^7
"^DD",357.6,357.613,0,"DT")
2990304
"^DD",357.6,357.613,0,"IX","B",357.613,.01)

"^DD",357.6,357.613,0,"NM","ALLOWABLE QUALIFIERS")

"^DD",357.6,357.613,0,"UP")
357.6
"^DD",357.6,357.613,.01,0)
ALLOWABLE QUALIFIERS^MV^^0;1^Q
"^DD",357.6,357.613,.01,1,0)
^.1
"^DD",357.6,357.613,.01,1,1,0)
357.613^B
"^DD",357.6,357.613,.01,1,1,1)
S ^IBE(357.6,DA(1),13,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.613,.01,1,1,2)
K ^IBE(357.6,DA(1),13,"B",$E(X,1,30),DA)
"^DD",357.6,357.613,.01,1,1,3)
Required Index for Variable Pointer
"^DD",357.6,357.613,.01,3)
Which qualifiers can apply to the data?
"^DD",357.6,357.613,.01,21,0)
^^1^1^2950814^^
"^DD",357.6,357.613,.01,21,1,0)
A qualifier that can be used by this package interface.
"^DD",357.6,357.613,.01,"DT")
2950426
"^DD",357.6,357.613,.01,"V",0)
^.12P^2^2
"^DD",357.6,357.613,.01,"V",1,0)
357.98^DATA QUALIFIER^1^Q^n^n
"^DD",357.6,357.613,.01,"V",2,0)
359.1^TYPE OF DATA^2^D^n^n
"^DD",357.6,357.613,.03,0)
INDEPENDENT MAPPING INFO?^RS^0:NO;1:YES;^0;3^Q
"^DD",357.6,357.613,.03,3)
YES means that fields on the form associated with this qualifier will have its own rules for entering the data to the database.
"^DD",357.6,357.613,.03,21,0)
^^1^1^2951017^
"^DD",357.6,357.613,.03,21,1,0)
YES means that data can be mapped into the PCE DIM based on the qualifier.
"^DD",357.6,357.613,.03,"DT")
2950426
"^DD",357.6,357.613,.04,0)
PCE DIM NODE^F^^0;4^K:$L(X)>30!($L(X)<1) X
"^DD",357.6,357.613,.04,3)
What node should the qualifier be placed on?
"^DD",357.6,357.613,.04,21,0)
^^1^1^2971028^^^
"^DD",357.6,357.613,.04,21,1,0)
The node where the data should be placed.
"^DD",357.6,357.613,.04,"DT")
2951017
"^DD",357.6,357.613,.05,0)
PCE DIM PIECE, VALUE^NJ2,0^^0;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.613,.05,3)
What piece should the primary value be located?
"^DD",357.6,357.613,.05,21,0)
^^1^1^2950719^
"^DD",357.6,357.613,.05,21,1,0)
The piece on the node where the value should be placed.
"^DD",357.6,357.613,.05,"DT")
2951017
"^DD",357.6,357.613,.06,0)
PCE GDI PIECE, DISPLAYED TEXT^NJ2,0^^0;6^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.613,.06,3)
What piece should be used to pass the text displayed on the form?
"^DD",357.6,357.613,.06,"DT")
2950317
"^DD",357.6,357.613,.07,0)
PCE DIM PIECE, HEADER^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.613,.07,3)
What piece should the header be located on?
"^DD",357.6,357.613,.07,21,0)
^^1^1^2951017^^
"^DD",357.6,357.613,.07,21,1,0)
The piece on the node where the associated header should be placed.
"^DD",357.6,357.613,.07,"DT")
2951017
"^DD",357.6,357.613,.08,0)
PCE DIM PIECE, QUALIFIER^NJ2,0^^0;8^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.613,.08,3)
What piece should the qualifier be located on?
"^DD",357.6,357.613,.08,21,0)
^^1^1^2971028^^
"^DD",357.6,357.613,.08,21,1,0)
The piece where the qualifier should go.
"^DD",357.6,357.613,.08,"DT")
2951017
"^DD",357.6,357.615,0)
DATA DESCRIPTION SUB-FIELD^^.05^5
"^DD",357.6,357.615,0,"DT")
2950417
"^DD",357.6,357.615,0,"ID","WRITE")
D EN^DDIOL("   PIECE="_$P(^(0),U,3),"","?0")
"^DD",357.6,357.615,0,"IX","B",357.615,.01)

"^DD",357.6,357.615,0,"IX","C",357.615,.03)

"^DD",357.6,357.615,0,"NM","DATA DESCRIPTION")

"^DD",357.6,357.615,0,"UP")
357.6
"^DD",357.6,357.615,.01,0)
DATA^MF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",357.6,357.615,.01,1,0)
^.1
"^DD",357.6,357.615,.01,1,1,0)
357.615^B
"^DD",357.6,357.615,.01,1,1,1)
S ^IBE(357.6,DA(1),15,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.615,.01,1,1,2)
K ^IBE(357.6,DA(1),15,"B",$E(X,1,30),DA)
"^DD",357.6,357.615,.01,3)
Enter a descriptive name for this data field, up to 30 characters.
"^DD",357.6,357.615,.01,21,0)
^^1^1^2960730^^
"^DD",357.6,357.615,.01,21,1,0)
A descriptive name for the data.
"^DD",357.6,357.615,.01,"DT")
2950320
"^DD",357.6,357.615,.02,0)
MAXIMUM LENGTH^RNJ3,0^^0;2^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.615,.02,3)
What is the maximum length of this field?
"^DD",357.6,357.615,.02,21,0)
^^1^1^2950719^
"^DD",357.6,357.615,.02,21,1,0)
The maximum length of the data.
"^DD",357.6,357.615,.02,"DT")
2950320
"^DD",357.6,357.615,.03,0)
PIECE^NJ1,0X^^0;3^K:+X'=X!(X>8)!(X<2)!(X?.E1"."1N.N)!($D(^IBE(357.6,D0,15,"C",X))) X
"^DD",357.6,357.615,.03,1,0)
^.1
"^DD",357.6,357.615,.03,1,1,0)
357.615^C
"^DD",357.6,357.615,.03,1,1,1)
S ^IBE(357.6,DA(1),15,"C",$E(X,1,30),DA)=""
"^DD",357.6,357.615,.03,1,1,2)
K ^IBE(357.6,DA(1),15,"C",$E(X,1,30),DA)
"^DD",357.6,357.615,.03,1,1,"%D",0)
^^1^1^2950320^
"^DD",357.6,357.615,.03,1,1,"%D",1,0)
Indexes the field by piece.
"^DD",357.6,357.615,.03,1,1,"DT")
2950320
"^DD",357.6,357.615,.03,3)
In the returned record, which piece will this field be?
"^DD",357.6,357.615,.03,21,0)
^^2^2^2950918^^
"^DD",357.6,357.615,.03,21,1,0)
The piece that the data will be returned as. Doesn't allow
"^DD",357.6,357.615,.03,21,2,0)
piece 1 because that is stored in field #2.01.
"^DD",357.6,357.615,.03,"DT")
2950407
"^DD",357.6,357.615,.04,0)
ANNEX NODE^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",357.6,357.615,.04,3)
You can optionally specify the subscript to store the data. Use this when the entire record won't fit on one node.
"^DD",357.6,357.615,.04,21,0)
^^2^2^2950719^
"^DD",357.6,357.615,.04,21,1,0)
In case all the returned data can not be returned on a single node an
"^DD",357.6,357.615,.04,21,2,0)
annex node can be specified.
"^DD",357.6,357.615,.04,"DT")
2950320
"^DD",357.6,357.615,.05,0)
RECOMMENDED HEADER^F^^0;5^K:$L(X)>40!($L(X)<1) X
"^DD",357.6,357.615,.05,3)
Answer must be 1-40 characters in length.
"^DD",357.6,357.615,.05,21,0)
^^1^1^2950719^^
"^DD",357.6,357.615,.05,21,1,0)
The recommended header will be used as the default when designing a form.
"^DD",357.6,357.615,.05,"DT")
2950417
"^DD",357.6,357.66,0)
PROTECTED LOCAL VARIABLES SUB-FIELD^^.01^1
"^DD",357.6,357.66,0,"DT")
2930608
"^DD",357.6,357.66,0,"IX","B",357.66,.01)

"^DD",357.6,357.66,0,"NM","PROTECTED LOCAL VARIABLES")

"^DD",357.6,357.66,0,"UP")
357.6
"^DD",357.6,357.66,.01,0)
PROTECTED LOCAL VARIABLES^MFX^^0;1^K:'$$VARIABLE^IBDFU5(X) X
"^DD",357.6,357.66,.01,1,0)
^.1
"^DD",357.6,357.66,.01,1,1,0)
357.66^B
"^DD",357.6,357.66,.01,1,1,1)
S ^IBE(357.6,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.66,.01,1,1,2)
K ^IBE(357.6,DA(1),6,"B",$E(X,1,30),DA)
"^DD",357.6,357.66,.01,3)
Enter variables that should be NEWED before the entry action or calling the interface.
"^DD",357.6,357.66,.01,21,0)
^^3^3^2950426^^
"^DD",357.6,357.66,.01,21,1,0)
 
"^DD",357.6,357.66,.01,21,2,0)
A list of variables that should be newed before the entry action or
"^DD",357.6,357.66,.01,21,3,0)
calling the interface.
"^DD",357.6,357.66,.01,"DT")
2930608
"^DD",357.6,357.67,0)
REQUIRED LOCAL VARIABLES SUB-FIELD^^.01^1
"^DD",357.6,357.67,0,"DT")
2930521
"^DD",357.6,357.67,0,"IX","B",357.67,.01)

"^DD",357.6,357.67,0,"NM","REQUIRED LOCAL VARIABLES")

"^DD",357.6,357.67,0,"UP")
357.6
"^DD",357.6,357.67,.01,0)
REQUIRED LOCAL VARIABLE^MFX^^0;1^K:'$$VARIABLE^IBDFU5(X) X
"^DD",357.6,357.67,.01,1,0)
^.1
"^DD",357.6,357.67,.01,1,1,0)
357.67^B
"^DD",357.6,357.67,.01,1,1,1)
S ^IBE(357.6,DA(1),7,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.67,.01,1,1,2)
K ^IBE(357.6,DA(1),7,"B",$E(X,1,30),DA)
"^DD",357.6,357.67,.01,3)
Enter any variables that must exist before the Package Interface routine is called.
"^DD",357.6,357.67,.01,21,0)
^^4^4^2930528^
"^DD",357.6,357.67,.01,21,1,0)
 
"^DD",357.6,357.67,.01,21,2,0)
A variable that is required input to the interface routine. The interface
"^DD",357.6,357.67,.01,21,3,0)
routine will not be called if all of the required variables are not
"^DD",357.6,357.67,.01,21,4,0)
defined.
"^DD",357.6,357.67,.01,"DT")
2930521
"^DIC",357.6,357.6,0)
PACKAGE INTERFACE^357.6IO
"^DIC",357.6,357.6,0,"GL")
^IBE(357.6,
"^DIC",357.6,357.6,"%D",0)
^^17^17^2950913^^^
"^DIC",357.6,357.6,"%D",1,0)
This file contains a description of all of the interfaces with other packages.
"^DIC",357.6,357.6,"%D",2,0)
The form will invoke the proper interface routines by doing a lookup on
"^DIC",357.6,357.6,"%D",3,0)
this file and then calling the routine by indirection. The
"^DIC",357.6,357.6,"%D",4,0)
Data will be exchanged between the encounter form utilities and other
"^DIC",357.6,357.6,"%D",5,0)
packages by putting the data in at @IBARY. Interfaces that pass a single
"^DIC",357.6,357.6,"%D",6,0)
value or record will will reference data as in: S DATA=@IBARY. Interfaces
"^DIC",357.6,357.6,"%D",7,0)
that pass lists of records or values will reference the data as in:
"^DIC",357.6,357.6,"%D",8,0)
S DATA=@IBARY@(<number of item on the list>).
"^DIC",357.6,357.6,"%D",9,0)
 
"^DIC",357.6,357.6,"%D",10,0)
Note that multiple entries in this file can have the same entry points
"^DIC",357.6,357.6,"%D",11,0)
into routines. This is for efficiency purposes. For example, patient name,
"^DIC",357.6,357.6,"%D",12,0)
DOB and sex are all located on the same node of the Patient file. Each of
"^DIC",357.6,357.6,"%D",13,0)
these items of data can have its own entry in the Package Interface file,
"^DIC",357.6,357.6,"%D",14,0)
but by using the same entry point there is a savings because all of the
"^DIC",357.6,357.6,"%D",15,0)
data on that node can be obtained at once. The routine that invokes the
"^DIC",357.6,357.6,"%D",16,0)
entry points keeps track of those already invoked so that they are not
"^DIC",357.6,357.6,"%D",17,0)
repeated.
"^DIC",357.6,"B","PACKAGE INTERFACE",357.6)

**END**
**END**

$TXT Created by FORT,WALLY at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on Wednesday, 05/02/07 at 08:30
=============================================================================
Run Date: MAY 03, 2007                     Designation: XU*8*437
Package : XU - KERNEL                         Priority: EMERGENCY
Version : 8       SEQ #368                      Status: Released
                  Compliance Date: MAY 10, 2007
=============================================================================

Associated patches: (v)XU*8*55     <<= must be installed BEFORE `XU*8*437'
                    (v)XU*8*400    <<= must be installed BEFORE `XU*8*437'
                    (v)XU*8*404    <<= must be installed BEFORE `XU*8*437'
                    (v)XU*8*419    <<= must be installed BEFORE `XU*8*437'

Subject: CAPRI single sign on and other fixes

Category: 
  - Routine
  - Data Dictionary

Description:
============

 Patch Tracking #: 45347401
 Test Sites: Oklahoma VAMC, Kansas City VAMC, Amarillo VAMC
 Blood Bank Clearance: 3/21/2007
 DBA Approval:5/2/2007
  
 This patch is being released with a 7 day compliance to fix the single
 sign on access issue through CAPRI at Health Revenue Center (HRC).  
 This access is very important for HRC since it is servicing veterans
 nationally concerning billing, pharmacy and eligibility issues.
  
 Problem: Working with the CAPRI & the VISN 7 HRC office.
 Problem: One site had telnet configured to do a reverse DNS lookup so that
 in place of the client IP address there was the name.  This cause the
 CAPRI token login not to work as Broker still was using the IP address.
 Fix: Changes to the token create and check code to do a DNS lookup if the
 current value in IO("IP") was not in the numerical form.
  
 HD#160998
 Problem: When a user tries to enter an electronic signature code, they are 
 encountering an <UNDEFINED>N2+5^XUSESIG error.  This occurs when no data 
 has previously been entered into the SIGNATURE BLOCK PRINTED NAME and/or 
 SIGNATURE BLOCK TITLE field.  When the routine gets to the ELECTRONIC 
 SIGNATURE CODE field it is checking the contents of the ^VA(200,DUZ,20) 
 global that doesn t exist and bombs with the error.
 Fix: Check that the global node exists before using.
  
 HD#145394.
 Problem: Why are there YES defaults for the fields DELETE ALL MAIL ACCESS & 
 DELETE KEYS AT TERMINATION when you use the Edit an Existing User option, 
 and then when using the Deactivate a User option those fields are there but 
 have no default unless you have entered them elsewhere?    The help 
 information for the fields say that YES is the recommended action, so why 
 are they defaulted one place and not the other? 
 Fix: Default added to the forms.
  
 HD#167977
 Problem: After patch XU*8*419 and you have the KSP set to auto-generate the
 Verify codes.
 You are given 3 tries to accept the computer auto-generated codes. But if 
 you did not accept one of the first two, the display would go to the "Re-
 enter code" prompt. This was because it did not give the user time to see 
 the 3rd code before clearing it from the screen.
 Fix: Auto-generate Verify changed to work in Forms.
  
 Problem:  $$TRIM^XLFSTR passes a 'space'. 
 If a " " is passed it would return " ".
 Fix: This is not what would be expected and has been fixed to return "".
  
 Report from outside the VA.
 Problem: XUSRB would not make entries in the Failed Access Log (#3.05) because
 it was newing the XUF variable.
 Fix: Do not new the XUF variable.
  
 Two new Fields in the HOSPITAL LOCATION FILE (#44) to support VOE.
  
 STANDARD DATA DICTIONARY #44 -- HOSPITAL LOCATION FILE   
 NOV 20,2006@12:15:25 PAGE 1
 STORED IN ^SC(    SITE: SF CIOFO, KERNEL PATCH ACCOUNT
  
 DATA          NAME                  GLOBAL        DATA
 ELEMENT       TITLE                 LOCATION      TYPE
 ---------------------------------------------------------------------------
  
 44,22900      AUTOFINISH RX SITE     AFRXSITE;1 POINTER
                                  ** TO AN UNDEFINED FILE ** 
  
               LAST EDITED:      MAY 02, 2007
               HELP-PROMPT:      Enter outpatient site this location is 
                                 associated with. 
               DESCRIPTION:    This field is a pointer to File #59, 
                               Outpatient Site, that this hospital
                               location is associated with.  If this field 
                               is not set autofinishing of Rx's for this 
                               hospital location will not take place.  
  
 44,22901      AUTOFINISH CLINIC PRINTER AFRXCLINPRNT;1 POINTER TO DEVICE 
 FILE ( #3.5)
  
               LAST EDITED:      MAY 02, 2007 
               HELP-PROMPT:      Enter printer where autofinished Rx's
                                 for this clinic will be printed.
               DESCRIPTION:      Printer where autofinished Rx's
                                 will print for a particular clinic.
  
 =========================================================================
 Installation:
  
 >>>Users may remain on the system.
 >>>Allow KIDS to inhibit new sign-ons.
 >>>TaskMan does *not* need to be stopped.
  
  
   1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
  
   2.  The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
  
          Verify Checksums in Transport Global
          Print Transport Global
          Compare Transport Global to Current System
          Backup a Transport Global
  
   3.  Users can remain on the system. This patch can be loaded any
       non-peak time.
       TaskMan can remain running.
  
   4.  Installation will take less than 2 minutes.
          Install Package(s)  'XU*8.0*437'
                               ==========
  
       Want KIDS to INHIBIT LOGONs during the install? YES// YES
  
       Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Routine Summary
 ===============
  The following routines are included in this patch.  The second
  line of the routines now looks like:
   
       <tab>;;8.0;KERNEL;**[patch list]**;Jul 10, 1995
   
  Checksums
  =========
  Sites should use CHECK^XTSUMBLD to verify checksums. 
   
 Rtn Nm      Chksum Before  Chksum After     Patch List
 ======      =============  ============     ==========
  
 XLFSTR      2031696        2317874         **112,120,400,437**
 XUS2        15597780       15728251        **59,180,313,419,437**
 XUSESIG     6027869        6769864         **14,55,437**
 XUSRB       7468656        7455067         **11,16,28,32,59,70,82,109,
                                              115,165,150,180,213,234,238,
                                              265,337,395,404,437**
 XUSRB4      3739011        4204421         **150,337,395,419,437**
  
  
 ==============================================================================

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: XLFSTR
    Before:  B5626516  After:  B7051089  **112,120,400,437**
Routine Name: XUS2
    Before: B47237337  After: B48747049  **59,180,313,419,437**
Routine Name: XUSESIG
    Before: B10516400  After: B11503633  **14,55,437**
Routine Name: XUSRB
    Before: B30617453  After: B30600707  **11,16,28,32,59,70,82,109,115,
                                          165,150,180,213,234,238,265,337,
                                          395,404,437**
Routine Name: XUSRB4
    Before: B11538181  After: B12816308  **150,337,395,419,437**

=============================================================================
User Information:
Entered By  : FORT,WALLY                    Date Entered  : OCT 16, 2006
Completed By: SINGH,GURBIR                  Date Completed: MAY 03, 2007
Released By : TILLIS,LEWIS                  Date Released : MAY 03, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

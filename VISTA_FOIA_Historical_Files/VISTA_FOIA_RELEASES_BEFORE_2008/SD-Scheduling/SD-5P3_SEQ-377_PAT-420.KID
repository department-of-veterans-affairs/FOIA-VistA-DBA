Released SD*5.3*420 SEQ #377
Extracted from mail message
**KIDS**:SD*5.3*420^

**INSTALL NAME**
SD*5.3*420
"BLD",5299,0)
SD*5.3*420^SCHEDULING^0^3060201^y
"BLD",5299,4,0)
^9.64PA^^
"BLD",5299,"KRN",0)
^9.67PA^8989.52^19
"BLD",5299,"KRN",.4,0)
.4
"BLD",5299,"KRN",.401,0)
.401
"BLD",5299,"KRN",.402,0)
.402
"BLD",5299,"KRN",.403,0)
.403
"BLD",5299,"KRN",.5,0)
.5
"BLD",5299,"KRN",.84,0)
.84
"BLD",5299,"KRN",3.6,0)
3.6
"BLD",5299,"KRN",3.8,0)
3.8
"BLD",5299,"KRN",9.2,0)
9.2
"BLD",5299,"KRN",9.8,0)
9.8
"BLD",5299,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5299,"KRN",9.8,"NM",1,0)
SDWLTR^^0^B79131220
"BLD",5299,"KRN",9.8,"NM","B","SDWLTR",1)

"BLD",5299,"KRN",19,0)
19
"BLD",5299,"KRN",19,"NM",0)
^9.68A^^
"BLD",5299,"KRN",19.1,0)
19.1
"BLD",5299,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",5299,"KRN",101,0)
101
"BLD",5299,"KRN",101,"NM",0)
^9.68A^^
"BLD",5299,"KRN",409.61,0)
409.61
"BLD",5299,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",5299,"KRN",771,0)
771
"BLD",5299,"KRN",870,0)
870
"BLD",5299,"KRN",8989.51,0)
8989.51
"BLD",5299,"KRN",8989.52,0)
8989.52
"BLD",5299,"KRN",8994,0)
8994
"BLD",5299,"KRN","B",.4,.4)

"BLD",5299,"KRN","B",.401,.401)

"BLD",5299,"KRN","B",.402,.402)

"BLD",5299,"KRN","B",.403,.403)

"BLD",5299,"KRN","B",.5,.5)

"BLD",5299,"KRN","B",.84,.84)

"BLD",5299,"KRN","B",3.6,3.6)

"BLD",5299,"KRN","B",3.8,3.8)

"BLD",5299,"KRN","B",9.2,9.2)

"BLD",5299,"KRN","B",9.8,9.8)

"BLD",5299,"KRN","B",19,19)

"BLD",5299,"KRN","B",19.1,19.1)

"BLD",5299,"KRN","B",101,101)

"BLD",5299,"KRN","B",409.61,409.61)

"BLD",5299,"KRN","B",771,771)

"BLD",5299,"KRN","B",870,870)

"BLD",5299,"KRN","B",8989.51,8989.51)

"BLD",5299,"KRN","B",8989.52,8989.52)

"BLD",5299,"KRN","B",8994,8994)

"BLD",5299,"QUES",0)
^9.62^^
"BLD",5299,"REQB",0)
^9.611^3^3
"BLD",5299,"REQB",1,0)
SD*5.3*270^1
"BLD",5299,"REQB",2,0)
SD*5.3*327^1
"BLD",5299,"REQB",3,0)
SD*5.3*394^1
"BLD",5299,"REQB","B","SD*5.3*270",1)

"BLD",5299,"REQB","B","SD*5.3*327",2)

"BLD",5299,"REQB","B","SD*5.3*394",3)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813^2930824^10000000057
"PKG",16,22,1,"PAH",1,0)
420^3060201
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SDWLTR")
0^1^B79131220
"RTN","SDWLTR",1,0)
SDWLTR ;IOFO BAY PINES/DMR - WAIT LIST TRANSMISSION TO ACC;06/12/2002 ; 29 Aug 2002  2:54 PM
"RTN","SDWLTR",2,0)
 ;;5.3;scheduling;**270,420**;AUG 13 1993
"RTN","SDWLTR",3,0)
 Q
"RTN","SDWLTR",4,0)
INIT ;
"RTN","SDWLTR",5,0)
 S (DFN,REC,WLNAMEF,WLNAMEL,WLNAMEM,WLNAME,WLNAMES,NAME,DOB,SEX,RACE,MT,MTT,SSN,SSNP,STATE,STA,ZCODE,COUNTY,CTY,PHONE,SERCON,HINS,POS,PEC,PECN,PECNN,MCAID,POW,PH,ENROLLN,ENROLL,PREFACN,PREFAC,J,JJ,INST,INSTN,CSTOP,STOP,CLINIC,INST,N,MN)=""
"RTN","SDWLTR",6,0)
 S (SWIEN,ICNUM,WLREC,WLORDT,WLTYPE,WLTEAMN,WLTEAM,WLPOSN,WLPOS,WLSPECN,WLSPEC,WLCLN,WLCL,WL,WLC,WLS,WLPRI,WLREQ,WLREMOV,WLDNMOV,WLDOD,WLRDFD,WLESTA,WLDDOA,WLCSTA,HOLD,PCMNUM,PCMMT,PCMMP,VER,WL,VETS,NUM,CLN)=""
"RTN","SDWLTR",7,0)
 S (WLD2,WLC2,WLI2,WLSC2,WLCS2,WLS2,WLAS2,WLSCP2,WLPRI2,WLA2)=""
"RTN","SDWLTR",8,0)
 S VER="1.0",N=0,MN=0,INST=+DUZ(2)
"RTN","SDWLTR",9,0)
DATA ;Check for data and setup arrays.
"RTN","SDWLTR",10,0)
 IF +$P($G(^SDWL(409.31,0)),"^",4)>.5 D
"RTN","SDWLTR",11,0)
 .S J=0 F  S J=$O(^SDWL(409.31,"E",J)) Q:J=""  D
"RTN","SDWLTR",12,0)
 ..S JJ=0 F  S JJ=$O(^SDWL(409.31,"E",J,JJ)) Q:JJ=""  D
"RTN","SDWLTR",13,0)
 ...S CSTOP="",CSTOP=^SDWL(409.31,+JJ,0)
"RTN","SDWLTR",14,0)
 ...S ^TMP("409.31",$J,+J,+CSTOP)=""
"RTN","SDWLTR",15,0)
 ...Q
"RTN","SDWLTR",16,0)
 IF +$P($G(^SDWL(409.32,0)),"^",4)>.5 D
"RTN","SDWLTR",17,0)
 .S J=0 F  S J=$O(^SDWL(409.32,"C",J)) Q:J=""  D
"RTN","SDWLTR",18,0)
 ..S JJ=0 F  S JJ=$O(^SDWL(409.32,"C",J,JJ)) Q:JJ=""  D
"RTN","SDWLTR",19,0)
 ...S CLINIC="",CLINIC=$P($G(^SDWL(409.32,+JJ,0)),"^",1)
"RTN","SDWLTR",20,0)
 ...S ^TMP("409.32",$J,+J,+CLINIC)=""
"RTN","SDWLTR",21,0)
 ...Q
"RTN","SDWLTR",22,0)
 IF +$P($G(^SDWL(409.3,0)),"^",4)<1 D NODATA,KILL Q
"RTN","SDWLTR",23,0)
 D START,MESS,NODATA,KILL
"RTN","SDWLTR",24,0)
 Q
"RTN","SDWLTR",25,0)
START ;Loop 409.3, get DFN file 2 info.
"RTN","SDWLTR",26,0)
 F  S DFN=$O(^SDWL(409.3,"B",DFN)) Q:DFN=""  D
"RTN","SDWLTR",27,0)
 .D DEM^VADPT
"RTN","SDWLTR",28,0)
 .S (WLNAMEL,WLNAMEF,WLNAMEM,WLNAMES,WLNAME,NAME(1))="" S WLNAME("FILE")=2,WLNAME("IENS")=DFN,WLNAME("FIELD")=.01
"RTN","SDWLTR",29,0)
 .S NAME(1)=$$HLNAME^XLFNAME(.WLNAME,"","^") S WLNAMEL=$P($G(NAME(1)),"^",1),WLNAMEF=$P($G(NAME(1)),"^",2),WLNAMEM=$P($G(NAME(1)),"^",3),WLNAMES=$P($G(NAME(1)),"^",4)
"RTN","SDWLTR",30,0)
 .S NAME=WLNAMEL_"^"_WLNAMEF_"^"_WLNAMEM_" "_WLNAMES
"RTN","SDWLTR",31,0)
 .S DOB="" S DOB=$P($G(VADM(3)),"^",1)
"RTN","SDWLTR",32,0)
 .S SEX="" S SEX=$P($G(VADM(5)),"^",1)
"RTN","SDWLTR",33,0)
 .S RACE="" S RACE=$P($G(VADM(8)),"^",1)
"RTN","SDWLTR",34,0)
 .S (SSN,SSNP)="" S SSN=$P($G(VADM(2)),"^",1) IF SSN["P" S SSNP="P",SSN=$E(SSN,1,9)
"RTN","SDWLTR",35,0)
 .S (MT,MTT)="" S MT=$$LST^DGMTU(DFN,DT,1) IF MT'="" S MTT=1,MT=$P($G(MT),"^",4)
"RTN","SDWLTR",36,0)
 .IF MT="" S MT=$$LST^DGMTU(DFN,DT,2) IF MT'="" S MTT=2,MT=$P($G(MT),"^",4)
"RTN","SDWLTR",37,0)
 .D ADD^VADPT
"RTN","SDWLTR",38,0)
 .S (STATE,STA)="" S STA=$P($G(VAPA(5)),"^",1) D
"RTN","SDWLTR",39,0)
 ..IF STA'="" S STATE=$E("00",$L(STA)+1,2)_STA
"RTN","SDWLTR",40,0)
 .S ZCODE="" S ZCODE=$G(VAPA(6))
"RTN","SDWLTR",41,0)
 .S (COUNTY,CTY)="" S COUNTY=$P($G(VAPA(7)),"^",1) D
"RTN","SDWLTR",42,0)
 ..IF COUNTY'=""&(STATE'="") S CTY=$$GET1^DIQ(5.01,COUNTY_","_STATE,"VA COUNTY CODE") D
"RTN","SDWLTR",43,0)
 ...S COUNTY="" IF CTY'="" S COUNTY=STATE_CTY
"RTN","SDWLTR",44,0)
 .S PHONE="" S PHONE=$G(VAPA(8))
"RTN","SDWLTR",45,0)
 .S SERCON="" S SERCON=$$GET1^DIQ(2,DFN_",",.302)
"RTN","SDWLTR",46,0)
 .S HINS="" S HINS=$$GET1^DIQ(2,DFN_",",.3192,"I")
"RTN","SDWLTR",47,0)
 .S (POSN,POS)="" S POSN=$$GET1^DIQ(2,DFN_",",.323,"I") IF POSN'="" S POS=$$GET1^DIQ(21,POSN_",",.03)
"RTN","SDWLTR",48,0)
 .S (PEC,PECN,PECNN)="" S PECN=$$GET1^DIQ(2,DFN_",",.361,"I") IF PECN'="" S PECNN=$$GET1^DIQ(8,PECN_",",8,"I") IF PECNN'="" S PEC=$$GET1^DIQ(8.1,PECNN_",",3)
"RTN","SDWLTR",49,0)
 .S VETS="" S VETS=$$GET1^DIQ(2,DFN_",",1901,"I")
"RTN","SDWLTR",50,0)
 .S MCAID="" S MCAID=$$GET1^DIQ(2,DFN_",",.381,"I"),MCAID=$S(MCAID=1:"Y",MCAID=0:"N",1:"")
"RTN","SDWLTR",51,0)
 .S POW="" S POW=$$GET1^DIQ(2,DFN_",",.525,"I")
"RTN","SDWLTR",52,0)
 .S PH="" S PH=$$GET1^DIQ(2,DFN_",",.531,"I")
"RTN","SDWLTR",53,0)
 .S (ENROLLN,ENROLL,ENROLSUB)="" S ENROLLN=$$GET1^DIQ(2,DFN_",",27.01,"I") IF ENROLLN'="" S ENROLL=$$GET1^DIQ(27.11,ENROLLN_",",.01,"I")
"RTN","SDWLTR",54,0)
 .S ENROLLP="" IF ENROLLN'="" S ENROLLP=$$GET1^DIQ(27.11,ENROLLN_",",.07,"I") I ENROLLP D
"RTN","SDWLTR",55,0)
 ..S ENROLSUB=$$GET1^DIQ(27.11,ENROLLN_",",.12) I ENROLSUB'="" S ENROLLP=ENROLLP_ENROLSUB
"RTN","SDWLTR",56,0)
 .S (PREFACN,PREFAC)="" S PREFACN=$$GET1^DIQ(2,DFN_",",27.02,"I") IF PREFACN'="" S PREFAC=$$GET1^DIQ(4,PREFACN_",",99)
"RTN","SDWLTR",57,0)
 .S ICNUM="" S ICNUM=$$GET1^DIQ(2,DFN_",",991.01)
"RTN","SDWLTR",58,0)
 .S PCMNUM="" S PCMNUM=$P($$NMPCPR^SCAPMCU2(DFN,DT,1),"^",1) D
"RTN","SDWLTR",59,0)
 ..IF PCMNUM<0!(PCMNUM="") S PCMNUM="",PCMMP="^^"
"RTN","SDWLTR",60,0)
 ..IF PCMNUM>0 D
"RTN","SDWLTR",61,0)
 ...S (PCMML,PCMMF,PCMMM,NAME(1),PCMMP)="" S PCMM("FILE")=200,PCMM("IENS")=PCMNUM,PCMM("FIELD")=.01
"RTN","SDWLTR",62,0)
 ...S NAME(1)=$$HLNAME^XLFNAME(.PCMM,"","^") S PCMML=$P(NAME(1),"^",1),PCMMF=$P(NAME(1),"^",2),PCMMM=$P(NAME(1),"^",3)
"RTN","SDWLTR",63,0)
 ...S PCMMP=PCMML_"^"_PCMMF_"^"_PCMMM
"RTN","SDWLTR",64,0)
 .S PCMMT="" S PCMMT=$P($$NMPCTM^SCAPMCU2(DFN,DT,1),"^",2)
"RTN","SDWLTR",65,0)
 .S SWIEN="" F  S SWIEN=$O(^SDWL(409.3,"B",DFN,SWIEN)) Q:SWIEN=""  D
"RTN","SDWLTR",66,0)
 ..S (WLREC,WLORDT,WLTYPE,WLINSTN,WLTEAMN,WLTEAM,WLPOSN,WLPOS,WLSPECN,WLSPEC,WLCLN,WLCL,WLPRI,WLREQ)=""
"RTN","SDWLTR",67,0)
 ..S (WLREMOV,WLDNMOV,WLDOD,WLRDFD,WLDDOA,WLESTA,WLCSTA,WLPHY,WLPCMT,WLINST,INSTN,WL,WLC,WLS,NUM)=""
"RTN","SDWLTR",68,0)
 ..S (WLA2,WLD2,WLC2,WLI2,WLSC2,WLCS2,WLS2,WLCL2,WLAS2,WLSCP2,WLPRI2,WLROR2,WLROC2)=""
"RTN","SDWLTR",69,0)
 ..S WLREC=^SDWL(409.3,SWIEN,0)
"RTN","SDWLTR",70,0)
 ..S WLORDT=$P(WLREC,"^",2)
"RTN","SDWLTR",71,0)
 ..S WLTYPE=$P(WLREC,"^",5)
"RTN","SDWLTR",72,0)
 ..S WLINSTN=$P(WLREC,"^",3) IF WLINSTN'="" S X=$$GET1^DIQ(4,+WLINSTN_",",99),WLINST=$P(X,U,1),INSTN=$$GET1^DIQ(4,+WLINSTN_",",.01)
"RTN","SDWLTR",73,0)
 ..S WLTEAMN=$P(WLREC,"^",6) IF WLTEAMN'="" S WLTEAM=$P($G(^SCTM(404.51,WLTEAMN,0)),"^",1)
"RTN","SDWLTR",74,0)
 ..S WLPOSN=$P(WLREC,"^",7) IF WLPOSN'="" S WLPOS=$P($G(^SCTM(404.57,WLPOSN,0)),"^",1)
"RTN","SDWLTR",75,0)
 ..S WLSPECN=$P(WLREC,"^",8) IF WLSPECN'="" S WLS=$G(^SDWL(409.31,WLSPECN,0)),WLSPEC=$$GET1^DIQ(40.7,WLS_",",1)
"RTN","SDWLTR",76,0)
 ..S WLCLN=$P(WLREC,"^",9) IF WLCLN'="" S WLC=$P(^SDWL(409.32,WLCLN,0),"^",1),WLCL=$P($G(^SC(WLC,0)),"^",1) D
"RTN","SDWLTR",77,0)
 ...IF WLC'="" S NUM=$E("000000",$L(WLC)+1,6)_WLC
"RTN","SDWLTR",78,0)
 ..IF WLSPECN=""&(WLCLN'="") S WL=$P(^SDWL(409.32,WLCLN,0),"^",1),WLSPECN=$P($G(^SC(WL,0)),"^",7),WLSPEC=$$GET1^DIQ(40.7,WLSPECN_",",1)
"RTN","SDWLTR",79,0)
 ..S WLPRI=$P(WLREC,"^",11)
"RTN","SDWLTR",80,0)
 ..S WLREQ=$P(WLREC,"^",12)
"RTN","SDWLTR",81,0)
 ..S WLREMOV=$P(WLREC,"^",14)
"RTN","SDWLTR",82,0)
 ..S WLDNMOV=$P($G(^SDWL(409.3,SWIEN,"DNR")),"^",1),WLDOD=$P($G(^SDWL(409.3,SWIEN,"DIS")),"^",1),WLRDFD=$P($G(^SDWL(409.3,SWIEN,"DIS")),"^",3)
"RTN","SDWLTR",83,0)
 ..S WLDDOA=$P(WLREC,"^",16),WLCSTA=$P(WLREC,"^",17),WLESTA=$P(WLREC,"^",20)
"RTN","SDWLTR",84,0)
 ..IF $P($G(WLREC),"^",23)'=""&($D(^SDWL(409.3,SWIEN,"SDAPT"))) S WLA2=$P(WLREC,"^",23),WLREC2=^SDWL(409.3,SWIEN,"SDAPT") D
"RTN","SDWLTR",85,0)
 ...S WLD2=$P($G(WLREC2),"^",1),WLC2=$$GET1^DIQ(409.3,SWIEN_",",13.2),WLI2=$$GET1^DIQ(409.3,SWIEN_",",13.3),WLSC2=$P($G(WLREC2),"^",4),WLCS2=$$GET1^DIQ(409.3,SWIEN_",",13.5)
"RTN","SDWLTR",86,0)
 ...S WLS2=$P($G(WLREC2),"^",6),WLAS2=$P($G(WLREC2),"^",8),WLCL2=$$GET1^DIQ(409.3,SWIEN_",",13.7),WLROC2=$$GET1^DIQ(409.3,SWIEN_",",30)
"RTN","SDWLTR",87,0)
 ...S WLSCP2=$P($G(^SDWL(409.3,SWIEN,"SC")),"^",1),WLPRI2=$P($G(^SDWL(409.3,SWIEN,"SC")),"^",2),WLROR2=$$GET1^DIQ(409.3,SWIEN_",",29,"I")
"RTN","SDWLTR",88,0)
 ...S WLROC2=$$GET1^DIQ(409.3,SWIEN_",",30)
"RTN","SDWLTR",89,0)
 ..Q:SWIEN=HOLD  D
"RTN","SDWLTR",90,0)
 ...D CHECK
"RTN","SDWLTR",91,0)
 ...IF N>39 D MESS K ^TMP("EWL",$J) S N=0
"RTN","SDWLTR",92,0)
 ...S N=N+1
"RTN","SDWLTR",93,0)
 ...S ^TMP("EWL",$J,SWIEN_N,0)="#"_WLINST_"^"_VER_"^"_INSTN_"^"_WLCL_"^"_NUM_"^"_WLSPEC_"^"_WLTYPE_"^"_NAME_"^"_DFN_"^"_DOB_"^"_SEX_"^"_RACE_"^"_SSN_"^"_SSNP_"^"_STATE_"^"_COUNTY_"^"_ZCODE_"^"_PHONE
"RTN","SDWLTR",94,0)
 ...S ^TMP("EWL",$J,SWIEN_N,0)=^TMP("EWL",$J,SWIEN_N,0)_"^"_MT_"^"_MTT_"^"_SERCON_"^"_HINS_"^"_POS_"^"_PEC_"^"_VETS_"^"_MCAID_"^"_POW_"^"_PH_"^"_ENROLL_"^"_ENROLLP_"^"_PREFAC
"RTN","SDWLTR",95,0)
 ...S ^TMP("EWL",$J,SWIEN_N,0)=^TMP("EWL",$J,SWIEN_N,0)_"^"_ICNUM_"^"_PCMNUM_"^"_PCMMP_"^"_PCMMT_"^"_WLORDT_"^"_WLTEAM_"^"_WLPOS_"^"_WLPRI_"^"_WLREQ_"^"_WLDOD_"^"_WLRDFD_"^"_WLDDOA_"^"_WLCSTA_"^"_WLESTA_"^"_WLREMOV_"^"_WLDNMOV
"RTN","SDWLTR",96,0)
 ...S ^TMP("EWL",$J,SWIEN_N,0)=^TMP("EWL",$J,SWIEN_N,0)_"^"_WLA2_"^"_WLD2_"^"_WLC2_"^"_WLI2_"^"_WLSC2_"^"_WLCS2_"^"_WLS2_"^"_WLCL2_"^"_WLAS2_"^"_WLSCP2_"^"_WLPRI2_"^"_WLROR2
"RTN","SDWLTR",97,0)
 ...S ^TMP("EWL",$J,SWIEN_N,0)=^TMP("EWL",$J,SWIEN_N,0)_"^"_WLROC2_"^"_"$"
"RTN","SDWLTR",98,0)
 ...S HOLD=SWIEN
"RTN","SDWLTR",99,0)
 ...Q
"RTN","SDWLTR",100,0)
 Q
"RTN","SDWLTR",101,0)
MESS ;Sent msg
"RTN","SDWLTR",102,0)
 S MN=MN+1
"RTN","SDWLTR",103,0)
 N XMSUB,XMY,XMTEXT,XMDUZ
"RTN","SDWLTR",104,0)
 S XMSUB="EWL FILE TRANSMISSION"_" MESSAGE # "_MN
"RTN","SDWLTR",105,0)
 S XMY("G.SD WAIT LIST TRANS TO AAC")=""
"RTN","SDWLTR",106,0)
 S XMTEXT="^TMP(""EWL"",$J,"
"RTN","SDWLTR",107,0)
 S XMDUZ="POSTMASTER"
"RTN","SDWLTR",108,0)
 D ^XMD K ^TMP("EWL",$J)
"RTN","SDWLTR",109,0)
 Q
"RTN","SDWLTR",110,0)
NODATA ;No data in ^SDWL(409.3)
"RTN","SDWLTR",111,0)
 S N=0,MN=MN+1
"RTN","SDWLTR",112,0)
 IF +$P($G(^SDWL(409.31,0)),"^",4)<1 D SET
"RTN","SDWLTR",113,0)
 IF +$P($G(^SDWL(409.32,0)),"^",4)<1 D SET
"RTN","SDWLTR",114,0)
 IF +$P($G(^SDWL(409.31,0)),"^",4)>.5 D SET2
"RTN","SDWLTR",115,0)
 IF +$P($G(^SDWL(409.32,0)),"^",4)>.5 D SET3
"RTN","SDWLTR",116,0)
MESS2 ;
"RTN","SDWLTR",117,0)
 N XMSUB,XMY,XMTEXT,XMDUZ
"RTN","SDWLTR",118,0)
 S XMSUB="EWL FILE TRANSMISSION"_" MESSAGE # "_MN
"RTN","SDWLTR",119,0)
 S XMY("G.SD WAIT LIST TRANS TO AAC")=""
"RTN","SDWLTR",120,0)
 S XMTEXT="^TMP(""EWL"",$J,"
"RTN","SDWLTR",121,0)
 S XMDUZ="POSTMASTER"
"RTN","SDWLTR",122,0)
 D ^XMD
"RTN","SDWLTR",123,0)
 Q
"RTN","SDWLTR",124,0)
SET ;Save data if no pat. on wait list.
"RTN","SDWLTR",125,0)
 S ^TMP("EWL",$J,INST,0)="#"_INST_"^"_1.1_"$"
"RTN","SDWLTR",126,0)
 Q
"RTN","SDWLTR",127,0)
SET2 ;Set nodata global for ser/spec file 409.31
"RTN","SDWLTR",128,0)
 S J=0 F  S J=$O(^TMP("409.31",$J,J)) Q:J=""  D
"RTN","SDWLTR",129,0)
 .S JJ=0 F  S JJ=$O(^TMP("409.31",$J,J,JJ)) Q:JJ=""  D
"RTN","SDWLTR",130,0)
 ..S (INSTN,NAME,CSTOP,CLN)="",CLINIC=0,CSTOP=$$GET1^DIQ(40.7,JJ_",",1),NAME=$$GET1^DIQ(4,J_",",.01),INSTN=$$GET1^DIQ(4,J_",",99) D SAVE
"RTN","SDWLTR",131,0)
 ..Q
"RTN","SDWLTR",132,0)
 Q
"RTN","SDWLTR",133,0)
SET3 ;Set nodata global for clinic file 409.32
"RTN","SDWLTR",134,0)
 S J=0 F  S J=$O(^TMP("409.32",$J,J)) Q:J=""  D
"RTN","SDWLTR",135,0)
 .S JJ=0 F  S JJ=$O(^TMP("409.32",$J,J,JJ)) Q:JJ=""  D
"RTN","SDWLTR",136,0)
 ..S (INSTN,NAME,CSTOP,STOP,CLINIC,CLN)="",CLINIC=$P($G(^SC(JJ,0)),"^",1),CLN=JJ,NAME=$$GET1^DIQ(4,J_",",.01),INSTN=$$GET1^DIQ(4,J_",",99),STOP=$P($G(^SC(JJ,0)),"^",7),CSTOP=$$GET1^DIQ(40.7,STOP_",",1) D SAVE
"RTN","SDWLTR",137,0)
 ..Q
"RTN","SDWLTR",138,0)
 Q
"RTN","SDWLTR",139,0)
SAVE ;Save nodata info.
"RTN","SDWLTR",140,0)
 S U="^",N=N+1,NUM=0 IF CLN'="" S NUM=$E("000000",$L(CLN)+1,6)_CLN
"RTN","SDWLTR",141,0)
 S ^TMP("EWL",$J,INST_N,0)="#"_INSTN_U_1.2_"^"_NAME_U_CLINIC_U_NUM_U_CSTOP_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U
"RTN","SDWLTR",142,0)
 S ^TMP("EWL",$J,INST_N,0)=^TMP("EWL",$J,INST_N,0)_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_0_U_"$"
"RTN","SDWLTR",143,0)
 Q
"RTN","SDWLTR",144,0)
CHECK ;Deletes array entry if data for spec/cln/inst.
"RTN","SDWLTR",145,0)
 IF WLTYPE=3 D
"RTN","SDWLTR",146,0)
 .IF $D(^TMP("409.31",$J,+WLINSTN,+WLS)) K ^TMP("409.31",$J,+WLINSTN,+WLS)
"RTN","SDWLTR",147,0)
 IF WLTYPE=4 D
"RTN","SDWLTR",148,0)
 .IF $D(^TMP("409.32",$J,+WLINSTN,+WLC)) K ^TMP("409.32",$J,+WLINSTN,+WLC)
"RTN","SDWLTR",149,0)
 Q
"RTN","SDWLTR",150,0)
KILL ;
"RTN","SDWLTR",151,0)
 K ^TMP("EWL",$J),^TMP("409.31",$J),^TMP("409.32",$J)
"RTN","SDWLTR",152,0)
 K DFN,REC,WLNAMEF,WLNAMEL,WLNAMEM,WLNAME,NAME,DOB,SEX,RACE,MT,MTT,SSN,SSNP,STATE,STA,ZCODE,COUNTY,CTY,PHONE,SERCON,HINS,POS,PEC,PECN,PECNN,MCAID,POW,PH,ENROLLN,ENROLL,PREFACN,PREFAC,J,JJ,INST,INSTN,CSTOP,STOP,CLINIC,INST,N,MN
"RTN","SDWLTR",153,0)
 K SWIEN,ICNUM,WLREC,WLORDT,WLTYPE,WLTEAMN,WLTEAM,WLPOSN,WLPOS,WLSPECN,WLSPEC,WLCLN,WLCL,WL,WLC,WLS,WLPRI,WLREQ,WLREMOV,WLDNMOV,WLDOD,WLRDFD,WLESTA,WLDDOA,WLCSTA,HOLD,PCMNUM,PCMMT,PCMMP,VER,WL,VETS,NUM,CLN
"RTN","SDWLTR",154,0)
 K ENROLL,ENROLLP,ENROLSUB,WLNAMES,WLD2,WLC2,WLI2,WLSC2,WLCS2,WLS2,WLCL2,WLAS2,WLSCP2,WLPRI2,WLA2,WLROR2,WLROC2,WLREC2,PCMM,PCMMF,PCMML,PCMMM,POSN,WLINST,WLINSTN,WLPCMT,WLPHY,X,VADM,VAPA
"RTN","SDWLTR",155,0)
 Q
"VER")
8.0^22.0
"BLD",5299,6)
^377
**END**
**END**

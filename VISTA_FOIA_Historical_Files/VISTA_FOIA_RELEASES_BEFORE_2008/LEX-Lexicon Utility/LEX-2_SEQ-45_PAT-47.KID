Released LEX*2*47 SEQ #45
Extracted from mail message
**KIDS**:LEX*2.0*47^

**INSTALL NAME**
LEX*2.0*47
"BLD",6516,0)
LEX*2.0*47^LEXICON UTILITY^0^3070205^y
"BLD",6516,1,0)
^^2^2^3070120^
"BLD",6516,1,1,0)
Please see the National Patch Module for details of the enhancements
"BLD",6516,1,2,0)
included in this patch.
"BLD",6516,4,0)
^9.64PA^^
"BLD",6516,6.3)
5
"BLD",6516,"INIT")
EN^LEX2047A
"BLD",6516,"KRN",0)
^9.67PA^8989.52^19
"BLD",6516,"KRN",.4,0)
.4
"BLD",6516,"KRN",.401,0)
.401
"BLD",6516,"KRN",.402,0)
.402
"BLD",6516,"KRN",.403,0)
.403
"BLD",6516,"KRN",.5,0)
.5
"BLD",6516,"KRN",.84,0)
.84
"BLD",6516,"KRN",3.6,0)
3.6
"BLD",6516,"KRN",3.8,0)
3.8
"BLD",6516,"KRN",9.2,0)
9.2
"BLD",6516,"KRN",9.8,0)
9.8
"BLD",6516,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",6516,"KRN",9.8,"NM",1,0)
LEX2047A^^0^B57784056
"BLD",6516,"KRN",9.8,"NM",2,0)
LEX2047B^^0^B51205115
"BLD",6516,"KRN",9.8,"NM","B","LEX2047A",1)

"BLD",6516,"KRN",9.8,"NM","B","LEX2047B",2)

"BLD",6516,"KRN",19,0)
19
"BLD",6516,"KRN",19.1,0)
19.1
"BLD",6516,"KRN",101,0)
101
"BLD",6516,"KRN",409.61,0)
409.61
"BLD",6516,"KRN",771,0)
771
"BLD",6516,"KRN",870,0)
870
"BLD",6516,"KRN",8989.51,0)
8989.51
"BLD",6516,"KRN",8989.52,0)
8989.52
"BLD",6516,"KRN",8994,0)
8994
"BLD",6516,"KRN","B",.4,.4)

"BLD",6516,"KRN","B",.401,.401)

"BLD",6516,"KRN","B",.402,.402)

"BLD",6516,"KRN","B",.403,.403)

"BLD",6516,"KRN","B",.5,.5)

"BLD",6516,"KRN","B",.84,.84)

"BLD",6516,"KRN","B",3.6,3.6)

"BLD",6516,"KRN","B",3.8,3.8)

"BLD",6516,"KRN","B",9.2,9.2)

"BLD",6516,"KRN","B",9.8,9.8)

"BLD",6516,"KRN","B",19,19)

"BLD",6516,"KRN","B",19.1,19.1)

"BLD",6516,"KRN","B",101,101)

"BLD",6516,"KRN","B",409.61,409.61)

"BLD",6516,"KRN","B",771,771)

"BLD",6516,"KRN","B",870,870)

"BLD",6516,"KRN","B",8989.51,8989.51)

"BLD",6516,"KRN","B",8989.52,8989.52)

"BLD",6516,"KRN","B",8994,8994)

"BLD",6516,"QUES",0)
^9.62^^
"BLD",6516,"REQB",0)
^9.611^1^1
"BLD",6516,"REQB",1,0)
LEX*2.0*46^2
"BLD",6516,"REQB","B","LEX*2.0*46",1)

"INIT")
EN^LEX2047A
"MBREQ")
0
"PKG",167,-1)
1^1
"PKG",167,0)
LEXICON UTILITY^LEX^Medical and Biomedical Terminology System.^^^3030115
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
2.0^2950923^2950923^1118
"PKG",167,22,1,"PAH",1,0)
47^3070205
"PKG",167,22,1,"PAH",1,1,0)
^^2^2^3070205
"PKG",167,22,1,"PAH",1,1,1,0)
Please see the National Patch Module for details of the enhancements
"PKG",167,22,1,"PAH",1,1,2,0)
included in this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","LEX2047A")
0^1^B57784056^n/a
"RTN","LEX2047A",1,0)
LEX2047A ; ISL/KER - Post Install LEX*2.0*47  ; 02/05/2007
"RTN","LEX2047A",2,0)
 ;;2.0;LEXICON UTILITY;**47**;Sep 23, 1996;Build 5
"RTN","LEX2047A",3,0)
 ;                    
"RTN","LEX2047A",4,0)
 ; Global Variables
"RTN","LEX2047A",5,0)
 ;    ^ICPT(           DBIA 4489
"RTN","LEX2047A",6,0)
 ;    ^DIC(81.3,       DBIA 4492
"RTN","LEX2047A",7,0)
 ;                    
"RTN","LEX2047A",8,0)
 ; External References
"RTN","LEX2047A",9,0)
 ;    FILE^DIE         DBIA 2053
"RTN","LEX2047A",10,0)
 ;    UPDATE^DIE       DBIA 2053
"RTN","LEX2047A",11,0)
 ;    IX1^DIK          DBIA 10013
"RTN","LEX2047A",12,0)
 ;    $$IENS^DILF      DBIA 2054
"RTN","LEX2047A",13,0)
 ;    $$CODEN^ICPTCOD  DBIA 1995
"RTN","LEX2047A",14,0)
 ;    $$CPT^ICPTCOD    DBIA 1995
"RTN","LEX2047A",15,0)
 ;    $$MOD^ICPTMOD    DBIA 1996
"RTN","LEX2047A",16,0)
 ;    $$DT^XLFDT       DBIA 10103
"RTN","LEX2047A",17,0)
 ;    $$FMADD^XLFDT    DBIA 10103
"RTN","LEX2047A",18,0)
 ;    MES^XPDUTL       DBIA 10141
"RTN","LEX2047A",19,0)
 ;                    
"RTN","LEX2047A",20,0)
EN ; Main Entry Point
"RTN","LEX2047A",21,0)
 D C1,C2,C3,C4,C5,EN^LEX2047B
"RTN","LEX2047A",22,0)
 Q
"RTN","LEX2047A",23,0)
 ;                  
"RTN","LEX2047A",24,0)
 ; Changes
"RTN","LEX2047A",25,0)
C1 ;   123616 - 99212/G0245 with A8, AA, QY and 57
"RTN","LEX2047A",26,0)
 D IND(" "),REMI("CPT Modifier Ranges Added for A8/AA/QY/57","HD0000000 123616")
"RTN","LEX2047A",27,0)
 N CODE,PRO,MOD,MT,VDT K SHOWSTA
"RTN","LEX2047A",28,0)
 S CODE="99212",VDT=3050101,PRO=$P($$CPT^ICPTCOD(CODE,(VDT+1)),"^",3)
"RTN","LEX2047A",29,0)
 F MOD="A8","AA","QY","57" D
"RTN","LEX2047A",30,0)
 . D:MOD="A8" IND(("    CPT Range "_CODE))
"RTN","LEX2047A",31,0)
 . N ACR,PRO,MT,ND,NN,DA,DIK,MIEN S ACR=$$ACR(CODE,MOD,VDT) Q:+ACR>0
"RTN","LEX2047A",32,0)
 . S MT=$$MOD^ICPTMOD(MOD,"E",(VDT+1))
"RTN","LEX2047A",33,0)
 . S MIEN=+MT,MT=$P(MT,"^",3) Q:+MIEN'>0  S DA=$O(^DIC(81.3,+MIEN,10," "),-1)+1 Q:+DA'>1
"RTN","LEX2047A",34,0)
 . S DA(1)=MIEN,DIK="^DIC(81.3,"_DA(1)_",10,"
"RTN","LEX2047A",35,0)
 . S NN=CODE_"^"_CODE_"^"_VDT_"^",ND=DIK_DA_",0)"
"RTN","LEX2047A",36,0)
 . S @ND=NN D IX1^DIK
"RTN","LEX2047A",37,0)
 S CODE="G0245",PRO=$P($$CPT^ICPTCOD(CODE,(VDT+1)),"^",3)
"RTN","LEX2047A",38,0)
 F MOD="A8","AA","QY","57" D
"RTN","LEX2047A",39,0)
 . D:MOD="A8" IND(("    CPT Range "_CODE))
"RTN","LEX2047A",40,0)
 . N ACR,PRO,MT,ND,NN,DA,DIK,MIEN S ACR=$$ACR(CODE,MOD,VDT) Q:+ACR>0
"RTN","LEX2047A",41,0)
 . S MT=$$MOD^ICPTMOD(MOD,"E",(VDT+1))
"RTN","LEX2047A",42,0)
 . S MIEN=+MT,MT=$P(MT,"^",3) Q:+MIEN'>0  S DA=$O(^DIC(81.3,+MIEN,10," "),-1)+1 Q:+DA'>1
"RTN","LEX2047A",43,0)
 . S DA(1)=MIEN,DIK="^DIC(81.3,"_DA(1)_",10,"
"RTN","LEX2047A",44,0)
 . S NN=CODE_"^"_CODE_"^"_VDT_"^",ND=DIK_DA_",0)"
"RTN","LEX2047A",45,0)
 . S @ND=NN D IX1^DIK
"RTN","LEX2047A",46,0)
 Q
"RTN","LEX2047A",47,0)
C2 ;   174408 CPT Modifier Ranges Added for TC/26
"RTN","LEX2047A",48,0)
 D IND(" "),REMI("CPT Modifier Ranges Added for TC/26","HD0000000 174408")
"RTN","LEX2047A",49,0)
 N I,VDT,RANGE
"RTN","LEX2047A",50,0)
 S I=0,VDT=3070101,RANGE=""
"RTN","LEX2047A",51,0)
 F  D  Q:'$L($G(RANGE))
"RTN","LEX2047A",52,0)
 . N EXEC,CODE,END,MIEN1,MIEN2,MOD,DA,DIK,ND,NN,ACR
"RTN","LEX2047A",53,0)
 . S I=I+1,EXEC="S RANGE=$T(TC26+"_I_")" X EXEC
"RTN","LEX2047A",54,0)
 . S RANGE=$P(RANGE,";;",2,299) Q:'$L(RANGE)  I '$L($TR($TR(RANGE,";","")," ","")) S RANGE="" Q
"RTN","LEX2047A",55,0)
 . S CODE=$P(RANGE,";",1),END=$P(RANGE,";",2) Q:$L(CODE)'=5!($L(END)'=5)
"RTN","LEX2047A",56,0)
 . S MIEN1=$P(RANGE,";",3),MIEN2=$P(RANGE,";",4) Q:+MIEN1'>0  Q:+MIEN2'>0
"RTN","LEX2047A",57,0)
 . D IND(("    CPT Range "_CODE))
"RTN","LEX2047A",58,0)
 . S MOD="TC",DA(1)=35,DA=MIEN1,DIK="^DIC(81.3,"_DA(1)_",10,",ND=DIK_DA_",0)",NN=CODE_"^"_END_"^"_VDT_"^"
"RTN","LEX2047A",59,0)
 . S ACR=$$ACR(CODE,MOD,(VDT+1)) I +ACR'>0 S @ND=NN D IX1^DIK
"RTN","LEX2047A",60,0)
 . S MOD="26",DA(1)=7,DA=MIEN2,DIK="^DIC(81.3,"_DA(1)_",10,",ND=DIK_DA_",0)",NN=CODE_"^"_END_"^"_VDT_"^"
"RTN","LEX2047A",61,0)
 . S ACR=$$ACR(CODE,MOD,(VDT+1)) I +ACR'>0 S @ND=NN D IX1^DIK
"RTN","LEX2047A",62,0)
 Q
"RTN","LEX2047A",63,0)
 ;
"RTN","LEX2047A",64,0)
C3 ;   134531 - CPT Descriptions for 83519 and 83520
"RTN","LEX2047A",65,0)
 D IND(" "),REMI("CPT Descriptions for 83519 and 83520","HD0000000 134531")
"RTN","LEX2047A",66,0)
 D IND("    83519 - IMMUNOASSAY, RIA")
"RTN","LEX2047A",67,0)
 D IND("    83520 - IMMUNOASSAY, NONANTIBODY")
"RTN","LEX2047A",68,0)
 N IENS,IENA,IENB,IEN,LEXDA,DA,DIK,DIE S IENA=$O(^ICPT(83519,61,"B",2940601,0)),IENB=$O(^ICPT(83520,61,"B",2940601,0)) Q:IENA'>0  Q:IENB'>0
"RTN","LEX2047A",69,0)
 K IENS,FDA S (IEN,LEXDA(1),DA(1))=83519,(LEXDA,DA)=IENA
"RTN","LEX2047A",70,0)
 S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,1)="IMMUNOASSAY, RIA" K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2047A",71,0)
 K FDA S FDA(81,IEN_",",2)="IMMUNOASSAY, RIA" D FILE^DIE("","FDA") S DA=IEN,DIK="^ICPT(" D IX1^DIK
"RTN","LEX2047A",72,0)
 K IENS,FDA S (IEN,LEXDA(1),DA(1))=83520,(LEXDA,DA)=IENB
"RTN","LEX2047A",73,0)
 S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,1)="IMMUNOASSAY, NONANTIBODY" K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2047A",74,0)
 K FDA S FDA(81,IEN_",",2)="IMMUNOASSAY, NONANTIBODY" D FILE^DIE("","FDA") S DA=IEN,DIK="^ICPT(" D IX1^DIK
"RTN","LEX2047A",75,0)
 K IENS,FDA S (IEN,LEXDA,DA)=301847
"RTN","LEX2047A",76,0)
 S FDA(757.01,IEN_",",.01)="Immunoassay, Analyte, Quantitative; by Radiopharmaceutical Technique (eg, RIA)"
"RTN","LEX2047A",77,0)
 D FILE^DIE("","FDA") S DA=IEN,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2047A",78,0)
 Q
"RTN","LEX2047A",79,0)
C4 ;   134531 - CPT Descriptions for 82270 and 82271
"RTN","LEX2047A",80,0)
 D IND(" "),REMI("CPT Descriptions for 82270 and 82271","HD0000000 134531")
"RTN","LEX2047A",81,0)
 D IND("    82270 - OCCULT BLOOD, FECES, SINGLE")
"RTN","LEX2047A",82,0)
 D IND("    82271 - OCCULT BLOOD, OTHER SOURCES")
"RTN","LEX2047A",83,0)
 N IENS,IENA,IENB,IEN,LEXDA,DA,DIK,DIE S IENA=$O(^ICPT(82270,61,"B",3060101,0)),IENB=$O(^ICPT(82271,61,"B",3060101,0)) Q:IENA'>0  Q:IENB'>0
"RTN","LEX2047A",84,0)
 K IENS,FDA S (IEN,LEXDA(1),DA(1))=82270,(LEXDA,DA)=IENA
"RTN","LEX2047A",85,0)
 S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,1)="OCCULT BLOOD, FECES, SINGLE" K IENR,MSG
"RTN","LEX2047A",86,0)
 D UPDATE^DIE("","FDA","IENR","MSG") K FDA S FDA(81,IEN_",",2)="OCCULT BLOOD, FECES, SINGLE" D FILE^DIE("","FDA") S DA=IEN,DIK="^ICPT(" D IX1^DIK
"RTN","LEX2047A",87,0)
 K IENS,FDA S (IEN,LEXDA,DA)=333338
"RTN","LEX2047A",88,0)
 S FDA(757.01,(IEN_","),.01)="Blood, Occult, by Peroxidase Activity (Eg, Guaiac), Qualitative; Feces, consec collected specimens w/ Single Determination, for Colorectal Neoplasm Screening"
"RTN","LEX2047A",89,0)
 S FDA(757.01,(IEN_","),.01)=FDA(757.01,(IEN_","),.01)_" (ie, patient was provided 3 cards or single triple card for consec collection)"
"RTN","LEX2047A",90,0)
 D FILE^DIE("","FDA") S DA=IEN,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2047A",91,0)
 K IENS,FDA S (IEN,LEXDA(1),DA(1))=82271,(LEXDA,DA)=IENB
"RTN","LEX2047A",92,0)
 S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,1)="OCCULT BLOOD, OTHER SOURCES" K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2047A",93,0)
 K FDA S FDA(81,IEN_",",2)="OCCULT BLOOD, OTHER SOURCES" D FILE^DIE("","FDA") S DA=IEN,DIK="^ICPT(" D IX1^DIK
"RTN","LEX2047A",94,0)
 Q
"RTN","LEX2047A",95,0)
C5 ;   138905 - CPT Descriptions for 96101-96103
"RTN","LEX2047A",96,0)
 D IND(" "),REMI("CPT Descriptions for 96101-96103","HD0000000 138905")
"RTN","LEX2047A",97,0)
 D IND("    96101 - PSYCH TESTING BY PSYCH/PHYS")
"RTN","LEX2047A",98,0)
 D IND("    96102 - PSYCH TESTING BY TECHNICIAN")
"RTN","LEX2047A",99,0)
 D IND("    96103 - PSYCH TESTING ADMIN BY COMP")
"RTN","LEX2047A",100,0)
 N IENS,IENA,IENB,IEN,LEXDA,DA,DIK,DIE
"RTN","LEX2047A",101,0)
 S (IEN,DA(1),LEXDA(1))=96101,(IENA,LEXDA,DA)=$O(^ICPT(IEN,61,"B",3060101,0)) I +IEN>0,+IENA>0 D
"RTN","LEX2047A",102,0)
 . K IENS,FDA S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,1)="PSYCH TESTING BY PSYCH/PHYS" K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2047A",103,0)
 . K IENS,DA,FDA S DA=IEN S FDA(81,IEN_",",2)="PSYCH TESTING BY PSYCH/PHYS" D FILE^DIE("","FDA")
"RTN","LEX2047A",104,0)
 . K DA S DA=IEN,DIK="^ICPT(" D IX1^DIK
"RTN","LEX2047A",105,0)
 S (IEN,DA(1),LEXDA(1))=96102,(IENA,LEXDA,DA)=$O(^ICPT(IEN,61,"B",3060101,0)) I +IEN>0,+IENA>0 D
"RTN","LEX2047A",106,0)
 . K IENS,FDA S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,1)="PSYCH TESTING BY TECHNICIAN" K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2047A",107,0)
 . K IENS,DA,FDA S DA=IEN S FDA(81,IEN_",",2)="PSYCH TESTING BY TECHNICIAN" D FILE^DIE("","FDA")
"RTN","LEX2047A",108,0)
 . K DA S DA=IEN,DIK="^ICPT(" D IX1^DIK
"RTN","LEX2047A",109,0)
 S (IEN,DA(1),LEXDA(1))=96103,(IENA,LEXDA,DA)=$O(^ICPT(IEN,61,"B",3060101,0)) I +IEN>0,+IENA>0 D
"RTN","LEX2047A",110,0)
 . K IENS,FDA S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,1)="PSYCH TESTING ADMIN BY COMP" K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2047A",111,0)
 . K IENS,DA,FDA S DA=IEN S FDA(81,IEN_",",2)="PSYCH TESTING ADMIN BY COMP" D FILE^DIE("","FDA")
"RTN","LEX2047A",112,0)
 . K DA S DA=IEN,DIK="^ICPT(" D IX1^DIK
"RTN","LEX2047A",113,0)
 Q
"RTN","LEX2047A",114,0)
 ;                 
"RTN","LEX2047A",115,0)
 ; Miscellaneous
"RTN","LEX2047A",116,0)
TC26 ;   Modifiers TC and 26 Ranges
"RTN","LEX2047A",117,0)
 ;;76998;76998;248;163
"RTN","LEX2047A",118,0)
 ;;77001;77003;249;164
"RTN","LEX2047A",119,0)
 ;;77011;77014;250;165
"RTN","LEX2047A",120,0)
 ;;77021;77022;251;166
"RTN","LEX2047A",121,0)
 ;;77031;77032;252;167
"RTN","LEX2047A",122,0)
 ;;77051;77059;253;168
"RTN","LEX2047A",123,0)
 ;;77072;77084;254;169
"RTN","LEX2047A",124,0)
 ;;92025;92025;255;170
"RTN","LEX2047A",125,0)
 ;;96020;96020;256;171
"RTN","LEX2047A",126,0)
 ;;G0389;G0389;257;172
"RTN","LEX2047A",127,0)
 ;;
"RTN","LEX2047A",128,0)
 Q
"RTN","LEX2047A",129,0)
ACR(X,MOD,EFF) ;   Code contained in Active Modifier Code Range
"RTN","LEX2047A",130,0)
 N CODE S CODE=$G(X),MOD=$G(MOD),EFF=$G(EFF)
"RTN","LEX2047A",131,0)
 N TD,CIEN,MIEN,RIEN,IEN,IEN2,BEG,END,BN,EN,CN,ACT,INA,IN,OK,NIEN,ND,NN S TD=$$FMADD^XLFDT($$DT^XLFDT,91)
"RTN","LEX2047A",132,0)
 Q:'$D(^ICPT("BA",(CODE_" "))) -1  Q:'$D(^DIC(81.3,"BA",(MOD_" "))) -1  Q:EFF'?7N -1  Q:EFF'<TD -1
"RTN","LEX2047A",133,0)
 S CIEN=$$CODEN^ICPTCOD(CODE),MIEN=0,IEN=0 F  S IEN=$O(^DIC(81.3,"BA",(MOD_" "),IEN)) Q:+IEN'>0  D
"RTN","LEX2047A",134,0)
 . N IEN2,STA,ND S IEN2=$O(^DIC(81.3,IEN,60,"B"," "),-1),IEN2=$O(^DIC(81.3,IEN,60,"B",+IEN2," "),-1)
"RTN","LEX2047A",135,0)
 . S ND=$G(^DIC(81.3,IEN,60,IEN2,0)),STA=$P(ND,"^",2) Q:+STA'>0  S MIEN=IEN
"RTN","LEX2047A",136,0)
 Q:CIEN'>0 -1  Q:'$D(^ICPT(CIEN,0)) -1  Q:MIEN'>0 -1  Q:'$D(^DIC(81.3,MIEN,0)) -1
"RTN","LEX2047A",137,0)
 S (OK,IEN,IN)=0 F  S IEN=$O(^DIC(81.3,MIEN,10,IEN)) Q:+IEN=0  D  Q:OK
"RTN","LEX2047A",138,0)
 . N ND S ND=$G(^DIC(81.3,MIEN,10,IEN,0)),BEG=$P(ND,"^",1),END=$P(ND,"^",2),ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2047A",139,0)
 . S:$L(BEG)=5&('$L(END)) END=BEG Q:$L(END)'=5  Q:$L(BEG)'=5
"RTN","LEX2047A",140,0)
 . S BN=$S(BEG?1.N:+BEG,BEG?4N1A:$A($E(BEG,5))*10_$E(BEG,1,4),1:$A(BEG)_$E(BEG,2,5))
"RTN","LEX2047A",141,0)
 . S EN=$S(END?1.N:+END,END?4N1A:$A($E(END,5))*10_$E(END,1,4),1:$A(END)_$E(END,2,5))
"RTN","LEX2047A",142,0)
 . S CN=$S(CODE?1.N:+CODE,CODE?4N1A:$A($E(CODE,5))*10_$E(CODE,1,4),1:$A(CODE)_$E(CODE,2,5))
"RTN","LEX2047A",143,0)
 . Q:CN<BN!(CN>EN)  S:+INA>0 IN=1 Q:+INA>0  S:CN'<BN&(CN'>EN) OK=1
"RTN","LEX2047A",144,0)
 S X=OK
"RTN","LEX2047A",145,0)
 Q X
"RTN","LEX2047A",146,0)
REMI(X,Y) ;   Remedy Ticket - Indented
"RTN","LEX2047A",147,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2047A",148,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>54  S X=X_" "
"RTN","LEX2047A",149,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2047A",150,0)
IND(X) ;   Indent Text
"RTN","LEX2047A",151,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X)
"RTN","LEX2047A",152,0)
 Q
"RTN","LEX2047B")
0^2^B51205115^n/a
"RTN","LEX2047B",1,0)
LEX2047B ; ISL/KER - Post Install LEX*2.0*47 (part 2)  ; 02/05/2007
"RTN","LEX2047B",2,0)
 ;;2.0;LEXICON UTILITY;**47**;Sep 23, 1996;Build 5
"RTN","LEX2047B",3,0)
 ;                    
"RTN","LEX2047B",4,0)
 ; Global Variables
"RTN","LEX2047B",5,0)
 ;    ^ICPT(           DBIA 4489
"RTN","LEX2047B",6,0)
 ;    ^LEX(757.01      N/A
"RTN","LEX2047B",7,0)
 ;    ^LEX(757.02      N/A
"RTN","LEX2047B",8,0)
 ;    ^DIC(81.3,       DBIA 4492
"RTN","LEX2047B",9,0)
 ;                    
"RTN","LEX2047B",10,0)
 ; External References
"RTN","LEX2047B",11,0)
 ;    FILE^DIE         DBIA 2053
"RTN","LEX2047B",12,0)
 ;    UPDATE^DIE       DBIA 2053
"RTN","LEX2047B",13,0)
 ;    ^DIK             DBIA 10013          
"RTN","LEX2047B",14,0)
 ;    IX1^DIK          DBIA 10013
"RTN","LEX2047B",15,0)
 ;    $$IENS^DILF      DBIA 2054
"RTN","LEX2047B",16,0)
 ;    MES^XPDUTL       DBIA 10141
"RTN","LEX2047B",17,0)
 ;                    
"RTN","LEX2047B",18,0)
EN ; Main Entry Point
"RTN","LEX2047B",19,0)
 D C6,C7,C8,C9,C10,C11
"RTN","LEX2047B",20,0)
 Q
"RTN","LEX2047B",21,0)
C6 ;   161266 Canalith (HCPCS S9092) is misspelled
"RTN","LEX2047B",22,0)
 D IND(" "),REMI("CANALITH (S9092) is misspelled","HD0000000 161266")
"RTN","LEX2047B",23,0)
 D IND("    S9092 - Change CANOLITH to CANALITH")
"RTN","LEX2047B",24,0)
 N IENS,IENA,IENB,IEN,LEXDA,DA,DIK,DIE
"RTN","LEX2047B",25,0)
 K IENS,FDA S (IEN,DA)=329685,IENS=IEN_",",FDA(757.01,IENS,.01)="Canalith Repositioning, per visit" D FILE^DIE("","FDA") S DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2047B",26,0)
 S (IEN,DA(1),LEXDA(1))=107092,(IENA,LEXDA,DA)=$O(^ICPT(IEN,61,"B",3030101,0)) I +IEN>0,+IENA>0 D
"RTN","LEX2047B",27,0)
 . K IENS,FDA S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,1)="CANALITH REPOSITIONING" K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2047B",28,0)
 S (IEN,DA(1),LEXDA(1))=107092,(IENA,LEXDA,DA)=$O(^ICPT(IEN,62,"B",3030101,0)) I +IEN>0,+IENA>0 D
"RTN","LEX2047B",29,0)
 . K IENS,FDA N DA,I S DA(2)=LEXDA(1),DA(1)=LEXDA S I=0  F  S I=$O(^ICPT(DA(2),62,DA(1),1,I)) Q:+I'>0  D
"RTN","LEX2047B",30,0)
 . . S DA=I Q:$G(^ICPT(DA(2),62,DA(1),1,DA,0))'["CANOLITH REPOSITIONING, PER VISIT"  N LEXDA S LEXDA(2)=DA(2),LEXDA(1)=DA(1),LEXDA=DA
"RTN","LEX2047B",31,0)
 . . S IENS=$$IENS^DILF(.LEXDA),FDA(81.621,IENS,.01)="CANALITH REPOSITIONING, PER VISIT" K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2047B",32,0)
 I $D(^ICPT(107092,"D",1,0)) D
"RTN","LEX2047B",33,0)
 . Q:$G(^ICPT(107092,"D",1,0))'["CANOLITH REPOSITIONING, PER VISIT"
"RTN","LEX2047B",34,0)
 . S ^ICPT(107092,"D",1,0)="CANALITH REPOSITIONING, PER VISIT" K ^ICPT(107092,"D","B") S ^ICPT(107092,"D","B","CANALITH REPOSITIONING, PER VI",1)=""
"RTN","LEX2047B",35,0)
 K IENS,DA,FDA S DA=IEN S FDA(81,IEN_",",2)="CANALITH REPOSITIONING" D FILE^DIE("","FDA") S DA=IEN,DIK="^ICPT(" D IX1^DIK
"RTN","LEX2047B",36,0)
 Q
"RTN","LEX2047B",37,0)
C7 ;   166892 CPT J0585 Botulinum Toxin Quantity
"RTN","LEX2047B",38,0)
 D IND(" "),REMI("Botulinum Toxin Quantity (J0585)","HD0000000 166892")
"RTN","LEX2047B",39,0)
 K IENS,FDA S (IEN,LEXDA,DA)=320347 S FDA(757.01,IEN_",",.01)="Botulinum toxin type A, per unit"
"RTN","LEX2047B",40,0)
 D FILE^DIE("","FDA") S DA=IEN,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2047B",41,0)
 Q
"RTN","LEX2047B",42,0)
C8 ;   168449 Lookup 038.9 returns 995.91
"RTN","LEX2047B",43,0)
 D IND(" "),REMI("Lookup ICD 038.9 returns 995.91","HD0000000 168449")
"RTN","LEX2047B",44,0)
 D REMI("Lookup ICD 038.9 returns 995.91 (dupe)","HD0000000 171316")
"RTN","LEX2047B",45,0)
 N FDA,DA,DIK S DA=330020
"RTN","LEX2047B",46,0)
 K FDA S FDA(757.02,(DA_","),6)=0 D FILE^DIE("","FDA")
"RTN","LEX2047B",47,0)
 K FDA S FDA(757.02,(DA_","),4)=0 D FILE^DIE("","FDA") S DA=324672
"RTN","LEX2047B",48,0)
 K FDA S FDA(757.02,(DA_","),6)=1 D FILE^DIE("","FDA")
"RTN","LEX2047B",49,0)
 K FDA S FDA(757.02,(DA_","),4)=1 D FILE^DIE("","FDA")
"RTN","LEX2047B",50,0)
 K FDA S FDA(757.02,(DA_","),5)="" D FILE^DIE("","FDA")
"RTN","LEX2047B",51,0)
 S DA(1)=324672,DA=2 I $D(^LEX(757.02,DA(1),4,DA,0)) D
"RTN","LEX2047B",52,0)
 . S DIK="^LEX(757.02,"_DA(1)_",4," D ^DIK
"RTN","LEX2047B",53,0)
 K DA S DIK="^LEX(757.02,",DA=330020 D IX1^DIK S DA=324672 D IX1^DIK
"RTN","LEX2047B",54,0)
 Q
"RTN","LEX2047B",55,0)
C9 ;   174410 New dental code D2970
"RTN","LEX2047B",56,0)
 D IND(" "),REMI("New Dental Code D2970","HD0000000 174410")
"RTN","LEX2047B",57,0)
 N ACT,CPIEN,DA,DIC,DIE,DIK,EFF,EXIEN,EXIST,EXP,FDA,I,IEN,IENS,MSG,SOIEN,TXT S EXIEN=318447,IENS=EXIEN_","
"RTN","LEX2047B",58,0)
 S EXP="Temporary Crown (Fractured Tooth), usually a preformed artificial Crown, fitted over a damaged tooth as an immediate protective device.  (not to be used as a temporization during crown fabrication)"
"RTN","LEX2047B",59,0)
 K FDA S FDA(757.01,IENS,.01)=EXP D FILE^DIE("","FDA") K DA S DA=EXIEN,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2047B",60,0)
 K DA,DIK,DIC,FDA,IENS,ACT S SOIEN=254,ACT=3,EFF=3070101,IENS="+"_ACT_","_SOIEN_","
"RTN","LEX2047B",61,0)
 S EXIST=$O(^LEX(757.02,SOIEN,4,"B",EFF,0)),EXIST=$P($G(^LEX(757.02,SOIEN,4,+EXIST,0)),"^",2)
"RTN","LEX2047B",62,0)
 S FDA(757.28,IENS,.01)=EFF,FDA(757.28,IENS,1)=1 I '$L(EXIST)!(+EXIST'>0) D UPDATE^DIE("S","FDA",,("MSG("_SOIEN_")"))
"RTN","LEX2047B",63,0)
 K DA,DIK,DIC,FDA,IENS,ACT S CPIEN=100384,EFF=3070101
"RTN","LEX2047B",64,0)
 S IENS=CPIEN_",",FDA(81,IENS,2)="TEMPORARY CROWN (FX TOOTH)",FDA(81,IENS,5)="",FDA(81,IENS,7)=""
"RTN","LEX2047B",65,0)
 S FDA(81,IENS,8)=EFF D UPDATE^DIE("S","FDA",,("MSG("_CPIEN_")"))
"RTN","LEX2047B",66,0)
 K DA,DIK,DIC,FDA,IENS,ACT S ACT=3,IENS="+"_ACT_","_CPIEN_","
"RTN","LEX2047B",67,0)
 S EXIST=$O(^ICPT(CPIEN,60,"B",EFF,0)),EXIST=$P($G(^ICPT(CPIEN,60,+EXIST,0)),"^",2)
"RTN","LEX2047B",68,0)
 S FDA(81.02,IENS,.01)=EFF,FDA(81.02,IENS,.02)=1
"RTN","LEX2047B",69,0)
 I '$L(EXIST)!(+EXIST'>0) D UPDATE^DIE("S","FDA",,("MSG("_CPIEN_")"))
"RTN","LEX2047B",70,0)
 K DA,DIK,DIC,FDA,IENS,ACT,TXT S ACT=2,IENS="+"_ACT_","_CPIEN_",",TXT="TEMPORARY CROWN (FX TOOTH)"
"RTN","LEX2047B",71,0)
 S EXIST=$O(^ICPT(CPIEN,61,"B",EFF,0)),EXIST=$P($G(^ICPT(CPIEN,61,+EXIST,0)),"^",2)
"RTN","LEX2047B",72,0)
 S FDA(81.061,IENS,.01)=EFF,FDA(81.061,IENS,1)=TXT
"RTN","LEX2047B",73,0)
 I '$L(EXIST) D UPDATE^DIE("S","FDA",,("MSG("_CPIEN_")"))
"RTN","LEX2047B",74,0)
 K DA,DIK,DIC,FDA,IENS,ACT,TXT,IEN S ACT=2,IENS="+"_ACT_","_CPIEN_",",IEN=0
"RTN","LEX2047B",75,0)
 S TXT(1)="TEMPORARY CROWN (FRACTURED TOOTH), USUALLY A PREFORMED ARTIFICIAL CROWN,"
"RTN","LEX2047B",76,0)
 S TXT(2)="FITTED OVER A DAMAGED TOOTH AS AN IMMEDIATE PROTECTIVE DEVICE.  (NOT TO"
"RTN","LEX2047B",77,0)
 S TXT(3)="BE USED AS A TEMPORIZATION DURING CROWN FABRICATION)"
"RTN","LEX2047B",78,0)
 S EXIST=$O(^ICPT(CPIEN,62,"B",EFF,0)),EXIST=$P($G(^ICPT(CPIEN,62,+EXIST,0)),"^",1)
"RTN","LEX2047B",79,0)
 S FDA(81.062,IENS,.01)=EFF I '$L(EXIST)!(EXIST'=EFF) D UPDATE^DIE("S","FDA",,("MSG("_CPIEN_")"))
"RTN","LEX2047B",80,0)
 S IEN=$O(^ICPT(CPIEN,62,"B",EFF,0)) I +IEN>0 D
"RTN","LEX2047B",81,0)
 . N DA,DIK,I S DA(2)=CPIEN,DA(1)=IEN S I=0 F  S I=$O(^ICPT(DA(2),62,DA(1),1,I)) Q:+I'>0  D
"RTN","LEX2047B",82,0)
 . . S DIK="^ICPT("_DA(2)_",62,"_DA(1)_",1,",DA=I D ^DIK
"RTN","LEX2047B",83,0)
 . S DA(2)=CPIEN,DA(1)=IEN S I=0 F  S I=$O(TXT(I)) Q:+I'>0  D
"RTN","LEX2047B",84,0)
 . . Q:'$L($G(TXT(I)))  S ^ICPT(DA(2),62,DA(1),1,I,0)=$G(TXT(I))
"RTN","LEX2047B",85,0)
 . . S DIK="^ICPT("_DA(2)_",62,"_DA(1)_",1,",DA=I D:+($G(CPIEN))>0&(+($G(IEN))>0)&(+($G(I))>0) IX1^DIK
"RTN","LEX2047B",86,0)
 K DA,DIK S DA(1)=CPIEN,DA=IEN,DIK="^ICPT("_DA(1)_",62," D:+($G(CPIEN))>0&(+($G(IEN))>0) IX1^DIK
"RTN","LEX2047B",87,0)
 Q
"RTN","LEX2047B",88,0)
C10 ;   162142 - 63044 with RT
"RTN","LEX2047B",89,0)
 ;   169057 - 63043-63044 with RT
"RTN","LEX2047B",90,0)
 D IND(" "),REMI("CPT Modifier Ranges Added for RT/LT","HD0000000 161142")
"RTN","LEX2047B",91,0)
 D REMI("CPT Modifier Ranges Added for RT/LT (similar)","HD0000000 169057")
"RTN","LEX2047B",92,0)
 D IND("    CPT Range 63040")
"RTN","LEX2047B",93,0)
 N MIEN,RIEN,VAL,NIEN
"RTN","LEX2047B",94,0)
 S VAL="63040^63040^3070101^",MIEN=83,RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2047B",95,0)
 . Q:$G(^DIC(81.3,MIEN,10,RIEN,0))'=VAL
"RTN","LEX2047B",96,0)
 . N DA,DIK S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_DA(1)_",10," D ^DIK K ^DIC(81.3,MIEN,10,RIEN,0)
"RTN","LEX2047B",97,0)
 I '$D(^DIC(81.3,MIEN,"M",63040)) D
"RTN","LEX2047B",98,0)
 . N NIEN S NIEN=$O(^DIC(81.3,MIEN,10," "),-1)+1,^DIC(81.3,MIEN,10,NIEN,0)=VAL,DA=MIEN,DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2047B",99,0)
 S VAL="63042^63044^3070101^",MIEN=83,RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2047B",100,0)
 . Q:$G(^DIC(81.3,MIEN,10,RIEN,0))'=VAL
"RTN","LEX2047B",101,0)
 . N DA,DIK S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_DA(1)_",10," D ^DIK K ^DIC(81.3,MIEN,10,RIEN,0)
"RTN","LEX2047B",102,0)
 I '$D(^DIC(81.3,MIEN,"M",63042)) D
"RTN","LEX2047B",103,0)
 . N NIEN S NIEN=$O(^DIC(81.3,MIEN,10," "),-1)+1,^DIC(81.3,MIEN,10,NIEN,0)=VAL,DA=MIEN,DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2047B",104,0)
 D IND("    CPT Range 63042-63044")
"RTN","LEX2047B",105,0)
 S VAL="63040^63040^3070101^",MIEN=109,RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2047B",106,0)
 . Q:$G(^DIC(81.3,MIEN,10,RIEN,0))'=VAL
"RTN","LEX2047B",107,0)
 . N DA,DIK S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_DA(1)_",10," D ^DIK K ^DIC(81.3,MIEN,10,RIEN,0)
"RTN","LEX2047B",108,0)
 I '$D(^DIC(81.3,MIEN,"M",63040)) D
"RTN","LEX2047B",109,0)
 . N NIEN S NIEN=$O(^DIC(81.3,MIEN,10," "),-1)+1,^DIC(81.3,MIEN,10,NIEN,0)=VAL,DA=MIEN,DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2047B",110,0)
 S VAL="63042^63044^3070101^",MIEN=109,RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2047B",111,0)
 . Q:$G(^DIC(81.3,MIEN,10,RIEN,0))'=VAL
"RTN","LEX2047B",112,0)
 . N DA,DIK S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_DA(1)_",10," D ^DIK K ^DIC(81.3,MIEN,10,RIEN,0)
"RTN","LEX2047B",113,0)
 I '$D(^DIC(81.3,MIEN,"M",63042)) D
"RTN","LEX2047B",114,0)
 . N NIEN S NIEN=$O(^DIC(81.3,MIEN,10," "),-1)+1,^DIC(81.3,MIEN,10,NIEN,0)=VAL,DA=MIEN,DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2047B",115,0)
 Q
"RTN","LEX2047B",116,0)
C11 ;   173816 - Re-Code Hyperglycemia as ICD 790.29
"RTN","LEX2047B",117,0)
 D IND(" "),REMI("Re-Code ""Hyperglycemia"" as ICD Code 790.29","HD0000000 173816")
"RTN","LEX2047B",118,0)
 N DA,DIE,DIK,EFF,EXIST,FDA,IEN,IENE,IENS,TXT
"RTN","LEX2047B",119,0)
 K FDA,IENS,IEN,DA,DIK S IEN=63620,IENS=IEN_","
"RTN","LEX2047B",120,0)
 S FDA(757.02,IENS,1)=790.29 D FILE^DIE("","FDA") S DA=IEN,DIK="^LEX(757.02," D IX1^DIK
"RTN","LEX2047B",121,0)
 K FDA,IENS,IEN,DA,DIK S IEN=329955,IENS=IEN_","
"RTN","LEX2047B",122,0)
 S FDA(757.01,IENS,.01)="Abnormal Glucose" D FILE^DIE("","FDA") S DA=IEN,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2047B",123,0)
 Q
"RTN","LEX2047B",124,0)
 ;                 
"RTN","LEX2047B",125,0)
 ; Miscellaneous
"RTN","LEX2047B",126,0)
REMI(X,Y) ;   Remedy Ticket - Indented
"RTN","LEX2047B",127,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2047B",128,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>54  S X=X_" "
"RTN","LEX2047B",129,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2047B",130,0)
IND(X) ;   Indent Text
"RTN","LEX2047B",131,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X) Q
"VER")
8.0^22.0
"BLD",6516,6)
^45
**END**
**END**

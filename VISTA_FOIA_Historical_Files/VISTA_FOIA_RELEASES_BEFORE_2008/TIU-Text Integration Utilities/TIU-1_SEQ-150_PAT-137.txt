
=============================================================================
Run Date: AUG 28, 2003                     Designation: TIU*1*137
Package : TIU - TEXT INTEGRATION UTILITIES    Priority: Mandatory
Version : 1       SEQ #150                      Status: Released
                  Compliance Date: SEP 28, 2003
=============================================================================

Associated patches: (c)USR*1*23        install with patch       `TIU*1*137'
                    (v)TIU*1*89    <<= must be installed BEFORE `TIU*1*137'

Subject: ANATOMIC PATH ELECTRONIC SIGNATURE SUPPORT

Category: 
  - Routine
  - Data Dictionary
  - Other

Description:
============

 I. DESCRIPTION:
    ============
  
 This patch supports LR*5.2*259, ANATOMIC PATHOLOGY ELECTRONIC
 SIGNATURE, permitting Anatomic Pathology documents to be stored in TIU.
 An option which must be run AFTER THE PATCH IS INSTALLED creates new
 Document Definitions, and a new User Class and Business Rules to govern
 their behavior.  Business Rules prevent alteration of Anatomic Pathology
 documents from options other than Anatomic Pathology menus.
  
 II. TECHNICAL COMPONENTS:
     ====================
  
 File ^TIU(8925.1, TIU DOCUMENT DEFINITION:
 ==========================================
  
 1. New Document Definitions are created:
  
 Option [TIU137 DDEFS & RULES, ANATPATH], which must be run AFTER THE PATCH
 IS INSTALLED creates a new Class, LR LABORATORY REPORTS, a new Document
 Class, LR ANATOMIC PATHOLOGY, and 4 new Titles.  They are created under
 Class CLINICAL DOCUMENTS, with the following hierarchical structure:
  
 1      CLINICAL DOCUMENTS                     CL  
 2       +ADDENDUM                             DC  
 3       +DISCHARGE SUMMARY                    CL  
 4       +PROGRESS NOTES                       CL  
 5        LR LABORATORY REPORTS                CL
 6          LR ANATOMIC PATHOLOGY              DC
 7            LR AUTOPSY REPORT                TL
 8            LR CYTOPATHOLOGY REPORT          TL
 9            LR ELECTRON MICROSCOPY REPORT    TL 
 10           LR SURGICAL PATHOLOGY REPORT     TL 
  
 These six new LR entries in the Document Definition file are activated
 upon creation.
  
 2. The input transforms for fields NAME (#.01), ABBREVIATION (#.02), and
 PRINT NAME (#.03) are revised to not rely on the existence of the local
 variable DA, which is not recognized by VA FileMan's Database Server calls
 (i.e., UPDATE^DIE and FILE^DIE). Routines in this patch use these 
 Database Server calls. The Reminders Exchange Utility, which is sometimes
 used to export Document Definitions (though not in this patch), also uses
 these Database Server calls.
  
 NOTE:  This same DD change is also contained in patch TIU*1*112, 
 permitting TIU*1*112 to be independent of patch TIU*1*137.
  
 USR FILES:                                
 ==========
 Option [TIU137 DDEFS & RULES, ANATPATH] which creates new Document
 Definitions, also creates a new User Class, LR ANATOMIC PATH EMPTY CLASS,
 and 9 new Business Rules. See patch USR*1*23 for detailed descriptions of
 USR components.
  
 OPTIONS:
 ========
 This patch exports a new option, Create DDEFS, Rules for Anat Path
 [TIU137 DDEFS & RULES, ANATPATH]. It is this option, not the patch itself,
 which creates the new TIU and USR entities needed for Anatomic Pathology.
  
 For more information on this option, see VI, POST-INSTALLATION 
 INSTRUCTIONS, below.
  
  
  ROUTINE SUMMARY:                                                  
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
  <tab>;;1.0;Text Integration Utilities;**[patch list]**;Jun 20, 1997
  
                             CHECK^XTSUMBLD results
  Routine name         Before Patch          After Patch         Patch List
  ============         ============          ===========         ==========
  TIUEN137                      N/A              4246830            137
  TIUPS137                      N/A             11255992            137
  TIULG                     3485315              4324628          1,89,137
  TIU137D                       N/A              1796975            137
  
 Routine TIULG includes a new module, ACTIVATE, which may be used when
 exporting Document Definitions in the future.  It permits Document
 Definitions to be activated AFTER Business Rules have been installed
 successfully.
  
 See patch USR*1*23 for information on USR routines.
  
  
 III.  INTERFACES AND DEPENDENCIES:
       ============================
  
    The DD change to fields .01,.02, and .03 of file 8925.1 (described
    above in section II, TECHNICAL COMPONENTS) is also contained in patch
    TIU*1*112, permitting TIU*1*112 to be independent of patch TIU*1*137.
  
  
 IV. SOFTWARE AND DOCUMENTATION RETRIEVAL: 
     =====================================
  
 SOFTWARE:
 =========
  
 This patch is distributed in a host file.  The host file contains two KIDS
 builds.  The first build is for patch TIU*1*137.  The second build is for
 Authorization/Subscription patch USR*1*23.
  
  
 The master build containing these two patches can be downloaded as
 described below under section DOCUMENTATION, using ASCII format, and using
 file name:
     TIU_10_137.KID
  
 DOCUMENTATION:                              
 ============== 
 The TIU User Manual and the TIU/ASU Implementation Guide have been updated
 to reflect the enhancements provided by TIU*1*137 and USR*1*23.  A new
 chapter on National Document Titles has been included in the updated
 User Manual.  The chapter on Exported Business Rules in the Implementation
 Guide has been updated with a section listing rules for LR ANATOMIC
 PATHOLOGY.
  
 The above updated manual and guide are available in the form of (.PDF)
 files, as follows:
  
    TIUUM.PDF       TIU User Manual
    TIUIM.PDF       TIU/ASU Implementation Guide
  
  
 These files can be retrieved in BINARY format by FTP. The preferred method
 is to FTP the files from
  
     download.vista.med.va.gov    
  
 which will transmit the files from the first available FTP server.
  
 The files may also be downloaded directly from a particular FTP location
 at the following locations.
  
         Albany                  ftp.fo-albany.med.va.gov
         Hines                   ftp.fo-hines.med.va.gov
         Salt Lake City          ftp.fo-slc.med.va.gov
  
  Files are available in the ANONYMOUS.SOFTWARE directory.
  
  
 The documentation for this patch can also be found using the following
 Web address:
  
    http://vista.med.va.gov/tiu/html/documentation.html
  
  
  
 V. INSTALLATION INSTRUCTIONS:
    ==========================
  
 This patch can be loaded with users on the system. Installation should
 require less than two minutes to complete.
   
  1. Use the LOAD A DISTRIBUTION OPTION on the KIDS INSTALLATION Menu, and 
     enter TIU_10_137.KID.
  
     Although it is unlikely that sites would already have Document
     Definitions or User Classes with the same names as those installed by
     this patch, this patch has Environment Check routines to prevent
     possible overwriting of such entries. We recommend running them when
     loading the distribution.
  
     If the site already has Document Definitions with names matching the
     six exported in this patch, the first Environment Check routine will
     display the matches, with the following dialogue:
  
                      ------------------
 Build TIU*1.0*137 has an Environmental Check Routine
 Want to RUN the Environment Check Routine? YES// 
    TIU*1.0*137
 Will first run the Environment Check Routine, TIUEN137
  
 You already have the following Document Definitions exported by this 
 patch. I don't want to overwrite them. Please change their names so they
 no longer match the exported ones, or if you are not using them, delete
 them.
  
 If you change the name of a Document Definition, remember to update its 
 Print Name, as well. For help, contact National VistA Support.
      LR LABORATORY REPORTS
      LR ANATOMIC PATHOLOGY
      LR AUTOPSY REPORT
      LR CYTOPATHOLOGY REPORT
      LR ELECTRON MICROSCOPY REPORT
      LR SURGICAL PATHOLOGY REPORT
 Aborting Install...
                      ------------------
  
  
     If the site already has a User Class named LR ANATOMIC PATH EMPTY 
     CLASS (but has no matching Document Definitions) the second
     Environment Check routine will display the following dialogue:
  
                      ------------------
    USR*1.0*23
 Will first run the Environment Check Routine, USREN23
  
 You already have the User Class exported by this patch. I don't want
 to overwrite it. Please change its name so it no longer matches the
 exported one, or if you are not using it, delete it.  For help, contact
 National VistA Support.
 Aborting Install...
                      ------------------
  
  
     If the environment checks finds matches, please follow instructions in
     the above dialogues.  The patch will not install until matches are
     changed or deleted.
  
     If there are no matches, or if matching entries were created by a 
     previous install of this patch and can be ignored, the above dialogues
     read:
  
                      ------------------
 Build TIU*1.0*137 has an Environmental Check Routine
 Want to RUN the Environment Check Routine? YES// 
    TIU*1.0*137
 Will first run the Environment Check Routine, TIUEN137
  
 Document Definitions look OK.
    USR*1.0*23
 Will first run the Environment Check Routine, USREN23
  
 User Classes look OK.
 Use INSTALL NAME: TIU*1.0*137 to install this Distribution.
                      ------------------
  
  2. On the KIDS menu under the 'INSTALLATION' menu, use the following
     options as desired:
        Print Transport Global
        Compare Transport Global to Current System
        Verify Checksums in Transport Global
        Backup a Transport Global
                      
  3. On the KIDS menu under the 'INSTALLATION' menu, use the following
     option to install the patch:
        Install Package(s) (TIU*1.0*137)
  
  4. When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of 
     Install? YES//", respond 'NO'.
  
  5. When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//",
     respond 'NO'.
  
  6. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and 
     Protocols? YES//', respond 'YES', and DISABLE the TIU* Options and
     Protocols.
  
  7. When prompted 'Delay Install (Minutes):  (0-60): 0//; respond '0'.
  
  8. After installing the patch, sites MUST RUN OPTION [TIU137 DDEFS &
     RULES, ANATPATH].  See VI, POST-INSTALLATION INSTRUCTIONS.
  
  9. We do not anticipate any need to reinstall this patch. If, however, it
     must be reinstalled, the environment check routine will recognize your
     Document Definitions as having been created by this patch, and will
     ignore them rather than creating new ones.
  
 10. This ability to recognize Document Definitions as having been created
     by this patch is made possible by setting globals ^XTMP("TIU137") and
     ^XTMP("USR23").  The globals are small. Option Clean old Job Nodes in
     XUTL [XQ XUTL $J NODES] will automatically delete these global nodes
     on or about December 1, 2003.
  
 11. After the patch has been installed and option [TIU137 DDEFS & RULES,
     ANATPATH] has successfully created all 6 Document Definitions, the
     User Class, and Business Rules, sites should delete the option, as 
     well as environment-check routines TIUEN137 and USREN23, and
     routines TIUPS137 and USRPS23 (which create the Document Definitions,
     User Class, and Business Rules).  Please verify checksums before 
     deleting routines.
  
  
 VI. POST-INSTALLATION INSTRUCTIONS:
     ===============================
  
 Option [TIU137 DDEFS & RULES, ANATPATH] is exported with the patch.  It
 must be run after the patch is installed. It is this option, not the patch
 itself, which actually creates the new Document Definitions, User Class,
 and Business Rules needed for Anatomic Pathology.
  
 Sites should run this option soon after installing this patch; sites 
 should NOT wait until patch LR*5.2*259, ANATOMIC PATHOLOGY ELECTRONIC
 SIGNATURE is released to run the option.  There are three reasons why
 sites should not wait for the release of patch LR*5.2*259 before running 
 this option:
  
 1.  Entities created by this option cannot be misused in the time before 
 ANATOMIC PATHOLOGY ELECTRONIC SIGNATURE is implemented.  Although the 
 titles have status ACTIVE, business rules created by this option prevent 
 users from entering notes on these titles. Notes cannot be entered on 
 these titles except by the Anatomic Pathology package itself, after 
 Electronic Signature is turned on in that package.
  
 2. Running the option NOW will eliminate the possibility of sites 
 forgetting to run it later when implementing ANATOMIC PATHOLOGY ELECTRONIC
 SIGNATURE.  Turning on ANATOMIC PATHOLOGY Electronic Signature without
 having run this option will cause errors when the package tries to create
 notes in TIU.
  
 3. The XTMP global created in this option is set to be automatically
 deleted on or about December 1, 2003. The option should not be run after
 that date.  Running the option NOW will ensure that entities are created 
 well before that date.
  
 The option should take less than one minute to run and will not disrupt 
 users, so it can be run at any time of day.
  
 When the option has run successfully to the end and messages have
 indicated that all 6 Document Definitions, the User Class, and Business
 Rules have been created successfully, with no problems encountered, this
 option should be deleted, along with routines TIUEN137, TIUPS137, USREN23,
 and USRPS23, after verifying the checksums.
  
 This option may be re-run if desired.  However, the option will not
 attempt to recreate entries that were already created successfully the
 first time the option was run. Also, once the User Class has been 
 created, the option, if re-run, will not attempt to recreate Business 
 Rules.
  
 The option must be run from programmer mode.
  
 There are several different dialogues that may be displayed when 
 the option is run, depending on the scenario.
  
 Scenario I:
 If the option is successful in creating Document Definitions, User Class,
 and Business Rules, it displays the following dialogue:
  
                        ------------------
 >D ^XUP
  
 Setting up programmer environment
 Terminal Type set to: C-VT320
  
 Select OPTION NAME: TIU137 DDEFS & RULES, ANATPATH       Create DDEFS, 
 Rules for Anat Path     action
 Create DDEFS, Rules for Anat Path
  
 This option creates Document Definitions, a User Class, and
 Business Rules for Laboratory Reports.
  
 DEVICE: HOME//   ANYWHERE
  
  
         ***** Document Definitions for LABORATORY REPORTS ****
  
 CLASS named LR LABORATORY REPORTS
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 DOCUMENT CLASS named LR ANATOMIC PATHOLOGY
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 TITLE named LR AUTOPSY REPORT
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 TITLE named LR CYTOPATHOLOGY REPORT
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 TITLE named LR ELECTRON MICROSCOPY REPORT
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 TITLE named LR SURGICAL PATHOLOGY REPORT
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
  
                           *************
  
         ***** User Class and Rules for LABORATORY REPORTS *****
  
 User Class named LR ANATOMIC PATH EMPTY CLASS
     created successfully.
  
 Business Rules created successfully.
                     
                             ********
                        ------------------  
  
 Scenario II: 
 If the option is run again, after Document Definitions and User Class 
 have already been created, the dialogue looks like this:
  
                        ------------------   
         ***** Document Definitions for LABORATORY REPORTS ****
  
 CLASS LR LABORATORY REPORTS
     was already created in a previous install.
 DOCUMENT CLASS LR ANATOMIC PATHOLOGY
     was already created in a previous install.
 TITLE LR AUTOPSY REPORT
     was already created in a previous install.
 TITLE LR CYTOPATHOLOGY REPORT
     was already created in a previous install.
 TITLE LR ELECTRON MICROSCOPY REPORT
     was already created in a previous install.
 TITLE LR SURGICAL PATHOLOGY REPORT
     was already created in a previous install.
  
                           *************
  
         ***** User Class and Rules for LABORATORY REPORTS *****
  
 User Class and, presumably, Business Rules
     were already created in a previous install.
  
                             ********
                        ------------------  
  
 Scenario 3: 
 If Document Definitions or User Classes matching those exported by this 
 patch have been inadvertently created BETWEEN the time the patch is 
 installed (where the environment has been found OK), and the time the
 option is first run, the dialogue is an abbreviated form of the install
 dialogue when the environment checks find duplicates. (See number 1 of
 section V, INSTALLATION INSTRUCTIONS.)
  
 These matches must be eliminated by changing names or deleting entries. 
 See number 1 of section V, INSTALLATION INSTRUCTIONS.  The option should
 then be run again.
  
 If duplicates are encountered when running the option, the dialogue will
 look like this:
  
                        ------------------  
          ***** Document Definitions for LABORATORY REPORTS *****
  
 Duplicate problem.  See description for patch TIU*1*137,
 in the National Patch Module.
  
                            *************
  
         ***** User Class and Rules for LABORATORY REPORTS *****
  
 Duplicate problem.  See description for patch TIU*1*137,
 in the National Patch Module.
  
                              *********
                        ------------------  

Routine Information:
====================

Routine Name:
  - TIUPS137


Routine Checksum:

Routine Name:
  - TIUEN137


Routine Checksum:

Routine Name:
  - TIU137D


Routine Checksum:

Routine Name:
  - TIULG


Routine Checksum:

=============================================================================
User Information:
Entered By  : MCCLENAHAN,MARGARET           Date Entered  : JUN 06, 2002
Completed By: STERNHAGEN,SHERRIL            Date Completed: AUG 26, 2003
Released By : SAUNDERS,TOM                  Date Released : AUG 28, 2003
=============================================================================


Packman Mail Message:
=====================

No routines included

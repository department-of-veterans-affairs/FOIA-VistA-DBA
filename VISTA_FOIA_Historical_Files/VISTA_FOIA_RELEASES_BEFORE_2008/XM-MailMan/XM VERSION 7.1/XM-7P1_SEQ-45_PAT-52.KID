Released XM*7.1*52 SEQ #45
Extracted from mail message
**KIDS**:XM*7.1*52^

**INSTALL NAME**
XM*7.1*52
"BLD",33,0)
XM*7.1*52^MAILMAN^0^2970929^y
"BLD",33,1,0)
^^42^42^2970929^^^^
"BLD",33,1,1,0)
MailMan patch XM*7.1*52 contains the following fix
"BLD",33,1,2,0)

"BLD",33,1,3,0)
NOIS:       IVM-0997-32203,WNY-0197-11745
"BLD",33,1,4,0)
Rtn:        ^XMADJF1
"BLD",33,1,5,0)
Test Site:  Atlanta, GA
"BLD",33,1,6,0)
Responses to messages with 9+ digit message numbers were being added to the
"BLD",33,1,7,0)
message whose number was the 1st 8 digits of the message number.  For example,
"BLD",33,1,8,0)
a response to message number 123456789 was added to message number 12345678.
"BLD",33,1,9,0)
This patch makes sure that responses are added to the correct message.
"BLD",33,1,10,0)

"BLD",33,1,11,0)
===========================================================================
"BLD",33,1,12,0)
This patch should be installed with no users on the system and with the
"BLD",33,1,13,0)
filers shut down.
"BLD",33,1,14,0)
===========================================================================
"BLD",33,1,15,0)
 
"BLD",33,1,16,0)
INSTALLATION:
"BLD",33,1,17,0)
1.  DSM Sites: If any of these routines is mapped, disable mapping for the 
"BLD",33,1,18,0)
    affected routine(s).  
"BLD",33,1,19,0)
2.  On the PackMan menu, use the 'INSTALL/CHECK MESSAGE' option.  This loads 
"BLD",33,1,20,0)
    the patch into a Transport Global on your system.  
"BLD",33,1,21,0)
3.  On the KIDS:Installation menu, use the following options to install the 
"BLD",33,1,22,0)
    Transport Global: 
"BLD",33,1,23,0)
       Verify Checksums in Transport Global 
"BLD",33,1,24,0)
       Print Transport Global 
"BLD",33,1,25,0)
       Compare Transport Global to Current System 
"BLD",33,1,26,0)
       Backup a Transport Global 
"BLD",33,1,27,0)
       Install Package(s) 
"BLD",33,1,28,0)
4.  DSM Sites: After patch has installed, rebuild your map set.  
"BLD",33,1,29,0)

"BLD",33,1,30,0)
============================================================================ 
"BLD",33,1,31,0)
  
"BLD",33,1,32,0)
ROUTINES:
"BLD",33,1,33,0)
The second line of the routine now looks like:
"BLD",33,1,34,0)
       ;;7.1;MailMan;**[patch list]**;Jun 02, 1994
"BLD",33,1,35,0)
 
"BLD",33,1,36,0)
              Before          After
"BLD",33,1,37,0)
Name          Checksum        Checksum        Patch List
"BLD",33,1,38,0)
----------------------------------------------------------
"BLD",33,1,39,0)
XMADJF1       8709221         8724294         44,52
"BLD",33,1,40,0)

"BLD",33,1,41,0)
* Checksums produced by CHECK^XTSUMBLD
"BLD",33,1,42,0)
============================================================================
"BLD",33,4,0)
^9.64PA^^0
"BLD",33,"INI")

"BLD",33,"INIT")

"BLD",33,"KRN",0)
^9.67PA^19^12
"BLD",33,"KRN",.4,0)
.4
"BLD",33,"KRN",.401,0)
.401
"BLD",33,"KRN",.402,0)
.402
"BLD",33,"KRN",.403,0)
.403
"BLD",33,"KRN",.5,0)
.5
"BLD",33,"KRN",.84,0)
.84
"BLD",33,"KRN",3.6,0)
3.6
"BLD",33,"KRN",3.8,0)
3.8
"BLD",33,"KRN",9.2,0)
9.2
"BLD",33,"KRN",9.8,0)
9.8
"BLD",33,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",33,"KRN",9.8,"NM",1,0)
XMADJF1^^0^B13665534
"BLD",33,"KRN",9.8,"NM","B","XMADJF1",1)

"BLD",33,"KRN",19,0)
19
"BLD",33,"KRN",19,"NM",0)
^9.68A^^0
"BLD",33,"KRN",19.1,0)
19.1
"BLD",33,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",33,"KRN","B",.4,.4)

"BLD",33,"KRN","B",.401,.401)

"BLD",33,"KRN","B",.402,.402)

"BLD",33,"KRN","B",.403,.403)

"BLD",33,"KRN","B",.5,.5)

"BLD",33,"KRN","B",.84,.84)

"BLD",33,"KRN","B",3.6,3.6)

"BLD",33,"KRN","B",3.8,3.8)

"BLD",33,"KRN","B",9.2,9.2)

"BLD",33,"KRN","B",9.8,9.8)

"BLD",33,"KRN","B",19,19)

"BLD",33,"KRN","B",19.1,19.1)

"BLD",33,"QUES",0)
^9.62^^
"BLD",33,"REQB",0)
^9.611^^
"PKG",6,-1)
1^1
"PKG",6,0)
MAILMAN^XM^Electronic Mail, both local and networked
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.1^2940602^2950925
"PKG",6,22,1,"PAH",1,0)
52^2970929
"PKG",6,22,1,"PAH",1,1,0)
^^42^42^2970929
"PKG",6,22,1,"PAH",1,1,1,0)
MailMan patch XM*7.1*52 contains the following fix
"PKG",6,22,1,"PAH",1,1,2,0)

"PKG",6,22,1,"PAH",1,1,3,0)
NOIS:       IVM-0997-32203,WNY-0197-11745
"PKG",6,22,1,"PAH",1,1,4,0)
Rtn:        ^XMADJF1
"PKG",6,22,1,"PAH",1,1,5,0)
Test Site:  Atlanta, GA
"PKG",6,22,1,"PAH",1,1,6,0)
Responses to messages with 9+ digit message numbers were being added to the
"PKG",6,22,1,"PAH",1,1,7,0)
message whose number was the 1st 8 digits of the message number.  For example,
"PKG",6,22,1,"PAH",1,1,8,0)
a response to message number 123456789 was added to message number 12345678.
"PKG",6,22,1,"PAH",1,1,9,0)
This patch makes sure that responses are added to the correct message.
"PKG",6,22,1,"PAH",1,1,10,0)

"PKG",6,22,1,"PAH",1,1,11,0)
===========================================================================
"PKG",6,22,1,"PAH",1,1,12,0)
This patch should be installed with no users on the system and with the
"PKG",6,22,1,"PAH",1,1,13,0)
filers shut down.
"PKG",6,22,1,"PAH",1,1,14,0)
===========================================================================
"PKG",6,22,1,"PAH",1,1,15,0)
 
"PKG",6,22,1,"PAH",1,1,16,0)
INSTALLATION:
"PKG",6,22,1,"PAH",1,1,17,0)
1.  DSM Sites: If any of these routines is mapped, disable mapping for the 
"PKG",6,22,1,"PAH",1,1,18,0)
    affected routine(s).  
"PKG",6,22,1,"PAH",1,1,19,0)
2.  On the PackMan menu, use the 'INSTALL/CHECK MESSAGE' option.  This loads 
"PKG",6,22,1,"PAH",1,1,20,0)
    the patch into a Transport Global on your system.  
"PKG",6,22,1,"PAH",1,1,21,0)
3.  On the KIDS:Installation menu, use the following options to install the 
"PKG",6,22,1,"PAH",1,1,22,0)
    Transport Global: 
"PKG",6,22,1,"PAH",1,1,23,0)
       Verify Checksums in Transport Global 
"PKG",6,22,1,"PAH",1,1,24,0)
       Print Transport Global 
"PKG",6,22,1,"PAH",1,1,25,0)
       Compare Transport Global to Current System 
"PKG",6,22,1,"PAH",1,1,26,0)
       Backup a Transport Global 
"PKG",6,22,1,"PAH",1,1,27,0)
       Install Package(s) 
"PKG",6,22,1,"PAH",1,1,28,0)
4.  DSM Sites: After patch has installed, rebuild your map set.  
"PKG",6,22,1,"PAH",1,1,29,0)

"PKG",6,22,1,"PAH",1,1,30,0)
============================================================================ 
"PKG",6,22,1,"PAH",1,1,31,0)
  
"PKG",6,22,1,"PAH",1,1,32,0)
ROUTINES:
"PKG",6,22,1,"PAH",1,1,33,0)
The second line of the routine now looks like:
"PKG",6,22,1,"PAH",1,1,34,0)
       ;;7.1;MailMan;**[patch list]**;Jun 02, 1994
"PKG",6,22,1,"PAH",1,1,35,0)
 
"PKG",6,22,1,"PAH",1,1,36,0)
              Before          After
"PKG",6,22,1,"PAH",1,1,37,0)
Name          Checksum        Checksum        Patch List
"PKG",6,22,1,"PAH",1,1,38,0)
----------------------------------------------------------
"PKG",6,22,1,"PAH",1,1,39,0)
XMADJF1       8709221         8724294         44,52
"PKG",6,22,1,"PAH",1,1,40,0)

"PKG",6,22,1,"PAH",1,1,41,0)
* Checksums produced by CHECK^XTSUMBLD
"PKG",6,22,1,"PAH",1,1,42,0)
============================================================================
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XMADJF1")
0^1^B13665534
"RTN","XMADJF1",1,0)
XMADJF1 ;(WASH ISC)/CAP-MailMan DELIVER ;09/29/97  09:08
"RTN","XMADJF1",2,0)
 ;;7.1;MailMan;**44,52**;Jun 02, 1994
"RTN","XMADJF1",3,0)
 ;
"RTN","XMADJF1",4,0)
 ;XMADJF1A is Front-end
"RTN","XMADJF1",5,0)
 ;
"RTN","XMADJF1",6,0)
 D NOW^%DTC
"RTN","XMADJF1",7,0)
 S XMADF=0,%DT=%,(XMC0,XMZ2,V,W)=0,XMA0=$O(^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,Z,0)),XMB0="^3.9001^^"
"RTN","XMADJF1",8,0)
 K XMD0,XMF0,XMK
"RTN","XMADJF1",9,0)
 I $E(Z)'="R" S J=$S($D(^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,Z))#10:^(Z),1:""),XMDUZ=+J,XMZ=Z S:$D(^XMB(3.9,XMZ,3,0)) XMB0=^(0) G 1:XMDUZ=J S:$P(J,U,2)="* LOCAL BROADCAST" XMD0=1 S:$L($P(J,U,3)) XMK=$P(J,U,3) G 1
"RTN","XMADJF1",10,0)
 ;
"RTN","XMADJF1",11,0)
 S XMZ2=$P(^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,Z,XMA0),U,5),XMDUZ=$P(XMA0,":",2) S:$D(^(0)) V=^(0) S XMZ=$E(Z,2,999)
"RTN","XMADJF1",12,0)
 ;
"RTN","XMADJF1",13,0)
 ;RESPONSES
"RTN","XMADJF1",14,0)
 I $D(^XMB(3.9,XMZ2,0)),'$P(^(0),U,3) S $P(^(0),U,3)=%DT
"RTN","XMADJF1",15,0)
 I $D(^XMB(3.9,XMZ,3,0)) S XMB0=^(0)
"RTN","XMADJF1",16,0)
 ;
"RTN","XMADJF1",17,0)
 ;Post responses to message response multiple
"RTN","XMADJF1",18,0)
 ;keeping track of number of deliveries
"RTN","XMADJF1",19,0)
 ;
"RTN","XMADJF1",20,0)
 K XMA0("R")
"RTN","XMADJF1",21,0)
R S XMA0=$O(^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,Z,0)) G RQ:XMA0="" S %=^(XMA0),XMSTATN=$G(XMSTATN)+1,XMSTATS=$G(XMSTATS)+$P(%,U,8),XMZ2=$P(%,U,5) K ^(XMA0) D STATS^XMADJF0
"RTN","XMADJF1",22,0)
 I '$D(^XMB(3.9,XMZ2)) D ERR^XMAD0 K ^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,Z,XMA0) G RES^XMAD2
"RTN","XMADJF1",23,0)
 S XMC0=XMC0+1,^XMB(3.9,XMZ,3,XMC0+$P(XMB0,U,3),0)=XMZ2
"RTN","XMADJF1",24,0)
 I $E(XMA0,1,3)="NR:" G R:$D(XMA0("R")),RR
"RTN","XMADJF1",25,0)
 S XMDUZ=$P(XMA0,":",2),XMF0(XMDUZ)="" G R:$D(XMA0("R"))
"RTN","XMADJF1",26,0)
 S %=$O(^XMB(3.9,XMZ,1,"C",XMDUZ,0)) I %,$D(^XMB(3.9,XMZ,1,%,0)) S $P(^(0),U,2)=$P(XMB0,U,3)+1
"RTN","XMADJF1",27,0)
RR S XMA0("R")=1 G R
"RTN","XMADJF1",28,0)
RQ S %=$P(XMB0,U,3)+XMC0,$P(XMB0,U,3,4)=%_U_%,^XMB(3.9,XMZ,3,0)=XMB0
"RTN","XMADJF1",29,0)
 ;
"RTN","XMADJF1",30,0)
1 I '$D(^XMB(3.9,XMZ,0)) D ERR1^XMAD0 K ^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,Z) D ENTL^XMADGO1 G H^XUS
"RTN","XMADJF1",31,0)
 S XMR=^(0),J=$P(XMR,U,2)
"RTN","XMADJF1",32,0)
 ;
"RTN","XMADJF1",33,0)
 I J,$E(Z)="R",'$D(^XMB(3.9,XMZ,1,"C",J)) S %=$S($D(^XMB(3.9,XMZ,1,0)):^(0),1:"^3.91LA^0^0"),K=$P(%,U,3)+1,$P(%,U,3,4)=K_U_($P(%,U,4)+1),^(0)=%,^("C",J,K)="",^XMB(3.9,XMZ,1,K,0)=J
"RTN","XMADJF1",34,0)
 I $E(Z)'="R",XMA0 S XMDUZ=$S($D(^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,Z))#10:+^(Z),1:0) G FD
"RTN","XMADJF1",35,0)
 I $D(XMD0) K XMD0 G B
"RTN","XMADJF1",36,0)
 ;
"RTN","XMADJF1",37,0)
 ;TO ALL
"RTN","XMADJF1",38,0)
0 S V=$O(^XMB(3.9,XMZ,1,V)) G E^XMADJF1B:'V
"RTN","XMADJF1",39,0)
 G 0:$D(^XMB(3.9,XMZ,1,V,"D")) S Y=^(0) G 0:+Y'=$P(Y,U) S Y=+Y
"RTN","XMADJF1",40,0)
 I $E(Z)'="R",$D(^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,XMZ,0,Y)) S %=^(Y),XMK=$P(%,":"),%=$P(%,":",2) I % S XMADEL=%
"RTN","XMADJF1",41,0)
 D OK^XMADJF1B K XMK,XMADEL G 0
"RTN","XMADJF1",42,0)
 ;
"RTN","XMADJF1",43,0)
B ;BROADCAST
"RTN","XMADJF1",44,0)
 F  S V=$O(^XMB(3.7,V)) Q:'V  D
"RTN","XMADJF1",45,0)
 . ; must have access code, verify code, and primary menu
"RTN","XMADJF1",46,0)
 . Q:$P($G(^VA(200,V,0)),U,3)=""!($P($G(^(.1)),U,2)="")!($P($G(^(201)),U)="")
"RTN","XMADJF1",47,0)
 . S Y=V
"RTN","XMADJF1",48,0)
 . D OK^XMADJF1B
"RTN","XMADJF1",49,0)
 G E^XMADJF1B
"RTN","XMADJF1",50,0)
 ;
"RTN","XMADJF1",51,0)
 ;FORWARD
"RTN","XMADJF1",52,0)
FD S V=$O(^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,Z,0)) G E^XMADJF1B:'V S W=^(V)
"RTN","XMADJF1",53,0)
FD1 S Y=$P(W,U),W=$P(W,U,2,99)
"RTN","XMADJF1",54,0)
 I Y="" G FD1:W'="" K ^XMBPOST("PGROUP"_$E(XMSTATT),$E(XMSTATT,2),XMTSTAMP,Z,V) G FD
"RTN","XMADJF1",55,0)
 S XMK=$P(Y,":",2),%=$P(Y,":",3),Y=+Y S:% XMADEL=% G FDQ:$O(^XMB(3.7,"M",XMZ,Y,.9))
"RTN","XMADJF1",56,0)
 S J=$O(^XMB(3.9,XMZ,1,"C",Y,0)) G FDQ:J<1
"RTN","XMADJF1",57,0)
 S XMDUZ=$S(XMDUZ:XMDUZ,$D(^XMB(3.9,XMZ,1,J,"F")):$P(^("F"),U,2),1:$P(XMR,U,2))
"RTN","XMADJF1",58,0)
 S XMADF=1 D OK^XMADJF1B
"RTN","XMADJF1",59,0)
FDQ K XMK,XMADEL G FD1
"VER")
8.0^21.0
**END**
**END**

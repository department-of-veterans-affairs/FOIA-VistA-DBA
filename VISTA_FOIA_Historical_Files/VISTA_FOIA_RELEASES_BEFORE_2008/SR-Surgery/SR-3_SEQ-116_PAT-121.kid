Released SR*3*121 SEQ #116
Extracted from mail message
**KIDS**:SR*3.0*121^

**INSTALL NAME**
SR*3.0*121
"BLD",4280,0)
SR*3.0*121^SURGERY^0^3030801^y
"BLD",4280,1,0)
^^15^15^3030801^
"BLD",4280,1,1,0)
This is an enhancement patch to the Surgery V. 3.0 software. It will
"BLD",4280,1,2,0)
allow assessment lookups by assessment (case) number, in addition to the
"BLD",4280,1,3,0)
lookups by patient. The following options under the Surgery Risk
"BLD",4280,1,4,0)
Assessment Menu [SROA RISK ASSESSMENT] option has this functionality
"BLD",4280,1,5,0)
incorporated:
"BLD",4280,1,6,0)
 
"BLD",4280,1,7,0)
 - Non-Cardiac Assessment Information (Enter/Edit) [SROA ENTER/EDIT]
"BLD",4280,1,8,0)
 - Cardiac Risk Assessment Information (Enter/Edit)
"BLD",4280,1,9,0)
    [SROA CARDIAC ENTER/EDIT]
"BLD",4280,1,10,0)
 - Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT]
"BLD",4280,1,11,0)
 - Update Assessment Completed/Transmitted in Error
"BLD",4280,1,12,0)
    [SROA TRANSMITTED IN ERROR]
"BLD",4280,1,13,0)
 - Print 30 Day Follow-up Letters [SROA REPRINT LETTERS]
"BLD",4280,1,14,0)
 - Exclusion Criteria (Enter/Edit) [SR NO ASSESSMENT REASON]
"BLD",4280,1,15,0)
 - Update 1-Liner Case [SROA ONE-LINER UPDATE]
"BLD",4280,4,0)
^9.64PA^^
"BLD",4280,"KRN",0)
^9.67PA^8989.52^19
"BLD",4280,"KRN",.4,0)
.4
"BLD",4280,"KRN",.401,0)
.401
"BLD",4280,"KRN",.402,0)
.402
"BLD",4280,"KRN",.403,0)
.403
"BLD",4280,"KRN",.5,0)
.5
"BLD",4280,"KRN",.84,0)
.84
"BLD",4280,"KRN",3.6,0)
3.6
"BLD",4280,"KRN",3.8,0)
3.8
"BLD",4280,"KRN",9.2,0)
9.2
"BLD",4280,"KRN",9.8,0)
9.8
"BLD",4280,"KRN",9.8,"NM",0)
^9.68A^9^7
"BLD",4280,"KRN",9.8,"NM",1,0)
SRO1L^^0^B15260887
"BLD",4280,"KRN",9.8,"NM",2,0)
SRONASS^^0^B16792432
"BLD",4280,"KRN",9.8,"NM",5,0)
SROASS^^0^B16708503
"BLD",4280,"KRN",9.8,"NM",6,0)
SROASSN^^0^B7342556
"BLD",4280,"KRN",9.8,"NM",7,0)
SROPS^^0^B13002966
"BLD",4280,"KRN",9.8,"NM",8,0)
SROPSEL^^0^B2580963
"BLD",4280,"KRN",9.8,"NM",9,0)
SROPSN^^0^B11285351
"BLD",4280,"KRN",9.8,"NM","B","SRO1L",1)

"BLD",4280,"KRN",9.8,"NM","B","SROASS",5)

"BLD",4280,"KRN",9.8,"NM","B","SROASSN",6)

"BLD",4280,"KRN",9.8,"NM","B","SRONASS",2)

"BLD",4280,"KRN",9.8,"NM","B","SROPS",7)

"BLD",4280,"KRN",9.8,"NM","B","SROPSEL",8)

"BLD",4280,"KRN",9.8,"NM","B","SROPSN",9)

"BLD",4280,"KRN",19,0)
19
"BLD",4280,"KRN",19.1,0)
19.1
"BLD",4280,"KRN",101,0)
101
"BLD",4280,"KRN",409.61,0)
409.61
"BLD",4280,"KRN",771,0)
771
"BLD",4280,"KRN",870,0)
870
"BLD",4280,"KRN",8989.51,0)
8989.51
"BLD",4280,"KRN",8989.52,0)
8989.52
"BLD",4280,"KRN",8994,0)
8994
"BLD",4280,"KRN","B",.4,.4)

"BLD",4280,"KRN","B",.401,.401)

"BLD",4280,"KRN","B",.402,.402)

"BLD",4280,"KRN","B",.403,.403)

"BLD",4280,"KRN","B",.5,.5)

"BLD",4280,"KRN","B",.84,.84)

"BLD",4280,"KRN","B",3.6,3.6)

"BLD",4280,"KRN","B",3.8,3.8)

"BLD",4280,"KRN","B",9.2,9.2)

"BLD",4280,"KRN","B",9.8,9.8)

"BLD",4280,"KRN","B",19,19)

"BLD",4280,"KRN","B",19.1,19.1)

"BLD",4280,"KRN","B",101,101)

"BLD",4280,"KRN","B",409.61,409.61)

"BLD",4280,"KRN","B",771,771)

"BLD",4280,"KRN","B",870,870)

"BLD",4280,"KRN","B",8989.51,8989.51)

"BLD",4280,"KRN","B",8989.52,8989.52)

"BLD",4280,"KRN","B",8994,8994)

"BLD",4280,"QUES",0)
^9.62^^
"BLD",4280,"REQB",0)
^9.611^1^1
"BLD",4280,"REQB",1,0)
SR*3.0*107^1
"BLD",4280,"REQB","B","SR*3.0*107",1)

"MBREQ")
0
"PKG",167,-1)
1^1
"PKG",167,0)
SURGERY^SR^SURGICAL DATA COLLECTION AND OPERATIONS SCHEDULING
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
3.0^2930624^2930811
"PKG",167,22,1,"PAH",1,0)
121^3030801
"PKG",167,22,1,"PAH",1,1,0)
^^15^15^3030801
"PKG",167,22,1,"PAH",1,1,1,0)
This is an enhancement patch to the Surgery V. 3.0 software. It will
"PKG",167,22,1,"PAH",1,1,2,0)
allow assessment lookups by assessment (case) number, in addition to the
"PKG",167,22,1,"PAH",1,1,3,0)
lookups by patient. The following options under the Surgery Risk
"PKG",167,22,1,"PAH",1,1,4,0)
Assessment Menu [SROA RISK ASSESSMENT] option has this functionality
"PKG",167,22,1,"PAH",1,1,5,0)
incorporated:
"PKG",167,22,1,"PAH",1,1,6,0)
 
"PKG",167,22,1,"PAH",1,1,7,0)
 - Non-Cardiac Assessment Information (Enter/Edit) [SROA ENTER/EDIT]
"PKG",167,22,1,"PAH",1,1,8,0)
 - Cardiac Risk Assessment Information (Enter/Edit)
"PKG",167,22,1,"PAH",1,1,9,0)
    [SROA CARDIAC ENTER/EDIT]
"PKG",167,22,1,"PAH",1,1,10,0)
 - Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT]
"PKG",167,22,1,"PAH",1,1,11,0)
 - Update Assessment Completed/Transmitted in Error
"PKG",167,22,1,"PAH",1,1,12,0)
    [SROA TRANSMITTED IN ERROR]
"PKG",167,22,1,"PAH",1,1,13,0)
 - Print 30 Day Follow-up Letters [SROA REPRINT LETTERS]
"PKG",167,22,1,"PAH",1,1,14,0)
 - Exclusion Criteria (Enter/Edit) [SR NO ASSESSMENT REASON]
"PKG",167,22,1,"PAH",1,1,15,0)
 - Update 1-Liner Case [SROA ONE-LINER UPDATE]
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","SRO1L")
0^1^B15260887
"RTN","SRO1L",1,0)
SRO1L ;BIR/ADM - Update 1-Liner Cases ; [ 07/7/03  9:05 AM ]
"RTN","SRO1L",2,0)
 ;;3.0; Surgery ;**86,88,107,121**;24 Jun 93
"RTN","SRO1L",3,0)
ST I '$D(SRSITE) D ^SROVAR
"RTN","SRO1L",4,0)
EN2 S SRSOUT=0 K SRTN D SROPS G:'$D(SRTN) END
"RTN","SRO1L",5,0)
 D ^SRO1L1 S SROERR=SRTN D ^SROERR0
"RTN","SRO1L",6,0)
 W @IOF G EN2
"RTN","SRO1L",7,0)
END D ^SRSKILL K SRTN W @IOF
"RTN","SRO1L",8,0)
 Q
"RTN","SRO1L",9,0)
SROPS ; select patient and case
"RTN","SRO1L",10,0)
 N SRSEL S (CNT,SRDT)=0 D ^SROPSEL G:'$D(DFN) END D HDR
"RTN","SRO1L",11,0)
 I SRSEL=2 K SRCASE D LIST I '$D(SRCASE(1)) W !!,"Case #"_SROP_" is not a valid 1-liner case.",!!,"Press RETURN to continue  " R X:DTIME G ST
"RTN","SRO1L",12,0)
 I SRSEL=2 S SRTN=+SRCASE(1) Q
"RTN","SRO1L",13,0)
 ;
"RTN","SRO1L",14,0)
ADT S (SRDT,CNT,SRBACK)=0 F  S SRDT=$O(^SRF("ADT",DFN,SRDT)) Q:'SRDT!SRSOUT!$D(SRTN)!SRBACK  S SROP=0 F  S SROP=$O(^SRF("ADT",DFN,SRDT,SROP)) Q:'SROP!$D(SRTN)!SRSOUT!SRBACK  D LIST
"RTN","SRO1L",15,0)
 G:SRBACK ADT Q:$D(SRTN)
"RTN","SRO1L",16,0)
 I '$D(SRCASE(1)) W !!,"There are no cases entered for "_VADM(1)_".",!!,"Press RETURN to continue  " R X:DTIME G END
"RTN","SRO1L",17,0)
OPT S SRSOUT=0 W !!,"Select Case: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SRO1L",18,0)
 I '$D(SRCASE(X)) W !!,"Enter the number of the operation you want to edit." G OPT
"RTN","SRO1L",19,0)
 S SRTN=+SRCASE(X)
"RTN","SRO1L",20,0)
 Q
"RTN","SRO1L",21,0)
LIST ; list cases
"RTN","SRO1L",22,0)
 N SRA S SRA=$G(^SRF(SROP,"RA")) I $P(SRA,"^",2)="N",$P(SRA,"^",6)="Y" Q
"RTN","SRO1L",23,0)
 I $P($G(^SRF(SROP,0)),"^",9)<2961001 Q
"RTN","SRO1L",24,0)
 I '$P($G(^SRF(SROP,.2)),"^",12) Q
"RTN","SRO1L",25,0)
 I $P($G(^SRF(SROP,30)),"^")!$P($G(^SRF(SROP,31)),"^",8) Q
"RTN","SRO1L",26,0)
 I $P($G(^SRF(SROP,"NON")),"^")="Y" Q
"RTN","SRO1L",27,0)
 I $P($G(^SRF(SROP,37)),"^") Q
"RTN","SRO1L",28,0)
 I $Y+5>IOSL S SRBACK=0 D SEL Q:$D(SRTN)!(SRSOUT)  D HDR Q:SRBACK
"RTN","SRO1L",29,0)
 S CNT=CNT+1,SRSDATE=$P(^SRF(SROP,0),"^",9) W !,CNT_". "
"RTN","SRO1L",30,0)
CASE W $E(SRSDATE,4,5)_"-"_$E(SRSDATE,6,7)_"-"_$E(SRSDATE,2,3)
"RTN","SRO1L",31,0)
 S SROPER=$P(^SRF(SROP,"OP"),"^") I $O(^SRF(SROP,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SROP,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SRO1L",32,0)
 D ^SROP1 K SROPS,MM,MMM S:$L(SROPER)<65 SROPS(1)=SROPER I $L(SROPER)>64 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SRO1L",33,0)
 W ?14,SROPS(1) I $D(SROPS(2)) W !,?14,SROPS(2) I $D(SROPS(3)) W !,?14,SROPS(3) W:$D(SROPS(4)) !,?14,SROPS(4)
"RTN","SRO1L",34,0)
 W ! S SRCASE(CNT)=SROP_"^"_SRDT
"RTN","SRO1L",35,0)
 Q
"RTN","SRO1L",36,0)
SEL ; select case
"RTN","SRO1L",37,0)
 W ! K DIR S DIR("A")="Select case or enter RETURN to continue listing cases: ",DIR(0)="FOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SRO1L",38,0)
 I X="" Q
"RTN","SRO1L",39,0)
 I '$D(SRCASE(X)) W ! S DIR("A",1)="Please enter the number corresponding to the case you want to edit.",DIR("A",2)="If the case desired does not appear, enter RETURN to continue listing",DIR("A",3)="additional cases."
"RTN","SRO1L",40,0)
 I '$D(SRCASE(X)) S DIR("A",4)="",DIR("A")="Press RETURN to continue  " D ^DIR K DIR S:$D(DTOUT)!$D(DUOUT) SRSOUT=1 S SRBACK=1 Q
"RTN","SRO1L",41,0)
 S SRTN=+SRCASE(X)
"RTN","SRO1L",42,0)
 Q
"RTN","SRO1L",43,0)
OTHER ; other operations
"RTN","SRO1L",44,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SROP,13,SROTHER,0),"^"))>235 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SRO1L",45,0)
 I SRLONG S SROPERS=$P(^SRF(SROP,13,SROTHER,0),"^")
"RTN","SRO1L",46,0)
 S SROPER=SROPER_$S(SROPERS=" ...":SROPERS,1:", "_SROPERS)
"RTN","SRO1L",47,0)
 Q
"RTN","SRO1L",48,0)
LOOP ; break procedure
"RTN","SRO1L",49,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<65  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SRO1L",50,0)
 Q
"RTN","SRO1L",51,0)
HDR ; print heading
"RTN","SRO1L",52,0)
 W @IOF,!,?1,VADM(1)_"   "_VA("PID") S X=$P($G(VADM(6)),"^") W:X "        * DIED "_$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)_" *" W !
"RTN","SRO1L",53,0)
 Q
"RTN","SROASS")
0^5^B16708503
"RTN","SROASS",1,0)
SROASS ;B'HAM ISC/MAM - SELECT ASSESSMENT ; [ 07/3/03  3:10 PM ]
"RTN","SROASS",2,0)
 ;;3.0; Surgery ;**38,47,64,94,121**;24 Jun 93
"RTN","SROASS",3,0)
PST K:$D(DUZ("SAV")) SRNEW K SRTN W !! S SRSOUT=0
"RTN","SROASS",4,0)
 N SRSEL D ^SROPSEL G:'$D(DFN) END S SRANM=VADM(1)_"  "_VA("PID")
"RTN","SROASS",5,0)
START ; start display
"RTN","SROASS",6,0)
 G:SRSOUT END W:SRSEL=1 @IOF,!,?1,SRANM
"RTN","SROASS",7,0)
 I $D(^DPT(DFN,.35)),$P(^(.35),"^") S SRDT=$P(^(.35),"^") W "         * DIED "_$E(SRDT,4,5)_"/"_$E(SRDT,6,7)_"/"_$E(SRDT,2,3)_" *"
"RTN","SROASS",8,0)
 I SRSEL=2 S CNT=0 D ^SROASSN G:$D(SRTN) ENTER G PST
"RTN","SROASS",9,0)
 D ^SROASS1 I SRSOUT G END
"RTN","SROASS",10,0)
 I $D(SRTN) G ENTER
"RTN","SROASS",11,0)
 I $D(SRNEW) S CNT=CNT+1,SRCASE(CNT)="" W CNT,".   ----     CREATE NEW ASSESSMENT"
"RTN","SROASS",12,0)
 I '$D(SRCASE(1)) W !!,"There are no Surgery Risk Assessments entered for "_VADM(1)_".",!! K DIR S DIR(0)="FOA",DIR("A")="  Press RETURN to continue.  " D ^DIR Q
"RTN","SROASS",13,0)
OPT W !!!,"Select Surgical Case: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SROASS",14,0)
 I '$D(SRCASE(X)) W !!,"Enter the number of the desired assessment." W:$D(SRNEW) "  Select '"_CNT_"' to create an",!,"assessment for another surgical case." G OPT
"RTN","SROASS",15,0)
 I $D(SRNEW),X=CNT D ^SROANEW G END
"RTN","SROASS",16,0)
 I '$D(SRTN) S SRTN=+SRCASE(X)
"RTN","SROASS",17,0)
ENTER ; edit, complete, or delete
"RTN","SROASS",18,0)
 I $D(SRPRINT)!'($D(SRNEW)) Q
"RTN","SROASS",19,0)
 S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T" D TRANS I 'SRYN K SRASS,SRTN G START
"RTN","SROASS",20,0)
 I SRATYPE="N"&($P(SR("RA"),"^",2)="C") W !!,"You've selected a Cardiac assessment, using a Non-Cardiac Option," K DIR S DIR(0)="Y",DIR("A")="Do you wish to continue",DIR("B")="NO" D ^DIR S X=$E(X) I "Yy"'[X K SRTN S SRSOUT=1 G END
"RTN","SROASS",21,0)
 I SRATYPE="C"&($P(SR("RA"),"^",2)="N") W !!,"You've selected a Non-Cardiac assessment, using a Cardiac Option," K DIR S DIR(0)="Y",DIR("A")="Do you wish to continue",DIR("B")="NO" D ^DIR S X=$E(X) I "Yy"'[X K SRTN S SRSOUT=1 G END
"RTN","SROASS",22,0)
 W @IOF,!,?1,SRANM,!! S SRSDATE=$P(^SRF(SRTN,0),"^",9) S SRASS=SRTN D DISP^SROASS1
"RTN","SROASS",23,0)
 W !!,"1. Enter Risk Assessment Information",!,"2. Delete Risk Assessment Entry",!,"3. Update Assessment Status to 'COMPLETE'"
"RTN","SROASS",24,0)
 W !!,"Select Number:  1//  " R X:DTIME I '$T!(X["^") K SRTN,SRASS S SRSOUT=1 G END
"RTN","SROASS",25,0)
 S:X="" X=1 I X<1!(X>3)!(X'?.N) D HELP G ENTER
"RTN","SROASS",26,0)
 I X=2 D ^SROADEL W !!,"Press <RET> to continue  " R X:DTIME W @IOF K SRTN G END
"RTN","SROASS",27,0)
 I X=3 D ^SROACOM K SRTN G END
"RTN","SROASS",28,0)
 Q
"RTN","SROASS",29,0)
END S:'$D(SRSOUT) SRSOUT=1 W:SRSOUT @IOF D ^SRSKILL
"RTN","SROASS",30,0)
 Q
"RTN","SROASS",31,0)
HELP ;
"RTN","SROASS",32,0)
 W !!,"Enter <RET> or '1' to enter or edit information related to this Risk ",!,"Assessment entry.  If you want to delete the Assessment, enter '2'."
"RTN","SROASS",33,0)
 W !,"Enter '3' to update the status of this Assessment to 'COMPLETE'."
"RTN","SROASS",34,0)
 W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROASS",35,0)
 Q
"RTN","SROASS",36,0)
TRANS W @IOF,!,"This assessment has already been transmitted.  The information contained",!,"in it cannot be altered unless you first change the status to 'INCOMPLETE'."
"RTN","SROASS",37,0)
 S SRYN=0 K DIR S DIR("A")="Do you wish to change the status of this assessment to 'INCOMPLETE'",DIR("B")="NO",DIR(0)="Y" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROASS",38,0)
 S SRYN=Y I 'SRYN Q
"RTN","SROASS",39,0)
 K DA,DIE,DR S DIE=130,DA=SRTN,DR="235////I;393////1" D ^DIE K DA,DIE,DR
"RTN","SROASS",40,0)
 Q
"RTN","SROASSN")
0^6^B7342556
"RTN","SROASSN",1,0)
SROASSN ;B'HAM ISC/MAM - SELECT ASSESSMENT ; [ 07/03/03 08:44 AM ]
"RTN","SROASSN",2,0)
 ;;3.0; Surgery ;**121**;24 Jun 93
"RTN","SROASSN",3,0)
 ;
"RTN","SROASSN",4,0)
 W !! S (SRDT,CNT)=0 F I=0:0 S SRDT=$O(^SRF("ADT",DFN,SRDT)) Q:'SRDT!(SRSOUT)  S SRASS=0 F I=0:0 S SRASS=$O(^SRF("ADT",DFN,SRDT,SRASS)) Q:'SRASS!($D(SRTN))!(SRSOUT)  I SRASS=SROP D LIST
"RTN","SROASSN",5,0)
 I '$D(SRCASE(1)) D  Q
"RTN","SROASSN",6,0)
 .W @IOF,!,?1,SRANM
"RTN","SROASSN",7,0)
 .W !!,$E(SRSDATE,4,5)_"-"_$E(SRSDATE,6,7)_"-"_$E(SRSDATE,2,3),?14,SROPER_" ("_STATUS_")"
"RTN","SROASSN",8,0)
 .W !!,$S($P($G(^SRF(SROP,"NON")),"^")="Y":"Case #"_SROP_" is not an O.R. surgical procedure.",1:"There is no Surgery Risk Assessment entered for Case #"_SROP_".")
"RTN","SROASSN",9,0)
 .W !!,"Press <RET> to continue.",! R X:DTIME S:'$T SRSOUT=1 S SRBACK=1
"RTN","SROASSN",10,0)
 S SRTN=+SRCASE(1)
"RTN","SROASSN",11,0)
 Q
"RTN","SROASSN",12,0)
LIST ; list assessments
"RTN","SROASSN",13,0)
 S CNT=CNT+1,SRSDATE=$P(^SRF(SRASS,0),"^",9)
"RTN","SROASSN",14,0)
DISP S SROPER=$P(^SRF(SRASS,"OP"),"^") I $O(^SRF(SRASS,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRASS,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROASSN",15,0)
 S SR("RA")=$G(^SRF(SRASS,"RA")),Z=$P(SR("RA"),"^"),STATUS=$S(Z="I":"INCOMPLETE",Z="C":"COMPLETED",Z="T":"TRANSMITTED",1:"INCOMPLETE")
"RTN","SROASSN",16,0)
 I "N"[$P(SR("RA"),"^",2),"N"[$P(SR("RA"),"^",6) S CNT=CNT-1 Q
"RTN","SROASSN",17,0)
 I $P(SR("RA"),"^",2)="C" S SROPER="* "_SROPER
"RTN","SROASSN",18,0)
 S SROPER=SROPER_" ("_STATUS_")"
"RTN","SROASSN",19,0)
 K SROPS,MM,MMM S:$L(SROPER)<65 SROPS(1)=SROPER I $L(SROPER)>64 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROASSN",20,0)
 ;I '$D(SRTN) W CNT_". "
"RTN","SROASSN",21,0)
CASE ;W $E(SRSDATE,4,5)_"-"_$E(SRSDATE,6,7)_"-"_$E(SRSDATE,2,3),?14,SROPS(1) I $D(SROPS(2)) W !,?14,SROPS(2) I $D(SROPS(3)) W !,?14,SROPS(3)
"RTN","SROASSN",22,0)
 ;I $D(SROPS(4)) W !,?14,SROPS(4)
"RTN","SROASSN",23,0)
 I $D(SRTN) Q
"RTN","SROASSN",24,0)
 W !! S SRCASE(CNT)=SRASS_"^"_SRDT
"RTN","SROASSN",25,0)
 Q
"RTN","SROASSN",26,0)
OTHER ; other operations
"RTN","SROASSN",27,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRASS,13,SROTHER,0),"^"))>235 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROASSN",28,0)
 I SRLONG S SROPERS=$P(^SRF(SRASS,13,SROTHER,0),"^")
"RTN","SROASSN",29,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROASSN",30,0)
 Q
"RTN","SROASSN",31,0)
LOOP ; break procedures
"RTN","SROASSN",32,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<65  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROASSN",33,0)
 Q
"RTN","SRONASS")
0^2^B16792432
"RTN","SRONASS",1,0)
SRONASS ;B'HAM ISC/MAM - NO ASSESSMENT REASON ; [ 07/3/03  10:30 PM ]
"RTN","SRONASS",2,0)
 ;;3.0; Surgery ;**38,47,83,107,121**;24 Jun 93
"RTN","SRONASS",3,0)
 K SRTN N SRSEL D ^SROPSEL I '$D(DFN) S SROUT=1 G END
"RTN","SRONASS",4,0)
 D @$S(SRSEL=2:"^SROPSN",1:"STL^SROPS") I '$D(SRTN)  S SRSOUT=1 G END
"RTN","SRONASS",5,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",6) I X="Y" D ASS I 'OK G END
"RTN","SRONASS",6,0)
 W ! K DIR S X=$P($G(^SRF(SRTN,"RA")),"^",7) I X'="" D SET S DIR("B")=X
"RTN","SRONASS",7,0)
 S DIR(0)="130,102",DIR("A")="Reason an Assessment was not Created" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!(Y=""&(X'="@")) S SRSOUT=1 G END
"RTN","SRONASS",8,0)
 I X="@" D DELETE G END1
"RTN","SRONASS",9,0)
 I X'="" K DR,DA,DIE S DIE=130,DR="102///"_X_";323////N;284////N;Q;235////C",DA=SRTN D ^DIE K DR,DIE,DA
"RTN","SRONASS",10,0)
 D ^SROAEX S SROERR=SRTN D ^SROERR0
"RTN","SRONASS",11,0)
END1 K DA,DIK S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK
"RTN","SRONASS",12,0)
END ;
"RTN","SRONASS",13,0)
 K SRTN D ^SRSKILL W @IOF
"RTN","SRONASS",14,0)
 Q
"RTN","SRONASS",15,0)
LOOP ; break procedure
"RTN","SRONASS",16,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<60  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SRONASS",17,0)
 Q
"RTN","SRONASS",18,0)
OTHER ; other operations
"RTN","SRONASS",19,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>235 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SRONASS",20,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SRONASS",21,0)
 S SROPER=SROPER_$S(SROPERS=" ...":SROPERS,1:", "_SROPERS)
"RTN","SRONASS",22,0)
 Q
"RTN","SRONASS",23,0)
SET ; expand reason for no assessment code
"RTN","SRONASS",24,0)
 S Y=X,C=$P(^DD(130,102,0),"^",2) D Y^DIQ S X=Y
"RTN","SRONASS",25,0)
 Q
"RTN","SRONASS",26,0)
ASS ; assessment already exists
"RTN","SRONASS",27,0)
 S OK=0 W !!,"According to your records, an assessment should be created for this surgical",!,"case."
"RTN","SRONASS",28,0)
ASK W !!,"Do you want to update this information and not create a surgery risk ",!,"assessment for this case ?  NO// " R SRYN:DTIME I '$T!(SRYN["^") S OK="" Q
"RTN","SRONASS",29,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="N" I "YyNn"'[SRYN S SRYN="?"
"RTN","SRONASS",30,0)
 I SRYN="?" W !!,"If this case will not be used for the risk assessment study, Enter 'YES' to ",!,"change the status.  You will then be prompted for the reason that no assessment",!,"was done.  Enter 'NO' to leave this case unchanged."
"RTN","SRONASS",31,0)
 I SRYN="?" G ASK
"RTN","SRONASS",32,0)
 I "Yy"[SRYN S OK=1
"RTN","SRONASS",33,0)
 I "Nn"[SRYN W !!,"No action taken.",!!,"Press RETURN to continue  " R X:DTIME
"RTN","SRONASS",34,0)
 Q
"RTN","SRONASS",35,0)
DELETE ; delete no assessment reason
"RTN","SRONASS",36,0)
 W !!,"If you delete the reason why no assessment was created for this case, the",!,"computer will automatically update your records to make this a non-assessed",!,"case."
"RTN","SRONASS",37,0)
 W !!,"Are you sure that you want to delete the reason ?  NO// " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SRONASS",38,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="N" I "YyNn"'[SRYN S SRYN="?"
"RTN","SRONASS",39,0)
 I SRYN="?" W !!,"By entering an '@', you have told the computer that you want to remove the ",!,"reason why no assessment was created for this case.  If this reason should be",!,"deleted, enter 'YES'." G DELETE
"RTN","SRONASS",40,0)
 I "Nn"[SRYN S SRSOUT=1 W !!,"No action taken.",!!,"Press RETURN to continue  " R X:DTIME Q
"RTN","SRONASS",41,0)
 W !!,"Updating to non-assessed status..." D DRDEL W !!,"Press RETURN to continue  " R X:DTIME
"RTN","SRONASS",42,0)
 Q
"RTN","SRONASS",43,0)
DRDEL K DR,DIE,DA S DIE=130,DA=SRTN,DR="235///@;284///@;393///@;260///@;272///@;323///@;102///@;260.1///@" D ^DIE K DR,DIE,DA
"RTN","SRONASS",44,0)
 Q
"RTN","SROPS")
0^7^B13002966
"RTN","SROPS",1,0)
SROPS ;B'HAM ISC/MAM - SELECT CASE ; [ 07/8/03  12:10 PM ]
"RTN","SROPS",2,0)
 ;;3.0; Surgery ;**18,44,51,64,121**;24 Jun 93
"RTN","SROPS",3,0)
 W ! S SRSOUT=0 K DIC S DIC("A")="Select Patient: ",DIC=2,DIC(0)="QEAM" D ^DIC K DIC I Y<0 S SRSOUT=1 G END
"RTN","SROPS",4,0)
 S DFN=+Y D DEM^VADPT
"RTN","SROPS",5,0)
STL D HDR I $D(DUZ("SAV")) K SRNEWOP
"RTN","SROPS",6,0)
ADT S (SRDT,CNT,SRBACK)=0 F  S SRDT=$O(^SRF("ADT",DFN,SRDT)) Q:'SRDT!SRSOUT!$D(SRTN)!SRBACK  S SROP=0 F  S SROP=$O(^SRF("ADT",DFN,SRDT,SROP)) Q:'SROP!$D(SRTN)!SRSOUT!SRBACK  D LIST
"RTN","SROPS",7,0)
 G:SRBACK ADT G:'$D(SRNEWOP)&SRSOUT END D:SRSOUT HDR I $D(SRTN) G FUTURE
"RTN","SROPS",8,0)
 I '$D(SRNEWOP),'$D(SRCASE(1)) W !!,"There are no cases entered for "_VADM(1)_".",!!,"Press RETURN to continue  " R X:DTIME G END
"RTN","SROPS",9,0)
 I $D(SRNEWOP) S CNT=CNT+1,SRCASE(CNT)="" W !,CNT,". ENTER NEW SURGICAL CASE"
"RTN","SROPS",10,0)
OPT S SRSOUT=0 W !!!,"Select Operation: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SROPS",11,0)
 I '$D(SRCASE(X)) W !!,"Enter the number of the desired operation" W $S('$D(SRNEWOP):".",1:", or '"_CNT_"' to enter a new case.") G OPT
"RTN","SROPS",12,0)
 I $D(SRNEWOP),(X=CNT) D NEW^SROPER Q
"RTN","SROPS",13,0)
 S SRTN=+SRCASE(X)
"RTN","SROPS",14,0)
FUTURE ; is this a future case? if so, OK to proceed?
"RTN","SROPS",15,0)
 Q:$D(PRCP("I"))  ; quit if called from Inventory
"RTN","SROPS",16,0)
 S SROP=SRTN,SRSDATE=$P(^SRF(SRTN,0),"^",9) I $E(SRSDATE,1,7)'>DT Q
"RTN","SROPS",17,0)
 D HDR W !,?1 D CASE W !,$C(7) K DIR
"RTN","SROPS",18,0)
 S DIR("A",1)=">>> The case you have selected has a future date.",DIR("A")="    Are you sure you have selected the correct case ? ",DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) G END
"RTN","SROPS",19,0)
 I 'Y K SRTN D HDR G ADT
"RTN","SROPS",20,0)
 Q
"RTN","SROPS",21,0)
LIST ; list cases
"RTN","SROPS",22,0)
 I '$D(SRNONOR),$P($G(^SRF(SROP,"NON")),"^")="Y" Q
"RTN","SROPS",23,0)
 S SRSCAN=1 I $D(^SRF(SROP,.2)),$P(^(.2),"^",12)'="" K SRSCAN
"RTN","SROPS",24,0)
 I $D(SRSCAN),$D(^SRF(SROP,30)),$P(^(30),"^") Q
"RTN","SROPS",25,0)
 I $D(SRSCAN),$D(^SRF(SROP,31)),$P(^(31),"^",8) Q
"RTN","SROPS",26,0)
 I $D(^SRF(SROP,37)),$P(^(37),"^") Q
"RTN","SROPS",27,0)
 I $Y+5>IOSL S SRBACK=0 D SEL^SROPER Q:$D(SRTN)!(SRSOUT)  D HDR Q:SRBACK
"RTN","SROPS",28,0)
 S CNT=CNT+1,SRSDATE=$P(^SRF(SROP,0),"^",9) W !,CNT_". "
"RTN","SROPS",29,0)
CASE W $E(SRSDATE,4,5)_"-"_$E(SRSDATE,6,7)_"-"_$E(SRSDATE,2,3)
"RTN","SROPS",30,0)
 S SROPER=$P(^SRF(SROP,"OP"),"^") I $O(^SRF(SROP,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SROP,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROPS",31,0)
 D ^SROP1,LOCK K SROPS,MM,MMM S:$L(SROPER)<65 SROPS(1)=SROPER I $L(SROPER)>64 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROPS",32,0)
 W ?14,SROPS(1) I $D(SROPS(2)) W !,?14,SROPS(2) I $D(SROPS(3)) W !,?14,SROPS(3) W:$D(SROPS(4)) !,?14,SROPS(4)
"RTN","SROPS",33,0)
 W ! S SRCASE(CNT)=SROP_"^"_SRDT
"RTN","SROPS",34,0)
 Q
"RTN","SROPS",35,0)
LOCK ; case locked?
"RTN","SROPS",36,0)
 I $D(SRTN),$P($G(^SRF(SRTN,"LOCK")),"^") S SROPER=SROPER_" **LOCKED**"
"RTN","SROPS",37,0)
 Q
"RTN","SROPS",38,0)
OTHER ; other operations
"RTN","SROPS",39,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SROP,13,SROTHER,0),"^"))>235 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROPS",40,0)
 I SRLONG S SROPERS=$P(^SRF(SROP,13,SROTHER,0),"^")
"RTN","SROPS",41,0)
 S SROPER=SROPER_$S(SROPERS=" ...":SROPERS,1:", "_SROPERS)
"RTN","SROPS",42,0)
 Q
"RTN","SROPS",43,0)
LOOP ; break procedure
"RTN","SROPS",44,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<65  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROPS",45,0)
 Q
"RTN","SROPS",46,0)
END K SRTN D ^SRSKILL W @IOF
"RTN","SROPS",47,0)
 Q
"RTN","SROPS",48,0)
HDR ; print heading
"RTN","SROPS",49,0)
 W @IOF,!,?1,VADM(1)_"   "_VA("PID") S X=$P($G(VADM(6)),"^") W:X "        * DIED "_$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)_" *" W !
"RTN","SROPS",50,0)
 Q
"RTN","SROPSEL")
0^8^B2580963
"RTN","SROPSEL",1,0)
SROPSEL ;B'HAM ISC/MAM - SELECT CASE ; [ 06/19/03  3:22 PM ]
"RTN","SROPSEL",2,0)
 ;;3.0; Surgery ;**121**;24 Jun 93
"RTN","SROPSEL",3,0)
 K DIR S DIR(0)="SM^1:Patient;2:Case Number",DIR("A")="Select Number (1 or 2)",DIR("B")=1 S DIR("?",1)="Enter '1' to search by Patient",DIR("?")="Enter '2' to search by Case Number"
"RTN","SROPSEL",4,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!$D(DIRUT) S SRSOUT=1 G END
"RTN","SROPSEL",5,0)
 W ! S SRSEL=Y,SRSOUT=0
"RTN","SROPSEL",6,0)
 D @$S(Y="1":"PAT",1:"CASE") I SRSOUT=1 G END
"RTN","SROPSEL",7,0)
 S DFN=+Y D DEM^VADPT
"RTN","SROPSEL",8,0)
 Q
"RTN","SROPSEL",9,0)
PAT K DIC S DIC("A")="Select Patient: ",DIC=2,DIC(0)="QEAM" D ^DIC K DIC
"RTN","SROPSEL",10,0)
 I Y<0!$D(DUOUT)!$D(DIRUT) S SRSOUT=1 Q
"RTN","SROPSEL",11,0)
 Q
"RTN","SROPSEL",12,0)
CASE S DIR("A")="Enter Case Number",DIR(0)="NO" D ^DIR K DIR
"RTN","SROPSEL",13,0)
 I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 Q
"RTN","SROPSEL",14,0)
 S SROP=Y,Y=$G(^SRF(Y,0)) I '+Y W !!," "_SROP_" is an invalid entry. Please try again." W ! G CASE
"RTN","SROPSEL",15,0)
 Q
"RTN","SROPSEL",16,0)
END D ^SRSKILL W @IOF
"RTN","SROPSN")
0^9^B11285351
"RTN","SROPSN",1,0)
SROPSN ;B'HAM ISC/MAM - SELECT CASE ; [ 06/19/03  3:22 PM ]
"RTN","SROPSN",2,0)
 ;;3.0; Surgery ;**121**;24 Jun 93
"RTN","SROPSN",3,0)
 N SROPZ S SROPZ=SROP D HDR I $D(DUZ("SAV")) K SRNEWOP
"RTN","SROPSN",4,0)
 ;;;I $D(SRCASE(1)) S SRTN=+SRCASE(1) Q
"RTN","SROPSN",5,0)
ADT W ! S (SRDT,CNT)=0 F  S SRDT=$O(^SRF("ADT",DFN,SRDT)) Q:'SRDT!SRSOUT!$D(SRTN)  S SROP=0 F  S SROP=$O(^SRF("ADT",DFN,SRDT,SROP)) Q:'SROP!$D(SRTN)!SRSOUT  I SROPZ=SROP D LIST
"RTN","SROPSN",6,0)
 G:'$D(SRNEWOP)&SRSOUT END D:SRSOUT HDR I $D(SRTN) G FUTURE
"RTN","SROPSN",7,0)
 I '$D(SRNEWOP),'$D(SRCASE(1)) D  W !!,"Press RETURN to continue  " R X:DTIME G END
"RTN","SROPSN",8,0)
 .W !!,$S($P($G(^SRF(SROPZ,"NON")),"^")="Y":"Case #"_SROPZ_" is not an O.R. surgical procedure.",1:"Case #"_SROPZ_" is not marked for exclusion from assessment.")
"RTN","SROPSN",9,0)
 S SRTN=+SRCASE(1)
"RTN","SROPSN",10,0)
 Q
"RTN","SROPSN",11,0)
FUTURE ; is this a future case? if so, OK to proceed?
"RTN","SROPSN",12,0)
 Q:$D(PRCP("I"))  ; quit if called from Inventory
"RTN","SROPSN",13,0)
 S SROP=SRTN,SRSDATE=$P(^SRF(SRTN,0),"^",9) I $E(SRSDATE,1,7)'>DT Q
"RTN","SROPSN",14,0)
 D HDR W !,?1 D CASE W !,$C(7) K DIR
"RTN","SROPSN",15,0)
 S DIR("A",1)=">>> The case you have selected has a future date.",DIR("A")="    Are you sure you have selected the correct case ? ",DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) G END
"RTN","SROPSN",16,0)
 I 'Y K SRTN D HDR G ADT
"RTN","SROPSN",17,0)
 Q
"RTN","SROPSN",18,0)
LIST ; list cases
"RTN","SROPSN",19,0)
 I '$D(SRNONOR),$P($G(^SRF(SROP,"NON")),"^")="Y" Q
"RTN","SROPSN",20,0)
 S SRSCAN=1 I $D(^SRF(SROP,.2)),$P(^(.2),"^",12)'="" K SRSCAN
"RTN","SROPSN",21,0)
 I $D(SRSCAN),$D(^SRF(SROP,30)),$P(^(30),"^") Q
"RTN","SROPSN",22,0)
 I $D(SRSCAN),$D(^SRF(SROP,31)),$P(^(31),"^",8) Q
"RTN","SROPSN",23,0)
 I $D(^SRF(SROP,37)),$P(^(37),"^") Q
"RTN","SROPSN",24,0)
 S CNT=CNT+1,SRSDATE=$P(^SRF(SROP,0),"^",9) W !
"RTN","SROPSN",25,0)
CASE W $E(SRSDATE,4,5)_"-"_$E(SRSDATE,6,7)_"-"_$E(SRSDATE,2,3)
"RTN","SROPSN",26,0)
 S SROPER=$P(^SRF(SROP,"OP"),"^") I $O(^SRF(SROP,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SROP,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROPSN",27,0)
 D ^SROP1,LOCK K SROPS,MM,MMM S:$L(SROPER)<65 SROPS(1)=SROPER I $L(SROPER)>64 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROPSN",28,0)
 W ?14,SROPS(1) I $D(SROPS(2)) W !,?14,SROPS(2) I $D(SROPS(3)) W !,?14,SROPS(3) W:$D(SROPS(4)) !,?14,SROPS(4)
"RTN","SROPSN",29,0)
 W ! S SRCASE(CNT)=SROP_"^"_SRDT
"RTN","SROPSN",30,0)
 Q
"RTN","SROPSN",31,0)
LOCK ; case locked?
"RTN","SROPSN",32,0)
 I $D(SRTN),$P($G(^SRF(SRTN,"LOCK")),"^") S SROPER=SROPER_" **LOCKED**"
"RTN","SROPSN",33,0)
 Q
"RTN","SROPSN",34,0)
OTHER ; other operations
"RTN","SROPSN",35,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SROP,13,SROTHER,0),"^"))>235 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROPSN",36,0)
 I SRLONG S SROPERS=$P(^SRF(SROP,13,SROTHER,0),"^")
"RTN","SROPSN",37,0)
 S SROPER=SROPER_$S(SROPERS=" ...":SROPERS,1:", "_SROPERS)
"RTN","SROPSN",38,0)
 Q
"RTN","SROPSN",39,0)
LOOP ; break procedure
"RTN","SROPSN",40,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<65  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROPSN",41,0)
 Q
"RTN","SROPSN",42,0)
END K SRTN D ^SRSKILL W @IOF
"RTN","SROPSN",43,0)
 Q
"RTN","SROPSN",44,0)
HDR ; print heading
"RTN","SROPSN",45,0)
 W @IOF,!,?1,VADM(1)_"   "_VA("PID") S X=$P($G(VADM(6)),"^") W:X "        * DIED "_$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)_" *" W !
"RTN","SROPSN",46,0)
 Q
"VER")
8.0^22.0
**END**
**END**

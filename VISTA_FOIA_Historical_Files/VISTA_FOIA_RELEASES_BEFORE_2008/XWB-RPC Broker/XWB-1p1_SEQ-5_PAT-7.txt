$TXT Created by MENDOZA,RAUL at NXT.KERNEL.ISC-SF.VA.GOV  (KIDS) on THURSDAY, 06/03/99 at 17:46
=============================================================================
Run Date: JUN 04, 1999                     Designation: XWB*1.1*7
Package : XWB - RPC BROKER                    Priority: Mandatory
Version : 1.1         SEQ #5                   Status: Released
=============================================================================


Subject: Broker Listener/Available Slots

Category: 
  - Routine

Description: 
============

 This patch addresses two problems:
 A command error occuring at RESTART+17^XWBTCPL when the Broker tries to
 reopen a device that is not closed.  This seems to be a problem with Cache
 sites only.  The result of this error causes the Broker Listener to stop.
 This fix is in XWBTCPL routine.
  
 The other problem deals with available slots.  The listener doesn't check
 for available slots before starting a new process.  The listener will now
 check the MAX SIGNON ALLOWED field of the VOLUME SET multiple in the
 KERNEL SYSTEM PARAMETERS file, the same one used by Kernel logon.  This
 fix is also in XWBTCPL.
  
  <<THIS IS A SERVER SIDE PATCH ONLY.>>
  
  
  NOISs:
  =====
  MRN-1198-42547  -  Broker Listener
  WIC-0399-42263  -  Broker Listener
  MAR-0499-20186  -  Broker Listener
  CHY-1298-52305  -  Broker Listener
  CTX-0499-70598  -  Available Slots
  PUG-0399-51484  -  Available Slots
  
  
  Routine Summary:
  The following routine is included in this patch.  The second line of
  this routine now looks like:
   ;;1.1;RPC BROKER;<patchlist>;Mar 28, 1997
  
                   Checksum
  Routine         Old       New      2nd Line
  XWBTCPL       8215020   8850625    **1,7**
  
  List of preceeding patches: 1
  Sites should use CHECK^XTSUMBLD to verify checksums.
  
  =========================================================================
  Installation:
  
  
    1.  Do not run any RPC-Broker-based Client/Server software (e.g., CPRS,
        PCMM) during the installation.  No Broker-based client/server
        software should be running while installing this patch on the
        server.  To identify these jobs, check the system status and verify
        if any XWBTCPC routines are running (i.e., Broker Handler).  Once
        identified, notify users to logoff or forcex the jobs.  Active
        users may get NOSOURCE or CLOBBER errors.
  
    2.  Stop the Broker Listener on the server.  Check the system status
        and verify if the XWBTCPL routine is running (i.e., Broker
        Listener).  If it is running stop it.  To stop the Listener, do the
        following:
  
            a.  Log into your M server.                   
            b.  Enter the following at the M prompt:
  
                >D STOP^XWBTCP(Listener port)
                (Typically, the Listener port is 9200)
  
    3.  Broker routines are not usually mapped on systems that allow it, so
        you will probably not have to disable mapping.
  
    4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.
  
    5.  The patch has now been loaded into a Transport global on your
        system. You now need to use KIDS to install the Transport global.
        On the KIDS menu, under the 'Installation' menu, use the following
        options:
  
           Verify Checksums in Transport Global
           Print Transport Global
           Compare Transport Global to Current System
           Backup a Transport Global
  
  
    6.  On the KIDS menu, under the 'Installation' menu, use the following
        option:
          Install Package(s)  'XWB*1.1*7'
                               =========
  
        No Options or Protocols need to be placed out-of-order.
        Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO
                                                                        ==
                                                                         
  
    7.  MSM Sites - Answer YES to the question 'Want to MOVE routines to
        other CPUs?'. Enter the names of your Compute and Print server(s).
  
    8.  If the routines were unmapped as part of step 3, the mapped set
        should be rebuilt once the installation has run to completion. 
  
    9.  Restart the Broker Listener on the Server:
          a.  Log into your M server
          b.  Enter the following at the M prompt:
  
              >D STRT^XWBTCP(Listener port)
              (Typically, the Listener port is 9200)
  
 ======================================================================

Routine Information:
====================

Routine Name:
  - XWBTCPL


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : FORT,WALLY                     Date Entered : MAR 23, 1999
Completed By: MENDOZA,RAUL E.              Date Completed: JUN 04, 1999
Released By : PALMER,MICHAEL                Date Released : JUN 04, 1999
=============================================================================


Packman Mail Message:
=====================

$END TXT

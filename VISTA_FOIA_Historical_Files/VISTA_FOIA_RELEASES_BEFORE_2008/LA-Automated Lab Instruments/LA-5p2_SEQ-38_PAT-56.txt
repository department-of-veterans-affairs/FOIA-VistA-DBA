$TXT Created by MCCORMACK,JOHN at TRAIN.MILWAUKEE.VA.GOV  (KIDS) on WEDNESDAY, 07/19/00 at 11:13
=============================================================================
Run Date: JUL 25, 2000                     Designation: LA*5.2*56
Package : LA - AUTOMATED LAB INSTRUMENTS     Priority: Mandatory
Version : 5.2        SEQ #38                    Status: Released
=============================================================================

Associated patches: (v)LA*5.2*50   <<= must be installed BEFORE `LA*5.2*56'

Subject: LEDI RESULT (ORU) MESSAGES AND INTEGRATED SITES

Category: 
  - Routine

Description: 
============

 VISTA Laboratory Package patch LA*5.2*56 contains no changes to software
 controlled by VHA DIRECTIVE 99-053, titled VISTA BLOOD BANK SOFTWARE.
  
  
 DESCRIPTION
 ===========
  
 1. When the Lab LEDI software needs to build a HL7 message to return lab
 test results (ORU) to the collecting facility, the message building could
 fail at the host laboratory facility with the error undefined variable
 LA("I") in routine PID+4^LA7VORU causing the collecting facility not
 to receive a result message. This problem occurs when the host lab's entry
 for the collecting facility in the INSTITUTION file (#4) has an internal
 entry number which is different from the VA Station Number and the
 collecting facility is a division of an integrated facility. The software
 is attempting to return the results to the collecting facility instead of
 the primary facility's computer system. If no associated HL7 protocol was
 identified message building was continuing with the HL7 and Lab environment
 not properly initialized. The software would error when it referenced
 variable LA("I") that was not defined during this initialization.
  
 Routine LA7VMSG has been changed to retrieve the VA Station Number from
 the INSTITUTION file for an integrated collecting facility's primary
 system entry when the station number is used in building the result (ORU)
 message.
  
 2. Routine LA7VMSG has been changed to determine if a link back to the
 integrated facility's primary system does not exist. If a link does not
 exist, the results are returned via the collecting facility.
  
 3. Routine LA7VMSG has been split into two routines (LA7VMSG and LA7VMSG1)
 because it exceeded the maximum routine size of 10k as specified by the 
 SAC.
  
 4. Recording of an error condition in the Lab Messaging Error Log has been
 added when the software is unable to find the appropriate entry in the
 PROTOCOL file (#101) to use in building the HL7 message. This can occur
 when no entry is found in the PROTOCOL file or the HL7 package is unable to
 initialize the HL7 message environment for message building. The error that
 will be recorded is #28 in LA7 MESSAGE LOG BULLETINS file (#62.485).
 The error text will be:
   Msg # |1| encountered the following HL7 generation error: |2|.
  
    where |1| is the LA7 MESSAGE QUEUE file (#62.49) entry number
          |2| is the conditions:
              1. Invalid/undefined protocol xxx
              2. Call to INIT^HLFNC2 failed for protocol xxx
              xxx - being the name of the protocol in the PROTOCOL file.
  
  
  
 ASSOCIATED NOIS
 ---------------
  CON-0400-10572
  
  
 TEST SITES
 ----------
   Connecticut HCS
   Boston HCS
  
  
 ROUTINE SUMMARY
 ===============
  
   The following is a list of routines included in this patch.
   The second line of each routine now looks like:
  
   <tab>;;5.2;AUTOMATED LAB INSTRUMENTS;**[Patch List]**;Sep 27, 1994
  
                     CHECK^XTSUMBLD results
                     Checksum       Checksum
    Routine Name     Before Patch   After Patch    Patch List
    ------------     ------------   -----------    ------------
    LA56             N/A            4543424        **56**(Deleted by KIDS)
    LA7VMSG          22442510       16357149       **27,50,56**
    LA7VMSG1         N/A            3358807        **56**
  
  
  
 ************************************************************************
  
 INSTALLATION INSTRUCTIONS
 =========================
  
   The install time for this patch is less than 5 minutes. This patch
   can be installed when Laboratory users are on the system.
   Suggested time to install: non-peak requirement hours. Verification
   of lab test results should be suspended. The install will disable
   several Lab verifying options as specified in #7 below.
  
  
 NOTE: Kernel, MailMan and HL7 patches must be current on the target system
       to avoid problems loading and/or installing this patch.
  
       Patch installation needs to be coordinated with the Laboratory
       Information Manager (LIM/ADPAC).
  
  
   1.  If any of the above routines are mapped, disable mapping for them.
  
   2.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
       option will load the KIDS patch onto your system.
  
   3.  The patch has now been loaded into a Transport global on your
       system.  You now need to use KIDS to install the transport global.
  
   4.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
       select the 'Installation' menu.
  
   5.  Use the 'Verify Checksum in Transport Global' option and verify that
       all routines have the correct checksums.
  
   6.  On the KIDS menu, under the 'Installation' menu, use the following
       options:
         Print Transport Global
         Compare Transport Global to Current System
         Backup a Transport Global
  
       If you wish to preserve a copy of the routines exported in this patch
       prior to installation, you should use the 'Backup a Transport Global'
       option at this time.  You may also compare the routines in your
       production account to the routines in the patch by using the 'Compare
       a Transport Global to Current System' option.
  
   7.  The install will disable the following Lab verifying options during
       patch installation.
  
       Enter/verify data (auto instrument) [LRVR]
       Enter/verify data (Work list) [LRVRW]
       Enter/verify data (Load list) [LRVRW2]
       Batch data entry (chem, hem, tox, etc.) [LRSTUF]
       Group verify (EA, EL, EW) [LRGV]
  
   8.  Use the 'Install Package(s)' option under the 'Installation' menu
       and select the package 'LA*5.2*56'.  When prompted 'Want to
       DISABLE Scheduled Options, Menu Options, and Protocols? YES//',
       choose 'NO'.
  
   9. On a mapped system, rebuild your map set.
  
  10. Routine LA56 will be deleted after successful patch installation.
  
  
 POST-INSTALLATION INSTRUCTIONS: NONE
  
  
  
  
 ************************************************************************
 Installation example:
  
 Select INSTALL NAME:    LA*5.2*56     Loaded from Distribution  
 4/10/00@14:57:02
      => LA*5.2*56
  
 This Distribution was loaded on Apr 10, 2000@14:57:02 with header of
    LA*5.2*56
    It consisted of the following Install(s):
       LA*5.2*56
 Checking Install for Package LA*5.2*56
 Will first run the Environment Check Routine, LA56
  
  
                         --- Environment Check is Ok ---
  
 Install Questions for LA*5.2*56
  
  
 Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// NO
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   TELNET VIRTUAL
  
  
  
  Install Started for LA*5.2*56 :
                Apr 10, 2000@14:57:45
  
 Build Distribution Date: Apr 10, 2000
  
  Installing Routines:
                Apr 10, 2000@14:57:45
  
  Running Pre-Install Routine: PRE^LA56
  
                Sending install started alert to mail group G.LMI
  
                           *** Pre install started ***
  
                   --- No actions required for pre install ---
  
                          *** Pre install completed ***
  
  Installing PACKAGE COMPONENTS:
  
  Installing OPTION
                Apr 10, 2000@14:57:45
  
  Running Post-Install Routine: POST^LA56
  
                           *** Post install started ***
  
                   --- No actions required for post install ---
  
                          *** Post install completed ***
  
               Sending install completion alert to mail group G.LMI
  
  Updating Routine file...
  
  Updating KIDS files...
  
  LA*5.2*56 Installed.
                Apr 10, 2000@14:57:46
  
  
  
  
 Install Completed

Routine Information:
====================

Routine Name:
  - LA7VMSG


Routine Checksum:

Routine Name:
  - LA7VMSG1


Routine Checksum:

Routine Name:
  - LA56


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : MCCORMACK,JOHN                 Date Entered : APR 10, 2000
Completed By: ELIJAH,VICKEY                 Date Completed: JUL 21, 2000
Released By : LECLAIR,RAY                   Date Released : JUL 25, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

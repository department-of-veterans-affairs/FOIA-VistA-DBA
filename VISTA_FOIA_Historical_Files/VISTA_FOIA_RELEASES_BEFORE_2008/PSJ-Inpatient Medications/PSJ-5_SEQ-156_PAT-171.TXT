$TXT Created by IRWIN,BENJAMIN at CHEY20.FO-BAYPINES.MED.VA.GOV  (KIDS) on Monday, 04/10/06 at 12:17
=============================================================================
Run Date: SEP 28, 2006                     Designation: PSJ*5*171
Package : PSJ - INPATIENT MEDICATIONS         Priority: Mandatory
Version : 5       SEQ #156                      Status: Released
                  Compliance Date: OCT 29, 2006
=============================================================================

Associated patches: (v)PSJ*5*167   <<= must be installed BEFORE `PSJ*5*171'

Subject: MULTIPLE COMPLEX ORDER CORRUPTION

Category: 
  - Routine

Description:
============

 1.  This problem happens when multiple complex orders are selected
     together to be finished or verified.  If the first order is partially 
     finished or verified, the system notifies the user that if all orders
     are not finished or verified, then none of the orders will be finished
     or verified, but leaves the order in a "corrupted" state.
  
     This patch makes changes to the routine to clean up the temporary
     variables so the process can loop through multiple complex orders 
     without causing the "corrupted" state.
  
 2.  Currently in PHARMACY PATIENT (#55) file, in the UNIT DOSE (#62) field 
     multiple, within the ACTIVITY LOG (#29) sub-field multiple, the data
     which represents the file number of node #14 is sometimes being written 
     incorrectly as 55,09 instead of the correct value 55.09.
  
     The patch includes the correction to the routines that are writing 
     this information and a post init routine is included  to correct the 
     existing information.
 
     The post install routine PSJ0171 will queue itself to run for Now during 
     the patch installation and will fix the improperly formatted 55.09 nodes.
     The routine may take several minutes to complete and the user will receive 
     a MailMan message which states "The cleanup of the Inpatient Medication 
     Activity Multiple has completed".  This indicates the routine has completed
     and any incorrectly formatted 55.09 nodes found have been corrected.  
     Users may remain on the system while post installation routine is running. 
  
  
 Associated Remedy Tickets:
 ==========================
  HD99077
     DUPLICATE COMPLEX ORDER NOT ALLOWING VERIFICATION.
  HD120412
     Complex order "corrupted" by pharmacist edit.
  HD127558
     Complex Order Start Time Default is erroneous & does not allow editing.
  HD140422
     Duplicate of HD127558
  
 Test Sites:
 ===========
 BOISE, ID
 CENTRAL ALABAMA HCS
 ILLIANA HCS
  
  
 Installation Instructions:
 ==========================
  
    The patch can be installed with users on the system. Installation will
    take less than 1 minute.
  
 1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2. From the Kernel Installation & Distribution System menu, select
    the Installation menu.
  
 3. From this menu, you may select to use the following options
    (when prompted for INSTALL NAME, enter PSJ*5.0*171):
  
      (a) Backup a Transport Global - this option will create a backup
          message of any routines exported with the patch.  It will NOT
          backup any other changes such as DDs or templates.
      (b) Compare Transport Global to Current System - this option will
          allow you to view all changes that will be made when the patch is
      (c) Verify Checksums in Transport Global - this option will allow you
          to ensure the integrity of the routines that are in the transport
          global.
      (d) Print Transport Global - this option will allow you to view the
          components of the KIDS build.
  
 4. Use the Install Package(s) option and select the package PSJ*5.0*171.
  
 5. When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//"
    respond NO.
  
 6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
    Protocols? YES//" respond NO.
 
 7. Delete the Post-Init Routine
    ----------------------------
    You may delete the PSJ0171 routine from your system after the cleanup 
    of existing Activity Multiple Nodes email is received as described in
    the example installation section.  This cleanup could run several minutes.
  
 Example Installation:
 =====================
  
 Select INSTALL NAME:    PSJ*5.0*171     Loaded from Distribution  
 5/27/05@14:53:49
      => PSJ*5*171
  
 This Distribution was loaded on May 27, 2005@14:53:49 with header of 
    PSJ*5*171
    It consisted of the following Install(s):
     PSJ*5.0*171
 Checking Install for Package PSJ*5.0*171
  
 Install Questions for PSJ*5.0*171
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   TCP
                                   
 PSJ*5.0*171                                   
 --------------------------------------------------------------------------
  
  Install Started for PSJ*5.0*171 : 
                Jan 30, 2006@17:14:32
  
 Build Distribution Date: Jan 27, 2006
                                   
 PSJ*5.0*171                                   
 --------------------------------------------------------------------------
  
  Installing Routines:
                Jan 30, 2006@17:14:32
  
  Running Post-Install Routine: EN^PSJ0171
 The cleanup of existing Activity Multiple Nodes is
 queued to start NOW.
  
 YOU WILL RECEIVE A MAILMAN MESSAGE WHEN TASK #29988 HAS COMPLETED.
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSJ*5.0*171 Installed. 
                Jan 30, 2006@17:14:33
  
  Install Message sent #10271
 --------------------------------------------------------------------------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
  
 Install Completed
  
 Routine Summary:
 ================
 The second line now reads as follows:
  
      <TAB>;;5.0; INPATIENT MEDICATIONS ;**[patch list]**;16 DEC 97
  
 CHECK^XTSUMBLD results:
  
 Routine  Before Patch    After Patch            Patch List
 -------------------------------------------------------------------------
 PSGOEV       27804340       27804448      5,7,15,28,33,50,64,58,77,
                                               78,80,110,111,133,171
 PSJ0171           N/A        2597285                            171
 PSJOEA       14033932       14034040            110,127,133,167,171
 PSJOEA1      18305850       17963210                110,127,133,171
 
 
 
 
 
 
 

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSGOEV
    Before: B63457017  After: B63457433  **5,7,15,28,33,50,64,58,77,78,
                                          80,110,111,133,171**
Routine Name: PSJ0171
    Before:       n/a  After:  B4742362  **171**
Routine Name: PSJOEA
    Before: B30553608  After: B30837681  **110,127,133,167,171**
Routine Name: PSJOEA1
    Before: B29163507  After: B29398066  **110,127,133,171**

=============================================================================
User Information:
Entered By  : IRWIN,BENJAMIN                Date Entered  : JAN 23, 2006
Completed By: GOLDSMITH,JAMES H             Date Completed: SEP 26, 2006
Released By : CONNOLLY,BARBARA              Date Released : SEP 28, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released DG*5.3*694 SEQ #626
Extracted from mail message
**KIDS**:DG*5.3*694^

**INSTALL NAME**
DG*5.3*694
"BLD",6090,0)
DG*5.3*694^REGISTRATION^0^3060616^y
"BLD",6090,4,0)
^9.64PA^^
"BLD",6090,6.3)
8
"BLD",6090,"ABPKG")
n
"BLD",6090,"KRN",0)
^9.67PA^8989.52^19
"BLD",6090,"KRN",.4,0)
.4
"BLD",6090,"KRN",.4,"NM",0)
^9.68A^^
"BLD",6090,"KRN",.401,0)
.401
"BLD",6090,"KRN",.402,0)
.402
"BLD",6090,"KRN",.403,0)
.403
"BLD",6090,"KRN",.5,0)
.5
"BLD",6090,"KRN",.84,0)
.84
"BLD",6090,"KRN",3.6,0)
3.6
"BLD",6090,"KRN",3.8,0)
3.8
"BLD",6090,"KRN",9.2,0)
9.2
"BLD",6090,"KRN",9.8,0)
9.8
"BLD",6090,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6090,"KRN",9.8,"NM",1,0)
DGRSTBAD^^0^B86893663
"BLD",6090,"KRN",9.8,"NM","B","DGRSTBAD",1)

"BLD",6090,"KRN",19,0)
19
"BLD",6090,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",6090,"KRN",19,"NM",1,0)
DG INVALID STATE/COUNTY REPORT^^0
"BLD",6090,"KRN",19,"NM","B","DG INVALID STATE/COUNTY REPORT",1)

"BLD",6090,"KRN",19.1,0)
19.1
"BLD",6090,"KRN",101,0)
101
"BLD",6090,"KRN",409.61,0)
409.61
"BLD",6090,"KRN",771,0)
771
"BLD",6090,"KRN",870,0)
870
"BLD",6090,"KRN",8989.51,0)
8989.51
"BLD",6090,"KRN",8989.52,0)
8989.52
"BLD",6090,"KRN",8994,0)
8994
"BLD",6090,"KRN","B",.4,.4)

"BLD",6090,"KRN","B",.401,.401)

"BLD",6090,"KRN","B",.402,.402)

"BLD",6090,"KRN","B",.403,.403)

"BLD",6090,"KRN","B",.5,.5)

"BLD",6090,"KRN","B",.84,.84)

"BLD",6090,"KRN","B",3.6,3.6)

"BLD",6090,"KRN","B",3.8,3.8)

"BLD",6090,"KRN","B",9.2,9.2)

"BLD",6090,"KRN","B",9.8,9.8)

"BLD",6090,"KRN","B",19,19)

"BLD",6090,"KRN","B",19.1,19.1)

"BLD",6090,"KRN","B",101,101)

"BLD",6090,"KRN","B",409.61,409.61)

"BLD",6090,"KRN","B",771,771)

"BLD",6090,"KRN","B",870,870)

"BLD",6090,"KRN","B",8989.51,8989.51)

"BLD",6090,"KRN","B",8989.52,8989.52)

"BLD",6090,"KRN","B",8994,8994)

"BLD",6090,"QUES",0)
^9.62^^
"BLD",6090,"REQB",0)
^9.611^1^1
"BLD",6090,"REQB",1,0)
XU*8.0*378^2
"BLD",6090,"REQB","B","XU*8.0*378",1)

"KRN",19,12502,-1)
0^1
"KRN",19,12502,0)
DG INVALID STATE/COUNTY REPORT^Invalid State/Inactive County Report^^R^^^^^^^^
"KRN",19,12502,1,0)
^19.06^4^4^3060616^^
"KRN",19,12502,1,1,0)
The report lists PATIENT file records whose address fields
"KRN",19,12502,1,2,0)
contain invalid states and/or inactive counties.  The user
"KRN",19,12502,1,3,0)
may run the report for 1) US and US Possessions Only,
"KRN",19,12502,1,4,0)
2) Foreign Addresses Only, or 3) Both.
"KRN",19,12502,25)
EN^DGRSTBAD
"KRN",19,12502,"U")
INVALID STATE/INACTIVE COUNTY 
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
694^3060616^123456834
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DGRSTBAD")
0^1^B86893663
"RTN","DGRSTBAD",1,0)
DGRSTBAD ;JDH,EG-STATE FILE REPORT ; 06/15/2006 6:15 AM
"RTN","DGRSTBAD",2,0)
 ;;5.3;Registration;**694**;Aug 13, 1993;Build 8
"RTN","DGRSTBAD",3,0)
 Q
"RTN","DGRSTBAD",4,0)
EN N %ZIS,DGNS,DIR,X,Y,DGRPTYP,DIRUT,MSG,POP,ZTSK
"RTN","DGRSTBAD",5,0)
 S DIR("A")="Report on States Not Recognized by AAC or Inactive Counties for"
"RTN","DGRSTBAD",6,0)
 S DGRPTYP(1)="US and US Possessions Only"
"RTN","DGRSTBAD",7,0)
 S DGRPTYP(2)="Foreign Addresses Only"
"RTN","DGRSTBAD",8,0)
 S DIR("B")=1
"RTN","DGRSTBAD",9,0)
 S DIR(0)="S^1:"_DGRPTYP(1)_";2:"_DGRPTYP(2)_";3:Both"
"RTN","DGRSTBAD",10,0)
 D ^DIR G:$D(DIRUT) EXIT
"RTN","DGRSTBAD",11,0)
 S DGRPTYP=Y
"RTN","DGRSTBAD",12,0)
 S MSG(1)=""
"RTN","DGRSTBAD",13,0)
 S MSG(2)="This report may take a long time to generate.  It is recommended that the report"
"RTN","DGRSTBAD",14,0)
 S MSG(3)="be queued to print."
"RTN","DGRSTBAD",15,0)
 S MSG(4)=""
"RTN","DGRSTBAD",16,0)
 D BMES^XPDUTL(.MSG)
"RTN","DGRSTBAD",17,0)
 S %ZIS="Q" D ^%ZIS G:POP EXIT
"RTN","DGRSTBAD",18,0)
 S DGNS="DGRSTBAD"
"RTN","DGRSTBAD",19,0)
 I $D(IO("Q")) D ZTSK G EXIT
"RTN","DGRSTBAD",20,0)
 D PROC(DGNS,.DGRPTYP),^%ZISC
"RTN","DGRSTBAD",21,0)
 Q
"RTN","DGRSTBAD",22,0)
EXIT D HOME^%ZIS
"RTN","DGRSTBAD",23,0)
 Q
"RTN","DGRSTBAD",24,0)
 ;
"RTN","DGRSTBAD",25,0)
ZTSK ;
"RTN","DGRSTBAD",26,0)
 N ZTSAVE,ZTDTH,ZTRTN,ZTDESC,Y
"RTN","DGRSTBAD",27,0)
 S (ZTSAVE("DGRPTYP"),ZTSAVE("DGRPTYP("),ZTSAVE("DGNS"))=""
"RTN","DGRSTBAD",28,0)
 S %DT("A")="Requested Start Time: ",%DT="FATE"
"RTN","DGRSTBAD",29,0)
 S %DT(0)="NOW",%DT("B")="NOW" D ^%DT K %DT(0) I Y<0 Q
"RTN","DGRSTBAD",30,0)
 S ZTDTH=Y
"RTN","DGRSTBAD",31,0)
 S ZTDESC="INVALID STATE/INACTIVE COUNTY REPORT"
"RTN","DGRSTBAD",32,0)
 S ZTRTN="PROC^"_DGNS_"(DGNS,.DGRPTYP)"
"RTN","DGRSTBAD",33,0)
 D ^%ZTLOAD
"RTN","DGRSTBAD",34,0)
 I $D(ZTSK) D
"RTN","DGRSTBAD",35,0)
 .W !!,"REPORT QUEUED"
"RTN","DGRSTBAD",36,0)
 E  W !!,"REPORT NOT QUEUED"
"RTN","DGRSTBAD",37,0)
 Q
"RTN","DGRSTBAD",38,0)
 ;
"RTN","DGRSTBAD",39,0)
PROC(DGNS,DGRPTYP) ;
"RTN","DGRSTBAD",40,0)
 N X,DGFARR,DGFORR,DGSARR,DFN,DGD1,DGGLB,DGFILEP,DGPARR,DGIENS,DGFILE,DGNODE,DGPTYP,DGTARR,DGNAME
"RTN","DGRSTBAD",41,0)
 N DGIENS,DGSSN,DGPAGE,DGFLDNO,DGFLDS,DGPTR,DGTXT,DGFLD,DGQUIT,DGEND,DGSTRT,X1
"RTN","DGRSTBAD",42,0)
 S DGFILE=2
"RTN","DGRSTBAD",43,0)
 S DGGLB="^DPT"
"RTN","DGRSTBAD",44,0)
 K ^TMP($J,DGNS)
"RTN","DGRSTBAD",45,0)
 D FILE2(.DGFORR,"FOTXT")
"RTN","DGRSTBAD",46,0)
 D FILE2(.DGFARR,"FATXT")
"RTN","DGRSTBAD",47,0)
 S DGSTRT=$S(DGRPTYP=3:1,1:DGRPTYP)
"RTN","DGRSTBAD",48,0)
 S DGEND=$S(DGRPTYP=3:2,1:DGRPTYP)
"RTN","DGRSTBAD",49,0)
 S DFN=0
"RTN","DGRSTBAD",50,0)
 F  S DFN=$O(^DPT(DFN)) Q:'DFN  D
"RTN","DGRSTBAD",51,0)
 . K DGPARR
"RTN","DGRSTBAD",52,0)
 . I $$ISACT(DFN)'="Y" Q
"RTN","DGRSTBAD",53,0)
 . D FLDL
"RTN","DGRSTBAD",54,0)
 . Q
"RTN","DGRSTBAD",55,0)
 D RPT(DGNS,.DGRPTYP,DGSTRT,DGEND)
"RTN","DGRSTBAD",56,0)
 D XMY(.DGSARR,.DGRPTYP)
"RTN","DGRSTBAD",57,0)
 K ^TMP($J,DGNS)
"RTN","DGRSTBAD",58,0)
 Q
"RTN","DGRSTBAD",59,0)
 ;
"RTN","DGRSTBAD",60,0)
FLDL ;
"RTN","DGRSTBAD",61,0)
 I DGRPTYP'=2 D
"RTN","DGRSTBAD",62,0)
 . S DGFILEP=0
"RTN","DGRSTBAD",63,0)
 . F  S DGFILEP=$O(DGFARR(1,DGFILEP)) Q:'DGFILEP  D FLDLG
"RTN","DGRSTBAD",64,0)
 . Q
"RTN","DGRSTBAD",65,0)
 I DGRPTYP'=1 D
"RTN","DGRSTBAD",66,0)
 . S DGFILEP=0
"RTN","DGRSTBAD",67,0)
 . F  S DGFILEP=$O(DGFORR(1,DGFILEP)) Q:'DGFILEP  D FLDLG
"RTN","DGRSTBAD",68,0)
 . Q
"RTN","DGRSTBAD",69,0)
 D:$D(DGPARR) BUILD(DGNS,DFN,.DGPARR,.DGFARR,.DGSARR)
"RTN","DGRSTBAD",70,0)
 Q
"RTN","DGRSTBAD",71,0)
FLDLG ;  
"RTN","DGRSTBAD",72,0)
 I DGFILEP=DGFILE D
"RTN","DGRSTBAD",73,0)
 . S DGIENS=DFN_","
"RTN","DGRSTBAD",74,0)
 . D CHECK1(DGRPTYP,.DGFARR,.DGFORR,DGFILEP,DGIENS,.DGPARR,DGSTRT,DGEND)
"RTN","DGRSTBAD",75,0)
 . Q
"RTN","DGRSTBAD",76,0)
 E  D
"RTN","DGRSTBAD",77,0)
 . S X=+$O(^DD(DGFILE,"SB",DGFILEP,0))
"RTN","DGRSTBAD",78,0)
 . S DGNODE=$P($P($G(^DD(DGFILE,X,0)),U,4),";") Q:'$L(DGNODE)
"RTN","DGRSTBAD",79,0)
 . S DGD1=0
"RTN","DGRSTBAD",80,0)
 . F  S DGD1=$O(@DGGLB@(DFN,DGNODE,DGD1)) Q:'DGD1  D
"RTN","DGRSTBAD",81,0)
 .. S DGIENS=DGD1_","_DFN_","
"RTN","DGRSTBAD",82,0)
 .. D CHECK1(DGRPTYP,.DGFARR,.DGFORR,DGFILEP,DGIENS,.DGPARR,DGSTRT,DGEND)
"RTN","DGRSTBAD",83,0)
 .. Q
"RTN","DGRSTBAD",84,0)
 . Q
"RTN","DGRSTBAD",85,0)
 Q
"RTN","DGRSTBAD",86,0)
CHECK1(DGRPTYP,DGFARR,DGFORR,DGFILEP,DGIENS,DGPARR,DGSTRT,DGEND) ;
"RTN","DGRSTBAD",87,0)
 ;
"RTN","DGRSTBAD",88,0)
 ;For each report type
"RTN","DGRSTBAD",89,0)
 F DGPTYP=DGSTRT:1:DGEND D CHG
"RTN","DGRSTBAD",90,0)
 Q
"RTN","DGRSTBAD",91,0)
CHG ;
"RTN","DGRSTBAD",92,0)
 N FOREIGN
"RTN","DGRSTBAD",93,0)
 ;Extract appropriate fields for report type
"RTN","DGRSTBAD",94,0)
 I DGPTYP=1 S DGFLDS=DGFARR(1,DGFILEP)
"RTN","DGRSTBAD",95,0)
 E  S DGFLDS=DGFORR(1,DGFILEP)
"RTN","DGRSTBAD",96,0)
 K DGTARR,DGERR,SDQUERY,SDQDATA
"RTN","DGRSTBAD",97,0)
 N I D GETS^DIQ(DGFILEP,DGIENS,DGFLDS,"I","DGTARR","DGERR")
"RTN","DGRSTBAD",98,0)
 S DGFLD=0
"RTN","DGRSTBAD",99,0)
 F  S DGFLD=$O(DGTARR(DGFILEP,DGIENS,DGFLD)) Q:'DGFLD  D
"RTN","DGRSTBAD",100,0)
 . S DGPTR=DGTARR(DGFILEP,DGIENS,DGFLD,"I") Q:'DGPTR
"RTN","DGRSTBAD",101,0)
 . S FOREIGN=$$FOREIGN(DGPTR)
"RTN","DGRSTBAD",102,0)
 . I FOREIGN="Y",DGPTYP=1 Q
"RTN","DGRSTBAD",103,0)
 . I FOREIGN="N",DGPTYP=2 Q
"RTN","DGRSTBAD",104,0)
 . ;Check county inactive date for both foreign and US
"RTN","DGRSTBAD",105,0)
 . I DGFLD=.117 D
"RTN","DGRSTBAD",106,0)
 .. S X1=DGTARR(DGFILEP,DGIENS,.115,"I")
"RTN","DGRSTBAD",107,0)
 .. S X=$G(^DIC(5,X1,1,DGPTR,0))
"RTN","DGRSTBAD",108,0)
 .. S:$P(X,U,5)!$D(DGPARR(DGPTYP,DGFILEP,DGIENS,.115)) DGPARR(DGPTYP,DGFILEP,DGIENS,DGFLD)=$P(X,U)
"RTN","DGRSTBAD",109,0)
 .. Q
"RTN","DGRSTBAD",110,0)
 . S X=$G(^DIC(5,DGPTR,0))
"RTN","DGRSTBAD",111,0)
 . I '$P(X,U,5)!($E($P(X,U,1),1)="Z") S DGPARR(DGPTYP,DGFILEP,DGIENS,DGFLD)=$P(X,U)
"RTN","DGRSTBAD",112,0)
 . Q
"RTN","DGRSTBAD",113,0)
 Q
"RTN","DGRSTBAD",114,0)
 ;
"RTN","DGRSTBAD",115,0)
BUILD(DGNS,DGDO,DGPARR,DGFARR,DGSARR) ;
"RTN","DGRSTBAD",116,0)
 ;
"RTN","DGRSTBAD",117,0)
 N X,DGNAME,DGSSN,DGPTYP
"RTN","DGRSTBAD",118,0)
 S X=$G(^DPT(DFN,0))
"RTN","DGRSTBAD",119,0)
 S DGNAME=$P(X,U) Q:'$L(DGNAME)
"RTN","DGRSTBAD",120,0)
 S DGSSN=$P(X,U,9)
"RTN","DGRSTBAD",121,0)
 S:'$L(DGSSN) DGSSN="NONE"
"RTN","DGRSTBAD",122,0)
 S DGPTYP=0
"RTN","DGRSTBAD",123,0)
 F  S DGPTYP=$O(DGPARR(DGPTYP)) Q:'DGPTYP  D DGFILEP
"RTN","DGRSTBAD",124,0)
 Q
"RTN","DGRSTBAD",125,0)
DGFILEP ;
"RTN","DGRSTBAD",126,0)
 N DGFILEP
"RTN","DGRSTBAD",127,0)
 S DGFILEP=0
"RTN","DGRSTBAD",128,0)
 F  S DGFILEP=$O(DGPARR(DGPTYP,DGFILEP)) Q:'DGFILEP  D DGIENS
"RTN","DGRSTBAD",129,0)
 Q
"RTN","DGRSTBAD",130,0)
DGIENS ;
"RTN","DGRSTBAD",131,0)
 N DGIENS
"RTN","DGRSTBAD",132,0)
 S DGIENS=""
"RTN","DGRSTBAD",133,0)
 F  S DGIENS=$O(DGPARR(DGPTYP,DGFILEP,DGIENS)) Q:DGIENS=""  D DGFLD
"RTN","DGRSTBAD",134,0)
 Q
"RTN","DGRSTBAD",135,0)
DGFLD ;
"RTN","DGRSTBAD",136,0)
 N DGFLD
"RTN","DGRSTBAD",137,0)
 S DGFLD=0
"RTN","DGRSTBAD",138,0)
 F  S DGFLD=$O(DGPARR(DGPTYP,DGFILEP,DGIENS,DGFLD)) Q:'DGFLD  D
"RTN","DGRSTBAD",139,0)
 . I DGPTYP=1 D
"RTN","DGRSTBAD",140,0)
 .. S ^TMP($J,DGNS,DGPTYP,DGNAME,DGSSN,DGIENS,DGFARR(0,DGFILEP,DGFLD))=DGPARR(DGPTYP,DGFILEP,DGIENS,DGFLD)
"RTN","DGRSTBAD",141,0)
 .. S DGSARR(DGPTYP,DGFARR(0,DGFILEP,DGFLD))=$G(DGSARR(DGPTYP,DGFARR(0,DGFILEP,DGFLD)))+1
"RTN","DGRSTBAD",142,0)
 .. Q
"RTN","DGRSTBAD",143,0)
 . I DGPTYP=2 D
"RTN","DGRSTBAD",144,0)
 .. S ^TMP($J,DGNS,DGPTYP,DGNAME,DGSSN,DGIENS,DGFORR(0,DGFILEP,DGFLD))=DGPARR(DGPTYP,DGFILEP,DGIENS,DGFLD)
"RTN","DGRSTBAD",145,0)
 .. S DGSARR(DGPTYP,DGFORR(0,DGFILEP,DGFLD))=$G(DGSARR(DGPTYP,DGFORR(0,DGFILEP,DGFLD)))+1
"RTN","DGRSTBAD",146,0)
 .. Q
"RTN","DGRSTBAD",147,0)
 . Q
"RTN","DGRSTBAD",148,0)
 Q
"RTN","DGRSTBAD",149,0)
 ;
"RTN","DGRSTBAD",150,0)
HDR(DGRPTYP,DGPTYP,DGPAGE) ;
"RTN","DGRSTBAD",151,0)
 N DGQUIT
"RTN","DGRSTBAD",152,0)
 S DGQUIT=0
"RTN","DGRSTBAD",153,0)
 I DGPAGE,$E(IOST,1,2)="C-" K X,Y,DIR S DIR(0)="E" D ^DIR S DGQUIT=$D(DIRUT)
"RTN","DGRSTBAD",154,0)
 D:'DGQUIT
"RTN","DGRSTBAD",155,0)
 .W @IOF
"RTN","DGRSTBAD",156,0)
 .S X="Report of States Not Recognized by AAC and Inactive Counties"
"RTN","DGRSTBAD",157,0)
 .W ?(IOM\2-($L(X)\2)),X
"RTN","DGRSTBAD",158,0)
 .S X=DGRPTYP(DGPTYP)
"RTN","DGRSTBAD",159,0)
 .W !,?(IOM\2-($L(X)\2)),X
"RTN","DGRSTBAD",160,0)
 .S DGPAGE=DGPAGE+1
"RTN","DGRSTBAD",161,0)
 .W ?(IOM-10),"PAGE: "_DGPAGE
"RTN","DGRSTBAD",162,0)
 .W !!,"NAME",?26,"SSN",?38,"FIELD",?68,"STATE/COUNTY"
"RTN","DGRSTBAD",163,0)
 .W !
"RTN","DGRSTBAD",164,0)
 Q DGQUIT
"RTN","DGRSTBAD",165,0)
 ;
"RTN","DGRSTBAD",166,0)
RPT(DGNS,DGRPTYP,DGSTRT,DGEND) ;
"RTN","DGRSTBAD",167,0)
 N DGPAGE,DGQUIT,DGPTYP
"RTN","DGRSTBAD",168,0)
 S DGPAGE=0
"RTN","DGRSTBAD",169,0)
 S DGQUIT=0
"RTN","DGRSTBAD",170,0)
 S DGPTYP=0
"RTN","DGRSTBAD",171,0)
 F DGPTYP=DGSTRT:1:DGEND Q:DGQUIT  D RPTG
"RTN","DGRSTBAD",172,0)
 Q
"RTN","DGRSTBAD",173,0)
RPTG ;
"RTN","DGRSTBAD",174,0)
 N DGNAME,CNT
"RTN","DGRSTBAD",175,0)
 S CNT=0
"RTN","DGRSTBAD",176,0)
 S DGQUIT=$$HDR(.DGRPTYP,DGPTYP,.DGPAGE)
"RTN","DGRSTBAD",177,0)
 Q:DGQUIT
"RTN","DGRSTBAD",178,0)
 S DGNAME=""
"RTN","DGRSTBAD",179,0)
 F  S DGNAME=$O(^TMP($J,DGNS,DGPTYP,DGNAME)) Q:'$L(DGNAME)  Q:DGQUIT  D RDGSSN
"RTN","DGRSTBAD",180,0)
 W !!,"Total records reported: ",CNT
"RTN","DGRSTBAD",181,0)
 Q
"RTN","DGRSTBAD",182,0)
RDGSSN ;
"RTN","DGRSTBAD",183,0)
 N DGSSN
"RTN","DGRSTBAD",184,0)
 S DGSSN=""
"RTN","DGRSTBAD",185,0)
 F  S DGSSN=$O(^TMP($J,DGNS,DGPTYP,DGNAME,DGSSN)) Q:'$L(DGSSN)  Q:DGQUIT  D RDGIENS
"RTN","DGRSTBAD",186,0)
 Q
"RTN","DGRSTBAD",187,0)
RDGIENS ;
"RTN","DGRSTBAD",188,0)
 N DGIENS
"RTN","DGRSTBAD",189,0)
 S DGIENS=""
"RTN","DGRSTBAD",190,0)
 F  S DGIENS=$O(^TMP($J,DGNS,DGPTYP,DGNAME,DGSSN,DGIENS)) Q:DGIENS=""  Q:DGQUIT  D RDGTXT
"RTN","DGRSTBAD",191,0)
 Q
"RTN","DGRSTBAD",192,0)
RDGTXT ;
"RTN","DGRSTBAD",193,0)
 N DGTEXT
"RTN","DGRSTBAD",194,0)
 S DGTXT=""
"RTN","DGRSTBAD",195,0)
 F  S DGTXT=$O(^TMP($J,DGNS,DGPTYP,DGNAME,DGSSN,DGIENS,DGTXT)) Q:'$L(DGTXT)  D  Q:DGQUIT
"RTN","DGRSTBAD",196,0)
 . I $Y>(IOSL-4) S DGQUIT=$$HDR(.DGRPTYP,DGPTYP,.DGPAGE) Q:DGQUIT
"RTN","DGRSTBAD",197,0)
 . S DGTEXT=$G(^TMP($J,DGNS,DGPTYP,DGNAME,DGSSN,DGIENS,DGTXT))
"RTN","DGRSTBAD",198,0)
 . W !,$E(DGNAME,1,25),?26,DGSSN,?38,DGTXT,?68,$E($P(DGTEXT,U,1),1,12)
"RTN","DGRSTBAD",199,0)
 . S CNT=CNT+1
"RTN","DGRSTBAD",200,0)
 . Q
"RTN","DGRSTBAD",201,0)
 Q
"RTN","DGRSTBAD",202,0)
 ;
"RTN","DGRSTBAD",203,0)
XMY(DGSARR,DGRPTYP) ;
"RTN","DGRSTBAD",204,0)
 N DGTXT,XMDUZ,XMSUB,XMY,XMTEXT,MSG,DGLINE,X
"RTN","DGRSTBAD",205,0)
 S XMY(DUZ)="",XMTEXT="MSG(",XMDUZ=.5
"RTN","DGRSTBAD",206,0)
 S XMSUB="Invalid State/Inactive County Report Summary"
"RTN","DGRSTBAD",207,0)
 S MSG(1)="The following counts have been found in the PATIENT file:"
"RTN","DGRSTBAD",208,0)
 S MSG(5)=""
"RTN","DGRSTBAD",209,0)
 S DGPTYP=0
"RTN","DGRSTBAD",210,0)
 S DGLINE=10
"RTN","DGRSTBAD",211,0)
 I DGRPTYP'=2,'$D(DGSARR(1)) D
"RTN","DGRSTBAD",212,0)
 . S DGLINE=DGLINE+1
"RTN","DGRSTBAD",213,0)
 . S MSG(DGLINE)=DGRPTYP(1)
"RTN","DGRSTBAD",214,0)
 . S DGLINE=DGLINE+1
"RTN","DGRSTBAD",215,0)
 . S MSG(DGLINE)="   No Invalid States or Inactive Counties Found"
"RTN","DGRSTBAD",216,0)
 . Q
"RTN","DGRSTBAD",217,0)
 I DGRPTYP'=1,'$D(DGSARR(2)) D
"RTN","DGRSTBAD",218,0)
 . S DGLINE=DGLINE+1
"RTN","DGRSTBAD",219,0)
 . S MSG(DGLINE)=DGRPTYP(2)
"RTN","DGRSTBAD",220,0)
 . S DGLINE=DGLINE+1
"RTN","DGRSTBAD",221,0)
 . S MSG(DGLINE)="   No Invalid States or Inactive Counties Found"
"RTN","DGRSTBAD",222,0)
 . Q
"RTN","DGRSTBAD",223,0)
 F  S DGPTYP=$O(DGSARR(DGPTYP)) Q:'DGPTYP  D
"RTN","DGRSTBAD",224,0)
 . S DGLINE=DGLINE+1
"RTN","DGRSTBAD",225,0)
 . S MSG(DGLINE)=""
"RTN","DGRSTBAD",226,0)
 . S DGLINE=DGLINE+1
"RTN","DGRSTBAD",227,0)
 . S MSG(DGLINE)=DGRPTYP(DGPTYP)
"RTN","DGRSTBAD",228,0)
 . S DGLINE=DGLINE+1
"RTN","DGRSTBAD",229,0)
 . S MSG(DGLINE)=""
"RTN","DGRSTBAD",230,0)
 . S DGTXT=""
"RTN","DGRSTBAD",231,0)
 . F  S DGTXT=$O(DGSARR(DGPTYP,DGTXT)) Q:'$L(DGTXT)  D
"RTN","DGRSTBAD",232,0)
 .. S DGLINE=DGLINE+1
"RTN","DGRSTBAD",233,0)
 .. S X="",$P(X," ",32-$L(DGTXT))=""
"RTN","DGRSTBAD",234,0)
 .. S MSG(DGLINE)="   "_DGTXT_X_DGSARR(DGPTYP,DGTXT)
"RTN","DGRSTBAD",235,0)
 .. Q
"RTN","DGRSTBAD",236,0)
 . Q
"RTN","DGRSTBAD",237,0)
 D ^XMD
"RTN","DGRSTBAD",238,0)
 Q
"RTN","DGRSTBAD",239,0)
 ;
"RTN","DGRSTBAD",240,0)
FILE2(DGFARR,TAG) ;
"RTN","DGRSTBAD",241,0)
 N I,X,DGFILED,DGFLDNO
"RTN","DGRSTBAD",242,0)
 F I=1:1 S X=$P($T(@TAG+I),";;",2) Q:X="END"  D
"RTN","DGRSTBAD",243,0)
 .S DGFILED=$P(X,";"),DGFLDNO=$P(X,";",2),DGFARR(0,DGFILED,DGFLDNO)=$P(X,";",3) S:'$D(DGFARR(1,DGFILED)) DGFARR(1,DGFILED)=""
"RTN","DGRSTBAD",244,0)
 .S DGFARR(1,DGFILED)=DGFARR(1,DGFILED)_$E(";",$L(DGFARR(1,DGFILED))>0)_DGFLDNO
"RTN","DGRSTBAD",245,0)
 Q
"RTN","DGRSTBAD",246,0)
 ;
"RTN","DGRSTBAD",247,0)
FOTXT ;
"RTN","DGRSTBAD",248,0)
 ;;2;.115;Permanent Address - State
"RTN","DGRSTBAD",249,0)
 ;;2;.1215;Temporary Address - State
"RTN","DGRSTBAD",250,0)
 ;;2;.1415;Confidential Address - State
"RTN","DGRSTBAD",251,0)
 ;;END
"RTN","DGRSTBAD",252,0)
 ;
"RTN","DGRSTBAD",253,0)
FATXT ;
"RTN","DGRSTBAD",254,0)
 ;;2;.093;Place of Birth
"RTN","DGRSTBAD",255,0)
 ;;2;.115;Permanent Address - State
"RTN","DGRSTBAD",256,0)
 ;;2;.117;Permanent Address - County
"RTN","DGRSTBAD",257,0)
 ;;2;.1215;Temporary Address - State
"RTN","DGRSTBAD",258,0)
 ;;2;.12111;Temporary Address - County
"RTN","DGRSTBAD",259,0)
 ;;2;.1415;Confidential Address - State
"RTN","DGRSTBAD",260,0)
 ;;2;.14111;Confidential Address - County
"RTN","DGRSTBAD",261,0)
 ;;2;.1654;Ineligible TWX
"RTN","DGRSTBAD",262,0)
 ;;2;.1659;Missing   Person TWX
"RTN","DGRSTBAD",263,0)
 ;;2;.217;Next of Kin
"RTN","DGRSTBAD",264,0)
 ;;2;.2197;Next of Kin 2
"RTN","DGRSTBAD",265,0)
 ;;2;.256;Spouse's Employer
"RTN","DGRSTBAD",266,0)
 ;;2;.2917;VA Guardian
"RTN","DGRSTBAD",267,0)
 ;;2;.2927;Civil Guardian
"RTN","DGRSTBAD",268,0)
 ;;2;.3117;Employer
"RTN","DGRSTBAD",269,0)
 ;;2;.3317;Emergency Contact 2
"RTN","DGRSTBAD",270,0)
 ;;2;.337;Emergency Contact
"RTN","DGRSTBAD",271,0)
 ;;2;.347;Designee
"RTN","DGRSTBAD",272,0)
 ;;2;2.06;Insurance Type - Emp Claims
"RTN","DGRSTBAD",273,0)
 ;;2;3.09;Insurance Type - Insured's
"RTN","DGRSTBAD",274,0)
 ;;2;13;Insurance Type - Agent's
"RTN","DGRSTBAD",275,0)
 ;;2;35;Attorney
"RTN","DGRSTBAD",276,0)
 ;;END
"RTN","DGRSTBAD",277,0)
 ;
"RTN","DGRSTBAD",278,0)
ISACT(DFN) ;
"RTN","DGRSTBAD",279,0)
 N X,DGACT,HLQ
"RTN","DGRSTBAD",280,0)
 S HLQ=""""""
"RTN","DGRSTBAD",281,0)
 S DGACT=$P($G(^DPT(DFN,.35)),U) ; date of death
"RTN","DGRSTBAD",282,0)
 I DGACT Q "N"
"RTN","DGRSTBAD",283,0)
 S DGACT=$$LTD^IVMUFNC(DFN) ; active appointment
"RTN","DGRSTBAD",284,0)
 S:'DGACT DGACT=$$PHARM^IVMLDEM6(DFN) ; active RX
"RTN","DGRSTBAD",285,0)
 Q $S(DGACT:"Y",1:"N")
"RTN","DGRSTBAD",286,0)
 ;
"RTN","DGRSTBAD",287,0)
FOREIGN(STATE) ;uses state to determine foreign address
"RTN","DGRSTBAD",288,0)
 ;someday should use country codes in the patient file
"RTN","DGRSTBAD",289,0)
 N DESC,X
"RTN","DGRSTBAD",290,0)
 I $G(STATE)="" Q "N"
"RTN","DGRSTBAD",291,0)
 S X=$G(^DIC(5,STATE,0))
"RTN","DGRSTBAD",292,0)
 I $P(X,"^",6)=1 Q "N"
"RTN","DGRSTBAD",293,0)
 Q "Y"
"VER")
8.0^22.0
"BLD",6090,6)
^626
**END**
**END**

$TXT Created by CARROLL,RICHARD at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Wednesday, 08/23/06 at 16:58
=============================================================================
Run Date: FEB 06, 2007                     Designation: PSJ*5*183
Package : PSJ - INPATIENT MEDICATIONS         Priority: EMERGENCY
Version : 5       SEQ #162                      Status: Released
                  Compliance Date: FEB 08, 2007
=============================================================================

Associated patches: (v)PSJ*5*111   <<= must be installed BEFORE `PSJ*5*183'

Subject: INCORRECTLY SETTING A 24 HOUR STOP TIME

Category: 
  - Routine

Description:
============

 PSI 06-082
 This patch addresses the issue of an inpatient's medication's stop time 
 being inadvertently set to 24 hours.
  
 A user erroneously changed the location of an inpatient while ordering a 
 unit dose medication in CPRS.  The clinic location chosen had the default 
 "number of days until stop" set to one day as defined in Clinic Definition 
 [PSJ CD].  When the pharmacist finished the order, the incorrect clinic stop 
 date of 24 hours, was used instead of the default stop date for an inpatient 
 medication order.  As a result, the order was discontinued based on the clinic
 stop time and the patient did not receive his/her medication as prescribed.  
 The inpatient meds logic in VistA assumed the order was an IMO (Inpatient 
 Medications for Outpatients) order because of the clinic location.  The logic 
 was updated to recognize the correct stop date for a unit dose order.
  
 Associated Remedy Tickets:
 ==========================
 HD 142359 - Incorrectly setting 24hr stop time
  
 Associated NSR:
 ===============
 N/A
  
 Participating Test Sites:
 =========================
 CHEYENNE, WY
 MADISON, WI
 PUGET SOUND HCS
 SALT LAKE CITY, UT
  
 Remedy Overview:
 ================
 HD142359
  
 Problem:
 --------
 Using CPRS, if an inpatient location is changed while ordering a unit dose 
 medication and that new location is an outpatient location with a default 
 "number of days until stop" on orders, the medication is assigned the clinic 
 defined stop time rather than the inpatient medication order's stop time.
  
 Resolution:
 -----------
 This issue is resolved by checking if an inpatient has both an outpatient 
 location and an appointment associated with the medication before changing 
 the stop date for the medication.
  
 Technical:
 ==========
 When an inpatient has an outpatient location, the default stop time for 
 the ordered medication gets assigned from the outpatient location.
 The fix for this is to change the IMO logic in PSGNE3. Currently, it only 
 checks for an outpatient location before executing the IMO logic. An 
 additional check for an appointment date and time is implemented. 
 Both a location and an appointment date/time are needed before the IMO 
 logic gets executed.  Therefore, IMO logic should not be executed for an
 inpatient who is erroneously assigned an outpatient location.
  
 Install Instructions:
 =====================
   
   Installation will take less than 1 minute.
   
   Suggested time to install: non-peak requirement hours.  IF A USER IS ON
   THE SYSTEM AND USING THESE PROGRAMS AN EDITED ERROR WILL OCCUR.  The
   patch should be installed when NO Inpatient Pharmacy users are on the
   system.
   
   1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
     
   2. From the Kernel Installation & Distribution System menu, select
      the Installation menu.
   
   3. From this menu, you may select to use the following options
      (when prompted for INSTALL NAME, enter PSJ*5.0*183):
          a.  Verify Checksums in Transport Global - This option will allow
              you to ensure the integrity of the routines that are in the
              transport global.
          b.  Print Transport Global - This option will allow you to view
              the components of the KIDS build.
          c.  Compare Transport Global to Current System - This option will
              allow you to view all changes that will be made when this 
              patch is installed.  It compares all components of this patch
              (routines, DD's, templates, etc.).
          d.  Backup a Transport Global - This option will create a backup
              message of any routines exported with this patch. It will not
              backup any other changes such as DD's or templates.
    
   4. Use the Install Package(s) option and select the package PSJ*5.0*183.
    
   5. When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//"
      respond NO.
    
   6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//" respond NO. 
   
  
 Install Example:
 ================
  
 Select Installation Option: INStall Package(s)
 Select INSTALL NAME: PSJ*5.0*183 Loaded from Distribution 8/21/06@11:49:33
      => PSJ*5*183
  
 This Distribution was loaded on Aug 21, 2006@11:49:33 with header of 
    PSJ*5*183
    It consisted of the following Install(s):
     PSJ*5.0*183
 Checking Install for Package PSJ*5.0*183
  
 Install Questions for PSJ*5.0*183
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   TCP
                                   
 PSJ*5.0*183                                   
 Install Started for PSJ*5.0*183 : 
                Aug 21, 2006@12:44:13
  
 Build Distribution Date: Aug 16, 2006
  
  Installing Routines:
                Aug 21, 2006@12:44:13
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSJ*5.0*183 Installed. 
                Aug 21, 2006@12:44:13
  
  Install Message sent #448745
 --------------------------------------------------------------------------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
  
 Install Completed
  
  
 Routine Summary:
 ================
 The following is a list of the routines included in this patch.
 The second line of each of these routines now looks like this:
  
   ;;5.0; INPATIENT MEDICATIONS ;**[PATCH LIST]**;16 DEC 97
  
         CHECK^XTSUMBLD results
  
 Routine Name    Before Patch    After Patch     Patch List
 ============    ============    ===========     ==========
 PSGNE3          14268988        14549202  4,26,47,50,63,69,105,80,111,183
 
 
 
 
 
 

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSGNE3
    Before: B29480677  After: B30386162  **4,26,47,50,63,69,105,80,111,183**

=============================================================================
User Information:
Entered By  : CARROLL,RICHARD               Date Entered  : JUL 10, 2006
Completed By: GOLDSMITH,JAMES H             Date Completed: FEB 01, 2007
Released By : CONNOLLY,BARBARA              Date Released : FEB 06, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released GMRV*4*7 SEQ #7
Extracted from mail message
**KIDS**:GMRV*4.0*7^

**INSTALL NAME**
GMRV*4.0*7
"BLD",1452,0)
GMRV*4.0*7^GEN. MED. REC. - VITALS^0^2990218^y
"BLD",1452,1,0)
^^1^1^2990208^
"BLD",1452,1,1,0)
Vitals/Measurements patch GMRV*4.0*7
"BLD",1452,4,0)
^9.64PA^120.51^1
"BLD",1452,4,120.51,0)
120.51
"BLD",1452,4,120.51,222)
y^y^f^^n^^y^o^n
"BLD",1452,4,"B",120.51,120.51)

"BLD",1452,"ABPKG")
n
"BLD",1452,"INIT")

"BLD",1452,"KRN",0)
^9.67PA^19^18
"BLD",1452,"KRN",.4,0)
.4
"BLD",1452,"KRN",.401,0)
.401
"BLD",1452,"KRN",.402,0)
.402
"BLD",1452,"KRN",.403,0)
.403
"BLD",1452,"KRN",.5,0)
.5
"BLD",1452,"KRN",.84,0)
.84
"BLD",1452,"KRN",3.6,0)
3.6
"BLD",1452,"KRN",3.8,0)
3.8
"BLD",1452,"KRN",9.2,0)
9.2
"BLD",1452,"KRN",9.2,"NM",0)
^9.68A^1^1
"BLD",1452,"KRN",9.2,"NM",1,0)
GMRV-PAIN RATE HELP^^0
"BLD",1452,"KRN",9.2,"NM","B","GMRV-PAIN RATE HELP",1)

"BLD",1452,"KRN",9.8,0)
9.8
"BLD",1452,"KRN",9.8,"NM",0)
^9.68A^29^29
"BLD",1452,"KRN",9.8,"NM",1,0)
GMRV2ENV^^0^B533524
"BLD",1452,"KRN",9.8,"NM",2,0)
GMRVALL1^^0^B3531832
"BLD",1452,"KRN",9.8,"NM",3,0)
GMRVDS0^^0^B16707592
"BLD",1452,"KRN",9.8,"NM",4,0)
GMRVDS1^^0^B14998029
"BLD",1452,"KRN",9.8,"NM",5,0)
GMRVED0^^0^B23288596
"BLD",1452,"KRN",9.8,"NM",6,0)
GMRVED1^^0^B26484560
"BLD",1452,"KRN",9.8,"NM",7,0)
GMRVED2^^0^B21733511
"BLD",1452,"KRN",9.8,"NM",8,0)
GMRVED3^^0^B17979306
"BLD",1452,"KRN",9.8,"NM",9,0)
GMRVED4^^0^B25414817
"BLD",1452,"KRN",9.8,"NM",10,0)
GMRVED6^^0^B10030540
"BLD",1452,"KRN",9.8,"NM",11,0)
GMRVEE0^^0^B29132178
"BLD",1452,"KRN",9.8,"NM",12,0)
GMRVEE2^^0^B26327897
"BLD",1452,"KRN",9.8,"NM",13,0)
GMRVER0^^0^B7143880
"BLD",1452,"KRN",9.8,"NM",14,0)
GMRVER1^^0^B25699729
"BLD",1452,"KRN",9.8,"NM",15,0)
GMRVGR0^^0^B14916806
"BLD",1452,"KRN",9.8,"NM",16,0)
GMRVHG0^^0^B14385631
"BLD",1452,"KRN",9.8,"NM",17,0)
GMRVHG1^^0^B13380359
"BLD",1452,"KRN",9.8,"NM",18,0)
GMRVHG4^^0^B17291547
"BLD",1452,"KRN",9.8,"NM",19,0)
GMRVHPN0^^0^B10604903
"BLD",1452,"KRN",9.8,"NM",20,0)
GMRVHPN1^^0^B4393857
"BLD",1452,"KRN",9.8,"NM",21,0)
GMRVHPN2^^0^B2551912
"BLD",1452,"KRN",9.8,"NM",22,0)
GMRVLGQU^^0^B5308882
"BLD",1452,"KRN",9.8,"NM",23,0)
GMRVSC0^^0^B23370365
"BLD",1452,"KRN",9.8,"NM",24,0)
GMRVSC1^^0^B9241892
"BLD",1452,"KRN",9.8,"NM",25,0)
GMRVSC2^^0^B14562833
"BLD",1452,"KRN",9.8,"NM",26,0)
GMRVSR0^^0^B32065785
"BLD",1452,"KRN",9.8,"NM",27,0)
GMRVSR1^^0^B25307909
"BLD",1452,"KRN",9.8,"NM",28,0)
GMRVUT1^^0^B20097491
"BLD",1452,"KRN",9.8,"NM",29,0)
GMRVUTL1^^0^B5143262
"BLD",1452,"KRN",9.8,"NM","B","GMRV2ENV",1)

"BLD",1452,"KRN",9.8,"NM","B","GMRVALL1",2)

"BLD",1452,"KRN",9.8,"NM","B","GMRVDS0",3)

"BLD",1452,"KRN",9.8,"NM","B","GMRVDS1",4)

"BLD",1452,"KRN",9.8,"NM","B","GMRVED0",5)

"BLD",1452,"KRN",9.8,"NM","B","GMRVED1",6)

"BLD",1452,"KRN",9.8,"NM","B","GMRVED2",7)

"BLD",1452,"KRN",9.8,"NM","B","GMRVED3",8)

"BLD",1452,"KRN",9.8,"NM","B","GMRVED4",9)

"BLD",1452,"KRN",9.8,"NM","B","GMRVED6",10)

"BLD",1452,"KRN",9.8,"NM","B","GMRVEE0",11)

"BLD",1452,"KRN",9.8,"NM","B","GMRVEE2",12)

"BLD",1452,"KRN",9.8,"NM","B","GMRVER0",13)

"BLD",1452,"KRN",9.8,"NM","B","GMRVER1",14)

"BLD",1452,"KRN",9.8,"NM","B","GMRVGR0",15)

"BLD",1452,"KRN",9.8,"NM","B","GMRVHG0",16)

"BLD",1452,"KRN",9.8,"NM","B","GMRVHG1",17)

"BLD",1452,"KRN",9.8,"NM","B","GMRVHG4",18)

"BLD",1452,"KRN",9.8,"NM","B","GMRVHPN0",19)

"BLD",1452,"KRN",9.8,"NM","B","GMRVHPN1",20)

"BLD",1452,"KRN",9.8,"NM","B","GMRVHPN2",21)

"BLD",1452,"KRN",9.8,"NM","B","GMRVLGQU",22)

"BLD",1452,"KRN",9.8,"NM","B","GMRVSC0",23)

"BLD",1452,"KRN",9.8,"NM","B","GMRVSC1",24)

"BLD",1452,"KRN",9.8,"NM","B","GMRVSC2",25)

"BLD",1452,"KRN",9.8,"NM","B","GMRVSR0",26)

"BLD",1452,"KRN",9.8,"NM","B","GMRVSR1",27)

"BLD",1452,"KRN",9.8,"NM","B","GMRVUT1",28)

"BLD",1452,"KRN",9.8,"NM","B","GMRVUTL1",29)

"BLD",1452,"KRN",19,0)
19
"BLD",1452,"KRN",19,"NM",0)
^9.68A^2^2
"BLD",1452,"KRN",19,"NM",1,0)
GMRV PAIN^^0
"BLD",1452,"KRN",19,"NM",2,0)
GMRV V/M ENTRY MENU^^2
"BLD",1452,"KRN",19,"NM","B","GMRV PAIN",1)

"BLD",1452,"KRN",19,"NM","B","GMRV V/M ENTRY MENU",2)

"BLD",1452,"KRN",19.1,0)
19.1
"BLD",1452,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",1452,"KRN",101,0)
101
"BLD",1452,"KRN",409.61,0)
409.61
"BLD",1452,"KRN",771,0)
771
"BLD",1452,"KRN",869.2,0)
869.2
"BLD",1452,"KRN",870,0)
870
"BLD",1452,"KRN",8994,0)
8994
"BLD",1452,"KRN","B",.4,.4)

"BLD",1452,"KRN","B",.401,.401)

"BLD",1452,"KRN","B",.402,.402)

"BLD",1452,"KRN","B",.403,.403)

"BLD",1452,"KRN","B",.5,.5)

"BLD",1452,"KRN","B",.84,.84)

"BLD",1452,"KRN","B",3.6,3.6)

"BLD",1452,"KRN","B",3.8,3.8)

"BLD",1452,"KRN","B",9.2,9.2)

"BLD",1452,"KRN","B",9.8,9.8)

"BLD",1452,"KRN","B",19,19)

"BLD",1452,"KRN","B",19.1,19.1)

"BLD",1452,"KRN","B",101,101)

"BLD",1452,"KRN","B",409.61,409.61)

"BLD",1452,"KRN","B",771,771)

"BLD",1452,"KRN","B",869.2,869.2)

"BLD",1452,"KRN","B",870,870)

"BLD",1452,"KRN","B",8994,8994)

"BLD",1452,"PRE")
GMRV2ENV
"BLD",1452,"QUES",0)
^9.62^^
"BLD",1452,"REQB",0)
^9.611^4^4
"BLD",1452,"REQB",1,0)
GMRV*4.0*1^0
"BLD",1452,"REQB",2,0)
GMRV*4.0*3^0
"BLD",1452,"REQB",3,0)
GMRV*4.0*5^0
"BLD",1452,"REQB",4,0)
GMRV*4.0*6^0
"BLD",1452,"REQB","B","GMRV*4.0*1",1)

"BLD",1452,"REQB","B","GMRV*4.0*3",2)

"BLD",1452,"REQB","B","GMRV*4.0*5",3)

"BLD",1452,"REQB","B","GMRV*4.0*6",4)

"DATA",120.51,1,0)
BLOOD PRESSURE^BP^0^1^1^GMRV-BLOOD PRESSURE RATE HELP^BP
"DATA",120.51,1,1)
I '("UNAVIALABLEPASSREFUSED"[$$UP^XLFSTR(X)) K:X'?2.3N1"/"2.3N1"/"2.3N&(X'?2.3N1"/"2.3N) X I $D(X),X>0 K:$P(X,"/",1)>300!($P(X,"/",2)>300)!(+$P(X,"/",3)>300) X
"DATA",120.51,2,0)
TEMPERATURE^T^1^1^0^GMRV-TEMPERATURE RATE HELP^TMP
"DATA",120.51,2,1)
K:(+X'=X!(X>120)!(X<0)!(X?.E1"."3N.N))&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) X I $D(X),X>0 S:X<45 X=$J(+X*(9/5)+32,0,1)
"DATA",120.51,3,0)
RESPIRATION^R^0^1^0^GMRV-RESPIRATION RATE HELP^RS
"DATA",120.51,3,1)
K:(+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N))&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) X
"DATA",120.51,5,0)
PULSE^P^1^1^0^GMRV-PULSE RATE HELP^PU
"DATA",120.51,5,1)
K:(+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N))&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) X
"DATA",120.51,8,0)
HEIGHT^HT^0^1^0^GMRV-HEIGHT RATE HELP^HT
"DATA",120.51,8,1)
D EN3^GMRVUT0 K:X=0!(X>100)!(X<1) X
"DATA",120.51,9,0)
WEIGHT^WT^0^1^0^GMRV-WEIGHT RATE HELP^WT
"DATA",120.51,9,1)
I '("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) S GMR=$E($P(X,+X,2)) S X=$S(GMR="":0,"Kk"[GMR:+$J(2.2*(+X),0,2),"Ll"[GMR:+X,1:0) K:X>1500!(X=0)!(X<0) X K GMR
"DATA",120.51,10,0)
ABDOMINAL GIRTH^AG^0^1^0^^AG
"DATA",120.51,10,1)
K:'$$VALID^GMRVPCE3("AG",X) X
"DATA",120.51,11,0)
AUDIOMETRY^AUD^0^1^0^^AUD
"DATA",120.51,11,1)
K:'$$VALID^GMRVPCE3("AUD",X) X
"DATA",120.51,12,0)
FUNDAL HEIGHT^FH^0^1^0^^FH
"DATA",120.51,12,1)
K:'$$VALID^GMRVPCE3("FH",X) X
"DATA",120.51,13,0)
FETAL HEART TONES^FT^0^1^0^^FT
"DATA",120.51,13,1)
K:'$$VALID^GMRVPCE3("FT",X) X
"DATA",120.51,14,0)
HEAD CIRCUMFERENCE^HC^0^1^0^^HC
"DATA",120.51,14,1)
K:'$$VALID^GMRVPCE3("HC",X) X
"DATA",120.51,15,0)
HEARING^HE^0^1^0^^HE
"DATA",120.51,15,1)
K:'$$VALID^GMRVPCE3("HE",X) X
"DATA",120.51,16,0)
TONOMETRY^TON^0^1^0^^TON
"DATA",120.51,16,1)
K:'$$VALID^GMRVPCE3("TON",X) X
"DATA",120.51,17,0)
VISION CORRECTED^VC^0^1^0^^VC
"DATA",120.51,17,1)
K:'$$VALID^GMRVPCE3("VC",X) X
"DATA",120.51,18,0)
VISION UNCORRECTED^VU^0^1^0^^VU
"DATA",120.51,18,1)
K:'$$VALID^GMRVPCE3("VU",X) X
"DATA",120.51,19,0)
CENTRAL VENOUS PRESSURE^CVP^^1^^GMRV-CVP RATE HELP
"DATA",120.51,19,1)
D CVP^GMRVUT3
"DATA",120.51,20,0)
CIRCUMFERENCE/GIRTH^CG^^1^^GMRV-CIRCUM/GIRTH RATE HELP
"DATA",120.51,20,1)
D GIRTH^GMRVUT3
"DATA",120.51,21,0)
PULSE OXIMETRY^PO2^^1^^GMRV-PO2 RATE HELP
"DATA",120.51,21,1)
K:(X<0!(X>100))!(X=0&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X))) X
"DATA",120.51,22,0)
PAIN^PN^^1^^GMRV-PAIN RATE HELP
"DATA",120.51,22,1)
I '("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) K:(+X'=X!(X>10&(X'=99))!(X<0)) X
"FIA",120.51)
GMRV VITAL TYPE
"FIA",120.51,0)
^GMRD(120.51,
"FIA",120.51,0,0)
120.51I
"FIA",120.51,0,1)
y^y^f^^n^^y^o^n
"FIA",120.51,0,10)

"FIA",120.51,0,11)

"FIA",120.51,0,"RLRO")

"FIA",120.51,0,"VR")
4.0^GMRV
"FIA",120.51,120.51)
0
"KRN",9.2,994,-1)
0^1
"KRN",9.2,994,0)
GMRV-PAIN RATE HELP^Pain^2990204.10121^
"KRN",9.2,994,1,0)
^^7^7^2990210^^
"KRN",9.2,994,1,1,0)
Enter a numeric value using the following pain scale codes:
"KRN",9.2,994,1,2,0)
 
"KRN",9.2,994,1,3,0)
99=patient unable to respond/communicate pain level.
"KRN",9.2,994,1,4,0)
 0=patient verbalizes no pain.
"KRN",9.2,994,1,5,0)
1 to 10= patient verbalizes having pain. Enter the patient's stated pain
"KRN",9.2,994,1,6,0)
level using a scale of 1(slightly uncomfortable/minimal pain) throught
"KRN",9.2,994,1,7,0)
10(worst imaginable pain). For example: 99 or 5.
"KRN",19,2970,-1)
2^2
"KRN",19,2970,0)
GMRV V/M ENTRY MENU^Vitals/Measurement Data Entry^^M^363^^^^^^^44^^1^1
"KRN",19,2970,10,0)
^19.01PI^14^14
"KRN",19,2970,10,14,0)
10518^14^14
"KRN",19,2970,10,14,"^")
GMRV PAIN
"KRN",19,2970,"U")
VITALS/MEASUREMENT DATA ENTRY
"KRN",19,10518,-1)
0^1
"KRN",19,10518,0)
GMRV PAIN^Pain^^A^^^^^^^^GEN. MED. REC. - VITALS^^1^1
"KRN",19,10518,1,0)
^^1^1^2990206^^^
"KRN",19,10518,1,1,0)
This option allows users to document a patient's pain.
"KRN",19,10518,15)
D EXITACT^GMRVED4
"KRN",19,10518,20)
D ENTACT^GMRVED4 I $D(GMRVDBA) S GMRENTY=18 D EN2^GMRVED0
"KRN",19,10518,"U")
PAIN
"ORD",1,9.2)
9.2;1;;;HELP^XPDTA1;HLPF1^XPDIA1;HLPE1^XPDIA1;HLPF2^XPDIA1;;HLPDEL^XPDIA1
"ORD",1,9.2,0)
HELP FRAME
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",44,-1)
1^1
"PKG",44,0)
GEN. MED. REC. - VITALS^GMRV^Vitals/Measurements Module of General Medical Record.
"PKG",44,20,0)
^9.402P^^
"PKG",44,22,0)
^9.49I^1^1
"PKG",44,22,1,0)
4.0^2970425^2970702^64
"PKG",44,22,1,"PAH",1,0)
7^2990218^4558
"PKG",44,22,1,"PAH",1,1,0)
^^1^1^2990218
"PKG",44,22,1,"PAH",1,1,1,0)
Vitals/Measurements patch GMRV*4.0*7
"PRE")
GMRV2ENV
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
29
"RTN","GMRV2ENV")
0^1^B533524
"RTN","GMRV2ENV",1,0)
GMRV2ENV ;HIRMFO/FT-Environment check for GMRV*4*1 ;6/5/97 13:13
"RTN","GMRV2ENV",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRV2ENV",3,0)
EN1 ; check if v4.0 installed
"RTN","GMRV2ENV",4,0)
 I +$$VERSION^XPDUTL("GMRV")'>3 S XPDABORT=1 D BMES^XPDUTL("GEN. MED. REC. - VITALS v4.0 must be installed first.")
"RTN","GMRV2ENV",5,0)
 Q
"RTN","GMRVALL1")
0^2^B3531832
"RTN","GMRVALL1",1,0)
GMRVALL1 ;HIRMFO/YH-ENTER/EDIT V/M AND OTHER MEASUREMENTS ;2/6/99
"RTN","GMRVALL1",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVALL1",3,0)
LISTOP ;
"RTN","GMRVALL1",4,0)
 W !,"Select the combination of Vitals/Measurements you want to enter.",! F I=1:1:9 S X=$T(QUES+I) Q:X=""  S GMRW=$P(X,";;",2),GNNX(+GMRW)=$E(GMRW,4,99),GNNX=+GMRW W !,$P(GMRW,"^")
"RTN","GMRVALL1",5,0)
 Q
"RTN","GMRVALL1",6,0)
QUES ;
"RTN","GMRVALL1",7,0)
 ;;1  T^T
"RTN","GMRVALL1",8,0)
 ;;2  P^P
"RTN","GMRVALL1",9,0)
 ;;3  R^R
"RTN","GMRVALL1",10,0)
 ;;4  B/P^BP
"RTN","GMRVALL1",11,0)
 ;;5  Wt^WT
"RTN","GMRVALL1",12,0)
 ;;6  Ht^HT
"RTN","GMRVALL1",13,0)
 ;;7  Circumference/Girth^CG
"RTN","GMRVALL1",14,0)
 ;;8  Pulse Oximetry^PO2
"RTN","GMRVALL1",15,0)
 ;;9  Pain^PN
"RTN","GMRVALL1",16,0)
VALIDAT ;
"RTN","GMRVALL1",17,0)
 S GMROUT(1)=0 F GNURX(1)=1:1 S GNURX(2)=$P(GNI,",",GNURX(1)) Q:GNURX(2)=""  D VAL1
"RTN","GMRVALL1",18,0)
 Q
"RTN","GMRVALL1",19,0)
VAL1 ;
"RTN","GMRVALL1",20,0)
 I GNURX(2)["-" D VAL2 Q
"RTN","GMRVALL1",21,0)
 S:'$D(GNNX(+GNURX(2))) GMROUT(1)=1 Q:GMROUT(1)  S GSEL(GNURX(2))="" Q
"RTN","GMRVALL1",22,0)
VAL2 ;
"RTN","GMRVALL1",23,0)
 S GNURX(3)=$P(GNURX(2),"-") I GNURX(3)<1!(GNURX(3)>GNNX)!'$D(GNNX(+GNURX(3))) S GMROUT(1)=1 Q
"RTN","GMRVALL1",24,0)
 S GNURX(4)=$P(GNURX(2),"-",2) S:'$D(GNNX(+GNURX(4))) GMROUT(1)=1 Q:GMROUT(1)  F GNURX(5)=GNURX(3):1:GNURX(4) S:'$D(GNNX(GNURX(5))) GMROUT(1)=1 Q:GMROUT(1)  S GSEL(GNURX(5))=""
"RTN","GMRVALL1",25,0)
 Q 
"RTN","GMRVDS0")
0^3^B16707592
"RTN","GMRVDS0",1,0)
GMRVDS0 ;HIRMFO/YH-DISPLAY LATEST VITALS/MEASUREMENTS ;2/3/99
"RTN","GMRVDS0",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVDS0",3,0)
EN2 ;ENTRY TO DISPLAY THE LATEST VITALS/MEASUREMENTS IF DFN IS UNKNOWN
"RTN","GMRVDS0",4,0)
 S DIC(0)="AEM",DIC="^DPT(" D ^DIC K DIC Q:+Y'>0  S DFN=+Y
"RTN","GMRVDS0",5,0)
EN3 ; ENTRY TO DISPLAY THE LATEST VITALS/MEASUREMENTS IF DFN IS KNOWN
"RTN","GMRVDS0",6,0)
 Q:'$D(DFN)
"RTN","GMRVDS0",7,0)
 S GMREDB="P" D PAT^GMRVDS1 D Q
"RTN","GMRVDS0",8,0)
 Q
"RTN","GMRVDS0",9,0)
EN1 ; ENTRY TO DISPLAY VITALS
"RTN","GMRVDS0",10,0)
 F GMRX=1:1:$L(GMRSTR,";") S X=$P(GMRSTR,";",GMRX) Q:'$D(^GMRD(120.51,"C",X))  S GMR(X)=$O(^GMRD(120.51,"C",X,"")),Y=$P($G(^GMRD(120.51,GMR(X),0)),"^") Q:Y=""
"RTN","GMRVDS0",11,0)
 K GMRDT,GMRVWT,GMRVHT S X="" F  S X=$O(GMR(X)) Q:X=""  S GMRDATS="" I GMR(X)'="" F GMRDAT=0:0 S GMRDAT=$O(^GMR(120.5,"AA",DFN,+GMR(X),GMRDAT)) Q:$S(GMRDAT'>0:1,GMRDATS>0:1,1:0)  D SETDATAR
"RTN","GMRVDS0",12,0)
 I '($D(GMRDATA)\10) W !,"There are no results to report " G Q
"RTN","GMRVDS0",13,0)
 F X="T","P","R","PO2","BP","HT","WT","CVP","CG","PN" I $D(GMRDATA(X)) S GMRVDT="",(GMRVDT(1),GMVD)=0 F  S GMVD=$O(GMRDATA(X,GMVD)) Q:GMVD'>0  D WRTDT S GMVD(1)=0 F  S GMVD(1)=$O(GMRDATA(X,GMVD,GMVD(1))) Q:GMVD(1)'>0  D
"RTN","GMRVDS0",14,0)
 . S GMRVX(0)=GMRDATA(X,GMVD,GMVD(1)) S GMRVX=X D EN1^GMRVSAS0
"RTN","GMRVDS0",15,0)
  . W ! W:GMRVDT(1)=0 $S(X="BP":"B/P",X="P":"Pulse",X="R":"Resp.",X="T":"Temp.",X="HT":"Ht.",X="CG":"Circ/Girth",X="WT":"Wt.",X="PO2":"Pulse Ox",X="PN":"Pain",1:X)_": "
"RTN","GMRVDS0",16,0)
 . I GMRVDT(1)=0 W ?12,"("_GMRVDT_") " S GMRVDT(1)=1
"RTN","GMRVDS0",17,0)
 . I X="T" W ?29,GMRVX(0)_" F  ("_$J(+GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMRVDS0",18,0)
 . I X="WT" W ?29,GMRVX(0)_" lb  ("_$J(GMRVX(0)/2.2,0,2)_" kg)" S GMRVWT=GMRVX(0)/2.2
"RTN","GMRVDS0",19,0)
 . I X="HT" W ?29,$S(GMRVX(0)\12:GMRVX(0)\12_" ft ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" in",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" cm)" S GMRVHT=(GMRVX(0)*2.54)/100
"RTN","GMRVDS0",20,0)
 . I X="CG" W ?29,GMRVX(0)_" in ("_$J(+GMRVX(0)/.3937,0,2)_" cm)"
"RTN","GMRVDS0",21,0)
 . I X="CVP" W ?29,GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMRVDS0",22,0)
 . I X="PO2" W ?29,GMRVX(0)_"% "
"RTN","GMRVDS0",23,0)
 . I X="P"!(X="R")!(X="BP") W ?29,GMRVX(0)
"RTN","GMRVDS0",24,0)
 . I X="PN" D
"RTN","GMRVDS0",25,0)
 . . I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRVX(0)) W ?9,GMRVX(0) Q
"RTN","GMRVDS0",26,0)
 . . I GMRVX(0)=0 W ?29,"No pain " Q
"RTN","GMRVDS0",27,0)
 . . I GMRVX(0)=99 W ?29,"Unable to respond " Q
"RTN","GMRVDS0",28,0)
 . . I GMRVX(0)=10 W ?29,GMRVX(0)_" - Worst imaginable pain " Q
"RTN","GMRVDS0",29,0)
 . . W ?29,GMRVX(0) Q
"RTN","GMRVDS0",30,0)
 . W $S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*") K GMRVX
"RTN","GMRVDS0",31,0)
 . D CHAR
"RTN","GMRVDS0",32,0)
 . I X="WT",$G(GMRVWT)>0,$G(GMRVHT)>0 W !,"BMI: " S GMRVHT(1)=$J(GMRVWT/(GMRVHT*GMRVHT),0,0) W ?29,GMRVHT(1)_$S(GMRVHT(1)>27:"*",1:"")
"RTN","GMRVDS0",33,0)
 . Q
"RTN","GMRVDS0",34,0)
Q W ! K GMRVWT,GMRVHT,GMR,GMVD,GBP,GMRVARY,GMRVDA,GMRDATA,GMVDM,GLIN,GMRZZ Q:$D(GLOC)
"RTN","GMRVDS0",35,0)
 K GMRVDT,GMROUT,DFN,%Y,GMRL,GMRDT,DIC,GMRDAT,GMRDATS,GMRSTR,GMRX,GMRVX,POP D KVAR^VADPT K VA
"RTN","GMRVDS0",36,0)
 Q
"RTN","GMRVDS0",37,0)
SETDATAR ;
"RTN","GMRVDS0",38,0)
 S Y=0 F  S Y=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT,Y)) Q:Y'>0!GMRDATS  I '$D(^GMR(120.5,Y,2)),$P(^GMR(120.5,Y,0),"^",8)'="" D SETNODE
"RTN","GMRVDS0",39,0)
 D:X="BP"!(X="P") SETBP^GMRVDS2 Q
"RTN","GMRVDS0",40,0)
SETNODE ;
"RTN","GMRVDS0",41,0)
 S GMRL=$S($D(^GMR(120.5,Y,0)):^(0),1:"")
"RTN","GMRVDS0",42,0)
 N G S G=$P(GMRL,"^",8) Q:'(G>0!(G<0)!($E(G)="0"))
"RTN","GMRVDS0",43,0)
 S GMRL1=$P(GMRL,"^") ;adding trailing zeros to time if necessary
"RTN","GMRVDS0",44,0)
 S $P(GMRL1,".",2)=$P(GMRL1,".",2)_"0000"
"RTN","GMRVDS0",45,0)
 S $P(GMRL1,".",2)=$E($P(GMRL1,".",2),1,4)
"RTN","GMRVDS0",46,0)
 S $P(GMRL,"^")=GMRL1
"RTN","GMRVDS0",47,0)
 K GMRL1
"RTN","GMRVDS0",48,0)
 I GMRL'="" S GMRDATA(X,$P(GMRL,"^"),Y)=$P(GMRL,"^",8),GMRDATS=1 I $P($G(^GMR(120.5,Y,5,0)),"^",4)>0 D CHAR^GMRVCHAR(Y,.GMRVARY,GMR(X))
"RTN","GMRVDS0",49,0)
 Q
"RTN","GMRVDS0",50,0)
WRTDT ;
"RTN","GMRVDS0",51,0)
 S GMRVDT=$E(GMVD,4,5)_"/"_$E(GMVD,6,7)_"/"_$E(GMVD,2,3)_"@"_$E($P(GMVD,".",2),1,2)_$S($E($P(GMVD,".",2),3,4)'="":":"_$E($P(GMVD,".",2),3,4),1:"")
"RTN","GMRVDS0",52,0)
 Q
"RTN","GMRVDS0",53,0)
CHAR ;
"RTN","GMRVDS0",54,0)
 S GMRZZ=$$WRITECH^GMRVCHAR(GMVD(1),.GMRVARY,5) S:GMRZZ'=""&(X'="PO2") GMRZZ="("_GMRZZ_")"
"RTN","GMRVDS0",55,0)
 I X="PO2",$P(^GMR(120.5,GMVD(1),0),"^",10)'="" W "with supplemental O2 "_$P($P(^(0),"^",10)," l/min")_"L/min"_$P($P(^(0),"^",10)," l/min",2)_" " W:GMRZZ'="" !,?29,"- ",GMRZZ K GMRZZ Q
"RTN","GMRVDS0",56,0)
 W:GMRZZ'="" GMRZZ K GMRZZ
"RTN","GMRVDS0",57,0)
 Q
"RTN","GMRVDS1")
0^4^B14998029
"RTN","GMRVDS1",1,0)
GMRVDS1 ;HIRMFO/YH-CURRENT VITAL SIGNS BY LOCATION ;2/3/99
"RTN","GMRVDS1",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVDS1",3,0)
EN1 ; ENTRY FROM OPTION GMRV V/M BY LOCATION
"RTN","GMRVDS1",4,0)
 S GMROUT=0,GMREDB="A" D WARDSEL^GMRVED0 G:GMROUT Q1
"RTN","GMRVDS1",5,0)
PAT ;ENTRY POINT FOR REPORT BY PATIENT
"RTN","GMRVDS1",6,0)
DEV S %ZIS="Q" D ^%ZIS G:POP Q1 I $E(IOST)="P",'$D(IO("Q")),'$D(IO("S")) D ^%ZISC W !,?3,$C(7),"PRINTED REPORTS MUST QUEUED" G DEV
"RTN","GMRVDS1",7,0)
 I $D(IO("Q")) S ZTIO=ION,ZTRTN="EN2^GMRVDS1",(ZTSAVE("DFN"),ZTSAVE("GMRWARD("),ZTSAVE("GMROUT"),ZTSAVE("GMREDB"),ZTSAVE("GMRVHLOC"))="",ZTDESC="Latest Vital/Measurements Report" D ^%ZTLOAD K ZTSK,IO("Q"),ZTIO Q
"RTN","GMRVDS1",8,0)
EN2 ;ENTRY TO REPORT FROM TASKMAN
"RTN","GMRVDS1",9,0)
 K ^TMP($J) S GMROUT=0
"RTN","GMRVDS1",10,0)
 I $G(GMREDB)="P" D
"RTN","GMRVDS1",11,0)
 . D DEM^VADPT,INP^VADPT S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK"),GMRNAM=$S(VADM(1)'="":VADM(1),1:"  BLANK"),GMRWARD=$P(VAIN(4),"^"),GMRWARD(1)=$P(VAIN(4),"^",2) D KVAR^VADPT K VA
"RTN","GMRVDS1",12,0)
 . S ^TMP($J,GMRRMBD,GMRNAM,DFN)=""
"RTN","GMRVDS1",13,0)
 E  D EN1^GMRVED2
"RTN","GMRVDS1",14,0)
AE D NOW^%DTC S Y=% X ^DD("DD") S $P(GMRDSH,"-",81)="",GMRPDT=$P(Y,"@")_" ("_$P($P(Y,"@",2),":",1,2)_")",GMRPG=0,GMR1ST=1,GMRSTR="T;P;R;BP;WT;HT;CVP;CG;PO2;PN",GLOC=1
"RTN","GMRVDS1",15,0)
 U IO I $O(^TMP($J,""))="" D HDR W !,"THERE IS NO DATA FOR THIS REPORT" G Q1
"RTN","GMRVDS1",16,0)
 S GMRRMBD="" F  S GMRRMBD=$O(^TMP($J,GMRRMBD)) Q:GMRRMBD=""!GMROUT  S GMRNAM="" F  S GMRNAM=$O(^TMP($J,GMRRMBD,GMRNAM)) Q:GMRNAM=""!GMROUT  F DFN=0:0 S DFN=$O(^TMP($J,GMRRMBD,GMRNAM,DFN)) Q:DFN'>0  D PRT Q:GMROUT
"RTN","GMRVDS1",17,0)
Q1 I $D(GMROUT),$E(IOST)'="P",'GMROUT R !,"Press return to continue ",X:DTIME W @IOF
"RTN","GMRVDS1",18,0)
 S:$D(ZTQUEUED) ZTREQ="@" K ^TMP($J),DFN,GMR1ST,GMRADM,GMRDA,GMRDSH,GMREDB,GMRNAM,GMRNAME,GMRNM,GMROUT,GMRPDT,GMRPG,GMRRMBD,GMRPR,GMRVDT,GMRVTDA,GMRWARD,GMRX,GMRSITE,GMRSP,GMRVX,GMRVHLOC,POP,GMRDT,%T,GDT D KVAR^VADPT K VA W:$E(IOST)'="C" @IOF
"RTN","GMRVDS1",19,0)
 K GSTRIN,GMRSTR,GMROUT,GMRVOERR,GMRVSTOP,GMRVSTRT,GLOC,GDATA D ^%ZISC,Q^GMRVDS0 Q
"RTN","GMRVDS1",20,0)
HDR ;
"RTN","GMRVDS1",21,0)
 I $E(IOST)'="P",'GMR1ST W !!,"Press return to continue or ""^"" to quit " R X:DTIME I X=U!'$T S GMROUT=1 Q
"RTN","GMRVDS1",22,0)
 W:'($E(IOST)'="C"&'GMRPG) @IOF S GMR1ST=0,GMRPG=GMRPG+1
"RTN","GMRVDS1",23,0)
 I GMREDB="A" W !,GMRPDT,?20,"VITALS REPORT FOR UNIT: "_GMRWARD(1) W:GMRVHLOC>0 " - "_$$GET1^DIQ(4,+$$GET1^DIQ(44,+GMRVHLOC,3,"I"),.01,"I")
"RTN","GMRVDS1",24,0)
 I GMREDB="P" W !,GMRPDT,?28,"LATEST VITALS REPORT"
"RTN","GMRVDS1",25,0)
 W ?72,"PAGE ",GMRPG,!,GMRDSH,!
"RTN","GMRVDS1",26,0)
 Q
"RTN","GMRVDS1",27,0)
PRT ;
"RTN","GMRVDS1",28,0)
 D:IOSL<($Y+6)!($E(IOST)'="P")!(GMRPG=0) HDR Q:GMROUT
"RTN","GMRVDS1",29,0)
 D DEM^VADPT K GMRDT
"RTN","GMRVDS1",30,0)
 W !,$S(GMRRMBD'="  BLANK":$E(GMRRMBD,1,10),1:""),?12,$E(GMRNAM,1,20),?34,$P(VADM(2),U,2),!
"RTN","GMRVDS1",31,0)
 D EN1^GMRVDS0 D Q2 Q
"RTN","GMRVDS1",32,0)
EN3 ; ENTRY TO PRINT VITALS FOR LOCATION GROUP
"RTN","GMRVDS1",33,0)
 ; INPUT : ^TMP($J,ROOM-BED,PATIENT NAME,DFN)=""
"RTN","GMRVDS1",34,0)
 ;                            ARRAY OF PATIENTS TO BE PRINTED WHERE
"RTN","GMRVDS1",35,0)
 ;                               ROOM-BED: PATIENT ROOM-BED
"RTN","GMRVDS1",36,0)
 ;                               PATIENT NAME: PATIENT NAME
"RTN","GMRVDS1",37,0)
 ;                               DFN: POINTER ^DPT
"RTN","GMRVDS1",38,0)
 ;                  GMRVWLO=NAME OF LOCATION GROUP
"RTN","GMRVDS1",39,0)
 Q:'$D(GMRVWLO)  S GMREDB="A"
"RTN","GMRVDS1",40,0)
 S GMROUT=0,GMRWARD(1)=GMRVWLO D AE
"RTN","GMRVDS1",41,0)
 K GMRVWLO
"RTN","GMRVDS1",42,0)
 Q
"RTN","GMRVDS1",43,0)
WRT I $D(GLOC)&(IOSL<($Y+6)) D WRT2
"RTN","GMRVDS1",44,0)
 W !,?GMRSP,$P(GMRL,"^",2) D:GSITE'=0!(GQUAL'=0) PRTSITE Q
"RTN","GMRVDS1",45,0)
WRT2 D HDR^GMRVDS1 W !,$S(GMRRMBD'="  BLANK":$E(GMRRMBD,1,10),1:""),?12,$E(GMRNAM,1,20),?34,$P(VADM(2),U,2)_" (cont.)" Q
"RTN","GMRVDS1",46,0)
PRTSITE W " ("_$S($D(^GMRD(120.52,GSITE,0)):$P(^(0),"^"),1:"")_$S(GSITE>0&(GQUAL>0):"/",1:"")_$S($D(^GMRD(120.53,GQUAL,0)):$P(^(0),"^"),1:"")_")" Q
"RTN","GMRVDS1",47,0)
Q2 ;
"RTN","GMRVDS1",48,0)
 K GMRLIN,GMRJ,GBP,GMR,GMRL,GMRDT,GMRDAT,GMRDATS,GMRI,GMRX,GMRY,GMRVX,GSITE,GQUAL Q
"RTN","GMRVED0")
0^5^B23288596
"RTN","GMRVED0",1,0)
GMRVED0 ;HIRMFO/RM,YH-VITAL SIGNS EDIT SHORT FORM ;2/4/99
"RTN","GMRVED0",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVED0",3,0)
EN2 ; DETERMINE VITALS SITE
"RTN","GMRVED0",4,0)
 Q:GMRENTY<1!(GMRENTY>21)  K GMRTMP S GMROUT=0,GMRVIDT(0)=0 I $D(GMRVDBA) S GMRVIDT=$P(GMRVDBA,U,2),GMROUT=$P(GMRVDBA,U)
"RTN","GMRVED0",5,0)
 I '($D(GMRVIDT)#2) S GMRVIDT(0)=1 D DATE^GMRVED0 I GMROUT K GMROUT Q
"RTN","GMRVED0",6,0)
 S GMROUT=0,GMRVWLOC=1,GDT(1)=GMRVIDT D WARDPAT G:GMROUT Q
"RTN","GMRVED0",7,0)
A2 ;
"RTN","GMRVED0",8,0)
 I $G(GMRSTR)="" D
"RTN","GMRVED0",9,0)
 . S GMRSTR=$S(GMRENTY=1:"T;P;R;",GMRENTY=2:"T;P;R;BP;",GMRENTY=3:"T;P;R;BP;HT;WT;",GMRENTY=4:"T;P;R;BP;WT;",GMRENTY=5:"T;P;R;BP;",GMRENTY=6:"BP;P;",GMRENTY=7:"P;",GMRENTY=8:"WT;",GMRENTY=19:"CG;",GMRENTY=20:"PO2;",GMRENTY=21:"CVP;",1:"")
"RTN","GMRVED0",10,0)
 I GMRENTY=18 S GMRSTR="PN"
"RTN","GMRVED0",11,0)
 Q:GMRSTR=""
"RTN","GMRVED0",12,0)
A3 ;
"RTN","GMRVED0",13,0)
 I "P1p"[GMREDB S GDT=GMRVIDT D EN1^GMRVADM G:GMROUT Q S GMRDT0=GMRVIDT D EN2^GMRVED3 G:GMROUT!(GMREDB="P1") Q D MULTIVM W !! S GMRVIDT=GDT(1) D PATDAT G Q:GMROUT,A3
"RTN","GMRVED0",14,0)
 I "Aa"[GMREDB D EN1^GMRVED2,EN2^GMRVED2 G Q
"RTN","GMRVED0",15,0)
 I "Ss"[GMREDB D EN3^GMRVED6,EN1^GMRVED2,EN2^GMRVED2 G Q
"RTN","GMRVED0",16,0)
 Q
"RTN","GMRVED0",17,0)
EN3 ; CALL IF DFN TO EDIT SINGLE PATIENT VITALS WHERE
"RTN","GMRVED0",18,0)
 ; INPUT : DFN= PT FILE PTR.
"RTN","GMRVED0",19,0)
 ;                  GMRSTR=STRING OF VITALS TO EDIT
"RTN","GMRVED0",20,0)
 ;                  where T=Temp, P=Pulse, R=Resp, B=BP,H=Ht., W=Wt.
"RTN","GMRVED0",21,0)
 ;                  GMRVHLOC=HOSP. LOCATION (PTR TO FILE 44)
"RTN","GMRVED0",22,0)
 ;                  GMRVIDT=DATE/TIME VITALS TAKEN
"RTN","GMRVED0",23,0)
 ; OUPTUT : GMRVIEN(GMRVTY)=120.5 ENTRY^GMRVREAD^GMRVSITE
"RTN","GMRVED0",24,0)
 ;                   where GMRVTY is the vital type see codes above
"RTN","GMRVED0",25,0)
 ;                   GMRVREAD = READING FOR THIS VITAL TYPE
"RTN","GMRVED0",26,0)
 ;                   GMRVSITE = PTR TO GMR VITALS SITE FILE
"RTN","GMRVED0",27,0)
 ;                   GMROUT WILL BE 1 IF ABNORMAL EXIT, ELSE 0
"RTN","GMRVED0",28,0)
 Q:'$D(DFN)!'$D(GMRSTR)!'$D(GMRVIDT)
"RTN","GMRVED0",29,0)
 S GMROUT=0,GMRTMP=1 I GMROUT S GMROUT=$S(GMROUT=2:0,1:1) G Q3
"RTN","GMRVED0",30,0)
 S GMREDB="P1" D A3
"RTN","GMRVED0",31,0)
 Q:$D(GNUROP)
"RTN","GMRVED0",32,0)
Q3 D Q1 K GMREDB,GMRENTY,GMRTMP Q
"RTN","GMRVED0",33,0)
DATE ; CALL TO SET GMRVIDT (WHEN THE VITALS WERE TAKEN)
"RTN","GMRVED0",34,0)
 ; ALSO RETURNS GMROUT=1 IF TIMEOUT OR UPARROW OUT.
"RTN","GMRVED0",35,0)
 S X=U,%DT("A")="ENTER DATE (TIME Required) VITALS WERE TAKEN: ",%DT="XAPETR" D ^%DT K %DT
"RTN","GMRVED0",36,0)
 I Y<0!(X=U) S GMROUT=$S(X=U:1,1:2) Q
"RTN","GMRVED0",37,0)
 D NOW^%DTC I Y>% W !,?3,$C(7),"Cannot enter future dates" G DATE
"RTN","GMRVED0",38,0)
 S GMRVIDT=Y K POP
"RTN","GMRVED0",39,0)
 Q
"RTN","GMRVED0",40,0)
Q ;
"RTN","GMRVED0",41,0)
 G:$D(GMRTMP) Q1
"RTN","GMRVED0",42,0)
 K GMRVIDT
"RTN","GMRVED0",43,0)
 K ^TMP($J),DFN,GMREDB,GMRENTY,GMROUT,GMRSTR,GMRVHLOC
"RTN","GMRVED0",44,0)
Q1 ;
"RTN","GMRVED0",45,0)
 K %,%T,%DT,%H,DA,DIE,DIC,DQ,DR,GMRDAT,GMRDATE,GMRHELP,GMRI,GMRINPTR,GMRLEN,GMRMSL,GMRNAM,GMRPRMT,GMRRET,GMRRMBD,GMRRMST,GMRROOM,GMRS,GMRSCR,GMRSITE,GMRTO,GMRTY,GMRVIT,GMRVITY,GMRVWLOC,GMRWARD,GMRX,GMRVX,GMRY,POP,GDT,GENTR,GMROK,GMRTMP
"RTN","GMRVED0",46,0)
 D KVAR^VADPT K VA,DIPGM,GMROV,GMRP,GMRTYPE,GMRQUAL,GCT,GDA,GDATA,GLAST,GTYPE,GMRDT0
"RTN","GMRVED0",47,0)
 Q
"RTN","GMRVED0",48,0)
WARDPAT ; SELECT EDIT BY 1. UNIT, 2. SELECTED ROOMS ON UNIT, 3. PATIENT
"RTN","GMRVED0",49,0)
 W !,"Vitals by (A)ll patients on a unit, (S)elected Rooms on unit, or (P)atient? " R GMREDB:DTIME S:'$T GMREDB=U I U[GMREDB S GMROUT=1 Q
"RTN","GMRVED0",50,0)
 I "Aa"[GMREDB!("Ss"[GMREDB)!("P1p"[GMREDB) G WP1
"RTN","GMRVED0",51,0)
 I GMREDB?1"?".E S XQH="GMRV WARD/PAT SEL" D EN^XQH K XQH G WARDPAT
"RTN","GMRVED0",52,0)
 W !,$C(7),?5,"INVALID ENTRY ??" G WARDPAT
"RTN","GMRVED0",53,0)
WP1 ;
"RTN","GMRVED0",54,0)
 I "Aa"[GMREDB!("Ss"[GMREDB) D WARDSEL Q:GMROUT  Q:"Ss"'[GMREDB!("Ss"[GMREDB&$D(^DG(405.4,"W",GMRWARD)))  S XQH="GMRV NO ROOM" D EN^XQH K XQH G WARDPAT
"RTN","GMRVED0",55,0)
 D PATDAT
"RTN","GMRVED0",56,0)
 Q
"RTN","GMRVED0",57,0)
WARDSEL ; SELECT SEARCH WARD
"RTN","GMRVED0",58,0)
 S DIC="^DIC(42,",DIC(0)="AEQMZ",DIC("S")="I '$$INACT42^GMRVUT2(+Y)"
"RTN","GMRVED0",59,0)
 D ^DIC K DIC I X=U!(+Y'>0) S GMROUT=1 Q
"RTN","GMRVED0",60,0)
 S GMRWARD=+Y,GMRWARD(1)=$P(Y(0),U),DFN=$O(^DPT("CN",GMRWARD(1),0))
"RTN","GMRVED0",61,0)
 I DFN="" W !,*7,"**** NO PATIENTS REGISTERED ON UNIT ",$P(^DIC(42,GMRWARD,0),U)," ****" S GMROUT=1 Q
"RTN","GMRVED0",62,0)
 S GMRVHLOC=$S($D(^DIC(42,GMRWARD,44)):$P(^(44),U),1:"")
"RTN","GMRVED0",63,0)
 Q
"RTN","GMRVED0",64,0)
PATDAT ;
"RTN","GMRVED0",65,0)
 S DIC(0)="AEQMZ",DIC="^DPT(" D ^DIC K DIC S DFN=+Y
"RTN","GMRVED0",66,0)
 I DFN'>0 S GMROUT=1 Q
"RTN","GMRVED0",67,0)
 D INP^VADPT S GMRWARD(1)=$P(VAIN(4),U,2),GMRWARD=$P(VAIN(4),U) D KVAR^VADPT K VA
"RTN","GMRVED0",68,0)
 I ('$D(GMRWARD)!(GMRWARD'>0)),"P1p"[GMREDB,$D(GMRVIDT) S GENTR=2,GDT=GMRVIDT D ADM^GMRVADM Q:GMROUT  S:GMRWARD=0 GMROUT=1 Q:GMROUT
"RTN","GMRVED0",69,0)
 Q:'GMRVWLOC
"RTN","GMRVED0",70,0)
 S DIC("A")="Select Hospital Location: ",DIC("B")=$S('$D(^DIC(42,+GMRWARD,44)):"",$D(^SC(+$P(^DIC(42,+GMRWARD,44),U),0)):$P(^(0),U),1:""),DIC=44,DIC(0)="AEMQ",DIC("S")="I $P(^(0),U,3)'=""Z""" D ^DIC K DIC
"RTN","GMRVED0",71,0)
 I +Y'>0 W !,"Hospital location is required",! S GMROUT=1 Q
"RTN","GMRVED0",72,0)
 S GMRVHLOC=+Y Q
"RTN","GMRVED0",73,0)
MULTIVM Q:GMROUT  W !!,"Do you want to enter other V/M data for this patient" S %=2 D YN^DICN W:%=0 !!,"Select YES if you want to enter another V/M record at a different",!,"date/time for the same patient.",! G:%=0 MULTIVM Q:%'=1
"RTN","GMRVED0",74,0)
 D DATE I 'GMROUT S GMRDT0=GMRVIDT D EN2^GMRVED3 G MULTIVM
"RTN","GMRVED0",75,0)
 S GMROUT=0 Q
"RTN","GMRVED1")
0^6^B26484560
"RTN","GMRVED1",1,0)
GMRVED1 ;HIRMFO/RM,YH-VITAL SIGNS EDIT SHORT FORM (cont.) ;2/7/99
"RTN","GMRVED1",2,0)
 ;;4.0;Vitals/Measurements;**1,6,7**;Apr 25, 1997
"RTN","GMRVED1",3,0)
EN2 ; ENTRY FROM GMRVED0 TO ENTER THE DATA FOR A PATIENT DEFINED BY DFN
"RTN","GMRVED1",4,0)
 D DSPOV^GMRVED4 I GMRSTR(0)=";" W:GMRENTY<5 !,$C(7) Q
"RTN","GMRVED1",5,0)
CHANGE S (GMRHELP,GMRPRMT,GMRHELP(1),GREASON)="" F GMRX=2:1:$L(GMRSTR(0),";")-1 D SETPRMT^GMRVED2
"RTN","GMRVED1",6,0)
 S GMRPRMT=GMRPRMT_": ",GMRSTAR=0
"RTN","GMRVED1",7,0)
ASK ;
"RTN","GMRVED1",8,0)
 Q:GMROUT  S GLINE=0 W:$L(GMRSTR,";")>2 !,"To omit entering a vital/measurement reading:",!,"Enter 'N' or 'n' for the value when NOT documenting a reason for omission." S GLINE=$G(GLINE)+1 D CHECK^GMRVUT1
"RTN","GMRVED1",9,0)
 W !,"Enter an * for the specific value when documenting the reason for omission.",! S GLINE=GLINE+1 D CHECK^GMRVUT1
"RTN","GMRVED1",10,0)
 W "Enter a single * to document that all measurements were omitted and the",!,"reason for omission." S GLINE=GLINE+2 D CHECK^GMRVUT1 W !!,GMRPRMT  S GLINE=GLINE+1 R GMRDAT:DTIME
"RTN","GMRVED1",11,0)
 S:'$T GMRTO=1 I GMRDAT="^"!'$T S GMROUT=1 Q
"RTN","GMRVED1",12,0)
 I GMRDAT="" W !!,$C(7),"NO DATA ENTERED",! S GMROUT=1 Q
"RTN","GMRVED1",13,0)
 I GMRDAT["*" S GREASON=$$EN2^GMRVED6(GREASON)
"RTN","GMRVED1",14,0)
 Q:GMROUT  I GMRDAT="*" G STAR
"RTN","GMRVED1",15,0)
 I GMRENTY'=21,($E(GMRDAT,1)["-")!(GMRDAT?.E1"--") W !!,$C(7),"ERRONEOUS ENTRY",! G ASK
"RTN","GMRVED1",16,0)
 F GMRX=2:1:$L(GMRSTR(0),";")-1 D CHKSTR Q:GMROUT
"RTN","GMRVED1",17,0)
 I GMROUT S GMROUT=0 G ASK
"RTN","GMRVED1",18,0)
 F GMRX=2:1:$L(GMRSTR(0),";")-1 D CHKDAT Q:GMROUT
"RTN","GMRVED1",19,0)
STAR Q:GMROUT!(+$G(GMROUT(1)))
"RTN","GMRVED1",20,0)
 W ! S GMRDAT(0)=0 F GMRY=2:1:$L(GMRSTR(0),";")-1 S GMRX=$P(GMRSTR(0),";",GMRY) D
"RTN","GMRVED1",21,0)
 . I GMRDAT="*" S GMRDAT(GMRX)=GREASON
"RTN","GMRVED1",22,0)
 . I $D(GMRDAT(GMRX)),GMRDAT(GMRX)'="" S GMRDAT(0)=1 D WOK
"RTN","GMRVED1",23,0)
ASK1 ;
"RTN","GMRVED1",24,0)
 I 'GMRDAT(0) W !,$C(7),"NO DATA ENTERED",! S GMROUT=1 Q
"RTN","GMRVED1",25,0)
 W !,"Is this correct? YES// " R GMRX:DTIME
"RTN","GMRVED1",26,0)
 S:'$T GMRTO=1 I GMRX="^"!'$T S GMROUT=1 W !,$C(7),"DATA DELETED",! Q
"RTN","GMRVED1",27,0)
 I GMRX?1"N".E!(GMRX?1"n".E) K:$D(GMRSITE("BP"))&($D(GMRQUAL("BP"))) GBP(GMRSITE("BP")_"/"_GMRQUAL("BP")) W ! G ASK
"RTN","GMRVED1",28,0)
 I GMRX=""!(GMRX?1"Y".E)!(GMRX?1"y".E) G AR1
"RTN","GMRVED1",29,0)
 W !,"ANSWER YES OR NO",*7 G ASK1
"RTN","GMRVED1",30,0)
AR1 W !
"RTN","GMRVED1",31,0)
 Q
"RTN","GMRVED1",32,0)
CHKSTR ; CHECK THE INPUT STRING TO SEE IF IT IS VALID
"RTN","GMRVED1",33,0)
 S GMRY=$P(GMRSTR(0),";",GMRX)
"RTN","GMRVED1",34,0)
 S GMRY(1)=$S(GMRY="T":1,GMRY="P"!(GMRY="R"):2,GMRY="BP":3,GMRY="HT":4,GMRY="WT":5,GMRY="CG":6,GMRY="CVP":7,GMRY="PO2":8,GMRY="PN":9,1:0) Q:GMRY(1)'>0
"RTN","GMRVED1",35,0)
 I GMRENTY=21,GMRDAT="*" S GMRDAT=GREASON Q
"RTN","GMRVED1",36,0)
 I $P(GMRDAT,"-",GMRX-1)="*" S $P(GMRDAT,"-",GMRX-1)=GREASON Q
"RTN","GMRVED1",37,0)
 I GMRENTY=21,GMRDAT="" Q
"RTN","GMRVED1",38,0)
 I $P(GMRDAT,"-",GMRX-1)="" Q
"RTN","GMRVED1",39,0)
 S GMRSCR=$S(GMRENTY=21:"GMRDAT'?",1:"$P(GMRDAT,""-"",GMRX-1)'?")
"RTN","GMRVED1",40,0)
 I GMRY="PN" D  Q
"RTN","GMRVED1",41,0)
 . S GMRSCR=GMRSCR_"0.2N0.1A!(GMRDAT?1""?"".E)"
"RTN","GMRVED1",42,0)
 . I @GMRSCR D WRT S GMROUT=1
"RTN","GMRVED1",43,0)
 S GMRSCR=GMRSCR_$P("0.3N0.1"".""0.2N0.NA^0.3N0.NA^0.3N0.1""/""0.3N0.1""/""0.3N0.1A^0.3N0.3AP0.3N0.1"".""0.2N0.3AP0.1"";""0.NA^0.3N0.1"".""0.2N1.NA^0.3N0.1"".""0.2N0.1A^0.1""-""0.3N0.1"".""0.1N0.1A^0.3N0.1A","^",GMRY(1))_"!(GMRDAT?1""?"".E)"
"RTN","GMRVED1",44,0)
 I @GMRSCR D WRT S GMROUT=1 Q
"RTN","GMRVED1",45,0)
 Q
"RTN","GMRVED1",46,0)
WRT ;
"RTN","GMRVED1",47,0)
 W @IOF D @GMRHELP(1) W !,$C(7),$S(GMRDAT'?1"?".E:"Invalid data format, t",1:"T")_"he entry should be in the following format:",!,?5,GMRHELP
"RTN","GMRVED1",48,0)
 Q
"RTN","GMRVED1",49,0)
WOK ;
"RTN","GMRVED1",50,0)
 I (GMRX'="CVP"&(GMRX'="PN")&(GMRDAT(GMRX)'>0)) D  Q
"RTN","GMRVED1",51,0)
 . W !,?2,$S(GMRX="BP":"B/P",GMRX="P":"Pulse",GMRX="R":"Resp.",GMRX="T":"Temp.",GMRX="HT":"Ht.",GMRX="CG":"Circumference/Girth",GMRX="WT":"Wt.",GMRX="PO2":"Pulse Ox.",GMRX="PN":"Pain",1:GMRX)_": "_GMRDAT(GMRX) Q
"RTN","GMRVED1",52,0)
 I GMRX="CVP",'(GMRDAT(GMRX)>0!(GMRDAT(GMRX)<0)!($E(GMRDAT(GMRX))="0")) W !,?2,GMRX_": "_GMRDAT(GMRX) Q
"RTN","GMRVED1",53,0)
 S GMRVX=GMRX S GMRVX(0)=$S(GMRX="B"!(GMRX="BP"):$P(GMRDAT(GMRX),"^"),1:+$P(GMRDAT(GMRX),"^")) D EN1^GMRVSAS0
"RTN","GMRVED1",54,0)
 W !,?2,$S(GMRX="BP":"B/P",GMRX="P":"Pulse",GMRX="R":"Resp.",GMRX="T":"Temp.",GMRX="HT":"Ht.",GMRX="CG":"Circumference/Girth",GMRX="WT":"Wt.",GMRX="PO2":"Pulse Ox.",GMRX="PN":"Pain",1:GMRX)_": "
"RTN","GMRVED1",55,0)
 W $S(GMRX="BP"!(GMRX="P")!(GMRX="R"):GMRDAT(GMRX),1:"")
"RTN","GMRVED1",56,0)
 I GMRX="PN" D
"RTN","GMRVED1",57,0)
 . I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRDAT(GMRX)) W GMRDAT(GMRX) Q
"RTN","GMRVED1",58,0)
 . I GMRDAT(GMRX)=0 W GMRDAT(GMRX)_" No pain" Q
"RTN","GMRVED1",59,0)
 . I GMRDAT(GMRX)=99 W GMRDAT(GMRX)_" Unable to respond" Q
"RTN","GMRVED1",60,0)
 . I GMRDAT(GMRX)=10 W GMRDAT(GMRX)_" - Worst imaginable pain" Q
"RTN","GMRVED1",61,0)
 .  W GMRDAT(GMRX) Q
"RTN","GMRVED1",62,0)
 I GMRX="T" W GMRVX(0)_" F  ("_$J(+GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMRVED1",63,0)
 I GMRX="WT" W GMRVX(0)_" LB  ("_$J(GMRVX(0)/2.2,0,2)_" KG)"
"RTN","GMRVED1",64,0)
 I GMRX="HT" W $S(GMRVX(0)\12:GMRVX(0)\12_" FT ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" IN",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" CM)"
"RTN","GMRVED1",65,0)
 I GMRX="CG" W GMRVX(0)_" IN ("_$J(+GMRVX(0)/.3937,0,2)_" CM)"
"RTN","GMRVED1",66,0)
 I GMRX="CVP" W GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMRVED1",67,0)
 I GMRX="PO2" W GMRVX(0)_" %"_$S(GMRO2(GMRX)'="":" with supplemental O2 "_$P(GMRO2(GMRX)," l/min")_"L/min"_$P(GMRO2(GMRX)," l/min",2),1:"")
"RTN","GMRVED1",68,0)
 W $S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*") K GMRVX S GTXT=""
"RTN","GMRVED1",69,0)
 W:$G(GMRSITE(GMRX))'=""&(GMRX="PO2") !,?20," via" W " "_$P($G(GMRSITE(GMRX)),"^")
"RTN","GMRVED1",70,0)
 I $D(GMRINF(GMRX)) S I=0 F  S I=$O(GMRINF(GMRX,I)) Q:I'>0  S I(1)="" F  S I(1)=$O(GMRINF(GMRX,I,I(1))) Q:I(1)=""  W "  "_I(1)
"RTN","GMRVED1",71,0)
 Q
"RTN","GMRVED1",72,0)
CHKDAT ;
"RTN","GMRVED1",73,0)
 D CHKDAT^GMRVED3
"RTN","GMRVED1",74,0)
 Q
"RTN","GMRVED2")
0^7^B21733511
"RTN","GMRVED2",1,0)
GMRVED2 ;HIRMFO/RM,YH-VITAL SIGNS EDIT SHORT FORM ;2/4/99
"RTN","GMRVED2",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVED2",3,0)
EN1 ; SORT PATIENTS ON WARD
"RTN","GMRVED2",4,0)
 K ^TMP($J)
"RTN","GMRVED2",5,0)
WSA1 ; SET ^TMP($J, FOR SORT
"RTN","GMRVED2",6,0)
 D DEM^VADPT,INP^VADPT S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK"),GMRNAM=$S(VADM(1)'="":VADM(1),1:"  BLANK") D KVAR^VADPT K VA
"RTN","GMRVED2",7,0)
 S:$S("Aa"[GMREDB:1,$D(GMRROOM($P(GMRRMBD,"-"))):1,1:0) ^TMP($J,GMRRMBD,GMRNAM,DFN)=""
"RTN","GMRVED2",8,0)
 S DFN=$O(^DPT("CN",GMRWARD(1),DFN))
"RTN","GMRVED2",9,0)
 Q:DFN=""  G WSA1
"RTN","GMRVED2",10,0)
EN2 ; BEGIN EDITING WARD VITALS
"RTN","GMRVED2",11,0)
 I $O(^TMP($J,0))="" S GMROUT=1 Q
"RTN","GMRVED2",12,0)
 W !,"Begin entering patient vitals." S GMRDT0=GMRVIDT
"RTN","GMRVED2",13,0)
 S GMRRMBD="" F GMRI=0:0 S GMRRMBD=$O(^TMP($J,GMRRMBD)) Q:GMRRMBD=""!GMROUT  S GMRNAM="" F GMRI=0:0 S GMRNAM=$O(^TMP($J,GMRRMBD,GMRNAM)) Q:GMRNAM=""!GMROUT  F DFN=0:0 S DFN=$O(^TMP($J,GMRRMBD,GMRNAM,DFN)) Q:DFN'>0  D V1 Q:GMROUT
"RTN","GMRVED2",14,0)
 W !,"Enter return to continue" R X:DTIME Q
"RTN","GMRVED2",15,0)
V1 ;
"RTN","GMRVED2",16,0)
 W !!,$S(GMRNAM'="  BLANK":GMRNAM,1:DFN),?$X+10,$S(GMRRMBD'="  BLANK":GMRRMBD,1:""),"  OK? YES// " R GMRX:DTIME
"RTN","GMRVED2",17,0)
 I GMRX="^"!('$T) S GMROUT=1 Q
"RTN","GMRVED2",18,0)
 S GMRX=$$UP^XLFSTR(GMRX) I ((GMRX="")!($E(GMRX)="Y")) K GMRTO S GDT=GMRVIDT D EN1^GMRVADM G:GMROUT&'$D(GMRTO) V2 D EN2^GMRVED3 G:GMROUT&'$D(GMRTO) V2 Q
"RTN","GMRVED2",19,0)
 G:GMRX?1"N".E V2
"RTN","GMRVED2",20,0)
 W !,"ANSWER YES OR NO" G V1
"RTN","GMRVED2",21,0)
V2 ;
"RTN","GMRVED2",22,0)
 W !!,"Do you wish to stop looping through names? YES//" R GMRX:DTIME
"RTN","GMRVED2",23,0)
 S GMRX=$$UP^XLFSTR(GMRX) I (('$T)!(GMRX="")!($E(GMRX)="Y")!(GMRX="^")) S GMROUT=1 Q
"RTN","GMRVED2",24,0)
 I GMRX?1"N".E S GMROUT=0 Q
"RTN","GMRVED2",25,0)
 W !,"ANSWER YES OR NO" G V2
"RTN","GMRVED2",26,0)
EN4 ; ENTRY FROM GMRVED0 TO ADD THE PATIENT DATA TO THE 120.5 FILE
"RTN","GMRVED2",27,0)
 D NOW^%DTC S GMRDATE=%
"RTN","GMRVED2",28,0)
 F GMRX=2:1:$L(GMRSTR(0),";")-1 S GMRVITY=$P(GMRSTR(0),";",GMRX) D
"RTN","GMRVED2",29,0)
 . S GMRVIT=$S(GMRVITY="T":"TEMPERATURE",GMRVITY="P":"PULSE",GMRVITY="R":"RESPIRATION",GMRVITY="BP":"BLOOD PRESSURE",GMRVITY="HT":"HEIGHT",GMRVITY="CG":"CIRCUMFERENCE/GIRTH",1:"")
"RTN","GMRVED2",30,0)
 . S:GMRVIT="" GMRVIT=$S(GMRVITY="WT":"WEIGHT",GMRVITY="CVP":"CENTRAL VENOUS PRESSURE",GMRVITY="PO2":"PULSE OXIMETRY",GMRVITY="PN":"PAIN",1:"")
"RTN","GMRVED2",31,0)
 . D:$G(GMRDAT(GMRVITY))'=""&(GMRVIT'="") ADDNODE
"RTN","GMRVED2",32,0)
 Q
"RTN","GMRVED2",33,0)
ADDNODE ; ADD DATA TO THE 120.5 FILE
"RTN","GMRVED2",34,0)
 S GMRVIT(1)=$O(^GMRD(120.51,"B",GMRVIT,0)),DA=$P(^GMR(120.5,0),"^",3)
"RTN","GMRVED2",35,0)
B1 S DA=DA+1 L +^GMR(120.5,DA,0):1 I '$T!$D(^GMR(120.5,DA,0)) L -^GMR(120.5,DA,0) G B1
"RTN","GMRVED2",36,0)
 S $P(^GMR(120.5,0),"^",3,4)=DA_"^"_($P(^GMR(120.5,0),"^",4)+1)
"RTN","GMRVED2",37,0)
 S ^GMR(120.5,DA,0)=GMRVIDT_"^"_DFN_"^"_GMRVIT(1)_"^"_GMRDATE_"^"_GMRVHLOC_"^"_DUZ_"^^"_GMRDAT(GMRVITY)_"^^"
"RTN","GMRVED2",38,0)
 S:DFN'=""&(GMRVIT(1)'="")&(GMRVIDT'="") ^GMR(120.5,"AA",DFN,GMRVIT(1),9999999-GMRVIDT,DA)="" S:GMRVIDT'="" ^GMR(120.5,"B",GMRVIDT,DA)="" S:DFN'="" ^GMR(120.5,"C",DFN,DA)="" S:GMRVIT(1)'="" ^GMR(120.5,"T",GMRVIT(1),DA)=""
"RTN","GMRVED2",39,0)
 I $D(GMRSITE(GMRVITY))!$D(GMRINF(GMRVITY)) D
"RTN","GMRVED2",40,0)
 . I '$D(^GMR(120.5,DA,5,0)) S ^GMR(120.5,DA,5,0)="^120.505P^0^0"
"RTN","GMRVED2",41,0)
 . S GMRVLST=+$P(^GMR(120.5,DA,5,0),"^",3)
"RTN","GMRVED2",42,0)
 . I $G(GMRSITE(GMRVITY))'="" S GDATA=+$P(GMRSITE(GMRVITY),"^",2) D:GDATA>0
"RTN","GMRVED2",43,0)
 . . S GMRVLST=GMRVLST+1
"RTN","GMRVED2",44,0)
 . . S ^GMR(120.5,DA,5,GMRVLST,0)=GDATA,^GMR(120.5,DA,5,"B",GDATA,GMRVLST)=""
"RTN","GMRVED2",45,0)
 . . Q
"RTN","GMRVED2",46,0)
 . I $D(GMRINF(GMRVITY)) S I=0 F  S I=$O(GMRINF(GMRVITY,I)) Q:I'>0  S I(1)="" F  S I(1)=$O(GMRINF(GMRVITY,I,I(1))) Q:I(1)=""  S GDATA=+$P(GMRINF(GMRVITY,I,I(1)),"^") D:GDATA>0
"RTN","GMRVED2",47,0)
 . . S GMRVLST=GMRVLST+1
"RTN","GMRVED2",48,0)
 . . S ^GMR(120.5,DA,5,GMRVLST,0)=GDATA,^GMR(120.5,DA,5,"B",GDATA,GMRVLST)=""
"RTN","GMRVED2",49,0)
 . . Q
"RTN","GMRVED2",50,0)
 . S $P(^GMR(120.5,DA,5,0),"^",3)=GMRVLST,$P(^(0),"^",4)=GMRVLST
"RTN","GMRVED2",51,0)
 . Q
"RTN","GMRVED2",52,0)
 S $P(^GMR(120.5,DA,0),"^",10)=$G(GMRO2(GMRVITY))
"RTN","GMRVED2",53,0)
 L -^GMR(120.5,DA,0)
"RTN","GMRVED2",54,0)
 I GMREDB="P1" S GMRVIEN(GMRVITY)=DA_"^"_GMRDAT(GMRVITY)_"^"_$G(GMRSITE(GMRVITY))
"RTN","GMRVED2",55,0)
 S:GMRENTY>4 GLAST=GMRVIDT,GLAST(1)=$G(GLAST(1))+1
"RTN","GMRVED2",56,0)
 Q
"RTN","GMRVED2",57,0)
SETPRMT ; SET VITAL TYPE PATTERN MATCH
"RTN","GMRVED2",58,0)
 S G=$P(GMRSTR(0),";",GMRX)
"RTN","GMRVED2",59,0)
 S GMRHELP=GMRHELP_$S(G="P":"PPP",G="WT":"WWW.WW",G="R":"RR",G="CG":"NNN.NN",G="CVP":"NN",G="PO2":"NNN",G="HT":"HH",G="BP":"BBB/BBB/BBB (or BBB/BBB)",G="T":"TTT.T",G="PN":"NN",1:"")_$S(GMRX'=($L(GMRSTR(0),";")-1):"-",1:"")
"RTN","GMRVED2",60,0)
 S GMRHELP(1)=GMRHELP(1)_$S(GMRHELP(1)'="":",",1:"")_$P(GMRSTR(0),";",GMRX)_"^GMRVUT1"
"RTN","GMRVED2",61,0)
 S GMRPRMT=GMRPRMT_$S(G="T":"Temp",G="P":"Pulse",G="WT":"Wt.",G="R":"Resp",G="HT":"Ht.",G="BP":"BP",G="CG":"Circumference/Girth",G="CVP":"CVP",G="PO2":"PO2",G="PN":"Pain",1:"")_$S(GMRX'=($L(GMRSTR(0),";")-1):"-",1:"")
"RTN","GMRVED2",62,0)
 Q
"RTN","GMRVED3")
0^8^B17979306
"RTN","GMRVED3",1,0)
GMRVED3 ;HIRMFO/YH-VITAL SIGNS EDIT SHORT FORM (cont.) ;2/7/99
"RTN","GMRVED3",2,0)
 ;;4.0;Vitals/Measurements;**1,5,6,7**;Apr 25, 1997
"RTN","GMRVED3",3,0)
EN2 ;VITAL ENTRY FOR A PATIENT
"RTN","GMRVED3",4,0)
 D EN2^GMRVED1 G:GMROUT NEXT D EN4^GMRVED2 S GMROK=0
"RTN","GMRVED3",5,0)
NEXT I '(GMRENTY=5!(GMRENTY=6)!(GMRENTY=9))!GMROUT S GMRVIDT=GMRDT0 Q
"RTN","GMRVED3",6,0)
 I $G(GMROUT(1))=1 S GMROUT(1)=0 S GMRVIDT=GMRDT0 Q
"RTN","GMRVED3",7,0)
 I GMRSTR'["BP" S GMRVIDT=GMRDT0 Q
"RTN","GMRVED3",8,0)
 S:'$D(GPRMT)&($D(GMRPRMT)) GPRMT="("_$P(GMRPRMT,":")_" continued )" S GPRMT(1)=GMRSTR
"RTN","GMRVED3",9,0)
 I '$D(^GMR(120.5,"AA",DFN,1,9999999-GMRVIDT)) S:GMRENTY=5 GMRSTR="T;P;R;BP;" S:GMRENTY=6 GMRSTR="BP;P;" S:GMRENTY=10 GMRSTR="T;P;R;BP;HT;WT;" S GMRVIDT=GMRDT0 S:GMRENTY=9 GMRSTR=GPRMT(1) K GPRMT,GBP Q
"RTN","GMRVED3",10,0)
ASK I '$D(GMRSITE("BP"))&'$D(GMRINF("BP")) S:GMRENTY=9 GMRSTR=GPRMT(1) K GPRMT Q
"RTN","GMRVED3",11,0)
  W !,"Enter another B/P? NO// " R GMRX:DTIME S:'$T GMRTO=1 I '$T!(GMRX="^") S GMROUT=1,GMRVIDT=GMRDT0 S:GMRENTY=9 GMRSTR=GPRMT(1) K GBP,GPRMT Q
"RTN","GMRVED3",12,0)
 I GMRX=""!("Nn"[GMRX) S GMRVIDT=GDT S:GMRENTY=5 GMRSTR="T;P;R;BP;" S:GMRENTY=10 GMRSTR="T;P;R;BP;HT;WT;" S GMRVIDT=GMRDT0 S:GMRENTY=9 GMRSTR=GPRMT(1) K GPRMT Q
"RTN","GMRVED3",13,0)
 I GMRX["Y"!(GMRX["y") S GMRSTR=$S(GMRENTY=5!(GMRENTY=6):"BP;P;",1:"BP;"),GMRVIDT=GMRDT0 W @IOF,GPRMT D DSPOV^GMRVED4 D SETBP S GLAST=GLAST+.00000001,GMRVIDT=GLAST G EN2
"RTN","GMRVED3",14,0)
 W !,"ANSWER YES OR NO, maximum 6 B/Ps ",*7 G ASK
"RTN","GMRVED3",15,0)
SETBP ;
"RTN","GMRVED3",16,0)
 N I S I=0 F  S I=$O(GMROV("BP",I)) Q:I'>0  I $P(GMROV("BP",I),"^",2)'="" S GBP($P(GMROV("BP",I),"^",2))=""
"RTN","GMRVED3",17,0)
 Q
"RTN","GMRVED3",18,0)
CHKDAT ;CHECK V/M ENTRY DATA
"RTN","GMRVED3",19,0)
 S GMRVITY=$P(GMRSTR(0),";",GMRX),GMRVIT=+$O(^GMRD(120.51,"C",GMRVITY,"")),GMRVIT(1)=$S($D(^GMRD(120.51,GMRVIT,0)):$P(^(0),"^"),1:""),GMRO2(GMRVITY)=""
"RTN","GMRVED3",20,0)
 F GMRY=0:0 S GMRY=$O(^GMR(120.5,"AA",DFN,GMRVIT,9999999-GMRVIDT,GMRY)) Q:GMRY'>0  I $S('$D(^GMR(120.5,GMRY,2)):1,$P(^(2),"^"):0,1:1) D
"RTN","GMRVED3",21,0)
 . I GMRENTY=21,"Nn"'[GMRDAT D WDUP S GMRDAT="" Q
"RTN","GMRVED3",22,0)
 . D:"Nn"'[$P(GMRDAT,"-",GMRX-1) WDUP S $P(GMRDAT,"-",GMRX-1)="" Q
"RTN","GMRVED3",23,0)
 S GMRINPTR=$S($D(^GMRD(120.51,GMRVIT,1)):^(1),1:"K:X'?.NP X")
"RTN","GMRVED3",24,0)
INPTR ;
"RTN","GMRVED3",25,0)
 Q:GMROUT  S X=$S(GMRENTY=21:GMRDAT,1:$P(GMRDAT,"-",GMRX-1))
"RTN","GMRVED3",26,0)
 I X="n"!(X="N")!(X="") S (GMRDAT(GMRVITY),GMRSITE(GMRVITY),GMRINF(GMRVITY))="" Q
"RTN","GMRVED3",27,0)
 I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X) S GMRSITE(GMRVITY)="",GMRINF(GMRVITY)="",GMRDAT(GMRVITY)=X Q
"RTN","GMRVED3",28,0)
INPTR1 ;
"RTN","GMRVED3",29,0)
 I GMRVITY="PO2" D O2^GMRVUT3
"RTN","GMRVED3",30,0)
 I GMRVITY="HT" S X=$$UP^XLFSTR(X),GMRSITE=$P(X,",",2),X=$P(X,",") D
"RTN","GMRVED3",31,0)
 .I GMRSITE="" S:X["E" GMRSITE=$E(X,$F(X,"E")-1),X=$P(X,"E") S:X["A" GMRSITE=$E(X,$F(X,"A")-1),X=$P(X,"A")
"RTN","GMRVED3",32,0)
 .S:GMRSITE="" GMRSITE="A"
"RTN","GMRVED3",33,0)
 .D TPSITE^GMRVUT1
"RTN","GMRVED3",34,0)
 .Q
"RTN","GMRVED3",35,0)
 I GMRVITY="PN" S GMRDAT("PN")=+X,GMRSITE("PN")=""
"RTN","GMRVED3",36,0)
 I GMRVITY="WT" S GMRSITE=$P(X,+X,2) G:GMRSITE=""!("LlKk"'[$E(GMRSITE)) A K GMRSITE(GMRVITY),GMRINF(GMRVITY) D WTYPE^GMRVUT1
"RTN","GMRVED3",37,0)
 I GMRVITY="CG" K GMRSITE(GMRVITY),GMRINF(GMRVITY) S GLVL=8 D LISTQ^GMRVQUAL,OTHERQ^GMRVQUAL,CLEAR^GMRVQUAL
"RTN","GMRVED3",38,0)
 I GMRVITY="T"!(GMRVITY="P")!(GMRVITY="BP"&(GMRENTY>4))!(GMRVITY="R")!(GMRVITY="PO2") D SITE I '$D(X) G A
"RTN","GMRVED3",39,0)
 X GMRINPTR I $D(X)#2 S GMRDAT(GMRVITY)=X Q
"RTN","GMRVED3",40,0)
A W !,?5,$C(7),"Invalid ",GMRVIT(1)," entry"
"RTN","GMRVED3",41,0)
A1 W !,GMRVIT(1)_": " R GMRRET:DTIME
"RTN","GMRVED3",42,0)
 S:'$T GMRTO=1 I GMRRET="^"!'$T S GMROUT=1 G INPTR
"RTN","GMRVED3",43,0)
 I GMRRET="N"!(GMRRET="n") S (X,GMRRET)="" Q
"RTN","GMRVED3",44,0)
 I GMRRET'["?" S X=GMRRET G INPTR1
"RTN","GMRVED3",45,0)
 I GMRRET?1"?".E S XQH="GMRV-"_$S(GMRVITY="CG":"CIRCUM/GIRTH",GMRVITY="PO2":"PO2",GMRVITY="CVP":"CVP",1:GMRVIT(1))_" RATE HELP" D EN^XQH K XQH
"RTN","GMRVED3",46,0)
 G A1
"RTN","GMRVED3",47,0)
WDUP ;
"RTN","GMRVED3",48,0)
 W $C(7),!,?4,GMRVIT(1)_" data already exists for this patient on this date/time.",!,?4,"To change this data use the enter a vital/measurement in error option.",!
"RTN","GMRVED3",49,0)
 Q
"RTN","GMRVED3",50,0)
SITE ;
"RTN","GMRVED3",51,0)
 I GMRVITY'="BP" S GMRSITE=$P(X,+X,2),X=+X S GMRSITE=$$UP^XLFSTR(GMRSITE) I GMRVITY="T"!(GMRVITY="P")!(GMRVITY="R") D TPSITE^GMRVUT1 Q
"RTN","GMRVED3",52,0)
 I GMRVITY="BP" S GLVL=8 D LISTQ^GMRVQUAL,OTHERQ^GMRVQUAL,CLEAR^GMRVQUAL Q
"RTN","GMRVED3",53,0)
 Q
"RTN","GMRVED4")
0^9^B25414817
"RTN","GMRVED4",1,0)
GMRVED4 ;HIRMFO/RM,YH-VITAL SIGNS SHORT FORM ;2/4/99
"RTN","GMRVED4",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVED4",3,0)
DSPOV ; DISPLAY OLD VITALS ALREADY ENTERED FOR PATIENT AND SET GMRSTR(0)
"RTN","GMRVED4",4,0)
 ; TO THE SUBSET OF GMRSTR THAT HASN'T BEEN ENTERED.
"RTN","GMRVED4",5,0)
 K GMROV S (GLAST,GLAST(1))=0,GDT=GMRVIDT,GMRSTR(0)=";"_GMRSTR I $E(GMRSTR(0),$L(GMRSTR(0)))'=";" S GMRSTR(0)=GMRSTR(0)_";"
"RTN","GMRVED4",6,0)
 S Y=0 F  S Y=$O(^GMR(120.5,"AA",DFN,Y)) Q:Y'>0  I $D(^GMR(120.5,"AA",DFN,Y,9999999-GDT)) S X=0 F  S X=$O(^GMR(120.5,"AA",DFN,Y,9999999-GDT,X)) Q:X'>0  I $S('$D(^GMR(120.5,X,2)):1,'$P(^(2),"^"):1,1:0) S GCT=0 D STOV
"RTN","GMRVED4",7,0)
 I GMRSTR["BP",'$D(GMROV("BP")) S GTYPE="BP",GCT=0 D MULTIBP S:$D(GMROV(GTYPE)) GMRP=";"_GTYPE_";",GMRSTR(0)=$P(GMRSTR(0),GMRP)_";"_$P(GMRSTR(0),GMRP,2)
"RTN","GMRVED4",8,0)
 I GMRSTR["P",'$D(GMROV("P")),GMRENTY=6 S GTYPE="P",GCT=0,GMRTYPE=$O(^GMRD(120.51,"C",GTYPE,0)) D MULTIBP S:$D(GMROV(GTYPE)) GMRP=";"_GTYPE_";",GMRSTR(0)=$P(GMRSTR(0),GMRP)_";"_$P(GMRSTR(0),GMRP,2)
"RTN","GMRVED4",9,0)
 G:$O(GMROV(""))="" Q
"RTN","GMRVED4",10,0)
 W !!,"The patient has data for this date/time for the following vital/measurements.",!,"To change this data, please use the Entered in Error Module.",!!
"RTN","GMRVED4",11,0)
 F GMRX=1:1:$L(GMRSTR,";") S X=$P(GMRSTR,";",GMRX) Q:X=""  I $D(GMROV(X)) S X(1)=0 F Y=0:0 S X(1)=$O(GMROV(X,X(1))) Q:X(1)'>0  D PROV
"RTN","GMRVED4",12,0)
Q S GMRVIDT=GDT W ! K X Q
"RTN","GMRVED4",13,0)
STOV ; STORE OLD VITALS FOR A PATIENT
"RTN","GMRVED4",14,0)
 S GFLAG=0,GMROV=$S($D(^GMR(120.5,X,0)):^(0),1:""),GMRTYPE=+$P(GMROV,"^",3) I $D(^GMRD(120.51,GMRTYPE,0)) S GTYPE=$P(^(0),"^",2),GMRP=";"_GTYPE_";"
"RTN","GMRVED4",15,0)
 I $S('$D(^GMRD(120.51,GMRTYPE,0)):0,";"_GMRSTR[GMRP:1,1:0) S GCT=GCT+1,GFLAG=1 S:GCT=1 GMRSTR(0)=$P(GMRSTR(0),GMRP)_";"_$P(GMRSTR(0),GMRP,2) D
"RTN","GMRVED4",16,0)
 . K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(X,.GMRVARY,GMRTYPE) S GMRINF=$$WRITECH^GMRVCHAR(X,.GMRVARY,9) Q
"RTN","GMRVED4",17,0)
 I GFLAG S GMROV(GTYPE,GCT)=$P(GMROV,"^",8) D
"RTN","GMRVED4",18,0)
 .S GMROV(GTYPE,GCT)=GMROV(GTYPE,GCT)_"^"_$S(GMRINF'="":" "_GMRINF,1:"")_"^"_GMRVIDT
"RTN","GMRVED4",19,0)
 .S:GTYPE="BP"!(GTYPE="P") GLAST(1)=1,GLAST=GMRVIDT D:GTYPE="BP"!(GTYPE="P") MULTIBP S GMRVIDT=GDT
"RTN","GMRVED4",20,0)
 S GCT=0 K GFLAG Q
"RTN","GMRVED4",21,0)
PROV ; PRINT OUT OLD VITAL
"RTN","GMRVED4",22,0)
 K GDATA S GMRVX=X,GMRVX(0)=$P(GMROV(X,X(1)),"^") G:GMRVX(0)'>0 PRT
"RTN","GMRVED4",23,0)
 I GMRVX(0)>0 D EN1^GMRVSAS0 S X(2)=GMRVX(0)
"RTN","GMRVED4",24,0)
 I X="T" S GMRVX(0)=GMRVX(0)_$S(GMRVX(0)>0:"F"_" ("_$J(X(2)-32*5/9,0,1)_"C)",1:"")
"RTN","GMRVED4",25,0)
 I X="PN" D
"RTN","GMRVED4",26,0)
 . I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRVX(0)) Q
"RTN","GMRVED4",27,0)
 . I GMRVX(0)=0 S GMRVX(0)="No pain " Q
"RTN","GMRVED4",28,0)
 . I GMRVX(0)=99 S GMRVX(0)="Unable to respond "
"RTN","GMRVED4",29,0)
 . I GMRVX(0)=10 S GMRVX(0)=GMRVX(0)_" - Worst imaginable pain " Q
"RTN","GMRVED4",30,0)
 . Q
"RTN","GMRVED4",31,0)
 I X="WT" S GMRVX(0)=GMRVX(0)_$S(GMRVX(0)>0:" lb"_" ("_$J(X(2)/2.2,0,2)_" kg)",1:"")
"RTN","GMRVED4",32,0)
 I X="HT" S GMRVX(0)=(GMRVX(0)\12)_$S(GMRVX(0)>0:" ft "_$S(X(2)#12:X(2)#12_" in",1:"")_" ("_$J(X(2)*2.54,0,2)_" cm)",1:"")
"RTN","GMRVED4",33,0)
 I X="CG" S GMRVX(0)=GMRVX(0)_$S(GMRVX(0)>0:" in ("_$J(X(2)/.3937,0,2)_" cm)",1:"")
"RTN","GMRVED4",34,0)
 I X="CVP" S GMRVX(0)=GMRVX(0)_$S(GMRVX(0)>0:" cmH2O ("_$J(X(2)/1.36,0,0)_" mmHg)",1:"")
"RTN","GMRVED4",35,0)
 I X="PO2" S GMRVX(0)=$S(GMRVX(0)>0:"O2 sat. via oximetry "_GMRVX(0)_" %",1:"")_$S($P(GMROV,"^",10)'="":" with O2 "_$P($P(GMROV,"^",10)," l/min")_"L/min"_$P($P(GMROV,"^",10)," l/min",2),1:"")_$S(GMRINF'="":" via",1:"")
"RTN","GMRVED4",36,0)
PRT W:X(1)=1 !,?$X+2,$S(X="T":"Temp.",X="P":"Pulse",X="R":"Resp.",X="BP":"B/P",X="HT":"Ht.",X="WT":"Wt.",X="CG":"Circumference/Girth",X="PO2":"Pulse Oximetry",X="PN":"Pain",1:X),": "
"RTN","GMRVED4",37,0)
 W:X(1)>1 !
"RTN","GMRVED4",38,0)
 S GDATA(1)=$P(GMROV(X,X(1)),"^",2),GDATA(2)=$P(GMROV(X,X(1)),"^",3)
"RTN","GMRVED4",39,0)
 W:X="BP" ?8," " W:X="P" ?8,$S(X(1)>1:" ",1:"") W GMRVX(0),$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*"),GDATA(1)
"RTN","GMRVED4",40,0)
 K GDATA,GMRVX Q
"RTN","GMRVED4",41,0)
EXITACT ; VITAL OPTIONS EXIT ACTION
"RTN","GMRVED4",42,0)
 K:'$L(GMRVFLAG) GMRVFLAG,GMRVDBA
"RTN","GMRVED4",43,0)
 K G,GBLNK,GCAT,GCHA,GCHART,GCOL,GCOUNT,GCT,GDA,GDT,GENTR,GLAST,GLN,GMAX,GMRDAT,GMRENTR,GMRHELP,GMRINF,GMRINPTR,GMRLAST,GMRO2,GMRPRMT,GMRRET,GMRSCR,GMRSITE,GMRSTAR,GMRSTR
"RTN","GMRVED4",44,0)
 K GMRV,GMRVDFLT,GMRVHLOC,GMRVIDT,GMRVIT,GMRVITY,GMRVLST,GMRVODR,GMRVWLOC,GMRW,GMRWARD,GMRX,GMRY,GORDER,GQUAL,GREASON,GSIDE,GTXT,GTYPE
"RTN","GMRVED4",45,0)
 Q
"RTN","GMRVED4",46,0)
ENTACT ; NURSING VITAL OPTIONS ENTRY ACTION
"RTN","GMRVED4",47,0)
 S:'$D(GMRVFLAG) GMRVFLAG=2 I GMRVFLAG S GMRVFLAG=$S(GMRVFLAG=1:0,1:""),GMROUT=0 D DATE^GMRVED0 S:'GMROUT GMRVDBA=GMROUT_"^"_GMRVIDT S:GMROUT XQUIT=1 K GMROUT,GMRVIDT
"RTN","GMRVED4",48,0)
 Q
"RTN","GMRVED4",49,0)
MULTIBP ;DISPLAY MULTIPLE B/P
"RTN","GMRVED4",50,0)
 Q:'$D(GMRTYPE)  S GDATE=GDT S:'$D(GLAST) GLAST=0 S GDT(3)=9999999-(GDT+.00000001),GDT(2)=9999999-(GDT+.00000014) K GDATE
"RTN","GMRVED4",51,0)
 F  S GDT(2)=$O(^GMR(120.5,"AA",DFN,GMRTYPE,GDT(2))) Q:GDT(2)>GDT(3)!(GDT(2)="")  S GDA=0 F  S GDA=$O(^GMR(120.5,"AA",DFN,GMRTYPE,GDT(2),GDA)) Q:GDA'>0  I $D(^GMR(120.5,GDA,0)),'$D(^GMR(120.5,GDA,2)) S GMRVIDT=9999999-GDT(2) D
"RTN","GMRVED4",52,0)
 .S GDATA=^GMR(120.5,GDA,0),(GLAST(1),GCT)=GCT+1
"RTN","GMRVED4",53,0)
 .K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GDA,.GMRVARY,GMRTYPE) S GMRINF=$$WRITECH^GMRVCHAR(GDA,.GMRVARY,9)
"RTN","GMRVED4",54,0)
 .S GMROV(GTYPE,GCT)=$P(GDATA,"^",8)_"^"_$S(GMRINF'="":" "_GMRINF,1:"")_"^"_GMRVIDT
"RTN","GMRVED4",55,0)
 .S:GMRVIDT>GLAST GLAST=GMRVIDT
"RTN","GMRVED4",56,0)
 Q
"RTN","GMRVED6")
0^10^B10030540
"RTN","GMRVED6",1,0)
GMRVED6 ;HIRMFO/YH-VM EDIT FOR PATIENT ON PASS OR REFUSE ;2/7/99
"RTN","GMRVED6",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVED6",3,0)
EN1 ;
"RTN","GMRVED6",4,0)
 S %=2 W !,"Do you want to enter Vitals" D YN^DICN
"RTN","GMRVED6",5,0)
 I %<0 S GMROUT=1 Q
"RTN","GMRVED6",6,0)
 I %=1 Q
"RTN","GMRVED6",7,0)
 F GMRX=2:1:$L(GMRSTR(0),";")-1 D
"RTN","GMRVED6",8,0)
 .  S GMRY=$P(GMRSTR,";",GMRX),GMRDAT(GMRY)="pass",(GMRSITE(GMRY),GMRINF(GMRY))=""
"RTN","GMRVED6",9,0)
 .  Q
"RTN","GMRVED6",10,0)
 S GMROUT(1)=1 Q
"RTN","GMRVED6",11,0)
EN2(GRSN) ;
"RTN","GMRVED6",12,0)
 N GG,I,X S GG=3,GG(1)="Unavailable",GG(2)="Pass",GG(3)="Refused"
"RTN","GMRVED6",13,0)
AGAIN W !!,"*** Reason for Omission ***" F I=1:1:GG W !,I_".  "_GG(I)
"RTN","GMRVED6",14,0)
 W !!,"Select a number (the reason for the data omission) or ^ to quit: "
"RTN","GMRVED6",15,0)
 S X=0 R X:DTIME I '$T!(X["^") S GMROUT=1,GRSN="" Q GRSN
"RTN","GMRVED6",16,0)
 I $L(X)>2 G AGAIN
"RTN","GMRVED6",17,0)
 I X["?" W !,"Enter the number of reason * was entered",! G AGAIN
"RTN","GMRVED6",18,0)
 I '$D(GG(+X)) G AGAIN
"RTN","GMRVED6",19,0)
 S GRSN=GG(+X)
"RTN","GMRVED6",20,0)
 Q GRSN
"RTN","GMRVED6",21,0)
EN3 ; SELECT ROOMS ON A GIVEN WARD
"RTN","GMRVED6",22,0)
 K GMRMSL
"RTN","GMRVED6",23,0)
 I $D(^DG(405.4,0)) S X=0 F Y=1:0 S X=$O(^DG(405.4,"W",GMRWARD,X)) Q:X'>0  I $D(^DG(405.4,X,0)),$P($P(^(0),"^"),"-")'="" S:'$D(GMRMSL("B",$P($P(^(0),"^"),"-"))) GMRMSL(Y)=$P($P(^(0),"^"),"-"),GMRMSL("B",$P($P(^(0),"^"),"-"))="",Y=Y+1
"RTN","GMRVED6",24,0)
 S GMRMSL=Y-1
"RTN","GMRVED6",25,0)
S3 K I S I(1)=1,I(2)=21,I(3)=41,I(4)=61,I(5)=81 W !!,"UNIT "_GMRWARD(1)_" has the following Rooms:",!! F Y=0:0 S Y=$O(GMRMSL(Y)) Q:Y'>0!(Y'<21)  D ROOMSEL^GMRVUT3
"RTN","GMRVED6",26,0)
 W !!,"Select the NUMBER(S) of the Rooms for Vital/Measurement: " R GMRRMST:DTIME W:GMRRMST="" !,"NO ROOM SELECTED",! I "^"[GMRRMST!'$T!(GMRRMST="") S GMROUT=1 Q
"RTN","GMRVED6",27,0)
 I $L(GMRRMST)>20 G S3
"RTN","GMRVED6",28,0)
 I GMRRMST?1"?".E W !,?5,"Type in number(s) associated with the rooms you want,",!,?5,"separated by commas or hyphens if there is more than one room",!,?5,"(e.g.,  1-3,5 would be entries 1,2,3 and 5)." G S3
"RTN","GMRVED6",29,0)
 I '(GMRRMST?.N!(GMRRMST?.NP&(GMRRMST["-"!(GMRRMST[",")))) W $C(7),"  ??" G S3
"RTN","GMRVED6",30,0)
 F GMRI=1:1 S GMRLEN=$P(GMRRMST,",",GMRI) Q:GMRLEN=""  S GMRLEN(1)=$P(GMRLEN,"-",2)_"+"_GMRLEN F GMRX=+GMRLEN:1:+GMRLEN(1) D RMCHK I GMROUT S GMROUT=0 G S3
"RTN","GMRVED6",31,0)
 Q
"RTN","GMRVED6",32,0)
RMCHK ;
"RTN","GMRVED6",33,0)
 I '$D(GMRMSL(GMRX)) W !?5,$C(7),"Please select a number between 1 and ",GMRMSL S GMROUT=1 Q
"RTN","GMRVED6",34,0)
 S:GMRX=+GMRX GMRROOM(GMRMSL(GMRX))=""
"RTN","GMRVED6",35,0)
 Q
"RTN","GMRVEE0")
0^11^B29132178
"RTN","GMRVEE0",1,0)
GMRVEE0 ;HIRMFO/RM,YH-ENTERED IN ERROR EDIT ;2/6/99
"RTN","GMRVEE0",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVEE0",3,0)
EN1 ; ENTRY FROM OPTION GMRV ERROR EDIT
"RTN","GMRVEE0",4,0)
 S GMROUT=0 W ! S DIC="^DPT(",DIC(0)="AEMQ" D ^DIC K DIC S:+Y'>0 GMROUT=1 G Q:+Y'>0 S DFN=+Y
"RTN","GMRVEE0",5,0)
EN2 ; ENTRY TO VITALS ENTERED IN ERROR IF DFN IS KNOWN.
"RTN","GMRVEE0",6,0)
 Q:'$D(DFN)  S GMROUT=0 K ^TMP($J)
"RTN","GMRVEE0",7,0)
DATE S %DT(0)="-NOW",%DT("A")="Select DATE (TIME optional) of this error: ",%DT="AXET" D ^%DT K %DT I +Y'>0 S GMROUT=1 G Q
"RTN","GMRVEE0",8,0)
 S GMRVDATE=+Y D DATACK I GMROUT W !,$C(7),"No data for this date" S GMROUT=0 G DATE
"RTN","GMRVEE0",9,0)
EN3 ;ENTRY TO ERROR EDIT PROVIDED DFN AND DATE/TIME ARE GIVEN
"RTN","GMRVEE0",10,0)
 S GMRX=$O(GMRARTY("D",0)) I GMRX>0 D CHSDT G:GMROUT Q D EN1^GMRVEE1
"RTN","GMRVEE0",11,0)
 I GMRARTY W ! S DIC=120.51,DIC(0)="AQEM",DIC("A")="Select a VITAL type record, or press return to correct DATE/TIME, PATIENT  or set INVALID for the record: ",DIC("S")="I $D(GMRARTY(+Y))" D ^DIC K DIC
"RTN","GMRVEE0",12,0)
 S:$D(DUOUT)!$D(DTOUT) GMROUT=1 G:GMROUT Q
"RTN","GMRVEE0",13,0)
 S GMRVITY=$S(+Y>0:+Y,1:"A")
"RTN","GMRVEE0",14,0)
 I 'GMRARTY S GMRVITY=$O(GMRARTY(0))
"RTN","GMRVEE0",15,0)
 D:GMRVITY'="A" WHTL
"RTN","GMRVEE0",16,0)
 I '($D(GMRARTY)\10) W !?3,$C(7),"There is no data for this patient for this date/time" G Q
"RTN","GMRVEE0",17,0)
 S GMRVDT=$O(GMRARTY("D",0)) S:GMRVITY="A"&'$O(GMRARTY(+$O(GMRARTY("")))) GMRVITY=$O(GMRARTY(""))
"RTN","GMRVEE0",18,0)
 D RESLS^GMRVEE1
"RTN","GMRVEE0",19,0)
Q K ^TMP($J),GMRAINP,GMRDA,GMRDAT,GMREDB,GMRFDT,GMRNM,GMRSDT,GMRTY,GMRVDATE,GMRVITY,GMRX,GMRDATE,GMRI,GMRSITE,GMRVIDT,GMRSTR,GMRVCH,GMRVIT,GMRVX,DR,DA,DIE,DFN,DIC,GMRARTY,GMRCHC,GMRDFN,GMRVDT,GMRVHLOC,GMRY,GMRZ,POP,GDATE,GSAVE,GDFN,GMRCNT
"RTN","GMRVEE0",20,0)
 D KVAR^VADPT K GMRINF,GMRDATA,%T,%Y,D0,DI,DQ,VAERR,VAIP,GMRQUAL,GMRENTY,GFLAG,GMRZZ,GMRVARY
"RTN","GMRVEE0",21,0)
 K GMROK,GDT I GMROUT K GMROUT Q
"RTN","GMRVEE0",22,0)
 G EN1
"RTN","GMRVEE0",23,0)
WHTL ; ELIMINATE ALL NON GMRVITY CHILDREN FROM GMRARTY
"RTN","GMRVEE0",24,0)
 F GMRX=0:0 S GMRX=$O(GMRARTY(GMRX)) Q:GMRX'>0  I GMRX'=GMRVITY K GMRARTY(GMRX)
"RTN","GMRVEE0",25,0)
 F GMRX=0:0 S GMRX=$O(GMRARTY("D",GMRX)) Q:GMRX'>0  I '$D(GMRARTY(GMRVITY,GMRX)) K GMRARTY("D",GMRX)
"RTN","GMRVEE0",26,0)
 Q
"RTN","GMRVEE0",27,0)
CHSDT ; CHOOSE A DATE FOR ALL VITAL TYPES, OR DROP THRU FROM SINGLE VITAL TYPE
"RTN","GMRVEE0",28,0)
 S (GMRCNT,GMRNM)=0 K ^TMP($J,"GMRC") W !,"CHOOSE FROM: ",!
"RTN","GMRVEE0",29,0)
 S GFLAG="" F GMRX=0:0 S GMRX=$O(GMRARTY("D",GMRX)) Q:GMRX'>0!GMROUT!(GFLAG["^")  S GMRNM=GMRNM+1,^TMP($J,"GMRC",GMRNM)=GMRX,GMRCNT=GMRCNT+1 W !,?2,GMRNM_"  " S Y=GMRX D DT^DIQ D PRTCHS I GMRCNT=3 D
"RTN","GMRVEE0",30,0)
 . W !,"  Return to continue or enter ^ to stop listing: " R GFLAG:DTIME S:'$T GMROUT=1 S GMRCNT=0
"RTN","GMRVEE0",31,0)
 . Q
"RTN","GMRVEE0",32,0)
CHNUM Q:GMROUT  W !!,"Select VITAL/MEASUREMENT from the above list: " R GMRX:DTIME I '$T!(GMRX="^") S GMROUT=1 Q
"RTN","GMRVEE0",33,0)
 I GMRX="" S GMROUT=1 Q
"RTN","GMRVEE0",34,0)
 I '$D(^TMP($J,"GMRC",GMRX)) W !,$C(7),?3,"ANSWER WITH "_$S(GMRNM>0:"A NUMBER BETWEEN 1 AND "_GMRNM,1:"THE NUMBER 1") G CHNUM:GMRX'?1"?".E,CHSDT
"RTN","GMRVEE0",35,0)
SDA S GMRVDT=^TMP($J,"GMRC",GMRX) F GMRX=0:0 S GMRX=$O(GMRARTY(GMRX)) Q:GMRX'>0  F GMRY=0:0 S GMRY=$O(GMRARTY(GMRX,GMRY)) Q:GMRY'>0  I GMRY'=GMRVDT K GMRARTY(GMRX,GMRY),GMRARTY("D",GMRY)
"RTN","GMRVEE0",36,0)
 Q
"RTN","GMRVEE0",37,0)
PRTCHS ; PRINT CHOICES FOR DATE/TIME DEFINED BY GMRX
"RTN","GMRVEE0",38,0)
 F GMRY=0:0 S GMRY=$O(GMRARTY(GMRY)) Q:GMRY'>0  I $D(GMRARTY(GMRY,GMRX)) S GMRDA=GMRARTY(GMRY,GMRX) D PRTLN
"RTN","GMRVEE0",39,0)
 Q
"RTN","GMRVEE0",40,0)
PRTLN ; PRINT DATA FOR VITAL RECORD DEFINED BY GMRDA
"RTN","GMRVEE0",41,0)
 S GMRDAT=$S($D(^GMR(120.5,GMRDA,0)):^(0),1:"") Q:GMRDAT=""
"RTN","GMRVEE0",42,0)
 K GMRVX S GMRVX=$S($D(^GMRD(120.51,GMRY,0)):$P(^(0),"^",2),1:""),GMRVX(0)=$P(GMRDAT,"^",8) D:GMRVX(0)>0 EN1^GMRVSAS0
"RTN","GMRVEE0",43,0)
 S GMRZZ="",GMRZZ(1)="" I $P($G(^GMR(120.5,GMRDA,5,0)),"^",4)>0 K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GMRDA,.GMRVARY,GMRY) S GMRZZ=$$WRITECH^GMRVCHAR(GMRDA,.GMRVARY,9) S:GMRZZ'=""&(GMRVX'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMRVEE0",44,0)
 I GMRVX="T",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" F ("_$J(GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMRVEE0",45,0)
 I GMRVX="HT",GMRVX(0)>0 S GMRVX(0)=$S(GMRVX(0)\12:GMRVX(0)\12_" ft ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" in",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" cm)"
"RTN","GMRVEE0",46,0)
 I GMRVX="WT",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" lb ("_$J(GMRVX(0)/2.2,0,2)_" kg)"
"RTN","GMRVEE0",47,0)
 I GMRVX="PN" D
"RTN","GMRVEE0",48,0)
 . I GMRVX(0)=0 S GMRVX(0)=GMRVX(0)_" No pain" Q
"RTN","GMRVEE0",49,0)
 . I GMRVX(0)=99 S GMRVX(0)=GMRVX(0)_" Unable to respond" Q
"RTN","GMRVEE0",50,0)
 . I GMRVX(0)=10 S GMRVX(0)=GMRVX(0)_" Worst imaginable pain" Q
"RTN","GMRVEE0",51,0)
 I GMRVX="CG",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" in ("_$J(+GMRVX(0)/.3937,0,2)_" cm)"
"RTN","GMRVEE0",52,0)
 I GMRVX="CVP",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMRVEE0",53,0)
 I GMRVX="PO2",GMRVX(0)>0 S GMRVX(0)="Pulse oximetry "_GMRVX(0)_" %"_$S($P(GMRDAT,"^",10)'="":" with supplemental O2 "_$P($P(GMRDAT,"^",10)," l/min")_"L/min"_$P($P(GMRDAT,"^",10)," l/min",2),1:"")
"RTN","GMRVEE0",54,0)
 W !,?5,$S(GMRVX="PN":"Pain",1:GMRVX),": ",GMRVX(0),$S('$D(GMRVX(1)):" ",'GMRVX(1):" ",1:"*")
"RTN","GMRVEE0",55,0)
 W:GMRVX="PO2" !,?10,"via " W GMRZZ
"RTN","GMRVEE0",56,0)
 Q
"RTN","GMRVEE0",57,0)
DATACK ; CHECK TO SEE IF DATA FOR THIS PATIENT FOR THIS DATE.  IF THERE IS
"RTN","GMRVEE0",58,0)
 ; SET UP AN ARRAY GMRARTY WITH GMRARTY=$S(0:ONE TYPE ONLY,1:MORE
"RTN","GMRVEE0",59,0)
 ; THAN ONE TYPE) AND GMRARTY(TYPE IEN)=120.5 ENTRY
"RTN","GMRVEE0",60,0)
 K GMRARTY S X1=GMRVDATE,X2=1 D C^%DTC S GMRVDT(0)=$P(X,".",1)
"RTN","GMRVEE0",61,0)
 F GMRVITY=0:0 S GMRVITY=$O(^GMR(120.5,"AA",DFN,GMRVITY)) Q:GMRVITY'>0  D CNLP
"RTN","GMRVEE0",62,0)
 I '$D(GMRARTY) S GMROUT=1
"RTN","GMRVEE0",63,0)
 Q
"RTN","GMRVEE0",64,0)
CNLP ;
"RTN","GMRVEE0",65,0)
 F GMRVDT=(9999999-GMRVDT(0)):0 S GMRVDT=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT)) Q:$P(9999999-GMRVDT,".")'[$P(GMRVDATE,".")!(GMRVDT'>0)  D:$S('$P(GMRVDATE,".",2):1,1:GMRVDATE=(9999999-GMRVDT)) STARTY
"RTN","GMRVEE0",66,0)
 Q
"RTN","GMRVEE0",67,0)
STARTY ; SET GMRARTY ARRAY
"RTN","GMRVEE0",68,0)
 F GMRDA=0:0 S GMRDA=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT,GMRDA)) Q:GMRDA'>0  I '$D(^GMR(120.5,GMRDA,2)) S GMRARTY=$S($D(GMRARTY):1,1:0),GMRARTY(GMRVITY,9999999-GMRVDT)=GMRDA,GMRARTY("D",9999999-GMRVDT)="" Q
"RTN","GMRVEE0",69,0)
 Q
"RTN","GMRVEE2")
0^12^B26327897
"RTN","GMRVEE2",1,0)
GMRVEE2 ;HIRMFO/YH-ENTERED IN ERROR EDIT (cont.) ;2/6/99
"RTN","GMRVEE2",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVEE2",3,0)
EN1 ; ENTER NEW DATE/TIME VITALS TAKEN
"RTN","GMRVEE2",4,0)
 S %DT(0)="-NOW",%DT("A")="Enter new date/time vitals were taken: ",%DT="AETRS" D ^%DT K %DT S:X?1"^".E!(+Y'>0) GMROUT=1 Q:GMROUT  S GMRCHC(1)=+Y
"RTN","GMRVEE2",5,0)
 Q
"RTN","GMRVEE2",6,0)
EN2 ; ENTER NEW READING
"RTN","GMRVEE2",7,0)
 S GMRENTY=8,GLVL=8,GMRVIT=GMRX,(GMRVITY,GMRTY)=$S($D(^GMRD(120.51,GMRX,0)):$P(^(0),"^",2),1:""),GMRVIT(1)=$P(^(0),"^"),GMRAINP=$S($D(^(1)):^(1),1:""),GSAVE=GMRVITY,GMRO2(GMRVITY)=""
"RTN","GMRVEE2",8,0)
 S GDT=GMRVIDT D EN1^GMRVADM G:GMROUT Q
"RTN","GMRVEE2",9,0)
ERRAT W !!,"NEW "_$S($P(GMRVIT(1),"^")'="":$P(GMRVIT(1),"^"),1:"VALUE")_": " R X:DTIME S:'$T X="^^" W ! I "^^"[X!(X="") W !,$C(7),?3,"NO UPDATING HAS OCCURRED!!" S GMROUT=1 G Q
"RTN","GMRVEE2",10,0)
 I X?1"?".E S GOPT=GMRTY_"^GMRVUT1" D @GOPT K GOPT G ERRAT
"RTN","GMRVEE2",11,0)
 I GMRTY="T"!(GMRTY="P")!(GMRTY="R") S X=$$RDSITE(X),GMRSITE=$P(X,U,2),X=$P(X,U) S GMRSITE=$$UP^XLFSTR(GMRSITE) D TPSITE^GMRVUT1
"RTN","GMRVEE2",12,0)
 I GMRTY="T"!(GMRTY="P")!(GMRTY="R") S:'$D(GMRSITE(GMRVITY)) GMROUT=1 S:GMROUT=0 GMRSITE=GMRSITE(GMRVITY) I GMROUT W !,"NO UPDATING HAS OCCURRED",!
"RTN","GMRVEE2",13,0)
 I GMRTY="CG" D  G:$G(X)="" ERRAT
"RTN","GMRVEE2",14,0)
 . X GMRAINP I $G(X)="" W !,?3,$C(7),"INVALID ENTRY??" Q
"RTN","GMRVEE2",15,0)
 . K GMRSITE(GMRVITY),GMRINF(GMRVITY) D LISTQ^GMRVQUAL,OTHERQ^GMRVQUAL
"RTN","GMRVEE2",16,0)
 G:GMROUT Q
"RTN","GMRVEE2",17,0)
 I GMRTY="PO2" X GMRAINP W:'$D(X) !,?3,$C(7),"INVALID ENTRY??" G:'$D(X) ERRAT S (GMRSITE(GMRVITY),GMRINF("GMRVITY"))="" D O2^GMRVUT3 G Q:GMROUT,Q1
"RTN","GMRVEE2",18,0)
 I GMRTY="PN" X GMRAINP W:'$D(X) !,?3,$C(7),"INVALID ENTRY??" G:'$D(X) ERRAT S (GMRSITE(GMRVITY),GMRINF("GMRVITY"))="" G Q:GMROUT,Q1
"RTN","GMRVEE2",19,0)
 I GMRTY="BP" X GMRAINP W:'$D(X) !,?3,$C(7),"INVALID ENTRY??" G:'$D(X) ERRAT D LISTQ^GMRVQUAL,OTHERQ^GMRVQUAL,CLEAR^GMRVQUAL G Q:GMROUT,Q1
"RTN","GMRVEE2",20,0)
 I GMRTY="WT" S GMRSITE=$P(X,+X,2) G:GMRSITE=""!("LlLk"'[$E(GMRSITE)) ERRAT D WTYPE^GMRVUT1 S:'$D(GMRSITE(GMRVITY)) GMROUT=1 S:GMROUT=0 GMRSITE=GMRSITE(GMRVITY) I GMROUT W !,"NO UPDATING HAS OCCURRED",!
"RTN","GMRVEE2",21,0)
 I GMRVITY="HT" S GMRSITE=$P(X,",",2),X=$P(X,",") S:GMRSITE="" GMRSITE="A" X GMRAINP W:'$D(X) !,?3,$C(7),"INVALID ENTRY??" G:'$D(X) ERRAT D TPSITE^GMRVUT1 G Q:GMROUT,Q1
"RTN","GMRVEE2",22,0)
 G:GMROUT Q X GMRAINP I '$D(X) W !,?3,$C(7),"INVALID ENTRY??" G ERRAT
"RTN","GMRVEE2",23,0)
Q1 G:GMROUT Q S GMRCHC(2)=X
"RTN","GMRVEE2",24,0)
Q S GMRVITY=GSAVE K GSAVE D CLEAR^GMRVQUAL Q
"RTN","GMRVEE2",25,0)
EN3 ; SELECT NEW PATIENT FOR VITALS
"RTN","GMRVEE2",26,0)
 S DIC("A")="Select the NEW Patient's name: ",DIC(0)="AEQM",DIC="^DPT(" D ^DIC K DIC S:$D(DTOUT)!$D(DUOUT)!(+Y'>0) GMROUT=1 Q:GMROUT  S GMRCHC(3)=+Y
"RTN","GMRVEE2",27,0)
 Q
"RTN","GMRVEE2",28,0)
DUPREC ;PRINT WARNING MESSAGE IF THE DATE/TIME CHANGE WILL CAUSE DUPLICATE RECORD
"RTN","GMRVEE2",29,0)
 W ! S GVIT=0 F GII=0:0 S GVIT=$O(GMRARTY(GVIT)) Q:GVIT'>0  I $D(^GMR(120.5,"AA",DFN,GVIT,GDATE)) D CHKER
"RTN","GMRVEE2",30,0)
 K GDA,GVIT,GII Q
"RTN","GMRVEE2",31,0)
CHKER ;
"RTN","GMRVEE2",32,0)
 S GDA=0 F GDA=0:0 S GDA=$O(^GMR(120.5,"AA",DFN,GVIT,GDATE,GDA)) Q:GDA'>0  I '$D(^GMR(120.5,GDA,2)) S GMROUT=1 W !,$P($S($D(^GMRD(120.51,GVIT,0)):^(0),1:0),"^"),"  already exists on ",Y,"   reading - ",$P(^GMR(120.5,GDA,0),"^",8)
"RTN","GMRVEE2",33,0)
 Q
"RTN","GMRVEE2",34,0)
DUPDT ;SET EXISTING OLD VITAL AS ERROR RECORD
"RTN","GMRVEE2",35,0)
 S GMRDA=0 F GMRDA=0:0 S GMRDA=$O(^GMR(120.5,"AA",DFN,GMRY,GDATE,GMRDA)) Q:GMRDA'>0  I '$D(^GMR(120.5,GMRDA,2)) D ERREN^GMRVEE1 Q
"RTN","GMRVEE2",36,0)
 Q
"RTN","GMRVEE2",37,0)
PRTEED ; PRINT ERROR RECORD
"RTN","GMRVEE2",38,0)
 S GMRDAT=^GMR(120.5,GMRDA,0)
"RTN","GMRVEE2",39,0)
 S GMRTY=$S($D(^GMRD(120.51,GMRX,0)):^(0),1:""),GMRAINP=$S($D(^GMRD(120.51,$P(GMRDAT,"^",3),1))#2:^(1),1:""),GMRVX=$P(GMRTY,"^",2),GMRVX(0)=$P(GMRDAT,U,8),GMRVX(1)=0 D:GMRVX(0)>0 EN1^GMRVSAS0 S GMRVX(1)=$S(GMRVX(1)>0:" *",1:"")
"RTN","GMRVEE2",40,0)
 S GMRZZ="",GMRZZ(1)="" I $P($G(^GMR(120.5,GMRDA,5,0)),"^",4)>0 K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GMRDA,.GMRVARY,GMRX) S GMRZZ=$$WRITECH^GMRVCHAR(GMRDA,.GMRVARY,9) S:GMRZZ'="" GMRZZ(1)=" ("_GMRZZ_")"
"RTN","GMRVEE2",41,0)
 I GMRVX="T",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" F ("_$J(GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMRVEE2",42,0)
 I GMRVX="WT",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" lb ("_$J(GMRVX(0)/2.2,0,2)_" kg)"
"RTN","GMRVEE2",43,0)
 I GMRVX="HT",GMRVX(0)>0 S GMRVX(0)=$S(GMRVX(0)\12:GMRVX(0)\12_" ft ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" in",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" cm)"
"RTN","GMRVEE2",44,0)
 I GMRVX="CG",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" in ("_$J(+GMRVX(0)/.3937,0,2)_" cm)"
"RTN","GMRVEE2",45,0)
 I GMRVX="CVP",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMRVEE2",46,0)
 I GMRVX="PO2",GMRVX(0)>0 S GMRVX(0)="Pulse oximetry "_GMRVX(0)_" %"_$S($P(GMRDAT,"^",10)'="":" with supplemental O2 "_$P($P(GMRDAT,"^",10)," l/min")_"L/min"_$P($P(GMRDAT,"^",10)," l/min",2),1:"")
"RTN","GMRVEE2",47,0)
 I GMRX=$O(GMRARTY(0)) S Y=$P(GMRDAT,"^") W ! D DT^DIQ
"RTN","GMRVEE2",48,0)
 W !,?2,$S($P(GMRTY,"^",2)="PN":"PN (pain)",1:$P(GMRTY,"^",2)),":  ",$S($P(GMRDAT,U,8)'="":GMRVX(0)_GMRVX(1),1:"")
"RTN","GMRVEE2",49,0)
 I GMRTY="PN" D
"RTN","GMRVEE2",50,0)
 . I GMRVX(0)=0 W " No pain" Q
"RTN","GMRVEE2",51,0)
 . I GMRVX(0)=99 W " Unable to respond" Q
"RTN","GMRVEE2",52,0)
 . I GMRVX(0)=10 W " Worst imaginable to respond" Q
"RTN","GMRVEE2",53,0)
 W:GMRVX="PO2"&(GMRZZ'="") !,?8,"via " W " ",GMRZZ
"RTN","GMRVEE2",54,0)
 Q
"RTN","GMRVEE2",55,0)
RDSITE(X) ; THIS FUNCTION CONVERTS A VITAL DATA ENTRY IN X TO A SITE AND
"RTN","GMRVEE2",56,0)
 ; A READING.  IT RETURNS SITE^READING.
"RTN","GMRVEE2",57,0)
 N Y,Z,I,READ,SITE
"RTN","GMRVEE2",58,0)
 S Y=$TR(X,"0123456789.","99999999999")
"RTN","GMRVEE2",59,0)
 S Z=$L(X)+1,I=0 F  S I=$F(Y,"9",I) Q:I'>0  S Z=I
"RTN","GMRVEE2",60,0)
 S READ=$E(X,1,Z-1),SITE=$E(X,Z,$L(X))
"RTN","GMRVEE2",61,0)
 Q READ_"^"_SITE
"RTN","GMRVER0")
0^13^B7143880
"RTN","GMRVER0",1,0)
GMRVER0 ;HIRMFO/RM,YH-REPORT OF VITALS ENTERED IN ERROR FOR A PATIENT ;2/6/99
"RTN","GMRVER0",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVER0",3,0)
EN1 ; ENTRY FROM OPTION GMRV ERROR PRINT
"RTN","GMRVER0",4,0)
 K ^TMP($J) S DIC="^DPT(",DIC(0)="AEQM" D ^DIC K DIC Q:+Y'>0  S DFN=+Y
"RTN","GMRVER0",5,0)
DTS S %DT="AET",%DT("A")="Start with DATE (TIME optional): ",%DT("B")="T-7" D ^%DT K %DT I +Y'>0 G Q
"RTN","GMRVER0",6,0)
 S GMRVSDT=+Y
"RTN","GMRVER0",7,0)
 S %DT="AET",%DT("A")="go to DATE (TIME optional): ",%DT("B")="NOW" D ^%DT K %DT I X="^" G Q
"RTN","GMRVER0",8,0)
 I +Y'>0!($P(Y,".",2)'>0&(DT=Y)) D NOW^%DTC S Y=%
"RTN","GMRVER0",9,0)
 I $P(Y,".",2)'>0 S Y=Y_$S(Y[".":"2400",1:".2400")
"RTN","GMRVER0",10,0)
 I GMRVSDT>+Y W !,?3,$C(7),"THE START DATE MUST BE BEFORE THE END DATE OF THIS REPORT" G DTS
"RTN","GMRVER0",11,0)
 S GMRVFDT=+Y
"RTN","GMRVER0",12,0)
DEV S %ZIS="Q" D ^%ZIS K %ZIS G:POP Q I $E(IOST)="P",'$D(IO("Q")),'$D(IO("S")) D ^%ZISC W !,?3,"PRINTED REPORTS MUST BE QUEUED!!",$C(7) G DEV
"RTN","GMRVER0",13,0)
 I $D(IO("Q")) S (ZTSAVE("DFN"),ZTSAVE("GMRVSDT"),ZTSAVE("GMRVFDT"))="",ZTIO=ION,ZTDESC="Entered in error vital/measurement report",ZTRTN="EN1^GMRVER1" D ^%ZTLOAD K IO("Q"),ZTSK,ZTIO G Q
"RTN","GMRVER0",14,0)
 G EN1^GMRVER1
"RTN","GMRVER0",15,0)
Q G Q^GMRVER1
"RTN","GMRVER0",16,0)
ERREASON ;ERROR REASON
"RTN","GMRVER0",17,0)
 Q:'$D(^GMR(120.5,+GMRVDA,2.1))
"RTN","GMRVER0",18,0)
 S GER=0 F  S GER=$O(^GMR(120.5,+GMRVDA,2.1,GER)) Q:GER'>0  S GER(1)=+$G(^GMR(120.5,+GMRVDA,2.1,GER,0)) D
"RTN","GMRVER0",19,0)
 . S GER(2)=$S(GER(1)=1:"incorrect date/time",GER(1)=2:"incorrect reading",GER(1)=3:"incorrect patient",GER(1)=4:"invalid record",1:"")
"RTN","GMRVER0",20,0)
 . I GER(2)'="" S GREASON=GREASON_$S(GREASON'="":", ",1:"")_GER(2)
"RTN","GMRVER0",21,0)
 .Q
"RTN","GMRVER0",22,0)
 K GER Q
"RTN","GMRVER0",23,0)
WRTDAT(TYPE,DATA) ;
"RTN","GMRVER0",24,0)
 I '((TYPE="BP")!(TYPE="P")!(TYPE="R")),DATA>0 D @TYPE
"RTN","GMRVER0",25,0)
 Q DATA
"RTN","GMRVER0",26,0)
T S DATA=DATA_" F  ("_$J(+DATA-32*5/9,0,1)_" C)" Q
"RTN","GMRVER0",27,0)
WT S DATA=DATA_" lb  ("_$J(DATA/2.2,0,2)_" kg)" Q
"RTN","GMRVER0",28,0)
HT S DATA=$S(DATA\12:DATA\12_" ft ",1:"")_$S(DATA#12:DATA#12_" in",1:"")_" ("_$J(DATA*2.54,0,2)_" cm)" Q
"RTN","GMRVER0",29,0)
CG S DATA=DATA_" in ("_$J(+DATA/.3937,0,2)_" cm)" Q
"RTN","GMRVER0",30,0)
CVP S DATA=DATA_" cmH2O ("_$J(DATA/1.36,0,1)_" mmHg)" Q
"RTN","GMRVER0",31,0)
PO2 S DATA=DATA_"%" Q
"RTN","GMRVER0",32,0)
PN I DATA=0 S DATA=DATA_" No pain " Q
"RTN","GMRVER0",33,0)
 I DATA=99 S DATA=DATA_" Unable to respond " Q
"RTN","GMRVER0",34,0)
 I DATA=10 S DATA=DATA_" Worst imaginable pain " Q
"RTN","GMRVER0",35,0)
 Q
"RTN","GMRVER1")
0^14^B25699729
"RTN","GMRVER1",1,0)
GMRVER1 ;HIRMFO/RM,YH-REPORT OF VITALS ENTERED IN ERROR FOR A PATIENT ;2/7/99
"RTN","GMRVER1",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVER1",3,0)
EN1 ; ENTRY TO REPORT FROM TASKMAN
"RTN","GMRVER1",4,0)
 D DEM^VADPT D NOW^%DTC S Y=% X ^DD("DD") S GMRPDT=$P(Y,"@")_" ("_$P($P(Y,"@",2),":",1,2)_")",(GMROUT,GMRPG)=0,GMR1ST=1,$P(GMRDSH,"-",81)=""
"RTN","GMRVER1",5,0)
 F GMRVITY=0:0 S GMRVITY=$O(^GMR(120.5,"AA",DFN,GMRVITY)) Q:GMRVITY'>0  F GMRVDT=0:0 S GMRVDT=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT)) Q:GMRVDT'>0  S GMRVDATE=9999999-GMRVDT I GMRVDATE'<GMRVSDT,GMRVDATE'>GMRVFDT D SORT
"RTN","GMRVER1",6,0)
 U IO D HDR I $O(^TMP($J,0))'>0 W !,"THERE IS NO DATA FOR THIS REPORT" G QT
"RTN","GMRVER1",7,0)
 F GMRDATE=0:0 S GMRDATE=$O(^TMP($J,GMRDATE)) Q:GMRDATE'>0!GMROUT  F GMRVITY=0:0 S GMRVITY=$O(^TMP($J,GMRDATE,GMRVITY)) Q:GMRVITY'>0!GMROUT  F GMRVDA=0:0 S GMRVDA=$O(^TMP($J,GMRDATE,GMRVITY,GMRVDA)) Q:GMRVDA'>0  D WRT Q:GMROUT
"RTN","GMRVER1",8,0)
QT ;
"RTN","GMRVER1",9,0)
 I IOSL'<($Y+8) F X=1:1 W ! Q:IOSL<($Y+8)
"RTN","GMRVER1",10,0)
 I 'GMROUT,$E(IOST)'="P" W !!,"Press return to continue ""^"" to escape " R X:DTIME
"RTN","GMRVER1",11,0)
Q ; KILL VARIBLES
"RTN","GMRVER1",12,0)
 S:$D(ZTQUEUED) ZTREQ="@" K ^TMP($J),DFN,GMR1ST,GMRDAT,GMRDATE,GMRDSH,GMROUT,GMRPDT,GMRPG,GMRPR,GMRSITE,GMRVDA,GMRVDATE,GMRVDT,GMRVERR,GMRVFDT,GMRVITY,GMRVSDT,GMRVX,POP,DIPGM,GMRP,GMRTYPE,GMROV,DIPGM,%T D KVAR^VADPT K VA W:$E(IOST)'="C" @IOF
"RTN","GMRVER1",13,0)
 K GREASON,GMRZZ,GMRVARY,GX,GMRQUAL D ^%ZISC Q
"RTN","GMRVER1",14,0)
SORT ;
"RTN","GMRVER1",15,0)
 F GMRVERR=0:0 S GMRVERR=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT,GMRVERR)) Q:GMRVERR'>0  I '$D(^GMR(120.5,GMRVERR,2)) Q
"RTN","GMRVER1",16,0)
 F GMRVDA=0:0 S GMRVDA=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT,GMRVDA)) Q:GMRVDA'>0  I $D(^GMR(120.5,GMRVDA,2)) S ^TMP($J,GMRVDATE,GMRVITY,GMRVDA)=GMRVERR
"RTN","GMRVER1",17,0)
 Q
"RTN","GMRVER1",18,0)
WRT ;
"RTN","GMRVER1",19,0)
 D:IOSL<($Y+8) HDR Q:GMROUT  K GMRPR
"RTN","GMRVER1",20,0)
 S GMRVERR=^TMP($J,GMRDATE,GMRVITY,GMRVDA),GMRDAT("GOOD")=$S($D(^GMR(120.5,+GMRVERR,0)):^(0),1:"")
"RTN","GMRVER1",21,0)
 I $D(^GMR(120.5,+GMRVERR,0)) D
"RTN","GMRVER1",22,0)
 . K GMRVX S GMRVX=$P(^GMRD(120.51,GMRVITY,0),"^",2),GMRVX(0)=$P(GMRDAT("GOOD"),"^",8) D:GMRVX(0)>0 EN1^GMRVSAS0 S GMRVX(1)=$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*")
"RTN","GMRVER1",23,0)
 . S GMRVX(0)=$$WRTDAT^GMRVER0(GMRVX,GMRVX(0))
"RTN","GMRVER1",24,0)
 . S GMRZZ="" I $P($G(^GMR(120.5,GMRVERR,5,0)),"^",4)>0 K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GMRVERR,.GMRVARY,GMRVITY) S GMRZZ=$$WRITECH^GMRVCHAR(GMRVERR,.GMRVARY,9) S:GMRZZ'=""&(GMRVX'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMRVER1",25,0)
 . S $P(GMRDAT("GOOD"),"^",8)=GMRVX(0)_GMRVX(1)_$S($P(^GMR(120.5,GMRVERR,0),"^",10)'="":" with supplemental O2 "_$P($P(^(0),"^",10)," l/min")_"L/min"_$P($P(^(0),"^",10)," l/min",2),1:"")_$S(GMRZZ'=""&(GMRVX="PO2"):" via ",1:"")_GMRZZ
"RTN","GMRVER1",26,0)
 . Q
"RTN","GMRVER1",27,0)
 I $D(^GMR(120.5,+GMRVDA,0)) D
"RTN","GMRVER1",28,0)
 . S GMRDAT("BAD")=$S($D(^GMR(120.5,+GMRVDA,0)):^(0),1:"")
"RTN","GMRVER1",29,0)
 . K GMRVX,GMRVX(0),GMRVX(1) S GMRVX=$P(^GMRD(120.51,GMRVITY,0),"^",2),GMRVX(0)=$P(GMRDAT("BAD"),"^",8) D:GMRVX(0)>0 EN1^GMRVSAS0 S GMRVX(1)=$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*")
"RTN","GMRVER1",30,0)
 . S GMRVX(0)=$$WRTDAT^GMRVER0(GMRVX,GMRVX(0))
"RTN","GMRVER1",31,0)
 . S GMRZZ="" I $P($G(^GMR(120.5,GMRVDA,5,0)),"^",4)>0 K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GMRVDA,.GMRVARY,GMRVITY) S GMRZZ=$$WRITECH^GMRVCHAR(GMRVDA,.GMRVARY,9) S:GMRZZ'=""&(GMRVX'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMRVER1",32,0)
 . S $P(GMRDAT("BAD"),"^",8)=GMRVX(0)_GMRVX(1)_$S($P(^GMR(120.5,GMRVDA,0),"^",10)'="":" with O2 "_$P($P(^(0),"^",10)," l/min")_"L/min"_$P($P(^(0),"^",10)," l/min",2),1:"")_$S(GMRZZ'=""&(GMRVX="PO2"):" via ",1:"")_GMRZZ
"RTN","GMRVER1",33,0)
 . S GREASON="" D ERREASON^GMRVER0
"RTN","GMRVER1",34,0)
 S Y=GMRDATE D D^DIQ S GMRPR("VSDT")=Y
"RTN","GMRVER1",35,0)
 S GMRPR("ENUS")=$S($P(GMRDAT("BAD"),"^",6)="":"",$D(^VA(200,$P(GMRDAT("BAD"),"^",6),0)):$E($P(^(0),"^"),1,21),1:"")
"RTN","GMRVER1",36,0)
 S GMRPR("TYPE")=$S(GMRVITY="":"",$D(^GMRD(120.51,GMRVITY,0)):$P(^(0),"^"),1:"")
"RTN","GMRVER1",37,0)
 W !,GMRPR("VSDT"),?21,GMRPR("TYPE"),?58,GMRPR("ENUS"),!,?3,"Reason: ",GREASON
"RTN","GMRVER1",38,0)
 I $G(GMRVERR)>0 W !,?3,"(Revised)  ",$P(GMRDAT("GOOD"),"^",8)
"RTN","GMRVER1",39,0)
 I GMRVX="PN" D
"RTN","GMRVER1",40,0)
 . I $P(GMRDAT("GOOD"),"^",8)=0 W " No pain" Q
"RTN","GMRVER1",41,0)
 . I $P(GMRDAT("GOOD"),"^",8)=99 W " Unable to respond" Q
"RTN","GMRVER1",42,0)
 . I $P(GMRDAT("GOOD"),"^",8)=10 W " Worst imaginable pain" Q
"RTN","GMRVER1",43,0)
 I GMRVDA>0 W !,?3,"(Bad data)  ",$P(GMRDAT("BAD"),"^",8)
"RTN","GMRVER1",44,0)
 I GMRVX="PN" D
"RTN","GMRVER1",45,0)
 . I $P(GMRDAT("BAD"),"^",8)=0 W " No pain" Q
"RTN","GMRVER1",46,0)
 . I $P(GMRDAT("BAD"),"^",8)=99 W " Unable to respond" Q
"RTN","GMRVER1",47,0)
 . I $P(GMRDAT("BAD"),"^",8)=10 W " Worst imaginable pain" Q
"RTN","GMRVER1",48,0)
 W ! Q
"RTN","GMRVER1",49,0)
HDR ;
"RTN","GMRVER1",50,0)
 I $E(IOST)'="P",'GMR1ST W !,"Press return to continue ""^"" to escape " R X:DTIME I X="^"!'$T S GMROUT=1 Q
"RTN","GMRVER1",51,0)
 W:'($E(IOST)'="C"&'GMRPG) @IOF S GMR1ST=0,GMRPG=GMRPG+1
"RTN","GMRVER1",52,0)
 W !,GMRPDT,?22,"ENTERED IN ERROR VITAL/MEASUREMENT REPORT",?70,"PAGE ",GMRPG
"RTN","GMRVER1",53,0)
 W !,"Patient: ",VADM(1),?$X+5,$P(VADM(2),"^",2),!!,"Date Vit./Meas. taken",?58,"User who made error",!,GMRDSH,!
"RTN","GMRVER1",54,0)
 Q
"RTN","GMRVGR0")
0^15^B14916806
"RTN","GMRVGR0",1,0)
GMRVGR0 ;HIRMFO/MH,YH-VITALS GRAPH (PART 1) ;2/3/99
"RTN","GMRVGR0",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVGR0",3,0)
EN1 ;ENTRY POINT FROM GMRVSR0 TO PRINT SF-511 GRAPH FOR KYOCERA
"RTN","GMRVGR0",4,0)
 S GMRHT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVGR0",5,0)
 S (GMROUT,GHT)="",^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMRVGR0",6,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMRVGR0",7,0)
 F GTYPE="B","H","P","R","T","W","PO2","CVP","CG","PN" D SETT
"RTN","GMRVGR0",8,0)
 S GRPT=5 D SETIO U IO D ^GMRVGR1
"RTN","GMRVGR0",9,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMRVGR0",10,0)
 W:$E(IOST)="P"!$D(IO("S")) !
"RTN","GMRVGR0",11,0)
 D QIO^GMRVGR5 K GRPT,GMROUT,GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GHT,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMRVGR0",12,0)
 K GLINE,GMRQUAL,^TMP($J,"GTNM") Q
"RTN","GMRVGR0",13,0)
SETT ;SET GMRT
"RTN","GMRVGR0",14,0)
 S GTYP(1)=$S(GTYPE="B":"BLOOD PRESSURE",GTYPE="P":"PULSE",GTYPE="R":"RESPIRATION",GTYPE="T":"TEMPERATURE",GTYPE="H":"HEIGHT",GTYPE="W":"WEIGHT",GTYPE="CG":"CIRCUMFERENCE/GIRTH",GTYPE="PO2":"PULSE OXIMETRY",1:"")
"RTN","GMRVGR0",15,0)
 I GTYP(1)="" S GTYP(1)=$S(GTYPE="CVP":"CENTRAL VENOUS PRESSURE",GTYPE="PN":"PAIN",1:"")
"RTN","GMRVGR0",16,0)
 Q:GTYP(1)=""
"RTN","GMRVGR0",17,0)
 S GTYP=$O(^GMRD(120.51,"B",GTYP(1),""))
"RTN","GMRVGR0",18,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR
"RTN","GMRVGR0",19,0)
 Q
"RTN","GMRVGR0",20,0)
BLDARR S GDATA=$S($D(^GMR(120.5,GEN,0)):^(0),1:"")
"RTN","GMRVGR0",21,0)
 S GMRVX=GTYPE,GMRVX(0)=$P(GDATA,"^",8),GMRVX(1)=0  D:GMRVX(0)>0!(GMRVX(0)<0)!($E(GMRVX(0))="0") EN1^GMRVSAS0
"RTN","GMRVGR0",22,0)
 K GMRVARY S GMRVARY="" I $P($G(^GMR(120.5,GEN,5,0)),"^",4)>0 D CHAR^GMRVCHAR(GEN,.GMRVARY,GTYP)
"RTN","GMRVGR0",23,0)
 K GG S GG="" I $O(GMRVARY(0)) D
"RTN","GMRVGR0",24,0)
 . S GG(1)=0 F  S GG(1)=$O(GMRVARY(GG(1))) Q:GG(1)'>0  S GG(2)=0 F  S GG(2)=$O(GMRVARY(GG(1),GG(2))) Q:GG(2)'>0  S GG(3)="" F  S GG(3)=$O(GMRVARY(GG(1),GG(2),GG(3))) Q:GG(3)=""  S GG=GG_$S(GG="":"",1:";")_GG(3)
"RTN","GMRVGR0",25,0)
 S ^TMP($J,"GMRVG",GTYPE,9999999-GX,$P(GDATA,"^",8))=GG_"^"_$S($G(GMRVX(1))>0:1,1:"")_"^^"_$P(GDATA,"^",10)
"RTN","GMRVGR0",26,0)
 S:$D(^TMP($J,"GMRVG","H",9999999-GX,$P(GDATA,"^",8))) GHT=$P(GDATA,"^",8)
"RTN","GMRVGR0",27,0)
 I GTYPE="B",$P(GDATA,"^",8)'>0 S ^TMP($J,"GMRVG","B",9999999-GX,$P(GDATA,"^",8))="^^"
"RTN","GMRVGR0",28,0)
 I GTYPE="B",$L($P(GDATA,"^",8))>7,+$P(GDATA,"^",8)>0 D
"RTN","GMRVGR0",29,0)
 . S ^TMP($J,"GMRVG","B",9999999-GX,$P($P(GDATA,"^",8),"/",1,2))=^TMP($J,"GMRVG","B",9999999-GX,$P(GDATA,"^",8)) K ^($P(GDATA,"^",8)) S ^TMP($J,"GMRVG","C",9999999-GX,"/"_$P($P(GDATA,"^",8),"/",3))=GG
"RTN","GMRVGR0",30,0)
 K GG Q 
"RTN","GMRVGR0",31,0)
SETIO ;
"RTN","GMRVGR0",32,0)
 S X="GMRYRP0" X ^%ZOSF("TEST") Q:'$T
"RTN","GMRVGR0",33,0)
 D IO^GMRVGR5
"RTN","GMRVGR0",34,0)
 D SETIOAR
"RTN","GMRVGR0",35,0)
 Q
"RTN","GMRVGR0",36,0)
SETIOAR F GTYPE1="XI"_($P(^GMRD(126.56,0),"^",4)+4),"XO"_($P(^GMRD(126.58,0),"^",4)+1) F GDT=0:0 S GDT=$O(^TMP($J,"GMR",GTYPE1,GDT)) Q:GDT'>0  F GDTA=0:0 S GDTA=$O(^TMP($J,"GMR",GTYPE1,GDT,GDTA)) Q:GDTA=""  D SETIOAR1
"RTN","GMRVGR0",37,0)
 Q
"RTN","GMRVGR0",38,0)
SETIOAR1 S:GTYPE1["XI" ^TMP($J,"GMRVG","I",GDT,GDTA)="^" S:GTYPE1["XO" ^TMP($J,"GMRVG","O",GDT,GDTA)="^"
"RTN","GMRVGR0",39,0)
 Q
"RTN","GMRVHG0")
0^16^B14385631
"RTN","GMRVHG0",1,0)
GMRVHG0 ;HIRMFO/YH-HP LASER SF 511 GRAPH - DATA ARRAY ;2/2/99
"RTN","GMRVHG0",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVHG0",3,0)
EN1 ;ENTRY POINT FROM GMRVSR0 TO PRINT SF-511 GRAPH FOR HP-3/4
"RTN","GMRVHG0",4,0)
 S GMRHT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVHG0",5,0)
 S (GMROUT,GHT)="",^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMRVHG0",6,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMRVHG0",7,0)
 F GTYPE="B","H","P","R","T","W","PO2","CVP","CG","PN" D SETT^GMRVGR0
"RTN","GMRVHG0",8,0)
 S GRPT=5 D SETIO^GMRVGR0 U IO D GRAPH
"RTN","GMRVHG0",9,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMRVHG0",10,0)
 D QIO^GMRVGR5 K GRPT,GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GHT,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMRVHG0",11,0)
 K GLINE,GMRQUAL,^TMP($J,"GTNM") Q
"RTN","GMRVHG0",12,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMRVGR1
"RTN","GMRVHG0",13,0)
 F GK="H","W","T","P","R","B","I","O","PO2","CVP","CG","PN" D
"RTN","GMRVHG0",14,0)
 . S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMRVHG0",15,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMRVHG0",16,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMRVHG0",17,0)
 F GPGS=1:1:GPG D
"RTN","GMRVHG0",18,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D ^GMRVHG1 D
"RTN","GMRVHG0",19,0)
 . . S ^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6,^TMP($J,"GMRK","G210M")=0.2,^TMP($J,"GMRK","G226M")=0.2
"RTN","GMRVHG0",20,0)
 D KVAR^VADPT K VA,GRAPHT,GRAPHP,GRAPHS,GRAPHD,GPA Q
"RTN","GMRVHG0",21,0)
PAGE ;SET GRAPH DATA
"RTN","GMRVHG0",22,0)
 ;DATA FOR T GRAPH
"RTN","GMRVHG0",23,0)
 K GRAPHT S GRAPHT=0,I=1,J=411,GPA=0 F GI=50:1:59 S GRAPHT=0.4+((I-1)*1.6) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMRVHG0",24,0)
 .S GRAPHT(I)=$S(GPA=0:"PA",1:"PD")_GRAPHT_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMRVHG0",25,0)
 ;DATA FOR P GRAPH
"RTN","GMRVHG0",26,0)
 K GRAPHP S GRAPHP=0,I=1,J=431,GPA=0 F GI=82:1:92 S GRAPHP=0.6+((I-1)*1.6) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMRVHG0",27,0)
 .S GRAPHP(I)=$S(GPA=0:"PA",1:"PD")_GRAPHP_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMRVHG0",28,0)
 I $D(GMRQUAL) D LEGEND^GMRVLGQU
"RTN","GMRVHG0",29,0)
 K GMRQUAL,GG,GI,GMRVJ,GSYNO,GHOLD Q
"RTN","GMRVHG0",30,0)
DATE S GHOLD="" F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMRVHG0",31,0)
 Q
"RTN","GMRVHG0",32,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMRVHG0",33,0)
 Q
"RTN","GMRVHG0",34,0)
SETD F GI="H","W","T","P","R","B","I","O","C" S GJ=$F("WTXPXRBIOCHDS",GI),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMRVHG4
"RTN","GMRVHG0",35,0)
 F GI="PO2","CVP","CG","PN" S GJ=0,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMRVHG4
"RTN","GMRVHG0",36,0)
 Q
"RTN","GMRVHG0",37,0)
SETP ;INITIALIZE ^TMP FOR HEIGHT AND V/M QUALIFIERS
"RTN","GMRVHG0",38,0)
 ;470 - STORE HEIGHT IN INCH  1100 - STORE HEIGHT IN CM
"RTN","GMRVHG0",39,0)
 ;1200 - STORE WEIGHT IN KG    1300 - STORE BODY MASS INDEX
"RTN","GMRVHG0",40,0)
 ; 410 - STORE T*   430 - STORE P*   450 - STORE BP QUALIFIER
"RTN","GMRVHG0",41,0)
 ;1400+I - PULSE OXIMETRY DATA  1430+I - PULSE OX. L/MIN
"RTN","GMRVHG0",42,0)
 ;1450+I - PULSE OX. %  1470+I - PULSE OX. METHOD
"RTN","GMRVHG0",43,0)
 ;1500+I - CVP DATA IN CM H2O  1530+I - CVP DATA IN MMHG
"RTN","GMRVHG0",44,0)
 ;1550+I - C/G DATA IN INCH  1570+I - C/G QUALIFIER  1600+I - PULSE QUALIFIER
"RTN","GMRVHG0",45,0)
 ;1620+I - C/G DATA IN CM  1640+I - THE THIRD PIECE OF BP
"RTN","GMRVHG0",46,0)
 ;1660+I - PAIN
"RTN","GMRVHG0",47,0)
 F I=1:1:10 D
"RTN","GMRVHG0",48,0)
 . S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(430+I)),^("G"_(450+I)),^("G"_(470+I)),^("G"_(1100+I)),^("G"_(1200+I)),^("G"_(1300+I)),^("G"_(1640+I)))=""
"RTN","GMRVHG0",49,0)
 . S (^TMP($J,"GMRK","G"_(1400+I)),^("G"_(1430+I)),^("G"_(1450+I)),^("G"_(1470+I)),^("G"_(1500+I)),^("G"_(1530+I)),^("G"_(1550+I)),^("G"_(1570+I)))=""
"RTN","GMRVHG0",50,0)
 . S (^TMP($J,"GMRK","G"_(1600+I)),^("G"_(1620+I)),^("G"_(1660+I)))=""
"RTN","GMRVHG0",51,0)
 Q
"RTN","GMRVHG1")
0^17^B13380359
"RTN","GMRVHG1",1,0)
GMRVHG1 ;HIRMFO/YH-HP LASER SF511 GRAPH - FORM ;2/3/99
"RTN","GMRVHG1",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVHG1",3,0)
EN1 ;RESET PRINTER, SET PAGE SIZE (PORTRAIT) AND PCL PICTURE FRAME 8 1/2"*11"
"RTN","GMRVHG1",4,0)
 W !,$CHAR(27),"E",$CHAR(27),"&l1E",$CHAR(27),"*c5952x7920Y",$CHAR(27),"%0B"
"RTN","GMRVHG1",5,0)
 W !,"IN;SP1;IP;SC-3,18,-15,13,1;PW.15;PA0,0;FT3,1;RR16,14;PW.3;EA16,14;PA-3,-9.2;EA16,0;"
"RTN","GMRVHG1",6,0)
 W !,"PW.3;PA0,0;PD0,-9.2;"
"RTN","GMRVHG1",7,0)
 S I(1)="" F I=1:1:5 S I(1)=I(1)_"PU"_(1.6*I)_",13;PD"_(1.6*I)_",-9.2;"
"RTN","GMRVHG1",8,0)
 W !,I(1)
"RTN","GMRVHG1",9,0)
 S I(1)="PW.15" F I=6:1:9 S I(1)=I(1)_"PU"_(1.6*I)_",13;PD"_(1.6*I)_",-9.2;"
"RTN","GMRVHG1",10,0)
 W !,I(1) K I
"RTN","GMRVHG1",11,0)
 W !,"PU-3,-9.2;PD16,-9.2;PU-3,-8.8;PD16,-8.8;PU16,-8.4;PD-3,-8.4;PU;"
"RTN","GMRVHG1",12,0)
 W !,"PA16,-8.0;PD-3,-8.0;PU-3,-7.6;PD16,-7.6;PU16,-7.2;PD-3,-7.2;PU-3,-6.8;PD16,-6.8;PU-3,-6.4;PD16,-6.4;PU16,-6.0;PD-3,-6.0;" W !,"PU-3,-5.6;PD16,-5.6;PU16,-5.2;PD-3,-5.2;"
"RTN","GMRVHG1",13,0)
  W !,"PU-3,-4.8;PD16,-4.8;PU16,-4.4;PD-3,-4.4;PU-3,-3.2;PD16,-3.2;PU16,-2.8;PD-3,-2.8;PU-3,-2.4;PD16,-2.4;PU16,-2.0;PD-3,-2.0;"
"RTN","GMRVHG1",14,0)
 W !,"PU-3,-1.6;PD16,-1.6;PU16,-1.2;PD-3,-1.2;PU-3,-0.4;PD16,-0.4;PU;"
"RTN","GMRVHG1",15,0)
 W !,"PW.3;PA0,5.6;PD16,5.6;PU;"
"RTN","GMRVHG1",16,0)
LABEL ;PRINT LABEL
"RTN","GMRVHG1",17,0)
 W !,"DT#,1;"
"RTN","GMRVHG1",18,0)
 W !,"SD1,277,2,1,4,10,5,1,6,5,7,4;SS;LO12;"
"RTN","GMRVHG1",19,0)
 W !,"PA-2,12.5;LBDate/Time#;PA-3,11.8;LB Pulse   Temp/F/C#;"
"RTN","GMRVHG1",20,0)
 W !,"PA-3,11;LB150#;PA-1.6,11,LB104/40.0#;" W !,"PA-3,10;LB140#;PA-1.6,10;LB103/39.4#;PA-3,9;LB130#;PA-1.6,9;LB102/38.9#;"
"RTN","GMRVHG1",21,0)
 W !,"PA-3,8;LB120#;PA-1.6,8;LB101/38.3#;PA-3,7;LB110#;PA-1.6,7;LB100/37.8#;"
"RTN","GMRVHG1",22,0)
 W !,"PA-3,6;LB100#;PA-1.6,6;LB 99/37.2#;PA-1.6,5.6;LB 98.6#;"
"RTN","GMRVHG1",23,0)
 W !,"PA-3,5;LB 90#;PA-1.6,5;LB 98/36.7#;PA-3,4;LB 80#;PA-1.6,4;LB 97/36.1#;PA-3,3;LB 70#;PA-1.6,3;LB 96/35.6#;"
"RTN","GMRVHG1",24,0)
 W !,"PA-3,2;LB 60#;PA-1.6,2;LB 95/35.0#;PA-3,1;LB 50#;PA-1.6,1;LB 94#;"
"RTN","GMRVHG1",25,0)
 ;LABEL THE LOWER BOX
"RTN","GMRVHG1",26,0)
 W !,"SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO11;PA-3,-0.3;LBTemperature#;PA-3,-0.7;LBPulse#;PA-3,-1.5;LBRespiration#;PA-3,-1.9;LBPulse Ox.#;"
"RTN","GMRVHG1",27,0)
 W !,"PA-3,-2.3;LB  L/Min#;PA-3,-2.7;LB  %#;"
"RTN","GMRVHG1",28,0)
 W !,"PA-3,-3.1;LB  Method#;PA-3,-3.5;LBBlood Pressure#;"
"RTN","GMRVHG1",29,0)
 W !,"PA-3,-4.7;LBWeight (lb)#;PA-3,-5.1;LB         (kg)#;PA-3,-5.5;LBBody Mass Index#;"
"RTN","GMRVHG1",30,0)
 W !,"PA-3,-5.9;LBHeight (in)#;PA-3,-6.3;LB         (cm)#;PA-3,-6.7;LBC/G (in)#;PA-2.5,-7.1;LB(cm)#;PA-3,-7.5;LBCVP#;PA-2,-7.5;LB(cm H2O)#;"
"RTN","GMRVHG1",31,0)
 W !,"PA-2,-7.9;LB(mm Hg)#;"
"RTN","GMRVHG1",32,0)
 W !,"PA-3,-8.3;LBIntake (24hr)(cc)#;PA-3,-8.7;LBOutput (24hr)(cc)#;"
"RTN","GMRVHG1",33,0)
 W !,"PA-3,-9.1;LBPain#;"
"RTN","GMRVHG1",34,0)
 W !,"PA-3,-9.6;LBT: Temperature     P: Pulse     C/G: Circumference/Girth     * - Abnormal value     **- Abnormal value off of graph#;"
"RTN","GMRVHG1",35,0)
 W !,"PA-3,-9.9;LBPAIN: 99 - Unable to respond  0 - No pain  10 - Worst imaginable pain#;"
"RTN","GMRVHG1",36,0)
 W !,"PA-3,-10.3;LB"_$E($G(GLINE(1)),1,100)_"#;" W !,"LB"_$E($G(GLINE(1)),101,180)_"#;"
"RTN","GMRVHG1",37,0)
 W !,"PA-3,-10.6;LB"_$E($G(GLINE(2)),1,100)_"#;" W !,"LB"_$E($G(GLINE(2)),101,180)_"#;"
"RTN","GMRVHG1",38,0)
 W !,"PA-3,-10.9;LB"_$E($G(GLINE(3)),1,100)_"#;" W !,"LB"_$E($G(GLINE(3)),101,180)_"#;"
"RTN","GMRVHG1",39,0)
 W !,"PA-3,-11.2;LB"_$E($G(GLINE(4)),1,100)_"#;" W !,"LB"_$E($G(GLINE(4)),101,180)_"#;"
"RTN","GMRVHG1",40,0)
 W 1,"PA-3,-11.5;LB"_$E($G(GLINE(5)),1,100)_"#;" W !,"LB"_$E($G(GLINE(5)),101,180)_"#;"
"RTN","GMRVHG1",41,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA12,-11.7;LBVITAL FLOW SHEET#;"
"RTN","GMRVHG1",42,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA12,-11.3;LBMEDICAL RECORD#;PA12,-12.1;LBVAF 10-7987 VICE SF 511#;"
"RTN","GMRVHG1",43,0)
 I GTNM=0 W !,"PA3,10;LBTHERE  IS  NO  DATA  FOR  THIS  PERIOD#;"
"RTN","GMRVHG1",44,0)
 W "SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO7;PU;" S I=0 F  S I=$O(GRAPHT(I)) Q:I'>0  W !,GRAPHT(I)
"RTN","GMRVHG1",45,0)
 W "PU;" S I=0 F  S I=$O(GRAPHP(I)) Q:I'>0  W !,GRAPHP(I)
"RTN","GMRVHG1",46,0)
 W !,"PU;LO1;" D EN1^GMRVHG2
"RTN","GMRVHG1",47,0)
 ;ENTER PCL MODE, RESET PRINTER AND EJECT PAGE
"RTN","GMRVHG1",48,0)
Q1 ;
"RTN","GMRVHG1",49,0)
 W !,"PA-3,18;",$CHAR(27),"&r0F",$CHAR(27),"%0A" K I,J Q
"RTN","GMRVHG4")
0^18^B17291547
"RTN","GMRVHG4",1,0)
GMRVHG4 ;HIRMFO/YH-HP LASER SF 511 GRAPH - ^TMP DATA ;2/3/99
"RTN","GMRVHG4",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVHG4",3,0)
SETA ;
"RTN","GMRVHG4",4,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMRVHG4",5,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMRVHG4",6,0)
 I GK'="" D
"RTN","GMRVHG4",7,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMRVHG4",8,0)
 . I GMRSITE(1)'="" D SYNOARY^GMRVLGQU
"RTN","GMRVHG4",9,0)
 I GI="H" S ^TMP($J,"GMRK","G"_(470+GCNTD))=GK_" "_GMRSITE,^TMP($J,"GMRK","G"_(1100+GCNTD))=$S(GK>0:$J(GK*2.54,0,2),1:"") S:GK>0 GMRHT=GK*2.54/100 Q
"RTN","GMRVHG4",10,0)
 I GI="PN" S ^TMP($J,"GMRK","G"_(1660+GCNTD))=GK
"RTN","GMRVHG4",11,0)
 I GI="C" S ^TMP($J,"GMRK","G"_(1640+GCNTD))=GK_"  "_^TMP($J,"GMRK","G"_(1640+GCNTD)) Q
"RTN","GMRVHG4",12,0)
 I GI="PO2"!(GI="CVP")!(GI="CG") D  Q
"RTN","GMRVHG4",13,0)
 . I GI="PO2" D
"RTN","GMRVHG4",14,0)
 . . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMRVLGQU(.GMRINF)
"RTN","GMRVHG4",15,0)
 . . S ^TMP($J,"GMRK","G"_(1400+GCNTD))=GK_$S(GMRVJ=1:"*",1:"")
"RTN","GMRVHG4",16,0)
 . . S ^TMP($J,"GMRK","G"_(1430+GCNTD))=GMRINF(1)
"RTN","GMRVHG4",17,0)
 . . S ^TMP($J,"GMRK","G"_(1450+GCNTD))=GMRINF(2)
"RTN","GMRVHG4",18,0)
 . . S ^TMP($J,"GMRK","G"_(1470+GCNTD))=GMRSITE
"RTN","GMRVHG4",19,0)
 . . Q
"RTN","GMRVHG4",20,0)
 . I GI="CVP" D
"RTN","GMRVHG4",21,0)
 . . S ^TMP($J,"GMRK","G"_(1500+GCNTD))=$S(GK>0!(GK<0):$J(GK,0,1),1:GK)_$S(GMRVJ=1:"*",1:"")
"RTN","GMRVHG4",22,0)
 . . S ^TMP($J,"GMRK","G"_(1530+GCNTD))=$S(GK>0!(GK<0)!($E(GK)="0"):$J(GK/1.36,0,1),1:"")_$S(GMRVJ=1:"*",1:"")
"RTN","GMRVHG4",23,0)
 . . Q
"RTN","GMRVHG4",24,0)
 . I GI="CG" D
"RTN","GMRVHG4",25,0)
 . . S ^TMP($J,"GMRK","G"_(1550+GCNTD))=GK_GMRSITE,^TMP($J,"GMRK","G"_(1620+GCNTD))=$S(GK>0:$J(GK/.3937,0,2),1:"")
"RTN","GMRVHG4",26,0)
 . . Q
"RTN","GMRVHG4",27,0)
 I GI="B",GK'="" S ^TMP($J,"GMRK","G"_(450+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) S:$L(GMRSITE," ")>3 ^TMP($J,"GMRK","G"_(1640+GCNTD))=$P(GMRSITE," ")
"RTN","GMRVHG4",28,0)
 I '(GI="T"!(GI="P")) D  Q
"RTN","GMRVHG4",29,0)
 . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:"")_$S(GI="B":"",1:GMRSITE) S:GI="W" ^TMP($J,"GMRK","G"_(1200+GCNTD))=$S(GK>0:$J(GK/2.2,0,2),1:"")
"RTN","GMRVHG4",30,0)
 . I GI="W",GK>0 D
"RTN","GMRVHG4",31,0)
 . . S GMRBMI="",GMRBMI(1)=GDT1,GMRBMI(2)=GK D CALBMI^GMRVBMI(.GMRBMI)
"RTN","GMRVHG4",32,0)
 . . S ^TMP($J,"GMRK","G"_(1300+GCNTD))=GMRBMI K GMRBMI
"RTN","GMRVHG4",33,0)
 S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(GK>0:$S(GI="T":GK-93,GI="P":GK-40/10,1:""),1:""),^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:"")_$S(GI="T":GMRSITE,GI="P"&($L(GMRSITE," ")>3):"  "_$P(GMRSITE," "),1:" ")
"RTN","GMRVHG4",34,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(410+GCNTD))=$S(GMRVJ=1:"T*",1:"T")
"RTN","GMRVHG4",35,0)
 I GI="P",GK>0 S ^TMP($J,"GMRK","G"_(430+GCNTD))=$S(GMRVJ=1:"P*",1:"P"),^TMP($J,"GMRK","G"_(1600+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)
"RTN","GMRVHG4",36,0)
 I GK>0,GI="T" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<0.3:0.3,^("G"_(GJ*16+GCNTD+1))>11.6:11.6,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<0.4!(^("G"_(GJ*16+GCNTD+1))>11.5) ^TMP($J,"GMRK","G"_(410+GCNTD))="T**"
"RTN","GMRVHG4",37,0)
 I GK>0,GI="P" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<0.3:0.3,^("G"_(GJ*16+GCNTD+1))>11.6:11.6,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<0.4!(^("G"_(GJ*16+GCNTD+1))>11.5) ^TMP($J,"GMRK","G"_(430+GCNTD))="P**"
"RTN","GMRVHG4",38,0)
 Q
"RTN","GMRVHG4",39,0)
OUTP ;PRINT OUTPUT
"RTN","GMRVHG4",40,0)
 S J=-8.7,J(1)=162 D WRTLN^GMRVHG3
"RTN","GMRVHG4",41,0)
PAIN ;PRINT PAIN
"RTN","GMRVHG4",42,0)
 S J=-9.1,J(1)=1661 D
"RTN","GMRVHG4",43,0)
 . S I(1)="" F I=1:1:5 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMRVHG4",44,0)
 . W !,I(1) S I(1)="" F I=6:1:10 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMRVHG4",45,0)
 . W !,I(1) Q
"RTN","GMRVHG4",46,0)
PTID ;PRINT PATIENT ID
"RTN","GMRVHG4",47,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA-1,-11.3;LB"_^TMP($J,"GMRK","G194")_"#;PA-1,-11.6;LB"_^("G196")_"   "_^("G197")_"#;"
"RTN","GMRVHG4",48,0)
 W !,"PA-1,-11.9;LB"_^("G198")_"#;PA7,-11.9;LB"_^("G200")_"#;PA-1,-12.2;LB"_GMRDIV_"#;PA7,-12.2;LB"_^("G199")_"#;"
"RTN","GMRVHG4",49,0)
 W !,"PA-1,-12.5;LB"_GSTRFIN_"#;" Q
"RTN","GMRVHPN0")
0^19^B10604903
"RTN","GMRVHPN0",1,0)
GMRVHPN0 ;HIRMFO/YH-HP LASER PAIN CHART - DATA ARRAY ;2/6/99
"RTN","GMRVHPN0",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVHPN0",3,0)
EN1 ;ENTRY POINT FROM GMRVSR0 TO PRINT CHART FOR HP LASER PRINTER
"RTN","GMRVHPN0",4,0)
 S GMROUT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVHPN0",5,0)
 S GMROUT=0
"RTN","GMRVHPN0",6,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMRVHPN0",7,0)
 F GTYPE="PN" D SETT
"RTN","GMRVHPN0",8,0)
 U IO D GRAPH
"RTN","GMRVHPN0",9,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMRVHPN0",10,0)
 K GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMRVHPN0",11,0)
 K ^TMP($J,"GTNM") Q
"RTN","GMRVHPN0",12,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMRVGR1
"RTN","GMRVHPN0",13,0)
 S GK="PN",^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMRVHPN0",14,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMRVHPN0",15,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMRVHPN0",16,0)
 F GPGS=1:1:GPG D
"RTN","GMRVHPN0",17,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D EN2^GMRVHPN1
"RTN","GMRVHPN0",18,0)
 D KVAR^VADPT K VA,GRAPHR,GRAPHS,GRAPHD,GPA Q
"RTN","GMRVHPN0",19,0)
PAGE ;SET GRAPH DATA
"RTN","GMRVHPN0",20,0)
 ;DATA FOR PAIN CHART
"RTN","GMRVHPN0",21,0)
 K GRAPHR S GRAPHR=0,I=1,J=411,GPA=0 F GI=312:1:321 S GRAPHR=0.4+(1.6*(I-1)) S GK=^TMP($J,"GMRK","G"_GI) D:(GK'="")&(GK'=99)&("PASSREFUSEDUNAVAL"'[$$UP^XLFSTR(GK))  S I=I+1,J=J+1
"RTN","GMRVHPN0",22,0)
 .S GRAPHR(I)=$S(GPA=0:"PA",1:"PD")_GRAPHR_","_GK_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMRVHPN0",23,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMRVHPN0",24,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMRVHPN0",25,0)
 Q
"RTN","GMRVHPN0",26,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMRVHPN0",27,0)
 Q
"RTN","GMRVHPN0",28,0)
SETD S GI="PN",GJ=310,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMRVHPN2
"RTN","GMRVHPN0",29,0)
 Q
"RTN","GMRVHPN0",30,0)
SETP ;INITIALIZE ^TMP FOR QUALIFIERS
"RTN","GMRVHPN0",31,0)
 ; 410 - STORE PN*
"RTN","GMRVHPN0",32,0)
 F I=1:1:10 S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(311+I)),^("G"_(331+I)))=""
"RTN","GMRVHPN0",33,0)
 Q
"RTN","GMRVHPN0",34,0)
SETT S GTYP=$O(^GMRD(120.51,"B","PAIN",0))
"RTN","GMRVHPN0",35,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR^GMRVGR0
"RTN","GMRVHPN0",36,0)
 Q
"RTN","GMRVHPN1")
0^20^B4393857
"RTN","GMRVHPN1",1,0)
GMRVHPN1 ;HIRMFO/YH-HP LASER PAIN CHART - FORM ;2/6/99
"RTN","GMRVHPN1",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVHPN1",3,0)
EN1 ;RESET PRINTER, SET PAGE SIZE (PORTRAIT) AND PCL PICTURE FRAME 8 1/2"*11"
"RTN","GMRVHPN1",4,0)
EN2 ;
"RTN","GMRVHPN1",5,0)
 W !,$CHAR(27),"E",$CHAR(27),"&l1E",$CHAR(27),"*c5952x7920Y",$CHAR(27),"%0B"
"RTN","GMRVHPN1",6,0)
 W !,"IN;SP1;IP;SC-3,18,-16,12,1;PW.3;PA0,0;FT3,1;RR16,12;PW.3;PA0,-1;EA16,12;PA-3,-1;EA16,0;PW.15;PU;"
"RTN","GMRVHPN1",7,0)
 S I(1)="" F I=1:1:5 S I(1)=I(1)_"PU"_(1.6*I)_",12;PD"_(1.6*I)_",-1;"
"RTN","GMRVHPN1",8,0)
 W !,I(1)
"RTN","GMRVHPN1",9,0)
 S I(1)="" F I=6:1:9 S I(1)=I(1)_"PU"_(1.6*I)_",12;PD"_(1.6*I)_",-1;"
"RTN","GMRVHPN1",10,0)
 W !,I(1) K I
"RTN","GMRVHPN1",11,0)
 ;PRINT LABEL
"RTN","GMRVHPN1",12,0)
 W !,"PU;DT#,1;"
"RTN","GMRVHPN1",13,0)
 W !,"SD1,277,2,1,4,10,5,1,6,5,7,4;SS;LO12;PA-2,11.6;LBDate/Time#;"
"RTN","GMRVHPN1",14,0)
 W !,"PA-2,10.8;LBPain Scale#;PA-0.6,10;LB10#;PU0,11;PD16,11;PU16,10;PD0,10;PU-0.4,9;LB9#;"
"RTN","GMRVHPN1",15,0)
 W !,"PU0,9;PD16,9;PU16,8;PD0,8;PU-0.4,8;LB8#;PU0,7;PD16,7;PU16,6;PD0,6;"
"RTN","GMRVHPN1",16,0)
 W !,"PU-0.4,7;LB7#PU0,5;PD16,5;PU16,4;PD0,4;PU-0.4,6;LB6#;"
"RTN","GMRVHPN1",17,0)
 W !,"PU-0.4,5;LB5#;PU-0.4,4;LB4#;PU0,3;PD16,3;PU16,2;PD0,2;"
"RTN","GMRVHPN1",18,0)
 W !,"PU-0.4,3;LB3#;PU0,1;PD16,1;PU-0.4,2;LB2#;PU-0.4,1;LB1#;"
"RTN","GMRVHPN1",19,0)
 ;LABEL THE LOWER BOX
"RTN","GMRVHPN1",20,0)
 W !,"SS;LO11;PA-1,-0.9;LBPain#;"
"RTN","GMRVHPN1",21,0)
 W !,"PA0,-2;LB0 - No pain     10 - Worst imaginable pain     99 - Unable to respond#;"
"RTN","GMRVHPN1",22,0)
 W !,"SD1,277,2,1,4,11,5,1,6,5,7,4;SS;PA12,-11.5;LBMedical Record#;PA12,-12;LBPain Chart#;"
"RTN","GMRVHPN1",23,0)
 W !,"PA12,-12.5;LBSF 512#;"
"RTN","GMRVHPN1",24,0)
 I GTNM=0 W !,"PA3,10;LBTHERE  IS  NO  DATA  FOR  THIS  PERIOD#;"
"RTN","GMRVHPN1",25,0)
 W "PW.3;SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO7;PU;" S I=0 F  S I=$O(GRAPHR(I)) Q:I'>0  W !,GRAPHR(I)
"RTN","GMRVHPN1",26,0)
 W !,"PU;LO1;"
"RTN","GMRVHPN1",27,0)
 ;PRINT DATE
"RTN","GMRVHPN1",28,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;"
"RTN","GMRVHPN1",29,0)
 S J=11.5,J(1)=1 D WRTLN^GMRVHPN2
"RTN","GMRVHPN1",30,0)
 ;PRINT TIME
"RTN","GMRVHPN1",31,0)
 S J=11.2,J(1)=17 D WRTLN^GMRVHPN2
"RTN","GMRVHPN1",32,0)
 ;PRINT PAIN
"RTN","GMRVHPN1",33,0)
 S J=-0.8,J(1)=332 D WRTLN^GMRVHPN2
"RTN","GMRVHPN1",34,0)
 D PTID^GMRVHPN2
"RTN","GMRVHPN1",35,0)
 ;ENTER PCL MODE, RESET PRINTER AND EJECT PAGE
"RTN","GMRVHPN1",36,0)
Q1 ;
"RTN","GMRVHPN1",37,0)
 W !,"PA-3,22;",$CHAR(27),"&r0F",$CHAR(27),"%0A" K I Q
"RTN","GMRVHPN2")
0^21^B2551912
"RTN","GMRVHPN2",1,0)
GMRVHPN2 ;HIRMFO/YH-HP LASER PAIN CHART - ^TMP DATA ;2/6/99
"RTN","GMRVHPN2",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVHPN2",3,0)
SETA ;
"RTN","GMRVHPN2",4,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMRVHPN2",5,0)
 I GK'="" D
"RTN","GMRVHPN2",6,0)
 . S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=GK,^TMP($J,"GMRK","G"_(GJ+20+GCNTD+1))=GK
"RTN","GMRVHPN2",7,0)
 I GK'=99,"PASSREFUSEDUNAVAIL"'[$$UP^XLFSTR(GK) S ^TMP($J,"GMRK","G"_(410+GCNTD))="P"
"RTN","GMRVHPN2",8,0)
 Q
"RTN","GMRVHPN2",9,0)
PTID ;PRINT PATIENT ID
"RTN","GMRVHPN2",10,0)
 W !,"SD1,277,2,1,4,10,5,1,6,5,7,4;SS;PA-2,-10.5;LB"_^TMP($J,"GMRK","G194")_"#;PA-2,-11;LB"_^("G196")_"   "_^("G197")_"#;"
"RTN","GMRVHPN2",11,0)
 W !,"PA-2,-11.5;LB"_^TMP($J,"GMRK","G198")_"#;PA6,-12;LB"_^("G200")_"#;PA6,-12.5;LB"_^("G199")_"#;PA-2,-12;LB"_GMRDIV_"#;"
"RTN","GMRVHPN2",12,0)
 W !,"PA-2,-12.5;LB"_GSTRFIN_"#;" Q
"RTN","GMRVHPN2",13,0)
WRTLN ;PRINT LINE
"RTN","GMRVHPN2",14,0)
 S I(1)="" F I=1:1:5 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMRVHPN2",15,0)
 W !,I(1) S I(1)="" F I=6:1:10 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMRVHPN2",16,0)
 W !,I(1) Q
"RTN","GMRVLGQU")
0^22^B5308882
"RTN","GMRVLGQU",1,0)
GMRVLGQU ;HIRMFO/YH-UTILITY FOR LEGEND, PO2 AND QUALIFIER ;2/4/99
"RTN","GMRVLGQU",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVLGQU",3,0)
LEGEND ;CREATE VITAL/QUALIFIER/SYNONYM LEGEND STORED IN GLINE LOCAL GLOBAL
"RTN","GMRVLGQU",4,0)
 N I,X,J,K,G,B S (I,J,B)=0,(X,GLINE(1),GLINE(2),GLINE(3),GLINE(4),GLINE(5),GLINE)=""
"RTN","GMRVLGQU",5,0)
 F G(1)="T","P","R","B","H","W","PO2","CG","CVP","PN" I $D(GMRQUAL(G(1))) D LEGEND1
"RTN","GMRVLGQU",6,0)
 S J=J+1,GLINE(J)=X
"RTN","GMRVLGQU",7,0)
 K ^UTILITY($J),DIWF,DIWL,WIWR Q
"RTN","GMRVLGQU",8,0)
LEGEND1 ;
"RTN","GMRVLGQU",9,0)
 S G=$S(G(1)="CG":"CIRC/GIRTH",G(1)="PO2":"PULSE OX",G(1)="B":"BP",G(1)="W":"WT",G(1)="H":"HT",G(1)="T":"TEMP",G(1)="P":"PULSE",G(1)="R":"RESP",G(1)="PN":"PAIN",1:G(1))_" - "
"RTN","GMRVLGQU",10,0)
 S X=X_$S(B=0:"",1:"    ")_G S B=1 D:$L(X)>150 CUT D
"RTN","GMRVLGQU",11,0)
 . S G="" F  S G=$O(GMRQUAL(G(1),G)) Q:G=""  S X=X_G_"  " I $L(X)>150 D CUT
"RTN","GMRVLGQU",12,0)
 Q
"RTN","GMRVLGQU",13,0)
CUT ;
"RTN","GMRVLGQU",14,0)
 S DIWF="",DIWL=0,DIWR=$S(+$G(GLPRNTR):120,1:150) K ^UTILITY($J) D ^DIWP
"RTN","GMRVLGQU",15,0)
 S I=+$P(^UTILITY($J,"W",0),"^")
"RTN","GMRVLGQU",16,0)
 S J=J+1,GLINE(J)=$G(^UTILITY($J,"W",0,1,0)),X=$G(^UTILITY($J,"W",0,2,0))
"RTN","GMRVLGQU",17,0)
 K ^UTILITY($J)
"RTN","GMRVLGQU",18,0)
 Q
"RTN","GMRVLGQU",19,0)
SYNOARY ;
"RTN","GMRVLGQU",20,0)
 K GG S GG=$L(GMRSITE(1),";") F GG(1)=1:1:GG S GG(2)=$P(GMRSITE(1),";",GG(1)) S GG(3)=$O(^GMRD(120.52,"B",GG(2),0)) D:GG(3)>0
"RTN","GMRVLGQU",21,0)
 . S GMRSITE=GMRSITE_$S(GMRSITE="":"",1:" "),GSYNO=""
"RTN","GMRVLGQU",22,0)
 . I $P($G(^GMRD(120.52,GG(3),0)),"^",2)'="" S GSYNO=$P(^(0),"^",2)
"RTN","GMRVLGQU",23,0)
 . E  S GCHA=GG(2) D
"RTN","GMRVLGQU",24,0)
 . . I GCHA["-" S GCHA=$P(GCHA,"-")_" "_$P(GCHA,"-",2)
"RTN","GMRVLGQU",25,0)
 . . I $L(GCHA," ")<2 S GSYNO=$E(GCHA)_$$LOW^XLFSTR($E(GCHA,2,3))
"RTN","GMRVLGQU",26,0)
 . . E  S GLEN=$L(GCHA," ") F I=1:1:GLEN S GSYNO=GSYNO_$S($E($P(GCHA," ",I))'="(":$E($P(GCHA," ",I)),1:"")
"RTN","GMRVLGQU",27,0)
 . I GG(2)'="" S GG(2)=$E(GG(2))_$$LOW^XLFSTR($E(GG(2),2,30))
"RTN","GMRVLGQU",28,0)
 . S GMRSITE=GMRSITE_GSYNO S:GI'="C" GMRQUAL(GI,GSYNO_": "_GG(2))="" K GLEN
"RTN","GMRVLGQU",29,0)
 Q
"RTN","GMRVLGQU",30,0)
PO2(X) ;
"RTN","GMRVLGQU",31,0)
 I X="" Q
"RTN","GMRVLGQU",32,0)
 I X["%" D
"RTN","GMRVLGQU",33,0)
 . S X(2)=$P(X,"%")
"RTN","GMRVLGQU",34,0)
 . I X(2)["l/min" S X(2)=$P(X(2),"l/min",2)
"RTN","GMRVLGQU",35,0)
 I X["l/min" D
"RTN","GMRVLGQU",36,0)
 . S X(1)=$P(X,"l/min")
"RTN","GMRVLGQU",37,0)
 . I X(1)["%" S X(1)=$P(X(1),"%",2)
"RTN","GMRVLGQU",38,0)
 S X(1)=$$STRIP^XLFSTR(X(1)," "),X(2)=$$STRIP^XLFSTR(X(2)," ")
"RTN","GMRVLGQU",39,0)
 Q
"RTN","GMRVSC0")
0^23^B23370365
"RTN","GMRVSC0",1,0)
GMRVSC0 ;HIRMFO/MD,YH-CUMULATIVE VITALS/MEASUREMENTS FOR PATIENT OVER GIVEN DATE RANGE ;2/3/99
"RTN","GMRVSC0",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVSC0",3,0)
EN1 ; ENTRY FROM OPTION GMRV CUMULATIVE V/M
"RTN","GMRVSC0",4,0)
 K ^TMP($J) S DIC="^DPT(",DIC(0)="AEQM" D ^DIC K DIC Q:+Y'>0  S DFN=+Y
"RTN","GMRVSC0",5,0)
EN2 ; ENTRY IF DFN IS KNOWN TO PRINT CUMULATIVE VITALS
"RTN","GMRVSC0",6,0)
 S GMROUT=0 D DEM^VADPT,INP^VADPT S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK"),GMRNAM=$S(VADM(1)'="":VADM(1),1:"  BLANK"),^TMP($J,GMRRMBD,GMRNAM,DFN)=""
"RTN","GMRVSC0",7,0)
 S GMRX=$S(VAIN(7)'="":$P(VAIN(7),"^",2),1:"")
"RTN","GMRVSC0",8,0)
EN2A ; ENTRY FROM PRINT CUMULATIVE REPORT BY WARD
"RTN","GMRVSC0",9,0)
 D DATE G:GMROUT Q
"RTN","GMRVSC0",10,0)
DEV S %ZIS="Q",%ZIS("B")="" D ^%ZIS K %ZIS G:POP Q I $E(IOST)="P",'$D(IO("Q")),'$D(IO("S")) D ^%ZISC W !,?3,"PRINTED REPORTS MUST BE QUEUED!!",$C(7) G DEV
"RTN","GMRVSC0",11,0)
 I $D(IO("Q")) S (ZTSAVE("^TMP($J,"),ZTSAVE("GMRVSDT"),ZTSAVE("GMRVFDT"))="",ZTIO=ION,ZTDESC="Cumulative vital/measurement report",ZTRTN="START^GMRVSC0" D ^%ZTLOAD K IO("Q"),ZTSK,ZTIO G Q
"RTN","GMRVSC0",12,0)
START ;
"RTN","GMRVSC0",13,0)
 S (GMROUT,GMRPG)=0 D NOW^%DTC S Y=% D D^DIQ S GMRPDT=$P(Y,"@")_" ("_$P($P(Y,"@",2),":",1,2)_")",$P(GMRDSH,"-",80)="" U IO S GMRRMBD=""
"RTN","GMRVSC0",14,0)
 F  S GMRRMBD=$O(^TMP($J,GMRRMBD)) Q:GMRRMBD=""!GMROUT  S GMRNAM="" F  S GMRNAM=$O(^TMP($J,GMRRMBD,GMRNAM)) Q:GMRNAM=""!GMROUT  S DFN=0 F  S DFN=$O(^TMP($J,GMRRMBD,GMRNAM,DFN)) Q:DFN'>0!GMROUT  S GMRPG=0 D WRT Q:GMROUT  D EN1^GMRVSC1
"RTN","GMRVSC0",15,0)
Q W:$E(IOST)'="C" @IOF D Q^GMRVSC1 K GMRBMI,GMRVHT,^TMP($J),GMRINF,GMRPG,GMREDB,GMRNAM,GMRRMBD,GMRVWLOC,GMRWARD,GMRMSL,GMRROOM,GMRRMST,GMRVHLOC,GMRLEN,GMRI,GMROUT,GMRVSDT,GMRVFDT,GPRT Q
"RTN","GMRVSC0",16,0)
DATE S %DT="AET",%DT("B")=$S(GMRX'="":$P(GMRX,"@"),1:"T-7"),%DT("A")="Start with DATE (TIME optional): " D ^%DT K %DT I +Y'>0 S GMROUT=1 Q
"RTN","GMRVSC0",17,0)
 S GMRVSDT=+Y
"RTN","GMRVSC0",18,0)
 S %DT="AET",%DT("A")="go to DATE (TIME optional): ",%DT("B")="NOW" D ^%DT K %DT I X="^" S GMROUT=1 Q
"RTN","GMRVSC0",19,0)
 I +Y'>0!($P(Y,".",2)'>0&(DT=Y)) D NOW^%DTC S Y=%
"RTN","GMRVSC0",20,0)
 I $P(Y,".",2)'>0 S Y=Y_$S(Y[".":"2400",1:".2400")
"RTN","GMRVSC0",21,0)
 I GMRVSDT>+Y W !,?3,$C(7),"THE START DATE MUST BE BEFORE THE END DATE OF THIS REPORT" G DATE
"RTN","GMRVSC0",22,0)
 S GMRVFDT=+Y
"RTN","GMRVSC0",23,0)
 Q
"RTN","GMRVSC0",24,0)
FOOTER ;REPORT FOOTER SUBROUTINE
"RTN","GMRVSC0",25,0)
 W !!,"*** (E) - Error entry",!! W:VADM(1)'="" ?$X-3,$E(VADM(1),1,15) W:VADM(2)'="" ?17,$P(VADM(2),"^",2) W:VADM(3)'="" ?30,$P(VADM(3),"^",2) W:VADM(4)'="" ?43,$P(VADM(4),"^")_" YRS"
"RTN","GMRVSC0",26,0)
 W:VADM(5)'="" ?51,$P(VADM(5),"^",2)
"RTN","GMRVSC0",27,0)
 W ?65,"VAF 10-7987j" W !,"Unit: "_$S($P(VAIN(4),"^",2)'="":$P(VAIN(4),"^",2),1:"     "),?32,"Room: "_$S($P(VAIN(5),"^")'="":$P(VAIN(5),"^"),1:"   "),!
"RTN","GMRVSC0",28,0)
 I '$D(GMRVHLOC) S GMRVHLOC=$P($G(^DIC(42,+$G(VAIN(4)),44)),"^")
"RTN","GMRVSC0",29,0)
 W "Division: "_$S(GMRVHLOC>0:$$GET1^DIQ(4,+$$GET1^DIQ(44,+GMRVHLOC,3,"I"),.01,"I"),1:""),!
"RTN","GMRVSC0",30,0)
 Q
"RTN","GMRVSC0",31,0)
WRT ;
"RTN","GMRVSC0",32,0)
 S GMR1ST=1 K GMRSITE D DEM^VADPT,INP^VADPT S GWARD=$S($P(VAIN(4),"^",2)'="":$P(VAIN(4),"^",2),1:"   "),GBED=$S(VAIN(5)'="":$P(VAIN(5),"^"),1:"   ") D HDR^GMRVSC2
"RTN","GMRVSC0",33,0)
 Q
"RTN","GMRVSC0",34,0)
EN3(DFN,GMRVSDT,GMRVFDT) ; APPLICATION PROGRAM INTERFACE FOR PATIENT CUMULATIVE VITALS REPORT
"RTN","GMRVSC0",35,0)
 ; INPUT VARIABLES:    DFN=PATIENT NUMBER
"RTN","GMRVSC0",36,0)
 ;                     GMRVSDT=START DATE
"RTN","GMRVSC0",37,0)
 ;                     GMNRVFDT=FINISH DATE OF REPORT
"RTN","GMRVSC0",38,0)
 S GMRVOR=1
"RTN","GMRVSC0",39,0)
EN5 S (GMROUT,GMRPG)=0 D DEM^VADPT,INP^VADPT S GBED=$S(VAIN(5)'="":VAIN(5),1:"   "),GWARD=$S($P(VAIN(4),"^",2)="":"   ",1:$P(VAIN(4),"^",2))
"RTN","GMRVSC0",40,0)
 S GMR1ST=1,GMRDATE(0)=0 D NOW^%DTC S Y=% D D^DIQ S GMRPDT=$P(Y,"@")_" ("_$P($P(Y,"@",2),":",1,2)_")",$P(GMRDSH,"-",81)=""
"RTN","GMRVSC0",41,0)
 K ^TMP($J,"GMRV") F GMRVTY="T","P","R","BP","HT","WT","CVP","CG","PO2","PN" D
"RTN","GMRVSC0",42,0)
 . S GMRVITY=$O(^GMRD(120.51,"C",GMRVTY,0)) I GMRVITY>0 D SETAR^GMRVSC1
"RTN","GMRVSC0",43,0)
 U IO D HDR^GMRVSC2
"RTN","GMRVSC0",44,0)
 I $O(^TMP($J,"GMRV",0))'>0 W !!,"No cumulative vitals data for "_$S($D(OPSPNM):ORSPNM,1:"this patient"),! S:$D(ORSPNM) GMROUT=1 G Q3
"RTN","GMRVSC0",45,0)
 F GMRDATE=0:0 S GMRDATE=$O(GMRVDT(GMRDATE)) Q:GMRDATE'>0!GMROUT  I $D(^TMP($J,"GMRV",GMRDATE)) D PRT^GMRVSC1
"RTN","GMRVSC0",46,0)
Q3 I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMRVSC0",47,0)
 I 'GMROUT W ! D FOOTER^GMRVSC0 I '$D(GMRVOR),$E(IOST)'="P",'GMROUT W !,"Press return to continue or ""^"" to exit " R X:DTIME S:'$T!(X["^") GMROUT=1
"RTN","GMRVSC0",48,0)
 D KVAR^VADPT K GMRVOR,VA,GBED,GWARD,^TMP($J,"GMRV"),GMR1ST,GMRVTY,GMRVITY,GMRVDATE,GMRSITE,GMRDSH,GMRQUAL,GMRVX,GMRX,GX,GMRDAT,GMRLN,GMRPDT,GMRSP,GMRVDA,GMRY
"RTN","GMRVSC0",49,0)
 I $D(ORSPNM) K GMRPG,GMRVSDT,GMRVFDT S:$D(ZTQUEUED) ZTREQ="@" D ^%ZISC
"RTN","GMRVSC0",50,0)
 Q
"RTN","GMRVSC0",51,0)
EN4 ;V/M CUMULATIVE REPORTS BY WARD/ROOM/PT
"RTN","GMRVSC0",52,0)
 S (GMRVWLOC,GMROUT)=0 D WARDPAT^GMRVED0 G:GMROUT Q2
"RTN","GMRVSC0",53,0)
 I "Pp"[GMREDB D DEM^VADPT,INP^VADPT S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK"),GMRNAM=$S(VADM(1)'="":VADM(1),1:"  BLANK"),^TMP($J,GMRRMBD,GMRNAM,DFN)="" S GMRX=$S(VAIN(7)'="":$P(VAIN(7),"^",2),1:"")
"RTN","GMRVSC0",54,0)
 I "Aa"[GMREDB D EN1^GMRVED2 S GMRX=""
"RTN","GMRVSC0",55,0)
 I "Ss"[GMREDB D EN3^GMRVED6 D:'GMROUT EN1^GMRVED2 S GMRX=""
"RTN","GMRVSC0",56,0)
 G:GMROUT Q2 D EN2A
"RTN","GMRVSC0",57,0)
Q2 K GMROUT,GMRVWLOC,GMRMSL,GMREDB,I,DFN Q
"RTN","GMRVSC1")
0^24^B9241892
"RTN","GMRVSC1",1,0)
GMRVSC1 ;HIRMFO/YH-CUMULATIVE V/M - CONTINUED ;2/3/99
"RTN","GMRVSC1",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVSC1",3,0)
EN1 ; ENTRY TO PRINT REPORT FROM TASKMAN
"RTN","GMRVSC1",4,0)
 K ^TMP($J,"GMRV"),GMRVDT S GMRVHT=0 S (GMROUT,GMRDATE(0))=0
"RTN","GMRVSC1",5,0)
 F GMRVTY="T","P","R","BP","HT","WT","CVP","CG","PO2","PN"  S GMRVITY=$O(^GMRD(120.51,"C",GMRVTY,0)) I GMRVITY>0 D SETAR
"RTN","GMRVSC1",6,0)
 I $O(^TMP($J,"GMRV",0))'>0 W !,"THERE IS NO DATA FOR THIS REPORT" G QT
"RTN","GMRVSC1",7,0)
 F GMRDATE=0:0 S GMRDATE=$O(GMRVDT(GMRDATE)) Q:GMRDATE'>0!GMROUT  I $D(^TMP($J,"GMRV",GMRDATE)) D PRT Q:GMROUT
"RTN","GMRVSC1",8,0)
QT I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMRVSC1",9,0)
 I 'GMROUT W ! D FOOTER^GMRVSC0
"RTN","GMRVSC1",10,0)
 I $E(IOST)'="P",'GMROUT W "Press return to continue or ""^"" to escape " R X:DTIME S:'$T!(X["^") GMROUT=1
"RTN","GMRVSC1",11,0)
 K ^TMP($J,"GMRV"),^TMP($J,"OTHR"),GOTHR,GMRV,GMRVDT Q
"RTN","GMRVSC1",12,0)
Q ; KILL VARIBLES
"RTN","GMRVSC1",13,0)
 S:$D(ZTQUEUED) ZTREQ="@" K GMRZZ,GMRVARY
"RTN","GMRVSC1",14,0)
 K GMRVER,GDATA,GMRST,GERROR,GERST,^TMP($J),GBED,GWARD,DFN,GX,GMR1ST,GMRDAT,GMRDATE,GMRDSH,GMRDT,GMRLN,GMRPDT,GMRSP,GMRVDA,GMRVITY,GMRX,GMRY,GMRVTY,GMRSITE,GMRVX,POP,DIPGM,%T,GMRQUAL,GMROUT,GMRPG,GFLAG D KVAR^VADPT K VA D ^%ZISC
"RTN","GMRVSC1",15,0)
 Q
"RTN","GMRVSC1",16,0)
SETAR ;
"RTN","GMRVSC1",17,0)
 F GMRDT=0:0 S GMRDT=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRDT)) Q:GMRDT'>0  S GMRDATE=9999999-GMRDT I '(GMRDATE>GMRVFDT!(GMRDATE<GMRVSDT)) D SETND
"RTN","GMRVSC1",18,0)
 Q
"RTN","GMRVSC1",19,0)
SETND ;
"RTN","GMRVSC1",20,0)
 F GMRVDA=0:0 S GMRVDA=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRDT,GMRVDA)) Q:GMRVDA'>0  D SETUT
"RTN","GMRVSC1",21,0)
 Q
"RTN","GMRVSC1",22,0)
SETUT S ^TMP($J,"GMRV",+$E(GMRDATE,1,12),GMRVTY,GMRVDA)=$S('$D(^GMR(120.5,GMRVDA,2)):0,1:+$P(^(2),"^"))
"RTN","GMRVSC1",23,0)
 S GMRVDT(+$E(GMRDATE,1,12))="" Q
"RTN","GMRVSC1",24,0)
PRT ;PRINT V/M BY DATE/TIME
"RTN","GMRVSC1",25,0)
 D:IOSL<($Y+9) HDR^GMRVSC2 Q:GMROUT
"RTN","GMRVSC1",26,0)
 S Y=GMRDATE X ^DD("DD") I $P(GMRDATE,".")'=GMRDATE(0) W !,$E(GMRDATE,4,5)_"/"_$E(GMRDATE,6,7)_"/"_$E(GMRDATE,2,3) S GMRDATE(0)=$P(GMRDATE,".")
"RTN","GMRVSC1",27,0)
 D:IOSL<($Y+9) HDR^GMRVSC2 Q:GMROUT  W !,$P($P(Y,"@",2),":",1,2)
"RTN","GMRVSC1",28,0)
 I $D(^TMP($J,"GMRV",GMRDATE)) D
"RTN","GMRVSC1",29,0)
 .K GMRLN,GERROR F GMRVTY="T","P","R","BP","HT","WT","CVP","CG","PO2","PN" S GPRT(GMRVTY)=0 I $D(^TMP($J,"GMRV",GMRDATE,GMRVTY)) F GMRVDA=0:0 S GMRVDA=$O(^TMP($J,"GMRV",GMRDATE,GMRVTY,GMRVDA)) Q:GMRVDA'>0!GMROUT  D SETLN^GMRVSC2
"RTN","GMRVSC1",30,0)
 Q
"RTN","GMRVSC2")
0^25^B14562833
"RTN","GMRVSC2",1,0)
GMRVSC2 ;HIRMFO/YH-CUMULATIVE V/M - CONTINUED ;2/3/99
"RTN","GMRVSC2",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVSC2",3,0)
SETLN ;
"RTN","GMRVSC2",4,0)
 S GMRVER=^TMP($J,"GMRV",GMRDATE,GMRVTY,GMRVDA)
"RTN","GMRVSC2",5,0)
 D:IOSL<($Y+9) HDR Q:GMROUT  W ! W:GMRVER "(E)"
"RTN","GMRVSC2",6,0)
 I GPRT(GMRVTY)=0 D
"RTN","GMRVSC2",7,0)
 . W ?4,$S(GMRVTY="T":"T: ",GMRVTY="P":"P: ",GMRVTY="R":"R: ",GMRVTY="BP":"B/P: ",GMRVTY="WT":"Wt: ",GMRVTY="HT":"Ht: ",GMRVTY="CG":"Circumference/Girth: ",GMRVTY="CVP":"Central Venous Pressure: ",GMRVTY="PO2":"Pulse Oximetry: ",1:"")
"RTN","GMRVSC2",8,0)
 . I GMRVTY="PN" W ?4,"Pain: "
"RTN","GMRVSC2",9,0)
 S GPRT(GMRVTY)=1
"RTN","GMRVSC2",10,0)
 S GMRDAT=$G(^GMR(120.5,GMRVDA,0))
"RTN","GMRVSC2",11,0)
 I "PRBPCVPCGPO2PN"[GMRVTY S GMRVX=GMRVTY,GMRVX(0)=$P(GMRDAT,"^",8) D
"RTN","GMRVSC2",12,0)
 . I GMRVTY="PN" D
"RTN","GMRVSC2",13,0)
 . . I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRVX(0)) W ?9,GMRVX(0) Q
"RTN","GMRVSC2",14,0)
 . . I GMRVX(0)=0 W ?9,"No pain" Q
"RTN","GMRVSC2",15,0)
 . . I GMRVX(0)=99 W ?9,"Unable to respond" Q
"RTN","GMRVSC2",16,0)
 . . I GMRVX(0)=10 W ?9,GMRVX(0)_" - Worst imaginable pain" Q
"RTN","GMRVSC2",17,0)
 . . W ?9,GMRVX(0) Q
"RTN","GMRVSC2",18,0)
 . I '(GMRVX(0)<0!(GMRVX(0)>0)!($E(GMRVX(0))="0")),GMRVTY'="PN" W ?9,GMRVX(0) Q
"RTN","GMRVSC2",19,0)
 . D EN1^GMRVSAS0
"RTN","GMRVSC2",20,0)
 . S Z=$S(GMRVTY="CG":$J($P(GMRDAT,"^",8),0,2),GMRVTY="CVP":$J($P(GMRDAT,"^",8),0,1),GMRVTY'="BP":$J($P(GMRDAT,"^",8),3,0),1:$P(GMRDAT,"^",8)) D:GMRVTY'="BP" BLNK W:GMRVTY'="PN" ?9,Z_$S('$D(GMRVX(1)):" ",'GMRVX(1):"",1:"*")
"RTN","GMRVSC2",21,0)
 . I GMRVTY="CG" W " in ("_$J(Z/.3937,0,2)_" cm)"
"RTN","GMRVSC2",22,0)
 . I GMRVTY="CVP" W " cmH2O ("_$J(Z/1.36,0,1)_" mmHg)"
"RTN","GMRVSC2",23,0)
 . I GMRVTY="PO2" W "%"_$S($P(GMRDAT,"^",10)'="":" with supplemental O2 "_$P($P(GMRDAT,"^",10)," l/min")_"L/min"_$P($P(GMRDAT,"^",10)," l/min",2),1:"")
"RTN","GMRVSC2",24,0)
 I GMRVTY="T" S X=$P(GMRDAT,"^",8) D
"RTN","GMRVSC2",25,0)
 . I X'>0 W ?9,X Q
"RTN","GMRVSC2",26,0)
 . S GMRVX=GMRVTY,GMRVX(0)=X D EN1^GMRVSAS0
"RTN","GMRVSC2",27,0)
 . D EN1^GMRVUTL S:'Y Y="" S Z=$J(X,5,1) D BLNK W ?9,Z_" F " S Z=$J(Y,4,1) D BLNK W "("_Z_" C)"_$S('$D(GMRVX(1)):" ",'GMRVX(1):"",1:"*")
"RTN","GMRVSC2",28,0)
 I GMRVTY="HT" S X=$P(GMRDAT,"^",8) D
"RTN","GMRVSC2",29,0)
 . I X'>0 W ?9,X Q
"RTN","GMRVSC2",30,0)
 . D EN2^GMRVUTL S:'Y Y="" S Z=$J(X,5,2) D BLNK W ?9,Z_" in " S Z=$J(Y,5,2) D BLNK W "("_Z_" cm)" I 'GMRVER S GMRVHT=Z/100
"RTN","GMRVSC2",31,0)
 I GMRVTY="WT" S X=$P(GMRDAT,"^",8) D
"RTN","GMRVSC2",32,0)
 . I X'>0 W ?9,X Q
"RTN","GMRVSC2",33,0)
 . D EN3^GMRVUTL S:'Y Y="" S Z=$J(X,7,2) D BLNK W ?9,Z_" lb " S Z=$J(Y,6,2) D BLNK W "("_Z_" kg)"
"RTN","GMRVSC2",34,0)
 Q:+$P(GMRDAT,"^",8)'>0  S GMRVITY=+$P(GMRDAT,"^",3)
"RTN","GMRVSC2",35,0)
 K GMRVARY S (GMRZZ,GMRVARY)="" I $P($G(^GMR(120.5,GMRVDA,5,0)),"^",4)>0 D
"RTN","GMRVSC2",36,0)
 . D CHAR^GMRVCHAR(GMRVDA,.GMRVARY,GMRVITY) S GMRZZ=$$WRITECH^GMRVCHAR(GMRVDA,.GMRVARY,9) S:GMRZZ'=""&(GMRVTY'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMRVSC2",37,0)
 . W:GMRVTY="PO2" !,?8," via " W GMRZZ
"RTN","GMRVSC2",38,0)
 I GMRVTY="WT",'GMRVER S GMRBMI="",GMRBMI(1)=$P(GMRDAT,"^"),GMRBMI(2)=+$P(GMRDAT,"^",8) D CALBMI^GMRVBMI(.GMRBMI) W:GMRBMI>0 !,?4,"Body Mass Index: "_GMRBMI
"RTN","GMRVSC2",39,0)
 K Z Q
"RTN","GMRVSC2",40,0)
HDR ;
"RTN","GMRVSC2",41,0)
 I 'GMR1ST D FOOTER^GMRVSC0
"RTN","GMRVSC2",42,0)
 I $E(IOST)'="P",'GMR1ST W "Press return to continue ""^"" to escape " R X:DTIME I X="^"!'$T S GMROUT=1 Q
"RTN","GMRVSC2",43,0)
 W:'($E(IOST)'="C"&'$D(GFLAG)) @IOF S GMRPG=GMRPG+1,GFLAG=1
"RTN","GMRVSC2",44,0)
 W !,GMRPDT,?25,"Cumulative Vitals/Measurements Report",?70,"Page ",GMRPG,!!,$E(GMRDSH,1,78)
"RTN","GMRVSC2",45,0)
 I 'GMR1ST,$P(GMRDATE,".")=GMRDATE(0) W !,$E(GMRDATE(0),4,5)_"/"_$E(GMRDATE(0),6,7)_"/"_$E(GMRDATE,2,3)_" (continued)",!
"RTN","GMRVSC2",46,0)
 S GMR1ST=0
"RTN","GMRVSC2",47,0)
 Q
"RTN","GMRVSC2",48,0)
BLNK ;
"RTN","GMRVSC2",49,0)
 F I=1:1:$L(Z) Q:$E(Z,I)'=" "
"RTN","GMRVSC2",50,0)
 S Z=$E(Z,I,$L(Z))
"RTN","GMRVSC2",51,0)
 Q
"RTN","GMRVSR0")
0^26^B32065785
"RTN","GMRVSR0",1,0)
GMRVSR0 ;HIRMFO/RM,YH-VITAL SIGNS RECORD SF 511 ;2/11/99  12:47
"RTN","GMRVSR0",2,0)
 ;;4.0;Vitals/Measurements;**1,3,7**;Apr 25, 1997
"RTN","GMRVSR0",3,0)
EN1 ; ENTRY POINT FROM OPTION GMRV SF511, SELECT TYPE OF GRAPH FOR THE REPORT
"RTN","GMRVSR0",4,0)
 S (GMRVWLOC,GMROUT,GFLAG,GRAPH)=0 D SELECT^GMRVSR1(.GRAPH) I GRAPH'>0 K GFLAG,GMROUT,GRAPH,GMRVWLOC Q
"RTN","GMRVSR0",5,0)
 D WARDPAT^GMRVED0 I GMROUT D Q1 K GFLAG,GMREDB,GMROUT,GMRWARD,DFN,GRAPH Q
"RTN","GMRVSR0",6,0)
PAT I "Pp"[GMREDB D DEM^VADPT S GMRNAM=$P(VADM(1),"^"),SSN=$P(VADM(2),"^",2)
"RTN","GMRVSR0",7,0)
 I "Ss"[GMREDB D EN3^GMRVED6
"RTN","GMRVSR0",8,0)
 I GMROUT D Q1 K GMREDB,GFLAG,GMROUT,GMRWARD,GRAPH Q
"RTN","GMRVSR0",9,0)
DATE S %DT("A")="Start DATE (TIME optional): ",%DT("B")="T-7",%DT="AETX" D ^%DT K %DT G:+Y'>0 Q1 S GMRSTRT=+Y
"RTN","GMRVSR0",10,0)
 S %DT("A")="go to DATE (TIME optional): ",%DT="AETX",%DT("B")="NOW" D ^%DT K %DT G:+Y'>0 Q1 I $P(Y,".",2)'>0,Y=DT D NOW^%DTC S Y=%
"RTN","GMRVSR0",11,0)
 I $P(Y,".",2)'>0 S Y=Y_$S(Y[".":"2400",1:".2400")
"RTN","GMRVSR0",12,0)
 S (X1,GMRFIN)=+Y,X2=GMRSTRT D ^%DTC
"RTN","GMRVSR0",13,0)
 I X<0!(X=0&(((+("."_$P(GMRFIN,".",2))*10000)-((+("."_$P(GMRSTRT,".",2))*10000)))'>0)) W !?5,"Ending date of range needs to be greater that starting date.",!?5,$C(7),"PLEASE REENTER!!" G DATE
"RTN","GMRVSR0",14,0)
 D DATELN
"RTN","GMRVSR0",15,0)
DEV S %ZIS="NQ",%ZIS("B")=""
"RTN","GMRVSR0",16,0)
 W ! D ^%ZIS G:POP Q1
"RTN","GMRVSR0",17,0)
 N GMRVDEV S GMRVDEV=ION_";"_IOST_";"_IOM_";"_IOSL
"RTN","GMRVSR0",18,0)
 I IOM'>131 W !!,"Sorry, you must select a DEVICE that can print 132 columns. Try again." G DEV ;device must be 132 columns
"RTN","GMRVSR0",19,0)
 I GRAPH=5,$$UP^XLFSTR(IOST)'["HPLASER" W !,"PAIN CHART uses HP Laser printer only." G DEV
"RTN","GMRVSR0",20,0)
 ;I '(IOST?1"P".E&$D(IO("Q"))),'$D(IO("S")) D WRT1^GMRVSR1 G DEV
"RTN","GMRVSR0",21,0)
 I '$D(IO("Q")) S IOP=GMRVDEV K %ZIS D ^%ZIS G Q1:POP,EN2:"Pp"[GMREDB,EN3
"RTN","GMRVSR0",22,0)
 I $D(IO("Q")) S ZTDESC="V/M GRAPHIC REPORTS",ZTIO=GMRVDEV,ZTRTN=$S("Pp"[GMREDB:"EN2^GMRVSR0",1:"EN3^GMRVSR0") F G="GRAPH","GMROUT","DFN","GMRROOM(","GMREDB","GMRNAM","SSN","GMRWARD","GMRSTRT","GMRFIN","GMRWARD(","GFLAG","GSTRFIN" S ZTSAVE(G)=""
"RTN","GMRVSR0",23,0)
 I $D(IO("Q")) D ^%ZTLOAD,HOME^%ZIS K ZTSK,ZTIO,DFN,GMRLEN,GMRRMST,GMRIFN,GMROUT,GMRSTRT,GMRVLOC,GMRWARD D Q1,Q2 Q
"RTN","GMRVSR0",24,0)
 G:'("Pp"[GMREDB) EN3
"RTN","GMRVSR0",25,0)
EN2 ; ENTRY TO PRINT THIS REPORT AFTER IT HAS BEEN QUEUED
"RTN","GMRVSR0",26,0)
 ;  NOTE:  THIS REPORT MUST BE QUEUED TO A PRINTER.
"RTN","GMRVSR0",27,0)
 I IOST["KYOCERA"!(IOST["Kyocera") S GROUTN=$S(GRAPH=1:"EN1^GMRVGR0",GRAPH=2:"EN1^GMRVBP0",GRAPH=3:"EN1^GMRVWT0",GRAPH=4:"EN1^GMRVKPO0",1:"") D:GROUTN'="" @GROUTN G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",28,0)
 I $$UP^XLFSTR(IOST)["HPLASER" S GROUTN=$S(GRAPH=1:"EN1^GMRVHG0",GRAPH=2:"EN1^GMRVHB0",GRAPH=3:"EN1^GMRVHW0",GRAPH=4:"EN1^GMRVHPO0",GRAPH=5:"EN1^GMRVHPN0",1:"") D:GROUTN'="" @GROUTN G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",29,0)
 I GRAPH=2 D ^GMRVLBP0 G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",30,0)
 I GRAPH=3 D ^GMRVLWT0 G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",31,0)
 I GRAPH=4 D ^GMRVLPO0 G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",32,0)
 S GMRS=(9999999-GMRFIN)-.0001,GMRQ=9999999-GMRSTRT
"RTN","GMRVSR0",33,0)
 F GMRTY="B","P","R","T","H","W","PO2","CVP","CG" D SETT^GMRVSR1
"RTN","GMRVSR0",34,0)
 U IO D SF511^GMRVSR1
"RTN","GMRVSR0",35,0)
Q1 K J,G,GMR,GMR3,GMRDAT,GMRDT,GMREN,GMRHDR1,GMRHDR10,GMRHDR11,GMRHDR2,GMRHT,GMRI,GMRJ,GMRK,GMRLINE,GMRMSL,GMRNM,GMROLD,GMRP,GMRPDIF,GMRT,GMRX,GMRTY,GMRPG,GMRPGC,GMRPGS,GMRPHI,GMRPLO,GMRTDIF,GMRTHI,GMRTLO,GMRTNM,GMRX1,GMRX2 D KVAR^VADPT K VA,%T
"RTN","GMRVSR0",36,0)
 K GVAR,GMRDIV,GMRHT,GMRQUAL,GMRS,GMRQ,GMRPOFF,GMRTOFF,GMRVWLOC,GMRVX,DIK,%ZIS,%DT,DIPGM,GMRLEN,GMRRMST,GMRVHLOC,GDA,GMRINF,GLINE,GMRVARY
"RTN","GMRVSR0",37,0)
 W:$E(IOST)="P"!$D(IO("S"))&($$UP^XLFSTR(IOST)'["HPLASER") ! Q:'("Pp"[GMREDB)
"RTN","GMRVSR0",38,0)
Q2 S:$D(ZTQUEUED) ZTREQ="@" K ^TMP($J),GMRII,GMRQUAL,GMREDB,GMROUT,GMRROOM,GMRSTRT,GMRFIN,GMRNAM,GMRRMBD,GMRSITE,GMRVHLOC,GMRWARD,POP,SSN,DFN,ZTIO,ZTSK,GDT,GDTA,GFOUND,GMRAGE,GMRBED,GMRBTH,GMRCOL,GMRHLOC,GMROP,GMRSEX,GMRVADM,GRPT,GSUB,GTYPE1
"RTN","GMRVSR0",39,0)
 K GSTRFIN,GMRVFLAG,SNN,GMVRMBD,GMVWRD,GRAPH,GROUTN,GIVDT,GSTAR,GSOL,GN,GNDATE,GNSHFT,GFLAG,ZTSAVE,ZTRTN W:$E(IOST)'="C"&(IOST'["KYOC"!(IOST'["Kyoc")!(IOST'["kyoc")!($$UP^XLFSTR(IOST)'["HPLASER")) @IOF D ^%ZISC Q
"RTN","GMRVSR0",40,0)
EN3 ; ENTRY TO PRINT REPORT FOR ALL OR SELECTED GROUP OF PATIENTS, FOR WARD STORED IN GMRWARD
"RTN","GMRVSR0",41,0)
 D EN1^GMRVED2 S GMRROOM="" F GMRII=0:0 S GMRROOM=$O(^TMP($J,GMRROOM)) Q:GMRROOM=""  S GMRNAM="" F GMRII=0:0 S GMRNAM=$O(^TMP($J,GMRROOM,GMRNAM)) Q:GMRNAM=""  F DFN=0:0 S DFN=$O(^TMP($J,GMRROOM,GMRNAM,DFN)) Q:DFN'>0  D:DFN>0 PRT
"RTN","GMRVSR0",42,0)
 D Q1 G Q2
"RTN","GMRVSR0",43,0)
PRT ;
"RTN","GMRVSR0",44,0)
 D DEM^VADPT S SSN=$P(VADM(2),"^",2) D EN2
"RTN","GMRVSR0",45,0)
 Q
"RTN","GMRVSR0",46,0)
EN4 ; ENTRY POINT IF DFN IS KNOWN TO PRINT THIS REPORT
"RTN","GMRVSR0",47,0)
 Q:'$D(DFN)  S GRAPH=1,GMREDB="P",GMROUT=0,GMRVHLOC=+ORL D INP^VADPT S GMRWARD(1)=$P(VAIN(4),"^",2),GMRWARD=$P(VAIN(4),"^") G PAT
"RTN","GMRVSR0",48,0)
 Q
"RTN","GMRVSR0",49,0)
EN5 ; ENTRY POINT FOR APPLICATION TO GET REPORT. INPUT VARIABLES:
"RTN","GMRVSR0",50,0)
 ;    DFN=PATIENT NUMBER
"RTN","GMRVSR0",51,0)
 ;    GMRDATE=START DATE^FINISH DATE OF REPORT^TYPE OF GRAPH
"RTN","GMRVSR0",52,0)
 ;    (OPTIONAL) GMRVWLO=LOCATION GROUPING OF PATIENT IF DIFFERENT HAN 42 FILE
"RTN","GMRVSR0",53,0)
 Q:'$D(DFN)!'$D(GMRDATE)!(DFN'>0)  Q:'$P(GMRDATE,"^")!'$P(GMRDATE,"^",2)  S GMREDB="A",GMROUT=0,GMRSTRT=$P(GMRDATE,"^"),GMRFIN=$P(GMRDATE,"^",2) D INP^VADPT S GMRWARD(1)=$S($D(GMRVWLO):GMRVWLO,1:$P(VAIN(4),"^",2)),GMRWARD=$P(VAIN(4),"^")
"RTN","GMRVSR0",54,0)
 D DATELN S GRAPH=$S($P(GMRDATE,"^",3)>0:+$P(GMRDATE,"^",3),1:1) D EN2 Q
"RTN","GMRVSR0",55,0)
EN6(DFN,GMRDATE) ; APPLICATION PROGRAM INTERFACE FOR SINGLE PATIENT REPORT. INPUT VARIABLES:    DFN=PATIENT NUMBER
"RTN","GMRVSR0",56,0)
 ;               GMRDATE=START DATE^FINISH DATE OF REPORT
"RTN","GMRVSR0",57,0)
 Q:'$D(DFN)!'$D(GMRDATE)  Q:'$P(GMRDATE,U)!'$P(GMRDATE,U,2)  S GMREDB="P",GMROUT=0,GMRSTRT=$P(GMRDATE,U),GMRFIN=$P(GMRDATE,U,2) D DEM^VADPT,INP^VADPT S SSN=VA("PID"),GMRWARD=$P(VAIN(4),U),GMRWARD(1)=$P(VAIN(4),U,2)
"RTN","GMRVSR0",58,0)
 I IOM'>130 D  Q
"RTN","GMRVSR0",59,0)
 .S GMRVDVIC=$E(IOST) ;device type chosen by user (e.g., 'C')
"RTN","GMRVSR0",60,0)
 .D ^%ZISC
"RTN","GMRVSR0",61,0)
 .W !,"THIS REPORT NEEDS 132 COLUMNS",!
"RTN","GMRVSR0",62,0)
 .I GMRVDVIC'="C" H 3 ;if device is not a terminal hang 3 seconds
"RTN","GMRVSR0",63,0)
 .K GMRVDVIC
"RTN","GMRVSR0",64,0)
 .Q
"RTN","GMRVSR0",65,0)
 D DATELN S GRAPH=$S($P(GMRDATE,"^",3)>0:+$P(GMRDATE,"^",3),1:1) D EN2 Q
"RTN","GMRVSR0",66,0)
DATELN ;
"RTN","GMRVSR0",67,0)
 S Y=GMRSTRT X ^DD("DD") S GSTRFIN=Y S Y=GMRFIN X ^DD("DD") S GSTRFIN=GSTRFIN_" - "_Y Q
"RTN","GMRVSR1")
0^27^B25307909
"RTN","GMRVSR1",1,0)
GMRVSR1 ;HIRMFO/RM,YH-PATIENT VITAL SIGNS-I/O SF 511 GRAPH - 1 ;2/7/99
"RTN","GMRVSR1",2,0)
 ;;4.0;Vitals/Measurements;**1,7**;Apr 25, 1997
"RTN","GMRVSR1",3,0)
SF511 ;PRODUCE PATIENT VITAL SIGNS-I/O GRAPH
"RTN","GMRVSR1",4,0)
 S GRPT=5,GMRHT=0 D SETIO^GMRVGR0 D DEM^VADPT,INP^VADPT S GMRBTH=$P(VADM(3),"^",2),GMRNAM=VADM(1)
"RTN","GMRVSR1",5,0)
 F GMRK="P","T","B","H","W","R","PO2","CVP","CG","XI1" D GMRDT^GMRVVS3
"RTN","GMRVSR1",6,0)
 I $D(^TMP($J,"GMRVG","I")) F GMRI=0:0 S GMRI=$O(^TMP($J,"GMRVG","I",GMRI)) Q:GMRI'>0  S GFOUND=0 D CKDT^GMRVVS3 S:GFOUND=0 ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMRVSR1",7,0)
 I $D(^TMP($J,"GMRVG","O")) F GMRI=0:0 S GMRI=$O(^TMP($J,"GMRVG","O",GMRI)) Q:GMRI'>0  S GFOUND=0 D CKDT^GMRVVS3 S:GFOUND=0 ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMRVSR1",8,0)
 S (GMRTNM,GMRI)=0 I $D(^TMP($J,"GMRDT")) F  S GMRI=$O(^TMP($J,"GMRDT",GMRI)) Q:GMRI'>0  S GMRTNM=GMRTNM+1
"RTN","GMRVSR1",9,0)
 D GRAPH K GMR3,GMRDAT,GMREN,GMRHDR1,GMRHDR11,GMRHDR10,GMRHDR2,GMRHT,GMRI,GMRJ,GMRK,GMRLINE,GDATA,GMROLD,GMRP,GMRPDIF,GMRPG,GMRPGC,GMRPGS,GMRPHI,GMRPLO,GMRPOFF,GMRSITE,GMRT,GMRTDIF,GMRTHI,GMRTLO,GMRTNM
"RTN","GMRVSR1",10,0)
 K GLPRNTR,GMRTOFF,GMRTY,GMRNM,GMRVX,GMRVX1,GMRVX2,^TMP($J,"GMRDT"),^TMP($J,"GMRG"),^TMP($J,"GMR")
"RTN","GMRVSR1",11,0)
 Q
"RTN","GMRVSR1",12,0)
GRAPH ;
"RTN","GMRVSR1",13,0)
 S:'$D(GFLAG) GFLAG=0 S GMRPGC=0,GMRX1="" F X=1:1:10 S GMRX1=GMRX1_"          "_"|"
"RTN","GMRVSR1",14,0)
 S (GMRX,GMRX2)=GMRX1 F X=1:1:10 S $P(GMRX,"|",X)="__________",$P(GMRX2,"|",X)="----------"
"RTN","GMRVSR1",15,0)
 S GMRPG=$S(GMRTNM=0:1,1:GMRTNM\10+$S(GMRTNM#10>0:1,1:0)) F GMRPGS=1:1:GMRPG S GMRTLO=105.8335,GMRPLO=168.335 D PAGE Q:GMROUT
"RTN","GMRVSR1",16,0)
 K GDIP,GDOP,GRNDIP,GRNDOP,GSIP,GSOP Q
"RTN","GMRVSR1",17,0)
PAGE ;
"RTN","GMRVSR1",18,0)
 K GMRQUAL,GLINE W:'($E(IOST)'="C"&'GFLAG) @IOF S GFLAG=1,GMRPGC=GMRPGC+1 W !
"RTN","GMRVSR1",19,0)
 I '$D(^TMP($J,"GMR")) W !!!!!!!!,?5,"THERE  IS  NO  DATA  FOR  THIS  REPORT" X "F Y=$Y:1:(IOSL-6) W !" D FOOTER^GMRVVS2 Q
"RTN","GMRVSR1",20,0)
 W ! D DATES^GMRVVS2 W !,?3,"Pulse Temp/F/C",?17,"|",?18,GMRX
"RTN","GMRVSR1",21,0)
 F GMRI=0:0 Q:$Y>43  W ! D SETHD^GMRVVS4 W ?2,$S(GMRHDR1'["41.1":GMRHDR1,1:""),?16,$S(GMR3!($Y=28):"-",1:""),?17,"|" D DATAPRT^GMRVVS4
"RTN","GMRVSR1",22,0)
 W !,?17,"|",GMRX2 F GMRI="T","P","R","B","B1","B2","W","H","PO2","CVP","CG" S GMRLINE(GMRI)=GMRX1
"RTN","GMRVSR1",23,0)
 S (GMRLINE("H1"),GMRLINE("W1"),GMRLINE("BMI"),GMRLINE("P1"),GMRLINE("OX1"),GMRLINE("OX2"),GMRLINE("OX3"),GMRLINE("CVP1"),GMRLINE("CG1"),GMRLINE("CG2"))=GMRX1
"RTN","GMRVSR1",24,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  F GMRI="T","P","R","H","W","PO2","CVP","CG" D:$D(^TMP($J,"GMR",GMRI,GMRDT)) STLNP^GMRVVS1
"RTN","GMRVSR1",25,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  D BP^GMRVVS2
"RTN","GMRVSR1",26,0)
 F GMRI="T","P","P1","R","PO2","OX1","OX2","OX3","B","B1","B2","W","W1","BMI","H","H1","CG","CG2","CVP","CVP1" D
"RTN","GMRVSR1",27,0)
 .S G=$S(GMRI="T":"Temperature",GMRI="P":"Pulse",GMRI="R":"Respiration",GMRI="W":"Weight (lb)",GMRI="H":"Height (in)",GMRI="B":"BLOOD",GMRI="B1":"  PRESSURE",GMRI="W1":"       (kg)",GMRI="H1":"       (cm)",GMRI="BMI":"Body Mass Index",1:"")
"RTN","GMRVSR1",28,0)
 . I G="" S G=$S(GMRI="PO2":"Pulse Ox.",GMRI="OX1":"  L/Min",GMRI="OX2":"  %",GMRI="OX3":"  Method",GMRI="CG":"C/G (in)",GMRI="CVP":"CVP (cm H2O)",GMRI="CVP1":"    (mm Hg)",GMRI="CG2":"    (cm)",1:"")
"RTN","GMRVSR1",29,0)
 . W !,G,?17,"|",GMRLINE(GMRI)
"RTN","GMRVSR1",30,0)
 D IO I 'GMROUT W !,?17,$$REPEAT^XLFSTR("-",111)
"RTN","GMRVSR1",31,0)
 W !,"T: Temperature     P: Pulse     C/G: Circumference/Girth     * - Abnormal value     ** - Abnormal value off of graph"
"RTN","GMRVSR1",32,0)
 W ! I $D(GMRQUAL) S GLPRNTR=1 D LEGEND^GMRVLGQU F I=1:1:5 W !,GLINE(I)
"RTN","GMRVSR1",33,0)
 I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMRVSR1",34,0)
 D FOOTER^GMRVVS2 S GMRDT="" F GMRNM=1:1:10 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMRVSR1",35,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMRVSR1",36,0)
IO ;PRINT INTAKE/OUTPUT SECTION OF VITAL SIGNS-I/O SHEET
"RTN","GMRVSR1",37,0)
 S (GMRLINE("I"),GMRLINE("O"))=GMRX1
"RTN","GMRVSR1",38,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  S GDT=+$E(GMRDT,1,7) I $D(^TMP($J,"GMRVG","I",GDT))!($D(^TMP($J,"GMRVG","O",GDT))) D SETDATA
"RTN","GMRVSR1",39,0)
 W !,"Intake(24 Hr)(cc)",?17,"|",GMRLINE("I")
"RTN","GMRVSR1",40,0)
 W !,"Output(24 Hr)(cc)",?17,"|",GMRLINE("O")
"RTN","GMRVSR1",41,0)
 Q
"RTN","GMRVSR1",42,0)
SETDATA ; FILL GMRLINE WITH I/O DATA AND WRITE GMRLINE
"RTN","GMRVSR1",43,0)
 I $D(^TMP($J,"GMRVG","I",GDT)) S GDATA=$O(^(GDT,0)) S:GDATA>0 $P(GMRLINE("I"),"|",GMRNM)=$E(GDATA_"          ",1,10) K ^TMP($J,"GMRVG","I",GDT)
"RTN","GMRVSR1",44,0)
 I $D(^TMP($J,"GMRVG","O",GDT)) S GDATA=$O(^(GDT,0)) S:GDATA>0 $P(GMRLINE("O"),"|",GMRNM)=$E(GDATA_"          ",1,10) K ^TMP($J,"GMRVG","O",GDT)
"RTN","GMRVSR1",45,0)
 Q
"RTN","GMRVSR1",46,0)
SELECT(J) ;TYPE OF GRAPH FOR REPORT
"RTN","GMRVSR1",47,0)
 N X,I W !
"RTN","GMRVSR1",48,0)
TRYAGN F I=1:1:5 W !,?2,I_"  "_$P($T(GCHART+I),";;",2)
"RTN","GMRVSR1",49,0)
 W !!,?2,"Select a number between 1 and 5: 1  Vital Signs Record// " S X="" R X:DTIME I '$T!(X["^") S J=0 Q
"RTN","GMRVSR1",50,0)
 I X="" S J=1 Q
"RTN","GMRVSR1",51,0)
 I $L(X)>2 G TRYAGN
"RTN","GMRVSR1",52,0)
 I '(X?1N&(X>0&(X<6)))!(X["?") W !!,"Enter the number for the graph you wish to print.",!,"The default is Vital Signs Record.",! G TRYAGN
"RTN","GMRVSR1",53,0)
 W "  ",$P($T(GCHART+X),";;",2) S J=X Q
"RTN","GMRVSR1",54,0)
 Q
"RTN","GMRVSR1",55,0)
WRT1 W !!,?5,$C(7),"This report must be queued to a 132 column printer.",!!
"RTN","GMRVSR1",56,0)
 Q
"RTN","GMRVSR1",57,0)
SETT ; SET GMRT
"RTN","GMRVSR1",58,0)
 D SETT^GMRVSR2 Q
"RTN","GMRVSR1",59,0)
GCHART ;
"RTN","GMRVSR1",60,0)
 ;;Vital Signs Record
"RTN","GMRVSR1",61,0)
 ;;B/P Plotting Chart
"RTN","GMRVSR1",62,0)
 ;;Weight Chart
"RTN","GMRVSR1",63,0)
 ;;Pulse Oximetry/Respiratory Graph
"RTN","GMRVSR1",64,0)
 ;;Pain Chart
"RTN","GMRVUT1")
0^28^B20097491
"RTN","GMRVUT1",1,0)
GMRVUT1 ;HIRMFO/YH-VITAL SIGNS INFORMATION ;2/5/99
"RTN","GMRVUT1",2,0)
 ;;4.0;Vitals/Measurements;**6,7**;Apr 25, 1997
"RTN","GMRVUT1",3,0)
T ;HELP INFORMATION FOR TEMPERATURE
"RTN","GMRVUT1",4,0)
 S GMRVITY="T",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",5,0)
 W !,"** Temperature:  a number + a location qualifier(optional), e.g., 99.6A",!,?3,"or 99.6AX (F AXILLARY) or 37R (C RECTAL)." S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+4 D CHECK Q
"RTN","GMRVUT1",6,0)
P ;HELP INFORMATION FOR PULSE
"RTN","GMRVUT1",7,0)
 S GMRVITY="P",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",8,0)
 W !,"** Pulse:  a number + a location qualifier(optional), e.g., 70A or 70AP",!,?3,"(70 APICAL).  " S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+5 D CHECK Q
"RTN","GMRVUT1",9,0)
R ;HELP INFORMATION FOR RESPIRATORY
"RTN","GMRVUT1",10,0)
 S GMRVITY="R",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",11,0)
 W !,"** Respiration:  a number(0-99 with no decimal places) + method qualifier" S GLINE=$G(GLINE)+1 D CHECK W !,?3,"(optional) e.g., 40C or 40c." S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+1 D CHECK Q
"RTN","GMRVUT1",12,0)
BP ;HELP INFORMATION FOR BLOOD PRESSURE
"RTN","GMRVUT1",13,0)
 W !,"** B/P:  systolic/intermediate/diastolic" S GLINE=$G(GLINE)+1 D CHECK W !,?3,"intermediate pressure is optional, e.g., 98/64 or 120/100/80" S GLINE=$G(GLINE)+1 D CHECK Q
"RTN","GMRVUT1",14,0)
HT ;HELP INFORMATION FOR HEIGHT
"RTN","GMRVUT1",15,0)
 W !,"** Height:  a number + ',' (optional) + qualifier (2 decimals allowed)" S GLINE=$G(GLINE)+1 D CHECK
"RTN","GMRVUT1",16,0)
 S GMRVITY="HT",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",17,0)
 W !,?3,"72I (inches)   147C (centimeters)" S GLINE=$G(GLINE)+1 D CHECK W !,?3,"5F10IE or 5'10""E (for 5 feet 10 inches ESTIMATED)" S GLINE=$G(GLINE)+1 D CHECK
"RTN","GMRVUT1",18,0)
 S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+2 D CHECK Q
"RTN","GMRVUT1",19,0)
CG ;HELP INFORMATION FOR CIRCUMFERENCE/GIRTH
"RTN","GMRVUT1",20,0)
 D CG^GMRVUTL1  S GLINE=$G(GLINE)+3 D CHECK Q
"RTN","GMRVUT1",21,0)
CVP ;
"RTN","GMRVUT1",22,0)
 D CVP^GMRVUTL1 Q
"RTN","GMRVUT1",23,0)
PO2 ;
"RTN","GMRVUT1",24,0)
 D PO2^GMRVUTL1 S GLINE=$G(GLINE)+2 D CHECK Q
"RTN","GMRVUT1",25,0)
PN ;HELP INFORMATION
"RTN","GMRVUT1",26,0)
 D PAIN^GMRVUTL1 S GLINE=$G(GLINE)+4 D CHECK Q
"RTN","GMRVUT1",27,0)
WT ;HELP INFORMATION FOR WEIGHT
"RTN","GMRVUT1",28,0)
 S GMRVITY="WT",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",29,0)
 W !,"** Weight: a number+L(l) or a number+K(k) + 2nd quality (optional) 2 decimals" S GLINE=$G(GLINE)+1 D CHECK W !,?3,"allowed, e.g., 120.25L or 120l (pounds),   45.25K or 45k (kilograms)." S GLINE=$G(GLINE)+1
"RTN","GMRVUT1",30,0)
 D CHECK W !,?3,"120L, 120LA, or 120K for actual weight." S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+2 D CHECK Q
"RTN","GMRVUT1",31,0)
WTYPE ;ENTRY POIT FOR TYPE OF WEIGHT - ACTUAL/ESTIMATED/DRY
"RTN","GMRVUT1",32,0)
 K GMRW S (GMRVDFLT,GMRW)="",GLVL=9 D LISTQ^GMRVQUAL Q:'$D(GMRW)
"RTN","GMRVUT1",33,0)
 S GMRSITE=$P(X,+X,2) I $L(GMRSITE)=1,"LlKk"[GMRSITE S GMRSITE(GMRVITY)=$G(GMRVDFLT(1)) W ! G OTHERQ
"RTN","GMRVUT1",34,0)
 I $L(GMRSITE)=1,"LlKk"'[GMRSITE Q
"RTN","GMRVUT1",35,0)
 S:$L(GMRSITE)>1 GMRSITE=$$UP^XLFSTR($E(GMRSITE,2,30))
"RTN","GMRVUT1",36,0)
ASK3 K GMRV S GMRV=0 D SETSITE^GMRVUT3 I GMRV>0!GMROUT G OTHERQ
"RTN","GMRVUT1",37,0)
 G ASK
"RTN","GMRVUT1",38,0)
 ;
"RTN","GMRVUT1",39,0)
TPSITE ;SITE FOR TEMP., PULSE, RESPIRATION AND HEIGHT
"RTN","GMRVUT1",40,0)
 K GMRW S (GMRVDFLT,GMRW)="",GLVL=9 D LISTQ^GMRVQUAL Q:'$D(GMRW)
"RTN","GMRVUT1",41,0)
ASK2 ;
"RTN","GMRVUT1",42,0)
 I GMRVITY="T"!(GMRVITY="R")!(GMRVITY="P"),GMRSITE="" S GMRSITE(GMRVITY)=$G(GMRVDFLT(1)) G OTHERQ
"RTN","GMRVUT1",43,0)
 I GMRVITY="HT",GMRSITE="" S GMRSITE(GMRVITY)="" G OTHERQ
"RTN","GMRVUT1",44,0)
ASK1 K GMRV S GMRV=0 D SETSITE^GMRVUT3 I GMROUT!(GMRV>0) G OTHERQ
"RTN","GMRVUT1",45,0)
 ;
"RTN","GMRVUT1",46,0)
ASK W !!,"Select one of the following qualifiers for "_GMRVIT(1)_" or <RET> for default" D LIST W !!,"Please enter "_$S(GMRVITY="T"!(GMRVITY="BP")!(GMRVITY="P"):"location: ",GMRVITY="R":"method: ",GMRVITY="WT":"quality: ",1:"")
"RTN","GMRVUT1",47,0)
 W $P($G(GMRVDFLT(1)),"^")_"// "
"RTN","GMRVUT1",48,0)
 S GMRSITE="" R GMRSITE:DTIME S:'$T!(GMRSITE["^") GMROUT=1 I GMROUT W ! G OTHERQ
"RTN","GMRVUT1",49,0)
 S GMRSITE=$$UP^XLFSTR(GMRSITE) I GMRSITE="" S (GMRSITE,GMRSITE(GMRVITY))=$G(GMRVDFLT(1)) G OTHERQ
"RTN","GMRVUT1",50,0)
 G ASK3:GMRVITY="WT",ASK1
"RTN","GMRVUT1",51,0)
OTHERQ ;
"RTN","GMRVUT1",52,0)
 Q:GMROUT!(GMRENTY<5)  D OTHERQ^GMRVQUAL
"RTN","GMRVUT1",53,0)
 Q
"RTN","GMRVUT1",54,0)
CHECK ;
"RTN","GMRVUT1",55,0)
 I GLINE>14 D
"RTN","GMRVUT1",56,0)
 . W !,"<Ret> to continue " S J="" R J:DTIME S GLINE=0
"RTN","GMRVUT1",57,0)
 Q
"RTN","GMRVUT1",58,0)
LIST ;LIST SITES FOR THE SELECTED VM TYPE
"RTN","GMRVUT1",59,0)
 Q:'$D(GMRW)  S GMRZ="" F  S GMRZ=$O(GMRW(GMRZ)) Q:GMRZ=""  W !,?4,GMRZ
"RTN","GMRVUT1",60,0)
 Q
"RTN","GMRVUTL1")
0^29^B5143262
"RTN","GMRVUTL1",1,0)
GMRVUTL1 ;HIRMFO/YH-VITALS/MEASUREMENTS UTILITY ;2/4/99
"RTN","GMRVUTL1",2,0)
 ;;4.0;Vitals/Measurements;**7**;Apr 25, 1997
"RTN","GMRVUTL1",3,0)
CG ;HELP INFORMATION FOR CIRCUMFERENCE/GIRTH
"RTN","GMRVUTL1",4,0)
 W !,"** Circumference:  a number + 'I' or 'C' (2 decimals allowed)",!,?3,"For example:  72.25I (inches)   147C (centimeters)",!,?3,"Default: INCHES"
"RTN","GMRVUTL1",5,0)
 Q
"RTN","GMRVUTL1",6,0)
CVP ;HELP INFORMATION FOR CVP
"RTN","GMRVUTL1",7,0)
 W !,"** Central venous pressure:  a number for cmH2O measurement",!,?3,"or a number + 'G' for mmHg measurement (1 decimal allowed).",!,?3,"A negative number can be entered up to & including -13 cmH2O or -9.6 mmHg.",! Q
"RTN","GMRVUTL1",8,0)
PO2 ;HELP INFORMATION FOR PULSE OXIMETRY
"RTN","GMRVUTL1",9,0)
 W !,"** Pulse Oximetry:  Enter the numeric value of the patients Pulse Oximetry.",!,?3,"The value will be interpreted as a percentage."
"RTN","GMRVUTL1",10,0)
 Q
"RTN","GMRVUTL1",11,0)
PAIN ;HELP INFORMATION FOR PAIN
"RTN","GMRVUTL1",12,0)
 W !,"** Pain:  Enter a numeric value. 0 for no pain. 1-10 for pain scale",!,?3,"10 is worst imaginable pain or enter 99 if the patient is unable to respond"
"RTN","GMRVUTL1",13,0)
 W !,?3,"For example: 99 or 5"
"RTN","GMRVUTL1",14,0)
 Q
"SEC","^DIC",120.51,120.51,0,"DD")
@
"SEC","^DIC",120.51,120.51,0,"DEL")
@
"SEC","^DIC",120.51,120.51,0,"LAYGO")
@
"SEC","^DIC",120.51,120.51,0,"RD")

"SEC","^DIC",120.51,120.51,0,"WR")
@
"VER")
8.0^21.0
"^DD",120.51,120.51,0)
FIELD^^7^8
"^DD",120.51,120.51,0,"DDA")
N
"^DD",120.51,120.51,0,"DT")
2960723
"^DD",120.51,120.51,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",120.51,120.51,0,"IX","APCE",120.51,7)

"^DD",120.51,120.51,0,"IX","B",120.51,.01)

"^DD",120.51,120.51,0,"IX","C",120.51,1)

"^DD",120.51,120.51,0,"NM","GMRV VITAL TYPE")

"^DD",120.51,120.51,0,"PT",120.5,.03)

"^DD",120.51,120.51,0,"PT",120.521,.01)

"^DD",120.51,120.51,0,"PT",120.531,.01)

"^DD",120.51,120.51,0,"PT",142.14,.01)

"^DD",120.51,120.51,0,"PT",811.944,.01)

"^DD",120.51,120.51,0,"VRPK")
GMRV
"^DD",120.51,120.51,.01,0)
NAME^RF^^0;1^K:$L(X)>50!($L(X)<2)!'(X'?1P.E) X
"^DD",120.51,120.51,.01,1,0)
^.1
"^DD",120.51,120.51,.01,1,1,0)
120.51^B
"^DD",120.51,120.51,.01,1,1,1)
S ^GMRD(120.51,"B",$E(X,1,30),DA)=""
"^DD",120.51,120.51,.01,1,1,2)
K ^GMRD(120.51,"B",$E(X,1,30),DA)
"^DD",120.51,120.51,.01,1,1,"%D",0)
^^1^1^2950926^^^
"^DD",120.51,120.51,.01,1,1,"%D",1,0)
This cross-reference is automatically created on .01 field.
"^DD",120.51,120.51,.01,3)
ANSWER MUST BE 2-50 CHARACTERS IN LENGTH
"^DD",120.51,120.51,.01,21,0)
^^1^1^2931222^^^^
"^DD",120.51,120.51,.01,21,1,0)
This field reflects a list of vital signs/physical measurement types.
"^DD",120.51,120.51,1,0)
ABBREVIATION^RFI^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>5!($L(X)<1)!'(X'?1P.E&(X'[";")) X
"^DD",120.51,120.51,1,1,0)
^.1
"^DD",120.51,120.51,1,1,1,0)
120.51^C
"^DD",120.51,120.51,1,1,1,1)
S ^GMRD(120.51,"C",$E(X,1,30),DA)=""
"^DD",120.51,120.51,1,1,1,2)
K ^GMRD(120.51,"C",$E(X,1,30),DA)
"^DD",120.51,120.51,1,1,1,"%D",0)
^^2^2^2950926^^^
"^DD",120.51,120.51,1,1,1,"%D",1,0)
This regular cross-reference is created to sort the file by the
"^DD",120.51,120.51,1,1,1,"%D",2,0)
ABBREVIATION and the associated NAME (.01).
"^DD",120.51,120.51,1,3)
Answer must be 1-5 characters in length.
"^DD",120.51,120.51,1,21,0)
^^1^1^2970108^^^^
"^DD",120.51,120.51,1,21,1,0)
This field contains an abbreviation for this vital type.
"^DD",120.51,120.51,1,"DT")
2970108
"^DD",120.51,120.51,2,0)
*SITE^S^0:NO;1:YES;^0;3^Q
"^DD",120.51,120.51,2,.1)
SITE
"^DD",120.51,120.51,2,21,0)
^^4^4^2960718^^^^
"^DD",120.51,120.51,2,21,1,0)
This field specifies whether or not the vital measurement record with 
"^DD",120.51,120.51,2,21,2,0)
this vital type has a site associated with it.
"^DD",120.51,120.51,2,21,3,0)
 
"^DD",120.51,120.51,2,21,4,0)
This field will be deleted in the next version of Vitals/Measurements.
"^DD",120.51,120.51,2,"DT")
2960718
"^DD",120.51,120.51,3,0)
RATE^S^0:NO;1:YES;^0;4^Q
"^DD",120.51,120.51,3,21,0)
^^2^2^2940105^^^^
"^DD",120.51,120.51,3,21,1,0)
This field specifies whether or not the vital measurement record with
"^DD",120.51,120.51,3,21,2,0)
this vital type has a rate associated with it.
"^DD",120.51,120.51,4,0)
RATE INPUT TRANSFORM^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",120.51,120.51,4,3)
This is Standard MUMPS code.
"^DD",120.51,120.51,4,9)
@
"^DD",120.51,120.51,4,21,0)
^^3^3^2960723^
"^DD",120.51,120.51,4,21,1,0)
If a rate is specified for a vital measurement record, this field checks
"^DD",120.51,120.51,4,21,2,0)
the data validity.  The code stored in this field should only be updated
"^DD",120.51,120.51,4,21,3,0)
by someone with programmer's access to the FileMan.
"^DD",120.51,120.51,4,"DT")
2960723
"^DD",120.51,120.51,5,0)
RATE HELP^F^^0;6^K:$L(X)>30!($L(X)<3)!'(X'?1P.E&(X?.ANP)) X
"^DD",120.51,120.51,5,3)
Answer must be 3-30 characters in length.
"^DD",120.51,120.51,5,21,0)
^^2^2^2960910^^^^
"^DD",120.51,120.51,5,21,1,0)
This field contains the name of the Help Frame associated with this
"^DD",120.51,120.51,5,21,2,0)
Vital Type.
"^DD",120.51,120.51,5,"DT")
2960718
"^DD",120.51,120.51,6,0)
*QUALITY^S^0:NO;1:YES;^0;5^Q
"^DD",120.51,120.51,6,.1)
QUALITY
"^DD",120.51,120.51,6,21,0)
^^4^4^2960718^^^^
"^DD",120.51,120.51,6,21,1,0)
This field specifies whether or not a vital measurement record with this 
"^DD",120.51,120.51,6,21,2,0)
vital type has a quality associated with it.
"^DD",120.51,120.51,6,21,3,0)
 
"^DD",120.51,120.51,6,21,4,0)
This field will be deleted in the next version of Vitals/Measurements.
"^DD",120.51,120.51,6,"DT")
2960718
"^DD",120.51,120.51,7,0)
PCE ABBREVIATION^F^^0;7^K:$L(X)>10!($L(X)<1) X
"^DD",120.51,120.51,7,1,0)
^.1
"^DD",120.51,120.51,7,1,1,0)
120.51^APCE
"^DD",120.51,120.51,7,1,1,1)
S ^GMRD(120.51,"APCE",$E(X,1,30),DA)=""
"^DD",120.51,120.51,7,1,1,2)
K ^GMRD(120.51,"APCE",$E(X,1,30),DA)
"^DD",120.51,120.51,7,1,1,"%D",0)
^^1^1^2970203^^
"^DD",120.51,120.51,7,1,1,"%D",1,0)
This is a regular cross-reference on the PCE Abbreviation field.
"^DD",120.51,120.51,7,1,1,"DT")
2960710
"^DD",120.51,120.51,7,3)
Answer must be 1-10 characters in length.
"^DD",120.51,120.51,7,21,0)
^^1^1^2960710^
"^DD",120.51,120.51,7,21,1,0)
This field contains the PCE Abbreviation for this Vital Type.
"^DD",120.51,120.51,7,"DT")
2960710
"^DIC",120.51,120.51,0)
GMRV VITAL TYPE^120.51I
"^DIC",120.51,120.51,0,"GL")
^GMRD(120.51,
"^DIC",120.51,120.51,"%",0)
^1.005^2^2
"^DIC",120.51,120.51,"%",1,0)
GMTS
"^DIC",120.51,120.51,"%",2,0)
PXRM
"^DIC",120.51,120.51,"%","B","GMTS",1)

"^DIC",120.51,120.51,"%","B","PXRM",2)

"^DIC",120.51,120.51,"%D",0)
^^2^2^2970206^^^^
"^DIC",120.51,120.51,"%D",1,0)
This file contains a list of vital sign types, and various parameters
"^DIC",120.51,120.51,"%D",2,0)
which mold the data entry.
"^DIC",120.51,"B","GMRV VITAL TYPE",120.51)

**END**
**END**

Released XU*8*328 SEQ #304
Extracted from mail message
**KIDS**:XU*8.0*328^

**INSTALL NAME**
XU*8.0*328
"BLD",787,0)
XU*8.0*328^KERNEL^0^3040708^y
"BLD",787,1,0)
^^2^2^3031020^
"BLD",787,1,1,0)
See patch XU*8*328 in the National Patch Module for complete information
"BLD",787,1,2,0)
on this patch.
"BLD",787,4,0)
^9.64PA^5^1
"BLD",787,4,5,0)
5
"BLD",787,4,5,2,0)
^9.641^5.01^1
"BLD",787,4,5,2,5.01,0)
COUNTY  (sub-file)
"BLD",787,4,5,2,5.01,1,0)
^9.6411^5^1
"BLD",787,4,5,2,5.01,1,5,0)
INACTIVE DATE
"BLD",787,4,5,222)
y^n^p^^^^n^^n
"BLD",787,4,5,224)

"BLD",787,4,"APDD",5,5.01)

"BLD",787,4,"APDD",5,5.01,5)

"BLD",787,4,"B",5,5)

"BLD",787,"INI")

"BLD",787,"INIT")
XU8P328
"BLD",787,"KRN",0)
^9.67PA^8989.52^19
"BLD",787,"KRN",.4,0)
.4
"BLD",787,"KRN",.401,0)
.401
"BLD",787,"KRN",.402,0)
.402
"BLD",787,"KRN",.403,0)
.403
"BLD",787,"KRN",.5,0)
.5
"BLD",787,"KRN",.84,0)
.84
"BLD",787,"KRN",3.6,0)
3.6
"BLD",787,"KRN",3.8,0)
3.8
"BLD",787,"KRN",9.2,0)
9.2
"BLD",787,"KRN",9.8,0)
9.8
"BLD",787,"KRN",9.8,"NM",0)
^9.68A^6^5
"BLD",787,"KRN",9.8,"NM",1,0)
XU8P328A^^0^B11908029
"BLD",787,"KRN",9.8,"NM",2,0)
XU8P328B^^0^B25437858
"BLD",787,"KRN",9.8,"NM",4,0)
XU8P328C^^0^B43793116
"BLD",787,"KRN",9.8,"NM",5,0)
XIPSYNC^^0^B5380874
"BLD",787,"KRN",9.8,"NM",6,0)
XU8P328D^^0^B9123396
"BLD",787,"KRN",9.8,"NM","B","XIPSYNC",5)

"BLD",787,"KRN",9.8,"NM","B","XU8P328A",1)

"BLD",787,"KRN",9.8,"NM","B","XU8P328B",2)

"BLD",787,"KRN",9.8,"NM","B","XU8P328C",4)

"BLD",787,"KRN",9.8,"NM","B","XU8P328D",6)

"BLD",787,"KRN",19,0)
19
"BLD",787,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",787,"KRN",19,"NM",1,0)
XIP SYNCHRONIZE COUNTY^^0
"BLD",787,"KRN",19,"NM","B","XIP SYNCHRONIZE COUNTY",1)

"BLD",787,"KRN",19.1,0)
19.1
"BLD",787,"KRN",101,0)
101
"BLD",787,"KRN",409.61,0)
409.61
"BLD",787,"KRN",771,0)
771
"BLD",787,"KRN",870,0)
870
"BLD",787,"KRN",8989.51,0)
8989.51
"BLD",787,"KRN",8989.52,0)
8989.52
"BLD",787,"KRN",8994,0)
8994
"BLD",787,"KRN","B",.4,.4)

"BLD",787,"KRN","B",.401,.401)

"BLD",787,"KRN","B",.402,.402)

"BLD",787,"KRN","B",.403,.403)

"BLD",787,"KRN","B",.5,.5)

"BLD",787,"KRN","B",.84,.84)

"BLD",787,"KRN","B",3.6,3.6)

"BLD",787,"KRN","B",3.8,3.8)

"BLD",787,"KRN","B",9.2,9.2)

"BLD",787,"KRN","B",9.8,9.8)

"BLD",787,"KRN","B",19,19)

"BLD",787,"KRN","B",19.1,19.1)

"BLD",787,"KRN","B",101,101)

"BLD",787,"KRN","B",409.61,409.61)

"BLD",787,"KRN","B",771,771)

"BLD",787,"KRN","B",870,870)

"BLD",787,"KRN","B",8989.51,8989.51)

"BLD",787,"KRN","B",8989.52,8989.52)

"BLD",787,"KRN","B",8994,8994)

"BLD",787,"PRE")

"BLD",787,"QUES",0)
^9.62^^
"BLD",787,"REQB",0)
^9.611^3^3
"BLD",787,"REQB",1,0)
XU*8.0*292^2
"BLD",787,"REQB",2,0)
XU*8.0*307^2
"BLD",787,"REQB",3,0)
XU*8.0*295^2
"BLD",787,"REQB","B","XU*8.0*292",1)

"BLD",787,"REQB","B","XU*8.0*295",3)

"BLD",787,"REQB","B","XU*8.0*307",2)

"FIA",5)
STATE
"FIA",5,0)
^DIC(5,
"FIA",5,0,0)
5
"FIA",5,0,1)
y^n^p^^^^n^^n
"FIA",5,0,10)

"FIA",5,0,11)

"FIA",5,0,"RLRO")

"FIA",5,0,"VR")
8.0^XU
"FIA",5,5)
1
"FIA",5,5.01)
1
"FIA",5,5.01,5)

"INIT")
XU8P328
"KRN",19,955,-1)
0^1
"KRN",19,955,0)
XIP SYNCHRONIZE COUNTY^Queuable Synchronize County Multiple With 5.13^^A^^^^^^^^KERNEL^^1
"KRN",19,955,1,0)
^^6^6^3031020^
"KRN",19,955,1,1,0)
This menu option will synchronize the master COUNTY CODE(#5.13) file and
"KRN",19,955,1,2,0)
the STATE(#5) file's COUNTY multiple.
"KRN",19,955,1,3,0)
 
"KRN",19,955,1,4,0)
No output device is needed.  It is recommended that this option have a 
"KRN",19,955,1,5,0)
scheduling frequency of every 3 months, at a time when little to no
"KRN",19,955,1,6,0)
patient registration activity will be taking place.
"KRN",19,955,20)
D DEQUE^XIPSYNC
"KRN",19,955,200.9)
y
"KRN",19,955,"U")
QUEUABLE SYNCHRONIZE COUNTY MU
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^^0
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^2950703^2970507^.5
"PKG",3,22,1,"PAH",1,0)
328^3040708
"PKG",3,22,1,"PAH",1,1,0)
^^2^2^3040708
"PKG",3,22,1,"PAH",1,1,1,0)
See patch XU*8*328 in the National Patch Module for complete information
"PKG",3,22,1,"PAH",1,1,2,0)
on this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","XIPSYNC")
0^5^B5380874
"RTN","XIPSYNC",1,0)
XIPSYNC ;OIFOO/SO- SYNC UP FILE 5'S COUNTY MULTIPLE WITH 5.13;1:53 PM  9 Jan 2004
"RTN","XIPSYNC",2,0)
 ;;8.0;KERNEL;**328**;Jul 10, 1995
"RTN","XIPSYNC",3,0)
 Q
"RTN","XIPSYNC",4,0)
EP1 ;MAIN ENTRY POINT
"RTN","XIPSYNC",5,0)
 N XIPQ S XIPQ=0 ;ALLOW DIALOG TO DISPLAY OR PRINT
"RTN","XIPSYNC",6,0)
 D S1,S2
"RTN","XIPSYNC",7,0)
 Q
"RTN","XIPSYNC",8,0)
 ;
"RTN","XIPSYNC",9,0)
DEQUE ;DEQUEUING ENTRY POINT
"RTN","XIPSYNC",10,0)
 N XIPQ S XIPQ=1 ;KEEP DIALOG FROM DISPLAYING OR PRINTING
"RTN","XIPSYNC",11,0)
 D S1,S2
"RTN","XIPSYNC",12,0)
 Q
"RTN","XIPSYNC",13,0)
 ;
"RTN","XIPSYNC",14,0)
S1 ;SET INACTIVE DATE FOR ALL COUNTIES TO DT
"RTN","XIPSYNC",15,0)
 N ST
"RTN","XIPSYNC",16,0)
 S ST=0 ;ST=STATE IEN
"RTN","XIPSYNC",17,0)
 I 'XIPQ D MES^XPDUTL("Begin updating COUNTY multiple...")
"RTN","XIPSYNC",18,0)
 F  S ST=$O(^DIC(5,ST)) Q:'ST  D
"RTN","XIPSYNC",19,0)
 . I +$P(^DIC(5,ST,0),U,3)>56,+$P(^(0),U,3)'=72 Q  ;NOT US STATE OR PR
"RTN","XIPSYNC",20,0)
 . N CO S CO=0 ;CO=COUNTY IEN
"RTN","XIPSYNC",21,0)
 . F  S CO=$O(^DIC(5,ST,1,CO)) Q:'CO  D
"RTN","XIPSYNC",22,0)
 .. I $P(^DIC(5,ST,1,CO,0),U,5)]"" Q  ;DON'T CHANGE DATE
"RTN","XIPSYNC",23,0)
 .. N FDA,DIERR,EM
"RTN","XIPSYNC",24,0)
 .. S FDA(5.01,CO_","_ST_",",5)=DT
"RTN","XIPSYNC",25,0)
 .. D FILE^DIE("","FDA","EM")
"RTN","XIPSYNC",26,0)
 .. Q
"RTN","XIPSYNC",27,0)
 Q
"RTN","XIPSYNC",28,0)
 ;
"RTN","XIPSYNC",29,0)
S2 ;EDIT COUNTY MULTIPLE USING FILE 5.13
"RTN","XIPSYNC",30,0)
 N IEN,X,FST,FCO
"RTN","XIPSYNC",31,0)
 ;FST=2 DIGIT STATE FIPS CODE, FCO=3 DIGIT COUNTY FIPS CODE
"RTN","XIPSYNC",32,0)
 S IEN=0 ;5.13'S IEN
"RTN","XIPSYNC",33,0)
 F  S IEN=$O(^XIP(5.13,IEN)) Q:'IEN  S X=^XIP(5.13,IEN,0),FST=$E(X,1,2),FCO=$E(X,3,5) D
"RTN","XIPSYNC",34,0)
 . N ST,CO
"RTN","XIPSYNC",35,0)
 . S ST=0,CO=0
"RTN","XIPSYNC",36,0)
 . S ST=$O(^DIC(5,"C",FST,ST))
"RTN","XIPSYNC",37,0)
 . I 'ST,'XIPQ D MES^XPDUTL("Can not find STATE CODE: "_FST_" in STATE file.") Q
"RTN","XIPSYNC",38,0)
 . S CO=$O(^DIC(5,ST,1,"C",FCO,CO))
"RTN","XIPSYNC",39,0)
 . I 'CO D  Q  ;ADD COUNTY
"RTN","XIPSYNC",40,0)
 .. N DIERR,EM,FDA
"RTN","XIPSYNC",41,0)
 .. I 'XIPQ D MES^XPDUTL("Adding County: "_$P(X,U,2)_"("_FCO_")"_" to State: "_$$GET1^DIQ(5,ST_",",.01))
"RTN","XIPSYNC",42,0)
 .. S FDA(5.01,"?+1,"_ST_",",.01)=$P(X,U,2)
"RTN","XIPSYNC",43,0)
 .. S FDA(5.01,"?+1,"_ST_",",2)=FCO
"RTN","XIPSYNC",44,0)
 .. D UPDATE^DIE("","FDA","","EM")
"RTN","XIPSYNC",45,0)
 .. Q
"RTN","XIPSYNC",46,0)
 . I CO D  Q  ;REACTIVATE COUNTY
"RTN","XIPSYNC",47,0)
 .. N DIERR,EM,FDA
"RTN","XIPSYNC",48,0)
 .. S FDA(5.01,CO_","_ST_",",5)=$S($P(X,U,4)]"":$P(X,U,4),1:"")
"RTN","XIPSYNC",49,0)
 .. D  ;SPELL CHECK 5.13 v STATE FILE'S COUNTY
"RTN","XIPSYNC",50,0)
 ... N DIERR,X1
"RTN","XIPSYNC",51,0)
 ... S X1=$$GET1^DIQ(5.01,CO_",",.01)
"RTN","XIPSYNC",52,0)
 ... I X1'=$P(X,U,2) S FDA(5.01,CO_","_ST_",",.01)=$P(X,U,2)
"RTN","XIPSYNC",53,0)
 .. D FILE^DIE("","FDA","EM")
"RTN","XIPSYNC",54,0)
 .. Q
"RTN","XIPSYNC",55,0)
 . Q
"RTN","XIPSYNC",56,0)
 I 'XIPQ D MES^XPDUTL("Finished updating COUNTY multiple.")
"RTN","XIPSYNC",57,0)
 Q
"RTN","XU8P328")
0^^B669152
"RTN","XU8P328",1,0)
XU8P328 ;OIFOO/SO- POST INSTALL;6:40 AM  9 Mar 2004
"RTN","XU8P328",2,0)
 ;;8.0;KERNEL;**328**;Jul 10, 1995
"RTN","XU8P328",3,0)
 ;
"RTN","XU8P328",4,0)
 D ^XU8P328A ;EDIT COUNTY NAMES OF EXISTING COUNTY CODES($5.13) TO MATCH NPCD
"RTN","XU8P328",5,0)
 D ^XU8P328B ;ADD NPCD FIPS CODES TO COUNTY CODES(#5.13)
"RTN","XU8P328",6,0)
 D ^XU8P328C ;SYNC STATE(#5) COUNTY MULTIPLE TO COUNTY CODES(#(5.13)
"RTN","XU8P328",7,0)
 D ^XU8P328D ;SCAN PATIENT FILE FOR COUNTY STARTING WITH "ZZ"
"RTN","XU8P328",8,0)
 Q
"RTN","XU8P328A")
0^1^B11908029
"RTN","XU8P328A",1,0)
XU8P328A ;SFISC/SO- SYNC COUNTY SPELLING WITH NPCD ;10:22 AM  12 Jan 2004
"RTN","XU8P328A",2,0)
 ;;8.0;KERNEL;**328**;Jul 10, 1995
"RTN","XU8P328A",3,0)
BEG ;
"RTN","XU8P328A",4,0)
 N TAG,DATA
"RTN","XU8P328A",5,0)
 D MES^XPDUTL("Begin County Name Corrections in COUNTY CODE(#5.13) file...")
"RTN","XU8P328A",6,0)
 F TAG=1:1:99 Q:TAG=99  I $T(@TAG)]"" D
"RTN","XU8P328A",7,0)
 . S DATA=$P($T(@TAG),";;",2)
"RTN","XU8P328A",8,0)
 . N FDA,DIERR,ZERR,FIPS,IEN
"RTN","XU8P328A",9,0)
 . S FIPS=$P(DATA,","),IEN=$O(^XIP(5.13,"B",FIPS,0)) Q:'IEN
"RTN","XU8P328A",10,0)
 . S FDA(5.13,IEN_",",1)=$P(DATA,",",2)
"RTN","XU8P328A",11,0)
 . D FILE^DIE("","FDA","ZERR")
"RTN","XU8P328A",12,0)
 K ^XIP(5.13,"AC") ;CLEAN TRANSMISSION FLAG
"RTN","XU8P328A",13,0)
 D MES^XPDUTL("Finished with County Name corrections.")
"RTN","XU8P328A",14,0)
 Q
"RTN","XU8P328A",15,0)
 ;
"RTN","XU8P328A",16,0)
1 ;;01049,DEKALB,
"RTN","XU8P328A",17,0)
2 ;;01115,ST. CLAIR,
"RTN","XU8P328A",18,0)
3 ;;02016,ALEUTIANS WEST (CA),
"RTN","XU8P328A",19,0)
4 ;;02050,BETHEL (CA),
"RTN","XU8P328A",20,0)
5 ;;02070,DILLINGHAM (CA),
"RTN","XU8P328A",21,0)
6 ;;02170,MATANUSKA-SUSITNA,
"RTN","XU8P328A",22,0)
7 ;;02180,NOME (CA),
"RTN","XU8P328A",23,0)
10 ;;02240,SOUTHEAST FAIRBANKS (CA),
"RTN","XU8P328A",24,0)
11 ;;02261,VALDEZ-CORDOVA (CA),
"RTN","XU8P328A",25,0)
12 ;;02270,WADE HAMPTON (CA),
"RTN","XU8P328A",26,0)
13 ;;02280,WRANGELL-PETERSBURG (CA),
"RTN","XU8P328A",27,0)
14 ;;02290,YUKON-KOYUKUK (CA),
"RTN","XU8P328A",28,0)
15 ;;05123,ST. FRANCIS,
"RTN","XU8P328A",29,0)
16 ;;12027,DESOTO,
"RTN","XU8P328A",30,0)
17 ;;12109,ST. JOHNS,
"RTN","XU8P328A",31,0)
18 ;;12111,ST. LUCIE,
"RTN","XU8P328A",32,0)
19 ;;17037,DEKALB,
"RTN","XU8P328A",33,0)
20 ;;17039,DE WITT,
"RTN","XU8P328A",34,0)
21 ;;17043,DUPAGE,
"RTN","XU8P328A",35,0)
22 ;;17163,ST. CLAIR,
"RTN","XU8P328A",36,0)
23 ;;17183,VERMILLION,
"RTN","XU8P328A",37,0)
24 ;;18141,ST. JOSEPH,
"RTN","XU8P328A",38,0)
25 ;;19141,O'BRIEN,
"RTN","XU8P328A",39,0)
26 ;;22087,ST. BERNARD,
"RTN","XU8P328A",40,0)
27 ;;22089,ST. CHARLES,
"RTN","XU8P328A",41,0)
28 ;;22091,ST. HELENA,
"RTN","XU8P328A",42,0)
29 ;;22093,ST. JAMES,
"RTN","XU8P328A",43,0)
30 ;;22095,ST. JOHN THE BAPTIST,
"RTN","XU8P328A",44,0)
31 ;;22097,ST. LANDRY,
"RTN","XU8P328A",45,0)
32 ;;22099,ST. MARTIN,
"RTN","XU8P328A",46,0)
33 ;;22101,ST. MARY,
"RTN","XU8P328A",47,0)
34 ;;22103,ST. TAMMANY,
"RTN","XU8P328A",48,0)
35 ;;24033,PRINCE GEORGE'S,
"RTN","XU8P328A",49,0)
36 ;;24035,QUEEN ANNE'S,
"RTN","XU8P328A",50,0)
37 ;;24037,ST. MARY'S,
"RTN","XU8P328A",51,0)
38 ;;24510,BALTIMORE (CITY),
"RTN","XU8P328A",52,0)
39 ;;26147,ST. CLAIR,
"RTN","XU8P328A",53,0)
40 ;;26149,ST. JOSEPH,
"RTN","XU8P328A",54,0)
41 ;;27137,ST. LOUIS,
"RTN","XU8P328A",55,0)
42 ;;28033,DESOTO,
"RTN","XU8P328A",56,0)
43 ;;29183,ST. CHARLES,
"RTN","XU8P328A",57,0)
44 ;;29185,ST. CLAIR,
"RTN","XU8P328A",58,0)
45 ;;29186,STE. GENEVIEVE,
"RTN","XU8P328A",59,0)
46 ;;29187,ST. FRANCOIS,
"RTN","XU8P328A",60,0)
47 ;;29189,ST. LOUIS,
"RTN","XU8P328A",61,0)
48 ;;29510,ST. LOUIS (CITY),
"RTN","XU8P328A",62,0)
49 ;;35011,DEBACA,
"RTN","XU8P328A",63,0)
50 ;;36089,ST. LAWRENCE,
"RTN","XU8P328A",64,0)
51 ;;48123,DEWITT,
"RTN","XU8P328A",65,0)
52 ;;51510,ALEXANDRIA (CITY),
"RTN","XU8P328A",66,0)
53 ;;51520,BRISTOL (CITY),
"RTN","XU8P328A",67,0)
54 ;;51530,BUENA VISTA (CITY),
"RTN","XU8P328A",68,0)
55 ;;51540,CHARLOTTESVILLE (CITY),
"RTN","XU8P328A",69,0)
56 ;;51550,CHESAPEAKE (CITY),
"RTN","XU8P328A",70,0)
57 ;;51560,CLIFTON FORGE (CITY),
"RTN","XU8P328A",71,0)
58 ;;51570,COLONIAL HEIGHTS (CITY),
"RTN","XU8P328A",72,0)
59 ;;51580,COVINGTON (CITY),
"RTN","XU8P328A",73,0)
60 ;;51590,DANVILLE (CITY),
"RTN","XU8P328A",74,0)
61 ;;51600,FAIRFAX (CITY),
"RTN","XU8P328A",75,0)
62 ;;51610,FALLS CHURCH (CITY),
"RTN","XU8P328A",76,0)
63 ;;51620,FRANKLIN (CITY),
"RTN","XU8P328A",77,0)
64 ;;51630,FREDERICKSBURG (CITY),
"RTN","XU8P328A",78,0)
65 ;;51640,GALAX (CITY),
"RTN","XU8P328A",79,0)
66 ;;51650,HAMPTON (CITY),
"RTN","XU8P328A",80,0)
67 ;;51660,HARRISONBURG (CITY),
"RTN","XU8P328A",81,0)
68 ;;51670,HOPEWELL (CITY),
"RTN","XU8P328A",82,0)
69 ;;51678,LEXINGTON (CITY),
"RTN","XU8P328A",83,0)
70 ;;51680,LYNCHBURG (CITY),
"RTN","XU8P328A",84,0)
71 ;;51683,MANASSAS (CITY),
"RTN","XU8P328A",85,0)
72 ;;51685,MANASSAS PARK (CITY),
"RTN","XU8P328A",86,0)
73 ;;51690,MARTINSVILLE (CITY),
"RTN","XU8P328A",87,0)
74 ;;51700,NEWPORT NEWS (CITY),
"RTN","XU8P328A",88,0)
75 ;;51710,NORFOLK (CITY),
"RTN","XU8P328A",89,0)
76 ;;51720,NORTON (CITY),
"RTN","XU8P328A",90,0)
77 ;;51730,PETERSBURG (CITY),
"RTN","XU8P328A",91,0)
78 ;;51735,POQUOSON (CITY),
"RTN","XU8P328A",92,0)
79 ;;51740,PORTSMOUTH (CITY),
"RTN","XU8P328A",93,0)
80 ;;51750,RADFORD (CITY),
"RTN","XU8P328A",94,0)
81 ;;51760,RICHMOND (CITY),
"RTN","XU8P328A",95,0)
82 ;;51770,ROANOKE (CITY),
"RTN","XU8P328A",96,0)
83 ;;51775,SALEM (CITY),
"RTN","XU8P328A",97,0)
84 ;;51790,STAUNTON (CITY),
"RTN","XU8P328A",98,0)
85 ;;51800,SUFFOLK (CITY),
"RTN","XU8P328A",99,0)
86 ;;51810,VIRGINIA BEACH (CITY),
"RTN","XU8P328A",100,0)
87 ;;51820,WAYNESBORO (CITY),
"RTN","XU8P328A",101,0)
88 ;;51830,WILLIAMSBURG (CITY),
"RTN","XU8P328A",102,0)
89 ;;51840,WINCHESTER (CITY),
"RTN","XU8P328A",103,0)
90 ;;55109,ST. CROIX,
"RTN","XU8P328A",104,0)
91 ;;60050,WESTERN (DISTRICT),
"RTN","XU8P328A",105,0)
92 ;;78010,ST. CROIX,
"RTN","XU8P328A",106,0)
93 ;;78020,ST. JOHN,
"RTN","XU8P328A",107,0)
94 ;;78030,ST. THOMAS,
"RTN","XU8P328A",108,0)
99 ;;END
"RTN","XU8P328B")
0^2^B25437858
"RTN","XU8P328B",1,0)
XU8P328B ;SFISC/SO- ADD NPCD FIPS CODES;7:17 AM  12 Feb 2004
"RTN","XU8P328B",2,0)
 ;;8.0;KERNEL;**328**;Jul 10, 1995
"RTN","XU8P328B",3,0)
BEG ;
"RTN","XU8P328B",4,0)
 N TAG,DATA
"RTN","XU8P328B",5,0)
 D MES^XPDUTL("Begin Additions to COUNTY CODE(#5.13) file...")
"RTN","XU8P328B",6,0)
 F TAG=1:1:99 Q:TAG=99  I $T(@TAG)]"" D
"RTN","XU8P328B",7,0)
 . S DATA=$P($T(@TAG),";;",2)
"RTN","XU8P328B",8,0)
 . D
"RTN","XU8P328B",9,0)
 .. N FDA,DIERR,Z,ZERR
"RTN","XU8P328B",10,0)
 .. D FIND^DIC(5.13,"","","P",$P(DATA,","),"","","","","Z","ZERR")
"RTN","XU8P328B",11,0)
 .. I +$G(Z("DILIST",0))<2 Q
"RTN","XU8P328B",12,0)
 .. F I=1:1:+Z("DILIST",0) D
"RTN","XU8P328B",13,0)
 ... I I=1 Q
"RTN","XU8P328B",14,0)
 ... S FDA(5.13,+Z("DILIST",I,0)_",",.01)="@"
"RTN","XU8P328B",15,0)
 ... D FILE^DIE("","FDA","ZERR")
"RTN","XU8P328B",16,0)
 . D
"RTN","XU8P328B",17,0)
 .. N FDA,DIERR,ZERR
"RTN","XU8P328B",18,0)
 .. S FDA(5.13,"?+1,",.01)=$P(DATA,",")
"RTN","XU8P328B",19,0)
 .. S FDA(5.13,"?+1,",1)=$P(DATA,",",3)
"RTN","XU8P328B",20,0)
 .. S FDA(5.13,"?+1,",2)=$$FIND1^DIC(5,"","X",$P(DATA,",",5),"C","","ZERR")
"RTN","XU8P328B",21,0)
 .. D UPDATE^DIE("","FDA","","ZERR")
"RTN","XU8P328B",22,0)
 .. Q
"RTN","XU8P328B",23,0)
 K ^XIP(5.13,"AC") ;CLEAN TRANSMISSION FLAG
"RTN","XU8P328B",24,0)
 D MES^XPDUTL("Finished Additions to COUNTY CODE(#5.13) file.")
"RTN","XU8P328B",25,0)
 Q
"RTN","XU8P328B",26,0)
 ;
"RTN","XU8P328B",27,0)
1 ;;12025,025,DADE,12,FL,FLORIDA,ACTIVE,
"RTN","XU8P328B",28,0)
2 ;;15005,005,KALAWAO,15,HI,HAWAII,ACTIVE,
"RTN","XU8P328B",29,0)
3 ;;30113,113,YELLOWSTONE NATIONAL PARK,30,MT,MONTANA,ACTIVE,
"RTN","XU8P328B",30,0)
4 ;;51515,515,BEDFORD (CITY),51,VA,VIRGINIA,ACTIVE,
"RTN","XU8P328B",31,0)
5 ;;51595,595,EMPORIA (CITY),51,VA,VIRGINIA,ACTIVE,
"RTN","XU8P328B",32,0)
6 ;;60010,010,EASTERN (DISTRICT),60,AS,AMERICA SAMOA,ACTIVE,
"RTN","XU8P328B",33,0)
7 ;;60020,020,MANU'A (DISTRICT),60,AS,AMERICA SAMOA,ACTIVE,
"RTN","XU8P328B",34,0)
8 ;;60030,030,ROSE ISLAND,60,AS,AMERICA SAMOA,ACTIVE,
"RTN","XU8P328B",35,0)
9 ;;60040,040,SWAINS ISLAND,60,AS,AMERICA SAMOA,ACTIVE,
"RTN","XU8P328B",36,0)
10 ;;64002,002,CHUUK,64,FM,FEDERATED STATES OF MICRONESIA (FM),ACTIVE,
"RTN","XU8P328B",37,0)
11 ;;64005,005,KOSRAE,64,FM,FEDERATED STATES OF MICRONESIA (FM),ACTIVE,
"RTN","XU8P328B",38,0)
12 ;;64040,040,POHNPEI,64,FM,FEDERATED STATES OF MICRONESIA (FM),ACTIVE,
"RTN","XU8P328B",39,0)
13 ;;64060,060,YAP,64,FM,FEDERATED STATES OF MICRONESIA (FM),ACTIVE,
"RTN","XU8P328B",40,0)
14 ;;68007,007,AILINGINAE,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",41,0)
15 ;;68010,010,AILINGLAPLAP,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",42,0)
16 ;;68030,030,AILUK,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",43,0)
17 ;;68040,040,ARNO,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",44,0)
18 ;;68050,050,AUR,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",45,0)
19 ;;68060,060,BIKAR,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",46,0)
20 ;;68070,070,BIKINI,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",47,0)
21 ;;68073,073,BOKAK,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",48,0)
22 ;;68080,080,EBON,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",49,0)
23 ;;68090,090,ENEWETAK,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",50,0)
24 ;;68100,100,ERIKUB,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",51,0)
25 ;;68110,110,JABAT,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",52,0)
26 ;;68120,120,JALUIT,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",53,0)
27 ;;68130,130,JEMO,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",54,0)
28 ;;68140,140,KILI,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",55,0)
29 ;;68150,150,KWAJALEIN,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",56,0)
30 ;;68160,160,LAE,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",57,0)
31 ;;68170,170,LIB,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",58,0)
32 ;;68180,180,LIKIEP,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",59,0)
33 ;;68190,190,MAJURO,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",60,0)
34 ;;68300,300,MALOELAP,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",61,0)
35 ;;68310,310,MEJIT,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",62,0)
36 ;;68320,320,MILI,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",63,0)
37 ;;68330,330,NAMORIK,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",64,0)
38 ;;68340,340,NAMU,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",65,0)
39 ;;68350,350,RONGELAP,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",66,0)
40 ;;68360,360,RONGRIK,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",67,0)
41 ;;68385,385,TOKE,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",68,0)
42 ;;68390,390,UJAE,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",69,0)
43 ;;68400,400,UJELANG,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",70,0)
44 ;;68410,410,UTRIK,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",71,0)
45 ;;68420,420,WOTHO,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",72,0)
46 ;;68430,430,WOTJE,68,MH,MARSHALL ISLANDS,ACTIVE,
"RTN","XU8P328B",73,0)
47 ;;69085,085,NORTHERN ISLANDS,69,MP,NORTHERN MARIANA ISLANDS,ACTIVE,
"RTN","XU8P328B",74,0)
48 ;;69100,100,ROTA,69,MP,NORTHERN MARIANA ISLANDS,ACTIVE,
"RTN","XU8P328B",75,0)
49 ;;69110,110,SAIPAN,69,MP,NORTHERN MARIANA ISLANDS,ACTIVE,
"RTN","XU8P328B",76,0)
50 ;;69120,120,TINIAN,69,MP,NORTHERN MARIANA ISLANDS,ACTIVE,
"RTN","XU8P328B",77,0)
51 ;;70002,002,AIMELIIK,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",78,0)
52 ;;70004,004,AIRAI,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",79,0)
53 ;;70010,010,ANGAUR,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",80,0)
54 ;;70050,050,HATOBOHEI,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",81,0)
55 ;;70100,100,KAYANGEL,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",82,0)
56 ;;70150,150,KOROR,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",83,0)
57 ;;70212,212,MELEKEOK,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",84,0)
58 ;;70214,214,NGARAARD,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",85,0)
59 ;;70218,218,NGARCHELONG,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",86,0)
60 ;;70222,222,NGARDMAU,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",87,0)
61 ;;70224,224,NGATPANG,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",88,0)
62 ;;70226,226,NGCHESAR,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",89,0)
63 ;;70227,227,NGEREMLENGUI,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",90,0)
64 ;;70228,228,NGIWAL,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",91,0)
65 ;;70350,350,PELELIU,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",92,0)
66 ;;70370,370,SONSOROL,70,PW,PALAU,ACTIVE,
"RTN","XU8P328B",93,0)
67 ;;74050,050,BAKER ISLAND,74,UM,U.S. MINOR OUTLYING ISLANDS,ACTIVE,
"RTN","XU8P328B",94,0)
68 ;;74100,100,HOWLAND ISLAND,74,UM,U.S. MINOR OUTLYING ISLANDS,ACTIVE,
"RTN","XU8P328B",95,0)
69 ;;74150,150,JARVIS ISLAND,74,UM,U.S. MINOR OUTLYING ISLANDS,ACTIVE,
"RTN","XU8P328B",96,0)
70 ;;74200,200,JOHNSTON ISLAND,74,UM,U.S. MINOR OUTLYING ISLANDS,ACTIVE,
"RTN","XU8P328B",97,0)
71 ;;74250,250,KINGMAN REEF,74,UM,U.S. MINOR OUTLYING ISLANDS,ACTIVE,
"RTN","XU8P328B",98,0)
72 ;;74300,300,MIDWAY ISLANDS,74,UM,U.S. MINOR OUTLYING ISLANDS,ACTIVE,
"RTN","XU8P328B",99,0)
73 ;;74350,350,NAVASSA ISLAND,74,UM,U.S. MINOR OUTLYING ISLANDS,ACTIVE,
"RTN","XU8P328B",100,0)
74 ;;74400,400,PALMYRA ATOLL,74,UM,U.S. MINOR OUTLYING ISLANDS,ACTIVE,
"RTN","XU8P328B",101,0)
75 ;;74450,450,WAKE ISLAND,74,UM,U.S. MINOR OUTLYING ISLANDS,ACTIVE,
"RTN","XU8P328B",102,0)
99 ;;END
"RTN","XU8P328C")
0^4^B43793116
"RTN","XU8P328C",1,0)
XU8P328C ;OIFOO/SO- POST INSTALL;7:22 AM  8 Mar 2004
"RTN","XU8P328C",2,0)
 ;;8.0;KERNEL;**328**;Jul 10, 1995
"RTN","XU8P328C",3,0)
 ;
"RTN","XU8P328C",4,0)
DES D MES^XPDUTL("Updating STATE(#5) file's Description.") ;IA# 4293
"RTN","XU8P328C",5,0)
 K ^DIC(5,"%D")
"RTN","XU8P328C",6,0)
 S ^DIC(5,"%D",0)="^^5^5^3031105^"
"RTN","XU8P328C",7,0)
 S ^DIC(5,"%D",1,0)="This file contains the name of the state (or outlying area) as issued"
"RTN","XU8P328C",8,0)
 S ^DIC(5,"%D",2,0)="by the Department of Veterans Affairs and issued in M-1, Part I,"
"RTN","XU8P328C",9,0)
 S ^DIC(5,"%D",3,0)="Appendix B.  These entries should remain as distributed and should not be"
"RTN","XU8P328C",10,0)
 S ^DIC(5,"%D",4,0)="edited or updated unless done via a software upgrade or under direction"
"RTN","XU8P328C",11,0)
 S ^DIC(5,"%D",5,0)="of VA Central Office."
"RTN","XU8P328C",12,0)
 ;
"RTN","XU8P328C",13,0)
RIX ;REINDEX THE 'C' XREF OF THE COUNTY MULTIPLE
"RTN","XU8P328C",14,0)
 D MES^XPDUTL("Reindexing the ""C"" cross reference of the COUNTY multiple...")
"RTN","XU8P328C",15,0)
 N IEN S IEN=0
"RTN","XU8P328C",16,0)
 F  S IEN=$O(^DIC(5,IEN)) Q:'IEN  D
"RTN","XU8P328C",17,0)
 . D MES^XPDUTL("Reindexing: "_$P(^DIC(5,IEN,0),U))
"RTN","XU8P328C",18,0)
 . K ^DIC(5,IEN,1,"C") ;KILL WHOLE XREF TO REMOVE ZIP CODE XREF
"RTN","XU8P328C",19,0)
 . N SIEN S SIEN=0
"RTN","XU8P328C",20,0)
 . F  S SIEN=$O(^DIC(5,IEN,1,SIEN)) Q:'SIEN  D
"RTN","XU8P328C",21,0)
 .. N DA S DA=SIEN
"RTN","XU8P328C",22,0)
 .. S DA(1)=IEN
"RTN","XU8P328C",23,0)
 .. N DIK S DIK="^DIC(5,"_IEN_",1,"
"RTN","XU8P328C",24,0)
 .. S DIK(1)="2^C"
"RTN","XU8P328C",25,0)
 .. D EN1^DIK
"RTN","XU8P328C",26,0)
 D MES^XPDUTL("Finished with reindexing.")
"RTN","XU8P328C",27,0)
 ;
"RTN","XU8P328C",28,0)
 ;FIX VA COUNTY CODES WHERE WE CAN
"RTN","XU8P328C",29,0)
FIX D MES^XPDUTL("Looking for Counties that need VA COUNTY CODES updated...")
"RTN","XU8P328C",30,0)
 ;
"RTN","XU8P328C",31,0)
 D SALV ;Check to see if only the VA COUNTY CODE needs corrected
"RTN","XU8P328C",32,0)
 ;
"RTN","XU8P328C",33,0)
 D MES^XPDUTL("Finished updating VA COUNTY CODES.")
"RTN","XU8P328C",34,0)
 ;
"RTN","XU8P328C",35,0)
 D MD ;Correct DADE to MIAMI-DADE if possible
"RTN","XU8P328C",36,0)
 ;
"RTN","XU8P328C",37,0)
 ;CHECK COUNTY MULTIPLE FOR DUPLICATES
"RTN","XU8P328C",38,0)
 D MES^XPDUTL("Checking for duplicate VA COUNTY CODES...")
"RTN","XU8P328C",39,0)
 N XUSW S XUSW=0 ;ZERO IF CLEAN
"RTN","XU8P328C",40,0)
 D TEST
"RTN","XU8P328C",41,0)
 I XUSW F  Q:'XUSW  S XUSW=0 D MES^XPDUTL("Checking again for duplicate VA COUNTY CODES") D TEST
"RTN","XU8P328C",42,0)
 D MES^XPDUTL("Finished checking for duplicate VA COUNTY CODES.")
"RTN","XU8P328C",43,0)
 ;
"RTN","XU8P328C",44,0)
 D SYNC ;Sync up County County multiple with file 5.13
"RTN","XU8P328C",45,0)
 ;
"RTN","XU8P328C",46,0)
 Q
"RTN","XU8P328C",47,0)
MD ;CORRECT DADE TO MIAMI-DADE IF POSSIBLE
"RTN","XU8P328C",48,0)
 N ST,CO1,CO2
"RTN","XU8P328C",49,0)
 D
"RTN","XU8P328C",50,0)
 . N DIERR,EM
"RTN","XU8P328C",51,0)
 . S ST=+$$FIND1^DIC(5,"","X","FLORIDA","B","","EM")
"RTN","XU8P328C",52,0)
 I 'ST D MES^XPDUTL("Can not find ""FLORIDA"" in your STATE(#5) file.  Installation Terminated!") Q
"RTN","XU8P328C",53,0)
 D
"RTN","XU8P328C",54,0)
 . N DIERR,EM
"RTN","XU8P328C",55,0)
 . D FIND^DIC(5.01,","_ST_",","@;.01;2","PX","DADE","","B","","","CO1","EM")
"RTN","XU8P328C",56,0)
 . D FIND^DIC(5.01,","_ST_",","@;.01;2","PX","MIAMI-DADE","","B","","","CO2","EM")
"RTN","XU8P328C",57,0)
 . Q
"RTN","XU8P328C",58,0)
 I +$P(CO2("DILIST",0),U)=0,+$P(CO1("DILIST",0),U)>0 D
"RTN","XU8P328C",59,0)
 . ; No MIAMI-DADE in County multiple ;Edit the first DADE
"RTN","XU8P328C",60,0)
 . N DIERR,FDA,EM
"RTN","XU8P328C",61,0)
 . S FDA(5.01,+$P(CO1("DILIST",1,0),U)_","_ST_",",.01)="MIAMI-DADE"
"RTN","XU8P328C",62,0)
 . S FDA(5.01,+$P(CO1("DILIST",1,0),U)_","_ST_",",2)="086"
"RTN","XU8P328C",63,0)
 . D FILE^DIE("","FDA","EM")
"RTN","XU8P328C",64,0)
 . Q
"RTN","XU8P328C",65,0)
 I +$P(CO2("DILIST",0),U)=1,$P(CO2("DILIST",1,0),U,3)'="086" D
"RTN","XU8P328C",66,0)
 . ;Just need to change VA COUNTY CODE
"RTN","XU8P328C",67,0)
 . N DIERR,FDA,EM
"RTN","XU8P328C",68,0)
 . S FDA(5.01,+$P(CO2("DILIST",1,0),U)_","_ST_",",2)="086"
"RTN","XU8P328C",69,0)
 . D FILE^DIE("","FDA","EM")
"RTN","XU8P328C",70,0)
 . Q
"RTN","XU8P328C",71,0)
 I +$P(CO2("DILIST",0),U)>1 D
"RTN","XU8P328C",72,0)
 . ;Edit all remaining MIAMI-DADEs to ZZ...
"RTN","XU8P328C",73,0)
 . N VCC S VCC=999
"RTN","XU8P328C",74,0)
 . F I=2:1:$P(CO2("DILIST",0),U) D
"RTN","XU8P328C",75,0)
 .. N T S T=0
"RTN","XU8P328C",76,0)
 .. F  S T=$O(^DIC(5,ST,1,"C",VCC,T)) Q:'T  S VCC=VCC-1,T=0
"RTN","XU8P328C",77,0)
 .. N FDA,DIERR,EM
"RTN","XU8P328C",78,0)
 .. S FDA(5.01,+$P(CO2("DILIST",I,0),U)_","_ST_",",.01)="ZZ"_$P(CO2("DILIST",I,0),U,2)
"RTN","XU8P328C",79,0)
 .. S FDA(5.01,+$P(CO2("DILIST",I,0),U)_","_ST_",",2)=VCC
"RTN","XU8P328C",80,0)
 .. D FILE^DIE("","FDA","EM")
"RTN","XU8P328C",81,0)
 D  ;ADD DADE BACK IN FOR HISTORY
"RTN","XU8P328C",82,0)
 . N DIERR,FDA,EM
"RTN","XU8P328C",83,0)
 . S FDA(5.01,"?+1,"_ST_",",.01)="DADE"
"RTN","XU8P328C",84,0)
 . S FDA(5.01,"?+1,"_ST_",",2)="025"
"RTN","XU8P328C",85,0)
 . D UPDATE^DIE("","FDA","","EM")
"RTN","XU8P328C",86,0)
 . Q
"RTN","XU8P328C",87,0)
 Q
"RTN","XU8P328C",88,0)
 ;
"RTN","XU8P328C",89,0)
SYNC ;SYNC UP COUNTY MULTIPLE WITH FILE 5.13
"RTN","XU8P328C",90,0)
 D EP1^XIPSYNC
"RTN","XU8P328C",91,0)
LIC ;LIST INACTIVE COUNTIES
"RTN","XU8P328C",92,0)
 D MES^XPDUTL("Displaying Inactivated Counties...")
"RTN","XU8P328C",93,0)
 N STNM
"RTN","XU8P328C",94,0)
 S STNM=""
"RTN","XU8P328C",95,0)
 F  S STNM=$O(^DIC(5,"B",STNM)) Q:STNM=""  D
"RTN","XU8P328C",96,0)
 . N ST,CONM
"RTN","XU8P328C",97,0)
 . S ST=0,ST=$O(^DIC(5,"B",STNM,ST))
"RTN","XU8P328C",98,0)
 . I +$P(^DIC(5,ST,0),U,3)>56,+$P(^(0),U,3)'=72 Q  ;NOT US STATE OR PR
"RTN","XU8P328C",99,0)
 . S CONM=""
"RTN","XU8P328C",100,0)
 . F  S CONM=$O(^DIC(5,ST,1,"B",CONM)) Q:CONM=""  D
"RTN","XU8P328C",101,0)
 .. N CO
"RTN","XU8P328C",102,0)
 .. S CO=0,CO=$O(^DIC(5,ST,1,"B",CONM,CO))
"RTN","XU8P328C",103,0)
 .. I $P(^DIC(5,ST,1,CO,0),U,5)="" Q
"RTN","XU8P328C",104,0)
 .. N X
"RTN","XU8P328C",105,0)
 .. S X="State: "_STNM_", County: "_CONM_", County Code: "_$P(^DIC(5,ST,1,CO,0),U,3)_" Inactivated."
"RTN","XU8P328C",106,0)
 .. D MES^XPDUTL(X)
"RTN","XU8P328C",107,0)
 Q
"RTN","XU8P328C",108,0)
 ;
"RTN","XU8P328C",109,0)
TEST ;CHECK FOR DUPLICATE VA COUNTY CODES
"RTN","XU8P328C",110,0)
 N ST S ST=0 ;STATE FILE IEN
"RTN","XU8P328C",111,0)
 F  S ST=$O(^DIC(5,ST)) Q:'ST  D
"RTN","XU8P328C",112,0)
 . I +$P(^DIC(5,ST,0),U,3)>56,+$P(^(0),U,3)'=72 Q  ;NOT US STATE OR PR
"RTN","XU8P328C",113,0)
 . N FCO S FCO="" ;FIPS COUNTY VALUE
"RTN","XU8P328C",114,0)
 . N VCC S VCC=999 ;START AT 999 FOR DUPLICATE COUNTY CODES
"RTN","XU8P328C",115,0)
 . F  S FCO=$O(^DIC(5,ST,1,"C",FCO)) Q:FCO=""  D
"RTN","XU8P328C",116,0)
 .. I $L(FCO)>3,FCO'[" " Q  ;LOOKING AT ZIP CODES
"RTN","XU8P328C",117,0)
 .. N PCO S PCO=0 ;COUNTY IEN
"RTN","XU8P328C",118,0)
 .. F  S PCO=$O(^DIC(5,ST,1,"C",FCO,PCO)) Q:'PCO  D
"RTN","XU8P328C",119,0)
 ... N CO,VAL1,VAL2,FST,CNAME,ZZ,Z1,Z2,F1,F2,I
"RTN","XU8P328C",120,0)
 ... S CO=$O(^DIC(5,ST,1,"C",FCO,PCO)) Q:'CO  D  ;IS THERE ANOTHER?
"RTN","XU8P328C",121,0)
 .... S VAL1=$P(^DIC(5,ST,1,PCO,0),U)
"RTN","XU8P328C",122,0)
 .... S VAL2=$P(^DIC(5,ST,1,CO,0),U)
"RTN","XU8P328C",123,0)
 .... S FST=$P(^DIC(5,ST,0),U,3)
"RTN","XU8P328C",124,0)
 .... ;WHICH IS CORRECT?
"RTN","XU8P328C",125,0)
 .... S CNAME=VAL1 D L513 M Z1=ZZ
"RTN","XU8P328C",126,0)
 .... S CNAME=VAL2 D L513 M Z2=ZZ
"RTN","XU8P328C",127,0)
 .... S (F1,F2,I)=0
"RTN","XU8P328C",128,0)
 .... F  S I=$O(Z1("DILIST",I)) Q:'I  I $P(Z1("DILIST",I,0),U,2)=FST_FCO S F1=1
"RTN","XU8P328C",129,0)
 .... F  S I=$O(Z2("DILIST",I)) Q:'I  I $P(Z2("DILIST",I,0),U,2)=FST_FCO S F2=1
"RTN","XU8P328C",130,0)
 .... I F1,'F2 S VAL="ZZ"_VAL2
"RTN","XU8P328C",131,0)
 .... I 'F1,F2 S VAL="ZZ"_VAL1
"RTN","XU8P328C",132,0)
 .... I 'F1,'F2 S VAL=$S($E(VAL1,1,2)'="ZZ":"ZZ"_VAL1,1:"ZZ"_VAL2)
"RTN","XU8P328C",133,0)
 .... D  ;COUNTY CODE OK?
"RTN","XU8P328C",134,0)
 ..... N T S T=0
"RTN","XU8P328C",135,0)
 ..... F  S T=$O(^DIC(5,ST,1,"C",VCC,T)) Q:'T  S VCC=VCC-1,T=0
"RTN","XU8P328C",136,0)
 .... D MES^XPDUTL("State: "_$P(^DIC(5,ST,0),U)_", County Name: "_CNAME_", VA County Code: "_FCO)
"RTN","XU8P328C",137,0)
 .... D MES^XPDUTL("  Changed County Name to: "_VAL_", VA County Code to: "_VCC)
"RTN","XU8P328C",138,0)
 .... N DIERR,EM
"RTN","XU8P328C",139,0)
 .... S FDA(5.01,CO_","_ST_",",.01)=VAL
"RTN","XU8P328C",140,0)
 .... S FDA(5.01,CO_","_ST_",",2)=VCC
"RTN","XU8P328C",141,0)
 .... D FILE^DIE("","FDA","EM")
"RTN","XU8P328C",142,0)
 .... S VCC=VCC-1,XUSW=1
"RTN","XU8P328C",143,0)
 Q
"RTN","XU8P328C",144,0)
 ;
"RTN","XU8P328C",145,0)
SALV ;LET'S SEE IF ALL WE NEED TO DO IS FIX THE 'VA COUNTY CODE'
"RTN","XU8P328C",146,0)
 N ST S ST=0 ;STATE FILE IEN
"RTN","XU8P328C",147,0)
 F  S ST=$O(^DIC(5,ST)) Q:'ST  D
"RTN","XU8P328C",148,0)
 . I +$P(^DIC(5,ST,0),U,3)>56,+$P(^(0),U,3)'=72 Q  ;NOT US STATE OR PR
"RTN","XU8P328C",149,0)
 . N STV S STV=$P(^DIC(5,ST,0),U,3) ;STATE FIPS VALUE
"RTN","XU8P328C",150,0)
 . N CNAME S CNAME="" ;COUNTY NAME
"RTN","XU8P328C",151,0)
 .  F  S CNAME=$O(^DIC(5,ST,1,"B",CNAME)) Q:CNAME=""  D
"RTN","XU8P328C",152,0)
 .. N Y
"RTN","XU8P328C",153,0)
 .. N CO S CO=0  ;COUNTY IEN OF STATE FILE
"RTN","XU8P328C",154,0)
 .. S CO=$O(^DIC(5,ST,1,"B",CNAME,CO))
"RTN","XU8P328C",155,0)
 .. D  ;GET LIST OF POSSIBILITIES
"RTN","XU8P328C",156,0)
 ... D L513
"RTN","XU8P328C",157,0)
 ... I '+ZZ("DILIST",0) Q  ;CAN'T FIND COUNTY NAME
"RTN","XU8P328C",158,0)
 ... N I S I=0
"RTN","XU8P328C",159,0)
 ... F  S I=$O(ZZ("DILIST",I)) Q:'I  D
"RTN","XU8P328C",160,0)
 .... I $E($P(ZZ("DILIST",I,0),U,2),1,2)'=STV Q  ;NOT THE STATE WE ARE LOOKING FOR
"RTN","XU8P328C",161,0)
 .... N NCOV,OLDCOV,STABB,X,FDA,DIERR
"RTN","XU8P328C",162,0)
 .... S NCOV=$E($P(ZZ("DILIST",I,0),U,2),3,5)
"RTN","XU8P328C",163,0)
 .... S OLDCOV=$P(^DIC(5,ST,1,CO,0),U,3),STABB=$P(^DIC(5,ST,0),U,2)
"RTN","XU8P328C",164,0)
 .... I OLDCOV=NCOV Q  ;COUNTY FIPS VALUES MATCH
"RTN","XU8P328C",165,0)
 .... S X="Changing VA COUNTY CODE, From: "_OLDCOV_" To: "_NCOV_" County: "_CNAME_" State: "_STABB
"RTN","XU8P328C",166,0)
 .... D MES^XPDUTL(X)
"RTN","XU8P328C",167,0)
 .... S FDA(5.01,CO_","_ST_",",2)=NCOV
"RTN","XU8P328C",168,0)
 .... D FILE^DIE("","FDA","MSG")
"RTN","XU8P328C",169,0)
 Q
"RTN","XU8P328C",170,0)
 ;
"RTN","XU8P328C",171,0)
L513 ;GET A LIST OF COUNTIES WHO'S NAME MATCHES FROM 5.13
"RTN","XU8P328C",172,0)
 N DIERR,EM
"RTN","XU8P328C",173,0)
 D FIND^DIC(5.13,"","@;.01;1","PX",CNAME,"","C","","","ZZ","EM")
"RTN","XU8P328C",174,0)
 Q
"RTN","XU8P328D")
0^6^B9123396
"RTN","XU8P328D",1,0)
XU8P328D ;OIFOO/SO- SCAN FOR PATIENT COUNTY BEGIN WITH "ZZ";6:36 AM  8 Jul 2004
"RTN","XU8P328D",2,0)
 ;;8.0;KERNEL;**328**;Jul 10, 1995
"RTN","XU8P328D",3,0)
 ; Post Install Entry Point
"RTN","XU8P328D",4,0)
 N FIX S FIX=0
"RTN","XU8P328D",5,0)
 I '$D(XPDNM) D DEVICE Q:POP  Q:$D(ZTSK)  U IO
"RTN","XU8P328D",6,0)
SCAN ;
"RTN","XU8P328D",7,0)
 D MES^XPDUTL("Begin Patient File scan for patients with ""ZZ..."" County...")
"RTN","XU8P328D",8,0)
 N DFN S DFN=0 N II N CNT S CNT=0
"RTN","XU8P328D",9,0)
 F II=0:1 S DFN=$O(^DPT(DFN)) Q:'DFN  D
"RTN","XU8P328D",10,0)
 . I (II/10000)=(II\10000) D MES^XPDUTL("Scanned: "_II_" patients so far.")
"RTN","XU8P328D",11,0)
 . N PDATA,FLDS,DIERR,ZER
"RTN","XU8P328D",12,0)
 . S FLDS=".01;.0905;.114;.115;.116;.117"
"RTN","XU8P328D",13,0)
 . ; .01=NAME
"RTN","XU8P328D",14,0)
 . ; .0905=1U4N
"RTN","XU8P328D",15,0)
 . ; .114=CITY
"RTN","XU8P328D",16,0)
 . ; .115=STATE FILE POINTER
"RTN","XU8P328D",17,0)
 . ; .116=ZIP CODE
"RTN","XU8P328D",18,0)
 . ; .117=COUNTY MULTIPLE IEN
"RTN","XU8P328D",19,0)
 . ;
"RTN","XU8P328D",20,0)
 . D GETS^DIQ(2,DFN_",",FLDS,"I","PDATA","ZER")
"RTN","XU8P328D",21,0)
 . N CIEN S CIEN=+$G(PDATA(2,DFN_",",.117,"I")) Q:'CIEN
"RTN","XU8P328D",22,0)
 . N SIEN S SIEN=+$G(PDATA(2,DFN_",",.115,"I")) Q:'SIEN
"RTN","XU8P328D",23,0)
 . N CO S CO=$$GET1^DIQ(5.01,CIEN_","_SIEN_",",".01")
"RTN","XU8P328D",24,0)
 . I CO="" Q
"RTN","XU8P328D",25,0)
 . I CO]"",$E(CO,1,2)'="ZZ" Q
"RTN","XU8P328D",26,0)
 . S CNT=CNT+1
"RTN","XU8P328D",27,0)
 . I 'FIX D NAME
"RTN","XU8P328D",28,0)
 . I FIX D
"RTN","XU8P328D",29,0)
 .. N ZIP S ZIP=$G(PDATA(2,DFN_",",.116,"I")) Q:ZIP=""
"RTN","XU8P328D",30,0)
 .. N CITY S CITY=$G(PDATA(2,DFN_",",.114,"I")) Q:CITY=""
"RTN","XU8P328D",31,0)
 .. N ZDATA
"RTN","XU8P328D",32,0)
 .. D POSTALB^XIPUTIL(ZIP,.ZDATA)
"RTN","XU8P328D",33,0)
 .. I $D(ZDATA("ERROR")) D NAME,MES^XPDUTL("  **Unable to find Patient's ZIP code.") Q
"RTN","XU8P328D",34,0)
 .. N III,FLAG S FLAG=0
"RTN","XU8P328D",35,0)
 .. F III=1:1:ZDATA D
"RTN","XU8P328D",36,0)
 ... I ZDATA(III,"CITY")["*" S ZDATA(III,"CITY")=$TR(ZDATA(III,"CITY"),"*","") ; Remove trailing "*"
"RTN","XU8P328D",37,0)
 ... I ZDATA(III,"CITY")=CITY,ZDATA(III,"STATE POINTER")=SIEN,ZDATA(III,"POSTAL CODE")=ZIP D  Q
"RTN","XU8P328D",38,0)
 .... S FLAG=1
"RTN","XU8P328D",39,0)
 .... ; IA #4453
"RTN","XU8P328D",40,0)
 .... N DIERR,ZERR,FDA
"RTN","XU8P328D",41,0)
 .... S FDA(2,DFN_",",.117)=ZDATA(III,"COUNTY")
"RTN","XU8P328D",42,0)
 .... D FILE^DIE("E","FDA","ZERR")
"RTN","XU8P328D",43,0)
 .... I $D(DIERR) D NAME,MES^XPDUTL("  **Unable to file Patient's COUNTY.") Q
"RTN","XU8P328D",44,0)
 .... Q
"RTN","XU8P328D",45,0)
 ... Q
"RTN","XU8P328D",46,0)
 .. I 'FLAG D NAME,MES^XPDUTL("  ** City and State do not match ZIP code.")
"RTN","XU8P328D",47,0)
 .. Q
"RTN","XU8P328D",48,0)
 . Q
"RTN","XU8P328D",49,0)
 D MES^XPDUTL("Total Number of Patients who's County begins with ""ZZ"": "_CNT)
"RTN","XU8P328D",50,0)
 D MES^XPDUTL("Total Number of Patients examined: "_II)
"RTN","XU8P328D",51,0)
 D MES^XPDUTL("Finished Patient File scan.")
"RTN","XU8P328D",52,0)
 I '$D(XPDNM) D ^%ZISC
"RTN","XU8P328D",53,0)
 Q
"RTN","XU8P328D",54,0)
 ;
"RTN","XU8P328D",55,0)
FIX ; Repair Entry Point
"RTN","XU8P328D",56,0)
 N FIX S FIX=1
"RTN","XU8P328D",57,0)
 D DEVICE Q:POP  Q:$D(ZTSK)  U IO
"RTN","XU8P328D",58,0)
DEQUE ; Queued Entry Point
"RTN","XU8P328D",59,0)
 D SCAN
"RTN","XU8P328D",60,0)
 Q
"RTN","XU8P328D",61,0)
 ;
"RTN","XU8P328D",62,0)
NAME ; Display Name
"RTN","XU8P328D",63,0)
 N X
"RTN","XU8P328D",64,0)
 S X="Name: "_PDATA(2,DFN_",",.01,"I")_"; 1U4N: "_PDATA(2,DFN_",",.0905,"I")_"; Current County: "_CO
"RTN","XU8P328D",65,0)
 D MES^XPDUTL(X)
"RTN","XU8P328D",66,0)
 Q
"RTN","XU8P328D",67,0)
 ;
"RTN","XU8P328D",68,0)
DEVICE ; Use P-MESSAGE for default device
"RTN","XU8P328D",69,0)
 N %ZIS S %ZIS="MQ",%ZIS("B")="P-MESSAGE"
"RTN","XU8P328D",70,0)
 D ^%ZIS Q:POP
"RTN","XU8P328D",71,0)
 I $D(IO("Q")) D  K IO("Q") Q
"RTN","XU8P328D",72,0)
 . N ZTSAVE,ZTRTN,ZTDESC
"RTN","XU8P328D",73,0)
 . S ZTSAVE("FIX")=""
"RTN","XU8P328D",74,0)
 . S ZTRTN="DEQUE^XU8P328D"
"RTN","XU8P328D",75,0)
 . S ZTDESC="QUEUED 'ZZ'_COUNTY REPAIR"
"RTN","XU8P328D",76,0)
 . D ^%ZTLOAD
"RTN","XU8P328D",77,0)
 . D HOME^%ZIS
"RTN","XU8P328D",78,0)
 . Q
"RTN","XU8P328D",79,0)
 Q
"UP",5,5.01,-1)
5^1
"UP",5,5.01,0)
5.01
"VER")
8.0^22.0
"^DD",5,5.01,5,0)
INACTIVE DATE^D^^0;5^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",5,5.01,5,21,0)
^^2^2^3031017^
"^DD",5,5.01,5,21,1,0)
This date represents the date when the VA determined that the county was 
"^DD",5,5.01,5,21,2,0)
no longer valid.
"^DD",5,5.01,5,"DT")
3031017
**END**
**END**

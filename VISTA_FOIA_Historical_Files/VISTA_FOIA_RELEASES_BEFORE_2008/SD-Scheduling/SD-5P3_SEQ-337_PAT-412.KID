Released SD*5.3*412 SEQ #337
Extracted from mail message
**KIDS**:SD*5.3*412^

**INSTALL NAME**
SD*5.3*412
"BLD",5927,0)
SD*5.3*412^SCHEDULING^0^3050307^y
"BLD",5927,1,0)
^^1^1^3041230^
"BLD",5927,1,1,0)
Correct several errors and/or problems with the Wait List reports.
"BLD",5927,4,0)
^9.64PA^^
"BLD",5927,"ABPKG")
n
"BLD",5927,"KRN",0)
^9.67PA^8989.52^19
"BLD",5927,"KRN",.4,0)
.4
"BLD",5927,"KRN",.401,0)
.401
"BLD",5927,"KRN",.402,0)
.402
"BLD",5927,"KRN",.403,0)
.403
"BLD",5927,"KRN",.5,0)
.5
"BLD",5927,"KRN",.84,0)
.84
"BLD",5927,"KRN",3.6,0)
3.6
"BLD",5927,"KRN",3.8,0)
3.8
"BLD",5927,"KRN",9.2,0)
9.2
"BLD",5927,"KRN",9.8,0)
9.8
"BLD",5927,"KRN",9.8,"NM",0)
^9.68A^7^6
"BLD",5927,"KRN",9.8,"NM",2,0)
SDWLROI^^0^B30078507
"BLD",5927,"KRN",9.8,"NM",3,0)
SDWLRPS1^^0^B42004976
"BLD",5927,"KRN",9.8,"NM",4,0)
SDWLRPS2^^0^B39256183
"BLD",5927,"KRN",9.8,"NM",5,0)
SDWLRQ1^^0^B38816800
"BLD",5927,"KRN",9.8,"NM",6,0)
SDWLRSR^^0^B84474101
"BLD",5927,"KRN",9.8,"NM",7,0)
SDWLROIS^^0^B30379799
"BLD",5927,"KRN",9.8,"NM","B","SDWLROI",2)

"BLD",5927,"KRN",9.8,"NM","B","SDWLROIS",7)

"BLD",5927,"KRN",9.8,"NM","B","SDWLRPS1",3)

"BLD",5927,"KRN",9.8,"NM","B","SDWLRPS2",4)

"BLD",5927,"KRN",9.8,"NM","B","SDWLRQ1",5)

"BLD",5927,"KRN",9.8,"NM","B","SDWLRSR",6)

"BLD",5927,"KRN",19,0)
19
"BLD",5927,"KRN",19.1,0)
19.1
"BLD",5927,"KRN",101,0)
101
"BLD",5927,"KRN",409.61,0)
409.61
"BLD",5927,"KRN",771,0)
771
"BLD",5927,"KRN",870,0)
870
"BLD",5927,"KRN",8989.51,0)
8989.51
"BLD",5927,"KRN",8989.52,0)
8989.52
"BLD",5927,"KRN",8994,0)
8994
"BLD",5927,"KRN","B",.4,.4)

"BLD",5927,"KRN","B",.401,.401)

"BLD",5927,"KRN","B",.402,.402)

"BLD",5927,"KRN","B",.403,.403)

"BLD",5927,"KRN","B",.5,.5)

"BLD",5927,"KRN","B",.84,.84)

"BLD",5927,"KRN","B",3.6,3.6)

"BLD",5927,"KRN","B",3.8,3.8)

"BLD",5927,"KRN","B",9.2,9.2)

"BLD",5927,"KRN","B",9.8,9.8)

"BLD",5927,"KRN","B",19,19)

"BLD",5927,"KRN","B",19.1,19.1)

"BLD",5927,"KRN","B",101,101)

"BLD",5927,"KRN","B",409.61,409.61)

"BLD",5927,"KRN","B",771,771)

"BLD",5927,"KRN","B",870,870)

"BLD",5927,"KRN","B",8989.51,8989.51)

"BLD",5927,"KRN","B",8989.52,8989.52)

"BLD",5927,"KRN","B",8994,8994)

"BLD",5927,"QUES",0)
^9.62^^
"BLD",5927,"REQB",0)
^9.611^2^1
"BLD",5927,"REQB",2,0)
SD*5.3*399^1
"BLD",5927,"REQB","B","SD*5.3*399",2)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
412^3050307
"PKG",16,22,1,"PAH",1,1,0)
^^1^1^3050307
"PKG",16,22,1,"PAH",1,1,1,0)
Correct several errors and/or problems with the Wait List reports.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","SDWLROI")
0^2^B30078507
"RTN","SDWLROI",1,0)
SDWLROI ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT - ENROLLEE ; 01 Oct 2002  4:42 PM
"RTN","SDWLROI",2,0)
 ;;5.3;scheduling;**263,412**;AUG 13 1993
"RTN","SDWLROI",3,0)
 ;
"RTN","SDWLROI",4,0)
 ; Removed Sort logic as routine exceeded SACC maximum size of 10000
"RTN","SDWLROI",5,0)
 ; New routine SDWLROIS was created to perform the Sort functionality
"RTN","SDWLROI",6,0)
 ;
"RTN","SDWLROI",7,0)
 ;
"RTN","SDWLROI",8,0)
EN ;
"RTN","SDWLROI",9,0)
 N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSK
"RTN","SDWLROI",10,0)
 D INIT G END:$D(DUOUT)
"RTN","SDWLROI",11,0)
 D SORT^SDWLROIS  ; SD*5.3*412 new routine to perform sort
"RTN","SDWLROI",12,0)
 I $$S^ZTLOAD G END
"RTN","SDWLROI",13,0)
 D PRT
"RTN","SDWLROI",14,0)
 G END
"RTN","SDWLROI",15,0)
INIT ;
"RTN","SDWLROI",16,0)
 I $D(CT) S SDWLCT=CT
"RTN","SDWLROI",17,0)
 I $D(DATE) S SDWLDATE=DATE
"RTN","SDWLROI",18,0)
 I $D(INS) S SDWLINS=INS
"RTN","SDWLROI",19,0)
 I $D(ZTSAVE) D
"RTN","SDWLROI",20,0)
 .S SDWLCT=$G(ZTSAVE("CT")),SDWLDATE=$G(ZTSAVE("DATE")),SDWLINS=$G(ZTSAVE("INS"))
"RTN","SDWLROI",21,0)
 I SDWLINS'="ALL" F I=1:1 S SDWL=$P(SDWLINS,";",I) Q:SDWL=""  S SDWL("INS",+SDWL)=""
"RTN","SDWLROI",22,0)
 S SDWLBD=$P(SDWLDATE,U,1),SDWLED=$P(SDWLDATE,U,2),SDWLPG=0
"RTN","SDWLROI",23,0)
 D NOW^%DTC S Y=% D DD^%DT S SDWLDTP=$P(Y,":",1,2)
"RTN","SDWLROI",24,0)
 K ZTSAVE
"RTN","SDWLROI",25,0)
 N POP S POP=0  ;SD*5.3*412
"RTN","SDWLROI",26,0)
 Q
"RTN","SDWLROI",27,0)
 ;
"RTN","SDWLROI",28,0)
PRT ;PRINT REPORT  SD*5.3*412 Q:POP added where needed to allow early exit
"RTN","SDWLROI",29,0)
 G END:$$S^ZTLOAD
"RTN","SDWLROI",30,0)
 S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLROI",31,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,SDWLPG)=0 D HD,HD1
"RTN","SDWLROI",32,0)
 I '$D(^TMP("SDWLROI1",$J)) W !!,"No Wait List Data to Report" Q
"RTN","SDWLROI",33,0)
 S SDWLINS="" F  S SDWLINS=$O(^TMP("SDWLROI1",$J,SDWLINS)) Q:SDWLINS=""  D  Q:POP  D T2 Q:POP  W !,"________________"  I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLROI",34,0)
 .W !!,"INSTITUTION: ",SDWLINS
"RTN","SDWLROI",35,0)
 .S W1="" F  S W1=$O(^TMP("SDWLROI1",$J,SDWLINS,W1)) Q:W1=""  D  Q:POP  D T1 Q:POP  I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",36,0)
 ..W !,"ENROLLMENT PRIORITY: ",$S(W1="P":"PRIOR",W1="N":"NEW",W1="E":"ESTABLISHED",1:"UNDETERMINED")
"RTN","SDWLROI",37,0)
 ..S SDWLTY="" F  S SDWLTY=$O(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY)) Q:SDWLTY=""  D  Q:POP
"RTN","SDWLROI",38,0)
 ...S SDWLTNM=$$EXTERNAL^DILFD(409.3,4,,SDWLTY) W !,$E(SDWLTNM,1,15) I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",39,0)
 ...S SDWLSCN="" F  S SDWLSCN=$O(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN)) Q:SDWLSCN=""  D  Q:POP
"RTN","SDWLROI",40,0)
 ....S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLROI",41,0)
 ....S SDWLSCNM="" F  S SDWLSCNM=$O(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM)) Q:SDWLSCNM=""  D  Q:POP
"RTN","SDWLROI",42,0)
 .....S SDWLPRI="" F  S SDWLPRI=$O(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI)) Q:SDWLPRI=""  D  Q:POP
"RTN","SDWLROI",43,0)
 ......W !,?2,$E(SDWLSCNM,1,10)," ",$S(SDWLPRI="A":"ASAP",SDWLPRI="F":"FUTURE",1:"")
"RTN","SDWLROI",44,0)
 ......S SDWLPR=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"PR")) W ?20,SDWLPR
"RTN","SDWLROI",45,0)
 ......S SDWLCL=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"CL")) W ?27,SDWLCL
"RTN","SDWLROI",46,0)
 ......S SDWLD=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLD")) W ?35,SDWLD
"RTN","SDWLROI",47,0)
 ......S SDWLNC=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNC")) W ?38,SDWLNC
"RTN","SDWLROI",48,0)
 ......S SDWLSA=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLSA")) W ?42,SDWLSA
"RTN","SDWLROI",49,0)
 ......S SDWLCC=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLCC")) W ?46,SDWLCC
"RTN","SDWLROI",50,0)
 ......S SDWLNN=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNN")) W ?50,SDWLNN
"RTN","SDWLROI",51,0)
 ......S SDWLER=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLER")) W ?54,SDWLER
"RTN","SDWLROI",52,0)
 ......S SDWLAD=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"AD")) W ?60,SDWLAD
"RTN","SDWLROI",53,0)
 ......S SDWLRR=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"RR")) W ?66,SDWLRR
"RTN","SDWLROI",54,0)
 ......S SDWLNR=+$G(^TMP("SDWLROI1",$J,SDWLINS,W1,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"NR")) W ?75,SDWLNR
"RTN","SDWLROI",55,0)
 ......S T1=T1+SDWLPR,TT1=TT1+SDWLPR
"RTN","SDWLROI",56,0)
 ......S T2=T2+SDWLCL,TT2=TT2+SDWLCL
"RTN","SDWLROI",57,0)
 ......S T3=T3+SDWLD,TT3=TT3+SDWLD
"RTN","SDWLROI",58,0)
 ......S T4=T4+SDWLNC,TT4=TT4+SDWLNC
"RTN","SDWLROI",59,0)
 ......S T5=T5+SDWLSA,TT4=TT4+SDWLSA
"RTN","SDWLROI",60,0)
 ......S T6=T6+SDWLCC,TT6=TT6+SDWLCC
"RTN","SDWLROI",61,0)
 ......S T7=T7+SDWLNN,TT7=TT7+SDWLNN
"RTN","SDWLROI",62,0)
 ......S T8=T8+SDWLER,TT8=TT8+SDWLER
"RTN","SDWLROI",63,0)
 ......S T9=T9+SDWLAD,TT9=TT9+SDWLAD
"RTN","SDWLROI",64,0)
 ......S T10=T10+SDWLRR,TT10=TT10+SDWLRR
"RTN","SDWLROI",65,0)
 ......S T11=T11+SDWLNR,TT11=TT11+SDWLNR
"RTN","SDWLROI",66,0)
 ......I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",67,0)
 Q
"RTN","SDWLROI",68,0)
T1 ;
"RTN","SDWLROI",69,0)
 W !,?18,"------",?25,"------",?32,"-----",?38,"--",?42,"--",?46,"--",?50,"--",?54,"--",?57,"-----",?63,"------",?71,"-------"
"RTN","SDWLROI",70,0)
 W !,"Sub-Totals:"
"RTN","SDWLROI",71,0)
 ;write sub-totals
"RTN","SDWLROI",72,0)
 W ?20,T1,?27,T2,?35,T3,?38,T4,?42,T5,?46,T6,?50,T7,?54,T8,?60,T9,?66,T10,?75,T11,!
"RTN","SDWLROI",73,0)
 S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLROI",74,0)
 I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",75,0)
 Q
"RTN","SDWLROI",76,0)
T2 W !,"Institution Totals:"
"RTN","SDWLROI",77,0)
 W ?20,TT1,?27,TT2,?35,TT3,?38,TT4,?42,TT5,?46,TT6,?50,TT7,?54,TT8,?60,TT9,?66,TT10,?75,TT11,!
"RTN","SDWLROI",78,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11)=0
"RTN","SDWLROI",79,0)
 I $Y>(IOSL-7) D:$D(SDWLIOSR) SCR Q:POP  D HD,HD1
"RTN","SDWLROI",80,0)
 Q
"RTN","SDWLROI",81,0)
HD W:$D(IOF) @IOF S SDWLPG=SDWLPG+1 W !!,SDWLDTP,?80-$L("Wait List (Sch/PCMM) Enroll Status Report")\2,"Wait List (Sch/PCMM) Enroll Status Report",?65,"Page: ",SDWLPG
"RTN","SDWLROI",82,0)
 W !,?80-$L("STARTED Date: ")\2,"STARTED Date: " S Y=$P(SDWLDATE,U,1) D DD^%DT W Y
"RTN","SDWLROI",83,0)
 W !,?80-$L("FINISHED Date: ")\2,"FINISHED Date: " S Y=$P(SDWLDATE,U,2) D DD^%DT W Y
"RTN","SDWLROI",84,0)
 Q
"RTN","SDWLROI",85,0)
HD1 ;
"RTN","SDWLROI",86,0)
 W !,?19,"PREV",?59,"#",?65,"#",?72,"# NOT"
"RTN","SDWLROI",87,0)
 W !,"WAIT LIST TYPE",?18,"REMAIN",?25,"CLOSED",?32,"DEATH",?38,"NC",?42,"SA"
"RTN","SDWLROI",88,0)
 W ?46,"CC",?50,"NN",?54,"ER",?57,"ADDED",?63,"REMAIN",?71,"REMOVED",!
"RTN","SDWLROI",89,0)
 Q
"RTN","SDWLROI",90,0)
SCR S DIR(0)="E" D ^DIR S:X="^" POP=1
"RTN","SDWLROI",91,0)
 Q
"RTN","SDWLROI",92,0)
END D EN^SDWLKIL
"RTN","SDWLROI",93,0)
 K ^TMP("SDWLROI1",$J),^TMP("SDWLROI2",$J),CT,DATE,I,INS
"RTN","SDWLROI",94,0)
 K T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,X1,X2,X3,X0,Y1,W1,X4,X1,X2
"RTN","SDWLROI",95,0)
 K TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,SDWLXEN,SDWLRDT,SDWLIOSR
"RTN","SDWLROI",96,0)
 Q
"RTN","SDWLROIS")
0^7^B30379799
"RTN","SDWLROIS",1,0)
SDWLROIS ;;IOFO BAY PINES/RLC/WAIT LIST STAT REPORT - ENROLLEE - SORT ; 011 Jan 2005  9:15 AM
"RTN","SDWLROIS",2,0)
 ;;5.3;scheduling;**412**;AUG 13 1993
"RTN","SDWLROIS",3,0)
 ;
"RTN","SDWLROIS",4,0)
 ; Original routine SDWLROI was exceeding SACC maximum size of 10000.
"RTN","SDWLROIS",5,0)
 ; This new routine added to do the Sort portion of the report.
"RTN","SDWLROIS",6,0)
 ;
"RTN","SDWLROIS",7,0)
 ;
"RTN","SDWLROIS",8,0)
SORT ;SORT AND CALCULATE STAT REPORT
"RTN","SDWLROIS",9,0)
 K ^TMP("SDWLROI1",$J),^TMP("SDWLROI2",$J) S (SDWLERR,SDWLPR,SDWLC,SDWLD,SDWLNC,SDWLSA,SDWLCC,SDWLNN,SDWLER,SDWLAD,SDWLRE,SDWLNR)=0
"RTN","SDWLROIS",10,0)
 S SDWLDA=0 F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA=""  D
"RTN","SDWLROIS",11,0)
 .S SDWLX=$G(^SDWL(409.3,SDWLDA,0)) Q:SDWLX=""  S SDWLINSN=+$P(SDWLX,U,3) I 'SDWLINSN Q
"RTN","SDWLROIS",12,0)
 .S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="U"
"RTN","SDWLROIS",13,0)
 .S SDWLDFN=+SDWLX I 'SDWLDFN Q
"RTN","SDWLROIS",14,0)
 .S SDWLTYP=$P(SDWLX,U,5) D:'SDWLTYP S1A S SDWLTYPN=$S(SDWLTYP=1:$P(SDWLX,U,6),SDWLTYP=2:$P(SDWLX,U,7),SDWLTYP=3:$P(SDWLX,U,8),SDWLTYP=4:$P(SDWLX,U,9),1:"")
"RTN","SDWLROIS",15,0)
 .I SDWLTYPN="" Q
"RTN","SDWLROIS",16,0)
 .S SDWLFLD=$S(SDWLTYP=1:5,SDWLTYP=2:6,SDWLTYP=3:7,SDWLTYP=4:8)
"RTN","SDWLROIS",17,0)
 .S SDWLTYNM=$$EXTERNAL^DILFD(409.3,SDWLFLD,,SDWLTYPN) I SDWLTYNM="" S SDWLTYNM="UNKNOWN"
"RTN","SDWLROIS",18,0)
 .I 'SDWLINSN Q
"RTN","SDWLROIS",19,0)
 .I $D(SDWL("INS")) D
"RTN","SDWLROIS",20,0)
 ..;CHECK FOR SPECIFIC INSTITUTIONAL SORT
"RTN","SDWLROIS",21,0)
 ..S SDWLINS=$P(SDWLX,U,3),SDWLERR=0 I SDWLINS'="ALL",'$D(SDWL("INS",SDWLINS)) S SDWLERR=1 Q
"RTN","SDWLROIS",22,0)
 ..S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="N"
"RTN","SDWLROIS",23,0)
 .I SDWLERR Q
"RTN","SDWLROIS",24,0)
 .;CHECK DATE RANGE
"RTN","SDWLROIS",25,0)
 .S SDWLOFDT=$P(SDWLX,U,2),SDWLOK1=1 I SDWLOFDT>SDWLBD!(SDWLOFDT=SDWLBD) D
"RTN","SDWLROIS",26,0)
 ..I SDWLOFDT<SDWLED!(SDWLOFDT=SDWLED) S SDWLOK1=0
"RTN","SDWLROIS",27,0)
 .S X1=$P(^DIC(4,+$P(SDWLX,U,3),0),U,1),Y1=SDWLTYP
"RTN","SDWLROIS",28,0)
 .S SDWLXEN=$P(SDWLX,U,20) I SDWLXEN="" S SDWLXEN="U"
"RTN","SDWLROIS",29,0)
 .S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")) ^("AD")=0
"RTN","SDWLROIS",30,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")) ^("AD")=0
"RTN","SDWLROIS",31,0)
 .I 'SDWLOK1 D S1
"RTN","SDWLROIS",32,0)
 .S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLROIS",33,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLROIS",34,0)
 .S SDWLDFDT=0,SDWLOK3=1 I $D(^SDWL(409.3,SDWLDA,"DIS")) S SDWLDFDT=$P(^("DIS"),U,1),SDWLOK3=0 I SDWLDFDT<SDWLBD!(SDWLDFDT>SDWLED) S SDWLOK3=1
"RTN","SDWLROIS",35,0)
 .S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")) ^("CL")=0
"RTN","SDWLROIS",36,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")) ^("CL")=0
"RTN","SDWLROIS",37,0)
 .I 'SDWLOK3 D S3
"RTN","SDWLROIS",38,0)
 .S SDWLTYP=$P(SDWLX,U,5)
"RTN","SDWLROIS",39,0)
 .S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")) ^("PR")=0
"RTN","SDWLROIS",40,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")) ^("PR")=0
"RTN","SDWLROIS",41,0)
 .S SDWLFLG=0
"RTN","SDWLROIS",42,0)
 .I SDWLOFDT'>SDWLBD D
"RTN","SDWLROIS",43,0)
 ..I SDWLOFDT=SDWLBD Q
"RTN","SDWLROIS",44,0)
 ..I $P(SDWLX,U,17)["O" S SDWLFLG=1
"RTN","SDWLROIS",45,0)
 ..I $D(^SDWL(409.3,SDWLDA,"DIS")) D
"RTN","SDWLROIS",46,0)
 ...I 'SDWLFLG,($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)>SDWLBD)!($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)=SDWLBD) S SDWLFLG=1
"RTN","SDWLROIS",47,0)
 ..I SDWLFLG D
"RTN","SDWLROIS",48,0)
 ...S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")+1
"RTN","SDWLROIS",49,0)
 ...S ^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")=^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")+1
"RTN","SDWLROIS",50,0)
 .I $P(SDWLX,U,14) D
"RTN","SDWLROIS",51,0)
 ..S SDWLRDT=$P(SDWLX,U,14)
"RTN","SDWLROIS",52,0)
 ..I SDWLRDT>SDWLBD!(SDWLRDT=SDWLBD)!(SDWLRDT<SDWLED)!(SDWLRDT=SDWLED) D
"RTN","SDWLROIS",53,0)
 ...S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLROIS",54,0)
 ...S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")=^("NR")+1
"RTN","SDWLROIS",55,0)
 ...S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLROIS",56,0)
 ...S ^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLROIS",57,0)
 .D S2
"RTN","SDWLROIS",58,0)
 Q
"RTN","SDWLROIS",59,0)
S1A ; SET WAIL LIST TYPE IF NOT IN FILE - SD*5.3*412
"RTN","SDWLROIS",60,0)
 S N=0
"RTN","SDWLROIS",61,0)
 F I=6:1:9 S N=N+1 I $P(SDWLX,U,I) S SDWLTYP=N D SET Q
"RTN","SDWLROIS",62,0)
 Q
"RTN","SDWLROIS",63,0)
 ;
"RTN","SDWLROIS",64,0)
SET ;SD*5.3*412
"RTN","SDWLROIS",65,0)
 S DA=SDWLDA
"RTN","SDWLROIS",66,0)
 S DIE="^SDWL(409.3,",DR="4////^S X=SDWLTYP" D ^DIE
"RTN","SDWLROIS",67,0)
 K DA,DIE,DR,I,N
"RTN","SDWLROIS",68,0)
 Q
"RTN","SDWLROIS",69,0)
 ;
"RTN","SDWLROIS",70,0)
S1 ;ORIGINATING DATE MEETS CRITERIA
"RTN","SDWLROIS",71,0)
 ;
"RTN","SDWLROIS",72,0)
 S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")+1
"RTN","SDWLROIS",73,0)
 S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")=^("AD")+1
"RTN","SDWLROIS",74,0)
 Q
"RTN","SDWLROIS",75,0)
S2 ;DO NOT REMOVE DATE MEETS CRITERIA
"RTN","SDWLROIS",76,0)
 ;
"RTN","SDWLROIS",77,0)
 S X0=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR"),X2=$G(^("AD")),X3=$G(^("CL")) S X4=X0+X2-X3
"RTN","SDWLROIS",78,0)
 S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"RR")=($G(^("PR"))+($G(^("AD"))))-$G(^("CL"))
"RTN","SDWLROIS",79,0)
 S ^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLROIS",80,0)
 Q
"RTN","SDWLROIS",81,0)
S3 S SDWLDIS=^SDWL(409.3,SDWLDA,"DIS")  D
"RTN","SDWLROIS",82,0)
 .S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")+1
"RTN","SDWLROIS",83,0)
 .S ^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")=^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")+1
"RTN","SDWLROIS",84,0)
 .S SDWLDP=$P(SDWLDIS,U,3),X="SDWL"_SDWLDP,@X=@X+1 S:'$D(^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)) ^(X)=0
"RTN","SDWLROIS",85,0)
 .S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)=^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)+1
"RTN","SDWLROIS",86,0)
 .S:'$D(^TMP("SDWLROI2",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)) ^(X)=0
"RTN","SDWLROIS",87,0)
 .S ^TMP("SDWLROI1",$J,X1,SDWLXEN,Y1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)=^(X)+1
"RTN","SDWLROIS",88,0)
 Q
"RTN","SDWLRPS1")
0^3^B42004976
"RTN","SDWLRPS1",1,0)
SDWLRPS1 ;;IOFO BAY PINES/TEH - WAIT LIST REPORT FORMAT 1-SUMMARY;06/12/2002 ; 20 Aug 2002  2:10 PM
"RTN","SDWLRPS1",2,0)
 ;;5.3;scheduling;**263,412**;AUG 13 1993
"RTN","SDWLRPS1",3,0)
 ;
"RTN","SDWLRPS1",4,0)
 ;
"RTN","SDWLRPS1",5,0)
 ;******************************************************************
"RTN","SDWLRPS1",6,0)
 ;                             CHANGE LOG
"RTN","SDWLRPS1",7,0)
 ;                                               
"RTN","SDWLRPS1",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLRPS1",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLRPS1",10,0)
 ;   
"RTN","SDWLRPS1",11,0)
 ;   
"RTN","SDWLRPS1",12,0)
 ;   
"RTN","SDWLRPS1",13,0)
 ;
"RTN","SDWLRPS1",14,0)
EN ;
"RTN","SDWLRPS1",15,0)
 D INIT
"RTN","SDWLRPS1",16,0)
 I $$S^%ZTLOAD G END
"RTN","SDWLRPS1",17,0)
 D HD
"RTN","SDWLRPS1",18,0)
 D SORT
"RTN","SDWLRPS1",19,0)
 I $$S^%ZTLOAD G END
"RTN","SDWLRPS1",20,0)
 D PRT
"RTN","SDWLRPS1",21,0)
 I $D(DUOUT) W !!,"*** End of Report ***" G END
"RTN","SDWLRPS1",22,0)
 G:POP END
"RTN","SDWLRPS1",23,0)
 I $$S^%ZTLOAD G END
"RTN","SDWLRPS1",24,0)
 D PRT1
"RTN","SDWLRPS1",25,0)
 W !!,"*** End of Report ***"
"RTN","SDWLRPS1",26,0)
 K ^TMP("SDWLRPS1",$J)
"RTN","SDWLRPS1",27,0)
 Q
"RTN","SDWLRPS1",28,0)
INIT ;Initialize variables
"RTN","SDWLRPS1",29,0)
 ;
"RTN","SDWLRPS1",30,0)
 I $D(CT1) S SDWLCT1=CT1
"RTN","SDWLRPS1",31,0)
 I $D(CT2) S SDWLCT2=CT2
"RTN","SDWLRPS1",32,0)
 I $D(DATE) S SDWLDATE=DATE
"RTN","SDWLRPS1",33,0)
 I $D(FORM) S SDWLFORM=FORM
"RTN","SDWLRPS1",34,0)
 I $D(INS) S SDWLINS=INS
"RTN","SDWLRPS1",35,0)
 I $D(OPEN) S SDWLOPEN=OPEN
"RTN","SDWLRPS1",36,0)
 S SDWLPG=0
"RTN","SDWLRPS1",37,0)
 I $D(ZTSAVE) D
"RTN","SDWLRPS1",38,0)
 .F SDWLI="CT1","CT2","DATE","FORM","INS","OPEN" S SDWL="SDWL"_SDWLI,@SDWL=$G(ZTSAVE(SDWLI))
"RTN","SDWLRPS1",39,0)
 I SDWLINS="ALL" S SDWLIN("ALL")=""
"RTN","SDWLRPS1",40,0)
 S SDWLTXP=$P(SDWLCT1,U,3)
"RTN","SDWLRPS1",41,0)
 S SDWLOPEN=$S(SDWLOPEN=1:"O",1:"C")
"RTN","SDWLRPS1",42,0)
 I SDWLINS'="ALL" F SDWLI=1:1 S SDWLIN=$P($P(SDWLINS,";",SDWLI),U,1) Q:SDWLIN=""  S SDWLIN(SDWLIN)="",^TMP("SDWLRPT1",$J,$P(^DIC(4,SDWLIN,0),U,1))=0
"RTN","SDWLRPS1",43,0)
 I SDWLCT2'="ALL" F SDWLI=1:1 S SDWLCT=$P($P(SDWLCT2,";",SDWLI),U,1) Q:SDWLCT=""  S SDWLCT2(SDWLCT)=""
"RTN","SDWLRPS1",44,0)
 I SDWLDATE="ALL" S SDWLBD=0,SDWLED=9999999 G INIT1
"RTN","SDWLRPS1",45,0)
 S SDWLBD=$P(SDWLDATE,U,1),SDWLED=$P(SDWLDATE,U,2)
"RTN","SDWLRPS1",46,0)
 N POP S POP=0  ;SD*5.3*412
"RTN","SDWLRPS1",47,0)
INIT1 D NOW^%DTC S Y=% D DD^%DT S SDWLDTP=$P(Y,":",1,2)
"RTN","SDWLRPS1",48,0)
 Q
"RTN","SDWLRPS1",49,0)
SORT ;Sort Records
"RTN","SDWLRPS1",50,0)
 K ^TMP("SDWLRPS1",$J)
"RTN","SDWLRPS1",51,0)
 S SDWLDA=0 F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA<1  D
"RTN","SDWLRPS1",52,0)
 .S SDWLX=$G(^SDWL(409.3,SDWLDA,0)),SDWLERR=0,SDWLDFN=+SDWLX,SDWLDDT=$P(SDWLX,U,16)
"RTN","SDWLRPS1",53,0)
 .;-Check for Institution Sort
"RTN","SDWLRPS1",54,0)
 .I SDWLINS'="ALL" D
"RTN","SDWLRPS1",55,0)
 ..I '$D(SDWLIN(+$P(SDWLX,U,3))) S SDWLERR=1 Q
"RTN","SDWLRPS1",56,0)
 .;-Check for Date Range Compliance
"RTN","SDWLRPS1",57,0)
 .I $P(SDWLX,U,16)<SDWLBD!($P(SDWLX,U,16)>SDWLED) S SDWLERR=2 Q
"RTN","SDWLRPS1",58,0)
 .S SDWLAPDT=$P(SDWLX,U,16),SDWLOPDT=$P(SDWLX,U,2) S X1=DT,X2=SDWLAPDT D ^%DTC S SDWLDWT=X I SDWLDWT<0 S SDWLDWT=0
"RTN","SDWLRPS1",59,0)
 .S SDWLTYP=$P(SDWLCT1,U,1),SDWLTYPE=$S(SDWLTYP="C":$P(SDWLX,U,9),1:$P(SDWLX,U,8)) I SDWLTYPE="" S SDWLERR=7 Q
"RTN","SDWLRPS1",60,0)
 .S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLRPS1",61,0)
 .I SDWLCT2'="ALL" D
"RTN","SDWLRPS1",62,0)
 ..I '$D(SDWLCT2(SDWLTYPE)) S SDWLERR=3
"RTN","SDWLRPS1",63,0)
 .I SDWLTYP="" S SDWLERR=4 Q
"RTN","SDWLRPS1",64,0)
 .I SDWLOPEN'["C",$P(SDWLX,U,17)'[SDWLOPEN S SDWLERR=6 Q
"RTN","SDWLRPS1",65,0)
 .Q:SDWLERR  D
"RTN","SDWLRPS1",66,0)
 ..S SDWLSCC=2,DFN=SDWLDFN D ELIG^VADPT I $D(VAEL(3)) S SDWLSCN=$P(VAEL(3),U,2) I SDWLSCN>49 S SDWLSCC=1
"RTN","SDWLRPS1",67,0)
 ..S:'$D(^TMP("SDWLRPS1",$J,"A",+$P(SDWLX,U,3),SDWLTYPE)) ^(SDWLTYPE)=0
"RTN","SDWLRPS1",68,0)
 ..S ^TMP("SDWLRPS1",$J,"A",+$P(SDWLX,U,3),SDWLTYPE)=^(SDWLTYPE)+1
"RTN","SDWLRPS1",69,0)
 ..S:'$D(^TMP("SDWLRPS1",$J,"B",+$P(SDWLX,U,3),SDWLTYPE,SDWLDFN)) ^(SDWLDFN)=0 S ^TMP("SDWLRPS1",$J,"B",+$P(SDWLX,U,3),SDWLTYPE,SDWLDFN)=^(SDWLDFN)+1
"RTN","SDWLRPS1",70,0)
 ..S:'$D(^TMP("SDWLRPS1",$J,"C",SDWLSCC,+$P(SDWLX,U,3),SDWLTYPE)) ^TMP("SDWLRPS1",$J,"C",SDWLSCC,+$P(SDWLX,U,3),SDWLTYPE)=0
"RTN","SDWLRPS1",71,0)
 ..S ^TMP("SDWLRPS1",$J,"C",SDWLSCC,+$P(SDWLX,U,3),SDWLTYPE)=^(SDWLTYPE)+1
"RTN","SDWLRPS1",72,0)
 ..S ^TMP("SDWLRPS1",$J,"D",SDWLSCC,+$P(SDWLX,U,3),SDWLTYPE,+SDWLDWT,SDWLDA)=""
"RTN","SDWLRPS1",73,0)
 Q
"RTN","SDWLRPS1",74,0)
PRT ;
"RTN","SDWLRPS1",75,0)
 I '$D(^TMP("SDWLRPS1",$J,"A")) W !!,"*** No Patients to Report ***" S DUOUT="" Q
"RTN","SDWLRPS1",76,0)
 S SDWLIN=0 F  S SDWLIN=$O(^TMP("SDWLRPS1",$J,"A",SDWLIN)) Q:SDWLIN=""  W !,"Institution: ",$P($G(^DIC(4,SDWLIN,0)),U,1),! D  Q:POP  ;SD*5.3*412
"RTN","SDWLRPS1",77,0)
 .D PRA
"RTN","SDWLRPS1",78,0)
 Q
"RTN","SDWLRPS1",79,0)
PRA ;  
"RTN","SDWLRPS1",80,0)
 S SDWLSC=0,(SDWLX,SDWLXT)=0 F  S SDWLSC=$O(^TMP("SDWLRPS1",$J,"A",SDWLIN,SDWLSC)) Q:SDWLSC=""  D
"RTN","SDWLRPS1",81,0)
 .S SDWLX=$G(^TMP("SDWLRPS1",$J,"A",SDWLIN,SDWLSC)),SDWLXT=SDWLXT+SDWLX W !,$$EXTERNAL^DILFD(SDWLF,.01,,$P(^SDWL(SDWLF,SDWLSC,0),U,1)),?30,SDWLX
"RTN","SDWLRPS1",82,0)
 .S SDWLXTT=0,SDWLDFNX=0 F  S SDWLDFNX=$O(^TMP("SDWLRPS1",$J,"B",SDWLIN,SDWLSC,SDWLDFNX)) Q:SDWLDFNX=""  S SDWLXTT=SDWLXTT+1
"RTN","SDWLRPS1",83,0)
 W !,?20,"Total #: ",SDWLXT
"RTN","SDWLRPS1",84,0)
 I $D(SDWLSPT),$Y>IOSL S DIR(0)="E" D ^DIR S:X="^" POP=1 Q:POP  ;SD*5.3*412 early exit
"RTN","SDWLRPS1",85,0)
 Q
"RTN","SDWLRPS1",86,0)
PRT1 ;
"RTN","SDWLRPS1",87,0)
 N DFN
"RTN","SDWLRPS1",88,0)
 D HD1
"RTN","SDWLRPS1",89,0)
 S SDWLSCC=0 F  S SDWLSCC=$O(^TMP("SDWLRPS1",$J,"D",SDWLSCC)) Q:SDWLSCC=""  Q:$$S^%ZTLOAD  D  Q:POP  ;SD*5.3*412 added to allow early exit
"RTN","SDWLRPS1",90,0)
 .W !,"******* ",SDWLSCC," *******",!
"RTN","SDWLRPS1",91,0)
 .S SDWLINS=0 F  S SDWLINS=$O(^TMP("SDWLRPS1",$J,"D",SDWLSCC,SDWLINS)) Q:SDWLINS=""  D  Q:POP  W !  ;SD*5.3*412
"RTN","SDWLRPS1",92,0)
 ..W !,$P($G(^DIC(4,SDWLINS,0)),U,1)
"RTN","SDWLRPS1",93,0)
 ..S SDWLSC=0 F  S SDWLSC=$O(^TMP("SDWLRPS1",$J,"D",SDWLSCC,SDWLINS,SDWLSC)) Q:SDWLSC=""  D  Q:POP  ;SD*5.3*412
"RTN","SDWLRPS1",94,0)
 ...W !,$$EXTERNAL^DILFD(SDWLF,.01,,$P(^SDWL(SDWLF,SDWLSC,0),U,1))
"RTN","SDWLRPS1",95,0)
 ...S SDWLWT="" F  S SDWLWT=$O(^TMP("SDWLRPS1",$J,"D",SDWLSCC,SDWLINS,SDWLSC,SDWLWT)) Q:SDWLWT=""  D  Q:POP  ;SD*5.3*412
"RTN","SDWLRPS1",96,0)
 ....S SDWLDA=0 F  S SDWLDA=$O(^TMP("SDWLRPS1",$J,"D",SDWLSCC,SDWLINS,SDWLSC,SDWLWT,SDWLDA)) Q:SDWLDA=""  D  Q:POP  ;SD*5.3*412
"RTN","SDWLRPS1",97,0)
 .....S X=$G(^SDWL(409.3,SDWLDA,0)),SDWLODT=$P(X,U,2),SDWLDDT=$P(X,U,16) S DFN=+X D  Q:POP  ;SD*5.3*412
"RTN","SDWLRPS1",98,0)
 ......D DEM^VADPT,1^VADPT K DFN
"RTN","SDWLRPS1",99,0)
 ......W !,VA("BID"),?6,$E(VADM(1),1,25) W ?32,$E(SDWLODT,4,5),"/",$E(SDWLODT,6,7),"/",($E(SDWLODT,1,3)+1700)
"RTN","SDWLRPS1",100,0)
 ......W ?47,$E(SDWLDDT,4,5),"/",$E(SDWLDDT,6,7),"/",($E(SDWLDDT,1,3)+1700),?60,$J(SDWLWT,5)
"RTN","SDWLRPS1",101,0)
 ......I $D(SDWLSPT),$Y>IOSL S DIR(0)="E" D ^DIR S:X="^" POP=1 Q:POP  D HD1
"RTN","SDWLRPS1",102,0)
 ......I $Y>IOSL D HD
"RTN","SDWLRPS1",103,0)
 .W !
"RTN","SDWLRPS1",104,0)
LINE ;Draw Line
"RTN","SDWLRPS1",105,0)
 W !,"_______________________________________________________________________________"
"RTN","SDWLRPS1",106,0)
 Q
"RTN","SDWLRPS1",107,0)
HD ;Header
"RTN","SDWLRPS1",108,0)
 W:$D(IOF) @IOF W !,SDWLDTP,?80-$L("Appointment Wait List Report")\2,"Appointment Wait List Report"
"RTN","SDWLRPS1",109,0)
 S SDWLPG=SDWLPG+1 W ?72,"Page: ",SDWLPG
"RTN","SDWLRPS1",110,0)
 W !!,?30,"Institution: " I SDWLINS="ALL" D
"RTN","SDWLRPS1",111,0)
 .W ?45,SDWLINS
"RTN","SDWLRPS1",112,0)
 F I=1:1 S X=$P($P(SDWLINS,";",I),"^",2) Q:X=""  W:I>1 ! W ?45,X
"RTN","SDWLRPS1",113,0)
 S Y=$P(SDWLDATE,U,1) D DD^%DT S SDWLBDT=Y S Y=$P(SDWLDATE,U,2) D DD^%DT S SDWLEDT=Y
"RTN","SDWLRPS1",114,0)
 W !,?23,"Date Desired Range: ",SDWLBDT," to ",SDWLEDT
"RTN","SDWLRPS1",115,0)
 S X=$P(SDWLCT2,U,2)
"RTN","SDWLRPS1",116,0)
 W !?27,"Report Category: ",$S($P(SDWLCT1,U,1)="C":"CLINIC",1:"SPECIALTY") I X="ALL" W " ALL"
"RTN","SDWLRPS1",117,0)
 I X'="ALL" D
"RTN","SDWLRPS1",118,0)
 .F I=1:1 S X=$P($P(SDWLCT2,";",I),"^",2) Q:X=""  W !,?45,$$EXTERNAL^DILFD(SDWLF,.01,,X)
"RTN","SDWLRPS1",119,0)
 S X=$G(SDWLOPEN) W !,?36,"Status: ",$S(SDWLOPEN="O":"Open",1:"All")
"RTN","SDWLRPS1",120,0)
 S X=$G(SDWLFORM) W !,?28,"Output Format: ",$S(SDWLFORM="S":"Summary",1:"Detailed")
"RTN","SDWLRPS1",121,0)
 W !
"RTN","SDWLRPS1",122,0)
 Q
"RTN","SDWLRPS1",123,0)
HD1 ;
"RTN","SDWLRPS1",124,0)
 W:$D(IOF) @IOF
"RTN","SDWLRPS1",125,0)
 W !!,"Name",?30,"Date Entered",?45,"Date Desired",?60,"# of Days Waiting",!
"RTN","SDWLRPS1",126,0)
END K X1,X2,CT1,CT2,DATE,I,INS,OPEN,FORM
"RTN","SDWLRPS1",127,0)
 K ^TMP("SDWLRPT1",$J) Q
"RTN","SDWLRPS1",128,0)
 ;
"RTN","SDWLRPS2")
0^4^B39256183
"RTN","SDWLRPS2",1,0)
SDWLRPS2 ;;IOFO BAY PINES/TEH - WAIT LIST REPORT FORMAT 1-SUMMARY;06/12/2002 ; 20 Aug 2002  2:10 PM
"RTN","SDWLRPS2",2,0)
 ;;5.3;scheduling;**263,412**;AUG 13 1993
"RTN","SDWLRPS2",3,0)
 ;
"RTN","SDWLRPS2",4,0)
 ;
"RTN","SDWLRPS2",5,0)
 ;******************************************************************
"RTN","SDWLRPS2",6,0)
 ;                             CHANGE LOG
"RTN","SDWLRPS2",7,0)
 ;                                               
"RTN","SDWLRPS2",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLRPS2",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLRPS2",10,0)
 ;   
"RTN","SDWLRPS2",11,0)
 ;   
"RTN","SDWLRPS2",12,0)
 ;   
"RTN","SDWLRPS2",13,0)
 ;
"RTN","SDWLRPS2",14,0)
EN ;
"RTN","SDWLRPS2",15,0)
 D INIT
"RTN","SDWLRPS2",16,0)
 I $$S^%ZTLOAD G END
"RTN","SDWLRPS2",17,0)
 D HD
"RTN","SDWLRPS2",18,0)
 D SORT
"RTN","SDWLRPS2",19,0)
 I $$S^%ZTLOAD G END
"RTN","SDWLRPS2",20,0)
 D PRT G:POP END  ;SD*5.3*412 added for early exit
"RTN","SDWLRPS2",21,0)
 I $$S^%ZTLOAD G END
"RTN","SDWLRPS2",22,0)
 D PRT1
"RTN","SDWLRPS2",23,0)
 K ^TMP("SDWLRPS2",$J)
"RTN","SDWLRPS2",24,0)
 Q
"RTN","SDWLRPS2",25,0)
INIT ;Initialize variables
"RTN","SDWLRPS2",26,0)
 ;
"RTN","SDWLRPS2",27,0)
 I $D(CT1) S SDWLCT1=CT1
"RTN","SDWLRPS2",28,0)
 I $D(CT2) S SDWLCT2=CT2
"RTN","SDWLRPS2",29,0)
 I $D(DATE) S SDWLDATE=DATE
"RTN","SDWLRPS2",30,0)
 I $D(FORM) S SDWLFORM=FORM
"RTN","SDWLRPS2",31,0)
 I $D(INS) S (SDWLINS,SDWLINST)=INS
"RTN","SDWLRPS2",32,0)
 I $D(OPEN) S SDWLOPEN=OPEN
"RTN","SDWLRPS2",33,0)
 S SDWLPG=0
"RTN","SDWLRPS2",34,0)
 I $D(ZTSAVE) D
"RTN","SDWLRPS2",35,0)
 .F SDWLI="CT1","CT2","FORM","INS","OPEN" S SDWL="SDWL"_SDWLI,@SDWL=$G(ZTSAVE(SDWLI))
"RTN","SDWLRPS2",36,0)
 I SDWLINS="ALL" S SDWLIN("ALL")=""
"RTN","SDWLRPS2",37,0)
 S SDWLINST=SDWLINS
"RTN","SDWLRPS2",38,0)
 S SDWLTXP=$P(SDWLCT1,U,3)
"RTN","SDWLRPS2",39,0)
 I SDWLINS'="ALL" F SDWLI=1:1 S SDWLIN=$P($P(SDWLINS,";",SDWLI),U,1) Q:SDWLIN=""  S SDWLIN(SDWLIN)="",^TMP("SDWLRPS2",$J,"D",1,SDWLIN)=0,^TMP("SDWLRPS2",$J,"D",2,SDWLIN)=0
"RTN","SDWLRPS2",40,0)
 I SDWLCT2'="ALL" F SDWLI=1:1 S SDWLCL=$P($P(SDWLCT2,";",SDWLI),U,1) Q:SDWLCL=""  S SDWLCT2(SDWLCL)=""
"RTN","SDWLRPS2",41,0)
 S SDWLSCX=$S($P(SDWLCT1,U,1)="T":5,1:6)
"RTN","SDWLRPS2",42,0)
 D NOW^%DTC S Y=% D DD^%DT S SDWLDTP=Y
"RTN","SDWLRPS2",43,0)
 N POP S POP=0  ;SD*5.3*412
"RTN","SDWLRPS2",44,0)
 Q
"RTN","SDWLRPS2",45,0)
SORT ;Sort Records
"RTN","SDWLRPS2",46,0)
 S SDWLCNT=0
"RTN","SDWLRPS2",47,0)
 S SDWLDA=0 F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA<1  D
"RTN","SDWLRPS2",48,0)
 .S SDWLX=$G(^SDWL(409.3,SDWLDA,0)),SDWLERR=0,SDWLDFN=+SDWLX
"RTN","SDWLRPS2",49,0)
 .;-Check for Institution Sort
"RTN","SDWLRPS2",50,0)
 .I SDWLINS'="ALL" D
"RTN","SDWLRPS2",51,0)
 ..I '$D(SDWLIN(+$P(SDWLX,U,3))) S SDWLERR=1 Q
"RTN","SDWLRPS2",52,0)
 .S SDWLAPDT=$P(SDWLX,U,16),SDWLOPDT=$P(SDWLX,U,2) S X1=DT,X2=SDWLOPDT D ^%DTC S SDWLDWT=+X  I SDWLDWT<0 S SDWLDWT=0
"RTN","SDWLRPS2",53,0)
 .S SDWLTYP=$P(SDWLCT1,U,1),SDWLTYPE=$S(SDWLTYP="T":$P(SDWLX,U,6),1:$P(SDWLX,U,7)) I SDWLTYPE="" S SDWLERR=7 Q
"RTN","SDWLRPS2",54,0)
 .S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLRPS2",55,0)
 .I SDWLCT2'="ALL" D
"RTN","SDWLRPS2",56,0)
 ..I '$D(SDWLCT2(SDWLTYPE)) S SDWLERR=3
"RTN","SDWLRPS2",57,0)
 .I SDWLTYP="" S SDWLERR=4 Q
"RTN","SDWLRPS2",58,0)
 .I $P(SDWLX,U,17)'[SDWLOPEN S SDWLERR=6 Q
"RTN","SDWLRPS2",59,0)
 .Q:SDWLERR  D
"RTN","SDWLRPS2",60,0)
 ..S SDWLSCC=2 D ELIG^VADPT I $D(VAEL(3)) S SDWLSCN=$P(VAEL(3),U,2) I SDWLSCN>49 S SDWLSCC=1
"RTN","SDWLRPS2",61,0)
 ..S:'$D(^TMP("SDWLRPS2",$J,"A",+$P(SDWLX,U,3),SDWLTYPE)) ^(SDWLTYPE)=0
"RTN","SDWLRPS2",62,0)
 ..S ^TMP("SDWLRPS2",$J,"A",+$P(SDWLX,U,3),SDWLTYPE)=^(SDWLTYPE)+1
"RTN","SDWLRPS2",63,0)
 ..S:'$D(^TMP("SDWLRPS2",$J,"B",+$P(SDWLX,U,3),SDWLTYPE,SDWLDFN)) ^(SDWLDFN)=0 S ^TMP("SDWLRPS2",$J,"B",+$P(SDWLX,U,3),SDWLTYPE,SDWLDFN)=^(SDWLDFN)+1
"RTN","SDWLRPS2",64,0)
 ..S:'$D(^TMP("SDWLRPS2",$J,"C",SDWLSCC,+$P(SDWLX,U,3),SDWLTYPE)) ^TMP("SDWLRPS2",$J,"C",SDWLSCC,+$P(SDWLX,U,3),SDWLTYPE)=0
"RTN","SDWLRPS2",65,0)
 ..S ^TMP("SDWLRPS2",$J,"C",SDWLSCC,+$P(SDWLX,U,3),SDWLTYPE)=^(SDWLTYPE)+1
"RTN","SDWLRPS2",66,0)
 ..S ^TMP("SDWLRPS2",$J,"D",SDWLSCC,+$P(SDWLX,U,3),SDWLTYPE,99999999-SDWLDWT,SDWLDA)=""
"RTN","SDWLRPS2",67,0)
 ..S SDWLCNT=SDWLCNT+1,^TMP("SDWLRPS2",$J,"D",SDWLSCC,+$P(SDWLX,U,3))=SDWLCNT
"RTN","SDWLRPS2",68,0)
 Q
"RTN","SDWLRPS2",69,0)
PRT ;
"RTN","SDWLRPS2",70,0)
 S SDWLIN=0 F  S SDWLIN=$O(^TMP("SDWLRPS2",$J,"A",SDWLIN)) Q:SDWLIN=""  W !,"Institution: ",$$GET1^DIQ(4,SDWLIN_",",".01"),! D  Q:POP  ;SD*5.3*412
"RTN","SDWLRPS2",71,0)
 .D PRA
"RTN","SDWLRPS2",72,0)
 Q
"RTN","SDWLRPS2",73,0)
PRA ;
"RTN","SDWLRPS2",74,0)
 S SDWLSC=0,(SDWLX,SDWLXT)=0 F  S SDWLSC=$O(^TMP("SDWLRPS2",$J,"A",SDWLIN,SDWLSC)) Q:SDWLSC=""  D  Q:POP  ;SD*5.3*412 added Quit to Exit
"RTN","SDWLRPS2",75,0)
 .I '$D(SDWLSCX) S SDWLSCX=0
"RTN","SDWLRPS2",76,0)
 .S SDWLX=$G(^TMP("SDWLRPS2",$J,"A",SDWLIN,SDWLSC)),SDWLXT=SDWLXT+SDWLX W !,$$EXTERNAL^DILFD(409.3,SDWLSCX,,SDWLSC),?30,SDWLX
"RTN","SDWLRPS2",77,0)
 .S SDWLXTT=0,SDWLDFNX=0 F  S SDWLDFNX=$O(^TMP("SDWLRPS2",$J,"B",SDWLIN,SDWLSC,SDWLDFNX)) Q:SDWLDFNX=""  S SDWLXTT=SDWLXTT+1
"RTN","SDWLRPS2",78,0)
 W !,?21,"Total #: ",SDWLXT
"RTN","SDWLRPS2",79,0)
 I $D(SDWLSPT) D SCR Q:POP  D HD,HD1  ;SD*5.3*412 added Quit
"RTN","SDWLRPS2",80,0)
 Q
"RTN","SDWLRPS2",81,0)
PRT1 ;
"RTN","SDWLRPS2",82,0)
 N DFN
"RTN","SDWLRPS2",83,0)
 S SDWLSCC=0 F  S SDWLSCC=$O(^TMP("SDWLRPS2",$J,"D",SDWLSCC)) Q:SDWLSCC=""  Q:$$S^%ZTLOAD  D  Q:POP  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRPS2",84,0)
 .W !,"******* ",SDWLSCC," *******",!
"RTN","SDWLRPS2",85,0)
 .S SDWLINS=0 F  S SDWLINS=$O(^TMP("SDWLRPS2",$J,"D",SDWLSCC,SDWLINS)) Q:SDWLINS=""  D  Q:POP  W !  ;SD*5.3*412 added Quit
"RTN","SDWLRPS2",86,0)
 ..W !,$P($G(^DIC(4,SDWLINS,0)),U,1),! I '$G(^TMP("SDWLRPS2",$J,"D",SDWLSCC,SDWLINS)) W !,"*** No Patient Records to Report ***" D:$D(SDWLSPT) SCR Q:POP  D HD,HD1 Q  ;SD*5.3*412 added first Quit
"RTN","SDWLRPS2",87,0)
 ..S SDWLSC=0 F  S SDWLSC=$O(^TMP("SDWLRPS2",$J,"D",SDWLSCC,SDWLINS,SDWLSC)) Q:SDWLSC=""  D  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRPS2",88,0)
 ...S SDWLWT="" F  S SDWLWT=$O(^TMP("SDWLRPS2",$J,"D",SDWLSCC,SDWLINS,SDWLSC,SDWLWT)) Q:SDWLWT=""  D  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRPS2",89,0)
 ....S SDWLDA=0 F  S SDWLDA=$O(^TMP("SDWLRPS2",$J,"D",SDWLSCC,SDWLINS,SDWLSC,SDWLWT,SDWLDA)) Q:SDWLDA=""  D  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRPS2",90,0)
 .....S X=$G(^SDWL(409.3,SDWLDA,0)),SDWLODT=$P(X,U,2),SDWLDDT=$P(X,U,16) S DFN=+X D  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRPS2",91,0)
 ......D DEM^VADPT,1^VADPT
"RTN","SDWLRPS2",92,0)
 ......W !,VA("BID"),?6,$E(VADM(1),1,25) W ?32,$E(SDWLODT,4,5),"/",$E(SDWLODT,6,7),"/",($E(SDWLODT,1,3)+1700)
"RTN","SDWLRPS2",93,0)
 ......W ?47,$J(99999999-SDWLWT,5)
"RTN","SDWLRPS2",94,0)
 ......D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412 added Quit
"RTN","SDWLRPS2",95,0)
 .W !
"RTN","SDWLRPS2",96,0)
LINE ;Draw Line
"RTN","SDWLRPS2",97,0)
 W !,"_______________________________________________________________________________"
"RTN","SDWLRPS2",98,0)
 Q
"RTN","SDWLRPS2",99,0)
SCR W ! S DIR(0)="E" D ^DIR S:X="^" POP=1 ; SD*5.3*412
"RTN","SDWLRPS2",100,0)
 Q
"RTN","SDWLRPS2",101,0)
HD ;Header
"RTN","SDWLRPS2",102,0)
 W:$D(IOF) @IOF W !,SDWLDTP,?80-$L("PCMM ASSIGNMENT Wait List Report")\2,"PCMM ASSIGNMENT Wait List Report"
"RTN","SDWLRPS2",103,0)
 S SDWLPG=SDWLPG+1 W ?72,"Page: ",SDWLPG
"RTN","SDWLRPS2",104,0)
 W !!,?30,"Institution: " D
"RTN","SDWLRPS2",105,0)
 .F I=1:1 S X=$P(SDWLINST,";",I) Q:X=""  W:I>1 ! W ?45,$$GET1^DIQ(4,X_",",".01")
"RTN","SDWLRPS2",106,0)
 S X=$P(SDWLCT2,U,2)
"RTN","SDWLRPS2",107,0)
 W !?27,"Report Category: ",$S($P(SDWLCT1,U,1)="T":"TEAM",1:"POSITION") I X="ALL" W " ALL"
"RTN","SDWLRPS2",108,0)
 I X'="ALL" D
"RTN","SDWLRPS2",109,0)
 .F I=1:1 S X=$P($P(SDWLCT2,";",I),"^",2) Q:X=""  W !,?45,X
"RTN","SDWLRPS2",110,0)
 S X=$G(SDWLOPEN) W !,?36,"Status: ",$S(SDWLOPEN="O":"Open",1:"All")
"RTN","SDWLRPS2",111,0)
 S X=$G(SDWLFORM) W !,?28,"Output Format: ",$S(SDWLFORM="S":"Summary",1:"Detailed")
"RTN","SDWLRPS2",112,0)
 Q
"RTN","SDWLRPS2",113,0)
HD1 ;
"RTN","SDWLRPS2",114,0)
 W !!,"Name",?30,"Date Entered",?45,"# of Days Waiting",!!
"RTN","SDWLRPS2",115,0)
 Q
"RTN","SDWLRPS2",116,0)
END K X1,X2,CT1,CT2,DATE,I,INS,OPEN,FORM
"RTN","SDWLRPS2",117,0)
 K ^TMP("SDWLRPS2",$J)
"RTN","SDWLRPS2",118,0)
 Q
"RTN","SDWLRQ1")
0^5^B38816800
"RTN","SDWLRQ1",1,0)
SDWLRQ1 ;;IOFO BAY PINES/TEH - ADHOC WAIT LIST REPORT;06/12/2002 ; 20 Aug 2002  2:10 PM
"RTN","SDWLRQ1",2,0)
 ;;5.3;scheduling;**263,399,412**;AUG 13 1993
"RTN","SDWLRQ1",3,0)
 ;
"RTN","SDWLRQ1",4,0)
 ;
"RTN","SDWLRQ1",5,0)
 ;******************************************************************
"RTN","SDWLRQ1",6,0)
 ;                             CHANGE LOG
"RTN","SDWLRQ1",7,0)
 ;                                               
"RTN","SDWLRQ1",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLRQ1",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLRQ1",10,0)
 ;   
"RTN","SDWLRQ1",11,0)
 ;   
"RTN","SDWLRQ1",12,0)
 ;   
"RTN","SDWLRQ1",13,0)
 ;   
"RTN","SDWLRQ1",14,0)
EN ;Header
"RTN","SDWLRQ1",15,0)
 N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSAVE,ZTSK
"RTN","SDWLRQ1",16,0)
 D HD
"RTN","SDWLRQ1",17,0)
 S SDWLINST="",SDWLERR=0 K ^TMP("SDWLRQ1",$J),DIC,DIR,DR,DIE
"RTN","SDWLRQ1",18,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLRQ1",19,0)
2 D CAT G 1:SDWLERR,2:$D(DUOUT)
"RTN","SDWLRQ1",20,0)
3 D DATE G 2:SDWLERR,END:$D(DUOUT)
"RTN","SDWLRQ1",21,0)
4 D OPEN G 3:SDWLERR,3:$D(DUOUT)
"RTN","SDWLRQ1",22,0)
5 D FORM G 4:SDWLERR,4:$D(DUOUT)
"RTN","SDWLRQ1",23,0)
6 D DIS G EN:SDWLERR=1,END:SDWLERR=2
"RTN","SDWLRQ1",24,0)
 D QUE
"RTN","SDWLRQ1",25,0)
 Q
"RTN","SDWLRQ1",26,0)
INS ;Get Institution
"RTN","SDWLRQ1",27,0)
 N SDWLINST S SDWLINST=""
"RTN","SDWLRQ1",28,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // "
"RTN","SDWLRQ1",29,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!($D(^SDWL(409.31,""E"",+Y)))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLRQ1",30,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLRQ1",31,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLRQ1",32,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLRQ1",$J,"INS")="ALL" G IN3
"RTN","SDWLRQ1",33,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLRQ1",34,0)
IN2 S ^TMP("SDWLRQ1",$J,"INS")=SDWLINST
"RTN","SDWLRQ1",35,0)
IN3 Q
"RTN","SDWLRQ1",36,0)
CAT ;Report category selection
"RTN","SDWLRQ1",37,0)
 K DIR,DIE,DR,DIC
"RTN","SDWLRQ1",38,0)
 W !!,"    *** Report Category Selection ***" S SDWLERR=0
"RTN","SDWLRQ1",39,0)
 S SDWLERR=0,SDWLCAT="",DIR(0)="SO^1:Clinic;2:Select Service/Specialty",DIR("L",1)="     1. Clinic",DIR("L")="     2. Service/Specialty"
"RTN","SDWLRQ1",40,0)
 D ^DIR
"RTN","SDWLRQ1",41,0)
 I X="^" S SDWLERR=1 W *7 Q
"RTN","SDWLRQ1",42,0)
 I X="" S SDWLERR=1 W *7 Q
"RTN","SDWLRQ1",43,0)
 S X=$S(X["C":"C",X["c":"C",X["S":"S",X["s":"S",X=1:"C",X=2:"S",1:"")
"RTN","SDWLRQ1",44,0)
 I X="" W *7," Invalid Selection." G CAT
"RTN","SDWLRQ1",45,0)
 W !!,"Select Category for Report Output",!
"RTN","SDWLRQ1",46,0)
 S SDWLX=$S(X="C":"Clinic: ALL// ",X="S":"Service/Specialty: ALL// ")
"RTN","SDWLRQ1",47,0)
 S SDWLF=$S(X["C":409.32,X["S":409.31,X["c":409.32,X["s":409.31)
"RTN","SDWLRQ1",48,0)
 S SDWLFD=$S(X="C":8,1:7)
"RTN","SDWLRQ1",49,0)
 S SDWLCTX=X
"RTN","SDWLRQ1",50,0)
 K DIR,DIC,DR
"RTN","SDWLRQ1",51,0)
 S ^TMP("SDWLRQ1",$J,"CT1")=SDWLCTX_"^"_SDWLF_"^"_SDWLFD,DIC("A")=SDWLX,SDWLE=0
"RTN","SDWLRQ1",52,0)
CT1 W ! S DIC(0)="QEMNZA",DIC=SDWLF D ^DIC I 'SDWLE,Y<1 S ^TMP("SDWLRQ1",$J,"CT2")="ALL" G CT3
"RTN","SDWLRQ1",53,0)
 I Y<0,'$D(^TMP("SDWLRQ1",$J,"CT1")) W !,"This Entry is Required." G CAT
"RTN","SDWLRQ1",54,0)
 G CT2:Y<0
"RTN","SDWLRQ1",55,0)
 S SDWLCAT=SDWLCAT_Y_";",DIC("A")="Another "_$P(SDWLX,":",1)_": ",SDWLE=1 G CT1
"RTN","SDWLRQ1",56,0)
CT2 G CT1:'$D(SDWLCAT) S ^TMP("SDWLRQ1",$J,"CT2")=SDWLCAT
"RTN","SDWLRQ1",57,0)
CT3 Q
"RTN","SDWLRQ1",58,0)
DATE ;Date range selection
"RTN","SDWLRQ1",59,0)
 K X,Y,%DT
"RTN","SDWLRQ1",60,0)
 S %=1 W !!,"Print Report for ALL dates? " D YN^DICN
"RTN","SDWLRQ1",61,0)
 I %=1 S ^TMP("SDWLRQ1",$J,"DATE")="ALL" G E1
"RTN","SDWLRQ1",62,0)
 Q:%=0
"RTN","SDWLRQ1",63,0)
 Q:%=-1
"RTN","SDWLRQ1",64,0)
 S SDWLERR=0 W ! S %DT="AE",%DT("A")="Start with Desired Appointment Date: " D ^%DT
"RTN","SDWLRQ1",65,0)
 I X["^" S SDWLERR=1 Q
"RTN","SDWLRQ1",66,0)
 G E1:Y<0 S SDWLBDT=Y
"RTN","SDWLRQ1",67,0)
 Q:$D(DUOUT)
"RTN","SDWLRQ1",68,0)
 S %DT(0)=SDWLBDT,%DT("A")="End with Desired Appointment Date: " D ^%DT G DATE:Y<1 S SDWLEDT=Y K %DT(0),%DT("A")
"RTN","SDWLRQ1",69,0)
 G DATE:$D(DUOUT)
"RTN","SDWLRQ1",70,0)
 I SDWLEDT<SDWLBDT W !,"Beginning Date must be greater than Ending Date." G DATE
"RTN","SDWLRQ1",71,0)
 S ^TMP("SDWLRQ1",$J,"DATE")=SDWLBDT_"^"_SDWLEDT Q
"RTN","SDWLRQ1",72,0)
E1 Q
"RTN","SDWLRQ1",73,0)
OPEN ;OPEN Wait List Entries  
"RTN","SDWLRQ1",74,0)
 S %=1 W !!,"Do you want only 'OPEN' Wait List Entries " D YN^DICN
"RTN","SDWLRQ1",75,0)
 I %=0 W " Response must be 'YES' or 'NO'." G OPEN
"RTN","SDWLRQ1",76,0)
 I %=-1 S SDWLERR=1 W *7,"?? "
"RTN","SDWLRQ1",77,0)
 S ^TMP("SDWLRQ1",$J,"OPEN")=%
"RTN","SDWLRQ1",78,0)
 Q
"RTN","SDWLRQ1",79,0)
FORM ;Report Format
"RTN","SDWLRQ1",80,0)
 S SDWLERR=0,DIR(0)="SO^1:D:Detailed;S:Summary",DIR("L",2)="     D Detailed"
"RTN","SDWLRQ1",81,0)
 S DIR("L")="     S Summary",DIR("L",1)="Select One of the Following: "
"RTN","SDWLRQ1",82,0)
 D ^DIR
"RTN","SDWLRQ1",83,0)
 S SDWLFORM=$S(X["D":"D",X["d":"D",X["S":"S",X["s":"S",1:"")
"RTN","SDWLRQ1",84,0)
 I X="^" S DUOUT=1 Q
"RTN","SDWLRQ1",85,0)
 I SDWLFORM="" W *7,"Required!" G FORM
"RTN","SDWLRQ1",86,0)
 S ^TMP("SDWLRQ1",$J,"FORM")=SDWLFORM
"RTN","SDWLRQ1",87,0)
 Q
"RTN","SDWLRQ1",88,0)
DIS ;Display Parameters
"RTN","SDWLRQ1",89,0)
 S SDWLERR=0 W !!,?80-$L("*** Selected Report Parameters ***")\2,"*** Selected Report Parameters ***",!
"RTN","SDWLRQ1",90,0)
 F SDWLI="INS","CT1","CT2","DATE","FORM","OPEN" D
"RTN","SDWLRQ1",91,0)
 .S X="SDWL"_SDWLI,@X=$G(^TMP("SDWLRQ1",$J,SDWLI))
"RTN","SDWLRQ1",92,0)
 F SDWLTAG="IS","CT","DA","OP","PR" D @SDWLTAG
"RTN","SDWLRQ1",93,0)
 Q
"RTN","SDWLRQ1",94,0)
IS I SDWLINS'["ALL" D
"RTN","SDWLRQ1",95,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLINS,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ1",96,0)
 .W !,?20,"Institution: "
"RTN","SDWLRQ1",97,0)
 .I $D(SDWLY) S I="" F  S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?33 W SDWLY(I)
"RTN","SDWLRQ1",98,0)
 .K SDWLY
"RTN","SDWLRQ1",99,0)
 I SDWLINS["ALL" W !,?20,"Institution: ALL "
"RTN","SDWLRQ1",100,0)
 Q
"RTN","SDWLRQ1",101,0)
CT I SDWLCT2'["ALL" D
"RTN","SDWLRQ1",102,0)
 .S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLRQ1",103,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLCT2,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ1",104,0)
 .W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 I @X="ALL" W "All "
"RTN","SDWLRQ1",105,0)
 .I $D(SDWLY) S I="" F   S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?35 W $$EXTERNAL^DILFD(SDWLF,.01,,SDWLY(I))
"RTN","SDWLRQ1",106,0)
 I SDWLCT2["ALL" W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 W "ALL "
"RTN","SDWLRQ1",107,0)
 Q
"RTN","SDWLRQ1",108,0)
DA W !,?13,"Date Desired Range: " S Y=$P(SDWLDATE,U,1) D DD^%DT S SDWLBD=Y S Y=$P(SDWLDATE,U,2) D DD^%DT S SDWLED=Y
"RTN","SDWLRQ1",109,0)
 W " ",SDWLBD
"RTN","SDWLRQ1",110,0)
 I SDWLED'="" W " to ",SDWLED
"RTN","SDWLRQ1",111,0)
 Q
"RTN","SDWLRQ1",112,0)
OP W !,?18,"Output Format: ",$S(SDWLFORM="D":" Detailed",1:" Summary")
"RTN","SDWLRQ1",113,0)
 Q
"RTN","SDWLRQ1",114,0)
PR I SDWLOPEN=1 W !,?25,"Printing 'OPEN' Entries Only."
"RTN","SDWLRQ1",115,0)
 E  W !,?25,"Printing ALL Entries."
"RTN","SDWLRQ1",116,0)
 S %=1 W !!,"Are these Parameters Correct " D YN^DICN I %=2 S SDWLERR=1 W !,"  This Report will NOT be queued to print."
"RTN","SDWLRQ1",117,0)
 I SDWLERR S DIR(0)="E" D ^DIR I X["^" S SDWLERR=2
"RTN","SDWLRQ1",118,0)
 Q
"RTN","SDWLRQ1",119,0)
QUE ;Queue Report
"RTN","SDWLRQ1",120,0)
 N ZTQUEUED,POP
"RTN","SDWLRQ1",121,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLRQ1",122,0)
 S ZTRTN=$S(SDWLFORM="D":"EN^SDWLRPT1",1:"EN^SDWLRPS1"),ZTDTH=$H,ZTDESC="WAIT LIST REPORT FORMAT 1"
"RTN","SDWLRQ1",123,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLRQ1",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLRQ1",124,0)
 .S SDWLTK=$G(^TMP("SDWLRQ1",$J,SDWLTASK))
"RTN","SDWLRQ1",125,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLRQ1",126,0)
 S ZTSAVE("SDWLF")=""  ; SD*5.3*412
"RTN","SDWLRQ1",127,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G END
"RTN","SDWLRQ1",128,0)
QUE1 S SDWLSPT="" I $D(ZTRTN) D @ZTRTN
"RTN","SDWLRQ1",129,0)
 ;
"RTN","SDWLRQ1",130,0)
END ;
"RTN","SDWLRQ1",131,0)
 K SDWLTASK,SDWLY,SDWLED,WDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI,I
"RTN","SDWLRQ1",132,0)
 K DIR,DIC,DR,DIE,SDWLERR,SDWLF,SDWLX,SDLFD,SDWLCTX,SDWLDAT,SDWLPROM,SDWLINST,SDWLI,SDWLTAG,SDWLY
"RTN","SDWLRQ1",133,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLRQ1",134,0)
 Q
"RTN","SDWLRQ1",135,0)
HD W:$D(IOF) @IOF W !,?80-$L("Appointment Wait List Report")\2,"Appointment Wait List Report"
"RTN","SDWLRQ1",136,0)
 Q
"RTN","SDWLRSR")
0^6^B84474101
"RTN","SDWLRSR",1,0)
SDWLRSR ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT ; 01 Oct 2002  4:42 PM
"RTN","SDWLRSR",2,0)
 ;;5.3;scheduling;**263,273,399,412**;AUG 13 1993
"RTN","SDWLRSR",3,0)
 ;
"RTN","SDWLRSR",4,0)
 ;
"RTN","SDWLRSR",5,0)
 ;
"RTN","SDWLRSR",6,0)
 ;
"RTN","SDWLRSR",7,0)
EN ;
"RTN","SDWLRSR",8,0)
 ;
"RTN","SDWLRSR",9,0)
 D INIT
"RTN","SDWLRSR",10,0)
 I $$S^ZTLOAD Q
"RTN","SDWLRSR",11,0)
 D SORT
"RTN","SDWLRSR",12,0)
 I $$S^ZTLOAD Q
"RTN","SDWLRSR",13,0)
 D PRT
"RTN","SDWLRSR",14,0)
 I $$S^ZTLOAD Q
"RTN","SDWLRSR",15,0)
 G END
"RTN","SDWLRSR",16,0)
INIT ;
"RTN","SDWLRSR",17,0)
 I $D(CT) S SDWLCT2=CT
"RTN","SDWLRSR",18,0)
 I $D(DATE) S SDWLDATE=DATE
"RTN","SDWLRSR",19,0)
 I $D(INS) S SDWLINS=INS
"RTN","SDWLRSR",20,0)
 I $D(ZTSAVE) D
"RTN","SDWLRSR",21,0)
 .S SDWLCT=$G(ZTSAVE("CT")),SDWLDATE=$G(ZTSAVE("DATE")),SDWLINS=$G(ZTSAVE("INS"))
"RTN","SDWLRSR",22,0)
 I SDWLINS'="ALL" F I=1:1 S SDWL=$P(SDWLINS,";",I) Q:SDWL=""  S SDWL("INS",+SDWL)=""
"RTN","SDWLRSR",23,0)
 S SDWLBD=$P(SDWLDATE,U,1),SDWLED=$P(SDWLDATE,U,2),SDWLPG=0
"RTN","SDWLRSR",24,0)
 D NOW^%DTC S Y=% D DD^%DT S SDWLDTP=Y
"RTN","SDWLRSR",25,0)
 N POP S POP=0  ;SD*5.3*412
"RTN","SDWLRSR",26,0)
 Q
"RTN","SDWLRSR",27,0)
SORT ;SORT AND CALCULATE STAT REPORT
"RTN","SDWLRSR",28,0)
 K ^TMP("SDWLRSR1",$J),^TMP("SDWLRSR2",$J) S (SDWLERR,SDWLPR,SDWLC,SDWLD,SDWLNC,SDWLSA,SDWLCC,SDWLNN,SDWLER,SDWLAD,SDWLRE,SDWLNR)=0
"RTN","SDWLRSR",29,0)
 S SDWLDA=0 F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA=""  D
"RTN","SDWLRSR",30,0)
 .I $D(DUOUT) Q
"RTN","SDWLRSR",31,0)
 .S SDWLX=$G(^SDWL(409.3,SDWLDA,0)) Q:SDWLX=""  S SDWLINSN=+$P(SDWLX,U,3) I 'SDWLINSN Q
"RTN","SDWLRSR",32,0)
 .S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="U"
"RTN","SDWLRSR",33,0)
 .S SDWLDFN=+SDWLX I 'SDWLDFN Q
"RTN","SDWLRSR",34,0)
 .S SDWLTYP=$P(SDWLX,U,5),SDWLTYPN=$S(SDWLTYP=1:$P(SDWLX,U,6),SDWLTYP=2:$P(SDWLX,U,7),SDWLTYP=3:$P(SDWLX,U,8),SDWLTYP=4:$P(SDWLX,U,9),1:"")
"RTN","SDWLRSR",35,0)
 .I SDWLTYPN="" Q
"RTN","SDWLRSR",36,0)
 .S SDWLFLD=$S(SDWLTYP=1:5,SDWLTYP=2:6,SDWLTYP=3:7,SDWLTYP=4:8)
"RTN","SDWLRSR",37,0)
 .S SDWLTYNM=$$EXTERNAL^DILFD(409.3,SDWLFLD,,SDWLTYPN) I SDWLTYNM="" S SDWLTYNM="UNKNOWN"
"RTN","SDWLRSR",38,0)
 .I 'SDWLINSN Q
"RTN","SDWLRSR",39,0)
 .I $D(SDWL("INS")) D
"RTN","SDWLRSR",40,0)
 ..;CHECK FOR SPECIFIC INSTITUTIONAL SORT
"RTN","SDWLRSR",41,0)
 ..S SDWLINS=$P(SDWLX,U,3),SDWLERR=0 I SDWLINS'="ALL",'$D(SDWL("INS",SDWLINS)) S SDWLERR=1 Q
"RTN","SDWLRSR",42,0)
 ..S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="N"
"RTN","SDWLRSR",43,0)
 .I SDWLERR Q
"RTN","SDWLRSR",44,0)
 .;CHECK DATE RANGE
"RTN","SDWLRSR",45,0)
 .S SDWLOFDT=$P(SDWLX,U,2),SDWLOK1=1 I SDWLOFDT>SDWLBD!(SDWLOFDT=SDWLBD) D
"RTN","SDWLRSR",46,0)
 ..I SDWLOFDT<SDWLED!(SDWLOFDT=SDWLED) S SDWLOK1=0
"RTN","SDWLRSR",47,0)
 .S SDWLX1=$P(^DIC(4,+$P(SDWLX,U,3),0),U,1),SDWLY1=SDWLTYP
"RTN","SDWLRSR",48,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")) ^("AD")=0
"RTN","SDWLRSR",49,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")) ^("AD")=0
"RTN","SDWLRSR",50,0)
 .I 'SDWLOK1 D S1
"RTN","SDWLRSR",51,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLRSR",52,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLRSR",53,0)
 .S SDWLDFDT=0,SDWLOK3=1 I $D(^SDWL(409.3,SDWLDA,"DIS")) S SDWLDFDT=$P(^("DIS"),U,1),SDWLOK3=0 I SDWLDFDT<SDWLBD!(SDWLDFDT>SDWLED) S SDWLOK3=1
"RTN","SDWLRSR",54,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")) ^("CL")=0
"RTN","SDWLRSR",55,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")) ^("CL")=0
"RTN","SDWLRSR",56,0)
 .I 'SDWLOK3 D S3
"RTN","SDWLRSR",57,0)
 .S SDWLTYP=$P(SDWLX,U,5)
"RTN","SDWLRSR",58,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")) ^("PR")=0
"RTN","SDWLRSR",59,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")) ^("PR")=0
"RTN","SDWLRSR",60,0)
 .S SDWLFLG=0
"RTN","SDWLRSR",61,0)
 .I SDWLOFDT'>SDWLBD D
"RTN","SDWLRSR",62,0)
 ..I SDWLOFDT=SDWLBD Q
"RTN","SDWLRSR",63,0)
 ..I $P(SDWLX,U,17)["O" S SDWLFLG=1
"RTN","SDWLRSR",64,0)
 ..I $D(^SDWL(409.3,SDWLDA,"DIS")) D
"RTN","SDWLRSR",65,0)
 ...I 'SDWLFLG,($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)>SDWLBD)!($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)=SDWLBD) S SDWLFLG=1
"RTN","SDWLRSR",66,0)
 ..I SDWLFLG D
"RTN","SDWLRSR",67,0)
 ...S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")+1
"RTN","SDWLRSR",68,0)
 ...S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")+1
"RTN","SDWLRSR",69,0)
 .I $P(SDWLX,U,14) D
"RTN","SDWLRSR",70,0)
 ..S SDWLRDT=$P(SDWLX,U,14)
"RTN","SDWLRSR",71,0)
 ..I SDWLRDT>SDWLBD!(SDWLRDT=SDWLBD)!(SDWLRDT<SDWLED)!(SDWLRDT=SDWLED) D
"RTN","SDWLRSR",72,0)
 ...S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLRSR",73,0)
 ...S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")=^("NR")+1
"RTN","SDWLRSR",74,0)
 ...S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLRSR",75,0)
 ...S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLRSR",76,0)
 .D S2
"RTN","SDWLRSR",77,0)
 .I $$S^ZTLOAD S DUOUT=""
"RTN","SDWLRSR",78,0)
 Q
"RTN","SDWLRSR",79,0)
S1 ;ORIGINATING DATE MEETS CRITERIA
"RTN","SDWLRSR",80,0)
 ;
"RTN","SDWLRSR",81,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")+1
"RTN","SDWLRSR",82,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")=^("AD")+1
"RTN","SDWLRSR",83,0)
 Q
"RTN","SDWLRSR",84,0)
S2 ;DO NOT REMOVE DATE MEETS CRITERIA
"RTN","SDWLRSR",85,0)
 ;
"RTN","SDWLRSR",86,0)
 S X1=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR"),X2=$G(^("AD")),X3=$G(^("CL")) S X4=X1+X2-X3
"RTN","SDWLRSR",87,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"RR")=($G(^("PR"))+($G(^("AD"))))-$G(^("CL"))
"RTN","SDWLRSR",88,0)
 S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLRSR",89,0)
 Q
"RTN","SDWLRSR",90,0)
S3 S SDWLDIS=^SDWL(409.3,SDWLDA,"DIS")  D
"RTN","SDWLRSR",91,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")+1
"RTN","SDWLRSR",92,0)
 .S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")+1
"RTN","SDWLRSR",93,0)
 .S SDWLDP=$P(SDWLDIS,U,3),X="SDWL"_SDWLDP,@X=@X+1 S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)) ^(X)=0
"RTN","SDWLRSR",94,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)+1
"RTN","SDWLRSR",95,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)) ^(X)=0
"RTN","SDWLRSR",96,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)=^(X)+1
"RTN","SDWLRSR",97,0)
 Q
"RTN","SDWLRSR",98,0)
PRT ;PRINT REPORT
"RTN","SDWLRSR",99,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,SDWLPG)=0 D HD,HD1
"RTN","SDWLRSR",100,0)
 I '$D(^TMP("SDWLRSR1")) W !!,"No Wait List Data to Report" Q
"RTN","SDWLRSR",101,0)
 S SDWLINS="" F  S SDWLINS=$O(^TMP("SDWLRSR1",$J,SDWLINS)) Q:SDWLINS=""  D  Q:POP  D T2  Q:POP  W !,"________________" I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRSR",102,0)
 .I $$S^ZTLOAD S DUOUT="" Q 
"RTN","SDWLRSR",103,0)
 .W !!,"INSTITUTION: ",SDWLINS,!
"RTN","SDWLRSR",104,0)
 .S SDWLTY="" F  S SDWLTY=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY)) Q:SDWLTY=""  D  Q:POP  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRSR",105,0)
 ..S SDWLTNM=$$EXTERNAL^DILFD(409.3,4,,SDWLTY) W !,$E(SDWLTNM,1,15)
"RTN","SDWLRSR",106,0)
 ..S SDWLSCN="" F  S SDWLSCN=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN)) Q:SDWLSCN=""  D  Q:POP  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRSR",107,0)
 ...S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLRSR",108,0)
 ...S SDWLSCNM="" F  S SDWLSCNM=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM)) Q:SDWLSCNM=""  D  Q:POP  D T1  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRSR",109,0)
 ....S SDWLPRI="" F  S SDWLPRI=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI)) Q:SDWLPRI=""  D  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRSR",110,0)
 .....W !,?2,$E(SDWLSCNM,1,10)," ",$S(SDWLPRI="A":"ASAP",SDWLPRI="F":"FUTURE",1:"")
"RTN","SDWLRSR",111,0)
 .....S SDWLPR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"PR")) W ?20,SDWLPR
"RTN","SDWLRSR",112,0)
 .....S SDWLCL=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"CL")) W ?27,SDWLCL
"RTN","SDWLRSR",113,0)
 .....S SDWLD=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLD")) W ?35,SDWLD
"RTN","SDWLRSR",114,0)
 .....S SDWLNC=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNC")) W ?38,SDWLNC
"RTN","SDWLRSR",115,0)
 .....S SDWLSA=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLSA")) W ?42,SDWLSA
"RTN","SDWLRSR",116,0)
 .....S SDWLCC=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLCC")) W ?46,SDWLCC
"RTN","SDWLRSR",117,0)
 .....S SDWLNN=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNN")) W ?50,SDWLNN
"RTN","SDWLRSR",118,0)
 .....S SDWLER=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLER")) W ?54,SDWLER
"RTN","SDWLRSR",119,0)
 .....S SDWLAD=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"AD")) W ?60,SDWLAD
"RTN","SDWLRSR",120,0)
 .....S SDWLRR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"RR")) W ?66,SDWLRR
"RTN","SDWLRSR",121,0)
 .....S SDWLNR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"NR")) W ?75,SDWLNR
"RTN","SDWLRSR",122,0)
 .....S T1=T1+SDWLPR,TT1=TT1+SDWLPR
"RTN","SDWLRSR",123,0)
 .....S T2=T2+SDWLCL,TT2=TT2+SDWLCL
"RTN","SDWLRSR",124,0)
 .....S T3=T3+SDWLD,TT3=TT3+SDWLD
"RTN","SDWLRSR",125,0)
 .....S T4=T4+SDWLNC,TT4=TT4+SDWLNC
"RTN","SDWLRSR",126,0)
 .....S T5=T5+SDWLSA,TT5=TT5+SDWLSA
"RTN","SDWLRSR",127,0)
 .....S T6=T6+SDWLCC,TT6=TT6+SDWLCC
"RTN","SDWLRSR",128,0)
 .....S T7=T7+SDWLNN,TT7=TT7+SDWLNN
"RTN","SDWLRSR",129,0)
 .....S T8=T8+SDWLER,TT8=TT8+SDWLER
"RTN","SDWLRSR",130,0)
 .....S T9=T9+SDWLAD,TT9=TT9+SDWLAD
"RTN","SDWLRSR",131,0)
 .....S T10=T10+SDWLRR,TT10=TT10+SDWLRR
"RTN","SDWLRSR",132,0)
 .....S T11=T11+SDWLNR,TT11=TT11+SDWLNR
"RTN","SDWLRSR",133,0)
 .....I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412
"RTN","SDWLRSR",134,0)
 Q
"RTN","SDWLRSR",135,0)
SCR S DIR(0)="E" D ^DIR S:X="^" POP=1  ;SD*5.3*412
"RTN","SDWLRSR",136,0)
 Q
"RTN","SDWLRSR",137,0)
T1 ;
"RTN","SDWLRSR",138,0)
 W !,?18,"------",?25,"------",?32,"-----",?38,"--",?42,"--",?46,"--",?50,"--",?54,"--",?57,"-----",?63,"------",?71,"-------"
"RTN","SDWLRSR",139,0)
 W !,"Sub-Totals:"
"RTN","SDWLRSR",140,0)
 ;write sub-totals
"RTN","SDWLRSR",141,0)
 W ?20,T1,?27,T2,?35,T3,?38,T4,?42,T5,?46,T6,?50,T7,?54,T8,?60,T9,?66,T10,?75,T11,!
"RTN","SDWLRSR",142,0)
 S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLRSR",143,0)
 I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412
"RTN","SDWLRSR",144,0)
 Q
"RTN","SDWLRSR",145,0)
T2 W !,"Institution Totals:"
"RTN","SDWLRSR",146,0)
 W ?20,TT1,?27,TT2,?35,TT3,?38,TT4,?42,TT5,?46,TT6,?50,TT7,?54,TT8,?60,TT9,?66,TT10,?75,TT11,!
"RTN","SDWLRSR",147,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11)=0
"RTN","SDWLRSR",148,0)
 I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412
"RTN","SDWLRSR",149,0)
 Q
"RTN","SDWLRSR",150,0)
HD W:$D(IOF) @IOF S SDWLPG=SDWLPG+1 W !!,SDWLDTP,?80-$L("Wait List (Sch/PCMM) Stat Report")\2,"Wait List (Sch/PCMM) Stat Report",?65,"Page: ",SDWLPG
"RTN","SDWLRSR",151,0)
 W !,?80-$L("STARTED Date: ")\2,"STARTED Date: " S Y=$P(SDWLDATE,U,1) D DD^%DT W Y
"RTN","SDWLRSR",152,0)
 W !,?80-$L("FINISHED Date: ")\2,"FINISHED Date: " S Y=$P(SDWLDATE,U,2) D DD^%DT W Y
"RTN","SDWLRSR",153,0)
 Q
"RTN","SDWLRSR",154,0)
HD1 ;
"RTN","SDWLRSR",155,0)
 W !,?19,"PREV",?59,"#",?65,"#",?72,"# NOT"
"RTN","SDWLRSR",156,0)
 W !,"WAIT LIST TYPE",?18,"REMAIN",?25,"CLOSED",?32,"DEATH",?38,"NC",?42,"SA"
"RTN","SDWLRSR",157,0)
 W ?46,"CC",?50,"NN",?54,"ER",?57,"ADDED",?63,"REMAIN",?71,"REMOVED",!
"RTN","SDWLRSR",158,0)
 Q
"RTN","SDWLRSR",159,0)
END D EN^SDWLKIL
"RTN","SDWLRSR",160,0)
 K ^TMP("SDWLRSR1",$J),^TMP("SDWLRSR2",$J),SDWLY1,SDWLX1,SDWLRDT,CT,I
"RTN","SDWLRSR",161,0)
 K T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,SDWLAD,SDWLBD,SDWLCC,SDWLCT,SDWLDFDT,SDWLDP,SDWLED,SDWLER,SDWLERR,SDWLFLD,X1,X2,DATE
"RTN","SDWLRSR",162,0)
 K TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,SDWLINSN,SDWLINST,SDWLNC,SDWLNN,SDWLNR,SDWLOFDT,SDWLOK1,SDWLOK2,SDWLTYPN
"RTN","SDWLRSR",163,0)
 K SDWLOK3,SDWLPR,SDWLPR,SDWLPROM,SDWLRE,SDWLRFDT,SDWLRR,SDWLSA,SDWLSCN,SDWLSCNM,SDWLTASK,SDWLTK,SDWLTNM,SDWLTYNM,SDWLTYP,X4
"RTN","SDWLRSR",164,0)
 Q
"VER")
8.0^22.0
**END**
**END**

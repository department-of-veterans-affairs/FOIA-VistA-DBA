
=============================================================================
Run Date: APR 05, 2005                     Designation: XWB*1.1*42
Package : XWB - RPC BROKER                    Priority: Mandatory
Version : 1.1        SEQ #32                    Status: Released
                  Compliance Date: MAY 06, 2005
=============================================================================

Associated patches: (v)XWB*1.1*35      install with patch       `XWB*1.1*42'

Subject: BROKER VMS COM file change.

Category: 
  - Informational

Description:
============

 This INFO patch is to advise sites that a change needs to be made to the 
 VMS scripts (COM files) used to invoke a BROKER session using the TCPIP 
 service.  In addition, sites using the VISTASYSMON utility need to grant 
 BATCH access to the VMS BROKER user.
  
  
 We have found that "ccontrol session" starts Cache as a sub-process.  This 
 uses up extra process slots and can cause errors if the system reaches its 
 max process limit. 
  
 The fix is to replace "ccontrol session" with "csession" in the scripts.
  
 This change has been tested at both Fayetteville AR. and Huntington.
  
 If you are not familiar with editing VMS scripts (COM files) please contact 
 your Vista Systems Manager or call the National Help Desk and log a ticket 
 for the appropriate package.
  
 The XWBSERVER_START.COM file on the anonymous download sites has been 
 updated along with the XWB1_1P35UM.PDF manual.  You can download a new 
 copy and make the edits to fit your site, or edit your current files and 
 replace every "ccontrol session" with "csession" all the other parameters 
 are the same. 
  
 The edits can be made with the Broker Service enabled and users online. If 
 edits are made with users online the existing connections will still retain 
 the extra process slots but any new connections will be correct.
  
 Expect updates from MailMan, HL7, VistALink and other applications 
 that use VMS scripts.
 M2M broker had sites use the HL7 instructions to set up the TCPIP service.  
  
 This change will need to be made to the scripts for M2M broker. A site 
 can also start with the Broker scripts and edit them according to the 
 instructions in patch XWB*1.1*28.
  
 The recommended changes to the CACHE command line section are shown below
 (Replace every "ccontrol session" with "csession" )
 (All the other parameters stay the same)
  
  
 Before:
  
 $! for Cache
 $  assign  'f$trnlnm("SYS$NET")' SYS$NET
 $! ccontrol session <configname> "-U" "<namespace>" "CACHEVMS^XWBTCPM"
 $! or if your configname is the same as your node name
 $! ccontrol session "''node'" "-U" "<namespace>" "CACHEVMS^XWBTCPM"
  
 After:
  
 $! for Cache
 $  assign  'f$trnlnm("SYS$NET")' SYS$NET
 $! csession <configname> "-U" "<namespace>" "CACHEVMS^XWBTCPM"
 $! or if your configname is the same as your node name
 $! csession "''node'" "-U" "<namespace>" "CACHEVMS^XWBTCPM"
  
  
 In VMS a comment is started by entering the '!' character.  Any text after 
 a '!' in a VMS command procedure is a comment.  The actual command lines to 
 be executed in the XWBSERVER_START.COM file should not have a '!' character 
 at the beginning of the line.
  
 In addition, sites using the VISTASYSMON utility need to grant BATCH 
 access to the VMS BROKER user.
 If you are using the VISTASYSMON utility you will need to make the 
 following change to your BROKER user in UAF.
  
 (Enter the UAF Utility)
  
 $MC AUTHORIZE
  
 (View the Broker user; note the lack of BATCH access)
  
 UAF> SHOW BROKER
  
 Username: BROKER                           Owner:
 Account:                                   UIC:    [51,46] ([BROKER])
 CLI:      DCL                              Tables: DCLTABLES
 Default:  USER$:[RPCSERVER]
 LGICMD:   NL:
 Flags:  DisCtlY Restricted
 Primary days:   Mon Tue Wed Thu Fri
 Secondary days:                     Sat Sun
 Primary   000000000011111111112222  Secondary 000000000011111111112222
 Day Hours 012345678901234567890123  Day Hours 012345678901234567890123
 Network:  ##### Full access ######            ##### Full access ######
 Batch:    -----  No access  ------            -----  No access  ------
 Local:    -----  No access  ------            -----  No access  ------
 Dialup:   -----  No access  ------            -----  No access  ------
 Remote:   -----  No access  ------            -----  No access  ------
 Expiration:            (none)    Pwdminimum:  6   Login Fails:     0
 Pwdlifetime:           (none)    Pwdchange:      (pre-expired)
 Last Login:            (none) (interactive), 25-MAR-2005 22:41 
 (non-interactive)
 Maxjobs:         0  Fillm:       600  Bytlm:       200000
 Maxacctjobs:     0  Shrfillm:      0  Pbytlm:           0
 Maxdetach:       0  BIOlm:       600  JTquota:       8192
 Prclm:           4  DIOlm:      2048  WSdef:         2048
 Prio:            4  ASTlm:      4096  WSquo:         4096
 Queprio:         0  TQElm:        50  WSextent:     65535
 CPU:        (none)  Enqlm:      4096  Pgflquo:     200000
 Authorized Privileges:
   NETMBX       TMPMBX
 Default Privileges:
   NETMBX       TMPMBX
  
  
  
 (Grant BATCH access to the BROKER user)
  
  
 UAF> MODIFY BROKER/BATCH
  
 %UAF-I-MDFYMSG, user record(s) updated
  
  
 (Verify that BROKER now has BATCH access)
  
 UAF> SHOW BROKER
  
 Username: BROKER                           Owner:
 Account:                                   UIC:    [51,46] ([BROKER])
 CLI:      DCL                              Tables: DCLTABLES
 Default:  USER$:[RPCSERVER]
 LGICMD:   NL:
 Flags:  DisCtlY Restricted
 Primary days:   Mon Tue Wed Thu Fri
 Secondary days:                     Sat Sun
 Primary   000000000011111111112222  Secondary 000000000011111111112222
 Day Hours 012345678901234567890123  Day Hours 012345678901234567890123
 Network:  ##### Full access ######            ##### Full access ######
 Batch:    ##### Full access ######            ##### Full access ######
 Local:    -----  No access  ------            -----  No access  ------
 Dialup:   -----  No access  ------            -----  No access  ------
 Remote:   -----  No access  ------            -----  No access  ------
 Expiration:            (none)    Pwdminimum:  6   Login Fails:     0
 Pwdlifetime:           (none)    Pwdchange:      (pre-expired)
 Last Login:            (none) (interactive), 25-MAR-2005 22:47 
 (non-interactive)
 Maxjobs:         0  Fillm:       600  Bytlm:       200000
 Maxacctjobs:     0  Shrfillm:      0  Pbytlm:           0
 Maxdetach:       0  BIOlm:       600  JTquota:       8192
 Prclm:           4  DIOlm:      2048  WSdef:         2048
 Prio:            4  ASTlm:      4096  WSquo:         4096
 Queprio:         0  TQElm:        50  WSextent:     65535
 CPU:        (none)  Enqlm:      4096  Pgflquo:     200000
 Authorized Privileges:
   NETMBX       TMPMBX
 Default Privileges:
   NETMBX       TMPMBX
  
  
 (Exit the UAF utility)
  
 UAF> EXIT

Routine Information:
====================

=============================================================================
User Information:
Entered By  : FORT,WALLY                    Date Entered  : MAR 14, 2005
Completed By: SINGH,GURBIR                  Date Completed: APR 01, 2005
Released By : LASHLEY,ANTHONY               Date Released : APR 05, 2005
=============================================================================


Packman Mail Message:
=====================

No routines included

$TXT Created by CARPENTER,TERRY at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Thursday, 12/28/06 at 11:14
=============================================================================
Run Date: FEB 20, 2007                     Designation: LR*5.2*337
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #281                    Status: Released
                  Compliance Date: MAR 23, 2007
=============================================================================

Associated patches: (v)LR*5.2*221  <<= must be installed BEFORE `LR*5.2*337'
                    (v)LR*5.2*283  <<= must be installed BEFORE `LR*5.2*337'
                    (v)LR*5.2*291  <<= must be installed BEFORE `LR*5.2*337'

Subject: CORRECT LAB TEST ISSUES

Category: 
  - Routine
  - Print Template

Description:
============

 VISTA Laboratory Package patch LR*5.2*337 contains changes to software 
 controlled by VHA DIRECTIVE 2004-058, titled VISTA BLOOD BANK SOFTWARE. 
 Changes include: 
   Routines
    LRBEPEND
    LRRS
    LRTSTJAN
    LRTSTOUT
   Print Template
    LA7S PRINT
  
 All of the above changes have been reviewed by the VISTA Blood Bank 
 Developer and found to have no impact on the VISTA BLOOD BANK SOFTWARE 
 control functions.
  
 RISK ANALYSIS: Changes made by patch LR*5.2*337 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*337 does not 
 alter or modify any software design safeguards or safety critical 
 elements functions.
  
 POTENTIAL IMPACT ON SITES: This patch contains changes to 2 routines and 
 0 files identified in Veterans Health Administration (VHA) Directive 
 2004-058, group B listing. The changes have no effect on Blood Bank 
 functionality or medical device control functions. There is no adverse 
 potential to sites.
  
 VALIDATION REQUIREMENTS BY OPTION: 
 There are no validation requirements for this patch.
  
 MINIMAL TEST CASE SCENARIOS BY OPTION, INCLUSIVE OF ALL CONTROL FUNCTIONS:
 There are no test case scenarios for this patch.
  
 *************************************************************************
  
 This patch corrects several issues in the Lab Service package.
  
  
 ASSOCIATED REMEDY TICKETS:
 ==========================
 1. HD70559 -    NP'ed test results show as "pending"
    Duplicates:  HD101153 - Unable to cancel pending test in system
                 HD155423 - Not performed test is pending forever
 2. HD152498 -   Error <SYNTAX> F+2^DIED
 3. HD70000  -   Cannot exit option LRAC LOC-LOC
 4. HD161821 -   Data field accepts ? as valid entry
 5. HD145896 -   Electronic Catalog - Incorrect Min Vol
 6. HD160922 -   Subscript error in LRTASK NIGHTLY
  
  
 Testing Sites:
 ==============
 Dublin VAMC
 Biloxi VAMC
 Central TX HCS
  
  
 Problem (1):  HD70559
 ============
 When test results are entered for an accession, if a test is skipped (no
 result is entered), standard processing enters the word "pending" as the
 result.  This "pending" is then displayed as the result in the interim
 reports, which is correct.  However, if the test that has been skipped is
 then NP'ed ("Delete Test from Accession"), the interim report still shows
 "pending" for this test even though there is a comment saying that the
 test was not performed.
  
  
 Solution:
 =========
 Modify the "Delete Test from Accession" option to remove the word 
 "pending" from the result when a test has been NP'ed (deleted) with
 this option.
  
 LRTSTOUT LRTSTJAN
  
  
 Problem (2):  HD152498
 ============
 When deleting a test from an accession, user must respond to the prompt
 "Not Performed Reason:".  If the reason entered contains double quotes 
 ( The specimen was "wet"), a <SYNTX> error is generated in FileMan.
  
 Solution:
 =========
 Modify routine LRTSTOUT to convert double quotes appearing in the
 "Not Performed Reason" to single quotes ( The specimen was 'wet').
  
 LRTSTOUT
                        
  
 Problem (3):  HD70000
 ============
 When using option "Reprint cumulative from location to location" and
 selecting either (A)ll locations or (R)ange of locations, user is
 unable to exit from any page displayed on the screen at the ENTER "^"
 TO STOP prompt.
  
 Solution:
 =========
 Modify routine LRRS to recognize the "^" and exit all "FOR" loops
 when "^" is encountered.
  
 LRRS
  
  
 Problem (4):  HD161821
 ============
 In the option "Reprint Cumulative from Loc to Loc", a range of locations
 can be entered. A response of "?" to the prompt "Select Starting Patient
 Location" does not elicit help text and the "?" is taken to be the
 starting character for the range of locations.
  
 Solution:
 =========
 Modify LRRS to add some help text for this prompt and for the
 corresponding prompt "Select Ending Location".
  
 LRRS 
  
  
 Problem (5):  HD145896
 ============
 The print template for the Electronic Catalog uses a hard-coded value of 3
 for the minimum volume for every test.
  
 Solution:
 =========
 Modify print template to check file 60 (Laboratory Test) to see if a
 minimum volume is defined for the test.  If so, use what is defined in
 file 60 for the minimum value. If not, do not set a default minimum
 volume.
  
  
 Problem (6):  HD160922
 ============
 A <SUBSCRIPT> Error occurs in LRTASK NIGHTLY when a X-reference entry
 exists in ^LRO(69,"APP") but the order to which it points does not exist.
  
 Solution:
 =========
 Modify routines LRBEPEND and LRBEBA5 to check each X-reference that is
 encountered from ^LRO(69,"APP") to make sure the order exists before
 continuing to process the data.  If the corresponding order does not
 exist, the X-reference is deleted.
  
 LRBEPEND  LRBEBA5
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
  
 The install time for this patch is less than 2 minutes. This patch can be
 installed when Laboratory users are on the system.
  
 NOTE: Kernel patches must be current on the target system to avoid
       problems loading and/or installing this patch.
  
  
 1.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
     option will load the KIDS patch onto your system.
  
 2.  The patch has now been loaded into a Transport global on your
     system.  You now need to use KIDS to install the transport global.
  
 3.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
     select the 'Installation' menu.
  
 4.  Use the 'Verify Checksum in Transport Global' option and verify that
     all routines have the correct checksums.
  
 5.  On the KIDS menu, under the 'Installation' menu, use the following
     options:
  
       Print Transport Global
       Compare Transport Global to Current System
       Backup a Transport Global
  
     If you wish to preserve a copy of the routines exported in this 
     patch prior to installation, you should use the 'Backup a Transport
     Global' option at this time.  You may also compare the routines in
     your production account to the routines in the patch by using the
     'Compare a Transport Global to Current System' option.
  
  
 6.  Use the 'Install Package(s)' option under the 'Installation' menu
     and select the package 'LR*5.2*337'.
  
     If prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//,
     choose 'NO'.
  
     If prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', choose 'NO'.
  
  
 ROUTINE SUMMARY:
 ================
 The following routines are included in this patch.  The second line
  of each of these routines now looks like:
   
     <tab> ;;5.2;LAB SERVICE;**<patchlist>**;Sep 27, 1994
   
  
                           CHECK^XTSUMBLD
                           --------------
  
     Routine Name     Before Patch     After Patch       Patch List
     ------------     ------------     -----------       -----------
     LRBEBA5              12195219        12496235       291,337
     LRBEPEND             12133481        12482057       291,337
     LRRS                  8838761         8757871       283,337
     LRTSTJAN              7681779         8413606       67,100,121,128,
                                                         202,221, 337
     LRTSTOUT             19411504        19971592       100,121,153,202,
                                                         221,337

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LRBEBA5
    Before: B50227072  After: B51178400  **291,337**
Routine Name: LRBEPEND
    Before: B47036238  After: B48206085  **291,337**
Routine Name: LRRS
    Before: B16871357  After: B17887705  **283,337**
Routine Name: LRTSTJAN
    Before: B12293894  After: B13864468  **67,100,121,128,202,221,337**
Routine Name: LRTSTOUT
    Before: B56895160  After: B60326116  **100,121,153,202,221,337**

=============================================================================
User Information:
Entered By  : HARTIN,JAMES                  Date Entered  : MAY 31, 2005
Completed By: WERNER,GARY                   Date Completed: FEB 15, 2007
Released By : BELSCHWINDER,MICHAEL          Date Released : FEB 20, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

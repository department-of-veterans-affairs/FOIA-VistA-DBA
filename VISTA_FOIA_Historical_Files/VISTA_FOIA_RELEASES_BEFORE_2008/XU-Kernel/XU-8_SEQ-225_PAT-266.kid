Released XU*8*266 SEQ #225
Extracted from mail message
**KIDS**:XU*8.0*266^

**INSTALL NAME**
XU*8.0*266
"BLD",628,0)
XU*8.0*266^KERNEL^0^3021107^y
"BLD",628,1,0)
^^2^2^3021030^
"BLD",628,1,1,0)
See patch XU*8*266 in the National Patch Module for complete information
"BLD",628,1,2,0)
on this patch.
"BLD",628,4,0)
^9.64PA^^
"BLD",628,"KRN",0)
^9.67PA^8989.52^20
"BLD",628,"KRN",.4,0)
.4
"BLD",628,"KRN",.401,0)
.401
"BLD",628,"KRN",.402,0)
.402
"BLD",628,"KRN",.403,0)
.403
"BLD",628,"KRN",.5,0)
.5
"BLD",628,"KRN",.84,0)
.84
"BLD",628,"KRN",3.6,0)
3.6
"BLD",628,"KRN",3.8,0)
3.8
"BLD",628,"KRN",9.2,0)
9.2
"BLD",628,"KRN",9.8,0)
9.8
"BLD",628,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",628,"KRN",9.8,"NM",1,0)
XUHUI^^0^B9980754
"BLD",628,"KRN",9.8,"NM","B","XUHUI",1)

"BLD",628,"KRN",19,0)
19
"BLD",628,"KRN",19.1,0)
19.1
"BLD",628,"KRN",101,0)
101
"BLD",628,"KRN",409.61,0)
409.61
"BLD",628,"KRN",771,0)
771
"BLD",628,"KRN",870,0)
870
"BLD",628,"KRN",8989.51,0)
8989.51
"BLD",628,"KRN",8989.52,0)
8989.52
"BLD",628,"KRN",8994,0)
8994
"BLD",628,"KRN",8994.2,0)
8994.2
"BLD",628,"KRN","B",.4,.4)

"BLD",628,"KRN","B",.401,.401)

"BLD",628,"KRN","B",.402,.402)

"BLD",628,"KRN","B",.403,.403)

"BLD",628,"KRN","B",.5,.5)

"BLD",628,"KRN","B",.84,.84)

"BLD",628,"KRN","B",3.6,3.6)

"BLD",628,"KRN","B",3.8,3.8)

"BLD",628,"KRN","B",9.2,9.2)

"BLD",628,"KRN","B",9.8,9.8)

"BLD",628,"KRN","B",19,19)

"BLD",628,"KRN","B",19.1,19.1)

"BLD",628,"KRN","B",101,101)

"BLD",628,"KRN","B",409.61,409.61)

"BLD",628,"KRN","B",771,771)

"BLD",628,"KRN","B",870,870)

"BLD",628,"KRN","B",8989.51,8989.51)

"BLD",628,"KRN","B",8989.52,8989.52)

"BLD",628,"KRN","B",8994,8994)

"BLD",628,"KRN","B",8994.2,8994.2)

"BLD",628,"QUES",0)
^9.62^^
"BLD",628,"REQB",0)
^9.611^1^1
"BLD",628,"REQB",1,0)
XU*8.0*236^2
"BLD",628,"REQB","B","XU*8.0*236",1)

"MBREQ")
0
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^^0
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^2950703^2970507^.5
"PKG",3,22,1,"PAH",1,0)
266^3021107
"PKG",3,22,1,"PAH",1,1,0)
^^2^2^3021107
"PKG",3,22,1,"PAH",1,1,1,0)
See patch XU*8*266 in the National Patch Module for complete information
"PKG",3,22,1,"PAH",1,1,2,0)
on this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XUHUI")
0^1^B9980754
"RTN","XUHUI",1,0)
XUHUI ;SFISC/SO-Main Field Event Trigger Routine ;1:05 PM  7 Nov 2002
"RTN","XUHUI",2,0)
 ;;8.0;KERNEL;**236,266**;Jul 10, 1995
"RTN","XUHUI",3,0)
 ;This routine comprised three(3) entry points:
"RTN","XUHUI",4,0)
 ;HUI(), HUIKEY(), and OPKG()
"RTN","XUHUI",5,0)
 ;
"RTN","XUHUI",6,0)
 ;PCHK1: Is the business rules check used for the top level for file
"RTN","XUHUI",7,0)
 ;#200, called from AXUHUI xref.
"RTN","XUHUI",8,0)
 ;
"RTN","XUHUI",9,0)
 ;PCHK2: Is the business rules check ussed for the KEYS multiple
"RTN","XUHUI",10,0)
 ;sub-file #200.051
"RTN","XUHUI",11,0)
 ;
"RTN","XUHUI",12,0)
 ;GETVAR: Sets up the variables that are passed thru
"RTN","XUHUI",13,0)
 ;TaskMan to the various options that are to be unwound.
"RTN","XUHUI",14,0)
 ;
"RTN","XUHUI",15,0)
 ;TASK: Sets up the variable list that is to be passed
"RTN","XUHUI",16,0)
 ;thru TaskMan and tasks the job.
"RTN","XUHUI",17,0)
 ;
"RTN","XUHUI",18,0)
 ;CLEAN: Kills any Name Spaced variables that are not implisivly Newed
"RTN","XUHUI",19,0)
 ;
"RTN","XUHUI",20,0)
HUI(XUHUIOP,XUHUINM,XUHUIA,XUHUIXR) ;This is the HUI Entry Point
"RTN","XUHUI",21,0)
 ;XUHUIOP tells the Unwinder to use either 101 for Protocol file or
"RTN","XUHUI",22,0)
 ; 19 for Option file, default = 101
"RTN","XUHUI",23,0)
 ;XUHUINM is the Name(#.01) value of the option to launched
"RTN","XUHUI",24,0)
 ;XUHUIA is a code S = Set xref; K = Kill xref; default = S
"RTN","XUHUI",25,0)
 ;XUHUIXR is the name of the xref
"RTN","XUHUI",26,0)
 ;
"RTN","XUHUI",27,0)
 N ESC S ESC=0
"RTN","XUHUI",28,0)
 D PCHK1 Q:ESC
"RTN","XUHUI",29,0)
 D GETVAR
"RTN","XUHUI",30,0)
 D TASK
"RTN","XUHUI",31,0)
 D CLEAN
"RTN","XUHUI",32,0)
 Q
"RTN","XUHUI",33,0)
 ;
"RTN","XUHUI",34,0)
GETVAR ; Get the variables that are to be passed via Taskman
"RTN","XUHUI",35,0)
 S XUHUIFIL=DIFILE ;File #, IA #3586
"RTN","XUHUI",36,0)
 I $D(DIFLD) M XUHUIFLD=DIFLD ;Field #, IA# 3586
"RTN","XUHUI",37,0)
 I '$D(DIFLD) S XUHUIFLD=""
"RTN","XUHUI",38,0)
 S XUHUIXR=$G(XUHUIXR)
"RTN","XUHUI",39,0)
 M XUHUIDA=DA ;IEN(s) of record, IA# 3586
"RTN","XUHUI",40,0)
 M XUHUIX=X ;New Style 'X' array
"RTN","XUHUI",41,0)
 M XUHUIX1=X1
"RTN","XUHUI",42,0)
 M XUHUIX2=X2
"RTN","XUHUI",43,0)
 Q
"RTN","XUHUI",44,0)
 ;
"RTN","XUHUI",45,0)
TASK ;Creat a task
"RTN","XUHUI",46,0)
 ;Check to see if Protocol DISABLED ;266
"RTN","XUHUI",47,0)
 N ESC
"RTN","XUHUI",48,0)
 S ESC=0
"RTN","XUHUI",49,0)
 I 'XUHUIOP D  Q:ESC
"RTN","XUHUI",50,0)
 . N IEN,DISABLE
"RTN","XUHUI",51,0)
 . D CLEAN^DILF
"RTN","XUHUI",52,0)
 . S IEN=$$FIND1^DIC(101,"","X",XUHUINM)
"RTN","XUHUI",53,0)
 . I $D(DIERR) D CLEAN^DILF S ESC=1 Q
"RTN","XUHUI",54,0)
 . D CLEAN^DILF
"RTN","XUHUI",55,0)
 . S DISABLE=$$GET1^DIQ(101,IEN_",",2)
"RTN","XUHUI",56,0)
 . I $D(DIERR) D CLEAN^DILF S ESC=1 Q
"RTN","XUHUI",57,0)
 . D CLEAN^DILF
"RTN","XUHUI",58,0)
 . I DISABLE'="" S ESC=1 ;Protocol is DISABLED
"RTN","XUHUI",59,0)
 . Q
"RTN","XUHUI",60,0)
 N ZTSAVE,ZTDTH,ZTIO,ZTRTN,ZTDESC,ZTREQ,ZTSK ;266
"RTN","XUHUI",61,0)
 S XUHUIA=$S('$D(XUHUIA):"S",XUHUIA="":"S",1:XUHUIA)
"RTN","XUHUI",62,0)
 S ZTSAVE("XUHUIA")=""
"RTN","XUHUI",63,0)
 S ZTSAVE("XUHUIFIL")=""
"RTN","XUHUI",64,0)
 S ZTSAVE("XUHUIFLD")=""
"RTN","XUHUI",65,0)
 S ZTSAVE("XUHUIXR")=""
"RTN","XUHUI",66,0)
 S ZTSAVE("XUHUIDA*")=""
"RTN","XUHUI",67,0)
 S ZTSAVE("XUHUIX*")=""
"RTN","XUHUI",68,0)
 S ZTSAVE("XUHUINM")="" ;Name of top level Protocol or Option
"RTN","XUHUI",69,0)
 S XUHUIOP=$S('$D(XUHUIOP):101,XUHUIOP="":101,1:XUHUIOP)
"RTN","XUHUI",70,0)
 S ZTSAVE("XUHUIOP")=""
"RTN","XUHUI",71,0)
 S ZTDTH=$H,ZTIO="",ZTRTN="DEQUE^XUHUI",ZTREQ="@"
"RTN","XUHUI",72,0)
 S ZTDESC="TASKED FIELD CHANGED EVENT ("_$S(XUHUIA="S":"SET)",1:"KILL)")
"RTN","XUHUI",73,0)
 D ^%ZTLOAD
"RTN","XUHUI",74,0)
 Q
"RTN","XUHUI",75,0)
 ;
"RTN","XUHUI",76,0)
DEQUE ;From: TaskMan
"RTN","XUHUI",77,0)
 S X=XUHUINM
"RTN","XUHUI",78,0)
 S DIC=$S(XUHUIOP=101:"^ORD(101,",XUHUIOP=19:"^DIC(19,",1:"")
"RTN","XUHUI",79,0)
 D EN^XQOR
"RTN","XUHUI",80,0)
 D CLEAN ; Kill off XUHUI* variables that are passed via Taskman
"RTN","XUHUI",81,0)
 Q
"RTN","XUHUI",82,0)
 ;
"RTN","XUHUI",83,0)
HUIKEY(XUHUIOP,XUHUINM,XUHUIA,XUHUIXR) ;HUI Key check Entry Point
"RTN","XUHUI",84,0)
 ;XUHUIOP tells the Unwinder to use either 101 for Protocol file or
"RTN","XUHUI",85,0)
 ; 19 for Option file, default = 101
"RTN","XUHUI",86,0)
 ;XUHUINM is the Name(#.01) value of the option to launched
"RTN","XUHUI",87,0)
 ;XUHUIA is a code S = Set xref; K = Kill xref; default = S
"RTN","XUHUI",88,0)
 ;XUHUIXR is the name of the xref
"RTN","XUHUI",89,0)
 N ESC S ESC=0
"RTN","XUHUI",90,0)
 D PCHK2 Q:ESC
"RTN","XUHUI",91,0)
 D GETVAR
"RTN","XUHUI",92,0)
 D TASK
"RTN","XUHUI",93,0)
 D CLEAN
"RTN","XUHUI",94,0)
 Q
"RTN","XUHUI",95,0)
 ;
"RTN","XUHUI",96,0)
OPKG(XUHUIOP,XUHUINM,XUHUIA,XUHUIXR) ;All Other Package Entry Point
"RTN","XUHUI",97,0)
 ;XUHUIOP tells the Unwinder to use either 101 for Protocol file or
"RTN","XUHUI",98,0)
 ; 19 for Option file, default = 101
"RTN","XUHUI",99,0)
 ;XUHUINM is the Name(#.01) value of the option to launched
"RTN","XUHUI",100,0)
 ;XUHUIA is a code S = Set xref; K = Kill xref; default = S
"RTN","XUHUI",101,0)
 ;XUHUIXR is the name of the xref
"RTN","XUHUI",102,0)
 D GETVAR
"RTN","XUHUI",103,0)
 D TASK
"RTN","XUHUI",104,0)
 D CLEAN
"RTN","XUHUI",105,0)
 Q
"RTN","XUHUI",106,0)
 ;
"RTN","XUHUI",107,0)
PCHK1 ;
"RTN","XUHUI",108,0)
 I '$D(^XUSEC("PROVIDER",DA))#2 S ESC=1 Q  ;User is not a Provider
"RTN","XUHUI",109,0)
 Q
"RTN","XUHUI",110,0)
 ;
"RTN","XUHUI",111,0)
PCHK2 ;
"RTN","XUHUI",112,0)
 I $P($G(^DIC(19.1,DA,0)),"^")'="PROVIDER" S ESC=1 Q  ;Key Not the PROVIDER key ;266
"RTN","XUHUI",113,0)
 Q
"RTN","XUHUI",114,0)
 ;
"RTN","XUHUI",115,0)
CLEAN ;Kill of XUHUI variables
"RTN","XUHUI",116,0)
 K XUHUIFIL,XUHUIFLD,XUHUIDA,XUHUIX,XUHUIX1,XUHUIX2
"RTN","XUHUI",117,0)
 Q
"VER")
8.0^22.0
**END**
**END**

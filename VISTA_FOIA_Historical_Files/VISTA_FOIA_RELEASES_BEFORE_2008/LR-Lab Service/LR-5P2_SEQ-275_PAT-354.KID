Released LR*5.2*354 SEQ #275
Extracted from mail message
**KIDS**:LR*5.2*354^

**INSTALL NAME**
LR*5.2*354
"BLD",6709,0)
LR*5.2*354^LAB SERVICE^0^3060707^y
"BLD",6709,1,0)
^^2^2^3060313^^^
"BLD",6709,1,1,0)
This patch corrects 2 PROBLEMS WITH THE TURNAROUND TIME REPORT
"BLD",6709,1,2,0)
(LR CAPTT).
"BLD",6709,4,0)
^9.64PA^^
"BLD",6709,"ABPKG")
n
"BLD",6709,"KRN",0)
^9.67PA^8989.52^19
"BLD",6709,"KRN",.4,0)
.4
"BLD",6709,"KRN",.401,0)
.401
"BLD",6709,"KRN",.402,0)
.402
"BLD",6709,"KRN",.403,0)
.403
"BLD",6709,"KRN",.5,0)
.5
"BLD",6709,"KRN",.84,0)
.84
"BLD",6709,"KRN",3.6,0)
3.6
"BLD",6709,"KRN",3.8,0)
3.8
"BLD",6709,"KRN",9.2,0)
9.2
"BLD",6709,"KRN",9.8,0)
9.8
"BLD",6709,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6709,"KRN",9.8,"NM",1,0)
LRUTT^^0^29435333
"BLD",6709,"KRN",9.8,"NM","B","LRUTT",1)

"BLD",6709,"KRN",19,0)
19
"BLD",6709,"KRN",19.1,0)
19.1
"BLD",6709,"KRN",101,0)
101
"BLD",6709,"KRN",409.61,0)
409.61
"BLD",6709,"KRN",771,0)
771
"BLD",6709,"KRN",870,0)
870
"BLD",6709,"KRN",8989.51,0)
8989.51
"BLD",6709,"KRN",8989.52,0)
8989.52
"BLD",6709,"KRN",8994,0)
8994
"BLD",6709,"KRN","B",.4,.4)

"BLD",6709,"KRN","B",.401,.401)

"BLD",6709,"KRN","B",.402,.402)

"BLD",6709,"KRN","B",.403,.403)

"BLD",6709,"KRN","B",.5,.5)

"BLD",6709,"KRN","B",.84,.84)

"BLD",6709,"KRN","B",3.6,3.6)

"BLD",6709,"KRN","B",3.8,3.8)

"BLD",6709,"KRN","B",9.2,9.2)

"BLD",6709,"KRN","B",9.8,9.8)

"BLD",6709,"KRN","B",19,19)

"BLD",6709,"KRN","B",19.1,19.1)

"BLD",6709,"KRN","B",101,101)

"BLD",6709,"KRN","B",409.61,409.61)

"BLD",6709,"KRN","B",771,771)

"BLD",6709,"KRN","B",870,870)

"BLD",6709,"KRN","B",8989.51,8989.51)

"BLD",6709,"KRN","B",8989.52,8989.52)

"BLD",6709,"KRN","B",8994,8994)

"BLD",6709,"QUES",0)
^9.62^^
"BLD",6709,"REQB",0)
^9.611^1^1
"BLD",6709,"REQB",1,0)
LR*5.2*201^2
"BLD",6709,"REQB","B","LR*5.2*201",1)

"MBREQ")
0
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950304
"PKG",26,22,1,"PAH",1,0)
354^3060707
"PKG",26,22,1,"PAH",1,1,0)
^^2^2^3060707
"PKG",26,22,1,"PAH",1,1,1,0)
This patch corrects 2 PROBLEMS WITH THE TURNAROUND TIME REPORT
"PKG",26,22,1,"PAH",1,1,2,0)
(LR CAPTT).
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","LRUTT")
0^1^B29435333^B22939035
"RTN","LRUTT",1,0)
LRUTT ;AVAMC/REG/CYM - LAB TEST TURNAROUND TIME; 2/19/98 ;
"RTN","LRUTT",2,0)
 ;;5.2;LAB SERVICE;**153,201,354**;Sep 27, 1994
"RTN","LRUTT",3,0)
 D END W !!?24,"Laboratory Test Turnaround Times"
"RTN","LRUTT",4,0)
AT S DIC=60,DIC(0)="AEQM" D ^DIC K DIC I Y>0 S LRT(+Y)=$P(Y,U,2) G AT
"RTN","LRUTT",5,0)
 I '$D(LRT) W $C(7),!,"NO TESTS SELECTED" G END
"RTN","LRUTT",6,0)
HL W ! S LRL="",INSTFLAG=0 K DIR S DIR("?",1)="Select an entry from the HOSPITAL LOCATION file (#44) or an entry from",DIR("?",2)="the INSTITUTION file (#4).",DIR("?",3)=""
"RTN","LRUTT",7,0)
 S DIR("?",4)="To specify a selection from the HOSPITAL LOCATION file (#44), enter your",DIR("?",5)="selection with the 'L.' prefix.  Enter 'L.?' to see the list of entries in",DIR("?",6)="the HOSPITAL LOCATION file (#44)."
"RTN","LRUTT",8,0)
 S DIR("?",7)="",DIR("?",8)="To specify a selection from the INSTITUTION file (#4), enter your selection",DIR("?",9)="with the 'I.' prefix.  Enter 'I.?' to see the list of entries in the",DIR("?",10)="INSTITUTION file (#4)."
"RTN","LRUTT",9,0)
 S DIR("?",11)="",DIR("?",12)="If the selection entered does not have the 'L.' or 'I.' prefix, the HOSPITAL",DIR("?",13)="LOCATION file (#44) will be searched for a match first.  If no match is"
"RTN","LRUTT",10,0)
 S DIR("?")="found, the INSTITUTION file (#4) will then be searched for a match."
"RTN","LRUTT",11,0)
 S DIR("A")="Select HOSPITAL LOCATION NAME: ",DIR(0)="FOA" D ^DIR I $D(DIRUT) G END
"RTN","LRUTT",12,0)
 S LRY=Y D LOC I LRL="" G HL
"RTN","LRUTT",13,0)
 W ! D B^LRU G:Y<0 END S LRSDT=LRSDT-.1,LRLDT=LRLDT+.9
"RTN","LRUTT",14,0)
 W !!,"Print patients " S %=2 D YN^LRU S:%=1 LRI=1
"RTN","LRUTT",15,0)
 S ZTRTN="QUE^LRUTT" D BEG^LRUTL G:POP!($D(ZTSK)) END
"RTN","LRUTT",16,0)
QUE U IO K ^TMP($J) D L^LRU,S^LRU,H S LR("F")=1 F A=0:0 S A=$O(LRT(A)) Q:'A  S (LRG(A),LRH(A))=0
"RTN","LRUTT",17,0)
 F LRA=LRSDT:0 S LRA=$O(^LRO(69,LRA)) Q:'LRA!(LRA>LRLDT)  D
"RTN","LRUTT",18,0)
 . I 'INSTFLAG D
"RTN","LRUTT",19,0)
 . . F LRB=0:0 S LRB=$O(^LRO(69,LRA,1,"AC",LRL,LRB)) Q:'LRB  F T=0:0 S T=$O(^LRO(69,LRA,1,LRB,2,"B",T)) Q:'T  D:$D(LRT(T)) C
"RTN","LRUTT",20,0)
 . I INSTFLAG D
"RTN","LRUTT",21,0)
 . . S XLRL="" F  S XLRL=$O(^LRO(69,LRA,1,"AC",XLRL)) Q:XLRL=""  I $$INSTHIT(XLRL) F LRB=0:0 S LRB=$O(^LRO(69,LRA,1,"AC",XLRL,LRB)) Q:'LRB  F T=0:0 S T=$O(^LRO(69,LRA,1,LRB,2,"B",T)) Q:'T  D:$D(LRT(T)) C
"RTN","LRUTT",22,0)
 F A=0:0 S A=$O(LRT(A)) Q:'A!(LR("Q"))  D:$Y>(IOSL-6) H Q:LR("Q")  W !,LRT(A),?30,"Count: ",$J(LRH(A),5),?45,"Average time:" I LRG(A) S X=LRG(A)\LRH(A),Y=X\60,X=X#60 W:Y $J(Y,3)," hr" W:X ?65,$J(X,2)," min"
"RTN","LRUTT",23,0)
 F A=0:0 S A=$O(^TMP($J,A)) Q:'A  S X=^LR(A,0),Y=$P(X,"^",3),X=$P(X,"^",2),X=^DIC(X,0,"GL"),X=@(X_Y_",0)") S ^TMP($J,"B",$P(X,"^"),A)=$P(X,"^",9)
"RTN","LRUTT",24,0)
 W ! S LRP=0 F Q=0:0 S LRP=$O(^TMP($J,"B",LRP)) Q:LRP=""!(LR("Q"))  F A=0:0 S A=$O(^TMP($J,"B",LRP,A)) Q:'A!(LR("Q"))  S SSN=^(A),LRDPF=$P(^LR(A,0),U,2) D SSN^LRU D:$Y>(IOSL-6) H Q:LR("Q")  W !,LRP,?31,SSN D L
"RTN","LRUTT",25,0)
 D END^LRUTL,END Q
"RTN","LRUTT",26,0)
T S V=$P(X,".",2)_"000",V=$E(V,1,2)*60+$E(V,3,4) D H^%DTC S X=%H_"."_$E("0000",1,4-$L(V))_V Q
"RTN","LRUTT",27,0)
L F T=0:0 S T=$O(^TMP($J,A,T)) Q:'T!(LR("Q"))  F B=0:0 S B=$O(^TMP($J,A,T,B)) Q:'B!(LR("Q"))  F C=0:0 S C=$O(^TMP($J,A,T,B,C)) Q:'C!(LR("Q"))  F E=0:0 S E=$O(^TMP($J,A,T,B,C,E)) Q:'E!(LR("Q"))  D W
"RTN","LRUTT",28,0)
 K T,B,C,E
"RTN","LRUTT",29,0)
 Q
"RTN","LRUTT",30,0)
W D:$Y>(IOSL-6) H1 Q:LR("Q")
"RTN","LRUTT",31,0)
 W !?3,LRT(T),?32,$$Y2K^LRX(B,"5D"),?44 S X(1)=^TMP($J,A,T,B,C,E),X=+X(1),Y=X\60,X=X#60 W:Y $J(Y,3)," hr" W:X ?50,$J(X,2)," min" W ?60,"Arr time:" S X=$P(X(1),"^",2) W $E(X,1,2)_":"_$E(X,3,4) Q
"RTN","LRUTT",32,0)
 ;
"RTN","LRUTT",33,0)
C S E=$O(^LRO(69,LRA,1,LRB,2,"B",T,0)),LRS=$S($D(^LRO(69,LRA,1,LRB,3)):+^(3),1:0),E=$S($D(^(2,E,0)):^(0),1:""),W=$P(E,"^",4),LRC=$P(E,"^",3),LRX=$P(E,"^",5)
"RTN","LRUTT",34,0)
 I $P(E,"^",11)'="" Q
"RTN","LRUTT",35,0)
 I $$CANCEL Q
"RTN","LRUTT",36,0)
 I LRS,W,LRC,LRX,$D(^LRO(68,W,1,LRC,1,LRX,4,T,0)) S X=$P(^(0),"^",5) Q:X'["."  Q:$P(^(0),"^",8)=""  D T S LRF=X D S
"RTN","LRUTT",37,0)
 Q
"RTN","LRUTT",38,0)
S S (LRS(1),X)=LRS D T S LRS=X,LRDFN=+^LRO(68,W,1,LRC,1,LRX,0) S X=$P(LRF,".")-$P(LRS,".") S:X X=X*1440 S LRT=X+$P(LRF,".",2)-$P(LRS,".",2)
"RTN","LRUTT",39,0)
 S LRG(T)=LRG(T)+LRT,LRH(T)=LRH(T)+1 S:$D(LRI) ^TMP($J,LRDFN,T,LRA,W,LRX)=LRT_"^"_$P(LRS(1),".",2)_"000" Q
"RTN","LRUTT",40,0)
 ;
"RTN","LRUTT",41,0)
H I $D(LR("F")),IOST?1"C".E D M^LRU Q:LR("Q")
"RTN","LRUTT",42,0)
 D F^LRU W !,"Location: ",LRL,!,"Laboratory test turnaround times from: ",LRSTR," to ",LRLST,!,LR("%") Q
"RTN","LRUTT",43,0)
 ;
"RTN","LRUTT",44,0)
H1 D H Q:LR("Q")  W !,LRP,?31,SSN Q
"RTN","LRUTT",45,0)
 ;
"RTN","LRUTT",46,0)
END D V^LRU K INSTFLAG,XLRL Q
"RTN","LRUTT",47,0)
LOC ; check file 44 for location entered
"RTN","LRUTT",48,0)
 I $E(LRY,1,2)="L."!($E(LRY,1,2)="l.") S LRY=$E(LRY,3,99) D HLOC Q
"RTN","LRUTT",49,0)
 I $E(LRY,1,2)="I."!($E(LRY,1,2)="i.") S LRY=$E(LRY,3,99) D INST Q
"RTN","LRUTT",50,0)
 D HLOC I Y<1 D INST
"RTN","LRUTT",51,0)
 Q
"RTN","LRUTT",52,0)
HLOC S X=LRY,DIC=44,DIC(0)="EMZ" D ^DIC K DIC I Y'<1 S LRL=$P(Y(0),U,2) I LRL="" W $C(7),!!,"There must be an abbreviation entered for the hospital location!"
"RTN","LRUTT",53,0)
 Q
"RTN","LRUTT",54,0)
INST ; check file 4 for location entered
"RTN","LRUTT",55,0)
 S X=LRY,DIC=4,DIC(0)="EQMZ",DIC("S")="I $G(^DIC(4,Y,99))" D ^DIC K DIC I Y'<1 S LRL=$P(Y(0),"^"),INSTFLAG=1
"RTN","LRUTT",56,0)
 Q
"RTN","LRUTT",57,0)
INSTHIT(XLOC) ;
"RTN","LRUTT",58,0)
 N HIT,LOCNUM,INSTNUM,X99
"RTN","LRUTT",59,0)
 S HIT=0
"RTN","LRUTT",60,0)
 S LOCNUM=$O(^SC("C",XLOC,0))
"RTN","LRUTT",61,0)
 I LOCNUM'="" D
"RTN","LRUTT",62,0)
 . S INSTNUM=$P($G(^SC(LOCNUM,0)),U,4)
"RTN","LRUTT",63,0)
 . Q:INSTNUM=""
"RTN","LRUTT",64,0)
 . I $D(^DIC(4,"B",LRL,INSTNUM)) D
"RTN","LRUTT",65,0)
 . . S X99=$G(^DIC(4,INSTNUM,99))
"RTN","LRUTT",66,0)
 . . Q:X99=""
"RTN","LRUTT",67,0)
 . . I $P(X99,U,4) Q
"RTN","LRUTT",68,0)
 . . S HIT=1
"RTN","LRUTT",69,0)
 Q HIT
"RTN","LRUTT",70,0)
CANCEL() ;
"RTN","LRUTT",71,0)
 ; This function checks to see if a test was cancelled. 
"RTN","LRUTT",72,0)
 ; If the test was cancelled the function evaluates as "true".
"RTN","LRUTT",73,0)
 N CANFLAG,COLTIME,LRTIME,LRID,TESTNUM,LR63,PC1
"RTN","LRUTT",74,0)
 S CANFLAG=0
"RTN","LRUTT",75,0)
 S COLTIME=$P($G(^LRO(69,LRA,1,LRB,1)),"^",1)
"RTN","LRUTT",76,0)
 I COLTIME D
"RTN","LRUTT",77,0)
 . S LRTIME=9999999-COLTIME
"RTN","LRUTT",78,0)
 . S LRID=$P($G(^LRO(69,LRA,1,LRB,0)),"^",1)
"RTN","LRUTT",79,0)
 . I LRID="" Q
"RTN","LRUTT",80,0)
 . S TESTNUM=$G(^LAB(60,T,.2))
"RTN","LRUTT",81,0)
 . I TESTNUM="" Q
"RTN","LRUTT",82,0)
 . S LR63=$G(^LR(LRID,"CH",LRTIME,TESTNUM))
"RTN","LRUTT",83,0)
 . I LR63="" Q
"RTN","LRUTT",84,0)
 . S PC1=$P(LR63,"^",1)
"RTN","LRUTT",85,0)
 . I PC1="" Q
"RTN","LRUTT",86,0)
 . I $E(PC1,1,$L(PC1))=$E("CANCELLED",1,$L(PC1))!($E(PC1,1,$L(PC1))=$E("cancelled",1,$L(PC1))) S CANFLAG=1
"RTN","LRUTT",87,0)
 Q CANFLAG
"VER")
8.0^22.0
"BLD",6709,6)
^275
**END**
**END**

$TXT Created by FORT,WALLY at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on THURSDAY, 01/02/03 at 08:43
=============================================================================
Run Date: JAN 31, 2003                     Designation: XU*8*267
Package : XU - KERNEL                          Priority: Mandatory
Version : 8       SEQ #231                       Status: Released
                  Compliance Date: MAR 03, 2003
=============================================================================

Associated patches: (v)XU*8*226    <<= must be installed BEFORE `XU*8*267'

Subject: DEA API and INST DEA #

Category: 
  - Routine
  - Data Dictionary

Description: 
============

  
 Patch Tracking #: 35285369
 Test Sites: HINES
 Blood Bank Clearance: 12/12/2002
  
 The Drug Enforcement Administration/Veteran's Administration Public Key
 Infrastructure (DEA/VA PKI) pilot project requires an Application 
 Programmer Interface (API) to obtain the value stored in the DEA# field
 (#53.2) in the NEW PERSON file (#200). This patch provides this new API
 and also adds a new field, FACILITY DEA NUMBER (#52), to the INSTITUTION
 file (#4). The specific API information follows:
  
      $$DEA^XUSER([FLAG])
      Reference type: Supported, Category: PKI, Integration Agreement: 2343
  
      Description:
      This routine will return a user's DEA number, if it exists in the 
      DEA# field (#53.2) of the NEW PERSON file (#200). If the DEA# field 
      value is null, the value returned depends on the optional FLAG 
      input parameter, see below.
  
      Input Parameter
      FLAG   (optional) This flag controls what is returned when the user 
      does not have a value in the DEA# field (#53.2) of the NEW PERSON 
      file (#200).
  
             * FLAG is null or "0" -- This routine will check to see if 
             the user has values in the VA# field (#53.3) of the NEW 
             PERSON file (#200) and the (new) FACILITY DEA NUMBER field 
             (#52) of the INSTITUTION file (#4). If values are found in 
             both of those fields, this routine will return the 
             following:
  
                    FACILITY DEA NUMBER field (#52)_"-"_VA# field(#53.3)
  
             * FLAG is "1" -- This routine will check to see if the user 
             has a value in the VA# field (#53.3) of the NEW PERSON file 
             (#200). If a value is found in that field, this routine will 
             return that field value. Otherwise, this routine returns an 
             empty string. 
  
  
      Output
      DEA#   DEA# field (#53.2) value or the value returned based on the 
      (optional) FLAG input parameter, see "Input Parameter" above.
  
      Example 1
  
      DEA# (#53.2) field is "AB1234567"
      FACILITY DEA NUMBER field (#52) is "VA7654321"              
      VA# field (#53.3) is "789"
  
      If the FLAG input parameter is null or "0", this API would return 
      "AB1234567".
  
      If the FLAG input parameter is "1", this API would return "AB1234567".
  
  
      Example 2
  
      DEA# (#53.2) field is null
      FACILITY DEA NUMBER field (#52) is "VA7654321"              
      VA# field (#53.3) is "789"
  
      If the FLAG input parameter is null or "0", this API would return 
      "VA7654321-789".
  
      If the FLAG input parameter is "1", this API would return "789"
  
  
      Example 3
  
      DEA# (#53.2) field is null
      FACILITY DEA NUMBER field (#52) is "VA7654321"              
      VA# field (#53.3) is null
  
      If the FLAG input parameter is null or "0", this API would return "".
  
      If the FLAG input parameter is "1", this API would return "" 
      In both cases it returns an empty string.
  
  
  
 Routine Summary
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;8.0;KERNEL;**[Patch List]**;Jul 10, 1995
  
                  Checksum
 Routine         Old       New      Patch List
 XUSER         2163059   2431785    **75,97,99,150,226,267**
 XUSER2            n/a   1370035    **267**
  
 List of preceding patches: 226
 Sites should use CHECK^XTSUMBLD to verify checksums.
  
 =========================================================================
 Installation:
  
 >>>Users may remain on the system.
 >>>TaskMan does *not* need to be stopped.
  
   1.  DSM sites - Some of these routines are usually mapped,
       so you will need to disable mapping for the affected routines.
  
   2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
  
   3.  The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
  
          Verify Checksums in Transport Global
          Print Transport Global
          Compare Transport Global to Current System
          Backup a Transport Global
  
   4.  Users can remain on the system. This patch can be loaded any
       non-peak time.
       TaskMan can remain running.
  
   5.  Installation will take less than 2 minutes.
       On the KIDS menu, under the 'Installation' menu, use the following
       option:
         Install Package(s)  'XU*8.0*267'
                              ==========
  
       Want KIDS to INHIBIT LOGONs during the install? YES// NO
  
       Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
   6.  DSM Sites, after patch has installed, rebuild your map set.
  
 =========================================================================

Routine Information:
====================

Routine Name:
  - XUSER


Routine Checksum:

Routine Name:
  - XUSER2


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : FORT,WALLY                     Date Entered : OCT 31, 2002
Completed By: HERREN,CATHRYN                Date Completed: JAN 29, 2003
Released By : TILLIS,LEWIS                  Date Released : JAN 31, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

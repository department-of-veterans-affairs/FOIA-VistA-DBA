
=============================================================================
Run Date: JUL 13, 2005                     Designation: PRC*5.1*81
Package : PRC - IFCAP                         Priority: Mandatory
Version : 5.1        SEQ #68                    Status: Released
                  Compliance Date: AUG 13, 2005
=============================================================================

Associated patches: (v)PRC*5.1*1   <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*7   <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*13  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*14  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*22  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*26  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*28  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*35  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*38  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*39  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*51  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*55  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*56  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*57  <<= must be installed BEFORE `PRC*5.1*81'
                    (v)PRC*5.1*70  <<= must be installed BEFORE `PRC*5.1*81'

Subject: DYNAMED-IFCAP INTERFACE

Category: 
  - Enhancement (Mandatory)
  - Data Dictionary
  - Routine
  - Other
  - Print Template
  - Sort Template

Description:
============

  
 Patch Brief Description:
 ------------------------
 This patch includes the software needed to support the new interfaces
 between Integrated Funds Distribution, Control Point Activity, 
 Accounting and Procurement (IFCAP) and DynaMed at the Bay Pines Veterans
 Affairs Medical Center (VAMC).  The interface will ensure quality
 acquisition and inventory management processes between the two systems,
 and integrate additional functionality, as required, to support DynaMed.
  
    *******************************************************************
    *  ALL SITES MUST INSTALL THIS PATCH -                            *
    *  ONLY BAY PINES WILL IMPLEMENT THE INTERFACE AND SEE CHANGES    * 
    *  AS A RESULT                                                    *
    *******************************************************************
  
 A new system parameter definition
 --------------------------------- 
 The PRCV COTS INVENTORY parameter definition is being exported with this
 patch to enable the Bay Pines VAMC to activate the interface code designed
 to work at their site.  The parameter definition's default setting of 0
 (zero) allows all sites to continue to function as they have in the
 past.  Only The Bay Pines VAMC will need to modify the setting of this
 system parameter definition to indicate they are using DynaMed as their
 inventory system.
  
  
 To verify the value of this switch after installing the patch, enter the
 following line:
  
 W $$CHK^PRCVITMU
  
  
 Two new mail groups
 -------------------
 PRCV Item Vendor Edits and PRCV Audit File Alerts, will be exported with
 this build to be used ONLY by the Bay Pines VAMC.
  
 Do NOT add names to these mail groups if you are not at the Bay Pines
 VAMC.  SITES NOT IMPLEMENTING THIS DYNAMED-IFCAP INTERFACE WILL NEVER 
 USE THESE MAIL GROUPS.
  
  
  
 Justification for Work:
 -----------------------
 The Secretary of Veterans Affairs (VA) made the decision to revert the 
 Core Financial and Logistics System (CoreFLS) Operational Test Phase 1
 pilot sites from CoreFLS to the legacy systems.  When this decision was
 made, one component software piece of CoreFLS, DynaMed, (provided by
 Information Control), was identified as necessary for inventory management
 at the Bay Pines VAMC.  The Bay Pines VAMC had not used Generic Inventory
 Package (GIP) but, as part of using CoreFLS, the facility had set up
 DynaMed for its inventory needs.
  
 By retaining the DynaMed application, Bay Pines can continue to use a 
 functioning inventory management package to keep their surgeries on 
 schedule.  However, it was determined that DynaMed needed to be fully
 interfaced with the IFCAP system in order to remove a manual, dual-entry
 work-around, thus eliminating data entry errors and saving time.
  
  
 For Additional Information:
 ---------------------------
 Please refer to the IFCAP Technical Manual and the DynaMed-IFCAP 
 Interface Implementation Guide in the Veteran's Health Information
 Systems and Technology Architecture (VistA) Library under IFCAP at
 http://www.va.gov/vdl/Financial_Admin.asp?appID=42
  
    The filename for the interface implementation document is:
  
       DynaMed-IFCAP Implementation Guide      
  
    The file name for the Technical Manual is 
      
       Technical Manual
  
    The file name for the Application Coordinator User's Guide is
    
       Application Coordinator User's Guide
  
  
 The interface implementation document for use at Bay Pines VAMC 
 will also be accessible on the anonymous directory as:
  
   IFCP5_1P81IG.PDF    DynaMed-IFCAP Implementation Guide  
  
  
 The anonymous directory is available at the following servers:
  
    OI FIELD OFFICE   FTP Address
    ---------------   ---------------------------------                    
    Albany            ftp.fo-albany.med.va.gov            
    Hines             ftp.fo-hines.med.va.gov          
    Salt Lake         ftp.fo-slc.med.va.gov         
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch (See 'Justification of Work' 
 under Patch Description).
  
  
  
 This patch addresses the following NOIS/Remedy Ticket(s):
 ---------------------------------------------------------
 There are no NOIS/Remedy tickets associated with this patch.
  
  
  
 Overview of NOIS/Remedy Ticket(s):
 ----------------------------------
 N/A
  
  
  
 COMPONENTS SENT WITH PATCH 
  
 The following is a list of the routines included in this patch.  
 The second line of each of these routines now looks like: 
   
      ;;5.1;IFCAP;[Patch List];Oct 20, 2000 
   
                        CHECK^XTSUMBLD results
  
 Routine         Before Patch     After Patch     Patch List 
 -------         ------------     -----------     ----------
 PRC5181P         N/A              Deleted        81
 PRCFAC3          9348868          9733326        81
 PRCFFM2M         5525178          5871069        81
 PRCFFMOM        17526300         17929957        81
 PRCH442         13688488         15908104        13,81
 PRCH442A        14113956         18636498        8,35,26,57,81
 PRCHAM          20633658         20820186        14,38,81
 PRCHE           17557719         17810484        1,28,39,81
 PRCHE1           4876814          5069331        7,59,55,81
 PRCHEA          10907459         11081595        81
 PRCHEA1          4134888          5240487        81
 PRCHG           11240513         11651230        81
 PRCHNPO4        23949310         24124521        51,56,81
 PRCHREC         23426824         23524928        22,81
 PRCHREC2        13886636         14114452        81
 PRCHSP1         12701476         13218217        81
 PRCORV1          5057768          5298324        7,81
 PRCOVUP          5157807          5320108        81
 PRCPSFIV        13854718         13998453        81
 PRCPSFSV         6796494          6895879        81
 PRCSAPP2        11103270         11294624        14,81
 PRCSCK          19965818         21049466        81
 PRCSCPY         15540976         18229277        81
 PRCSD121        12958491         13667829        70,81
 PRCSEA          18421770         20508130        81
 PRCSEB          10404733         12158297        81
 PRCSEB0         12118094         15311427        81
 PRCSECP         10539645         13044349        81
 PRCSP121        14146367         14591852        81
 PRCSRIE1        12843785         13879566        13,81
 PRCSRIG1        10352742         10837668        13,81
 PRCSRIG2        17923739         20648084        13,81
 PRCSRIP          7663137          9688404        13,81
 PRCV442A         N/A             12286904        81
 PRCV442B         N/A             12034077        81
 PRCVBLD          N/A              2927081        81 
 PRCVEE1          N/A              4403968        81
 PRCVEE5          N/A              4984999        81
 PRCVFMS1         N/A              3473298        81
 PRCVFMS2         N/A              2570578        81
 PRCVIBF          N/A              7822171        81
 PRCVIBH          N/A             21831711        81
 PRCVIMF          N/A             16578724        81
 PRCVINIT         N/A              2565024        81
 PRCVIT           N/A              7342211        81
 PRCVITMU         N/A              1760956        81
 PRCVLIC          N/A              7192210        81
 PRCVMON          N/A              8408881        81
 PRCVNDR          N/A              7010020        81
 PRCVPOSD         N/A             12679888        81
 PRCVPOU          N/A              4505288        81
 PRCVRC1          N/A              6702222        81
 PRCVRC2          N/A              4791514        81
 PRCVRC3          N/A              1511809        81
 PRCVRCA          N/A             10513117        81
 PRCVRCG          N/A              8880309        81
 PRCVRE1          N/A              8327601        81
 PRCVREA          N/A              7714456        81
 PRCVRRA          N/A              1374686        81
 PRCVSUB          N/A              1628277        81
 PRCVTAP          N/A              8953690        81
 PRCVTCA          N/A             10566121        81
 PRCVUTSC         N/A              1505385        81
 PRCVVMF          N/A             13974632        81
 Total number of routines modified: 64 
 Total number of new routines: 32
 Total number of deleted routines: 1
   
  
  
  
 The following is a list of files included in this patch:
  
                                           UP    SEND  DATA                
                                           DATE  SEC.  COMES  SITE   RSLV  
 FILE #  NAME                              DD    CODE  W/FILE DATA   PTS 
 --------------------------------------------------------------------
 410         CONTROL POINT ACTIVITY        YES    NO     NO          NO
 Partial DD: subDD: 410        fld: 455
             subDD: 410.02     fld: .01
                               fld: 17
                               fld: 18
   DATA SCREEN: 
  
 410.3       REPETITIVE ITEM LIST          YES    NO     NO          NO
 Partial DD: subDD: 410.3      fld: 8
             subDD: 410.31     fld: 6
                               fld: 7
   DATA SCREEN:
  
 411         ADMIN. ACTIVITY SITE PARAMETER YES   NO     NO          NO
 Partial DD: subDD: 411        fld: 106
                               fld: 107
   DATA SCREEN: 
  
 414.02      DYNAMED IFCAP INTERFACE AUDIT YES    YES    NO              
  
 414.03      COTS INVENTORY SUBSCRIPTION CONTROLYESYES  NO
  
 414.04      RECORD CHECKSUM               YES    YES    NO              
  
 441         ITEM MASTER                   YES    YES    NO          NO
 Partial DD: subDD: 441        fld: .01
   DATA SCREEN:
  
 442         PROCUREMENT & ACCOUNTING TRANSACTIONSYESNO  NO          NO
 Partial DD: subDD: 442.01     fld: .01
                               fld: 48
   DATA SCREEN: 
  
  
 The following is a list of templates included in this patch:
  
 Template Name                     Type     File Name (Number)     
 -------------                     ----     ------------------     
 PRCV DYNAMED RIL'S NEED ACTION    print    DYNAMED IFCAP INTERFACE 
                                            AUDIT (FILE #414.02)
 PRCV DYNAMED RIL'S NEED ACTION    sort     DYNAMED IFCAP INTERFACE 
                                            AUDIT (FILE #414.02)
 PRCV ITEM DISPLAY                 print    ITEM MASTER (FILE #441)
  
  
 The following is a list of options included in this patch:
  
 Option Name                     Type           New/Modified
 -----------                     ----           ------------ 
 PRCV DYNAMED RIL'S NEED ACTION  print routine  New  
 PRCV ITEM UPDATE TO DYNAMED     run routine    New
 PRCV ITEM DISPLAY WITH VENDOR#  inquire        New
 PRCV VENDOR UPDATE TO DYNAMED   run routine    New
   
 The following is a list of mail groups included in this patch:
  
 Mail Group:
 -----------
 PRCV Audit File Alerts                         SEND TO SITE
 PRCV Item Vendor Edits                         SEND TO SITE
  
  
 The following is a list of protocols included in this patch:
  
 Protocols
 ---------
 PRCV 410 2237 LINE ITEM CANCEL                 SEND TO SITE
 PRCV 442 ITEM DELETE                           SEND TO SITE
 PRCV_DYNAMED_01_EV_REQUISITION_SEND            SEND TO SITE
 PRCV_DYNAMED_01_SU_REQUISITION_SEND            SEND TO SITE
 PRCV_DYNAMED_20_EV_FUND_BAL_SUBSCRIBE          SEND TO SITE
 PRCV_DYNAMED_20_SU_FUND_BAL_SUBSCRIBE          SEND TO SITE
 PRCV_DYNAMED_21_EV_FUND_BAL_CANCEL_SUB         SEND TO SITE
 PRCV_DYNAMED_21_SU_FUND_BAL_CANCEL_SUB         SEND TO SITE
 PRCV_DYNAMED_22_EV_FUND_BAL_DATA               SEND TO SITE
 PRCV_DYNAMED_22_SU_FUND_BAL_DATA               SEND TO SITE
 PRCV_IFCAP_01_EV_DYNAMED_UPDATE                SEND TO SITE
 PRCV_IFCAP_01_SU_DYNAMED_UPDATE                SEND TO SITE
 PRCV_IFCAP_02_EV_OBL/AMEND                     SEND TO SITE
 PRCV_IFCAP_02_SU_OBL/AMEND                     SEND TO SITE
 PRCV_IFCAP_03_EV_REC/ADJ                       SEND TO SITE
 PRCV_IFCAP_03_SU_REC/ADJ                       SEND TO SITE
 PRCV_IFCAP_04_EV_VEND_UPD                      SEND TO SITE
 PRCV_IFCAP_04_SU_VEND_UPD                      SEND TO SITE
 PRCV_IFCAP_05_EV_ITEM_UPD                      SEND TO SITE
 PRCV_IFCAP_05_SU_ITEM_UPD                      SEND TO SITE
 PRCV_IFCAP_06_EV_IB_PROC                       SEND TO SITE
 PRCV_IFCAP_06_SU_IB_PROC                       SEND TO SITE
  
 The following is a list of HL7 Application Parameters included in this 
 patch:
  
 HL7 Application Parameters
 --------------------------
 PRCV_DYNAMED                                   SEND TO SITE
 PRCV_IFCAP_2237                                SEND TO SITE
 PRCV_IFCAP_FBAL                                SEND TO SITE
 PRCV_IFCAP_FCAN                                SEND TO SITE
 PRCV_IFCAP_FSUB                                SEND TO SITE
 PRCV_IFCAP_IT                                  SEND TO SITE
 PRCV_IFCAP_IVSV                                SEND TO SITE
 PRCV_IFCAP_PO                                  SEND TO SITE
 PRCV_IFCAP_RECV                                SEND TO SITE
 PRCV_IFCAP_REQ                                 SEND TO SITE
 PRCV_IFCAP_VEN                                 SEND TO SITE
  
 The following is a list of bulletins included in this patch:
  
 Bulletins
 ---------
 PRCV_AUDIT_FILE_ERROR                          SEND TO SITE
  
 The following is a list of logical links included in this patch:
  
 HL Logical Link
 ---------------
 PRCVDYNA                                       SEND TO SITE
  
 The following is a list of parameter definitions included in this patch:
  
 Parameter Definition
 --------------------
 PRCV COTS INVENTORY                            SEND TO SITE
  
  
 Test Sites:
 -----------
 Bay Pines VAMC
 Clarksburg VAMC
 Greater Los Angeles HCS
 San Francisco VAMC
 Wilmington VAMC 
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If installed during the normal workday, it is recommended that the 
 following selection(s) in the OPTION (#19) file, and all of their 
 descendants be disabled to prevent possible conflicts while running the 
 KIDS Install. Other VISTA users will not be affected.
  
 Install Time - less than 5 minutes 
  
  
 ************** PRE-INSTALLATION INSTRUCTIONS **************
  
 Retrieve and place the following host file on your system before 
 installing this kids distribution:
  
     IFCP5_1P81.KID
  
 The host file is available at the following servers:
  
    OI FIELD OFFICE   FTP Address
    ---------------   ---------------------------------                    
    Albany            ftp.fo-albany.med.va.gov            
    Hines             ftp.fo-hines.med.va.gov          
    Salt Lake         ftp.fo-slc.med.va.gov         
  
 The Technical Manual and Application Coordinator User's Guide 
 will also be accessible on the anonymous directory as:
   
    IFCP5_1P81TM.pdf  Technical Manual
    IFCP5_1P81AC.pdf  Application Coordinator User's Guide
   
 The KIDS build is an ASCII file.  The PDF documents are Binary
 files.  Please select the appropriate format prior to downloading.
  
 ***********************************************************
        
  
 1.  START UP KIDS 
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
    
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
  
 Select Load a Distribution
  
   
 2.  LOAD TRANSPORT GLOBAL 
     ---------------------
  
     Select Installation Option: LOAD a Distribution  (When prompted 
     for the INSTALL NAME, enter the appropriate directory and
     IFCP5_1P81.KID.)
  
     When prompted "Want to Continue with Load? YES//", answer YES.
  
  
 3.  Consider other options under Select Installation Option: 
     --------------------------------------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter PRC*5.1*81):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
 4.  Select Installation Option: Install Package(s) 
                                 ------------------
     **This is the step to start the installation of this KIDS patch: 
    
     a.  Choose the Install Package(s) option to start the patch
         install.
  
         Enter the Coordinator for Mail Group 'PRCV Item Vendor Edits': 
         NOTE:  Answer with the IFCAP Application Coordinator or an IRM
         representative.
  
         Enter the Coordinator for Mail Group 'PRCV Audit File Alerts': 
         NOTE:  Answer with the IFCAP Application Coordinator or an IRM 
         representative.
  
         When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion
         of Install?   YES// '
         NOTE: Answer NO if your site is not Bay Pines VAMC and will
               not use the DynaMed-IFCAP interface.
  
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
         YES//' answer YES
  
     c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
         Options, and Protocols? YES//' answer YES 
  
     d.  When prompted 'Enter options you wish to mark as 'Out Of 
         Order':'  Enter the following options:
  
         Combined A&MM Menu                     [PRCHUSER MASTER]
         Control Point Official's Menu          [PRCSCP OFFICIAL]
         Delivery Orders Menu                   [PRCH DELIVERY ORDER MENU]
         Funds Distribution & Accounting Menu   [PRCF MASTER]
         IFCAP Application Coordinator Menu     [PRCHUSER COORDINATOR]
         Purchase Card Menu                     [PRCH PURCHASE CARD MENU]
  
     e.  When prompted 'Enter protocols you wish to mark as 'Out Of
         Order':' press <return>

Routine Information:
====================

Routine Name:
  - PRCVFMS1

 With data sent from DynaMed, this routine sets up variables used in 
 routine PRCPSFIV to generate an IV transaction for FMS.  This routine is 
 invoked by routine PRCVIBH, which parses the HL7 message from DynaMed.  
 It invokes routine PRCPSFIV at tag IVCOTS.

Routine Checksum:
See patch Description.

Routine Name:
  - PRCVFMS2

 With data sent from DynaMed, this routine sets up variables used in 
 routine PRCPSFSV to generate a SV transaction for FMS.  This routine is 
 invoked by routine PRCVIBH, which parses the HL7 message from DynaMed.  
 It invokes routine PRCPSFSV at tag SVCOTS.

Routine Checksum:
See patch Description.

Routine Name:
  - PRCPSFIV

 Line tag IVCOTS was added as the entry point from routine PRCVFMS1 for 
 setting up the IV transaction.  Also a write statement was replaced by a 
 call to EN^DDIOL().

Routine Checksum:
See patch Description.

Routine Name:
  - PRCPSFSV

 Line tag SVCOTS was added as the entry point from routine PRCVFMS2 for 
 setting up the SV transaction.  Also a write statement was replaced by a 
 call to EN^DDIOL().

Routine Checksum:
See patch Description.

Routine Name:
  - PRCHEA

 When an unobligated purchase order is cancelled, code was added to first 
 check the PRCV COTS INVENTORY parameter definition to determine if
 the site is using DynaMed.  If the site is using DynaMed, the code
 that determines if a transaction needs to be sent to DynaMed is invoked.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCV442A

 This is a new routine called from several PO options to coordinate the
 collection of information that needs to be sent to update DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCV442B

 This is a new routine invoked when an item is deleted from a DynaMed PO
 or when file # 414.02 needs to be updated due to PO cancellation or a
 receiving report being deleted.  It collects the information needed 
 to send to and update DynaMed. The code also coordinates the building of
 any MailMan message required to notify users of problems in updating file
 414.02 (the DynaMed-IFCAP Interface Audit File).

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCHREC

 When user creates a receiving report, the code was changed to add a check 
 the PRCV COTS INVENTORY parameter definition to determine if
 the site is using DynaMed.  If the site is using DynaMed, the code
 that determines if a transaction needs to be sent to DynaMed is invoked.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCHREC2

 When user cancels a receiving report, the code was changed to add a check 
 to the PRCV COTS INVENTORY parameter definition to determine if      
 the site is using DynaMed.  If the site is using DynaMed, the code
 that determines if a transaction needs to be sent to DynaMed is invoked.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCHNPO4

 A check of the PRCV COTS INVENTORY parameter definition has been added 
 after a Purchase order is signed to see if the site is using DynaMed.  
 Code was added to also call a new routine to determine if this purchase
 order needs to be communicated to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCHSP1

 Code was added to also transfer the DM DOC ID for an item to the new 2237
 when a 2237 is split and the item on the original 2237 included a DM DOC
 ID.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCH442

 This routine was modified to handle special processing of a DynaMed RIL 
 when it is being used to generate a purchase card order.  These changes 
 include setting a flag to indicate the RIL is from DynaMed, identifying
 the earliest DATE NEEDED BY date for each vendor in the RIL, calling the
 cancel item process whenever an item is not moved to a purchase card order
 and building a MailMan message for items that are not in the audit file or
 do not get updated in the audit file.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCH442A

 Code was added to handle the creation of Purchase Card orders from a 
 DynaMed RIL.  This code includes warnings to users about exiting before 
 all items are moved off the RIL and into a purchase card order, setting 
 the Report Receiving Flag to Yes, setting the PC delivery date to the 
 earliest DATE NEEDED BY for that vendor, setting the DM DOC ID into the
 Purchase Card order with each item moved to that order from the RIL,
 updating the DynaMed IFCAP Interface Audit file (414.02) with the purchase
 card order number for each item in the RIL, setting up information to
 alert the user whenever the audit file cannot be updated and automatically
 deleting an item from the RIL once it is moved to the purchase card order.
  
 Code was also added to the C2237 subroutine handling the cancellation 
 of incomplete purchase card orders to check the PRCV COTS INVENTORY
 parameter definition to determine if the site is using DynaMed.  If the
 site is using DynaMed, the code that determines if a transaction needs to
 be sent to DynaMed is invoked.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCFFMOM

 When an amendment is approved and processed, code was added to check
 the PRCV COTS INVENTORY parameter definition to determine if      
 the site is using DynaMed.  If the site is using DynaMed, the code
 that determines if a transaction needs to be sent to DynaMed is 
 invoked.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCFFM2M

 When Fiscal processes an amendment, code was added to check the PRCV COTS
 INVENTORY parameter definition to determine if the site is using
 DynaMed.  If the site is using DynaMed, the code that determines if a
 transaction needs to be sent to DynaMed is invoked.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCHAM

 When approving an adjustment, code was added to check the PRCV COTS
 INVENTORY parameter definition to determine if the site is using
 DynaMed.  If the site is using DynaMed, the code that determines if a
 transaction needs to be sent to DynaMed is invoked.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVPOU

 This is a new routine that collects information about a purchase order 
 when DynaMed must be updated of a change to a purchase order made in 
 IFCAP.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVRRA

 This is a new routine that collects the information needed to send to 
 DynaMed when an adjustment is processed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVPOSD

 This is a new routine used to construct an HL7 message to send to DynaMed
 whenever any changes of interest are made to purchase orders.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVVMF

 This is a new routine used to construct an HL7 message to send to DynaMed
 whenever changes of interest occur to vendor records.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVUTSC

 This is a new routine used to convert to or from HL7 escape characters in
 string fields.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCHG

 Changed routine in tag EN to conditionally ignore call to EN^PRCHG1 based 
 on value of PRCV COTS INVENTORY parameter definition.  Also added code to 
 update DynaMed IFCAP Interface Audit file (#414.02) if the same site
 parameter indicates an active interface with DynaMed exists.
  
 The code also governs the ability to return 2237s to the control point.  
 This ability was modified to restrict the return of DynaMed 2237s that 
 are parents to other 2237s.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCSEB

 Edited existing code to conditionally restrict Issue Books as a form type
 whenever the value of the PRCV COTS INVENTORY parameter definition is set
 to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCSEB0

 Edited the existing code to conditionally restrict Issue Books as a form
 type whenever the value of the PRCV COTS INVENTORY parameter definition is
 set to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCSEA

 Edited existing code to conditionally restrict Issue Books as a form type
 whenever the value of the PRCV COTS INVENTORY site parameter is set to
 DynaMed.
  
 Also added a call EN^PRCVTCA() to send an update message to DynaMed if a
 2237 is cancelled.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCSECP

 Edited existing code to conditionally restrict Issue Books as a form type
 whenever the value of the PRCV COTS INVENTORY parameter definition is set
 to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCSCPY

 Edited the existing code to conditionally restrict Issue Books as a form
 type whenever the value of the PRCV COTS INVENTORY parameter definition is
 set to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCSCK

 When a user is editing a 2237 that originated from DynaMed RIL entry, the
 code governing this process has been changed to check parameter definition
 PRCV COTS INVENTORY.  If the definition is set to DynaMed, the DynaMed's
 Date Needed BY date will be displayed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCSRIG1

 The existing code has been revised to prohibit re-use of a RIL that
 originated from a DynaMed requisition. The code checks the PRCV COTS
 INVENTORY parameter definition.  If this is set to (1) DynaMed and the
 RIL ID appears in the C cross-reference of the DynaMed IFCAP 
 Interface Audit file 414.02, the prompt 'Do you wish to re-use this list'
 will not display to the user.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCSRIE1

 The routine is modified to call EN^PRCVRCA() passing a parameter of the
 internal entry number for a record in the REPETITIVE ITEM LIST file
 #410.3.
  
 The routine PRCVRCA passes RIL cancellation information to DynaMed for
 RILs originating from a DynaMed request.
  
 The code was also modified to check the PRCV COTS INVENTORY parameter
 definition and if this is equal to 1 (set to DynaMed), prevents the
 editing of RILs that originated from DynaMed requests.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCSAPP2

 The code was revised to invoke EN^PRCVTAP() whenever a 2237 that 
 originated from DynaMed is approved. The internal entry number for that
 2237 in the CONTROL POINT ACTIVITY file #410 is passed as a parameter.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVRCA

 This is a new routine which processes cancelled RILs if the PRCV COTS
 INVENTORY parameter definition is set to DynaMed and the RIL ID is in
 the C cross-reference of the DynaMed IFCAP Interface Audit file #414.02.  
 The code extracts data to pass to routine PRCVEE1 in order to update
 DynaMed of the cancellation.
  
 This routine also updates relevant info in DynaMed IFCAP Interface Audit
 file #414.02 and sends a bulletin if the file cannot be updated

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVTAP

 This is a new routine processing the approval of 2237s when the PRCV 
 COTS INVENTORY parameter definition is set to DynaMed and the 2237 IEN 
 is found in the D cross-reference of the DynaMed IFCAP Interface Audit 
 file (#414.02)
  
 The routine extracts data of interest to DynaMed and calls PRCVEE1. It
 also updates relevant info in the DynaMed IFCAP Interface Audit file
 #414.02 and initiates a bulletin if the audit file cannot be updated.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVTCA

 This is a new routine handling the processing of 2237s cancelled through 
 the Cancel a Permanent Transaction [PRCSCT] option.  If the PRCV COTS 
 INVENTORY parameter definition is set to DynaMed and the 2237 is in the D 
 cross-reference, data of interest will be extracted from the 2237 and 
 forwarded to PRCVEE1 to be sent to DynaMed.
  
 The routine also updates relevant info in DynaMed IFCAP Interface Audit  
 file #414.02 and sends a bulletin to FCP users if that file cannot be
 updated.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVIT

 This is a new routine that forwards information concerning items added or
 changed in the Item Master (#441) file to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results

Routine Name:
  - PRCVIMF

 This is a new routine used to construct an HL7 message for items of
 interest in the Item Master File Updates and to send those messages to
 DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results

Routine Name:
  - PRCHE

 This routine was modified to ensure Item Master File Updates are forwarded
 to DynaMed when it is appropriate to do so.

Routine Checksum:
See CHECK^XTSUMBLD results

Routine Name:
  - PRCHEA1

 This routine was modified to forward the Item Master (#441) and
 Vendor (#440) file updates to DynaMed when appropriate to do so.

Routine Checksum:
See CHECK^XTSUMBLD results

Routine Name:
  - PRCVEE1

 This is a new routine that will build HL7 messages to send to DynaMed when
 a RIL is cancelled, a 2237 is cancelled, an item on a 2237 is cancelled or
 a 2237 is approved.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVEE5

 This is a new routine that processes an Application ACK received from
 DynaMed in response to a message sent by PRCVEE1.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVRE1

 This is a new routine that receives an HL7 message concerning a DynaMed
 request and builds a temporary file that can be read by IFCAP.  This
 routine works with PRCVREA and calls another routine that will convert the
 request into a RIL.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVREA

 This is a new routine that sends errors in the original message from IFCAP
 to DynaMed via an Application ACK message.  These errors are stored in the
 temporary file that was built by PRCVRE1.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVRC1

 This is a new routine that along with PRCVRC2 and PRCVRC3 facilitates the
 creation of RILs from requisitions sent by DynaMed.

Routine Checksum:
see CHECK^XTSUMBLD results

Routine Name:
  - PRCVRC2

 This is a new routine that along with PRCVRC1 and PRCVRC3 facilitates the
 creation of RILs from requisitions sent by DynaMed.

Routine Checksum:
see CHECK^XTSUMBLD results

Routine Name:
  - PRCVRC3

 This is a new routine that along with PRCVRC1 and PRCVRC2 facilitates the
 creation of RILs from requisitions sent by DynaMed.

Routine Checksum:
see CHECK^XTSUMBLD results

Routine Name:
  - PRCVLIC

 This is a new routine that runs when a line item in a 2237 is cancelled.  
 If the 2237 line item came from a DynaMed requisition then the DynaMed
 IFCAP Interface Audit file (#414.02) is updated with the delete of the
 item and an update message is constructed.  Another routine is called to
 send the update message to DynaMed.

Routine Checksum:
see CHECK^XTSUMBLD results

Routine Name:
  - PRCSRIG2

 The UPDAUD subroutine was added to update the DynaMed IFCAP Interface
 Audit file (#414.02)
  
 Code was also added to save the values for the DM Doc ID and Date Needed
 By fields in the RIL to those corresponding fields in the new 2237 entry
 for each item.

Routine Checksum:
see CHECK^XTSUMBLD results

Routine Name:
  - PRCSRIP

 Code was added to display DM Doc ID and Date Needed By fields in RILs 
 originating from DynaMed (during print/display of RIL).

Routine Checksum:
see CHECK^XTSUMBLD results

Routine Name:
  - PRCSD121

 When printing a 2237 to the screen, display new fields DM Doc ID and Date
 Needed By from DynaMed for each line item.

Routine Checksum:
see CHECK^XTSUMBLD results

Routine Name:
  - PRCSP121

 When printing a 2237 to a printer, code was added to display data for the
 new DM Doc ID and Date Needed By (DynaMed) fields for each line item when
 a 2237 is printed.

Routine Checksum:
see CHECK^XTSUMBLD results

Routine Name:
  - PRCORV1

 Modified routine to send vendor file update information to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCOVUP

 Modified routine to send vendor file update information to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCFAC3

 Modified routine to send vendor file update information to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCHE1

 Modified routine to send vendor file update information to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVBLD

 This is a new routine which builds HL7 messages to update DynaMed of
 balances for the IFCAP fund control points subscribed to by DynaMed

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVMON

 This is a new routine that will monitor fund balances for the fund control
 points to which DynaMed has subscribed and invokes the creation of HL7
 messages to DynaMed when changes occur.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVSUB

 This is a new routine that will handle the subscription and cancel
 subscription activities associated with DynaMed's requests to receive
 balance updates for specific IFCAP fund control points.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVRCG

 This is a new routine that will process the following incoming 
 HL7 messages from DynaMed:
  
 fund subscribe/cancel
 acknowledgments to fund publish

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVNDR

 This is a new routine
 created to send vendor file update information to DynaMed.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVINIT

 New routine that will allow users to initialize the checksums for the 
 item and vendor files if the site is using the interface.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRC5181P

 This is a routine executed as the post-install for the patch.  It sets the
 PRCV COTS INVENTORY system definition parameter to zero.  The routine is 
 automatically deleted when the install completes.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVIBH

 This is a new routine called by the HL7 Protocol PRCV_IFCAP_06_IB_PROC to
 receive HL7 messages from DynaMed concerning Issue Book or Inventory
 Adjustment activity.  The routine parses the message, verifies the data
 received and may call PRCVIBF, PRCVFMS1 and PRCVFMS2 for further
 processing in IFCAP.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVITMU

 This is a new routine created to support the functions associated with 
 the input transform for field .01 of the ITEM MASTER file (#441) and of 
 the AFREE cross-reference associated with this file.

Routine Checksum:
See CHECK^XTSUMBLD results.

Routine Name:
  - PRCVIBF

 This is a new routine that sets up the Control Point Activity transactions
 to adjust the FCP Running Balances based on data from DynaMed.  It is
 invoked by routine PRCVIBH.

Routine Checksum:
See CHECK^XTSUMBLD results.

=============================================================================
User Information:
Entered By  : CZEKAJ,CHERYL                 Date Entered  : NOV 08, 2004
Completed By: MCGAUGH,MAVIS L               Date Completed: JUL 13, 2005
Released By : NELSON,VICKI M                Date Released : JUL 13, 2005
=============================================================================


Packman Mail Message:
=====================

No routines included

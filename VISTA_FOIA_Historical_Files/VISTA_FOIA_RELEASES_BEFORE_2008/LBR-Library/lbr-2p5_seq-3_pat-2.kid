Released LBR*2.5*2 SEQ #3
Extracted from mail message
**KIDS**:LBR*2.5*2^

**INSTALL NAME**
LBR*2.5*2
"BLD",4,0)
LBR*2.5*2^Library^0^^y
"BLD",4,1,0)
^^2^2^2971121^^^^
"BLD",4,1,1,0)
Patch to version 2.5 which allows for Primary Stations and Legacy Stations
"BLD",4,1,2,0)
on one system.
"BLD",4,4,0)
^9.64PA^680.5^8
"BLD",4,4,680,0)
680
"BLD",4,4,680,222)
y^n^f^^^^n
"BLD",4,4,680.4,0)
680.4
"BLD",4,4,680.4,222)
y^n^f^^^^n
"BLD",4,4,680.5,0)
680.5
"BLD",4,4,680.5,222)
y^y^f^^^^n
"BLD",4,4,680.6,0)
680.6
"BLD",4,4,680.6,222)
y^n^f^^^^n
"BLD",4,4,680.7,0)
680.7
"BLD",4,4,680.7,222)
y^n^f^^^^n
"BLD",4,4,681,0)
681
"BLD",4,4,681,222)
y^n^f^^^^n
"BLD",4,4,682,0)
682
"BLD",4,4,682,222)
y^n^f^^^^n
"BLD",4,4,682.1,0)
682.1
"BLD",4,4,682.1,222)
y^y^f^^^^n
"BLD",4,4,"B",680,680)

"BLD",4,4,"B",680.4,680.4)

"BLD",4,4,"B",680.5,680.5)

"BLD",4,4,"B",680.6,680.6)

"BLD",4,4,"B",680.7,680.7)

"BLD",4,4,"B",681,681)

"BLD",4,4,"B",682,682)

"BLD",4,4,"B",682.1,682.1)

"BLD",4,"ABPKG")
n
"BLD",4,"INI")
LBRVPRE
"BLD",4,"INIT")
LBRVPOST
"BLD",4,"KRN",0)
^9.67PA^.84^11
"BLD",4,"KRN",.4,0)
.4
"BLD",4,"KRN",.4,"NM",0)
^9.68A^29^8
"BLD",4,"KRN",.4,"NM",6,0)
LBRY FYI LIST    FILE #680^680^0
"BLD",4,"KRN",.4,"NM",7,0)
LBRY GAPS LIST    FILE #680^680^0
"BLD",4,"KRN",.4,"NM",9,0)
LBRY MEDICAL HOLDINGS    FILE #680^680^0
"BLD",4,"KRN",.4,"NM",23,0)
LBRY SUBSCRIPTION/VENDOR    FILE #681^681^0
"BLD",4,"KRN",.4,"NM",24,0)
LBRY TITLE ALPHABETICAL    FILE #680^680^0
"BLD",4,"KRN",.4,"NM",25,0)
LBRY TITLE ALPHABETICAL BRIEF    FILE #680^680^0
"BLD",4,"KRN",.4,"NM",28,0)
LBRY TITLES DUE RENEWAL    FILE #681^681^0
"BLD",4,"KRN",.4,"NM",29,0)
LBRY ADMIN TITLES    FILE #680^680^0
"BLD",4,"KRN",.4,"NM","B","LBRY ADMIN TITLES    FILE #680",29)

"BLD",4,"KRN",.4,"NM","B","LBRY FYI LIST    FILE #680",6)

"BLD",4,"KRN",.4,"NM","B","LBRY GAPS LIST    FILE #680",7)

"BLD",4,"KRN",.4,"NM","B","LBRY MEDICAL HOLDINGS    FILE #680",9)

"BLD",4,"KRN",.4,"NM","B","LBRY SUBSCRIPTION/VENDOR    FILE #681",23)

"BLD",4,"KRN",.4,"NM","B","LBRY TITLE ALPHABETICAL    FILE #680",24)

"BLD",4,"KRN",.4,"NM","B","LBRY TITLE ALPHABETICAL BRIEF    FILE #680",25)

"BLD",4,"KRN",.4,"NM","B","LBRY TITLES DUE RENEWAL    FILE #681",28)

"BLD",4,"KRN",.401,0)
.401
"BLD",4,"KRN",.401,"NM",0)
^9.68A^21^9
"BLD",4,"KRN",.401,"NM",2,0)
LBRY ADMIN TITLES    FILE #680^680^0
"BLD",4,"KRN",.401,"NM",4,0)
LBRY GAPS LIST    FILE #680^680^0
"BLD",4,"KRN",.401,"NM",5,0)
LBRY MEDICAL BY SUBJECT    FILE #680^680^0
"BLD",4,"KRN",.401,"NM",6,0)
LBRY MEDICAL HOLDINGS    FILE #680^680^0
"BLD",4,"KRN",.401,"NM",10,0)
LBRY MISSING ISSUES LIST    FILE #682^682^0
"BLD",4,"KRN",.401,"NM",18,0)
LBRY SUBSCRIPTION/VENDOR    FILE #681^681^0
"BLD",4,"KRN",.401,"NM",19,0)
LBRY TITLE ALPHABETICAL    FILE #680^680^0
"BLD",4,"KRN",.401,"NM",20,0)
LBRY TITLE LOCATION    FILE #680^680^0
"BLD",4,"KRN",.401,"NM",21,0)
LBRY TITLES DUE RENEWAL    FILE #681^681^0
"BLD",4,"KRN",.401,"NM","B","LBRY ADMIN TITLES    FILE #680",2)

"BLD",4,"KRN",.401,"NM","B","LBRY GAPS LIST    FILE #680",4)

"BLD",4,"KRN",.401,"NM","B","LBRY MEDICAL BY SUBJECT    FILE #680",5)

"BLD",4,"KRN",.401,"NM","B","LBRY MEDICAL HOLDINGS    FILE #680",6)

"BLD",4,"KRN",.401,"NM","B","LBRY MISSING ISSUES LIST    FILE #682",10)

"BLD",4,"KRN",.401,"NM","B","LBRY SUBSCRIPTION/VENDOR    FILE #681",18)

"BLD",4,"KRN",.401,"NM","B","LBRY TITLE ALPHABETICAL    FILE #680",19)

"BLD",4,"KRN",.401,"NM","B","LBRY TITLE LOCATION    FILE #680",20)

"BLD",4,"KRN",.401,"NM","B","LBRY TITLES DUE RENEWAL    FILE #681",21)

"BLD",4,"KRN",.402,0)
.402
"BLD",4,"KRN",.402,"NM",0)
^9.68A^14^13
"BLD",4,"KRN",.402,"NM",1,0)
LBRY BIBLIOGRAPHIC ENTRY    FILE #680^680^0
"BLD",4,"KRN",.402,"NM",2,0)
LBRY CHECK-IN SETUP    FILE #680.5^680.5^0
"BLD",4,"KRN",.402,"NM",3,0)
LBRY CONTACTS ROUTING    FILE #680.4^680.4^0
"BLD",4,"KRN",.402,"NM",4,0)
LBRY D1    FILE #681^681^0
"BLD",4,"KRN",.402,"NM",5,0)
LBRY D2    FILE #681^681^0
"BLD",4,"KRN",.402,"NM",6,0)
LBRY FINANCIAL ENTRY    FILE #680^680^0
"BLD",4,"KRN",.402,"NM",7,0)
LBRY INSERT    FILE #682^682^0
"BLD",4,"KRN",.402,"NM",8,0)
LBRY JOURNAL DATE EDIT    FILE #682^682^0
"BLD",4,"KRN",.402,"NM",9,0)
LBRY LOCAL SETUP    FILE #680^680^0
"BLD",4,"KRN",.402,"NM",10,0)
LBRY PREDICT INSERT    FILE #682^682^0
"BLD",4,"KRN",.402,"NM",11,0)
LBRY SITE    FILE #680.6^680.6^0
"BLD",4,"KRN",.402,"NM",12,0)
LBRY TITLE SETUP    FILE #680.5^680.5^0
"BLD",4,"KRN",.402,"NM",14,0)
LBRYINUP    FILE #680.8^680.8^0
"BLD",4,"KRN",.402,"NM","B","LBRY BIBLIOGRAPHIC ENTRY    FILE #680",1)

"BLD",4,"KRN",.402,"NM","B","LBRY CHECK-IN SETUP    FILE #680.5",2)

"BLD",4,"KRN",.402,"NM","B","LBRY CONTACTS ROUTING    FILE #680.4",3)

"BLD",4,"KRN",.402,"NM","B","LBRY D1    FILE #681",4)

"BLD",4,"KRN",.402,"NM","B","LBRY D2    FILE #681",5)

"BLD",4,"KRN",.402,"NM","B","LBRY FINANCIAL ENTRY    FILE #680",6)

"BLD",4,"KRN",.402,"NM","B","LBRY INSERT    FILE #682",7)

"BLD",4,"KRN",.402,"NM","B","LBRY JOURNAL DATE EDIT    FILE #682",8)

"BLD",4,"KRN",.402,"NM","B","LBRY LOCAL SETUP    FILE #680",9)

"BLD",4,"KRN",.402,"NM","B","LBRY PREDICT INSERT    FILE #682",10)

"BLD",4,"KRN",.402,"NM","B","LBRY SITE    FILE #680.6",11)

"BLD",4,"KRN",.402,"NM","B","LBRY TITLE SETUP    FILE #680.5",12)

"BLD",4,"KRN",.402,"NM","B","LBRYINUP    FILE #680.8",14)

"BLD",4,"KRN",.403,0)
.403
"BLD",4,"KRN",.5,0)
.5
"BLD",4,"KRN",.84,0)
.84
"BLD",4,"KRN",3.6,0)
3.6
"BLD",4,"KRN",3.6,"NM",0)
^9.68A^3^1
"BLD",4,"KRN",3.6,"NM",3,0)
LBRYMANL^^0
"BLD",4,"KRN",3.6,"NM","B","LBRYMANL",3)

"BLD",4,"KRN",9.2,0)
9.2
"BLD",4,"KRN",9.2,"NM",0)
^9.68A^^0
"BLD",4,"KRN",9.8,0)
9.8
"BLD",4,"KRN",9.8,"NM",0)
^9.68A^77^64
"BLD",4,"KRN",9.8,"NM",1,0)
LBRYASK^^0^B1132304
"BLD",4,"KRN",9.8,"NM",2,0)
LBRYCK^^0^B15996193
"BLD",4,"KRN",9.8,"NM",3,0)
LBRYCK0^^0^B13144534
"BLD",4,"KRN",9.8,"NM",4,0)
LBRYCK1^^0^B14680421
"BLD",4,"KRN",9.8,"NM",5,0)
LBRYCK2^^0^B6667366
"BLD",4,"KRN",9.8,"NM",6,0)
LBRYCK3^^0^B6554282
"BLD",4,"KRN",9.8,"NM",7,0)
LBRYCK4^^0^B8746258
"BLD",4,"KRN",9.8,"NM",8,0)
LBRYCK5^^0^B1488320
"BLD",4,"KRN",9.8,"NM",9,0)
LBRYCSE^^0^B16957805
"BLD",4,"KRN",9.8,"NM",10,0)
LBRYCSE0^^0^B7123215
"BLD",4,"KRN",9.8,"NM",11,0)
LBRYEDI^^0^B4232362
"BLD",4,"KRN",9.8,"NM",12,0)
LBRYEDR^^0^B985166
"BLD",4,"KRN",9.8,"NM",14,0)
LBRYET2^^0^B3860459
"BLD",4,"KRN",9.8,"NM",18,0)
LBRYHIS^^0^B11619109
"BLD",4,"KRN",9.8,"NM",20,0)
LBRYHIS1^^0^B4953453
"BLD",4,"KRN",9.8,"NM",21,0)
LBRYHIS2^^0^B1467019
"BLD",4,"KRN",9.8,"NM",24,0)
LBRYLIPL^^0^B778193
"BLD",4,"KRN",9.8,"NM",26,0)
LBRYLST^^0^B14879839
"BLD",4,"KRN",9.8,"NM",28)
^^^
"BLD",4,"KRN",9.8,"NM",28,0)
LBRYNSTL^^1^
"BLD",4,"KRN",9.8,"NM",29,0)
LBRYPG^^0^B10501660
"BLD",4,"KRN",9.8,"NM",30,0)
LBRYPG0^^0^B1432705
"BLD",4,"KRN",9.8,"NM",31,0)
LBRYPG1^^0^B4721912
"BLD",4,"KRN",9.8,"NM",32,0)
LBRYPG2^^0^B1977183
"BLD",4,"KRN",9.8,"NM",33,0)
LBRYPG3^^0^B1481685
"BLD",4,"KRN",9.8,"NM",34,0)
LBRYPPR^^0^B14758132
"BLD",4,"KRN",9.8,"NM",35,0)
LBRYPPR0^^0^B5650276
"BLD",4,"KRN",9.8,"NM",36,0)
LBRYPRC1^^0^B7547949
"BLD",4,"KRN",9.8,"NM",37,0)
LBRYPRCS^^0^B10586120
"BLD",4,"KRN",9.8,"NM",38,0)
LBRYPRG^^0^B706874
"BLD",4,"KRN",9.8,"NM",40,0)
LBRYRET^^0^B11592220
"BLD",4,"KRN",9.8,"NM",41,0)
LBRYRET0^^0^B5173674
"BLD",4,"KRN",9.8,"NM",42,0)
LBRYRET1^^0^B5793858
"BLD",4,"KRN",9.8,"NM",43,0)
LBRYRET2^^0^B6380655
"BLD",4,"KRN",9.8,"NM",44,0)
LBRYRLE^^0^B1189249
"BLD",4,"KRN",9.8,"NM",45,0)
LBRYRPT^^0^B20651087
"BLD",4,"KRN",9.8,"NM",46,0)
LBRYRPT0^^0^B21756464
"BLD",4,"KRN",9.8,"NM",47,0)
LBRYRPT1^^0^B5701407
"BLD",4,"KRN",9.8,"NM",48,0)
LBRYRRS^^0^B2192084
"BLD",4,"KRN",9.8,"NM",49,0)
LBRYRRS0^^0^B5922082
"BLD",4,"KRN",9.8,"NM",50,0)
LBRYRST^^0^B12319674
"BLD",4,"KRN",9.8,"NM",51,0)
LBRYRTX^^0^B11027202
"BLD",4,"KRN",9.8,"NM",53,0)
LBRYSITE^^0^B4360210
"BLD",4,"KRN",9.8,"NM",56,0)
LBRYSTA^^0^B5434356
"BLD",4,"KRN",9.8,"NM",58,0)
LBRYUTL^^0^B4794749
"BLD",4,"KRN",9.8,"NM",65,0)
LBRVENV^^0^B27056647
"BLD",4,"KRN",9.8,"NM",66,0)
LBRVPOST^^0^B7672975
"BLD",4,"KRN",9.8,"NM",67,0)
LBRVPRE^^0^B4506630
"BLD",4,"KRN",9.8,"NM",68)
^^^
"BLD",4,"KRN",9.8,"NM",68,0)
LBRYPRC2^^1
"BLD",4,"KRN",9.8,"NM",69)
^^^
"BLD",4,"KRN",9.8,"NM",69,0)
LBRYASGN^^1^B8601751
"BLD",4,"KRN",9.8,"NM",70)
^^^
"BLD",4,"KRN",9.8,"NM",70,0)
LBRYASG1^^1^B5554417
"BLD",4,"KRN",9.8,"NM",71)
^^^
"BLD",4,"KRN",9.8,"NM",71,0)
LBRYASG2^^1^B4265028
"BLD",4,"KRN",9.8,"NM",72,0)
LBRYREPT^^0^B1012931
"BLD",4,"KRN",9.8,"NM",73,0)
LBRYPRCM^^0^B11416056
"BLD",4,"KRN",9.8,"NM",74,0)
LBRYRSLT^^0^B1698111
"BLD",4,"KRN",9.8,"NM",75,0)
LBRYET3^^0^B408866
"BLD",4,"KRN",9.8,"NM",76)
^^^
"BLD",4,"KRN",9.8,"NM",76,0)
LBRYTST^^1
"BLD",4,"KRN",9.8,"NM",77,0)
LBRYHSF^^0^B415226
"BLD",4,"KRN",9.8,"NM",78)
^^^
"BLD",4,"KRN",9.8,"NM",78,0)
LBRYHOL^^1
"BLD",4,"KRN",9.8,"NM",79,0)
LBRVCONV^^0^B11400056
"BLD",4,"KRN",9.8,"NM",80,0)
LBRNTEG^^0^B6384213
"BLD",4,"KRN",9.8,"NM",81)
^^^
"BLD",4,"KRN",9.8,"NM",81,0)
LBRYHD^^1^B6570814
"BLD",4,"KRN",9.8,"NM",82,0)
LBRYKILL^^0^B619451
"BLD",4,"KRN",9.8,"NM",83,0)
LBRYFINP^^0^B3231841
"BLD",4,"KRN",9.8,"NM",84,0)
LBRYHIS0^^0^B6034597
"BLD",4,"KRN",9.8,"NM","B","LBRNTEG",80)

"BLD",4,"KRN",9.8,"NM","B","LBRVCONV",79)

"BLD",4,"KRN",9.8,"NM","B","LBRVENV",65)

"BLD",4,"KRN",9.8,"NM","B","LBRVPOST",66)

"BLD",4,"KRN",9.8,"NM","B","LBRVPRE",67)

"BLD",4,"KRN",9.8,"NM","B","LBRYASG1",70)

"BLD",4,"KRN",9.8,"NM","B","LBRYASG2",71)

"BLD",4,"KRN",9.8,"NM","B","LBRYASGN",69)

"BLD",4,"KRN",9.8,"NM","B","LBRYASK",1)

"BLD",4,"KRN",9.8,"NM","B","LBRYCK",2)

"BLD",4,"KRN",9.8,"NM","B","LBRYCK0",3)

"BLD",4,"KRN",9.8,"NM","B","LBRYCK1",4)

"BLD",4,"KRN",9.8,"NM","B","LBRYCK2",5)

"BLD",4,"KRN",9.8,"NM","B","LBRYCK3",6)

"BLD",4,"KRN",9.8,"NM","B","LBRYCK4",7)

"BLD",4,"KRN",9.8,"NM","B","LBRYCK5",8)

"BLD",4,"KRN",9.8,"NM","B","LBRYCSE",9)

"BLD",4,"KRN",9.8,"NM","B","LBRYCSE0",10)

"BLD",4,"KRN",9.8,"NM","B","LBRYEDI",11)

"BLD",4,"KRN",9.8,"NM","B","LBRYEDR",12)

"BLD",4,"KRN",9.8,"NM","B","LBRYET2",14)

"BLD",4,"KRN",9.8,"NM","B","LBRYET3",75)

"BLD",4,"KRN",9.8,"NM","B","LBRYFINP",83)

"BLD",4,"KRN",9.8,"NM","B","LBRYHD",81)

"BLD",4,"KRN",9.8,"NM","B","LBRYHIS",18)

"BLD",4,"KRN",9.8,"NM","B","LBRYHIS0",84)

"BLD",4,"KRN",9.8,"NM","B","LBRYHIS1",20)

"BLD",4,"KRN",9.8,"NM","B","LBRYHIS2",21)

"BLD",4,"KRN",9.8,"NM","B","LBRYHOL",78)

"BLD",4,"KRN",9.8,"NM","B","LBRYHSF",77)

"BLD",4,"KRN",9.8,"NM","B","LBRYKILL",82)

"BLD",4,"KRN",9.8,"NM","B","LBRYLIPL",24)

"BLD",4,"KRN",9.8,"NM","B","LBRYLST",26)

"BLD",4,"KRN",9.8,"NM","B","LBRYNSTL",28)

"BLD",4,"KRN",9.8,"NM","B","LBRYPG",29)

"BLD",4,"KRN",9.8,"NM","B","LBRYPG0",30)

"BLD",4,"KRN",9.8,"NM","B","LBRYPG1",31)

"BLD",4,"KRN",9.8,"NM","B","LBRYPG2",32)

"BLD",4,"KRN",9.8,"NM","B","LBRYPG3",33)

"BLD",4,"KRN",9.8,"NM","B","LBRYPPR",34)

"BLD",4,"KRN",9.8,"NM","B","LBRYPPR0",35)

"BLD",4,"KRN",9.8,"NM","B","LBRYPRC1",36)

"BLD",4,"KRN",9.8,"NM","B","LBRYPRC2",68)

"BLD",4,"KRN",9.8,"NM","B","LBRYPRCM",73)

"BLD",4,"KRN",9.8,"NM","B","LBRYPRCS",37)

"BLD",4,"KRN",9.8,"NM","B","LBRYPRG",38)

"BLD",4,"KRN",9.8,"NM","B","LBRYREPT",72)

"BLD",4,"KRN",9.8,"NM","B","LBRYRET",40)

"BLD",4,"KRN",9.8,"NM","B","LBRYRET0",41)

"BLD",4,"KRN",9.8,"NM","B","LBRYRET1",42)

"BLD",4,"KRN",9.8,"NM","B","LBRYRET2",43)

"BLD",4,"KRN",9.8,"NM","B","LBRYRLE",44)

"BLD",4,"KRN",9.8,"NM","B","LBRYRPT",45)

"BLD",4,"KRN",9.8,"NM","B","LBRYRPT0",46)

"BLD",4,"KRN",9.8,"NM","B","LBRYRPT1",47)

"BLD",4,"KRN",9.8,"NM","B","LBRYRRS",48)

"BLD",4,"KRN",9.8,"NM","B","LBRYRRS0",49)

"BLD",4,"KRN",9.8,"NM","B","LBRYRSLT",74)

"BLD",4,"KRN",9.8,"NM","B","LBRYRST",50)

"BLD",4,"KRN",9.8,"NM","B","LBRYRTX",51)

"BLD",4,"KRN",9.8,"NM","B","LBRYSITE",53)

"BLD",4,"KRN",9.8,"NM","B","LBRYSTA",56)

"BLD",4,"KRN",9.8,"NM","B","LBRYTST",76)

"BLD",4,"KRN",9.8,"NM","B","LBRYUTL",58)

"BLD",4,"KRN",19,0)
19
"BLD",4,"KRN",19,"NM",0)
^9.68A^59^14
"BLD",4,"KRN",19,"NM",12,0)
LBRY ITEM PLACEMENT LOCATION^^0
"BLD",4,"KRN",19,"NM",13,0)
LBRY MANAGER^^2
"BLD",4,"KRN",19,"NM",33,0)
LBRY RESUB LOCAL^^0
"BLD",4,"KRN",19,"NM",34,0)
LBRY RMV SER TITLE^^0
"BLD",4,"KRN",19,"NM",46,0)
LBRY SITE PRMTERS^^0
"BLD",4,"KRN",19,"NM",47,0)
LBRY SUBJECT EDIT^^0
"BLD",4,"KRN",19,"NM",49,0)
LBRY TITLES DUE RENEWAL^^0
"BLD",4,"KRN",19,"NM",50,0)
LBRY TITLES LOCATION^^0
"BLD",4,"KRN",19,"NM",51,0)
LBRY TITLES VENDOR^^0
"BLD",4,"KRN",19,"NM",52,0)
LBRY TRAN MAN^^0
"BLD",4,"KRN",19,"NM",55,0)
LBRY TRAN REPORT^^0
"BLD",4,"KRN",19,"NM",57,0)
LBRY SER MGT^^2
"BLD",4,"KRN",19,"NM",58,0)
LBRY OVERVIEW^^0
"BLD",4,"KRN",19,"NM",59)
^^^
"BLD",4,"KRN",19,"NM",59,0)
LBRY ASSIGN COPY^^1
"BLD",4,"KRN",19,"NM","B","LBRY ASSIGN COPY",59)

"BLD",4,"KRN",19,"NM","B","LBRY ITEM PLACEMENT LOCATION",12)

"BLD",4,"KRN",19,"NM","B","LBRY MANAGER",13)

"BLD",4,"KRN",19,"NM","B","LBRY OVERVIEW",58)

"BLD",4,"KRN",19,"NM","B","LBRY RESUB LOCAL",33)

"BLD",4,"KRN",19,"NM","B","LBRY RMV SER TITLE",34)

"BLD",4,"KRN",19,"NM","B","LBRY SER MGT",57)

"BLD",4,"KRN",19,"NM","B","LBRY SITE PRMTERS",46)

"BLD",4,"KRN",19,"NM","B","LBRY SUBJECT EDIT",47)

"BLD",4,"KRN",19,"NM","B","LBRY TITLES DUE RENEWAL",49)

"BLD",4,"KRN",19,"NM","B","LBRY TITLES LOCATION",50)

"BLD",4,"KRN",19,"NM","B","LBRY TITLES VENDOR",51)

"BLD",4,"KRN",19,"NM","B","LBRY TRAN MAN",52)

"BLD",4,"KRN",19,"NM","B","LBRY TRAN REPORT",55)

"BLD",4,"KRN",19.1,0)
19.1
"BLD",4,"KRN",19.1,"NM",0)
^9.68A^^0
"BLD",4,"KRN","B",.4,.4)

"BLD",4,"KRN","B",.401,.401)

"BLD",4,"KRN","B",.402,.402)

"BLD",4,"KRN","B",.403,.403)

"BLD",4,"KRN","B",.5,.5)

"BLD",4,"KRN","B",.84,.84)

"BLD",4,"KRN","B",3.6,3.6)

"BLD",4,"KRN","B",9.2,9.2)

"BLD",4,"KRN","B",9.8,9.8)

"BLD",4,"KRN","B",19,19)

"BLD",4,"KRN","B",19.1,19.1)

"BLD",4,"PRE")
LBRVENV
"BLD",4,"QUES",0)
^9.62^4^3
"BLD",4,"QUES",2,0)
PRE1
"BLD",4,"QUES",2,1)
SX^PRI:Primary Station;LEG:Legacy Station^K:X'?3A X
"BLD",4,"QUES",2,"A")
Select Appropriate Station Type
"BLD",4,"QUES",2,"M")
I $$PATCH^XPDUTL("LBR*2.5*2")=1,($P($G(^XTMP("LBRV",0)),";",2)'="") K DIR
"BLD",4,"QUES",2,"Q")
 
"BLD",4,"QUES",2,"Q1",0)
^^10^10^2971114^^^^
"BLD",4,"QUES",2,"Q1",1,0)
You should select 'PRI' for PRIMARY STATION if you are:
"BLD",4,"QUES",2,"Q1",2,0)
    a. single site that is not integrating or consolidating
"BLD",4,"QUES",2,"Q1",3,0)
    b. a single site this is not part of a multi-site facility OR
"BLD",4,"QUES",2,"Q1",4,0)
    c. the host VistA site for a multi-site facility (this includes
"BLD",4,"QUES",2,"Q1",5,0)
       the host VistA site for the old division sites, i.e. St. Louis)
"BLD",4,"QUES",2,"Q1",6,0)
You should select 'LEG' for LEGACY if you are part of a multi-site
"BLD",4,"QUES",2,"Q1",7,0)
facility consolidating at this time, but NOT the VistA host site.
"BLD",4,"QUES",2,"Q1",8,0)
If you select 'LEG' a temporary global, XTMP("LBRY" will be created.
"BLD",4,"QUES",2,"Q1",9,0)
This global should then be moved to the primary station's system for
"BLD",4,"QUES",2,"Q1",10,0)
further integration during Patch 3.
"BLD",4,"QUES",2,"QQ")

"BLD",4,"QUES",3,0)
PRE2
"BLD",4,"QUES",3,1)
Y
"BLD",4,"QUES",3,"A")

"BLD",4,"QUES",3,"M")
D CNF^LBRVENV S:QUIT XPDQUIT=2 K DIR
"BLD",4,"QUES",4,0)
PRE3
"BLD",4,"QUES",4,1)
P^LBRY(680.6,:AEZ
"BLD",4,"QUES",4,"A")
Select LIBRARY PARAMETERS SITE NAME
"BLD",4,"QUES",4,"M")
I $$PATCH^XPDUTL("LBR*2.5*2")=1 K DIR
"BLD",4,"QUES","B","PRE1",2)

"BLD",4,"QUES","B","PRE2",3)

"BLD",4,"QUES","B","PRE3",4)

"BLD",4,"REQB",0)
^9.611^2^1
"BLD",4,"REQB",2,0)
LBR*2.5*4^1
"BLD",4,"REQB","B","LBR*2.5*4",2)

"FIA",680)
LOCAL SERIALS
"FIA",680,0)
^LBRY(680,
"FIA",680,0,0)
680PI
"FIA",680,0,1)
y^n^f^^^^n
"FIA",680,0,10)

"FIA",680,0,11)

"FIA",680,0,"RLRO")

"FIA",680,0,"VR")
2.5^LBR
"FIA",680,680)
0
"FIA",680,680.01)
0
"FIA",680,680.014)
0
"FIA",680,680.02)
0
"FIA",680,680.03)
0
"FIA",680,680.04)
0
"FIA",680,680.05)
0
"FIA",680,680.08)
0
"FIA",680,680.09)
0
"FIA",680,680.11)
0
"FIA",680,680.12)
0
"FIA",680,680.14)
0
"FIA",680.4)
NAME
"FIA",680.4,0)
^LBRY(680.4,
"FIA",680.4,0,0)
680.4I
"FIA",680.4,0,1)
y^n^f^^^^n
"FIA",680.4,0,10)

"FIA",680.4,0,11)

"FIA",680.4,0,"RLRO")

"FIA",680.4,0,"VR")
2.5^LBR
"FIA",680.4,680.4)
0
"FIA",680.5)
TITLE AUTHORITY
"FIA",680.5,0)
^LBRY(680.5,
"FIA",680.5,0,0)
680.5I
"FIA",680.5,0,1)
y^y^f^^^^n
"FIA",680.5,0,10)

"FIA",680.5,0,11)

"FIA",680.5,0,"RLRO")

"FIA",680.5,0,"VR")
2.5^LBR
"FIA",680.5,680.5)
0
"FIA",680.5,680.53)
0
"FIA",680.5,680.54)
0
"FIA",680.6)
LIBRARY PARAMETERS
"FIA",680.6,0)
^LBRY(680.6,
"FIA",680.6,0,0)
680.6I
"FIA",680.6,0,1)
y^n^f^^^^n
"FIA",680.6,0,10)

"FIA",680.6,0,11)

"FIA",680.6,0,"RLRO")

"FIA",680.6,0,"VR")
2.5^LBR
"FIA",680.6,680.6)
0
"FIA",680.7)
LBRY ITEM PLACEMENT LOCATION
"FIA",680.7,0)
^LBRY(680.7,
"FIA",680.7,0,0)
680.7I
"FIA",680.7,0,1)
y^n^f^^^^n
"FIA",680.7,0,10)

"FIA",680.7,0,11)

"FIA",680.7,0,"RLRO")

"FIA",680.7,0,"VR")
2.5^LBR
"FIA",680.7,680.7)
0
"FIA",681)
LBRY DISPOSITION
"FIA",681,0)
^LBRY(681,
"FIA",681,0,0)
681I
"FIA",681,0,1)
y^n^f^^^^n
"FIA",681,0,10)

"FIA",681,0,11)

"FIA",681,0,"RLRO")

"FIA",681,0,"VR")
2.5^LBR
"FIA",681,681)
0
"FIA",681,681.02)
0
"FIA",682)
LBRY ISSUE
"FIA",682,0)
^LBRY(682,
"FIA",682,0,0)
682I
"FIA",682,0,1)
y^n^f^^^^n
"FIA",682,0,10)

"FIA",682,0,11)

"FIA",682,0,"RLRO")

"FIA",682,0,"VR")
2.5^LBR
"FIA",682,682)
0
"FIA",682,682.02)
0
"FIA",682,682.04)
0
"FIA",682.1)
LIBRARY TRANSACTIONS
"FIA",682.1,0)
^LBRY(682.1,
"FIA",682.1,0,0)
682.1I
"FIA",682.1,0,1)
y^y^f^^^^n
"FIA",682.1,0,10)

"FIA",682.1,0,11)

"FIA",682.1,0,"RLRO")

"FIA",682.1,0,"VR")
2.5^LBR
"FIA",682.1,682.1)
0
"FIA",682.1,682.11)
0
"FIA",682.1,682.129)
0
"FIA",682.1,682.131)
0
"FIA",682.1,682.132)
0
"FIA",682.1,682.135)
0
"FIA",682.1,682.138)
0
"INI")
LBRVPRE
"INIT")
LBRVPOST
"KRN",.4,43,-1)
0^7
"KRN",.4,43,0)
LBRY GAPS LIST^2951003.1532^^680^^^2960507
"KRN",.4,43,"F",2)
"TITLE: ";C1;S3~.01;C8;L70;X~"GAPS: ";C1;S~9.8,.01;C1;X~
"KRN",.4,43,"H")
Local Gaps List
"KRN",.4,45,-1)
0^23
"KRN",.4,45,0)
LBRY SUBSCRIPTION/VENDOR^2951012.1259^^681^^^2960521
"KRN",.4,45,"F",1)
-680,^LBRY(680,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(681,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;"LOCAL SERIALS TITLE:"~-680,"TITLE: ";C1;S3~
"KRN",.4,45,"F",2)
-680,.01;C8;X;L70~-680,-680.5,^LBRY(680.5,^^S I(100,0)=D0 S DIP(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;"TITLE:"~
"KRN",.4,45,"F",3)
-680,-680.5,"ISSN: ";C1~-680,-680.5,7;C7;X~-680,"CATEGORY: ";C1~-680,4,.01;C11;X;W~-680,"RENEWAL DATE (HC): ";C1~-680,10.5;C20;X~-680,"FUNDING SOURCE: ";C1~
"KRN",.4,45,"F",4)
-680,8;C17;X~-680,"LAST YEAR'S UNIT COST: ";C1~-680,8.4;C24;X;D2~-680,"SUBSCRIPTION PERIOD: ";C1~-680,10.8;C22;X;D1~-680,"COPIES ORDERED: ";C1~-680,7;C17;X~
"KRN",.4,45,"F",5)
-680,"UNIT COST: ";C1~-680,8.3;C12;X;D2~-680,"SERVICE CHARGE: ";C1~-680,8.5;C17;X~-680,"TOTAL COST: ";C1~-680,8.6;C13;X;L10~
"KRN",.4,45,"H")
Current Subscriptions by Vendor
"KRN",.4,49,-1)
0^9
"KRN",.4,49,0)
LBRY MEDICAL HOLDINGS^2951003.1044^^680^^^2970326
"KRN",.4,49,"F",1)
"TITLE: ";C1;S3~.01;C8;X;L70~-680.5,^LBRY(680.5,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TITLE:"~
"KRN",.4,49,"F",2)
-680.5,"FORMERLY: ";C1~-680.5,8;C11;X;L68~-680.5,"CONTINUED BY: ";C1~-680.5,9;C15;X;L64~-680.5,"ISSN: ";C1~-680.5,7;C7;X~-680.5,"GENERAL NOTES";C1;S~
"KRN",.4,49,"F",3)
-680.5,4,.01;C1;X~"LOCATION: ";C1;S~1.1;C11;X~"DETAILED HOLDINGS";C1;S~9.1,.01;C1;X~
"KRN",.4,49,"H")
Detailed Medical Titles
"KRN",.4,55,-1)
0^29
"KRN",.4,55,0)
LBRY ADMIN TITLES^2951003.153^^680^^^2970327
"KRN",.4,55,"F",1)
"TITLE: ";C1;S3~.01;C8;X;L70~-680.5,^LBRY(680.5,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TITLE:"~
"KRN",.4,55,"F",2)
-680.5,"ISSN: ";C1~-680.5,7;C7;X~"COPIES ORDERED: ";C1~7.1;C17;X~"UNIT COST: ";C30~8.3;C42;X;D2;R11~"TOTAL COST: ";C30~8.6;C42;X;D2;R11~
"KRN",.4,55,"H")
Administrative Titles
"KRN",.4,60,-1)
0^6
"KRN",.4,60,0)
LBRY FYI LIST^2951003.1531^^680^^^2960520
"KRN",.4,60,"F",2)
"TITLE: ";C1;S3~.01;C8;X;L70~"LOCATION: ";C1~1.1;C11;X~"CATEGORY: ";C1~4,.01;C11;X~"FOR-YOUR-INFORMATION:";C1~1.5;C5;X~
"KRN",.4,60,"H")
Titles with For-Your-Information
"KRN",.4,100,-1)
0^24
"KRN",.4,100,0)
LBRY TITLE ALPHABETICAL^2940527.1509^^680^^^2980317^
"KRN",.4,100,"F",1)
"TITLE: ";C1;S3~.01;C8;X;L70~-680.5,^LBRY(680.5,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TITLE:"~
"KRN",.4,100,"F",2)
-680.5,"FORMERLY: ";C1~-680.5,8;C11;X;L68~-680.5,"CONTINUED BY: ";C1~-680.5,9;C15;X;L64~-680.5,"ISSN: ";C1~-680.5,7;C7;X~-680.5,"GENERAL NOTES: ";C1;S~
"KRN",.4,100,"F",3)
-680.5,4,.01;C1;X~"LOCATION: ";C1;S~1.1;C11;X~"MICROFILM HOLDINGS: ";C1;S~2.1;C1;X~"DETAILED HOLDINGS: ";C1;S~9.1,.01;C1;X~
"KRN",.4,100,"H")
Local Serials Titles Complete Holdings
"KRN",.4,101,-1)
0^25
"KRN",.4,101,0)
LBRY TITLE ALPHABETICAL BRIEF^2940527.1522^^680^^^2980317^
"KRN",.4,101,"F",1)
"TITLE: ";C1;S3~.01;C8;X;L70~-680.5,^LBRY(680.5,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TITLE:"~
"KRN",.4,101,"F",2)
-680.5,"FORMERLY: ";C1~-680.5,8;C11;X;L68~-680.5,"CONTINUED BY: ";C1~-680.5,9;C15;X;L64~-680.5,"ISSN: ";C1~-680.5,7;C7;X~-680.5,"GENERAL NOTES: ";C1;S~
"KRN",.4,101,"F",3)
-680.5,4,.01;C1;X~"LOCATION: ";C1;S~1.1;C11;X~"MICROFILM HOLDINGS: ";C1;S~2.1;C1;X~"SUMMARY HOLDINGS: ";C1;S~9;C19;X~
"KRN",.4,101,"H")
Local Serials Titles Brief Holdings
"KRN",.4,103,-1)
0^28
"KRN",.4,103,0)
LBRY TITLES DUE RENEWAL^2951012.1233^^681^^^2961002
"KRN",.4,103,"F",1)
"PORTION OF FILE: ";X;S~-680,^LBRY(680,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(681,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,103,"F",2)
-680,-680.5,^LBRY(680.5,^^S I(100,0)=D0 S DIP(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;".01:"~-680,-680.5,.05;C18;X~
"KRN",.4,103,"F",3)
-680,-680.5,"TITLE: ";S;C1~-680,-680.5,.01;X;C9;L70~-680,-680.5,"ISSN: ";C1~-680,-680.5,7;X;C7~"VENDOR: ";C30~1.4;C38;X~"PLACEMENT: ";C1~1.1;X;C12~
"KRN",.4,103,"F",4)
-680,^LBRY(680,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(681,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~-680,"RENEWAL DATE (HC): ";C30~
"KRN",.4,103,"F",5)
-680,10.5;X;C49~-680,"SUBSCRIPTION PERIOD: ";C1~-680,10.8;X;C22~"COPY NUMBER: ";C30~1;X;C48~
"KRN",.4,103,"H")
SERIALS RENEWAL LIST
"KRN",.401,22,-1)
0^20
"KRN",.401,22,0)
LBRY TITLE LOCATION^2960412.1603^^680^^^2970326
"KRN",.401,22,2,0)
^.4014^2^2
"KRN",.401,22,2,1,0)
680^^PLACEMENT^#"1.1^;C5;"LOCATION: "^^^^^4
"KRN",.401,22,2,1,"ASK")
1
"KRN",.401,22,2,1,"CM")
S Y(1)=$S($D(^LBRY(680,D0,1)):^(1),1:"") S X=$S('$D(^LBRY(680.7,+$P(Y(1),U,3),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,22,2,1,"F")
MED LIAz^MED LIB
"KRN",.401,22,2,1,"GET")
S Y(1)=$S($D(^LBRY(680,D0,1)):^(1),1:"") S X=$S('$D(^LBRY(680.7,+$P(Y(1),U,3),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,22,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,22,2,1,"T")
z^
"KRN",.401,22,2,1,"TXT")
PLACEMENT not null
"KRN",.401,22,2,2,0)
680^^TITLE^".01^^^^^^4
"KRN",.401,22,2,2,"CM")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,22,2,2,"GET")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,22,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,22,2,2,"TXT")
TITLE not null
"KRN",.401,22,2,"B",680,1)

"KRN",.401,22,2,"B",680,2)

"KRN",.401,23,-1)
0^4
"KRN",.401,23,0)
LBRY GAPS LIST^2960507.1616^^680^^^2960507
"KRN",.401,23,2,0)
^.4014^1^1
"KRN",.401,23,2,1,0)
680^^TITLE^]".01^^^^^^4
"KRN",.401,23,2,1,"ASK")
1
"KRN",.401,23,2,1,"CM")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,23,2,1,"F")
,z^-
"KRN",.401,23,2,1,"GET")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,23,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,23,2,1,"T")
z^
"KRN",.401,23,2,1,"TXT")
TITLE not null
"KRN",.401,23,2,"B",680,1)

"KRN",.401,25,-1)
0^18
"KRN",.401,25,0)
LBRY SUBSCRIPTION/VENDOR^2960507.1522^^681^^^2960521
"KRN",.401,25,2,0)
^.4014^2^2
"KRN",.401,25,2,1,0)
681^1.4^VENDOR^#^;C5^^^^^4
"KRN",.401,25,2,1,"ASK")
1
"KRN",.401,25,2,1,"F")
Qz^R
"KRN",.401,25,2,1,"GET")
S DISX(1)=$P($G(^LBRY(681,D0,1)),U,5)
"KRN",.401,25,2,1,"IX")
^LBRY(681,"AD",^LBRY(681,^2
"KRN",.401,25,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,25,2,1,"SER")
0.3750^0.2727
"KRN",.401,25,2,1,"T")
S^S
"KRN",.401,25,2,1,"TXT")
VENDOR not null
"KRN",.401,25,2,2,0)
681^^LOCAL SERIALS TITLE^@".02^^^^^^4
"KRN",.401,25,2,2,3,0)
^.401419^1^1
"KRN",.401,25,2,2,3,1,0)
OVF0^9.2
"KRN",.401,25,2,2,3,1,"OVF0")
S I(0,0)=$S($D(D0):D0,1:""),Y(1)=$S($D(^LBRY(681,D0,0)):^(0),1:""),D0=$P(Y(1),U,2) S:'$D(^LBRY(680,+D0,0)) D0=-1 S Y(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"")
"KRN",.401,25,2,2,3,"B","OVF0",1)

"KRN",.401,25,2,2,"CM")
X DPP(2,"OVF0",9.2) S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) I D0>0 S DISX(2)=X
"KRN",.401,25,2,2,"GET")
X DPP(2,"OVF0",9.2) S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) I D0>0 S DISX(2)=X
"KRN",.401,25,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,25,2,2,"TXT")
LOCAL SERIALS TITLE not null
"KRN",.401,25,2,"B",681,1)

"KRN",.401,25,2,"B",681,2)

"KRN",.401,29,-1)
0^6
"KRN",.401,29,0)
LBRY MEDICAL HOLDINGS^2960507.153^^680^^^2970326
"KRN",.401,29,2,0)
^.4014^2^2
"KRN",.401,29,2,1,0)
680.01^.01^CATEGORY^@'^^^^^^3
"KRN",.401,29,2,1,1,0)
^.40141^1^1
"KRN",.401,29,2,1,1,1,0)
680^4
"KRN",.401,29,2,1,1,"B",680,1)

"KRN",.401,29,2,1,"F")
Lz^M^M (MEDICAL)
"KRN",.401,29,2,1,"GET")
S DISX(1)=$P($G(^LBRY(680,D0,4,D1,0)),U,1)
"KRN",.401,29,2,1,"QCON")
I DISX(1)="M"
"KRN",.401,29,2,1,"T")
M^M^M (MEDICAL)
"KRN",.401,29,2,1,"TXT")
CATEGORY equals M (MEDICAL)
"KRN",.401,29,2,2,0)
680^^TITLE^".01^^^^^^4
"KRN",.401,29,2,2,"ASK")
1
"KRN",.401,29,2,2,"CM")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,29,2,2,"F")
@z^A
"KRN",.401,29,2,2,"GET")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,29,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,29,2,2,"T")
B^B
"KRN",.401,29,2,2,"TXT")
TITLE not null
"KRN",.401,29,2,"B",680,2)

"KRN",.401,29,2,"B",680.01,1)

"KRN",.401,30,-1)
0^5
"KRN",.401,30,0)
LBRY MEDICAL BY SUBJECT^2960403.1026^^680^^^2960429
"KRN",.401,30,2,0)
^.4014^3^3
"KRN",.401,30,2,1,0)
680.01^.01^CATEGORY^@'^^^^^^3
"KRN",.401,30,2,1,1,0)
^.40141^1^1
"KRN",.401,30,2,1,1,1,0)
680^4
"KRN",.401,30,2,1,1,"B",680,1)

"KRN",.401,30,2,1,"GET")
S DISX(1)=$P($G(^LBRY(680,D0,4,D1,0)),U,1)
"KRN",.401,30,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,30,2,1,"TXT")
CATEGORY not null
"KRN",.401,30,2,2,0)
680.03^^SUBJECT^#".01^;C5;"SUBJECT: "^^^^^4
"KRN",.401,30,2,2,1,0)
^.40141^1^1
"KRN",.401,30,2,2,1,1,0)
680^3
"KRN",.401,30,2,2,1,"B",680,1)

"KRN",.401,30,2,2,"CM")
S Y(1)=$S($D(^LBRY(680,D0,3,D1,0)):^(0),1:"") S X=$S('$D(^LBRY(680.3,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D1>0 S DISX(2)=X
"KRN",.401,30,2,2,"GET")
S Y(1)=$S($D(^LBRY(680,D0,3,D1,0)):^(0),1:"") S X=$S('$D(^LBRY(680.3,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D1>0 S DISX(2)=X
"KRN",.401,30,2,2,"IX")
^LBRY(680,"C",^LBRY(680,^2
"KRN",.401,30,2,2,"PTRIX")
^LBRY(680.3,"B",
"KRN",.401,30,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,30,2,2,"TXT")
SUBJECT not null
"KRN",.401,30,2,3,0)
680^^TITLE^".01^^^^^^4
"KRN",.401,30,2,3,"CM")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(3)=X
"KRN",.401,30,2,3,"GET")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(3)=X
"KRN",.401,30,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,30,2,3,"TXT")
TITLE not null
"KRN",.401,30,2,"B",680,3)

"KRN",.401,30,2,"B",680.01,1)

"KRN",.401,30,2,"B",680.03,2)

"KRN",.401,42,-1)
0^10
"KRN",.401,42,0)
LBRY MISSING ISSUES LIST^2960422.1636^^682^^^2960507
"KRN",.401,42,2,0)
^.4014^4^4
"KRN",.401,42,2,1,0)
682.04^1^ISSUE STATUS^^^^^^^3
"KRN",.401,42,2,1,1,0)
^.40141^1^1
"KRN",.401,42,2,1,1,1,0)
682^4
"KRN",.401,42,2,1,1,"B",682,1)

"KRN",.401,42,2,1,"F")
3.99999^4^4 (NOT RECEIVED)
"KRN",.401,42,2,1,"GET")
S DISX(1)=$P($G(^LBRY(682,D0,4,D1,0)),U,2)
"KRN",.401,42,2,1,"QCON")
I DISX(1)=4
"KRN",.401,42,2,1,"T")
4^4^4 (NOT RECEIVED)
"KRN",.401,42,2,1,"TXT")
ISSUE STATUS equals 4 (NOT RECEIVED)
"KRN",.401,42,2,2,0)
681^1.4^VENDOR^"^^^^^^4
"KRN",.401,42,2,2,1,0)
^.40141^1^1
"KRN",.401,42,2,2,1,1,0)
682^4
"KRN",.401,42,2,2,1,"B",682,1)

"KRN",.401,42,2,2,2,0)
^.401418^1^1
"KRN",.401,42,2,2,2,1,0)
682.04^100^681^LBRY(681,^0
"KRN",.401,42,2,2,2,1,"RCOD")
S I(1,0)=D1 S I(0,0)=D0 S Y(1)=$S($D(^LBRY(682,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S D(0)=+X
"KRN",.401,42,2,2,2,"B",682.04,1)

"KRN",.401,42,2,2,"ASK")
1
"KRN",.401,42,2,2,"F")
@z^A
"KRN",.401,42,2,2,"GET")
S DISX(2)=$P($G(^LBRY(681,D0,1)),U,5)
"KRN",.401,42,2,2,"QCON")
I (DISX(2)]]"@z")&(DISX(2)']]"B")
"KRN",.401,42,2,2,"T")
B^B
"KRN",.401,42,2,2,"TXT")
VENDOR from A to B
"KRN",.401,42,2,3,0)
682^^LOCAL SERIALS TITLE^".02^^^^^^4
"KRN",.401,42,2,3,3,0)
^.401419^1^1
"KRN",.401,42,2,3,3,1,0)
OVF0^9.2
"KRN",.401,42,2,3,3,1,"OVF0")
S I(0,0)=$S($D(D0):D0,1:""),Y(1)=$S($D(^LBRY(682,D0,0)):^(0),1:""),D0=$P(Y(1),U,2) S:'$D(^LBRY(680,+D0,0)) D0=-1 S Y(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"")
"KRN",.401,42,2,3,3,"B","OVF0",1)

"KRN",.401,42,2,3,"ASK")
1
"KRN",.401,42,2,3,"CM")
X DPP(3,"OVF0",9.2) S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) I D0>0 S DISX(3)=X
"KRN",.401,42,2,3,"F")
LHz^LI
"KRN",.401,42,2,3,"GET")
X DPP(3,"OVF0",9.2) S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) I D0>0 S DISX(3)=X
"KRN",.401,42,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,42,2,3,"T")
LIJ^LIJ
"KRN",.401,42,2,3,"TXT")
LOCAL SERIALS TITLE not null
"KRN",.401,42,2,4,0)
682^1^JOURNAL DATE^^^^^^^1
"KRN",.401,42,2,4,"ASK")
1
"KRN",.401,42,2,4,"F")
2950900.99999^SEP 1 95^9/1/95
"KRN",.401,42,2,4,"GET")
S DISX(4)=$P($G(^LBRY(682,D0,1)),U,1)
"KRN",.401,42,2,4,"IX")
^LBRY(682,"D",^LBRY(682,^2
"KRN",.401,42,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,42,2,4,"SER")
0.0000^0.0000
"KRN",.401,42,2,4,"T")
2960301^MAR 1 96^3/1/96
"KRN",.401,42,2,4,"TXT")
JOURNAL DATE not null
"KRN",.401,42,2,"B",681,2)

"KRN",.401,42,2,"B",682,3)

"KRN",.401,42,2,"B",682,4)

"KRN",.401,42,2,"B",682.04,1)

"KRN",.401,75,-1)
0^19
"KRN",.401,75,0)
LBRY TITLE ALPHABETICAL^2960402.175^^680^^^2980317
"KRN",.401,75,2,0)
^.4014^1^1
"KRN",.401,75,2,1,0)
680^^TITLE^".01^^^^^^4
"KRN",.401,75,2,1,"CM")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,75,2,1,"GET")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,75,2,1,"IX")
^LBRY(680,"B",^LBRY(680,^2
"KRN",.401,75,2,1,"PTRIX")
^LBRY(680.5,"B",
"KRN",.401,75,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,75,2,1,"SER")
0.0118^0.0118
"KRN",.401,75,2,1,"TXT")
TITLE not null
"KRN",.401,75,2,"B",680,1)

"KRN",.401,87,-1)
0^21
"KRN",.401,87,0)
LBRY TITLES DUE RENEWAL^2960507.1642^^681^^^2961002
"KRN",.401,87,2,0)
^.4014^2^2
"KRN",.401,87,2,1,0)
680^^TITLE^"".01^^^^^^4
"KRN",.401,87,2,1,2,0)
^.401418^1^1
"KRN",.401,87,2,1,2,1,0)
681^100^680^LBRY(680,^0
"KRN",.401,87,2,1,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^LBRY(681,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,87,2,1,2,"B",681,1)

"KRN",.401,87,2,1,"ASK")
1
"KRN",.401,87,2,1,"CM")
S Y(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,87,2,1,"F")
,z^-
"KRN",.401,87,2,1,"GET")
S Y(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,87,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,87,2,1,"T")
z^
"KRN",.401,87,2,1,"TXT")
TITLE not null
"KRN",.401,87,2,2,0)
680^10.5^RENEWAL DATE (HC)^"^^^^^^1
"KRN",.401,87,2,2,2,0)
^.401418^1^1
"KRN",.401,87,2,2,2,1,0)
681^100^680^LBRY(680,^0
"KRN",.401,87,2,2,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^LBRY(681,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,87,2,2,2,"B",681,1)

"KRN",.401,87,2,2,"GET")
S DISX(2)=$P($G(^LBRY(680,D0,10)),U,5)
"KRN",.401,87,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,87,2,2,"TXT")
RENEWAL DATE (HC) not null
"KRN",.401,87,2,"B",680,1)

"KRN",.401,87,2,"B",680,2)

"KRN",.401,87,"%D",0)
^^1^1^2960507^^^
"KRN",.401,87,"%D",1,0)
Sort by the title and the renewal date
"KRN",.401,90,-1)
0^2
"KRN",.401,90,0)
LBRY ADMIN TITLES^2970327.1705^^680^^^2970327
"KRN",.401,90,2,0)
^.4014^3^3
"KRN",.401,90,2,1,0)
681^1.3^CATEGORY OF COPY^"^^^^^^3
"KRN",.401,90,2,1,2,0)
^.401418^1^1
"KRN",.401,90,2,1,2,1,0)
680^100^681^LBRY(681,^1
"KRN",.401,90,2,1,2,1,"RCOD")
S I(0,0)=$S($D(D0):D0,1:"") X DPP(1,"OVF0",9.2) S X="" S D0=I(0,0)
"KRN",.401,90,2,1,2,"B",680,1)

"KRN",.401,90,2,1,3,0)
^.401419^1^1
"KRN",.401,90,2,1,3,1,0)
OVF0^9.2
"KRN",.401,90,2,1,3,1,"OVF0")
S D=0 F  S (D,D0)=$O(^LBRY(681,"C",I(0,0),D)) S:D="" (D,D0)=-1 Q:D'>0  I $D(^LBRY(681,D,0)) S X=$P(^(0),U,1) D M Q:'$D(D)  S D=D0
"KRN",.401,90,2,1,3,"B","OVF0",1)

"KRN",.401,90,2,1,"F")
@z^A^A (ADMINISTRATIVE)
"KRN",.401,90,2,1,"GET")
S DISX(1)=$P($G(^LBRY(681,D0,1)),U,4)
"KRN",.401,90,2,1,"QCON")
I DISX(1)="A"
"KRN",.401,90,2,1,"T")
A^A^A (ADMINISTRATIVE)
"KRN",.401,90,2,1,"TXT")
CATEGORY OF COPY equals A (ADMINISTRATIVE)
"KRN",.401,90,2,2,0)
681^^PLACEMENT OF ITEM^""1.1^^^^^^4
"KRN",.401,90,2,2,2,0)
^.401418^1^1
"KRN",.401,90,2,2,2,1,0)
680^100^681^LBRY(681,^1
"KRN",.401,90,2,2,2,1,"RCOD")
S I(0,0)=$S($D(D0):D0,1:"") X DPP(2,"OVF0",9.2) S X="" S D0=I(0,0)
"KRN",.401,90,2,2,2,"B",680,1)

"KRN",.401,90,2,2,3,0)
^.401419^1^1
"KRN",.401,90,2,2,3,1,0)
OVF0^9.2
"KRN",.401,90,2,2,3,1,"OVF0")
S D=0 F  S (D,D0)=$O(^LBRY(681,"C",I(0,0),D)) S:D="" (D,D0)=-1 Q:D'>0  I $D(^LBRY(681,D,0)) S X=$P(^(0),U,1) D M Q:'$D(D)  S D=D0
"KRN",.401,90,2,2,3,"B","OVF0",1)

"KRN",.401,90,2,2,"ASK")
1
"KRN",.401,90,2,2,"CM")
S Y(101)=$S($D(^LBRY(681,D0,1)):^(1),1:"") S X=$S('$D(^LBRY(680.7,+$P(Y(101),U,2),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,90,2,2,"F")
,z^-
"KRN",.401,90,2,2,"GET")
S Y(101)=$S($D(^LBRY(681,D0,1)):^(1),1:"") S X=$S('$D(^LBRY(680.7,+$P(Y(101),U,2),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,90,2,2,"QCON")
I DISX(2)]]",z"
"KRN",.401,90,2,2,"T")
z^
"KRN",.401,90,2,2,"TXT")
PLACEMENT OF ITEM from -
"KRN",.401,90,2,3,0)
680^^TITLE^".01^^^^^^4
"KRN",.401,90,2,3,"ASK")
1
"KRN",.401,90,2,3,"CM")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(3)=X
"KRN",.401,90,2,3,"F")
,z^-
"KRN",.401,90,2,3,"GET")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(3)=X
"KRN",.401,90,2,3,"QCON")
I DISX(3)]]",z"
"KRN",.401,90,2,3,"T")
z^
"KRN",.401,90,2,3,"TXT")
TITLE from -
"KRN",.401,90,2,"B",680,3)

"KRN",.401,90,2,"B",681,1)

"KRN",.401,90,2,"B",681,2)

"KRN",.401,90,"%D",0)
^^1^1^2970327^^^^
"KRN",.401,90,"%D",1,0)
LBRY ADMIN TITLES
"KRN",.401,90,"DIPT")

"KRN",.402,22,-1)
0^10
"KRN",.402,22,0)
LBRY PREDICT INSERT^2950829.1312^^682^^^2980317^
"KRN",.402,22,"DR",1,682)
.02////^S X=LBRYLOC;.04///^S X=LBRYPTR;1////^S X=LBJDT;1.1////^S X=LBVOL;1.2////^S X=LBISS;1.7////^S X="P";
"KRN",.402,23,-1)
0^11
"KRN",.402,23,0)
LBRY SITE^2970408.1158^^680.6^^^2970416
"KRN",.402,23,"DR",1,680.6)
.01;.07;.02//^S X="AOBC";.05;.03;.08;
"KRN",.402,24,-1)
0^5
"KRN",.402,24,0)
LBRY D2^2960202.1102^^681^^^2980317
"KRN",.402,24,"DR",1,681)
.02////^S X=LBRYLOC;.04///^S X=LBRYPTR;S LBRYSH=1;1;I X'="",$P(^LBRY(681,DA,1),U)'=X S $P(^LBRY(681,DA,1),U,3)=DUZ;I X="ToC" S $P(^LBRY(681,DA,1),U,6)=1,Y="@2";1.6;I X'="y" S Y="@1";S $P(^LBRY(681,DA,1),U,5)="";1.7;S Y="@3";@1;
"KRN",.402,24,"DR",1,681,1)
S:$P($G(^LBRY(681,DA,1)),U,7)="y" Y="@3";1.4//^I $D(LBRYPTR) S:$S('$D(^LBRY(680.6,LBRYPTR,0))#2:0,$P(^(0),U,2)']"":0,1:1) X=$P(^(0),U,2);@3;1.1;1.3;I X="A" S Y="@5";1.5//SHELVED;I X=3 S LBRYSH=1;I X=1!(X=2) S LBRYSH="";S Y="@4";@5;
"KRN",.402,24,"DR",1,681,2)
1.5//ROUTED;I X=1!(X=2) S LBRYSH="";I X=3 S LBRYSH=1;@4;1.9;Q;1.95;I LBRYSH=1 S Y="@6";@2;2;@6;
"KRN",.402,24,"DR",2,681.02)
.01;@11;1;I X="" W !,"Please enter ROUTING ORDER." S Y="@11";
"KRN",.402,25,-1)
0^3
"KRN",.402,25,0)
LBRY CONTACTS ROUTING^2970520.1629^^680.4^^^2980109
"KRN",.402,25,"DIAB",10,0,680.4,0)
.03;"STREET ADDRESS"
"KRN",.402,25,"DIAB",11,0,680.4,0)
.04;"P.O. BOX or APARTMENT NUMBER"
"KRN",.402,25,"DR",1,680.4)
1///^S X=LBRYPTR;.01;.02;I X="" S Y="@9";S MS="",SRV=$P(^LBRY(680.4,DA,0),U,2);I SRV?.N,$D(^DIC(49,SRV)) S MS=$P(^DIC(49,SRV,0),U,8);S:MS="" Y="@9";W !,"MAIL SYMBOL: ",MS;@9;.03STREET ADDRESS~;.04P.O. BOX or APARTMENT NUMBER~;.05;
"KRN",.402,25,"DR",1,680.4,1)
.06;.07;.08;
"KRN",.402,26,-1)
0^4
"KRN",.402,26,0)
LBRY D1^2950829.1315^^681^^^2980317^
"KRN",.402,26,"DR",1,681)
.02////^S X=LBRYLOC;.04///^S X=LBRYPTR;1///^S X=1;3///^S X=DUZ;1.6;I X'="y" S Y="@1";S $P(^LBRY(681,DA,1),U,5)="";1.7;S Y="@2";@1;S:$P($G(^LBRY(681,DA,1)),U,7)="y" Y="@2";
"KRN",.402,26,"DR",1,681,1)
1.4//^I $D(LBRYPTR) S:$S('$D(^LBRY(680.6,LBRYPTR,0))#2:0,$P(^(0),U,2)']"":0,1:1) X=$P(^(0),U,2);@2;1.1;1.3;I X="A" S Y="@3";1.5//SHELVED;I X=3 S Y="@5";S Y="@4";@3;1.5//ROUTED;I X=3 S Y="@5";@4;2;@5;
"KRN",.402,26,"DR",1,681,2)
1.8///^S X=$S($D(LBRYPTR):LBRYPTR,1:"");
"KRN",.402,26,"DR",2,681.02)
.01;@10;1;I X="" W !,"Please enter ROUTING ORDER." S Y="@10";
"KRN",.402,27,-1)
0^2
"KRN",.402,27,0)
LBRY CHECK-IN SETUP^2940301.1319^^680.5^^^2980115^
"KRN",.402,27,"DIAB",1,1,680.53,0)
ALL
"KRN",.402,27,"DR",1,680.5)
.01;I $P(^LBRY(680.5,LBRYCLS,0),U,5)="N" S Y="@1";.05////^S X="L";@1;11;7;10;1;3;2;4;5;6;
"KRN",.402,27,"DR",2,680.53)
.01
"KRN",.402,28,-1)
0^7
"KRN",.402,28,0)
LBRY INSERT^2961018.1429^^682^^^2980317
"KRN",.402,28,"DR",1,682)
.02////^S X=LBRYLOC;.04///^S X=LBRYPTR;1;Q;I X="" S Y="@2";I '$P(^LBRY(682,DA,1),U,5) S Y="";S PAST1="",PAST=$O(^LBRY(682,"A1",LBRYLOC,9999999-X));I PAST="" S Y="@1";S PAST1=$O(^LBRY(682,"A1",LBRYLOC,PAST,0));
"KRN",.402,28,"DR",1,682,1)
S PAST1=$P(^LBRY(682,PAST1,1),U,2);@1;1.1//^S X=PAST1;1.2;1.7////^S X=LBRYIF;@2;
"KRN",.402,29,-1)
0^8
"KRN",.402,29,0)
LBRY JOURNAL DATE EDIT^2951103.1057^^682^^^2970603
"KRN",.402,29,"DR",1,682)
1;1.1;1.2;1.4;1.7;4;
"KRN",.402,29,"DR",2,682.04)
1;I X>3 S Y="@1";I $G(LDATE)="" D DAS^LBRYRTX;5//^S X=LDATE;@1;
"KRN",.402,30,-1)
0^9
"KRN",.402,30,0)
LBRY LOCAL SETUP^2970115.1536^^680^^^2980317
"KRN",.402,30,"DR",1,680)
.02;I X]"" S Y="";I X="",$G(LBRYCLS)'="",$P($G(^LBRY(680.5,LBRYCLS,0)),U,2)="" S $P(^LBRY(680.5,LBRYCLS,0),U,2)=1;.04///^S X=LBRYPTR;@2;7;I X="" W !,"To properly set up this TITLE enter INITIAL COPIES ORDERED." S Y="@2";1.5;.03;
"KRN",.402,30,"DR",1,680,1)
12.3;
"KRN",.402,31,-1)
0^1
"KRN",.402,31,0)
LBRY BIBLIOGRAPHIC ENTRY^2950725.1001^^680^^^2970714^
"KRN",.402,31,"DIAB",1,1,680.01,0)
ALL
"KRN",.402,31,"DIAB",1,1,680.02,0)
ALL
"KRN",.402,31,"DR",1,680)
1.1;2.1;2.5;3;4;5.2;I X'="D" S Y=6;5.3;5.4;6;9;9.1;9.4;9.8;9.85;10.5;10.6;10.7;10.8;
"KRN",.402,31,"DR",2,680.01)
.01:1
"KRN",.402,31,"DR",2,680.02)
.01
"KRN",.402,31,"DR",2,680.03)
.01;.02///^S X=DT;
"KRN",.402,32,-1)
0^6
"KRN",.402,32,0)
LBRY FINANCIAL ENTRY^2950829.1317^^680^^^2960423^
"KRN",.402,32,"DR",1,680)
8;8.3;8.4;8.5;8.7;8.8;
"KRN",.402,66,-1)
0^12
"KRN",.402,66,0)
LBRY TITLE SETUP^2960626.1227^^680.5^^^2960626
"KRN",.402,66,"DR",1,680.5)
.01;.05////^S X="N";11;7;10;1;3;2;I X["*" W $C(7),!,"  This publisher is not in national file, please re-enter to input." S Y=2;4;5;6;8;9;.03;.04;12;18;17;
"KRN",.402,66,"DR",2,680.53)
.01;I X["*" W $C(7),!,"  This index is not in national file, please re-enter to input." S Y=.01;
"KRN",.402,67,-1)
0^14
"KRN",.402,67,0)
LBRYINUP^2951027.1332^@^680.8^^@^2980417
"KRN",.402,67,"DR",1,680.8)
.01///^S X=TIT;1///^S X=COD;
"KRN",3.6,29,-1)
0^3
"KRN",3.6,29,0)
LBRYMANL^UNABLE TO PROCESS TITLE
"KRN",3.6,29,1,0)
^^3^3^2960429^^
"KRN",3.6,29,1,1,0)
Title transaction from FORUM was unable to be processed because
"KRN",3.6,29,1,2,0)
of title differences between your system and FORUM.  Please
"KRN",3.6,29,1,3,0)
process title from option, 'Process Titles from FORUM Manually'.
"KRN",3.6,29,3,0)
^^4^4^2960429^^
"KRN",3.6,29,3,1,0)
This bulletin is to notify the appropriate Library users when
"KRN",3.6,29,3,2,0)
transactions received from FORUM cannot be processed because
"KRN",3.6,29,3,3,0)
of title problems.  Users receiving this message should process
"KRN",3.6,29,3,4,0)
the title manually.
"KRN",19,403,-1)
2^13
"KRN",19,403,0)
LBRY MANAGER^Library Management^^M^5^^^^^^^10^^1^1
"KRN",19,403,10,0)
^19.01PI^9^9
"KRN",19,403,10,2,0)
404^LSM^2
"KRN",19,403,10,2,"^")
LBRY SER MGT
"KRN",19,403,10,3,0)
405^LSP^4
"KRN",19,403,10,3,"^")
LBRY SITE PRMTERS
"KRN",19,403,10,4,0)
443^GLP^1
"KRN",19,403,10,4,"^")
LBRY OVERVIEW
"KRN",19,403,10,6,0)
680^TSK^6
"KRN",19,403,10,6,"^")
LBRY TRAN REPORT
"KRN",19,403,10,7,0)
681^MAN^7
"KRN",19,403,10,7,"^")
LBRY TRAN MAN
"KRN",19,403,10,8,0)
684^RES^8
"KRN",19,403,10,8,"^")
LBRY RESUB LOCAL
"KRN",19,403,10,9,0)
785^ACP^9
"KRN",19,403,10,9,"^")
LBRY ASSIGN COPY
"KRN",19,403,"U")
LIBRARY MANAGEMENT
"KRN",19,404,-1)
2^57
"KRN",19,404,0)
LBRY SER MGT^Serials Management^^M^.5^^^^^^^^^1
"KRN",19,404,10,0)
^19.01PI^6^4
"KRN",19,404,10,2,0)
407^RST^5
"KRN",19,404,10,2,"^")
LBRY RMV SER TITLE
"KRN",19,404,"U")
SERIALS MANAGEMENT
"KRN",19,405,-1)
0^46
"KRN",19,405,0)
LBRY SITE PRMTERS^Library Site Parameters^^R^^^^^^^^
"KRN",19,405,1,0)
^^2^2^2940202^^^^
"KRN",19,405,1,1,0)
Asks for basic information about the library.  It must be completed
"KRN",19,405,1,2,0)
before any other options are used.
"KRN",19,405,25)
EN1^LBRYSITE
"KRN",19,405,"U")
LIBRARY SITE PARAMETERS
"KRN",19,407,-1)
0^34
"KRN",19,407,0)
LBRY RMV SER TITLE^Remove Serial Title from Database^^R^^^^^^^^
"KRN",19,407,1,0)
^^3^3^2880512^^
"KRN",19,407,1,1,0)
THIS OPTION WILL COMPLETELY ERASE A TITLE FROM THE LOCAL SERIALS FILE.
"KRN",19,407,1,2,0)
USE WITH EXTREME CAUTION AS THERE CAN BE NO RECOVERING OF ANY DATA AFTER
"KRN",19,407,1,3,0)
THIS OPTION IS USED.
"KRN",19,407,25)
LBRYRST
"KRN",19,407,"U")
REMOVE SERIAL TITLE FROM DATAB
"KRN",19,414,-1)
0^12
"KRN",19,414,0)
LBRY ITEM PLACEMENT LOCATION^Item Placement Location Entries^^R^^^^^^^^
"KRN",19,414,1,0)
^^3^3^2880212^^^^
"KRN",19,414,1,1,0)
Allows creating or modifying the LBRY ITEM PLACEMENT LOCATION file entries.
"KRN",19,414,1,2,0)
This is the file with the list of locations where incoming copies will
"KRN",19,414,1,3,0)
be placed.
"KRN",19,414,20)

"KRN",19,414,25)
LBRYLIPL
"KRN",19,414,"U")
ITEM PLACEMENT LOCATION ENTRIE
"KRN",19,418,-1)
0^49
"KRN",19,418,0)
LBRY TITLES DUE RENEWAL^Titles Due for Renewal^^R^^^^^^^^Library
"KRN",19,418,1,0)
^^1^1^2951012^^^^
"KRN",19,418,1,1,0)
A report of all local, current subscriptions which are due to be renewed.
"KRN",19,418,25)
DFR^LBRYRPT
"KRN",19,418,"U")
TITLES DUE FOR RENEWAL
"KRN",19,419,-1)
0^47
"KRN",19,419,0)
LBRY SUBJECT EDIT^Subject Setup^^R^^^^^^^^
"KRN",19,419,1,0)
^^2^2^2880822^^^^
"KRN",19,419,1,1,0)
Enter or edit library Subject file.  The Subject file contains the list
"KRN",19,419,1,2,0)
of subjects for each title.
"KRN",19,419,25)
SUB^LBRYEDR
"KRN",19,419,99)
53744,33169
"KRN",19,419,"U")
SUBJECT SETUP
"KRN",19,423,-1)
0^50
"KRN",19,423,0)
LBRY TITLES LOCATION^Local Titles by Location^^R^^^^^^^^
"KRN",19,423,1,0)
^^2^2^2880513^^^^
"KRN",19,423,1,1,0)
A report of all the serials in the local collection arranged by the
"KRN",19,423,1,2,0)
location where each is housed.
"KRN",19,423,25)
LTL^LBRYRPT
"KRN",19,423,"U")
LOCAL TITLES BY LOCATION
"KRN",19,424,-1)
0^51
"KRN",19,424,0)
LBRY TITLES VENDOR^Local Titles by Vendor^^R^^^^^^^^
"KRN",19,424,1,0)
^^2^2^2951013^^^^
"KRN",19,424,1,1,0)
A report of all the subscriptions placed with each vendor used by
"KRN",19,424,1,2,0)
the local library.
"KRN",19,424,25)
LTV^LBRYRPT
"KRN",19,424,"U")
LOCAL TITLES BY VENDOR
"KRN",19,443,-1)
0^58
"KRN",19,443,0)
LBRY OVERVIEW^General Library Package Information^^A^^^^^^^^^^1
"KRN",19,443,1,0)
^^1^1^2880425^
"KRN",19,443,1,1,0)
Help information about Library package.
"KRN",19,443,20)
S XQH="LBRY MANAGEMENT" D EN^XQH
"KRN",19,443,"U")
GENERAL LIBRARY PACKAGE INFORM
"KRN",19,680,-1)
0^55
"KRN",19,680,0)
LBRY TRAN REPORT^Library Transaction Report^^R^^^^^^^^Library^^1
"KRN",19,680,1,0)
^^3^3^2970902^^^
"KRN",19,680,1,1,0)
This option is to be used by the Library Manager to check on the
"KRN",19,680,1,2,0)
status of the Library Transaction TaskMan options and when they
"KRN",19,680,1,3,0)
last ran.
"KRN",19,680,20)
W @IOF
"KRN",19,680,25)
LBRYREPT
"KRN",19,680,"U")
LIBRARY TRANSACTION REPORT
"KRN",19,681,-1)
0^52
"KRN",19,681,0)
LBRY TRAN MAN^Process Titles from FORUM Manually^^R^^^^^^^^
"KRN",19,681,1,0)
^^4^4^2950928^^
"KRN",19,681,1,1,0)
This option should be used for those transactions that did not
"KRN",19,681,1,2,0)
automatically update the local serials system because of title
"KRN",19,681,1,3,0)
differences.  It allows the user to review and override the
"KRN",19,681,1,4,0)
installation of a title.
"KRN",19,681,25)
LBRYPRCM
"KRN",19,681,"U")
PROCESS TITLES FROM FORUM MANU
"KRN",19,684,-1)
0^33
"KRN",19,684,0)
LBRY RESUB LOCAL^Resubmit Local Titles to FORUM^^R^^^^^^^^Library^^1
"KRN",19,684,1,0)
^^2^2^2971103^^^
"KRN",19,684,1,1,0)
This option is to allow the users to resubmit local titles to
"KRN",19,684,1,2,0)
FORUM after changes have been made.
"KRN",19,684,20)
W @IOF
"KRN",19,684,25)
LBRYRSLT
"KRN",19,684,"U")
RESUBMIT LOCAL TITLES TO FORUM
"KRN",19,868,-1)
1^59
"KRN",19,868,0)
LBRY ASSIGN COPY
"ORD",0,9.8)
9.8;;1;RTNF^XPDTA;RTNE^XPDTA
"ORD",0,9.8,0)
ROUTINE
"ORD",2,3.6)
3.6;2;1;;BUL^XPDTA1;;BULE1^XPDIA1;;;BULDEL^XPDIA1
"ORD",2,3.6,0)
BULLETIN
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",10,-1)
1^1
"PKG",10,0)
Library^LBR^LIBRARY SERIALS PACKAGE^LBRY MANAGEMENT
"PKG",10,22,0)
^9.49I^1^1
"PKG",10,22,1,0)
2.5^2960227^
"PKG",10,22,1,"PAH",1,0)
2
"PKG",10,22,1,"PAH",1,1,0)
^^2^2^2980417
"PKG",10,22,1,"PAH",1,1,1,0)
Patch to version 2.5 which allows for Primary Stations and Legacy Stations
"PKG",10,22,1,"PAH",1,1,2,0)
on one system.
"PRE")
LBRVENV
"QUES","PRE1",0)
SX^PRI:Primary Station;LEG:Legacy Station^K:X'?3A X
"QUES","PRE1","?")
 
"QUES","PRE1","?",1)
You should select 'PRI' for PRIMARY STATION if you are:
"QUES","PRE1","?",2)
    a. single site that is not integrating or consolidating
"QUES","PRE1","?",3)
    b. a single site this is not part of a multi-site facility OR
"QUES","PRE1","?",4)
    c. the host VistA site for a multi-site facility (this includes
"QUES","PRE1","?",5)
       the host VistA site for the old division sites, i.e. St. Louis)
"QUES","PRE1","?",6)
You should select 'LEG' for LEGACY if you are part of a multi-site
"QUES","PRE1","?",7)
facility consolidating at this time, but NOT the VistA host site.
"QUES","PRE1","?",8)
If you select 'LEG' a temporary global, XTMP("LBRY" will be created.
"QUES","PRE1","?",9)
This global should then be moved to the primary station's system for
"QUES","PRE1","?",10)
further integration during Patch 3.
"QUES","PRE1","??")

"QUES","PRE1","A")
Select Appropriate Station Type
"QUES","PRE1","M")
I $$PATCH^XPDUTL("LBR*2.5*2")=1,($P($G(^XTMP("LBRV",0)),";",2)'="") K DIR
"QUES","PRE2",0)
Y
"QUES","PRE2","A")

"QUES","PRE2","M")
D CNF^LBRVENV S:QUIT XPDQUIT=2 K DIR
"QUES","PRE3",0)
P^LBRY(680.6,:AEZ
"QUES","PRE3","A")
Select LIBRARY PARAMETERS SITE NAME
"QUES","PRE3","M")
I $$PATCH^XPDUTL("LBR*2.5*2")=1 K DIR
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
64
"RTN","LBRNTEG")
0^80^B6384213
"RTN","LBRNTEG",1,0)
LBRNTEG ;ISC/XTSUMBLD KERNEL - Package checksum checker ;2980417.131437
"RTN","LBRNTEG",2,0)
 ;;0.0;
"RTN","LBRNTEG",3,0)
 ;;7.3;2980417.131437
"RTN","LBRNTEG",4,0)
 S XT4="I 1",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","LBRNTEG",5,0)
CONT F XT1=1:1 S XT2=$T(ROU+XT1) Q:XT2=""  S X=$P(XT2," ",1),XT3=$P(XT2,";",3) X XT4 I $T W !,X X ^%ZOSF("TEST") S:'$T XT3=0 X:XT3 ^%ZOSF("RSUM") W ?10,$S('XT3:"Routine not in UCI",XT3'=Y:"Calculated "_$C(7)_Y_", off by "_(Y-XT3),1:"ok")
"RTN","LBRNTEG",6,0)
 ;
"RTN","LBRNTEG",7,0)
 K %1,%2,%3,X,Y,XT1,XT2,XT3,XT4 Q
"RTN","LBRNTEG",8,0)
ONE S XT4="I $D(^UTILITY($J,X))",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","LBRNTEG",9,0)
 W !,"Check a subset of routines:" K ^UTILITY($J) X ^%ZOSF("RSEL")
"RTN","LBRNTEG",10,0)
 W ! G CONT
"RTN","LBRNTEG",11,0)
ROU ;;
"RTN","LBRNTEG",12,0)
LBRVCON1 ;;1736458
"RTN","LBRNTEG",13,0)
LBRVCON2 ;;5378394
"RTN","LBRNTEG",14,0)
LBRVCON3 ;;4149693
"RTN","LBRNTEG",15,0)
LBRVCONE ;;7888569
"RTN","LBRNTEG",16,0)
LBRVCONP ;;5235492
"RTN","LBRNTEG",17,0)
LBRVCONS ;;11215315
"RTN","LBRNTEG",18,0)
LBRVCONV ;;5327082
"RTN","LBRNTEG",19,0)
LBRVENV ;;13208030
"RTN","LBRNTEG",20,0)
LBRVPOST ;;3430997
"RTN","LBRNTEG",21,0)
LBRVPRE ;;1923549
"RTN","LBRNTEG",22,0)
LBRYASK ;;824576
"RTN","LBRNTEG",23,0)
LBRYCK ;;7601799
"RTN","LBRNTEG",24,0)
LBRYCK0 ;;6143275
"RTN","LBRNTEG",25,0)
LBRYCK1 ;;7564037
"RTN","LBRNTEG",26,0)
LBRYCK2 ;;3380583
"RTN","LBRNTEG",27,0)
LBRYCK3 ;;4042561
"RTN","LBRNTEG",28,0)
LBRYCK4 ;;4847194
"RTN","LBRNTEG",29,0)
LBRYCK5 ;;1060240
"RTN","LBRNTEG",30,0)
LBRYCSE ;;8225582
"RTN","LBRNTEG",31,0)
LBRYCSE0 ;;4269662
"RTN","LBRNTEG",32,0)
LBRYEDI ;;2786243
"RTN","LBRNTEG",33,0)
LBRYEDR ;;745338
"RTN","LBRNTEG",34,0)
LBRYET2 ;;2817787
"RTN","LBRNTEG",35,0)
LBRYET3 ;;305134
"RTN","LBRNTEG",36,0)
LBRYFINP ;;1852777
"RTN","LBRNTEG",37,0)
LBRYHIS ;;5214801
"RTN","LBRNTEG",38,0)
LBRYHIS0 ;;4620445
"RTN","LBRNTEG",39,0)
LBRYHIS1 ;;2943451
"RTN","LBRNTEG",40,0)
LBRYHIS2 ;;1076551
"RTN","LBRNTEG",41,0)
LBRYHSF ;;358716
"RTN","LBRNTEG",42,0)
LBRYKILL ;;445143
"RTN","LBRNTEG",43,0)
LBRYLIPL ;;598584
"RTN","LBRNTEG",44,0)
LBRYLST ;;6694558
"RTN","LBRNTEG",45,0)
LBRYPG ;;4647668
"RTN","LBRNTEG",46,0)
LBRYPG0 ;;1205180
"RTN","LBRNTEG",47,0)
LBRYPG1 ;;3097170
"RTN","LBRNTEG",48,0)
LBRYPG2 ;;1604176
"RTN","LBRNTEG",49,0)
LBRYPG3 ;;1089607
"RTN","LBRNTEG",50,0)
LBRYPPR ;;6188814
"RTN","LBRNTEG",51,0)
LBRYPPR0 ;;3722049
"RTN","LBRNTEG",52,0)
LBRYPRC1 ;;4388901
"RTN","LBRNTEG",53,0)
LBRYPRCM ;;5501305
"RTN","LBRNTEG",54,0)
LBRYPRCS ;;5100079
"RTN","LBRNTEG",55,0)
LBRYPRG ;;485387
"RTN","LBRNTEG",56,0)
LBRYREPT ;;729389
"RTN","LBRNTEG",57,0)
LBRYRET ;;6570752
"RTN","LBRNTEG",58,0)
LBRYRET0 ;;3511821
"RTN","LBRNTEG",59,0)
LBRYRET1 ;;3697953
"RTN","LBRNTEG",60,0)
LBRYRET2 ;;4053489
"RTN","LBRNTEG",61,0)
LBRYRLE ;;940784
"RTN","LBRNTEG",62,0)
LBRYRPT ;;7924989
"RTN","LBRNTEG",63,0)
LBRYRPT0 ;;8512665
"RTN","LBRNTEG",64,0)
LBRYRPT1 ;;3016877
"RTN","LBRNTEG",65,0)
LBRYRRS ;;1600780
"RTN","LBRNTEG",66,0)
LBRYRRS0 ;;3107111
"RTN","LBRNTEG",67,0)
LBRYRSLT ;;1288003
"RTN","LBRNTEG",68,0)
LBRYRST ;;6118367
"RTN","LBRNTEG",69,0)
LBRYRTX ;;6356016
"RTN","LBRNTEG",70,0)
LBRYSITE ;;3423451
"RTN","LBRNTEG",71,0)
LBRYSTA ;;3302953
"RTN","LBRNTEG",72,0)
LBRYUTL ;;2336264
"RTN","LBRVCONV")
0^79^B11400056
"RTN","LBRVCONV",1,0)
LBRVCONV ;SSI/ALA-Convert data for consolidating ;[ 09/18/97  4:40 PM ]
"RTN","LBRVCONV",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRVCONV",3,0)
 I $G(LBRWSTA)="" D MUL
"RTN","LBRVCONV",4,0)
 I $G(QUIT) G EXIT
"RTN","LBRVCONV",5,0)
COPY ;  Copy data into scratch global
"RTN","LBRVCONV",6,0)
 NEW %X,%Y
"RTN","LBRVCONV",7,0)
 S %X="^LBRY(680,",%Y="^XTMP(""LBRY"",LBRWSTA,680," D %XY^%RCR
"RTN","LBRVCONV",8,0)
 D MES^XPDUTL("File 680 copied")
"RTN","LBRVCONV",9,0)
 S %X="^LBRY(681,",%Y="^XTMP(""LBRY"",LBRWSTA,681," D %XY^%RCR
"RTN","LBRVCONV",10,0)
 D MES^XPDUTL("File 681 copied")
"RTN","LBRVCONV",11,0)
 S %X="^LBRY(682,",%Y="^XTMP(""LBRY"",LBRWSTA,682," D %XY^%RCR
"RTN","LBRVCONV",12,0)
 D MES^XPDUTL("File 682 copied")
"RTN","LBRVCONV",13,0)
 S %X="^LBRY(680.5,",%Y="^XTMP(""LBRY"",LBRWSTA,680.5," D %XY^%RCR
"RTN","LBRVCONV",14,0)
 D MES^XPDUTL("File 680.5 copied")
"RTN","LBRVCONV",15,0)
 S %X="^LBRY(680.3,",%Y="^XTMP(""LBRY"",LBRWSTA,680.3," D %XY^%RCR
"RTN","LBRVCONV",16,0)
 D MES^XPDUTL("File 680.3 copied")
"RTN","LBRVCONV",17,0)
 S %X="^LBRY(680.4,",%Y="^XTMP(""LBRY"",LBRWSTA,680.4," D %XY^%RCR
"RTN","LBRVCONV",18,0)
 D MES^XPDUTL("File 680.4 copied")
"RTN","LBRVCONV",19,0)
 S %X="^LBRY(680.7,",%Y="^XTMP(""LBRY"",LBRWSTA,680.7," D %XY^%RCR
"RTN","LBRVCONV",20,0)
 D MES^XPDUTL("File 680.7 copied")
"RTN","LBRVCONV",21,0)
 S %X="^LBRY(680.6,",%Y="^XTMP(""LBRY"",LBRWSTA,680.6," D %XY^%RCR
"RTN","LBRVCONV",22,0)
 D MES^XPDUTL("File 680.6 copied")
"RTN","LBRVCONV",23,0)
 K %X,%Y
"RTN","LBRVCONV",24,0)
 ;
"RTN","LBRVCONV",25,0)
 ;  Convert pointers of other pointed to files that are
"RTN","LBRVCONV",26,0)
 ;  not being moved and convert them to text with a '*'
"RTN","LBRVCONV",27,0)
 ;  includes Service and Vendor pointers
"RTN","LBRVCONV",28,0)
 ;
"RTN","LBRVCONV",29,0)
TF S TDA=0 F I="B","C","D","E","F","H" K ^XTMP("LBRY",LBRWSTA,680.5,I)
"RTN","LBRVCONV",30,0)
 ;
"RTN","LBRVCONV",31,0)
EN S LDA=0 D MES^XPDUTL("Converting pointers in File 680.4")
"RTN","LBRVCONV",32,0)
NME S LDA=$O(^XTMP("LBRY",LBRWSTA,680.4,LDA)) G VN:LDA'>0
"RTN","LBRVCONV",33,0)
 S SRV=$P(^XTMP("LBRY",LBRWSTA,680.4,LDA,0),U,2)
"RTN","LBRVCONV",34,0)
 I SRV'="",SRV>0 D
"RTN","LBRVCONV",35,0)
 . S DIC(0)="N",DIC="^DIC(49,",X=SRV D ^DIC
"RTN","LBRVCONV",36,0)
 . I +Y>0 S SERV=$P(Y,U,2),$P(^XTMP("LBRY",LBRWSTA,680.4,LDA,0),U,2)=SERV_"*"
"RTN","LBRVCONV",37,0)
 G NME
"RTN","LBRVCONV",38,0)
 ;
"RTN","LBRVCONV",39,0)
VN ;
"RTN","LBRVCONV",40,0)
 ;
"RTN","LBRVCONV",41,0)
NX S LDA=0 D MES^XPDUTL("Converting pointers in File 681")
"RTN","LBRVCONV",42,0)
NVN S LDA=$O(^XTMP("LBRY",LBRWSTA,681,LDA)) G US:LDA'>0
"RTN","LBRVCONV",43,0)
 S USR=$P($G(^XTMP("LBRY",LBRWSTA,681,LDA,1)),U,3)
"RTN","LBRVCONV",44,0)
 I USR'="",USR>0,$G(^VA(200,USR,0))'="" S USER=$P(^VA(200,USR,0),U),$P(^XTMP("LBRY",LBRWSTA,681,LDA,1),U,3)=USER_"*"
"RTN","LBRVCONV",45,0)
 G NVN
"RTN","LBRVCONV",46,0)
 ;
"RTN","LBRVCONV",47,0)
US S LDA=0 D MES^XPDUTL("Converting pointers in File 682")
"RTN","LBRVCONV",48,0)
USR S LDA=$O(^XTMP("LBRY",LBRWSTA,682,LDA)) G EXIT:LDA'>0
"RTN","LBRVCONV",49,0)
 S USR=$P($G(^XTMP("LBRY",LBRWSTA,682,LDA,1)),U,6)
"RTN","LBRVCONV",50,0)
 I USR'="",USR>0,$G(^VA(200,USR,0))'="" S USER=$P(^VA(200,USR,0),U)_"*",$P(^XTMP("LBRY",LBRWSTA,682,LDA,1),U,6)=USER
"RTN","LBRVCONV",51,0)
 S ODA=0 F  S ODA=$O(^XTMP("LBRY",LBRWSTA,682,LDA,4,ODA)) Q:ODA'>0  D
"RTN","LBRVCONV",52,0)
 . S USR=$P($G(^XTMP("LBRY",LBRWSTA,682,LDA,4,ODA,0)),U,4)
"RTN","LBRVCONV",53,0)
 . I USR'="",USR>0,$G(^VA(200,USR,0))'="" S USER=$P(^VA(200,USR,0),U)_"*",$P(^XTMP("LBRY",LBRWSTA,682,LDA,4,ODA,0),U,4)=USER
"RTN","LBRVCONV",54,0)
 . S USR=$P($G(^XTMP("LBRY",LBRWSTA,682,LDA,4,ODA,0)),U,8)
"RTN","LBRVCONV",55,0)
 . I USR'="",USR>0,$G(^VA(200,USR,0))'="" S USER=$P(^VA(200,USR,0),U)_"*",$P(^XTMP("LBRY",LBRWSTA,682,LDA,4,ODA,0),U,8)=USER
"RTN","LBRVCONV",56,0)
 G USR
"RTN","LBRVCONV",57,0)
 ;
"RTN","LBRVCONV",58,0)
EXIT K LDA,VND,SRV,SERV,VEND,USR,USER,ODA,QUIT
"RTN","LBRVCONV",59,0)
 Q
"RTN","LBRVCONV",60,0)
MUL ;  Multiple site set
"RTN","LBRVCONV",61,0)
 N DIC,DIE,DA
"RTN","LBRVCONV",62,0)
 S QUIT=0,DIC(0)="AEQZM",DIC="^LBRY(680.6," D ^DIC
"RTN","LBRVCONV",63,0)
 I $D(DUOUT)!$D(DTOUT) S QUIT=1 Q
"RTN","LBRVCONV",64,0)
 I Y<1 W !!,"You must select site name" G MUL
"RTN","LBRVCONV",65,0)
 S LBRVY=+Y,DA=LBRVY,DIC="^LBRY(680.6,",DIE=DIC
"RTN","LBRVCONV",66,0)
 S LBRWSTA=$P(Y(0),U,7)
"RTN","LBRVCONV",67,0)
 I LBRWSTA'="",$L(LBRWSTA)=5 Q
"RTN","LBRVCONV",68,0)
 S DR=.07 D ^DIE
"RTN","LBRVCONV",69,0)
 S LBRWSTA=$P(^LBRY(680.6,DA,0),U,7)
"RTN","LBRVCONV",70,0)
 K Y
"RTN","LBRVCONV",71,0)
 Q
"RTN","LBRVENV")
0^65^B27056647
"RTN","LBRVENV",1,0)
LBRVENV ;SSI/ALA-Environmential Check Program ;[ 04/10/98  2:38 PM ]
"RTN","LBRVENV",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRVENV",3,0)
EN ;
"RTN","LBRVENV",4,0)
 I '$G(DUZ)!($G(DUZ(0))'["@") W !,"USER 'DUZ' VARIABLES **NOT** CORRECTLY DEFINED.  CONFIRM THAT DUZ(0)='@'.  THEN D ^XUP." S XPDQUIT=1 Q
"RTN","LBRVENV",5,0)
 I $$VERSION^XPDUTL("LBRY")<2.5 S QUIT=0 D  G ABRT:QUIT
"RTN","LBRVENV",6,0)
 . I $$VERSION^XPDUTL("LBR")>2 Q
"RTN","LBRVENV",7,0)
 . W !!,"VERSION 2.5 OF LIBRARY HAS NOT BEEN LOADED",! S QUIT=1
"RTN","LBRVENV",8,0)
 I '$D(^XPD(9.7,"B","LBR*2.5*1")) D  G ABRT
"RTN","LBRVENV",9,0)
 . W !!,"*** Patch LBR*2.5*1 must be installed prior to loading"
"RTN","LBRVENV",10,0)
 . W !,"this patch.  This install will now abort.",!
"RTN","LBRVENV",11,0)
 I $$PATCH^XPDUTL("LBR*2.5*2")=1,($D(^XTMP("LBRV",0))) Q
"RTN","LBRVENV",12,0)
 D STA1 Q:$G(XPDQUIT)=1
"RTN","LBRVENV",13,0)
 D STA2 Q:$G(XPDQUIT)=1
"RTN","LBRVENV",14,0)
 W !!,">> Environment check complete and okay."
"RTN","LBRVENV",15,0)
EXIT K LBRSTNN,LBRWSTN,LBRPT4,LBRVA,J,II,LSTN,GSTN,QUIT,LBRVDT
"RTN","LBRVENV",16,0)
 Q
"RTN","LBRVENV",17,0)
CNF ;  Ask for confirmation
"RTN","LBRVENV",18,0)
 S QUIT=0
"RTN","LBRVENV",19,0)
 I $G(XPDQUES("PRE1"))="" K DIR Q
"RTN","LBRVENV",20,0)
 S PRE1ANS=$G(XPDQUES("PRE1"))
"RTN","LBRVENV",21,0)
 I PRE1ANS="LEG" S PRE1ANS="LEGACY STATION"
"RTN","LBRVENV",22,0)
 I PRE1ANS="PRI" S PRE1ANS="PRIMARY STATION"
"RTN","LBRVENV",23,0)
 S DIR(0)="Y"
"RTN","LBRVENV",24,0)
 S DIR("A")="Are you sure you are a "_PRE1ANS
"RTN","LBRVENV",25,0)
 S DIR("A",1)="  "
"RTN","LBRVENV",26,0)
 S DIR("A",2)="     Press ENTER if you wish to stop the install and"
"RTN","LBRVENV",27,0)
 S DIR("A",3)="     verify which type of system you are."
"RTN","LBRVENV",28,0)
 S DIR("A",4)="  "
"RTN","LBRVENV",29,0)
 S DIR("A",5)="     Press 'Y' if you have answered correctly and"
"RTN","LBRVENV",30,0)
 S DIR("A",6)="     wish to continue with the install."
"RTN","LBRVENV",31,0)
 S DIR("A",7)="  "
"RTN","LBRVENV",32,0)
 S DIR("?")="Press ENTER to abort install, 'Y' to continue"
"RTN","LBRVENV",33,0)
 S DIR("B")="NO" D ^DIR
"RTN","LBRVENV",34,0)
 I Y=0 S (DIRUT,DUOUT)=1
"RTN","LBRVENV",35,0)
 I $D(DIRUT) S (QUIT,XPDQUIT)=1
"RTN","LBRVENV",36,0)
 K DIR,Y,PRE1ANS,X
"RTN","LBRVENV",37,0)
 Q
"RTN","LBRVENV",38,0)
STA1 ;  Get station number and identify records to be moved
"RTN","LBRVENV",39,0)
 S LBRSTNN=$$KSP^XUPARAM("INST")
"RTN","LBRVENV",40,0)
 S DIC(0)="NZ",DIC="^DIC(4,",X=LBRSTNN D ^DIC
"RTN","LBRVENV",41,0)
 I Y<0 D  S XPDQUIT=1 Q
"RTN","LBRVENV",42,0)
 . D MES^XPDUTL("Error found in the Kernel System Parameters file and/or the Institution file.")
"RTN","LBRVENV",43,0)
 . D MES^XPDUTL("Verify that the STATION NUMBER and the DEFAULT INSTITUTION fields are defined correctly.")
"RTN","LBRVENV",44,0)
 K Y,DIC
"RTN","LBRVENV",45,0)
 D GETS^DIQ(4,LBRSTNN,99,"I","LBRVA")
"RTN","LBRVENV",46,0)
 S LBRWSTN=@($Q(LBRVA))
"RTN","LBRVENV",47,0)
 Q
"RTN","LBRVENV",48,0)
STA2 F II=1:1:15 S GSTN=$P($T(STN+II),";;",2) D
"RTN","LBRVENV",49,0)
 . F J=1:1 S LSTN=$P(GSTN,U,J) Q:LSTN=""  D
"RTN","LBRVENV",50,0)
 .. I $P(LSTN,";")=LBRWSTN S LBRWSTA=$P(LSTN,";",2)
"RTN","LBRVENV",51,0)
 I $G(LBRWSTA)="" D  S XPDQUIT=1 Q
"RTN","LBRVENV",52,0)
 . D MES^XPDUTL("No match found for Site Code/Station Number.")
"RTN","LBRVENV",53,0)
 . D MES^XPDUTL("Please reference the 'Installation Guide/Release Notes' documentation's")
"RTN","LBRVENV",54,0)
 . D MES^XPDUTL("Pre-Installation Checklist on page 6 for further instructions")
"RTN","LBRVENV",55,0)
 . D MES^XPDUTL("on correctly setting up your environment.")
"RTN","LBRVENV",56,0)
 . D MES^XPDUTL("  ")
"RTN","LBRVENV",57,0)
 S LBRVDT=$$FMADD^XLFDT(DT,365)
"RTN","LBRVENV",58,0)
 S ^XTMP("LBRV",0)=LBRVDT_"^"_DT_"^"_LBRWSTA
"RTN","LBRVENV",59,0)
 Q
"RTN","LBRVENV",60,0)
ABRT S XPDQUIT=1
"RTN","LBRVENV",61,0)
 Q
"RTN","LBRVENV",62,0)
STN ;  Identify station number and 5-letter code
"RTN","LBRVENV",63,0)
 ;;101;ZZCEN^459;HIHON^463;AKANC^402;METOG^405;VTWHI^436;MTFHA^437;NDFAR^438;SDSIO^442;WYCHY^452;KSWIC^460;DEWIL^500;NYALB^501;NMALQ
"RTN","LBRVENV",64,0)
 ;;502;LAALE^503;PAALT^504;TXAMA^505;WAAME^506;MIANN^508;GAATL^509;GAAUL^512;MDBAL^513;NYBAT^514;NYBTH^515;MIBAT^516;FLBAY^
"RTN","LBRVENV",65,0)
 ;;517;WVBEC^518;MABED^519;TXBIG^520;MSBIL^521;ALBIR^522;TXBON^523;MABOS^525;MABRO^526;NYBRX^527;NYBRK^528;NYBUF^529;PABUT^531;IDBOI
"RTN","LBRVENV",66,0)
 ;;532;NYCAN^533;NYCAS^534;SCCHA^535;ILCHL^537;ILCHW^538;OHCHI^539;OHCIN^540;WVCLA^541;OHCLE^542;PACOA^543;MOCOL^544;SCCOL^
"RTN","LBRVENV",67,0)
 ;;546;FLMIA^548;FLPAL^549;TXDAL^550;ILDAN^552;OHDAY^553;MIDET^554;CODEN^555;IADEM^556;ILNCH^557;GADUB^558;NCQMI^561;NJEAS^562;PAERI
"RTN","LBRVENV",68,0)
 ;;564;ARFAY^565;NCFAY^566;MDFHO^567;COFLY^568;SDFME^569;INFWA^570;CAFRE^573;FLGAI^574;NEGRI^575;COGJT^578;ILHIN^579;SDHOT^
"RTN","LBRVENV",69,0)
 ;;580;TXHOU^581;WVHUN^583;ININD^584;IAIAC^585;MIIRO^586;MSJAC^589;MOKCY^590;VAHAM^671A4;TXKER^592;IAKNO^594;FLLAK^595;PALEB^596;KYLEL
"RTN","LBRVENV",70,0)
 ;;597;NELIN^598;ARLIT^599;CALIV^600;CALBC^603;KYLOU^604;NJLYO^605;CALOL^607;WIMAD^608;NHMAN^609;ILMAR^610;INMAR^611;TXMAR^
"RTN","LBRVENV",71,0)
 ;;612;CAMAR^613;WVMAR^614;TNMEM^617;MTMIL^618;MNMIN^619;ALMON^620;NYMON^621;TNMOH^622;TNMUR^623;OKMUS^626;TNNAS^627;CTNEW^629;LANOL
"RTN","LBRVENV",72,0)
 ;;630;NYNYO^631;MANOR^632;NYNOR^635;OKOKC^636;NEOMA^637;NCASH^640;CAPAM^641;MDPER^642;PAPHI^644;AZPHO^645;PAPHD^646;PAPUN^
"RTN","LBRVENV",73,0)
 ;;647;MOPOP^648;ORPOR^649;AZPRE^650;RIPRO^652;VARIC^653;ORROS^654;NVREN^655;MISAG^656;MNSCL^657;MOSLJ^658;VASAL^659;NCSAL^660;UTSLC
"RTN","LBRVENV",74,0)
 ;;662;CASFR^663;WASEA^664;CASDI^665;CASEP^666;WYSHE^667;LASHR^668;WASPO^670;NYSYR^671;TXSAN^672;PRSJU^673;FLTAM^674;TXTEM^
"RTN","LBRVENV",75,0)
 ;;676;WITOM^677;KSTOP^678;AZTUC^679;ALTUS^680;ALTUK^685;TXWAC^686;KSLEA^687;WAWAL^688;DCWAS^689;CTWHA^691;CALAW^692;ORWHI^693;PAWIB
"RTN","LBRVENV",76,0)
 ;;695;WIMIL^750;MABOP^752;CALOC^757;OHCOL^520A0;MSGUL^525A4;MAWRX^541A0;OHCBR^596A4;KYLEC^598A0;ARNLI^646A0;PAPAS^
"RTN","LBRVENV",77,0)
 ;;648A4;WAVAN^657A0;MOSLC^691A0;CALAB^593;NVLAS^
"RTN","LBRVPOST")
0^66^B7672975
"RTN","LBRVPOST",1,0)
LBRVPOST ;SSI/ALA-Post Library Patch Clean-Up ;[ 04/15/98  3:45 PM ]
"RTN","LBRVPOST",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRVPOST",3,0)
 S %=$$PARCP^XPDUTL("PRE1","PRE")
"RTN","LBRVPOST",4,0)
 I %=0 K % D RC G EXIT
"RTN","LBRVPOST",5,0)
 K X,DIK,DA
"RTN","LBRVPOST",6,0)
STA N %
"RTN","LBRVPOST",7,0)
 S %=$$NEWCP^XPDUTL("MOVE","MOV^LBRVPOST")
"RTN","LBRVPOST",8,0)
INDX ;reindex cross-references for File#680.6 
"RTN","LBRVPOST",9,0)
 F LBRDI="B","C" K ^LBRY(680.6,LBRDI)
"RTN","LBRVPOST",10,0)
 S DIK="^LBRY(680.6," D IXALL^DIK
"RTN","LBRVPOST",11,0)
FIL ;  File the site into the data files
"RTN","LBRVPOST",12,0)
 S %=$$PARCP^XPDUTL("FILE","PRE"),LBRVY=%
"RTN","LBRVPOST",13,0)
 F LBRDI=680,681,682 D  D MES^XPDUTL("File "_LBRDI_" done.") K DA,DR,DIC,DIE
"RTN","LBRVPOST",14,0)
 . S DIC="^LBRY("_LBRDI_",",DA=0
"RTN","LBRVPOST",15,0)
 . S DR=".04////^S X=LBRVY"
"RTN","LBRVPOST",16,0)
 . F  S DA=$O(^LBRY(LBRDI,DA)) Q:'DA  S DIE=DIC D ^DIE W:DA#100=0 "."
"RTN","LBRVPOST",17,0)
 K DA,DR,DIC,DIE,LBRDI
"RTN","LBRVPOST",18,0)
 S DR=".02////^S X=LBRVY",DIC="^LBRY(680.7,",DIE=DIC,DA=0
"RTN","LBRVPOST",19,0)
 F  S DA=$O(^LBRY(680.7,DA)) Q:'DA  D ^DIE W:DA#10=0 "."
"RTN","LBRVPOST",20,0)
 K DA,DR,DIC,DIE
"RTN","LBRVPOST",21,0)
 S DR="1////^S X=LBRVY",DIC="^LBRY(680.4,",DIE=DIC,DA=0
"RTN","LBRVPOST",22,0)
 F  S DA=$O(^LBRY(680.4,DA)) Q:'DA  D ^DIE W:DA#10=0 "."
"RTN","LBRVPOST",23,0)
 K DA,DR,DIC,DIE
"RTN","LBRVPOST",24,0)
 Q
"RTN","LBRVPOST",25,0)
MOV ;  Move data into scratch file if appropriate
"RTN","LBRVPOST",26,0)
 S %=$$PARCP^XPDUTL("PRE1","PRE"),LBRFL=%
"RTN","LBRVPOST",27,0)
 S LBRWSTA=$$PARCP^XPDUTL("STNCD","PRE")
"RTN","LBRVPOST",28,0)
CV I LBRFL="LEG" D
"RTN","LBRVPOST",29,0)
 . S LBRVDT=$$FMADD^XLFDT(DT,7)
"RTN","LBRVPOST",30,0)
 . S ^XTMP("LBRY",0)=LBRVDT_"^"_DT
"RTN","LBRVPOST",31,0)
 . S ^XTMP("LBRY",LBRWSTA)=LBRWSTA
"RTN","LBRVPOST",32,0)
 . D ^LBRVCONV
"RTN","LBRVPOST",33,0)
 . D RC
"RTN","LBRVPOST",34,0)
 . D MES^XPDUTL("You are now ready to move your data to the primary system.")
"RTN","LBRVPOST",35,0)
 . D MES^XPDUTL("Please move temporary global, ^XTMP(""LBRY"" to correct directory and install LBR*2.5*3.")
"RTN","LBRVPOST",36,0)
 I LBRFL="PRI" D RC
"RTN","LBRVPOST",37,0)
 G EXIT
"RTN","LBRVPOST",38,0)
RC ;  Find bad records
"RTN","LBRVPOST",39,0)
 S DIK="^LBRY(681,",DA=0 W "."
"RTN","LBRVPOST",40,0)
 F  S DA=$O(^LBRY(681,DA)) Q:'DA  D
"RTN","LBRVPOST",41,0)
 . S TAF=$P(^LBRY(681,DA,0),U,2)
"RTN","LBRVPOST",42,0)
 . I TAF="" D ^DIK Q
"RTN","LBRVPOST",43,0)
 . I '$D(^LBRY(680,TAF)) D ^DIK
"RTN","LBRVPOST",44,0)
 S DIK="^LBRY(682,",DA=0 W "."
"RTN","LBRVPOST",45,0)
 F  S DA=$O(^LBRY(682,DA)) Q:'DA  D
"RTN","LBRVPOST",46,0)
 . S TAF=$P(^LBRY(682,DA,0),U,2)
"RTN","LBRVPOST",47,0)
 . I TAF="" D ^DIK Q
"RTN","LBRVPOST",48,0)
 . I '$D(^LBRY(680,TAF)) D ^DIK
"RTN","LBRVPOST",49,0)
 S DIK="^LBRY(682.1,",DA="" W "."
"RTN","LBRVPOST",50,0)
 F  S DA=$O(^LBRY(682.1,DA)) Q:DA=0  D
"RTN","LBRVPOST",51,0)
 . K ^LBRY(682.1,DA)
"RTN","LBRVPOST",52,0)
 F IND="AA","AC","AD","B","C" K ^LBRY(682.1,IND)
"RTN","LBRVPOST",53,0)
 D IXALL^DIK
"RTN","LBRVPOST",54,0)
 W "."
"RTN","LBRVPOST",55,0)
REINDX ; re-indexing of all cross-references 
"RTN","LBRVPOST",56,0)
 D MES^XPDUTL("I am now re-indexing all cross-references")
"RTN","LBRVPOST",57,0)
 W !
"RTN","LBRVPOST",58,0)
 F J=680,681,682,680.4,680.7,680.3,680.5 S LX="A" F  S LX=$O(^LBRY(J,LX)) Q:LX=""  K ^LBRY(J,LX)
"RTN","LBRVPOST",59,0)
 F DIK="^LBRY(680,","^LBRY(681,","^LBRY(682,","^LBRY(680.4,","^LBRY(680.7,","^LBRY(680.3,","^LBRY(680.5," D
"RTN","LBRVPOST",60,0)
 . W DIK,! D IXALL^DIK
"RTN","LBRVPOST",61,0)
 Q
"RTN","LBRVPOST",62,0)
EXIT K DA,DIC,LBRVY,LBRDI,DIE,DR,LFLG,LBRWSTA,LSTN,GSTN,LBRWSTN,LBRFL,CKDA
"RTN","LBRVPOST",63,0)
 K LBRVDT
"RTN","LBRVPOST",64,0)
 Q
"RTN","LBRVPRE")
0^67^B4506630
"RTN","LBRVPRE",1,0)
LBRVPRE ;SSI/ALA-PreInit for patch ;[ 04/15/98  3:22 PM ]
"RTN","LBRVPRE",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRVPRE",3,0)
 ;
"RTN","LBRVPRE",4,0)
DD ;Remove fields from data dictionary
"RTN","LBRVPRE",5,0)
 S DIK="^DD(680,",DA=10.7,DA(1)=680 D ^DIK
"RTN","LBRVPRE",6,0)
 S DIK="^DD(681,",DA=1.7,DA(1)=681 D ^DIK
"RTN","LBRVPRE",7,0)
 S DIK="^DD(681.02,",DA=.01,DA(1)=681.02 D ^DIK
"RTN","LBRVPRE",8,0)
 S DIK="^DD(680.01,",DA(1)=680.01,DA=1 D ^DIK
"RTN","LBRVPRE",9,0)
 S DIK="^DD(680.5,",DA=.01,DA(1)=680.5 D ^DIK
"RTN","LBRVPRE",10,0)
 K DIK,DA
"RTN","LBRVPRE",11,0)
 ;  remove FORUM data dictionaries
"RTN","LBRVPRE",12,0)
 S DIU="^LBRL(688,",DIU(0)="D" D EN^DIU2
"RTN","LBRVPRE",13,0)
 S DIU="^LBRL(689,",DIU(0)="D" D EN^DIU2
"RTN","LBRVPRE",14,0)
 S DIU="^LBRL(689.1,",DIU(0)="D" D EN^DIU2
"RTN","LBRVPRE",15,0)
 S DIU="^LBRY(687,",DIU(0)="D" D EN^DIU2
"RTN","LBRVPRE",16,0)
 S DIU="^LBRY(687.1,",DIU(0)="D" D EN^DIU2
"RTN","LBRVPRE",17,0)
 S DIU="^LBRY(689.2,",DIU(0)="D" D EN^DIU2
"RTN","LBRVPRE",18,0)
 K DIU
"RTN","LBRVPRE",19,0)
 W "."
"RTN","LBRVPRE",20,0)
DT ; remove data from file 680 from deleted field
"RTN","LBRVPRE",21,0)
 S LBRD0=0
"RTN","LBRVPRE",22,0)
LP1 S LBRD0=$O(^LBRY(680,LBRD0)) G ON:'LBRD0
"RTN","LBRVPRE",23,0)
 S LBRD1=0
"RTN","LBRVPRE",24,0)
LP2 S LBRD1=$O(^LBRY(680,LBRD0,4,LBRD1)) G LP1:'LBRD1
"RTN","LBRVPRE",25,0)
 S ^LBRY(680,LBRD0,4,LBRD1,0)=$P(^LBRY(680,LBRD0,4,LBRD1,0),U)
"RTN","LBRVPRE",26,0)
 G LP2
"RTN","LBRVPRE",27,0)
ON K TAF,DA,DIK,IND,LBRD0,LBRD1
"RTN","LBRVPRE",28,0)
 I $$PATCH^XPDUTL("LBR*2.5*2")=1 D EN Q
"RTN","LBRVPRE",29,0)
STA N %
"RTN","LBRVPRE",30,0)
 S %=$$NEWCP^XPDUTL("STNCD","STA1^LBRVPRE")
"RTN","LBRVPRE",31,0)
 S %=$$NEWCP^XPDUTL("PRE1","EN^LBRVPRE")
"RTN","LBRVPRE",32,0)
 S %=$$NEWCP^XPDUTL("PRE3","MUL^LBRVPRE")
"RTN","LBRVPRE",33,0)
 S %=$$NEWCP^XPDUTL("FILE")
"RTN","LBRVPRE",34,0)
 Q
"RTN","LBRVPRE",35,0)
STA1 ;  Get station number
"RTN","LBRVPRE",36,0)
 S LBRWSTA=$P($G(^XTMP("LBRV",0)),"^",3)
"RTN","LBRVPRE",37,0)
 S %=$$UPCP^XPDUTL("STNCD",LBRWSTA)
"RTN","LBRVPRE",38,0)
 Q
"RTN","LBRVPRE",39,0)
EN ;  Check for type of site
"RTN","LBRVPRE",40,0)
 ;  PRI = Station (also applicable for single stations)
"RTN","LBRVPRE",41,0)
 ;  LEG = Legacy (applicable for stations who may move data)
"RTN","LBRVPRE",42,0)
 N %
"RTN","LBRVPRE",43,0)
 Q:($G(XPDQUES("PRE1"))="")
"RTN","LBRVPRE",44,0)
 S $P(^XTMP("LBRV",0),";",2)=$G(XPDQUES("PRE1"))
"RTN","LBRVPRE",45,0)
 S %=$$UPCP^XPDUTL("PRE1",$G(XPDQUES("PRE1")))
"RTN","LBRVPRE",46,0)
 Q
"RTN","LBRVPRE",47,0)
MUL ;  Multiple site set
"RTN","LBRVPRE",48,0)
 N %
"RTN","LBRVPRE",49,0)
 Q:'XPDQUES("PRE3")
"RTN","LBRVPRE",50,0)
 S %=$$UPCP^XPDUTL("PRE3",$G(XPDQUES("PRE3")))
"RTN","LBRVPRE",51,0)
 S LBRVY=XPDQUES("PRE3")
"RTN","LBRVPRE",52,0)
 S DA=+LBRVY I $G(LBRWSTA)="" S LBRPRT=$P($G(^XTMP("LBRV",0)),"^",3),LBRWSTA=$P(LBRPRT,";",1)
"RTN","LBRVPRE",53,0)
 S DIC="^LBRY(680.6,",DIE=DIC
"RTN","LBRVPRE",54,0)
 S DR=".07////^S X=LBRWSTA" D ^DIE K DA,DR,DIC,DIE,LBRPRT
"RTN","LBRVPRE",55,0)
 S %=$$UPCP^XPDUTL("FILE",LBRVY)
"RTN","LBRVPRE",56,0)
 Q
"RTN","LBRVPRE",57,0)
EXIT ;
"RTN","LBRVPRE",58,0)
 Q
"RTN","LBRYASG1")
1^70
"RTN","LBRYASG2")
1^71
"RTN","LBRYASGN")
1^69
"RTN","LBRYASK")
0^1^B1132304
"RTN","LBRYASK",1,0)
LBRYASK ;ISC2/DJM-LIBRARY LOCATION QUESTION ;[ 05/23/97  12:13 PM ]
"RTN","LBRYASK",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYASK",3,0)
 ;
"RTN","LBRYASK",4,0)
START Q:$D(LBRYPTR)
"RTN","LBRYASK",5,0)
NEW I $P(^LBRY(680.6,0),U,4)=1 S Y=$O(^LBRY(680.6,0)) G ASK1
"RTN","LBRYASK",6,0)
 I '$D(IOF) D ^%ZIS
"RTN","LBRYASK",7,0)
 W @IOF,!! S N="" F  S N=$O(^LBRY(680.6,"B",N)) Q:N=""  W !,N
"RTN","LBRYASK",8,0)
 W !!! S DIC="^LBRY(680.6,",DIC(0)="AEQ"
"RTN","LBRYASK",9,0)
ASK D ^DIC Q:$G(DUOUT)=1
"RTN","LBRYASK",10,0)
 I Y<1 W !!,"Please select a site " G ASK
"RTN","LBRYASK",11,0)
ASK1 S DA=+Y,LBRYPTR=DA,LBRYNAM=$P(^LBRY(680.6,LBRYPTR,0),U,7)
"RTN","LBRYASK",12,0)
EXIT K DA,DIC,XXX
"RTN","LBRYASK",13,0)
 Q
"RTN","LBRYASK",14,0)
EN1 S DIC="^%ZIS(1,",DIC(0)="EMQZ" D ^DIC K DIC K:Y<0 X Q:Y<0  S X=$P(Y(0),U,1)
"RTN","LBRYASK",15,0)
 Q
"RTN","LBRYASK",16,0)
EN2 S ZD=D,X="??",DIC="^%ZIS(1,",DIC(0)="EMZQ" D ^DIC S D=ZD K ZD,DIC
"RTN","LBRYASK",17,0)
 Q
"RTN","LBRYCK")
0^2^B15996193
"RTN","LBRYCK",1,0)
LBRYCK ;ISC2/DJM-LIBRARY SERIALS CHECK-IN ;[ 02/04/98  4:07 PM ]
"RTN","LBRYCK",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYCK",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYCK",4,0)
 . D ^LBRYASK
"RTN","LBRYCK",5,0)
 S KL1=1 D CKIN G:Y<0 EXIT
"RTN","LBRYCK",6,0)
 S CLOSED=$P(^LBRY(680,LBRYLOC,0),U,2) G:CLOSED]"" CLOSED
"RTN","LBRYCK",7,0)
 D ^LBRYPPR,ALL^LBRYCK0 G:$D(ALL) NOT
"RTN","LBRYCK",8,0)
CONT S (E,E0,E1)=0 D MORE
"RTN","LBRYCK",9,0)
 G:'$D(A(1)) DISPLAY
"RTN","LBRYCK",10,0)
CONT1 S E=0,X1=YDT1,X2=$S($P(^LBRY(680,LBRYLOC,0),U,3)'="":$P(^(0),U,3),1:5)
"RTN","LBRYCK",11,0)
 D C^%DTC S (YDT1,YDT2)=X,V1=$O(^LBRY(682,"A1",LBRYLOC,9999998-YDT2))
"RTN","LBRYCK",12,0)
 I V1'="" S E1=$O(^LBRY(682,"A1",LBRYLOC,V1,0)) F I=1:1 Q:'$D(A(I))  S:A(I)=E1 E=I Q:E>0
"RTN","LBRYCK",13,0)
INIT S E1=E-3 S:E1<1 E1=1 S E0=E1 D FWD1^LBRYCK0 G DISPLAY
"RTN","LBRYCK",14,0)
CKIN W @IOF,?5,"VA Library Serials Check-In for "_LBRYNAM
"RTN","LBRYCK",15,0)
 S (YDT1,Y)=DT X ^DD("DD") W ?60,Y,! S YDT=Y
"RTN","LBRYCK",16,0)
 S DIC="^LBRY(680,",DIC(0)="AEMQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR&($P(^(0),U,2)="""")"
"RTN","LBRYCK",17,0)
 D ^DIC K DIC("S")
"RTN","LBRYCK",18,0)
 Q:Y<0  S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYCK",19,0)
 S LA0=$P(^LBRY(680.5,LBRYCLS,0),U),LA00=""
"RTN","LBRYCK",20,0)
 I $G(^LBRY(680,LBRYLOC,1))'="" S LA00="  "_$P(^(1),U,5)
"RTN","LBRYCK",21,0)
 S LA0="TITLE: "_LA0
"RTN","LBRYCK",22,0)
 Q
"RTN","LBRYCK",23,0)
MORE K A S N="",A(1)="",LA1="JOURNAL",LA2="DATE",LA3="V(I)",LA4="CPY'S"
"RTN","LBRYCK",24,0)
 S LA5="COPIES",LA6="RECEIVED",LA7="ORD'D",LA8="COMPLETED"
"RTN","LBRYCK",25,0)
 S LA9="DISPOSITION",LA10="RCV'D"
"RTN","LBRYCK",26,0)
 F I=1:1 S:A(I)="" N=$O(^LBRY(682,"AC",LBRYLOC,N)) G:N="" MORE1 S A(I)=$O(^LBRY(682,"AC",LBRYLOC,N,A(I))) S:$O(^(A(I)))>0 A(I+1)=A(I) S:$O(^(A(I)))="" A(I+1)=""
"RTN","LBRYCK",27,0)
MORE1 S II=E K A(I) Q
"RTN","LBRYCK",28,0)
DISPLAY ;SHOW ISSUES
"RTN","LBRYCK",29,0)
DISP0 W @IOF,?5,"VA Library Serials Check-In",?60,YDT,!!,LA0,!,LA00
"RTN","LBRYCK",30,0)
 W !!,"ID",?6,LA1,?41,LA2,?52,LA4,?59,LA4,?66,LA9,!,"NUM"
"RTN","LBRYCK",31,0)
 W ?7,LA2,?20,LA3,?41,LA6,?52,LA7,?59,LA10,?66,LA8,!
"RTN","LBRYCK",32,0)
 F I=1:1:77 W "-"
"RTN","LBRYCK",33,0)
 W !
"RTN","LBRYCK",34,0)
 S AA="",RTD=0 G:E0=0 ASK1 G:'$D(A(1)) ASK1
"RTN","LBRYCK",35,0)
 F I=E0:1:E1 S AA=^LBRY(682,A(I),1),RTD=0,RFLAG=0,MR=0,RTD1="" D RTED,DISPX,DISP1
"RTN","LBRYCK",36,0)
ASK G:E=0 ASK1 G:KL1=0 ASK1
"RTN","LBRYCK",37,0)
 S KL1=0,AA=^LBRY(682,A(E),1),Y=$P(AA,U,1),AAX=$P(AA,U,5)-$P(AA,U,4)
"RTN","LBRYCK",38,0)
 G:AAX<1 ASK1
"RTN","LBRYCK",39,0)
 X ^DD("DD")
"RTN","LBRYCK",40,0)
AK W !!,"Do you want to check-in ",AAX," copies of ",Y," issue today" S %=1 D YN^DICN
"RTN","LBRYCK",41,0)
 I %=0 D  G AK
"RTN","LBRYCK",42,0)
 . W !!,"'YES' will complete normal check-in process automatically."
"RTN","LBRYCK",43,0)
 . W !,"'NO' presents alternatives."
"RTN","LBRYCK",44,0)
 G:%=2 DISPLAY G:%=1 START1^LBRYCK1 G:%=-1 LBRYCK G ASK
"RTN","LBRYCK",45,0)
 ;  Display to user his options
"RTN","LBRYCK",46,0)
ASK1 D ^LBRYCK1
"RTN","LBRYCK",47,0)
 ;  Go select user's option.  State error prompt if needed.
"RTN","LBRYCK",48,0)
ASK3 G ASK3^LBRYCK1
"RTN","LBRYCK",49,0)
RTED S MR=$O(^LBRY(682,A(I),4,MR)) Q:MR'>0  S BB=^LBRY(682,A(I),4,MR,0),BB2=$P(BB,U,2),BB1=$P(BB,U,1) S:BB2<4&(BB1'="ToC") RTD=RTD+1 S:BB1="ToC" BB1="T"
"RTN","LBRYCK",50,0)
 I BB2<4,RTD<5 S RTD1=RTD1_BB1_"," G RTED
"RTN","LBRYCK",51,0)
 I BB2<4,RTD'<5,RFLAG=0 S RTD1=$E(RTD1,1,$L(RTD1)-1)_"...",RFLAG=1
"RTN","LBRYCK",52,0)
 G RTED
"RTN","LBRYCK",53,0)
DISPX S AA1=$P(AA,U,1),AA2=$P(AA,U,2),AA3=$P(AA,U,3),AA4=$P(AA,U,4),AA5=$P(AA,U,5),AA6=""
"RTN","LBRYCK",54,0)
 S:$D(^LBRY(682,A(I),1)) AA6=$P(^(1),U,7) I AA4=0 S AA4=""
"RTN","LBRYCK",55,0)
 S RTDA=$S(RTD=AA5:"   ALL",1:RTD1)
"RTN","LBRYCK",56,0)
 S:AA3'="" AA2=AA2_"("_AA3_")" S Y=AA1 X ^DD("DD") S AA1=Y I AA6'="" S Y=AA6 X ^DD("DD") S AA6=Y
"RTN","LBRYCK",57,0)
 Q
"RTN","LBRYCK",58,0)
DISP1 W !,I,?5,AA1,?18,AA2,?40,AA6,?54,AA5,?61,AA4,?66,RTDA Q
"RTN","LBRYCK",59,0)
CLOSED W !!,"This is a closed title.  No check-in is allowed." G NOT1
"RTN","LBRYCK",60,0)
NOT W !!,LA0,!!,"This title is not fully initialized."
"RTN","LBRYCK",61,0)
 W !,"Please use Library Serials Management to set up this title."
"RTN","LBRYCK",62,0)
NOT1 S XZ="Exit// " D PAUSE^LBRYCK0 G LBRYCK
"RTN","LBRYCK",63,0)
EXIT K %,%DT,%X,LA0,LA1,LA2,LA3,LA4,LA5,LA6,LA7,LA8,LA9,LA10,A,I,II,IA,I1
"RTN","LBRYCK",64,0)
 K J,AA,AA1,AA2,AA3,AA4,AA5,AA6,AA7,AA8,AB,AB1,AB2,CA,CA1,DIC,DIW,DIWF
"RTN","LBRYCK",65,0)
 K DIWL,DIWR,DIWT,DIWTC,DIWX,CLR,LL,DN,DR,DX,DY,N,O,X1,X2,XX,Z,LB,LB1
"RTN","LBRYCK",66,0)
 K LB2,MM,AAX,ALL,BB,BB1,BB2,CLOSED,CO682,DIE,DIK,E,E0,E1,LBXX,LINE1
"RTN","LBRYCK",67,0)
 K LINE2,LS,LTST,QUEUE,TERM,XQH,XTA,XTB,XTC,XTD,XTE,XT1,XT2,XT3,XT4,H
"RTN","LBRYCK",68,0)
 K LA00,MR,IT,KL1,LBDA,LBRYDA,LBRYIF,LBRYL,LBRYNUM,LOOPX,QTY,CKIN
"RTN","LBRYCK",69,0)
 K LBRYD,RFLAG,RTG,RTD1,RTDA,V1,XZ,YDT,YDT1,YDT2,LBRYDT,NUMB,TITLE
"RTN","LBRYCK",70,0)
 K LDATE,LBX,N1,N2,RC,RR,RR1,RR2,RR4,RR5,RR7,RR8,RRX,RRY,RRX0,G,G1,G2
"RTN","LBRYCK",71,0)
 K %IS("B"),LBC,RTD,K,NUM
"RTN","LBRYCK",72,0)
 Q
"RTN","LBRYCK0")
0^3^B13144534
"RTN","LBRYCK0",1,0)
LBRYCK0 ;ISC2/DJM-LIBRARY SERIALS CHECK-IN ;[ 07/09/97  6:37 PM ]
"RTN","LBRYCK0",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYCK0",3,0)
CHECK ;
"RTN","LBRYCK0",4,0)
FORWARD S E=0 G:$L(X)>1 FWD S:$D(A(E1+1)) (E0,E1)=E1+1 G FWD1
"RTN","LBRYCK0",5,0)
FWD S X1=+$E(X,2,99) Q:X1'>0!'($D(A(X1)))  Q:$E(X,1)="B"&(X1'<E0)  Q:$E(X,1)="F"&(X1'>E0)  S E0=$S($D(A(X1)):X1,$D(A(E1+1)):E1+1,1:E0) S:X1>0&($D(A(X1))) E1=X1
"RTN","LBRYCK0",6,0)
FWD1 F I=1:1:4 Q:'$D(A(E1+1))  S E1=E1+1
"RTN","LBRYCK0",7,0)
 Q
"RTN","LBRYCK0",8,0)
BACKUP S E=0 G:$L(X)>1 FWD I $D(A(E0-5)) S (E0,E1)=E0-5 G FWD1
"RTN","LBRYCK0",9,0)
BACKUP1 F I=1:1:5 Q:'$D(A(E0-1))  S E0=E0-1
"RTN","LBRYCK0",10,0)
 S E1=E0 G FWD1
"RTN","LBRYCK0",11,0)
EDIT S E=0 G:$L(X)>1 EDITCK W !!,"Choose ",*34,"ID NUM",*34," to edit: "
"RTN","LBRYCK0",12,0)
 S DTOUT=0 R XX:DTIME E  W $C(7) S DTOUT=1 G DISPLAY^LBRYCK
"RTN","LBRYCK0",13,0)
 I XX=" " S:$D(^TMP("LBRY",DUZ,2)) XX=^(2)
"RTN","LBRYCK0",14,0)
 I XX="^" G ^LBRYCK
"RTN","LBRYCK0",15,0)
 I XX="" G DISPLAY^LBRYCK
"RTN","LBRYCK0",16,0)
 I $D(A(XX)) D UTIL G EDIT1
"RTN","LBRYCK0",17,0)
EDIT0 W !!,"Enter a number under heading ",*34,"ID NUM",*34,"." G EDIT
"RTN","LBRYCK0",18,0)
EDITCK S XX=+$E(X,2,99) S:'$D(A(XX)) X=0 K:'$D(A(XX)) XX G:'$D(XX) EDIT0 G:'$D(A(XX)) EDIT0 D UTIL G EDIT1
"RTN","LBRYCK0",19,0)
EDIT1 W ! S LBRYDA=DA,DA=+A(XX),(LBRYE,LBDA)=DA,(DIC,DIE)="^LBRY(682,"
"RTN","LBRYCK0",20,0)
 S DR="[LBRY JOURNAL DATE EDIT]" D LOCK^LBRYEDR G:LBRYL=0 EDIT2
"RTN","LBRYCK0",21,0)
 D ^DIE L  I $D(Y)!($D(DTOUT)) G DISPLAY^LBRYCK
"RTN","LBRYCK0",22,0)
 D:$P(^LBRY(682,DA,1),U,1)="" RMV S DA=LBRYDA K LBRYDA
"RTN","LBRYCK0",23,0)
ROUT ;CHECK TO SEE IF ANY ROUTING SLIPS NEED PRINTING
"RTN","LBRYCK0",24,0)
 I $G(LBRYPTR)="" D ^LBRYASK I $G(LBRYPTR)="" G EDIT2
"RTN","LBRYCK0",25,0)
 S NUM=0 F  S NUM=$O(^LBRY(682,LBRYE,4,NUM)) Q:NUM'>0  D
"RTN","LBRYCK0",26,0)
 . S LBXX=^LBRY(682,LBRYE,4,NUM,0)
"RTN","LBRYCK0",27,0)
 . Q:$P(LBXX,U,6)'=""
"RTN","LBRYCK0",28,0)
 . Q:"12"'[$P(LBXX,U,2)
"RTN","LBRYCK0",29,0)
 . W !,"c",$P(LBXX,U)," RECEIVED."
"RTN","LBRYCK0",30,0)
 . S ^LBRY(682,"A2",LBRYE,NUM)="" D QUE
"RTN","LBRYCK0",31,0)
EDIT2 D MORE^LBRYCK S E=II G DISPLAY^LBRYCK
"RTN","LBRYCK0",32,0)
ENEDT S CO682="" L ^LBRY(682,0) S LBRYNUM=$P(^LBRY(682,0),U,3)
"RTN","LBRYCK0",33,0)
 F  S LBRYNUM=LBRYNUM+1 Q:'$D(^LBRY(682,LBRYNUM,0))
"RTN","LBRYCK0",34,0)
 S LBRYIF=$S('$D(A(1)):"P",1:"I"),X=LBRYNUM,DIC="^LBRY(682,"
"RTN","LBRYCK0",35,0)
 S DIC(0)="LNZ",DLAYGO=682 K DO D FILE^DICN L  K DLAYGO
"RTN","LBRYCK0",36,0)
 S DIE=DIC,(DA,LBDA)=+Y,DR="[LBRY INSERT]" D LOCK^LBRYEDR G:LBRYL=0 ENEDT1 D ^DIE L
"RTN","LBRYCK0",37,0)
 I $D(Y)!($D(DTOUT)) D KILL G ENEDT0
"RTN","LBRYCK0",38,0)
 S DA=LBDA I '$D(^LBRY(682,DA,1))#2 D KILL G ENEDT0
"RTN","LBRYCK0",39,0)
 I $P(^LBRY(682,DA,1),U,1)="" D KILL G ENEDT0
"RTN","LBRYCK0",40,0)
 I CO682="" D KILL,KTXT
"RTN","LBRYCK0",41,0)
ENEDT0 D MORE^LBRYCK F E=1:1 G:'$D(A(E)) DISPLAY^LBRYCK G:A(E)=DA ENEDT1
"RTN","LBRYCK0",42,0)
ENEDT1 S KL1=1 G INIT^LBRYCK
"RTN","LBRYCK0",43,0)
 G CONT1^LBRYCK
"RTN","LBRYCK0",44,0)
KILL S DA=LBDA,DIK="^LBRY(682," D ^DIK Q
"RTN","LBRYCK0",45,0)
KTXT W !!,"This issue is not being inserted because no copies are available for check-in."
"RTN","LBRYCK0",46,0)
 W !,"To insert this Journal Date first go to CSE and set up copies to check-in."
"RTN","LBRYCK0",47,0)
 S XZ="Continue// " D PAUSE
"RTN","LBRYCK0",48,0)
 Q
"RTN","LBRYCK0",49,0)
UTIL K ^TMP("LBRY",DUZ,2) S ^(2)=XX Q
"RTN","LBRYCK0",50,0)
RMV S DIK=DIE D ^DIK Q
"RTN","LBRYCK0",51,0)
ALL K ALL S CNT=+$P($G(^LBRY(680,LBRYLOC,7)),U),(QTY,IT)=0
"RTN","LBRYCK0",52,0)
 F  S IT=$O(^LBRY(681,"AC",LBRYLOC,IT)) Q:IT=""  S QTY=QTY+1
"RTN","LBRYCK0",53,0)
 I QTY<CNT S ALL=1
"RTN","LBRYCK0",54,0)
 I CNT=0 S ALL=1
"RTN","LBRYCK0",55,0)
 Q
"RTN","LBRYCK0",56,0)
PAUSE W !,XZ S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 Q
"RTN","LBRYCK0",57,0)
 Q:X=""  Q:X="^"  W !,"Enter carriage return to ",XZ G PAUSE
"RTN","LBRYCK0",58,0)
EXIT K A,%,%DT,%X,%Y,LA0,LA1,LA2,LA3,LA4,LA5,LA6,LA7,A,I,II,IA,I1,J,AA,AA1
"RTN","LBRYCK0",59,0)
 K AA2,AA3,AA4,AA5,AA6,AA7,AA8,AB,AB1,AB2,CA,CA1,DIC,DIC(0),DIW,DIWF
"RTN","LBRYCK0",60,0)
 K DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,XT1,XT2,XT3,XT4,CLR,LL(2),LL(1),LL,DN
"RTN","LBRYCK0",61,0)
 K DR,DX,DY,N,O,X1,X2,XX,Z,LB,LB1,LB2,MM
"RTN","LBRYCK0",62,0)
 Q
"RTN","LBRYCK0",63,0)
QUE S LTST=$O(^LBRY(682,"A2",0)) Q:LTST=""
"RTN","LBRYCK0",64,0)
 S QUEUE=^LBRY(680.6,LBRYPTR,0),TERM=$P(QUEUE,U,3),QUEUE=$P(QUEUE,U,5)
"RTN","LBRYCK0",65,0)
 I QUEUE="Y",TERM]"" G QUEUE1
"RTN","LBRYCK0",66,0)
 S %ZIS="MQ",%IS("B")=$S(TERM]"":TERM,1:"") K IO("Q")
"RTN","LBRYCK0",67,0)
 D ^%ZIS Q:POP  I '$D(IO("Q")) U IO D ^LBRYCK2 D ^%ZISC Q
"RTN","LBRYCK0",68,0)
QUEUE1 S ZTIO=TERM,ZTDTH=$H,ZTRTN="^LBRYCK2",ZTSAVE("LBRYPTR")=""
"RTN","LBRYCK0",69,0)
 D ^%ZTLOAD D ^%ZISC K ZTSK
"RTN","LBRYCK0",70,0)
 Q
"RTN","LBRYCK1")
0^4^B14680421
"RTN","LBRYCK1",1,0)
LBRYCK1 ;ISC2/DJM-SERIALS CHECK-IN OUTPUT MESSAGE ;[ 05/23/97  12:13 PM ]
"RTN","LBRYCK1",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYCK1",3,0)
START F I=1:1:7 S LS(I)=""
"RTN","LBRYCK1",4,0)
 S XT1=$S($D(^LBRY(680,LBRYLOC,16,0)):1,1:0),XT2=$S($D(A(E0-1)):1,1:0)
"RTN","LBRYCK1",5,0)
 S XT3=$S($D(A(E1+1)):1,1:0),XT4=$S($D(A(1)):1,1:0),LS(1)="Choose: "
"RTN","LBRYCK1",6,0)
 I XT4 S LS(2)=$C(34)_"ID NUM"_$C(34)_" to check-in",LS(4)="(E)dit"
"RTN","LBRYCK1",7,0)
 S LS(3)="(I)nsert" S:XT1 LS(5)="see check-in (N)otes" S:XT2 LS(6)="(B)ackup" S:XT3 LS(7)="(F)orward"
"RTN","LBRYCK1",8,0)
 S (LINE1,LINE2)="" F I=1:1:7 Q:$L(LINE1)+$L(LS(I))'<78  S:LS(I)]"" LINE1=LINE1_LS(I) D LS2 K LS(I) I I>2&($D(LS(I+1))) S:LS(I+1)]"" LINE1=LINE1_", "
"RTN","LBRYCK1",9,0)
 I '$D(LS(7)) S LINE1=LINE1_"." G PRINT
"RTN","LBRYCK1",10,0)
 F J=I:1:7 S:LS(J)]"" LINE2=LINE2_LS(J) K LS(J) I J<7&($D(LS(J+1))) S:LS(J+1)]"" LINE2=LINE2_", "
"RTN","LBRYCK1",11,0)
 S LINE2=LINE2_"."
"RTN","LBRYCK1",12,0)
PRINT W !!,LINE1,! W:$D(LINE2) LINE2,! W "Exit// "
"RTN","LBRYCK1",13,0)
EXIT K LINE1,LINE2,I,J
"RTN","LBRYCK1",14,0)
 Q
"RTN","LBRYCK1",15,0)
LS2 I I=2,$D(LS(2)) I LS(2)]"" S LINE1=LINE1_", "
"RTN","LBRYCK1",16,0)
 Q
"RTN","LBRYCK1",17,0)
START1 ;LIBRARY ROUTING QUEUEING FOR "ALL" COPIES
"RTN","LBRYCK1",18,0)
 S LBRYC=0 D NOW^%DTC S LBRYD=%\1
"RTN","LBRYCK1",19,0)
ST S LBRYC=$O(^LBRY(682,A(E),4,LBRYC)) G:LBRYC'>0 QUEUE
"RTN","LBRYCK1",20,0)
 S LBXX=^LBRY(682,A(E),4,LBRYC,0) I $P(LBXX,U,2)>3 D LOCK G:LBRYL=0 FINI
"RTN","LBRYCK1",21,0)
 D:$P(LBXX,U,1)'="ToC" NUMB D:$P(LBXX,U,1)="ToC" TOC
"RTN","LBRYCK1",22,0)
 G ST
"RTN","LBRYCK1",23,0)
NUMB S LBC=$P(LBXX,U,3),LBC=$P(^LBRY(681,LBC,1),U,6)
"RTN","LBRYCK1",24,0)
 S $P(^LBRY(682,A(E),4,LBRYC,0),U,2)=LBC,$P(^LBRY(682,A(E),1),U,7)=LBRYD
"RTN","LBRYCK1",25,0)
 W !,"c",$P(LBXX,U,1)," RECEIVED." D COMP
"RTN","LBRYCK1",26,0)
 I $G(LBRYPTR)="" D ^LBRYASK I $G(LBRYPTR)="" G FINI
"RTN","LBRYCK1",27,0)
 I "12"[LBC,$P(^LBRY(680.6,LBRYPTR,0),U,5)="Y" W "  Queued to printer ",$P(^(0),U,3),"."
"RTN","LBRYCK1",28,0)
 L  Q
"RTN","LBRYCK1",29,0)
TOC S $P(^LBRY(682,A(E),4,LBRYC,0),U,2)=1,LBC=1
"RTN","LBRYCK1",30,0)
 W !,"ToC ROUTING LIST" W:$P(^LBRY(680.6,LBRYPTR,0),U,5)="Y" " queued to printer ",$P(^(0),U,3),"."
"RTN","LBRYCK1",31,0)
 D COMP
"RTN","LBRYCK1",32,0)
 L  Q
"RTN","LBRYCK1",33,0)
COMP I "12"[LBC,$P(LBXX,U,6)="" D
"RTN","LBRYCK1",34,0)
 . S ^LBRY(682,"A2",A(E),LBRYC)="",^LBRY(682,"A4",LBRYD,LBRYCLS,A(E),LBRYC)=""
"RTN","LBRYCK1",35,0)
 I LBC<4 S $P(^LBRY(682,A(E),4,LBRYC,0),U,7)=LBRYD,$P(^(0),U,8)=DUZ,$P(^LBRY(682,A(E),1),U,7)=LBRYD
"RTN","LBRYCK1",36,0)
 I $P(LBXX,U,1)'="ToC",$P(LBXX,U,2)=4 S $P(^LBRY(682,A(E),1),U,4)=$P(^LBRY(682,A(E),1),U,4)+1
"RTN","LBRYCK1",37,0)
 Q
"RTN","LBRYCK1",38,0)
LOCK S DIC="^LBRY(682,A(E),4,",DA=LBRYC D LOCK^LBRYEDR Q
"RTN","LBRYCK1",39,0)
QUEUE W !!,"Check-in completed." S LTST=$O(^LBRY(682,"A2",0)) G:LTST="" FINI
"RTN","LBRYCK1",40,0)
 S QUEUE=^LBRY(680.6,LBRYPTR,0),TERM=$P(QUEUE,U,3),QUEUE=$P(QUEUE,U,5)
"RTN","LBRYCK1",41,0)
 I QUEUE="Y",TERM]"" G QUEUE1
"RTN","LBRYCK1",42,0)
 S %ZIS="MQ",%IS("B")=$S(TERM]"":TERM,1:"") K IO("Q")
"RTN","LBRYCK1",43,0)
 D ^%ZIS G:POP FINI I '$D(IO("Q")) U IO D ^LBRYCK2 D ^%ZISC G FINI
"RTN","LBRYCK1",44,0)
QUEUE1 S ZTIO=TERM,ZTDTH=$H,ZTRTN="^LBRYCK2",ZTSAVE("LBRYPTR")=""
"RTN","LBRYCK1",45,0)
 D ^%ZTLOAD D ^%ZISC K ZTSK
"RTN","LBRYCK1",46,0)
FINI S XZ="EXIT//" D PAUSE^LBRYCK0
"RTN","LBRYCK1",47,0)
 K CKIN,LBRYC,LBXX,LBC,%IS("B")
"RTN","LBRYCK1",48,0)
 G ^LBRYCK
"RTN","LBRYCK1",49,0)
ASK3 ;LIBRARY SERIALS WHAT-TO-DO PROMPT (FROM LBRYCK)
"RTN","LBRYCK1",50,0)
 S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 G ^LBRYCK
"RTN","LBRYCK1",51,0)
 I X="" G ^LBRYCK
"RTN","LBRYCK1",52,0)
 I X=" " S:$D(^TMP("LBRY",DUZ,1)) X=^(1)
"RTN","LBRYCK1",53,0)
 I X="??" S XQH="LBRY CHECK-IN EDIT ??" D EN^XQH G DISPLAY^LBRYCK
"RTN","LBRYCK1",54,0)
 I X="^" G ^LBRYCK
"RTN","LBRYCK1",55,0)
 I $D(A(E0-1)),"Bb"[$E(X,1) D BACKUP^LBRYCK0 G DISPLAY^LBRYCK
"RTN","LBRYCK1",56,0)
 I $D(A(E1+1)),"Ff"[$E(X,1) D FORWARD^LBRYCK0 G DISPLAY^LBRYCK
"RTN","LBRYCK1",57,0)
 I $D(^LBRY(680,DA,16,0)),"Nn"[X D UTIL,^LBRYCK5 G DISPLAY^LBRYCK
"RTN","LBRYCK1",58,0)
 I $D(A(1)),"Ee"[$E(X,1) D UTIL G EDIT^LBRYCK0
"RTN","LBRYCK1",59,0)
 I "Ii"[X D UTIL G ENEDT^LBRYCK0
"RTN","LBRYCK1",60,0)
ASK2 I $D(A(X)) D UTIL G ^LBRYCK3
"RTN","LBRYCK1",61,0)
WRONG S E=0,XTA="",XTB="",XTC="",XTD="",XTE=""
"RTN","LBRYCK1",62,0)
 S:$D(A(1)) XTA="a number under heading "_$C(34)_"ID NUM"_$C(34)_", E"
"RTN","LBRYCK1",63,0)
 S XTB=$S(XT4&('XT1)&('XT2)&'(XT3):" or I.",'XT4&('XT1)&('XT2)&('XT3):"I.",1:", I") G:XTB["." WRONG1 S XTC=$S(XT1:", N",1:""),XTD=$S(XT2&(XT3):", B or F.",XT2!(XT3):" or ",1:".") G:XTD["." WRONG1
"RTN","LBRYCK1",64,0)
 S XTE=$S(XT2:"B.",XT3:"F.",1:"")
"RTN","LBRYCK1",65,0)
WRONG1 W !!,"Enter "_XTA_XTB_XTC_XTD_XTE,!,"Enter '??' for more help."
"RTN","LBRYCK1",66,0)
 W !!,"Choose: Exit// " D MORE^LBRYCK G ASK3
"RTN","LBRYCK1",67,0)
UTIL K ^TMP("LBRY",DUZ,1) S ^(1)=X Q
"RTN","LBRYCK2")
0^5^B6667366
"RTN","LBRYCK2",1,0)
LBRYCK2 ;ISC2/DJM-CHECK-IN ROUTING LIST PRINTING ;[ 05/23/97  12:13 PM ]
"RTN","LBRYCK2",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYCK2",3,0)
START S LBRYQ=0 D NOW^%DTC S LBRYDT=%,LBRYD=%\1
"RTN","LBRYCK2",4,0)
ST S LBRYQ=$O(^LBRY(682,"A2",LBRYQ)) G:LBRYQ="" EXIT
"RTN","LBRYCK2",5,0)
 S Q1=0
"RTN","LBRYCK2",6,0)
ST1 S Q1=$O(^LBRY(682,"A2",LBRYQ,Q1)) G ST:Q1=""
"RTN","LBRYCK2",7,0)
 I $P(^LBRY(682,LBRYQ,0),U,4)'=LBRYPTR G ST1
"RTN","LBRYCK2",8,0)
 G ST1:'$D(^LBRY(682,LBRYQ,4,Q1,0))
"RTN","LBRYCK2",9,0)
 S LBRYDAT=^LBRY(682,LBRYQ,4,Q1,0)
"RTN","LBRYCK2",10,0)
 D:$P(LBRYDAT,U)="ToC" TOC D:$P(LBRYDAT,U)'="ToC" COPY
"RTN","LBRYCK2",11,0)
 D A2
"RTN","LBRYCK2",12,0)
 G ST1
"RTN","LBRYCK2",13,0)
TOC S PTR=$P(LBRYDAT,U,3),PTRLST=0
"RTN","LBRYCK2",14,0)
TC S PTRLST=$O(^LBRY(681,PTR,2,"AC",PTRLST)) Q:PTRLST=""
"RTN","LBRYCK2",15,0)
 S PTRL2=$O(^LBRY(681,PTR,2,"AC",PTRLST,0)) D HEADER,NAME,TRLR,PAUSE
"RTN","LBRYCK2",16,0)
 G TC
"RTN","LBRYCK2",17,0)
HEADER W @IOF,!!!!!!!!!!,?5,"Veterans Administration ROUTING SLIP"
"RTN","LBRYCK2",18,0)
 W !!,?10,"ROUTE TO:",!
"RTN","LBRYCK2",19,0)
 Q
"RTN","LBRYCK2",20,0)
TRLR W !,?5 F K=1:1:40 W $C(42)
"RTN","LBRYCK2",21,0)
 S TTN=$P(^LBRY(681,PTR,0),U,2),TTT=$P(^LBRY(680,TTN,0),U)
"RTN","LBRYCK2",22,0)
 S TITLE=$E($P(^LBRY(680.5,TTT,0),U),1,39)
"RTN","LBRYCK2",23,0)
 W !,?5,TITLE
"RTN","LBRYCK2",24,0)
 S VID=^LBRY(682,LBRYQ,1),V=$P(VID,U,2),ISSUE=$P(VID,U,3),Y=$P(VID,U) X ^DD("DD")
"RTN","LBRYCK2",25,0)
 S ISSUE=$S(ISSUE]"":"("_ISSUE_")",1:"") S:V]"" ISSUE=V_ISSUE
"RTN","LBRYCK2",26,0)
 W !,?5,Y,?32,ISSUE
"RTN","LBRYCK2",27,0)
 S NUMB=$P(LBRYDAT,U) W:NUMB="ToC" !,?5,"TABLE of CONTENTS ROUTING SLIP"
"RTN","LBRYCK2",28,0)
 W:NUMB=+NUMB !,?5,"COPY ",NUMB," ROUTING SLIP"
"RTN","LBRYCK2",29,0)
 S LBRRSM=$P($G(^LBRY(680.6,LBRYPTR,0)),U,8) S:LBRRSM="" LBRRSM="142D"
"RTN","LBRYCK2",30,0)
 W !!!!!,?5,"FROM LIBRARY, "_LBRRSM,?35 S Y=LBRYD X ^DD("DD") W Y,!
"RTN","LBRYCK2",31,0)
 Q
"RTN","LBRYCK2",32,0)
NAME S NMPTR=$P(^LBRY(681,PTR,2,PTRL2,0),U)
"RTN","LBRYCK2",33,0)
 S NMSVC=$S(NMPTR'="":$G(^LBRY(680.4,NMPTR,0)),1:"")
"RTN","LBRYCK2",34,0)
 S NAME=$P(NMSVC,U),SVC=$P(NMSVC,U,2)
"RTN","LBRYCK2",35,0)
 S MS="" I SVC]"" S SVC=$G(^DIC(49,SVC,0)),MS=$P(SVC,U,8),SVC=$P(SVC,U)
"RTN","LBRYCK2",36,0)
 W !,?5 W:MS]"" MS W ?18,NAME W:SVC]"" "/",SVC W !
"RTN","LBRYCK2",37,0)
 Q
"RTN","LBRYCK2",38,0)
A2 K ^LBRY(682,"A2",LBRYQ,Q1)
"RTN","LBRYCK2",39,0)
 S ^LBRY(682,"A3",LBRYDT,LBRYQ,Q1)="",$P(^LBRY(682,LBRYQ,4,Q1,0),U,6)=LBRYDT
"RTN","LBRYCK2",40,0)
 Q
"RTN","LBRYCK2",41,0)
COPY S PTR=$P(LBRYDAT,U,3),PTRLST=0 D HEADER
"RTN","LBRYCK2",42,0)
CP S PTRLST=$O(^LBRY(681,PTR,2,"AC",PTRLST)) G:PTRLST="" COPY1
"RTN","LBRYCK2",43,0)
 S PTRL2=$O(^LBRY(681,PTR,2,"AC",PTRLST,0)) D NAME
"RTN","LBRYCK2",44,0)
 G CP
"RTN","LBRYCK2",45,0)
COPY1 D TRLR,PAUSE Q
"RTN","LBRYCK2",46,0)
PAUSE Q:IO'=IO(0)!($D(ZTSK))  S XZ="Continue//" D PAUSE^LBRYCK0 Q
"RTN","LBRYCK2",47,0)
EXIT D ^%ZISC K:$D(ZTSK) ^%ZTSK(ZTSK),ZTSK
"RTN","LBRYCK2",48,0)
 K IOP,LBRYQ,Q1,LBRYDAT,LBRYRET,PTR,PTRL2,PTRLST,VID,V,ISSUE,Y,VI,NMPTR
"RTN","LBRYCK2",49,0)
 K NMSVC,NAME,SVC,MS,TTT,TTN,TITLE,LBRRSM
"RTN","LBRYCK2",50,0)
 Q
"RTN","LBRYCK3")
0^6^B6554282
"RTN","LBRYCK3",1,0)
LBRYCK3 ;ISC2/DJM-CHECK-IN ROUTING, INDIVIDUAL COPIES ;[ 05/23/97  12:13 PM ]
"RTN","LBRYCK3",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYCK3",3,0)
CK D CHECK,SHOW G ASKDT
"RTN","LBRYCK3",4,0)
CHECK K RC
"RTN","LBRYCK3",5,0)
 S LA0=$P(^LBRY(680,LBRYLOC,0),U),LA0=$P(^LBRY(680.5,LA0,0),U)
"RTN","LBRYCK3",6,0)
 S LA1="JOURNAL",LA2="DATE",LA3="V(I)",LA8="COMPLETED",LA5="COPIES"
"RTN","LBRYCK3",7,0)
 S LA6="RECEIVED",LA11="ORDERED",LA9="DISPOSITION",LA0="TITLE: "_LA0
"RTN","LBRYCK3",8,0)
 S LA00="" I $G(^LBRY(680,LBRYLOC,1))'="" S LA00="  "_$P(^(1),U,5)
"RTN","LBRYCK3",9,0)
 S RTD=0 D RTED S:RTD=0 RTD=""
"RTN","LBRYCK3",10,0)
 S AA=^LBRY(682,A(X),1),AA1=$P(AA,U),AA2=$P(AA,U,2),AA3=$P(AA,U,3)
"RTN","LBRYCK3",11,0)
 S AA4=$P(AA,U,4),AA5=$P(AA,U,5) S:AA3'="" AA2=AA2_"("_AA3_")" I AA4=0 S AA4=""
"RTN","LBRYCK3",12,0)
 S Y=AA1 X ^DD("DD") S AA1=Y
"RTN","LBRYCK3",13,0)
 W @IOF,"VA Library Serials Check-in",?60,YDT,!!,LA0,!,LA00
"RTN","LBRYCK3",14,0)
 W !!,?5,LA1,?41,LA5,?50,LA5,?60,LA5,!,?5,LA2,?21,LA3,?41,LA11,?50,LA6,?60,LA8,!
"RTN","LBRYCK3",15,0)
 W ?5 F I=1:1:64 W "-"
"RTN","LBRYCK3",16,0)
 W !,?5,AA1,?18,AA2,?44,AA5,?53,AA4,?63,RTD,!
"RTN","LBRYCK3",17,0)
 Q
"RTN","LBRYCK3",18,0)
RTED S N=0 F  S N=$O(^LBRY(682,A(X),4,N)) Q:N=""!(N?.AP)  S N2=^LBRY(682,A(X),4,N,0) I $P(N2,U,2)<4&($P(N2,U)'="ToC") S RTD=RTD+1
"RTN","LBRYCK3",19,0)
 Q
"RTN","LBRYCK3",20,0)
SHOW S N=0 W !,?6,"C",?58,"LIBRARY",!,?6,"A",?45,"DATE",?58,"SITE"
"RTN","LBRYCK3",21,0)
 W !,?6,"T",?8,"STATUS",?28,"LOCATION",?45,"RECEIVED",?58,"LOCATION"
"RTN","LBRYCK3",22,0)
 W !,?6 F I=1:1:73 W "-"
"RTN","LBRYCK3",23,0)
SHOW1 S N=$O(^LBRY(682,A(X),4,"B",N)) Q:N=""
"RTN","LBRYCK3",24,0)
 S N1=$O(^LBRY(682,A(X),4,"B",N,0)),RR=^LBRY(682,A(X),4,N1,0)
"RTN","LBRYCK3",25,0)
 S RR1=$P(RR,U),RR2=$P(RR,U,2),RR7=$P(RR,U,7),Y=RR7 X ^DD("DD")
"RTN","LBRYCK3",26,0)
 S RR7=Y S:RR1=+RR1 RR1="c"_RR1 D SHOW2
"RTN","LBRYCK3",27,0)
 G SHOW1
"RTN","LBRYCK3",28,0)
SHOW2 S RR2=$S(RR2=1:"ROUTED",RR2=2:"ROUTED (TO RETURN)",RR2=3:"SHELVED",RR2=4:"NOT RECEIVED",1:"TOC NOT RECEIVED")
"RTN","LBRYCK3",29,0)
 S RRX=$P(RR,U,3),RRX0=$G(^LBRY(681,RRX,0)),RRX=$G(^LBRY(681,RRX,1))
"RTN","LBRYCK3",30,0)
 S RR4=$P(RRX,U,4),RRY=$P(RRX,U,2),RR5=""
"RTN","LBRYCK3",31,0)
 S:$D(RRY)&(RRY]"") RR5=$E($P(^LBRY(680.7,RRY,0),U),1,15)
"RTN","LBRYCK3",32,0)
 S RR8=$P(RRX0,U,4),RR8=$S(RR5]"":$E($P(^LBRY(680.6,RR8,0),U),1,22),1:"")
"RTN","LBRYCK3",33,0)
 W !,RR1,?6,RR4,?8,RR2,?28,RR5,?45,RR7,?58,RR8
"RTN","LBRYCK3",34,0)
 Q
"RTN","LBRYCK3",35,0)
ASKDT I AA5-RTD<1 G FINI^LBRYCK4
"RTN","LBRYCK3",36,0)
 S LBX=X
"RTN","LBRYCK3",37,0)
DATE W !!,"DATE RECEIVED: TODAY// " S DTOUT=0 R X:DTIME E  S DTOUT=1 W $C(7) G ^LBRYCK
"RTN","LBRYCK3",38,0)
 G:X="^" ^LBRYCK D:X="?" DP S:X="" X="T" S %DT="E" D ^%DT G:Y<0 DATE S LDATE=Y G ASK^LBRYCK4
"RTN","LBRYCK3",39,0)
DP W !,"Enter the actual date the copy is received in the library." Q
"RTN","LBRYCK4")
0^7^B8746258
"RTN","LBRYCK4",1,0)
LBRYCK4 ;ISC2/DJM-CHECK-IN QUEUEING & PRINTING ;[ 05/23/97  12:13 PM ]
"RTN","LBRYCK4",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYCK4",3,0)
PARSE S LBRYL="" F I=1:1 S G=$P(X,",",I) G:G="" TOC D:G=+G ROUT Q:LBRYL=0  D:G["-" PARSE1
"RTN","LBRYCK4",4,0)
 Q
"RTN","LBRYCK4",5,0)
PARSE1 S G1=$P(G,"-",1),G2=$P(G,"-",2) I G2'<G1 F G=G1:1:G2 D ROUT Q:LBRYL=0
"RTN","LBRYCK4",6,0)
 Q
"RTN","LBRYCK4",7,0)
ROUT S NUM=$O(^LBRY(682,A(LBX),4,"B",G,0)) Q:NUM=""
"RTN","LBRYCK4",8,0)
 S LBXX=^LBRY(682,A(LBX),4,NUM,0) Q:"45"'[$P(LBXX,U,2)
"RTN","LBRYCK4",9,0)
 S DIC="^LBRY(682,A(LBX),4,",DA=NUM D LOCK^LBRYEDR Q:LBRYL=0
"RTN","LBRYCK4",10,0)
 S LBC=$P(LBXX,U,3),LBC=$P(^LBRY(681,LBC,1),U,6)
"RTN","LBRYCK4",11,0)
 S $P(^LBRY(682,A(LBX),4,NUM,0),U,2)=LBC,$P(^(0),U,7)=LDATE
"RTN","LBRYCK4",12,0)
 W !,"c",$P(LBXX,U)," RECEIVED." D COMP
"RTN","LBRYCK4",13,0)
 I $P(^LBRY(682,A(LBX),1),U,7)="" S $P(^(1),U,7)=LDATE
"RTN","LBRYCK4",14,0)
 I $G(LBRYPTR)="" D ^LBRYASK I $G(LBRYPTR)="" S LBRYL=0 Q
"RTN","LBRYCK4",15,0)
 I "12"[LBC,$P(^LBRY(680.6,LBRYPTR,0),U,5)="Y" W "  Queued to printer ",$P(^(0),U,3),"."
"RTN","LBRYCK4",16,0)
 L  Q
"RTN","LBRYCK4",17,0)
COMP I "12"[LBC,$P(LBXX,U,6)="" D
"RTN","LBRYCK4",18,0)
 . S ^LBRY(682,"A2",A(LBX),NUM)=""
"RTN","LBRYCK4",19,0)
 . S ^LBRY(682,"A4",LDATE,LBRYLOC,A(LBX),NUM)=""
"RTN","LBRYCK4",20,0)
 I LBC<4 S $P(^LBRY(682,A(LBX),4,NUM,0),U,7)=LDATE,$P(^(0),U,8)=DUZ,$P(^LBRY(682,A(LBX),1),U,7)=LDATE
"RTN","LBRYCK4",21,0)
 I $P(LBXX,U)'="ToC",$P(LBXX,U,2)=4 S $P(^LBRY(682,A(LBX),1),U,4)=$P(^LBRY(682,A(LBX),1),U,4)+1
"RTN","LBRYCK4",22,0)
 Q
"RTN","LBRYCK4",23,0)
TOC S NUM=$O(^LBRY(682,A(LBX),4,"B","ToC",0)) G:NUM="" QUEUE
"RTN","LBRYCK4",24,0)
 S LBXX=^LBRY(682,A(LBX),4,NUM,0),DIC="^LBRY(682,A(LBX),4,",DA=NUM
"RTN","LBRYCK4",25,0)
 D LOCK^LBRYEDR Q:LBRYL=0
"RTN","LBRYCK4",26,0)
 I $P(^LBRY(682,A(LBX),4,NUM,0),U,2)=5 D
"RTN","LBRYCK4",27,0)
 . S $P(^LBRY(682,A(LBX),4,NUM,0),U,2)=1,$P(^(0),U,7)=LDATE,LBC=1
"RTN","LBRYCK4",28,0)
 . W !,"ToC ROUTING LIST" W:$P(^LBRY(680.6,LBRYPTR,0),U,5)="Y" " queued to printer ",$P(^(0),U,3),"." D COMP
"RTN","LBRYCK4",29,0)
 L
"RTN","LBRYCK4",30,0)
QUEUE W !!,"Check-in completed." S LTST=$O(^LBRY(682,"A2",0)) G:LTST="" FINI
"RTN","LBRYCK4",31,0)
 S QUEUE=^LBRY(680.6,LBRYPTR,0),TERM=$P(QUEUE,U,3),QUEUE=$P(QUEUE,U,5)
"RTN","LBRYCK4",32,0)
 I QUEUE="Y",TERM]"" G QUEUE1
"RTN","LBRYCK4",33,0)
 S %ZIS="MQ",%IS("B")=$S(TERM]"":TERM,1:"")
"RTN","LBRYCK4",34,0)
 K IO("Q") D ^%ZIS G:POP FINI I '$D(IO("Q")) U IO D ^LBRYCK2
"RTN","LBRYCK4",35,0)
 D ^%ZISC G FINI
"RTN","LBRYCK4",36,0)
QUEUE1 S ZTIO=TERM,ZTDTH=$H,ZTRTN="^LBRYCK2",ZTSAVE("LBRYPTR")=""
"RTN","LBRYCK4",37,0)
 D ^%ZTLOAD D ^%ZISC K ZTSK
"RTN","LBRYCK4",38,0)
FINI S XZ="EXIT//" D PAUSE^LBRYCK0 G ^LBRYCK
"RTN","LBRYCK4",39,0)
ASK W !!,"Enter copy number/s separated by commas or a hyphen."
"RTN","LBRYCK4",40,0)
 W !,"Copy number/s: EXIT// " S Q=1
"RTN","LBRYCK4",41,0)
ASK0 S DTOUT=0,X="" R X:DTIME E  W $C(7) S DTOUT=1 G ^LBRYCK
"RTN","LBRYCK4",42,0)
 I X="^" G ^LBRYCK
"RTN","LBRYCK4",43,0)
 I X="" G DISPLAY^LBRYCK
"RTN","LBRYCK4",44,0)
 I X?.N G PARSE
"RTN","LBRYCK4",45,0)
ASK3 S G=$P(X,",",Q) G:G="" ASK1 G:G["-" ASK4 G:G'?.N ASK2 S Q=Q+1 G ASK3
"RTN","LBRYCK4",46,0)
ASK1 G PARSE
"RTN","LBRYCK4",47,0)
ASK2 W !!,"Please enter a copy number or a range of numbers separated by a hyphen '1-2'"
"RTN","LBRYCK4",48,0)
 W !,"or a combination of the two separated by a comma '1,2-4' or <CR> to EXIT."
"RTN","LBRYCK4",49,0)
 G ASK
"RTN","LBRYCK4",50,0)
ASK4 G:G'?1N.N1"-"1N.N ASK2 S Q=Q+1 G ASK3
"RTN","LBRYCK5")
0^8^B1488320
"RTN","LBRYCK5",1,0)
LBRYCK5 ;ISC2/DJM-SERIALS CHECK-IN NOTES ;[ 05/23/97  12:13 PM ]
"RTN","LBRYCK5",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYCK5",3,0)
 ;
"RTN","LBRYCK5",4,0)
START S E=0,DIWL=1,DIWR=79,DIWF="N" K ^UTILITY($J,"W")
"RTN","LBRYCK5",5,0)
 S XX=$P(^LBRY(680,DA,16,0),U,3)
"RTN","LBRYCK5",6,0)
 F I=1:1:XX S X=^LBRY(680,DA,16,I,0) D ^DIWP
"RTN","LBRYCK5",7,0)
 S X=^UTILITY($J,"W",DIWL)-1,X1=0,X2=0
"RTN","LBRYCK5",8,0)
LOOP W @IOF,?5,"VA Library Serials Check-In ** NOTES **",?60,YDT
"RTN","LBRYCK5",9,0)
 W !!,LA0 W:$D(LA00) !,LA00 W !! S X1=X1+X2,X2=X2+16 I X2>X S X2=X
"RTN","LBRYCK5",10,0)
 I X1'<X G EXIT
"RTN","LBRYCK5",11,0)
 F I=X1+1:1:X2 S O=^UTILITY($J,"W",DIWL,I,0) W O,!
"RTN","LBRYCK5",12,0)
QUERY W !!,$S(I<X:"Continue// ",1:"Exit// ")
"RTN","LBRYCK5",13,0)
 S DTOUT="" R Z:DTIME E  S DTOUT=1 W $C(7) G EXIT
"RTN","LBRYCK5",14,0)
 I I'=X,Z="" G LOOP
"RTN","LBRYCK5",15,0)
 I I=X,Z="" G EXIT
"RTN","LBRYCK5",16,0)
 I Z="^" G EXIT
"RTN","LBRYCK5",17,0)
 W !!,$S(I'=X:"Enter '^' to exit or <CR> to continue",1:"Enter <CR> to exit") G QUERY
"RTN","LBRYCK5",18,0)
EXIT K XX,^UTILITY($J,"W") Q
"RTN","LBRYCSE")
0^9^B16957805
"RTN","LBRYCSE",1,0)
LBRYCSE ;ISC2/DJM-COPY SPECIFIC EDITING ;[ 11/26/97  4:35 PM ]
"RTN","LBRYCSE",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYCSE",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYCSE",4,0)
 . D ^LBRYASK
"RTN","LBRYCSE",5,0)
START W @IOF,?5,"VA Library Copy Specific Edit for "_LBRYNAM
"RTN","LBRYCSE",6,0)
 S Y=DT X ^DD("DD") W ?60,Y,! S YDT=Y
"RTN","LBRYCSE",7,0)
 S DIC="^LBRY(680,",DIC(0)="AEQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR&($P(^(0),U,2)="""")"
"RTN","LBRYCSE",8,0)
 D ^DIC K DIC("S") G:Y<0 CHOICE
"RTN","LBRYCSE",9,0)
 S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYCSE",10,0)
 S (E,E0,E1)=1 D CON
"RTN","LBRYCSE",11,0)
 S LBUDT=0,XXZ=$P(^LBRY(680,LBRYLOC,0),U,2) G:XXZ]"" INCOM
"RTN","LBRYCSE",12,0)
 I '$D(A(1)) G INCOM
"RTN","LBRYCSE",13,0)
CONT W @IOF,?5,"VA Library Copy Specific Edit",?60,YDT
"RTN","LBRYCSE",14,0)
 W !,"TITLE: ",$P(^LBRY(680.5,LBRYCLS,0),U),! K LA
"RTN","LBRYCSE",15,0)
 S LA(1)="ID",LA(2)="COPY",LA(3)="START",LA(4)="STOP",LA(5)="NUM",LA(6)="DATE"
"RTN","LBRYCSE",16,0)
 W !,LA(1),?10,LA(2),?30,LA(3),?55,LA(4)
"RTN","LBRYCSE",17,0)
 W !,LA(5),?10,LA(5),?30,LA(6),?55,LA(6)
"RTN","LBRYCSE",18,0)
 G:'$D(A(1)) INACT
"RTN","LBRYCSE",19,0)
 S E1=E0 D FWD1^LBRYCK0
"RTN","LBRYCSE",20,0)
 F I=E0:1:E1 S AA=^LBRY(681,A(I),1),CN=$P(AA,U),START=$P(AA,U,10),STOP=$P(AA,U,11) D FIXIT W !,?1,I,?11,CN,?27,START,?52,STOP
"RTN","LBRYCSE",21,0)
 G ^LBRYCSE0
"RTN","LBRYCSE",22,0)
REMOVE S E=0 G:$L(X)>0 KILL0
"RTN","LBRYCSE",23,0)
KILL W !,"Select a number from 'ID NUM' column to REMOVE that COPY from this title: "
"RTN","LBRYCSE",24,0)
 S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 G START
"RTN","LBRYCSE",25,0)
 I X="" Q
"RTN","LBRYCSE",26,0)
KILL0 I X="^" Q
"RTN","LBRYCSE",27,0)
 I X="?" W !,"Choose the 'ID NUM' of the COPY you want to REMOVE." G KILL
"RTN","LBRYCSE",28,0)
 I '$D(A(X)) W !,"There is no COPY by this number." G KILL
"RTN","LBRYCSE",29,0)
 S CN=$P(^LBRY(681,A(X),1),U),X1=0,L1=""
"RTN","LBRYCSE",30,0)
 F  S L1=$O(^LBRY(682,"C",LBRYLOC,L1)) G:L1="" KILL1 S L2=$O(^LBRY(682,L1,4,"B",CN,0)) I L2'="" W !,"This COPY # may not be REMOVED only EDITED." G KILL
"RTN","LBRYCSE",31,0)
KILL1 S DIK="^LBRY(681,",DA=A(X) D ^DIK K DIK
"RTN","LBRYCSE",32,0)
 Q
"RTN","LBRYCSE",33,0)
QUERY S E=0 G:$L(X)>0 EDIT0
"RTN","LBRYCSE",34,0)
EDIT W !,"Select a number from 'ID NUM' column to EDIT that COPY: "
"RTN","LBRYCSE",35,0)
 S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 G CONT
"RTN","LBRYCSE",36,0)
 I X="" Q
"RTN","LBRYCSE",37,0)
 I X="^" Q
"RTN","LBRYCSE",38,0)
EDIT0 I X="?" W !,"Choose the 'ID NUM' of the COPY you want to EDIT." G EDIT
"RTN","LBRYCSE",39,0)
 I '$D(A(X)) W !,"There is no COPY by this number." G EDIT
"RTN","LBRYCSE",40,0)
 S LBRYX0=$G(^LBRY(680,LBRYLOC,7)),DA=A(X),DIE="^LBRY(681,"
"RTN","LBRYCSE",41,0)
 S DR="[LBRY D2]",DIC=DIE D LOCK^LBRYEDR G:LBRYL=0 EXIT
"RTN","LBRYCSE",42,0)
 D ^DIE L  I $D(Y)!($D(DTOUT)) Q
"RTN","LBRYCSE",43,0)
 Q
"RTN","LBRYCSE",44,0)
ENTER S LBRYX0=$G(^LBRY(680,LBRYLOC,7))
"RTN","LBRYCSE",45,0)
ENTER1 I $L(X)>0,X="?" W !,"Use INSERT to add a new COPY to this title." S XZ="CONTINUE// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYCSE",46,0)
 S X=$P(LBRYX0,U) I X="" D  Q
"RTN","LBRYCSE",47,0)
 . W !!,"This title has no INITIAL COPIES ORDERED information."
"RTN","LBRYCSE",48,0)
 . W !,"Go to Library Title Setup to correct this."
"RTN","LBRYCSE",49,0)
 . S XZ="Exit// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYCSE",50,0)
 L ^LBRY(681,0) S X=^LBRY(681,0),X=$P(X,U,3) F  S X=X+1 I '$D(^LBRY(681,X,0)) L  Q
"RTN","LBRYCSE",51,0)
 K DO S DIC="^LBRY(681,",DIC(0)="LZ" D FILE^DICN L
"RTN","LBRYCSE",52,0)
 S DIE=DIC,DA=+Y,DR="[LBRY D2]" D LOCK^LBRYEDR G:LBRYL=0 EXIT
"RTN","LBRYCSE",53,0)
 D ^DIE L  I $D(Y)!($D(DTOUT)) Q
"RTN","LBRYCSE",54,0)
 Q
"RTN","LBRYCSE",55,0)
INCOM W !,"This title is "_$S(XXZ="C":"cancelled",XXZ="D":"a dead title",XXZ="R":"a renamed title",1:"not completely set up")_"."
"RTN","LBRYCSE",56,0)
 W:XXZ="" !,"Go to Library Title Setup (LTS) to finish setting up this title."
"RTN","LBRYCSE",57,0)
 S XZ="Continue// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYCSE",58,0)
 G START
"RTN","LBRYCSE",59,0)
CON K A S (LX,A)=0
"RTN","LBRYCSE",60,0)
 F  S LX=$O(^LBRY(681,"AC",LBRYLOC,LX)) Q:LX=""  S NC="" D
"RTN","LBRYCSE",61,0)
 . F  S NC=$O(^LBRY(681,"AC",LBRYLOC,LX,NC)) Q:NC=""  S A=A+1,A(A)=NC
"RTN","LBRYCSE",62,0)
 Q
"RTN","LBRYCSE",63,0)
FIXIT S:START="" START="-----------" I START=+START S Y=START X ^DD("DD") S START=Y
"RTN","LBRYCSE",64,0)
 S:STOP="" STOP="-----------" I STOP=+STOP S Y=STOP X ^DD("DD") S STOP=Y
"RTN","LBRYCSE",65,0)
 Q
"RTN","LBRYCSE",66,0)
CHOICE I $D(LBRYNEW) I LBRYNEW=1 D EXIT G ^LBRYLST
"RTN","LBRYCSE",67,0)
 G EXIT
"RTN","LBRYCSE",68,0)
INACT S $P(^LBRY(680,LBRYLOC,0),U,2)="C",$P(^LBRY(680.5,LBRYLOC,0),U,2)=2
"RTN","LBRYCSE",69,0)
 W !!!,"Since you just removed the last copy for this title I am making this",!,"a CANCELLED TITLE.",!
"RTN","LBRYCSE",70,0)
NOT1 S XZ="EXIT//" D PAUSE^LBRYUTL K XZ
"RTN","LBRYCSE",71,0)
EXIT K YDT,E,E0,E1,A,I,X,Z,LX,LS,LBUDT,XXZ,LA,AA,CN,START,STOP,X1,X2,L1,L2
"RTN","LBRYCSE",72,0)
 K LBRYX0,LBRYNEW,DR,LBRYL,XZ,DIC,DIE,DIK,LBRYLOC,LBRYCLS
"RTN","LBRYCSE",73,0)
 Q
"RTN","LBRYCSE0")
0^10^B7123215
"RTN","LBRYCSE0",1,0)
LBRYCSE0 ;ISC2/DJM-COPY SPECIFIC EDITING ;[ 06/03/97  4:16 PM ]
"RTN","LBRYCSE0",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYCSE0",3,0)
START F I=1:1:3 S LS(I)=""
"RTN","LBRYCSE0",4,0)
 I $D(A(1)) S LS(1)=", (E)dit, (R)emove"
"RTN","LBRYCSE0",5,0)
 S:$D(A(E0-1)) LS(2)=", (B)ackup"
"RTN","LBRYCSE0",6,0)
 S:$D(A(E1+1)) LS(3)=", (F)orward"
"RTN","LBRYCSE0",7,0)
 S LINE="Choose: (I)nsert"_LS(1)_LS(2)_LS(3)_"."
"RTN","LBRYCSE0",8,0)
 W !!,LINE,"  Exit// "
"RTN","LBRYCSE0",9,0)
ASK S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 G ^LBRYCSE
"RTN","LBRYCSE0",10,0)
 I X="" G ^LBRYCSE
"RTN","LBRYCSE0",11,0)
 I X=" " S:$D(^TMP("LBRY",DUZ,7)) X=^(7)
"RTN","LBRYCSE0",12,0)
 I X="??" S XQH="LBRY CSE CHOICE PROMPT" D EN^XQH G CONT^LBRYCSE
"RTN","LBRYCSE0",13,0)
 I X="^" G ^LBRYCSE
"RTN","LBRYCSE0",14,0)
 I $L(X)=2,"Bb"[$E(X,1),"?"[$E(X,2) D  G PAS
"RTN","LBRYCSE0",15,0)
 . W !,"You may BACKUP to any 'ID NUM' before the lowest one on the screen."
"RTN","LBRYCSE0",16,0)
 I $L(X)=2,"Ff"[$E(X,1),"?"[$E(X,2) D  G PAS
"RTN","LBRYCSE0",17,0)
 . W !,"You may go FORWARD to any 'ID NUM' including the lowest one on the screen."
"RTN","LBRYCSE0",18,0)
 I $D(A(E0-1)),"Bb"[$E(X,1) D UTIL,BACKUP^LBRYCK0 G CONT^LBRYCSE
"RTN","LBRYCSE0",19,0)
 I $D(A(E1+1)),"Ff"[$E(X,1) D UTIL,FORWARD^LBRYCK0 G CONT^LBRYCSE
"RTN","LBRYCSE0",20,0)
 I "Rr"[$E(X,1) D UTIL S X=$E(X,2,999) D REMOVE^LBRYCSE G:$G(DTOUT) KILL D CON^LBRYCSE S LBUDT=1 G CONT^LBRYCSE
"RTN","LBRYCSE0",21,0)
 I "Ee"[$E(X,1) D UTIL S X=$E(X,2,999) D QUERY^LBRYCSE G:'$D(YDT) KILL G CONT^LBRYCSE
"RTN","LBRYCSE0",22,0)
 I "Ii"[$E(X,1),$L(X)>1,$E(X,2)'="?" D  G PAS
"RTN","LBRYCSE0",23,0)
 . W !,"You may only add a '?' to an 'I' choice."
"RTN","LBRYCSE0",24,0)
 I "Ii"[$E(X,1) D UTIL S X=$E(X,2) D ENTER^LBRYCSE G:'$D(YDT) KILL D CON^LBRYCSE G CONT^LBRYCSE
"RTN","LBRYCSE0",25,0)
 W !!,"You can select I, E, R, B or F if they are in the above prompt."
"RTN","LBRYCSE0",26,0)
 W !,"You may enter a '?' after any choice for help.  Enter '??' for more help."
"RTN","LBRYCSE0",27,0)
PAS S XZ="Continue// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYCSE0",28,0)
 G CONT^LBRYCSE
"RTN","LBRYCSE0",29,0)
UTIL K ^TMP("LBRY",DUZ,7) S ^(7)=X Q
"RTN","LBRYCSE0",30,0)
UDT NEW I S (COPY,TOTAL,CO681)=0,LBCLS=D0
"RTN","LBRYCSE0",31,0)
 F  S COPY=$O(^LBRY(681,"AC",LBCLS,COPY)) Q:COPY'>0  D
"RTN","LBRYCSE0",32,0)
 . S COPY1=0 F  S COPY1=$O(^LBRY(681,"AC",LBCLS,COPY,COPY1)) Q:COPY1'>0  D
"RTN","LBRYCSE0",33,0)
 . . S COPY2=$G(^LBRY(681,COPY1,1)),START=$P(COPY2,U,10),STOP=$P(COPY2,U,11)
"RTN","LBRYCSE0",34,0)
 . . I START="",STOP="" S CO681=CO681+1 Q
"RTN","LBRYCSE0",35,0)
 . . I START]"",STOP="",START-DT<1 S CO681=CO681+1 Q
"RTN","LBRYCSE0",36,0)
 . . I START="",STOP]"",STOP-DT'<0 S CO681=CO681+1 Q
"RTN","LBRYCSE0",37,0)
 . . I START]"",STOP]"",START-DT<1,STOP-DT'<0 S CO681=CO681+1
"RTN","LBRYCSE0",38,0)
FINI S:($G(CO681))=0 CO681="" S X=CO681
"RTN","LBRYCSE0",39,0)
KILL K COPY,COPY1,COPY2,I,LS,LBCLS,LBUDT,LINE,TOTAL,XQH,START,STOP,CO681
"RTN","LBRYCSE0",40,0)
 Q
"RTN","LBRYEDI")
0^11^B4232362
"RTN","LBRYEDI",1,0)
LBRYEDI ;ISC2/DJM-FILE 680 ADDITIONAL EDIT OPTIONS ;[ 05/23/97  12:13 PM ]
"RTN","LBRYEDI",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYEDI",3,0)
 ;
"RTN","LBRYEDI",4,0)
HOL I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYEDI",5,0)
 . D ^LBRYASK
"RTN","LBRYEDI",6,0)
 W @IOF,"VA Library Serials Holdings Edit for "_LBRYNAM
"RTN","LBRYEDI",7,0)
 S Y=DT X ^DD("DD") S YDT=Y W ?60,Y,!
"RTN","LBRYEDI",8,0)
 S DIC="^LBRY(680,",DIC(0)="AEMQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR&($P(^(0),U,2)="""")"
"RTN","LBRYEDI",9,0)
 D ^DIC
"RTN","LBRYEDI",10,0)
 G:Y<0 EXIT S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYEDI",11,0)
 S LA0="TITLE: "_$P(^LBRY(680.5,LBRYCLS,0),U),DA=LBRYLOC
"RTN","LBRYEDI",12,0)
 W @IOF,?5,"VA Library Serials Bibliographic Edit",?60,YDT,!!,LA0,!!
"RTN","LBRYEDI",13,0)
 S DIE="^LBRY(680,",DR="[LBRY BIBLIOGRAPHIC ENTRY]",DIC=DIE
"RTN","LBRYEDI",14,0)
 D LOCK^LBRYEDR G:LBRYL=0 EXIT D ^DIE K DIE,DR L
"RTN","LBRYEDI",15,0)
 G HOL
"RTN","LBRYEDI",16,0)
PIE I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYEDI",17,0)
 . D ^LBRYASK
"RTN","LBRYEDI",18,0)
 W @IOF,"VA Library Serials Purchasing Information for "_LBRYNAM
"RTN","LBRYEDI",19,0)
 S Y=DT X ^DD("DD") S YDT=Y W ?60,Y,!
"RTN","LBRYEDI",20,0)
 S DIC="^LBRY(680,",DIC(0)="AEMQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR&($P(^(0),U,2)="""")"
"RTN","LBRYEDI",21,0)
 D ^DIC
"RTN","LBRYEDI",22,0)
 G:Y<0 EXIT S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYEDI",23,0)
 S LA0="TITLE: "_$P(^LBRY(680.5,LBRYCLS,0),U),DA=LBRYLOC
"RTN","LBRYEDI",24,0)
 W @IOF,?5,"VA Library Serials Purchasing Information",?60,YDT,!!,LA0,!!
"RTN","LBRYEDI",25,0)
 S DIE="^LBRY(680,",DR="[LBRY FINANCIAL ENTRY]",DIC=DIE
"RTN","LBRYEDI",26,0)
 D LOCK^LBRYEDR G:LBRYL=0 EXIT D ^DIE K DIE,DR L
"RTN","LBRYEDI",27,0)
 G PIE
"RTN","LBRYEDI",28,0)
EXIT K DIC,DIE,YDT,LA0,DR,LBRYL,LBRYCLS,LBRYLOC,LBRTDA
"RTN","LBRYEDI",29,0)
 Q
"RTN","LBRYEDI",30,0)
NTIT ;  Special cross-reference for new titles
"RTN","LBRYEDI",31,0)
 I $G(LBRYNEW)=1 S $P(^LBRY(680,DA,5),U)=DT I $D(^LBRY(680.5,LBRYCLS,0)) S $P(^(0),U,2)=1
"RTN","LBRYEDI",32,0)
 Q
"RTN","LBRYEDR")
0^12^B985166
"RTN","LBRYEDR",1,0)
LBRYEDR ;ISC2/DJM-LIBRARY EDIT ROUTINES ;[ 05/23/97  12:13 PM ]
"RTN","LBRYEDR",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYEDR",3,0)
SUB W @IOF,"VA Library Serials Subject Setup for "_LBRYNAM
"RTN","LBRYEDR",4,0)
 S Y=DT X ^DD("DD") W "   ",Y,!!!
"RTN","LBRYEDR",5,0)
 S DIC="^LBRY(680.3,",DIC(0)="AELQZ",DLAYGO=680.3
"RTN","LBRYEDR",6,0)
 L ^LBRY(680.3,0) D ^DIC L  K DLAYGO G:Y<0 EXIT
"RTN","LBRYEDR",7,0)
 S DA=+Y,DIE=DIC,DR=".01" D LOCK G:LBRYL=0 EXIT D ^DIE L
"RTN","LBRYEDR",8,0)
 G SUB
"RTN","LBRYEDR",9,0)
LOCK ;LOCK GLOBAL BEING ACCESSED BY A USER
"RTN","LBRYEDR",10,0)
 L @(DIC_DA_"):1") S LBRYL=$T
"RTN","LBRYEDR",11,0)
 I LBRYL=0 D
"RTN","LBRYEDR",12,0)
 . W !!,$C(7),"This entry is being used by another user.  Try later."
"RTN","LBRYEDR",13,0)
 . S XZ="CONTINUE// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYEDR",14,0)
 Q
"RTN","LBRYEDR",15,0)
EXIT K DIC,DIE,DR,LBRYL,DA
"RTN","LBRYEDR",16,0)
 Q
"RTN","LBRYET2")
0^14^B3860459
"RTN","LBRYET2",1,0)
LBRYET2 ;ISC2/DJM-INPUT TRANSFORMS FOR 681 ;[ 07/09/97  6:36 PM ]
"RTN","LBRYET2",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYET2",3,0)
EN5 ;EDIT TRANSFORM FOR COPY NUMBER (^LBRY(681,1)
"RTN","LBRYET2",4,0)
 I $G(LBRYLOC)="" Q
"RTN","LBRYET2",5,0)
 S X2=$G(^LBRY(680,LBRYLOC,7)),X3=$P(X2,U,1) I X3<1 K X,X2,X3 Q
"RTN","LBRYET2",6,0)
 S X1=X-.1,X1=$O(^LBRY(681,"AC",LBRYLOC,X1)) K:X1=X X
"RTN","LBRYET2",7,0)
 W:'$D(X) !,"This copy number is already used for this title."
"RTN","LBRYET2",8,0)
 K X2,X3 Q
"RTN","LBRYET2",9,0)
E7 ;COPY NUMBER (^LBRY(681,1) HELP MESSAGE
"RTN","LBRYET2",10,0)
 S LDFX=$P(^LBRY(681,DA,0),U,2) G:$P(^LBRY(680,LDFX,0),U,2)]"" E70
"RTN","LBRYET2",11,0)
 W "If you choose a COPY NUMBER and select ROUTED or ROUTED TO RETURN at COPY"
"RTN","LBRYET2",12,0)
 W !,"DISPOSITION you will be asked for a routing list. The routing slip will"
"RTN","LBRYET2",13,0)
 W !,"list all persons, places etc. in the ROUTING ORDER you selected."
"RTN","LBRYET2",14,0)
 W !!,"If you choose ToC (Table of Contents) you will be asked for a routing list."
"RTN","LBRYET2",15,0)
 W !,"A separate routing slip will be produced for each entry in the Table of"
"RTN","LBRYET2",16,0)
 W !,"Contents routing list.",!
"RTN","LBRYET2",17,0)
 G EXE7
"RTN","LBRYET2",18,0)
E70 S XXZ=$S($P(^LBRY(680,LDFX,0),U,2)]"":$P(^(0),U,2),1:"")
"RTN","LBRYET2",19,0)
 W !,"This title is ",$S(XXZ="C":"cancelled",XXZ="D":"a dead title",XXZ="R":"renamed",1:"not completely set up"),"."
"RTN","LBRYET2",20,0)
 W:XXZ="" "  Complete the COPIES ORDERED entry using"
"RTN","LBRYET2",21,0)
 W !,"LTS before entering any copy specific information here."
"RTN","LBRYET2",22,0)
EXE7 K XXZ Q
"RTN","LBRYET3")
0^75^B408866
"RTN","LBRYET3",1,0)
LBRYET3 ;ISC2/DJM-ROUTINES USED IN FILEMAN FOR 680.5 ;[ 09/05/97  5:40 PM ]
"RTN","LBRYET3",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYET3",3,0)
IT1 ;INPUT TRANSFORM FOR FILE 680.5, FIELD .01.
"RTN","LBRYET3",4,0)
 ;Capitalize the title and removed leading & trailing blanks
"RTN","LBRYET3",5,0)
 S X=$$UP^XLFSTR(X)
"RTN","LBRYET3",6,0)
E1 I $E(X,1,1)=" " S X=$E(X,2,999)
"RTN","LBRYET3",7,0)
 I $E(X,$L(X),$L(X))=" " S X=$E(X,1,$L(X)-1)
"RTN","LBRYET3",8,0)
 I $E(X,1,1)=" "!($E(X,$L(X),$L(X))=" ") G E1
"RTN","LBRYET3",9,0)
E2 K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>160!($L(X)<1)!'(X'?1P.E) X
"RTN","LBRYET3",10,0)
 I $E(X,1,4)="THE " S X=$E(X,5,999)
"RTN","LBRYET3",11,0)
 Q
"RTN","LBRYFINP")
0^83^B3231841
"RTN","LBRYFINP",1,0)
LBRYFINP ;SSI/ALA-FORUM INPUT CHECKS ;[ 07/22/97  3:23 PM ]
"RTN","LBRYFINP",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYFINP",3,0)
PP ;  Prediction Pattern Input
"RTN","LBRYFINP",4,0)
 Q:$G(LBRYNEW)=1
"RTN","LBRYFINP",5,0)
 NEW DIC,DIE,DR,DA
"RTN","LBRYFINP",6,0)
 S TY=$S(OPP="":"ADDED",NPP="":"DELETED",1:"CHANGED")
"RTN","LBRYFINP",7,0)
 S TYP="CPT" NEW X D FTRN^LBRYUTL S $P(^LBRY(682.1,LBRYDA,0),U,8)=TY
"RTN","LBRYFINP",8,0)
 S $P(^LBRY(682.1,LBRYDA,1),U)=$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYFINP",9,0)
 I OPP'="" NEW X,LBRYCLS S LBRYCLS=OPP D PRP^LBRYTRN
"RTN","LBRYFINP",10,0)
 K OPP,NPP,TY,TYP,LBRYDA
"RTN","LBRYFINP",11,0)
 Q
"RTN","LBRYFINP",12,0)
FR ;  Frequency Input
"RTN","LBRYFINP",13,0)
 Q:$G(LBRYNEW)=1
"RTN","LBRYFINP",14,0)
 NEW DIC,DIE,DR,DA
"RTN","LBRYFINP",15,0)
 S TY=$S(OFR="":"ADDED",NFR="":"DELETED",1:"CHANGED")
"RTN","LBRYFINP",16,0)
 S TYP="CFQ" NEW X D FTRN^LBRYUTL S $P(^LBRY(682.1,LBRYDA,0),U,8)=TY
"RTN","LBRYFINP",17,0)
 S $P(^LBRY(682.1,LBRYDA,1),U)=$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYFINP",18,0)
 I OFR'="" NEW X S FRQ=OFR D FRQ^LBRYTRN
"RTN","LBRYFINP",19,0)
 K OFR,NFR,TY,TYP,LBRYDA
"RTN","LBRYFINP",20,0)
 Q
"RTN","LBRYFINP",21,0)
LS ;  Last Issue Input
"RTN","LBRYFINP",22,0)
 Q:$G(LBRYNEW)=1
"RTN","LBRYFINP",23,0)
 NEW DIC,DIE,DR,DA
"RTN","LBRYFINP",24,0)
 Q:$P($G(^LBRY(680.5,LBRYCLS,3)),U,4)=""
"RTN","LBRYFINP",25,0)
 S TYP="TCP" NEW X D FTRN^LBRYUTL S $P(^LBRY(682.1,LBRYDA,0),U,8)="CEASED"
"RTN","LBRYFINP",26,0)
 S $P(^LBRY(682.1,LBRYDA,1),U)=$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYFINP",27,0)
 S $P(^LBRY(682.1,LBRYDA,4),U,3)=$P(^LBRY(680.5,LBRYCLS,3),U,4)
"RTN","LBRYFINP",28,0)
 K OLS,NLS,TYP,LBRYDA
"RTN","LBRYFINP",29,0)
 Q
"RTN","LBRYFINP",30,0)
TCN ;  SERLINE Unique Identifier input check
"RTN","LBRYFINP",31,0)
 I $D(X) I $L(X)>9!($L(X)<9) K X Q
"RTN","LBRYFINP",32,0)
 I $E(X,1,2)="SR",$E(X,3,9)?.N Q
"RTN","LBRYFINP",33,0)
 I $E(X,1,1)?.A,$E(X,2,9)?.N Q
"RTN","LBRYFINP",34,0)
 S TXT="SERLINE Title Control Number format is: SR####### or A-Z followed by all numbers"
"RTN","LBRYFINP",35,0)
 D EN^DDIOL(TXT,"","!!")
"RTN","LBRYFINP",36,0)
 K X,TCN
"RTN","LBRYFINP",37,0)
 Q
"RTN","LBRYHD")
1^81
"RTN","LBRYHIS")
0^18^B11619109
"RTN","LBRYHIS",1,0)
LBRYHIS ;ISC2/DJM-SERIALS HISTORY OF CHECK-IN ;[ 03/16/98  1:32 PM ]
"RTN","LBRYHIS",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYHIS",3,0)
EN I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYHIS",4,0)
 . D ^LBRYASK
"RTN","LBRYHIS",5,0)
 D CKIN G:Y<0 EXIT
"RTN","LBRYHIS",6,0)
 S X=$O(^LBRY(681,"AC",LBRYLOC,0)) G:X="" NOT
"RTN","LBRYHIS",7,0)
 S X=$O(^LBRY(682,"AC",LBRYLOC,0)) G:X="" NOT2
"RTN","LBRYHIS",8,0)
CONT S (E,E0,E1)=0 D MORE
"RTN","LBRYHIS",9,0)
 G:'$D(A(1)) DISPLAY
"RTN","LBRYHIS",10,0)
CONT1 S E=0,V1=$O(^LBRY(682,"A1",LBRYLOC,9999998-YDT1)) G:V1="" INIT
"RTN","LBRYHIS",11,0)
 S E1=$O(^LBRY(682,"A1",LBRYLOC,V1,0))
"RTN","LBRYHIS",12,0)
 F I=1:1 G:'$D(A(I)) INIT S:A(I)=E1 E=I G:E>0 INIT
"RTN","LBRYHIS",13,0)
INIT S E1=E-3 S:E1<1 E1=1 S E0=E1 D FWD1^LBRYCK0 G DISPLAY
"RTN","LBRYHIS",14,0)
CKIN W @IOF,?5,"VA Library Serials History of Check-In for "_LBRYNAM
"RTN","LBRYHIS",15,0)
 S (YDT1,Y)=DT X ^DD("DD") W "   ",Y,! S YDT=Y
"RTN","LBRYHIS",16,0)
 S DIC="^LBRY(680,",DIC(0)="AEMQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR"
"RTN","LBRYHIS",17,0)
 D ^DIC K DIC("S")
"RTN","LBRYHIS",18,0)
 Q:Y<0  S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYHIS",19,0)
 S LA0=$P(^LBRY(680.5,LBRYCLS,0),U),LA00=""
"RTN","LBRYHIS",20,0)
 S:$D(^LBRY(680,LBRYLOC,1)) LA00="  "_$P(^(1),U,5)
"RTN","LBRYHIS",21,0)
 S LA0="TITLE: "_LA0
"RTN","LBRYHIS",22,0)
 Q
"RTN","LBRYHIS",23,0)
MORE S N="",A(1)="",LA1="JOURNAL",LA2="DATE",LA3="V(I)",LA4="CPY'S"
"RTN","LBRYHIS",24,0)
 S LA5="COPIES",LA6="RECEIVED",LA7="ORD'D",LA8="COMPLETED"
"RTN","LBRYHIS",25,0)
 S LA9="DISPOSITION",LA10="RCV'D"
"RTN","LBRYHIS",26,0)
 F I=1:1 S:A(I)="" N=$O(^LBRY(682,"AC",LBRYLOC,N)) G:N="" MORE1 D
"RTN","LBRYHIS",27,0)
 . S A(I)=$O(^LBRY(682,"AC",LBRYLOC,N,A(I)))
"RTN","LBRYHIS",28,0)
 . S:$O(^LBRY(682,"AC",LBRYLOC,N,A(I)))>0 A(I+1)=A(I)
"RTN","LBRYHIS",29,0)
 . S:$O(^LBRY(682,"AC",LBRYLOC,N,A(I)))="" A(I+1)=""
"RTN","LBRYHIS",30,0)
MORE1 K A(I) S II=E Q
"RTN","LBRYHIS",31,0)
DISPLAY ;  Show issues
"RTN","LBRYHIS",32,0)
DISP0 W @IOF,?5,"VA Library History of Check-In for "_LBRYNAM_"   "_YDT
"RTN","LBRYHIS",33,0)
 W !!,LA0,!,LA00,!!,"ID",?6,LA1,?41,LA2,?52,LA4,?59,LA4,?66,LA9
"RTN","LBRYHIS",34,0)
 W !,"NUM",?7,LA2,?20,LA3,?41,LA6,?52,LA7,?59,LA10,?66,LA8,!
"RTN","LBRYHIS",35,0)
 F I=1:1:77 W "-"
"RTN","LBRYHIS",36,0)
 W !
"RTN","LBRYHIS",37,0)
 S AA="",RTD=0 G:E0=0 ASK1 F I=E0:1:E1 S AA=^LBRY(682,A(I),1),RTD=0,RFLAG=0,MR=0,RTD1="" D RTED,DISPX,DISP1
"RTN","LBRYHIS",38,0)
 ;  Display to user their options
"RTN","LBRYHIS",39,0)
ASK1 D ^LBRYHIS0
"RTN","LBRYHIS",40,0)
 ;  Go select user's option.  State error prompt if needed
"RTN","LBRYHIS",41,0)
ASK3 G ASK3^LBRYHIS0
"RTN","LBRYHIS",42,0)
RTED S MR=$O(^LBRY(682,A(I),4,MR)) Q:MR'>0
"RTN","LBRYHIS",43,0)
 S BB=$G(^LBRY(682,A(I),4,MR,0)),BB2=$P(BB,U,2),BB1=$P(BB,U)
"RTN","LBRYHIS",44,0)
 S:BB2<4&(BB1'="ToC") RTD=RTD+1 S:BB1="ToC" BB1="T"
"RTN","LBRYHIS",45,0)
 I BB2<4,RTD<5 S RTD1=RTD1_BB1_"," G RTED
"RTN","LBRYHIS",46,0)
 I BB2<4,RTD'<5,RFLAG=0 S RTD1=$E(RTD1,1,$L(RTD1)-1)_"...",RFLAG=1
"RTN","LBRYHIS",47,0)
 G RTED
"RTN","LBRYHIS",48,0)
DISPX S AA1=$P(AA,U),AA2=$P(AA,U,2),AA3=$P(AA,U,3),AA4=$P(AA,U,4)
"RTN","LBRYHIS",49,0)
 S AA5=$P(AA,U,5),AA6=""
"RTN","LBRYHIS",50,0)
 S:$D(^LBRY(682,A(I),4,1,0)) AA6=$P(^(0),U,7) I AA4=0 S AA4=""
"RTN","LBRYHIS",51,0)
 S RTDA=$S(RTD=AA5:"   ALL",1:RTD1)
"RTN","LBRYHIS",52,0)
 S:AA3'="" AA2=AA2_"("_AA3_")" S Y=AA1 X ^DD("DD") S AA1=Y
"RTN","LBRYHIS",53,0)
 I AA6'="" S Y=AA6 X ^DD("DD") S AA6=Y
"RTN","LBRYHIS",54,0)
 Q
"RTN","LBRYHIS",55,0)
DISP1 W !,I,?5,AA1,?18,AA2,?40,AA6,?54,AA5,?61,AA4,?66,RTDA
"RTN","LBRYHIS",56,0)
 Q
"RTN","LBRYHIS",57,0)
NOT W !!,LA0,!!,"This title is not fully initialized."
"RTN","LBRYHIS",58,0)
 W !,"Please use SET to set up this title."
"RTN","LBRYHIS",59,0)
NOT1 S XZ="Exit// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYHIS",60,0)
 G EN
"RTN","LBRYHIS",61,0)
NOT2 W !!,LA0,!!,"There are no Journal Date entries for this title." G NOT1
"RTN","LBRYHIS",62,0)
EXIT K %,%DT,%X,LA0,LA1,LA2,LA3,LA4,LA5,LA6,LA7,LA8,LA9,LA10,A,I,II,IA,I1
"RTN","LBRYHIS",63,0)
 K J,AA,AA1,AA2,AA3,AA4,AA5,AA6,AA7,AA8,AB,AB1,AB2,CA,CA1,DIC,DIW,DIWF
"RTN","LBRYHIS",64,0)
 K DIWL,DIWR,DIWT,DIWTC,DIWX,CLR,LL,DN,DR,DX,DY,N,O,X1,X2,XX,Z,LB,LB1
"RTN","LBRYHIS",65,0)
 K LB2,MM,E,E0,E1,V1,X,YDT,LA00,RTD,MR,RTD1,XT1,XT2,XT3,XT4,XQH,LA11,N2
"RTN","LBRYHIS",66,0)
 K LS,LINE1,LINE2,XTA,XTB,XTC,XTD,XTE,RC,RR,N1,RR1,RR2,RR3,RR4,RR5,RR6
"RTN","LBRYHIS",67,0)
 K RR7,RR8,RRX,RRY,RRX0,BB,BB1,BB2,RFLAG,RTDA,YDT1,LBRYCLS,LBRYLOC
"RTN","LBRYHIS",68,0)
 Q
"RTN","LBRYHIS0")
0^84^B6034597
"RTN","LBRYHIS0",1,0)
LBRYHIS0 ;ISC2/DJM-HISTORY OF CHECK-IN OUTPUT MSG ;[ 06/26/96  12:05 PM ]
"RTN","LBRYHIS0",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYHIS0",3,0)
 ;
"RTN","LBRYHIS0",4,0)
START F I=1:1:7 S LS(I)=""
"RTN","LBRYHIS0",5,0)
 S XT1=$S($D(^LBRY(680,DA,16,0)):1,1:0),XT2=$S($D(A(E0-1)):1,1:0),XT3=$S($D(A(E1+1)):1,1:0),XT4=$S($D(A(1)):1,1:0),LS(1)="Choose: " S:XT4 LS(2)=$C(34)_"ID NUM"_$C(34)_" to see history of check-in"
"RTN","LBRYHIS0",6,0)
 S:XT1 LS(5)="see check-in (N)otes" S:XT2 LS(6)="(B)ackup" S:XT3 LS(7)="(F)orward"
"RTN","LBRYHIS0",7,0)
 S (LINE1,LINE2)="" F I=1:1:7 Q:$L(LINE1)+$L(LS(I))'<78  S:LS(I)]"" LINE1=LINE1_LS(I) K LS(I) I I>1&($D(LS(I+1))) S:LS(I+1)]"" LINE1=LINE1_", "
"RTN","LBRYHIS0",8,0)
 I '$D(LS(7)) S LINE1=LINE1_"." G PRINT
"RTN","LBRYHIS0",9,0)
 F J=I:1:7 S:LS(J)]"" LINE2=LINE2_LS(J) K LS(J) I J<7&($D(LS(J+1))) S:LS(J+1)]"" LINE2=LINE2_", "
"RTN","LBRYHIS0",10,0)
 S LINE2=LINE2_"."
"RTN","LBRYHIS0",11,0)
PRINT W !!,LINE1,! W:$D(LINE2) LINE2,! W "Exit// "
"RTN","LBRYHIS0",12,0)
EXIT K LINE1,LINE2,I,J Q
"RTN","LBRYHIS0",13,0)
 ;LIBRARY SERIALS WHAT-TO-DO PROMPT (FROM LBRYHIS)
"RTN","LBRYHIS0",14,0)
ASK3 S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 G ^LBRYHIS
"RTN","LBRYHIS0",15,0)
 I X="" G ^LBRYHIS
"RTN","LBRYHIS0",16,0)
 I X=" " S:$D(^TMP("LBRY",DUZ,4)) X=^(4)
"RTN","LBRYHIS0",17,0)
 I X="??" S XQH="LBRY SERIALS VIEW" D EN^XQH G DISPLAY^LBRYHIS
"RTN","LBRYHIS0",18,0)
 I X="^" G ^LBRYHIS
"RTN","LBRYHIS0",19,0)
 I $D(A(E0-1)),"Bb"[$E(X,1) D BACKUP^LBRYCK0 G DISPLAY^LBRYHIS
"RTN","LBRYHIS0",20,0)
 I $D(A(E1+1)),"Ff"[$E(X,1) D FORWARD^LBRYCK0 G DISPLAY^LBRYHIS
"RTN","LBRYHIS0",21,0)
 I $D(^LBRY(680,DA,16,0)),"Nn"[X D UTIL,^LBRYHIS2 G DISPLAY^LBRYHIS
"RTN","LBRYHIS0",22,0)
ASK2 I $D(A(X)) D UTIL G ^LBRYHIS1
"RTN","LBRYHIS0",23,0)
WRONG S E=0,XTA="",XTB="",XTC="",XTD="",XTE="" S:$D(A(1)) XTA="a number under heading "_$C(34)_"ID NUM"_$C(34)
"RTN","LBRYHIS0",24,0)
 S XTC=$S(XT1&((XT2)!(XT3)):", N",1:""),XTD=$S(XT2&(XT3):", B or F.",XT2!(XT3):" or ",1:".") G:XTD["." WRONG1
"RTN","LBRYHIS0",25,0)
 S XTE=$S(XT2:"B.",XT3:"F.",1:"")
"RTN","LBRYHIS0",26,0)
WRONG1 W !!,"Enter "_XTA_XTB_XTC_XTD_XTE,!,"Enter '??' for more help.",!!,"Choose: Exit// " D MORE^LBRYHIS G ASK3
"RTN","LBRYHIS0",27,0)
UTIL K ^TMP("LBRY",DUZ,4) S ^(4)=X Q
"RTN","LBRYHIS1")
0^20^B4953453
"RTN","LBRYHIS1",1,0)
LBRYHIS1 ;ISC2/DJM-HISTORY OF CHECK-IN ROUT.,INDIV. COPIES ;[ 05/23/97  12:13 PM ]
"RTN","LBRYHIS1",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYHIS1",3,0)
CK D CHECK,SHOW G FINI
"RTN","LBRYHIS1",4,0)
CHECK K RC
"RTN","LBRYHIS1",5,0)
 S LA0=$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYHIS1",6,0)
 S LA1="JOURNAL",LA2="DATE",LA3="V(I)",LA8="COMPLETED",LA5="COPIES"
"RTN","LBRYHIS1",7,0)
 S LA6="RECEIVED",LA11="ORDERED",LA0="TITLE: "_LA0,LA00=""
"RTN","LBRYHIS1",8,0)
 S:$G(^LBRY(680,LBRYLOC,1))'="" LA00="  "_$P(^(1),U,5)
"RTN","LBRYHIS1",9,0)
 S RTD=0 D RTED S:RTD=0 RTD=""
"RTN","LBRYHIS1",10,0)
 S AA=^LBRY(682,A(X),1),AA1=$P(AA,U),AA2=$P(AA,U,2),AA3=$P(AA,U,3)
"RTN","LBRYHIS1",11,0)
 S AA4=$P(AA,U,4),AA5=$P(AA,U,5) S:AA3'="" AA2=AA2_"("_AA3_")"
"RTN","LBRYHIS1",12,0)
 I AA4=0 S AA4=""
"RTN","LBRYHIS1",13,0)
 S Y=AA1 X ^DD("DD") S AA1=Y
"RTN","LBRYHIS1",14,0)
 W @IOF,"VA Library History of Check-in",?60,YDT
"RTN","LBRYHIS1",15,0)
 W !!,LA0,!,LA00,!!,?5,LA1,?41,LA5,?50,LA5,?60,LA5
"RTN","LBRYHIS1",16,0)
 W !,?5,LA2,?21,LA3,?41,LA11,?50,LA6,?60,LA8,!
"RTN","LBRYHIS1",17,0)
 W ?5 F I=1:1:64 W "-"
"RTN","LBRYHIS1",18,0)
 W !,?5,AA1,?18,AA2,?44,AA5,?53,AA4,?63,RTD,!
"RTN","LBRYHIS1",19,0)
 Q
"RTN","LBRYHIS1",20,0)
RTED S N=0 F  S N=$O(^LBRY(682,A(X),4,N)) Q:N'>0  S N2=^LBRY(682,A(X),4,N,0) I $P(N2,U,2)<4&($P(N2,U,1)'="ToC") S RTD=RTD+1
"RTN","LBRYHIS1",21,0)
 Q
"RTN","LBRYHIS1",22,0)
SHOW S N=0 W !,?6,"C",?58,"LIBRARY",!,?6,"A",?45,"DATE",?58,"SITE"
"RTN","LBRYHIS1",23,0)
 W !,?6,"T",?8,"STATUS",?28,"LOCATION",?45,"RECEIVED",?58,"LOCATION"
"RTN","LBRYHIS1",24,0)
 W !,?6 F I=1:1:73 W "-"
"RTN","LBRYHIS1",25,0)
SH S N=$O(^LBRY(682,A(X),4,"B",N)) Q:N=""
"RTN","LBRYHIS1",26,0)
 S N1=$O(^LBRY(682,A(X),4,"B",N,0))
"RTN","LBRYHIS1",27,0)
 S RR=^LBRY(682,A(X),4,N1,0),RR1=$P(RR,U,1),RR2=$P(RR,U,2),RR7=$P(RR,U,7)
"RTN","LBRYHIS1",28,0)
 S Y=RR7 X ^DD("DD") S RR7=Y S:RR1=+RR1 RR1="c"_RR1 D SHOW2
"RTN","LBRYHIS1",29,0)
 G SH
"RTN","LBRYHIS1",30,0)
SHOW2 S RR2=$S(RR2=1:"ROUTED",RR2=2:"ROUTED (TO RETURN)",RR2=3:"SHELVED",RR2=4:"NOT RECEIVED",1:"TOC NOT RECEIVED")
"RTN","LBRYHIS1",31,0)
 S RRX=$P(RR,U,3),RRX0=$G(^LBRY(681,RRX,0))
"RTN","LBRYHIS1",32,0)
 S RRX=$G(^LBRY(681,RRX,1))
"RTN","LBRYHIS1",33,0)
 S RRY=$P(RRX,U,2),RR5="",RR4=$P(RRX,U,4)
"RTN","LBRYHIS1",34,0)
 I $G(RRY)'="" S RR5=$E($P(^LBRY(680.7,RRY,0),U),1,15)
"RTN","LBRYHIS1",35,0)
 S RR8=$P(RRX0,U,4),RR8=$S(RR5]"":$E($P(^LBRY(680.6,RR8,0),U),1,22),1:"")
"RTN","LBRYHIS1",36,0)
 W !,RR1,?6,RR4,?8,RR2,?28,RR5,?45,RR7,?58,RR8
"RTN","LBRYHIS1",37,0)
 Q
"RTN","LBRYHIS1",38,0)
FINI S XZ="EXIT//" D PAUSE^LBRYUTL
"RTN","LBRYHIS1",39,0)
 G ^LBRYHIS
"RTN","LBRYHIS2")
0^21^B1467019
"RTN","LBRYHIS2",1,0)
LBRYHIS2 ;ISC2/DJM-CHECK-IN NOTES ;[ 05/23/97  12:13 PM ]
"RTN","LBRYHIS2",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYHIS2",3,0)
START S E=0,DIWL=1,DIWR=79,DIWF="N" K ^UTILITY($J,"W")
"RTN","LBRYHIS2",4,0)
 S XX=$P(^LBRY(680,DA,16,0),U,3)
"RTN","LBRYHIS2",5,0)
 F I=1:1:XX S X=^LBRY(680,DA,16,I,0) D ^DIWP
"RTN","LBRYHIS2",6,0)
 S X=^UTILITY($J,"W",DIWL)-1,X1=0,X2=0
"RTN","LBRYHIS2",7,0)
LOOP W @IOF,?5,"VA Library History of Check-In ** NOTES **",?60,YDT
"RTN","LBRYHIS2",8,0)
 W !!,LA0 W:$D(LA00) !,LA00 W !! S X1=X1+X2,X2=X2+16 I X2>X S X2=X
"RTN","LBRYHIS2",9,0)
 I X1'<X G EXIT
"RTN","LBRYHIS2",10,0)
 F I=X1+1:1:X2 S O=^UTILITY($J,"W",DIWL,I,0) W O,!
"RTN","LBRYHIS2",11,0)
QUERY W !!,$S(I<X:"Continue// ",1:"Exit// ")
"RTN","LBRYHIS2",12,0)
 S DTOUT="" R Z:DTIME E  S DTOUT=1 W $C(7) G EXIT
"RTN","LBRYHIS2",13,0)
 I I'=X,Z="" G LOOP
"RTN","LBRYHIS2",14,0)
 I I=X,Z="" G EXIT
"RTN","LBRYHIS2",15,0)
 I Z="^" G EXIT
"RTN","LBRYHIS2",16,0)
 W !!,$S(I'=X:"Enter '^' to exit or <CR> to continue",1:"Enter <CR> to exit") G QUERY
"RTN","LBRYHIS2",17,0)
EXIT K XX,^UTILITY($J,"W") Q
"RTN","LBRYHOL")
1^78
"RTN","LBRYHSF")
0^77^B415226
"RTN","LBRYHSF",1,0)
LBRYHSF ;ISC2/DJM-NETWORK AUDIOVISUAL UPDATE ;[ 05/23/97  12:13 PM ]
"RTN","LBRYHSF",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYHSF",3,0)
SERV W @IOF,?5,"VA Library Service File View ",?60 S Y=DT X ^DD("DD") W Y,!
"RTN","LBRYHSF",4,0)
 S DIC="^DIC(49,",DIC(0)="AEMQ" D ^DIC Q:Y<0  S DA=+Y
"RTN","LBRYHSF",5,0)
 K DR D EN^DIQ
"RTN","LBRYHSF",6,0)
 R !!,"Press return to continue...",C:DTIME
"RTN","LBRYHSF",7,0)
 G SERV
"RTN","LBRYKILL")
0^82^B619451
"RTN","LBRYKILL",1,0)
LBRYKILL ;SSI/KMB - DELETION OF LIBRARY FILES ;[ 03/11/98  11:51 AM ]
"RTN","LBRYKILL",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYKILL",3,0)
 ;
"RTN","LBRYKILL",4,0)
 ;  *********  WARNING!  ************
"RTN","LBRYKILL",5,0)
 ;***** DO NOT RUN THIS PROGRAM UNLESS DIRECTED BY DEVELOPER *****
"RTN","LBRYKILL",6,0)
 ;
"RTN","LBRYKILL",7,0)
DELETE ;This routine will delete the DD and data for Library Files
"RTN","LBRYKILL",8,0)
 D MES^XPDUTL("The data will be deleted for the following files:")
"RTN","LBRYKILL",9,0)
 F I=680,680.4,680.5,680.7,681,682 D
"RTN","LBRYKILL",10,0)
 . S N=0
"RTN","LBRYKILL",11,0)
 . F  S N=$O(^LBRY(I,N)) Q:N=""  K ^LBRY(I,N)
"RTN","LBRYKILL",12,0)
 . S $P(^LBRY(I,0),"^",3)=0,$P(^(0),"^",4)=0
"RTN","LBRYKILL",13,0)
 . D MES^XPDUTL("File # "_I_" has been deleted.")
"RTN","LBRYKILL",14,0)
 Q
"RTN","LBRYLIPL")
0^24^B778193
"RTN","LBRYLIPL",1,0)
LBRYLIPL ;ISC2/DJM-PLACEMENT LOCATION ENTER/EDIT ;[ 05/23/97  12:13 PM ]
"RTN","LBRYLIPL",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYLIPL",3,0)
 ;
"RTN","LBRYLIPL",4,0)
START W @IOF,"VA Library Serials Item Placement Location "
"RTN","LBRYLIPL",5,0)
 D NOW^%DTC S Y=X X ^DD("DD") W ?60,Y,!
"RTN","LBRYLIPL",6,0)
 L ^LBRY(680.7,0)
"RTN","LBRYLIPL",7,0)
 S DIC="^LBRY(680.7,",DIC(0)="AELQZ",DLAYGO=680.7,DIC("S")="I $P(^(0),U,2)=LBRYPTR"
"RTN","LBRYLIPL",8,0)
 D ^DIC K DLAYGO,DIC("S") L  G:Y<1 EXIT
"RTN","LBRYLIPL",9,0)
 S DIE=DIC,DA=+Y,DR=".02///^S X=LBRYPTR;.01"
"RTN","LBRYLIPL",10,0)
 D LOCK^LBRYEDR G:LBRYL=0 EXIT
"RTN","LBRYLIPL",11,0)
 D ^DIE G:'$D(DA) EXIT
"RTN","LBRYLIPL",12,0)
 G START
"RTN","LBRYLIPL",13,0)
EXIT K DIC,DIE,DR,I,LBRYL Q
"RTN","LBRYLST")
0^26^B14879839
"RTN","LBRYLST",1,0)
LBRYLST ;ISC2/DJM-LIBRARY TITLE SETUP ;[ 05/23/97  12:13 PM ]
"RTN","LBRYLST",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYLST",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYLST",4,0)
 . D ^LBRYASK
"RTN","LBRYLST",5,0)
START W @IOF,?5,"VA Library Serials Title Setup for "_LBRYNAM
"RTN","LBRYLST",6,0)
 K CNT,COUNT,INACT,Y,LBRYLOC
"RTN","LBRYLST",7,0)
 D NOW^%DTC S Y=X X ^DD("DD") S YDT=Y W ?60,YDT,!
"RTN","LBRYLST",8,0)
 S DIC="^LBRY(680.5,",DIC(0)="AELMQZ",DLAYGO=680.5,LBRYNEW="",INACT=""
"RTN","LBRYLST",9,0)
 S DIC("A")="Select TITLE AUTHORITY TITLE: " D ^DIC
"RTN","LBRYLST",10,0)
 K DLAYGO,DIC("A") G:Y<0 EXIT1 S (LBRYCLS,DA)=+Y,LBRYNEW=$P(Y,U,3)
"RTN","LBRYLST",11,0)
 I $P(^LBRY(680.5,LBRYCLS,0),U,5)="N" K DR D  G CONT1
"RTN","LBRYLST",12,0)
 . W @IOF,?5,"VA Library Serials Enter a Title",?60,YDT
"RTN","LBRYLST",13,0)
 . W !!,"TITLE: ",$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYLST",14,0)
 . W !!,"Displaying TITLE AUTHORITY file" S DR="0:3" D EN^DIQ
"RTN","LBRYLST",15,0)
CONT W @IOF,?5,"VA Library Serials Enter a Title",?60,YDT
"RTN","LBRYLST",16,0)
 W !!,"TITLE: ",$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYLST",17,0)
 W !!,"Editing TITLE AUTHORITY file"
"RTN","LBRYLST",18,0)
 K DR S DIE="^LBRY(680.5,",DA=LBRYCLS,DR="[LBRY CHECK-IN SETUP]"
"RTN","LBRYLST",19,0)
 S DIE("NO^")=1,DIC=DIE D LOCK^LBRYEDR G:LBRYL=0 EXIT
"RTN","LBRYLST",20,0)
 D ^DIE
"RTN","LBRYLST",21,0)
 K DIE("NO^"),DA L  G:($D(Y)!($D(DTOUT))) EXIT1
"RTN","LBRYLST",22,0)
 I $P(^LBRY(680.5,LBRYCLS,0),U,5)="L",LBRYNEW=1 D ^LBRYLTF
"RTN","LBRYLST",23,0)
CONT1 S LBRTDA=""
"RTN","LBRYLST",24,0)
 F  S LBRTDA=$O(^LBRY(680,"B",LBRYCLS,LBRTDA)) Q:LBRTDA=""  D
"RTN","LBRYLST",25,0)
 . I $P(^LBRY(680,LBRTDA,0),U,4)=LBRYPTR S LBRYLOC=LBRTDA Q
"RTN","LBRYLST",26,0)
 I $G(LBRYLOC)="" K DO S LBRYNEW=1 D
"RTN","LBRYLST",27,0)
 . S DINUM=$P(^LBRY(680,0),U,3)
"RTN","LBRYLST",28,0)
 . F  S DINUM=DINUM+1 Q:'$D(^LBRY(680,DINUM,0))
"RTN","LBRYLST",29,0)
 . S X=LBRYCLS,DIC="^LBRY(680,",LBRYNEW=1,DIC(0)="LNZ"
"RTN","LBRYLST",30,0)
 . D FILE^DICN S LBRYLOC=+Y
"RTN","LBRYLST",31,0)
 W !!,"Editing LOCAL SERIALS file" K DR S DIE="^LBRY(680,"
"RTN","LBRYLST",32,0)
 S DR="[LBRY LOCAL SETUP]",DIE("NO^")=1,DA=LBRYLOC,DIC=DIE
"RTN","LBRYLST",33,0)
 D LOCK^LBRYEDR G:LBRYL=0 EXIT
"RTN","LBRYLST",34,0)
 D ^DIE I '$D(^LBRY(680,DA,7)) D KILL
"RTN","LBRYLST",35,0)
 K DIE("NO^") L  G:($D(Y)!($D(DTOUT))) EXIT1
"RTN","LBRYLST",36,0)
 S INACT=$P(^LBRY(680,LBRYLOC,0),U,2) I INACT]"","DCR"[INACT G START
"RTN","LBRYLST",37,0)
 G:LBRYNEW>0 COPY1
"RTN","LBRYLST",38,0)
CHECK S (COUNT,LBX)=0
"RTN","LBRYLST",39,0)
 F  S LBX=$O(^LBRY(681,"AC",LBRYLOC,LBX)) Q:LBX=""  S:LBX=+LBX COUNT=COUNT+1
"RTN","LBRYLST",40,0)
 G:COUNT=0 COPY1 S CNT=$P(^LBRY(680,LBRYLOC,7),U) G:COUNT'<CNT START
"RTN","LBRYLST",41,0)
 S GOOD=$O(^LBRY(681,"AC",LBRYLOC,0))
"RTN","LBRYLST",42,0)
 I GOOD=1 S DA=$O(^LBRY(681,"AC",LBRYLOC,GOOD,0)) G REPL
"RTN","LBRYLST",43,0)
COPY1 L ^LBRY(681,0) S LBRYNUM=$P(^LBRY(681,0),U,3)
"RTN","LBRYLST",44,0)
 F  S LBRYNUM=LBRYNUM+1 Q:'$D(^LBRY(681,LBRYNUM,0))
"RTN","LBRYLST",45,0)
 W !!,"Entering Copy 1 information."
"RTN","LBRYLST",46,0)
 K DO S DIC="^LBRY(681,",DIC(0)="LZ",X=LBRYNUM D FILE^DICN
"RTN","LBRYLST",47,0)
 K DR S DIE=DIC,DA=+Y,DIE("NO^")=1,DR="[LBRY D1]" D LOCK^LBRYEDR
"RTN","LBRYLST",48,0)
 Q:LBRYL=0  D ^DIE
"RTN","LBRYLST",49,0)
 K DIE("NO^") L  G:($D(Y)!($D(DTOUT))) EXIT1
"RTN","LBRYLST",50,0)
REPL S CNT=$P($G(^LBRY(680,LBRYLOC,7)),U) G:CNT=1 EDIT
"RTN","LBRYLST",51,0)
 W !!,"Now cop",$S(CNT=2:"y 2",1:"ies 2 through "_CNT)," will be created the same as copy 1."
"RTN","LBRYLST",52,0)
 L ^LBRY(681,0) S LBRYNUM=$P(^LBRY(681,0),U,3),%X="^LBRY(681,DA,",%Y="X(" D %XY^%RCR
"RTN","LBRYLST",53,0)
 K COPYNO S LCOPY=0
"RTN","LBRYLST",54,0)
 F  S LCOPY=$O(^LBRY(681,"AC",LBRYLOC,LCOPY)) Q:LCOPY=""  S:LCOPY=+LCOPY COPYNO(LCOPY)=""
"RTN","LBRYLST",55,0)
 S DIK="^LBRY(681," F I=2:1:CNT S $P(X(1),U,1)=I D:'$D(COPYNO(I)) NEXT
"RTN","LBRYLST",56,0)
 K %,%H,%I,A,CNT,COUNT,D,D0,DA,DC,DE,DIC,DIE,DIFLD,DIP,Y,LBRYL
"RTN","LBRYLST",57,0)
 K X1,Y
"RTN","LBRYLST",58,0)
QUERY L  W ! I LBRYNEW'=1 G START
"RTN","LBRYLST",59,0)
EDIT W !!,"Do you want to EDIT any copy now" S %=2 D YN^DICN
"RTN","LBRYLST",60,0)
 G START:%<0,START:%=2
"RTN","LBRYLST",61,0)
 I %=0 W !!,"Answering YES will allow you to modify any or all copies now." G EDIT
"RTN","LBRYLST",62,0)
 S:'$D(E0) E0=1 D CON^LBRYCSE G CONT^LBRYCSE
"RTN","LBRYLST",63,0)
NEXT F  S LBRYNUM=LBRYNUM+1 Q:'$D(^LBRY(681,LBRYNUM,0))  S QUIT=$O(^LBRY(681,"AC",LBRYLOC,0)) Q:QUIT=LBRYNUM
"RTN","LBRYLST",64,0)
 S $P(X(0),U,1)=LBRYNUM,DA=LBRYNUM
"RTN","LBRYLST",65,0)
 S %X="X(",%Y="^LBRY(681,"_LBRYNUM_"," D %XY^%RCR
"RTN","LBRYLST",66,0)
 S $P(^LBRY(681,0),U,3)=LBRYNUM,$P(^(0),U,4)=$P(^(0),U,4)+1 D IX^DIK
"RTN","LBRYLST",67,0)
 W "."
"RTN","LBRYLST",68,0)
 Q
"RTN","LBRYLST",69,0)
KILL ;KILL FILE#680 RECORD IF # OF COPIES NOT SPECIFIED
"RTN","LBRYLST",70,0)
 S DIK=DIE D ^DIK Q
"RTN","LBRYLST",71,0)
EXIT K DIC("NO^") G QUERY
"RTN","LBRYLST",72,0)
EXIT1 K %,%X,%Y,J,Y,Z,YDT,DIC,INACT,LBRYNEW,LBRYL,COUNT,DIE,DIK,DR,LBRYNUM
"RTN","LBRYLST",73,0)
 K I,X,LBX,GOOD,CNT,LCOPY,COPYNO,E0,QUIT,LBRYLOC
"RTN","LBRYLST",74,0)
 Q
"RTN","LBRYNSTL")
1^28
"RTN","LBRYPG")
0^29^B10501660
"RTN","LBRYPG",1,0)
LBRYPG ;ISC2/DJM-LIBRARY SERIALS PURGE OPTION ;[ 11/26/97  4:34 PM ]
"RTN","LBRYPG",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPG",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYPG",4,0)
 . D ^LBRYASK
"RTN","LBRYPG",5,0)
 S KL1=1 D CKIN G:Y<0 EXIT
"RTN","LBRYPG",6,0)
 D ALL^LBRYPG0 G:$D(ALL) NOT
"RTN","LBRYPG",7,0)
CONT S (E,E0,E1)=0 D MORE
"RTN","LBRYPG",8,0)
 G:'$D(A(1)) EMPTY
"RTN","LBRYPG",9,0)
CONT1 S E=1
"RTN","LBRYPG",10,0)
INIT S E1=E-3 S:E1<1 E1=1 S E0=E1 D FWD1^LBRYPG0 G DISPLAY
"RTN","LBRYPG",11,0)
CKIN W @IOF,?5,"VA Library Serials Purge for "_LBRYNAM
"RTN","LBRYPG",12,0)
 S (YDT1,Y)=DT X ^DD("DD") W ?60,Y,! S YDT=Y
"RTN","LBRYPG",13,0)
 S DIC="^LBRY(680,",DIC(0)="AEQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR&($P(^(0),U,2)="""")"
"RTN","LBRYPG",14,0)
 D ^DIC K DIC("S")
"RTN","LBRYPG",15,0)
 Q:Y<0  S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYPG",16,0)
 S LA0=$P(^LBRY(680.5,LBRYCLS,0),U),LA00=""
"RTN","LBRYPG",17,0)
 S:$D(^LBRY(680,LBRYLOC,1)) LA00="  "_$P(^(1),U,5)
"RTN","LBRYPG",18,0)
 S LA0="TITLE: "_LA0
"RTN","LBRYPG",19,0)
 Q
"RTN","LBRYPG",20,0)
MORE K A S N="",A(1)="",LA1="JOURNAL",LA2="DATE",LA3="V(I)",LA4="CPY'S"
"RTN","LBRYPG",21,0)
 S LA5="COPIES",LA6="RECEIVED",LA7="ORD'D",LA8="COMPLETED"
"RTN","LBRYPG",22,0)
 S LA9="DISPOSITION",LA10="RCV'D"
"RTN","LBRYPG",23,0)
 F I=1:1 S:A(I)="" N=$O(^LBRY(682,"AC",LBRYLOC,N)) G:N="" MORE1 D
"RTN","LBRYPG",24,0)
 . S A(I)=$O(^LBRY(682,"AC",LBRYLOC,N,A(I)))
"RTN","LBRYPG",25,0)
 . S:$O(^LBRY(682,"AC",LBRYLOC,N,A(I)))>0 A(I+1)=A(I)
"RTN","LBRYPG",26,0)
 . S:$O(^LBRY(682,"AC",LBRYLOC,N,A(I)))="" A(I+1)=""
"RTN","LBRYPG",27,0)
MORE1 S II=E K A(I) Q
"RTN","LBRYPG",28,0)
DISPLAY ;  Show issues
"RTN","LBRYPG",29,0)
DISP0 W @IOF,?5,"VA Library Serials Purge",?60,YDT
"RTN","LBRYPG",30,0)
 W !!,LA0,!,LA00,!!,"ID",?6,LA1,?41,LA2,?52,LA4,?59,LA4,?66,LA9
"RTN","LBRYPG",31,0)
 W !,"NUM",?7,LA2,?20,LA3,?41,LA6,?52,LA7,?59,LA10,?66,LA8,!
"RTN","LBRYPG",32,0)
 F I=1:1:77 W "-"
"RTN","LBRYPG",33,0)
 W !
"RTN","LBRYPG",34,0)
 S AA="",RTD=0 G:E0=0 ASK1 G:'$D(A(1)) ASK1
"RTN","LBRYPG",35,0)
 F I=E0:1:E1 S AA=^LBRY(682,A(I),1),RTD=0,RFLAG=0,MR=0,RTD1="" D RTED,DISPX,DISP1
"RTN","LBRYPG",36,0)
 ;  Display to user the options
"RTN","LBRYPG",37,0)
ASK1 D ^LBRYPG1
"RTN","LBRYPG",38,0)
 ;  Go select user's option.  State error prompt if needed
"RTN","LBRYPG",39,0)
ASK3 G ASK3^LBRYPG1
"RTN","LBRYPG",40,0)
RTED S MR=$O(^LBRY(682,A(I),4,MR)) Q:MR=""!(MR?.AP)
"RTN","LBRYPG",41,0)
 S BB=^LBRY(682,A(I),4,MR,0),BB2=$P(BB,U,2),BB1=$P(BB,U,1)
"RTN","LBRYPG",42,0)
 S:BB2<4&(BB1'="ToC") RTD=RTD+1 S:BB1="ToC" BB1="T"
"RTN","LBRYPG",43,0)
 I BB2<4,RTD<5 S RTD1=RTD1_BB1_"," G RTED
"RTN","LBRYPG",44,0)
 I BB2<4,RTD'<5,RFLAG=0 S RTD1=$E(RTD1,1,$L(RTD1)-1)_"...",RFLAG=1
"RTN","LBRYPG",45,0)
 G RTED
"RTN","LBRYPG",46,0)
DISPX S AA1=$P(AA,U,1),AA2=$P(AA,U,2),AA3=$P(AA,U,3),AA4=$P(AA,U,4)
"RTN","LBRYPG",47,0)
 S AA5=$P(AA,U,5),AA6=""
"RTN","LBRYPG",48,0)
 S:$D(^LBRY(682,A(I),1)) AA6=$P(^(1),U,7) I AA4=0 S AA4=""
"RTN","LBRYPG",49,0)
 S RTDA=$S(RTD=AA5:"   ALL",1:RTD1)
"RTN","LBRYPG",50,0)
 S:AA3'="" AA2=AA2_"("_AA3_")"
"RTN","LBRYPG",51,0)
 S Y=AA1 X ^DD("DD") S AA1=Y
"RTN","LBRYPG",52,0)
 I AA6'="" S Y=AA6 X ^DD("DD") S AA6=Y
"RTN","LBRYPG",53,0)
 Q
"RTN","LBRYPG",54,0)
DISP1 W !,I,?5,AA1,?18,AA2,?40,AA6,?54,AA5,?61,AA4,?66,RTDA
"RTN","LBRYPG",55,0)
 Q
"RTN","LBRYPG",56,0)
EMPTY W !!,"This title has nothing checked-in so there is nothing to PURGE." G NOT1
"RTN","LBRYPG",57,0)
NOT W !!,LA0,!!,"This title is not fully initialized."
"RTN","LBRYPG",58,0)
 W !,"Please use Library Serials Management to set up this title."
"RTN","LBRYPG",59,0)
NOT1 S XZ="Exit// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYPG",60,0)
 G LBRYPG
"RTN","LBRYPG",61,0)
EXIT K %,%DT,%X,LA0,LA1,LA2,LA3,LA4,LA5,LA6,LA7,LA8,LA9,LA10,A,I,II,IA,I1
"RTN","LBRYPG",62,0)
 K J,AA,AA1,AA2,AA3,AA4,AA5,AA6,AA7,AA8,AB,AB1,AB2,CA,CA1,DIC,DIW,DIWF
"RTN","LBRYPG",63,0)
 K DIWL,DIWR,DIWT,DIWTC,DIWX,CLR,LL,DN,DR,DX,DY,N,O,X1,X2,XX,Z,LB,LB1
"RTN","LBRYPG",64,0)
 K LB2,MM,RFLAG,RTD,RTD1,RTDA,XT1,XT2,XT3,YDT,YDT1,DA,LBRYCLS,LBRYLOC
"RTN","LBRYPG",65,0)
 K Z,ALL,DIK,G,G1,G2,Q,CNT,IT,LOOPX,QTY,BB,BB1,BB2,E,E0,E1,KL1,LA00,MR
"RTN","LBRYPG",66,0)
 Q
"RTN","LBRYPG0")
0^30^B1432705
"RTN","LBRYPG0",1,0)
LBRYPG0 ;ISC2/DJM-SERIALS PURGE OPTION ;[ 05/23/97  12:13 PM ]
"RTN","LBRYPG0",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPG0",3,0)
CHECK ;
"RTN","LBRYPG0",4,0)
FORWARD S E=0 G:$L(X)>1 FWD S:$D(A(E1+1)) (E0,E1)=E1+1 G FWD1
"RTN","LBRYPG0",5,0)
FWD S X1=+$E(X,2,99) Q:X1'>0!'($D(A(X1)))  Q:$E(X,1)="B"&(X1'<E0)  Q:$E(X,1)="F"&(X1'>E0)  S E0=$S($D(A(X1)):X1,$D(A(E1+1)):E1+1,1:E0) S:X1>0&($D(A(X1))) E1=X1
"RTN","LBRYPG0",6,0)
FWD1 F I=1:1:4 Q:'$D(A(E1+1))  S E1=E1+1
"RTN","LBRYPG0",7,0)
 Q
"RTN","LBRYPG0",8,0)
BACKUP S E=0 G:$L(X)>1 FWD I $D(A(E0-5)) S (E0,E1)=E0-5 G FWD1
"RTN","LBRYPG0",9,0)
BACKUP1 F I=1:1:5 Q:'$D(A(E0-1))  S E0=E0-1
"RTN","LBRYPG0",10,0)
 S E1=E0 G FWD1
"RTN","LBRYPG0",11,0)
ALL K ALL S CNT=$P($G(^LBRY(680,LBRYLOC,7)),U),(QTY,IT)=0
"RTN","LBRYPG0",12,0)
 F  S IT=$O(^LBRY(681,"AC",LBRYLOC,IT)) Q:IT=""  S QTY=QTY+1
"RTN","LBRYPG0",13,0)
 I QTY<CNT S ALL=1
"RTN","LBRYPG0",14,0)
 Q
"RTN","LBRYPG1")
0^31^B4721912
"RTN","LBRYPG1",1,0)
LBRYPG1 ;ISC2/DJM-SERIALS PURGE OUTPUT MESSAGE ;[ 05/23/97  12:13 PM ]
"RTN","LBRYPG1",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPG1",3,0)
START F I=1:1:5 S LS(I)=""
"RTN","LBRYPG1",4,0)
 S XT1=$S($D(^LBRY(680,LBRYLOC,16,0)):1,1:0)
"RTN","LBRYPG1",5,0)
 S XT2=$S($D(A(E0-1)):1,1:0),XT3=$S($D(A(E1+1)):1,1:0),LS(1)="Choose: "
"RTN","LBRYPG1",6,0)
 S:$D(A(1)) LS(2)=$C(34)_"ID NUM"_$C(34)_" to Purge"
"RTN","LBRYPG1",7,0)
 S:XT1 LS(3)="see check-in (N)otes" S:XT2 LS(4)="(B)ackup"
"RTN","LBRYPG1",8,0)
 S:XT3 LS(5)="(F)orward"
"RTN","LBRYPG1",9,0)
 S (LINE1,LINE2)="" F I=1:1:5 G:$L(LINE1)+$L(LS(I))'<78 L2 S:LS(I)]"" LINE1=LINE1_LS(I) K LS(I) I I>1,I<5,LS(I+1)]"" S LINE1=LINE1_", "
"RTN","LBRYPG1",10,0)
L2 I '$D(LS(5)) S LINE1=LINE1_"." G PRINT
"RTN","LBRYPG1",11,0)
 F J=I:1:5 S:LS(J)]"" LINE2=LINE2_LS(J) K LS(J) I J<5&($D(LS(J+1))) S:LS(J+1)]"" LINE2=LINE2_", "
"RTN","LBRYPG1",12,0)
 S LINE2=LINE2_"."
"RTN","LBRYPG1",13,0)
PRINT W !!,LINE1,! W:$D(LINE2) LINE2,! W "Exit// "
"RTN","LBRYPG1",14,0)
EXIT K LINE1,LINE2,I,J Q
"RTN","LBRYPG1",15,0)
 ; Library serials 'What-to-do' prompt
"RTN","LBRYPG1",16,0)
ASK3 S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 G ^LBRYPG
"RTN","LBRYPG1",17,0)
 I X="" G ^LBRYPG
"RTN","LBRYPG1",18,0)
 I X="??" S XQH="LBRY PURGE ??" D EN^XQH G DISPLAY^LBRYPG
"RTN","LBRYPG1",19,0)
 I X="^" G ^LBRYPG
"RTN","LBRYPG1",20,0)
 I $D(A(E0-1)),"Bb"[$E(X,1) D BACKUP^LBRYPG0 G DISPLAY^LBRYPG
"RTN","LBRYPG1",21,0)
 I $D(A(E1+1)),"Ff"[$E(X,1) D FORWARD^LBRYPG0 G DISPLAY^LBRYPG
"RTN","LBRYPG1",22,0)
 I $D(^LBRY(680,LBRYLOC,16,0)),"Nn"[X D ^LBRYPG3 G DISPLAY^LBRYPG
"RTN","LBRYPG1",23,0)
ASK2 I $D(A($E(X))) G ASK^LBRYPG2
"RTN","LBRYPG1",24,0)
WRONG S E=0,(XTA,XTB,XTC)="",XTA=$S(XT1&((XT2)!(XT3)):", N",1:"")
"RTN","LBRYPG1",25,0)
 S XTB=$S(XT2&(XT3):", B or F.",XT2!(XT3):" or ",XTA]"":".",1:"")
"RTN","LBRYPG1",26,0)
 G:XTC["." WRONG1 S XTC=$S(XT2:"B.",XT3:"F.",1:"")
"RTN","LBRYPG1",27,0)
WRONG1 W !!,"Enter " W:$D(A(1)) "an ID NUM or a range of ID NUMs separated by a hyphen '1-2'"
"RTN","LBRYPG1",28,0)
 W !,"or a combination of the two separated by a comma '1,3-5'"
"RTN","LBRYPG1",29,0)
 W:XTA=""&(XTB="")&(XTC="") "."
"RTN","LBRYPG1",30,0)
 W !,XTA,XTB,XTC W:$X>1 ! W "Enter '??' for more help."
"RTN","LBRYPG1",31,0)
 W !!,"Choose: Exit// " D MORE^LBRYPG
"RTN","LBRYPG1",32,0)
 G ASK3
"RTN","LBRYPG2")
0^32^B1977183
"RTN","LBRYPG2",1,0)
LBRYPG2 ;ISC2/DJM-LIBRARY PURGE PARSING ;[ 05/23/97  12:13 PM ]
"RTN","LBRYPG2",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPG2",3,0)
PARSE F I=1:1 S G=$P(LBRYX,",",I) G:G="" CONT^LBRYPG D:G=+G PURGE D:G["-" PARSE1
"RTN","LBRYPG2",4,0)
 Q
"RTN","LBRYPG2",5,0)
PARSE1 S G1=$P(G,"-",1),G2=$P(G,"-",2) I G2'<G1 F G=G1:1:G2 D PURGE
"RTN","LBRYPG2",6,0)
 Q
"RTN","LBRYPG2",7,0)
PURGE I $D(A(G)) S DIK="^LBRY(682,",DA=A(G),Y=$P($G(^LBRY(682,A(G),1)),U) I Y>0 X ^DD("DD") W !,"PURGING ",Y," ISSUE." D ^DIK
"RTN","LBRYPG2",8,0)
 Q
"RTN","LBRYPG2",9,0)
ASK S LBRYX=X,Q=2 I LBRYX?.N G PARSE
"RTN","LBRYPG2",10,0)
ASK3 S G=$P(LBRYX,",",Q) G:G="" ASK1 G:G["-" ASK4 G:G'?.N ASK2 S Q=Q+1 G ASK3
"RTN","LBRYPG2",11,0)
ASK1 G PARSE
"RTN","LBRYPG2",12,0)
ASK2 W !!,"Please enter an ID NUM or a range of ID NUMs separated by a hyphen '1-2'"
"RTN","LBRYPG2",13,0)
 W !,"or a combination of the two separated by a comma '1,2-4' or <CR> to EXIT.",!
"RTN","LBRYPG2",14,0)
 G ASK1^LBRYPG
"RTN","LBRYPG2",15,0)
ASK4 G:G'?1N.N1"-"1N.N ASK2 S Q=Q+1 G ASK3
"RTN","LBRYPG3")
0^33^B1481685
"RTN","LBRYPG3",1,0)
LBRYPG3 ;ISC2/DJM-SERIALS PURGE NOTES ;[ 05/23/97  12:13 PM ]
"RTN","LBRYPG3",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPG3",3,0)
START S E=0,DIWL=1,DIWR=79,DIWF="N" K ^UTILITY($J,"W")
"RTN","LBRYPG3",4,0)
 S XX=$P(^LBRY(680,LBRYLOC,16,0),U,3)
"RTN","LBRYPG3",5,0)
 F I=1:1:XX S X=^LBRY(680,LBRYLOC,16,I,0) D ^DIWP
"RTN","LBRYPG3",6,0)
 S X=^UTILITY($J,"W",DIWL)-1,X1=0,X2=0
"RTN","LBRYPG3",7,0)
LOOP W @IOF,?5,"VA Library Serials Check-In ** NOTES **",?60,YDT
"RTN","LBRYPG3",8,0)
 W !!,LA0 W:$D(LA00) !,LA00 W !! S X1=X1+X2,X2=X2+16 I X2>X S X2=X
"RTN","LBRYPG3",9,0)
 I X1'<X G EXIT
"RTN","LBRYPG3",10,0)
 F I=X1+1:1:X2 S O=^UTILITY($J,"W",DIWL,I,0) W O,!
"RTN","LBRYPG3",11,0)
QUERY W !!,$S(I<X:"Continue// ",1:"Exit// ")
"RTN","LBRYPG3",12,0)
 S DTOUT="" R Z:DTIME E  S DTOUT=1 W $C(7) G EXIT
"RTN","LBRYPG3",13,0)
 I I'=X,Z="" G LOOP
"RTN","LBRYPG3",14,0)
 I I=X,Z="" G EXIT
"RTN","LBRYPG3",15,0)
 I Z="^" G EXIT
"RTN","LBRYPG3",16,0)
 W !!,$S(I'=X:"Enter '^' to exit or <CR> to continue",1:"Enter <CR> to exit") G QUERY
"RTN","LBRYPG3",17,0)
EXIT K XX,^UTILITY($J,"W") Q
"RTN","LBRYPPR")
0^34^B14758132
"RTN","LBRYPPR",1,0)
LBRYPPR ;ISC2/DJM-PREDICTION PATTERN ROUTINE ;[ 05/23/97  12:13 PM ]
"RTN","LBRYPPR",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPPR",3,0)
 ;
"RTN","LBRYPPR",4,0)
START K LBRYEF1 S LBRYPP=$P(^LBRY(680.5,LBRYCLS,0),U,3) Q:LBRYPP=""  S LBNM=""
"RTN","LBRYPPR",5,0)
 I +LBRYPP'=LBRYPP!(LBRYPP<1) Q  ;COULD NOT RESOLVE PREDICTION PATTERN, PLEASE INSERT
"RTN","LBRYPPR",6,0)
 S LBA1=""
"RTN","LBRYPPR",7,0)
LDT S LBA1=$O(^LBRY(682,"A1",LBRYLOC,LBA1)) Q:LBA1'>0
"RTN","LBRYPPR",8,0)
 S LBJD=""
"RTN","LBRYPPR",9,0)
LBJ S LBJD=$O(^LBRY(682,"A1",LBRYLOC,LBA1,LBJD)) G LDT:LBJD=""
"RTN","LBRYPPR",10,0)
 S LBJD=$G(^LBRY(682,LBJD,1)) I $P(LBJD,U,8)="P" S LBJDT=$P(LBJD,U)
"RTN","LBRYPPR",11,0)
 I $G(LBJDT)="" G LBJ
"RTN","LBRYPPR",12,0)
GET S LBNM="",LBRYPP0=^LBRY(680.9,LBRYPP,0),LBRYPP3=$G(^LBRY(680.9,LBRYPP,3))
"RTN","LBRYPPR",13,0)
 S LBRYPP2=$G(^LBRY(680.9,LBRYPP,2))
"RTN","LBRYPPR",14,0)
BEGIN S X1=DT,X2=LBJDT
"RTN","LBRYPPR",15,0)
 S PUD=$S($P(^LBRY(680,LBRYLOC,0),U,3)'="":$P(^(0),U,3),1:5)
"RTN","LBRYPPR",16,0)
 D ^%DTC Q:X+PUD<0
"RTN","LBRYPPR",17,0)
 S LBJDY=+$E(LBJDT,1,3),LBJDM=+$E(LBJDT,4,5),LBJDD=+$E(LBJDT,6,7)
"RTN","LBRYPPR",18,0)
 S LBX=+LBJDM,LBY=$P(LBRYPP0,U,3) I LBX="" G ERROR1
"RTN","LBRYPPR",19,0)
 D FIND G:LBZ>0 TYPE
"RTN","LBRYPPR",20,0)
 S LBRYEF1=1
"RTN","LBRYPPR",21,0)
 Q
"RTN","LBRYPPR",22,0)
TYPE S LBMOZ=LBZ G:$P(LBRYPP0,U,5)]"" DOM
"RTN","LBRYPPR",23,0)
 G:$P(LBRYPP3,U)]"" DOW G:$P(LBRYPP0,U,4)]"" ADDED
"RTN","LBRYPPR",24,0)
 D NEXT S LBNM=1 I $P(LBN,U,2)]"" S LBJDY=LBJDY+1
"RTN","LBRYPPR",25,0)
 S LBN=+LBN S:$L(LBN)=1 LBN="0"_LBN S LBJDT=LBJDY_LBN_"00"
"RTN","LBRYPPR",26,0)
 G ^LBRYPPR0
"RTN","LBRYPPR",27,0)
DOM S EM=LBJDM D EOM G:LBJDD=LBEM NXT S LBX=+LBJDD,LBY=$P(LBRYPP0,U,5)
"RTN","LBRYPPR",28,0)
 I LBX="" G ERROR2
"RTN","LBRYPPR",29,0)
 D FIND G:LBZ<1 DOM1 D NEXT G:$P(LBN,U,2)]"" NXT0 S LBJDD=LBN
"RTN","LBRYPPR",30,0)
DOMA I LBEM<LBJDD S LBJDD=LBEM G TYPE1
"RTN","LBRYPPR",31,0)
 S LBJDD=LBN G TYPE1
"RTN","LBRYPPR",32,0)
TYPE1 S:$L(LBJDD)=1 LBJDD="0"_LBJDD S:$L(LBJDM)=1 LBJDM="0"_LBJDM
"RTN","LBRYPPR",33,0)
 S LBJDT=LBJDY_LBJDM_LBJDD
"RTN","LBRYPPR",34,0)
 G ^LBRYPPR0
"RTN","LBRYPPR",35,0)
NXT0 S LBY=$P(LBRYPP0,U,3),LBZ=LBMOZ
"RTN","LBRYPPR",36,0)
NXT D NEXT S:$P(LBN,U,2)]"" LBJDY=LBJDY+1 S (LBJDM,EM)=+LBN,LBNM=1
"RTN","LBRYPPR",37,0)
 S LBJDD=$P($P(LBRYPP0,U,5),",",2) D EOM G:LBJDD'>LBEM TYPE1
"RTN","LBRYPPR",38,0)
 S LBJDD=LBEM
"RTN","LBRYPPR",39,0)
 G TYPE1
"RTN","LBRYPPR",40,0)
DOM1 S LBDOM=$P(LBRYPP0,U,5)
"RTN","LBRYPPR",41,0)
 F I=2:1 S LBN=$P(LBDOM,",",I) G:LBN="" NXT0 G:LBN>LBJDD DOMA
"RTN","LBRYPPR",42,0)
DOW G:LBJDD=0 ERROR3 S X=LBJDT D DW^%DTC
"RTN","LBRYPPR",43,0)
 S YY=LBJDD\7,YY=$S(LBJDD#7=0:YY,1:YY+1),LBX=YY_"/"_Y
"RTN","LBRYPPR",44,0)
 S LBY=$P(LBRYPP3,U),EM=LBJDM D EOM,FIND S LBWKZ=LBZ G:LBZ<1 DOWA
"RTN","LBRYPPR",45,0)
DOW1 D NEXT D:$P(LBN,U,2)]"" NEWWK D CONV G:LBJDD'>LBEM TYPE1
"RTN","LBRYPPR",46,0)
 G:$P($P(LBRYPP3,U),",",3)]"" NEWM S LBJDD=LBJDD-7 G TYPE1
"RTN","LBRYPPR",47,0)
 Q
"RTN","LBRYPPR",48,0)
FIND F I=2:1 S LBY1=$P(LBY,",",I) G:LBY1="" EXIT I LBX=LBY1 S LBZ=I K I,LBY1 Q
"RTN","LBRYPPR",49,0)
 Q
"RTN","LBRYPPR",50,0)
EXIT S LBZ="-1" K I,LBY1 Q
"RTN","LBRYPPR",51,0)
NEXT K LBN S LBN=$P(LBY,",",LBZ+1),LBZ=LBZ+1 Q:LBN]""  S LBZ=2,LBN=$P(LBY,",",LBZ),$P(LBN,U,2)=1 Q
"RTN","LBRYPPR",52,0)
EOM G:EM=2 EM2 S LBEM=$S(EM=1:31,EM=3:31,EM=4:30,EM=5:31,EM=6:30,EM=7:31,EM=8:31,EM=9:30,EM=10:31,EM=11:30,1:31) K EM Q
"RTN","LBRYPPR",53,0)
EM2 S LBEM=28 I LBJDY=300 Q
"RTN","LBRYPPR",54,0)
 S EMY=+$E(LBJDY,2,3) S:EMY#4=0 LBEM=29 K EMY Q
"RTN","LBRYPPR",55,0)
NEWWK S NXTWK=LBN,LBY=$P(LBRYPP0,U,3),LBZ=LBMOZ D NEXT S:$P(LBN,U,2)]"" LBJDY=LBJDY+1 S (LBJDM,EM)=+LBN,LBNM=1,LBN=NXTWK D EOM Q
"RTN","LBRYPPR",56,0)
CONV S:$L(LBJDM)=1 LBJDM="0"_LBJDM
"RTN","LBRYPPR",57,0)
 S LBN=$P(LBN,U),X=LBJDY_LBJDM_"01" D DW^%DTC
"RTN","LBRYPPR",58,0)
 S FM=Y,LBRDOW=$P(LBN,"/",2)
"RTN","LBRYPPR",59,0)
 I FM=LBRDOW S LBJDD=1 G ADD
"RTN","LBRYPPR",60,0)
 I LBRDOW>FM S LBJDD=LBRDOW-FM+1 G ADD
"RTN","LBRYPPR",61,0)
 S LBJDD=8+LBRDOW-FM
"RTN","LBRYPPR",62,0)
ADD S WOM=$P(LBN,"/",1),LBJDD=LBJDD+(WOM-1*7) Q
"RTN","LBRYPPR",63,0)
NEWM D NEWWK S LBY=$P(LBRYPP3,U),LBZ=1 D NEXT,CONV G TYPE1
"RTN","LBRYPPR",64,0)
DOWA S LBXA=$P(LBX,"/",1),LBXB=$P(LBX,"/",2) K LBZ
"RTN","LBRYPPR",65,0)
 F I=2:1 S LBY1=$P(LBY,",",I) G:LBY1="" ERROR4
"RTN","LBRYPPR",66,0)
 S LBYA=$P(LBY1,"/",1),LBYB=$P(LBY1,"/",2) D DOWX G:$D(LBZ) DOW1
"RTN","LBRYPPR",67,0)
DOWX I LBYA=LBXA,LBYB=LBXB S LBZ=I Q
"RTN","LBRYPPR",68,0)
 I LBYA>LBXA S LBZ=I Q
"RTN","LBRYPPR",69,0)
 Q
"RTN","LBRYPPR",70,0)
EF1 S Y=LBJDT X ^DD("DD")
"RTN","LBRYPPR",71,0)
 W !!,"The last Journal Date, ",Y,", is not found in the PREDICTION PATTERN"
"RTN","LBRYPPR",72,0)
 W !,"for this title.  "
"RTN","LBRYPPR",73,0)
 W "Use (E)dit to change the JOURNAL DATE to a valid month"
"RTN","LBRYPPR",74,0)
 W !,"or change the ENTRY TYPE to INSERT." S XZ="CONTINUE//" D PAUSE^LBRYUTL
"RTN","LBRYPPR",75,0)
 Q
"RTN","LBRYPPR",76,0)
ADDED S X1=LBJDT,X2=$P(LBRYPP0,U,4) D C^%DTC
"RTN","LBRYPPR",77,0)
 S:$E(LBJDT,4,5)'=$E(X,4,5) LBNM=1 S LBJDT=X
"RTN","LBRYPPR",78,0)
 G ^LBRYPPR0
"RTN","LBRYPPR",79,0)
ERROR1 Q
"RTN","LBRYPPR",80,0)
ERROR2 Q
"RTN","LBRYPPR",81,0)
ERROR3 Q
"RTN","LBRYPPR",82,0)
ERROR4 Q
"RTN","LBRYPPR0")
0^35^B5650276
"RTN","LBRYPPR0",1,0)
LBRYPPR0 ;ISC2/DJM-PREDICTION PATTERN ROUTINE ;[ 06/03/97  5:11 PM ]
"RTN","LBRYPPR0",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPPR0",3,0)
 ;
"RTN","LBRYPPR0",4,0)
VI G:LBNM<1 IC S LBY=$P(LBRYPP2,U,4),LBX=+$E(LBJDT,4,5)
"RTN","LBRYPPR0",5,0)
 D FIND^LBRYPPR G:LBZ<1 IC
"RTN","LBRYPPR0",6,0)
 S LBVOL=$S($D(LBVOL):LBVOL,1:$P(LBJD,U,2)),VOL=$P(LBRYPP2,U)
"RTN","LBRYPPR0",7,0)
 G:$E(VOL)="+" VI1
"RTN","LBRYPPR0",8,0)
 S LBVOL=$S($P(LBRYPP0,U,2)'["NOVOL":VOL,1:"") G VI2
"RTN","LBRYPPR0",9,0)
VI1 S LBVOL=LBVOL+$E(VOL,2,5)
"RTN","LBRYPPR0",10,0)
VI2 S LBISS=$S($D(LBISS):LBISS,1:$P(LBJD,U,3)),ISS=$P(LBRYPP2,U,2)
"RTN","LBRYPPR0",11,0)
 G:$E(ISS)="+" VI3 S LBISS=ISS G COPY
"RTN","LBRYPPR0",12,0)
VI3 S LBISS=LBISS+$E(ISS,2,5) G COPY
"RTN","LBRYPPR0",13,0)
IC S LBVOL=$S($D(LBVOL):LBVOL,1:$P(LBJD,U,2))
"RTN","LBRYPPR0",14,0)
 S LBISS=$S($D(LBISS):LBISS,1:$P(LBJD,U,3)),ISS=$P(LBRYPP2,U,3)
"RTN","LBRYPPR0",15,0)
 G:$E(ISS)="+" IC1 S LBISS=ISS G COPY
"RTN","LBRYPPR0",16,0)
IC1 S LBISS=LBISS+$E(ISS,2,5)
"RTN","LBRYPPR0",17,0)
COPY S (COPY,CO681)=0
"RTN","LBRYPPR0",18,0)
 F  G:CO681>0 FINI S COPY=$O(^LBRY(681,"AC",LBRYLOC,COPY)) G:COPY'>0 BEGIN^LBRYPPR S COPY1=0 D COPY1
"RTN","LBRYPPR0",19,0)
COPY1 Q:CO681>0  S COPY1=$O(^LBRY(681,"AC",LBRYLOC,COPY,COPY1)) Q:COPY1'>0  S COPY2=^LBRY(681,COPY1,1),START=$P(COPY2,U,10),STOP=$P(COPY2,U,11) I START="",STOP="" S CO681=CO681+1 G COPY1
"RTN","LBRYPPR0",20,0)
 I START]"",STOP="",START-DT<1 S CO681=CO681+1 G COPY1
"RTN","LBRYPPR0",21,0)
 I START="",STOP]"",STOP-DT'<0 S CO681=CO681+1 G COPY1
"RTN","LBRYPPR0",22,0)
 I START]"",STOP]"",START-DT<1,STOP-DT'<0 S CO681=CO681+1
"RTN","LBRYPPR0",23,0)
 G COPY1
"RTN","LBRYPPR0",24,0)
FINI I $D(^LBRY(682,"AC",LBRYLOC,LBJDT)) G EXT
"RTN","LBRYPPR0",25,0)
 S LBNUM=$P(^LBRY(682,0),U,3) F  S LBNUM=LBNUM+1 Q:'$D(^LBRY(682,LBNUM,0))
"RTN","LBRYPPR0",26,0)
 K DO S X=LBNUM,DIC="^LBRY(682,",DIC(0)="LN",DLAYGO=682 D FILE^DICN K DLAYGO
"RTN","LBRYPPR0",27,0)
 S DIE=DIC,DA=+Y,DR="[LBRY PREDICT INSERT]" D ^DIE
"RTN","LBRYPPR0",28,0)
EXT K LBJDT,LBVOL,LBISS,START,STOP,VOL,ISS,COPY,COPY1,COPY2,CO681,LBX,LBY
"RTN","LBRYPPR0",29,0)
 K LBZ,LBRYPP,LBNM,LBA1,LBJD,LBNM,LBRYPP0,LBRYPP1,LBRYPP3,LBRYPP2,LBJDY
"RTN","LBRYPPR0",30,0)
 K EMY,LBRYEF1,LBXA,PUD,X1,X2,XZ,LBJDM,LBJDD,LBMOZ,EM,LBEM,YY,LBWKZ
"RTN","LBRYPPR0",31,0)
 K NEWWK,NXTWK,FM,WOMLBXA,LBXB,LBY1,LBYA,LBYB,DIC,DIE,DR,LBN
"RTN","LBRYPPR0",32,0)
 K LBNUM,LBRYX,WOM,LBRDOW
"RTN","LBRYPPR0",33,0)
 Q
"RTN","LBRYPRC1")
0^36^B7547949
"RTN","LBRYPRC1",1,0)
LBRYPRC1 ;SSI/ALA-PROCESS TRANSACTIONS CONTINUED ;[ 05/23/97  12:13 PM ]
"RTN","LBRYPRC1",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPRC1",3,0)
FR ;  Update frequencies
"RTN","LBRYPRC1",4,0)
 S IDA=$P(LDATA(1),U,3),FRQ=$P(LDATA(4),U,4),SYN=$P(LDATA(2),U),DIC="^LBRY(680.2,"
"RTN","LBRYPRC1",5,0)
 I $D(^LBRY(680.2,IDA)) S DIE=DIC,DA=IDA,DR="[LBRYFRUP]" D ^DIE
"RTN","LBRYPRC1",6,0)
 I '$D(^LBRY(680.2,IDA)) S ^LBRY(680.2,IDA,0)=FRQ_U_SYN,DIK=DIC,DA=IDA D EN^DIK
"RTN","LBRYPRC1",7,0)
 I TAF'="",$G(^LBRY(680.5,TAF,0))'="" S $P(^LBRY(680.5,TAF,0),U,4)=IDA
"RTN","LBRYPRC1",8,0)
 K IDA,LDATA,FRQ,SYN,DIC,DIE,DA,DR,DIK,TAF,D,D0,DA,X
"RTN","LBRYPRC1",9,0)
 Q
"RTN","LBRYPRC1",10,0)
PU ;  Update publishers
"RTN","LBRYPRC1",11,0)
 S IDA=$P(LDATA(1),U,3),PUB=$P(LDATA(4),U),DIC="^LBRY(680.1,"
"RTN","LBRYPRC1",12,0)
 I $D(^LBRY(680.1,IDA)) S DIE=DIC,DA=IDA,DR="[LBRYPUUP]" D ^DIE
"RTN","LBRYPRC1",13,0)
 I '$D(^LBRY(680.1,IDA)) S ^LBRY(680.1,IDA,0)=PUB,DIK=DIC,DA=IDA D EN^DIK
"RTN","LBRYPRC1",14,0)
 I TAF'="",$G(^LBRY(680.5,TAF,3))'="" S $P(^LBRY(680.5,TAF,3),U,2)=IDA
"RTN","LBRYPRC1",15,0)
 K IDA,LDATA,FRQ,SYN,DIC,DIE,DA,DR,DIK,TAF,D,D0,DA,X
"RTN","LBRYPRC1",16,0)
 Q
"RTN","LBRYPRC1",17,0)
IN ;  Update indexing sources
"RTN","LBRYPRC1",18,0)
 K LDATA S NM=$O(^LBRY(682.1,TRN,6,"")),LDATA=^LBRY(682.1,TRN,6,NM,0)
"RTN","LBRYPRC1",19,0)
 S IDA=$P(LDATA,U,3),TIT=$P(LDATA,U),COD=$P(LDATA,U,2),DIC="^LBRY(680.8,"
"RTN","LBRYPRC1",20,0)
 I $D(^LBRY(680.8,IDA)) S DIE=DIC,DA=IDA,DR="[LBRYINUP]" D ^DIE
"RTN","LBRYPRC1",21,0)
 I '$D(^LBRY(680.8,IDA)) S ^LBRY(680.8,IDA,0)=TIT_U_COD,DIK=DIC,DA=IDA D EN^DIK
"RTN","LBRYPRC1",22,0)
 I TAF'="",'$D(^LBRY(680.5,TAF,1,"B",IDA)) D
"RTN","LBRYPRC1",23,0)
 . S NM=0 F  S NM=$O(^LBRY(680.5,TAF,1,NM)) Q:NM'>0!(NM="")  S LNM=NM
"RTN","LBRYPRC1",24,0)
 . Q:$G(LNM)=""
"RTN","LBRYPRC1",25,0)
 . S LNM=LNM+1,^LBRY(680.5,TAF,1,LNM,0)=IDA,^LBRY(680.5,TAF,1,"B",IDA,LNM)=""
"RTN","LBRYPRC1",26,0)
 . S $P(^LBRY(680.5,TAF,1,0),U,3,4)=LNM_U_LNM
"RTN","LBRYPRC1",27,0)
 K LDATA,NM,IDA,TIT,COD,DIC,DIE,DA,DR,DIK,LNM,D,D0,DA,X
"RTN","LBRYPRC1",28,0)
 Q
"RTN","LBRYPRC1",29,0)
PP ;  Update prediction patterns
"RTN","LBRYPRC1",30,0)
 S LDATA(5)=$G(^LBRY(682.1,TRN,5)),IDA=$P(LDATA(1),U,3),DIC="^LBRY(680.9,"
"RTN","LBRYPRC1",31,0)
 S COD=$P(LDATA(4),U,6),NAM=$P(LDATA(4),U,5)
"RTN","LBRYPRC1",32,0)
 I $D(^LBRY(680.9,IDA)) S DIE=DIC,DA=IDA,DR="[LBRYPPUP]" D ^DIE
"RTN","LBRYPRC1",33,0)
 I '$D(^LBRY(680.9,IDA)) S $P(^LBRY(680.9,IDA,0),U,1,2)=COD_U_NAM,DIK=DIC,DA=IDA D EN^DIK
"RTN","LBRYPRC1",34,0)
 S FRM="5;1^5;2^5;3^5;4^5;5^5;6^5;7^5;8",TOM="0;3^3;1^0;4^2;4^2;1^2;3^2;2^0;5"
"RTN","LBRYPRC1",35,0)
 F I=1:1:8 S FR=$P(FRM,U,I),TO=$P(TOM,U,I) D
"RTN","LBRYPRC1",36,0)
 . S ND1=$P(FR,";"),PC1=$P(FR,";",2),ND2=$P(TO,";"),PC2=$P(TO,";",2)
"RTN","LBRYPRC1",37,0)
 . S $P(^LBRY(680.9,IDA,ND2),U,PC2)=$P(^LBRY(682.1,TRN,ND1),U,PC1)
"RTN","LBRYPRC1",38,0)
 K ^LBRY(680.9,IDA,1) S NM=0
"RTN","LBRYPRC1",39,0)
 F  S NM=$O(^LBRY(682.1,TRN,8,NM)) Q:NM=""  D
"RTN","LBRYPRC1",40,0)
 . S ^LBRY(680.9,IDA,1,NM,0)=^LBRY(682.1,TRN,8,NM,0)
"RTN","LBRYPRC1",41,0)
 . S $P(^LBRY(680.9,IDA,1,0),U,3,4)=NM_U_NM
"RTN","LBRYPRC1",42,0)
 I $D(^LBRY(680.9,IDA,1))>0 S $P(^LBRY(680.9,IDA,1,0),U,5)=DT
"RTN","LBRYPRC1",43,0)
 I TAF'="",$G(^LBRY(680.5,TAF,0))'="" S $P(^LBRY(680.5,TAF,0),U,3)=IDA
"RTN","LBRYPRC1",44,0)
 K LDATA,NAM,COD,IDA,TAF,ND1,ND2,PC1,PC2,FRM,FR,TOM,TM,NM,DR,DIC,DIE,D,D0,DA,X
"RTN","LBRYPRC1",45,0)
 Q
"RTN","LBRYPRC2")
1^68
"RTN","LBRYPRCM")
0^73^B11416056
"RTN","LBRYPRCM",1,0)
LBRYPRCM ;SSI/ALA-PROCESS FORUM TRANSACTIONS MANUALLY ;[ 05/23/97  12:13 PM ]
"RTN","LBRYPRCM",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPRCM",3,0)
 ;  This is to manually process the library transactions
"RTN","LBRYPRCM",4,0)
 ;  received from FORUM and not updated automatically
"RTN","LBRYPRCM",5,0)
 S TRN="",CT=0
"RTN","LBRYPRCM",6,0)
TR S TRN=$O(^LBRY(682.1,"AC","M",TRN)) G EXIT:TRN=""
"RTN","LBRYPRCM",7,0)
 S TYP=$P(^LBRY(682.1,TRN,0),U,2) K %,LBRANS
"RTN","LBRYPRCM",8,0)
 F I=1:1:4 S LBDATA(I)=$G(^LBRY(682.1,TRN,I))
"RTN","LBRYPRCM",9,0)
 S TAF=$P(LBDATA(1),U,2),LDA=$P(LBDATA(1),U,3)
"RTN","LBRYPRCM",10,0)
 G TR:TAF=""
"RTN","LBRYPRCM",11,0)
 I LDA'="",$G(^LBRY(680.5,LDA,0))="" G TR
"RTN","LBRYPRCM",12,0)
 S TIT=$P(LBDATA(1),U),CT=CT+1
"RTN","LBRYPRCM",13,0)
 I $D(^LBRY(680.5,TAF,0)),TIT'[$P(^LBRY(680.5,TAF,0),U) D DSP G TR:$G(LBRANS)="N",EXIT:$G(LBRANS)=""
"RTN","LBRYPRCM",14,0)
 D TI
"RTN","LBRYPRCM",15,0)
TR1 S DIC="^LBRY(682.1,",DIE=DIC,DA=TRN,DR="2///^S X=""P""" D ^DIE
"RTN","LBRYPRCM",16,0)
 K CHD,FX,TX,ND1,PC1,ND2,PC2,FR,TO,PF,PT,PO,GLB,IN,INP,DR,DIE,DIC,DA
"RTN","LBRYPRCM",17,0)
 K D,D0,X,LBRYCLS,LBDATA,LDA,TAF,TYP,QFL,FLG,LBRANS,%,OTIT,NTIT,TIT
"RTN","LBRYPRCM",18,0)
 G TR
"RTN","LBRYPRCM",19,0)
TI ;  Update a title from a transaction
"RTN","LBRYPRCM",20,0)
 I LDA'="" S DA=LDA D ^LBRYX51
"RTN","LBRYPRCM",21,0)
 S LBRYCLS=TAF,$P(^LBRY(680.5,LBRYCLS,0),U)=$P(LBDATA(1),U)
"RTN","LBRYPRCM",22,0)
 S FLG=$S(LDA'="":$P(^LBRY(680.5,LDA,0),U,2),TAF'="":$P(^LBRY(680.5,TAF,0),U,2),1:"")
"RTN","LBRYPRCM",23,0)
 ;  Move the data from the transaction into the Title Authority File
"RTN","LBRYPRCM",24,0)
 S TX="0;5^0;6^3;5^3;8^3;1^3;3^3;4",FX="1;4^2;1^2;2^3;1^3;3^4;2^4;3"
"RTN","LBRYPRCM",25,0)
 F I=1:1:7 S FR=$P(FX,U,I),TO=$P(TX,U,I) D
"RTN","LBRYPRCM",26,0)
 . S ND1=$P(FR,";"),PC1=$P(FR,";",2),ND2=$P(TO,";"),PC2=$P(TO,";",2)
"RTN","LBRYPRCM",27,0)
 . S $P(^LBRY(680.5,LBRYCLS,ND2),U,PC2)=$P($G(^LBRY(682.1,TRN,ND1)),U,PC1)
"RTN","LBRYPRCM",28,0)
 S PF="2;3-680.5^3;2-680.5^4;1-680.1^4;4-680.2^4;5-680.9",PT="3;6^3;7^3;2^0;4^0;3"
"RTN","LBRYPRCM",29,0)
 F I=1:1:5 S FR=$P(PF,U,I),TO=$P(PT,U,I) D
"RTN","LBRYPRCM",30,0)
 . S PO=$P(FR,"-"),GLB=$P(FR,"-",2)
"RTN","LBRYPRCM",31,0)
 . S ND1=$P(PO,";"),PC1=$P(PO,";",2),ND2=$P(TO,";"),PC2=$P(TO,";",2)
"RTN","LBRYPRCM",32,0)
 . S CH=$P($G(^LBRY(682.1,TRN,ND1)),U,PC1),CHD=CH
"RTN","LBRYPRCM",33,0)
 . I CH'="" S J="" F  S J=$O(^LBRY(GLB,"B",$E(CH,1,30),J)) Q:J'>0  S:$P(^LBRY(GLB,J,0),U)=CH CHD=J
"RTN","LBRYPRCM",34,0)
 . S $P(^LBRY(680.5,LBRYCLS,ND2),U,PC2)=CHD
"RTN","LBRYPRCM",35,0)
 I $D(^LBRY(682.1,TRN,6)) S IN=0 F  S IN=$O(^LBRY(682.1,TRN,6,IN)) Q:IN'>0  D
"RTN","LBRYPRCM",36,0)
 . S INP=^LBRY(682.1,TRN,6,IN,0)
"RTN","LBRYPRCM",37,0)
 . S ^LBRY(680.5,LBRYCLS,1,IN,0)=$S($D(^LBRY(680.8,"B",INP)):$O(^LBRY(680.8,"B",INP,"")),1:INP)
"RTN","LBRYPRCM",38,0)
 . S ^LBRY(680.5,LBRYCLS,1,0)="^680.53PA^"_IN_U_IN
"RTN","LBRYPRCM",39,0)
 I $D(^LBRY(682.1,TRN,7)) S IN=0 F  S IN=$O(^LBRY(682.1,TRN,7,IN)) Q:IN'>0  D
"RTN","LBRYPRCM",40,0)
 . S ^LBRY(680.5,LBRYCLS,2,IN,0)=^LBRY(682.1,TRN,7,IN,0)
"RTN","LBRYPRCM",41,0)
 . S ^LBRY(680.5,LBRYCLS,2,0)="^680.54^"_IN_U_IN_U_DT
"RTN","LBRYPRCM",42,0)
 S $P(^LBRY(680.5,LBRYCLS,0),U,5)="N",$P(^(0),U,2)=FLG
"RTN","LBRYPRCM",43,0)
 I $F("CTI,TIC,LTR",TYP) S DA=LDA,DIK="^LBRY(680.5," D ^DIK
"RTN","LBRYPRCM",44,0)
 S DA=LBRYCLS D ^LBRYX53
"RTN","LBRYPRCM",45,0)
 I LDA'="" S LBRTDA="" D
"RTN","LBRYPRCM",46,0)
 . F  S LBRTDA=$O(^LBRY(680,"B",LDA,LBRTDA)) Q:LBRTDA=""  D
"RTN","LBRYPRCM",47,0)
 . . S DR=".01///^S X=TAF",DIC="^LBRY(680,",DIE=DIC,DA=LBRTDA D ^DIE
"RTN","LBRYPRCM",48,0)
 Q
"RTN","LBRYPRCM",49,0)
EXIT I CT=0 R !!,"No transactions to process.  Press Return to continue: ",C:DTIME
"RTN","LBRYPRCM",50,0)
 K CHD,FX,TX,ND1,PC1,ND2,PC2,FR,TO,PF,PT,PO,GLB,IN,INP,DR,DIE,DIC,DA
"RTN","LBRYPRCM",51,0)
 K D,D0,X,LBRYCLS,LBDATA,LDA,TAF,TRN,QFL,FLG,CT,C,OTIT,NTIT,TIT,%
"RTN","LBRYPRCM",52,0)
 K LBRANS
"RTN","LBRYPRCM",53,0)
 S $P(^LBRY(680.5,0),U,3)=99000
"RTN","LBRYPRCM",54,0)
 Q
"RTN","LBRYPRCM",55,0)
DSP ; Display differences and ask for override
"RTN","LBRYPRCM",56,0)
 S OTIT="" I LDA'="" S OTIT=$P($G(^LBRY(680.5,LDA,0)),U)
"RTN","LBRYPRCM",57,0)
 I OTIT="" S OTIT=$P($G(^LBRY(680.5,TAF,0)),U)
"RTN","LBRYPRCM",58,0)
 S NTIT=$P($G(^LBRY(682.1,TRN,1)),U)
"RTN","LBRYPRCM",59,0)
 W !!,"OLD TITLE: "_OTIT
"RTN","LBRYPRCM",60,0)
 W !!,"NEW TITLE: "_NTIT
"RTN","LBRYPRCM",61,0)
QS W !!,"Overwrite OLD TITLE with NEW TITLE " D YN^DICN
"RTN","LBRYPRCM",62,0)
 I %=0 W !!,"Please answer 'Y' to correct old title or 'N' to not process this title" G QS
"RTN","LBRYPRCM",63,0)
 S LBRANS=$S(%=1:"Y",%=2:"N",1:"")
"RTN","LBRYPRCM",64,0)
 Q
"RTN","LBRYPRCS")
0^37^B10586120
"RTN","LBRYPRCS",1,0)
LBRYPRCS ;SSI/ALA-PROCESS LIBRARY TRANSACTIONS ;[ 04/17/98  1:04 PM ]
"RTN","LBRYPRCS",2,0)
 ;;2.5;Library;**2,5**;Mar 11, 1996
"RTN","LBRYPRCS",3,0)
 ;  This is to automatically process the library transactions
"RTN","LBRYPRCS",4,0)
 ;  received from FORUM
"RTN","LBRYPRCS",5,0)
 S TRN=""
"RTN","LBRYPRCS",6,0)
TR S TRN=$O(^LBRY(682.1,"AC","R",TRN)) G EXIT:TRN=""
"RTN","LBRYPRCS",7,0)
 S TYP=$P(^LBRY(682.1,TRN,0),U,2)
"RTN","LBRYPRCS",8,0)
 F I=1:1:4 S LDATA(I)=$G(^LBRY(682.1,TRN,I))
"RTN","LBRYPRCS",9,0)
 S TAF=$P(LDATA(1),U,2),LDA=$P(LDATA(1),U,3)
"RTN","LBRYPRCS",10,0)
 I TYP="DLT" S:$D(^LBRY(680.5,TAF,0)) $P(^(0),U,2)=2 G TR1
"RTN","LBRYPRCS",11,0)
 I TYP="PPR"!(TYP="CPR") D PP^LBRYPRC1 G TR1
"RTN","LBRYPRCS",12,0)
 I TYP="FRR"!(TYP="CFR") D FR^LBRYPRC1 G TR1
"RTN","LBRYPRCS",13,0)
 I TYP="PUR" D PU^LBRYPRC1 G TR1
"RTN","LBRYPRCS",14,0)
 I TYP="ISR" D IN^LBRYPRC1 G TR1
"RTN","LBRYPRCS",15,0)
 S QFL=0 S:$G(BFL)="" BFL=0 D TI I QFL G TR
"RTN","LBRYPRCS",16,0)
TR1 S DIC="^LBRY(682.1,",DIE=DIC,DA=TRN,DR="2///^S X=""P""" D ^DIE
"RTN","LBRYPRCS",17,0)
 K CHD,FX,TX,ND1,PC1,ND2,PC2,FR,TO,PF,PT,PO,GLB,IN,INP,DR,DIE,DIC,DA
"RTN","LBRYPRCS",18,0)
 K D,D0,X,LBRYCLS,LDATA,LDA,TAF,TYP,QFL,FLG
"RTN","LBRYPRCS",19,0)
 G TR
"RTN","LBRYPRCS",20,0)
TI ;  Update a title from a transaction
"RTN","LBRYPRCS",21,0)
 Q:TAF=""  I LDA'="",$G(^LBRY(680.5,LDA,0))="" Q
"RTN","LBRYPRCS",22,0)
 S TIT=$P(LDATA(1),U)
"RTN","LBRYPRCS",23,0)
 I $D(^LBRY(680.5,TAF,0)),TIT'[$P(^LBRY(680.5,TAF,0),U) D  S QFL=1 Q
"RTN","LBRYPRCS",24,0)
 . S DIC="^LBRY(682.1,",DIE=DIC,DA=TRN,DR="2///^S X=""M""" D ^DIE
"RTN","LBRYPRCS",25,0)
 . I BFL=0 S XMB="LBRYMANL",XMY("G.LBRYUPDT")="",XMDUZ="FORUM LIBRARIANS" D ^XMB K XMY,XMDUZ,XMG S BFL=1
"RTN","LBRYPRCS",26,0)
 I LDA'="" S DA=LDA D ^LBRYX51
"RTN","LBRYPRCS",27,0)
 S LBRYCLS=TAF,$P(^LBRY(680.5,LBRYCLS,0),U)=$P(LDATA(1),U)
"RTN","LBRYPRCS",28,0)
 S FLG=$S(LDA'="":$P(^LBRY(680.5,LDA,0),U,2),TAF'="":$P(^LBRY(680.5,TAF,0),U,2),1:"")
"RTN","LBRYPRCS",29,0)
 ;  Move the data from the transaction into the Title Authority File
"RTN","LBRYPRCS",30,0)
 S TX="0;5^0;6^3;5^3;8^3;1^3;3^3;4",FX="1;4^2;1^2;2^3;1^3;3^4;2^4;3"
"RTN","LBRYPRCS",31,0)
 F I=1:1:7 S FR=$P(FX,U,I),TO=$P(TX,U,I) D
"RTN","LBRYPRCS",32,0)
 . S ND1=$P(FR,";"),PC1=$P(FR,";",2),ND2=$P(TO,";"),PC2=$P(TO,";",2)
"RTN","LBRYPRCS",33,0)
 . S $P(^LBRY(680.5,LBRYCLS,ND2),U,PC2)=$P($G(^LBRY(682.1,TRN,ND1)),U,PC1)
"RTN","LBRYPRCS",34,0)
 S PF="2;3-680.5^3;2-680.5^4;1-680.1^4;4-680.2^4;5-680.9",PT="3;6^3;7^3;2^0;4^0;3"
"RTN","LBRYPRCS",35,0)
 F I=1:1:5 S FR=$P(PF,U,I),TO=$P(PT,U,I) D
"RTN","LBRYPRCS",36,0)
 . S PO=$P(FR,"-"),GLB=$P(FR,"-",2)
"RTN","LBRYPRCS",37,0)
 . S ND1=$P(PO,";"),PC1=$P(PO,";",2),ND2=$P(TO,";"),PC2=$P(TO,";",2)
"RTN","LBRYPRCS",38,0)
 . S CH=$P($G(^LBRY(682.1,TRN,ND1)),U,PC1),CHD=CH
"RTN","LBRYPRCS",39,0)
 . I CH'="" S J="" F  S J=$O(^LBRY(GLB,"B",$E(CH,1,30),J)) Q:J'>0  S:$P($G(^LBRY(GLB,J,0)),U)=CH CHD=J
"RTN","LBRYPRCS",40,0)
 . S $P(^LBRY(680.5,LBRYCLS,ND2),U,PC2)=CHD
"RTN","LBRYPRCS",41,0)
 I $D(^LBRY(682.1,TRN,6)) S IN=0 F  S IN=$O(^LBRY(682.1,TRN,6,IN)) Q:IN'>0  D
"RTN","LBRYPRCS",42,0)
 . S INP=^LBRY(682.1,TRN,6,IN,0)
"RTN","LBRYPRCS",43,0)
 . S ^LBRY(680.5,LBRYCLS,1,IN,0)=$S($D(^LBRY(680.8,"B",INP)):$O(^LBRY(680.8,"B",INP,"")),1:INP)
"RTN","LBRYPRCS",44,0)
 . S ^LBRY(680.5,LBRYCLS,1,0)="^680.53PA^"_IN_U_IN
"RTN","LBRYPRCS",45,0)
CK I TYP="TIR",('$D(^LBRY(682.1,TRN,7))) D
"RTN","LBRYPRCS",46,0)
 . S DA=LBRYCLS,DIE="^LBRY(680.5,",DR="4///@"
"RTN","LBRYPRCS",47,0)
 . D ^DIE
"RTN","LBRYPRCS",48,0)
 I $D(^LBRY(682.1,TRN,7)) S IN=0 F  S IN=$O(^LBRY(682.1,TRN,7,IN)) Q:IN'>0  D
"RTN","LBRYPRCS",49,0)
 . S ^LBRY(680.5,LBRYCLS,2,IN,0)=^LBRY(682.1,TRN,7,IN,0)
"RTN","LBRYPRCS",50,0)
 . S ^LBRY(680.5,LBRYCLS,2,0)="^680.54^"_IN_U_IN_U_DT
"RTN","LBRYPRCS",51,0)
 S $P(^LBRY(680.5,LBRYCLS,0),U,5)="N",$P(^(0),U,2)=FLG
"RTN","LBRYPRCS",52,0)
 I $F("CTI,TIC,LTR",TYP) S DA=LDA,DIK="^LBRY(680.5," D ^DIK
"RTN","LBRYPRCS",53,0)
 S DA=LBRYCLS D ^LBRYX53
"RTN","LBRYPRCS",54,0)
 I LDA'="" S LBRTDA="" D
"RTN","LBRYPRCS",55,0)
 . F  S LBRTDA=$O(^LBRY(680,"B",LDA,LBRTDA)) Q:LBRTDA=""  D
"RTN","LBRYPRCS",56,0)
 . . S DR=".01///^S X=TAF",DIC="^LBRY(680,",DIE=DIC,DA=LBRTDA D ^DIE
"RTN","LBRYPRCS",57,0)
 Q
"RTN","LBRYPRCS",58,0)
EXIT K CHD,FX,TX,ND1,PC1,ND2,PC2,FR,TO,PF,PT,PO,GLB,IN,INP,DR,DIE,DIC,DA
"RTN","LBRYPRCS",59,0)
 K D,D0,X,LBRYCLS,LDATA,LDA,TAF,TRN,QFL,FLG,BFL
"RTN","LBRYPRCS",60,0)
 S $P(^LBRY(680.5,0),U,3)=99000
"RTN","LBRYPRCS",61,0)
 Q
"RTN","LBRYPRG")
0^38^B706874
"RTN","LBRYPRG",1,0)
LBRYPRG ;SSI/ALA-PURGE COMPLETED TRANSACTIONS ;[ 05/23/97  12:13 PM ]
"RTN","LBRYPRG",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYPRG",3,0)
 ;  This is to purge transactions after they have been processed
"RTN","LBRYPRG",4,0)
 ;  and/or transmitted.
"RTN","LBRYPRG",5,0)
 S X="T-1M" D ^%DT S LBRDDT=Y
"RTN","LBRYPRG",6,0)
 S DIK="^LBRY(682.1,"
"RTN","LBRYPRG",7,0)
 F LBRSTA="P","T" S LBRYN="" D NT
"RTN","LBRYPRG",8,0)
 K LBRSTA,LBRYN,DIK,DA,LBRDDT,LBRTYP
"RTN","LBRYPRG",9,0)
 Q
"RTN","LBRYPRG",10,0)
NT S LBRYN=$O(^LBRY(682.1,"AC",LBRSTA,LBRYN)) Q:LBRYN=""
"RTN","LBRYPRG",11,0)
 I $P(^LBRY(682.1,LBRYN,0),U,6)>LBRDDT G NT
"RTN","LBRYPRG",12,0)
 S LBRTYP=$P(^LBRY(682.1,LBRYN,0),U,2)
"RTN","LBRYPRG",13,0)
 I LBRTYP="NTL"!(LBRTYP="UTL"),^XMB("NETNAME")["FORUM.VA.GOV" G NT
"RTN","LBRYPRG",14,0)
 S DA=LBRYN D ^DIK
"RTN","LBRYPRG",15,0)
 G NT
"RTN","LBRYREPT")
0^72^B1012931
"RTN","LBRYREPT",1,0)
LBRYREPT ;SSI/ALA-LIBRARY PACKAGE STATUS REPORT ;[ 09/02/97  3:20 PM ]
"RTN","LBRYREPT",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYREPT",3,0)
EN ;  Report on the status of the Library TaskMan options
"RTN","LBRYREPT",4,0)
 W !!,"LIBRARY TASKMAN OPTIONS STATUS REPORT",!
"RTN","LBRYREPT",5,0)
 F OPT="LBRY TRAN SEND","LBRY TRAN PROCESS","LBRY TRAN PURGE" D DS
"RTN","LBRYREPT",6,0)
 R !!,"Press Return to Continue: ",X:DTIME
"RTN","LBRYREPT",7,0)
 K OPT,DA,TSK,Y,LDT,FRQ
"RTN","LBRYREPT",8,0)
 Q
"RTN","LBRYREPT",9,0)
DS ;  Check and display options
"RTN","LBRYREPT",10,0)
 I $$FIND^XUTMOPT(OPT)=-1 D  Q
"RTN","LBRYREPT",11,0)
 . W !!!,OPT," is not set up in TaskMan.  Please call IRM."
"RTN","LBRYREPT",12,0)
 S DIC(0)="NZ",DIC="^DIC(19.2,",X=OPT D ^DIC
"RTN","LBRYREPT",13,0)
 S DA=+Y,TSK=Y(0),FRQ=$P(TSK,"^",6)
"RTN","LBRYREPT",14,0)
 S Y=$P(TSK,"^",2),LDT=$$FMTE^XLFDT(Y,1)
"RTN","LBRYREPT",15,0)
 W !,OPT,?20,"Frequency: ",FRQ,?40,"Run Time: ",LDT
"RTN","LBRYREPT",16,0)
 Q
"RTN","LBRYRET")
0^40^B11592220
"RTN","LBRYRET",1,0)
LBRYRET ;ISC2/DJM-LIBRARY RETURN FROM ROUTING ;[ 11/26/97  4:36 PM ]
"RTN","LBRYRET",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRET",3,0)
EN I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYRET",4,0)
 . D ^LBRYASK
"RTN","LBRYRET",5,0)
 D CKIN G:Y<0 EXIT S X=$O(^LBRY(681,"AC",LBRYLOC,0)) G:X="" NOT
"RTN","LBRYRET",6,0)
CONT S (E,E0,E1)=0 D MORE
"RTN","LBRYRET",7,0)
 G:'$D(A(1)) DISPLAY
"RTN","LBRYRET",8,0)
CONT1 S E=0,V1=$O(^LBRY(682,"A1",LBRYLOC,9999998-YDT1)) G:V1="" INIT S E1=$O(^LBRY(682,"A1",LBRYLOC,V1,0)) F I=1:1 G:'$D(A(I)) INIT S:A(I)=E1 E=I G:E>0 INIT
"RTN","LBRYRET",9,0)
INIT S E1=E-3 S:E1<1 E1=1 S E0=E1 D FWD1^LBRYCK0 G DISPLAY
"RTN","LBRYRET",10,0)
CKIN W @IOF,?5,"VA Library Return from Routing for "_LBRYNAM
"RTN","LBRYRET",11,0)
 S (YDT1,Y)=DT X ^DD("DD") W "   ",Y,! S YDT=Y
"RTN","LBRYRET",12,0)
 S DIC="^LBRY(680,",DIC(0)="AEQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR&($P(^(0),U,2)="""")"
"RTN","LBRYRET",13,0)
 D ^DIC K DIC("S")
"RTN","LBRYRET",14,0)
 Q:Y<0  S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYRET",15,0)
 S LA0=$P(^LBRY(680.5,LBRYCLS,0),U),LA00=""
"RTN","LBRYRET",16,0)
 S:$D(^LBRY(680,LBRYLOC,1)) LA00="  "_$P(^(1),U,5)
"RTN","LBRYRET",17,0)
 S LA0="TITLE: "_LA0
"RTN","LBRYRET",18,0)
 Q
"RTN","LBRYRET",19,0)
MORE S N="",A(1)="",LA1="JOURNAL",LA2="DATE",LA3="V(I)",LA4="CPY'S"
"RTN","LBRYRET",20,0)
 S LA5="COPIES",LA6="RECEIVED",LA7="ORD'D",LA8="COMPLETED"
"RTN","LBRYRET",21,0)
 S LA9="DISPOSITION",LA10="RCV'D",LA12="SHELVED"
"RTN","LBRYRET",22,0)
 F I=1:1 S:A(I)="" N=$O(^LBRY(682,"AC",LBRYLOC,N)) G:N="" MORE1 S A(I)=$O(^LBRY(682,"AC",LBRYLOC,N,A(I))) S:$O(^(A(I)))>0 A(I+1)=A(I) S:$O(^(A(I)))="" A(I+1)=""
"RTN","LBRYRET",23,0)
MORE1 K A(I) S II=E Q
"RTN","LBRYRET",24,0)
DISPLAY ;SHOW ISSUES
"RTN","LBRYRET",25,0)
DISP0 W @IOF,?5,"VA Library Return from Routing",?60,YDT
"RTN","LBRYRET",26,0)
 W !!,LA0,!,LA00,!!,"ID",?6,LA1,?41,LA2,?52,LA4,?59,LA4,?66,LA5
"RTN","LBRYRET",27,0)
 W !,"NUM",?7,LA2,?20,LA3,?41,LA6,?52,LA7,?59,LA10,?66,LA12,!
"RTN","LBRYRET",28,0)
 F I=1:1:77 W "-"
"RTN","LBRYRET",29,0)
 W !
"RTN","LBRYRET",30,0)
 S AA="",RTD=0 G:E0=0 ASK1 F I=E0:1:E1 S AA=^LBRY(682,A(I),1),RTD=0,RFLAG=0,MR=0,RTD1="" D RTED,DISPX,DISP1
"RTN","LBRYRET",31,0)
 ;  Display to user their options
"RTN","LBRYRET",32,0)
ASK1 D ^LBRYRET0
"RTN","LBRYRET",33,0)
 ;  Go select user's option.  State error prompt if needed
"RTN","LBRYRET",34,0)
ASK3 G ASK3^LBRYRET0
"RTN","LBRYRET",35,0)
RTED S MR=$O(^LBRY(682,A(I),4,MR)) Q:MR=""!(MR?.AP)  S BB=^LBRY(682,A(I),4,MR,0) S BB2=$P(BB,U,2),BB1=$P(BB,U) S:BB2=3&(BB1'="ToC") RTD=RTD+1 S:BB1="ToC" BB1=""
"RTN","LBRYRET",36,0)
 I BB2=3,RTD<5 S RTD1=RTD1_BB1_"," G RTED
"RTN","LBRYRET",37,0)
 I BB2=3,RTD'<5,RFLAG=0 S RTD1=$E(RTD1,1,$L(RTD1)-1)_"...",RFLAG=1
"RTN","LBRYRET",38,0)
 G RTED
"RTN","LBRYRET",39,0)
DISPX S AA1=$P(AA,U),AA2=$P(AA,U,2),AA3=$P(AA,U,3)
"RTN","LBRYRET",40,0)
 S AA4=$P(AA,U,4),AA5=$P(AA,U,5),AA6=""
"RTN","LBRYRET",41,0)
 S:$D(^LBRY(682,A(I),4,1,0)) AA6=$P(^(0),U,7) I AA4=0 S AA4=""
"RTN","LBRYRET",42,0)
 S RTDA=$S(RTD=AA5:"   ALL",1:RTD1)
"RTN","LBRYRET",43,0)
 S:AA3'="" AA2=AA2_"("_AA3_")" S Y=AA1 X ^DD("DD") S AA1=Y I AA6'="" S Y=AA6 X ^DD("DD") S AA6=Y
"RTN","LBRYRET",44,0)
 Q
"RTN","LBRYRET",45,0)
DISP1 W !,I,?5,AA1,?18,AA2,?40,AA6,?54,AA5,?61,AA4,?66,RTDA Q
"RTN","LBRYRET",46,0)
NOT W !!,LA0,!!,"This title is not fully initialized."
"RTN","LBRYRET",47,0)
 W !,"Please use SUPERVISOR option 1 and/or option 2 to set up this title."
"RTN","LBRYRET",48,0)
 S XZ="Exit// " D PAUSE^LBRYUTL
"RTN","LBRYRET",49,0)
 G LBRYRET
"RTN","LBRYRET",50,0)
EXIT K %,%DT,%X,LA0,LA1,LA2,LA3,LA4,LA5,LA6,LA7,LA8,LA9,LA10,LA11,LA12,A,I
"RTN","LBRYRET",51,0)
 K II,IA,I1,J,AA,AA1,AA2,AA3,AA4,AA5,AA6,AA7,AA8,AB,AB1,AB2,CA,CA1,DIC
"RTN","LBRYRET",52,0)
 K DIW,DIWF,DIWL,DIWR,DIWT,DIWTC,DIWX,CLR,LL,DN,DR,DX,DY,N,O,X1,X2,XX
"RTN","LBRYRET",53,0)
 K Z,LB,LB1,LB2,MM,E,E0,E1,V1,Y,YDT,YDT1,RRY,A,LA00,RTD,MR,BB,BB1,BB2
"RTN","LBRYRET",54,0)
 K RTD1,RFLAG,RTDA,XZ,XT1,XT2,XT3,XT4,LS,LINE1,LINE2,XQH,XTA,XTB,XTC
"RTN","LBRYRET",55,0)
 K XTD,XTE,LBX,RC,N1,N2,RR,RR1,RR2,RR7,RRX,RR4,RR5,RR8,Q,G1,G,G2,NUM
"RTN","LBRYRET",56,0)
 K LBRYR,LBRYLOC,LBRYCLS,RRX0
"RTN","LBRYRET",57,0)
 Q
"RTN","LBRYRET0")
0^41^B5173674
"RTN","LBRYRET0",1,0)
LBRYRET0 ;ISC2/DJM-RETURN FROM ROUTING OUTPUT MSG ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRET0",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRET0",3,0)
START F I=1:1:7 S LS(I)=""
"RTN","LBRYRET0",4,0)
 S XT1=$S($D(^LBRY(680,LBRYLOC,16,0)):1,1:0)
"RTN","LBRYRET0",5,0)
 S XT2=$S($D(A(E0-1)):1,1:0),XT3=$S($D(A(E1+1)):1,1:0)
"RTN","LBRYRET0",6,0)
 S XT4=$S($D(A(1)):1,1:0),LS(1)="Choose: "
"RTN","LBRYRET0",7,0)
 S:XT4 LS(2)=$C(34)_"ID NUM"_$C(34)_" to return from routing"
"RTN","LBRYRET0",8,0)
 S:XT1 LS(5)="see check-in (N)otes" S:XT2 LS(6)="(B)ackup" S:XT3 LS(7)="(F)orward"
"RTN","LBRYRET0",9,0)
 S (LINE1,LINE2)="" F I=1:1:7 Q:$L(LINE1)+$L(LS(I))'<78  S:LS(I)]"" LINE1=LINE1_LS(I) K LS(I) I I>1&($D(LS(I+1))) S:LS(I+1)]"" LINE1=LINE1_", "
"RTN","LBRYRET0",10,0)
 I '$D(LS(7)) S LINE1=LINE1_"." G PRINT
"RTN","LBRYRET0",11,0)
 F J=I:1:7 S:LS(J)]"" LINE2=LINE2_LS(J) K LS(J) I J<7&($D(LS(J+1))) S:LS(J+1)]"" LINE2=LINE2_", "
"RTN","LBRYRET0",12,0)
 S LINE2=LINE2_"."
"RTN","LBRYRET0",13,0)
PRINT W !!,LINE1,! W:$D(LINE2) LINE2,! W "Exit// "
"RTN","LBRYRET0",14,0)
EXIT K LINE1,LINE2,I,J
"RTN","LBRYRET0",15,0)
 Q
"RTN","LBRYRET0",16,0)
 ;LIBRARY SERIALS WHAT-TO-DO PROMPT (FROM LBRYRET)
"RTN","LBRYRET0",17,0)
ASK3 S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 G ^LBRYRET
"RTN","LBRYRET0",18,0)
 I X="" G ^LBRYRET
"RTN","LBRYRET0",19,0)
 I X=" " S:$D(^TMP("LBRY",DUZ,6)) X=^(6)
"RTN","LBRYRET0",20,0)
 I X="??" S XQH="LBRY SERIALS RETURN" D EN^XQH G DISPLAY^LBRYRET
"RTN","LBRYRET0",21,0)
 I X="^" G ^LBRYRET
"RTN","LBRYRET0",22,0)
 I $D(A(E0-1)),"Bb"[$E(X,1) D BACKUP^LBRYCK0 G DISPLAY^LBRYRET
"RTN","LBRYRET0",23,0)
 I $D(A(E1+1)),"Ff"[$E(X,1) D FORWARD^LBRYCK0 G DISPLAY^LBRYRET
"RTN","LBRYRET0",24,0)
 I $D(^LBRY(680,LBRYLOC,16,0)),"Nn"[X D UTIL,^LBRYRET2 G DISPLAY^LBRYRET
"RTN","LBRYRET0",25,0)
ASK2 I $D(A(X)) D UTIL G ^LBRYRET1
"RTN","LBRYRET0",26,0)
WRONG S E=0,XTA="",XTB="",XTC="",XTD="",XTE="" S:$D(A(1)) XTA="a number under heading "_$C(34)_"ID NUM"_$C(34)
"RTN","LBRYRET0",27,0)
 S XTC=$S(XT1&((XT2)!(XT3)):", N",1:""),XTD=$S(XT2&(XT3):", B or F.",XT2!(XT3):" or ",1:".") G:XTD["." WRONG1
"RTN","LBRYRET0",28,0)
 S XTE=$S(XT2:"B.",XT3:"F.",1:"")
"RTN","LBRYRET0",29,0)
WRONG1 W !!,"Enter "_XTA_XTB_XTC_XTD_XTE,!,"Enter '??' for more help."
"RTN","LBRYRET0",30,0)
 W !!,"Choose: Exit// " D MORE^LBRYRET
"RTN","LBRYRET0",31,0)
 G ASK3
"RTN","LBRYRET0",32,0)
UTIL K ^TMP("LBRY",DUZ,6) S ^(6)=X
"RTN","LBRYRET0",33,0)
 Q
"RTN","LBRYRET1")
0^42^B5793858
"RTN","LBRYRET1",1,0)
LBRYRET1 ;ISC2/DJM-LIBRARY RETURN FROM ROUTING ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRET1",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRET1",3,0)
CK D CHECK,SHOW G:RTD=AA4 FINI^LBRYRET2 S LBX=X G ASK^LBRYRET2
"RTN","LBRYRET1",4,0)
CHECK K RC
"RTN","LBRYRET1",5,0)
 S LA0=$P(^LBRY(680,LBRYLOC,0),U),LA0=$P(^LBRY(680.5,LA0,0),U)
"RTN","LBRYRET1",6,0)
 S LA1="JOURNAL",LA2="DATE",LA3="V(I)",LA8="COMPLETED",LA5="COPIES"
"RTN","LBRYRET1",7,0)
 S LA6="RECEIVED",LA11="ORDERED",LA9="DISPOSITION",LA12="SHELVED"
"RTN","LBRYRET1",8,0)
 S LA0="TITLE: "_LA0
"RTN","LBRYRET1",9,0)
 S LA00="" S:$D(^LBRY(680,LBRYLOC,1))#2 LA00="  "_$P(^(1),U,5)
"RTN","LBRYRET1",10,0)
 S RTD=0 D RTED S:RTD=0 RTD=""
"RTN","LBRYRET1",11,0)
 S AA=^LBRY(682,A(X),1),AA1=$P(AA,U),AA2=$P(AA,U,2),AA3=$P(AA,U,3)
"RTN","LBRYRET1",12,0)
 S AA4=$P(AA,U,4),AA5=$P(AA,U,5) S:AA3'="" AA2=AA2_"("_AA3_")" I AA4=0 S AA4=""
"RTN","LBRYRET1",13,0)
 S Y=AA1 X ^DD("DD") S AA1=Y
"RTN","LBRYRET1",14,0)
 W @IOF,"VA Library Return from Routing",?60,YDT,!!,LA0
"RTN","LBRYRET1",15,0)
 W !,LA00,!!,?5,LA1,?41,LA5,?50,LA5,?60,LA5,!,?5,LA2,?21,LA3,?41,LA11
"RTN","LBRYRET1",16,0)
 W ?50,LA6,?60,LA12,!
"RTN","LBRYRET1",17,0)
 W ?5 F I=1:1:64 W "-"
"RTN","LBRYRET1",18,0)
 W !,?5,AA1,?18,AA2,?44,AA5,?53,AA4,?63,RTD,! Q
"RTN","LBRYRET1",19,0)
RTED S N=0 F  S N=$O(^LBRY(682,A(X),4,N)) Q:N'>0  S N2=^LBRY(682,A(X),4,N,0) I $P(N2,U,2)=3&($P(N2,U)'="ToC") S RTD=RTD+1
"RTN","LBRYRET1",20,0)
 Q
"RTN","LBRYRET1",21,0)
SHOW S N=0 W !,?6,"C",?58,"LIBRARY",!,?6,"A",?45,"DATE",?58,"SITE"
"RTN","LBRYRET1",22,0)
 W !,?6,"T",?8,"STATUS",?28,"LOCATION",?45,"RECEIVED",?58,"LOCATION"
"RTN","LBRYRET1",23,0)
 W !,?6 F I=1:1:73 W "-"
"RTN","LBRYRET1",24,0)
SHOW1 S N=$O(^LBRY(682,A(X),4,"B",N)) Q:N=""
"RTN","LBRYRET1",25,0)
 S N1=$O(^LBRY(682,A(X),4,"B",N,0)),RR=^LBRY(682,A(X),4,N1,0)
"RTN","LBRYRET1",26,0)
 S RR1=$P(RR,U),RR2=$P(RR,U,2),RR7=$P(RR,U,7) D SHOW2
"RTN","LBRYRET1",27,0)
 ;;I $P(RR,U,2)<3,$P(RR,U,1)'="ToC" INSERT INTO SHOW1 AFTER S RR=... TO ONLY DISPLAY COPIES ABLE TO BE RETURNED.
"RTN","LBRYRET1",28,0)
 G SHOW1
"RTN","LBRYRET1",29,0)
SHOW2 S Y=RR7 X ^DD("DD") S RR7=Y S:RR1=+RR1 RR1="c"_RR1
"RTN","LBRYRET1",30,0)
 S RR2=$S(RR2=1:"ROUTED",RR2=2:"ROUTED (TO RETURN)",RR2=3:"SHELVED",RR2=4:"NOT RECEIVED",1:"TOC NOT RECEIVED")
"RTN","LBRYRET1",31,0)
 S RRX=$P(RR,U,3),RRX0=$G(^LBRY(681,RRX,0)),RRX=$G(^LBRY(681,RRX,1))
"RTN","LBRYRET1",32,0)
 S RR4=$P(RRX,U,4),RRY=$P(RRX,U,2),RR5=""
"RTN","LBRYRET1",33,0)
 I $G(RRY)'="" S RR5=$E($P(^LBRY(680.7,RRY,0),U),1,15)
"RTN","LBRYRET1",34,0)
 S RR8=$P(RRX0,U,4),RR8=$S(RR5]"":$E($P(^LBRY(680.6,RR8,0),U),1,22),1:"")
"RTN","LBRYRET1",35,0)
 W !,RR1,?6,RR4,?8,RR2,?28,RR5,?45,RR7,?58,RR8
"RTN","LBRYRET1",36,0)
 Q
"RTN","LBRYRET2")
0^43^B6380655
"RTN","LBRYRET2",1,0)
LBRYRET2 ;ISC2/DJM-RETURN FROM ROUTING NOTES ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRET2",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRET2",3,0)
START S E=0,DIWL=1,DIWR=79,DIWF="N" K ^UTILITY($J,"W")
"RTN","LBRYRET2",4,0)
 S XX=$P(^LBRY(680,DA,16,0),U,3)
"RTN","LBRYRET2",5,0)
 F I=1:1:XX S X=^LBRY(680,DA,16,I,0) D ^DIWP
"RTN","LBRYRET2",6,0)
 S X=^UTILITY($J,"W",DIWL)-1,X1=0,X2=0
"RTN","LBRYRET2",7,0)
LOOP W @IOF,?5,"VA Library Return from Routing ** NOTES **",?60,YDT
"RTN","LBRYRET2",8,0)
 W !!,LA0 W:$D(LA00) !,LA00 W !! S X1=X1+X2,X2=X2+16 I X2>X S X2=X
"RTN","LBRYRET2",9,0)
 I X1'<X G EXIT
"RTN","LBRYRET2",10,0)
 F I=X1+1:1:X2 S O=^UTILITY($J,"W",DIWL,I,0) W O,!
"RTN","LBRYRET2",11,0)
QUERY W !!,$S(I<X:"Continue// ",1:"Exit// ")
"RTN","LBRYRET2",12,0)
 S DTOUT="" R Z:DTIME E  S DTOUT=1 W $C(7) G EXIT
"RTN","LBRYRET2",13,0)
 I I'=X,Z="" G LOOP
"RTN","LBRYRET2",14,0)
 I I=X,Z="" G EXIT
"RTN","LBRYRET2",15,0)
 I Z="^" G EXIT
"RTN","LBRYRET2",16,0)
 W !!,$S(I'=X:"Enter '^' to exit or <CR> to continue",1:"Enter <CR> to exit") G QUERY
"RTN","LBRYRET2",17,0)
EXIT K XX,^UTILITY($J,"W") Q
"RTN","LBRYRET2",18,0)
 Q
"RTN","LBRYRET2",19,0)
ASK W !!,"Enter copy number/s to return separated by commas or a hyphen."
"RTN","LBRYRET2",20,0)
 W !,"Copy nunber/s: EXIT// " S Q=1
"RTN","LBRYRET2",21,0)
ASK0 S DTOUT=0,X="" R X:DTIME E  W $C(7) S DTOUT=1 G EXIT
"RTN","LBRYRET2",22,0)
 I X="^" G ^LBRYRET
"RTN","LBRYRET2",23,0)
 I X="" G ^LBRYRET
"RTN","LBRYRET2",24,0)
 I X=" ",$D(^TMP("LBRY",DUZ,3)) S X=^(3)
"RTN","LBRYRET2",25,0)
 I X?.N D UTIL G PARSE
"RTN","LBRYRET2",26,0)
ASK3 S G=$P(X,",",Q) G:G="" ASK1 G:G["-" ASK4 G:G'?.N ASK2 S Q=Q+1 G ASK3
"RTN","LBRYRET2",27,0)
ASK1 D UTIL G PARSE
"RTN","LBRYRET2",28,0)
ASK2 W !!,"Please enter a copy number or a range of numbers separated by a hyphen '1-2'"
"RTN","LBRYRET2",29,0)
 W !,"or a combination of the two separated by a comma '1,2-4' or <CR> to EXIT."
"RTN","LBRYRET2",30,0)
 G ASK
"RTN","LBRYRET2",31,0)
ASK4 G:G'?1N.N1"-"1N.N ASK2 S Q=Q+1 G ASK3
"RTN","LBRYRET2",32,0)
UTIL K ^TMP("LBRY",DUZ,3) S ^(3)=X Q
"RTN","LBRYRET2",33,0)
PARSE F I=1:1 S G=$P(X,",",I) G:G="" FINI D:G=+G RETURN D:G["-" PARSE1
"RTN","LBRYRET2",34,0)
PARSE1 S G1=$P(G,"-",1),G2=$P(G,"-",2) I G2'<G1 F G=G1:1:G2 D RETURN
"RTN","LBRYRET2",35,0)
 Q
"RTN","LBRYRET2",36,0)
RETURN S NUM=$O(^LBRY(682,A(LBX),4,"B",G,0)) Q:NUM=""  L ^LBRY(682,A(LBX),4):1 Q:$T=0  S LBRYR=^LBRY(682,A(LBX),4,NUM,0) I $P(LBRYR,U,2)<3 S $P(^LBRY(682,A(LBX),4,NUM,0),U,2)=3,$P(^(0),U,5)=YDT1,$P(^(0),U,4)=DUZ
"RTN","LBRYRET2",37,0)
 L  Q
"RTN","LBRYRET2",38,0)
FINI S XZ="EXIT//" D PAUSE^LBRYCK0 K XZ
"RTN","LBRYRET2",39,0)
 G ^LBRYRET
"RTN","LBRYRLE")
0^44^B1189249
"RTN","LBRYRLE",1,0)
LBRYRLE ;ISC2/DJM-NAME LIST ENTRIES ENTER\EDIT ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRLE",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRLE",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYRLE",4,0)
 . D ^LBRYASK
"RTN","LBRYRLE",5,0)
LOOP W @IOF,"VA Library Name Entries Update" S Y=DT X ^DD("DD")
"RTN","LBRYRLE",6,0)
 S YDT=Y W ?60,YDT,!! S DIC="^LBRY(680.4,",DIC(0)="AELMQ"
"RTN","LBRYRLE",7,0)
 S DIC("A")="Select the name to update: ",DLAYGO=680.4
"RTN","LBRYRLE",8,0)
 S DIC("S")="I $P(^(0),U,9)=LBRYPTR"
"RTN","LBRYRLE",9,0)
 L ^LBRY(680.4,0):1 G:$T=0 EXIT D ^DIC K DIC("A"),DLAYGO,DIC("S")
"RTN","LBRYRLE",10,0)
 L  G:Y<1 EXIT
"RTN","LBRYRLE",11,0)
 S DA=+Y,DIE=DIC,DR="[LBRY CONTACTS ROUTING]" D LOCK^LBRYEDR
"RTN","LBRYRLE",12,0)
 G:LBRYL=0 EXIT D ^DIE L
"RTN","LBRYRLE",13,0)
 G LOOP
"RTN","LBRYRLE",14,0)
EXIT K DIC,DIE,DR,Y,YDT,LBRYL Q
"RTN","LBRYRPT")
0^45^B20651087
"RTN","LBRYRPT",1,0)
LBRYRPT ;ISC2/DJM-LIBRARY TECHNICIAN REPORTS ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRPT",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRPT",3,0)
MIL ;Missing Issues List Report
"RTN","LBRYRPT",4,0)
 S TEXT="Missing Issues List" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",5,0)
 S L=0,DIC="^LBRY(682,"
"RTN","LBRYRPT",6,0)
 S DIS(0)="I $P(^LBRY(682,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",7,0)
 S FLDS="[LBRY MISSING ISSUES LIST]",BY="[LBRY MISSING ISSUES LIST]"
"RTN","LBRYRPT",8,0)
 D EN1^DIP
"RTN","LBRYRPT",9,0)
 G EXIT
"RTN","LBRYRPT",10,0)
DFR ;Titles Due for Renewal Report
"RTN","LBRYRPT",11,0)
 S TEXT="Titles Due For Renewal" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",12,0)
 S L=0,DIC="^LBRY(681,"
"RTN","LBRYRPT",13,0)
 S DIS(0)="I $P($G(^LBRY(681,D0,1)),U,7)="""""
"RTN","LBRYRPT",14,0)
 S DIS(1)="I $P(^LBRY(681,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",15,0)
 S FLDS="[LBRY TITLES DUE RENEWAL]",BY="[LBRY TITLES DUE RENEWAL]"
"RTN","LBRYRPT",16,0)
 D EN1^DIP
"RTN","LBRYRPT",17,0)
 G EXIT
"RTN","LBRYRPT",18,0)
LST ;Total local holdings, alphabetical w/brief or full listings
"RTN","LBRYRPT",19,0)
 S TEXT="All Serials Titles" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",20,0)
LST0 W "Do you want DETAILED HOLDINGS listed" S %=1 D YN^DICN
"RTN","LBRYRPT",21,0)
 S FLDS=$S(%=1:"[LBRY TITLE ALPHABETICAL]",%=2:"[LBRY TITLE ALPHABETICAL BRIEF]",1:"") G:%=-1 EXIT G:%=0 LST1
"RTN","LBRYRPT",22,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",23,0)
 S L=0,DIC="^LBRY(680,",BY="[LBRY TITLE ALPHABETICAL]"
"RTN","LBRYRPT",24,0)
 D EN1^DIP
"RTN","LBRYRPT",25,0)
 G EXIT
"RTN","LBRYRPT",26,0)
LST1 W !!,"Yes will present a complete description of the title's holdings."
"RTN","LBRYRPT",27,0)
 W !,"No will present a brief description of the title's holdings.",!!
"RTN","LBRYRPT",28,0)
 G LST0
"RTN","LBRYRPT",29,0)
LTL ;Total local holdings printed by location w/brief or full holdings
"RTN","LBRYRPT",30,0)
 S TEXT="Local Titles by Location" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",31,0)
LTL0 W "Do you want DETAILED HOLDINGS listed" S %=1 D YN^DICN
"RTN","LBRYRPT",32,0)
 S FLDS=$S(%=1:"[LBRY TITLE LOCATION]",%=2:"[LBRY TITLE LOCATION BRIEF]",1:"") G:%=-1 EXIT G:%=0 LTL1
"RTN","LBRYRPT",33,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",34,0)
 S L=0,DIC="^LBRY(680,",BY="[LBRY TITLE LOCATION]"
"RTN","LBRYRPT",35,0)
 D EN1^DIP
"RTN","LBRYRPT",36,0)
 G EXIT
"RTN","LBRYRPT",37,0)
LTL1 W !!,"Yes will present a complete description of the title's holdings."
"RTN","LBRYRPT",38,0)
 W !,"No will present a brief description of the title's holdings.",!!
"RTN","LBRYRPT",39,0)
 G LTL0
"RTN","LBRYRPT",40,0)
LTV ;Current subscriptions by vendor
"RTN","LBRYRPT",41,0)
 S TEXT="Active Titles by Vendor" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",42,0)
 S L=0,DIC="^LBRY(681,"
"RTN","LBRYRPT",43,0)
 S DIS(0)="I $P(^LBRY(681,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",44,0)
 S FLDS="[LBRY SUBSCRIPTION/VENDOR]",BY="[LBRY SUBSCRIPTION/VENDOR]"
"RTN","LBRYRPT",45,0)
 D EN1^DIP
"RTN","LBRYRPT",46,0)
 G EXIT
"RTN","LBRYRPT",47,0)
LGL ;Local Titles with Gaps Lists
"RTN","LBRYRPT",48,0)
 S TEXT="Gaps Lists" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",49,0)
 S L=0,DIC="^LBRY(680,"
"RTN","LBRYRPT",50,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",51,0)
 S FLDS="[LBRY GAPS LIST]",BY="[LBRY GAPS LIST]"
"RTN","LBRYRPT",52,0)
 D EN1^DIP
"RTN","LBRYRPT",53,0)
 G EXIT
"RTN","LBRYRPT",54,0)
LMT ;Local Microfilm Titles
"RTN","LBRYRPT",55,0)
 S TEXT="Local Microfilm Titles" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",56,0)
LMT0 W "Do you want microfilm holdings by titles" S %=1 D YN^DICN
"RTN","LBRYRPT",57,0)
 S FLDS=$S(%=1:"[LBRY MICROFILM HOLDINGS]",%=2:"[LBRY MICROFILM VENDOR]",1:"") G:%=-1 EXIT G:%=0 LMT1
"RTN","LBRYRPT",58,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",59,0)
 S L=0,DIC="^LBRY(680,",BY=$S(%=1:"[LBRY MICROFILM HOLDINGS]",1:"[LBRY MICROFILM VENDOR]")
"RTN","LBRYRPT",60,0)
 D EN1^DIP
"RTN","LBRYRPT",61,0)
 G EXIT
"RTN","LBRYRPT",62,0)
LMT1 W !!,"'Yes' will list microfilm holdings by title."
"RTN","LBRYRPT",63,0)
 W !,"'No' will list microfilm holdings by vendor.",!!
"RTN","LBRYRPT",64,0)
 G LMT0
"RTN","LBRYRPT",65,0)
REC ;List of Recipients by title or recipient
"RTN","LBRYRPT",66,0)
 S TEXT="List of Recipients" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",67,0)
REC0 W "Do you want a list of recipients arranged by titles" S %=1 D YN^DICN
"RTN","LBRYRPT",68,0)
 S FLDS=$S(%=1:"[LBRY RECIPIENTS BY TITLE]",%=2:"[LBRY RECIPIENTS WITH TITLES]",1:"") G:%=-1 EXIT G:%=0 REC1
"RTN","LBRYRPT",69,0)
 S DIS(0)="I $P(^LBRY(681,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",70,0)
 S DIS(1)="I $P(^LBRY(680,$P(^LBRY(681,D0,0),U,2),0),U,2)="""""
"RTN","LBRYRPT",71,0)
 S L=0,DIC="^LBRY(681,",BY=$S(%=1:"[LBRY RECIPIENTS BY TITLE]",1:"[LBRY RECIPIENTS WITH TITLES]")
"RTN","LBRYRPT",72,0)
 D EN1^DIP
"RTN","LBRYRPT",73,0)
 G EXIT
"RTN","LBRYRPT",74,0)
REC1 W !!,"'Yes' will present a listing of all the recipients of any title or ToC."
"RTN","LBRYRPT",75,0)
 W !,"'No' will list for each recipient all the titles or ToCs received.",!!
"RTN","LBRYRPT",76,0)
 G REC0
"RTN","LBRYRPT",77,0)
ORR ;All Outstanding Routed-To-Return Issues Listed
"RTN","LBRYRPT",78,0)
 S TEXT="Outstanding R-T-R Issues" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",79,0)
 S L=0,DIC="^LBRY(682,"
"RTN","LBRYRPT",80,0)
 S DIS(0)="I $P(^LBRY(682,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",81,0)
 S FLDS="[LBRY ROUTE-TO-RETURN]",BY="[LBRY ROUTE-TO-RETURN]"
"RTN","LBRYRPT",82,0)
 D EN1^DIP
"RTN","LBRYRPT",83,0)
 G EXIT
"RTN","LBRYRPT",84,0)
FYI ;Listing of all titles with For-Your-Information
"RTN","LBRYRPT",85,0)
 S TEXT="F-Y-I Local Titles List" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",86,0)
 S L=0,DIC="^LBRY(680,"
"RTN","LBRYRPT",87,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",88,0)
 S DIS(1)="I $P(^LBRY(680,D0,0),U,2)'="""""
"RTN","LBRYRPT",89,0)
 S DIS(2)="I $P($G(^LBRY(680,D0,1)),U,5)'="""""
"RTN","LBRYRPT",90,0)
 S FLDS="[LBRY FYI LIST]",BY=.01
"RTN","LBRYRPT",91,0)
 D EN1^DIP
"RTN","LBRYRPT",92,0)
 G EXIT
"RTN","LBRYRPT",93,0)
HEAD I $G(LBRYPTR)="" S DUOUT=1 Q
"RTN","LBRYRPT",94,0)
 W @IOF,"Serials "_TEXT_" for "_LBRYNAM_"   "
"RTN","LBRYRPT",95,0)
 S Y=DT X ^DD("DD") W Y,!!
"RTN","LBRYRPT",96,0)
 Q
"RTN","LBRYRPT",97,0)
EXIT I IOT="TRM" R !!,"Press return to continue: ",LBRYC:DTIME
"RTN","LBRYRPT",98,0)
 K L,DIC,FLDS,BY,TEXT,%,Y,LBRYC,DUOUT,DIS,IOT
"RTN","LBRYRPT",99,0)
 Q
"RTN","LBRYRPT0")
0^46^B21756464
"RTN","LBRYRPT0",1,0)
LBRYRPT0 ;ISC2/DJM-LIBRARY TECHNICIAN REPORTS ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRPT0",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRPT0",3,0)
MED ;MEDICAL TITLES BY SUBJECT OR WITHOUT & BY DETAILED OR BRIEF HOLDINGS
"RTN","LBRYRPT0",4,0)
 S TEXT="Local Medical Holdings" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT0",5,0)
MED0 W "Do you want MEDICAL HOLDINGS listed by TITLE" S %=1 D YN^DICN
"RTN","LBRYRPT0",6,0)
 G:%=1 MED1 G:%=2 MED4 G:%=-1 EXIT
"RTN","LBRYRPT0",7,0)
 W !!,"Yes will list medical holdings by title."
"RTN","LBRYRPT0",8,0)
 W !,"No will list medical holdings by subject.",!!
"RTN","LBRYRPT0",9,0)
 G MED0
"RTN","LBRYRPT0",10,0)
MED1 W !,"Do you want DETAILED HOLDINGS listed" S %=1 D YN^DICN
"RTN","LBRYRPT0",11,0)
 S DIS(0)="I $P($G(^LBRY(680,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",12,0)
 S FLDS=$S(%=1:"[LBRY MEDICAL HOLDINGS]",%=2:"[LBRY BRIEF MEDICAL HOLDINGS]",1:"") G:%=-1 EXIT G:%=0 MED3
"RTN","LBRYRPT0",13,0)
MED2 S L=0,DIC="^LBRY(680,",BY="[LBRY MEDICAL HOLDINGS]" D EN1^DIP G EXIT
"RTN","LBRYRPT0",14,0)
MED3 D YN G MED1
"RTN","LBRYRPT0",15,0)
MED4 W !,"Do you want DETAILED HOLDINGS listed" S %=1 D YN^DICN
"RTN","LBRYRPT0",16,0)
 S FLDS=$S(%=1:"[LBRY MEDICAL BY SUBJECT]",%=2:"[LBRY BRIEF MEDICAL/SUBJECT]",1:"") G:%=-1 EXIT G:%=0 MED5
"RTN","LBRYRPT0",17,0)
 S L=0,DIC="^LBRY(680,",BY="[LBRY MEDICAL BY SUBJECT]"
"RTN","LBRYRPT0",18,0)
 S DIS(0)="I $P($G(^LBRY(680,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",19,0)
 D EN1^DIP G EXIT
"RTN","LBRYRPT0",20,0)
MED5 D YN G MED4
"RTN","LBRYRPT0",21,0)
MSC ;CURRENT MEDICAL SUBSCRIPTIONS BY SUBJECT WITH COST
"RTN","LBRYRPT0",22,0)
 S TEXT="Medical Holdings with Cost" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT0",23,0)
 S L=0,DIC="^LBRY(680,",FLDS="[LBRY MEDICAL SUBSCRIPTIONS]"
"RTN","LBRYRPT0",24,0)
 S DIS(0)="I $P($G(^LBRY(680,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",25,0)
 S BY="[LBRY MEDICAL SUBSCRIPTIONS]" D EN1^DIP
"RTN","LBRYRPT0",26,0)
 G EXIT
"RTN","LBRYRPT0",27,0)
LDT ;LOCAL DONOR TITLES
"RTN","LBRYRPT0",28,0)
 S TEXT="Local Donor Titles" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT0",29,0)
 S L=0,DIC="^LBRY(681,",FLDS="[LBRY DONOR TITLES]"
"RTN","LBRYRPT0",30,0)
 S DIS(0)="I $P($G(^LBRY(681,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",31,0)
 S BY="[LBRY DONOR TITLES]" D EN1^DIP
"RTN","LBRYRPT0",32,0)
 G EXIT
"RTN","LBRYRPT0",33,0)
LPS ;LISTING OF ALL CURRENT PATIENTS' SUBSCRIPTIONS
"RTN","LBRYRPT0",34,0)
 S TEXT="Patients' Subscriptions" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT0",35,0)
 S L=0,DIC="^LBRY(680,",FLDS="[LBRY PATIENT HOLDINGS]"
"RTN","LBRYRPT0",36,0)
 S BY="[LBRY PATIENT HOLDINGS]"
"RTN","LBRYRPT0",37,0)
 S DIS(0)="I $S($O(^LBRY(680,D0,4,""B"",""G"",0)):1,$O(^LBRY(680,D0,4,""B"",""P"",0)):1,1:0)"
"RTN","LBRYRPT0",38,0)
 S DIS(1)="I $P($G(^LBRY(680,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",39,0)
 D EN1^DIP
"RTN","LBRYRPT0",40,0)
 G EXIT
"RTN","LBRYRPT0",41,0)
LAT ;LOCAL ADMINISTRATIVE TITLES BY LOCATION
"RTN","LBRYRPT0",42,0)
 S TEXT="Local Administrative Titles" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT0",43,0)
 S L=0,DIC="^LBRY(680,",FLDS="[LBRY ADMIN TITLES]"
"RTN","LBRYRPT0",44,0)
 S DIS(0)="I $P($G(^LBRY(680,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",45,0)
 S BY="[LBRY ADMIN TITLES]" D EN1^DIP
"RTN","LBRYRPT0",46,0)
 G EXIT
"RTN","LBRYRPT0",47,0)
LPT ;ALL PATIENT HOLDINGS, BRIEF OR DETAILED HOLDINGS
"RTN","LBRYRPT0",48,0)
 S TEXT="Patient Library Holdings" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT0",49,0)
LPT0 W "Do you want all general and patient health education titles"
"RTN","LBRYRPT0",50,0)
 S %=1 D YN^DICN G:%=1 LPT1 G:%=2 LPT4 G:%=-1 EXIT
"RTN","LBRYRPT0",51,0)
 W !!,"Yes will list all non-medical titles."
"RTN","LBRYRPT0",52,0)
 W !,"No will list all patient health education titles only.",!!
"RTN","LBRYRPT0",53,0)
 G LPT0
"RTN","LBRYRPT0",54,0)
LPT1 W !,"Do you want DETAILED HOLDINGS listed" S %=1 D YN^DICN
"RTN","LBRYRPT0",55,0)
 S FLDS=$S(%=1:"[LBRY PATIENT TITLES]",%=2:"[LBRY PATIENT TITLES BRIEF]",1:"") G:%=-1 EXIT G:%=0 LPT3
"RTN","LBRYRPT0",56,0)
LPT2 S L=0,DIC="^LBRY(680,",BY="[LBRY PATIENT TITLES]"
"RTN","LBRYRPT0",57,0)
 S DIS(0)="I $S($O(^LBRY(680,D0,4,""B"",""G"",0)):1,$O(^LBRY(680,D0,4,""B"",""P"",0)):1,1:0)"
"RTN","LBRYRPT0",58,0)
 S DIS(1)="I $P($G(^LBRY(680,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",59,0)
 D EN1^DIP G EXIT
"RTN","LBRYRPT0",60,0)
LPT3 D YN G LPT1
"RTN","LBRYRPT0",61,0)
LPT4 W !,"Do you want DETAILED HOLDINGS listed" S %=1 D YN^DICN
"RTN","LBRYRPT0",62,0)
 S FLDS=$S(%=1:"[LBRY PATIENT TITLES]",%=2:"[LBRY PATIENT TITLES BRIEF]",1:"") G:%=-1 EXIT G:%=0 LPT5
"RTN","LBRYRPT0",63,0)
 S L=0,DIC="^LBRY(680,",BY="[LBRY PATIENT TITLES BRIEF]"
"RTN","LBRYRPT0",64,0)
 S DIS(0)="I $P($G(^LBRY(680,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",65,0)
 S DHD=$S(%=1:"Local Patient Holdings, PHE only",1:"Local Patient Brief Holdings, PHE only")
"RTN","LBRYRPT0",66,0)
 D EN1^DIP G EXIT
"RTN","LBRYRPT0",67,0)
LPT5 D YN G LPT4
"RTN","LBRYRPT0",68,0)
ART ;LISTING OF ADMINISTRATIVE TITLES WITH RECIPIENTS
"RTN","LBRYRPT0",69,0)
 S TEXT="Administrative Recipients" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT0",70,0)
 S L=0,DIC="^LBRY(681,",FLDS="[LBRY ADMIN RECIPIENTS]"
"RTN","LBRYRPT0",71,0)
 S DIS(0)="I $P($G(^LBRY(681,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",72,0)
 S BY="[LBRY ADMIN RECIPIENTS]" D EN1^DIP
"RTN","LBRYRPT0",73,0)
 G EXIT
"RTN","LBRYRPT0",74,0)
TUL ;UNION LISTS WITH COMPLETE OR BRIEF HOLDINGS
"RTN","LBRYRPT0",75,0)
 S TEXT="Union List with Holdings" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT0",76,0)
TUL0 W "Do you want DETAILED HOLDINGS listed" S %=1 D YN^DICN
"RTN","LBRYRPT0",77,0)
 S FLDS=$S(%=1:"[LBRY UNION LIST CODE]",%=2:"[LBRY UNION LIST BRIEF]",1:"") G:%=-1 EXIT G:%=0 TUL1
"RTN","LBRYRPT0",78,0)
 S DIS(0)="I $P($G(^LBRY(680,D0,0)),U,4)=LBRYPTR"
"RTN","LBRYRPT0",79,0)
 S L=0,DIC="^LBRY(680,",BY="[LBRY UNION LIST CODE]" D EN1^DIP
"RTN","LBRYRPT0",80,0)
 G EXIT
"RTN","LBRYRPT0",81,0)
TUL1 D YN G TUL0
"RTN","LBRYRPT0",82,0)
NLT ;NEW LOCAL TITLES IN TITLE AUTHORITY FILE
"RTN","LBRYRPT0",83,0)
 S TEXT="New Local Titles" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT0",84,0)
 S L=0,DIC="^LBRY(680.5,",FLDS="[LBRY NEW LOCAL TITLES]"
"RTN","LBRYRPT0",85,0)
 S BY="[LBRY NEW LOCAL TITLES]" D EN1^DIP G EXIT
"RTN","LBRYRPT0",86,0)
HEAD I $G(LBRYPTR)="" S DUOUT=1 Q
"RTN","LBRYRPT0",87,0)
 W @IOF,"VA Library Serials "_TEXT_" for "_LBRYNAM_"   "
"RTN","LBRYRPT0",88,0)
 S Y=DT X ^DD("DD") W Y,!!
"RTN","LBRYRPT0",89,0)
 Q
"RTN","LBRYRPT0",90,0)
YN W !!,"Yes will present a complete description of the title's holdings."
"RTN","LBRYRPT0",91,0)
 W !,"No will present a brief description of the title's holdings.",!
"RTN","LBRYRPT0",92,0)
 Q
"RTN","LBRYRPT0",93,0)
EXIT I IOT="TRM" R !!,"Press return to continue: ",LBRYC:DTIME
"RTN","LBRYRPT0",94,0)
 K L,DIC,FLDS,BY,TEXT,%,Y,DIS,DHD,LBRYC,DUOUT
"RTN","LBRYRPT0",95,0)
 Q
"RTN","LBRYRPT1")
0^47^B5701407
"RTN","LBRYRPT1",1,0)
LBRYRPT1 ;ISC2/DJM-PATRON REPORTS ;[ 06/11/97  1:16 PM ]
"RTN","LBRYRPT1",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRPT1",3,0)
JTA ;
"RTN","LBRYRPT1",4,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" G EXIT
"RTN","LBRYRPT1",5,0)
 . D ^LBRYASK
"RTN","LBRYRPT1",6,0)
 D NOW^%DTC S Y=%\1 X ^DD("DD")
"RTN","LBRYRPT1",7,0)
 W @IOF,"VA Library Patron Journal Title for "_LBRYNAM_"   "_Y,!
"RTN","LBRYRPT1",8,0)
 S DIC="^LBRY(680.5,",DIC(0)="AEMQ"
"RTN","LBRYRPT1",9,0)
 S DIC("S")="I $P(^LBRY(680.5,+Y,0),U,2)]"""""
"RTN","LBRYRPT1",10,0)
 D ^DIC K DIC("S") G:Y<0 FINI S LBRYNUM=$P(Y,U,2)
"RTN","LBRYRPT1",11,0)
 S (FR,TO)=LBRYNUM,BY=.01,FLDS="[LBRY PATRON TITLES]",L=0
"RTN","LBRYRPT1",12,0)
 D EN1^DIP G FINI
"RTN","LBRYRPT1",13,0)
SLJ ;
"RTN","LBRYRPT1",14,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" G EXIT
"RTN","LBRYRPT1",15,0)
 . D ^LBRYASK
"RTN","LBRYRPT1",16,0)
 D NOW^%DTC S Y=%\1 X ^DD("DD")
"RTN","LBRYRPT1",17,0)
 W @IOF,"VA Library Patron Subject List for "_LBRYNAM_"   "_Y,!
"RTN","LBRYRPT1",18,0)
 S DIC="^LBRY(680.3,",DIC(0)="AEQ" D ^DIC G:Y<0 FINI
"RTN","LBRYRPT1",19,0)
 S LBRYSN=+Y,LBRYNM=$P(Y,U,2)
"RTN","LBRYRPT1",20,0)
QUEUE S %ZIS="MQ" K IO("Q") D ^%ZIS G:POP FINI I '$D(IO("Q")) U IO
"RTN","LBRYRPT1",21,0)
 D SLJ1^LBRYRPT1 D ^%ZISC G FINI
"RTN","LBRYRPT1",22,0)
QUEUE1 S ZTRTN="SLJ1^LBRYRPT1",ZTSAVE("LBRYSN")="",ZTSAVE("LBRYNM")=""
"RTN","LBRYRPT1",23,0)
 K IO("Q") D ^%ZTLOAD D ^%ZISC K ZTSK
"RTN","LBRYRPT1",24,0)
FINI K DIC,FR,TO,BY,FLDS,L,LBRYNUM,LBRYSN,LBRYNM,POP,Y,%ZIS,%
"RTN","LBRYRPT1",25,0)
 Q
"RTN","LBRYRPT1",26,0)
SLJ1 K ^TMP($J,"LBRYSLJ") S X=""
"RTN","LBRYRPT1",27,0)
SL S X=$O(^LBRY(680,"C",LBRYSN,X)) G:X="" SLJ2
"RTN","LBRYRPT1",28,0)
 I $P(^LBRY(680,X,0),U,4)'=LBRYPTR G SL
"RTN","LBRYRPT1",29,0)
 S NM=$P(^LBRY(680.5,X,0),U) S:$E(NM,1,4)="THE " NM=$E(NM,5,999)
"RTN","LBRYRPT1",30,0)
 S ^TMP($J,"LBRYSLJ",$E(NM,1,60))=NM
"RTN","LBRYRPT1",31,0)
 G SL
"RTN","LBRYRPT1",32,0)
SLJ2 S PG=1 D NOW^%DTC S Y=% X ^DD("DD")
"RTN","LBRYRPT1",33,0)
 S LBDT=$P(Y,"@",1)_" "_$P(Y,"@",2) G PRINT
"RTN","LBRYRPT1",34,0)
H0 G:IO'=IO(0)!($D(ZTSK)) H R LZ:DTIME E  S LZ="^" Q
"RTN","LBRYRPT1",35,0)
 Q:LZ["^"
"RTN","LBRYRPT1",36,0)
H W @IOF,"Subject List of Journals Available",?47,LBDT,?69,"PAGE ",PG,!
"RTN","LBRYRPT1",37,0)
 S PG=PG+1
"RTN","LBRYRPT1",38,0)
 F I=1:1:80 W "-"
"RTN","LBRYRPT1",39,0)
 W !!,"SUBJECT: ",LBRYNM,!
"RTN","LBRYRPT1",40,0)
 Q
"RTN","LBRYRPT1",41,0)
T W ! Q
"RTN","LBRYRPT1",42,0)
PRINT S LZ="" D H
"RTN","LBRYRPT1",43,0)
 F  S X=$O(^TMP($J,"LBRYSLJ",X)) G:X="" EXIT D
"RTN","LBRYRPT1",44,0)
 . S X1=^TMP($J,"LBRYSLJ",X),LN=$L(X1)+8,NU=LN\80,NU=$S(LN#80>0:NU+1,1:NU)
"RTN","LBRYRPT1",45,0)
 . D:$Y+NU>(IOSL-2) H0 G:LZ["^" EXIT D T W "TITLE: ",X1
"RTN","LBRYRPT1",46,0)
EXIT K:$D(ZTSK) ^%ZTSK(ZTSK),ZTSK
"RTN","LBRYRPT1",47,0)
 K X1,I,X,%,LN,LZ,NU,NM,PG,LBDT,Y,^TMP($J,"LBRYSLJ"),LBRYNUM,LBRYNM
"RTN","LBRYRPT1",48,0)
 Q
"RTN","LBRYRRS")
0^48^B2192084
"RTN","LBRYRRS",1,0)
LBRYRRS ;ISC2/DJM-LIBRARY REPRINT ROUTING SLIPS ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRRS",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRRS",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYRRS",4,0)
 . D ^LBRYASK
"RTN","LBRYRRS",5,0)
START W @IOF,?5,"VA Library Serials Reprint Routing Slips"
"RTN","LBRYRRS",6,0)
 S Y=DT X ^DD("DD") W ?60,Y,!
"RTN","LBRYRRS",7,0)
 W !!,"Start reprinting routing slips FROM date and time.",!
"RTN","LBRYRRS",8,0)
 S %DT="AETX" D ^%DT G:Y<0 FINI S FROM=$S(Y'[".":Y_"."_"0",1:Y)
"RTN","LBRYRRS",9,0)
 W !!,"Continue reprinting routing slips TO date and time.",!
"RTN","LBRYRRS",10,0)
 S %DT="AETX" D ^%DT G:Y<0 FINI S TO=$S(Y'[".":Y_"."_"9999",1:Y)
"RTN","LBRYRRS",11,0)
DOIT S FROM=FROM-.0001
"RTN","LBRYRRS",12,0)
QUEUE S QUEUE=^LBRY(680.6,LBRYPTR,0),TERM=$P(QUEUE,U,3)
"RTN","LBRYRRS",13,0)
 S %ZIS="MQ",%IS("B")=$S(TERM]"":TERM,1:"")
"RTN","LBRYRRS",14,0)
 K IO("Q") D ^%ZIS G:POP FINI
"RTN","LBRYRRS",15,0)
 I '$D(IO("Q")) U IO D ^LBRYRRS0 D ^%ZISC G FINI
"RTN","LBRYRRS",16,0)
QUEUE1 S ZTIO=TERM,ZTDTH=$H,ZTRTN="^LBRYRRS0",ZTSAVE("LBRYPTR")=""
"RTN","LBRYRRS",17,0)
 S ZTSAVE("FROM")="",ZTSAVE("TO")="" D ^%ZTLOAD D ^%ZISC K ZTSK
"RTN","LBRYRRS",18,0)
FINI S XZ="EXIT//" D PAUSE^LBRYUTL
"RTN","LBRYRRS",19,0)
 K %DT,FROM,POP,QUEUE,TERM,TO,XZ,Y
"RTN","LBRYRRS",20,0)
 Q
"RTN","LBRYRRS0")
0^49^B5922082
"RTN","LBRYRRS0",1,0)
LBRYRRS0 ;ISC2/DJM-REPRINT ROUTING SLIPS ;[ 08/11/97  12:12 PM ]
"RTN","LBRYRRS0",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRRS0",3,0)
START D NOW^%DTC S LBRYD=%\1
"RTN","LBRYRRS0",4,0)
FRM S FROM=$O(^LBRY(682,"A3",FROM)) I FROM=""!(FROM>TO) G EXIT
"RTN","LBRYRRS0",5,0)
 S (Q,Q1)=0,Q=$O(^LBRY(682,"A3",FROM,Q)) D WHAT
"RTN","LBRYRRS0",6,0)
 G FRM
"RTN","LBRYRRS0",7,0)
WHAT S Q1=$O(^LBRY(682,"A3",FROM,Q,Q1)) Q:Q1'>0
"RTN","LBRYRRS0",8,0)
 I $P(^LBRY(682,Q,0),U,4)'=LBRYPTR G WHAT
"RTN","LBRYRRS0",9,0)
 S LBRYDAT=$G(^LBRY(682,Q,4,Q1,0)) I LBRYDAT'="" D TOC
"RTN","LBRYRRS0",10,0)
 G WHAT
"RTN","LBRYRRS0",11,0)
TOC S PTR=$P(LBRYDAT,U,3),PTRLST=0 G:$P(LBRYDAT,U)'="ToC" COPY
"RTN","LBRYRRS0",12,0)
 D HEADER
"RTN","LBRYRRS0",13,0)
TOC1 S PTRLST=$O(^LBRY(681,PTR,2,"AC",PTRLST)) I PTRLST'>0 D TRLR,PAUSE Q
"RTN","LBRYRRS0",14,0)
 S PTRL2=$O(^LBRY(681,PTR,2,"AC",PTRLST,0)) D NAME
"RTN","LBRYRRS0",15,0)
 G TOC1
"RTN","LBRYRRS0",16,0)
COPY D HEADER
"RTN","LBRYRRS0",17,0)
CPY S PTRLST=$O(^LBRY(681,PTR,2,"AC",PTRLST)) I PTRLST'>0 D TRLR,PAUSE Q
"RTN","LBRYRRS0",18,0)
 S PTRL2=$O(^LBRY(681,PTR,2,"AC",PTRLST,0)) D NAME
"RTN","LBRYRRS0",19,0)
 G CPY
"RTN","LBRYRRS0",20,0)
HEADER W @IOF,!!!!!!!!!!,?5,"Veterans Administration ROUTING SLIP"
"RTN","LBRYRRS0",21,0)
 W !!,?10,"ROUTE TO:",!
"RTN","LBRYRRS0",22,0)
 Q
"RTN","LBRYRRS0",23,0)
TRLR W !,?5 F K=1:1:40 W $C(42)
"RTN","LBRYRRS0",24,0)
 S TITLE=$P(^LBRY(681,PTR,0),U,2),TITN=$P(^LBRY(680,TITLE,0),U)
"RTN","LBRYRRS0",25,0)
 S TITLE=$E($P(^LBRY(680.5,TITN,0),U),1,39) W !,?5,TITLE
"RTN","LBRYRRS0",26,0)
 S VID=^LBRY(682,Q,1),V=$P(VID,U,2),ISSUE=$P(VID,U,3),Y=$P(VID,U) X ^DD("DD")
"RTN","LBRYRRS0",27,0)
 S ISSUE=$S(ISSUE]"":"("_ISSUE_")",1:"") S:V]"" ISSUE=V_ISSUE
"RTN","LBRYRRS0",28,0)
 W !,?5,Y,?32,ISSUE S NUMB=$P(LBRYDAT,U)
"RTN","LBRYRRS0",29,0)
 W:NUMB="ToC" !,?5,"TABLE of CONTENTS ROUTING SLIP"
"RTN","LBRYRRS0",30,0)
 W:NUMB=+NUMB !,?5,"COPY ",NUMB," ROUTING SLIP"
"RTN","LBRYRRS0",31,0)
 S LBRRSM=$P($G(^LBRY(680.6,LBRYPTR,0)),U,8) S:LBRRSM="" LBRRSM="142D"
"RTN","LBRYRRS0",32,0)
 W !!!!!,?5,"FROM LIBRARY, "_LBRRSM
"RTN","LBRYRRS0",33,0)
 S Y=LBRYD X ^DD("DD") W ?35,Y,!
"RTN","LBRYRRS0",34,0)
 Q
"RTN","LBRYRRS0",35,0)
NAME S NMPTR=$P(^LBRY(681,PTR,2,PTRL2,0),U)
"RTN","LBRYRRS0",36,0)
 S NMSVC=$S(NMPTR'="":$G(^LBRY(680.4,NMPTR,0)),1:"")
"RTN","LBRYRRS0",37,0)
 S NAME=$P(NMSVC,U),SVC=$P(NMSVC,U,2)
"RTN","LBRYRRS0",38,0)
 S SVC=$S(SVC'="":$G(^DIC(49,SVC,0)),1:"")
"RTN","LBRYRRS0",39,0)
 S MS=$P(SVC,U,8),SVC=$P(SVC,U)
"RTN","LBRYRRS0",40,0)
 W !,?5,MS,?18,NAME W:SVC]"" "/",SVC W !
"RTN","LBRYRRS0",41,0)
 Q
"RTN","LBRYRRS0",42,0)
PAUSE Q:IO'=IO(0)!($D(ZTSK))  S XZ="Continue//" D PAUSE^LBRYUTL K XZ Q
"RTN","LBRYRRS0",43,0)
EXIT D ^%ZISC K:$D(ZTSK) ^%ZTSK(ZTSK),ZTSK
"RTN","LBRYRRS0",44,0)
 K %,H,J,K,IOP,FROM,TO,Q,Q1,LBRYDAT,LBRYRET,TITLE,NUMB,LBRYD,PTR,PTRL2
"RTN","LBRYRRS0",45,0)
 K PTRLST,VID,V,ISSUE,Y,VI,NMPTR,NMSVC,NAME,SVC,MS,TITN,LBRRSM
"RTN","LBRYRRS0",46,0)
 Q
"RTN","LBRYRSLT")
0^74^B1698111
"RTN","LBRYRSLT",1,0)
LBRYRSLT ;SSI/ALA-Resubmit Local Title to FORUM ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRSLT",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRSLT",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" HANG 2 Q
"RTN","LBRYRSLT",4,0)
 . D ^LBRYASK
"RTN","LBRYRSLT",5,0)
START W @IOF,?5,"VA Library Serials Title Setup for "_LBRYNAM
"RTN","LBRYRSLT",6,0)
 D NOW^%DTC S Y=X X ^DD("DD") S YDT=Y W ?60,YDT,!
"RTN","LBRYRSLT",7,0)
 S DIC="^LBRY(680.5,",DIC(0)="AEMQZ"
"RTN","LBRYRSLT",8,0)
 S DIC("A")="Select TITLE AUTHORITY TITLE: ",DIC("S")="I Y>99000"
"RTN","LBRYRSLT",9,0)
 D ^DIC K DIC("A") G:Y<0 EXIT1
"RTN","LBRYRSLT",10,0)
 S (LBRYCLS,DA)=+Y
"RTN","LBRYRSLT",11,0)
 W !!,"Are you sure you want to resend title "_$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYRSLT",12,0)
 D YN^DICN I %'=1 G START
"RTN","LBRYRSLT",13,0)
 D ^LBRYLTF
"RTN","LBRYRSLT",14,0)
 W !!,"Title will be sent to FORUM for processing by National Librarians."
"RTN","LBRYRSLT",15,0)
 R !,"Press return to continue ",C:DTIME
"RTN","LBRYRSLT",16,0)
 G START
"RTN","LBRYRSLT",17,0)
EXIT1 K YDT,DIC,LBRYCLS,DA,Y
"RTN","LBRYRSLT",18,0)
 Q
"RTN","LBRYRST")
0^50^B12319674
"RTN","LBRYRST",1,0)
LBRYRST ;ISC2/DJM-REMOVE SERIALS TITLE ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRST",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRST",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYRST",4,0)
 . D ^LBRYASK
"RTN","LBRYRST",5,0)
START W @IOF,?5,"VA Library Serials Remove a Title for "_LBRYNAM
"RTN","LBRYRST",6,0)
 D NOW^%DTC S Y=X X ^DD("DD") W ?60,Y,! S YDT=Y,DIC="^LBRY(680.5,"
"RTN","LBRYRST",7,0)
 S DIC(0)="AEMQZ",DIC("A")="Please select TITLE to remove: "
"RTN","LBRYRST",8,0)
 D ^DIC
"RTN","LBRYRST",9,0)
 K DIC("A") G:Y<0 EXIT1 S LBRYCLS=+Y,LBRTDA=""
"RTN","LBRYRST",10,0)
 F  S LBRTDA=$O(^LBRY(680,"B",LBRYCLS,LBRTDA)) Q:LBRTDA=""  D
"RTN","LBRYRST",11,0)
 . I $P(^LBRY(680,LBRTDA,0),U,4)=LBRYPTR S LBRYLOC=LBRTDA Q
"RTN","LBRYRST",12,0)
 I $G(LBRYLOC)="",$O(^LBRY(680,"B",LBRYCLS,0))'="" D  G EXIT
"RTN","LBRYRST",13,0)
 . W !!,"** You do not have any holdings on file, but another site does **",!!
"RTN","LBRYRST",14,0)
 . R !,"Press return to continue: ",LBRC:DTIME
"RTN","LBRYRST",15,0)
 I $O(^LBRY(680,"B",LBRYCLS,0))="" W ! G DIE2
"RTN","LBRYRST",16,0)
 S LA0="TITLE: "_$P(^LBRY(680.5,LBRYCLS,0),U,1)
"RTN","LBRYRST",17,0)
 W @IOF,?5,"VA Library Serials Remove a Title",?60,YDT,!!,LA0
"RTN","LBRYRST",18,0)
WARN W !!,"Removing this journal deletes it completely from the LOCAL SERIALS file."
"RTN","LBRYRST",19,0)
 I $G(LBRYLOC)="" Q
"RTN","LBRYRST",20,0)
 S LBRYDA=$O(^LBRY(681,"AC",LBRYLOC,0))
"RTN","LBRYRST",21,0)
 W:LBRYDA]"" !,"This will include data in the LBRY DISPOSITION file."
"RTN","LBRYRST",22,0)
 S LBRYDAT1=$O(^LBRY(682,"AC",LBRYLOC,0))
"RTN","LBRYRST",23,0)
 W:LBRYDAT1]"" !,"This will include data in the LBRY ISSUE file."
"RTN","LBRYRST",24,0)
DIE W !!,"Do you want to remove this journal"
"RTN","LBRYRST",25,0)
 S %=2 D YN^DICN G:%=2 LBRYRST G:%=1 DIE1 G:%=-1 EXIT
"RTN","LBRYRST",26,0)
 W !!,"Answer YES to remove this journal from the data base."
"RTN","LBRYRST",27,0)
 W !,"Answer NO or <CR> to exit."
"RTN","LBRYRST",28,0)
 G DIE
"RTN","LBRYRST",29,0)
DIE1 W !! F I=1:1:79 W "*"
"RTN","LBRYRST",30,0)
 W !,?9,"***WARNING***",?33,"***WARNING***",?57,"***WARNING***",!!
"RTN","LBRYRST",31,0)
 W "All data about this title, i.e., holdings, check-in and copy information will"
"RTN","LBRYRST",32,0)
 W !,"be REMOVED from the system upon title deletion.  You may wish to set this"
"RTN","LBRYRST",33,0)
 W !,"title INACTIVE in Library Title Setup (LTS) instead.",!!
"RTN","LBRYRST",34,0)
DIE2 W $C(7),$C(7),$C(7),$C(7),$C(7),!,"DO YOU REALLY WANT TO REMOVE THIS JOURNAL "
"RTN","LBRYRST",35,0)
 S %=2 D YN^DICN G:%=2 LBRYRST G:%=1 DOIT G:%=-1 EXIT
"RTN","LBRYRST",36,0)
 W !,"Enter <CR> to do nothing or enter Y(es) if you are certain you wish to"
"RTN","LBRYRST",37,0)
 W !,"REMOVE all data about this title from the module."
"RTN","LBRYRST",38,0)
 G DIE2
"RTN","LBRYRST",39,0)
DOIT W !!,"Please be patient, this may take a few moments."
"RTN","LBRYRST",40,0)
 I $G(LBRYDAT1)="" G DOIT1
"RTN","LBRYRST",41,0)
 S DIK="^LBRY(682,",RMV=0
"RTN","LBRYRST",42,0)
 F  S RMV=$O(^LBRY(682,"AC",LBRYLOC,RMV)) Q:RMV=""  D
"RTN","LBRYRST",43,0)
 . S DA=$O(^LBRY(682,"AC",LBRYLOC,RMV,0)) D ^DIK
"RTN","LBRYRST",44,0)
DOIT1 I $G(LBRYLOC)="" G DOIT2
"RTN","LBRYRST",45,0)
 S DIK="^LBRY(681,",DA=0
"RTN","LBRYRST",46,0)
 F  S DA=$O(^LBRY(681,"C",LBRYLOC,DA)) Q:DA=""  D:DA'="" ^DIK
"RTN","LBRYRST",47,0)
 S DIK="^LBRY(680,",DA=LBRYLOC D ^DIK
"RTN","LBRYRST",48,0)
DOIT2 I $G(LA0)="" S LA0=$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYRST",49,0)
 S LA0=$E(LA0,1,70) W !!,LA0," Removed.",!
"RTN","LBRYRST",50,0)
 I $O(^LBRY(680,"B",LBRYCLS,""))="" D DEL
"RTN","LBRYRST",51,0)
 S XZ="EXIT//" D PAUSE^LBRYUTL K XZ
"RTN","LBRYRST",52,0)
EXIT K LA0,LBRYCLS,LBRTDA,LBRC
"RTN","LBRYRST",53,0)
 G START
"RTN","LBRYRST",54,0)
EXIT1 K Y,YDT,DIC,I,LA0,LBRYDA,LBRYDAT1,%,DIK,RMV,LBRTDA,LBRYCLS,LBRYLOC
"RTN","LBRYRST",55,0)
 Q
"RTN","LBRYRST",56,0)
DEL S DA=LBRYCLS,DIK="^LBRY(680.5," D ^DIK
"RTN","LBRYRST",57,0)
 N ZTSK,ZTDTH,ZTUCI,ZTSAVE,ZTIO,ZTDESC,ZTRTN
"RTN","LBRYRST",58,0)
 S (ZTSAVE("LA0"),ZTSAVE("LBRYCLS"))="",ZTRTN="REM^LBRYRST"
"RTN","LBRYRST",59,0)
 S ZTDTH=$H,ZTIO="",ZTDESC="LIBRARY REMOVE TITLE" D ^%ZTLOAD
"RTN","LBRYRST",60,0)
 Q
"RTN","LBRYRST",61,0)
REM S N=0
"RTN","LBRYRST",62,0)
REM1 S N=$O(^LBRY(680.5,N)) Q:N'>0
"RTN","LBRYRST",63,0)
 I $P($G(^LBRY(680.5,N,3)),U,6)=LBRYCLS S $P(^(3),U,6)=LA0_"*"
"RTN","LBRYRST",64,0)
 I $P($G(^LBRY(680.5,N,3)),U,7)=LBRYCLS S $P(^(3),U,7)=LA0_"*"
"RTN","LBRYRST",65,0)
 G REM1
"RTN","LBRYRTX")
0^51^B11027202
"RTN","LBRYRTX",1,0)
LBRYRTX ;ISC2/DJM-ROUTINES USED IN FILE 682 ;[ 04/16/98  9:54 AM ]
"RTN","LBRYRTX",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYRTX",3,0)
 K LBRYPTR Q
"RTN","LBRYRTX",4,0)
I ;ENTERED FROM JOURNAL DATE SET STATEMENT OF X-REF AD
"RTN","LBRYRTX",5,0)
 Q:($G(DIC)'[682)
"RTN","LBRYRTX",6,0)
 I $D(^LBRY(682,DA,1))#2,$P(^(1),U,6)]"" Q
"RTN","LBRYRTX",7,0)
 S LDFX=$P(^LBRY(682,DA,0),U,2),LBRYX=X
"RTN","LBRYRTX",8,0)
COPY ;MOVE COPIES FROM FILE 681 INTO FILE 682 AT THE COPY OF ISSUE
"RTN","LBRYRTX",9,0)
 ;MULTIPLE AND SET ROUTING STATUS TO 4 OR 5.
"RTN","LBRYRTX",10,0)
 S (COPY,TOTAL,CO682)=0
"RTN","LBRYRTX",11,0)
 F  S COPY=$O(^LBRY(681,"AC",LDFX,COPY)) G:COPY="" EXIT S COPY1=0 D COPY1
"RTN","LBRYRTX",12,0)
COPY1 S COPY1=$O(^LBRY(681,"AC",LDFX,COPY,COPY1)) Q:COPY1=""
"RTN","LBRYRTX",13,0)
 S COPY2=^LBRY(681,COPY1,1),START=$P(COPY2,U,10),STOP=$P(COPY2,U,11)
"RTN","LBRYRTX",14,0)
 I START="",STOP="" D TRANS G COPY1
"RTN","LBRYRTX",15,0)
 I START]"",STOP="",START-X<1 D TRANS G COPY1
"RTN","LBRYRTX",16,0)
 I START="",STOP]"",STOP-X'<0 D TRANS G COPY1
"RTN","LBRYRTX",17,0)
 I START]"",STOP]"" I START-X<1&(STOP-X'<0) D TRANS G COPY1
"RTN","LBRYRTX",18,0)
 G COPY1
"RTN","LBRYRTX",19,0)
TRANS S TOTAL=TOTAL+1,CO682=CO682+1,COPYNO=$E($P(COPY2,U),1,30)
"RTN","LBRYRTX",20,0)
 S ^LBRY(682,DA,4,TOTAL,0)=COPYNO_"^4^"_COPY1,^LBRY(682,DA,4,"B",COPYNO,TOTAL)=""
"RTN","LBRYRTX",21,0)
 I COPYNO="ToC" S $P(^LBRY(682,DA,4,TOTAL,0),U,2)=5,CO682=CO682-1 S:CO682<0 CO682=0
"RTN","LBRYRTX",22,0)
 Q
"RTN","LBRYRTX",23,0)
EXIT I TOTAL>0 S ENTRY=$P(^DD(682,4,0),U,2),^LBRY(682,DA,4,0)="^"_ENTRY_"^"_TOTAL_"^"_TOTAL
"RTN","LBRYRTX",24,0)
 S $P(^LBRY(682,DA,1),U,6)=DUZ S:CO682=0 CO682="" S $P(^LBRY(682,DA,1),U,5)=CO682
"RTN","LBRYRTX",25,0)
EXIT1 K COPY,COPY1,COPY2,COPYNO,ENTRY,LBX,LDFX,START,STOP,TOC,TOC1,TOTAL,XX1,XXZ
"RTN","LBRYRTX",26,0)
 Q
"RTN","LBRYRTX",27,0)
NOCS ;ISSUE ROUTING STATUS SET OF X-REF AD IN MULTIPLE 682.04,1
"RTN","LBRYRTX",28,0)
 Q:'$D(LBRYPTR)
"RTN","LBRYRTX",29,0)
 I $P(^LBRY(682,DA(1),4,DA,0),U)'="ToC" S XXZ=^LBRY(682,DA(1),1),XX1=$P(XXZ,U,4) I X<4 S XX1=XX1+1,$P(^LBRY(682,DA(1),1),U,4)=XX1 G DAS
"RTN","LBRYRTX",30,0)
 I $P(^LBRY(682,DA(1),4,DA,0),U)'="ToC" I XX1="" S TOC=$O(^LBRY(682,DA(1),4,"B","ToC",0)) D:TOC'="" TOCRMV
"RTN","LBRYRTX",31,0)
 G DAS
"RTN","LBRYRTX",32,0)
NOCD ;ISSUE ROUTING STATUS KILL OF X-REF AD IN MULTIPLE 682.04,1
"RTN","LBRYRTX",33,0)
 Q:'$D(LBRYPTR)
"RTN","LBRYRTX",34,0)
 I $P(^LBRY(682,DA(1),4,DA,0),U)'="ToC" I X<4 S XXZ=^LBRY(682,DA(1),1),XX1=$P(XXZ,U,4),XX1=XX1-1 S:XX1<1 XX1="" S $P(XXZ,U,4)=XX1 S:XX1="" $P(XXZ,U,7)="" S ^LBRY(682,DA(1),1)=XXZ
"RTN","LBRYRTX",35,0)
 G DAK
"RTN","LBRYRTX",36,0)
TOCRMV S TOC1=^LBRY(682,DA(1),4,TOC,0),$P(TOC1,U,2)=5,TOC1=$P(TOC1,U,1,3)
"RTN","LBRYRTX",37,0)
 S ^LBRY(682,DA(1),4,TOC,0)=TOC1 K ^LBRY(682,"A2",DA(1),TOC)
"RTN","LBRYRTX",38,0)
 Q
"RTN","LBRYRTX",39,0)
DAS I X<4 S $P(^LBRY(682,DA(1),4,DA,0),U,8)=DUZ,LBX=X D
"RTN","LBRYRTX",40,0)
 . S LDATE=$P(^LBRY(682,DA(1),4,DA,0),U,7) S:LDATE="" LDATE=DT
"RTN","LBRYRTX",41,0)
 G EXIT1
"RTN","LBRYRTX",42,0)
DAK S XX=$P(^LBRY(682,DA(1),4,DA,0),U,7),$P(^(0),U,7)="",$P(^(0),U,8)="",$P(^(0),U,6)=""
"RTN","LBRYRTX",43,0)
 I XX]""&($P($G(^LBRY(682,DA(1),0)),U,2)'="") K ^LBRY(682,"A4",XX,$P(^LBRY(682,DA(1),0),U,2),DA(1),DA)
"RTN","LBRYRTX",44,0)
 G EXIT1
"RTN","LBRYRTX",45,0)
CNO ;INPUT TRANSFORM FROM 689.04 FIELD .02
"RTN","LBRYRTX",46,0)
 Q
"RTN","LBRYRTX",47,0)
 I $P(^LBRY(682,DA(1),0),U,2)=$P(^(0),U,2) D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"RTN","LBRYRTX",48,0)
 Q
"RTN","LBRYRTX",49,0)
A4 ;SET/KILL FOR "A4" CROSS-REFERENCE FOR CHANGE IN .02 FIELD
"RTN","LBRYRTX",50,0)
 N LBRCOPN,LBRDA1
"RTN","LBRYRTX",51,0)
 S LBRCOPN=0
"RTN","LBRYRTX",52,0)
A4LP1 S LBRCOPN=$O(^LBRY(682,DA,4,"B",LBRCOPN)) Q:LBRCOPN=""
"RTN","LBRYRTX",53,0)
 S LBRDA1=0
"RTN","LBRYRTX",54,0)
A4LP2 S LBRDA1=$O(^LBRY(682,DA,4,"B",LBRCOPN,LBRDA1)) G A4LP1:LBRDA1=""
"RTN","LBRYRTX",55,0)
 I LBRTYPE="SET",$P($G(^LBRY(682,DA,4,LBRDA1,0)),U,7)'="" S ^LBRY(682,"A4",$P(^LBRY(682,DA,4,LBRDA1,0),U,7),$E(X,1,30),DA,LBRDA1)=""
"RTN","LBRYRTX",56,0)
 I LBRTYPE="KILL",$P($G(^LBRY(682,DA,4,LBRDA1,0)),U,7)'="" K ^LBRY(682,"A4",$P(^LBRY(682,DA,4,LBRDA1,0),U,7),$E(X,1,30),DA,LBRDA1)
"RTN","LBRYRTX",57,0)
 G A4LP2
"RTN","LBRYSITE")
0^53^B4360210
"RTN","LBRYSITE",1,0)
LBRYSITE ;ISC2/DJM-LIBRARY SITE PARAMETERS EDIT ;[ 05/23/97  12:13 PM ]
"RTN","LBRYSITE",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYSITE",3,0)
 I '$D(IOP) S IOP=$I D ^%ZIS K IOP Q:POP>0
"RTN","LBRYSITE",4,0)
 I '$D(DT) D NOW^%DTC S DT=X
"RTN","LBRYSITE",5,0)
 S LBCK=$G(^DIC(49,0,"GL")) G:LBCK="" FILE I $P(@(LBCK_"0)"),"^",4)'>0 G FILE
"RTN","LBRYSITE",6,0)
 S LBCK=$G(^DIC(440,0,"GL")) G:LBCK="" FILE I $P(@(LBCK_"0)"),"^",4)'>0 G FILE
"RTN","LBRYSITE",7,0)
EN1 S DTOUTZ=0 D START G:Y<0 EXIT S DIE=DIC,DR="[LBRY SITE]" K HFLAG
"RTN","LBRYSITE",8,0)
 D LOCK^LBRYEDR G:LBRYL=0 EXIT D ^DIE L
"RTN","LBRYSITE",9,0)
 G:'$D(DA) EN1 G:$D(Y) EN1 D CHECK G:DTOUTZ=1 EXIT G EN1
"RTN","LBRYSITE",10,0)
START W @IOF,?5,"VA Library Site Parameters Edit" S Y=DT X ^DD("DD") S YDT=Y
"RTN","LBRYSITE",11,0)
 W ?60,Y,!
"RTN","LBRYSITE",12,0)
 S DIC="^LBRY(680.6,",DIC(0)="AELQZ" D ^DIC Q:Y<0  S DA=+Y
"RTN","LBRYSITE",13,0)
 S ZZY(0)=Y(0) W @IOF,?5,"VA Library Site Parameters Edit",?60,YDT,!!
"RTN","LBRYSITE",14,0)
 Q
"RTN","LBRYSITE",15,0)
CHECK S CHECK=$G(^LBRY(680.6,DA,0))
"RTN","LBRYSITE",16,0)
 I $P(CHECK,U,5)="Y",$P(CHECK,U,3)="" S $P(^LBRY(680.6,DA,0),U,5)="N",HFLAG=1 W !!,"AUTOMATIC QUEUING not allowed without entering ROUTING SLIP PRINTER."
"RTN","LBRYSITE",17,0)
 I $P(CHECK,U,6)="Y",$P(CHECK,U,7)="" S $P(^LBRY(680.6,DA,0),U,6)="N",HFLAG=1 W !!,"Since no Division Site Name was entered MULTI-DIVISION SITE is reset to NO."
"RTN","LBRYSITE",18,0)
 I '$D(HFLAG)#2 Q
"RTN","LBRYSITE",19,0)
 W ! S XZ="CONTINUE// " D PAUSE^LBRYCK0 K XZ Q
"RTN","LBRYSITE",20,0)
EXIT K DTOUTZ,LBRYL,Y,DIC,DLAYGO,DTOUT,DIE,DR,YDT,ZZY,CHECK,HFLAG Q
"RTN","LBRYSITE",21,0)
FILE S XQH="LBRY FILE MISSING" D EN^XQH K XQH,LBCK Q
"RTN","LBRYSTA")
0^56^B5434356
"RTN","LBRYSTA",1,0)
LBRYSTA ;ISC2/DJM-SERIALS STATISTICAL REPORT ;[ 05/23/97  12:13 PM ]
"RTN","LBRYSTA",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYSTA",3,0)
 ;
"RTN","LBRYSTA",4,0)
START W @IOF,!,?5,"VA Library Serials Statistical Report for "_LBRYNAM
"RTN","LBRYSTA",5,0)
 S Y=DT X ^DD("DD") S YDT=Y W ?60,YDT,!
"RTN","LBRYSTA",6,0)
S1 W !,"Please enter the Month and Year for the Statistical Counts Report."
"RTN","LBRYSTA",7,0)
 S %DT="AE",%DT(0)="-NOW" D ^%DT G:Y<0 EXIT
"RTN","LBRYSTA",8,0)
 S MO=$E(Y,4,5) I +MO=0 W !!,"You must enter a month." G S1
"RTN","LBRYSTA",9,0)
 S (LBTIME,LBDT)=$E(Y,1,5)_"00"-.0001,(LBCR,LBCRR,LBTR,LBTRR,LBTOT)=0
"RTN","LBRYSTA",10,0)
 F  S LBTIME=$O(^LBRY(682,"A3",LBTIME)) Q:LBTIME'>0  Q:$E(LBTIME,4,5)'=MO  S TITLE=0 D S2
"RTN","LBRYSTA",11,0)
 K ^TMP($J,DUZ)
"RTN","LBRYSTA",12,0)
 F  S LBDT=$O(^LBRY(682,"A4",LBDT)) Q:LBDT'>0  Q:$E(LBDT,4,5)'=MO  D S1A
"RTN","LBRYSTA",13,0)
 G S1B
"RTN","LBRYSTA",14,0)
S1A S (X4,X5)=0
"RTN","LBRYSTA",15,0)
 F  S X4=$O(^LBRY(682,"A4",LBDT,X4)) Q:X4'>0  D
"RTN","LBRYSTA",16,0)
 . F  S X5=$O(^LBRY(682,"A4",LBDT,X4,X5)) Q:X5'>0  D
"RTN","LBRYSTA",17,0)
 .. I $G(^LBRY(682,X5,0))="" K ^LBRY(682,"A4",LBDT,X4,X5) Q
"RTN","LBRYSTA",18,0)
 .. I $P(^LBRY(682,X5,0),U,4)'=LBRYPTR Q
"RTN","LBRYSTA",19,0)
 .. I '$D(^TMP($J,DUZ,X4,X5)) S ^(X5)="",LBTOT=LBTOT+1
"RTN","LBRYSTA",20,0)
 Q
"RTN","LBRYSTA",21,0)
S1B W !!,"ISSUES ROUTED: ",LBCR,?30,"NUMBER OF RECIPIENTS ROUTED TO: ",LBCRR
"RTN","LBRYSTA",22,0)
 W !!,"ToC ISSUES ROUTED: ",LBTR,?30,"NUMBER OF ToC RECIPIENTS ROUTED TO: ",LBTRR
"RTN","LBRYSTA",23,0)
 W !!,"TITLES WITH CHECK-IN ACTIVITY: ",LBTOT
"RTN","LBRYSTA",24,0)
 K ^TMP($J,DUZ)
"RTN","LBRYSTA",25,0)
 W ! S XZ="Exit// " D PAUSE^LBRYCK0 K XZ G START
"RTN","LBRYSTA",26,0)
S2 F  S TITLE=$O(^LBRY(682,"A3",LBTIME,TITLE)) Q:TITLE'>0  D
"RTN","LBRYSTA",27,0)
 . I $G(^LBRY(682,TITLE,0))="" K ^LBRY(682,"A3",LBTIME,TITLE) Q
"RTN","LBRYSTA",28,0)
 . I $P(^LBRY(682,TITLE,0),U,4)'=LBRYPTR Q
"RTN","LBRYSTA",29,0)
 . S TITLE1=0 F  S TITLE1=$O(^LBRY(682,"A3",LBTIME,TITLE,TITLE1)) Q:TITLE1'>0  D
"RTN","LBRYSTA",30,0)
 .. S XX=$G(^LBRY(682,TITLE,4,TITLE1,0)) I XX'="" D MORE
"RTN","LBRYSTA",31,0)
 .. I XX="" K ^LBRY(682,"A3",LBTIME,TITLE,TITLE1)
"RTN","LBRYSTA",32,0)
 Q
"RTN","LBRYSTA",33,0)
MORE S X1=$P(XX,U,3),(X2,X3)=0
"RTN","LBRYSTA",34,0)
 F  S X2=$O(^LBRY(681,X1,2,X2)) Q:X2'>0  S X3=X3+1
"RTN","LBRYSTA",35,0)
 I $P(XX,U,1)'="ToC" S LBCR=LBCR+1,LBCRR=LBCRR+X3 Q
"RTN","LBRYSTA",36,0)
 S LBTR=LBTR+1,LBTRR=LBTRR+X3
"RTN","LBRYSTA",37,0)
 Q
"RTN","LBRYSTA",38,0)
EXIT K YDT,%DT,MO,I,J,K,LBTIME,LBDT,LBCR,LBCRR,LBTR,LBTRR,LBTOT,TITLE
"RTN","LBRYSTA",39,0)
 K TITLE1,XX,X1,X2,X3,X4,X5
"RTN","LBRYSTA",40,0)
 Q
"RTN","LBRYTST")
1^76
"RTN","LBRYUTL")
0^58^B4794749
"RTN","LBRYUTL",1,0)
LBRYUTL ;SSI/ALA-UTILITY PROGRAM FOR LIBRARY PKG ;[ 05/23/97  12:13 PM ]
"RTN","LBRYUTL",2,0)
 ;;2.5;Library;**2**;Mar 11, 1996
"RTN","LBRYUTL",3,0)
JDN(Y) ;  Create 7 digit Julian date from FileMan internal date
"RTN","LBRYUTL",4,0)
 ;  Requires X=FileMan internal date.  Returns Y as Julian day number
"RTN","LBRYUTL",5,0)
 NEW LDAY,LDAYS,MO,YR,I,Z
"RTN","LBRYUTL",6,0)
 S Y=-1,LDAYS="31^28^31^30^31^30^31^31^30^31^30^31"
"RTN","LBRYUTL",7,0)
 S YR=$E(X,1,3)+1700,MO=+$E(X,4,5),LDAY=+$E(X,6,7)
"RTN","LBRYUTL",8,0)
 I YR#4=0 S $P(LDAYS,U,2)=29
"RTN","LBRYUTL",9,0)
 S Z=0 F I=1:1:MO-1 Q:MO=I  S Z=Z+$P(LDAYS,U,I)
"RTN","LBRYUTL",10,0)
 S Y=Z+LDAY,Y="000"_Y,Y=$E(Y,$L(Y)-2,$L(Y)),Y=YR_Y
"RTN","LBRYUTL",11,0)
 Q Y
"RTN","LBRYUTL",12,0)
RJD(Y) ;  Create FileMan internal date from 7 digit Julian date
"RTN","LBRYUTL",13,0)
 ;  Requires Y=Year_Number of days from begin of year
"RTN","LBRYUTL",14,0)
 NEW LDAYS,LDY,I,NLDY,XX,YR
"RTN","LBRYUTL",15,0)
 S YR=$E(Y,1,4),YR=YR-1700
"RTN","LBRYUTL",16,0)
 S LDAYS="31^28^31^30^31^30^31^31^30^31^30^31"
"RTN","LBRYUTL",17,0)
 I YR#4=0 S $P(LDAYS,U,2)=29
"RTN","LBRYUTL",18,0)
 S NLDY=$E(Y,5,7),X=NLDY F I=1:1:12 S X=(X-$P(LDAYS,U,I)) Q:X<0  S LDY=X
"RTN","LBRYUTL",19,0)
 I '$D(LDY) S LDY=1
"RTN","LBRYUTL",20,0)
 I LDY=0 S LDY=$P(LDAYS,U,I)
"RTN","LBRYUTL",21,0)
 S XX=$E("00",2-$L(I))_I,X=YR_XX,XX=$E("00",2-$L(LDY))_LDY,X=X_XX
"RTN","LBRYUTL",22,0)
 Q X
"RTN","LBRYUTL",23,0)
TRN ;  Get next transaction number for transaction file local site
"RTN","LBRYUTL",24,0)
 S DIC(0)="L",DLAYGO=682.1,DIC="^LBRY(682.1,"
"RTN","LBRYUTL",25,0)
 L ^LBRY(682.1,0):5 I '$T G TRN
"RTN","LBRYUTL",26,0)
 S DINUM=+$P(^LBRY(682.1,0),U,3) F I=1:1 S DINUM=DINUM+I Q:'$D(^LBRY(682.1,DINUM,0))
"RTN","LBRYUTL",27,0)
 L
"RTN","LBRYUTL",28,0)
 S X=DINUM D FILE^DICN S LBRYDA=+Y K X,Y,DLAYGO
"RTN","LBRYUTL",29,0)
 S DA=LBRYDA,DIC="^LBRY(682.1,",DIE=DIC
"RTN","LBRYUTL",30,0)
 S DR=$S($G(SRVFLG)=1:"[LBRYLTF]",1:"[LBRYREC]") D ^DIE
"RTN","LBRYUTL",31,0)
 I $G(SRVFLG)=1 S $P(^LBRY(682.1,LBRYDA,1),U,2)=LBRYCLS
"RTN","LBRYUTL",32,0)
 K DINUM,DA,SRVFLG Q
"RTN","LBRYUTL",33,0)
FTRN ;  Get next transaction number for transaction file in FORUM
"RTN","LBRYUTL",34,0)
 S DIC(0)="L",DLAYGO=682.1,DIC="^LBRY(682.1,"
"RTN","LBRYUTL",35,0)
 L ^LBRY(682.1,0):5 I '$T G FTRN
"RTN","LBRYUTL",36,0)
 S DINUM=+$P(^LBRY(682.1,0),U,3) F I=1:1 S DINUM=DINUM+I Q:'$D(^LBRY(682.1,DINUM,0))
"RTN","LBRYUTL",37,0)
 L
"RTN","LBRYUTL",38,0)
 S X=DINUM D FILE^DICN S LBRYDA=+Y K X,Y,DLAYGO
"RTN","LBRYUTL",39,0)
 S DA=LBRYDA,DIC="^LBRY(682.1,",DIE=DIC
"RTN","LBRYUTL",40,0)
 S DR=$S($G(SRVFLG)=1:"[LBRYRECV]",1:"[LBRYSND]") D ^DIE
"RTN","LBRYUTL",41,0)
 S $P(^LBRY(682.1,LBRYDA,1),U,2)=$G(LBRYCLS)
"RTN","LBRYUTL",42,0)
 S $P(^LBRY(682.1,LBRYDA,0),U,7)=$G(STN)
"RTN","LBRYUTL",43,0)
 K DINUM,SRVFLG,DA
"RTN","LBRYUTL",44,0)
 Q
"RTN","LBRYUTL",45,0)
PAUSE W !,XZ S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 Q
"RTN","LBRYUTL",46,0)
 Q:X=""  Q:X="^"  W !,"Enter carriage return to ",XZ
"RTN","LBRYUTL",47,0)
 G PAUSE
"SEC","^DD",680.5,680.5,.01,8.5)
#
"SEC","^DD",680.5,680.5,.05,9)
#
"SEC","^DIC",680.5,680.5,0,"DD")
@
"SEC","^DIC",680.5,680.5,0,"DEL")
@
"SEC","^DIC",680.5,680.5,0,"LAYGO")
@
"SEC","^DIC",680.5,680.5,0,"WR")
#
"VER")
8.0^21.0
"^DD",680,680,0)
FIELD^^15^39
"^DD",680,680,0,"DDA")
N
"^DD",680,680,0,"DIK")
LBRYX1
"^DD",680,680,0,"DIKOLD")
LBRYX1
"^DD",680,680,0,"DT")
2970714
"^DD",680,680,0,"ID",.02)
W "   ",@("$P($P($C(59)_$S($D(^DD(680,.02,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,2)_"":"",2),$C(59),1)")
"^DD",680,680,0,"ID","Z01")
W !,?5,$E($P(^LBRY(680.5,$P(^(0),U,1),0),U,1),1,75)
"^DD",680,680,0,"IX","AC",680,.01)

"^DD",680,680,0,"IX","AD",680,.02)

"^DD",680,680,0,"IX","B",680,.01)

"^DD",680,680,0,"IX","C",680.03,.01)

"^DD",680,680,0,"IX","E",680,.04)

"^DD",680,680,0,"NM","LOCAL SERIALS")

"^DD",680,680,0,"PT",681,.02)

"^DD",680,680,0,"PT",682,.02)

"^DD",680,680,.01,0)
TITLE^RP680.5^LBRY(680.5,^0;1^Q
"^DD",680,680,.01,1,0)
^.1
"^DD",680,680,.01,1,1,0)
680^B
"^DD",680,680,.01,1,1,1)
S ^LBRY(680,"B",$E(X,1,30),DA)=""
"^DD",680,680,.01,1,1,2)
K ^LBRY(680,"B",$E(X,1,30),DA)
"^DD",680,680,.01,1,1,"%D",0)
^^1^1^2950725^
"^DD",680,680,.01,1,1,"%D",1,0)
Regular FileMan "B" cross-reference.
"^DD",680,680,.01,1,3,0)
680^AC^MUMPS
"^DD",680,680,.01,1,3,1)
D NTIT^LBRYEDI
"^DD",680,680,.01,1,3,2)
Q
"^DD",680,680,.01,1,3,"%D",0)
^^5^5^2970714^^^^
"^DD",680,680,.01,1,3,"%D",1,0)
If this is a new entry, variable LBRYNEW, set the ADDED
"^DD",680,680,.01,1,3,"%D",2,0)
DATE field equal to the current date, DT in node 5, piece 1 in 
"^DD",680,680,.01,1,3,"%D",3,0)
the Local Serials file (#680).  Also, since locally created new
"^DD",680,680,.01,1,3,"%D",4,0)
title, the LOCAL SERIALS FLAG will be set to ACTIVE LOCAL SERIALS
"^DD",680,680,.01,1,3,"%D",5,0)
in the Title Authority file (#680.5) in node 0, piece 2.
"^DD",680,680,.01,1,3,"DT")
2950918
"^DD",680,680,.01,3)

"^DD",680,680,.01,21,0)
^^9^9^2970709^^^^
"^DD",680,680,.01,21,1,0)
The title is the full title of a specific serial publication.  Such
"^DD",680,680,.01,21,2,0)
titles can be extremely long and the initial words in two different
"^DD",680,680,.01,21,3,0)
titles can be exactly the same for a considerable length, for example:
"^DD",680,680,.01,21,4,0)
SCANDINAVIAN JOURNAL OF PATHOLOGY AND LABORATORY MEDICINE
"^DD",680,680,.01,21,5,0)
SCANDINAVIAN JOURNAL OF PATHOLOGY AND LABORATORY MEDICINE. SUPPLEMENTUM
"^DD",680,680,.01,21,6,0)
Note:
"^DD",680,680,.01,21,7,0)
Since exact alphabetization of these titles is very important in the
"^DD",680,680,.01,21,8,0)
serials process, it is crucial that the field length be long enough
"^DD",680,680,.01,21,9,0)
to accommodate all possibilities.
"^DD",680,680,.01,"DT")
2950918
"^DD",680,680,.02,0)
INACTIVE^SX^C:CANCELLED TITLE;D:DEAD TITLE;R:RENAMED TITLE;^0;2^Q
"^DD",680,680,.02,1,0)
^.1
"^DD",680,680,.02,1,1,0)
680^AD^MUMPS
"^DD",680,680,.02,1,1,1)
I $G(LBRYCLS)'="",$D(^LBRY(680.5,LBRYCLS,0)) S $P(^LBRY(680.5,LBRYCLS,0),U,2)=2
"^DD",680,680,.02,1,1,2)
I $G(LBRYCLS)'="",$D(^LBRY(680.5,LBRYCLS,0)) S $P(^LBRY(680.5,LBRYCLS,0),U,2)=1
"^DD",680,680,.02,1,1,"%D",0)
^^3^3^2970604^^^
"^DD",680,680,.02,1,1,"%D",1,0)
If any of the type is selected from the set of data, then the
"^DD",680,680,.02,1,1,"%D",2,0)
title is considered 'inactive' and will set the inactive flag
"^DD",680,680,.02,1,1,"%D",3,0)
in the Title Authority file.
"^DD",680,680,.02,1,1,"DT")
2970604
"^DD",680,680,.02,3)
Enter 'C' if this title is no longer received, 'D' if this title is no longer published or 'R' if this title is renamed.
"^DD",680,680,.02,4)
I X="??" S XQH="LBRY INACTIVE HELP PROMPT" D EN^XQH
"^DD",680,680,.02,21,0)
^^10^10^2970402^^^^
"^DD",680,680,.02,21,1,0)
If a title is 'active', meaning no value has been input for this
"^DD",680,680,.02,21,2,0)
field, that title is available for the full range of options,
"^DD",680,680,.02,21,3,0)
including all the Serials Control Option functions.  If it is
"^DD",680,680,.02,21,4,0)
rendered 'inactive' by one of the codes, it is no longer available
"^DD",680,680,.02,21,5,0)
for any of the Serials Control option functions and Copy Specific
"^DD",680,680,.02,21,6,0)
Edit, but can still be used in the Holdings Option.  If it is
"^DD",680,680,.02,21,7,0)
inactive, it indicates that the library will not be receiving any
"^DD",680,680,.02,21,8,0)
more current issues, but will be keeping its retrospective holdings.
"^DD",680,680,.02,21,9,0)
Should the title need to be reactivated, the value in the INACTIVE
"^DD",680,680,.02,21,10,0)
field can be deleted.  Found in the LTS option.
"^DD",680,680,.02,"DT")
2970604
"^DD",680,680,.03,0)
PREDICTION POP-UP^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",680,680,.03,3)
Enter the number of days in advance of the next issue date that the issue is expected to be received in the library.  Enter a number 1-99.
"^DD",680,680,.03,4)
I X="??" S XQH="LBRY POP-UP ??" D EN^XQH
"^DD",680,680,.03,21,0)
^^3^3^2940519^
"^DD",680,680,.03,21,1,0)
This fields allows for the local adjustment of the prediction
"^DD",680,680,.03,21,2,0)
ability found in the Check-in Option.  If no value is input, it
"^DD",680,680,.03,21,3,0)
defaults to a value of 5.  Found in LTS option.
"^DD",680,680,.03,"DT")
2880726
"^DD",680,680,.04,0)
SITE NAME^RP680.6'^LBRY(680.6,^0;4^Q
"^DD",680,680,.04,1,0)
^.1
"^DD",680,680,.04,1,1,0)
680^E
"^DD",680,680,.04,1,1,1)
S ^LBRY(680,"E",$E(X,1,30),DA)=""
"^DD",680,680,.04,1,1,2)
K ^LBRY(680,"E",$E(X,1,30),DA)
"^DD",680,680,.04,1,1,"%D",0)
^^1^1^2950828^
"^DD",680,680,.04,1,1,"%D",1,0)
This cross-reference is to be used to screen out by site.
"^DD",680,680,.04,1,1,"DT")
2950828
"^DD",680,680,.04,3)
Select correct division site name
"^DD",680,680,.04,21,0)
^^2^2^2950824^
"^DD",680,680,.04,21,1,0)
This field is to identify the individual sites that have been
"^DD",680,680,.04,21,2,0)
combined into one VISN.
"^DD",680,680,.04,"DT")
2950828
"^DD",680,680,.05,0)
PREV SITE DA^NJ7,0^^0;5^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",680,680,.05,3)
Type a Number between 0 and 9999999, 0 Decimal Digits
"^DD",680,680,.05,21,0)
^^2^2^2950825^
"^DD",680,680,.05,21,1,0)
This is the site's previous DA number in order to remap entries to
"^DD",680,680,.05,21,2,0)
this new DA number.
"^DD",680,680,.05,"DT")
2950825
"^DD",680,680,1.1,0)
PLACEMENT^*P680.7'^LBRY(680.7,^1;3^S DIC("S")="I $P(^(0),U,2)=$G(LBRYPTR)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",680,680,1.1,3)
Indicate where the journal will be located once it is checked-in.
"^DD",680,680,1.1,12)
Screen out entries by site
"^DD",680,680,1.1,12.1)
S DIC("S")="I $P(^(0),U,2)=$G(LBRYPTR)"
"^DD",680,680,1.1,21,0)
^^2^2^2940527^^^
"^DD",680,680,1.1,21,1,0)
This field holds the locations which are the final destination
"^DD",680,680,1.1,21,2,0)
for any particular serials title.  Found in HOL option.
"^DD",680,680,1.1,"DT")
2970714
"^DD",680,680,1.5,0)
FOR-YOUR-INFORMATION^F^^1;5^K:$L(X)>75!($L(X)<1) X
"^DD",680,680,1.5,3)
A field of up to 75 characters which will display information below TITLE on the check-in screens.  Use CHECK-IN NOTES for longer messages.
"^DD",680,680,1.5,4)
I X="??" S XQH="LBRY F-Y-I HELP PROMPT" D EN^XQH
"^DD",680,680,1.5,21,0)
^^5^5^2940519^
"^DD",680,680,1.5,21,1,0)
This is an optional field that allows the user to input
"^DD",680,680,1.5,21,2,0)
information which will appear on the screen immediately under
"^DD",680,680,1.5,21,3,0)
the title in the Check-in Option.  It is useful for reminding
"^DD",680,680,1.5,21,4,0)
technicians about peculiarities or specific instructions for
"^DD",680,680,1.5,21,5,0)
certain titles.  Found in LTS option.
"^DD",680,680,1.5,"DT")
2870304
"^DD",680,680,2.1,0)
MICROFILM HOLDINGS^F^^2;2^K:$L(X)>75!($L(X)<1) X
"^DD",680,680,2.1,3)
Enter the microfilm holdings for this title (1-75 characters).
"^DD",680,680,2.1,4)
I X="??" S XQH="LBRY MICROFILM ??" D EN^XQH
"^DD",680,680,2.1,21,0)
^^5^5^2940519^
"^DD",680,680,2.1,21,1,0)
This field allows the input of holdings statements for those
"^DD",680,680,2.1,21,2,0)
holdings of a serials title which may be in microformat. In
"^DD",680,680,2.1,21,3,0)
some libraries microformat holdings are stored separately from
"^DD",680,680,2.1,21,4,0)
the paper holdings; thus in some cases it is desirable to have
"^DD",680,680,2.1,21,5,0)
two different holdings statements.  Found in HOL option.
"^DD",680,680,2.1,"DT")
2870825
"^DD",680,680,2.5,0)
MICROFILM VENDOR^FX^^2;5^S DIC="^PRC(440,",DIC(0)="EQZ" D ^DIC K:Y<0 X Q:Y<0  S X=$S($D(Y(0)):$P(Y(0),U,1),1:"") K:X="" X K DIC
"^DD",680,680,2.5,3)
Enter the vendor from whom the microfilm was ordered.
"^DD",680,680,2.5,4)
S ZD=D,X="?",DIC="^PRC(440,",DIC(0)="EQ" D ^DIC S D=ZD K DIC,ZD
"^DD",680,680,2.5,21,0)
^^4^4^2940809^^
"^DD",680,680,2.5,21,1,0)
The vendor for the microformat version of a serials title is
"^DD",680,680,2.5,21,2,0)
usually different from the vendor for the current paper
"^DD",680,680,2.5,21,3,0)
subscription.  Also, not all serials microformat can be
"^DD",680,680,2.5,21,4,0)
acquired from the same microformat vendor.  Found in HOL option.
"^DD",680,680,2.5,"DT")
2870603
"^DD",680,680,3,0)
SUBJECT^680.03PA^^3;0
"^DD",680,680,3,21,0)
^^1^1^2951012^^
"^DD",680,680,3,21,1,0)
This is the subject of the serial.
"^DD",680,680,4,0)
CATEGORY^680.01SA^^4;0
"^DD",680,680,4,21,0)
^^1^1^2940825^
"^DD",680,680,4,21,1,0)
This is the category of the serial.
"^DD",680,680,5,0)
ADDED DATE^D^^5;1^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",680,680,5,21,0)
^^2^2^2940519^
"^DD",680,680,5,21,1,0)
This field allows a date to be entered in the Holdings Option
"^DD",680,680,5,21,2,0)
to indicate when a serials title was first acquired.
"^DD",680,680,5.2,0)
RECOMMENDATION^S^R:RETAIN;D:DELETE;^5;2^Q
"^DD",680,680,5.2,3)
Select R if it has been decided to retain this title; D if the title is to be deleted.
"^DD",680,680,5.2,21,0)
^^3^3^2940519^
"^DD",680,680,5.2,21,1,0)
This field uses codes to signify if whether the retention
"^DD",680,680,5.2,21,2,0)
decision for a serials title is 'retain' or 'delete'.  Found
"^DD",680,680,5.2,21,3,0)
in HOL option.
"^DD",680,680,5.3,0)
DELETION DATE^D^^5;3^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",680,680,5.3,3)
Enter the date when the title (gift or regular subscription) will be deleted or discontinued.
"^DD",680,680,5.3,21,0)
^^2^2^2940519^
"^DD",680,680,5.3,21,1,0)
This field allows a date to be entered to indicate when a
"^DD",680,680,5.3,21,2,0)
serials title will be discontinued or deleted.
"^DD",680,680,5.4,0)
DELETION NOTES^F^^5;4^K:$L(X)>60!($L(X)<1) X
"^DD",680,680,5.4,3)
Enter information (up to 60 characters) about the decision to discontinue a title, such as name of staff member making this recommendation.
"^DD",680,680,5.4,21,0)
^^3^3^2940519^
"^DD",680,680,5.4,21,1,0)
This is a word-processing field where information on the
"^DD",680,680,5.4,21,2,0)
decision to discontinue a serials title may be entered,
"^DD",680,680,5.4,21,3,0)
such as name of staff member making this recommendation.
"^DD",680,680,6,0)
UNION LIST CODE^680.02SA^^6;0
"^DD",680,680,6,21,0)
^^3^3^2940519^
"^DD",680,680,6,21,1,0)
This field contains a set of codes to allow the indication
"^DD",680,680,6,21,2,0)
of which union list authorities are recipients of the
"^DD",680,680,6,21,3,0)
holdings of a particular library.  Found in HOL option.
"^DD",680,680,7,0)
INITIAL COPIES ORDERED^NJ2,0^^7;1^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",680,680,7,3)
Enter the total number of copies ordered regardless of source.  Enter number from 1 to 99.
"^DD",680,680,7,4)

"^DD",680,680,7,21,0)
^^4^4^2940519^
"^DD",680,680,7,21,1,0)
This field is used in the initial setup of the serials title
"^DD",680,680,7,21,2,0)
in the LTS option and basically triggers the cloning action
"^DD",680,680,7,21,3,0)
found in CSE.  However, as numbers of copies change later over
"^DD",680,680,7,21,4,0)
time, it is necessary to alter the value in this field.
"^DD",680,680,7,"DT")
2880520
"^DD",680,680,7.1,0)
COPIES ORDERED^CJ2^^ ; ^D UDT^LBRYCSE0
"^DD",680,680,7.1,9)
^
"^DD",680,680,7.1,9.01)

"^DD",680,680,7.1,9.1)
D UDT^LBRYCSE0
"^DD",680,680,7.1,21,0)
^^1^1^2940825^
"^DD",680,680,7.1,21,1,0)
The number of copies of the serial is recorded in this field.
"^DD",680,680,8,0)
FUNDING SOURCE^F^^8;1^K:$L(X)>30!($L(X)<3) X
"^DD",680,680,8,3)
Enter source of the funds (3-30 characters) used to pay for the subscription to this journal.
"^DD",680,680,8,4)
I X="??" S XQH="LBRY FUNDING ??" D EN^XQH
"^DD",680,680,8,21,0)
^^5^5^2940519^
"^DD",680,680,8,21,1,0)
This field allows the identification of sources of funding
"^DD",680,680,8,21,2,0)
for specific serials titles; such sources could be the local
"^DD",680,680,8,21,3,0)
facility budget, research funds, RML funding, funding from
"^DD",680,680,8,21,4,0)
library-raised revenues, tuition-support funds, etc.  Found in
"^DD",680,680,8,21,5,0)
PIE option.
"^DD",680,680,8.3,0)
UNIT COST^NJ7,2^^8;3^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999)!(X<0) X
"^DD",680,680,8.3,.1)

"^DD",680,680,8.3,3)
Enter current year's subscription cost, without service charge, for one copy.  Decimals may be used.
"^DD",680,680,8.3,21,0)
^^3^3^2940519^
"^DD",680,680,8.3,21,1,0)
This field is for the entry of the current year's subscription
"^DD",680,680,8.3,21,2,0)
cost without service charge, for one subscription.  Found in
"^DD",680,680,8.3,21,3,0)
PIE option.
"^DD",680,680,8.3,"DT")
2940519
"^DD",680,680,8.4,0)
LAST YEAR'S UNIT COST^NJ7,2^^8;4^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999)!(X<1) X
"^DD",680,680,8.4,3)
Enter last year's unit cost, without service charge, for one copy.  Decimals may be used.
"^DD",680,680,8.4,21,0)
^^2^2^2940519^
"^DD",680,680,8.4,21,1,0)
This field is for the previous year's subscription cost without
"^DD",680,680,8.4,21,2,0)
service charge, for one subscription.  Found in PIE option.
"^DD",680,680,8.4,"DT")
2880727
"^DD",680,680,8.5,0)
SERVICE CHARGE^NJ5,2^^8;5^K:+X'=X!(X>99.99)!(X<0)!(X?.E1"."3N.N) X
"^DD",680,680,8.5,3)
Enter the vendor's service charge.  Percentage will be applied to the UNIT COST for total cost.  Enter 11.06% as 11.06.
"^DD",680,680,8.5,21,0)
^^3^3^2940519^
"^DD",680,680,8.5,21,1,0)
The vendor's service charge percentage is to be entered
"^DD",680,680,8.5,21,2,0)
here; it will be applied to the UNIT COST field to derive
"^DD",680,680,8.5,21,3,0)
the TOTAL COST.  Found in PIE option.
"^DD",680,680,8.5,"DT")
2880208
"^DD",680,680,8.6,0)
TOTAL COST^CJ11,2^^ ; ^X ^DD(680,8.6,9.2) S Y(680,8.6,4)=X S X=Y(680,8.6,1)*$P(Y(680,8.6,2),U,3)/100*$P(Y(680,8.6,2),U,5),Y=X,X=Y(680,8.6,3),X=X+Y S X=$J(X,0,2)
"^DD",680,680,8.6,9)
^
"^DD",680,680,8.6,9.01)
680^8.5;680^8.3;680^7.1
"^DD",680,680,8.6,9.1)
(#7.1*#8.3)+((#7.1*#8.3)/100*#8.5)
"^DD",680,680,8.6,9.2)
X $P(^DD(680,7.1,0),U,5,99) S Y(680,8.6,1)=X S Y(680,8.6,2)=$S($D(^LBRY(680,D0,8)):^(8),1:"") S X=Y(680,8.6,1)*$P(Y(680,8.6,2),U,3),Y(680,8.6,3)=X
"^DD",680,680,8.6,21,0)
^^2^2^2940519^
"^DD",680,680,8.6,21,1,0)
This field is computed from the UNIT COST and SERVICE CHARGE
"^DD",680,680,8.6,21,2,0)
field.  Found in PIE option.
"^DD",680,680,8.6,"DT")
2880407
"^DD",680,680,8.7,0)
P.O. NUMBER^F^^8;7^K:$L(X)>15!($L(X)<2) X
"^DD",680,680,8.7,3)
Enter Purchase Order Number for locally ordered subscription.
"^DD",680,680,8.7,21,0)
^^2^2^2951012^^
"^DD",680,680,8.7,21,1,0)
This field allows the input of a purchase order number for
"^DD",680,680,8.7,21,2,0)
a serials title.  Found in PIE option.
"^DD",680,680,8.8,0)
CONTRACT NUMBER^F^^8;8^K:$L(X)>15!($L(X)<2) X
"^DD",680,680,8.8,3)
Enter local Contract Number for subscription.
"^DD",680,680,8.8,21,0)
^^2^2^2951012^^
"^DD",680,680,8.8,21,1,0)
This field allows the input of a contract number for a serials
"^DD",680,680,8.8,21,2,0)
title.  Found in PIE option.
"^DD",680,680,8.8,"DT")
2860117
"^DD",680,680,9,0)
BRIEF SUMMARY HOLDINGS^F^^9;1^K:$L(X)>50!($L(X)<1) X
"^DD",680,680,9,.1)

"^DD",680,680,9,3)
Enter a brief summary of this title's holdings (1-50 characters).  Enter ?? for more help.
"^DD",680,680,9,4)
I X="??" S XQH="LBRY BRIEF ??" D EN^XQH
"^DD",680,680,9,21,0)
^^5^5^2940519^
"^DD",680,680,9,21,1,0)
This field allows the input of summary holdings for a
"^DD",680,680,9,21,2,0)
serials title, which should be input in the form of
"^DD",680,680,9,21,3,0)
opening and closing volumes and dates; for example, v. 5, 1966 -
"^DD",680,680,9,21,4,0)
v. 10, 1971.  If the title is still being received, the statement
"^DD",680,680,9,21,5,0)
may be left open.  Found in HOL option.
"^DD",680,680,9,"DT")
2870925
"^DD",680,680,9.1,0)
DETAILED HOLDING^680.05^^12;0
"^DD",680,680,9.1,21,0)
^^3^3^2940519^
"^DD",680,680,9.1,21,1,0)
This is a word-processing option field which allows
"^DD",680,680,9.1,21,2,0)
the input of long, issue-specific holdings statements.
"^DD",680,680,9.1,21,3,0)
Found in HOL option.
"^DD",680,680,9.4,0)
RETENTION POLICY^F^^9;4^K:$L(X)>20!($L(X)<1) X
"^DD",680,680,9.4,3)
Enter the number of years, a date, or other information which will indicate the retention period for this title (1-20 characters).
"^DD",680,680,9.4,21,0)
^^4^4^2940519^
"^DD",680,680,9.4,21,1,0)
This field allows the input of a number of years, a date,
"^DD",680,680,9.4,21,2,0)
or other information which will indicate how much of a
"^DD",680,680,9.4,21,3,0)
backfile of the title that the library plans to keep on hand.
"^DD",680,680,9.4,21,4,0)
Found in HOL option.
"^DD",680,680,9.4,"DT")
2880311
"^DD",680,680,9.5,0)
BINDING PRIORITY^S^N:NO BINDING NEEDED;L:LOW;M:MEDIUM;H:HIGH;^9;5^Q
"^DD",680,680,9.5,3)
Select a code to indicate the priority placed on the need to bind this journal.
"^DD",680,680,9.5,21,0)
^^2^2^2940519^
"^DD",680,680,9.5,21,1,0)
This field is a set of codes to indicate the local library's
"^DD",680,680,9.5,21,2,0)
priorities for binding a specific serials title.
"^DD",680,680,9.8,0)
GAPS^680.04^^11;0
"^DD",680,680,9.8,21,0)
^^5^5^2940519^
"^DD",680,680,9.8,21,1,0)
This is a word-processing field where missing and/or
"^DD",680,680,9.8,21,2,0)
sought issues and/or volumes may be listed.  There is
"^DD",680,680,9.8,21,3,0)
a gaps report which prints this field; this report can
"^DD",680,680,9.8,21,4,0)
be used to acquire items from surplus lists.  Found in
"^DD",680,680,9.8,21,5,0)
HOL option.
"^DD",680,680,9.85,0)
REMARKS^680.12^^15;0
"^DD",680,680,9.85,21,0)
^^3^3^2940519^^^^
"^DD",680,680,9.85,21,1,0)
This field should contain your SEE references, See Also references, title
"^DD",680,680,9.85,21,2,0)
changes--whatever you want printed under your title (besides holdings)
"^DD",680,680,9.85,21,3,0)
when you run a printed holdings list.
"^DD",680,680,10.5,0)
RENEWAL DATE (HC)^D^^10;5^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",680,680,10.5,3)
Enter date the hard-copy subscription is due to be renewed.
"^DD",680,680,10.5,21,0)
^^2^2^2940519^
"^DD",680,680,10.5,21,1,0)
This field is for the input of the date that the paper
"^DD",680,680,10.5,21,2,0)
subscription is due to be renewed.  Found in HOL option.
"^DD",680,680,10.6,0)
RENEWAL DATE (MF)^D^^10;6^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",680,680,10.6,3)
Enter the date the microformat subscription is due to be renewed.
"^DD",680,680,10.6,21,0)
^^3^3^2940519^
"^DD",680,680,10.6,21,1,0)
This field is for the input of the date that the
"^DD",680,680,10.6,21,2,0)
microformat subscription is due to be renewed.
"^DD",680,680,10.6,21,3,0)
Found in HOL option.
"^DD",680,680,10.7,0)
REQUESTOR^*P680.4'^LBRY(680.4,^10;7^S DIC("S")="I $P(^(0),U,9)=$G(LBRYPTR)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",680,680,10.7,3)
Enter the name of the person or the service requesting this journal subscription.
"^DD",680,680,10.7,12)
This screens entries to a specific site (for multiple site stations)
"^DD",680,680,10.7,12.1)
S DIC("S")="I $P(^(0),U,9)=$G(LBRYPTR)"
"^DD",680,680,10.7,21,0)
^^2^2^2970714^^^
"^DD",680,680,10.7,21,1,0)
This field is for the name of the person who requested
"^DD",680,680,10.7,21,2,0)
this serials title be acquired.  Found in HOL option.
"^DD",680,680,10.7,"DT")
2970714
"^DD",680,680,10.8,0)
SUBSCRIPTION PERIOD^NJ4,1^^10;8^K:+X'=X!(X>10)!(X<.1)!(X?.E1"."2N.N) X
"^DD",680,680,10.8,3)
Enter the length of this subscription period (up to 10 years).  Decimals are permitted, for example an 18 month subscription = 1.5.
"^DD",680,680,10.8,21,0)
^^3^3^2940519^
"^DD",680,680,10.8,21,1,0)
This field is for the length of the subscription period;
"^DD",680,680,10.8,21,2,0)
decimals can be used to indicate a fraction of a year.
"^DD",680,680,10.8,21,3,0)
Found in HOL option.
"^DD",680,680,10.8,"DT")
2870925
"^DD",680,680,12.3,0)
CHECK-IN NOTES^680.14^^16;0
"^DD",680,680,12.3,21,0)
^^2^2^2940519^
"^DD",680,680,12.3,21,1,0)
This field is a word-processing field to allow specific
"^DD",680,680,12.3,21,2,0)
notes concerning the check-in of a title to be entered.
"^DD",680,680,13,0)
BINDING DATE^680.08D^^13;0
"^DD",680,680,13,21,0)
^^1^1^2940825^
"^DD",680,680,13,21,1,0)
Each serial may have a binding date.
"^DD",680,680,14,0)
RENEWAL NOTES^680.014^^17;0
"^DD",680,680,14,21,0)
^^1^1^2940825^
"^DD",680,680,14,21,1,0)
Enter notes concerning the renewal of a subscription in this field.
"^DD",680,680,15,0)
ZTOTAL^CJ8,2^^ ; ^X ^DD(680,15,9.2) S X=Y(680,15,1)*$P(Y(680,15,2),U,3)/100*$P(Y(680,15,2),U,5),Y=X,X=Y(680,15,3),X=X+Y S X=$J(X,0,2)
"^DD",680,680,15,9)
^
"^DD",680,680,15,9.01)
680^8.5;680^8.3;680^7.1
"^DD",680,680,15,9.1)
(COPIES ORDERED*UNIT COST)+((COPIES ORDERED*UNIT COST)/100*SERVICE CHARGE)
"^DD",680,680,15,9.2)
X $P(^DD(680,7.1,0),U,5,99) S Y(680,15,1)=X S Y(680,15,2)=$S($D(^LBRY(680,D0,8)):^(8),1:"") S X=Y(680,15,1)*$P(Y(680,15,2),U,3),Y(680,15,3)=X,Y(680,15,4)=X
"^DD",680,680,15,"DT")
2951019
"^DD",680,680.01,0)
CATEGORY SUB-FIELD^NL^.01^1
"^DD",680,680.01,0,"DIK")
LBRYX1
"^DD",680,680.01,0,"DT")
2940526
"^DD",680,680.01,0,"IX","B",680.01,.01)

"^DD",680,680.01,0,"NM","CATEGORY")

"^DD",680,680.01,0,"UP")
680
"^DD",680,680.01,.01,0)
CATEGORY^MS^G:GENERAL;A:ADMINISTRATIVE;M:MEDICAL;R:RESEARCH;P:PATIENT HEALTH EDUCATION;^0;1^Q
"^DD",680,680.01,.01,1,0)
^.1
"^DD",680,680.01,.01,1,1,0)
680.01^B
"^DD",680,680.01,.01,1,1,1)
S ^LBRY(680,DA(1),4,"B",$E(X,1,30),DA)=""
"^DD",680,680.01,.01,1,1,2)
K ^LBRY(680,DA(1),4,"B",$E(X,1,30),DA)
"^DD",680,680.01,.01,1,1,"DT")
2951003
"^DD",680,680.01,.01,3)
This Category designation is used to sort information for various reports.  More than one category may be selected.
"^DD",680,680.01,.01,21,0)
^^3^3^2940825^^
"^DD",680,680.01,.01,21,1,0)
The statistics VA libraries are required to keep require
"^DD",680,680.01,.01,21,2,0)
that serials subscriptions be categorized in the 5
"^DD",680,680.01,.01,21,3,0)
categories listed.  Found in HOL option.
"^DD",680,680.01,.01,"DT")
2951003
"^DD",680,680.014,0)
RENEWAL NOTES SUB-FIELD^^.01^1
"^DD",680,680.014,0,"DT")
2940323
"^DD",680,680.014,0,"NM","RENEWAL NOTES")

"^DD",680,680.014,0,"UP")
680
"^DD",680,680.014,.01,0)
RENEWAL NOTES^W^^0;1^Q
"^DD",680,680.014,.01,3)
Enter information concerning RENEWAL status.
"^DD",680,680.014,.01,21,0)
^^2^2^2940825^^
"^DD",680,680.014,.01,21,1,0)
This field is a word-processing field where more information
"^DD",680,680.014,.01,21,2,0)
about renewal of a serials title can be input.
"^DD",680,680.014,.01,"DT")
2940323
"^DD",680,680.02,0)
UNION LIST CODE SUB-FIELD^NL^.01^1
"^DD",680,680.02,0,"NM","UNION LIST CODE")

"^DD",680,680.02,0,"UP")
680
"^DD",680,680.02,.01,0)
UNION LIST CODE^MS^C:CORE;H:HOR;U:UNIQUE;V:VA ULP;L:LOCAL CONSORTIA ULP;S:STATE;R:RML ULP;O:OTHER ULP;^0;1^Q
"^DD",680,680.02,.01,3)
Select a code to designate which union list this title appears on.  More than one code may be entered.
"^DD",680,680.02,.01,21,0)
^^3^3^2940519^
"^DD",680,680.02,.01,21,1,0)
This field contains a set of codes to allow the indication
"^DD",680,680.02,.01,21,2,0)
of which union list authorities are recipients of the
"^DD",680,680.02,.01,21,3,0)
holdings of a particular library.  Found in HOL option.
"^DD",680,680.03,0)
SUBJECT SUB-FIELD^^.02^2
"^DD",680,680.03,0,"DIK")
LBRYX1
"^DD",680,680.03,0,"IX","B",680.03,.01)

"^DD",680,680.03,0,"NM","SUBJECT")

"^DD",680,680.03,0,"UP")
680
"^DD",680,680.03,.01,0)
SUBJECT^MP680.3'^LBRY(680.3,^0;1^Q
"^DD",680,680.03,.01,1,0)
^.1^^-1
"^DD",680,680.03,.01,1,1,0)
680.03^B
"^DD",680,680.03,.01,1,1,1)
S ^LBRY(680,DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",680,680.03,.01,1,1,2)
K ^LBRY(680,DA(1),3,"B",$E(X,1,30),DA)
"^DD",680,680.03,.01,1,1,"%D",0)
^^1^1^2950725^
"^DD",680,680.03,.01,1,1,"%D",1,0)
Regular FileMan "B" cross-reference
"^DD",680,680.03,.01,1,3,0)
680^C
"^DD",680,680.03,.01,1,3,1)
S ^LBRY(680,"C",$E(X,1,30),DA(1),DA)=""
"^DD",680,680.03,.01,1,3,2)
K ^LBRY(680,"C",$E(X,1,30),DA(1),DA)
"^DD",680,680.03,.01,1,3,"%D",0)
^^1^1^2950725^
"^DD",680,680.03,.01,1,3,"%D",1,0)
Cross-reference entire file by subject.
"^DD",680,680.03,.01,3)
The decision to assign subject headings is made at the local library level.  Some reports will not print without an entry here.
"^DD",680,680.03,.01,4)

"^DD",680,680.03,.01,21,0)
^^4^4^2951012^^^
"^DD",680,680.03,.01,21,1,0)
Subject headings should be assigned to serials titles so that
"^DD",680,680.03,.01,21,2,0)
subscriptions can be sorted into subject lists and categories.
"^DD",680,680.03,.01,21,3,0)
A serials title can have more than one subject heading assigned
"^DD",680,680.03,.01,21,4,0)
to it.  Found in HOL option.
"^DD",680,680.03,.01,"DT")
2950725
"^DD",680,680.03,.02,0)
CHANGED DATE^D^^0;2^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",680,680.03,.02,3)
Enter the date the SUBJECT was entered.
"^DD",680,680.03,.02,21,0)
^^1^1^2950809^
"^DD",680,680.03,.02,21,1,0)
This is the date that the subject was edited for this serial.
"^DD",680,680.04,0)
GAPS SUB-FIELD^^.01^1
"^DD",680,680.04,0,"NM","GAPS")

"^DD",680,680.04,0,"UP")
680
"^DD",680,680.04,.01,0)
GAPS^WL^^0;1^Q
"^DD",680,680.04,.01,3)
Missing volumes and issues for this title may be listed here.
"^DD",680,680.04,.01,4)
I X="??" S XQH="LBRY GAPS ??" D EN^XQH
"^DD",680,680.04,.01,21,0)
^^5^5^2940519^
"^DD",680,680.04,.01,21,1,0)
This is a word-processing field where missing and/or
"^DD",680,680.04,.01,21,2,0)
sought issues and/or volumes may be listed.  There is
"^DD",680,680.04,.01,21,3,0)
a gaps report which prints this field; this report can
"^DD",680,680.04,.01,21,4,0)
be used to acquire items from surplus lists.  Found in
"^DD",680,680.04,.01,21,5,0)
HOL option.
"^DD",680,680.04,.01,"DT")
2870911
"^DD",680,680.05,0)
DETAILED HOLDING SUB-FIELD^^.01^1
"^DD",680,680.05,0,"NM","DETAILED HOLDING")

"^DD",680,680.05,0,"UP")
680
"^DD",680,680.05,.01,0)
DETAILED HOLDING^WL^^0;1^Q
"^DD",680,680.05,.01,3)
Enter an issue-specific holdings statement for this title.  Enter ?? for    more help.
"^DD",680,680.05,.01,4)
I X="??" S XQH="LBRY DETAILED ??" D EN^XQH
"^DD",680,680.05,.01,21,0)
^^3^3^2940519^
"^DD",680,680.05,.01,21,1,0)
This is a word-processing option field which allows
"^DD",680,680.05,.01,21,2,0)
the input of long, issue-specific holdings statements.
"^DD",680,680.05,.01,21,3,0)
Found in HOL option.
"^DD",680,680.05,.01,"DT")
2870917
"^DD",680,680.08,0)
BINDING DATE SUB-FIELD^NL^2^11
"^DD",680,680.08,0,"NM","BINDING DATE")

"^DD",680,680.08,0,"UP")
680
"^DD",680,680.08,.01,0)
BINDING DATE^MD^^0;1^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",680,680.08,.01,21,0)
^^2^2^2940825^^
"^DD",680,680.08,.01,21,1,0)
This field appears to allow the multiple input of dates
"^DD",680,680.08,.01,21,2,0)
when specific volumes are sent to the bindery.
"^DD",680,680.08,.02,0)
BINDING COLOR^F^^0;2^K:$L(X)>10!($L(X)<1) X
"^DD",680,680.08,.02,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",680,680.08,.02,21,0)
^^2^2^2940519^
"^DD",680,680.08,.02,21,1,0)
This field is a set of codes to identify the binding color
"^DD",680,680.08,.02,21,2,0)
for a specific title.
"^DD",680,680.08,.03,0)
PRINT COLOR^F^^0;3^K:$L(X)>10!($L(X)<1) X
"^DD",680,680.08,.03,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",680,680.08,.03,21,0)
^^2^2^2940519^
"^DD",680,680.08,.03,21,1,0)
This field is for an entry to identify the lettering
"^DD",680,680.08,.03,21,2,0)
color for a specific title.
"^DD",680,680.08,.04,0)
BINDING SEQUENCE^F^^0;4^K:$L(X)>15!($L(X)<1) X
"^DD",680,680.08,.04,3)
ANSWER MUST BE 1-15 CHARACTERS IN LENGTH
"^DD",680,680.08,.04,21,0)
^^1^1^2950809^
"^DD",680,680.08,.04,21,1,0)
THIS FIELD IS NOT IN USE
"^DD",680,680.08,.05,0)
SUPPLEMENTS^S^Y:YES;N:NO;^0;5^Q
"^DD",680,680.08,.05,21,0)
^^3^3^2940519^
"^DD",680,680.08,.05,21,1,0)
This field is a set of codes to indicate whether or not
"^DD",680,680.08,.05,21,2,0)
supplements are being bound into a regular volume for
"^DD",680,680.08,.05,21,3,0)
this title.
"^DD",680,680.08,.06,0)
INDEX^S^Y:YES;N:NO;^0;6^Q
"^DD",680,680.08,.06,21,0)
^^2^2^2940519^
"^DD",680,680.08,.06,21,1,0)
This field is a set of codes to indicate whether or not
"^DD",680,680.08,.06,21,2,0)
an index is being bound into a regular volume for this title.
"^DD",680,680.08,.07,0)
TABLE OF CONTENTS^S^Y:YES;N:NO;^0;7^Q
"^DD",680,680.08,.07,21,0)
^^3^3^2940519^
"^DD",680,680.08,.07,21,1,0)
This field is a set of codes to indicate whether or not
"^DD",680,680.08,.07,21,2,0)
a separate table of contents is being bound into a 
"^DD",680,680.08,.07,21,3,0)
regular volume for this title.
"^DD",680,680.08,.08,0)
EXPECTED RETURN DATE^D^^0;8^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",680,680.08,.08,21,0)
^^2^2^2940519^
"^DD",680,680.08,.08,21,1,0)
This field is to indicate the date that a volume of
"^DD",680,680.08,.08,21,2,0)
binding is expected back from the bindery.
"^DD",680,680.08,.09,0)
DATE RETURNED^D^^0;9^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",680,680.08,.09,21,0)
^^2^2^2940519^
"^DD",680,680.08,.09,21,1,0)
This field is to indicate the actual return date of a
"^DD",680,680.08,.09,21,2,0)
volume of binding for this serials title.
"^DD",680,680.08,.09,"DT")
2860117
"^DD",680,680.08,1,0)
VOLUME # SENT^680.09^^1;0
"^DD",680,680.08,1,21,0)
^^2^2^2940519^
"^DD",680,680.08,1,21,1,0)
This is a multiple field to list all the volume 
"^DD",680,680.08,1,21,2,0)
numbers sent in a binding order.
"^DD",680,680.08,2,0)
BINDING NOTE^680.11^^2;0
"^DD",680,680.08,2,21,0)
^^2^2^2940519^
"^DD",680,680.08,2,21,1,0)
This is a word-processing field to allow input about
"^DD",680,680.08,2,21,2,0)
miscellaneous notes concerning the binding process.
"^DD",680,680.09,0)
VOLUME # SENT SUB-FIELD^NL^.01^1
"^DD",680,680.09,0,"NM","VOLUME # SENT")

"^DD",680,680.09,0,"UP")
680.08
"^DD",680,680.09,.01,0)
VOLUME # SENT^MF^^0;1^K:$L(X)>10!($L(X)<1) X
"^DD",680,680.09,.01,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",680,680.09,.01,21,0)
^^2^2^2940519^
"^DD",680,680.09,.01,21,1,0)
This is a multiple field to list all the volume 
"^DD",680,680.09,.01,21,2,0)
numbers sent in a binding order.
"^DD",680,680.11,0)
BINDING NOTE SUB-FIELD^NL^.01^1
"^DD",680,680.11,0,"NM","BINDING NOTE")

"^DD",680,680.11,0,"UP")
680.08
"^DD",680,680.11,.01,0)
BINDING NOTE^W^^0;1^Q
"^DD",680,680.11,.01,21,0)
^^2^2^2940519^
"^DD",680,680.11,.01,21,1,0)
This is a word-processing field to allow input about
"^DD",680,680.11,.01,21,2,0)
miscellaneous notes concerning the binding process.
"^DD",680,680.12,0)
REMARKS SUB-FIELD^^.01^1
"^DD",680,680.12,0,"NM","REMARKS")

"^DD",680,680.12,0,"UP")
680
"^DD",680,680.12,.01,0)
REMARKS^WL^^0;1^Q
"^DD",680,680.12,.01,3)
Use for See or See Also references, temporary binding notes or other useful information.
"^DD",680,680.12,.01,21,0)
^^3^3^2940519^^^^
"^DD",680,680.12,.01,21,1,0)
This field should contain your SEE references, See Also references, title
"^DD",680,680.12,.01,21,2,0)
changes--whatever you want printed under your title (besides holdings)
"^DD",680,680.12,.01,21,3,0)
when you run a printed holdings list.
"^DD",680,680.12,.01,"DT")
2870320
"^DD",680,680.14,0)
CHECK-IN NOTES SUB-FIELD^^.01^1
"^DD",680,680.14,0,"NM","CHECK-IN NOTES")

"^DD",680,680.14,0,"UP")
680
"^DD",680,680.14,.01,0)
CHECK-IN NOTES^WL^^0;1^Q
"^DD",680,680.14,.01,3)
May be used for special processing information, such as notes on apparent   printing errors in journal issue dates or numbering.
"^DD",680,680.14,.01,21,0)
^^2^2^2940519^
"^DD",680,680.14,.01,21,1,0)
This field is a word-processing field to allow specific
"^DD",680,680.14,.01,21,2,0)
notes concerning the check-in of a title to be entered.
"^DD",680,680.14,.01,"DT")
2870910
"^DD",680.4,680.4,0)
FIELD^^1^9
"^DD",680.4,680.4,0,"DDA")
N
"^DD",680.4,680.4,0,"DT")
2970409
"^DD",680.4,680.4,0,"ID",.02)
W ""
"^DD",680.4,680.4,0,"ID","WRITE")
W ?40,$S($D(^DIC(49,+$P(^(0),U,2),0))#2:$P(^(0),U,8),1:""),@("$E("_DIC_"Y,0),0)")
"^DD",680.4,680.4,0,"IX","B",680.4,.01)

"^DD",680.4,680.4,0,"NM","NAME")

"^DD",680.4,680.4,0,"PT",680,10.7)

"^DD",680.4,680.4,0,"PT",681,1.7)

"^DD",680.4,680.4,0,"PT",681.02,.01)

"^DD",680.4,680.4,0,"VRPK")
LBR
"^DD",680.4,680.4,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",680.4,680.4,.01,1,0)
^.1
"^DD",680.4,680.4,.01,1,1,0)
680.4^B
"^DD",680.4,680.4,.01,1,1,1)
S ^LBRY(680.4,"B",$E(X,1,30),DA)=""
"^DD",680.4,680.4,.01,1,1,2)
K ^LBRY(680.4,"B",$E(X,1,30),DA)
"^DD",680.4,680.4,.01,3)
Enter an individual, last name first, a service name or a ward. (1-30 characters).
"^DD",680.4,680.4,.01,4)
I X="??" S XQH="LBRY NAME ??" D EN^XQH
"^DD",680.4,680.4,.01,21,0)
^^6^6^2940519^
"^DD",680.4,680.4,.01,21,1,0)
This field allows the input of names in the local Serials
"^DD",680.4,680.4,.01,21,2,0)
Module which are used as donors (CSE option), routing
"^DD",680.4,680.4,.01,21,3,0)
recipients (CSE option), or person who request the purchase
"^DD",680.4,680.4,.01,21,4,0)
of a serials title (REQUESTORS in HOL option).  Names do not
"^DD",680.4,680.4,.01,21,5,0)
have to be established first in the Name File before use;
"^DD",680.4,680.4,.01,21,6,0)
they can be established as needed in the other options.
"^DD",680.4,680.4,.01,"DT")
2970314
"^DD",680.4,680.4,.02,0)
SERVICE^P49'^DIC(49,^0;2^Q
"^DD",680.4,680.4,.02,3)
Select a Service name from the list in the Service/Section File.
"^DD",680.4,680.4,.02,21,0)
^^7^7^2970710^^^^
"^DD",680.4,680.4,.02,21,1,0)
 
"^DD",680.4,680.4,.02,21,2,0)
 
"^DD",680.4,680.4,.02,21,3,0)
Please select a V.A. Hospital Service location.  The MAIL STOP
"^DD",680.4,680.4,.02,21,4,0)
associated with the service will be used on Routing Slips.
"^DD",680.4,680.4,.02,21,5,0)
 
"^DD",680.4,680.4,.02,21,6,0)
If your "Service" isn't in the Hospital Service File please
"^DD",680.4,680.4,.02,21,7,0)
request a change from appropriate IRM personnel.
"^DD",680.4,680.4,.02,"DT")
2871230
"^DD",680.4,680.4,.03,0)
ADDRESS 1^F^^0;3^K:$L(X)>30!($L(X)<1) X
"^DD",680.4,680.4,.03,3)
Enter street address (one line, max 30 characters long).
"^DD",680.4,680.4,.03,21,0)
^^2^2^2940519^
"^DD",680.4,680.4,.03,21,1,0)
This field allows the input of a street address for a person
"^DD",680.4,680.4,.03,21,2,0)
in the Name File.
"^DD",680.4,680.4,.04,0)
ADDRESS 2^F^^0;4^K:$L(X)>30!($L(X)<1) X
"^DD",680.4,680.4,.04,3)
Enter P.O. BOX (one line, max 30 characters long).
"^DD",680.4,680.4,.04,21,0)
^^2^2^2940519^
"^DD",680.4,680.4,.04,21,1,0)
This field allows the input of additional street address
"^DD",680.4,680.4,.04,21,2,0)
for a person in the Name File.
"^DD",680.4,680.4,.05,0)
CITY^F^^0;5^K:$L(X)>30!($L(X)<1) X
"^DD",680.4,680.4,.05,3)
Enter city name (max 30 characters long).
"^DD",680.4,680.4,.05,21,0)
^^2^2^2940519^
"^DD",680.4,680.4,.05,21,1,0)
This field allows the input of a city for a person in
"^DD",680.4,680.4,.05,21,2,0)
the Name File.
"^DD",680.4,680.4,.06,0)
STATE^P5'^DIC(5,^0;6^Q
"^DD",680.4,680.4,.06,3)
Select the state to go with the address.
"^DD",680.4,680.4,.06,21,0)
^^2^2^2940519^
"^DD",680.4,680.4,.06,21,1,0)
This field allows the input of a state for a person in
"^DD",680.4,680.4,.06,21,2,0)
the Name File.
"^DD",680.4,680.4,.07,0)
ZIP^F^^0;7^K:$L(X)>10!($L(X)<5)!'(X?5N!(X?5N1"-"4N)) X
"^DD",680.4,680.4,.07,3)
Enter a 5 digit zip code or 9 digit with dash.
"^DD",680.4,680.4,.07,21,0)
^^2^2^2940519^
"^DD",680.4,680.4,.07,21,1,0)
This field allows the input of a zip code for a person
"^DD",680.4,680.4,.07,21,2,0)
in the Name File.
"^DD",680.4,680.4,.07,"DT")
2950725
"^DD",680.4,680.4,.08,0)
PHONE^F^^0;8^K:$L(X)>20!($L(X)<1) X
"^DD",680.4,680.4,.08,3)
Enter phone number including AREA CODE (up to 20 characters long).
"^DD",680.4,680.4,.08,21,0)
^^2^2^2940519^
"^DD",680.4,680.4,.08,21,1,0)
This field allows the input of a phone number for a
"^DD",680.4,680.4,.08,21,2,0)
person in the Name File.
"^DD",680.4,680.4,1,0)
SITE NAME^P680.6'^LBRY(680.6,^0;9^Q
"^DD",680.4,680.4,1,3)
Enter the correct site
"^DD",680.4,680.4,1,21,0)
^^1^1^2970314^^
"^DD",680.4,680.4,1,21,1,0)
Divisional site identification
"^DD",680.4,680.4,1,"DT")
2970409
"^DD",680.5,680.5,0)
FIELD^^18^21
"^DD",680.5,680.5,0,"DDA")
N
"^DD",680.5,680.5,0,"DIK")
LBRYX5
"^DD",680.5,680.5,0,"DIKOLD")
LBRYX5
"^DD",680.5,680.5,0,"DT")
2930601
"^DD",680.5,680.5,0,"ID","WRITE")
I $L($P(^(0),U,1))>30 W !,?5,$P(^(0),U,1)
"^DD",680.5,680.5,0,"IX","B",680.5,.01)

"^DD",680.5,680.5,0,"IX","C",680.5,.01)

"^DD",680.5,680.5,0,"IX","D",680.5,10)

"^DD",680.5,680.5,0,"IX","E",680.5,7)

"^DD",680.5,680.5,0,"IX","F",680.5,11)

"^DD",680.5,680.5,0,"IX","H",680.5,1)

"^DD",680.5,680.5,0,"NM","TITLE AUTHORITY")

"^DD",680.5,680.5,0,"PT",680,.01)

"^DD",680.5,680.5,0,"PT",680.5,8)

"^DD",680.5,680.5,0,"PT",680.5,9)

"^DD",680.5,680.5,.01,0)
TITLE^RFX^^0;1^K:X[""""!($A(X)=45) X I $D(X) D IT1^LBRYET3
"^DD",680.5,680.5,.01,1,0)
^.1
"^DD",680.5,680.5,.01,1,1,0)
680.5^B
"^DD",680.5,680.5,.01,1,1,1)
S ^LBRY(680.5,"B",$E(X,1,30),DA)=""
"^DD",680.5,680.5,.01,1,1,2)
K ^LBRY(680.5,"B",$E(X,1,30),DA)
"^DD",680.5,680.5,.01,1,1,"%D",0)
^^1^1^2970905^
"^DD",680.5,680.5,.01,1,1,"%D",1,0)
This is the regular "B" cross-reference for titles.
"^DD",680.5,680.5,.01,1,1,"DT")
2970905
"^DD",680.5,680.5,.01,1,2,0)
680.5^C^KWIC
"^DD",680.5,680.5,.01,1,2,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I,I'="AMERICAN",I'="AMERICA",I'="JOURNAL" S ^LBRY(680.5,"C",I,DA)=""
"^DD",680.5,680.5,.01,1,2,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^LBRY(680.5,"C",I,DA)
"^DD",680.5,680.5,.01,1,2,"%D",0)
^^1^1^2950725^
"^DD",680.5,680.5,.01,1,2,"%D",1,0)
Regular 'Key Word' FileMan cross-reference for journal titles.
"^DD",680.5,680.5,.01,3)
Enter the NLM Title (up to 160 characters).
"^DD",680.5,680.5,.01,4)
I X="??" S XQH="LBRY GENERIC HELP PROMPT" D EN^XQH
"^DD",680.5,680.5,.01,21,0)
^^9^9^2940519^
"^DD",680.5,680.5,.01,21,1,0)
The title is the full title of a specific serial publication.  Such
"^DD",680.5,680.5,.01,21,2,0)
titles can be extremely long and the initial words in two different
"^DD",680.5,680.5,.01,21,3,0)
titles can be exactly the same for a considerable length, for example:
"^DD",680.5,680.5,.01,21,4,0)
   SCANDINAVIAN JOURNAL OF PATHOLOGY AND LABORATORY MEDICINE
"^DD",680.5,680.5,.01,21,5,0)
   SCANDINAVIAN JOURNAL OF PATHOLOGY AND LABORATORY MEDICINE.
"^DD",680.5,680.5,.01,21,6,0)
SUPPLEMENTUM
"^DD",680.5,680.5,.01,21,7,0)
Since exact alphabetization of these titles is very important in the
"^DD",680.5,680.5,.01,21,8,0)
serials process, it is crucial that the field length be long enough
"^DD",680.5,680.5,.01,21,9,0)
to accommodate all possibilities.
"^DD",680.5,680.5,.01,"AUDIT")
n
"^DD",680.5,680.5,.01,"DT")
2970905
"^DD",680.5,680.5,.02,0)
LOCAL SERIALS^SIX^1:ACTIVE LOCAL SERIALS;2:INACTIVE LOCAL SERIALS;^0;2^Q
"^DD",680.5,680.5,.02,9)
^
"^DD",680.5,680.5,.02,21,0)
^^11^11^2950814^^^
"^DD",680.5,680.5,.02,21,1,0)
If a title is 'active', meaning no value has been input for
"^DD",680.5,680.5,.02,21,2,0)
this field, that title is available for the full range of
"^DD",680.5,680.5,.02,21,3,0)
options, including all the Serials Control Option functions.
"^DD",680.5,680.5,.02,21,4,0)
If it is rendered 'inactive' by one of the codes, it is no
"^DD",680.5,680.5,.02,21,5,0)
longer available for any of the SErials Control Option functions
"^DD",680.5,680.5,.02,21,6,0)
and Copy Specific Edit, but can still be used in Holdings 
"^DD",680.5,680.5,.02,21,7,0)
options.  If it is inactive, it indicates that the library will
"^DD",680.5,680.5,.02,21,8,0)
not be receiving any more current issues, but will be keeping its
"^DD",680.5,680.5,.02,21,9,0)
retrospective holdings.  Should the title need to be reactivated,
"^DD",680.5,680.5,.02,21,10,0)
the value in the INACTIVE field can be deleted.  Found in
"^DD",680.5,680.5,.02,21,11,0)
LTS option.
"^DD",680.5,680.5,.02,"DT")
2890112
"^DD",680.5,680.5,.03,0)
PREDICTION PATTERN^P680.9'^LBRY(680.9,^0;3^Q
"^DD",680.5,680.5,.03,21,0)
^^13^13^2940519^
"^DD",680.5,680.5,.03,21,1,0)
This field provides for the prediction pattern which has been
"^DD",680.5,680.5,.03,21,2,0)
assigned in the National Library Files Maintenance option on
"^DD",680.5,680.5,.03,21,3,0)
FORUM for a serials title which is still being published.  No
"^DD",680.5,680.5,.03,21,4,0)
local input in the local Serials Module is allowed for this
"^DD",680.5,680.5,.03,21,5,0)
field.  If there is no value in this field, there is no
"^DD",680.5,680.5,.03,21,6,0)
prediction pattern for this title, and thus there will be no
"^DD",680.5,680.5,.03,21,7,0)
automatic prediction of the next expected issue in the CHE
"^DD",680.5,680.5,.03,21,8,0)
option on the local module.  Certain issuing patterns by
"^DD",680.5,680.5,.03,21,9,0)
publishers do not lend themselves to the establishment of a
"^DD",680.5,680.5,.03,21,10,0)
prediction pattern, most notably those quarterly publications
"^DD",680.5,680.5,.03,21,11,0)
which are labeled with seasonal designations such as spring,
"^DD",680.5,680.5,.03,21,12,0)
winter, etc.  In order for a prediction pattern to be created,
"^DD",680.5,680.5,.03,21,13,0)
the serials title must be dated in a MM/YY or MM/DD/YY format.
"^DD",680.5,680.5,.03,"DT")
2880119
"^DD",680.5,680.5,.04,0)
FREQUENCY^P680.2'^LBRY(680.2,^0;4^Q
"^DD",680.5,680.5,.04,21,0)
^^9^9^2940519^
"^DD",680.5,680.5,.04,21,1,0)
This field provides for the frequency of issue which has
"^DD",680.5,680.5,.04,21,2,0)
been assigned in the National Library Files Maintenance
"^DD",680.5,680.5,.04,21,3,0)
option on FORUM.  No local input in the local Serials Module
"^DD",680.5,680.5,.04,21,4,0)
is allowed for this field.  Every serials title may have a
"^DD",680.5,680.5,.04,21,5,0)
frequency assigned; however, not every serials title may
"^DD",680.5,680.5,.04,21,6,0)
have a prediction pattern.  If no prediction pattern can
"^DD",680.5,680.5,.04,21,7,0)
be assigned, the frequency field may have the following type
"^DD",680.5,680.5,.04,21,8,0)
of value:  QUARTERLY, NO PREDICT. PATTERN.  Old serials which
"^DD",680.5,680.5,.04,21,9,0)
are no longer published may not have a frequency entered.
"^DD",680.5,680.5,.04,"DT")
2880119
"^DD",680.5,680.5,.05,0)
PORTION^RSX^N:NATIONAL;L:LOCAL;^0;5^Q
"^DD",680.5,680.5,.05,21,0)
^^4^4^2940519^
"^DD",680.5,680.5,.05,21,1,0)
This field indicates whether the title has been downloaded
"^DD",680.5,680.5,.05,21,2,0)
from the National Library Files Maintenance option on FORUM
"^DD",680.5,680.5,.05,21,3,0)
or has been locally created.  The data in this field is
"^DD",680.5,680.5,.05,21,4,0)
automatically created and cannot be changed locally.
"^DD",680.5,680.5,.05,"DT")
2880422
"^DD",680.5,680.5,1,0)
SERLINE UNIQUE IDENTIFIER^FX^^3;1^D TCN^LBRYFINP
"^DD",680.5,680.5,1,1,0)
^.1
"^DD",680.5,680.5,1,1,1,0)
680.5^H
"^DD",680.5,680.5,1,1,1,1)
S ^LBRY(680.5,"H",$E(X,1,30),DA)=""
"^DD",680.5,680.5,1,1,1,2)
K ^LBRY(680.5,"H",$E(X,1,30),DA)
"^DD",680.5,680.5,1,1,1,"%D",0)
^^3^3^2950814^^^
"^DD",680.5,680.5,1,1,1,"%D",1,0)
This cross reference lets users look up serials by an identifier
"^DD",680.5,680.5,1,1,1,"%D",2,0)
that comes from SERLINE at the National Library of Medicine so that
"^DD",680.5,680.5,1,1,1,"%D",3,0)
librarians can use DOCLINE.
"^DD",680.5,680.5,1,1,1,"DT")
2941012
"^DD",680.5,680.5,1,3)
Enter National Library of Medicine (NLM) number (1 LETTER & 8 DIGITS).
"^DD",680.5,680.5,1,21,0)
^^6^6^2940519^
"^DD",680.5,680.5,1,21,1,0)
This field allows for the input of the 9 character SERLINE
"^DD",680.5,680.5,1,21,2,0)
number which is assigned to each title in the National
"^DD",680.5,680.5,1,21,3,0)
Library of Medicine SERHOLD database.  Not every serials title
"^DD",680.5,680.5,1,21,4,0)
in the Serials Module will have a SERLINE number, particularly
"^DD",680.5,680.5,1,21,5,0)
non-medical titles.  Titles without a SERLINE number will not
"^DD",680.5,680.5,1,21,6,0)
be report to SERHOLD.
"^DD",680.5,680.5,1,"DT")
2941012
"^DD",680.5,680.5,2,0)
PUBLISHER^P680.1X^LBRY(680.1,^3;2^Q
"^DD",680.5,680.5,2,3)
Select the publisher of the journal as found on the title page.  If this is a new publisher not in the Publisher List, leave the field blank.
"^DD",680.5,680.5,2,21,0)
^^2^2^2940519^
"^DD",680.5,680.5,2,21,1,0)
This field allows for the input of the name of a publisher
"^DD",680.5,680.5,2,21,2,0)
for a serials title.
"^DD",680.5,680.5,2,"DT")
2870804
"^DD",680.5,680.5,3,0)
INDEXED^680.53PA^^1;0
"^DD",680.5,680.5,3,21,0)
^^1^1^2940825^
"^DD",680.5,680.5,3,21,1,0)
How is the serial indexed ?
"^DD",680.5,680.5,4,0)
GENERAL NOTES^680.54^^2;0
"^DD",680.5,680.5,4,21,0)
^^4^4^2940519^
"^DD",680.5,680.5,4,21,1,0)
This word-processing field allows for notes to be entered
"^DD",680.5,680.5,4,21,2,0)
concerning the bibliographic history of this serials title,
"^DD",680.5,680.5,4,21,3,0)
including former names, names it is continued by, alternative
"^DD",680.5,680.5,4,21,4,0)
names it may be known by, changes in publishing history, etc.
"^DD",680.5,680.5,5,0)
FIRST ISSUE^FX^^3;3^K:$L(X)>45!($L(X)<3) X
"^DD",680.5,680.5,5,3)
Issue and year of FIRST ISSUE (historical) 3-45 characters (e.g. 1N1,MAR/APR 1975 or 1N,1972).
"^DD",680.5,680.5,5,21,0)
^^5^5^2940519^
"^DD",680.5,680.5,5,21,1,0)
This field is for the input of the first volume and issue
"^DD",680.5,680.5,5,21,2,0)
number and issue date, historically, used when this specific
"^DD",680.5,680.5,5,21,3,0)
serials title was first published under this name.  These
"^DD",680.5,680.5,5,21,4,0)
volume and issue numbers and issue dates are not necessarily
"^DD",680.5,680.5,5,21,5,0)
the same as holdings statements.
"^DD",680.5,680.5,5,"DT")
2870804
"^DD",680.5,680.5,6,0)
LAST ISSUE^FX^^3;4^K:$L(X)>30!($L(X)<3) X
"^DD",680.5,680.5,6,3)
Issue and year of LAST ISSUE (historical) 3-30 characters (e.g. 120N/1995).
"^DD",680.5,680.5,6,21,0)
^^5^5^2940519^
"^DD",680.5,680.5,6,21,1,0)
This field is for the input of the last volume and issue
"^DD",680.5,680.5,6,21,2,0)
number and issue date, historically, used when this specific
"^DD",680.5,680.5,6,21,3,0)
serials title was last published under this name.  These volume
"^DD",680.5,680.5,6,21,4,0)
and issue numbers and issue dates are not necessarily the same
"^DD",680.5,680.5,6,21,5,0)
as holdings statements.
"^DD",680.5,680.5,6,"DT")
2870804
"^DD",680.5,680.5,7,0)
ISSN/ISBN^FX^^3;5^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>20!($L(X)<5) X
"^DD",680.5,680.5,7,1,0)
^.1
"^DD",680.5,680.5,7,1,1,0)
680.5^E
"^DD",680.5,680.5,7,1,1,1)
S ^LBRY(680.5,"E",$E(X,1,30),DA)=""
"^DD",680.5,680.5,7,1,1,2)
K ^LBRY(680.5,"E",$E(X,1,30),DA)
"^DD",680.5,680.5,7,1,1,"%D",0)
^^2^2^2950725^
"^DD",680.5,680.5,7,1,1,"%D",1,0)
Regular FileMan "E" cross-reference of the serials number which
"^DD",680.5,680.5,7,1,1,"%D",2,0)
is used in look-up.
"^DD",680.5,680.5,7,3)
Enter ISSN or ISBN (20 characters max). 
"^DD",680.5,680.5,7,21,0)
^^3^3^2940519^
"^DD",680.5,680.5,7,21,1,0)
This field is for the International Standard Serials Number
"^DD",680.5,680.5,7,21,2,0)
or the International Standard Book Number for the specific
"^DD",680.5,680.5,7,21,3,0)
serials title.
"^DD",680.5,680.5,7,"DT")
2880113
"^DD",680.5,680.5,8,0)
FORMERLY^P680.5X'^LBRY(680.5,^3;6^Q
"^DD",680.5,680.5,8,3)
Select the TITLE name that changed to this name
"^DD",680.5,680.5,8,4)
I X="??" S XQH="LBRY GENERIC HELP PROMPT" D EN^XQH
"^DD",680.5,680.5,8,21,0)
^^2^2^2940519^
"^DD",680.5,680.5,8,21,1,0)
This field is for the complete serials title which was the
"^DD",680.5,680.5,8,21,2,0)
immediate predecessor to this specific serials title.
"^DD",680.5,680.5,8,"DT")
2870904
"^DD",680.5,680.5,9,0)
CONTINUED BY^P680.5X'^LBRY(680.5,^3;7^Q
"^DD",680.5,680.5,9,.1)

"^DD",680.5,680.5,9,3)
Select the TITLE name that this title became
"^DD",680.5,680.5,9,4)
I X="??" S XQH="LBRY GENERIC HELP PROMPT" D EN^XQH
"^DD",680.5,680.5,9,21,0)
^^2^2^2940519^
"^DD",680.5,680.5,9,21,1,0)
This field is for the complete serials title which is
"^DD",680.5,680.5,9,21,2,0)
the immediate successor to this specific serials title.
"^DD",680.5,680.5,9,"DT")
2870904
"^DD",680.5,680.5,10,0)
NLM TITLE ABBREVIATION^F^^3;8^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>50!($L(X)<1) X
"^DD",680.5,680.5,10,1,0)
^.1
"^DD",680.5,680.5,10,1,1,0)
680.5^D
"^DD",680.5,680.5,10,1,1,1)
S ^LBRY(680.5,"D",$E(X,1,30),DA)=""
"^DD",680.5,680.5,10,1,1,2)
K ^LBRY(680.5,"D",$E(X,1,30),DA)
"^DD",680.5,680.5,10,1,1,"%D",0)
^^2^2^2950725^
"^DD",680.5,680.5,10,1,1,"%D",1,0)
Regular FileMan "D" cross-reference of the Title Abbreviation which
"^DD",680.5,680.5,10,1,1,"%D",2,0)
is used in look-up.
"^DD",680.5,680.5,10,3)
Enter the NLM Title Abbreviation for this title 1-50 characters.
"^DD",680.5,680.5,10,4)
I X="??" S XQH="LBRY NLM HELP ??" D EN^XQH
"^DD",680.5,680.5,10,21,0)
^^3^3^2940519^
"^DD",680.5,680.5,10,21,1,0)
This field is for a title abbreviation either assigned by the
"^DD",680.5,680.5,10,21,2,0)
National Library of Medicine or created following their
"^DD",680.5,680.5,10,21,3,0)
abbreviation format.
"^DD",680.5,680.5,10,"DT")
2870916
"^DD",680.5,680.5,11,0)
SYNONYM^F^^0;6^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>45!($L(X)<1) X
"^DD",680.5,680.5,11,1,0)
^.1
"^DD",680.5,680.5,11,1,1,0)
680.5^F
"^DD",680.5,680.5,11,1,1,1)
S ^LBRY(680.5,"F",$E(X,1,30),DA)=""
"^DD",680.5,680.5,11,1,1,2)
K ^LBRY(680.5,"F",$E(X,1,30),DA)
"^DD",680.5,680.5,11,1,1,"%D",0)
^^2^2^2950725^
"^DD",680.5,680.5,11,1,1,"%D",1,0)
Regular FileMan "F" cross-reference of the synonym which is used
"^DD",680.5,680.5,11,1,1,"%D",2,0)
in look-up.
"^DD",680.5,680.5,11,3)
Enter the short name normally used for this title.
"^DD",680.5,680.5,11,21,0)
^^6^6^2940519^
"^DD",680.5,680.5,11,21,1,0)
This field is for the input of a synonym, alternative name, or
"^DD",680.5,680.5,11,21,2,0)
acronym commonly used for this serials title.  For instance,
"^DD",680.5,680.5,11,21,3,0)
the New England Journal of Medicine is often called: NEJM.  This
"^DD",680.5,680.5,11,21,4,0)
field is not the same as the NLM TITLE ABBREVIATION.  If an
"^DD",680.5,680.5,11,21,5,0)
acronym is the official title of the serial, then the spelled-
"^DD",680.5,680.5,11,21,6,0)
out version of the title would be entered in this field.
"^DD",680.5,680.5,11,"DT")
2880607
"^DD",680.5,680.5,12,0)
SOURCE^F^^4;2^K:$L(X)>100!($L(X)<1) X
"^DD",680.5,680.5,12,3)
ANSWER MUST BE 1-100 CHARACTERS IN LENGTH
"^DD",680.5,680.5,12,21,0)
^^5^5^2940519^
"^DD",680.5,680.5,12,21,1,0)
This field is for the name of the authority used to establish
"^DD",680.5,680.5,12,21,2,0)
the bibliographic information for this serials title record.
"^DD",680.5,680.5,12,21,3,0)
Preferred sources are SERLINE, Ulrich's, OCLC, etc.  and as a
"^DD",680.5,680.5,12,21,4,0)
last resort, the item itself.  This field is found only in the
"^DD",680.5,680.5,12,21,5,0)
TAF file on FORUM, not on the local Serials Module.
"^DD",680.5,680.5,12,"DT")
2880822
"^DD",680.5,680.5,13,0)
EDITOR^P200'X^VA(200,^4;3^Q
"^DD",680.5,680.5,13,21,0)
^^2^2^2970718^^
"^DD",680.5,680.5,13,21,1,0)
This field identifies which employee last edited the TAF
"^DD",680.5,680.5,13,21,2,0)
file for this serials title record on FORUM.
"^DD",680.5,680.5,13,"DT")
2930601
"^DD",680.5,680.5,14,0)
DATE UPDATED ANY^D^^4;4^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",680.5,680.5,14,21,0)
^^2^2^2970718^^
"^DD",680.5,680.5,14,21,1,0)
This field identifies the date on which a employee last
"^DD",680.5,680.5,14,21,2,0)
edit the TAF file for this serials title record on FORUM.
"^DD",680.5,680.5,14,"DT")
2880822
"^DD",680.5,680.5,17,0)
CURRENT SUBSCRIPTION PRICE^NJ7,2^^3;9^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999)!(X<0) X
"^DD",680.5,680.5,17,3)
Type a Dollar Amount between 0 and 9999, 2 Decimal Digits
"^DD",680.5,680.5,17,21,0)
^^2^2^2940823^^
"^DD",680.5,680.5,17,21,1,0)
This field allows the input of the current subscription
"^DD",680.5,680.5,17,21,2,0)
price for this serials title.
"^DD",680.5,680.5,17,"DT")
2900629
"^DD",680.5,680.5,18,0)
COUNTRY OF PUBLICATION^P681.1'^LBRY(681.1,^3;10^Q
"^DD",680.5,680.5,18,21,0)
^^2^2^2940719^^
"^DD",680.5,680.5,18,21,1,0)
This field allows the input of the country in which
"^DD",680.5,680.5,18,21,2,0)
this serials title is published.
"^DD",680.5,680.5,18,"DT")
2900629
"^DD",680.5,680.53,0)
INDEXED SUB-FIELD^^.01^1
"^DD",680.5,680.53,0,"DIK")
LBRYX5
"^DD",680.5,680.53,0,"IX","B",680.53,.01)

"^DD",680.5,680.53,0,"NM","INDEXED")

"^DD",680.5,680.53,0,"UP")
680.5
"^DD",680.5,680.53,.01,0)
INDEXED^MP680.8'^LBRY(680.8,^0;1^Q
"^DD",680.5,680.53,.01,1,0)
^.1
"^DD",680.5,680.53,.01,1,1,0)
680.53^B
"^DD",680.5,680.53,.01,1,1,1)
S ^LBRY(680.5,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",680.5,680.53,.01,1,1,2)
K ^LBRY(680.5,DA(1),1,"B",$E(X,1,30),DA)
"^DD",680.5,680.53,.01,3)
Enter indexing sources for this title.
"^DD",680.5,680.53,.01,21,0)
^^2^2^2940519^
"^DD",680.5,680.53,.01,21,1,0)
This field allows for the multiple input of the sources
"^DD",680.5,680.53,.01,21,2,0)
in which the serials title is indexed or abstracted.
"^DD",680.5,680.53,.01,"DT")
2871210
"^DD",680.5,680.54,0)
GENERAL NOTES SUB-FIELD^^.01^1
"^DD",680.5,680.54,0,"NM","GENERAL NOTES")

"^DD",680.5,680.54,0,"UP")
680.5
"^DD",680.5,680.54,.01,0)
GENERAL NOTES^WX^^0;1^Q
"^DD",680.5,680.54,.01,3)
Enter the bibliographic history of this title here.  Enter the data in the format you would like it to be printed out in the reports.
"^DD",680.5,680.54,.01,21,0)
^^4^4^2940519^
"^DD",680.5,680.54,.01,21,1,0)
This word-processing field allows for notes to be entered
"^DD",680.5,680.54,.01,21,2,0)
concerning the bibliographic history of this serials title,
"^DD",680.5,680.54,.01,21,3,0)
including former names, names it is continued by, alternative
"^DD",680.5,680.54,.01,21,4,0)
names it may be known by, changes in publishing history, etc.
"^DD",680.5,680.54,.01,"DT")
2870804
"^DD",680.6,680.6,0)
FIELD^^.08^8
"^DD",680.6,680.6,0,"DDA")
N
"^DD",680.6,680.6,0,"DT")
2951012
"^DD",680.6,680.6,0,"ID","WRITE")
W ?35,$P(^(0),U,7)
"^DD",680.6,680.6,0,"IX","B",680.6,.01)

"^DD",680.6,680.6,0,"IX","C",680.6,.07)

"^DD",680.6,680.6,0,"NM","LIBRARY PARAMETERS")

"^DD",680.6,680.6,0,"PT",680,.04)

"^DD",680.6,680.6,0,"PT",680.4,1)

"^DD",680.6,680.6,0,"PT",680.7,.02)

"^DD",680.6,680.6,0,"PT",681,.04)

"^DD",680.6,680.6,0,"PT",682,.04)

"^DD",680.6,680.6,.01,0)
SITE NAME^RFX^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X I $D(X) S X=$$UP^XLFSTR(X)
"^DD",680.6,680.6,.01,1,0)
^.1
"^DD",680.6,680.6,.01,1,1,0)
680.6^B
"^DD",680.6,680.6,.01,1,1,1)
S ^LBRY(680.6,"B",$E(X,1,30),DA)=""
"^DD",680.6,680.6,.01,1,1,2)
K ^LBRY(680.6,"B",$E(X,1,30),DA)
"^DD",680.6,680.6,.01,1,1,"%D",0)
^^1^1^2950725^
"^DD",680.6,680.6,.01,1,1,"%D",1,0)
Regular FileMan "B" cross-reference.
"^DD",680.6,680.6,.01,3)
Enter the name/code for the library location.
"^DD",680.6,680.6,.01,21,0)
^^4^4^2961227^^
"^DD",680.6,680.6,.01,21,1,0)
This field is to name the library in terms of a specific
"^DD",680.6,680.6,.01,21,2,0)
name, building number, facility name, etc.  For example,
"^DD",680.6,680.6,.01,21,3,0)
names could be: Holt Library, Bedford Library, Bldg. 205
"^DD",680.6,680.6,.01,21,4,0)
Library.
"^DD",680.6,680.6,.01,"DT")
2951012
"^DD",680.6,680.6,.02,0)
DEFAULT VENDOR^FX^^0;2^S DIC="^PRC(440,",DIC(0)="EQZ" D ^DIC K:Y<0 X Q:Y<0  S X=$S($D(Y(0)):$P(Y(0),U,1),1:"") K:X="" X K DIC
"^DD",680.6,680.6,.02,3)
Choose the vendor to be prompted in the disposition vendor entry.
"^DD",680.6,680.6,.02,4)
S ZD=D,X="?",DIC="^PRC(440,",DIC(0)="EQ" D ^DIC S D=ZD K DIC,ZD
"^DD",680.6,680.6,.02,21,0)
^^6^6^2940824^^^
"^DD",680.6,680.6,.02,21,1,0)
This field is to input the name of vendor which is used
"^DD",680.6,680.6,.02,21,2,0)
for the majority of the current subscriptions.  The value
"^DD",680.6,680.6,.02,21,3,0)
input here will be the name of the vendor which pops up
"^DD",680.6,680.6,.02,21,4,0)
as the default for the VENDOR field in the CSE option.  This
"^DD",680.6,680.6,.02,21,5,0)
field points to the station's vendor file;  therefore values
"^DD",680.6,680.6,.02,21,6,0)
to be used here must already be in the vendor file.
"^DD",680.6,680.6,.02,"DT")
2870518
"^DD",680.6,680.6,.03,0)
ROUTING SLIP PRINTER^FX^^0;3^D EN1^LBRYASK
"^DD",680.6,680.6,.03,3)
Choose the printer nearest to this site.
"^DD",680.6,680.6,.03,4)
D EN2^LBRYASK
"^DD",680.6,680.6,.03,21,0)
^^7^7^2940824^^
"^DD",680.6,680.6,.03,21,1,0)
This field allows for the input of the local facility name
"^DD",680.6,680.6,.03,21,2,0)
or identifying code or number for the separately ported printer
"^DD",680.6,680.6,.03,21,3,0)
which will be used to generate the routing slips at the time of
"^DD",680.6,680.6,.03,21,4,0)
check-in.  If no printer is assigned here, then routing slips
"^DD",680.6,680.6,.03,21,5,0)
will print to the screen and will have to be captured to a
"^DD",680.6,680.6,.03,21,6,0)
slaved printer.  This will slow down the check-in process
"^DD",680.6,680.6,.03,21,7,0)
considerably.
"^DD",680.6,680.6,.03,"DT")
2870512
"^DD",680.6,680.6,.04,0)
DIVISION^P4'^DIC(4,^0;4^Q
"^DD",680.6,680.6,.04,3)
Please choose a DIVISION for this location.
"^DD",680.6,680.6,.04,21,0)
^^6^6^2940520^
"^DD",680.6,680.6,.04,21,1,0)
This field is to allow input of a division name in the case of
"^DD",680.6,680.6,.04,21,2,0)
two-division facilities.  While the field is present in the
"^DD",680.6,680.6,.04,21,3,0)
current version of the Serials Module, it does not activate any
"^DD",680.6,680.6,.04,21,4,0)
features to allow two different divisions operating from the same
"^DD",680.6,680.6,.04,21,5,0)
DHCP system to use the local Serials Module in a differential
"^DD",680.6,680.6,.04,21,6,0)
manner.
"^DD",680.6,680.6,.04,"DT")
2870326
"^DD",680.6,680.6,.05,0)
AUTOMATIC QUEUING^RS^Y:YES;N:NO;^0;5^Q
"^DD",680.6,680.6,.05,3)
Enter 'Y' if you want your ROUTING SLIPS queued without asking.
"^DD",680.6,680.6,.05,21,0)
^^6^6^2940520^
"^DD",680.6,680.6,.05,21,1,0)
This field is a set of codes to enable automatic queueing of
"^DD",680.6,680.6,.05,21,2,0)
the routing slips during the check-in process to the ROUTING
"^DD",680.6,680.6,.05,21,3,0)
SLIP PRINTER identified above.  This question must be answered
"^DD",680.6,680.6,.05,21,4,0)
yes and a ROUTING SLIP PRINTER identified to generate routing
"^DD",680.6,680.6,.05,21,5,0)
slips automatically.  Otherwise, routing slips will print to
"^DD",680.6,680.6,.05,21,6,0)
the screen and must be captured to a slaved printer.
"^DD",680.6,680.6,.05,"DT")
2880411
"^DD",680.6,680.6,.06,0)
MULTI-DIVISION SITE^S^Y:YES;N:NO;^0;6^Q
"^DD",680.6,680.6,.06,3)
Enter YES if this is a Multi-Division Site.
"^DD",680.6,680.6,.06,21,0)
^^2^2^2940520^
"^DD",680.6,680.6,.06,21,1,0)
This field is a set of codes that, if answered yes, triggers
"^DD",680.6,680.6,.06,21,2,0)
the field called either DIVISION or DIVISION SITE NAME.
"^DD",680.6,680.6,.06,"DT")
2880411
"^DD",680.6,680.6,.07,0)
DIVISION SITE NAME^RFX^^0;7^K:$L(X)>5!($L(X)<5) X I $D(X) S X=$$UP^XLFSTR(X)
"^DD",680.6,680.6,.07,1,0)
^.1
"^DD",680.6,680.6,.07,1,1,0)
680.6^C
"^DD",680.6,680.6,.07,1,1,1)
S ^LBRY(680.6,"C",$E(X,1,30),DA)=""
"^DD",680.6,680.6,.07,1,1,2)
K ^LBRY(680.6,"C",$E(X,1,30),DA)
"^DD",680.6,680.6,.07,1,1,"%D",0)
^^2^2^2960410^
"^DD",680.6,680.6,.07,1,1,"%D",1,0)
This cross reference is the 5 letter code used to identify
"^DD",680.6,680.6,.07,1,1,"%D",2,0)
the library stations on FORUM.
"^DD",680.6,680.6,.07,1,1,"DT")
2960410
"^DD",680.6,680.6,.07,3)
Enter this site's 5-letter identification (2 letter State Code plus 3 letter ID).
"^DD",680.6,680.6,.07,21,0)
^^1^1^2960410^^^^
"^DD",680.6,680.6,.07,21,1,0)
Enter the 5-letter site identification used on FORUM.
"^DD",680.6,680.6,.07,"DT")
2960410
"^DD",680.6,680.6,.08,0)
MAIL SYMBOL^F^^0;8^K:$L(X)>10!($L(X)<2) X
"^DD",680.6,680.6,.08,3)
Enter the library mail routing symbol
"^DD",680.6,680.6,.08,21,0)
^^2^2^2950913^
"^DD",680.6,680.6,.08,21,1,0)
This is the particular mail room routing symbol for a particular
"^DD",680.6,680.6,.08,21,2,0)
site.  It has been 142D in the past.
"^DD",680.6,680.6,.08,"DT")
2950913
"^DD",680.7,680.7,0)
FIELD^^.02^2
"^DD",680.7,680.7,0,"DT")
2970409
"^DD",680.7,680.7,0,"IX","B",680.7,.01)

"^DD",680.7,680.7,0,"NM","LBRY ITEM PLACEMENT LOCATION")

"^DD",680.7,680.7,0,"PT",680,1.1)

"^DD",680.7,680.7,0,"PT",681,1.1)

"^DD",680.7,680.7,.01,0)
NAME^RF^^0;1^K:$L(X)>35!($L(X)<1) X
"^DD",680.7,680.7,.01,1,0)
^.1
"^DD",680.7,680.7,.01,1,1,0)
680.7^B
"^DD",680.7,680.7,.01,1,1,1)
S ^LBRY(680.7,"B",$E(X,1,30),DA)=""
"^DD",680.7,680.7,.01,1,1,2)
K ^LBRY(680.7,"B",$E(X,1,30),DA)
"^DD",680.7,680.7,.01,1,1,"%D",0)
^^1^1^2950725^
"^DD",680.7,680.7,.01,1,1,"%D",1,0)
Regular FileMan "B" cross-reference
"^DD",680.7,680.7,.01,3)
Enter location (up to 35 characters) where each journal (including 'Administrative' ones) will be kept after check-in.
"^DD",680.7,680.7,.01,4)

"^DD",680.7,680.7,.01,21,0)
^^6^6^2940520^^^^
"^DD",680.7,680.7,.01,21,1,0)
Enter up to 15 characters to describe where this issue is kept/identified.
"^DD",680.7,680.7,.01,21,2,0)
Some examples are: Med Lib
"^DD",680.7,680.7,.01,21,3,0)
                   Bldg 245
"^DD",680.7,680.7,.01,21,4,0)
                   Room 213
"^DD",680.7,680.7,.01,21,5,0)
                   Workroom
"^DD",680.7,680.7,.01,21,6,0)
                   Red (some libraries use color coding)
"^DD",680.7,680.7,.01,23,0)
^^6^6^2940520^
"^DD",680.7,680.7,.01,23,1,0)
This field provides the names of all the locations where serials
"^DD",680.7,680.7,.01,23,2,0)
titles may be stored after routing is finished.  Location names
"^DD",680.7,680.7,.01,23,3,0)
would include appropriate library branch names as well as names
"^DD",680.7,680.7,.01,23,4,0)
of Services for administrative subscriptions.  These locations
"^DD",680.7,680.7,.01,23,5,0)
must be named in this file before they can be used in either the
"^DD",680.7,680.7,.01,23,6,0)
HOL option or the CSE option of the local Serials Module.
"^DD",680.7,680.7,.01,"DT")
2970314
"^DD",680.7,680.7,.02,0)
SITE NAME^P680.6'^LBRY(680.6,^0;2^Q
"^DD",680.7,680.7,.02,3)
Enter appropriate site name
"^DD",680.7,680.7,.02,21,0)
^^1^1^2950829^
"^DD",680.7,680.7,.02,21,1,0)
This field is used to identify the appropriate division.
"^DD",680.7,680.7,.02,"DT")
2970409
"^DD",681,681,0)
FIELD^^3^14
"^DD",681,681,0,"DIK")
LBRYX2
"^DD",681,681,0,"DIKOLD")
LBRYX2
"^DD",681,681,0,"DT")
2980415
"^DD",681,681,0,"ID",1)
W:$D(^(1)) ?12,"COPY #: ",$P(^(1),U,1)
"^DD",681,681,0,"ID",1.9)
W:$D(^(1)) ?26,"START DATE: ",$E($P(^(1),U,10),4,5)_"-"_$E($P(^(1),U,10),6,7)_"-"_$E($P(^(1),U,10),2,3)
"^DD",681,681,0,"ID",1.95)
W:$D(^(1)) ?49,"STOP DATE: ",$E($P(^(1),U,11),4,5)_"-"_$E($P(^(1),U,11),6,7)_"-"_$E($P(^(1),U,11),2,3)
"^DD",681,681,0,"IX","AC",681,1)

"^DD",681,681,0,"IX","AC1",681,.02)

"^DD",681,681,0,"IX","AD",681,1.4)

"^DD",681,681,0,"IX","B",681,.01)

"^DD",681,681,0,"IX","C",681,.02)

"^DD",681,681,0,"IX","D",681.02,.01)

"^DD",681,681,0,"IX","E",681,.04)

"^DD",681,681,0,"NM","LBRY DISPOSITION")

"^DD",681,681,0,"PT",682.04,.02)

"^DD",681,681,.01,0)
NUMBER^RNJ9,0^^0;1^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",681,681,.01,1,0)
^.1^^-1
"^DD",681,681,.01,1,1,0)
681^B
"^DD",681,681,.01,1,1,1)
S ^LBRY(681,"B",$E(X,1,30),DA)=""
"^DD",681,681,.01,1,1,2)
K ^LBRY(681,"B",$E(X,1,30),DA)
"^DD",681,681,.01,3)

"^DD",681,681,.01,21,0)
^^2^2^2940520^
"^DD",681,681,.01,21,1,0)
This field is a unique transaction number for copy of a
"^DD",681,681,.01,21,2,0)
serials title.
"^DD",681,681,.01,"DT")
2870901
"^DD",681,681,.02,0)
LOCAL SERIALS TITLE^RP680^LBRY(680,^0;2^Q
"^DD",681,681,.02,1,0)
^.1
"^DD",681,681,.02,1,1,0)
681^C
"^DD",681,681,.02,1,1,1)
S ^LBRY(681,"C",$E(X,1,30),DA)=""
"^DD",681,681,.02,1,1,2)
K ^LBRY(681,"C",$E(X,1,30),DA)
"^DD",681,681,.02,1,2,0)
681^AC1^MUMPS
"^DD",681,681,.02,1,2,1)
S:$P($G(^LBRY(681,DA,1)),U)'="" ^LBRY(681,"AC",$E(X,1,30),$P(^LBRY(681,DA,1),U),DA)=""
"^DD",681,681,.02,1,2,2)
K:$P($G(^LBRY(681,DA,1)),U)'="" ^LBRY(681,"AC",$E(X,1,30),$P(^LBRY(681,DA,1),U),DA)
"^DD",681,681,.02,1,2,"%D",0)
^^2^2^2980415^^^^
"^DD",681,681,.02,1,2,"%D",1,0)
This cross-reference is the parallel cross-reference for "AC" which
"^DD",681,681,.02,1,2,"%D",2,0)
is by local serial title entry number and copy number or ToC.
"^DD",681,681,.02,1,2,"DT")
2980414
"^DD",681,681,.02,21,0)
^^2^2^2980415^^^
"^DD",681,681,.02,21,1,0)
This field points to the serials title that the local library
"^DD",681,681,.02,21,2,0)
has in its collection.
"^DD",681,681,.02,"DT")
2980415
"^DD",681,681,.04,0)
SITE NAME^RP680.6'^LBRY(680.6,^0;4^Q
"^DD",681,681,.04,1,0)
^.1
"^DD",681,681,.04,1,1,0)
681^E
"^DD",681,681,.04,1,1,1)
S ^LBRY(681,"E",$E(X,1,30),DA)=""
"^DD",681,681,.04,1,1,2)
K ^LBRY(681,"E",$E(X,1,30),DA)
"^DD",681,681,.04,1,1,"%D",0)
^^1^1^2950828^
"^DD",681,681,.04,1,1,"%D",1,0)
This cross-reference is to be used to screen out by site.
"^DD",681,681,.04,1,1,"DT")
2950828
"^DD",681,681,.04,3)
Select correct division site name
"^DD",681,681,.04,21,0)
^^1^1^2980415^^
"^DD",681,681,.04,21,1,0)
Division site identification
"^DD",681,681,.04,"DT")
2950828
"^DD",681,681,1,0)
COPY NUMBER OR ToC^FX^^1;1^K:X[""""!($A(X)=45)!'((X?1N.N)!("TOCToCtoc"[X)) X I $D(X) S:'X X="ToC" I X D ^LBRYET2
"^DD",681,681,1,1,0)
^.1^^-1
"^DD",681,681,1,1,1,0)
681^AC^MUMPS
"^DD",681,681,1,1,1,1)
S:$P($G(^LBRY(681,DA,0)),U,2)'="" ^LBRY(681,"AC",$P(^LBRY(681,DA,0),U,2),$E(X,1,30),DA)=""
"^DD",681,681,1,1,1,2)
K:$P($G(^LBRY(681,DA,0)),U,2)'="" ^LBRY(681,"AC",$P(^LBRY(681,DA,0),U,2),$E(X,1,30),DA)
"^DD",681,681,1,1,1,"%D",0)
^^2^2^2980415^^^^
"^DD",681,681,1,1,1,"%D",1,0)
This cross-reference is by the journal title, the copy number or
"^DD",681,681,1,1,1,"%D",2,0)
ToC and the internal number.
"^DD",681,681,1,1,1,"DT")
2980415
"^DD",681,681,1,3)
Enter the copy number for the specific copy or 'T' (Table of Contents) for which disposition information is being supplied.
"^DD",681,681,1,4)
I X="??" D E7^LBRYET2
"^DD",681,681,1,21,0)
^^5^5^2940520^
"^DD",681,681,1,21,1,0)
This field allows the selection of a specific copy number
"^DD",681,681,1,21,2,0)
for a serials title or for the selection of the Table of
"^DD",681,681,1,21,3,0)
Contents designation.  The Table of Contents designation
"^DD",681,681,1,21,4,0)
means that the table of contents of a serials title is
"^DD",681,681,1,21,5,0)
copied and routed to a particular requestor.  Found in CSE option.
"^DD",681,681,1,"DT")
2980415
"^DD",681,681,1.1,0)
PLACEMENT OF ITEM^*P680.7'^LBRY(680.7,^1;2^S DIC("S")="I $P(^(0),U,2)=$G(LBRYPTR)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",681,681,1.1,3)
Indicate where the journal will be located once it is checked-in.
"^DD",681,681,1.1,12)
Screen out entries by site
"^DD",681,681,1.1,12.1)
S DIC("S")="I $P(^(0),U,2)=$G(LBRYPTR)"
"^DD",681,681,1.1,21,0)
^^4^4^2950829^^^
"^DD",681,681,1.1,21,1,0)
This field allows a specific final placement location to
"^DD",681,681,1.1,21,2,0)
be designated for each copy of a serials title.  Locations
"^DD",681,681,1.1,21,3,0)
must have been pre-entered in file 680.7.  Found in the
"^DD",681,681,1.1,21,4,0)
CSE option.
"^DD",681,681,1.1,"DT")
2970714
"^DD",681,681,1.3,0)
CATEGORY OF COPY^S^M:MEDICAL;G:GENERAL;R:RESEARCH;A:ADMINISTRATIVE;P:PATIENT HEALTH EDUCATION;^1;4^Q
"^DD",681,681,1.3,3)
The Category designation is used to sort information for various reports.  Select from the following categories:
"^DD",681,681,1.3,21,0)
^^3^3^2940520^
"^DD",681,681,1.3,21,1,0)
This field is a set of codes which categorize each copy of
"^DD",681,681,1.3,21,2,0)
all serials titles according to five categories which are
"^DD",681,681,1.3,21,3,0)
required for Central Office reports.  Found in CSE option.
"^DD",681,681,1.4,0)
VENDOR^FX^^1;5^S DIC="^PRC(440,",DIC(0)="EQZ" D ^DIC K:Y<1 X Q:Y<1  S X=$S($D(Y(0)):$P(Y(0),U,1),1:"") K:X="" X K DIC
"^DD",681,681,1.4,1,0)
^.1
"^DD",681,681,1.4,1,1,0)
681^AD
"^DD",681,681,1.4,1,1,1)
S ^LBRY(681,"AD",$E(X,1,30),DA)=""
"^DD",681,681,1.4,1,1,2)
K ^LBRY(681,"AD",$E(X,1,30),DA)
"^DD",681,681,1.4,1,1,"DT")
2951012
"^DD",681,681,1.4,3)
Enter the vendor from whom the specific copy was ordered.
"^DD",681,681,1.4,4)
S ZD=D,X="?",DIC="^PRC(440,",DIC(0)="EQ" D ^DIC S D=ZD K DIC,ZD
"^DD",681,681,1.4,21,0)
^^4^4^2940809^^
"^DD",681,681,1.4,21,1,0)
This field allows the input of a vendor for each copy of
"^DD",681,681,1.4,21,2,0)
a serials title.  The field defaults to the vendor entered
"^DD",681,681,1.4,21,3,0)
in the LSP option, but may be overridden with another vendor
"^DD",681,681,1.4,21,4,0)
found in the station Vendor File.  Found in CSE option.
"^DD",681,681,1.4,"DT")
2951012
"^DD",681,681,1.5,0)
COPY DISPOSITION^S^1:ROUTED;2:ROUTED AND RETURNED;3:SHELVED;^1;6^Q
"^DD",681,681,1.5,3)
Enter the disposition of this copy when it is checked-in.
"^DD",681,681,1.5,21,0)
^^5^5^2940824^^
"^DD",681,681,1.5,21,1,0)
This field allows for a set of codes to indicate the
"^DD",681,681,1.5,21,2,0)
disposition of a specific serials title during the
"^DD",681,681,1.5,21,3,0)
check-in process, for example, to be shelved, to be
"^DD",681,681,1.5,21,4,0)
routed (and not returned), or to be routed and returned.
"^DD",681,681,1.5,21,5,0)
Found in CSE option.
"^DD",681,681,1.6,0)
GIFT^S^y:YES;^1;7^Q
"^DD",681,681,1.6,3)
Is this copy a gift?  Answer 'yes' or give no response by entering <CR>. Delete (@) if no longer a gift.
"^DD",681,681,1.6,21,0)
^^4^4^2940520^
"^DD",681,681,1.6,21,1,0)
If a copy is acquired as a gift, not as a paid subscription,
"^DD",681,681,1.6,21,2,0)
a set of codes allows that information to be input here.  If
"^DD",681,681,1.6,21,3,0)
answered yes, the next prompt will be for DONOR; the prompt
"^DD",681,681,1.6,21,4,0)
for VENDOR will be omitted.  Found in CSE option.
"^DD",681,681,1.7,0)
DONOR^*P680.4'^LBRY(680.4,^1;8^S DIC("S")="I $P(^(0),U,9)=$G(LBRYPTR)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",681,681,1.7,3)
Enter the name of the person who donated this gift.
"^DD",681,681,1.7,4)

"^DD",681,681,1.7,12)
Screen entries by site for multiple division stations
"^DD",681,681,1.7,12.1)
S DIC("S")="I $P(^(0),U,9)=$G(LBRYPTR)"
"^DD",681,681,1.7,21,0)
^^3^3^2970519^^
"^DD",681,681,1.7,21,1,0)
If the field for GIFT has been answered yes, the name of the
"^DD",681,681,1.7,21,2,0)
DONOR may be entered here if known.  Entries here will also
"^DD",681,681,1.7,21,3,0)
be made in the Name File.  Found in CSE option.
"^DD",681,681,1.7,"DT")
2970714
"^DD",681,681,1.9,0)
START DATE^DX^^1;10^S %DT="EX" D ^%DT S X=Y K:Y<1 X I $D(X) S %=$P(^LBRY(681,DA,1),U,11) I %,X'<% K X W:'$D(X) !,"START DATE must be before STOP DATE.",!,?10
"^DD",681,681,1.9,3)
Enter the actual calendar date that additional copy(ies) is/are expected to begin being received in the library.
"^DD",681,681,1.9,21,0)
^^6^6^2940520^
"^DD",681,681,1.9,21,1,0)
When additional copies are entered at some point after
"^DD",681,681,1.9,21,2,0)
the initial setup of the title, this field should be used
"^DD",681,681,1.9,21,3,0)
to enter the actual calendar date one day before the issue
"^DD",681,681,1.9,21,4,0)
date of the first expected issue.  This field governs when
"^DD",681,681,1.9,21,5,0)
the additional copy will appear on the screen in the CHE
"^DD",681,681,1.9,21,6,0)
option.  Found in CSE option.
"^DD",681,681,1.9,"DT")
2880331
"^DD",681,681,1.95,0)
STOP DATE^DX^^1;11^S %DT="EX" D ^%DT S X=Y K:Y<1 X I $D(X) S %=$P(^LBRY(681,DA,1),U,10) I %,X'>% K X W:'$D(X) !,"STOP DATE must be after START DATE.",!,?10
"^DD",681,681,1.95,3)
Enter the journal issue date on which the copy will no longer be received.  The STOP DATE must be at least 1 day after this copy's START DATE.
"^DD",681,681,1.95,21,0)
^^6^6^2940520^
"^DD",681,681,1.95,21,1,0)
When copies (other than the last remaining one) are terminated
"^DD",681,681,1.95,21,2,0)
at some point after the initial setup of the title, this field 
"^DD",681,681,1.95,21,3,0)
should be used to enter the actual calendar date one day after
"^DD",681,681,1.95,21,4,0)
the issue date of the last expected issue.  This field governs
"^DD",681,681,1.95,21,5,0)
when the additional copy will no longer appear on the screen in
"^DD",681,681,1.95,21,6,0)
the CHE option.  Found in CSE option.
"^DD",681,681,1.95,"DT")
2880331
"^DD",681,681,2,0)
RECIPIENT(S)^681.02IPA^^2;0
"^DD",681,681,2,21,0)
^^2^2^2970519^^^
"^DD",681,681,2,21,1,0)
This is the list of recipients who might have a copy or Table
"^DD",681,681,2,21,2,0)
of Contents routed to them after check-in.
"^DD",681,681,3,0)
AUTHOR^P200'^VA(200,^1;3^Q
"^DD",681,681,3,3)

"^DD",681,681,3,21,0)
^^2^2^2970709^^^^
"^DD",681,681,3,21,1,0)
The person who created this copy number or ToC.  This is a stuffed field,
"^DD",681,681,3,21,2,0)
it's value is determined by the creator of the 1 entry.
"^DD",681,681,3,"DT")
2930601
"^DD",681,681.02,0)
RECIPIENT(S) SUB-FIELD^^1^2
"^DD",681,681.02,0,"DIK")
LBRYX2
"^DD",681,681.02,0,"DT")
2970714
"^DD",681,681.02,0,"ID",1)
W ?30,$P(^LBRY(681,D0,2,+Y,0),U,2)
"^DD",681,681.02,0,"IX","AC",681.02,1)

"^DD",681,681.02,0,"IX","B",681.02,.01)

"^DD",681,681.02,0,"NM","RECIPIENT(S)")

"^DD",681,681.02,0,"UP")
681
"^DD",681,681.02,.01,0)
TO ROUTE TO^M*P680.4'^LBRY(680.4,^0;1^S DIC("S")="I $P(^(0),U,9)=$G(LBRYPTR)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",681,681.02,.01,1,0)
^.1
"^DD",681,681.02,.01,1,1,0)
681.02^B
"^DD",681,681.02,.01,1,1,1)
S ^LBRY(681,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",681,681.02,.01,1,1,2)
K ^LBRY(681,DA(1),2,"B",$E(X,1,30),DA)
"^DD",681,681.02,.01,1,2,0)
681^D
"^DD",681,681.02,.01,1,2,1)
S ^LBRY(681,"D",$E(X,1,30),DA(1),DA)=""
"^DD",681,681.02,.01,1,2,2)
K ^LBRY(681,"D",$E(X,1,30),DA(1),DA)
"^DD",681,681.02,.01,3)
Choose who will be on the list to see this ISSUE/ToC.
"^DD",681,681.02,.01,4)

"^DD",681,681.02,.01,12)
Screen only those entries for a site
"^DD",681,681.02,.01,12.1)
S DIC("S")="I $P(^(0),U,9)=$G(LBRYPTR)"
"^DD",681,681.02,.01,21,0)
^^6^6^2970519^^^
"^DD",681,681.02,.01,21,1,0)
This field is for the names of the persons to whom copies of
"^DD",681,681.02,.01,21,2,0)
issues or table of contents pages will be routed.  It is a
"^DD",681,681.02,.01,21,3,0)
multiple field.  This field governs the printing of the
"^DD",681,681.02,.01,21,4,0)
routing slips during the check-in process.  Recipients names
"^DD",681,681.02,.01,21,5,0)
are also tied to their Service/Section and mail delivery code.
"^DD",681,681.02,.01,21,6,0)
Entries made here are from the Name File.  Found in CSE option.
"^DD",681,681.02,.01,"DT")
2970714
"^DD",681,681.02,1,0)
ROUTING ORDER^NJ5,2^^0;2^K:+X'=X!(X>99.99)!(X<.01)!(X?.E1"."3N.N) X
"^DD",681,681.02,1,1,0)
^.1
"^DD",681,681.02,1,1,1,0)
681.02^AC
"^DD",681,681.02,1,1,1,1)
S ^LBRY(681,DA(1),2,"AC",$E(X,1,30),DA)=""
"^DD",681,681.02,1,1,1,2)
K ^LBRY(681,DA(1),2,"AC",$E(X,1,30),DA)
"^DD",681,681.02,1,3)
Assign a number to establish the ROUTING ORDER of recipients for this title.  Use whole numbers or decimals.  Enter ?? for more help.
"^DD",681,681.02,1,4)
I X="??" S XQH="LBRY ROUTING HELP ??" D EN^XQH
"^DD",681,681.02,1,21,0)
^^4^4^2940520^
"^DD",681,681.02,1,21,1,0)
This field allows the names on the routing slips to be printed
"^DD",681,681.02,1,21,2,0)
in a designated order.  Later additions to a routing list can
"^DD",681,681.02,1,21,3,0)
be inserted in the midst of a routing order by use of decimal
"^DD",681,681.02,1,21,4,0)
places.  Found in CSE option.
"^DD",681,681.02,1,"DT")
2871229
"^DD",682,682,0)
FIELD^^4^13
"^DD",682,682,0,"DDA")
N
"^DD",682,682,0,"DIK")
LBRYX3
"^DD",682,682,0,"DIKOLD")
LBRYX3
"^DD",682,682,0,"DT")
2980415
"^DD",682,682,0,"ID",.02)
S %I=Y,Y=$S('$D(^(0)):"",$D(^LBRY(680,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(680,.01,0),U,2) D Y^DIQ:Y]"" W ?7,"TITLE: ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",682,682,0,"ID",1)
W:$D(^(1)) ?30,"JOURNAL DATE: ",$E($P(^(1),U,1),4,5)_"-"_$E($P(^(1),U,1),6,7)_"-"_$E($P(^(1),U,1),2,3)
"^DD",682,682,0,"IX","A1",682,1)

"^DD",682,682,0,"IX","A11",682,.02)

"^DD",682,682,0,"IX","A2",682.04,1)

"^DD",682,682,0,"IX","A3",682.04,4)

"^DD",682,682,0,"IX","A4",682.04,5)

"^DD",682,682,0,"IX","A41",682,.02)

"^DD",682,682,0,"IX","AC",682,1)

"^DD",682,682,0,"IX","AC1",682,.02)

"^DD",682,682,0,"IX","AD",682,1)

"^DD",682,682,0,"IX","B",682,.01)

"^DD",682,682,0,"IX","C",682,.02)

"^DD",682,682,0,"IX","D",682,1)

"^DD",682,682,0,"IX","E",682,.04)

"^DD",682,682,0,"NM","LBRY ISSUE")

"^DD",682,682,.01,0)
NUMBER^RNJ9,0^^0;1^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",682,682,.01,1,0)
^.1
"^DD",682,682,.01,1,1,0)
682^B
"^DD",682,682,.01,1,1,1)
S ^LBRY(682,"B",$E(X,1,30),DA)=""
"^DD",682,682,.01,1,1,2)
K ^LBRY(682,"B",$E(X,1,30),DA)
"^DD",682,682,.01,3)

"^DD",682,682,.01,21,0)
^^1^1^2940520^^
"^DD",682,682,.01,21,1,0)
This is the sequential entry number of a check-in record.
"^DD",682,682,.01,"DT")
2870901
"^DD",682,682,.02,0)
LOCAL SERIALS TITLE^RP680^LBRY(680,^0;2^Q
"^DD",682,682,.02,1,0)
^.1
"^DD",682,682,.02,1,1,0)
682^C
"^DD",682,682,.02,1,1,1)
S ^LBRY(682,"C",$E(X,1,30),DA)=""
"^DD",682,682,.02,1,1,2)
K ^LBRY(682,"C",$E(X,1,30),DA)
"^DD",682,682,.02,1,2,0)
682^AC1^MUMPS
"^DD",682,682,.02,1,2,1)
S:$P($G(^LBRY(682,DA,1)),U) ^LBRY(682,"AC",$E(X,1,30),$P(^LBRY(682,DA,1),U),DA)=""
"^DD",682,682,.02,1,2,2)
K:$P($G(^LBRY(682,DA,1)),U) ^LBRY(682,"AC",$E(X,1,30),$P(^LBRY(682,DA,1),U),DA)
"^DD",682,682,.02,1,2,"%D",0)
^^2^2^2980414^
"^DD",682,682,.02,1,2,"%D",1,0)
This is the parallel "AC" cross-reference that is by the local serials
"^DD",682,682,.02,1,2,"%D",2,0)
title internal entry number and the journal date.
"^DD",682,682,.02,1,2,"DT")
2980414
"^DD",682,682,.02,1,3,0)
682^A11^MUMPS
"^DD",682,682,.02,1,3,1)
S:$P($G(^LBRY(682,DA,1)),U)'="" ^LBRY(682,"A1",$E(X,1,30),9999999-$P(^LBRY(682,DA,1),U),DA)=""
"^DD",682,682,.02,1,3,2)
K:$P($G(^LBRY(682,DA,1)),U)'="" ^LBRY(682,"A1",$E(X,1,30),9999999-$P(^LBRY(682,DA,1),U),DA)
"^DD",682,682,.02,1,3,"%D",0)
^^2^2^2980414^
"^DD",682,682,.02,1,3,"%D",1,0)
This cross-reference is by journal and the reverse date of the
"^DD",682,682,.02,1,3,"%D",2,0)
journal so that more recent date can be used in a display.
"^DD",682,682,.02,1,3,"DT")
2980414
"^DD",682,682,.02,1,4,0)
682^A41^MUMPS
"^DD",682,682,.02,1,4,1)
N LBRTYPE S LBRTYPE="SET" D A4^LBRYRTX
"^DD",682,682,.02,1,4,2)
N LBRTYPE S LBRTYPE="KILL" D A4^LBRYRTX
"^DD",682,682,.02,1,4,"%D",0)
^^2^2^2980415^
"^DD",682,682,.02,1,4,"%D",1,0)
This cross-reference is by DATE RECEIVED for a journal and
"^DD",682,682,.02,1,4,"%D",2,0)
the entry number of the copy.
"^DD",682,682,.02,1,4,"DT")
2980415
"^DD",682,682,.02,21,0)
^^2^2^2980415^^^^
"^DD",682,682,.02,21,1,0)
This field points to the serials title that the local library
"^DD",682,682,.02,21,2,0)
has in its collection.
"^DD",682,682,.02,"DT")
2980415
"^DD",682,682,.04,0)
SITE NAME^RP680.6'^LBRY(680.6,^0;4^Q
"^DD",682,682,.04,1,0)
^.1
"^DD",682,682,.04,1,1,0)
682^E
"^DD",682,682,.04,1,1,1)
S ^LBRY(682,"E",$E(X,1,30),DA)=""
"^DD",682,682,.04,1,1,2)
K ^LBRY(682,"E",$E(X,1,30),DA)
"^DD",682,682,.04,1,1,"%D",0)
^^1^1^2950828^
"^DD",682,682,.04,1,1,"%D",1,0)
This cross-reference is to be used to screen out by site.
"^DD",682,682,.04,1,1,"DT")
2950828
"^DD",682,682,.04,3)
Enter site name
"^DD",682,682,.04,21,0)
^^1^1^2950824^
"^DD",682,682,.04,21,1,0)
Division site identification
"^DD",682,682,.04,"DT")
2950828
"^DD",682,682,1,0)
JOURNAL DATE^D^^1;1^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",682,682,1,1,0)
^.1
"^DD",682,682,1,1,1,0)
682^AC^MUMPS
"^DD",682,682,1,1,1,1)
S:$P($G(^LBRY(682,DA,0)),U,2)'="" ^LBRY(682,"AC",$P(^LBRY(682,DA,0),U,2),$E(X,1,30),DA)=""
"^DD",682,682,1,1,1,2)
K:$P($G(^LBRY(682,DA,0)),U,2)'="" ^LBRY(682,"AC",$P(^LBRY(682,DA,0),U,2),$E(X,1,30),DA)
"^DD",682,682,1,1,1,"%D",0)
^^1^1^2980414^^^
"^DD",682,682,1,1,1,"%D",1,0)
This cross-reference is by journal and the date of the journal.
"^DD",682,682,1,1,1,"DT")
2980414
"^DD",682,682,1,1,2,0)
682^A1^MUMPS
"^DD",682,682,1,1,2,1)
S:$P($G(^LBRY(682,DA,0)),U,2)'="" ^LBRY(682,"A1",$P(^LBRY(682,DA,0),U,2),9999999-X,DA)=""
"^DD",682,682,1,1,2,2)
K:$P($G(^LBRY(682,DA,0)),U,2)'="" ^LBRY(682,"A1",$P(^LBRY(682,DA,0),U,2),9999999-X,DA)
"^DD",682,682,1,1,2,"%D",0)
^^2^2^2980414^^
"^DD",682,682,1,1,2,"%D",1,0)
This cross-reference is by journal and the reverse date of the
"^DD",682,682,1,1,2,"%D",2,0)
journal so that more recent date can be used in a display.
"^DD",682,682,1,1,2,"DT")
2980414
"^DD",682,682,1,1,3,0)
682^AD^MUMPS
"^DD",682,682,1,1,3,1)
D I^LBRYRTX
"^DD",682,682,1,1,3,2)
Q
"^DD",682,682,1,1,3,"%D",0)
^^3^3^2950815^
"^DD",682,682,1,1,3,"%D",1,0)
This cross-reference takes a journal that is being checked in
"^DD",682,682,1,1,3,"%D",2,0)
and goes to the Disposition file and for every copy or ToC that
"^DD",682,682,1,1,3,"%D",3,0)
exists for this journal, builds a copy record for each one.
"^DD",682,682,1,1,4,0)
682^D
"^DD",682,682,1,1,4,1)
S ^LBRY(682,"D",$E(X,1,30),DA)=""
"^DD",682,682,1,1,4,2)
K ^LBRY(682,"D",$E(X,1,30),DA)
"^DD",682,682,1,1,4,"%D",0)
^^1^1^2950815^
"^DD",682,682,1,1,4,"%D",1,0)
Cross-references by the journal date for each journal.
"^DD",682,682,1,1,4,"DT")
2950815
"^DD",682,682,1,3)
Enter the actual date on the specific journal issue.
"^DD",682,682,1,8.5)
^
"^DD",682,682,1,21,0)
^^3^3^2940520^
"^DD",682,682,1,21,1,0)
This field is for the input of the date on the issue of
"^DD",682,682,1,21,2,0)
the serials title that is being checked in.  Found in
"^DD",682,682,1,21,3,0)
CHE option.
"^DD",682,682,1,"DT")
2980414
"^DD",682,682,1.1,0)
VOLUME^F^^1;2^K:$L(X)>5!($L(X)<1) X
"^DD",682,682,1.1,3)
Enter the volume number for the journal issue.  Convert Roman numerals to numbers.
"^DD",682,682,1.1,21,0)
^^2^2^2940520^
"^DD",682,682,1.1,21,1,0)
This field is for the volume number on the issue of the
"^DD",682,682,1.1,21,2,0)
serials title that is being checked in.  Found in CHE option.
"^DD",682,682,1.1,"DT")
2880307
"^DD",682,682,1.2,0)
ISSUE/PART/SUPPLEMENT^F^^1;3^K:$L(X)>15!($L(X)<1) X
"^DD",682,682,1.2,3)
Enter the issue number, part, or supplement for this specific journal issue, using up to 15 characters.  Convert Roman numerals to numbers.
"^DD",682,682,1.2,21,0)
^^4^4^2940520^
"^DD",682,682,1.2,21,1,0)
This field is to designate the issue or part number or
"^DD",682,682,1.2,21,2,0)
supplement number for the specific item being checked in.
"^DD",682,682,1.2,21,3,0)
Values could be a number, a season, characters such as
"^DD",682,682,1.2,21,4,0)
SUPP A, etc.  Found in CHE option.
"^DD",682,682,1.2,"DT")
2870901
"^DD",682,682,1.3,0)
COPIES RECEIVED^NJ2,0^^1;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",682,682,1.3,3)

"^DD",682,682,1.3,21,0)
^^3^3^2940520^
"^DD",682,682,1.3,21,1,0)
This number is the actual number of copies received for
"^DD",682,682,1.3,21,2,0)
a specific issue at check-in.  It can be less than or the
"^DD",682,682,1.3,21,3,0)
same as the number of COPIES ORDERED.  Found in CHE option.
"^DD",682,682,1.3,"DT")
2870901
"^DD",682,682,1.4,0)
COPIES ORDERED^NJ2,0^^1;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",682,682,1.4,3)
Number of copies ordered is based on information entered in Copy Specific Edit.  Normally you will not need to edit this field.
"^DD",682,682,1.4,21,0)
^^2^2^2940520^
"^DD",682,682,1.4,21,1,0)
This number is the number of copies indicated from the
"^DD",682,682,1.4,21,2,0)
CSE option as currently due for receipt.  Found in CHE option.
"^DD",682,682,1.4,"DT")
2870901
"^DD",682,682,1.5,0)
JOURNAL DATE AUTHOR^P200'^VA(200,^1;6^Q
"^DD",682,682,1.5,9)
^
"^DD",682,682,1.5,21,0)
^^2^2^2940520^
"^DD",682,682,1.5,21,1,0)
This is the person who is entering the check-in record.  It
"^DD",682,682,1.5,21,2,0)
is invisible to the person checking in the serial title.
"^DD",682,682,1.5,"DT")
2930601
"^DD",682,682,1.6,0)
RECEIVED DATE^D^^1;7^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",682,682,1.6,5,1,0)
682.04^5^2
"^DD",682,682,1.6,21,0)
^^2^2^2940531^^^^
"^DD",682,682,1.6,21,1,0)
This field shows the last date a specific copy of a
"^DD",682,682,1.6,21,2,0)
serials issue was received.  Found in CHE option.
"^DD",682,682,1.6,"DT")
2871211
"^DD",682,682,1.7,0)
ENTRY TYPE^RS^I:INSERTED;P:PREDICTED;^1;8^Q
"^DD",682,682,1.7,3)
Select 'P' if there is a prediction pattern for this title.  Select 'I' for an irregular issue such as a supplement.
"^DD",682,682,1.7,21,0)
^^7^7^2940520^
"^DD",682,682,1.7,21,1,0)
This field sets whether the next issue should be predicted
"^DD",682,682,1.7,21,2,0)
from the preceding issue date, given a prediction pattern,
"^DD",682,682,1.7,21,3,0)
or whether the next and subsequent issues must be inserted,
"^DD",682,682,1.7,21,4,0)
either because there is no prediction pattern, or the
"^DD",682,682,1.7,21,5,0)
existing prediction pattern has been turned off by the act
"^DD",682,682,1.7,21,6,0)
of using the (i)nsertion code in this field.  Found in CHE
"^DD",682,682,1.7,21,7,0)
option.
"^DD",682,682,1.7,"DT")
2880607
"^DD",682,682,2,0)
CLAIM DATE^682.02DA^^2;0
"^DD",682,682,2,21,0)
^^1^1^2940825^^
"^DD",682,682,2,21,1,0)
Claim dates for unreceived issues should be entered here.
"^DD",682,682,4,0)
ISSUE ROUTING STATUS^682.04IA^^4;0
"^DD",682,682,4,21,0)
^^1^1^2940825^
"^DD",682,682,4,21,1,0)
The routing status of this issue of the periodical is recorded here.
"^DD",682,682.02,0)
CLAIM DATE SUB-FIELD^^.03^3
"^DD",682,682.02,0,"NM","CLAIM DATE")

"^DD",682,682.02,0,"UP")
682
"^DD",682,682.02,.01,0)
CLAIM DATE^MD^^0;1^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",682,682.02,.01,21,0)
^^2^2^2940825^^
"^DD",682,682.02,.01,21,1,0)
This field is to show specific dates when a specific
"^DD",682,682.02,.01,21,2,0)
missing issue is claimed from the vendor.
"^DD",682,682.02,.01,"DT")
2870901
"^DD",682,682.02,.02,0)
QTY CLAIMED^CJ2,0^^ ; ^S Y(682.02,.02,1)=$S($D(^LBRY(682,D0,1)):^(1),1:"") S X=$P(Y(682.02,.02,1),U,5)-$P(Y(682.02,.02,1),U,4) S X=$J(X,0,0)
"^DD",682,682.02,.02,9)
^
"^DD",682,682.02,.02,9.01)
682^1.3;682^1.4
"^DD",682,682.02,.02,9.1)
COPIES ORDERED-COPIES RECEIVED
"^DD",682,682.02,.02,21,0)
^^2^2^2940520^
"^DD",682,682.02,.02,21,1,0)
This field is the remaining quantity of copies that were ordered
"^DD",682,682.02,.02,21,2,0)
but not received.
"^DD",682,682.02,.03,0)
CLAIM NOTES^F^^0;2^K:$L(X)>100!($L(X)<1) X
"^DD",682,682.02,.03,3)

"^DD",682,682.02,.03,21,0)
^^1^1^2940520^
"^DD",682,682.02,.03,21,1,0)
This field allows input of notes concerning claim problems.
"^DD",682,682.02,.03,"DT")
2870901
"^DD",682,682.04,0)
ISSUE ROUTING STATUS SUB-FIELD^^7^9
"^DD",682,682.04,0,"DIK")
LBRYX3
"^DD",682,682.04,0,"DT")
2931101
"^DD",682,682.04,0,"ID",1)
W ?10,@("$P($P($C(59)_$S($D(^DD(682.04,1,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,2)_"":"",2),$C(59),1)")
"^DD",682,682.04,0,"IX","AD",682.04,1)

"^DD",682,682.04,0,"IX","AE",682.04,4)

"^DD",682,682.04,0,"IX","B",682.04,.01)

"^DD",682,682.04,0,"NM","ISSUE ROUTING STATUS")

"^DD",682,682.04,0,"UP")
682
"^DD",682,682.04,.01,0)
COPY OF ISSUE^MFX^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:'$D(^LBRY(682,DA(1),4,"B",$E(X,1,30),DA)) X
"^DD",682,682.04,.01,1,0)
^.1^^-1
"^DD",682,682.04,.01,1,1,0)
682.04^B
"^DD",682,682.04,.01,1,1,1)
S ^LBRY(682,DA(1),4,"B",$E(X,1,30),DA)=""
"^DD",682,682.04,.01,1,1,2)
K ^LBRY(682,DA(1),4,"B",$E(X,1,30),DA)
"^DD",682,682.04,.01,3)
 Select a copy number or ToC from left hand column of the displayed list to edit that entry.
"^DD",682,682.04,.01,21,0)
^^3^3^2940825^^
"^DD",682,682.04,.01,21,1,0)
This field allows the selection of a specific copy number
"^DD",682,682.04,.01,21,2,0)
or the table of contents for a certain issue.  Found in
"^DD",682,682.04,.01,21,3,0)
CHE and RET options.
"^DD",682,682.04,.01,"DT")
2880407
"^DD",682,682.04,.02,0)
COPY POINTER^*P681'X^LBRY(681,^0;3^D CNO^LBRYRTX
"^DD",682,682.04,.02,1,0)
^.1^^0
"^DD",682,682.04,.02,12)
COPIES FOR THIS TITLE ONLY
"^DD",682,682.04,.02,12.1)
I $P(^LBRY(682,DA(1),0),U,2)=$P(^(0),U,2)
"^DD",682,682.04,.02,21,0)
^^2^2^2950815^^
"^DD",682,682.04,.02,21,1,0)
This field refers to the copy of the serial title from the
"^DD",682,682.04,.02,21,2,0)
LBRY Disposition File.
"^DD",682,682.04,.02,"DT")
2950815
"^DD",682,682.04,1,0)
ISSUE STATUS^S^1:ROUTED;2:ROUTED (TO RETURN);3:SHELVED;4:NOT RECEIVED;5:TOC NOT RECEIVED;^0;2^Q
"^DD",682,682.04,1,1,0)
^.1
"^DD",682,682.04,1,1,1,0)
682^A2^MUMPS
"^DD",682,682.04,1,1,1,1)
I "12"[X,'$P(^LBRY(682,DA(1),4,DA,0),U,6) S ^LBRY(682,"A2",DA(1),DA)=""
"^DD",682,682.04,1,1,1,2)
K ^LBRY(682,"A2",DA(1),DA)
"^DD",682,682.04,1,1,1,"%D",0)
^^3^3^2951011^
"^DD",682,682.04,1,1,1,"%D",1,0)
If the issue status is "routed" or "routed to return", the
"^DD",682,682.04,1,1,1,"%D",2,0)
entry of this issueis put into cross-reference "A2" which is
"^DD",682,682.04,1,1,1,"%D",3,0)
used to print the routing slips.
"^DD",682,682.04,1,1,2,0)
682.04^AD^MUMPS
"^DD",682,682.04,1,1,2,1)
D NOCS^LBRYRTX
"^DD",682,682.04,1,1,2,2)
D NOCD^LBRYRTX
"^DD",682,682.04,1,1,2,"%D",0)
^^2^2^2951011^
"^DD",682,682.04,1,1,2,"%D",1,0)
Determines the number of copies that should be received
"^DD",682,682.04,1,1,2,"%D",2,0)
compared with those actually checked in.
"^DD",682,682.04,1,3)
Select the code that represents the current status of this copy.
"^DD",682,682.04,1,21,0)
^^3^3^2940520^
"^DD",682,682.04,1,21,1,0)
This field indicates whether the issue has been (1) routed,
"^DD",682,682.04,1,21,2,0)
(2) routed to return, (3) shelved, (4) issue not received,
"^DD",682,682.04,1,21,3,0)
and (5) table of contents not received.  Found in CHE option.
"^DD",682,682.04,1,"DT")
2880330
"^DD",682,682.04,2,0)
RETURNING AUTHOR^P200'I^VA(200,^0;4^Q
"^DD",682,682.04,2,9)
^
"^DD",682,682.04,2,21,0)
^^2^2^2940520^
"^DD",682,682.04,2,21,1,0)
This field indicates who checked in a return from routing
"^DD",682,682.04,2,21,2,0)
serial issue.
"^DD",682,682.04,2,"DT")
2931101
"^DD",682,682.04,3,0)
RETURNING DATE^DI^^0;5^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",682,682.04,3,9)
^
"^DD",682,682.04,3,21,0)
^^2^2^2940520^
"^DD",682,682.04,3,21,1,0)
This field indicates the date on which an issue is
"^DD",682,682.04,3,21,2,0)
returned from routing in the RET option.
"^DD",682,682.04,3,"DT")
2870918
"^DD",682,682.04,4,0)
PRINTING TIME^D^^0;6^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",682,682.04,4,1,0)
^.1^^-1
"^DD",682,682.04,4,1,1,0)
682.04^AE^MUMPS
"^DD",682,682.04,4,1,1,1)
K ^LBRY(682,"A2",DA(1),DA)
"^DD",682,682.04,4,1,1,2)
Q
"^DD",682,682.04,4,1,1,"%D",0)
^^2^2^2951011^
"^DD",682,682.04,4,1,1,"%D",1,0)
When the printing time of a routing slip is set, the entry
"^DD",682,682.04,4,1,1,"%D",2,0)
is killed from "A2" which is used as the routing slip queue.
"^DD",682,682.04,4,1,2,0)
682^A3
"^DD",682,682.04,4,1,2,1)
S ^LBRY(682,"A3",$E(X,1,30),DA(1),DA)=""
"^DD",682,682.04,4,1,2,2)
K ^LBRY(682,"A3",$E(X,1,30),DA(1),DA)
"^DD",682,682.04,4,1,2,"%D",0)
^^1^1^2951011^
"^DD",682,682.04,4,1,2,"%D",1,0)
Sets the printed date/time of a routing slip.
"^DD",682,682.04,4,21,0)
^^6^6^2940520^
"^DD",682,682.04,4,21,1,0)
This field automatically indicates the date and time when
"^DD",682,682.04,4,21,2,0)
the routing slips for an issue were initially printed.  If
"^DD",682,682.04,4,21,3,0)
the printer fails and routing slips must be reprinted using
"^DD",682,682.04,4,21,4,0)
the RRS option with a range of dates and times, the RRS
"^DD",682,682.04,4,21,5,0)
option would identify routing slips to be reprinted by the
"^DD",682,682.04,4,21,6,0)
values found in this field.
"^DD",682,682.04,4,"DT")
2880323
"^DD",682,682.04,5,0)
DATE RECEIVED^D^^0;7^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",682,682.04,5,1,0)
^.1
"^DD",682,682.04,5,1,1,0)
682^A4^MUMPS
"^DD",682,682.04,5,1,1,1)
S:$P($G(^LBRY(682,DA(1),0)),U,2)'="" ^LBRY(682,"A4",X,$P(^LBRY(682,DA(1),0),U,2),DA(1),DA)=""
"^DD",682,682.04,5,1,1,2)
K:$P($G(^LBRY(682,DA(1),0)),U,2)'="" ^LBRY(682,"A4",X,$P(^LBRY(682,DA(1),0),U,2),DA(1),DA)
"^DD",682,682.04,5,1,1,"%D",0)
^^2^2^2980415^^^^
"^DD",682,682.04,5,1,1,"%D",1,0)
This cross-reference is by the received date of a particular
"^DD",682,682.04,5,1,1,"%D",2,0)
title and that title's journal date.
"^DD",682,682.04,5,1,1,"DT")
2980414
"^DD",682,682.04,5,1,2,0)
^^TRIGGER^682^1.6
"^DD",682,682.04,5,1,2,1)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA S Y(1)=$S($D(^LBRY(682,D0,1)):^(1),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y S X=DIV S X=$P(^LBRY(682,DA(1),4,DA,0),U,7) X ^DD(682.04,5,1,2,1.4)
"^DD",682,682.04,5,1,2,1.4)
S DIH=$S($D(^LBRY(682,DIV(0),1)):^(1),1:""),DIV=X S $P(^(1),U,7)=DIV,DIH=682,DIG=1.6 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",682,682.04,5,1,2,2)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA S Y(1)=$S($D(^LBRY(682,D0,1)):^(1),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y X ^DD(682.04,5,1,2,2.1) X ^DD(682.04,5,1,2,2.4)
"^DD",682,682.04,5,1,2,2.1)
S X=DIV S Y(1)=$S($D(^LBRY(682,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,7)
"^DD",682,682.04,5,1,2,2.4)
S DIH=$S($D(^LBRY(682,DIV(0),1)):^(1),1:""),DIV=X S $P(^(1),U,7)=DIV,DIH=682,DIG=1.6 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",682,682.04,5,1,2,"%D",0)
^^2^2^2951011^
"^DD",682,682.04,5,1,2,"%D",1,0)
This triggers into the received date (#1.6) the date a copy
"^DD",682,682.04,5,1,2,"%D",2,0)
of a journal was received.
"^DD",682,682.04,5,1,2,"CREATE VALUE")
S X=$P(^LBRY(682,DA(1),4,DA,0),U,7)
"^DD",682,682.04,5,1,2,"DELETE VALUE")
DATE RECEIVED
"^DD",682,682.04,5,1,2,"DT")
2940203
"^DD",682,682.04,5,1,2,"FIELD")
#1.6
"^DD",682,682.04,5,3)
Enter the actual date this copy was received in the library.
"^DD",682,682.04,5,8.5)
^
"^DD",682,682.04,5,21,0)
^^2^2^2950815^^
"^DD",682,682.04,5,21,1,0)
This is the date that the copy of the issue was received and entered
"^DD",682,682.04,5,21,2,0)
into the system.
"^DD",682,682.04,5,"DT")
2980414
"^DD",682,682.04,6,0)
RECEIVING AUTHOR^P200'I^VA(200,^0;8^Q
"^DD",682,682.04,6,9)
^
"^DD",682,682.04,6,21,0)
^^2^2^2940912^
"^DD",682,682.04,6,21,1,0)
This field is the technician who checked in a particular copy
"^DD",682,682.04,6,21,2,0)
of a serial title.
"^DD",682,682.04,6,"DT")
2931101
"^DD",682,682.04,7,0)
BAR CODE^F^^0;9^K:$L(X)>20!($L(X)<1) X
"^DD",682,682.04,7,3)

"^DD",682,682.04,7,21,0)
^^2^2^2940520^
"^DD",682,682.04,7,21,1,0)
This field will be used to store the bar code on each
"^DD",682,682.04,7,21,2,0)
serials title issue as it is checked in.
"^DD",682,682.04,7,"DT")
2880602
"^DD",682.1,682.1,0)
FIELD^^39^40
"^DD",682.1,682.1,0,"DDA")
N
"^DD",682.1,682.1,0,"DIK")
LBRYX4
"^DD",682.1,682.1,0,"DIKOLD")
LBRYX4
"^DD",682.1,682.1,0,"DT")
2961030
"^DD",682.1,682.1,0,"ID",5)
W:$D(^(1)) "   ",$P(^(1),U,1)
"^DD",682.1,682.1,0,"IX","AA",682.1,2)

"^DD",682.1,682.1,0,"IX","AA1",682.1,1)

"^DD",682.1,682.1,0,"IX","AC",682.1,2)

"^DD",682.1,682.1,0,"IX","AD",682.1,5)

"^DD",682.1,682.1,0,"IX","B",682.1,.01)

"^DD",682.1,682.1,0,"IX","C",682.1,1)

"^DD",682.1,682.1,0,"NM","LIBRARY TRANSACTIONS")

"^DD",682.1,682.1,0,"PT",682.1,39)

"^DD",682.1,682.1,.01,0)
TRANSACTION NUMBER^RNJ9,0X^^0;1^S DINUM=X K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",682.1,682.1,.01,1,0)
^.1
"^DD",682.1,682.1,.01,1,1,0)
682.1^B
"^DD",682.1,682.1,.01,1,1,1)
S ^LBRY(682.1,"B",$E(X,1,30),DA)=""
"^DD",682.1,682.1,.01,1,1,2)
K ^LBRY(682.1,"B",$E(X,1,30),DA)
"^DD",682.1,682.1,.01,3)
Type a Number between 1 and 999999999, 0 Decimal Digits
"^DD",682.1,682.1,.01,21,0)
^^1^1^2940520^^
"^DD",682.1,682.1,.01,21,1,0)
This is the internal entry number for each record.
"^DD",682.1,682.1,.01,"DT")
2930421
"^DD",682.1,682.1,1,0)
TRANSACTION TYPE^F^^0;2^K:$L(X)>3!($L(X)<3) X
"^DD",682.1,682.1,1,1,0)
^.1
"^DD",682.1,682.1,1,1,1,0)
682.1^C
"^DD",682.1,682.1,1,1,1,1)
S ^LBRY(682.1,"C",$E(X,1,30),DA)=""
"^DD",682.1,682.1,1,1,1,2)
K ^LBRY(682.1,"C",$E(X,1,30),DA)
"^DD",682.1,682.1,1,1,1,"DT")
2930513
"^DD",682.1,682.1,1,1,2,0)
682.1^AA1^MUMPS
"^DD",682.1,682.1,1,1,2,1)
S:$P($G(^LBRY(682.1,DA,0)),U,3)'="" ^LBRY(682.1,"AA",$E($P(^LBRY(682.1,DA,0),U,3),1,30),$E(X,1,30),DA)=""
"^DD",682.1,682.1,1,1,2,2)
K:$P($G(^LBRY(682.1,DA,0)),U,3)'="" ^LBRY(682.1,"AA",$E($P(^LBRY(682.1,DA,0),U,3),1,30),$E(X,1,30),DA)
"^DD",682.1,682.1,1,1,2,"%D",0)
^^1^1^2980414^^
"^DD",682.1,682.1,1,1,2,"%D",1,0)
This cross-reference is by transaction type and by transaction status.
"^DD",682.1,682.1,1,1,2,"DT")
2980414
"^DD",682.1,682.1,1,3)
Answer must be 3 characters in length.
"^DD",682.1,682.1,1,21,0)
^^3^3^2940520^
"^DD",682.1,682.1,1,21,1,0)
This the specific type of transaction that is being transmitted
"^DD",682.1,682.1,1,21,2,0)
or received.  Some types of transactions can be combined into
"^DD",682.1,682.1,1,21,3,0)
one mail message.
"^DD",682.1,682.1,1,"DT")
2980414
"^DD",682.1,682.1,2,0)
TRANSACTION STATUS^S^T:TRANSMITTED;W:WAITING FOR TRANSMISSION;R:READY FOR PROCESSING;P:PROCESSED;M:MANUAL PROCESS;^0;3^Q
"^DD",682.1,682.1,2,1,0)
^.1
"^DD",682.1,682.1,2,1,1,0)
682.1^AC
"^DD",682.1,682.1,2,1,1,1)
S ^LBRY(682.1,"AC",$E(X,1,30),DA)=""
"^DD",682.1,682.1,2,1,1,2)
K ^LBRY(682.1,"AC",$E(X,1,30),DA)
"^DD",682.1,682.1,2,1,1,"%D",0)
^^2^2^2980414^^
"^DD",682.1,682.1,2,1,1,"%D",1,0)
This cross reference is for LBRYSEND to pull only those records
"^DD",682.1,682.1,2,1,1,"%D",2,0)
needing to be transmitted to FORUM.
"^DD",682.1,682.1,2,1,1,"DT")
2930423
"^DD",682.1,682.1,2,1,2,0)
682.1^AA^MUMPS
"^DD",682.1,682.1,2,1,2,1)
S:$P($G(^LBRY(682.1,DA,0)),U,2)'="" ^LBRY(682.1,"AA",$E(X,1,30),$E($P(^LBRY(682.1,DA,0),U,2),1,30),DA)=""
"^DD",682.1,682.1,2,1,2,2)
K:$P($G(^LBRY(682.1,DA,0)),U,2)'="" ^LBRY(682.1,"AA",$E(X,1,30),$E($P(^LBRY(682.1,DA,0),U,2),1,30),DA)
"^DD",682.1,682.1,2,1,2,"%D",0)
^^1^1^2980414^^^
"^DD",682.1,682.1,2,1,2,"%D",1,0)
This cross-reference is by transaction type and by transaction status.
"^DD",682.1,682.1,2,1,2,"DT")
2980414
"^DD",682.1,682.1,2,21,0)
^^5^5^2940520^
"^DD",682.1,682.1,2,21,1,0)
This field designates the status of transactions. 'W' for
"^DD",682.1,682.1,2,21,2,0)
waiting for transmission and 'T' for transmitted are statuses
"^DD",682.1,682.1,2,21,3,0)
for transactions being sent.  'R' for ready for
"^DD",682.1,682.1,2,21,4,0)
processing and 'P' for processed are statuses after a
"^DD",682.1,682.1,2,21,5,0)
transmission has come in.
"^DD",682.1,682.1,2,"DT")
2980414
"^DD",682.1,682.1,3,0)
SEND STATION^F^^0;4^K:$L(X)>7!($L(X)<3) X
"^DD",682.1,682.1,3,3)
This is the sending station number.
"^DD",682.1,682.1,3,21,0)
^^2^2^2940520^^
"^DD",682.1,682.1,3,21,1,0)
This is for use on FORUM and is the station number of the library
"^DD",682.1,682.1,3,21,2,0)
station sending the transaction.
"^DD",682.1,682.1,3,"DT")
2930423
"^DD",682.1,682.1,4,0)
LOCAL TRANSACTION NUMBER^NJ7,0^^0;5^K:+X'=X!(X>9999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",682.1,682.1,4,3)
This is the local internal transaction number.
"^DD",682.1,682.1,4,21,0)
^^4^4^2940520^^
"^DD",682.1,682.1,4,21,1,0)
This is for use on FORUM and is the local internal number of a serial
"^DD",682.1,682.1,4,21,2,0)
title that is being sent to FORUM.  This number will be sent
"^DD",682.1,682.1,4,21,3,0)
back to the local site for processing the disposition of the
"^DD",682.1,682.1,4,21,4,0)
transaction.
"^DD",682.1,682.1,4,"DT")
2930423
"^DD",682.1,682.1,5,0)
TITLE^F^^1;1^K:$L(X)>160!($L(X)<1) X
"^DD",682.1,682.1,5,1,0)
^.1
"^DD",682.1,682.1,5,1,1,0)
682.1^AD
"^DD",682.1,682.1,5,1,1,1)
S ^LBRY(682.1,"AD",$E(X,1,30),DA)=""
"^DD",682.1,682.1,5,1,1,2)
K ^LBRY(682.1,"AD",$E(X,1,30),DA)
"^DD",682.1,682.1,5,1,1,"DT")
2940124
"^DD",682.1,682.1,5,3)
This is the journal title name
"^DD",682.1,682.1,5,21,0)
^^1^1^2940520^
"^DD",682.1,682.1,5,21,1,0)
This is the full serials title.
"^DD",682.1,682.1,5,"DT")
2930421
"^DD",682.1,682.1,6,0)
TAF DA#^NJ6,0^^1;2^K:+X'=X!(X>999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",682.1,682.1,6,3)
This is the FORUM Title Authority File internal number.
"^DD",682.1,682.1,6,21,0)
^^2^2^2940520^
"^DD",682.1,682.1,6,21,1,0)
This field automatically provides the FORUM Title Authority
"^DD",682.1,682.1,6,21,2,0)
File internal number associated with a particular serials title.
"^DD",682.1,682.1,6,"DT")
2930421
"^DD",682.1,682.1,7,0)
LOCAL DA#^NJ7,0^^1;3^K:+X'=X!(X>9999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",682.1,682.1,7,3)
This is the local Title Authority file internal number.
"^DD",682.1,682.1,7,21,0)
^^1^1^2940523^^
"^DD",682.1,682.1,7,21,1,0)
This field is the local station level internal number.
"^DD",682.1,682.1,7,"DT")
2930421
"^DD",682.1,682.1,8,0)
PORTION^S^N:NATIONAL;L:LOCAL;^1;4^Q
"^DD",682.1,682.1,8,21,0)
^^3^3^2940523^
"^DD",682.1,682.1,8,21,1,0)
This field is a set of codes to indicate whether the
"^DD",682.1,682.1,8,21,2,0)
serials title was created at the national (FORUM) level
"^DD",682.1,682.1,8,21,3,0)
or at the local level.
"^DD",682.1,682.1,8,"DT")
2930421
"^DD",682.1,682.1,9,0)
SYNONYM^F^^2;1^K:$L(X)>45!($L(X)<1) X
"^DD",682.1,682.1,9,3)
Answer must be 1-45 characters in length.
"^DD",682.1,682.1,9,21,0)
^^7^7^2940523^
"^DD",682.1,682.1,9,21,1,0)
This field is for the input of a synonym, alternative
"^DD",682.1,682.1,9,21,2,0)
name, or acronym commonly used for this serials title.
"^DD",682.1,682.1,9,21,3,0)
for instance, the New England Journal of Medicine is
"^DD",682.1,682.1,9,21,4,0)
often called: NEJM.  This field is not the same as the
"^DD",682.1,682.1,9,21,5,0)
NLM TITLE ABBREVIATION.  If an acronym is the official
"^DD",682.1,682.1,9,21,6,0)
title of the serial, then the spelled-out version of
"^DD",682.1,682.1,9,21,7,0)
the title would be entered in this field.
"^DD",682.1,682.1,9,"DT")
2930421
"^DD",682.1,682.1,10,0)
ISSN/ISBN^F^^2;2^K:$L(X)>20!($L(X)<1) X
"^DD",682.1,682.1,10,3)
Answer must be 1-20 characters in length.
"^DD",682.1,682.1,10,21,0)
^^3^3^2940523^
"^DD",682.1,682.1,10,21,1,0)
This field is for the International Standard Serials
"^DD",682.1,682.1,10,21,2,0)
Number of the International Standard Book Number for
"^DD",682.1,682.1,10,21,3,0)
the specific serials title.
"^DD",682.1,682.1,10,"DT")
2930421
"^DD",682.1,682.1,11,0)
FORMERLY^F^^2;3^K:$L(X)>160!($L(X)<1) X
"^DD",682.1,682.1,11,3)
Answer must be 1-160 characters in length.
"^DD",682.1,682.1,11,21,0)
^^3^3^2940523^
"^DD",682.1,682.1,11,21,1,0)
This field is for the complete serials title which
"^DD",682.1,682.1,11,21,2,0)
was the immediate predecessor to this specific serials
"^DD",682.1,682.1,11,21,3,0)
title.
"^DD",682.1,682.1,11,"DT")
2930421
"^DD",682.1,682.1,12,0)
NLM ABBREVIATION^F^^3;1^K:$L(X)>50!($L(X)<1) X
"^DD",682.1,682.1,12,3)
Answer must be 1-50 characters in length.
"^DD",682.1,682.1,12,21,0)
^^3^3^2940523^
"^DD",682.1,682.1,12,21,1,0)
This field is for a title abbreviation either assigned
"^DD",682.1,682.1,12,21,2,0)
by the National Library of Medicine or created following
"^DD",682.1,682.1,12,21,3,0)
their abbreviation format.
"^DD",682.1,682.1,12,"DT")
2930421
"^DD",682.1,682.1,13,0)
CONTINUED BY^F^^3;2^K:$L(X)>160!($L(X)<1) X
"^DD",682.1,682.1,13,3)
Answer must be 1-160 characters in length.
"^DD",682.1,682.1,13,21,0)
^^2^2^2940523^
"^DD",682.1,682.1,13,21,1,0)
This field is for the complete serials title which is
"^DD",682.1,682.1,13,21,2,0)
the immediate successor to this specific serials title.
"^DD",682.1,682.1,13,"DT")
2930421
"^DD",682.1,682.1,14,0)
SERLINE^F^^3;3^K:$L(X)>9!($L(X)<1) X
"^DD",682.1,682.1,14,3)
Answer must be 1-9 characters in length.
"^DD",682.1,682.1,14,21,0)
^^5^5^2940523^
"^DD",682.1,682.1,14,21,1,0)
This field allows for the input of the 9 character SERLINE
"^DD",682.1,682.1,14,21,2,0)
number which is assigned to each title in the National
"^DD",682.1,682.1,14,21,3,0)
Library of Medicine SERHOLD database.  Not every serials
"^DD",682.1,682.1,14,21,4,0)
title in the Serials Module will have a SERLINE number,
"^DD",682.1,682.1,14,21,5,0)
particularly non-medical titles.
"^DD",682.1,682.1,14,"DT")
2930421
"^DD",682.1,682.1,15,0)
PUBLISHER^F^^4;1^K:$L(X)>60!($L(X)<1) X
"^DD",682.1,682.1,15,3)
Answer must be 1-60 characters in length.
"^DD",682.1,682.1,15,21,0)
^^2^2^2940523^
"^DD",682.1,682.1,15,21,1,0)
This field allows for the input of the name of a publisher
"^DD",682.1,682.1,15,21,2,0)
for a serials title.
"^DD",682.1,682.1,15,"DT")
2930421
"^DD",682.1,682.1,16,0)
FIRST ISSUE^F^^4;2^K:$L(X)>45!($L(X)<1) X
"^DD",682.1,682.1,16,3)
Answer must be 1-45 characters in length.
"^DD",682.1,682.1,16,21,0)
^^5^5^2940523^
"^DD",682.1,682.1,16,21,1,0)
This field is for the input of the first volume and issue
"^DD",682.1,682.1,16,21,2,0)
number and issue date, historically, used when this
"^DD",682.1,682.1,16,21,3,0)
specific serials title was first published under this name.
"^DD",682.1,682.1,16,21,4,0)
These volume and issue numbers and issue dates are not
"^DD",682.1,682.1,16,21,5,0)
necessarily the same as holdings statements.
"^DD",682.1,682.1,16,"DT")
2930421
"^DD",682.1,682.1,17,0)
LAST ISSUE^F^^4;3^K:$L(X)>30!($L(X)<1) X
"^DD",682.1,682.1,17,3)
Answer must be 1-30 characters in length.
"^DD",682.1,682.1,17,21,0)
^^5^5^2940523^
"^DD",682.1,682.1,17,21,1,0)
This field is for the input of the last volume and issue
"^DD",682.1,682.1,17,21,2,0)
number and issue date, historically, used when this
"^DD",682.1,682.1,17,21,3,0)
specific serials title was last published under this name.
"^DD",682.1,682.1,17,21,4,0)
These volume and issue numbers and issue dates are not
"^DD",682.1,682.1,17,21,5,0)
necessarily the same as holdings statements.
"^DD",682.1,682.1,17,"DT")
2930421
"^DD",682.1,682.1,18,0)
FREQUENCY^F^^4;4^K:$L(X)>30!($L(X)<1) X
"^DD",682.1,682.1,18,3)
Answer must be 1-30 characters in length.
"^DD",682.1,682.1,18,21,0)
^^10^10^2940523^
"^DD",682.1,682.1,18,21,1,0)
This field provides for the frequency of issue which
"^DD",682.1,682.1,18,21,2,0)
has been assigned in the National Library Files
"^DD",682.1,682.1,18,21,3,0)
Maintenance option on FORUM.  No local input in the
"^DD",682.1,682.1,18,21,4,0)
local Serials Module is allowed for this field.  Every
"^DD",682.1,682.1,18,21,5,0)
serials title may have a frequency assigned; however,
"^DD",682.1,682.1,18,21,6,0)
not every serials title may have a prediction pattern.
"^DD",682.1,682.1,18,21,7,0)
If no prediction pattern can be assigned, the frequency
"^DD",682.1,682.1,18,21,8,0)
field may have the following type of value:  QUARTERLY,
"^DD",682.1,682.1,18,21,9,0)
NO PREDICT. PATTERN.  Old serials which are not longer
"^DD",682.1,682.1,18,21,10,0)
published may not have a frequency entered.
"^DD",682.1,682.1,18,"DT")
2930421
"^DD",682.1,682.1,19,0)
PREDICTION PATTERN^F^^4;5^K:$L(X)>60!($L(X)<1) X
"^DD",682.1,682.1,19,3)
Answer must be 1-60 characters in length.
"^DD",682.1,682.1,19,21,0)
^^13^13^2940519^
"^DD",682.1,682.1,19,21,1,0)
This field provides for the prediction pattern which has been
"^DD",682.1,682.1,19,21,2,0)
assigned in the National Library Files Maintenance option on
"^DD",682.1,682.1,19,21,3,0)
FORUM for a serials title which is still being published.  No
"^DD",682.1,682.1,19,21,4,0)
local input in the local Serials Module is allowed for this
"^DD",682.1,682.1,19,21,5,0)
field.  If there is no value in this field, there is no
"^DD",682.1,682.1,19,21,6,0)
prediction pattern for this title, and thus there will be no
"^DD",682.1,682.1,19,21,7,0)
automatic prediction of the next expected issue in the CHE
"^DD",682.1,682.1,19,21,8,0)
option on the local module.  Certain issuing patterns by
"^DD",682.1,682.1,19,21,9,0)
publishers do not lend themselves to the establishment of a
"^DD",682.1,682.1,19,21,10,0)
prediction pattern, most notably those quarterly publications
"^DD",682.1,682.1,19,21,11,0)
which are labeled with seasonal designations such as spring,
"^DD",682.1,682.1,19,21,12,0)
winter, etc.  In order for a prediction pattern to be created,
"^DD",682.1,682.1,19,21,13,0)
the serials title must be dated in a MM/YY or MM/DD/YY format.
"^DD",682.1,682.1,19,"DT")
2930421
"^DD",682.1,682.1,20,0)
PREDICT PAT SEQ^F^^4;6^K:$L(X)>5!($L(X)<5) X
"^DD",682.1,682.1,20,3)
This is the Prediction Pattern sequence code.
"^DD",682.1,682.1,20,21,0)
^^12^12^2950815^^
"^DD",682.1,682.1,20,21,1,0)
This field allows for the input of the alpha-numeric code
"^DD",682.1,682.1,20,21,2,0)
which identifies the prediction pattern and puts it into
"^DD",682.1,682.1,20,21,3,0)
a sequence with all other patterns.  This field requires
"^DD",682.1,682.1,20,21,4,0)
the entry of one alpha character and 4 numbers, in the
"^DD",682.1,682.1,20,21,5,0)
form of A1111, to identify and place the prediction pattern
"^DD",682.1,682.1,20,21,6,0)
in a coherent scheme of patterns.  The alpha characters
"^DD",682.1,682.1,20,21,7,0)
identify the underlying frequency, such as A- monthly,
"^DD",682.1,682.1,20,21,8,0)
K- 8 times per year, etc.  The numbers place the prediction
"^DD",682.1,682.1,20,21,9,0)
pattern in the proper sequence within its frequency type
"^DD",682.1,682.1,20,21,10,0)
according to months, days, number of volumes, etc.,
"^DD",682.1,682.1,20,21,11,0)
according to a predetermined format for the PREDICTION PATTERN
"^DD",682.1,682.1,20,21,12,0)
NAME.
"^DD",682.1,682.1,20,"DT")
2930421
"^DD",682.1,682.1,21,0)
MONTH^F^^5;1^K:$L(X)>30!($L(X)<1) X
"^DD",682.1,682.1,21,3)
Answer must be 1-30 characters in length.
"^DD",682.1,682.1,21,21,0)
^^3^3^2940523^
"^DD",682.1,682.1,21,21,1,0)
This field allows the input of the month or months
"^DD",682.1,682.1,21,21,2,0)
involved in the construction of the specific prediction
"^DD",682.1,682.1,21,21,3,0)
pattern.
"^DD",682.1,682.1,21,"DT")
2930421
"^DD",682.1,682.1,22,0)
WOM/DOW^F^^5;2^K:$L(X)>120!($L(X)<1) X
"^DD",682.1,682.1,22,3)
Answer must be 1-120 characters in length.
"^DD",682.1,682.1,22,21,0)
^^6^6^2940520^
"^DD",682.1,682.1,22,21,1,0)
This field is to create a pattern for those serials titles which
"^DD",682.1,682.1,22,21,2,0)
are issued on a certain day of the week for a certain week of
"^DD",682.1,682.1,22,21,3,0)
the month, for example, Friday of the third week.  This field can
"^DD",682.1,682.1,22,21,4,0)
handle more than one week;  for example, you could have a title
"^DD",682.1,682.1,22,21,5,0)
issued the first and third Fridays; the notation would be 1/5,
"^DD",682.1,682.1,22,21,6,0)
3/5.  Days of the week are indicated by 0=Sunday through 6=Saturday.
"^DD",682.1,682.1,22,"DT")
2930421
"^DD",682.1,682.1,23,0)
DAYS ADDED^F^^5;3^K:$L(X)>2!($L(X)<1) X
"^DD",682.1,682.1,23,3)
Answer must be 1-2 characters in length.
"^DD",682.1,682.1,23,21,0)
^^3^3^2950815^^
"^DD",682.1,682.1,23,21,1,0)
This field is used when a serials title is used every so many
"^DD",682.1,682.1,23,21,2,0)
days, for instance, every 21 days.  In such a case, the value
"^DD",682.1,682.1,23,21,3,0)
of 21 would be placed in this field.
"^DD",682.1,682.1,23,"DT")
2930421
"^DD",682.1,682.1,24,0)
CHANGE MONTH^F^^5;4^K:$L(X)>4!($L(X)<4) X
"^DD",682.1,682.1,24,3)
Answer must be 4 characters in length.
"^DD",682.1,682.1,24,21,0)
^^5^5^2940520^
"^DD",682.1,682.1,24,21,1,0)
This field is for the input of the months at which the
"^DD",682.1,682.1,24,21,2,0)
volume numbers increase, the values input from 1 to 12.
"^DD",682.1,682.1,24,21,3,0)
For instance, if a monthly serials title has two volumes
"^DD",682.1,682.1,24,21,4,0)
per year, changing in January and July, the CHANGE MONTH
"^DD",682.1,682.1,24,21,5,0)
value should be:  1,7.
"^DD",682.1,682.1,24,"DT")
2930421
"^DD",682.1,682.1,25,0)
VOLUME INCREMENT^F^^5;5^K:$L(X)>3!($L(X)<1) X
"^DD",682.1,682.1,25,3)
Answer must be 1-3 characters in length.
"^DD",682.1,682.1,25,21,0)
^^4^4^2940520^
"^DD",682.1,682.1,25,21,1,0)
This field allows the volume field to be incremented at
"^DD",682.1,682.1,25,21,2,0)
the month designated by the CHANGE MONTH field.  If the
"^DD",682.1,682.1,25,21,3,0)
volume number increases by 1 at each CHANGE MONTH, the value
"^DD",682.1,682.1,25,21,4,0)
in this field should be +1.
"^DD",682.1,682.1,25,"DT")
2930421
"^DD",682.1,682.1,26,0)
ISSUE CHANGE^F^^5;6^K:$L(X)>3!($L(X)<1) X
"^DD",682.1,682.1,26,3)
Answer must be 1-3 characters in length.
"^DD",682.1,682.1,26,21,0)
^^4^4^2940520^^^^
"^DD",682.1,682.1,26,21,1,0)
This field will be used on all computed JOURNAL DATES other than
"^DD",682.1,682.1,26,21,2,0)
the first JOURNAL DATE during the CHANGE MONTH.  The issue should
"^DD",682.1,682.1,26,21,3,0)
be incremented by the amount stated in this field if the entry has
"^DD",682.1,682.1,26,21,4,0)
a '+' as the first character.
"^DD",682.1,682.1,26,"DT")
2930421
"^DD",682.1,682.1,27,0)
ISSUE INCREMENT^F^^5;7^K:$L(X)>3!($L(X)<1) X
"^DD",682.1,682.1,27,3)
Answer must be 1-3 characters in length.
"^DD",682.1,682.1,27,21,0)
^^4^4^2940520^^^^
"^DD",682.1,682.1,27,21,1,0)
This field will be used on the first computed JOURNAL DATE during the
"^DD",682.1,682.1,27,21,2,0)
CHANGE MONTH.  The ISSUE will be set to the number in this field if
"^DD",682.1,682.1,27,21,3,0)
the number does not start with a '+";  otherwise add the number to the
"^DD",682.1,682.1,27,21,4,0)
last ISSUE.
"^DD",682.1,682.1,27,"DT")
2930421
"^DD",682.1,682.1,28,0)
DAY OF MONTH^F^^5;8^K:$L(X)>12!($L(X)<1) X
"^DD",682.1,682.1,28,3)
Answer must be 1-12 characters in length.
"^DD",682.1,682.1,28,21,0)
^^5^5^2950815^^
"^DD",682.1,682.1,28,21,1,0)
If a serials title is always dated with a specific day
"^DD",682.1,682.1,28,21,2,0)
of the month, that day would be entered here.  More than
"^DD",682.1,682.1,28,21,3,0)
one day can be entered.  A serials title which is always
"^DD",682.1,682.1,28,21,4,0)
issued and dated on the third and fifteenth would have the
"^DD",682.1,682.1,28,21,5,0)
value of:  3,15.
"^DD",682.1,682.1,28,"DT")
2930421
"^DD",682.1,682.1,29,0)
INDEX^682.129A^^6;0
"^DD",682.1,682.1,29,21,0)
^^3^3^2940523^
"^DD",682.1,682.1,29,21,1,0)
This field allows the input of the names of indexing
"^DD",682.1,682.1,29,21,2,0)
and abstracting tools in which various articles from
"^DD",682.1,682.1,29,21,3,0)
various serials titles are found.
"^DD",682.1,682.1,30,0)
GENERAL NOTES^682.11^^7;0
"^DD",682.1,682.1,30,21,0)
^^4^4^2940523^
"^DD",682.1,682.1,30,21,1,0)
This is a word-processing field in which the
"^DD",682.1,682.1,30,21,2,0)
bibliographic history of a serials title should
"^DD",682.1,682.1,30,21,3,0)
be described along with alternative titles, synonyms,
"^DD",682.1,682.1,30,21,4,0)
changes in publishers, etc.
"^DD",682.1,682.1,31,0)
PREDICT PAT DESC.^682.131^^8;0
"^DD",682.1,682.1,31,21,0)
^^3^3^2940523^
"^DD",682.1,682.1,31,21,1,0)
This is a word-processing field in which the parameters
"^DD",682.1,682.1,31,21,2,0)
of the prediction pattern should be described in plain
"^DD",682.1,682.1,31,21,3,0)
English.
"^DD",682.1,682.1,32,0)
MULTIPLE TITLES^682.132A^^9;0
"^DD",682.1,682.1,32,21,0)
^^4^4^2940523^
"^DD",682.1,682.1,32,21,1,0)
This field is for those transactions that may have more than
"^DD",682.1,682.1,32,21,2,0)
one title to be sent in the mail message.  For example, if
"^DD",682.1,682.1,32,21,3,0)
a prediction pattern is changed, then all titles with that
"^DD",682.1,682.1,32,21,4,0)
particular prediction pattern will appear on the mail message.
"^DD",682.1,682.1,33,0)
DATE CREATED^D^^0;6^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",682.1,682.1,33,21,0)
^^2^2^2940523^
"^DD",682.1,682.1,33,21,1,0)
This field stores the date the transaction was created or received,
"^DD",682.1,682.1,33,21,2,0)
then transmitted or processed.
"^DD",682.1,682.1,33,"DT")
2930506
"^DD",682.1,682.1,34,0)
TO STATION^P4.2'^DIC(4.2,^0;7^Q
"^DD",682.1,682.1,34,3)

"^DD",682.1,682.1,34,21,0)
^^2^2^2950626^^
"^DD",682.1,682.1,34,21,1,0)
This field is the domain that the transaction is being
"^DD",682.1,682.1,34,21,2,0)
sent to.
"^DD",682.1,682.1,34,23,0)
^^1^1^2950626^
"^DD",682.1,682.1,34,23,1,0)
 
"^DD",682.1,682.1,34,"DT")
2950626
"^DD",682.1,682.1,35,0)
EXPLANATION^682.135^^10;0
"^DD",682.1,682.1,35,21,0)
^^2^2^2940523^^
"^DD",682.1,682.1,35,21,1,0)
Give an explanation about why a local serial title transaction
"^DD",682.1,682.1,35,21,2,0)
was rejected by the National Librarians.
"^DD",682.1,682.1,36,0)
MESSAGE^F^^0;8^K:$L(X)>7!($L(X)<5) X
"^DD",682.1,682.1,36,3)
This is whether some data was added or changed.
"^DD",682.1,682.1,36,21,0)
^^3^3^2940523^
"^DD",682.1,682.1,36,21,1,0)
This field is used for certain transactions types;
"^DD",682.1,682.1,36,21,2,0)
whether a frequency was added, changed or deleted for
"^DD",682.1,682.1,36,21,3,0)
a serials title or a prediction pattern.
"^DD",682.1,682.1,36,"DT")
2931019
"^DD",682.1,682.1,37,0)
USER^P200'^VA(200,^1;5^Q
"^DD",682.1,682.1,37,21,0)
^^1^1^2940829^
"^DD",682.1,682.1,37,21,1,0)
This is the user that created this transaction.
"^DD",682.1,682.1,37,"DT")
2940829
"^DD",682.1,682.1,38,0)
DATA EDITED^682.138^^11;0
"^DD",682.1,682.1,38,21,0)
^^2^2^2940902^
"^DD",682.1,682.1,38,21,1,0)
This is the data that was edited for a 'UTL' transaction.
"^DD",682.1,682.1,38,21,2,0)
This will be used for the 'Any TAF Changes' report.
"^DD",682.1,682.1,39,0)
ORIGNAL TRANSACTION #^P682.1'^LBRY(682.1,^0;9^Q
"^DD",682.1,682.1,39,21,0)
^^2^2^2961030^
"^DD",682.1,682.1,39,21,1,0)
This field refers back to the originally received transaction.  It is
"^DD",682.1,682.1,39,21,2,0)
used for reporting purposes.
"^DD",682.1,682.1,39,"DT")
2961030
"^DD",682.1,682.11,0)
GENERAL NOTES SUB-FIELD^^.01^1
"^DD",682.1,682.11,0,"DT")
2930421
"^DD",682.1,682.11,0,"NM","GENERAL NOTES")

"^DD",682.1,682.11,0,"UP")
682.1
"^DD",682.1,682.11,.01,0)
GENERAL NOTES^W^^0;1^Q
"^DD",682.1,682.11,.01,21,0)
^^4^4^2940523^
"^DD",682.1,682.11,.01,21,1,0)
This is a word-processing field in which the
"^DD",682.1,682.11,.01,21,2,0)
bibliographic history of a serials title should
"^DD",682.1,682.11,.01,21,3,0)
be described along with alternative titles, synonyms,
"^DD",682.1,682.11,.01,21,4,0)
changes in publishers, etc.
"^DD",682.1,682.11,.01,"DT")
2930421
"^DD",682.1,682.129,0)
INDEX SUB-FIELD^^2^3
"^DD",682.1,682.129,0,"DIK")
LBRYX4
"^DD",682.1,682.129,0,"DT")
2930511
"^DD",682.1,682.129,0,"IX","B",682.129,.01)

"^DD",682.1,682.129,0,"NM","INDEX")

"^DD",682.1,682.129,0,"UP")
682.1
"^DD",682.1,682.129,.01,0)
INDEX TITLE^F^^0;1^K:$L(X)>40!($L(X)<1) X
"^DD",682.1,682.129,.01,1,0)
^.1
"^DD",682.1,682.129,.01,1,1,0)
682.129^B
"^DD",682.1,682.129,.01,1,1,1)
S ^LBRY(682.1,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",682.1,682.129,.01,1,1,2)
K ^LBRY(682.1,DA(1),6,"B",$E(X,1,30),DA)
"^DD",682.1,682.129,.01,3)
Answer must be 1-40 characters in length.
"^DD",682.1,682.129,.01,21,0)
^^3^3^2940523^
"^DD",682.1,682.129,.01,21,1,0)
This field allows the input of the names of indexing
"^DD",682.1,682.129,.01,21,2,0)
and abstracting tools in which various articles from
"^DD",682.1,682.129,.01,21,3,0)
various serials titles are found.
"^DD",682.1,682.129,.01,"DT")
2930511
"^DD",682.1,682.129,1,0)
CODE^F^^0;2^K:$L(X)>3!($L(X)<2) X
"^DD",682.1,682.129,1,3)
Answer must be 2-3 characters in length.
"^DD",682.1,682.129,1,21,0)
^^2^2^2940523^
"^DD",682.1,682.129,1,21,1,0)
This field stores the short code or abrreviation for the
"^DD",682.1,682.129,1,21,2,0)
titles of the indexing and abstracting tools.
"^DD",682.1,682.129,1,"DT")
2930511
"^DD",682.1,682.129,2,0)
INTERNAL #^NJ8,0^^0;3^K:+X'=X!(X>99999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",682.1,682.129,2,3)
Type a Number between 1 and 99999999, 0 Decimal Digits
"^DD",682.1,682.129,2,21,0)
^^3^3^2940523^
"^DD",682.1,682.129,2,21,1,0)
This fields stores the internal number of the indexing
"^DD",682.1,682.129,2,21,2,0)
source that is being sent to the local sites for
"^DD",682.1,682.129,2,21,3,0)
inclusion in their system.
"^DD",682.1,682.129,2,"DT")
2930511
"^DD",682.1,682.131,0)
PREDICT PAT DESC. SUB-FIELD^^.01^1
"^DD",682.1,682.131,0,"DT")
2930421
"^DD",682.1,682.131,0,"NM","PREDICT PAT DESC.")

"^DD",682.1,682.131,0,"UP")
682.1
"^DD",682.1,682.131,.01,0)
PREDICT PAT DESC.^W^^0;1^Q
"^DD",682.1,682.131,.01,21,0)
^^3^3^2940523^
"^DD",682.1,682.131,.01,21,1,0)
This is a word-processing field in which the parameters
"^DD",682.1,682.131,.01,21,2,0)
of the prediction pattern should be described in plain
"^DD",682.1,682.131,.01,21,3,0)
English.
"^DD",682.1,682.131,.01,"DT")
2930421
"^DD",682.1,682.132,0)
MULTIPLE TITLES SUB-FIELD^^.01^1
"^DD",682.1,682.132,0,"DIK")
LBRYX4
"^DD",682.1,682.132,0,"DT")
2930506
"^DD",682.1,682.132,0,"IX","B",682.132,.01)

"^DD",682.1,682.132,0,"NM","MULTIPLE TITLES")

"^DD",682.1,682.132,0,"UP")
682.1
"^DD",682.1,682.132,.01,0)
MULTIPLE TITLES^F^^0;1^K:$L(X)>160!($L(X)<1) X
"^DD",682.1,682.132,.01,1,0)
^.1
"^DD",682.1,682.132,.01,1,1,0)
682.132^B
"^DD",682.1,682.132,.01,1,1,1)
S ^LBRY(682.1,DA(1),9,"B",$E(X,1,30),DA)=""
"^DD",682.1,682.132,.01,1,1,2)
K ^LBRY(682.1,DA(1),9,"B",$E(X,1,30),DA)
"^DD",682.1,682.132,.01,3)
Answer must be 1-160 characters in length.
"^DD",682.1,682.132,.01,21,0)
^^4^4^2940523^
"^DD",682.1,682.132,.01,21,1,0)
This field is for those transactions that may have more than
"^DD",682.1,682.132,.01,21,2,0)
one title to be sent in the mail message.  For example, if
"^DD",682.1,682.132,.01,21,3,0)
a prediction pattern is changed, then all titles with that
"^DD",682.1,682.132,.01,21,4,0)
particular prediction pattern will appear on the mail message.
"^DD",682.1,682.132,.01,"DT")
2930506
"^DD",682.1,682.135,0)
EXPLANATION SUB-FIELD^^.01^1
"^DD",682.1,682.135,0,"DT")
2930430
"^DD",682.1,682.135,0,"NM","EXPLANATION")

"^DD",682.1,682.135,0,"UP")
682.1
"^DD",682.1,682.135,.01,0)
EXPLANATION^W^^0;1^Q
"^DD",682.1,682.135,.01,21,0)
^^2^2^2940523^^
"^DD",682.1,682.135,.01,21,1,0)
Give an explanation about why a local serial title transaction
"^DD",682.1,682.135,.01,21,2,0)
was rejected by the National Librarians.
"^DD",682.1,682.135,.01,"DT")
2930430
"^DD",682.1,682.138,0)
DATA EDITED SUB-FIELD^^.01^1
"^DD",682.1,682.138,0,"DT")
2940902
"^DD",682.1,682.138,0,"NM","DATA EDITED")

"^DD",682.1,682.138,0,"UP")
682.1
"^DD",682.1,682.138,.01,0)
DATA EDITED^W^^0;1^Q
"^DD",682.1,682.138,.01,21,0)
^^2^2^2940902^
"^DD",682.1,682.138,.01,21,1,0)
This is the data that was edited for a 'UTL' transaction.
"^DD",682.1,682.138,.01,21,2,0)
This will be used for the 'Any TAF Changes' report.
"^DD",682.1,682.138,.01,"DT")
2940902
"^DIC",680,680,0)
LOCAL SERIALS^680P
"^DIC",680,680,0,"GL")
^LBRY(680,
"^DIC",680,680,"%D",0)
^^6^6^2970402^^^
"^DIC",680,680,"%D",1,0)
This file contains the list of titles at the local VA library.
"^DIC",680,680,"%D",2,0)
Information that is title specific and unique to the local VA
"^DIC",680,680,"%D",3,0)
library is here.  Some information here is holdings information,
"^DIC",680,680,"%D",4,0)
purchasing information, what is the subject for this title and
"^DIC",680,680,"%D",5,0)
whether this title is being received or just that back issues 
"^DIC",680,680,"%D",6,0)
are available in the library.
"^DIC",680,"B","LOCAL SERIALS",680)

"^DIC",680.4,680.4,0)
NAME^680.4I
"^DIC",680.4,680.4,0,"GL")
^LBRY(680.4,
"^DIC",680.4,680.4,"%D",0)
^^2^2^2961011^^
"^DIC",680.4,680.4,"%D",1,0)
This file containes names and services for all donors, requestors
"^DIC",680.4,680.4,"%D",2,0)
and routing recipients.
"^DIC",680.4,"B","NAME",680.4)

"^DIC",680.5,680.5,0)
TITLE AUTHORITY^680.5I
"^DIC",680.5,680.5,0,"GL")
^LBRY(680.5,
"^DIC",680.5,680.5,"%D",0)
^^4^4^2970905^^
"^DIC",680.5,680.5,"%D",1,0)
This is a nationally controlled file containing information for each
"^DIC",680.5,680.5,"%D",2,0)
journal title in any VA library.  Some items in each record are the correct
"^DIC",680.5,680.5,"%D",3,0)
title, the publisher, what this title had for the title previous to this
"^DIC",680.5,680.5,"%D",4,0)
and what this title changed its name to after this name.
"^DIC",680.5,680.5,"%D",5,0)
publication, and editing information.
"^DIC",680.5,"B","TITLE AUTHORITY",680.5)

"^DIC",680.6,680.6,0)
LIBRARY PARAMETERS^680.6I
"^DIC",680.6,680.6,0,"GL")
^LBRY(680.6,
"^DIC",680.6,680.6,"%D",0)
^^5^5^2960130^^^
"^DIC",680.6,680.6,"%D",1,0)
This file containes information about the library using the
"^DIC",680.6,680.6,"%D",2,0)
Local Serials Module.  The name for the library, whether
"^DIC",680.6,680.6,"%D",3,0)
automatic printing is desired and the computer address for
"^DIC",680.6,680.6,"%D",4,0)
the printer in the library used to print routing slips or
"^DIC",680.6,680.6,"%D",5,0)
reports are some of the entries in this file.
"^DIC",680.6,"B","LIBRARY PARAMETERS",680.6)

"^DIC",680.7,680.7,0)
LBRY ITEM PLACEMENT LOCATION^680.7
"^DIC",680.7,680.7,0,"GL")
^LBRY(680.7,
"^DIC",680.7,680.7,"%D",0)
^^2^2^2880829^
"^DIC",680.7,680.7,"%D",1,0)
This file is a list of places where journals the library receives
"^DIC",680.7,680.7,"%D",2,0)
are to be located.
"^DIC",680.7,"B","LBRY ITEM PLACEMENT LOCATION",680.7)

"^DIC",681,681,0)
LBRY DISPOSITION^681I
"^DIC",681,681,0,"GL")
^LBRY(681,
"^DIC",681,681,"%D",0)
^^5^5^2880829^
"^DIC",681,681,"%D",1,0)
This file contains all the copy specific information for any
"^DIC",681,681,"%D",2,0)
locally received title.  Some items found here are what title
"^DIC",681,681,"%D",3,0)
the copy refers to, what copy number or Table of Contents this
"^DIC",681,681,"%D",4,0)
is, who the vendor is and who the list of recipients are if this
"^DIC",681,681,"%D",5,0)
copy is routed.
"^DIC",681,"B","LBRY DISPOSITION",681)

"^DIC",682,682,0)
LBRY ISSUE^682I
"^DIC",682,682,0,"GL")
^LBRY(682,
"^DIC",682,682,"%D",0)
^^4^4^2950829^^
"^DIC",682,682,"%D",1,0)
All the information about each journal date for any local title
"^DIC",682,682,"%D",2,0)
is in this file.  Such things as the journal date, volume, issue
"^DIC",682,682,"%D",3,0)
and the copy status for each copy or Table of Contents are stored
"^DIC",682,682,"%D",4,0)
here.
"^DIC",682,"B","LBRY ISSUE",682)

"^DIC",682.1,682.1,0)
LIBRARY TRANSACTIONS^682.1
"^DIC",682.1,682.1,0,"GL")
^LBRY(682.1,
"^DIC",682.1,682.1,"%D",0)
^^2^2^2931207^
"^DIC",682.1,682.1,"%D",1,0)
This file manages transactions between FORUM and local library
"^DIC",682.1,682.1,"%D",2,0)
sites.
"^DIC",682.1,"B","LIBRARY TRANSACTIONS",682.1)

**END**
**END**

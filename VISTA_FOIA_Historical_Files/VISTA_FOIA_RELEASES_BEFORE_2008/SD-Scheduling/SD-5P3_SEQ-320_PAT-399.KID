Released SD*5.3*399 SEQ #320
Extracted from mail message
**KIDS**:SD*5.3*399^

**INSTALL NAME**
SD*5.3*399
"BLD",5828,0)
SD*5.3*399^SCHEDULING^0^3050202^y
"BLD",5828,1,0)
^^4^4^3041025^^
"BLD",5828,1,1,0)
 
"BLD",5828,1,2,0)
1. UNDEFINED IN WAIT LIST REPORTING
"BLD",5828,1,3,0)
2. MUMPS ERROR IN WAIT LIST STAT REPORT
"BLD",5828,1,4,0)
3. NULL SUBSCRIPT IN WAIT LIST REPORTING 
"BLD",5828,4,0)
^9.64PA^^
"BLD",5828,"KRN",0)
^9.67PA^8989.52^19
"BLD",5828,"KRN",.4,0)
.4
"BLD",5828,"KRN",.401,0)
.401
"BLD",5828,"KRN",.402,0)
.402
"BLD",5828,"KRN",.403,0)
.403
"BLD",5828,"KRN",.5,0)
.5
"BLD",5828,"KRN",.84,0)
.84
"BLD",5828,"KRN",3.6,0)
3.6
"BLD",5828,"KRN",3.8,0)
3.8
"BLD",5828,"KRN",9.2,0)
9.2
"BLD",5828,"KRN",9.8,0)
9.8
"BLD",5828,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",5828,"KRN",9.8,"NM",1,0)
SDWLRQ1^^0^B38506584
"BLD",5828,"KRN",9.8,"NM",2,0)
SDWLRSR^^0^B79333819
"BLD",5828,"KRN",9.8,"NM",3,0)
SDWLRPT1^^0^B41801864
"BLD",5828,"KRN",9.8,"NM","B","SDWLRPT1",3)

"BLD",5828,"KRN",9.8,"NM","B","SDWLRQ1",1)

"BLD",5828,"KRN",9.8,"NM","B","SDWLRSR",2)

"BLD",5828,"KRN",19,0)
19
"BLD",5828,"KRN",19.1,0)
19.1
"BLD",5828,"KRN",101,0)
101
"BLD",5828,"KRN",409.61,0)
409.61
"BLD",5828,"KRN",771,0)
771
"BLD",5828,"KRN",870,0)
870
"BLD",5828,"KRN",8989.51,0)
8989.51
"BLD",5828,"KRN",8989.52,0)
8989.52
"BLD",5828,"KRN",8994,0)
8994
"BLD",5828,"KRN","B",.4,.4)

"BLD",5828,"KRN","B",.401,.401)

"BLD",5828,"KRN","B",.402,.402)

"BLD",5828,"KRN","B",.403,.403)

"BLD",5828,"KRN","B",.5,.5)

"BLD",5828,"KRN","B",.84,.84)

"BLD",5828,"KRN","B",3.6,3.6)

"BLD",5828,"KRN","B",3.8,3.8)

"BLD",5828,"KRN","B",9.2,9.2)

"BLD",5828,"KRN","B",9.8,9.8)

"BLD",5828,"KRN","B",19,19)

"BLD",5828,"KRN","B",19.1,19.1)

"BLD",5828,"KRN","B",101,101)

"BLD",5828,"KRN","B",409.61,409.61)

"BLD",5828,"KRN","B",771,771)

"BLD",5828,"KRN","B",870,870)

"BLD",5828,"KRN","B",8989.51,8989.51)

"BLD",5828,"KRN","B",8989.52,8989.52)

"BLD",5828,"KRN","B",8994,8994)

"BLD",5828,"QUES",0)
^9.62^^
"BLD",5828,"REQB",0)
^9.611^1^1
"BLD",5828,"REQB",1,0)
SD*5.3*273^2
"BLD",5828,"REQB","B","SD*5.3*273",1)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
399^3050202
"PKG",16,22,1,"PAH",1,1,0)
^^4^4^3050202
"PKG",16,22,1,"PAH",1,1,1,0)
 
"PKG",16,22,1,"PAH",1,1,2,0)
1. UNDEFINED IN WAIT LIST REPORTING
"PKG",16,22,1,"PAH",1,1,3,0)
2. MUMPS ERROR IN WAIT LIST STAT REPORT
"PKG",16,22,1,"PAH",1,1,4,0)
3. NULL SUBSCRIPT IN WAIT LIST REPORTING 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","SDWLRPT1")
0^3^B41801864
"RTN","SDWLRPT1",1,0)
SDWLRPT1 ;;IOFO BAY PINES/TEH - WAIT LIST REPORT FORMAT 1;06/12/2002 ; 29 Aug 2002  2:54 PM
"RTN","SDWLRPT1",2,0)
 ;;5.3;scheduling;**263,399**;AUG 13 1993
"RTN","SDWLRPT1",3,0)
 ;
"RTN","SDWLRPT1",4,0)
 ;
"RTN","SDWLRPT1",5,0)
 ;******************************************************************
"RTN","SDWLRPT1",6,0)
 ;                             CHANGE LOG
"RTN","SDWLRPT1",7,0)
 ;                                               
"RTN","SDWLRPT1",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLRPT1",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLRPT1",10,0)
 ;   
"RTN","SDWLRPT1",11,0)
 ;   
"RTN","SDWLRPT1",12,0)
 ;   
"RTN","SDWLRPT1",13,0)
 ;
"RTN","SDWLRPT1",14,0)
EN D INIT
"RTN","SDWLRPT1",15,0)
 I $$S^%ZTLOAD G END
"RTN","SDWLRPT1",16,0)
 D SORT
"RTN","SDWLRPT1",17,0)
 I $$S^%ZTLOAD G END
"RTN","SDWLRPT1",18,0)
 D PRINT
"RTN","SDWLRPT1",19,0)
 I $$S^%ZTLOAD G END
"RTN","SDWLRPT1",20,0)
 K ^TMP("SDWLRPT1",$J),^TMP("SDWLRQ1",$J)
"RTN","SDWLRPT1",21,0)
 Q
"RTN","SDWLRPT1",22,0)
INIT ;Initialize variables
"RTN","SDWLRPT1",23,0)
 ;
"RTN","SDWLRPT1",24,0)
 I $D(CT1) S SDWLCT1=CT1
"RTN","SDWLRPT1",25,0)
 I $D(CT2) S SDWLCT2=CT2
"RTN","SDWLRPT1",26,0)
 I $D(DATE) S SDWLDATE=DATE
"RTN","SDWLRPT1",27,0)
 I $D(FORM) S SDWLFORM=FORM
"RTN","SDWLRPT1",28,0)
 I $D(INS) S SDWLINS=INS
"RTN","SDWLRPT1",29,0)
 I $D(OPEN) S SDWLOPEN=OPEN
"RTN","SDWLRPT1",30,0)
 S SDWLPG=0
"RTN","SDWLRPT1",31,0)
 I $D(ZTSAVE) D
"RTN","SDWLRPT1",32,0)
 .F SDWLI="CT1","CT2","DATE","FORM","INS","OPEN" S SDWL="SDWL"_SDWLI,@SDWL=$G(ZTSAVE(SDWLI))
"RTN","SDWLRPT1",33,0)
 I SDWLINS="ALL" S SDWLIN("ALL")=""
"RTN","SDWLRPT1",34,0)
 S SDWLTXP=$P(SDWLCT1,U,3)
"RTN","SDWLRPT1",35,0)
 S SDWLOPEN=$S(SDWLOPEN=1:"O",1:"C")
"RTN","SDWLRPT1",36,0)
 I SDWLINS'="ALL" F SDWLI=1:1 S SDWLIN=$P($P(SDWLINS,";",SDWLI),U,1) Q:SDWLIN=""  S SDWLIN(SDWLIN)="",^TMP("SDWLRPT1",$J,$P(^DIC(4,SDWLIN,0),U,1))=0
"RTN","SDWLRPT1",37,0)
 I SDWLCT2'="ALL" F SDWLI=1:1 S SDWLCT=$P($P(SDWLCT2,";",SDWLI),U,1) Q:SDWLCT=""  S SDWLCT2(SDWLCT)=""
"RTN","SDWLRPT1",38,0)
 I SDWLDATE="ALL" S SDWLBD=0,SDWLED=9999999 G INIT1
"RTN","SDWLRPT1",39,0)
 S SDWLBD=$P(SDWLDATE,U,1),SDWLED=$P(SDWLDATE,U,2)
"RTN","SDWLRPT1",40,0)
INIT1 D NOW^%DTC S Y=% D DD^%DT S SDWLDTP=$P(Y,":",1,2)
"RTN","SDWLRPT1",41,0)
 Q
"RTN","SDWLRPT1",42,0)
SORT ;Sort Records
"RTN","SDWLRPT1",43,0)
 S SDWLDA=0,SDWLCNT=0 F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA<1  D
"RTN","SDWLRPT1",44,0)
 .S SDWLX=$G(^SDWL(409.3,SDWLDA,0)),SDWLERR=0,SDWLDFN=+SDWLX
"RTN","SDWLRPT1",45,0)
 .;-Check for Institution Sort
"RTN","SDWLRPT1",46,0)
 .I SDWLINS'="ALL" D
"RTN","SDWLRPT1",47,0)
 ..I '$D(SDWLIN(+$P(SDWLX,U,3))) S SDWLERR=1 Q
"RTN","SDWLRPT1",48,0)
 .;-Check for Date Range Compliance
"RTN","SDWLRPT1",49,0)
 .I $P(SDWLX,U,16)<SDWLBD!($P(SDWLX,U,16)>SDWLED) S SDWLERR=2 Q
"RTN","SDWLRPT1",50,0)
 .S SDWLTYP=$P(SDWLCT1,U,1),SDWLTYPE=$S(SDWLTYP="C":$P(SDWLX,U,9),1:$P(SDWLX,U,8)) I SDWLTYPE="" S SDWLERR=7 Q
"RTN","SDWLRPT1",51,0)
 .I SDWLCT2'="ALL" D
"RTN","SDWLRPT1",52,0)
 ..I '$D(SDWLCT2(SDWLTYPE)) S SDWLERR=3
"RTN","SDWLRPT1",53,0)
 .I SDWLTYP="" S SDWLERR=4 Q
"RTN","SDWLRPT1",54,0)
 .I $P(SDWLX,U,3)=""!($P(SDWLX,U,16)="") S SDWLERR=5 Q
"RTN","SDWLRPT1",55,0)
 .I SDWLOPEN'["C",$P(SDWLX,U,17)'[SDWLOPEN S SDWLERR=6 Q
"RTN","SDWLRPT1",56,0)
 .Q:SDWLERR  D
"RTN","SDWLRPT1",57,0)
 ..S SDWLSCC=2,DFN=SDWLDFN D ELIG^VADPT I $D(VAEL(3)) S SDWLSCN=$P(VAEL(3),U,2) I SDWLSCN>49 S SDWLSCC=1
"RTN","SDWLRPT1",58,0)
 ..S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLRPT1",59,0)
 ..S SDWLIENS=$P(SDWLX,U,3)_",",X=$$GET1^DIQ(4,SDWLIENS,".01")
"RTN","SDWLRPT1",60,0)
 ..S SDWLSIEN=SDWLTYPE_",",Y=$$GET1^DIQ(SDWLF,SDWLSIEN,".01")
"RTN","SDWLRPT1",61,0)
 ..S ^TMP("SDWLRPT1",$J,X,Y,SDWLSCC,+$P(SDWLX,U,16),SDWLDA)=""
"RTN","SDWLRPT1",62,0)
 ..S SDWLCNT=SDWLCNT+1,^TMP("SDWLRPT1",$J,$P(^DIC(4,+$P(SDWLX,U,3),0),U,1))=SDWLCNT
"RTN","SDWLRPT1",63,0)
 Q
"RTN","SDWLRPT1",64,0)
PRINT ;Print Report
"RTN","SDWLRPT1",65,0)
 N DFN
"RTN","SDWLRPT1",66,0)
 D HD S SDWLCNT=0 I '$D(^TMP("SDWLRPT1",$J)) W !!,?80-$L("*** No Patient Records to Report ***")\2,"*** No Patient Records to Report ***" Q
"RTN","SDWLRPT1",67,0)
 S SDWLA="" F  S SDWLA=$O(^TMP("SDWLRPT1",$J,SDWLA)) G END:$$S^%ZTLOAD Q:SDWLA=""  D  Q:$D(DUOUT)
"RTN","SDWLRPT1",68,0)
 .D LINE W !!,"Institution: " S X=SDWLA W X I '$G(^TMP("SDWLRPT1",$J,SDWLA)) W !!,"*** No Patient Records to Report ***"
"RTN","SDWLRPT1",69,0)
 .S SDWLB="" F  S SDWLB=$O(^TMP("SDWLRPT1",$J,SDWLA,SDWLB)) Q:SDWLB=""  D  Q:$D(DUOUT)
"RTN","SDWLRPT1",70,0)
 ..W !!,"Clinic/Service: " S X=SDWLB W X,! Q:$D(DUOUT)
"RTN","SDWLRPT1",71,0)
 ..S SDWLC="" F  S SDWLC=$O(^TMP("SDWLRPT1",$J,SDWLA,SDWLB,SDWLC)) Q:SDWLC=""  D  Q:$D(DUOUT)
"RTN","SDWLRPT1",72,0)
 ...S SDWLD="" F  S SDWLD=$O(^TMP("SDWLRPT1",$J,SDWLA,SDWLB,SDWLC,SDWLD)) Q:SDWLD=""  D  Q:$D(DUOUT)
"RTN","SDWLRPT1",73,0)
 ....S SDWLE="" F  S SDWLE=$O(^TMP("SDWLRPT1",$J,SDWLA,SDWLB,SDWLC,SDWLD,SDWLE)) Q:SDWLE=""  D  Q:$D(DUOUT)
"RTN","SDWLRPT1",74,0)
 .....S SDWLDFN=$P($G(^SDWL(409.3,SDWLE,0)),U,1),DFN=SDWLDFN D DEM^VADPT,ELIG^VADPT,ADD^VADPT
"RTN","SDWLRPT1",75,0)
 .....S SDWLNAM=VADM(1),SDWLELIG=VAEL(1) I SDWLELIG="" S SDWLELIG=0
"RTN","SDWLRPT1",76,0)
 .....I SDWLELIG=0 S SDWLELIG="No Eligibility Status found"
"RTN","SDWLRPT1",77,0)
 .....S SDWLDEAD=1
"RTN","SDWLRPT1",78,0)
 .....S SDWLSSN=VA("BID"),SDWLAPTD=$P(^SDWL(409.3,SDWLE,0),U,16),SDWLCOM=$P(^SDWL(409.3,SDWLE,0),U,18)
"RTN","SDWLRPT1",79,0)
 .....S SDWLRBY=$P(^SDWL(409.3,SDWLE,0),U,12),SDWLRPV=$P(^SDWL(409.3,SDWLE,0),U,13)
"RTN","SDWLRPT1",80,0)
 .....S SDWLPH=$G(VAPA(8)) I SDWLAPTD'="" S Y=SDWLAPTD D DD^%DT S SDWLAPTD=Y
"RTN","SDWLRPT1",81,0)
 .....W !!,SDWLNAM
"RTN","SDWLRPT1",82,0)
 .....W ?35,SDWLSSN I SDWLAPTD'="" W ?50,"Desired Date: ",SDWLAPTD
"RTN","SDWLRPT1",83,0)
 .....W !,"Primary Eligibility: ",$P(SDWLELIG,U,2)
"RTN","SDWLRPT1",84,0)
 .....W !,"Comments: ",SDWLCOM,!
"RTN","SDWLRPT1",85,0)
 .....I SDWLRBY W !,"Requested by: ",$$EXTERNAL^DILFD(409.3,11,,SDWLRBY)
"RTN","SDWLRPT1",86,0)
 .....I SDWLRPV W ?35,"Requesting Provider: " S X=$$EXTERNAL^DILFD(409.3,12,,SDWLRPV) W X
"RTN","SDWLRPT1",87,0)
 .....W !,"Telephone (Home): ",$P(SDWLPH,U,1) I $P(SDWLPH,U,2) W !,?10,"(Work): ",$P(SDWLPH,U,2)
"RTN","SDWLRPT1",88,0)
 .....I $D(^SDWL(409.3,SDWLE,"DIS")) D
"RTN","SDWLRPT1",89,0)
 ......S SDWLDISX=$G(^SDWL(409.3,SDWLE,"DIS")),SDWLDIS=$P(SDWLDISX,U,3),SDWLDDUZ=$P(SDWLDISX,U,2)
"RTN","SDWLRPT1",90,0)
 ......S SDWLDDT=$P(^SDWL(409.3,SDWLE,"DIS"),U,1),SDWLDIDT=$E(SDWLDDT,4,5)_"/"_$E(SDWLDDT,6,7)_"/"_$E(SDWLDDT,2,3)
"RTN","SDWLRPT1",91,0)
 .....I $D(SDWLDISX) W !,"Disposition: ",$P(SDWLDISX,U,3)," (",SDWLDIDT,")" K SDWLDISX,SDWLDIS,SDWLDDUZ,SDWLDIDT
"RTN","SDWLRPT1",92,0)
 .....W !,"*****"
"RTN","SDWLRPT1",93,0)
 .....I $D(SDWLSPT),$Y>IOSL S DIR(0)="E" D ^DIR I X["^" S DUOUT=1 Q
"RTN","SDWLRPT1",94,0)
 .....I '$D(SDWLSPT),'$D(DUOUT),$Y>(IOSL-5) D HD
"RTN","SDWLRPT1",95,0)
 W !!,"** End of Report **"
"RTN","SDWLRPT1",96,0)
 Q
"RTN","SDWLRPT1",97,0)
LINE ;Draw Line
"RTN","SDWLRPT1",98,0)
 W !,"_______________________________________________________________________________"
"RTN","SDWLRPT1",99,0)
 Q
"RTN","SDWLRPT1",100,0)
HD ;Header
"RTN","SDWLRPT1",101,0)
 W:$D(IOF) @IOF W !,SDWLDTP,?80-$L("Appointment Wait List Report")\2,"Appointment Wait List Report"
"RTN","SDWLRPT1",102,0)
 S SDWLPG=SDWLPG+1 W ?72,"Page: ",SDWLPG
"RTN","SDWLRPT1",103,0)
 W !!,?30,"Institution: " I SDWLINS="ALL" D
"RTN","SDWLRPT1",104,0)
 .W ?45,SDWLINS
"RTN","SDWLRPT1",105,0)
 F I=1:1 S X=$P($P(SDWLINS,";",I),"^",2) Q:X=""  W:I>1 ! W ?45,X
"RTN","SDWLRPT1",106,0)
 S Y=$P(SDWLDATE,U,1) D DD^%DT S SDWLBDT=Y S Y=$P(SDWLDATE,U,2) D DD^%DT S SDWLEDT=Y
"RTN","SDWLRPT1",107,0)
 W !,?23,"Date Desired Range: ",SDWLBDT
"RTN","SDWLRPT1",108,0)
 I SDWLEDT'="" W " to ",SDWLEDT
"RTN","SDWLRPT1",109,0)
 S X=$P(SDWLCT2,U,2)
"RTN","SDWLRPT1",110,0)
 W !?26,"Report Category: ",$S($P(SDWLCT1,U,1)="C":"CLINIC",1:"SPECIALTY") I X="ALL" W " ALL"
"RTN","SDWLRPT1",111,0)
 S SDWLF=$P(SDWLCT1,U,1)
"RTN","SDWLRPT1",112,0)
 I X'="ALL" D
"RTN","SDWLRPT1",113,0)
 .F I=1:1 S X=$P($P(SDWLCT2,";",I),"^",2) Q:X=""  W !,?45,$S(SDWLF="C":$P(^SC(X,0),U,1),1:$P(^DIC(40.7,X,0),U,1))
"RTN","SDWLRPT1",114,0)
 S X=$G(SDWLOPEN) W !,?35,"Status: ",$S(SDWLOPEN="O":"Open",1:"All")
"RTN","SDWLRPT1",115,0)
 S X=$G(SDWLFORM) W !,?28,"Output Format: ",$S(SDWLFORM="S":"Summary",1:"Detailed")
"RTN","SDWLRPT1",116,0)
 Q
"RTN","SDWLRPT1",117,0)
END K SDWL,SDWLA,SDWLAPTD,SDWLB,SDWLBD,SDWLBDT,SDWLC,SDWLCAT,SDWLCNT,SDWLCOM,SDWLCT1,SDWLCT2,SDWLCTX,SDWLD
"RTN","SDWLRPT1",118,0)
 K SDLWDA,SDLWDEAD,SDWLDFN,SDWLE,SDWLEDT,SDWLELIG,SDWLERR,SDWLF,SDWLFD,SDWLI,SDWLIN,SDWLINS,SDWLINST
"RTN","SDWLRPT1",119,0)
 K SDWLNAM,SDWLPD,SDWLPG,SDWLPH,SDWLPROM,SDWLRBY,SDWLPRV,SDWLSCC,SDWLSPT,SDWLSSN,SDWLTAG,SDLTK,SDWLTXP
"RTN","SDWLRPT1",120,0)
 K SDWLTYP,SDWLTYPE,SDWLX,VDAM,VAPA,SDWLIENS,CT1,CT2,DATE,I,INS,OPEN,FORM,SDWLSIEN
"RTN","SDWLRPT1",121,0)
 D EN^SDWLKIL
"RTN","SDWLRPT1",122,0)
 Q
"RTN","SDWLRQ1")
0^1^B38506584
"RTN","SDWLRQ1",1,0)
SDWLRQ1 ;;IOFO BAY PINES/TEH - ADHOC WAIT LIST REPORT;06/12/2002 ; 20 Aug 2002  2:10 PM
"RTN","SDWLRQ1",2,0)
 ;;5.3;scheduling;**263,399**;AUG 13 1993
"RTN","SDWLRQ1",3,0)
 ;
"RTN","SDWLRQ1",4,0)
 ;
"RTN","SDWLRQ1",5,0)
 ;******************************************************************
"RTN","SDWLRQ1",6,0)
 ;                             CHANGE LOG
"RTN","SDWLRQ1",7,0)
 ;                                               
"RTN","SDWLRQ1",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLRQ1",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLRQ1",10,0)
 ;   
"RTN","SDWLRQ1",11,0)
 ;   
"RTN","SDWLRQ1",12,0)
 ;   
"RTN","SDWLRQ1",13,0)
 ;   
"RTN","SDWLRQ1",14,0)
EN ;Header
"RTN","SDWLRQ1",15,0)
 N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSAVE,ZTSK
"RTN","SDWLRQ1",16,0)
 D HD
"RTN","SDWLRQ1",17,0)
 S SDWLINST="",SDWLERR=0 K ^TMP("SDWLRQ1",$J),DIC,DIR,DR,DIE
"RTN","SDWLRQ1",18,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLRQ1",19,0)
2 D CAT G 1:SDWLERR,2:$D(DUOUT)
"RTN","SDWLRQ1",20,0)
3 D DATE G 2:SDWLERR,END:$D(DUOUT)
"RTN","SDWLRQ1",21,0)
4 D OPEN G 3:SDWLERR,3:$D(DUOUT)
"RTN","SDWLRQ1",22,0)
5 D FORM G 4:SDWLERR,4:$D(DUOUT)
"RTN","SDWLRQ1",23,0)
6 D DIS G EN:SDWLERR=1,END:SDWLERR=2
"RTN","SDWLRQ1",24,0)
 D QUE
"RTN","SDWLRQ1",25,0)
 Q
"RTN","SDWLRQ1",26,0)
INS ;Get Institution
"RTN","SDWLRQ1",27,0)
 N SDWLINST S SDWLINST=""
"RTN","SDWLRQ1",28,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // "
"RTN","SDWLRQ1",29,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!($D(^SDWL(409.31,""E"",+Y)))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLRQ1",30,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLRQ1",31,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLRQ1",32,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLRQ1",$J,"INS")="ALL" G IN3
"RTN","SDWLRQ1",33,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLRQ1",34,0)
IN2 S ^TMP("SDWLRQ1",$J,"INS")=SDWLINST
"RTN","SDWLRQ1",35,0)
IN3 Q
"RTN","SDWLRQ1",36,0)
CAT ;Report category selection
"RTN","SDWLRQ1",37,0)
 K DIR,DIE,DR,DIC
"RTN","SDWLRQ1",38,0)
 W !!,"    *** Report Category Selection ***" S SDWLERR=0
"RTN","SDWLRQ1",39,0)
 S SDWLERR=0,SDWLCAT="",DIR(0)="SO^1:Clinic;2:Select Service/Specialty",DIR("L",1)="     1. Clinic",DIR("L")="     2. Service/Specialty"
"RTN","SDWLRQ1",40,0)
 D ^DIR
"RTN","SDWLRQ1",41,0)
 I X="^" S SDWLERR=1 W *7 Q
"RTN","SDWLRQ1",42,0)
 I X="" S SDWLERR=1 W *7 Q
"RTN","SDWLRQ1",43,0)
 S X=$S(X["C":"C",X["c":"C",X["S":"S",X["s":"S",X=1:"C",X=2:"S",1:"")
"RTN","SDWLRQ1",44,0)
 I X="" W *7," Invalid Selection." G CAT
"RTN","SDWLRQ1",45,0)
 W !!,"Select Category for Report Output",!
"RTN","SDWLRQ1",46,0)
 S SDWLX=$S(X="C":"Clinic: ALL// ",X="S":"Service/Specialty: ALL// ")
"RTN","SDWLRQ1",47,0)
 S SDWLF=$S(X["C":409.32,X["S":409.31,X["c":409.32,X["s":409.31)
"RTN","SDWLRQ1",48,0)
 S SDWLFD=$S(X="C":8,1:7)
"RTN","SDWLRQ1",49,0)
 S SDWLCTX=X
"RTN","SDWLRQ1",50,0)
 K DIR,DIC,DR
"RTN","SDWLRQ1",51,0)
 S ^TMP("SDWLRQ1",$J,"CT1")=SDWLCTX_"^"_SDWLF_"^"_SDWLFD,DIC("A")=SDWLX,SDWLE=0
"RTN","SDWLRQ1",52,0)
CT1 W ! S DIC(0)="QEMNZA",DIC=SDWLF D ^DIC I 'SDWLE,Y<1 S ^TMP("SDWLRQ1",$J,"CT2")="ALL" G CT3
"RTN","SDWLRQ1",53,0)
 I Y<0,'$D(^TMP("SDWLRQ1",$J,"CT1")) W !,"This Entry is Required." G CAT
"RTN","SDWLRQ1",54,0)
 G CT2:Y<0
"RTN","SDWLRQ1",55,0)
 S SDWLCAT=SDWLCAT_Y_";",DIC("A")="Another "_$P(SDWLX,":",1)_": ",SDWLE=1 G CT1
"RTN","SDWLRQ1",56,0)
CT2 G CT1:'$D(SDWLCAT) S ^TMP("SDWLRQ1",$J,"CT2")=SDWLCAT
"RTN","SDWLRQ1",57,0)
CT3 Q
"RTN","SDWLRQ1",58,0)
DATE ;Date range selection
"RTN","SDWLRQ1",59,0)
 K X,Y,%DT
"RTN","SDWLRQ1",60,0)
 S %=1 W !!,"Print Report for ALL dates? " D YN^DICN
"RTN","SDWLRQ1",61,0)
 I %=1 S ^TMP("SDWLRQ1",$J,"DATE")="ALL" G E1
"RTN","SDWLRQ1",62,0)
 Q:%=0
"RTN","SDWLRQ1",63,0)
 Q:%=-1
"RTN","SDWLRQ1",64,0)
 S SDWLERR=0 W ! S %DT="AE",%DT("A")="Start with Desired Appointment Date: " D ^%DT
"RTN","SDWLRQ1",65,0)
 I X["^" S SDWLERR=1 Q
"RTN","SDWLRQ1",66,0)
 G E1:Y<0 S SDWLBDT=Y
"RTN","SDWLRQ1",67,0)
 Q:$D(DUOUT)
"RTN","SDWLRQ1",68,0)
 S %DT(0)=SDWLBDT,%DT("A")="End with Desired Appointment Date: " D ^%DT G DATE:Y<1 S SDWLEDT=Y K %DT(0),%DT("A")
"RTN","SDWLRQ1",69,0)
 G DATE:$D(DUOUT)
"RTN","SDWLRQ1",70,0)
 I SDWLEDT<SDWLBDT W !,"Beginning Date must be greater than Ending Date." G DATE
"RTN","SDWLRQ1",71,0)
 S ^TMP("SDWLRQ1",$J,"DATE")=SDWLBDT_"^"_SDWLEDT Q
"RTN","SDWLRQ1",72,0)
E1 Q
"RTN","SDWLRQ1",73,0)
OPEN ;OPEN Wait List Entries  
"RTN","SDWLRQ1",74,0)
 S %=1 W !!,"Do you want only 'OPEN' Wait List Entries " D YN^DICN
"RTN","SDWLRQ1",75,0)
 I %=0 W " Response must be 'YES' or 'NO'." G OPEN
"RTN","SDWLRQ1",76,0)
 I %=-1 S SDWLERR=1 W *7,"?? "
"RTN","SDWLRQ1",77,0)
 S ^TMP("SDWLRQ1",$J,"OPEN")=%
"RTN","SDWLRQ1",78,0)
 Q
"RTN","SDWLRQ1",79,0)
FORM ;Report Format
"RTN","SDWLRQ1",80,0)
 S SDWLERR=0,DIR(0)="SO^1:D:Detailed;S:Summary",DIR("L",2)="     D Detailed"
"RTN","SDWLRQ1",81,0)
 S DIR("L")="     S Summary",DIR("L",1)="Select One of the Following: "
"RTN","SDWLRQ1",82,0)
 D ^DIR
"RTN","SDWLRQ1",83,0)
 S SDWLFORM=$S(X["D":"D",X["d":"D",X["S":"S",X["s":"S",1:"")
"RTN","SDWLRQ1",84,0)
 I X="^" S DUOUT=1 Q
"RTN","SDWLRQ1",85,0)
 I SDWLFORM="" W *7,"Required!" G FORM
"RTN","SDWLRQ1",86,0)
 S ^TMP("SDWLRQ1",$J,"FORM")=SDWLFORM
"RTN","SDWLRQ1",87,0)
 Q
"RTN","SDWLRQ1",88,0)
DIS ;Display Parameters
"RTN","SDWLRQ1",89,0)
 S SDWLERR=0 W !!,?80-$L("*** Selected Report Parameters ***")\2,"*** Selected Report Parameters ***",!
"RTN","SDWLRQ1",90,0)
 F SDWLI="INS","CT1","CT2","DATE","FORM","OPEN" D
"RTN","SDWLRQ1",91,0)
 .S X="SDWL"_SDWLI,@X=$G(^TMP("SDWLRQ1",$J,SDWLI))
"RTN","SDWLRQ1",92,0)
 F SDWLTAG="IS","CT","DA","OP","PR" D @SDWLTAG
"RTN","SDWLRQ1",93,0)
 Q
"RTN","SDWLRQ1",94,0)
IS I SDWLINS'["ALL" D
"RTN","SDWLRQ1",95,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLINS,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ1",96,0)
 .W !,?20,"Institution: "
"RTN","SDWLRQ1",97,0)
 .I $D(SDWLY) S I="" F  S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?33 W SDWLY(I)
"RTN","SDWLRQ1",98,0)
 .K SDWLY
"RTN","SDWLRQ1",99,0)
 I SDWLINS["ALL" W !,?20,"Institution: ALL "
"RTN","SDWLRQ1",100,0)
 Q
"RTN","SDWLRQ1",101,0)
CT I SDWLCT2'["ALL" D
"RTN","SDWLRQ1",102,0)
 .S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLRQ1",103,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLCT2,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ1",104,0)
 .W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 I @X="ALL" W "All "
"RTN","SDWLRQ1",105,0)
 .I $D(SDWLY) S I="" F   S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?35 W $$EXTERNAL^DILFD(SDWLF,.01,,SDWLY(I))
"RTN","SDWLRQ1",106,0)
 I SDWLCT2["ALL" W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 W "ALL "
"RTN","SDWLRQ1",107,0)
 Q
"RTN","SDWLRQ1",108,0)
DA W !,?13,"Date Desired Range: " S Y=$P(SDWLDATE,U,1) D DD^%DT S SDWLBD=Y S Y=$P(SDWLDATE,U,2) D DD^%DT S SDWLED=Y
"RTN","SDWLRQ1",109,0)
 W " ",SDWLBD
"RTN","SDWLRQ1",110,0)
 I SDWLED'="" W " to ",SDWLED
"RTN","SDWLRQ1",111,0)
 Q
"RTN","SDWLRQ1",112,0)
OP W !,?18,"Output Format: ",$S(SDWLFORM="D":" Detailed",1:" Summary")
"RTN","SDWLRQ1",113,0)
 Q
"RTN","SDWLRQ1",114,0)
PR I SDWLOPEN=1 W !,?25,"Printing 'OPEN' Entries Only."
"RTN","SDWLRQ1",115,0)
 E  W !,?25,"Printing ALL Entries."
"RTN","SDWLRQ1",116,0)
 S %=1 W !!,"Are these Parameters Correct " D YN^DICN I %=2 S SDWLERR=1 W !,"  This Report will NOT be queued to print."
"RTN","SDWLRQ1",117,0)
 I SDWLERR S DIR(0)="E" D ^DIR I X["^" S SDWLERR=2
"RTN","SDWLRQ1",118,0)
 Q
"RTN","SDWLRQ1",119,0)
QUE ;Queue Report
"RTN","SDWLRQ1",120,0)
 N ZTQUEUED,POP
"RTN","SDWLRQ1",121,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLRQ1",122,0)
 S ZTRTN=$S(SDWLFORM="D":"EN^SDWLRPT1",1:"EN^SDWLRPS1"),ZTDTH=$H,ZTDESC="WAIT LIST REPORT FORMAT 1"
"RTN","SDWLRQ1",123,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLRQ1",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLRQ1",124,0)
 .S SDWLTK=$G(^TMP("SDWLRQ1",$J,SDWLTASK))
"RTN","SDWLRQ1",125,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLRQ1",126,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G END
"RTN","SDWLRQ1",127,0)
QUE1 S SDWLSPT="" I $D(ZTRTN) D @ZTRTN
"RTN","SDWLRQ1",128,0)
 ;
"RTN","SDWLRQ1",129,0)
END ;
"RTN","SDWLRQ1",130,0)
 K SDWLTASK,SDWLY,SDWLED,WDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI,I
"RTN","SDWLRQ1",131,0)
 K DIR,DIC,DR,DIE,SDWLERR,SDWLF,SDWLX,SDLFD,SDWLCTX,SDWLDAT,SDWLPROM,SDWLINST,SDWLI,SDWLTAG,SDWLY
"RTN","SDWLRQ1",132,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLRQ1",133,0)
 Q
"RTN","SDWLRQ1",134,0)
HD W:$D(IOF) @IOF W !,?80-$L("Appointment Wait List Report")\2,"Appointment Wait List Report"
"RTN","SDWLRQ1",135,0)
 Q
"RTN","SDWLRSR")
0^2^B79333819
"RTN","SDWLRSR",1,0)
SDWLRSR ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT ; 01 Oct 2002  4:42 PM
"RTN","SDWLRSR",2,0)
 ;;5.3;scheduling;**263,273,399**;AUG 13 1993
"RTN","SDWLRSR",3,0)
 ;
"RTN","SDWLRSR",4,0)
 ;
"RTN","SDWLRSR",5,0)
 ;
"RTN","SDWLRSR",6,0)
 ;
"RTN","SDWLRSR",7,0)
EN ;
"RTN","SDWLRSR",8,0)
 ;
"RTN","SDWLRSR",9,0)
 D INIT
"RTN","SDWLRSR",10,0)
 I $$S^ZTLOAD Q
"RTN","SDWLRSR",11,0)
 D SORT
"RTN","SDWLRSR",12,0)
 I $$S^ZTLOAD Q
"RTN","SDWLRSR",13,0)
 D PRT
"RTN","SDWLRSR",14,0)
 I $$S^ZTLOAD Q
"RTN","SDWLRSR",15,0)
 G END
"RTN","SDWLRSR",16,0)
INIT ;
"RTN","SDWLRSR",17,0)
 I $D(CT) S SDWLCT2=CT
"RTN","SDWLRSR",18,0)
 I $D(DATE) S SDWLDATE=DATE
"RTN","SDWLRSR",19,0)
 I $D(INS) S SDWLINS=INS
"RTN","SDWLRSR",20,0)
 I $D(ZTSAVE) D
"RTN","SDWLRSR",21,0)
 .S SDWLCT=$G(ZTSAVE("CT")),SDWLDATE=$G(ZTSAVE("DATE")),SDWLINS=$G(ZTSAVE("INS"))
"RTN","SDWLRSR",22,0)
 I SDWLINS'="ALL" F I=1:1 S SDWL=$P(SDWLINS,";",I) Q:SDWL=""  S SDWL("INS",+SDWL)=""
"RTN","SDWLRSR",23,0)
 S SDWLBD=$P(SDWLDATE,U,1),SDWLED=$P(SDWLDATE,U,2),SDWLPG=0
"RTN","SDWLRSR",24,0)
 D NOW^%DTC S Y=% D DD^%DT S SDWLDTP=Y
"RTN","SDWLRSR",25,0)
 Q
"RTN","SDWLRSR",26,0)
SORT ;SORT AND CALCULATE STAT REPORT
"RTN","SDWLRSR",27,0)
 K ^TMP("SDWLRSR1",$J),^TMP("SDWLRSR2",$J) S (SDWLERR,SDWLPR,SDWLC,SDWLD,SDWLNC,SDWLSA,SDWLCC,SDWLNN,SDWLER,SDWLAD,SDWLRE,SDWLNR)=0
"RTN","SDWLRSR",28,0)
 S SDWLDA=0 F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA=""  D
"RTN","SDWLRSR",29,0)
 .I $D(DUOUT) Q
"RTN","SDWLRSR",30,0)
 .S SDWLX=$G(^SDWL(409.3,SDWLDA,0)) Q:SDWLX=""  S SDWLINSN=+$P(SDWLX,U,3) I 'SDWLINSN Q
"RTN","SDWLRSR",31,0)
 .S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="U"
"RTN","SDWLRSR",32,0)
 .S SDWLDFN=+SDWLX I 'SDWLDFN Q
"RTN","SDWLRSR",33,0)
 .S SDWLTYP=$P(SDWLX,U,5),SDWLTYPN=$S(SDWLTYP=1:$P(SDWLX,U,6),SDWLTYP=2:$P(SDWLX,U,7),SDWLTYP=3:$P(SDWLX,U,8),SDWLTYP=4:$P(SDWLX,U,9),1:"")
"RTN","SDWLRSR",34,0)
 .I SDWLTYPN="" Q
"RTN","SDWLRSR",35,0)
 .S SDWLFLD=$S(SDWLTYP=1:5,SDWLTYP=2:6,SDWLTYP=3:7,SDWLTYP=4:8)
"RTN","SDWLRSR",36,0)
 .S SDWLTYNM=$$EXTERNAL^DILFD(409.3,SDWLFLD,,SDWLTYPN) I SDWLTYNM="" S SDWLTYNM="UNKNOWN"
"RTN","SDWLRSR",37,0)
 .I 'SDWLINSN Q
"RTN","SDWLRSR",38,0)
 .I $D(SDWL("INS")) D
"RTN","SDWLRSR",39,0)
 ..;CHECK FOR SPECIFIC INSTITUTIONAL SORT
"RTN","SDWLRSR",40,0)
 ..S SDWLINS=$P(SDWLX,U,3),SDWLERR=0 I SDWLINS'="ALL",'$D(SDWL("INS",SDWLINS)) S SDWLERR=1 Q
"RTN","SDWLRSR",41,0)
 ..S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="N"
"RTN","SDWLRSR",42,0)
 .I SDWLERR Q
"RTN","SDWLRSR",43,0)
 .;CHECK DATE RANGE
"RTN","SDWLRSR",44,0)
 .S SDWLOFDT=$P(SDWLX,U,2),SDWLOK1=1 I SDWLOFDT>SDWLBD!(SDWLOFDT=SDWLBD) D
"RTN","SDWLRSR",45,0)
 ..I SDWLOFDT<SDWLED!(SDWLOFDT=SDWLED) S SDWLOK1=0
"RTN","SDWLRSR",46,0)
 .S SDWLX1=$P(^DIC(4,+$P(SDWLX,U,3),0),U,1),SDWLY1=SDWLTYP
"RTN","SDWLRSR",47,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")) ^("AD")=0
"RTN","SDWLRSR",48,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")) ^("AD")=0
"RTN","SDWLRSR",49,0)
 .I 'SDWLOK1 D S1
"RTN","SDWLRSR",50,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLRSR",51,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLRSR",52,0)
 .S SDWLDFDT=0,SDWLOK3=1 I $D(^SDWL(409.3,SDWLDA,"DIS")) S SDWLDFDT=$P(^("DIS"),U,1),SDWLOK3=0 I SDWLDFDT<SDWLBD!(SDWLDFDT>SDWLED) S SDWLOK3=1
"RTN","SDWLRSR",53,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")) ^("CL")=0
"RTN","SDWLRSR",54,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")) ^("CL")=0
"RTN","SDWLRSR",55,0)
 .I 'SDWLOK3 D S3
"RTN","SDWLRSR",56,0)
 .S SDWLTYP=$P(SDWLX,U,5)
"RTN","SDWLRSR",57,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")) ^("PR")=0
"RTN","SDWLRSR",58,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")) ^("PR")=0
"RTN","SDWLRSR",59,0)
 .S SDWLFLG=0
"RTN","SDWLRSR",60,0)
 .I SDWLOFDT'>SDWLBD D
"RTN","SDWLRSR",61,0)
 ..I SDWLOFDT=SDWLBD Q
"RTN","SDWLRSR",62,0)
 ..I $P(SDWLX,U,17)["O" S SDWLFLG=1
"RTN","SDWLRSR",63,0)
 ..I $D(^SDWL(409.3,SDWLDA,"DIS")) D
"RTN","SDWLRSR",64,0)
 ...I 'SDWLFLG,($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)>SDWLBD)!($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)=SDWLBD) S SDWLFLG=1
"RTN","SDWLRSR",65,0)
 ..I SDWLFLG D
"RTN","SDWLRSR",66,0)
 ...S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")+1
"RTN","SDWLRSR",67,0)
 ...S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")+1
"RTN","SDWLRSR",68,0)
 .I $P(SDWLX,U,14) D
"RTN","SDWLRSR",69,0)
 ..S SDWLRDT=$P(SDWLX,U,14)
"RTN","SDWLRSR",70,0)
 ..I SDWLRDT>SDWLBD!(SDWLRDT=SDWLBD)!(SDWLRDT<SDWLED)!(SDWLRDT=SDWLED) D
"RTN","SDWLRSR",71,0)
 ...S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLRSR",72,0)
 ...S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")=^("NR")+1
"RTN","SDWLRSR",73,0)
 ...S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLRSR",74,0)
 ...S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLRSR",75,0)
 .D S2
"RTN","SDWLRSR",76,0)
 .I $$S^ZTLOAD S DUOUT=""
"RTN","SDWLRSR",77,0)
 Q
"RTN","SDWLRSR",78,0)
S1 ;ORIGINATING DATE MEETS CRITERIA
"RTN","SDWLRSR",79,0)
 ;
"RTN","SDWLRSR",80,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")+1
"RTN","SDWLRSR",81,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")=^("AD")+1
"RTN","SDWLRSR",82,0)
 Q
"RTN","SDWLRSR",83,0)
S2 ;DO NOT REMOVE DATE MEETS CRITERIA
"RTN","SDWLRSR",84,0)
 ;
"RTN","SDWLRSR",85,0)
 S X1=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR"),X2=$G(^("AD")),X3=$G(^("CL")) S X4=X1+X2-X3
"RTN","SDWLRSR",86,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"RR")=($G(^("PR"))+($G(^("AD"))))-$G(^("CL"))
"RTN","SDWLRSR",87,0)
 S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLRSR",88,0)
 Q
"RTN","SDWLRSR",89,0)
S3 S SDWLDIS=^SDWL(409.3,SDWLDA,"DIS")  D
"RTN","SDWLRSR",90,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")+1
"RTN","SDWLRSR",91,0)
 .S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")+1
"RTN","SDWLRSR",92,0)
 .S SDWLDP=$P(SDWLDIS,U,3),X="SDWL"_SDWLDP,@X=@X+1 S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)) ^(X)=0
"RTN","SDWLRSR",93,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)+1
"RTN","SDWLRSR",94,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)) ^(X)=0
"RTN","SDWLRSR",95,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)=^(X)+1
"RTN","SDWLRSR",96,0)
 Q
"RTN","SDWLRSR",97,0)
PRT ;PRINT REPORT
"RTN","SDWLRSR",98,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,SDWLPG)=0 D HD,HD1
"RTN","SDWLRSR",99,0)
 I '$D(^TMP("SDWLRSR1")) W !!,"No Wait List Data to Report" Q
"RTN","SDWLRSR",100,0)
 S SDWLINS="" F  S SDWLINS=$O(^TMP("SDWLRSR1",$J,SDWLINS)) Q:SDWLINS=""  D  D T2  Q:$D(DUOUT)  W !,"________________" I $Y>(IOSL-5) D:$D(SDWLSPT) SCR D HD,HD1
"RTN","SDWLRSR",101,0)
 .I $$S^ZTLOAD S DUOUT="" Q 
"RTN","SDWLRSR",102,0)
 .W !!,"INSTITUTION: ",SDWLINS,!
"RTN","SDWLRSR",103,0)
 .S SDWLTY="" F  S SDWLTY=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY)) Q:SDWLTY=""  D
"RTN","SDWLRSR",104,0)
 ..S SDWLTNM=$$EXTERNAL^DILFD(409.3,4,,SDWLTY) W !,$E(SDWLTNM,1,15)
"RTN","SDWLRSR",105,0)
 ..S SDWLSCN="" F  S SDWLSCN=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN)) Q:SDWLSCN=""  D
"RTN","SDWLRSR",106,0)
 ...S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLRSR",107,0)
 ...S SDWLSCNM="" F  S SDWLSCNM=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM)) Q:SDWLSCNM=""  D  D T1
"RTN","SDWLRSR",108,0)
 ....S SDWLPRI="" F  S SDWLPRI=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI)) Q:SDWLPRI=""  D
"RTN","SDWLRSR",109,0)
 .....W !,?2,$E(SDWLSCNM,1,10)," ",$S(SDWLPRI="A":"ASAP",SDWLPRI="F":"FUTURE",1:"")
"RTN","SDWLRSR",110,0)
 .....S SDWLPR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"PR")) W ?20,SDWLPR
"RTN","SDWLRSR",111,0)
 .....S SDWLCL=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"CL")) W ?27,SDWLCL
"RTN","SDWLRSR",112,0)
 .....S SDWLD=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLD")) W ?35,SDWLD
"RTN","SDWLRSR",113,0)
 .....S SDWLNC=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNC")) W ?38,SDWLNC
"RTN","SDWLRSR",114,0)
 .....S SDWLSA=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLSA")) W ?42,SDWLSA
"RTN","SDWLRSR",115,0)
 .....S SDWLCC=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLCC")) W ?46,SDWLCC
"RTN","SDWLRSR",116,0)
 .....S SDWLNN=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNN")) W ?50,SDWLNN
"RTN","SDWLRSR",117,0)
 .....S SDWLER=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLER")) W ?54,SDWLER
"RTN","SDWLRSR",118,0)
 .....S SDWLAD=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"AD")) W ?60,SDWLAD
"RTN","SDWLRSR",119,0)
 .....S SDWLRR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"RR")) W ?66,SDWLRR
"RTN","SDWLRSR",120,0)
 .....S SDWLNR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"NR")) W ?75,SDWLNR
"RTN","SDWLRSR",121,0)
 .....S T1=T1+SDWLPR,TT1=TT1+SDWLPR
"RTN","SDWLRSR",122,0)
 .....S T2=T2+SDWLCL,TT2=TT2+SDWLCL
"RTN","SDWLRSR",123,0)
 .....S T3=T3+SDWLD,TT3=TT3+SDWLD
"RTN","SDWLRSR",124,0)
 .....S T4=T4+SDWLNC,TT4=TT4+SDWLNC
"RTN","SDWLRSR",125,0)
 .....S T5=T5+SDWLSA,TT5=TT5+SDWLSA
"RTN","SDWLRSR",126,0)
 .....S T6=T6+SDWLCC,TT6=TT6+SDWLCC
"RTN","SDWLRSR",127,0)
 .....S T7=T7+SDWLNN,TT7=TT7+SDWLNN
"RTN","SDWLRSR",128,0)
 .....S T8=T8+SDWLER,TT8=TT8+SDWLER
"RTN","SDWLRSR",129,0)
 .....S T9=T9+SDWLAD,TT9=TT9+SDWLAD
"RTN","SDWLRSR",130,0)
 .....S T10=T10+SDWLRR,TT10=TT10+SDWLRR
"RTN","SDWLRSR",131,0)
 .....S T11=T11+SDWLNR,TT11=TT11+SDWLNR
"RTN","SDWLRSR",132,0)
 .....I $Y>(IOSL-5) D:$D(SDWLSPT) SCR D HD,HD1
"RTN","SDWLRSR",133,0)
 Q
"RTN","SDWLRSR",134,0)
SCR S DIR(0)="E" D ^DIR
"RTN","SDWLRSR",135,0)
 Q
"RTN","SDWLRSR",136,0)
T1 ;
"RTN","SDWLRSR",137,0)
 W !,?18,"------",?25,"------",?32,"-----",?38,"--",?42,"--",?46,"--",?50,"--",?54,"--",?57,"-----",?63,"------",?71,"-------"
"RTN","SDWLRSR",138,0)
 W !,"Sub-Totals:"
"RTN","SDWLRSR",139,0)
 ;write sub-totals
"RTN","SDWLRSR",140,0)
 W ?20,T1,?27,T2,?35,T3,?38,T4,?42,T5,?46,T6,?50,T7,?54,T8,?60,T9,?66,T10,?75,T11,!
"RTN","SDWLRSR",141,0)
 S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLRSR",142,0)
 I $Y>(IOSL-5) D:$D(SDWLSPT) SCR D HD,HD1
"RTN","SDWLRSR",143,0)
 Q
"RTN","SDWLRSR",144,0)
T2 W !,"Institution Totals:"
"RTN","SDWLRSR",145,0)
 W ?20,TT1,?27,TT2,?35,TT3,?38,TT4,?42,TT5,?46,TT6,?50,TT7,?54,TT8,?60,TT9,?66,TT10,?75,TT11,!
"RTN","SDWLRSR",146,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11)=0
"RTN","SDWLRSR",147,0)
 I $Y>(IOSL-5) D:$D(SDWLSPT) SCR D HD,HD1
"RTN","SDWLRSR",148,0)
 Q
"RTN","SDWLRSR",149,0)
HD W:$D(IOF) @IOF S SDWLPG=SDWLPG+1 W !!,SDWLDTP,?80-$L("Wait List (Sch/PCMM) Stat Report")\2,"Wait List (Sch/PCMM) Stat Report",?65,"Page: ",SDWLPG
"RTN","SDWLRSR",150,0)
 W !,?80-$L("STARTED Date: ")\2,"STARTED Date: " S Y=$P(SDWLDATE,U,1) D DD^%DT W Y
"RTN","SDWLRSR",151,0)
 W !,?80-$L("FINISHED Date: ")\2,"FINISHED Date: " S Y=$P(SDWLDATE,U,2) D DD^%DT W Y
"RTN","SDWLRSR",152,0)
 Q
"RTN","SDWLRSR",153,0)
HD1 ;
"RTN","SDWLRSR",154,0)
 W !,?19,"PREV",?59,"#",?65,"#",?72,"# NOT"
"RTN","SDWLRSR",155,0)
 W !,"WAIT LIST TYPE",?18,"REMAIN",?25,"CLOSED",?32,"DEATH",?38,"NC",?42,"SA"
"RTN","SDWLRSR",156,0)
 W ?46,"CC",?50,"NN",?54,"ER",?57,"ADDED",?63,"REMAIN",?71,"REMOVED",!
"RTN","SDWLRSR",157,0)
 Q
"RTN","SDWLRSR",158,0)
END D EN^SDWLKIL
"RTN","SDWLRSR",159,0)
 K ^TMP("SDWLRSR1",$J),^TMP("SDWLRSR2",$J),SDWLY1,SDWLX1,SDWLRDT,CT,I
"RTN","SDWLRSR",160,0)
 K T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,SDWLAD,SDWLBD,SDWLCC,SDWLCT,SDWLDFDT,SDWLDP,SDWLED,SDWLER,SDWLERR,SDWLFLD,X1,X2,DATE
"RTN","SDWLRSR",161,0)
 K TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,SDWLINSN,SDWLINST,SDWLNC,SDWLNN,SDWLNR,SDWLOFDT,SDWLOK1,SDWLOK2,SDWLTYPN
"RTN","SDWLRSR",162,0)
 K SDWLOK3,SDWLPR,SDWLPR,SDWLPROM,SDWLRE,SDWLRFDT,SDWLRR,SDWLSA,SDWLSCN,SDWLSCNM,SDWLTASK,SDWLTK,SDWLTNM,SDWLTYNM,SDWLTYP,X4
"RTN","SDWLRSR",163,0)
 Q
"VER")
8.0^22.0
**END**
**END**

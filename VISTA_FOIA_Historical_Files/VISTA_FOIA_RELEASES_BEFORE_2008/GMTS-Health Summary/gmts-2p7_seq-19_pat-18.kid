Released GMTS*2.7*18 SEQ #19
Extracted from mail message
**KIDS**:GMTS*2.7*18^

**INSTALL NAME**
GMTS*2.7*18
"BLD",515,0)
GMTS*2.7*18^HEALTH SUMMARY^0^^n
"BLD",515,1,0)
^^2^2^2970812^^
"BLD",515,1,1,0)
This is health summary patch GMTS*2.7*18.  Please
"BLD",515,1,2,0)
see the national patch module for a complete description.
"BLD",515,4,0)
^9.64PA^^
"BLD",515,"ABPKG")
n
"BLD",515,"KRN",0)
^9.67PA^19^18
"BLD",515,"KRN",.4,0)
.4
"BLD",515,"KRN",.401,0)
.401
"BLD",515,"KRN",.402,0)
.402
"BLD",515,"KRN",.403,0)
.403
"BLD",515,"KRN",.5,0)
.5
"BLD",515,"KRN",.84,0)
.84
"BLD",515,"KRN",3.6,0)
3.6
"BLD",515,"KRN",3.8,0)
3.8
"BLD",515,"KRN",9.2,0)
9.2
"BLD",515,"KRN",9.8,0)
9.8
"BLD",515,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",515,"KRN",9.8,"NM",1,0)
GMTSLRCE^^0^B9031885
"BLD",515,"KRN",9.8,"NM","B","GMTSLRCE",1)

"BLD",515,"KRN",19,0)
19
"BLD",515,"KRN",19.1,0)
19.1
"BLD",515,"KRN",101,0)
101
"BLD",515,"KRN",409.61,0)
409.61
"BLD",515,"KRN",771,0)
771
"BLD",515,"KRN",869.2,0)
869.2
"BLD",515,"KRN",870,0)
870
"BLD",515,"KRN",8994,0)
8994
"BLD",515,"KRN","B",.4,.4)

"BLD",515,"KRN","B",.401,.401)

"BLD",515,"KRN","B",.402,.402)

"BLD",515,"KRN","B",.403,.403)

"BLD",515,"KRN","B",.5,.5)

"BLD",515,"KRN","B",.84,.84)

"BLD",515,"KRN","B",3.6,3.6)

"BLD",515,"KRN","B",3.8,3.8)

"BLD",515,"KRN","B",9.2,9.2)

"BLD",515,"KRN","B",9.8,9.8)

"BLD",515,"KRN","B",19,19)

"BLD",515,"KRN","B",19.1,19.1)

"BLD",515,"KRN","B",101,101)

"BLD",515,"KRN","B",409.61,409.61)

"BLD",515,"KRN","B",771,771)

"BLD",515,"KRN","B",869.2,869.2)

"BLD",515,"KRN","B",870,870)

"BLD",515,"KRN","B",8994,8994)

"BLD",515,"QUES",0)
^9.62^^
"BLD",515,"REQB",0)
^9.611^^
"OER",187,0)
187^GMTS^0^^
"OER",187,1,0)
^100.9951PA^1^1
"OER",187,1,1,0)
2025
"OER",187,1,1,1,0)
^100.99511PA^3^3
"OER",187,1,1,1,1,0)
231
"OER",187,1,1,1,2,0)
229
"OER",187,1,1,1,3,0)
230
"PKG",187,-1)
1^1
"PKG",187,0)
HEALTH SUMMARY^GMTS^Integrated Health Summary Tools
"PKG",187,22,0)
^9.49I^1^1
"PKG",187,22,1,0)
2.7^2951020^2960308
"PKG",187,22,1,"PAH",1,0)
18
"PKG",187,22,1,"PAH",1,1,0)
^^2^2^2970812
"PKG",187,22,1,"PAH",1,1,1,0)
This is health summary patch GMTS*2.7*18.  Please
"PKG",187,22,1,"PAH",1,1,2,0)
see the national patch module for a complete description.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","GMTSLRCE")
0^1^B9031885
"RTN","GMTSLRCE",1,0)
GMTSLRCE ;SLC/JER - Chemistry Extract Routine ;8/12/97  09:06
"RTN","GMTSLRCE",2,0)
 ;;2.7;Health Summary;**18**;Oct 20, 1995
"RTN","GMTSLRCE",3,0)
XTRCT ; Call with LRDFN, GMTS1, GMTS2, MAX (#occurrences) & SEX (M or F)
"RTN","GMTSLRCE",4,0)
 N IDT,CNT,AGE
"RTN","GMTSLRCE",5,0)
 I '$D(GMTSAGE) D DEM^GMTSU
"RTN","GMTSLRCE",6,0)
 S AGE=GMTSAGE
"RTN","GMTSLRCE",7,0)
 K ^TMP("LRC",$J)
"RTN","GMTSLRCE",8,0)
 S IDT=GMTS1,CNT=0 F  S IDT=$O(^LR(LRDFN,"CH",IDT)) Q:IDT=""!(IDT>GMTS2)  D:CNT'>MAX CHSET
"RTN","GMTSLRCE",9,0)
 Q
"RTN","GMTSLRCE",10,0)
CHSET ; Sets Chemistry locals for printing
"RTN","GMTSLRCE",11,0)
 N CDT,SITE,SPEC,PTR,ISVALID,GMI,ACC,LOC,COM,RDT,SNOMED
"RTN","GMTSLRCE",12,0)
 S ISVALID=$P(^LR(LRDFN,"CH",IDT,0),U,3) Q:ISVALID=""
"RTN","GMTSLRCE",13,0)
 S SNOMED=""
"RTN","GMTSLRCE",14,0)
 S CDT=+^LR(LRDFN,"CH",IDT,0),SITE=$P(^(0),U,5),SPEC=$P(^LAB(61,SITE,0),U),SNOMED=$P(^(0),U,2),CNT=CNT+1
"RTN","GMTSLRCE",15,0)
 I $D(EXPAND) S SPEC=SNOMED_";"_SPEC,RDT=$P(^LR(LRDFN,"CH",IDT,0),U,3),ACC=$P(^(0),U,6),ACC=$P(ACC," ",2,3)_" "_$P(ACC," "),LOC=$P(^(0),U,11) S X=RDT D FMHL7DTM^GMTSU S RDT=X K X
"RTN","GMTSLRCE",16,0)
 S X=CDT D REGDTM^GMTSU:'$D(EXPAND),FMHL7DTM^GMTSU:$D(EXPAND) S CDT=X K X
"RTN","GMTSLRCE",17,0)
 S PTR=1 F  S PTR=$O(^LR(LRDFN,"CH",IDT,PTR)) Q:PTR<1  D NXTST
"RTN","GMTSLRCE",18,0)
 I $D(^LR(LRDFN,"CH",IDT,1,0)),($D(^TMP("LRC",$J,IDT))) D
"RTN","GMTSLRCE",19,0)
 . S COM=0 F GMI=1:1 S COM=$O(^LR(LRDFN,"CH",IDT,1,COM)) Q:+COM'>0  S ^TMP("LRC",$J,IDT,"C",GMI)=^LR(LRDFN,"CH",IDT,1,COM,0)
"RTN","GMTSLRCE",20,0)
 Q
"RTN","GMTSLRCE",21,0)
NXTST ; Visit next node in ^(PTR) subtree
"RTN","GMTSLRCE",22,0)
 N RESULT,FLAG,TEST,GMPC,GMSQN,TNM,DESCR,THER,UNIT,HI,LO,CIS
"RTN","GMTSLRCE",23,0)
 S RESULT=$P(^LR(LRDFN,"CH",IDT,PTR),U),FLAG=$P(^(PTR),U,2),CIS=""
"RTN","GMTSLRCE",24,0)
 I $D(EXPAND),(FLAG["*") S FLAG=$S(FLAG="L*":"LL",FLAG="H*":"HH",1:FLAG)
"RTN","GMTSLRCE",25,0)
 S TEST=$O(^LAB(60,"C","CH;"_PTR_";1",0)) Q:TEST'>0
"RTN","GMTSLRCE",26,0)
 S TNM=$S($L($P(^LAB(60,TEST,0),U))<19:$P(^(0),U),1:$P(^(.1),U))
"RTN","GMTSLRCE",27,0)
 ; If Test Type field is neither "Output" or "Both" then quit
"RTN","GMTSLRCE",28,0)
 I $S("BO"'[$P(^LAB(60,TEST,0),U,3):1,1:0) Q
"RTN","GMTSLRCE",29,0)
 S GMSQN=$S($P($G(^LAB(60,TEST,.1)),U,6):$P($G(^(.1)),U,6),1:PTR/1000000)
"RTN","GMTSLRCE",30,0)
 I $D(^LAB(60,TEST,10)) S CIS=^(10)
"RTN","GMTSLRCE",31,0)
 I $D(EXPAND),'$L(CIS) Q
"RTN","GMTSLRCE",32,0)
 I $D(EXPAND) S TNM=CIS_";"_TNM
"RTN","GMTSLRCE",33,0)
 ; Execute Print Code from file 60 to evaluate RESULT
"RTN","GMTSLRCE",34,0)
 S RESULT=$$RESULT(TEST,RESULT,$G(RWIDTH))
"RTN","GMTSLRCE",35,0)
 S DESCR=$S($D(^LAB(60,TEST,1,SITE,0)):^(0),1:""),THER=$S($L($P(DESCR,U,11,12))>1:1,1:0)
"RTN","GMTSLRCE",36,0)
 S UNIT=$P(DESCR,U,7),LO=$S(THER:$P(DESCR,U,11),1:$P(DESCR,U,2)),HI=$S(THER:$P(DESCR,U,12),1:$P(DESCR,U,3))
"RTN","GMTSLRCE",37,0)
 S @("LO="_$S($L(LO):LO,1:"""""")),@("HI="_$S($L(HI):HI,1:""""""))
"RTN","GMTSLRCE",38,0)
 I $D(EXPAND),'$L(FLAG),(+$G(HI)'<+$G(RESULT)),(+$G(LO)'>+$G(RESULT)) S FLAG="N"
"RTN","GMTSLRCE",39,0)
 F  Q:'$D(^TMP("LRC",$J,IDT,GMSQN))  Q:TEST=+^(GMSQN)  S GMSQN=GMSQN+1
"RTN","GMTSLRCE",40,0)
 Q:$D(^TMP("LRC",$J,IDT,GMSQN))
"RTN","GMTSLRCE",41,0)
 S ^TMP("LRC",$J,IDT,GMSQN)=CDT_U_SPEC_U_TNM_U_RESULT_U_FLAG_U_UNIT_U_LO_U_HI
"RTN","GMTSLRCE",42,0)
 I $D(EXPAND) D XPND
"RTN","GMTSLRCE",43,0)
 Q
"RTN","GMTSLRCE",44,0)
XPND ; Appends additional data if required
"RTN","GMTSLRCE",45,0)
 S ^TMP("LRC",$J,IDT,GMSQN)=^TMP("LRC",$J,IDT,GMSQN)_U_ACC_U_RDT_U_LOC
"RTN","GMTSLRCE",46,0)
 Q
"RTN","GMTSLRCE",47,0)
RESULT(TEST,RESULT,LRCW) ;Convert result to external format
"RTN","GMTSLRCE",48,0)
 ;TEST=Test ptr to file 60
"RTN","GMTSLRCE",49,0)
 ;RESULT=Test result
"RTN","GMTSLRCE",50,0)
 ;LRCW=Optional width of variable. Default is 0
"RTN","GMTSLRCE",51,0)
 N X,X1
"RTN","GMTSLRCE",52,0)
 I +$G(LRCW)'>0 S LRCW=0
"RTN","GMTSLRCE",53,0)
 S X1=$P($G(^LAB(60,TEST,.1)),"^",3),X1=$S($L(X1):X1,1:"$J(X,LRCW)"),X=RESULT,@("X="_X1)
"RTN","GMTSLRCE",54,0)
 Q X
"VER")
8.0^21.0
**END**
**END**

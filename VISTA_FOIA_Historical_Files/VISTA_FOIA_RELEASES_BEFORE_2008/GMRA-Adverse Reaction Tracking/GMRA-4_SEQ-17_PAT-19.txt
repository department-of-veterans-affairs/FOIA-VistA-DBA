$TXT Created by NABER,DAVID A at DEVCUR.FO-SLC.MED.VA.GOV  (KIDS) on Tuesday, 05/18/04 at 10:14
=============================================================================
Run Date: JUN 18, 2004                     Designation: GMRA*4*19
Package : GMRA - ADVERSE REACTION TRACKING    Priority: Mandatory
Version : 4        SEQ #17                      Status: Released
                  Compliance Date: JUL 19, 2004
=============================================================================

Associated patches: (v)GMRA*4*17   <<= must be installed BEFORE `GMRA*4*19'

Subject: Notifications from CPRS when allergies are added

Category: 
  - Routine

Description:
============

 With this patch, a couple of issues related to the utility that
 was released in patch GMRA*4*17 will be addressed.  In addition, the
 sending of bulletins related to new allergy entry, need for verification,
 and need for marking chart/ID bands will now be done when entering an
 allergy from CPRS GUI.  Due to the change that will cause bulletins to be
 sent, sites should review all GMRA related mail groups to be sure they are
 correctly populated.
  
 This patch also changes the order in which files that contain matching 
 reactants appear to the user.  With patch GMRA*4*17, the names of the 
 files that contained matching selections were displayed before the list 
 of matches.  Although this helps identify the file from which you're 
 choosing, users will still often pick the first match that they see.  
 Selections from the ingredient and drug class file, while legitimate, 
 only supply partial information that is required for order checking to 
 work.  As a result, the ingredient and drug class files were moved to the 
 bottom of the selection list to encourage selection from one of the drug 
 related files or the GMR ALELRGIES file (#120.82), which will provide 
 complete information.
  
 Changes in the order in which files appear in the tree view and the 
 prohibition of free text entries for CPRS GUI will be released in v24 
 (patch OR*3.0*190).  Once v24 is installed, the entry of allergies will 
 be consistent between the ART package and CPRS GUI.
  
 This patch also includes a post-install that will review the VERIFIED 
 field (#19) of the PATIENT ALLERGIES file (#120.8) for null entries.  A 
 previous patch fixed a problem with the VERIFIED field being incorrectly 
 set to null but did not update entries affected by this problem. The
 post-install will compare the allergy against the site's auto-verification
 settings and either mark the allergy as verified or mark it as not
 verified.  For those entries marked as not verified, the sites can use
 standard allergy options to verify the remaining allergy entries.  Each 
 entry that is updated by this process will have a comment indicating that 
 the entry was auto-updated by the patch 19 post-install.  In addition, a 
 mail message will be sent to the installer when the post-install finishes 
 to let them know how many entries were reviewed and how many were updated.
  
 NOIS
 ====
 CHY-0204-50521     Mailgroup does not get bulletin
 HWH-1203-40144     Bulletin not being generated for drug allergies.
 SHE-0703-51726     Observed Reaction entry in CPRS does not generate 
                    bulletin
 TNV-0703-31715     Bulletin/alerts not generating from CPRS
 SFC-0602-61054     Non-verified Allergies in CPRS
 TOM-0301-40674     Food allergy not appearing in diet activity rpt
 DEN-0800-51684     ALLERGY BULLETINS NOT BEING SENT
 PRO-0400-11345     View Alerts Missing
 PHI-0100-20715     User not getting alerts
 SLC-1199-50431     Not receiving mailgroup message to verify allergy
 BRX-0899-11086     NOT GETTING ALERTS FOR NON-VERIFIED ADR'S
 NHM-0699-10918     E-MAIL NOT RECEIVED FOR ALLERGIES TO BE VERIFIED.
 PAL-0299-62732     ALLERY DOESN'T SHOW ON DA LIST
 MON-0299-51120     CPRS entry - no alert
 SDC-1298-60864     ALLERGY WON'T LINK TO DIETETICS
  
 When an allergy is entered via GUI CPRS, no bulletins are being sent to 
 the appropriate users/mail groups.  In addition, food related entries are 
 not sent to the DIETETIC EVENTS file (#119.8).  Allergy entries will now 
 correctly fire alerts/bulletins when they are entered via CPRS GUI.  For 
 food based allergies, the DIETETIC EVENTS file will only be updated if 
 the food allergy appears in the GMR ALLERGIES file as free text entries 
 are no longer allowed (as of patch GMRA*4*17).
  
 LIT-0104-71425     Alloc error in GMRA FREE TEXT UTILITY
 BRX-1203-11254     ALLOC ERROR
 RIC-0204-21063     error DUPLAB+11 in ORKCHK5
  
 While using the utility to update free text entries, distributed in patch 
 GMRA*4*17, it's possible to get an allocation error if the patient being 
 updated has a high number of active orders or if you attempt to do a 
 detailed display on a large group of free text entries.  This has now 
 been fixed to better handle large amounts of data.
  
 NIN-0204-41832     SYNTAX ERROR IN ALLERGY UTILITY
  
 If the free text reaction includes a quote mark the utility will error 
 during processing of this reactant.  A change has been made to strip the 
 reactant of quote marks before adding it to the list of free text entries.
  
 TUA-0898-31232     UNABLE TO VERIFY SOME ADVERSE REACTIONS/ALLERGIES
  
 Patch GMRA*4*12 fixed a problem related to CPRS entered allergies not 
 being correctly auto-verified.  However, reactants entered before the 
 patch could have been left with the VERIFIED field left blank, which put 
 it in a state where it couldn't be verified by using the standard allergy 
 options.  A post-install has been included in this patch that will review 
 all active allergies for living, non-test, patients and attempt to
 auto-verify any entries that have a null value in the VERIFIED field.  A
 report will be generated when the post-install finishes.
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;4.0;Adverse Reaction Tracking;**[patch list]**;Mar 29, 1996
  
                            CHECK^XTSUMBLD results
 Routine name         Before Patch          After Patch         Patch List
 ============         ============          ===========         ==========
 GMRAFX                   29943036             30182435            17,19
 GMRAFX1                  13606085             14035522            17,19
 GMRAFX2                  13058727             13058727            17,19
 GMRAFX3                  14437876             14449305            17,19
 GMRAOR5                   7640269              8972865          4,12,13,19
 GMRAPES0                 27112804             27203878           13,17,19
 GMRASEN2                  4662582              4347053            14,19
 GMRASEND                  5332572              5102198            14,19
 GMRASIGN                 14414875             14487255            17,19
 GMRAY19                       N/A              5081699              19
  
 INSTALLATION
 ============
 Users may be on the system during installation of this patch, though this
 patch should be loaded during non-peak hours to minimize disruption to
 users.  Installation will take less than 5 minutes.
  
 *NOTE: A routine will be queued to run in the background that will fix the
 VERIFIED field set to null problem.  A mail message will be sent upon
 completion of the review.  The message will identify how many entries had 
 a null value in the VERIFIED field and of those, how many were 
 auto-verified.  The entries that are not auto-verified may be reviewed by 
 using standard allergy verification options.
  
 *NOTE: Due to the change that will cause bulletins to now be sent upon 
 allergy entry within GUI, sites should review their GMRA related mail 
 groups to be sure they are populated.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2.  Review your mapped set.  If any of the routines listed in the
     ROUTINE SUMMARY section are mapped, they should be removed
     from the mapped set at this time.
  
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter GMRA*4.0*19):
         a.  Backup a Transport Global
         b.  Compare Transport Global to Current System
         c.  Verify Checksums in Transport Global
  
 5.  Use the Install Package(s) option and select the package GMRA*4.0*19.
  
 6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
     you may respond NO.
  
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond NO.
  
 8.  If routines were unmapped as part of step 2, they should be returned
     to the mapped set once the installation has run to completion.
  
 9.  Upon receipt of the post-installation message you may delete routine 
     GMRAY19

Routine Information:
====================

Routine Name:
  - GMRAFX1


Routine Checksum:

Routine Name:
  - GMRAFX2


Routine Checksum:

Routine Name:
  - GMRAFX3


Routine Checksum:

Routine Name:
  - GMRAPES0


Routine Checksum:

Routine Name:
  - GMRAOR5


Routine Checksum:

Routine Name:
  - GMRAY19


Routine Checksum:

Routine Name:
  - GMRAFX


Routine Checksum:

Routine Name:
  - GMRASIGN


Routine Checksum:

Routine Name:
  - GMRASEN2


Routine Checksum:

Routine Name:
  - GMRASEND


Routine Checksum:

=============================================================================
User Information:
Entered By  : NABER,DAVID A                 Date Entered  : FEB 09, 2004
Completed By: HULET,LEE ANN                 Date Completed: JUN 17, 2004
Released By : HEMBREE,SUSAN                 Date Released : JUN 18, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

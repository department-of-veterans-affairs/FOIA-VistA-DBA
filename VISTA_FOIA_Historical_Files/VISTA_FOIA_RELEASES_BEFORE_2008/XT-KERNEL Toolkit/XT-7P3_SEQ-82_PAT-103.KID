Released XT*7.3*103 SEQ #82
Extracted from mail message
**KIDS**:XT*7.3*103^

**INSTALL NAME**
XT*7.3*103
"BLD",6833,0)
XT*7.3*103^TOOLKIT^0^3061205^y
"BLD",6833,1,0)
^^5^5^3061205^^^^
"BLD",6833,1,1,0)
Patch #103 for the Kernel Tool kit and applies to the National CPRS
"BLD",6833,1,2,0)
Response time monitor.
"BLD",6833,1,3,0)
 
"BLD",6833,1,4,0)
See patch XT*7.3*103 in the National Patch Module on FORUM for complete
"BLD",6833,1,5,0)
information on this patch.
"BLD",6833,4,0)
^9.64PA^^
"BLD",6833,6)
2^
"BLD",6833,6.3)
4
"BLD",6833,"ABPKG")
n
"BLD",6833,"KRN",0)
^9.67PA^8989.52^19
"BLD",6833,"KRN",.4,0)
.4
"BLD",6833,"KRN",.401,0)
.401
"BLD",6833,"KRN",.402,0)
.402
"BLD",6833,"KRN",.403,0)
.403
"BLD",6833,"KRN",.5,0)
.5
"BLD",6833,"KRN",.84,0)
.84
"BLD",6833,"KRN",3.6,0)
3.6
"BLD",6833,"KRN",3.8,0)
3.8
"BLD",6833,"KRN",9.2,0)
9.2
"BLD",6833,"KRN",9.8,0)
9.8
"BLD",6833,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6833,"KRN",9.8,"NM",1,0)
AWCMFTP^^0^B30840748
"BLD",6833,"KRN",9.8,"NM","B","AWCMFTP",1)

"BLD",6833,"KRN",19,0)
19
"BLD",6833,"KRN",19.1,0)
19.1
"BLD",6833,"KRN",101,0)
101
"BLD",6833,"KRN",409.61,0)
409.61
"BLD",6833,"KRN",771,0)
771
"BLD",6833,"KRN",870,0)
870
"BLD",6833,"KRN",8989.51,0)
8989.51
"BLD",6833,"KRN",8989.52,0)
8989.52
"BLD",6833,"KRN",8994,0)
8994
"BLD",6833,"KRN","B",.4,.4)

"BLD",6833,"KRN","B",.401,.401)

"BLD",6833,"KRN","B",.402,.402)

"BLD",6833,"KRN","B",.403,.403)

"BLD",6833,"KRN","B",.5,.5)

"BLD",6833,"KRN","B",.84,.84)

"BLD",6833,"KRN","B",3.6,3.6)

"BLD",6833,"KRN","B",3.8,3.8)

"BLD",6833,"KRN","B",9.2,9.2)

"BLD",6833,"KRN","B",9.8,9.8)

"BLD",6833,"KRN","B",19,19)

"BLD",6833,"KRN","B",19.1,19.1)

"BLD",6833,"KRN","B",101,101)

"BLD",6833,"KRN","B",409.61,409.61)

"BLD",6833,"KRN","B",771,771)

"BLD",6833,"KRN","B",870,870)

"BLD",6833,"KRN","B",8989.51,8989.51)

"BLD",6833,"KRN","B",8989.52,8989.52)

"BLD",6833,"KRN","B",8994,8994)

"BLD",6833,"QUES",0)
^9.62^^
"BLD",6833,"REQB",0)
^9.611^1^1
"BLD",6833,"REQB",1,0)
XT*7.3*86^2
"BLD",6833,"REQB","B","XT*7.3*86",1)

"MBREQ")
0
"PKG",338,-1)
1^1
"PKG",338,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP
"PKG",338,20,0)
^9.402P^^
"PKG",338,22,0)
^9.49I^1^1
"PKG",338,22,1,0)
7.3^2950403^2950608
"PKG",338,22,1,"PAH",1,0)
103^3061205^661
"PKG",338,22,1,"PAH",1,1,0)
^^5^5^3061205
"PKG",338,22,1,"PAH",1,1,1,0)
Patch #103 for the Kernel Tool kit and applies to the National CPRS
"PKG",338,22,1,"PAH",1,1,2,0)
Response time monitor.
"PKG",338,22,1,"PAH",1,1,3,0)
 
"PKG",338,22,1,"PAH",1,1,4,0)
See patch XT*7.3*103 in the National Patch Module on FORUM for complete
"PKG",338,22,1,"PAH",1,1,5,0)
information on this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","AWCMFTP")
0^1^B30840748^B30709030
"RTN","AWCMFTP",1,0)
AWCMFTP ;VISN 7/THM-FTP FILES TO SERVER from VISTA ; Feb 27, 2004
"RTN","AWCMFTP",2,0)
 ;;7.3;TOOLKIT;**84,86,103**;Jan 09, 2004;Build 4
"RTN","AWCMFTP",3,0)
 ;
"RTN","AWCMFTP",4,0)
 W *7,!,"Enter at line EN^AWCMFTP.",!
"RTN","AWCMFTP",5,0)
 Q
"RTN","AWCMFTP",6,0)
EN ; variables killed in calling program
"RTN","AWCMFTP",7,0)
 S VMSC=""                                            ;INIT THE VAR
"RTN","AWCMFTP",8,0)
 ; AWCHFIL1= whole VMS path
"RTN","AWCMFTP",9,0)
 S AWCHFILE="AWCMOVEHTM.COM"                          ;COM file name
"RTN","AWCMFTP",10,0)
 I AWCX="NT" S AWCHFILE=AWCFILE
"RTN","AWCMFTP",11,0)
 S AWCDTAX=$G(^AWC(177100.12,1,0))
"RTN","AWCMFTP",12,0)
 S AWCDIR=$P(AWCDTAX,U,5)             ;Parameter file
"RTN","AWCMFTP",13,0)
 S:AWCDIR="" AWCDIR="SYS$SYSDEVICE:[DSMMGR]"          ;DEFAULT
"RTN","AWCMFTP",14,0)
 S AWCSITE=$$SITE^VASITE,AWCSITE=$P(AWCSITE,U,2)      ;site Name
"RTN","AWCMFTP",15,0)
 S AWCSITEN=+$$SITE^VASITE                            ;3 dig number
"RTN","AWCMFTP",16,0)
 S AWCDIRL=$$LOW^XLFSTR(AWCDIR),AWCHFILL=$$LOW^XLFSTR(AWCHFILE)
"RTN","AWCMFTP",17,0)
 S AWCWBFLD=$P(AWCDTAX,U,15),AWCWBFLD=$$LOW^XLFSTR(AWCWBFLD) ;web page folder
"RTN","AWCMFTP",18,0)
 ; Note: file deletion is not a problem for NT/Cache since it overwrites the files
"RTN","AWCMFTP",19,0)
 S AWCMVMSL=+$P(AWCDTAX,U,16) ;VMS logging
"RTN","AWCMFTP",20,0)
 S AWCMVMSD=+$P(AWCDTAX,U,18) ;VMS delete
"RTN","AWCMFTP",21,0)
 S AWCDIRCH=+$P(AWCDTAX,U,19) ;use change dir command?
"RTN","AWCMFTP",22,0)
 S AWCWBFLD=$P(AWCWBFLD,"/",2)
"RTN","AWCMFTP",23,0)
 D @AWCX
"RTN","AWCMFTP",24,0)
 Q
"RTN","AWCMFTP",25,0)
 ;
"RTN","AWCMFTP",26,0)
NT ; NT script
"RTN","AWCMFTP",27,0)
 S AWCC=1
"RTN","AWCMFTP",28,0)
 K ^TMP("AWCMFTP",$J)
"RTN","AWCMFTP",29,0)
 S ^TMP("AWCMFTP",$J,AWCC,0)="open "_AWCMSRV,AWCC=AWCC+1 ;server ip address
"RTN","AWCMFTP",30,0)
 S ^TMP("AWCMFTP",$J,AWCC,0)=AWCMUSR,AWCC=AWCC+1 ; ftp user
"RTN","AWCMFTP",31,0)
 S ^TMP("AWCMFTP",$J,AWCC,0)=AWCMPW,AWCC=AWCC+1  ;ftp password
"RTN","AWCMFTP",32,0)
 S ^TMP("AWCMFTP",$J,AWCC,0)="ascii",AWCC=AWCC+1
"RTN","AWCMFTP",33,0)
 I $G(AWCDIRCH)=1 S ^TMP("AWCMFTP",$J,AWCC,0)="cd "_AWCWBFLD,AWCC=AWCC+1 ;****
"RTN","AWCMFTP",34,0)
 S ^TMP("AWCMFTP",$J,AWCC,0)="put "_AWCDIRL_"\"_AWCHFILE,AWCC=AWCC+1 ;****
"RTN","AWCMFTP",35,0)
 S ^TMP("AWCMFTP",$J,AWCC,0)="bye"
"RTN","AWCMFTP",36,0)
 ; write it to the NT directory
"RTN","AWCMFTP",37,0)
 S Y=$$GTF^%ZISH($NA(^TMP("AWCMFTP",$J,1,0)),3,AWCDIRL,"ftpawc.txt")
"RTN","AWCMFTP",38,0)
 ; send command to NT to execute this batch file
"RTN","AWCMFTP",39,0)
 S CMD="S AWCVAR=$ZF(-1,""ftp -s:""_AWCDIRL_""\ftpawc.txt"")"
"RTN","AWCMFTP",40,0)
 X CMD G EXIT
"RTN","AWCMFTP",41,0)
 ;
"RTN","AWCMFTP",42,0)
VMSC ; VMS FOR CACHE MODS TO DOUBLE CHECK FOR OS
"RTN","AWCMFTP",43,0)
 S VMSC=1
"RTN","AWCMFTP",44,0)
 ;
"RTN","AWCMFTP",45,0)
VMS ; VMS com file script
"RTN","AWCMFTP",46,0)
 ; Captive process so we give full privs
"RTN","AWCMFTP",47,0)
 S AWC=1
"RTN","AWCMFTP",48,0)
 K ^TMP("AWCMFTP",$J)
"RTN","AWCMFTP",49,0)
 S ^TMP("AWCMFTP",$J,AWC,0)="$ set proc/priv = all"
"RTN","AWCMFTP",50,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="$ set noon"
"RTN","AWCMFTP",51,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="$ assign sys$command sys$input "
"RTN","AWCMFTP",52,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="$ set verify"
"RTN","AWCMFTP",53,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="$ a=""''f$user()'"""
"RTN","AWCMFTP",54,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="$ set def "_AWCDIR
"RTN","AWCMFTP",55,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="$ set prot=(w:rwed,g:rwed,o:rwed,s:rwed) "_AWCDIR_AWCHFILE
"RTN","AWCMFTP",56,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="$ ftp "_AWCMSRV
"RTN","AWCMFTP",57,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)=AWCMUSR
"RTN","AWCMFTP",58,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)=AWCMPW
"RTN","AWCMFTP",59,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="ascii"
"RTN","AWCMFTP",60,0)
 I $G(AWCDIRCH)=1 S ^TMP("AWCMFTP",$J,AWC,0)="cd "_AWCWBFLD ;****
"RTN","AWCMFTP",61,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="put "_AWCHFIL1
"RTN","AWCMFTP",62,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="bye"
"RTN","AWCMFTP",63,0)
 S AWC=AWC+1,^TMP("AWCMFTP",$J,AWC,0)="$ exit"
"RTN","AWCMFTP",64,0)
 ; send to VMS
"RTN","AWCMFTP",65,0)
 S Y=$$GTF^%ZISH($NA(^TMP("AWCMFTP",$J,1,0)),3,AWCDIR,AWCHFILE)
"RTN","AWCMFTP",66,0)
 G:VMSC VMSC1
"RTN","AWCMFTP",67,0)
 ;
"RTN","AWCMFTP",68,0)
 ; USE $&ZLIB EXTERNAL CALLS FOR DSM/VMS
"RTN","AWCMFTP",69,0)
 S CMD="S %SUBMIT=$&ZLIB.%SUBMIT"_"("""_AWCDIR_AWCHFILE_""""_","_"""/NOPRINT"_$S(AWCMVMSL=1:"/LOG="_AWCDIR_$P(AWCHFILE,".",1)_".LOG"""_")",1:"/NOLOG"""_")")
"RTN","AWCMFTP",70,0)
 X CMD
"RTN","AWCMFTP",71,0)
 G EXIT
"RTN","AWCMFTP",72,0)
VMSC1 ;
"RTN","AWCMFTP",73,0)
 ; VMS Cache - use $ZF(-1 calls for OS commands
"RTN","AWCMFTP",74,0)
 S CMD="S AWCVAR=$ZF(-1,AWCVAR)"
"RTN","AWCMFTP",75,0)
 S AWCVAR="SUBMIT "_AWCDIR_AWCHFILE_"/NOPRINT"_$S(AWCMVMSL=1:"/LOG="_AWCDIR_$P(AWCHFILE,".",1)_".LOG",1:"/NOLOG")
"RTN","AWCMFTP",76,0)
 X CMD
"RTN","AWCMFTP",77,0)
 ;
"RTN","AWCMFTP",78,0)
EXIT K CMD,^TMP("AWCMFTP"),^TMP("AWCMFTPD"),AWCMVMSL,AWCMVMSD,AWCDTAX,AWC,AWCDIRCH
"RTN","AWCMFTP",79,0)
 Q
"RTN","AWCMFTP",80,0)
 ;
"RTN","AWCMFTP",81,0)
PURDEL ; purging/deletion script - whether this occurs is controlled in file 177100.12
"RTN","AWCMFTP",82,0)
 ; this part creates a com file to purge or delete files we have created and then it deletes itself
"RTN","AWCMFTP",83,0)
 ;
"RTN","AWCMFTP",84,0)
 S AWCDTAX=$G(^AWC(177100.12,1,0))
"RTN","AWCMFTP",85,0)
 S AWCMVMSL=+$P(AWCDTAX,U,16) ;VMS logging
"RTN","AWCMFTP",86,0)
 S AWCMVMSD=+$P(AWCDTAX,U,18) ;VMS delete
"RTN","AWCMFTP",87,0)
 S AWCHFILE="AWCPURGE.COM"
"RTN","AWCMFTP",88,0)
 ; captive process again so we give full privs
"RTN","AWCMFTP",89,0)
 K ^TMP("AWCMFTPD",$J)
"RTN","AWCMFTP",90,0)
 S AWC=1,^TMP("AWCMFTPD",$J,AWC,0)="$ wait 00:05"
"RTN","AWCMFTP",91,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ set proc/priv = all"
"RTN","AWCMFTP",92,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ set noon"
"RTN","AWCMFTP",93,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ assign sys$command sys$input "
"RTN","AWCMFTP",94,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ set verify"
"RTN","AWCMFTP",95,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ a=""''f$user()'"""
"RTN","AWCMFTP",96,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ set def "_AWCDIR
"RTN","AWCMFTP",97,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ set prot=(w:rwed,g:rwed,o:rwed,s:rwed) "_AWCDIR_"AWCMOVEHTM.LOG;*"
"RTN","AWCMFTP",98,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ set prot=(w:rwed,g:rwed,o:rwed,s:rwed) "_AWCDIR_"AWCMOVEHTM.COM;*"
"RTN","AWCMFTP",99,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ set prot=(w:rwed,g:rwed,o:rwed,s:rwed) "_AWCHFIL1_";*"
"RTN","AWCMFTP",100,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ set prot=(w:rwed,g:rwed,o:rwed,s:rwed) "_AWCDIR_"AWCPURGE.COM;*"
"RTN","AWCMFTP",101,0)
 ; purge or keep log files - 0 deletes all, 1 leaves one copy
"RTN","AWCMFTP",102,0)
 I AWCMVMSL=1 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ purge/keep=1 "_AWCDIR_"AWCMOVEHTM.LOG"
"RTN","AWCMFTP",103,0)
 I AWCMVMSL=0 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ delete "_AWCDIR_"AWCMOVEHTM.LOG;*"
"RTN","AWCMFTP",104,0)
 ; purge or delete all COM versions - 0 deletes all, 1 leaves one copy
"RTN","AWCMFTP",105,0)
 I AWCMVMSD=1 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ delete "_AWCDIR_"AWCMOVEHTM.COM;*"
"RTN","AWCMFTP",106,0)
 I AWCMVMSD=0 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ purge/keep=1 "_AWCDIR_"AWCMOVEHTM.COM;*"
"RTN","AWCMFTP",107,0)
 ; delete the web pages - automatic, not user controlled
"RTN","AWCMFTP",108,0)
 ; patch 103 change for RDPC environment  jls/oak-oifo 10/2006
"RTN","AWCMFTP",109,0)
 ;S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ delete "_$P(AWCHFIL1,"_",1)_"*.*;*"
"RTN","AWCMFTP",110,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ delete "_AWCDIR_$P(AWCDTAX,U,6)_"*.*;*"
"RTN","AWCMFTP",111,0)
 S AWC=AWC+1,^TMP("AWCMFTPD",$J,AWC,0)="$ exit"
"RTN","AWCMFTP",112,0)
 ; send to VMS
"RTN","AWCMFTP",113,0)
 S Y=$$GTF^%ZISH($NA(^TMP("AWCMFTPD",$J,1,0)),3,AWCDIR,AWCHFILE)
"RTN","AWCMFTP",114,0)
 I AWCX="VMS" S CMD="S %SUBMIT=$&ZLIB.%SUBMIT"_"("""_AWCDIR_AWCHFILE_""""_","_"""/DELETE /NOPRINT /NOLOG"""_")"
"RTN","AWCMFTP",115,0)
 I AWCX="VMSC" S CMD="S AWCVAR=$ZF(-1,AWCVAR)"
"RTN","AWCMFTP",116,0)
 I AWCX="VMSC" S AWCVAR="SUBMIT "_AWCDIR_AWCHFILE_"/DELETE /NOPRINT /NOLOG"
"RTN","AWCMFTP",117,0)
 X CMD
"RTN","AWCMFTP",118,0)
 Q
"VER")
8.0^22.0
"BLD",6833,6)
^82
**END**
**END**

$TXT Created by BECKER,CHARLES T. at ALTOONA.VA.GOV  (KIDS) on WEDNESDAY, 01/07/98 at 17:04
=============================================================================
Run Date: JAN 13, 1998                     Designation: PRPF*3*7
Package : PRPF - INTEGRATED PATIENT FUNDS    Priority: Mandatory
Version : 3         SEQ #7                     Status: Released
=============================================================================

Associated patches: (v)PRPF*3*6    <<= must be installed BEFORE `PRPF*3*7'

Subject: PROVIDER CONVERSION/RESTRICTION ERROR

Category: 
  - Routine
  - PATCH FOR A PATCH

Description: 
============

 This patch contains the changes necessary to support the following items:
  
 1. Remove routines previously used for conversion from files 3/6/16 to file
    200 and conversion from the class III version. 
 2. Run a File 16 conversion of the PROVIDER AUTH RESTRICT (#10.7) field,
    of PATIENT FUNDS (#470) file which was inadvertently missed in Patch
    PRPF*3*6. 
 3. Modify the header used in the Archive Patient Funds Transactions [PRPF
    ARCHIVE] option to include external FileMan date. 
 4. Correct problems identified in NOIS messages DAY-0697-40888,
    DAN-0697-42229 and BAN-0697-11023.
 5. Corrects the no entries check for the Overdue Restriction Search [PRPF
    OVERDUE RESTRICTION] option.
  
    Overview of NOIS MESSAGES:
    -------------------------
    1.  DAY-0697-40888
    
        Occasional END OF FILE error when running PRPF TRANSACTION DISPLAY
        option.
  
    2.  DAN-0697-42229
  
        The option PRPF BALANCE IN ACCOUNTS runs very slow.
  
  
    3.  BAN-0697-11023
  
        Failure to convert PROVIDER AUTH RESTRICT (#10.7) field of records
        in PATIENT FUNDS (#470) file.
  
  
    Notes regarding the PROVIDER AUTHORIZING RESTRICTION field conversion.
    ----------------------------------------------------------------------
    This conversion will only affect those facilities which have Patient
    Funds Accounts that are marked as RESTRICTED.  Restricted accounts
    require an order, written by a physician/provider.  This information
    is recorded in the PROVIDER AUTH RESTRICT (#10.7) field of PATIENT
    FUNDS (#470) file. The conversion of this field was inadvertently
    overlooked in patch PRPF*3*6.
    
    After the installation, the user must run routine PRPFIPST, which
    is being exported in this patch. This routine will convert the
    PROVIDER AUTH RESTRICT (#10.7) field value, of PATIENT
    FUNDS (#470) file. The value will be changed from a pointer to
    the PERSON (#16) file to a pointer to the NEW PERSON (#200) file.
    NOTE:  The user will have to specify which date patch PRPF*3*6 was
    loaded on their system. The routine PRPFIPST will convert all
    records before that day. Entries to this field made after the
    installation of patch PRPF*3*6 do not need to be converted.
  
    If for some reason the user decides to uninstall the conversion, an
    'uninstall' utility, 'UNINSTALL^PRPFIPST' is provided in this patch as
    well. For this utility to function, you must select to build the
    uninstall (^TMP("PRPF UNINSTALL") file during the conversion (example
    provided below).  This will allow you to completely reverse the effects
    of this conversion.  To uninstall the conversion, the installer can run
    'D UNINSTAL^PRPFIPST'.
  
    If you had selected to build an uninstall file during the conversion
    and determined that the conversion completed successfully, you must
    remove the uninstall file by running the 'REMOVE^PRPFIPST' utility.
  
  
    If installed during the normal work day it is recommended that the
    following menu options (File #19) and all of their descendants be
    disabled to prevent possible conflicts while running the Init. Other
    DHCP users will not be affected.
  
    [PRPF MASTER]      Patient Funds (INTEGRATED) System
  
    Installation time is dependent upon the size of file 470.
    Based on the field testing, the installation takes approximately 1
    hour per 50,000 records in this file.
  
 ************************ INSTALLATION INSTRUCTIONS *************************
  
   1.   LOAD TRANSPORT GLOBAL 
        ---------------------
        Choose the PackMan message containing this patch and invoke the
        INSTALL/CHECK MESSAGE PackMan option.
  
   2.   DISABLE ROUTINE MAPPING   (AXP sites only)
        -----------------------
        Disable routine mapping on all systems for the routines listed in
        step 3 below.
        NOTE:  If the routines included in this patch are not currently in
        your mapped routine set, please skip this step.
  
   3.   ROUTINES SENT WITH PATCH
        ------------------------
        The following is a list of the routines included in this patch.
        The second line of each of these routines now looks like:
  
        V<tab>;;3.0;PATIENT FUNDS;**[patch list]**;JUNE 1, 1989
  
                        CHECK^XTSUMBLD results
  
        Routine    Before Patch        After Patch       Patch List
        --------   -------------       -------------     -----------
        PRPFARC       8679859            8749250            6,7
        PRPFDST       6584567            6572619            6,7
        PRPFIPST      1886457            6398893            6,7
        PRPFNQ       12273575           12557673            3,5,6,7
        PRPFPNT       3531592            3529950            6,7
        PRPFPUR1      8495575            8495173            6,7
        PRPFSIG       2317686            1618474            6,7
  
   4.   ROUTINES BEING REMOVED BY THIS PATCH
        ------------------------------------
        PRPFCVT
        PRPFCVT0
        PRPFCVT1
        PRPFIENV
        PRPFIPRE
        PRPFSCV
        PRPFSCV1
        PRPFSCV2
        PRPFSCV3
        PRPFSIG2
        PRPFSUM
  
  
   5.   START UP KIDS
        -------------
        Start up the Kernel Installation and Distribution System Menu
        [XPD MAIN]:
  
              Edits and Distribution ...
              Utilities ...
              Installation ...
  
        Select Kernel Installation & Distribution System Option: INStallation
                                                                 ---
              Load a Distribution
              Print Transport Global
              Compare Transport Global to Current System
              Verify Checksums in Transport Global
              Install Package(s)
              Restart Install of Package(s)
              Unload a Distribution
              Backup a Transport Global
  
        Select Installation Option:
  
   6.   Select Installation Option: 
        ---------------------------
        NOTE: The following are OPTIONAL - (When prompted for the INSTALL 
              NAME, enter PRPF*3.0*7):
  
         a.   Backup a Transport Global - This option will create a backup
              message of any routines exported with this patch. It will not
              backup any other changes such as DD's or templates.
  
         b.   Compare Transport Global to Current System - This option will
              allow you to view all changes that will be made when this
              patch is installed.  It compares all components of this patch
              (routines, DD's, templates, etc.).
  
         c.   Verify Checksums in Transport Global - This option will allow
              you to ensure the integrity of the routines that are in the
              transport global.
  
   7.  Select Installation Option: Install Packages(s) 
                                    -------------------
        ** This is the step to start the installation of this KIDS patch: 
   
        a. Choose the Install Package(s) option to start the patch install.  
  
        b. When prompted 'Want to DISABLE Scheduled Options and Menu Options?
           YES//' answer YES.
                         ---
  
        c. When prompted 'Enter options you wish to mark as 'Out of Order':'
           Enter the following options:
  
           [PRPF MASTER]      Patient Funds (INTEGRATED) System
  
        d. When prompted 'Enter protocols you wish to mark as 'Out Of
           Order': ' press return.
  
   8.   ENABLE MENU OPTIONS
        -------------------
        Optional - If you disabled any menu options (File #19) prior to
        installing this patch, please remember to enable them at this time.
  
  
   9.   RUN THE CONVERSION ROUTINE (Example follows)
        --------------------------
  
  
 D ^PRPFIPST
  
 Select Date of Installation of Patch PRPF*3*6: 5/1/97  (MAY 01, 1997)
                                                ------
 Do you wish to prepare an UNINSTALL File? YES//   (YES)
                                           ---
  
 OK TO BEGIN? NO// Y  (YES)
                   -
 DONE.  UNINSTALL OPTION AVAILABLE.
  
  
 If after the conversion is run you wish to reverse (uninstall) the
 conversion, and you answered YES to the 'prepare an UNINSTALL
 File?' question during conversion you may do the following:
  
 D UNINSTAL^PRPFIPST
  
 This option will reverse the Provider Conversion for Patient Funds Patch
 PRPF*3*7.
 OK TO CONTINUE?  YES//  YES (YES)
                         ---
  
 UNINSTALL COMPLETED
  
  
 If you built the uninstall file during conversion and determine that the
 conversion proceeded in a satisfactory manner you may remove the uninstall
 file in either of the following ways: 
  
 1.  D REMOVE^PRPFIPST
  
                 OR
  
 2.  K ^TMP("PRPF UNINSTALL")
  
 #1 will generate the following dialogue:
  
 This option will remove the ^TMP("PRPF UNINSTALL") global.
 Removal will prevent recovery of original, pre-conversion data.
 MAKE SURE YOU HAVE VERIFIED THE CONVERSION.
  
 OK TO CONTINUE? YES// Y  (YES)
                       -
  
 UNINSTALL FILE REMOVED
  
  
 ********************************N O T E *********************************
 Following all the above actions you MUST remove the PRPFIPST routine.
  
 ***************************************************************************

Routine Information:
====================

Routine Name:
  - PRPFDST


Routine Checksum:

Routine Name:
  - PRPFIPST


Routine Checksum:

Routine Name:
  - PRPFPNT


Routine Checksum:

Routine Name:
  - PRPFPUR1


Routine Checksum:

Routine Name:
  - PRPFSIG


Routine Checksum:

Routine Name:
  - PRPFARC


Routine Checksum:

Routine Name:
  - PRPFNQ


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : BECKER,CHARLES T.             Date Entered : JUN 26, 1997
Completed By: WALLACE,TRACIE                Date Completed: JAN 13, 1998
Released By : COLE,MARTHA                   Date Released : JAN 13, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

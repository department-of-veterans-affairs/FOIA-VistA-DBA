Released PSS*1*98 SEQ #96
Extracted from mail message
**KIDS**:PSS*1.0*98^

**INSTALL NAME**
PSS*1.0*98
"BLD",5937,0)
PSS*1.0*98^PHARMACY DATA MANAGEMENT^0^3051020^y
"BLD",5937,1,0)
^^4^4^3050627^^
"BLD",5937,1,1,0)
This patch will correct the reported problems with in the 
"BLD",5937,1,2,0)
WARNING BUILDER option [PSS WARNING BUILDER].  It will also
"BLD",5937,1,3,0)
modify the input transform for the VOLUME field of IV SOLUTIONS
"BLD",5937,1,4,0)
file #52.7 to allow a leading zero.
"BLD",5937,4,0)
^9.64PA^52.7^1
"BLD",5937,4,52.7,0)
52.7
"BLD",5937,4,52.7,2,0)
^9.641^52.7^1
"BLD",5937,4,52.7,2,52.7,0)
IV SOLUTIONS  (File-top level)
"BLD",5937,4,52.7,2,52.7,1,0)
^9.6411^2^1
"BLD",5937,4,52.7,2,52.7,1,2,0)
VOLUME
"BLD",5937,4,52.7,222)
y^y^p^^^^n^^n
"BLD",5937,4,52.7,224)

"BLD",5937,4,"APDD",52.7,52.7)

"BLD",5937,4,"APDD",52.7,52.7,2)

"BLD",5937,4,"B",52.7,52.7)

"BLD",5937,6)
3^
"BLD",5937,"ABPKG")
n
"BLD",5937,"KRN",0)
^9.67PA^8989.52^19
"BLD",5937,"KRN",.4,0)
.4
"BLD",5937,"KRN",.401,0)
.401
"BLD",5937,"KRN",.402,0)
.402
"BLD",5937,"KRN",.403,0)
.403
"BLD",5937,"KRN",.5,0)
.5
"BLD",5937,"KRN",.84,0)
.84
"BLD",5937,"KRN",3.6,0)
3.6
"BLD",5937,"KRN",3.8,0)
3.8
"BLD",5937,"KRN",9.2,0)
9.2
"BLD",5937,"KRN",9.8,0)
9.8
"BLD",5937,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",5937,"KRN",9.8,"NM",1,0)
PSSDEE2^^0^B6848354
"BLD",5937,"KRN",9.8,"NM",2,0)
PSSWRNB^^0^B44691265
"BLD",5937,"KRN",9.8,"NM",3,0)
PSSWRNC^^0^B22115721
"BLD",5937,"KRN",9.8,"NM","B","PSSDEE2",1)

"BLD",5937,"KRN",9.8,"NM","B","PSSWRNB",2)

"BLD",5937,"KRN",9.8,"NM","B","PSSWRNC",3)

"BLD",5937,"KRN",19,0)
19
"BLD",5937,"KRN",19,"NM",0)
^9.68A^^
"BLD",5937,"KRN",19.1,0)
19.1
"BLD",5937,"KRN",101,0)
101
"BLD",5937,"KRN",409.61,0)
409.61
"BLD",5937,"KRN",771,0)
771
"BLD",5937,"KRN",870,0)
870
"BLD",5937,"KRN",8989.51,0)
8989.51
"BLD",5937,"KRN",8989.52,0)
8989.52
"BLD",5937,"KRN",8994,0)
8994
"BLD",5937,"KRN","B",.4,.4)

"BLD",5937,"KRN","B",.401,.401)

"BLD",5937,"KRN","B",.402,.402)

"BLD",5937,"KRN","B",.403,.403)

"BLD",5937,"KRN","B",.5,.5)

"BLD",5937,"KRN","B",.84,.84)

"BLD",5937,"KRN","B",3.6,3.6)

"BLD",5937,"KRN","B",3.8,3.8)

"BLD",5937,"KRN","B",9.2,9.2)

"BLD",5937,"KRN","B",9.8,9.8)

"BLD",5937,"KRN","B",19,19)

"BLD",5937,"KRN","B",19.1,19.1)

"BLD",5937,"KRN","B",101,101)

"BLD",5937,"KRN","B",409.61,409.61)

"BLD",5937,"KRN","B",771,771)

"BLD",5937,"KRN","B",870,870)

"BLD",5937,"KRN","B",8989.51,8989.51)

"BLD",5937,"KRN","B",8989.52,8989.52)

"BLD",5937,"KRN","B",8994,8994)

"BLD",5937,"QUES",0)
^9.62^^
"BLD",5937,"REQB",0)
^9.611^2^2
"BLD",5937,"REQB",1,0)
PSS*1.0*20^1
"BLD",5937,"REQB",2,0)
PSS*1.0*87^1
"BLD",5937,"REQB","B","PSS*1.0*20",1)

"BLD",5937,"REQB","B","PSS*1.0*87",2)

"FIA",52.7)
IV SOLUTIONS
"FIA",52.7,0)
^PS(52.7,
"FIA",52.7,0,0)
52.7I
"FIA",52.7,0,1)
y^y^p^^^^n^^n
"FIA",52.7,0,10)

"FIA",52.7,0,11)

"FIA",52.7,0,"RLRO")

"FIA",52.7,0,"VR")
1.0^PSS
"FIA",52.7,52.7)
1
"FIA",52.7,52.7,2)

"MBREQ")
0
"PKG",586,-1)
1^1
"PKG",586,0)
PHARMACY DATA MANAGEMENT^PSS^Maintenance of Pharmacy files.
"PKG",586,20,0)
^9.402P^^
"PKG",586,22,0)
^9.49I^1^1
"PKG",586,22,1,0)
1.0^2970930^2971128^1
"PKG",586,22,1,"PAH",1,0)
98^3051020^1392
"PKG",586,22,1,"PAH",1,1,0)
^^4^4^3051020
"PKG",586,22,1,"PAH",1,1,1,0)
This patch will correct the reported problems with in the 
"PKG",586,22,1,"PAH",1,1,2,0)
WARNING BUILDER option [PSS WARNING BUILDER].  It will also
"PKG",586,22,1,"PAH",1,1,3,0)
modify the input transform for the VOLUME field of IV SOLUTIONS
"PKG",586,22,1,"PAH",1,1,4,0)
file #52.7 to allow a leading zero.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","PSSDEE2")
0^1^B6848354
"RTN","PSSDEE2",1,0)
PSSDEE2 ;BIR/WRT-Cleanup routine ; 6/27/05 9:55am
"RTN","PSSDEE2",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**16,20,98**;9/30/97
"RTN","PSSDEE2",3,0)
FINISH K ADDITM,ADDNM,APU,ASC,BB,BBC,CLDA,COD,DA,FLAG,FLGKY,FLGMTH,FLGNDF,FLGOI,FORM,FRM,MJL,NEWDF,NUM,NWND,NWPC1,NWPC3,OLDDF,PP,PRIM,PSNB,PSNCLASS,PSNDA,PSNDDA,PSNDRG,PSNFL,PSNFN,PSNFNM,PSNFORM,PSNLOC,PSNM,PSNNAM,PSNNAME,PSNNDF
"RTN","PSSDEE2",4,0)
 K PSNNEW,PSNNODE,PSNODE,PSNOLD,PSNOU,PSNP,PSNPST,PSNRAN,PSNSTDA,PSNSZ,PSNTYP,PSNUNDA,PSNV,PSNVADC,PSNVAR,PSNW,PSNWR,PSNWRT,PSNX,PSNZ,PSSANS,PSSOITM,PTR,SOLITM,SOLNM,SPT,VADC,WRT,^TMP($J,"SOL"),^TMP($J,"ADD")
"RTN","PSSDEE2",5,0)
 K PSSXX,X,Y,FLG1,FLG2,FLG4,FLG5,FLG6,PACK,PSIUDA,PSIUX,PSSASK,ENTRY,DISPDRG,FILE,IVDF,IVDFPTR,KK,PSIUA,XXX,PSSDA,STOP,DOSE,NDE,PC1,PC3,PSXBT,PSXCMOP,PSXDN,PSXDP,PSXF,PSXFL,PSXG,PSXGN,PSXGOOD,PSXIDENT,PSXLOC,PSXNDF,PSXODE
"RTN","PSSDEE2",6,0)
 K PSXOU,PSXUM,PSXVAP,PSXVAPN,PSXVP,PSXZERO,CLFLAG,LMFLAG,NFLAG,PSSAST,WHICH,ZAPFLG,PSSZ,PSSNEW,BV,WHICH1,PSNP,PSSDD,PSSOR
"RTN","PSSDEE2",7,0)
 K MSG,PDS,PSJCLEAR,PSONEWW,PSOWARN,PSSIVID,PSSK,PSSWRN,SYNIEN,TEXT,WARNEDIT,WWW,D0,D1,DEA,DI,DLAYGO,DOSA,DQ,DRUG,DRUGENT,DRUGN,ENDWARN,FLG7,GENDER,HLMTN,%X
"RTN","PSSDEE2",8,0)
 Q
"RTN","PSSWRNB")
0^2^B44691265
"RTN","PSSWRNB",1,0)
PSSWRNB ;BIR/EJW-NEW WARNING SOURCE CUSTOM WARNING LIST BUILDER ; 9/8/05 3:46pm
"RTN","PSSWRNB",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**87,98**;9/30/97
"RTN","PSSWRNB",3,0)
 ;
"RTN","PSSWRNB",4,0)
 ;IA: 3735 ^PSNDF(50.68
"RTN","PSSWRNB",5,0)
 ;IA: 4445 ^PS(50.625
"RTN","PSSWRNB",6,0)
 ;IA: 4446 ^PS(50.626
"RTN","PSSWRNB",7,0)
 ;IA: 4448 ^PS(50.627
"RTN","PSSWRNB",8,0)
 D NOTE^PSSWRNE,NOTE2^PSSWRNE
"RTN","PSSWRNB",9,0)
 W ! K DIR S DIR(0)="Y",DIR("B")="N",DIR("A")=" Would you like to print a list of the entries in these files" D ^DIR K DIR I Y["^"!($D(DTOUT)) W !!?3,"Nothing queued to print." G SEL
"RTN","PSSWRNB",10,0)
 I 'Y G SEL
"RTN","PSSWRNB",11,0)
 S SPANISH=0
"RTN","PSSWRNB",12,0)
 W ! K DIR S DIR(0)="Y",DIR("B")="N",DIR("A")=" Would you like to include the Spanish translations" D ^DIR K DIR I Y["^"!($D(DTOUT)) W !!?3,"Nothing queued to print." G SEL
"RTN","PSSWRNB",13,0)
 I Y S SPANISH=1
"RTN","PSSWRNB",14,0)
 D RPT
"RTN","PSSWRNB",15,0)
SEL ;
"RTN","PSSWRNB",16,0)
 W @IOF
"RTN","PSSWRNB",17,0)
 D NOTE^PSSWRNE
"RTN","PSSWRNB",18,0)
 W !!,?2,"Select one of the following to display drugs that match that criteria to"
"RTN","PSSWRNB",19,0)
 W !,?2,"examine or edit their drug warnings:"
"RTN","PSSWRNB",20,0)
 K DIR
"RTN","PSSWRNB",21,0)
 S DIR("B")=""
"RTN","PSSWRNB",22,0)
 S DIR("A")="Enter selection: "
"RTN","PSSWRNB",23,0)
 S DIR("A",1)="1. Drug has WARNING LABEL filled in but there are no FDB warnings for the drug"
"RTN","PSSWRNB",24,0)
 S DIR("A",2)="2. Drug has WARNING LABEL numbers higher than 20"
"RTN","PSSWRNB",25,0)
 S DIR("A",3)="3. Select by range of drug names"
"RTN","PSSWRNB",26,0)
 S DIR("A",4)="4. Drug has more than 5 warning labels"
"RTN","PSSWRNB",27,0)
 S DIR("A",5)="5. Drugs containing specific WARNING LABEL number"
"RTN","PSSWRNB",28,0)
 S DIR("A",6)="6. Drug has WARNING LABEL that does not map to new data source"
"RTN","PSSWRNB",29,0)
 S DIR("A",7)="7. Drugs containing specific new data source warning number"
"RTN","PSSWRNB",30,0)
 S DIR("A",8)="8. Drugs containing gender-specific warnings"
"RTN","PSSWRNB",31,0)
 S DIR("A",9)="9. Drugs with warning mapping, but drug doesn't contain ""mapped to"" number"
"RTN","PSSWRNB",32,0)
 S DIR(0)="SA^1:DRUGS WITH NO FDB WARNINGS;2:LOCAL WARNING (>20);3:RANGE OF DRUG NAMES;4:GREATER THAN 5 WARNINGS;5:SPECIFIC WARNING LABEL NUMBER;6:NO MAPPING;7:SPECIFIC NEW WARNING;8:GENDER-SPECIFIC WARNING;9:NO MAPPED TO"
"RTN","PSSWRNB",33,0)
 D ^DIR K DIR S SEL=Y
"RTN","PSSWRNB",34,0)
 I 'SEL G KILL
"RTN","PSSWRNB",35,0)
 N DR,ACTIVE,SKIP,QUIT,PSO9
"RTN","PSSWRNB",36,0)
 S SKIP=1,QUIT=0
"RTN","PSSWRNB",37,0)
 K ^TMP("PSSWRNB",$J)
"RTN","PSSWRNB",38,0)
ASK K DIR W ! S DIR(0)="Y",DIR("B")="Y",DIR("A")="Exclude drugs with NEW WARNING LABEL LIST filled in" D ^DIR K DIR
"RTN","PSSWRNB",39,0)
 I 'Y S SKIP=0
"RTN","PSSWRNB",40,0)
 W !!,$C(7),"NOTE: Only the first 5 warnings will print on the yellow auxillary labels."
"RTN","PSSWRNB",41,0)
  K DIR S DIR(0)="Y",DIR("B")="Y",DIR("A")="Do you want to see the warning text for all warnings" D ^DIR K DIR
"RTN","PSSWRNB",42,0)
 S ENDWARN=5
"RTN","PSSWRNB",43,0)
 I Y S ENDWARN=99 D
"RTN","PSSWRNB",44,0)
 .W !,"  Warnings (>5) that won't print and won't be sent to CMOP"
"RTN","PSSWRNB",45,0)
 .W !,"  will be marked with a ""*"" on the following screens."
"RTN","PSSWRNB",46,0)
 W ! K DIR S DIR(0)="E" D ^DIR K DIR I 'Y S PSSOUT=1 Q
"RTN","PSSWRNB",47,0)
 ;
"RTN","PSSWRNB",48,0)
 I SEL=1 D SEL1^PSSWRNC
"RTN","PSSWRNB",49,0)
 ;
"RTN","PSSWRNB",50,0)
 I SEL=2 D SEL2^PSSWRNC
"RTN","PSSWRNB",51,0)
 ; 
"RTN","PSSWRNB",52,0)
 I SEL=3 D SEL3^PSSWRNC
"RTN","PSSWRNB",53,0)
 ;
"RTN","PSSWRNB",54,0)
 I SEL=4 D SEL4^PSSWRNC
"RTN","PSSWRNB",55,0)
 ;
"RTN","PSSWRNB",56,0)
 I SEL=5!(SEL=9) D SEL59^PSSWRNC
"RTN","PSSWRNB",57,0)
 ;
"RTN","PSSWRNB",58,0)
 I SEL=6 D SEL6^PSSWRNC
"RTN","PSSWRNB",59,0)
 ;
"RTN","PSSWRNB",60,0)
 I SEL=7 D SEL7^PSSWRNC
"RTN","PSSWRNB",61,0)
 ;
"RTN","PSSWRNB",62,0)
 I SEL=8 D SEL8^PSSWRNC
"RTN","PSSWRNB",63,0)
 ;
"RTN","PSSWRNB",64,0)
 I 'QUIT I '$D(^TMP("PSSWRNB",$J)) W !,"Nothing meets selection criteria" H 2 S QUIT=1
"RTN","PSSWRNB",65,0)
 I 'QUIT D EDIT^PSSWRNE
"RTN","PSSWRNB",66,0)
 G SEL
"RTN","PSSWRNB",67,0)
RPT ;
"RTN","PSSWRNB",68,0)
RPTQ W !!,"You may queue the report to print, if you wish.",!
"RTN","PSSWRNB",69,0)
 ;
"RTN","PSSWRNB",70,0)
DVC K %ZIS,POP,IOP S %ZIS="QM" D ^%ZIS I $G(POP) W !,"Nothing queued to print.",! G DONE
"RTN","PSSWRNB",71,0)
 S ZTSAVE("*")=""
"RTN","PSSWRNB",72,0)
 I $D(IO("Q")) S ZTRTN="PRT54^PSSWRNB",ZTDESC="WARNING LABEL TEXT REPORTS" D ^%ZTLOAD K %ZIS W !,"Report queued to print.",! G DONE
"RTN","PSSWRNB",73,0)
PRT54 ;
"RTN","PSSWRNB",74,0)
 U IO
"RTN","PSSWRNB",75,0)
 S PSSOUT=0,PSSDV=$S($E(IOST,1,2)="C-":"C",1:"P")
"RTN","PSSWRNB",76,0)
 S PSSPGCT=0,PSSPGLN=IOSL-7,PSSPGCT=1
"RTN","PSSWRNB",77,0)
 S TITLE="RX CONSULT file - WARNING LABEL TEXT"
"RTN","PSSWRNB",78,0)
 D TITLE
"RTN","PSSWRNB",79,0)
 ;
"RTN","PSSWRNB",80,0)
 S SEQ=0 F  S SEQ=$O(^PS(54,SEQ)) Q:'SEQ  D PRTRPT
"RTN","PSSWRNB",81,0)
 G END
"RTN","PSSWRNB",82,0)
PRTRPT ;
"RTN","PSSWRNB",83,0)
 I $G(^PS(54,SEQ,0))'="" D RXCON D FULL I $G(PSSOUT) Q
"RTN","PSSWRNB",84,0)
 D FULL I $G(PSSOUT) Q
"RTN","PSSWRNB",85,0)
 W ! F MJT=1:1:70 W "-"
"RTN","PSSWRNB",86,0)
 Q
"RTN","PSSWRNB",87,0)
RXCON D FULL Q:$G(PSSOUT)  W !,"RX CONSULT NUMBER:  ",SEQ
"RTN","PSSWRNB",88,0)
 N PSSTXT
"RTN","PSSWRNB",89,0)
 D FULL I $G(PSSOUT) Q
"RTN","PSSWRNB",90,0)
 W !
"RTN","PSSWRNB",91,0)
 S PSSTXT=0 F  S PSSTXT=$O(^PS(54,SEQ,1,PSSTXT)) Q:'PSSTXT  D FULL Q:$G(PSSOUT)  W !,?3,^PS(54,SEQ,1,PSSTXT,0)
"RTN","PSSWRNB",92,0)
 I $G(SPANISH),$D(^PS(54,SEQ,3)) W !!,"Spanish translation:" D
"RTN","PSSWRNB",93,0)
 .S PSSTXT=^PS(54,SEQ,3) Q:PSSTXT=""  D FULL Q:$G(PSSOUT)  W !,?3 D
"RTN","PSSWRNB",94,0)
 ..N LEN,I,STR
"RTN","PSSWRNB",95,0)
 ..S LEN=0
"RTN","PSSWRNB",96,0)
 ..F I=1:1:$L(PSSTXT," ") S STR=$P(PSSTXT," ",I),LEN=LEN+$L(STR) W:LEN>62 !,?3 S:LEN>62 LEN=0 W STR," "
"RTN","PSSWRNB",97,0)
 Q
"RTN","PSSWRNB",98,0)
 ;
"RTN","PSSWRNB",99,0)
FULL ;
"RTN","PSSWRNB",100,0)
 I ($Y+5)>IOSL&('$G(PSSOUT)) D TITLE
"RTN","PSSWRNB",101,0)
 Q
"RTN","PSSWRNB",102,0)
 ;
"RTN","PSSWRNB",103,0)
TITLE ;
"RTN","PSSWRNB",104,0)
 I $E($G(PSSDV))="C",$G(PSSPGCT)'=1 W ! K DIR S DIR(0)="E" D ^DIR K DIR I 'Y S PSSOUT=1 Q
"RTN","PSSWRNB",105,0)
 ;
"RTN","PSSWRNB",106,0)
 W @IOF
"RTN","PSSWRNB",107,0)
 W !,?16,TITLE,!
"RTN","PSSWRNB",108,0)
 S Y=DT X ^DD("DD") W !,"Date printed: ",Y,?70,"Page: ",PSSPGCT,!
"RTN","PSSWRNB",109,0)
 F MJT=1:1:79 W "="
"RTN","PSSWRNB",110,0)
 W !
"RTN","PSSWRNB",111,0)
 S PSSPGCT=PSSPGCT+1
"RTN","PSSWRNB",112,0)
 Q
"RTN","PSSWRNB",113,0)
END ;
"RTN","PSSWRNB",114,0)
 I '$G(PSSOUT),$E($G(PSSDV))="C" W !!,"End of Rx Consult file Report." K DIR S DIR(0)="E",DIR("A")="Press Return to continue" D ^DIR K DIR
"RTN","PSSWRNB",115,0)
 I $E($G(PSSDV))="C" W !
"RTN","PSSWRNB",116,0)
 E  W @IOF
"RTN","PSSWRNB",117,0)
 G PRTNEW
"RTN","PSSWRNB",118,0)
END2 ;
"RTN","PSSWRNB",119,0)
 I '$G(PSSOUT),$E($G(PSSDV))="C" W !!,"End of Report." K DIR S DIR(0)="E",DIR("A")="Press Return to continue" D ^DIR K DIR
"RTN","PSSWRNB",120,0)
 I $E($G(PSSDV))="C" W !
"RTN","PSSWRNB",121,0)
 E  W @IOF
"RTN","PSSWRNB",122,0)
DONE ;
"RTN","PSSWRNB",123,0)
 K SEQ,MJT,PSSPGCT,PSSPGLN,Y,DIR,INDT,PSSXX,X,OITM,IOP,POP,IO("Q"),DIRUT,DUOUT,DTOUT
"RTN","PSSWRNB",124,0)
 K PSSDV,PSSOUT D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","PSSWRNB",125,0)
 Q
"RTN","PSSWRNB",126,0)
 ;
"RTN","PSSWRNB",127,0)
PRTNEW ;
"RTN","PSSWRNB",128,0)
 U IO
"RTN","PSSWRNB",129,0)
 S PSSOUT=0,PSSDV=$S($E(IOST)="C":"C",1:"P")
"RTN","PSSWRNB",130,0)
 S PSSPGCT=0,PSSPGLN=IOSL-7,PSSPGCT=1
"RTN","PSSWRNB",131,0)
 S TITLE="WARNING LABEL-ENGLISH file - WARNING LABEL TEXT"
"RTN","PSSWRNB",132,0)
 D TITLE
"RTN","PSSWRNB",133,0)
 ; REPORT FROM NEW WARNING LABEL SOURCE
"RTN","PSSWRNB",134,0)
 S SEQ=0 F  S SEQ=$O(^PS(50.625,SEQ)) Q:'SEQ  D RPTNEW
"RTN","PSSWRNB",135,0)
 G END2
"RTN","PSSWRNB",136,0)
RPTNEW ;
"RTN","PSSWRNB",137,0)
 I $G(^PS(50.625,SEQ,0))'="" D FDBWARN D FULL I $G(PSSOUT) Q
"RTN","PSSWRNB",138,0)
 D FULL I $G(PSSOUT) Q
"RTN","PSSWRNB",139,0)
 W ! F MJT=1:1:70 W "-"
"RTN","PSSWRNB",140,0)
 Q
"RTN","PSSWRNB",141,0)
FDBWARN D FULL Q:$G(PSSOUT)  W !,"WARNING LABEL-ENGLISH NUMBER:  ",+SEQ
"RTN","PSSWRNB",142,0)
 N PSSTXT
"RTN","PSSWRNB",143,0)
 D FULL I $G(PSSOUT) Q
"RTN","PSSWRNB",144,0)
 W !
"RTN","PSSWRNB",145,0)
 S PSSTXT=0 F  S PSSTXT=$O(^PS(50.625,SEQ,1,PSSTXT)) Q:'PSSTXT  D FULL Q:$G(PSSOUT)  W !,?3,^PS(50.625,SEQ,1,PSSTXT,0)
"RTN","PSSWRNB",146,0)
 I $G(SPANISH) W !!,"Spanish translation:" D
"RTN","PSSWRNB",147,0)
 .S PSSTXT=0 F  S PSSTXT=$O(^PS(50.626,SEQ,1,PSSTXT)) Q:'PSSTXT  D FULL Q:$G(PSSOUT)  W !,?3,^PS(50.626,SEQ,1,PSSTXT,0)
"RTN","PSSWRNB",148,0)
 Q
"RTN","PSSWRNB",149,0)
 ;
"RTN","PSSWRNB",150,0)
KILL ;
"RTN","PSSWRNB",151,0)
 K ^TMP("PSSWRNB",$J),NDF,PSSWRN,SEL,SPANISH,WARN54,RXNUM,WARN,WARN20,STR,PSOWARN,JJJ,TEXT,WWW,DRUGN,DRUG,DEA,TITLE
"RTN","PSSWRNB",152,0)
 Q
"RTN","PSSWRNB",153,0)
DRUG ;
"RTN","PSSWRNB",154,0)
 S NDF=0
"RTN","PSSWRNB",155,0)
 N PSOPROD,GCNSEQNO,I,NEWWARN
"RTN","PSSWRNB",156,0)
 S PSSWRN=""
"RTN","PSSWRNB",157,0)
 S PSOPROD=$P($G(^PSDRUG(DR,"ND")),"^",3) I PSOPROD="" Q
"RTN","PSSWRNB",158,0)
 S NDF=1
"RTN","PSSWRNB",159,0)
 S GCNSEQNO=$$GET1^DIQ(50.68,PSOPROD,11,"I")
"RTN","PSSWRNB",160,0)
 I GCNSEQNO="" Q
"RTN","PSSWRNB",161,0)
 D GCN^PSSWRNA
"RTN","PSSWRNB",162,0)
 Q
"RTN","PSSWRNB",163,0)
WARN ; ENTRY POINT DRUG ENTER/EDIT OPTION
"RTN","PSSWRNB",164,0)
 S DRUGENT=1
"RTN","PSSWRNB",165,0)
 S DRUG=$P($G(^PSDRUG(DA,0)),"^") I DRUG="" Q
"RTN","PSSWRNB",166,0)
 S ^TMP("PSSWRNB",$J,DRUG)=""
"RTN","PSSWRNB",167,0)
 D EDIT^PSSWRNE
"RTN","PSSWRNB",168,0)
 Q
"RTN","PSSWRNB",169,0)
ACTIVE ;
"RTN","PSSWRNB",170,0)
 S ACTIVE=1
"RTN","PSSWRNB",171,0)
 I $P($G(^PSDRUG(DR,"I")),"^"),$P($G(^("I")),"^")<DT S ACTIVE=0 Q
"RTN","PSSWRNB",172,0)
 Q
"RTN","PSSWRNC")
0^3^B22115721
"RTN","PSSWRNC",1,0)
PSSWRNC ;DAL/RJS-NEW WARNING SOURCE CUSTOM WARNING LIST BUILDER CONT;
"RTN","PSSWRNC",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**98**;10/12/05
"RTN","PSSWRNC",3,0)
 ;
"RTN","PSSWRNC",4,0)
 ;IA: 3735 ^PSNDF(50.68
"RTN","PSSWRNC",5,0)
 ;IA: 4445 ^PS(50.625
"RTN","PSSWRNC",6,0)
 ;IA: 4446 ^PS(50.626
"RTN","PSSWRNC",7,0)
 ;IA: 4448 ^PS(50.627
"RTN","PSSWRNC",8,0)
SEL1 ;
"RTN","PSSWRNC",9,0)
 S DR=0 F  S DR=$O(^PSDRUG(DR)) Q:'DR  D
"RTN","PSSWRNC",10,0)
 .I '$D(^PSDRUG(DR,0)) Q
"RTN","PSSWRNC",11,0)
 .S WARN54=$P(^PSDRUG(DR,0),"^",8) I WARN54="" Q
"RTN","PSSWRNC",12,0)
 .I SKIP,$P($G(^PSDRUG(DR,"WARN")),"^")'="" Q
"RTN","PSSWRNC",13,0)
 .D ACTIVE^PSSWRNB I 'ACTIVE Q
"RTN","PSSWRNC",14,0)
 .D DRUG^PSSWRNB I PSSWRN="" S ^TMP("PSSWRNB",$J,$P(^PSDRUG(DR,0),"^"))=WARN54_"^"_NDF
"RTN","PSSWRNC",15,0)
 Q
"RTN","PSSWRNC",16,0)
SEL2 ;
"RTN","PSSWRNC",17,0)
 S DR=0 F  S DR=$O(^PSDRUG(DR)) Q:'DR  D
"RTN","PSSWRNC",18,0)
 .I '$D(^PSDRUG(DR,0)) Q
"RTN","PSSWRNC",19,0)
 .S WARN54=$P(^PSDRUG(DR,0),"^",8) I WARN54="" Q
"RTN","PSSWRNC",20,0)
 .I SKIP,$P($G(^PSDRUG(DR,"WARN")),"^")'="" Q
"RTN","PSSWRNC",21,0)
 .D ACTIVE^PSSWRNB I 'ACTIVE Q
"RTN","PSSWRNC",22,0)
 .F I=1:1:$L(WARN54,",") S WARN=$P(WARN54,",",I) I WARN>20 D
"RTN","PSSWRNC",23,0)
 ..I '$D(^PS(54,WARN)) Q
"RTN","PSSWRNC",24,0)
 ..S ^TMP("PSSWRNB",$J,$P(^PSDRUG(DR,0),"^"))=WARN54
"RTN","PSSWRNC",25,0)
 Q
"RTN","PSSWRNC",26,0)
SEL3 ;
"RTN","PSSWRNC",27,0)
 W ! K DIR S DIR(0)="FO^1:30",DIR("A")="Enter starting drug name" D ^DIR K DIR I Y["^"!(Y="") S QUIT=1 Q
"RTN","PSSWRNC",28,0)
 S X=$$ENLU^PSSGMI(Y)
"RTN","PSSWRNC",29,0)
 S DRUG=X
"RTN","PSSWRNC",30,0)
 W ! K DIR S DIR(0)="FO^1:30",DIR("A")="Enter ending drug name" D ^DIR K DIR I Y["^"!(Y="") S QUIT=1 Q
"RTN","PSSWRNC",31,0)
 S EDRUG=Y
"RTN","PSSWRNC",32,0)
 W !!,"WARNINGS FOR DRUGS FROM "_DRUG_" TO "_EDRUG
"RTN","PSSWRNC",33,0)
 W ! K DIR S DIR(0)="E" D ^DIR K DIR I 'Y S PSSOUT=1,QUIT=1 Q
"RTN","PSSWRNC",34,0)
 I $D(^PSDRUG("B",DRUG)) S I=$L(DRUG),DRUG=$E(DRUG,1,I-1)
"RTN","PSSWRNC",35,0)
 F  S DRUG=$O(^PSDRUG("B",DRUG)) Q:DRUG=""  Q:DRUG]EDRUG  D
"RTN","PSSWRNC",36,0)
 .S DR=$O(^PSDRUG("B",DRUG,0)) I DR="" Q
"RTN","PSSWRNC",37,0)
 .I SKIP,$P($G(^PSDRUG(DR,"WARN")),"^")'="" Q
"RTN","PSSWRNC",38,0)
 .D ACTIVE^PSSWRNB I 'ACTIVE Q
"RTN","PSSWRNC",39,0)
 .S ^TMP("PSSWRNB",$J,DRUG)=""
"RTN","PSSWRNC",40,0)
 Q
"RTN","PSSWRNC",41,0)
SEL4 ;
"RTN","PSSWRNC",42,0)
 S DR=0 F  S DR=$O(^PSDRUG(DR)) Q:'DR  D
"RTN","PSSWRNC",43,0)
 .I SKIP,$P($G(^PSDRUG(DR,"WARN")),"^")'="" Q
"RTN","PSSWRNC",44,0)
 .D ACTIVE^PSSWRNB I 'ACTIVE Q
"RTN","PSSWRNC",45,0)
 .D DRUG^PSSWRNB I PSSWRN="" Q
"RTN","PSSWRNC",46,0)
 .N XX S XX=DR D CHECK20^PSSWRNA
"RTN","PSSWRNC",47,0)
 .I $L(PSSWRN,",")>5 S ^TMP("PSSWRNB",$J,$P(^PSDRUG(DR,0),"^"))=PSSWRN
"RTN","PSSWRNC",48,0)
 Q
"RTN","PSSWRNC",49,0)
SEL59 ;
"RTN","PSSWRNC",50,0)
 S DIC=54,DIC(0)="AEQM",DIC("A")="Select drugs containing RX Consult number:" D ^DIC K DIC I Y<0 Q
"RTN","PSSWRNC",51,0)
 S RXNUM=$P(Y,"^")
"RTN","PSSWRNC",52,0)
 I '$D(^PS(54,RXNUM)) W !,RXNUM_" is not in the RX Consult file.",! K DIR S DIR(0)="E" D ^DIR K DIR I 'Y S PSSOUT=1 Q
"RTN","PSSWRNC",53,0)
 I SEL=9,'$G(^PS(54,RXNUM,2)) W !,RXNUM," is not mapped to a new data source warning",! K DIR S DIR(0)="E" D ^DIR K DIR I 'Y S PSSOUT=1 Q
"RTN","PSSWRNC",54,0)
 I SEL=9 S PSO9=$G(^PS(54,RXNUM,2))_"N" W "  ",RXNUM," is mapped to ",PSO9 H 1
"RTN","PSSWRNC",55,0)
 S DR=0 F  S DR=$O(^PSDRUG(DR)) Q:'DR  D
"RTN","PSSWRNC",56,0)
 .I '$D(^PSDRUG(DR,0)) Q
"RTN","PSSWRNC",57,0)
 .S WARN54=$P(^PSDRUG(DR,0),"^",8) I WARN54="" Q
"RTN","PSSWRNC",58,0)
 .I SKIP,$P($G(^PSDRUG(DR,"WARN")),"^")'="" Q
"RTN","PSSWRNC",59,0)
 .D ACTIVE^PSSWRNB I 'ACTIVE Q
"RTN","PSSWRNC",60,0)
 .I ","_WARN54_","[(","_RXNUM_",") D
"RTN","PSSWRNC",61,0)
 ..I SEL=9 D DRUG^PSSWRNB I PSSWRN="" Q
"RTN","PSSWRNC",62,0)
 ..I SEL=9,","_PSSWRN_","[(","_PSO9_",") Q
"RTN","PSSWRNC",63,0)
 ..S ^TMP("PSSWRNB",$J,$P(^PSDRUG(DR,0),"^"))=WARN54
"RTN","PSSWRNC",64,0)
 Q
"RTN","PSSWRNC",65,0)
SEL6 ;
"RTN","PSSWRNC",66,0)
 S DR=0 F  S DR=$O(^PSDRUG(DR)) Q:'DR  D
"RTN","PSSWRNC",67,0)
 .I '$D(^PSDRUG(DR,0)) Q
"RTN","PSSWRNC",68,0)
 .S WARN54=$P(^PSDRUG(DR,0),"^",8) I WARN54="" Q
"RTN","PSSWRNC",69,0)
 .I SKIP,$P($G(^PSDRUG(DR,"WARN")),"^")'="" Q
"RTN","PSSWRNC",70,0)
 .D ACTIVE^PSSWRNB I 'ACTIVE Q
"RTN","PSSWRNC",71,0)
 .F I=1:1:$L(WARN54,",") S WARN=$P(WARN54,",",I) I WARN,$D(^PS(54,WARN,1)),$G(^PS(54,WARN,2))="" D
"RTN","PSSWRNC",72,0)
 ..S ^TMP("PSSWRNB",$J,$P(^PSDRUG(DR,0),"^"))=WARN54
"RTN","PSSWRNC",73,0)
 Q
"RTN","PSSWRNC",74,0)
SEL7 ;
"RTN","PSSWRNC",75,0)
 W !! K DIR S DIR("A")="Select drugs containing New warning number"
"RTN","PSSWRNC",76,0)
 S DIR("?",1)="Answer using format # or #N"
"RTN","PSSWRNC",77,0)
 S DIR("?")="Example: 15 or 15N"
"RTN","PSSWRNC",78,0)
 S DIR(0)="FO"
"RTN","PSSWRNC",79,0)
 D ^DIR S RXNUM=Y
"RTN","PSSWRNC",80,0)
 I Y="N"!(Y="n")!(Y="Y")!(Y="y") W !,$C(7),?5,RXNUM_" is not a valid entry" H 2 S QUIT=1 Q
"RTN","PSSWRNC",81,0)
 I RXNUM["N"!(RXNUM["n") S RXNUM=$TR(RXNUM,"Nn","")
"RTN","PSSWRNC",82,0)
 I RXNUM="^"!(RXNUM="")!(RXNUM=" ") S QUIT=1 Q
"RTN","PSSWRNC",83,0)
 I '$D(^PS(50.625,RXNUM)) W !,$C(7),RXNUM_" is not in the New warning file" H 1 S QUIT=1 Q
"RTN","PSSWRNC",84,0)
 W @IOF
"RTN","PSSWRNC",85,0)
 W "Searching for drugs that contain new warning number "_RXNUM
"RTN","PSSWRNC",86,0)
 S PSOWARN=RXNUM_"N",STAR="" D NEWWARN^PSSWRNE
"RTN","PSSWRNC",87,0)
 K DIR S DIR(0)="E" D ^DIR K DIR I 'Y S PSSOUT=1 Q
"RTN","PSSWRNC",88,0)
 S DR=0 F  S DR=$O(^PSDRUG(DR)) Q:'DR  D
"RTN","PSSWRNC",89,0)
 .I SKIP,$P($G(^PSDRUG(DR,"WARN")),"^")'="" Q
"RTN","PSSWRNC",90,0)
 .D ACTIVE^PSSWRNB I 'ACTIVE Q
"RTN","PSSWRNC",91,0)
 .D DRUG^PSSWRNB I PSSWRN="" Q
"RTN","PSSWRNC",92,0)
 .I ","_PSSWRN_","[(","_RXNUM_"N,") S ^TMP("PSSWRNB",$J,$P(^PSDRUG(DR,0),"^"))=PSSWRN
"RTN","PSSWRNC",93,0)
 Q
"RTN","PSSWRNC",94,0)
SEL8 ;
"RTN","PSSWRNC",95,0)
 N WARN,GEND
"RTN","PSSWRNC",96,0)
 S WARN=0 F  S WARN=$O(^PS(50.625,WARN)) Q:'WARN  I $G(^PS(50.625,WARN,2))'="" S GEND(WARN_"N")=""
"RTN","PSSWRNC",97,0)
 I $O(GEND(""))="" Q
"RTN","PSSWRNC",98,0)
 S DR=0 F  S DR=$O(^PSDRUG(DR)) Q:'DR  D
"RTN","PSSWRNC",99,0)
 .I SKIP,$P($G(^PSDRUG(DR,"WARN")),"^")'="" Q
"RTN","PSSWRNC",100,0)
 .D ACTIVE^PSSWRNB I 'ACTIVE Q
"RTN","PSSWRNC",101,0)
 .D DRUG^PSSWRNB I PSSWRN="" Q
"RTN","PSSWRNC",102,0)
 .S WARN=0 F  S WARN=$O(GEND(WARN)) Q:'WARN  I ","_PSSWRN_","[(","_WARN_",") D
"RTN","PSSWRNC",103,0)
 ..S ^TMP("PSSWRNB",$J,$P(^PSDRUG(DR,0),"^"))=PSSWRN
"RTN","PSSWRNC",104,0)
 Q
"VER")
8.0^22.0
"^DD",52.7,52.7,2,0)
VOLUME^RFX^^0;3^K:X[""""!($A(X)=45)!(X'?.N0.1".".N)!(X>9999)!(X<.01) X I $D(X) S X=X_" ML" D EN^DDIOL(" ML","","?0")
"^DD",52.7,52.7,2,1,0)
^.1^^0
"^DD",52.7,52.7,2,3)
Enter a number from 0.01-9999.
"^DD",52.7,52.7,2,20,0)
^.3LA^1^1
"^DD",52.7,52.7,2,20,1,0)
PSJI
"^DD",52.7,52.7,2,21,0)
^^3^3^2981218^^^^
"^DD",52.7,52.7,2,21,1,0)
  The number entered here will represent the volume of this solution.
"^DD",52.7,52.7,2,21,2,0)
When entering an IV order, this volume will be stuffed into the
"^DD",52.7,52.7,2,21,3,0)
volume field for that IV ORDER.
"^DD",52.7,52.7,2,"DT")
3050624
"BLD",5937,6)
^96
**END**
**END**

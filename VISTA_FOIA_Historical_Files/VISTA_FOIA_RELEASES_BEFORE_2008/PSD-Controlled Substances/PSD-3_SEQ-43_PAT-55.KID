Released PSD*3*55 SEQ #43
Extracted from mail message
**KIDS**:PSD*3.0*55^

**INSTALL NAME**
PSD*3.0*55
"BLD",5164,0)
PSD*3.0*55^CONTROLLED SUBSTANCES^0^3041222^y
"BLD",5164,1,0)
^^2^2^3041221^
"BLD",5164,1,1,0)
This patch will correct the problem of the Outpatient Dispensing Report 
"BLD",5164,1,2,0)
not printing to a printer.
"BLD",5164,4,0)
^9.64PA^^
"BLD",5164,"ABPKG")
n
"BLD",5164,"KRN",0)
^9.67PA^8989.52^19
"BLD",5164,"KRN",.4,0)
.4
"BLD",5164,"KRN",.401,0)
.401
"BLD",5164,"KRN",.402,0)
.402
"BLD",5164,"KRN",.403,0)
.403
"BLD",5164,"KRN",.5,0)
.5
"BLD",5164,"KRN",.84,0)
.84
"BLD",5164,"KRN",3.6,0)
3.6
"BLD",5164,"KRN",3.8,0)
3.8
"BLD",5164,"KRN",9.2,0)
9.2
"BLD",5164,"KRN",9.8,0)
9.8
"BLD",5164,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",5164,"KRN",9.8,"NM",1,0)
PSDOPTI^^0^B27738410
"BLD",5164,"KRN",9.8,"NM",2,0)
PSDOPTN^^0^B18659539
"BLD",5164,"KRN",9.8,"NM",3,0)
PSDOPTS^^0^B25017679
"BLD",5164,"KRN",9.8,"NM",4,0)
PSDOPTX^^0^B16319866
"BLD",5164,"KRN",9.8,"NM","B","PSDOPTI",1)

"BLD",5164,"KRN",9.8,"NM","B","PSDOPTN",2)

"BLD",5164,"KRN",9.8,"NM","B","PSDOPTS",3)

"BLD",5164,"KRN",9.8,"NM","B","PSDOPTX",4)

"BLD",5164,"KRN",19,0)
19
"BLD",5164,"KRN",19.1,0)
19.1
"BLD",5164,"KRN",101,0)
101
"BLD",5164,"KRN",409.61,0)
409.61
"BLD",5164,"KRN",771,0)
771
"BLD",5164,"KRN",870,0)
870
"BLD",5164,"KRN",8989.51,0)
8989.51
"BLD",5164,"KRN",8989.52,0)
8989.52
"BLD",5164,"KRN",8994,0)
8994
"BLD",5164,"KRN","B",.4,.4)

"BLD",5164,"KRN","B",.401,.401)

"BLD",5164,"KRN","B",.402,.402)

"BLD",5164,"KRN","B",.403,.403)

"BLD",5164,"KRN","B",.5,.5)

"BLD",5164,"KRN","B",.84,.84)

"BLD",5164,"KRN","B",3.6,3.6)

"BLD",5164,"KRN","B",3.8,3.8)

"BLD",5164,"KRN","B",9.2,9.2)

"BLD",5164,"KRN","B",9.8,9.8)

"BLD",5164,"KRN","B",19,19)

"BLD",5164,"KRN","B",19.1,19.1)

"BLD",5164,"KRN","B",101,101)

"BLD",5164,"KRN","B",409.61,409.61)

"BLD",5164,"KRN","B",771,771)

"BLD",5164,"KRN","B",870,870)

"BLD",5164,"KRN","B",8989.51,8989.51)

"BLD",5164,"KRN","B",8989.52,8989.52)

"BLD",5164,"KRN","B",8994,8994)

"BLD",5164,"QUES",0)
^9.62^^
"BLD",5164,"REQB",0)
^9.611^2^2
"BLD",5164,"REQB",1,0)
PSD*3.0*18^1
"BLD",5164,"REQB",2,0)
PSD*3.0*26^1
"BLD",5164,"REQB","B","PSD*3.0*18",1)

"BLD",5164,"REQB","B","PSD*3.0*26",2)

"MBREQ")
0
"PKG",276,-1)
1^1
"PKG",276,0)
CONTROLLED SUBSTANCES^PSD^Controlled Substances Inventory and Tracking module.
"PKG",276,20,0)
^9.402P^^
"PKG",276,22,0)
^9.49I^1^1
"PKG",276,22,1,0)
3.0^2970213^2970430^11595
"PKG",276,22,1,"PAH",1,0)
55^3041222
"PKG",276,22,1,"PAH",1,1,0)
^^2^2^3041222
"PKG",276,22,1,"PAH",1,1,1,0)
This patch will correct the problem of the Outpatient Dispensing Report 
"PKG",276,22,1,"PAH",1,1,2,0)
not printing to a printer.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","PSDOPTI")
0^1^B27738410
"RTN","PSDOPTI",1,0)
PSDOPTI ;BIR/LTL - Review OP Transactions by Inventory Type ; 29 Aug 94
"RTN","PSDOPTI",2,0)
 ;;3.0; CONTROLLED SUBSTANCES ;**18,55**;13 Feb 97
"RTN","PSDOPTI",3,0)
 ;
"RTN","PSDOPTI",4,0)
 ;References to ^PSD(58.8, covered by DBIA2711
"RTN","PSDOPTI",5,0)
 ;References to DD(58.81 and ^PSD(58.81 are covered by DBIA2808
"RTN","PSDOPTI",6,0)
 ;References to ^PSDRUG( are covered by DBIA221
"RTN","PSDOPTI",7,0)
 ;References to ^PSI(58.16 are covered by DBIA213
"RTN","PSDOPTI",8,0)
 ;References to ^PSRX( are covered by DBIA986
"RTN","PSDOPTI",9,0)
 S CNT=0 W !!,"You may select one, several, or ^ALL Inventory Types."
"RTN","PSDOPTI",10,0)
 N PSDI S PSDI=0
"RTN","PSDOPTI",11,0)
INV F  S DIC="^PSI(58.16,",DIC(0)="AEQ",DIC("A")="Please Select Inventory Type: " W ! D ^DIC K DIC G:X'="^ALL"&(Y<1)&('CNT) END Q:Y<0  S PSDI(+Y)=$P(Y,U,2),CNT=CNT+1
"RTN","PSDOPTI",12,0)
 I X="^ALL" F  S PSDI=$O(^PSI(58.16,PSDI)) Q:'PSDI  S PSDI(PSDI)=$P($G(^PSI(58.16,PSDI,0)),U)
"RTN","PSDOPTI",13,0)
 S CNT=0 W !!,"Now, you may select one, several, or ^ALL drugs."
"RTN","PSDOPTI",14,0)
CHKD F  S DIC="^PSD(58.8,+PSDLOC,1,",DIC(0)="AEQ",DIC("A")="Please Select "_PSDLOCN_"'s Drug: ",DIC("S")="I $S($G(^(""I"")):$G(^(""I""))>DT,1:1)" W ! D ^DIC K DIC G:X'="^ALL"&(Y<1)&('CNT) END Q:Y<0  D
"RTN","PSDOPTI",15,0)
 .I '$O(^PSD(58.81,"F",+Y,0)) W !!,"There have been no transactions for this drug.",!! Q
"RTN","PSDOPTI",16,0)
 .S PSD(1)=0 F  S PSD(1)=$O(^PSD(58.8,PSDLOC,1,+Y,2,PSD(1))) S:$D(PSDI(+PSD(1))) PSD(2)=PSD(1) Q:$G(PSD(2))!('PSD(1))
"RTN","PSDOPTI",17,0)
 .I '$G(PSD(2)) W !!,"Not in selected Inventory Type(s)",!! Q
"RTN","PSDOPTI",18,0)
 .S PSD=$P($G(^PSDRUG(+Y,0)),U),CNT=CNT+1
"RTN","PSDOPTI",19,0)
 .S PSD=$S(PSD]"":PSD,1:"UNKNOWN DRUG #"_+Y)
"RTN","PSDOPTI",20,0)
 .S ^TMP("PSD",$J,PSDI(PSD(2)),PSD,+Y)="" K PSD
"RTN","PSDOPTI",21,0)
 I X="^ALL" F  S PSDU=$O(^PSD(58.8,+PSDLOC,1,PSDU)) Q:'PSDU  D
"RTN","PSDOPTI",22,0)
 .Q:'$O(^PSD(58.81,"F",PSDU,0))
"RTN","PSDOPTI",23,0)
 .S PSD(1)=0 F  S PSD(1)=$O(^PSD(58.8,PSDLOC,1,PSDU,2,PSD(1))) S:$D(PSDI(+PSD(1))) PSD(2)=PSD(1) Q:$G(PSD(2))!('PSD(1))
"RTN","PSDOPTI",24,0)
 .Q:'$G(PSD(2))
"RTN","PSDOPTI",25,0)
 .S PSD=$P($G(^PSDRUG(PSDU,0)),U)
"RTN","PSDOPTI",26,0)
 .S PSD=$S(PSD]"":PSD,1:"UNKNOWN DRUG #"_PSDU)
"RTN","PSDOPTI",27,0)
 .S ^TMP("PSD",$J,PSDI(PSD(2)),PSD,PSDU)="" K PSD
"RTN","PSDOPTI",28,0)
 S DIR(0)="S^1:Sort by Rx #;2:Sort by Date Posted"
"RTN","PSDOPTI",29,0)
 S DIR("A")="Within Drug, Sort by",DIR("B")=1
"RTN","PSDOPTI",30,0)
 S DIR("?")="For each drug, do you want the transactions listed in the order they were posted or by Rx #?"
"RTN","PSDOPTI",31,0)
 D ^DIR K DIR G:$D(DIRUT) END I Y=1 S PSDI=1 G ^PSDOPTX
"RTN","PSDOPTI",32,0)
 S DIR(0)="D^2910501:NOW:AEPT",DIR("A")="Beginning date@time",DIR("?")="I will list Outpatient transactions for your selected drug(s) within your selected date@time range" W ! D ^DIR G:Y<1 END
"RTN","PSDOPTI",33,0)
 S (PSDT,PSDTB)=Y,PSDTB(2)=Y(0),DIR(0)="D^"_PSDT_":NOW:AEPT"
"RTN","PSDOPTI",34,0)
 S DIR("A")="Ending date@time"
"RTN","PSDOPTI",35,0)
 W ! D ^DIR K DIR G:Y<1 END S PSDTB(1)=Y,PSDTB(3)=Y(0)
"RTN","PSDOPTI",36,0)
 S:'$P(PSDTB(1),".",2) PSDTB(1)=PSDTB(1)+.999999
"RTN","PSDOPTI",37,0)
 S Y=$P($G(^PSD(58.8,+PSDLOC,2)),"^",9),C=$P(^DD(58.8,24,0),"^",2) D Y^DIQ S PSDEV=Y
"RTN","PSDOPTI",38,0)
DEV ;asks device and queuing info
"RTN","PSDOPTI",39,0)
 K IO("Q") N %ZIS,IOP,POP S %ZIS="Q",%ZIS("B")=PSDEV W ! D ^%ZIS I POP W !,"NO DEVICE SELECTED OR OUTPUT PRINTED!" Q
"RTN","PSDOPTI",40,0)
 I $D(IO("Q")) N ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTDTH,ZTSK S ZTRTN="START^PSDOPTI",ZTDESC="Drug OP transaction review" D SAVE D ^%ZTLOAD,HOME^%ZIS S PSDOUT=1 G END
"RTN","PSDOPTI",41,0)
START ;compiles and prints output
"RTN","PSDOPTI",42,0)
 U IO N LN,PSDR,PG S (PG,PSDOUT)=0 D HEADER S (PSD,PSDU)=0
"RTN","PSDOPTI",43,0)
 F  S PSD=$O(^TMP("PSD",$J,PSD)) Q:PSD']""  F  S PSDU=$O(^TMP("PSD",$J,PSD,PSDU)) Q:PSDU']""  S PSDU(1)=$O(^TMP("PSD",$J,PSD,PSDU,0)) D  G:PSDOUT END S PSDT=PSDTB,PSDT(1)=0
"RTN","PSDOPTI",44,0)
LOOP .F  S PSDT=$O(^PSD(58.81,"ACT",PSDT)) W:$E(IOST)="C" "." Q:'PSDT!(PSDT>PSDTB(1))  D:$O(^PSD(58.81,"ACT",PSDT,0))=PSDLOC&($O(^PSD(58.81,"ACT",PSDT,PSDLOC,0))=PSDU(1))&($O(^PSD(58.81,"ACT",PSDT,PSDLOC,+PSDU(1),6,0)))  Q:PSDOUT
"RTN","PSDOPTI",45,0)
 ..S PSDR(3)=+$O(^PSD(58.81,"ACT",PSDT,PSDLOC,+PSDU(1),6,0))
"RTN","PSDOPTI",46,0)
 ..S PSDR(2)=$G(^PSD(58.81,PSDR(3),0))
"RTN","PSDOPTI",47,0)
 ..S PSDR(4)=$G(^PSD(58.81,PSDR(3),6))
"RTN","PSDOPTI",48,0)
 ..D:$Y+6>IOSL HEADER Q:PSDOUT
"RTN","PSDOPTI",49,0)
 ..S PSDT(1)=$G(PSDT(1))+1 W:PSDT(1)=1 !,PSDU,?60,PSD,!
"RTN","PSDOPTI",50,0)
 ..S Y=$E($P(PSDR(2),U,4),1,12) X ^DD("DD") W !,Y,?19
"RTN","PSDOPTI",51,0)
 ..S DFN=$P($G(^PSRX(+$P(PSDR(4),U),0)),U,2)
"RTN","PSDOPTI",52,0)
 ..N C S Y=DFN,C=$P(^DD(58.81,73,0),U,2) D Y^DIQ
"RTN","PSDOPTI",53,0)
 ..W $P(PSDR(4),U,5),?28,Y
"RTN","PSDOPTI",54,0)
 ..D PID^VADPT6 W " ("_VA("BID")_")",?60
"RTN","PSDOPTI",55,0)
 ..I $P(PSDR(4),U,2) S Y=$P($G(^PSRX(+$P(PSDR(4),U),1,+$P(PSDR(4),U,2),0)),U,18) X ^DD("DD") W Y
"RTN","PSDOPTI",56,0)
 ..I $P(PSDR(4),U,4) S Y=$P($G(^PSRX(+$P(PSDR(4),U),"P",+$P(PSDR(4),U,4),0)),U,19) X ^DD("DD") W Y
"RTN","PSDOPTI",57,0)
 ..I '$P(PSDR(4),U,2)&('$P(PSDR(4),U,4)) S Y=$P($G(^PSRX(+$P(PSDR(4),U),2)),U,13) X ^DD("DD") W Y
"RTN","PSDOPTI",58,0)
 ..W !,"Qty: ",$P(PSDR(2),U,6),"  Bal: ",$P(PSDR(2),U,10)-$P(PSDR(2),U,6),?22,"RPH=> ",$P($G(^VA(200,+$P(PSDR(2),U,7),0)),U),?60
"RTN","PSDOPTI",59,0)
 ..W $S($P(PSDR(4),U,2):"Refill #"_$P(PSDR(4),U,2),$P(PSDR(4),U,4):"Partial #"_$P(PSDR(4),U,4),1:"Original")
"RTN","PSDOPTI",60,0)
 ..W !,LN,!
"RTN","PSDOPTI",61,0)
END W:$E(IOST)'="C" @IOF
"RTN","PSDOPTI",62,0)
 I $E(IOST)="C",'PSDOUT S DIR(0)="EA",DIR("A")="END OF REPORT!  Press <RET> to return to the menu." D ^DIR
"RTN","PSDOPTI",63,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","PSDOPTI",64,0)
 D KVAR^VADPT K IO("Q"),VA("PID"),VA("BID"),^TMP("PSD",$J)
"RTN","PSDOPTI",65,0)
 Q
"RTN","PSDOPTI",66,0)
HEADER ;prints header info
"RTN","PSDOPTI",67,0)
 I $E(IOST,1,2)'="P-",PG S DIR(0)="E" D ^DIR K DIR I 'Y S PSDOUT=1 Q
"RTN","PSDOPTI",68,0)
 I $$S^%ZTLOAD W !!,"Task #",$G(ZTSK),", ",$G(ZTDESC)," was stopped by ",$P($G(^VA(200,+$G(DUZ),0)),U),"." S PSDOUT=1
"RTN","PSDOPTI",69,0)
 W:$Y @IOF S $P(LN,"-",81)="",PG=PG+1 W !,"Outpatient Activity from ",PSDTB(2)," to ",PSDTB(3),?70,"PAGE: ",PG,!,LN,!,"Date Posted",?19,"Rx#",?28,"Patient",?60,"Date Released",!,LN W:$G(PSDT(1)) !,PSDU," (continued)",!
"RTN","PSDOPTI",70,0)
 Q
"RTN","PSDOPTI",71,0)
SAVE ;save queued variables
"RTN","PSDOPTI",72,0)
 S ZTSAVE("^TMP(""PSD"",$J,")=""
"RTN","PSDOPTI",73,0)
 S (ZTSAVE("PSDT"),ZTSAVE("PSDTB"),ZTSAVE("PSDTB("),ZTSAVE("PSDLOC"))=""
"RTN","PSDOPTI",74,0)
 Q
"RTN","PSDOPTN")
0^2^B18659539
"RTN","PSDOPTN",1,0)
PSDOPTN ;BIR/LTL - Review OP Transactions for a Drug (cont.) ; 24 Jan 95
"RTN","PSDOPTN",2,0)
 ;;3.0; CONTROLLED SUBSTANCES ;**18,55**;13 Feb 97
"RTN","PSDOPTN",3,0)
 ;
"RTN","PSDOPTN",4,0)
 ;References to ^PSD(58.8, covered by DBIA2711
"RTN","PSDOPTN",5,0)
 ;References to DD(58.81 and ^PSD(58.81 are covered by DBIA2808
"RTN","PSDOPTN",6,0)
 ;References to ^PSDRUG( are covered by DBIA221
"RTN","PSDOPTN",7,0)
 ;References to ^PSRX( are covered by DBIA986
"RTN","PSDOPTN",8,0)
 S DIR(0)="DA^2910501::AEPT"
"RTN","PSDOPTN",9,0)
 S DIR("A")="Beginning date@time filled (not posted): ",DIR("?")="I will list Outpatient transactions for your selected drug(s) within your selected date@time range.  Please don't enter a date@time in the future" W ! D ^DIR G:Y<1 END
"RTN","PSDOPTN",10,0)
 S (PSDT,PSDTB)=Y,PSDTB(2)=Y(0)
"RTN","PSDOPTN",11,0)
 S DIR(0)="DA^"_PSDT_"::AET"
"RTN","PSDOPTN",12,0)
 S DIR("A")="Ending date@time filled (not posted): "
"RTN","PSDOPTN",13,0)
 S DIR("?")=$G(DIR("?"))_" or before "_$G(PSDTB(2))
"RTN","PSDOPTN",14,0)
 W ! D ^DIR K DIR G:Y<1 END S PSDTB(1)=Y,PSDTB(3)=Y(0)
"RTN","PSDOPTN",15,0)
 S:'$P(PSDTB(1),".",2) PSDTB(1)=PSDTB(1)+.999999
"RTN","PSDOPTN",16,0)
 S Y=$P($G(^PSD(58.8,+PSDLOC,2)),"^",9),C=$P(^DD(58.8,24,0),"^",2) D Y^DIQ S PSDEV=Y
"RTN","PSDOPTN",17,0)
DEV ;device
"RTN","PSDOPTN",18,0)
 K IO("Q") N %ZIS,IOP,POP S %ZIS="Q",%ZIS("B")=PSDEV W ! D ^%ZIS I POP W !,"NO DEVICE SELECTED OR OUTPUT PRINTED!" Q
"RTN","PSDOPTN",19,0)
 I $D(IO("Q")) N ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTDTH,ZTSK S ZTRTN="START^PSDOPTN",ZTDESC="Drug OP transaction review" D SAVE D ^%ZTLOAD,HOME^%ZIS S PSDOUT=1 G END
"RTN","PSDOPTN",20,0)
START ;compiles
"RTN","PSDOPTN",21,0)
 U IO N PSDR,PG S (PG,PSDOUT)=0 K LN D HEADER S PSDT=PSDT-1
"RTN","PSDOPTN",22,0)
 ;loop thru Prescription file by date filled
"RTN","PSDOPTN",23,0)
 F  S PSDT=$O(^PSRX("AD",PSDT)) Q:'PSDT!(PSDT>PSDTB(1))  W:$E(IOST)="C" "." S PSDT(1)=0 D
"RTN","PSDOPTN",24,0)
 .F  S PSDT(1)=$O(^PSRX("AD",PSDT,PSDT(1))) Q:'PSDT(1)  D
"RTN","PSDOPTN",25,0)
 ..S PSDT(5)=$G(^PSRX(PSDT(1),0))
"RTN","PSDOPTN",26,0)
 ..S PSDT(2)=$P($G(^PSDRUG(+$P(PSDT(5),U,6),0)),U) Q:PSDT(2)']""
"RTN","PSDOPTN",27,0)
 ..Q:'$D(^TMP("PSD",$J,PSDT(2)))  S PSDT(4)=""
"RTN","PSDOPTN",28,0)
 ..F  S PSDT(4)=$O(^PSRX("AD",PSDT,PSDT(1),PSDT(4))) Q:PSDT(4)=""  D
"RTN","PSDOPTN",29,0)
 ...;Returned to stock?
"RTN","PSDOPTN",30,0)
 ...Q:$S('PSDT(4):$P($G(^PSRX(PSDT(1),2)),U,15),1:$P($G(^PSRX(PSDT(1),1,PSDT(4),0)),U,16))
"RTN","PSDOPTN",31,0)
 ...;posted to the vault?
"RTN","PSDOPTN",32,0)
 ...S PSDT(3)=0
"RTN","PSDOPTN",33,0)
 ...F  S PSDT(3)=$O(^PSD(58.81,"AOP",PSDT(1),PSDT(3))) Q:'PSDT(3)!($S('PSDT(4)&('$P($G(^PSD(58.81,+PSDT(3),6)),U,2)):1,PSDT(4)=$P($G(^(6)),U,2):1,1:0))
"RTN","PSDOPTN",34,0)
 ...Q:PSDT(3)
"RTN","PSDOPTN",35,0)
 ...;suspended & printed
"RTN","PSDOPTN",36,0)
 ...S (PSDT(3),PSDT(8))=0
"RTN","PSDOPTN",37,0)
 ...I PSDT>DT D  Q:'PSDT(8)
"RTN","PSDOPTN",38,0)
 ....F  S PSDT(3)=$O(^PSRX(PSDT(1),"L",PSDT(3))) Q:'PSDT(3)  S:$P($G(^PSRX(PSDT(1),"L",PSDT(3),0)),U,2)=PSDT(4) PSDT(8)=1
"RTN","PSDOPTN",39,0)
 ...;quantity
"RTN","PSDOPTN",40,0)
 ...S PSDT(6)=$S('PSDT(4):$P(PSDT(5),U,7),1:$P($G(^PSRX(PSDT(1),1,PSDT(4),0)),U,4))
"RTN","PSDOPTN",41,0)
 ...S DFN=$P(PSDT(5),U,2) N C S Y=DFN,C=$P(^DD(58.81,73,0),U,2) D Y^DIQ
"RTN","PSDOPTN",42,0)
 ...S PSDT(7)=Y D PID^VADPT6 S PSDT(7)=PSDT(7)_" ("_VA("BID")_")"
"RTN","PSDOPTN",43,0)
 ...S:$P(PSDT(5),U)]"" ^TMP("PSDO",$J,PSDT(2),$P(PSDT(5),U),PSDT(4))=PSDT(6)_U_PSDT_U_PSDT(7)
"RTN","PSDOPTN",44,0)
 I '$D(^TMP("PSDO",$J)) W !!,"Nothing to Report.",!! G END
"RTN","PSDOPTN",45,0)
 F  S PSDT=$O(^TMP("PSDO",$J,PSDT)) Q:PSDT']""!PSDOUT  D  Q:PSDOUT
"RTN","PSDOPTN",46,0)
 .D:$Y+5>IOSL HEADER Q:PSDOUT  W !!,"Drug =>  ",PSDT  S PSDT(1)=0
"RTN","PSDOPTN",47,0)
 .F  S PSDT(1)=$O(^TMP("PSDO",$J,PSDT,PSDT(1))) Q:'PSDT(1)!PSDOUT  D  Q:PSDOUT
"RTN","PSDOPTN",48,0)
 ..S PSDT(2)=""
"RTN","PSDOPTN",49,0)
 ..F  S PSDT(2)=$O(^TMP("PSDO",$J,PSDT,PSDT(1),PSDT(2))) Q:PSDT(2)=""!PSDOUT  D  Q:PSDOUT
"RTN","PSDOPTN",50,0)
 ...I $Y+4>IOSL D HEADER Q:PSDOUT  W !!,PSDT," (continued)"
"RTN","PSDOPTN",51,0)
 ...W !!,PSDT(1)," (",PSDT(2),")"
"RTN","PSDOPTN",52,0)
 ...S PSDT(3)=$G(^TMP("PSDO",$J,PSDT,PSDT(1),PSDT(2)))
"RTN","PSDOPTN",53,0)
 ...W ?9,$J($P(PSDT(3),U),4) S Y=$P(PSDT(3),U,2) X ^DD("DD") W ?20,Y
"RTN","PSDOPTN",54,0)
 ...W ?40,$P(PSDT(3),U,3)
"RTN","PSDOPTN",55,0)
END W:$E(IOST)'="C" @IOF
"RTN","PSDOPTN",56,0)
 I $E(IOST)="C",'PSDOUT S DIR(0)="EA",DIR("A")="END OF REPORT!  Press <RET> to return to the menu." W ! D ^DIR
"RTN","PSDOPTN",57,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","PSDOPTN",58,0)
 D KVAR^VADPT K IO("Q"),VA("PID"),VA("BID"),^TMP("PSDO",$J)
"RTN","PSDOPTN",59,0)
 Q
"RTN","PSDOPTN",60,0)
HEADER I $E(IOST,1,2)'="P-",PG S DIR(0)="E" D ^DIR K DIR I 'Y S PSDOUT=1 Q
"RTN","PSDOPTN",61,0)
 I $$S^%ZTLOAD W !!,"Task #",$G(ZTSK),", ",$G(ZTDESC)," was stopped by ",$P($G(^VA(200,+$G(DUZ),0)),U),"." S PSDOUT=1
"RTN","PSDOPTN",62,0)
 W:$Y @IOF S $P(LN,"-",81)="",PG=PG+1 W !,"Outpatient Activity from ",PSDTB(2)," to ",PSDTB(3),?70,"PAGE: ",PG,!,LN,!,"Rx#",?10,"QTY",?20,"Fill Date",?40,"Patient",!,LN
"RTN","PSDOPTN",63,0)
 Q
"RTN","PSDOPTN",64,0)
SAVE ;
"RTN","PSDOPTN",65,0)
 S ZTSAVE("^TMP(""PSD"",$J,")=""
"RTN","PSDOPTN",66,0)
 S (ZTSAVE("PSDT"),ZTSAVE("PSDLOC"),ZTSAVE("PSDTB"),ZTSAVE("PSDTB("))=""
"RTN","PSDOPTN",67,0)
 Q
"RTN","PSDOPTS")
0^3^B25017679
"RTN","PSDOPTS",1,0)
PSDOPTS ;BIR/LT L- Review OP Transactions for a Drug (cont.) ; 29 Aug 94
"RTN","PSDOPTS",2,0)
 ;;3.0; CONTROLLED SUBSTANCES ;**18,26,55**;13 Feb 97
"RTN","PSDOPTS",3,0)
 ;
"RTN","PSDOPTS",4,0)
 ;References to ^PSD(58.8, covered by DBIA2711
"RTN","PSDOPTS",5,0)
 ;References to DD(58.81 and ^PSD(58.81 are covered by DBIA2808
"RTN","PSDOPTS",6,0)
 ;References to ^PSDRUG( are covered by DBIA221
"RTN","PSDOPTS",7,0)
 ;References to ^PSRX( are covered by DBIA986
"RTN","PSDOPTS",8,0)
 S CNT=0 W !!,"You may select one, several, or ^ALL drugs."
"RTN","PSDOPTS",9,0)
CHKD F  S DIC="^PSD(58.8,+PSDLOC,1,",DIC(0)="AEQ",DIC("A")="Please Select "_PSDLOCN_"'s Drug: ",DIC("S")="I $S($G(^(""I"")):$G(^(""I""))>DT,1:1)" W ! D ^DIC K DIC G:X'="^ALL"&(Y<1)&('CNT) END Q:Y<0  D
"RTN","PSDOPTS",10,0)
 .I '$O(^PSD(58.81,"F",+Y,0)) W !!,"There have been no transactions for this drug.",!! Q
"RTN","PSDOPTS",11,0)
 .S PSD=$P($G(^PSDRUG(+Y,0)),U),CNT=CNT+1
"RTN","PSDOPTS",12,0)
 .S PSD=$S(PSD]"":PSD,1:"UNKNOWN DRUG #"_+Y)
"RTN","PSDOPTS",13,0)
 .S ^TMP("PSD",$J,PSD,+Y)="" K PSD
"RTN","PSDOPTS",14,0)
 I X="^ALL" F  S PSDU=$O(^PSD(58.8,+PSDLOC,1,PSDU)) Q:'PSDU  D
"RTN","PSDOPTS",15,0)
 .Q:'$O(^PSD(58.81,"F",PSDU,0))
"RTN","PSDOPTS",16,0)
 .S PSD=$P($G(^PSDRUG(PSDU,0)),U)
"RTN","PSDOPTS",17,0)
 .S PSD=$S(PSD]"":PSD,1:"UNKNOWN DRUG #"_PSDU)
"RTN","PSDOPTS",18,0)
 .S ^TMP("PSD",$J,PSD,PSDU)="" K PSD
"RTN","PSDOPTS",19,0)
 S DIR(0)="S^1:Sort by Rx #;2:Sort by Date Posted;3:Sort by Date Filled (Not Posted)"
"RTN","PSDOPTS",20,0)
 S DIR("A")="Within Drug, Sort by",DIR("B")=1
"RTN","PSDOPTS",21,0)
 S DIR("?")="For each drug, do you want the transactions listed in the order they were posted, by Rx #, or by fill date (not posted)?"
"RTN","PSDOPTS",22,0)
 D ^DIR K DIR G:$D(DIRUT) END G:Y=1 ^PSDOPTX G:Y=3 ^PSDOPTN
"RTN","PSDOPTS",23,0)
 S DIR(0)="DA^2910501:NOW:AEPT"
"RTN","PSDOPTS",24,0)
 S DIR("A")="Beginning date@time posted: ",DIR("?")="I will list Outpatient transactions for your selected drug(s) within your selected date@time range.  Please don't enter a date@time in the future" W ! D ^DIR G:Y<1 END
"RTN","PSDOPTS",25,0)
 S (PSDT,PSDTB)=Y,PSDTB(2)=Y(0)
"RTN","PSDOPTS",26,0)
 S DIR(0)="DA^"_PSDT_":NOW:AET"
"RTN","PSDOPTS",27,0)
 S DIR("A")="Ending date@time posted: "
"RTN","PSDOPTS",28,0)
 S DIR("?")=$G(DIR("?"))_" or before "_$G(PSDTB(2))
"RTN","PSDOPTS",29,0)
 W ! D ^DIR K DIR G:Y<1 END S PSDTB(1)=Y,PSDTB(3)=Y(0)
"RTN","PSDOPTS",30,0)
 S:'$P(PSDTB(1),".",2) PSDTB(1)=PSDTB(1)+.999999
"RTN","PSDOPTS",31,0)
 S Y=$P($G(^PSD(58.8,+PSDLOC,2)),"^",9),C=$P(^DD(58.8,24,0),"^",2) D Y^DIQ S PSDEV=Y
"RTN","PSDOPTS",32,0)
DEV ;device
"RTN","PSDOPTS",33,0)
 K IO("Q") N %ZIS,IOP,POP S %ZIS="Q",%ZIS("B")=PSDEV W ! D ^%ZIS I POP W !,"NO DEVICE SELECTED OR OUTPUT PRINTED!" Q
"RTN","PSDOPTS",34,0)
 I $D(IO("Q")) N ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTDTH,ZTSK S ZTRTN="START^PSDOPTS",ZTDESC="Drug OP transaction review" D SAVE D ^%ZTLOAD,HOME^%ZIS S PSDOUT=1 G END
"RTN","PSDOPTS",35,0)
START ;compiles
"RTN","PSDOPTS",36,0)
 U IO N PSDR,PG S (PG,PSDOUT)=0 K LN D HEADER S PSDU=0
"RTN","PSDOPTS",37,0)
 F  S PSDU=$O(^TMP("PSD",$J,PSDU)) Q:PSDU']""  S PSDU(1)=$O(^TMP("PSD",$J,PSDU,0)) D  G:PSDOUT END S PSDT=PSDTB,PSDT(1)=0
"RTN","PSDOPTS",38,0)
 .;DAVE B (PSD*3*26   16MAY00)
"RTN","PSDOPTS",39,0)
LOOP .F  S PSDT=$O(^PSD(58.81,"ACT",PSDT)) W:$E(IOST)="C" "." Q:'PSDT!(PSDT>PSDTB(1))  S L=0 F  S L=$O(^PSD(58.81,"ACT",PSDT,L)) Q:L=""  D:L=PSDLOC&($O(^PSD(58.81,"ACT",PSDT,L,0))=PSDU(1))&($O(^PSD(58.81,"ACT",PSDT,L,+PSDU(1),6,0)))  Q:PSDOUT
"RTN","PSDOPTS",40,0)
 ..S PSDR(3)=+$O(^PSD(58.81,"ACT",PSDT,PSDLOC,+PSDU(1),6,0))
"RTN","PSDOPTS",41,0)
 ..S PSDR(2)=$G(^PSD(58.81,PSDR(3),0))
"RTN","PSDOPTS",42,0)
 ..S PSDR(4)=$G(^PSD(58.81,PSDR(3),6))
"RTN","PSDOPTS",43,0)
 ..D:$Y+6>IOSL HEADER Q:PSDOUT
"RTN","PSDOPTS",44,0)
 ..S PSDT(1)=$G(PSDT(1))+1 W:PSDT(1)=1 !,PSDU
"RTN","PSDOPTS",45,0)
 ..W:$P(PSDR(4),U,6)&($P(PSDR(2),U,7)'=$P(PSDR(4),U,6)) ?54,"RPH=> ",$E($P($G(^VA(200,+$P(PSDR(4),U,6),0)),U),1,20)
"RTN","PSDOPTS",46,0)
 ..S Y=$E($P(PSDR(2),U,4),1,12) X ^DD("DD") W !!,Y,?19
"RTN","PSDOPTS",47,0)
 ..S DFN=$P($G(^PSRX(+$P(PSDR(4),U),0)),U,2)
"RTN","PSDOPTS",48,0)
 ..N C S Y=DFN,C=$P(^DD(58.81,73,0),U,2) D Y^DIQ
"RTN","PSDOPTS",49,0)
 ..W $P(PSDR(4),U,5),?28,Y
"RTN","PSDOPTS",50,0)
 ..D PID^VADPT6 W " ("_VA("BID")_")",?60
"RTN","PSDOPTS",51,0)
 ..I $P(PSDR(4),U,2) S Y=$P($G(^PSRX(+$P(PSDR(4),U),1,+$P(PSDR(4),U,2),0)),U,18) X ^DD("DD") W Y
"RTN","PSDOPTS",52,0)
 ..I $P(PSDR(4),U,4) S Y=$P($G(^PSRX(+$P(PSDR(4),U),"P",+$P(PSDR(4),U,4),0)),U,19) X ^DD("DD") W Y
"RTN","PSDOPTS",53,0)
 ..I '$P(PSDR(4),U,2)&('$P(PSDR(4),U,4)) S Y=$P($G(^PSRX(+$P(PSDR(4),U),2)),U,13) X ^DD("DD") W Y
"RTN","PSDOPTS",54,0)
 ..W !,"Qty: ",$P(PSDR(2),U,6),"  Bal: ",$P(PSDR(2),U,10)-$P(PSDR(2),U,6),?22,"RPH=> ",$P($G(^VA(200,+$P(PSDR(2),U,7),0)),U),?60
"RTN","PSDOPTS",55,0)
 ..W $S($P(PSDR(4),U,2):"Refill #"_$P(PSDR(4),U,2),$P(PSDR(4),U,4):"Partial #"_$P(PSDR(4),U,4),1:"Original")
"RTN","PSDOPTS",56,0)
 ..W !,LN,!
"RTN","PSDOPTS",57,0)
END W:$E(IOST)'="C" @IOF
"RTN","PSDOPTS",58,0)
 I $E(IOST)="C",'PSDOUT S DIR(0)="EA",DIR("A")="END OF REPORT!  Press <RET> to return to the menu." D ^DIR
"RTN","PSDOPTS",59,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","PSDOPTS",60,0)
 D KVAR^VADPT K IO("Q"),VA("PID"),VA("BID"),^TMP("PSD",$J)
"RTN","PSDOPTS",61,0)
 Q
"RTN","PSDOPTS",62,0)
HEADER I $E(IOST,1,2)'="P-",PG S DIR(0)="E" D ^DIR K DIR I 'Y S PSDOUT=1 Q
"RTN","PSDOPTS",63,0)
 I $$S^%ZTLOAD W !!,"Task #",$G(ZTSK),", ",$G(ZTDESC)," was stopped by ",$P($G(^VA(200,+$G(DUZ),0)),U),"." S PSDOUT=1
"RTN","PSDOPTS",64,0)
 W:$Y @IOF S $P(LN,"-",81)="",PG=PG+1 W !,"Outpatient Activity from ",PSDTB(2)," to ",PSDTB(3),?70,"PAGE: ",PG,!,LN,!,"Date Posted",?19,"Rx#",?28,"Patient",?60,"Date Released",!,LN W:$G(PSDT(1)) !,PSDU," (continued)",!
"RTN","PSDOPTS",65,0)
 Q
"RTN","PSDOPTS",66,0)
SAVE ;
"RTN","PSDOPTS",67,0)
 S ZTSAVE("^TMP(""PSD"",$J,")=""
"RTN","PSDOPTS",68,0)
 S (ZTSAVE("PSDT"),ZTSAVE("PSDLOC"),ZTSAVE("PSDTB"),ZTSAVE("PSDTB("))=""
"RTN","PSDOPTS",69,0)
 Q
"RTN","PSDOPTX")
0^4^B16319866
"RTN","PSDOPTX",1,0)
PSDOPTX ;BIR/LTL - Review OP Transactions by Rx # ; 29 Aug 94
"RTN","PSDOPTX",2,0)
 ;;3.0; CONTROLLED SUBSTANCES ;**18,55**;13 Feb 97
"RTN","PSDOPTX",3,0)
 ;
"RTN","PSDOPTX",4,0)
 ;References to ^PSD(58.8, covered by DBIA2711
"RTN","PSDOPTX",5,0)
 ;References to DD(58.81 and ^PSD(58.81 are covered by DBIA2808
"RTN","PSDOPTX",6,0)
 ;References to ^PSRX( are covered by DBIA986
"RTN","PSDOPTX",7,0)
 N C,PSDRX
"RTN","PSDOPTX",8,0)
BRX K DIC S DIC="^PSRX(",DIC(0)="AEQ",DIC("A")="Please select beginning Rx #: "
"RTN","PSDOPTX",9,0)
 W ! D ^DIC G:Y<1 END S (PSDRX,PSDRX(4))=+Y,PSDRX(1)=$P(Y,U,2)
"RTN","PSDOPTX",10,0)
 I '$O(^PSD(58.81,"AOP",+Y,0))&('$O(^PSD(58.81,"AOP",+Y))) W !!,"No transactions beginning from Rx # ",PSDRX(1),"." G BRX
"RTN","PSDOPTX",11,0)
ERX K DIC S DIC="^PSRX(",DIC(0)="AEQ",DIC("B")=$O(^PSRX(" "),-1),DIC("A")="Please select ending Rx #: "
"RTN","PSDOPTX",12,0)
 W ! D ^DIC G:Y<1 END S PSDRX(2)=+Y,PSDRX(3)=$P(Y,U,2)
"RTN","PSDOPTX",13,0)
 I PSDRX(2)<PSDRX W !!,"Ending Rx # must have been created after Rx # ",PSDRX(1),"." G ERX
"RTN","PSDOPTX",14,0)
 K DIC
"RTN","PSDOPTX",15,0)
 S Y=$P($G(^PSD(58.8,+PSDLOC,2)),"^",9),C=$P(^DD(58.8,24,0),"^",2) D Y^DIQ S PSDEV=Y
"RTN","PSDOPTX",16,0)
DEV ;asks device and queuing info
"RTN","PSDOPTX",17,0)
 K IO("Q") N %ZIS,IOP,POP S %ZIS="Q",%ZIS("B")=PSDEV W ! D ^%ZIS I POP W !,"NO DEVICE SELECTED OR OUTPUT PRINTED!" Q
"RTN","PSDOPTX",18,0)
 I $D(IO("Q")) N ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTDTH,ZTSK S ZTRTN="START^PSDOPTX",ZTDESC="Drug OP transaction review" D SAVE D ^%ZTLOAD,HOME^%ZIS S PSDOUT=1 G END
"RTN","PSDOPTX",19,0)
START ;compiles and prints output
"RTN","PSDOPTX",20,0)
 U IO N LN,PSDR,PG S (PG,PSDOUT)=0 D HEADER S PSDU=0
"RTN","PSDOPTX",21,0)
 G:$G(PSDI) ^PSDOPTZ
"RTN","PSDOPTX",22,0)
 G:$O(^TMP("PSD",$J,PSDU))']"" ^PSDOPTY
"RTN","PSDOPTX",23,0)
 S PSDRX=PSDRX-1
"RTN","PSDOPTX",24,0)
 F  S PSDU=$O(^TMP("PSD",$J,PSDU)) Q:PSDU']""  S PSDU(1)=$O(^TMP("PSD",$J,PSDU,0)) D  G:PSDOUT END S PSDRX=PSDRX(4)-1,PSDT(1)=0
"RTN","PSDOPTX",25,0)
LOOP .F  S PSDRX=$O(^PSD(58.81,"AOP",PSDRX)) W:$E(IOST)="C" "." Q:'PSDRX!(PSDRX>PSDRX(2))  S PSDRX(5)=0 F  S PSDRX(5)=$O(^PSD(58.81,"AOP",PSDRX,PSDRX(5))) Q:'PSDRX(5)  D  Q:PSDOUT
"RTN","PSDOPTX",26,0)
 ..S PSDR(2)=$G(^PSD(58.81,PSDRX(5),0))
"RTN","PSDOPTX",27,0)
 ..Q:$P(PSDR(2),U,3)'=PSDLOC!($P(PSDR(2),U,5)'=PSDU(1))
"RTN","PSDOPTX",28,0)
 ..S PSDR(4)=$G(^PSD(58.81,PSDRX(5),6))
"RTN","PSDOPTX",29,0)
 ..D:$Y+6>IOSL HEADER Q:PSDOUT
"RTN","PSDOPTX",30,0)
 ..S PSDT(1)=$G(PSDT(1))+1 W:PSDT(1)=1 !,PSDU
"RTN","PSDOPTX",31,0)
 ..W:$P(PSDR(4),U,6)&($P(PSDR(2),U,7)'=$P(PSDR(4),U,6)) ?54,"RPH=> ",$E($P($G(^VA(200,+$P(PSDR(4),U,6),0)),U),1,20)
"RTN","PSDOPTX",32,0)
 ..S Y=$E($P(PSDR(2),U,4),1,12) X ^DD("DD") W !!,Y,?19
"RTN","PSDOPTX",33,0)
 ..S DFN=$P($G(^PSRX(+$P(PSDR(4),U),0)),U,2)
"RTN","PSDOPTX",34,0)
 ..K C S Y=DFN,C=$P(^DD(58.81,73,0),U,2) D Y^DIQ
"RTN","PSDOPTX",35,0)
 ..W $P(PSDR(4),U,5),?28,Y
"RTN","PSDOPTX",36,0)
 ..D PID^VADPT6 W " ("_VA("BID")_")",?60
"RTN","PSDOPTX",37,0)
 ..I $P(PSDR(4),U,2) S Y=$P($G(^PSRX(+$P(PSDR(4),U),1,+$P(PSDR(4),U,2),0)),U,18) X ^DD("DD") W Y
"RTN","PSDOPTX",38,0)
 ..I $P(PSDR(4),U,4) S Y=$P($G(^PSRX(+$P(PSDR(4),U),"P",+$P(PSDR(4),U,4),0)),U,19) X ^DD("DD") W Y
"RTN","PSDOPTX",39,0)
 ..I '$P(PSDR(4),U,2)&('$P(PSDR(4),U,4)) S Y=$P($G(^PSRX(+$P(PSDR(4),U),2)),U,13) X ^DD("DD") W Y
"RTN","PSDOPTX",40,0)
 ..W !,"Qty: ",$P(PSDR(2),U,6),"  Bal: ",$P(PSDR(2),U,10)-$P(PSDR(2),U,6),?22,"RPH=> ",$P($G(^VA(200,+$P(PSDR(2),U,7),0)),U),?60
"RTN","PSDOPTX",41,0)
 ..W $S($P(PSDR(4),U,2):"Refill #"_$P(PSDR(4),U,2),$P(PSDR(4),U,4):"Partial #"_$P(PSDR(4),U,4),1:"Original")
"RTN","PSDOPTX",42,0)
 ..W !,LN,!
"RTN","PSDOPTX",43,0)
END W:$E(IOST)'="C" @IOF
"RTN","PSDOPTX",44,0)
 I $E(IOST)="C",'PSDOUT S DIR(0)="EA",DIR("A")="END OF REPORT!  Press <RET> to return to the menu." D ^DIR
"RTN","PSDOPTX",45,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","PSDOPTX",46,0)
 D KVAR^VADPT K IO("Q"),VA("PID"),VA("BID"),^TMP("PSD",$J)
"RTN","PSDOPTX",47,0)
 Q
"RTN","PSDOPTX",48,0)
HEADER ;prints header info
"RTN","PSDOPTX",49,0)
 I $E(IOST,1,2)'="P-",PG S DIR(0)="E" D ^DIR K DIR I 'Y S PSDOUT=1 Q
"RTN","PSDOPTX",50,0)
 I $$S^%ZTLOAD W !!,"Task #",$G(ZTSK),", ",$G(ZTDESC)," was stopped by ",$P($G(^VA(200,+$G(DUZ),0)),U),"." S PSDOUT=1
"RTN","PSDOPTX",51,0)
 W:$Y @IOF S $P(LN,"-",81)="",PG=PG+1 W !,"Outpatient Activity from Rx # ",PSDRX(1)," to Rx # ",PSDRX(3),?70,"PAGE: ",PG,!,LN,!,"Date Posted",?19,"Rx#",?28,"Patient",?60,"Date Released",!,LN W:$G(PSDT(1)) !,PSDU," (continued)",!
"RTN","PSDOPTX",52,0)
 Q
"RTN","PSDOPTX",53,0)
SAVE ;save queued variables
"RTN","PSDOPTX",54,0)
 S ZTSAVE("^TMP(""PSD"",$J,")=""
"RTN","PSDOPTX",55,0)
 S (ZTSAVE("PSDLOC"),ZTSAVE("PSDRX"),ZTSAVE("PSDRX("))=""
"RTN","PSDOPTX",56,0)
 Q
"VER")
8.0^22.0
**END**
**END**

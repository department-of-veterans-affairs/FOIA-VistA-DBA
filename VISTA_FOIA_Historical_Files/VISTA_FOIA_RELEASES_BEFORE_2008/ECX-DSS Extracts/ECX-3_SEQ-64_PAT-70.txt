$TXT Created by DOWNING,TODD at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 03/10/04 at 12:36
=============================================================================
Run Date: JUL 27, 2004                     Designation: ECX*3*70
Package : ECX - DSS EXTRACTS                  Priority: Mandatory
Version : 3        SEQ #64                      Status: Released
                  Compliance Date: AUG 27, 2004
=============================================================================

Associated patches: (v)ECX*3*46    <<= must be installed BEFORE `ECX*3*70'

Subject: FIX FOR DUPLICATE OBSERVATION ENCOUNTERS IN LAB EXTRACT

Category: 
  - Routine

Description:
============

 This patch fixes the problem with duplicate observation encounters 
 appearing in the LABORATORY EXTRACT (file 727.813).
  
  
 ASSOCIATED NOIS:
 ================
 LON-1003-60529  LAB and LAR extracts creating duplicate encounters
  
  
 ASSOCIATED E3R:
 ===============
 N/A
  
  
 PARTICIPATING TEST SITES:
 =========================
 Long Beach,CA
 Battle Creek,MI
 Ft. Harrison,MT                                  
 Erie,PA,
 Manchester,NH
 Fayetteville,NC
   
 NOIS OVERVIEW:
 ==============
 LON-1003-60529  LAB and LAR extracts creating duplicate encounters
  
 Problem
 -------
  
 As Reported
 +++++++++++
 In some cases, duplicate lab encounters are being created for observation 
 patients. These occur when a lab is ordered on the same day the patient is 
 discharged, after the discharge time.  The LAB and LAR encounters cannot be 
 merged.
  
 As Analyzed
 +++++++++++
 The Laboratory Extract routine, ECXLABN, attempts to retrieve the Treating 
 Specialty from the TREATING SPECIALTY field (#9) in the WKLD LOG FILE (#64.03)
 if it is not returned with inpatient data for the patient.  This was being 
 done without regard to inpatient/outpatient status.  This was causing a 
 Treating Specialty to be picked up for outpatient labs ordered on the same day 
 that a patient was discharged, corresponding to the Treating Specialty at the 
 time of discharge.  In the Laboratory Extract file (#727.813), since the
 OBSERVATION PATIENT INDICATOR field (#31) is determined by the TREATING
 SPECIALTY (field #13), it was being set to "YES" for outpatient encounters
 when the TREATING SPECIALTY before discharge is an Observation specialty type.
 This was in turn causing the ENCOUNTER NUMBER (field #32) to be set to that
 of previous inpatient lab encounters; hence the duplicate encounters.  
  
  
 Resolution
 ----------
 Routine ECXLABN was modified to skip the step of looking up the TREATING 
 SPECIALTY (field #9) in the WKLD LOG file (#64.03) if the patient is not 
 classified as an inpatient at the time the lab is ordered.
  
  
 DATA DICTIONARY CHANGES:
 ========================
 N/A
  
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
     <tab>;;3.0;DSS EXTRACTS;**[patch list]**;Dec 22, 1997
  
                            CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List
 ============      ============          ===========         ==========
 ECXLABN                7051937              7082358        1,11,8,13,28
                                                           24,30,31,32,33
                                                             39,42,46,70
  
  
 DISTRIBUTION:
 =============
 The KIDS build is attached to this message.
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 This patch may be run with users on the system, but it is recommended 
 that it be queued to run after normal business hours to minimize the
 impact on users of the Registration package.
  
 Installation will take less than 1 minute.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
     the KIDS distribution included with this message.
  
 2.  Review your mapped set.  If any of the routines listed in the ROUTINE   
  
     SUMMARY section are mapped, they should be removed from the mapped set 
     at this time.
  
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter ECX*3.0*70)
  
     a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
     c.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
     d.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
   
 5.  Use the Install Package(s) option and select the package ECX*3.0*70
  
 6.  When prompted ' Want KIDS to INHIBIT LOGONs during the install?
     YES//', respond NO.
  
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond NO.
  
 8.  If routines were unmapped as part of step 2, they should be returned
     to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - ECXLABN


Routine Checksum:

=============================================================================
User Information:
Entered By  : DOWNING,TODD                  Date Entered  : MAR 02, 2004
Completed By: BOWEN,MARY JANE               Date Completed: JUL 27, 2004
Released By : NELSON,VICKI M                Date Released : JUL 27, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

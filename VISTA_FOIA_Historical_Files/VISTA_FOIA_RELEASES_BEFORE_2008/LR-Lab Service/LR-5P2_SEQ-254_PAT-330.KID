Released LR*5.2*330 SEQ #254
Extracted from mail message
**KIDS**:LR*5.2*330^

**INSTALL NAME**
LR*5.2*330
"BLD",16574,0)
LR*5.2*330^LAB SERVICE^0^3050713^y
"BLD",16574,1,0)
^9.61A^214^214^3050713^^
"BLD",16574,1,1,0)
Blood Bank Clearance
"BLD",16574,1,2,0)
==================== 
"BLD",16574,1,3,0)
 
"BLD",16574,1,4,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*330 does not
"BLD",16574,1,5,0)
contain any changes to the VISTA BLOOD BANK Software as defined by VHA
"BLD",16574,1,6,0)
DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"BLD",16574,1,7,0)
 
"BLD",16574,1,8,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*330 does not
"BLD",16574,1,9,0)
alter or modify any software design safeguards or safety critical elements
"BLD",16574,1,10,0)
functions.
"BLD",16574,1,11,0)
 
"BLD",16574,1,12,0)
RISK ANALYSIS: Changes made by patch LR*5.2*330 have no effect on Blood
"BLD",16574,1,13,0)
Bank software functionality, therefore RISK is none.
"BLD",16574,1,14,0)
 
"BLD",16574,1,15,0)
VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes
"BLD",16574,1,16,0)
made, no specific validation requirements exist as a result of installation
"BLD",16574,1,17,0)
of this patch.
"BLD",16574,1,18,0)
--------------------------------------------------------------------------
"BLD",16574,1,19,0)
 
"BLD",16574,1,20,0)
   
"BLD",16574,1,21,0)
NOIS FAV-0105-71385 reported the inability to verify Laboratory Electronic
"BLD",16574,1,22,0)
Data Interchange (LEDI) results when one or all of the lab results being
"BLD",16574,1,23,0)
processed have 'comment' as the result. Functionality, released in patch
"BLD",16574,1,24,0)
LR*5.2*286, to prevent editing of reference laboratory results using option
"BLD",16574,1,25,0)
Enter/verify data (auto instrument) [LRVR] prevented user from releasing
"BLD",16574,1,26,0)
LEDI results.
"BLD",16574,1,27,0)
 
"BLD",16574,1,28,0)
NOIS ASH-0105-31055 reported the inability to verify LEDI results when
"BLD",16574,1,29,0)
one or all of the lab results being processed have 'canc' as the
"BLD",16574,1,30,0)
result. Functionality, released in patch LR*5.2*286, to prevent
"BLD",16574,1,31,0)
editing of reference laboratory results using option Enter/verify data
"BLD",16574,1,32,0)
(auto instrument) [LRVR] prevented user from releasing LEDI results.
"BLD",16574,1,33,0)
 
"BLD",16574,1,34,0)
This patch allows users verifying reference laboratory results to
"BLD",16574,1,35,0)
release results that consist only of 'comment' or 'canc' type results.
"BLD",16574,1,36,0)
 
"BLD",16574,1,37,0)
 
"BLD",16574,1,38,0)
 
"BLD",16574,1,39,0)
 ASSOCIATED E3R
"BLD",16574,1,40,0)
 --------------
"BLD",16574,1,41,0)
 None
"BLD",16574,1,42,0)
 
"BLD",16574,1,43,0)
 ASSOCIATED NOIS
"BLD",16574,1,44,0)
 ---------------
"BLD",16574,1,45,0)
 ASH-0105-31055/Remedy ticket HD0000000071185
"BLD",16574,1,46,0)
 FAV-0105-71385/Remedy ticket HD0000000071204
"BLD",16574,1,47,0)
 
"BLD",16574,1,48,0)
 
"BLD",16574,1,49,0)
 TEST SITES
"BLD",16574,1,50,0)
 ----------
"BLD",16574,1,51,0)
 
"BLD",16574,1,52,0)
 Asheville VAMC (Medium site) 
"BLD",16574,1,53,0)
 Boston HCS (Integrated/Large site)
"BLD",16574,1,54,0)
 Fayetteville AR, VAMC (Medium site)
"BLD",16574,1,55,0)
 Milwaukee VAMC (Large site)
"BLD",16574,1,56,0)
 New Orleans VAMC (Large siet)
"BLD",16574,1,57,0)
 
"BLD",16574,1,58,0)
 
"BLD",16574,1,59,0)
ROUTINE SUMMARY
"BLD",16574,1,60,0)
===============
"BLD",16574,1,61,0)
  The following routines are included in this patch.  The second line
"BLD",16574,1,62,0)
  of each of these routines now looks like:
"BLD",16574,1,63,0)
  <tab> ;;5.2;LAB SERVICE;<patchlist>;Sep 27, 1994
"BLD",16574,1,64,0)
 
"BLD",16574,1,65,0)
                    Checksum       Checksum
"BLD",16574,1,66,0)
   Routine Name     Before Patch   After Patch    Patch List
"BLD",16574,1,67,0)
   ------------     ------------   -----------    ------------
"BLD",16574,1,68,0)
   LR330            N/A            4831418        **330** (Deleted by KIDS)
"BLD",16574,1,69,0)
   LRVR4            9645653        9819762        **14,42,121,153,221,263,
"BLD",16574,1,70,0)
                                                  279,283,287,286,330**
"BLD",16574,1,71,0)
 
"BLD",16574,1,72,0)
 List of preceding patches: 286
"BLD",16574,1,73,0)
 Sites should use CHECK^XTSUMBLD to verify checksums.
"BLD",16574,1,74,0)
  
"BLD",16574,1,75,0)
 
"BLD",16574,1,76,0)
INSTALLATION INSTRUCTIONS
"BLD",16574,1,77,0)
-------------------------
"BLD",16574,1,78,0)
  The install time for this patch is less than 5 minute. This patch
"BLD",16574,1,79,0)
  can be installed when Laboratory users are on the system.
"BLD",16574,1,80,0)
  Suggested time to install: non-peak requirement hours.
"BLD",16574,1,81,0)
 
"BLD",16574,1,82,0)
 
"BLD",16574,1,83,0)
NOTE: Kernel patches must be current on the target system to avoid
"BLD",16574,1,84,0)
      problems loading and/or installing this patch.
"BLD",16574,1,85,0)
 
"BLD",16574,1,86,0)
      Patch installation needs to be coordinated with the Laboratory
"BLD",16574,1,87,0)
      Information Manager (LIM/ADPAC).
"BLD",16574,1,88,0)
 
"BLD",16574,1,89,0)
 
"BLD",16574,1,90,0)
  1.  If any of the above routines are mapped, disable mapping for them.
"BLD",16574,1,91,0)
 
"BLD",16574,1,92,0)
  2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
"BLD",16574,1,93,0)
        option will load the KIDS package onto your system.
"BLD",16574,1,94,0)
 
"BLD",16574,1,95,0)
  3.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
"BLD",16574,1,96,0)
      select the 'Installation' menu.
"BLD",16574,1,97,0)
 
"BLD",16574,1,98,0)
  4.  From this menu, you may then elect to use the following options
"BLD",16574,1,99,0)
      (when prompted for the INSTALL NAME, enter LR*5.2*330):
"BLD",16574,1,100,0)
        a. Print Transport Global
"BLD",16574,1,101,0)
        b. Backup a Transport Global
"BLD",16574,1,102,0)
        c. Compare Transport Global to Current System
"BLD",16574,1,103,0)
        d. Verify Checksums in Transport Global
"BLD",16574,1,104,0)
 
"BLD",16574,1,105,0)
      Use the 'Verify Checksum in Transport Global' option and verify that
"BLD",16574,1,106,0)
      all routines have the correct checksums.
"BLD",16574,1,107,0)
 
"BLD",16574,1,108,0)
  5.  Use the 'Install Package(s)' option under the 'Installation' menu
"BLD",16574,1,109,0)
      and select the package 'LR*5.2*330'.  When prompted 'Want KIDS to
"BLD",16574,1,110,0)
      INHIBIT LOGONs during the install? YES// choose 'NO'.  When prompted
"BLD",16574,1,111,0)
      'Want to DISABLE Scheduled Options, Menu Options, and Protocols?
"BLD",16574,1,112,0)
      YES//', choose 'NO'.
"BLD",16574,1,113,0)
 
"BLD",16574,1,114,0)
     The install will automatically disable the following options:
"BLD",16574,1,115,0)
 
"BLD",16574,1,116,0)
       Accession order then immediately enter data [LR ACC THEN DATA]
"BLD",16574,1,117,0)
       Batch data entry (chem, hem, tox, etc.) [LRSTUF]
"BLD",16574,1,118,0)
       Bypass normal data entry [LRFAST]
"BLD",16574,1,119,0)
       Enter/verify data (Load list) [LRVRW2]
"BLD",16574,1,120,0)
       Enter/verify data (Work list) [LRVRW] 
"BLD",16574,1,121,0)
       Enter/verify data (auto instrument) [LRVR]
"BLD",16574,1,122,0)
       Fast Bypass Data Entry/Verify [LRFASTS]
"BLD",16574,1,123,0)
       Group verify (EA, EL, EW) [LRGV]
"BLD",16574,1,124,0)
       Special test accessioning [LRNONCOM]
"BLD",16574,1,125,0)
       Group data review (verified & EM) [LRGVP] 
"BLD",16574,1,126,0)
 
"BLD",16574,1,127,0)
  6.  On a mapped system, rebuild your map set.
"BLD",16574,1,128,0)
 
"BLD",16574,1,129,0)
 Note: Routine LR330 will be deleted after successful patch installation.
"BLD",16574,1,130,0)
 
"BLD",16574,1,131,0)
 
"BLD",16574,1,132,0)
INSTALLATION EXAMPLE
"BLD",16574,1,133,0)
====================
"BLD",16574,1,134,0)
 
"BLD",16574,1,135,0)
Select Installation Option:
"BLD",16574,1,136,0)
 
"BLD",16574,1,137,0)
Select Kernel Installation & Distribution System Option:  Installation
"BLD",16574,1,138,0)
 
"BLD",16574,1,139,0)
Select Installation Option:  Install Package(s)
"BLD",16574,1,140,0)
Select INSTALL NAME:  LR*5.2*330  Loaded from Distribution  Loaded from
"BLD",16574,1,141,0)
Distribution  1/24/05@13:44:22
"BLD",16574,1,142,0)
     => LR*5.2*330
"BLD",16574,1,143,0)
 
"BLD",16574,1,144,0)
This Distribution was loaded on Jan 24, 2005@13:44:22 with header of
"BLD",16574,1,145,0)
   LR*5.2*330
"BLD",16574,1,146,0)
   It consisted of the following Install(s):
"BLD",16574,1,147,0)
     LR*5.2*330
"BLD",16574,1,148,0)
Checking Install for Package LR*5.2*330
"BLD",16574,1,149,0)
Will first run the Environment Check Routine, LR330
"BLD",16574,1,150,0)
 
"BLD",16574,1,151,0)
 
"BLD",16574,1,152,0)
               Sending install started alert to mail group G.LMI
"BLD",16574,1,153,0)
 
"BLD",16574,1,154,0)
                        --- Environment Check is Ok ---
"BLD",16574,1,155,0)
 
"BLD",16574,1,156,0)
Install Questions for LR*5.2*330
"BLD",16574,1,157,0)
 
"BLD",16574,1,158,0)
 
"BLD",16574,1,159,0)
Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// NO
"BLD",16574,1,160,0)
 
"BLD",16574,1,161,0)
 
"BLD",16574,1,162,0)
Want KIDS to INHIBIT LOGONs during the install? YES// NO
"BLD",16574,1,163,0)
Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
"BLD",16574,1,164,0)
 
"BLD",16574,1,165,0)
Enter the Device you want to print the Install messages.
"BLD",16574,1,166,0)
You can queue the install by enter a 'Q' at the device prompt.
"BLD",16574,1,167,0)
Enter a '^' to abort the install.
"BLD",16574,1,168,0)
 
"BLD",16574,1,169,0)
DEVICE: HOME//  TELNET
"BLD",16574,1,170,0)
 
"BLD",16574,1,171,0)
 
"BLD",16574,1,172,0)
 Install Started for LR*5.2*330 :
"BLD",16574,1,173,0)
               Jan 24, 2005@13:46:54
"BLD",16574,1,174,0)
 
"BLD",16574,1,175,0)
Build Distribution Date: Jan 24, 2005
"BLD",16574,1,176,0)
 
"BLD",16574,1,177,0)
 Installing Routines:
"BLD",16574,1,178,0)
               Jan 24, 2005@13:46:54
"BLD",16574,1,179,0)
 
"BLD",16574,1,180,0)
 Running Pre-Install Routine: PRE^LR330
"BLD",16574,1,181,0)
 
"BLD",16574,1,182,0)
                          *** Pre install started ***
"BLD",16574,1,183,0)
 
"BLD",16574,1,184,0)
                           *** No action required ***
"BLD",16574,1,185,0)
 
"BLD",16574,1,186,0)
                         *** Pre install completed ***
"BLD",16574,1,187,0)
 
"BLD",16574,1,188,0)
 Installing PACKAGE COMPONENTS:
"BLD",16574,1,189,0)
 
"BLD",16574,1,190,0)
 Installing OPTION
"BLD",16574,1,191,0)
               Jan 24, 2005@13:46:54
"BLD",16574,1,192,0)
 
"BLD",16574,1,193,0)
                                   LR*5.2*330
"BLD",16574,1,194,0)
 
"BLD",16574,1,195,0)
 Running Post-Install Routine: POST^LR330
"BLD",16574,1,196,0)
 
"BLD",16574,1,197,0)
                          *** Post install started ***
"BLD",16574,1,198,0)
 
"BLD",16574,1,199,0)
                           *** No action required ***
"BLD",16574,1,200,0)
 
"BLD",16574,1,201,0)
                         *** Post install completed ***
"BLD",16574,1,202,0)
 
"BLD",16574,1,203,0)
              Sending install completion alert to mail group G.LMI
"BLD",16574,1,204,0)
 
"BLD",16574,1,205,0)
 Updating Routine file...
"BLD",16574,1,206,0)
 
"BLD",16574,1,207,0)
 Updating KIDS files...
"BLD",16574,1,208,0)
 
"BLD",16574,1,209,0)
 LR*5.2*330 Installed.
"BLD",16574,1,210,0)
               Jan 24, 2005@13:46:55
"BLD",16574,1,211,0)
 
"BLD",16574,1,212,0)
 Install Message sent #3905
"BLD",16574,1,213,0)
 
"BLD",16574,1,214,0)
 Install Completed
"BLD",16574,4,0)
^9.64PA^^
"BLD",16574,"ABPKG")
n
"BLD",16574,"INI")
PRE^LR330
"BLD",16574,"INID")
y
"BLD",16574,"INIT")
POST^LR330
"BLD",16574,"KRN",0)
^9.67PA^8989.52^19
"BLD",16574,"KRN",.4,0)
.4
"BLD",16574,"KRN",.401,0)
.401
"BLD",16574,"KRN",.402,0)
.402
"BLD",16574,"KRN",.403,0)
.403
"BLD",16574,"KRN",.5,0)
.5
"BLD",16574,"KRN",.84,0)
.84
"BLD",16574,"KRN",3.6,0)
3.6
"BLD",16574,"KRN",3.8,0)
3.8
"BLD",16574,"KRN",9.2,0)
9.2
"BLD",16574,"KRN",9.8,0)
9.8
"BLD",16574,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",16574,"KRN",9.8,"NM",1,0)
LRVR4^^0^B51672898
"BLD",16574,"KRN",9.8,"NM","B","LRVR4",1)

"BLD",16574,"KRN",19,0)
19
"BLD",16574,"KRN",19,"NM",0)
^9.68A^10^10
"BLD",16574,"KRN",19,"NM",1,0)
LR ACC THEN DATA^^5^
"BLD",16574,"KRN",19,"NM",2,0)
LRFAST^^5^
"BLD",16574,"KRN",19,"NM",3,0)
LRFASTS^^5^
"BLD",16574,"KRN",19,"NM",4,0)
LRGV^^5^
"BLD",16574,"KRN",19,"NM",5,0)
LRGVP^^5^
"BLD",16574,"KRN",19,"NM",6,0)
LRNONCOM^^5^
"BLD",16574,"KRN",19,"NM",7,0)
LRSTUF^^5^
"BLD",16574,"KRN",19,"NM",8,0)
LRVR^^5^
"BLD",16574,"KRN",19,"NM",9,0)
LRVRW^^5^
"BLD",16574,"KRN",19,"NM",10,0)
LRVRW2^^5^
"BLD",16574,"KRN",19,"NM","B","LR ACC THEN DATA",1)

"BLD",16574,"KRN",19,"NM","B","LRFAST",2)

"BLD",16574,"KRN",19,"NM","B","LRFASTS",3)

"BLD",16574,"KRN",19,"NM","B","LRGV",4)

"BLD",16574,"KRN",19,"NM","B","LRGVP",5)

"BLD",16574,"KRN",19,"NM","B","LRNONCOM",6)

"BLD",16574,"KRN",19,"NM","B","LRSTUF",7)

"BLD",16574,"KRN",19,"NM","B","LRVR",8)

"BLD",16574,"KRN",19,"NM","B","LRVRW",9)

"BLD",16574,"KRN",19,"NM","B","LRVRW2",10)

"BLD",16574,"KRN",19.1,0)
19.1
"BLD",16574,"KRN",101,0)
101
"BLD",16574,"KRN",409.61,0)
409.61
"BLD",16574,"KRN",771,0)
771
"BLD",16574,"KRN",870,0)
870
"BLD",16574,"KRN",8989.51,0)
8989.51
"BLD",16574,"KRN",8989.52,0)
8989.52
"BLD",16574,"KRN",8994,0)
8994
"BLD",16574,"KRN","B",.4,.4)

"BLD",16574,"KRN","B",.401,.401)

"BLD",16574,"KRN","B",.402,.402)

"BLD",16574,"KRN","B",.403,.403)

"BLD",16574,"KRN","B",.5,.5)

"BLD",16574,"KRN","B",.84,.84)

"BLD",16574,"KRN","B",3.6,3.6)

"BLD",16574,"KRN","B",3.8,3.8)

"BLD",16574,"KRN","B",9.2,9.2)

"BLD",16574,"KRN","B",9.8,9.8)

"BLD",16574,"KRN","B",19,19)

"BLD",16574,"KRN","B",19.1,19.1)

"BLD",16574,"KRN","B",101,101)

"BLD",16574,"KRN","B",409.61,409.61)

"BLD",16574,"KRN","B",771,771)

"BLD",16574,"KRN","B",870,870)

"BLD",16574,"KRN","B",8989.51,8989.51)

"BLD",16574,"KRN","B",8989.52,8989.52)

"BLD",16574,"KRN","B",8994,8994)

"BLD",16574,"PRE")
LR330
"BLD",16574,"QUES",0)
^9.62^^
"BLD",16574,"REQB",0)
^9.611^1^1
"BLD",16574,"REQB",1,0)
LR*5.2*286^2
"BLD",16574,"REQB","B","LR*5.2*286",1)

"INI")
PRE^LR330
"INIT")
POST^LR330
"KRN",19,606,-1)
5^5
"KRN",19,606,0)
LRGVP
"KRN",19,611,-1)
5^2
"KRN",19,611,0)
LRFAST
"KRN",19,651,-1)
5^6
"KRN",19,651,0)
LRNONCOM
"KRN",19,661,-1)
5^4
"KRN",19,661,0)
LRGV
"KRN",19,664,-1)
5^8
"KRN",19,664,0)
LRVR
"KRN",19,684,-1)
5^7
"KRN",19,684,0)
LRSTUF
"KRN",19,727,-1)
5^9
"KRN",19,727,0)
LRVRW
"KRN",19,728,-1)
5^10
"KRN",19,728,0)
LRVRW2
"KRN",19,1041,-1)
5^1
"KRN",19,1041,0)
LR ACC THEN DATA
"KRN",19,8003,-1)
5^3
"KRN",19,8003,0)
LRFASTS
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2941128
"PKG",26,22,1,"PAH",1,0)
330^3050713
"PKG",26,22,1,"PAH",1,1,0)
^^214^214^3050713
"PKG",26,22,1,"PAH",1,1,1,0)
Blood Bank Clearance
"PKG",26,22,1,"PAH",1,1,2,0)
==================== 
"PKG",26,22,1,"PAH",1,1,3,0)
 
"PKG",26,22,1,"PAH",1,1,4,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*330 does not
"PKG",26,22,1,"PAH",1,1,5,0)
contain any changes to the VISTA BLOOD BANK Software as defined by VHA
"PKG",26,22,1,"PAH",1,1,6,0)
DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"PKG",26,22,1,"PAH",1,1,7,0)
 
"PKG",26,22,1,"PAH",1,1,8,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*330 does not
"PKG",26,22,1,"PAH",1,1,9,0)
alter or modify any software design safeguards or safety critical elements
"PKG",26,22,1,"PAH",1,1,10,0)
functions.
"PKG",26,22,1,"PAH",1,1,11,0)
 
"PKG",26,22,1,"PAH",1,1,12,0)
RISK ANALYSIS: Changes made by patch LR*5.2*330 have no effect on Blood
"PKG",26,22,1,"PAH",1,1,13,0)
Bank software functionality, therefore RISK is none.
"PKG",26,22,1,"PAH",1,1,14,0)
 
"PKG",26,22,1,"PAH",1,1,15,0)
VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes
"PKG",26,22,1,"PAH",1,1,16,0)
made, no specific validation requirements exist as a result of installation
"PKG",26,22,1,"PAH",1,1,17,0)
of this patch.
"PKG",26,22,1,"PAH",1,1,18,0)
--------------------------------------------------------------------------
"PKG",26,22,1,"PAH",1,1,19,0)
 
"PKG",26,22,1,"PAH",1,1,20,0)
   
"PKG",26,22,1,"PAH",1,1,21,0)
NOIS FAV-0105-71385 reported the inability to verify Laboratory Electronic
"PKG",26,22,1,"PAH",1,1,22,0)
Data Interchange (LEDI) results when one or all of the lab results being
"PKG",26,22,1,"PAH",1,1,23,0)
processed have 'comment' as the result. Functionality, released in patch
"PKG",26,22,1,"PAH",1,1,24,0)
LR*5.2*286, to prevent editing of reference laboratory results using option
"PKG",26,22,1,"PAH",1,1,25,0)
Enter/verify data (auto instrument) [LRVR] prevented user from releasing
"PKG",26,22,1,"PAH",1,1,26,0)
LEDI results.
"PKG",26,22,1,"PAH",1,1,27,0)
 
"PKG",26,22,1,"PAH",1,1,28,0)
NOIS ASH-0105-31055 reported the inability to verify LEDI results when
"PKG",26,22,1,"PAH",1,1,29,0)
one or all of the lab results being processed have 'canc' as the
"PKG",26,22,1,"PAH",1,1,30,0)
result. Functionality, released in patch LR*5.2*286, to prevent
"PKG",26,22,1,"PAH",1,1,31,0)
editing of reference laboratory results using option Enter/verify data
"PKG",26,22,1,"PAH",1,1,32,0)
(auto instrument) [LRVR] prevented user from releasing LEDI results.
"PKG",26,22,1,"PAH",1,1,33,0)
 
"PKG",26,22,1,"PAH",1,1,34,0)
This patch allows users verifying reference laboratory results to
"PKG",26,22,1,"PAH",1,1,35,0)
release results that consist only of 'comment' or 'canc' type results.
"PKG",26,22,1,"PAH",1,1,36,0)
 
"PKG",26,22,1,"PAH",1,1,37,0)
 
"PKG",26,22,1,"PAH",1,1,38,0)
 
"PKG",26,22,1,"PAH",1,1,39,0)
 ASSOCIATED E3R
"PKG",26,22,1,"PAH",1,1,40,0)
 --------------
"PKG",26,22,1,"PAH",1,1,41,0)
 None
"PKG",26,22,1,"PAH",1,1,42,0)
 
"PKG",26,22,1,"PAH",1,1,43,0)
 ASSOCIATED NOIS
"PKG",26,22,1,"PAH",1,1,44,0)
 ---------------
"PKG",26,22,1,"PAH",1,1,45,0)
 ASH-0105-31055/Remedy ticket HD0000000071185
"PKG",26,22,1,"PAH",1,1,46,0)
 FAV-0105-71385/Remedy ticket HD0000000071204
"PKG",26,22,1,"PAH",1,1,47,0)
 
"PKG",26,22,1,"PAH",1,1,48,0)
 
"PKG",26,22,1,"PAH",1,1,49,0)
 TEST SITES
"PKG",26,22,1,"PAH",1,1,50,0)
 ----------
"PKG",26,22,1,"PAH",1,1,51,0)
 
"PKG",26,22,1,"PAH",1,1,52,0)
 Asheville VAMC (Medium site) 
"PKG",26,22,1,"PAH",1,1,53,0)
 Boston HCS (Integrated/Large site)
"PKG",26,22,1,"PAH",1,1,54,0)
 Fayetteville AR, VAMC (Medium site)
"PKG",26,22,1,"PAH",1,1,55,0)
 Milwaukee VAMC (Large site)
"PKG",26,22,1,"PAH",1,1,56,0)
 New Orleans VAMC (Large siet)
"PKG",26,22,1,"PAH",1,1,57,0)
 
"PKG",26,22,1,"PAH",1,1,58,0)
 
"PKG",26,22,1,"PAH",1,1,59,0)
ROUTINE SUMMARY
"PKG",26,22,1,"PAH",1,1,60,0)
===============
"PKG",26,22,1,"PAH",1,1,61,0)
  The following routines are included in this patch.  The second line
"PKG",26,22,1,"PAH",1,1,62,0)
  of each of these routines now looks like:
"PKG",26,22,1,"PAH",1,1,63,0)
  <tab> ;;5.2;LAB SERVICE;<patchlist>;Sep 27, 1994
"PKG",26,22,1,"PAH",1,1,64,0)
 
"PKG",26,22,1,"PAH",1,1,65,0)
                    Checksum       Checksum
"PKG",26,22,1,"PAH",1,1,66,0)
   Routine Name     Before Patch   After Patch    Patch List
"PKG",26,22,1,"PAH",1,1,67,0)
   ------------     ------------   -----------    ------------
"PKG",26,22,1,"PAH",1,1,68,0)
   LR330            N/A            4831418        **330** (Deleted by KIDS)
"PKG",26,22,1,"PAH",1,1,69,0)
   LRVR4            9645653        9819762        **14,42,121,153,221,263,
"PKG",26,22,1,"PAH",1,1,70,0)
                                                  279,283,287,286,330**
"PKG",26,22,1,"PAH",1,1,71,0)
 
"PKG",26,22,1,"PAH",1,1,72,0)
 List of preceding patches: 286
"PKG",26,22,1,"PAH",1,1,73,0)
 Sites should use CHECK^XTSUMBLD to verify checksums.
"PKG",26,22,1,"PAH",1,1,74,0)
  
"PKG",26,22,1,"PAH",1,1,75,0)
 
"PKG",26,22,1,"PAH",1,1,76,0)
INSTALLATION INSTRUCTIONS
"PKG",26,22,1,"PAH",1,1,77,0)
-------------------------
"PKG",26,22,1,"PAH",1,1,78,0)
  The install time for this patch is less than 5 minute. This patch
"PKG",26,22,1,"PAH",1,1,79,0)
  can be installed when Laboratory users are on the system.
"PKG",26,22,1,"PAH",1,1,80,0)
  Suggested time to install: non-peak requirement hours.
"PKG",26,22,1,"PAH",1,1,81,0)
 
"PKG",26,22,1,"PAH",1,1,82,0)
 
"PKG",26,22,1,"PAH",1,1,83,0)
NOTE: Kernel patches must be current on the target system to avoid
"PKG",26,22,1,"PAH",1,1,84,0)
      problems loading and/or installing this patch.
"PKG",26,22,1,"PAH",1,1,85,0)
 
"PKG",26,22,1,"PAH",1,1,86,0)
      Patch installation needs to be coordinated with the Laboratory
"PKG",26,22,1,"PAH",1,1,87,0)
      Information Manager (LIM/ADPAC).
"PKG",26,22,1,"PAH",1,1,88,0)
 
"PKG",26,22,1,"PAH",1,1,89,0)
 
"PKG",26,22,1,"PAH",1,1,90,0)
  1.  If any of the above routines are mapped, disable mapping for them.
"PKG",26,22,1,"PAH",1,1,91,0)
 
"PKG",26,22,1,"PAH",1,1,92,0)
  2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
"PKG",26,22,1,"PAH",1,1,93,0)
        option will load the KIDS package onto your system.
"PKG",26,22,1,"PAH",1,1,94,0)
 
"PKG",26,22,1,"PAH",1,1,95,0)
  3.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
"PKG",26,22,1,"PAH",1,1,96,0)
      select the 'Installation' menu.
"PKG",26,22,1,"PAH",1,1,97,0)
 
"PKG",26,22,1,"PAH",1,1,98,0)
  4.  From this menu, you may then elect to use the following options
"PKG",26,22,1,"PAH",1,1,99,0)
      (when prompted for the INSTALL NAME, enter LR*5.2*330):
"PKG",26,22,1,"PAH",1,1,100,0)
        a. Print Transport Global
"PKG",26,22,1,"PAH",1,1,101,0)
        b. Backup a Transport Global
"PKG",26,22,1,"PAH",1,1,102,0)
        c. Compare Transport Global to Current System
"PKG",26,22,1,"PAH",1,1,103,0)
        d. Verify Checksums in Transport Global
"PKG",26,22,1,"PAH",1,1,104,0)
 
"PKG",26,22,1,"PAH",1,1,105,0)
      Use the 'Verify Checksum in Transport Global' option and verify that
"PKG",26,22,1,"PAH",1,1,106,0)
      all routines have the correct checksums.
"PKG",26,22,1,"PAH",1,1,107,0)
 
"PKG",26,22,1,"PAH",1,1,108,0)
  5.  Use the 'Install Package(s)' option under the 'Installation' menu
"PKG",26,22,1,"PAH",1,1,109,0)
      and select the package 'LR*5.2*330'.  When prompted 'Want KIDS to
"PKG",26,22,1,"PAH",1,1,110,0)
      INHIBIT LOGONs during the install? YES// choose 'NO'.  When prompted
"PKG",26,22,1,"PAH",1,1,111,0)
      'Want to DISABLE Scheduled Options, Menu Options, and Protocols?
"PKG",26,22,1,"PAH",1,1,112,0)
      YES//', choose 'NO'.
"PKG",26,22,1,"PAH",1,1,113,0)
 
"PKG",26,22,1,"PAH",1,1,114,0)
     The install will automatically disable the following options:
"PKG",26,22,1,"PAH",1,1,115,0)
 
"PKG",26,22,1,"PAH",1,1,116,0)
       Accession order then immediately enter data [LR ACC THEN DATA]
"PKG",26,22,1,"PAH",1,1,117,0)
       Batch data entry (chem, hem, tox, etc.) [LRSTUF]
"PKG",26,22,1,"PAH",1,1,118,0)
       Bypass normal data entry [LRFAST]
"PKG",26,22,1,"PAH",1,1,119,0)
       Enter/verify data (Load list) [LRVRW2]
"PKG",26,22,1,"PAH",1,1,120,0)
       Enter/verify data (Work list) [LRVRW] 
"PKG",26,22,1,"PAH",1,1,121,0)
       Enter/verify data (auto instrument) [LRVR]
"PKG",26,22,1,"PAH",1,1,122,0)
       Fast Bypass Data Entry/Verify [LRFASTS]
"PKG",26,22,1,"PAH",1,1,123,0)
       Group verify (EA, EL, EW) [LRGV]
"PKG",26,22,1,"PAH",1,1,124,0)
       Special test accessioning [LRNONCOM]
"PKG",26,22,1,"PAH",1,1,125,0)
       Group data review (verified & EM) [LRGVP] 
"PKG",26,22,1,"PAH",1,1,126,0)
 
"PKG",26,22,1,"PAH",1,1,127,0)
  6.  On a mapped system, rebuild your map set.
"PKG",26,22,1,"PAH",1,1,128,0)
 
"PKG",26,22,1,"PAH",1,1,129,0)
 Note: Routine LR330 will be deleted after successful patch installation.
"PKG",26,22,1,"PAH",1,1,130,0)
 
"PKG",26,22,1,"PAH",1,1,131,0)
 
"PKG",26,22,1,"PAH",1,1,132,0)
INSTALLATION EXAMPLE
"PKG",26,22,1,"PAH",1,1,133,0)
====================
"PKG",26,22,1,"PAH",1,1,134,0)
 
"PKG",26,22,1,"PAH",1,1,135,0)
Select Installation Option:
"PKG",26,22,1,"PAH",1,1,136,0)
 
"PKG",26,22,1,"PAH",1,1,137,0)
Select Kernel Installation & Distribution System Option:  Installation
"PKG",26,22,1,"PAH",1,1,138,0)
 
"PKG",26,22,1,"PAH",1,1,139,0)
Select Installation Option:  Install Package(s)
"PKG",26,22,1,"PAH",1,1,140,0)
Select INSTALL NAME:  LR*5.2*330  Loaded from Distribution  Loaded from
"PKG",26,22,1,"PAH",1,1,141,0)
Distribution  1/24/05@13:44:22
"PKG",26,22,1,"PAH",1,1,142,0)
     => LR*5.2*330
"PKG",26,22,1,"PAH",1,1,143,0)
 
"PKG",26,22,1,"PAH",1,1,144,0)
This Distribution was loaded on Jan 24, 2005@13:44:22 with header of
"PKG",26,22,1,"PAH",1,1,145,0)
   LR*5.2*330
"PKG",26,22,1,"PAH",1,1,146,0)
   It consisted of the following Install(s):
"PKG",26,22,1,"PAH",1,1,147,0)
     LR*5.2*330
"PKG",26,22,1,"PAH",1,1,148,0)
Checking Install for Package LR*5.2*330
"PKG",26,22,1,"PAH",1,1,149,0)
Will first run the Environment Check Routine, LR330
"PKG",26,22,1,"PAH",1,1,150,0)
 
"PKG",26,22,1,"PAH",1,1,151,0)
 
"PKG",26,22,1,"PAH",1,1,152,0)
               Sending install started alert to mail group G.LMI
"PKG",26,22,1,"PAH",1,1,153,0)
 
"PKG",26,22,1,"PAH",1,1,154,0)
                        --- Environment Check is Ok ---
"PKG",26,22,1,"PAH",1,1,155,0)
 
"PKG",26,22,1,"PAH",1,1,156,0)
Install Questions for LR*5.2*330
"PKG",26,22,1,"PAH",1,1,157,0)
 
"PKG",26,22,1,"PAH",1,1,158,0)
 
"PKG",26,22,1,"PAH",1,1,159,0)
Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// NO
"PKG",26,22,1,"PAH",1,1,160,0)
 
"PKG",26,22,1,"PAH",1,1,161,0)
 
"PKG",26,22,1,"PAH",1,1,162,0)
Want KIDS to INHIBIT LOGONs during the install? YES// NO
"PKG",26,22,1,"PAH",1,1,163,0)
Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
"PKG",26,22,1,"PAH",1,1,164,0)
 
"PKG",26,22,1,"PAH",1,1,165,0)
Enter the Device you want to print the Install messages.
"PKG",26,22,1,"PAH",1,1,166,0)
You can queue the install by enter a 'Q' at the device prompt.
"PKG",26,22,1,"PAH",1,1,167,0)
Enter a '^' to abort the install.
"PKG",26,22,1,"PAH",1,1,168,0)
 
"PKG",26,22,1,"PAH",1,1,169,0)
DEVICE: HOME//  TELNET
"PKG",26,22,1,"PAH",1,1,170,0)
 
"PKG",26,22,1,"PAH",1,1,171,0)
 
"PKG",26,22,1,"PAH",1,1,172,0)
 Install Started for LR*5.2*330 :
"PKG",26,22,1,"PAH",1,1,173,0)
               Jan 24, 2005@13:46:54
"PKG",26,22,1,"PAH",1,1,174,0)
 
"PKG",26,22,1,"PAH",1,1,175,0)
Build Distribution Date: Jan 24, 2005
"PKG",26,22,1,"PAH",1,1,176,0)
 
"PKG",26,22,1,"PAH",1,1,177,0)
 Installing Routines:
"PKG",26,22,1,"PAH",1,1,178,0)
               Jan 24, 2005@13:46:54
"PKG",26,22,1,"PAH",1,1,179,0)
 
"PKG",26,22,1,"PAH",1,1,180,0)
 Running Pre-Install Routine: PRE^LR330
"PKG",26,22,1,"PAH",1,1,181,0)
 
"PKG",26,22,1,"PAH",1,1,182,0)
                          *** Pre install started ***
"PKG",26,22,1,"PAH",1,1,183,0)
 
"PKG",26,22,1,"PAH",1,1,184,0)
                           *** No action required ***
"PKG",26,22,1,"PAH",1,1,185,0)
 
"PKG",26,22,1,"PAH",1,1,186,0)
                         *** Pre install completed ***
"PKG",26,22,1,"PAH",1,1,187,0)
 
"PKG",26,22,1,"PAH",1,1,188,0)
 Installing PACKAGE COMPONENTS:
"PKG",26,22,1,"PAH",1,1,189,0)
 
"PKG",26,22,1,"PAH",1,1,190,0)
 Installing OPTION
"PKG",26,22,1,"PAH",1,1,191,0)
               Jan 24, 2005@13:46:54
"PKG",26,22,1,"PAH",1,1,192,0)
 
"PKG",26,22,1,"PAH",1,1,193,0)
                                   LR*5.2*330
"PKG",26,22,1,"PAH",1,1,194,0)
 
"PKG",26,22,1,"PAH",1,1,195,0)
 Running Post-Install Routine: POST^LR330
"PKG",26,22,1,"PAH",1,1,196,0)
 
"PKG",26,22,1,"PAH",1,1,197,0)
                          *** Post install started ***
"PKG",26,22,1,"PAH",1,1,198,0)
 
"PKG",26,22,1,"PAH",1,1,199,0)
                           *** No action required ***
"PKG",26,22,1,"PAH",1,1,200,0)
 
"PKG",26,22,1,"PAH",1,1,201,0)
                         *** Post install completed ***
"PKG",26,22,1,"PAH",1,1,202,0)
 
"PKG",26,22,1,"PAH",1,1,203,0)
              Sending install completion alert to mail group G.LMI
"PKG",26,22,1,"PAH",1,1,204,0)
 
"PKG",26,22,1,"PAH",1,1,205,0)
 Updating Routine file...
"PKG",26,22,1,"PAH",1,1,206,0)
 
"PKG",26,22,1,"PAH",1,1,207,0)
 Updating KIDS files...
"PKG",26,22,1,"PAH",1,1,208,0)
 
"PKG",26,22,1,"PAH",1,1,209,0)
 LR*5.2*330 Installed.
"PKG",26,22,1,"PAH",1,1,210,0)
               Jan 24, 2005@13:46:55
"PKG",26,22,1,"PAH",1,1,211,0)
 
"PKG",26,22,1,"PAH",1,1,212,0)
 Install Message sent #3905
"PKG",26,22,1,"PAH",1,1,213,0)
 
"PKG",26,22,1,"PAH",1,1,214,0)
 Install Completed
"PRE")
LR330
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","LR330")
0^^B9400438
"RTN","LR330",1,0)
LR330 ;DALOI/JMC - LR*5.2*330 PATCH ENVIRONMENT CHECK ROUTINE ;24 Jan 2004
"RTN","LR330",2,0)
 ;;5.2;LAB SERVICE;**330**;Sep 27, 1994
"RTN","LR330",3,0)
EN ; Does not prevent loading of the transport global.
"RTN","LR330",4,0)
 ; Environment check is done only during the install.
"RTN","LR330",5,0)
 ;
"RTN","LR330",6,0)
 N XQA,XQAMSG
"RTN","LR330",7,0)
 ;
"RTN","LR330",8,0)
 I '$G(XPDENV) D  Q
"RTN","LR330",9,0)
 . S XQAMSG="Transport global for patch "_$G(XPDNM,"Unknown patch")_" loaded on "_$$HTE^XLFDT($H)
"RTN","LR330",10,0)
 . S XQA("G.LMI")=""
"RTN","LR330",11,0)
 . D SETUP^XQALERT
"RTN","LR330",12,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("Sending transport global loaded alert to mail group G.LMI",80))
"RTN","LR330",13,0)
 ;
"RTN","LR330",14,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")_" started on "_$$HTE^XLFDT($H)
"RTN","LR330",15,0)
 S XQA("G.LMI")=""
"RTN","LR330",16,0)
 D SETUP^XQALERT
"RTN","LR330",17,0)
 D BMES^XPDUTL($$CJ^XLFSTR("Sending install started alert to mail group G.LMI",80))
"RTN","LR330",18,0)
 ;
"RTN","LR330",19,0)
 D CHECK
"RTN","LR330",20,0)
 D EXIT
"RTN","LR330",21,0)
 Q
"RTN","LR330",22,0)
 ;
"RTN","LR330",23,0)
CHECK ; Perform environment check
"RTN","LR330",24,0)
 I $S('$G(IOM):1,'$G(IOSL):1,$G(U)'="^":1,1:0) D  Q
"RTN","LR330",25,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("Terminal Device is not defined",80))
"RTN","LR330",26,0)
 . S XPDQUIT=2
"RTN","LR330",27,0)
 I $S('$G(DUZ):1,$D(DUZ)[0:1,$D(DUZ(0))[0:1,1:0) D  Q
"RTN","LR330",28,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("Please log in to set local DUZ... variables",80))
"RTN","LR330",29,0)
 . S XPDQUIT=2
"RTN","LR330",30,0)
 I $P($$ACTIVE^XUSER(DUZ),"^")'=1 D  Q
"RTN","LR330",31,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("You are not a valid user on this system",80))
"RTN","LR330",32,0)
 . S XPDQUIT=2
"RTN","LR330",33,0)
 S XPDIQ("XPZ1","B")="NO"
"RTN","LR330",34,0)
 Q
"RTN","LR330",35,0)
 ;
"RTN","LR330",36,0)
EXIT ;
"RTN","LR330",37,0)
 I $G(XPDQUIT) D BMES^XPDUTL($$CJ^XLFSTR("--- Install Environment Check FAILED ---",80))
"RTN","LR330",38,0)
 I '$G(XPDQUIT) D BMES^XPDUTL($$CJ^XLFSTR("--- Environment Check is Ok ---",80))
"RTN","LR330",39,0)
 Q
"RTN","LR330",40,0)
 ;
"RTN","LR330",41,0)
PRE ; KIDS Pre install
"RTN","LR330",42,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Pre install started ***",80))
"RTN","LR330",43,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** No action required ***",80))
"RTN","LR330",44,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Pre install completed ***",80))
"RTN","LR330",45,0)
 Q
"RTN","LR330",46,0)
 ;
"RTN","LR330",47,0)
POST ; KIDS Post install
"RTN","LR330",48,0)
 N XQA,XQAMSG
"RTN","LR330",49,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Post install started ***",80))
"RTN","LR330",50,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** No action required ***",80))
"RTN","LR330",51,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Post install completed ***",80))
"RTN","LR330",52,0)
 D BMES^XPDUTL($$CJ^XLFSTR("Sending install completion alert to mail group G.LMI",80))
"RTN","LR330",53,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")_" completed on "_$$HTE^XLFDT($H)
"RTN","LR330",54,0)
 S XQA("G.LMI")=""
"RTN","LR330",55,0)
 D SETUP^XQALERT
"RTN","LR330",56,0)
 S XQAMSG="LIM: Review description for "_$G(XPDNM,"Unknown patch")_" use KIDS:Utilities:Build File Print"
"RTN","LR330",57,0)
 S XQA("G.LMI")=""
"RTN","LR330",58,0)
 D SETUP^XQALERT
"RTN","LR330",59,0)
 Q
"RTN","LRVR4")
0^1^B51672898
"RTN","LRVR4",1,0)
LRVR4 ;DALOI/CJS/DALOI/FHS - LAB ROUTINE DATA VERIFICATION ; 24 Jan 2004
"RTN","LRVR4",2,0)
 ;;5.2;LAB SERVICE;**14,42,121,153,221,263,279,283,287,286,330**;Sep 27, 1994
"RTN","LRVR4",3,0)
 I $D(LRSBCOM) D
"RTN","LRVR4",4,0)
 . N LRX
"RTN","LRVR4",5,0)
 . S LRX=0
"RTN","LRVR4",6,0)
 . F  S LRX=$O(LRSBCOM(LRX)) Q:LRX=""  S ^LAH(LRLL,1,LRSQ,1,LRX)=LRSBCOM(LRX)
"RTN","LRVR4",7,0)
 K %,LRSBCOM
"RTN","LRVR4",8,0)
 D LOOP
"RTN","LRVR4",9,0)
 Q
"RTN","LRVR4",10,0)
 ;
"RTN","LRVR4",11,0)
 ;
"RTN","LRVR4",12,0)
LOOP ;
"RTN","LRVR4",13,0)
 S LRLCT=0
"RTN","LRVR4",14,0)
 W !!,PNM,"   SSN: ",SSN,"   "
"RTN","LRVR4",15,0)
 I LRDPF=2 W "   LOC: ",$S(LRWRD'="":LRWRD,1:$S($L($P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,7)):$P(^(0),U,7),1:"??"))
"RTN","LRVR4",16,0)
 W !,"Pat Info: ",$P($G(^LR(LRDFN,.091)),U)
"RTN","LRVR4",17,0)
 W ?34," Sex: ",$S(SEX="M":"MALE",SEX="F":"FEMALE",1:SEX)
"RTN","LRVR4",18,0)
 W ?48," Age: ",$$CALCAGE^LRRPU(DOB,LRCDT)," as of ",$$FMTE^XLFDT(LRCDT,"1D")
"RTN","LRVR4",19,0)
 S LRPRAC=$P(^LRO(68,LRAA,1,LRAD,1,LRAN,0),U,8)
"RTN","LRVR4",20,0)
 I LRPRAC>0,LRPRAC=+LRPRAC D GETS^DIQ(200,LRPRAC_",",".01;.132;.137;.138","E","LRPRAC(LRPRAC)","LRERR")
"RTN","LRVR4",21,0)
 W !,"Provider: "
"RTN","LRVR4",22,0)
 S LRLCT=LRLCT+3
"RTN","LRVR4",23,0)
 I LRPRAC'="",'$D(LRPRAC(LRPRAC,200)) W LRPRAC
"RTN","LRVR4",24,0)
 I LRPRAC,$D(LRPRAC(LRPRAC,200)) D
"RTN","LRVR4",25,0)
 . W LRPRAC(LRPRAC,200,LRPRAC_",",.01,"E"),?40," Voice pager: ",LRPRAC(LRPRAC,200,LRPRAC_",",.137,"E")
"RTN","LRVR4",26,0)
 . W !,"   Phone: ",LRPRAC(LRPRAC,200,LRPRAC_",",.132,"E"),?38," Digital pager: ",LRPRAC(LRPRAC,200,LRPRAC_",",.138,"E")
"RTN","LRVR4",27,0)
 . S LRLCT=LRLCT+1
"RTN","LRVR4",28,0)
 ;
"RTN","LRVR4",29,0)
 N PRAC,PR
"RTN","LRVR4",30,0)
 D PRAC^LR7OMERG(LRAA,LRAD,LRAN,.PRAC)
"RTN","LRVR4",31,0)
 I $O(PRAC(0)) D
"RTN","LRVR4",32,0)
 . S PR=0
"RTN","LRVR4",33,0)
 . F  S PR=$O(PRAC(PR)) Q:PR<1  I $D(^VA(200,PR,0)) W !?14,$P(^(0),"^") S LRLCT=LRLCT+1
"RTN","LRVR4",34,0)
 ;
"RTN","LRVR4",35,0)
 W ! S LRNX=0,LRVRM=1,Z=LRCDT,LRLCT=LRLCT+1
"RTN","LRVR4",36,0)
 I $P(Z1,U,7)'="" W !,"VOLUME: ",$P(Z1,U,7) S LRLCT=LRLCT+1
"RTN","LRVR4",37,0)
 S LRACC=$P(Z1,U,6)
"RTN","LRVR4",38,0)
 W !,"ACCESSION:",?30,$P(Z2,U,6),?44," ",LRACC
"RTN","LRVR4",39,0)
 W !,LRPANEL,?30,LRDAT(2),?44," ",LRDAT
"RTN","LRVR4",40,0)
 S LRLCT=LRLCT+2
"RTN","LRVR4",41,0)
 I $D(LRALERT),LRALERT<($P(LRPARAM,U,20)+1) D
"RTN","LRVR4",42,0)
 . W !?15 W:$E(IOST,1,2)="C-" @LRVIDO
"RTN","LRVR4",43,0)
 . W "Test ordered "_$P($G(^LAB(62.05,+LRALERT,0)),U)
"RTN","LRVR4",44,0)
 . W:$E(IOST,1,2)="C-" @LRVIDOF,$C(7)
"RTN","LRVR4",45,0)
 . S LRLCT=LRLCT+1
"RTN","LRVR4",46,0)
 I $D(LRGVP) D V20 Q
"RTN","LRVR4",47,0)
 I ($O(LRSB(0))<1!$D(LRPER))&'$D(LRNUF) D LRSBCOM G EDIT
"RTN","LRVR4",48,0)
 K LRNUF
"RTN","LRVR4",49,0)
 D V20:'$D(LRPER) Q:$O(LRSB(1))<1  G:LREDIT EDIT
"RTN","LRVR4",50,0)
V36 ;
"RTN","LRVR4",51,0)
 S LRTEC=$S($D(^LRO(68,LRAA,1,LRAD,2)):$P(^(2),U),1:$S($D(LRUSI):LRUSI,1:"")),LREDIT=0
"RTN","LRVR4",52,0)
 ;
"RTN","LRVR4",53,0)
V3 ;
"RTN","LRVR4",54,0)
 D LRSBCOM,DCOM^LRVERA
"RTN","LRVR4",55,0)
 ;
"RTN","LRVR4",56,0)
 ; If entering reference lab results only allow editing comments/workload
"RTN","LRVR4",57,0)
 K DIR
"RTN","LRVR4",58,0)
 S LRLCT=0
"RTN","LRVR4",59,0)
 I $G(LRDUZ(2)),DUZ(2)'=LRDUZ(2) D
"RTN","LRVR4",60,0)
 . S DIR(0)="SAO^C:Comments;W:Workload"
"RTN","LRVR4",61,0)
 . S DIR("A")="SELECT ('C' for Comments, 'W' Workload): "
"RTN","LRVR4",62,0)
 E  D
"RTN","LRVR4",63,0)
 . S DIR(0)="SAO^E:Edit;C:Comments;W:Workload"
"RTN","LRVR4",64,0)
 . S DIR("A")="SELECT ('E' to Edit, 'C' for Comments, 'W' Workload): "
"RTN","LRVR4",65,0)
 D ^DIR
"RTN","LRVR4",66,0)
 I $D(DIRUT) S X="^" G V37
"RTN","LRVR4",67,0)
 S X=Y
"RTN","LRVR4",68,0)
 S:$E(X)="E" LREDIT=1,X=""
"RTN","LRVR4",69,0)
 I X="C" D COM G LOOP
"RTN","LRVR4",70,0)
 ;
"RTN","LRVR4",71,0)
 I $E(X)="W" D  G LOOP
"RTN","LRVR4",72,0)
 . I $P(LRPARAM,U,14),$P($G(^LRO(68,LRAA,0)),U,16) D STD^LRCAPV,EN^LRCAPV S LREND=0 Q
"RTN","LRVR4",73,0)
 . W !?10,"Workload is not activated. "
"RTN","LRVR4",74,0)
 ;
"RTN","LRVR4",75,0)
 S X=$S(X="@":"",X="":LRTEC,1:X),LRTEC=X
"RTN","LRVR4",76,0)
 S:'$D(^LRO(68,LRAA,1,LRAD,2)) ^(2)="" S ^(2)=X_U_$P(^(2),U,2,99)
"RTN","LRVR4",77,0)
 G EDIT:LREDIT
"RTN","LRVR4",78,0)
V37 Q  ;LEAVE LRVR4, BACK TO LRVR3
"RTN","LRVR4",79,0)
 ;
"RTN","LRVR4",80,0)
 ;
"RTN","LRVR4",81,0)
V25 ;
"RTN","LRVR4",82,0)
 I LRVF K LRSB(LRSB),LRM(LRSB) Q
"RTN","LRVR4",83,0)
 I '$D(LRSB(LRSB)) S LRSB(LRSB)=^LR(LRDFN,LRSS,LRIDT,LRSB) Q
"RTN","LRVR4",84,0)
 Q
"RTN","LRVR4",85,0)
 ;
"RTN","LRVR4",86,0)
 ;
"RTN","LRVR4",87,0)
V20 S LRNX=$O(LRORD(LRNX)) G V35:LRNX<1 D SUBS G V20:'LRTS
"RTN","LRVR4",88,0)
 I $D(^LR(LRDFN,LRSS,LRIDT,LRSB)),^(LRSB)'["pending" D V25 G:LRVF V20
"RTN","LRVR4",89,0)
 I "CH"'=LRSS G V20
"RTN","LRVR4",90,0)
 D V25^LRVR5
"RTN","LRVR4",91,0)
 W !,$P(^LAB(60,+LRTS,0),U)
"RTN","LRVR4",92,0)
 S X1=""
"RTN","LRVR4",93,0)
 I $D(^LR(LRDFN,LRSS,LRLDT,LRSB)) D
"RTN","LRVR4",94,0)
 . S X1=$P(^(LRSB),U),(LRDL,X)=X1
"RTN","LRVR4",95,0)
 . I $$GET1^DID(63.04,LRSB,"","TYPE","","LRERR")="SET" D
"RTN","LRVR4",96,0)
 . . S X=$$EXTERNAL^DILFD(63.04,LRSB,"",X1)
"RTN","LRVR4",97,0)
 . . I X="" S X=X1
"RTN","LRVR4",98,0)
 . W:X'="" ?30,@LRFP
"RTN","LRVR4",99,0)
 S X="",LRFLG=""
"RTN","LRVR4",100,0)
 I $D(LRSB(LRSB)),$P(LRSB(LRSB),U)'="" D
"RTN","LRVR4",101,0)
 . N LRX
"RTN","LRVR4",102,0)
 . K LRNOVER(LRSB)
"RTN","LRVR4",103,0)
 . S (LRDL,LRX,X)=$P(LRSB(LRSB),U)
"RTN","LRVR4",104,0)
 . I $$GET1^DID(63.04,LRSB,"","TYPE","","LRERR")="SET" D
"RTN","LRVR4",105,0)
 . . S X=$$EXTERNAL^DILFD(63.04,LRSB,"",LRX)
"RTN","LRVR4",106,0)
 . . I X="" S X=LRX
"RTN","LRVR4",107,0)
 . W ?44," ",@LRFP," "
"RTN","LRVR4",108,0)
 . S X=LRX,Y=0
"RTN","LRVR4",109,0)
 . K LRQ
"RTN","LRVR4",110,0)
 . I X="" Q
"RTN","LRVR4",111,0)
 . I (X="canc")!(X="comment")!(X="pending") D  Q
"RTN","LRVR4",112,0)
 . . W LRFLG,?56," ",$P(LRNG,U,7)
"RTN","LRVR4",113,0)
 . . S LREDIT=0
"RTN","LRVR4",114,0)
 . I LRDEL'="" S LRQ=1,LRVRM=11 X LRDEL S LRVRM=1 K LRQ
"RTN","LRVR4",115,0)
 . D RANGE
"RTN","LRVR4",116,0)
 . W LRFLG,?56," ",$P(LRNG,U,7) S:X'="" LREDIT=0
"RTN","LRVR4",117,0)
 I '$D(LRNUF) S LRLCT=LRLCT+1 S:$X>80 LRLCT=LRLCT+1 D:LRLCT>22 WT G:$G(Y)'="^" V20
"RTN","LRVR4",118,0)
 ;
"RTN","LRVR4",119,0)
V35 ;
"RTN","LRVR4",120,0)
 D LRCFL:LRCFL]""
"RTN","LRVR4",121,0)
 K LRNUF
"RTN","LRVR4",122,0)
 Q
"RTN","LRVR4",123,0)
 ;
"RTN","LRVR4",124,0)
 ;
"RTN","LRVR4",125,0)
LRCFL ;
"RTN","LRVR4",126,0)
 S LREXEC=LRCFL D ^LREXEC:LRCFL[""
"RTN","LRVR4",127,0)
 D:LRLCT>22 WT
"RTN","LRVR4",128,0)
 Q
"RTN","LRVR4",129,0)
 ;
"RTN","LRVR4",130,0)
 ;
"RTN","LRVR4",131,0)
EDIT ;
"RTN","LRVR4",132,0)
 S LROUT=1 D ^LRVR5
"RTN","LRVR4",133,0)
 S LRVRM=1,LREDIT=0
"RTN","LRVR4",134,0)
 G LRCFL:LROUT!$D(LRPER),LOOP
"RTN","LRVR4",135,0)
 ;
"RTN","LRVR4",136,0)
 ;
"RTN","LRVR4",137,0)
RANGE ;
"RTN","LRVR4",138,0)
 ; If results from another system, use flags returned with results
"RTN","LRVR4",139,0)
 ; and set LRNG,LRNGS with normals from message.
"RTN","LRVR4",140,0)
 ; Check for LRDUZ(2) set for performing lab or performing lab set (piece 9) in LRSB(LRSB) array.
"RTN","LRVR4",141,0)
 I $G(LRDUZ(2)),DUZ(2)'=LRDUZ(2) S Y=X D PLNR,CKPLNR,RQ Q
"RTN","LRVR4",142,0)
 I $P(LRSB(LRSB),"^",9),DUZ(2)'=$P(LRSB(LRSB),"^",9) S Y=X D PLNR,CKPLNR,RQ Q
"RTN","LRVR4",143,0)
 ;
"RTN","LRVR4",144,0)
 D RANGE^LRVER4,RQ
"RTN","LRVR4",145,0)
 Q
"RTN","LRVR4",146,0)
 ;
"RTN","LRVR4",147,0)
 ;
"RTN","LRVR4",148,0)
RQ S X=Y
"RTN","LRVR4",149,0)
NR I $D(LRSB(LRSB))#2 D
"RTN","LRVR4",150,0)
 . N I,LRX,LRY
"RTN","LRVR4",151,0)
 . I $P(X,U)="" S LRSB(LRSB)="" Q
"RTN","LRVR4",152,0)
 . S $P(LRSB(LRSB),U)=X
"RTN","LRVR4",153,0)
 . S $P(LRSB(LRSB),U,2)=LRFLG
"RTN","LRVR4",154,0)
 . S $P(LRSB(LRSB),U,4)=$S($G(LRDUZ):LRDUZ,1:$G(DUZ))
"RTN","LRVR4",155,0)
 . I $P(LRSB(LRSB),U,9)="" S $P(LRSB(LRSB),U,9)=$S($G(LRDUZ(2)):LRDUZ(2),$G(DUZ(2)):DUZ(2),1:"")
"RTN","LRVR4",156,0)
 . S LRX=$$TMPSB^LRVER1(LRSB),LRY=$P(LRSB(LRSB),U,3)
"RTN","LRVR4",157,0)
 . F I=1:1:$L(LRX,"!") I $P(LRY,"!",I)="" S $P(LRY,"!",I)=$P(LRX,"!",I)
"RTN","LRVR4",158,0)
 . S $P(LRSB(LRSB),U,3)=LRY
"RTN","LRVR4",159,0)
 . I $P($P(LRSB(LRSB),U,3),"!")="" D RONLT^LRVER3
"RTN","LRVR4",160,0)
 . S LRX=LRNGS,LRY=$P(LRSB(LRSB),U,5)
"RTN","LRVR4",161,0)
 . F I=1:1:$L(LRX,U) I $P(LRY,"!",I)="" S $P(LRY,"!",I)=$P(LRX,U,I)
"RTN","LRVR4",162,0)
 . S $P(LRSB(LRSB),U,5)=LRY
"RTN","LRVR4",163,0)
 Q
"RTN","LRVR4",164,0)
 ;
"RTN","LRVR4",165,0)
 ;
"RTN","LRVR4",166,0)
PLNR ; Performing lab normal ranges, use instead of current local ranges
"RTN","LRVR4",167,0)
 ; Retrieve from results when "NPC" node = 2 or greater
"RTN","LRVR4",168,0)
 ; and set LRNG and LRNGS with normals from HL7 message/interface.
"RTN","LRVR4",169,0)
 N I,LRY
"RTN","LRVR4",170,0)
 I +$G(^LR(LRDFN,LRSS,LRIDT,"NPC"))<2 Q
"RTN","LRVR4",171,0)
 S LRY=$P($G(LRSB(LRSB)),"^",5)
"RTN","LRVR4",172,0)
 S $P(LRNGS,"^")=$P(LRY,"!")
"RTN","LRVR4",173,0)
 F I=2:1:5,11,12 D
"RTN","LRVR4",174,0)
 . ; enclose in quotes if not numeric
"RTN","LRVR4",175,0)
 . I I<6,$P(LRY,"!",I)'?.N.1".".N S $P(LRY,"!",I)=$C(34)_$P(LRY,"!",I)_$C(34)
"RTN","LRVR4",176,0)
 . S $P(LRNGS,"^",I)=$P(LRY,"!",I),$P(LRNG,"^",I)=$P(LRY,"!",I),@("LRNG"_I)=$P(LRY,"!",I)
"RTN","LRVR4",177,0)
 S $P(LRNG,"^",7)=$P(LRY,"!",7),$P(LRNGS,"^",7)=$P(LRY,"!",7)
"RTN","LRVR4",178,0)
 Q
"RTN","LRVR4",179,0)
 ;
"RTN","LRVR4",180,0)
 ;
"RTN","LRVR4",181,0)
CKPLNR ; Check performing lab normal ranges and set abnormal flag
"RTN","LRVR4",182,0)
 ; based on HL7 messages/interface.
"RTN","LRVR4",183,0)
 S LRFLG=$P(LRSB(LRSB),"^",2)
"RTN","LRVR4",184,0)
 I '$D(LRQ),$E(LRFLG,2)="*" D DISPFLG^LRVER4
"RTN","LRVR4",185,0)
 Q
"RTN","LRVR4",186,0)
 ;
"RTN","LRVR4",187,0)
 ;
"RTN","LRVR4",188,0)
SUBS D SUBS^LRVER4
"RTN","LRVR4",189,0)
 Q
"RTN","LRVR4",190,0)
 ;
"RTN","LRVR4",191,0)
 ;
"RTN","LRVR4",192,0)
WT D WT^LRVER4
"RTN","LRVR4",193,0)
 Q
"RTN","LRVR4",194,0)
 ;
"RTN","LRVR4",195,0)
 ;
"RTN","LRVR4",196,0)
COM ;from LRVR5
"RTN","LRVR4",197,0)
 Q:$D(LRGVP)!('$D(LRLABKY))
"RTN","LRVR4",198,0)
 D DCOM^LRVERA
"RTN","LRVR4",199,0)
 K DR,DA,DIE
"RTN","LRVR4",200,0)
 S DIE="^LR("_LRDFN_",""CH"",",DA=LRIDT,DA(1)=LRDFN,DR=.99 D ^DIE
"RTN","LRVR4",201,0)
 Q
"RTN","LRVR4",202,0)
 ;
"RTN","LRVR4",203,0)
 ;
"RTN","LRVR4",204,0)
LRSBCOM ;Display/store comments from the instrument
"RTN","LRVR4",205,0)
 N LRSBCOM,LRI
"RTN","LRVR4",206,0)
 S LRI=0
"RTN","LRVR4",207,0)
 F  S LRI=$O(^LAH(LRLL,1,LRSQ,1,LRI)) Q:LRI=""  D
"RTN","LRVR4",208,0)
 . S LRSBCOM=^LAH(LRLL,1,LRSQ,1,LRI)
"RTN","LRVR4",209,0)
 . I $P(LRSBCOM,"^",2) Q  ; Already been processed
"RTN","LRVR4",210,0)
 . D LRSBCOM1
"RTN","LRVR4",211,0)
 . S $P(^LAH(LRLL,1,LRSQ,1,LRI),U,2)=1 ; Mark as processed
"RTN","LRVR4",212,0)
 I $G(LRQUIET) Q
"RTN","LRVR4",213,0)
 W !
"RTN","LRVR4",214,0)
 S LRLCT=$G(LRLCT)+1 D:LRLCT>22 WT
"RTN","LRVR4",215,0)
 Q
"RTN","LRVR4",216,0)
 ;
"RTN","LRVR4",217,0)
 ;
"RTN","LRVR4",218,0)
LRSBCOM1 ; Store instrument comments in file #63
"RTN","LRVR4",219,0)
 ; Check for duplicate comments in ^LAH and ^LR globals
"RTN","LRVR4",220,0)
 N LRDUP,LRERR,LRI,LRNOECHO,LRNOEXPD,LRX,LRY
"RTN","LRVR4",221,0)
 ;
"RTN","LRVR4",222,0)
 ; Don't echo comments/don't expand comment using lab description file.
"RTN","LRVR4",223,0)
 ; Used by LRNUM - called from input transform of #.01 field.
"RTN","LRVR4",224,0)
 S LRNOECHO=0,LRNOEXPD=1
"RTN","LRVR4",225,0)
 ;
"RTN","LRVR4",226,0)
 ; Check for duplicates - comment stripped if spaces, force to upper case unless
"RTN","LRVR4",227,0)
 ; flag set to store duplicates (Field #2.2 of PROFILE multiple in file #68.2)
"RTN","LRVR4",228,0)
 S LRDUP=0
"RTN","LRVR4",229,0)
 I '$P($G(^LRO(68.2,LRLL,10,+$G(LRPROF),0)),U,4) D
"RTN","LRVR4",230,0)
 . S LRI=0,LRY=$TR(LRSBCOM," ",""),LRY=$$UP^XLFSTR(LRY)
"RTN","LRVR4",231,0)
 . F  S LRI=$O(^LR(LRDFN,"CH",LRIDT,1,LRI)) Q:'LRI  D  Q:LRDUP
"RTN","LRVR4",232,0)
 . . S LRX=$P($G(^LR(LRDFN,"CH",LRIDT,1,LRI,0)),U)
"RTN","LRVR4",233,0)
 . . S LRX=$TR(LRX," ",""),LRX=$$UP^XLFSTR(LRX)
"RTN","LRVR4",234,0)
 . . I LRX=LRY S LRDUP=1
"RTN","LRVR4",235,0)
 I LRDUP=1 Q  ; Duplicate comment
"RTN","LRVR4",236,0)
 D FILECOM(LRDFN,LRIDT,LRSBCOM)
"RTN","LRVR4",237,0)
 I $G(LRQUIET) Q
"RTN","LRVR4",238,0)
 W !,"Inst Comments: "_LRSBCOM
"RTN","LRVR4",239,0)
 S LRLCT=$G(LRLCT)+1 D:LRLCT>10 WT
"RTN","LRVR4",240,0)
 Q
"RTN","LRVR4",241,0)
 ;
"RTN","LRVR4",242,0)
 ;
"RTN","LRVR4",243,0)
FILECOM(LRDFN,LRIDT,LRCMT) ; File comment in field #99
"RTN","LRVR4",244,0)
 ; Call with LRDFN = ien of patient in file #63
"RTN","LRVR4",245,0)
 ;           LRIDT = ien of specimen date/time
"RTN","LRVR4",246,0)
 ;           LRCMT = comment to store
"RTN","LRVR4",247,0)
 ;
"RTN","LRVR4",248,0)
 N LRFDA,LRERR
"RTN","LRVR4",249,0)
 S LRFDA(2,63.041,"+2,"_LRIDT_","_LRDFN_",",.01)=LRCMT
"RTN","LRVR4",250,0)
 D UPDATE^DIE("","LRFDA(2)","","LRERR(2)")
"RTN","LRVR4",251,0)
 Q
"VER")
8.0^22.0
"BLD",16574,6)
^SEQ #254
**END**
**END**

Released HL*1.6*107 SEQ #90
Extracted from mail message
**KIDS**:HL*1.6*107^

**INSTALL NAME**
HL*1.6*107
"BLD",736,0)
HL*1.6*107^HEALTH LEVEL SEVEN^0^3030513^y
"BLD",736,1,0)
^^2^2^3030513^
"BLD",736,1,1,0)
Please see patch HL*1.6*107 description on Forum for full instructions and
"BLD",736,1,2,0)
information.
"BLD",736,4,0)
^9.64PA^^
"BLD",736,"KRN",0)
^9.67PA^8989.52^19
"BLD",736,"KRN",.4,0)
.4
"BLD",736,"KRN",.401,0)
.401
"BLD",736,"KRN",.402,0)
.402
"BLD",736,"KRN",.403,0)
.403
"BLD",736,"KRN",.5,0)
.5
"BLD",736,"KRN",.84,0)
.84
"BLD",736,"KRN",3.6,0)
3.6
"BLD",736,"KRN",3.8,0)
3.8
"BLD",736,"KRN",9.2,0)
9.2
"BLD",736,"KRN",9.8,0)
9.8
"BLD",736,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",736,"KRN",9.8,"NM",1,0)
HLCSRPT1^^0^B45987832
"BLD",736,"KRN",9.8,"NM",2,0)
HLCSRPT2^^0^B79903571
"BLD",736,"KRN",9.8,"NM","B","HLCSRPT1",1)

"BLD",736,"KRN",9.8,"NM","B","HLCSRPT2",2)

"BLD",736,"KRN",19,0)
19
"BLD",736,"KRN",19.1,0)
19.1
"BLD",736,"KRN",101,0)
101
"BLD",736,"KRN",409.61,0)
409.61
"BLD",736,"KRN",771,0)
771
"BLD",736,"KRN",870,0)
870
"BLD",736,"KRN",8989.51,0)
8989.51
"BLD",736,"KRN",8989.52,0)
8989.52
"BLD",736,"KRN",8994,0)
8994
"BLD",736,"KRN","B",.4,.4)

"BLD",736,"KRN","B",.401,.401)

"BLD",736,"KRN","B",.402,.402)

"BLD",736,"KRN","B",.403,.403)

"BLD",736,"KRN","B",.5,.5)

"BLD",736,"KRN","B",.84,.84)

"BLD",736,"KRN","B",3.6,3.6)

"BLD",736,"KRN","B",3.8,3.8)

"BLD",736,"KRN","B",9.2,9.2)

"BLD",736,"KRN","B",9.8,9.8)

"BLD",736,"KRN","B",19,19)

"BLD",736,"KRN","B",19.1,19.1)

"BLD",736,"KRN","B",101,101)

"BLD",736,"KRN","B",409.61,409.61)

"BLD",736,"KRN","B",771,771)

"BLD",736,"KRN","B",870,870)

"BLD",736,"KRN","B",8989.51,8989.51)

"BLD",736,"KRN","B",8989.52,8989.52)

"BLD",736,"KRN","B",8994,8994)

"BLD",736,"QUES",0)
^9.62^^
"MBREQ")
0
"PKG",9,-1)
1^1
"PKG",9,0)
HEALTH LEVEL SEVEN^HL^DHCP IMPLEMENTATION OF HEALTH LEVEL SEVEN^
"PKG",9,20,0)
^9.402P^^
"PKG",9,22,0)
^9.49I^1^1
"PKG",9,22,1,0)
1.6^2980130^2980130^6
"PKG",9,22,1,"PAH",1,0)
107^3030513
"PKG",9,22,1,"PAH",1,1,0)
^^2^2^3030513
"PKG",9,22,1,"PAH",1,1,1,0)
Please see patch HL*1.6*107 description on Forum for full instructions and
"PKG",9,22,1,"PAH",1,1,2,0)
information.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","HLCSRPT1")
0^1^B45987832
"RTN","HLCSRPT1",1,0)
HLCSRPT1 ;ISC-SF/RAH-TRANS LOG PENDING MSG LIST;05/12/03  11:43 AM
"RTN","HLCSRPT1",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**19,50,107**;Oct 13, 1995
"RTN","HLCSRPT1",3,0)
 ;
"RTN","HLCSRPT1",4,0)
 Q
"RTN","HLCSRPT1",5,0)
 ;
"RTN","HLCSRPT1",6,0)
EN ; Entry Point for Pending Message Search.
"RTN","HLCSRPT1",7,0)
 D LNKSRCH Q:$D(STOP)
"RTN","HLCSRPT1",8,0)
 I HLCSLS=1 D SEARCH1 Q
"RTN","HLCSRPT1",9,0)
 D SEARCH2
"RTN","HLCSRPT1",10,0)
 Q
"RTN","HLCSRPT1",11,0)
 ;
"RTN","HLCSRPT1",12,0)
 ;
"RTN","HLCSRPT1",13,0)
SEARCH1 ;
"RTN","HLCSRPT1",14,0)
 W !!," . . . PLEASE WAIT, THIS CAN TAKE AWHILE . . .",!
"RTN","HLCSRPT1",15,0)
 S HLCSI=0,HLCSIO="" S HLCSLN=0
"RTN","HLCSRPT1",16,0)
 F  S HLCSIO=$O(^HLMA("AC",HLCSIO)) Q:(HLCSIO="")  D
"RTN","HLCSRPT1",17,0)
 . S HLCSN=HLCSI,HLCSJ=0
"RTN","HLCSRPT1",18,0)
 . F  S HLCSJ=$O(^HLMA("AC",HLCSIO,HLCSLINK,HLCSJ)) Q:(HLCSJ="")  D
"RTN","HLCSRPT1",19,0)
 .. I '$D(^HLMA(HLCSJ,0)) Q
"RTN","HLCSRPT1",20,0)
 .. I '$D(^HLMA("AG",1,HLCSJ)) Q
"RTN","HLCSRPT1",21,0)
 .. S HLCSX=^HLMA(HLCSJ,0),HLCSDTE=$P(HLCSX,U,1)
"RTN","HLCSRPT1",22,0)
 .. S HLCSLNK="          "
"RTN","HLCSRPT1",23,0)
 .. I $D(^HLCS(870,HLCSLINK,0)) S HLCSLNK=$P(^HLCS(870,HLCSLINK,0),U,1)
"RTN","HLCSRPT1",24,0)
 .. S HLCSEVN1=$P(HLCSX,U,13) I HLCSEVN1'="",($D(^HL(771.2,HLCSEVN1,0))) S HLCSEVN1=$P(^HL(771.2,HLCSEVN1,0),U,1)
"RTN","HLCSRPT1",25,0)
 .. S HLCSEVN2=$P(HLCSX,U,14) I HLCSEVN2'="",($D(^HL(779.001,HLCSEVN2,0))) S HLCSEVN2=$P(^HL(779.001,HLCSEVN2,0),U,1)
"RTN","HLCSRPT1",26,0)
 .. I HLCSEVN1="" S HLCSEVN1="   "
"RTN","HLCSRPT1",27,0)
 .. I HLCSEVN2="" S HLCSEVN2="   "
"RTN","HLCSRPT1",28,0)
 .. I $L(HLCSEVN1)<3 S HLCSEVN1=HLCSEVN1_"   ",HLCSEVN1=$E(HLCSEVN1,1,3)
"RTN","HLCSRPT1",29,0)
 .. I $L(HLCSEVN2)<3 S HLCSEVN2=HLCSEVN2_"   ",HLCSEVN2=$E(HLCSEVN2,1,3)
"RTN","HLCSRPT1",30,0)
 .. S HLCSEVN=HLCSEVN1_":"_HLCSEVN2
"RTN","HLCSRPT1",31,0)
 .. D FORMAT^HLCSRPT
"RTN","HLCSRPT1",32,0)
 .. Q
"RTN","HLCSRPT1",33,0)
 . Q
"RTN","HLCSRPT1",34,0)
 I '$D(^TMP("TLOG",$J,1)) W !!,HLCSNREC,!! S DIR(0)="E" D ^DIR K DIR Q
"RTN","HLCSRPT1",35,0)
 I VERS22'="YES" S HLCSTITL="IEN RECORD #   MESSAGE ID #         Log Link   Msg:Evn IO Sndg Apl Rcvr Apl HDR"
"RTN","HLCSRPT1",36,0)
 E  S HLCSTITL="MESSAGE ID #         D/T Entered   Log Link   Msg:Evn IO Sndg Apl Rcvr Apl     "
"RTN","HLCSRPT1",37,0)
 I VERS22'="YES" D FAKR
"RTN","HLCSRPT1",38,0)
 D DISPLAY^HLCSRPT K ^TMP("TLOG",$J)
"RTN","HLCSRPT1",39,0)
 Q
"RTN","HLCSRPT1",40,0)
 ;
"RTN","HLCSRPT1",41,0)
SEARCH2 ;
"RTN","HLCSRPT1",42,0)
 W !!," . . . PLEASE WAIT, THIS CAN TAKE AWHILE . . .",!
"RTN","HLCSRPT1",43,0)
 S HLCSI=0,HLCSIO="" S HLCSLN=0
"RTN","HLCSRPT1",44,0)
 F  S HLCSIO=$O(^HLMA("AC",HLCSIO)) Q:(HLCSIO="")  D
"RTN","HLCSRPT1",45,0)
 . S HLCSN=HLCSI,HLCSJ=0,HLCSLINK=0
"RTN","HLCSRPT1",46,0)
 . F  S HLCSLINK=$O(^HLMA("AC",HLCSIO,HLCSLINK)) Q:(HLCSLINK="")  D
"RTN","HLCSRPT1",47,0)
 .. F  S HLCSJ=$O(^HLMA("AC",HLCSIO,HLCSLINK,HLCSJ)) Q:(HLCSJ="")  D
"RTN","HLCSRPT1",48,0)
 ... I '$D(^HLMA(HLCSJ,0)) Q
"RTN","HLCSRPT1",49,0)
 ... I '$D(^HLMA("AG",1,HLCSJ)) Q
"RTN","HLCSRPT1",50,0)
 ... S HLCSX=^HLMA(HLCSJ,0),HLCSDTE=$P(HLCSX,U,1)
"RTN","HLCSRPT1",51,0)
 ... S HLCSLNK="          "
"RTN","HLCSRPT1",52,0)
 ... I $D(^HLCS(870,HLCSLINK,0)) S HLCSLNK=$P(^HLCS(870,HLCSLINK,0),U,1)
"RTN","HLCSRPT1",53,0)
 ... S HLCSEVN1=$P(HLCSX,U,13) I HLCSEVN1'="",($D(^HL(771.2,HLCSEVN1,0))) S HLCSEVN1=$P(^HL(771.2,HLCSEVN1,0),U,1)
"RTN","HLCSRPT1",54,0)
 ... S HLCSEVN2=$P(HLCSX,U,14) I HLCSEVN2'="",($D(^HL(779.001,HLCSEVN2,0))) S HLCSEVN2=$P(^HL(779.001,HLCSEVN2,0),U,1)
"RTN","HLCSRPT1",55,0)
 ... I HLCSEVN1="" S HLCSEVN1="   "
"RTN","HLCSRPT1",56,0)
 ... I HLCSEVN2="" S HLCSEVN2="   "
"RTN","HLCSRPT1",57,0)
 ... I $L(HLCSEVN1)<3 S HLCSEVN1=HLCSEVN1_"   ",HLCSEVN1=$E(HLCSEVN1,1,3)
"RTN","HLCSRPT1",58,0)
 ... I $L(HLCSEVN2)<3 S HLCSEVN2=HLCSEVN2_"   ",HLCSEVN2=$E(HLCSEVN2,1,3)
"RTN","HLCSRPT1",59,0)
 ... S HLCSEVN=HLCSEVN1_":"_HLCSEVN2
"RTN","HLCSRPT1",60,0)
 ... D FORMAT^HLCSRPT
"RTN","HLCSRPT1",61,0)
 ... Q
"RTN","HLCSRPT1",62,0)
 .. Q
"RTN","HLCSRPT1",63,0)
 . Q
"RTN","HLCSRPT1",64,0)
 I '$D(^TMP("TLOG",$J,1)) W !!,HLCSNREC,!! S DIR(0)="E" D ^DIR K DIR Q
"RTN","HLCSRPT1",65,0)
 I VERS22'="YES" S HLCSTITL="IEN RECORD #   MESSAGE ID #         Log Link   Msg:Evn IO Sndg Apl Rcvr Apl HDR"
"RTN","HLCSRPT1",66,0)
 E  S HLCSTITL="MESSAGE ID #         D/T Entered   Log Link   Msg:Evn IO Sndg Apl Rcvr Apl     "
"RTN","HLCSRPT1",67,0)
 I VERS22'="YES" D FAKR
"RTN","HLCSRPT1",68,0)
 D DISPLAY^HLCSRPT K ^TMP("TLOG",$J)
"RTN","HLCSRPT1",69,0)
 Q
"RTN","HLCSRPT1",70,0)
 ;
"RTN","HLCSRPT1",71,0)
LNKSRCH ; Report pending messages on A logical link.
"RTN","HLCSRPT1",72,0)
 W @IOF,! S HLCSHDR="Logical Link Selection" D HLCSBAR
"RTN","HLCSRPT1",73,0)
 S DIR(0)="PAO^870:AEO",DIR("A")="Select Logical Link:  ALL//"
"RTN","HLCSRPT1",74,0)
 D ^DIR S:($D(DTOUT)!($D(DUOUT))) STOP=1 Q:$D(STOP)
"RTN","HLCSRPT1",75,0)
 I X="" S HLCSLS="" K DIR,X,Y Q
"RTN","HLCSRPT1",76,0)
 I Y=-1 W !,X_" NOT VALID " K X,Y G LNKSRCH
"RTN","HLCSRPT1",77,0)
 S HLCSLINK=$P(Y,U,1),HLCSLNK=$P(Y,U,2) K DIR,X,Y
"RTN","HLCSRPT1",78,0)
 S HLCSLS=1
"RTN","HLCSRPT1",79,0)
 Q
"RTN","HLCSRPT1",80,0)
 ;
"RTN","HLCSRPT1",81,0)
FAKR ; Build fake record to pass FM21 Browser edits.
"RTN","HLCSRPT1",82,0)
 S HLCSJ=^TMP("TLOG",$J,1)
"RTN","HLCSRPT1",83,0)
 S HLCSJ=+$P(HLCSJ," ",1)
"RTN","HLCSRPT1",84,0)
 S ^TMP($J,"MESSAGE",HLCSJ,0)="^^1^1"
"RTN","HLCSRPT1",85,0)
 S ^TMP($J,"MESSAGE",HLCSJ,1,0)=" Fake Record to pass Browser edits. "
"RTN","HLCSRPT1",86,0)
 S HLCSRNO=HLCSJ
"RTN","HLCSRPT1",87,0)
 Q
"RTN","HLCSRPT1",88,0)
 ;
"RTN","HLCSRPT1",89,0)
SHOWMSG(XXY,XXZ) ;
"RTN","HLCSRPT1",90,0)
 ; Each node, ^tmp($j,"message",record_ien), invokes this code
"RTN","HLCSRPT1",91,0)
 ; to compile a 'virtual w-p document' when a message is browsed.
"RTN","HLCSRPT1",92,0)
 I $D(^HLMA(XXY,"MSH",0)) D
"RTN","HLCSRPT1",93,0)
 . S ^TMP($J,"MESSAGE",XXY,0)=^HLMA(XXY,"MSH",0)
"RTN","HLCSRPT1",94,0)
 . S YY1=$P(^HLMA(XXY,"MSH",0),U,3),YY2=$P(^HLMA(XXY,"MSH",0),U,4)
"RTN","HLCSRPT1",95,0)
 E  S ^TMP($J,"MESSAGE",XXY,0)="1^1"
"RTN","HLCSRPT1",96,0)
 S XLINE=^HLMA(XXY,0)
"RTN","HLCSRPT1",97,0)
 S LINE="Record #: "_XXY_"                    ",LINE=$E(LINE,1,30)
"RTN","HLCSRPT1",98,0)
 S LINE=LINE_"Message #: "_$P(XLINE,U,2)
"RTN","HLCSRPT1",99,0)
 S ^TMP($J,"MESSAGE",XXY,1,0)=LINE
"RTN","HLCSRPT1",100,0)
 S DTE=$P(XLINE,U,1) I $P($G(^HL(772,DTE,0)),U,1)'="" S DTE=$P(^HL(772,DTE,0),U,1),DTE=$E(DTE,4,7)_$E(DTE,2,3)_"."_$P(DTE,".",2)_"      "
"RTN","HLCSRPT1",101,0)
 I $D(^HLMA(XXY,"S")),$P(^HLMA(XXY,"S"),U,1)'="" S DTP=$P(^HLMA(XXY,"S"),U,1) S DTP=$E(DTP,4,7)_$E(DTP,2,3)_"."_$P(DTP,".",2)
"RTN","HLCSRPT1",102,0)
 E  S DTP=" "
"RTN","HLCSRPT1",103,0)
 S LINE="D/T Entered: "_DTE,LINE=$E(LINE,1,30)_"D/T Processed: "_DTP
"RTN","HLCSRPT1",104,0)
 S ^TMP($J,"MESSAGE",XXY,2,0)=LINE K DTE,DTP
"RTN","HLCSRPT1",105,0)
 S LINE="Logical Link: " I $P(XLINE,U,7)'="",($D(^HLCS(870,$P(XLINE,U,7),0))) S LINE=LINE_$P(^HLCS(870,$P(XLINE,U,7),0),U,1)
"RTN","HLCSRPT1",106,0)
 S LINE=LINE_"                ",LINE=$E(LINE,1,30)
"RTN","HLCSRPT1",107,0)
 S LINE=LINE_"Ack To MSG#: " I $P(XLINE,U,6)'="",($D(^HLMA($P(XLINE,U,6),0))) S LINE=LINE_$P(^HLMA($P(XLINE,U,6),0),U,2)
"RTN","HLCSRPT1",108,0)
 S ^TMP($J,"MESSAGE",XXY,3,0)=LINE
"RTN","HLCSRPT1",109,0)
 S DTS="" I $P($G(^HLMA(XXY,"P")),U,2)'="" S DTS=$P(^HLMA(XXY,"P"),U,2),DTS=$E(DTS,4,7)_$E(DTS,2,3)_"."_$P(DTS,".",2)
"RTN","HLCSRPT1",110,0)
 S LINE="D/T STATUS: "_DTS_"                  ",LINE=$E(LINE,1,30),LINE=LINE_"STATUS: "
"RTN","HLCSRPT1",111,0)
 I $P(^HLMA(XXY,"P"),U,1)'="" S LINE=LINE_$P(^HL(771.6,+$P(^HLMA(XXY,"P"),U,1),0),U,1)
"RTN","HLCSRPT1",112,0)
 S ^TMP($J,"MESSAGE",XXY,4,0)=LINE K DTS
"RTN","HLCSRPT1",113,0)
 S LINE="ERR MSG: " I $P(^HLMA(XXY,"P"),U,3)'="" S LINE=LINE_$E($P(^HLMA(XXY,"P"),U,3),1,20)
"RTN","HLCSRPT1",114,0)
 S LINE=LINE_"                      ",LINE=$E(LINE,1,30)_"ERR TYPE: "
"RTN","HLCSRPT1",115,0)
 I $P(^HLMA(XXY,"P"),U,4)'="" S LINE=LINE_$P(^HL(771.7,+$P(^HLMA(XXY,"P"),U,4),0),U,1)
"RTN","HLCSRPT1",116,0)
 S ^TMP($J,"MESSAGE",XXY,5,0)=LINE
"RTN","HLCSRPT1",117,0)
 S LINE="Sending Appl: " I $P(XLINE,U,11)'="",($D(^HL(771,$P(XLINE,U,11),0))) S LINE=LINE_$P(^HL(771,$P(XLINE,U,11),0),U,1)
"RTN","HLCSRPT1",118,0)
 S ^TMP($J,"MESSAGE",XXY,6,0)=LINE
"RTN","HLCSRPT1",119,0)
 S LINE="Receiving Appl: " I $P(XLINE,U,12)'="",($D(^HL(771,$P(XLINE,U,12),0))) S LINE=LINE_$P(^HL(771,$P(XLINE,U,12),0),U,1)
"RTN","HLCSRPT1",120,0)
 S ^TMP($J,"MESSAGE",XXY,7,0)=LINE
"RTN","HLCSRPT1",121,0)
 S LINE="Message Type: " I $P(XLINE,U,13)'="",($D(^HL(771.2,$P(XLINE,U,13),0))) S LINE=LINE_$P(^HL(771.2,$P(XLINE,U,13),0),U,1)
"RTN","HLCSRPT1",122,0)
 S LINE=LINE_"                    ",LINE=$E(LINE,1,30)_"Event Type: "
"RTN","HLCSRPT1",123,0)
 I $P(XLINE,U,14)'="",($D(^HL(779.001,$P(XLINE,U,14),0))) S LINE=LINE_$P(^HL(779.001,$P(XLINE,U,14),0),U,1)
"RTN","HLCSRPT1",124,0)
 S ^TMP($J,"MESSAGE",XXY,8,0)=LINE K LINE,XLINE
"RTN","HLCSRPT1",125,0)
 S ^TMP($J,"MESSAGE",XXY,9,0)="MESSAGE HEADER: "
"RTN","HLCSRPT1",126,0)
 S LN1=.5,LN2=10
"RTN","HLCSRPT1",127,0)
 I $D(^HLMA(XXY,"MSH",0)) D
"RTN","HLCSRPT1",128,0)
 . F  S LN1=$O(^HLMA(XXY,"MSH",LN1)) Q:LN1=""  D
"RTN","HLCSRPT1",129,0)
 .. S ^TMP($J,"MESSAGE",XXY,LN2,0)=^HLMA(XXY,"MSH",LN1,0)
"RTN","HLCSRPT1",130,0)
 .. ;HL*1.6*107 start:  to fix the multiple lines per segment
"RTN","HLCSRPT1",131,0)
 .. ;S LN2=LN2+1,LN1=LN1+1
"RTN","HLCSRPT1",132,0)
 .. S LN2=LN2+1
"RTN","HLCSRPT1",133,0)
 .. ;HL*1.6*107 end
"RTN","HLCSRPT1",134,0)
 ..Q
"RTN","HLCSRPT1",135,0)
 S LN1=.5
"RTN","HLCSRPT1",136,0)
 S ^TMP($J,"MESSAGE",XXY,LN2,0)="MESSAGE TEXT: ",LN2=LN2+1
"RTN","HLCSRPT1",137,0)
 I $D(^HL(772,XXZ,"IN",0)) D
"RTN","HLCSRPT1",138,0)
 . F  S LN1=$O(^HL(772,XXZ,"IN",LN1)) Q:(LN1="")  D
"RTN","HLCSRPT1",139,0)
 .. S ^TMP($J,"MESSAGE",XXY,LN2,0)=^HL(772,XXZ,"IN",LN1,0)
"RTN","HLCSRPT1",140,0)
 .. ;HL*1.6*107 start: to fix the multiple lines per segment
"RTN","HLCSRPT1",141,0)
 .. ;S LN2=LN2+1,LN1=LN1+1
"RTN","HLCSRPT1",142,0)
 .. S LN2=LN2+1
"RTN","HLCSRPT1",143,0)
 .. ;HL*1.6*107 end
"RTN","HLCSRPT1",144,0)
 ..Q
"RTN","HLCSRPT1",145,0)
 S (YY1,YY2)=LN2-1
"RTN","HLCSRPT1",146,0)
 S Y1Y2=YY1_"^"_YY2
"RTN","HLCSRPT1",147,0)
 S $P(^TMP($J,"MESSAGE",XXY,0),U,3,4)=Y1Y2
"RTN","HLCSRPT1",148,0)
 K LN1,LN2,Y1Y2,YY1,YY2
"RTN","HLCSRPT1",149,0)
 Q
"RTN","HLCSRPT1",150,0)
 ;
"RTN","HLCSRPT1",151,0)
HLCSBAR ; Center Title on Top Line of Screen
"RTN","HLCSRPT1",152,0)
 W RVON,?(80-$L(HLCSHDR)\2),HLCSHDR,$E(SPACE,$X,77),RVOFF,!
"RTN","HLCSRPT1",153,0)
 Q
"RTN","HLCSRPT1",154,0)
 ;
"RTN","HLCSRPT2")
0^2^B79903571
"RTN","HLCSRPT2",1,0)
HLCSRPT2 ;ISC-SF/RAH-TRANS LOG ERROR LIST ;05/12/03  05:47 PM
"RTN","HLCSRPT2",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**50,85,107**;Oct 13, 1995
"RTN","HLCSRPT2",3,0)
 ;Calls to SAVEDDB^DDBR2, USAVEDDB^DDBR2, PSR^DDBR0, and WP^DDBR2 supported by IA#2540 & IA#3594
"RTN","HLCSRPT2",4,0)
 ;
"RTN","HLCSRPT2",5,0)
 Q
"RTN","HLCSRPT2",6,0)
 ;
"RTN","HLCSRPT2",7,0)
EN ; Entry point for reporting error messages.
"RTN","HLCSRPT2",8,0)
 ;
"RTN","HLCSRPT2",9,0)
 ; All NEWs below added by HL*1.6*85
"RTN","HLCSRPT2",10,0)
 N BLDOFF,BLDON,DY,ERRDTB,ERRDTE,HLCSCLNT,HLCSDTE,HLCSDTP
"RTN","HLCSRPT2",11,0)
 N HLCSEVN,HLCSEVN1,HLCSEVN2,HLCSHDR,HLCSK,HLCSLINK
"RTN","HLCSRPT2",12,0)
 N HLCSLNK,HLCSMID,HLCSMX,HLCSNREC,HLCSPTR,HLCSRNO,HLCSSRVR
"RTN","HLCSRPT2",13,0)
 N HLCSTITL,HLCSTYP,HLERR,IEN773,LAST773,LASTPDT
"RTN","HLCSRPT2",14,0)
 N LPIENS,NOREC,NUMERR,OLD773,OLDPDT,RVOFF,RVON,SPACE
"RTN","HLCSRPT2",15,0)
 N SPACE20,SPACE25,SPACE30,SPACE80,STOP,TYPEINFO,VERS22
"RTN","HLCSRPT2",16,0)
 ;
"RTN","HLCSRPT2",17,0)
 D CLEANGBL ;HL*1.6*85
"RTN","HLCSRPT2",18,0)
 ;
"RTN","HLCSRPT2",19,0)
 S (STOP,NOREC)=""
"RTN","HLCSRPT2",20,0)
 D SCREEN^HLCSRPT
"RTN","HLCSRPT2",21,0)
 S HLCSNREC=BLDON_" ===>>>  NO MATCHING RECORDS  <<<=== "_BLDOFF
"RTN","HLCSRPT2",22,0)
 S HLCSTITL="#773-IEN      Message-ID       Procd     Log-Link   Msg:Evn IO Sndg-Apl Rcvr-Apl" ;HL*1.6*85
"RTN","HLCSRPT2",23,0)
 S HLCSPTR=1,HLCSRNO=1
"RTN","HLCSRPT2",24,0)
 S VERS22=""
"RTN","HLCSRPT2",25,0)
 I 22'>+$$VERSION^XPDUTL("DI")!($$PATCH^XPDUTL("DI*21.0*32")) S VERS22="YES" ;HL*1.6*85
"RTN","HLCSRPT2",26,0)
 I VERS22'="YES" D
"RTN","HLCSRPT2",27,0)
 . S ^TMP("DDBPF1Z",$J)="D SHOWMSG^HLCSRPT2 Q"
"RTN","HLCSRPT2",28,0)
 . S HLCSTITL=HLCSTITL_" ERR"
"RTN","HLCSRPT2",29,0)
 E  S HLCSTITL=HLCSTITL_"    "
"RTN","HLCSRPT2",30,0)
 S ^TMP($J,"LIST","MESSAGE")="^TMP($J,""MESSAGE"",HLCSRNO)"
"RTN","HLCSRPT2",31,0)
 S ^TMP($J,"LIST",HLCSTITL_" ERR")="^TMP(""TLOG"",$J)" ;HL*1.6*85
"RTN","HLCSRPT2",32,0)
 ;
"RTN","HLCSRPT2",33,0)
REEN ; Internal Re-entry Point
"RTN","HLCSRPT2",34,0)
 S STOP=""
"RTN","HLCSRPT2",35,0)
 D WHATERR Q:(+$G(STOP))
"RTN","HLCSRPT2",36,0)
 QUIT:'$$SETUP^HLCSRPT4  ;-> HL*1.6*85
"RTN","HLCSRPT2",37,0)
 I TYPEINFO=2 S HLCSTITL="#773-IEN      Message-ID       Procd     Log-Link   Error-type               " ;HL*1.6*85
"RTN","HLCSRPT2",38,0)
 D ERRSRCH
"RTN","HLCSRPT2",39,0)
 I ERRDTE[9999999 S ERRDTE=$$NOW^XLFDT
"RTN","HLCSRPT2",40,0)
 I +$G(STOP) D EXIT Q
"RTN","HLCSRPT2",41,0)
 I +$G(NOREC) W !!,HLCSNREC,!! S DIR(0)="E" D ^DIR K DIR,X,Y D EXIT Q
"RTN","HLCSRPT2",42,0)
 D DISPLAY^HLCSRPT ;HL*1.6*85
"RTN","HLCSRPT2",43,0)
 D CLEANGBL ;HL*1.6*85
"RTN","HLCSRPT2",44,0)
 D EXIT
"RTN","HLCSRPT2",45,0)
 S STOP=1
"RTN","HLCSRPT2",46,0)
 Q
"RTN","HLCSRPT2",47,0)
 ;
"RTN","HLCSRPT2",48,0)
CLEANGBL ; New subroutine added by HL*1.6*85 to clean up globals
"RTN","HLCSRPT2",49,0)
 N GBL
"RTN","HLCSRPT2",50,0)
 F GBL="LIST","MESSAGE" KILL ^TMP($J,GBL)
"RTN","HLCSRPT2",51,0)
 F GBL="DDBPF1Z","DDBLST","TLOG","TMPLOG" KILL ^TMP(GBL,$J)
"RTN","HLCSRPT2",52,0)
 QUIT
"RTN","HLCSRPT2",53,0)
 ;
"RTN","HLCSRPT2",54,0)
WHATERR ; Ask for one error code; with default of all
"RTN","HLCSRPT2",55,0)
 W @IOF,! S HLCSHDR="Error Type Selection" D HLCSBAR
"RTN","HLCSRPT2",56,0)
 S X="",HLCSER="ALL"
"RTN","HLCSRPT2",57,0)
 S DIR(0)="PAO^771.7:AEO",DIR("A")="Select Error Type:  ALL//"
"RTN","HLCSRPT2",58,0)
 D ^DIR S:($D(DTOUT)!($D(DUOUT))) STOP=1
"RTN","HLCSRPT2",59,0)
 I +$G(STOP) K DIR,X,Y Q
"RTN","HLCSRPT2",60,0)
 I X="" K DIR,X,Y Q
"RTN","HLCSRPT2",61,0)
 I Y=-1 W !,X_" NOT VALID " K DIR,X,Y G WHATERR
"RTN","HLCSRPT2",62,0)
 S HLCSTER1=$P(Y,U,1),HLCSTER2=$P(Y,U,2) K DIR,X,Y
"RTN","HLCSRPT2",63,0)
 S HLCSER=1
"RTN","HLCSRPT2",64,0)
 Q
"RTN","HLCSRPT2",65,0)
 ;
"RTN","HLCSRPT2",66,0)
ERRSRCH ; Find and report the 'errored' messages (Multiple HL*1.6*85 changes start here)
"RTN","HLCSRPT2",67,0)
 ; ERRDTB,ERRDTE,NUMERR -- req
"RTN","HLCSRPT2",68,0)
 N NEXT,CT
"RTN","HLCSRPT2",69,0)
 W !!,"PLEASE WAIT, THIS CAN TAKE AWHILE..."
"RTN","HLCSRPT2",70,0)
 ;
"RTN","HLCSRPT2",71,0)
 ;HL*1.6*85 - LOADERR loads all errors, using the user-supplied 
"RTN","HLCSRPT2",72,0)
 ;            parameters, and places them in ^TMP.  Below, the code
"RTN","HLCSRPT2",73,0)
 ;            now loops thru ^TMP instead of ^HLMA (which happened
"RTN","HLCSRPT2",74,0)
 ;            in LOADERR.)
"RTN","HLCSRPT2",75,0)
 D LOADERR^HLCSRPT4
"RTN","HLCSRPT2",76,0)
 ;
"RTN","HLCSRPT2",77,0)
 ; Looping starts here...
"RTN","HLCSRPT2",78,0)
 S HLCSI=0,HLCSST=0,HLCSLN=0
"RTN","HLCSRPT2",79,0)
 F  S HLCSI=$O(^TMP("ERRLST",$J,HLCSI)) Q:HLCSI'>0  D
"RTN","HLCSRPT2",80,0)
 .  S HLCSN=HLCSI,HLCSJ=0
"RTN","HLCSRPT2",81,0)
 .  F  S HLCSJ=$O(^TMP("ERRLST",$J,HLCSI,HLCSJ)) Q:HLCSJ'>0  D
"RTN","HLCSRPT2",82,0)
 .. ;HL*1.6*85 changes end here, until noted otherwise below.
"RTN","HLCSRPT2",83,0)
 ..
"RTN","HLCSRPT2",84,0)
 .. I '$D(^HLMA(HLCSJ,0)) Q
"RTN","HLCSRPT2",85,0)
 .. S HLCSX=^HLMA(HLCSJ,0),HLCSDTE=$P(HLCSX,U,1)
"RTN","HLCSRPT2",86,0)
 .. I $D(^HLMA(HLCSJ,"S")) S HLCSDTP=$P(^HLMA(HLCSJ,"S"),U,1)
"RTN","HLCSRPT2",87,0)
 .. E  S HLCSDTP=""
"RTN","HLCSRPT2",88,0)
 .. I $D(^HLMA(HLCSJ,"P")) S HLCSY=^HLMA(HLCSJ,"P")
"RTN","HLCSRPT2",89,0)
 .. E  S HLCSY=""
"RTN","HLCSRPT2",90,0)
 .. I HLCSER=1,(HLCSTER1'=$P(HLCSY,U,4)) Q
"RTN","HLCSRPT2",91,0)
 .. S HLCSER1=$P(HLCSY,U,4),HLCSER2=HLCSER1
"RTN","HLCSRPT2",92,0)
 .. I HLCSER1'="",($D(^HL(771.7,HLCSER1,0))) S HLCSER1=$P(^HL(771.7,HLCSER1,0),U,1)
"RTN","HLCSRPT2",93,0)
 .. S HLCSERMS=$P(HLCSY,U,3)
"RTN","HLCSRPT2",94,0)
 .. S HLCSLINK=$P(HLCSX,U,7) S HLCSLNK="          "
"RTN","HLCSRPT2",95,0)
 .. I HLCSLINK'="",($D(^HLCS(870,HLCSLINK,0))) S HLCSLNK=$P(^HLCS(870,HLCSLINK,0),U,1)
"RTN","HLCSRPT2",96,0)
 .. S HLCSEVN1=$P(HLCSX,U,13) I HLCSEVN1'="",($D(^HL(771.2,HLCSEVN1,0))) S HLCSEVN1=$P(^HL(771.2,HLCSEVN1,0),U,1)
"RTN","HLCSRPT2",97,0)
 .. S HLCSEVN2=$P(HLCSX,U,14) I HLCSEVN2'="",($D(^HL(779.001,HLCSEVN2,0))) S HLCSEVN2=$P(^HL(779.001,HLCSEVN2,0),U,1)
"RTN","HLCSRPT2",98,0)
 .. I HLCSEVN1="" S HLCSEVN1=$$MSGEVN^HLCSRPT5(HLCSJ,2) ;HL*1.6*85
"RTN","HLCSRPT2",99,0)
 .. I HLCSEVN2="" S HLCSEVN2=$$MSGEVN^HLCSRPT5(HLCSJ,2) ;HL*1.6*85
"RTN","HLCSRPT2",100,0)
 .. I $L(HLCSEVN1)<3 S HLCSEVN1=HLCSEVN1_"   ",HLCSEVN1=$E(HLCSEVN1,1,3)
"RTN","HLCSRPT2",101,0)
 .. I $L(HLCSEVN2)<3 S HLCSEVN2=HLCSEVN2_"   ",HLCSEVN2=$E(HLCSEVN2,1,3)
"RTN","HLCSRPT2",102,0)
 .. S HLCSEVN=HLCSEVN1_":"_HLCSEVN2
"RTN","HLCSRPT2",103,0)
 .. D ERRRPT^HLCSRPT5 ;HL*1.6*85 - Code overrun moved
"RTN","HLCSRPT2",104,0)
 .. Q
"RTN","HLCSRPT2",105,0)
 .Q
"RTN","HLCSRPT2",106,0)
 KILL ^TMP("ERRLST",$J) ;HL*1.6*85
"RTN","HLCSRPT2",107,0)
 D TMPLOG^HLCSRPT4 ;HL*1.6*85 Reset ^TMP("TMPLOG",$J) to ^TMP("TLOG",$J)
"RTN","HLCSRPT2",108,0)
 I '$D(^TMP("TLOG",$J,1)) S NOREC=1 Q
"RTN","HLCSRPT2",109,0)
 ;HL*1.6*85 - HLCSTITL already set above ;S HLCSTITL="IEN Record #   MESSAGE ID #         Log Link   Msg:Evn IO Sndg Apl Rcvr Apl"
"RTN","HLCSRPT2",110,0)
 I '$D(VERS22) S HLCSTITL=HLCSTITL_" ERR"
"RTN","HLCSRPT2",111,0)
 E  S HLCSTITL=HLCSTITL_"    "
"RTN","HLCSRPT2",112,0)
 D TEST
"RTN","HLCSRPT2",113,0)
 Q
"RTN","HLCSRPT2",114,0)
 ;
"RTN","HLCSRPT2",115,0)
SHOWMSG ; Enable switching to specific message (used by PF1Z).
"RTN","HLCSRPT2",116,0)
 ; If FM version 22 installed, uses VERS22 code, instead.
"RTN","HLCSRPT2",117,0)
 W @IOF
"RTN","HLCSRPT2",118,0)
 S DIR(0)="F:AE",DIR("A")="Enter Record Number: "
"RTN","HLCSRPT2",119,0)
 D ^DIR Q:$D(DIRUT)
"RTN","HLCSRPT2",120,0)
 I Y=-1!(X="") Q
"RTN","HLCSRPT2",121,0)
 S HLCSRNO=X I '$D(^HLMA(HLCSRNO,0)) D  Q
"RTN","HLCSRPT2",122,0)
 . W !!,BLDON,"  ==>  NO SUCH RECORD NUMBER <== ",BLDOFF H 3
"RTN","HLCSRPT2",123,0)
 S HLCSPTR=$P(^HLMA(HLCSRNO,0),"^",1)
"RTN","HLCSRPT2",124,0)
 S XXY=HLCSRNO,XXZ=HLCSPTR D VERS22(XXY,XXZ)
"RTN","HLCSRPT2",125,0)
 D SWITCH
"RTN","HLCSRPT2",126,0)
 Q
"RTN","HLCSRPT2",127,0)
SWITCH ; Non-standard Fileman Browser calls covered by IA# 2540.
"RTN","HLCSRPT2",128,0)
 N DDBLN,DDBZ,DIC,DIR,X,Y,DIRUT,DIROUT,DUOUT,DILN
"RTN","HLCSRPT2",129,0)
 S DILN=DDBRSA(DDBRSA,"DDBSRL")-2
"RTN","HLCSRPT2",130,0)
 S:$G(DDBLST)="" DDBLST="^TMP(""DDBLST"",$J)" S DDBLN=$S($D(@DDBLST@("A",DDBSA)):^(DDBSA),1:$O(@DDBLST@(" "),-1)+1)
"RTN","HLCSRPT2",131,0)
 I $D(@DDBLST) D
"RTN","HLCSRPT2",132,0)
 .I $O(@DDBLST@(" "),-1)=1,$G(@DDBLST@(1,"DDBSA"))=DDBSA Q
"RTN","HLCSRPT2",133,0)
 .S DDBZ=$G(@DDBLST@("A",DDBSA),0)
"RTN","HLCSRPT2",134,0)
 .S Y=2
"RTN","HLCSRPT2",135,0)
 .D SAVEDDB^DDBR2(DDBLST,DDBLN),USAVEDDB^DDBR2(DDBLST,+Y)
"RTN","HLCSRPT2",136,0)
 .S DIROUT=1
"RTN","HLCSRPT2",137,0)
 N DDBLNA
"RTN","HLCSRPT2",138,0)
 I $G(DDBLNA,-1)=-1 G PS
"RTN","HLCSRPT2",139,0)
 I $G(DDBLNA(6))=DDBSA G PS  ;if current doc re-selected
"RTN","HLCSRPT2",140,0)
 I $G(DDBLNA(6))]"",$D(@DDBLST@("APSA",DDBSA)) G PS  ;on list
"RTN","HLCSRPT2",141,0)
 D:DDBLNA>0 SAVEDDB^DDBR2(DDBLST,DDBLN),WP^DDBR2(.DDBLNA)
"RTN","HLCSRPT2",142,0)
PS D PSR^DDBR0(1)
"RTN","HLCSRPT2",143,0)
 Q
"RTN","HLCSRPT2",144,0)
 ;
"RTN","HLCSRPT2",145,0)
VERS22(XXY,XXZ) ; this is modified code from SHOWMSG^HLCSRPT1.
"RTN","HLCSRPT2",146,0)
 ; Each node, ^tmp($j,"message",record_ien), invokes this code
"RTN","HLCSRPT2",147,0)
 ; to compile a 'virtual w-p document' when a message is browsed.
"RTN","HLCSRPT2",148,0)
 I $D(^HLMA(XXY,"MSH",0)) D
"RTN","HLCSRPT2",149,0)
 .S ^TMP($J,"MESSAGE",XXY,0)=^HLMA(XXY,"MSH",0)
"RTN","HLCSRPT2",150,0)
 .S YY1=$P(^HLMA(XXY,"MSH",0),U,3),YY2=$P(^HLMA(XXY,"MSH",0),U,4)
"RTN","HLCSRPT2",151,0)
 E  S ^TMP($J,"MESSAGE",XXY,0)="^^1^1" S (YY1,YY2)=1
"RTN","HLCSRPT2",152,0)
 S XLINE=^HLMA(XXY,0)
"RTN","HLCSRPT2",153,0)
 S LINE="Record #: "_XXY_"                    ",LINE=$E(LINE,1,30)
"RTN","HLCSRPT2",154,0)
 S LINE=LINE_"Message #: "_$P(XLINE,U,2)
"RTN","HLCSRPT2",155,0)
 S ^TMP($J,"MESSAGE",XXY,1,0)=LINE
"RTN","HLCSRPT2",156,0)
 S DTE=$P(XLINE,U,1) I $P($G(^HL(772,DTE,0)),U,1)'="" S DTE=$P(^HL(772,DTE,0),U,1),DTE=$E(DTE,4,7)_$E(DTE,2,3)_"."_$P(DTE,".",2)_"      "
"RTN","HLCSRPT2",157,0)
 I $D(^HLMA(XXY,"S")),$P(^HLMA(XXY,"S"),U,1)'="" S DTP=$P(^HLMA(XXY,"S"),U,1) S DTP=$E(DTP,4,7)_$E(DTP,2,3)_"."_$P(DTP,".",2)
"RTN","HLCSRPT2",158,0)
 E  S DTP=" "
"RTN","HLCSRPT2",159,0)
 S LINE="D/T Entered: "_DTE,LINE=$E(LINE,1,30)_"D/T Processed: "_DTP
"RTN","HLCSRPT2",160,0)
 S ^TMP($J,"MESSAGE",XXY,2,0)=LINE K DTE,DTP
"RTN","HLCSRPT2",161,0)
 S LINE="Logical Link: " I $P(XLINE,U,7)'="",($G(^HLCS(870,$P(XLINE,U,7),0))) S LINE=LINE_$P(^HLCS(870,$P(XLINE,U,7),0),U,1)
"RTN","HLCSRPT2",162,0)
 S LINE=LINE_"                ",LINE=$E(LINE,1,30)
"RTN","HLCSRPT2",163,0)
 S LINE=LINE_"Ack To MSG#: " I $P(XLINE,U,6)'="",$G(^HLMA($P(XLINE,U,6),0)) S LINE=LINE_$P(^HLMA($P(XLINE,U,6),0),U,2)
"RTN","HLCSRPT2",164,0)
 S ^TMP($J,"MESSAGE",XXY,3,0)=LINE
"RTN","HLCSRPT2",165,0)
 S DTS="" I $P($G(^HLMA(XXY,"P")),U,2)'="" S DTS=$P(^HLMA(XXY,"P"),U,2),DTS=$E(DTS,4,7)_$E(DTS,2,3)_"."_$P(DTS,".",2)
"RTN","HLCSRPT2",166,0)
 S LINE="D/T STATUS: "_DTS_"                 ",LINE=$E(LINE,1,30),LINE=LINE_"STATUS: "
"RTN","HLCSRPT2",167,0)
 I $P(^HLMA(XXY,"P"),U,2)'="",($G(^HL(771.6,+$P(^HLMA(XXY,"P"),U,1),0))) S LINE=LINE_$P(^HL(771.6,+$P(^HLMA(XXY,"P"),U,1),0),U,1)
"RTN","HLCSRPT2",168,0)
 S ^TMP($J,"MESSAGE",XXY,4,0)=LINE K DTS
"RTN","HLCSRPT2",169,0)
 S LINE="ERR MSG: " I $P(^HLMA(XXY,"P"),U,3)'="" S LINE=LINE_$E($P(^HLMA(XXY,"P"),U,3),1,20)
"RTN","HLCSRPT2",170,0)
 S LINE=LINE_"                      ",LINE=$E(LINE,1,30)_"ERR TYPE: "
"RTN","HLCSRPT2",171,0)
 I $P(^HLMA(XXY,"P"),U,4)'="",($D(^HL(771.7,+$P(^HLMA(XXY,"P"),U,4),0))) S LINE=LINE_$P(^HL(771.7,+$P(^HLMA(XXY,"P"),U,4),0),U,1)
"RTN","HLCSRPT2",172,0)
 S ^TMP($J,"MESSAGE",XXY,5,0)=LINE
"RTN","HLCSRPT2",173,0)
 S LINE="Sending Appl: " I $P(XLINE,U,11)'="",($D(^HL(771,$P(XLINE,U,11),0))) S LINE=LINE_$P(^HL(771,$P(XLINE,U,11),0),U,1)
"RTN","HLCSRPT2",174,0)
 S ^TMP($J,"MESSAGE",XXY,6,0)=LINE
"RTN","HLCSRPT2",175,0)
 S LINE="Receiving Appl: " I $P(XLINE,U,12)'="",($D(^HL(771,$P(XLINE,U,12),0))) S LINE=LINE_$P(^HL(771,$P(XLINE,U,12),0),U,1)
"RTN","HLCSRPT2",176,0)
 S ^TMP($J,"MESSAGE",XXY,7,0)=LINE
"RTN","HLCSRPT2",177,0)
 S LINE="Message Type: " I $P(XLINE,U,13)'="",($D(^HL(771.2,$P(XLINE,U,13),0))) S LINE=LINE_$P(^HL(771.2,$P(XLINE,U,13),0),U,1)
"RTN","HLCSRPT2",178,0)
 S LINE=LINE_"                    ",LINE=$E(LINE,1,30)_"Event Type: "
"RTN","HLCSRPT2",179,0)
 I $P(XLINE,U,14)'="",($D(^HL(779.001,$P(XLINE,U,14),0))) S LINE=LINE_$P(^HL(779.001,$P(XLINE,U,14),0),U,1)
"RTN","HLCSRPT2",180,0)
 S ^TMP($J,"MESSAGE",XXY,8,0)=LINE K LINE,XLINE
"RTN","HLCSRPT2",181,0)
 S ^TMP($J,"MESSAGE",XXY,9,0)="MESSAGE HEADER: "
"RTN","HLCSRPT2",182,0)
 S LN2=10
"RTN","HLCSRPT2",183,0)
 I $D(^HLMA(XXY,"MSH",0)) D
"RTN","HLCSRPT2",184,0)
 .S LN1=.5
"RTN","HLCSRPT2",185,0)
 .F  S LN1=$O(^HLMA(XXY,"MSH",LN1)) Q:LN1=""  D
"RTN","HLCSRPT2",186,0)
 .. S ^TMP($J,"MESSAGE",XXY,LN2,0)=^HLMA(XXY,"MSH",LN1,0)
"RTN","HLCSRPT2",187,0)
 .. ;HL*1.6*107 start: to fix the multiple lines per segment
"RTN","HLCSRPT2",188,0)
 .. ;S LN2=LN2+1,LN1=LN1+1
"RTN","HLCSRPT2",189,0)
 .. S LN2=LN2+1
"RTN","HLCSRPT2",190,0)
 .. ;HL*1.6*107 end
"RTN","HLCSRPT2",191,0)
 E  S ^TMP($J,"MESSAGE",XXY,LN2,0)=" No Header in MSG Admin File (#773)" S LN2=LN2+1
"RTN","HLCSRPT2",192,0)
 S LN1=.5
"RTN","HLCSRPT2",193,0)
 S ^TMP($J,"MESSAGE",XXY,LN2,0)="MESSAGE TEXT: ",LN2=LN2+1
"RTN","HLCSRPT2",194,0)
 I $D(^HL(772,XXZ,"IN",0)) D
"RTN","HLCSRPT2",195,0)
 .F  S LN1=$O(^HL(772,XXZ,"IN",LN1)) Q:(LN1="")  D
"RTN","HLCSRPT2",196,0)
 .. S ^TMP($J,"MESSAGE",XXY,LN2,0)=^HL(772,XXZ,"IN",LN1,0)
"RTN","HLCSRPT2",197,0)
 .. ;HL*1.6*107 start: to fix the multiple lines per segment
"RTN","HLCSRPT2",198,0)
 .. ;S LN2=LN2+1,LN1=LN1+1
"RTN","HLCSRPT2",199,0)
 .. S LN2=LN2+1
"RTN","HLCSRPT2",200,0)
 .. ;HL*1.6*107 end
"RTN","HLCSRPT2",201,0)
 ..Q
"RTN","HLCSRPT2",202,0)
 E  S ^TMP($J,"MESSAGE",XXY,LN2,0)=" No Message in MSG Text File (#772)" S LN2=LN2+1
"RTN","HLCSRPT2",203,0)
 S (YY1,YY2)=LN2-1
"RTN","HLCSRPT2",204,0)
 S Y1Y2=YY1_"^"_YY2
"RTN","HLCSRPT2",205,0)
 S $P(^TMP($J,"MESSAGE",XXY,0),U,3,4)=Y1Y2
"RTN","HLCSRPT2",206,0)
 K LN1,LN2,Y1Y2,YY1,YY2
"RTN","HLCSRPT2",207,0)
 Q
"RTN","HLCSRPT2",208,0)
 ;
"RTN","HLCSRPT2",209,0)
EXIT ;
"RTN","HLCSRPT2",210,0)
 K I,J
"RTN","HLCSRPT2",211,0)
 K HLCSER,HLCSER1,HLCSER2,HLCSI,HLCSJ,HLCSLN,HLCSN
"RTN","HLCSRPT2",212,0)
 K HLCSST,HLCSTER1,HLCSTER2,HLCSERMS,HLCSX,HLCSY
"RTN","HLCSRPT2",213,0)
 K ^TMP($J,"LIST",HLCSTITL_" ERR") ;HL*1.6*85
"RTN","HLCSRPT2",214,0)
 I VERS22'="YES" S ^TMP("DDBPF1Z",$J)="D SHOWMSG^HLCSRPT Q"
"RTN","HLCSRPT2",215,0)
 Q
"RTN","HLCSRPT2",216,0)
 ;
"RTN","HLCSRPT2",217,0)
HLCSBAR ; Center Title on Top Line of Screen
"RTN","HLCSRPT2",218,0)
 W RVON,?(80-$L(HLCSHDR)\2),HLCSHDR,$E(SPACE,$X,77),RVOFF,!
"RTN","HLCSRPT2",219,0)
 Q
"RTN","HLCSRPT2",220,0)
 ;
"RTN","HLCSRPT2",221,0)
TEST ;
"RTN","HLCSRPT2",222,0)
 S HLCSJ=$O(^TMP("TLOG",$J,0))
"RTN","HLCSRPT2",223,0)
 S HLCSJ=+$P(HLCSJ," ",1)
"RTN","HLCSRPT2",224,0)
 S ^TMP($J,"MESSAGE",HLCSJ,0)="^^1^1"
"RTN","HLCSRPT2",225,0)
 S ^TMP($J,"MESSAGE",HLCSJ,1,0)=" HEADER: "
"RTN","HLCSRPT2",226,0)
 S HLCSRNO=HLCSJ
"RTN","HLCSRPT2",227,0)
 Q
"RTN","HLCSRPT2",228,0)
 ;
"VER")
8.0^22.0
**END**
**END**

$TXT Created by HARDENBROOK,SHAWN P at DEVFEX.ISC-ALBANY.VA.GOV  (KIDS) on WEDNESDAY, 02/20/02 at 15:36
=============================================================================
Run Date: FEB 21, 2002                     Designation: DVBA*2.7*41
Package : DVBA - AUTOMATED MED INFO Priority: EMERGENCY
Version : 2.7        SEQ #41                    Status: Released
=============================================================================


Subject: CAPRI Mods/BVA Enhancements

Category: 
  - Other
  - Routine

Description: 
============

 This patch consists of a KIDS install for VHA, a new GUI client for VBA
 and a new ESSO (single sign-on) client for BVA, VHA MPI-Data Quality Team
 and VBA's Tiger Team.  The ESSO client will not be available via FTP and
 will be distributed directly to the teams that need it.  The non-ESSO
 version of CAPRI will be available for download from  OI Field Office FTP
 sites.  Information is available at the end of this message with the
 instructions.  VBA has their own process for releasing new GUI versions.  
 The GUI will not be placed on the FTP site until VBA has approved release
 to their sites, which will be in approximately 2-3 weeks after the release
 of this patch.
  
 Previous versions of CAPRI will continue to function after this patch is
 installed.  After it has been confirmed that all sites have loaded this
 patch and the new GUI has been deployed, a subsequent patch will be
 released that will de-activate previous CAPRI versions.
  
 Changes to this version of CAPRI are primarily in the Delphi/GUI code.
 However, a new patch was created to add additional existing broker calls
 to the option DVBA CAPRI GUI on the server side.
  
  
 PRE-INIT ROUTINE
 ================
 An entry for BVA/VBA Support office will automatically be added to the
 INSTITUTION (#4) and FACILITY TYPE (#4.1) files.
  
  
 CHANGES TO DVBA_2_7_41.EXE
 ==========================
 1.  Ability to pick an exam type by body system when adding new exam
 request.
 2.  Ability to pick an exam type by body system when editing or adding to
 an existing exam request.
 3.  Re-designed custom report builder as a floating tool.  Documents can
 be added/deleted or resequenced in any order.
 4.  Ability to search by date, number of documents, or all documents.  
 Date range applies to notes, discharge summaries, and consults.
 5.  CAPRI is more compatible with Windows and will release processor ticks
 so that it won't report as "not responding" in Task Manager when building
 a big report.
 6.  Animations display at login and while downloading information from
 VistA in a fashion reminiscent of Internet Explorer.  Status messages at
 the bottom explain the actions taking place or display errors to assist
 with troubleshooting.
 7.  Ability to do a search for a division for all progress notes displayed
 on the screen.  Division was also added to the header of progress notes
 when they are displayed.
 8. Remote Data Views has been added to Health Summary tab in the 
 non-ESSO version.  A list of sites visited is now found on the reports 
 tab.
 9.  Integration control number has been added to patient selector to help
 troubleshoot and validate identity of patients across sites.
 10.  A label was added to clinical document tab to indicate how many
 document headers/titles are returned in the search list.
 11.  Application events are intercepted to prevent a mouse click or
 keyboard press during a broker call.  This prevents an error when
 multiple broker calls try to run at the same time.
 12.  The ESSO site list is maintained on the VistA home site instead of
 the local system registry for better security and easier maintenance as
 site information changes.  Shortcuts to CAPRI-ESSO on the desktop will
 need to be modified to support this change.  Instead of using
 "hs=homeserver hp=homeport," "h=homeserver p=homeport" should be used.
 13.  Users with a Restricted Patient List on the VistA server can only
 pick or add patients on their list.  This was in the previous version of
 CAPRI but was not yet activated.
 14.  When selecting a health summary, the memobox would previously jump
 to the bottom requiring the user to scroll up to start at the beginning.
 It now does this automatically.
 15.  Intermittent error ("cannot modify field") when adding new patient
 has been fixed.
 16.  The executable was re-named to DVBA_2_7_41.EXE and
 DVBA_2_7_41-ESSO.EXE.
 17.  At close, sliders for the clinical documents tab, health summary
 tab, and reports tab are stored in the capri.cfg file so that they will
 be in the same location the next time the application is loaded.
 18.  Limiting by date range functionality for meds and vitals is present
 in the option list but will display a "not in this version" message.
 This function will be activated in the next release of CAPRI.
 19.  Internal version # was updated.  To make CAPRI less annoying to users
 while sites are upgrading, the informational message, that appears when a
 site has not yet installed the KIDS Build, has been removed.  CAPRI will
 error during some non-critical activities if the site hasn't installed the
 DVBA*2.7*41 KIDS Build, such as trying to run a remote data view health
 summary.
 20.  A utility was placed on the HELP menu to scan all of the user's
 authorized sites and determine if the Broker connection is good or bad.
 Only users with the Filemanager @ sign have access to the option.  It is
 disabled for everyone else.
 21.  If a user's institution cannot be found in the remote site's
 institution file, the warning message will no longer display but they can
 manually enter a site location.  If the match is made, it is automatically
 entered and the user prevented from changing the field.
 22.  A modification was made to the timer controlling demographic info
 lookup of patients on the restricted site list.  Previously, the list
 would scroll slowly because the patient demographic lookup broker calls
 were happening instantaneously.  There is now a delay and the list scrolls
 smoothly with the lookup only happening when the user pauses.
 23.  An audit file has been created on the home server to record every
 patient a user accesses, which site the user is on, the date/time, and
 whether the patient is flagged sensitive.  The audit is active only in
 the ESSO version.
 24. An animation of a spinning disc was placed on the reports tab so that
 there is a visual cue the application is still working while a big report
 is being generated.  Windows would erroneously report
 previous versions as "not
 responding."
 25.  There is a dropdown menu on the health summary tab so the user can
 quickly jump to the various parts of the returned summary.
 26.  If the user kicks off a remote data view query, multiple tabs will
 appear on the health summary tab for each site queried.  They can 
 continue using the application and will be alerted when the reports are 
 all returned.
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;2.7;AMIE;**[patch list]**;Apr 10, 1995
  
                             CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List
 ============      ============          ===========         =========
 XUMF397                    N/A               710307          41
  
 Although this is a one-time XU routine, the second line of the code will
 refer to the DVBA namespace because it is being released as part of a DVBA
 patch.  The routine was developed through a joint agreement between the
 Kernel developers, the AMIE developers and the Database Administrator.
  
  
 DOWNLOAD INSTRUCTIONS
 =====================
 NOTE:  The new GUI will not be released until VBA approves installation 
 for their sites - which will probably be in 2-3 weeks.
  
 A new version of the CAPRI GUI/CLIENT software has been made available to
 local VHA IRM field sites via FTP.  As of March 2002, the CAPRI GUI will
 be available on the OI Field Office ANONYMOUS.SOFTWARE directories as
 filename DVBA_2_7_41.EXE, which refers to patch DVBA*2.7*41. Software may
 be retrieved using FTP from the appropriate OI Field Office
 ANONYMOUS.SOFTWARE directories.
  
                     Albany             152.127.1.5
                     Hines              10.3.29.201
                     Salt Lake City     152.131.2.1 
  
 FILE NAME                  FORMAT         DESCRIPTION
 -------------------        ------         -----------
 DVBA_2_7_41.EXE            BINARY         CAPRI GUI
  
 NOTE:  The ESSO client (DVBA_2_7_41-ESSO.EXE) will not be available via 
 FTP.  It will be a controlled distribution to the appropriate teams.  
  
  
 Installation Instructions:
 ==========================
  
 VistA:
 ------
 This patch can be loaded with users in the system.  Installation
 will take less than 1 minute.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan
     menu to unload the KIDS distribution included with this message
  
 2.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 3.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter DVBA*2.7*41):
  
     a.  Backup a Transport Global - this option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any other changes such as DDs or templates.
     b.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
     c.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
         the transport global.
     d.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
 4.  Use the Install Package(s) option and select the package DVBA*2.7*41.
  
 5.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?',
     respond NO.
 6.  When prompted "Want to DISABLE Scheduled Options, Menu Options
     and Protocols? YES//', respond NO. 
  
 CAPRI GUI:
 ---------- 
 The CAPRI GUI requires that the RPC Broker V1.1 be installed on any PC on
 which the GUI will be executed.  If a PC can already connect successfully
 via CPRS, BCMA, or PCMM, then the RPC Broker has already been installed.
 If you need to install the RPC Broker, please refer to the RPC Broker
 website (http://vista.med.va.gov/broker/download.html) for configuration
 information and to download the installation file if you do not already
 have it.
 There are two ways to install CAPRI:
  
 A.  If you have configured the PC via the serverlist.exe application that
 comes with the RPC Broker installation file, the CAPRI GUI can be copied
 directly to your Windows desktop.  If you need more information on
 serverlist.exe, please refer to the RPC Broker user manual.
  
 B.  If you have only loaded the RPC Broker on the PC but not configured it
 using server list, CAPRI will default to BROKERSERVER, port 9200 when
 executing the application.  If you wish to default to a different server
 and port, use the following instructions:
  
 1.  Copy CAPRI to a folder on the PC, preferably c:\program files\vista.
 2.  Create a shortcut on the desktop to CAPRI by right clicking on a blank
     region of the desktop and selecting NEW | SHORTCUT.|
       a. When asked for location type the location in which CAPRI GUI has
          been placed on the hard drive along with your local server and
          port information as parameters:         
          "C:\ProgramFiles\VISTA\dvba_2_7_35_41.exe"s=vista.yoursitename.med.va.gov p=9200
            (The quotes must be included.)
       b.  Press NEXT.
       c.  When asked for name, type:  CAPRI GUI
       d.  Press FINISH.
 3.  After creating the icon on the PC, assign  DVBA CAPRI GUI as a 
     secondary option for the user who will be using the CAPRI GUI client.
     This will provide access to the GUI context option and allow CAPRI to 
     start-up successfully when the user logs-in from the desktop icon.
     This process is similar to the installation instructions for all other
     RPC Broker-enabled applications, such as CPRS, BCMA, and PCMM.

Routine Information:
====================

Routine Name:
  - XUMF397


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : BENNETT,FLETCHER               Date Entered : NOV 14, 2001
Completed By: THOMAS,GAIL                   Date Completed: FEB 21, 2002
Released By : BURTS,WANDA                   Date Released : FEB 21, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT

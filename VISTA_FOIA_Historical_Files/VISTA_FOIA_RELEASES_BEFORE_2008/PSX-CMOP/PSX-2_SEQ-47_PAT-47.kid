Released PSX*2*47 SEQ #47
Extracted from mail message
**KIDS**:PSX*2.0*47^

**INSTALL NAME**
PSX*2.0*47
"BLD",5109,0)
PSX*2.0*47^CMOP^0^3040505^y
"BLD",5109,1,0)
^^2^2^3040505^
"BLD",5109,1,1,0)
This patch will display the the Date Shipped in PSX RX INQUIRY in an 
"BLD",5109,1,2,0)
external format.
"BLD",5109,4,0)
^9.64PA^^
"BLD",5109,"ABPKG")
n
"BLD",5109,"KRN",0)
^9.67PA^8989.52^19
"BLD",5109,"KRN",.4,0)
.4
"BLD",5109,"KRN",.401,0)
.401
"BLD",5109,"KRN",.402,0)
.402
"BLD",5109,"KRN",.403,0)
.403
"BLD",5109,"KRN",.5,0)
.5
"BLD",5109,"KRN",.84,0)
.84
"BLD",5109,"KRN",3.6,0)
3.6
"BLD",5109,"KRN",3.8,0)
3.8
"BLD",5109,"KRN",9.2,0)
9.2
"BLD",5109,"KRN",9.8,0)
9.8
"BLD",5109,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5109,"KRN",9.8,"NM",1,0)
PSXLKUP^^0^B10815569
"BLD",5109,"KRN",9.8,"NM","B","PSXLKUP",1)

"BLD",5109,"KRN",19,0)
19
"BLD",5109,"KRN",19.1,0)
19.1
"BLD",5109,"KRN",101,0)
101
"BLD",5109,"KRN",409.61,0)
409.61
"BLD",5109,"KRN",771,0)
771
"BLD",5109,"KRN",870,0)
870
"BLD",5109,"KRN",8989.51,0)
8989.51
"BLD",5109,"KRN",8989.52,0)
8989.52
"BLD",5109,"KRN",8994,0)
8994
"BLD",5109,"KRN","B",.4,.4)

"BLD",5109,"KRN","B",.401,.401)

"BLD",5109,"KRN","B",.402,.402)

"BLD",5109,"KRN","B",.403,.403)

"BLD",5109,"KRN","B",.5,.5)

"BLD",5109,"KRN","B",.84,.84)

"BLD",5109,"KRN","B",3.6,3.6)

"BLD",5109,"KRN","B",3.8,3.8)

"BLD",5109,"KRN","B",9.2,9.2)

"BLD",5109,"KRN","B",9.8,9.8)

"BLD",5109,"KRN","B",19,19)

"BLD",5109,"KRN","B",19.1,19.1)

"BLD",5109,"KRN","B",101,101)

"BLD",5109,"KRN","B",409.61,409.61)

"BLD",5109,"KRN","B",771,771)

"BLD",5109,"KRN","B",870,870)

"BLD",5109,"KRN","B",8989.51,8989.51)

"BLD",5109,"KRN","B",8989.52,8989.52)

"BLD",5109,"KRN","B",8994,8994)

"BLD",5109,"QUES",0)
^9.62^^
"BLD",5109,"REQB",0)
^9.611^1^1
"BLD",5109,"REQB",1,0)
PSX*2.0*32^1
"BLD",5109,"REQB","B","PSX*2.0*32",1)

"MBREQ")
0
"PKG",534,-1)
1^1
"PKG",534,0)
CMOP^PSX
"PKG",534,20,0)
^9.402P^^
"PKG",534,22,0)
^9.49I^1^1
"PKG",534,22,1,0)
2.0
"PKG",534,22,1,"PAH",1,0)
47^3040505
"PKG",534,22,1,"PAH",1,1,0)
^^2^2^3040505
"PKG",534,22,1,"PAH",1,1,1,0)
This patch will display the the Date Shipped in PSX RX INQUIRY in an 
"PKG",534,22,1,"PAH",1,1,2,0)
external format.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSXLKUP")
0^1^B10815569
"RTN","PSXLKUP",1,0)
PSXLKUP ;BIR/BAB,HTW-Prescription Inquiry for Host Facility ;MAR 1,2002@16:11:17
"RTN","PSXLKUP",2,0)
 ;;2.0;CMOP;**23,32,47**;11 Apr 97
"RTN","PSXLKUP",3,0)
 ;;Reference to File #200 supported by DBIA #10060
"RTN","PSXLKUP",4,0)
EN ;
"RTN","PSXLKUP",5,0)
 S DIC("A")="Select Facility Batch Reference # :",DIC=552.4,DIC(0)="AEQMZ" D ^DIC K DIC Q:Y<0!($D(DTOUT))  S REF=+Y
"RTN","PSXLKUP",6,0)
 S BAT=+$G(^PSX(552.4,REF,0)) W !!,?2,"TRANSMITTED :" S Y=$P(^PSX(552.1,BAT,0),U,3) X ^DD("DD") W Y
"RTN","PSXLKUP",7,0)
 W ?40,"RECEIVED   : " S Y=$P(^PSX(552.1,BAT,0),U,4) X ^DD("DD") W Y
"RTN","PSXLKUP",8,0)
 W !,?40,"TO VENDOR  : " S Y=$P(^PSX(552.1,BAT,0),U,6) X ^DD("DD") W Y
"RTN","PSXLKUP",9,0)
 S DIC("A")="RX # :",DIC(0)="AEQMZ",DA(1)=REF,DIC="^PSX(552.4,"_DA(1)_",1," D ^DIC K DIC G:Y<0!($D(DTOUT)) EXIT S DA=+Y
"RTN","PSXLKUP",10,0)
 I $P($G(Y(0)),"^",14)=1 W ?25,"CONTROLLED SUBSTANCE"
"RTN","PSXLKUP",11,0)
 S QRY=+$P($G(Y(0)),U,8) I QRY>0  S QRYN=$O(^PSX(553.1,"B",QRY,0)) I QRYN>0 S Y=$P(^PSX(553.1,QRYN,0),U,4) X ^DD("DD")
"RTN","PSXLKUP",12,0)
 I QRY>0 W !?2,"REC'D FROM VENDOR  : ",Y
"RTN","PSXLKUP",13,0)
 W ! S IND=+$P(Y(0),"^",12) W !,?2,$S(IND=0:"ORIGINAL",IND>0:"REFILL #"_IND,1:"") K IND
"RTN","PSXLKUP",14,0)
 W ?18,"DRUG ID : ",$P(Y(0),"^",4),?40,"QTY : ",$P(Y(0),"^",13),?55,"COST : ",$P(Y(0),"^",11)
"RTN","PSXLKUP",15,0)
 S ST=$P(Y(0),U,10) W !!,?2,"RX STATUS : ",$S(ST=1:"RELEASED",ST=2:"RETURNED",ST=3:"PROCESSED",ST=4:"REJECTED",ST=5:"RECEIVED",1:"UNKNOWN") G:ST=5 EXIT
"RTN","PSXLKUP",16,0)
 S Y=$P(Y(0),U,9) X ^DD("DD") S TYP=+^PSX(552.4,DA(1),1,DA,2)
"RTN","PSXLKUP",17,0)
 W ?30,$S($P(Y(0),U,2)=1:"COMPLETED",$P(Y(0),U,2)=2:"CANCELED",1:"UNKNOWN")_" "_Y_"   "_$S(TYP=1:"AUTOMATED",TYP=2:"MANUAL",1:"")
"RTN","PSXLKUP",18,0)
 I $P(Y(0),U,2)=2 W !,?5,"CANCELLATION REASON : ",$P(Y(0),U,3)
"RTN","PSXLKUP",19,0)
 W !!,?2,"NDC : ",$S($P(Y(0),U,5)]"":$P(Y(0),U,5),1:"")
"RTN","PSXLKUP",20,0)
 W ?30,"BY EMPLOYEE : ",$$GET1^DIQ(200,$P(Y(0),U,6),.01)
"RTN","PSXLKUP",21,0)
 I $P(Y(0),U,7)>0 W !!,?2,"PROCESSED DT/TM : " S Y=$P(Y(0),U,7) X ^DD("DD") W Y
"RTN","PSXLKUP",22,0)
 I $P(Y(0),U,7)'>0 W !!
"RTN","PSXLKUP",23,0)
 I $G(QRY)>0 W ?50,"QUERY ID # ",QRY
"RTN","PSXLKUP",24,0)
 S RELTYPE=$P($G(^PSX(552.4,DA(1),1,DA,2)),"^")
"RTN","PSXLKUP",25,0)
 ;I $G(RELTYPE)]"" W !!,"  RELEASE TYPE:  ",$S(RELTYPE=2:"MANUAL",RELTYPE=1:"AUTOMATED",1:"UNKNOWN")
"RTN","PSXLKUP",26,0)
 S RER=$P($G(^PSX(552.4,DA(1),1,DA,2)),"^",2)
"RTN","PSXLKUP",27,0)
 I $G(RER)]"" W !!,"  REMOTE ERROR CONDITION:  "
"RTN","PSXLKUP",28,0)
 I  W $S(RER=1:"Release date already exists.",RER=2:"Rx entry missing.",RER=3:"Fill mismatch.",RER=4:"Transmission number mismatch.",RER=5:"No CMOP event multiple.",RER=6:"Fill does not exist",1:"UNKNOWN")
"RTN","PSXLKUP",29,0)
 S PSX=0 W ! F  S PSX=$O(^PSX(552.4,DA(1),1,DA,1,PSX)) Q:'PSX  D
"RTN","PSXLKUP",30,0)
 . S LOT=$P(^PSX(552.4,DA(1),1,DA,1,PSX,0),U),Y=$P(^(0),U,2) X ^DD("DD") W !,?10,"LOT # : ",LOT,?30,"EXP DATE : ",Y
"RTN","PSXLKUP",31,0)
 W !!,"  CARRIER: "_$P($G(^PSX(552.4,DA(1),1,DA,2)),"^",5),?25,"PACKAGE ID "_$P($G(^PSX(552.4,DA(1),1,DA,2)),"^",6)
"RTN","PSXLKUP",32,0)
 W !!,"  DATE SHIPPED: " S Y=$P($G(^PSX(552.4,DA(1),1,DA,2)),"^",4) X ^DD("DD") W Y
"RTN","PSXLKUP",33,0)
 G EXIT
"RTN","PSXLKUP",34,0)
LOT S LOT=$P(^PSX(552.4,DA(1),1,DA,1,PSX,0),U),Y=$P(^(0),U,2) X ^DD("DD") W !,?10,"LOT # : ",LOT,?30,"EXP DATE : ",Y
"RTN","PSXLKUP",35,0)
 Q
"RTN","PSXLKUP",36,0)
EXIT K DA,DIC,REF,X,Y,TYP,ST,IND,BAT,LOT,PSX,QRY,QRYN,QDT
"RTN","PSXLKUP",37,0)
 K REMOERR,RELTYPE,DUOUT,DTOUT,RER
"RTN","PSXLKUP",38,0)
 W !! G EN
"VER")
8.0^22
**END**
**END**

$TXT Created by MCCORMACK,JOHN at FS.FO-ALBANY.MED.VA.GOV  (KIDS) on Friday, 10/13/06 at 14:40
=============================================================================
Run Date: OCT 31, 2006                     Designation: LR*5.2*346
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #279                    Status: Released
                  Compliance Date: DEC 01, 2006
=============================================================================

Associated patches: (v)LR*5.2*232  <<= must be installed BEFORE `LR*5.2*346'
                    (v)LR*5.2*303  <<= must be installed BEFORE `LR*5.2*346'

Subject: LAB SERVER SUPPORT FOR SNOMED CT DATA STANDARDIZATION

Category: 
  - Routine
  - Enhancement (Mandatory)

Description:
============

  Blood Bank Clearance
  ====================
  
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*346 does not
 contain any changes to the VISTA BLOOD BANK Software as defined by VHA
 DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
  
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*346 does not
 alter or modify any software design safeguards or safety critical elements
 functions.
  
 RISK ANALYSIS: Changes made by patch LR*5.2*346 have no effect on Blood
 Bank software functionality, therefore RISK is none.
  
 VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes
 made, no specific validation requirements exist as a result of installation
 of this patch.
 ----------------------------------------------------------------------------
  
 As part of the VA/DoD Laboratory Data Sharing Interoperability (LDSI) Phase
 2 project supporting the exchange of microbiology and anatomic pathology
 laboratory test orders and results, enhancements have been made to the
 Laboratory server LRLABSERVER to extract selected VistA Laboratory files
 for SNOMED CT mapping.
  
 1. The following are new LRLABSERVER server reports made available with
 this patch:
  
 a. SNOMED
    Send a message to: S.LRLABSERVER@domain name
              Subject: SNOMED
  
    The body of the message will be ignored. The following files are 
    scanned and data is extracted and extract data in a format for input
    into Standards and Terminology Service (STS) mapping SNOMED tool:
  
    File #    File Name
    ------    ---------
    61        TOPOGRAPHY FIELD
    61.1      MORPHOLOGY FIELD
    61.2      ETIOLOGY FIELD
    61.3      FUNCTION FIELD
    61.4      DISEASE FIELD
    61.5      PROCEDURE FIELD
    61.6      OCCUPATION FIELD
    62        COLLECTION SAMPLE
  
    Results are returned to the person
    sending the mail message request. The extracted data is returned as an
    attached file in a delimited format using the "|" character as
    the field delimiter.
  
    Record legend for attached file:
     Station #-File #-IEN|Entry Name|SNOMED I|VUID|SNOMED CT|
     SNOMED CT TERM|Mapping Exception|Related Specimen|Related Specimen ID|
     Extract Ver|
  
     Note: the fields RELATED SPECIMEN & RELATED SPECIMEN ID in the
           record are only valued when the record relates to an entry
           in COLLECTION SAMPLE file (#62) and indicates the related
           specimen in TOPOGRAPHY FIELD file (#61).
  
  
 b. NLT/CPT
    Send a message to: S.LRLABSERVER@domain name
              Subject: NLT/CPT
  
    The body of the message will be ignored. The database is scanned
    for mapped NLT, LOINC and CPT data. Results are returned to the person
    sending the mail message request. The extracted data is returned as an
    attached file in a delimited format using the "|" character as the field
    delimiter.
  
    Record legend for attached file:
    Station #-NLT IEN-CPT IEN-Spec-Time Aspect|NLT Code|NLT Name|CPT Code|CPT
    Name|Specimen|Time Aspect|LOINC Code|LOINC Short Name|
   
  
 2. The existing LRLABSERVER report RELMA has been modified to extract
 additional information requested by VA Data Standardization service.
    a. The extract will now include an extract version number. This patch
       will set the version number to 1.1.
    b. Include site's Laboratory Test site notes.
    c. Include laboratory test's synonyms
    d. Include laboratory test's type
    e. Include laboratory test's default LOINC code.
    f. Include mappings to suffixed NLT codes when laboratory code is mapped
       to a generic NLT code and suffixed codes also exist.
  
 The modified record layout of the extract is:
  
  Legend:
 |           1                   |    2    |  3 |     4     |  5  |   6
 |Station #-60 ien-Spec ien-Index|Test Name|Spec|Time Aspect|Units|LOINC
  
 |  7  |    8       |     9             |     10    |   11    |   12
 |NLT #|Battery Code|Battery Description|Lab Section|Subscript|Comment
  
 |    13   |    14       |     15       |      16       |       17
 |Data Type|Reference low|Reference high|Therapeutic low|Therapeutic high
  
 |     18    |    19      |       20    |    21   |      22     |  23     |
 |Use Ref Lab|Site Comment|Test Synonyms|Test Type|Default LOINC|Extract Ver|
  
  
 3. Due to migration within Veterans Health Administration from Microsoft
 Exchange 2000 to Exchange 2003 the Microsoft Exchange system dropped support
 for 4 character Unix file permission which are part of the header used to
 uuencode the file attachment. The extract changes the uuencode file header
 from "begin 0664 "_filename to "begin 664 "_filename to enable successful
 processing of the uuencoded file by Exchange.
  
  
  ASSOCIATED E3R
  --------------
  None
  
  ASSOCIATED REMEDY
  ---------------
  None
  
  
  TEST SITES
  ----------
  Biloxi VAMC
  Boston HCS VAMC
  El Paso VAMC
  Milwaukee VAMC
  San Antonio VAMC
  Upstate New York HCS
  
  
 ROUTINE SUMMARY
 ===============
   The following routines are included in this patch.  The second line
   of each of these routines now looks like:
   <tab> ;;5.2;LAB SERVICE;<patchlist>;Sep 27, 1994
  
                     Checksum       Checksum
    Routine Name     Before Patch   After Patch    Patch List
    ------------     ------------   -----------    ------------
    LR346            N/A            4832883        **346** (Deleted by KIDS)
    LRSRVR           5915085        5140630        **232,303,346**
    LRSRVR2          12542186       9040430        **303,346**
    LRSRVR2A         N/A            6229869        **346**
    LRSRVR3          13571036       13681273       **303,346**
    LRSRVR6          N/A            8991310        **346**
    LRSRVR7          N/A            7316475        **346**
  
  List of preceding patches: 303
  Sites should use CHECK^XTSUMBLD to verify checksums.
  
  
 INSTALLATION INSTRUCTIONS
 -------------------------
   The install time for this patch is less than 5 minute. This patch
   can be installed when Laboratory users are on the system.
   Suggested time to install: non-peak requirement hours.
  
  
 NOTE: Kernel patches must be current on the target system to avoid
       problems loading and/or installing this patch.
  
       Patch installation needs to be coordinated with the Laboratory
       Information Manager (LIM/ADPAC).
  
  
   1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
         option will load the KIDS package onto your system.
  
   2.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
       select the 'Installation' menu.
  
   3.  From this menu, you may then elect to use the following options
       (when prompted for the INSTALL NAME, enter LR*5.2*346):
         a. Print Transport Global
         b. Backup a Transport Global
         c. Compare Transport Global to Current System
         d. Verify Checksums in Transport Global
  
       Use the 'Verify Checksum in Transport Global' option and verify that
       all routines have the correct checksums.
  
    4.  Use the 'Install Package(s)' option under the 'Installation' menu
       and select the package 'LR*5.2*346'.
  
       When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
       Install? YES//' choose 'NO'. Responding 'Yes' to the prompt for
       rebuilding menu trees can significantly increase install time.
  
       When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//
       choose 'NO'.
  
       When prompted 'Want to DISABLE Scheduled Options, Menu Options,
       and Protocols? YES//', choose 'NO'.
  
       During install KIDS will place the LR LAB SERVER option [LRLABSERVER]
       out of order.
  
  Note: Routine LR346 will be deleted after successful patch installation.
  
  
 INSTALLATION EXAMPLE
 ====================
  
 Select Kernel Installation & Distribution System Option: Installation
  
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME: LR*5.2*346 Loaded from Distribution  9/16/05@15:38:31
      => LR*5.2*346
  
 This Distribution was loaded on Sep 16, 2005@15:38:31 with header of
    LR*5.2*346
    It consisted of the following Install(s):
      LR*5.2*346
 Checking Install for Package LR*5.2*346
 Will first run the Environment Check Routine, LR346
  
  
                Sending install started alert to mail group G.LMI
  
                         --- Environment Check is Ok ---
  
 Install Questions for LR*5.2*346
  
  
 Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// NO
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//  TELNET VIRTUAL
  
  
  
  Install Started for LR*5.2*346 :
                Sep 16, 2005@17:07:36
  
 Build Distribution Date: Sep 16, 2005
  
  Installing Routines:
                Sep 16, 2005@17:07:36
  
  Running Pre-Install Routine: PRE^LR346
  
                           *** Pre install started ***
  
                            *** No action required ***
  
                          *** Pre install completed ***
  
  Installing PACKAGE COMPONENTS:
  
  Installing OPTION
                Sep 16, 2005@17:07:36
  
  
  Running Post-Install Routine: POST^LR346
  
                           *** Post install started ***
  
                            *** No action required ***
  
                          *** Post install completed ***
  
               Sending install completion alert to mail group G.LMI
  
  Updating Routine file...
  
  Updating KIDS files...
  
  LR*5.2*346 Installed.
                Sep 16, 2005@17:07:36
  
  Install Message sent #nnnnnn
  
 Install Completed

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LR346
    Before:       n/a  After:  B9528998  **346**
Routine Name: LRSRVR
    Before: B18875049  After: B17596078  **232,303,346**
Routine Name: LRSRVR2
    Before: B60700026  After: B46042055  **303,346**
Routine Name: LRSRVR2A
    Before:       n/a  After: B11863535  **346**
Routine Name: LRSRVR3
    Before: B40554780  After: B41005024  **303,346**
Routine Name: LRSRVR6
    Before:       n/a  After: B25592719  **346**
Routine Name: LRSRVR7
    Before:       n/a  After: B23564160  **346**

=============================================================================
User Information:
Entered By  : MCCORMACK,JOHN                Date Entered  : SEP 06, 2005
Completed By: ELIJAH,VICKEY                 Date Completed: OCT 31, 2006
Released By : MURCH,CLAUDETTE               Date Released : OCT 31, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

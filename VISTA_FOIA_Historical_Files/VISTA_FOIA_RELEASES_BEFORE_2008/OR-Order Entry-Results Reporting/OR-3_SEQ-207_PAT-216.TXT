$TXT Created by NABER,DAVID A at EXPCUR.FO-SLC.MED.VA.GOV  (KIDS) on Wednesday, 11/17/04 at 13:39
=============================================================================
Run Date: FEB 07, 2005                     Designation: OR*3*216
Package : OR - ORDER ENTRY/RESULTS REPORTING  Priority: Mandatory
Version : 3       SEQ #207                      Status: Released
                  Compliance Date: MAR 10, 2005
=============================================================================

Associated patches: (v)OR*3*195    <<= must be installed BEFORE `OR*3*216'

Subject: Support for removing allergies as orders

Category: 
  - Routine
  - Other

Description:
============

 In GUI v25 (patch OR*3.0*195), allergy entries will no longer be 
 considered orders.  While you'll still be able to enter allergy 
 information from the orders tab, they will not appear in the list of 
 orders as they are no longer "orders".  In addition to the changes
 required on the GUI side, there are some database updates that need to
 occur regarding existing data.
  
 **NOTE** Users must be off the system when this patch and patch GMRA*4*21 
 are installed as the ordering logic is changing.
  
 This patch contains a post-installation routine that will do two
 things.  First, it will find all active allergy orders and mark them
 as complete.  This will remove existing allergy orders from the display of
 orders.  Second, it will update the existing allergy dialog so that it
 uses the new method for entering allergies.  The post-install will also
 produce a report indicating any local dialogs that may have been built
 using the existing allergy dialog.
  
 This patch changes the detailed display for a reactant.  When viewing the
 detailed display for a reactant, the nature of reaction will now
 display.  This change will now display whether the entry has been marked
 as an allergy, an adverse reaction (pharmacologic) or unknown.  The 
 detailed display will now also show the date/time a sign/symptom was 
 entered if it's available.  The date/time will appear in parentheses 
 immediately following the sign/symptom.  When the verified field displays 
 it will now indicate the name of the verifier or <auto verified> if the 
 reaction is verified.
  
 **NOTE: This patch must be installed first, immediately followed by patch
 GMRA*4.0*21.  Once patch GMRA*4.0*21 is installed, CPRS will no longer
 handle allergies as orders.
  
 DOCUMENTATION:
 ==============
 Updated versions of the CPRS User Guide: GUI Version, CPRS Technical
 Manual: GUI Version, and the CPRS Online Help were distributed with
 OR*3*195 (GUI 25).  Please refer to OR*3*195 (GUI 25) Patch Narrative, 
 INSTALLATION FILES: section, for the location and download instructions
 for these documents. These documents contain the information on the GUI
 Order Entry and Allergy/Adverse Reaction changes that are the result of
 installing the following: OR*3*915, OR*3*216, and GMRA*4*21.
  
 NOIS
 ====
 SHR-0603-71103 REMOVE ACTIVE ALLERGY ORDER
  
 Prior to the installation of GUI v25 (OR*3*195) and patches OR*3*216 
 (this patch) and patch GMRA*4*21, allergy orders remained "active" and 
 appeared on the orders tab until the patient was discharged.  Changes 
 made to the allergy, such as marking it as entered in error, from the 
 allergies package did not update the order in CPRS.  As a result, it was 
 possible to have allergies appear as "active" orders on the orders tab 
 but not appear in the allergies box on the cover sheet.  
  
 With the installation of the patches listed above, allergies are no longer
 treated as orders and will not appear on the orders tab.  The allergies
 box on the cover sheet will now contain the latest information regarding a
 patient's allergies.
  
 ORDER DIALOG
 ============
 Order dialog GMRAOR ALLERGY ENTER/EDIT has been modified to support the 
 removal of allergies as orders.  A post-install routine will identify any 
 local order dialogs that are related to this dialog that you may need to 
 update.
  
 PROTOCOL
 ========
 The ORC ADD ALLERGY protocol was changed so that it calls directly into 
 allergy tracking code.  The entry of allergies from the list manager 
 interface will now be exactly as it is in the allergy package.
  
 The OR EVSEND GMRA and the OR GMRA UPDATE protocols have been deleted as 
 they are no longer necessary.
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;3.0;ORDER ENTRY/RESULTS REPORTING;**[patch list]**;Dec 17, 
 1997
  
                            CHECK^XTSUMBLD results
 Routine name         Before Patch          After Patch         Patch List
 ============         ============          ===========         ==========
 ORCXPND2                 19130585             20312693   34,53,75,94,141,216
 ORQQAL                    7072287              8838394      9,85,162,190,216
 ORY216                        N/A              4319434            216
 ORYDLG                    3951129              3951129        141,165,216
  
 Routine ORYDLG is included with this patch, unchanged, to support the 
 checking for local dialogs due to the change to the allergy dialog 
 released in this patch.
  
 In addition, routines ORCDGMRA, ORMBLDAL, and ORMGMRA were deleted as 
 they are no longer needed.
  
 INSTALLATION
 ============
 **NOTE**  This patch must be installed immediately prior to GMRA*4.0*21.
 The installation of these two patches will activate the code in GUI v25 so
 that allergies are no longer handled as orders.
  
 **NOTE**  A post-install routine (ORY216) will be queued to run as part 
 of the installation of this patch.  This routine will report on any 
 locally created order dialogs that may be affected by the changes to the 
 GMRAOR ALLERGY ENTER/EDIT dialog.  In addition, it will find all active 
 allergies and change their status to "complete" so that they fall off the 
 orders tab view.  A mail message will be sent to the installer upon 
 completion.
  
 **NOTE** Users must be off the system when this patch and patch GMRA*4*21 
 are installed as the ordering logic is changing.
  
 This patch should take less than 2 minutes to install.  The process to 
 mark active allergy orders as complete will be done in the background.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2.  Review your mapped set.  If any of the routines listed in the
     ROUTINE SUMMARY section are mapped, they should be removed
     from the mapped set at this time.
  
 3.  From the Kernel Installation and Distribution System Menu, select the
     Installation menu.
  
 4.  From this menu, you may elect to use the following options (when 
     prompted for INSTALL NAME, enter OR*3.0*216):
       a.  Backup a Transport Global
       b.  Compare Transport Global to Current System
       c.  Verify Checksums in Transport Global
  
 5.  Use the Install Package(s) options and select the package OR*3.0*216.
  
 6.  When prompted 'Want KIDS to INHIBIT LOGONS during install? YES//',
     respond "YES".
  
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options and 
     Protocols? YES//', respond NO.
  
 8.  If routines were unmapped as part of step 2, they should be returned
     to the mapped set once the installation has run to completion.
  
 9.  Upon successful completion of the post-install, routine ORY216 may be 
     removed.

Routine Information:
====================

Routine Name:
  - ORY216


Routine Checksum:

Routine Name:
  - ORQQAL


Routine Checksum:

Routine Name:
  - ORCXPND2


Routine Checksum:

Routine Name:
  - ORYDLG


Routine Checksum:

=============================================================================
User Information:
Entered By  : NABER,DAVID A                 Date Entered  : MAR 15, 2004
Completed By: HULET,LEE ANN                 Date Completed: JAN 31, 2005
Released By : PIERSON,YVONNE E              Date Released : FEB 07, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by FRANCE,VENESSA at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 10/04/05 at 14:58
=============================================================================
Run Date: FEB 07, 2006                     Designation: PPP*1*39
Package : PPP - PHARMACY PRESCRIPTION PRACTIC Priority: Mandatory
Version : 1        SEQ #35                      Status: Released
                  Compliance Date: MAR 10, 2006
=============================================================================

Associated patches: (v)PPP*1*21    <<= must be installed BEFORE `PPP*1*39'
                    (v)PPP*1*26    <<= must be installed BEFORE `PPP*1*39'
                    (v)PPP*1*32    <<= must be installed BEFORE `PPP*1*39'
                    (v)PPP*1*35    <<= must be installed BEFORE `PPP*1*39'
                    (v)PPP*1*38    <<= must be installed BEFORE `PPP*1*39'

Subject: INCORRECT INSTITUTION DISPLAYED - NO LONGER DINUMED

Category: 
  - Routine

Description:
============

  This patch corrects the problem of using the incorrect IEN (Internal Entry
  Number) for the institution.
   
  ASSOCIATED NOIS/REMEDY TICKETS:
  ===============================
   
    REMEDY ticket #HD67613 = NOIS PRO-0403-11434
          Active IV orders not on ward or active order list
    REMEDY ticket #HD67784 = NOIS MAC-1103-61168  
          Re-occurring Errors in PSJOE 
    REMEDY ticket #HD67849 = LIT-0104-71318
          UNABLE TO SEND MESSAGES  
    REMEDY ticket #115401
          Questions regarding PPP FFX BUILD MESSAGE 
  
  ASSOCIATED E3R:
  ===============
   
  N/A
   
  PARTICIPATING TEST SITES:
  =========================
   
 BOSTON HCS
 PALO ALTO HCS
 PORTLAND, OR
   
  NOIS/REMEDY OVERVIEW:
  =====================
   
  PRO-0403-11434  Pharmacy Prescription Practices    
    The incorrect IEN is being used to get the Station Number from
    the Domain XRef file (#1020.8) for menu option 
    Edit other Facility Cross-Reference [PPP EDIT FFX].
    Also, on the Daily Batch Report the message No Domain Entry in FFX file 
    for --> (patient) at (institution) is being displayed.
  
  Problem 1:
  ----------
  The incorrect Domain name is being displayed for some patients. The station
  number is being pulled from the Place of Visit in the PPP FOREIGN FACILITY 
  XREF file (#1020.2). It then used the station number as the IEN to get the 
  domain from the PPP DOMAIN XREF file (#1020.8).
   
  Resolution 1:
  ------------- 
  Get the Place of Visit from the PPP FOREIGN FACILITY XREF file (#1020.2).  
  Then get the IEN of the Station from the "B" cross-reference of the 
  PPP DOMAIN XREF file (#1020.8) and get the Domain from this file entry. 
   
  If the Domain is not defined in the PPP DOMAIN XREF (#1020.8), NOT   
  AVAILABLE will be displayed for Domain for menu option Edit other Facility 
  Cross-Reference [PPP EDIT FFX].
  
  Problem 2:
  ----------
  The Daily Batch report is displaying the message
     No Domain Entry in FFX file for --> (patient name) at (institution).
  
  Resolution 2:
  -------------
  This message is an indication that the Domain for the institution 
  identified is missing from the PPP DOMAIN XREF file (#1020.8).  
  This issue will be resolved when the user adds the missing domain to 
  the file.
  
  Problem 3:
  ----------
  When a PDX (Patient Date Exchange) request occurs, and entries are made
  into the PPP Foreign Facility XRef file (#1020.2), the Place of Visit 
  field (#1) is being stored with the incorrect pointer to the PPP Domain 
  XRef file (#1020.8).   
 
  Resolution 3:
  -------------
  Routine PPPPDX3 will be modified to use the Station to get the pointer
  from the Institution file (#4) "D" cross-reference and file this into the
  Place of Visit field (#1) of the PPP Foreign Facility XRef file (#1020.2).
  of Visit field (#1) of the PPP Foreign Facility XRef file (#1020.2).
 
  Problem 4:
  ----------
  While testing it was discovered that duplicate entries were being created 
  in the PPP FOREIGN FACILITY XREF file (#1020.2) when menu 
  option Build/Rebuild Other Facility Xref [PPP BUILD FFX] was run.
  
  Resolution 4:
  -------------
  Refer to the POST-INSTALLATION INSTRUCTIONS section. 
 
  Technical:
  ==========
  PRO-0403-11434   Pharmacy Prescription Practices   
   The incorrect IEN is being used to get the Station Number
   from the Domain XRef file (#1020.8)
  
  Routine PPPFMX was modified at tag DOMAIN to retrieve the Station Number 
  from the PPP Foreign Facility XREF file (#1020.2).  Use the Station    
  Number to get the IEN for the Station from the PPP Domain XREF file "B" 
  index and get the domain from this file entry.
  
  Routine PPPGET1 was modified at tag GETFFX to call function
  $$DOMAIN^PPPFMX to get the domain.  This was also modified at 
  tag GETSTANM to get the correct IEN from the PPP Domain 
  XRef file (# 1020.8).
  
  Routine PPPMPI was modified to store the IEN of the Institution file (#4) 
  into Place of Visit of the Foreign Facility XRef file (#1020.2).
  
  Routine PPPBLD1 was modified to store the IEN of the Institution file (#4)
  into Place of Visit of the Foreign Facility XRef file (#1020.2).
  
  DATA DICTIONARY CHANGES:
  ========================
   
  N/A
  
  TEMPLATES:
  ==========
  
  N/A  
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
 
      <tab>;;1.0;PHARMACY PRESCRIPTION PRACTICE;**[patch list]**;APR 7,1995
 
 Integrity Checking tools:  CHECK1^XTSUMBLD results
  
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  PPPBLD1                8260541              8995172            38,39
  PPPFMX                 8940469              9551060            26,39
  PPPGET1               26895933             28099147         8,17,21,39
  PPPMPI                23591503             24128712            35,39
  PPPPDX3                3434933              3603781        1,2,21,32,39
    
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  PPPBLD1                3646441              3740805            38,39
  PPPFMX                 2734775              2797399            26,39
  PPPGET1                4502236              4608927         8,17,21,39
  PPPMPI                12694398             12736699            35,39
  PPPPDX3                1246485              1277185        1,2,21,32,39
  
  Total number of routines - 5
  
  DISTRIBUTION:
  =============
  This patch is exported using KIDS.
  
  INSTALLATION INSTRUCTIONS:
  ==========================
 
 This patch may be installed during business hours, but because several
 options will be out of service during the installation process
 it is suggested that it be queued for non-peak hours.
 
 Installation time will be less than 5 minutes.
  
  
  1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
     the KIDS distribution included with this message.
       
  2. Start up the Kernel Installation and Distribution System Menu
     [XPD MAIN]:
   
                 Edits and Distribution ...
                 Utilities ...
                 Installation ...
   
     Select Kernel Installation & Distribution System Option: Installation 
   
            1      Load a Distribution
            2      Verify Checksums in Transport Global
            3      Print Transport Global
            4      Compare Transport Global to Current System
            5      Backup a Transport Global
            6      Install Package(s)
                   Restart Install of Package(s)
                   Unload a Distribution
   
  3. From this menu, you may elect to use the following options:
     (when prompted for INSTALL NAME, enter PPP*1.0*39)
      
     a.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are
         in the transport global.
     b.  Print Transport Global - this option will allow you to view
         the components of the KIDS build.
     c.  Compare Transport Global to Current System  - this option
         will allow you to view all changes that will be made when
         the patch is installed.  It compares all components of the
         patch (routines, DD's, templates, etc.).
     d.  Backup a Transport Global - this option will create a backup
         message of any routines exported with the patch.  It will
         not backup any other changes such as DD's or templates.
      
  4. Use the Install Package(s) option and select the package
     PPP*1.0*39
      
     a. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
        YES//', respond NO
     b. When prompted 'Want to DISABLE Scheduled Options, Menu Options,   
        and Protocols? YES//', respond YES.  When prompted to
        select the options you would like to place out of order,
        enter the following:
   
           PPP EDIT FFX        Edit other Facility Cross-Reference
           PPP BATCH       Prescription Practices Daily Batch Routine
           PPP BUILD FFX       Build/Rebuild Other Facility Xref
   
 
 ******************** POST-INSTALLATION INSTRUCTIONS ********************
 
  Refer to Problem 4: of the patch description.
 
  The PPP FOREIGN FACILITY XREF file (#1020.2) must be deleted using the
  kill command at the programmer's prompt: K ^PPP(1020.2).  The zero node
  then must be defined using the set command: 
  S ^PPP(1020.2,0)="PPP FOREIGN FACILITY XREF^1020.2PI^0^0"
  Menu option Build/Rebuild Other Facility Xref [PPP BUILD FFX] then must
  be run to rebuild the PPP FOREIGN FACILITY XREF file (#1020.2).
 
 *************************************************************************
 
 

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PPPBLD1
    Before:  B8260541  After:  B8995172  **38,39**
Routine Name: PPPFMX
    Before:  B8940469  After:  B9551060  **26,39**
Routine Name: PPPGET1
    Before: B26895933  After: B28099147  **8,17,21,39**
Routine Name: PPPMPI
    Before: B23591503  After: B24128712  **35,39**
Routine Name: PPPPDX3
    Before:  B3434933  After:  B3603781  **1,2,21,32,39**

=============================================================================
User Information:
Entered By  : FRANCE,VENESSA                Date Entered  : OCT 28, 2003
Completed By: GOLDSMITH,JAMES H             Date Completed: FEB 07, 2006
Released By : HEMBREE,SUSAN                 Date Released : FEB 07, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

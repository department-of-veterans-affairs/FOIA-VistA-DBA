$TXT Created by MEIGHAN,MIKE J at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on TUESDAY, 05/07/02 at 13:43
=============================================================================
Run Date: JUL 30, 2002                     Designation: XU*8*156
Package : XU - KERNEL                          Priority: Mandatory
Version : 8       SEQ #199                       Status: Released
=============================================================================


Subject: Menu Rebuild Rewrite -- Part 1

Category: 
  - Routine

Description: 
============

 $TXT Created by MEIGHAN,MIKE J at NXT.KERNEL.ISC-SF.VA.GOV  (KIDS) on WEDNESDAY, 04/25/01 at 15:04
  
  
                             XU*8*156
                   Menu Rebuild Rewrite -- Part 1
  
 NOTE:  MAKE SURE THAT THE MENU REBUILD IS NOT RUNNING WHILE THIS PATCH IS
        BEING INSTALLED.
  
 NOTE:  BECAUSE THE NEW DATA STRUCTURE IS STORED IN THE OPTION FILE YOU
        CAN EXPECT THIS FILE TO INCREASE IN SIZE EQUAL TO THE SIZE OF 
        YOUR CURRENT ^XUTL("XQO") GLOBAL.  IN SEATTLE THIS WAS 13 TO 20 
        MEGABYTES.  SINCE ^DIC(19) IS JOURNALLED YOU SHOULD EXPECT A
        CORRESPONDING INCREASE IN JOURNAL SPACE AS WELL WHEN THE MENUS
        ARE REBUILT.
  
 NOTE:  THIS PATCH MUST BE INSTALLED BEFORE INSTALLING XU*8*157.
  
 NOTE:  THIS PATCH MAY BE QUEUED, AND IT MAY BE INSTALLED WITH USERS ON
        THE SYSTEM.
  
         This patch is closely linked with patch XU*8*157 (Part 2). This
 patch (Part 1) creates the data structures that the new menu rebuild
 system will use.  Part 2 brings in the routines to use those data
 structures.  If Part 2 is installed first, numerous undefined errors will
 result.  Both of these patches can be run with users on the system and
 both can be queued. It is recommended that they be queued with Part 1
 separated from Part 2 by about 2 hours.
  
         This patch changes the way in which the compiled menus in the
 global ^XUTL are built.  It prevents the jump system from becoming
 unavailable for long periods of time while the global is rebuilt.  Instead
 of deleting ^XUTL and then rebuilding it, the menu trees are first built
 into the ^TMP global and then merged into a new cross reference of the
 Option File [^DIC(19,"AXQ")].  When a user logs onto the system the menu
 system looks at ^XUTL to be sure that the trees needed for that user to
 jump are available in ^XUTL.  If they are not, the trees for that user's
 Primary Menu, Secondary Menus, and the Common Options are merged into
 ^XUTL from ^DIC(19,"AXQ").  This cross-reference, then, holds the master
 copy of the jump trees which are made available in ^XUTL only as they are
 needed. 
  
         A change was also made to the user reactivation software because
 when a user is reactivated there is no guarantee that his or her jump
 trees will be present in the ^DIC(19) cross-reference.  If they are not
 present then the software queues a small TaskMan job to build them so that
 the user can use the up-arrow jump.
  
         A new menu option XQBUILDMAIN is brought in with this patch, and 
 it will be populated with options when you install XU*8*157.  In addition,
 the option XQBUILDTREE is deleted as the method of building menu trees 
 changes radically.  The new XQBUILDTREE will be placed on XQBUILDMAIN when
 you install XU*8*157.
  
         This patch essentially does a menu rebuild using the new form.  Be
 aware that this will take as long as it always does.
  
         This patch addresses the following NOIS's: STX-1299-72245,
 IOW-1099-40071, ATG-0999-32300, ATG-0400-32459,MAR-0400-21520, and
 SFC-0400-62650.
  
         Test sites include Seattle, Atlanta, South Texas VHCS, Little
 Rock, White River,  Connecticut, Boston, Portland, Spokane, Upper NY
 HCS (VISN 2), Pittsburg, and Altoona.
  
  
 ==========================================================================
  
 INSTALLATION: 
  
    1.  Unschedule the menu rebuild option XQBUILDTREEQUE.  This patch may 
        be run while users are on the system.  It may be queued.  It will 
        take about the same time as a menu rebuild.
  
  
    2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.
  
    3.  The patch has now been loaded into a Transport global on your
        system. You now need to use KIDS to install the Transport global.  
  
    4.  On the KIDS menu, under the 'Installation' menu, use the following 
        options: 
           Print Transport Global 
           Compare Transport Global to Current System 
           Verify Checksums in Transport Global 
           Backup a Transport Global
           Install Package XU*8.0*156
                           ==========
              Suggested answers to install questions:
                 "Want KIDS to Rebuild Menu Trees Upon Completion of 
                    Install? YES//" NO
                 "Want KIDS to Inhibit Logins during the Install? YES//" NO
                 "Want to DISABLE Scheduled Options, Menu Options, and
                    Protocols? YES//" NO
  
  
    5.  It is best to run this patch during low usage hours.  It IS a menu
        rebuild, after all.
  
 ==========================================================================
  
        The second line of your routine should look like this:
              ;;8.0;KERNEL;**[Patch List]**;Jul 10, 1995
  
                CHECK SUMS (CHECK^XTSUMBLD) AND PATCH LISTS
  
  
  
 Routine         Before          After           Patch List
  
 XQ88             *NEW*          15341742        **156** 

Routine Information:
====================

Routine Name:
  - XQ88


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : MEIGHAN,MIKE                   Date Entered : MAY 23, 2000
Completed By: HERREN,CATHRYN                Date Completed: JUL 01, 2002
Released By : CHANNELL,DEBBIE               Date Released : JUL 30, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT

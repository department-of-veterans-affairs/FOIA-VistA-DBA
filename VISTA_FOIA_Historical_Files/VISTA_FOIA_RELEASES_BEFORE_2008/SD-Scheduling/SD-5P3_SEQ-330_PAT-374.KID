Released SD*5.3*374 SEQ #330
Extracted from mail message
**KIDS**:SD*5.3*374^

**INSTALL NAME**
SD*5.3*374
"BLD",5563,0)
SD*5.3*374^SCHEDULING^0^3050110^y
"BLD",5563,1,0)
^^1^1^3050110^
"BLD",5563,1,1,0)
CORRECTION FOR SENDING ALERTS FOR MISSING ENCOUNTER POINTERS.
"BLD",5563,4,0)
^9.64PA^^
"BLD",5563,"ABPKG")
n
"BLD",5563,"KRN",0)
^9.67PA^8989.52^19
"BLD",5563,"KRN",.4,0)
.4
"BLD",5563,"KRN",.401,0)
.401
"BLD",5563,"KRN",.402,0)
.402
"BLD",5563,"KRN",.403,0)
.403
"BLD",5563,"KRN",.5,0)
.5
"BLD",5563,"KRN",.84,0)
.84
"BLD",5563,"KRN",3.6,0)
3.6
"BLD",5563,"KRN",3.8,0)
3.8
"BLD",5563,"KRN",9.2,0)
9.2
"BLD",5563,"KRN",9.8,0)
9.8
"BLD",5563,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5563,"KRN",9.8,"NM",1,0)
SDAMQ5^^0^B13040197
"BLD",5563,"KRN",9.8,"NM","B","SDAMQ5",1)

"BLD",5563,"KRN",19,0)
19
"BLD",5563,"KRN",19,"NM",0)
^9.68A^^
"BLD",5563,"KRN",19.1,0)
19.1
"BLD",5563,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",5563,"KRN",101,0)
101
"BLD",5563,"KRN",409.61,0)
409.61
"BLD",5563,"KRN",771,0)
771
"BLD",5563,"KRN",870,0)
870
"BLD",5563,"KRN",8989.51,0)
8989.51
"BLD",5563,"KRN",8989.52,0)
8989.52
"BLD",5563,"KRN",8994,0)
8994
"BLD",5563,"KRN","B",.4,.4)

"BLD",5563,"KRN","B",.401,.401)

"BLD",5563,"KRN","B",.402,.402)

"BLD",5563,"KRN","B",.403,.403)

"BLD",5563,"KRN","B",.5,.5)

"BLD",5563,"KRN","B",.84,.84)

"BLD",5563,"KRN","B",3.6,3.6)

"BLD",5563,"KRN","B",3.8,3.8)

"BLD",5563,"KRN","B",9.2,9.2)

"BLD",5563,"KRN","B",9.8,9.8)

"BLD",5563,"KRN","B",19,19)

"BLD",5563,"KRN","B",19.1,19.1)

"BLD",5563,"KRN","B",101,101)

"BLD",5563,"KRN","B",409.61,409.61)

"BLD",5563,"KRN","B",771,771)

"BLD",5563,"KRN","B",870,870)

"BLD",5563,"KRN","B",8989.51,8989.51)

"BLD",5563,"KRN","B",8989.52,8989.52)

"BLD",5563,"KRN","B",8994,8994)

"BLD",5563,"QUES",0)
^9.62^^
"BLD",5563,"REQB",0)
^9.611^1^1
"BLD",5563,"REQB",1,0)
SD*5.3*125^1
"BLD",5563,"REQB","B","SD*5.3*125",1)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
374^3050110
"PKG",16,22,1,"PAH",1,1,0)
^^1^1^3050110
"PKG",16,22,1,"PAH",1,1,1,0)
CORRECTION FOR SENDING ALERTS FOR MISSING ENCOUNTER POINTERS.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SDAMQ5")
0^1^B13040197
"RTN","SDAMQ5",1,0)
SDAMQ5 ;ALB/MJK - AM Background Job/Disposition Processing ; 05/19/97
"RTN","SDAMQ5",2,0)
 ;;5.3;Scheduling;**24,125,374**;Aug 13, 1993
"RTN","SDAMQ5",3,0)
 ;
"RTN","SDAMQ5",4,0)
EN(SDBEG,SDEND) ; -- count dispositions
"RTN","SDAMQ5",5,0)
 N SDIVNM,SDT,SD0,SDDA,SDNAT,DFN,X,SDOE
"RTN","SDAMQ5",6,0)
 S SDT=SDBEG F  S SDT=$O(^DPT("ADIS",SDT)) Q:'SDT!(SDT>SDEND)  I $$REQ^SDM1A(.SDT)="CO" D
"RTN","SDAMQ5",7,0)
 .S DFN=0 F  S DFN=$O(^DPT("ADIS",SDT,DFN)) Q:'DFN  D
"RTN","SDAMQ5",8,0)
 ..S SDDA=0 F  S SDDA=$O(^DPT("ADIS",SDT,DFN,SDDA)) Q:'SDDA  D CHK(.DFN,.SDDA,.SDT)
"RTN","SDAMQ5",9,0)
ENQ Q
"RTN","SDAMQ5",10,0)
 ;
"RTN","SDAMQ5",11,0)
CHK(DFN,SDDA,SDT) ;  check dispositions
"RTN","SDAMQ5",12,0)
 N SDOE,SD0,SDIVNM,SDNAT,X,SDERR,SDLOC
"RTN","SDAMQ5",13,0)
 S SDERR=""
"RTN","SDAMQ5",14,0)
 G CHKQ:'$D(^DPT(DFN,"DIS",SDDA,0)) S SD0=^(0)
"RTN","SDAMQ5",15,0)
 I $P(SD0,U,2)=0!($P(SD0,U,2)=1),$P(SD0,U,7),$$DIV^SDAMQ(+$P(SD0,U,4),.SDIVNM,35) D
"RTN","SDAMQ5",16,0)
 .;CHECK INSTALL DATE FOR PATCH DG*5.3*459 IF BEFORE RELEASE DATE
"RTN","SDAMQ5",17,0)
 .;SEND TO ERROR CHECKER OTHERWISE SKIP. DBIA:2197
"RTN","SDAMQ5",18,0)
 .N SDINIEN,SDINDT,SDPCHK S SDPCHK=0
"RTN","SDAMQ5",19,0)
 .S SDINIEN=$O(^XPD(9.7,"B","DG*5.3*459",0)) D
"RTN","SDAMQ5",20,0)
 ..I SDINIEN'="" S SDINDT=$$GET1^DIQ(9.7,SDINIEN,2,"I") D
"RTN","SDAMQ5",21,0)
 ...I SDINDT>SDT S SDPCHK=1
"RTN","SDAMQ5",22,0)
 .S SDOE=$P(SD0,U,18)
"RTN","SDAMQ5",23,0)
 .I SDOE="" I SDPCHK S SDERR=1 G CHKERR
"RTN","SDAMQ5",24,0)
 .I SDOE="" Q
"RTN","SDAMQ5",25,0)
 .I '$D(^SCE(SDOE,0)) S SDERR=2 G CHKERR
"RTN","SDAMQ5",26,0)
 .S SDLOC=$P(^SCE(SDOE,0),U,4)
"RTN","SDAMQ5",27,0)
 .I SDLOC="" S SDERR=3 G CHKERR
"RTN","SDAMQ5",28,0)
 .I '$D(^PX(815,1,"DHL","B",SDLOC)) S SDERR=4 G CHKERR
"RTN","SDAMQ5",29,0)
 .S SDNAT='$$CO^SDAMQ(+$$GETDISP^SDVSIT2(DFN,SDT))
"RTN","SDAMQ5",30,0)
 .S X=$G(^TMP("SDSTATS",$J,SDIVNM,"DISP",102)),^(102)=(X+SDNAT)_U_($P(X,U,2)+1) Q
"RTN","SDAMQ5",31,0)
CHKERR .S ^TMP("SDSTATS",$J,SDIVNM,"DISP","ERR",SDERR,DFN,SDDA)="" Q
"RTN","SDAMQ5",32,0)
CHKQ Q
"RTN","SDAMQ5",33,0)
 ;
"RTN","SDAMQ5",34,0)
BULL(SDIVNM,SDLN,SDTOT) ;  build disposition section of bulletin
"RTN","SDAMQ5",35,0)
 N SDSTOP,NAT,GRAND,OTHER,TNAT,TGRAND
"RTN","SDAMQ5",36,0)
 I $D(^TMP("SDSTATS",$J,SDIVNM,"DISP","ERR")) D ERRLIST
"RTN","SDAMQ5",37,0)
 D HDR
"RTN","SDAMQ5",38,0)
 S (SDSTOP,TNAT,TGRAND)=0
"RTN","SDAMQ5",39,0)
 F  S SDSTOP=$O(^TMP("SDSTATS",$J,SDIVNM,"DISP",SDSTOP)) Q:'SDSTOP!(SDSTOP="ERR")  S X=^(SDSTOP) D
"RTN","SDAMQ5",40,0)
 .S NAT=+X,GRAND=+$P(X,U,2)
"RTN","SDAMQ5",41,0)
 .S TNAT=TNAT+NAT,TGRAND=TGRAND+GRAND
"RTN","SDAMQ5",42,0)
 .S SDTOT("DIV","NAT")=SDTOT("DIV","NAT")+NAT
"RTN","SDAMQ5",43,0)
 .S SDTOT("DIV","GRAND")=SDTOT("DIV","GRAND")+GRAND
"RTN","SDAMQ5",44,0)
 D LINE^SDAMQ3("Dispositions",TNAT,TGRAND)
"RTN","SDAMQ5",45,0)
BULLQ Q
"RTN","SDAMQ5",46,0)
 ;
"RTN","SDAMQ5",47,0)
HDR ;  header for disposition section of bulletin
"RTN","SDAMQ5",48,0)
 D SET^SDAMQ3("")
"RTN","SDAMQ5",49,0)
 D SET^SDAMQ3("                                       Dispositions")
"RTN","SDAMQ5",50,0)
 D SET^SDAMQ3("                                       Requiring Action      Total     Pct.")
"RTN","SDAMQ5",51,0)
 D SET^SDAMQ3("                                       ----------------    -------   -------")
"RTN","SDAMQ5",52,0)
 Q
"RTN","SDAMQ5",53,0)
ERRLIST ;  if disposition errors, add to bulletin
"RTN","SDAMQ5",54,0)
 I $D(^TMP("SDSTATS",$J,SDIVNM,"DISP","ERR",1)) D SHOWIT(1)
"RTN","SDAMQ5",55,0)
 I $D(^TMP("SDSTATS",$J,SDIVNM,"DISP","ERR",2)) D SHOWIT(2)
"RTN","SDAMQ5",56,0)
 I $D(^TMP("SDSTATS",$J,SDIVNM,"DISP","ERR",3)) D SHOWIT(3)
"RTN","SDAMQ5",57,0)
 I $D(^TMP("SDSTATS",$J,SDIVNM,"DISP","ERR",4)) D SHOWIT(4)
"RTN","SDAMQ5",58,0)
 Q
"RTN","SDAMQ5",59,0)
SHOWIT(SDERR) ; add disposition errors to bulletin
"RTN","SDAMQ5",60,0)
 N SDDFN,SDDI,SDPAT,Y
"RTN","SDAMQ5",61,0)
 D SET^SDAMQ3("")
"RTN","SDAMQ5",62,0)
 D SET^SDAMQ3($P($T(HEADERS+SDERR),"^",2))
"RTN","SDAMQ5",63,0)
 D SET^SDAMQ3("                             (not included in totals)")
"RTN","SDAMQ5",64,0)
 D SET^SDAMQ3("                       -------------------------------------")
"RTN","SDAMQ5",65,0)
 S SDDFN=""
"RTN","SDAMQ5",66,0)
 F  S SDDFN=$O(^TMP("SDSTATS",$J,SDIVNM,"DISP","ERR",SDERR,SDDFN)) Q:'SDDFN  D
"RTN","SDAMQ5",67,0)
 .S SDDI=""
"RTN","SDAMQ5",68,0)
 .F  S SDDI=$O(^TMP("SDSTATS",$J,SDIVNM,"DISP","ERR",SDERR,SDDFN,SDDI)) Q:'SDDI  D
"RTN","SDAMQ5",69,0)
 ..S SDPAT=$P(^DPT(SDDFN,0),U,1),Y=(9999999-SDDI) D DD^%DT
"RTN","SDAMQ5",70,0)
 ..D SET^SDAMQ3("                       "_SDPAT_"   "_Y)
"RTN","SDAMQ5",71,0)
 Q
"RTN","SDAMQ5",72,0)
HEADERS ;  text for message headers
"RTN","SDAMQ5",73,0)
 ;;^            **** Disposition without encounter pointer: ****
"RTN","SDAMQ5",74,0)
 ;;^     **** Disposition points to non-existent encounter: ****
"RTN","SDAMQ5",75,0)
 ;;^                       **** Disposition clinic missing: ****
"RTN","SDAMQ5",76,0)
 ;;^               **** Disposition clinic not in file 815: ****
"RTN","SDAMQ5",77,0)
 ;
"VER")
8.0^22.0
**END**
**END**

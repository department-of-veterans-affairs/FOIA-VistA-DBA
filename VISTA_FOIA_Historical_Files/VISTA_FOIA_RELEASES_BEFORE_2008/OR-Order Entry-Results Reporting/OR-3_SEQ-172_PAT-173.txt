
=============================================================================
Run Date: AUG 11, 2003                     Designation: OR*3*173
Package : OR - ORDER ENTRY/RESULTS REPORTING  Priority: Mandatory
Version : 3       SEQ #172                       Status: Released
                  Compliance Date: SEP 11, 2003
=============================================================================

Associated patches: (v)OR*3*149    <<= must be installed BEFORE `OR*3*173'
                    (v)OR*3*165    <<= must be installed BEFORE `OR*3*173'
                    (v)TIU*1*160   <<= must be installed BEFORE `OR*3*173'
                    (v)TIU*1*164   <<= must be installed BEFORE `OR*3*173'

Subject: CPRS GUI Version 22

Category: 
  - Routine
  - Enhancement (Mandatory)

Description: 
============

 PATCH DESCRIPTION:
 =================
  
 Patch 173 implements CCOW, LM functions, notifications, and Women's 
 Health features.
  
 -- CCOW (CLINICAL CONTEXT)
  
 - GUI 22 includes support for clinical context synchronization in 
 accordance with the CCOW standard.  This functionality requires 
 installation of Sentillion's Vergence Desktop Components on each user 
 workstation.  If installed, any other application on that desktop which 
 is compliant with the CCOW standard will automatically synchronize with 
 the selected patient in CPRS, and selecting a different patient in any 
 such application will automatically synchronize the other desktop 
 applications, including CPRS, to the same patient.  If the Vergence 
 component is not installed, CPRS will continue to operate as it 
 previously did.  Installation of this component is not required for 
 normal, non-CCOW CPRS operation.
  
 -- CLINICAL REMINDERS
  
 - E3R 15758: Dialog elements with the checkbox suppress will display in 
 the progress note with or without a finding item. Post-install code was 
 added which sets all Reminder Dialog Groups and Elements that have the 
 checkbox suppress and no finding to be exclude from the progress note.
  
 - Added two new dialog prompts and processing logic for the Womens Health 
 project in Clinical Reminders. These Dialog prompts will be invisible to 
 the GUI until server side is releases of PXRM*2.0*1 or PXRM*2.0*2.
  
 - Changed Progress Note Text functionality to allow a Womens Health Force 
 Value to populate the progress note text; will require the server release 
 of Womens Health patch.
  
 - Change the SelectDevice Function call to accept a fourth parameter so 
 calling units can customize the form caption.
  
 -- TIU
  
 - Added a new Refresh Patient Data Object to the Patient Data Object form.
  
 - Changed the progress note to wrap at 80 characters; works with TIU 
 patch 164 for objects.
  
 - NOIS: LEX-1001-42510 - Modified the Encounter form to utilize the 
 user's saved clinic appointment date range parameters (if set) instead of 
 previously hard-coded range of 30 days.
  
 -- PRINTING MULTIPLE NOTES, CONSULTS OR DC/SUMMARIES 
   (TO MATCH LIST MANAGER FUNCTIONALITY)
  
 - Added a new form that will present a list of Parent Nodes for each 
 Completed Note, Consult, or DC/Summary for a given Patient. From this 
 list the user can select one or many items to be printed.
  
 - Added a new option: File->Print Selected Items.  This option is only 
 available for selection when the user is accessing the Notes, Consults, 
 or DC/Summary tabs.
  
 -- TEMPLATES
  
 - NOIS: PUG-0202-50989 - Deselect/toggle of a default template is now 
 allowed.
  
 - NOIS: HEH-0503-40903, NIN-0901-41859, PAL-1101-60790, CPH-0502-40626, 
 CPH-0702-42563, BIR-0802-31738, SHR-0902-71866, MAR-0902-22087, 
 CHY-0203-51509, SLC-0203-52072, BIR-0303-30761, AUG-0303-31071, 
 LAS-0901-60562, LEB-0503-22004, ATG-0503-32041 - Consults template 
 cause "reversed order" during data entry.  This has been addressed.
  
  - When importing a template with a status of inactive, if the "Hide 
 Inactive" checkbox was checked the error "Cannot focus a disabled or 
 invisible window" would sometimes appear.  Subsequent attempts to 
 re-import the template would then cause an access violation.  This has 
 been fixed.
  
 -- NOTES TAB
  
 - NOIS: TAM-0300-33000 - Functionality was added to the GUI to match that 
 in the List Manager Version of CPRS, insuring a Note with its Document 
 Parameter (allow >1 records per visit:NO) can only exist once per visit.
  
 - Inactive User - Functionality was added to determine a user's DISUSER 
 status when selecting a co-signer or additional signer for a Note or 
 Consult.  If the user is DISUSERED, the appropriate message will be 
 displayed.
  
 - NOIS: HOU-0403-71815, CHS-0503-40139 - Currently in CPRS when a 
 provider creates a note and the note requires a co-signature, 
 the cosigner can sign the note prior to the author signing.  
 The exact process is possible in LM with the following 
 exception:  When the cosigner selects a note for signature 
 prior to the author signing,  the cosigner is prompted with a message 
 stating: "Author hasn't signed, are you SURE you want to sign Provider A 
 TEST NOTE?"  The cosigner can then proceed by responding No to exit 
 without signing or Yes to proceed with signing.  This functionality has 
 been added to CPRS GUI. 
  
 - NOIS: LAS-0901-60562 - Consult Reason For Request is no longer 
 inverted.
  
 - The Notes properties form used for selecting a new note title now 
 resizes correctly for 24pt font size.
  
 -- NOTES/CONSULTS/DISCHARGE SUMMARY
  
 - NOIS: CHA-0403-30277, PUG-0403-51353, FNC-0503-30038, MOU-0503-30380 -
 Under certain circumstances, the TIU call to save the document can fail 
 and return an error message.  CPRS was not correctly processing this 
 error message.  This would result in a subsequent hard server error at 
 PATVADPT+4^TIULV, because a second call to store the text of the document 
 would pass a document IEN of "0".  In this version, the existing error 
 message returned by TIU is displayed to the user, and the second call is 
 bypassed.  This prevents the server error that would result further 
 downstream in the update process.  Investigation continues as to the 
 underlying cause for this scenario.
  
 - The Templates treeview maintains its selection even after the note 
 being edited is saved or signed.  When starting a new note, the previous 
 template remains selected in the treeview, whether or not the templates 
 drawer is open.  When then starting another new note, and selecting 
 "Preview/Print Selected Template" from the note's popup menu, the 
 template previously selected and used would be displayed.  This was 
 confusing.  In this version, that menu will not be available unless the 
 templates drawer is actually open, showing that a template is currently 
 highlighted.
  
 - The tab order has been tweaked so that the note editor comes directly 
 after the list of notes.
  
 -- CONSULTS
  
 - Under certain circumstances in the consult or procedure ordering 
 process, a server error at SVCIEN+2^ORQQCN2 would occur.  This has been 
 corrected.
  
 -- HIPAA CODE SET VERSIONING
  
 - All required changes to the GUI to support the later implementation of 
 Code Set Versioning (CSV - actually scheduled for GUI 23) have been 
 pre-included in this release of GUI 22.  Users should see no changes 
 until the required ICD, ICPT, LEX, and IBD patches are installed later 
 this year.  At that time, codes and vocabulary terms will be checked and 
 screened for date currency, and some changes to GUI behavior will be 
 noted.  The changes have been included now to facilitate testing and 
 readiness for the Fall, 2003 implementation deadline.  Documentation of 
 the GUI changes will be forthcoming as CSV implementation approaches.
  
 -- SPELLCHECK/GRAMMARCHECK
  
 - The spell-checker was terminating abnormally (but safely) if the first 
 line of the document being checked was a blank line.  This has been 
 corrected.
  
 - A problem was addressed that caused spell check to abort if the first 
 line of the document was blank or contained only spaces.
  
 -- NOTIFICATIONS/ALERTS
  
 - The notification/alerts display on the patient selection screen has 
 been changed to columnar format.  It is now possible to click on any 
 column heading and sort by that heading.  Clicking again on the heading 
 will reverse the sort by that heading.  The new column headings for 
 notification/alerts include:
         Info (information alerts are preceded with an "I")
         Patient name
         Location (patient location if known)
         Urgency (valued HIGH, Moderate, or low as indicated by the CPRS 
             parameter ORB URGENCY - TIU alerts are given a
             "Moderate" urgency value while other alerts without a 
             parameter value are given an urgency of "low")
         Alert Date/Time (date/time the alert was triggered)
         Message (alert message or text)
 Two new buttons have been added to the Notification/Alert display: 
 "Remove" and "Forward".  In addition, the "Next" button that appears in 
 the status bar (bottom of screen) when alerts are being processed now has 
 a pop-up menu.  This menu appears when the user right-clicks the Next 
 button.  The pop-up supports the following actions: "Continue", 
 "Forward", and "Renew".
  
 - Added alert forwarding comments and information to the alert list on 
 the patient selection screen.  A new column "Forwarded By/When" has been 
 added to display who forwarded the alert and when (if applicable.)  Like 
 other columns on the new alerts list, the Forwarded By/When column 
 supports sorting.  This will allow users to sort alerts by who forwarded 
 them.  Also if a forwarded alert has comments from the forwarding person, 
 those comments will be displayed when the curser hovers over the 
 forwarded alert.  To support more comment information, the Forwarding 
 Alerts screen now has a larger comments section.  Comments are limited to 
 180 characters to support display on the alerts screen.
  
 -- ORCH CONTEXT MEDS
  
 - In ListManager the parameter ORCH CONTEXT MEDS controls date range for 
 display of meds; it previously had no effect in the CPRS GUI.  This 
 function has been added to GUI.  Users are able to set the date range for 
 display meds on the MEDS Tab by selecting Tools/Options/General Tab/Other 
 parameters. 
  
 -- PATIENT RECORD FLAG
  
 - Required changes to the GUI to display the patient record flag have 
 been included in this release.  Based on the availability of the API from 
 the MSS Major Enhancement package, when doing patient selection, users 
 will be presented with patient record flag information for violent, 
 potentially violent, or other locally categorized patients. If the MSS API
 is not available the function is transparent to end users. 
  
 -- ORDERS TAB
  
 - NOIS: UNY-0103-12484, SFC-0103-61604, E3Rs: 17795, 16766 - "Give First 
 Dose Now" resulted in several medication errors.  Based on 
 recommendations made by the CPRS Clinical Workgroup the following changes 
 were made to address these issues.
  
     1. "Give First Dose Now" will be changed to the verbiage of "Give 
        Additional Dose Now".
     2. The "Give Additional Dose Now" option will not be available for 
        free-text orders.
     3. A pop-up information box will be generated to the provider when 
        the "Give additional Dose Now" button is enabled. This information 
        box will tell the provider that there were two orders entered for 
        the same medication with each administrative schedule. 
  
 - NOIS: WAS-1102-22142, WAS-0303-20992, HUN-1100-22441  - The purpose of 
 the order comments field was ambiguous to End Users and was used for 
 various purposes.  Based on the recommendation of the CPRS Clinical 
 Workgroup, the "Order Comments" function was disabled and the order 
 comments field locked out. 
  
 - NOIS: ELP-0303-71667 - When Renewing, changing or copying an existed 
 copay eligible order, if the patient's current copay exemption changed, 
 the new order still populated with the old order's copay exemptions for 
 order signing.  This was fixed.
  
 - NOIS: CLE-0403-40078 - For a medication quick order with a fractional 
 quantity, when placing this order, the quantity always defaulted to zero. 
 This has been fixed.
  
 - NOIS: TNV-0403-31555 - On the Orders tab, upon selection of the View 
 menu and then the Auto DC/Release Event Orders option, the date/time of 
 all the events ended with the same value regardless of the actual event 
 times. This was fixed.
  
 - NOIS: BIR-0603-31392 - Some sites reported a "Class TMemo not found" 
 error with Orderable Items.  This was fixed.
  
 - Unsigned orders do not trigger the Order Requires Elec Signature 
 notification/alert: Orders on the unsigned order list are checked by 
 default.  If you click the "Don't Sign" button while unsigned orders are 
 checked, the alert will not trigger.  If you uncheck the unsigned orders 
 before clicking the "Don't Sign" button, the alert triggers.  The fix 
 will now tigger the alert in both cases.  
  
 - The Hotkey to sign orders was changed to <Alt-A+G> to match behavior 
 of the Notes tab.  
  
 - The "Save Without Signature" shortcut was changed to <Ctrl-G> to make 
 it agree with the shortcut on the notes tab.
  
 - When renewing a complex order from the Meds tab, the renewed order did 
 not show up on the order list until the review/sign window was displayed. 
 This was fixed.
  
 - For a transfer event, the event name did not show in the event box of 
 the event default dialog. This was fixed.
  
 -- EVENT DELAYED ORDERS
  
 - Removed an error caused by typing in listbox of Change Release Event 
 screen if no release events are available.
  
 -- MEDS TAB
  
 - Administration History for IV orders is now retrievable and should 
 display correctly.  
  
 - Pressing the space bar while in the complex medication grid brings up 
 the appropriate field editor.  This has been altered so that the old 
 value of the field is used as the default value in the field editor.
  
 -- VITALS
  
 - NOIS: MWV-0103-22037 - Added an IsNumeric function to force entry of 
 weight as numeric for graphing.
  
 - When entering vitals from the cover sheet and moving between fields 
 using the ENTER key instead of TAB, an "invalid typecast" error would 
 occur.  This was fixed.
  
 -- PROBLEMS TAB
  
  - When viewing the list of "removed" problems, many menu actions that 
 previously displayed an error message have now simply been disabled.
  
 - The problems tab for the inactivate and verify actions now allow 
 multiple selections.
  
 - If CPRS timed out while the problem add/edit screen was displayed, an 
 access violation would result.  This has been corrected.
  
 - The tab order has been tweaked so that the list of active problems 
 comes directly after the problem categories list.
  
 -- SECTION 508 CHANGES
  
 - Several dialog boxes were changed to provide text readability by 
 text-to-speech utilities.
  
 - A 508 disclaimer was added to the splash screen and the help/about box.
  
 -- PATIENT SELECTION SCREEN
  
 - A bug that could hide reminder buttons behind the windows tool bar 
 was fixed.  
  
 - Text in buttons is no longer cut off when using larger fonts.
  
 - NOIS: PUG-0400-50702 - When first setting a Ward as the default Pt. 
 List, room and bed information showed, but upon subsequent appearances of 
 the list window it did not.  This was fixed.  
  
 -- OPTIONS
  
 - A problem was reported with the title selection list for the Consults 
 document class.  Not all available titles were selectable from the list.  
 This has been corrected.
  
 - Pressing <Enter> in the Custom Reports screen to bring up the calendar 
 dialog no longer gives a "Cannot focus inivislbe window" error when the 
 dialog closes.
  
 -- ICON LEGEND
  
 - The text of the Icon Legend was not always displaying completely in 
 v21.  This has been fixed.
  
 -- TOOLS
  
 - NOIS: DET-0603-41993, ERI-1202-21387 - Event Capture Interface - Inside 
 CPRS, the "Event Capture Interface" users were not able to save the 
 customized application path for the multi-sessions reuse.  This was 
 fixed.  For sites using the "Event Capture Interface" (ECI), by using the 
 "CPRS GUI TOOLS MENU" option, a site CAC might need to add a new entry 
 (Event Capture Interface="path...\ECS GUI.EXE") at the system level or 
 other appropriate level to store the default ECI path.  The application 
 name needs to be exactly the same as the words "Event Capture Interface" 
 (not case sensitive).  For full functionality, patch EC*2.0*46 (patch and 
 EC GUI EXE) need to be installed in the same account as well. If a CPRS 
 user has a customized ECS GUI path, the user can launch the ECI 
 application by manually browsing the appropriate directory and the 
 customized path will be saved on the server side for future reuse.
  
  
 REQUIRED BUILDS:
 ===============
  
     OR*3.0*149
     OR*3.0*165
     TIU*1.0*160
     TIU*1.0*164
  
 NOTE: Internet Explorer 4.0 (IE4) or later is REQUIRED in order for 
 GUI version 22 to run.  However IE 5.5 or later with 128-bit
 encryption is required for PKI functionality.  
  
  
 ROUTINE SUMMARY:
 ===============
  
 The following is a list of the routine(s) included in this patch.  
 The second line of each of these routine(s) will look like:
  
 <tab>;;3.0;ORDER ENTRY/RESULTS REPORTING;**[patch list]**;Dec 17, 1997
  
                       CHECK^XTSUMBLD results 
  Routine name     Before Patch     After Patch         Patch List
  ============     ============     ===========         ==========
  ORB31                 6955971         7121649    6,31,88,105,139,173
  ORB3MGR1             12539476        12206557  31,74,85,88,105,139,173
  ORB3REC               3555874         3264453        9,85,105,173
  ORCACT0              20852820        21170039 7,27,48,72,86,92,94,141,
                                                       165,177,173
  ORPRF                     N/A         3324531            173
  ORQORB                1134419         1565272           6,173
  ORQPTQ11             17707170        17682805     82,85,109,132,173
  ORQQPL                6630191         7150036        9,10,85,173
  ORQQPL1               8531650         9008621       10,85,148,173
  ORQQPL3               8144329         9205375         10,148,173
  ORQQPXRM              2387325         2426793       10,85,116,173
  ORWDPS4               3291947         3553814    116,125,131,141,173
  ORWORB               11500350        13264632     10,85,116,148,173
  ORWPCE               12248410        15820035       10,85,116,173
  ORWPCE2              13132491        13922968     10,85,109,116,173
  ORWPS                 5131825         5723015   10,85,116,132,141,173
  ORWTPD                4882594         5109306  109,120,132,148,141,173
  ORWTPL                6672838         6595141         85,109,173
  ORWTPR                5958556         5690196           85,173
  ORY173                    N/A         2236831            173
  
  
 INSTALLATION FILES: 
 ==================
  
 OR*3*173.KID is a multi-patch installation Host File.  It installs both 
 OR*3*149 and OR*3*173 in one step.  
  
 The following software and documentation files, including the last 
 file which contains Delphi source code, are exported as part of 
 this patch:
  
    File Name             Contents                    Retrieval Format
    ---------             --------                    ----------------
    OR_30_173.KID         KIDS Build                  ASCII
    OR_30_173.ZIP         File(s) indented below      BINARY
     - CPRSCHART.EXE          CPRS Executable
     - CPRS.CNT               CPRS Help CNT File
     - CPRS.HLP               CPRS Help File
     - CPRSGUITM.DOC          CPRS GUI Technical Manual (Word Version)
     - CPRSGUITM.PDF          CPRS GUI Technical Manual
     - CPRSGUIUM.DOC          CPRS GUI User Manual (Word Version)  
     - CPRSGUIUM.PDF          CPRS GUI User Manual   
     - CPRSLMTM.DOC           CPRS LM Technical Manual (Word Version)
     - CPRSLMTM.PDF           CPRS LM Technical Manual
     - CPRSLMUM.DOC           LM User Manual (Word Version)
     - CPRSLMUM.PDF           LM User Manual
     - CPRSSETUP.DOC          CPRS GUI Setup Document (Word Version)
     - CPRSSETUP.PDF          CPRS GUI Setup Document
     - OR_30_149_RN.DOC       CPRS GUI V20 Release Notes (Word Version)
     - OR_30_149_RN.PDF       CPRS GUI V20 Release Notes
     - OR_30_173_RN.DOC       CPRS GUI V21 Release Notes (Word Version)
     - OR_30_173_RN.PDF       CPRS GUI V21 Release Notes
   *OR_30_173_SRC.ZIP     CPRSChart Source             BINARY
  
 *(This file contains, in the CPRS-Chart folder, a "README.TXT" file 
   of major importance to sites utilizing the Delphi source code.)
  
 The files listed above may be obtained via FTP.  The preferred method is 
 to FTP the files from:
  
    download.vista.med.va.gov
  
 This transmits the files from the first available FTP server.  Sites may 
 also elect to retrieve software directly from a specific server as
 follows:
  
    CIO FIELD OFFICE   FTP ADDRESS                 DIRECTORY
    ----------------   -------------------------   --------------------
    Albany             ftp.fo-albany.med.va.gov    [anonymous.software]
    Hines              ftp.fo-hines.med.va.gov     [anonymous.software]
    Salt Lake City     ftp.fo-slc.med.va.gov       [anonymous.software]
  
  
 INSTALLATION INSTRUCTIONS:
 ========================= 
  
 This patch is installed as part of multi-patch installation.  Patch 
 OR*3*149 is also installed in the same process.  
  
 Users should not be on the system during installation of this patch.  
 This patch should be installed during non-peak hours to 
 minimize disruption.  Installation will take approximately 
 5 minutes or more, depending on the menu structure at your site.
  
 1.  Obtain the file OR_30_173.KID.
  
 2.  Review your mapped set.  If any of the routines listed in the
     ROUTINE SUMMARY section are mapped, they should be removed
     from the mapped set at this time.
  
 3.  From the Kernel Installation and Distribution System (KIDS) Menu, 
     select the Installation menu.
  
 4.  Use Load a Distribution using OR_30_173.KID when prompted to Enter
     a Host File name.  You may need to prepend a directory name.
  
 5.  If given the option to run any Environment Check Routine(s), answer 
     "YES."
  
 6.  From this menu, you may then elect to use the following options
     (when prompted for the INSTALL NAME, enter OR*3.0*173):
        a.  Backup a Transport Global
        b.  Compare Transport Global to Current System
        c.  Verify Checksums in Transport Global 
  
 7.  When ready, select the Install Packages option (when prompted for 
     the INSTALL NAME, enter CPRS GUI 22.0).
  
 8.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
     Install? Yes//", respond "YES."
  
 9.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
     YES//', respond "YES." 
  
 10. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond YES.  When prompted to select the 
     options you would like to place out of order, enter the following:
  
        OR OE/RR MENU CLINICIAN          CPRS Clinician Menu
        OR OE/RR MENU NURSE              CPRS Nurse Menu
        OR OE/RR MENU WARD CLERK         CPRS Ward Clerk Menu
        OR CPRS GUI CHART
  
 11. When prompted 'Delay Install (Minutes):  (0-60): 0//; respond '0.'
  
 12. If routines were unmapped as part of step 2, they should be 
     returned to the mapped set once the installation has run to 
     completion.
  
 13. Following successful installation, the pre/post-install routines 
     ORY149 and ORY173 may be deleted.
  
 14. Retrieve and open the file OR_30_173.ZIP.
  
 15. Place the User and Technical Manual files in a location that can 
     be accessed by CPRS users.
  
 16. Move the CPRSChart.exe and help files to the appropriate directory 
     where they can be accessed by all CPRS workstations.

Routine Information:
====================

Routine Name:
  - ORQQPL


Routine Checksum:

Routine Name:
  - ORQQPL1


Routine Checksum:

Routine Name:
  - ORQQPL3


Routine Checksum:

Routine Name:
  - ORWPCE


Routine Checksum:

Routine Name:
  - ORWPCE2


Routine Checksum:

Routine Name:
  - ORWPS


Routine Checksum:

Routine Name:
  - ORWORB


Routine Checksum:

Routine Name:
  - ORB31


Routine Checksum:

Routine Name:
  - ORQORB


Routine Checksum:

Routine Name:
  - ORCACT0


Routine Checksum:

Routine Name:
  - ORPRF


Routine Checksum:

Routine Name:
  - ORQQPXRM


Routine Checksum:

Routine Name:
  - ORWDPS4


Routine Checksum:

Routine Name:
  - ORWTPD


Routine Checksum:

Routine Name:
  - ORY173


Routine Checksum:

Routine Name:
  - ORB3MGR1


Routine Checksum:

Routine Name:
  - ORB3REC


Routine Checksum:

Routine Name:
  - ORWTPL


Routine Checksum:

Routine Name:
  - ORWTPR


Routine Checksum:

Routine Name:
  - ORQPTQ11


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : SHARP,PAUL                     Date Entered : JAN 30, 2003
Completed By: INSLEY,MARCIA                 Date Completed: AUG 11, 2003
Released By : STRONG,NICK                   Date Released : AUG 11, 2003
=============================================================================


Packman Mail Message:
=====================

No routines included

Released ORRC*1*5 SEQ #4
Extracted from mail message
**KIDS**:ORRC*1.0*5^

**INSTALL NAME**
ORRC*1.0*5
"BLD",6006,0)
ORRC*1.0*5^CARE MANAGEMENT^0^3070222^y
"BLD",6006,4,0)
^9.64PA^^
"BLD",6006,6.3)
4
"BLD",6006,"KRN",0)
^9.67PA^8989.52^19
"BLD",6006,"KRN",.4,0)
.4
"BLD",6006,"KRN",.401,0)
.401
"BLD",6006,"KRN",.402,0)
.402
"BLD",6006,"KRN",.403,0)
.403
"BLD",6006,"KRN",.5,0)
.5
"BLD",6006,"KRN",.84,0)
.84
"BLD",6006,"KRN",3.6,0)
3.6
"BLD",6006,"KRN",3.8,0)
3.8
"BLD",6006,"KRN",9.2,0)
9.2
"BLD",6006,"KRN",9.8,0)
9.8
"BLD",6006,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",6006,"KRN",9.8,"NM",1,0)
ORRCOA^^0^B11062549
"BLD",6006,"KRN",9.8,"NM",2,0)
ORRCDPT^^0^B27732159
"BLD",6006,"KRN",9.8,"NM",3,0)
ORRCDPT1^^0^B23709488
"BLD",6006,"KRN",9.8,"NM","B","ORRCDPT",2)

"BLD",6006,"KRN",9.8,"NM","B","ORRCDPT1",3)

"BLD",6006,"KRN",9.8,"NM","B","ORRCOA",1)

"BLD",6006,"KRN",19,0)
19
"BLD",6006,"KRN",19,"NM",0)
^9.68A^4^4
"BLD",6006,"KRN",19,"NM",1,0)
ORRC CM MENU^^0
"BLD",6006,"KRN",19,"NM",2,0)
ORRC ORD ACK INQ BY ORDER^^0
"BLD",6006,"KRN",19,"NM",3,0)
ORRC ORD ACK INQ BY PROV^^0
"BLD",6006,"KRN",19,"NM",4,0)
OR PARAM COORDINATOR MENU^^2
"BLD",6006,"KRN",19,"NM","B","OR PARAM COORDINATOR MENU",4)

"BLD",6006,"KRN",19,"NM","B","ORRC CM MENU",1)

"BLD",6006,"KRN",19,"NM","B","ORRC ORD ACK INQ BY ORDER",2)

"BLD",6006,"KRN",19,"NM","B","ORRC ORD ACK INQ BY PROV",3)

"BLD",6006,"KRN",19.1,0)
19.1
"BLD",6006,"KRN",101,0)
101
"BLD",6006,"KRN",409.61,0)
409.61
"BLD",6006,"KRN",771,0)
771
"BLD",6006,"KRN",870,0)
870
"BLD",6006,"KRN",8989.51,0)
8989.51
"BLD",6006,"KRN",8989.52,0)
8989.52
"BLD",6006,"KRN",8994,0)
8994
"BLD",6006,"KRN","B",.4,.4)

"BLD",6006,"KRN","B",.401,.401)

"BLD",6006,"KRN","B",.402,.402)

"BLD",6006,"KRN","B",.403,.403)

"BLD",6006,"KRN","B",.5,.5)

"BLD",6006,"KRN","B",.84,.84)

"BLD",6006,"KRN","B",3.6,3.6)

"BLD",6006,"KRN","B",3.8,3.8)

"BLD",6006,"KRN","B",9.2,9.2)

"BLD",6006,"KRN","B",9.8,9.8)

"BLD",6006,"KRN","B",19,19)

"BLD",6006,"KRN","B",19.1,19.1)

"BLD",6006,"KRN","B",101,101)

"BLD",6006,"KRN","B",409.61,409.61)

"BLD",6006,"KRN","B",771,771)

"BLD",6006,"KRN","B",870,870)

"BLD",6006,"KRN","B",8989.51,8989.51)

"BLD",6006,"KRN","B",8989.52,8989.52)

"BLD",6006,"KRN","B",8994,8994)

"BLD",6006,"QUES",0)
^9.62^^
"BLD",6006,"REQB",0)
^9.611^^
"KRN",19,6546,-1)
2^4
"KRN",19,6546,0)
OR PARAM COORDINATOR MENU^CPRS Configuration (Clin Coord)^^M^5^^^^^^^^^
"KRN",19,6546,10,0)
^19.01IP^23^19
"KRN",19,6546,10,23,0)
9990^CM
"KRN",19,6546,10,23,"^")
ORRC CM MENU
"KRN",19,6546,"U")
CPRS CONFIGURATION (CLIN COORD
"KRN",19,9990,-1)
0^1
"KRN",19,9990,0)
ORRC CM MENU^Care Management Menu^^M^^^^^^^^
"KRN",19,9990,10,0)
^19.01IP^2^2
"KRN",19,9990,10,1,0)
9991^OR^1
"KRN",19,9990,10,1,"^")
ORRC ORD ACK INQ BY ORDER
"KRN",19,9990,10,2,0)
9992^PR^2
"KRN",19,9990,10,2,"^")
ORRC ORD ACK INQ BY PROV
"KRN",19,9990,10.1)
Care Mngmnt Menu
"KRN",19,9990,99)
60298,24142
"KRN",19,9990,"U")
CARE MANAGEMENT MENU
"KRN",19,9991,-1)
0^2
"KRN",19,9991,0)
ORRC ORD ACK INQ BY ORDER^ORDER ACKNOWLEDGEMENT INQUIRY BY ORDER^^R^^^^^^^^
"KRN",19,9991,1,0)
^^1^1^3060202^
"KRN",19,9991,1,1,0)
Search for ORDER ACKNOWLEDGEMENTs by ORDER number
"KRN",19,9991,25)
INQBYORD^ORRCOA
"KRN",19,9991,"U")
ORDER ACKNOWLEDGEMENT INQUIRY 
"KRN",19,9992,-1)
0^3
"KRN",19,9992,0)
ORRC ORD ACK INQ BY PROV^ORDER ACKNOWLEDGEMENT INQUIRY BY PROVIDER^^R^^^^^^^^
"KRN",19,9992,1,0)
^^1^1^3060202^
"KRN",19,9992,1,1,0)
Search for ORDER ACKNOWLEDGEMENTs by PROVIDER name
"KRN",19,9992,25)
INQBYPRO^ORRCOA
"KRN",19,9992,"U")
ORDER ACKNOWLEDGEMENT INQUIRY 
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",395,-1)
1^1
"PKG",395,0)
CARE MANAGEMENT^ORRC^Care Mgt Modules
"PKG",395,20,0)
^9.402P^^
"PKG",395,22,0)
^9.49I^1^1
"PKG",395,22,1,0)
1.0^3040116^3040426^1119
"PKG",395,22,1,"PAH",1,0)
5^3070222
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","ORRCDPT")
0^2^B27732159^B26430839
"RTN","ORRCDPT",1,0)
ORRCDPT ;SLC/MKB - Patient List for Physician Dashboard ; 19 Sept 2003 10:09 AM
"RTN","ORRCDPT",2,0)
 ;;1.0;CARE MANAGEMENT;**5**;Jul 15, 2003;Build 4
"RTN","ORRCDPT",3,0)
 ;
"RTN","ORRCDPT",4,0)
MAIN(ORY,USER,TYPE,LIST) ; -- Return patient list for dashboard
"RTN","ORRCDPT",5,0)
 ; where USER    = pointer to #200
"RTN","ORRCDPT",6,0)
 ;       TYPE    = (C)linician or (N)urse view
"RTN","ORRCDPT",7,0)
 ;       LIST(#) = <list-type>:<list-ID>:<clinic start>:<clinic stop>
"RTN","ORRCDPT",8,0)
 ; RPC = ORRC DASHBOARD PATIENTS
"RTN","ORRCDPT",9,0)
 ;
"RTN","ORRCDPT",10,0)
 D EXPDATES(.LIST) ;expand dates
"RTN","ORRCDPT",11,0)
 S USER=+$G(USER),TYPE=$$UP^XLFSTR($G(TYPE))
"RTN","ORRCDPT",12,0)
 I TYPE="N" D EN^ORRCDPT1(.ORY,USER,.LIST) Q
"RTN","ORRCDPT",13,0)
 I $O(LIST(0)) D EN1(.ORY,USER,.LIST) Q
"RTN","ORRCDPT",14,0)
 D EN(.ORY,USER)
"RTN","ORRCDPT",15,0)
 Q
"RTN","ORRCDPT",16,0)
 ;
"RTN","ORRCDPT",17,0)
EN(ORY,ORUSR) ; -- Return each patient to list on dashboard for ORUSR
"RTN","ORRCDPT",18,0)
 ; in @ORY@(#) = "Patient=<dfn>^<name>^<ssn>^<dob>^<age>"
"RTN","ORRCDPT",19,0)
 ;             = "Result=ORR:##^ORR:##^...^*ORR:##"
"RTN","ORRCDPT",20,0)
 ;             = "Task=TSK:##^TSK:##^...^*TSK:##"
"RTN","ORRCDPT",21,0)
 ;             = "Event=VST:ID^VST:ID^...^VST:ID"
"RTN","ORRCDPT",22,0)
 ;             = "Unsigned=ORD:##^...^ORD:##^DOC:##^...^DOC:##"
"RTN","ORRCDPT",23,0)
 ;             = "Notifications=1"
"RTN","ORRCDPT",24,0)
 ; RPC = ORRC PHY DASHBD PATIENTS
"RTN","ORRCDPT",25,0)
 S ORUSR=+$G(ORUSR) K ^TMP($J,"ORRCPTS"),^TMP($J,"ORRCY"),^TMP($J,"ORRCLST")
"RTN","ORRCDPT",26,0)
 D RSLT,TASK,EVNT,SIGN ;build ^TMP($J,"ORRCY",DFN,"<type>",ID)=* or null
"RTN","ORRCDPT",27,0)
 I $D(^TMP($J,"ORRCY")) D FORMAT
"RTN","ORRCDPT",28,0)
 K ^TMP($J,"ORRCY")
"RTN","ORRCDPT",29,0)
 Q
"RTN","ORRCDPT",30,0)
 ;
"RTN","ORRCDPT",31,0)
EN1(ORY,ORUSR,ORLST) ; -- Return patients on ORLST for ORUSR's dashboard
"RTN","ORRCDPT",32,0)
 ; in @ORY@(#) = "Patient=<dfn>^<name>^<ssn>^<dob>^<age>"
"RTN","ORRCDPT",33,0)
 ;             = "Result=ORR:##^ORR:##^...^*ORR:##"
"RTN","ORRCDPT",34,0)
 ;             = "Task=TSK:##^TSK:##^...^*TSK:##"
"RTN","ORRCDPT",35,0)
 ;             = "Event=VST:ID^VST:ID^...^VST:ID"
"RTN","ORRCDPT",36,0)
 ;             = "Unsigned=ORD:##^...^ORD:##^DOC:##^...^DOC:##"
"RTN","ORRCDPT",37,0)
 ;             = "Error=^<error description>"
"RTN","ORRCDPT",38,0)
 N ORI,ORX,X,ORID,ORPAT,ORTN,ORBEG,OREND,ORJ,PAT,ERRI S ORUSR=+$G(ORUSR),ERRI=0
"RTN","ORRCDPT",39,0)
 K ^TMP($J,"ORRCY"),^TMP($J,"ORRCNOTF"),^TMP($J,"ORRCPTS")
"RTN","ORRCDPT",40,0)
 S ^TMP($J,"ORRCLST")=""
"RTN","ORRCDPT",41,0)
 N ORSRV,FROM
"RTN","ORRCDPT",42,0)
 S ORSRV=$G(^VA(200,DUZ,5)) I +ORSRV>0 S ORSRV=$P(ORSRV,U)
"RTN","ORRCDPT",43,0)
 S FROM=$$GET^XPAR("USR^SRV.`"_+$G(ORSRV),"ORLP DEFAULT LIST SOURCE",1,"Q")
"RTN","ORRCDPT",44,0)
 S ORI=0 F  S ORI=$O(ORLST(ORI)) Q:ORI<1  S ORX=$G(ORLST(ORI)) D
"RTN","ORRCDPT",45,0)
 . S X=$$UP^XLFSTR($P(ORX,":")),ORID=+$P(ORX,":",2) D  Q:'$G(ORPAT(1))
"RTN","ORRCDPT",46,0)
 .. I X="X" D DEFLIST^ORQPTQ11(.ORPAT) D:$G(FROM)="M"  Q
"RTN","ORRCDPT",47,0)
 ... S ORJ=0 F  S ORJ=$O(^TMP("OR",$J,"PATIENTS",ORJ)) Q:ORJ<1  S PAT=+$G(^(ORJ,0)),^TMP($J,"ORRCY",PAT)=""
"RTN","ORRCDPT",48,0)
 .. I X="T" D TEAMPTS^ORQPTQ1(.ORPAT,ORID) Q
"RTN","ORRCDPT",49,0)
 .. S ORTN=$S(X="P":"PROV",X="S":"SPEC",X="W":"WARD",X="C":"CLIN",1:"") Q:'$L(ORTN)
"RTN","ORRCDPT",50,0)
 .. I X'="C" S ORTN=ORTN_"PTS^ORQPTQ2(.ORPAT,ORID)" D @ORTN Q
"RTN","ORRCDPT",51,0)
 .. S ORBEG=$P(ORX,":",3),OREND=$P(ORX,":",4)
"RTN","ORRCDPT",52,0)
 .. D CLINPTS^ORQPTQ2(.ORPAT,ORID,ORBEG,OREND)
"RTN","ORRCDPT",53,0)
 .. I $D(ORPAT(1)),'+$G(ORPAT(1)),ORPAT(1)'="^No appointments." S ERRI=ERRI+1,^TMP($J,"ORRCDPT_ERROR",ERRI)=ORPAT(1)
"RTN","ORRCDPT",54,0)
 . S ORJ=0 F  S ORJ=$O(ORPAT(ORJ)) Q:ORJ<1  S PAT=+$G(ORPAT(ORJ)),^TMP($J,"ORRCY",PAT)=""
"RTN","ORRCDPT",55,0)
 I $D(^TMP($J,"ORRCY")) D  ;there are patients on selected list(s)
"RTN","ORRCDPT",56,0)
 . ; build ^TMP($J,"ORRCY",DFN,"<type>",ID)=* or null:
"RTN","ORRCDPT",57,0)
 . D RSLT,TASK,EVNT,SIGN,FORMAT
"RTN","ORRCDPT",58,0)
 D ERROR(.ORY)
"RTN","ORRCDPT",59,0)
 K ^TMP($J,"ORRCY"),^TMP($J,"ORRCNOTF"),^TMP($J,"ORRCLST"),^TMP($J,"ORRCDPT_ERROR")
"RTN","ORRCDPT",60,0)
 Q
"RTN","ORRCDPT",61,0)
 ;
"RTN","ORRCDPT",62,0)
ERROR(ORY)     ; -- process errors
"RTN","ORRCDPT",63,0)
 I '$D(^TMP($J,"ORRCDPT_ERROR")) Q
"RTN","ORRCDPT",64,0)
 N I,J S I=0,J=0
"RTN","ORRCDPT",65,0)
 I '$D(ORY) S ORY=$$GETRET
"RTN","ORRCDPT",66,0)
 F  S I=$O(@ORY@(I)) Q:I'>0  S J=I
"RTN","ORRCDPT",67,0)
 S I=0
"RTN","ORRCDPT",68,0)
 F  S I=$O(^TMP($J,"ORRCDPT_ERROR",I)) Q:I'>0  S J=J+1,@ORY@(J)="Error="_^TMP($J,"ORRCDPT_ERROR",I)
"RTN","ORRCDPT",69,0)
 Q
"RTN","ORRCDPT",70,0)
 ;
"RTN","ORRCDPT",71,0)
RSLT ; -- find patients with unack'd results for ORUSR's orders
"RTN","ORRCDPT",72,0)
 N ORACK,PAT
"RTN","ORRCDPT",73,0)
 D PATS^ORRCACK(.ORACK,ORUSR) S PAT=0
"RTN","ORRCDPT",74,0)
 F  S PAT=+$O(@ORACK@(PAT)) Q:PAT<1  M ^TMP($J,"ORRCY",PAT,"R")=@ORACK@(PAT)
"RTN","ORRCDPT",75,0)
 K @ORACK
"RTN","ORRCDPT",76,0)
 Q
"RTN","ORRCDPT",77,0)
 ;
"RTN","ORRCDPT",78,0)
TASK ; -- find patients with tasks not complete
"RTN","ORRCDPT",79,0)
 N ORTSK,PAT
"RTN","ORRCDPT",80,0)
 D PATS^ORRCTSK(.ORTSK,ORUSR) S PAT=0
"RTN","ORRCDPT",81,0)
 F  S PAT=+$O(@ORTSK@(PAT)) Q:PAT<1  M ^TMP($J,"ORRCY",PAT,"T")=@ORTSK@(PAT)
"RTN","ORRCDPT",82,0)
 K @ORTSK
"RTN","ORRCDPT",83,0)
 Q
"RTN","ORRCDPT",84,0)
 ;
"RTN","ORRCDPT",85,0)
EVNT ; -- find patients that ORUSR has outstanding ADT alerts for
"RTN","ORRCDPT",86,0)
 N OREVT,PAT
"RTN","ORRCDPT",87,0)
 D PATS^ORRCEVT(.OREVT,ORUSR) S PAT=0
"RTN","ORRCDPT",88,0)
 F  S PAT=+$O(@OREVT@(PAT)) Q:PAT<1  M ^TMP($J,"ORRCY",PAT,"E")=@OREVT@(PAT)
"RTN","ORRCDPT",89,0)
 K @OREVT
"RTN","ORRCDPT",90,0)
 Q
"RTN","ORRCDPT",91,0)
 ;
"RTN","ORRCDPT",92,0)
SIGN ; -- find patients that have orders or notes ORUSR needs to sign
"RTN","ORRCDPT",93,0)
 N ORDER,ORDOC,PAT
"RTN","ORRCDPT",94,0)
 ;D PTUNS^ORRCOR(.ORDER,ORUSR) S PAT=0
"RTN","ORRCDPT",95,0)
 ;F  S PAT=+$O(ORDER(PAT)) Q:PAT<1  M ^TMP($J,"ORRCY",PAT,"U")=ORDER(PAT)
"RTN","ORRCDPT",96,0)
 D GETPTUNS^ORRCTIU(.ORDOC,ORUSR) S PAT=0
"RTN","ORRCDPT",97,0)
 F  S PAT=+$O(@ORDOC@(PAT)) Q:PAT<1  M ^TMP($J,"ORRCY",PAT,"U")=@ORDOC@(PAT)
"RTN","ORRCDPT",98,0)
 K @ORDOC
"RTN","ORRCDPT",99,0)
 Q
"RTN","ORRCDPT",100,0)
 ;
"RTN","ORRCDPT",101,0)
FORMAT ; -- Format return array ^TMP($J,"ORRCPTS") from temp array ^TMP($J,"ORRCY")
"RTN","ORRCDPT",102,0)
 N ORPT,ORN,DFN,VADM,VA,VAERR
"RTN","ORRCDPT",103,0)
 S ORY=$$GETRET
"RTN","ORRCDPT",104,0)
 S (ORPT,ORN)=0 F  S ORPT=$O(^TMP($J,"ORRCY",ORPT)) Q:ORPT<1  D
"RTN","ORRCDPT",105,0)
 . S DFN=ORPT D DEM^VADPT
"RTN","ORRCDPT",106,0)
 . S ORN=ORN+1,@ORY@(ORN)="Patient="_DFN_U_VADM(1)_U_VA("PID")_U_$$FMTHL7^XLFDT(+VADM(3))_U_VADM(4)
"RTN","ORRCDPT",107,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"R")) D ADD("Result")
"RTN","ORRCDPT",108,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"T")) D ADD("Task")
"RTN","ORRCDPT",109,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"E")) D ADD("Event")
"RTN","ORRCDPT",110,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"U")) D ADD("Unsigned")
"RTN","ORRCDPT",111,0)
 . I $G(^TMP($J,"ORRCNOTF",ORPT)) S ORN=ORN+1,@ORY@(ORN)="Notifications=1"
"RTN","ORRCDPT",112,0)
 Q
"RTN","ORRCDPT",113,0)
 ;
"RTN","ORRCDPT",114,0)
GETRET()        ;Returns the return variable pointer
"RTN","ORRCDPT",115,0)
 Q $NA(^TMP($J,"ORRCPTS"))
"RTN","ORRCDPT",116,0)
 ;
"RTN","ORRCDPT",117,0)
ADD(TYPE) ; -- Add item IDs from ^TMP($J,"ORRCY",PAT,<TYPE>) into return array
"RTN","ORRCDPT",118,0)
 N ORX,ORSUB,ORID,X,ORU
"RTN","ORRCDPT",119,0)
 S ORX=TYPE_"=",ORSUB=$E(TYPE),ORID="",ORU=""
"RTN","ORRCDPT",120,0)
 F  S ORID=$O(^TMP($J,"ORRCY",ORPT,ORSUB,ORID)) Q:ORID=""  S X=$G(^(ORID))_ORID D
"RTN","ORRCDPT",121,0)
 . I $L(ORX)+$L(X)>254 S ORN=ORN+1,@ORY@(ORN)=ORX,ORX=TYPE_"=",ORU=""
"RTN","ORRCDPT",122,0)
 . S ORX=ORX_ORU_X,ORU=U
"RTN","ORRCDPT",123,0)
 S ORN=ORN+1,@ORY@(ORN)=ORX
"RTN","ORRCDPT",124,0)
 Q
"RTN","ORRCDPT",125,0)
 ;
"RTN","ORRCDPT",126,0)
EXPDATES(LIST)  ;Expand dates for clinic appointments, if they need to be expanded.  These would be a year or quarter indicators on clinic appt lists.
"RTN","ORRCDPT",127,0)
         ;Ex. YC = current year, YC-4 = current year - 4, etc.
"RTN","ORRCDPT",128,0)
 N I,RANGE S I=0
"RTN","ORRCDPT",129,0)
 F  S I=$O(LIST(I)) Q:I'>0  D
"RTN","ORRCDPT",130,0)
 .I $P(LIST(I),":",1)="c",$L(LIST(I),":")=3 D
"RTN","ORRCDPT",131,0)
 ..S RANGE=$$RNG2FM^ORRHCU($P(LIST(I),":",3))
"RTN","ORRCDPT",132,0)
 ..S $P(LIST(I),":",3)=$P(RANGE,":",1)
"RTN","ORRCDPT",133,0)
 ..S $P(LIST(I),":",4)=$P(RANGE,":",2)
"RTN","ORRCDPT",134,0)
 Q
"RTN","ORRCDPT",135,0)
 ;
"RTN","ORRCDPT1")
0^3^B23709488^B22049351
"RTN","ORRCDPT1",1,0)
ORRCDPT1 ;SLC/MKB - Patient List for Nursing Dashboard ; 19 Sept 2003  10:10 AM
"RTN","ORRCDPT1",2,0)
 ;;1.0;CARE MANAGEMENT;**5**;Jul 15, 2003;Build 4
"RTN","ORRCDPT1",3,0)
 ;
"RTN","ORRCDPT1",4,0)
EN(ORY,ORUSR,ORLST) ; -- Return each patient in ORLSTs for ORUSR
"RTN","ORRCDPT1",5,0)
 ; where ORLST(#) = <list-type>:<list-ID>:<clinic start>:<clinic stop>
"RTN","ORRCDPT1",6,0)
 ; in @ORY@(#) = "Patient=<dfn>^<name>^<ssn>^<dob>^<age>"
"RTN","ORRCDPT1",7,0)
 ;             = "Result=ORR:##^ORR:##^...^*ORR:##"
"RTN","ORRCDPT1",8,0)
 ;             = "Task=TSK:##^TSK:##^...^*TSK:##"
"RTN","ORRCDPT1",9,0)
 ;             = "Event=VST:ID^VST:ID^...^VST:ID"
"RTN","ORRCDPT1",10,0)
 ;             = "Unverified=ORV:##^...^ORV:##"
"RTN","ORRCDPT1",11,0)
 ;             = "Nursing=ORN:##^...^!ORN:##"
"RTN","ORRCDPT1",12,0)
 ;             = "Vital=VIT:ID^...^*VIT:ID"
"RTN","ORRCDPT1",13,0)
 ;             = "Error=^<error description>"
"RTN","ORRCDPT1",14,0)
 ; RPC = ORRC NURS DASHBD PATIENTS
"RTN","ORRCDPT1",15,0)
 ;
"RTN","ORRCDPT1",16,0)
 ;
"RTN","ORRCDPT1",17,0)
 K ^TMP($J,"ORRCPTS"),^TMP($J,"ORRCY")
"RTN","ORRCDPT1",18,0)
 N ORI,ORX,X,ORID,ORBEG,OREND,ORTN,ORPAT,ORJ,PAT,ORDMIN,ORDMAX,ERRI
"RTN","ORRCDPT1",19,0)
 N ORSRV,FROM
"RTN","ORRCDPT1",20,0)
 S ORSRV=$G(^VA(200,DUZ,5)) I +ORSRV>0 S ORSRV=$P(ORSRV,U)
"RTN","ORRCDPT1",21,0)
 S FROM=$$GET^XPAR("USR^SRV.`"_+$G(ORSRV),"ORLP DEFAULT LIST SOURCE",1,"Q")
"RTN","ORRCDPT1",22,0)
 S ORUSR=+$G(ORUSR),ERRI=0 D PARAMS
"RTN","ORRCDPT1",23,0)
 S ORI=0 F  S ORI=$O(ORLST(ORI)) Q:ORI<1  S ORX=$G(ORLST(ORI)) D
"RTN","ORRCDPT1",24,0)
 . S X=$$UP^XLFSTR($P(ORX,":")),ORID=+$P(ORX,":",2) D  Q:'$G(ORPAT(1))
"RTN","ORRCDPT1",25,0)
 .. I X="X" D DEFLIST^ORQPTQ11(.ORPAT) D:$G(FROM)="M"  Q
"RTN","ORRCDPT1",26,0)
 ... S ORJ=0 F  S ORJ=$O(^TMP("OR",$J,"PATIENTS",ORJ)) Q:ORJ<1  S PAT=+$G(^(ORJ,0)),ORPAT(ORJ)=PAT
"RTN","ORRCDPT1",27,0)
 .. I X="T" D TEAMPTS^ORQPTQ1(.ORPAT,ORID) Q
"RTN","ORRCDPT1",28,0)
 .. S ORTN=$S(X="P":"PROV",X="S":"SPEC",X="W":"WARD",X="C":"CLIN",1:"") Q:'$L(ORTN)
"RTN","ORRCDPT1",29,0)
 .. I X'="C" S ORTN=ORTN_"PTS^ORQPTQ2(.ORPAT,ORID)" D @ORTN Q
"RTN","ORRCDPT1",30,0)
 .. S ORBEG=$P(ORX,":",3),OREND=$P(ORX,":",4)
"RTN","ORRCDPT1",31,0)
 .. S ORTN=ORTN_"PTS^ORQPTQ2(.ORPAT,ORID,ORBEG,OREND)" D @ORTN
"RTN","ORRCDPT1",32,0)
 .. I $D(ORPAT(1)),'+$G(ORPAT(1)),ORPAT(1)'="^No appointments." S ERRI=ERRI+1,^TMP($J,"ORRCDPT1_ERROR",ERRI)=ORPAT(1)
"RTN","ORRCDPT1",33,0)
 . S ORJ=0 F  S ORJ=$O(ORPAT(ORJ)) Q:ORJ<1  S PAT=+$G(ORPAT(ORJ)) D
"RTN","ORRCDPT1",34,0)
 .. Q:$D(^TMP($J,"ORRCY",PAT))  ;already processed
"RTN","ORRCDPT1",35,0)
 .. ; build ^TMP($J,"ORRCY",DFN,"<type>",ID)=* or null:
"RTN","ORRCDPT1",36,0)
 .. D RSLT,TASK,EVNT,UNVR,TEXT,VITL
"RTN","ORRCDPT1",37,0)
 .. S ^TMP($J,"ORRCY",PAT)="" ;return all pts on list
"RTN","ORRCDPT1",38,0)
 I $D(^TMP($J,"ORRCY")) D FORMAT
"RTN","ORRCDPT1",39,0)
 I $D(^TMP($J,"ORRCDPT1_ERROR")) D ERROR(.ORY)
"RTN","ORRCDPT1",40,0)
 K ^TMP($J,"ORRCY"),^TMP($J,"ORRCDPT1_ERROR")
"RTN","ORRCDPT1",41,0)
 Q
"RTN","ORRCDPT1",42,0)
 ;
"RTN","ORRCDPT1",43,0)
ERROR(ORY)      ;Process errors to be returned
"RTN","ORRCDPT1",44,0)
 N I,J S I=0,J=0
"RTN","ORRCDPT1",45,0)
 I '$D(ORY) S ORY=$$GETRET
"RTN","ORRCDPT1",46,0)
 F  S I=$O(@ORY@(I)) Q:I'>0  S J=I
"RTN","ORRCDPT1",47,0)
 S I=0
"RTN","ORRCDPT1",48,0)
 F  S I=$O(^TMP($J,"ORRCDPT1_ERROR",I)) Q:I'>0  S J=J+1,@ORY@(J)="Error="_^TMP($J,"ORRCDPT1_ERROR",I)
"RTN","ORRCDPT1",49,0)
 Q
"RTN","ORRCDPT1",50,0)
 ;
"RTN","ORRCDPT1",51,0)
PARAMS ; -- Return date range parameters ORDMIN(type),ORDMAX(type) for ORUSR
"RTN","ORRCDPT1",52,0)
 N SERV,ORX,X,Y,%DT S SERV=+$G(^VA(200,ORUSR,5))
"RTN","ORRCDPT1",53,0)
 F ORX="RESULT","EVENT","TEXT ORDER","UNVERIFIED","VITALS" D
"RTN","ORRCDPT1",54,0)
 . S X=$$GET^XPAR("ALL^USR.`"_ORUSR_"^SRV.`"_SERV,"ORRC NURSE "_ORX_" DATE MIN"),%DT="TX"
"RTN","ORRCDPT1",55,0)
 . D ^%DT S ORDMIN(ORX)=$S(Y>0:Y,1:"")
"RTN","ORRCDPT1",56,0)
 . S X=$$GET^XPAR("ALL^USR.`"_ORUSR_"^SRV.`"_SERV,"ORRC NURSE "_ORX_" DATE MAX"),%DT="TX"
"RTN","ORRCDPT1",57,0)
 . D ^%DT S ORDMAX(ORX)=$S(Y>0:Y,1:"")
"RTN","ORRCDPT1",58,0)
 Q
"RTN","ORRCDPT1",59,0)
 ;
"RTN","ORRCDPT1",60,0)
RSLT ; -- find PAT's results unack'd by ORUSR
"RTN","ORRCDPT1",61,0)
 N ORACK,ORDBEG,ORDEND
"RTN","ORRCDPT1",62,0)
 S ORDBEG=ORDMIN("RESULT"),ORDEND=ORDMAX("RESULT")
"RTN","ORRCDPT1",63,0)
 D IDS^ORRCACK(.ORACK,PAT,ORUSR,ORDBEG,ORDEND)
"RTN","ORRCDPT1",64,0)
 M ^TMP($J,"ORRCY",PAT,"R")=@ORACK@(PAT) K @ORACK
"RTN","ORRCDPT1",65,0)
 Q
"RTN","ORRCDPT1",66,0)
 ;
"RTN","ORRCDPT1",67,0)
TASK ; -- find PAT's due tasks
"RTN","ORRCDPT1",68,0)
 N ORTSK
"RTN","ORRCDPT1",69,0)
 D IDS^ORRCTSK(.ORTSK,PAT)
"RTN","ORRCDPT1",70,0)
 M ^TMP($J,"ORRCY",PAT,"T")=@ORTSK@(PAT) K @ORTSK
"RTN","ORRCDPT1",71,0)
 Q
"RTN","ORRCDPT1",72,0)
 ;
"RTN","ORRCDPT1",73,0)
EVNT ; -- find PAT's appointments
"RTN","ORRCDPT1",74,0)
 N OREVT,ORABEG,ORAEND
"RTN","ORRCDPT1",75,0)
 S ORABEG=ORDMIN("EVENT"),ORAEND=ORDMAX("EVENT")
"RTN","ORRCDPT1",76,0)
 D IDS^ORRCEVT(.OREVT,PAT,ORABEG,ORAEND)
"RTN","ORRCDPT1",77,0)
 M ^TMP($J,"ORRCY",PAT,"E")=@OREVT@(PAT) K @OREVT
"RTN","ORRCDPT1",78,0)
 Q
"RTN","ORRCDPT1",79,0)
 ;
"RTN","ORRCDPT1",80,0)
UNVR ; -- find PAT's unverified orders, by nursing
"RTN","ORRCDPT1",81,0)
 N ORDER,ORDBEG,ORDEND
"RTN","ORRCDPT1",82,0)
 S ORDBEG=ORDMIN("UNVERIFIED"),ORDEND=ORDMAX("UNVERIFIED")
"RTN","ORRCDPT1",83,0)
 D IDS^ORRCOR(.ORDER,PAT,"ORV",ORDBEG,ORDEND)
"RTN","ORRCDPT1",84,0)
 M ^TMP($J,"ORRCY",PAT,"U")=@ORDER@(PAT) K @ORDER
"RTN","ORRCDPT1",85,0)
 Q
"RTN","ORRCDPT1",86,0)
 ;
"RTN","ORRCDPT1",87,0)
TEXT ; -- find patients with active generic text orders
"RTN","ORRCDPT1",88,0)
 N ORDER,ORDBEG,ORDEND
"RTN","ORRCDPT1",89,0)
 S ORDBEG=ORDMIN("TEXT ORDER"),ORDEND=ORDMAX("TEXT ORDER")
"RTN","ORRCDPT1",90,0)
 D IDS^ORRCOR(.ORDER,PAT,"ORN",ORDBEG,ORDEND)
"RTN","ORRCDPT1",91,0)
 M ^TMP($J,"ORRCY",PAT,"N")=@ORDER@(PAT) K @ORDER
"RTN","ORRCDPT1",92,0)
 Q
"RTN","ORRCDPT1",93,0)
 ;
"RTN","ORRCDPT1",94,0)
VITL ; -- find patients with recent vitals
"RTN","ORRCDPT1",95,0)
 N ORVIT,ORVBEG,ORVEND
"RTN","ORRCDPT1",96,0)
 S ORVBEG=ORDMIN("VITALS"),ORVEND=ORDMAX("VITALS")
"RTN","ORRCDPT1",97,0)
 D IDS^ORRCVIT(.ORVIT,PAT,ORVBEG,ORVEND)
"RTN","ORRCDPT1",98,0)
 M ^TMP($J,"ORRCY",PAT,"V")=@ORVIT@(PAT) K @ORVIT
"RTN","ORRCDPT1",99,0)
 Q
"RTN","ORRCDPT1",100,0)
 ;
"RTN","ORRCDPT1",101,0)
FORMAT ; -- Format return array ^TMP($J,"ORRCPTS") from temp array ^TMP($J,"ORRCY")
"RTN","ORRCDPT1",102,0)
 N ORPT,ORN,DFN,VADM,VA,VAERR
"RTN","ORRCDPT1",103,0)
 S ORY=$$GETRET
"RTN","ORRCDPT1",104,0)
 S (ORPT,ORN)=0 F  S ORPT=$O(^TMP($J,"ORRCY",ORPT)) Q:ORPT<1  D
"RTN","ORRCDPT1",105,0)
 . S DFN=ORPT D DEM^VADPT
"RTN","ORRCDPT1",106,0)
 . S ORN=ORN+1,@ORY@(ORN)="Patient="_DFN_U_VADM(1)_U_VA("PID")_U_$$FMTHL7^XLFDT(+VADM(3))_U_VADM(4)
"RTN","ORRCDPT1",107,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"R")) D ADD("Result")
"RTN","ORRCDPT1",108,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"T")) D ADD("Task")
"RTN","ORRCDPT1",109,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"E")) D ADD("Event")
"RTN","ORRCDPT1",110,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"U")) D ADD("Unverified")
"RTN","ORRCDPT1",111,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"N")) D ADD("Nursing")
"RTN","ORRCDPT1",112,0)
 . I $D(^TMP($J,"ORRCY",ORPT,"V")) D ADD("Vital")
"RTN","ORRCDPT1",113,0)
 Q
"RTN","ORRCDPT1",114,0)
 ;
"RTN","ORRCDPT1",115,0)
ADD(TYPE) ; -- Add item IDs from ^TMP($J,"ORRCY",PAT,<TYPE>) into return array
"RTN","ORRCDPT1",116,0)
 N ORX,ORSUB,ORID,X,ORU
"RTN","ORRCDPT1",117,0)
 S ORX=TYPE_"=",ORSUB=$E(TYPE),ORID="",ORU=""
"RTN","ORRCDPT1",118,0)
 F  S ORID=$O(^TMP($J,"ORRCY",ORPT,ORSUB,ORID)) Q:ORID=""  S X=$G(^(ORID))_ORID D
"RTN","ORRCDPT1",119,0)
 . I $L(ORX)+$L(X)>254 S ORN=ORN+1,@ORY@(ORN)=ORX,ORX=TYPE_"=",ORU=""
"RTN","ORRCDPT1",120,0)
 . S ORX=ORX_ORU_X,ORU=U
"RTN","ORRCDPT1",121,0)
 S ORN=ORN+1,@ORY@(ORN)=ORX
"RTN","ORRCDPT1",122,0)
 Q
"RTN","ORRCDPT1",123,0)
 ;
"RTN","ORRCDPT1",124,0)
GETRET()        ;Returns the return variable pointer
"RTN","ORRCDPT1",125,0)
 Q $NA(^TMP($J,"ORRCPTS"))
"RTN","ORRCDPT1",126,0)
 ;
"RTN","ORRCOA")
0^1^B11062549^n/a
"RTN","ORRCOA",1,0)
ORRCOA ;SLC/JMH - ORDER ACKNOWLEDGMENT QUERY UTILITY ;  ; Compiled January 31, 2006 09:47:02
"RTN","ORRCOA",2,0)
 ;;1.0;CARE MANAGEMENT;**5**;Jul 15, 2003;Build 4
"RTN","ORRCOA",3,0)
 ;
"RTN","ORRCOA",4,0)
 ;
"RTN","ORRCOA",5,0)
INQBYORD ;
"RTN","ORRCOA",6,0)
 N NUM,DIR,X,Y,LIST
"RTN","ORRCOA",7,0)
 S NUM=1,LIST=""
"RTN","ORRCOA",8,0)
 W !!
"RTN","ORRCOA",9,0)
 W "This option searches the ORDER ACKNOWLEDGMENT file for entries related to a"
"RTN","ORRCOA",10,0)
 W !,"    specific order.  This can be used to help determine if a provider"
"RTN","ORRCOA",11,0)
 W !,"    has already acknowledged an order or not."
"RTN","ORRCOA",12,0)
 W !!
"RTN","ORRCOA",13,0)
 S DIR(0)="NO",DIR("A")="Enter an Order Number: "
"RTN","ORRCOA",14,0)
 S X="" F  D ^DIR Q:'X!(X="^")  D
"RTN","ORRCOA",15,0)
 .N IEN
"RTN","ORRCOA",16,0)
 .S IEN=$O(^ORA(102.4,"B",X,0))
"RTN","ORRCOA",17,0)
 .I 'IEN W !!,"There are no records in the ORDER ACKNOWLEDGMENT file that point to this ",!,"order number." Q
"RTN","ORRCOA",18,0)
 .S LIST(IEN)=""
"RTN","ORRCOA",19,0)
 Q:X="^"
"RTN","ORRCOA",20,0)
 I $D(LIST)'=11 W !!,"No records have been chosen for inclusion in the report." Q
"RTN","ORRCOA",21,0)
 D PRINTLST(.LIST,NUM)
"RTN","ORRCOA",22,0)
 Q
"RTN","ORRCOA",23,0)
 ;
"RTN","ORRCOA",24,0)
INQBYPRO ;
"RTN","ORRCOA",25,0)
 N I,J,NUM,LIST,DIC,X,Y,DIR,PROV,START,END
"RTN","ORRCOA",26,0)
 S NUM=2,LIST="",START=0,END=9999999
"RTN","ORRCOA",27,0)
 W !!
"RTN","ORRCOA",28,0)
 W "This option searches the ORDER ACKNOWLEDGMENT file for un-acknowledged orders"
"RTN","ORRCOA",29,0)
 W !,"    only by provider.  This can be used to help a provider identify those"
"RTN","ORRCOA",30,0)
 W !,"    orders that s/he still needs to take care of."
"RTN","ORRCOA",31,0)
 W !,"    Orders that have already been acknowledged will NOT show up here."
"RTN","ORRCOA",32,0)
 W !!
"RTN","ORRCOA",33,0)
 S DIC="^VA(200,",DIC(0)="AEQZ" D ^DIC
"RTN","ORRCOA",34,0)
 I 'Y Q
"RTN","ORRCOA",35,0)
 S PROV=Y
"RTN","ORRCOA",36,0)
 S I=0 F  S I=$O(^ORA(102.4,"ACK",+PROV,I)) Q:'I  D
"RTN","ORRCOA",37,0)
 .S J=0 F  S J=$O(^ORA(102.4,"ACK",+PROV,I,J)) Q:'J  D
"RTN","ORRCOA",38,0)
 ..S LIST(J)=""
"RTN","ORRCOA",39,0)
 I $D(LIST)'=11 W !!,"No records have been chosen for inclusion in the report." Q
"RTN","ORRCOA",40,0)
 D PRINTLST(.LIST,NUM)
"RTN","ORRCOA",41,0)
 Q
"RTN","ORRCOA",42,0)
 ;
"RTN","ORRCOA",43,0)
PRINTREC(IEN) ;
"RTN","ORRCOA",44,0)
 N ORDER,PROV,ACKDT
"RTN","ORRCOA",45,0)
 S ORDER=+$G(^ORA(102.4,IEN,0))
"RTN","ORRCOA",46,0)
 S PROV=$P($G(^ORA(102.4,IEN,0)),U,2)
"RTN","ORRCOA",47,0)
 S PROV=$P($G(^VA(200,PROV,0)),U)
"RTN","ORRCOA",48,0)
 S ACKDT=$$FMTE^XLFDT($P($G(^ORA(102.4,IEN,0)),U,3))
"RTN","ORRCOA",49,0)
 I $G(ORDER) W !!,"ORDER: ",ORDER,?35,"PROVIDER: ",PROV
"RTN","ORRCOA",50,0)
 I $L($G(ACKDT)) W !,?10,"ACKNOWLEDGEMENT DATE/TIME: ",ACKDT
"RTN","ORRCOA",51,0)
 Q
"RTN","ORRCOA",52,0)
 ;
"RTN","ORRCOA",53,0)
PRINTLST(LIST,NUM) ;
"RTN","ORRCOA",54,0)
 N %ZIS
"RTN","ORRCOA",55,0)
 S %ZIS="M" D ^%ZIS U IO
"RTN","ORRCOA",56,0)
 N I,ORRCQ
"RTN","ORRCOA",57,0)
 S ORRCQ=0
"RTN","ORRCOA",58,0)
 Q:'$D(LIST)
"RTN","ORRCOA",59,0)
 W @IOF
"RTN","ORRCOA",60,0)
 D HDR(NUM)
"RTN","ORRCOA",61,0)
 S I=0 F  S I=$O(LIST(I)) Q:'I!(ORRCQ)  D
"RTN","ORRCOA",62,0)
 .D PRINTREC(I)
"RTN","ORRCOA",63,0)
 .I $Y>(IOSL-3)&(IOST["C-") S ORRCQ='$$PAUSE() D
"RTN","ORRCOA",64,0)
 ..Q:ORRCQ
"RTN","ORRCOA",65,0)
 ..W @IOF
"RTN","ORRCOA",66,0)
 ..D HDR(NUM)
"RTN","ORRCOA",67,0)
 W !,"_________________________________________________",!!
"RTN","ORRCOA",68,0)
 I ORRCQ W !,"Exiting report before complete..."
"RTN","ORRCOA",69,0)
 I 'ORRCQ W !,"End of report."
"RTN","ORRCOA",70,0)
 D ^%ZISC
"RTN","ORRCOA",71,0)
 Q
"RTN","ORRCOA",72,0)
HDR(NUM) ;
"RTN","ORRCOA",73,0)
 I NUM=1 D
"RTN","ORRCOA",74,0)
 . W !,"Listing of ORDER ACKNOWLEDGEMENTS by order number"
"RTN","ORRCOA",75,0)
 . W !,"================================================="
"RTN","ORRCOA",76,0)
 I NUM=2 D
"RTN","ORRCOA",77,0)
 . W !,"Listing of ORDER ACKNOWLEDGMENTES by Provider"
"RTN","ORRCOA",78,0)
 . W !,"============================================="
"RTN","ORRCOA",79,0)
 Q 0
"RTN","ORRCOA",80,0)
PAUSE() ;
"RTN","ORRCOA",81,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT
"RTN","ORRCOA",82,0)
 S DIR(0)="E"
"RTN","ORRCOA",83,0)
 D ^DIR
"RTN","ORRCOA",84,0)
 Q $S(Y'=1:0,1:1)
"VER")
8.0^22.0
"BLD",6006,6)
^4
**END**
**END**

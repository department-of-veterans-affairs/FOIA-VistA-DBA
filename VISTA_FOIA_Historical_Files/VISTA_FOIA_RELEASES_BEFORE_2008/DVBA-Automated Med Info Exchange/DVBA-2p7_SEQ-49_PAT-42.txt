$TXT Created by HARDENBROOK,SHAWN P at DEVFEX.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 07/14/03 at 09:28
=============================================================================
Run Date: JUL 23, 2003                     Designation: DVBA*2.7*42
Package : DVBA - AUTOMATED MED INFO Priority: Mandatory
Version : 2.7        SEQ #49                    Status: Released
                  Compliance Date: AUG 06, 2003
=============================================================================

Associated patches: (v)DG*5.3*487  <<= must be installed BEFORE `DVBA*2.7*42'
                    (v)DVBA*2.7*50 <<= must be installed BEFORE `DVBA*2.7*42'

Subject: CAPRI ENHANCEMENTS

Category: 
  - Routine

Description: 
============

 This patch introduces (M)UMPs server side changes to the VistA Automated
 Medical Information Exchange (AMIE) module in support of the Compensation
 & Pension Record Interchange (CAPRI) package.  CAPRI is a Graphic User
 Interface (GUI) for the VistA Automated Medical Information Exchange (AMIE
 II) menu options.  The purpose of this patch description is to provide an
 overview of the functionality that will be delivered in this patch and to
 provide field personnel with instructions on how to acquire, install and
 implement the patch software.
  
 FUNCTIONAL OVERVIEW:
 ====================
 The CAPRI Project is a One VA cooperative effort with the objective of
 creating, testing, and nationally implementing a graphical user interface
 to enhance the retrieval and dissemination of data from the VistA AMIE II
 menu options.  This patch will install VistA modifications to support new
 CAPRI GUI functionality.  No new or enhanced functionality to the VistA
 roll-n-scroll AMIE II options are introduced in this patch, except for a
 minor change to assign an ICN when adding new patients via AMIE menu
 options.  Most of the changes in this patch will not be implemented until
 patch DVBA*2.7*45 has been released.  DVBA*2.7*45 will be an informational
 patch signifying the release of a new CAPRI GUI.
  
 TECHNICAL COMPONENTS:
 =====================
 The main intent of this patch is to install the code needed to display
 ten (10) additional reports from the VISTA A.M.I.E Medical Administration
 Menu in the CAPRI GUI.  The patch is to make existing reports functional
 in the GUI.  The following is a list of A.M.I.E reports:
  
 AMIE Report:
 ============                                    
 1. Reprint a Notice of Discharge   
 2. Regional Office 21 - day Certificate Printing 
 3. Reprint a 21 - day Certificate for the RO 
 4. Print C & P Final Report (manual) 
 5. Reprint C & P Final Report 
 6. Insufficient Exam Report  
 7. OP (Operation Report)  
 8. Full (Patient Profile MAS)    
 9. View Registration 
 10. Print New Notices of Discharge
  
  
 There are seven (7) remote procedures used to support this patch.  The
 following is a list of remote procedures and routines added by the patch:
  
 Remote Procedure:                   Routine:
 =================                   ========
 1. DVBAB REPORTS                    START^DVBAB82
    Access the above reports based on report identification number. 
  
 2. DVBAB SURGERY CASE               START^DVBAB89
    Returns a detailed summary of a specific Patient Surgery Case.
  
 3. DVBAB ORIGINAL PROCESSING DATE   XDA^DVBAB89
    Returns detailed Insufficient Reason of a specific Patient Exams.
  
 4. DVBAB MAIL INIT                  INIT^DVBAB3
    Returns the user's VistA e-mail address.
  
 5. DVBAB TEAM PATIENTS              TEAMPTS^DVBAB1
    Returns a list of patients in a team.
  
 6. DVBAB VERSION                    VERSION^DVBAB1
    Provides patch version information to CAPRI to control what version of 
    the CAPRI client is authorized to connect to the VistA server.  In 
    addition, the version of the client that is attempting to connect is 
    passed into the call and recorded in variable DVBABVR2.  The patch 
    version is stored in DVBABVR1.  Username is stored in DVBABVR3.  These 
    variables will be recoded in the error trap, should an error occur, to 
    help with debugging.
  
 7. DVBAB MPI ASSIGN ICN             MPI^DVBCPATA
    Makes call to MPIQ^MPIFAPI for assigning ICNs to new patients.
  
  
 The following existing Broker calls from CPRS were added to the CAPRI
 option context to support ad hoc display of Health Summaries:
 - ORWRP2 HS COMPONENTS
 - ORWRP2 HS COMPONENT SUBS
 - ORWRP2 HS COMP FILES
 - ORWRP2 SAVLKUP
 - ORWRP2 HS REPORT TEXT
 - ORWRP2 GETLKUP
 - ORWRP2 HS FILE LOOKUP
  
  
 SECURITY KEYS:
 ==============
 A new security key is added to the SECURITY KEY file (#19.1):  DVBA 
 CAPRI EXAM LIST EDIT.  This key will not be needed until release of 
 DVBA*2.7*45 of the CAPRI GUI.  Instructions on use of the key will be 
 provided at release of this new version.  Because it is reliant upon this 
 patch, it will not be released until sites have installed DVBA*2.7*42.
  
 A second new security key, DVBA CAPRI READ ONLY, can be assigned to
 users who should only be able to use CAPRI in read-only mode.  An example
 of such a user might be a VSO at a Regional Office. Users with the key
 will be able to browse exam request data and have all CAPRI functionality
 except the ability to enter new patients or add/change information in
 VistA.  As above, this key only works in CAPRI version DVBA*2.7*45 or 
 later.
  
  
 NEW FILES:
 ==========
 396.15 - CAPRI DIVISION EXAM LIST FILE has been added to support the 
 ability of MAS to create custom examination lists, informational messages 
 for divisions and informational messages for exam types.  This file will 
 not be used until release of DVBA*2.7*45.  Instructions will be provided
 in that patch description.
  
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
          
        <tab>;;2.7;AMIE;**[patch list]**;Apr 10, 1995
          
                          CHECK^XTSUMBLD results
     Routine name   Before Patch       After Patch         Patch List
     ============   ============       ===========         ==========
     DVBAADRP           10743892          12519220            17,42
     DVBAB1             11394685          14841059         35,37,50,42
     DVBAB2             11422836          11564622            35,42
     DVBAB3              2390164           2599304            35,42
     DVBAB57             7035974           6963416            35,42
     DVBAB70            21756045          21840767            35,42
     DVBAB82                 N/A          13747815             42
     DVBAB89                 N/A           1916564             42
     DVBACRRR            7192044           7266979             42
     DVBADSNT           14778609          15120743         1,14,17,42
     DVBASRP1                N/A           2907393             42
     DVBCBUL1            6490294           6531060             42
     DVBCBULL           11261928          11640715             42
     DVBCLABR            4706609           4583457            11,42
     DVBCPATA            6283044           6398643         1,23,40,42
     DVBCROPN           13604559          14177332             42
     DVBCRPRT            8920487           8978263            31,42
          
     Number of Routines = 17
  
  
 Installation Instructions:
 ==========================
  
 VistA:
 This patch can be loaded with users in the system.  Installation
 will take less than 2 minutes.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan
     menu to unload the KIDS distribution included with this message
  
 2.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 3.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter DVBA*2.7*42):
  
     a.  Backup a Transport Global - this option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any other changes such as DDs or templates.
     b.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
     c.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
         the transport global.
     d.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
 4.  Use the Install Package(s) option and select the package DVBA*2.7*42.
     
 5.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
     Install? YES//", respond  NO.
  
 6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?',
     respond NO.
  
 7.  When prompted "Want to DISABLE Scheduled Options, Menu Options and
     Protocols? YES//', respond NO.
  
  
 POST-INSTALLATION ACTIVITIES:
 ============================= 
 USER ACCESS TO CAPRI
 CAPRI users without the "@" sign and programmer access will have to be
 assigned an option context.  The security aspect of CAPRI is that it looks
 for option context DVBA CAPRI GUI in the user's menu structure (part of a
 primary menu or on a secondary menu).  So if the option is not assigned in
 some fashion, the user will get a message that they do not have access to
 CAPRI.
  
 There are two ways to grant a user access to CAPRI.
  
    * You can add CAPRI GUI Broker [DVBA CAPRI GUI] as an ITEM in the
      OPTION file on a user's assigned primary menu.
  
    * You can place CAPRI GUI Broker [DVBA CAPRI GUI] on a user's
      individual secondary menu.
  
 The current GUI release of CAPRI is "DVBA_2_7_41C.EXE".  This version of 
 the GUI does *not* use the functions modified by this patch.  A newer 
 version of CAPRI will be released approximately 1 month following 
 release of this patch.  This will give field sites time to install the
 patch and ensure consistency nation-wide.  Once installation has been 
 confirmed, an informational message will be sent out and the newer 
 version of the CAPRI GUI placed on VHA OI FTP servers and released by 
 VBA Hines to RO IRM Departments.  The latest released version of the CAPRI
 GUI is always available on the VHA OI FTP servers.
  
  
 SPECIAL NOTE ABOUT VHA C&P CLINICS AND CAPRI SOFTWARE:
 ======================================================
 While the CAPRI package was originally designed specifically to meet the 
 needs of VBA, its use has expanded to multiple user groups.  Some VHA C&P
 clinics already use CAPRI to perform the functions that it supports -
 reports, entering exam requests, etc.  Other clinics have reported that
 they cannot get access to CAPRI at their site. This should not be the
 case.  Users within VHA C&P clinics who have access to AMIE should be
 provided the latest CAPRI GUI release as found on OI FTP servers and given
 the DVBA CAPRI GUI option context, required by the GUI.
  
 Upcoming patch DVBA*2.7*45 will release a significantly enhanced version
 of the CAPRI GUI which provides functionality for customized exam lists to
 be managed by the VHA facility (most likely by a C&P clerk or MAS ADPAC).
 There is no prohibition against installing CAPRI in VHA clinics.  In fact,
 this is encouraged and is expected for those users who also use AMIE
 roll-n-scroll options.

Routine Information:
====================

Routine Name:
  - DVBAB82


Routine Checksum:

Routine Name:
  - DVBAB89


Routine Checksum:

Routine Name:
  - DVBACRRR


Routine Checksum:

Routine Name:
  - DVBCLABR


Routine Checksum:

Routine Name:
  - DVBASRP1


Routine Checksum:

Routine Name:
  - DVBAB2


Routine Checksum:

Routine Name:
  - DVBAB3


Routine Checksum:

Routine Name:
  - DVBCBULL


Routine Checksum:

Routine Name:
  - DVBCRPRT


Routine Checksum:

Routine Name:
  - DVBCROPN


Routine Checksum:

Routine Name:
  - DVBCBUL1


Routine Checksum:

Routine Name:
  - DVBAB1


Routine Checksum:

Routine Name:
  - DVBAB57


Routine Checksum:

Routine Name:
  - DVBCPATA


Routine Checksum:

Routine Name:
  - DVBAADRP


Routine Checksum:

Routine Name:
  - DVBAB70


Routine Checksum:

Routine Name:
  - DVBADSNT


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : HARDENBROOK,SHAWN              Date Entered : FEB 13, 2002
Completed By: FAIN,ZACHARY                  Date Completed: JUL 22, 2003
Released By : BURTS,WANDA                   Date Released : JUL 23, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by CURTIS,RICHARD L at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 02/01/06 at 13:05
Run Date: MAR 30, 2006                     Designation: SD*5.3*472
Package : SD - SCHEDULING                     Priority: Mandatory
Version : 5.3       SEQ #379                    Status: Released
                  Compliance Date: APR 30, 2006
=============================================================================

Associated patches: (v)SD*5.3*345  <<= must be installed BEFORE `SD*5.3*472'
                    (v)SD*5.3*459  <<= must be installed BEFORE `SD*5.3*472'

Subject: AMBCARE DATA INTO AUSTIN - POW STATUS REJECTS

Category: 
  - Routine

Description:
============

 This patch fixes a problem that was recently reported where numerous 
 encounters were being rejected by Austin for error code 315, POW status 
 is invalid.
  
 ASSOCIATED REMEDY TICKET:
 =========================
 HD123213 - Ambcare Data into Austin - POW Status Rejects
   Duplicates: HD123208 - Ambcare Data into Austin - POW Status Rejects
               HD123211 - Ambcare Data into Austin - POW Status Rejects
               HD123214 - Ambcare Data into Austin - POW Status Rejects
               HD123215 - Ambcare Data into Austin - POW Status Rejects
  
 ASSOCIATED E3R(S):
 ==================
 N/A
  
 PARTICIPATING TEST SITES:
 ========================
 CONNECTICUT HCS       
 BAY PINES, FL
  
 REMEDY TICKET OVERVIEW:
 =======================
 HD123213 - Ambcare Data into Austin - POW Status Rejects
   Duplicates: HD123208 - Ambcare Data into Austin - POW Status Rejects
               HD123211 - Ambcare Data into Austin - POW Status Rejects
               HD123214 - Ambcare Data into Austin - POW Status Rejects
               HD123215 - Ambcare Data into Austin - POW Status Rejects
  
   Problem:
   --------
   Records error with error code 315, POW status is invalid.
   POW Status field cannot be null - field can only equal Y, N, U or "".
   Emergency patch SD*5,3*459 inadvertently set the field to null instead
   of "". It has been verified by Austin that, when applicable, the other
   possible values are being received correctly.
  
   Resolution:
   -----------
   Routines SCDXMSG1 and SCMSVUT0 have been modified to ensure the proper
   editing of the POW status of the ZPD segment.  Both, when the ZPD
   segment exceeds 245 characters in an array form, and when it does not
   exceed 245 characters in a variable form.
   Routine SCMSVZPD will also be modified to save off the array that is
   passed in before the validation logic is called.  This array equals
   the ZPD segment of the HL7 file.  Upon returning from the validation
   logic, the array will then be restored to its original value, so that
   any quotes are still contained in the array, as they should be.
  
   TECHNICAL:
   =========
   The input parameter was originally being sent as a string 
   (variable VAFZPD) when the validation logic was called.
   This string equaled the ZPD segment of the HL7 file.
   Part of the validation logic strips out any quotes contained in the
   string that is passed in. Prior to patch SD*5.3*459, this was not a 
   problem because the value of the string that was passed in was not
   changed.  One of the changes made in that patch was to change the
   string being passed in to an array. When an array is used as an input
   parameter its value is changed upon return.  In this case, the array 
   is returned with all quotes stripped out.  This causes the problem
   because the POW Status field can only equal Y, N, U or "".  It cannot
   equal null.  
  
   Special Instructions:
   =====================
   SEE POST INSTALL INSTRUCTIONS FOR RETRANSMITTING RECORDS IN ERROR.
  
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;5.3;Scheduling;**[patch list]**;Aug 13, 1993
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  SCDXMSG1               9701623              9661630       44,55,70,77,85
                                                         66,143,142,162,172
                                                        180,239,245,254,293
                                                            325,387,459,472
  SCMSVUT0               5132358              5200031      44,55,66,132,245
                                                            254,293,345,472
  SCMSVZPD               2233492              2291919     44,66,142,459,472
  
  
  
  
                             CHECK1^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  SCDXMSG1              73573134             73524153       44,55,70,77,85
                                                         66,143,142,162,172
                                                        180,239,245,254,293
                                                            325,387,459,472
  SCMSVUT0              40255340             42772980      44,55,66,132,245
                                                            254,293,345,472
  SCMSVZPD               6520119              6808862     44,66,142,459,472
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 This patch can be installed during normal work hours.  Users do not need 
 to be off the system.
  
 Installation should take less than 2 minutes.
  
 1.  LOAD TRANSPORT GLOBAL
     ---------------------
     Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
  
 2.  START UP KIDS
     -------------
     Start up the Kernel Installation and Distribution System Menu
     [XPD MAIN]
  
           Edits and Distribution ...
           Utilities ...
           Installation ...
  
     Select Kernel Installation & Distribution System Option:  INStallation
                                                               ---
  
     1     Load a Distribution
     2     Verify Checksums in Transport Global
     3     Print Transport Global
     4     Compare Transport Global to Current System
     5     Backup a Transport Global
     6     Install Package(s)
           Restart Install of Package(s)
           Unload a Distribution
  
 3.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter SD*5.3*472):
  
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch.  It will NOT
         backup any other changes such as DDs or templates.
  
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch
         (routines, DDs, templates, etc.).
  
     c.  Verify Checksums in Transport Global - This option will ensure
         the integrity of the routines that are in the transport global.
  
     d.  Print Transport Global - This option will allow you to view
         the components of the KIDS build.
  
 4.  Use the Install Package(s) option and select the package SD*5.3*472.
  
     a.  When prompted "Want KIDS to INHIBIT LOGONS during the
         install? YES//" respond NO.
  
     b.  When prompted "Want to DISABLE Scheduled Options, Menu Options,
         and Protocols? YES//" respond YES.
  
         1) When prompted "Enter options you wish to mark as "Out of
            Order":" enter the following option:
  
            Appointment Management  [SDAM APPT MGT]
            Ambulatory Care Nightly Transmission to NPCDB
            [SCDX AMBCAR NIGHTLY XMIT]
  
         2) When prompted "Enter protocols you wish to mark as "Out of
            Order":" just press <Return>.
  
   POST INSTALL INSTRUCTIONS:
   =========================
   Any existing encounters that have errored for error code 315, POW
   status is invalid, can be flagged for retransmission by running menu
   option:  Retransmit Selected Error Code  [SCDX AMBCAR RETRANS ERROR].
   At the prompt - Select TRANSMITTED OUTPATIENT ENCOUNTER ERROR CODE:
   enter 315 and then enter the applicable date range when prompted.  This
   will flag all applicable encounters for retransmission and they will be
   automatically transmitted the next time the Ambulatory Care Nightly
   Transmission is run.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: SCDXMSG1
    Before: B73454868  After: B73524153  **44,55,70,77,85,66,143,142,162,
                                          172,180,239,245,254,293,325,387,
                                          459,472**
Routine Name: SCMSVUT0
    Before: B40255340  After: B42772980  **44,55,66,132,245,254,293,345,472**
Routine Name: SCMSVZPD
    Before:  B4250064  After:  B6808862  **44,66,142,459,472**

=============================================================================
User Information:
Entered By  : CURTIS,RICHARD                Date Entered  : DEC 12, 2005
Completed By: BOWEN,MARY JANE               Date Completed: MAR 29, 2006
Released By : CANNEDY,JOELLEN               Date Released : MAR 30, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

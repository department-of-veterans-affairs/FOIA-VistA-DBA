$TXT Created by NAPOLIELLO,GREG at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Thursday, 10/27/05 at 10:52
=============================================================================
Run Date: DEC 12, 2005                     Designation: PSO*7*218
Package : PSO - OUTPATIENT PHARMACY           Priority: Mandatory
Version : 7       SEQ #199                      Status: Released
                  Compliance Date: JAN 12, 2006
=============================================================================

Associated patches: (v)PSO*7*174   <<= must be installed BEFORE `PSO*7*218'
                    (v)PSO*7*186   <<= must be installed BEFORE `PSO*7*218'

Subject: PREVENT REFILL DELETE WHEN IN PROCESS BY EXT DISPENSE

Category: 
  - Routine

Description:
============

 This patch will prevent an error that occurs when a prescription refill 
 is deleted while the refill is pending an HL7 Release message from an 
 external machine.
  
  
 Remedy Overview:
 ================
 HD90278  Partially deleted refill needs cleanup
  
 Problem:
 --------
 A refill is sent to an external dispense machine, then that refill is 
 deleted prior to the dispense machine completing the Release process via 
 an HL7 message.   When this HL7 Release message arrives and is processed, 
 it updates the REFILL multiple field 52, in the PRESCRIPTION file #52, 
 with the release information.  This creates an incomplete refill record, 
 with key fields missing.
  
  
 Resolution:
 -----------
 Do not allow the delete to occur when this scenario occurs and display a 
 warning message on how to proceed.  Warning message shown below:
  
   ** You cannot delete a refill that is pending Release from an
   ** External Dispense Machine!
  
      Wait for it to be released from the External Dispense Machine,
      then use the 'Return to Stock' option before attempting to delete!
  
  
  
 Associated Remedy Ticket(s):
 ===========================
 HD90278       Partially deleted refill needs cleanup
    Duplicates: HD101257
  
  
 Associated E3R(s):
 ==================
 N/A
  
  
 Test Sites:
 ===========
 El Paso, TX
 Oklahoma City, OK
 San Juan, PR
 Minneapolis, MN 
  
  
 Routine Summary
 ===============
 The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;7.0;OUTPATIENT PHARMACY;**[patch list]**;DEC 1997
  
   Using new logic for Integrity Checking tools:
                         CHECK1^XTSUMBLD results
 Routine name      Before Patch      After Patch        Patch List
 ============      ============      ===========     ================
 PSOUTL                62525989         70215755     1,21,126,174,218
 PSOUTLA1              44704112         47429412           35,186,218
  
  
                          CHECK^XTSUMBLD results
 Routine name       Before Patch      After Patch        Patch List
 ============       ============      ===========     ================
 PSOUTL                 28342614         29579800     1,21,126,174,218
 PSOUTLA1               21916991         22226315           35,186,218
  
           Total number of routines - 2
  
  
 Installation Instructions:
 ==========================
 It is recommended that this patch be installed after normal business 
 hours while no Outpatient Pharmacy users are processing orders.
  
 Installation will take less than 2 minutes.
  
 1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2. From the Kernel Installation & Distribution System menu, select the 
    Installation menu.
  
 3. From this menu, you may select to use the following options: (when     
    prompted for INSTALL NAME, enter PSO*7.0*218)
  
      a.  Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
      
      b.  Print Transport Global - This option will allow you to view
          the components of the KIDS build.
      
      c.  Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this 
          patch is installed.  It compares all components of this patch
          (routines, DD's, templates, etc.).
      
      d.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as DD's or templates.
  
  
 4. Use the Install Package(s) option and select the package      
    PSO*7.0*218. 
  
 5. When Prompted "Want KIDS to INHIBIT LOGONs during the install? 
    YES//" respond NO. 
  
 6. When Prompted "Want to DISABLE Scheduled Options, Menu Options, and 
    Protocols? YES//" respond NO.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSOUTL
    Before: B62525989  After: B70215755  **1,21,126,174,218**
Routine Name: PSOUTLA1
    Before: B44704112  After: B47429412  **35,186,218**

=============================================================================
User Information:
Entered By  : NAPOLIELLO,GREG               Date Entered  : AUG 29, 2005
Completed By: CROSSMAN,PAM                  Date Completed: DEC 12, 2005
Released By : PARRIS,CHRIS                  Date Released : DEC 12, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

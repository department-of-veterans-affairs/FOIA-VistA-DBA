$TXT Created by CLARKE,kyle e at DEVDEN.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 09/13/04 at 13:05
=============================================================================
Run Date: DEC 06, 2004                     Designation: XOBS*1*2
Package : XOBS - VISTALINK SECURITY           Priority: Mandatory
Version : 1         SEQ #1                      Status: Released
                  Compliance Date: JAN 06, 2005
=============================================================================


Subject: Fix Control Chars in Introductory Text

Category: 
  - Routine

Description:
============

 Description:
 ===========
  
 1. This patch fixes the following issues:
  
   - If control characters are present in the system Introductory Text when
     the user attempts to log on, the following exception is generated on
     the java side, preventing logon:
     
     org.xml.sax.SAXParseException: Illegal XML character:  &#x1b;. 
     at gov.va.med.foundations.security.vistalink.VistaLoginModule.
     getIntroductoryTextAndSetupInfo
  
     Fixed by adding a control character filter to the Introductory Text.
  
   - During login, any direct WRITEs by code attached to the login
     write to the TCP/IP socket, disrupting the communication sequence and
     resulting in a login error. Fixed by USEing the null device in
     critical areas during login.
  
   - Change XML fault schema name returned in the XML header of VistALink
     fault messages, and stored at tag SCHERROR^XOBSCAV, to match internal
     project design specifications. At the current time, XML schema names 
     returned in messages are not used for computable purposes.
  
 Associated NOIS:
 ================
  ALT-0704-21615
  CAH-0504-30685
  IND-0604-40872
  WPB-0304-30390
  
 Test Sites:
 ===========
  Altoona
  Northern California HCS
  San Francisco
  West Palm Beach
  
 M Routine Summary:
 ==================
  
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;1.0;VistaLink Security;**[patch list]**;Aug 20, 2003
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  XOBSCAV               13477564             13776375              2
  XOBSCAV1              25548722             26582284              2
  
 M Installation Instructions:
 ============================
  
 >>>Stop VistALink users
 >>>Roll and Scroll and RPC Broker Users may remain on the system.
 >>>TaskMan does not need to be put into a wait state.
 >>>If you accept a slight risk of jobs getting a CLOBER/EDITED error
 >>>VistALink/Care Management users may remain running. Otherwise stop all
 >>>other VistALink/Care Management jobs on the system.
  
  1. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
     option will load the KIDS package onto your system.
  
  2. None of the routines in the VistALink package have been recommended
     for routine mapping.
  
  3. From the Kernel Installation and Distribution System (KIDS) Menu, 
     select the Installation menu.
  
  4. From this menu, you may elect to use the following options (when
     prompted for INSTALL NAME, enter XOBS*1*2):
  
        a. Verify Checksums in Transport Global - this option will allow
           you to ensure the integrity of the routines that are in the
           transport global. 
        b. Compare Transport Global to Current System  - this option will
           allow you to view all changes that will be made when the patch
           is installed.  It compares all components of the patch
           (routines, DDs, templates, etc.).
        c. Print Transport Global - this option will allow you to view the
           components of the KIDS build.
        d. Backup a Transport Global - this option will create a backup
           message of any routines exported with the patch.  It will NOT
           backup any other changes such as DDs or templates. 
  
  5. During the installation, do not run any VistALink-based Client/Server
     software (e.g., Care Management). No VistALink-based client/server
     software should be running while installing this patch on the server.
     You can identify these jobs by checking the system status and
     verifying if any XOBTCPC routines are running (i.e., VistALink
     Handler). If you find any of these jobs running on the system, notify
     users to logoff or FORCEX the jobs. Active users may get NOSOURCE or
     CLOBBER errors.
  
  6. Stop the VistALink Listener on the server. Follow your normal 
     procedures to stop the VistALink Listener:
     
     a. If your VistALink listener runs via VMS TCP Services, use VMS TCP
        Services to stop the listener.
        
     b. Or, if your VistALink listener runs within M (i.e., not via VMS TCP
        Services), use the Foundations menu to stop the listener.
        
  7. Use the Install Package(s) option and select the package XOBS*1*2.
  
  8. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
     YES//',respond NO. It is *NOT* necessary to inhibit users' login into
     the system when installing this patch.
  
  9. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond NO.  
   
 10. Restart the VistALink Listener on the Server. Follow your normal 
     procedures to start the listener.
  
     a. If your VistALink listener runs via VMS TCP Services, use VMS TCP
        Services to start the listener.
        
     b. Or, if your VistALink listener is started within M (i.e., not via 
        VMS TCP Services), use the Foundations menu to start the listener.

Routine Information:
====================

Routine Name:
  - XOBSCAV


Routine Checksum:

Routine Name:
  - XOBSCAV1


Routine Checksum:

=============================================================================
User Information:
Entered By  : CLARKE,KYLE E                 Date Entered  : APR 15, 2004
Completed By: DAVISSON,GARY N               Date Completed: DEC 02, 2004
Released By : LASHLEY,ANTHONY               Date Released : DEC 06, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released RT*2*36 SEQ #35
Extracted from mail message
**KIDS**:RT*2.0*36^

**INSTALL NAME**
RT*2.0*36
"BLD",4905,0)
RT*2.0*36^RECORD TRACKING^0^3030821^y
"BLD",4905,1,0)
^^2^2^3030820^
"BLD",4905,1,1,0)
When printing the CONSOLIDATED HEALTH RECORD INQUIRY report, dates are 
"BLD",4905,1,2,0)
printed in internal format, but should be printed in external format.
"BLD",4905,4,0)
^9.64PA^^
"BLD",4905,"KRN",0)
^9.67PA^8989.52^19
"BLD",4905,"KRN",.4,0)
.4
"BLD",4905,"KRN",.4,"NM",0)
^9.68A^^
"BLD",4905,"KRN",.401,0)
.401
"BLD",4905,"KRN",.402,0)
.402
"BLD",4905,"KRN",.403,0)
.403
"BLD",4905,"KRN",.5,0)
.5
"BLD",4905,"KRN",.84,0)
.84
"BLD",4905,"KRN",3.6,0)
3.6
"BLD",4905,"KRN",3.8,0)
3.8
"BLD",4905,"KRN",9.2,0)
9.2
"BLD",4905,"KRN",9.8,0)
9.8
"BLD",4905,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",4905,"KRN",9.8,"NM",1,0)
RTNQ2^^0^B19863931
"BLD",4905,"KRN",9.8,"NM",2,0)
RTNQ21^^0^B10190251
"BLD",4905,"KRN",9.8,"NM",3,0)
RTNQ4^^0^B13953744
"BLD",4905,"KRN",9.8,"NM","B","RTNQ2",1)

"BLD",4905,"KRN",9.8,"NM","B","RTNQ21",2)

"BLD",4905,"KRN",9.8,"NM","B","RTNQ4",3)

"BLD",4905,"KRN",19,0)
19
"BLD",4905,"KRN",19.1,0)
19.1
"BLD",4905,"KRN",101,0)
101
"BLD",4905,"KRN",409.61,0)
409.61
"BLD",4905,"KRN",771,0)
771
"BLD",4905,"KRN",870,0)
870
"BLD",4905,"KRN",8989.51,0)
8989.51
"BLD",4905,"KRN",8989.52,0)
8989.52
"BLD",4905,"KRN",8994,0)
8994
"BLD",4905,"KRN","B",.4,.4)

"BLD",4905,"KRN","B",.401,.401)

"BLD",4905,"KRN","B",.402,.402)

"BLD",4905,"KRN","B",.403,.403)

"BLD",4905,"KRN","B",.5,.5)

"BLD",4905,"KRN","B",.84,.84)

"BLD",4905,"KRN","B",3.6,3.6)

"BLD",4905,"KRN","B",3.8,3.8)

"BLD",4905,"KRN","B",9.2,9.2)

"BLD",4905,"KRN","B",9.8,9.8)

"BLD",4905,"KRN","B",19,19)

"BLD",4905,"KRN","B",19.1,19.1)

"BLD",4905,"KRN","B",101,101)

"BLD",4905,"KRN","B",409.61,409.61)

"BLD",4905,"KRN","B",771,771)

"BLD",4905,"KRN","B",870,870)

"BLD",4905,"KRN","B",8989.51,8989.51)

"BLD",4905,"KRN","B",8989.52,8989.52)

"BLD",4905,"KRN","B",8994,8994)

"BLD",4905,"QUES",0)
^9.62^^
"BLD",4905,"REQB",0)
^9.611^1^1
"BLD",4905,"REQB",1,0)
RT*2.0*33^1
"BLD",4905,"REQB","B","RT*2.0*33",1)

"MBREQ")
0
"PKG",72,-1)
1^1
"PKG",72,0)
RECORD TRACKING^RT^Medical Records and Film Jacket Tracking
"PKG",72,20,0)
^9.402P^^
"PKG",72,22,0)
^9.49I^1^1
"PKG",72,22,1,0)
2.0^2911022
"PKG",72,22,1,"PAH",1,0)
36^3030821
"PKG",72,22,1,"PAH",1,1,0)
^^2^2^3030821
"PKG",72,22,1,"PAH",1,1,1,0)
When printing the CONSOLIDATED HEALTH RECORD INQUIRY report, dates are 
"PKG",72,22,1,"PAH",1,1,2,0)
printed in internal format, but should be printed in external format.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","RTNQ2")
0^1^B19863931
"RTN","RTNQ2",1,0)
RTNQ2 ;MJK/TROY ISC;Record Inquiry Routine ; 5/4/87  9:57 AM ;
"RTN","RTNQ2",2,0)
 ;;2.0;Record Tracking;**32,36**;10/22/91 
"RTN","RTNQ2",3,0)
 I '$D(RTAPL) D APL2^RTPSET D NEXT:$D(RTAPL) K RTAPL,RTSYS Q
"RTN","RTNQ2",4,0)
NEXT S RTA=+RTAPL D ASK^RTB K RTA G Q:$D(RTESC),RTNQ2:Y<0 S RTE=X
"RTN","RTNQ2",5,0)
 S RTRD(1)="All^display all volumes for all record types",RTRD(2)="Type^display all volumes for a specific record type",RTRD(3)="Volume^display specific volumes",RTRD("B")=1,RTRD(0)="S"
"RTN","RTNQ2",6,0)
 S RTRD("A")="Indicate what information to display: " D SET^RTRD K RTRD G Q:$E(X)="^" S RTINFO=$E(X)
"RTN","RTNQ2",7,0)
 I RTINFO="T" S DIC(0)="IAEMQ",DIC="^DIC(195.2,",DIC("S")="I $P(^(0),U,3)=+RTAPL,$D(^RT(""AT"",Y,RTE))",DIC("A")="Select Record Type: " D ^DIC K DIC G Q:Y<0 S RTINFO="T^"_+Y
"RTN","RTNQ2",8,0)
 I RTINFO="V" D VOL G Q:'$D(RTINFO)
"RTN","RTNQ2",9,0)
 S RTPGM="START^RTNQ2",RTVAR="RTE^RTINFO^RTAPL" D ZIS^RTUTL G Q:POP D START G NEXT
"RTN","RTNQ2",10,0)
 ;
"RTN","RTNQ2",11,0)
START U IO S RTPAGE=0,RTFL="RECS",RTUTL=0 K RT,^TMP($J,"RTNQ") I '$D(IOSL)!('$D(IOF)) S IOP="" D ^%ZIS K IOP
"RTN","RTNQ2",12,0)
 D TYPE,HD I RTINFO["V" S X=$P(RTINFO,"^",2,99) F I=1:1 Q:'$P(X,"^",I)  S RT(+$P(X,"^",I))=""
"RTN","RTNQ2",13,0)
 I RTINFO["T" S T=+$P(RTINFO,"^",2) F RT=0:0 S RT=$O(^RT("AT",T,RTE,RT)) Q:'RT  S RT(RT)=""
"RTN","RTNQ2",14,0)
 I RTINFO["A" S A=+RTAPL F RT=0:0 S RT=$O(^RT("AA",A,RTE,RT)) Q:'RT  S RT(RT)=""
"RTN","RTNQ2",15,0)
 G Q:$D(RT)<10 K RTL F RT=0:0 S RT=$O(RT(RT)) Q:'RT  K RT(RT) I $D(^RT(RT,0)) S RT0=^(0) I $D(RTO(+$P(RT0,"^",3))) S RT(RT)=RT0 D REC
"RTN","RTNQ2",16,0)
 S C=0,RTESC="" K R F O=0:0 S O=$O(RTL(O)) Q:'O  F V=0:0 S V=$O(RTL(O,V)) Q:'V  S C=C+1,R(C)=^TMP($J,"RTNQ",RTL(O,V),1) D WRITE:C=3 G Q:RTESC="^"
"RTN","RTNQ2",17,0)
 D WRITE:C,^RTNQ21:RTESC'["^"
"RTN","RTNQ2",18,0)
Q K C,S,RTVAR,RTPGM,RTQ,RTWND,RTDT,R,RT,RT0,RTA,RTE,RTESC,RTFL,RTINFO,RTL,RTO,RTPAGE,RTUTL,^TMP($J,"RTNQ") D CLOSE^RTUTL
"RTN","RTNQ2",19,0)
 K I,Y,DUOUT,DIC,DIY,N,A,F,O,X1,%I,%H,POP,X Q
"RTN","RTNQ2",20,0)
VOL K RTY S RTDC("S")="I $P(^(0),U,4)="_+RTAPL,RTSEL="S",Y=RTE D NAME^RTB S RTSEL("A")="Select "_Y_"'s Record" D ^RTUTL2 K RTSEL I $D(RTY) F I=1:1 Q:'$D(RTY(I))  S $P(RTINFO,"^",I+1)=RTY(I)
"RTN","RTNQ2",21,0)
 K:'$D(RTY) RTINFO K RT1,RTC,RTY,RTDC,RTSEL Q
"RTN","RTNQ2",22,0)
 ;
"RTN","RTNQ2",23,0)
HD S RTESC="" I RTPAGE,IOST["C-" R !!,"Press RETURN to continue or '^' to stop: ",RTESC:DTIME S:'$T RTESC="^" Q:RTESC["^"
"RTN","RTNQ2",24,0)
 S RTPAGE=RTPAGE+1,X1=$S($D(^DIC(195.1,+RTAPL,"HD")):^("HD"),1:"Record")_" Inquiry" D PTHD^RTUTL2,EQUALS^RTUTL3
"RTN","RTNQ2",25,0)
 Q
"RTN","RTNQ2",26,0)
 ;
"RTN","RTNQ2",27,0)
REC S Y=RT0 Q:'$D(^RT(RT,"CL"))  S RTCL=^("CL"),R("BC")=$S($P(RTCL,"^",15)="y":"Barcode",1:"Non-barcode"),T=+$P(Y,"^",3),V=+$P(Y,"^",7),R("DES")=$P(Y,"^",12),Y=$P(Y,"^",11),C=$P(^DD(190,11,0),"^",2) D Y^DIQ S R("R")=Y
"RTN","RTNQ2",28,0)
 S (H,H("P"))="" I $D(^RTV(195.9,+$P(RT0,"^",6),0)) S Y=^(0),H("P")=$P(Y,"^",7),Y=$P(Y,"^") D NAME^RTB S H=Y
"RTN","RTNQ2",29,0)
 S Y=RTCL,D=$P(Y,"^",6)_".00000",D=$TR($$FMTE^XLFDT($E(D,1,12),"5F")," /","0-")
"RTN","RTNQ2",30,0)
 S U1=$S($D(^VA(200,+$P(Y,"^",7),0)):$P(^(0),"^"),1:"UNKNOWN")
"RTN","RTNQ2",31,0)
 S Y=+$P(Y,"^",8),C=$P(^DD(190,108,0),"^",2) D Y^DIQ S M=Y
"RTN","RTNQ2",32,0)
 S R("I")="" I $D(^RT(RT,"I")),^("I"),DT>^("I") S R("I")=$S(M["TRANSFER TO":"** Transferred **",1:"*** Inactive ***")
"RTN","RTNQ2",33,0)
 S (B,B("P"))="" I $D(^RTV(195.9,+$P(RTCL,"^",5),0)) S Y=^(0),B("P")=$P(Y,"^",7),Y=$P(Y,"^") D NAME^RTB S B=Y
"RTN","RTNQ2",34,0)
 S Y=$P(RTCL,"^",14) D BOR^RTB:Y S R("PROV")=Y
"RTN","RTNQ2",35,0)
 S RTUTL=RTUTL+1,RTL(+RTO(T),999-V)=RTUTL,^TMP($J,"RTNQ",RTUTL,1)=$P(RTO(T),"^",2)_"^"_V_"^"_RT_"^"_R("DES")_"^"_B_"^"_B("P")_"^"_R("PROV")_"^"_D_"^"_M_"^"_U1_"^"_H_"^"_H("P")_"^"_R("I")_"^"_R("R")_"^"_R("BC")
"RTN","RTNQ2",36,0)
RECQ K V,B,RTCL,D,H,R,M,U1,C,Y Q
"RTN","RTNQ2",37,0)
 ;
"RTN","RTNQ2",38,0)
WRITE S RTN=15 D HD:($Y+RTN+3)>IOSL G WRITEQ:RTESC="^" F F=1:1:RTN W !,$P($T(LABELS+F),";;",2) F I=1:1 Q:'$D(R(I))  W ?(20+(20*(I-1))),$E($P(R(I),"^",F),1,19)
"RTN","RTNQ2",39,0)
WRITEQ K R,RTN S C=0 Q
"RTN","RTNQ2",40,0)
 ;
"RTN","RTNQ2",41,0)
TYPE F T=0:0 S T=$O(^DIC(195.2,"C",+RTAPL,T)) Q:'T  I $D(^DIC(195.2,T,0)) S O=$S($P(^(0),"^",4)]"":+$P(^(0),"^",4),1:0),RTO(T)=$S(O:O,1:0)_"^"_$P(^(0),"^",1,2)
"RTN","RTNQ2",42,0)
 Q
"RTN","RTNQ2",43,0)
 ;
"RTN","RTNQ2",44,0)
LABELS ;;
"RTN","RTNQ2",45,0)
 ;;Type of Record  :
"RTN","RTNQ2",46,0)
 ;;Volume No.      :
"RTN","RTNQ2",47,0)
 ;;Record No.      :
"RTN","RTNQ2",48,0)
 ;;Descriptor      :
"RTN","RTNQ2",49,0)
 ;;Current Location:
"RTN","RTNQ2",50,0)
 ;;Current Phone   :
"RTN","RTNQ2",51,0)
 ;;Associated Borr.:
"RTN","RTNQ2",52,0)
 ;;Since...        :
"RTN","RTNQ2",53,0)
 ;;Movement        :
"RTN","RTNQ2",54,0)
 ;;Responsible User:
"RTN","RTNQ2",55,0)
 ;;Home Location   :
"RTN","RTNQ2",56,0)
 ;;Home Phone      :
"RTN","RTNQ2",57,0)
 ;;Inactive Flag   :
"RTN","RTNQ2",58,0)
 ;;Retirement Flag :
"RTN","RTNQ2",59,0)
 ;;Last Access Meth:
"RTN","RTNQ21")
0^2^B10190251
"RTN","RTNQ21",1,0)
RTNQ21 ;TROY ISC/MJK-Record Inquiry Routine ; 5/4/87  10:00 AM ; 1/30/03 8:36am
"RTN","RTNQ21",2,0)
 ;;2.0;Record Tracking;**32,33,36**;10/22/91 
"RTN","RTNQ21",3,0)
 S RTFL="RTQ",RTUTL=0,RTPCE=9 D WINDOW^RTRPT K RTPCE,S,D,^TMP($J,"RTNQ"),RTL
"RTN","RTNQ21",4,0)
 W:$E(IOST,1,2)="C-" !!?3,"...will now compile record request data"
"RTN","RTNQ21",5,0)
 F RT=0:0 S RT=$O(RT(RT)) Q:'RT  S RT0=RT(RT) F RTDT=0:0 S RTDT=$O(^RTV(190.1,"AC",RT,RTDT)) Q:'RTDT  F RTQ=0:0 S RTQ=$O(^RTV(190.1,"AC",RT,RTDT,RTQ)) Q:'RTQ  D RTQ
"RTN","RTNQ21",6,0)
 I '$D(^TMP($J,"RTNQ")) W !!,"No requests on file.",$S($E(IOST,1,2)="C-":" Press RETURN to continue.",1:"") R:$E(IOST,1,2)="C-" X:DTIME G Q
"RTN","RTNQ21",7,0)
 K S,RTDT F S=0:0 S S=$O(RTL(S)) Q:'S  D @($S(($Y+8)>IOSL:"HD",'$D(RTDT):"HD1",1:"HD2")) G Q:RTESC="^" F RTDT=0:0 S RTDT=$O(RTL(S,RTDT)) Q:'RTDT  F I=0:0 S I=$O(RTL(S,RTDT,I)) Q:'I  D WRITE G Q:RTESC="^"
"RTN","RTNQ21",8,0)
 ;
"RTN","RTNQ21",9,0)
Q G Q^RTNQ2
"RTN","RTNQ21",10,0)
 ;
"RTN","RTNQ21",11,0)
HD D HD^RTNQ2 Q:RTESC="^"
"RTN","RTNQ21",12,0)
HD1 W !?25,"**** RECORD REQUEST PROFILE ****",!,"Type",?6,"Requestor",?27,"Date Needed",?46,"Phone#",?55,"Requesting User",?72,"Req#",!,"----",?6,"---------",?27,"-----------",?46,"------",?55,"---------------",?72,"----"
"RTN","RTNQ21",13,0)
HD2 W !,"[",$S(S=1:"Pending",S=2:"Filled",1:"Cancelled or Never Filled"),"]"
"RTN","RTNQ21",14,0)
 I $D(S),$D(RTDT),RTDT W " ...continued"
"RTN","RTNQ21",15,0)
 Q
"RTN","RTNQ21",16,0)
 ;
"RTN","RTNQ21",17,0)
RTQ Q:'$D(^RTV(190.1,RTQ,0))  S Y=^(0),T=+$P(RT0,"^",3),V=+$P(RT0,"^",7)
"RTN","RTNQ21",18,0)
 S U1="" I $D(^VA(200,+$P(Y,"^",3),0)) S U1=$P(^(0),"^")
"RTN","RTNQ21",19,0)
 S S=$P(Y,"^",6),S=$S(S="x":3,S="c":2,'$D(RTWND(T)):1,RTWND(T)'>$P(Y,"^",4):1,1:3)
"RTN","RTNQ21",20,0)
 S D=$P(Y,"^",4),N=D_".00000",N=$TR($$FMTE^XLFDT($E(N,1,12),"5F")," /","0-")
"RTN","RTNQ21",21,0)
 S (B,B("P"))="" I $D(^RTV(195.9,+$P(Y,"^",5),0)) S Y=^(0),B("P")=$P(Y,"^",8),Y=$P(Y,"^") D NAME^RTB S B=Y
"RTN","RTNQ21",22,0)
 S (B1,B1("P"))="" I $D(^RTV(195.9,+$P(^RTV(190.1,RTQ,0),"^",14),0)) S Y=^(0),B1("P")=$S($P(Y,"^",8)'="":"("_$P(Y,"^",8)_")",1:""),Y=$P(Y,"^") D NAME^RTB S B1=$S(Y'="":"("_Y_")",1:"")
"RTN","RTNQ21",23,0)
 S RTUTL=RTUTL+1 F I=1:1 I '$D(RTL(S,D,I)) S RTL(S,D,I)=RTUTL,^TMP($J,"RTNQ",RTUTL)=T_"^"_V_"^"_B_"^"_N_"^"_B("P")_"^"_U1_"^"_RTQ_"^"_B1_"^"_B1("P") Q
"RTN","RTNQ21",24,0)
 K D,T,V,U1,B,B1,N,I,S,V Q
"RTN","RTNQ21",25,0)
 ;
"RTN","RTNQ21",26,0)
WRITE D HD:($Y+6)>IOSL Q:RTESC="^"  S Y=^TMP($J,"RTNQ",RTL(S,RTDT,I))
"RTN","RTNQ21",27,0)
 W !,$P(RTO(+Y),"^",3),+$P(Y,"^",2),?6,$E($P(Y,"^",3),1,20),?27,$P(Y,"^",4),?46,$P(Y,"^",5),?55,$E($P(Y,"^",6),1,15),?72,+$P(Y,"^",7) I $P(Y,"^",8)'="" W !?6,$P(Y,"^",8),?46,$P(Y,"^",9)
"RTN","RTNQ21",28,0)
 Q
"RTN","RTNQ21",29,0)
 ;
"RTN","RTNQ4")
0^3^B13953744
"RTN","RTNQ4",1,0)
RTNQ4 ;MJK,PKE/TROY ISC;Expanded Record Inquiry Routine ; 5/4/87  9:57 AM ;
"RTN","RTNQ4",2,0)
 ;;2.0;Record Tracking;**32,36**;10/22/91 
"RTN","RTNQ4",3,0)
 I '$D(RTAPL) D APL2^RTPSET D NEXT:$D(RTAPL) K RTAPL,RTSYS Q
"RTN","RTNQ4",4,0)
NEXT S RTA=+RTAPL D ASK^RTB K RTA G Q:$D(RTESC),NEXT:Y<0 S RTE=X
"RTN","RTNQ4",5,0)
 S RTINFO="A"
"RTN","RTNQ4",6,0)
 S RTPGM="START^RTNQ4",RTVAR="RTE^RTINFO^RTAPL" D ZIS^RTUTL G Q:POP D START G NEXT
"RTN","RTNQ4",7,0)
 ;
"RTN","RTNQ4",8,0)
START U IO S RTPAGE=0,RTFL="RECS",RTUTL=0
"RTN","RTNQ4",9,0)
 K RT,^TMP($J,"RTNQ"),R2,R3,Z
"RTN","RTNQ4",10,0)
 I '$D(IOSL)!('$D(IOF)) S IOP="" D ^%ZIS K IOP
"RTN","RTNQ4",11,0)
 D TYPE,HD
"RTN","RTNQ4",12,0)
 I RTINFO["A" S A=+RTAPL F RT=0:0 S RT=$O(^RT("AA",A,RTE,RT)) Q:'RT  S RT(RT)=""
"RTN","RTNQ4",13,0)
 G Q:$D(RT)<10 K RTL F RT=0:0 S RT=$O(RT(RT)) Q:'RT  K RT(RT) I $D(^RT(RT,0)) S RT0=^(0) I $D(RTO(+$P(RT0,"^",3))) S RT(RT)=RT0 D REC
"RTN","RTNQ4",14,0)
 D ^RTNQ41
"RTN","RTNQ4",15,0)
 S C=0,RTESC="" K R F O=0:0 S O=$O(RTL(O)) Q:'O  F V=0:0 S V=$O(RTL(O,V)) Q:'V  S C=C+1,R(C)=^TMP($J,"RTNQ",RTL(O,V),1) D WRITE:C=3 G Q:RTESC="^"
"RTN","RTNQ4",16,0)
 ; c is number of volumes
"RTN","RTNQ4",17,0)
 D WRITE:C
"RTN","RTNQ4",18,0)
 Q
"RTN","RTNQ4",19,0)
Q K C,S,RTVAR,RTPGM,RTQ,RTWND,RTDT,R,RT,RT0,RTA,RTE,RTESC,RTFL,RTINFO,RTL,RTO,RTPAGE,RTUTL,^TMP($J,"RTNQ"),R2,R3,Z D CLOSE^RTUTL
"RTN","RTNQ4",20,0)
 K DIC,DIY,N,A,F,O,X1,%I,%H,POP,X
"RTN","RTNQ4",21,0)
 K:'$D(RTY) RTINFO K RT1,RTC,RTY,RTDC,RTSEL
"RTN","RTNQ4",22,0)
 K M,T,DFN,CT,I,T,V,VADMVT,Y Q
"RTN","RTNQ4",23,0)
 ;
"RTN","RTNQ4",24,0)
HD S RTESC="" I RTPAGE,IOST["C-" W !! R !,"Press RETURN to continue or '^' to stop: ",RTESC:DTIME S:'$T RTESC="^" Q:RTESC["^"
"RTN","RTNQ4",25,0)
 S RTPAGE=RTPAGE+1,X1=$S($D(^DIC(195.1,+RTAPL,"HD")):^("HD"),1:"Record")_" Inquiry" D PTHD^RTUTL2,EQUALS^RTUTL3
"RTN","RTNQ4",26,0)
 Q
"RTN","RTNQ4",27,0)
 ;
"RTN","RTNQ4",28,0)
REC S Y=RT0 Q:'$D(^RT(RT,"CL"))  S RTCL=^("CL"),R("BC")=$S($P(RTCL,"^",15)="y":"Barcode",1:"Non-barcode"),T=+$P(Y,"^",3),V=+$P(Y,"^",7),R("DES")=$P(Y,"^",12),Y=$P(Y,"^",11),C=$P(^DD(190,11,0),"^",2) D Y^DIQ S R("R")=Y
"RTN","RTNQ4",29,0)
 S (H,H("P"))="" I $D(^RTV(195.9,+$P(RT0,"^",6),0)) S Y=^(0),H("P")=$P(Y,"^",7),Y=$P(Y,"^") D NAME^RTB S H=Y
"RTN","RTNQ4",30,0)
 ;
"RTN","RTNQ4",31,0)
 S Y=RTCL,D=$P(Y,"^",6)_".00000",D=$TR($$FMTE^XLFDT($E(D,1,12),"5F")," /","0-")
"RTN","RTNQ4",32,0)
 S U1=$S($D(^VA(200,+$P(Y,"^",7),0)):$P(^(0),"^"),1:"UNKNOWN")
"RTN","RTNQ4",33,0)
 S Y=$P(Y,"^",8),C=$P(^DD(190,108,0),"^",2) D Y^DIQ S M=Y
"RTN","RTNQ4",34,0)
 S R("I")="" I $D(^RT(RT,"I")),^("I"),DT>^("I") S R("I")=$S(M["TRANSFER TO":"** Transferred **",1:"*** Inactive ***")
"RTN","RTNQ4",35,0)
 ;
"RTN","RTNQ4",36,0)
 S (B,B("P"))="" I $D(^RTV(195.9,+$P(RTCL,"^",5),0)) S Y=^(0),B("P")=$P(Y,"^",7),Y=$P(Y,"^") D NAME^RTB S B=Y
"RTN","RTNQ4",37,0)
 S Y=$P(RTCL,"^",14) D BOR^RTB:Y S R("PROV")=Y
"RTN","RTNQ4",38,0)
 S RTUTL=RTUTL+1,RTL(+RTO(T),999-V)=RTUTL,^TMP($J,"RTNQ",RTUTL,1)=$P(RTO(T),"^",2)_"^"_V_"^"_RT_"^"_R("DES")_"^"_B_"^"_B("P")_"^"_R("PROV")_"^"_D_"^"_M_"^"_U1
"RTN","RTNQ4",39,0)
RECQ K V,B,RTCL,D,H,R,M,U1,C,Y Q
"RTN","RTNQ4",40,0)
 ;
"RTN","RTNQ4",41,0)
WRITE S RTN=10 D HD:($Y+RTN+8)>9999 G WRITEQ:RTESC="^" F F=1:1:RTN W !,$P($T(LABELS+F),";;",2) F I=1:1 Q:'$D(R(I))  W ?(20+(20*(I-1))),$E($P(R(I),"^",F),1,19)
"RTN","RTNQ4",42,0)
 D DPL^RTNQ41
"RTN","RTNQ4",43,0)
 I C=3,$O(RTL(O))!($O(RTL(O,V))) D HD
"RTN","RTNQ4",44,0)
WRITEQ K R,RTN S C=0 Q
"RTN","RTNQ4",45,0)
 ;
"RTN","RTNQ4",46,0)
TYPE F T=0:0 S T=$O(^DIC(195.2,"C",+RTAPL,T)) Q:'T  I $D(^DIC(195.2,T,0)) S O=$S($P(^(0),"^",4)]"":+$P(^(0),"^",4),1:0),RTO(T)=$S(O:O,1:0)_"^"_$P(^(0),"^",1,2)
"RTN","RTNQ4",47,0)
 Q
"RTN","RTNQ4",48,0)
LABELS ;;
"RTN","RTNQ4",49,0)
 ;;Type of Record  :
"RTN","RTNQ4",50,0)
 ;;Volume No.      :
"RTN","RTNQ4",51,0)
 ;;Record No.      :
"RTN","RTNQ4",52,0)
 ;;Descriptor      :
"RTN","RTNQ4",53,0)
 ;;Current Location:
"RTN","RTNQ4",54,0)
 ;;Current Phone   :
"RTN","RTNQ4",55,0)
 ;;Associated Borr.:
"RTN","RTNQ4",56,0)
 ;;Since...        :
"RTN","RTNQ4",57,0)
 ;;Movement        :
"RTN","RTNQ4",58,0)
 ;;Responsible User:
"RTN","RTNQ4",59,0)
 ;
"VER")
8.0^22
**END**
**END**

Released HBH*1*17 SEQ #15
Extracted from mail message
**KIDS**:HBH*1.0*17^

**INSTALL NAME**
HBH*1.0*17
"BLD",2364,0)
HBH*1.0*17^HOSPITAL BASED HOME CARE^0^2991104^y
"BLD",2364,1,0)
^^1^1^2991104^^^^
"BLD",2364,1,1,0)
This is HBH*1.0*17
"BLD",2364,4,0)
^9.64PA^^0
"BLD",2364,"ABPKG")
n
"BLD",2364,"INID")
^
"BLD",2364,"INIT")

"BLD",2364,"KRN",0)
^9.67PA^19^18
"BLD",2364,"KRN",.4,0)
.4
"BLD",2364,"KRN",.4,"NM",0)
^9.68A^^
"BLD",2364,"KRN",.401,0)
.401
"BLD",2364,"KRN",.401,"NM",0)
^9.68A^^
"BLD",2364,"KRN",.402,0)
.402
"BLD",2364,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",2364,"KRN",.403,0)
.403
"BLD",2364,"KRN",.403,"NM",0)
^9.68A^^
"BLD",2364,"KRN",.5,0)
.5
"BLD",2364,"KRN",.84,0)
.84
"BLD",2364,"KRN",3.6,0)
3.6
"BLD",2364,"KRN",3.8,0)
3.8
"BLD",2364,"KRN",3.8,"NM",0)
^9.68A^^0
"BLD",2364,"KRN",9.2,0)
9.2
"BLD",2364,"KRN",9.8,0)
9.8
"BLD",2364,"KRN",9.8,"NM",0)
^9.68A^6^1
"BLD",2364,"KRN",9.8,"NM",6,0)
HBHCXMV^^0^B23269516
"BLD",2364,"KRN",9.8,"NM","B","HBHCXMV",6)

"BLD",2364,"KRN",19,0)
19
"BLD",2364,"KRN",19,"NM",0)
^9.68A^^0
"BLD",2364,"KRN",19.1,0)
19.1
"BLD",2364,"KRN",19.1,"NM",0)
^9.68A^^0
"BLD",2364,"KRN",101,0)
101
"BLD",2364,"KRN",409.61,0)
409.61
"BLD",2364,"KRN",771,0)
771
"BLD",2364,"KRN",869.2,0)
869.2
"BLD",2364,"KRN",870,0)
870
"BLD",2364,"KRN",8994,0)
8994
"BLD",2364,"KRN","B",.4,.4)

"BLD",2364,"KRN","B",.401,.401)

"BLD",2364,"KRN","B",.402,.402)

"BLD",2364,"KRN","B",.403,.403)

"BLD",2364,"KRN","B",.5,.5)

"BLD",2364,"KRN","B",.84,.84)

"BLD",2364,"KRN","B",3.6,3.6)

"BLD",2364,"KRN","B",3.8,3.8)

"BLD",2364,"KRN","B",9.2,9.2)

"BLD",2364,"KRN","B",9.8,9.8)

"BLD",2364,"KRN","B",19,19)

"BLD",2364,"KRN","B",19.1,19.1)

"BLD",2364,"KRN","B",101,101)

"BLD",2364,"KRN","B",409.61,409.61)

"BLD",2364,"KRN","B",771,771)

"BLD",2364,"KRN","B",869.2,869.2)

"BLD",2364,"KRN","B",870,870)

"BLD",2364,"KRN","B",8994,8994)

"BLD",2364,"QUES",0)
^9.62^^
"BLD",2364,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",455,-1)
1^1
"PKG",455,0)
HOSPITAL BASED HOME CARE^HBH^Hospital Based Home Care
"PKG",455,20,0)
^9.402P^^
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
1.0^2931101
"PKG",455,22,1,"PAH",1,0)
17^2991104
"PKG",455,22,1,"PAH",1,1,0)
^^1^1^2991104
"PKG",455,22,1,"PAH",1,1,1,0)
This is HBH*1.0*17
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","HBHCXMV")
0^6^B23269516
"RTN","HBHCXMV",1,0)
HBHCXMV ; LR VAMC(IRMS)/MJT-HBHC populate ^HBHC(634 with Visit Data, or ^HBHC(634.5, file of recs in ^HBHC(632 w/pseudo SSNs, called by ^HBHCFILE, calls HBHCXMV1 ;9911
"RTN","HBHCXMV",2,0)
 ;;1.0;HOSPITAL BASED HOME CARE;**2,5,6,9,12,15,17**;NOV 01, 1993
"RTN","HBHCXMV",3,0)
 D START^HBHCXMV1
"RTN","HBHCXMV",4,0)
LOOP ; Loop thru ^HBHC(632) "AC","N" cross-ref to create nodes in ^HBHC(634) => transmit
"RTN","HBHCXMV",5,0)
 S HBHCDFN="" F  S HBHCDFN=$O(^HBHC(632,"AC","N",HBHCDFN)) Q:HBHCDFN=""  D SETNODE
"RTN","HBHCXMV",6,0)
EXIT ; Exit module
"RTN","HBHCXMV",7,0)
 D EXIT^HBHCXMV1
"RTN","HBHCXMV",8,0)
 Q
"RTN","HBHCXMV",9,0)
SETNODE ; Set node in ^HBHC(634) (Transmit)
"RTN","HBHCXMV",10,0)
 S HBHCINFO=^HBHC(632,HBHCDFN,0),HBHCXMT4=$P(HBHCINFO,U,8),HBHCAPDT=$P(HBHCINFO,U,2),HBHCSSN=$P(^DPT($P(HBHCINFO,U),0),U,9)
"RTN","HBHCXMV",11,0)
 Q:$P(HBHCINFO,U,7)]""  ; cancelled/no show appointment
"RTN","HBHCXMV",12,0)
 Q:HBHCAPDT>HBHCLSDT  ; Visit appointment date > HBHCLSDT (last date to include in transmit set up in ^HBHCFILE)
"RTN","HBHCXMV",13,0)
 I HBHCAPDT<2961001 D PCE^HBHCXMV1 Q
"RTN","HBHCXMV",14,0)
 I HBHCSSN'?9N D PSSN^HBHCXMV1 Q
"RTN","HBHCXMV",15,0)
 S HBHCPRV=+^HBHC(631.4,$P(HBHCINFO,U,4),0) S:$L(HBHCPRV)'=4 HBHCPRV=HBHCPRV_HBHCSP1
"RTN","HBHCXMV",16,0)
 S HBHCTIME=$P(HBHCAPDT,".",2) S:$L(HBHCTIME)<4 HBHCTIME=HBHCTIME_$E(HBHCZRO4,1,(4-($L(HBHCTIME)))) S:$L(HBHCTIME)>4 HBHCTIME=$E(HBHCTIME,1,4)
"RTN","HBHCXMV",17,0)
 S HBHCDATE=$E(HBHCAPDT,4,5)_$E(HBHCAPDT,6,7)_(1700+$E(HBHCAPDT,1,3))_HBHCTIME
"RTN","HBHCXMV",18,0)
 S HBHCLNME=$P($P(^DPT($P(HBHCINFO,U),0),U),",") S:$L(HBHCLNME)'=11 HBHCLNME=$S($L(HBHCLNME)<11:HBHCLNME_$E(HBHCSP10,1,11-$L(HBHCLNME)),1:$E(HBHCLNME,1,11))
"RTN","HBHCXMV",19,0)
 S HBHCQAI=$S(($L($P(HBHCINFO,U,16))=1)&($E(HBHCINFO,U,16)=""):HBHCSP1_$P(HBHCINFO,U,16),($L($P(HBHCINFO,U,16))=1)&($E(HBHCINFO,U,16)]""):$P(HBHCINFO,U,16)_HBHCSP1,$L($P(HBHCINFO,U,16))=2:$P(HBHCINFO,U,16),1:HBHCSP2)
"RTN","HBHCXMV",20,0)
 ; Dx
"RTN","HBHCXMV",21,0)
 S HBHCDX1=$S($P(HBHCINFO,U,17)]"":$P($P($G(^ICD9($P(HBHCINFO,U,17),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,17),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX1)'=6 HBHCDX1=HBHCDX1_$E(HBHCSP6,1,6-$L(HBHCDX1))
"RTN","HBHCXMV",22,0)
 S HBHCDX2=$S($P(HBHCINFO,U,18)]"":$P($P($G(^ICD9($P(HBHCINFO,U,18),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,18),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX2)'=6 HBHCDX2=HBHCDX2_$E(HBHCSP6,1,6-$L(HBHCDX2))
"RTN","HBHCXMV",23,0)
 S HBHCDX3=$S($P(HBHCINFO,U,19)]"":$P($P($G(^ICD9($P(HBHCINFO,U,19),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,19),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX3)'=6 HBHCDX3=HBHCDX3_$E(HBHCSP6,1,6-$L(HBHCDX3))
"RTN","HBHCXMV",24,0)
 S HBHCDX4=$S($P(HBHCINFO,U,20)]"":$P($P($G(^ICD9($P(HBHCINFO,U,20),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,20),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX4)'=6 HBHCDX4=HBHCDX4_$E(HBHCSP6,1,6-$L(HBHCDX4))
"RTN","HBHCXMV",25,0)
 S HBHCDX5=$S($P(HBHCINFO,U,21)]"":$P($P($G(^ICD9($P(HBHCINFO,U,21),0)),U),".")_$P($P($G(^ICD9($P(HBHCINFO,U,21),0)),U),".",2),1:HBHCSP6) S:$L(HBHCDX5)'=6 HBHCDX5=HBHCDX5_$E(HBHCSP6,1,6-$L(HBHCDX5))
"RTN","HBHCXMV",26,0)
 ; CPT Codes
"RTN","HBHCXMV",27,0)
 S (HBHCCNT,HBHCI)=0 F  S HBHCI=$O(^HBHC(632,HBHCDFN,2,HBHCI)) Q:HBHCI'>0  D:HBHCCNT=0 INIT S HBHCNOD2=^HBHC(632,HBHCDFN,2,HBHCI,0),HBHCCNT=HBHCCNT+1 D SET D:HBHCCNT=10 WRITE
"RTN","HBHCXMV",28,0)
 D:'HBHCFLAG WRITE
"RTN","HBHCXMV",29,0)
 Q
"RTN","HBHCXMV",30,0)
INIT ; Initialize variables
"RTN","HBHCXMV",31,0)
 S HBHCFLAG=0,HBHCCP10=HBHCSP5
"RTN","HBHCXMV",32,0)
 F HBHCJ=1:1:9 S @("HBHCCPT"_HBHCJ)=HBHCSP5
"RTN","HBHCXMV",33,0)
 Q
"RTN","HBHCXMV",34,0)
SET ; Set CPT variables
"RTN","HBHCXMV",35,0)
 I HBHCCNT<10 S @("HBHCCPT"_HBHCCNT)=$S($P(HBHCNOD2,U)]"":$E($P($G(^ICPT($P(HBHCNOD2,U),0)),U),1,5),1:HBHCSP5) S:$L(@("HBHCCPT"_HBHCCNT))'=5 @("HBHCCPT"_HBHCCNT)=@("HBHCCPT"_HBHCCNT)_$E(HBHCSP5,1,5-$L(@("HBHCCPT"_HBHCCNT)))
"RTN","HBHCXMV",36,0)
 I HBHCCNT=10 S HBHCCP10=$S($P(HBHCNOD2,U)]"":$E($P($G(^ICPT($P(HBHCNOD2,U),0)),U),1,5),1:HBHCSP5) S:$L(HBHCCP10)'=5 HBHCCP10=HBHCCP10_$E(HBHCSP5,1,5-$L(HBHCCP10))
"RTN","HBHCXMV",37,0)
 Q
"RTN","HBHCXMV",38,0)
WRITE ; Write transmit record, separate records containing max 10 CPTs each are generated for same visit if > 10 CPTs exist
"RTN","HBHCXMV",39,0)
 L +^HBHC(634,0) S HBHCNDX1=$P(^HBHC(634,0),U,3)+1 F  Q:'$D(^HBHC(634,HBHCNDX1))  S HBHCNDX1=HBHCNDX1+1
"RTN","HBHCXMV",40,0)
 S $P(^HBHC(634,0),U,3)=HBHCNDX1,$P(^HBHC(634,0),U,4)=$P(^HBHC(634,0),U,4)+1 L -^HBHC(634,0)
"RTN","HBHCXMV",41,0)
 S HBHCREC=HBHCFORM_HBHCHOSP_HBHCSSN_HBHCDATE_HBHCPRV_HBHCLNME_HBHCQAI_HBHCDX1_HBHCDX2_HBHCDX3_HBHCDX4_HBHCDX5_HBHCCPT1_HBHCCPT2_HBHCCPT3_HBHCCPT4_HBHCCPT5_HBHCCPT6_HBHCCPT7_HBHCCPT8_HBHCCPT9_HBHCCP10_HBHCSP4
"RTN","HBHCXMV",42,0)
 S ^HBHC(634,HBHCNDX1,0)=HBHCREC,^HBHC(634,"B",$E(HBHCREC,1,30),HBHCNDX1)=""
"RTN","HBHCXMV",43,0)
 ; Flag record as filed
"RTN","HBHCXMV",44,0)
 L +^HBHC(632,HBHCDFN,0) K:HBHCXMT4]"" ^HBHC(632,"AC",HBHCXMT4,HBHCDFN) S $P(^HBHC(632,HBHCDFN,0),U,8)="F",^HBHC(632,"AC","F",HBHCDFN)="",$P(^HBHC(632,HBHCDFN,0),U,9)=HBHCTDY L -^HBHC(632,HBHCDFN,0)
"RTN","HBHCXMV",45,0)
 ; Initialize QAI & DX fields to spaces after 1st record written to avoid multiple count(s) of same data when > 10 CPTs exist
"RTN","HBHCXMV",46,0)
 S HBHCQAI=HBHCSP2
"RTN","HBHCXMV",47,0)
 F HBHCK=1:1:5 S @("HBHCDX"_HBHCK)=HBHCSP6
"RTN","HBHCXMV",48,0)
 ; Reset CNT & set FLAG
"RTN","HBHCXMV",49,0)
 S HBHCCNT=0,HBHCFLAG=1
"RTN","HBHCXMV",50,0)
 Q
"VER")
8.0^22.0
**END**
**END**

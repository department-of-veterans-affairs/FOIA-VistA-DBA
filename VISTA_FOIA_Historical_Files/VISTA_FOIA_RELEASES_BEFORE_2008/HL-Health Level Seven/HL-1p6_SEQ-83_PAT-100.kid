Released HL*1.6*100 SEQ #83
Extracted from mail message
**KIDS**:HL*1.6*100^

**INSTALL NAME**
HL*1.6*100
"BLD",604,0)
HL*1.6*100^HEALTH LEVEL SEVEN^0^3020906^y
"BLD",604,1,0)
^^2^2^3020906^
"BLD",604,1,1,0)
See patch HL*1.6*100 in the National Patch Module for complete information
"BLD",604,1,2,0)
on this patch.
"BLD",604,4,0)
^9.64PA^^
"BLD",604,"ABPKG")
n
"BLD",604,"KRN",0)
^9.67PA^8989.52^20
"BLD",604,"KRN",.4,0)
.4
"BLD",604,"KRN",.401,0)
.401
"BLD",604,"KRN",.402,0)
.402
"BLD",604,"KRN",.403,0)
.403
"BLD",604,"KRN",.5,0)
.5
"BLD",604,"KRN",.84,0)
.84
"BLD",604,"KRN",3.6,0)
3.6
"BLD",604,"KRN",3.8,0)
3.8
"BLD",604,"KRN",9.2,0)
9.2
"BLD",604,"KRN",9.8,0)
9.8
"BLD",604,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",604,"KRN",9.8,"NM",1,0)
HLCSQUE1^^0^B4079796
"BLD",604,"KRN",9.8,"NM","B","HLCSQUE1",1)

"BLD",604,"KRN",19,0)
19
"BLD",604,"KRN",19.1,0)
19.1
"BLD",604,"KRN",101,0)
101
"BLD",604,"KRN",409.61,0)
409.61
"BLD",604,"KRN",771,0)
771
"BLD",604,"KRN",870,0)
870
"BLD",604,"KRN",8989.51,0)
8989.51
"BLD",604,"KRN",8989.52,0)
8989.52
"BLD",604,"KRN",8994,0)
8994
"BLD",604,"KRN",8994.2,0)
8994.2
"BLD",604,"KRN","B",.4,.4)

"BLD",604,"KRN","B",.401,.401)

"BLD",604,"KRN","B",.402,.402)

"BLD",604,"KRN","B",.403,.403)

"BLD",604,"KRN","B",.5,.5)

"BLD",604,"KRN","B",.84,.84)

"BLD",604,"KRN","B",3.6,3.6)

"BLD",604,"KRN","B",3.8,3.8)

"BLD",604,"KRN","B",9.2,9.2)

"BLD",604,"KRN","B",9.8,9.8)

"BLD",604,"KRN","B",19,19)

"BLD",604,"KRN","B",19.1,19.1)

"BLD",604,"KRN","B",101,101)

"BLD",604,"KRN","B",409.61,409.61)

"BLD",604,"KRN","B",771,771)

"BLD",604,"KRN","B",870,870)

"BLD",604,"KRN","B",8989.51,8989.51)

"BLD",604,"KRN","B",8989.52,8989.52)

"BLD",604,"KRN","B",8994,8994)

"BLD",604,"KRN","B",8994.2,8994.2)

"BLD",604,"QUES",0)
^9.62^^
"BLD",604,"REQB",0)
^9.611^1^1
"BLD",604,"REQB",1,0)
HL*1.6*59^0
"BLD",604,"REQB","B","HL*1.6*59",1)

"MBREQ")
0
"PKG",9,-1)
1^1
"PKG",9,0)
HEALTH LEVEL SEVEN^HL^DHCP IMPLEMENTATION OF HEALTH LEVEL SEVEN^
"PKG",9,20,0)
^9.402P^^
"PKG",9,22,0)
^9.49I^1^1
"PKG",9,22,1,0)
1.6^2980130^2980130^6
"PKG",9,22,1,"PAH",1,0)
100^3020906
"PKG",9,22,1,"PAH",1,1,0)
^^2^2^3020906
"PKG",9,22,1,"PAH",1,1,1,0)
See patch HL*1.6*100 in the National Patch Module for complete information
"PKG",9,22,1,"PAH",1,1,2,0)
on this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","HLCSQUE1")
0^1^B4079796
"RTN","HLCSQUE1",1,0)
HLCSQUE1 ;ALB/MFK HL7 UTILITY FUNCTIONS - 10/4/94 11AM ;05/08/2000  11:22
"RTN","HLCSQUE1",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14,59,100**;Oct 13, 1995
"RTN","HLCSQUE1",3,0)
 ;
"RTN","HLCSQUE1",4,0)
 ;Utilities used by HLCSQUE
"RTN","HLCSQUE1",5,0)
 ;
"RTN","HLCSQUE1",6,0)
DELMSG(IEN,HLDIR,MSG) ;DELETE A SINGLE MESSAGE FROM A QUEUE
"RTN","HLCSQUE1",7,0)
 ;INPUT: IEN - Internal Entry Number for queue
"RTN","HLCSQUE1",8,0)
 ;       HLDIR - Direction of queue
"RTN","HLCSQUE1",9,0)
 ;       MSG - Message number to remove
"RTN","HLCSQUE1",10,0)
 ;OUTPUT:  0 - Success
"RTN","HLCSQUE1",11,0)
 ;        -1 - Error
"RTN","HLCSQUE1",12,0)
 N DIK,DA
"RTN","HLCSQUE1",13,0)
 ;  Check for required variables
"RTN","HLCSQUE1",14,0)
 S IEN=$G(IEN)
"RTN","HLCSQUE1",15,0)
 Q:(IEN="") "-1^Internal Entry Number missing"
"RTN","HLCSQUE1",16,0)
 I +IEN<1 S IEN=$O(^HLCS(870,"B",IEN,""))
"RTN","HLCSQUE1",17,0)
 Q:(IEN="") "-1^Invalid IEN"
"RTN","HLCSQUE1",18,0)
 S HLDIR=$G(HLDIR)
"RTN","HLCSQUE1",19,0)
 S HLDIR=$S(HLDIR="IN":1,HLDIR="OUT":2,HLDIR=2:2,HLDIR=1:1,1:"")
"RTN","HLCSQUE1",20,0)
 Q:(HLDIR="") "-1^Invalid direction"
"RTN","HLCSQUE1",21,0)
 S MSG=$G(MSG)
"RTN","HLCSQUE1",22,0)
 Q:(MSG="") "-1^No message number"
"RTN","HLCSQUE1",23,0)
 L +^HLCS(870,IEN,HLDIR,MSG):1
"RTN","HLCSQUE1",24,0)
 ;If lock fails, another process is doing the work.
"RTN","HLCSQUE1",25,0)
 I '$T Q 1
"RTN","HLCSQUE1",26,0)
 S DIK="^HLCS(870,"_IEN_","_HLDIR_",",DA(1)=IEN,DA=MSG
"RTN","HLCSQUE1",27,0)
 D ^DIK
"RTN","HLCSQUE1",28,0)
 L -^HLCS(870,IEN,HLDIR,MSG)
"RTN","HLCSQUE1",29,0)
 K IEN,HLDIR,MSG
"RTN","HLCSQUE1",30,0)
 Q 0
"RTN","HLCSQUE1",31,0)
DELETE(IEN,HLDIR,FRONT) ;  Delete messages outside the 'queue size' window
"RTN","HLCSQUE1",32,0)
 N MSG,TMP,QSIZE,STOP,HLX
"RTN","HLCSQUE1",33,0)
 ;  Make sure required variables exist
"RTN","HLCSQUE1",34,0)
 S IEN=$G(IEN) Q:(IEN="")
"RTN","HLCSQUE1",35,0)
 S HLDIR=$G(HLDIR) Q:(HLDIR="")
"RTN","HLCSQUE1",36,0)
 S FRONT=$G(FRONT) Q:(FRONT="")
"RTN","HLCSQUE1",37,0)
 S TMP=^HLCS(870,IEN,0)
"RTN","HLCSQUE1",38,0)
 S QSIZE=$P(TMP,"^",21)
"RTN","HLCSQUE1",39,0)
 I FRONT'>0 Q
"RTN","HLCSQUE1",40,0)
 I QSIZE'>0 S QSIZE=10
"RTN","HLCSQUE1",41,0)
 S MSG=0,STOP=0
"RTN","HLCSQUE1",42,0)
 ;  For each message from the beginning of the queue to the front
"RTN","HLCSQUE1",43,0)
 ;  of the queue-queue size, delete that message if it's done
"RTN","HLCSQUE1",44,0)
 F  S MSG=$O(^HLCS(870,IEN,HLDIR,MSG)) Q:(MSG>(FRONT-QSIZE))!(STOP'=0)!(MSG'>0)  D
"RTN","HLCSQUE1",45,0)
 .I $P($G(^HLCS(870,IEN,HLDIR,MSG,0)),"^",2)'="D" D  QUIT:STOP  ;->
"RTN","HLCSQUE1",46,0)
 ..I $D(^HLCS(870,IEN,HLDIR,MSG)) D  QUIT:STOP  ;->
"RTN","HLCSQUE1",47,0)
 ...S HLX=$O(^HLCS(870,IEN,HLDIR,MSG)) QUIT:HLX>0  ;->
"RTN","HLCSQUE1",48,0)
 ...S STOP=1
"RTN","HLCSQUE1",49,0)
 ..S HLX=+$G(HLX)
"RTN","HLCSQUE1",50,0)
 ..I '$D(^HLCS(870,IEN,HLDIR,+HLX,0)) S STOP=1 QUIT  ;->
"RTN","HLCSQUE1",51,0)
 ..Q:$P($G(^HLCS(870,IEN,HLDIR,+HLX,0)),U,2)="D"  ;-> All OK...
"RTN","HLCSQUE1",52,0)
 ..S STOP=1
"RTN","HLCSQUE1",53,0)
 .S STOP=$$DELMSG(IEN,HLDIR,MSG)
"RTN","HLCSQUE1",54,0)
 K IEN,HLDIR,FRONT
"RTN","HLCSQUE1",55,0)
 Q
"VER")
8.0^22.0
**END**
**END**

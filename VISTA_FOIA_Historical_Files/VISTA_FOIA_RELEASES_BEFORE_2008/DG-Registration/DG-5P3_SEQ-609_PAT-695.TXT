
=============================================================================
Run Date: APR 26, 2006                     Designation: DG*5.3*695
Package : DG - REGISTRATION                   Priority: EMERGENCY
Version : 5.3       SEQ #609                    Status: Released
                  Compliance Date: MAY 03, 2006
=============================================================================

Associated patches: (v)DG*5.3*658  <<= must be installed BEFORE `DG*5.3*695'

Subject: Permanent Address Abort Still Updating DT/TM Stamp

Category: 
  - Routine

Description:
============

 This patch is being released as an emergency patch with a 7-day 
 compliance window because it includes the fix to the inappropriate 
 updating of the PATIENT (#2) file ADDRESS CHANGE DT/TM (#.118) field.
  
 NOTE: This patch is being released with Emergency Income Verification
 Match patch IVM*2.0*106 IVM Address Report Enhancement and County Code
 Fix in host file IVM_2_P106.KID. Please refer to the patch description for
 IVM*2.0*106 for details describing the functionality of that patch and
 installation instructions.
  
 This patch, DG*5.3*695, fixes two problems introduced with patch
 DG*5.3*658 DG Address Update Project.
  
 1. Prior to this patch (DG*5.3*695), if the user started to update a
 Permanent Address (Patient Address Update [DG ADDRESS UPDATE]) and either
 aborted the update (by answering 'No' to the 'Are you sure that you want
 to save the above changes?' prompt) or made no changes, the ADDRESS CHANGE
 DT/TM (#.118) field of the PATIENT (#2) file would still be updated.
  
 This patch will not update the ADDRESS CHANGE DT/TM #.118 field of the 
 PATIENT (#2) file if no changes were made to the Permanent Address.
  
 2. A post-install routine is included with this patch. Some invalid 
 PATIENT (#2) file records without a zero node already existed at some
 sites prior to installation of patch DG*5.3*658. The post-install 
 process from DG*5.3*658 did not check to exclude these bad records, and 
 added an ADDRESS CHANGE DT/TM (field #.118) to these records. The 
 post-install routine from this patch (DG*5.3*695) will clean up the
 PATIENT (#2) file by removing these bad records.
  
 The post-install starts when the patch is installed and continues running
 via a background process after the install completes. Once the process has
 run to completion, a MailMan message ("DG*5.3*695: PATIENT CLEANUP -
 SUMMARY REPORT") with a recap of the number of records processed and
 anomalies corrected, as well as percentage completed, will be generated
 and sent to the installer. A MailMan message will still be sent even if no
 anomalies are found.
  
 If the installer aborts the post-install cleanup routine by stopping the
 TASKMAN task, then s/he will be sent a MailMan message ("DG*5.3*695:
 PATIENT CLEANUP - PROCESS STOPPED BY USER") with the same format as the
 summary report message described above. Because the installer has elected
 to abort the process, however, the number reported for percentage
 completed will be less than 100. To re-start the cleanup routine, simply
 re-install the patch. The cleanup routine will pick up at the point where
 it left off.
  
  
 SOFTWARE RETRIEVAL
 ==================
 The software for this patch is not being distributed through the National 
 Patch Module. It is being distributed as a host file.
  
                     Host file name:     IVM_2_P106.KID
  
 The host file will contain the following two KIDS builds:
  
                             Builds:     IVM*2.0*106
                                         DG*5.3*695
  
 Sites may retrieve the software directly using FTP from the 
 ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
                            Albany  :  ftp.fo-albany.med.va.gov
                             Hines  :  ftp.fo-hines.med.va.gov
                    Salt Lake City  :  ftp.fo-slc.med.va.gov
            First Available Server  :  download.vista.med.va.gov
  
 The following file will be available:
  
    File Name                    Description
    ---------                  --------------
    IVM_2_P106.KID             Host file containing KIDS software
                               distribution
  
 Note: Use ASCII mode when transferring the .KID file.
  
  
 DOCUMENTATION RETRIEVAL
 =======================
 Sites may retrieve the user documentation directly using FTP from the
 ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
    
                 Albany   : ftp.fo-albany.med.va.gov
                 Hines    : ftp.fo-hines.med.va.gov
           Salt Lake City : ftp.fo-slc.med.va.gov
   First Available Server : download.vista.med.va.gov (preferred method)
   
                                                                          
  The following files will be available:
    
       File Name                     Description
       ---------                     -----------      
 DG_5_3_P695_REG_UM.PDF         Revised PIMS 5.3 Registration User Manual
 IVM_2_P106_UM.PDF              Revised IVM 2.0 User Manual 
  
  
  Note:  Use Binary mode when transferring the .PDF files.
   
  The VistA Documentation Library [VDL] web site contains all end-user 
  manuals.  The address is http://www.va.gov/vdl/.
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch. 
  
  
 This patch addresses the following Remedy Ticket:
 ---------------------------------------------------------
 HD0000000121833 - Patient Address Update Option
  
  
 Overview of Remedy Ticket:
 ----------------------------------
 HD0000000121833 - See Issue #1 above
  
  
 Components Sent With Patch
 --------------------------
  
 ROUTINE SUMMARY:
 ================
  The following is a list of the routines included in this patch.  The
  second line of each of these routines now looks like:
  
      <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                           CHECK^XTSUMBLD results
  
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  DG53695           N/A                   11062776            695
  DGADDUTL          7353966               7368398             658,695
  
 Total number of routines in patch: 2
  
  
 Test Sites:
 -----------
 Salisbury, NC (Large)
 Pittsburgh HCS (Large)
 Durham (Large)
 Portland, OR (Large)  
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 The components sent with this patch, DG*5.3*695, have been included in 
 the host file IVM_2_P106.KID. Please follow the instructions listed in 
 the INSTALLATION INSTRUCTIONS section of the patch description for patch 
 IVM*2.0*106.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DG53695
    Before:     *NEW*  After: B45551620  **695**
 Description of Changes:
  This is a new routine that is run as a post-install cleanup of orphan 
  nodes in the patient file.

Routine Name: DGADDUTL
    Before: B43681615  After: B43598540  **658,695**
 Description of Changes:
  Summary of DGADDUTL changes:
  Moved update date/time stamp from UPDATE to module ADDRED (if permanent) 
  and EDITTADR (if temporary)
   
  Before:
   +56        ;
   +57        ; Update the Date/Time Stamp regardless of edits
   +58        D UPDDTTM(DFN,TYPE)
   +59        ;
   
  After:
   
  Before:
   
  After:
   +96        ; Update the Date/Time Stamp
   +97        D UPDDTTM(DFN,TYPE)
   
  Before:
   
  After:
   +163       ; Update the Date/Time Stamp
   +164       D UPDDTTM(DFN,TYPE)


=============================================================================
User Information:
Entered By  : GINSBERG,ELIOT                Date Entered  : DEC 07, 2005
Completed By: RUDINGER,NANCY L.             Date Completed: APR 26, 2006
Released By : HEUER,CINDY                   Date Released : APR 26, 2006
=============================================================================


Packman Mail Message:
=====================

No routines included

Released TIU*1*163 SEQ #170
Extracted from mail message
**KIDS**:TIU*1.0*163^

**INSTALL NAME**
TIU*1.0*163
"BLD",5016,0)
TIU*1.0*163^TEXT INTEGRATION UTILITIES^0^3041018^y
"BLD",5016,1,0)
^^2^2^3040628^^
"BLD",5016,1,1,0)
The description of this patch may be found in the National 
"BLD",5016,1,2,0)
Patch Module under TIU*1.0*163.
"BLD",5016,4,0)
^9.64PA^8925.1^1
"BLD",5016,4,8925.1,0)
8925.1
"BLD",5016,4,8925.1,2,0)
^9.641^8925.1^1
"BLD",5016,4,8925.1,2,8925.1,0)
TIU DOCUMENT DEFINITION  (File-top level)
"BLD",5016,4,8925.1,2,8925.1,1,0)
^9.6411^.01^1
"BLD",5016,4,8925.1,2,8925.1,1,.01,0)
NAME
"BLD",5016,4,8925.1,222)
y^y^p^^^^n^^n
"BLD",5016,4,8925.1,224)

"BLD",5016,4,"APDD",8925.1,8925.1)

"BLD",5016,4,"APDD",8925.1,8925.1,.01)

"BLD",5016,4,"B",8925.1,8925.1)

"BLD",5016,"INIT")
MAIN^TIUPS163
"BLD",5016,"KRN",0)
^9.67PA^8989.52^19
"BLD",5016,"KRN",.4,0)
.4
"BLD",5016,"KRN",.401,0)
.401
"BLD",5016,"KRN",.402,0)
.402
"BLD",5016,"KRN",.403,0)
.403
"BLD",5016,"KRN",.5,0)
.5
"BLD",5016,"KRN",.84,0)
.84
"BLD",5016,"KRN",3.6,0)
3.6
"BLD",5016,"KRN",3.8,0)
3.8
"BLD",5016,"KRN",9.2,0)
9.2
"BLD",5016,"KRN",9.8,0)
9.8
"BLD",5016,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",5016,"KRN",9.8,"NM",1,0)
TIUDD1^^0^B41241397
"BLD",5016,"KRN",9.8,"NM",2,0)
TIUPS163^^0^B9261927
"BLD",5016,"KRN",9.8,"NM","B","TIUDD1",1)

"BLD",5016,"KRN",9.8,"NM","B","TIUPS163",2)

"BLD",5016,"KRN",19,0)
19
"BLD",5016,"KRN",19,"NM",0)
^9.68A^^
"BLD",5016,"KRN",19.1,0)
19.1
"BLD",5016,"KRN",101,0)
101
"BLD",5016,"KRN",409.61,0)
409.61
"BLD",5016,"KRN",771,0)
771
"BLD",5016,"KRN",870,0)
870
"BLD",5016,"KRN",8989.51,0)
8989.51
"BLD",5016,"KRN",8989.52,0)
8989.52
"BLD",5016,"KRN",8994,0)
8994
"BLD",5016,"KRN","B",.4,.4)

"BLD",5016,"KRN","B",.401,.401)

"BLD",5016,"KRN","B",.402,.402)

"BLD",5016,"KRN","B",.403,.403)

"BLD",5016,"KRN","B",.5,.5)

"BLD",5016,"KRN","B",.84,.84)

"BLD",5016,"KRN","B",3.6,3.6)

"BLD",5016,"KRN","B",3.8,3.8)

"BLD",5016,"KRN","B",9.2,9.2)

"BLD",5016,"KRN","B",9.8,9.8)

"BLD",5016,"KRN","B",19,19)

"BLD",5016,"KRN","B",19.1,19.1)

"BLD",5016,"KRN","B",101,101)

"BLD",5016,"KRN","B",409.61,409.61)

"BLD",5016,"KRN","B",771,771)

"BLD",5016,"KRN","B",870,870)

"BLD",5016,"KRN","B",8989.51,8989.51)

"BLD",5016,"KRN","B",8989.52,8989.52)

"BLD",5016,"KRN","B",8994,8994)

"BLD",5016,"QUES",0)
^9.62^^
"BLD",5016,"REQB",0)
^9.611^1^1
"BLD",5016,"REQB",1,0)
TIU*1.0*115^2
"BLD",5016,"REQB","B","TIU*1.0*115",1)

"FIA",8925.1)
TIU DOCUMENT DEFINITION
"FIA",8925.1,0)
^TIU(8925.1,
"FIA",8925.1,0,0)
8925.1I
"FIA",8925.1,0,1)
y^y^p^^^^n^^n
"FIA",8925.1,0,10)

"FIA",8925.1,0,11)

"FIA",8925.1,0,"RLRO")

"FIA",8925.1,0,"VR")
1.0^TIU
"FIA",8925.1,8925.1)
1
"FIA",8925.1,8925.1,.01)

"INIT")
MAIN^TIUPS163
"MBREQ")
0
"PKG",193,-1)
1^1
"PKG",193,0)
TEXT INTEGRATION UTILITIES^TIU^Text Integration Utilities 
"PKG",193,20,0)
^9.402P^^
"PKG",193,22,0)
^9.49I^1^1
"PKG",193,22,1,0)
1.0^3010321^3010321^11
"PKG",193,22,1,"PAH",1,0)
163^3041018^123456789110
"PKG",193,22,1,"PAH",1,1,0)
^^2^2^3041018
"PKG",193,22,1,"PAH",1,1,1,0)
The description of this patch may be found in the National 
"PKG",193,22,1,"PAH",1,1,2,0)
Patch Module under TIU*1.0*163.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","TIUDD1")
0^1^B41241397
"RTN","TIUDD1",1,0)
TIUDD1 ; SLC/JER - XREFs for file 8925.1 ;19-OCT-2001 10:05:37 [7/28/04 9:08am]
"RTN","TIUDD1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**7,51,115,163**;Jun 20, 1997
"RTN","TIUDD1",3,0)
SACL(X,FLD) ; Set logic for ACL cross-reference
"RTN","TIUDD1",4,0)
 ; Called from fields .01 (NAME), .07 (STATUS), .03 (PRINT NAME),
"RTN","TIUDD1",5,0)
 ; .02 (ABBREVIATION), and Subfield .01 of ITEM sub-file
"RTN","TIUDD1",6,0)
 N TIUCLASS,TIUSTTS,TIUTTL
"RTN","TIUDD1",7,0)
 I FLD=10.01 D
"RTN","TIUDD1",8,0)
 . ; Include only TITLES in the index
"RTN","TIUDD1",9,0)
 . I $P($G(^TIU(8925.1,+X,0)),U,4)'="DOC" Q
"RTN","TIUDD1",10,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+X,0)),U,7)
"RTN","TIUDD1",11,0)
 . ; Include only TEST or ACTIVE titles
"RTN","TIUDD1",12,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,1:1) Q
"RTN","TIUDD1",13,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+X,0)),U)
"RTN","TIUDD1",14,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",15,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",16,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+X)
"RTN","TIUDD1",17,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",18,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+X)=""
"RTN","TIUDD1",19,0)
 . S ^TIU(8925.1,"ACL",38,TIUTTL,+X)=""
"RTN","TIUDD1",20,0)
 . D SACLKWIC(TIUTTL,TIUCLASS,+X)
"RTN","TIUDD1",21,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",22,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+X)
"RTN","TIUDD1",23,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",24,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+X)=""
"RTN","TIUDD1",25,0)
 . D SACLKWIC(TIUTTL,TIUCLASS,+X)
"RTN","TIUDD1",26,0)
 ; For Abbreviation and Print Name fields, just set the Synonym subscript
"RTN","TIUDD1",27,0)
 I $S(FLD=.02:1,FLD=.03:1,1:0) D  Q
"RTN","TIUDD1",28,0)
 . N TIUDA
"RTN","TIUDD1",29,0)
 . Q:X']""
"RTN","TIUDD1",30,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",31,0)
 . I $P($G(^TIU(8925.1,+TIUDA,0)),U,4)'="DOC" Q
"RTN","TIUDD1",32,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+TIUDA,0)),U,7)
"RTN","TIUDD1",33,0)
 . ; Include only TEST or ACTIVE titles
"RTN","TIUDD1",34,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,1:1) Q
"RTN","TIUDD1",35,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+TIUDA,0)),U)
"RTN","TIUDD1",36,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",37,0)
 . S X=$$UP^XLFSTR(X)
"RTN","TIUDD1",38,0)
 . Q:X=TIUTTL
"RTN","TIUDD1",39,0)
 . S TIUTTL=X_"  <"_TIUTTL_">"
"RTN","TIUDD1",40,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",41,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",42,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",43,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",44,0)
 . S ^TIU(8925.1,"ACL",38,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",45,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",46,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",47,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",48,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",49,0)
 I FLD=.07 D  Q
"RTN","TIUDD1",50,0)
 . N TIUDA
"RTN","TIUDD1",51,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",52,0)
 . I $P($G(^TIU(8925.1,+TIUDA,0)),U,4)'="DOC" Q
"RTN","TIUDD1",53,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+TIUDA,0)),U,7)
"RTN","TIUDD1",54,0)
 . ; Include only TEST or ACTIVE titles
"RTN","TIUDD1",55,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,1:1) Q
"RTN","TIUDD1",56,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+TIUDA,0)),U)
"RTN","TIUDD1",57,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",58,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",59,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",60,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",61,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",62,0)
 . S ^TIU(8925.1,"ACL",38,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",63,0)
 . D SACLKWIC(TIUTTL,TIUCLASS,+TIUDA)
"RTN","TIUDD1",64,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",65,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",66,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",67,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)=""
"RTN","TIUDD1",68,0)
 . D SACLKWIC(TIUTTL,TIUCLASS,+TIUDA)
"RTN","TIUDD1",69,0)
 I FLD=.01 D
"RTN","TIUDD1",70,0)
 . N TIUDA
"RTN","TIUDD1",71,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",72,0)
 . I $P($G(^TIU(8925.1,+TIUDA,0)),U,4)'="DOC" Q
"RTN","TIUDD1",73,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+TIUDA,0)),U,7)
"RTN","TIUDD1",74,0)
 . ; Include only TEST or ACTIVE titles
"RTN","TIUDD1",75,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,1:1) Q
"RTN","TIUDD1",76,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",77,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",78,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",79,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,X,+TIUDA)=""
"RTN","TIUDD1",80,0)
 . S ^TIU(8925.1,"ACL",38,X,+TIUDA)=""
"RTN","TIUDD1",81,0)
 . D SACLKWIC(X,TIUCLASS,+TIUDA)
"RTN","TIUDD1",82,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",83,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",84,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",85,0)
 . S ^TIU(8925.1,"ACL",TIUCLASS,X,+TIUDA)=""
"RTN","TIUDD1",86,0)
 . D SACLKWIC(X,TIUCLASS,+TIUDA)
"RTN","TIUDD1",87,0)
 Q
"RTN","TIUDD1",88,0)
SACLKWIC(X,TIUCLASS,TIUDA) ; Set logic for KWIC analog
"RTN","TIUDD1",89,0)
 N TIUI,TIUJ,TIUC S TIUI=1
"RTN","TIUDD1",90,0)
 F TIUJ=1:1:$L(X)+1 D
"RTN","TIUDD1",91,0)
 . S TIUC=$E(X,TIUJ)
"RTN","TIUDD1",92,0)
 . I "(,.?! '-/&:;)"[TIUC S TIUC=$E($E(X,TIUI,TIUJ-1),1,30),TIUI=TIUJ+1
"RTN","TIUDD1",93,0)
 . I  I $L(TIUC)>2,(^DD("KWIC")'[TIUC),(TIUC'=X) S (^TIU(8925.1,"ACL",TIUCLASS,TIUC_"  <"_X_">",TIUDA),^TIU(8925.1,"ACL",38,TIUC_"  <"_X_">",TIUDA))=""
"RTN","TIUDD1",94,0)
 Q
"RTN","TIUDD1",95,0)
KACL(X,FLD) ; KILL Logic for ACL cross-reference
"RTN","TIUDD1",96,0)
 N TIUCLASS,TIUTTL,TIUDA
"RTN","TIUDD1",97,0)
 I FLD=10.01 D
"RTN","TIUDD1",98,0)
 . ; First remove x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",99,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+X)
"RTN","TIUDD1",100,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+X,0)),U)
"RTN","TIUDD1",101,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",102,0)
 . Q:X=TIUTTL
"RTN","TIUDD1",103,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+X)
"RTN","TIUDD1",104,0)
 . K ^TIU(8925.1,"ACL",38,TIUTTL,+X)
"RTN","TIUDD1",105,0)
 . D KACLKWIC(TIUTTL,TIUCLASS,+X)
"RTN","TIUDD1",106,0)
 . ; Now remove x-ref for document classes
"RTN","TIUDD1",107,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+X)
"RTN","TIUDD1",108,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+X)
"RTN","TIUDD1",109,0)
 . D KACLKWIC(TIUTTL,TIUCLASS,+X)
"RTN","TIUDD1",110,0)
 I $S(FLD=.02:1,FLD=.03:1,1:0) D  Q
"RTN","TIUDD1",111,0)
 . N TIUDA
"RTN","TIUDD1",112,0)
 . Q:X']""
"RTN","TIUDD1",113,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",114,0)
 . I $P($G(^TIU(8925.1,+TIUDA,0)),U,4)'="DOC" Q
"RTN","TIUDD1",115,0)
 . S TIUSTTS=$P($G(^TIU(8925.1,+TIUDA,0)),U,7)
"RTN","TIUDD1",116,0)
 . ; Include only TEST or ACTIVE titles
"RTN","TIUDD1",117,0)
 . I $S(TIUSTTS=10:0,TIUSTTS=11:0,1:1) Q
"RTN","TIUDD1",118,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+TIUDA,0)),U)
"RTN","TIUDD1",119,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",120,0)
 . S TIUTTL=X_"  <"_TIUTTL_">"
"RTN","TIUDD1",121,0)
 . ; First build x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",122,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",123,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",124,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)
"RTN","TIUDD1",125,0)
 . K ^TIU(8925.1,"ACL",38,TIUTTL,+TIUDA)
"RTN","TIUDD1",126,0)
 . ; Now build x-ref for document classes
"RTN","TIUDD1",127,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",128,0)
 . I TIUCLASS'>0 Q
"RTN","TIUDD1",129,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)
"RTN","TIUDD1",130,0)
 I FLD=.07 D
"RTN","TIUDD1",131,0)
 . N TIUDA
"RTN","TIUDD1",132,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",133,0)
 . ; First remove x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",134,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",135,0)
 . S TIUTTL=$P($G(^TIU(8925.1,+TIUDA,0)),U)
"RTN","TIUDD1",136,0)
 . Q:TIUTTL']""
"RTN","TIUDD1",137,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)
"RTN","TIUDD1",138,0)
 . K ^TIU(8925.1,"ACL",38,TIUTTL,+TIUDA)
"RTN","TIUDD1",139,0)
 . D KACLKWIC(TIUTTL,TIUCLASS,+TIUDA)
"RTN","TIUDD1",140,0)
 . ; Now remove x-ref for document classes
"RTN","TIUDD1",141,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",142,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,TIUTTL,+TIUDA)
"RTN","TIUDD1",143,0)
 . D KACLKWIC(TIUTTL,TIUCLASS,+TIUDA)
"RTN","TIUDD1",144,0)
 I FLD=.01 D
"RTN","TIUDD1",145,0)
 . N TIUDA
"RTN","TIUDD1",146,0)
 . S TIUDA=$S(+$G(DA(1)):+$G(DA(1)),1:+$G(DA))
"RTN","TIUDD1",147,0)
 . ; First remove x-ref for Clinical Documents & Immediate descendents
"RTN","TIUDD1",148,0)
 . S TIUCLASS=+$$CLINDOC^TIULC1(+TIUDA)
"RTN","TIUDD1",149,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,X,+TIUDA)
"RTN","TIUDD1",150,0)
 . K ^TIU(8925.1,"ACL",38,X,+TIUDA)
"RTN","TIUDD1",151,0)
 . D KACLKWIC(X,TIUCLASS,+TIUDA)
"RTN","TIUDD1",152,0)
 . ; Now remove x-ref for document classes
"RTN","TIUDD1",153,0)
 . S TIUCLASS=+$$DOCCLASS^TIULC1(+TIUDA)
"RTN","TIUDD1",154,0)
 . K ^TIU(8925.1,"ACL",TIUCLASS,X,+TIUDA)
"RTN","TIUDD1",155,0)
 . D KACLKWIC(X,TIUCLASS,+TIUDA)
"RTN","TIUDD1",156,0)
 Q
"RTN","TIUDD1",157,0)
KACLKWIC(X,TIUCLASS,TIUDA) ; KILL Logic for KWIC analog
"RTN","TIUDD1",158,0)
 N TIUI,TIUJ,TIUC S TIUI=1
"RTN","TIUDD1",159,0)
 F TIUJ=1:1:$L(X)+1 D
"RTN","TIUDD1",160,0)
 . S TIUC=$E(X,TIUJ)
"RTN","TIUDD1",161,0)
 . I "(,.?! '-/&:;)"[TIUC S TIUC=$E($E(X,TIUI,TIUJ-1),1,30),TIUI=TIUJ+1
"RTN","TIUDD1",162,0)
 . I  I $L(TIUC)>2 K ^TIU(8925.1,"ACL",TIUCLASS,TIUC_"  <"_X_">",TIUDA),^TIU(8925.1,"ACL",38,TIUC_"  <"_X_">",TIUDA)
"RTN","TIUDD1",163,0)
 Q
"RTN","TIUPS163")
0^2^B9261927
"RTN","TIUPS163",1,0)
TIUPS163 ; SLC/JER,AJB - More Review Screen Actions ;14-MAY-2004 [10/18/04 11:47am]
"RTN","TIUPS163",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**163**;Jun 20, 1997
"RTN","TIUPS163",3,0)
MAIN ;controls branching
"RTN","TIUPS163",4,0)
 D REINDEX,NEWXREF
"RTN","TIUPS163",5,0)
 Q
"RTN","TIUPS163",6,0)
NEWXREF ;creates new xref "VS" on field 1207
"RTN","TIUPS163",7,0)
 N TIUD0,TIUARR,TIURES
"RTN","TIUPS163",8,0)
 S TIUD0=0
"RTN","TIUPS163",9,0)
 S TIUD0=$O(^TIU(8925,"VS",TIUD0))
"RTN","TIUPS163",10,0)
 I 'TIUD0 D
"RTN","TIUPS163",11,0)
 . S TIUARR("FILE")=8925
"RTN","TIUPS163",12,0)
 . S TIUARR("NAME")="VS"
"RTN","TIUPS163",13,0)
 . S TIUARR("USE")="LS"
"RTN","TIUPS163",14,0)
 . S TIUARR("TYPE")="R"
"RTN","TIUPS163",15,0)
 . S TIUARR("SHORT DESCR")="REGULAR XREF ON FIELD 1207"
"RTN","TIUPS163",16,0)
 . S TIUARR("DESCR",1)="THIS XREF CONTAINS AS A SUBSCRIPT"
"RTN","TIUPS163",17,0)
 . S TIUARR("DESCR",2)="THE VALUE OF FIELD 1207 OF FILE #8925"
"RTN","TIUPS163",18,0)
 . S TIUARR("VAL",1)=1207
"RTN","TIUPS163",19,0)
 . S TIUARR("VAL",1,"SUBSCRIPT")=1
"RTN","TIUPS163",20,0)
 . D CREIXN^DDMOD(.TIUARR,"W",.TIURES,"OUT")
"RTN","TIUPS163",21,0)
 D QUE
"RTN","TIUPS163",22,0)
 Q
"RTN","TIUPS163",23,0)
QUE ;queue the indexing of the VS xref
"RTN","TIUPS163",24,0)
 N TIUD0
"RTN","TIUPS163",25,0)
 S TIUD0=0
"RTN","TIUPS163",26,0)
 S TIUD0=$O(^TIU(8925,"VS",TIUD0))
"RTN","TIUPS163",27,0)
 I 'TIUD0 D
"RTN","TIUPS163",28,0)
 . N ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTSK,DIR,TIUQUIT
"RTN","TIUPS163",29,0)
 . S ZTRTN="INDEXVS^TIUPS163",ZTIO="",ZTSAVE("DUZ")=""
"RTN","TIUPS163",30,0)
 . S ZTDESC="Index the new VS XRef on file 8925"
"RTN","TIUPS163",31,0)
 . D ^%ZTLOAD
"RTN","TIUPS163",32,0)
 . I $G(ZTSK) D
"RTN","TIUPS163",33,0)
 . . K ^XTMP("TIUPS163")
"RTN","TIUPS163",34,0)
 . . N X,X1,X2 S X1=DT,X2=30
"RTN","TIUPS163",35,0)
 . . D C^%DTC
"RTN","TIUPS163",36,0)
 . . S ^XTMP("TIUPS163",0)=X_"^"_DT_"^"
"RTN","TIUPS163",37,0)
 . . S ^XTMP("TIUPS163","COUNT")=0
"RTN","TIUPS163",38,0)
 . . W !!,"A task has been queued in the background."
"RTN","TIUPS163",39,0)
 . . W !,"  The task number is "_$G(ZTSK)_"."
"RTN","TIUPS163",40,0)
 . . W !,"  To check on the status of the task, in programmer mode "
"RTN","TIUPS163",41,0)
 . . W !,"    type D STATUS^TIUPS163"
"RTN","TIUPS163",42,0)
 Q
"RTN","TIUPS163",43,0)
REINDEX ;reindex the ACL xref on 8925.1
"RTN","TIUPS163",44,0)
 N DIK
"RTN","TIUPS163",45,0)
 S DIK="^TIU(8925.1,",DIK(1)=".01^ACL"
"RTN","TIUPS163",46,0)
 D BMES^XPDUTL("REBUILDING NEW ""ACL"" CROSS-REFERENCE ON FILE 8925.1")
"RTN","TIUPS163",47,0)
 K ^TIU(8925.1,"ACL") ; Remove the existing ACL x-ref
"RTN","TIUPS163",48,0)
 D ENALL^DIK
"RTN","TIUPS163",49,0)
 D BMES^XPDUTL("DONE")
"RTN","TIUPS163",50,0)
 Q
"RTN","TIUPS163",51,0)
INDEXVS ;index the VS xref on 8925
"RTN","TIUPS163",52,0)
 N TIUDA,TIUCNT,%,%H,%I,X
"RTN","TIUPS163",53,0)
 D NOW^%DTC
"RTN","TIUPS163",54,0)
 S ^XTMP("TIUPS163","STARTDT")=%
"RTN","TIUPS163",55,0)
 S TIUDA=0,TIUCNT=0
"RTN","TIUPS163",56,0)
 F  S TIUDA=$O(^TIU(8925,TIUDA)) Q:'TIUDA  S TIUCNT=TIUCNT+1 S ^XTMP("TIUPS163","COUNT")=TIUCNT I $P($G(^TIU(8925,TIUDA,12)),U,7)  S ^TIU(8925,"VS",$P($G(^TIU(8925,TIUDA,12)),U,7),TIUDA)=""
"RTN","TIUPS163",57,0)
 D NOW^%DTC
"RTN","TIUPS163",58,0)
 S ^XTMP("TIUPS163","ENDDT")=%
"RTN","TIUPS163",59,0)
 Q
"RTN","TIUPS163",60,0)
STATUS ;check on status of VS xref indexing
"RTN","TIUPS163",61,0)
 I $G(^XTMP("TIUPS163","ENDDT")) D
"RTN","TIUPS163",62,0)
 . N START,END,X,Y
"RTN","TIUPS163",63,0)
 . W !,"Indexing completed!"
"RTN","TIUPS163",64,0)
 . S Y=$G(^XTMP("TIUPS163","STARTDT")) D DD^%DT
"RTN","TIUPS163",65,0)
 . W !,"Task started: "_Y
"RTN","TIUPS163",66,0)
 . S Y=$G(^XTMP("TIUPS163","ENDDT")) D DD^%DT
"RTN","TIUPS163",67,0)
 . W !,"Task ended:   "_Y
"RTN","TIUPS163",68,0)
 I '$G(^XTMP("TIUPS163","ENDDT")) D
"RTN","TIUPS163",69,0)
 . W "Still working on the index."
"RTN","TIUPS163",70,0)
 . W !,$G(^XTMP("TIUPS163","COUNT"))_" of "_$P($G(^TIU(8925,0)),U,4)
"RTN","TIUPS163",71,0)
 . W " completed"
"RTN","TIUPS163",72,0)
 . I $G(^XTMP("TIUPS163","COUNT"))=0 W !,"You must have tasked it!"
"RTN","TIUPS163",73,0)
 Q
"SEC","^DD",8925.1,8925.1,.01,8.5)

"VER")
8.0^22.0
"^DD",8925.1,8925.1,.01,0)
NAME^RFX^^0;1^S:$L($T(^TIULS)) X=$$UPPER^TIULS(X) K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X I $D(X),+$G(DA) K:$$BADNAP^TIUFLF1(X,+$G(DA)) X
"^DD",8925.1,8925.1,.01,.1)

"^DD",8925.1,8925.1,.01,1,0)
^.1
"^DD",8925.1,8925.1,.01,1,1,0)
8925.1^B
"^DD",8925.1,8925.1,.01,1,1,1)
S ^TIU(8925.1,"B",$E(X,1,60),DA)=""
"^DD",8925.1,8925.1,.01,1,1,2)
K ^TIU(8925.1,"B",$E(X,1,60),DA)
"^DD",8925.1,8925.1,.01,1,2,0)
8925.1^E^KWIC
"^DD",8925.1,8925.1,.01,1,2,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^TIU(8925.1,"E",I,DA)=""
"^DD",8925.1,8925.1,.01,1,2,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^TIU(8925.1,"E",I,DA)
"^DD",8925.1,8925.1,.01,1,2,"%D",0)
^^2^2^2960302^
"^DD",8925.1,8925.1,.01,1,2,"%D",1,0)
This KWIK cross-reference on document name will allow look-up based on
"^DD",8925.1,8925.1,.01,1,2,"%D",2,0)
sub-names, etc.
"^DD",8925.1,8925.1,.01,1,2,"DT")
2960302
"^DD",8925.1,8925.1,.01,1,3,0)
8925.1^ACL^MUMPS
"^DD",8925.1,8925.1,.01,1,3,1)
D SACL^TIUDD1(X,.01)
"^DD",8925.1,8925.1,.01,1,3,2)
D KACL^TIUDD1(X,.01)
"^DD",8925.1,8925.1,.01,1,3,"%D",0)
^^7^7^3040831^
"^DD",8925.1,8925.1,.01,1,3,"%D",1,0)
This is a complex cross-reference on the .01 (NAME) field.  Its format
"^DD",8925.1,8925.1,.01,1,3,"%D",2,0)
will be as follows:
"^DD",8925.1,8925.1,.01,1,3,"%D",3,0)
 
"^DD",8925.1,8925.1,.01,1,3,"%D",4,0)
   ^TIU(8925.1,"ACL",Parent document class IEN, Title NAME, Title IEN)=""
"^DD",8925.1,8925.1,.01,1,3,"%D",5,0)
 
"^DD",8925.1,8925.1,.01,1,3,"%D",6,0)
The purpose of this cross-reference will be to help CPRS GUI perform 
"^DD",8925.1,8925.1,.01,1,3,"%D",7,0)
faster title look-ups by document class.
"^DD",8925.1,8925.1,.01,1,3,"DT")
2971016
"^DD",8925.1,8925.1,.01,3)
This is the technical name, 3-60 characters, not starting with punctuation.  If OBJECT, Name must be unique among all object Names, Abbreviations, and Print Names.
"^DD",8925.1,8925.1,.01,4)
D NAME^TIUFXHLX:$G(TIUFXNOD)["Add/Create"&($G(TIUFSTMP)="T")
"^DD",8925.1,8925.1,.01,21,0)
^^51^51^2980127^^^^
"^DD",8925.1,8925.1,.01,21,1,0)
The name of a Document Definition entry (.01 field) must be between 3
"^DD",8925.1,8925.1,.01,21,2,0)
and 60 characters long and may not begin with a punctuation character.
"^DD",8925.1,8925.1,.01,21,3,0)
Although names can be entered in any case, they are transformed to
"^DD",8925.1,8925.1,.01,21,4,0)
upper case before being stored.
"^DD",8925.1,8925.1,.01,21,5,0)
 
"^DD",8925.1,8925.1,.01,21,6,0)
It functions as the Technical Name of the entry.  Some sites have put KWIC
"^DD",8925.1,8925.1,.01,21,7,0)
cross references on it to get, say, all Titles from a given Service.
"^DD",8925.1,8925.1,.01,21,8,0)
 
"^DD",8925.1,8925.1,.01,21,9,0)
Name can be used when entering documents as the name of the Title being
"^DD",8925.1,8925.1,.01,21,10,0)
entered.  Print Name and Abbreviation will also be accepted.
"^DD",8925.1,8925.1,.01,21,11,0)
 
"^DD",8925.1,8925.1,.01,21,12,0)
Since it is the Technical, .01 Name, the Document Definition Utility
"^DD",8925.1,8925.1,.01,21,13,0)
(TIUF) uses this name throughout.
"^DD",8925.1,8925.1,.01,21,14,0)
 
"^DD",8925.1,8925.1,.01,21,15,0)
The .01 name differs from the Print Name, which appears in lists of
"^DD",8925.1,8925.1,.01,21,16,0)
documents and functions as the Title of the document.
"^DD",8925.1,8925.1,.01,21,17,0)
 
"^DD",8925.1,8925.1,.01,21,18,0)
It also differs from Item Menu Text (1-20 characters), which is used when
"^DD",8925.1,8925.1,.01,21,19,0)
selecting documents from 3-COLUMN MENUS.
"^DD",8925.1,8925.1,.01,21,20,0)
 
"^DD",8925.1,8925.1,.01,21,21,0)
The ORDER of names in TIUF options Edit Document Definitions and Create
"^DD",8925.1,8925.1,.01,21,22,0)
Document Definitions is by Item Sequence under the parent.  Order is
"^DD",8925.1,8925.1,.01,21,23,0)
alphabetic by Menu Text if an Item has no Item Sequence.
"^DD",8925.1,8925.1,.01,21,24,0)
 
"^DD",8925.1,8925.1,.01,21,25,0)
When a new entry is added to file 8925.1, the Document Definition Utility
"^DD",8925.1,8925.1,.01,21,26,0)
(TIUF) enters the Name as the default Print Name.  The Print Name can be
"^DD",8925.1,8925.1,.01,21,27,0)
edited if a different Print Name is desired.
"^DD",8925.1,8925.1,.01,21,28,0)
 
"^DD",8925.1,8925.1,.01,21,29,0)
File 8925.1 permits more than 1 entry with the same name as long as they
"^DD",8925.1,8925.1,.01,21,30,0)
don't have the same Type.  In that sense, NAMES are reusable.  However,
"^DD",8925.1,8925.1,.01,21,31,0)
ENTRIES are NOT reusable (except specially marked Components): an entry is
"^DD",8925.1,8925.1,.01,21,32,0)
NOT allowed to be an item under more than one parent unless it is a Shared
"^DD",8925.1,8925.1,.01,21,33,0)
Component.  (See Type Component.)
"^DD",8925.1,8925.1,.01,21,34,0)
 
"^DD",8925.1,8925.1,.01,21,35,0)
Name is a BASIC Field.
"^DD",8925.1,8925.1,.01,21,36,0)
 
"^DD",8925.1,8925.1,.01,21,37,0)
                               OBJECT Name 
"^DD",8925.1,8925.1,.01,21,38,0)
Object Names, like any other names are 3-60 characters, not starting with
"^DD",8925.1,8925.1,.01,21,39,0)
punctuation.  Sites may want to namespace object names, use the object
"^DD",8925.1,8925.1,.01,21,40,0)
Print Name as a more familiar name, and use object Abbreviation as a short
"^DD",8925.1,8925.1,.01,21,41,0)
name to embed in boilerplate text.  Unlike other Types, Object
"^DD",8925.1,8925.1,.01,21,42,0)
Abbreviation and Print Name as well as Name must be uppercase.
"^DD",8925.1,8925.1,.01,21,43,0)
 
"^DD",8925.1,8925.1,.01,21,44,0)
Object Name, Abbreviation, or Print Name can be embedded in boilerplate
"^DD",8925.1,8925.1,.01,21,45,0)
text.  Since TIU must be able to determine from this which object is
"^DD",8925.1,8925.1,.01,21,46,0)
intended, object Names, Abbreviations, and Print Names must be unique.  In
"^DD",8925.1,8925.1,.01,21,47,0)
fact, an object Name must differ not only from every other object name,
"^DD",8925.1,8925.1,.01,21,48,0)
but also from every other object Abbreviation and from every other object
"^DD",8925.1,8925.1,.01,21,49,0)
Print Name.  Same for Abbreviations and Print Names.  For example, if some
"^DD",8925.1,8925.1,.01,21,50,0)
object has abbreviation 'CND', then 'CND' cannot be used for any other
"^DD",8925.1,8925.1,.01,21,51,0)
object Name, Abbreviation, or Print Name.
"^DD",8925.1,8925.1,.01,"AUDIT")

"^DD",8925.1,8925.1,.01,"DEL",.01,0)
I 1
"^DD",8925.1,8925.1,.01,"DT")
3020107
**END**
**END**

$TXT Created by CASTLE,JOHN at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Tuesday, 11/15/05 at 10:22
=============================================================================
Run Date: APR 10, 2006                     Designation: PSJ*5*141
Package : PSJ - INPATIENT MEDICATIONS         Priority: Mandatory
Version : 5       SEQ #148                      Status: Released
                  Compliance Date: MAY 11, 2006
=============================================================================

Associated patches: (v)PSJ*5*133   <<= must be installed BEFORE `PSJ*5*141'
                    (v)PSJ*5*144   <<= must be installed BEFORE `PSJ*5*141'

Subject: ATZERO SCHEDULE LABELS AND UNIT DOSE PROVIDER DISPLAY

Category: 
  - Routine

Description:
============

  
      * WARNING - Prior to installing this patch, please check for local
      Class III modifications that may be overwritten upon installation.
      Failure to reinstall Class III modifications after installation of
      this patch may prevent the Class III changes from functioning
      properly.
  
      This patch addresses two issues in two Remedy tickets. 
  
      The first issue addressed by this patch arose when the site
      used the ATZERO (@0) flag on IV Piggybacks to prevent labels
      from printing.  Labels printed despite the flag being set.
  
      The second issue involves the wrong provider being displayed
      by CPRS and backdoor pharmacy when an order is renewed.  
      Currently, CPRS and backdoor pharmacy are still displaying the
      original provider.  The sites are expecting to see the 
      renewing provider to be displayed.
  
  
  
 ASSOCIATED NOIS/REMEDY TICKETS:
 ===============================
 REN-0302-62428/HD67466 - IV Labels printing even though schedule is @0
  
 HD89486                - Unit Dose Order Renewal Problems
 HD98638 (DUPLICATE)
 HD102299(DUPLICATE)
 HD117357(DUPLICATE)
  
  
  
 ASSOCIATED E3R(S):
 ==================
 N/A
  
 PARTICIPATING TEST SITES:
 =========================
 Charleston, SC
 Sierra Nevada HCS
 Puget Sound, WA
  
 NOIS/REMEDY OVERVIEW:
 =====================
 1.  REN-0302-62428/HD0000000067466
  
      Problem:
      --------
      When a site enters a schedule with a long-term interval between
      administrations greater than 1440 minutes (i.e. Q2WEEKS@0 is 20160
      minutes), the ATZERO flag is being ignored and labels print anyway.
  
      Resolution:
      -----------
      This patch corrects the printing of the @0 schedule labels
      by re-setting the number of labels that should print to 0
      if the ATZERO flag is set.
  
      Additionally, after verifying the order and prompted to either
      PRINT or BYPASS, if the ATZERO flag is set, the default will
      be BYPASS so no labels initially print.  If the user chooses
      PRINT anyway, the default number of labels will be 0.
  
  
 2.   HD0000000089486
  
      Problem:
      --------
      When the site renews unit dose orders through "backdoor"
      pharmacy, CPRS is not displaying the correct provider for
      the order if the provider was updated.
      New Order (Renewal) Entered By: field is displaying the
      person's name who originally created the order, not the
      person who entered the renewal order backdoor.
  
      Additionally, backdoor pharmacy is not updating the provider
      information in field 10 of the order display.
  
  
      Resolution:
      -----------
      This issue is resolved by ensuring the proper ID information
      is being sent to CPRS and backdoor pharmacy to display.
  
  
 TECHNICAL:
 ==========
  
 1.   REN-0302-62428/HD0000000067466 - ATZERO SCHED LABELS
  
      Even though the ATZERO flag is set when the @0 is added to
      a schedule, when the interval between administrations is
      greater than 1440 minutes (i.e. Q14Days is 20160 minutes), the
      code is ignoring the flag and will print at least one label.
      The fix is to add a conditional SET in QSP^PSIVWL that checks
      the ATZERO flag.  If the flag is set, the code will now re-set
      the needed label count to 0.  This fix also corrects the default
      choice when prompted to print a label after verifying the order.
      Before, on a long-interval schedule, the default would be P to 
      PRINT a label even if the ATZERO flag is set.  Now, after the change
      to QSP^PSIVWL, the default is B to BYPASS if the flag is set.
  
      
  
 2.   HD0000000089486 - UD PROVIDER
  
      When the DR string is being set in UPDREN^PSGOER, it is setting
      the wrong ID into the field that stores the Provider information.
      The fix to this is to change the incorrect setting of PSGOEPR to
      the correct value stored in PSGPR.
  
      In ORC^PSJHL2 the code checks the latest renewal date and
      can re-set the FIELD(9) value to the date of the latest
      renewal.  It is not, however, updating the name of the person
      who made the latest renewal.  The fix is to make a call to
      LASTRNBY^PSJLMPRI to get the name of the renewal person and
      then update FIELD(10) with that person's name.
  
  
 ROUTINE SUMMARY:
 ================
  
 The following is a list of the routines included in this patch.
 The second line of each of these routines now looks like this:
  
      ;;5.0; INPATIENT MEDICATIONS ;**[PATCH LIST]**;16 DEC 97
  
                        CHECK^XTSUMBLD results
  
 Routine Name  Before Patch  After Patch                         Patch List
 ============  ============  ===========                         ==========
  
 PSGOER        28819177      28781263    11,30,29,35,70,58,95,110,111,133,141
  
  
 PSIVWL        19731085      19947353              41,54,74,84,93,110,111,141
  
  
 PSJHL2        13772678      14269989       1,18,16,23,28,42,50,70,58,100,102
                                                          110,111,112,144,141
  
  
   * WARNING - Prior to installing this patch, please check for local
   Class III modifications that may be overwritten upon installation.
   Failure to reinstall Class III modifications after installation of
   this patch may prevent the Class III changes from functioning properly.
  
   Installation will take less than 1 minute.
   
   Suggested time to install: non-peak requirement hours.  IF A USER IS ON
   THE SYSTEM AND USING THESE PROGRAMS AN EDITED ERROR WILL OCCUR.  The
   patch should be installed when NO Inpatient Pharmacy users are on the
   system.
   
   1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
   
   2. From the Kernel Installation & Distribution System menu, select
      the Installation menu.
   
   3. From this menu, you may select to use the following options
      (when prompted for INSTALL NAME, enter PSJ*5.0*141):
          a.  Verify Checksums in Transport Global - This option will allow
              you to ensure the integrity of the routines that are in the
              transport global.
          b.  Print Transport Global - This option will allow you to view
              the components of the KIDS build.
          c.  Compare Transport Global to Current System - This option will
              allow you to view all changes that will be made when this patch
              is installed.  It compares all components of this patch
              (routines, DD's, templates, etc.).
          d.  Backup a Transport Global - This option will create a backup
              message of any routines exported with this patch. It will not
              backup any other changes such as DD's or templates.
    
   4. Use the Install Package(s) option and select the package PSJ*5.0*141.
    
   5. When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//"
      respond NO.
    
   6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//" respond NO. 
   
   7. When prompted "DEVICE: HOME//", respond with desired output device. If
      queueing is selected, when prompted "Requested Start Time: NOW//",
      respond with a return or enter.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSGOER
    Before: B72070079  After: B72290048  **11,30,29,35,70,58,95,110,111,
                                          133,141**
Routine Name: PSIVWL
    Before: B32855058  After: B33207502  **41,54,74,84,93,110,111,141**
Routine Name: PSJHL2
    Before: B31715034  After: B32582079  **1,18,16,23,28,42,50,70,58,100,
                                          102,110,111,112,144,141**

=============================================================================
User Information:
Entered By  : CASTLE,JOHN                   Date Entered  : APR 08, 2005
Completed By: TSAIMEUCHONG,BRENDA           Date Completed: APR 05, 2006
Released By : LESIEUR,SHIRLEY               Date Released : APR 10, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

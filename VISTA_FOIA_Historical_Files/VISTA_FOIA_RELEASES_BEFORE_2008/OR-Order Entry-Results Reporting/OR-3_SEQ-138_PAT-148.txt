$TXT Created by SHARP,PAUL at EXPCUR.FO-SLC.MED.VA.GOV  (KIDS) on TUESDAY, 07/23/02 at 14:17
=============================================================================
Run Date: JUL 24, 2002                     Designation: OR*3*148
Package : OR - ORDER ENTRY/RESULTS REPORTING Priority: EMERGENCY
Version : 3       SEQ #138                       Status: Released
=============================================================================

Associated patches: (v)TIU*1*124   <<= must be installed BEFORE `OR*3*148'
                    (v)PX*1*115    <<= must be installed BEFORE `OR*3*148'
                    (v)OR*3*132    <<= must be installed BEFORE `OR*3*148'
                    (v)GMPL*2*26   <<= must be installed BEFORE `OR*3*148'
                    (v)GMTS*2.7*52 <<= must be installed BEFORE `OR*3*148'
                    (v)XU*8*230    <<= must be installed BEFORE `OR*3*148'
                    (v)TIU*1*138   <<= must be installed BEFORE `OR*3*148'

Subject: REPORTS (READ) ONLY CPRS GUI

Category: 
  - Routine
  - Input Template
  - Enhancement ()

Description: 
============

 IMPORTANT NOTE ABOUT INSTALLATION REQUIREMENT:
 ==============================================
  
 This patch is being released as an emergency patch because it must be
 installed at all field facilities by August 14 (less than 30 days from 
 now).  It DOES NOT have to be installed within the mandatory timeframe for
 emergency patches as long as it is installed by August 14.
  
 A VHA CIO Directive, GUIDANCE ON ACCESS TO CPRS READ ONLY FUNCTIONALITY
 FOR AUTHORIZED USERS will be released to the field on or about August 5,
 2002.  The Under Secretary of Health's office announced that CPRS Read
 Only functionality will be made available to Veteran Service Organizations
 (VSO) on August 15, 2002.  Facilities will need to establish local
 processes to comply with the guidance outlined in this directive.    Other
 authorized users may be granted access to CPRS Read Only functionality
 prior to August 15.
  
  
 PATCH DESCRIPTION:
 ==================
  
 Patch OR*3*148 implements "Read Only" or "Reports Only" where a user 
 may be restricted to only the Reports Tab of the CPRS GUI.  It also 
 adds MILLENNIUM BILL PHASE II COPAY ENHANCEMENTS.  Details of these 
 and other modifications follow.
  
 -- REPORTS ONLY ("Read Only") tab functionality.  
  
 Patch XU*8.0*230 provides a new multiple within the option XUSEREDIT 
 ('Edit an Existing User'), for CPRS tabs entry and a revised entry 
 form with a new page 4.  Included in this OR patch is a new OR CPRS 
 TABS file [^ORD(101.13], which is pointed to by the NEW PERSON file 
 [^VA(200] for the CPRS tab entries.  When a user record in the NEW 
 PERSON file is entered or edited, one or more tab entries must be 
 made if that user is to have access to the CPRS GUI application.  
  
 The GUI application continues to read the data in two new fields which were 
 added to the NEW PERSON [^VA(200] file by the Kernel XU*8*214 patch.  The 
 field #101.01, labeled "RESTRICTED PATIENT SELECTION:" on the new page 4 
 entry form, is boolean (Y or N).  ***NOTE: The CPRS GUI application treats 
 no entry (a blank entry) in this field differently from a "N" entry - see 
 matrix below.  If an entry of "Y" is made, then a Team List from the OE/RR 
 LIST file must be entered in the second field (#101.02 - PATIENT SELECTION 
 LIST), or the CPRS GUI will abort, notifying the user that No Team List 
 information was found.  The application will also abort if the Team List 
 specified is invalid.  
  
 The new "CPRS TAB ACCESS:" entries on page 4 provide for entry of one or 
 more CPRS tabs or tab sets that the user will be allowed to access.  Each 
 entry allows for an "Effective Date" and an "Expiration Date" entry.  The 
 Effective Date must be entered while an Expiration Date is optional.  If no 
 Expiration Date is entered access to the tab does not expire for the user.  
 All tab entries are date-entry dependent for being considered valid!  Two 
 new tab entries are provided with this patch:  
  
     COR        All current CPRS GUI tabs
     RPT        Reports tab
  
 Note that there is a logic path followed by the GUI application with regard 
 to the entries in all of these fields under discussion.  The possible 
 scenarios are:
  
 Scenario A - The user is restricted to, and sees only, the REPORTS tab of 
 the CPRS GUI application.  In addition, the Tools/Options menu restricts 
 access to patient selection settings.  
  
 Scenario B - The user sees all tabs and can select from all patients.  
  
 Scenario C - The user has no access to the CPRS GUI.  
  
 Scenario D - The user has access to the Reports Tab only, and all patients.
  
 The following matrix should indicate what to expect:
  
     Restr. Pt. List     OE/RR Team          Tab(s)      Scenario
     = = = = = = = =     = = = = = =         = = = =     = = = = =
     (blank)             (none)              (none)      C
     (blank)             XYZ Team            (none)      C
     (blank)             XYZ Team            RPT         C
     Y                   (none/invalid)      RPT         C
     N                   XYZ Team            RPT         D
     Y                   XYZ Team            RPT         A
     N                   N/A                 COR         B
     N                   N/A                 COR, RPT    B
     Y                   N/A                 COR         B
     Y                   N/A                 COR, RPT    B
     (blank)             N/A                 COR         C
     (blank)             N/A                 COR, RPT    C
  
 It will be seen that the "COR" tab overrules other tab settings, allows 
 access to all tabs, and also allows access to all patients - except when 
 the "RESTRICTED PATIENT SELECTION" entry is left blank.  
  
 Note that more than one entry can be made for the same tab.  For example, a 
 "RPT" tab entry could be made for a user with valid dates equating to the 
 second week of the current month, then another "RPT" entry made with dates 
 allowing access for the first week of the next month.  To create a 
 duplicate entry of the same tab, the user must select "No" when prompted 
 for the new entry on a blank line.  Some users may not be familiar with 
 this standard Fileman behavior.  
  
 -------------------------------------------------------------------------
 Example:
 Select CPRS Configuration (Clin Coord) Option: ga  GUI Access - Tabs, RPL
  
 Select NEW PERSON NAME:  DOE,JOE              JD    
 RESTRICT PATIENT SELECTION: YES// 
 PATIENT SELECTION LIST: 
 Select CPRS TAB: rpt       Reports tab.
   Are you adding 'RPT' as a new CPRS TAB (the 1ST for this NEW PERSON)? 
 No// y
   (Yes)
   EFFECTIVE DATE: T  (JUN 13, 2002)
   EXPIRATION DATE: T+7  (JUN 20, 2002)
 Select CPRS TAB: RPT       Reports tab.         Jun 13,2002     Jun 20,2002
          ...OK? Yes// N  (No)
  
   Are you adding 'RPT' as a new CPRS TAB (the 2ND for this NEW PERSON)? 
 No// Y
   (Yes)
   EFFECTIVE DATE: T+10  (JUN 23, 2002)
   EXPIRATION DATE: T+20  (JUL 03, 2002)
 Select CPRS TAB: 
 ---------------------------------------------------------------------------
  
 The ruling logic for multiple entries of the same tab is:
  
     If any entry for a given tab allows access to the tab 
     as of the date of login, then the tab is allowed, regardless  
     of any other entries which may exist for that tab.  
  
 Post-install code contained in this patch should set the "RESTRICTED 
 PATIENT SELECTION" entry to "N" for all current CPRS GUI users, and create 
 a default "COR" tab entry for them as well.  The post-install will send 
 a message, to the installer of the patch, a list of users for whom defaults  
 could not be determined or default entries created.
  
 In connection with "Reports Only" functionality, the Patient List 
 utilized, which is based on an OE/RR LIST, is stored, displayed, scrolled, 
 and refreshed fully from a ^TMP global.  
  
 - A new option, ORCL CPRS ACCESS, has been added to the CAC menu (OR PARAM 
 COORDINATOR MENU).  From this menu anyone with access to the CAC menu can 
 reach the new fields (#101.01 & 101.02) and new multiple (#101.13) in the 
 NEW PERSON file [^VA(200,] pertaining to "Reports Only" functionality 
 and CPRS tabs.   This precludes the necessity of using Kernel options 
 such as EVE to make or modify these entries.  A new Input Template, 
 OR USER ACCESS OPTIONS, has been created for this entry, and linked 
 to the new ORCL CPRS ACCESS option above.    
  
 -- MILLENNIUM BILL PHASE II COPAY ENHANCEMENTS
  
 - On the Problems tab, all service-connected conditions will now be 
 displayed in the grid, in parentheses following the problem text.  The same 
 will be true of the list of active problems displayed on the cover sheet.  
  
 - On the Problems tab add/edit screen, entry/edit checkboxes for Head/Neck 
 Cancer (HNC) and Military Sexual Trauma (MST) have been added.   
  
 - The Reports tab has been modified to include a column in the problem list 
 reports to show service-connected conditions.  The text of each of these 
 reports has also been modified to display service-connected conditions in 
 the text below the list when a problem is selected.
  
 -- TOOLS/OPTIONS MENU
  
 - REPORTS ONLY ("READ ONLY") users will now see no other selections 
 under the Tools menu except "Options." 
  
 -- CONSULTS
  
 - NOIS: BUT-0202-20291 - Additional signers for a consults note have 
 been unable to sign the note from the Consults tab if not processing an 
 alert and if not an update user for the service of the consult.  
 This has been corrected.  
  
 - When forwarding a consult, if a person was not selected in the "ATTENTION 
 OF" box, a value of "0" was being stored in the consult record.  This has 
 been corrected.
  
 - NOIS: CTX-0202-70888 - When forwarding a consult, the "Responsible 
 Clinician" prompt has been changed to "Responsible Person", the 
 selection box now contains all entries from the NEW PERSON file (200), 
 and the current user is pre-selected by default. 
  
 -- NOTES TAB
  
  - When adding or editing an addendum to a consult-class note, the parent 
 note and the original order are locked to prevent any simultaneous updates
 to that consult record.  It was reported by a site at Camp CPRS 2002 that
 the lock on the order was not getting released when the addendum was 
 signed.  This has been corrected.
  
 -- COVER SHEET
  
 - After installation of Problem List patch GMPL*2.0*26, service-connected 
 conditions will appear in parentheses following the text of the problem on 
 the cover sheet, as outlined above.  This patch corrects this, and 
 displays the conditions in upper case.
  
 - It has been reported that the service-connected exposures should always 
 appear in uppercase following the problem text in the cover sheet 
 problem list.  This was not occurring in the case where a change 
 was made to a problem on the problems tab, and then the cover sheet was 
 immediately re-viewed.  That situation has been addressed.
  
 - NOIS: DUR-0502-31117 - Lab results greater than 7 characters were not 
 formatting correctly on the Cover Sheet.  This patch will correct this 
 problem.
  
 -- ENCOUNTERS/VISITS
  
 - CPT modifiers can now be selected on the Visit tab of the encounter form, 
 to be associated with the Visit Type CPT code selected there.
  
 - TIU patch TIU*1.0*124 provides a fix for a problem with visits not being 
 properly linked to TIU documents.  TIU*1.0*124 is now required for CPRS 
 GUI V19.
  
 -- SURGERY TAB
  
 - Prevented an error at GETONE+5^ORWSR which occurred if a TIU surgery 
 report was referenced which was not properly linked to its parent surgical 
 case.  NOTE: View of the Surgery Tab requires patch SR*3*100.
  
 -- DISCHARGE SUMMARY TAB
  
 - NOIS: LOM-0502-62302 - If no value existed in the TIU DOCUMENT 
 PARAMETERS file for the parameter REQUIRE MAS VERIFICATION, an access 
 violation could occur when attempting signature of a Discharge 
 Summary.  This has been corrected.  
  
 -- REPORTS TAB
  
 - By request, added the Radiology case IEN to the end of the Windows 
 message broadcast by CPRS when an "Imaging (local only)" report is 
 selected for display on the Reports tab.  This change should be invisible 
 to most users.
  
 - The maximum occurrence limits for remote data queries on the Reports 
 tab were being ignored in the released version patch OR*3*132.  This has 
 been corrected. 
  
 - NOIS  HUN-0502-23073: the value of ORCH CONTEXT REPORT was still used 
 for Imaging Reports on the Reports tab. This has been fixed. The date 
 range for Imaging reports will use the value of the ORWRP TIME/OCC 
 LIMIT.. parameter.
  
 - The header showing the start date, end date, and number of occurrences 
 was updated to allow for the change to ORWRP TIME/OCC LIMIT parameter.
  
 - The text-based reports, under Clinical Reports on the Reports Tab, were 
 not showing the text of the report.  This has been fixed.
  
 -- NOTIFICATIONS
  
 - The GUI alert follow-up action for the Imaging Request/Procedure 
 Changed notification was modified.  Previously, the follow-up action 
 displayed either the patient's current imaging requests on the Reports 
 tab or nothing.  The follow-up action now displays what was changed in 
 the request/procedure.
  
 -- RADIOLOGY ORDERING
  
 - NOIS: PUG-1099-51408 - When ordering an inpatient exam for a current 
 outpatient, the user is presented with a list of inpatient locations, and 
 must make a selection so that the order category will match the location 
 type, and the order can be accepted by the Radiology package.  It has been 
 observed that an inordinate amount of time is required for the selection 
 list of inpatient locations to be built.  An improvement for this problem 
 has been included here. 
  
 -- HELP FILE
  
 A "What's New in CPRS GUI Version x" topic has been added to the online 
 help file. This topic includes a list of some of the new functionality in 
 the current release with links to the accompanying documentation.
  
 -- OTHER
  
 - NOIS: DUR-0801-32713, LOM-0302-60396 - Order checks for duplicate drug 
 orders for the same medication did not work in some cases, such as insulin 
 injection.  This patch provides a fix.
  
 - NOIS: CPH-0402-42064 - Improves processing of expiring medication orders 
 when considering deletion of Medications Expiring alerts.  Problem was 
 noted in the remote procedure call ORWORB KILL EXPIR MED ALERT.  This GUI 
 rpc is called when many order actions are taken, most notably after 
 electronic signature.  After patch installation, post electronic 
 signature response time should improve.
  
 - NOIS: PUG-0799-51394 - When forwarding a consult, the combo box for 
 selection of a service has been changed to display multiple entries, 
 similar to the consults ordering dialog.
  
 - NOIS WRJ-0602-12542: ORWDPS ROUTING DEFAULT was not honored when 
 transferring med orders from inpatient to outpatient on the Meds tab. 
 This has been fixed.
  
   
 REQUIRED BUILDS:
 ===============
  
    GMPL*2.0*26
    GMTS*2.7*52
    OR*3.0*132
    PX*1*115
    TIU*1.0*124
    TIU*1.0*138
    XU*8.0*230
  
 NOTE: Internet Explorer 4 (IE4) or later is REQUIRED in order for 
 GUI version 19 to run. IE5 is recommended for full functionality. 
  
  
 ROUTINE SUMMARY:
 ===============
  
 The following is a list of the routine(s) included in this patch.  
 The second line of each of these routine(s) will look like:
  
 <tab>;;3.0;ORDER ENTRY/RESULTS REPORTING;**[patch list]**;Dec 17, 1997
  
                          CHECK^XTSUMBLD results
  Routine name     Before Patch       After Patch        Patch List
  ============     ============       ===========        ==========
  ORCXPND1             17204250          18881596   26,67,75,89,92,94,148
  ORDV04               16313270          16563372          109,148
  ORQ11                20746672          20735814  7,27,48,72,78,99,94,148
  ORQQCN1               5483394           5513071      10,98,85,109,148
  ORQQPL1               8295282           8531650         10,85,148
  ORQQPL3               7514171           8144329           10,148
  ORWDPS2              10821232          10994196   85,116,125,131,132,148
  ORWDXA               12950827          12963497     10,85,116,132,148
  ORWORB               11403840          11500350       10,85,116,148
  ORWPCE1              11873689          12192572     10,85,116,132,148
  ORWRA                 1764887           1786950   10,85,109,135,132,148
  ORWSR                 6403387           6398463      109,116,132,148
  ORWTPD                5855369           4737746      109,120,132,148
  ORWU                 11989214          12875509       10,85,132,148
  ORY148                    N/A           6892151            148
  
  
 INSTALLATION FILES:
 ==================
  
 The following software and documentation files, including the last 
 file which contains the Delphi source code, are exported as part of 
 this patch:
  
    File Name               Contents                      Retrieval Format
    ---------               --------                      ----------------
    OR_30_148.ZIP           File(s) indented below                  BINARY
     - CPRSCHART.EXE            CPRS Executable
     - CPRS.HLP                 CPRS Help File
     - CPRS.CNT                 CPRS Help File
     - CPRSGUIUM.PDF            CPRS GUI User Manual       
     - CPRSGUIUM.DOC            CPRS GUI User Manual (Word Version)  
     - CPRSGUIUM_RO.PDF         CPRS GUI Read Only User Manual       
     - CPRSGUIUM_RO.DOC         CPRS GUI Read Only U. Man. (Word Version)
     - CPRSGUITM.PDF            CPRS GUI Technical Manual
     - CPRSGUITM.DOC            CPRS GUI Technical Manual (Word Version)
     - CPRSLMTM.DOC             CPRS List Manager Technical Manual (Word)
     - CPRSLMTM.PDF             CPRS List Manager Technical Manual
     - OR_30_148_RN.PDF         CPRS GUI V19_8 Release Notes 
     - OR_30_148_RN.DOC         CPRS GUI V19_8 Release Notes (Word Version)
    OR_30_148_SRC.ZIP       CPRSChart Source                        BINARY
  
 The files listed above may be obtained via FTP.  The preferred method is
 to FTP the files from:
  
    download.vista.med.va.gov
  
 This transmits the files from the first available FTP server.  Sites may
 also elect to retrieve software directly from a specific server as
 follows:
  
    CIO FIELD OFFICE   FTP ADDRESS                 DIRECTORY
    ----------------   -------------------------   --------------------
    Albany             ftp.fo-albany.med.va.gov    [anonymous.software]
    Hines              ftp.fo-hines.med.va.gov     [anonymous.software]
    Salt Lake City     ftp.fo-slc.med.va.gov       [anonymous.software]
  
  
 INSTALLATION INSTRUCTIONS:
 ========================= 
  
 Users may be on the system during installation of this patch, 
 though this patch should be loaded during non-peak hours to 
 minimize disruption.  
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2.  Review your mapped set.  If any of the routines listed in the
     ROUTINE SUMMARY section are mapped, they should be removed
     from the mapped set at this time.
  
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter OR*3.0*148):
         a.  Backup a Transport Global
         b.  Compare Transport Global to Current System
         c.  Verify Checksums in Transport Global
   
 5.  Use the Install Package(s) option and select the package OR*3.0*148.
  
 6.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
     Install? Yes//", respond "NO".
  
 7.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
     you may respond NO.
  
 8.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond YES.  When prompted to select the options
     you would like to place out of order, enter the following:
  
         OR OE/RR MENU CLINICIAN          CPRS Clinician Menu
         OR OE/RR MENU NURSE              CPRS Nurse Menu
         OR OE/RR MENU WARD CLERK         CPRS Ward Clerk Menu
         OR CPRS GUI CHART
  
 9. When prompted 'Delay Install (Minutes):  (0-60): 0//; respond '0'.
  
 10. If routines were unmapped as part of step 2, they should be returned
     to the mapped set once the installation has run to completion.
  
 11. Following successful installation, the pre/post-install routine 
     ORY148 may be deleted. 

Routine Information:
====================

Routine Name:
  - ORWU


Routine Checksum:

Routine Name:
  - ORWDXA


Routine Checksum:

Routine Name:
  - ORQ11


Routine Checksum:

Routine Name:
  - ORWSR


Routine Checksum:

Routine Name:
  - ORCXPND1


Routine Checksum:

Routine Name:
  - ORDV04


Routine Checksum:

Routine Name:
  - ORQQCN1


Routine Checksum:

Routine Name:
  - ORQQPL1


Routine Checksum:

Routine Name:
  - ORQQPL3


Routine Checksum:

Routine Name:
  - ORWPCE1


Routine Checksum:

Routine Name:
  - ORY148


Routine Checksum:

Routine Name:
  - ORWORB


Routine Checksum:

Routine Name:
  - ORWRA


Routine Checksum:

Routine Name:
  - ORWTPD


Routine Checksum:

Routine Name:
  - ORWDPS2


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : SHARP,PAUL                     Date Entered : MAY 21, 2002
Completed By: INSLEY,MARCIA                 Date Completed: JUL 24, 2002
Released By : SCOTT,JEAN M                 Date Released : JUL 24, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT
